# StackOverflow 问答 12259000-12259999

# php - 如何正确编写正则表达式

> ID：12259001
> 
> 赞同：1
> 
> 时间：2012-09-04T07:51:58.400
> 
> 标签：php, regex, preg-replace

我有字符串`$text = " /var/www/images/mobile/test/test/, 1346744549";`，我需要将其转换为`$text = " '/var/www/images/mobile/test/test/', '1346744549'";`- 将**'**添加到字符串中的每个“值”。斜线出现问题，我不知道如何识别它。这是我的样本，但它已经错了......

```
$text = " /var/www/images/mobile/test/test/, 1346744549";
$text = preg_replace("/\b|\/\b/i", '"', $text);
echo $text; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:22:33.297

尝试

```
$text = " /var/www/images/mobile/test/test/, 1346744549";
$text = preg_replace("/[^\s,]+/", "'$0'", $text);
echo $text; 
```

匹配任何一系列非空白、`[^\s,]+`非逗号字符本身，但与`'`周围（$0 是匹配项）

如果你想**在数据中允许空格**，试试这个

```
$text = " /var/www/images/mobile/test/test/, 1346744549, Hello Foobar test";
$text = preg_replace("/(^\s*|,\s*)([^,]+)/", "$1'$2'", $text);
echo $text; 
```

将输出

> '/var/www/images/mobile/test/test/', '1346744549', 'Hello Foobar 测试'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:06:15.313

这是功能：

```
"'".implode("','",explode(',',$text))."'"; 
```

你可以在这里看到结果：http: [//sandbox.onlinephpfunctions.com/code/14ed966d086494933f0e0ff48230083623a9c527](http://sandbox.onlinephpfunctions.com/code/14ed966d086494933f0e0ff48230083623a9c527)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:19:06.100

```
$text = " /var/www/images/mobile/test/test/, 1346744549";
echo preg_replace('/(?=[,\s]|$|^)/i', '"', $text); 
```

# objective-c - 未调用带有 touchesMoved 的 UIScrollView

> ID：12259005
> 
> 赞同：5
> 
> 时间：2012-09-04T07:52:08.930
> 
> 标签：objective-c, ios, uiscrollview, zooming, panning

我有一个包含 UIImageView 的 UIScrollView。UIScrollView 允许缩放和平移 UIImageView。

问题是我每次都想知道手指的运动，我试图用 touchesMoved 方法来捕捉事件。但它不起作用，尽管正确调用了 touchesBegan 和 touchesEnded 。

实际上，如果手指移动非常小，并且 UIScrollView 没有开始平移，就会调用 touchesMoved。在 UIScrollView 开始移动的那一刻，事件停止被调用。

有人知道问题出在哪里以及如何解决吗？我想也许里面的 UIImageView 正在捕捉事件或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T12:25:59.723

实际上，这确实是一个相当大的问题，因为**UIScrollView 确实**“**吃**”了**TouchesMoved**事件（即使传播了几个第一个事件）。

所以，我刚刚想出了**直接从 UIWindow**获取事件的方法。这肯定不是应用程序结构意义上的最佳方法，但在某些自定义情况下（这正是我所需要的）很好。

（示例在*MonoTouch C#*中）。

创建您的**自定义 UIWindow**（由于我的自定义逻辑（使用 MvvmCross 框架），我没有在这里展示如何用 MyWindow 替换标准 UIWindow，但这很容易并且通常在 appDelegate 初始化逻辑中完成 - 您会在 google/stack 溢出中发现):

```
public class MyWindow : UIWindow
{
    public MyWindow(RectangleF bounds) : base(bounds)
    {

    }

    public override void SendEvent(UIEvent evt)
    {
        if (evt.Type == UIEventType.Touches) {
            var el = (UITouch)evt.AllTouches.AnyObject;

            if (el.Phase == UITouchPhase.Began)
            {
                if(OnTouchBegan != null)
                    OnTouchBegan(el.View, new TouchCommandArgs(evt.AllTouches, evt));
            }

            if (el.Phase == UITouchPhase.Moved)
            {
                if(OnTouchMoved != null)
                    OnTouchMoved(el.View, new TouchCommandArgs(evt.AllTouches, evt));
            }

            if (el.Phase == UITouchPhase.Ended)
            {
                if(OnTouchEnd != null)
                    OnTouchEnd(el.View, new TouchCommandArgs(evt.AllTouches, evt));
            }

            if (el.Phase == UITouchPhase.Cancelled)
            {
                if(OnTouchCancel != null)
                    OnTouchCancel(el.View, new TouchCommandArgs(evt.AllTouches, evt));
            }

        } else
            MvxTrace.Trace (evt.Type == null ?  "-" : evt.ToString ());
        base.SendEvent(evt);
    }

    public event TouchCommand OnTouchBegan;
    public event TouchCommand OnTouchEnd;
    public event TouchCommand OnTouchCancel;
    public event TouchCommand OnTouchMoved;

}

public class TouchCommandArgs : EventArgs
{
    public NSSet Touches { get; set; }
    public UIEvent Evt { get; set; }

    public TouchCommandArgs(NSSet touches, UIEvent evt)
    {
        Touches = touches;
        Evt = evt;
    }
} 
```

并在处理事件的地方订阅**自定义事件处理程序**：

```
var window = (MyWindow) UIApplication.SharedApplication.KeyWindow;
window.OnTouchBegan += view_OnTouchBegan;
window.OnTouchMoved += view_OnTouchMoved;
window.OnTouchCancel += view_OnTouchCancel;
window.OnTouchEnd += view_OnTouchEnd; 
```

像这样的处理程序（这都是你自己的）：

```
void view_OnTouchBegan(object sender, TouchCommandArgs args)
{
    // do your logic
} 
```

* * *

在这种情况下，事件将同时处理（在两个地方：你的和 UIScrollView），所以如果你愿意，你可以取消窗口的事件传播，只有当你想阻止除你的之外的任何其他处理程序应用时（你可以添加“例如，处理程序的“已处理”标志）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:14:56.303

scrollview 属性`canCancelContentTouches = NO`允许将触摸事件向上传递到响应者链。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:26:11.367

创建**UIScrollView**类的子类并覆盖**touchesBegan:**和其他触摸方法如下：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    // If not dragging, send event to next responder
    if (!self.dragging)
    { 
        [self.nextResponder touchesBegan: touches withEvent:event]; 
    }
    else
    {
        [super touchesEnded: touches withEvent: event];
    }
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    // If not dragging, send event to next responder
    if(!self.dragging)
    { 
        [self.nextResponder touchesBegan: touches withEvent:event]; 
    }
    else
    {
        [super touchesEnded: touches withEvent: event];
    }
 }

 -(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    // If not dragging, send event to next responder
    if (!self.dragging)
    { 
        [self.nextResponder touchesBegan: touches withEvent:event]; 
    }
    else
    {
        [super touchesEnded: touches withEvent: event];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-20T02:44:57.543

尝试使用 UIScrollViewDelegate 来跟踪偏移变化或缩放比例变化。

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView;
- (void)scrollViewDidZoom:(UIScrollView *)scrollView; 
```

或者检查之间的`zoomScale`值变化。`UIScrollView``touchesBegan: & (touchesMoved: or touchesCancelled:) events`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-10-11T02:39:46.863

请检查此项以使用滚动视图的平移手势识别触摸事件（开始、移动、结束），

```
Class CustomScrollView:UIScrollView
{

CustomScrollView()
{

 (this.GestureRecognizers[1] as UIPanGestureRecognizer).AddTarget(() => this.PanHandle(this.GestureRecognizers[1] as UIPanGestureRecognizer));     

}

 private void PanHandle(UIPanGestureRecognizer gestureRecognizer)           
  {
  var touchLocation=gestureRecognizer.LocationInView(this)             

  if (gestureRecognizer.State == UIGestureRecognizerState.Began)             
    {              
      //Touches began              
   }      
else if (gestureRecognizer.State == UIGestureRecognizerState.Changed)             
   {            
        //Touches Moved              
   }                
 else if (gestureRecognizer.State == UIGestureRecognizerState.Ended)          
       {              
       //Touches ended               
  }            
 }
     }

Regards,
Ashwin 
```

# php - 在 mysql 中排序由日期组成的 VARCHAR 字段

> ID：12259007
> 
> 赞同：0
> 
> 时间：2012-09-04T07:52:16.987
> 
> 标签：php, mysql

我有一个带有 VARCHAR 字段的 mysql 表，该字段以这种格式存储日期`dd/mm/yyyy`。该表中已经存储了数据，我需要按降序对这些数据进行排序。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T07:57:08.973

处理日期的最佳方法是将 then 存储为日期数据类型。

您现在可以轻松地将其中的数据转换为日期列，方法是添加日期数据类型的列，将数据合并到其中，然后重新命名。

```
alter  yourTable add dateColumnName date;
update yourTable set dateColumnName = STR_TO_DATE(oldDateColumn, '%m/%d/%Y');
drop column oldDateColumn;
alter table yourTable change dateColumnName oldDateColumn date; 
```

如果你这样做，你将能够做各种复杂的日期工作（不仅限于很好地对日期进行排序，或者以不同的格式获取数据 - 还包括计算、比较等等）。您需要注意，您可能还必须更改将数据插入列的方式 - 尽管有许多简单的方法可以将字符串日期从 CSV 或表单转换为适当的日期列。

**编辑**：正如 Martin 指出的那样，如果您现在存储了一些 bum 数据，则在转换为日期时可能会导致问题，但在进行更新时您可以相当容易地找到这些数据。*运行更新...*查询后，只需运行以下命令：

```
select count(*) from yourTable where dateColumnName is null; // Total Problem Count
select * from yourTable where dateColumnName is null; // Detail 
```

这将显示未更新的行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T07:54:59.633

您需要将该字符串值转换为适当的日期以进行排序：

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

就像是：

```
ORDER BY STR_TO_DATE(date_column, '%d/%m/%Y') DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T07:55:09.070

你不能用 str_to_date mysql 函数 [http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

未经测试，但应该类似于

```
select * from table ORDER BY STR_TO_DATE(date,"%e-%c-%Y"); 
```

# .net - SharePoint 上的 WebDav .NET 库将操作复制/移动到不同的网站集导致 409

> ID：12259008
> 
> 赞同：3
> 
> 时间：2012-09-04T07:52:17.907
> 
> 标签：.net, sharepoint, webdav

我在 SharePoint 上遇到了 WebDav 的问题。我在 .NET 中创建了一个不错的 WebDav 库来支持复制和移动文件和文件夹结构，但是我无法解决以下问题。

我正在使用 .NET 4.0，连接到 SharePoint 2010。

在同一网站集中执行副本时，它可以正常工作：

所以复制

```
http://my-sps-server/sc1/folder1/file1.txt 
```

至

```
http://my-sps-server/sc1/folder2/file1.txt 
```

没问题，但是

```
http://my-sps-server/sc1/folder1/file1.txt 
```

至

```
http://my-sps-server/sc2/folder2/file1.txt 
```

向我抛出异常，响应状态告诉我我从服务器收到了 409。有趣的是，在复制之前，我确保文件夹“folder2”存在，如果不存在，则创建它，并且没有任何问题。但是 409 响应的详细信息告诉我路径“文件夹 2”不存在。

我一直在研究身份验证，我正在使用网络默认凭据，可以很好地在同一个站点集合中复制以及在创建文件夹时工作。也一直在用 fiddler 模拟 http 请求，给我相同的 409 响应，所以它很可能不是 .NET 代码。

我想知道 SharePoint 2010 中是否有任何错误。

希望有人可以在这里照亮或给我一些指示？

最终从源执行下载并上传到目标（在内存中），代码：

```
 private byte[] DownloadFile(Uri uri)
    {
        var request = GetRequest(uri);
        request.Method = "GET";
        request.Headers.Add("Translate", "f");

        var response = request.GetResponse();

        using (var stream = response.GetResponseStream())
        {
            return ReadFileBytes(stream, (int)response.ContentLength);
        }
    }

    private void UploadFile(Uri uri, byte[] bytes)
    {
        var request = GetRequest(uri);
        request.Method = "PUT";
        request.ContentLength = bytes.Length;
        request.Headers.Add("Translate", "f");

        using (var stream = request.GetRequestStream())
        {
            stream.Write(bytes, 0, bytes.Length);
            stream.Close();
        }

        request.GetResponse();
    }

    /// <summary>
    /// Reads data from a stream until the end is reached. The
    /// data is returned as a byte array. An IOException is
    /// thrown if any of the underlying IO calls fail.
    /// </summary>
    /// <param name="stream">The stream to read data from</param>
    /// <param name="initialLength">The initial buffer length</param>
    private static byte[] ReadFileBytes(Stream stream, int initialLength)
    {
        // If we've been passed an unhelpful initial length, just
        // use 32K.
        if (initialLength < 1)
        {
            initialLength = 32768;
        }

        byte[] buffer = new byte[initialLength];
        int read = 0;

        int chunk;
        while ((chunk = stream.Read(buffer, read, buffer.Length - read)) > 0)
        {
            read += chunk;

            // If we've reached the end of our buffer, check to see if there's
            // any more information
            if (read == buffer.Length)
            {
                int nextByte = stream.ReadByte();

                // End of stream? If so, we're done
                if (nextByte == -1)
                {
                    return buffer;
                }

                // Nope. Resize the buffer, put in the byte we've just
                // read, and continue
                byte[] newBuffer = new byte[buffer.Length * 2];
                Array.Copy(buffer, newBuffer, buffer.Length);
                newBuffer[read] = (byte)nextByte;
                buffer = newBuffer;
                read++;
            }
        }

        // Buffer is now too big. Shrink it.
        byte[] ret = new byte[read];
        Array.Copy(buffer, ret, read);
        return ret;
    } 
```

请注意，下载和上传会降低性能，这在处理大文件时可能会很明显。

您可以像这样执行整个复制操作：

> UploadFile(to, DownloadFile(from));

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:49:43.573

我们最近花了相当多的时间来尝试解决这个问题，但不幸的是没有得到任何结果。有许多关于该主题的旧 StackExchange 帖子，结果大致相同 - 没有人真正了解导致这种冲突的原因，而且似乎没有人妥善解决它。我可以告诉您的是，您似乎还没有找到的是，如果您创建新的文档库来移动文件，这通常不会发生，并且只会发生在旧的文档库中。这表明某种损坏会导致问题。

我们所做的以及可能对您有用的是放弃并使用 SharePoint 对象模型来解决此问题。我为此写的课程如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.SharePoint;
using System.Diagnostics;

// todo: Lists
// DeleteListItem
// WriteFileMetadata
// AddListEntry

// Throttling on copy methods

namespace RE.SharePoint
{
    /// <summary>
    /// Class to encapsulate methods that interact with SharePoint Lists and Libraries
    /// </summary>
    public class ListsAndItems
    {
        /// <summary>
        /// Move items from a list to another list in the same site
        /// </summary>
        /// <param name="siteURL">URL to the host site collection</param>
        /// <param name="sourceList">URL to the source list</param>
        /// <param name="destinationList">URL to the destination list</param>
        /// <param name="retainMeta">Option to retain meta data (created/modified dates) or create new ones</param>
        /// <returns>Boolean value, true for successful copy, false for a failed copy</returns>
        public bool MoveListItems(string siteURL, string sourceList, string destinationList, bool retainMeta)
        {
            OnSharePointOpeningSite(siteURL);

            using (var site = new SPSite(siteURL))
            {
                OnSharePointOpenedSite(siteURL);

                using (var web = site.OpenWeb())
                {
                    OnSharePointGetRelativeURL(web.ServerRelativeUrl);

                    try
                    {
                        // Get your source and destination libraries
                        var source = web.GetList(web.ServerRelativeUrl + sourceList);
                        var destination = web.GetList(web.ServerRelativeUrl + destinationList);

                        OnSharePointSourceSet(source);
                        OnSharePointDestinationSet(destination);

                        // Get the collection of items to move, use source.GetItems(SPQuery) if you want a subset
                        SPListItemCollection items = source.Items;

                        // Get the root folder of the destination we'll use this to add the files
                        SPFolder folder = web.GetFolder(destination.RootFolder.Url);

                        OnSharePointProcessItem(items.Count, source.ToString(), destination.ToString());

                        var fileCount = 0;
                        // Now to move the files and the metadata
                        foreach (SPListItem item in items)
                        {
                            //Get the file associated with the item
                            SPFile file = item.File;

                            OnSharePointProcessFile(folder.Url + "/" + file.Name);

                            // Create a new file in the destination library with the same properties
                            SPFile newFile = folder.Files.Add(folder.Url + "/" + file.Name, file.OpenBinary(), file.Properties, true);

                            if (retainMeta)
                            {
                                SPListItem newItem = newFile.Item;
                                WriteFileMetaDataFiletoFile(item, newItem);
                            }

                            file.Delete();
                            SharePointRecycleBin.EmptyRecycleBinItem(site.ToString(), source.ToString(), file.Name);

                            fileCount++;
                        }

                        OnSharePointProcessList(fileCount, source.ToString(), destination.ToString());
                    }
                    catch (System.IO.FileNotFoundException fex)
                    {
                        OnError("Unable to set a location. Please check that paths for source and destination libraries are correct and relative to the site collection. \n\nSite URL: " 
                                    + siteURL + " \nSource List: " + sourceList + " \nDestination List: " + destinationList + "\n", false, fex);

                        return false;
                    }
                    catch (Exception ex)
                    {
                        OnError("General Exception: ", true, ex);

                        return false;
                    }

                    return true;
                }
            }
        }

        /// <summary>
        /// Move items from one SharePoint list to another in another site
        /// </summary>
        /// <param name="sourceSiteURL">The URL to the source site collection</param>
        /// <param name="sourceList">The URL to the source list</param>
        /// <param name="destinationSiteURL">The URL to the destination site collection</param>
        /// <param name="destinationList">The URL to the destination list</param>
        /// <param name="retainMeta">Option to retain meta data (created/modified dates) or create new ones</param>
        /// <returns>Boolean value, true for successful copy, false for a failed copy</returns>
        public bool MoveListItemsSiteToSite(string sourceSiteURL, string sourceList, string destinationSiteURL, string destinationList, bool retainMeta)
        {
            OnSharePointOpeningSite(sourceSiteURL);

            using (SPSite sourceSite = new SPSite(sourceSiteURL))
            {
                OnSharePointOpenedSite(sourceSiteURL);

                using (SPWeb sourceWeb = sourceSite.OpenWeb())
                {
                    OnSharePointGetRelativeURL(sourceWeb.ServerRelativeUrl);

                    try
                    {
                        // Get your source library
                        var source = sourceWeb.GetList(sourceWeb.ServerRelativeUrl + sourceList);

                        OnSharePointSourceSet(source);

                        // Get the collection of items to move, use source.GetItems(SPQuery) if you want a subset
                        SPListItemCollection items = source.Items;

                        int fileCount = 0;

                        OnSharePointOpeningSite(destinationSiteURL);

                        using (var destSite = new SPSite(destinationSiteURL))
                        {
                            OnSharePointOpenedSite(destinationSiteURL);

                            using (var destinationWeb = destSite.OpenWeb())
                            {
                                OnSharePointGetRelativeURL(destinationWeb.ServerRelativeUrl);

                                // get destination library
                                SPList destination = destinationWeb.GetList(destinationWeb.ServerRelativeUrl + destinationList);

                                OnSharePointDestinationSet(destination);

                                // Get the root folder of the destination we'll use this to add the files
                                SPFolder destinationFolder = destinationWeb.GetFolder(destination.RootFolder.Url);

                                OnSharePointProcessItem(items.Count, source.ToString(), destination.ToString());

                                // Now to move the files and the metadata
                                foreach (SPListItem item in items)
                                {
                                    //Get the file associated with the item
                                    SPFile file = item.File;

                                    // Add event handler
                                    OnSharePointProcessFile(destinationFolder.Url + "/" + file.Name);

                                    // Create a new file in the destination library with the same properties
                                    SPFile newFile = destinationFolder.Files.Add(destinationFolder.Url + "/" + file.Name, file.OpenBinary(),
                                                                                 file.Properties, true);

                                    if (retainMeta)
                                    {
                                        SPListItem newItem = newFile.Item;
                                        WriteFileMetaDataFiletoFile(item, newItem);
                                    }

                                    file.Delete();

                                    SharePointRecycleBin.EmptyRecycleBinItem(sourceSite.ToString(), source.ToString(), file.Name);

                                    fileCount++;
                                }
                                OnSharePointProcessList(fileCount, source.ToString(), destination.ToString());
                            }
                        }
                    }
                    catch (System.IO.FileNotFoundException fex)
                    {
                        OnError("Unable to set a location. Please check that paths for source and destination libraries are correct and relative to the site collection. \n\nSource Site: " 
                                    + sourceSiteURL + " \nSource List: " + sourceList + " \nDestination Site: " + destinationSiteURL + " \nDestination List: " + destinationList + "\n", false, fex);

                        return false;
                    }
                    catch (Exception ex)
                    {
                        OnError("General Exception: ", true, ex);

                        return false;
                    }

                    return true;
                }
            }
        }

        /// <summary>
        /// overwrites a list items meta data with meta data from another file
        /// </summary>
        /// <param name="sourceItem">The source item to take meta data from</param>
        /// <param name="destinationItem">The destination item to set meta data from the source item to</param>
        public static void WriteFileMetaDataFiletoFile(SPListItem sourceItem, SPListItem destinationItem)
        {
            destinationItem["Editor"] = sourceItem["Editor"];
            destinationItem["Modified"] = sourceItem["Modified"];
            destinationItem["Modified By"] = sourceItem["Modified By"];
            destinationItem["Author"] = sourceItem["Author"];
            destinationItem["Created"] = sourceItem["Created"];
            destinationItem["Created By"] = sourceItem["Created By"];

            destinationItem.UpdateOverwriteVersion();
        }

        #region Events

        internal void OnSharePointProcessFile(string itemPath)
        {           
            if (_sharePointProcessedFile == null) return;

            var e = new SharePointProcessFileEventArgs(itemPath);
            _sharePointProcessedFile(this, e);
        }

        internal void OnSharePointProcessItem(int itemCount, string source, string destination)
        {
            if (_sharePointProcessItem == null) return;

            var e = new SharePointProcessItemEventArgs(itemCount, source, destination);

            _sharePointProcessItem(this, e);
        }

        internal void OnSharePointProcessList(int itemCount, string source, string destination)
        {
            if (_sharePointProcessList == null) return;

            var e = new SharePointProcessListEventArgs(itemCount, source, destination);

            _sharePointProcessList(this, e);
        }

        internal void OnSharePointOpeningSite(string siteName)
        {
            if (_sharePointOpeningSite == null) return;

            var e = new SharePointOpeningSiteEventArgs(siteName);

            _sharePointOpeningSite(this, e);
        }

        internal void OnSharePointOpenedSite(string siteName)
        {
            if (_sharePointOpenedSite == null) return;

            var e = new SharePointOpenedSiteEventArgs(siteName);

            _sharePointOpenedSite(this, e);
        }

        internal void OnSharePointGetRelativeURL(string siteCollection)
        {
            if (_sharePointRelativeURL == null) return;

            var e = new SharePointWebRelativeURLEventArgs(siteCollection);

            _sharePointRelativeURL(this, e);
        }

        internal void OnSharePointDestinationSet(SPList destination)
        {
            if (_sharepointDestination == null) return;

            var e = new SharePointDestinationSetEventArgs(destination);

            _sharepointDestination(this, e);
        }

        internal void OnSharePointSourceSet(SPList source)
        {
            if (_sharepointSource == null) return;

            var e = new SharePointSourceSetEventArgs(source);

            _sharepointSource(this, e);
        }

        internal void OnError(string message, bool showException, Exception exception)
        {
            if (_sharePointOnError == null) return;

            var e = new SharePointOnErrorEventsArgs(message, showException, exception);

            _sharePointOnError(this, e);
        }

        private EventHandler<SharePointProcessFileEventArgs> _sharePointProcessedFile;
        private EventHandler<SharePointProcessListEventArgs> _sharePointProcessList;
        private EventHandler<SharePointOpeningSiteEventArgs> _sharePointOpeningSite;
        private EventHandler<SharePointOpenedSiteEventArgs> _sharePointOpenedSite;
        private EventHandler<SharePointWebRelativeURLEventArgs> _sharePointRelativeURL;
        private EventHandler<SharePointDestinationSetEventArgs> _sharepointDestination;
        private EventHandler<SharePointSourceSetEventArgs> _sharepointSource;
        private EventHandler<SharePointProcessItemEventArgs> _sharePointProcessItem;
        private EventHandler<SharePointOnErrorEventsArgs> _sharePointOnError;

        /// <summary>
        /// Event for handling exceptions
        /// </summary>
        public event EventHandler<SharePointOnErrorEventsArgs> SharePointOnError
        {
            add { _sharePointOnError += value; }
            remove { _sharePointOnError += value; }
        }

        /// <summary>
        /// Event for when a file is being processed
        /// </summary>
        public event EventHandler<SharePointProcessFileEventArgs> SharePointProcessFile
        {
            add { _sharePointProcessedFile += value; }
            remove { _sharePointProcessedFile += value; }
        }

        /// <summary>
        /// Event for when a site is attempting to open
        /// </summary>
        public event EventHandler<SharePointOpeningSiteEventArgs> SharePointOpeningSite
        {
            add { _sharePointOpeningSite += value; }
            remove { _sharePointOpeningSite -= value; }
        }

        /// <summary>
        /// Event for when a site has been successfully opened
        /// </summary>
        public event EventHandler<SharePointOpenedSiteEventArgs> SharePointOpenedSite
        {
            add { _sharePointOpenedSite += value; }
            remove { _sharePointOpenedSite -= value; }
        }

        /// <summary>
        /// Event for when source/destination and filecount are established and a copy is about to initiate
        /// </summary>
        public event EventHandler<SharePointProcessItemEventArgs> SharePointProcessItem
        {
            add { _sharePointProcessItem += value; }
            remove { _sharePointProcessItem -= value; }
        }

        /// <summary>
        /// Event for when a list has started processing
        /// </summary>
        public event EventHandler<SharePointProcessListEventArgs> SharePointProcessList
        {
            add { _sharePointProcessList += value; }
            remove { _sharePointProcessList -= value; }
        }

        /// <summary>
        /// Event for when a web relative URL has been retreived from the site collection name
        /// </summary>
        public event EventHandler<SharePointWebRelativeURLEventArgs> SharePointWebRelativeURL
        {
            add { _sharePointRelativeURL += value; }
            remove { _sharePointRelativeURL -= value; }
        }

        /// <summary>
        /// Event for when a destination location has been assigned
        /// </summary>
        public event EventHandler<SharePointDestinationSetEventArgs> SharePointDestinationSet
        {
            add { _sharepointDestination += value; }
            remove { _sharepointDestination -= value; }
        }

        /// <summary>
        /// Event for when a source location has been assigned
        /// </summary>
        public event EventHandler<SharePointSourceSetEventArgs> SharePointSourceSet
        {
            add { _sharepointSource += value; }
            remove { _sharepointSource -= value; }
        }

    #endregion 
    }
} 
```

一旦该选项可用，我也会为您奖励这篇文章......希望现在已经过去了足够的时间，以便社区中的某个人知道如何解决这个问题。

# python - 使用 pycuda.driver.Event 测量时间会给出错误的结果

> ID：12259010
> 
> 赞同：1
> 
> 时间：2012-09-04T07:52:27.693
> 
> 标签：python, time, pycuda

我从[PyCuda](http://wiki.tiker.net/PyCuda/Examples/SimpleSpeedTest)示例中运行 SimpleSpeedTest.py，产生以下输出：

```
Using nbr_values == 8192
Calculating 100000 iterations
SourceModule time and first three results:
0.058294s, [ 0.005477  0.005477  0.005477]
Elementwise time and first three results:
0.102527s, [ 0.005477  0.005477  0.005477]
Elementwise Python looping time and first three results:
2.398071s, [ 0.005477  0.005477  0.005477]
GPUArray time and first three results:
8.207257s, [ 0.005477  0.005477  0.005477]
CPU time measured using :
0.000002s, [ 0.005477  0.005477  0.005477] 
```

**前四个时间测量值是合理的，但最后一个（0.000002s）距离很远**。CPU 结果应该是最慢的，但它比最快的 GPU 方法快几个数量级。所以显然测量的时间一定是错误的。这很奇怪，因为对于前四个结果，相同的计时方法似乎工作得很好。

所以我从 SimpleSpeedTest.py 中获取了一些代码，并制作了一个小**测试文件**[2]，它产生了：

```
time measured using option 1:
0.000002s 
time measured using option 2:
5.989620s 
```

**选项 1**`pycuda.driver.Event.record()`使用（如在 SimpleSpeedTest.py 中）测量持续时间，**选项 2**使用`time.clock()`. 同样，选项 1 关闭，而选项 2 给出了合理的结果（运行测试文件所需的时间约为 6 秒）。

有谁知道为什么会这样？

由于 SimpleSpeedTest.py 支持使用选项 1，是否是我的设置导致了问题？我正在运行 GTX 470、显示驱动程序 301.42、CUDA 4.2、Python 2.7 64、PyCuda 2012.1、X5650 Xeon

[2]**测试文件：**

```
import numpy
import time
import pycuda.driver as drv
import pycuda.autoinit

n_iter = 100000
nbr_values = 8192 # = 64 * 128 (values as used in SimpleSpeedTest.py)

start = drv.Event() # option 1 uses pycuda.driver.Event
end = drv.Event()

a = numpy.ones(nbr_values).astype(numpy.float32) # test data

start.record() # start option 1 (inserting recording points into GPU stream)
tic = time.clock() # start option 2 (using CPU time)

for i in range(n_iter):
    a = numpy.sin(a) # do some work

end.record() # end option 1
toc = time.clock() # end option 2

end.synchronize() 

events_secs = start.time_till(end)*1e-3
time_secs = toc - tic 

print "time measured using option 1:"
print "%fs " % events_secs
print "time measured using option 2:"
print "%fs " % time_secs 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-18T11:53:56.817

I contacted [Andreas Klöckner](http://mathema.tician.de/software/pycuda) and he suggested to synchronize on the start event, too.

```
...
start.record()
start.synchronize()
... 
```

And this seems to solve the issue!

```
time measured using option 1:
5.944461s
time measured using option 2:
5.944314s 
```

Apparently CUDA's behaviour changed in the last two years. I updated [SimpleSpeedTest.py](http://wiki.tiker.net/PyCuda/Examples/SimpleSpeedTest).

# wpf - 如何获取堆栈面板的高度宽度（带有不可见的滚动区域）

> ID：12259011
> 
> 赞同：0
> 
> 时间：2012-09-04T07:52:33.720
> 
> 标签：wpf, c#-4.0

我正在尝试在 wpf 应用程序中拍摄我的屏幕快照。一切正常，但唯一的问题是，当我需要截取在scrollviewer 的滚动区域中有一些隐藏内容的stakpanel 内容的屏幕截图时，我的代码只获取stackpanel 可见部分的快照。请看下面...

RenderTargetBitmap renderBitmap = new RenderTargetBitmap( (int)spMain.ActualWidth, (int)spMain.ActualHeight, 70d, 70d, PixelFormats.Pbgra32);

ActualWidth/ActualHeight 属性仅提供可见部分的高度/宽度。

问-我如何获得完整堆栈面板的快照？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:42:32.230

我通过在拍摄快照之前测量和排列 UI 元素解决了这个问题。

spMain.Measure(new Size(spMain.ActualWidth, spMain.ActualHeight)); spMain.Arrange(new Rect(new Size(spMain.ActualWidth, spMain.ActualHeight)));

:)

# c# - 在 C# 中验证和更正无效的 emailid 格式

> ID：12259016
> 
> 赞同：2
> 
> 时间：2012-09-04T07:52:47.497
> 
> 标签：c#, validation

有没有办法我们可以在 C# 中验证和更正无效格式的电子邮件 ID。我有一个只能验证但不能更正的功能。一些电子邮件，如“abc@def.com”。可以更正。我正在从数据库中获取所有电子邮件 ID 并向他们发送邮件，如果我只是删除无效的电子邮件 ID，此人可能会丢失信息，所以我没有删除，而是想更正邮件 ID 并向他发送邮件。有没有办法？或者一个功能来做到这一点。？？？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:01:21.723

如果您将电子邮件地址作为字符串，那么您可以操作该字符串。在您的示例中，这将是删除尾随期间。除了这个简单的例子，我建议你仔细想想这会有多有用。上下文是什么？您能否将邮件地址传回给用户以获取正确的地址，而不是您的最佳猜测？
添加代码将澄清您的问题。根据您的问题，我不知道您为什么认为您只能验证，而不是更正邮件地址字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:00:18.603

您可以检查邮件域是否存在，例如这样[，您可以检查电子邮件是否以](http://www.codeproject.com/Articles/12072/C-NET-DNS-query-component)**“。”**等无效字符结尾。或**“，”**如果找到则删除它，但您不能通过尝试更改每个字符并检查电子邮件是否存在来真正*“纠正”*错误的电子邮件，并且您可能会发现它不是您想要的 sicne，您可能会发现您所做的每一次更改都存在不是您真正希望到达的电子邮件地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:02:49.327

不，没有办法做到这一点。不过，您可能有一个内置的猜测系统来处理常见错误。

例如，如果我输入我的电子邮件 ID 为`abc@gmali.com`，您可以将其更改为`abc@gmail.com`。这仍然不能保证电子邮件现在是正确的。

假设我有一个电子邮件 ID，`abc@gmail.com`并且我故意输入了`asd@gmail.com`. 现在，您无法纠正它。出于同样的目的，如果我键入`asd@gmial.com`，您的代码可能会使其正确的电子邮件 ID`asd@gmail.com`仍然不正确。

本质上，您要查找的内容称为客户端验证。无论您拥有什么前端，都可以根据语法检查电子邮件地址是否正确。为了验证用户是否提供了他的真实电子邮件，请向给定地址发送一封带有激活链接的邮件，并要求他们点击它，如果他们想使用应用程序。

编辑：

如果您只需要格式化数据库中的电子邮件，您可以使用查询/外部可执行文件检查常见错误。这些将根据有效格式验证数据，然后可以更改该格式。在技​​术方面，您有哪些选择可以做到这一点？

# android - 如何在 android 中使用 Graph View Demo 更改 X 轴

> ID：12259019
> 
> 赞同：0
> 
> 时间：2012-09-04T07:52:50.660
> 
> 标签：android, graph

基本上我想绘制一个图表，其中 x 轴为您提供日期，y 轴为您提供计数

我正在从服务器获取数据并在我的两个数组中解析它，一个用于计数，另一个用于日期

我正在像这样的两个数组中获取值

SoapObject o=(SoapObject)p2.getProperty(xx); UserCallStatusBean ld=new UserCallStatusBean();

```
 if(o.getProperty("Month").toString().equals("anyType{}")){
                ld.setDuration("");
            }
            else{
                ld.setDuration(o.getProperty("Month").toString());
            }

            ld.setCount(Integer.parseInt(o.getProperty("Count").toString()));

            CallStatus.add(ld);
            GraphViewData o1=new GraphViewData(_iLoopCounter,Double.parseDouble(o.getProperty("Count").toString()));
            String o2=new String(o.getProperty("Month").toString());
            //String o2=new String(String.valueOf(_iLoopCounter));

            arrData[xx]=o1;
            arrXaxis[xx]=o2;
            _iLoopCounter++; 
```

在两个数组中获取值后，我使用 Graph View Demo 创建一个像

```
 setContentView(R.layout.graphs);

        // init example series data
        exampleSeries = new GraphViewSeries(arrData);

        // graph with dynamically genereated horizontal and vertical labels
        GraphView graphView;
        graphView = new BarGraphView(
                    this,"");

        graphView.addSeries(exampleSeries); // data
        graphView.setScalable(true);
        graphView.setScrollable(true);
        graphView.setViewPort(2,6);
        graphView.setScrollable(true);
        graphView.setHorizontalLabels(arrXaxis);
        graphView.setGravity(Gravity.CENTER);
        graphView.setBaselineAlignedChildIndex(4);

        //graphView.setHorizontalLabels(labels);

        LinearLayout layout = (LinearLayout) findViewById(R.id.graph1);
        layout.addView(graphView); 
```

现在我关心的问题是我在 y 轴上获得计数值，但我也在 x 轴上获得日期计数，而不是我想在 x 轴上显示日期

我已经阅读了各种文章来获取 x 轴上的字符串值，找到了一篇使用 Cutom lavel 格式化程序，但不知道如何使用所以我能做些什么来获得 x 轴？（日期值）

我希望你能理解，期待答案，我会提前谢谢你

# java - JButton 打印一个字母

> ID：12259020
> 
> 赞同：1
> 
> 时间：2012-09-04T07:52:57.253
> 
> 标签：java, swing, jframe, jbutton, actionlistener

如何打印用户单击的按钮的字母，然后禁用该按钮

我使用 for 循环生成每个字母的按钮

```
 } for (int i = 65; i <= 90; i++) {
        btnLetters = new JButton(" " + (char) i);
        letterJPanel.add(btnLetters);
        letterJPanel.setLayout(new FlowLayout());
        btnLetters.addActionListener(this);

    } 
```

单击按钮时，它应该打印字母，然后禁用按钮

```
public void actionPerformed(ActionEvent ae) {

    if (ae.getSource() == btnLetters) {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:01:11.193

```
if (ae.getSource() == btnLetters) { } } 
```

这部分仅适用于创建的最后一个按钮，所以我认为它毫无意义。

最好做这样的事情

```
if (ae.getSource() instance of JButton &&
    ((JButton ) ae.getSource()).getText().length()==2) {
    PRINT(((JButton ) ae.getSource()).getText().substring(1));
    ((JButton ) ae.getSource()).setEnabled(false);
} 
```

其中 PRINT 是实际的打印（但是你这样做）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:07:59.997

创建一个新类

```
public class ButtonDisabler implements ActionListener {
    @Override
    public void actionPerformed(ActionEvent e) {
        JButton button = (JButton)e.getSource();
        System.out.println(button.getText() + " pressed");
        button.setEnabled(false);
    }
} 
```

然后将其添加到每个按钮

```
btnLetters.addActionListener(new ButtonDisabler()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T08:08:45.940

首先，我会这样做：（比从整数转换要好得多）

```
for(char c = 'A'; c <= 'Z'; c++)
{
    button.setText(""+c);
    ...
} 
```

然后

```
public void actionPerformed(ActionEvent ae) 
{
    //assuming you only set the action for the JButtons with letters
    JButton button = (JButton) ae.getSource();
    String letter = button.getText();
    print(letter); //for example System.out.println();
    button.setEnabled(false);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T08:05:46.103

也许使用内部类会更容易

创建按钮时。

```
JButton button = new JButton("A");
button.addActionListener(new ActionListener(
    public void actionPerformed(ActionEvent e){
      printMethod(button.getLabel()); //You have to implement this...
      this.disable()
}); 
```

# html - 单击锚标记后IE9停止工作

> ID：12259025
> 
> 赞同：0
> 
> 时间：2012-09-04T07:53:14.160
> 
> 标签：html, internet-explorer, internet-explorer-9, anchor

我正在设计一个网站，我有锚标记样式为“显示：块”，并在其中包含一些元素，例如 div、table、span。

几乎没问题，但是在 IE9 中，当我随机单击此锚标记时，IE9 停止工作并显示此错误： ![在此处输入图像描述](../Images/f6212d8561dc07cad07f160c0308eb6e.png)

一些标签具有 href 属性“javascript:”，而另一些标签具有 href 属性中的链接。

有人知道吗？我能做些什么？其中之一是这样的：

```
 <asp:LinkButton ID="id" CssClass="Icons" runat="server" OnClick="event">
                <div class="NotHoBack">
                </div>
                <div class="HoverStyle">
                </div>
                <div class="IconImg" style="background-image: url('/url');">
                </div>

                <div class="IconBorder" >
                </div>
                <div class="IconText">
                    برنامه هفتگی
                </div>
            </asp:LinkButton> 
```

# c - 子剪辑：在文件中添加修订号

> ID：12259028
> 
> 赞同：0
> 
> 时间：2012-09-04T07:53:23.920
> 
> 标签：c, svn, compiler-construction

是否有可能在文件中插入文件的修订号。

例如在描述或字符串中。也许有一种预处理器命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:17:58.907

我更喜欢这种方式：

在你的 C 文件中：

```
#define SVN_FULL_REV "$Id$"
#define SVN_REV "$Revision$" 
```

然后做：

```
svn propset svn:keywords 'Id Revision' yourfile.c 
```

每次您提交或更新文件时，`SVN_REV`将是您的修订 ID 和`SVN_FULL_REV`整个信息字符串，如`"$Id: xxx.c 78 2012-09-04 08:42:34Z Author $"`.

# jquery - 我们如何在使用 jquery 的 cakephp 中单击单选按钮时从文本框中添加或删除只读属性？

> ID：12259031
> 
> 赞同：37
> 
> 时间：2012-09-04T07:53:39.013
> 
> 标签：jquery, cakephp

这是我的 cakephp 生成的 HTML**单选框**和**文本框**脚本：

```
<input type="radio" id="need_staff_on_site" name="data[CaterRequest][need_staff_on_site]" value="yes" class="staff_on_site"><span>Yes</span>

<input type="radio" id="need_staff_on_site" name="data[CaterRequest][need_staff_on_site]" class="staff_on_site" value="no"><span>No</span>

How many staff?<input type="text" maxlength="3" id="no_of_staff" name="data[CaterRequest][staff_needed]" class="txtboxSml2" readonly="readonly"> 
```

**jquery脚本：**

```
$(document).ready(function(){
   $('.staff_on_site').click(function(){
   $arr=$(this).val();
   if($arr == "yes"){ $("#no_of_staff").removeAttr("readonly"); }
   if($arr == "no"){ $("#no_of_staff").attr("readonly", "readonly"); }
  });
}); 
```

[**演示 jsfiddle 链接**](http://jsfiddle.net/J8DvX/16/)

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-09-04T07:55:29.643

在您的案例中，您可以编写以下 jquery 代码：

```
$(document).ready(function(){

   $('.staff_on_site').click(function(){

     var rBtnVal = $(this).val();

     if(rBtnVal == "yes"){
         $("#no_of_staff").attr("readonly", false); 
     }
     else{ 
         $("#no_of_staff").attr("readonly", true); 
     }
   });
}); 
```

这是小提琴：http: [//jsfiddle.net/P4QWx/3/](http://jsfiddle.net/P4QWx/3/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-04T09:58:50.620

你也可以用`prop`。检查下面的代码。

```
$(document).ready(function(){

   $('.staff_on_site').click(function(){

     var rBtnVal = $(this).val();

     if(rBtnVal == "yes"){
         $("#no_of_staff").prop("readonly", false); 
     }
     else{ 
         $("#no_of_staff").prop("readonly", true); 
     }
   });
}); 
```

# mysql - 前缀与 MySQL 索引匹配：LIKE word% vs. MATCH 'word*' 用于搜索结果自动完成

> ID：12259034
> 
> 赞同：2
> 
> 时间：2012-09-04T07:54:00.120
> 
> 标签：mysql, search, autocomplete, full-text-search

我正在尝试在两个选项之间做出决定，以使用 MySQL 实现名称的前缀匹配（5000 万个选项）。该用法用于搜索结果的自动完成。两难在建筑之间：

1.  VARCHAR 上的索引并执行 LIKE 'word%' 查询
2.  FTS（全文搜索）索引并执行 MATCH 'word*' 查询

对于这种情况，哪个更好？我是否应该考虑为这种自动建议自动完成名称的额外 FTS 功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T08:03:52.630

FTS 和前缀匹配是两个不同的东西。所以答案取决于你的实际要求是什么。

您是否需要返回与条件完全匹配的所有结果的列表`column LIKE 'word%'`？具体来说，字符串必须以您要查找的单词开头。

全文搜索基于相关性进行匹配。它并不总是会给你匹配特定字符串的东西。它确实有词干，它有停用词，如果一个词太常见，它会省略结果。

我认为在这种情况下，最好的答案是“全文搜索并没有完全按照您的想法进行”因此，如果您对匹配有精确的要求，您应该坚持使用可行的方法。

# google-maps-api-3 - 无法在 InfoWindow 中显示经纬度

> ID：12259036
> 
> 赞同：1
> 
> 时间：2012-09-04T07:54:11.717
> 
> 标签：google-maps-api-3, latitude-longitude, infowindow

我有一个 java 脚本函数，用于在地图的选定位置显示标记，并在 InfoWindow 中显示标记位置的纬度和经度。

我可以在任何位置显示标记，但无法显示带有坐标的 InfoWindow。

这是功能：

```
function init()
{
 var mapoptions=
 {
    center: new google.maps.LatLng(17.379064211298, 78.478946685791),
    zoom: 8,
    mapTypeId: google.maps.MapTypeId.ROADMAP
 }
 map=new  google.maps.Map(document.getElementById("map_can"), mapoptions);
 var marker;
 google.maps.event.addListener(map,'click',function(event)
     {
        marker= new google.maps.Marker({position:event.latLng,map:map});
     });
 var iwindow= new google.maps.InfoWindow();
 google.maps.event.addListener(marker,'click',function(event)
    {
       iwindow.setContent(event.latLng.lat()+","+event.latLng.lng());
       iwindow.open(map,marker);
    });
} 
```

我哪里错了？请提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:19:07.910

这是因为您将事件附加到一个空的标记对象（它在您调用时未分配

```
google.maps.event.addListener(marker,'click',function(event) { ... }); 
```

在创建标记后尝试将点击事件附加到标记，例如：

```
google.maps.event.addListener(map,'click',function(event)
 {
    marker= new google.maps.Marker({position:event.latLng,map:map});
    google.maps.event.addListener(marker,'click',function(event)
    {
        iwindow.setContent(event.latLng.lat()+","+event.latLng.lng());
        iwindow.open(map,marker);
    });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-10T19:59:22.767

你可以试试这个截断的代码：

```
function addMarkerWithTimeout(position, timeout, id) {
                window.setTimeout(function () {
                    markers.push(new google.maps.Marker({
                        position: position,
                        map: map,
                        icon: image1,
                        title: "whatever!",
                        draggable: true,
                        animation: google.maps.Animation.ROUTE
                    }));

                    google.maps.event.addListener(map, 'click', function (event)
                    {
                        google.maps.event.addListener(markers[id], 'click', function (event)
                        {
                            infoWindow.setContent(event.latLng.lat() + "," + event.latLng.lng());
                            infoWindow.open(map, markers[id]);
                        });
                    });

                }, timeout);
            } 
```

# c# - 将 C# 字符串转换为 Javascript 对象/JSON

> ID：12259040
> 
> 赞同：1
> 
> 时间：2012-09-04T07:54:29.090
> 
> 标签：c#, json, jquery, javascriptserializer

我有一个这样的 Javascript 对象：

```
var jsonDataActual = { 
                       "source": [{
                                    "name": "testCaption0", 
                                    "desc": "testDescrip0", 
                                    "values": [{ 
                                                 "from": "/Date(1338811241074)/", 
                                                   "to": "/Date(1346760041074)/", 
                                                "label": "testLabel0", 
                                          "customClass": "GanttRed"
                                               }] 
                                 }], 
                       "navigate": "scroll", 
                        "scale": "weeks", 
                        "maxScale": "months", 
                        "minScale": "days", 
                    "itemsPerPage": 11, 
                     "onItemClick": function (data) { }, 
                      "onAddClick": function (dt, rowId) { } 

                 }; 
```

这对我来说可以。现在，由于我的要求和需要，我将整个对象（包括大括号 ie{ } 和分号 ;）作为服务器端（C#）上的字符串，并使用服务器端方法将其返回给 ajax 调用（web 方法）：

在服务器端方法中，我执行以下操作：

```
return  new JavaScriptSerializer().Serialize(jsonData); 
```

但是现在这整个返回的数据（内部`Success: function(msg){ var s=msg.d}`）被视为字符串，因此它不起作用。

我试过这些：

```
 1\. var obj = eval('{' + msg.d +'}'); (removing beginning and ending braces in msg.d)
         typeof(obj) is string. failed

  2\. eval('var obj ='+msg.d);  (including beginning and ending braces in msg.d)
         typeof(obj) is string. failed

  3\. var obj= jQuery.parseJson(msg.d);
        typeof(obj) is string. failed
  4\. var obj = new Object();
     //var obj = {}; 
      obj=jQuery.parseJson(msg.d).
      typeof(obj) is string. failed. 
```

请帮忙。如何将服务器端返回的 json 转换为对象？

为什么它不适合我？？？是因为我的 json 对象的结构吗？

为什么`jsonDataActual`对我有用，但在作为字符串发送时不起作用？？？

我看到了[这个](https://stackoverflow.com/questions/1086404/string-to-object-in-js)和[这个](https://stackoverflow.com/questions/9036429/convert-object-string-to-json)..

请帮忙.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:52:14.060

找到了我的具体问题的解决方案。

我正在用我的 json 数据作为它的值来构造一个字符串变量。然后我会将此字符串返回给客户端函数（发出 ajax 请求的函数）。IE

服务器端方法

```
[WebMethod]
public static string GetJsonData()
{
    string jsonData = String.Empty;
    foreach(var dataItem in objEntireData.Items)
    {
         //  jsonData +=  
    }
   return new JavaScriptSerializer().Serialize(result);
} 
```

但它不起作用。因此，我没有构造一个字符串变量并对其进行序列化，而是编写了一个具有特定结构的类并将其发送到 return 语句中（序列化之后）。

即见下面的课程

```
 public class A
    {
        public A()
        {
            Values = new List<B>();
        }
        public string prop1 {get; set;}
        public List<B> Values { get; set; }
    }
    public class B
    {
        public string prop2 { get; set; }
        public string prop3 { get; set; }
    } 
```

我会使用这个类如下：

```
[WebMethod]
public static string GetJsonData()
{
          List<A> objA = new List<A>();
          A objAItem = new A();
          foreach (var dbItem in objDataBaseValues)
          {
                objA.prop1 = "test";
                B objBItem = new B();
                b.prop2="value";
                b.prop3="value";
                objA.Values.Add(objBItem);
          }
        return new JavaScriptSerializer().Serialize(objA);

  } 
```

将我的整个数据包装成一个类结构，然后序列化它对我有用。我的客户端函数成功地将它识别为一个对象，即

```
 $.ajax({
                    type: "POST",
                    url: "ProjectGanttChart.aspx/getData",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {
                        var jsonData = jQuery.parseJSON(msg.d);
                        populateGantt(jsonData);
                     }
          }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T07:56:59.957

试试这个

```
var json=(typeof msg.d) == 'string' ? eval('(' + msg.d + ')') : msg.d; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:02:41.243

我以前遇到过很多次。当 WCF 服务将返回的数据解密为 JSON 时，字符串数据将始终带有“”。您应该始终从 WCF 服务返回对象或对象列表 - 即使这些是在您的服务级别创建的自定义对象。

因此，您的服务应该是：

```
[OperationContract]
        [WebGet(BodyStyle = WebMessageBodyStyle.Bare, UriTemplate = "/Test?testId={testId}", RequestFormat = WebMessageFormat.Json,
                   ResponseFormat = WebMessageFormat.Json)]
        List<TestObjectJSON> Test(int testId); 
```

然后，这将在服务端为您进行反序列化，而不使用序列化器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T08:04:45.637

> 如何将服务器端返回的 json 转换为对象？

你可以用它`JSON.parse`来做到这一点。

例子：

```
a = [1, 2];
x = JSON.stringify(a); // "[1,2]"
o = JSON.parse(x); // [1, 2]; 
```

# sql-server - Azure 数据库名称长度

> ID：12259041
> 
> 赞同：1
> 
> 时间：2012-09-04T07:54:31.210
> 
> 标签：sql-server, azure, azure-sql-database

我不知道我是不是愚蠢还是什么，但我只是在 MS Azure SQL 中找不到有关数据库名称限制的任何信息。我主要找到关于 SQL Server 或数据库大小的答案，而不是名称大小......

Azure SQL 数据库名称长度是否有限制，如果有，是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T07:57:29.370

根据[SQL Server 文档](http://msdn.microsoft.com/en-us/library/ms143432.aspx)，标识符（包括数据库名称）的**最大长度为****128 个字符**。

自 SQL Server 2005 以来一直是相同的（至少）。SQL Azure 基本上是另一个 SQL Server，因此它可能不会有任何不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-24T16:15:00.430

[![在此处输入图像描述](../Images/8c0ba34df826a28eace035b85e342bbc.png)](https://i.stack.imgur.com/ObQUa.png)

从[创建 SQL 数据库门户交互](https://portal.azure.com/#create/Microsoft.SQLDatabase)

# iphone - 使用uikeyboardTpeDecimalPad时如何将（，）转换为（。）十进制按钮

> ID：12259043
> 
> 赞同：0
> 
> 时间：2012-09-04T07:54:35.770
> 
> 标签：iphone, ios, uikeyboard, uikeyboardtype

我使用 UIKeyboardTypeDecimalPad 作为键盘类型。当我在 mac 中测试时，我在 (.) 中看到十进制按钮，但是当我在 iPod 中测试时，十进制按钮变为 (,)。我怎样才能解决这个问题 ？这是我测试的代码：

```
self.rielPayTextField.keyboardType = UIKeyboardTypeDecimalPad; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:58:14.177

线程可能有点老，但这是我所经历的：“。” 和 "," 取决于您的 iDevice 的区域设置。我在德国，所以小数点分隔符是“，”，它显示在数字键盘上。将区域和语言设置（我的应用程序是 4 语言）切换为英语时，我有“。” 小数分隔符。所以你的数字键盘应该没问题，只要你使用小数。您唯一需要关心的是检查用户输入的号码。您必须确保使用 nslocalized 数字，以便输入正确转换为由您的应用程序处理。双重使用“。” 作为分隔符，因此在德语中输入小数点 3,4 会导致错误，因为冒号不会被识别为小数点分隔符。我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:00:15.990

我猜这是与您设备上指定的“区域格式”相关的设置。您可以在“设置”、“常规”中仔细检查您的设置，最后选择“国际”

# cuda - GPU中工作项负载的限制？CUDA/OpenCL

> ID：12259044
> 
> 赞同：2
> 
> 时间：2012-09-04T07:54:39.403
> 
> 标签：cuda, opencl, gpu, gpgpu

我有一个计算密集型图像算法，对于每个像素，需要读取许多遥远的像素。距离取决于在编译时定义的常数。我的 OpenCL 算法表现良好，但在某个最大距离处 - 导致更重的 for 循环 - 驱动程序似乎退出了。屏幕变黑几秒钟，然后命令队列永远不会完成。一条气球消息表明司机很不高兴：

*“显示驱动程序 AMD 驱动程序停止响应并已成功恢复。”*

（使用 . 在 OpenCL 1.1 上运行`AMD FirePro V4900 (FireGL V) Graphics Adapter`。）

1.  为什么会出现这种情况？
2.  是否可以事先告诉司机一切正常？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T08:25:10.163

这是 Windows 下的一个已知“功能”（不确定 Linux）——如果视频驱动程序停止响应，操作系统将重置它。除此之外，由于 OpenCL（和 CUDA）是由驱动程序实现的，因此耗时过长的内核看起来就像一个冻结的驱动程序。有一个看门狗计时器可以跟踪这一点（我相信是 5 秒）。

您的选择是：

1.  您需要确保您的内核不会太耗时（最好）。
2.  您可以关闭看门狗定时器：[超时检测和 GPU 恢复](http://msdn.microsoft.com/en-us/windows/hardware/gg487368.aspx)。
3.  您可以在未连接到显示器的 GPU 上运行内核。

我建议你选择1。

# jquery - 使用 jQuery 搜索 .CSV 文件

> ID：12259045
> 
> 赞同：0
> 
> 时间：2012-09-04T07:54:39.073
> 
> 标签：jquery, html

我对 jQuery 完全陌生，因此对任何明显的错误表示歉意。

我有一个带有标题和数据的 .CSV 文件，其布局如下：

订单号，库存状态，数量，评论，日期 1234567，有库存，15，全红，2012 年 8 月 15 日 1234568，缺货，203，离开邻居，2012 年 8 月 21 日 1234569，订购中，20 , 镀铬饰面, 17/08/2012 1234570, 其他, 140, 木制服装, 01/09/2012

我有一个带有 4 个按钮的 HTML 页面（对应于库存状态）：

有货, 缺货, 订购中, 其他,

我想要做的是，当我单击上述其中一项时，我的代码会消失，搜索与库存状态列匹配的所有记录并返回订单号、数量和评论。

到目前为止的代码：

```
var allText =[];
var allTextLines = [];
var Lines = [];
var txtFile = new XMLHttpRequest();

txtFile.open("GET", "file://C:/data.txt", true);
txtFile.onreadystatechange = function()
{
 allText = txtFile.responseText;
 allTextLines = allText.split(/\r\n|\n/);
};

// On opening the site, show the loading icon and GIF.
$(document).ready(function () {
$("#Outline").hide();
$("#loadingTable").delay(1000).hide(0);
$.ajax({
    type: "GET",
    url: "data.txt",
    dataType: "text",
    success: function (data) { processData(data); }     
})
alert("0.2")
});

function showSLAMenus() {
$("#Outline").show();
};

$("#OutOfStock").click(function() {
alert("OutOfStock search")
// returns Order Number, Quantity and Comments for items Out of Stock
});

$("#InStock").click(function() {
alert("InStock search")
// returns Order Number, Quantity and Comments for items In Stock
});

$("#Other").click(function () {
alert("Other search")
// returns Order Number, Quantity and Comments for items Other
});

function processData(allText) {
alert("1")
var allTextLines = allText.split(/\r\n|\n/); 
var headers = allTextLines[0].split(','); 
var lines = []; 

for (var i=0; i<allTextLines.length; i++) { 
    var data = allTextLines[i].split(','); 
    if (data.length == headers.length) { 

        var tarr = []; 
        for (var j=0; j<headers.length; j++) { 
            tarr.push(headers[j]+":"+data[j]); 
        } 
        lines.push(tarr); 
    } 
} 
alert(lines); 
} 
```

**我的第二次尝试：**

```
// On opening the site, show the loading icon and GIF.
$(document).ready(function () {
$("#Outline").hide();
$("#loadingTable").delay(1000).hide(0);
var data = []; // Empty array in global scope where we will store your data

// Your ajax call to get the data and store it in the var above
$.ajax({
    type: "GET",
    url: "data.txt",
    dataType: "text",
    success: function (data) { processData(data); }
})
});

function showSLAMenus() {
$("#Outline").show();
};

setTimeout(showSLAMenus, 1001);

$("#Other").click(function () {
alert("Other1")
// An example search call
var output = searchData(data, "Other");

alert("Other2")

// Dump out the results of our search
for (var i in output) {
    $("div#output").html(output[i] + "<br>");
}
});

// Main function to process the data into an array
function processData(allText) {
var allTextLines = allText.split(/\r\n|\n/);
var headers = allTextLines[0].split(',');
var lines = [];

for (var i = 0; i < allTextLines.length; i++) {
    var data = allTextLines[i].split(',');
    if (data.length == headers.length) {

        var tarr = [];
        for (var j = 0; j < headers.length; j++) {
            tarr.push(headers[j] + ":" + data[j]);
        }
        lines.push(tarr);
    }
    //alert(lines);
}
return lines; // Returns the data you need, to be stored in our variable 
}

// A search function using the jQuery inArray method
// - matches the data position in the array and returns a new array of matched data
function searchData(data, search) {
alert("searchData Called")
// Create a temp array to store the found data
var tempArray = [];

// Loop through the data to see if each array has the search term we need
for (i = 0; i < data.length; i++) {
    var pos = $.inArray(search, data[i]);

    // Add found data to the array
    if (pos !== -1) {
        tempArray.push(data[i]);
    }
}

// Return the array of matched data
return tempArray;
} 
```

你好谢谢。您在 jsFiddle 中的代码似乎正在运行。但是，查看我的代码时，单击“其他”按钮

```
alert("Other1")
// An example search call
var output = searchData(data, "Other");
alert("Other2") 
```

显示警报 Other1，但我相信它无法调用 searchData。

我还需要吗

```
txtFile.open("GET", "file://C:/data.txt", true);
txtFile.onreadystatechange = function()
{
   allText = txtFile.responseText;
   allTextLines = allText.split(/\r\n|\n/);
}; 
```

在我的代码中？？？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:31:31.760

你快到了。最好的办法是使用 jQuery`$.inArray`方法将数组中的行与您所追求的数据相匹配。您只需要一个搜索函数，它将您所追求的数据作为新数组返回。这是一个例子 -**编辑**：http: [//jsfiddle.net/gNTWk/1/](http://jsfiddle.net/gNTWk/1/)

这对您的代码有何影响？在下面添加：

```
$(document).ready(function () {

    var data = []; // Empty array in global scope where we will store your data

    // Your ajax call to get the data and store it in the var above
    $.ajax({
        type: "GET",
        url: "data.txt",
        dataType: "text",
        success: function(data){
            data = processData(data);
        }     
    });

    // Your main function to process the data into an array
    function processData(allText) {
        alert("1")
        var allTextLines = allText.split(/\r\n|\n/); 
        var headers = allTextLines[0].split(','); 
        var lines = []; 

        for (var i=0; i<allTextLines.length; i++) { 
            var data = allTextLines[i].split(','); 
            if (data.length == headers.length) { 

                var tarr = []; 
                for (var j=0; j<headers.length; j++) { 
                    tarr.push(headers[j]+":"+data[j]); 
                } 
                lines.push(tarr); 
            } 
        } 
        return lines; // Returns the data you need, to be stored in our variable 
    }

    // A search function using the jQuery inArray method
    // - matches the data position in the array and returns a new array of matched data
    function searchData(data, search){
        // Create a temp array to store the found data
        var tempArray = [];

        // Loop through the data to see if each array has the search term we need
        for(i=0; i<data.length; i++){
            var pos = $.inArray(search, data[i]);

            // Add found data to the array
            if(pos !== -1){
                tempArray.push(data[i]);
            }
        }

        // Return the array of matched data
        return tempArray;
    }

    // An example search call
    var output = searchData(data, "Other");

    // EDITED OUTPUT LOOP    
    for(i=0; i<output.length; i++){
        $("div#output").append(output[i] + "<br>");
    }

 }); 
```

**编辑：** 抱歉`searchData`功能很好。只是输出循环出错了。上面的代码现在应该可以正常工作了。编辑jsfiddle：http: [//jsfiddle.net/gNTWk/1/](http://jsfiddle.net/gNTWk/1/)

# r - 计算向量列表中的新元素

> ID：12259046
> 
> 赞同：8
> 
> 时间：2012-09-04T07:54:44.287
> 
> 标签：r, lapply

我想计算前几年不存在的新元素。在示例中

**样本数据：**

```
var1 <- list('2003' = 1:3, '2004' = c(4:3), '2005' = c(6,4,1), '2006' = 1:4 ) 
```

我想得到输出

```
newcount <- list('2003' = 0, '2004' = 1, '2005' = 1, '2006' = 0) 
```

**不成功的代码：**

```
newcount <- mapply(setdiff, var1, seq_along(var1), function(i) 
            {if (i > 1) {Reduce(union, var1[i-1], accumulate=T)}}, length) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T08:11:01.033

差不多了，但最好使用矢量索引来处理偏移量并在之后添加始终已知的初始元素：

```
lapply(c(list(`2003`=integer(0)),
       mapply(setdiff,var1[-1], 
              Reduce(union,var1,accumulate=TRUE)[-length(var1)])),length)
$`2003`
[1] 0

$`2004`
[1] 1

$`2005`
[1] 1

$`2006`
[1] 0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T08:11:32.863

假设它`var1`是按年份排序的，并且对于 2003 年你想要`3`而不是`1`，你可以尝试

```
newcount <- lapply(seq_along(var1),function(x){
  prev<-unlist(var1[seq_len(x-1)])
# Improvement suggested by plannapus
  sum(!var1[[x]]%in%prev) # length(which(!var1[[x]]%in%prev))
})

names(newcount)<-names(var1)

newcount
# $`2003`
# [1] 3

# $`2004`
# [1] 1

# $`2005`
# [1] 1

# $`2006`
# [1] 0 
```

好的，如果您绝对确定 2003 应该是 0（我认为这是您的逻辑的一个例外），那么您可以执行以下操作：

```
newcount <- c(0, lapply(seq_along(var1)[-1],function(x){
  prev<-unlist(var1[seq_len(x-1)])
  sum(!var1[[x]]%in%prev)
})) 
```

# cookies - ASP.NET Universal Providers - Roleprovider 不在 cookie 中缓存角色

> ID：12259052
> 
> 赞同：3
> 
> 时间：2012-09-04T07:55:03.923
> 
> 标签：cookies, roles, membership, roleprovider

具有讽刺意味的是，我的角色提供者不再将角色缓存在 cookie 中。那是早些时候工作的。不幸的是，我现在才注意到，所以我不能说是什么导致了这个问题。但我认为这与更新到通用提供程序的新版本 1.2（8 月 16 日发布）有关。

我的角色提供者配置如下：

```
 <roleManager enabled="true" cacheRolesInCookie="true" cookieName="X_Roles" 
cookiePath="/" cookieProtection="All" cookieRequireSSL="true" cookieSlidingExpiration="true" cookieTimeout="1440" 
createPersistentCookie="false" domain="" maxCachedResults="25" defaultProvider="XManager_RoleProvider">
<providers>
<clear/>
<add name="XManager_RoleProvider" type="ManagersX.XManager_RoleProvider, AssemblyX" 
connectionStringName="XEntities" applicationName="/" rolesTableName="Roles" roleMembershipsTableName="Users_Roles"/>
</providers>
</roleManager> 
```

使用角色管理器（登录视图、带有站点地图修剪的菜单等）一切正常，但它只是不再缓存角色。会员提供者、会话状态等也工作正常，并且它们的 cookie 设置正确。

静态角色类的所有属性都已正确设置，并且 Httpcontext（IsSecureConnection 等）中的所有内容也是正确的。

角色 cookie 是较早设置的，但现在不再设置。我希望任何人都可以帮助我解决我的问题。

提前致谢。

最好的祝福，

赫曼新

**更新：** 没有人有同样的问题或提示给我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T13:43:14.963

下面是我编写的自定义角色提供程序的详细信息，它使用适当的缓存并且不会在每次页面加载时访问数据库。

============= 我的代码隐藏文件 ===============

```
using System;
using System.Collections.Generic;
using System.Collections.Specialized;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;
using System.Linq;
using System.Web;
using System.Web.Caching;
using System.Web.Security;

namespace MyProject.Providers
{
    public class CustomRoleProvider : RoleProvider
    {
        #region Properties

        private static readonly object LockObject = new object();
        private int _cacheTimeoutInMinutes = 0;

        #endregion

        #region Overrides of RoleProvider

        public override void Initialize(string name, NameValueCollection config)
        {
            // Set Properties
            ApplicationName = config["applicationName"];
            _cacheTimeoutInMinutes = Convert.ToInt32(config["cacheTimeoutInMinutes"]);

            // Call base method
            base.Initialize(name, config);
        }

        /// <summary>
        /// Gets a value indicating whether the specified user is in the specified role for the configured applicationName.
        /// </summary>
        /// <returns>
        /// true if the specified user is in the specified role for the configured applicationName; otherwise, false.
        /// </returns>
        /// <param name="username">The user name to search for.</param><param name="roleName">The role to search in.</param>
        public override bool IsUserInRole(string username, string roleName)
        {
            // Get Roles
            var userRoles = GetRolesForUser(username);

            // Return if exists
            return userRoles.Contains(roleName);
        }

        /// <summary>
        /// Gets a list of the roles that a specified user is in for the configured applicationName.
        /// </summary>
        /// <returns>
        /// A string array containing the names of all the roles that the specified user is in for the configured applicationName.
        /// </returns>
        /// <param name="username">The user to return a list of roles for.</param>
        public override string[] GetRolesForUser(string username)
        {
            // Return if User is not authenticated
            if (!HttpContext.Current.User.Identity.IsAuthenticated) return null;

            // Return if present in Cache
            var cacheKey = string.format("UserRoles_{0}", username);
            if (HttpRuntime.Cache[cacheKey] != null) return (string[]) HttpRuntime.Cache[cacheKey];

            // Vars
            var userRoles = new List<string>();
            var sqlParams = new List<SqlParameter>
                                {
                                    new SqlParameter("@ApplicationName", ApplicationName),
                                    new SqlParameter("@UserName", username)
                                };

            lock (LockObject)
            {
                // Run Stored Proc << Replace this block with your own Database Call Methods >>
                using (IDataReader dr =
                    BaseDatabase.ExecuteDataReader("aspnet_UsersInRoles_GetRolesForUser", sqlParams.ToArray(),
                                                   Constants.DatabaseConnectionName) as SqlDataReader)
                {
                    while (dr.Read())
                    {
                        userRoles.Add(dr["RoleName"].ToString());
                    }
                }
            }

            // Store in Cache and expire after set minutes
            HttpRuntime.Cache.Insert(cacheKey, userRoles.ToArray(), null,
                                     DateTime.Now.AddMinutes(_cacheTimeoutInMinutes), Cache.NoSlidingExpiration);

            // Return
            return userRoles.ToArray();
        }

        /// <summary>
        /// Gets or sets the name of the application to store and retrieve role information for.
        /// </summary>
        /// <returns>
        /// The name of the application to store and retrieve role information for.
        /// </returns>
        public override sealed string ApplicationName { get; set; }

        // I skipped the other methods as they do not apply to this scenario

        #endregion
    }
} 
```

============= 我的代码隐藏文件结束 ================

============= 我的 Web.Config 文件 =======================

```
<roleManager enabled="true" defaultProvider="CustomRoleManager">
  <providers>
    <clear />
    <add name="SqlRoleManager" type="System.Web.Security.SqlRoleProvider" connectionStringName="AspnetDbConnection" applicationName="MyApplication"/>
    <add name="CustomRoleManager" type="MyProject.Providers.CustomRoleProvider" connectionStringName="AspnetDbConnection" applicationName="MyApplication" cacheTimeoutInMinutes="30" />
  </providers>
</roleManager> 
```

============= 我的 Web.Config 文件结束 ================

缓存设置为每 30 分钟后自动过期。您可以根据需要进行修改。

干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T22:35:14.717

我遇到了同样的问题，但我找到了一篇似乎已修复它的 MS KB 文章。我安装了补丁，cookie 又出现了。

[http://support.microsoft.com/kb/2750147](http://support.microsoft.com/kb/2750147)

请参阅以下部分：ASP.Net 第 4 期。

希望这对其他人有帮助！

# layout - 2个div，调整顶部保持底部固定高度

> ID：12259054
> 
> 赞同：1
> 
> 时间：2012-09-04T07:55:08.857
> 
> 标签：layout, css

我在stackoverflow周围进行了搜索，但找不到答案。这是问题所在：

我有两个 div，一个在另一个之上。我想让顶部 div 根据下面 div 的高度来调整高度。

```
<div id="parent" style="height:300px">
   <div id="div1" style="height:auto"></div>
   <div id="div2" style="height:45px"></div>
</div> 
```

这是因为我打算显示/隐藏底部 div 并且顶部 div 必须调整大小以填充父 div。

我忘了提到第一个 div（需要适应的那个）有很长的内容溢出：滚动

你能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:04:36.103

为此，您可以**显示：table**属性。像这样写：

```
#parent{
 display:table;
 height:300px;
 width:100%;
}
#parent > div{
    display:table-row;
}
#div1{
    background:red;
}
#div2{
    background:green;
    height:45px;
} 
```

检查这个[http://jsfiddle.net/7NuFr/](http://jsfiddle.net/7NuFr/)

# android - Android Eclipse 模拟器

> ID：12259059
> 
> 赞同：2
> 
> 时间：2012-09-04T07:55:46.277
> 
> 标签：android, android-emulator, phone-number

需要帮助->我想获取电话号码并显示它，我有这样的代码

```
TelephonyManager tMgr =(TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);    
mPhoneNumber = tMgr.getLine1Number();    
TextView t=(TextView)findViewById(R.id.TVphone);    
t.setText(mPhoneNumber); 
```

但没有任何结果，所以我用设置电话状态电话号码显示“未知”检查我的 Android 模拟器，如何更改它？我希望我的电话号码不为人所知。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:21:49.513

尝试将电话号码添加到模拟器并尝试上面的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T19:51:16.283

有关更多信息，请参阅[此链接](https://stackoverflow.com/questions/11599346/send-phone-number-through-emulator)。

“在 DDMS 透视图中，您将看到 Emulator Control 选项卡，您可以从那里模拟呼叫。如果您没有看到 Emulator Control 那里。使用 Window> Show /View > Emulator Control 使选项卡出现。”

你还需要清单中的 android.permission.READ_PHONE_STATE 权限，你有吗？

# c# - 返回可查询 或列表 在存储库中

> ID：12259062
> 
> 赞同：6
> 
> 时间：2012-09-04T07:56:03.597
> 
> 标签：c#, .net, architecture, data-access-layer, business-layer

目前我正在使用 sqlite 构建一个 Windows 应用程序。在数据库中有一个表说`User`，在我的代码中有一个`Repository<User>`和一个`UserManager`。我认为这是一个非常常见的设计。在存储库中有一个`List`方法：

```
//Repository<User> class
public List<User> List(where, orderby, topN parameters and etc)
{
    //query and return
} 
```

如果我想做一些复杂的事情，这会带来一个问题`UserManager.cs`：

```
//UserManager.cs
public List<User> ListUsersWithBankAccounts()
{
    var userRep = new UserRepository();
    var bankRep = new BankAccountRepository();
    var result = //do something complex, say "I want the users live in NY 
                 //and have at least two bank accounts in the system
} 
```

可以看到，return`List<User>`带来了性能问题，因为查询执行得比预期的要早。现在我需要将其更改为类似`IQueryable<T>`：

```
//Repository<User> class
public TableQuery<User> List(where, orderby, topN parameters and etc)
{
    //query and return
} 
```

`TableQuery<T>`是sqlite驱动的一部分，几乎等同`IQueryable<T>`于EF中的，提供查询，不会立即执行。但现在的问题是：在 中`UserManager.cs`，它不知道什么是 a `TableQuery<T>`，我需要像`using SQLite.Query`在业务层项目中一样添加新的引用和导入命名空间。它确实带来了糟糕的代码感觉。为什么我的业务层要知道数据库的细节？为什么业务层要知道什么是 SQLite？那么正确的设计是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:13:41.117

通常，在干净的架构中，数据查询逻辑被封装在存储库中。使用管道和过滤器可以帮助重用查询逻辑。用数据层/存储库中的方法包装这些将更具可读性和可维护性以及可重用性。

例如，用于查询用户的管道和过滤器：

```
/// Pipes/Filters for user queries.
public static class UserExtensions
{
    public static IQueryable<User> Active(this IQueryable<User> query)
    {
        return query.Where(user => user.Active == true);
    }
}

public class UserRepository : IRepository<User>, IUserRepository
{
    /// Retrieve all users
    public List<User> List()
    {
        // Logic to query all users in the database.
    }
    public List<User> ListActive()
    {
        // Logic to query all active users in the database.
        return context.Users.Active().ToList();
    }
} 
```

复杂查询需要了解其目的和职责，才能将查询逻辑抽象到其存储库中。例如，“获取所有属于该用户的帐户”可以在`AccountRepository`类中编写为`List<Account> ListForUser(int userId) { }`.

**编辑：**根据评论，这里是编写搜索查询的场景，该查询检索居住在洛杉矶且至少拥有 2 个帐户的用户。

```
public class UserRepository : IRepository<User>, IUserRepository
{
    // other queries.

    public List<User> List(ISearchQuery query)
    {
        // Logic to query all active users in the database.
        return context.Users.Active().LivesIn(query.Country).WithAccounts(query.AccountsAtLeast).ToList();
    }
}

public static class UserExtensions
{
    // other pipes and filters.

    public static IQueryable<User> LivesIn(this IQueryable<User> query, string country)
    {
        return query.Where(user => user.Country.Name == country);
    }
    public static IQueryable<User> WithAccounts(this IQueryable<User> query, int count)
    {
        return query.Where(user => user.Accounts.Count() >= count);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T10:14:42.737

我建议你使用`IEnumerable<T>`而不是`IQueryable<T>`，它也允许延迟加载。`IEnumerable`但是，并不意味着您可以以*任何*方式查询数据。您的 DB LINQ 提供程序可能会减少功能集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T15:36:28.640

由于`TableQuery<T>`实现`IEnumerable<T>`而不是实现，`IQueryable<T>`最好的解决方案是简单地将存储库接口更改为 return`IEnumerable<T>`而不是`TableQuery<T>`. 这不仅打破了 SqlLite 库的显式客户端依赖关系，而且在接口中使用**抽象**( `IEnumerable<T>`) 而不是**实现**( `TableQuery<T>`) 也是一种更好的设计。

您的示例方法应如下所示：

```
//Repository<User> class
public IEnumerable<User> List(where, orderby, topN parameters and etc)
{
    //query and return
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T08:25:38.177

延迟加载可能是 PITA，我宁愿尝试将加载策略注入存储库，而不是尝试在我的应用程序或业务层中摆弄查询对象。特别是当查询对象迫使我紧密耦合层时。

# android - V4/V13 支持库：片段工作，ViewPager 不工作？

> ID：12259066
> 
> 赞同：1
> 
> 时间：2012-09-04T07:56:11.163
> 
> 标签：android, backwards-compatibility

测试android支持库中的其他组件，

在设备上 classLoader 找不到`ViewPager`，但它可以找到其他支持组件`FragmentActivity`等`Fragments`。（使用 V4 和 V13，结果相同）

有什么特别之处`ViewPager`？它是否依赖于其他支持组件才能工作？（喜欢`Fragment`需要`FragmentActivity`）

注意：我认为我正确地将支持库导出为依赖项，否则`Fragment`也不会起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:45:25.117

你应该像这样引用它：

```
<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

`<v4support:ViewPager>`是不正确的。您需要 xml 中的整个包名。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-04T08:40:44.310

`android.view.ViewPager`存在于 Android 3.0 及更高版本中。支持库版本有一个不同的包：`android.support.v4.view.ViewPager`.

# mysql - Mysql更新多个表

> ID：12259068
> 
> 赞同：1
> 
> 时间：2012-09-04T07:56:11.893
> 
> 标签：mysql

我想做这样的事情：

```
create table t1 (id varchar(20) NOT NULL default '', money decimal(20,4) NOT NULL default '0');

create table t2 (id varchar(20) NOT NULL default '', money decimal(20,4) NOT NULL default '0');

insert into t1 values('1',1);

insert into t2 values('1',2);
insert into t2 values('1',3); 
```

并且我想将相同id的所有t2的钱添加到t1，所以我使用以下sql：

`update t1,t2 set t1.money = t1.money + t2.money where t1.id = t2.id`.

我认为表 t1 中 id '1' 的钱应该是

> 1 + 2 + 3 = 6

但实际上是

> 1 + 2 = 3；

似乎它总是添加 t2 的第一行。

```
mysql> select * from t1;

+----+--------+
| id | money  |
+----+--------+
| 1  | 3.0000 |
+----+--------+ 
```

我怎样才能得到价值

> 1 + 2 + 3

通过一个 sql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:03:23.797

```
UPDATE t1 SET t1.money = (SELECT SUM(t2.money) + t1.money FROM t2 WHERE t1.id = t2.id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:03:05.810

您应该使用内部查询：

```
update t1 set t1.money = (select sum(t1.money) from t1) + (select sum(t2.money) from t2 where t2.id=t1.id) 
```

或类似的东西。

# groovy - Groovlet 类路径

> ID：12259071
> 
> 赞同：0
> 
> 时间：2012-09-04T07:56:24.703
> 
> 标签：groovy, groovlet

我正在编写一个简单的 groovlet Web 应用程序。

我有一些 groovy 库 (*.groovy)，所有 groovlet 都共享这些库。

我应该将 groovy 库放在哪里以在 groovlets 中使用？

（我不想编译库 *.groovy 因为它可能会被多次更改）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:22:20.687

[请参阅此页面上的](http://groovy.codehaus.org/Groovlets)“设置 groovylets [原文如此]” 。

总结一下这个想法，假设你的 webapp 叫做 Pets：

*   按照描述编辑 ~/webapps/Pets/WEB-INF/web.xml
*   Groovy jar 位于 ~/webapps/Pets/WEB-INF/lib 中，如所述
*   您的 Groovlets（*.groovy 文件）位于 ~/webapps/Pets
*   根据标准 Servlet 规范，您的自定义 Groovy 罐子/库位于 ~/webapps/Pets/WEB-INF/lib 中

# iphone - Restkit 对象映射在映射过程中遇到错误

> ID：12259074
> 
> 赞同：0
> 
> 时间：2012-09-04T07:56:30.593
> 
> 标签：iphone, objective-c, ios, restkit

我正在使用带有对象映射的 Restkit，但我似乎收到一条错误消息`Encountered errors during mapping: Expected an object mapping for class of type 'Rating', provider returned one for 'Error'`- 现在我已经为 Rating 和 Error 对象设置了映射和序列化，所以我不明白为什么会混淆。任何人都可以帮忙吗？

这是从类返回的映射

```
// Rating class
+ (RKObjectMapping *)getRestKitObjectMapping {
    RKObjectMapping *mapping = [RKObjectMapping mappingForClass:[Rating class]];
    [mapping mapAttributes:@"id", @"mics", @"mdate", @"ipaddress", nil];
    [mapping mapKeyPath:@"user_id" toAttribute:@"userID"];
    [mapping mapKeyPath:@"fid" toAttribute:@"fid"];

    return mapping;
}

// Error class
+ (RKObjectMapping *)getRestKitObjectMapping {
    RKObjectMapping *mapping = [RKObjectMapping mappingForClass:[Error class]];
    [mapping mapKeyPath:@"code" toAttribute:@"code"];
    [mapping mapKeyPath:@"message" toAttribute:@"message"];

    return mapping;
} 
```

这是对象路由

```
[[RKObjectManager sharedManager].router routeClass:[Rating class] toResourcePath:@"/mic/:id"];
    [[RKObjectManager sharedManager].router routeClass:[Rating class] toResourcePath:@"/mic" forMethod:RKRequestMethodPOST];

[[RKObjectManager sharedManager].mappingProvider setMapping:[Rating getRestKitObjectMapping] forKeyPath:@"ratings"];
    [[RKObjectManager sharedManager].mappingProvider setMapping:[Error getRestKitObjectMapping] forKeyPath:@"error"];

[[RKObjectManager sharedManager].mappingProvider setSerializationMapping:[[Rating getRestKitObjectMapping] inverseMapping] forClass:[Rating class]];
    [[RKObjectManager sharedManager].mappingProvider setSerializationMapping:[[Error getRestKitObjectMapping] inverseMapping] forClass:[Error class]];

Rating *rating = [[Rating alloc] init];
[[RKObjectManager sharedManager] postObject:rating delegate:self]; 
```

这些是委托方法，`didLoadObjects`确实被调用

```
- (void)objectLoader:(RKObjectLoader *)objectLoader didFailWithError:(NSError *)error
{
    NSLog(@"Object loading failed with error: %@ ----- body: %@", error.localizedDescription, objectLoader.response.bodyAsString);
}

- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects
{
    NSLog(@"Objects received: %@", objects);
    NSLog(@"Respond body: %@", objectLoader.response.bodyAsString);
} 
```

这是 JSON 响应

```
{"error":{"error":1,"code":342,"message":"You have already rated this one"}} 
```

此外，当我查看我的 REST PHP 后端上的 $_POST 值时，它实际上是空的，这意味着它没有接收到发布对象……这是为什么呢？我的路由好像没问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:49:04.113

您对后端服务有任何控制权吗？

如果是这样，我会改变你发回数据的方式。当您进行“postObject”调用时，唯一预期的响应是“Rating”。我意识到您设置了一个“错误”映射，但由于您发布的对象是一个“评级”对象，它期待它回来。

这里更合适的是服务将 HTTP 状态代码更改为 403（禁止），或者不是 200（正常）。然后您可以在“objectLoader:didFailWithError:”委托方法中处理错误。

# c# - 在特定时间戳创建 ConcurrentQueue 中所有现有项目列表的最有效方法

> ID：12259077
> 
> 赞同：2
> 
> 时间：2012-09-04T07:56:38.317
> 
> 标签：c#

我必须维护信息日志，这些日志可以从多个线程同时写入，但是当我需要它们时，我只使用一个线程将其出列，这在出列集合之间需要大约 5 秒的休息时间。

以下是我为 Dequeue 它编写的代码。

```
if (timeNotReached)
{
   InformationLogQueue.Enqueue(informationLog);
}
else
{
    int currentLogCount = InformationLogQueue.Count;
            var informationLogs = new List<InformationLog>();
            for (int i = 0; i < currentLogCount; i++)
            {
                InformationLog informationLog1;
                InformationLogQueue.TryDequeue(out informationLog1);
                informationLogs.Add(informationLog1);
            }
    WriteToDatabase(informationLogs);
} 
```

出队后，我将其传递给 LINQ 的 insert 方法，该方法需要 List of InformationLog 插入数据库。

这是正确的方法还是有其他有效的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T08:40:10.590

您可以`ConcurrentQueue<T>`通过如下扩展方法直接在 Linq 语句中使用：

```
static IEnumerable<T> DequeueExisting<T>(this ConcurrentQueue<T> queue)
{
    T item;
    while (queue.TryDequeue(out item))
        yield return item;
} 
```

这将使您不必连续分配新对象`List<T>`和`ConcurrentQueue<T>`对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T08:17:41.777

您可能应该使用 [此处](https://stackoverflow.com/questions/3502902/dequeueing-objects-from-a-concurrentqueue-in-c-sharp)所述的`ConcurrentQueue<T>`via a 。[`BlockingCollection<T>`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)

* * *

像这样的东西，

```
private BlockingCollection<InformationLog> informationLogs = 
    new BlockingCollection<InformationLog>(new ConcurrentQueue<InformationLog>); 
```

然后在你的消费者线程上你可以做

```
foreach(var log in this.informationLogs.GetConsumingEnumerable())
{
    // process consumer logs 1 by 1\. 
} 
```

* * *

好的，这是消费多个项目的答案。在消费线程上执行此操作，

```
InformationLog nextLog;
while (this.informationLogs.TryTake(out nextLog, -1))
{
    var workToDo = new List<informationLog>();
    workToDo.Add(nextLog);

    while(this.informationLogs.TryTake(out nextLog))
    {
        workToDo.Add(nextLog);
    }

    // process workToDo, then go back to the queue.
} 
```

第一个while循环以无限等待时间从队列中获取项目，我假设一旦在队列上完成添加，即被调用，一旦队列为空[`CompleteAdding`](http://msdn.microsoft.com/en-us/library/dd287086.aspx)，此调用将立即返回。`false`

内部 while 循环采用 50 毫秒超时的项目，这可以根据您的需要进行调整。一旦队列为空，它将返回`false`，然后可以处理这批工作。

# windows-7 - 由于 VS2012 RC 上的 IIS 更改（8=>7.5）而无法调试 MVC 项目

> ID：12259078
> 
> 赞同：1
> 
> 时间：2012-09-04T07:56:41.087
> 
> 标签：windows-7, visual-studio-2012, iis-express

我已经安装了网络矩阵，它以某种方式删除了现有的 IIS Express 8.0，它是在 VS2012RC 安装期间默认安装的。我认为这是因为 web Matrix 使用的是 IIS 7.5。所以它已经用 IIS Express 7.5 替换了 IIS Express 8。

所以我的技术主管告诉我删除在安装 Web Matrix 期间已安装的现有 IIS 7.5，然后我将其删除。所以我没有用于调试的IIS。因此，一旦我尝试手动安装 IIS 8，它说存在 IIS Express 8 的现有版本。所以我什至无法安装 IIS Express 8。

所以我对我的 VS2012RC 进行了修复。经过漫长的过程，它终于给了我一份报告

```
"IIS 8.0 Express
Package failed" 
```

所以，现在我完全坚持这一点。擅长这个VS东西的人可以帮助我解决这个问题。

另一件事是，以前当我打开项目但它没有加载（它说项目没有加载）所以，然后当我写点击它并重新加载它说“ `For debugging you have to have IIS 8.0 and ask me to download it and install`”。

当我单击下一步然后它转到“MS Web 平台安装程序”并引导我到“IIS 7.5 下载页面”但安装按钮已启用并显示已安装。我应该怎么做才能克服这个问题。这就像一场噩梦。

我还尝试使用“修复它”，它的 beta 测试已经结束，我无法正确卸载 IIS 8，它说它仍然存在。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T03:21:49.980

所以，我所做的是使用 MS Web 平台安装程序，我的 IIS Express 7.5 和 IIS Express 8.0 选项由于注册表问题而消失了。但是还有另一个 IIS 8.0 与 Windows XP 和 Vista 及更高版本兼容。所以我下载安装了。它立即安装，然后我打开项目并更改了我的解决方案配置，单次启动到我的网站项目。它奏效了。这使我摆脱了那天的破坏。

后来我卸载了 IIS 8.0（Xp 兼容），然后再次对我的 VS 2012 进行了修复，当时它安装正确。然后我如上所述更改了配置并完成了。

如果您有同样的问题，您还必须检查配置。因为我忘记了这需要更长的时间，而不是修复 VS 2012 以及系统还原的时间。

# c - 结构的动态分配和设置指针

> ID：12259087
> 
> 赞同：0
> 
> 时间：2012-09-04T07:57:12.643
> 
> 标签：c, pointers, data-structures, xml-parsing

我为一个结构分配了 5 个位置——其中每个 CELL 都是指向该结构的指针。现在我希望第二个单元格指向我的结构，但我得到一个错误：表达式必须是一个可修改的值。我明白我正在重新定位我的指针，但我不明白如何在不复制所有值的情况下修复它。

这是我正在使用的示例：（相关内容）

```
 typedef struct childrenArray
{
    PXML_ELEMENT    childrenArray;
     UINT32         numOfChildren;
     UINT32         maxNumOfChildren;
 }CHILDREN_ARR,*PCHILDREN_ARR;

 typedef struct xml_Element
 {    
     PDATA_ELEMENT           pData;
     PCHILDREN_ARR          pChildrenArr;
     PXML_ELEMENT           pParent;
     PATTR_ARR              pAttributeArr;
     UINT32                     depth;
  }; 
```

当我创建子数组时：代码是：

```
PCHILDREN_ARR retArr;
retArr->childrenArray = (PXML_ELEMENT)Calloc(retArr->maxNumOfChildren ,sizeof(XML_ELEMENT)); /*my max is 5 .. */ 
```

现在我得到了问题：我想使用这个功能：

```
XML_STATUS xml_AddChildToEndArray(PXML_ELEMENT pChild , PXML_ELEMENT pParent)
{
     pParent->pChildrenArr->childrenArray + pParent->pChildrenArr->numOfChildren = pChild;
} 
```

我得到了错误...我可以解释为什么它是错误的，我该如何解决它？

我不想：

```
'currentCell ->name = pChild-> name' 
```

复制所有值......只是为了让它指向孩子

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:15:12.427

如果我理解你是正确的，你想将一个项目附加到`childrenArray`结构中的“数组”`childrenArray`吗？

首先，您必须确保为新阵列分配了足够的空间。这可以通过例如来完成[`realloc`](http://msdn.microsoft.com/en-us/library/xbebcx7d%28v=vs.100%29.aspx)。

也许是这样的：

```
/* Allocate space for one more entry */
pParent->pChildrenArr->childrenArray =
    realloc(pParent->pChildrenArr->childrenArray,
            (pParent->pChildrenArr->numOfChildren + 1) * sizeof(XML_ELEMENT));

/* Copy the entry to the new place */
pParent->pChildrenArr->childrenArray[pParent->pChildrenArr->numOfChildren] = *pChild;

/* One more child now */
pParent->pChildrenArr->numOfChildren++; 
```

**编辑：**似乎您已经分配了一个具有最大条目数的数组，那么您不必重新分配：

```
if (pParent->pChildrenArr->numOfChildren < pParent->pChildrenArr->maxNumOfChildren)
{
    pParent->pChildrenArr->childrenArray[pParent->pChildrenArr->numOfChildren] = *pChild;
    pParent->pChildrenArr->numOfChildren++;
} 
```

如果你想在需要的时候增加数组的大小，你必须结合这两种方法：

```
PCHILDREN_ARR pArray = pParent->pChildrenArr;

if (pArray->numOfChildren >= pArray->maxNumOfChildren)
{
    /* We need to reallocate */
    pArray->maxNumOfChildren += 5;

    pArray->childrenArray = realloc(pArray->childrenArray,
                                    pArray->maxNumOfChildren * sizeof(XML_ELEMENT));
}

pArray->childrenArray[pArray->numOfChildren++] = *pChild; 
```

# jquery - jQuery：根据图像比例添加类

> ID：12259088
> 
> 赞同：2
> 
> 时间：2012-09-04T07:57:15.403
> 
> 标签：jquery

你好，

我正在尝试根据每个图像的比例（风景/肖像/正方形）为每个图像添加类。此代码适用于 JSfiddle，但不适用于网站（本地或服务器）：

```
$(document).ready(function()
{
    $('img').addClass('wide');
    $.each($('img'), function()
    {
        var image = $(this);

        if (image.height() > image.width()) {
            image.removeClass('wide');
            image.addClass('tall');
        } else if (image.height == image.width()) {
            image.removeClass('wide');
            image.addClass('square');
        }
    });
});​ 
```

这是我的 JSfiddle：http: [//jsfiddle.net/LYxv6/](http://jsfiddle.net/LYxv6/)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T08:11:37.190

您的代码在 jsfiddle 上运行的原因是该站点（默认情况下）将您的代码包装在`onload`处理程序中。一旦加载了所有图像，就会调用此处理程序，这与`$(document).ready()`仅等待 DOM 结构完成不同。

如果您利用`addClass`采用函数参数而不是字符串的版本，则更改类的函数是微不足道的：

```
$(window).on('load', function() {
    $('img').addClass(function() {
        if (this.height === this.width) {
            return 'square';
        } else if (this.height > this.width) {
            return 'tall';
        } else {
            return 'wide';
        }
    });
}); 
```

在回调`this`中是`<img>`元素本身，您可以直接访问它的`.width`和`.height`属性，而无需使用 jQuery。

这应该比在`.each()`循环中重复调用 jQuery 函数更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:04:25.870

你应该运行这个脚本

```
$(window).load() 
```

...否则（准备就绪）可能会发生图像尚未加载并且在您访问它们时大小仍然未知的情况。

您还在这里忘记了一些括号：

```
else if (image.height == image.width()) { 
```

应该

```
else if (image.height() == image.width()) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T08:09:08.997

更改为 $('img').each 并在 image.height() 处缺少括号（这是一个函数）

```
$(window).load(function() {

$('img').addClass('wide');

$('img').each(function() {
    var image = $(this);

    if (image.height() > image.width()) {
        image.removeClass('wide');
        image.addClass('tall');
    }
    else if (image.height() == image.width()) {
        image.removeClass('wide');
        image.addClass('square');
    }

});

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T07:59:23.610

尝试在`if` `else if`语句中使用变量：

[**这是jsFiddle。**](http://jsfiddle.net/LYxv6/5/)

```
 var biggerVal = image.height() > image.width();
    var equalVal = image.height() == image.width();

    if ( biggerVal ) {
        image.removeClass('wide');
        image.addClass('tall');
    } else if ( equalVal ) {
        image.removeClass('wide');
        image.addClass('square');
    } 
```

这个问题也有同样的问题：[How to build simple sticky navigation with jQuery?](https://stackoverflow.com/questions/11872381/scrolltop-and-then-div-fixed/11872508#11872508)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T08:07:41.397

在本地系统的服务器上，创建一个 .html 文件。

将其更改为文档加载，为其中一个宽度部分添加缺少的大括号 - 并确保 .html 文件如下所示：

```
 <!DOCTYPE html>
    <html>
    <head>
    <meta charset=utf-8 />
    <title></title>
    <script>
       $(document).load(function() {

    $('img').addClass('wide');

    $.each($('img'), function() {
        var image = $(this);

        if (image.height() > image.width()) {
            image.removeClass('wide');
            image.addClass('tall');
        }
        else if (image.height() == image.width()) {
            image.removeClass('wide');
            image.addClass('square');
        }

    });

});​
    </script>
    <style>
    img{
height:250px;
}
.wide{
border:10px solid #aed;

}
.tall{
border:10px dashed #dea;

}
.square{
border:10px dotted #ade;

}​
    </style>
    </head>
    <body>
    <img src="http://24.media.tumblr.com/tumblr_m9t0dwyu0P1qjfsubo1_500.jpg"/>
    <img src="http://24.media.tumblr.com/tumblr_m9iqv8oQl01qcpwsso1_500.jpg "/>
    <img src="http://25.media.tumblr.com/tumblr_m9n4kyf8aA1r1thfzo5_1280.jpg"/>  
    </body>
    </html>
​ 
```

您可以将`<style></style>`and`<script></script>`替换为`<link rel="stylesheet" type="text/css" href="yourstyle.css"/>`and`<script type ="text/javascript" src="jquerywhatever.js"></script><script type ="text/javascript" src="YOURSCRIPT.js"></script>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T08:09:50.823

我会做这样的事情：

```
(function ($) {
    $.fn.proportions = function (options) {
        options = $.extend(options, {
            wideClass : 'wide',
            tallClass : 'tall',
            squareClass : 'square'
        });
        addProportions = function () {
            img = $(this);
            var ratio = img.width() / img.height();
            if (ratio > 1) {
                return img.addClass(options.wideClass);
            }
            if (ratio === 1) {
                return img.addClass(options.squareClass);
            }
            return img.addClass(options.tallClass);
        };
        return this.each(function () {
            if ($(this).width() !== undefined) {
                addProportions.call(this);
            } else {
                $(this).on('load', addProportions);
            }
        });
    };
}(jQuery));

jQuery(function ($) {
    jQuery('img').proportions();
});​ 
```

将其放入插件中使其可重用。而不是像 jsfiddle 那样使用 window.load ，而是将该函数附加到每个图像的加载事件中，以便立即添加该类。

# scala - 玩！Scala 模板引擎和会话

> ID：12259089
> 
> 赞同：0
> 
> 时间：2012-09-04T07:57:16.497
> 
> 标签：scala, mongodb, playframework, playframework-2.0, salat

我希望我的 Web 应用程序中的用户发表帖子。该帖子将包含他的用户名，以表明他发布了该帖子。我该怎么做？

**更新！**

这是我的工作代码

请在下面查看我的代码：

```
 def createlisting = isAuthenticated { username => implicit request =>
          Ok(html.createlisting(listingsForm))
        }

        def postlisting = withUser {user => implicit request => {
          listingsForm.bindFromRequest.fold(
            formWithErrors => BadRequest(html.createlisting(formWithErrors)),
            listing => {
              val username = val username = User.getUserName(user)
              Listings.create(listing.categorytype, listing.title, listing.description, username)
              Redirect(routes.Application.active).flashing("success" -> "Listing %s has been posted".format(listing.title))
              }
            )
            }
          }

        val listingsForm = Form(
          mapping(
            "_id" ->  ignored(new ObjectId()),
            "categorytype" -> mapping(
              "category" -> nonEmptyText,
              "subcategory" -> nonEmptyText)(Type.apply)(Type.unapply),
            "title" -> nonEmptyText,
            "description" -> nonEmptyText,
            "username" -> igrnored(String)
          )(Listings.apply)(Listings.unapply)
        ) 
```

scala.html

```
 @(createForm: Form[Listings])

                @import helper._

                @implicitFieldConstructor = @{ FieldConstructor(twitterBootstrapInput.f) } 

                    <h1>Add a Listing</h1>

                    @form(routes.Application.postlisting()) {

                        <fieldset>
                            @inputText(createForm("categorytype.category"), '_label -> "Main Category")
                            @inputText(createForm("categorytype.subcategory"), '_label -> "Sub Category")
                            @inputText(createForm("title"), '_label -> "Title")
                            @inputText(createForm("description"), '_label -> "Description")

                        </fieldset>

                        <div class="actions">
                            <input type="submit" value="Post Add" class="btn primary" href="/"> or 
                            <a href="/" class="btn primary">Cancel</a> 
                        </div>

                    } 
```

我该怎么做才能让用户名自动传递给 postlistings 函数并保存在我的数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:02:38.937

如果用户名在会话中（就像`withUser`在其他函数中使用的那样），您无需做任何事情，它将随着每个请求自动传递。

不过，您需要做的是恢复它。看来您可以将您`Action`的另一个电话包装起来`withUser`，这样就可以了。

# spring - 将 Principal 从 EJBContext 转移到 Spring SecurityContext

> ID：12259092
> 
> 赞同：3
> 
> 时间：2012-09-04T07:57:30.693
> 
> 标签：spring, security, ejb

我正在使用 springsecurity 来保护部署在 jBoss 5.1.0 上的一些 EJB 方法。

我正在寻找一种很好的方法，通过调用将`java.security.Principal`检索到的[EJBContext](http://docs.oracle.com/javaee/6/api/javax/ejb/EJBContext.html)`getPrincipal()`传输到 Spring [SecurityContext](http://static.springsource.org/spring-security/site/docs/3.0.7.RELEASE/apidocs/org/springframework/security/core/context/SecurityContext.html)。

我不想放弃 springsecurity 模式，只需要在[MethodSecurityInterceptor](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/access/intercept/aopalliance/MethodSecurityInterceptor.html)`Principal`执行之前设置。

任何想法？

# java - 除了使用 if else 和 switch 之外，如何确定工厂模式中的子类类型？

> ID：12259093
> 
> 赞同：4
> 
> 时间：2012-09-04T07:57:32.523
> 
> 标签：java, factory-pattern

我想尝试工厂模式并且能够实现它，但是当
生成多个类时，我认为这会很难看！所以任何澄清或建议将不胜感激......

我的超类：

```
public abstract class Output {

    public abstract void generate(Data dat); } 
```

我得到了从输出扩展的其他类，例如

```
public class generateXML extends Output{
.
.
.
} 
```

我的问题与这里有关：

```
public class generatorFactory(){

public Output generate(String str){ 
```

// 或者获取一个对象作为参数，例如 (Object obj)

```
if(str.equals("xml"){  
return new generateXML();  
}  
else if.........  
......  
} 
```

有什么方法可以确定子类类型避免检查每种类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:06:07.153

您应该考虑用地图替换您的 if-else 链。

不必编写代码来检查您想要支持的所有字符串，您只需几行即可从地图中检索元素。

当然，您将需要更多配置代码来将项目放入地图中，但这应该是微不足道的。

[这](http://css.dzone.com/articles/transform-switches-maps)是一篇关于这个主题的好文章（在 PHP 中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:06:47.180

您可以使用`enum`可以传递给工厂并基于传递的枚举返回工厂对象。唯一的问题是您不能将其导出为 API。

```
 enum Type
{
    XML {
        @Override
        public Object getFactory() {
            // TODO Auto-generated method stub
            return null;
        }
    };

    public abstract Object getFactory();
} 
```

如果您必须像 API 一样公开它，那么您可以执行以下操作。

```
interface IType {
    public abstract Object getTypeFactory();
}

enum Type implements IType {
    XML {
        @Override
        public Object getTypeFactory() {
            // TODO Auto-generated method stub
            return null;
        }
    };
} 
```

并将工厂方法实现更改为

```
public static Object getFactoryByType(String name) {
    Type type = Type.valueOf(name);
    return type.getTypeFactory();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T08:07:50.313

您可以使用反射。

```
Object generated = getClass().getMethod("generate" + type.toUpperCase()).invoke(this);

public Object generateXML();
public Object generateJSON();
public Object generateCSV(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T11:35:55.387

您可以使用 newInstance() 来实例化您从参数构建的类名的生成器：

```
public Generator getGenerator (final String type)
{
    final Class generatorClass = ClassLoader.getSystemClassLoader().loadClass("Generator"+type);
    final Generator generator = (Generator) (generatorClass.newInstance());
     return generator;
} 
```

PS：我高度评价你遵循Java的规则：如果generateXML是一个类，它应该写成GenerateXML。

更重要的是：注意命名你的类。(1) 对象 generateXML 应该扩展输出，因为它不是输出。(2)“GenerateXML”是动词，即动作。因此，命名一个对象不是一个正确的词，而是一个方法。您可以将每个示例中的对象命名为“XMLGenerator”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T08:05:29.113

由于您每次都必须打电话`new`，我不确定您是否可以绕过分支过程。必须有人知道该给你什么。

如果是单例，你可以初始化一个 HashMap`"xml"=>generateXML singleton`

不过，在第二个之后，您可以为不同的类 MyTypeXML、MyTypeJSON 修改您的 String 属性`Type`……然后使用名称相同但类型不同的方法。

```
public Output generate(MyTypeXML xml) { // This will go for XML }
public Output generate(MyTypeJSON json) { // This will go for JSON } 
```

但是对于工厂来说，我并不反对 if...else 编码。

# ruby - 如何将哈希对象传递给 HAML 标签

> ID：12259094
> 
> 赞同：10
> 
> 时间：2012-09-04T07:57:46.790
> 
> 标签：ruby, haml

请考虑这个例子：

```
- user_links_params = _user_link_params(current_user)

%a{ :'data-msgstore-path' => user_links_params[:'data-msgstore-path'],
  :'data-user_id' => user_links_params[:'data-user_id'],
  :class => user_links_params[:class],
}
  / too many html tags and stuff to fit in a simple link_to 
```

我会很高兴将所有这些都放在一个简单的语句中，如下所示：

```
%a[_user_link_params(current_user)]
  / too many html tags and stuff to fit in a simple link_to 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T15:35:57.287

是的，这是可能的，而且你很接近：

```
%a{_user_link_params(current_user)} 
```

来自[HAML 参考](http://haml.info/docs/yardoc/file.HAML_REFERENCE.html)：

> 例如，如果您定义
> 
> ```
> def hash1
>   {:bread => 'white', :filling => 'peanut butter and jelly'}
> end
> 
> def hash2
>   {:bread => 'whole wheat'}
> end 
> ```
> 
> 然后`%sandwich{hash1, hash2, :delicious => true}/`将编译为：
> 
> ```
> <sandwich bread='whole wheat' delicious='true' filling='peanut butter and jelly' /> 
> ```

# vba - 这个变量将如何响应

> ID：12259095
> 
> 赞同：1
> 
> 时间：2012-09-04T07:57:47.667
> 
> 标签：vba, variables, excel

我正在使用 Excel VBA，但我认为这是一个相当普遍的问题。

我有以下声明

`Public newReport As Excel.Workbook`

稍后在代码中，打开并命名一个 xlsx 文件后，`MyBook.xlsx`我将这个变量指向该文件：

`Set newReport = Excel.Workbooks("MyBook.xlsx")`

我又有点困惑了。可变行为。如果我稍后打开 MyBook.xlsx 并执行`ActiveWorkbook.SaveCopyAs`并给它一个*新名称*说 MyBookNew.xlsx 将变量`newReport`指向新工作簿吗？

相关代码示例如下：

```
Public newReport As Excel.Workbook

Sub FileExperiment()

Set newReport = Excel.Workbooks.Add
newReport.SaveAs ThisWorkbook.Path & "\MyBook.xlsx"

Set newReport = Excel.Workbooks("MyBook.xlsx")
ActiveWorkbook.SaveCopyAs ThisWorkbook.Path & "\MyNewBook.xlsx"

newReport.Close False

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:44:22.160

`newReport`将保持不变。

从帮助文件中剪切，关于命令`SaveCopyAs`：

*将工作簿的副本保存到文件中，但不修改内存中打开的工作簿。*

# zend-framework - 从任何地方访问 DI 容器

> ID：12259096
> 
> 赞同：1
> 
> 时间：2012-09-04T07:57:54.807
> 
> 标签：zend-framework, dependency-injection

我在 Zend Framework 项目中实现了 Symfony2 依赖注入容器，它在我的应用程序的 MVC 层中运行良好。我已经在我的引导程序中初始化了 DIC，并且可以通过调用在任何地方访问它：

```
Zend_Controller_Front::getInstance()->getParam('bootstrap')->getDic() 
```

问题是我的应用程序的某些部分没有使用 Zend Framework 应用程序/MVC 层。例如我的 CLI 工具。我可以在那里完美地初始化一个新的 DIC，但这只是 Bootstrap 文件中的一些复制粘贴工作，这会在路上遇到麻烦（DRY 原则等）

例如，让我的 DIC 在`Zend_Registry`或作为静态方法调用的单例中可用是更好的解决方案`DIC::getInstance()`吗？

我知道注册表和单例被认为是坏事，但 DIC 是应用程序的高级部分，我可能永远不会遇到使其成为坏事的问题。

这是一个好的解决方案还是有更好的方法来实现全球可访问的 DIC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:26:55.527

要访问 CLI 文件中的引导资源，您可以对应用程序进行部分引导

而不是这样做（public/index.php）并引导您的整个应用程序：

```
$application = new Zend_Application(
    APPLICATION_ENV,
    APPLICATION_PATH . '/configs/application.ini'
);
$application->bootstrap()
            ->run(); 
```

您可以这样做，并且只引导所需的资源：

```
$app = new Zend_Application(
    APPLICATION_ENV,
    APPLICATION_PATH .  '/configs/application.ini'
);

// Selectively bootstrap resources:
$app->bootstrap('db');
$app->bootstrap('log');
$app->bootstrap('autoload');
$app->bootstrap('config');
$app->bootstrap('di'); 
```

您必须确保以正确的顺序初始化它们（例如，如果您有一个用于日志的数据库写入器，您可能需要在日志记录组件之前加载您的数据库）。

从那里，您可以调用引导程序的一部分（对于 DI 组件，您可以调用`$app->getBootstrap()->getContainer()`. 您可以访问引导程序中所有可用的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:44:58.173

我过去使用[**Pimple**](http://pimple.sensiolabs.org/)（由 Symfony 的所有者 Fabien Potencier 创建）实现了这一点。

> Pimple 是 PHP 5.3 的一个小型依赖注入容器，它只包含一个文件和一个类（大约 50 行代码）。

这是我如何将它与我的 ZF1 应用程序耦合的：

1.  在应用程序的引导程序中创建一个新的 Pimple 容器
2.  使用适当的依赖关系声明所有服务
3.  通过控制器或 CLI 工具访问 DIC
4.  通过 DIC 访问服务

如果您的服务声明良好（通过其构造函数注入依赖项），则您不必在控制器或 CLI 工具之外访问 DIC。

使用基本控制器类通过以下方式轻松访问 DIC `$this->container`：

```
abstract class MyApp_Controller_Action extends Zend_Controller_Action
{
    protected $container;

    public function init()
    {
        $this->container = Zend_Controller_Front::getInstance()
                               ->getParam('bootstrap')->getDic();
    }
} 
```

* * *

为了在 CLI 工具中使用您的 DIC：

1.  扩展`Zend_Application`以创建您的 CLI 应用程序
2.  覆盖`run()`以防止 MVC 堆栈引导
3.  创建 CLI 工具时，通过其构造函数注入 DIC

使用基本命令类通过以下方式轻松访问 DIC `$this->container`：

```
abstract class MyApp_Command
{
    protected $container;

    public function __construct($container)
    {
        $this->container = $container;
    }
} 
```

# oracle - 在执行 Oracle 过程时向用户显示注释

> ID：12259097
> 
> 赞同：2
> 
> 时间：2012-09-04T07:58:01.767
> 
> 标签：oracle, oracle11g

是否可以在执行包中的过程时向用户显示注释。我的包裹有 3 个程序。我一个接一个地打电话。我想在控制台上显示**注释**，例如程序 xyz 正在执行，程序成功执行。我在程序中添加了评论，例如`DBMS_OUTPUT.PUT_LINE('PROCEDURE EXECUTED SUCCESSFULLY')`但对我没有用。仅供参考，我在 Windows 7 系统中使用 oracle 11g。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T08:54:34.103

You can't use `DBMS_OUTPUT` to display information on a procedure while it is running. This is because [`DBMS_OUTPUT.put_line`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_output.htm#i1000105) doesn't display data on screen, rather, the data is put in a queue that is later read by the calling client (This queue is also invisible outside of its transaction). If you use `SQL*Plus` the queue is read and displayed automatically at the end of the procedure if you have `SET SERVEROUTPUT ON`.

Other means exist to follow the progress of a procedure while it is running:

*   You could [write to a file](https://stackoverflow.com/questions/1453538/how-to-redirect-the-output-of-dbms-output-put-line-to-a-file) instead. [`UTL_FILE.put_line`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/u_file.htm#i997640) will write directly if the parameter `autoflush` is set to true.
*   You could set session variables with [`DBMS_APPLICATION_INFO`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_appinf.htm#CHECEIEB). These variables can be read with another session by querying [`v$session`](http://docs.oracle.com/cd/E11882_01/server.112/e25513/dynviews_3016.htm#i1414383).
*   You could use [`AUTONOMOUS_TRANSACTIONS`](https://stackoverflow.com/questions/1335331/autonomous-transaction/1335428#1335428) to log progress information in a dedicated table. This table can be queried by another session simultaneously.

As you can see you would need another process to read the information while it is written. In some applications, this would be achieved by running the main batch job in a new separate process, for example by calling [`DBMS_JOB`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_job.htm#BABHCBFD) or [`DBMS_SCHEDULER`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_sched.htm#CIHHBGGI) while the calling transaction loops on the progress table or file until the job is complete.

SQL*Plus is not an interactive client, you will need some more sophisticated environment to achieve this functionality.

# dom - 如何在当前（光标）位置将元素插入 DOM

> ID：12259100
> 
> 赞同：0
> 
> 时间：2012-09-04T07:58:04.267
> 
> 标签：dom, vb6, html

我想将 SpanElement 插入 DOM 的当前（光标）位置。我使用这个 VB6 函数：

```
Private Function InsertSpan(Tipo As String, Nome As String)

Dim oSpan As MSHTML.HTMLSpanElement
Dim oCurElement As MSHTML.IHTMLElement
Dim oDOM As MSHTML.HTMLDocument

Set oDOM = HTMLEdit.DOM
Set oCurElement = oDOM.activeElement

Set oSpan = oDOM.createElement("SPAN")

oSpan.Id = Tipo & "." & Nome
oSpan.className = Tipo
oSpan.innerHTML = "<b><font size='3' color='#000000'></font></b>"
oSpan.lastChild.lastChild.innerText = "[" & Nome & "]"
oSpan.Style.backgroundColor = "yellow"

oSpan.hideFocus = True
oSpan.contentEditable = "false"
oSpan.Style.verticalAlign = "middle"

oCurElement.appendChild oSpan
oDOM.parentWindow.Focus

End Function 
```

但 SpanElement 附加到当前元素。谢谢，路易吉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:48:26.693

我解决了它替换

```
oCurElement.appendChild oSpan 
```

和

```
Dim objRange As IHTMLTxtRange
Set objRange = oDOM.selection.createRange
objRange.pasteHTML oSpan.outerHTML 
```

谢谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T15:41:59.617

如果我正确理解您的问题，您可以尝试替换：

> oCurElement.appendChild oSpan

和：

> oCurElement.insertAdjacentHTML "beforeBegin", oSpan.outerHTML

# c - 为什么 C 中函数的大小总是 1 个字节？

> ID：12259101
> 
> 赞同：89
> 
> 时间：2012-09-04T07:58:12.310
> 
> 标签：c, function, size, sizeof

当我们使用 来检查函数的大小时`sizeof()`，我们总是得到**1 个字节**。这 1 个字节表示什么？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-09-04T08:00:03.270

这是违反约束的，您的编译器*应该*诊断它。如果它编译它尽管如此，你的程序有未定义的行为[感谢@Steve Jessop 对故障模式的澄清，请参阅[@Michael Burr 的回答](https://stackoverflow.com/a/12259995/596781)，了解为什么一些编译器允许这样做]：来自 C11，6.5.3.4./ 1：

> `sizeof`运算符不应应用于具有函数类型的表达式

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-09-04T08:57:16.407

This is not undefined behavior - the C language standard requires a diagnostic when using the `sizeof` operator with a function designator (a function name) since it's a constraint violation for the `sizeof` operator.

However, as an extension to the C language, GCC allows arithmetic on `void` pointers and function pointers, which is done by treating the size of a `void` or a function as `1`. As a consequence, the `sizeof` operator will evaluate to `1` for `void` or a function with GCC. See [http://gcc.gnu.org/onlinedocs/gcc/Pointer-Arith.html#Pointer-Arith](http://gcc.gnu.org/onlinedocs/gcc/Pointer-Arith.html#Pointer-Arith)

You can get GCC to issue a warning when using `sizeof` with these operands by using the `-pedantic` or `-Wpointer-arith` options to GCC. Or make it an error with `-Werror=pointer-arith`.

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-09-04T08:13:57.523

它表示编译器编写者决定使用 1 的值，而不是让恶魔从你的鼻子上飞走（事实上，这是另一个未定义的用法，`sizeof`它给了我们这样的表达：“如果这是第一个需要的，C 编译器本身必须发出诊断由你的程序产生的诊断结果，然后它本身可能会导致恶魔从你的鼻子里飞出来（顺便说一下，这很可能是记录在案的诊断消息），就像它可能会发出进一步的诊断以进一步违反语法规则或约束（或者，就此而言，无论出于何种原因选择）。” [https://groups.google.com/forum/?fromgroups=#!msg/comp.std.c/ycpVKxTZkgw/S2hHdTbv4d8J](https://groups.google.com/forum/?fromgroups=#!msg/comp.std.c/ycpVKxTZkgw/S2hHdTbv4d8J)

从这里有一个俚语术语“鼻恶魔”，无论编译器决定做什么来响应未定义的构造。`1`是这种情况下这个编译器的鼻恶魔。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-04T08:27:45.330

正如其他人指出的那样， sizeof() 可以采用任何有效的标识符，但它不会为函数名称返回有效的（真实有效的）结果。此外，它肯定可能会或可能不会导致“鬼出鼻”综合症。

如果您想分析您的程序函数大小，请检查链接器映射，它可以在中间结果目录中找到（东西被编译成 .obj/.o 或生成的图像/可执行文件所在的位置）。有时可以选择生成或不生成此映射文件……它取决于编译器/链接器。

如果您想要指向函数的指针的大小，它们的大小都是相同的，即 CPU 上寻址字的大小。

# jquery-ui - 在 jqgrid 中使用 jquery 对话框时出现“堆栈空间不足”

> ID：12259106
> 
> 赞同：1
> 
> 时间：2012-09-04T07:58:37.310
> 
> 标签：jquery-ui, jquery, jqgrid

我有一个 jqgrid，在网格的**loadComplete**上，我正在调用一个函数，该函数创建一个带有一些自定义类的新 div，并将该 div 附加到我正在显示在 div 中创建的自定义图像按钮的列之一。现在，在单击图像按钮时，我正在显示一个模态对话框表单。在我的模态对话框表单上，我通过对所选记录进行 ajax 调用来获得一些价值。对话框上还有两个按钮（保存和取消）。在保存或关闭后调用**.dialog("close")**方法时，我收到错误“ **SCRIPT28：堆栈空间不足**”，奇怪的是保存也可以正常工作。

任何人都可以在这方面提供帮助。

提前致谢。

# php - 覆盖 Symfony2 验证的默认行为（使用 QueryBuilder）

> ID：12259108
> 
> 赞同：1
> 
> 时间：2012-09-04T07:58:43.707
> 
> 标签：php, validation, symfony, symfony-2.1

当我必须在数据库中插入实体数据时，我遇到了问题。

实体与 Symfony2 的实体字段一起显示，我使用查询生成器仅显示“活动”数据。（见下文）

可以通过 Ajax 将数据添加到 Symfony 生成的“选择”中（新的“教授”不活跃 (is_active = 0)）。但是，当我选择通过 Ajax 添加且未激活的数据时，出现此错误：“此值无效。” => 那是因为 Symfony2 由于 de querybuilder "where" 语句而添加了自动验证。

是否可以覆盖默认的 Symfony2 行为，以便也可以验证通过 Ajax 元素添加的非活动 (is_active = 0 (boolean)) 元素（与下面的查询构建器“where”语句不匹配的项目？

```
$builder->add('professionA', 'genemu_jquerychosen_entity', array(
    'class' => 'SportUserBundle:Profession',
    'query_builder' => function(EntityRepository $er) {
        return $er->createQueryBuilder('prof')
            ->where('prof.is_active = :active')
            ->setParameters(array('active' => '1'))
            ->orderBy('prof.name', 'ASC');
    },
)); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:18:49.983

最简单的方法是最初在该字段中注册所有可能的元素。即，从数据库中获取所有职业数据，然后在文档准备好和活动状态更改时使用 ajax 重新创建或限制字段内容。

```
'query_builder' => function(EntityRepository $er) {
        return $er->createQueryBuilder('prof')->orderBy('prof.name', 'ASC');
} 
```

我猜这不是一个很好的解决方案，但它确实有效。:)

# android - Android Fragments - 处理后退按钮

> ID：12259117
> 
> 赞同：2
> 
> 时间：2012-09-04T07:59:10.443
> 
> 标签：android, android-fragments

我正在从我的选项菜单中启动一些片段，例如首选项片段和对话框片段。

当我打开首选项片段并点击后退按钮时，整个活动将关闭。这不是我所期望的对话片段的情况。

有人可以解释为什么会发生这种情况以及可接受的处理方式是什么？:)

要启动首选项片段：

```
getFragmentManager().beginTransaction()
                .add(android.R.id.content, new SettingsFragment())
                .addToBackStack("settings")
                .commit(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-06T19:47:17.497

[与我在这里](https://stackoverflow.com/a/18665326/23947)的回答有关。

我对首选项片段有完全相同的问题。似乎大多数人必须放弃并改用 Preference Activity。

您将遇到的第一个问题是在启动片段时需要使用**替换**而不是**添加。**该代码应更改为如下所示：

```
getFragmentManager().beginTransaction()
                .replace(android.R.id.content, new SettingsFragment())
                .addToBackStack("settings")
                .commit(); 
```

至于处理后退按钮，似乎“后退堆栈”是***系统***后退按钮不会自动触发的东西。我的解决方案是从***onBackPressed***覆盖中手动弹出返回堆栈：

```
@Override
public void onBackPressed()
{
    if (inSettings)
    {
        backFromSettingsFragment();
        return;
    }
    super.onBackPressed();
} 
```

每当我导航到我的首选项片段时，我都会在活动*中将 inSettings*布尔值设置为 true 以保留该状态。这是我的*backFromSettingsFragment*方法的样子：

```
private void backFromSettingsFragment()
{
    inSettings = false;
    getFragmentManager().popBackStack();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-04T08:08:52.010

如果没有任何明确的原因将您命名为返回堆栈状态，请`null`用作参数：

```
getFragmentManager().beginTransaction()
                .add(android.R.id.content, new SettingsFragment())
                .addToBackStack(null)
                .commit(); 
```

# javascript - Ajax 响应处理和分配给变量

> ID：12259118
> 
> 赞同：0
> 
> 时间：2012-09-04T07:59:12.377
> 
> 标签：javascript, jquery, ajax

您好，我对 ajax 响应处理有一些问题

我有一个全局函数**call** ()，它进行 ajax 调用并只返回 json 响应：

```
function call(request_url,params) {
    $.post(request_url,params,function(response) {
        return response;
    },'json');
} 
```

之后我有一个使用全局函数**call()的对象 GetServices**

```
 var GetServices = {
      service_url:"http://xxx.com/req.php",

      getCurrency:function() {
            var resp = call(this.service_url,{act:'getCurrency'});
            return resp;
      }
    } 
```

我希望**GetServices.getCurrency()**返回 ajax 响应，但它返回未定义。Javascript为其分配**未定义**的值，然后完成ajax调用。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:01:50.743

此模式不起作用，因为在`resp`设置变量时调用仍在执行，因此`resp`将始终为`null`.

另一种方法是将委托函数传递给`call`函数以在`$.post`成功时运行，或者将其更改`$.post`为同步`$.ajax`调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:03:10.630

它是一个异步调用......因此它将进行调用并恢复其处理。拨打电话后，您将在某处获得价值。这取决于各种因素。例如，您的服务器的响应时间。

最简单的方法是从您的成功处理程序调用目标函数（您想要将此 ajax 值传递给的函数）`$.post()`

例如

```
function call(request_url,params) {
    $.post(request_url,params,function(response) {
        yourTargetFunction(response); // instead of returning the value from this
    },'json');
} 
```

# java - Apache Http客户端编码UTF-8不起作用

> ID：12259119
> 
> 赞同：1
> 
> 时间：2012-09-04T07:59:17.967
> 
> 标签：java, servlets, encoding, utf-8, apache-httpclient-4.x

我有以下情况：

JSP -> Servlet -> ServiceAPI -> 服务 Servlet

我在 JSP 页面中输入了一些西里尔符号，这是场景的开始。在下一步，Servlet 中，我从 JSP 中以 UTF-8 格式读取数据。所以，太好了。一切都好。

然后我将数据传递给 ServiceAPI，后者将其发送给 Service Servlet。问题来了。Service Servlet 中的数据读取为'??????'。所以，我想问题出在服务 API 中，它没有正确发送数据。ServiceAPI 实现使用 Apache Http Client 将数据发送到 Service Servlet。

正如我在 Apache Http Client 文档 (http://hc.apache.org/httpclient-3.x/preference-api.html#HTTP_method_parameters) 中所读到的，有一种方法可以在请求中设置字符编码。但是由于以下错误，我无法应用它：“访问限制：由于对所需库的限制，无法访问 HttpParams 类型的方法 setParameter(String, Object) ...”。所以我有点卡住了。您是否知道问题是否真的出在 Apache Http Client 中，我该如何解决。

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-04T08:07:29.173

在 Web 应用程序中正确实现字符编码包括 4 个步骤

1.首先你必须配置你的网络服务器。

2.然后您必须强制您的网络应用程序对所有请求/响应使用 UTF-8 编码。

3.第三你必须使用JSP页面编码。

4.最后你必须使用 HMTL-meta 标签。

在您的情况下，问题很可能出在第 2 步 IMO

这是适合您的完美文章[如何让 UTF-8 在 Java webapps 中工作？](https://stackoverflow.com/questions/138948/how-to-get-utf-8-working-in-java-webapps)描述了如何广泛地做所有这些

# android - HTML5 无法在 Android 模拟器 4.0 上播放

> ID：12259120
> 
> 赞同：4
> 
> 时间：2012-09-04T07:59:19.963
> 
> 标签：android, html, html5-video

我尝试在Android emulator 0f 4.0版的html5页面中播放视频，我发现屏幕是黑色的（无法显示视频图片）并且音频播放正常。我在互联网上搜索了几个小时，仍然无法得到我想要的答案。有人可以告诉我原因或解决方案吗？顺便说一句，我很抱歉我的英语不好。代码如下：

```
<div id="CHPlayer">
  <video id="video" usemap="#Map" poster="./sources/1/t2.jpg" xmlsrc="./sources/1/t2.xml">
   <source src="./sources/1/t2.mp4" type="video/mp4">
  </video>
  <img id="insertBar" src="./sources/1/t2.jpg" usemap="#Map" />
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:26:21.643

您的视频是否符合 android 要求？看看：http: [//developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

还要检查初始网格下的编码要求。

如果它兼容，那么您可能还必须确保它不是模拟器。

# java - 支持 php 的 Jibble Web Server 的替代品？

> ID：12259123
> 
> 赞同：0
> 
> 时间：2012-09-04T07:59:26.887
> 
> 标签：java, php, webserver

在学校，我们不允许运行.exe（是的，我们有windows...天​​哪，为什么，你也不能保存DLL文件）所以当我需要一个FTP服务器时，我只需下载一个名为FTP-GO的Java FTP服务器。我们可以运行 jar 文件，但只能通过双击它们，所以我们不能提供任何参数。我现在想要的是一个 jar 文件中的 Web 服务器，它也支持 PHP 脚本，我的磁盘限制是 100mb，其中我使用的是 25mb（但我可以从 USB 记忆棒运行 jars）。所以如果有任何相当于[http://www.jibble.org/jibblewebserver.php](http://www.jibble.org/jibblewebserver.php)也支持 PHP，你会推荐哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:09:12.853

也许[Quercus](http://quercus.caucho.com/)或[Der Herberlin Bremsserver](http://tools.herberlin.de/bremsserver/index.shtml)。

# android - 具有 Eclipse 项目依赖项的 Android 应用

> ID：12259126
> 
> 赞同：0
> 
> 时间：2012-09-04T07:59:29.713
> 
> 标签：android, eclipse, buildpath

我有一个 Android 应用程序，它使用从另一个 Eclipse 项目生成的 jar 库。

但是可以直接引用这个项目而不是使用中间 jar 吗？

当我这样做时，构建成功但我在运行时收到 VerifyErrors 说找不到我的外部项目的类......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:03:11.470

是的，您可以通过将其设置为库来直接引用此项目。为此：

1.  右键单击所需的库项目，选择属性并标记复选框“isLibrary”
2.  然后只需右键单击您的项目，转到属性并添加那些库项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:01:41.877

是的，ADT 支持可共享源代码和资源形式的库，而不仅仅是 .jar。请参阅 Android 开发者网站，尤其是[管理项目 -> 库项目](http://developer.android.com/tools/projects/index.html#LibraryProjects)文章。

# javascript - 在 JavaScript 中覆盖或扩展闭包函数

> ID：12259137
> 
> 赞同：3
> 
> 时间：2012-09-04T08:00:16.053
> 
> 标签：javascript, closures, overriding

只是想知道覆盖闭包函数的行为。

例如，我如何覆盖下面代码段中的**baz()**函数？

> （功能（） {
> 
> ```
>  var foo = 'Hello';
>     var bar = 'World!'
> 
>     function baz(){
>         return foo + ' ' + bar;
>     } 
> ```
> 
> })();

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:01:57.500

如果您在闭包之外，则无法覆盖`baz()`闭包内的函数。闭包提供隐私并且适用于局部函数，就像它适用于局部变量一样。

如果你在闭包里面，你可以定义一个新版本的`baz()`inside 或者编辑里面的代码`baz()`。

相关问题：[我可以在 Javascript 中“扩展”闭包定义的“类”吗？](https://stackoverflow.com/questions/3561177/can-i-extend-a-closure-defined-class-in-javascript?rq=1)

# html - 如何使用 html5 拖放另一个拖放图像的副本？

> ID：12259144
> 
> 赞同：1
> 
> 时间：2012-09-04T08:00:56.137
> 
> 标签：html, drag-and-drop, draggable

[我使用http://robertnyman.com/html5/fileapi-upload/fileapi-upload.html](http://robertnyman.com/html5/fileapi-upload/fileapi-upload.html)中的示例实现了使用拖放进行上传的实现

这是它工作时的样子。

*   拖放前：[http ://cl.ly/image/0c3f1m0M2K2D](http://cl.ly/image/0c3f1m0M2K2D)
*   拖放后：[http ://cl.ly/image/0Z131N333n0L](http://cl.ly/image/0Z131N333n0L)

droparea 是一个 div，我称之为 dropArea。

现在问题出在我拖放的假定的 4 个图像中，然后我希望选择其中两个具有特殊状态。例如，我想通知服务器图像 1 和 3 是偷偷摸摸的。

我希望能够将已经在 div 元素中的图像 1 和 3 拖放到 2 个绘制的 div 中

[http://cl.ly/image/3T3O410X2E40](http://cl.ly/image/3T3O410X2E40)

我意识到到目前为止我无法做到这一点。

主要原因是我无法将 ondragstart 属性添加到在 dropArea div 中创建的图像中。

我可以添加可拖动属性。

所以在我拖放到 dropArea div 之后，我得到了这样的 html 代码。

我可以按照我想要的方式获得效果吗？

如果没有，是否有其他方法可以在不使用拖放的情况下实现相同的结果？也许右键单击拖放图像并选择它们作为潜行？

更新：我意识到我需要添加一个 id 属性，所以现在 dropArea 内另一个拖放图像的拖放效果有效。

但我想拖放***副本***而不是原始图像。因此，我仍然需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-05T09:55:03.450

我意识到这个问题已经超过 4 年了，但也许其他人也可能需要这些信息:)

因此，正如 shrishaster 在对 Kim Stacks 的评论中所问的那样：“我怎样才能为文本而不是图像做同样的事情？”

对此的修复是对 Kim Stacks 给出的 dropcopy 函数的一个小调整：

```
function dropcopy(ev)
{
ev.preventDefault();
var data=ev.dataTransfer.getData("Text");
var copyimg = document.createElement("p");
var original = document.getElementById(data);
copyimg.innerHTML = original.innerHTML;
ev.target.appendChild(copyimg);

} 
```

通过这样做，您可以克隆原始 paragraf 内容:)

我希望这至少会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:56:58.773

there are 2 parts to this answer

1.  Ensure that you assign an unique id attribute to the drag-n-dropped image
2.  Use the following javascript functions copied from [http://www.w3schools.com/html5/html5_draganddrop.asp](http://www.w3schools.com/html5/html5_draganddrop.asp) but include a new one called dropcopy

These are the functions from the w3schools example

```
function allowDrop(ev)
{
ev.preventDefault();
}

function drag(ev)
{
ev.dataTransfer.setData("Text",ev.target.id);
}

function drop(ev)
{
ev.preventDefault();
var data=ev.dataTransfer.getData("Text");
ev.target.appendChild(document.getElementById(data));
} 
```

This is the new one for dropcopy

```
 function dropcopy(ev)
                    {
                    ev.preventDefault();
                    var data=ev.dataTransfer.getData("Text");
                    var copyimg = document.createElement("img");
                    var original = document.getElementById(data);
                    copyimg.src = original.src;
                    ev.target.appendChild(copyimg);

                    } 
```

Then for the div that requires a copy just make sure you use the dropcopy for the ondrop attribute

```
<div id="div2" class="sneaks" ondrop="dropcopy(event)"
                ondragover="allowDrop(event)"></div> 
```

# javascript - null 作为上下文传递给函数调用

> ID：12259147
> 
> 赞同：6
> 
> 时间：2012-09-04T08:01:07.950
> 
> 标签：javascript

请解释这里使用了什么 hack（我可以看到 null 作为上下文传递给返回其上下文属性的函数。所以我无法清楚地理解这里实际发生了什么。

```
function getGlobal(){   
  return (function(){   
    return this.dust;   
      }).call(null);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T08:09:16.167

将上下文设置为 null 将`this`指向全局对象。因此提供的代码将充当访问`dust`全局对象的属性。

根据 ECMA 262 v5 规范 10.4.3 输入功能码

```
if thisArg is null or undefined, set the ThisBinding to the global object. 
```

见[http://es5.github.com/#x10.4.3](http://es5.github.com/#x10.4.3)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T08:07:11.143

诀窍是使用这样一个事实，即如果您没有函数的接收者，`window`（实际上是执行脚本的全局对象，因此得名）。

所以这个技巧可以绕过`dust`在最近的嵌入上下文中定义的属性 ()，并使用在全局对象中定义的属性。

# sql-server-2008 - 分组 Sql 表

> ID：12259149
> 
> 赞同：0
> 
> 时间：2012-09-04T08:01:13.983
> 
> 标签：sql-server-2008, group-by

我已经加入了三个表..但是我必须显示它们的方式对我来说有点难以理解。我试图将它们分组并没有得到预期的结果。

```
Sports_Name

Id |  Name
---------
1     Football
2     Cricket
3     Hockey   
4     Tenis

Teams

Id  |  Sport_Id | Team_Name
----------------------------
101      1         Manchester United
103      2         Australia
104      2         India
109      1         Real Madrid
110      3         New Zeland

Player_Name

Id  |  Team_Id |  Player_Name
------------------------------
1       101         Rooney
2       104         Tendulkar
3       103         Ponting
4       109         Ronaldo
5       101         Van Persie
6       110         Simond 
```

我需要以以下方式显示此信息..

```
**Football**    
Manchester United -Rooney
Manchester United -Van Persie
Real Madrid -Ronaldo

**Cricket**
India-Tendulkar
Australia-Ponting

**Hockey**
New Zeland -Simond

and something similar for tenis 
```

详情请看这张图片

![在此处输入图像描述](../Images/63e4d7e98e930d54fb138eaf7ce5a21c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:07:32.047

这是你想要的吗？

```
SELECT sports_name.name, teams.team_name, player_name.player_name  FROM player_name
JOIN 
  teams ON
player_name.team_ID = teams.ID
JOIN 
  sports_name on
sports_name.id = teams.sport_id
order by sports_name.name, team_name 
```

这会按顺序获取所有数据，然后您只需要使用您的表示层来使用 sports.name 作为组头。

这产生

name team_name player_name
Cricket Australia Ponting
Cricket India Tendulkar
Football Man u Rooney
Football Man u RVP
Football Real Madrid Ronaldo
Hockey NZ Simond

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:07:41.070

尝试这个：

```
SELECT  T.TEAM_NAME+' - '+ P.PLAYER_NAME as 'FOOTBALL'
FROM    TEAMS T JOIN PLAYER_NAME P
ON      T.ID=P.TEAM_ID
JOIN    SPORTS_NAME S
ON      T.SPORT_ID=S.ID
WHERE   S.NAME='FOOTBALL' 
```

将 where 子句更改为 'Cricket','Hockey' 以获得其他结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:08:09.520

基本查询类似于：

```
SELECT      s.Name, t.Name, p.Player_Name
FROM        Player_Name     p
INNER JOIN  Teams       t
ON      t.Id = p.Team_id
INNER JOIN  Sports_Name s
ON      s.Id = t.Sport_Id 
```

然后，如果您想像描述的那样显示结果，我的猜测是使用[cursor](http://msdn.microsoft.com/fr-fr/library/ms180169.aspx)。使用[参数化过程](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/ad/c0011919.htm)将`WHERE`子句添加到查询中，以便按运动名称过滤结果。

# c - 跟踪并保存代码流

> ID：12259160
> 
> 赞同：-2
> 
> 时间：2012-09-04T08:02:08.600
> 
> 标签：c, trace, kvm

我想知道是否有任何方法可以编译程序（我自己的程序或开源程序），当我执行该程序时，我可以使用它来跟踪该程序的流程。理想情况下，我想输出程序执行时所经过的具体方法。每次它调用一个特定的方法时，我想输出它已经这样做了，我想把它保存到一个文件中以供以后分析。

例如，我试图更好地理解 KVM（一种开源虚拟机管理程序）中的流程，但显然有很多行代码，除非我花几周的时间来找出代码，否则我不可能知道代码的去向。

我正在查看的代码主要是用 C 编写的，但也使用其他语言。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:12:26.883

KVM 是 Linux 内核的子系统，因此您应该使用 ftrace (http://lwn.net/Articles/322666/) 来跟踪内核空间代码。

# php - PHP：开始while语句，但只显示它的一部分，而不为每个mysql行重复

> ID：12259161
> 
> 赞同：-2
> 
> 时间：2012-09-04T08:02:12.797
> 
> 标签：php, mysql, loops, while-loop

我不确定要搜索什么才能找到我的确切结果。我正在尝试创建一个从数据库中检索数据的系统（没问题，这行得通）。但我想组织和最小化页面每个部分的代码量。我正在通过 MySQL 查询检索代码。然后我设置`$count = "0"`. 然后我开始我的while语句`$section = mysql_fetch_array($query) { $count++ ...`

这是棘手的部分：我想做两个`if ($count > 0)`陈述。首先，我想说的是 IF `$count > 0`、 echo table 和 table 列的标题。我不希望这在 while 语句中重复。我希望它只出现一次。基本上，从循环中排除它，但仍然在 while 语句中，因为如果可能的话，我不想要两个 while 语句。

然后第二个`if $count > 0`将开始回显每一行结果。

不确定我是否只是愚蠢而这是不可能的。这是我一直想知道的事情。我希望你明白我在寻找什么，并且没有浪费你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:12:29.373

```
 if (mysql_num_rows($result) > 0) {
     // print headers
     while ( $row = mysql_fetch_row($result)) {
           // display row
     }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:08:17.850

您可以做的是更改您的查询，以便它也使用包含的 Count() 函数检索返回的行数。

然后，在 while 循环开始之前，您从结果集中检索此值，如果它 > 0，则打印表头并进入循环。

希望这可以帮助。

# android - 单击后退按钮时，我想使用 Phone Gap 在 android 中提供一个警报框

> ID：12259162
> 
> 赞同：0
> 
> 时间：2012-09-04T08:02:18.263
> 
> 标签：android, html, cordova

![这个警报时间应该显示](../Images/aa837b2c8ce9fd814e66d17d88b6ee91.png)

从安卓手机点击后退按钮

```
function load() { document.addEventListener("backbutton", backKeyDown, false);function backKeyDown() {console.log("PhoneGap Ready!");}} 
```

我已经完成了这段代码但仍然无法正常工作只有后退按钮不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:49:52.823

确保您正在等待“deviceready”事件：

```
function load() {
    document.addEventListener("deviceready", onDevReady, false);
}

function onDevReady() { 
    document.addEventListener("backbutton", backKeyDown, false);
}

function backKeyDown() {
   console.log("PhoneGap Ready!");
} 
```

# php - facebook粉丝页面用户数据提取php

> ID：12259164
> 
> 赞同：2
> 
> 时间：2012-09-04T08:02:23.570
> 
> 标签：php, facebook, facebook-fql, facebook-page

要提取特定 facebook 粉丝页面的用户列表，请使用以下代码

```
$text = file_get_contents('rawnike.php');
 //  $text = file_get_contents('http://www.facebook.com/plugins/fan.php?connections=10000&id=15087023444');

   $text = preg_replace("/<script[^>]+\>/i", "", $text);
   $text = preg_replace("/<img[^>]+\>/i", "", $text);

$pattern = '!(https?://[^\s]+)!'; // refine this for better/more specific results

if (preg_match_all($pattern, $text, $matches)) {
    list(, $links) = ($matches);
    //print_r($links); 
    //var_dump($links);
}

unset($links[0]);unset($links[1]);unset($links[2]);unset($links[3]);unset($links[4]);unset($links[5]);unset($links[6]);unset($links[7]);
 //var_dump($links);
 $links=str_replace('https','http',$links); $links=str_replace('\"','',$links);
foreach ($links as $value) {
    echo "fb user ID: $value<br />\n";
} 
```

至此，我成功地使用`file_get_contents('rawnike.php')`（本地保存的rawnike.php）检索用户的个人资料链接

但是如果我尝试从 url 中提取相同的内容，`file_get_contents("http://www.facebook.com/plugins/fan.php?connections=10000&id=15087023444")`
则无法检索，这意味着我无法直接提取 facebook 页面的源！我应该手动保存页面的源代码！

如果我在本地手动存储页面的源代码并解析它，我在解析用户页面时观察到的相同，能够提取用户的兴趣。另一方面，如果我直接尝试使用 URL 提取源代码，它不会获得相同的源代码。

这意味着`$source=file_get_contents($url); $source="content which displays ur browser doesnt supported or some crap"` 另一方面`$source=file_get_contents($string_to_extract_content_of_local_saved_sourceFile); $source="content which i excatly needed to parse"`

在做很少的研究时，我明白这`FQL`是做这样的事情的正确方法。但是请帮助我理解为什么提取的源代码存在差异，这是`FQL`我可以继续进行的唯一方法或其他方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:42:58.723

> 但是请帮助我理解为什么提取的源代码存在差异

因为 Facebook 通过查看您的 HTTP 请求的详细信息（例如`User Agent`标头等）意识到，它不是发出请求的真实人使用的*真实*浏览器，因此他们试图阻止您访问数据。

*可以*尝试通过提供请求详细信息来解决此问题，使其看起来更像一个“真正的”浏览器——但抓取 HTML 页面以获取所需信息通常不是可行的方法，因为——</p >

> 并且 FQL 是唯一的方法还是我可以继续进行的其他方式。

– 这就是 API 的用途。FQL/Graph API 是 Facebook 为您提供访问其数据的方法。

如果有你感兴趣的数据，这些数据不是那些提供的——那么 Facebook 并不是真的想给你这些数据。喜欢页面的人的数据就是这样的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T02:04:52.793

```
<?php
    $curl = curl_init("https://www.facebook.com/plugins/fan.php?connections=10000&id=15087023444");
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($curl, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1");
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);
    $data = curl_exec($curl);
    curl_close($curl);

    $data = preg_replace("%(.*?)(<div id.*?>)%is","",$data); //to strip <scripts>,<links>,<meta>,etc tags. 
```

但最大连接数为 100。:S

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T10:57:29.027

连接参数的数量不能超过 100，您正在尝试使用 1000。

# jquery - JQuery UI 自动完成多个单词并与远程数据源匹配

> ID：12259165
> 
> 赞同：0
> 
> 时间：2012-09-04T08:02:30.150
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我找到了一些示例来显示如何突出显示多个匹配项，例如，如果我输入“艺术设计”，我希望它突出显示为“**艺术**和**设计**学位”

以下示例（尽管使用静态数组）是我所追求的：http: [//jsfiddle.net/Q4jy9/1/](http://jsfiddle.net/Q4jy9/1/)

但是，我不知道如何使它适用于远程 php 数据源。下面是我正在使用的当前代码。每个按键都会将术语发送到我的 php 并从数据库中选择匹配项。

有没有办法可以更改下面的脚本以允许突出显示多个单词/匹配项，或者更改上面链接中的脚本以使用外部数据源？

```
var termTemplate = "<span class='ui-autocomplete-term'>%s</span>";
$("#f input").autocomplete({
   source: "livesearch.php",
   open: function(e, ui) {
      var origKeyword = $("#f input").val();
      var acData = $(this).data('autocomplete');
      acData.menu.element.find('a').each(function() {
         var me = $(this);
         var regex = new RegExp(acData.term, "gi");
         me.html(me.text().replace(regex, function(matched) {
            return termTemplate.replace('%s', matched);
         }));
      });

   },
   select: function(event, ui) {
      var keyword = $("#f input").val();
      $("#f input").val('');
      window.location.href = 'MYURLHERE?VARIABLE=' + ui.item.value;
      return false;
   },
   focus: function(event, ui) {
      return false;
   }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T15:31:33.087

尝试这样的事情（匹配功能是从你的 jsfiddle 复制和粘贴的）：

```
$("#f input").autocomplete({
    source: function(request, response) {
        $.getJSON("livesearch.php", request, function(data, status, xhr ) {

            var matchArry   = availableTags.slice ();
            var srchTerms   = $.trim (requestObj.term).split (/\s+/);

            $.each (srchTerms, function (J, term) {
                var regX  = new RegExp (term, "i");
                matchArry = $.map (matchArry, function (item) {
                    return regX.test (item)  ?  item  : null;
                });
            });

            response(matchArray);
        });
    },

    ...

}); 
```

这是基于 jquery UI 示例：http: [//jqueryui.com/demos/autocomplete/#remote-with-cache](http://jqueryui.com/demos/autocomplete/#remote-with-cache)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:32:37.627

在 tborychowski 的帮助下，我认为我们有一个可行的解决方案 :)

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<script type='text/javascript' src='http://code.jquery.com/jquery-1.6.2.js'></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.js"></script>

<style type='text/css'>
   .srchHilite {background-color: yellow;}
</style>

<script type='text/javascript'>
$(document).ready(function(){

var termTemplate = "<span class='ui-autocomplete-term'>%s</span>";
$("#tags").autocomplete({
 source: function(request, response) {
        $.getJSON("livesearch.php", request, function(data, status, xhr ) {

            var newmatchArry = new Array();
            var matchArry   = data.slice ();
            var srchTerms   = $.trim (request.term).split (/\s+/);

                //--- For each search term, remove non-matches.
                $.each (srchTerms, function (J, term) {
                    var regX    = new RegExp (term.value, "i");
                    matchArry   = $.map (matchArry, function (item) {
                        return regX.test (item)  ?  item  : null;
                    } );
                } );

            response(matchArry);

        });
    },

  open:   function (event, ui) {
                /*--- This function provides no hooks to the results list, so we have to trust the
                    selector, for now.
                */
                var resultsList = $("ul.ui-autocomplete > li.ui-menu-item > a");
                var srchTerm    = $.trim ( $("#tags").val () ).split (/\s+/).join ('|');

                //--- Loop through the results list and highlight the terms.
                resultsList.each ( function () {
                    var jThis   = $(this);
                    var regX    = new RegExp ('(' + srchTerm + ')', "ig");
                    var oldTxt  = jThis.text ();

                    jThis.html (oldTxt.replace (regX, '<span class="srchHilite">$1</span>') );
                } );
            }
} );

});
</script>
</head>

<body>
<input id="tags">

</div>
</body>

</html> 
```

# mysql - 从表中获取唯一的类别/子类别对

> ID：12259166
> 
> 赞同：0
> 
> 时间：2012-09-04T08:02:31.930
> 
> 标签：mysql, distinct

我正在尝试从表中检索一组独特的类别/子类别关系，并且我想确保我做对了，所以我得到了所有数据。

例如我想要下面的..

```
Animals -> Dogs
Animals -> Cats
Animals -> Reptiles
Cars -> Ford
Cars -> Toyota
Cars -> BMW 
```

我不希望列出任何重复的子类别，但是如果它们在另一个类别中，则需要重复，例如..

```
Animals -> Dogs
Animals -> Cats
Animals -> Reptiles
Animals -> *General*
Cars -> Ford
Cars -> Toyota
Cars -> BMW
Cars -> *General* 
```

我有下面的代码，它*似乎*运行良好，但只是想检查它是否是正确的方法。

```
SELECT DISTINCT(category),subcategory FROM aall ORDER BY category ASC, subcategory ASC; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:08:02.493

是的，这将返回一个不同的列表`category, subcategory` 但是，您需要知道一件重要的事情：

DISTINCT 不是函数！`DISTINCT(category)`并没有真正在一个列上做一个不同的，就像它可能从语法中出现的那样。正确的写法是：

```
SELECT DISTINCT category ,subcategory ...; 
```

DISTINCT 是适用于您选择的*所有列的修饰符。*你不能说有些应该是不同的，但不是其他的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:16:41.373

```
SELECT `category`, `subcategory` 
FROM `aall` 
GROUP BY `category`, `subcategory` 
ORDER BY `category`, `subcategory` 
```

# grails - Grails JR 报告呈现为 HTML

> ID：12259172
> 
> 赞同：3
> 
> 时间：2012-09-04T08:02:50.520
> 
> 标签：grails, jasper-reports, jasper-plugin

我正在使用*JasperReports*插件来生成复杂的报告。它适用于*pdf*文件，但要求是在下载 pdf 之前以 html 格式显示准确的 pdf 报告预览。

我只是想使用`"inline=true" "_format=html"`. 当它渲染 html 时，PDF 和 HTML 有很大的不同。

*html*格式的报告如下所示：

![在此处输入图像描述](../Images/23e44f570eabe0819afd9093caee748d.png)

并以*pdf*格式：

![在此处输入图像描述](../Images/79d7655d64765ec89161b49f247d360a.png)

您能否建议我如何在*html中显示确切的**pdf*版本？

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:02:22.603

您可以在控制器中使用以下行：

```
params.IS_USING_IMAGES_TO_ALIGN = false 
```*

# hl7 - HL7 确认 - 我可以在确认消息中有多个 ERR 段吗？

> ID：12259178
> 
> 赞同：1
> 
> 时间：2012-09-04T08:03:11.503
> 
> 标签：hl7, hl7-v2

我正在自己编写 HL7 确认机制。

从我遵循的在线文档中，他们指出 Hl7 确认消息具有以下部分

```
MSH
MSA
ERR [ optional ] 
```

我想知道 - 如果 HL7 文件中存在多个错误，我可以放置多个 ERR 段来描述每个错误吗？这有什么标准吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T20:56:21.403

这取决于。

从 HL7 v2.5 开始，您可以将每个错误放入其自己的 ERR 段中，填充字段 ERR-2-x（参见标准的 ch 2.15.5） 在 2.5 之前，您将有一个 ERR 段并将每个错误描述为它自己重复（可重复）字段 ERR-1。

# php - 如何防止symfony中的表单保存？

> ID：12259179
> 
> 赞同：0
> 
> 时间：2012-09-04T08:03:17.477
> 
> 标签：php, symfony1, symfony-1.4, symfony-forms

我有一个基于名为“因子”的模型类的通用形式。在该表单中，有一个名为“customer”的嵌入式表单，它基于名为“customer”的模型类。

这是我的 schema.yml 的相关部分：

```
factor:
  actAs:
    Timestampable: ~
  columns:
    customer_id: {type: bigint}
    final_sum: {type: Integer}
  relations:
    customer: {local:customer_id, foreign:id, alias: customer, foreignAlias:factors}

customer:
  columns:
    name: {type: string(255), notnull:true, unique:true} 
```

当用户提交通用表单时，我检查客户表中是否存在 customer_name，如果存在，我希望不保存嵌入的表单“客户”，因为它会导致列唯一性错误！相反，我应该将因素 customer_id 设置为数据库中已经存在的客户 ID。我该如何管理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:22:51.537

我认为您的 Web 应用程序的逻辑存在问题.. 在我看来，问题在于您没有一个**好的做法**。世界上有**同名同姓**的人，遇到这种情况你会怎么做？或者，如果买家输入了**错误的一个字母**？**或者如果一个坏人输入了别人的名字和姓氏**。如果你做了一个唯一的用户名字段，那么我认为如果你注册会很好，这样你就可以避免这个问题，你只需在隐藏字段中以因子形式设置 user_id。有一个很棒的插件可以代替你做所有事情[**sfForkedDoctrineApplyPlugin**](http://www.symfony-project.org/plugins/sfForkedDoctrineApplyPlugin)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:01:28.457

我建议您不要使用嵌入式表单。取而代之的是，使用没有 customer_id 的简单因子表单（使用 unset 或 useFields）和简单的客户表单。在 actions.class.php 中是这样的：

```
$this->factorForm = new SimpleFactorForm; // (without customer_id)
$this->customerForm = new CustomerForm; // 

if($request->getMethod() == sfRequest::POST) {
  $this->factorForm->bind($request->getPostParameter($this->factorForm->getName());
  $this->customerForm->bind($request->getPostParameter($this->customerForm->getName());

  if(($this->customerForm->isValid()) && ($this->factorForm->isValid()) ) {
    // customer unique validation -- create or find a uniqueCustomerObject
    // something like
    $uniqueCustomerObject = Doctrine::getTable('customer')->findOneBy('name',$this->customerForm->getValue('name'));
    if(!$uniqueCustomerObject) $uniqueCustomerObject=$this->customerForm->save();

    $this->factorForm->getObject()->setCustomer($uniqueCustomerObject);
    $factor = $this->factorForm->save();
  }
} 
```

当然，在您的模板中：

```
<form method="post">
 <?php echo $factorForm; ?>
 <?php echo $customerForm; ?>

</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:56:14.653

谢谢denys281和glerendegui :)

问题很简单，可以通过轻松取消设置嵌入式客户表单和更新因子表单对象来解决。

我在 actions.class.php 文件的 processForm 函数中添加了以下几行：

```
$pFactor=$form->getObject();

$customer=Doctrine_Query::create()->from('customer c')->where('c.name=?',$form['customer']['name']->getValue())->execute();

if(!empty($cus[0]))
{
    $pFactor->setCustomer($cus[0]);
    unset($form['customer']);
}

$form->save(); 
```

# c++ - 为什么 lnk 图标不能正确显示？

> ID：12259183
> 
> 赞同：0
> 
> 时间：2012-09-04T08:03:41.207
> 
> 标签：c++, api, shell, com

我尝试使用 IShellLink 和 IPersistFIle 接口创建一个新的快捷链接文件。在我通过调用 IPersistFIle::save() 完成保存 lnk 文件后，我想在 save 函数返回后立即删除用于创建 lnk 的 ico 文件。但问题是 lnk 文件显示在空白页中，而不是我使用的图标。
如果我在保存后不调用 deletefile()，则 lnk 文件看起来是正确的。
我的问题是保存lnk文件后什么时候可以删除图标文件？
PS：我试着在删除文件前 2 秒睡觉，而且 lnk 看起来也正确。
我的部分代码如下：

```
 hRes = pShellLink->QueryInterface(IID_IPersistFile,(LPVOID*)&pPerFile);

    if (SUCCEEDED(hRes))
    {
        WCHAR wszLinkFile[MAX_PATH + 1] = {0};
    #ifdef _UNICODE
        StringCchCopy(wszLinkFile, sizeof(wszLinkFile) / sizeof(wszLinkFile[0]), lpszLinkFilePath);
    #else
        MultiByteToWideChar(CP_ACP, 0, lpszLinkFilePath, -1, wszLinkFile, MAX_PATH);
    #endif

        hRes = pPerFile->Save(wszLinkFile, TRUE);
        pPerFile->Release();
    }
    pShellLink->Release(); 

    ::CoUninitialize();

    DeleteFile(lpszIconPath); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T02:16:08.633

您没有发布足够的代码，但方法名称是 IShellLink::SetIconLocation()。

> **地点**

您删除该图标，该位置不再有效。

Boilerplate 是使用嵌入在可执行文件中的图标作为资源。但是，如果您使用单独的 .ico 文件，则需要保持其有效。

# configuration - 如何恢复到 OpenWrt 路由器配置？

> ID：12259185
> 
> 赞同：21
> 
> 时间：2012-09-04T08:03:47.773
> 
> 标签：configuration, reset, openwrt

我最近将 Luci 移植到了 OpenWrt 路由器。我只是在探索这件事。我禁用了 LAN 上的 DHCP 服务器并启用为 DHCP 客户端。我保存并将配置应用到路由器。现在重新启动后，我无法连接路由器网页。

如何再次启用 DHCP 服务器，或者谁能告诉我如何将此 OpenWrt 路由器重置为默认设置？

我在串口控制台中试过。但我看不到任何接口的任何 IP 地址。之前是 192.168.1.1。

请建议...

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-12-05T22:01:42.530

那些面临这个问题的人：不要惊慌。

**简短的回答**：

重启你的路由器，这个问题就解决了。（但如果您的重启按钮不起作用，您需要执行九个步骤来进行重启。点击重启按钮只是其中之一。）

**长答案**：让我们学习如何重新启动路由器。

1.  设置 PC 的 IP 地址：192.168.1.2 和子网掩码 255.255.255.0 和网关 192.168.1.1
2.  关闭路由器电源
3.  断开 WAN 电缆
4.  仅将您的 PC 以太网电缆连接到 ETH0
5.  打开路由器电源
6.  等待路由器启动引导序列（SYS LED 开始闪烁）
7.  当 SYS LED 闪烁时，点击重启按钮（SYS LED 将以更快的速度闪烁意味着您的路由器处于故障安全模式）。（您必须在路由器启动前按下按钮。）
8.  `telnet 192.168.1.1`
9.  运行这些命令：

    ```
    mount_root ## this remounts your partitions from read-only to read/write mode

    firstboot  ## This will reset your router after reboot

    reboot -f ## And force reboot 
    ```

10.  使用网络浏览器登录网络界面。

链接以查看官方故障安全模式。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-02-21T13:27:11.683

对先前评论的一些补充：在您运行“mount_root”命令之前，“firstboot”将不可用。

所以这里是对需要做的事情的完整回顾。我在 Windows 8.1 上所做的所有操作。

*   进入故障安全模式（在启动时按住重置按钮几秒钟）
*   为您的 PC 分配一个静态 IP 地址 192.168.1.2。命令示例：`netsh interface ip set address name="Ethernet" static 192.168.1.2 255.255.255.0 192.168.1.1`
*   从 telnet 连接到地址 192.168.1.1 （我使用[PuTTY](http://en.wikipedia.org/wiki/PuTTY)）并且不需要登录名/密码）。
*   运行“mount_root”（否则“firstboot”将不可用）。
*   运行“firstboot”进行重置。
*   运行“rebo​​ot -f”重新启动。

现在您可以从浏览器进入路由器控制台。也不要忘记将您的 PC 从静态返回到 DHCP 地址分配。例子：`netsh interface ip set address name="Ethernet" source=dhcp`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-30T11:06:46.243

您可以运行以下命令进行出厂重置：

```
killall dropbear uhttpd; sleep 1; mtd -r erase rootfs_data 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-12T00:32:29.167

如果您安装了 SquashFS 映像，则可以运行该脚本`firstboot`。这将使 OpenWrt 恢复到您刷新路由器时的默认设置。

通过您的串行访问，只需运行 firstboot，然后重启设备。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-14T08:34:19.717

If you enabled it as a DHCP client then your router should get an IP address from a DHCP server. If you connect your router on a net with a DHCP server you should reach your router's administrator page on the IP address assigned by the DHCP.

# php - 如何使用 Cronjob PHP 脚本同步两个 MySQL 数据库？

> ID：12259187
> 
> 赞同：4
> 
> 时间：2012-09-04T08:04:04.167
> 
> 标签：php, mysql, database, cron, sync

我正在为客户开发一个带有 MySQL 数据库的网上商店。该客户已经使用 MySQL 数据库进行发票管理网站。

现在我想编写一个由 cronjob 触发的 php 脚本来同步发票、客户和产品记录。

*订单记录：*

```
id | clientId | status | shipping | reduction 
```

*order_items 记录：*

```
id | productId | price |amount | orderId 
```

*客户记录：*

```
id | fname | name | email | ... 
```

请注意，仅`status = 2`应同步订单记录，同步后，状态应更改为`3`。

两个数据库都对订单和发票使用不同的表

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:25:01.780

**您可以查看一些为您执行此操作的 phpclasses [http://www.phpclasses.org/search.html?words=mysql+sync&x=0&y=0&go_search=1](http://www.phpclasses.org/search.html?words=mysql+sync&x=0&y=0&go_search=1)

来源：-[我如何用 PHP 同步两个数据库表？](https://stackoverflow.com/questions/626192/how-can-i-synchronize-two-database-tables-with-php)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:19:02.807

数据库是否在单独的 MySQL 实例上运行？

如果是这样...

> 做这个的最好方式是什么？

在两个系统上使用相同的数据库结构，并使用 mysql 的异步复制。

如果做不到这一点，请使用联合引擎从一个实例访问另一个实例的表，然后按照以下相同实例的过程进行操作。

如果在同一个 MySQL 实例上......

确保在要同步的每个源表上都有索引更新时间戳，并复制符合复制条件且自上次捕获以来已修改的记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:09:49.660

1）选择记录
2）循环记录
3）启动事务（可选）
4）在 db2 中插入记录
5）在 db1 中更新记录
6）提交

# css - div内部的CSS边框

> ID：12259193
> 
> 赞同：-1
> 
> 时间：2012-09-04T08:04:27.217
> 
> 标签：css, html

如何为内部 div 应用右边框？

```
.outerDiv{width:100%;} 
.leftDiv{float:left;width:10%;}
.centerDiv{float:left;width:80%;}
.rightDiv{float:left;width:10%;}
.divContent{float:left}

 <div class="outerDiv"> 
     <div class="leftDiv">First</div> 
     <div class="centerDiv">
          <div class="divContent">inside1</div> 
          <div class="divContent">inside1</div> 
          <div class="divContent">inside1</div> 
     </div> 
     <div class="rightDiv">Third</div> 
 </div> 
```

输出：

```
---------------------------
first|inside1      | third|
     |inside2      |      | 
     |inside3             |
--------------------------- 
```

内容（第二列）边框未正确对齐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:18:22.540

我不太明白你的问题，但我发现你的代码有一些缺陷。

首先，您似乎希望在 1,2 和 3 内垂直排列，而不是水平排列。只需`float`为此删除。即使您谈论边框，也不会在 CSS 中显示任何边框。

从这个小提琴开始。如果这不能满足您的要求，请澄清您的问题：

[http://jsfiddle.net/zCpXM/1/](http://jsfiddle.net/zCpXM/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:18:37.853

你有不同的选择：

当您知道您的 maincontent 始终具有最大高度时，只需在其上声明border-left 和border-right：http: [//jsfiddle.net/NSgxH/](http://jsfiddle.net/NSgxH/)这样边框将始终位于底部。

如果你不能做出这个假设，你可以使用显示表来解决这个问题：http: [//jsfiddle.net/NSgxH/3/](http://jsfiddle.net/NSgxH/3/)但是这会导致旧版 IE 出现问题。

还有其他几种技术可以实现相同的结果，包括固定高度、负边距技巧等，但我想说以上是最干净的解决方案。

# jquery - 再次使用 jQuery 选择焦点文本

> ID：12259198
> 
> 赞同：0
> 
> 时间：2012-09-04T08:04:52.033
> 
> 标签：jquery, iphone, ipad, select, focus

寻找适用于包括 iPad/iPhone 在内的所有浏览器的解决方案。我已经查看了这个问题的过去发布，并且如下一个工作正常，除了它不适用于 IE：

```
$("input[type='text'], textarea, input[type='password'], input[type='number']").live('mouseup', function(e) {
    e.preventDefault();
});

$("input[type='text'], textarea, input[type='password'], input[type='number']").live('focus', function() {
    this.setSelectionRange(0, 9999);
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T15:07:39.523

以下代码对我来说效果很好：

```
$("input[type=text]").live('click', function() {
    $(this).select();
    this.setSelectionRange(0, 9999);
}); 
```

然而，这虽然最简单的解决方案有一个缺点，即在使用键盘导航时它不会预先选择文本字段。可以在以下位置找到此特定问题的替代方法：[寻找 Chrome select on focus bug 的更好解决方法](https://stackoverflow.com/questions/3380458/looking-for-a-better-workaround-to-chrome-select-on-focus-bug)

注意：此答案来自原始问题的评论 4。

# c# - 检查电话是否正在通话（WP7）

> ID：12259202
> 
> 赞同：0
> 
> 时间：2012-09-04T08:05:39.993
> 
> 标签：c#, windows-phone-7, phone-call

在windows phone 7中......有没有办法像在android中一样检查手机现在是否忙于通话

如果是，那么服务于这个的名称空间是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:19:56.503

正如其他人所评论的那样，Windows Phone SDK 中目前没有 API 来检测呼叫是否正在进行中。

Tim Askins 写了一篇相当[详细的帖子](http://blogs.interknowlogy.com/2012/03/14/responding-to-incoming-phone-calls-on-wp7/)，说明他试图解决这个问题，但最终它是不可能的。

# sql - 多行中的数据为单行（值不标准）

> ID：12259207
> 
> 赞同：2
> 
> 时间：2012-09-04T08:06:09.640
> 
> 标签：sql, sql-server-2008, tsql, pivot

这是我的问题：

我有一张包含姓名和地址的表格，例如

```
Name  |  Address       | Updated
----------------------------------
a     |  12 lane       | 1/1/2011
b     |  34 avenue     | 1/1/2011
c     |  56 district   | 1/1/2011
a     |  78 avenue     | 8/8/2011
b     |  90 lane       | 8/8/2011
a     |  83 district   | 9/9/2011
a     |  39 road       | 10/10/2011 
```

如您所见，人们可能有多个地址。假设一个人拥有的最大地址数是 5。

我只对为每个人获取最新的 3 个地址感兴趣，这样表格看起来像：

```
Name  |  Address_1      |   Address_2       |  Address_3
--------------------------------------------------------------
a     | 78 avenue       |   83 district     | 39 road
b     | 34 avenue       |   90 lane         | NULL
c     | 56 district     |   NULL            | NULL 
```

注意 a 的第一个条目“12 lane”没有出现

我一直在阅读stackoverflow上显示的其他示例，但我不确定数据透视表是否适合我的需要，因为地址都不同

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T08:17:04.383

你可以转动它。关键是按更新的降序将 row_numbers 分配给地址。这会产生列名 1、2 和 3（以及 4、5 - 但这些将被 pivot 命令忽略）。

[这是带有示例的 Sql Fiddle](http://sqlfiddle.com/#!3/e65ad/8)。

```
select name, 
       [1] Address_1,
       [2] Address_2,
       [3] Address_3
from
(
  select name,
         address,
         row_number() over (partition by name
                            order by updated desc) rn
    from table1
) o
pivot (min(address) for rn in ([1], [2], [3])) p 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:19:23.013

这是一个简单的查询，使用`ROW_NUMBER()`

由于您只需要三个地址列，这可能是合适的。该解决方案不适用于非固定数量的列。

```
;with testdata(Name, Address, Updated)
as
(
select 'a','12 lane',convert(datetime, '1/1/2011')
union all
select 'b','34 avenue',convert(datetime, '1/1/2011')
union all
select 'c','56 district',convert(datetime, '1/1/2011')
union all
select 'a','78 avenue',convert(datetime, '8/8/2011')
union all
select 'b','90 lane',convert(datetime, '8/8/2011')
union all
select 'a','83 district',convert(datetime, '9/9/2011')
union all
select 'a','39 road',convert(datetime, '10/10/2011')
)
,tmp
as
(
select  * 
        ,row_number() over(PARTITION by Name order by Updated desc) as rn
from testdata
)
select  x.Name
        ,x.Address
        ,y.Address
        ,z.Address
from    tmp x
left join   tmp y
    on  x.Name = y.Name
    and y.rn = 2
left join   tmp z
    on  x.Name = z.Name
    and z.rn = 3
where x.rn = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:36:50.933

您可以考虑使用两个查询：

*   第一个使用 DISTINCT 键来获取唯一的“名称”。

*   第二个，在唯一名称的循环中，使用 TOP 子句（在您的情况下为 TOP 3）和“ORDER BY Updated DESC”规范为每个名称获取 3 个最近的地址。

*   当然，可以使用合适的 JOIN 组合查询。

# javascript - 输入 forEach 时变量重置（javascript）

> ID：12259212
> 
> 赞同：2
> 
> 时间：2012-09-04T08:06:18.320
> 
> 标签：javascript, jquery, undefined

我的代码有问题，因为在输入以下 forEach 时“this.items”变量变为未定义。如您所见，console.log 显示 this.items 如果在 forEach 中重新定义

为什么？

仅供参考，我正在使用 jQuery 1.8 和 Classy（jQuery 的类管理器）

```
extractParams : function(params){

    if(params != ""){
        this.items = {};
        params = params.split("&");
        console.log(this.items);

        params.forEach( function(dts){
        console.log(this.items); // = undefined         
            this.keyval = dts.split("=");
            console.log(this.items);

            switch(keyval[0]){
                case "v" : 
                    this.items["Version number"] = this.keyval[1];
                    params = params.filter(function(v) { return !(v === "v=" + this.keyval[1] );});
                    break;
                case "t1" :
                    console.log(this.item);
                    this.items["Event Type"] = this.keyval[1];
                    params = params.filter(function(v) { return !(v === "t1=" + this.keyval[1] );});
                    break;
                default :
                case "" :
                    break;
            }

            switch(true){
                case regItem.test(keyval[0]):
                    this.items["Product Id n°" + this.keyval[0].match(regexpParamNumber)[1]] = this.keyval[1];
                    params = params.filter(function(v) { return !(v === "i"+this.keyval[0].match(regexpParamNumber)+"=" + this.keyval[1] );});
                    break;
                case regQuantity.test(keyval[0]):
                    this.items["Quantity n°" + keyval[0].match(regexpParamNumber)[1]] = keyval[1];
                    params = params.filter(function(v) { return !(v === "q"+keyval[0].match(regexpParamNumber)+"=" + keyval[1] );});
                    break;
                default :
                case "" :
                    break;
            }

        })
        console.log(result);
        result[0] = detectTrackerType(this.items);  
        show(result);
    }
    return this.items;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:12:12.023

这是“this”的本质——每次你输入一个函数`this`都会被重置。

尝试

```
extractParams : function(params){
var that = this; 
```

然后`that`在整个代码中使用。

编辑：找到一个值得一读的讨论： ['var that = this;' 是什么意思 在 JavaScript 中是什么意思？](https://stackoverflow.com/questions/4886632/what-does-var-that-this-mean-in-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:12:36.883

`this`在javascript中有点棘手。在你的函数开始时尝试这样做`var self = this;`，然后`self`在你的代码中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:13:44.073

您需要分配`this`给其他类似的东西`self`，然后在您的代码中引用`self`而不是`this`

```
extractParams : function(params){
    var self = this;

    if(params != ""){
        self.items = {};
    ....
    params.forEach( function(dts){
        console.log(self.items); // = undefined 
```

您需要这样做，因为`this`更改范围取决于您在代码中的位置。嵌套函数`this`的作用域是内部函数而不是外部函数。

# email - directmail、tc_directmail 和时事通讯扩展程序不起作用

> ID：12259214
> 
> 赞同：0
> 
> 时间：2012-09-04T08:06:29.770
> 
> 标签：email, typo3

**在一次 TYPO3 安装中，我对directmail**、**tc_directmail**和**newsletter**扩展有奇怪的问题。当我尝试发送时事通讯时，我收到以下错误：

*   **直邮：**

    `The HTML content could not be fetched`

*   **tc_directmail：**

    `Content too short. The content must be at least 200 chars long to be considered valid.`

在同一台服务器上，其他 TYPO3 安装和时事通讯扩展工作正常。

*   `allow_url_fopen`开启
*   `allow_url_include`已关闭

问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:11:30.707

解决了，不是直接邮件，也不是 TYPO3 问题，服务器没有响应来自 localhost 的调用 :(

# xml - 生成 XML 的 Visual Studio 2012 T4 模板给出错误

> ID：12259217
> 
> 赞同：8
> 
> 时间：2012-09-04T08:06:49.737
> 
> 标签：xml, visual-studio-2012, t4

我正在使用 Visual Studio 2012 从 T4 模板生成 XML。模板的顶部看起来像

```
<#@ template language="VBv4" hostspecific="True" debug="True" #>
<#@ output extension="wmef" #>
<?xml version="1.0" encoding="utf-8" standalone="yes"?> 
```

T4 模板正确生成 XML。这没有问题。然而，Visual Studio 越来越困惑，它还尝试将模板本身作为 XML 处理，并报告构建错误，说 XML 格式不正确，这当然是因为它是 XML 的模板，而不是实际的 XML。

当我第一次编辑 .tt 文件时，一切正常。但是，一旦生成了 XML 文件并将其加载到编辑器中查看它，然后突然返回到 .tt 文件，.tt 文件的语法突出显示为看起来像 XML，然后出现构建错误。

也许这只是 m$oft 的一个错误

关于这里可能发生的事情有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-09T01:07:29.250

这是VS中的一个错误。`.tt`您可以通过在文件中替换该行来解决它

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?> 
```

和

```
<# WriteLine("<?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?>"); #> 
```

一旦 VS 对模板文件的 XML 格式感到困惑，它似乎会持续存在这种困惑——即使在像上面那样编辑并重新启动之后也是如此。解决这个问题的唯一方法似乎是`.tt`从您的项目中删除现有文件并从头开始重新创建它。

通过此更改，该`.tt`文件不再具有`<?xml?>`标记，因此 VS 不再将其视为 XML 文件。它忽略文字字符串中的所有内容。

这似乎与[包含 XML 的 T4 模板导致解析错误](https://stackoverflow.com/q/11293963/1380680)的问题相同，但该解决方法从未被 OP 确认或接受，这就是我在此处重新发布它的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T10:20:00.143

作为 Reinier 回答的后续行动......

我发现删除和重新创建文件是可行的，但没有必要从项目中排除文件。

我发现最快/最简单的方法是：

1.  关闭文件。
2.  使用 Windows 资源管理器仅删除 T4 文件。这样 .proj 文件不受影响。
3.  通过从源代码管理中获取最新信息，再次将它们带回来。

# sql - 执行 sp_executesql

> ID：12259222
> 
> 赞同：-1
> 
> 时间：2012-09-04T08:07:23.310
> 
> 标签：sql, sql-server

名为 Emp 的表包含`id,name,lname,birthdate,address and salery`。我想从 emp 中进行选择。基本查询：`select * from emp` 如果传递 lname 的值，查询：`select * from emp where lname = 'fgfg'`像这样。所以我创建了以下 sp。

```
create Procedure Proc_selectEmp
(
@name varchar(10) = null,
@lname varchar(10) = null,
@id varchar(10) = null

)
as
begin

select * from Emp
where 
(@name is null or name = @name) 
and (@lname is null or lname = @lname) 
and (@id is null or id = @id)
end 
```

与 emp 一样，有 13 个表具有相同的列名。所以我的tablenmae也是动态的。这就是为什么，我选择执行sp_executesql。我可以这样创建吗

```
create Procedure Proc_selectEmp
(
@name varchar(10) = null,
@lname varchar(10) = null,
@id varchar(10) = null
@tableName varchar(30)
)
as
begin
declare @query nvarchar(1000) 
set @query = @query +'select * from '+@tableName+'
where ('+@name+' is null or name = '+@name+') 
and ('+@lname+' is null or lname = '+@lname+') 
and ('+@id+' is null or id = '+@id+')
end'

execute sp_executesql @query 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:14:57.367

它会起作用，虽然很臭，因为它要求它要求表名是一个变量，因此表必须具有相同的列定义。

此外，与其包含`@param is null or column = @param`，不如完全省略不必要的过滤器，这很容易做到，因为您使用的是动态 sql。这将避免[参数嗅探问题](https://stackoverflow.com/questions/211355/parameter-sniffing-or-spoofing-in-sql-server)。

最后，不要将列过滤器附加到字符串中，而是使用 的参数化重载`sp_executesql`，这将保护您免受 SQL 注入攻击，并为您处理引号等的转义。不幸的是，@tablename 不能被参数化，但希望？这不是用户或外国提供的变量（在这种情况下，您需要对设计和/或验证技术进行更多思考）。

IE

```
declare @query nvarchar(max) 
set @query = N'select * from ' + @tableName + N` where (1=1)`

if (@name is not null)
  set @query = @query + N'and name = @name'

-- ... same for @id and @lname

exec sp_executesql @SQL, 
     N'@name varchar(10),
       @lname varchar(10),
       @id varchar(10)',
       @name = @name,
       @lname = @lname,
       @id = @id 
```

**编辑** 回复：`un-parameterizable`在动态 sql 中保护表或列名之类的输入-有关想法，[请参见此处的这篇文章](https://stackoverflow.com/questions/4102387/how-to-cleanse-dynamic-sql-in-sql-server-prevent-sql-injection)-使用 `QUOTENAME`和将列/表名列入白名单非常突出。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-09-04T08:13:19.707

是的，你可以，但你必须写

```
EXECUTE(@query) 
```

代替

```
execute sp_executesql @query 
```

# jquery - 根据所选类别淡入图像

> ID：12259226
> 
> 赞同：0
> 
> 时间：2012-09-04T08:07:40.543
> 
> 标签：jquery, fadein

我有一个菜单，其中每个菜单项都有一个类。

```
<ul id="nav">
    <li><a href="#" class="selected">Choose a team</a>
        <ul>
            <li class="ari">Arizona Cardinals</li>
            <li class="atl">Atlanta Falcons</li>
        </ul>
    </li>
</ul> 
```

我还有一系列图像，它们存在于具有与菜单中的类相同的 id 的唯一 div 中。它们的不透明度为 0.25 开始。

```
<div id="ari" class="teamChart"></div>
<div id="atl" class="teamChart"></div> 
```

当我在菜单中选择一个项目时，我试图使用类名来调用 id 名，以便我可以淡入它。像这样的东西......

```
$('#nav li ul li').click(function(){
    $youPicked = '"#'+$(this).attr('class')+'"';

            alert($youPicked); 
            //displays "#ari" when clicked.

            $($youPicked).css('position', 'absolute');
            //hopefully will bring it to front

            //hoping to fadeIn
            $($youPicked).fadeTo('slow',1, function(){
                  //fadeIn complete
            });
}); 
```

如果我能让它工作，那就太好了。或者也许有更优雅的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:11:05.580

`$youPicked`变量不需要双引号。您可以按如下方式重写代码。

```
$("#nav ul li").click(function() {
    var el = $("#" + this.className);
    el.css("position", "absolute");
    el.fadeTo("slow", 1, function() {
        //fadeIn complete
    });
}); 
```

顺便说一句，我怀疑是否需要进行绝对定位。先不试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:09:54.980

你可以直接这样做，

```
$('#nav li ul li').click(function(){
    $(this).css('position', 'absolute');
    $(this).fadeTo('slow',1, function(){
         //fadeIn complete
    });
}); 
```

# .htaccess - 在服务器的子文件夹中没有安装 cakePHP 的 CSS

> ID：12259231
> 
> 赞同：0
> 
> 时间：2012-09-04T08:07:50.510
> 
> 标签：.htaccess, cakephp

我面临一个 cakephp 应用程序的问题。

在我的服务器上，我有一个名为 DIGIPRESSKIT 的文件夹（该文件夹由域 www.digipresskit-online.com 使用），我将所有蛋糕的文件夹放入其中，当我加载页面时，没有 CSS，就像蛋糕可以'不要访问我的 webroot。你有机会检查我的 .htaccess 吗？我阅读了很多关于此的论坛，这就是他们告诉我要做的事情：

代码：“root/.htaccess”（/DIGIPRESSKIT）

```
RewriteEngine on
RewriteRule ^$ /app/webroot/ [L]
RewriteRule (.*) /app/webroot/$1 [L] 
```

代码：“root/app/.htaccess”（/DIGIPRESSKIT/app）

```
RewriteEngine on
RewriteRule ^$ /webroot/ [L]
RewriteRule (.*) /webroot/$1 [L] 
```

代码：“root/app/webroot/.htaccess”

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ /index.php?url=$1 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:19:20.580

假设您可以在此主机上拥有许多域，您可以尝试以下解决方案：

服务器根目录 (/) 上的 .htaccess

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{HTTP_HOST} digipresskit-online.com
RewriteCond %{REQUEST_URI} !^/DIGIPRESSKIT
RewriteRule ^(.*)$ one/$1 [L]

RewriteRule    ^$ /    [L]
RewriteRule    (.*) /$1 [L]
</IfModule> 
```

子文件夹上的 .htaccess (/DIGIPRESSKIT)

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
</IfModule> 
```

DIGIPRESSKIT/app 和 DIGIPRESSKIT/app/webroot/ 没有变化

# ios - 在 Mac / Windows 上为 iPhone 编译 ARM .s

> ID：12259233
> 
> 赞同：1
> 
> 时间：2012-09-04T08:07:58.110
> 
> 标签：ios, assembly, arm

我是新手，这就是我想做的-

1.  使用 ARMv7 程序集创建简单的程序 - 循环、计数器等
2.  我希望能够在 Mac / Win / Linux 上编译它们以便在 iPhone 上运行
3.  我有一部越狱的 iPhone，所以我可以在那里上传文件，用 ldid 签名并运行它

有人可以指点我如何使用免费提供的工具来做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:12:20.693

我想知道你想在这里实现什么 - 是学习在 ARM 汇编器中开发吗？您想编写 iOS 应用程序吗？

如今，没有理智的人用汇编程序编写完整的应用程序——他们使用高级语言——并且在少数有限的情况下在汇编程序中进行优化。这是一项非常专业和有用的技能。

使用完整的 C 程序作为代理主机是很好的开始方式。用 C 语言为自己创建一个简单的 Hello world 程序，该程序调用（几乎）空函数。

您可以（大多数情况下）使用 XCode 使其工作（您需要安装可选的命令行工具）。除了 ARM 的最后一个链接阶段之外，所有的工作都使用`clang`. 这显然只是 MacOSX。

这种实验的一个更好的选择是 ARM Linux 系统，您无需与 iOS 的锁定环境作斗争。[Raspberry Pi](http://www.raspberrypi.org)非常适合这项工作。您将需要一个用于 ARMv7 的交叉编译工具链——其中有很多。如果使用 Ubuntu，则有现成的预构建包可用。

`Main.c`

```
#include<stdio.h>

extern void func();

int main()
{
    printf("Hello World\n");
    func();
} 
```

和`func.c`

```
#include <stdio.h>

void func()
{
    printf("In func()\n");
} 
```

为您的主机环境编译并运行它以查看它的工作原理：

`gcc main.c func.c` `./a.out'

现在为您的目标环境编译。交叉编译工具的确切名称取决于您安装的内容（我的是`arm-angstrom-linux-gnueabi-gcc`）

`arm-angstrom-linux-gnueabi-gcc main.c func.c`

复制到您的目标，并证明它有效。

现在你可以开始编写一些汇编程序了。为我们的受害者`gcc`文件生成 ARM 汇编程序`func.c`- 这会生成一个文件`func.s`

`arm-angstrom-linux-gnueabi-gcc func.c -s`

：

```
 .cpu arm7tdmi-s
.fpu softvfp
.eabi_attribute 20, 1
.eabi_attribute 21, 1
.eabi_attribute 23, 3
.eabi_attribute 24, 1
.eabi_attribute 25, 1
.eabi_attribute 26, 2
.eabi_attribute 30, 6
.eabi_attribute 18, 4
.file   "func.c"
.section    .rodata
.align  2
.LC0:
.ascii  "In func()\000"
.text
.align  2
.global func
.type   func, %function
func:
@ Function supports interworking.
@ args = 0, pretend = 0, frame = 0
@ frame_needed = 1, uses_anonymous_args = 0
stmfd   sp!, {fp, lr}
add fp, sp, #4
ldr r0, .L2
bl  puts
sub sp, fp, #4
ldmfd   sp!, {fp, lr}
bx  lr
.L3:
.align  2
.L2:
.word   .LC0
.size   func, .-func 
.ident  "GCC: (GNU) 4.5.4 20120305 (prerelease)"
    .section    .note.GNU-stack,"",%progbits 
```

你可以在这里看到标签`func:`和之间`.L3`是业务的结束`func()`——它几乎是所有功能的序言和结语。您需要查看[ARM 过程调用标准](http://infocenter.arm.com/help/topic/com.arm.doc.ihi0042d/IHI0042D_aapcs.pdf)以了解这些是什么以及使用哪些寄存器的指导。

完成编辑后，使用 GCC 再次编译整个内容

`arm-angstrom-linux-gnueabi-gcc main.c func.s`

...并测试它。

# java - 从android项目运行.php时出错

> ID：12259238
> 
> 赞同：0
> 
> 时间：2012-09-04T08:08:15.760
> 
> 标签：java, android, json, wampserver

我正在尝试使用 PHP Web 服务连接到 mysql db。这就是我形成请求的方式

```
 HttpClient httpclient = new DefaultHttpClient();
             HttpGet httpget = new HttpGet("http://localhost/android_connect/getbrowsedata.php");
              HttpResponse response = httpclient.execute(httpget);
              HttpEntity entity = response.getEntity();
              is = entity.getContent();
      }catch(Exception e){}
              try{
       BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF8"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
            }
            is.close();

            result=sb.toString();
            System.out.println("result::"+sb.toString());
    }catch(Exception e){
          //  Log.e("log_tag", "Error converting result "+e.toString());
    } 
```

当我从一个普通的 java 应用程序运行它时，我得到了 JSON 格式的适当结果，我可以解析它。我也可以从我的浏览器启动它。当我在 android 项目中使用相同的代码时，响应返回一个带有 403 的 html，您无权访问此服务器上的 .php 文件（而不是我使用我的 IP 地址的本地主机）。我已将用户权限包含在 android 清单文件中。我还修改了我的 WAMP 服务器中的 httpd.conf，将所有拒绝更改为授予，如在其他帖子中发现的那样。这是 WAMP 服务器的任何其他配置的问题吗？有人遇到过这个问题吗？任何建议都会有很大帮助

# android - webview不显示超链接

> ID：12259246
> 
> 赞同：4
> 
> 时间：2012-09-04T08:08:39.563
> 
> 标签：android, webview

我有一个字符串：**myFullString**，它看起来像：

```
<html>
<body style="background-color: transparent; margin-top:75px; padding:0px;"> 
<style type="text/css"> 
p {margin-left:40px; margin-right:40px; margin-top:40px; margin-bottom:40px; } 
</style> <p> 
<font face="helvetica" size=8 color=white> 
<b>  Heading 
</b></font> 
<font face="helvetica" size=6> <br/> <br/>  
<br/> Address Line 1 
<br/> Address Line 2 <br/> 
<br/> Tel: PhoneNumber 
<br/> Fax: Fax No <br/> 
<br/> <br/><br/>
</font></p> 
</body></html> 
```

我希望电话号码和/或链接（如果有）显示为可点击/高亮。所以我写了以下代码：

```
 Spannable sp = new SpannableString(myFullString.toString());
        Linkify.addLinks(sp, Linkify.ALL);
        final String html = Html.toHtml(sp) ;
        mWebView.setClickable(true);
        mWebView.loadData(html, "text/html", "utf-8"); 
```

我得到以下结果： ![超链接存在，但它显示了整个文件](../Images/a2f8937b742a41f6ab4a68317afce352.png)

在这个 web 视图中，文本是超链接的，但我们可以看到标签。

我还尝试使用以下代码：

```
Spannable sp = new SpannableString(myFullString.toString());
Linkify.addLinks(sp, Linkify.ALL);
mWebView.loadDataWithBaseURL(null, sp.toString(),"text/html", "utf-8", "about:blank"); 
```

但它给出了以下输出：

![loadDataWithBaseURL](../Images/e3c1cf5e23a2114657f02da7dfbb2095.png)

它显示正确的文本字体，但不链接文本。

如何修改我的代码以显示链接而不显示标签？webview 内容是动态创建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:24:57.713

由于我找不到更简单的方法...

我对网页中显示的每一行都做了类似的事情：

```
 String str=mWebFileArray [i].toString();
            if(str.contains("<!- ")){
                str.replace("<!- ", "<!-- ").replace(" ->", " -->");
            }else{
                Spannable sp = new SpannableString(str);
                Linkify.addLinks(sp, Linkify.ALL);
                str = Html.toHtml(sp) ;
            }
            myArray.add(str); 
```

现在，它链接了有效的文本......

# python - 嵌套推导中的 NameError

> ID：12259251
> 
> 赞同：16
> 
> 时间：2012-09-04T08:08:56.427
> 
> 标签：python, list-comprehension

我在文件中有这段代码

```
class Sudoku(dict):
    COLUMNS = [
        {(x, y) for y in xrange(9)} for x in xrange(9)
    ] 
```

当我运行时`python broken.py`，我得到了回溯：

```
Traceback (most recent call last):
  File "U:\broken.py", line 1, in <module>
    class Sudoku(dict):
  File "U:\broken.py", line 3, in Sudoku
    {(x, y) for y in xrange(9)} for x in xrange(9)
  File "U:\broken.py", line 3, in <setcomp>
    {(x, y) for y in xrange(9)} for x in xrange(9)
NameError: global name 'x' is not defined
[Finished in 0.1s with exit code 1] 
```

我真的没有看到这里的问题。`x`理解中没有定义吗？

* * *

奇怪的是，当直接粘贴到 python 解释器中时，这似乎执行起来没有错误......

* * *

**编辑**：如果我使用列表理解而不是集合理解，则此方法有效

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-31T23:11:38.747

我在[这里](http://bugs.python.org/issue18110)提交了一个错误。这是~~还是坏了~~在 python 2.7.5 中设计。

从错误报告中：

> 在 Python 2 中，列表推导没有自己的范围，因此`x`在您的初始示例中，您的示例位于类范围内。但是，集合推导*确实*有自己的范围。按照设计，在类范围内定义的变量对该类内部的范围不可见。
> 
> 在 Python 3 中，这是可行的，因为列表推导有自己的范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T08:33:58.227

疯狂的猜测，但是 Python 2.7 和 3.0 引入了 Python 集合推导：你会碰巧使用旧版本来执行你的脚本，并使用最近的一个作为你的解释器吗？

* * *

在查看了 Python 文档的[这一部分](http://docs.python.org/reference/executionmodel.html?highlight=enclosing%20scope#naming-and-binding)后，我没有看到对这种行为的解释。此外，它与列表理解一起使用的事实清楚地表明它不是范围问题。

我只看到两个可能的原因：

*   集合推导实现中的错误
*   使用不支持集合推导的前 Python 版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T08:26:32.190

恐怕我不知道为什么您的代码无法正常工作，但是，以下工作可以为您提供所需的内容：

```
class Sudoku(dict):
    COLUMNS = [
        set([(x, y) for y in xrange(9)]) for x in xrange(9)
    ] 
```

也许这个网站上的一些 python 大师可以启发我们为什么你的代码片段会失败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T08:21:08.770

我希望我能给出一个理论上的解释，但这有效：

```
class Sudoku(dict):
    def __init__(self):
        self.COLUMNS = [
            {(x, y) for y in xrange(9)} for x in xrange(9)
            ]

if __name__ == "__main__":
    s = Sudoku()
    print s.COLUMNS 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T08:21:45.697

也许这就是你真正想要的：

```
[[{x:y} for x in xrange(9)] for y in xrange(9)] 
```

# scala - 模块化 Scala 设计：如何避免构造函数“推出”样板？

> ID：12259254
> 
> 赞同：12
> 
> 时间：2012-09-04T08:09:14.933
> 
> 标签：scala, boilerplate

也许具有良好风格和优雅感的 Scala 专家可以帮助我找出一种更好的方法来构建以下代码，该代码存在构造函数“推出”问题。

我们从一个简单的基类开始：

```
class Foo(val i: Int, val d: Double, val s: String) {

  def add(f: Foo) = new Foo(i + f.i, d + f.d, s + f.s)
  override def toString = "Foo(%d,%f,%s)".format(i,d,s)

} 
```

为了在复杂的应用程序中进行类型检查，我需要一个没有任何附加状态的子类：

```
class Bar(i: Int, d: Double, s: String) extends Foo(i,d,s) {

  override def toString = "Bar(%d,%f,%s)".format(i,d,s)

} 
```

就目前而言，当我添加两个条时，我只得到一个 Foo：

```
val x = new Bar(1,2.3,"x")
val y = new Bar(4,5.6,"y")
val xy = x.add(y) 
```

在 REPL 中有以下响应：

```
x  : Bar = Bar(1,2.300000,x)
y  : Bar = Bar(4,5.600000,y)
xy : Foo = Foo(5,7.900000,xy) 
```

如何以优雅的方式将两个 Bars 添加在一起以形成另一个 Bar（而不是 Foo），而无需复制和粘贴 Foo 的 add 方法，如下所示？

```
class Bar(i: Int, d: Double, s: String) extends Foo(i,d,s) {

  // ugly copy-and-paste from Foo:
  def add(b: Bar) = new Bar(i + b.i, d + b.d, s + b.s)
  override def toString = "Bar(%d,%f,%s)".format(i,d,s)

} 
```

我有很多这样的 Bars（基本上都是 Foo 的副本，但对于类型检查非常重要），免剪切和粘贴的解决方案将带来好处。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T09:00:21.103

I try to avoid inheritance as much as possible. So here is an alternative approach.

Class `Bar` has exactly the same constructor than `Foo` and both are stateless. If you want to have several sub-types, just to convey any additional information, you can use a generic parameter as a "label". For instance:

```
trait Kind
trait Bar extends Kind

class Foo[T<:Kind](val i: Int, val d: Double, val s: String) {
   def add(f: Foo[T]) = new Foo[T](i + f.i, d + f.d, s + f.s)
   override def toString = "Foo(%d,%f,%s)".format(i,d,s)
}

scala> val b1 = new Foo[Bar](2,3.0,"hello")
b1: Foo[Bar] = Foo(2,3.000000,hello)

scala> val b2 = new Foo[Bar](3,1.0," world")
b2: Foo[Bar] = Foo(3,1.000000, world)

scala> b1 add b2
res1: Foo[Bar] = Foo(5,4.000000,hello world) 
```

Now `add` is type safe. You could then use a type class to get the `toString` to display the `Kind`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T19:44:07.827

Expanding on @paradigmatic's answer, if you want to be able to support operations that are specific to each `Bar` (e.g. different `toString`), you can go one step further and make `Kind` a typeclass.

```
trait Kind[T] { def name : String }
trait Bar
implicit object BarHasKind extends Kind[Bar] { val name = "Bar" }

class Foo[T : Kind](val i : Int, val d : Double, val s : String) {
  def add(f : Foo[T]) = new Foo[T](i + f.i, d + f.d, s + f.s)
  override def toString = implicitly[Kind[T]].name + "(%d,%f,%s)".format(i,d,s)
}

scala> val b1 = new Foo[Bar](2, 3.0, "hello")
b1: Foo[Bar] = Bar(2,3.000000,hello)

trait Biz
implicit object BizHasKind extends Kind[Biz] { val name = "Biz" }

scala> val b2 = new Foo[Biz](1, 1.0, "One") 
```

It is just as type safe as before:

```
scala> b1 add b2
<console>:16: error: type mismatch;
  found   : Foo[Biz]
  required: Foo[Bar]

scala> b2 add b2
resN: Foo[Biz] = Biz(2,2.000000,OneOne) 
```

For any property that you wish to be dependent on the tag, declare them abstractly in `Kind` and provide the implementations in the implicit objects.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T13:20:19.693

The approach with type parametrisation has a limitation in that it doesn't allow you to extend functionality in a natural way which is inheritance. So, an alternative approach could be an override-able factory method (which is simply a delegate to the constructor):

```
class Foo(val i: Int, val d: Double, val s: String) {

  protected def create(i: Int, d: Double, s: String) = new Foo(i, d, s)

  def add[A <: Foo](f: A) = create(i + f.i, d + f.d, s + f.s)

  override def toString = "Foo(%d,%f,%s)".format(i,d,s)
}

class Bar(i: Int, d: Double, s: String) extends Foo(i,d,s) {

  protected override def create(i: Int, d: Double, s: String) = new Bar(i, d, s)

  override def toString = "Bar(%d,%f,%s)".format(i,d,s)

  // additional methods...

}

println( new Foo(10, 10.0, "10") add new Bar(10, 10.0, "10") )
println( new Bar(10, 10.0, "10") add new Foo(10, 10.0, "10") ) 
```

# python - 具有边缘像差和 1 个缺失角的正方形检测

> ID：12259258
> 
> 赞同：3
> 
> 时间：2012-09-04T08:09:37.587
> 
> 标签：python, image-processing, opencv, computer-vision

这是对有关正方形检测的几个[类似](https://stackoverflow.com/questions/8667818/opencv-c-obj-c-detecting-a-sheet-of-paper-square-detection) [问题的跟进，其中](https://stackoverflow.com/questions/10533233/opencv-c-obj-c-advanced-square-detection)[karlphillip](https://stackoverflow.com/users/176769/karlphillip)、[mevatron](https://stackoverflow.com/users/951860/mevatron)和[abid-rahman-k](https://stackoverflow.com/users/1134940/abid-rahman-k)提出了一些很酷的方法。

我正在尝试设计一种强大的正方形检测算法，以帮助将收据的图片与图像的其余部分隔离开来。我的代码是基于前面问题的凸包方法构建的，但它在图像中的一个点不在图像中并且由于左侧的笔架而导致收据的边缘出现偏差的图像上令人窒息。

如何检测这张收据上的边角？

这是图像：

![收据图片](../Images/c2c84955abf15407444b09baea48475f.png)

这是我的代码：

```
import cv2
import numpy as np

img = cv2.imread('taco.jpg')
img = cv2.resize(img,(1944,2592))
img = cv2.medianBlur(img,31)
img = cv2.GaussianBlur(img,(0,0),3)

grayscale = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)
thresh = cv2.Canny(grayscale, 10, 20)
thresh = cv2.dilate(thresh,None)

contours,hier = cv2.findContours(thresh,cv2.RETR_LIST,cv2.CHAIN_APPROX_SIMPLE)

for cnt in contours:
    if cv2.contourArea(cnt)>250:  # remove small areas like noise etc
        hull = cv2.convexHull(cnt)    # find the convex hull of contour
        hull = cv2.approxPolyDP(hull,0.1*cv2.arcLength(hull,True),True)
        if len(hull)==4:
            cv2.drawContours(img,[hull],0,(0,255,0),2)

cv2.namedWindow('output',cv2.cv.CV_WINDOW_NORMAL)
cv2.imshow('output',img)
cv2.cv.ResizeWindow('output',960,640)
cv2.waitKey()
cv2.destroyAllWindows() 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T17:12:40.873

Mathematica 中的解决方案：

导入您的图像：

```
i = Import@"http://i.imgur.com/RrYKJ.jpg"; 
```

以比收据中的字母更大的比例检测边缘（参数）

```
i1 = EdgeDetect[i, 10] 
```

![数学图形](../Images/936ab83c6f4976eecbcb7dfd28a308bc.png)

删除小于收据周长比例的行（参数）

```
i2 = DeleteSmallComponents[i1, 1000] 
```

![数学图形](../Images/01204a2d006c7ea355e085ba85553405.png)

找到形态成分

```
(mc = MorphologicalComponents[Erosion[ColorNegate@i2, 1]]) // Colorize 
```

![数学图形](../Images/75d944539c36e5597fc07c30f72a57be.png)

找到具有更多边界邻接的变形组件（将其从掩码中删除）

```
com = Commonest[Join[mc[[1]], mc[[-1]], Transpose[mc][[1]], Transpose[mc][[-1]]]] 
```

形成面具

```
mc1 = Unitize[mc /. com[[1]] -> 0]; 
```

![数学图形](../Images/9d03b0f28be55e6ecf9dc72e64738052.png)

将蒙版乘以原始图像

```
ImageMultiply[Image@mc1, i] 
```

![数学图形](../Images/40aa5272e9f75b6aea8200d9d8c966c3.png)

# java - 具有自定义外观的 Swing 日期选择器

> ID：12259264
> 
> 赞同：1
> 
> 时间：2012-09-04T08:09:57.053
> 
> 标签：java, swing, datepicker

我需要一个免费的日期选择器（用于商业项目），具有完全可定制的外观。我的意思不仅是覆盖颜色，还有边框、形状、按钮图标等......这样的选择器是否存在，或者我自己编写会更容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:12:38.993

您需要 Kai Toedter 的[JCalendar](http://www.toedter.com/en/jcalendar/) ...它是免费的，实现得非常好，可国际化，如果您使用 Netbeans，您可以将这些 Javabeans 添加到您的组件面板中，并将它们拖放到您需要的任何地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T08:31:54.713

[SwingX](http://java.net/projects/swingx)提供 JXDatePicker 并且 SwingX 是在 LGPL 2.1 下获得许可的

在[本文中](http://www.javalobby.org/java/forums/t45447.html)，他们讨论了 JXDatePicker 的用法。SwingX 网站上也可能有教程或示例代码，但我无法访问他们的网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:51:25.860

JIDE Common Layer 中有一个很好的`DateComboBox`可用版本，它是在双重许可下发布的：GPL 和免费商业许可。我认为在确保许可证足够友好之后可能值得对其进行评估。

# asp.net-mvc - 使用 web.config 控制上传文件大小

> ID：12259271
> 
> 赞同：0
> 
> 时间：2012-09-04T08:10:24.307
> 
> 标签：asp.net-mvc, iis, web-config

我需要在我的 asp.net mvc 应用程序中控制每个文件夹的最大上传文件大小。所以我在 root web.config

```
<system.web>
  <httpRuntime maxRequestLength="1024" />
</system.web> 
```

然后我有上传文件夹结构，如 Uploads- User1 User2 所以我为用户 1 文件夹添加了 web.config，我将 maxRequestLength 设置为 20480。但这不会影响我的应用程序。看起来我的覆盖不会影响我的应用程序。有什么建议么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:13:46.637

在根 web.config 中，`Location`为每个子文件夹添加标签，如下所示：

```
<location path="Uploads/User1">
    <system.web>
        <httpRuntime maxRequestLength="20480" />
    </system.web>
</location>

<location path="Uploads/User2">
    <system.web>
        <httpRuntime maxRequestLength="1024" />
    </system.web>
</location> 
```

# nhibernate - 如何使用多个键连接映射 2 个表

> ID：12259275
> 
> 赞同：0
> 
> 时间：2012-09-04T08:10:49.003
> 
> 标签：nhibernate

我有以下映射：

```
<class name="xxx" table="t1" schema="s1" lazy="false">
    <composite-id>     
      <key-property name="OperatorId" column="OPERATOR_ID" />
      <key-property name="GID" column="GID" />
    </composite-id>
    <property name="StationName" column="NAME" />

  <join table="t2" schema="s2" optional="true">
      <key column="GID"  property-ref="GID" />
      <key column="OperatorId" property-ref="OperatorId"/>

      <property name="NumberOfKM" column="NumberOfKM" />
    </join>
  </class> 
```

似乎我不能在加入中添加一个以上的键，为什么？我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:13:49.487

尝试这个：

```
<class name="xxx" table="t1" schema="s1" lazy="false">
    <composite-id>     
      <key-property name="OperatorId" column="OPERATOR_ID" />
      <key-property name="GID" column="GID" />
    </composite-id>
    <property name="StationName" column="NAME" />

  <join table="t2" schema="s2" optional="true">
    <key>
        <column name="GID"/>
        <column name="OperatorId"/>
    </key>
      <property name="NumberOfKM" column="NumberOfKM" />
    </join>
</class> 
```

请记住

```
<key>
   <column name="GID"/>
   <column name="OperatorId"/>
</key> 
```

对于连接，`t2`请参阅 中存在的键列`t2`。

# sorting - 如何对使用 grep -c 获得的输出进行排序？

> ID：12259276
> 
> 赞同：14
> 
> 时间：2012-09-04T08:10:57.927
> 
> 标签：sorting, grep

我使用以下“grep”命令来获取`alert`给定路径下每个文件中字符串的计数：

```
grep 'alert' -F /usr/local/snort/rules/* -c 
```

如何按所需的顺序对结果输出进行排序——比如升序、降序、按名称排序等。针对这些情况的答案就足够了。

您也可以自由地建议其他命令`grep`。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-04T08:17:49.283

将其放入排序中。假设您的文件名没有冒号，请使用“-t”选项将冒号指定为字段分隔符。使用 -n 进行数字排序。

例子：

```
grep 'alert' -F /usr/local/snort/rules/* -c | sort -t: -n -k2 
```

应该将行拆分为以“：”分隔的字段，使用第二个字段进行排序，并将其视为数字（因此 21 实际上晚于 3）。

# visual-studio-lightswitch - Lightswitch只读标签标签和值的不同文本

> ID：12259277
> 
> 赞同：1
> 
> 时间：2012-09-04T08:10:57.740
> 
> 标签：visual-studio-lightswitch

我在 Lightswitch 中有一个详细信息屏幕，其中显示了几个只读字段（使用标签控件）。它呈现这些的方式是标签“标题”（显示字段名称）与标签值的字体和粗细相同。似乎这不能在自定义主题扩展中更改。我本来希望标签值使用与标签标题不同的文本/画笔设置。我想要实现的是标签字段标题使用粗体字体，标签字段值使用非粗体字体。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T01:56:49.407

LightSwitch 仅对*所需*属性的标签使用*粗体。*您想要的是“可行的”，但是您必须通过创建一个实现*IThemeExtension*的类来弄脏您的手。

 **如果您准备进行一些编码，这篇博文描述了一种实现方式（无论是否使用*Extensions Made Easy*扩展）。尽管它实际上与您想要的*相反（**关闭*粗体），但您可以修改该技术以提供您想要的（打开粗体*）*。

[如何使用 Extensions Made Easy 使您的必填字段没有粗体标签……（作者：Kirk Brownfield）](http://janvanderhaegen.wordpress.com/2012/04/08/how-to-make-your-required-fields-not-have-a-bold-label-using-extensions-made-easy-by-kirk-brownfield)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:28:49.353

[Jewel Lambert](http://dotnetlore.com/using-visualtreehelper-to-perform-lightswitch-wizardry/)编写了一个帮助类，允许您更改控件的各种样式元素。

她正在做与 Kirk Brownfield 在 Yann 的回答中所做的相同的事情，即弄乱 Silverlight XAML。我只是发现她的方法更容易遵循。**

# c# - 如何在 Windows 8 Metroui 中列出已安装的应用程序

> ID：12259278
> 
> 赞同：1
> 
> 时间：2012-09-04T08:10:59.860
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime

我只是好奇是否有办法在应用程序中找到已安装的 Metro 应用程序。我的意思是，我喜欢创建一个应用程序，它还显示我的其他应用程序，我想将它们显示为“从商店获取”或“启动”。谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:59:37.317

不，这是不可能的。Windows 应用商店应用程序被严重沙盒化，这是不允许的事情之一。

# c# - 来自 *.aspx 页面的 RSS

> ID：12259290
> 
> 赞同：0
> 
> 时间：2012-09-04T08:11:41.597
> 
> 标签：c#, asp.net, rss, flexlm

我怎么 [能从这个页面](http://www.cyprusrecruiter.com/rss.aspx?q=&p=0)阅读 rss ！该页面不允许您访问 xml 文件，仅提供下载 rss.aspx 页面的选项，该页面内部看起来像 xml 文件。
如果我可以将 rss.aspx 转换为 rss.xml 的完美方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:14:56.000

将下载文件的扩展名更改为 .xml（只需重命名文件）...

如果您希望打开此文件而不是下载此文件，请尝试在服务器端更改 Response.ContentType。虽然这不会改变文件的扩展名。这是关于正确内容类型的 RSS 提要的好文章的[链接。](http://www.petefreitag.com/item/381.cfm)

如果您想在服务器端更改此文件的扩展名 - 也许您必须创建 HttpHandler。

# entity-framework - jqGrid filterToolbar - 使用 jquery ui datepicker 过滤 DateTime

> ID：12259291
> 
> 赞同：1
> 
> 时间：2012-09-04T08:11:48.880
> 
> 标签：entity-framework, jquery-ui, jqgrid

我一直在研究使用 filterToolbar 按日期时间过滤 jqGrid。

我的问题是基于 Olegs 的出色[回答](https://stackoverflow.com/questions/5500805/asp-net-mvc-2-0-implementation-of-searching-in-jqgrid/5501644#5501644)。

我终于想出了如何在日期触发工具栏搜索，如下所示：

```
colModel: [{
    name: 'RequestDate',
    index: 'RequestDate',
    formatter: 'date',
    formatoptions: {
        newformat: 'm/d/Y h:iA'
    },
    searchoptions: {
        sopt: ['eq'],
        dataInit: function (elem) {
            $(elem).datepicker({
                changeYear: true,
                changeMonth: true,
                onSelect: function (dateText, inst) {
                    setTimeout(function () {
                        $('#MyGrid')[0].triggerToolbar();
                    }, 50);
                }
            });
        }
    }
}] 
```

现在，当从选择器中选择日期时，我想返回给定日期的所有记录，而忽略时间。

我尝试过更新该`FilterObjectSet`方法，但没有成功。有没有人能够成功实现这一点？

**我尝试过的：（**请参阅 Olegs 链接解决方案中的代码）

将 FormatMapping 设置为`"(dateadd(dd,0, datediff(dd,0, it.{0})) = @p{1})"`并将 System.DateTime 添加到 switch 语句：

```
case  "System.DateTime":
                        param = new ObjectParameter("p" + iParam, Convert.ToDateTime(rule.data));
                        break; 
```

但这会导致 EntitySqlException：

```
'dateadd' cannot be resolved into a valid type or function. 
```

有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:16:44.973

好吧，今天早上想通了：

添加了一个新的操作：

```
de //de - date equals 
```

向 FormatMapping 添加了一个新字符串，该字符串使用`SqlServer.datediff`：

```
"(SqlServer.datediff('DAY', it.{0} , @p{1}) = 0)" //de - date equals 
```

并添加了日期大小写：

```
case  "System.DateTime":
    param = new ObjectParameter("p" + iParam, Convert.ToDateTime(rule.data));
break; 
```

将 colModel 中的 sopt 更改为`sopt: ['de']`

# php - 任何关于如何在 MultiCell n FPDF 中显示粗体文本部分的建议

> ID：12259294
> 
> 赞同：0
> 
> 时间：2012-09-04T08:12:06.003
> 
> 标签：php, fpdf, bold

我正在使用 FPDF 最新版本在 php 中创建 pdf 文件。我要执行的任务是我将值存储在数据库中，其中包含 html 粗体标签，其中一些文本存在于 html b 标签内（正确地位于开始和结束标签内）。我想在 MultiCell 中将这些 b 标签内的文本显示为粗体。

任何关于如何在 MultiCell 中显示粗体文本部分的建议。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T17:15:33.837

您可以使用[Fpdf Multicell 插件](http://interpid.eu/fpdf-multicell)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-25T22:13:26.753

如果您在不使用 MultiCell() 的情况下对类似的解决方案感到满意，则无需使用 Diego 的建议，因为您需要为该解决方案支付至少 20 欧元。

我已经用[FPDF 中的几行代码回答了这个问题 - 内联粗体文本](https://stackoverflow.com/questions/22697527/fpdf-inline-bold-text/45889693#45889693)

您可以使用数学轻松修改 Rect() 宽度和高度以包含您的数据库值。

# algorithm - 从图像中估计曲率

> ID：12259300
> 
> 赞同：6
> 
> 时间：2012-09-04T08:12:16.743
> 
> 标签：algorithm, computer-vision, estimation, least-squares

我有这样的图像：

![在此处输入图像描述](../Images/fb8cfc21fe9c30ba48cec11c2632348f.png) ![在此处输入图像描述](../Images/c88e91a4afa961e80f47a81c0a09b685.png) ![在此处输入图像描述](../Images/781ee44679b76c9ff87351dcbc9f3ea8.png) ![在此处输入图像描述](../Images/c489e1d1f4170ef571612d1e7f2e0d8b.png)

在这张图片中，红线是我想从图片中得到的。原始图像没有那条红线，只有那条绿线。

我想要的是以方程的系数形式从图像中估计曲线：A x ^ 2 + B x + C = 0。在图像中可能存在噪声（如您在上面看到的边缘上的黑洞）。

我试图通过使用最小二乘法（LSM）来解决这个问题，但是这种方法有两个问题：

1.  该方法即使在PC上也太慢，因为点数很高。

2.  在以下情况下道路太宽：

左侧图像上的曲线被正确识别，但右侧的曲线被错误识别。原因是路太宽太短，我想。 ![输入图片](../Images/803a5e52066edf099292e31005355762.png)

作为这两种情况的解决方案，我想让道路变窄。在理想情况下，它是上图中的一条红线。或者我想使用 LSM 进行线检测 (A x + B = 0) 以优化处理时间。

我试过侵蚀图像 - 这是错误的方法。骷髅也不是正确的解决方案。

关于如何达到预期结果（使道路变窄）的任何想法？或者对解决这个问题的另一种方法有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:41:11.197

如果您可以依靠始终将一个轴作为适合您的因变量（看起来它应该是`x`上述“正确”示例中的轴，尽管您的右下角故障似乎正在使用`y`），那么您可以执行类似的操作：

*   对于每条扫描线`y`，选择`x`非黑色像素的中值
*   如果没有非黑色像素（或小于某个选定的噪声阈值），则跳过该行

您现在有一个`(x,y)`对列表，最多与扫描线一样多。这些代表对每一层道路中点的猜测。`x=f(y)` 通过最小二乘法拟合这些点的低阶多项式（我会选择线性或三次，但如果你愿意，你可以做二次）。

对于您展示的各种图像，细节非常粗糙，因此您可能只需要一部分点即可进行管理。但即使没有，除非您使用非常受限的硬件，否则处理成本应该是合理的。

如果左右路径经常出现，那么您可以同时拟合两种方式，然后应用某种拟合优度标准。如果路径经常在自己身上循环，那么这种中点方法不会给你一个好的答案，但无论如何你都会成为一个失败者。

# jquery - 网格手风琴单个块调整大小

> ID：12259303
> 
> 赞同：1
> 
> 时间：2012-09-04T08:12:20.627
> 
> 标签：jquery, css, accordion

我创建了一个网格手风琴，每个块中都有一个图像和文本，但我似乎无法调整块的大小，不显示完整内容，有没有办法调整每个单独块的大小，所以当你点击网格时它会展开到更大的尺寸，因此可以显示所有内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:17:58.970

类似这样的东西：

```
var myresizer = function(){
$('.mywhateverAccordion .mywhateverBlock').each(function(){
   var offset = 50;
   var whateverimage = $(this).children('img').get(0); 
   var whatevertext = $(this).children('.mywhatevertextclass').get(0); 
    var newheight = $(whateverimage).height() + $(whatevertext).height() + offset;
   $(this).height(newheight);
});
});

//Some ajax or whatever, changes, etc.
myresizer(); 
```

# ruby-on-rails - 渲染表单 Rails 时出现 NoMethodError

> ID：12259311
> 
> 赞同：0
> 
> 时间：2012-09-04T08:12:52.420
> 
> 标签：ruby-on-rails

路线.rb：

```
resources :shops 
```

shop_controller.rb：

```
def new
    @shop=Shop.new
end 
```

新的.html.erb：

```
<%= form_for(@shop) do |f| %>
....
<% end %> 
```

错误：未定义的方法“shops_path”：

```
<%= form_for(@shop) do |f| %> 
```

问题是我已经在路线文件中指定了商店资源。为什么还会出现这样的错误？

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:37:38.790

确保你的`rake routes`输出中有这些行：

```
 shops GET    /shops(.:format   {:action=>"index", :controller=>"shops"}
         POST   /shops(.:format)  {:action=>"create", :controller=>"shops"} 
```

或者

```
 shops POST   /shops(.:format)   {:action=>"create", :controller=>"shops"} 
```

如果它们不存在，请仔细查看您`routes.rb`的可能`with_options`，或任何其他可能以不生成默认 url 帮助程序的方式`scope`影响您的范围。`resources :shops`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:28:34.917

由于 Rails 命名约定，您`ShopsController`不应该使用。`ShopController`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:05:52.223

由于您没有在表单标签中指定方法，我猜它是作为 GET 请求进行的。尝试将方法添加到您的表单

```
<%= form_for(@shop), :method => :post do |f| %> 
```

# javascript - 如果图像标签是用 javascript 编写的并且需要用户输入，图像不会随页面一起加载吗？

> ID：12259319
> 
> 赞同：0
> 
> 时间：2012-09-04T08:13:41.543
> 
> 标签：javascript

我想要一种仅在需要时加载图像的方法，但对使用 AJAX 犹豫不决。相反，这样的事情会起作用吗？

```
<div onclick="loadimages()">Section Title</div>
<script type="text/javascript">
function loadimages()
{
    document.write('<img src="images/thumbnail1.jpg" />');
    document.write('<img src="images/thumbnail2.jpg" />');
    document.write('<img src="images/thumbnail3.jpg" />');
}
</script> 
```

目的是在单击该 div 时图像显示在“部分标题”下方，并且仅在那时加载图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:18:28.510

编辑：未经测试的代码——即时输入。

`document.write`页面加载后不会做你想做的事，你必须对 DOM 做一些事情。

比如，也许：

```
<div id='section_title' onclick="loadimages()">Section Title</div>
<script type="text/javascript">
function loadimages()
{
    var pics = ['thumbnail1.jpg', 'thumbnail2.jpg', 'thumbnail3.jpg'];
    var i, img, el;
    el = document.getElementById('section_title');
    for (i = 0; i < pics.length; i++) {
      img = document.createElement("img");
      img.src = pics[i];
      el.appendChild(div);
    }
}
</script> 
```

另一种方法是将图像放入您的 HTML 文件中，但`display:none`需要隐藏它们并取消隐藏。

或者，根据目的，将它们照常放在 HTML 中，然后在加载时隐藏它们，然后在需要时取消隐藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:18:35.490

如果你想动态地向 DOM 添加元素，有几个选择*比*可恶的`document.write`. 例如，您可以这样做：

```
var image = document.createElement("img");
image.src = "images/thumbnail1.jpg";

var parent = document.getElementById("foo"); // identify the parent somehow
parent.appendChild(image); 
```

或者你可以这样做：

```
var parent = document.getElementById("foo"); // identify the parent somehow
parent.innerHTML += '<img src="..." />'; 
```

或者，如果您使用 jQuery：

```
$("your selector here").append('<img src="..." />'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:19:17.050

当您这样做时，`document.write('something');` 这`something`将替换您的`document`.

您可以做的是动态创建新元素并将它们附加到适当的位置。

# objective-c - 在 iphone 中验证 UITextField 中的电子邮件地址

> ID：12259322
> 
> 赞同：8
> 
> 时间：2012-09-04T08:13:48.073
> 
> 标签：objective-c, uitextfield

> **可能重复：**
> [确保用户输入了正确格式的电子邮件地址字符串？](https://stackoverflow.com/questions/11094658/ensure-user-has-entered-email-address-string-in-correct-format)

我有`UITextField`其中我从他们输入的用户那里获取电子邮件地址，并且我想验证该电子邮件地址，例如我应该检查它是否包含@符号和其他电子邮件字符等符号。

如果电子邮件地址有错误，则应显示`UIAlertView`“输入有效的电子邮件地址”。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-04T08:26:13.653

**目标 C 风格**

```
NSString *emailRegEx = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,10}";
NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegEx];

if ([emailTest evaluateWithObject:email.text] == NO) {

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Test!" message:@"Please Enter Valid Email Address." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];

    return;
} 
```

**斯威夫特风格**

```
class func isValidEmail(emailString:String) -> Bool {

    let emailRegEx = "[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,10}"
    var emailTest = NSPredicate(format:"SELF MATCHES %@", emailRegEx)

    let result = emailTest?.evaluateWithObject(emailString)
    return result!
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T08:23:23.817

您可以使用 NSPredicate 执行此操作

```
//suppose emailID is your entered email address NSString
NSString *emailFormat1 = @"[A-Z0-9a-z._]+@[A-Za-z0-9]+\\.[A-Za-z]{2,4}";     

NSPredicate *emailTest1 = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailFormat1]; 

if ([emailTest1 evaluateWithObject:emailID]||[emailTest2 evaluateWithObject:emailID]) {
   //yes it is valid
}
else
    //no it is invalid 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T08:20:05.583

将[RegexKitLite](http://regexkit.sourceforge.net/RegexKitLite/)添加到项目中并找到以下解决方案。

1.  [在 iOS 2.0 上的 Objective-C 中验证电子邮件地址的最佳实践](https://stackoverflow.com/questions/800123/best-practices-for-validating-email-address-in-objective-c-on-ios-2-0)
2.  [如何在 iphone 的 uitextfield 中验证电子邮件字段](https://stackoverflow.com/questions/4068859/how-to-validate-email-field-in-uitextfield-in-iphone)

# visual-studio-2010 - 这个红色减号覆盖图标在 Visual Studio 的解决方案资源管理器中是什么意思？

> ID：12259323
> 
> 赞同：18
> 
> 时间：2012-09-04T08:13:55.970
> 
> 标签：visual-studio-2010

![在此处输入图像描述](../Images/b602a6ea9ab5e5c842efa062821b7937.png)

这个红色减号标志在视觉工作室中意味着什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-24T00:07:45.110

我相信这意味着该文件被排除在构建之外。

请注意，这似乎与“从项目中排除”有点不同，因为该文件显示在列表中，但如果您右键单击它并查看“属性”>“常规”，则“从构建中排除”设置为“是”。如果您将其设置为“否”，则红色减号消失。

还有一个数据点，我导入的项目最初是一个 VC6 项目，因此这可能是 Visual Studio 2010 表示与从项目中排除不同的旧设置的方式。

关于它的另一条表示缺少项目的评论显示了一个感叹号图标，而不是一个减号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-17T17:42:02.903

带有白色减号的红色圆圈图标表示该文件已从源代码控制中排除。例如，右键单击过滤器“头文件”并找出如何设置“SCC 文件”属性。可能设置为false，将其更改为true，图标将消失。

# ruby-on-rails - Rails：从 val.size 中找到最大的数字

> ID：12259325
> 
> 赞同：2
> 
> 时间：2012-09-04T08:14:03.433
> 
> 标签：ruby-on-rails, size

```
user = SkillUser.find_all_by_skill_id(skill_id)
user.size 
```

给我： 1 2 2 1 3 1 3 1 3 2 1 1 3

如何从这行数字中获得最大值（在本例中为 3）？

感谢帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T08:15:45.850

您可以`maximum`在 ActiveRelation 上使用范围：

```
SkillUser.maximum(:rating) 
```

如果你想要一个名为`rating`.

* * *

如果要计算每个技能 ID 的用户数，请尝试：

```
SkillUser.count(:group => :skill_id).max_by { |skill_id,count| count } 
```

这将为您提供 Skill_id 和大多数用户的技能的用户数。

要获得更有效的方法（通过在 SQL 中进行整个计算），请尝试：

```
SkillUser.limit(1).reverse_order.count(:group => :skill_id, :order => :count)
# Giving the SQL:
# => SELECT COUNT(*) AS count_all, "skill_users"."skill_id" AS skill_id
#    FROM "skill_users" GROUP BY "skill_users"."skill_id"
#    ORDER BY "skill_users"."count" DESC LIMIT 1 
```

请注意，`count`必须最后调用它，因为它不会返回 ActiveRelation 以便您进一步确定查询范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:34:21.940

出于性能原因，您应该使用 ActiveRecord::Calculations [http://ar.rubyonrails.org/classes/ActiveRecord/Calculations/ClassMethods.html](http://ar.rubyonrails.org/classes/ActiveRecord/Calculations/ClassMethods.html)

```
1.9.3-194 (main):0 > User.maximum(:id)
   (1.6ms)  SELECT MAX("users"."id") AS max_id FROM "users" 
=> 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T07:40:49.817

1.  在未排序的整数列表中找到单个最大值的最快方法是从左到右扫描列表并记住迄今为止的最大值。
2.  如果您首先对列表进行排序，您还可以获得轻松找到第二、第三等最大值的额外好处。
3.  如果您采用隐藏在 ruby​​ 中的“最大”方法之一......您应该检查实施者正在做什么来选择最大值并将其与上面的 1\. 和 2\. 进行比较:-)

说明：

到 1\. 这样做，您只需选择列表中的每个值恰好一次，并将其与迄今为止的最大值进行比较一次。

到 2。如果您有一个包含 n 个条目的列表，则平均排序成本 O(n*log n) 操作。显然，这比解决方案 1 中的 O(n) 多，但你会得到更多

到 3\. 嗯.. 我更喜欢知道会发生什么，但您的偏好可能会有所不同

# jquery - 使用 :before 通过 Jquery

> ID：12259326
> 
> 赞同：3
> 
> 时间：2012-09-04T08:14:13.963
> 
> 标签：jquery

我有当前的问题：我通过 CSS 定义`div`元素 的当前角色

```
.divElement:before {
    background-image: url(../images/triangle.png);
    background-repeat: no-repeat;
    content: "";
    height: 20px;
    left: 62%;
    margin: 0 0 0 -50px;
    position: absolute;
    top: -20px;
    width: 100px;
}

.divElement{
    background: none repeat scroll 0 0 #FFF8D6;
    border-radius: 10px 10px 10px 10px;
    color: black;
    font: 1em/1.4 Cambria,Georgia,sans-serif;
    margin: 0px 500px 3em;    
    padding: 15px;
    position: relative;
    text-align: center;
} 
```

我使用 jQuery 动态创建了这个元素：`$('<div class="divElement"><p><strong></strong></p></div>').appendTo(....)`这可以正常工作。问题出现在使用 jQuery 时，我尝试动态更改`backgroung-image`和`top`之前的内容属性`divElement`（我在 CSS 中用 定义`:before`）

我尝试了类似的方法`background-image`，但不起作用：

```
$('.divElement:before').css('background-image', 'url(../images/triangle_reverse.png)'); 
```

我怎样才能做到这一点？谢谢大家！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:18:37.107

下面将搜索所有具有 class 的节点`.divElement`，获取出现*在*tem 之前的相应元素并更改其背景图像。这就是你想要完成的事情吗？

```
$('.divElement').prev().css('background-image', 'url(../images/triangle_reverse.png)'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:25:13.083

我认为你最好的解决方案是在这个 CSS 中保留样式（[如在这个答案中](https://stackoverflow.com/questions/5041494/manipulating-css-before-and-after-pseudo-elements-using-jquery)）并简单地使用`addClass`jQuery 中的函数。这是一个例子：

```
.divElement:before {
    background-image: url(../images/triangle.png);
}

.divElement.reverse:before {
    background-image: url(../images/triangle_reverse.png);
} 
```

然后在 jQuery 中，你需要添加这样的类`reverse`：

```
$('.divElement').addClass("reverse"); 
```

您甚至可以使用以下方法轻松地在开启和关闭状态之间切换：

```
$('.divElement').toggleClass("reverse"); 
```

# c# - 自定义异步/等待

> ID：12259327
> 
> 赞同：0
> 
> 时间：2012-09-04T08:14:17.773
> 
> 标签：c#

我正在尝试重写我曾经编写的异步 TCP 类，以实现新的 await/async 构造。

到目前为止我有

```
 public async void Send(byte[] data)
    {
        await SendAsync(data);
    }

    private Task SendAsync(byte[] data)
    {
        var stream = _tcpClient.GetStream();
        return new Task(()=>stream.Write(data, 0, data.Length));
    } 
```

但有些东西闻起来很奇怪。这是正确的做法吗？

**编辑：**
例如，我可以用

```
 public async void Send(byte[] data)
    {
        await SendAsync(data);
        var stream = _tcpClient.GetStream();
        await Task.Factory.StartNew(()=>stream.Write(data, 0, data.Length));
    } 
```

或使用 Task.Run(..)

哪个是首选？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T08:32:49.580

请改用[Stream.WriteAsync()](http://msdn.microsoft.com/en-us/library/system.io.stream.writeasync.aspx)方法，并将处理异步性的工作转移到基类库上。对于上面示例中未包含的代码，还有一个 ReadAsync。

# php - php嵌套对象函数调用不起作用？

> ID：12259329
> 
> 赞同：3
> 
> 时间：2012-09-04T08:14:30.360
> 
> 标签：php, oop, class, inner-classes, function-call

我有一个 PHP 类，它可以包含一个自己类型的数组，这个类还有一个函数`hatch()`，当我为其中一个数组项调用它时，它会给我一条消息，你不能调用该函数。我这样称呼它

```
$this->arrayLikeThis[$i]->hatch(); 
```

但是我创建了一个外部函数来孵化对象，但我喜欢这样称呼它。我知道我可以调用`var_dump()`类的任何函数是这样的：

```
object(web\ui\structure\tag)#1 (4) {
  ["name"]=>
  string(4) "meta"
  ["type"]=>
  int(1)
  ["attributes"]=>
  array(2) {
    [0]=>
    object(web\ui\structure\attribute)#2 (2) {
      ["attributeName"]=>
      string(7) "content"
      ["attributeValue"]=>
      string(24) "text/html; charset=utf-8"
    }
    [1]=>
    object(web\ui\structure\attribute)#3 (2) {
      ["attributeName"]=>
      string(10) "http-equiv"
      ["attributeValue"]=>
      string(12) "Content-Type"
    }
  }
  ["childNodes"]=>
  array(0) {
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:16:32.437

您没有指定实际对象，只是对象数组：

```
$this->arrayLikeThis[identifier]->hatch(); 
```

如果您的数组是数字，则where`identifier`是一个数字，或者是包含要调用其函数的对象的元素的名称。

我刚刚为您抢购了这个示例，以向您展示：

```
<?php  
    class arby
    {
        public $myID=0;
        public $ray=array();

        public function insertNew()
        {
            $this->ray[0] = new arby();
        }

        public function updateMe()
        {
            $this->myID='1';
        }

        public function displayMe()
        {
            echo $this->myID."\n";
        }

    }

    $var= new arby();
    $var->displayMe();
    $var->insertNew();
    $var->ray[0]->updateMe();
    $var->ray[0]->displayMe();

?> 
```

输出：

```
0
1 
```

这涵盖了一个可以在其中包含自身实例的类，将它们添加到数组中并从其中调用函数以及对象数组中的各个对象。

编辑：假设`hatch()`函数是`attribute`对象内的函数，这应该工作：

```
$varName->attributes[0]->hatch(); 
```

编辑：假设在我制作的第二个实例中还有*更多*实例，`arby`您可以像这样调用它们的函数：

```
$var->ray[0]->ray[1]->hatch(); 
```

这假设变量在数组元素中有另一个类的`$var`实例，`arby`而数组元素`0`又具有另一个数组，并且您这次要调用元素中的对象的函数`1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:30:10.303

Fluffeh 是对的，如果它实际上是对类的引用（我非常怀疑它是），你的代码应该可以正常工作。这是一个模拟您的类可能是什么样子的示例（使用相同的函数并在一个数组中）。

```
<?php
    class egg {
        private $identifier;
        private $eggChildren = array();
        public function __construct($identifier) {
            $this->identifier = $identifier;
        }
        public function createEgg($identifier) {
            $this->eggChildren[$identifier] = new egg($this->identifier . " - " . $identifier);
        }
        public function hatch() {
            echo "Just hatched egg with ID " . $this->identifier . "<br />";
        }
        public function hatchAllChildren() {
            foreach ($this->eggChildren as $childID => $eggChild) {
                $eggChild->hatch();
            }
        }
    }
    class eggs {
        private $arrayLikeThis;
        const COUNT_EGGS = 3;
        const COUNT_EGG_CHILDREN = 3;
        public function createEggs() {
            $this->arrayLikeThis = array();
            for ($i = 0; $i < self::COUNT_EGGS; $i++) {
                $this->arrayLikeThis[$i] = new egg($i);
                for ($j = 0; $j < self::COUNT_EGG_CHILDREN; $j++) { 
                    $this->arrayLikeThis[$i]->createEgg($j);
                }
            }
        }
        public function hatchEggs() {
            for ($i = 0; $i < self::COUNT_EGGS; $i++) {
                $this->arrayLikeThis[$i]->hatchAllChildren();
                $this->arrayLikeThis[$i]->hatch();
            }
        }
    }

    $eggController = new eggs();
    $eggController->createEggs();
    $eggController->hatchEggs();
?> 
```

这将输出

```
Just hatched egg with ID 0 - 0
Just hatched egg with ID 0 - 1
Just hatched egg with ID 0 - 2
Just hatched egg with ID 0
Just hatched egg with ID 1 - 0
Just hatched egg with ID 1 - 1
Just hatched egg with ID 1 - 2
Just hatched egg with ID 1
Just hatched egg with ID 2 - 0
Just hatched egg with ID 2 - 1
Just hatched egg with ID 2 - 2
Just hatched egg with ID 2 
```

# linux - CentOS 6.3 编译和ksig

> ID：12259330
> 
> 赞同：0
> 
> 时间：2012-09-04T08:14:35.053
> 
> 标签：linux, linux-kernel, centos, rhel

在编译 CentOS 6.3 内核时，make 失败并显示：

```
 CC      crypto/signature/dsa.o
crypto/signature/ksign-publickey.c:2:17: error: key.h: No such file or directory
crypto/signature/ksign-publickey.c: In function גksign_initג:
crypto/signature/ksign-publickey.c:10: error: גksign_def_public_keyג undeclared (first use in this function)
crypto/signature/ksign-publickey.c:10: error: (Each undeclared identifier is reported only once
crypto/signature/ksign-publickey.c:10: error: for each function it appears in.)
crypto/signature/ksign-publickey.c:11: error: גksign_def_public_key_sizeג undeclared (first use in this function)
make[2]: *** [crypto/signature/ksign-publickey.o] Error 1 
```

据此，它与[Linux 模块签名](http://lwn.net/Articles/222162/)（又名）有关，Linux 在 RHEL 6.1 中删除了该[模块签名。](http://jira.whamcloud.com/browse/LU-624)`KSIG`

我正在尝试查看[建议的解决方案](http://lwn.net/Articles/222162/)是否确实正确，或者是否有其他解决方案。

RHEL 放弃的参考资料`KSIG`会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-18T06:44:00.860

我也遇到了同样的错误，但它在 CentOS 6.4 中，包括 x86_64 和 i386 版本。

跑：

```
`make menuconfig` 
```

和：

*   选择`Enable loadable module support`，然后`Module signature verification (EXPERIMENTAL)`。禁用它。
*   然后返回主菜单，`Cryptographic API`然后选择`In-kernel signature checker (EXPERIMENTAL)`并禁用该菜单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T10:39:49.673

我不知道为什么在加密/签名中不存在 key.h！对于忽略错误，您不能选择：“加密 API”中的“内核签名检查器”和“启用可加载模块支持”中的“模块签名验证”。
我认为 centos 脚本在 ubuntu 中无法正确运行。

# bash - for循环多个扩展名并对每个文件做一些事情

> ID：12259331
> 
> 赞同：16
> 
> 时间：2012-09-04T08:14:42.787
> 
> 标签：bash

我正在尝试在 bash 中编写一个 for 循环来获取扩展名为 jpg、jpeg、png 的文件，这是我的尝试，但不起作用

```
for file in "${arg}"/*.{jpg,jpeg,png}; do echo ${arg}-something.jpg > z.txt ; done; 
```

基本上，我想在当前文件夹中获取具有这些扩展名的文件的名称，并对每个文件执行一些操作，然后使用新的扩展名输出文件名。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-04T08:17:46.457

您没有`$file`在任何地方使用。尝试

```
for file in "$arg"/*.{jpg,jpeg,png} ; do
    echo "$file" > z.txt
done 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-12-14T09:49:15.210

我想建议对提议的解决方案进行 2 项改进：

A. "$arg"/ *.{jpg,jpeg,png} 中的 for 文件也将产生 "$arg"/* .jpeg 如果没有带有 jpeg 扩展名的文件并且会产生脚本错误：

```
$ echo *.{jpg,jpeg,png}
myPhoto.jpg *.jpeg *.png 
```

为了避免这种情况，就在 for 循环之前，将 nullglob 设置为从列表中删除 null glob：

```
$ shopt -s nullglob # Sets nullglob
$ echo *.{jpg,jpeg,png}
myPhoto.jpg
$ shopt -u nullglob # Unsets nullglob 
```

B. 如果你还想搜索 *.png 或 *.PNG 或 *.PnG （即忽略大小写），那么你需要设置 nocaseglob：

```
$ shopt -s nullglob # Sets nullglob
$ shopt -s nocaseglob # Sets nocaseglob
$ echo *.{jpg,jpeg,png}
myPhoto.jpg myPhoto.PnG
$ shopt -u nocaseglob # Unsets nocaseglob
$ shopt -u nullglob # Unsets nullglob 
```

# css - IE浏览器中的输入标签padding-left问题

> ID：12259334
> 
> 赞同：1
> 
> 时间：2012-09-04T08:14:55.807
> 
> 标签：css, input

请看一下小提琴

[http://jsfiddle.net/URBfj/](http://jsfiddle.net/URBfj/)

我已经为输入标签提供了padding-left，现在当我在输入标签中滚动文本时，它的工作正常bt，即它不能正常工作。即不采用填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:26:24.090

请参阅完全相同问题的解决方法（尽管是右侧而不是左侧）[HTML：IE：输入文本框中的右填充](https://stackoverflow.com/questions/3765411/html-ie-right-padding-in-input-text-box)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T11:17:32.780

您可以为此元素使用 css 属性**text-indent ：**

例如：[_](http://jsfiddle.net/cp68N/1/)

```
<input style="text-indent:15px" name="" type="text" value="test testtesttesttesttesttest" /> 
```

# actionscript-3 - 字节数组到位图场景

> ID：12259336
> 
> 赞同：0
> 
> 时间：2012-09-04T08:14:57.780
> 
> 标签：actionscript-3

我只有一个字节数组，而不是位图。我正在使用下面的代码转换为位图，但我最终得到文件结束错误。

```
//rstream is the ByteArray I have
var bytes:ByteArray = rstream;
var rect:Rectangle = new Rectangle(0,0,myPuzzle.width - 20,myPuzzle.height - 20);
var newBmd:BitmapData = new BitmapData(rect.width,rect.height,true,0xFFFFFFFF);
bytes.position = 0;
newBmd.setPixels(rect, bytes);
var image:Bitmap = new Bitmap(newBmd); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:34:56.287

我通过使用加载器让它工作。

```
 var loader:Loader = new Loader();
    loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loading1);

    loader.loadBytes(rstream);
function loading1(e:Event):void
{
    var image:Bitmap = Bitmap(e.target.loader.content);

    myPuzzle.source = image;
} 
```

# c# - 两个日期之间的月差

> ID：12259343
> 
> 赞同：-3
> 
> 时间：2012-09-04T08:15:35.307
> 
> 标签：c#, datetime

大家好，我需要得到两个日期之间的差异，作为小数。

示例：2010 年 2 月 13 日和 2011 年 6 月 10 日之间的差值为 15.87 个月。

我将如何在 c# 中完成此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T08:25:52.963

如果您想要一个近似值，您可以执行以下操作：

```
var first = new DateTime(2010, 2, 13);
var second = new DateTime(2011, 6, 10);
var result = second.Subtract(first).Days / (365.25 / 12);

Console.Write(result); 
```

结果将是：

```
15,8357289527721 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T08:24:52.160

```
 public static int diffMonths(this DateTime startDate, DateTime endDate)
    {
            return (startDate.Year * 12 + startDate.Month + startDate.Day/System.DateTime.DaysInMonth(startDate.Year, startDate.Month))
                    - (endDate.Year * 12 + endDate.Month + endDate.Day/System.DateTime.DaysInMonth(endDate.Year, endDate.Month));
    } 
```

它使用[DaysInMonth](http://msdn.microsoft.com/en-en/library/system.datetime.daysinmonth%28v=vs.80%29.aspx)计算您在该月前进了多远，并减去 endDate - startDate

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-23T06:02:55.047

尝试这个：

```
string fmt = "yyyy-MM-dd";
DateTime first = DateTime.Today;

for (int i = 0; i < 45; i++)
{
    DateTime second = first.AddMonths(3).AddDays(i);

    int wholeMonths = ((second.Year - first.Year) * 12) + second.Month - first.Month;
    DateTime firstPlusWholeMonths = first.AddMonths(wholeMonths);

    double fractMonths;
    if (firstPlusWholeMonths == second) fractMonths = wholeMonths;
    else
    {
        double diff = second.Subtract(firstPlusWholeMonths).TotalDays;
        fractMonths = wholeMonths + (diff * 12 / 365.25);
    }

    Console.WriteLine("From {0} to {1} is {2} months.", first.ToString(fmt), second.ToString(fmt), fractMonths.ToString("0.00000000"));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T08:51:59.170

这对你有用。但是您需要确切的答案 15.87 个月您必须单独维护月份中天数的枚举 DateTime dt1 = new DateTime(2010, 02, 13); DateTime dt2 = new DateTime(2011,06,10);

```
 TimeSpan ts = dt2.Subtract(dt1);
       double days = (double)ts.TotalHours / (24);
       double months = days / 30.4; 
```

# java - 从手机号码中提取国家代码

> ID：12259347
> 
> 赞同：8
> 
> 时间：2012-09-04T08:15:46.487
> 
> 标签：java, android, contacts

我有一个带有国家代码的手机号码列表，例如“919638095998”号码。我也提到了[libphonenumber google 示例](http://code.google.com/p/libphonenumber/)，但首先我们需要传递国家/地区的 2 位数代码，我最初并不知道。那么我怎么知道这个号码来自哪个国家呢？

我也有一种解决方案，即手动从手机号码中逐位提取代码，然后与国家代码进行比较。但这是一项漫长的任务，也会给我带来糟糕的表现。任何人都可以提出适当的解决方案吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-03-23T17:49:49.933

[libphonenumber](https://github.com/googlei18n/libphonenumber)会为您执行此操作。您所要做的就是`+`在您的电话号码前添加符号并在解析电话号码时省略国家代码。

```
String numberStr = "+919638095998";
PhoneNumberUtil phoneUtil = PhoneNumberUtil.getInstance();
try {
    Phonenumber.PhoneNumber numberProto = phoneUtil.parse(numberStr, "");

    System.out.println("Country code: " + numberProto.getCountryCode());
    //This prints "Country code: 91"
} catch (NumberParseException e) {
    System.err.println("NumberParseException was thrown: " + e.toString());
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-04T08:36:48.457

维基百科上有一个国家代码可用的所有电话号码列表。是这里

[http://en.wikipedia.org/wiki/List_of_country_calling_codes](http://en.wikipedia.org/wiki/List_of_country_calling_codes)

我会创建两个哈希图。一个包含所有四位代码，一个包含两位和三位代码。

```
Hashmap fourdigitcodes;

//check if first digit is 7
if(firstdigit==7)
  //country definitely russia
else
   if country code begins with 1.
     Check the first four digits are in the hashmap with four digit codes and return the value 
     if no value is found then answer is certainly usa.
otherwise
     String country="";
     HashMap<String,String> ccode = new HashMap<String,String>();
     ccode.put("353","Ireland");//List all country codes
     ccode.put("49","Germany");
     String value = ccode.get("49");//See if I have a value for the first 2 digits
     if(value != null){
      country = value; //If I found a country for the first two digits we are done as the              first two digits of the country code consisting of two digits cannot be in a country code with 3
     }else{
      the country is certainly 3 digit. return the first three digits by entering the first 3 digits as the key of the hashmap countaining the first three digits. 
     } 
```

总之。如果第一个数字是 7 俄语。如果是 1，则在前四个数字的四位代码的哈希图中检查，如果找到四位代码，则返回相应的国家。如果没有回答是美国，否则检查包含 2 或 3 位数字的哈希图中的前两位。如果找到两个，则返回答案，否则肯定是一个三位数的代码，并从哈希中返回相应的国家/地区。

制作哈希图会很乏味，但我认为这是一个有效的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-21T05:39:01.360

```
The below code will extract the country code from any given phone number, the logic is implemented based on. https://en.wikipedia.org/wiki/List_of_country_calling_codes
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

    /**
     * @author swapna * This class will fetch the country code from the incoming
     *         phone number with format <+><CTRY CODE><Phone Number> based on the
     *         data from https://en.wikipedia.org/wiki/List_of_country_calling_codes
     *
     */
    public enum PhoneNumberNCtryCode {
        Instance;

        private List<Integer> forCtryCodePrefix1 = new ArrayList<Integer>();
        @SuppressWarnings("serial")
        List<Integer> forCtryCodePrefix2 = new ArrayList<Integer>() {
            {
                add(0);
                add(7);
                add(8);

            }
        };
        @SuppressWarnings("serial")
        private List<Integer> forCtryCodePrefix3 = new ArrayList<Integer>() {
            {
                add(0);
                add(1);
                add(2);
                add(3);
                add(4);
                add(6);
                add(9);
            }
        };
        @SuppressWarnings("serial")
        private List<Integer> forCtryCodePrefix4 = new ArrayList<Integer>() {
            {
                add(0);
                add(1);
                add(3);
                add(4);
                add(5);
                add(6);
                add(7);
                add(8);
                add(9);
            }
        };
        @SuppressWarnings("serial")
        private List<Integer> forCtryCodePrefix5 = new ArrayList<Integer>() {
            {
                add(1);
                add(2);
                add(3);
                add(4);
                add(5);
                add(6);
                add(7);
                add(8);
            }
        };
        @SuppressWarnings("serial")
        private List<Integer> forCtryCodePrefix6 = new ArrayList<Integer>() {
            {
                add(0);
                add(1);
                add(3);
                add(4);
                add(5);
                add(6);

            }
        };
        private List<Integer> forCtryCodePrefix7 = new ArrayList<Integer>();
        @SuppressWarnings("serial")
        private List<Integer> forCtryCodePrefix8 = new ArrayList<Integer>() {
            {
                add(1);
                add(3);
                add(4);
                add(6);
                add(9);

            }
        };
        @SuppressWarnings("serial")
        private List<Integer> forCtryCodePrefix9 = new ArrayList<Integer>() {
            {
                add(1);
                add(2);
                add(3);
                add(4);
                add(5);
                add(8);
            }
        };
        @SuppressWarnings("serial")
        private Map<Integer, List<Integer>> countryCodeMap = new HashMap<Integer, List<Integer>>() {
            {
                put(1, forCtryCodePrefix1);
                put(2, forCtryCodePrefix2);
                put(3, forCtryCodePrefix3);
                put(4, forCtryCodePrefix4);
                put(5, forCtryCodePrefix5);
                put(6, forCtryCodePrefix6);
                put(7, forCtryCodePrefix7);
                put(8, forCtryCodePrefix8);
                put(9, forCtryCodePrefix9);

            }
        };

        /**
         * This method parses the phone number using the prefix Ctry Map
         * 
         * @param phoneNumber
         * @return
         */
        public int getCtryCode(String phoneNumber) {
            String ctryCodeAtIndex1 = phoneNumber.substring(1, 2);
            Integer ctryCode = 0;
            String ctryCodeStr = "0";

            List<Integer> ctryCodeList =        countryCodeMap.get(Integer.valueOf(ctryCodeAtIndex1));
            if (ctryCodeList.isEmpty()) {
                ctryCode = Integer.valueOf(ctryCodeAtIndex1);
                return ctryCode.intValue();
            }
            String ctryCodeAtIndex2 = phoneNumber.substring(2, 3);
            for (Integer ctryCodePrefix : ctryCodeList) {
                if (Integer.valueOf(ctryCodeAtIndex2) == ctryCodePrefix) {
                    ctryCodeStr = phoneNumber.substring(1, 3);
                    ctryCode = Integer.valueOf(ctryCodeStr);
                    return ctryCode.intValue();

                }
            }
            ctryCodeStr = phoneNumber.substring(1, 4);
            ctryCode = Integer.valueOf(ctryCodeStr);
            return ctryCode.intValue();
        }

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-23T13:48:41.117

如果不晚

只是在寻找这个，我发现了一个由 Google 维护的 Java 和 Javascript 库；）

查看回购： [https ://github.com/googlei18n/libphonenumber](https://github.com/googlei18n/libphonenumber)

还有一个演示。

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T08:20:38.607

虽然使用静态数据结构可能被认为是不好的做法，但国家/地区代码变化不大，因此我认为将它们创建为一棵树并用这棵树解析数字应该是一个易于实施的解决方案。

您还可以将国家代码列表放在外部文件中，以便在不更改应用程序代码的情况下轻松更新它。

[维基百科在这里](http://en.wikipedia.org/wiki/List_of_country_calling_codes)有国家代码列表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T08:28:58.943

如果国家代码只有 2 位数字。将电话号码拆分为 2，第一个子字符串有 2 个数字，第二个子字符串有剩余的 10 个数字。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-04T08:30:00.033

只是从[wikipedia](http://en.wikipedia.org/wiki/List_of_mobile_phone_number_series_by_country)快速检查，我认为您需要从前面进行最大字符串搜索算法。发生冲突时，似乎不会出现，但如果以防万一，您可以检查位数 (NSN) 以查找国家/地区代码

一种优化的方法是创建存储桶。从[国家代码列表](http://en.wikipedia.org/wiki/List_of_country_calling_codes)。国家代码的最大长度是 4，（除非你想进入省份的精度，在这种情况下它将是 7，检查区域 6）。然后从 4、3、2、1 中检查是否存在。这将显着减少您的搜索算法时间。但是是的，数据量会更大。时空权衡的经典案例

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-04T08:30:28.133

如果您查看自己的链接，您可以找到[CountryCodeToRegionCodeMap 类](http://code.google.com/p/libphonenumber/source/browse/trunk/java/libphonenumber/src/com/google/i18n/phonenumbers/CountryCodeToRegionCodeMap.java)。它包含可能所有国家/地区代码的列表。您可以使用它来创建自己的代码来确定国家代码的长度为 1、2 或 3。我不敢相信这是互联网上唯一可以找到此类列表的地方。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-04T08:48:16.533

手机中的国家/地区代码有时以 +(plus)44、0044、44 开头，如上所述，某些国家/地区可能具有可变长度代码。所以最好的解决方案是从现在开始，我们知道手机号码的长度是 10。一旦你拿到这 10 位数字，你就可以相应地解析国家代码。

# drupal - 用户无法从具有 2 个域的另一个域登录 Drupal 站点

> ID：12259348
> 
> 赞同：0
> 
> 时间：2012-09-04T08:15:54.590
> 
> 标签：drupal, dns

我有 www.domain1.com 和 www.domain2.com 指向同一个 vHost drupal 站点。

www.domain1.com 是旧域，我们要重定向到新域 www.domain2.com。我正在使用 .htaccess 从 domain1.com 重定向到 domain2.com 并且它运行良好。

问题是用户无法登录到 domain2.com 但在 domain1.com 中没有任何问题。我已经检查了配置的“settings.php”文件。'$base_url' 和 '$cookie_domain' 都在评论中。我尝试为这两个变量提供如下设置，但仍然没有运气。

$base_url = 'http://www.domain2.com' $cookie_domain = '.domain2.com'

它似乎不接受 cookie。我尝试以这种格式“domain2.com”访问不带 www 的 url，它提示登录访问，当我尝试跳过错误时，它显示为以下标题

'**需要 401 授权**'。

> 需要授权
> 
> 此服务器无法验证您是否有权访问所请求的文档。您提供了错误的凭据（例如，密码错误），或者您的浏览器不了解如何提供所需的凭据。*

我已经被困在这很长一段时间了，非常感谢您的建议和回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:49:27.910

你确定你已经清除了菜单缓存，并且 drupal 站点知道它在新的 URL 上吗？

可能你实际上是在向 domain1.com 提交认证请求，被服务器拦截并重定向到 domain2.com

# qt - 图像中的“噪音”

> ID：12259351
> 
> 赞同：1
> 
> 时间：2012-09-04T08:15:59.547
> 
> 标签：qt, model-view

我使用 Qt 创建数据文件托管应用程序。我使用对话框模型视图 QTreeView 来显示树结构。在 Win# 上它工作正常。在 Linux 上，有时我会收到以下“噪音”：

[http://imageshack.us/photo/my-images/268/bugloader.jpg/](http://imageshack.us/photo/my-images/268/bugloader.jpg/)

仅当用户打开多个（超过 4 个）扩展级别时才会显示噪音。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:20:37.347

您必须在 linux 中重新编译您的 Qt 应用程序，然后运行它，但不能`.exe`由`wine`.

否则，您在 linux 中的视频卡有问题。

# java - Hadoop CompositeInputFormat 块矩阵向量乘法

> ID：12259353
> 
> 赞同：2
> 
> 时间：2012-09-04T08:16:05.553
> 
> 标签：java, hadoop, matrix-multiplication, pagerank

我正在尝试根据[http://i.stanford.edu/~ullman/mmds/ch5.pdf](http://i.stanford.edu/~ullman/mmds/ch5.pdf)第 162 页的示意图使用 Hadoop 实现块矩阵向量乘法算法。我的矩阵将是稀疏的，并且向量密集，这也正是 PageRank 所需要的。假定向量不适合内存。

我考虑可能实现的方式是使用 CompositeInputFormat 并基本上执行矩阵块与向量块的映射侧连接，并将中间结果块相加，这些中间结果块有助于组合器/减速器中的最终结果块。这种方法与一般地图侧连接之间的区别在于，我需要将矩阵的几个块与一个向量块连接起来。我知道 Hadoop 中关于拆分、排序等的 map-side join 的要求，在拆分方面，我会通过为每个相应命名的块创建一个文件来解决这个问题。对我来说，看起来我需要修改确定应加入哪些文件的代码，以便 Hadoop 不再希望加入来自两个具有相同名称的路径的文件，而是根据我定义的方案。然而，我不知道这是否是一种有效的方法以及这部分代码的位置。我查看了 Hadoop 源代码，但找不到它。

我知道我可以使用 reduce-side join 来做到这一点，但这里的效率至关重要，因为这种矩阵向量乘法需要大量执行。分布式缓存是不可能的，因为向量不适合内存。

有谁知道如何解决这个问题？

# android - 每 10 秒运行一次的 Android 服务

> ID：12259354
> 
> 赞同：0
> 
> 时间：2012-09-04T08:16:09.123
> 
> 标签：android

我有一个 android 应用程序，其中包含一个向用户显示信息的主要活动。当主要活动开始时，将创建一个服务，该服务每 10 秒检查一次 Web 服务 - 如果 WS 返回答案，则会弹出通知。主要活动和服务之间没有任何联系（除了我希望它们一起启动）。问题是活动的工作非常缓慢 - 因为服务正在运行。

我应该如何解决？我尝试使用 IntentService 但他在 10 秒后死亡。

我正在使用的代码：

```
@Override
public void onCreate() {    

super.onCreate();
context = this.getApplicationContext();
mPeriodicEventHandler = new Handler();
mPeriodicEventHandler.postDelayed(doPeriodicTask, PERIODIC_EVENT_TIMEOUT); 
}

private Runnable doPeriodicTask = new Runnable()
{
    public void run() 
    {
        NotificationServices.Notification();
        mPeriodicEventHandler.postDelayed(doPeriodicTask, PERIODIC_EVENT_TIMEOUT);
    }
 }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:21:25.087

您的 Handler 正在主 UI 线程中执行任务，这可能会影响您的 Activity 的 UI 甚至导致 ANR。

我会建议创建一个新的 HandlerThread 并在那里发布你的任务。

但是，请确保您确实希望每 10 秒提取一次数据。这对于移动互联网和设备功耗来说是昂贵的。

考虑使用[Persistent Connection](http://en.wikipedia.org/wiki/HTTP_persistent_connection)或[Google Cloud Messaging](http://developer.android.com/guide/google/gcm/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T04:10:24.597

[请参阅API Demos](http://developer.android.com/tools/samples/index.html)中的前台服务控制器示例，并在更新 web 服务时更新挂起事件。

还可以考虑使用[Asynctask](http://developer.android.com/reference/android/os/AsyncTask.html)。

我希望这有帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:18:39.500

我建议您使用 GCM 即 c2dm 而不是轮询，这是 c2dm 设计的场景......

作为参考，请检查这些链接，您肯定会喜欢使用它

[http://developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T08:35:14.393

使用 Handler 我们可以做到这一点

```
final Handler handler = new Handler();
        Runnable r = new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                handler.postDelayed(r, 10000);
            }
        };
        handler.postDelayed(r, 0); 
```

# .htaccess - 如何在 kohana 3.2 中将 url 重写为正确的 SEO url？

> ID：12259359
> 
> 赞同：0
> 
> 时间：2012-09-04T08:16:30.570
> 
> 标签：.htaccess, url, bootstrapping, kohana-3.2

我正在使用kohana3.2。我想将网址重写为正确的 SEO 网址。例如，我的网址现在是[http://samplesite.com/user/register/](http://samplesite.com/user/register/)。但我希望我的网址为[http://samplesite.com/register.html](http://samplesite.com/register.html)。

在 kohana 的 2.3.4 版本中，在路由文件 (application/config/routes.php) 中，我们将进行更改..

如何在 kohana 3.2 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T09:35:26.007

可能不是您正在寻找的答案，但 Kohana 已设置为使用漂亮的 url，因此如前所述，您正在尝试做的事情正在倒退，但您可以设置如下特定路线：

```
Route::set('seo', '<controller>/<action>.html')
    ->defaults(array(
        'controller' => 'page',
        'action'     => 'index'
    )); 
```

您仍然需要指定控制器和操作，但至少您可以在最后使用 .html。在这种情况下，您必须使用[http://domain.com/user/register.html](http://domain.com/user/register.html)。

如果你想每个 url 使用一个路由，你也可以使用：

```
Route::set('seo', 'register.html')
    ->defaults(array(
        'controller' => 'user',
        'action'     => 'register'
    )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T04:49:45.850

适当的搜索引擎优化？好像你走错了方向。

但是......如果你真的想这样做......在你的 bootstrap.php 中添加一个路由：

```
Route::set('funny_seo', '<action>.html')
    ->defaults(array(
          'controller' => 'user',
)); 
```

# jquery - html中的灯箱使用

> ID：12259363
> 
> 赞同：1
> 
> 时间：2012-09-04T08:16:43.697
> 
> 标签：jquery, html, lightbox, lightbox2

我用过灯箱，但我有一个问题。

这通常是灯箱结构：

```
<a href="images/image-1.jpg" rel="lightbox" title="my caption">image #1</a> 
```

但我的结构：

```
<a href="#" ><img src="images/product_1.jpg" rel="lightbox"width="220" height="208" /></a> 
```

因此，在打开弹出窗口`rel="lightbox"`后添加但不显示大图像时。`a href="#"`添加`img src`灯箱效果时不起作用。

我没有更改我的 html 结构，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:20:25.817

您可以使用以下

```
<a class="thumbnailhover" rel="lightbox" href="works1/images/index6.jpg">
  <img src="works1/thumbnails/index6.jpg" width="150" height="135"  border="0" /> 
</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:24:38.933

关于什么：

```
<a href="images/image-1.jpg" rel="lightbox" title="my caption" >
  <img src="images/product_1.jpg" width="220" height="208" />
</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:22:12.497

为什么不使用fancybox？它更小，更易于使用。它也通过示例得到了非常广泛的记录。

这是链接： http: [//fancybox.net/howto](http://fancybox.net/howto)

# c# - 通过 LINQ 创建匿名对象

> ID：12259365
> 
> 赞同：3
> 
> 时间：2012-09-04T08:16:49.063
> 
> 标签：c#, linq

我有一个对象：

```
public class Ticket
{
   public string EventName {get;set;}
   public string Count {get;set;}
   public string Price {get;set;}
   ... other properties;
} 
```

对于测试：

```
var tickets = new List<Ticket>();
tickets.Add(new Ticket {EventName = "Test", TicketCount = 1, Price = 100});
tickets.Add(new Ticket { EventName = "Test", TicketCount = 2, Price = 200 });
tickets.Add(new Ticket { EventName = "Test2", TicketCount = 1, Price = 50 }); 
```

我想获得具有以下属性的匿名对象：`EventName, TicketCount, Price` 并按事件名称“分组”。
对于上面的示例，结果必须是：
匿名对象必须包含两条记录：

```
EventName = Test, TicketCount = 3, Price = 300
EventName = Test2, TicketCount = 1, Price = 50 
```

我未完成的代码：

```
var groupedByEvent = tickets.GroupBy(t => t.EventName);
var obj = new {EventName = seatsByEvent.Select(t=>t.Key), TicketCount = seatsByEvent.Sum(???)} 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-04T08:20:16.913

```
var result = tickets.GroupBy(t => t.EventName)
                    .Select(g  => new { 
                             EventName = g.Key, 
                             TicketCount = g.Sum(t => t.TicketCount), 
                             Price = g.Sum(t => t.Price)
                    });

foreach(var x in result)
     Console.WriteLine("EventName = {0}, TicketCount = {1}, Price = {2}"
                       , x.EventName , x.TicketCount , x.Price); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T08:19:34.203

```
var groupedByEvent = tickets.GroupBy(t => t.EventName);

var obj = groupByEvent.Select(group => new {
   EventName = group._Key,
   TicketCount = group.Sum(x => x.TicketCount),
   Price = group.Sum(x => x.Price)
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-04T08:30:05.067

首先，您必须正确设置 POCO 类：

```
public class Ticket
{
  public string EventName {get;set;}
  public string Count {get;set;}
  public int Price {get;set;}
  public int TicketCount { get; set; }
} 
```

`Price`必须是和 int 并且也像`TicketCount`，这必然是总和。

然后 linq 查询将如下所示：

```
var events = tickets.GroupBy(t => t.EventName).Select(g => new 
{
  EventName = g.Key,
  TicketCount = g.Sum(t => t.TicketCount),
  Price = g.Sum(t => t.Price)
}); 
```

# c# - 如何使用 C# Web 应用程序更新 .mdb 文件？

> ID：12259366
> 
> 赞同：1
> 
> 时间：2012-09-04T08:16:55.460
> 
> 标签：c#, ms-access, web-applications, oledb, oledbdataadapter

我正在编写一个必须具有以下能力的应用程序：

*   应该在 Web 界面上看到 GUI（因此我使用的是 C# Web 应用程序）
*   能够选择 .mdb 文件
*   添加行
*   删除行
*   编辑行
*   将所有内容保存回 .mdb 文件。

我已经用谷歌搜索了很多年。

我在一个普通的 C# windows 窗体应用程序中编写了一个类似的应用程序，我使用 OLEdb 来做所有事情，它工作得很好，它不仅限于一个 .mdb 文件。

在 C# Windows 窗体应用程序中，我使用了 Gridview 控件。由于 Web 应用程序没有 Gridview，我使用了数据网格。

这是到目前为止的代码：

```
public partial class _Default : System.Web.UI.Page
{

    string databasePath = "____________.mdb";
    DataTable userTable = new DataTable();
    OleDbDataAdapter adapter;
    OleDbConnection connection;
    OleDbCommand command;
    OleDbCommandBuilder builder;
    DataSet ds;
    DataSet tempDs;
    public string DatabaseName = null;
    string connectionString = "Provider=Microsoft.Jet.OLEDB.4.0; Data Source=";

    protected void Page_Load(object sender, EventArgs e)
    {
        tbDatabasePath.Text = databasePath;
    }

    protected void btnLoadData_Click(object sender, EventArgs e)
    {
        ReadRecords();
    }

    protected void btnGetTables_Click(object sender, EventArgs e)
    {
        try
        {
            ddTables.Items.Clear();
            ddTables.Text = null;
            getTables();

        }
        catch (Exception ex)
        {
            ClientScript.RegisterStartupScript(this.GetType(), "myalert", "alert('Could not retrieve the Tables');", true);
        }
    }

    private void getTables()
    {

        string tempstring = "";
        string getTConnection = connectionString + databasePath; ;

        OleDbConnection myConnection = new OleDbConnection(getTConnection);

        myConnection.Open();

        DataTable datT = myConnection.GetSchema("Tables");

        for (int i = 0; i < datT.Rows.Count; i++)
        {
            tempstring = datT.Rows[i][2].ToString();

            if (tempstring.Contains("MSys"))
            {
            }
            else
            {
                ddTables.Items.Add(datT.Rows[i][2].ToString());
            }
        }
        myConnection.Close();
    }

    private void ReadRecords()
    {
        datagrid.DataSource = null;

        OleDbDataReader reader = null;

        try
        {
            connection = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0; " + "Data Source=" + databasePath);
            OleDbCommand cmd = new OleDbCommand("Select * FROM " + ddTables.Text, connection);
            adapter = new OleDbDataAdapter(cmd);
            builder = new OleDbCommandBuilder(adapter);
            ds = new DataSet("MainDataSet");
            tempDs = new DataSet("TempDataSet");

            connection.Open();
            adapter.Fill(tempDs);
            tempDs.Clear();
            tempDs.Dispose();
            adapter.Fill(ds, ddTables.Text);
            userTable = ds.Tables[ddTables.Text];

        }
        catch
        {
            ClientScript.RegisterStartupScript(this.GetType(), "myalert", "alert('Could not load the data');", true);
        }
        finally
        {
            if (reader != null) reader.Close();
            //if (connection != null) connection.Close();
            datagrid.ShowFooter = true;
        }
        CreateTempTable(0, 10);
        ClientScript.RegisterStartupScript(this.GetType(), "myalert", "alert('DONE');", true);

    }

    private void ReadRecords2()
    {
       // datagrid.DataSource = null;

        OleDbDataReader reader = null;

        try
        {
            connection = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0; " + "Data Source=" + databasePath);
            OleDbCommand cmd = new OleDbCommand("Select * FROM " + ddTables.Text, connection);
            adapter = new OleDbDataAdapter(cmd);
            builder = new OleDbCommandBuilder(adapter);
            ds = new DataSet("MainDataSet");
            tempDs = new DataSet("TempDataSet");

            connection.Open();
            adapter.Fill(tempDs);
            tempDs.Clear();
            tempDs.Dispose();
            adapter.Fill(ds, ddTables.Text);
            userTable = ds.Tables[ddTables.Text];

        }
        catch
        {
            ClientScript.RegisterStartupScript(this.GetType(), "myalert", "alert('Could not load the data');", true);
        }
        finally
        {
            if (reader != null) reader.Close();
            //if (connection != null) connection.Close();
        }
        CreateTempTable(0, 10);
        ClientScript.RegisterStartupScript(this.GetType(), "myalert", "alert('DONE');", true);

    }

    private void CreateTempTable(int startRecord, int noOfRecords)
    {
        try
        {
            userTable.Rows.Clear();
            adapter.Fill(ds, "");
            userTable = ds.Tables[""];
        }
        catch (Exception ex)
        {
            ClientScript.RegisterStartupScript(this.GetType(), "myalert", "alert('Could not load the data in  CreateTempTable');", true);
        }

        datagrid.DataSource = userTable.DefaultView;
        datagrid.DataBind();

    }

    protected void datagrid_RowEditing(object sender, GridViewEditEventArgs e)
    {
        datagrid.EditIndex = e.NewEditIndex;
        ReadRecords();

    }

    protected void datagrid_SelectedIndexChanged(object sender, EventArgs e)
    {

    }

    protected void datagrid_RowUpdated(object sender, GridViewUpdatedEventArgs e)
    {
        adapter.Update(userTable);
    }

    protected void datagrid_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {

        adapter.Update(userTable);
        ReadRecords();
    }

    protected void datagrid_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
    {

       datagrid.EditIndex = -1;
       ReadRecords();

    }

    protected void datagrid_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {
        int rowToDelete = e.RowIndex;
        datagrid.DeleteRow(rowToDelete);
        adapter.Update(userTable);
        ReadRecords();

    }
} 
```

}

它可以 ：

*   获取 .mdb 文件
*   获取文件中的表格并显示它
*   从选定的表中读取数据并在gridview中显示
*   添加编辑删除按钮

现在，当我单击编辑按钮时，它使选定的行可编辑。但是当我单击更新按钮时，我得到“对象引用未设置为对象的实例”。该代码在表单应用程序中工作..

有什么办法适配器.Update(userTable); 将能够像在表单应用程序中一样工作吗？

谁能帮我看看我的问题。如果我只能将更改保存回 .mdb 文件，我会非常高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:10:31.107

私有变量的行为在 Web 应用程序和 WinForms 中是不同的。简而言之：您应该`adapter`在方法中初始化变量（特别是 ）`Page_Load`。然后它将不为空，您可以使用它。

注意：您还需要存储在数据集中所做的更改...我建议您阅读更多关于它是如何工作的...例如您可以使用[Session](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)对象，或者更好的是，检查[ViewState](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

了解 ASP.NET 视图状态：http: [//msdn.microsoft.com/en-us/library/ms972976.aspx](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

IsPostBack：http: [//msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx)

# mysql - 我如何获得mysql中的最新组？

> ID：12259367
> 
> 赞同：1
> 
> 时间：2012-09-04T08:16:55.510
> 
> 标签：mysql

这是我编的一个虚拟测试（哎呀，我忘记了 id）。我想编写一个查询，它将返回每个组 id 中最高的 grp #。在这种情况下是最后两行，除非我删除最后一行。然后它将是最后一行和第二行。无论如何，我不知道如何编写不使用子查询的查询，并且有一段时间我忘记了如何编写子查询（这是一件好事，对吧？）

```
CREATE TABLE example ( gid INT, grp INT, data VARCHAR(100) );
--
mysql> select * from example;
+------+------+------+
| gid  | grp  | data |
+------+------+------+
|    1 |    1 | a    |
|    1 |    2 | a    |
|    2 |    1 | a    |
|    2 |    2 | a    |
|    1 |    5 | a    |
+------+------+------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:19:20.080

```
SELECT gid, MAX(grp) FROM example GROUP BY gid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T08:21:14.370

```
select gid,max(grp)as 'higest_grp' from example group by gid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:55:09.733

I believe this is the correct way to retrieve the correct `data` for each row.

```
SELECT `gid`, `grp`, `data` FROM `example` 
WHERE `grp` IN (SELECT MAX(t2.`grp`) FROM `example` t2 GROUP BY `gid`) 
GROUP BY `gid` 
```

# spring-mvc - 在spring mvc中查找/创建一个工具来生成java源(model/controller/dao)

> ID：12259372
> 
> 赞同：1
> 
> 时间：2012-09-04T08:17:30.063
> 
> 标签：spring-mvc, code-generation

我现在正在使用 spring mvc3，我发现我的大部分控制器都拥有相同的逻辑。例如：

后控制器：

```
package com.king.controller;

@Controller
@RequestMapping("/posts")
public class PostController {
    @Autowired
    private PostDao postDao;

    // GET /posts /posts.json
    @RequestMapping(value = { "" }, method = RequestMethod.GET)
    public String index(Model model) {
        model.addAttribute("posts", postDao.list());
        return "posts/index";
    }

    // GET /posts/1 GET /posts/1.json
    @RequestMapping(value = "/{id}", method = RequestMethod.GET)
    public String show(@PathVariable int id, Model model) {
        Post post = postDao.query(id);
        if (post != null) {
            model.addAttribute("post", post);
            return "posts/show";
        } else
            throw new RuntimeException("not found");

    }

    // GET /posts/new
    @RequestMapping(value = "/new", method = RequestMethod.GET)
    public String newForm(Model model) {
        model.addAttribute(new Post());
        return "posts/new";
    }

    // GET /posts/1/edit
    @RequestMapping(value = "/{id}/edit", method = RequestMethod.GET)
    public String edit(@PathVariable int id, Model model) {
        Post post = postDao.query(id);
        if (post != null) {
            model.addAttribute(post);
            return "posts/edit";
        } else
            throw new RuntimeException("not found");
    }

    // POST /posts /posts.json
    @RequestMapping(value = "", method = RequestMethod.POST)
    public String create(@Valid Post post, BindingResult result) {
        if (!result.hasErrors()) {
            postDao.add(post);
            return "redirect:/posts";
        } else {
            return "posts/new";
        }
    }

    // PUT /posts/1 /posts/1.json
    @RequestMapping(value = "/{id}", method = RequestMethod.PUT)
    public String update(@PathVariable int id, @Valid Post post, BindingResult result, RedirectAttributes redirectAttrs) {
        if (!result.hasErrors()) {
            post.setId(id);
            postDao.update(post);
            return "redirect:/posts/" + id;
        } else {
            return "posts/edit";
        }
    }

    // DELETE /posts/1 /posts/1.json
    @RequestMapping(value = "/{id}", method = RequestMethod.DELETE)
    public String destroy(@PathVariable int id, RedirectAttributes re) {
        Post p = new Post(id, "", "");
        postDao.delete(p);
        return "redirect:/posts";
    }
} 
```

如果我创建一个需要 curd 操作的新简单模型，我将不得不创建一个新控制器，一个手动复制粘贴的新 dao。

所以我想知道我是否可以找到或创建一个可以像 rails 一样生成控制器和 dao 等的工具？

有什么工具可以开箱即用吗？如果没有，我可以创建它，但是现在，我只是想如果我必须创建这种工具，我可能只是做一些字符替换，也就是说，为控制器和 dao 创建一个公共模板，然后替换一些东西因此，但我想知道如何处理包/导入/问题，以及哪种语言更好（java 或 ruby​​）？

顺便说一句，请不要为我推荐 play!framework。我不喜欢它。因为我只想使用spring mvc。所以该工具将只关注基于 Spring 3 的控制器和 dao。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-26T15:35:13.727

**Telosys** ( [http://www.telosys.org/](http://www.telosys.org/) ) 是专为此类工作设计的轻量级代码生成器。

它可以生成所有控制器、JSP、DAO 等（以及更多）。

原理很简单：为您定义的每个实体应用相同的模板。所有模板都是可定制的（基于 Velocity 模板引擎的“.vm”文件），因此您可以拥有您想要生成的内容（代码结构、注释等）

此外，Spring MVC 的模板包已经可用，您可以从 GitHub 安装它：[https ://github.com/telosys-templates-v3/java7-web-mvc-spring-T300](https://github.com/telosys-templates-v3/java7-web-mvc-spring-T300)

有关更多信息，请参阅本文[https://modeling-languages.com/telosys-tools-the-concept-of-lightweight-model-for-code-generation/](https://modeling-languages.com/telosys-tools-the-concept-of-lightweight-model-for-code-generation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:30:11.833

Grails 确实提供了这种开箱即用的功能，而我相信 Spring Roo 也会为您做到这一点。值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:31:39.550

也检查一下。

[http://www.myeclipseide.com/documentation/quickstarts/ME4STutorialScaffoldingMVC/scaffoldingarticle.html](http://www.myeclipseide.com/documentation/quickstarts/ME4STutorialScaffoldingMVC/scaffoldingarticle.html)

这将引导您生成一个可立即运行的 Spring MVC 应用程序，该应用程序实现了域模型的 CRUD 应用程序模式。

*免责声明：这是一个 30 天试用版*

# asp.net - 与标准 MVC3 视图语法相比，XSL 有什么好处？

> ID：12259383
> 
> 赞同：2
> 
> 时间：2012-09-04T08:18:01.047
> 
> 标签：asp.net, asp.net-mvc-3, xslt

我正在开发现有的 MVC3 应用程序。通常在处理 MVC3 项目时，我希望在视图 ( `.cshtml`) 中看到 HTML 和 MVC3 标记。

但是，使用此应用程序，每个视图仅调用`XSLTEngine.Raw()`. 查看这段代码，这是对 XSL 文件的调用，这些文件包含类似 XML 的语法，其中包含看似呈现为 HTML 的元素（可能是通过该`XSLTEngine.Raw()`方法）。

将此内容存储在 XSL 文件中而不是视图文件中的 HTML/MVC3 语法有什么好处？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T09:51:45.707

很难说。应用程序可能正在执行 XSLT 非常适合的工作（它是一种针对某些任务进行了优化的语言）；或者它可能正在重用 XSLT 中已经存在的代码；或者它可能是由具有 XSLT 技能但没有时间学习不同技术的人编写的；或者它可能是由对 XSLT 有宗教信仰的人编写的（许多程序员对特定的编程语言有宗教信仰，我的意思是他们根据审美标准而不是科学标准来选择它；XSLT 也不例外）。

这些答案与您对“为什么 X 用 L 写成？”形式的任何问题的答案非常相似。其中 X 是软件组件，L 是编程语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:32:25.220

如果这是使用 XML 作为数据源的旧应用程序的一个端口，那么为了转换为 MVC，最简单的方法是重用 XML 数据并使用 XSLT 对其进行转换。

老实说，移植这样的应用程序毫无意义*（*本质上，它是不同框架上的*同一个*应用程序），除非再也找不到熟悉旧技术的开发人员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T13:55:39.540

也许目的是为终端客户端平台/设备提供更广泛的支持？

尽管您可能没有使用习惯的传统 MVC 功能，但您仍然可以使用控制器 - 我认为这非常整洁，并且可以轻松处理（和组织）页面请求/响应。更不用说对参数映射的强大内置支持（以及可能的模型绑定，但不确定如何/是否可以与您的 XSL 一起使用）

刚刚快速浏览了[这个简短的演示文稿](http://www.slideshare.net/nikkimk/xslt-what-is-it-and-why-use-it-presentation)，它强调了 XSLT 优于 HTML 的一些主要优点 - 看看吧！

# html - Last.fm API jQuery

> ID：12259388
> 
> 赞同：1
> 
> 时间：2012-09-04T08:18:25.133
> 
> 标签：html, jquery, last.fm

目前我已经在我的网站[www.midnightlisteners.com](http://www.midnightlisteners.com/)上集成了 Last.fm API，但它会将所有 Last.fm 数据放在最后一个 Kanye West 上。如果您将鼠标悬停在 (i) 图标上，您将看到数据出现在工具提示中。

我想遍历所有并将它们添加到相应的位置。另外，如果有人也可以帮助我获得小型艺术家的图像，那就太好了。

我的jQuery代码：

```
$(document).ready(function() {
      // Find Related Artists based on Last.fm JSON Results
      $(".artist-data").each(function() {
          // Find the artist name in the "p" tag and save it
          artistName = $(this).find(".artist-wrap-mid p");
          artist = artistName.text();
          // Create a class out of the artist name made of lowercase letters and "-" instead of spaces
          artistClass = artist.toLowerCase().replace(/ /g, '-');
          // Add this class to the .artist-data div
          $(this).addClass(artistClass);

          // Check if a value is present
          if (artist === '') {
              $("." + artistClass + " .related").html("No related artist info found for " + artist);
          }
          // Otherwise return the request with links to each related artist
          else {
              $.getJSON("http://ws.audioscrobbler.com/2.0/?method=artist.getsimilar&artist=" + artist + "&api_key=9c991c10bf461ac4e4f92fdfa14c20c2&limit=3&format=json&callback=?", function(data) {
                  var html = '';
                  $.each(data.similarartists.artist, function(i, item) {
                      html += "<a href='http://" + item.url + "' target='_blank'>" + item.name + "</a>, ";
                  }); // End each
                  $("." + artistClass + " .related").append(html);
              }); // End getJSON     
          } // End Else
      }); 
}); 
```

我的 HTML 最好在我的网站上看到：[www.midnightlisteners.com](http://www.midnightlisteners.com/)

但它将 Last.fm 中的所有数据放入`<div class="related"> </div>`

我在这里得到了很多帮助：[writing.sackettsolutions.com/2012/02/navigating-the-last-fm-api-with-a-little-help-from-jquery-getjson](http://writing.sackettsolutions.com/2012/02/navigating-the-last-fm-api-with-a-little-help-from-jquery-getjson/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T08:33:57.563

这是一个普遍的问题。它是关于包含带有回调的异步调用的循环。循环将运行得非常快，并且会非常快地创建所有 $.getJSON() 调用。到回调运行时，循环已经完成，因此回调的闭包范围将仅包含对最后一个循环循环的数据的引用。

解决方案：松开循环...仅在前一个循环完成回调后开始下一个循环循环。因此，您不必运行固定的 .each() 循环，而是必须增加回调内的索引并“手动”开始下一个循环周期。

编辑2：您的代码应该是（未经测试！）

```
var currIndex = 0;
var $currArtists = $('.artist-data');

if($currArtists.length > 0) getNextArtistInfo();

function getNextArtistInfo() {
    // get reference to current artist
    var $currArtist = $currArtists.eq(currIndex);
    artistName = $currArtist.find(".artist-wrap-mid p");
    artist = artistName.text();
    // Create a class out of the artist name made of lowercase letters and "-" instead of spaces
    artistClass = artist.toLowerCase().replace(/ /g, '-');
    // Add this class to the .artist-data div
    $currArtist.addClass(artistClass);

    // Check if a value is present
    if (artist === '') {
          $("." + artistClass + " .related").html("No related artist info found for " + artist);
          currIndex++;
          if(currIndex < $currArtists.length)
              getNextArtistInfo();
    }
          // Otherwise return the request with links to each related artist
    else {
        $.getJSON("http://ws.audioscrobbler.com/2.0/?method=artist.getsimilar&artist=" + artist + "&api_key=9c991c10bf461ac4e4f92fdfa14c20c2&limit=3&format=json&callback=?", function(data) {
            var html = '';
            $.each(data.similarartists.artist, function(i, item) {
                html += "<a href='http://" + item.url + "' target='_blank'>" + item.name + "</a>, ";
            }); // End each
            $("." + artistClass + " .related").append(html);
            currIndex++;
            if(currIndex < $currArtists.length)
                getNextArtistInfo();
        });
    }
} 
```

# jpa-2.0 - 具有相同类类型而不是集合的有限数量字段的实体。可能吗？

> ID：12259389
> 
> 赞同：0
> 
> 时间：2012-09-04T08:18:26.427
> 
> 标签：jpa-2.0, eclipselink

假设你有一个类似下面的类：

```
public class Container {
Element topElement;
Element rightElement;
Element leftElement;
..... 
```

一个可能的 DB 映射是通过一个表 Containers 和另一个表 Elements 完成的，它们通过像 Container_ID 这样的外键链接。表 Elements 将具有由 Container_ID 组成的复合主键、数据库中 Container 对象的唯一标识符以及指示元素位置（顶部、左侧、右侧等）的标志。我使用 EclipseLink 作为 ORM 持久性提供程序，但我不是专家，所以我通常从数据库设计开始，让 Netbeans 使用向导从数据库构建我的实体。这样，在 Container 实体中，我将获得一个元素集合，而我希望拥有相同类型（元素）的不同字段（topElement、rightElement 等）。有没有办法实现这个目标？

谢谢菲利波

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:12:27.587

你有几个选择，

只需拥有 Collection 变量，但在您的类中提供返回适当元素的 get/set 方法。（可能是最好的解决方案）。

提供一个 get/set 方法来设置 Collection 并在内部设置字段。

使用 4 个单独的 OneToOne 关系而不是 OneToMany。您可以自定义映射以查询类型，或更改数据模型以匹配您的对象模型。

# c++ - 对 BOOST::ASIO 中的单个解析器使用不同查询对象的多个 async_resolve 调用是否正常？

> ID：12259392
> 
> 赞同：2
> 
> 时间：2012-09-04T08:18:34.557
> 
> 标签：c++, boost, boost-asio

我应该每个活动查询都有一个解析器，还是可以使用不同的查询对象多次调用 async_resolve ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:05:12.640

**不**`async_resolve`，在前一个查询仍处于活动状态时使用解析器并调用是不行的。[文档](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/ip__tcp/resolver.html)声明解析器的并发使用不是线程安全的

> *线程安全*
> 
> **不同的物体**：安全。
> 
> **共享对象**：不安全。

# android - Android 从单独的 XML 加载布局参数

> ID：12259401
> 
> 赞同：0
> 
> 时间：2012-09-04T08:18:42.130
> 
> 标签：android, xml, layout

我有一个 Android 应用程序，我想将一些通用视图属性（主要是宽度和高度）存储在一个单独的 XML 文件（values.xml）中。一个例子：

```
<Button
    android:id="@+id/button1"
    android:layout_width="@strings/genericbuttonwidth"
    android:layout_height="wrap_content"
    android:text="Button" /> 
```

`res/values/strings.xml`看起来像：

```
<resources>
    <string name="genericbuttonwidth">50dp</string>
</resources> 
```

Eclipse 图形布局查看器使宽度为 50dp，如 strings.xml 中给出的，但在 Android（物理）设备上运行时，它会引发异常：

`Caused by: java.lang.RuntimeException: Binary XML file line #174: You must supply a layout_width attribute.`

所以我想要做的事情并没有真正起作用（当我用 50dp 替换参考时，它工作得很好）。从单独的 XML 文件加载属性的任何方法或解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:24:46.570

保存在 res/values/dimens.xml 的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <dimen name="textview_height">25dp</dimen>
    <dimen name="textview_width">150dp</dimen>
    <dimen name="ball_radius">30dp</dimen>
    <dimen name="font_size">16sp</dimen>
</resources> 
```

此应用程序代码检索一个维度：Resources res = getResources(); float fontSize = res.getDimension(R.dimen.font_size); 此布局 XML 将维度应用于属性：

```
<TextView
    android:layout_height="@dimen/textview_height"
    android:layout_width="@dimen/textview_width"
    android:textSize="@dimen/font_size"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:20:18.180

使用`dimen`资源而不是`string`.

[http://developer.android.com/guide/topics/resources/more-resources.html#Dimension](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)

# javascript - 如何在弹出对话框本身内更改 jquery ui 对话框宽度？

> ID：12259419
> 
> 赞同：0
> 
> 时间：2012-09-04T08:19:47.487
> 
> 标签：javascript, jquery, asp.net, jquery-ui, jquery-dialog

在 ASP.Net 网页中，我创建了一个 div 和一个 iFrame 以在其中弹出另一个页面，我想要做的是从对话框本身内的按钮更改对话框宽度......

是否可以？谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:23:37.000

是的，要从 iframe 中选择 iframe 之外的内容，请使用以下命令：

```
 $("#WhateverIWantOutsideIframe", window.parent.document); 
```

因此，从 iframe 中，执行此操作

```
$('#InsideButton').on('click',function(){
   $("#DialogOutsideIframe", window.parent.document).width(9000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:30:49.450

```
var dlgContainer = $('#container');

dlgContainer.dialog({
.
.
open : function(){
    dlgContainer.find('#width-change-button').on('click' , function(){ 
        dialogBox.closest('.ui-dialog').css('width', '700px'); //or use .width()
    });
}); 
```

# android - 关于构建 web 应用 android 的问题

> ID：12259432
> 
> 赞同：1
> 
> 时间：2012-09-04T08:20:29.653
> 
> 标签：android, build, web

我正在尝试使用 webview 构建一个显示我的网站（由 blogfree 托管）的 android 应用程序（带有最新的 eclipse）；

这是我的问题：

*   如何实现加速度计（因此当屏幕横向移动时，应用程序会调整大小）？
*   我已经为互联网设置了权限，但是该应用程序只能通过 wifi 或 datamobile 访问它吗？
*   有没有办法使用重定向到网页的按钮（例如，一个名为 youtube 的按钮，当点击它时会显示我的 youtube 频道）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-20T11:36:11.963

1.  如果您不想更改应用方向模式，Android 应用会自动调整大小，您可以设置其方向。更多参考：[https ://developer.android.com/guide/practices/screen-compat-mode.html](https://developer.android.com/guide/practices/screen-compat-mode.html)

    ```
    <activity
        android:name=".Activities.ScreenSharing"
        android:screenOrientation="portrait" /> 
    ```

2.) 互联网许可适用于移动+wifi 数据。

3.) 是的，您可以使用按钮重定向到任何网页。创建一个按钮：

```
 Webview wv1;
   Button b= (Button)findViewById(R.id.button);
    b.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
          //call your web page

        wv1.getSettings().setLoadsImagesAutomatically(true);
        wv1.getSettings().setJavaScriptEnabled(true);
        wv1.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
        wv1.loadUrl(url);

        }
    }); 
```

# asp.net-mvc-3 - 使用jquery ui自动完成的更改事件时，选择项目后显示id，不应显示

> ID：12259434
> 
> 赞同：1
> 
> 时间：2012-09-04T08:20:31.480
> 
> 标签：asp.net-mvc-3, jquery-ui, jquery-ui-autocomplete

我使用**jquery ui 来自动完成文本框值**。

我创建了**数组并将 name 和 id 绑定到 auto-complete 的源**。最初我遇到的问题是如果用户没有从列表中选择，那么它应该对此采取一些措施。然后我搜索了上述问题，然后我知道了使用**ui auto-complete 的更改事件的**解决方案。但现在它导致了一个新问题，即**当我从列表中选择项目时，它会在文本框中显示 id ，而当我失去焦点时，它只会显示 name**。它不应该向我为隐藏字段设置的用户显示 id。

如何避免这种情况？

我使用了以下代码-

来自网页的代码是 -

```
<div class="editor-field">

          @if (Model.ReportsTo != null)
          {
               @Html.TextBox("ReportsTo_FullName", Model.ReportsTo.FullName)
          }
          else
          {
                @Html.TextBox("ReportsTo_FullName", String.Empty, new { @id = "ReportsTo_FullName" })
          }
            @Html.HiddenFor(model => model.ReportsToId, "ReportsToId")
            @Html.ValidationMessageFor(model => model.ReportsToId)

</div> 
```

来自脚本的代码 -

```
$(function () {
    $("#ReportsTo_FullName").autocomplete({
        source: function (request, response) {
            $.ajax({
                url: "/Employee/AutocompleteSuggestions",
                type: "POST",
                dataType: "json",
                data:
                    {
                        term: request.term,
                        moduleName: "Employee"
                    },
                success: function (data) {
                    response($.map(data, function (item) {
                        return { label: item.FullName, value: item.Id }
                    }
                    ))
                }
            })
        },
        minLength: 1,
        focus: function (event, ui) {
            $("#ReportsTo_FullName").val(ui.item.label);
            return false;
        },
        change: function (event, ui) {
            if (ui.item != null) {
                $("#ReportsTo_FullName").val(ui.item.label);
                $("#ReportsToId").val(ui.item.value);
                return false;
            }
            else {
                $("#ReportsTo_FullName").css("color", "red");
            }
        }
    });
}); 
```

# sharepoint - 视图工作流不活动 - 部署后？

> ID：12259436
> 
> 赞同：0
> 
> 时间：2012-09-04T08:20:42.307
> 
> 标签：sharepoint, deployment, sharepoint-2010, android-activity, workflow

我的工作流是通过 SharePoint 2010 中的以下脚本部署的：

```
# Set CurrentDirectory
$callingDir = Split-Path -Parent $MyInvocation.MyCommand.Path
[Environment]::CurrentDirectory = $callingDir

# Includes
$MainScriptName = "XXX.SharePoint.Powershell.YYY.ps1"
$MainScriptPath = Join-Path -Path $callingDir -ChildPath $MainScriptName

if (Test-Path $MainScriptPath)
{
    # use file from local folder
    . $MainScriptPath
}
else
{
    # use central file (via PATH-Variable)
    . $MainScriptName
}

Setup

$WebAppUrl = "NONE"

$SolutionPackageName = "Dataport.Survey.Webpart.wsp"
InstallSolution $SolutionPackageName $WebAppUrl

TearDown 
```

之后，工作流显示为“已部署”（提供了解决方案）。如果我想使用工作流程（例如在列表中），我不能这样做。在网站设置（在“工作流程”下）中，工作流程显示为非活动状态。但为什么？我可以做些什么来使用工作流？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:56:30.563

All the script you posted is doing is installing (deploying) a solution `InstallSolution $SolutionPackageName $WebAppUrl`. Also this is not standard Powershell and you only posted half the script.

Maybe you will need to activate some features after deploying the workflow.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:48:34.093

好的 - 现在问题已解决。我不小心在该功能上设置了“hidden=true”。如果我在该功能上设置“hidden = false”，则工作流程是可用的。

# html - 嵌套 ul 水平对齐

> ID：12259438
> 
> 赞同：0
> 
> 时间：2012-09-04T08:20:45.713
> 
> 标签：html, css, html-lists, nested-lists, alignment

这是我的网站： [http ://www.clouderize.it/michele/](http://www.clouderize.it/michele/)

我正在更改我的标题，我将对齐第二个栏并为第一个栏菜单（灰色按钮）提供相同的宽度（紫色背景）。

我已经明白该怎么做了。谁能帮我？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T08:24:16.040

给（或给`position: relative`也可以） 和给`#primary-nav-``div.nav-`
`width: 960px``.submenu`

产生的效果（通过萤火虫完成）是

![条形对齐](../Images/024b5115138619ba4a0cf32ed154381d.png)

# ios - 在 json-feed 中检查新数据的 Web 服务（？）？

> ID：12259441
> 
> 赞同：0
> 
> 时间：2012-09-04T08:20:52.467
> 
> 标签：ios, json, web-services, apple-push-notifications, parse-platform

我有一个我正在开发的 iPhone 应用程序，它从 json-feed 中获取数据并将其放入表格中。当应用程序加载或用户点击刷新按钮时会发生这种情况。但现在我已经开始尝试使用 parse.com 和推送通知并让它们工作，但我不确定如何使用它。我可以使用 php 请求通过解析向手机发送通知，我可能会弄清楚如何做到这一点，但是（这是我的问题）：

我将如何创建一个检查新项目/数据的 json-feed 的服务？我将使用什么语言来创建它，我需要什么服务器，我可以设置它，以便当它发现新的东西时，会通过 POST 请求发送推送通知？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:19:27.767

您始终可以使用 POST 请求进行通知。这正是 Parse 所说的，我引用了：

> 6.2\. REST API
> 
> 您可以使用 Parse REST API 通过发送 POST 请求将推送通知发送到任何通道。下面是一个包含消息“Hello World！”的广播通知示例。使用 curl 发送。有关所需格式的详细信息，请参阅 REST 文档。

```
curl -X POST \
  -H "X-Parse-Application-Id: ${APPLICATION_ID}" \
  -H "X-Parse-REST-API-Key: ${REST_API_KEY}" \
  -H "Content-Type: application/json" \
  -d '{ "channel": "",
        "type": "ios",
        "data": { "alert":"Hello World!" } }' \
  https://api.parse.com/1/push 
```

并且使用 Corn Job 来检查间隔可能是一个解决方案，但更好的解决方案是可靠并发送准时推送通知，而不是检查您的 json/feed 让每当您添加具有适当数据的新项目/数据时执行 POST 请求. （除非这部分不取决于您并且您正在使用其他的 json/feed？！）

顺便检查一下（如果你还没有的话）： [https ://parse.com/docs/push_guide/iOS](https://parse.com/docs/push_guide/iOS)

# objective-c - VB.Net 和 Objective-C 之间的 Julian Date

> ID：12259443
> 
> 赞同：0
> 
> 时间：2012-09-04T08:20:58.070
> 
> 标签：objective-c, vb.net

我想将日期转换为 VB.Net (1.1) 中的儒略日期并使用 Objective-C 将其重新生成为公历日期，并且可以反转（来自 Objective-C 的儒略日期和 VB.ne 中的公历日期）

# ipad - iPad 上的 HTML5 - 输入类型日期

> ID：12259444
> 
> 赞同：1
> 
> 时间：2012-09-04T08:21:07.377
> 
> 标签：ipad, html, date

我正在为 iPad 编写一个 HTML5（实际上是 PHP）的 WEB 应用程序。

我添加了一个日期输入，例如

```
<input type="date" id="start" name="start" min="2012-10-04" max="2012-11-05"> 
```

当我点击它时，日期选择器出现，但最小值和最大值似乎被忽略了。我可以选择任何我想要的日期，即使它超出了最小/最大日期。

如何根据需要限制日期选择器的范围？

我在标题中包含“modernizr-2.5.3-respond-1.1.0.min.js”。这两个冲突？

谢谢您的帮助。

# android - Android Window Flags：在整个应用程序本身的活动中设置的标志是否持续存在？

> ID：12259455
> 
> 赞同：2
> 
> 时间：2012-09-04T08:21:46.750
> 
> 标签：android, android-activity, flags

这是我的一项活动中的一个小代码。

```
Window window = this.getWindow();
window.setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
window.addFlags(LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

我已经将清单设置为允许使用 WAKE_LOCK 的权限。现在，我不确定的是在一项活动中设置的标志。

如果许多活动之一向窗口“添加”一个标志，例如屏幕保护程序标志，它们是否会在整个应用程序中持续存在？

我的预感是，如果某个活动要设置或添加一个标志，则该标志仅在标记的活动处于活动状态时才处于活动状态。如果它调用一个 Intent 来启动另一个活动（它没有指定标志），那么设置的标志将被取消，直到有意图的、未标记的活动完成，然后它可能会在标记的活动中恢复到其原始设置状态。

我错了吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T08:46:40.777

`Window`活动开始时始终重置 ( ) `onCreate`。您不会将标志添加到某些全局应用程序窗口状态。

您需要分别`Window`为每个设置`Activity`。

> 如果它调用一个 Intent 来启动另一个活动..

..调用`Activity`被破坏并`Activity`创建一个新的。新的有一个重置窗口，一旦你回到初始状态`Activity`，它就会再次重置窗口。但是您应该`onCreate`在可以`Window`再次设置的地方被调用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T09:01:10.493

有趣的问题最好通过实验来解决：

我只是通过编写一个带有两个活动的小应用程序来测试它，一个通过单击按钮打开另一个。我已将屏幕超时设置为 15 秒。

Activity1 在其方法中包含保持屏幕打开的命令`onCreate()`，而 Activity2 没有。现在，虽然 Activity1 可见，但屏幕并没有关闭（显然）。我打开 Activity2 15 秒后，它确实如此。所以你是对的，标志只有在显示活动时才有效。

有趣的是，您是否调用`finish()`Activity1 并不重要。即使 Activity1 没有被销毁（`onDestroy()`没有被调用，只是`onPause()`），该标志也将是无效的。

如果您返回第一个 Activity`onCreate()`实际上并没有在 Activity1 上再次调用，但 th Flag 再次有效（因为该 Activity 是从具有其先前功能的堆栈中恢复的）。

# javascript - facebook登录循环

> ID：12259457
> 
> 赞同：-1
> 
> 时间：2012-09-04T08:21:52.977
> 
> 标签：javascript, facebook

我在我的网站上使用 facebook javascript SDK 作为登录按钮，它工作正常，但我在两个用例中丢失了

1.  每当 facebook cookie 可用时，它就会从 index.php 重定向到 event.php 页面，即使我正在触发 FB.login() 函数点击事件。
2.  当用户单击我网站上的注销按钮时，我将其重定向到 index.php，加载 index.php 页面后，它再次重定向到 event.php 页面

这是我在 index.php 中的代码

```
<script src="//connect.facebook.net/en_US/all.js"></script>
<script>
FB.init({
  appId      : '375834632488230', // App ID
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
  xfbml      : true  // parse XFBML
});
// Additional initialization code here
FB.Event.subscribe('auth.login', function(response) { 
window.location="http://mysite.com/event.php";

});

function doLogin(){
console.log("clicked on fb");
FB.login(function(response) {
  if (response.session) {
  FB.api('/me?fields=email,location,name,first_name,last_name,picture',
   function (response) {       });
  }
} , {scope:'email'}); 
}

</script>
<a href="#" id="fblogin"  class="signinfacebook" onclick="doLogin()">Sign in with
Facebook</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:48:18.900

*回答我自己的问题*

删除此代码：

```
FB.Event.subscribe('auth.login', function(response) { 
    window.location="http://mysite.com/event.php";
}); 
```

这不应该在这种情况下使用。

然后在`FB.Login()`函数中包含这一行：

```
if(response.status=='connected'){
    window.location="http://mysite.com/event.php";
} else {
    console.log("login failed");
} 
```

我认为这应该可以正常工作

# android - 反编译一个android apk？

> ID：12259460
> 
> 赞同：22
> 
> 时间：2012-09-04T08:22:06.583
> 
> 标签：android

> **可能重复：**
> [Android：从 APK 文件中获取源代码](https://stackoverflow.com/questions/3593420/android-getting-source-code-from-an-apk-file)

有人可以反编译我的 android apk 文件并查看我的包中声明的公共变量或常量吗？

我定义为公共静态常量的共享密钥将被暴露...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T08:30:20.247

是的，可以反编译 apk 。

根据混淆级别，它可能需要一些时间，但一个专门/弯曲的人最终会反编译它。

您可以尝试以下工具

*   [APK工具](http://code.google.com/p/android-apktool/)

*   [斯马里](http://code.google.com/p/smali/)

*   [显示 Java Android 应用程序](https://play.google.com/store/apps/details?id=com.njlabs.showjava&hl=en)

> 来源： http: [//geeknizer.com/decompile-reverse-engineer-android-apk/](http://geeknizer.com/decompile-reverse-engineer-android-apk/)

**更新 1**

这里还有 2 个选项供您选择：

*   [反编译android.com](http://decompileandroid.com)

*   [javadecompilers.com/apk](http://javadecompilers.com/apk)

由[@AndrewRukin建议](https://stackoverflow.com/users/4125009/andrew-rukin)

**更新 2**

另一个工具：[jadx](https://github.com/skylot/jadx)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-04T08:40:59.293

当您对代码进行反混淆时（这里有一个视频教程可能会提供见解：[如何阅读混淆代码](http://www.youtube.com/watch?v=WB4mZ5f42Vg)），您将能够看到所有硬编码的值，例如

```
private String key = "Au8aujEWS(jol#9jSd9"; 
```

除了他们不会看到变量名：

```
private String a = "Au8aujEWS(jol#9jSd9"; 
```

* * *

通过使用[Sunny 提到](https://stackoverflow.com/a/12259586/1380710)的工具，您将能够使所有代码接近其原始状态。

我举个例子；如果您有以下原始代码：

```
public class MainActivity extends Activity { 
    private String key = "Au8aujEWS(jol#9jSd9";

    public void onCreate(Bundle savedInstance) {
        //Some code here
    }
}

public class OtherActivity extends Activity { ... } 
```

编译并反编译回java代码后，它看起来像这样：

```
public class A extends B {
    private String a = "Au8aujEWS(jol#9jSd9";

    public void a (C b) {
        //Some code here
    }
}
public class D extends B { ... } 
```

通过使用有根据的猜测和重构工具，您将能够对代码进行去混淆处理，因此只要有足够的奉献精神和努力工作，人们将能够看到您的所有代码。

* * *

我强烈建议不要让您的安全性完全取决于编码到客户端应用程序中的内容。当然，这取决于不让黑客有可能访问您试图保护的信息对您的情况有多重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:56:06.593

是的，Android APK 可以很容易地被反编译。即使代码被混淆，反编译时也可以看到公共变量、常量及其值。

当您混淆代码时，您的变量名称会被重命名。您的变量值保持不变。混淆与加密不同。因此，当您混淆您的代码时，您的代码不会被加密。

一个普通代码的例子：

```
String str = "This is a string."; 
```

混淆代码的示例：

```
String a = "This is a string."; 
```

如上所示，变量名从“str”重命名为“a”，但其值保持不变。混淆通过将变量名称重命名为短的非逻辑名称来使文件更小并使代码更难理解。

我所做的是混淆我的整个代码，然后加密我的密钥并在我的程序中的某个地方解密它。虽然我知道一个坚定而有耐心的黑客仍然可以破解我的密钥，但这会让他更难。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T09:05:12.917

是的，这是可能的，但并不是那么简单——必须有人真的有充分的理由去做。

根据您需要多少安全性，您可以在运行时构造您的密钥而不是将其保存到最终字符串中，从 Internet 下载它（但这种方式必须更好地保护，可能不值得）或让一些其他外部服务器代替您的应用程序完成工作 - 特别是如果您正在谈论付款和存储您的公钥 - 在这种情况下，密钥甚至不会嵌入到您的应用程序中。

另外，请记住使用提到的混淆工具（如 ProGuard）让黑客的生活更加艰难：http: [//developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html)。

# wcf - Silverlight 并发 WCF

> ID：12259466
> 
> 赞同：2
> 
> 时间：2012-09-04T08:22:31.853
> 
> 标签：wcf, silverlight, concurrency

我正在尝试研究另一个开发人员报告的问题。他声称，当我们创建的 Silverlight 应用程序通过并发调用严重访问 WCF Web 服务时，这些调用开始在服务器上堆叠。他声称我们正在使用会话，因为我们正在使用身份验证方法（使用表单和 sql 的 asp.net 成员资格）。所以我创建了一个非常简单的测试应用程序

![测试应用程序的屏幕截图](../Images/d2a88786f33ed2030030dc1f049335c6.png)

该应用程序允许我指定对所需 Web 服务的并发调用数，然后指示当前未完成的调用数和平均响应时间（以秒为单位）。

Web 服务本身简单地让线程休眠一秒钟

```
 public void DoWork()
    {
        Thread.Sleep(1000);
    } 
```

所以我想会发生的是，如果我的同事是对的，那么调用将在服务器上堆积，因此如果有两个并发调用，平均响应将是 2 秒。然而，似乎发生的情况是，在我达到七个并发请求之前，时间保持在略高于一秒，然后它开始相对可预测地增加。

运行第二个客户端（在初始 IE 窗口旁边的 Chrome 窗口中）似乎不会影响性能（有初始打嗝）。如果您并排运行两个 IE 或两个 Chrome，则情况并非如此，那么两者似乎会相互影响，表明它们正在共享连接。

似乎提琴手也在干扰。我在没有 fiddler 的情况下运行了应用程序，有 7 个并发调用，平均每次调用大约 1.15 秒。然后我开始提琴手，时间又回到了一秒钟多一点，就好像提琴手允许额外的电话通过。

所以我的问题。这里发生了什么？节流（6 个并发请求）发生在哪里（客户端或服务器）？为什么运行提琴手会加快请求速度？

一些额外的信息。

Web 服务类有几个属性

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)]
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Single, InstanceContextMode = InstanceContextMode.PerSession)]
public class DoVeryLittle : IDoVeryLittle
{
    public void DoWork()
    {
    }
} 
```

AspNetCompatibilityRequirements 旨在允许与 asp.net 管道和身份验证集成。ServiceBehavour 的 ConcurrencyMode 和 InstanceContextMode 显然是为每个会话创建和实例化的。但是，我们使用 basicHttpBinding 作为端点，我已经看到它不支持会话，所以我对此有点困惑。

为了完整起见，这里是 web.config 中与服务相关的条目

```
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior name="">
              <serviceMetadata httpGetEnabled="true" />
              <serviceDebug includeExceptionDetailInFaults="true" />
              <serviceAuthorization principalPermissionMode="UseAspNetRoles" roleProviderName="AspNetSqlRoleProvider" />
            </behavior>
        </serviceBehaviors>
    </behaviors>
  <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:58:35.773

6 个并发连接限制听起来像是 IE 强制执行的最大值。

您没有指定您的 IE 版本，但这里是 IE8 的参考，包括更改限制的说明：[Windows Internet Explorer 8 中的连接增强](http://msdn.microsoft.com/en-us/library/cc304129%28v=vs.85%29.aspx)

我会尝试玩这个限制，看看它是否会影响你的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T10:14:46.300

好的，在一些帮助下，我找到了我需要的解释。

*   为什么我的同事遇到并发 WCF 调用的问题？

好吧，他可能不是。在我的测试期间，我需要将服务的属性更改为以下内容才能重现问题。

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Single, InstanceContextMode = InstanceContextMode.Single)] 
```

这会强制创建服务的单个实例，然后堆叠并发调用。原来我有attibutes

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Single, InstanceContextMode = InstanceContextMode.PerSession)] 
```

这将为每个新会话专门创建一个新服务。但是我还发现每个调用都获得了一个新会话，这是因为我们使用的是不支持会话的 BasicHttpBinding。

*   为什么有 6 个并发呼叫的限制？

正如鲍里斯所提到的，这很可能是浏览器的限制，然后是我们使用的客户端堆栈。尽管我没有设法更改设置以查看这是否有所不同，但数字 6 在这两种情况下始终出现是完全合理的。

*   为什么提琴手会改变这个？

我对此真的没有确定的想法，并欢迎其他任何人的意见。

# php - 在 PHP 中更改密码问题

> ID：12259478
> 
> 赞同：0
> 
> 时间：2012-09-04T08:23:33.577
> 
> 标签：php, passwords

我正在我的 android 应用程序中实现密码更改功能，并在我的 php 文件中编码了密码哈希。用户可以更改密码，密码存储在数据库中。当我尝试使用电子邮件和新密码登录时，它告诉我密码错误。我在哪里为我的 php 文件做错了？

这是我的 php 文件代码：

```
<?php

// array for JSON response
$response = array();

function hashSSHA($newpassword) {
    $salt = mhash('sha512', rand());
    $salt = substr($salt, 0, 15);
    $encrypted = hash('sha512', $newpassword . $salt, true) . $salt;
    $hash = array("salt" => $salt, "encrypted" => $encrypted);
    return $hash;
}

// check for required fields
if (isset($_POST['email']) && isset($_POST['newpassword'])) {
    $email = $_POST['email'];
    $newpassword = $_POST['newpassword'];

    // include db connect class
    require_once __DIR__ . '/db_connect.php';

    // connecting to db
    $db = new DB_CONNECT();

    // TESTING HERE FOR STORING NEW PASSWORD INTO DATABASE
    $hash = hashSSHA($newpassword);
    $encrypted_password = $hash["encrypted"]; // encrypted password
    $salt = $hash["salt"]; // salt

    $result = mysql_query("UPDATE users SET encrypted_password = '$encrypted_password', salt = '$salt' WHERE email = '$email'");

    // check if row inserted or not
    if ($result) {
        // successfully updated
        $response["success"] = 1;
        $response["message"] = "Password successfully changed";

        // echoing JSON response
        echo json_encode($response);
    } else {
        $response["success"] = 0;
        $response["message"] = "Password change failed";
        echo json_encode($response);
    }
} else {
    // required field is missing
    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";

    // echoing JSON response
    echo json_encode($response);
}
?> 
```

**编辑** 这是我的解密功能

```
// DECRYPTING user currentpassword
function checkhashSSHA($salt, $currentpassword) {

$hash = hash('sha512', $currentpassword . $salt, true) . $salt;
return $hash;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:08:15.093

你的代码有很多问题。

首先，SHA512 不是哈希密码的好选择，因为它太快了。**Bcrypt**是专门为散列密码而设计的，因此速度很慢（需要计算时间）。建议使用完善的库，如[phpass](http://www.openwall.com/phpass/)，如果您想了解如何实现它，可以阅读这篇[文章](http://www.martinstoeckli.ch/php/php.html#ssl_bcrypt)，我试图解释最重要的点。

1）您的代码中的第一个问题可能是`mhash()`为您的盐生成二进制输出。我不知道你为什么将它附加到你的密码哈希中（这不是应该应用盐的方式），但该变量`$encrypted`之后将包含二进制数据。

2）这导致了第二个问题，您将变量插入到更新语句中。将二进制数据插入 sql 会导致语句无效。在将数据添加到 sql 语句之前，您应该始终转义数据，在您的情况下使用`mysql_escape_string()`.

3) 下一个问题是，不推荐使用 mysql_* 函数，而是使用 mysqli 或 PDO 进行数据库访问。

4) 我们在问题 2 中已经遇到的另一个问题是，如果不转义您的数据，您很容易受到 SQL 注入攻击。想象一下有人可以用这个用户输入做什么......

WHERE 电子邮件 = ' **`abc' OR email <> '`**'

...他可以一次重置所有用户的密码！

也就是说，我真的建议您重新考虑使用 Bcrypt。

# java - Apache CXF 方法中使用的时间单位

> ID：12259482
> 
> 赞同：5
> 
> 时间：2012-09-04T08:23:48.450
> 
> 标签：java, time, timeout, cxf

在 Apache CXF`HTTPClientPolicy.setConnectionTimeout()`和`HTTPClientPolicy.setReceiveTimeout()`方法中，参数是以秒还是毫秒为单位？这似乎微不足道，但我无法在任何地方找到答案，从 javadoc 开始......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T08:48:45.017

据我所知，所有 Web 服务超时都以毫秒为单位进行配置，我没有看到任何地方可以以秒为单位配置超时。在您的情况下，有以下文档`XSD`：

```
{http://cxf.apache.org/transports/http/configuration}HTTPClientPolicy 
```

> `ConnectionTimeout:` 指定消费者在超时之前尝试建立连接的时间量（以毫秒为单位）。0 是无限的。

[这里](http://fusesource.com/docs/framework/2.4/xmlref/http.cxf.apache.org.tr2140572444/types/httpclientpolicy.html#attr_ConnectionTimeout)指的是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:48:48.490

好的，我终于找到了。这些方法以毫秒为单位取值。我在这里找到了答案：

[http://lhein.blogspot.fr/2008/09/apache-cxf-and-time-outs.html?showComment=1328760737362#c5269809084998987761](http://lhein.blogspot.fr/2008/09/apache-cxf-and-time-outs.html?showComment=1328760737362#c5269809084998987761)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-25T11:02:03.677

唯一的提示是它`long`在 Java 中使用 which 通常以毫秒为单位，但显然该单元没有在任何地方记录。

该方法`setConnectionTimeout`应该已经命名`setConnectionTimeoutMillis`，并且 JavaDoc 应该在某处提到了这一点。每当涉及一个**单元**时，开发人员都应该这样做。

也许Java应该有某种类型的`Long<MilliSeconds>`数字，编译器会拒绝错误“单位”的数字:)

# grep - grep (BSD grep) 2.5.1-FreeBSD on mac os 10.8 行正则表达式模式不适用于重叠模式

> ID：12259484
> 
> 赞同：7
> 
> 时间：2012-09-04T08:23:59.260
> 
> 标签：grep, osx-mountain-lion

mac os 10.8 下的 grep 库存版本（版本信息：grep (BSD grep) 2.5.1-FreeBSD）在以行正则表达式模式 (-x) 运行时似乎存在共享公共前缀的模式问题。在下面的最小示例中，我希望 grep 报告“test”和“test2”，但只报告“test”。（同样适用于单词正则表达式模式 (-w)）。

```
printf "test\ntest2\n" > f1.txt
printf "test\ntest2\n" > f2.txt
grep -x -F -f f1.txt f2.txt 
```

有没有其他人做过类似的观察，甚至知道解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T23:24:33.960

Verified; this does look like a bug in Apple and/or FreeBSD grep. (This is completely unsurprising to me; FreeBSD grep is a standards-hating pile of poo. My employer installs GNU grep on all our Mac systems rather than put up with FreeBSD's wacky behavior. And yes, GNU grep finds both lines in your example.)

If portability between Mac and Linux is an objective, I strongly recommend abandoning `grep` altogether and just using `perl` (or something like `ack`, which depends on `perl`).

@akostadinov's suggestion to put longer patterns before shorter ones in f2.txt does seem to work around the bug, but I would be leery of *relying* on something like that. It works on this toy example, but does it work in general, and how expensive will it be when you find out?

# apache - SVN 会话问题

> ID：12259486
> 
> 赞同：3
> 
> 时间：2012-09-04T08:24:10.203
> 
> 标签：apache, svn, configuration, login, settings

我是设置和使用 svn 服务器的新手，在使用服务器时遇到了一个奇怪的问题。

我使用本指南进行设置：

[http://noobcode.blogspot.com/2010/03/what-is-subversion-as-quoted-by.html](http://noobcode.blogspot.com/2010/03/what-is-subversion-as-quoted-by.html)

问题是：

我在指南中创建了一个用户，还创建了第二个用户。

我尝试使用后来创建的用户访问 repo，但对于第一个用户，我无法登录。（但是当我更新第一个密码时，我可以和他一起登录，但之后第二个的登录不起作用......）：S

有人可以查看指南，并给我一些更改 svn 服务器设置的建议吗？）

*我的配置是：Apache 2.4.2 + Subversion 1.7.6。*

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T19:00:06.293

常见的错误。带有“-c”选项的 htpasswd 创建密码文件，同时添加用户帐户。如果您对其他帐户使用“-c”，它会创建一个新文件——用第一个用户清除原始文件。创建密码文件后，不要对其他帐户使用“-c”选项。然后将这些帐户添加到密码文件的末尾。

# powershell - Powershell脚本 - 如何捕获被调用的子进程退出代码

> ID：12259487
> 
> 赞同：2
> 
> 时间：2012-09-04T08:24:10.823
> 
> 标签：powershell

我正在尝试编写一个调用 .ftp 文件（[www.scriptftp.com](http://www.scriptftp.com/)）的 powershell 脚本。当 Powershell 调用用于将 zip 文件上传到 ftp 服务器的 .ftp 脚本文件时

这是我的`upload.ftp`文件代码

```
OPENHOST("www.abcd.in","sdfdsfs","pwd")
CHDIR("/dirctory/from/user/")

$result=PUTFILE("D:\MyZipTest.zip")

IF($result!="OK")
    PRINT("ERROR in GetFile, exiting")
    # Exit with error code 1
    EXIT(1)
ELSE
    EXIT()
    PRINT("File uploaded successfuly")
END IF

CLOSEHOST 
```

在上面的代码中，我返回`EXIT(1)`或`EXIT(0)`调用方法，即 powershell 脚本文件

我的powershell脚本文件代码：

```
Invoke-Item "D:\USER\Raj\BLACKswastik DEV\FTPScript\Upload1.ftp"

Start-Sleep -Second 15

echo $lastexitcode

echo $? 
```

在这里，我想获取由 .ftp 文件脚本返回的退出代码，因此我使用它们`$lastexitcode`，`$?`但它们都没有向我显示正确的结果。是否有任何其他方法来获取子进程的退出代码，请建议我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T14:50:59.570

尝试使用`Start-Process`. 您可以取回一个`Process`对象，您可以稍后查询退出代码，例如：

```
$ftpPath = "D:\USER\Raj\BLACKswastik DEV\FTPScript\Upload1.ftp"
$p = Start-Process <path_to_scriptftp.exe> -Wait -PassThru -ArgumentList $ftpPath
$p.ExitCode 
```

使用 Invoke-Expression（或直接启动 exe）的问题在于，您正在启动 Windows 子系统 EXE，并且与控制台子系统 exe 不同，Invoke-Expression 将在 exe 启动后（以及退出之前）立即返回。Invoke-Item 也会在 Windows EXE 退出之前返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:01:01.343

采用

```
Invoke-Expression -Command "D:\User\...\Upload1.ftp" 
```

代替

```
Invoke-Item "D:\User\...\Upload1.ftp" 
```

# uipickerview - datePickerValueChanged 文档位置？

> ID：12259496
> 
> 赞同：0
> 
> 时间：2012-09-04T08:24:47.113
> 
> 标签：uipickerview, uidatepicker

我有一个使用 - datePickerValueChanged 方法的代码示例。鉴于我在 TableViewController 的 .h 文件中找不到该方法，我假设这必须是 UIDatePicker 类中被覆盖的方法。那会是正确的吗？如果是这样，我在哪里可以找到这种方法的文档？我查看了 developer.apple.com 网站上的 iPhone 开发者文档，搜索结果一无所获。我在 UIDatePicker 文档中也看不到它。

我问的主要原因是我想找到类似的方法来覆盖 UIPickerView 对象。

我没有为此使用 XIB/Interface Builder - UIDatePicker 是在运行时以编程方式创建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:21:02.507

您必须向日期选择器的“valueChanged”事件添加一个方法：

```
[datePicker addTarget:self action:@selector(changeMyDate:) forControlEvents:UIControlEventEditingChanged]; 
```

假设您的方法被调用`changeMyDate:`

# c++ - 如何在不使用 math.h 库的情况下创建幂函数

> ID：12259498
> 
> 赞同：-3
> 
> 时间：2012-09-04T08:24:55.773
> 
> 标签：c++

这个很难，因为我在互联网上找不到。请编写一个不使用 C++ 中的 math.h 库的程序，在该程序中，您将显示从 1 到用户输入范围的所有 armstrong 数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:32:34.060

不会给你完整的代码 - 使用随后的乘法来找到权力。其余的应该是直截了当的。

这里有一些代码，如果这是家庭作业，你不能使用，因为它会给你带来麻烦：

```
bool isArmstrongNumber(int x)
{
   //some magic happens here
}

template<int x>
struct armstrong_number
{
    armstrong_number()
    {
        if ( isArmstrongNumber(x) )
            std::cout << x << endl;
        armstrong_number<x-1> y;
    }
};

template<>
struct armstrong_number<0>
{
    armstrong_number()
    {
        std::cout << 0 << endl;
    }
};

int main()
{
    armstrong_number<999> x;
} 
```

# c# - C#中的“公共无效”函数

> ID：12259502
> 
> 赞同：1
> 
> 时间：2012-09-04T08:25:08.247
> 
> 标签：c#, function, public, void

谁能告诉我为什么当我尝试声明和使用“public void”函数时，它给了我错误：

```
 Expected class, delegate, enum, interface, or struct 
```

我一开始就声明了它并正确设置了它，它不会调用我的主体。我已经研究过了，这似乎是可行的。

编辑：

```
 public void receipt();

 namespace ConsoleApp
 {
      class Progam
      {
           static ... Main()
           {
                ...
           }
      }
 }

 public void receipt()
 {
      ...
 } 
```

所以它需要在“类程序”大括号中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T08:26:07.433

您必须声明包含在类或结构中的方法，因为方法不是根成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:26:29.267

我假设您正在尝试声明一个不包含类（或结构）主体的函数。请注意，在 C# 中，每个方法都必须在类中声明。

请注意，如果您不想创建一个能够调用该方法的对象，您可以将其声明为“静态”，如下所示：

```
 public class MyClass
{
public static void MyMethod()
{
    Console.WriteLine("Hello World from static method");
}
} 
```

您可以轻松使用：

```
MyClass.MyMethod(); 
```

* * *

在你的情况下：

公共无效收据（）；// C#中没有前向声明

命名空间 ConsoleApp { 类程序 { 静态 ... Main() { ... } } }

public void receipt() // 这需要在类中声明 { ... }

工作 C# 代码是：

```
 namespace ConsoleApp
 {
      class Progam
      {
           static ... Main()
           {
                Program program = new Program();
                program.receipt();
                // or static method
                Program.receipt_static(); 

           }
           public static void receipt_static()
           {
            ...
           }
      }

   public void receipt()
  { ... }
 }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T09:58:22.610

放入`public void receipt()`一个类（在 Program 或一个新类中）并删除`public void receipt();`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T08:27:07.787

从错误看来，您似乎缺少类声明。

你确定你有这样的东西：

```
public class Foo
{
     public void Bar()
     {
          ...
     }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-25T05:11:00.253

```
 private void btnBrowse_Click(object sender, EventArgs e)
    {
        try
        {
            // Create an instance of the open file dialog box.
            OpenFileDialog fld = new OpenFileDialog();

            // Set filter options and filter index.
            fld.Filter = "CSV Files (.CSV) |*.csv*";
            fld.FilterIndex = 1;

            fld.Multiselect = false;

            // Call the ShowDialog method to show the dialog box.
            if (fld.ShowDialog() == DialogResult.OK)
            {
                txtBrowse.Text = fld.FileName;
            }
            fld = null;
        }
        catch (Exception ex)
        {

            MessageBox.Show(ex.Message.ToString(), "CSV Browse", MessageBoxButtons.OK, MessageBoxIcon.Error); 
        }

    }

    private void btnReadCSV_Click(object sender, EventArgs e)
    {
        try
        {
            DataTable dt = GetDataTableFromCsv(txtBrowse.Text, chkHasHeader.Checked);
            grvData.DataSource = dt;
        }
        catch (Exception ex)
        {

            MessageBox.Show(ex.Message.ToString(), "CSV Read", MessageBoxButtons.OK, MessageBoxIcon.Error); 
        }

    }

    static DataTable GetDataTableFromCsv(string path, bool isFirstRowHeader)
    {
        string header = isFirstRowHeader ? "Yes" : "No";

        string pathOnly = Path.GetDirectoryName(path);
        string fileName = Path.GetFileName(path);

        string sql = @"SELECT * FROM [" + fileName + "]";

        using (OleDbConnection connection = new OleDbConnection(
                  @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + pathOnly +
                  ";Extended Properties=\"Text;HDR=" + header + "\""))
        using (OleDbCommand command = new OleDbCommand(sql, connection))
        using (OleDbDataAdapter adapter = new OleDbDataAdapter(command))
        {
            DataTable dataTable = new DataTable();
            dataTable.Locale = CultureInfo.CurrentCulture;
            adapter.Fill(dataTable);
            return dataTable;
        }
    }

    private void btnImport_Click(object sender, EventArgs e)
    {
        try
        {

        DataTable dt = grvData.DataSource as System.Data.DataTable; //Getting data from Datagrid

        string strSQL = "create Table " + txtTabelName.Text + " (";

        foreach (DataColumn dc in dt.Columns)
        {
            if (dc.DataType.ToString() == "System.String")
            {
                strSQL += dc.ColumnName + " varchar(255), ";
            }
            else if (dc.DataType.ToString() == "System.Double")
            {
                strSQL += dc.ColumnName + " Numeric(10,3), ";
            }
            else if (dc.DataType.ToString() == "System.Int32")
            {
                strSQL += dc.ColumnName + " int, ";
            }
        }
        strSQL += ")";

         string strStatus = Executesql(strSQL);
            if (strStatus == "Table Created")
            {
                int iCntRecords = 0;
                foreach (DataRow dr in dt.Rows)
                {
                    strSQL = "insert into " + txtTabelName.Text + " values ("; //Inserting value to Table
                    foreach (DataColumn dc2 in dt.Columns)
                    {
                        if (dc2.DataType.ToString() == "System.String")
                        {
                            strSQL += "'" + dr[dc2.Ordinal].ToString().Replace("'", "") + "',";
                        }
                        else
                        {
                            strSQL += dr[dc2.Ordinal] + ",";
                        }
                    }
                    strSQL = strSQL.Substring(0, strSQL.Length - 1) + ")";

                    Executesql(strSQL);
                    iCntRecords += 1; //add n counter on each successfull enter
                }
                MessageBox.Show("Completed! " + Environment.NewLine + Environment.NewLine + iCntRecords.ToString() + " records added!", "Done!");
            }
            else
            {
                MessageBox.Show(strStatus);
            }
        }
        catch (Exception ex)
        {

            MessageBox.Show(ex.ToString());

        }
    }
    private string Executesql(string strSQL)
    {
        try
        {
            SqlConnection con = new SqlConnection(Properties.Settings.Default.connectionstring); //Connection to SQL Database
            con.Open();
            SqlCommand cmd = new SqlCommand(strSQL, con);
            cmd.ExecuteNonQuery();
            con.Close();
        }
        catch (Exception ex)
        {
            return ex.Message.ToString();

        }
        return "Table Created";
    }
} 
```

# asp.net-mvc-3 - MVC3 应用程序部署到启用 SSL 的服务器（iis6）时出现 403 错误

> ID：12259503
> 
> 赞同：1
> 
> 时间：2012-09-04T08:25:08.963
> 
> 标签：asp.net-mvc-3, ssl, iis-6

我有点迷失了这个。我有一个完美运行的 MVC3 网站，当部署到未启用 ssl 的网络服务器时它正在运行。但是，当我将其移至启用 ssl 的登台环境时，我不断收到 403 错误。

我在 ssl 上的背景为 0，不知道要注意什么。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:27:24.827

403 与 SSL 无关。403 表示未授权。检查您的权限和 IIS 中的身份验证设置。

它只是返回普通的 403 还是有像 403.4 这样的子状态？

# yii - Yii 中的 Xsendfile 有什么问题

> ID：12259513
> 
> 赞同：0
> 
> 时间：2012-09-04T08:25:40.713
> 
> 标签：yii

我在 Yii 中尝试了 Xsendfile() 方法 20 多次，但没有一个给我结果。这是我的代码：

```
 $file_path = "D:/xampp/htdocs/mywebapp/protected/modules/file_upload".DS.
                  'views'.DS.'upload'.DS.testfile.".pdf"; 
    Yii::app()->request->xSendFile($file_path ,array(
       'saveName'=>$result['gen_name'] .".pdf",
       'mimeType'=>'application/pdf',
       'terminate'=>true,
     )); 
```

尽管在我的硬盘驱动器上随处更改了 testfile.pdf 的位置，但它们都不起作用。我对这种方法几乎筋疲力尽。任何人都可以帮助我摆脱头痛吗？我正在使用 Windows 和 xampp 1.7.4。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:53:57.590

Xsendfile 仅在您的 Web 服务器上安装了 Apache 模块时才有效。这不是一个正常的选择，所以你可能不会。最好尝试普通的 sendfile 方法或自己写文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:36:46.107

您是否根据需要调整服务器以发送大文件？[http://www.yiiframework.com/doc/api/1.1/CHttpRequest#xSendFile-detail](http://www.yiiframework.com/doc/api/1.1/CHttpRequest#xSendFile-detail)

# android - 我可以以编程方式编辑 .txt 文件打开应用程序吗

> ID：12259518
> 
> 赞同：0
> 
> 时间：2012-09-04T08:25:53.277
> 
> 标签：android, default

![我可以以编程方式编辑 .txt 文件打开应用程序吗？](../Images/2b9f31c061351db152d43e905356db14.png)

我想开发一个应用程序管理器，并实现如下功能：编辑不同类型（具有不同后缀）的打开应用程序，或清除默认值。这在Android中可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T08:32:38.613

您可以使用：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(<The URI of the data you want to open>);
intent.setType(<MIME type>); // Optional        
startActivity(intent); 
```

这将向您显示应用程序选择器对话框，其中包含可以根据 URI 方案/路径和/或 MIME 类型打开数据的应用程序。

如果要编辑数据，也可以使用`Intent.ACTION_EDIT`代替。`Intent.ACTION_VIEW`

**编辑：**没有什么可显示的，打开一个可以使用的 TXT 文件：

```
File file = new File(Environment.getExternalStorageDirectory(), "test.txt");
Uri uri = Uri.parse("file://" + file.getAbsolutePath());

Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(uri);        
startActivity(intent); 
```

如果有任何应用程序与 TXT 文件关联，Android 操作系统会提示您选择一个应用程序，如果只有 1 个应用程序能够打开指定的文件类型，它将使用该应用程序打开它。

# javascript - 在哪里放置一段代码

> ID：12259520
> 
> 赞同：0
> 
> 时间：2012-09-04T08:26:04.493
> 
> 标签：javascript, jquery, ajax, screen-scraping

我找到了一个脚本，它可以筛选网站，例如：[JsFiddle](http://jsfiddle.net/m4QCt/97/)

问题是我想包含来自“Embed.ly”的另一个脚本。这个脚本允许“丰富”给定的链接。代码非常简单：

```
 $('div.content').embedly({key: 41f042ec20b04dda84448dc4a46d357d}); 
```

但是我似乎无法在脚本中给它一个合适的位置。无论我把它放在哪里都不起作用，但更糟糕的是屏幕抓取脚本也停止工作。那么我应该在脚本中的哪个位置放置嵌入代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:48:00.077

主要是跨源脚本...

[http://jsfiddle.net/Vandeplas/m4QCt/103/](http://jsfiddle.net/Vandeplas/m4QCt/103/)

我注释掉了查找链接部分，因为`jquery.xdomainajax.js`lib 的响应正在返回 jibbrish ......（它似乎有一半的时间工作！？）

次要细节：您的 api 密钥需要引号，url 需要在 href 部分中才能使嵌入工作，您需要选择 '.content' 来附加链接，而您不需要`$('.content')`只是选择器可以作为附加参数。（两者都可以工作；））

您可以编写自己的代理脚本来处理跨源问题……代理脚本是一种中间件。您向脚本发出请求，脚本获取数据并将其返回给您。例如[php 代理](http://jquery-howto.blogspot.de/2009/04/cross-domain-ajax-querying-with-jquery.html)。你可以在 asp、jsp、flash 甚至 java applet 中做同样的事情。

**编辑：**

回应我得到了一半的时间......

![胡说八道](../Images/8594553fdd20a024a3e2545881557f4c.png)

# java - JPanel 在 jLayeredPane 中的可见性问题

> ID：12259523
> 
> 赞同：0
> 
> 时间：2012-09-04T08:26:09.590
> 
> 标签：java, swing

我的代码无法显示最初具有 setVisible(false) 的所需 JPanel，但是当执行某些操作时，它的可见性然后设置为 true，但它不会显示在屏幕上。

即使我最初将 setVisible 设置为 true，它也不会显示。我在[这里附上了 PasteBin 上的代码](http://pastebin.com/UTyr38yz)

有 2 个分层窗格，一个是 jLayeredPane1，另一个是 jLayeredPane2。现在，在 JLayeredPane1 中有两个 JPanel，recordingPanel 和 reRecordingPanel。

最初，当加载小程序时，recordingPanel 的可见性为 setVisible(false)。当第一轮录制完成时，它变得可见，并且可见的recordingPanel 现在变得不可见。这工作正常。

我的问题是我想在另一个 JLayeredPanel 上做同样的事情，其中​​包含 timerPanel 和 listenerPanel。

**这是问题**所在：timerPanel 的可见性最初是正确的*，但是当用户按下 Listen 按钮时，它应该是不可见的，而侦听面板应该是可见*的，但事实并非如此！

尽管我已将其可见性设置为 true，但我看不到正在听的播放器。正如我之前所说，即使我最初将其可见性设置为 true，它也不会显示。

我做错了什么 ？

它与比赛条件有关吗？

问题出在这段代码片段中

```
if (getCurrentState() == RecorderUI.LISTENING_STATE) {

            // switch panel
            this.timerPanel.setVisible(true);
            this.listeningPanel.setVisible(false);

            // switch button
            this.reRecordingButton.setEnabled(true);
            this.saveButton.setEnabled(true);

            this.listenButton.setText("Listen");

            this.setCurrentState(NORMAL_STATE);

            // according to player's state wise
            this.closePlayer();

            log.info(" player closed ");

        } else {

            // switch panel
            this.timerPanel.setVisible(false);
            this.listeningPanel.setVisible(true);

            log.info(" visibility of listeningPanel is "
                    + this.listeningPanel.isVisible());

            // switch button
            this.reRecordingButton.setEnabled(false);
            this.saveButton.setEnabled(false);

            this.listenButton.setText("Close");

            this.setCurrentState(LISTENING_STATE);

            this.startPlayer();

            log.info(" now playing ");
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:49:40.093

**在调试时，我发现 matisse 已将 jPanel (listeningPanel) 的高度和宽度设置为 -1,-1，这就是它没有显示在屏幕上的原因。我已经通过手动设置解决了它**。

谢谢你们

# ravendb - RavenDB PatchRequest PatchCommndType.Inc

> ID：12259526
> 
> 赞同：1
> 
> 时间：2012-09-04T08:26:20.827
> 
> 标签：ravendb

我找不到处理“未找到 PatchRequest”的文档。

我有一个具有年龄属性的用户，我已经成功地使用 PatchCommndType.Inc 增加了他的年龄，

但是，我不知道如何处理用户未存储在 Raven 中的情况，然后我想将该用户存储到 Raven。

由于节省时间，我选择使用补丁请求。

最好的做法是什么？

例如：

我有用户：

姓名：约翰，年龄：20

如果用户存储在 Raven 中，我想用 PatchCommndType.Inc 增加他的年龄，否则，我想将他存储到 Raven

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:57:58.170

你不能，补丁被认为总是有效的。如果文档不存在，我们只是不执行它。

# c# - 如果接口的实现调用 Dispose，它是一个泄漏的抽象吗

> ID：12259534
> 
> 赞同：10
> 
> 时间：2012-09-04T08:26:45.023
> 
> 标签：c#, .net, design-patterns, dependency-injection, loose-coupling

考虑这段代码：

```
public class MyClass()
{
  public MyClass()
  {    
  }

  public DoSomething()
  {
    using (var service = new CustomerCreditServiceClient())
    {
       var creditLimit = service.GetCreditLimit(
         customer.Firstname, customer.Surname, customer.DateOfBirth);       
    }
  }
} 
```

我们现在想要重构它以松散耦合它。我们最终得到了这个：

```
public class MyClass()
{
  private readonly ICustomerCreditService service;

  public MyClass(ICustomerCreditService service)
  {
     this.service= service;
  }

  public DoSomething()
  {
     var creditLimit = service.GetCreditLimit(
       customer.Firstname, customer.Surname, customer.DateOfBirth);       
  }
} 
```

看起来不错吧？现在任何实现都可以使用该接口，一切都很好。

如果我现在说实现是一个 WCF 类，并且重构完成之前的 using 语句是有原因的，那该怎么办。即/关闭 WCF 连接。

所以现在我们的接口必须实现一个`Dispose`方法调用，或者我们使用工厂接口来获取实现并在其周围放置一个 using 语句。

对我来说（虽然对这个主题很陌生），这似乎是一个有漏洞的抽象。我们不得不将方法调用放在我们的代码中，只是为了实现处理东西的方式。

有人可以帮助我理解这一点并确认我是对还是错。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T08:46:16.200

`ICustomerCreditService`是的，当您让implement时，这是一个泄漏的抽象`IDisposable`，因为您现在已经`ICustomerCreditService`考虑到了特定的实现。此外，这会向该接口的使用者传达它可以处置该服务，这可能是不正确的，特别是因为一般来说，资源应该由创建它的人（拥有所有权）处置。当您将资源注入到一个类中（例如使用构造函数注入）时，不清楚消费者是否被赋予了所有权。

所以一般来说，负责创建该资源的人应该处理它。

但是，在您的情况下，您可以通过实现一个非一次性实现来简单地防止这种情况发生，该实现`ICustomerCreditServiceClient`只是在同一方法调用中创建和处置 WCF 客户端。这使一切变得更加容易：

```
public class WcfCustomerCreditServiceClient
    : ICustomerCreditServiceClient
{
    public CreditLimit GetCreditLimit(Customer customer)
    {
        using (var service = new CustomerCreditServiceClient())
        {
            return service.GetCreditLimit(customer.Firstname,
                customer.Surname, customer.DateOfBirth);       
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:30:00.360

您应该处理`customerCreditService`调用代码中的生命周期。应该如何`MyClass`知道调用者是否仍需要该服务？如果调用者负责清理其资源，则`MyClass`不需要是一次性的。

```
// calling method

using (var service = new CustomerCreditServiceClient()) {
    var myClass = new MyClass(service);
    myClass.DoSomething();
} 
```

*更新：*在评论中，OP 提到了使用像 Ninject 这样的 IoC。然后代码可能如下所示：

```
IKernel kernel = ...;

using (var block = kernel.BeginBlock())
{
    var service = block.Get<ICustomerCreditService>();
    var myClass = new MyClass(service);
    myClass.DoSomething();
} 
```

`kernel.BeginBlock()`创建一个激活块。它确保在块结束时处理已解析的实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T08:30:27.270

`ICustomerCreditService`您应该调用已实例化的 Dispose，因为`MyClass`现在不知道`ICustomerCreditService`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T08:53:48.007

再次从第一个实现开始，我会尝试向类添加一个 getInterface-Request，以便实现可以或多或少保持不变。然后它可以安全地调用`Dispose`（实际上它只是推迟了接口实现的创建，但仍然控制着它的生命周期）：（c#-code not verify...）

```
public class MyClass()
{
  public delegate ICustomerCreditService InterfaceGetter;
  private InterfceGetter getInterface;
  public MyClass(InterfaceGetter iget)
  {
    getInterface = iget;
  }
  public DoSomething()
  {
    using (var customerCreditService = getInterface())
    {
       var creditLimit = customerCreditService.GetCreditLimit(customer.Firstname, customer.Surname, customer.DateOfBirth);       
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T08:54:43.583

是的。但这是必要的邪恶。接口的*存在*本身就是`IDisposable`一个泄漏的抽象。泄漏抽象只是编程的日常事实。尽可能避免它们，但当你不能时不要担心——它们无处不在。

# php - 异常参数错误([string $exception [, long $code ]])

> ID：12259538
> 
> 赞同：4
> 
> 时间：2012-09-04T08:26:57.483
> 
> 标签：php

一段时间以来一直盯着这个异常，不知道出了什么问题。

> 致命错误：错误的参数`Exception([string $exception [, long $code ]])`

看起来很简单，异常需要一条消息和一个可选代码，尽管由于某种原因代码不同意我的看法。即使我删除了最后一个参数`$e`（用于保留堆栈跟踪），也会弹出同样的错误。

```
try {
    // ...
} catch (Exception $e) {
    throw new Exception('Client cannot be created', 0, $e);
} 
```

只有当我同时省略代码 ( `0`) 和前面的异常 ( `$e`) 时，才会正确抛出错误。

```
try {
    // ...
} catch (Exception $e) {
    throw new Exception('Client cannot be created');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:50:59.517

虽然我从未使用过 SOAP 技术，所以只是取自 [`SoapClient manual`](http://in.php.net/manual/en/soapclient.soapclient.php)

> exceptions 选项是一个布尔值，定义了soap错误是否抛出异常类型[`SoapFault`](http://in.php.net/manual/en/soapfault.soapfault.php)

和**soapFault**语法是

```
SoapFault::SoapFault ( string $faultcode , 
                       string $faultstring [, 
                       string $faultactor [, 
                       string $detail [, 
                       string $faultname [, 
                       string $headerfault ]]]] ); 
```

所以我建议你检查手册上的所有例子。这里我有一个例子

**要获取自定义 Soap 错误代码，请在 catch 中使用`$e->faultcode`而不是`$e->getCode`.**

```
<?php 
try { 
    // ... 
} catch (SoapFault $e) { 
    echo $e->faultcode; 
} 
?> 
```

再举一个例子：

```
try { 
            $options = array( 
                'soap_version'=>SOAP_1_1, 
                'exceptions'=>true, 
                'trace'=>1, 
                'cache_wsdl'=>WSDL_CACHE_NONE 
            ); 
            $client = new SoapClient('http://www.example.com/end_point.wsdl', $options); 

        } catch (Exception $e) { 
            echo "<h2>Exception Error!</h2>"; 
            echo $e->getMessage(); 
        } 
```

希望能帮助到你。

# rest - REST - 维护“相同的结果”与用户特定的结果

> ID：12259539
> 
> 赞同：0
> 
> 时间：2012-09-04T08:27:03.953
> 
> 标签：rest, get

在 REST API 中，经过身份验证后，用户会收到一个 AccessToken，然后随每个请求一起发送。在服务器端，令牌映射到该用户的 UserID。

假设我这样处理消息资源：

```
GET /user/123/messages 
```

与以这种方式访问​​它：

```
GET /messages/ 
```

并从 AccessToken 标头中提取 UserID。

哪种方式更 RESTful？我倾向于第一个 - 它似乎更具可读性和可缓存性，但还有其他原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:34:15.483

第一个标识一个唯一的资源，第二个没有。如果第二个 URI 的含义取决于附加信息（会话令牌），则它不会识别任何内容。所以只有第一种方法是 RESTful。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:17:33.073

如果用户 456 让你第一次得到......你会返回什么？如果你的第二个......？我发现我的世界是“宁静的”，我的服务对每个用户都是幂等的。一旦身份验证发生，我将用户身份放入 http 会话（tomcat 免费为我提供）并使用 /messages 和 /messages/99999 等服务。服务实现然后说“在会话中查找用户拥有的消息 XXXX。重要的部分是不要将其余数据存储在会话中只是用户是谁。比 cookie 容易得多......恕我直言

# c# - 将 RichTextBox 上的项目符号列表保存到 XML

> ID：12259541
> 
> 赞同：1
> 
> 时间：2012-09-04T08:27:08.330
> 
> 标签：c#, visual-studio-2010, richtextbox

这是我想将 VS2010 上 RichTextBox 上的项目符号样式保存到 XML 文件的问题。当我创建内容时，没关系。但是当我保存它时。子弹不见了。它只有纯文本。请帮助我将 RichTextBox 的实际内容保存在 XML 文件中，或者只是 file.txt

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:39:31.830

您可以添加此代码

```
richTextBox1.SelectionBullet = true; 
```

您可以封装在您的赔偿金中

```
<ol>
 <li>returned data</li>
</ol> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:08:45.333

纯 .TXT 文件是不够的，您需要使用 .RTF 扩展名（富文本格式）保存文件。

请打电话：

```
 //File path must have .RTF at the end
  richTextBox1.SaveFile(filePath); 
```

确保您的扩展名是 .RTF，您将能够保存格式化的富文本框 :)

# objective-c - ios-在uiimage元数据中添加地理定位

> ID：12259542
> 
> 赞同：1
> 
> 时间：2012-09-04T08:27:23.623
> 
> 标签：objective-c, ios, uiimageview, uiimage

先生，在这里我需要将元数据中的地理位置添加到 uiimage 但添加后我只加载到相册但这里我需要那个图像，这里我添加了源代码

```
- (void) saveImage:(UIImage *)imageToSave withInfo:(NSDictionary *)info
{
    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

        // Get the image metadata (EXIF & TIFF)    
    NSUserDefaults *defaults=[NSUserDefaults standardUserDefaults];
    [defaults objectForKey:latkey];
    float longitude=[defaults floatForKey:longkey];
    float latitude=[defaults floatForKey:latkey];    
    CLLocation * loc=[[CLLocation alloc] initWithLatitude:latitude longitude:longitude];
    NSMutableDictionary *metaDict = nil;
    if ([info objectForKey:UIImagePickerControllerOriginalImage] != nil) {
        metaDict = [NSMutableDictionary dictionaryWithDictionary:[info objectForKey:UIImagePickerControllerMediaMetadata]];
        NSDictionary *gpsDict = [self currentLocation:loc];
        if ([gpsDict count] > 0) {
            [metaDict setObject:gpsDict forKey:(NSString*)kCGImagePropertyGPSDictionary];
        }
    }
    [library writeImageToSavedPhotosAlbum:[imageToSave CGImage] metadata:metaDict completionBlock:^(NSURL *newURL, NSError *error) {
        if (error) {

        } else {
        }
    }];

    NSLog(@"metaDict  :%@",metaDict);

    NSURL *referenceURL = [info objectForKey:UIImagePickerControllerReferenceURL];
    [library assetForURL:referenceURL resultBlock:^(ALAsset *asset) {
        ALAssetRepresentation *rep = [asset defaultRepresentation];
        NSDictionary *metadata = rep.metadata;
        NSLog(@"%@", metadata);

        CGImageRef iref = [rep fullScreenImage] ;

        if (iref) {
            capturedImage.image = [UIImage imageWithCGImage:iref];
        }
    } failureBlock:^(NSError *error) {
            // error handling
    }];
} 
```

为当前地理位置创建一个 EXIF 字段。

```
- (NSMutableDictionary*)currentLocation:(CLLocation *)location{
    NSMutableDictionary *locDict = [[NSMutableDictionary alloc] init];

    if (location != nil) {
        CLLocationDegrees exifLatitude = location.coordinate.latitude;
        CLLocationDegrees exifLongitude = location.coordinate.longitude;

        [locDict setObject:location.timestamp forKey:(NSString*)kCGImagePropertyGPSTimeStamp];

        if (exifLatitude < 0.0) {
            exifLatitude = exifLatitude*(-1);
            [locDict setObject:@"S" forKey:(NSString*)kCGImagePropertyGPSLatitudeRef];
        } else {
            [locDict setObject:@"N" forKey:(NSString*)kCGImagePropertyGPSLatitudeRef];
        }
        [locDict setObject:[NSNumber numberWithFloat:exifLatitude] forKey:(NSString*)kCGImagePropertyGPSLatitude];

        if (exifLongitude < 0.0) {
            exifLongitude=exifLongitude*(-1);
            [locDict setObject:@"W" forKey:(NSString*)kCGImagePropertyGPSLongitudeRef];
        } else {
            [locDict setObject:@"E" forKey:(NSString*)kCGImagePropertyGPSLongitudeRef];
        }
        [locDict setObject:[NSNumber numberWithFloat:exifLongitude] forKey:(NSString*) kCGImagePropertyGPSLongitude];
    }

    return [locDict autorelease];
} 
```

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:50:17.923

**编辑：您可以通过**[以下](https://stackoverflow.com/questions/7570903/iphone-alassetslibrary-get-all-images-and-edit)链接将图像添加到相册中。

现在，如果您有资产，那么使用资产的创建日期，您可以在添加到相册之前知道像这样添加的最后一张照片作为保存日期：

```
NSDate *imgCreateddate = [asset valueForProperty:ALAssetPropertyDate];
if(imgCreateddate isGreaterThan savedDate)
{
  last Photo;
} 
```

* * *

请参阅[将元数据添加到 iOS 图像的简单方法](http://www.altdevblogaday.com/2011/05/11/adding-metadata-to-ios-images-the-easy-way/)链接。

有关示例代码，请参阅[GusUtils](https://github.com/gpambrozio/GusUtils)。

请参阅[保存地理标记信息与照片](https://stackoverflow.com/questions/3884060/saving-geotag-info-with-photo-on-ios4-1)链接

# redirect - 我的网站的 Google 结果重定向到 Google

> ID：12259544
> 
> 赞同：0
> 
> 时间：2012-09-04T08:27:26.450
> 
> 标签：redirect

当我在不使用 Google 结果的情况下进入我的网站时，无论有无 www，我都可以毫无问题地访问。

但是，当我通过 Google 结果访问时，会再次重定向到 Google。

这是我受影响的网站之一：

**谷歌搜索之前：**

[http://somesite.com/](http://somesite.com/) - 一切正常

[http://www.somesite.com/](http://www.somesite.com/) - 一切正常

**使用谷歌搜索**

[https://www.google.com?q=somesite](https://www.google.com?q=somesite) - 第一个链接重新指向 Google

**使用谷歌结果后，如果我访问网站输入它：**

[http://somesite.com/](http://somesite.com/) - 一切正常

[http://www.somesite.com/](http://www.somesite.com/) - 重定向到谷歌

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:30:17.117

使用 Firebug(FireFox Add on) 看看发生了什么！它会让你更清楚正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T08:02:30.340

我有同样的问题。它与https连接有关。

如果您使用的是 firefox，请阅读： http://forums.mozillazine.org/viewtopic.php?f=38&t= [2317787](http://forums.mozillazine.org/viewtopic.php?f=38&t=2317787)

如果您使用的是 Chrome，您可以使用此插件禁用 google 重定向搜索结果：[https ://code.google.com/p/undirect/](https://code.google.com/p/undirect/)

# phpunit - Sublime Text 2：插件可以渲染 HTML 吗？

> ID：12259545
> 
> 赞同：2
> 
> 时间：2012-09-04T08:27:30.750
> 
> 标签：phpunit, textmate, sublimetext2

我希望为 Stuart Herbert 的 sublime-phpunit 插件添加一些视觉吸引力。目前，它在屏幕底部的一个小窗口中显示 PHPUnit 的文本输出。

我有一个自定义 PHP 打印机类，它将 PHPUnit 输出显示为 HTML。我想知道的是 Sublime Text 是否可以将此输出显示为 HTML。我现在只是看到来源。这在 TextMate 中很容易做到，只需选择输出窗口类型。Sublime Text 2 中是否有类似的控件？

谢谢，罗斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:28:44.100

自 Build 2217 起，无法显示丰富的输出。

你可以在 Sublime Text 的官方意见论坛上[为这个功能投票。](http://sublimetext.userecho.com/topic/35383-preview-window-for-build-output-and-other-things/)

# android - 无法使用 Eclipse Android SDK

> ID：12259546
> 
> 赞同：1
> 
> 时间：2012-09-04T08:27:32.203
> 
> 标签：android, eclipse, eclipse-plugin

我是编写基本 Android 应用程序的初学者。

当我尝试启动 android SDK manager 时，它会启动，但问题是所有按钮都不起作用。你可以点击，但你没有得到任何回应。

这是我的环境变量：

```
%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files\Android\android-sdk\tools\;C:\Program Files\Android\android-sdk\platform-tools\;C:\Program Files\Java\jdk1.7.0_07\bin\; 
```

我安装了：

*   Android sdk installer_r20.0.3-windows.exe (windows 7 ,32 位)
*   eclipse-jee-juno-win32
*   jdk-7u6-windows-i586.exe

我只是尝试并尝试删除，重新安装和安装，但没有任何反应，需要 7 天，我真的需要一些帮助

# codeigniter - CodeIgniter：我想将数据添加到数组中

> ID：12259547
> 
> 赞同：2
> 
> 时间：2012-09-04T08:27:36.530
> 
> 标签：codeigniter

我正在使用 CodeIgniter 和 MYSQL。

我有table1，它有一个字段（名称）。

在字段名称中，它具有 ABC、DDDD 和 EEE 等值。

SQL 语句：

```
value of field name
ABC
DDDD
EEE

Select name from table1 
```

我想将我选择的数据转换为如下格式。

```
Array ( [0] => ABC [1] => DDDD [2] => EEE ) 
```

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:30:38.627

使用此代码：

```
$q = $this->db->get('table1');
if ($q->num_rows() > 0):
   foreach($q->result() as $r):
       $data[] = $r->name;
   endforeach;
endif; 
```

$data 保存您的数组。

# apache-flex - IE9 崩溃并重新打开

> ID：12259549
> 
> 赞同：4
> 
> 时间：2012-09-04T08:27:42.407
> 
> 标签：apache-flex, internet-explorer, flash

我有一个 Flex 应用程序，当我单击另一个窗口中的 javascript 链接时，它会在新窗口中打开。如果我使用浏览器关闭按钮关闭 flex 应用程序窗口，而它仍在加载，更准确地说，在显示数据网格之前，屏幕会挂起不到一秒钟，如果我在那一刻关闭屏幕，IE9崩溃并显示以下消息：

> 此网页的问题导致 Internet Explorer 关闭并重新打开选项卡

我已经尝试了我在网上找到的所有解决方案，但都没有奏效：

*   将网站添加到兼容性视图
*   使用不同版本的 Flash Player
*   更新java插件
*   禁用/启用插件
*   重置 Internet Explorer 设置
*   安装最新更新
*   使用微软工具“修复它”
*   使用软件渲染而不是 GPU 渲染

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:11:06.427

我在使用 Firefox 和 Chrome 时遇到了类似的问题。当我收到一长串在向用户显示之前必须处理的数据时，或者如果我使用图形密集型组件，由于处理器负载而导致浏览器挂起，就会发生这种情况.

发生这种情况时尝试检查您的任务管理器并检查浏览器是否正在使用您的所有处理器时间，如果是这种情况，那么您需要通过减少数据预处理来提高代码效率并在运行时执行更多操作用户正在滚动数据或使用基于列表的组件而不是Repeater 组件，因为即使您使用简单的文本渲染器，后者也会使一切变得非常缓慢。

# c# - 验证 csproj 资源。命名空间引用？

> ID：12259551
> 
> 赞同：1
> 
> 时间：2012-09-04T08:27:46.987
> 
> 标签：c#, csproj, system.reflection

我制作了一个小应用程序，它生成代码以验证其他应用程序引用的库是否存在。

我遇到的问题与 csproj 文件本身有关。

我注意到核心库没有指定版本、文化和 PublicKeyToken。

如果没有这些信息，我无法在不使用 .Net-Framework 中已弃用的方法的情况下加载程序集。(Assembly.LoadWithPartialName)

由于核心库总是应该存在的，这应该不是问题。

但是我不能确定这只适用于核心库。

所以我的问题是：

我可以安全地假设这仅适用于应该始终存在于任何 Windows 机器上的核心库吗？如果没有，我应该如何仅使用它们的命名空间来加载这些程序集？（因为这是 .csproj 文件中提供的全部内容）

.Net 框架显然以某种方式在后台进行匹配，否则 .csproj 文件中的某处会有更明确的引用。

提前致谢！

# wordpress - 如何反向排序这个数组，WordPress 自定义搜索过滤器

> ID：12259554
> 
> 赞同：1
> 
> 时间：2012-09-04T08:28:02.400
> 
> 标签：wordpress, ksort

我正在使用 WordPress 中的自定义过滤器，只需要帮助以相反的顺序对该数组进行排序：

```
add_filter('relevanssi_hits_filter', 'order_the_results');

function order_the_results($hits) {
global $wp_query;
if ($wp_query->query_vars['orderby'] == 'likes') {
    $likes = array();
    foreach ($hits[0] as $hit) {
        $likecount = get_post_meta($hit->ID, '_likes', true);
        if (!isset($likes[$likecount])) $likes[$likecount] = array();
        array_push($likes[$likecount], $hit);
    }
    ksort($likes);
    $sorted_hits = array();
    foreach ($likes as $likecount => $year_hits) {
        $sorted_hits = array_merge($sorted_hits, $year_hits);
    }
    $hits[0] = $sorted_hits;
}
return $hits;
} 
```

我对 ksort 不太熟悉，但它似乎没有 ASC/DESC 选项。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T08:48:50.027

krsort()

```
if ($wp_query->query_vars['order'] == 'asc') {
      ksort($likes);
    } else {
      krsort($likes);
    } 
```

# continuous-integration - Jenkins - 在所有下游作业完成后触发作业，而不仅仅是直接作业

> ID：12259555
> 
> 赞同：10
> 
> 时间：2012-09-04T08:28:05.343
> 
> 标签：continuous-integration, jenkins, jenkins-plugins

Jenkins 加入插件允许在所有直接下游作业完成后运行作业。

但是，我如何配置一个作业以在所有下游作业完成后运行，而不仅仅是直接的作业？

此图显示了我期望的作业触发流程：

```
 A
                           |
                    --+----+------+--
                      |           |
                      v           v
                      B           C
                      |           |
     --+--------+-----+---+--     |
       |        |         |       |
       v        v         v       |
       D        E         F       |
       |        |         |       |
       v        |         |       |
       G        |         |       |
       |        |         |       |
    ---+--------+----+----+-------+--
                     |
                     v
                     J 
```

我在作业 A 上设置了 Join Trigger 以触发最终作业 J。但是，一旦 B 和 C 完成，作业 J 就会启动，不会等待作业 D、E、F 和 G。

在[这个答案](https://stackoverflow.com/a/9013233/94148)及其评论中，它说路径可以是多个工作深度，并且必须正确使用指纹。但我不知道如何使它工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-03-14T06:54:58.613

如果有人正在寻找简单的方法，只需使用[JobFanIn 插件](https://wiki.jenkins-ci.org/display/JENKINS/JobFanIn+Plugin)。一旦 C、E、F 和 G 构建并稳定，此插件将允许您在作业 J 上设置触发器

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T13:50:16.613

Join 插件仅在所有内容都分解为依赖关系的“菱形”时才起作用：一个起始作业，一个或多个下游作业，但只有一个深度（D 和 G 是图中的两个深度），然后是单个加入工作。您的依赖结构不遵循该菱形模式。

对于这种特殊情况，我会使用[Promoted Builds Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Promoted+Builds+Plugin)。设置 Job A 以进行促销，当触发时运行 Job J。使该促销的触发器成为 B、C、D、E、F、G 的成功完成。或者如果想要最小化它：G、EF、C . 只要确保指纹识别设置正确。

对于指纹识别，在作业 A 期间生成一个文件（或选择现有文件）。对其进行人工处理并对其进行指纹识别。在以下所有作业 BG 中，使用[CopyArtifact](https://wiki.jenkins-ci.org/display/JENKINS/Copy+Artifact+Plugin)插件将该文件检索到作业中并在那里对其进行指纹识别。

# c# - 如何创建 schema.ini 文件？我需要将我的 .csv 文件导出到 datagridview

> ID：12259562
> 
> 赞同：4
> 
> 时间：2012-09-04T08:28:52.603
> 
> 标签：c#, csv, export

我想将[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)文件导出到 datagridview。我需要创建文件`schema.ini`。但我不知道，我该如何创建它？

有我的代码：

```
 public DataTable exceldenAl(string excelFile)
    {
        try
        {
            string fileName = Path.GetFileName(excelFile);
            string pathOnly = Path.GetDirectoryName(excelFile);
            string cmd = "Select * From [" + fileName + "$]";

            string cnstr = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + pathOnly + "\\;Extended Properties=\"Text;HDR=Yes;FORMAT=Delimited\"";
            OleDbConnection ocn = new OleDbConnection(cnstr);
            ocn.Open();
            OleDbCommand command = new OleDbCommand(cmd,ocn);
            OleDbDataAdapter adap = new OleDbDataAdapter(command);

            DataTable dt = new DataTable();
            dt.Locale = CultureInfo.CurrentCulture;
            adap.Fill(dt);
            return dt;
        }
        finally {
        }
    }

    private void btnExcelReader_Click(object sender, EventArgs e)
    {
        string dosya;
        string cevap;
        openFileDialog1.ShowDialog();
        dosya = openFileDialog1.FileName.ToString();
        ClsExcelReader er = new ClsExcelReader();
        cevap = er.exceldenAl(dosya).ToString();
        dataGridView1.DataSource = cevap;
        //listViewExcelOku.DataBindings =
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T20:12:08.913

打开记事本并创建一个类似这样的文件：

```
[YourCSVFileName.csv]
ColNameHeader=True
Format=CSVDelimited
DateTimeFormat=dd-MMM-yyyy
Col1=A DateTime
Col2=B Text Width 100
Col3=C Text Width 100
Col4=D Long
Col5=E Double 
```

修改上述文件以适合您的特定数据架构。将其另存为 SCHEMA.ini 并保存在 *.CSV 文件所在的同一目录中。

阅读此链接（[将 CSV 文件导入数据库](http://www.aspdotnetcodes.com/Importing_CSV_Database_Schema.ini.aspx)），这是一个很好的示例，可以帮助您了解 Schema.ini 的工作原理

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-23T14:00:41.917

我编写了这些 Excel 公式来生成该文件的内容，前提是您可以获得带有列标题的 Excel 工作表。这是非常基本的。根据需要添加和删除功能。它假定所有文本都带有分隔符。然后在 A2 中插入以下公式（包括所有选项）：

```
="[no headers.csv]
"&"ColNameHeader=false
"&"MaxScanRows=0
"&"Format=Delimited(;)
Col"&COLUMN()&"="&A1&" text
" 
```

以及B2中的以下公式。

```
=A2&"Col"&COLUMN()&"="&B1&" text
" 
```

然后向右拖动以获取您的基本 schema.ini（最右边的单元格）。您可以在列名称下方的 Excel 单元格中调整选项。每列都有自己的定义。复制到文本文件时，我在结果中得到了右引号和左引号。

# php - FuelPHP 使用 CLI 删除脚手架

> ID：12259564
> 
> 赞同：1
> 
> 时间：2012-09-04T08:28:59.233
> 
> 标签：php, fuelphp

我正在使用燃料 1.2.1

我使用脚手架通过以下命令创建了我的 CRUD：

```
oil generate scaffold news title:string body:text 
```

有没有像在 Rails 中那样销毁它的命令？

编辑：破坏论点会很好

```
oil destroy scaffold news 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:52:13.400

该命令不存在。您必须手动完成。

删除：

```
APPPATH/classes/model/news.php
APPPATH/migrations/xxx_create_news.php
APPPATH/classes/controller/news.php
APPPATH/views/news/index.php
APPPATH/views/news/view.php
APPPATH/views/news/create.php
APPPATH/views/news/edit.php
APPPATH/views/news/_form.php 
```

# javascript - jQuery 或 Ajax 仪表

> ID：12259565
> 
> 赞同：2
> 
> 时间：2012-09-04T08:29:06.927
> 
> 标签：javascript, jquery, ajax

我正在寻找具有多个同心圆的仪表，每个圆显示不同实体的值。像这样的东西......（见图）

这里每根针显示相应实体的值。我在 jQuery 和 Ajax 中看到了一些仪表。所以我想知道我是否能找到这样的东西。

![在此处输入图像描述](../Images/5ffb228a34395849b0978c4816053306.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:45:53.000

您可以考虑[Perfect Widgets](http://perfectwidgets.com)库。请查看我为您创建的[演示。](http://perpetuumsoft.com/demo/pw/so-gauge-1/)我想这正是你所需要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T08:35:17.683

使用旋钮插件，您将能够执行您想要的操作：[http](http://anthonyterrien.com/knob/) ://anthonyterrien.com/knob/ 每次只需将复数输入与更大的周长叠加并使用 z-index 即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T08:31:43.403

你可能想看看highcharts：

带有两个轴的演示：[http ://www.highcharts.com/demo/gauge-dual](http://www.highcharts.com/demo/gauge-dual)

带有三个“针”的演示：[http ://www.highcharts.com/demo/gauge-clock](http://www.highcharts.com/demo/gauge-clock)

带有两个仪表的演示：[http ://www.highcharts.com/demo/gauge-vu-meter](http://www.highcharts.com/demo/gauge-vu-meter)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-04T06:36:17.443

您可以尝试 jqChart 径向仪表 - [http://www.jqchart.com/jquery/gauges/RadialGauge/NestedScales](http://www.jqchart.com/jquery/gauges/RadialGauge/NestedScales)

这是一个多针示例 - [http://www.jqchart.com/jquery/gauges/RadialGauge/Needles](http://www.jqchart.com/jquery/gauges/RadialGauge/Needles)

而只是一个普通的模拟时钟 - [http://www.jqchart.com/jquery/gauges/](http://www.jqchart.com/jquery/gauges/)

免责声明：我为 jqChart 工作。

# ios - 退格键 iOS 的通知

> ID：12259566
> 
> 赞同：0
> 
> 时间：2012-09-04T08:29:14.527
> 
> 标签：ios, uitextfield

有没有办法在用户按下 UITextField 上的退格键时获得通知，即使该字段为空？

当用户在空白字段上退格时，我希望能够触发一些代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:27:08.623

由于您不需要检测**文本何时被删除**，而是何时**按下退格键**，因此您需要做的不仅仅是实现`UITextFieldDelegate`。

阅读[这篇博](http://bjhomer.blogspot.com/2011/11/detecting-backspace-in-uitextfield.html)文，了解如何`UITextField`将所有`UIKeyInput`方法转发到私有类`UIFieldEditor`。编写器在运行时动态子类`UIFieldEditor`化以检测这些事件。

希望这会为您指明正确的方向！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-17T05:29:18.583

这将检测退格。现在你可以在按下退格键时做任何事情。

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
    {
        if (textField==txtMobileNo)
        {

            const char * _char = [string cStringUsingEncoding:NSUTF8StringEncoding];
            int isBackSpace = strcmp(_char, "\b");

            if (isBackSpace == -8) {
                NSLog(@"isBackSpace");

                if (textField.text.length == 9)
                {

                }

                return YES; // is backspace
            }
            else if (textField.text.length == 10) {
                return YES;
            }
        }
        return NO;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:51:09.217

我可以想出一种技术来获得你想要的东西，但它需要一些代码。本质上，始终在字符串的前面保留一个 Unicode“空格”字符。我没有带我的书，但是你可以使用一个非常薄的空间字符。

您将把大部分代码放在这里：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

*   当字段开始编辑时，在任何字符串前面加上空格
*   当用户追加在 shouldChangeCharactersInRange 中看到的文本时，追加它。
*   如果用户试图删除最后一个字符或包含它的范围，则返回 NO，进行更改，然后添加回前导空格字符。
*   当 textField 完成编辑时，删除前导空格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T08:47:09.653

```
[[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(keyPressed:) name: UITextFieldTextDidChangeNotification object: nil]; 
```

这就是您在用户按下的每个键时收到通知的方式。然后你必须弄清楚（我认为在通知中是它的一个属性）按下了哪个键。

或者您可以使用文本字段委托功能

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

找出按下了什么键

# asp.net-web-api - 如何在 ASP.NET Web API 中验证文件上传

> ID：12259568
> 
> 赞同：6
> 
> 时间：2012-09-04T08:29:35.517
> 
> 标签：asp.net-web-api

我想在 ASP.NET Web API 中验证文件上传的文件扩展名（注意：我意识到这不是一个完整的验证方法）。

我正在使用`MultipartFormDataStreamProvider`来处理 POSTed 文件。由于`Request.Content.Headers.ContentDisposition`在提供程序处理文件（通过`ReadAsMultipartAsync`）之前为 null，因此验证请求的文件名的最佳位置在哪里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T09:09:55.553

您可以从 MultipartFormDataStreamProvider 继承并覆盖 GetLocalFileName（在将内容读入流之后运行）或 GetStream（在将内容读入流之前运行）。在这两种情况下，您都可以访问`headers.ContentDisposition.FileName`

```
public class CustomMultipartFormDataStreamProvider : MultipartFormDataStreamProvider
{
    public CustomMultipartFormDataStreamProvider(string path)
        : base(path)
    {
    }

    public override string GetLocalFileName(System.Net.Http.Headers.HttpContentHeaders headers)
    {
        //validate headers.ContentDisposition.FileName as it will have the name+extension
        //then do something (throw error, continue with base or implement own logic)
    }

    public override Stream GetStream(HttpContent parent, System.Net.Http.Headers.HttpContentHeaders headers)
    {
        //validate headers.ContentDisposition.FileName as it will have the name+extension

        //then do something (throw error, continue with base or implement own logic)
    }
} 
```

# c++ - std::map 迭代器如何工作？

> ID：12259571
> 
> 赞同：16
> 
> 时间：2012-09-04T08:29:40.787
> 
> 标签：c++, map, tree, iterator

C++ STL 类 std::map 使用二叉树实现 O(log(n)) 查找。但是对于树，迭代器如何工作并不是很明显。++ 运算符在树结构中的实际含义是什么？尽管“下一个元素”的概念在数组中有明显的实现，但对我来说，在树中并不那么明显。如何实现树迭代器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T08:42:45.897

对于中序遍历（可能也适用于其他人），如果您的节点中有父指针，则可以进行非递归遍历。应该可以只在迭代器中存储两个指针：您需要指示您在哪里，并且您可能（我现在不做研究）需要类似“previous”指针的东西，这样您就可以弄清楚您当前的移动方向（即我是否需要进入左子树，或者我是否刚从它回来）。

如果我们刚刚进入节点，“ Previous”**可能****类似于“parent”；**“left”如果我们从左子树返回，“right”如果我们从右子树返回，“self”如果我们返回的最后一个节点是我们自己的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-09T11:29:34.173

我想添加我的两美分作为评论，但由于我不能，我将不得不添加一个答案。我一直在谷歌上搜索并且很沮丧，因为我找到的所有答案，这些除外，都假设一个堆栈或其他一些可变大小的数据结构。我确实找到[了一些代码](http://cs.brown.edu/people/jwicks/libstdc++/html_user/stl__tree_8h-source.html)。它表明它可以在没有堆栈的情况下完成，但我发现它很难遵循，因此决定从第一原则解决这个问题。

首先要注意的是该算法是“左贪心”的。因此，当我们从根开始时，我们会立即尽可能向左走，因为最左边的节点是我们首先需要的节点。这意味着我们永远不需要考虑左子树。它已经被迭代了。

迭代的顺序是左子树、节点、右子树。因此，如果我们位于给定节点，我们知道它的左子树和节点本身已经被访问过，我们接下来应该访问右子树，如果有的话，尽可能向左走。

否则，我们必须上树。如果我们要从一个左孩子到它的父母，那么接下来是父母。（之后我们将访问它的右子树，如前所述。）

最后一种情况是当我们从一个正确的孩子变成它的父母时。父母已经被拜访过，所以我们必须再次上去。事实上，我们必须继续向上直到我们到达根或树，或者发现自己从左孩子移动到父母。正如我们已经看到的，在这种情况下，父节点是下一个节点。（根可能由一个空指针表示，如在我的代码中，或一些特殊的哨兵节点。）

下面的代码可以很容易地适应 STL 风格的迭代器

```
// Go as far left from this node as you can.
// i.e. find the minimum node in this subtree
Node* Leftmost(Node* node)
{
    if (node == nullptr)
        return nullptr;
    while (node->left != nullptr)
        node = node->left;
    return node;
}

// Start iterating from a root node
Node* First(Node* root)
{
    return Leftmost(root);
}

// The iteration is current at node.  Return the next node
// in value order.
Node* Next(Node* node)
{
    // Make sure that the caller hasn't failed to stop.
    assert(node != nullptr);

    // If we have a right subtree we must iterate over it,
    // starting at its leftmost (minimal) node.

    if (node->right != nullptr)
        return Leftmost(node->right);

    // Otherwise we must go up the tree

    Node* parent = node->parent;
    if (parent == nullptr)
        return nullptr;

    // A node comes immediately after its left subtree

    if (node == parent->left)
        return parent;

    // This must be the right subtree!
    assert(node == parent->right);

    // In which case we need to go up again, looking for a node that is
    // its parent's left child.

    while (parent != nullptr && node != parent->left)
    {
        node = parent;
        parent = node->parent;
    }

    // We should be at a left child!
    assert(parent == nullptr || node == parent->left);

    // And, as we know, a node comes immediately after its left subtree

    return parent;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T08:34:21.030

考虑地图中不小于当前元素但也不是当前元素的所有元素的集合。“下一个元素”是该组元素中小于该组中所有其他元素的元素。

为了使用地图，您必须有一个密钥。并且该键必须实现“小于”操作。这决定了映射的形成方式，以便查找、添加、删除、递增和递减操作是有效的。

通常，地图内部使用某种树。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-27T19:47:35.217

*stl_tree.h*中映射迭代器运算符++ watch 的标准实现：

```
_Self&
operator++() _GLIBCXX_NOEXCEPT
{
_M_node = _Rb_tree_increment(_M_node);
return *this;
} 
```

`_Rb_tree_increment`实现在[这里讨论](https://stackoverflow.com/a/17150988/14934019)

# javascript - 带参数的 onclick 调用

> ID：12259572
> 
> 赞同：0
> 
> 时间：2012-09-04T08:29:47.430
> 
> 标签：javascript

我有一个函数，如下所示：

```
menu[0].onclick = function() {
    filters.reset_all();
    clients.get();
} 
```

因此，当用户单击第一个菜单元素时会调用它。现在我需要从另一个地方调用它，我所做的是：

```
 if (li.onclick) { //li and menu[0] above are the same
        li.onclick.call();
    } 
```

它运作良好。

但现在我需要传递一些参数来`onclick`运行。我试过了，`.call(some_param);`但`arguments`数组`onclick`是空的。

我究竟做错了什么？

**编辑：**更改为：

```
menu[0].onclick = function(arg) {
    console.log(arg);
    filters.reset_all();
    clients.get();
} 
```

和

```
li.onclick.call(li,param); 
```

依然没有

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T08:35:04.930

第一个参数`.call()`是`this`指针的值。第二个、第三个等...参数被传递给函数。`.call()`仅当您明确尝试设置`this`指针时才需要使用。否则，您可以直接调用该函数`li.onclick()`。

事件处理程序通常由系统调用，当发生这种情况时，它们将作为第一个参数传递给事件对象。如果您想要一个可以使用不同参数的函数，您应该为此创建自己的函数，而不是使用事件处理函数。如果需要，您的事件处理程序也可以调用此其他函数。

```
menu[0].onclick = function() {
    myFunc("aaa");
}

function myFunc(arg1) {
    // do whatever here
    filters.reset_all();
    clients.get();
}

if (li.onclick) {
    myFunc("bbb");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:38:17.943

的第一个参数`call()`是上下文（在这种情况下`this`），其余参数按顺序进入参数数组。如果您使用`apply()`而不是调用，那么您只有两个参数：`apply(this, arguments_array)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T08:39:06.893

它应该是

```
call(object, param1, param2, param3...); 
```

在你的情况下，你可以写

```
li.onclick.call(li, param1); 
```

# postgresql - Bitmap Heap Scan 和 Index Scan 是如何决定的？

> ID：12259573
> 
> 赞同：9
> 
> 时间：2012-09-04T08:29:49.243
> 
> 标签：postgresql, query-optimization, indexing

我正在测试不同的查询，我很好奇 db 如何决定使用 Bitmap Heap Scan 和 Index Scan。

> 在客户上创建索引customers_email_idx（电子邮件varchar_pattern_ops）；

如您所见，有一个客户表（dellstore 示例），我在电子邮件列中添加了一个索引。

第一个查询在这里：

> 从电子邮件中选择 *，例如“ITQ%@dell.com”；**-> 使用索引扫描查询**

解释分析查询在这里：

```
 QUERY PLAN                                                            
---------------------------------------------------------------------------------------------------------------------------------
 Index Scan using customers_email_idx on customers  (cost=0.00..8.27 rows=2 width=268) (actual time=0.046..0.046 rows=0 loops=1)
   Index Cond: (((email)::text ~>=~ 'ITQ'::text) AND ((email)::text ~<~ 'ITR'::text))
   Filter: ((email)::text ~~ 'ITQ%@dell.com
 '::text)
 Total runtime: 0.113 ms 
```

其他查询在这里：

> 从电子邮件中选择 *，例如“IT%@dell.com”；**-> 使用位图堆扫描查询**

解释分析查询在这里：

```
 QUERY PLAN                                                          
------------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on customers  (cost=4.54..106.77 rows=2 width=268) (actual time=0.206..0.206 rows=0 loops=1)
   Filter: ((email)::text ~~ 'IT%@dell.com
 '::text)
   ->  Bitmap Index Scan on customers_email_idx  (cost=0.00..4.54 rows=29 width=0) (actual time=0.084..0.084 rows=28 loops=1)
         Index Cond: (((email)::text ~>=~ 'IT'::text) AND ((email)::text ~<~ 'IU'::text))
 Total runtime: 0.273 ms 
```

你能解释一下为什么在这里使用位图和索引扫描这个例子吗？

谢谢..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T10:35:32.550

表中总共有多少行？该决定基于索引扫描将输出的行的比例。

如果要访问足够高比例的表，则使用位图索引扫描来确保尽可能多的磁盘访问是顺序的。相比之下，普通索引扫描对表数据进行一次一页的随机访问。（并且如果预计要访问的表的比例足够高，则根本不使用索引，并且顺序加载整个表数据）

一个问题是，表中将要访问多少行的预测只是一个估计值。但正如您可以想象的那样，'IT%' 可能比 'ITQ%' 匹配更多（请记住，后缀不是索引扫描的一部分，只是最终过滤器）

# sql - 更新具有不同where条件的多行的查询？

> ID：12259574
> 
> 赞同：3
> 
> 时间：2012-09-04T08:29:49.190
> 
> 标签：sql, sql-update

如何在 sql 中编写更新查询以更新具有不同 where 条件的多行？例如，如果我想更改具有不同 id 的特定表的 100 行的名称？

```
update table set name = 'value1' where id=1,
             set name ='value2' where id=2; 
```

但是像这样我不能写100个条目。. 有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:32:07.943

您可以使用这 100 个条目创建一个临时表，然后通过加入这个新表来更新该表，例如：

```
CREATE TABLE Temp(
    Id int NOT NULL,
    Name Varchar(50)
) ;

UPDATE YourTable t1
INNER JOIN Temp t2 ON t1.Id = t2.Id
SET t1.Name = t2.Name; 
```

# java - open.mapquestapi.com：Java 中的 http 响应解码

> ID：12259577
> 
> 赞同：2
> 
> 时间：2012-09-04T08:29:56.077
> 
> 标签：java, http, decode

我想在 Java 中使用 open.mapquestapi.com。它工作正常，就我必须关心（德国）变音符号而言，让我们以德国城市“科隆”为例。

在Java中，我没有正确解码mapquestapi-response，我总是以“Köln”结束。

```
// String query.. e.g. "Hohenstaufenring 25, Köln"
URI uri = new URI("http", "open.mapquestapi.com", "/nominatim/v1/search", "format=json&addressdetails=1&email=[...]&countrycodes=DE&q=" + query, null);
URL mapqOsm = new URL(uri.toASCIIString());

BufferedReader reader = new BufferedReader(new InputStreamReader(mapqOsm.openStream(), "UTF-8"));

String response = "";
String line;
while ((line = reader.readLine()) != null) {
  response += line;
}
reader.close(); 
```

我必须以另一种方式解码“响应”，但我不知道如何正确解码它。源文件编码为 UTF-8。

如何正确解码 Java 中的 open.mapquestapi.com-response？

# android - 如何使用 ActionBar Sherlock 设置选项卡的样式

> ID：12259584
> 
> 赞同：2
> 
> 时间：2012-09-04T08:30:15.167
> 
> 标签：android, actionbarsherlock, styling, android-image, android-tabs

我有带有 ActionBar Sherlock 的标签栏菜单，它可以工作，但我想更改样式，我想将文本放在图片下方而不是对齐。

这就是我添加选项卡和片段的方式

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ActionBar actionBar = getSupportActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    actionBar.setDisplayShowTitleEnabled(true);

    Tab tab = actionBar.newTab()
                .setText("Resultados sorteos")
                .setTabListener(new ResultadosSorteosFragment())
                .setIcon(R.drawable.resultados_sorteos);

    actionBar.addTab(tab);

    tab = actionBar.newTab()
                .setText("Botes semana")
                .setTabListener(new BotesSemanaFragment())
                .setIcon(R.drawable.botes_semana);

    actionBar.addTab(tab);

    tab = actionBar.newTab()
                .setText("Sorteos Navidad")
                .setTabListener(new SorteosNavidadFragment())
                .setIcon(R.drawable.sorteo_navidad);

    actionBar.addTab(tab);

    tab = actionBar.newTab()
            .setText("Lector Loteria")
            .setTabListener(new LectorLoteriaFragment())
            .setIcon(R.drawable.lector_loteria);

            actionBar.addTab(tab);

    tab = actionBar.newTab()
            .setText("Sorteos Especiales")
            .setTabListener(new SorteosEspecialesFragment())
            .setIcon(R.drawable.sorteos_especiales);

    actionBar.addTab(tab); 
```

提前谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:21:51.720

您是否尝试过 Tab 类中的方法“setCustomView”。您可以创建所需的布局，然后将其添加到选项卡。因此，假设您创建了一个布局，其中包含一个 ImageView 和一个名为“my_stacked_layout”的 TextView。

然后，您可以执行以下操作：

```
Tab tab = actionBar.newTab();
tab.setCustomView(R.layout.my_stacked_layout);
tab.setTabListener(new BotesSemanaFragment());
actionBar.addTab(tab); 
```

# javascript - 使用javascript读写json文件

> ID：12259590
> 
> 赞同：7
> 
> 时间：2012-09-04T08:30:46.300
> 
> 标签：javascript, html, json

> **可能重复：**
> [如何使用 JavaScript 读写文件](https://stackoverflow.com/questions/585234/how-to-read-and-write-into-file-using-javascript)

任何人都可以提供示例代码来使用 javascript 读取和写入文件吗？

目前我正在尝试从 json 文件中读取输入并将其显示在文本框中，从而为用户提供编辑数据的灵活性。编辑后的数据必须写入 json 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:34:12.723

这是示例 html 文件，我已经用 firefox 对其进行了测试，工作正常。

```
<!DOCTYPE html>
<html>
    <head>
        <script>        
            function handleFileSelect()
            {               
                if (window.File && window.FileReader && window.FileList && window.Blob) {

                } else {
                    alert('The File APIs are not fully supported in this browser.');
                    return;
                }   

                input = document.getElementById('fileinput');
                if (!input) {
                  alert("Um, couldn't find the fileinput element.");
               }
               else if (!input.files) {
                  alert("This browser doesn't seem to support the `files` property of file inputs.");
               }
               else if (!input.files[0]) {
                  alert("Please select a file before clicking 'Load'");               
               }
               else {
                  file = input.files[0];
                  fr = new FileReader();
                  fr.onload = receivedText;
                  fr.readAsText(file);
               }
            }

            function receivedText() {           
               //result = fr.result;
               document.getElementById('editor').appendChild(document.createTextNode(fr.result))
            }           

        </script>
    </head>
    <body>
        <input type="file" id="fileinput"/>
        <input type='button' id='btnLoad' value='Load' onclick='handleFileSelect();'>
        <div id="editor"></div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:33:53.120

在浏览器中显示的网页中运行的 JavaScript 无法访问客户端文件系统。

但是你可以使用 API

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:41:56.687

（在 javascript 中没有文件编程）如果您的意思是在 javascript 中解析 json，那么：-

1.  您可以使用 Douglas Crockford JSON lib 进行解析：- JSON.parse 方法参考链接：- [http://www.json.org/js.html](http://www.json.org/js.html)

例子，

```
var abcd= "[{"name" : "sandeep"},{"name" :"Ramesh"}]"

abcd =JSON.parse(abcd);

for (var index=0;index<abcd.length;index++){

alert(abcd[i].name);
} 
```

# android - 在 Android 源代码中启用 Bluez 内核日志

> ID：12259592
> 
> 赞同：0
> 
> 时间：2012-09-04T08:30:51.017
> 
> 标签：android, logging, bluetooth, android-source, java.util.logging

我正在开发蓝牙应用程序，需要获取本机 Bluez 堆栈。

任何人都可以给出任何指示吗？我有完整的源代码，所以如果我需要修改任何文件并再次构建代码，那也会有所帮助。

提前感谢。

斯瓦普尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:50:21.793

1.  确保在配置文件中将 CONFIG_DYNAMIC_DEBUG 设置为“CONFIG_DYNAMIC_DEBUG=y”。
2.  启动完整的构建并将二进制映像闪存到目标。
3.  打开 ADB 命令提示符并键入以下命令序列：

    *   挂载 debugfs 接口 adb shell "mount -t debugfs debugfs /sys/kernel/debug"

    *   为模块 adb shell "echo -n \"file +p\" > /sys/kernel/debug/dynamic_debug/control 启用调试日志

    *   保存内核日志 adb shell "cat /proc/kmsg > sdcard/myl2cap.log"

干杯

# html - 以 100% 高度保持 div 周围的边距

> ID：12259593
> 
> 赞同：0
> 
> 时间：2012-09-04T08:30:54.917
> 
> 标签：html, css, positioning

我页面中的最后一个祖先 div 需要在所有四个边都有一个边距，以使其具有面板效果。这是我的代码：
CSS：

```
html, body {
height: 100%;
}
#wrapper {
width: 100%;
height: 100%;
}
#bibletree {
width: 20%;
float: left;
height: 100%;
}
.inner {  /*this is the div that I need a margin around, so it is by 10px of the #bibletree div on all sides, including the bottom.*/
overflow: auto;
} 
```

HTML：

```
<div id="wrapper">
<div id="bibletree">
<div class="inner">my content here, both short and long</div>
</div>
</div> 
```

正如您可能猜到的那样，这里发生的事情比所写的要多得多。我有几个带有 div 的列，它们都需要这个边距来实现`.inner`div 上的面板效果。谢谢你的帮助。

顺便说一句，我尝试过绝对定位，它仅基于窗口定位，而不是父元素，即使我将父元素设置为`position: relative`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:33:56.203

如果将 .inner 设置为宽度 100% 并添加边距，它将比其容器宽。您可以设置填充或边框。例如，您可以添加 10 像素的白色或透明边框。

另一种选择是使 #bibletree 位置相对，然后使 .inner 位置绝对并指定顶部、底部、右侧和左侧：

```
.inner {
    bottom: 10px;
    top: 10px;
    left: 10px;
    right: 10px;
    position: absolute;
} 
```

这将使它的大小与#bibletree 相同，每边减去 10 像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:42:18.817

边距：10px 工作正常吗？您无需指定内部 div 的宽度，因为 div 已经具有块选项。在这里查看更新的演示[http://jsfiddle.net/QShRZ/5/](http://jsfiddle.net/QShRZ/5/)

# vba - 将 csv 文件加载到 VBA 数组而不是 Excel 表中

> ID：12259595
> 
> 赞同：24
> 
> 时间：2012-09-04T08:31:03.147
> 
> 标签：vba, excel

我目前可以通过下面的代码上传数据然后处理表格，从而将 csv 文件数据输入 Excel VBA，这肯定不是最好的方法，因为我只对某些数据感兴趣并在使用数据后删除表格：

```
Sub CSV_Import() 
Dim ws As Worksheet, strFile As String 

Set ws = ActiveSheet 'set to current worksheet name 

strFile = Application.GetOpenFilename("Text Files (*.csv),*.csv", ,"Please select text file...") 

With ws.QueryTables.Add(Connection:="TEXT;" & strFile, Destination:=ws.Range("A1")) 
     .TextFileParseType = xlDelimited 
     .TextFileCommaDelimiter = True 
     .Refresh 
End With 
End Sub 
```

是否可以简单地将 csv 加载到 VBA 中的二维变量数组中，而不是通过使用 excel 工作表？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-05T14:39:34.000

好的，看起来您需要两件事：从文件中流式传输数据，并填充二维数组。

我有一个“Join2d”和一个“Split2d”函数（我记得不久前在 StackOverflow 上的另一个回复中发布了它们）。请查看代码中的注释，如果您正在处理大文件，您可能需要了解有关高效字符串处理的一些信息。

但是，它使用起来并不复杂：如果您赶时间，只需粘贴代码即可。

流式传输文件很简单，但我们对文件格式进行了假设：文件中的行是由回车字符还是回车和换行字符对分隔的？我假设'CR'而不是CRLF，但你需要检查一下。

关于格式的另一个假设是数字数据将按原样显示，而字符串或字符数据将被封装在引号中。这*应该*是正确的，但通常不是......并且去掉引号会增加很多处理 - 大量分配和释放字符串 - 你真的不想在一个大数组中做这些。我已经缩短了明显的逐个单元查找和替换的方法，但这仍然是大文件的问题。

**如果您的文件在字符串值中嵌入了逗号，则此代码将不起作用**：并且不要尝试编写一个解析器来挑选封装的文本并在将数据行拆分为单个字段时跳过这些嵌入的逗号，因为这种密集的字符串处理无法通过 VBA 优化为快速可靠的 csv 阅读器。

无论如何：这是源代码：注意 StackOverflow 的文本框控件插入的换行符：

**运行代码：**

请注意，您需要参考 Microsoft 脚本运行时 (system32\scrrun32.dll)

```
Private Sub test()
    Dim arrX As Variant
    arrX = ArrayFromCSVfile("MyFile.csv")
End Sub 
```

**流式传输 csv 文件。**

请注意，我假设您的文件位于临时文件夹中：C:\Documents and Settings[$USERNAME]\Local Settings\Temp 您需要使用文件系统命令将文件复制到本地文件夹中：它总是比跨网络工作。

```
Public Function ArrayFromCSVfile( _
    strName As String, _
    Optional RowDelimiter As String = vbCr, _
    Optional FieldDelimiter = ",", _
    Optional RemoveQuotes As Boolean = True _
) As Variant

    ' Load a file created by FileToArray into a 2-dimensional array
    ' The file name is specified by strName, and it is exected to exist
    ' in the user's temporary folder. This is a deliberate restriction:
    ' it's always faster to copy remote files to a local drive than to
    ' edit them across the network

    ' RemoveQuotes=TRUE strips out the double-quote marks (Char 34) that
    ' encapsulate strings in most csv files.

    On Error Resume Next

    Dim objFSO As Scripting.FileSystemObject
    Dim arrData As Variant
    Dim strFile As String
    Dim strTemp As String

    Set objFSO = New Scripting.FileSystemObject
    strTemp = objFSO.GetSpecialFolder(Scripting.TemporaryFolder).ShortPath
    strFile = objFSO.BuildPath(strTemp, strName)
    If Not objFSO.FileExists(strFile) Then  ' raise an error?
        Exit Function
    End If

    Application.StatusBar = "Reading the file... (" & strName & ")"

    If Not RemoveQuotes Then
        arrData = Join2d(objFSO.OpenTextFile(strFile, ForReading).ReadAll, RowDelimiter, FieldDelimiter)
        Application.StatusBar = "Reading the file... Done"
    Else
        ' we have to do some allocation here...

        strTemp = objFSO.OpenTextFile(strFile, ForReading).ReadAll
        Application.StatusBar = "Reading the file... Done"

        Application.StatusBar = "Parsing the file..."

        strTemp = Replace$(strTemp, Chr(34) & RowDelimiter, RowDelimiter)
        strTemp = Replace$(strTemp, RowDelimiter & Chr(34), RowDelimiter)
        strTemp = Replace$(strTemp, Chr(34) & FieldDelimiter, FieldDelimiter)
        strTemp = Replace$(strTemp, FieldDelimiter & Chr(34), FieldDelimiter)

        If Right$(strTemp, Len(strTemp)) = Chr(34) Then
            strTemp = Left$(strTemp, Len(strTemp) - 1)
        End If

        If Left$(strTemp, 1) = Chr(34) Then
            strTemp = Right$(strTemp, Len(strTemp) - 1)
        End If

        Application.StatusBar = "Parsing the file... Done"
        arrData = Split2d(strTemp, RowDelimiter, FieldDelimiter)
        strTemp = ""
    End If

    Application.StatusBar = False

    Set objFSO = Nothing
    ArrayFromCSVfile = arrData
    Erase arrData
End Function 
```

**Split2d** 从字符串创建二维 VBA 数组：

```
Public Function Split2d(ByRef strInput As String, _
    Optional RowDelimiter As String = vbCr, _
    Optional FieldDelimiter = vbTab, _
    Optional CoerceLowerBound As Long = 0 _
    ) As Variant

    ' Split up a string into a 2-dimensional array.

    ' Works like VBA.Strings.Split, for a 2-dimensional array.
    ' Check your lower bounds on return: never assume that any array in
    ' VBA is zero-based, even if you've set Option Base 0
    ' If in doubt, coerce the lower bounds to 0 or 1 by setting
    ' CoerceLowerBound
    ' Note that the default delimiters are those inserted into the
    '  string returned by ADODB.Recordset.GetString

    On Error Resume Next

    ' Coding note: we're not doing any string-handling in VBA.Strings -
    ' allocating, deallocating and (especially!) concatenating are SLOW.
    ' We're using the VBA Join & Split functions ONLY. The VBA Join,
    ' Split, & Replace functions are linked directly to fast (by VBA
    ' standards) functions in the native Windows code. Feel free to
    ' optimise further by declaring and using the Kernel string functions
    ' if you want to.

    ' ** THIS CODE IS IN THE PUBLIC DOMAIN **
    '    Nigel Heffernan   Excellerando.Blogspot.com

    Dim i   As Long
    Dim j   As Long

    Dim i_n As Long
    Dim j_n As Long

    Dim i_lBound As Long
    Dim i_uBound As Long
    Dim j_lBound As Long
    Dim j_uBound As Long

    Dim arrTemp1 As Variant
    Dim arrTemp2 As Variant

    arrTemp1 = Split(strInput, RowDelimiter)

    i_lBound = LBound(arrTemp1)
    i_uBound = UBound(arrTemp1)

    If VBA.LenB(arrTemp1(i_uBound)) <= 0 Then
        ' clip out empty last row: a common artifact in data
         'loaded from files with a terminating row delimiter
        i_uBound = i_uBound - 1
    End If

    i = i_lBound
    arrTemp2 = Split(arrTemp1(i), FieldDelimiter)

    j_lBound = LBound(arrTemp2)
    j_uBound = UBound(arrTemp2)

    If VBA.LenB(arrTemp2(j_uBound)) <= 0 Then
     ' ! potential error: first row with an empty last field...
        j_uBound = j_uBound - 1
    End If

    i_n = CoerceLowerBound - i_lBound
    j_n = CoerceLowerBound - j_lBound

    ReDim arrData(i_lBound + i_n To i_uBound + i_n, j_lBound + j_n To j_uBound + j_n)

    ' As we've got the first row already... populate it
    ' here, and start the main loop from lbound+1

    For j = j_lBound To j_uBound
        arrData(i_lBound + i_n, j + j_n) = arrTemp2(j)
    Next j

    For i = i_lBound + 1 To i_uBound Step 1

        arrTemp2 = Split(arrTemp1(i), FieldDelimiter)

        For j = j_lBound To j_uBound Step 1
            arrData(i + i_n, j + j_n) = arrTemp2(j)
        Next j

        Erase arrTemp2

    Next i

    Erase arrTemp1

    Application.StatusBar = False

    Split2d = arrData

End Function 
```

**Join2D** 将二维 VBA 数组转换为字符串：

```
Public Function Join2d(ByRef InputArray As Variant, _
    Optional RowDelimiter As String = vbCr, _
    Optional FieldDelimiter = vbTab, _
    Optional SkipBlankRows As Boolean = False _
    ) As String

    ' Join up a 2-dimensional array into a string. Works like the standard
    '  VBA.Strings.Join, for a 2-dimensional array.
    ' Note that the default delimiters are those inserted into the string
    '  returned by ADODB.Recordset.GetString

    On Error Resume Next

    ' Coding note: we're not doing any string-handling in VBA.Strings -
    ' allocating, deallocating and (especially!) concatenating are SLOW.
    ' We're using the VBA Join & Split functions ONLY. The VBA Join,
    ' Split, & Replace functions are linked directly to fast (by VBA
    ' standards) functions in the native Windows code. Feel free to
    ' optimise further by declaring and using the Kernel string functions
    ' if you want to.

    ' ** THIS CODE IS IN THE PUBLIC DOMAIN **
    '   Nigel Heffernan   Excellerando.Blogspot.com

    Dim i As Long
    Dim j As Long

    Dim i_lBound As Long
    Dim i_uBound As Long
    Dim j_lBound As Long
    Dim j_uBound As Long

    Dim arrTemp1() As String
    Dim arrTemp2() As String

    Dim strBlankRow As String

    i_lBound = LBound(InputArray, 1)
    i_uBound = UBound(InputArray, 1)

    j_lBound = LBound(InputArray, 2)
    j_uBound = UBound(InputArray, 2)

    ReDim arrTemp1(i_lBound To i_uBound)
    ReDim arrTemp2(j_lBound To j_uBound)

    For i = i_lBound To i_uBound

        For j = j_lBound To j_uBound
            arrTemp2(j) = InputArray(i, j)
        Next j

        arrTemp1(i) = Join(arrTemp2, FieldDelimiter)

    Next i

    If SkipBlankRows Then

        If Len(FieldDelimiter) = 1 Then
            strBlankRow = String(j_uBound - j_lBound, FieldDelimiter)
        Else
            For j = j_lBound To j_uBound
                strBlankRow = strBlankRow & FieldDelimiter
            Next j
        End If

        Join2d = Replace(Join(arrTemp1, RowDelimiter), strBlankRow, RowDelimiter, "")
        i = Len(strBlankRow & RowDelimiter)

        If Left(Join2d, i) = strBlankRow & RowDelimiter Then
            Mid$(Join2d, 1, i) = ""
        End If

    Else

        Join2d = Join(arrTemp1, RowDelimiter)

    End If

    Erase arrTemp1

End Function 
```

分享和享受。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-04T08:39:00.050

是的，将其作为文本文件读取。

看这个例子

```
Option Explicit

Sub Sample()
    Dim MyData As String, strData() As String

    Open "C:\MyFile.CSV" For Binary As #1
    MyData = Space$(LOF(1))
    Get #1, , MyData
    Close #1
    strData() = Split(MyData, vbCrLf)
End Sub 
```

**跟进**

就像我在下面的评论中提到的，AFAIK，没有直接的方法可以从 csv 填充二维数组。您将不得不使用我上面给出的代码，然后将其按行拆分，最后填充一个可能很麻烦的二维数组。填充一列很容易，但如果您特别想从第 5 行到第 7 列数据说，那么它会变得很麻烦，因为您必须检查数据中是否有足够的列/行。这是在 2D 数组中获取 Col B 的基本示例。

**注意**：我没有做任何错误处理。我相信你可以解决这个问题。

假设我们的 CSV 文件看起来像这样。

![在此处输入图像描述](../Images/fb42fb7fdf057c9b46248b43d3c4f0dd.png)

当您运行此代码时

```
Option Explicit

Const Delim As String = ","

Sub Sample()
    Dim MyData As String, strData() As String, TmpAr() As String
    Dim TwoDArray() As String
    Dim i As Long, n As Long

    Open "C:\Users\Siddharth Rout\Desktop\Sample.CSV" For Binary As #1
    MyData = Space$(LOF(1))
    Get #1, , MyData
    Close #1
    strData() = Split(MyData, vbCrLf)

    n = 0

    For i = LBound(strData) To UBound(strData)
        If Len(Trim(strData(i))) <> 0 Then
            TmpAr = Split(strData(i), Delim)
            n = n + 1
            ReDim Preserve TwoDArray(1, 1 To n)
            '~~> TmpAr(1) : 1 for Col B, 0 would be A
            TwoDArray(1, n) = TmpAr(1)
        End If
    Next i

    For i = 1 To n
        Debug.Print TwoDArray(1, i)
    Next i
End Sub 
```

您将获得如下所示的输出

![在此处输入图像描述](../Images/73f5ae02bcb82d742bc96334cf246af9.png)

顺便说一句，我很好奇，既然你在 Excel 中这样做，为什么不使用内置`Workbooks.Open`或`QueryTables`方法，然后将范围读入二维数组？那会简单很多...

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-14T15:05:55.930

好的，经过调查，我得到的解决方案是使用 ADODB（需要引用 ActiveX 数据对象，这会将 csv 文件加载到数组中而不循环行列。确实需要数据处于良好状态。

```
Sub LoadCSVtoArray()

strPath = ThisWorkbook.Path & "\"

Set cn = CreateObject("ADODB.Connection")
strcon = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & strPath & ";Extended Properties=""text;HDR=Yes;FMT=Delimited"";"
cn.Open strcon
strSQL = "SELECT * FROM SAMPLE.csv;"

Dim rs As Recordset
Dim rsARR() As Variant

Set rs = cn.Execute(strSQL)
rsARR = WorksheetFunction.Transpose(rs.GetRows)
rs.Close
Set cn = Nothing

[a1].Resize(UBound(rsARR), UBound(Application.Transpose(rsARR))) = rsARR

End Sub 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-20T15:20:38.687

为了将已知格式的 csv 数据文件转换为 2D 数组，我最终采用了以下方法，该方法似乎效果很好，速度也很快。我决定现在文件读取操作相当快，所以我对 csv 文件运行了第一次，以获得数组的两个维度所需的大小。使用适当尺寸的数组，然后逐行重新读取文件并填充数组是一项简单的任务。

```
Function ImportTestData(ByRef srcFile As String, _
                        ByRef dataArr As Variant) _
                        As Boolean

Dim FSO As FileSystemObject, Fo As TextStream
Dim line As String, Arr As Variant
Dim lc As Long, cc As Long
Dim i As Long, j As Long

ImportTestData = False
Set FSO = CreateObject("Scripting.FilesystemObject")
Set Fo = FSO.OpenTextFile(srcFile)

' First pass; read the file to get array size
lc = 0 ' Counter for number of lines in the file
cc = 0 ' Counter for number of columns in the file
While Not Fo.AtEndOfStream  ' Read the csv file line by line
    line = Fo.ReadLine
    If lc = 0 Then ' Count commas to get array's 2nd dim index
        cc = 1 + Len(line) - Len(Replace(line, ",", ""))
    End If
    lc = lc + 1
Wend
Fo.Close

' Set array dimensions to accept file contents
ReDim dataArr(0 To lc - 1, 0 To cc - 1)
'Debug.Print "CSV has "; n; " rows with "; lc; " fields/row"
If lc > 1 And cc > 1 Then
    ImportTestData = True
End If

' Second pass; Re-open data file and copy to array
Set Fo = FSO.OpenTextFile(srcFile)
lc = 0
While Not Fo.AtEndOfStream
    line = Fo.ReadLine
    Arr = Split(line, ",")
    For i = 0 To UBound(Arr)
        dataArr(lc, i) = Arr(i)
    Next i
    lc = lc + 1
Wend

End Function   'ImportTestData() 
```

如果需要，我将其创建为 Function 而不是 Sub 以获得简单的返回值。读取包含 8,500 行 20 列的文件大约需要 180 毫秒。
此方法假定 CSV 文件的结构（分隔符的数量）对于每一行都是相同的，这是数据记录应用程序的典型特征。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-16T13:21:19.617

或者，您可以使用这样的代码

```
Dim line As String, Arr
Dim FSO As Object, Fo As Object
Set FSO = CreateObject("Scripting.FileSystemObject")
Set Fo = FSO.OpenTextFile("csvfile.csv")
While Not Fo.AtEndOfStream
 line = Fo.ReadLine      ' Read the csv file line by line
 Arr = Split(line, ",")  ' The csv line is loaded into the Arr as an array
 For i = 0 To UBound(Arr) - 1: Debug.Print Arr(i) & " ";: Next
 Debug.Print
Wend

 01/01/2019 1 1 1 36 55.6 0.8 85.3 95 95 109 102 97 6 2.5 2.5 3.9 
 01/01/2019 1 2 0 24 0.0 2.5 72.1 89 0 0 97 95 10 6.7 4.9 3.9 
 01/01/2019 1 3 1 36 26.3 4 80.6 92 92 101 97 97 8 5.5 5.3 3.7 
 01/01/2019 1 4 0 16 30.0 8 79.2 75 74 87 87 86 10 3.8 4 4.2 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-05T21:01:39.247

## 以下解决方案不使用 ActiveX：

我编写了将 csv（实际上是制表符分隔）文件导入数组的代码。该代码如下。

首先让我们指定数组（最初它是完全无效的，但稍后会适当调整大小）：

```
Dim TxtFile$() 
```

现在为子程序：

```
' Fills TxtFile$() array
Sub FillTextFileArray(A$)

'***********************************************************************
' Declarations
'***********************************************************************
Dim I, J As Integer
Dim LineString As String
'***********************************************************************

I = -1: J = 0    ' Will hold array dimentions

Open A$ For Input As #1

Do While Not EOF(1)    ' Loop until end of file.
    Line Input #1, LineString
    LineString = LineString + vbTab    ' If not done empty lines give error with Split()
    I = I + 1
    If J < UBound(Split(LineString, vbTab)) Then J = UBound(Split(LineString, vbTab))
Loop

ReDim TxtFile$(1 To I + 4, 1 To J + 4)    ' Not indexed from 0 ! (Plus some room at the end.) This is done to match worksheet format.
Seek #1, 1    ' Reset to start

I = -1    ' Will hold array row index
Do While Not EOF(1)    ' Loop until end of file.
    Line Input #1, LineString
    LineString = LineString + vbTab    ' If not done empty lines give error with Split()
    I = I + 1
    For J = 0 To UBound(Split(LineString, vbTab))
        TxtFile$(I + 1, J + 1) = Split(LineString, vbTab)(J)
    Next J
Loop

Close #1    ' Close file.

' TxtFile$() now holds the contents of the text file

End Sub 
```

显然你可以用 TxtFile$ 数组做你想做的事。A$ 是文本文件的位置和名称。如前所述，此特定代码适用于制表符分隔的文件（vbTab），而不是逗号分隔（分隔），但任何适应都不会太困难。它具有避免 ActiveX 并发症的优点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-27T13:56:04.737

这些天来，GitHub 托管了至少三个 CSV 解析器，它们完全按照 OP 的要求执行 - 将 CSV 文件加载到 VBA 数组中。

我是这个的作者：
[https ://github.com/PGS62/VBA-CSV](https://github.com/PGS62/VBA-CSV)

它处理各种各样的 CSV 文件，包括那些带有“嵌入式”逗号、换行符等的文件，以及每行具有不同数量字段的文件。我在 README 文件中提供了指向替代 VBA CSV 解析器的链接。

# database - phpmyadmin - 删除重复项

> ID：12259597
> 
> 赞同：0
> 
> 时间：2012-09-04T08:31:06.933
> 
> 标签：database, phpmyadmin, duplicates

你能告诉我，我应该如何构造 sql 查询来删除我的数据库中的重复项？

请看结构：

```
---------------------------------------
| id | search_text | search_text_link |
---------------------------------------
| 1  | qwerty      | qwerty.html      | 
| 2  | qwerty123   | qwerty123.html   | 
| 3  | qwerty456   | qwerty456.html   | 
| 4  | qwerty      | qwerty000.html   | 
--------------------------------------- 
```

我想通过**search_text**行删除所有重复项。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:33:56.923

试试这个（备份后）：

```
DELETE t1 
FROM your_table t1, your_table t2 
WHERE t1.id > t2.id 
  AND t1.search_text = t2.search_text 
```

# java - Jmx 连接客户端

> ID：12259598
> 
> 赞同：1
> 
> 时间：2012-09-04T08:31:08.307
> 
> 标签：java, jmx

我想创建一个 JMX 客户端，它可以与我的服务器一起使用。我可以使用 jconsole 连接到我的服务器，但是如何使用 java 代码来连接。

这是我的服务器代码：

```
 MBeanServer mbeanServer = ManagementFactory
                .getPlatformMBeanServer();

        //giving name for service
        ObjectName objectName = new ObjectName("bean:name=logService");
        RequiredModelMBean mbean = new RequiredModelMBean();

        mbean.setManagedResource(logService, "objectReference");

        Descriptor logStringDescriptor = new DescriptorSupport(
                new String[] { "name=logString",
                        "descriptorType=attribute",
                        "getMethod=getLogString", "setMethod=setLogString" });

        ModelMBeanAttributeInfo logStringAttribute = new ModelMBeanAttributeInfo(
                "logString", "java.lang.String", "String to be logged",
                true, true, false, logStringDescriptor);

        ModelMBeanOperationInfo getLogStringOperation = new ModelMBeanOperationInfo(
                "Get the log string",
                LoggerService.class.getMethod("getLogString"));

        ModelMBeanOperationInfo setLogStringOperation = new ModelMBeanOperationInfo(
                "Set the log string", LoggerService.class.getMethod(
                        "setLogString", String.class));

        ModelMBeanInfo mbeanInfo = new ModelMBeanInfoSupport(
                "LoggerService", "Logger Service",
                new ModelMBeanAttributeInfo[] { logStringAttribute }, null,
                new ModelMBeanOperationInfo[] { getLogStringOperation,
                        setLogStringOperation }, null);

        mbean.setModelMBeanInfo(mbeanInfo);
        mbeanServer.registerMBean(mbean, objectName); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:02:38.837

这很简单:)

```
 MBeanServer mbeanServer = ManagementFactory
                .getPlatformMBeanServer();

        //giving name for service
        ObjectName objectName = new ObjectName("bean:name=logService");

        String str = (String) mbeanServer.getAttribute (objectName, "logString");
        System.out.println(str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:42:54.853

您必须创建一个 JMX 代理，它将成为您的 MBeans 服务器的包装器，并允许使用特殊适配器通过外部进程连接到您的应用程序。此适配器将允许您的客户端使用特定协议（SNMP、HTTP 等）或技术 (RMI) 连接到 MBean 服务器。您可以在此处阅读有关适配器的信息：http: [//marxsoftware.blogspot.com/2008/08/remote-jmx-connectors-and-adapters.html](http://marxsoftware.blogspot.com/2008/08/remote-jmx-connectors-and-adapters.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-14T17:43:16.110

```
public static <T> T createJmxClient(Class<T> clazz, String objectName, String serviceUrl) {
    return createJmxClient(clazz, objectName, serviceUrl, null, null);
}

public static <T> T createJmxClient(Class<T> clazz, String objectName, String serviceUrl, final String user, final String pass) {
    try {
        JMXServiceURL jmxServiceUrl = new JMXServiceURL(serviceUrl);
        Map<String, ?> env = user == null ? null : new HashMap<String, Object>() {{
            put(JMXConnector.CREDENTIALS, new String[] {user, pass});
        }};
        JMXConnector jmxc = JMXConnectorFactory.connect(jmxServiceUrl, env);
        MBeanServerConnection mbsc = jmxc.getMBeanServerConnection();
        ObjectName mbeanName = new ObjectName(objectName);
        return JMX.newMBeanProxy(mbsc, mbeanName, clazz, true);
    } catch (IOException | MalformedObjectNameException e) {
        throw new RuntimeException("Can not create client for remote JMX " + serviceUrl, e);
    }
} 
```

# jquery - jQuery backstretch 插件，记住上次显示的背景

> ID：12259603
> 
> 赞同：0
> 
> 时间：2012-09-04T08:31:37.177
> 
> 标签：jquery

我在我的网站上使用 backstretch 插件作为幻灯片。

```
var images = [
"images/bg6.jpg"
, "images/bg5.jpg"
, "images/bg2.jpg"
, "images/bg.jpg"
, "images/bg4.jpg"
, "images/bg3.jpg"
]; 
```

这些是我的背景图片：

幻灯片以 10 秒之间的开头`bg6.jpg`和类似`bg5...bg2...bg...`（数组中的相同顺序）.. 开始。认为当前显示的图像是`bg4.jpg`。访问者刷新了页面。它通常从头开始。我希望插件从最后显示的背景开始。

我做了一点工作，我可以动态创建那个部分（我复制粘贴的那个），但问题是，我怎样才能从 backstretch jQuery 插件中获取“当前显示的背景图像”。

那么，有没有办法获取 jQuery 显示的当前图像？如果我能得到它，我可以从 ASP.NET 设置它，刷新后，回弹将从该图像开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-07T12:21:04.143

```
try like this...

 <script>
        jQuery(document).ready(function () {               
            $.backstretch([
             "images/bg6.jpg",
             "images/bg5.jpg",
             "images/bg2.jpg",
             "images/bg.jpg",
             "images/bg4.jpg",
             "images/bg3.jpg"
            ], {
                fade: 1000,
                duration: 8000
            });
        });
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:37:43.057

像这样的东西：

```
$(document).unload(function(){

var lstimg = //Get your last image URL from DOM or whatever.jpg
document.location.href + "#" + lstimg;

});

$(document).load(function(){

//Make your code to look at #hash then to start from that image on document load

}); 
```

# php - 从 PHP 将 DateUploaded 时间添加到 MS SQL 数据库

> ID：12259608
> 
> 赞同：0
> 
> 时间：2012-09-04T08:31:50.037
> 
> 标签：php, sql-server, insert, smalldatetime

在研究了一段时间后，我正在努力使用隐藏的表单字段和 PHP MS SQL 查询在提交数据时添加上传到数据库的日期。类似于 MySQL NOW() 函数的东西。我已经尝试过但不起作用。然后我还尝试了 PHP 日期函数。

```
<input type="hidden" name="DateUploaded" value="<?php date("d","m","y") ?>"> 
```

我的上传看起来像这样：

```
<?php 
 $Title=$_POST['Title'];
 $Synopsis=$_POST['Synopsis'];
  $Article=$_POST['Article'];
  $DateUploaded=$_POST['DateUploaded'];
  $Deleted=$_POST['Deleted'];
  mssql_connect("*************", "*********", "*********") or die; 
  mssql_select_db("DBName") or die; 
  mssql_query("INSERT INTO DBTable (Title, Synopsis, Article, DateUploaded,   Deleted) VALUES ('$Title','$Synopsis','$Article','$DateUploaded','$Deleted')"); 
  Print "Your information has been successfully added to the database."; 
   ?> 
```

它只是一个简单的测试博客数据库，但是当我尝试这种技术时，我得到了这个错误：

```
Warning: mssql_query() [function.mssql-query]: message: Conversion failed when converting character string to smalldatetime data type. (severity 16) in (File Path) on line 9 
```

我理解这是因为我试图将字符串放入设置为 smalldatetime 的 DB 列中。我只是想知道是否有一种方法可以让我不必更改数据库中的数据类型？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:07:50.293

而不是使用隐藏字段，只需使用 php 的 date() ，例如：

```
$DateUploaded=date("Y-m-d H:i:s"); 
```

确保您的数据库文件具有**日期**类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:36:43.563

您可以在查询数据库之前生成时间戳值并写入该值，而表单中没有任何隐藏字段。您将节省安全漏洞，这将是更好的风格。

我的例子：

```
$dateUploaded = time(); 
```

有关详细信息，请参阅[time()](http://www.php.net/manual/en/function.time.php)函数。我建议您调查比隐藏字段更好的解决方案。

# sas - 在 proc 报告中结合 proc sql 步骤以在 excel 中创建报告

> ID：12259609
> 
> 赞同：0
> 
> 时间：2012-09-04T08:31:52.937
> 
> 标签：sas

```
ods html file = "Y:/cars/cars.xls";

proc sql;
title "Cars";
select
make,model,type,origin,drivetrain
from sashelp.class
where engine size gt 3;
quit; 
```

假设在 SAS 中运行上述查询后，我将得到 excel 格式的输出。那么，如何通过 proc 报告步骤获得相同的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:22:26.807

由于 sashelp.class 中没有任何汽车，因此您不会从中获得太多输出。

基本的 proc 报告步骤如下所示：

```
title "Cars";
proc report data=sashelp.cars nowd;
where enginesize gt 3;
columns make model type origin drivetrain;
run; 
```

我不会使用 PROC REPORT 只是为了做到这一点 - PROC REPORT 的重点是您可以使用的所有其他功能，在格式化选项、摘要选项等之间。

# php - 当从 select 标记触发 onChange 事件时，从 mysql 数据库加载 html 表

> ID：12259613
> 
> 赞同：1
> 
> 时间：2012-09-04T08:32:09.253
> 
> 标签：php, javascript, mysql, html, onchange

所以，这就是交易。我有一个要填充的 html 表。具体来说，第一行是用 mysql 数据库中的元素填充的行。准确的说，这张表是关于手机的问卷。第一行是从数据库中加载手机名称的标题。还有一个选择标签，其中包含公司名称作为选项。我需要在 select 标记上触发 onChange 事件以重新加载页面并用下拉列表中当前选择的公司的新手机名称重新填充第一行。这就是我的选择几乎看起来的样子：

```
<select name="select" class="companies" onChange="reloadPageWithNewElements()">
<?php
    $sql = "SELECT cname FROM companies;";
$rs = mysql_query($sql);

while($row = mysql_fetch_array($rs)) {
    echo "<option value=\"".$row['cname']."\">".$row['cname']."</option>\n  ";
}
?>
</select> 
```

所以...有没有办法用 onChange 刷新此页面并将所选值再次传递到同一页面并将其分配到新的 php 变量中，以便我可以执行我需要填写表格的查询？

```
<?php
//$mobileCompanies = $_GET["selectedValue"];
$sql = "SELECT mname FROM ".$mobileCompanies.";";
$rs = mysql_query($sql);
while ($row = mysql_fetch_array($rs)) { 
    echo "<td><div class=\"q1\">".$row['mname']."</div></td>";
}

?> 
```

像这样的东西。（reloadPageWithNewElements() 和 selectedValue 现在只是一个想法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:09:23.087

将值保存在 hidden 中`input`：

`<input type='hidden' value='<?php echo $row['cname'] ?>' id='someId' />`

在您的 JavaScript 函数中使用此隐藏输入字段中的值：

```
function reloadPageWithNewElements() {
    var selectedValue = document.getElementById('someId').value;
    // refresh page and send value as param
    window.location.href = window.location + '?someVal='+ selectedValue;
} 
```

现在再次在您的 PHP 文件中从 url 中检索此值以用作：

```
$someVal = null;

if (isset($_GET['someVal']) {
          $someVal = $_GET['someVal'];
} 
```

看看这是否有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:01:48.363

最好的选择是使用 AJAX。

reloadPageWithNewElements() 是一个函数，它调用您自己站点的页面，该页面将返回您想要放入表中的数据。

如果你使用的是 JQuery，AJAX 很容易实现：

```
$.ajax({
    url: '/yourPage',
    data: { selectedCompany: $('.companies').val() },
    success: function(result) {
        //delete your tablerows
        $(".classOfTable tr").remove();
        //put the result in your html table e.g.
        $('.classOfTable').append(result);
    },
    dataType: html
}); 
```

浏览器将向“/yourPage?selectedCompany=Google”或其他东西发送请求你所要做的就是让这个页面只打印出 html（也许更简单的是只打印 tablerow (<tr>)。

如果您有任何进一步的问题，请询问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:36:20.807

我会使用jQuery来做到这一点。

首先您需要为每个选项标签添加“id”属性

```
<option id="option1">
<option id="option2"> 
```

等等......然后使用jQuery：

```
$('<option>').change(function() {
   var id=$(this).attr('id');
...save data here (i.e: with ajax $.post(url, { selected_id: id}, callback }
}); 
```

# django - Django selenium liveserver 重定向到管理站点

> ID：12259615
> 
> 赞同：1
> 
> 时间：2012-09-04T08:32:17.247
> 
> 标签：django, selenium, django-testing

我正在使用 django 1.3 和 Django liveserver 向后移植到 1.3。当我从[Django LiverserverTestCase 文档](https://docs.djangoproject.com/en/dev/topics/testing/#django.test.LiveServerTestCase)做教程 但导入 django 1.3 时，它工作得很好。它测试**“/admin/”**页面并且没问题，但是当我尝试测试我的网址时，即使只是**“/”**，它也会再次进入管理员！为什么？我在谷歌没有找到任何线索，也许这个问题只有一个。

也许我取消了服务器的一些设置。但是 localhost:8000/test 在 runserver 命令后工作正常。

回答是否有人遇到此类问题。

```
from django_liveserver.testcases import LiveServerTestCase
from selenium.webdriver.firefox.webdriver import WebDriver
from selenium.webdriver.support.wait import WebDriverWait
from selenium import webdriver

class MySeleniumTests(LiveServerTestCase):
fixtures = ['nstein/test-users.json']

@classmethod
def setUpClass(cls):
    cls.selenium = WebDriver()
    cls.selenium.implicitly_wait(3)
    super(MySeleniumTests, cls).setUpClass()

@classmethod
def tearDownClass(cls):
    super(MySeleniumTests, cls).tearDownClass()
    cls.selenium.quit()

def test_login(self):

    self.selenium.get('%s%s' % (self.live_server_url. '/admin/'))
    body = self.selenium.find_element_by_tag_name('body')
    self.assertIn('Username', body.text)
    username_input = self.selenium.find_element_by_id("id_username")
    password_input = self.selenium.find_element_by_id("id_password")
    password_input.send_keys('123')
    username_input.send_keys('admin')
    password_input.clear()
    self.selenium.find_element_by_xpath('//input[@value="Log in"]').click()
    body = self.selenium.find_element_by_tag_name('body')
    self.assertIn('Site administration', body.text) 
    # url is in the urls.py of the app, 
    #selenium gets response 302 but redirects to /admin/
    self.selenium.get('%s%s' % (self.live_server_url. '/test/')) 
```

应用程序的 urls.py：

```
#from cms import sitemaps
from django.conf.urls.defaults import *
from django.conf import settings
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
from hitcount.views import update_hit_count_ajax
from django.views.generic.simple import direct_to_template

import dselector
from wcms.furniture_today.views import *

parser = dselector.Parser()

urlpatterns = patterns('',
parser.url(r'^test/$', direct_to_template, {'template': 'index.html'}, 'index'),
) 
```

全球网址：

```
from django.conf.urls.defaults import *
from django.conf import settings
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
from wcms.business.views import wcms_admin_redirect

urlpatterns = patterns('',
(r'^media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT, 'show_indexes': True}),
url(r'^', include('wcms.admin_urls')),
url(r'^', wcms_admin_redirect),
url(r'^', include('cms.urls')),
)

if settings.DEBUG: # assuming dev server
urlpatterns += patterns('', (r'^' + settings.MEDIA_URL.lstrip('/'), include('appmedia.urls')))

urlpatterns += staticfiles_urlpatterns() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:36:33.823

尝试`self.selenium.get('%s%s' % (self.live_server_url. '/test/'))`添加一个新功能

```
def test_two(self):
    self.selenium.get('%s%s' % (self.live_server_url. '/test/')) 
```

# c++ - 为什么冒泡排序需要嵌套循环？

> ID：12259622
> 
> 赞同：5
> 
> 时间：2012-09-04T08:32:57.923
> 
> 标签：c++, algorithm, sorting, bubble-sort

我要开始新的问题了。我昨天提出了这个问题，想知道我的程序有什么问题。该程序在下面给出，你们指出，下面的程序只进行一次排序，并且还需要一个外循环。那个时候我就好喜欢OK。但是当我再次查看程序时，我感到困惑，需要问为什么我们还需要外循环进行排序，因为只有一个循环可以进行排序（在我看来）。首先看下面的程序，然后我在程序结束时展示我的逻辑。

```
#include <iostream.h>
#include <conio.h>

using namespace std;

main()
{

    int number[10];
    int temp = 0;
    int i = 0;

    cout << "Please enter any ten numbers to sort one by one: "
         << "\n";

    for (i = 0; i < 10; i++)
    {
        cin >> number[i];
    }

    i = 0;

    for (i = 0; i < 9; i++)
    {

        if (number[i] > number[i + 1])
        {
            temp = number[i + 1];
            number[i + 1] = number[i];
            number[i] = temp;
        }
    }
    i = 0;
    cout << "The sorted numbers are given below:"
         << "\n";

    for (i = 0; i < 10; i++)
    {
        cout << number[i] << "\n";
    }

    getch();
} 
```

我认为具有气泡条件的唯一循环应该进行排序。查看程序的以下循环：

```
for (i=0;i<9;i++)
if(number[i]>number[i+1])
{
    temp=number[i+1];
    number[i+1]=number[i];
    number[i]=temp;

} 
```

现在我解释一下我在想这个循环“应该”做什么。它将首先将 number[0] 与 number[1] 进行比较。如果满足条件，它将执行 IF 语句主体中的操作。然后 i 将增加 1(i++)。然后在下一次迭代中，比较的值将是 number[1] 和 number[2]。那为什么它没有发生并且循环仅在通过后退出？换句话说，可能是我想问 IF 语句不会在 for 循环中重复吗？在我看来确实如此。我非常感谢您的帮助和意见，我的问题可能很小，但这就是我的进步。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-04T08:40:55.340

让我举个例子，让我们只取3个数字。所以你输入

```
13, 3 ,1 
```

现在你开始排序你是如何做到的。所以它比较 13 和 3 `13 > 3`所以切换它们。现在我们有了。

```
3, 13, 1 
```

现在它会像你说的那样比较下一对 = 13 和 1 `13 > 1`所以新的订单是

```
3, 1, 13 
```

现在你的循环已经完成，你错过了比较 3 和 1 实际上第一个循环只对最大的数字进行排序！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-04T08:39:22.453

> 因为只有一个循环可以进行排序（在我看来）

这是不正确的。不深入细节，**恒定数量的循环不足以排序**，因为排序是个`Omega(nlogn)`问题。意思是，`O(1)`（常数，包括 1）循环数是不够的 - 对于任何算法^(1,2)。

考虑输入

```
5, 4, 3, 2, 1 
```

冒泡排序的单个循环将执行以下操作：

```
4, 5, 3, 2, 1
4, 3, 5, 2, 1 
4, 3, 2, 5, 1
4, 3, 2, 1, 5 
```

所以算法最终会得到数组：`[ 4, 3, 2, 1, 5]`，它没有排序。

经过**一个冒泡排序循环后，您只能保证将最后一个元素放在适当的位置**（在示例中确实发生了这种情况）。第二次迭代将确保最后 2 个元素就位，`n`第 th 次迭代将确保数组确实已排序，从而产生`n`循环，这是通过嵌套循环实现的。

* * *

(1) 外部循环有时被隐藏为递归调用（[快速排序](http://en.wikipedia.org/wiki/Quicksort)是它发生的一个例子） - 但仍然有一个循环。
(2)确切地说，[基于比较的算法。](http://en.wikipedia.org/wiki/Comparison_sort)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T08:40:53.170

对于冒泡排序，只需将最大元素移动到数组的末尾。所以你需要 n-1 次传递来获得一个排序的数组，这就是你需要其他循环的原因。现在对于您的代码 1 pass 意味着

```
if(number[0]>number[0+1])
{
    temp=number[0+1];
    number[0+1]=number[0];
    number[0]=temp;

}
if(number[1]>number[1+1])
{
    temp=number[1+1];
    number[1+1]=number[1];
    number[1]=temp;

}
.....6 more times
if(number[8]>number[8+1])
{
    temp=number[8+1];
    number[8+1]=number[8];
    number[8]=temp;

} 
```

所以你可以看到 IF 语句重复自己，只是在所有 9 个 IF 之后，largets 元素移动到数组的末尾

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T09:00:11.637

这是不正确的，因为

> 该算法得名于**较小元素**“冒泡”到列表顶部的方式。（[冒泡排序](http://en.wikipedia.org/wiki/Bubble_sort)）

所以，在第一个循环结束时，我们得到了**最小的元素**。所以，为了完成排序，我们必须保持**总共 n 个循环**。（其中 n = 数字的总大小）

# php - 如何在浏览器中显示pdf

> ID：12259625
> 
> 赞同：2
> 
> 时间：2012-09-04T08:33:01.863
> 
> 标签：php, fpdf

我完成了在 php 中使用 FPDF 生成 PDF 文件。但问题是如何在没有`Save As`选项的情况下打开这个pdf？我想在浏览器中显示 pdf 文档。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T08:36:42.860

[http://www.fpdf.org/en/doc/output.htm](http://www.fpdf.org/en/doc/output.htm)

语法： Output([string name] , string dest) ，使用 I 作为 Destination 并且 fdpf 将尝试在浏览器中显示它，如果浏览器插件等启用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:36:49.303

您不能强制显示，因为用户可以选择内联显示 PDF 或系统地保存它们。我更喜欢第二种选择...

现在，有一个 JavaScript / HTML 5 项目（实验性！）可以在没有插件的情况下显示 PDF，所以也许你可以尝试一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T08:40:20.360

即使使用 fpdf 将输出传递给浏览器，我相信用户是否打开或保存它仍然取决于用户。

一个解决方案是使用某种 PDF 查看器，例如[http://view.samurajdata.se/](http://view.samurajdata.se/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-05T06:45:25.643

尝试这个`$pdf->Output('I', 'filename.pdf')`

请参阅参考[http://www.fpdf.org/en/doc/output.htm](http://www.fpdf.org/en/doc/output.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T08:39:39.033

尝试回显 PDF 而不是使用标题功能。header 函数将强制浏览器下载。回声“可能”显示 pdf。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T08:38:08.553

将标题的内容类型设置为“应用程序/pdf”。然后，大多数浏览器会尝试打开它并在浏览器中显示（或至少要求用户保存或打开文件）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-04T09:05:38.500

您的浏览器必须安装 pdf 插件。如果您还没有这样做，请安装最新版本的 Acrobat Reader。如果您使用的是 fpdf，请输出字符串而不是强制下载 详情

```
http://www.fpdf.org/en/doc/output.htm 
```

# c# - Threads Syncronization Vs Tasks Syncronization Vs ConcurrentDictionary (No sync Needed) ，选择哪个

> ID：12259626
> 
> 赞同：0
> 
> 时间：2012-09-04T08:33:03.413
> 
> 标签：c#, concurrency, thread-safety, task, async-await

如果在我们的程序中我们使用**线程**来访问比如说共享集合，那么我们应该使用 Mutex、Monitor 或 Sempahore 等来确保线程安全

但是如果我们不使用线程但我们使用**任务**然后多个任务试图访问公共共享集合，那么我们也应该通过一些方法确保安全但是如果我们使用一些现成的线程安全集合，如**ConcurrentDictionary**那么确保锁定和线程任务安全不是必需的，因为它已经在框架级别处理。

所以基本上我想知道如果我们在并发消费者环境中使用共享资源，可以使用哪种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:35:45.577

它们都是针对不同问题的绝佳解决方案。如果您能准确地告诉我们您想要做什么、共享哪些资源、需要哪些类型的访问权限，那么我们可以告诉您哪些可能适合您的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:35:41.997

总的来说，除非您有非常具体的性能要求，否则请选择最简单的解决方案。也就是并发字典。由于同步逻辑是内置的，您几乎可以肯定没有人会搞砸。“手动”任务和线程同步有时会非常棘手。

# android - 使用 Android 中的 Ksoap2 库管理 Web Service 返回的不同结构

> ID：12259627
> 
> 赞同：1
> 
> 时间：2012-09-04T08:33:06.367
> 
> 标签：android, web-services, parsing, xml-parsing, ksoap2

我正在使用 KSoap2 库，我的网络服务有两种可能性：

1）返回这样的东西

```
 -<Services> 
       -<Service> 
           <id>12</id> 
           <function_code>2</function_code>  
           <cf>AABBBCCCAAA</cf> 
           <active>0</active> <last_change_date>2012-07-12T16:00:34</last_change_date> 
        </Service> 
        -<Service> 
           <id>10</id> 
           <function_code>3</function_code>  
           <cf>ZZZZZYYYYYYKKKK</cf> 
           <active>0</active> <last_change_date>2012-08-08T16:00:34</last_change_date> 
        </Service> 
    </Services> 
```

那是一个服务对象数组。

2）或返回这个：

```
 <Msg>error: user not found</Msg> 
```

在服务器端错误的情况下。

显然我不知道网络服务的答案是什么；我已经实现了两种不同的解析方法。如何决定必须使用哪种解析方法？如果我创建一个在收到错误消息时等待第一个结构的解析方法，我将无法正确解析。如果收到的消息具有第一个或第二个结构，我可以先验评估吗？

ps：我不想使用 KvmSerializable 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:49:42.937

如何在 View XML Like 中获取 XML 字符串

```
public void viewXML(String xmlStr) throws IOException{
        try{
            byte[] xmlByteArray=xmlStr.getBytes();
            ByteArrayInputStream xmlStream=new ByteArrayInputStream(xmlByteArray);
            InputStreamReader xmlReader=new InputStreamReader(xmlStream);
            XmlParser parser=new XmlParser(xmlReader);
            try{
                traverse(parser,"");
            }
            catch(Exception exc){
                exc.printStackTrace();
            }
            return;
        }
        catch(IOException e){
            return;
        }
    } 
```

和它喜欢的Traverese

```
public void traverse(XmlParser parser,String indent) throws Exception{
        boolean leave=false;
        String sValue="";
        do{
            ParseEvent event=parser.read();
            ParseEvent pe;
            switch(event.getType()){
                case Xml.START_TAG:
                    if("id".equals(event.getName())){
                        pe=parser.read();
                        sValue=pe.getText()+"~~";
                    }
                    if("function_code".equals(event.getName())){
                        pe=parser.read();
                        sValue=sValue+pe.getText()+"~~";
                    }
                    if("cf".equals(event.getName())){
                        pe=parser.read();
                        sValue=sValue+pe.getText()+"~~";
                    }
                    if("active".equals(event.getName())){
                        pe=parser.read();
                        sValue=sValue+pe.getText()+"~~";
                    }
                    traverse(parser,"");
                    break;
                case Xml.END_TAG:
                    leave=true;
                    break;
                case Xml.END_DOCUMENT:
                    leave=true;
                    break;
                case Xml.TEXT:
                    break;
                case Xml.WHITESPACE:
                    break;
                default:
            }
        }while(!leave);
    }
Check This Out 
```

# fabricjs - fabric.js 更新以旋转 div 而不是画布

> ID：12259633
> 
> 赞同：0
> 
> 时间：2012-09-04T08:33:32.270
> 
> 标签：fabricjs

如何使用fabric.js使div可旋转而不是画布？需要在 fabric.js 中更新什么来完成这个要求？如果将画布放置在 div 内来渲染图像，但需要旋转整个 div 而不是画布，那会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:31:24.933

旋转（或真正以任何方式操纵）常规 HTML 元素不是 Fabric.js 的工作。

您可以使用 CSS3 样式来旋转包含画布的 div：

```
#myCanvasWrapperDiv
 {
    transform: rotate(30deg);
    -ms-transform: rotate(30deg); /* IE 9 */
    -webkit-transform: rotate(30deg); /* Safari and Chrome */
    -o-transform: rotate(30deg); /* Opera */
    -moz-transform: rotate(30deg); /* Firefox */
 } 
```

如果您希望用户能够旋转此 div，则必须为他们提供一种方法来做到这一点。这可以像带有按钮或 onchange 事件处理程序的文本输入一样简单，也可以像旋转手柄那样复杂。可能有一个 jQuery 插件可以使元素“可旋转”，类似于拖放插件。

# sql - HSQLDB 按多列排序

> ID：12259634
> 
> 赞同：6
> 
> 时间：2012-09-04T08:33:33.707
> 
> 标签：sql, hibernate, hsqldb

我正在使用 hsqldb 和休眠执行查询。我有一个订单声明：-

```
Query query = em
    .createQuery("SELECT DISTINCT new com.mytransferobject.QuickSearchResultTO(m.id, m.firstName||' '||m.surname, '')  " +
        "FROM Member m, ClassC c, ClassCm cm " +
        "WHERE  c.id = cm.clubId AND m.id = cm.memberId " +
        "AND c.lft >= :lft AND c.lft <= :rgt " +
        "AND (firstName LIKE :memberName OR surname LIKE :memberName) " +
        "AND m.deleted = false " +
        "AND c.deleted = false " +
        "ORDER BY m.firstName, m.surname");

query.setParameter("lft", lft);
query.setParameter("rgt", rgt);
query.setParameter("memberName", memberName + "%"); 
```

这在 MYSQL 中运行良好，但在我的测试代码中失败（使用 hsqldb 2.2.6）。我尝试将它们连接在一起，它工作正常，但这是一个高度使用的查询，所以我想避免任何不必要的操作。

我遇到了一个例外：-

```
 javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: invalid ORDER BY expression
        at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1360)
        at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1288)
        at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:261)
        at com.servasport.smp.dao.jpa.MemberDaoImpl.quickSearchAll(MemberDaoImpl.java:626)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
        at $Proxy68.quickSearchAll(Unknown Source)
        at com.servasport.smp.dao.MemberDaoTest.quickSearchSuccess(MemberDaoTest.java:768)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
        at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
        at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
        at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
        at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
        at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
        at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
        at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
        at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
        at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
    Caused by: org.hibernate.exception.SQLGrammarException: invalid ORDER BY expression
        at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:83)
        at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
        at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
        at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
        at org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler.continueInvocation(ConnectionProxyHandler.java:146)
        at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
        at $Proxy95.prepareStatement(Unknown Source)
        at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:147)
        at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:166)
        at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:145)
        at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1720)
        at org.hibernate.loader.Loader.doQuery(Loader.java:828)
        at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:289)
        at org.hibernate.loader.Loader.doList(Loader.java:2447)
        at org.hibernate.loader.Loader.doList(Loader.java:2433)
        at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2263)
        at org.hibernate.loader.Loader.list(Loader.java:2258)
        at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:470)
        at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:355)
        at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:196)
        at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1161)
        at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101)
        at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:252)
        ... 43 more
    Caused by: java.sql.SQLSyntaxErrorException: invalid ORDER BY expression
        at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
        at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
        at org.hsqldb.jdbc.JDBCPreparedStatement.<init>(Unknown Source)
        at org.hsqldb.jdbc.JDBCConnection.prepareStatement(Unknown Source)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler.continueInvocation(ConnectionProxyHandler.java:138)
        ... 61 more
    Caused by: org.hsqldb.HsqlException: invalid ORDER BY expression
        at org.hsqldb.error.Error.error(Unknown Source)
        at org.hsqldb.error.Error.error(Unknown Source)
        at org.hsqldb.QuerySpecification.resolveGroups(Unknown Source)
        at org.hsqldb.QuerySpecification.resolveTypesPartTwo(Unknown Source)
        at org.hsqldb.QueryExpression.resolve(Unknown Source)
        at org.hsqldb.ParserDQL.compileCursorSpecification(Unknown Source)
        at org.hsqldb.ParserCommand.compilePart(Unknown Source)
        at org.hsqldb.ParserCommand.compileStatement(Unknown Source)
        at org.hsqldb.Session.compileStatement(Unknown Source)
        at org.hsqldb.StatementManager.compile(Unknown Source)
        at org.hsqldb.Session.execute(Unknown Source)
        ... 68 more 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-01T11:33:09.050

Probably, you have the exception "invalid order by expression" because you specify a column in `ORDER BY` (in your case, `m.firstName` and `m.surname`) that are not explicit returned in the `SELECT` clause. Some databases, like SQL Server and MySQL don't need this, but others like HSQLDB and DB2 cannot do this ORDER BY without the fields in SELECT too.

I think your code will work if you use:

```
Query query = em
    .createQuery("SELECT DISTINCT new com.mytransferobject.QuickSearchResultTO(m.id, m.firstName, m.surname, m.firstName||' '||m.surname, '')  " +
        "FROM Member m, ClassC c, ClassCm cm " +
        "WHERE  c.id = cm.clubId AND m.id = cm.memberId " +
        "AND c.lft >= :lft AND c.lft <= :rgt " +
        "AND (firstName LIKE :memberName OR surname LIKE :memberName) " +
        "AND m.deleted = false " +
        "AND c.deleted = false " +
        "ORDER BY m.firstName, m.surname"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-17T14:41:45.740

我有同样的问题，我通过使用 GROUP BY 而不是 DISTINCT 来修复它，它返回相同的结果。如果您使用以下代码，您的代码将起作用：

```
Query query = em
.createQuery("SELECT new com.mytransferobject.QuickSearchResultTO(m.id, m.firstName||' '||m.surname, '')  " +
    "FROM Member m, ClassC c, ClassCm cm " +
    "WHERE  c.id = cm.clubId AND m.id = cm.memberId " +
    "AND c.lft >= :lft AND c.lft <= :rgt " +
    "AND (firstName LIKE :memberName OR surname LIKE :memberName) " +
    "AND m.deleted = false " +
    "AND c.deleted = false " +
    "GROUP BY m.idORDER BY m.firstName, m.surname"); 
```

# spring-mvc - 使用 Thymeleaf 的“fields.hasErrors”在 Web UI 中显示“特定于应用程序”的验证错误

> ID：12259635
> 
> 赞同：2
> 
> 时间：2012-09-04T08:33:34.517
> 
> 标签：spring-mvc, bean-validation, thymeleaf

我将 Spring MVC 与 Thymeleaf 一起使用。我对 Thymeleaf 有一个问题，`fields.hasErrors`如下所示：

当引发**Bean Validation 约束**错误（例如 @NotNull 约束）时，以下用法`fields.hasErrors`完美地工作：

```
<span class="help-inline" th:if="${#fields.hasErrors('member.email')}" th:text="#{message_form.validation.email}"></span> 
```

电子邮件字段旁边会显示一条错误消息 OK。

但是，当我的代码引发**“特定于应用程序”的错误**（与**Bean Validation constraint error**相对）时（请参阅下面的控制器代码），

```
// FROM SPRING MVC CONTROLLER
if (!registrationService.isEmailAvailable(registrationInfo.getMember().getEmail())) {
    bindingResult.addError(new ObjectError("member.email", "email already used")); // TODO i18n
} 
```

`th:if="${#fields.hasErrors('member.email')}"` **不评估为真**，并且不显示错误消息....

我发现显示这些“特定于应用程序”错误的唯一方法是在表单下方包含以下内容：

```
<div id="errors" class="alert alert-error">
    <ul th:if="${#fields.hasErrors('*')}">
        <li th:each="err : ${#fields.errors('*')}" th:text="${err}"></li>
    </ul>
</div> 
```

然后，它将显示“*已使用的电子邮件*”作为列表项。

谁能澄清一下的行为，`th:if="${#fields.hasErrors('member.email')}"`尤其是告诉我为什么在**“应用程序特定”错误**的情况下它会**评估为假**？

 *** * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T11:58:20.337

我找到了问题的解决方案：我的问题来自对 Spring API 的错误使用。

我应该使用 a`FieldError`而不是`ObjectError`.

所以从改变：

```
 //FROM SPRING MVC CONTROLLER
    if (!registrationService.isEmailAvailable(registrationInfo.getMember().getEmail())) {
        bindingResult.addError(new ObjectError("member.email", "email already used"));//TODO i18n
    } 
```

到

```
 //FROM SPRING MVC CONTROLLER
    if (!registrationService.isEmailAvailable(registrationInfo.getMember().getEmail())) {
        bindingResult.addError(new FieldError("registrationInfo","member.email", "email already used"));//TODO i18n
    } 
```

解决了这个问题。**

# python - Python 作为“perl -pe”，对标准输入中的每一行执行 Python 命令

> ID：12259636
> 
> 赞同：6
> 
> 时间：2012-09-04T08:33:37.060
> 
> 标签：python, perl, sed, awk

> **可能重复：**
> [Python 等价于 perl -pe？](https://stackoverflow.com/questions/7842919/python-equivalent-to-perl-pe)

`stdin`有没有一种方法可以使用给定的 Python 命令处理每一行，而无需使用样板代码进行设置？

使用 Perl，我可以执行以下操作：

```
perl -pe '... command ...' 
```

我可以用 Python 做同样的事情吗？

注意：使用许多其他工具（例如 sed、awk 等）也可以实现类似的操作...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T08:47:03.150

Python 在这方面不如 Perl 方便，但你可以使用 接近 Perl 的`-p`标志[`fileinput`](https://docs.python.org/3/library/fileinput.html#fileinput.input)，如下所示：

```
python -c 'for ln in __import__("fileinput").input(): print ln.rstrip()' files... 
```

这将像 Perl 一样自动按顺序打开文件，或者如果没有提供文件，则使用标准输入。替换`print`为任何类型的处理。你可能需要多行来做任何有用的事情，但这对大多数 shell 来说不是问题。

请注意，`rstrip`需要避免与源代码行和`print`语句添加的换行符重复。如果您不打印该行，则无需调用它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-04T08:46:18.460

尝试`-c`解释器选项：

```
python -c "print 'cool'" 
```

# alfresco - Alfresco Share：接受来自电子邮件的站点邀请时出错

> ID：12259637
> 
> 赞同：0
> 
> 时间：2012-09-04T08:33:48.217
> 
> 标签：alfresco, ecm

它在 Alfresco Community 4.0.d 上。

1.  邀请用户访问站点
2.  受邀用户将收到包含接受和拒绝链接的邀请电子邮件
3.  如果用户单击接受链接，将显示一个错误页面：

> **处理邀请接受失败 很遗憾，您的邀请接受无法注册。您已经接受或拒绝了邀请，或者邀请者取消了您的邀请。**

来自 catalina.out 的错误日志：

```
2012-09-04 15:15:53,845  ERROR [extensions.webscripts.AbstractRuntime] [http-8080-94] Exception from executeScript - redirecting to status template error: A valid SecureContext was not provided in the RequestContext
 net.sf.acegisecurity.AuthenticationCredentialsNotFoundException: A valid SecureContext was not provided in the RequestContext
    at net.sf.acegisecurity.intercept.AbstractSecurityInterceptor.credentialsNotFound(AbstractSecurityInterceptor.java:481)
    at net.sf.acegisecurity.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:359)
    at net.sf.acegisecurity.intercept.method.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:77)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.alfresco.repo.security.permissions.impl.ExceptionTranslatorMethodInterceptor.invoke(ExceptionTranslatorMethodInterceptor.java:46)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.alfresco.repo.audit.AuditMethodInterceptor.invoke(AuditMethodInterceptor.java:147)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.alfresco.repo.transaction.RetryingTransactionInterceptor$1.execute(RetryingTransactionInterceptor.java:69)
    at org.alfresco.repo.transaction.RetryingTransactionHelper.doInTransaction(RetryingTransactionHelper.java:388)
    at org.alfresco.repo.transaction.RetryingTransactionInterceptor.invoke(RetryingTransactionInterceptor.java:59)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy8.exists(Unknown Source)
    at org.alfresco.repo.rule.RuleServiceImpl.checkForCopy(RuleServiceImpl.java:1269)
    at org.alfresco.repo.rule.RuleServiceImpl.canExecuteRule(RuleServiceImpl.java:1249)
    at org.alfresco.repo.rule.RuleServiceImpl.executePendingRule(RuleServiceImpl.java:1161)
    at org.alfresco.repo.rule.RuleServiceImpl.executePendingRulesImpl(RuleServiceImpl.java:1114)
    at org.alfresco.repo.rule.RuleServiceImpl.executePendingRules(RuleServiceImpl.java:1087)
    at org.alfresco.repo.rule.RuleTransactionListener.beforeCommit(RuleTransactionListener.java:57)
    at org.alfresco.repo.transaction.AlfrescoTransactionSupport$TransactionSynchronizationImpl.doBeforeCommit(AlfrescoTransactionSupport.java:747)
    at org.alfresco.repo.transaction.AlfrescoTransactionSupport$TransactionSynchronizationImpl.doBeforeCommit(AlfrescoTransactionSupport.java:727)
    at org.alfresco.repo.transaction.AlfrescoTransactionSupport$TransactionSynchronizationImpl.beforeCommit(AlfrescoTransactionSupport.java:687)
    at org.springframework.transaction.support.TransactionSynchronizationUtils.triggerBeforeCommit(TransactionSynchronizationUtils.java:95)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.triggerBeforeCommit(AbstractPlatformTransactionManager.java:927)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:737)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
    at org.alfresco.util.transaction.SpringAwareUserTransaction.commit(SpringAwareUserTransaction.java:472)
    at org.alfresco.repo.transaction.RetryingTransactionHelper.doInTransaction(RetryingTransactionHelper.java:410)
    at org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecute(RepositoryContainer.java:462)
    at org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecuteAs(RepositoryContainer.java:500)
    at org.alfresco.repo.web.scripts.RepositoryContainer.executeScript(RepositoryContainer.java:275)
    at org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:372)
    at org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:209)
    at org.springframework.extensions.webscripts.servlet.WebScriptServlet.service(WebScriptServlet.java:118)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.alfresco.web.app.servlet.GlobalLocalizationFilter.doFilter(GlobalLocalizationFilter.java:58)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:470)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:14:58.123

您需要确保您的规则没有过于宽泛地定义 - 尝试指定过滤器，以便您只匹配您感兴趣的内容的确切类型。我不明白为什么您的规则会被网站触发正在处理邀请，除非您已匹配所有内容项。

如果您可以澄清问题以描述您设置的规则以及您想要实现的目标，那么可能有人可以为您提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:06:19.787

您是否尝试从邮件中的链接直接访问您与发送邀请的用户登录的同一浏览器？这似乎是具有错误凭据问题的身份验证。如果可以，请尝试使用另一台计算机，或者只是清除缓存和 cookie，或者使用没有存储以前用户密码的其他浏览器。让我知道是否有帮助。

# javascript - 是否可以使用带有 Javascript 的推送通知 Windows 8 Metro 应用程序

> ID：12259645
> 
> 赞同：2
> 
> 时间：2012-09-04T08:34:06.857
> 
> 标签：javascript, windows-8, push-notification, windows-runtime

我们有一个使用 JavaScript 和 HTML 开发的 Windows 8 应用程序。

现在，我想向我们的应用程序添加推送通知功能。但经过一些研究后，我意识到只有 C#、VB.Net、C++ 和 XAML 应用程序支持此功能。

也因为某些原因我们不能使用 Azure；所以我必须开发服务器端并托管我们的 Windows 服务器。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T11:45:03.347

对于客户端，请在此处查看 MSDN 文档：http: [//code.msdn.microsoft.com/windowsapps/Push-and-periodic-de225603](http://code.msdn.microsoft.com/windowsapps/Push-and-periodic-de225603)

在服务器端，Pushwoosh.com 计划在 9 月底之前支持 win8 推送通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:50:07.187

Windows 8 上的 Javascript 应用程序与推送通知不兼容 - 您可以从 Javascript/HTML5 应用程序访问所有 Windows 运行时功能。

例如，请参阅[http://msdn.microsoft.com/library/windows/apps/Hh465412](http://msdn.microsoft.com/library/windows/apps/Hh465412) “如何请求、创建和保存通知通道（使用 JavaScript 和 HTML 的 Windows 应用商店应用程序）”了解如何获取推送通道JS 应用程序中的通知通道。

# c# - 重复局部视图不起作用

> ID：12259654
> 
> 赞同：0
> 
> 时间：2012-09-04T08:34:43.967
> 
> 标签：c#, jquery, json, asp.net-mvc-3, razor

我有一个索引页面，其中有一个链接可以调用局部视图。代码如下：-

```
@model MvcCommons.ViewModels.CompositeViewModel

@{
ViewBag.Title = "Index";
}

<script src="../../Scripts/jquery.jtruncate.js" type="text/javascript"></script>

<script type="text/javascript">
$().ready(function() {
    $('.text').jTruncate({
        length: 100,
        minTrail: 0,
        moreText: "",
        lessText: "Read Less",
        //ellipsisText: " (Click below to continue reading)"
    });
});
</script>

<script type="text/javascript">
$('#myTable01').fixedHeaderTable({
    footer: false,
    cloneHeadToFoot: false,
    altClass: 'odd',
    autoShow: false
});

</script>
<table class="fancyTable" id="myTable01" cellpadding="0" cellspacing="0">
<tr>
    <th>
        @Html.DisplayNameFor(model => model.ArticleViewModel.Article.ArticleTitle)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.ArticleViewModel.Article.ArticleDate)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.ArticleViewModel.Article.ArticleText)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.ArticleViewModel.Article.ArticleSource)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.ArticleViewModel.Article.Category.CategoryTitle)
    </th>
    <th>
        Images
    </th>
    <th></th>
</tr>

@foreach (var item in Model.ArticleViewModel.ArticleList)
{
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.ArticleTitle)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.ArticleDate)
    </td>
    <td>
        <div class="text">
            @Html.DisplayFor(modelItem => item.ArticleText)
        </div>
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.ArticleSource)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Category.CategoryTitle)
    </td>
    <td>
        @if (Model.ImageViewModel.ImageCount(item.ArticleID, Model.ImageViewModel.PageID) > 0)
        {
            @Html.HiddenFor(model => Model.PageViewModel.Page.PageTitle, new { id = "PageTitle" })
            @Html.HiddenFor(model => Model.PageViewModel.Page.PageAction, new { id = "PageAction" })
            @Html.HiddenFor(model => item.ArticleID, new { id = "ItemID" })
            @Html.Partial("~/Views/Shared/ViewImages.cshtml", Model)
        }
    </td>
    <td>
        @Html.ActionLink("Edit", "Edit", new { id = item.ArticleID }) |
        @Html.ActionLink("Details", "Details", new { id = item.ArticleID }) |
        @Html.ActionLink("Delete", "Delete", new { id = item.ArticleID })
    </td>
</tr>
}
</table>

<p>
     @Html.ActionLink("Create New", "Create")

</p> 
```

ViewImages.cshtml 页面如下：-

```
@model MvcCommons.ViewModels.CompositeViewModel

@{

ViewBag.Title = "Modal image uploader";
}

<script type="text/javascript">
var pageTitle = $('#PageTitle').val();
var pageAction = $('#PageAction').val();
var id = $('#ItemID').val();

$(document).ready(function () {
    $('.modal_block').click(function (e) {
        $('#tn_select').empty();
        $('.modal_part').hide();
    });
    $('#modal_view_link').click(function (e) {
        $('.modal_part').show();
        var context = $('#tn_view_select').load('/Upload/Index?Page=' + pageTitle + '&Action=' + pageAction + '&id=' + id, function () {
            initSelect(context);
        });
        e.preventDefault();
        return false;
    });

});

</script>

<div class="modal_block modal_part"></div>
<div class="modal_dialog modal_part" id="tn_view_select"></div>

<p>

<a href="#" id="modal_view_link" >Click here to view the images</a>
</p> 
```

我的问题是，由于索引是一个转发器，我需要区分这些部分视图，因为目前，只有第一个链接可以工作（在索引页面中）。

我认为需要做的是在ViewImages.cshtml中，这部分代码：-

```
<a href="#" id="modal_view_link" >Click here to view the images</a> 
```

所有链接的 id 必须是唯一的。

任何想法将不胜感激。

感谢您的帮助和时间

* * *

更新 - 将所有内容移至 1 页，Index.cshtml，但仍无法正常工作

```
@model MvcCommons.ViewModels.CompositeViewModel

@{
ViewBag.Title = "Index";
}

<script src="../../Scripts/jquery.jtruncate.js" type="text/javascript"></script>

<script type="text/javascript">
var pageTitle = $('#PageTitle').val();
var pageAction = $('#PageAction').val();
var id = $('#ItemID').val();

$(document).ready(function () {
    $('.modal_block').click(function (e) {
        $('#tn_select').empty();
        $('.modal_part').hide();
    });
    $('#modal_view_link').click(function (e) {
        var id = $(this).attr("data-id");
        $('.modal_part').show();
        var context = $('#tn_view_select').load('/Upload/Index?Page=' + pageTitle + '&Action=' + pageAction + '&id=' + id, function () {
            initSelect(context);
        });
        e.preventDefault();
        return false;
    });

    $('#myTable01').fixedHeaderTable({
        footer: false,
        cloneHeadToFoot: false,
        altClass: 'odd',
        autoShow: false
    });

});

</script>

<table class="fancyTable" id="myTable01" cellpadding="0" cellspacing="0">
<tr>
    <th>
        @Html.DisplayNameFor(model => model.ArticleViewModel.Article.ArticleTitle)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.ArticleViewModel.Article.ArticleDate)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.ArticleViewModel.Article.ArticleText)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.ArticleViewModel.Article.ArticleSource)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.ArticleViewModel.Article.Category.CategoryTitle)
    </th>
    <th>
        Images
    </th>
    <th></th>
</tr>

@{var i = 0;}

@foreach (var item in Model.ArticleViewModel.ArticleList)
{
i++;
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.ArticleTitle)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.ArticleDate)
    </td>
    <td>
        <div class="text">
            @Html.DisplayFor(modelItem => item.ArticleText)
        </div>
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.ArticleSource)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Category.CategoryTitle)
    </td>
    <td>
        @if (Model.ImageViewModel.ImageCount(item.ArticleID, Model.ImageViewModel.PageID) > 0)
        {
            @Html.HiddenFor(model => Model.PageViewModel.Page.PageTitle, new { id = "PageTitle" })
            @Html.HiddenFor(model => Model.PageViewModel.Page.PageAction, new { id = "PageAction" })
            @Html.HiddenFor(model => item.ArticleID, new { id = "ItemID" })
            <a href="#" class="modal_view_link" data-id="@(i)">Click here to view the images</a>
        }
    </td>
    <td>
        @Html.ActionLink("Edit", "Edit", new { id = item.ArticleID }) |
        @Html.ActionLink("Details", "Details", new { id = item.ArticleID }) |
        @Html.ActionLink("Delete", "Delete", new { id = item.ArticleID })
    </td>
</tr>
}

</table>

<p>
@Html.ActionLink("Create New", "Create")
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T02:13:47.377

是否有任何理由为满足您条件的每次迭代渲染这些`<script>`东西？`ViewImages.cshtml``Model.ArticleViewModel.ArticleList``ImageCount`

我会将`<script>`内容渲染到页面一次（即：`foreach`在.`<a ..>``foreach`

然后您可以将 foreach 切换到；

```
@{var articleList = Model.ArticleViewModel.ArticleList; }
@for(int i = 0;i< articleList.Count; i++) {
     ...
     @Html.HiddenFor(model => articleList[i], new { id = "ItemID" })
     <a href="#" class="modal_view_link" data-id="@(i)">Click here to view the images</a>
     ...
} 
```

然后将 jQuery 更新为类似的东西；

```
$(document).ready(function () {
    ...
    $('.modal_view_link').click(function (e) {
        var id = $(this).attr("data-id");
        var context = $('#tn_view_select').load('/Upload/Index?Page=' + pageTitle + '&Action=' + pageAction + '&id=' + id, function () {
            initSelect(context);
        });
        e.preventDefault();
        return false;
    });
}); 
```

# qt - 从对话框存储变量并在 qvtkwidget 中使用它

> ID：12259657
> 
> 赞同：0
> 
> 时间：2012-09-04T08:35:08.727
> 
> 标签：qt, dialog, vtk

我创建了一个对话框，我在其中询问一些切片的长度，例如 xmax、ymax 和 zmax 作为切片数。我打算在 qvtkwidget 的主窗口中使用这些数字。我将简化并将示例仅用于一个变量，以便您理解并帮助我。

这是我的 dialog.cpp

```
#include <QtGui/QApplication>
#include <QDir>
#include <iostream>
using namespace std;

#include "dialog.h"
#include "ui_dialog.h"

// Create getters to transfer variables to main.cpp
double Dialog::getxpax()
{
    return xpax;
}

// Start the mainwindow
void Dialog::startplanevolume()
{
  // Getting some proprieties for the lenght of the volume
    QString XMAX=ui->lineEdit->text();
    xpax=XMAX.toDouble();

    if (xpax==0)
    {
        ui->label_17->setText("Error: Can't start, invalid \nmeasures");
        ui->label_17->setStyleSheet("QLabel { color : red; }");
    }
    else
    {
        this->accept();        
    }
}

Dialog::Dialog(QWidget *parent) :
    QDialog(parent),
    ui(new Ui::Dialog)
{
    ui->setupUi(this);

  // Control volume measures
    // Making the lineedit objects only accept numbers
    ui->lineEdit->setValidator(new QDoubleValidator(this));

  // Start planevolume
    connect(ui->pushButton, SIGNAL(clicked()), this, SLOT(startplanevolume()));
    connect(ui->pushButton_2, SIGNAL(clicked()), this, SLOT(hide()));

} 
```

pushbutton 是确定按钮，而 pushbutton_2 是取消按钮。

在我的主窗口中，我创建了一个 setter 函数来设置 xmax 的值。

这是一些代码。

```
// Get stored data from dialog
void planevolume::setxpax(double xpax)
{
    xp=xpax;
} 
```

当我使用 qDebug() 时，settter 中的 xp 向我显示 xp 实际上获得了 xpax 值。

这是我的 main.cpp

```
#include <QtGui/QApplication>
#include <iostream>
using namespace std;

#include "planevolume.h"
#include "dialog.h"

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    Dialog *dialog= new Dialog;

    if (dialog->exec())
    {
        planevolume mainwindow;
        mainwindow.setxpax(dialog->getxpax());
        mainwindow.show();
        return app.exec();
    }

return 0;
} 
```

所以唯一的问题是在这里，当我需要它时，在 mainwindow as planevolume.cpp 中，该值尚未设置，

```
planevolume::planevolume(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::planevolume)

{
    ui->setupUi(this);

// My vtk statements are here in the code, but they are 
// executed before the setter gives the value to my new 
// variable xp, so when I need the value it has not been set yet. 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:25:36.937

如果`planevolume`构造函数需要这些数据，它们可以作为参数传递给构造函数本身（您也可以让对话框返回结构内的所有变量，以便传递一个参数，而不是每个参数都有一个访问器）。

另一种解决方案是在事件循环开始后调用 vtk 部分，方法是将其放入插槽中并使用`QTimer::singleShot`.

在最后一种情况下，您的代码应如下所示：

```
planevolume::planevolume(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::planevolume)    
{
    ui->setupUi(this);

    QTimer::singleShot(0, this, SLOT(setupVtk()));
}

// declared as a slot in the class
void planevolume::setupVtk() 
{
    // Your VTK statements would be here
} 
```

# c++ - NPAPI 调用参数包装

> ID：12259659
> 
> 赞同：0
> 
> 时间：2012-09-04T08:35:12.277
> 
> 标签：c++, c, npapi

我编写了一个包含两种插件类型的 NPAPI 插件：

*   **x-capture**用于从相机捕获一些视频
*   **x-display**用于显示由 x-capture 对象捕获的图像

我有以下使用插件的 HTML/JavaScript 代码：

```
<html>
  <embed id="display" type="application/x-display" width=640 height=480 /></td>
  <embed id="capture" type="application/x-capture" width=0 height=0 /><br> <!-- windowless plugin -->

  <script>
    var capture = document.getElementById('capture');
    var display = document.getElementById('display');
    capture.addDisplay(display);  
  </script>
</html> 
```

我的问题是我的库中的 addDisplay 调用接收到一个不同的 NPObject 指针作为调用参数，然后是与提供的 x-display 的实例关联的那个。此外，收到的 NPObject 结构的 _class 成员与我在创建 x-display 可脚本化对象时提供的成员不同。

在尝试枚举接收对象的方法（来自 handleAddDisplay 函数）以了解有关接收参数类型的更多信息后，我得到了一个调用堆栈，其中包括 nsJSObjWrapper（我正在 Firefox/Windows 上对其进行测试）。我的库是 npCaptureDemoPlugin.dll。最后，包装器调用显示对象的枚举。

```
npCaptureDemoPlugin.dll!RendererPlugin::hasMethod(void * name=0x06311d00)  Line 84    C++
npCaptureDemoPlugin.dll!ScriptableObject<RendererPlugin>::Class::hasMethod(NPObject* object=0x191fd0b4, void * name=0x06311d00)  Line 382 + 0x43 bytes    C++
xul.dll!NPObjWrapper_NewResolve(JSContext * cx=0x13bf8f60, JSObject * obj=0x0650c4c0, int id=0x06311d00, unsigned int flags=0x00000001, JSObject * * objp=0x003cb838)  Line 1659    C++
mozjs.dll!CallResolveOp(JSContext * cx=0x13bf8f60, JSObject * start=0x0650c4a0, JS::Handle<JSObject *> obj={...}, JS::Handle<int> id={...}, unsigned int flags=0x00000000, JSObject * * objp=0x003cb8dc, JSProperty * * propp=0x003cb8d4, bool * recursedp=0x003cb883)  Line 4637 + 0x1b bytes    C++
mozjs.dll!js_LookupProperty(JSContext * cx=0x13bf8f60, JSObject * obj=0x0650c4a0, int id=0x06311d00, JSObject * * objp=0x003cb8dc, JSProperty * * propp=0x003cb8d4)  Line 4745 + 0x7a bytes    C++
mozjs.dll!JS_LookupPropertyById(JSContext * cx=0x00000000, JSObject * obj=0x0650c4a0, int id=0x06311d00, JS::Value * vp=0x003cb8e4) Line 3502 + 0x49 bytes    C++
xul.dll!xpc_ForcePropertyResolve(JSContext * cx=0x13bf8f60, JSObject * obj=0x0650c4a0, int id=0x06311d00)  Line 652 + 0x13 bytes    C++
xul.dll!XPC_WN_Shared_Enumerate(JSContext * cx=0x13bf8f60, JSObject * obj=0x0650c4a0)  Line 605 + 0xe bytes    C++
xul.dll!XPC_WN_JSOp_Enumerate(JSContext * cx=0x13bf8f60, JSObject * obj=0x0650c4a0, JSIterateOp enum_op=JSENUMERATE_INIT, JS::Value * statep=0x003cbaf4, int * idp=0x00000000)  Line 1275 + 0x1b bytes  C++
mozjs.dll!Snapshot(JSContext * cx=0x00000000, JSObject * obj=0x00000000, unsigned int flags=0x00000008, JS::AutoIdVector * props=0x003cbb78)  Line 364 + 0x25 bytes    C++
mozjs.dll!js::GetPropertyNames(JSContext * cx=0x13bf8f60, JSObject * obj=0x0650c4a0, unsigned int flags=0x00000008, JS::AutoIdVector * props=0x003cbb78)  Line 440 + 0x1a bytes    C++
mozjs.dll!JS_Enumerate(JSContext * cx=0x13bf8f60, JSObject * obj=0x0650c4a0)  Line 4241 + 0x34 bytes    C++
xul.dll!nsJSObjWrapper::NP_Enumerate(NPObject * npobj=0x089cbd90, void * * * idarray=0x003cbf74, unsigned int * count=0x003cbf68) Line 968 + 0xe bytes    C++
xul.dll!mozilla::plugins::parent::_enumerate(_NPP * npp=0x10eff7c8, NPObject * npobj=0x089cbd90, void * * * identifier=0x003cbf74, unsigned int * count=0x003cbf68)  Line 1900 + 0xc bytes    C++
npCaptureDemoPlugin.dll!NPN_Enumerate(_NPP * npp=0x10eff7c8, NPObject * obj=0x089cbd90, void * * * identifier=0x003cbf74, unsigned int * count=0x003cbf68)  Line 254 + 0x18 bytes    C++
npCaptureDemoPlugin.dll!CapturePlugin::handleAddDisplay(NPObject * object=0x089cbd90)  Line 382 + 0x18 bytes    C++
npCaptureDemoPlugin.dll!CapturePlugin::invoke(void * name=0x13855280, const _NPVariant * args=0x003cc270, unsigned int argCount=0x00000001, _NPVariant * result=0x003cc248)  Line 142 + 0xf bytes    C++
npCaptureDemoPlugin.dll!ScriptableObject<CapturePlugin>::Class::invoke(NPObject * object=0x191feb04, void * name=0x13855280, const _NPVariant * args=0x003cc270, unsigned int argCount=0x00000001, _NPVariant * result=0x003cc248)  Line 414 + 0x4f bytes    C++
xul.dll!CallNPMethodInternal(JSContext * cx=0x13bf8f60, JSObject *  obj=0x0650c3a0, unsigned int argc=0x00000001, JS::Value * argv=0x05cd0070, JS::Value * rval=0x05cd0060, bool ctorCall=false) Line 1482 + 0x11 bytes    C++ 
```

所以它看起来像 Firefox 将我的 NPObject 包装到另一个我无法处理的类型的 NPObject 中，并且这个 NPObject 用作​​调用我的对象的代理。

我的问题：有没有一种方法可以将相同的 NPObject 传递给与我与插件实例关联的函数调用相同的函数调用？或者是否有另一种方法来检查接收到的对象作为 Invoke 调用的参数，它是我之前创建的预期类型？或者唯一的方法是使用某种传递给 JS 的本地 id 并返回到本地代码，这样我就可以在我的对象之间建立关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:50:31.143

浏览器通常会先将一个插件中的 NPObject 包装起来，然后再将其提供给另一个插件；我认为这是一种安全预防措施，它实际上意味着你不能做你想做的事。但是，您可以做的是，您可以为每个 NPObject 提供某种形式的唯一 ID，并在该对象上使用 getID 方法。然后，您只需要一个地图或内部类似的东西，您可以在通过 NPObject 接口查询 getID 后使用它来获取您需要的实际对象。

# php - 使用复选框扩展表格

> ID：12259662
> 
> 赞同：0
> 
> 时间：2012-09-04T08:35:14.243
> 
> 标签：php, javascript, jquery

```
<script type='text/javascript' src='http://code.jquery.com/jquery-1.4.2.js'></script>
<script type='text/javascript'>
    $(window).load(function () {
        $('.varx').click(function () {
            $(".text").toggle(this.checked);
            $(".text1").toggle(this.checked);
            $(".text2").toggle(this.checked);
            $(".text3").toggle(this.checked);
        });
    });
</script>
<table border='1'>
    <?php for ($i=1; $i<=5; $i++){ ?>
        <tr>
            <td>
                <input type='checkbox' class='varx' />
            </td>
            <td>aaa</td>
            <td>bbb</td>
            <td>ccc</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td>ddd</td>
            <td>eee</td>
            <td>fff</td>
        </tr>
        <tr>
            <td class='text3' colspan='4' style='display:none'></td>
            <td class='text3' style='display:none'>aaa</td>
            <td class='text2' style='display:none'>bbb</td>
            <td class='text1' style='display:none'>ccc</td>
            <td class='text' style='display:none'>ddd</td>
            <td class='text3' colspan='3' style='display:none'></td>
        </tr>
        <?php } ?>
</table> 
```

这是正在运行的代码，实际上它不是`for ($i=1; $i<=5; $i++)`它`foreach($items as $i)`。我决定让它成为一个`for`循环，以便您可以在没有数据库的情况下对其进行测试。我的问题是，当我选中一个复选框时，所有行都会展开，这是不对的。我需要的是当我选中一个复选框时，只有一行会扩展。

感谢您所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:50:01.990

您只为切换命令指定了一个类选择器。所以当然它会切换这个类的所有元素。

试试这个

```
$('.varx').click(function () {
    var $theNextRow = $(this).parents('tr').eq(0).next();
    $theNextRow.find(".text").toggle(this.checked);
    $theNextRow.find(".text1").toggle(this.checked);
    $theNextRow.find(".text2").toggle(this.checked);
    $theNextRow.find(".text3").toggle(this.checked);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:47:56.453

我已经为上述问题完成了完整的解决方案。请查看以下演示链接：

**演示：** [http ://codebins.com/bin/4ldqp7q](http://codebins.com/bin/4ldqp7q)

**HTML**

```
<table class="table" cellspacing="0" cellpadding="0">
  <tr>
    <th>
      Choice
    </th>
    <th>
      Col-1
    </th>
    <th>
      Col-2
    </th>
    <th>
      Col-3
    </th>
    <th>
      Col-4
    </th>
    <th>
      Col-5
    </th>
    <th>
      Remove
    </th>
  </tr>

  <tr>
    <td>
      <input type="checkbox" class="varx"/>
    </td>
    <td>
      data-1
     </td>
     <td>
       data-2
     </td>
     <td>
       data-3
     </td>
     <td>
       data-4
     </td>
     <td>
       data-5
     </td>
     <td>
       &nbsp;
     </td>
  </tr>

  <tr>
    <td>
      <input type="checkbox" class="varx"/>
    </td>
    <td>
      data-21
     </td>
     <td>
       data-22
     </td>
     <td>
       data-23
     </td>
     <td>
       data-24
     </td>
     <td>
       data-25
     </td>
     <td>
       &nbsp;
     </td>
  </tr>

  <tr>
    <td>
      <input type="checkbox" class="varx"/>
    </td>
    <td>
      data-31
    </td>
    <td>
      data-32
    </td>
    <td>
      data-33
    </td>
    <td>
      data-34
    </td>
    <td>
      data-35
    </td>
    <td>
      &nbsp;
    </td>
  </tr>
</table> 
```

**jQuery**

```
$(function() {
    $(".varx").change(expandRow);
});

function expandRow() {
    if ($(this).is(":checked")) {
        var TrClone = $(this).closest("tr").clone();
        $(TrClone).find("td:last").html("<input type='checkbox' class='remove'/>");
        $(TrClone).insertAfter($(this).closest("tr"));
        $(TrClone).find(".varx").removeAttr("checked");
        $(TrClone).find(".varx").bind('change', expandRow);
        $(TrClone).find(".remove").bind('change', removeRow);
    }
}

function removeRow() {
    if ($(this).is(":checked")) {
        $(this).closest("tr").remove();
        if ($(".table").find(".remove").length <= 0) {
            $(".varx").removeAttr("checked");
        }
    }
} 
```

**CSS**

```
.table{
  width:70%;
  border:1px solid #555;
}
.table th{
  background:#dcacaa;
  border-bottom:1px solid #555;
}
.table td{
  text-align:center;
  background:#c3cafd;
} 
```

**演示：** [http ://codebins.com/bin/4ldqp7q](http://codebins.com/bin/4ldqp7q)

# java - 在 Swing Container 中删除组件之前，如何为 Container 添加事件侦听器

> ID：12259665
> 
> 赞同：0
> 
> 时间：2012-09-04T08:35:26.900
> 
> 标签：java, swing, events, listener

我尝试将事件侦听器添加到 JTextPane 之类的容器中，在删除组件之前，我可以检查组件的名称并决定是否应该删除组件。我搜索答案，有一个容器侦听器，它有方法 componentRemoved，但它在组件删除后触发。所以，任何人都有一些解决方案？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:32:34.063

我尝试了 StanislavL 的建议，它对我的​​目标有效。我定义了一个类来扩展容器，并覆盖remove方法，然后判断组件的名称并决定是否应该删除它。

# c# - 绑定本地 IP 后的 Socket.Connect 抛出 10049

> ID：12259666
> 
> 赞同：0
> 
> 时间：2012-09-04T08:35:32.180
> 
> 标签：c#, winforms, sockets, ip-address

我可以通过以下方式连接端点：

```
socket.Connect(endPoint); 
```

但是我连接的一些设备只接受来自特定 IP 地址的连接。
因此，要在服务器中使用，我想让用户能够选择本地端点：

我给用户一个像这样填充的组合框：

```
var source = Dns.GetHostAddresses(Dns.GetHostName())
    .Where(ip => ip.AddressFamily == (rbIPv4.Checked
        ? AddressFamily.InterNetwork
        : AddressFamily.InterNetworkV6)).ToArray();
cbLocalIP.DataSource = source; 
```

`rbIPv4`并且`rbIPv6`是无线电控制。使用这两个，我只显示具有指定地址系列的地址。

*   用户选择本地 IP 地址并输入本地端口号。
*   然后他输入远程 IP 地址和远程端口号。

我得到了终点：

```
var localEP = new IPEndPoint((IPAddress)cbLocalIP.SelectedItem, localPort);
var remoteEP = new IPEndPoint(remoteIP, remotePort); 
```

我创建一个套接字：

```
var socket = new Socket(remoteEP.AddressFamily,
    SocketType.Stream,
    ProtocolType.Tcp); 
```

我将它绑定到本地端点：

```
socket.Bind(localEP); 
```

我尝试连接到远程端点：

```
socket.Connect(remoteEP); 
```

它抛出一个带有代码的 SocketException：10049 (AddressNotAvailable)。

*   如果我不绑定套接字，则`Connect`可以。
*   如果我指定`IPAddress.Any`本地端点并绑定，则`Connect`可以。
*   如果我为本地端点指定本地 IP 并绑定，`Connect`则不起作用。

我究竟做错了什么？

**编辑：**已解决。我之所以标记它，是因为我试图连接同一台机器上的侦听器，并且（结果）绑定到相同的 IP 地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:14:11.957

如果我使用以下代码，它可以毫无问题地连接，因此请使用您的 IPAddresses 尝试一下，如果这不起作用，则可能检查您的防火墙设置。

```
 var endpoint = new IPEndPoint(new IPAddress(new byte[] {10, 101, 10, 86}), 8000);
  var socket = new Socket(endpoint.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
  socket.Bind(new IPEndPoint(new IPAddress(new byte[]{10,101,10,86}), 8001));
  socket.Connect(endpoint); 
```

# java - 用于创建 Google 地图或地球的 Java API

> ID：12259670
> 
> 赞同：1
> 
> 时间：2012-09-04T08:35:43.060
> 
> 标签：java, google-maps

我正在寻找一个 Java API 来访问谷歌地图或者最好是谷歌地球。但是在搜索网络后似乎无法找到正确的解决方案。

从 Java 桌面应用程序中，我希望无法创建包含大约 1,000 个自定义点的地图，这些点将使用 Long/Lat 进行预地理编码。一旦应用程序创建了地图（带有点），我希望应用程序向用户显示结果。

我知道由于服务的条款和条件，您无法在应用程序中嵌入地图，因此很乐意启动浏览器会话，或者最好启动地球并在其上自动显示地图。

我确实找到了 Google Maps Web Services API，它让我可以使用 JSON 从 Java 进行地理编码，但找不到类似的东西来实际创建地图和向地图添加点。

我还发现了一些旧的 java GDATA API，但现在这些似乎已被弃用。

任何有关当前最佳方法的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-06T10:43:22.167

您可以尝试使用[JxMaps](https://www.teamdev.com/jxmaps)产品将地图集成到 Java 桌面应用程序中。自定义点可以显示为标记。

# limesurvey - LimeSurvey 后退浏览器按钮问题

> ID：12259673
> 
> 赞同：0
> 
> 时间：2012-09-04T08:35:49.473
> 
> 标签：limesurvey

我正在使用 LimeSurvey 1.92 build 120509，当我按下后退按钮（在浏览器上）时，上一个调查页面无法加载，而是出现以下浏览器错误：

```
Document Expired
This document is no longer available.

The requested document is not available in Firefox's cache.As a security precaution, Firefox does not automatically re-request sensitive documents.Click Try Again to re-request the document from the website. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:18:41.947

这是正常的浏览器行为，因为所有 LimeSurvey 页面都是动态创建的，因此会立即过期。

如果您单击“重试”，则会出现上一页。然而，LimeSurvey 制造商强烈建议使用调查导航而不是浏览器导航。

# mysql - START TRANSACTION inside BEGIN ... END context or outside and LOOP 语法

> ID：12259675
> 
> 赞同：5
> 
> 时间：2012-09-04T08:35:56.277
> 
> 标签：mysql, loops, stored-procedures, transactions

我有两个关于 MySQL 中的复合语句和事务的问题。

第一的：

MySQL手册中有两个注释：

> 笔记
> 
> 在所有存储的程序中，解析器将 BEGIN [WORK] 视为 BEGIN ... END 块的开始。要在此上下文中开始事务，请改用 START TRANSACTION。
> 
> 笔记
> 
> 在所有存储程序（存储过程和函数、触发器和事件）中，解析器将 BEGIN [WORK] 视为 BEGIN ... END 块的开始。在此上下文中使用 START TRANSACTION 开始事务。

我无法理解究竟是什么意思。他们的意思是我必须把`START TRANSACTION`而不是`BEGIN`或之后`BEGIN`？

```
// 1st variant:

BEGIN
   START TRANSACTION
   COMMIT
END

// 2nd variant:

START TRANSACTION
COMMIT
END 
```

哪一个是正确的方法，第一个变体或第二个变体？

第二：

我不想创建存储过程或函数。我只想在一般流程中创建一个带有循环的复合语句块，如下所示：

```
USE 'someDb';
START TRANSACTION
   ... create table statement
   ... insert statement

// now I want to implement some insert/select statements using loop, I do as follows:

DELIMITER $
BEGIN
  SET @n = 1, @m = 2;
  lab1: LOOP

   ... some insert, select statements here

   END LOOP lab1;
END $
DELIMITER ;

END

COMMIT 
```

这种结构可能吗？因为我抛出了一个错误：

```
Query: BEGIN SET @n = 1, @m = 2; lab1: LOOP SELECT ...
Error Code: 1064
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SET @n = 1, @m = 2;
lab1: LOOP SELECT ... 
```

我的问题是：

1.  是否允许`BEGIN...END`仅在一般流程中使用而不创建和使用存储过程或函数？
2.  是否允许使用`BEGIN...END`inside of`START TRANSACTION...COMMIT`或我必须放入`START TRANSACTION...COMMIT`inside of `BEGIN...END`？

    ```
    BEGIN
       START TRANSACTION
       COMMIT
    END

    // vs.

    START TRANSACTION
       BEGIN
       END
    COMMIT 
    ```

3.  `BEGIN...END`如果我只想使用，我一定要使用`LOOP`吗？我可以只使用`LOOP`语法而不开始`BEGIN...END`吗？手册中的唯一示例`LOOP`是：

    ```
     CREATE PROCEDURE doiterate(p1 INT)
         BEGIN
           label1: LOOP
             ... 
    ```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T12:07:49.430

1.  > 是否允许在一般流程中使用 BEGIN...END 而无需创建和使用存储过程或函数？

    否：复合语句只能在存储程序的主体内使用。

2.  > 是否允许使用`BEGIN...END`inside of`START TRANSACTION...COMMIT`或我必须放入`START TRANSACTION...COMMIT`inside of `BEGIN...END`？

    `START TRANSACTION;`并且`COMMIT;`是单独的陈述。如果您希望存储程序的主体包含多个语句，则需要将这些语句括在某种复合语句块中，例如`BEGIN ... END`（类似于在类 C 语言中将语句块括在大括号`{ ... }`中）。

    也就是说，您*可以*拥有一个仅包含单个语句的存储程序，`START TRANSACTION;`或者`COMMIT;`——这样的程序不需要任何复合语句块，而只会分别开始一个新的/提交当前事务。

    在不允许复合语句块的存储程序之外，您可以在需要时发出`START TRANSACTION;`&`COMMIT;`语句。

3.  > `BEGIN...END`如果我只想使用，我一定要使用`LOOP`吗？我可以只使用`LOOP`语法而不开始`BEGIN...END`吗？

    `LOOP`也是复合语句块，仅在存储过程中有效。没有*必要*将一个`LOOP`块包含在一个`BEGIN ... END`块中，尽管这很常见（否则很难执行任何所需的循环初始化）。

在您的情况下，您显然希望将数据从循环结构插入到表中，您将需要：

*   定义一个你使用的存储程序`LOOP`；

*   在每次迭代时执行数据库查询的外部程序中迭代一个循环；或者

*   根据 SQL 可以直接操作的集合重新定义您的逻辑。

# android - Flex 移动：删除 GeolocationEvent.UPDATE 不起作用

> ID：12259676
> 
> 赞同：0
> 
> 时间：2012-09-04T08:36:04.840
> 
> 标签：android, apache-flex, geolocation, flex-mobile

我似乎无法删除 Android 上地理位置更新事件的侦听器。

我想在停用时停止地理定位：

```
NativeApplication.nativeApplication.addEventListener(Event.DEACTIVATE, onAppDeactivate);

private function onAppDeactivate(e:Event):void {

        if (Geolocation.isSupported) {
            if (geolocation != null) {
                geolocation.removeEventListener(GeolocationEvent.UPDATE, onGeolocationUpdate);
                geolocation.setRequestedUpdateInterval(0);
                geolocation = null;
            }
        }
} 
```

我从删除监听器开始，但由于这不起作用，我还尝试一起删除地理位置。还是没有运气。。

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:42:32.010

我也有一个使用 Geolocation 的应用程序，如果您想要避免电池快速耗尽，您必须调用`geolocation.setRequestedUpdateInterval(INTERVAL_MILLIS)`具有高值的方法`INTERVAL_MILLIS`（在我的情况下，我使用 60000，即 1 分钟）。

但正如（[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/sensors/Geolocation.html#setRequestedUpdateInterval%28%29)）所说，操作系统将决定 GPS 的更新间隔，而我们传递的值会为更新间隔提供“提示”。

特别是在 Android 上，只要您启用了 GPS（并且它会消耗电力），GPS 图标就会一直亮着，但不会很快耗尽您的电池电量，因为更新间隔会很高。

因此，您可以做的最好的事情实际上是在应用停用时请求较大的更新间隔。

# scheduler - dhtml 调度程序的自定义布局

> ID：12259678
> 
> 赞同：0
> 
> 时间：2012-09-04T08:36:18.227
> 
> 标签：scheduler, dhtmlx

我在我的 MVC 项目中使用了 DHTMLX 调度程序。一切安好。但默认调度程序占用全屏空间。而且我无法在调度程序中包含我自己的布局。有没有可能做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T07:10:01.533

尝试这种格式可以解决我的问题。

```
`<div id="scheduler_here" class="dhx_cal_container" style="height:1000px;width:1075px">`. 
```

您已经设置了调度程序容器的高度和宽度。这解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:07:44.550

调度程序占据其容器的全部大小，因此您可以用预定义大小的元素包装它，例如

```
<div style="height:500px;width:700px"> <%= Scheduler.Render() %> </div> 
```

或者您可以显式设置调度程序的大小

```
scheduler.Height = 500;
scheduler.Width = 700; 
```

# asp.net-mvc - 资源（resx）自定义助手

> ID：12259679
> 
> 赞同：2
> 
> 时间：2012-09-04T08:36:19.557
> 
> 标签：asp.net-mvc, localization, resx

我是第一次发帖的长期听众，我真的很想阅读您的一些本地化架构，并最终获得对我们方法的反馈（如下）。

我想要一些关于我们正在考虑使用资源文件的方法的建议。我们正在使用 MVC 3.0 并且有一个网站项目和一个资源项目。在资源项目中，我们有一个模仿网站结构的结构，例如*控制器 -> 视图 -> 文件*。

我们通过在视图/控件顶部导入资源命名空间来引用视图中的 resx 文件，例如`<%@ Import Namespace="MyAppResources.Resources.Website.Home" %>`，然后通过使用`<%= Index.SomeText %>`where index 是资源文件的名称来引用我们需要的 resx 值。

我们正在考虑做的并且希望得到一些建议的是，不是使用这种方法，而是将资源 resx 结构划分为网站区域并使用帮助程序，例如`LocalizationHelper.GetValue("Home", "SomeText")`，其中“Home”是资源文件的名称，并且`"SomeText"`是该 resx 中的一个值文件。我们这样做的原因是不必为我们所做的每个小副本更改都继续编译资源项目（因为我们可能需要对我们部署的环境进行快速修复），而且它可能是网站中最常用的帮助程序项目，因此这将使事情保持简短和一致。本地化助手还将值存储在缓存字典中，因此如果多次使用某个值，它将从缓存中检索它。

有谁知道我们没有想到的更好的方法或改进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:07:00.643

我建议使用数据库而不是 RESX 文件来存储本地化值。

使用数据库会阻止您需要进行任何代码/文件部署来更新您的应用程序。此外，您可以构建一个用于修改本地化值的 GUI 界面（这对于站点管理员/编辑器来说是一个很棒的功能）。

# javascript - 加载图像后调整 HTML 画布大小

> ID：12259682
> 
> 赞同：1
> 
> 时间：2012-09-04T08:36:35.340
> 
> 标签：javascript, jquery, html, canvas, html5-canvas

见[http://jsfiddle.net/jdb1991/6sxke/](http://jsfiddle.net/jdb1991/6sxke/)

我有一个画布元素，它在加载图像之前不知道它将用于什么，所以我需要能够在创建图像对象后动态更改元素的尺寸。

但是出了点问题，因为它似乎在异步运行命令；在调整大小发生之前将图像写入上下文。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T08:40:03.127

利用：

```
function objectifyImage(i) {
    var img_obj = new Image();
    img_obj.src = i;
    return img_obj;
}

var canvas = document.getElementById('display');
var context = canvas.getContext('2d');
i = objectifyImage('https://www.google.co.uk/images/srpr/logo3w.png');
i.onload = function() {
    canvas.width = i.width;
    canvas.height = i.height;

    context.drawImage(i, 0, 0);
};
​ 
```

演示：http: [//jsfiddle.net/ycjCe/1/](http://jsfiddle.net/ycjCe/1/)

* * *

> 元素可以通过 CSS 任意调整大小，但在渲染过程中，图像会缩放以适应其布局大小。（如果您的渲染看起来失真，请尝试在属性中明确指定您的宽度和高度属性，而不是使用 CSS。）

来源：[https ://developer.mozilla.org/en-US/docs/Canvas_tutorial/Basic_usage](https://developer.mozilla.org/en-US/docs/Canvas_tutorial/Basic_usage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T22:57:10.633

看来 i = objectifyImage 将在定义 image.onload 处理程序之前设置图像 src。这将导致缓存图像在 onload 定义之前加载到某些浏览器上。在设置 image.src 之前总是定义 onload 处理程序以避免缓存图像的计时问题是一个好主意。

```
var self = this;
.....
this.img = document.createElement('img');
this.img.onload = function () {
    self.loaded = IMGSTATE_OK;
    $Debug.log('loaded image:"' + self.img.src);
    }
this.img.onerror = function () {
    self.loaded = IMGSTATE_ERR;
    $Debug.log('error image:"' + self.img.src);
    }
this.img.src = href;
..... later on check the load state 
```

# ios - ios - 使用情节提要在标签栏控制器中拆分视图

> ID：12259683
> 
> 赞同：1
> 
> 时间：2012-09-04T08:36:36.417
> 
> 标签：ios, ipad, uitabbarcontroller, storyboard, uisplitviewcontroller

在我的应用程序中，我想在标签栏控制器中使用 splitview，而 splitview 控制器将不是`rootviewcontroller`. 我在我的应用程序中使用故事板，但我找不到任何明确的工作示例。

首先，我需要知道它是否可能。

如果可能，我如何处理 appdelegate 在标签栏控制器中运行 splitview 控制器？

我也看过`intelligentsplitviewcontroller`，但它不使用故事板。

谁能帮我解决这个问题？

# c++ - 为什么这个数组不为零？

> ID：12259687
> 
> 赞同：0
> 
> 时间：2012-09-04T08:36:43.580
> 
> 标签：c++, arrays

我写了这段代码：

```
#include <iostream>

using namespace std;

double function(int i)
{
    static int Array[5] = {0};

    for(int j = i ; j <= i ; j++)
    {
        Array[j+1] = Array[j]+1;
    }
    return Array[i+1];
}

int main()
{
    for(int i = 0 ; i <= 4 ; i++)
    {
        cout << function(i) << endl;
    }
    return 0;
} 
```

哪个输出`1,2,3,4,5`

我想知道为什么`function(i)`尽管有这段代码，但每次调用 Array 的元素都不会变为零：

```
static int Array[5] = {0}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T08:39:05.137

数组是`static`，这意味着它只被初始化一次（第一次`function`被调用）。此后它保留其现有项目。如果您删除`static`关键字，您将得到 1, 1, 1, 1, 1。

顺便说一句，`for`里面的循环`function`是多余的（保证只执行一次）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T08:42:02.550

当您使用`static`关键字在函数内声明变量时。然后：

*   该变量是在第一次调用函数时创建的。
*   此后，该变量在程序的整个生命周期内都保持活动状态 &
*   变量的值在函数调用之间保持不变。

你观察到的是关键字的这个属性`static`在起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T08:52:40.067

`Array`是`statics`。_ `static`变量只初始化**一次**。因此，`Array`仅在第一次调用时变为零。

如果您删除`static`关键字，它将在每次调用时变为零。

顺便说一下下面的代码很奇怪：

```
for(int j = i; j <=i ; j++) 
```

因为它只运行`j=i`. 因此，您可以通过以下方式更改整个功能：

```
double function(int i)
{
    static int Array[5] = {0};
    Array[i+1] = Array[i]+1;
    return Array[i+1];
} 
```

# c - 独立于类型说明符的 C 宏

> ID：12259689
> 
> 赞同：1
> 
> 时间：2012-09-04T08:36:47.630
> 
> 标签：c

如何编写*独立于类型说明符*的标准 C（C89 或 C99 兼容）宏？

具体来说，我想编写一个宏*来比较两个可以是有符号类型或无符号类型的数字，8 位、16 位、32 位、64 位。*

我正在寻找的是这样的：

```
 int c,  a , b;
           uint16_t p, q, r;

                .
                .
                .

           c = min(a, b);

                .
                .
                .

           r = min(p, q);
                .
                .
                . 
```

即，*相同的宏“min”可用于比较两个整数——任何宽度，有符号或无符号。*

我知道一个可以工作的基本宏可以这样写：

```
 #define min(x, y)   (x) < (y) ? (x) : (y) 
```

但这涉及*两次评估表达式 'x' 和 'y' 的副作用*，这是我不想要的。

为了鲁棒性，表达式必须只计算一次。

到目前为止，我的方法似乎是这样的：

```
 #define min(type, x, y)  ( {  \ 
                  type __tmp1 = (x);                      \
                  type __tmp2 = (y);                      \
                  __tmp1 < __tmp2 ? __tmp1 : __tmp2; } )

          int a, b, c;
          uint16_t p, q, r;

                   .
                   .
                   .

          c = min(int, a, b); 
```

C 编译器抛出错误：“expecting ; found (”，以及许多其他错误。

我怎样才能重新编写这个宏，以便*使用*这种形式：

```
 <result> = min( <type>, <parm1>, <parm2> ); 
```

似乎可以编写“min”宏，使其用法为：

```
 min( <result>, <type>, <parm1>, <parm2> ); 
```

但最好有第一种形式。

**2012 年 9 月 4 日更新#1：**

谢谢你们，您的答案/评论中提供的所有信息使我对可能性有了更广泛的了解。好吧，我没有使用 gcc，我的编译器也不支持 C11 规范，所以似乎唯一可用的选项是：

1.  使用这种形式的宏：

    ```
     // min( <result>, <type>, <parm1>, <parm2> ); 

           #define min(result, type, x, y)  {                   \ 
                  type __tmp1 = (x);                      \
                  type __tmp2 = (y);                      \
                  result = __tmp1 < __tmp2 ? __tmp1 : __tmp2; } 

            int p, q, r;
                .
                .
                .

            min(r, int, p, q); 
    ```

2.  另一种方法是：

    ```
     inline char min_char(char x, char y)       { return x < y ? x : y; }
          inline short min_short(short x, short y)    { return x < y ? x : y; }
          inline int min_int(int x, int y)          { return x < y ? x : y; }
          inline long min_long(long x, long y)      { return x < y ? x : y; }

          inline unsigned char min_uchar(unsigned char x, unsigned char y)    { return x < y ? x : y; }  
          inline unsigned short min_ushort(unsigned short x, unsigned short y) { return x < y ? x : y; }   
          inline unsigned int min_uint(unsigned int x, unsigned int y)       { return x < y ? x : y; }  
          inline unsigned long min_ulong(unsigned long x, unsigned long y)   { return x < y ? x : y; }  

          #define   min(type, x, y)    min_##type(x, y)

          int p, q, r;
               .
               .
               .

          r = min(int, p, q); 
    ```

第二种方法是否有任何副作用，在某些情况下可能会产生意想不到的结果，特别是关于“短”和“字符”类型 - 有符号或无符号。

欢迎任何改进或建议。

**编辑：**

用户将如何指定以下功能：

```
 'min_uchar' 
```

他/她必须写：

```
 r = min(uchar, p, q); 
```

有没有其他方法可以编写函数'uchar'，以便用户可以简单地编写：

```
 r = min(unsigned char, p, q); 
```

在这种情况下，我不能将函数命名为“min_unsigned char”，因为它在 C 中是不允许的。是否有任何其他方式或用户必须在宏“min”中将类型指定为“uchar”而不是“unsigned char” '。

**2012-09-10 更新：**

谢谢大家的帮助。由于我需要接受答案，因此我接受*Eitan T*的回答，但我感谢大家的回复。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T09:25:41.587

当然，您的宏可以独立于类型说明符，这是使宏如此强大的原因之一。您可以：

1.  传递变量名和类型，让​​宏处理类型。
2.  传递*不带*类型的变量名，并假定宏对该变量执行合法操作，而不管类型如何。

您的实际问题是，在第一种形式中，您希望宏返回一个表达式，但在其中您声明了变量等等。我相信正因为如此，您将花括号放入宏中，现在它扩展为: `({ bla bla })`，这将在 ISO C99 中为您提供以下错误消息：

> `ISO C forbids braced-groups within expressions`

不幸的是，在 ISO C99 中，您不能同时拥有一个表达式并在其中声明临时变量。这就是功能的用途。

因此，要么使用您描述的第二种形式，即将“结果”变量传递给宏：

```
#define min(type_, x_, y_, result_)                    \
    do {                                               \
        type_ __tmp1 = (x_);                           \
        type_ __tmp2 = (y_);                           \
        result_ = (__tmp1 < __tmp2 ? __tmp1 : __tmp2); \
    } while(0) 
```

或改用内联函数。

PS：
此外，在编写 C 宏时， [this](https://stackoverflow.com/questions/154136/why-are-there-sometimes-meaningless-do-while-and-if-else-statements-in-c-c-mac)和[this](https://stackoverflow.com/questions/1067226/c-multi-line-macro-do-while0-vs-scope-block)值得一读，以获得良好的实践。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T08:59:11.807

如果您使用[gcc 语句表达式](http://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html#Statement-Exprs)，那么您还可以使用 gcc[扩展关键字`typeof`](http://gcc.gnu.org/onlinedocs/gcc/Typeof.html#Typeof)（或`__typeof__`）：

```
 #define min(x,y)  ( {                                \ 
              typeof(x) __tmp1 = (x);                      \
              typeof(y) __tmp2 = (y);                      \
              __tmp1 < __tmp2 ? __tmp1 : __tmp2; } ) 
```

`_Generic`C11 使用关键字引入类型泛型表达式：

```
int min_int(int x, int y) { return x < y ? x : y; }
long min_long(long x, long y) { return x < y ? x : y; }
#define min(x,y) _Generic((x + y),                        \
                          int: min_int,                   \
                          long: min_long)(x, y) 
```

鉴于您愿意在宏调用中编写类型，您可以使用：

```
int min_int(int x, int y) { return x < y ? x : y; }
long min_long(long x, long y) { return x < y ? x : y; }
#define min(type,x,y) min_ ## type(x, y) 
```

这是在旧版 C 中唯一有效的语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T08:41:53.193

宏函数不能执行类型检查。如果您想对指定类型的操作数进行操作（如果参数类型不兼容，则强制编译器警告），您必须使用函数（也许`inline`如果您考虑性能）。

您的方法令人愉悦，但带有表达式的大括号组是 gcc 扩展（非标准），因此标准编译器无法将您的宏函数评估为具有特定值的表达式。

此外，您的`\`字符后面有一个空格，这会导致语法错误。

```
/* GCC-compatible */
#define min(t, x, y) ({ \
    t __tmp1 = (x); \
    t __tmp2 = (y); \
    __tmp1 < __tmp2 ? __tmp1 : __tmp2; \
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T17:34:39.163

由于所有解决方案似乎都需要指定类型，因此您不妨调用特定的宏来进行比较。您还可以推广到仅两个宏，并为每个有符号/无符号使用最大类型：

```
#define smin(x_, y_, result_)                     \
  do {                                            \
    int64_t __tmp1 = (x_);                        \
    int64_t __tmp2 = (y_);                        \
    result_ = __tmp1 < __tmp2 ? __tmp1 : __tmp2;  \
  } while(0)
#define umin(x_, y_, result_)                     \
  do {                                            \
    uint64_t __tmp1 = (x_);                       \
    uint64_t __tmp2 = (y_);                       \
    result_ = __tmp1 < __tmp2 ? __tmp1 : __tmp2;  \
  } while(0) 
```

确保只比较相同标牌的类型。

# javascript - Google 分析跟踪代码使用什么技术？

> ID：12259694
> 
> 赞同：2
> 
> 时间：2012-09-04T08:36:53.687
> 
> 标签：javascript, google-analytics

Google Analytics 跟踪代码如下所示：

```
(function() {
code
  })(); 
```

他们对这些括号使用的技术是什么 - `(stuff)()`- 叫什么？它有什么作用？

我将 Google Analytics 代码放在页面的结束 head 标记之前，然后像这样在它周围放置一个 if 语句（我进一步包含了一个 Jquery cookie 插件）：

```
<script type="application/javascript">
if ($.cookie('allowcookies') == 'yes') {
analytics code
}
</script> 
```

直到我在我的代码中使用相同的技术，它才运行：

```
(function() {if ($.cookie('allowcookies') == 'yes') {

analytics code
}
})(); 
```

为什么在我这样做之前它没有运行？为什么追了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T08:43:50.563

```
(function() {
   /* code */
}()); 
```

它通常被称为«自执行匿名函数 (¹)»（o «立即函数调用»），其主要用途是避免在全局（或外部）范围内创建变量。

当您想创建一个只执行一次的函数时，它也可以用作快捷方式，而无需先使用自己的标识符定义函数，然后很快进行函数调用。

它最终可能会在范围内使用，然后如果外部上下文（或其他引用）通过参数传递绑定，则它可能会创建一个闭包，例如

```
/* outer scope */  
(function(outerscope) {

   element.onsomeevent = function() {
       /* do something with outerscope */
   };

}(this)); 
```

我使用此表达式进行的另一个实际用途是，当我需要创建一个函数，以便在使用`new`关键字调用构造函数时（而不是显式调用某个`init`方法）在构造函数中执行该函数。

* * *

(¹) — 正如 Nicholas Zakas ( *O'Reilly, ISBN 978-1-449-32768-2* ) 第*44*页的“Mantainable Javascript”一书中所述，建议的表达式是`(function() {}())`, 带有嵌套的括号（即使`(function() {})()`无论如何都可以使用）

> [...]为了清楚地表明正在发生立即函数调用，请在函数*周围*加上括号[...]

另请参见[立即函数调用语法](https://stackoverflow.com/questions/939386/immediate-function-invocation-syntax)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T08:41:47.447

“function(){code}”部分只创建一个函数，最后的 () 调用创建的函数。你可以重写

```
(function() {
code
  })(); 
```

作为

```
var x = function() {code};
x(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T08:40:51.627

它只是一个选择调用函数。最后的 () 导致它被自动调用。

像这样使用它来将仅与您的代码相关的局部变量与全局范围隔离。

例如：

```
(function() {

   var x = 5;
   window.y = 6;

})(); 
```

x 仅在函数范围内可用， y 通过窗口全局可用。

至于它没有运行，我冒险这取决于你提供的条件。

# c++ - 类数组总和、索引和计算

> ID：12259695
> 
> 赞同：1
> 
> 时间：2012-09-04T08:37:00.957
> 
> 标签：c++, oop, inheritance, indexing

代码：

```
class B {
public:
    B () : b(++bCounter) {}
    int b;
    static int bCounter;
};

int B::bCounter = 0;

class D : public B {
public:
    D () : d(0) {}
    int d;
};

const int N = 10;
B arrB[N];
D arrD[N];

int sum1 (B* arr) {
    int s = 0;
    for (int i=0; i<N; i++) 
    {
        s+=arr[i].b;
    }
    return s;
}
int sum2 (D* arr) {
    int s = 0;
    for (int i=0; i<N; i++)
    {
        s+=arr[i].b+arr[i].d;
    }
    return s;
} 
```

问题：

这些返回什么：

1）`sum1(arrB)`=？

2）`sum1(arrD)`=？

3）`sum2(arrD)`=？

当我编译并运行这些时，我得到 55、65 和 155，但不知道为什么。我收集到在 arrB 中的变量是 b=1,2,3,...,10，而在 arrD b=11,12,...,20 中，我会回答 sum1(arrB)=55 和sum1(arrD)=155 等于 11+12+..+20 的和，而 sum2(arrD)=155，因为处处 d=0。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T08:50:07.387

您正在进行对象切片。您正在将一个`D*`数组传递给一个接受数组的函数`B*`。`D`最初大于`B`。

每次您这样做时，`s+=arr[i].b;`您都将指针移动*B 的大小*，而您需要将其移动*D 的大小*，因此每次迭代后指针不会向前移动一项。

```
[TheBPart|TheDPart][TheBPart|TheDPart][TheBPart|TheDPart]
^
|
iteration 0

[TheBPart|TheDPart][TheBPart|TheDPart][TheBPart|TheDPart]
         ^
         |
      iteration 1

[TheBPart|TheDPart][TheBPart|TheDPart][TheBPart|TheDPart]
                   ^
                   |
             iteration 2

[TheBPart|TheDPart][TheBPart|TheDPart][TheBPart|TheDPart]
                            ^
                            |
                          iteration 3 
```

在您的特定情况下发生的情况是，在每次奇数迭代之后，它都指向类对象*中间*`D`的某个位置。之所以发生这种情况，是因为`D`恰好是 的两倍`B`，否则行为会有所不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T08:52:41.457

问题在于转换`arrD`为`arrB`. B 的大小为 4 个字节，而 D 的大小为 8 个字节。

当您将 D* 转换为 B* 时，实际上每次迭代会在内存中跳转 4 个字节，而不是 8 个字节。如果我们一次取 4 个字节，arrD 将在内存中保存以下值

```
11   // arrD[0].b
0    // arrD[0].d
12   // arrD[1].b
0    // arrD[1].d
13   // arrD[2].b
0    // arrD[2].d
14   // arrD[3].b
0    // arrD[3].d
15   // arrD[4].b
0    // arrD[4].d
16   // arrD[5].b
0    // arrD[5].d
17   // arrD[6].b
0    // arrD[6].d
18   // arrD[7].b
0    // arrD[7].d
19   // arrD[8].b
0    // arrD[8].d
20   // arrD[9].b
0    // arrD[9].d 
```

现在，当你总结一次取 4 个字节时，你取它的前 10 个值。因此你的结果是：11+0+12+0+13+0+14+0+15+0 = 65

从类似的推理中，您可以知道结果的原因`sum2`。

# ios - 如何避免 iOS Newsstand 应用收到远程通知导致的 Web 服务器流量高峰？

> ID：12259696
> 
> 赞同：2
> 
> 时间：2012-09-04T08:37:02.893
> 
> 标签：ios, performance, apache, http, newsstand-kit

我正在开发一个 iOS 报亭应用程序。

如果它被暂停或未运行并连接到 WLAN，则可以通过推送远程通知触发 Newsstand 应用程序以在后台下载最新一期（在我们的示例中约为 100MB）。

我正在使用 Urban Airship 来传送 Push 广播。

我现在担心许多 iOS 设备或多或少地同时访问 Web 服务器进行一次大下载，因为我预计大多数设备会在很短的时间内收到通知。

与其向所有设备广播，我是否应该向成批的小设备群发送单独的通知，将它们分散到更长的时间段？

和/或像 Amazon Cloudfront 这样的 CDN 会更容易/无论如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T09:36:24.910

鉴于您的开发也不是免费的；并且考虑到这种交错交付还会带来持续的组织和运营成本（以及向“新闻”客户解释这一点的复杂性）；我建议您认真考虑使用 CDN 进行实际交付。它消除了问题的所有复杂性 - 并消除了故障/风险点并将其换成易于货比三家的问题。

这对所有参与者来说都是双赢的。

德。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:51:39.020

像往常一样，“这取决于” - 主要取决于您的网络托管情况。

如果您的主机设置中的带宽有限（例如 100Mbps），您希望避免提供任何大型下载服务 - 即使是单个用户下载大文件也可能会在几秒钟内淹没您的网络。

其次，营销人员喜欢想象用户会立即点击推送提醒，因为这是他们生活中最重要的事情——事实上，这种情况很少见。为了从“交错”推送通知中获得任何好处，时间间隔可能需要以天为单位来衡量（当然，这完全取决于您的内容——关于小猫的每日新闻比每季度推迟一次的可能性更小税法杂志）。我认为需要多次尝试才能确定正确的时间间隔 - 在此期间您的用户体验会很差。

因此，正如 Dirk-Willem van Gulik 所说，投资 CDN 是个好主意。每次下载都会花钱——但原则上，CDN 提供商拥有无限带宽，升级您的工具包以匹配几乎可以肯定是不现实的。

# javascript - 如何防止脚本在移动设备上运行？

> ID：12259701
> 
> 赞同：8
> 
> 时间：2012-09-04T08:37:34.553
> 
> 标签：javascript, iphone, ipad, mobile

我的网站具有粘性导航功能，但无法在移动设备上运行...

如何**让它**在移动设备上保持粘性，或者如何**防止它保持粘性**（当然，在保持导航的同时）？

我到处寻找答案，但找不到有效的答案（并且没有禁用我的导航：）非常感谢您的帮助！

这是我的 index.html 标头的一部分：

```
<head>

<link href="css/reset.css" rel="stylesheet" type="text/css" />
<link href="css/960.css" rel="stylesheet" type="text/css" />
<link href="css/styles.css" rel="stylesheet" type="text/css" />
<link href="fancybox/jquery.fancybox-1.3.4.css" rel="stylesheet" type="text/css" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="js/smooth-scroll.js" type="text/javascript"></script>
<script src="js/jquery.sticky.js" type="text/javascript"></script>
<script src="contactform.js" type="text/javascript"></script>

<!-- sticky nav -->
<script type="text/javascript">
$(window).load(function(){
$("nav").sticky({ topSpacing: 0, className: 'sticky', center: true });
});
</script>

</head> 
```

这是 jquery.sticky javascript 中的代码：

```
(function($) {
var defaults = {
        topSpacing: 0,
        bottomSpacing: 0,
        className: 'is-sticky',
        center: false
    },
    $window = $(window),
    $document = $(document),
    sticked = [],
    windowHeight = $window.height(),
    scroller = function() {
        var scrollTop = $window.scrollTop(),
            documentHeight = $document.height(),
            dwh = documentHeight - windowHeight,
            extra = (scrollTop > dwh) ? dwh - scrollTop : 0;
        for (var i = 0; i < sticked.length; i++) {
            var s = sticked[i],
                elementTop = s.stickyWrapper.offset().top,
                etse = elementTop - s.topSpacing - extra;
            if (scrollTop <= etse) {
                if (s.currentTop !== null) {
                    s.stickyElement.css('position', '').css('top', '').removeClass(s.className);
                    s.currentTop = null;
                }
            }
            else {
                var newTop = documentHeight - s.elementHeight - s.topSpacing - s.bottomSpacing - scrollTop - extra;
                if (newTop < 0) {
                    newTop = newTop + s.topSpacing;
                } else {
                    newTop = s.topSpacing;
                }
                if (s.currentTop != newTop) {
                    s.stickyElement.css('position', 'fixed').css('top', newTop).addClass(s.className);
                    s.currentTop = newTop;
                }
            }
        }
    },
    resizer = function() {
        windowHeight = $window.height();
    };

// should be more efficient than using $window.scroll(scroller) and $window.resize(resizer):
if (window.addEventListener) {
    window.addEventListener('scroll', scroller, false);
    window.addEventListener('resize', resizer, false);
} else if (window.attachEvent) {
    window.attachEvent('onscroll', scroller);
    window.attachEvent('onresize', resizer);
}

$.fn.sticky = function(options) {
    var o = $.extend(defaults, options);
    return this.each(function() {
        var stickyElement = $(this);
        if (o.center)
            var centerElement = "margin-left:auto;margin-right:auto;";

        stickyId = stickyElement.attr('id');
        stickyElement
            .wrapAll('<div id="' + stickyId + 'StickyWrapper" style="' + centerElement + '"></div>')
            .css('width', stickyElement.width());
        var elementHeight = stickyElement.outerHeight(),
            stickyWrapper = stickyElement.parent();
        stickyWrapper
            .css('width', stickyElement.outerWidth())
            .css('height', elementHeight)
            .css('clear', stickyElement.css('clear'));
        sticked.push({
            topSpacing: o.topSpacing,
            bottomSpacing: o.bottomSpacing,
            stickyElement: stickyElement,
            currentTop: null,
            stickyWrapper: stickyWrapper,
            elementHeight: elementHeight,
            className: o.className
        });
    });
};
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-06-12T05:07:31.100

```
function isMobile() {
return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
}

if (!isMobile()) {
//place script you don't want to run on mobile here

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T08:48:49.717

避免读取用户代理字符串，因为它可能被篡改或欺骗。使用[Modernizr](http://modernizr.com/docs/)来测试用户环境究竟支持哪些功能，特别是对于触摸：`if (Modernizr.touch)`

满足您的需求：

```
<head>

<link href="css/reset.css" rel="stylesheet" type="text/css" />
<link href="css/960.css" rel="stylesheet" type="text/css" />
<link href="css/styles.css" rel="stylesheet" type="text/css" />
<link href="fancybox/jquery.fancybox-1.3.4.css" rel="stylesheet" type="text/css" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="js/smooth-scroll.js" type="text/javascript"></script>
<script src="js/jquery.sticky.js" type="text/javascript"></script>
<script src="http://ajax.aspnetcdn.com/ajax/modernizr/modernizr-2.0.6-development-only.js" type="text/javascript"></script>
<script src="contactform.js" type="text/javascript"></script>

<!-- sticky nav -->
<script type="text/javascript">
$(window).load(function(){
    if (Modernizr.touch) {
        $("nav").sticky({ topSpacing: 0, className: 'sticky', center: true });
    }
});
</script>

</head> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T08:45:02.767

您应该检查用户是否使用移动浏览器。如果是这样，请不要执行粘性插件方法。

```
<!-- sticky nav -->
<script type="text/javascript">

var isMobile = {
Android: function() {
    return navigator.userAgent.match(/Android/i) ? true : false;
},
BlackBerry: function() {
    return navigator.userAgent.match(/BlackBerry/i) ? true : false;
},
iOS: function() {
    return navigator.userAgent.match(/iPhone|iPad|iPod/i) ? true : false;
},
Windows: function() {
    return navigator.userAgent.match(/IEMobile/i) ? true : false;
},
any: function() {
    return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Windows());
}
};

$(function(){
    if(! isMobile.any()){
        $("nav").sticky({ topSpacing: 0, className: 'sticky', center: true });
    }
});
</script> 
```

用户代理检测的代码是从这里借来[的](http://www.abeautifulsite.net/blog/2011/11/detecting-mobile-devices-with-javascript/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T08:49:40.093

我认为一个好的解决方案是只检查屏幕或视口大小。这绝不是对移动设备的检查，但在小屏幕/视口上取消导航似乎很合理。我不是小屏幕上页面最重要的部分，网站内容才是。粘性导航并不是那么重要。

检查特定平台或设备是如此 1999 年，我不会推荐它。如果用户在 win8 平板电脑或其他设备上查看您的网站，您还需要那个粘性导航吗？

添加以下内容，`<head>`让移动设备知道您网站内容的宽度（将 960 更改为您拥有的任何宽度）：

```
<meta name="viewport" content="width=960px, initial-scale=1"> 
```

并在 javascript 中像这样检查（将 640 更改为您认为合适的任何内容）：

```
if (document.documentElement.clientWidth > 640 ) {
    $("nav").sticky({ topSpacing: 0, className: 'sticky', center: true });
} 
```

# php - 使用 Symfony Crawler 选择 HTML 块

> ID：12259707
> 
> 赞同：1
> 
> 时间：2012-09-04T08:38:01.957
> 
> 标签：php, dom, symfony

我正在使用 DOMCrawler 基于 CSS 选择器选择 HTML，如下所示；

```
$selector = '#content';
$html = $my_fetched_html;
$crawler = new Crawler($html);
$crawler = $crawler->filter($selector); 
```

这一切都很好，如果我遍历 $crawler 元素，它确认选择器工作，即，我只得到一个 div 而不是完整的 html。

但是，当谈到保存 HTML 时，我遇到了问题，因为做这样的事情；

```
$html = '';

foreach ($crawler as $domElement) {
  $html.= $domElement->ownerDocument->saveHTML();
}

echo $html; 
```

（如[this question所示](https://stackoverflow.com/questions/9565854/how-do-i-get-the-updated-html-from-symfonys-domcrawler-component)）

我再次获得了完整的结构，我假设它是因为 $ownerDocument 仍然是原始（未选择的）$crawler 文档。

所以，我需要的是能够实例化一个新的 DomDocument（也许？）将我的 Element 添加到它，然后从那里 saveHTML() 。我认为？

伪代码；

```
$doc = new DomDocument
foreach ($crawler as $domElement) {
  $doc->addChild($domElement);
}

$new_html = $doc->saveHTML(); 
```

我很想得到任何帮助，它开始让我陷入困境。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:09:10.423

您需要传递您希望 html 为其 saveHTML() 的子项。即这样做：

```
$html.= $domElement->ownerDocument->saveHTML($domElement); 
```

# android - 全文搜索安卓

> ID：12259708
> 
> 赞同：0
> 
> 时间：2012-09-04T08:38:07.447
> 
> 标签：android, database, sqlite

我对全文搜索有疑问。当我搜索时它只是搜索第一个单词例如我有“项目测试”我可以通过搜索项目找到它但是当我尝试搜索“测试”时我找不到它请告诉我该怎么做我给你我的代码

```
public static Cursor fetchProjectCursor(String name)
        throws IllegalAccessException, InstantiationException {

    Cursor cursor = DataBaseUtil.dataBaseAccess().query(
            _PROJECT_TABLE,
            _FIELD_NAME,
         "(" + _NAME + ")" + " LIKE " +  "(" + "\""
                + name + "%" + "\"" + ")", null, null, null, _MODIFIED_DATE);

    return cursor;
} 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:43:31.983

尝试在 name 参数之前添加一个 '%'，如下所示：

```
public static Cursor fetchProjectCursor(String name)
        throws IllegalAccessException, InstantiationException {

    Cursor cursor = DataBaseUtil.dataBaseAccess().query(
            _PROJECT_TABLE,
            _FIELD_NAME,
         "(" + _NAME + ")" + " LIKE " +  "(" + "\"" + "%"
                + name + "%" + "\"" + ")", null, null, null, _MODIFIED_DATE);

    return cursor;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:33:57.333

查看 SQLite 中的内置全文支持。

```
CREATE VIRTUAL TABLE mytable USING fts3 (text TEXT);
SELECT * FROM mytable WHERE text MATCH "text to match"; 
```

即使您声明 INTEGER，在 fts3 虚拟表中所有表都在 TEXT 中。因此，您可能会发现将表拆分为两个表很有帮助。它需要一点点工作，但可以在数据库层上进行拆分。但结果会更好。有了更多的行和更大的行，您可以看到速度有了很大的提高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:42:35.860

只需要在 name 之前添加**“%” 。**

```
Cursor cursor = DataBaseUtil.dataBaseAccess().query(
            _PROJECT_TABLE,
            _FIELD_NAME,
         "(" + _NAME + ")" + " LIKE " +  "(" + "\"" + "%"
                + name + "%" + "\"" + ")", null, null, null, _MODIFIED_DATE); 
```

## 或者

尝试这个。

```
return db.rawQuery("select * from your_table_name where column_name like ?", new String[] {"%"+name+"%"}); 
```

它返回光标。

# c# - 向 XElement 添加空行，保留其他格式

> ID：12259710
> 
> 赞同：2
> 
> 时间：2012-09-04T08:38:09.630
> 
> 标签：c#, .net, xml, xelement

我有一个用代码构造的 XElement。它（概念上）有 2 组节点。如果我只是打印出来，我会得到一个格式很好的 Xml 文件，但所有节点都在一起。如果我在两组之间添加几个换行符以便于人类理解，我会丢失它后面的所有格式。如何在两组之间添加一个小中断，并且仍然保留其余的格式？

**示例：**
这是默认设置：

```
<root>
  <node>1.1</node>
  <node>1.2</node>
  <node>2.1</node>
  <node>2.2</node>
</root> 
```

这是如果我添加休息：

```
<root>
  <node>1.1</node>
  <node>1.2</node>

<node>2.1</node><node>2.2</node></root> 
```

这就是我要的：

```
<root>
  <node>1.1</node>
  <node>1.2</node>

  <node>2.1</node>
  <node>2.2</node>
</root> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:48:22.957

查看[此处](https://stackoverflow.com/questions/1950019/spacing-out-output-with-linq-to-xml)发布的解决方案。我的印象是使用干净的解决方案是不可能的。我尝试了几种方法，都没有成功。我还查看了 System.Linq.Xml 源代码，但无法真正找到它这样做的原因。

另一种选择是先做`ToString`，然后在之后添加换行符（如果您知道哪些节点需要换行符，请使用替换）：

```
result = result.Replace("<parentNode>", Environment.NewLine + "<parentNode>"); 
```

但这可能会再次破坏您的缩进。

# svn - 在提交后挂钩中将文件添加到存储库

> ID：12259711
> 
> 赞同：0
> 
> 时间：2012-09-04T08:38:12.293
> 
> 标签：svn, svn-hooks

是否可以在提交后挂钩中将新文件添加到存储库。

当用户提交文件时，必须将新文件添加到包含用户给出的提交评论的存储库中。

对于同一文件的第二次提交，需要附加已添加的文件。

我可以通过使用`svn.exe add`命令来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:57:09.517

Check the [SVNBook](http://www.visualsvn.com/support/svnbook/reposadmin/create/) for the answer:

> **Warning**
> 
> While hook scripts can do almost anything, there is one dimension in which hook script authors should show restraint: do not modify a commit transaction using hook scripts. While it might be tempting to use hook scripts to automatically correct errors, shortcomings, or policy violations present in the files being committed, doing so can cause problems. Subversion keeps client-side caches of certain bits of repository data, and if you change a commit transaction in this way, those caches become indetectably stale. This inconsistency can lead to surprising and unexpected behavior. Instead of modifying the transaction, you should simply validate the transaction in the pre-commit hook and reject the commit if it does not meet the desired requirements. As a bonus, your users will learn the value of careful, compliance-minded work habits.

# android - 将音频添加到视频文件

> ID：12259713
> 
> 赞同：0
> 
> 时间：2012-09-04T08:38:16.400
> 
> 标签：android, ffmpeg

我正在尝试将 wav 文件作为背景添加到 mp4 视频中，但不知道从哪里开始...我尝试查看“视频编辑器”API，但没有发现任何有用的...

是否值得在设备上以某种形式使用 ffmpeg 还是有一种我忽略的方法？（如果有的话，有没有适合新手的好教程？）

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:51:55.113

是的，ffmpeg 已经足够好了

```
ffmpeg -i in.mp4 -i in.wav -acodec <give your codec> -vcodec copy out.mp4 
```

应该做的伎俩并为我工作。

# python - 使用python测试windows应用的加载时间

> ID：12259716
> 
> 赞同：0
> 
> 时间：2012-09-04T08:38:17.737
> 
> 标签：python, windows, testing

我想使用 python 来测试各种 Windows 应用程序（一个是 Acrobat Reader X）加载文件所需的时间。

我可以在 Python 代码中测试打开和关闭文件的加载时间。

我知道如何使用 Python 启动子进程并以这种方式打开 Windows 应用程序，但这在这种情况下没有用，因为 python 调用子进程并继续执行脚本，因此计时器始终读取 0。

是否有另一种方法可以用来打开 Windows 应用程序、测试它的状态（是否已加载文件）以及整个过程的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:15:48.177

有不同的计时功能，具有不同的语义。 `time.clock()`返回当前进程经过的时间，同时`time.time()`返回自纪元以来的秒数。这意味着，如果您想为其他进程计时，您应该使用`time.time()`而不是`time.clock()`.

例子：

```
>>> import time
>>> import subprocess
>>> def time_time():
...     t1 = time.time()
...     subprocess.call(['python', 'a.py'])
...     return time.time() - t1
... 
>>> def time_clock():
...     t1 = time.clock()
...     subprocess.call(['python', 'a.py'])
...     return time.clock() - t1
... 
>>> time_time()
0.12334513664245605
>>> time_clock()
0.0 
```

可能存在更好的解决方案（*），并考虑到[Python3.3](http://www.python.org/dev/peps/pep-0418/)的 PEP418。

另外我想指出，最好使用`profile/cProfile`或`hotshot`模块来分析代码。他们为您提供了有关时间安排的更多信息。

(*)`time.time()`如果系统管理员更改计算机的时间会受到影响，因此不保证`time.time() - time.time()`会返回大于或等于零的值，并且即使是正数，您也无法确定时间是否正确正确的。即使在正常情况下，管理员不会在您进行分析时更改时间，但这不会发生。

# function - XQuery 用单个和多个值标记字符串

> ID：12259718
> 
> 赞同：1
> 
> 时间：2012-09-04T08:38:22.683
> 
> 标签：function, xquery, tokenize

我有以下 XML 文件：

```
<layout>
 <layout-structure>
  <layout-root id="layout-root">
    <layout-chunk id="header-text">
         <layout-leaf xref="lay-1.01"/>
         <layout-leaf xref="lay-1.02"/>
    </layout-chunk>
    <layout-leaf xref="lay-1.03"/>
  </layout-root>
  <layout-root id="layout-root-two">
    <layout-chunk id="header-text-two">
     <layout-leaf xref="lay-1.04"/>
     <layout-leaf xref="lay-1.05"/>
     <layout-leaf xref="lay-1.06"/>
    </layout-chunk>
  <layout-leaf xref="lay-1.07"/>
 </layout-root>
</layout-structure>

<realization>
  <text xref="lay-1.01 lay-1.04"/>
  <text xref="lay-1.02 lay-1.05"/>
  <graphics xref="lay-1.03 lay-1.06" type="1"/>
  <graphics xref="lay-1.07" type="2"/>
</realization>
</layout> 
```

我想提取**图形元素的***外部参照*属性的值，以限制下面显示的函数的*for子句中的输出。*

 ***```
declare function local:gfx($root, $graphics) {
let $graphic-xrefs := tokenize($graphics/@xref, " ")
for $layout-leafs in $root//layout-leaf[@xref = $graphic-xrefs]
return concat('"', $layout-leafs/@xref, '" ', $dotgraphics, ';', $newline) 
}; 
```

但是，这会导致错误，因为**图形元素下的某些***外部参照*属性包含单个值，例如.**`<graphics xref="lay-1.07"/>`**

 **是否可以使用标记化来获取**图形**/*外部参照*值，还是应该使用不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:32:18.917

您可以尝试更改创建方式`$graphic-xrefs`...

```
declare function local:gfx($root, $graphics) {
    let $graphic-xrefs := 
        for $xref in $graphics/@xref
        return
            tokenize($xref,' ')
    for $layout-leafs in $root//layout-leaf[@xref = $graphic-xrefs]
    return concat('"', $layout-leafs/@xref, '" ', $dotgraphics, ';', $newline) 
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T14:24:48.660

这应该不会导致问题，因为`tokenize`如果拆分字符串不在搜索字符串中，它将简单地返回整个字符串。

对于一般情况下的处理，正常的`if (...) then ... else ...`陈述可能是有用的。此外，您可能希望使用该`try { ... } catch {...}`构造来处理意外情况。

当我运行此代码时，您的代码实际上按预期工作：

```
declare variable $t :=
<layout>
 <layout-structure>
  <layout-root id="layout-root">
    <layout-chunk id="header-text">
         <layout-leaf xref="lay-1.01"/>
         <layout-leaf xref="lay-1.02"/>
    </layout-chunk>
    <layout-leaf xref="lay-1.03"/>
  </layout-root>
  <layout-root id="layout-root-two">
    <layout-chunk id="header-text-two">
     <layout-leaf xref="lay-1.04"/>
     <layout-leaf xref="lay-1.05"/>
     <layout-leaf xref="lay-1.06"/>
    </layout-chunk>
  <layout-leaf xref="lay-1.07"/>
 </layout-root>
</layout-structure>

<realization>
  <text xref="lay-1.01 lay-1.04"/>
  <text xref="lay-1.02 lay-1.05"/>
  <graphics xref="lay-1.03 lay-1.06" type="1"/>
  <graphics xref="lay-1.07" type="2"/>
</realization>
</layout>;

declare function local:gfx($root, $graphics) {
let $graphic-xrefs := tokenize($graphics/@xref, " ")
for $layout-leafs in $root//layout-leaf[@xref = $graphic-xrefs]
return $layout-leafs/@xref
};

local:gfx($t, $t/realization/graphics[2]) 
```

请注意，`<layout>`代码片段中的最后一个实际上应该是结束语句。*****

# android - ListFragment 中的片段

> ID：12259719
> 
> 赞同：3
> 
> 时间：2012-09-04T08:38:24.407
> 
> 标签：android, android-fragments, android-viewpager

我正在使用一个**自定义 viewpager**，其中 Listfragment 加载了**FragmentPagerAdapter**。每个 ListFragment 代表一个**双面板布局**，其中每个列表项将一些其他片段加载到**框架布局**（右面板）。

这是最佳做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:49:56.943

简单的答案是...

您不能在片段内添加片段。

**更新**

相反，您可以做的是...使用`PagerAdapter`并设置其中有两个片段的视图。

**简短的**

`PagerAdapter`是的父类，`FragmentPagerAdapter`所以你需要制作扩展 pageradapter 的适配器参考[这个链接](https://stackoverflow.com/questions/7263291/viewpager-pageradapter-not-updating-the-view)你会有一个想法，

你需要看@the `instantiateItem`，这个方法负责生成视图，所以你需要膨胀并返回其中有两个片段的视图。

我现在没有工作示例，但您可以通过`PagerAdapter`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:18:51.653

Android**支持库**现在还支持**嵌套片段**，因此您可以在 Android 1.6 及更高版本上实现嵌套片段设计。

要嵌套片段，只需在要添加片段的片段上调用**​​getChildFragmentManager() 。**这将返回一个 FragmentManager，您可以像通常从顶级活动中一样使用它来创建片段事务。例如，下面是一些从现有 Fragment 类中添加片段的代码：

```
Fragment videoFragment = new VideoPlayerFragment();
FragmentTransaction transaction = getChildFragmentManager().beginTransaction();
transaction.add(R.id.video_fragment, videoFragment).commit(); 
```

# c# - 多个客户端等待相同的事件

> ID：12259722
> 
> 赞同：0
> 
> 时间：2012-09-04T08:38:40.067
> 
> 标签：c#, multithreading, api, event-handling, autoresetevent

我正在开发一个通信 API，供许多通用客户端与专有系统通信。

这个专有系统公开了一个 API，我使用一个特定的类来发送和等待来自这个系统的消息：显然系统会使用事件提醒我消息已准备好。该事件被命名为 OnMessageArrived。

我的想法是公开一个简单的 SendSyncMessage(message) 方法，帮助用户/客户端简单地发送消息，该方法返回响应。

客户端：

```
using ( Communicator c = new Communicator() )
{
    response = c.SendSync(message);
} 
```

通信器类是这样完成的：

```
public class Communicator : IDisposable
{
    // Proprietary system object
    ExternalSystem c;

    String currentRespone;
    Guid currentGUID;
    private readonly ManualResetEvent _manualResetEvent;
    private ManualResetEvent _manualResetEvent2;

    String systemName = "system";
    String ServerName = "server";

    public Communicator()
    {
        _manualResetEvent = new ManualResetEvent(false);           

        //This methods are from the proprietary system API
        c = SystemInstance.CreateInstance();
        c.Connect(systemName , ServerName);
    }

    private void ConnectionStarter( object data )
    {
        c.OnMessageArrivedEvent += c_OnMessageArrivedEvent;

       _manualResetEvent.WaitOne();

        c.OnMessageArrivedEvent-= c_OnMessageArrivedEvent;

    }

    public String SendSync( String Message )
    {
        Thread _internalThread = new Thread(ConnectionStarter);
        _internalThread.Start(c);

        _manualResetEvent2 = new ManualResetEvent(false);

        String toRet;
        int messageID;

        currentGUID = Guid.NewGuid();

        c.SendMessage(Message, "Request", currentGUID.ToString());

        _manualResetEvent2.WaitOne();

        toRet = currentRespone;

        return toRet;
    }

    void c_OnMessageArrivedEvent( int Id, string root, string guid, int TimeOut, out int ReturnCode )
    {
        if ( !guid.Equals(currentGUID.ToString()) )
        {
            _manualResetEvent2.Set();
            ReturnCode = 0;
            return;
        }

        object newMessage;

        c.FetchMessage(Id, 7, out newMessage);

        currentRespone = newMessage.ToString();

        ReturnCode = 0;

        _manualResetEvent2.Set();
    }
} 
```

我真的不喜欢使用waithandle，但我的想法是创建一个发送消息并等待事件的实例。一旦事件到达，检查消息是否是我期望的（检查唯一的 guid），否则继续等待下一个事件。这是因为可能（并且通常以这种方式）许多客户端同时工作，我希望它们并行工作。当我实现我的东西时，目前如果我运行客户端 1、客户端 2 和客户端 3，客户端 2 在客户端 1 完成后立即开始发送消息，客户端 3 作为客户端 2 完成：不是我想要的做。

你能帮我修复我的代码并获得我的目标吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:43:29.300

`autoResetEvent`- 控制主连接生命周期。我看不到您通过调用取消订阅事件来释放`Set()`此句柄的位置`OnMessageArrived`

`autoResetEvent2`- 控制传入消息，只有在收到带有预期 GUID 的消息时才设置此事件，基本上只是

```
if (guid == currentGUI.ToString())
{
   autoResetEvent2.Set(); 
} 
```

还要为变量使用更清晰和描述性的名称，以便更容易编写和理解代码

# vba - 将 word 文档中的所有图像缩放到 100% 的脚本

> ID：12259726
> 
> 赞同：2
> 
> 时间：2012-09-04T08:38:48.477
> 
> 标签：vba, ms-word

我得到包含图像的 word 2010 文档。现在由于某种原因，这些图像被缩放到 133%。

现在我正在寻找一种方法来遍历文档中的所有图像并将它们缩放到 100%。我找到了这个脚本，但它不起作用（而且我对单词宏一无所知，所以我不知道为什么）：

```
Sub AllGraphicsTo100() 

  Dim ILS As Word.InlineShape 
  Dim SHP As Word.Shape 

  For Each ILS In ActiveDocument.InlineShapes 
    If ILS.Type = wdInlineShapePicture Then 
        ILS.ScaleHeight = 100 
        ILS.ScaleWidth = 100 
    End If 
  Next ILS 

  For Each SHP In ActiveDocument.Shapes 
    If SHP.Type = msoPicture Then 
        SHP.ScaleHeight 1#, True 
        SHP.ScaleWidth 1, True 
    End If 
  Next SHP 

End Sub 
```

此外，如果图像比列宽，我想缩放它们以适应列的宽度而不是 100%。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T21:57:28.627

您的图像可能是链接的，而不是嵌入的。您可以修改宏以包含链接图像，如下所示：

```
 Sub AllGraphicsTo100()

      Dim ILS As Word.InlineShape
      Dim SHP As Word.Shape

      For Each ILS In ActiveDocument.InlineShapes
        If ILS.Type = wdInlineShapePicture Or ILS.Type = wdInlineShapeLinkedPicture Then
            ILS.ScaleHeight = 100
            ILS.ScaleWidth = 100
        End If
      Next ILS

      For Each SHP In ActiveDocument.Shapes
        If SHP.Type = msoPicture Or SHP.Type = msoLinkedPicture Then
            SHP.ScaleHeight 1#, True
            SHP.ScaleWidth 1, True
        End If
      Next SHP

    End Sub 
```

# android - 在保留的android数据中的视图之间切换（如果有）

> ID：12259727
> 
> 赞同：0
> 
> 时间：2012-09-04T08:38:53.857
> 
> 标签：android

我是 android 开发的新手（也是 java 新手），我注意到当我在视图之间切换时，我注意到在视图类中声明为静态的任何变量都保留了它的值，但其余的都消失了。因此，如果有人愿意回答，我有以下问题-

1.  如果有的话，什么时候对变量使用静态？

2.  如果我想在这些开关之间保留说我的游戏的状态（比如看比分什么的），有什么办法呢？是通过在类中使用静态变量来存储所有内容吗？如果是这样，我如何重置新游戏的变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:58:29.980

*   如果有的话，什么时候对变量使用静态？

当多个活动需要访问静态变量时，应使用静态变量。换句话说，如果您认为您的变量具有全局用法，那么将其设置为`public static`可能会有所帮助。

*   如果我想在这些开关之间保留说我的游戏的状态（比如看比分什么的），有什么办法呢？是通过在类中使用静态变量来存储所有内容吗？如果是这样，我如何重置新游戏的变量？

您需要覆盖 onSaveInstanceState 和 onRestoreInstanceState 来保存和恢复变量的值。可以在此处找到有关如何使用它的教程：[http](http://android-er.blogspot.com/2011/09/onsaveinstancestate-and.html) ://android-er.blogspot.com/2011/09/onsaveinstancestate-and.html 。

# android - 在横向模式下或翻转方向后无法从传感器获取方向

> ID：12259728
> 
> 赞同：0
> 
> 时间：2012-09-04T08:38:56.917
> 
> 标签：android, orientation, accelerometer, sensors

我正在尝试在 Android 中获取相机的方向。我的代码在纵向上运行良好（我通过慢慢转一圈并查看相隔 1 秒的更新来测试它），但在横向上它根本不起作用——数字似乎随机变化。从纵向切换到横向后，它也完全失控。这是我的代码

```
public void onSensorChanged(SensorEvent event) {

    switch (event.sensor.getType()) {
    case Sensor.TYPE_ACCELEROMETER:
        accelerometerValues = event.values.clone();

        break;
    case Sensor.TYPE_MAGNETIC_FIELD:
        geomagneticMatrix = event.values.clone();
        break;
    default:
        break;
    }   

    if (geomagneticMatrix != null && accelerometerValues != null) {

        float[] R = new float[16];
        float[] I = new float[16];
        float[] outR = new float[16];

        //Get the rotation matrix, then remap it from camera surface to world coordinates
        SensorManager.getRotationMatrix(R, I, accelerometerValues, geomagneticMatrix);
        SensorManager.remapCoordinateSystem(R, SensorManager.AXIS_X, SensorManager.AXIS_Z, outR);
        float values[] = new float[4];
        SensorManager.getOrientation(outR,values);
        float direction = normalizeDegrees((float) Math.toDegrees(values[0]));
        float pitch = normalizeDegrees((float) Math.toDegrees(values[1]));
        float roll = normalizeDegrees((float) Math.toDegrees(values[2]));

        if((int)direction != (int)lastDirection){
            lastDirection = direction;
            for(CompassListener listener: listeners){
                listener.onDirectionChanged(lastDirection, pitch, roll);
            }
        }
    }
} 
```

任何想法我做错了什么？我坦率地承认我不是 100% 理解这一点。我也不知道为什么谷歌不推荐使用方向传感器——这似乎是一个足够普遍的愿望。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:46:46.407

您是否考虑过，当您从纵向变为横向时，加速度计轴会发生变化？就像 Y 轴变成 Z 轴等等。这可能是奇怪行为的来源之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T00:25:22.077

我似乎已经解决了它，或者至少将它改进到我知道问题所在的地步。我放入了一个过滤器，这样我就不会提供单个传感器读数，而是记住最后一次读数并对其应用增量。每个新的传感器点最多允许增加 5 度。这完全过滤掉了奇怪的跳跃，并迫使它收敛到一个值。我偶尔会看到奇怪的跳跃，但我认为我需要的是更复杂的过滤器。新代码：

```
public void onSensorChanged(SensorEvent event) {
    if (event.accuracy == SensorManager.SENSOR_STATUS_UNRELIABLE)
        return;

    switch (event.sensor.getType()) {
    case Sensor.TYPE_ACCELEROMETER:
        accelerometerValues = event.values.clone();

        break;
    case Sensor.TYPE_MAGNETIC_FIELD:
        geomagneticMatrix = event.values.clone();
        break;
    }   

    if (geomagneticMatrix != null && accelerometerValues != null) {

        float[] R = new float[16];
        float[] I = new float[16];
        float[] outR = new float[16];

        //Get the rotation matrix, then remap it from camera surface to world coordinates
        SensorManager.getRotationMatrix(R, I, accelerometerValues, geomagneticMatrix);
        SensorManager.remapCoordinateSystem(R, SensorManager.AXIS_X, SensorManager.AXIS_Z, outR);
        float values[] = new float[4];
        SensorManager.getOrientation(outR,values);

        int direction = filterChange(normalizeDegrees(Math.toDegrees(values[0])));
        int pitch = normalizeDegrees(Math.toDegrees(values[1]));
        int roll = normalizeDegrees(Math.toDegrees(values[2]));
        if((int)direction != (int)lastDirection){
            lastDirection = (int)direction;
            lastPitch = (int)pitch;
            lastRoll = (int)roll;
            for(CompassListener listener: listeners){
                listener.onDirectionChanged(lastDirection, pitch, roll);
            }
        }
    }
}

//Normalize a degree from 0 to 360 instead of -180 to 180
private int normalizeDegrees(double rads){
    return (int)((rads+360)%360);
}

//We want to ignore large bumps in individual readings.  So we're going to cap the number of degrees we can change per report
private int filterChange(int newDir){
    int change = newDir - lastDirection;
    int circularChange = newDir-(lastDirection+360);
    int smallestChange;
    if(Math.abs(change) < Math.abs(circularChange)){
        smallestChange = change;
    }
    else{
        smallestChange = circularChange;
    }
    smallestChange = Math.max(Math.min(change,5),-5);
    return lastDirection+smallestChange;
} 
```

# mongodb - Mongoose 分页和过滤器

> ID：12259730
> 
> 赞同：7
> 
> 时间：2012-09-04T08:39:00.637
> 
> 标签：mongodb, pagination, mongoose

我正在尝试使用 Mongoose 的可选过滤器选项进行分页。

我通过对数据库进行 2 个查询来处理分页，一个用于获取文档计数，另一个用于实际获取数据。没有分页，我的过滤器也能正常工作。我想知道有没有一种好方法可以从数据库中返回文档的数量以及数据的页面（将为当前页面显示的子集）？我如何设置查询来做到这一点？

目前我正在打两个单独的电话：

```
Model.find(filter, selectPaths, {limit: limit, skip: skip}, callback);
Model.count(filter, another_callback); 
```

我是否只需拨打两次电话即可获取所需的所有数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T08:44:39.533

我会冒昧地链接到我的其他答案：[ranged pagination](https://stackoverflow.com/a/9704204/125816)和[pagination with mongodb 和 node.js](https://stackoverflow.com/a/10072603/125816)。

简短回答：不要使用跳过/限制，除非您的数据集很小（例如 < 1000 个文档左右）。您获取的页面越大，它的性能就越差。使用范围查询 ( `field: {$gt: value}`)，它们效率更高（当然，如果有索引）。

不，您不能通过一次查询返回总计数和部分数据。

# sql-server - 在文件夹中导入最新的 csv 文件 - SSIS

> ID：12259732
> 
> 赞同：0
> 
> 时间：2012-09-04T08:39:06.247
> 
> 标签：sql-server, sql-server-2005, ssis, etl

我想使用 SSIS 将最新的 csv 文件导入到表中？我目前有一个步骤可以获取文件夹中的最后一个文件：

```
 Report_201209030655.csv
 Report_201209030655.csv
 Report_201209030655.csv 
```

根据创建时间，我想要将最新 csv 的数据导入表的步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:51:30.047

参考这个解决方案：

```
[http://blog.sqlauthority.com/2011/05/12/sql-server-import-csv-file-into-database-table-using-ssis/][1] 
```

然后使用脚本任务填充文件名并将该变量作为源组件的文件名传递。

获取最新文件代码：

```
 public void Main()
        {
            string[] files = System.IO.Directory.GetFiles(@"C:\SSIS\Files");
            DataTable NewList=new DataTable();
            DataColumn col = new DataColumn("FileName");
            NewList.Columns.Add(col);

            System.IO.FileInfo finf;
            foreach (string f in files)
            {
                finf = new System.IO.FileInfo(f);
                if (finf.LastWriteTime > DateTime.Now.AddHours(-24))
                {
                    NewList.Rows.Add(f);
                }
            }
            Dts.Variables["User::FileNameArray"].Value = NewList;

            Dts.TaskResult = (int)ScriptResults.Success;
        } 
```

# char - 如何使用分组系列显示 ms 图表

> ID：12259734
> 
> 赞同：-1
> 
> 时间：2012-09-04T08:39:09.300
> 
> 标签：char, mschart

我想以下列方式显示条形图，我该怎么做。

[http://blogs.msdn.com/blogfiles/alexgor/WindowsLiveWriter/DataBindingMSChartcontrol_10712/image_2.png](http://blogs.msdn.com/blogfiles/alexgor/WindowsLiveWriter/DataBindingMSChartcontrol_10712/image_2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:22:30.143

您需要创建一个包含多个系列的图表。比如图中有6个系列。

您可以在此处下载示例项目：http: [//archive.msdn.microsoft.com/mschart/Release/ProjectReleases.aspx?ReleaseId =4418](http://archive.msdn.microsoft.com/mschart/Release/ProjectReleases.aspx?ReleaseId=4418)

# css - 为什么图像垂直居中，`line-height` 位于它们应该在的位置下方 2 个像素？

> ID：12259736
> 
> 赞同：11
> 
> 时间：2012-09-04T08:39:22.017
> 
> 标签：css, image, center, vertical-alignment, browser-bugs

**短篇故事：**

[jsfiddle在这里](http://jsfiddle.net/dandv/keucK/)。这种行为在 Chrome 21、Firefox 15 和 IE9 中一直是错误的，这让我觉得我对 CSS 规范有些误解。

**更长的故事：**

我想使用行高垂直居中图像。我已将图像容器的高度设置为等于行高，我已重置所有元素的边距、填充和边框，但图像比应有的位置低 2 个像素。无论图像比容器小还是比容器大（在这种情况下，我曾经`max-width: 100; max-height: 100%`缩小它的大小），都会发生这种情况。

在这两种情况下，图像都有偶数个像素。对于比容器小的图像，我不会太在意，但是对于更大的图像，容器背景的 2 像素线将在图像顶部渗出。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Images centered vertically with line-height have center miscalculated by 2 pixels</title>

    <style type="text/css">
        * { margin: 0; padding: 0; border: 0px solid cyan; }  /* reset all margins, paddings and borders */
        html {
            font-size: 16px;
            line-height: normal;
        }
        body {
            line-height: 100%;
            background: gray;
        }
        .img-wrapper-center {
            width: 400px;
            height: 200px;  /* necessary, besides line-height, if images are taller than it */
            line-height: 200px;  /* must be equal to line-height */
            text-align: center;
            background: white;
        }
        .img-wrapper-center img {
            vertical-align: middle;
            /* Comment the two rules below. The first image will still be mis-aligned by two pixels, but the second will not. */
            max-width: 100%; max-height: 100%;  /* force scaling down large images */
        }

    </style>
</head>

<body>

    <div class="img-wrapper-center" id="div1">
        <img src="http://gravatar.com/avatar" id="img1"/>  <!-- 80x80 -->
    </div>

    <div class="img-wrapper-center" id="div2" style="background: green">
        <img src="http://www.w3.org/html/logo/img/class-header-semantics.jpg" id="img2" />  <!-- 495x370 -->
    </div>

    <p>
    Note how the second image is misaligned down by two pixels.
    The first one is mis-aligned the same way. Sizes and coordinates are below.
    </p>

    <script>
        document.writeln('div1 top: ' + document.getElementById('div1').offsetTop + '<br/>');
        document.writeln('image 1 height: ' + document.getElementById('img1').offsetHeight + '<br/>');
        document.writeln('div1 height: ' + (document.getElementById('div1').offsetHeight) + '<br/>');
        document.writeln('image 1 top should be at: ' + (document.getElementById('div1').offsetHeight - document.getElementById('img1').height) / 2 + '<br/>');
        document.writeln('image 1 top actually is at: ' + document.getElementById('img1').offsetTop + '<br/>');
        document.writeln('div2 top: ' + document.getElementById('div2').offsetTop + '<br/>');
        document.writeln('img2 top: ' + document.getElementById('img2').offsetTop + '<br/>');
    </script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T08:53:49.427

您必须`font-size`为容器`div`元素设置零。因为图像显示为内联元素，所以它们受容器中的文本影响`div`。零`font-size`解决了这个问题：

```
.img-wrapper-center
{
    font-size:0;
} 
```

这是小提琴：http: [//jsfiddle.net/bZBsR/](http://jsfiddle.net/bZBsR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-10T10:10:19.463

如果您在此 div 中也有文本，则可以使用此属性：

```
.img-wrapper-center {
    display: flex;
    justify-content: center;
} 
```

这是小提琴：[https ://jsfiddle.net/rjurado/yvanL4k1/2/](https://jsfiddle.net/rjurado/yvanL4k1/2/)

# vb.net - WinForms 对象数据绑定性能问题

> ID：12259738
> 
> 赞同：1
> 
> 时间：2012-09-04T08:39:27.250
> 
> 标签：vb.net, performance, data-binding

我创建了一个简单的 VB .NET 应用程序。1 个带有 2 个文本框的表单，绑定到具有 2 个属性的类，Property1 和 Property2。如果我在 TextBox1 中输入文本，绑定过程会导致读取第二个属性 Property2。为什么？我不希望如果我更改一个属性，所有有界控件都会更新它们的数据。

代码：

```
' Class1.vb

Imports System.ComponentModel

Public Class Class1
  Private property1Value As String
  Public Property Property1() As String
    Get
      Return property1Value
    End Get
    Set(ByVal value As String)
      property1Value = value
    End Set
  End Property

  Private property2Value As String
  Public Property Property2() As String
    Get
      Return property2Value
    End Get
    Set(ByVal value As String)
      property2Value = value
    End Set
  End Property

End Class 

' Form1.Designer.vb

<Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
Partial Class Form1
  Inherits System.Windows.Forms.Form

  'Form esegue l'override del metodo Dispose per pulire l'elenco dei componenti.
  <System.Diagnostics.DebuggerNonUserCode()> _
  Protected Overrides Sub Dispose(ByVal disposing As Boolean)
    Try
      If disposing AndAlso components IsNot Nothing Then
        components.Dispose()
      End If
    Finally
      MyBase.Dispose(disposing)
    End Try
  End Sub

  'Richiesto da Progettazione Windows Form
  Private components As System.ComponentModel.IContainer

  'NOTA: la procedura che segue è richiesta da Progettazione Windows Form
  'Può essere modificata in Progettazione Windows Form.  
  'Non modificarla nell'editor del codice.
  <System.Diagnostics.DebuggerStepThrough()> _
  Private Sub InitializeComponent()
    Me.components = New System.ComponentModel.Container()
    Me.TextBox1 = New System.Windows.Forms.TextBox()
    Me.TextBox2 = New System.Windows.Forms.TextBox()
    Me.Class1BindingSource = New System.Windows.Forms.BindingSource(Me.components)
    CType(Me.Class1BindingSource, System.ComponentModel.ISupportInitialize).BeginInit()
    Me.SuspendLayout()
    '
    'TextBox1
    '
    Me.TextBox1.DataBindings.Add(New System.Windows.Forms.Binding("Text", Me.Class1BindingSource, "Property1", True, System.Windows.Forms.DataSourceUpdateMode.OnPropertyChanged))
    Me.TextBox1.Location = New System.Drawing.Point(12, 12)
    Me.TextBox1.Name = "TextBox1"
    Me.TextBox1.Size = New System.Drawing.Size(100, 22)
    Me.TextBox1.TabIndex = 2
    '
    'TextBox2
    '
    Me.TextBox2.DataBindings.Add(New System.Windows.Forms.Binding("Text", Me.Class1BindingSource, "Property2", True, System.Windows.Forms.DataSourceUpdateMode.OnPropertyChanged))
    Me.TextBox2.Location = New System.Drawing.Point(12, 40)
    Me.TextBox2.Name = "TextBox2"
    Me.TextBox2.Size = New System.Drawing.Size(100, 22)
    Me.TextBox2.TabIndex = 3
    '
    'Class1BindingSource
    '
    Me.Class1BindingSource.DataSource = GetType(WindowsApplication1.Class1)
    '
    'Form1
    '
    Me.AutoScaleDimensions = New System.Drawing.SizeF(8.0!, 16.0!)
    Me.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font
    Me.ClientSize = New System.Drawing.Size(282, 255)
    Me.Controls.Add(Me.TextBox2)
    Me.Controls.Add(Me.TextBox1)
    Me.Name = "Form1"
    Me.Text = "Form1"
    CType(Me.Class1BindingSource, System.ComponentModel.ISupportInitialize).EndInit()
    Me.ResumeLayout(False)
    Me.PerformLayout()

  End Sub
  Friend WithEvents Class1BindingSource As System.Windows.Forms.BindingSource
  Friend WithEvents TextBox1 As System.Windows.Forms.TextBox
  Friend WithEvents TextBox2 As System.Windows.Forms.TextBox

End Class

' Form1.vb

Imports System.ComponentModel

Public Class Form1

  Private Class1 As New Class1

  Private Sub Form1_Load(sender As Object, e As System.EventArgs) Handles Me.Load

    Class1.Property1 = "Prop1"
    Class1.Property2 = "Prop2"
    Class1BindingSource.DataSource = Class1
  End Sub
End Class 
```

# java - JavaFx 2.x TableView 绑定列

> ID：12259748
> 
> 赞同：0
> 
> 时间：2012-09-04T08:39:44.523
> 
> 标签：java, data-binding, tableview, javafx, javafx-2

您好，我正在尝试使用 ObservableList 填充我的 JavaFx TableView，如下所示：

```
 emf = Persistence.createEntityManagerFactory("shopPu");
            em = emf.createEntityManager();
            List<Products> proList = em.createQuery("select p from Products p").getResultList();
            ObservableList<Products> proObs = FXCollections.observableList(proList);
            tableView.setEditable(true);
            tableView.setItems(proObs); 
```

它的工作没有错误我的列表正在填充数据，但 TableView 没有显示任何内容。

这是我的 FXML

```
<TableView fx:id="tProducts" prefHeight="246.0" prefWidth="726.0" AnchorPane.bottomAnchor="160.0" AnchorPane.leftAnchor="7.0" AnchorPane.rightAnchor="7.0" AnchorPane.topAnchor="70.0">
      <columns>
        <TableColumn text="ID" fx:id="ID"/>
      </columns>
    </TableView> 
```

我试过这个：

```
<TableView fx:id="tProducts" prefHeight="246.0" prefWidth="726.0" AnchorPane.bottomAnchor="160.0" AnchorPane.leftAnchor="7.0" AnchorPane.rightAnchor="7.0" AnchorPane.topAnchor="70.0">
      <columns>
        <TableColumn text="ID" fx:id="ID">
            <cellValueFactory>
                <PropertyValueFactory property="id" />
            </cellValueFactory>
        </TableColumn>
      </columns>
    </TableView> 
```

但没有运气，它给出了这样的错误：

```
javafx.fxml.LoadException: PropertyValueFactory is not a valid type.
    at javafx.fxml.FXMLLoader.createElement(Unknown Source)
    at javafx.fxml.FXMLLoader.processStartElement(Unknown Source) 
```

请帮助如何填充 TableView

**更新**

控制器：

```
public class MainWindow implements Initializable {

    @FXML private Label lblStatus;
    @FXML private TableView<Products> tableView;
    private EntityManager em;
    private EntityManagerFactory emf;

    @FXML
    private void Refresh_Clicked(javafx.event.ActionEvent event) {
        try {
            emf = Persistence.createEntityManagerFactory("shopPu");
            em = emf.createEntityManager();
            List<Products> proList = em.createQuery("select p from Products p").getResultList();

            ObservableList<Products> proObs = FXCollections.observableList(proList);

            tableView.setEditable(true);
            tableView.setItems(proObs);
        } catch (Exception e) {

                JOptionPane.showMessageDialog(null, e.getMessage());

        }

    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:47:59.743

根据你的，`FXML`你`TableView`应该命名为`tProducts`。但这应该在注入过程中产生错误，你能粘贴控制器代码吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:47:29.310

如果不进一步分析您的代码示例，发布的错误可能是由于 PropertyValueFactory 的 fxml 中缺少导入引起的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-16T18:53:13.733

我在我的项目中解决了一个语义问题，在 FXML 文件中添加了这一行。

```
<?import javafx.scene.control.cell.PropertyValueFactory ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-12T12:31:17.340

您必须在代码中为您的 TableView 和 fxid: 设置相同的名称。

```
<TableView fx:id="table" layoutX="27.0" layoutY="65.0" prefHeight="193.0" prefWidth="552.0">

TableView table; 
```

你必须初始化表格列......并定义它们的属性。

尝试这个..

```
 @FXML
private TableColumn<CheckDo, String> username;
username.setCellValueFactory(new PropertyValueFactory<CheckDo,String>("username")); 
```

您必须设置列的 setvaluefactory 以显示它的值

# java - 如何获取发送数据包的主机名

> ID：12259753
> 
> 赞同：1
> 
> 时间：2012-09-04T08:40:05.573
> 
> 标签：java, multicast, hostname, multicastsocket

我编写了一个 java 程序，它打开一个多播套接字并使用相同的多播 IP 从任何发送者那里获取一个数据包。

我想知道正在发送的主机和 IP 的名称。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T00:34:34.510

源地址在数据包中。在 C 中，它可以通过 recv() 的结果参数获得；在 Java 中通过 DatagramPacket 的方法；等等

# java - 表达式使用 getter 方法访问数字中的属性

> ID：12259754
> 
> 赞同：1
> 
> 时间：2012-09-04T08:40:06.573
> 
> 标签：java, jstl, expression, el

我的一个集成客户提供了一个带有属性名称“_1”、“_2”......等的XML。例如

```
<element _1="attr1" _2="attr2"> 
```

使用 JAXB 生成类，属性的 getter 方法将是 get1() 和 get2()

但是在我的 JSP 页面中，使用 JSTL 和 EL，确保我无法通过

```
${variable.1} 
```

如何正确使用 EL 访问值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:43:20.823

You could use an external binding file to rename the property generate by JAXB:

**schema.xsd**

Below is a sample XML schema based on your post:

```
<?xml version="1.0" encoding="UTF-8"?>
<schema 
    xmlns="http://www.w3.org/2001/XMLSchema" 
    targetNamespace="http://www.example.org"
    xmlns:tns="http://www.example.org" 
    elementFormDefault="qualified">
    <element name="element1">
        <complexType>
            <attribute name="_1" type="string" />
            <attribute name="_2" type="string" />
        </complexType>
    </element>
</schema> 
```

**binding.xml**

An external binding file is used to customize how Java classes are generated from the XML schema. Below we'll use an external binding file to rename the generated properties.

```
<jaxb:bindings
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
    version="2.1">
    <jaxb:bindings schemaLocation="schema.xsd">
        <jaxb:bindings node="//xsd:attribute[@name='_1']">
            <jaxb:property name="one"/>
        </jaxb:bindings>
        <jaxb:bindings node="//xsd:attribute[@name='_2']">
            <jaxb:property name="two"/>
        </jaxb:bindings>
    </jaxb:bindings>
</jaxb:bindings> 
```

**XJC Call**

Below is an example of how you reference the binding file when using the XJC tool.

```
xjc -b binding.xml schema.xsd 
```

**Element1**

Below is what the generated class will look like:

```
package forum12259754;

import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "")
@XmlRootElement(name = "element1")
public class Element1 {

    @XmlAttribute(name = "_1")
    protected String one;
    @XmlAttribute(name = "_2")
    protected String two;

    public String getOne() {
        return one;
    }

    public void setOne(String value) {
        this.one = value;
    }

    public String getTwo() {
        return two;
    }

    public void setTwo(String value) {
        this.two = value;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:30:38.617

使用这个符号：

```
${variable.["1"]} 
```

# java - 单子和装饰器模式

> ID：12259758
> 
> 赞同：9
> 
> 时间：2012-09-04T08:40:25.947
> 
> 标签：java, clojure, monads

我是函数式编程的新手。在学习有关 Monads 的教程时，我不得不将其视为 OOP 中装饰器模式的类比。我是正确的还是有任何与 Monads 非常相似的设计模式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T13:17:08.127

Monads 绝对不是装饰器。没有一个常用的标准 OOP 模式可以直接类比 monad。尽管您可以在 OOP 中很好地实现 monad，但请参见：

*   [http://logicaltypes.blogspot.sg/2011/09/monads-in-java.html](http://logicaltypes.blogspot.sg/2011/09/monads-in-java.html)

我所知道的最好的基于 Clojure 的 monad 教程是 Brian Marick 的这个视频系列：

*   [https://vimeo.com/20717301](https://vimeo.com/20717301)

我建议仔细看一下——这是一个很好的介绍，有很多例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T13:28:45.737

由于 Haskell 中已知的语法糖，您可以开始将 monad 视为“可覆盖的分号”

一般来说，这确实意味着您可以使用相同的控制结构（代码块）来执行不同的操作，具体取决于当前使用的 monad

Haskell 中的快速示例

```
import Data.Maybe
import Data.List

funcMaybe x = do
  z <- x
  return $ z * z

funcList x = do
  z <- x
  return $ z * z

runMaybe = funcMaybe ( Just 5 )

runList = funcList [ 5, 6 ] 
```

在GHCI中执行，会提示

```
ghci> runMaybe 
Just 25
ghci> runList 
[25, 36] 
```

如您所见，相同的代码块会产生不同的结果 - 一种情况是 List ，另一种情况是 Maybe ，包装成适当的数据结构

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-04T09:31:47.760

Monad 就像一个`function composition on steroids`在 OO 世界中没有类似的强大概念。

# c# - 从 C# 中的程序集类型实例化

> ID：12259760
> 
> 赞同：3
> 
> 时间：2012-09-04T08:40:40.957
> 
> 标签：c#, reflection, types

有可能做这样的事情吗？

1.  创建一个类并将其放入程序集中，例如

    ```
    namespace some
    {
        public class foo{
            ..etc
    } 
    ```

2.  加载到当前appdomain

    ```
    Assembly.LoadFrom("some.foo.dll"); 
    ```

3.  取出类型

    ```
    Type t = Type.GetType("some.foo"); 
    ```

基本上无论如何都可以将实际类型转换为 t 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:43:58.503

我不确定我是否理解这个问题。我想你想实例化类型。

这将调用公共默认构造函数：

```
// specify the full name and assembly name, to make sure that you get the some.foo
// from the assembly in question.
Type t = Type.GetType("some.foo, some.foo");
object instance = Activator.CreateInstance(t); 
```

查看重载以调用其他构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:45:58.893

您可以使用反射来实例化对象。例如，使用默认构造函数进行实例化：

```
Type.GetType("Foo").GetConstructor().Invoke(); 
```

要使用带有字符串的构造函数进行实例化，请使用：

```
Type.GetType("Foo").GetConstructor(new[] { typeof(string) }).Invoke(new [] { "bar" }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-27T02:56:54.813

```
var assembly = Assembly.LoadFrom("SomeAssembly.dll");
assembly.GetType("SomeType"); 
```

# java - 将xml文件转换成csv格式唱骆驼？

> ID：12259770
> 
> 赞同：-2
> 
> 时间：2012-09-04T08:41:13.980
> 
> 标签：java, apache-camel

我想使用骆驼将 .xml 文件创建到 csv 文件中。这是我的代码

```
 CamelContext context = new DefaultCamelContext();
from("file://Input?fileName=test.xml").marshal().csv().to("file://test?fileName=test.csv");
 context.start(); 
```

但它没有在所需的文件夹“test”中创建任何文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T15:23:57.037

请多花一点时间在 Camel 文档上，尝试示例，并阅读常见问题解答。还有介绍文章之类的。

上面的代码甚至无效，因为您需要将它放在 RouteBuilder 中。

此外，当您启动 CamelContext 时，请阅读 start 方法的 javadoc。并阅读此常见问题解答 [http://camel.apache.org/running-camel-standalone-and-have-it-keep-running.html](http://camel.apache.org/running-camel-standalone-and-have-it-keep-running.html)

Camel 还提供了一个跟踪器，因此您可以在处理消息时看到消息流。跟踪器将默认以 INFO 级别将此记录到记录器。 [http://camel.apache.org/tracer](http://camel.apache.org/tracer)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-24T20:14:49.637

这是使用骆驼的示例

```
<camelContext xmlns="http://camel.apache.org/schema/spring">
    <route>
      <from uri="file:src/xmldata?noop=true"/>
      <to   uri="xslt:file:src/main/fruits.xslt"/> 
      <to   uri="file://TESTOUT?fileName=output.csv"/>
    </route>
  </camelContext> 
```

**src/xmldata 文件夹中的示例 xml 文件**

```
<AllFruits xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<!-- All fruits below. -->
<Fruit>
  <FruitId>Bannana</FruitId>
  <FruitColor>Yellow</FruitColor>
  <FruitShape>Moon</FruitShape>
  <Customer>
     <Name>Joe</Name>
     <NumberEaten>5</NumberEaten>
     <Weight>2.6</Weight>
  </Customer>
  <Customer>
     <Name>Mark</Name>
     <NumberEaten>8</NumberEaten>
     <Weight>5.0</Weight>
  </Customer>
</Fruit>
</AllFruits> 
```

**src/main/fruits.xslt**

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:output method="text" encoding="ISO-8859-1" />
    <xsl:variable name="newline" select="'&#xA;'"/>
    <xsl:template match="Fruit">
        <xsl:for-each select="Customer">
            <xsl:value-of select="preceding-sibling::FruitId" />
            <xsl:text>,</xsl:text>
            <xsl:value-of select="NumberEaten" />
            <xsl:text>,</xsl:text>
            <xsl:value-of select="Weight" />
            <xsl:value-of select="$newline" />
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

# c++ - std::vector::resize() 与 gcc 4.7.0 的奇怪行为

> ID：12259771
> 
> 赞同：2
> 
> 时间：2012-09-04T08:41:25.460
> 
> 标签：c++, constructor, c++11, allocation, stdvector

我仍然对`std::vector::resize()`. 考虑以下代码（另请参阅[std::vector<type> 的类型要求](https://stackoverflow.com/questions/12251368/type-requirements-for-stdvectortype)）

```
struct A {
  A() : X(0) { std::cerr<<" A::A(); this="<<this<<'\n'; }
  A(A const&) { assert(0); }  // is required but doesn't fire in vector::resize
  int X;
};

int main()
{
  std::vector<A> a;
  a.resize(4);        // would not compile without A::A(A const&) or A::A(A&&)
} 
```

如果没有`A::A(A const&)`or `A::A(A&&)`，则 with 行`a.resize(4);`无法编译。但是，该构造函数永远不会被调用：`assert(0)`不会触发！有人可以向我解释一下吗？

我的解释是，`allocator_traits<>`(used by `std::vector::resize()`) 的模板魔法要求这些构造函数中的任何一个的存在，但实际上从未调用过。但是，如果您不调用方法，为什么还需要该方法的存在呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T08:50:10.680

该标准的最新版本（[n3376](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf)）说：

> 12 - 如果`size() < sz`，将默认插入的元素附加`sz - size()`到序列中。
> 13 - 要求：`T`应`MoveInsertable`和`DefaultInsertable`进入`*this`。

The implication is that `MoveInsertable` is required for any reallocation that might occur, while `DefaultInsertable` is required for the actual appending. So your copy or move constructor will fire only if your vector already contains elements and needs to be reallocated.

Indeed, if we write:

```
std::vector<A> a;
a.resize(1);
assert(!a.empty() && a.capacity() < 4);
a.resize(4); 
```

then the copy- or move-constructor of `A` is called, and your assert is triggered.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T08:48:40.020

为了`resize`向量，如果向量没有足够的空间来容纳新大小所需的元素，则必须将现有元素放入新分配的内存块中。这是通过复制构造它们来完成的。所以你必须有一个复制构造函数来调整向量的大小。在这种情况下，没有现有元素，因此不会调用复制构造函数。但它仍然必须存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:50:34.300

In your example, when you call vector::resize() method, the constructor is called instead of the copy constructor. That is why you do not see assert being triggered.

As for why you need the copy-constructor (and move constructor, which you haven't defined and declared), is that the template types have to be Copy-constructable and move-constructable. [container.requirements.general]/15 defines the requirements for container's type :

```
— T is DefaultInsertable into X means that the following expression is well-formed: allocator_traits<A>::construct(m, p);
— An element of X is default-inserted if it is initialized by evaluation of the expression allocator_traits<A>::construct(m, p);
where p is the address of the uninitialized storage for the element allocated within X.
— T is CopyInsertable into X means that the following expression is well-formed: allocator_traits<A>::construct(m, p, v);
— T is MoveInsertable into X means that the following expression is well-formed: allocator_traits<A>::construct(m, p, rv);
— T is EmplaceConstructible into X from args , for zero or more arguments args, means that the following expression is well-formed: allocator_traits<A>::construct(m, p, args);
— T is Erasable from X means that the following expression is well-formed: allocator_traits<A>::destroy(m, p); 
```

# javascript - 如何应用javascript ?

> ID：12259773
> 
> 赞同：6
> 
> 时间：2012-09-04T08:41:32.187
> 
> 标签：javascript, asp.net

我想`asp:buttonfield`在单击按钮时应用javascript，然后显示消息。像删除按钮确认消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:47:24.850

asp:ButtonField> 标签没有 OnClientClick。

替换为模板按钮

```
 <script type="text/javascript">
   function function()
   {
       return confirm("Are you sure you want to delete this?");
   }
</script>

...

<asp:TemplateField>
  <ItemTemplate>
     <asp:ImageButton ID="button" runat="server"
        OnClientClick="return function();" />
  </ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:43:50.797

在您的页面加载中，您可以添加

```
button.Attributes.Add("onclick", "confirm('are you sure? blah!')"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T11:54:24.103

在使用 jQuery 时，我发现了一种相当简单的方法，这意味着我仍然可以使用 asp:boundbutton

将“btn-remove”的 CssClass 应用于绑定按钮（在本例中），然后添加以下 jQuery 脚本

```
 $(function () {
        $('.btn-remove a').attr('onclick', 'return confirm(\'Are you sure you want to delete this?\')');
    }); 
```

# caching - Sencha Touch 2：无法禁用 disableCache 机制 - 应用无法离线运行

> ID：12259774
> 
> 赞同：3
> 
> 时间：2012-09-04T08:41:34.043
> 
> 标签：caching, extjs, sencha-touch-2, offline, disable-caching

在我的 SenchaTouch 2 应用程序中，app.js 的第一行内容如下：

```
Ext.Loader.setConfig( {enabled: true, disableCaching: false} );
Ext.data.Connection.disableCaching = false;
Ext.data.JsonP.disableCaching = false;
Ext.data.proxy.Server.prototype.noCache = false;
Ext.Ajax.disableCaching = false; 
```

该应用程序编译为生产版本，没有错误或警告。它从服务器加载并运行。当我尝试在 Chrome 中离线运行它时，会出现这些 404 错误

```
GET http://myServer/m/Override/...=1346682646496 /m/Override/slider/Slider.js?_dc=1346682646496:1
GET http://myServer/m/app.json?1346682646693 /m/:6 
```

这表明 disableCache 参数的时间戳附加到 GET 请求中。因此，应用程序不会离线加载。它挂在“正在加载应用程序...”屏幕上。如何启用缓存并避免使用此 _dc 参数？

SDK版本为2.0.1.1

-- 更新：找到解决方法。在 app.js 中集成 Slider.js

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T08:45:14.447

这是一个已知错误，或者该功能未正确实现。它在 sencha 2.1 中也对我不起作用。

# windows - wmic命令如何使用负数进行搜索

> ID：12259780
> 
> 赞同：0
> 
> 时间：2012-09-04T08:41:48.620
> 
> 标签：windows, command, wmic

在 wmic 中，'-' 是特殊字符。如何使用负数进行搜索？就像

```
wmic volume where serialnumber=-1874012763 
```

因为 '-' 是特殊字符，所以这个命令不起作用。

如何为 wmic 中的搜索分配负数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T01:20:40.720

Win32_Volume 类中的 SerialNumber 值是一个无符号整数 (uint32)，无法使用 WMIC 查询无符号整数值，因为您无法转换该值，您只能列出所有值：

```
wmic /namespace:\\root\cimv2 path Win32_Volume get SerialNumber /value 
```

据我所知，您可以通过编写脚本来克服查询无符号整数值的问题。例如，使用 VBS 查询无符号整数值“-1435665788”（我的系统 C 驱动器）：

```
Option Explicit
Const SN_VAL=-1435665788
Dim oWMI, oQRY, oItm, sComp, sMsg
sComp = "."
Set oWMI = GetObject("winmgmts:{impersonationLevel=impersonate,authenticationLevel=pktPrivacy}!\\" & sComp & "\root\cimv2")
Set oQRY = oWMI.ExecQuery("select * from Win32_Volume") 
For Each oItm In oQRY 
  If oItm.SerialNumber = SN_VAL Then 
    MsgBox "  DriveLetter: " & oItm.DriveLetter & vbCrLf & _
           " SerialNumber: " & oItm.SerialNumber, vbOkOnly, "WMI Results"
  End If
Next 
Set oQRY = Nothing
Set oWMI = Nothing
WScript.Quit(0) 
```

以上提示给定无符号整数值的驱动器号和序列号。希望这可以帮助 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:58:58.993

不确定该示例是否正确，因为根据文档，此属性是 uint32。

无论如何，为了逃避这种行为，我会尝试使用：

```
wmic volume where (serialnumber=-1874012763) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:37:00.510

双引号的值；

```
wmic volume where serialnumber="-1874012763" get ... 
```

# php - php open 修改并保存html文件

> ID：12259785
> 
> 赞同：1
> 
> 时间：2012-09-04T08:42:14.107
> 
> 标签：php, html, dom, removeclass

在 php 中，我想打开一个 html 文件，删除 div(class Areas) 的内容并保存。

```
$dom = new DOMDocument;
$dom->loadHTMLFile( "temp/page".$y.".xhtml" );
$xpath = new DOMXPath( $dom );
$pDivs = $xpath->query(".//div[@class='Areas']");
foreach ( $pDivs as $div ) {
  $div->parentNode->removeChild( $div );
}
echo htmlspecialchars($dom->saveHTMLFile()); 
```

它不起作用...

我的 html 文件看起来：

```
<html>
 <head>
  <title></title>
  <link href="css.css" rel="stylesheet" type="text/css" />
 </head>
 <body>
   <div style="height:998px;">
    <img src="images/bg004.jpg" />
     <div class="class1">
         <div class="class2"></div>
         <div class="class2"></div>
    </div>
    <div class="Areas">
         <div class="Area"><a href="index.html"></a></div>
         <div class="Area"><a href="index.html"></a></div>
         <div class="Area"><a href="index.html"></a></div>
    </div>
   </div>
  </body>
</html> 
```

我想要这个结果：

```
<html>
 <head>
  <title></title>
  <link href="css.css" rel="stylesheet" type="text/css" />
 </head>
 <body>
   <div style="height:998px;">
    <img src="images/bg004.jpg" />
     <div class="class1">
         <div class="class2"></div>
         <div class="class2"></div>
    </div>
    <div class="Areas">

    </div>
   </div>
  </body>
</html> 
```

感谢您的帮助

**更新**

如何做同样的事情，但我的文件现在是 xml ？

我对此进行测试：

```
 copy("temp/page".$y.".xhtml", "/temp/page".$y.".xml");
$dom = new DOMDocument;
$dom->load( "temp/page".$y.".xml" );
$xpath = new DOMXPath( $dom );
$pDivs = $xpath->query(".//div[@class='Area']");
foreach ( $pDivs as $div ) {
    $div->parentNode->removeChild( $div );
}
$dom->savexml(); 
```

我现在有

```
<?xml version="1.0" encoding="utf-8"?>
<html>
 <head>
  <title></title>
  <link href="css.css" rel="stylesheet" type="text/css" />
 </head>
 <body>
   <div style="height:998px;">
    <img src="images/bg004.jpg" />
     <div class="class1">
         <div class="class2"></div>
         <div class="class2"></div>
    </div>
    <div class="Areas">
         <div class="Area"><a href="index.html"></a></div>
         <div class="Area"><a href="index.html"></a></div>
         <div class="Area"><a href="index.html"></a></div>
    </div>
   </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T08:58:35.830

你就快到了。您只需要更改`Areas`为`Area`然后使用`saveHtmlFile`而不是`saveHTML`：

```
$dom = new DOMDocument;
$dom->loadHTMLFile( "temp/page".$y.".xhtml" );
$xpath = new DOMXPath( $dom );
$pDivs = $xpath->query(".//div[@class='Area']");
foreach ( $pDivs as $div ) {
  $div->parentNode->removeChild( $div );
}
$dom->saveHTMLFile("temp/page".$y.".xhtml"); 
```

这是假设您要将 HTML 保存回原始文档。请注意 DOMXPath 会在您的文档顶部添加一个文档类型，我认为这可以吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T08:45:11.340

[`saveHTML`](http://www.php.net/manual/en/domdocument.savehtml.php)只是将 html 输出为字符串，用于[`saveHTMLFile`](http://www.php.net/manual/en/domdocument.savehtmlfile.php)将其保存为文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T08:45:59.290

您想使用 class 删除 div `Area`，因此只需更改 XPath 查询：

```
$pDivs = $xpath->query(".//div[@class='Area']"); // not 'Areas' 
```

当然，您还需要对结果做一些事情，例如：

```
echo htmlspecialchars($dom->saveHTML()); // prints the result 
```

# iphone - 应用程序在启用 Retina 的设备中崩溃并显示内存不足警告但在非视网膜设备中完美运行

> ID：12259788
> 
> 赞同：0
> 
> 时间：2012-09-04T08:42:24.280
> 
> 标签：iphone, xcode, cocos2d-iphone

我正在开发一个启用视网膜的 cocos2d 游戏。我在我的项目中为视网膜和非视网膜添加了很多图像。游戏在模拟器 [Retina 和非 Retina] 中运行良好，并且在非 Retina 设备中也能完美运行。但是，当我在启用视网膜的设备中运行相同的设备时，意味着它会崩溃而没有显示任何消息。当我使用仪器应用程序测试我的游戏时，意味着它会显示像这样的低内存警告消息 [http://screencast.com/t/sfRDTELrhomC]。当应用程序崩溃在启用视网膜的设备中运行时，它不会在控制台中显示任何错误消息。我对目前的状态感到非常困惑，谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:02:45.707

您可能正在使用大量内存来加载图像，因此设备内存不足并终止了您的应用程序。

我猜你正在使用 PNG（因为你没有提供任何信息）；当您从 PNG、JPG 等加载图像时，图像会两次加载到内存中，因为它必须由 cocos “翻译”成纹理。此外，此操作的纹理大小必须是 2 的幂，因此 150x150 的图像将占用 256x256 图像的内存。这是很多浪费的内存。

我的第一个建议是购买 Texture Packer（我与他们没有任何关系，它只是一个很棒的软件），它将您的图像制作成一个压缩的 PVR 精灵表，其中包含多个图像在一个纹理中。

PVR 文件直接加载到纹理中，因此它们不使用双倍内存，并且由于它们是精灵表，因此浪费的像素更少。

我的第二个建议是，在加载图像时，不要在运行循环的同一滴答声中完成所有操作；Cocos 使用了很多 autoreleases，并且直到 tick 结束时内存才会被清除，所以不要在同一个方法中一次将所有图像加载到内存中，而是安排该方法多次调用并每次加载一个新文件.

# c# - 在 C# 中过滤 SQL 后值为零

> ID：12259790
> 
> 赞同：2
> 
> 时间：2012-09-04T08:42:38.013
> 
> 标签：c#, sql

我是 C# 的新手..

我有写功能来过滤**部门。**这个函数将返回**idDepartment**。

**新问题是**，部门保持价值“ **System.Windows.Forms.Label，Text：ADMIN** ”，这就是我得到零的原因。那么我怎样才能只接受“ADMIN”并留在部门？

更新 ：

```
 public partial class frmEditStaff : Form
{

    private string connString;
    private string userId, department;  //Department parameter coming from here
    private string conString = "Datasource";

    public frmEditStaff(string strUserID, string strPosition)
    {
        InitializeComponent();

        //Pass value from frmListStaff to userID text box

        tbStaffId.Text = strUserID.ToString();
        userId = strUserID.ToString();
        department = strPosition.ToString();

    } 
```

下面的代码正在运行，没有任何问题。

```
public int lookUpDepart()
        {
            int idDepart=0;

            using (SqlConnection openCon = new SqlConnection(conString))
            {
                string lookUpDepartmenId = "SELECT idDepartment FROM tbl_department WHERE department = '" + department + "';";
                openCon.Open();
                using (SqlCommand querylookUpDepartmenId = new SqlCommand(lookUpDepartmenId, openCon))
                {
                    SqlDataReader read = querylookUpDepartmenId.ExecuteReader();

                    while (read.Read())
                    {
                        idDepart = int.Parse(read[0].ToString());
                        break;
                    }
                }
                openCon.Close();
                return idDepart;
            }

        } 
```

感谢帮助。快乐美好的一天！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:54:16.107

关于您的问题：部门保持价值“System.Windows.Forms.Label，Text：ADMIN”

**您在本次通话中遇到问题** `frmEditStaff(strUserID,yourLabel.ToString());`

尽管您尚未共享对此函数/构造函数的调用，但似乎您的第二个参数在此调用中出错了。不要`ToString()`在这里使用。相反，您必须使用`.Text`as

`frmEditStaff(strUserID,yourLabel.Text);`

这将解决你的问题。我知道是因为通常程序员有犯这个错误的经验:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:56:08.247

```
public int lookUpDepart()
{
    int idDepart = 0;
    using (SqlConnection con = new SqlConnection(conString))
    {
        string lookUpDepartmenId = "SELECT idDepartment FROM tbl_department WHERE department = " + department;
        con.Open();
        using (SqlCommand querylookUpDepartmenId = new SqlCommand(lookUpDepartmenId, openCon))
        {
            SqlDataReader read = querylookUpDepartmenId.ExecuteReader();
            while (read.Read())
            {
                idDepart = Convert.ToInt32((read[0]).ToString());
                break;
            }
        }

        con.Close();

        return idDepart;
    }
} 
```

试试上面的代码，我重写了。它对我有用...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:00:27.283

从单行中选择单个值时，您可以使用[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)方法，该方法为您完成所有操作，如下所示：

```
using (SqlCommand querylookUpDepartmenId = new SqlCommand(lookUpDepartmenId, openCon))
{
   idDepart = int.Parse(querylookUpDepartmenId.ExecuteScalar());
} 
```

再一次，在 SQL 查询中使用字符串连接是[完全错误的](http://en.wikipedia.org/wiki/SQL_injection)

* * *

对于您更新的问题：尝试使用标签的[Text](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.text.aspx)属性，而不是 .ToString() 方法。

我会推荐一[本关于 C# / .net 的优秀教程书](https://stackoverflow.com/questions/477748/what-are-the-best-c-sharp-net-books)，并按照那里的示例进行操作。

# networking - 通过特定接口的 ssh 客户端

> ID：12259796
> 
> 赞同：6
> 
> 时间：2012-09-04T08:42:52.020
> 
> 标签：networking, ssh

如何强制客户端连接 ssh 通过特定接口进行通信？

我有一个带有 eth0 和 eth1 的服务器，即，我想强制所有 ssh 客户端通过 eth0。因此，当我的服务器上有很多 ssh 客户端时，我可以更快地通过 eth1 访问我的服务器。

编辑：它是启动 ssh 客户端连接的服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-19T09:00:14.407

更新 OPs 编辑要求服务器端解决方案 - 这是客户端。对于临时使用，您可以从特定 IP 或以太网端口将选项绑定到 SSH。ssh target_IP -b source_IP

要获得更永久的解决方案，请更改路由表。

我试图从 172.xx7 (eth0) SSH 到 172.xx69，它有另一个恰好是默认网关的以太网端口 172.xx8 (eth1)。

如果我尝试直接 ssh 会失败 - 因为此源 IP 默认为 xxx8 eth1，并且在外部防火墙规则中不允许使用 0.69

```
# ssh 172.29.179.69 -l root
ssh: connect to host 172.x.x.69 port 22: Connection timed out
# 
```

当我使用 -b 开关将 SSH 绑定到 xxx7 IP (eth0) 时成功 - 在防火墙规则中允许此 IP 连接到 .69。

```
# ssh 172.x.x.69 -b 172.x.x.7 -l root
Last login: Wed Nov 19 14:27:44 2014 from 172.x.x.7
# 
```

在 172.xx7 我有两个以太网端口 x.7 和 x.8

```
# ifconfig 
eth0      Link encap:Ethernet  HWaddr xxxxx
          inet addr:172.x.x.7  Bcast:172.x.x.31  Mask:255.255.255.224
          inet6 addr: xxx Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:27678 errors:0 dropped:0 overruns:0 frame:0
          TX packets:9 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:1852058 (1.7 MiB)  TX bytes:684 (684.0 b)

eth1      Link encap:Ethernet  HWaddr xxx
          inet addr:172.x.x.8  Bcast:172.x.x.31  Mask:255.255.255.224
          inet6 addr: xxx Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:72022 errors:0 dropped:0 overruns:0 frame:0
          TX packets:34734 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:40788643 (38.8 MiB)  TX bytes:4441314 (4.2 MiB) 
```

我需要这个 hack 的原因是路由表默认 eth1 而不是 eth0

```
# route (@172.x.x.7)
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
172.x.x.0       *               255.255.255.224 U     0      0        0 eth1
172.x.x.0       *               255.255.255.224 U     0      0        0 eth0
192.168.1.0     *               255.255.255.0   U     0      0        0 eth2
link-local      *               255.255.0.0     U     1002   0        0 eth0
link-local      *               255.255.0.0     U     1003   0        0 eth1
link-local      *               255.255.0.0     U     1004   0        0 eth2
default         172.x.x.1       0.0.0.0         UG    0      0        0 eth1 # eth0 OK
# 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T09:57:19.437

您需要在“iptables”中添加一些规则，以便将您从盒子发起的 ssh 流量转发到远程机器。

```
iptables -A FORWARD -i eth1 -o eth2 -p tcp --dport 22 -d [destination ip] -j ACCEPT 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-04T08:46:00.890

只告诉其他用户 eth0 的 ip 地址。

# java - 我的progressDialog 不滚动？

> ID：12259810
> 
> 赞同：-2
> 
> 时间：2012-09-04T08:43:52.463
> 
> 标签：java, android, multithreading

当某些功能在后台运行时，我想显示一个圆形进度对话框。所以我写了这么一系列代码：

```
 pd = ProgressDialog.show(GridLayoutActivity.this, "","...");
    new Thread(new Runnable() {
    public void run() {
        someFunc();
        handler.sendEmptyMessage(0);// 执行耗时的方法之后发送消给handler
    }
    }).start(); 
```

但是progressDialog 不滚动？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:53:25.257

尝试使用异步任务，这里我发布示例代码，您可以根据自己的需要进行更改

```
public class BackGround_Task extends AsyncTask<Void, Void, Void> {
        private final ProgressDialog dialog = new ProgressDialog(
                YourClassName.this);

        // can use UI thread here
        protected void onPreExecute() {
            this.dialog.setMessage("Loading...");
            this.dialog.setCancelable(false);
            this.dialog.show();
        }

        @Override
        protected Void doInBackground(Void... params) {
            //Your Background Task

            return null;
        }

        protected void onPostExecute(Void result) {

            //What will you do after the completion of Background process

            if (this.dialog.isShowing()) {
                this.dialog.dismiss();
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:52:46.587

只需使用这样的东西：

```
ProgressDialog progressDialog = new ProgressDialog(GridLayoutActivity.this);
progressDialog.setMax(100);
progressDialog.setProgress(0);
progressDialog.setMessage("...");
progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
progressDialog.show();

new Thread(new Runnable() {
public void run() {
    someFunc();
    handler.sendEmptyMessage(0);// 执行耗时的方法之后发送消给handler
}
}).start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:03:02.493

在 try 块之后发送处理程序消息。像这样使用：

```
pd = ProgressDialog.show(SetFrames.this,"Loading", "Please Wait...",true);
           new Thread() {
               public void run() {
               try {
                 //your function
               }catch(Exception e)
               {
               }
               handler.sendEmptyMessage(0);
               pd.dismiss();
               }

               }.start();

private Handler handler = new Handler() {
        public void handleMessage(Message msg) {

        }
        }; 
```

# cordova - Phonegap jQuery 移动事件处理性能？

> ID：12259813
> 
> 赞同：1
> 
> 时间：2012-09-04T08:44:07.837
> 
> 标签：cordova, jquery-mobile

我已经在 Phonegap 和 jQuery Mobile 中构建了一个 Android 应用程序，现在我想对其进行优化，使其运行更流畅。我有几个性能问题：

1.  什么是点击事件处理的最佳用途（用于性能）

    ```
    $('#someID').on('click', function());
    $('#someID').click(function());
    $('#someID').on('vclick', function()); 
    ```

2.  是否有绑定的 pageshow 事件，所以我不必现场进行？

    ```
    $('#somePageId').pageshow(function()) 
    ```

    代替

    ```
    $('#somePageId').on('pageshow', function()) 
    ```

3.  任何其他提高性能的技巧都将非常有帮助。非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:26:58.410

不一定与 Phonegap/JQM 相关，但此[列表](http://developer.yahoo.com/performance/rules.html)很有帮助。

如果您查看 JQM 论坛，有一篇很长[的帖子](https://forum.jquery.com/topic/reaction-from-jquery-mobile-community-on-phonegap-post)，其中包含很多关于其他人如何优化他们的 PhoneGap/JQM 应用程序的信息。

这应该让你朝着正确的方向开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T22:50:42.047

1.  委托 -> $(document).on('click','#someID', function(e){...});
2.  使用委托

# maven - IntelliJ 自动将目标子目录标记为“源”

> ID：12259816
> 
> 赞同：3
> 
> 时间：2012-09-04T08:44:27.160
> 
> 标签：maven, build, intellij-idea

几个月前我开始使用 IntelliJ 进行 Java 开发。我使用 IntelliJ 作为 IDE 并使用 Maven 构建我的项目。我的几个 Maven 项目生成了我的其他 Maven 项目所依赖的代码，生成的代码最终在 target/src 生成的目录中，其中包含“Maven-subdirectories”main/java、main/resource 等。是否可以制作 IntelliJ自动将 target/src-generated/main/java 目录标记为源？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T08:51:34.257

请参阅[IntelliJ IDEA Maven 常见问题解答](http://wiki.jetbrains.net/intellij/Maven_FAQ)：

> 为了使生成的源自动导入为源文件夹，请配置相应的插件，以便它们将它们放入 `target/generated-sources/<subdir>`，其中 subdir 是您喜欢的任何文件夹名称。subdir 文件夹对于区分来自不同工具的源以及排除一些特殊生成的源（例如 groovy 存根）是必要的。
> 
> 请注意，即使您手动配置了该文件夹下`target/generated-sources`的一些源文件夹，IDEA 也会根据您的`pom.xml`.
> 
> 任何时候您想要生成源代码，您只需执行相应的目标，即为生成绑定（通常是`generate-sources`, `generate-test-sources`）。之后，IDEA 将选择新文件夹并进行设置。生成的测试源/资源应该放在 `target/generated-test-sources/<subdir>`.

# windows - 为 Windows 构建 ffmpeg 的困难

> ID：12259821
> 
> 赞同：-2
> 
> 时间：2012-09-04T08:45:02.020
> 
> 标签：windows, ffmpeg

我正在制作一个我想使用 ffmpeg 库的应用程序。我已经在 windows 中成功编译了该库，但我没有看到 ffmpeg.so，但我得到了 ffmpeg.exe 文件。你能告诉我怎么做它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:30:42.627

您可以使用 ffmpeg.exe 路径。如果您通过 ffmpeg 创建视频图像，请使用以下代码：

```
 function create_video_image_only($v_file,$thumb) {
$cmd = 'C:\inetpub\vhosts\domain-name\httpdocs\ffmpeg\bin\ffmpeg.exe -itsoffset -4 -i "'.$v_file.'" -vcodec mjpeg -vframes 1 -an -f rawvideo -s 105x74 "'.UP_FILES_FS_PATH.'/image_video/'.$thumb.'.jpg"' ; 
exec($cmd); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:55:30.813

如果您想构建`.DLL`s 并链接到它们（这是`.SO`Windows 世界中的 s ），那么您似乎还没有成功构建二进制文件。

关键是在构建时使用`--enable-shared`配置设置，以便您的输出包括`libavcodec.dll`及其表亲。

您不必自己构建，[Zeranoe](http://ffmpeg.zeranoe.com/builds/)已经有预构建的二进制文件：“共享”是那些 DLL/SO，而“开发”是静态库，用于链接到您的项目以在您的代码和单独构建的 FFmpeg 之间建立连接。

# c++ - 简化/优化逻辑的工具？

> ID：12259824
> 
> 赞同：3
> 
> 时间：2012-09-04T08:45:12.497
> 
> 标签：c++, c, optimization

通常我会让编译器完成优化复杂逻辑表达式的魔法，但是，在这种情况下，我必须使用的编译器在这方面不是很擅长（基本上它所能做的就是用位移替换 /64 之类的东西和%512 按位与）。

是否有任何可用的工具可以分析和提供表达式的优化版本（即与优秀的优化编译器相同的方式）？

例如，我想优化以下内容：

```
int w = 2 - z/2;

int y0 = y + (((v % 512) / 64) / 4) * 8           + ((v / 512) / mb)*16;
int x0 = x + (((v % 512) / 64) % 4) * 8 * (w - 1) + ((v / 512) % mb)*8 * w;

int i = x0 * (w ^ 3) * 2 + y0 * mb * 16 * 2 + (2*z - 3) * (z/2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:57:28.483

这是一个测试：

```
typedef int MyInt; // or unsigned int

MyInt get(MyInt x, MyInt y, MyInt z, MyInt v, MyInt mb)
{
    MyInt w = 2 - z/2;

    MyInt y0 = y + (((v % 512) / 64) / 4) * 8           + ((v / 512) / mb)*16;
    MyInt x0 = x + (((v % 512) / 64) % 4) * 8 * (w - 1) + ((v / 512) % mb)*8 * w;

    MyInt i = x0 * (w ^ 3) * 2 + y0 * mb * 16 * 2 + (2*z - 3) * (z/2);

    return i;
} 
```

我用 GCC 4.7.0 和`-O3`.

与`int`：

```
.LFB0:
        movl    %ecx, %eax
        movq    %r12, -24(%rsp)
.LCFI0:
        movl    %edx, %r12d
        sarl    $31, %eax
        shrl    $31, %r12d
        movq    %r13, -16(%rsp)
        shrl    $23, %eax
        addl    %edx, %r12d
        movq    %rbx, -40(%rsp)
        leal    (%rcx,%rax), %r9d
        movl    %r12d, %r11d
        movq    %r14, -8(%rsp)
        sarl    %r11d
        movq    %rbp, -32(%rsp)
.LCFI1:
        movl    %edx, %ebp
        andl    $511, %r9d
        negl    %r11d
        subl    %eax, %r9d
        leal    511(%rcx), %eax
        testl   %ecx, %ecx
        leal    2(%r11), %r13d
        leal    63(%r9), %ebx
        cmovns  %ecx, %eax
        sarl    $9, %eax
        movl    %r13d, %r14d
        xorl    $3, %r14d
        movl    %eax, %edx
        testl   %r9d, %r9d
        cmovns  %r9d, %ebx
        sarl    $31, %edx
        addl    $1, %r11d
        idivl   %r8d
        movl    %ebx, %r10d
        sarl    $31, %ebx
        shrl    $30, %ebx
        sarl    $6, %r10d
        addl    %ebx, %r10d
        andl    $3, %r10d
        subl    %ebx, %r10d
        movq    -40(%rsp), %rbx
        sall    $3, %r10d
        sall    $3, %edx
        imull   %r11d, %r10d
        imull   %r13d, %edx
        movq    -16(%rsp), %r13
        addl    %edi, %r10d
        addl    %edx, %r10d
        leal    255(%r9), %edx
        imull   %r10d, %r14d
        testl   %r9d, %r9d
        cmovs   %edx, %r9d
        sall    $4, %eax
        sarl    %r12d
        sarl    $8, %r9d
        leal    (%rsi,%r9,8), %ecx
        addl    %eax, %ecx
        leal    -3(%rbp,%rbp), %eax
        movq    -32(%rsp), %rbp
        imull   %r8d, %ecx
        imull   %r12d, %eax
        movq    -24(%rsp), %r12
        sall    $4, %ecx
        addl    %r14d, %ecx
        movq    -8(%rsp), %r14
        leal    (%rax,%rcx,2), %eax
        ret 
```

与`unsigned int`：

```
.LFB0:
        movl    %ecx, %eax
        movq    %rbp, -16(%rsp)
        movl    %edx, %r11d
.LCFI0:
        movl    %edx, %ebp
        shrl    $9, %eax
        xorl    %edx, %edx
        divl    %r8d
        movq    %r12, -8(%rsp)
.LCFI1:
        movl    %ecx, %r12d
        shrl    %r11d
        andl    $511, %r12d
        movq    %rbx, -24(%rsp)
.LCFI2:
        movl    $2, %r10d
        movl    %r12d, %r9d
        movl    $1, %ebx
        subl    %r11d, %r10d
        shrl    $6, %r9d
        subl    %r11d, %ebx
        shrl    $8, %r12d
        andl    $3, %r9d
        sall    $4, %r8d
        imull   %ebx, %r9d
        leal    (%r12,%rax,2), %eax
        movq    -24(%rsp), %rbx
        imull   %r10d, %edx
        xorl    $3, %r10d
        movq    -8(%rsp), %r12
        leal    (%rsi,%rax,8), %eax
        addl    %edx, %r9d
        leal    (%rdi,%r9,8), %edi
        imull   %eax, %r8d
        leal    -3(%rbp,%rbp), %eax
        movq    -16(%rsp), %rbp
        imull   %r10d, %edi
        imull   %r11d, %eax
        addl    %edi, %r8d
        leal    (%rax,%r8,2), %eax
        ret 
```

通过手动折叠常量来进一步“优化”（可以预见）没有进一步的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:45:38.287

当我想要优化时，我倾向于检查 Clang 生成的 LLVM IR。它比纯汇编更具可读性（我发现）。

```
int foo(int v, int mb, int x, int y, int z) {
  int w = 2 - z/2;

  // When you have specific constraints, tell the optimizer about it !
  if (w < 0 || w > 2) { return 0; }

  int y0 = y + (((v % 512) / 64) / 4) * 8           + ((v / 512) / mb)*16;
  int x0 = x + (((v % 512) / 64) % 4) * 8 * (w - 1) + ((v / 512) % mb)*8 * w;

  int i = x0 * (w ^ 3) * 2 + y0 * mb * 16 * 2 + (2*z - 3) * (z/2);

  return i;
} 
```

转化为：

```
define i32 @foo(i32 %v, i32 %mb, i32 %x, i32 %y, i32 %z) nounwind uwtable readnone {
  %1 = sdiv i32 %z, 2
  %2 = sub nsw i32 2, %1
  %3 = icmp slt i32 %2, 0
  %4 = icmp slt i32 %z, -1
  %or.cond = or i1 %3, %4
  br i1 %or.cond, label %31, label %5

; <label>:5                                       ; preds = %0
  %6 = srem i32 %v, 512
  %7 = sdiv i32 %6, 64
  %8 = sdiv i32 %6, 256
  %9 = shl i32 %8, 3
  %10 = sdiv i32 %v, 512
  %11 = sdiv i32 %10, %mb
  %12 = shl i32 %11, 4
  %13 = add i32 %9, %y
  %14 = add i32 %13, %12
  %15 = srem i32 %7, 4
  %16 = add nsw i32 %2, -1
  %17 = mul i32 %16, %15
  %18 = srem i32 %10, %mb
  %19 = mul i32 %2, %18
  %tmp = add i32 %19, %17
  %tmp2 = shl i32 %tmp, 3
  %20 = add nsw i32 %tmp2, %x
  %21 = shl i32 %2, 1
  %22 = xor i32 %21, 6
  %23 = mul i32 %22, %20
  %24 = shl i32 %mb, 5
  %25 = mul i32 %24, %14
  %26 = shl i32 %z, 1
  %27 = add nsw i32 %26, -3
  %28 = mul nsw i32 %1, %27
  %29 = add i32 %25, %28
  %30 = add i32 %29, %23
  br label %31

; <label>:31                                      ; preds = %5, %0
  %.0 = phi i32 [ %30, %5 ], [ 0, %0 ]
  ret i32 %.0
} 
```

我不知道它是否是最佳的，但它肯定是相对可读的。

如果您可以指示输入的所有约束（如果需要，所有五个约束），那就太好了，因为优化器可能能够使用它们。

# gridview - 在运行时更改 QML GridView 模型

> ID：12259825
> 
> 赞同：2
> 
> 时间：2012-09-04T08:45:18.423
> 
> 标签：gridview, qml, qabstractlistmodel

我在 QT 和 QML 中定义了一个基于 QAbstractListModel 的类，我将此模型设置为 GridView。它工作完美。如果我更改模型中的数据，我会调用重置函数，GridView 会显示更新的数据。但有时我会更改完整的模型数据（即不仅数据更改，而且其计数也更改）。在这种情况下，当我重置数据时，GridView 不会显示更新的模型。我还尝试为我的模型创建一个新对象并更改了 GridView 模型，但仍然没有效果。

这是基本的代码片段。

```
// DataEngine.h
class DataEngine : public QAbstractListModel
{
    Q_OBJECT
public:
    .....
public: // Overrides
    int rowCount(const QModelIndex &parent) const;
    QVariant data(const QModelIndex &index, int role) const;
}
// main.c
DataEngine *data = new DataEngine();
view.rootContext()->setContextProperty("DataModel", data)

// QML File
GridView {
.....
id: view
model: DataModel
.....
}

// After completely changing data (i.e earlier it has 256 rows, now it has say 0 row)
// I tried
view.rootContext()->setContextProperty("NewDataModel", data)
// QML Code
view.model = NewDataModel     // No effect. 
```

在我看来，数据正在发生变化，但 GridView 并未使用新数据进行更新。

任何帮助表示赞赏。

最好的问候， Farrukh Arshad

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:15:57.637

我怀疑您没有通知底层基础模型您的数据已更改。请参阅QAbstractItemModel 的[这一部分](http://doc.qt.nokia.com/4.7-snapshot/qabstractitemmodel.html#subclassing)，了解有关您需要在子类中执行的操作的详细信息。特别是，下面这句话说了很多：

在实现这些功能时，重要的是要通知任何连接的视图在模型尺寸发生*之前和之后*发生的变化：

如果要删除减少数据，则必须提供 removeRows 的实现，如果要增加数据，则必须提供 insertRows 的实现。就我而言，因为我有来自自己来源的数据，所以我只是删除了该数据并将 rowIndex 返回为 0 无效。我刚刚添加了一个空的 removeRows 实现，其中 beginRemoveRows 和 endRemoveRows 在 return true 内，并发出了这个信号。有了这个信号，我的视图知道数据计数发生了变化，所以它调用了 rowCount 函数，我返回了 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:17:55.767

问题已解决。Wes Hardaker 提供的指针是完美的，我已经通过编辑他的答案提到了细节。这是我分享的代码。您的模型子类必须提供 removeRows / insertRows 的实现。使用这些函数，视图知道当您调用 beginRemoveRows / endRemoveRows 和 beginInsertRows / endInsertRows 时数据计数已更改，并且视图将调用您的 rowCount 函数，您可以在其中提供更新的计数。扩展问题中提到的代码。

```
// When changing the data, following two lines are being called on a 
// button press from the QML.
// Invokable method

delete this->data;         // As mentioned in question data is DataEngine object.
this->data = NULL;

// DataEngine destructor
DataEngine::~DataEngine()
{
    // Remove all rows from the data model so that
    // the model view knows the data is changed
    removeAllRows();
}
void DataEngine::removeAllRows()
{
    removeRows(0, this->getBufferSize(), this->index(0,0));
}
bool DataEngine::removeRows(int row, int count, const QModelIndex &parent)
{
    beginRemoveRows(QModelIndex(), row, row + count - 1);
    // You can delete your actual data here as well, I was deleting it in the 
    // destructor of DataEngine.
    endRemoveRows();
    return true;
} 
```

# jdbc - JDBC getColumnName getColumnLabel DB2

> ID：12259829
> 
> 赞同：1
> 
> 时间：2012-09-04T08:45:26.583
> 
> 标签：jdbc, db2, metadata, columnname

`ResultSetMetadata`对于不涉及实际表列的查询，是否可以在 DB2 中的 JDBC 中同时提供列名和列标签？

```
select substr('Hallo', 1) as greeting from sysibm.sysdummy1 
```

我想为上述查询实现不同的列标签和列名。在这种情况下`getColumnName`，`getColumnLabel`两者都返回 String `"GREETING"`。我想设置一个不同的列标签（例如`"Begrüßung"`）。

我使用 DB2 JCC4 驱动程序和 DB2 V9。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T08:22:49.713

你不能那样做。JDBC 中的 columnName 被定义为原始列的名称。columnLabel 是原始的 columnName 或 - 如果指定 -`AS`列的别名。

在您的查询中只有一个 columnLabel （即`greeting`）。在这种特定情况下， columnName 应该是什么实际上取决于实现（它可能是一个空字符串，与 columnLabel 相同，甚至完全不同）。

# ios - iOS ArialMT 字体大小与 Fireworks 中的不同

> ID：12259847
> 
> 赞同：0
> 
> 时间：2012-09-04T08:46:46.130
> 
> 标签：ios, fonts

我使用以下代码来设置字体，以便在各种标签中进一步使用。

```
UIFont *boldFont = [UIFont fontWithName:@"Arial-BoldMT" size:26]; 
```

我遇到的问题是生成的字体似乎比它应该的稍大，即它比 Adob​​e Fireworks 中的普通 Arial 字体大。

至少从我读到的 Arial 和 ArialMT 是相同的字体，但显然在字体大小方面并非如此。

是否有任何比例，以便给定 Fireworks 中正常 Arial 字体的字体大小，我将能够计算出适当的字体大小以包含在我的代码中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:06:04.420

只能通过在 Fireworks 中使用 ArialMT 字体来解决。

# cakephp - CakePHP 不工作，显示 PHP 代码内联 PHP

> ID：12259848
> 
> 赞同：1
> 
> 时间：2012-09-04T08:46:48.127
> 
> 标签：cakephp, amazon-web-services, bitnami

**编辑：**我现在知道是什么导致了问题，但仍然没有解决方案。基本上除非`tmp`目录是 777，否则 Cake 无法写入它，所以它失败了。如果`tmp`是 777，那么可能是因为一些奇怪的安全设置 PHP 不起作用。有什么想法，如果这是一种可能性，我该如何解决？

**编辑 2：**是否有可能由于字符编码，tmp 不是 777 它显示的`?`垃圾字符。

我刚刚将我的 CakePHP 应用程序迁移到了 Amazon AWS（使用 BitNami LAMPstack）。我收到 PHP 错误提示无法连接到 DB（这意味着 PHP 正在执行）。

当我修复数据库设置时，它现在正在打印内联 PHP。例如：

```
<title><?php echo $title_for_layout; ?></title> 
```

显示在 HTML 中，因此文档标题是一段 PHP 代码！

请帮助我不知所措。我尝试过的事情：

*   在 /opt/bitnami/apache2/conf/httpd.conf 部分中将 AllowOverride 更改为 All
*   为 short_open_tag=On 编辑我的 php.ini 以防万一
*   确保在 httpd.conf 中启用了 mod_rewrite，并且我的`htdocs`和`app`文件夹具有正确的`.htaccess`文件。

这是我的 .htaccess 文件以防万一：

`htdocs/.htaccess`

```
<IfModule mod_rewrite.c>
       RewriteEngine on
       RewriteRule    ^$ app/webroot/    [L]
       RewriteRule    (.*) app/webroot/$1 [L]
</IfModule>

Options All -Indexes 
```

`htdocs/app/.htaccess`

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

`htdocs/app/webroot/.htaccess`

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?/$1 [QSA,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:24:47.920

好吧，我只能说感谢上帝，我上学期在课堂上解释字符编码时引起了我的注意。

所以我打开了所有没有在 .ctp 中作为 PHP 执行的 .ctp 文件`vim`。我说`:set encoding=utf-8`然后（保持它对新手友好`:set fileencoding=utf-8` ，`:x`以防有人想要快速修复）:)

它现在应该像现在一样工作。:)

# xml - 任何用于创建 rss 提要格式的 drupal 7 视图，例如 http://www.campaignmonitor.com/create/rss-to-email/#data-repeater

> ID：12259854
> 
> 赞同：0
> 
> 时间：2012-09-04T08:47:15.193
> 
> 标签：xml, rss, drupal-7, drupal-views

有谁知道如何在 drupal 7 中创建像[http://www.campaignmonitor.com/create/rss-to-email/#data-repeater](http://www.campaignmonitor.com/create/rss-to-email/#data-repeater)这样的 xml 格式。我需要的是，输出一个带有自定义节点和自定义属性的 xml。格式就像

```
<h3>The latest from our blog</h3>
<datarepeater type="rss" src="http://abcwidgets.com">
    <h4><rsstitle tocitem></h4>
    <p>Posted by <rssauthor /> on <rssitemday />/<rssitemmonth /></p>
    <rssimage width="600" />
    <rssbody paragraphs="all" />
</datarepeater> 
```

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:56:20.973

First of all, drupal questions go to [https://drupal.stackexchange.com/](https://drupal.stackexchange.com/)

Another thing is that you can do in various ways. It would be helpful if you would tell what exactly you are trying to do and why. Drupal has "views" where you can export XML that you want. This is probably the best way to look for your solution.

# c# - 过滤 ObjectQuery 在 DateTime 上动态

> ID：12259857
> 
> 赞同：2
> 
> 时间：2012-09-04T08:47:43.797
> 
> 标签：c#, entity-framework

我有以下方法用于使用 EF 按日期过滤 ObjectQuery：

```
public List<T> FilterObjectSetByDate<T>(ObjectQuery<T> inputQuery, string dateColumn) where T : class
{
    ObjectQuery<T> filteredQuery = inputQuery.Where("(dateadd(dd,0, datediff(dd,0, it" + dateColumn + ")) = @p0)");
    ObjectParameter objParam = new ObjectParameter("p0", DateTime.Now);
    filteredQuery.Parameters.Add(objParam);

    return filteredQuery.ToList();
} 
```

这导致以下错误：

```
'dateadd' cannot be resolved into a valid type or function. 
```

有没有办法使用实体框架返回给定日期的记录列表（忽略 DateTime 的时间部分）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:06:45.950

好吧，今天早上想通了：

```
Where("SqlServer.datediff('DAY'," + dateColumn + ", @p{1}) = 0") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:02:43.563

[谷歌搜索](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/f32f3311-350d-4c2d-a4fd-c801918d36b1/)建议使用`"SqlServer.dateadd...`而不是仅仅使用`"dateadd...`，类似地 for `datediff`。

# linq - OrderByDescending (OrderBy) 和 AddOrder 的区别

> ID：12259862
> 
> 赞同：0
> 
> 时间：2012-09-04T08:48:07.847
> 
> 标签：linq, nhibernate, hibernate-criteria

这段代码

```
criteria
.AddOrder(new Order("AnnoInizialePfk", false))
.List<MyClass>()        
.ToDictionary(x => (short)x.AnnoInizialePfk, x => Convert.ToString(x.AnnoInizialePfk)); 
```

产生这个 sql

```
SELECT this_.ANNO_INIZIALE_PFK as y0_ FROM dbo.Table this_ ORDER BY y0_ desc 
```

而是这段代码

```
criteria
.List<MyClass>()
.OrderByDescending(x => x.AnnoInizialePfk)
.ToDictionary(x => (short)x.AnnoInizialePfk, x => Convert.ToString(x.AnnoInizialePfk)); 
```

产生这个 sql

```
SELECT this_.ANNO_PFK as y0_ FROM dbo.Table this_ 
```

两个结果集都是按降序排列的，但是在第二个代码中怎么可能呢？

哪个代码更好用？

谢谢

萨拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:27:50.590

第二条语句中的`List()`调用使其立即枚举 Select。即“OrderBy”是在内存中完成的，而不是在数据库中。您应该交换 OrderBy 和 List 调用（尽管您实际上并不需要 List，因为它是多余的，因为 ToDictionary 也会这样做）。

# c# - 按下软键盘的回车键时，将焦点从一个文本框移动到另一个文本框

> ID：12259871
> 
> 赞同：3
> 
> 时间：2012-09-04T08:48:54.610
> 
> 标签：c#, silverlight, windows-phone-7

我在 Windows Phone 上。我想在您创建新事件时复制日历应用程序的行为。如果您触摸名称文本框，然后按软键盘的 Enter 键，应用程序会将焦点从该文本框移至下方。

我不知道如何在我自己的应用程序中做到这一点。

我猜我必须使用 IsTabStop + TabIndex 属性，也许还有 TabNavigation。

但如果我设置它们，它不会改变任何东西。

像那样 ：

```
<TextBox
  IsTabStop="True"
  TabIndex="1" />
<TextBox
  IsTabStop="True"
  TabIndex="2" /> 
```

这是一个简单的行为，我无法理解为什么我无法单独弄清楚这一点。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T08:55:46.427

使用`KeyDown`事件`textBox1`。并通过以下方式检查`if (e.Key == Key.Enter || e.PlatformKeyCode == 0x0A)`并将焦点更改为另一个文本框`textBox2.Focus()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T08:58:54.107

我看到了两种可能的方法来做到这一点。

在第一种情况下，您知道之前和之后的字段，因此您可以对行为进行硬编码。当用户在 textbox1 上按“Enter”时，您将关注 textbox2，依此类推。

编辑：这正是@milan-aggarwal 所说的

第二个也是更通用的想法是使用**VisualTreeHelper** ( [http://msdn.microsoft.com/fr-fr/library/system.windows.media.visualtreehelper.aspx](http://msdn.microsoft.com/fr-fr/library/system.windows.media.visualtreehelper.aspx) )。

当用户按下“Enter”（这很容易检测到）时，您可以使用 VisualTreeHelper 查看 englobing 面板的子项，以便选择和聚焦下一个文本框（或其他类型的 UI 组件）。

我不知道是否有本地解决方案可以做同样的事情。

# zend-framework - Zend DB 插入关系数据

> ID：12259874
> 
> 赞同：2
> 
> 时间：2012-09-04T08:49:17.207
> 
> 标签：zend-framework, zend-db

我使用 Zend Framework 数据库关系已有几个星期了。我的第一印象非常好，但我确实有一个与将相关数据插入多个表有关的问题。对于一个小测试应用程序，我使用保险丝表将两个表相互关联。

```
 +---------------+      +---------------+      +---------------+
      |     Pages     |      |     Fuse      |      |    Prints     |
      +---------------+      +---------------+      +---------------+
      | pageid        |      | fuseid        |      | printid       |
      | page_active   |      | fuse_page     |      | print_title   |
      | page_author   |      | fuse_print    |      | print_content |
      | page_created  |      | fuse_locale   |      | ...           |
      | ...           |      | ...           |      +---------------+
      +---------------+      +---------------+ 
```

*以上是我的数据库架构的示例*

现在，我的问题是如何将相关数据插入到两个单独的表中，并将两个新创建的 ID 同时插入到熔断表中。如果有人可以解释或给我一个主题相关的教程。我会很感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:01:16.563

我假设您为每个表都有单独的模型。然后只需在`Prints`表中插入东西，将返回的 ID 存储在变量中。然后在表中插入东西`Pages`并将返回的 ID 存储在另一个变量中。最终在您的`Fuse`表中插入数据。您在这里不需要任何“同时”（原子）操作。新插入行的 ID 由`save()`（我假设您为此使用自动增量字段）返回。

```
$printsModel = new Application_Model_Prints();
$pagesModel = new Application_Model_Pages();
$fuseModel = new Application_Model_Fuse();

$printData = array('print_title'=>'foo',
              ...);
$printId = $printsModel->insert( $printData );

$pagesData = array('page_author'=>'bar',
              ...);
$pageId = $pagesModel->insert($pagesData);

$fuseData = array('fuse_page' => $pageId,
                  'fuse_print' => $printId,
                  ...);
$fuseId = $fuseModel->insert($fuseData); 
```

因此是伪代码，因此您可能希望将插入移动到您的模型中并进行一些操作，即规范化等。

我还建议多注意字段命名约定。它通常会有所帮助，现在您也得到`fuseid`了`fuse_page`。所以它应该是`fuse_id`or `fusepage`（更不用说我怀疑这个字段存储 id 所以它会是`fuse_page_id`or `fusepageid`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:01:12.817

Prints 和 Pages 是两个实体。为每个创建行类

```
class Model_Page extends Zend_Db_Table_Row_Abastract 
{

public function addPrint($print)
{
  $fuseTb = new Table_Fuse();
  $fuse = $fuseTb->createRow();
  $fuse->fuse_page = $this->pageid;
  $fuse->fuse_print = $print->printid;
  $fuse->save();
  return $fuse;
}

} 
```

现在当你创建页面

```
$page = $pageTb->createRow() ; //instance of Model_Page is returned
$page->addPrint($printTb->find(1)->current()); 
```

# c# - C# 线程奇迹

> ID：12259877
> 
> 赞同：1
> 
> 时间：2012-09-04T08:49:31.663
> 
> 标签：c#, multithreading, windows-phone-7

假设您想将项目异步添加到 C# 中的数据结构中。

因此，典型的分步程序通常如下：

```
List1.add(variable1); 

List2.add(variable2);

List3.add(variable3); 
```

..ETC。

是否可以异步执行此操作？

我还要说每个列表或它各自的变量之间没有依赖关系。

这可以做得很好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T08:50:55.990

> 我还要说每个列表或它各自的变量之间没有依赖关系。
> 这可以做得很好吗？

是的，只要每个线程都有自己的列表，就没有问题。

还有一个简单的方法：

```
Parallel.Invoke(
   () => List1.add(variable1), 
   () => List2.add(variable2),
   () => List3.add(variable3)
); 
```

另一方面，`List<>.Add()`这是一种非常小且快速的方法，因此您不会看到这样做的太多好处。只有当 2 个以上的列表需要同时在内部增长时才有好处。并且有更好的方法来处理这个问题。

# java - 文件无法删除错误显示文件已在 java su 二进制文件中打开关闭文件并重试

> ID：12259882
> 
> 赞同：0
> 
> 时间：2012-09-04T08:49:59.763
> 
> 标签：java, xml, xls

我想删除该文件或复制该程序创建的文件，它不允许我需要解决方案

```
package xml2html;

import java.io.*;
import javax.xml.transform.*;
import javax.xml.transform.stream.*;

public class Xml2HtmlConverter {

public static void main(String[] args, String xmlpath) {
    pathmethod(xmlpath);
}

public static void pathmethod(String xmlpath) {
      try {
        /* converting the file using xls */
        TransformerFactory tFactory = TransformerFactory.newInstance();

        Source xslDoc = new StreamSource("D:/xmlautomation/stylesheet.xsl");
        Source xmlDoc = new StreamSource(xmlpath);

        String outputFileName = "D:/xmlautomation/output.html";
        OutputStream htmlFile = new FileOutputStream(outputFileName);

        Transformer transformer = tFactory.newTransformer(xslDoc);
        transformer.transform(xmlDoc, new StreamResult(htmlFile));

      } catch(Exception e) {
         e.printStackTrace();
      }
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:57:24.333

```
package xml2html;

import java.io.*;
import javax.xml.transform.*;
import javax.xml.transform.stream.*;

public class Xml2HtmlConverter {

public static void main(String[] args, String xmlpath)
{
    pathmethod(xmlpath);
}

public static void pathmethod(String xmlpath) 
{
try
    {
        TransformerFactory tFactory = TransformerFactory.newInstance();

        Source xslDoc = new StreamSource("D:/xmlautomation/stylesheet.xsl");
        Source xmlDoc = new StreamSource(xmlpath);

        String outputFileName = "D:/xmlautomation/output.html";
        OutputStream htmlFile = new FileOutputStream(outputFileName);

        Transformer transformer = tFactory.newTransformer(xslDoc);
        transformer.transform(xmlDoc, new StreamResult(htmlFile));
        htmlFile.close();     
    }

catch(Exception e)
{
    e.printStackTrace();
}

finally
{

}
}
} 
```

# multiline - 创建具有不同线条定义的固定宽度文件

> ID：12259884
> 
> 赞同：0
> 
> 时间：2012-09-04T08:50:05.033
> 
> 标签：multiline, fixed-width

我们正在开发的批处理需要一个固定宽度的输入文件，每个实体具有不同的行定义。例如。第一行定义一个家庭，第二行和第三行定义该家庭的家庭成员。家庭记录与家庭成员记录具有不同的列定义。

我想以人类可读的方式创建测试用例（即使它必须是 Excel），然后将其转换为输入文件格式。

关于如何在没有太多麻烦的情况下做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:22:19.143

XML 和 XSLT 可能是最好的选择。
如果遇到问题，您应该尝试并发布问题更新。

# hibernate - 如何为地图数据类型应用休眠过滤器？

> ID：12259893
> 
> 赞同：0
> 
> 时间：2012-09-04T08:50:26.193
> 
> 标签：hibernate, filter, annotations

有没有办法使用注释对类中的地图类型属性应用过滤器？我已经完成了类似下面的操作，但没有应用过滤器

```
public class EntityA
{
@id
@GeneratedValue
@Column(name="id")
private Long id;

@OneToMany(mappedBy="EntityA")
@MapKeyColumn(name = "entityB_id")
@Filter(name = "percentFilter", condition="MODEL_PERCENT> :percent")
private Map<Long, EntityB> entityBMap;
} 

public class EntityB
{
@Column(name = "MODEL_PERCENT")
private BigDecimal modelPercent;

@ManyToOne
@joincolumn(name="entityA_id") 
private EntityA entityA; 
} 
```

但是，如果我将**地图**属性更改为如下**列表，则过滤器有效**

```
@OneToMany(mappedBy="EntityA")
@MapKeyColumn(name = "entityB_id")
@Filter(name = "percentFilter", condition="MODEL_PERCENT> :percent")
private Map<Long, EntityB> entityBMap; 
```

到

```
@OneToMany(mappedBy="EntityA")
@JoinColumn(name = "entityA_id")
@Filter(name = "percentFilter", condition="MODEL_PERCENT> :percent")
private List<EntityB> entityBList; 
```

所以我想我需要一些帮助来注释地图属性，以便过滤器起作用。任何建议或示例代码都会有很大帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:03:42.223

您想将过滤条件应用于关联表，因此，使用`@FilterJoinTable`和使用属性名称，而不是数据库列名称：

```
@OneToMany(mappedBy="EntityA")
@MapKeyColumn(name = "entityB_id")
@FilterJoinTable(name = "percentFilter", condition="modelPercent > :percent")
private Map<Long, EntityB> entityBMap; 
```

检查[过滤器](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-hibspec-filters)的 Hibernate Annotations 文档，你可以找到一个例子。

希望能帮助到你。

**编辑：**

不要忘记在您的休眠会话中启用过滤：

```
session.enableFilter("percentFilter").setParameter("percent", "some-value"); 
```

# php - UserVoice 在 PHP 中的 OAuth 实现

> ID：12259894
> 
> 赞同：0
> 
> 时间：2012-09-04T08:50:28.000
> 
> 标签：php, oauth, uservoice

我可以通过调用和未经授权的请求来获取[UserVoice](http://www.uservoice.com)的记录，但现在我想创建和更新我需要 OAuth 的东西，但我无法找到[UserVoice 的](http://www.uservoice.com)OAuth 的 PHP 实现和使用[UserVoice](http://www.uservoice.com) API创建/更新/删除有没有人可以指导我如何实施这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:49:40.093

我们最近对此进行了研究，并发布了一个基于 OAuth 的库，这使得从 PHP 版本 5 应用程序访问 UserVoice API 变得更加容易。

有关如何使用 user@example.com 的访问令牌创建票证的示例：

```
<?php
    require_once('vendor/autoload.php'); // Using Composer

    $client = new \UserVoice\Client('subdomain-name', 'API KEY', 'API SECRET');
    $access_token = $client->login_as('user@example.com');

    $result = $access_token->post("/api/v1/tickets", array(
            'ticket' => array(
                'state' => 'open',
                'subject' => 'PHP SDK',
                'message' => "Would you have any OAuth example for PHP?"
            )
    ));
?> 
```

尽管该库仍在开发中，但我相信它已经对您有用。请参阅博客文章和更多示例，例如以帐户所有者的身份回复工单：

[http://developer.uservoice.com/docs/api/php-sdk/](http://developer.uservoice.com/docs/api/php-sdk/)

# javascript - HTML5、CSS3 和/或 JS 旋转 CD 上的音频播放器

> ID：12259897
> 
> 赞同：1
> 
> 时间：2012-09-04T08:50:38.577
> 
> 标签：javascript, html, css

我正在寻找一种解决方案来使 CD 图像自行转动（就像这样：[http](http://alanschaffer.com/sound/images/cd.gif) ://alanschaffer.com/sound/images/cd.gif ）并且每当从该 CD 下的列表中选择曲目并单击时, 将播放所选曲目。在播放曲目时单击 CD 时，曲目将停止。

你能帮我吗？

PS：任何适用于 iPad 的解决方案建议都会被采纳。我将在 iPad 应用程序上使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T09:18:13.807

我建议使用[css-animations](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_animations)进行图像旋转（当然你必须为其他浏览器添加前缀）：

```
.mycd.animate {
  -webkit-animation: infinite-spinning 1s infinite linear;
}

@-webkit-keyframes infinite-spinning {
  from {
    -webkit-transform: rotate(0deg);
  }
  to {
    -webkit-transform: rotate(360deg);
  }
} 
```

只需将`animate`类添加到您的图像中，cd 就会旋转。

```
$('.mycd').on('click',function() {
  if($(this).hasClass('animate')) {
    // Track is playing -> stop it
    $(this).removeClass('animate');
  } else {
    // Not Playing -> start
    $(this).addClass('animate');
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:16:24.277

您无法控制图像的动画。您将需要每个图像的两个版本，一个是动画的，一个不是。单击后，您可以轻松地从一个图像更改为另一个图像。

例子：

```
$('#imgId').on("click", function(){
    var src = $(this).attr('src');  
    $(this).attr('src', src.replace('.gif', '_anim.gif'));    

    //logic for stopping and playing music - see link below
}); 
```

当然，在上面的代码示例中，如果之前的图像处于“动画”状态，您将需要添加替换正确图像的逻辑。

对于操纵“音乐” [，请查看 SO 上的此链接是否有](https://stackoverflow.com/questions/2988050/html5-audio-player-jquery-toggle-click-play-pause)帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:18:14.493

您可能想使用[`transform: rotate(xdg);`](http://davidwalsh.name/css-transform-rotate).

这是另一个[旋转图像的](http://bavotasan.com/2011/rotated-images-with-css3/)示例。

# c# - MVVM - 如何处理多个核心对象？

> ID：12259904
> 
> 赞同：1
> 
> 时间：2012-09-04T08:51:06.940
> 
> 标签：c#, design-patterns, mvvm

我们正在从头开始编写一个应用程序（核心和应用程序，该应用程序是 MVVM）。核心包含一个由块组成的测试对象。我们有大约 30 种不同类型的积木。它们被实现为复合模式——我们有一个抽象块，以及从它继承的叶子和复合块。所有其他类型的块都继承自叶子（如“打印”块）或复合块（如“for”块）。
我的问题是关于连接核心应用程序：应用程序需要呈现测试的树状结构。为此，它应该知道块有哪些参数以及如何呈现它们（可以是 1 个字符串参数、3 个 int、1 个字符串和 1 个只能有 3 个值的 int 等），以及该块是否有子块. 其他一些要求可能会在以后出现。

在我们的 API 中公开我们所有的具体块似乎最简单，将每个块包装在模型中自己的块中，然后使用数据模板将不同的属性绑定到字段。问题是，我们不想以这种方式将我们的核心内部暴露给应用程序。

另一种选择是仅公开抽象块并将实体添加到 API - Presentable Block，它将保存它并保存其参数的一般表示（比如说，参数对象的列表，每个这样的对象都保存所需的信息）。在这种情况下，应用程序必须为每个块解析这样一个列表，我们不确定数据模板的使用——这甚至可能吗？

我会很感激您对这 2 条建议的评论，当然还有新的想法。
谢谢。

# ruby - 使用海葵从网站获取 url 列表时出错

> ID：12259906
> 
> 赞同：3
> 
> 时间：2012-09-04T08:51:13.830
> 
> 标签：ruby, anemone

代码：

```
require 'anemone'
Anemone.crawl("http://www.example.com/") do |anemone|
  anemone.on_every_page do |page|
    puts page.url
  end
end 
```

当我尝试这段代码时，我应该得到该网站上所有 url 的列表，但我得到的只是网站的名称。可能是什么错误以及如何获取所有网址的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:11:49.150

我猜海葵只是不能跟随重定向或类似的东西，因为“http://example.com”将我重定向到其他站点。您是否尝试过抓取其他网站？例如，[http ://stackoverflow.com。](http://stackoverflow.com)

# c# - 使用在跨多个页面或 xaml 的隔离存储上创建的相同目录

> ID：12259907
> 
> 赞同：1
> 
> 时间：2012-09-04T08:51:16.347
> 
> 标签：c#, .net, windows-phone-7

我在一个解决方案中使用了三个 xaml 页面。我在 xaml1 中创建了名为“Storage”的目录。我需要在其他两个 xaml 中使用相同的目录....

代码：

```
 using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
 {
   myIsolatedStorage.CreateDirectory("Storage");
   IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile("Storage\\myFile.txt", FileMode.Open, FileAccess.Write);
   using (StreamWriter writer = new StreamWriter(fileStream))
   { }
 } 
```

如何在其他两个 xaml 中使用这个目录？

任何帮助......

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:14:47.960

只需检查目录是否存在，然后使用相同的代码来处理它：

```
using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
 {

   if(!myIsolatedStorage.DirectoryExists("Storage")) return;
   if(!myIsolatedStorage.FileExists("Storage\\myFile.txt")) return;
   var fileStream = myIsolatedStorage.OpenFile("Storage\\myFile.txt", FileMode.Open, FileAccess.Read);
   using (StreamReader writer = new StreamReader(fileStream))
   { }
 } 
```

隔离存储是一种用于应用程序的存储，而不是用于页面的存储。[这里](http://www.windowsphonegeek.com/tips/All-about-WP7-Isolated-Storage---File-manipulations)有一些细节和例子。

# c# - 如何检查例如 30 分钟是否已经过去？

> ID：12259908
> 
> 赞同：2
> 
> 时间：2012-09-04T08:51:17.807
> 
> 标签：c#, .net, datetime

我有以下代码：

```
if (v != null && DateTime.Now > v.Besetzt_Von)
{

    Debug.WriteLine("Hallo, das ist die Ausgabe! : " + v.Thema + v.Besetzt_Von + v.Besetzt_Bis);
    string clientId = GetClientId(req);

    DateTime TimeCheck = v.Besetzt_Von;

    if (TimeCheck.AddMinutes(30) > v.Besetzt_Von)
    {
        String hql = "UPDATE Buchung as b " +
        "set STORNO = :Storno " +
        "where ID IN (SELECT rr.Buchung FROM Raumreservierung rr " +
        "where BESETZT_VON = :Von and Raum IN (SELECT r.ID FROM Raum r " +
        "join r.Panel pl where pl.ID = :PanelId))";

        IQuery query = CurrentSession.CreateQuery(hql);
        query.SetParameter("Storno", DateTime.Now);
        query.SetParameter("Von", v.Besetzt_Von);
        query.SetParameter("PanelId", clientId);
        int result = query.ExecuteUpdate();
        Debug.WriteLine("Rows affected: " + result);
    }
} 
```

我希望如果例如 Besezt_Von = 14:00 点，则仅在 30 分钟过去（14:30）时才执行查询。我用 if 子句做到了，但它不起作用。查询始终在执行。我在做什么错？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T08:54:03.470

改变

```
if (TimeCheck.AddMinutes(30) > v.Besetzt_Von) 
```

什么都不做（这意味着如果 v.Besetz_von < v.BesezVon + 30 分钟，这当然总是正确的）

到

```
if (DateTime.Now > v.Besezt_Von.AddMinutes(30)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:53:59.620

```
// DateTime TimeCheck = v.Besetzt_Von; <-- you don't need this

if (DateTime.Now > v.Besetzt_Von.AddMinutes(30))
{
    // ...
} 
```

# c# - 从子域获取域

> ID：12259912
> 
> 赞同：4
> 
> 时间：2012-09-04T08:51:32.073
> 
> 标签：c#, .net, url, subdomain

我得到网址

> [http://orders.mealsandyou.com/default.php](http://orders.mealsandyou.com/default.php)

我不想使用字符串函数来获取主域，即

> 饭菜网

c# 中是否有任何功能可以做到这一点，UrilAuthority 和所有都提供子域......

欢迎提出建议，而不是解决方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T09:08:47.143

.Net 不提供从 .Net 中提取特定部分的内置功能`Uri.Host`。您必须自己使用字符串操作或正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:55:48.157

域字符串中唯一不变的部分是 TLD。TLD 是域字符串的最后一位，例如 .com、.net、.uk 等。其下的所有其他内容都取决于特定 TLD 的位置（因此您不能假设倒数第二部分是“域名”，对于 .co.uk，它将是 .co。

无论如何，我认为您采取了错误的方法。URL 重写更适合这种事情。阅读以下内容：learn.iis.net/page.aspx/460/using-the-url-rewrite-module

# ruby-on-rails - 无法使用 irb 创建对象实例

> ID：12259915
> 
> 赞同：2
> 
> 时间：2012-09-04T08:51:42.897
> 
> 标签：ruby-on-rails, irb

我尝试在 irb 中创建我的用户模型的用户实例。但它给了我这个错误

```
1.9.3p194 :001 > u = User.new
NameError: uninitialized constant User
from (irb):1
from /home/darshana/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T08:52:47.110

irb 不会为您加载导轨。

尝试`bundle exec rails console`

# jquery - JQuery 函数无法在 Wordpress 3.1.2 中工作

> ID：12259922
> 
> 赞同：1
> 
> 时间：2012-09-04T08:52:07.600
> 
> 标签：jquery, wordpress

```
TypeError: 'undefined' is not a function (evaluating '$(document)') 
```

我知道还有另一个主题存在类似问题，但尝试其中的解决方案并没有解决问题。

我正在使用 WordPress 3.1.2 并试图让它加载页面，但 WordPress 中的某些内容或我输入的内容似乎无法让它工作。

```
<div id=test>
 <b>Great scott</B>
</div>

<div id=recall>
  <b>see you at the party</b>
</div>
<script src=jquery.js>
</script>

<script>
  $(#test).load(search.php);
</script> 
```

这就是我正在尝试使用的代码，它可以在我工作的另一个 WP 网站上运行，可以说是创建原型。

问题似乎来自将它指向 jQuery 文件，因为甚至警报都不起作用。但是，当我取出警报时`src`，警报会正常显示。

我还使用了 jQuery 网站上的 jQuery 教程来确保 jQuery 文件本身可以正常工作，并且页面可以完美地运行 jQuery。

我尝试过使用`JQuery()`而不是`$()`，但是当我尝试时，`search.php`仍然无法加载，并且错误日志中也没有产生错误（我一直在使用 Firefox 对其进行测试）

我还尝试将其包装在类似问题有建议的函数中，但这会标记相同的错误或根本没有错误。

有没有办法解决这个问题或解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:53:50.187

您需要在#test 周围加上引号：

```
$('#test').load(search.php); 
```

未定义意味着选择器没有找到任何东西。

有关 jQuery 选择器的更多信息，请查看此处：[http ://api.jquery.com/category/selectors](http://api.jquery.com/category/selectors)

调试时 - 它可以帮助在 firefox 中使用 firebug，或者在 chrome 中使用开发者控制台......您可以直接输入 javascript 以查看它是否运行，甚至可以使用**$('#test') 之**类的东西来查看是什么被选中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:56:30.717

加载DOM后加载函数：

```
 <div id="test">
   <b>Great scott</B>
 </div>

 <div id="recall">
  <b>see you at the party</b>
 </div>
 <script src="jquery.js"></script>

 <script>
 $(function(){
     $("#test").load("search.php");
  });
 </script> 
```

# c# - EF 可能带有返回查询的错误

> ID：12259923
> 
> 赞同：1
> 
> 时间：2012-09-04T08:52:12.463
> 
> 标签：c#, sql, entity-framework

我有一个情况，我不明白。案例非常简单。我使用通用存储库来处理我的数据库。[http://efgenericrepository.codeplex.com/](http://efgenericrepository.codeplex.com/)一切都很好，但现在只有 1 个视图我遇到了问题。我认为当我执行查询时，EF 会返回一个单词数据。

这是我在 SQL Manager 中的 SQL 结果：

```
Select * 
from Vw_HoursMOPJustificated 
where IdUser = 20 
and ActionDate = '2012-08-22' and Hour < 24

IdMopTime | IdJustification | IdJustificationType

44      30                 8
44      40                11
44      43                13
45      31                 8
45      41                12
46      32                 8 
```

当我执行这个简单的代码时，这是我在 C# 中的结果。

```
MyIGFEntities entity = new MyIGFEntities();

var table = new Repository<MyIGF.Models.Vw_HoursMOPJustificated>(new MyIGFEntities())
    .Find(x => x.ActionDate == ActionDate && x.IdUser == IdUser && x.Hour < 24);

IdMopTime | IdJustification | IdJustificationType
44 | 30 | 8
44 | 30 | 8
44 | 30 | 8
45 | 31 | 8
45 | 31 | 8
46 | 32 | 8 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:44:08.810

You must correct your edmx (quite sure you have one).

On your Vw_HoursMOPJustificated entity and set Primary Key to true for IdMopTime, IdJustification and IdJustificationType (at least).

To check if everything is correct, try to get data from your edmx, and see if you have correct distinct data.

Sometimes (and mainly with views, which don't have a "real" primary key in db), the primary keys (or the properties which makes each row distinct) are badly retrieved, and you get this kind of confusing results.

# gcc - gcc 可以返回一个值吗？

> ID：12259925
> 
> 赞同：1
> 
> 时间：2012-09-04T08:52:14.537
> 
> 标签：gcc

我怎么知道 gcc 的返回值？

例如，我有一个 c 文件 test.c，我只是`gcc test.c`在终端中运行。如果当前编译遇到一些错误，它可以报告，但是我如何知道 gcc 这次编译过程的返回值？

现在我知道`1`手段有错误，但`0`不仅会返回警告而且会编译OK，如果有错误我该怎么办。如果我使用`-Werror`，它可能会停止编译，我不想停止编译

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T08:53:25.953

返回变量在 shell 变量`$?`中。

```
> gcc bla.c
> echo $?
0 
```

编辑：在 Windows 上，它位于[%errorlevel%](https://stackoverflow.com/questions/334879/how-do-i-get-the-application-exit-code-from-a-windows-command-line)中。

# ios - 将应用程序更新到 iOS6

> ID：12259926
> 
> 赞同：11
> 
> 时间：2012-09-04T08:52:18.597
> 
> 标签：ios, xcode, ios6, app-store

未能在 Apple Developer 论坛上找到对此问题的准确回复。

与其他 Apple 开发人员一样，我将升级我们的应用程序以支持 iOS6 设备。我已经下载了支持 iOS6 SDK 的 XCode 4.5。

我知道我无法使用此 XCode 构建将我的应用程序版本提交到应用商店，但是：

1.  如果我使用 6.0 的部署目标重新编译和构建应用程序并修复所有已知问题，例如不推荐使用的方法等。当 Apple 发布适用于 iOS6 的 GM 时，任何构建是否也可以编译并与 iOS5 设备一起使用？

2.  我应该只提交部署目标为 5.0 的应用程序，还是无法在 iOS6 中运行？

3.  如果我使用新的 iOS6 功能，我的部署目标是否应该只是 iOS6？

（使困惑）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-04T09:02:21.943

由于这是一个关于支持多个 iOS 版本的非常通用的问题，并且不涵盖任何 iOS6 特定的内容（由 NDA 涵盖），所以我的回答如下：

> 如果我使用 6.0 的部署目标重新编译和构建应用程序并修复所有已知问题，例如不推荐使用的方法等。当 Apple 发布适用于 iOS6 的 GM 时，任何构建是否也可以编译并适用于 iOS5 设备？

原则上，是的，只要您没有使用任何仅限 iOS6 的功能或您正确使用了它（请参阅第三个问题的答案）。但是，如果您想确保一切正常，对运行 iOS5/4（或模拟器）的实际设备进行测试几乎是强制性的。

也有可能当前在较旧的 iOS 版本下运行的某些东西会在 iOS6 上中断（这可能会发生在添加了一些错误的情况下，但也可能会发生在一些错误已修复并且您的代码有错误的情况下）它自己的反击了前者的影响）。所以，测试才是王道。（感谢 rsswtmr 对此的评论）。

> 我应该只提交部署目标为 5.0 的应用程序，还是无法在 iOS6 中运行？

如果您的应用不使用任何仅限 iOS6 的功能，您可以指定 5.0 的部署目标（或者您使用正确，稍后阅读）；也就是说，这个设置不会破坏与iOS6的兼容性；

> 如果我使用新的 iOS6 功能，我的部署目标是否应该只是 iOS6？

它可以，但它不是唯一的方法。

如果您将部署目标指定为 iOS6，那么您可以在您的应用程序中自由使用任何仅限 iOS6 的功能而无需担心。应用商店机制将阻止您的应用安装在任何较旧的设备上，您将是安全的。

另一方面，如果您将部署目标指定为 iOS5 或更早版本，那么您仍然可以在应用程序中使用任何仅限 iOS6 的功能，但您应该通过“保护”任何仅限 iOS6 功能的使用来正确支持旧版本的 iOS并为 iOS5 提供后备。

这意味着以下内容：假设您将使用`featureA`仅在 iOS6 上可用；你可以做的是：

1.  检查该功能在运行时是否可用（例如，类 respondsToSelector 等）；

2.  保护您的代码，`#ifdef`以便仅在可能的情况下对其进行编译；

3.  如果 1\. 的检查失败，请为旧 iOS 版本定义出路。

看看这篇关于[支持多个 iOS 版本](http://cocoawithlove.com/2010/07/tips-tricks-for-conditional-ios3-ios32.html)的帖子。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T09:11:52.800

将“Base SDK”设置为**最新的 iOS**，将“iOS 部署目标”设置为您计划支持的旧版本（例如**iOS 5.0**）。

添加条件代码以使用最新 iOS 中可用的功能，而不会在支持的旧版本中崩溃。

[本 Apple 指南](http://devimages.apple.com/iphone/resources/introductiontouniversalapps.pdf)中的“条件编码”部分可能会有所帮助。还要检查 SO 中有关该主题的其他问题。

# java - Java中有专门的语言类吗？

> ID：12259927
> 
> 赞同：3
> 
> 时间：2012-09-04T08:52:23.130
> 
> 标签：java, coding-style, locale, code-cleanup

在重构我的一个项目时，我将所有语言 ISO 代码（如`"en"`和`"de"`字符串）替换为`Locale`类及其常量`Locale.ENGLISH`，`Locale.GERMAN`以使其更节省重构并最大限度地减少错误源。然后我使用 locale.getLanguage() 将 ISO 代码作为字符串获取。

我用这种方法遇到的问题是国家和变量字段形式**的语言环境类的开销。**我正在考虑**编写自己的语言类**来避免这种开销。

使用自定义类是一种好习惯，还是已经有一个`Language`我错过的专用类？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T08:55:39.183

You missed one of the basic priciples of programming: Don't reinvent the wheel.

Yes, the `Locale` class can do more than you need, but the overhead is usually extremely negligible. Also, using it enables other coders to instantly understand that part of your code.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T08:57:43.113

开销并没有那么高。这得到了每个语言环境。

```
long start = System.currentTimeMillis();
for (Locale l : Locale.getAvailableLocales())
    l.toString();
long time = System.currentTimeMillis() - start;
System.out.println(time + " ms."); 
```

印刷

```
15 ms. 
```

# android - 连接 EditText 给出 NullPointer 错误

> ID：12259932
> 
> 赞同：0
> 
> 时间：2012-09-04T08:52:47.047
> 
> 标签：android

这是我的[代码](http://www.fpaste.org/HzoM/)。

我在 logcat 中收到以下错误：

```
09-04 08:32:40.524: E/AndroidRuntime(644): FATAL EXCEPTION: main
09-04 08:32:40.524: E/AndroidRuntime(644): java.lang.NullPointerException
09-04 08:32:40.524: E/AndroidRuntime(644):  at com.vodacom.nollyviewer.Searchnolly.SearchVideos(Searchnolly.java:109)
09-04 08:32:40.524: E/AndroidRuntime(644):  at com.vodacom.nollyviewer.Searchnolly$1.onClick(Searchnolly.java:71)
09-04 08:32:40.524: E/AndroidRuntime(644):  at android.view.View.performClick(View.java:2485) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:12:20.857

Do all the initialization in oncreate() of activity. Your code should look like this

```
this.buttonProducer = (Button) this.findViewById(R.id.buttonProducer);
    FixedText1 = (EditText) findViewById(R.id.FixedText1);
    FixedText2 = (EditText) findViewById(R.id.FixedText2);
    buttonProducer = (Button) findViewById(R.id.buttonProducer);
    editTextProducer = (EditText) findViewById(R.id.editTextProducer);
    ConcatFixedTexts = (EditText) findViewById(R.id.ConcatFixedTexts);
    resultdisplay = (EditText) findViewById(R.id.resultdisplay); 
```

And also remove their initialization from searchVideos() method.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:07:53.443

您需要在 OnCreate() 中执行此操作

```
resultdisplay = (EditText)findViewById(R.id.resultdisplay); 
```

如果您不想显示结果显示，可以将其可见性设置为“View.GONE”或“View.INVISIBLE”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:09:02.577

由于您在 onclicklistener 中声明了 edittext，因此上下文不正确，它将为 null。因此，请尝试在 oncreate 本身中声明所有 edittexts。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T09:09:51.830

在您的代码中定义如下：

```
private String searchresult=""; 
```

可能是您没有初始化您的字符串 searchresult 字符串，这就是您收到此类错误的原因。希望它会帮助你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T09:18:59.080

异常已被捕获，即 onClick() 第 71 行中提到的显示它是 SAXException，因此请检查方法 SearchVideos() 中与 SAXException 相关的代码，因为这是在第 71 行抛出由 catch 捕获的异常的方法。

# django - 为什么当 Memcached 宕机时 Django 会失败？

> ID：12259942
> 
> 赞同：2
> 
> 时间：2012-09-04T08:53:28.513
> 
> 标签：django

我正在运行一个带有用于缓存层的 memcached 后端的 Django 1.3 实例，最近我一直在尝试为应用程序调试数据库的一部分，但是每当我使 memcached 服务器脱机时，我都会收到以下错误：

```
AttributeError at /joinerysoft/contacts/ajax/all/None/None/
'NoneType' object has no attribute 'sendall'
Request Method: GET
Request URL:    http://joinerysoft-directory.co.uk/joinerysoft/contacts/ajax/all/None/None/
Django Version: 1.3.1
Exception Type: AttributeError
Exception Value:    'NoneType' object has no attribute 'sendall'
Exception Location: /usr/lib/python2.7/dist-packages/memcache.py in send_cmd, line 1112
Python Executable:  /usr/bin/python
Python Version: 2.7.3 
```

我认为 memcached + django 最吸引人的部分是，如果 memcache 消失，您的网站在返回之前仍然可以运行（尽管已经瘫痪）。我确实使用 Django 的内置缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:23:13.767

首先，这不是 Django 的错误，而是 python-memcached 库的错误。其次，我认为这种行为是一致的。如果您将 Django 配置为使用 memcached 并且它出现故障，那么它应该会抛出一个错误！假设您的站点严重依赖缓存，您还想尽快知道是否发生了什么事情，而不是几天后发现您的整个数据库也关闭了，因为那里有太多的查询（例如）。

有一些方法可以定义回退缓存或执行其他解决方法。看看这个类似的问题：[有没有办法忽略 Django 中的缓存错误？](https://stackoverflow.com/questions/4515886/is-there-a-way-to-ignore-cache-errors-in-django)

# c# - 在后面的代码中使用 AJAX 错误传递 json 对象

> ID：12259943
> 
> 赞同：2
> 
> 时间：2012-09-04T08:53:34.313
> 
> 标签：c#, javascript, asp.net, ajax, json

我创建了一个 HTML 文件，该文件将尝试将 json 值传递给我的 asp 页面，但我的 asp 出现错误。我的 HTML 工作正常并传递值 {'a':'a','b':'b'}，但 asp 页面无法使用该值。

1.  这是我的 HTML 代码并显示 JSON 值 {'a':'a','b':'b'}：

    ```
     <html>
      <head>
      <title></title>

      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
      <script type="text/javascript"> 

        $(document).ready(function() {
        $('#btnAdd').click(function() { 

            var json_obj = "{'" + $('#t1').val() + "' : '" + $('#p1').val() + "','" + $('#t2').val() + "' : '" + $('#p2').val() + "'}"; 

            $.ajax({ 
                type: 'POST', 
                url: 'http://localhost/Base_Data/InsertItem.aspx', 
                contentType: 'application/json; charset=utf-8', 
                data: json_obj, 
                dataType: 'json', 
                success: function(msg) { 
                    alert('Success!'); 
                }, 
                error: function(msg) { 
                    alert('Error!'); 
                } 
            }); 
        }); 
      }); 
      </script> 
      </head>
      <body>

    <div> 
    Type: 1: <input type="text" id="t1" /> 
    Property 1: <input type="text" id="p1" /> 

    Type 2: <input type="text" id="t2" /> 
    Property 2: <input type="text" id="p2" /> 
    <input type="button" id="btnAdd" value="Add object!" /> 

    </div> 

    </body>
    </html> 
    ```

2.  这是我背后的 ASP 页面代码：

    ```
    public class Test
    {
    public Test(string json)
    {

        var serializer = new JavaScriptSerializer();
        var result = serializer.DeserializeObject(json);

        var first = int.Parse(result["t1"]);
        var second = int.Parse(result["t2"]); 
     }

      public string first { get; set; }
      public string second { get; set; }
     } 
    ```

任何答复将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:55:51.433

When passing data to the `$.ajax` method, the `data` parameter is generally a javascript object with key/value pairs and those key/value pairs are put into a query string as in `foo=bar&person=ted`. Putting a JSON string in there and then trying to parse that JSON in your server is the hard way to send a couple values to your server and it's a lot more work to parse it on the server too.

Using the built in data capabilities of the `$.ajax` method will put the data into query string format and your server can automatically parse that out too - all without writing any new code on client or server.

From the [jQuery docs](http://api.jquery.com/jQuery.ajax/):

> data
> 
> Data to be sent to the server. It is converted to a query string, if not already a string. It's appended to the url for GET-requests. See processData option to prevent this automatic processing. Object must be Key/Value pairs. If value is an Array, jQuery serializes multiple values with same key based on the value of the traditional setting (described below).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:32:12.773

我会避免手动生成纯 JSON，因为它总是会导致问题，尝试使用[JSON.stringify 之](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)类的东西，这将使您的数据构造更容易，因为您可以使用正确的 JS 对象，例如

```
var jsonObj = { t1: $('#t1').val(), p1: $('#p1').val(), t2: $('#t2').val(), p2: $('#p2').val() };

$.ajax({  
    type: 'POST',  
    url: 'http://localhost/Base_Data/InsertItem.aspx',  
    contentType: 'application/json; charset=utf-8',  
    data: JSON.stringify(jsonObj),  
    dataType: 'json',  
    success: function(msg) {  
        alert('Success!');  
    },  
    error: function(msg) {  
        alert('Error!');  
    }  
}); 
```

然后在服务器端将您的 json 反序列化为一个`dynamic`对象并取回数据：

```
public Test(string json)  
{  
    var serializer = new JavaScriptSerializer();  
    var result = serializer.Deserialize<dynamic>(json);  

    var first = int.Parse(result["t1"]);  
    var second = int.Parse(result["t2"]);   
} 
```

**更新**

根据您的评论，您将无法使用`dynamic`对象，您应该能够将您的 JSON 反序列化为`Dictionary`例如

```
var result = serializer.Deserialize<Dictionary<string, string>>(json); 
```

# authentication - mod_authz_ldap 子树查询配置失败，改为搜索 LDAP 树的根

> ID：12259944
> 
> 赞同：1
> 
> 时间：2012-09-04T08:53:37.350
> 
> 标签：authentication, configuration, ldap, apache

我正在尝试查询一个奇怪的 LDAP 结构，我需要对其进行身份验证。我们的应用程序使用 REMOTE_USER 变量来确定用户。我无权访问 LDAP 目录，因此看不到它的日志。

该结构需要我查询树的一个子部分，由编写用于测试 LDAP 查询的 Perl 脚本演示（它可以正常工作并按预期返回用户列表）

```
use Net::LDAP;
use Net::LDAP::Entry;

$ldap = Net::LDAP->new( 'ldapdevel.my.edu.au' ) or die "$@";
$mesg = $ldap->bind( 'uid=binduser,o=my.edu.au', password => 'bindpass' );

if( $mesg->code ) {
               die $mesg->error;
 }

$mesg = $ldap->search( # perform a search
        base   => "o=my.edu.au",
        filter => "cn=devraj"
      );

$mesg->code && die $mesg->error;

foreach $entry ($mesg->entries) { 
             $entry->dump;
} 
```

我的 Apache 配置在 VirtualHost 条目中有以下内容，旨在模仿 Perl 脚本中描述的相同查询。

```
<Location />

    AuthType Basic
    AuthName "My Application"

    AuthBasicProvider ldap
    AuthzLDAPAuthoritative off
    AuthLDAPBindPassword bindpass

    AuthLDAPBindDN "uid=binduser,o=my.edu.au"
    AuthLDAPUrl "ldap://ldapdevel.my.edu.au/o=my.edu.au?cn?one"

    Require valid-user

</Location> 
```

我还可以确认 Apache 确实成功绑定到 LDAP 目录。

Apache 错误日志，用于 LDAP 身份验证的消息，这表明 URI 是 / 因此 Apache 正在搜索目录的顶部，而不是 o=my.edu.au 的子树

```
[Tue Sep 04 16:22:01 2012] [notice] Apache/2.2.15 (Unix) DAV/2 mod_wsgi/3.2 Python/2.6.6 configured -- resuming normal operations
[Tue Sep 04 16:22:20 2012] [info] [client xxx.xxx.xxx.xxx] [26064] auth_ldap authenticate: user devraj authentication failed; URI / [User not found][No such object]
[Tue Sep 04 16:22:20 2012] [error] [client xxx.xxx.xxx.xxx] user devraj not found: 
```

我意识到问题出在 AuthLDAPUrl，我的问题是我在 AuthLDAPUrl 中做错了什么，还是应该使用另一个指令？

我还尝试将每个参数分别配置为 mod_authz_ldap，如下所示：

```
<Location />

    AuthType Basic
    AuthName "My LDAP authenticated app"

    AuthzLDAPLogLevel debug

    AuthBasicProvider ldap
    AuthBasicAuthoritative off
    AuthzLDAPAuthoritative off

    AuthzLDAPBindPassword bindpass
    AuthzLDAPBindDN "uid=binduser,o=my.edu.au"

    AuthzLDAPMethod ldap
    AuthzLDAPServer ldapdevel.my.edu.au
    AuthzLDAPUserBase o=my.edu.au
    AuthzLDAPUserKey cn
    AuthzLDAPUserScope base
    AuthLDAPRemoteUserAttribute cn

    Require valid-user

</Location> 
```

这确实有效！但是... Apache 尝试绑定为尝试登录的用户，这显然失败了。如果我使用绑定用户凭据登录，它会通过身份验证，错误日志提取：

```
[Fri Sep 07 14:14:27 2012] [error] [client xxx.xxx.xxx.xxx] [15628] bind as cn=devraj,l=X,ou=Students,o=my.edu.au failed: 49
[Fri Sep 07 14:14:27 2012] [error] [client xxx.xxx.xxx.xxx] [15628] basic LDAP authentication of user 'devraj' failed
[Fri Sep 07 14:14:27 2012] [error] [client xxx.xxx.xxx.xxx] access to / failed, reason: verification of user id 'devraj' not configured 
```

谢谢你的时间。

# php - PHP:DOMDocument::load(): I/O 警告：加载外部实体失败

> ID：12259953
> 
> 赞同：1
> 
> 时间：2012-09-04T08:54:28.240
> 
> 标签：php

```
class restRendering
{
    public $RestUrl='http://www.myweather2.com/developer/forecast.ashx?uac=AnwWoM6K2.&output=xml&query=10591';
    public $XSLTPath="receipe.xsl";

    //setter method for test url

        public function setRestUrl( $value )  
        {  
            $this->RestUrl = $value;  
        }  
        public function setXSLTPath( $value ) 
        {
            $this->XSLTPath = $value;  
        }

        //It renders the iframe with base url and path.
        public function render(){
             //load the XML 
                  $xml_Doc = new DOMDocument();

                  if($xml_Doc->load($this->RestUrl))
                  {
                          //load the XSL 
                          $xsl= new DOMDocument();
                          $xsl->load($this->XSLTPath) or die("can not load  XSLT file"); 

                         $xslt = new XSLTProcessor($xsl);
                         $xslt->importStyleSheet($xsl);

                            print $xslt->transformToXML( $xml_Doc ) or die("Trasform Error");
                    }
                else{
                        echo "Can not load the url";
                    } 

        }   //End of Render method.

} 
```

执行时出现此错误：

> 警告：DOMDocument::load(): php_network_getaddresses: getaddrinfo failed: 没有这样的主机是已知的。在 D:\xampp\htdocs\sweet\restRendering.php 第 25 行
> 
> 警告：DOMDocument::load(http://www.myweather2.com/developer/forecast.ashx?uac=AnwWoM6K2.&output=xml&query=10591)：无法打开流：php_network_getaddresses：getaddrinfo 失败：不知道这样的主机。在 D:\xampp\htdocs\sweet\restRendering.php 第 25 行
> 
> 警告：DOMDocument::load(): I/O 警告：无法在 D:\ 中加载外部实体“http://www.myweather2.com/developer/forecast.ashx?uac=AnwWoM6K2.&output=xml&query=10591”第 25 行的 xampp\htdocs\sweet\restRendering.php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:01:32.427

根据这个错误：

> 警告：DOMDocument::load(): php_network_getaddresses: getaddrinfo failed: 没有这样的主机是已知的。在 D:\xampp\htdocs\sweet\restRendering.php 第 25 行

您的服务器的 DNS 有问题。它无法连接，`www.myweather2.com`因为它无法将其转换为 IP 地址。

尝试

```
nslookup www.myweather2.com 
```

看看结果如何。当您解决该问题时，您的脚本可能会起作用。

# javascript - javascript 站点根目录

> ID：12259958
> 
> 赞同：13
> 
> 时间：2012-09-04T08:54:35.210
> 
> 标签：javascript, path, document-root

我有这个站点，我需要找到根文件夹/加上它的实际工作文件夹。

我的问题是，在开发过程中，我的本地服务器中有该文件夹，而该文件夹又位于其自己的文件夹中：

然后在网上，我将开发站点放在一个文件夹中，因此可以在现场制作等之前对其进行测试。

本地服务器：localhost/mytestSiteA/...

实时服务器测试文件夹：www.asite.com/devbuild/....

现在我可以通过

```
 document.location.hostname 
```

但是我需要在此之后添加文件夹名称，以便在开发模式下可以加载内容等。

本地服务器

```
 document.location.hostname + '/mytestSiteA/' 
```

现场测试现场

```
 document.location.hostname + '/devbuild/' 
```

但我的问题是，有没有一种简单的方法来获得这个内部文件夹，而不是设置取决于本地开发、实时开发或实时模式的变量，因为这可能会很痛苦，并且动态地获得当前的内部文件夹会很好而不是手动更改等，以便我可以正确添加我的路径。

也将有所帮助，就好像我在其中有一个文件夹也加载了 js 脚本它可以获得它的完整路径。

本地服务器：localhost/mytestSiteA/subsection/...

实时服务器测试文件夹：www.asite.com/devbuild/subsection/...

我希望我已经使这变得易于理解和表达。硅

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-04T09:01:13.320

尝试[`switch`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch)

```
switch (document.location.hostname)
{
        case 'asite.com':
                          var rootFolder = '/devbuild/'; break;
        case 'localhost' :
                          var rootFolder = '/mytestSiteA/'; break;
        default :  // set whatever you want
} 
```

然后使用

```
var root = document.location.hostname + rootFolder; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-21T23:26:09.170

这就是在`switch`条款之后对我有用的东西。

```
var root = location.protocol + '//' + location.host + rootFolder; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:59:13.240

您可以将 url localhost/devbuild 映射到 localhost/mytestSiteA 并使用第一个 url 在本地测试您的站点。在你的 javascript 中，你总是可以假设 devbuild 文件夹。这样您就不必更改任何其他内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-15T22:17:15.970

如果有人需要后退一步

```
location.href.slice(0,location.href.lastIndexOf("/")) 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2016-04-07T12:56:01.327

使用相对路径，因此您无需访问根文件夹

这不适用于链接中带有文件夹的友好网址的网站

# visual-studio-2010 - 每个代码的“程序无法启动，因为缺少 msvcp100.dll”

> ID：12259960
> 
> 赞同：12
> 
> 时间：2012-09-04T08:54:44.313
> 
> 标签：visual-studio-2010, msvcr100.dll

这个错误影响了我的训练计划。

![程序无法启动，因为...](../Images/bcddc4f55415a08f4058421bbbd9ced6.png)

每次我在我的 VS2010 中创建任何 C++ 应用程序时，它在我的机器上运行良好，但如果我在不同的机器上运行它，它会以这个错误开始。如果我在系统文件夹中复制 msvcp100.dll 就会出错，然后它会喊出其他一些 DLL。它需要大约 5-6 个不同的 DLL。

最烦人的部分是即使我编写了一个简单的基于控制台的加法程序，它也会给出这个错误。（我不应该但是）如果我设计一些花哨的表格和所有的东西，我会同意...但是对于简单的加法程序？？？？

我是否错过了设置中的某些内容？还是VS2010的错？？

有点相关的问题：[this](https://stackoverflow.com/questions/8215143/the-program-cant-start-because-msvcp80-dll-is-missing)但是这个问题似乎不同

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-15T15:52:49.220

默认情况下，MSVC 项目设置为链接到动态运行时库，该库生成对可视 C++ 运行时可再发行组件的依赖关系。正如您已经发现的那样，不能保证这种依赖关系，因此您的安装实用程序必须首先安装 Visual c++ 运行时。

您可以通过更改项目设置来避免这种情况。加载项目属性并转到：“配置属性”/“C/C++”/“代码生成”

*   在标记为“运行时库”的项目中，选择“多线程 (/MT)”
*   对于发布版本“多线程调试（/MTd）”为调试版本。

在执行此操作时必须小心，您的应用程序链接的所有其他库也会针对静态运行时进行编译。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T09:00:13.480

如果要运行应用程序，则需要安装Visual [C++ 库。](http://www.microsoft.com/en-us/download/details.aspx?id=5555)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T05:23:37.953

使用编译器选项更改运行时库对我有用（“配置属性”/“C/C++”/“代码生成”。在标记为“运行时库”的项目中，选择“多线程（/MT）”进行发布版本和调试版本的“多线程调试 (/MTd)”）。我确实必须同时进行调试和发布才能使发布工作。不知道为什么（可能我第一次没有正确）。

注意：我是在 Windows 7 上使用 VC2010 Express 版本来编译的。我在旧的 XP 机器上进行了测试。另一个注意事项： http: [//msdn.microsoft.com/en-us/library/2kzt1wy3 (v=vs.100).aspx 上的 MS 信息](http://msdn.microsoft.com/en-us/library/2kzt1wy3(v=vs.100).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-31T07:42:46.063

如果您在计算机上安装了新的 Windows 副本或重新安装了一个，那么您将遇到名为“**程序无法启动，因为您的计算机中缺少 MSVCP100.dll。尝试重新安装程序以解决问题。** “ 在你的电脑。

此错误背后的基本原因是重新安装或安装 Windows 操作系统的新副本时未安装 Visual C++。为了检查您的 PC 上是否安装了 Visual C++，请打开**控制面板 → 所有程序和功能**，然后在软件列表中搜索**Visual C++ 。**如果您没有找到那里安装的软件，那么您必须安装它。

我建议，首先，安装**Visual C++ 2010**包并检查它是否解决了 msvcp100.dll 丢失错误。如果 Microsoft Visual C++ 2010 未解决问题，请安装 Microsoft Visual C++的**2013**或**2015 版本**。以下是适用于 x86 和 x64 架构的 Microsoft Visual C++ 的下载链接列表：

*   Microsoft Visual C++ 2010 SP1 可再发行包 (x64)
*   Microsoft Visual C++ 2005 SP1 可再发行包 (x86)
*   适用于 Visual Studio 2013 的 Visual C++ 可再发行包
*   适用于 Visual Studio 2015 的 Visual C++ 可再发行组件

→[最新支持的 Visual C++ 下载](https://support.microsoft.com/en-in/kb/2977003)

我希望，现在您能够修复“程序无法启动，因为您的计算机上**缺少 MSVCP100.dll**错误。要了解更多详细信息，您可以按照[本指南](http://www.zerodollartips.com/the-program-cant-start-because-msvcr100-dll-is-missing-from-your-computer-fix/)进行操作。

谢谢

# xml - XSL - 从文本文件创建格式良好的 xml

> ID：12259961
> 
> 赞同：1
> 
> 时间：2012-09-04T08:54:48.657
> 
> 标签：xml, xslt, xslt-2.0

我有一个管道分隔的文本文件，如下所示，我需要使用 xsl 将其转换为格式良好的 xml 结构（如下所示的示例）。下面的 xsl 是我解决此问题的（最新）尝试 - 但是当逐行遍历文件时，我似乎无法找到将 002 级元素封装在 001 级中的方法，即保持父子关系。有人可以帮忙吗？

管道分隔文件 - 输入

```
001|XXX|YYY
002|AAA|BBB
002|CCC|DD
001|EEF|XXX
002|HHH|GGG 
```

XML 文件 - 所需的输出

```
<root>
   <level001>
            <elem name="field1">001</elem>
            <elem name="field2">XXX</elem>
            <elem name="field3">YYY</elem>
            <level002>
                           <elem name="field1">002</elem>
                           <elem name="field2">AAA</elem>
                           <elem name="field3">BBB</elem>
             </level002>
             <level002>
                        <elem name="field1">002</elem>
                        <elem name="field2">CCC</elem>
                        <elem name="field3">DD</elem>
              </level002>
    </level001>
    <level001>
                 <elem name="field1">001</elem>
                 <elem name="field2">XXX</elem>
                <elem name="field3">YYY</elem>
                <level002>
                         <elem name="field1">002</elem>
                         <elem name="field2">HHH</elem>
                         <elem name="field3">GG</elem>
               </level002>
    </level001>
</root> 
```

当前 XSL

```
<xsl:variable name="Cols">
<col>field1,1</col>
<col>field2,2</col>
<col>field3,3</col> 
</xsl:variable>

 <xsl:template match="/" name="main">
<xsl:choose>
    <xsl:when test="unparsed-text-available($pathToCSV, $encoding)">
       <xsl:variable name="csv" select="unparsed-text($pathToCSV, $encoding)" />
       <xsl:variable name="lines" select="tokenize($csv, '\n')" as="xs:string+" />
       <root>
       <xsl:for-each select="$lines[position() &gt; 0]">
        <xsl:if test="translate(., '&#160; &#9;&#10;&#13;',  '') != ''">
            <level001>
            <xsl:variable name="line" select="." />
            <xsl:variable name="columns" select="tokenize(.,'\|')" as="xs:string+"/>    
            <xsl:choose>
                <xsl:when test="$columns[1]='001'">
                    <xsl:for-each select="$Cols/col">
                        <xsl:variable name="column" select="number(substring-after(.,','))"/>
                        <elem name="{substring-before(.,',')}">
                            <!-- trims the whitespace from the beginning and the ending of the value -->
                            <xsl:value-of select="replace(replace($columns[$column],'\s+$',''),'^\s+','')"/>
                        </elem>
                    </xsl:for-each>
                </xsl:when>
                <xsl:when test="$columns[1]='002'">
                    <level002>
                    <xsl:for-each select="$Cols/col">
                        <xsl:variable name="column" select="number(substring-after(.,','))"/>
                        <elem name="{substring-before(.,',')}">
                            <!-- trims the whitespace from the beginning and the ending of the value -->
                            <xsl:value-of select="replace(replace($columns[$column],'\s+$',''),'^\s+','')"/>
                        </elem>
                    </xsl:for-each>
                    </level002>
                </xsl:when>
            </xsl:choose>                               
            </level001>
        </xsl:if>
       </xsl:for-each>
       </root>
    </xsl:when>         
</xsl:choose> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:43:04.830

您可以在这里找到基本相同问题的解决方案：

[http://www.saxonica.com/papers/ideadb-1.1/mhk-paper.xml](http://www.saxonica.com/papers/ideadb-1.1/mhk-paper.xml)

核心是递归分组模板：

```
<xsl:template name="process-level">
  <xsl:param name="population" required="yes" as="element()*"/>
  <xsl:param name="level" required="yes" as="xs:integer"/>
  <xsl:for-each-group select="$population" 
       group-starting-with="*[xs:integer(@level) eq $level]">
    <xsl:element name="{@tag}">
      <xsl:copy-of select="@ID[string(.)], @REF[string(.)]"/>
      <xsl:value-of select="normalize-space(@text)"/>
      <xsl:call-template name="process-level">
        <xsl:with-param name="population" 
                        select="current-group()[position() != 1]"/>
        <xsl:with-param name="level" 
                        select="$level + 1"/>
      </xsl:call-template>
    </xsl:element>
  </xsl:for-each-group>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:51:38.693

我将首先将平面文本转换为平面 XML 结构，然后将其与 分组`for-each-group group-starting-with`，如以下代码示例所示：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:mf="http://example.com/mf"
  exclude-result-prefixes="mf xs"
  version="2.0">

<xsl:param name="text-url" as="xs:string" select="'test2012090401.txt'"/>
<xsl:param name="sep" as="xs:string" select="'\|'"/>
<xsl:param name="field" as="xs:string" select="'field'"/>

<xsl:output indent="yes"/>

<xsl:function name="mf:group" as="node()*">
  <xsl:param name="nodes" as="node()*"/>
  <xsl:param name="level" as="xs:integer"/>
  <xsl:for-each-group select="$nodes" group-starting-with="line[xs:integer(elem[1]) eq $level]">
    <xsl:element name="level{*[1]}">
      <xsl:copy-of select="*"/>
      <xsl:sequence select="mf:group(current-group() except ., $level + 1)"/>
    </xsl:element>
  </xsl:for-each-group>
</xsl:function>

<xsl:template name="main">
  <xsl:variable name="flat">
    <xsl:for-each select="tokenize(unparsed-text($text-url), '\r?\n')">
      <line>
        <xsl:for-each select="tokenize(., $sep)">
          <elem name="{$field}{position()}">
            <xsl:value-of select="."/>
          </elem>
        </xsl:for-each>
      </line>
    </xsl:for-each>
  </xsl:variable>
  <root>
    <xsl:sequence select="mf:group($flat/line, 1)"/>
  </root>
</xsl:template>

</xsl:stylesheet> 
```

当我使用 Saxon 9 应用该样式表时`java -jar saxon9he.jar -it:main -xsl:sheet.xsl`，我得到的结果是

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <level001>
      <elem name="field1">001</elem>
      <elem name="field2">XXX</elem>
      <elem name="field3">YYY</elem>
      <level002>
         <elem name="field1">002</elem>
         <elem name="field2">AAA</elem>
         <elem name="field3">BBB</elem>
      </level002>
      <level002>
         <elem name="field1">002</elem>
         <elem name="field2">CCC</elem>
         <elem name="field3">DD</elem>
      </level002>
   </level001>
   <level001>
      <elem name="field1">001</elem>
      <elem name="field2">EEF</elem>
      <elem name="field3">XXX</elem>
      <level002>
         <elem name="field1">002</elem>
         <elem name="field2">HHH</elem>
         <elem name="field3">GGG</elem>
         <level/>
      </level002>
   </level001>
</root> 
```

样式表有一个名为`text-url`纯文本文件的参数，您可以在运行样式表时设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:19:30.857

好吧，您正在遍历每一行，并且`level001`在完成该行时已经关闭了标签。为什么不尝试类似（伪代码）：

*   对于每一行
*   如果行是 level001
*   打印`<level001>`
*   获取下一级索引001
    *   对于此行和下一个 level001 行之间的每个 level002
    *   打印`<level002>`
    *   level002的打印体
    *   打印`</level002>`
*   打印`</level001>`

# angularjs - How do I get a directive to be linked in dynamically loaded HTML in AngularJS?

> ID：12259963
> 
> 赞同：4
> 
> 时间：2012-09-04T08:55:15.047
> 
> 标签：angularjs

> **Possible Duplicate:**
> [AngularJS + JQuery : How to get dynamic content working in angularjs](https://stackoverflow.com/questions/11771513/angularjs-jquery-how-to-get-dynamic-content-working-in-angularjs)

I have an application based on AngularJS 1.0.1 and Bootstrap 2.0.2.

The application dynamically loads views; I use `angular.bootstrap()` to compile and link these fragments, and AngularJS is appears to be working fine, linking to my model and responding to events.

I want to put a Bootstrap tooltip on some dynamic elements, and have created a directive for this (using the approach laid out by [AlexFigueiredoo](http://jsfiddle.net/AlexFigueiredoo/cRr9K/4/)). This approach works well when the AngularJS view is on static HTML as you can see from the jsFiddle.

However, when the same code is used in an environment where the HTML is dynamically loaded, the popup is not working. Investigating, the 'tooltip' directive is now not being linked.

I have a [test-case](http://jsfiddle.net/aalcock/hFGb7/10/) on jsFiddle. Do bring up your JS console to view the messages.

Note that console.log never shows the directive factory being called, let alone linked.

Am I doing something wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:07:14.123

我将工具提示属性添加到标签的末尾，它对我有用。看起来您忘记了实时示例中的指令？

[http://jsfiddle.net/CcRrN/](http://jsfiddle.net/CcRrN/)

# c# - 为什么我在 RestSharp 中的初始调用真的很慢？但之后的其他人非常快

> ID：12259964
> 
> 赞同：13
> 
> 时间：2012-09-04T08:55:21.960
> 
> 标签：c#, .net, wpf, restsharp

我正在使用 RESTSHARP 调用 WEB API，它们工作正常。但是，对 API 的初始调用（不管它是什么调用）有时可能需要长达 10 秒才能获得响应。之后的所有其他呼叫都非常快。有谁知道解决这个问题的方法？

我正在运行 WPF 4.0 应用程序

代码：

```
var client = new RestClient(apiAddress);
var request = new RestRequest(Method.GET);

IRestResponse response = client.Execute(request); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-17T14:23:11.080

很可能是网络设置导致了这个问题。我最近遇到了同样的问题，事实证明，在使用`HttpWebRequest`或 RestSharp 时，它正在尝试一些自动配置来寻找代理服务器。

在 Internet Explorer 中打开网络设置并禁用本地网络的自动配置。就我而言，这也解决了 RestSharp 中第一个请求的延迟。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-08T14:08:22.680

我曾尝试过@skrause 的回答，但这对我不起作用。我花了很多时间，最后我解决了它。这是我的不满。

```
public class SimpleWebProxy : IWebProxy
{
    public ICredentials Credentials { get; set; }

    public Uri GetProxy(Uri destination)
    {
        return destination;
    }

    public bool IsBypassed(Uri host)
    {
        // if return true, service will be very slow.
        return false;
    }

    private static SimpleWebProxy defaultProxy = new SimpleWebProxy();
    public static SimpleWebProxy Default
    {
        get
        {
            return defaultProxy;
        }
    }
}

var client = new RestClient();
client.Proxy = SimpleWebProxy.Default; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-03T13:49:34.370

试图摆脱自动配置来寻找代理服务器

```
System.Net.WebRequest.DefaultWebProxy = null; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-22T11:21:47.377

如果您在连接字符串之后在 app.config 中使用 winforms 等：

```
<system.net>
  <defaultProxy enabled="true">
    <proxy usesystemdefault="True"/>
  </defaultProxy>
</system.net> 
```

# c# - Best way to handle table with dynamic columns

> ID：12259965
> 
> 赞同：4
> 
> 时间：2012-09-04T08:55:30.433
> 
> 标签：c#, asp.net, .net

I usually deal with `Repeater` to generate tables in my asp.net pages, but now I need to handle **dynamic columns** in my table, so I wonder if there is a common approach to solve this issue using web controls.

I've never used `GridView`, so I don't know if this is better to render tables with dynamic columns? Can you suggest me wich is the more appropriate approach? Is there a way to achieve this using `Repeater`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:56:44.283

You could a `GridView` with [AutoGenerateColumns](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.autogeneratecolumns.aspx) set to true. It would inspect and add the columns in your `DataSource`

```
<asp:sqldatasource id="CustomersSource"
  selectcommand="SELECT CustomerID, CompanyName, FirstName, LastName FROM SalesLT.Customer"
  connectionstring="<%$ ConnectionStrings:AWLTConnectionString %>" 
  runat="server"/>

<asp:gridview id="CustomersGridView" 
  datasourceid="CustomersSource" 
  autogeneratecolumns="True"
  emptydatatext="No data available." 
  allowpaging="True" 
  runat="server" DataKeyNames="CustomerID">
</asp:gridview> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:45:51.473

Here's a quick hack to do this if you must use `Repeater`:

In the .aspx:

```
    <asp:Repeater ID='rptr' runat='server'>
        <HeaderTemplate>
            <table>
                <thead>
                  <tr>
                    <th>
                        Always visible header col
                    </th>
                    <th id='thHidable' runat='server' class='hideable'>
                        Hideable header col
                    </th>
                  </tr>
                </thead>
                <tbody>
        </HeaderTemplate>
        <ItemTemplate>
            <tr>
                <td>
                    Repeated col
                </td>
                <td id='tdHideable' runat='server' class='hideable'>
                    Hideable repeated col
                </td>
            </tr>
        </ItemTemplate>
        <FooterTemplate>
            </tbody></table>
        </FooterTemplate>
    </asp:Repeater>

```

In the code behind (assuming C# used):

```
 protected override void Page_Init()
    {
        this.rptr.ItemDataBound += new RepeaterItemEventHandler(rptr_ItemDataBound);
    }
    void rptr_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        RepeaterItem item = (RepeaterItem)e.Item;
        if (item.ItemType == ListItemType.Header)
        {
            HtmlTableCell thHidable = (HtmlTableCell)item.FindControl("thHidable");
            if (hideCondition)
            {
                // thHidable.Visible = false; // do not render, not usable by client script (use this approach to prevent data from being sent to client)
                thHidable.Style["display"] = "none"; // rendered hidden, can be dynamically shown/hidden by client script
            }
        }
        else if (item.ItemType == ListItemType.Item || item.ItemType == ListItemType.AlternatingItem)
        {
            HtmlTableCell tdHideable = (HtmlTableCell)item.FindControl("tdHideable");
            if (hideCondition)
            {
                // tdHideable.Visible = false; // do not render, not usable by client script (use this approach to prevent data from being sent to client)
                tdHideable.Style["display"] = "none"; // rendered hidden, can be dynamically shown/hidden by client script
            }
        }
    } 
```

(optional) If you want to dynamically show column on client side (assuming it was rendered), using jQuery (for brevity):

`$(".hideable").show();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:05:32.323

知道你想如何处理这种情况是非常重要的。

**情况 1：** 您有一个现有的表，并且不时添加列（虽然这不是很实用），您可以直接使用 GridView 并将 AutoGenerateColumns 绑定属性设置为 true。

**情况2**

您可以创建自己的 HTmlHelper 类来处理表格。为此，您可以访问以下帖子：

[如何从对象列表创建 MVC HtmlHelper 表](https://stackoverflow.com/questions/1891372/how-to-create-mvc-htmlhelper-table-from-list-of-objects)

如果您使用的是 MVC。

# mysql - making a query efficient

> ID：12259967
> 
> 赞同：0
> 
> 时间：2012-09-04T08:55:35.100
> 
> 标签：mysql, sql

I have written the following query in mysql for a reporting tool.

It is a inline select.The query gives me correct result but takes a long time to run. Can someone suggest any alternate way or writing the query to make it more efficient.

```
SELECT z.name1, (
       SELECT COUNT( AES_DECRYPT( l.answertext,  "aaa" ) ) 
       FROM household_data l
       INNER JOIN sms_household m 
             ON l.prim_key = m.hhid
       INNER JOIN sms_psu n 
             ON n.psu = m.psu
             AND n.state = m.state
             AND n.district = m.district
       INNER JOIN (
             SELECT p.prim_key, p.fieldname
             FROM household_data p
             WHERE p.basicname =  'Q05'
             AND AES_DECRYPT( p.answertext,  "aaa" ) =2
       ) women 
             ON l.prim_key = women.prim_key
             AND SUBSTR( l.fieldname, 5, 1 ) = SUBSTR( women.fieldname, 5, 1 ) 
             WHERE l.basicname =  'Q08' AND AES_DECRYPT( l.answertext,  "aaa" ) = 14
             AND z.psu = n.psu
             [AND n.state IN ( {state} )] 
             [AND n.district IN ( {district} )]
) female14, (
       SELECT COUNT( AES_DECRYPT( l.answertext,  "aaa" ) ) 
       FROM household_data l
       INNER JOIN sms_household m ON l.prim_key = m.hhid
       INNER JOIN sms_psu n 
             ON n.psu = m.psu
             AND n.state = m.state
             AND n.district = m.district
       INNER JOIN (
             SELECT p.prim_key, p.fieldname
             FROM household_data p
             WHERE p.basicname =  'Q05'
             AND AES_DECRYPT( p.answertext,  "aaa" ) =2
       ) women 
             ON l.prim_key = women.prim_key
             AND SUBSTR( l.fieldname, 5, 1 ) = SUBSTR( women.fieldname, 5, 1 ) 
             WHERE l.basicname =  'Q08' AND AES_DECRYPT( l.answertext,  "aaa" ) = 15
             AND z.psu = n.psu
             [AND n.state IN ( {state} )] 
             [AND n.district IN ( {district} )]
) female15, (
       SELECT COUNT( AES_DECRYPT( l.answertext,  "aaa" ) ) 
       FROM household_data l
       INNER JOIN sms_household m 
             ON l.prim_key = m.hhid
       INNER JOIN sms_psu n 
             ON n.psu = m.psu
                    AND n.state = m.state
                           AND n.district = m.district
       INNER JOIN (
             SELECT p.prim_key, p.fieldname
             FROM household_data p
             WHERE p.basicname =  'Q05'
             AND AES_DECRYPT( p.answertext,  "aaa" ) =2
       ) women 
             ON l.prim_key = women.prim_key
             AND SUBSTR( l.fieldname, 5, 1 ) = SUBSTR( women.fieldname, 5, 1 ) 
       WHERE l.basicname =  'Q08' AND AES_DECRYPT( l.answertext,  "aaa" ) =16
       AND z.psu = n.psu
       [AND n.state IN ( {state} )] 
       [AND n.district IN ( {district} )]
) female16, (
       SELECT count(AES_DECRYPT(household_data.answertext , "aaa")) * 100 / (
              SELECT count(AES_DECRYPT(household_data.answertext , "aaa"))
              FROM household_data 
              INNER JOIN sms_household
              INNER JOIN sms_psu
                    ON sms_psu.psu = sms_household.psu
                    AND sms_psu.state = sms_household.state
                    AND sms_psu.district = sms_household.district
              WHERE  basicname = 'Q07_year' AND z.psu= sms_psu.psu
              [AND sms_psu.state IN ( {state} )] 
              [AND sms_psu.district IN ( {district} )]
              )
       FROM household_data 
       INNER JOIN sms_household
       INNER JOIN sms_psu
             ON sms_psu.psu = sms_household.psu
             AND sms_psu.state = sms_household.state
             AND sms_psu.district = sms_household.district
       WHERE AES_DECRYPT(household_data.answertext , "aaa") = 9998 
       AND basicname = 'Q07_year'
       AND z.psu = sms_psu.psu
       [AND sms_psu.state IN ( {state} )] 
       [AND sms_psu.district IN ( {district} )]
) PercYearDontKnow
FROM household_data x
INNER JOIN sms_household y 
      ON x.prim_key = y.hhid
INNER JOIN sms_psu z 
      ON y.psu = z.psu
AND z.state = y.state
AND z.district = y.district
WHERE 1=1 
[AND y.state IN ( {state} )] 
[AND y.district IN ( {district} )
GROUP BY z.psu 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:52:19.983

我已经编辑了您的帖子，以使您的查询结构更加清晰。我建议你在自己的代码中做同样的事情。

重组后，很明显您正在重复一些查询以查找 female14、female15 和 female16。

也许您应该对该部分进行单独的查询，如下所示：

```
 SELECT n.name1, 
          n.psu, 
          AES_DECRYPT( l.answertext,  "aaa" ) AS answer, 
          COUNT(*) as count
   FROM household_data l
   INNER JOIN sms_household m 
         ON l.prim_key = m.hhid
   INNER JOIN sms_psu n 
         ON n.psu = m.psu
         AND n.state = m.state
         AND n.district = m.district
   INNER JOIN (
         SELECT p.prim_key, p.fieldname
         FROM household_data p
         WHERE p.basicname =  'Q05'
         AND AES_DECRYPT( p.answertext,  "aaa" ) =2
   ) women 
         ON l.prim_key = women.prim_key
         AND SUBSTR( l.fieldname, 5, 1 ) = SUBSTR( women.fieldname, 5, 1 ) 
         WHERE l.basicname =  'Q08' 
         AND AES_DECRYPT( l.answertext,  "aaa" ) = 14
         [AND n.state IN ( {state} )] 
         [AND n.district IN ( {district} )]
   GROUP BY n.psu, AES_DECRYPT( l.answertext,  "aaa" ) 
```

该查询应为您提供 Q08 答案及其编号的摘要。

然后，您可以单独查询 PercYearDontKnow。我相信之后重新组装数据仍然会比 frankenquery 更快。或者，将上述查询编码为 SQL 视图，并将其组装到更大的查询中。

顺便说一句，`COUNT( AES_DECRYPT( l.answertext, "aaa" ) )`您可以不用 . 而不是使用`COUNT(*)`. 这意味着将不经常调用解密函数。

您的另一个选择是`SELECT AES_ENCRYPT( "2", "aaa" )`在比较 Q08 时使用该值作为常数。这样，每个字段都不需要重复解密。

之后，我将遵循此处另一个答案中给出的优化建议，特别是查看执行路径以查看是否需要添加索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:07:08.000

丑陋的……我的建议：

*   [检查索引](http://dev.mysql.com/doc/refman/5.6/en/optimization-indexes.html)，看看可以做些什么来提高性能
*   [检查你的表结构](http://dev.mysql.com/doc/refman/5.6/en/optimizing-database-structure.html)，确保是最接近的那个
*   [检查你的加入](http://dev.mysql.com/doc/refman/5.6/en/optimization-internals.html)，看看有什么可以改变的
*   **始终** [检查执行计划](http://dev.mysql.com/doc/refman/5.6/en/explain.html)以进行性能监控

当然，在测试环境而不是生产环境中进行所有这些操作，可能会很混乱。另一个建议，一次做一个步骤，检查每个小修改以确保结果仍然相同。保存结果进行比较，最后得到好的结果。

# mysql - erlang-mysql-driver 源代码，为什么小字节序来获取结果

> ID：12259970
> 
> 赞同：1
> 
> 时间：2012-09-04T08:55:43.867
> 
> 标签：mysql, erlang

我是 erlang 的新手，正在学习[erlang-mysql-driver](http://code.google.com/p/erlang-mysql-driver/)。任何人都可以帮助我理解为什么在解析函数“get_lcb”中的二进制文件时这里的字节序很少？

以下是 mysql_conn.erl 中的代码

```
%%--------------------------------------------------------------------
%% Function: get_query_response(LogFun, RecvPid)
%%           LogFun  = undefined | function() with arity 3
%%           RecvPid = pid(), mysql_recv process
%%           Version = integer(), Representing MySQL version used
%% Descrip.: Wait for frames until we have a complete query response.
%% Returns :   {data, #mysql_result}
%%             {updated, #mysql_result}
%%             {error, #mysql_result}
%%           FieldInfo    = list() of term()
%%           Rows         = list() of [string()]
%%           AffectedRows = int()
%%           Reason       = term()
%%--------------------------------------------------------------------
get_query_response(LogFun, RecvPid, Version) ->
    case do_recv(LogFun, RecvPid, undefined) of
    {ok, Packet, _} ->
        {Fieldcount, Rest} = get_lcb(Packet),
        case Fieldcount of
        0 ->
            %% No Tabular data
            <<AffectedRows:8, Rest2/binary>> = Rest,
            io:format("Rest2=~p~n", [Rest2]),
            {InsertId, _} = get_lcb(Rest2),
            io:format("InsertId=~p~n", [InsertId]),
            {updated, #mysql_result{affectedrows=AffectedRows, insertid=InsertId}};
        255 ->
            <<_Code:16/little, Message/binary>>  = Rest,
            {error, #mysql_result{error=Message}};
        _ ->
            %% Tabular data received
            case get_fields(LogFun, RecvPid, [], Version) of
            {ok, Fields} ->
                case get_rows(Fields, LogFun, RecvPid, []) of
                {ok, Rows} ->
                    {data, #mysql_result{fieldinfo=Fields,
                             rows=Rows}};
                {error, Reason} ->
                    {error, #mysql_result{error=Reason}}
                end;
            {error, Reason} ->
                {error, #mysql_result{error=Reason}}
            end
        end;
    {error, Reason} ->
        {error, #mysql_result{error=Reason}}
    end.

get_lcb(<<251:8, Rest/binary>>) ->
    {null, Rest};
get_lcb(<<252:8, Value:16/little, Rest/binary>>) ->
    io:format("Value=~p~n",[Value]),
    io:format("Rest=~p~n",[Rest]),
    {Value, Rest};
get_lcb(<<253:8, Value:24/little, Rest/binary>>) ->
    {Value, Rest};
get_lcb(<<254:8, Value:32/little, Rest/binary>>) ->
    {Value, Rest};
get_lcb(<<Value:8, Rest/binary>>) when Value < 251 ->
    {Value, Rest};
get_lcb(<<255:8, Rest/binary>>) ->
    {255, Rest}.

%%--------------------------------------------------------------------
%% Function: do_recv(LogFun, RecvPid, SeqNum)
%%           LogFun  = undefined | function() with arity 3
%%           RecvPid = pid(), mysql_recv process
%%           SeqNum  = undefined | integer()
%% Descrip.: Wait for a frame decoded and sent to us by RecvPid.
%%           Either wait for a specific frame if SeqNum is an integer,
%%           or just any frame if SeqNum is undefined.
%% Returns : {ok, Packet, Num} |
%%           {error, Reason}
%%           Reason = term()
%%
%% Note    : Only to be used externally by the 'mysql_auth' module.
%%--------------------------------------------------------------------
do_recv(LogFun, RecvPid, SeqNum)  when is_function(LogFun);
                       LogFun == undefined,
                       SeqNum == undefined ->
    receive
        {mysql_recv, RecvPid, data, Packet, Num} ->
        {ok, Packet, Num};
    {mysql_recv, RecvPid, closed, _E} ->
        {error, "mysql_recv: socket was closed"}
    end;
do_recv(LogFun, RecvPid, SeqNum) when is_function(LogFun);
                      LogFun == undefined,
                      is_integer(SeqNum) ->
    ResponseNum = SeqNum + 1,
    receive
        {mysql_recv, RecvPid, data, Packet, ResponseNum} ->
        {ok, Packet, ResponseNum};
    {mysql_recv, RecvPid, closed, _E} ->
        {error, "mysql_recv: socket was closed"}
    end. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:10:41.090

我想你的意思是这些行：`Value:16/little`, `Value:24/little`, 等等...？嗯，这是因为 MySQL 服务器总是会用 little-endian 值填充响应包的这些部分——但默认情况下，Erlang 机器将以 CPU 原生的任何 endianness 运行。

# javascript - 用javascript刷新所有图像？

> ID：12259976
> 
> 赞同：2
> 
> 时间：2012-09-04T08:56:02.883
> 
> 标签：javascript, html, image, refresh, partial-page-refresh

我正在尝试为我们网络上的每个摄像机从闭路电视服务器加载最新图像。

我有以下代码，它可以正常工作并不断刷新图像。但是，在页面的最终版本中，页面上将有大约 10 个相机图像。我想知道是否可以更改我现在拥有的代码以刷新所有图像-而不仅仅是特定图像。

起初我以为我可以为每张图片使用相同的标识符，但后来我意识到每张图片的来源不同。

```
<html>
<head>
 <title>CCTV Test</title>
 <script type="text/javascript" language="JavaScript">
    newImage = new Image();

    function LoadNewImage()
    {
        var unique = new Date();
        document.images.ward.src = newImage.src;
        newImage.src = "http://192.168.1.64/image/WARD?time=" + unique.getTime();
    }

    function InitialImage()
    {
        var unique = new Date();
        newImage.onload = LoadNewImage;
        newImage.src = "http://192.168.1.64/image/WARD?time=" + unique.getTime();
        document.images.ward.onload="";
    }
 </script>
</head>
<body>
<img src="http://192.168.1.64/image/WARD" name="ward" onload="InitialImage()">
</body>
</html> 
```

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T09:04:55.740

类似这样的东西：

```
<!DOCTYPE html>
<html>
<head>
  <title>CCTV Test</title>
</head>
<body>
  <img src="http://192.168.1.64/image/WARD?time=...">
  <img src="http://192.168.1.64/image/WARD?time=...">
  etc.
  <script>
  setInterval(function() {
      var images = document.images;
      for (var i=0; i<images.length; i++) {
          images[i].src = images[i].src.replace(/\btime=[^&]*/, 'time=' + new Date().getTime());
      }
  }, 10000); // 10000 milliseconds = 10 seconds
  </script>
</body>
</html> 
```

这将每 10 秒刷新一次所有图像。

另一种方法是将图像的位置存储在数组中。

# jasper-reports - Use a variable calculated average of a specific field in the Title band

> ID：12259979
> 
> 赞同：3
> 
> 时间：2012-09-04T08:56:09.230
> 
> 标签：jasper-reports, ireport

I have a variable which stores the calculated average of a specific field.

Is there any way to use this variable in the *Title* band? When I try to do it, I just get **null** in the *Title* but the correct value in the *Column Footer*.

The only other possibility for this I see is, to precalculate it in Java and pass it as an argument, but I'm trying to avoid that.

I'm using *JasperReports* and *iReport* in version 3.7.4.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:50:30.010

*变量*和*文本字段*都具有属性评估*时间*。将其设置为两者的**报告**并且它可以工作。

另请查看[http://jasperforge.org/plugins/espforum/view.php?group_id=83&forumid=101&topicid=67697](http://jasperforge.org/plugins/espforum/view.php?group_id=83&forumid=101&topicid=67697)

# c# - 我无法启动新的 WPF 项目

> ID：12259993
> 
> 赞同：0
> 
> 时间：2012-09-04T08:57:09.480
> 
> 标签：c#, wpf, visual-studio-2008

我的计算机中安装了 Visual Studio 2008，但是当我尝试打开一个新的 WPF 项目时，我找不到它。我只找到 WIN Form 项目。那么VS 2008不支持WPF项目还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:04:26.903

您需要将 .NET 框架设置为至少 3.0。如果您将其设置为 2.0 或更低版本，您将无法使用 WPF 作为模板。

![在此处输入图像描述](../Images/9fabb7c93791d1f72cf4aed1a070a1a7.png)

我认为不需要它，但您可能需要安装最新版本的 .NET Framework 3.5。 [http://www.microsoft.com/en-us/download/details.aspx?id=22](http://www.microsoft.com/en-us/download/details.aspx?id=22)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:04:51.863

VS 2008 完全支持 WPF 项目（据此[）](http://msdn.microsoft.com/en-us/library/bb546194%28v=vs.100%29.aspx)，

# c++ - Cpp function call from header file

> ID：12259994
> 
> 赞同：-1
> 
> 时间：2012-09-04T08:57:09.480
> 
> 标签：c++, compiler-errors, header-files

There is two files one is .cpp file another is .h file , header file

This class is present in .h file

```
class DecodeTheCode
{
public:
char* decodeCode(char* encodedString);
}; 
```

now software which i am using asks

•Implement your logic in function char* decodeCode(char* encodedString)

but i have declared

```
const char* decodeCode(const char* encodedString)
{
const char*  decodedString = "";
const char* a = encodedString;
char store[10000];

for(int j=0;j<strlen(a);j++)
{
    if (isdigit(a[j]) || a[j] == '#')
        continue;
    else return "";
}
int i = 0,k=0;
while (i < strlen(a))
{
    if (a[i] == '#') {i++; continue;}
    else if(a[i] == a[i+1] && a[i+1] == a[i+2] && a[i+2] == a[i+3])
    {
        store[k++] = four(a[i]);
        i += 4;
    }
    else if (a[i] == a[i+1] && a[i+1] == a[i+2])
    {
        store[k++] = three(a[i]);
        i += 3;
    }
    else if (a[i] == a[i+1])
    {
        store[k++] = two(a[i]);
        i += 2;
    }
    else
    {
        store[k++] = one(a[i]);
        i++;
    }
}
store[k]='\0';
decodedString=store;              // line number 103
return  decodedString; 
```

}

in .cpp file

now the software is showing

```
Error(s) encountered:
C:/Users/ADMINI~1/AppData/Loca/Temp/cco5baaa.o(.text+0x18f):TestDecodeTheCode.cpp:undefined reference to
DecodeTheCode::decodeCode(char*)'
C:/Users/ADMINI~1/AppData/Local/Temp/cco5baaa.o(.text+0x1a4):TestDecodeTheCode.cpp: undefined reference to `DecodeTheCode::decodeCode(char*)'
C:/Users/ADMINI~1/AppData/Local/Temp/cco5baaa.o(.text+0x24d):TestDecodeTheCode.cpp: undefined reference to `DecodeTheCode::decodeCode(char*)'
C:/Users/ADMINI~1/AppData/Local/Temp/cco5baaa.o(.text+0x262):TestDecodeTheCode.cpp: undefined reference to `DecodeTheCode::decodeCode(char*)'
C:/Users/ADMINI~1/AppData/Local/Temp/cco5baaa.o(.text+0x30b):TestDecodeTheCode.cpp: undefined reference to `DecodeTheCode::decodeCode(char*)'
C:/Users/ADMINI~1/AppData/Local/Temp/cco5baaa.o(.text+0x320):TestDecodeTheCode.cpp: more undefined references to `DecodeTheCode::decodeCode(char*)' follow 
```

collect2: ld returned 1 exit status

```
/decodethecode/decodethecode.c: In function `char* decodeCode(const char*)':
/decodethecode/decodethecode.c:103: error: invalid conversion from `const char*' to `char*' 
```

i am using const char* decodeCode(const char* encodedString) in place of char* decodeCode(char* encodedString) because otherwise i gets deprecated conversion from string constant to ‘char*’</p>

Have you any idea how I could fix it? If so, please write it down clearly (I am newbie...).

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T08:58:55.163

您需要完全限定定义并更改声明中的类型以匹配定义类型。在`.cpp`文件中，这只是定义了一个自由函数：

```
const char* decodeCode(const char* encodedString)
{
} 
```

并且与成员函数声明无关。完全符合条件：

```
const char* DecodeTheCode::decodeCode(const char* encodedString)
{
} 
```

更改`decodeCode()`也声明中的类型。

更重要的是，您将返回一个指向名为 的局部变量的指针`store`。这将超出范围并给调用者留下一个悬空指针。要返回，`char*`您需要使用动态分配内存，`new char[size]`并且调用者必须记住`delete[]`返回的数据。`const char*`如果返回动态分配的内存，则返回类型不需要更改。但是您必须保持一致，特别是不要在偶尔返回字符串文字时，例如`""`，而在另一个返回动态分配的内存时，调用者将尝试`delete[]`存储它不应该的内存。

如果可能，请使用`std::string`而不是`char*`. 它消除了您管理动态分配内存的负担。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:03:47.593

将函数声明从 更改`const char* decodeCode(const char* encodedString) {`为`const char* DecodeTheCode::decodeCode(const char* encodedString) {`。该`DecodeTheCode::`部分告诉编译器“decodeCode()”函数是“DecodeTheCode”类的一部分，而不是某个其他类甚至全局的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T09:06:07.210

改变

`const char* decodeCode(const char* encodedString)`

这样看：

```
char* DecodeTheCode::decodeCode(char* encodedString) 
```

这样，它是一个类方法定义，而不仅仅是新代码中的新函数声明和定义。

我相信，从字符串常量到 'char*' 的弃用转换来自您的方法调用，而不是您声明它的方式。您可以展示如何使用此方法，以便我确定如何解决此问题。

# java - 使用 JFreeChart 的 XYLineAndShapeRenderer 绘制自定义线

> ID：12259996
> 
> 赞同：2
> 
> 时间：2012-09-04T08:57:20.137
> 
> 标签：java, jfreechart

我有一些用于构建一系列集群的逻辑。到目前为止，为了表示图上每个点所属的集群，我使用了一系列颜色，其中属于同一集群的点具有相同的颜色。

除此之外，我还想显示每个集群的中心，因为这将帮助我了解集群构建算法的执行情况。为此，我正在通过使用`XPointerAnnotation`类在图表上写一些文本。这样做的问题是，我认为在点上放置文本会导致情节混乱（考虑到很可能会有数百个点）。

我想画线向外，从中心点到它的集群的每个成员。我面临的问题是我似乎无法找到正确的方法或方法来做到这一点。

我已经设法找到它的来源[并](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/renderer/xy/XYLineAndShapeRenderer.html)[`XYLineAndShapeRenderer`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/xy/XYLineAndShapeRenderer.html)尝试将其用作指南，但我仍然没有在情节上绘制任何自定义线。我试图覆盖`drawPrimaryLine`,`drawPrimaryLineAsPath`和`drawSecondaryPass`方法，但无济于事。

我用来渲染线条的代码如下：

```
int x1 = (int) dataset.getXValue(series, 0);
int y1 = (int) dataset.getYValue(series, 0);

int x2 = (int) dataset.getXValue(series, item);
int y2 = (int) dataset.getYValue(series, item);

g2.drawLine(x1, y1, x2, y2);
System.out.println(String.format("Drawing %d  %d  %d  %d %s", x1, y1, x2, y2, g2.getColor()));

State s = (State) state;
if (item == s.getLastItemIndex()) {
    // draw path
    drawFirstPassShape(g2, pass, series, item, s.seriesPath);
} 
```

print 语句打印正确的坐标和正确的颜色，所以我添加的图形似乎没有被渲染。我在执行代码之前和之后都尝试过调用`super`，但也无济于事。

任何方向将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T00:24:15.483

仔细查看发布的代码，从 获得的*xy*值表示*数据*坐标`dataset`中的一个点。在渲染这样的点之前，必须将其转换为*图形*坐标，相对于. 例如，使用相应的轴方法 ,将数据值转换为图形坐标。**`dataArea`[`drawPrimaryLineAsPath()`](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/renderer/xy/XYLineAndShapeRenderer.html#line.1063)`valueToJava2D()`**

 **```
double transX1 = domainAxis.valueToJava2D(x1, dataArea, xAxisLocation);
double transY1 = rangeAxis.valueToJava2D(y1, dataArea, yAxisLocation); 
```

附录：该[`drawPrimaryLineAsPath()`](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/renderer/xy/XYLineAndShapeRenderer.html#line.1063)方法[`drawItem()`](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/renderer/xy/XYLineAndShapeRenderer.html#line.887)仅在`drawSeriesLineAsPath`is时调用`true`，例如`setDrawSeriesLineAsPath(true)`。**

# debugging - Difference in behavior between Xcode and OTA Ad-hoc distribution

> ID：12259997
> 
> 赞同：1
> 
> 时间：2012-09-04T08:57:21.183
> 
> 标签：debugging, core-data, core-audio, ota, xcdatamodel

I have my app working to my satisfaction both in the simulator and on two devices when debugging through Xcode 4.3.2\. I use OTA Ad-hoc distribution to send to my beta testers. After archiving, saving, and uploading my ipa and plist file to my website, I then download and successfully install the app on my phone.

Sounds good, right?

HOWEVER, I am using CoreAudio and CoreData, and low and behold suddenly there is no sound in my app. I delete and install OTA on the same devices I am debugging with, so I am at a loss to where the problem is occurring.

I have a feeling that there might be an underlying problem with my Core Data model (which feeds my sound) but checks upon checks seem to verify that it is working. It DOES work when I install from Xcode, unplug, close, and reopen the app on the device. Only the OTA install has this problem.

Has anyone encountered any differences in behavior like this? I checked my build settings and the only difference I see for AdHoc is using the Entitlements.plist, which only useful setting appears to be NO to debugging.

# android - How to avoid blocking button actions in a page while progress dialog is shown

> ID：12259998
> 
> 赞同：0
> 
> 时间：2012-09-04T08:57:20.513
> 
> 标签：android

In my activity page ,there is a navigation bar on the top with a home button.I don't want to block home button action while progress dialog is shown .How to implement this?