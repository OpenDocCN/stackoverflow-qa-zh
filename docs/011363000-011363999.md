# StackOverflow 问答 11363000-11363999

# php - 在mysql插入之前临时存储数据

> ID：11363000
> 
> 赞同：0
> 
> 时间：2012-07-06T13:20:53.523
> 
> 标签：php, mysql

我认为您可以打开的 mysql 连接数量是有限制的。是否有一种方法可以暂时存储来自用户的数据，然后一次性将其插入数据库？或者你会如何管理 200 000 人进行 Facebook 状态更新？（因为我不能简单地打开 200k 连接并将信息放入。）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:47:12.493

例如，您可以使用队列，从而单个进程获取 INSERT（通过进程间通信或通过套接字，即使 - 在这种情况下 - 您将有 200.000 个到队列服务器的连接，或者通过将文件存储到“假脱机“ 目录）。

然后该进程“收获”队列，可能在 MySQL 的情况下使用扩展语法合并 INSERTS，并将它们发送到数据库。

这仅在将 INSERT 外包给进程的整个工作比将其发送到 DB 快得多的情况下才有用，否则会产生成本和问题（例如，在外包之后，Web 服务器认为 DB 已更新，但实际上不是，在收割者得到它之前不会有（一点点？）时间）超过好处。

如果 reaper 进程能够在过载的情况下限制或停止 Web 服务器，则可以使整个进程更具弹性：即，假设 MySQL 只能处理每分钟持续 X 次插入，即使使用 INSERT DELAYED 等，并且入境率远不止于此。然后在每次迭代中，reaper 进程会注意到队列越来越长。超过给定的限制，该进程可能会设置一个标志，以便新用户收到错误消息并阻止生成进一步的插入。

在入站 > 出站的情况下，*无论如何*都会给出一些东西，所以至少这样可以保护现有连接并提供“软故障”模式。

您还可以使用共享内存实现本地缓存：每个 PHP 进程将 INSERTS 放置在共享内存中（使用锁定！）。如果有超过 X 个元组在等待，或者如果旧元组的时间超过 Y 秒，则所有元组都合并在一个单独的 INSERT 中，该 INSERT 被发送到 MySQL，并且缓存被清空。这样整个过程非常轻量级，不使用网络（但有一点内存），并且 MySQL 上的负载明显减少 - 合并的 INSERT 可以比单独的 INSERT 快 100 倍，并且还可以使用索引禁用/启用技巧。

# f# - 如何在运行后保持 fsi.exe 处于打开状态

> ID：11363002
> 
> 赞同：5
> 
> 时间：2012-07-06T13:21:03.880
> 
> 标签：f#, f#-interactive, f#-scripting

我有一堆 F# 脚本 (fsx) 用于满足我的基本部署需求。我只需右键单击它们并说“使用 F# 交互式运行”

但是，有时脚本会失败，我想保持交互式控制台运行。到目前为止，我还没有找到实现这一目标的好方法。

我尝试手动启动 fsi.exe，但是如何从那里启动我的脚本？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T19:25:07.763

如果您足够老练，您可能只想添加另一个类似于 的资源管理器上下文菜单项，但在脚本终止`Run with F# Interactive`后保持控制台窗口打开。`.fsx`以下是如何在 Windows7/VS2012 上实现这一点的工作大纲：

*   被管理员打开`regedit`并找到密钥`HKEY_CLASSES_ROOT\VisualStudio.fsx.11.0\shell`
*   添加具有一些唯一名称的新子键，例如`openRunCmd`，`(Default)`为这个键赋值，无论你想在上下文菜单中看到什么，也许`Run with Fsi in shell`
*   最后，将此子键的子键`HKEY_CLASSES_ROOT\VisualStudio.fsx.11.0\shell\openRunCmd\command`和设置`(Default)`值添加到以下行：

    `c:\windows\system32\cmd.exe /Q /K %%USERPROFILE%%\fsx.bat "%1"`

现在，关闭`regedit`，转到您的主目录并在那里创建一个`fsx.bat`包含以下行的批处理文件：

```
"C:\Program Files (x86)\Microsoft SDKs\F#\3.0\Framework\v4.0\Fsi.exe" --quiet --exec "%1" 
```

在这些 mods 之后，您将能够`.fsx`用鼠标右键单击任何脚本，选择`Run with Fsi in shell`并让 shell 窗口在脚本终止后停留，直到您关闭它。只需进行一些小的调整，同样的方法将适用于 VS2010。

如果您的系统设置与上述设置不同，请注意调整细节。祝你好运！

**更新**：对于那些想在家里或工作中尝试的人，我在[这里](http://infsharpmajor.wordpress.com/2012/07/06/running-f-interactive-from-windows-context-menu/)发布了详细的演练。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T13:46:34.203

```
#load "myScipt.fsx";; 
```

我认为应该工作。但我自己更喜欢有单独的控制台窗口（cmd.exe），我可以从中运行`fsi myScipt.fsx`并查看输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T11:41:30.157

我创建了一个 Windows 快捷方式

目标：

```
cmd /k "C:\Program Files (x86)\Microsoft SDKs\F#\3.1\Framework\v4.0\Fsi.exe" deploy.fsx 
```

开始于：

```
C:\FolderContaningFsxScript 
```

如果脚本失败，这会使窗口保持打开状态，这样我就可以看到任何编译错误。如果脚本成功运行，它也会使窗口保持打开状态，这可能是可取的，也可能是不可取的。

我发现单击快捷方式而不是右键单击 > 使用 F# Interactive 运行更容易。我认为带有上述命令的批处理文件也可以。

# postgresql - 将csv文件导入psql db

> ID：11363005
> 
> 赞同：1
> 
> 时间：2012-07-06T13:21:10.393
> 
> 标签：postgresql, csv, delimiter

我想将 csv 文件导入 psql db ...

我已经搜索并尝试使用副本，也提到了[https://www.commandprompt.com/ppbook/r23528](https://www.commandprompt.com/ppbook/r23528)，我使用的语法是：

```
copy location from 'file.csv' with delimiters '\t' NULL as 'NULL' CSV; 
```

注意：我的 csv 文件由 'tab' 分隔。

第一次执行上述 cmd 后，显示：

```
ERROR:  syntax error at or near ""\t""
LINE 1: ...om 'file.csv' using delimiters "\t" ; 
```

第二次，

```
ERROR:  syntax error at or near "copy"
LINE 2: copy location from 'file.csv' using d... 
```

**编辑后，**

我第二次尝试使用 like ，

```
copy location from 'file.csv' with delimiter E'\t' NULL as 'NULL' CSV;

ERROR: extra data after last expected column 
CONTEXT: COPY location, line 1: "AD AD100   Canillo  42.5833    1.6667  6" 
```

我的表描述是

```
Table "public.location"

 Column    |          Type          | Modifiers 
-------------+------------------------+-----------
 countrycode | character varying(2)   | 
 postalcode  | character varying(20)  | 
 place       | character varying(100) | 
 state       | character varying(20)  | 
 country     | character varying(100) | 
 country2    | character varying(20)  | 
 community   | character varying(100) | 
 community2  | character varying(20)  | 
 latitude    | double precision       | 
 longitude   | double precision       | 
 accuracy    | integer                | 
```

如何解决这个问题？

**输入：**

```
AD      AD100   Canillo                                                 42.5833 1.6667  6
AD      AD200   Encamp                                                  42.5333 1.6333  6
AD      AD300   Ordino                                                  42.6    1.55    6
AD      AD400   La Massana                                                      42.5667 1.4833  6
AD      AD500   Andorra la Vella                                                        42.5    1.5     6
AD      AD600   Sant Julià de Lòria                                                     42.4667 1.5     6
AD      AD700   Escaldes-Engordany                                                      42.5    1.5667  6
AR      3636    "POZO CERCADO (EL CHORRO (F), DPTO. RIVADAVIA (S))"     SALTA   A                                       -23.4933        -61.9267        3
AR      4123    LAS SALADAS     SALTA   A                                       -25.7833        -64.5   4
AR      4126    LA MARAVILLA    SALTA   A                                       -26.0833        -65.263 3
AR      4126    TALA    SALTA   A                                       -26.1167        -65.2833        4
AR      4126    LA ASUNCION     SALTA   A                                       -26.0833        -65.263 3
AR      4126    BRETE   SALTA   A                                       -26.0667        -65.3667        4
AR      4126    EL SUNCHAL      SALTA   A                                       -26.0833        -65.263 3
AR      4126    CEIBAL  SALTA   A                                       -26.1   -65.0167        4
AR      4126    BARADERO        SALTA   A                                       -26.0833        -65.263 3
AR      4126    CANDELARIA      SALTA   A                                       -26.1   -65.1   4
AR      4126    ALEM    SALTA   A                                       -26.0833        -65.263 3
AR      4126    EL BRETE        SALTA   A                                       -26.0667        -65.3667        4
AR      4126    EL CUIBAL       SALTA   A                                       -26.0833        -65.263 3
AR      4126    EL JARDIN       SALTA   A                                       -26.0833        -65.3833        4
AR      4126    OVEJERO SALTA   A                                       -26.0833        -65.263 3
AR      4126    LOS MOGOTES     SALTA   A                                       -26.0333        -65.2   4
AR      4126    "MIRAFLORES (TALA, DPTO. CANDELARIA)"   SALTA   A                                       -26.0833        -65.263 3 
```

这是一些例如输入...

当我在 ms xcel 工作表中打开此文件时，使用分隔符选项卡将数据正确分隔到相关列。

**输入带有制表符和空值的文件，**

```
AD\tAD100\tCanillo\t\n\t\n\t\n\t\n\t\n\t\n\t42.5833\t1.6667\t6
AD\tAD200\tEncamp\t\n\t\n\t\n\t\n\t\n\t\n\t42.5333\t1.6333\t6
AR\t3636\t"POZO CERCADO (EL CHORRO (F), DPTO. RIVADAVIA (S))"\tSALTA\tA\t\n\t\n\t\n\t\n\t-23.4933\t-61.9267\t3 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T13:38:21.367

根据声明中的[文档](http://www.postgresql.org/docs/current/interactive/sql-copy.html)`COPY`，它应该是`WITH DELIMITER`而不是*DELIMITERS*。

此外，`COPY`语法已更改，鼓励您使用以下内容：

```
COPY location FROM 'file.csv' WITH (FORMAT csv, DELIMITER '\t',  NULL 'NULL'); 
```

* * *

**编辑：**

我已经使用提供的信息来测试如何`COPY`处理呈现的数据：

```
CREATE TABLE atest (
    countrycode text CHECK (length(countrycode) <= 2),
    postalcode  text CHECK (length(postalcode) <=20), 
    place       text CHECK (length(place) <= 100), 
    state       text CHECK (length(state) <= 20), 
    country     text CHECK (length(country) <= 100), 
    country2    text CHECK (length(country2) <= 20), 
    community   text CHECK (length(community) <= 100), 
    community2  text CHECK (length(community2) <= 20),
    latitude    double precision,
    longitude   double precision,
    accuracy    integer); 
```

我已经使用了上面提到的命令（采用了一点）：

```
COPY atest FROM '/Users/viy/atest2.csv'
     WITH (FORMAT csv, DELIMITER E'\t',  NULL '\n'); 
```

并得到与上述相同的错误。这是意料之中的，因为空字段太多。让我们看看`CSV`数据以及它如何匹配表定义（全部`\t`替换为新行）：

```
AD       countrycode
AD100    postalcode
Canillo  place
\n       state
\n       country
\n       country2
\n       community
\n       community2
\n       latitude
42.5833  longitude
1.6667   accuracy
6        <-- this one gives the error! 
```

因此，为了加载数据，您必须检查源数据并在中间删除一个额外的空白字段。另一种方法是调整表的定义以匹配您的源数据。

# android - 如何检查edittext监听器是否被删除

> ID：11363009
> 
> 赞同：-1
> 
> 时间：2012-07-06T13:21:44.113
> 
> 标签：android, android-edittext

我正在使用这两者`editext`并添加单独的`textWatcher`类对象，当有人关注然后第二个`textListener`被移除时。

然后 **我的问题是如何检查 textListener 是添加还是删除**

提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:49:17.483

AFAIK，没有方法可以获取 EditText 对象的当前分配 TextWatcher 实例。

相反，你可以这样做，

```
mEdiText.addTextChangedListener(null); 
```

在您分配 any 之前`TextWatcher`，然后`mEdiText.addTextChangedListener(new MyTextWatcher());`在任何事件或任何条件下将 Watcher 对象分配给 EditText。

分配`null`将删除以前的 TextWatcher。

要知道它是否真的有效，只需运行您的应用程序并测试一次。

# apache - 在 apache 中编写复杂的 .htaccess 文件

> ID：11363010
> 
> 赞同：0
> 
> 时间：2012-07-06T13:21:44.377
> 
> 标签：apache, .htaccess

我的要求

1.  检查手机或电脑并重定向到正确的 URL。
2.  如果用户直接来到某个内部页面，他应该只在那个页面上。
3.  旧的重定向也应该有效。

请求 1st 到达文档根目录为移动网站的 apache 服务器。所以在这里我有一个 .htaccess 文件，我必须在其中执行上述所有操作。这就是我到目前为止所写的。并且所有重定向都无法正常工作。

```
<IfModule mod_rewrite.c>
  RewriteEngine on
/** Pc site settings **/
  RewriteCond %{HTTP_USER_AGENT} "!{android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile}" [NC]
  RewriteRule ^/abc/def/abc.html$ #http://www.pcsite.com/a/abc/abc.html [R=301,L]
  RewriteRule ^(.*)$ http://www.pcsite.com/$1 [L,R=301]
/** Pc site settings - end**/  

/** mobile site settings **/
  RewriteRule web.config - [F,L]
  RewriteRule ^(.*)(device/[^/]+/)(min/.*)$ $1$3?_device=$2 [QSA,L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=min/.*$
  RewriteCond %{REQUEST_URI} ^(.*)$
  RewriteRule ^(.*)$ index.php?_path=%1 [L,QSA]

/** mobile site settings - End**/
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:24:54.323

首先是一个小问题：您是否重新启动了 apache？

# c++ - 为什么不是所有的 Boost 库都只有标头？

> ID：11363011
> 
> 赞同：23
> 
> 时间：2012-07-06T13:21:48.090
> 
> 标签：c++, boost

为什么 Boost 中的所有库都不是仅标头？换一种说法，是什么使 .lib/.dll 的使用成为强制性的？

是不是当一个类不能是模板或有静态字段时？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-06T13:37:12.367

不同的点，我猜。

*   二进制大小。仅标头可以给客户端带来大小负担吗？
*   编译时间。仅标头是否意味着编译性能显着下降？
*   运行时性能。仅标头可以提供卓越的性能吗？
*   限制。设计是否只需要标题？

## 关于二进制大小。

*^(和一点安全感)*

如果 boost 库中有很多可访问的代码，或者编译器无法争论客户端是否可以访问的代码，则必须将其放入最终的二进制文件中。^((*))

在具有包管理（例如基于 RPM 或 .deb）的操作系统上，共享库可能意味着二进制分发大小的大幅减少并具有安全优势：安全修复程序分发速度更快，然后所有 .so/ 自动使用.DLL 用户。所以你有一个重新编译和一个重新分发，但有*N*个奸商。使用仅包含头文件的库，您有*N*次重新编译、*N次重新分发，总是针对每个修复程序，并且这些**N*中的某些成员本身已经很大。

^((*) 可到达此处表示“可能执行”)

## 关于编译时间。

一些 boost 库非常庞大。如果您愿意`#include`，每次您在源文件中进行一些更改时，您都必须重新编译您所做的一切`#include`。

这可以用樱桃采摘的标头来对抗，例如

```
#include <boost/huge-boost-library.hpp> // < BAD
#include <boost/huge-boost-library/just-a-part-of-it.hpp> // < BETTER 
```

但有时你真正需要包含的东西已经大到足以削弱你的重新编译。

对策是使其成为静态或共享库，反过来意味着“完全编译一次（直到下一次 boost 更新）”。

## 关于运行时性能。

我们还没有到一个全局优化可以解决我们所有的 C++ 性能问题的时代。为确保为编译器提供所需的所有信息，您可以只制作头文件并让编译器做出内联决策。

在这方面，请注意，由于 CPU 上的缓存和推测问题，内联并不总是提供卓越的性能。

另请注意，此论点主要与可能使用得足够频繁的 boost 库有关，例如，人们可能期望`boost::shared_ptr<>`经常使用，因此是一个相关的性能因素。

但考虑到真正的唯一相关原因`boost::shared_ptr<>`是只有标题......

## 关于限制。

C++ 中的一些东西*不能*放入库中，即模板和枚举。

但请注意，这只是对了一半。您可以为您的真实数据结构和算法编写类型安全的模板化接口，而这些接口又在库中具有它们的运行时通用实现。

*同样，应该*将C++ 中的一些内容放入源文件中，如果是 boost，则应放入库中。基本上，这就是所有会给出“多重定义”错误的东西，比如`static`一般的成员变量或全局变量。

在标准库中也可以找到一些示例：在`std::cout`标准中定义为`extern ostream cout;`，因此`cout`基本上需要分发定义*一次且仅一次的**东西*（库或源文件） 。

# php - 获取 url 内容 PHP

> ID：11363022
> 
> 赞同：22
> 
> 时间：2012-07-06T13:22:24.147
> 
> 标签：php, url, curl, file-get-contents

我想将 URL 的内容放在一个字符串中并对其进行处理。但是，我有一个问题。

我收到此错误：

```
Warning: file_get_contents(http://www.findchips.com/avail?part=74ls244) [function.file-get-contents]: failed to open stream: Redirection limit reached, 
```

我听说这是由于页面保护和标题、cookie 和其他东西。我怎样才能覆盖它？

我也尝试过 fread 和 fopen 等替代方法，但我想我只是不知道该怎么做。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-29T15:57:35.030

原来的答案转移到[这个话题](https://stackoverflow.com/a/15708596/2377343) 。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-06T13:30:25.630

使用[`cURL`](http://php.net/manual/en/book.curl.php),

检查您是否通过`phpinfo();`

对于代码：

```
function getHtml($url, $post = null) {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    if(!empty($post)) {
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
    } 
    $result = curl_exec($ch);
    curl_close($ch);
    return $result;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T13:28:09.443

尝试改用[cURL](http://php.net/manual/en/book.curl.php)。cURL 实现了一个 cookie jar，而 file_get_contents 没有。

# c - 在 C 中优化双线性调整大小算法

> ID：11363023
> 
> 赞同：1
> 
> 时间：2012-07-06T13:22:32.473
> 
> 标签：c, performance, optimization, resize, image-resizing

任何人都可以在下一个双线性调整大小算法中发现任何提高速度的方法吗？我需要提高速度，因为这很关键，保持良好的图像质量。预计将用于具有低速 CPU 的移动设备。该算法主要用于放大调整大小。任何其他更快的双线性算法也将不胜感激。谢谢

```
void resize(int* input, int* output, int sourceWidth, int sourceHeight, int targetWidth, int targetHeight) 
{    
    int a, b, c, d, x, y, index;
    float x_ratio = ((float)(sourceWidth - 1)) / targetWidth;
    float y_ratio = ((float)(sourceHeight - 1)) / targetHeight;
    float x_diff, y_diff, blue, red, green ;
    int offset = 0 ;

    for (int i = 0; i < targetHeight; i++) 
    {
        for (int j = 0; j < targetWidth; j++) 
        {
            x = (int)(x_ratio * j) ;
            y = (int)(y_ratio * i) ;
            x_diff = (x_ratio * j) - x ;
            y_diff = (y_ratio * i) - y ;
            index = (y * sourceWidth + x) ;                
            a = input[index] ;
            b = input[index + 1] ;
            c = input[index + sourceWidth] ;
            d = input[index + sourceWidth + 1] ;

            // blue element
            blue = (a&0xff)*(1-x_diff)*(1-y_diff) + (b&0xff)*(x_diff)*(1-y_diff) +
                   (c&0xff)*(y_diff)*(1-x_diff)   + (d&0xff)*(x_diff*y_diff);

            // green element
            green = ((a>>8)&0xff)*(1-x_diff)*(1-y_diff) + ((b>>8)&0xff)*(x_diff)*(1-y_diff) +
                    ((c>>8)&0xff)*(y_diff)*(1-x_diff)   + ((d>>8)&0xff)*(x_diff*y_diff);

            // red element
            red = ((a>>16)&0xff)*(1-x_diff)*(1-y_diff) + ((b>>16)&0xff)*(x_diff)*(1-y_diff) +
                  ((c>>16)&0xff)*(y_diff)*(1-x_diff)   + ((d>>16)&0xff)*(x_diff*y_diff);

            output [offset++] = 
                    0x000000ff | // alpha
                    ((((int)red)   << 24)&0xff0000) |
                    ((((int)green) << 16)&0xff00) |
                    ((((int)blue)  << 8)&0xff00);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:25:11.013

在我的头顶上：

1.  停止使用浮点，除非您确定您的目标 CPU 在硬件中具有良好的性能。
2.  确保内存访问是缓存优化的，即聚集在一起。
3.  尽可能使用最快的数据类型。有时这意味着最小，有时意味着“最原生，需要最少的开销”。
4.  调查整数运算的有符号/无符号是否在您的平台上有性能成本。
5.  调查查找表而不是计算是否能给你带来任何好处（但这些可能会破坏缓存，所以要小心）。

当然，还要进行大量的分析和测量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T13:48:41.393

## 内联缓存和查找表

**在你的算法中缓存**你的计算。

*   **避免重复计算**（如`(1-y_diff)`or `(x_ratio * j)`）

    遍历算法的所有行，并尝试识别重复模式。将这些提取到局部变量中。并且可能提取到函数，如果它们足够短可以内联，以使事情更具可读性。

*   **使用查找表**

    很有可能，如果您可以节省一些内存，您可以为您的 RGB 值实现“存储”，并根据生成它们的输入简单地“获取”它们。也许您不需要存储所有这些，但您可以进行试验，看看是否有一些经常回来。或者，您可以“捏造”您的颜色，从而以更少的值存储更多的查找输入。

    如果您知道输入的边界，则可以计算完整的域空间并找出缓存的意义。例如，如果您不能缓存整个`R`, `G`,`B`值，也许您至少可以预先计算`(b>>16)`在您的情况下最有可能确定的移位（等等......）。

## 使用正确的数据类型来提高性能

如果可以避免`double`和`float`变量，请使用`int`. 在大多数架构上，`int`由于内存模型，将测试更快的计算类型。您仍然可以通过简单地移动单位（即使用`1026`as`int`而不是`1.026`as`double`或`float`）来获得不错的精度。这个技巧很可能对你来说已经足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:45:25.140

```
 x = (int)(x_ratio * j) ;
 y = (int)(y_ratio * i) ;
 x_diff = (x_ratio * j) - x ;
 y_diff = (y_ratio * i) - y ;
 index = (y * sourceWidth + x) ; 
```

肯定可以使用一些优化：您之前只使用`x_ration * j-1`了几个周期，所以您真正需要的是`x+=x_ratio`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T15:26:57.673

这是我的版本，窃取一些想法。我的 C-fu 很弱，所以有些行是伪代码，但你可以修复它们。

```
void resize(int* input, int* output,
            int sourceWidth, int sourceHeight,
            int targetWidth, int targetHeight
) {
    // Let's create some lookup tables!
    // you can move them into 2-dimensional arrays to
    // group together values used at the same time to help processor cache
    int sx[0..targetWidth ]; // target->source X lookup
    int sy[0..targetHeight]; // target->source Y lookup
    int mx[0..targetWidth ]; // left pixel's multiplier
    int my[0..targetHeight]; // bottom pixel's multiplier

    // we don't have to calc indexes every time, find out when
    bool reloadPixels[0..targetWidth ];
    bool shiftPixels[0..targetWidth ];
    int  shiftReloadPixels[0..targetWidth ]; // can be combined if necessary

    int v; // temporary value
    for (int j = 0; j < targetWidth; j++){
        // (8bit + targetBits + sourceBits) should be < max int
        v = 256 * j * (sourceWidth-1) / (targetWidth-1);

        sx[j] = v / 256;
        mx[j] = v % 256;

        reloadPixels[j] = j ? ( sx[j-1] != sx[j] ? 1 : 0)
                            : 1; // always load first pixel

        // if no reload -> then no shift too
        shiftPixels[j]  = j ? ( sx[j-1]+1 = sx[j] ? 2 : 0)
                            : 0; // nothing to shift at first pixel

        shiftReloadPixels[j] = reloadPixels[i] | shiftPixels[j];
    }

    for (int i = 0; i < targetHeight; i++){
        v = 256 * i * (sourceHeight-1) / (targetHeight-1);
        sy[i] = v / 256;
        my[i] = v % 256;
    }

    int shiftReload;
    int srcIndex;
    int srcRowIndex;
    int offset = 0;
    int lm, rm, tm, bm; // left / right / top / bottom multipliers
    int a, b, c, d;

    for (int i = 0; i < targetHeight; i++){
        srcRowIndex = sy[ i ] * sourceWidth;
        tm = my[i];
        bm = 255 - tm;

        for (int j = 0; j < targetWidth; j++){

            // too much ifs can be too slow, measure.
            // always true for first pixel in a row
            if( shiftReload = shiftReloadPixels[ j ] ){
              srcIndex = srcRowIndex + sx[j];
              if( shiftReload & 2 ){
                a = b;
                c = d;
              }else{
                a = input[ srcIndex                   ];
                c = input[ srcIndex +     sourceWidth ];
              }
              b = input[ srcIndex + 1               ];
              d = input[ srcIndex + 1 + sourceWidth ];
            }

            lm = mx[j];
            rm = 255 - lm;

            // WTF?
            // Input  AA RR GG BB
            // Output RR GG BB AA

            if( j ){
              leftOutput = rightOutput ^ 0xFFFFFF00;
            }else{
              leftOutput =
                // blue element
                  (((  ( (a&0xFF)*tm
                       + (c&0xFF)*bm )*lm
                  ) & 0xFF0000 ) >> 8)

                // green element
                | (((  ( ((a>>8)&0xFF)*tm
                       + ((c>>8)&0xFF)*bm )*lm
                  ) & 0xFF0000 )) // no need to shift

                // red element
                | (((  ( ((a>>16)&0xFF)*tm
                       + ((c>>16)&0xFF)*bm )*lm
                  ) & 0xFF0000 ) << 8 )
              ;
            }

            rightOutput =
              // blue element
                (((  ( (b&0xFF)*tm
                     + (d&0xFF)*bm )*lm
                ) & 0xFF0000 ) >> 8)

              // green element
              | (((  ( ((b>>8)&0xFF)*tm
                     + ((d>>8)&0xFF)*bm )*lm
                ) & 0xFF0000 )) // no need to shift

              // red element
              | (((  ( ((b>>16)&0xFF)*tm
                     + ((d>>16)&0xFF)*bm )*lm
                ) & 0xFF0000 ) << 8 )
            ;

            output[offset++] =
              // alpha
              0x000000ff
              | leftOutput
              | rightOutput
            ;

        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T15:39:57.977

我的随机猜测（使用分析器而不是让人们猜测！）：

当输入和输出重叠时，编译器必须生成有效的方法，这意味着它必须生成大量冗余存储和加载。添加`restrict`到输入和输出参数以删除该安全功能。

您也可以尝试使用`a=b;`and`c=d;`而不是再次加载它们。

# jquery - Jquery 对话框：对话框打开前显示的内容

> ID：11363026
> 
> 赞同：1
> 
> 时间：2012-07-06T13:22:36.570
> 
> 标签：jquery, html, jquery-dialog

我有一些 HTML 代码，里面有一个对话框，如下所示：

```
<center>
<a href="#add_auto" id="add_auto" onclick="addAuto();" >
    <img " src="/css/images/add_author_automated.png"; id="add_author_automated"; alt="-"; />
</a>
</center>
<div id="dialog-modal" title="Basic modal dialog" >
    <textarea style="width: 95%; heigth: 400px" name="authors-auto-adding"; id="authors-auto-adding"></textarea>
    <input text-align="center" type="BUTTON" onclick="processAuthorsParagraph();" value="Process";  />
</div> 
```

单击图像时，我调用了函数 addAuto：

```
function addAuto()
{
    $( "#dialog-modal" ).dialog({
        height: 300,
        width: 800,
        modal: true
    });
} 
```

但问题是第一次打开页面时，我在主页上有对话框内容。当我打开对话框然后关闭时，dilog 内容会从主页中消失。

我已经尝试使用

```
$( "#dialog:ui-dialog" ).dialog( "destroy" ); 
```

在 document.ready 但没有任何变化。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:24:30.703

如果您将此行添加到您的 CSS 中，它将产生奇迹：

```
#dialog-modal { display: none; } 
```

这将使您的模态默认隐藏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T13:24:34.010

只需`style="display: none"`输入标签`<div>`

显示对话框时，样式将被删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T13:28:02.690

您可以将 display:none 直接放入 dailog 包装器的 div 元素的 html 标记中

```
 <div id="dialog-modal" title="Basic modal dialog" style="display:none;" > 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T13:24:23.987

是的你是对的。我有同样的问题。解决方案非常简单：不要在 HTML 代码中打印它，而是将其包装在 Javascrip 中......

```
var your_dialog_html = $('<div>your html code here, but attention: without new lines! in your editor</div>')
var your_dialog = $( your_dialog_html ).dialog({
         /* options here */
});

$('#trigger').click(function() {    
    your_dialog.dialog('open');
    return false; // prevent the default action, e.g., following a link
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T13:29:01.580

您正在调用`$( "#dialog:ui-dialog" ).dialog( "destroy" );`，但您的标记中没有 #dialog。

回避这个事实，为了解决您的问题，我将#dialog-modal 设置为`display: none;`通过 CSS。然后，您可以使用`$.fn.show()`或`display: block;`在对话框的`open`回调上。这将不会显示内容，直到它出现在对话框中。

# php - 在 PHP 中获得将新文件写入服务器的权限

> ID：11363027
> 
> 赞同：0
> 
> 时间：2012-07-06T13:22:41.413
> 
> 标签：php, apache, file-io, file-permissions, chmod

## 解决了

我弄清楚了当前用户在使用 PHP 并设法将新目录的所有者设置为执行 PHP 脚本的用户。但是，这仍然会导致问题，因为其他一些命令（用于确定当前用户是谁）不起作用。这突出表明问题在于我的 PHP 发行版被配置为安全模式。

我禁用了安全模式，Ed Manet 提供的命令允许我根据需要添加/编辑/删除文件，而无需将所有内容都设置为 777 权限的快捷方式。

谢谢您的帮助！

## 原帖

我有一个在服务器上存储一些数据的 Web 应用程序。这涉及在 PHP 中创建和删除目录和文件（以及修改现有文件）。我遇到的主要问题是执行此类操作所需的*权限。*

如果我将现有文件的权限设置为 777，那么 PHP 脚本可以很好地编辑它们（尽管我知道这不是最佳解决方案，因为它不安全）。该脚本还可以很好地创建和删除目录（当它们至少具有 777 权限时），但无论我做什么，我都无法让脚本创建*新*文件。

我已经进行了一些搜索，看来我需要将 PHP“用户”提升为具有所需权限的用户。然而，当谈到服务器配置和权限时，我基本上是一个初学者。我将如何更改为不同的用户来执行所需的操作？是否可以执行此中间脚本并正常使用 PHP`fopen()`和`chmod()`函数？或者我是否必须使用 shell 命令生成一个全新的进程，以某种方式让该外部程序以正确的权限执行？

总而言之，我需要使用 PHP 在 Web 服务器中创建、修改和删除文件/目录的新方法，方法是为文件分配足够的权限并将权限分配给 PHP 用户。我不确定如何做到这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:32:18.583

我要做的是将 PHP 必须在其中创建文件的文件夹的所有权更改为运行 PHP 进程的帐户。那你就不需要这么多开放权限了。

因此，如果这是一个 Linux 系统并且网络服务器由名为“apache”的用户运行：

```
chown -R apache /path/to/the/files 
```

然后将权限更改为所有者读/写

```
chmod -R 644 /path/to/the/files 
```

# java - Web 应用程序中的乐观锁定

> ID：11363037
> 
> 赞同：0
> 
> 时间：2012-07-06T13:23:20.323
> 
> 标签：java, hibernate, concurrency, optimistic-locking

我们正在为我们的多租户应用程序构建客户配置工具。多个用户可以使用相同的配置，因此我们希望避免冲突。我们知道乐观锁定是要走的路。但是想知道如何向执行冲突操作的用户显示**增量？**显示状态消息很容易，但我们还想显示哪些数据处于冲突状态。欣赏你的想法。

编辑：数据不会作为一组表保存在数据库中，但它被序列化为 XML 文件，这就是保存在数据库中的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:31:53.647

你可以使用像[http://sourceforge.net/projects/jlibdiff/这样的库](http://sourceforge.net/projects/jlibdiff/)

# android - Activity下的屏幕模糊导致黑屏

> ID：11363039
> 
> 赞同：0
> 
> 时间：2012-07-06T13:23:30.517
> 
> 标签：android

当我使用

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_BLUR_BEHIND,
                WindowManager.LayoutParams.FLAG_BLUR_BEHIND); 
```

在我`Activity`的当前屏幕下，我没有得到轻微模糊的屏幕，`Activity`但完全是黑色的（顶部`Activity`很好）。需要说它在SDK附带的样本中也是黑色的。有人可以建议如何使它模糊吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:39:12.650

在您的 AndroidManifest.xml 中，将此行添加到您的 Activity 声明中：`android:theme="@android:style/Theme.Translucent.NoTitleBar"`否则该 Activity 将具有纯色背景（因此模糊无效）。

[此外， StackOverflow](https://stackoverflow.com/questions/3221488/blur-or-dim-background-when-android-popupwindow-active)上的这篇文章很有帮助，尤其是警示性说明。在较旧的设备上，这会导致您的应用程序变得无响应（这是一种 CPU 密集型软件渲染），而在较新的设备上，此常量已被弃用并且不再有任何影响（请参阅[WindowManager.LayoutParams](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_BLUR_BEHIND)的 Android 文档）。

在最新版本的操作系统上已弃用（查看文档）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T00:53:38.133

注意：标志 FLAG_BLUR_BEHIND 已贬值。

您可以使用 FLAG_DIM_BEHIND 代替。

# android - 如何在 EditText 中显示格式化文本？

> ID：11363042
> 
> 赞同：2
> 
> 时间：2012-07-06T13:23:44.963
> 
> 标签：android, string, android-edittext

现在我正在编写简单的笔记应用程序。我需要在 EditText 中显示格式化的单独选定文本。

我试过了，

```
EditText et = (EditText)findViewById(R.id.edittext);
String string;
int startSelection = et.getSelectionStart();
int endSelection = et.getSelectionEnd();

string = et.getText().toString();
string.substring(startSelection, endSelection);

Spanned s = Html.fromHtml("<font color=\"red\">" + string + "</font>");

et.setText(s); 
```

此解决方案仅显示单独的选定文本。但我需要在其他文本中显示格式化文本。我不知道。

UPD：格式化发生，当用户点击按钮时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:45:13.210

尝试这个

```
EditText text = new EditText(this); 
text.setText(Html.fromHtml(html));
text.setMovementMethod(LinkMovementMethod.getInstance()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:33:53.933

尝试使用这个

```
String string = et.getText().toString();
    String selectedString = string.substring(startSelection, endSelection);

    Spanned s = Html.fromHtml(string.replace(selectedString, "<font color=\"red\">" + selectedString + "</font>")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:35:21.187

如果您谈论格式化文本，您总是可以这样做

```
EditText et = new EditText(this);
et.setText(Html.fromHtml("Simple Text <B>Formatted Text</B> Simple Text Again")); 
```

如果你想要`linkify`文本的特定部分，然后使用这个[博客这样做](http://www.sherif.mobi/2011/09/html-and-activity-links-in-textview.html)

```
 EditText mTextSample = new EditText(this);
    String text = "click to see stackoverflow.com here";   
    mTextSample.setText(text);        
    Pattern pattern = Pattern.compile("stackoverflow.com");   
    Linkify.addLinks(mTextSample, pattern, "http://"); 
```

# ruby - Rails应用程序没有释放内存？

> ID：11363045
> 
> 赞同：2
> 
> 时间：2012-07-06T13:23:56.480
> 
> 标签：ruby, ruby-on-rails-3, memprof, oink, objectspace

在我的 Rails 应用程序中，总对象随着每个请求而增加。GC 运行后对象未释放。我正在使用 Rails 3.2.3 和 ruby​​ 1.9.3。

有人可以指出我正确的方向吗？从哪儿开始？

有哪些可用的工具？

我试过的工具。ObjectSpace 没有引用创建这些对象的行。Memprof 不适用于 ruby​​ 1.9.3。Oink 没有引用创建这些对象的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:12:38.203

[perftools.rb](https://github.com/tmm1/perftools.rb)有能力提到哪些方法创建了多少对象：

> CPUPROFILE_OBJECTS=1
> 
> 分析对象分配而不是 cpu/wall 时间。每个样本代表在该函数内创建的一个对象。

但是，这是分析所有对象，而不仅仅是非垃圾收集的对象。此外，它[有时](https://stackoverflow.com/questions/10947829/debugging-a-ruby-segfault)会在我身上出现段错误。

# google-sheets - 如何找出一个数字的最长运行？

> ID：11363049
> 
> 赞同：0
> 
> 时间：2012-07-06T10:06:18.307
> 
> 标签：google-sheets, google-sheets-formula

这对我来说似乎是一个微不足道的问题，但我无法正确完成。我的数据集的一部分看起来像这样

```
1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0 
```

并包含两个 1 的“运行”（不确定这是否是正确的词），一个长度为 3，另一个长度为 5。

如何使用 Google Docs 或类似的电子表格应用程序找到最长的运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:29:53.010

在 Excel 中，您可以使用单个公式来获得连续 1 的最大数量，即

```
=MAX(FREQUENCY(IF(A2:A100=1,ROW(A2:A100)),IF(A2:A100<>1,ROW(A2:A100)))) 
```

用`CTRL`+ `SHIFT`+确认`ENTER`

在 Google 表格中，您可以使用相同的公式，但使用数组公式而不是使用 CSE，即

```
=arrayformula(MAX(FREQUENCY(IF(A2:A100=1,ROW(A2:A100)),IF(A2:A100<>1,ROW(A2:A100))))) 
```

假设 A2:A100 中的数据没有空格

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T11:54:18.447

编辑：whuber 的建议对我来说太简单了，无法更新此回复。可以只使用一个简单的 IF 语句检查当前行是否等于 1。如果是，它启动一个计数器（前一行 + 1），如果不是，它再次从 0 开始计数器。

您只需要将 B1 的第一行初始化为 1 或 0。一旦您将单元格公式写入并填充其余部分，就使用它的动态更新。

所以你会开始；

```
A   B
1   1
1   =IF(A2=1, B1+1, 0)
1   
0   
0   
1   
1   
1   
1   
0   
0   
0 
```

然后填写；

```
A   B
1   1
1   =IF(A2=1, B1+1, 0)
1   =IF(A3=1, B2+1, 0)
0   =IF(A4=1, B3+1, 0)
0   =IF(A5=1, B4+1, 0)
1   =IF(A6=1, B5+1, 0)
1   =IF(A7=1, B6+1, 0)
1   =IF(A8=1, B7+1, 0)
1   =IF(A9=1, B8+1, 0)
0   =IF(A10=1, B9+1, 0)
0   =IF(A11=1, B10+1, 0)
0   =IF(A12=1, B11+1, 0) 
```

这里B列的结果是；

```
A   B
1   1
1   2
1   3
0   0
0   0
1   1
1   2
1   3
1   4
0   0
0   0
0   0 
```

希望逻辑可以扩展到 Google Docs。

# javascript - 发生模糊事件时，如何备份元素上的选定文本？

> ID：11363051
> 
> 赞同：1
> 
> 时间：2012-07-06T13:24:15.227
> 
> 标签：javascript, text, selection, onblur

我尝试在 JavaScript 中备份一个 TextRange 对象以便稍后恢复它，因此我尝试将一个函数链接到模糊事件，但是当调用该函数时，我的选择已经丢失：/ 我如何在运行之前运行特定行为模糊事件？或者你有其他解决方案来做这个技巧吗？

我试过这个：

```
this._editableFrame._elt.onload= function(oEvent){
    oEvent.srcElement.contentDocument.body.onblur=function(oEvent) {
    this._sel=this.document.selection.createRange().duplicate(); } 
    /*alert(this._sel.text);*/
    return true; 
}; 
```

当我这样做时，我只有一个空的TextRange：/但是如果我在函数中写了一个“警报”，我成功地在模糊函数中获得了我的文本选择：/我如何捕获模糊事件以及我能做什么这种类型的操作？我是 javascript 的初学者。

非常感谢，我在这个问题上花了很多时间......：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:45:21.963

我认为模糊事件并不完美，这可能会对您有所帮助

```
var selectedText = "";
function getSelectedText()
{
    if (typeof window.getSelection != "undefined") {
        selectedText = window.getSelection().toString();
    }
    else if (typeof document.selection != "undefined" && document.selection.type == "Text")
    {
        selectedText = document.selection.createRange().text;
    }
}

function show_selected_text()
{
     getSelectedText();
    if(selectedText) alert(selectedText);
}

document.onmouseup = show_selected_text;
document.onkeyup = show_selected_text; 
```

[**演示。**](http://jsfiddle.net/rrgED/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T20:32:13.400

由于您似乎只在谈论 IE，我建议您使用 IE-only`beforedeactivate`事件。该`blur`事件为时已晚，并且您的选择在它触发时已经消失。

```
this._editableFrame._elt.onload = function(oEvent){
    oEvent.srcElement.contentDocument.body.onbeforedeactivate=function(oEvent) {
        this._sel=this.document.selection.createRange().duplicate();
    };
}; 
```

这是我对类似问题的回答：

[https://stackoverflow.com/a/5338889/96100](https://stackoverflow.com/a/5338889/96100)

# java - 如何在自定义 Tapestry 5 组件中使用 jQuery

> ID：11363058
> 
> 赞同：0
> 
> 时间：2012-07-06T13:24:26.257
> 
> 标签：java, jquery, tapestry

我正在尝试创建一个组件，如果给定以下 tml：

```
<t:slideout>
    <p:header>Short Description of Data</p:header>

    Long Details about the data here
</t:slideout> 
```

这应该最初在 header 参数中呈现块，当单击此块时，我希望使用 jQuery .slideDown() 函数或等效函数滑出长详细信息部分。

目前我有以下课程：

```
public class slideout
{
    @Parameter(name="header", defaultPrefix = BindingConstants.LITERAL)
    private Block headerBlock;

    public Block getHeader() 
    {
    return headerBlock;
    }
} 
```

和相应的 slideout.tml 文件：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
    xmlns:p="tapestry:parameter">
<body>
    <t:delegate to="header"/>
    <t:body/>
</body>
</html> 
```

我们已经在使用 Tapestry5-jQuery 库，这个组件需要能够在同一个页面上多次使用，所以我也不确定如何确保在渲染页面时没有 ID 冲突。

我不知道从哪里开始，如果我在原始 HTML/jQuery 中这样做，我会做类似的事情

```
$('slideout-header').click(function() {
    $(this).next('slideout-body').slideDown();
}); 
```

但是我不确定构建这些类的“Tapestry”方式是什么。在 Tapestry 5 中解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:53:20.450

您可以在 Slideout.tml 旁边添加一个 Slideout.js 文件：

```
Tapestry.Initializer.Slideout = function (parameters) {
    var yourClientId = parameters.clientId;
    //your javascript init script here
}; 
```

添加到您的 Slideout.java：

```
@Import(library = {"Slidout.js"})
public class Slideout {

    @Inject
    private JavaScriptSupport javaScriptSupport;

    @Parameter(name="header", defaultPrefix = BindingConstants.LITERAL)
    private Block headerBlock;

    @Property
    @Parameter(value = "prop:componentResources.id", defaultPrefix = "literal")
    private String clientId;

    @AfterRender
    private void afterRender() {
        JSONObject props = new JSONObject();
        props.put("clientId", clientId);
        javaScriptSupport.addInitializerCall("Slideout", props);
    }

    public Block getHeader() 
    {
        return headerBlock;
    }
} 
```

和您的 Slideout.tml（请注意，我删除了 html 以便您可以将 Slideout 用作组件）

```
<div id="${clientId}" xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
    xmlns:p="tapestry:parameter">
    <t:delegate to="header"/>
    <t:body/>
</div> 
```

**免责声明：**我没有测试过这段代码，所以玩一玩。

# java - JMock jars 在 Android 测试项目中不起作用（项目不构建）

> ID：11363064
> 
> 赞同：1
> 
> 时间：2012-07-06T13:24:41.670
> 
> 标签：java, android, mocking

我创建了 Android 测试项目并想在其上使用 JMOCK。我在我的项目类路径中包含以下 jar

*   amcrest-all-1.1.jar
*   jmock-2.5.1.jar
*   jmock-junit4-2.5.1.jar
*   junit.jar
*   objenesis-1.0.jar

直到编译我收到此错误消息：

> [2012-07-06 17:14:40 - mockTest] Dx ...在字节码偏移量 0000001b 本地 [0000]：Lorg/hamcrest/generator/qdox/parser/impl/JFlexLexer；本地人[0001]：我本地人[0002]：[C本地人[0003]：[C本地人[0004]：[我本地人[0005]：[我本地人[0006]：本地人[0007]：本地人[0008]：本地人[0009]：locals[000a]：locals[000b]：locals[000c]：locals[000d]：locals[000e]：locals[000f]：locals[0010]：stack[top0]：[B ...而处理块 001b ...同时处理方法 yylex:()I ...同时处理 yylex ()I ...同时处理 org/hamcrest/generator/qdox/parser/impl/JFlexLexer.class
> 
> [2012-07-06 17:14:40 - mockTest] Dx 1 错误；中止 [2012-07-06 17:14:40 - mockTest] 转换为 Dalvik 格式失败，错误 1

问题是什么？类路径中是否有任何不正确的 jar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:29:32.913

问题是 JMock 使用动态字节码生成来工作，但 Dalvik 无法做到这一点：动态字节码生成被编译为 Dalvik 不支持的 JVM 字节码；因此转换时出现错误。

不幸的是，这意味着你不能在 Android 上使用 JMock——如果你需要它来进行测试，你必须在 JVM 上运行这些测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:31:34.427

您似乎包含`JAR`了具有相同包名的包？在 Android 依赖项中打开所有 jar 并确保每个 jar 都有唯一的包。

# msbuild - 使用 $(BuildAgentId) 时的 Team Build TF10122 错误

> ID：11363065
> 
> 赞同：2
> 
> 时间：2012-07-06T13:24:44.347
> 
> 标签：msbuild, build-automation, tfsbuild

我正在尝试将此构建代理文件夹用于我的构建定义...

> $(SystemDrive)\Builds\$(BuildAgentId)\VPB

...但我收到以下错误。

> TF10122：路径“c:\Builds\$(BuildAgentId)\VPB”在路径组件的开头包含一个“$”。删除“$”并重试。

我需要包含一些东西来表示代理，因为我在构建服务器上有两个构建代理。

我试图保持路径简短，因为 InstallShield 的合并模块路径名称过长（子文件夹太多，并且在所有内容的末尾添加了 GUIDS）。

知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:20:04.550

确保您的构建定义和构建代理工作目录设置正确。

[设置构建代理工作目录和构建定义工作目录](http://blogs.msdn.com/b/buckh/archive/2007/08/14/tfs-2008-a-basic-guide-to-team-build-2008.aspx)

# php - php 注意 $GLOBALS['HTTP_SERVER_VARS']['HTTP_HOST'] 中未定义的索引 http_host

> ID：11363070
> 
> 赞同：2
> 
> 时间：2012-07-06T13:25:00.493
> 
> 标签：php, http, host

突然，在最近的 php 版本更新后，我从 php 收到了这个通知。它用于多个地方（特别是我的 htmlMimeMail 类）。

代码是：`$mail->setSMTPParams('*mail.xxxx.xxx*', 26, $GLOBALS['HTTP_SERVER_VARS']['HTTP_HOST'], 1, '*email-name*', '*email-password*');`

通知是： `Undefined index: HTTP_HOST in xxxx on line xxx`

代码似乎运行良好，但通知很烦人，我希望使用通知是有原因的。如何清除此通知？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:26:37.880

`$HTTP_SERVER_VARS`已弃用；使用[`$_SERVER`](http://php.net/manual/en/reserved.variables.server.php)：

```
$mail->setSMTPParams('*mail.xxxx.xxx*', 26, $_SERVER['HTTP_HOST'], 1,
    '*email-name*', '*email-password*'); 
```

# vb.net - 在保持结构正确的同时设置这些类型

> ID：11363074
> 
> 赞同：0
> 
> 时间：2012-07-06T13:25:08.930
> 
> 标签：vb.net, types

我完全陷入了困境，我不知道从这里去哪里。我正在创建一个非常大的项目，所以我的目标是保持代码本身尽可能干净，并尽可能多地避免混合。

这是情况。

我有一个名为 的类`Woo_Type`，它是我的许多派生类的父类。

```
Public MustInherit Class Woo_Type

    Private Shared TypeList As New Dictionary(Of String, Woo_Type)

    Public MustOverride Sub SetValue(ByVal val As Object)
    Public MustOverride Function GetValue() As Object

    Public Shared Function GetTypeFromName(ByVal name As String) As Woo_Type
        Return TypeList(name)
    End Function

    Public Shared Sub AddType(ByVal name As String, ByVal def As Woo_Type)
        TypeList.Add(name, def)
    End Sub

End Class 
```

我有许多从中继承的类`Woo_Type`具有与此类似的结构：

```
Public Class Woo_tpInt
    Inherits Woo_Type

    Private value As Integer = 0

    Public Overrides Function GetValue() As Object
        Return value
    End Function

    Public Overrides Sub SetValue(val As Object)
        value = val
    End Sub

End Class 
```

我希望能够执行以下操作：

`Woo_Type.GetTypeFromName("int")`

并让它返回诸如类之类的东西......

在这一点上，我真的很困惑我想要什么，我不知道是否有人有任何建议。为了确保它`GetTypeFromName`正常工作，我在 Initializer 子中有以下内容：

```
Public Sub InitializeTypes()
    Woo_Type.AddType("int", Woo_tpInt)
    Woo_Type.AddType("String", Woo_tpInt)
End Sub 
```

但我很快意识到——这显然也行不通。

所以这可能看起来令人困惑，但我基本上想知道如何更好地构建它，以便一切正常......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:25:34.347

如果您想做的是获取类型本身（而不是对象），我建议您使用反射而不是尝试重新发明轮子。例如，要获取`Woo_tpInt`类型，您可以这样做：

```
Dim a As Assembly = Assembly.GetExecutingAssembly()
Dim t As Type = a.GetType("WindowsApplication1.Woo_tpInt") ' Change WindowsApplication1 to whatever your namespace is 
```

如果您想使用较短的名称，例如`"int"`mean `"WindowsApplication1.Woo_tpInt"`，您可以创建一个字典来存储翻译表，例如：

```
Dim typeNames As New Dictionary(Of String, String)
typeNames.Add("int", GetType(Woo_tpInt).FullName)

Dim a As Assembly = Assembly.GetExecutingAssembly()
Dim t As Type = a.GetType(typeNames("int")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T14:27:38.667

你想对结果做什么？你确定你不只是需要泛型吗？

```
Public Class WooType(Of T)
    Public Property Value As T
End Class

Public Class Test
    Public Sub Foo()
        Dim int As New WooType(Of Integer)
        int.Value = 42
        Dim str As New WooType(Of String)
        str.Value = "Forty-Two"
    End Sub
End Class 
```

# c# - Web服务读取文件，它们被锁定了吗？

> ID：11363080
> 
> 赞同：0
> 
> 时间：2012-07-06T13:25:36.007
> 
> 标签：c#, web-services, file, locking

我有一个使用 StreamReader 读取 .txt 文件并将响应发送回用户的网络服务。如果多人调用我的网络服务，.txt 文件是否会被“锁定”，因此一次只能处理一个请求？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:31:32.257

使用流式阅读器读取期间文件未锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:39:30.983

我认为这取决于。是否对文本文件进行了任何更改？如果不是，那么文件不应该被锁定，因为一旦它被打开，它应该被使用 stremreader 对象读入流中，然后关闭。参考

[如何使用 .net StreamReader 打开已打开的文件？](https://stackoverflow.com/questions/897796/how-do-i-open-an-already-opened-file-with-a-net-streamreader)

和

[http://msdn.microsoft.com/en-us/library/db5x7c0d.aspx](http://msdn.microsoft.com/en-us/library/db5x7c0d.aspx)

> 此代码通过调用 File.OpenText 创建指向 MyFile.txt 的 StreamReader。StreamReader.ReadLine 将每一行作为字符串返回。当没有更多要读取的字符时，将显示一条消息，并关闭流。

# c# - 获取字符串中第 n 次出现 char 的索引

> ID：11363083
> 
> 赞同：17
> 
> 时间：2012-07-06T13:26:02.850
> 
> 标签：c#, .net, string

我正在尝试创建一个函数，该函数返回字符串中给定字符第 N 次出现的索引。

这是我的尝试：

```
private int IndexOfNth(string str, char c, int n)
{
    int index = str.IndexOf(c) + 1;
    if (index >= 0)
    {
        string temp = str.Substring(index, str.Length - index);
        for (int j = 1; j < n; j++)
        {
            index = temp.IndexOf(c) + 1;
            if (index < 0)
            {
                return -1;
            }
            temp = temp.Substring(index, temp.Length - index);
        }
        index = index + (str.Length);
    }
    return index;
} 
```

这*应该*找到第一次出现，砍掉字符串的前面部分，从新的子字符串中找到第一次出现，然后一直到它获得第 n 次出现的索引。但是我没有考虑最终子字符串的索引将如何从原始字符串中的原始实际索引偏移。我该如何进行这项工作？

另外作为一个附带问题，如果我希望 char 成为制表符，我应该传递这个函数 '\t' 还是什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-06T13:29:27.407

不要那样做；`IndexOf`接受第二个参数，指定从哪里开始。

```
private static int IndexOfNth(string str, char c, int n) {
    int s = -1;

    for (int i = 0; i < n; i++) {
        s = str.IndexOf(c, s + 1);

        if (s == -1) break;
    }

    return s;
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-07-06T13:29:03.790

获取所有这些子字符串对我来说似乎很浪费。为什么不自己循环呢？

```
private int IndexOfNth(string str, char c, int n)
{
    int remaining = n;
    for (int i = 0; i < str.Length; i++)
    {
        if (str[i] == c)
        {
            remaining--;
            if (remaining == 0)
            {
                return i;
            }
        }
    }
    return -1;
} 
```

（我考虑`IndexOf`过像 minitech 的解决方案一样在循环中使用，但认为它有点繁琐。当然，两者都可以。两者基本上都做相同的工作，只检查每个字符一次。使用`IndexOf`可能会稍微更有效率，但选择哪个你会发现更具可读性。）

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-06T13:33:55.977

使用 LINQ 查找`a`字符串中第 5 个的索引`aababaababa`：

```
var str = "aababaababa";
var ch = 'a';
var n = 5;
var result = str
  .Select((c, i) => new { c, i })
  .Where(x => x.c == ch)
  .Skip(n - 1)
  .FirstOrDefault();
return result != null ? result.i : -1; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-06T13:55:37.600

我倾向于首先考虑如何使用 Linq 访问集合。

```
 // 0-based n.
char result = str
  .Where(x => x == c)
  .Skip(n)
  .FirstOrDefault(); 
```

然后我将解压缩 linq 并添加索引迭代。

```
int foundCount = -1;
for(int position = 0; position < str.Length; position++)
{
  char x = str[position];
  if (x == c)
  {
    foundCount += 1;
    // 0-based n
    if (foundCount == n)
    {
      return position;
    }
  }
}
return -1; 
```

然后我想：如果这个方法返回所有索引以便我可以查询它们：

```
public IEnumerable<int> IndexesOf(string str, char c)
{
  for(int position = 0; position < str.Length; position++)
  {
    char x = str[position];
    if (x == c)
    {
      yield return position;
    }
  }
} 
```

调用者：

```
int position = IndexesOf(str, c)
 .Skip(n) // 0-based n
 .DefaultIfEmpty(-1)
 .First(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T13:28:50.210

[为什么不使用带有起始索引](http://msdn.microsoft.com/en-us/library/5xkyx09y.aspx)[的`IndexOf`](http://msdn.microsoft.com/en-us/library/5xkyx09y.aspx)重载，而不是创建一堆子字符串？这将更容易（您不必调整最终索引）和更高效（您不必分配一堆子字符串）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-06T13:34:20.663

未经测试，但这样的事情应该可以工作：

```
private int IndexOfNth(string str, char c, int n)
{
    int index = -1;
    while (n-- > 0)
    {
        index = str.IndexOf(c, index + 1);
        if (index == -1) break;
    }
    return index;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-06T18:46:24.747

还没有看到有人使用 CharEnumerator...

```
 public Int32 getNthIndex(string str, char c, Int32 n)
    {
        Int32 index = 0;
        Int32 count = 0;
        if (str != null && str.Length > 0 && !(n < 1))
        {
            CharEnumerator scanner = str.GetEnumerator();
            while (scanner.MoveNext())
            {
                if (scanner.Current == c) { count++; }
                if (count == n) { break; }
                index++;
            }
            if (count < n) { index = -1; }
        }
        if (count == 0) { return -1; } else { return index; }
    } 
```

应该非常有效，没有子字符串或任何东西，只需扫描您给出的字符串并保持计数。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-28T02:35:25.300

您可以使用以下方法返回指定字符串中指定字符的第 n 次出现。

```
public static int IndexOfNthCharacter(string str, int n, char c) {
    int index = -1;
    if (!str.Contains(c.ToString()) || (str.Split(c).Length-1 < n)) {
        return -1;
    }
    else {
        for (int i = 0; i < str.Length; i++) {
            if (n > 0) {            
                index++;
            }
            else {
                return index;
            }
            if (str[i] == c) {
                n--;
            }
        }
        return index;
    }
} 
```

请注意，如果您正在搜索的字符串中不存在您正在搜索的字符，或者您正在搜索的出现次数大于字符串中存在的次数，则此方法将返回 -1。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-29T14:21:28.487

首先，我将其作为扩展方法。这样，您可以跳过其他强制性`null`检查，也可以像使用 等那样在字符串上调用`IndexOf`它`IndexOfAny`。

然后我会做这两种方法。一个检索所有索引（`IndexesOf`，有时可能会派上用场），另一个（`IndexOfNth`）使用第一个函数检查第 n 个索引：

```
using System;
using System.Collections.Generic; // # Necessary for IList<int>
using System.Linq; // # Necessary for IList<int>.ToArray()

/// <summary>
/// Returns all indexes of the specified <paramref name="value"/> in the current string.
/// </summary>
/// <param name="@this">The current string this method is operating on.</param>
/// <param name="value">The value to be searched.</param>
/// <returns><c>Null</c>, if <paramref name="value"/> is <c>null</c> or empty.
/// An array holding all indexes of <paramref name="value"/> in this string,
/// else.</returns>
static int[] IndexesOf(this string @this, string value)
{
    // # Can't search for null or string.Empty, you can return what
    //   suits you best
    if (string.IsNullOrEmpty(value))
        return null;

    // # Using a list instead of an array saves us statements to resize the 
    //   array by ourselves
    IList<int> indexes = new List<int>();
    int startIndex = 0;

    while (startIndex < @this.Length)
    {
        startIndex = @this.IndexOf(value, startIndex);
        if (startIndex >= 0)
        {
            // # Add the found index to the result and increment it by length of value
            //   afterwards to keep searching AFTER the current position
            indexes.Add(startIndex);
            startIndex += value.Length;
        }
        else
        {
            // # Exit loop, if value does not occur in the remaining string
            break;
        }
    }

    // # Return an array to conform with other string operations.
    return indexes.ToArray();
}

/// <summary>
/// Returns the indexes of the <paramref name="n"/>th occurrence of the specified
/// <paramref name="value"/> in the current string.
/// </summary>
/// <param name="@this">The current string this method is operating on.</param>
/// <param name="value">The value to be searched.</param>
/// <param name="n">The 1-based nth occurrence.</param>
/// <returns><c>-1</c>, if <paramref name="value"/> is <c>null</c> or empty -or-
/// <paramref name="n"/> is less than 1.</returns>
static int IndexOfNth(this string @this, string value, int n /* n is 1-based */)
{
    // # You could throw an ArgumentException as well, if n is less than 1
    if (string.IsNullOrEmpty(value) || n < 1)
        return -1;

    int[] indexes = @this.IndexesOf(value);

    // # If there are n or more occurrences of 'value' in '@this'
    //   return the nth index.
    if (indexes != null && indexes.Length >= n)
    {
        return indexes[n - 1];
    }

    return -1;
} 
```

`char value`您可以使用而不是在签名中重载这些`string value`，并调用它们各自的对应方传递`value.ToString()`. 瞧！

当然，这些方法可以重构，例如使用 LINQ、进行`IndexesOf`递归等。

# python - 如何为 Emacs 安装 python-mode.el？

> ID：11363089
> 
> 赞同：12
> 
> 时间：2012-07-06T13:26:23.327
> 
> 标签：python, emacs

我正在使用 Ubuntu 10.10 (Maverick Meerkat)。我已经`python-mode.el`从[Launchpad](https://wiki.ubuntu.com/Launchpad)下载并放在`emacs.d/plugins/`.

现在我该如何安装`python-mode.el`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T13:40:27.660

试试这个

```
(add-to-list 'load-path "~/.emacs.d/plugins")
(require 'python-mode) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T15:14:32.767

我发现根据编辑的文件类型自动加载适当的编辑模式更方便。有很多方法可以做到这一点，但我通常会在 autoload-alist 中添加一个条目：

```
(and (library-loadable-p "python-mode")
     (setq auto-mode-alist (append '(
                     ("\\.py\\'"       . python-mode)
                     )
                   auto-mode-alist))) 
```

对于我喜欢使用的各种模式，我有一长串清单。如果未安装 python-mode（或任何其他模式），它会静默失败。如果我在没有安装模式的 ISP 服务器上运行，我将 ~/lib/elisp 添加到加载路径并将丢失的 .el 文件放在那里。

library-loadable-p 来自朋友，只是测试文件是否在加载路径中的某个位置：

```
(defun library-loadable-p (lib &optional nosuffix)
  "Return t if library LIB is found in load-path.
Optional NOSUFFIX means don't try appending standard .elc and .el suffixes."
  (let ((path load-path)
    elt)
    (catch 'lib-found
      (while (car path)
    (setq elt (car path))
    (and
     (if nosuffix
         (file-exists-p (concat elt "/" lib))
       (or (file-exists-p (concat elt "/" lib ".elc"))
           (file-exists-p (concat elt "/" lib ".el"))
           (file-exists-p (concat elt "/" lib))))
     (throw 'lib-found t))
    (setq path (cdr path)))))) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-07T10:24:30.860

我建议克隆最新的快照：

```
cd ~/.emacs.d/site-lisp/python-mode
bzr branch lp:python-mode 
```

然后添加到`.emacs`：

```
(add-to-list 'load-path "~/.emacs.d/site-lisp/python-mode")
(setq py-install-directory "~/.emacs.d/site-lisp/python-mode")
(require 'python-mode) 
```

您可以稍后将其更新到最新版本：

```
bzr update 
```

但不要忘记重新编译：

```
(byte-recompile-directory (expand-file-name "~/.emacs.d/site-lisp/python-mode") 0) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-25T18:33:35.170

在 emacs 25 中，您可以使用 melpa 安装 python 模式，因此只需将其添加到您的 .emacs 文件中：

```
(require 'package)
(add-to-list 'package-archives
             '("melpa-stable" . "https://stable.melpa.org/packages/")) 
```

重新加载文件，然后键入，

```
Alt+x list-packages 
```

移动到你想要的包，

```
python-mode 
```

然后点击“回车”，在打开的新缓冲区中移动到`Install`并按回车。

这会导致 python-mode 安装在`~/.emacs.d/elpa`

现在在一个新的缓冲区`python-mode`中，编写代码并键入`C-u C-c C-c`以评估和显示输出。

# android - Android设备中的图像缩放

> ID：11363096
> 
> 赞同：0
> 
> 时间：2012-07-06T13:26:54.250
> 
> 标签：android, html, css

我使用css3在用户单击图像时缩放图像我将此css分配给它在浏览器上完美运行的图像但是当我在android上运行它时它不会缩放图像只有翻译方法正在工作

```
.scaleImage{
-moz-animation-name: AN-ani-17;
-webkit-animation-name: AN-ani-17;
-moz-animation-duration: 2s;
-webkit-animation-duration: 2s;
-moz-animation-delay: 0s;
-webkit-animation-delay: 0s;
-moz-animation-fill-mode: both;
-webkit-animation-fill-mode: both;
}
@-webkit-keyframes AN-ani-17 {
0% {
    -webkit-transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1);
   -webkit-animation-timing-function: ease;
}

50% {
    -webkit-transform: translate3d(0px, 380px, 0px) scale3d(1, 1.5, 1);
    -webkit-animation-timing-function: ease;
}

/*  75% {
    -webkit-transform: translate3d(0px, 270px, 0px) scale3d(1, 1.2, 1);
    -webkit-animation-timing-function: ease;
}*/

100% {
    -webkit-transform: translate3d(0px, 470px, 0px) scale3d(1, 1.6, 1);
    -webkit-animation-timing-function: ease;
}
}

@-moz-keyframes AN-ani-17 {
0% {
    -moz-transform: translate(0px, 0px) scale(1, 1);
    -moz-animation-timing-function: ease;
}

50% {
    -moz-transform:translate(0px, 380px, 0px) scale(1, 1.5, 1);
    -moz-animation-timing-function: ease;
}

100% {
    -moz-transform: translate(0px, 470px, 0px) scale(1, 1.6, 1);
    -moz-animation-timing-function: ease;
} 
```

}

如何在安卓设备上运行它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:30:38.813

我假设您使用的是 Android 2.2 或更高版本？CSS3 缩放在 Android 上不起作用是一个[已知的错误](http://code.google.com/p/android/issues/detail?id=12451)。如果您想修复它，请加注星标。

相关：[Android 2.2 上的 CSS3 动画闪烁（webkit-transform:translate(..) scale(..) 同时）](https://stackoverflow.com/questions/4270208/css3-animation-flicker-on-android-2-2-webkit-transformtranslate-scale)

# typo3 - 如何在 TYPO3 中创建精选新闻

> ID：11363102
> 
> 赞同：0
> 
> 时间：2012-07-06T13:27:21.403
> 
> 标签：typo3, tt-news

我想要一些类似“特色新闻”的东西，它只是选择要在主页上发布的新闻。在 TYPO3 中是否有一种简单的方法可以做到这一点？

我正在考虑创建一个新类别“精选新闻”，在创建文章时，您会将其分配给它的类别和这个类别。但这非常笨拙——由于[这个错误](http://bugs.typo3.org/view.php?id=18365)，您无法直接执行此操作，必须首先添加只有一个类别的新闻，然后对其进行编辑并添加另一个。

**我想必须有一些更正确的解决方案来处理特色而不是破解类别？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:36:22.110

我认为使用类别是最好的方法。要添加更多类别，只需保存并继续编辑。

另一种选择是创建一个扩展，将此功能添加到 tt_news，但这可能是矫枉过正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:25:50.840

您还可以将新闻放在单独的文件夹中，并将列表设置为仅显示其中的新闻。

顺便说一句，不要使用旧的 bugtracker，问题已移至伪造： http: [//forge.typo3.org/issues/23789](http://forge.typo3.org/issues/23789)

# php - 单个 symfony 路由中的多个模式

> ID：11363103
> 
> 赞同：27
> 
> 时间：2012-07-06T13:27:21.927
> 
> 标签：php, symfony, routing

如何在单个 Symfony 路由中创建多个模式？

通常我们有一个路由

```
blog:
    pattern:   /
    defaults:  { _controller: AcmeBlogBundle:Blog:index, page: 1 } 
```

是否可以有两种路由模式？

就像是

```
blog:
    #Below pattern to match with '/' or '/index'    
    pattern:   {/ , /index}  
    defaults:  { _controller: AcmeBlogBundle:Blog:index, page: 1 } 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-06T14:10:28.230

你在使用 Symfony2 吗？如果您可以并且可以为路由使用注释而不是 yml 或 xml，那么可以沿这些行定义多个路由：

```
/**
* @Route("/");
* @Route("/home");
*/ 
```

那么你就不需要复制动作方法了。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-06T13:45:56.950

最简单的方法是复制块并制作 2 条路线。

```
blog:
    pattern:   /
    defaults:  { _controller: AcmeBlogBundle:Blog:index, page: 1 }

blog_index:
    pattern:   /index
    defaults:  { _controller: AcmeBlogBundle:Blog:index, page: 1 } 
```

因此，如果需要，您可以在路径中同时使用它们。

[在这里](https://stackoverflow.com/questions/7706887/symfony2-how-to-allow-slug-with-dashes-in-routes-regex)你可以看到另一篇文章如何在你的路由中使用正则表达式。也许您可以编写一个简单的正则表达式，它检查是否设置了**索引**。

**编辑：**

如果您使用我更喜欢的注释，那么您可以在控制器的 Action 方法上编写多个路由。像这样的东西：

```
/**
* @Route("/");
* @Route("/home");
*/ 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-11-07T19:26:37.820

使用 YAML 路由时，您还可以使用[节点锚点](http://yaml.org/spec/1.2/spec.html#id2785586)表达式语法来引用现有路由定义。

`&`指定锚点的第一次出现，`*`指定要引用的锚点，`<<`告诉[Symfony yaml 解析器](https://github.com/symfony/yaml/blob/2.8/Parser.php#L184)合并指定的节点。

```
blog: &blog
  path: /
  defaults:  { _controller: AcmeBlogBundle:Blog:index, page: 1 }

blog_index:
  <<: *blog
  path: /index

blog_page:
  <<: *blog
  path: /blog 
```

* * *

[或者，您可以在路由属性值](https://github.com/symfony/yaml/blob/2.8/Parser.php#L515)上使用锚点。

```
blog:
  path: /
  defaults: &blog_defaults
    _controller: AcmeBlogBundle:Blog:index
    page: 1

blog_index:
  path: /index
  defaults: *blog_defaults

blog_page:
  path: /blog
  defaults: *blog_defaults 
```

* * *

但是，为了防止因重复内容而导致 SEO 不佳，建议改用[重定向](http://symfony.com/doc/2.8/routing/redirect_in_config.html)。

```
blog:
  path: /
  defaults: { _controller: AcmeBlogBundle:Blog:index, page: 1 }

blog_index:
  path: /index
  defaults: &blog_redirect
    _controller: FrameworkBundle:Redirect:redirect
    route: blog
    permanent: true

blog_page:
  path: /blog
  defaults: *blog_redirect 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-25T09:06:34.270

只是为了补充约翰的回答：

我在 FOSJsRoutingBundle 中经常使用它：

```
/**
 * @Route("/", name="route_name_1", options={"expose"=true})
 * @Route("/{id}", name="route_name_2", options={"expose"=true})
 * @Method("GET")
 * @Template()
 */ 
```

这样我就有了一种方法和两条路线。

只需记住设置默认 $id 值：

```
public function indexAction($id = null)
{
   ...
} 
```

# sequence - Mahout seqdirectory 没有创建新文件

> ID：11363105
> 
> 赞同：0
> 
> 时间：2012-07-06T13:27:22.563
> 
> 标签：sequence, mahout

我正在尝试将文本文件转换为可以在其上运行 mahout kmeans 的序列文件。当我运行 seqdirectory 实用程序时，我没有收到任何错误，它表示程序已完成。但是，当我查看输出目录时，它是空的。我环顾四周，找不到任何解决方案。想法？

这是我在终端中运行的内容： hduser@ubuntu:~$ $MAHOUT_HOME/bin/mahout seqdirectory --input Downloads/google/ --output Downloads/sparsefiles/ -c UTF-8

这是我得到的输出：12/07/06 06:24:19 INFO driver.MahoutDriver：程序花费了 1091 毫秒（分钟：0.018183333333333333）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:29:15.707

我认为它可能会在 hdfs 上产生输出。尝试检查：

```
hadoop dfs -ls Downloads/sparsefiles/ 
```

此外，为了确保它在您的本地文件系统中生成，您可以修改以下命令：

```
$MAHOUT_HOME/bin/mahout seqdirectory --input file://<home path>/Downloads/google/ --output file://<home path>/Downloads/sparsefiles/ -c UTF-8 
```

# c# - 每个场景的渲染目标，用于过渡

> ID：11363109
> 
> 赞同：0
> 
> 时间：2012-07-06T13:27:55.420
> 
> 标签：c#, xna, transition, scene

我正在尝试为过渡提出一个一般概念，而不必在实际场景中包含任何特定代码。到目前为止，在我看到的所有示例中，场景都会自行处理这些内容。就像淡入/淡出一样，场景必须调整它们的绘制方法，以获得正确的透明度。但这不仅会在每个场景中都令人讨厌，而且通过多种转换，您会很快得到混乱的代码。

所以我一直在想。我能想出的唯一方法来支持这一点，更复杂的过渡，而不在场景本身中处理它，是每个场景的渲染目标。渲染目标将在调用 draw 方法之前从场景管理器中设置。绘制后，渲染目标将重置为管理器的渲染目标，并且场景的纹理将使用有关当前转换的信息进行绘制。如果必须绘制更多场景，则在不清除管理器纹理的情况下会出现更多场景。这样你几乎可以做任何事情（过渡），场景将完全相互独立，并且在实际场景中你不需要一行过渡代码。（作为参考，我希望能够做各种过渡类型。不仅是淡入淡出，还有着色器效果，

嗯，这就是我的理论。我的问题来了：这听起来像是一个可行的计划吗？这是要走的路吗？我读过关于过于频繁地切换渲染目标时的性能问题以及其他问题，这是我犹豫要实现它的主要原因。但到目前为止，我想不出或找到更好的方法。虽然我认为它不应该有所作为，但目前我只关心 2D（以防万一）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:24:28.467

这通常是一种合理的方法，但要注意渲染目标切换成本。此外，如果每个场景都在过渡时进行动画处理，您将同时将两个场景渲染到两个不同的渲染目标中，然后在屏幕上合成结果。

# android - 创建一个类似新的 YouTube 应用程序的菜单

> ID：11363112
> 
> 赞同：1
> 
> 时间：2012-07-06T13:28:03.203
> 
> 标签：android, menu

任何想法我们如何制作一个类似于谷歌在他们的 YouTube 应用中实现的菜单。我已[阅读此内容](https://stackoverflow.com/questions/8657894/android-facebook-style-slide/8673805#8673805)，但该解决方案与 YouTube 应用程序的行为不同。有谁知道真正的解决方法？

我说的是这个：

![在此处输入图像描述](../Images/efacd07f1389d3b3d1bacd93684fb144.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:34:22.717

我相信他们在RelativeLayout 中使用Horizo​​ntalScroll。

菜单始终在左侧的图像。你先做那个。然后在其上放置一个 Horizo​​ntalScrollView，然后将主要内容放入其中。将您的水平滚动属性设置为仅滚动某个最大值。然后你连接你的菜单按钮，将你的水平滚动视图滑动到你设置的最大值，这应该是它。

您可以随时检查 ICS 中人员应用程序的来源。他们做的事情非常相似。

# javascript - 使用 jQuery .promise() 调用 clearInterval()

> ID：11363115
> 
> 赞同：3
> 
> 时间：2012-07-06T13:28:24.833
> 
> 标签：javascript, jquery, setinterval, clearinterval, promise

我最近对 ​​setInterval 和 clearInterval 进行了很多试验，以创建自己的自定义效果，而我一直在做的事情之一是清除间隔同时远离全局范围的有效方法。我正在尝试通过使用 .promise() 调用 clearInterval() 来提高可读性并探索可能的性能提升（以下是我正在尝试做的示例）：

```
//caller is a collection of elements
function performEffect(caller) {
   var interval = setInterval(function() { caller.next(); }, 500);
   caller.promise().done(function() { interval = clearInterval(interval); });
} 
```

直到最近，我一直在使用嵌入式函数设置和清除间隔（示例）：

```
function performEffect(caller) {
   var interval;
   var count = 0;
   var len = caller.length;

   if (count >= len) {
       interval = clearInterval(interval);
   }

   var tmr = function () {
       interval = setInterval(function () { effectFunciton(count++); }, 100);
   }
} 
```

PS 我很抱歉没有发布原版 - 我的版本控制系统已损坏。另外，我知道这个例子有点傻，因为我可以很容易地使用 for 循环或 .each()，但这只是一个例子——我确实有一些我不想使用循环的实例。

这是我的第一篇文章，所以如果我做的事情与公认的做法不同，我会提前道歉。请让我知道我将来是否可以做些什么来改进我的帖子——我总是乐于接受建设性的批评:)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T13:44:23.057

您需要为此使用延迟。不久前，我在 jsfiddle 上写了一个示例，可能会给您一些见解。

[http://jsfiddle.net/landau/M3Lj4/](http://jsfiddle.net/landau/M3Lj4/)

从您的代码来看，您似乎误解了一般的延迟，或者这里没有足够的代码来说明您在做什么。承诺隐藏`resolving`和`rejecting`功能

基本上，

```
var deferred = $.Deferred();
var promise = deferred.promise();

// This will only run once
var timer = setInterval( function () {
    deferred.resolve();
}, 1000);

promise.done(function () {
    clearInterval( timer );
}); 
```

# asp.net - 90 秒后 ASP.NET 请求超时 - 服务不可用 503

> ID：11363118
> 
> 赞同：3
> 
> 时间：2012-07-06T13:28:41.870
> 
> 标签：asp.net, ajax, timeout, httprequest

我的 Web 应用程序 (ASP.NET 4.0) 从客户端调用服务器（使用 AjaxPro 库，但我认为这没有任何区别）。该调用正在服务器上启动一个可能长时间运行的任务——有时可能需要大约 5 分钟才能完成。这次我很乐意等待，但由于某种原因，我的请求在正好 90 秒后被中断 - 2 m 60 秒（根据 FireBug）。它发回服务不可用 503 消息。仅当我在 IIS (7.0) 上托管我的应用程序时才会发生这种情况，它在我的本地 PC 上以 ASP.NET 开发服务器上的 VS2010 的调试模式运行而没有问题（即处理所有 5 分钟的请求而不会中断它）。

到目前为止，我已经尝试了几件事：

*   我增加了 AjaxPro 全局超时：AjaxPro.timeoutPeriod = 1000000;
*   我修改了我的 web.config 文件，如下所示：

    <httpRuntime maxRequestLength="102400" executionTimeout="360" /> <sessionState timeout="60"></sessionState>

*   在 IIS 管理器 -> 站点 -> 我的网站 -> 高级设置中，我增加了连接超时（秒）属性的值。

![在此处输入图像描述](../Images/ee60f83256183afb48bc3d58eac43f61.png)

*   在应用程序的应用程序池 -> 高级设置中，我增加了所有可能的超时：

![在此处输入图像描述](../Images/a032e0ca6f824829ee3520f8828f7971.png)

*   我试图在服务器端处理程序的代码中增加 HttpContext.Current.Server.ScriptTimeout。

注意似乎有帮助。它在 ASP.NET 开发服务器上运行良好，但在 IIS 上它只是在 90 秒后准确地切断了我的请求。

有什么想法吗，伙计们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-05T03:56:24.357

在 asp:ScriptManager 中还有另一个称为“AsyncPostBackTimeOut”的超时，默认情况下精确设置为 ... 90 秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T14:39:11.680

你能看看你的网络服务器机器的全局默认值吗？也许配置阻止了您的请求。

system32\inetsrv\config\applicationHost.config

*   [http://programming4.us/website/3440.aspx](http://programming4.us/website/3440.aspx)
*   [http://msdn.microsoft.com/en-us/library/aa347568(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa347568%28VS.85%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-02T07:00:56.120

我有一个类似的问题，并通过增加我的 aspx 页面（大约 17 分钟）的`AsyncPostBackTimeOut`值来解决它：`1000`

```
 <asp:ToolkitScriptManager ID="ToolkitScriptManager1" AsyncPostBackTimeOut="1000" runat="server">
        </asp:ToolkitScriptManager> 
```

# magento - Magento 在管理员插入产品页面中显示动态下拉列表

> ID：11363119
> 
> 赞同：1
> 
> 时间：2012-07-06T13:28:47.673
> 
> 标签：magento

我有一个自定义模块，可以将数据插入到自定义表中。我想在管理产品页面上使用这些自定义值作为下拉菜单。我该怎么做。请建议我。

# c# - 一台服务器上的多个项目的 ConnectionString 管理，我是否应该为我们的代码创建自己的 ConnectionString 提供程序

> ID：11363121
> 
> 赞同：2
> 
> 时间：2012-07-06T13:28:51.007
> 
> 标签：c#, .net, connection-string, machine.config

我在一个 Windows Server 上有大约 10 个不同的 .NET 项目，主要是 .NET 4.0，但也有一些 .NET 2.0

其中一些项目是 asp.net，一些是后台实用程序/服务。

这些项目与我们基础设施中的一百多个不同的数据库进行交互。他们用来执行此操作的 ConnectionStrings 每月至少更改几次。

这里的问题是忘记在这些项目之一中放置 ConnectionString 会导致很多问题，并且许多不同的程序员一直将新项目/更新部署到服务器。

我对解决方案的新尝试是覆盖所有项目中的 System.ConfigurationManager 类，并将其替换为我自己的实现，该实现从我可以维护的共享配置文件中读取。然后我只需重新编译每个项目并部署它。

我也可以尝试在所有项目之间共享的 machine.config 文件中维护 ConnectionStrings，但我必须为至少三个项目使用的每个版本的 .NET 框架都这样做，并且在这个文件似乎很危险。

有没有人建议以哪种方式进行？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T13:38:17.597

除了 machine.config，您还可以创建[通用的 appSettings 文件](http://support.microsoft.com/kb/555396/en-us)。您不需要开发任何新东西，只需将您的共享设置放在此文件上，然后在您的特定配置文件中引用它。

希望这可以帮助。

* * *

由于链接已失效，这里有几个例子。

要从外部文件完全加载部分：

```
<connectionStrings configSource="ConnectionStrings.config" /> 
```

要*补充*外部文件中的部分（+ 部分本身的内容）：

```
<appSettings file="FileService.config">
...
</appSettings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:37:59.860

在 machine.config 和其他解决方案之间有[ALIAS](http://msdn.microsoft.com/en-us/library/ms190445.aspx)。这里的限制是：它只适用于 sql server。

# wpf - 在样式中设置窗口图标

> ID：11363122
> 
> 赞同：1
> 
> 时间：2012-07-06T13:28:51.463
> 
> 标签：wpf, icons, styles

我想为我的主窗口和我的应用程序中的任何对话框或消息框使用相同的图标，所以我尝试在 ResourceDictionary 中像这样设置它：

```
<Style TargetType="{x:Type Window}">
  <Setter Property="Icon" Value="pack://application:,,,/MyReferenceAssemblyName;component/Images/myIcon.gif"></Setter>
</Style> 
```

但这不起作用。如何与不同的窗口共享相同的图标？

编辑：

我有一个简单的资源字典 (Style.xaml)，我在其中定义了一些全局设置。我在我的 App.xaml 中使用它，如下所示：

```
<Application.Resources>
  <ResourceDictionary>
    <ResourceDictionary.MergedDictionaries>
      <ResourceDictionary Source="Resources/ViewModelTemplates.xaml"/>
      <ResourceDictionary Source="Resources/Style.xaml"/>
    </ResourceDictionary.MergedDictionaries>
  </ResourceDictionary>
</Application.Resources> 
```

该文件包含一些定义，例如按钮高度、文本框前景色等。这些没有问题，我的应用程序创建的所有面板和窗口都使用这些设置。这就是为什么我希望也可以在此处定义图标，以便在整个应用程序中使用它。

我不是在寻找设置 .exe 文件图标的方法。

编辑：

我还没有找到我想做的解决方案，所以我最终在我的 ResourceDictionary 中创建了一个 BitmapImage 并将它用作我的每个窗口类中的 DynamicResource。

```
<BitmapImage x:Key="ApplicationIcon" UriSource="pack://application:,,,/MyReferenceAssemblyName;component/Images/myIcon.gif"></BitmapImage> 
```

和

```
<Window ...        
    Closing="Window_Closing"
    Title="{Binding Title, UpdateSourceTrigger=PropertyChanged}"
    IsEnabled="{Binding IsEnabled, FallbackValue=True, Mode=OneWay}" 
    WindowState="Maximized"
    Icon="{DynamicResource ApplicationIcon}">
    ...
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:00:48.367

对于遇到这个问题的其他人，就像我遇到的一样，请参阅一个类似的问题，它提供了更多关于为什么这不起作用的解释。 [如何在 app.xaml 中设置默认的 WPF 窗口样式？](https://stackoverflow.com/questions/431940/how-to-set-default-wpf-window-style-in-app-xaml/460750#460750)

还有一些建议；一个是 tabina 的解决方案，并将样式分别应用于每个窗口。它包括一种派生 Window 类的有趣方法，但这取决于个人喜好，因为它们只是变通方法。

# jsp - 处理来自 servlet 的按钮事件

> ID：11363123
> 
> 赞同：0
> 
> 时间：2012-07-06T13:28:52.627
> 
> 标签：jsp, servlets, button

我有一个 jsp 页面，当用户单击我想显示文本的按钮时，该页面包含一个按钮，所以知道如何处理来自 JSP 的 onClick 事件

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:38:52.277

你可以这样做

```
<div id='myDiv'></div>

<input id='myButton' type='button' value='My Button' />

<script type="text/javascript">
$('#myButton').click(function()
{

$("#myDiv").html("The text that you want to display");
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:39:02.823

中*没有*这样的事件系统`servlet/JSP`。事实上，您可以将*键值*对数据与 servlet 请求一起传递。

示例.jsp

```
<form method="post" action="servlet_url">
  <input type="submit" name="cmd" value="Add"/>
  <input type="submit" name="cmd" value="Delete"/>
</form> 
```

和`doPost`servlet中的代码

```
String cmd=request.getParameter("cmd");
if(cmd.equals("Add"))
  {
   //
  }
else
if(cmd.equals("Delete"))
 {
 //
 } 
```

# filesystems - /dev/ttyS0 无法在 Qemu 中打开

> ID：11363124
> 
> 赞同：4
> 
> 时间：2012-07-06T13:28:53.860
> 
> 标签：filesystems, arm, qemu, buildroot

我正在使用 QEMU 1.1.0，使用 ARM Cortex-A9 模拟 Versatile Express 板。我已经设法按照以下说明启动了简单的“Hello World”示例：

[http://balau82.wordpress.com/2012/03/31/compile-linux-kernel-3-2-for-arm-and-emulate-with-qemu/](http://balau82.wordpress.com/2012/03/31/compile-linux-kernel-3-2-for-arm-and-emulate-with-qemu/)

但现在我想自己创建文件系统。

我决定使用 buildroot 版本 2012.05。我已经将它配置为为 ARM Cortex-A9 目标创建工具链、内核和文件系统映像。

内核版本为 3.3.7，对于我选择为 cpio 的文件系统，未压缩。调用 qemu-system-arm 的 initrd 参数指向

**/输出/图像/rootfs.cpio**

当我启动 QEMU 内核启动时，但随后我收到以下消息：

**初始化随机数生成器...完成。**

**启动网络...**

**无法打开 /dev/ttyS0：没有这样的设备或地址**

**无法打开 /dev/ttyS0：没有这样的设备或地址**

**无法打开 /dev/ttyS0：没有这样的设备或地址**

**...**

我所能做的就是终止 QEMU。

我已经像这样检查了 rootfs.cpio 的内容：

cpio -t < rootfs.cpio

并看到有/dev/ttyS0。

我在配置文件系统时错过了什么吗？或者我应该在

**/输出/目标**

以某种方式在那里创建设备（Buildroot 不这样做），然后重建文件系统？

我是 Buildroot 的新手，所以任何提示或建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:10:51.393

提取 rootfs 并键入 ls -all`/dev/ttyS0`并检查它的`major`和`minor`编号。因为如果您的主编号不是必需的，那么它将不会调用相应的内核功能，在这种情况下，它只会是一个垃圾字符设备。

您也可以发布整个日志文件（复制所有这些 dmesg 并将它们发布到某处并在此处提供链接。）

如果您确定 /dev/ttyS0 在那里，请执行以下步骤：

*   提取（使用 cpio 解压）rootfs

*   找出哪个初始化文件内核用作父进程。如果幸运的话，它将位于根目录中。命名`init`或`initrc`

*   `init`在您喜欢的编辑器中打开文件。
*   开始你的 init 的几行就像

    ::respawn:/sbin/getty -L 38400 tty1
    ::respawn:/sbin/getty -L 38400 tty2
    ::respawn:/sbin/getty -L 38400 tty3
    ::respawn:/sbin/getty -L 38400 tty4

*   添加`::respawn:/sbin/ls -all /dev` 并保存文件。（我们添加了 list 命令来查看 /dev 目录里面有什么）

*   重新启动系统并检查 dmesg。看看`/dev/ttyS0`是不是真的失踪了？

# r - R data.table 按标准将价格转换为回报

> ID：11363125
> 
> 赞同：0
> 
> 时间：2012-07-06T13:28:57.847
> 
> 标签：r, group-by, data.table

嗨，我有一个包含以下列的日内数据表：

```
 date, stock_id, timestamp, price 
```

首先，我添加了正确订购的钥匙：

```
setkeyv( my_table, c('stock_id','date','timestamp')) 
```

数据看起来像：

```
 date      timestamp    stock_id      price       
 2011-01-04    1.294128e+12    7          3402.0     
 2011-01-04    1.294129e+12    7          3402.5     
 2011-01-04    1.294129e+12    7          3407.5 
```

现在我想将 stock_price 转换为收益并记录收益。

您能否指出一种有效/优雅的方法来在 R 和 data.table 分组中执行此操作而不使用循环？

非常感谢，我对 R 很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:10:06.803

碰巧的是，您使用新功能在 R-Forge 存储库的最新版本 (v1.8.1) 中询问了最容易完成的事情：`:=`按组。

怎么样（未经测试）：

```
my_table[, logret:=c(NA,diff(log(stock_price))), by=stock_name] 
```

要从 R-Forge 安装 v1.8.1 而不从源代码编译，您需要运行 R 2.15.0 或更高版本，然后只需键入：

```
install.packages("data.table", repos="http://R-Forge.R-project.org") 
```

# javascript - 字段值获取未定义的jquery

> ID：11363134
> 
> 赞同：0
> 
> 时间：2012-07-06T13:29:16.917
> 
> 标签：javascript, jquery

我可以在 javascript 中清除事件队列吗？当我完成一个单击事件然后执行另一个单击事件时，即使输入字段具有类似“newfile.jpg”的值，输入字段也会获得未定义的值

我通过执行 somevariable = $('#cke_104_textInput').val(); 来检索值 但 somevariable 的值未定义。

这是javascript代码：

```
$(function () {
    // Handler for .ready() called.
    function changeLink() {
        link = $('#cke_104_textInput').val();
        if (link == "") {}
        else {
            link = link.replace("_", "/");
            parts = link.split('.');
            explodeExtension = parts[parts.length - 1];
            link = link.replace("/download/", "/download/" + explodeExtension + "/");
            link = link.replace("." + explodeExtension, "");
            $('#cke_104_textInput').val('');
            $('#cke_104_textInput').val(link);
            clearInterval(changelink);
        }
    }

    function changePic() {
        link = $('#cke_103_textInput').val();
        if (link == "") {}
        else {
            link = link.replace("_", "/");
            parts = link.split('.');
            explodeExtension = parts[parts.length - 1];
            link = link.replace("/download/", "/show/" + explodeExtension + "/");
            link = link.replace("." + explodeExtension, "");
            $('#cke_103_textInput').val('');
            $('#cke_103_textInput').val(link);
            clearInterval(changepic);
        }
    }
    $('#cke_60').live('click', function (event) {
        changelink = setInterval(function () {
            changeLink()
        }, 1000);
    });
    $('#cke_64').live('click', function (event) {
        changepic = setInterval(function () {
            changePic()
        }, 1000);
    });
}); 
```

在代码中，我尝试重写两个输入字段的内容。必须这样做，因为文件不在站点根目录中，它们不在站点根目录中，并且为了能够在站点上显示或下载它们，URL 需要采用特定格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:31:10.563

要回答您的第一行问题，是的，您可以。看看[unbind()](http://api.jquery.com/unbind/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:33:10.253

您正在创建`link`为全局变量，这意味着它与自身发生冲突。

更改`link = $('#cke_104_textInput').val();`为`var link = $('#cke_104_textInput').val();`。

另外作为旁注，您有两次此代码：

```
$('#cke_104_textInput').val('');
$('#cke_104_textInput').val(link); 
```

这是多余的和低效的。在这两种情况下，您都应该删除第一行，因为选择一个元素（甚至通过 ID）不是一个免费的操作。

# python - 如何格式化这样的字符串？

> ID：11363146
> 
> 赞同：1
> 
> 时间：2012-07-06T13:30:01.790
> 
> 标签：python, django

我有一个要渲染的模板，但由于它也有一些标签，因此很难访问特定的字符串。代码如下：

```
 template="""
   <select>
   <option {% if record.views = '%s' %} selected {% endif %}>'%s'
   </select>
   """%(pop, pop) 
```

在这里，我想要 pop 的值，但它给出了一个错误：

```
 Caught TypeError while rendering: not enough arguments for format string 
```

任何解决方案我如何访问这些字符串格式。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T14:25:05.690

说真的，不要尝试预处理模板语言。这是一种模板语言！它处理这种事情！

发送`selected_type`到模板上下文，然后执行：

```
<option {% if record.views = selected_type %} selected {% endif %}>'{{ selected_type }}' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T13:37:22.247

您需要将 % 符号加倍：

```
template="""
   <select>
   <option {%% if record.views = '%s' %%} selected {%% endif %%}>'%s'
   </select>
   """%(pop, pop) 
```

产量

```
<select>
<option {% if record.views = '1' %} selected {% endif %}>'1'
</select> 
```

对于流行='1'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:37:00.597

你应该加倍“％”来逃避它们

```
template="""
   <select>
   <option {%% if record.views = '%s' %%} selected {%% endif %%}>'%s'
   </select>
   """%(pop, pop) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T14:02:55.937

您收到错误是因为 Python 正在寻找填充所有四个`%`符号。您需要通过`%`在它们前面添加另一个来逃避它们，如下所示：

```
template="""
   <select>
   <option {%% if record.views = '%s' %%} selected {%% endif %%}>'%s'
   </select>
   """%(pop, pop) 
```

# android - 将 Opera Mobile 中的链接重定向到 Android 浏览器

> ID：11363149
> 
> 赞同：0
> 
> 时间：2012-07-06T06:51:42.667
> 
> 标签：android

我有一个需要启用 WebKit 的浏览器的网络应用程序。然而，大约 20% 的移动浏览器是 Opera Mini/Mobile。有没有办法建议手机在股票浏览器中打开网站？

我在想一些事情：

```
<a href="#" onClick = "Android.Browser.open('mySite.xhtml')">Hello</a> 
```

或者

```
<html>
    <head>
        <suggested-browser="stockbrowser" />
    </head>
</html> 
```

我当然可以用它制作一个应用程序，但它只是一个注册表单..

# c# - 从内存流播放 mp3/wav 文件到网页

> ID：11363151
> 
> 赞同：1
> 
> 时间：2012-07-06T13:30:13.153
> 
> 标签：c#, asp.net, stream, mp3, wav

最近有人找我开发一个应用程序（asp.net/c#），允许用户收听存储在某些共享文件夹中的一些音频文件。

用户无权访问共享文件夹，文件应该被流式传输。此外，该页面应提供播放/停止/暂停/前进/后退功能，以及经过的时间/总时间信息。

所以我设置了一个访问所需文件的 web 服务，并返回一个包含 mp3/wav 音频的 Byte[]（实际上我必须在返回 Byte[] 之前将它们转换为所需的 mp3/wav 格式）。

问题是我不知道如何在网页中呈现它。

我需要的是一个带有一些控件的网页，它提供必要的功能和信息，从 Byte[] 加载。

我研究了网络并尝试了很多片段和控件，但一点运气都没有。

关于如何实施它的任何想法或方向？

提前致谢， 安东尼奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:34:44.173

一个好的方法是使用silverlight 或flash 播放器，甚至是Java 小程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:40:33.713

如果您希望您的用户使用相当新的浏览器版本，您可以使用[HTML5 的音频标签。](http://www.w3schools.com/html5/html5_audio.asp)您将设置为将设置为将您写入响应流`src`的 URL （例如，可能存储in ，创建一个 .ashx 处理程序页面以返回它，然后设置）。`byte[]``byte[]``Session``src="myHandler.ashx"`

# wcf - WCF 调用 C# 方法

> ID：11363153
> 
> 赞同：0
> 
> 时间：2012-07-06T13:30:18.280
> 
> 标签：wcf

我过去只在数据库环境中编码。公司最近的变化。让我开始在全新的世界中发展。这个新项目类似于 SQL - C# - PHP。

我在 VS2008 中学习的课程几乎是 dnoe。它调用我需要的所有 SQL SP，并且信息在 DataReaders 中。当它从 PHP 中读取该信息以便我可以填充网站时，我发现这并不容易。有人建议我尝试几个选项，最适合该项目的一个是创建一个 Web 服务然后使用它（请耐心等待，正如我刚才所说，我是大多数 Web 相关编程的新手）所以，我我试图 WCF/Rest 然后从 PHP 中使用它，但我还没有到那里。

我已经阅读并观看了几个关于 WCF 的教程，看起来很流畅，但我读过的只是：

**.** 使用其 OperationContracts 创建接口。

**.** 使用 DataMembers 等创建服务并定义接口中列出的方法。

好的，但我想做的不是在那里指定任何方法，因为我只想调用我已经编写的 C# 方法。我应该在服务中还是在界面中这样做？首先，这是处理它的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:40:34.510

您可能希望编写实现操作合同接口的服务方法。服务方法可以调用您已经编写的 C# 代码。

例如，这是一个简单的服务接口：

```
[ServiceContract]
public interface IYourService
{
    [OperationContract]
    int GetCountOfTransactions(string filter);
} 
```

然后你会在你的服务类中实现这个接口：

```
public class YourService : IYourService
{
    public int GetCountOfTransactions(string filter)
    {
        // Call your existing code
        YourClass yourClass = new YourClass();
        return yourClass.GetCountOfTransactions(filter);
    }
} 
```

有很多示例可以将其设置为 REST 服务，但我认为您走在正确的轨道上。

最棘手的部分通常是设置绑定配置以确保所有消费客户端应用程序都可以连接。

希望这会有所帮助。

# php - MySQL 无法使用 PHP 建立连接

> ID：11363158
> 
> 赞同：1
> 
> 时间：2012-07-06T13:30:41.800
> 
> 标签：php, mysql, ubuntu, connection

在联想 t410 上使用 ubuntu 12.04 64 位。使用 apache2 和 Mysql 5.5 并尝试通过 localhost 连接

我正在尝试建立与我在本地主机上建立的数据库的连接。当到达建立连接的代码行时，似乎Mysql只是挂了，之后没有显示错误消息。我在连接尝试之前验证了回声是否有效。我知道 apache2 服务器正在工作，因为我可以访问索引页面并显示我的 html 表单。

我试过 etc/mysql/my.cnf 将绑定地址设置为 localhost。

我的代码行如下所示：

```
// Attempts to establish connection to MySql server
$connection = mysql_connect("localhost","username","password");

// Prints error message if the connection to MySql fails
if (!$connection){
    die("Connection failed: " . mysql_error());
}

echo "Connection established."; 
```

我尝试了使用单引号且没有分号的连接线。

如果错误不是语法，我愿意发布我拥有的任何配置文件的内容。我没有对 Ubuntu 做任何花哨的事情，一切都是默认安装。我是 CS 新手，尤其是数据库、PHP 和网络。这是我坚持的小实验。

任何帮助是极大的赞赏。谢谢，

*   大学教师

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:41:32.163

可能是因为没有错误消息，连接已建立，但您没有对其进行任何操作吗？我的意思是，你的代码的其余部分是什么，在你的代码之后是这样的：

```
mysql_select_db("database_name",$connection); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T11:25:28.140

阅读您的最后一条评论后，似乎没有加载 mysql 扩展。看看你的`php.ini`，取消注释以下行（删除行开头的分号）并重新启动你的 apache：

```
extension=php_mysql.so 
```

确保扩展存在于 php 扩展目录中。

由于您使用的是 MySQL 版本 > 4.1.3，因此强烈建议您改用 mysqli 扩展。看看这个：[PHP：MySQL 概述](http://www.php.net/manual/en/mysqli.overview.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T13:35:34.823

尝试设置

```
$mysql_user = "your_username";
$mysql_pass = "your_password";
$mysql_server = "Servername";

$link = mysql_connect($mysql_server,$mysql_user,$mysql_pass);
if (!$link) {
    header('HTTP/1.1 500');
    exit(); 
```

# php - 如何避免 HTTP 标头注入（换行符）

> ID：11363159
> 
> 赞同：3
> 
> 时间：2012-07-06T13:30:43.280
> 
> 标签：php, security, http-headers, code-injection

我有时在 php 函数中使用用户数据，`header`如下所示：

```
header('Location : test' . $user_data); 
```

我曾经删除`\n`并`\r`防止标头注入，但还有其他换行符吗？我在我的例子中写过`Location`，但它可以是别的东西，我知道我必须验证和清理 URL，我的问题是关于标题中的新行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:49:39.667

引用[文档](http://php.net/manual/en/function.header.php#refsect1-function.header-changelog)：

> （从 4.4.2 和 5.1.2 开始）此功能现在可以防止一次发送多个标头，以防止标头注入攻击。

所以我想即使你已经做过的 CRLF 替换也没有必要。

# windows-8 - 像 IE10 一样在页面之间导航

> ID：11363160
> 
> 赞同：0
> 
> 时间：2012-07-06T13:30:46.393
> 
> 标签：windows-8

我正在为 Windows 8 开发 Metro 风格的应用程序。目前我在我的应用程序中使用带箭头的按钮进行导航，但我想处理手势（就像在 IE 中从左到右更改页面一样）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T04:54:41.237

如果您的应用程序不太复杂，是否`FlipView`适合您？

MSDN 参考资料：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh465425.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465425.aspx)

[http://msdn.microsoft.com/en-us/library/windows/apps/br211711.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211711.aspx)

# html - 如何在 dropkick 插件下拉列表之前显示内联文本

> ID：11363163
> 
> 赞同：0
> 
> 时间：2012-07-06T13:30:53.230
> 
> 标签：html, css, jquery-plugins, twitter-bootstrap

我正在使用 dropkick js 插件和 Bootstrap。

文本以某种方式放在下拉列表**之后**，但我需要将它放在dropkick 列表**之前**

这是示例：http: [//jsfiddle.net/UL4Tu/7/](http://jsfiddle.net/UL4Tu/7/)

谁能帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:05:18.110

对不起我的愚蠢问题->这是答案-> [http://jsfiddle.net/UL4Tu/8/](http://jsfiddle.net/UL4Tu/8/)

# .net - 实体框架中与级联删除的 1 到 0..1 关系

> ID：11363165
> 
> 赞同：2
> 
> 时间：2012-07-06T13:31:05.160
> 
> 标签：.net, database, entity-framework, edmx, entity-model

假设以下模型，在 Entity Framework 4.3 中创建： [http ://www.dumpyourphoto.com/files4/122585/bI2uq9a.png](http://www.dumpyourphoto.com/files4/122585/bI2uq9a.png)

我们有：

*   位置实体
*   有位置的公司
*   一个关系：**位置包含 0..1 个公司。**这个选择是必要的，因为 Location 实体将被我们设计中的更多实体使用。
*   级联删除：当公司被删除时，其对应的位置也需要被删除。

这就是它出错的地方：从这个模型生成数据库时，Entity Framework 弹出以下错误消息：

[http://www.dumpyourphoto.com/files4/122586/bgOPaZwqL.png](http://www.dumpyourphoto.com/files4/122586/bgOPaZwqL.png)

翻译错误消息说： `"End Company on relationship Model1.Store.CompanyLocation cannot have operation specified since its multiplicity is '*'. Operations cannot be specified on ends with multiplicity '*'."`

经过调查，我们注意到这似乎确实不可能，因为实体框架生成以下数据库（没有级联删除）： [http ://www.dumpyourphoto.com/files4/122587/rx0g1G.png](http://www.dumpyourphoto.com/files4/122587/rx0g1G.png)

级联删除确实无法进行，因为实体框架有点作弊，它只生成 1 个外键，同时将两个导航属性保留在其实体中。

这是完全明智和正确的数据库明智的，但是它给我们带来了麻烦。我们需要这种级联删除，但也需要 0..1 关系，因为数据库中的其他对象使用位置实体的方式与公司相同。有没有人对此有解决方案，或有关如何解决此问题的建议？

# stream - WinRT StorageFile 写入下载的文件

> ID：11363169
> 
> 赞同：9
> 
> 时间：2012-07-06T13:31:18.380
> 
> 标签：stream, download, windows-runtime, webresponse, storagefile

我正在努力解决一个简单的问题。我想使用以下代码从网络下载图像：

```
WebRequest requestPic = WebRequest.Create(@"http://something.com/" + id + ".jpg");
WebResponse responsePic = await requestPic.GetResponseAsync(); 
```

现在我想在 StorageFile 中编写 WebResponse 的流（例如，在应用程序的存储中创建一个文件 id.jpg），但我还没有找到任何方法来实现这一点。我在网上搜索它，但没有成功 - 各种方式不兼容的流类型等等。

能否请你帮忙？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T14:58:51.023

我找到了以下解决方案，该解决方案有效且不太复杂。

```
 public async static Task<StorageFile> SaveAsync(
        Uri fileUri,
        StorageFolder folder,
        string fileName)
    {
        var file = await folder.CreateFileAsync(fileName, CreationCollisionOption.ReplaceExisting);
        var downloader = new BackgroundDownloader();
        var download = downloader.CreateDownload(
            fileUri,
            file);

        var res = await download.StartAsync();            

        return file;
    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-07T05:54:17.650

您需要将响应流读入缓冲区，然后将数据写入 StorageFile。以下代码显示了一个示例：

```
 var fStream = responsePic.GetResponseStream();
        var file = await ApplicationData.Current.LocalFolder.CreateFileAsync("testfile.txt");
        using (var ostream = await file.OpenStreamForWriteAsync())
        {
            int count = 0;
            do
            {
                var buffer = new byte[1024];
                count = fStream.Read(buffer, 0, 1024);
                await ostream.WriteAsync(buffer, 0, count);
            }
            while (fStream.CanRead && count > 0);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-27T11:10:02.263

这可以[使用 Windows Store Apps 中的 C++ REST SDK](https://msdn.microsoft.com/magazine/dn385707.aspx)来完成。[HTTP 客户端教程对此](https://casablanca.codeplex.com/wikipage?title=Http%20Client%20Tutorial)进行了解释。

# rotation - Three.JS 的单位，计算旋转和轨道速度

> ID：11363170
> 
> 赞同：14
> 
> 时间：2012-07-06T13:31:22.060
> 
> 标签：rotation, three.js, orbit

我正在尝试建立一个太阳系的比例模型。我想看看是否有人可以向我解释旋转速度是如何工作的。这是重要的部分：

```
objects[index].rotation.y += calculateRotationSpeed(value.radius,value.revolution) * delta; 
```

转速与实际时间有何关系？因此，如果您的速度为 1，那是每毫秒 1 px 的移动吗？或者，如果您的速度为 0.1，那是不是每秒不到 1 个像素？

基本上，我正在尝试根据行星的半径和一天中的小时数来计算行星的正确旋转速度。因此，如果您在地球上，它将在 24 小时内完成 1 次旋转。这是我写的现在正在计算的函数：

```
/* In a day */
function calculateRotationSpeed(radius,hrs,delta) {
    var cir = findCircumference(radius);
    if(delta) {
        var d = delta;
    } else {
        var d = 1;
    }
    var ms = hrs2ms(hrs) * d;
    var pxPerMS = km2px(cir) / ms;
    return pxPerMS;
} 
```

我试了一下，它似乎仍然移动得太快。我还需要类似的东西来计算轨道速度。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-07-06T15:04:07.043

### 旋转和单位

Three.JS 中的旋转以*弧度为单位*。对于那些完全不熟悉弧度的人（我的一篇旧论文的一小段摘录）：

> 与数学常数[**Pi**](http://en.wikipedia.org/wiki/Pi)一样，[**弧度**](http://en.wikipedia.org/wiki/Radian)（大约 57.3 度）源自圆的半径（或直径）与其周长之间的关系。一个弧度是始终跨越一个圆的圆周上的弧*的*角度，该圆的长度等于同一个圆的半径（对于任何圆都是如此，无论大小）。类似地，Pi 是周长与直径的比值，因此单位圆的周长正好是 Pi。弧度和度数实际上不是*真正的*单位，实际上角度通常是无量纲的（如百分比和分数，我们不使用实际单位来描述它们）。
> 
> 但是，与度数不同的是，弧度*不是*任意定义的，因此在大多数情况下，它是更自然的选择；通常比在数学公式中使用度数更容易、更优雅、更清晰、更简洁。巴比伦人可能给了我们度数，将他们的圆分成 6 个相等的部分（使用等边三角形的角度）。考虑到它们的[**六十进制**](http://en.wikipedia.org/wiki/Sexagesimal)（以 60 为底）的数字系统，这 6 个部分中的每一个都可能进一步细分为 60 个相等的部分。这也将允许他们将这样的系统用于天文学，因为在他们的时间里，一年中的估计天数要准确得多，通常被认为是 360 天。

### Three.JS 中的基本旋转

所以现在，知道您正在使用弧度，如果您在函数中使用以下**第一个**语句增加**一次**`anim`（回调到`requestAnimFrame`），您将`mesh`在 x 轴上的旋转增加一个弧度

```
mesh.rotation.x += 1;                      // Rotates   1 radian  per frame
mesh.rotation.x += Math.PI / 180;          // Rotates   1 degree  per frame
mesh.rotation.x += 45 * Math.PI / 180      // Rotates  45 degrees per frame 
```

正如上面的*最后*两个语句所示，`Math.PI / 180`如果我们希望使用度数来代替，我们可以在赋值之前轻松地将度数转换为弧度。

### 考虑帧率

在您的情况下，您需要考虑每帧经过多少时间。这是你的*delta*。你必须这样想：我们以多少 FPS 运行？我们将声明一个全局`clock`变量，该变量将存储一个`THREE.Clock`对象，该对象具有我们所需信息的接口。我们需要一个我们将调用的全局变量`clock`（需要在其他函数中可访问，特别是`anim`）：

在 内`init`，创建一个实例`THREE.Clock`；将其存储在外部声明的变量中`init`（范围更大）：

```
clock = new THREE.Clock(); 
```

然后，在您的`anim`函数中，您将进行两次调用，以更新与以下相关的两个变量`clock`：

*   `time`（自时钟实例化以来经过的总时间（以毫秒为单位））
*   `delta`（每帧之间的时间以毫秒为单位）在其他两个全局变量中：

```
时间 = 时钟.getElapsedTime();
 delta = clock.getDelta();

```

请注意，这`delta`意味着*返回*每帧之间的时间量；然而，当且*仅*当`clock.getDelta`在`anim`/`render`

1.  *每个动画/渲染周期*只有一次**
**   每个动画周期都在同一个地方（开始或结束，据我所知，哪个不重要）*

 *上述条件是`THREE.Clock`执行的结果。`getDelta`最初返回自时钟实例化以来的时间量，之后它返回的时间只是自上次调用以来的时间）。如果它以某种方式被错误地或不一致地调用，它将把事情搞砸。

### 以增量因子旋转

现在，如果您的场景没有让处理器或 GPU 陷入困境，Three.JS 及其包含的[**requestAnimationFrame shim**](http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/)将尝试（使用可用资源）以保持每秒 60 帧的平稳运行。这意味着理想情况下，我们将在每帧之间有大约`1/60 = .016666`几秒钟的时间，这是您`delta`可以从`clock`每帧中读取的值，并使用它通过乘以基于帧速率来标准化您的速度，如下所示。通过这种方式，您可以获得以秒为单位的值，而不管帧速率的微小变化，您可以每次相乘以获得以秒为单位的值。

因此，根据我们在您的`anim`函数开始时所拥有的内容，您可以像这样使用它：

```
mesh.rotation.x += delta * 1;                     // Rotates  1 radian  per second
mesh.rotation.x += delta * Math.PI / 180;         // Rotates  1 degree  per second
mesh.rotation.x += delta * 45 * Math.PI / 180;    // Rotates 45 degrees per second 
```

### 转速和单位

因为我们对角度、弧度和度数的测量实际上并不是单位，所以当我们查看角速度的单位时，我们会发现它*只会*随时间起作用（而不是像您在代码）。

### 基于时间计算转速

至于您的具体情况，您不需要半径来计算转速（角速度），而是可以使用一天中的小时数（一整圈所需的时间，即`2 * Math.PI` *弧度*在它的轴上旋转）。如果你有一个变量，`revolutionTime`那么你可以像这样计算它。

```
secondsInAnHour = 3600;
rotationalSpeed = (2 * Math.PI) / revolutionTime; 
```

如果你假设地球`24 hours = 24 * 60 * 60 = 86,400`在一天之内（它没有）。然后我们会得到`rotationalSpeed = 2 * PI / 86,400`，或大致`0.0000727` *每秒的弧度*。您应该能够找到可能比这更准确的教科书值（考虑到比我们的 24 小时平面数字更准确的测量值，即地球完成一圈所需的时间。

### 特别考虑你的情况

但是，我不会担心确保行星的所有角速度都完全正确。相反，一个更好的主意是计算出（行星的）每个角速度之间的比率并使用它。这将更好地工作有几个原因：您可能想要更快的旋转速度，这将允许您使用任何有效的旋转速度；重要的是，与任何模型一样（尤其是在涉及天文模型时），你要保持它的规模。*

# android - 使用 NDK 时的指针/引用

> ID：11363176
> 
> 赞同：0
> 
> 时间：2012-07-06T13:31:38.700
> 
> 标签：android, pointers, reference, android-ndk

我正在创建一个从 C 库中提取方法的 Android 应用程序。C 库中使用的方法之一看起来像这样......（跟随`val`作为函数传递的指针`second parameter`。）

```
BYTE __stdcall GetVal(WORD what, long *val){
DWORD relaydate;
BYTE tmpb;
DWORD tmpd;
WORD tmp;
#ifdef HASTHAILANDSWAP
WORD what2;
#endif  

if(val) *val=0;
if(!CheckInit()) return ERR_NOT_INIT;
if(what==VAL_NULL){
    if(RelayAPI_DataValid){
        return 0;
    }else{
        return -1;
    }
}   
if(!CheckValid()) return ERR_READ_FAIL;

switch(what){
    case VAL_SWVERSION:
        *val=RelayAPI_SWVersion;
        return 0;
    case VAL_VOLTAGE:
        *val=RelayAPI_Voltage;
        return 0;
    case VAL_VERSION:
        *val=RelayAPI_Version;
        return 0;
    case VAL_ISSMUD:
        *val=RelayAPI_isSMUD;
        return 0;
} 
```

A`BYTE`被定义为`unsigned char`。我需要`GetVal`从我的 Java 函数中调用该方法。我的 Java 代码的功能应该与这个 C 代码相匹配......

```
long val;
char buff[20];
if( !GetVal (VAL_SERIAL, &val) ) {} 
```

这就是我迄今为止在我的 Java 代码中所拥有的（我知道这是不对的，我知道你不能像那样在 Java 中使用引用，我只是向你展示我所拥有的。）：

```
public void updateForm() {
    int val;
    char buff[];

    /**
    * SERIAL NUMBER
    */
    if( !GetVal( RelayAPIModel.VAL_SERIAL, &val ) ) { }
} 
```

因此，`val`初始化为`null`（我假设，我不太了解 C），对这个 long 的引用通过函数传递。在函数中，一个指向的指针`val`被赋值。

无论如何在C中使用一个方法，它传递一个对NULL变量的引用，然后为引用的变量分配一个值？

编辑 ：

为了澄清，我正在使用一个包含上述 GetVal 方法的库。我正在镜像 Palm Pilot API，这是第二个代码块的来源。第三个代码块是我从 Java 调用 C 库中的 GetVal 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:42:17.343

如果我理解正确，您希望 GetVal 方法更改传入的参数。由于 java 没有指针，您需要创建一个简单的 java 类，您可以在 c 代码中进行操作。

由于我不知道您的 jni 代码，我不得不做出很多猜测，所以不要按原样获取源代码。但它应该让你走上正轨。

**Java 代码**

```
class LongWrapper {
    private long mValue;
    public void setValue(final long value){
        mValue = value;
    }
}

native boolean GetVal(int valSerial,LongWrapper val); 
```

**jni代码示例**

```
jboolean Java_com_foo_GetVal(JNIEnv *env, jint val_serial, jobject longObj)
{
    jclass cls = env->GetObjectClass(longObj);
    jmethodID mid = env->GetMethodID(cls, "setValue", "(J)V");
    if (mid == 0) {
        return false;
    }
    jlong val=0;
    bool result = GetVal(val_serial,&val)
    env->CallLongMethod(longObj,mid, val);
    return result
} 
```

# animation - 动画路径组拉斐尔

> ID：11363177
> 
> 赞同：0
> 
> 时间：2012-07-06T13:31:45.363
> 
> 标签：animation, raphael

我是 Raphael 和一般编码的新手，所以请耐心等待我解决这个问题。我在为 Raphael 中的路径组设置动画时遇到问题。我想要的效果是一组运行单个动画的路径，同时在纸上一致移动。这是一个例子：

```
path1 = paper.path("path string").attr({fill: "#fff", stroke: "#000"});
path2 = paper.path("path string").attr({fill: "#fff", stroke: "#000"});
path3 = paper.path("path string").attr({fill: "#fff", stroke: "#000"});
pathSet = paper.set(path1, path2, path3);
pathSet.animate({transform: "t500,500"}, 1000);

path1.mouseover(function(){path1.animate({transform: "s1.6,r10"}, 1000)});
path2.mouseover(function(){path2.animate({transform: "s1.6,r10"}, 1000)});
path3.mouseover(function(){path3.animate({transform: "s1.6,r10"}, 1000)}); 
```

在上面的示例中，pathSet 将按原样进行动画处理，但是当我将鼠标悬停在各个路径上时，它们不仅会缩放和旋转，而且会转换回它们的原始坐标（它们在 pathSet 动画之前的位置） ）。我在文档中阅读了有关转换的相对“t，r，s”和绝对“T，R，S”参数，并认为就是这样，但它们似乎没有什么区别。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:08:48.943

您已经发现了我认为 Raphael 最大的弱点之一：变换动画很难优雅地组合！

这不是一个完美的解决方案，但您始终可以使用 mouseover/mouseout 处理程序来附加/对抗您想要的更改。例如：

```
path1.mouseover(function(){path1.animate({transform: "...s1.5,r10"}, 1000)});
path2.mouseover(function(){path2.animate({transform: "...s1.5,r10"}, 1000)});
path3.mouseover(function(){path3.animate({transform: "...s1.5,r10"}, 1000)});

path1.mouseout(function(){path1.animate({transform: "...s0.66,r-10"}, 1000)});
path2.mouseout(function(){path2.animate({transform: "...s0.66,r-10"}, 1000)});
path3.mouseout(function(){path3.animate({transform: "...s0.66,r-10"}, 1000)}); 
```

只要您不需要任何给定元素的有状态反应，附加/计数器方法就可以正常工作。一旦发生这种情况，在我看来，为一种类型的对象创建一个包装类更有意义，该类将跟踪它应该在哪里，并根据需要调整绝对变换。但你可能不需要这样的东西。

# windows - 查找和替换脚本不适用于每行的空格/多个值

> ID：11363181
> 
> 赞同：3
> 
> 时间：2012-07-06T13:31:53.817
> 
> 标签：windows, string, command-line, batch-file, replace

我编写的查找和替换批处理脚本有问题。我需要能够打开一个文本文件并从 Windows 命令行更改其中的一些值。我无法安装 sed.exe 或 FART 或 powershell，所以我需要这样做。*在linux中做起来容易得多......*

到目前为止，我已经编写了以下脚本，如果我使用每行只有一个单词的文件，它可以完美运行，因此我可以轻松更改以下格式的文件

> aaa
> bbb
> ccc

这是批处理文件：

```
@echo off
setlocal enabledelayedexpansion

if not exist "%1" (echo this file does not exist...)&goto :eof

for /f "tokens=* delims=" %%a in (%1) do (

   set write=%%a
   if "%%a"=="%2" set write=%3

   echo !write! 
   (echo !write!)>>%~n1.replaced%~x1
)

del %1
rename %~n1.replaced%~x1 %1 
```

我的问题是我需要更改的大多数文件都包含多个字符串和数字值的行，如下所示：

> AAA 1.5
> BBB 25
> CCC 0.1

谁能告诉我为什么我的脚本不会将*BBB 25*更改为*BBB 45*？与分隔符是空格有关吗？我很确定它与数字无关，好像我有一个单词文件，只是用空格分隔，我的脚本也不起作用。

我一直在搜索论坛，还没有发现这个问题，但我会继续搜索。无论如何，您的帮助将不胜感激。

**更新**
问题解决了！！我在[DosTips.com](http://www.dostips.com/DtCodeBatchFiles.php#Batch.FindAndReplace)上找到了BatchSubstitute.bat 的[这个修订版](http://www.dostips.com/forum/viewtopic.php?f=3&t=1516)，只需在临时文件中添加一个额外的回声就解决了我的问题。我仍然不确定为什么我发布的代码不起作用所以如果有人能解释它会很棒。我对这一切还是很陌生！

**更新 2**
这是我需要更改的典型输入文件：

> k1 1e3
> k2 2e5
> n 1.5
> x 10

在我运行脚本*（replace.bat prefs.txt“k1 1e3”“k1 5e4”）*之后，它应该是：

> k1 5e4
> k2 2e5
> n 1.5
> x 10

它应该能够更改文件中的任何行。上次更新论坛里的版本好像能用，就是不知道为什么我发的第一个版本不能用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:34:47.727

回答您的 update2 问题。

> 它应该能够更改文件中的任何行。上次更新论坛里的版本好像能用，就是不知道为什么我发的第一个版本不能用。

这是因为该行
`if "%%a"=="%2" set write=%3`
与您的任何行都不匹配。
As`%2`将扩展到`"k1 1e3"`so 线将扩展到

`if "%%a"==""k1 1e3"" set write="k1 5e4"`

一个简单的波浪号就可以了
`if "%%a"=="%~2" set write=%~3`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:37:25.547

是的，问题在于空格（或引号，如果您尝试将文本放在一起）

使用命令行`test test.txt BBB 25 BBB 45`, 然后 %2 是`BBB`并且它不会匹配`BBB 25`25 缺少

使用 , 的命令行`test test.txt "BBB 25" "BBB 45"`，则 %2 是`"BBB 25"`并且它不会匹配 ，`BBB 25`因为缺少引号。

# jquery - jquery height/width 在模板 HTML 上的 FF / Chrome 中表现不同

> ID：11363183
> 
> 赞同：0
> 
> 时间：2012-07-06T13:31:57.437
> 
> 标签：jquery, firefox, google-chrome, height, width

当我将模板 HTML 字符串传递给 jquery 并尝试获取其高度/宽度（模板尚未在 DOM 中）时，Firefox 和 Chrome 的行为会有所不同：

Firefox 似乎能够计算值（来自 css 等）并返回一个“有效”值，但 Chrome 只返回 0。

看看这个：http: [//jsfiddle.net/5AWtF/21/](http://jsfiddle.net/5AWtF/21/)

这是一个错误还是我必须先将模板放入 DOM 才能保证尺寸？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:09:06.463

我很惊讶它在 FF 中工作，将它添加到 DOM，它应该适用于所有浏览器

# php - DomNodeList 长度返回 0

> ID：11363184
> 
> 赞同：1
> 
> 时间：2012-07-06T13:32:01.330
> 
> 标签：php

我在过去的 5 个小时里一直在寻找解决方案，我不敢相信我在这里问我的第一个问题是因为一个简单的问题，所以代码是：

```
$urlContents = file_get_contents('http://www.google.com'); 
$dom = new DOMDocument();
$contents = $dom->loadHTMLFile($urlContents);    //$contents = 'source code from www-google.com'
$divsInDomDoc = $dom->getElementsByTagName('div');  // $divsInDomDoc becames a DomNodeList with length = 0
$nNodes = $divsInDomDoc->length  // using this to check length 
```

请有人帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:42:09.687

除了 Tim Cooper 的更改之外，您还需要使用`loadHTML()`而不是`loadHTMLFile()`，因为您已经在字符串中拥有了站点的内容。`loadHTMLFile()`用于读取文件。

```
$contents = $dom->loadHTML($urlContents); 
```

# image-processing - Leptonica 中带有偏差的卷积

> ID：11363185
> 
> 赞同：0
> 
> 时间：2012-07-06T13:32:16.907
> 
> 标签：image-processing, tesseract, convolution

我想用卷积核过滤像素，但有偏差，我看不到如何使用 Leptonica API“模拟”偏差。

到目前为止，我有：

```
PIX* pixs = pixRead("file.png");
L_KERNEL* kel = kernelCreatFromString( 7, 7, 3, 3, "..." );

PIX* pixd = pixConvolve( pixs, kel, 8, 1 ); 
```

任何想法如何模仿经典的“偏见”？我试图在 pixConvolve 之前或之后将它的值添加到图像的每个像素，但结果不是大多数图像处理软件观察到的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:16:13.380

通过“偏差”，我假设您想要移动结果，以便所有像素值都是非负的。

在 pixConvolve() 的注释中，它表示采用绝对值以避免负输出。它还说，如果您希望保留负值，请改用 fpixConvolve()，它在 FPix 上运行并生成 FPix。

如果您想要一个没有裁剪的有偏差的结果，通常需要执行以下操作：

*   (1) pixConvertToFpix() -- 转换为 FPix
*   (2) fpixConvolve() -- 在 FPix 上做卷积，产生一个 FPix
*   (3) fpixGetMin() -- 确定使所有值非零所需的偏差
*   (4) fpixAddMultConstant() -- 添加偏置到 FPix
*   (5) fpixGetMax() -- 求最大值；如果 > 255，则需要 16 bpp Pix 来表示它
*   (6) fpixConvertToPix -- 转换回像素

也许 leptonica 维护者（我）应该将它捆绑到一个简单的界面中；-)

好的，这是一个函数，按照我上面写的大纲，它应该提供足够的灵活性来进行这些卷积。

```
 /*!
 *  pixConvolveWithBias()
 *              Input:  pixs (8 bpp; no colormap)
 *              kel1
 *              kel2  (can be null; use if separable)
 *              force8 (if 1, force output to 8 bpp; otherwise, determine
 *                      output depth by the dynamic range of pixel values)
 *              &bias (<return> applied bias)
 *      Return: pixd (8 or 16 bpp)
 *
 *  Notes:
 *      (1) This does a convolution with either a single kernel or
 *          a pair of separable kernels, and automatically applies whatever
 *          bias (shift) is required so that the resulting pixel values
 *          are non-negative.
 *      (2) If there are no negative values in the kernel, a normalized
 *          convolution is performed, with 8 bpp output.
 *      (3) If there are negative values in the kernel, the pix is
 *          converted to an fpix, the convolution is done on the fpix, and
 *          a bias (shift) may need to be applied.
 *      (4) If force8 == TRUE and the range of values after the convolution
 *          is > 255, the output values will be scaled to fit in
 *          [0 ... 255].
 *          If force8 == FALSE, the output will be either 8 or 16 bpp,
 *          to accommodate the dynamic range of output values without
 *          scaling.
 */
PIX *
pixConvolveWithBias(PIX       *pixs,
                    L_KERNEL  *kel1,
                    L_KERNEL  *kel2,
                    l_int32    force8,
                    l_int32   *pbias)
{
l_int32    outdepth;
l_float32  min1, min2, min, minval, maxval, range;
FPIX      *fpix1, *fpix2;
PIX       *pixd;

    PROCNAME("pixConvolveWithBias");

    if (!pixs || pixGetDepth(pixs) != 8)
        return (PIX *)ERROR_PTR("pixs undefined or not 8 bpp", procName, NULL);
    if (pixGetColormap(pixs))
        return (PIX *)ERROR_PTR("pixs has colormap", procName, NULL);
    if (!kel1)
        return (PIX *)ERROR_PTR("kel1 not defined", procName, NULL);

        /* Determine if negative values can be produced in convolution */
    kernelGetMinMax(kel1, &min1, NULL);
    min2 = 0.0;
    if (kel2)
        kernelGetMinMax(kel2, &min2, NULL);
    min = L_MIN(min1, min2);

    if (min >= 0.0) {
        if (!kel2)
            return pixConvolve(pixs, kel1, 8, 1);
        else
            return pixConvolveSep(pixs, kel1, kel2, 8, 1);
    }

        /* Bias may need to be applied; convert to fpix and convolve */
    fpix1 = pixConvertToFPix(pixs, 1);
    if (!kel2)
        fpix2 = fpixConvolve(fpix1, kel1, 1);
    else
        fpix2 = fpixConvolveSep(fpix1, kel1, kel2, 1);
    fpixDestroy(&fpix1);

       /* Determine the bias and the dynamic range.
         * If the dynamic range is <= 255, just shift the values by the
         * bias, if any.
         * If the dynamic range is > 255, there are two cases:
         *    (1) the output depth is not forced to 8 bpp ==> outdepth = 16
         *    (2) the output depth is forced to 8 ==> linearly map the
         *        pixel values to [0 ... 255].  */
    fpixGetMin(fpix2, &minval, NULL, NULL);
    fpixGetMax(fpix2, &maxval, NULL, NULL);
    range = maxval - minval;
    *pbias = (minval < 0.0) ? -minval : 0.0;
    fpixAddMultConstant(fpix2, *pbias, 1.0);  /* shift: min val ==> 0 */
    if (range <= 255 || !force8) {  /* no scaling of output values */
        outdepth = (range > 255) ? 16 : 8;
    } else {  /* scale output values to fit in 8 bpp */
        fpixAddMultConstant(fpix2, 0.0, (255.0 / range));
        outdepth = 8;
    }

        /* Convert back to pix; it won't do any clipping */
    pixd = fpixConvertToPix(fpix2, outdepth, L_CLIP_TO_ZERO, 0);
    fpixDestroy(&fpix2);

    return pixd;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:30:18.887

这是我根据 Dan 输入需要的解决方案。

```
/*!
 *  pixConvolveWithBias()
 *              Input:  pixs (8 bpp; no colormap)
 *              kel1
 *              kel2  (can be null; use if separable)
 *              outdepth (of pixd: 8, 16 or 32)
 *              normflag (1 to normalize kernel to unit sum; 0 otherwise)
 *              bias
 *      Return: pixd
 *
 *  Notes:
 *      (1) This does a convolution with either a single kernel or
 *          a pair of separable kernels, and automatically applies whatever
 *          bias (shift) is required so that the resulting pixel values
 *          are non-negative.
 *      (2) If there are no negative values in the kernel, a convolution 
 *          is performed and bias added.
 *      (3) If there are negative values in the kernel, the pix is
 *          converted to an fpix, the convolution is done on the fpix, and
 *          a bias (shift) is applied.
 */
PIX *
pixConvolveWithBias(PIX       *pixs,
                    L_KERNEL  *kel1,
                    L_KERNEL  *kel2,
                    l_int32    outdepth,
                    l_int32    normflag,
                    l_int32    bias)
{
l_float32  min1, min2, min, minval, maxval, range;
FPIX      *fpix1, *fpix2;
PIX       *pixd;

    PROCNAME("pixConvolveWithBias");

    if (!pixs || pixGetDepth(pixs) != 8)
        return (PIX *)ERROR_PTR("pixs undefined or not 8 bpp", procName, NULL);
    if (pixGetColormap(pixs))
        return (PIX *)ERROR_PTR("pixs has colormap", procName, NULL);
    if (!kel1)
        return (PIX *)ERROR_PTR("kel1 not defined", procName, NULL);

        /* Determine if negative values can be produced in convolution */
    kernelGetMinMax(kel1, &min1, NULL);
    min2 = 0.0;
    if (kel2)
        kernelGetMinMax(kel2, &min2, NULL);
    min = L_MIN(min1, min2);

    if (min >= 0.0) {
        if (!kel2)
            pixd = pixConvolve(pixs, kel1, outdepth, normflag);
        else
            pixd = pixConvolveSep(pixs, kel1, kel2, outdepth, normflag);

        pixAddConstantGray(pixd, bias);
    } else {

          /* Bias may need to be applied; convert to fpix and convolve */
      fpix1 = pixConvertToFPix(pixs, 1);
      if (!kel2)
          fpix2 = fpixConvolve(fpix1, kel1, normflag);
      else
          fpix2 = fpixConvolveSep(fpix1, kel1, kel2, normflag);
      fpixDestroy(&fpix1);

      fpixAddMultConstant(fpix2, bias, 1.0);

      pixd = fpixConvertToPix(fpix2, outdepth, L_CLIP_TO_ZERO, 0);
      fpixDestroy(&fpix2);

    }

    return pixd;
} 
```

# c++ - iterator 和 const_iterator 之间的比较效率低吗？

> ID：11363188
> 
> 赞同：11
> 
> 时间：2012-07-06T13:32:43.493
> 
> 标签：c++, performance, c++11, iterator, constants

变体一：

```
const auto end = whatever.end();
for (auto it = whatever.begin(); it != end; ++it)
{
    // ...
} 
```

变体 b：

```
const auto end = whatever.cend(); // note the call to cend insteand of end here
for (auto it = whatever.begin(); it != end; ++it)
{
    // ...
} 
```

是否有任何理由相信变体 b 的效率会低于变体 a，因为循环条件比较了两种不同类型的迭代器？这会导致隐式转换`it`吗？

（`end`在 for 循环中多次使用，因此我希望将其吊出。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-06T13:40:01.887

原则上，它可能效率较低，并导致非零成本的隐式转换。

在实践中，`iterator`并且`const_iterator`可能参与继承关系（一个派生自另一个，或者两者都派生`_iterator_base`自更多派生的迭代器被忽略）。即使没有这些，转换也可能很简单，可以内联和优化。

libstdc++ 以不同方式优化这些比较，通过定义`operator==`和`operator!=`之间的`iterator`和`const_iterator`： http: [//gcc.gnu.org/onlinedocs/libstdc++/libstdc++-html-USERS-4.3/a02037.html#l00295](http://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-html-USERS-4.3/a02037.html#l00295)

libc++ 没有任何优化： http: [//llvm.org/svn/llvm-project/libcxx/trunk/include/__tree](http://llvm.org/svn/llvm-project/libcxx/trunk/include/__tree) - 尽管`const_iterator`from的构造函数再次`iterator`如此微不足道，我希望它被完全优化出来.

# java - 当客户端套接字被服务器关闭然后客户端在同一端口上打开新套接字时出现 JVM_Bind 错误

> ID：11363193
> 
> 赞同：1
> 
> 时间：2012-07-06T13:33:00.893
> 
> 标签：java, windows, sockets, tcp

此问题是间歇性的，在每 30 秒运行一次并执行以下网络通信的进程上每隔几个小时就会发生一次：

*   远程机器上有一个服务器正在监听
*   客户端连接到这台机器并告诉服务器连接回它
*   **服务器**关闭套接字并重新连接到客户端
*   当客户端关闭套接字时，客户端立即开始在同一端口上侦听

JVM_Bind 错误发生在客户端尝试开始侦听同一端口时，即使它仅在原始套接字关闭后才尝试执行此操作。在套接字关闭和打开新套接字之间添加 100 毫秒的轻微延迟可防止 JVM_Bind 错误。

我可以使用哪些工具来调试此场景？连续运行 netstat 没有显示任何干扰端口的内容。

即使在同一个端口上启动一个新的套接字监听是一种坏主意，为什么这个错误会间歇性地发生？

**编辑：**一些附加信息。服务器从服务器上的临时端口连接回客户端。客户端的旧套接字将直接进入 CLOSED 并且应该能够重新打开。可能的原因不会是操作系统、JVM 或硬件上发生的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:37:11.023

从[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/Socket.html#setReuseAddress%28boolean%29)

当 TCP 连接关闭时，连接可能会在连接关闭后的一段时间内保持超时状态（通常称为 TIME_WAIT 状态或 2MSL 等待状态）。对于使用众所周知的套接字地址或端口的应用程序，如果存在涉及套接字地址或端口的处于超时状态的连接，则可能无法将套接字绑定到所需的 SocketAddress。

为什么会进入这种状态，[这里](http://www.serverframework.com/asynchronousevents/2011/01/time-wait-and-its-design-implications-for-protocols-and-scalable-servers.html)详述。

![这是它进入TIME_WAIT状态的方式](../Images/e2a369da6a809fafa5c35b9d0518db10.png)

现在，每次断开套接字时都不会发生这种情况，这就是为什么问题可能是间歇性的。

**在使用 bind(SocketAddress) 绑定套接字之前启用 SO_REUSEADDR 允许绑定套接字，即使先前的连接处于超时状态。**

```
socket.setReuseAddress(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T20:36:40.563

在解决了这个问题之后，我们最终运行了 Wireshark 和 Procmon 来监控 TCP 连接和数据包。Procmon 是一个非常好的调试 Windows 问题的工具，可以配置为显示 TCP 连接的创建和删除时间。Wireshark 显示通过线路的实际数据包数据。此输出表明，当 JVM_Bind 错误发生时，事情正在按应有的方式进行。工作时和失败时的日志没有实质性差异。

这将责任归咎于系统。我考虑了系统设置，然后将注意力转向驱动程序问题的可能性。更新了网络适配器驱动程序，问题就消失了。

故事的寓意是用 Wireshark 和 Procmon 调试网络问题，它把这个问题变成了一个可分析的问题。

# php - 如何在 jQuery AJAX 函数中使用“数据：”？

> ID：11363199
> 
> 赞同：1
> 
> 时间：2012-07-06T13:33:31.250
> 
> 标签：php, ajax, jquery

我正在使用这个 jQuery AJAX 函数，并且试图弄清楚如何使用它的“数据：”部分。根据这个页面（http://api.jquery.com/jQuery.ajax/），我可以使用“数据：”将数字 22 发送到“process_stage.php”，这样我就可以使用它了。

谁能告诉我我需要在我的 process_stage.php 页面中输入什么才能访问数字 22？

```
function myAJAX(){
$.ajax({                                      
url: 'process_stage.php',     
      data: '22',    
      dataType: 'json',                             
      success: function(data) {             
        var videoid = data[0];      
        var currentID = data[1];
        $('#youtube').html("<iframe width='400' height='225' src='http://www.youtube.com/embed/"+videoid+"?rel=0&amp;autohide=1&amp;showinfo=0&amp;autoplay=1' frameborder='0' allowfullscreen></iframe>");
        setTimeout(function (){
            timedCount(currentID);
            },1000);
        }
});
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T13:36:03.040

当您发出 HTTP GET 请求时，`data`需要是键值对，因为这就是构造 GET 请求的方式（例如`/get.php?var1=a&var2=b&var3=c`）。

`jQuery.ajax()`接受此键值对作为对象映射或字符串，如文档中所述：

> 要发送到服务器的数据。如果还不是字符串，则将其转换为查询字符串。它附加到 GET 请求的 url。请参阅`processData`阻止此自动处理的选项。对象必须是键/值对。如果 value 是一个 Array，jQuery 会根据传统设置的 value 序列化多个具有相同 key 的值（如下所述）。

所以你应该使用任何一个；

```
data: "value=22" 
```

或者

```
data: {
    value: 22
} 
```

然后在 PHP 中你可以使用`$_GET['value']`它来检索它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T13:37:34.777

您的值需要一个字段名称才能与之匹配。为此，请制作`data`一个对象，例如`{my_value: 22}`. 然后在您的 PHP 脚本中查找名为`my_value`.

# msbuild - 尝试生成测试执行报告时，specflow 失败

> ID：11363202
> 
> 赞同：8
> 
> 时间：2012-07-06T13:33:36.190
> 
> 标签：msbuild, specflow

我有一个使用 SpecFlow、NUnit 和 Coypu 对 Web 应用程序进行验收测试的项目。我已经通过 Jenkins 在构建服务器上构建了项目。Jenkins 调用一个在 specs 项目上运行 msbuild 的 psake 脚本，然后该脚本调用 nunit-console 来运行规范/测试，然后我想从 SpecFlow 生成一个报告。

```
Framework "4.0"

task Default -depends RunSpecs

task BuildSpecs {
    $env:EnableNuGetPackageRestore = "true"
    msbuild /t:Rebuild ReturnsPortal.Specs.csproj
}

task RunSpecs -depends BuildSpecs {
    exec { & "C:\path\to\NUnit 2.5.9\bin\net-2.0\nunit-console-x86.exe" /labels /out=TestResult.txt /xml=TestResult.xml .\bin\Debug\TheWebApp.Specs.dll }
    exec { & "C:\path\to\SpecFlow\1.8.1\specflow.exe" nunitexecutionreport TheWebApp.Specs.csproj /out:SpecResult.html }
} 
```

但是，对 specflow.exe 的最后一次 exec 调用失败了，原因是：

> 元素 <UsingTask> 下的元素 <ParameterGroup> 无法识别。C:\Program Files (x86)\Jenkins\jobs\TheWebApp\workspace\Web\Sites\TheWebApp.nuget\nuget.targets

一些谷歌搜索提示可能是正在使用的 msbuild 版本存在问题（例如[这里](https://stackoverflow.com/questions/4440665/get-xml-documentation-files-from-tfs-team-build-script)，[这里](http://social.msdn.microsoft.com/Forums/en-US/dslvsarchx/thread/998002e7-7f06-460a-9ee0-03e1edd419c5/)）。但是我`Framework "4.0"`在我的 psake 脚本中有，并且 Specs 项目的目标是 .NET Framework 4.0，并且它在构建步骤中构建得很好，所以我不确定为什么 specflow 似乎使用的是早期版本的 msbuild。或者可能是其他地方的问题？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-11T10:44:41.817

这是我的答案，来自[SpecFlow Wiki](https://github.com/techtalk/SpecFlow/wiki/Reporting)：

> 对于 .NET 4.0 项目很重要：因为 specflow.exe 是为 .NET 3.5 编译的，所以默认情况下它无法加载 .NET 4.0 程序集。要为 .NET 4.0 项目生成此报告，您必须通过配置文件强制 specflow.exe 使用 .NET 4.0 运行时。只需复制下面的配置并创建一个 specflow.exe.config 文件并将其放在您的 specflow.exe 旁边，您就可以创建步骤定义报告。

```
<?xml version="1.0" encoding="utf-8" ?> 
<configuration> 
    <startup> 
        <supportedRuntime version="v4.0.30319" /> 
    </startup> 
</configuration> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T22:28:10.787

我尝试使用上面建议的配置文件解决方案。它适用于本地测试，但是一旦我将代码推送到我们的 CI 环境，它就会窒息，因为 CI 环境没有那个配置文件。我们将 CI 环境限制为仅使用各种软件包的干净版本，因此我们不想尝试将特殊配置注入 CI 服务器。

我们注意到 SpecFlow 在我们的几个 .NET 4.0 项目中工作得很好，没有特殊的配置文件。经过一番研究，实际的“问题”似乎是 NuGet 2.1。使用 NuGet 1.7 的 .NET 4.0 项目一切正常。

介于 1.7 和 2.1 之间的 NuGet 在 NuGet.targets 文件中引入了旧版 MSBuild 不支持的新功能。具体来说，问题似乎出在`<ParameterGroup>`下面的元素`<UsingTask>`上，正如错误消息所解释的那样。

粗略浏览一下目标文件表明该部分负责使 NuGet 保持最新。删除此部分完全解决了问题，就像添加上面的配置文件一样，尽管也删除了似乎提供的自我更新功能。鉴于 .targets 文件已提交到存储库，该解决方案也适用于我们的 CI 环境，而无需在 CI 端进行任何更改。

它不一定是比 ngm 更好的解决方案，它只是一个不同的解决方案。根据您的环境，这可能是一种更可取的方式，也可能不是。

# c# - 如何让动态 ListBox ItemTemplate 水平拉伸 ListBox 的整个宽度？

> ID：11363203
> 
> 赞同：1
> 
> 时间：2012-07-06T13:33:36.570
> 
> 标签：c#, wpf, listbox

我有一个带有自定义模板的普通列表框来显示项目。我无法管理的是在列表框的整个 widtg 上水平拉伸模板。

我的问题是，主窗口中的所有元素都是动态放置的，并且它们会随着窗口大小更改方法一起调整大小。我在网上搜索过，想法是把 Horizo​​ntalAligment="Stretch"。我尽一切可能尝试了这一点，但没有取得重大成功。

我的 xml 代码是这样的：

```
<UserControl x:Class="LiveGames.Dealer.UsersList"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         Background="Transparent">
<Border CornerRadius="10" BorderBrush="White" BorderThickness="2" >
     <Grid>
        <Grid.Resources>
            <DataTemplate x:Key="PlayerTemplate">
                <WrapPanel>
                    <Border CornerRadius="10" BorderBrush="White" BorderThickness="2" >
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                                <GradientStop Offset="0.0" x:Name="gradientOne_Name" Color="Red" />
                                <GradientStop Offset="1.0" x:Name="gradientTwo_Name" Color="DarkRed" />
                            </LinearGradientBrush>
                        </Border.Background>
                        <Grid >
                            <Grid.ColumnDefinitions x:Uid="5">
                                <ColumnDefinition  Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Name="RowH" Height="50"/>
                            </Grid.RowDefinitions>

                            <!--  <TextBlock VerticalAlignment="Center" Margin="5" Grid.Column="0" Grid.Row="1" Text="Player: " FontSize="18" />-->
                            <TextBlock VerticalAlignment="Center" Margin="5" Grid.Column="0" Text="{Binding Path=ID}" FontSize="22" FontWeight="Bold"/>
                        </Grid>
                    </Border>
                </WrapPanel>
            </DataTemplate>
        </Grid.Resources>
        <Canvas>
            <ListBox Name="userList" Background="Transparent" BorderBrush="Transparent" BorderThickness="0" ItemsSource="{Binding}"  ItemTemplate="{StaticResource PlayerTemplate}" HorizontalContentAlignment="Stretch">
                <ListBox.ItemContainerStyle>
                    <Style TargetType="ListBoxItem" >
                        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                    </Style>
                </ListBox.ItemContainerStyle>
            </ListBox>
        </Canvas>
    </Grid>
</Border> 
```

有没有人知道如何做到这一点，甚至可能在后面的代码中？

米

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T12:35:28.667

你可以试试这个：

```
<Style TargetType="{x:Type ListBoxItem}">
    <Setter Property="HorizontalAlignment" Value="Stretch" />
    <Setter Property="Width" Value="{Binding ActualWidth, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ScrollContentPresenter}}}"></Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:38:06.290

我最近遇到了这个问题并使用以下 Xaml 解决了它（适用于 ListBox.ItemContainerStyle）

```
<Style x:Key="ListBoxItemStyle" TargetType="ListBoxItem">
    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
    <Setter Property="HorizontalAlignment" Value="Stretch"/>
</Style> 
```

此外，您应该知道，通过将 ListBox 放在画布内，它不会拉伸以适应其父级。它将被调整为您将 ListBox 设置为 Canvases 的任何大小，它们不会对其子级执行布局。

# sql - 匹配所有记录

> ID：11363204
> 
> 赞同：2
> 
> 时间：2012-07-06T13:33:41.810
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我在为我的应用程序编写 SQL 查询时遇到了困难。下面显示了我数据库中一些表的屏幕截图。

![在此处输入图像描述](../Images/26158b55c29652a32f7a856afe0ff20a.png) ![在此处输入图像描述](../Images/1d7ce16f5410766fa5e6befc9f671f95.png)

请让我解释一下我的应用程序的一部分是如何工作的，然后我可以向您展示我在使用 SQL 查询时遇到的问题。

用户可以在我的系统上创建申请表 ( `dbo.Form`)。一份申请表由几个部分组成，其中一个部分是就业历史 ( `dbo.FormEmployment`)。就业记录包括雇主姓名、开始日期等详细信息，还包括等级 ID。用户可以将一个或多个就业记录添加到表中`dbo.FormEmployment`。

系统管理员可以将班次 ( `dbo.Shift`) 添加到系统，然后将成绩分配给班次。这些等级记录在`dbo.ShiftGrade`表中。一个班次可以分配 1 个或多个等级，即可以分配 1、2、3、4 或 5 个等级。

当系统管理员添加了班次和班次成绩后，我想执行 SQL 查询以返回其成绩与分配给班次的成绩相匹配的用户列表（请记住，用户在添加就业记录时会添加他们的成绩）。

我编写了以下有效的 SQL 查询，但是，此查询的问题是它返回一个用户列表，这些用户的任何等级都与分配给班次的等级相匹配。

```
SELECT   u.userID, u.userTypeID, u.firstName, u.lastName, u.email, u.password, 
u.contactNumber, u.organisationID, u.emailVerificationCode, u.mobileVerificationCode, 
u.userStatusID, u.AddedBy, u.AddedDate, u.ModifiedBy, u.ModifiedDate
FROM     [User] u
--Check Grades Match
WHERE    u.userID IN
     (
     SELECT f.locumID
     FROM   dbo.Form f, dbo.FormEmployment emp
     WHERE  f.formID = emp.formID
     AND    emp.statusID = 101
     AND    emp.workYN = 1
     AND    emp.gradeID IN (
             select gradeID from dbo.ShiftGrade where shiftID = @p0
             )
     ) 
```

您可以看到我正在使用 IN 语句来执行此操作。但是，我只想返回一个用户列表，这些用户可以与分配给班次的成绩完全相同。因此，如果已为班次分配了 3 个等级，那么我希望返回一个也具有完全相同的三个等级的用户列表。

我为这篇冗长的帖子道歉，我只是认为这样解释会更好。对此的任何反馈或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:56:14.620

```
select u.*
from dbo.Users u
join dbo.Form f on u.? = f.formId
join dbo.FormEmployment fe on fe.formId = f.formId
join dbo.Grade g on g.gradeId =  fe.gradeId
join dbo.ShiftGrade shg on shg.gradeId =g.gradeId
join dbo.Shift sh on sh.shiftId = shg.shiftId
where
    sh.shiftId = -- recently added shift id
and g.gradeId == -- recently added grade id 
```

# android - 带有肯定按钮并验证自定义 EditText 的 AlertDialog

> ID：11363209
> 
> 赞同：19
> 
> 时间：2012-07-06T13:34:11.087
> 
> 标签：android, android-dialog

我创建了简单`AlertDialog`的正面和负面按钮。正面按钮已注册`DialogInterface.OnClickListener`，我从中获得`EditText`价值。我必须验证它（例如，如果它必须不为空）并且如果值不正确，则不允许关闭此对话框。单击并验证后如何防止关闭对话框？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-06T13:49:47.060

## 对话框创建：

```
AlertDialog.Builder builder = new AlertDialog.Builder(YourActivity.this);
builder.setCancelable(false)
.setMessage("Please Enter data")
.setView(edtLayout) //<-- layout containing EditText
.setPositiveButton("Enter", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int id) {
        //All of the fun happens inside the CustomListener now.
        //I had to move it to enable data validation.
    }
});
AlertDialog alertDialog = builder.create();
alertDialog.show();
Button theButton = alertDialog.getButton(DialogInterface.BUTTON_POSITIVE);
theButton.setOnClickListener(new CustomListener(alertDialog)); 
```

## 自定义监听器：

```
class CustomListener implements View.OnClickListener {
    private final Dialog dialog;
    public CustomListener(Dialog dialog) {
        this.dialog = dialog;
    }
    @Override
    public void onClick(View v) {
        // put your code here
        String mValue = mEdtText.getText().toString();
        if(validate(mValue)){
            dialog.dismiss();
        }else{
            Toast.makeText(YourActivity.this, "Invalid data", Toast.LENGTH_SHORT).show();
        }
    }
} 
```

# javascript - 概括代码以切换禁用属性的最佳方法

> ID：11363211
> 
> 赞同：1
> 
> 时间：2012-07-06T13:34:13.910
> 
> 标签：javascript, jquery

以下代码 (*) 用于在两个按钮之间切换禁用属性，您可以在[http://jsfiddle.net/cNSVX/3/](http://jsfiddle.net/cNSVX/3/)上查看它。

我想知道概括此代码以便将此行为附加到几个按钮的最佳方法是什么。
类似于以下内容。

```
body.onload(togglingButton(elem1, elem2)); 
```

* * *

```
$('#filterOpened').click(function() {
    $('#filterOpened').attr('disabled', 'disabled');
    $('#filterClosed').removeAttr('disabled');
});

$('#filterClosed').click(function() {
    $('#filterClosed').attr('disabled', 'disabled');
    $('#filterOpened').removeAttr('disabled');
});

function togglingButton (elem1, elem2) {
    if (elem2.attr('disabled')) {
        elem1.attr('disabled', 'disabled');
        elem2.removeAttr('disabled');
   } else {
        elem2.attr('disabled', 'disabled');
        elem1.removeAttr('disabled');
   } 
};
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:45:42.837

您可以使用 jQuery 进行如下操作。此外，如果您使用的是 jQuery 1.6+，那么您应该使用`.prop()`来切换您的`disabled`属性。

> 属性通常会影响 DOM 元素的动态状态，而不会更改序列化的 HTML 属性。示例包括输入元素的 value 属性、输入和按钮的 disabled 属性或复选框的 checked 属性。[prop](http://api.jquery.com/prop/)方法应该用于设置禁用和检查，而不是 .attr() 方法。.val() 方法应该用于获取和设置值。

```
​$('button').click(function(){ //<---  attaches click to all button's
      $(this).prop('disabled',true);  //<-- only disable the clicked button
      $('button').not(this).prop('disabled',false);  //<-- all button's but the clicked one should be enabled
});​​​ 
```

这是一个示例小提琴[http://jsfiddle.net/cNSVX/5/](http://jsfiddle.net/cNSVX/5/)

如果您打算将某些按钮排除在切换之外，最好给它们一个类，这样您就可以更轻松地选择需要/不需要的按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:48:21.510

一种简单的方法是使用 jQuery 的`.data()`函数来链接这两个元素，然后为这两个元素分配一个事件处理程序：

```
function disableToggle(el1,el2) {
    el1.data('partner',el2);
    el2.data('partner',el1);

    el1.add(el2).on('click',function(){
        $(this).prop('disabled',true);
        $(this).data('partner').prop('disabled',false);
    });
}

$(function(){
    var opened = $('#filterOpened');
    var closed = $('#filterClosed');

    disableToggle(opened,closed)
}); 
```

我创建了一个演示：

[**jsFiddle 演示**](http://jsfiddle.net/jackwanders/YJ6rp/)

# javascript - 视图中的滚动事件未触发（backbone.js）

> ID：11363217
> 
> 赞同：0
> 
> 时间：2012-07-06T13:34:38.853
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我的backbone.js 视图中有一个`scroll`事件。但是，当我滚动屏幕时，`scroll`似乎没有触发事件处理程序。`$(windows).scroll()`虽然工作正常。这是否意味着该`scroll`事件不能用于 Views？

**看法**

```
PhotoListView = Backbone.View.extend({
    el: '#photo_list',

    events: {
        'scroll': function() {
            console.log('scrolling!');
        }
    },

    initialize: function() {
        this.collection.bind('reset', this.render, this);
    },

    render: function() {
        // ...
        }, this);
        return this;
    }
}); 
```

另外，如果我想用它`$(windows).scroll()`来处理滚动事件，我应该将它插入到backbone.js代码的哪个部分？下面是我目前放置的位置。

**路由器**

```
var AppRouter = Backbone.Router.extend({
    routes: {
        '': 'explore'
    },

    explore: function() {
        this.photoList = new PhotoCollection();
        var self = this;
        this.photoList.fetch({
            success: function() {
                self.photoListView = new PhotoListView({ collection: self.photoList });
                self.photoListView.render();

                // Check for Scrolling
                $(window).scroll(function() {
                    self.checkScroll();
                });
            }
        });
    },

    checkScroll: function() {
        var contentOffset = $('#photo_list').offset().top;
        var contentHeight = $('#photo_list').height();
        var pageHeight = $(window).height();
        var scrollTop = $(window).scrollTop();
        var triggerPoint = 100;

        if(contentOffset + contentHeight - scrollTop - pageHeight < triggerPoint) {

            this.photoListView.collection.requestNextPage()
                .done(function(data, textStatus, jqXHR) {
            });

        }
    }

});

var app = new AppRouter();
Backbone.history.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:41:00.587

滚动处理程序将在您滚动元素时触发，`"#photo_list"`因为它已绑定在该元素上。

`$(window).scroll`用于滚动窗口时。

# php - 有没有办法检测用户是否使用 iphone 3GS 或 4 浏览网站？

> ID：11363219
> 
> 赞同：0
> 
> 时间：2012-07-06T13:34:42.137
> 
> 标签：php, javascript, iphone, ios, html

我想检测用户是否使用低于 iphone 4 的 iphone 类型来运行不同的类型

HTML5 视频，因为 iphone 3 只能运行低质量的视频。谁能给我一些

解决方案来实现这一目标。非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:29:42.017

我已经在几个人流量大的网站上使用了它，它的灯光效果很好

[http://code.google.com/p/php-mobile-detect/](http://code.google.com/p/php-mobile-detect/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:18:06.510

在服务器（php）上：

```
<?php
if(strpos($_SERVER['HTTP_USER_AGENT'], 'Apple-iPhone3C')!==false || strpos($_SERVER['HTTP_USER_AGENT'], 'Apple-iPhone4C')!==false) {
    echo 'iPhone 4';
} else {
    echo 'other model';
} 
```

另请参阅：[在浏览器中检测](https://stackoverflow.com/questions/3436719/is-there-a-way-to-discern-an-iphone-3g-s-visitor-to-an-iphone-4-visitor)。

# javascript - 等到所有脚本完成后再启用按钮

> ID：11363224
> 
> 赞同：1
> 
> 时间：2012-07-06T13:34:53.803
> 
> 标签：javascript, jquery, ajax, html, jquery-mobile

我在 Stack Overflow 上发现了这个问题的变种，但没有什么符合我的具体情况。希望有人有一些见识。

现在，我正在开发一个 Web 应用程序，其中有一个按钮（技术上是一个锚标记），按下时会生成一个项目列表。问题是，如果用户连续两次快速按下此按钮，则列表将生成两次——该按钮旨在在生成列表之前清除列表以防止重复，但脚本交互方式的某些原因导致了这种情况漏洞。该按钮通过对服务器进行 ajax 调用来生成列表。

现在，我尝试通过在按下按钮时将布尔值翻转为 1 来修复此错误，并让按钮什么都不做，直到它再次变为 0。无论我在代码中的哪个位置再次将值设置为 0，这似乎都不起作用：我尝试将它放在 ajaxGet 函数的末尾以及页面加载之后，但是这两种解决方案都不起作用。

理想情况下，我希望在页面完全完成加载和渲染后立即启用按钮。最终，需要一种防止用户连续两次按下按钮的方法。我已经考虑过为此使用计时器，但我不希望不得不求助于此。

有任何想法吗？如果您想要代码片段，请告诉我。

============================================

编辑：谢谢大家的回答！我使用了 Fibrewire 答案的变体来解决问题，效果很好。在按钮调用的方法的开头，我放了以下代码：

```
if (actionsDisabled == 1) {
    return;
}//if
else {
    actionsDisabled = 1;
    setTimeout("actionsDisabled=0;", 1000);
}//else 
```

其中 actionsDisabled 是一个全局布尔值。它可能不像它应该的那样无懈可击（特别是，如果列表加载时间超过一秒钟，你会遇到问题），但它优雅且实用，并且具有减少服务器请求的额外好处（如果流量曾经成为一个问题，您可以将呼叫限制为每 5 或 10 秒或其他一次）。再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:38:58.410

您可以在第一次单击后禁用该按钮

[单击后禁用按钮](https://stackoverflow.com/questions/2323948/disabling-the-button-after-once-click)

如果您需要用户将来能够再次单击该按钮，您可以使用 setTimeout() 方法在短暂暂停后重新启用它

[http://www.w3schools.com/jsref/met_win_settimeout.asp](http://www.w3schools.com/jsref/met_win_settimeout.asp)

# google-drive-api - Google Drive API - 获取公共文件

> ID：11363225
> 
> 赞同：2
> 
> 时间：2012-07-06T13:35:00.600
> 
> 标签：google-drive-api

有没有一种方法可以在未经身份验证的情况下使用 API 在 Google Drive 中获取标记为公开查看的文件？

我知道“downloadUrl”属性，但它是一个临时 URL，没有提及它的持续时间。我想直接使用 API 来获取文件，并且我想我在某处读到有人暗示调用 API 的可能性未经身份验证以检索公共文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T00:29:13.287

编辑：`webContentLink`文件资源的字段现在提供了这个。

这是一个已知问题，也是我们正在努力解决的大问题。目前，即使对于公共文件，也需要某种身份验证，我认为这并不理想。对于那个很抱歉。

# c - 指向数组的指针数组

> ID：11363226
> 
> 赞同：9
> 
> 时间：2012-07-06T13:35:00.237
> 
> 标签：c

我是 C 编程新手，这是我的问题：

我想将每个数组的第一个值存储在一个新数组中，然后将每个数组的第二个值存储在一个新数组中，依此类推。

我可以声明指针数组，但我不知道如何使用它！

请我需要帮助。

```
int main()
{
    int t1[4]={0,1,2,3};
    int t2[4]={4,5,6,7};
    int t3[4]={8,9,10,11};
    int t4[4]={12,13,14,15};
    int *tab[4]={t1,t2,t3,t4};
    int i,j,k,l;
    for (i=0; i<4;i++)
    {
        printf("%d\t", *tab[i]);
    }

    return 0;
} 
```

当我这样做时，我只存储每个数组的第一个值。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T14:01:17.297

您的术语到处都是。我认为回答您的问题的最简单方法是逐行浏览您的代码。

```
int main()
{
int t1[4]={0,1,2,3};      //Declares a 4 integer array "0,1,2,3"
int t2[4]={4,5,6,7};      //Declares a 4 integer array "4,5,6,7"
int t3[4]={8,9,10,11};    //Declares a 4 integer array "8,9,10,11"
int t4[4]={12,13,14,15};  //Declares a 4 integer array "12,13,14,15"
int *tab[4]={t1,t2,t3,t4};//Declares a 4 pointer of integers array "address of the first element of t1, address of the first element of t2, ..."
int i,j,k,l;              //Declares 4 integer variables: i,j,k,l
for (i=0; i<4;i++)
 {
  printf("%d\t", *tab[i]); //print out the integer that is pointed to by the i-th pointer in the tab array (i.e. t1[0], t2[0], t3[0], t4[0])
 }

 return 0;
 } 
```

在你循环之前，你所做的一切似乎都很好。您只显示每个数组的第一个整数，因为您没有通过它们。要遍历它们，您的代码应如下所示：

```
for (i=0; i<4;i++)
{
   for (j=0; j<4; j++)
   {
      printf("%d\t", *(tab[j] + i));
   }
} 
```

上面的代码使用了两个循环计数器，一个 (the `i`) 遍历数组中的位置（数组中的第一个值，数组中的第二个值等）；另一个通过不同的数组（`j`）。它通过检索存储在其中的指针`tab[j]`并创建一个具有正确偏移量的新指针来显示`i`第 th 列的值。这称为指针算术（这里有关于指针算术的附加[信息](https://stackoverflow.com/questions/394767/pointer-arithmetic)）

大多数人发现语法`*(tab[j] + i)`很笨拙，但它更能描述实际发生的事情。在 C 中，您可以将其重写为`tab[j][i]`，这更常见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T13:47:42.953

您已按预期存储数据，您只需要正确访问它

```
for (i=0; i<4;i++)
{
  for (j = 0; j < 4; j++) {
    int* temp = tab[i];    
    printf("%d\t", temp[j]);      // or try the next line...
    printf("%d\t", *(temp + j));  // prints same value as above line
    printf("%d\t", tab[i][j];     // the same value printed again
  }
} 
```

以上所有内容都打印相同的值，只是使用指针算法访问该值的不同方式。的每个元素`tab`都是一个`int*`值，每个元素的值都是您`int[]`在开始时定义的其他数组的地址

**编辑：**响应 Jerome 的评论，您可以通过声明 4 个数组来实现

```
int tab1[4]={*t1,*t2,*t3,*t4};
int tab2[4]={*(t1+1),*(t2+1),*(t3+1),*(t4+1)};
int tab3[4]={*(t1+2),*(t2+2),*(t3+2),*(t4+2)};
int tab4[4]={*(t1+3),*(t2+3),*(t3+3),*(t4+3)}; 
```

现在`tab1`包含每个数组的第一个元素，`tab2`第二个元素，依此类推。然后你可以使用

```
 int *tttt[4]={tab1,tab2,tab3,tab4};
 for (i=0; i<4;i++) {
   for (j = 0; j < 4; j++) {
     printf("%d\t", tttt[i][j]);   
   }
 } 
```

打印你想要的。如果您像开始时那样声明另一个指针数组

```
 int* tab[4] = {t1,t2,t3,t4}; 
```

那么本质上在矩阵术语中，`tttt`是`tab`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T13:38:33.977

你存储一切，但你只是不显示它。尝试

```
for (i=0; i<4;i++)
 {
  for (j=0; j<4; j++)
  printf("%d\t", *(tab[i]+j));
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-08T00:07:37.333

`int* (*a[5])[5][5][5]`声明一个包含 5 个指针的数组，指向一个 3d 指针数组

`int* (*(*a[5])[5])[5][5][5]`声明一个由 5 个指针组成的数组，指向一个由 5 个指针组成的数组，指向一个指向 int 的 3d 指针数组。

```
#include <stdio.h>

int main()
{
    int t1[4]={0,1,2,3};
    int t2[4]={4,5,6,7};
    int t3[4]={8,9,10,11};
    int t4[4]={12,13,14,15};
    int (*tab[4])[4]={&t1,&t2,&t3,&t4};
    int i,j,k,l;
    for (i=0; i<4;i++)
    {
        printf("%d\t", (*tab[i])[1]);
    }

    return 0;
} 
```

`t2`和之间有区别`&t2`。尽管它们具有相同的值，但它们的类型不同。`int [4]`与`int (*)[4]`。编译器将抛出警告（clang）或错误（gcc）。

`int a[4]`从概念上讲，在编译器级别是指向 4 数组的指针以及数组本身 ( `&a == a`)。

`int (*a)[4]`从概念上讲，在编译器级别是指向 4 数组的指针以及指向数组本身的指针 ( `a == *a`)，因为它指向上述情况成立的数组类型。

在运行时，如果一个`int *`和`int (*a)[4]`指向同一个地址，它们在物理上是相同的——它只是一个地址，同一个地址。类型仅在编译器如何解释和生成具有该地址的算术运算以及它基于类型实际输出的程序集方面很重要。您可以将地址转换为您想要的任何类型，以实现所需的代码输出以在其保存的地址处操作数据。然而，`int a[4]`类型实际上是数组本身，但您使用它就像`a`在内存中有一个指向它的指针，该指针被赋予与数组本身相同的地址。指向的指针`int a[4]`意味着'指向地址范围的指针`a`编译器将其视为具有 int 元素宽度的数组，其中编译器将数组的开头视为指向数组的指针'，并且对该类型的任何操作都将在解引用链中保持一致，即您必须如果类型是指向数组的指针，则在编译器级别使用 (*a)[0] 访问第一个元素，但是如果将相同的地址转换为，`int *`则需要使用 a[0] 访问该成员。

# php - php htmlspecialchars（）不起作用

> ID：11363230
> 
> 赞同：0
> 
> 时间：2012-07-06T13:35:22.950
> 
> 标签：php, xml

我本质上有一个 xml 文件，其中一个属性是具有`&`'s. 我无法解析这个，`simplexml_load_string`所以我`htmlspecialchars`在 xml 解析之前和 xml 解析之后使用它`htmlspecialchars_decode`。但这不起作用。xml 解析一直失败。我的代码如下。

```
public static function parseXMLStr($xml_str) {
            $xml_str=htmlspecialchars($xml_str, ENT_NOQUOTES);
            self::$xml=simplexml_load_string($feature_ban_xml_str);
            if(isset(self::$xml->link)) {

               ..... 
```

出了什么问题？我是否理解错误？

编辑：xml

```
<?xml version="1.0" encoding="UTF-8"?>
<link>
   <sublink active="true" redirect="http://abc.def.com/abcdef?id=&cId=45&kId=kA16000">
   </sublink>
</link> 
```

我必须添加，`str_replace('&','&amp;','')`并且返回效果很好。但我需要一些强大的东西，而不仅仅是&的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:52:15.480

如果只想对属性的链接进行编码，可以使用 url_encode、url_decode

# android - 奇怪的 NullPointerException 不是提示（微调器上的数组适配器数据中的空值）

> ID：11363231
> 
> 赞同：3
> 
> 时间：2012-07-06T13:35:24.460
> 
> 标签：android, android-layout

例外，除此之外别无他法。通常 logcat 有更多有用的信息，但在这种情况下，遗憾的是不多。

```
07-06 13:26:26.654: E/AndroidRuntime(726): java.lang.NullPointerException
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:355)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.widget.AbsSpinner.onMeasure(AbsSpinner.java:192)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.view.View.measure(View.java:8313)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.view.View.measure(View.java:8313)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.widget.ScrollView.measureChildWithMargins(ScrollView.java:1074)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.widget.ScrollView.onMeasure(ScrollView.java:296)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.view.View.measure(View.java:8313)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.view.View.measure(View.java:8313)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.view.View.measure(View.java:8313)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.view.View.measure(View.java:8313)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.os.Looper.loop(Looper.java:130)
07-06 13:26:26.654: E/AndroidRuntime(726):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-06 13:26:26.654: E/AndroidRuntime(726):  at java.lang.reflect.Method.invokeNative(Native Method)
07-06 13:26:26.654: E/AndroidRuntime(726):  at java.lang.reflect.Method.invoke(Method.java:507)
07-06 13:26:26.654: E/AndroidRuntime(726):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-06 13:26:26.654: E/AndroidRuntime(726):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-06 13:26:26.654: E/AndroidRuntime(726):  at dalvik.system.NativeStart.main(Native Method) 
```

我的布局 xml 的开头是（我怀疑 xml 的前半部分遗漏了一些愚蠢的东西）journey.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:baselineAligned="false"
        android:orientation="horizontal"
        android:weightSum="2" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:gravity="center"
            android:orientation="vertical" >
            //Skipped some code I think wont help debug this
            <Spinner
                android:id="@+id/startInMinutes"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" /> 
```

第一个活动，称为此活动。下面活动的前几行。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.journey);
    // Some more code
    // Adapter related code for ListView
    vehicleListView = (Spinner) findViewById(R.id.vehicleList);
    vehicleListView.setAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, vehicleList));
    vehicleListView.setOnItemSelectedListener(this);
    vehicleListView.setSelection(0); 
```

编辑：根本原因是，vehicleList 数组有空值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T14:06:20.933

这`NullPointerException`很可能是因为您在/中有`null`值，您在' 的构造函数中为您的.`array``List``ArrayAdapter``Spinners`

默认情况下，如果 的数据类型不是 type ，则 an`ArrayAdapter`将调用`toString`数据项上的方法并使用该方法设置行上的文本。`TextView``ArrayAdapter``CharSequence`

打印数据数组（`vehicleList`和`Globals.TIME_WINDOW`）的值并确保其中没有`null`值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:41:21.837

必须有一些其他的东西丢失，你应该张贴。无法真正调试您的错误（XML 和 JAVA 文件）。但是，仅从您的 XML 来看，您似乎可以在滚动视图中使用 RelativeLayout，因为您正在进行大量的 LinearLayout 嵌套。每当您必须绘制更多视图时，这不仅很难（现在正在发生）而且还会损害您的应用程序的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T13:54:49.477

我仍然认为问题出在 xml 上，但让我们开始吧：

1 - 我在您的 xml 中没有看到任何 vehicleList id Spinner。你确定这个id存在吗？

2 - 我认为你活动中的这个 vehicleList 是一个数组？你填充了吗？或者它是空的？

3 - 也许问题可能是带有长数组的 startInMinutes 微调器。

# .net - 如何找到路径的父目录？

> ID：11363234
> 
> 赞同：21
> 
> 时间：2012-07-06T13:35:31.997
> 
> 标签：.net

如何获取目录的父级，例如：

```
string upDir = GetOneLvlUp(@"C:\AAA\BBB\CCC\DDD\");

Output:  C:\AAA\BBB\CCC\ 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-06T13:38:21.823

```
upDir = Directory.GetParent(path).FullName; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-06T13:37:39.027

您想要的一切都在 Directory 类中：

[http://msdn.microsoft.com/en-us/library/system.io.directory.aspx](http://msdn.microsoft.com/en-us/library/system.io.directory.aspx)

特别是，GetParent：

[http://msdn.microsoft.com/en-us/library/system.io.directory.getparent.aspx](http://msdn.microsoft.com/en-us/library/system.io.directory.getparent.aspx)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-29T06:42:48.543

```
string path = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
string parentDir = Directory.GetParent(path).FullName; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-17T09:28:13.383

```
var upDir = new DirectoryInfo(yourPath).Parent.FullName; 
```

# java - Spring会话范围bean，线程安全

> ID：11363237
> 
> 赞同：1
> 
> 时间：2012-07-06T13:35:38.190
> 
> 标签：java, multithreading, spring, session, scope

我正在使用 Struts2、Spring、Hibernate 构建应用程序。Struts 操作由 Spring 管理，它们的范围是“请求”，并且我有会话 bean，其中包含一些用于执行对话的状态。在我使用 Struts2 会话映射之前，但我希望“containsKey, put, get, cast”的噩梦消失。所以我开始使用 Spring 管理的会话范围 bean。

问题：这个 bean 不是线程安全的？如果我们每个用户每个浏览器有多个窗口，我们可以在会话 bean 中获得很多线程吗？如何处理？构建线程安全的会话 bean？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:45:54.350

是的。存储在大于请求范围内的所有内容都可能被多个线程访问，并且必须是线程安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T03:01:14.103

如果您担心“每个用户每个浏览器的多个窗口”并且还避免了 Struts2 中的“containsKey, put, get, cast”噩梦，您还可以查看[struts2-conversation 插件](http://code.google.com/p/struts2-conversation/)。该插件将为您管理线程安全问题。

# google-maps - 使用 API 中的 Google Fusion Tables 处理查询

> ID：11363239
> 
> 赞同：0
> 
> 时间：2012-07-06T13:35:44.353
> 
> 标签：google-maps, spreadsheet, google-fusion-tables

我一直在使用 Google 电子表格和 Fusion Tables 来创建地图，但我想做一些涉及更多编码的事情，希望你能帮助改进我的方法。

本质上，我使用电子表格从英国 NHS 本地站点抓取 GP 和 Chemist 数据，并使用 Fusion Tables 对其进行地理编码（https://www.google.com/fusiontables/DataSource?docid=1xmT0D6H6JjRlXVyetubasugqQMswJqKNH7nrKh4）。

我现在要做的是使用 Google Maps Api 发布 Fusion Table 数据，然后添加控件，以便用户可以过滤掉他们不想要的位。我知道如何创建自定义按钮，但我无法解决的是如何在单击按钮时创建查询。

这是非常有用的东西，所以如果你能提供帮助，那就太好了。

到目前为止，我的努力如下：

[http://davidelks.com/MashupTests/gmapsTest.html](http://davidelks.com/MashupTests/gmapsTest.html)

```
<script type="text/javascript">
    var map, infoWindow;
    var toggle_doctors = 'false';
    var toggle_chemists = 'false';

    $(document).ready(function(){
        infoWindow = new google.maps.InfoWindow({});
        map = new GMaps({
            div: '#map',
            lat: 53.023098,
            lng: -2.197793,
            zoom: 11
        });

        var doctors = map.addControl({
            position: 'left_bottom',
            text: 'GPs',
            style: {
            margin: '1px',
            padding: '1px 6px',
            border: 'solid 1px #717B87',
            width: '85px',
            background: '#99ff99'
            },
            events: {
                click: function(){

                    if (toggle_doctors == 'true'){
                        toggle_doctors = 'false';
                        doctors.style.backgroundColor = '#ffffff';  

                    }
                    else {
                        toggle_doctors = 'true';
                        doctors.style.backgroundColor ='#99ff99';

                    }

                }
            }
        });

        var chemists = map.addControl({
            position: 'left_bottom',
            text: 'Late chemists',
            style: {
            margin: '1px',
            width: '85px',
            padding: '1px 6px',
            border: 'solid 1px #717B87',
            background: '#9999ff'
            },
            events: {
                // toggle button between white and colour
                click: function(){

                    if (toggle_chemists == 'true'){
                        toggle_chemists = 'false';
                        chemists.style.backgroundColor = '#ffffff';

                    }
                    else {
                        toggle_chemists = 'true';
                        chemists.style.backgroundColor ='#9999ff';

                    }

                }
            }
        });

        map.loadFromFusionTables({
            query: {

            select: '*',
            from: '1xmT0D6H6JjRlXVyetubasugqQMswJqKNH7nrKh4',
            where: 'TYPE == \'GP\''
            },

            events: {
                click: function(point){

                infoWindow.setPosition(point.latLng);
                infoWindow.open(map.map);
                }
            }
        });

    });//end of code block

</script>
<div id="map" style="height: 500px; width: 300px; border: 1px;"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:59:42.153

建议您查看 Derek Eders 网站，因为他有一个模板，可以将基础融合表数据的子集选择到地图中……我已经在几件事上利用了它，而且效果很好。

derekeder.com/searchable_map_template/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:40:52.060

试试[FusionTablesLayerWizard](http://fusion-tables-api-samples.googlecode.com/svn/trunk/FusionTablesLayerWizard/src/index.html)

# linux - Linux 内核的虚拟内存在 48GB 内存、64 位机器中占用的大小是多少？

> ID：11363241
> 
> 赞同：0
> 
> 时间：2012-07-06T13:35:49.290
> 
> 标签：linux, memory

Linux 内核的虚拟内存在 48GB 内存、64 位机器中占用的大小是多少？我知道在 32 位机器中，Linux 内核占用 1GB 虚拟内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:48:04.890

AMD64 使用“规范形式”的地址（请参阅[此处](https://web.archive.org/web/20120617135759/http://support.amd.com/us/Embedded_TechDocs/24593.pdf)的第 131-135 页）用于未实现完整 64 位的实现。这种奇怪方案背后的基本原理是，随着硬件的发展，未来有可能添加更多的位，并且两半将一起向中间增长。

目前，**所有**实现（即所有现有处理器）都有 48 位地址，因此 00000000'00000000--00007FFF'FFFFFFFF 和 FFFF8000'00000000--FFFFFFFF'FFFFFFFF 是有效地址范围，可用地址的每一半都有 128TB 的内存空间（总共 256TB）。

所以这将是 128TB，这也是[AMD64 下 Linux 下](http://www.debian.org/ports/amd64/)每个进程的最大地址空间。

# .net - 是否可以为 AppHarbor 测试项目应用配置转换？

> ID：11363247
> 
> 赞同：2
> 
> 时间：2012-07-06T13:36:10.503
> 
> 标签：.net, appharbor

AppHarbor 文档中指出，配置转换适用于网站和后台工作配置文件。但是，我有一个不可执行、不可部署的集成测试项目，需要对测试环境进行 app.config 转换。

到目前为止，我对以下文件结构没有任何成功，我猜 AppHarbor 在测试执行构建步骤中不支持 DLL 项目的配置转换：

```
Specs.proj
+
+-- Specs.dll.config
    +
    +-- Specs.dll.Debug.config
    +
    +-- Specs.dll.Test.config 
```

有人知道这是否可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:43:10.033

转换库项目 (dll) 的配置是没有意义的。您的应用程序将使用您的 exe 的 app.config 或 Web 应用程序的 web.config。

因此，您需要将相关配置设置从您的 dll 配置复制到您的 exe/web 配置转换。

**更新**

由于这是用于运行测试，我推荐一种不同的方法：将它们作为依赖项注入。有关此主题的出色文章，请参阅[配置设置是应注入的依赖项。](http://www.devtrends.co.uk/blog/configuration-settings-are-a-dependency-that-should-be-injected)

这是一个自以为是的摘录，改变了我的想法：

> 那么为什么将配置设置添加到您的单元测试项目中是一种黑客行为？好吧，web.config 和 app.config 和其他文件一样。因此，在一个类中引用配置设置意味着该类直接依赖于文件系统。如果您的单元测试在“我的文档”中打开了一个文件，或者从 Internet 下载了一个网页，您不会感到那么舒服（我希望），那么为什么人们认为访问 web.config 是可以接受的呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T07:13:37.147

我想使用 app Harbor 配置值进行集成测试。让应用程序港口注入正确的配置设置，我无法让它工作，但我已经接近了。

我在我的 Web 项目中添加了一个 app.config，因为我的 Web 项目中有我的集成测试。

我将环境应用设置添加到 app.config：

```
<appSettings>
    <add key="Environment" value="localconfig"/> 
```

我注意到当该代码在应用程序港口上运行时，环境值为**Test:27017**。

我写了这段代码：

```
private static string GetMongoDbConnectionString()
{
    string con = ConfigurationManager.AppSettings.Get("MONGOHQ_URL") ??
                ConfigurationManager.AppSettings.Get("MONGOLAB_URI");
    string env = ConfigurationManager.AppSettings.Get("Environment");
    if (env.StartsWith("Test", StringComparison.OrdinalIgnoreCase))
    {
        con = "mongodb://xxxxxxxxx";
    }
    return con;
} 
```

其中 xxxxxxxxx 是我想在集成测试时使用的值。

# php - 如何在图像中合并用户主照片？

> ID：11363248
> 
> 赞同：-1
> 
> 时间：2012-07-06T13:36:14.353
> 
> 标签：php, facebook, sdk, gd, facebook-php-sdk

您好 facebook 开发人员可以帮我快速总结一下用户照片如何合并到我提供的背景图像中？

我已经尝试了文本及其工作。

编辑：

您好，这是我得到的一些代码：其中 $name 是“用户名”，我使它正确。

```
 $canvas = imagecreatefromjpeg ("bg.jpg");      
       $black = imagecolorallocate( $canvas, 61, 61, 61 );
       $font = "font.ttf";
       imagettftext( $canvas, 15, -1, 51, 60, $black, $font, $name );

       imagejpeg( $canvas, "img/".$fbid.".jpg", 50 );
       ImageDestroy( $canvas ); 
```

现在我的问题是如何在后台包含用户的照片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:19:03.803

为了实现这一点，您需要使用 ImageMagick for PHP： http: [//php.net/manual/en/book.imagick.php](http://php.net/manual/en/book.imagick.php)。

```
$img1 = new Imagick( "YOUR_BACKGROUND.png" );
$img2 = new Imagick( "FB_IMAGE.png" );

$img1->compositeImage( $img2, imagick::COMPOSITE_COPYOPACITY, 0, 0 );

header('Content-type: image/png');
echo $img1;

?> 
```

祝你好运！

# c# - 如何将系统货币符号转换为字符串

> ID：11363250
> 
> 赞同：5
> 
> 时间：2012-07-06T13:36:20.127
> 
> 标签：c#, console-application

如果我这样做：

```
Console.Write("The sum is {0:c}", 12); 
```

我在瑞典电脑上，所以它会返回： **总和是 12,00 kr**

但是有没有一种简单的方法来获取货币符号，而不需要数字？像这样（显然这不起作用，只是为了展示我所追求的）：

```
 Console.Write("The symbol is {c}"); 
```

我希望输出：**符号是 kr**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-06T13:38:39.837

您可以使用：

```
System.Globalization.CultureInfo.CurrentCulture.NumberFormat.CurrencySymbol; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-06T13:45:55.247

此代码应返回您要查找的货币符号。

```
System.Globalization.RegionInfo.CurrentRegion.CurrencySymbol 
```

您也可以使用以下代码来获取 ISO 货币符号

```
System.Globalization.RegionInfo.CurrentRegion.ISOCurrencySymbol 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T13:38:46.503

您可以从CurrentCulture中的[NumberFormat中获取它：](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.aspx)

```
Console.Write(System.Threading.Thread.CurrentThread.CurrentCulture.NumberFormat.CurrencySymbol) 
```

# android - Android：PagerView 实例化期间出现空指针异常

> ID：11363255
> 
> 赞同：0
> 
> 时间：2012-07-06T13:36:34.797
> 
> 标签：android, layout

我在运行时遇到空指针异常。我正在从 PagerView 的 2 个 XML 文件中提取相对布局，我似乎搞砸了。知道是什么导致了错误吗？

谢谢你的帮助！

我有两个具有相同结构的 XML 文件——player_turn_solution_component.xml：

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/player_turn_solution_component"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/solutionCaption"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:text="what do you see?" />

        <EditText
            android:id="@+id/solutionInput"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/solutionCaption"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="20dp"
            android:ems="10" >

            <requestFocus />
        </EditText>

    </RelativeLayout> 
```

我的实例化功能：

```
@Override
    public Object instantiateItem(View collection, int position) {
        //Our specific component (TextView or ImageView, depending on posision
        //is placed inside a RelativeLayout that acts as a container
        RelativeLayout container = new RelativeLayout(pagerContext);
        TextView caption = new TextView(pagerContext);
        caption.setText("View: " + position);
        caption.setTypeface(typeface);
        caption.setTextSize(TypedValue.COMPLEX_UNIT_SP, 20);
        container.addView(caption);

        RelativeLayout optionLayout = null;
        TextView optionCaption = null;

        if (position == 0) {
            optionLayout = (RelativeLayout) findViewById(R.id.player_turn_solution_component);
            optionCaption = (TextView) findViewById(R.id.solutionCaption);
        } else if (position == 1) {
            optionLayout = (RelativeLayout) findViewById(R.id.player_turn_clue_component);
            optionCaption = (TextView) findViewById(R.id.clueCaption);
        }

        container.addView(optionLayout);

        ((ViewPager) collection).addView(container,0);  //get the container ready
        return container;   
    } 
```

和 LogCat 输出：

```
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.view.ViewGroup.addView(ViewGroup.java:3158)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.view.ViewGroup.addView(ViewGroup.java:3145)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at my.app.PlayerTurnActivity$HelpPagerAdapter.instantiateItem(PlayerTurnActivity.java:136)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.support.v4.view.PagerAdapter.instantiateItem(PagerAdapter.java:110)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:649)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.support.v4.view.ViewPager.populate(ViewPager.java:783)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1016)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.view.View.measure(View.java:12892)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:594)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:376)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.view.View.measure(View.java:12892)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.view.View.measure(View.java:12892)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1375)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.view.View.measure(View.java:12892)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2257)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.view.View.measure(View.java:12892)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1240)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2628)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.os.Looper.loop(Looper.java:137)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at android.app.ActivityThread.main(ActivityThread.java:4512)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at java.lang.reflect.Method.invokeNative(Native Method)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at java.lang.reflect.Method.invoke(Method.java:511)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:794)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:561)
07-06 09:30:22.337: E/AndroidRuntime(8418):     at dalvik.system.NativeStart.main(Native Method) 
```

编辑：我的新活动包含以下内容，但使用相同的 NPE 时会崩溃，但只有当我滑动以更改寻呼机视图时才会崩溃。

```
if (position == 0) {
        View v = getLayoutInflater().inflate(R.layout.player_turn_solution_component, null);                
        optionLayout = (RelativeLayout) v.findViewById(R.id.player_turn_solution_component);
    } else if (position == 1) {
        View v = getLayoutInflater().inflate(R.layout.player_turn_clue_component, null);    
        optionLayout = (RelativeLayout) v.findViewById(R.id.player_turn_clue_component);
    }

    container.addView(optionLayout);

    ((ViewPager) collection).addView(container,0);  //get the container ready
    return container; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:42:07.917

你需要这样的东西

```
View v = getLayoutInflater().inflate(R.layout.layout_taht_have_player_turn_solution_component, null); 
```

和

```
 if (position == 0) {
            optionLayout = (RelativeLayout) v.findViewById(R.id.player_turn_solution_component);
            optionCaption = (TextView) v.findViewById(R.id.solutionCaption);
        } 
```

# javascript - 在 KineticJS 中替换图像

> ID：11363256
> 
> 赞同：1
> 
> 时间：2012-07-06T13:36:35.373
> 
> 标签：javascript, html, canvas, kineticjs

我正在尝试使用 KineticJS 构建一个 Web 应用程序，我基本上有一个在加载时运行的函数，它将图像添加到画布（KineticJS 中的阶段）。每次运行该函数时，它都会在现有图像下方再次添加图像，因为我需要它来替换当前在舞台上的图像。我知道这与我每次加载函数时创建一个新的图像对象有关，但我对为什么它的定位不同（下面）感到困惑。我在这里模拟了相同的事件：http: [//jsfiddle.net/UCvbe/](http://jsfiddle.net/UCvbe/) - 如果您多次单击该按钮，图像会在下面重复。当用户选择门环时将运行最终函数，因此最终函数必须接受一个参数，例如'silver'，以便它知道绘制银色门环等。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:43:01.210

您的代码如下所示：

```
$('#testBtn').click(function() {

var stageKnocker = new Kinetic.Stage({
    container: "canvas-overlay",
    width: 402,
    height: 470
});
var layerKnocker = new Kinetic.Layer();

var imageObj = new Image();
imageObj.onload = function(){
    var image = new Kinetic.Image({
    x: 193,
    y: 110,
    image: imageObj,
    width: 25,
    height: 50,
    draggable: true
     });
     layerKnocker.add(image);
     stageKnocker.add(layerKnocker);
 };
 imageObj.src = "http://shop.windowrepairshop.co.uk/WebRoot/Store3/Shops/es115683_shop/49E6/ECF2/0C60/3750/10B1/50ED/8970/710D/V6GP_0020_gold_0020_plate_0020_vic_0020_urn_0020_LArge.jpg";

}) 
```

第一个问题是每次用户单击按钮时您都会创建一个新阶段。不要那样做——你只想要一个阶段。

每次用户单击按钮时，您都会创建一个新层。不要那样做。您只需要 & 想要一个单层。

最后，每次用户单击按钮并将其添加到图层时，您都会创建一个新的 Kinetic.Image。没关系！继续这样做。但您还想删除旧的 Kinetic.Image。如果不这样做，您将继续添加图像，而不是替换它们。

因此**，在**将 Kinetic.Image 添加到图层之前，您希望从图层中删除任何现有图像：`layerKnocker.removeChildren()`将删除图层中的所有内容。

完成后，您将拥有一个阶段、一个图层，并且在任何时间点都有一个图像。

# sql - SQL查询简化

> ID：11363257
> 
> 赞同：0
> 
> 时间：2012-07-06T13:36:36.803
> 
> 标签：sql, simplify, simplification

```
select model from (
    select price, model from pc where price = (select max(price) from pc)
    union
    select price, model from laptop where price = (select max(price) from laptop)
    union
    select price, model from printer where price = (select max(price) from printer)
) t1 where price = (select max(price) from (
    select price, model from pc where price = (select max(price) from pc)
    union
    select price, model from laptop where price = (select max(price) from laptop)
    union
    select price, model from printer where price = (select max(price) from printer)
) t2 ) 
```

我对 SQL 很陌生，所以我的问题很简单，但我想理清一点。我对这个查询不能简化为这样的事情是对的吗？

```
select model from (
    select price, model from pc where price = (select max(price) from pc)
    union
    select price, model from laptop where price = (select max(price) from laptop)
    union
    select price, model from printer where price = (select max(price) from printer)
) t1 where price = (select max(price) from t1) 
```

如果不能，我们运行两个相同的子查询是不是一件坏事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:59:44.807

我仍然说要使用一张桌子，这是最佳实践设计。 *（不要不必要地复制相同的表。）*

```
CREATE TABLE unified_table (
  product_type,
  price,
  model
) 
```

这样做会启用此查询...

```
SELECT
  *
FROM
  unified_table
WHERE
  price = (SELECT MAX(price) FROM unified_table) 
```

但是，如果您不能或不愿相信优化器来处理 UNION 的后果......

```
SELECT
  *
FROM
(
  SELECT * FROM pc
  UNION ALL
  SELECT * FROM laptop
  UNION ALL
  SELECT * FROM printer
) t1
WHERE
  price = (SELECT MAX(price) FROM (SELECT price FROM pc
                                   UNION ALL
                                   SELECT price FROM laptop
                                   UNION ALL
                                   SELECT price FROM printer
                                  ) t2
          ) 
```

优化器将了解如何优化它以删除冗余搜索。

***编辑：***

作为一种折衷方案，您可以进行统一的视图，并查询...

```
CREATE VIEW unified_table AS
  SELECT 'pc'      AS type, * FROM pc
  UNION ALL
  SELECT 'laptop'  AS type, * FROM laptop
  UNION ALL
  SELECT 'printer' AS type, * FROM printer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:46:33.133

尝试这样的事情：

```
select model, price
from (
    select price, model from pc order by price desc limit 1
    union
    select price, model from laptop order by price desc limit 1
    union
    select price, model from printer order by price desc limit 1
) t1 
order by price desc
limit 1 
```

但是，我建议您检查您的数据库结构，这似乎是您根据类型为相同的东西（项目）创建了多个表。您可以将所有这些保存在一个表中，仅通过类型列的内容来区分。

无限制：

```
select t1.model, t1.price
from 
(select max(price) p
 from
    select max(price) p from pc
    union
    select max(price) p from laptop
    union
    select max(price) p from printer
) max_price
JOIN (
    select price, model from pc
    union
    select price, model from laptop
    union
    select price, model from printer
) t1 ON price >= max_price.p 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:48:04.863

```
select * from (
    select price, model from pc where price = (select max(price) from pc)
    union
    select price, model from laptop where price = (select max(price) from laptop)
    union
    select price, model from printer where price = (select max(price) from printer)
) order by Price desc limit 1 
```

由于你有 3 个值要比较，来自不同的表，没有关系，你必须做一个联合，然后比较它们

这是一种方式，您无需再次计算价格。

# c# - 实体框架和类

> ID：11363260
> 
> 赞同：1
> 
> 时间：2012-07-06T13:36:49.470
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我正在尝试学习实体框架。说，我有以下课程

```
class Course
{
  [Key]
  public virtual int CourseID {get; set;}
  public virtual string CourseName {get; set;}
}
class CourseDBContext:DBContext
{
   public DbSet<Course> Courses{get;set;}
} 
```

然后我可以使用Linq查询数据库如下图

```
using (CourseDBContext a = new CourseDBContext())
{
  var b = from c in a.Course
          where c.CourseID == 1001
          select c;

  var d = b.FirstOrDefault();
  if(d != null)
    Console.WriteLine(d.CourseName);
} 
```

这工作正常。现在，如果我添加第二堂课

```
class Assignment
{
   [Key]
   public virtual int CourseID {get; set;}
   public virtual int StaffID {get; set;}
}
class AssignmentDBContext:DBContext
{
   public DbSet<Assignment> Assignments{get;set;}
} 
```

现在，如何使用 Linq 选择和显示与 CourseID = 1001 关联的 CourseName 和 StaffID？上面的示例是人为设计的，因此表设计和字段无关紧要。我只想知道如何使用 Entity Framework 和 Linq 从两个不同的数据库表中查询两个类之间的数据。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:39:39.923

两个实体需要处于相同的上下文中。

```
public class CoursesContext: DbContext
{
   public DbSet<Assignment> Assignments {get; set;}    
   public DbSet<Course> Courses {get; set;}
} 
```

您可以添加一个分配导航属性来过滤外键：

```
public class Course
{
  [Key]
  public virtual int CourseID {get; set;}
  public virtual string CourseName {get; set;}
  public virtual Assignment {get; set;}
} 
```

然后你可以像这样查询：

```
var staffId = 
      from c in a.Course
      where c.CourseID == 1001
      select c.Assignment.StaffID; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:44:27.143

每个 DbSet 没有单独的上下文。IE

```
class MyDbContext : DBContext
{
   public DbSet<Course> Courses{get;set;}
   public DbSet<Assignment> Assignments{get;set;}
} 
```

# excel - Excel 条件超链接输出两种条件的超链接

> ID：11363263
> 
> 赞同：5
> 
> 时间：2012-07-06T13:36:59.407
> 
> 标签：excel, if-statement, hyperlink

我想我一定要疯了，我想做的是写一个执行IF测试的简单Excel公式，如果结果为假我想超链接一些文本，如果是真的我想显示一些文本这不是超链接的。

所以例如 -

```
=IF(1=1,"1",HYPERLINK("2")) 
```

如您所料，这将返回 1，但 1 是超链接的 - 如果值为 2，我只想超链接。

这肯定是可能的吗？提前感谢您的任何建议！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T18:28:50.277

**更新：**

哦，我错了。我检查了它，这是因为当 Excel 在一个单元格中看到“超链接”功能时，它会将整个单元格变成一个“可跟随”单元格，以便链接可以工作。

避免错误消息“站点的地址无效”（当单元格的超链接打开但链接无处可去时发生）的解决方法......是给excel一个无处可去的链接通过引用公式的单元格地址。

粘贴到单元格 A1 的示例：

```
=IF(1=2,HYPERLINK("#"&CELL("address",A1),"1"),HYPERLINK("C:\","2")) 
```

# java - 在 Java 中将 do-while 转换为 for 循环

> ID：11363264
> 
> 赞同：4
> 
> 时间：2012-07-06T13:37:00.587
> 
> 标签：java, for-loop, do-while

目前，我有这个：

```
 do{
           if (i < y){ //y is a constant

               ObsHandler.obsPartsHandler(); //increment i twice
               ObsHandler.search(); 

           }
           else { 
               break;
           }

       } while (!endline.equals(null)); // endline is changed during each loop cycle 
```

有了这个循环和我的输入，endline 不能为空；这使得 while 循环中断条件变得多余。当我尝试将此循环转换为 for 循环时，我从 Eclipse 中得到一个错误的构造错误。

IE：

```
for (i < y) {
       ObsHandler.obsPartsHandler(); //increment i twice
       ObsHandler.search(); } 
```

虽然，我的 while 循环有效，但对我来说这似乎是一种不好的做法。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T13:41:28.157

如果您不需要检查`endLine`，您仍然可以使用 while 循环：

```
while (i < y) {    
    ObsHandler.obsPartsHandler(); //increment i twice
    ObsHandler.search(); 
} 
```

如果您还需要检查`endLine`：

```
while (i < y && !endline.equals(null)) {    
    ObsHandler.obsPartsHandler(); //increment i twice
    ObsHandler.search(); 
} 
```

注意：do / while（您的初始代码）和 while { } 之间的区别在于，在第一种情况下，循环始终至少运行一次。使用 while { }，如果一开始条件不成立，则根本不会运行。这与 for 循环的行为相同（如果在循环之前条件为假，则不会运行）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T13:39:24.413

如果要使用`for`循环，则需要具有标准的所有三个部分`for`。由于您有两个条件，因此它们都需要包含在条件部分中：

```
for ( ; i < y && !endline.equals(null); ) {
    ObsHandler.obsPartsHandler();
    ObsHandler.search();
} 
```

您可能有一些 的初始化代码`i`，例如`i=0`，它们也可以进入`for`循环的初始化部分。否则，如果您所拥有的只是一组要检查的条件，而没有您正在迭代的某个数组或列表，`while`或者`do`确实更合适。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T13:44:23.733

```
for (boolean start=true;(start || endline != null) && i < y;){
    start=false;
    ObsHandler.obsPartsHandler(); //increment i twice
    ObsHandler.search();
} 
```

`(startendline != null)`只测试了第二次。
`i < y`只是第一次测试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T13:42:21.637

`while`循环似乎是您的代码的自然选择。我只是将其简化为：

```
do {
  ObsHandler.obsPartsHandler(); //increment i twice
  ObsHandler.search(); 
} while (i < y && !endline.equals(null)); // endline is changed during each loop cycle 
```

或者，如果您需要在之前检查条件：

```
while (i < y && !endline.equals(null)) {
  ObsHandler.obsPartsHandler(); //increment i twice
  ObsHandler.search();
} 
```

# c++ - 将成员动态添加到 C++ 类的解决方法

> ID：11363267
> 
> 赞同：3
> 
> 时间：2012-07-06T13:37:06.157
> 
> 标签：c++, oop

我想知道您将如何解决这样的问题：

我有一堂课`Foo`：

```
class Foo
{
public:
    Foo()  {   }
    ~Foo() {   }
    float member1() { return _member1; }
private: 
    float _member1;
    // other members etc...
} 
```

一个容器类，其中包含一个指向 Foo 实例的指针容器

```
class FooContainer
{
public:
   FooContainer() {   }
   ~FooContainer() {   }
   void addFoo(Foo* f) {_foos.push_back(f);}
private:
   boost::ptr_vector<Foo> _foos;
} 
```

我的问题是这样的：在运行时，我需要根据 GUI 的说明将新的（完全不同的）成员“添加”到 Foo。我可以通过创建两个这样的“装饰器”来解决这个问题：

```
class Decorator1
{
public:
   int   alpha() { return _alpha; }
   float beta()  { return _beta; }
private:
   int _alpha;
   float _beta;
}

class Decorator2
{
typedef std::complex<float> cmplx;
public:
   cmplx  gamma() { return _gamma; }
   double delta()  { return _delta; }
private:
   cmplx  _gamma;
   double _delta;
} 
```

然后我会创建两个不同的 Foo 实现：

```
class Foo1 : public Foo, public Decorator1 
{   }

class Foo2 : public Foo, public Decorator2 
{   } 
```

并根据 GUI 命令使用每一个。然而，这样的更改会传播到我的所有代码中，并会迫使我为每个使用`Foo1`and的类创建两个不同的版本`Foo2`（例如，我必须创建`FooContainer1`and `FooContainer2`）。

一种不那么侵入性的方法是创建

```
class Bar: public Foo, public Decorator1, public Decorator2
{   } 
```

并使用它而不是`Foo`. 在这种情况下，我只会调用我需要的函数`Decorator1`并`Decorator2`忽略其他函数，但这似乎与良好的 OOP 技术背道而驰。

关于这个问题的任何建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T13:51:14.713

你为什么不使用这样的简单多态性？

```
class Foo
{
public:
    Foo()  {   }
    virtual ~Foo() {   }
    float member1() { return _member1; }
private: 
    float _member1;
    // other members etc...
}

class Foo1 : public Foo
{   
    public:
   int   alpha() { return _alpha; }
   float beta()  { return _beta; }
private:
   int _alpha;
   float _beta;
}

class Foo2 : public Foo
{   
    typedef std::complex<float> cmplx;
public:
   cmplx  gamma() { return _gamma; }
   double delta()  { return _delta; }
private:
   cmplx  _gamma;
   double _delta;
}

class FooContainer
{
public:
   FooContainer() {   }
   ~FooContainer() {   }
   void addFoo(Foo* f) {_foos.push_back(f);}
private:
   boost::ptr_vector<Foo> _foos;
} 
```

然后客户端代码不需要更改。根据 GUI 命令，您可以创建 Foo1 或 Foo2 并将其添加到单个容器中。如有必要，您可以使用 Foo 指针上的 dynamic_cast 来强制转换为 Foo1 或 Foo2。但是，如果您正确编写了客户端代码，则不需要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:01:54.070

基于策略的模板怎么样？有一个将类作为模板参数的模板类 Foo。然后，有两个方法调用装饰器方法：

```
tempate <class Decor>
class Foo
{
public:
    Foo() : { __d = Decor()  }
    ~Foo() {   }
    float member1() { return _member1; }
    Decor::method1type decoratorMember1() { return __d.getValueMethod1();}
    Decor::method2type decoratorMember2() { return __d.getValueMethod2();}
private: 
    float _member1;
    Decor __d;
    // other members etc...
} 
```

然后，在您的复杂装饰器中：

```
class Decor1 {
  typedef std::complex<float> method1type;
  typedef double method2type;
public:
  method1type getValueMethod1() {return _gamma}
  method2type getValueMethod2() {return _delta}
private:
  method1type _gamma;
  method2type _delta;
} 
```

另一个也一样。这样，您的`Foo`代码可以添加任何内容，即使它已经编译。只需创建一个声明器类。而不是实例化`Foo1`，而是这样做：

```
Foo<Decor1> f; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T14:16:42.087

类的基本概念是它是封装的，因此**不能**在定义之后添加成员（尽管您可以使用多态性并创建具有附加成员的派生类，但它们不能通过原始类的指针调用：您必须强制转换它们派生是危险的），尤其是在运行时。

所以在我看来，你的要求打破了 OO 编程的基本思想。这提出了一个简单的解决方案：使用非成员函数。它们可以在任何时候定义，甚至在运行时（当您还需要编译它们时）。函数指针的开销与以前相同（当您需要指向新成员函数的指针时）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T14:05:59.803

听起来您正在寻找处理 mixin 类型的功能。为此，您可以使用模板。从将生成每个类的副本的意义上说，这不是运行时，但它确实为您节省了打字时间。

因此，对于每个装饰器，请执行以下操作：

```
template<class TBase> class Decorator1 : public TBase
{
public:
    void NewMethod();
} 
```

然后你可以，例如：

```
Foo* d = new Decorator1<Foo1>(...); 
```

当然，在运行时完成这项工作的唯一方法是决定要创建哪种类型。但是，您仍然会得到 type `Foo`，`Foo1`因此`Decorator1`您可以在它们之间进行转换/根据需要使用 RTTI。

有关这方面的更多信息，请参阅[本文](http://www.artima.com/weblogs/viewpost.jsp?thread=132988)和[本文档](http://people.cs.umass.edu/~yannis/practical-fmtd.pdf)

* * *

尽管我建议将其作为一个潜在的解决方案，但如果可能的话，我个人会倾向于采用多态性建议——我认为这可以使代码更好、更容易维护，因为类实现的部分不会分散在整个使用 mixins 放置。只是我的两分钱 - 如果你认为它有效，那就去吧。

# iphone - Xcode 4.2 缺少 .xib 文件？

> ID：11363272
> 
> 赞同：1
> 
> 时间：2012-07-06T13:37:20.457
> 
> 标签：iphone, xcode

所以我对编程很陌生，所以我下载了 Xcode 4.2 并开始工作。我看了很多在线教程，我遇到的主要问题是所有教程都是针对 Xcode 4 而不是 4.2，这意味着当您选择空应用程序设置时，它缺少 .xib 文件。所以我找到了一个关于如何创建 .xib 文件的教程。除了一步，我完成了这一切，那就是将 xAppdelegate 的窗口出口拖到窗口。我一遍又一遍地尝试这个，但它不起作用。

如果有人需要看这里是教程[http://www.trappers.tk/site/2011/06/16/mainwindow-xib/](http://www.trappers.tk/site/2011/06/16/mainwindow-xib/)

请有人帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:39:40.640

您需要`Ctrl`在拖动时按住，否则它将不起作用。

[指南](http://developer.apple.com/library/ios/#recipes/xcode_help-interface_builder/EstablishingBindingsDragging.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:42:13.883

当您按住 Control 键从对象拖动到源代码时，Interface Builder 会指示新绑定的有效位置。建立连接后，Xcode 会显示一个用于配置绑定的对话框。您可以使用该对话框来配置绑定的所有方面。

Interface Builder 使用 Xcode 索引来确定哪些键路径是有效的，并且还可以发现它应该通过哪个控制器连接——因此，您可以从用户界面元素（例如表列）连接到模型类标题中的属性。

[在这里](http://developer.apple.com/library/ios/#recipes/xcode_help-interface_builder/EstablishingBindingsDragging.html)查看视频。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:49:11.557

您应该选择一个`SingleViewBased Application`而不是`Empty Application`研究它们如何相互连接的所有文件。你也可以选择`Master Application`。他们会帮助你。

看到这个**Hello world 教程** [点击我](http://devinsblog.com/2009/01/23/iphone-coding-tutorial-hello-world/)。

**Youtube**是初学者学习的最佳方式。搜索教程视频，因为动作教比文字更多。

# clearcase - 在 ClearTeam Explorer for Rational ClearCase 中浏览项目而不创建视图

> ID：11363275
> 
> 赞同：1
> 
> 时间：2012-07-06T13:37:25.320
> 
> 标签：clearcase

我的公司最近从使用 Perforce 转向使用 Rational ClearCase 进行版本控制。

在 P4Win 客户端中，可以选择 View -> Entire Depot 并浏览我的客户端规范之外的 depot 文件，这对于确定我需要添加到我的客户端规范中的确切内容很有用。

显着地，这避免了在查看文件之前从软件仓库同步文件的需要，因此速度更快。

我现在正在使用 ClearTeam Explorer，但似乎找不到等价物。我希望有一个类似的目的，以准确地确定我在快照视图的加载规则中需要什么，并决定我需要创建哪些视图。

**有谁知道是否可以在不先在项目上创建视图/加入项目的情况下查看 ClearTeam Explorer 中项目下存在的文件？**

ClearTeam Explorer 基本上是带有 ClearCase 特定插件的精简 Eclipse。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:06:03.863

最简单的方法是[创建一个动态视图](https://stackoverflow.com/questions/9357569/how-to-open-a-dynamic-view-in-clear-case-with-a-given-config-spects-using-comman/9357692#9357692)（您需要添加`-stream yourStream@\yourPvob`到 mkview 命令，我知道它看起来像您“加入一个项目”，但仍然可以快速设置动态视图）。

这个想法是使用正确的选择规则配置您的配置规范（动态视图将*立即*显示文件），然后使用相同的选择规则（以及适当的加载规则，特定于快照视图）制作您的快照视图

* * *

请注意，根据[CCRC wiki](https://www.ibm.com/developerworks/wikis/display/ccrc/Home)：

> 随着 v8.0 的发布，ClearTeam Explorer 成为通用的 Eclipse UI 客户端，它支持本地客户端上的 MVFS 以及 web 视图。
> 7.1.x 中的 CM 服务器在 v8 中更名为 CCRC Wan 服务器。

如果您还没有`cleartool`安装，这意味着您正在使用 webviews（它们是通过 web 访问 CCRC Wan 服务器的快照视图）。

在这种情况下，没有简单的方法可以浏览任何基线中的任何代码（加入项目除外）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-07T10:31:42.757

FWIW 现在想在这里提出一个不同的解决方案。

我将使用空加载规则在流上创建一个 Web 视图。这将确保更快地创建视图。然后从 ClearTeam Navigator 菜单中，我将启用选项以显示

*   卸载的 VOB
*   卸载元素

这将确保从我的元素规则中选择的已卸载元素显示在 ClearTeam Details 和 ClearTeam Navigator 中。

**注意**：您需要连接到 CCRC 服务器才能查看已卸载的元素。

然后我可以浏览文件结构并决定哪些文件需要添加到我的视图的加载规则中。

或者我可以右键单击任何未加载/部分加载的资源并选择*“加载资源...”*，这会将项目加载到我的视图中。

# .htaccess - Cron Curl - 使用加密密码？

> ID：11363282
> 
> 赞同：0
> 
> 时间：2012-07-06T13:37:51.560
> 
> 标签：.htaccess, curl, cron

例子：

```
30 9 * * * /usr/bin/curl -u username:password http://www.mydomain.com/protectedfolder/myscript 
```

我可以并且应该在此处使用加密密码，与受保护文件夹的 .htaccess 文件中的密码相同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T08:58:52.227

好吧，我用加密的密码试过了，但没有用。答案是否定的，不要使用加密密码。

# c# - 如何在 C# 中创建 Excel 表格

> ID：11363284
> 
> 赞同：4
> 
> 时间：2012-07-06T13:37:58.240
> 
> 标签：c#, export-to-excel

我正在用 C# 开发一个 Excel 加载项，现在我想创建一个 Excel 简单表，如下所示：

[http://i.msdn.microsoft.com/dynimg/IC299689.bmp](http://i.msdn.microsoft.com/dynimg/IC299689.bmp)

我的数据将来自 a `List<T>`，我想做类似的事情： 1\. 创建表 2\. 创建标题 3\. foreach（列表中的项目）（第 1 列 = tfield 1）

很简单，但我在任何地方都找不到解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-12T11:18:16.590

看看[EPPlus](http://epplus.codeplex.com/)，它提供了很多使用 EXCEL 的功能。干杯！

# javascript - Javascript 中日期间隔的百分比

> ID：11363288
> 
> 赞同：3
> 
> 时间：2012-07-06T13:38:08.433
> 
> 标签：javascript, datetime, progress-bar

通过 javascript，我想根据今天生成这两天之间的完成百​​分比，我将在 jQuery UI 进度条上使用这个百分比来指示完成或剩余的时间。

我试过这个公式，但我最终总是得到 100：

假设我有两个日期：

```
start = new Date(2012,6,2); // Jul 02 2012
end = new Date(2012,6,8); // Jul 08 2012
today = new Date();

alert( Math.round(100-((end - start) * 100 ) / today) + '%' ); 
```

我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:46:25.810

由于您从服务器获取 unix 时间戳，因此您可以这样做

```
var start = 1341201600 * 1000,
    end = 1341720000 * 1000,
    now = +new Date;

Math.round(( ( now - start ) / ( end - start ) ) * 100) + "%" //73% 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:55:08.253

我冒昧地调整了评论。

```
var start = new Date(2012,6,2); // Jul 02 2012
var end = new Date(2012,8,2); // Sep 02 2012
var today = new Date();

var total = end - start;
var progress = today - start;

console.log( Math.round(progress/ total * 100 ) + "%" ); 
```

收益率 8% [ 7 月 6 日 ]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T13:45:15.890

你的公式应该是

```
alert( Math.round(100 - (end - today) / (end - start) * 100 ) + '%' ); 
```

# java - 如何使用 RequestDispatcher.include 将 jsp:include 中的 jsp:param 翻译成 Java

> ID：11363290
> 
> 赞同：0
> 
> 时间：2012-07-06T13:38:17.243
> 
> 标签：java, jsp, servlets, include, param

我要翻译

```
<jsp:include page="xxx.jsp">
  <jsp:param name="x" value="0"/>
</jsp:include> 
```

到 Java，例如：

```
RequestDispatcher rd = request.getRequestDispatcher("xxx.jsp");
rd.include(request, response); 
```

我怎么能把`param x = 0`？请求没有 setParameter（至少在 Servlet 3.0 之前没有）

像`request.getRequestDispatcher("xxx.jsp" + "?x=0");`什么？

# regex - 正则表达式 - 排除部分字符串

> ID：11363292
> 
> 赞同：0
> 
> 时间：2012-07-06T13:38:21.100
> 
> 标签：regex

[这是对上一个问题](https://stackoverflow.com/questions/11346521/assistance-with-a-regular-expression)的跟进。我有一个字符串“Test 999-99-9”，除了最后一个 -9 部分，我将如何匹配所有内容？请记住，最后一个 -9 可能存在也可能不存在，但如果存在，我想忽略它并匹配字符串的其余部分。有什么建议么？

或者，如果它忽略整个 999-99-9 或 999-99 部分，而只返回“测试”部分，那也可以。看起来这可能更容易做到。我基本上想采用以下表达式并将其反转以返回字符串的另一半： (\d{3}-\d{2}|\d{3}-\d{2}-\d{1} )$

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:46:38.983

`^(Test \d{3}-\d{2})(-\d{1})?$`将返回除示例中最后一个“-9”之外的所有内容，无论“-9”是否存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:52:54.933

正则表达式忽略 999-99-9 并仅返回“测试”部分：

```
^([\w ]+) [\d]{3}-[\d]{2}-?[\d]?$ 
```

OCR 软件支持组：

[http://www.laserfiche.com/NewsPortal/Article/2012/05/21/tech-tip-pattern-matching-with-regular-expressions](http://www.laserfiche.com/NewsPortal/Article/2012/05/21/tech-tip-pattern-matching-with-regular-expressions)

> 注意：括号确定从文本中提取的信息。其他字符确定将要查找的模式。例如，\d\d\d-\d\d-(\d\d\d\d) 将查找社会保险号并返回其最后四位数字。

# asp-classic - 如何在一行中并相邻显示图像以及查看 png 和 gif ASP

> ID：11363298
> 
> 赞同：1
> 
> 时间：2012-07-06T13:38:25.330
> 
> 标签：asp-classic, vbscript

下面的代码首先将文件夹显示为超链接，您可以单击这些文件夹，如果它们包含 JPG，它将显示它们。

是否可以让这些图像连续显示，并且还可以在文件夹中显示 PNG 和 GIF。

```
<%
Const ForReading = 1, ForWriting = 2, ForAppending = 3
Const TristateUseDefault = -2, TristateTrue = -1, TristateFalse = 0

qfolder = request.querystring("f")
if qfolder = "" then
    folderspec = server.mappath(".")
    Set filesys = CreateObject("Scripting.FileSystemObject") 
    Set demofolder = filesys.GetFolder(folderspec) 
    Set folcoll = demofolder.SubFolders
    For Each subfol in folcoll
        folsize = left((subfol.size/1000000), 3)
        folist = folist & "<a href='?f=" & subfol.name & "'><strong title='view'></strong> " & subfol.Name & "" & vbcrlf
        folist = folist & "<BR>"  
    Next
    set filesys = nothing
    Response.Write folist

else

filepath = server.mappath(".") & "\" & qfolder
captionfile = filepath & "\captions.txt"
Set filesys = CreateObject("Scripting.FileSystemObject")
Dim SomeArray()
'caption part
    If filesys.FileExists(captionfile) then
        set file = filesys.GetFile(captionfile)
        Set TextStream = file.OpenAsTextStream(ForReading,TristateUseDefault)
        captioncount = 0
        Do While Not TextStream.AtEndOfStream
            Line = TextStream.readline
            ReDim Preserve SomeArray(captioncount)
            SomeArray(captioncount) = line
            'response.write captioncount & " " & somearray(captioncount) & "<br>"
            captioncount = captioncount + 1
            'Response.write Line
        Loop
        textStream.close
    end if

'folder part
    Set demofolder = filesys.GetFolder(filepath) 
    Set filecoll = demofolder.Files
    filecount = 0
    For Each file in filecoll
        Ext = UCase(Right(File.Path, 3)) 
        If Ext = "JPG" OR Ext = "GIF" Then
        on error resume next
        data = SomeArray(filecount)
        on error goto 0
        hrefpath = qfolder & "/" & file.name
        imagepath = "<strong>" & data & "</strong><br><a href='" & hrefpath & "' title='free image gallery' border=0><img src='" & hrefpath & "' border='" & border_size & "' title=""" & data & """ style='border-color: " & border_color & ";'></a><br>"
        filist = filist & imagepath & vbcrlf
        filist = filist & "<BR>"
        filecount = filecount + 1
        data = ""
        end if
    Next
    set filesys = Nothing
    filist = filist & "<br><small><a href='http://www.allscoop.com/' target='_blank'>allscoop free image gallery</a></small>"
%>

<h3><a href="." title="up one level">&#171;</a>
&nbsp;<%=qfolder%></h3>

<p><%=filist%></p>

<% end if %> 
```

谢谢罗斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:55:14.917

您需要做的就是删除最后的 2

# php - SQL, PHP & jQuery 动态评论系统

> ID：11363299
> 
> 赞同：0
> 
> 时间：2012-07-06T13:38:26.333
> 
> 标签：php, jquery, sql, ajax, comments

我正在为我的新网站设置一个正在建设中的页面。

我将尝试解释：

*   有 3 列并排
*   当新评论被“检索”时，它被添加到第一列
*   对于每条评论 - 如果底部 > 距列顶部 300 像素：复制、删除并添加到下一列（如果列：最后则删除）

上面我工作得很好，但让我很困惑：

*   我怎样才能做相反的事情并将较旧的评论添加到最后
*   评论的高度可能因消息而异，这意味着显示的评论数量不固定。
*   有“新评论”和“旧评论”链接。我希望这些分别检索显示的最新评论或显示的最旧评论之后或之前发布的评论。

这个想法是重复“检索评论”过程 6 次，获得 6 条较新/较旧的评论，并分别添加/附加到第一列/最后一列。我需要跟踪为 php 脚本显示的最新评论和最旧评论，以了解下一个要检索的评论（通过 AJAX 返回）。

我可能有过于复杂的事情，但如果有人能想出一个可靠的算法供我遵循，那就太好了。我不是要求任何人为我编程，那样会很有趣！;D

我的绘画尝试：

[![我的绘画尝试](../Images/392cbe02dd4d1156270cb37e1d8ccd85.png)](https://i.stack.imgur.com/kGz9S.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:45:52.300

我不确定这是否会对您有所帮助，但您可以设置一组对象来跟踪它们的顺序并管理它们是否可见。当您获取较新的评论时，使用 将它们添加到数组的前面`unshift`，当您获取较旧的评论时，使用 将它们添加到数组的末尾`push`。您可以在 AJAX 函数的 oncomplete 回调中进行设置。数组可能看起来像这样：

```
var comments = [
                   {id: 'comment8', visible: true},
                   {id: 'comment9', visible: true},
                   ...
                ] 
```

每个对象的 id 可以对应于 Comment Container 的 id，因此您可以检索这些值并在 jquery 选择器中使用它们来执行您需要执行的任何操作。

# xaml - 项目模板中的列表视图视觉状态管理器（WinRT、Metro、XAML）

> ID：11363301
> 
> 赞同：4
> 
> 时间：2012-07-06T13:38:33.057
> 
> 标签：xaml, windows-runtime, windows-store-apps, winrt-xaml

我试图让一个列表视图显示由文本块组成的项目列表...当单击列表视图项目时，我想显示一个由文本框组成的列表...

以下是我想出的，它不起作用。我在模板中有两个网格，并希望根据是否选择了列表视图项来简单地显示和隐藏网格。我哪里出错了？

我从列表视图的模板本身中提取了这些视觉状态，但我必须承认我不确定它们是如何工作的，或者它们是如何被触发的。是否应该有一些代码来做到这一点？

```
 <ListView Grid.Row="2" ItemsSource="{Binding Lines}" HorizontalAlignment="Stretch">
        <ListView.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <Grid Name="Readonly">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="3*"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Text="{Binding One}" Grid.Column="0"/>
                        <TextBlock Text="{Binding Two}" Grid.Column="1"/>
                    </Grid>
                    <Grid Name="Editing" Visibility="Collapsed">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="3*"/>                            
                        </Grid.ColumnDefinitions>

                        <TextBox Text="{Binding One}" Grid.Column="0"/>
                        <TextBox Text="{Binding Two}" Grid.Column="1"/>
                    </Grid>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="SelectionStates">
                            <VisualState x:Name="Selected">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Editing" Storyboard.TargetProperty="Visibility">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Visible"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Readonly" Storyboard.TargetProperty="Visibility">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                </Grid>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView> 
```

非常感谢，科汉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T19:02:00.607

您正在将情节提要动画设置在正在渲染的项目之外。您指定的目标不仅超出了外部页面的范围，而且它们可能还不存在。因此，在呈现页面时无法设置 Storyboard。

这就是你想要做的。

`ListView`创建一个用户控件，该控件将代表您在项目中想要的布局。定义 your 时`ListView`，请务必将 your 包含`UserControl`在 your 中`DataTemplate`，如下所示：

```
<ListView>
        <ListView.ItemTemplate>
            <DataTemplate>
                <local:MyUserControl />
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView.ItemsPanel>
</ListView> 
```

现在，对于`VisualStates`. 您需要在`UserControl`. 这意味着 Edit 的状态和 View 的状态。一个状态需要像这样本地化。想想`Button`控制。按钮中的状态是在每个`Button`非共享位置中定义的。

当您准备好更改其中一项的状态时，您需要将其连接到您的代码后面。在您后面的代码中，您需要遍历您的项目`ListView`并调用您创建的方法，例如`MakeStateEdit()`and `MakeStateView()`。设置用户控件状态的将是您对这些方法的实现。外部代码只是相信它会发生。

这意味着您需要在您的, 在代码隐藏中调用`VisualStateManager.GoToState(this, "Edit", true);`（或您创建的任何状态） 。`UserControl`相反，您可以在调用 时设置“查看”状态`MakeStateView()`。

要迭代`ListView` `Items`属性，您需要使用这样的技术 ( [http://blog.jerrynixon.com/2012/09/how-to-access-named-control-inside-xaml.html](http://blog.jerrynixon.com/2012/09/how-to-access-named-control-inside-xaml.html) )。你会发现一旦你开始走这条路，它真的不是很复杂。您可能会对无法在 XAML 中完成所有这些操作感到失望。你不能。但这是可以完成的！

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:26:28.427

我不知道视觉状态更改是否会传播，所以也许您的解决方案应该以某种方式工作，但我会改为编辑 ListViewItem 模板中的视觉状态（通过 ItemContainerStyle）。

# c - 了解 CEILING 宏用例

> ID：11363304
> 
> 赞同：6
> 
> 时间：2012-07-06T13:38:41.093
> 
> 标签：c, macros, ceil

我在代码库的实用程序标头中找到了以下宏：

```
#define CEILING(x,y) (((x) + (y) - 1) / (y)) 
```

其中（在[此答案](https://stackoverflow.com/a/4020047/904767)的帮助下）我已解析为：

```
// Return the smallest multiple N of y such that:
//   x <= y * N 
```

但是，无论我多么盯着这个宏在我们的代码库中的使用方式，我都无法理解这种操作的价值。没有评论任何用法，这似乎表明它是显而易见的。

谁能提供这个宏的用例的英文解释？应该很明显吧，我就是看不出来。。。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T13:47:16.300

假设您想以块的形式分配内存（想想：缓存行、磁盘扇区）；`X`保存包含字节的整数块需要多少内存？如果夹头尺寸为`Y`，则答案为：`CEILING(X,Y)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T13:47:34.927

当您像这样在 C 中使用整数除法时

```
y = a / b 
```

*你会得到一个四舍五入到零*的除法结果，即`5 / 2 == 2`, `-5 / 2 == -2`。有时希望以另一种方式对其进行舍入`5 / 2 == 3`，例如，如果您想采用最小的整数数组大小来保存`n`字节，则需要进行`n / sizeof(int)`四舍五入，因为您需要空间来保存额外的字节。

所以这个宏正是这样做的：`CEILING(5,2) == 3`，但请注意它只适用于正数`y`，所以要小心。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-06T13:56:43.467

嗯...英语示例...您只能以 5 根为一组购买香蕉。您有 47 个人想要一根香蕉。你需要多少束？答案 = CEILING(47,5) = ((47 + 5) - 1) / 5 = 51 / 5 = 10 （去掉余数 - 整数除法）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-06T13:49:15.333

让我们尝试一些测试值

```
CEILING(6, 3) = (6 + 3 -1) / 3 = 8 / 3 = 2 // integer division
CEILING(7, 3) = (7 + 3 -1) / 3 = 9 / 3 = 3
CEILING(8, 3) = (8 + 3 -1) / 3 = 10 / 3 = 3
CEILING(9, 3) = (9 + 3 -1) / 3 = 11 / 3 = 3
CEILING(10, 3) = (9 + 3 -1) / 3 = 12 / 3 = 4 
```

如您所见，宏的结果是一个整数，`z`它是满足以下条件的最小可能：`z * y >= x`.

我们也可以尝试使用符号：

```
CEILING(k*y, y) = (k*y + y -1) / y = ((k+1)*y - 1) / y = k
CEILING(k*y + 1, y) = ((k*y + 1) + y -1) / y = ((k+1)*y) / y = k + 1
CEILING(k*y + 2, y) = ((k*y + 2) + y -1) / y = ((k+1)*y + 1) / y = k + 1
....
CEILING(k*y + y - 1, y) = ((k*y + y - 1) + y -1) / y = ((k+1)*y + y - 2) / y = k + 1
CEILING(k*y + y, y) = ((k*y + y) + y -1) / y = ((k+1)*y + y - 1) / y = k + 1
CEILING(k*y + y + 1, y) = ((k*y + y + 1) + y -1) / y = ((k+2)*y) / y = k + 2 
```

您可以使用它来分配具有常量倍数大小的内存，以确定填充屏幕需要多少块瓷砖等。

不过要小心。这仅适用于正面`y`。

希望能帮助到你。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-06T13:47:29.250

`CEILING(x,y)`假设 给你（数学除法）`y > 0`的上限。`x/y`一个用例是从 offset 开始的素数筛子`x`，您可以将`y`筛子范围内的所有素数倍数标记为复合物。

# mysql - 为什么 INNODB_SYS_TABLES.N_COLS 为每个表显示 3+ 列？

> ID：11363305
> 
> 赞同：2
> 
> 时间：2012-07-06T13:38:42.340
> 
> 标签：mysql, innodb

我刚刚安装了 MySQL 5.6 开发版本来检查 performance_schema 和 information_schema 的一些改进。而且，我发现了这个——

在 sakila.actor 表中有 4 列。从 information_schema.INNODB_SYS_TABLES 列检查 - N_COLS 显示演员为 7 而不是 4。我可以看到对于每个表 N_COLS 显示 3+ 列。

sakila.actor-

```
CREATE TABLE `actor` (
  `actor_id` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
  `first_name` varchar(256) NOT NULL,
  `last_name` varchar(45) NOT NULL,
  `last_update` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`actor_id`),
  KEY `last_name` (`last_name`,`actor_id`)
) ENGINE=InnoDB 
```

选择 * 从`information_schema`。`INNODB_SYS_TABLES`;

```
TABLE_ID  NAME                        FLAG  N_COLS   SPACE  
--------  ------------------------  ------  ------  --------
      11  SYS_FOREIGN                    0       7         0
      12  SYS_FOREIGN_COLS               0       7         0
      38  sakila/actor                   1       7         0
      39  sakila/actor_info              1       7         0 
```

从[文档](http://dev.mysql.com/doc/refman/5.6/en/innodb-sys-tables-table.html)中它说 N_COLS= 表中的列数。

那么为什么它为每个表显示 3+ 列？任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:03:46.690

我在互联网上找到了这个，这是因为 InnoDB 添加了三个隐藏列（DB_ROW_ID、DB_TRX_ID、DB_ROLL_PTR）

你可以在[这里查看源代码](http://blogs.innodb.com/wp/2011/04/information-schema-system-table/)

# android - ListView 可以包含片段吗

> ID：11363309
> 
> 赞同：40
> 
> 时间：2012-07-06T13:38:53.013
> 
> 标签：android, listview, android-arrayadapter, fragment

如中，ListView 的 ELEMENTS 可以是 Fragments。我知道您可以将 TextView XML 分配给 ListView 以更改其外观，但是您可以将 Fragments 添加到 ListView 中。

例如：我有一个片段。所述片段的 XML 包含一个 ImageView、几个大样式的 TextView 和一个小样式的 TextView。Fragment 类代码接收一个 Bundle，然后根据内容相应地填充 TextViews 和 ImageView。片段 XML 和片段代码都可以正常工作（我可以很好地显示单个片段）。我有一个 FragmentActivity，我想在其中显示上述片段列表。这是我用来尝试在 FragmentActivity 的视图中填充 ListView 的代码：

```
 ArrayList<Fragment> fragList = new ArrayList<Fragment>();
    Fragment fragment = Fragment.instantiate(this, TileItem.class.getName());
    Bundle bundle = new Bundle();
    bundle.putInt("key", 0);
    fragment.setArguments(bundle);
    fragList.add(fragment);

    ArrayAdapter<Fragment> adapter = new ArrayAdapter<Fragment>(this, R.layout.tile_item, fragList);
    listItems.setAdapter(adapter); 
```

这是我对此的思考方式。我制作了一个 ArrayList of Fragments 来保存我所有的实例化视图。然后我创建一个 Fragment，创建一个 Bundle，将数据添加到 Bundle（以便 Fragment 可以正确地将数据编组到它的视图中），将 Bundle 添加到 Fragment，最后将 Fragment 添加到 ArrayList。之后，我制作了一个 ArrayAdapter，添加了我想要使用的元素布局，以及我制作的片段列表；然后将 ListView 设置为从我的适配器中读取。

运行此代码的任何人都可能会得到 NPE @ 实例化 ArrayAdapter。是什么赋予了？这甚至可能吗？在我一直为此绞尽脑汁之前，有人能告诉我我是不是在浪费时间吗？有没有更好的办法？我一直在考虑使用 ScrollView，但是 ListView 的很多功能都需要重新实现，而且我讨厌-讨厌-讨厌在没有必要时重新发明轮子。

感谢任何阅读的人，特别是如果您决定离开他们，请特别感谢您的想法。我已经尝试过寻找一个既定的答案，但我似乎找到的只是关于在片段内部使用 ListView 的问题/网页；不使用片段作为 ListView 的元素

编辑：我接受了以下建议并开始进行更多调查。从事情出现的方式来看，我应该能够使用一个自定义适配器来膨胀片段，而不是仅仅从 XML 构建（因为缺乏更好的方法来描述这个过程）但是，我当前的实现在尝试设置时抛出了一个 NPE适配器。

这是我的自定义适配器代码（为简洁而缩短）：

```
public class AdapterItem extends ArrayAdapter<Fragment> {

Context c;
List<Fragment> f;

public AdapterItem(Context c, List<Fragment> f) {
    super(c, R.layout.tile_item, f);
    this.c = c;
    this.f = f;
}

@Override
public View getView(int pos, View v, ViewGroup vg) {
    LayoutInflater i = (LayoutInflater) c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    return i.inflate(R.layout.tile_item, vg, false);
} 
```

}

这就是我如何实现它：

```
ArrayList<Fragment> fragList = new ArrayList<Fragment>();
    Fragment fragment = Fragment.instantiate(this, TileItem.class.getName());
    Bundle bundle = new Bundle();
    bundle.putInt("key", 0);
    fragment.setArguments(bundle);
    fragList.add(fragment);

    AdapterItem adapter = new AdapterItem(this, fragList);
    adapter.add(fragment);
    listItems.setAdapter(adapter); 
```

所以已经有几天了，我很确定这个线程已经被埋没了。但是，我想我会添加最后一个更新，以防有人想尝试这个并且谷歌搜索将他们带到这里。所以在我的实现中，当给 ListView 适配器时，我得到了一个 NPE。不需要火箭外科医生就可以确定它肯定是适配器而不是 ListView 抛出错误。对于我的生活，我无法弄清楚为什么......

无论如何，我想我有一些想法。首先，来个小故事：不久前，我试图在 FragmentDialog 中创建 FragmentTransactions。每次我尝试这样做时，我都会得到一个 NPE。最终，通过大量研究，我发现原因与 Fragments 的实例化方式有关。调用 Fragment 时，它需要来自其父级的上下文。由于 Dialog 的父级是启动它的 Activity，因此 Dialog 本身不符合必要的条件。我相信，在尝试将片段添加到 ListView 时，情况也是如此。由于 ListView 不符合实例化 Fragment 的协议，它会抛出 NPE，因此让我挂起并回到约定。D@mn...我真的希望我能够做到这一点。使用片段而不是简单的 XML 会使组织/搜索列表变得更加容易。哦，好吧......如果有人想知道，我猜它不能完成。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T23:53:23.053

我想说这是不可能的，因为将片段放入 ListView 意味着片段可以在多个容器中相乘。当您使用 FragmentManager 创建片段时，会使用标识符对其进行标记，从而可以轻松地重新加载和重新排列方向和其他配置更改。它还鼓励跨多个设备配置使用。

片段实际上是 Activity 的子集。您是否将 Activity 作为列表的一部分？绝对不是（应该是答案！）！！！

此外，在片段移入和移出视图时连续附加（）和分离（）片段并不是很有用（单元格被回收）。这些都是 ListView 不应该处理的昂贵操作。列表应该快速滚动。

从评论的对话中，我可以看出您希望通过在 Activity 中很好地分离视图设置代码和适配器来实现漂亮的代码。这样做：

1.  覆盖`View`该类并在那里进行自定义绘图和设置。
2.  创建一个新类，在其中提供所需的上下文和数据集，以使您返回列表需要显示的视图——这是我通常做的。
3.  有一个 Utils 类在其他地方构建您的视频（愚蠢）。

只是不要在列表中使用片段。不是他们的目标用例。HTH。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-15T19:16:56.770

事实证明，您可以创建一个`ListView`listView 中的每个项目都是一个`Fragment`. 诀窍是将 Fragment 包装在`FrameLayout`.

**2014 年 9 月 16 日更新**

即使*可以*创建一个`ListView`contains `Fragments`，它看起来也不是一个好主意。这似乎绝对是 Android 世界中的一个角落案例，并且有龙。对于像下面示例中的一个简单片段，一切都很好，但如果你有一个复杂的项目，其中有很多事情发生，那么这可能不是要走的路。我的新方法是将所有与 GUI 相关的代码拉入到`View`扩展`FrameLayout`中，然后将其插入到中`ListView`——这工作得更好，更符合 Android 的预期使用方式。如果您`Fragment`在代码的其他部分需要 a 的功能，您也可以简单地`View`在那里使用这个新功能。

**回到原来的答案...**

如果您想尝试一下，我已经`ManyFragments`在我的[AnDevCon 14 Fragments 示例应用程序](https://github.com/johnnylambada/andevcon-2014-jl/tree/master/fragment-comms-support/src/main/java/andevcon14/FragmentCommsSupport/Types/ManyFragments)中添加了一个新示例。本质上它归结为`BaseAdapter`，在我的示例中如下所示：

```
 BaseAdapter adapter = new BaseAdapter() {
        @Override public int getCount() { return 10000; }
        @Override public Object getItem(int i) { return new Integer(i); }
        @Override public long getItemId(int i) { return i; }

        @Override
        public View getView(int i, View view, ViewGroup viewGroup) {

            if (view!=null){
                ManyListItemFragment fragment = (ManyListItemFragment) view.getTag();
                fragment.setCount(i);
            } else {
                FrameLayout layout = new FrameLayout(getActivity());
                layout.setLayoutParams(frameLayoutParams);
                int id = generateViewId();
                layout.setId(id);
                ManyListItemFragment fragment = new ManyListItemFragment();
                fragment.setCount(i);
                getChildFragmentManager()
                        .beginTransaction()
                        .replace(id,fragment)
                        .commit();
                view = layout;
                view.setTag(fragment);
            }

            return view;
        }
    }; 
```

如果你对这里的 generateViewId() 感到好奇：

```
@TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)
public static int generateViewId() {
    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN_MR1) {
        for (;;) {
            final int result = sNextGeneratedId.get();
            // aapt-generated IDs have the high byte nonzero; clamp to the range under that.
            int newValue = result + 1;
            if (newValue > 0x00FFFFFF) newValue = 1; // Roll over to 1, not 0.
            if (sNextGeneratedId.compareAndSet(result, newValue)) {
                return result;
            }
        }
    } else {
        return View.generateViewId();
    }
}
private static final AtomicInteger sNextGeneratedId = new AtomicInteger(1); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-19T20:46:00.940

您不需要使用片段。

编写一个自定义 ViewAdapter 并让它膨胀一个更复杂的布局（或者如果你需要真正花哨，可能会增加几个更复杂的布局），然后根据需要填充布局的字段。

[旁白：对于在评论中回答的人-如果您实际上是在回答问题，请使用答案而不是评论！如果只是因为你这样获得更多的声望点！]

# coded-ui-tests - CodedUITest - 参数化 WinTree 对象中的 WinTreeItem 对象。

> ID：11363316
> 
> 赞同：0
> 
> 时间：2012-07-06T13:39:14.090
> 
> 标签：coded-ui-tests

我有一个`WinTree`由三个对象组成的`WinTreeItem`对象。我遇到的问题是我需要参数化第一个`WinTreeItem`（根），以便我可以选择 1st、2nd 或 3rd `WinTreeItem`。

这是我拥有具有名称作为属性的`WinTree`对象的代码。`WitTreeItem`

```
public class UITree1Tree : WinTree
{

    public UITree1Tree(UITestControl searchLimitContainer) : 
            base(searchLimitContainer)
    {
        #region Search Criteria
        this.SearchProperties[WinTree.PropertyNames.Name] = "Tree Lists:";
        this.WindowTitles.Add("Insert Symbol List");
        #endregion
    }

    #region Properties
    public UITrSymbolLiTreeItem UITradeStationSymbolLiTreeItem
    {
        get
        {
            if ((this.mUITrSymbolLiTreeItem == null))
            {
                this.mUITrSymbolLiTreeItem = new UITrSymbolLiTreeItem(this);
            }
            return this.mUITrSymbolLiTreeItem;
        }
    }

    #endregion

    #region Fields
    private UITrSymbolLiTreeItem mUITrSymbolLiTreeItem;
    #endregion
}

public class UITrSymbolLiTreeItem: WinTreeItem
{

    public UITrSymbolLiTreeItem (UITestControl searchLimitContainer) : 
            base(searchLimitContainer)
    {
        #region Search Criteria
        this.SearchProperties[WinTreeItem.PropertyNames.Name] = "Tr Symbol Lists";
        this.SearchProperties["Value"] = "0";
        this.WindowTitles.Add("Insert Tr List");
        #endregion
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T07:36:55.670

您可以使用类的构造函数来传递参数。

或者

将属性添加到其父级并在初始化时设置此属性。Parent testcontrol 将在 child 内部可用，因此您的参数也可用。你可以在任何你想要的地方使用这个参数。

我在整个项目中都是这样做的，而且效果很好。

# android - Drive API 清单和与 Drive App 的集成

> ID：11363317
> 
> 赞同：7
> 
> 时间：2012-07-06T13:39:23.213
> 
> 标签：android, google-drive-api

我有一个 Android 应用程序，它使用 mime 类型在 Google Drive 中创建自己的文件`application/vnd.test.type`

我想让我的应用程序在由 Google Drive 应用程序打开时处理此文件类型的请求，如此处[所述](https://developers.google.com/drive/integrate-android-ui)。

我处理文件打开的活动在我的清单文件中，如下所示：

```
 <activity android:name="DriveHandlerActivity" 
              android:label="@string/app_name" 
              android:icon="@drawable/icon" 
              android:exported="true" >
        <meta-data android:name="com.google.android.apps.drive.APP_ID" 
                   android:value="id=MY_ID"/> 
        <intent-filter >
            <action android:name="com.google.android.apps.drive.DRIVE_OPEN"/>
            <data android:mimeType="application/vnd.test.type"/>
        </intent-filter>
    </activity> 
```

当我尝试在 Google Drive 应用程序中打开文件时，我得到了“打开方式...”对话框，正如预期的那样，我的应用程序被列为唯一能够处理此文件类型的条目。不幸的是，在确认操作后，我会得到一个对话框。

![错误对话框](../Images/c1151458a89c5119ba578b9e7b1f7ae7.png)

我唯一的选择是按下“取消”按钮，让我返回 Google Drive 应用程序。

我并不完全相信我的元数据是正确的，因为根据您的查看位置使用不同的名称来引用 ID。一些[文档将其称为**App ID**](https://developers.google.com/drive/integrate-android-ui)，一些文档将其称为**项目 ID** [（参见此处 26:44）](http://youtube.googleapis.com/v/xRGyzqD-vRg)。我尝试使用我的 Google API 控制台中列出的“项目 ID”以及同一页面上的项目编号（来自 URL）。无论我选择哪个值作为 ID，我都会收到相同的错误。

据我所知，下一步应该是在我的应用程序中处理意图，但由于所描述的错误，意图永远不会到达。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:39:54.407

当前存在一个问题，要求您的应用程序必须在[Chrome 网上商店](https://developers.google.com/drive/listing)中列出（即使仅对受信任的测试人员）才能使`Open With`流程正常工作。

[但是，即使问题得到解决，在Google Play 服务](https://developers.google.com/android/google-play-services/)API 发布之前，您的应用也无法访问该文件。唯一的解决方法是请求对整个 Drive 范围的授权，`https://www.googleapis.com/auth/drive`这不推荐但对调试很有用。

解决 Chrome Webstore 限制后，我将更新此答案。

# javascript - 限制嵌套列表上 JQuery UI sortable() 的范围

> ID：11363323
> 
> 赞同：4
> 
> 时间：2012-07-06T13:39:30.840
> 
> 标签：javascript, jquery, html, jquery-ui

我创建了表单的嵌套列表...

```
<ol>
    <li>Group One
        <ol>
            <li>Item1 in group one</li>
        </ol>
    </li>
    <li>Group Two
        <ol>
            <li>Item1 in group two</li>
        </ol>
    </li>
    <li>External Item 1</li>
    <li>External Item 2</li>
</ol> 
```

使用 Jquery UI，我使列表可排序，例如外部项目 1 可以嵌套在第一组中，并且外部项目和组可以按任何顺序一起排序。我要防止的是用户能够将一个组嵌套在另一个组中，同时仍然允许将其拖到列表中的不同位置。它不应该有任何区别，但是该列表是由一个包含组集合的外部模型在剃刀中生成的。（外部项目存储为组的成员，该组的 ID 为空 GUID）

简单地说，我如何告诉特定类`<li>`不要将自己定位在子列表中或者我如何告诉子列表拒绝某些项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T15:01:42.450

终于解决了（或者看起来）这个谜。)) 诀窍是分配一个自定义`.stop`事件处理程序，其中检查两个条件：移动的元素是否是一个组，以及它的新位置是否在外太空。它看起来像这样：

```
$('ol').sortable({
  // to connect inner lists and outer list between themselves 
  connectWith: ".sortable",

  // to intercept a movement  
  stop: function(event, ui) {
    if (ui.item.children('ol').length         // if it's a group...
        && ! ui.item.parent('.outer').length) // but moved within another group
    {
        $(this).sortable('cancel');           // cancel the sorting!
    }
}}); 
```

这[是概念证明](http://jsfiddle.net/w6AxF/)。通过正确使用标识符（在 jsfiddle 中它们仅用于调试目的），内部检查可能会变得更加简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:02:04.573

使用带有“parent”值的 sortable 的包含选项应该可以完成此操作。

```
$( ".selector" ).sortable({ containment: 'parent' }); 
```

[http://jqueryui.com/demos/sortable/#option-containment](http://jqueryui.com/demos/sortable/#option-containment)

[http://jsfiddle.net/bstakes/kQDmZ/](http://jsfiddle.net/bstakes/kQDmZ/)

# c# - 我应该如何在 C# 中使用属性？

> ID：11363334
> 
> 赞同：10
> 
> 时间：2012-07-06T13:40:21.330
> 
> 标签：c#, .net, properties

我不确定，因为在 Java 中 getter/setter 看起来有点不同，但是用什么“c#方式”来编码这些东西？

选项 a.)

```
 private string name;

    public string Name
    {
        get { return name; }
        set { name = value; }
    }

    private int time;

    public int Time
    {
        get { return time; }
        set { time = value; }
    } 
```

b.)

```
 private string _name;
    private int _time;

    public string name
    {
        get { return _name; }
        set { _name = value; }
    }

    public int time
    {
        get { return _time; }
        set { _time = value; }
    } 
```

C。）

```
 public string name {get; set;}
   public int time {get; set;} 
```

好的，有一些例子。什么会更好看？我应该先编写所有私有变量声明，然后再编写属性，还是应该将我的变量和属性声明分组在一起。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-06T13:42:28.467

d 怎么样，遵循 .NET 命名约定：

```
public string Name { get; set; }
public int Time { get; set; } // Odd type for time, admittedly... 
```

除非您在其中做一些不平凡的事情，否则不要自己手动编写属性。

如果您*确实*手动编写了属性实现，则取决于您如何命名私有变量。我个人会使用：

```
private string name;
public string Name
{
    get { /* whatever */ }
    set { /* whatever */ }
} 
```

...但如果你想使用下划线，那是你的特权。

至于会员的排序——那更是你自己的选择。假设您正在与团队合作，请与团队交谈并了解当地的惯例。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-06T13:42:21.620

如果您不需要访问底层支持字段，那么自动属性是建议的方式，即 (C)。但是，根据 .NET 命名约定，它们应该是 PascalCase。

```
public string Name { get; set; }
public int Time { get; set; } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-06T13:42:57.520

前两个只是*命名约定*，您应该根据公司/开发组或您自己的决定来选择。

第三种情况是贴花**相同属性**的简短方法，其中实际`field`将由运行时本身生成。

短优点：*它简短易行*。

短缺点：*不能**在**geter/setter 中放一些东西，不能在 Visual Studio 中放断点*...

希望这可以帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-06T13:43:44.897

视情况而定，当您定义字段时使用下划线字符，如果您只需要一个简单的 getter/setter，则无需自己定义字段，因为编译器会在后台为您定义它们。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-06T13:42:20.870

在您的特定情况下（getter 或 setter 没有逻辑）最好的选择是`C`（对属性名称进行少量更改以遵循 C# 标准）

```
 public string Name {get; set;}
 public int Time {get; set;} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-06T14:25:26.983

我会选择这个选项，大多数其他人已经发布了。

```
public string Name {get; set;}
public int Time {get; set;} 
```

请注意，您可以单独对 setter 和 getter 进行更改保护级别，例如

```
public string Name {get; protected set;}
protected int Time {get; private set;} 
```

您只能使用比应用于孔属性更高的保护。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-06T13:42:31.260

```
public string Name {get; set;}
public int Time {get; set;} 
```

# mysql - 如何在 Python3 中将输入转义到 MySQL 数据库？

> ID：11363335
> 
> 赞同：14
> 
> 时间：2012-07-06T13:40:26.833
> 
> 标签：mysql, sql, python-3.x, pymysql

如何在 Python3 中将输入转义到 MySQL 数据库？我正在使用 PyMySQL 并且工作正常，但是当我尝试执行以下操作时：

```
cursor.execute("SELECT * FROM `Codes` WHERE `ShortCode` =  '{}'".format(request[1])) 
```

`'`如果字符串有or ，它将不起作用`"`。我也试过：

```
cursor.execute("SELECT * FROM `Codes` WHERE `ShortCode` =  %s",request[1]) 
```

问题在于库（PyMySQL）使用 Python2.x, 的格式化语法`%`，这不再有效。我也找到了这个可能的解决方案

```
conn.escape_string() 
```

在[这里](https://stackoverflow.com/a/3617097/1460016)，但我不知道在哪里添加此代码。这就是我得到的全部：

```
import pymysql
import sys
conn = pymysql.connect( host   = "localhost",
            user   = "test",
            passwd = "",
            db     = "test")
cursor = conn.cursor()
cursor.execute("SELECT * FROM `Codes` WHERE `ShortCode` =  {}".format(request[1]))

result = cursor.fetchall()

cursor.close()
conn.close() 
```

编辑：我解决了！在 PyMySQL 中正确的方法是这样的：

```
import pymysql
import sys
conn = pymysql.connect(host="localhost",
            user="test",
            passwd="",
            db="test")
cursor = conn.cursor()
text = conn.escape(request[1])
cursor.execute("SELECT * FROM `Codes` WHERE `ShortCode` =  {}".format(text))

cursor.close()
conn.close() 
```

该`text = conn.escape(request[1])`行是转义代码的地方。在 PyMySQL 代码中找到它。在那里，`request[1]`是输入。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-10-29T00:14:24.060

尽管“已解决”的答案有效，但这不是最佳实践。当使用符合 Python DBI 的库时，您应该使用绑定变量而不是格式化字符串并将其传递给执行。这种方法存在固有的危险。

因此，这是正确的做法：

```
cursor.execute("SELECT * FROM `Codes` WHERE `ShortCode` = %s", text) 
```

请注意，这不是格式字符串，而是传递给执行游标的绑定变量。

详情：[Python DBI PEP](http://legacy.python.org/dev/peps/pep-0249/#id15)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T12:47:37.003

解决了。在 PyMySQL 中正确的方法是这样的：

```
import pymysql
import sys
conn = pymysql.connect(host="localhost",
            user="test",
            passwd="",
            db="test")
cursor = conn.cursor()
text = conn.escape(request[1])
cursor.execute("SELECT * FROM `Codes` WHERE `ShortCode` =  {}".format(text))

cursor.close()
conn.close() 
```

该`text = conn.escape(request[1])`行是转义代码的地方。在 PyMySQL 代码中找到它。在那里，`request[1]`是输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-10T23:35:51.510

准备使用辅助函数

```
def mysql_insert(conn, table, row):
    cols = ', '.join('`{}`'.format(col) for col in row.keys())
    vals = ', '.join('%({})s'.format(col) for col in row.keys())
    sql = 'INSERT INTO `{0}` ({1}) VALUES ({2})'.format(table, cols, vals)
    conn.cursor().execute(sql, row)
    conn.commit() 
```

使用示例

```
insert_into(conn, 'people', {
    'firstname': 'John',
    'lastname': 'Doe',
    'age': 18, }) 
```

参考：[https ://github.com/PyMySQL/PyMySQL/blob/master/pymysql/cursors.py#L157-L158](https://github.com/PyMySQL/PyMySQL/blob/master/pymysql/cursors.py#L157-L158)

`def execute(self, query, args=None):`

```
如果 args 是列表或元组，则 %s 可以用作查询中的占位符。
如果 args 是 dict，则 %(name)s 可以用作查询中的占位符。

```

# objective-c - UIViewController 转换-objective-c

> ID：11363337
> 
> 赞同：5
> 
> 时间：2012-07-06T13:40:27.690
> 
> 标签：objective-c, ios, uiview, uiviewcontroller, uiviewanimationtransition

我有`UIViewControllers`A 和 B，它们分配在`AppDelegate`. 我需要对他们应用过渡。如何在不重新分配和替换的情况下传输它们`UIViews`？`UIBarButtonItem`此代码从我的 in调用`UINavigationController`：

```
[UIView transitionFromView:self.view  //UIViewController A
                           toView:appDelegate.secondViewController.view //UIViewController B
                           duration:0.5 
                           options:UIViewAnimationOptionTransitionFlipFromLeft 
```

这个方法替换`UIViews`了我的`UIViewControllers`，我可以把它们转回来，或者只是不知道该怎么做。你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T02:50:09.913

如果您在 iOS 5 世界中并想在各种视图控制器之间跳转，您可能想要追求[View Controller Containment](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)。或查看[WWDC 2011 会议 102](https://developer.apple.com/videos/wwdc/2011/?id=102)。

视图控制器包含基本上假设您有一些父视图控制器来管理多个子控制器之间的导航。在您的情况下，父视图将是一个带有导航栏和按钮的视图。

**更新：**

如果你追求遏制，你可以创建一个父视图控制器，它有一个带有按钮的导航栏。当您加载该视图时，您可以添加第一个子视图。因此`viewDidLoad`可能看起来像：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // this is my model, where I store data used by my view controllers

    _model = [[MyModel alloc] init];

    // let's create our first view controller

    OneViewController *controller = [[OneViewController  alloc] initWithNibName:@"OneViewController"  bundle:nil];

    // pass it our model (obviously, `model` is a property that I've set up in my child controllers)

    controller.model = _model;

    // let's put the new child in our container and add it to the view

    [self addChildViewController:controller];
    [self configureChild:controller];
    [self.view addSubview:controller.view];
    [controller didMoveToParentViewController:self];

    // update our navigation bar title and the label of the button accordingly

    [self updateTitles:controller];
} 
```

`configureChild`只是做最后的配置。为方便起见，我经常会在 IB 中设置一个 UIView（在本例中称为`childView`），用于设置框架，这让我摆脱了手动创建框架的世界，但是可以随心所欲：

```
- (void)configureChild:(UIViewController *)controller
{
    // configure it to be the right size (I create a childView in IB that is convenient for setting the size of the views of our child view controllers)

    controller.view.frame = self.childView.frame;
} 
```

如果您触摸导航栏中的按钮，就会执行此操作。如果您在第一个控制器中，请设置第二个控制器。如果您在第二个控制器中，请设置第一个：

```
- (IBAction)barButtonTouchUpInside:(id)sender 
{
    UIViewController *currentChildController = [self.childViewControllers objectAtIndex:0];

    if ([currentChildController isKindOfClass:[OneViewController class]])
    {
        TwoViewController *newChildController = [[TwoViewController alloc] initWithNibName:@"TwoViewController"  bundle:nil];
        newChildController.model = _model;
        [self transitionFrom:currentChildController To:newChildController];
    }
    else if ([currentChildController isKindOfClass:[TwoViewController class]])
    {
        OneViewController *newChildController = [[OneViewController alloc] initWithNibName:@"OneViewController"  bundle:nil];
        newChildController.model = _model;
        [self transitionFrom:currentChildController To:newChildController];
    }
    else
        NSAssert(FALSE, @"Unknown controller type");

} 
```

这完成了基本的转换（包括各种与收容相关的调用）：

```
- (void)transitionFrom:(UIViewController *)oldController To:(UIViewController *)newController
{    
    [self addChildViewController:newController];
    [self configureChild:newController];

    [self transitionFromViewController:oldController 
                      toViewController:newController
                              duration:0.5
                               options:UIViewAnimationOptionTransitionCrossDissolve
                            animations:^{
                                [self updateTitles:newController];
                            }
                            completion:^(BOOL finished){
                                [oldController willMoveToParentViewController:nil];
                                [oldController removeFromParentViewController];
                                [newController didMoveToParentViewController:self];
                            }];
} 
```

此方法只是根据选择的子视图在父视图控制器的导航栏中设置标题。它还设置按钮以引用另一个控制器。

```
- (void)updateTitles:(UIViewController *)controller
{
    if ([controller isKindOfClass:[OneViewController class]])
    {
        self.navigationItemTitle.title = @"First View Controller";  // current title
        self.barButton.title = @"Two";                              // title of button to take me to next controller
    }
    else if ([controller isKindOfClass:[TwoViewController class]])
    {
        self.navigationItemTitle.title = @"Second View Controller"; // current title
        self.barButton.title = @"One";                              // title of button to take me to next controller
    }
    else
        NSAssert(FALSE, @"Unknown controller type");
} 
```

这一切都假设您将在控制器之间跳转时创建和销毁控制器。我通常这样做，但使用模型对象来存储我的数据，所以我保留我想要的任何数据。

您说您不想“不重新分配和替换 UIViews”来执行此操作：如果是这样，您还可以更改上面的代码以预先创建两个子视图控制器并将转换更改为在它们之间简单地跳转：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // this is my model, where I store data used by my view controllers

    _model = [[MyModel alloc] init];

    // let's create our first view controller

    _controller0 = [[OneViewController  alloc] initWithNibName:@"OneViewController"  bundle:nil];
    _controller0.model = _model;
    [self addChildViewController:_controller0];
    [self configureChild:_controller0];
    [_controller0 didMoveToParentViewController:self];

    // let's create our second view controller

    _controller1 = [[OneViewController  alloc] initWithNibName:@"OneViewController"  bundle:nil];
    _controller1.model = _model;
    [self addChildViewController:_controller1];
    [self configureChild:_controller1];
    [_controller1 didMoveToParentViewController:self];

    // let's add the first view and update our navigation bar title and the label of the button accordingly

    _currentChildController = _controller0;
    [self.view addSubview:_currentChildController.view];
    [self updateTitles:_currentChildController];
}

- (void)transitionFrom:(UIViewController *)oldController To:(UIViewController *)newController
{    
    [self transitionFromViewController:oldController 
                      toViewController:newController
                              duration:0.5
                               options:UIViewAnimationOptionTransitionCrossDissolve
                            animations:^{
                                [self updateTitles:newController];
                            }
                            completion:^(BOOL finished){
                                _currentChildController = newController;
                            }];
}

- (IBAction)barButtonTouchUpInside:(id)sender 
{
    UIViewController *newChildController;

    if ([_currentChildController isKindOfClass:[OneViewController class]])
    {
        newChildController = _controller1;
    }
    else if ([_currentChildController isKindOfClass:[TwoViewController class]])
    {
        newChildController = _controller0;
    }
    else
        NSAssert(FALSE, @"Unknown controller type");

    [self transitionFrom:_currentChildController To:newChildController];

} 
```

我已经看到了这两种方式，所以你可以做任何适合你的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T03:34:49.460

请看[这里](https://stackoverflow.com/questions/8146253/animate-change-of-view-controllers-without-using-navigation-controller-stack-su/8198515#8198515)。你基本上想要实现 UIViewController 包含，这是 iOS5 中的一个新特性。上面提供的链接提供了一些代码和一个 github 项目的链接。

祝你好运

吨

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T06:49:20.080

我找到了解决我的问题的方法。此代码适用于 iOS 4.x

```
[UIView beginAnimations:@"transition" context:nil];
[UIView setAnimationDuration:1.0];

[UIView setAnimationTransition:UIViewAnimationTransitionCurlDown 
             forView:self.navigationController.view 
               cache:NO];

[self.navigationController 
pushViewController:self.alternateView animated:NO];

[UIView commitAnimations]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T13:57:21.833

尝试

```
UIViewController* controller1;
UIViewController* controller2;
[controller1 transitionFromViewController:controller1 toViewController:controller2 duration:0.5f options:0 animations:nil completion:nil]; 
```

或者

如果在 navigationtroller - controller1 之上，那么

```
UINavigationController* nav;
[nav pushViewController:controller2 animated:YES]; 
```

# c# - c#图表控件在几秒钟内输入更改时自动更新？

> ID：11363338
> 
> 赞同：0
> 
> 时间：2012-07-06T13:40:28.330
> 
> 标签：c#, charts, mschart

我有一个窗口表单，它的参数很少，还有一个图表控件来绘制它。这几个参数是一个跟踪栏，我这样做是为了每次这些跟踪栏值发生变化时，图表都会更新。

但是，我注意到，如果我拖动轨迹栏，图表绘制会突然花费大量时间。

如何实现图表以便图表定期更新？在应用程序意识到没有值发生变化后说两秒钟？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:51:15.283

将`Timer`控件添加到您的表单。将该`Interval`属性设置为 2000（2 秒）。每次影响图表的任何因素发生变化时，将计时器的`Enabled`属性设置为 true。在计时器的`Tick`事件处理程序中，将计时器的`Enabled`属性设置为 false，然后更新图表控件。

# powershell - 使用 Powershell 更改 DCOM 配置安全设置

> ID：11363342
> 
> 赞同：8
> 
> 时间：2012-07-06T13:40:38.987
> 
> 标签：powershell, dcom

我的任务是编写 Powershell 脚本以从头开始设置服务器以运行我们的一项服务作为 Web 应用程序的一部分，设置此服务器所需的步骤之一是更改已安装服务的 DCOM 配置，特别是将帐户添加到“启动和激活”/“访问”权限，并在添加这些帐户后为其设置权限。

有没有一种方法可以使用 Powershell 来做到这一点？我还没有找到一种具体的方法来做我想要实现的目标，所以任何帮助都会很棒

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-10T01:38:04.707

看起来你会使用 WMI 来做。

获取一个实例：`Win32_DCOMApplicationSetting`像这样：

```
$dcom = Get-WMIObject -Class Win32_DCOMApplicationSetting -Filter 'Description="Something"' 
```

现在您可以访问`SetAccessSecurityDescriptor`和`SetLaunchSecurityDescriptor`方法。

来自： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa384905 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384905(v=vs.85).aspx)

> DCOM 应用程序
> 
> DCOM 应用程序实例有几个安全描述符。从 Windows Vista 开始，使用 Win32_DCOMApplicationSetting 类的方法来获取或更改各种安全描述符。安全描述符作为 Win32_SecurityDescriptor 类的实例返回。
> 
> 要获取或更改配置权限，请调用 GetConfigurationSecurityDescriptor 或 SetConfigurationSecurityDescriptor 方法。
> 
> 要获取或更改访问权限，请调用 GetAccessSecurityDescriptor 或 SetAccessSecurityDescriptor 方法。
> 
> 要获取或更改启动和激活权限，请调用 GetLaunchSecurityDescriptor 或 SetLaunchSecurityDescriptor 方法。
> 
> Windows Server 2003、Windows XP、Windows 2000、Windows NT 4.0 和 Windows Me/98/95：Win32_DCOMApplicationSetting 安全描述符方法不可用。

还有一个名为 DCOMPERM 的工具，其中源代码在 Windows SDK 中可用：http: [//www.microsoft.com/en-us/download/details.aspx?id= 8279](http://www.microsoft.com/en-us/download/details.aspx?id=8279)

如果您搜索已编译的 DCOMPERM，您可以在网上找到已编译的版本。

以下是命令行选项：

```
Syntax: dcomperm <option> [...] 
Options:

Modify or list the machine access permission list 
-ma <"set" or "remove"> <Principal Name> ["permit" or "deny"] ["level:l,r"] 
-ma list

Modify or list the machine launch permission list 
-ml <"set" or "remove"> <Principal Name> ["permit" or "deny"] ["level:l,r,ll,la,rl,ra"] 
-ml list

Modify or list the default access permission list 
-da <"set" or "remove"> <Principal Name> ["permit" or "deny"] ["level:l,r"] 
-da list

Modify or list the default launch permission list 
-dl <"set" or "remove"> <Principal Name> ["permit" or "deny"] ["level:l,r,ll,la,rl,ra"] 
-dl list

Modify or list the access permission list for a specific AppID 
-aa <AppID> <"set" or "remove"> <Principal Name> ["permit" or "deny"] ["level:l,r"] 
-aa <AppID> default 
-aa <AppID> list

Modify or list the launch permission list for a specific AppID 
-al <AppID> <"set" or "remove"> <Principal Name> ["permit" or "deny"] ["level:l,r,ll,la,rl,ra"] 
-al <AppID> default 
-al <AppID> list

level: 
    ll - local launch (only applies to {ml, dl, al} options) 
    rl - remote launch (only applies to {ml, dl, al} options) 
    la - local activate (only applies to {ml, dl, al} options) 
    ra - remote activate (only applies to {ml, dl, al} options) 
    l - local (local access - means launch and activate when used with {ml, dl, al} options) 
    r - remote (remote access - means launch and activate when used with {ml, dl, al} options) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-28T20:03:35.320

我和OP有同样的问题。安迪发布的答案非常有帮助，让我半途而废。然后我找到了某人编写的[Set-DCOMLaunchPermissions](http://www.sevecek.com/Files/prepare-wss-permissions.txt)来帮助他们部署 SharePoint。

我根据自己的目的调整了它们的功能，并提出了一个设置我需要的权限的解决方案。

```
$user = "sql2012agent"
$domain = "MYDOMAIN"
$appdesc = "Microsoft SQL Server Integration Services 11.0"
$app = get-wmiobject -query ('SELECT * FROM Win32_DCOMApplicationSetting WHERE Description = "' + $appdesc + '"') -enableallprivileges
#$appid = "{83B33982-693D-4824-B42E-7196AE61BB05}"
#$app = get-wmiobject -query ('SELECT * FROM Win32_DCOMApplicationSetting WHERE AppId = "' + $appid + '"') -enableallprivileges
$sdRes = $app.GetLaunchSecurityDescriptor()
$sd = $sdRes.Descriptor
$trustee = ([wmiclass] 'Win32_Trustee').CreateInstance()
$trustee.Domain = $domain
$trustee.Name = $user
$fullControl = 31
$localLaunchActivate = 11
$ace = ([wmiclass] 'Win32_ACE').CreateInstance()
$ace.AccessMask = $localLaunchActivate
$ace.AceFlags = 0
$ace.AceType = 0
$ace.Trustee = $trustee
[System.Management.ManagementBaseObject[]] $newDACL = $sd.DACL + @($ace)
$sd.DACL = $newDACL
$app.SetLaunchSecurityDescriptor($sd) 
```

# apache-camel - Camel exchange inout 不维护异常交换

> ID：11363343
> 
> 赞同：0
> 
> 时间：2012-07-06T13:40:41.703
> 
> 标签：apache-camel, esb, eip

我创建了一条没有 INOUT 交换模式的骆驼路线，路线看起来像

```
direct:start > bean:myBean?method=handle 
```

我正在使用 ProducerTemplate 的 send 方法发送有效负载

```
Exchange response = producerTemplate.send(endpointUri, exchange); 
```

我在 bean 的句柄方法中设置了交换异常，但它没有保留在响应中。

有什么我想念的吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:18:42.960

我找到了骆驼隐藏异常的地方。由于我将交换标记为已处理并标记为回滚，camel 将异常设置为 null 并将其移至属性。

我能够使用

```
result.getProperty(Exchange.EXCEPTION_CAUGHT) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:45:58.723

如果你想发出异常信号，你应该从 bean 中抛出一个异常。

# java - ext gwt 禁用网格选择

> ID：11363347
> 
> 赞同：2
> 
> 时间：2012-07-06T13:41:03.570
> 
> 标签：java, grid, selection, gxt

这似乎是一件简单的事情，但经过研究，似乎需要自定义实现。我想知道是否有任何简单的方法可以禁用任何 ext gwt 网格的网格选择（不禁用网格并设置最终的禁用样式集）。

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T16:35:45.183

我找到了一种更简单的禁用选择的方法：

```
grid.disableEvents(true);
grid.disableTextSelection(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:52:18.973

为了在 GWT 应用程序中禁用表（DataGrid）行，我使用这种方法：

```
 SingleSelectionModel<CustomObject> selectionModel = new SingleSelectionModel<CustomObject>();

...

    private void deselectTableRow() {
        if (selectionModel != null) {
            CustomObject selectedObject = selectionModel.getSelectedObject();
            if (selectedObject == null ) {
                return;
            }
            selectionModel.setSelected(selectedObject, false);
        }
    } 
```

希望这会在 ext gwt 的情况下对您有所帮助。

# authentication - JBoss 有我可以使用的用户管理 API 吗？

> ID：11363350
> 
> 赞同：0
> 
> 时间：2012-07-06T13:41:12.510
> 
> 标签：authentication, jboss, jboss7.x, administration, user-management

我将在 JBoss App Server 7 上运行 Web 应用程序。JBoss 是否有某种内置的用户管理模块/API，我可以使用而不是自己编写代码？还是我必须自己制作这个模块。我知道提供身份验证和授权的默认 JAAS 部分，但是我也希望从数据源中管理、添加、编辑、删除用户。

我不是懒惰或任何事情，只是想在开始之前知道 JBoss 是否有一个简单的内置方法:)

谷歌暗示不，所以我想通过在这里询问来确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:35:07.093

据我所知，它们没有提供任何易于管理的身份提供者，它们“仅”提供使用标准协议（如 LDAP、SAML 和 WS-trust、openid）连接到身份提供者的方法，以提供容器管理的身份验证。

他们有一个 idm 项目，但它似乎提供了由某些身份存储支持的标准协议 SSO 身份，但没有提供管理用户的方法。

PicketBox 和 PricketLink 是您应该寻找更多信息的两个 JBoss 项目。

如果您想使用全局身份系统、现有系统、新产品部署或自定义构建，则可以使用这些元素。

（免责声明：我在 Picket* 项目文档上花了一些时间，但我仍然不认为我对它的工作原理有很好的了解......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:54:14.460

有用于管理操作的 Web 界面和命令行界面。请参阅文档的[管理客户端](https://docs.jboss.org/author/display/AS71/Management+Clients)部分。

[安全领域](https://docs.jboss.org/author/display/AS71/Security+Realms)可能就是您所追求的。不过，我并不是真正的安全专家。

也许[安全域](https://community.jboss.org/wiki/JBossAS7SecurityDomainModel)也可能会有所帮助。

# android - Android 应用内购买

> ID：11363355
> 
> 赞同：0
> 
> 时间：2012-07-06T13:41:27.767
> 
> 标签：android, in-app-purchase, in-app-billing

我必须在我即将推出的新应用程序中整合应用程序购买。我对购买部分和所有内容都很熟悉，但与应用相关的有点困惑是购买还是不购买。**也就是说，如果用户曾经购买过该应用程序并卸载了该应用程序，那么用户再次安装该应用程序，现在我怎么知道该用户是否已经购买了该特定应用程序**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:46:14.157

你会知道的。仔细阅读[：）](http://developer.android.com/guide/google/play/billing/index.html)

在示例代码中

提供

```
 private class DungeonsPurchaseObserver extends PurchaseObserver {
        public DungeonsPurchaseObserver(Handler handler) {
            super(Update.this, handler);
        }

        @Override
        public void onBillingSupported(boolean supported) {

        }

        @Override
        public void onPurchaseStateChange(PurchaseState purchaseState, String itemId,
                int quantity, long purchaseTime, String developerPayload) {

        }

        @Override
        public void onRequestPurchaseResponse(RequestPurchase request,
                ResponseCode responseCode) {

        }

        @Override
        public void onRestoreTransactionsResponse(RestoreTransactions request,
                ResponseCode responseCode) {

        }

    } 
```

编辑：

对于现成的蛋糕，请阅读我的[答案](https://stackoverflow.com/a/11231978/1436931):)

# html - 是否可以按百分比创建地图 html 区域？

> ID：11363358
> 
> 赞同：16
> 
> 时间：2012-07-06T13:41:31.293
> 
> 标签：html, css

我需要创建这样的东西：

[http://www.mrporter.com/journal/journal_issue71/2#2](http://www.mrporter.com/journal/journal_issue71/2#2)

我的大图中的每个产品都与鼠标悬停时出现的工具提示相关联。但我需要这个来处理**全屏图像**。

我认为的第一个解决方案（如上面的示例）是**地图 html**解决方案，其中每个解决方案都准确地填充了我的产品边界。问题是我**无法**为我指定**精确的值**，因为我的图像大小取决于窗口屏幕。

最好的解决方案是为我的区域设置**百分比值**。这可能吗？还有其他建议吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-10-07T08:14:52.857

使用链接的替代解决方案：

CSS：

```
.image{
  position: relative;
}
.image a{
  display: block;      
  position: absolute;
} 
```

HTML：

```
<div class="image">
  <img src="image.jpg" alt="image" />
  <a href="http://www.example.cz/1.html" style="top: 10%; left: 10%; width: 15%; height: 15%;"></a>
  <a href="http://www.example.cz/2.html" style="top: 20%; left: 50%; width: 15%; height: 15%;"></a>
  <a href="http://www.example.cz/3.html" style="top: 50%; left: 80%; width: 15%; height: 15%;"></a>
</div> 
```

可以在图形编辑器中检测百分比尺寸

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T10:26:16.033

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-06-05T21:39:06.757

你可以检查这个插件是救命的。

当您想要映射百分比缩放图像等时很有用。

它可以与 jQuery 一起使用，也可以不与 jQuery 一起使用。

[https://github.com/davidjbradshaw/imagemap-resizer](https://github.com/davidjbradshaw/imagemap-resizer)

你可以看到它在工作。

[http://davidjbradshaw.com/imagemap-resizer/example/](http://davidjbradshaw.com/imagemap-resizer/example/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-06T18:21:16.027

因为这不能通过简单的 HTML/CSS 操作来完成，所以唯一的替代方法是 JavaScript，它可以有效地根据图像的大小重新计算坐标。为此，我整理了一个实现此目的的函数（尽管涉及两个函数）：

```
function findSizes(el, src) {
    if (!el || !src) {
        return false;
    }
    else {
        var wGCS = window.getComputedStyle,
            pI = parseInt,
            dimensions = {};
        dimensions.actualWidth = pI(wGCS(el, null).width.replace('px', ''), 10);
        var newImg = document.createElement('img');
        newImg.src = src;
        newImg.style.position = 'absolute';
        newImg.style.left = '-10000px';
        document.body.appendChild(newImg);
        dimensions.originalWidth = newImg.width;
        document.body.removeChild(newImg);
        return dimensions;
    }
}

function remap(imgElem) {
    if (!imgElem) {
        return false;
    }
    else {
        var mapName = imgElem
            .getAttribute('usemap')
            .substring(1),
            map = document.getElementsByName(mapName)[0],
            areas = map.getElementsByTagName('area'),
            imgSrc = imgElem.src,
            sizes = findSizes(imgElem, imgSrc),
            currentWidth = sizes.actualWidth,
            originalWidth = sizes.originalWidth,
            multiplier = currentWidth / originalWidth,
            newCoords;

        for (var i = 0, len = areas.length; i < len; i++) {
            newCoords = areas[i]
                .getAttribute('coords')
                .replace(/(\d+)/g,function(a){
                    return Math.round(a * multiplier);
                });
            areas[i].setAttribute('coords',newCoords);
        }
    }
}

var imgElement = document.getElementsByTagName('img')[0];

remap(imgElement);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/nagtB/2/)。

但是请注意，这需要一个实现`window.getComputedStyle()`（大多数当前浏览器，但仅在 IE 版本 9 及更高版本中）的浏览器。此外，除了确保将所需的参数传递给函数之外，没有任何完整性检查。但是，如果您想尝试，这些应该是一个开始。

参考：

*   [`document.body`](https://developer.mozilla.org/en/DOM/document.body).
*   [`document.createElement()`](https://developer.mozilla.org/en/DOM/document.createElement).
*   [`document.getElementsByName()`](https://developer.mozilla.org/en/DOM/document.getElementsByName).
*   [`document.getElementsByTagName()`](https://developer.mozilla.org/en/DOM/document.getElementsByTagName).
*   [`element.getAttribute()`](https://developer.mozilla.org/en/DOM/element.getAttribute).
*   [`element.setAttribute()`](https://developer.mozilla.org/en/DOM/element.setAttribute).
*   [`element.style`](https://developer.mozilla.org/en/DOM/element.style).
*   [`Math.round()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/round).
*   [`node.appendChild()`](https://developer.mozilla.org/en/DOM/Node.appendChild).
*   [`node.removeChild()`](https://developer.mozilla.org/en/DOM/Node.removeChild).
*   [`parseInt()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt).
*   [`string.replace()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace).
*   [`string.substring()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring).
*   [`window.getComputedStyle`](https://developer.mozilla.org/en/DOM/window.getComputedStyle).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T13:45:11.243

图像地图中的百分比不是一个选项。您可能希望涉及一些脚本（JS），以重新计算图像调整大小的确切位置。当然，如果需要，您可以在该脚本中使用百分比。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T14:04:33.103

考虑使用带有一些 CSS 的 Raphaël JavaScript 库。请参阅[http://raphaeljs.com/](http://raphaeljs.com/)和[使用 Raphael.js 绘制图像](https://stackoverflow.com/questions/3407333/drawing-over-an-image-using-raphael-js)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-15T10:59:08.693

我知道这是一个老问题，但也许有人像我一样在某个时候需要这个。我修改了@David Thomas 的回答，让这小块 JS 能够处理未来的重新计算：

```
function findSizes(el, src) {
    if (!el || !src) {
        return false;
    }
    else {
        var wGCS = window.getComputedStyle,
        pI = parseInt,
        dimensions = {};
        dimensions.actualWidth = pI(wGCS(el, null).width.replace('px', ''), 10);
        var newImg = document.createElement('img');
        newImg.src = src;
        newImg.style.position = 'absolute';
        newImg.style.left = '-10000px';
        document.body.appendChild(newImg);
        dimensions.originalWidth = newImg.width;
        document.body.removeChild(newImg);
        return dimensions;
    }
}

function remap(imgElem) {
    if (!imgElem) {
        return false;
    }
    else {
        var mapName = imgElem
        .getAttribute('usemap')
        .substring(1),
        map = document.getElementsByName(mapName)[0],
        areas = map.getElementsByTagName('area'),
        imgSrc = imgElem.src,
        sizes = findSizes(imgElem, imgSrc),
        currentWidth = sizes.actualWidth,
        originalWidth = sizes.originalWidth,
        multiplier = currentWidth / originalWidth,
        newCoords;

        for (var i = 0, len = areas.length; i < len; i++) {
            // Save original coordinates for future use
            var originalCoords = areas[i].getAttribute('data-original-coords');
            if (originalCoords == undefined) {
                originalCoords = areas[i].getAttribute('coords');
                areas[i].setAttribute('data-original-coords', originalCoords);
            }

            newCoords = originalCoords.replace(/(\d+)/g,function(a){
                return Math.round(a * multiplier);
            });
            areas[i].setAttribute('coords',newCoords);
        }
    }
}

function remapImage() {
    var imgElement = document.getElementsByTagName('img')[0];
    remap(imgElement);
}

// Add a window resize event listener
var addEvent = function(object, type, callback) {
    if (object == null || typeof(object) == 'undefined') return;
    if (object.addEventListener) {
        object.addEventListener(type, callback, false);
    } else if (object.attachEvent) {
        object.attachEvent("on" + type, callback);
    } else {
        object["on"+type] = callback;
    }
};

addEvent(window, "resize", remapImage); 
```

# ios - 静态库链接错误：未找到架构的符号

> ID：11363359
> 
> 赞同：0
> 
> 时间：2012-07-06T13:41:32.023
> 
> 标签：ios, xcode, libraries, static-linking

我需要将 FFMPEG 的库（libavformat、libavcodec 等）链接到我的项目。我已经下载了 iFrameExtractor 项目作为示例，并成功构建了它。

xcode-proj 可以正常打开，示例应用程序也可以正常工作，所以我只是将这个项目中的库带到了我的项目中。但是xcode无法构建它，说我

```
 Undefined symbols for architecture armv7:
  "av_register_all()", referenced from: 
```

我检查了目标设置，我看不出我的项目设置和 iFrameExtractor 之间有什么区别。我刚刚将所有 ffmpeg 文件夹移动到我的项目文件夹中。

笔记：

1) nm 命令告诉我这个符号在库中。

2）库是胖文件，包括i386、armv6、armv7架构。

请帮助我，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:55:35.000

我昨天刚经历过这个:-)

在 xcode 中，您需要将 .a 文件添加到项目中的链接库列表中。最简单的方法是将 .a 直接拖到左侧导航区域中的项目条目上：

![通过拖放添加库。](../Images/d4649c9655bf913b6898d07d8b5bf9ab.png)

或者，您可以从项目编辑器摘要区域的对话框中选择它们：

![通过选择添加库](../Images/65d75c52336a16ec811392750e6ce1df.png)

只需确保选择实际的 .a 文件，而不是整个文件夹。然后，只需导入它们的标题（正如您可能已经在做的那样......），您应该很高兴:-)

# php - 无法让这个 AJAX 请求工作

> ID：11363364
> 
> 赞同：2
> 
> 时间：2012-07-06T13:41:47.830
> 
> 标签：php, jquery, html, ajax

所以基本上这是我的脚本，它在 index.php 中 -

```
 <script type="text/javascript">
    setInterval(function() {
        jQuery.ajax({
            url: "ajaxChecker.php",
            context: document.body
        }).done(function(response) { 
            if(response == true) {
                location.reload(true);  
            }
        }); 
    }, 1000 * 60);      
    </script> 
```

它应该每分钟向 balanceChecker.php 发送请求以接收数据，然后检查它是否是真正的重新加载页面，否则什么也不做。

这是 ajaxChecker.php 文件

```
<?php

return true;

?> 
```

但它不起作用。有任何想法吗？

编辑了 AJAX 部分，现在也不起作用 -

```
 setInterval(function() {
        jQuery.ajax({
            url: "ajaxChecker.php",
            context: document.body,
            success: function(response) {
                if(response == "true") {
                    location.reload(true);  
                }
            }
        });
    }, 1000 * 10); 
```

并在 ajaxChecker.php 文件中将 return 替换为 echo 并将 true 替换为“true”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:43:25.490

在你的 php 文件中写

```
<?php

echo true;//can also use echo 1

?> 
```

因为页面不能返回任何东西

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T13:43:32.117

您的 php.ini 不会输出任何内容。

应该：

```
<?php echo "true";?> 
```

在js中：

```
if(response == "true") { 
```

另外，我建议不要包含 PHP 结束标记：`?>`以避免不必要的新行并防止发送标头信息：

```
<?php 
     echo "true"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T13:52:43.100

您可以使用“成功”而不是 .done：

```
var str="the data you want to send to ajaxChecker.php";

$.ajax({
          type: "POST",
          url: "ajaxChecker.php",
          data: str,
          success: function(msg) {
          // msg is the return you receive from ajaxChecker.php

                      if(msg==1) {location.reload();}

              }
        }); 
```

# android - 处理Listview问题每一行中的按钮事件

> ID：11363366
> 
> 赞同：2
> 
> 时间：2012-07-06T13:41:54.740
> 
> 标签：android, android-widget

我是 android 新手，正在尝试开发一个新的 android 应用程序。但我正在努力解决我项目中的一个问题。

我正在使用扩展的列表视图，`baseadapter`并且需要在列表视图的每一行中添加一个按钮。当我单击`button`列表视图的任何行中的时，我希望它应该被删除。但是，当我这样做时，列表视图中的其他一些按钮也会被删除。

我怎么解决这个问题？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:06:32.437

你有一个适配器、活动和某种数据源

在您的适配器中，您将一些数据附加到按钮以便能够相互区分：

```
public class ExpAdapter extends ListAdapter {

    @Override
    public View getView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {
                /* SOME CODE HERE*/
        convertViewButton.setTag(buttonId);
        return convertView;
    }
                /* SOME CODE HERE*/
} 
```

在您的活动中，您将按钮 ID 标记为要隐藏的 ID：

```
 public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            storageOfHiddenButtonsIds.add((Long)arg1.getTag());
        }}; 
```

然后 ListAdapter 改变如下：

```
@Override
public View getView(int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) {
            /* SOME CODE HERE*/

    convertViewButton.setTag(buttonId);

    if(storageOfHiddenButtonsIds.contains(buttonId))
    {
      convertViewButton.setVisiblity(View.GONE);
    }
    return convertView;
} 
```

当你想让你的adatper改变你时，别忘了打电话

```
this.expAdapterAllTaks.notifyDataSetChanged(); 
```

对不起，我的代码中有任何错误，但我只是想给你一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:48:49.403

我遇到了同样类型的问题。`setOnItemClickListener`如果您在每个 listView 项目上添加类似按钮的项目，ListView 将不起作用。解决方案是`onClick`在列表项布局（您在自定义适配器文件中使用）中使用

```
<ImageButton
        android:id="@+id/my_delete"
        android:onClick="onDeleteButtonClickListener" 
        ... and so on /> 
```

其中*onDeleteButtonClickListener*是您在列表视图中设置适配器的活动中的方法。

```
public void onDeleteButtonClickListener(View v) {
// your code
} 
```

这里 listItem 表示 ListView 的单个行项

* * *

***有用的链接：*** [ListView 项目中的按钮](http://androidforbeginners.blogspot.in/2010/03/clicking-buttons-in-listview-row.html)

# java - 如何在 JTextArea 中显示 JTree 文件

> ID：11363367
> 
> 赞同：0
> 
> 时间：2012-07-06T13:41:57.300
> 
> 标签：java, swing, jtree, jtextarea

在我的程序中，我有一个`JTree`由许多文件夹和文件填充的。当您在 中选择一个文件时，`JTree`我希望该文件显示在`JTextArea`.

我不，你可以`getLastSelectedPathComponent()`用来获取最后一个选定的项目，`JTree`它可以用来从树中获取选定的文件，但这是树的一个节点......有没有办法从这个节点获取文本，比如使用一个`FileReader`和一个`BufferReader`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:38:40.067

我会将`File`对象放在树中并使用单元格渲染器根据需要显示（渲染）它们。

有关示例，请参见[文件浏览器 GUI 。](https://codereview.stackexchange.com/questions/4446/file-browser-gui)该示例还演示了如何检索所选文件或目录的详细信息。它使用`Desktop`类来显示（/打印/编辑）文件。

![](../Images/23cdb3ac31746680c2928b202bef1f23.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T13:46:20.397

不是直接的。你需要做什么：

1.  将文件名（如果您想让您的生活更轻松，请使用路径）存储在节点中。`DefaultMutableTreeNode`为此扩展。
2.  选择一个节点后，从中读取文件名。
3.  使用通常的 Java IO API 将文件作为文本读取

# android - Android 上的 AIR 应用程序崩溃

> ID：11363368
> 
> 赞同：4
> 
> 时间：2012-07-06T13:41:57.317
> 
> 标签：android, air, crash, adobe

我使用 Adob​​e AIR 和 FlashDevelop 为 Android 开发了一个应用程序。不幸的是，我的应用程序在启动后崩溃（标准的“进程有 air.HelloWorld 已停止”消息）并且我无法设置调试器（冻结在“等待 Flash Player 连接到调试器”）。

当我尝试在 FlashDevelop 中启动它时 - 它可以工作。当我在模拟器上安装 .apk 并尝试启动它时，就会出现问题。

**主文件**

```
import flash.desktop.NativeApplication;
import flash.events.Event;
import flash.display.Sprite;
import flash.display.StageAlign;
import flash.display.StageScaleMode;
import flash.ui.Multitouch;
import flash.ui.MultitouchInputMode;

public class Main extends Sprite {

    public function Main() : void {
        stage.scaleMode = StageScaleMode.NO_SCALE;
        stage.align = StageAlign.TOP_LEFT;
        stage.addEventListener(Event.DEACTIVATE, deactivate);

        // touch or gesture?
        Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT;

        // entry point
        var main : FlixelMain = new FlixelMain();
        addChild(main);
    }

    private function deactivate(e:Event) : void {
        // auto-close
        NativeApplication.nativeApplication.exit();
    }

} 
```

**FlixelMain.as**

```
import org.flixel.*;

public class FlixelMain extends FlxGame {

    public function FlixelMain() {
        FlxG.mobile = true;
        super(480, 800, MenuState, 1, 60);
    }

} 
```

**应用程序.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<application xmlns="http://ns.adobe.com/air/application/3.1">

  <id>air.HelloWorld</id>
  <versionNumber>0.1</versionNumber>
  <supportedProfiles>mobileDevice</supportedProfiles>
  <filename>HelloWorld</filename>
  <name>HelloWorld</name>

<android>
    <manifestAdditions><![CDATA[<manifest android:installLocation="auto">
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-feature android:required="true" android:name="android.hardware.touchscreen.multitouch" />
    </manifest>]]>
    </manifestAdditions>

  </android>

  <initialWindow>
    <title>HelloWorld</title>
    <content>HelloWorld.swf</content>
    <visible>true</visible>
    <fullScreen>true</fullScreen>
    <!--<autoOrients>false</autoOrients>-->
    <!--<aspectRatio>landscape</aspectRatio>-->
    <renderMode>cpu</renderMode>
    <systemChrome>standard</systemChrome>
    <aspectRatio>portrait</aspectRatio>
  </initialWindow>

  <icon>
    <image72x72>icons/icon_72.png</image72x72>
    <image114x114>icons/icon_114.png</image114x114>
    <image512x512>icons/icon_512.png</image512x512>
  </icon>
</application> 
```

**导出的 APK 文件**

[http://dynax.boo.pl/HelloWorld.apk](http://dynax.boo.pl/HelloWorld.apk)

如果有人可以在他的设备上检查此文件或知道此问题，我将不胜感激 :) 问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:53:41.697

这可能与您的网络连接速度有关。

如果您通过慢速连接运行调试器，例如来自您设备的 WIFI 连接，则调试器似乎无法跟上通过网络发送的数据量。当您遇到断点时，堆栈跟踪和局部变量都会通过网络发送。

如果您的连接造成瓶颈，它可能会减慢速度，让应用程序认为它已崩溃然后退出。

在更快的网络连接上运行调试器可能会解决您的问题。

# android - 类似于 Android 的导航控制器？

> ID：11363375
> 
> 赞同：1
> 
> 时间：2012-07-06T13:42:18.750
> 
> 标签：android, navigationcontroller

我是 Android 开发的新手，但我在 iOS/Java 开发方面的水平很高。

我想使用导航控制器之类的东西在我的 Android 应用程序中的视图（我知道的活动）之间旅行。我应该使用什么？

感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:44:57.593

查看旧类 android.app.TabActivity 或称为 Fragment 的新类。最后 TabActivity 应该在大多数 IDE 中都可用。

以下是选项卡活动的示例：

```
public class TabbedActivity extends TabActivity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Resources res = getResources(); // Resource object to get Drawables
        TabHost tabHost = getTabHost();  // The activity TabHost
        TabHost.TabSpec spec;  // Resusable TabSpec for each tab
        Intent intent;  // Reusable Intent for each tab

        // Create an Intent to launch an Activity for the tab (to be reused)
        intent = new Intent().setClass(this, TasksActiveListActivity.class);

        // Initialize a TabSpec for each tab and add it to the TabHost   
        spec = tabHost.newTabSpec("artists").setIndicator("Tasks",
                          res.getDrawable(R.drawable.ic_tab_artists))
                      .setContent(intent);
        tabHost.addTab(spec);

        // Do the same for the other tabs
        intent = new Intent().setClass(this, StatisticActivity.class);
        spec = tabHost.newTabSpec("albums").setIndicator("Statistic",
                          res.getDrawable(R.drawable.ic_tab_artists))
                      .setContent(intent);
        tabHost.addTab(spec);  

        intent = new Intent().setClass(this, PurchaseActivity.class);
        spec = tabHost.newTabSpec("albumz").setIndicator("Bonuses",
                          res.getDrawable(R.drawable.ic_tab_artists))
                      .setContent(intent);
        tabHost.addTab(spec);

        tabHost.setCurrentTab(0);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-15T17:53:57.157

使用片段而不是旧的和已弃用的 TabActivity
请查看这篇文章： [Android UINavigationController-like feature](https://stackoverflow.com/q/3251934/3187366)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:48:49.967

意图用于在视图/活动之间导航。检查[意图](http://developer.android.com/reference/android/content/Intent.html)

# watir - Watir - 专注于没有标题的窗口

> ID：11363388
> 
> 赞同：0
> 
> 时间：2012-07-06T13:42:57.113
> 
> 标签：watir, title

我在 RadRails IDE 中使用 watir。我需要按标题附加一个新窗口，但在我的 Web 应用程序中可能会出现错误，标题丢失。所以我不能使用代码： `ie3=Watir::IE.attach(:title, 'Mt Title')`.

页面已加载，我可以在那里执行一些操作。有没有办法专注于不使用页面标题的窗口？或者我如何定义页面标题？

也许有可能通过名称或其他属性选择一个窗口，如果我不知道确切的名称，那么我可以定义它或定义所有打开的窗口的名称吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:17:02.860

如果只有一个 IE 窗口，这将起作用：

```
browser = Watir::Browser.attach(:title, //) 
```

如果要检查是否有带有标题的页面，请尝试以下操作：

```
begin
  browser = Watir::Browser.attach(:title, "teh codez")
rescue Watir::Exception::NoMatchingWindowFoundException
  puts "could not find browser"
end 
```

# java - JFreeChart BarChart - 类别标记

> ID：11363393
> 
> 赞同：2
> 
> 时间：2012-07-06T13:43:11.730
> 
> 标签：java, jfreechart, bar-chart, markers

我正在创建一个包含多个频带作为类别轴的条形图。我想要做的是显示这些频段的可见分组：

例如：

Freq x1 ~ Freq x2 = Band y（因此域轴具有类别 x1、x1.1、x1.2 到 x2 的值） Freq x3 ~ Freq x4 = Band z (x3, x3.1 .....x4)

我想要做的是在图表中显示波段 Y 和波段 Z 的标记。请注意，根据我可能获得的数据集，并非所有类别都可能存在。比如说，对于第一个例子，我有 x1 到 x1.6 的值，所以波段标记将从 x1 到 x1.6

我希望我能解释我的要求。这在 JFreeChart 中可行吗？如果是这样，我该如何实现这一目标？

只是为了澄清一点，这是我想要实现的目标[的图片：](https://i.stack.imgur.com/NBkQg.png)![在此处输入图像描述](../Images/d824e53e85dbc28e9060d9a93dbf7e3a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T08:25:20.670

您的乐队是否与类别相对应？如果他们这样做，您可以使用`CategoryMarker`

```
CategoryMarker marker = new CategoryMarker("Category 3");
marker.setLabel("Band Y");
marker.setPaint(Color.red);
marker.setOutlinePaint(Color.red);
marker.setAlpha(0.5f);
marker.setLabelAnchor(RectangleAnchor.TOP);
marker.setLabelTextAnchor(TextAnchor.TOP_CENTER);
marker.setLabelOffsetType(LengthAdjustmentType.CONTRACT);
plot.addDomainMarker(marker, Layer.BACKGROUND); 
```

![带有 CategoryMarker 的条形图](../Images/90b90716de965f360e1f3667c9825603.png)

我不知道如何创建 Mutli-CategoryMarker 但您可以通过调整`ItemMargin`and`CategoryMargin`并添加其他内容来创建类似的东西`CategoryMarkers`

```
{
  CategoryMarker marker = new CategoryMarker("Category 2");
  marker.setLabel("Band X");
  marker.setLabelAnchor(RectangleAnchor.TOP);
  marker.setLabelTextAnchor(TextAnchor.TOP_CENTER);
  marker.setLabelOffsetType(LengthAdjustmentType.CONTRACT);
  plot.addDomainMarker(marker, Layer.BACKGROUND);
  }
  {
  CategoryMarker marker = new CategoryMarker("Category 3");
  plot.addDomainMarker(marker, Layer.BACKGROUND);
  }
  renderer.setItemMargin(0.0);
  CategoryAxis axis = plot.getDomainAxis();
  axis.setCategoryMargin(0);
} 
```

![在此处输入图像描述](../Images/fe8a799cfa08dcb923c84aacf275a0b8.png)

您可以创建一种方法来添加多个标记，例如

```
private void addMarkers(List<Comparable> keys){
... 
```

更正确的解决方案可能是编写自己的渲染器实现和相关代码

# javascript - Javascript 编码 i18n JSON 口音问题

> ID：11363394
> 
> 赞同：0
> 
> 时间：2012-07-06T13:43:24.430
> 
> 标签：javascript, internationalization

我有 i18n 库的编码问题。实际上，我不能在我的 JSON 文件中使用重音，因为它没有很好地编码。我试过了

```
$.ajaxSetup({
    scriptCharset: "utf-8",
    cache: false
}); 
```

并且还添加了

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

在我的标题中，它仍然不起作用。任何想法？它可能是什么？

这是示例页面的链接：

```
http://m0si.com/lang/index.html?setLng=fr-FR 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:50:47.827

[http://m0si.com/lang/locales/fr-FR/ns.special.json](http://m0si.com/lang/locales/fr-FR/ns.special.json)中的 json 文件编码不正确。尝试在那里强制标头为 utf-8。

PS：您的页面上有两次 $.ajaxSetup 命令。

# gcc - 尽管缺少共享库和相关符号，如何链接可执行文件？

> ID：11363398
> 
> 赞同：3
> 
> 时间：2012-07-06T13:43:27.067
> 
> 标签：gcc, linker, ld

尽管缺少共享库（以及相关的缺失符号），我如何强制 gcc/ld 继续并链接（部分）可用的可执行文件？

上下文：我有一个仅作为 32 位 ELF 二进制 blob (libEposCmd.so) 分发的硬件驱动程序。它取决于我从上下文中知道实际上并未使用的库（libftd2xx.so）（ftdi 的东西用于usb-serial 适配器，我没有使用）。

```
gcc main.o -o epos_server -m32 -L/usr/lib32 -L/usr/local/lib32 -lEposCmd
/usr/bin/ld: warning: libftd2xx.so.0, needed by /usr/local/lib32/libEposCmd.so, not found (try using -rp
ath or -rpath-link)
main.o: In function `main':
/usr/local/lib32/libEposCmd.so: undefined reference to `FT_Write'
/usr/local/lib32/libEposCmd.so: undefined reference to `FT_SetDataCharacteristics'
/usr/local/lib32/libEposCmd.so: undefined reference to `FT_GetDeviceInfoDetail'
/usr/local/lib32/libEposCmd.so: undefined reference to `FT_SetFlowControl'
... 
```

我唯一未定义的引用是 FT_*，我相当肯定它们都属于 libftd2xx。

丑陋的黑客是可以接受的；这是研究代码，我们希望尽快用更好的 linux 支持替换这个硬件（maxon epos2 电机驱动器）。

更新： .so 没有被剥离，所以应该可以为缺失的函数提取原型......

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-06T13:54:40.750

最快的方法是创建一个带有缺失函数的虚拟库并与之链接。

# javascript - Javascript如何在特定时间后清除间隔

> ID：11363401
> 
> 赞同：11
> 
> 时间：2012-07-06T13:43:33.027
> 
> 标签：javascript, setinterval

```
setInterval("FunctionA()", 1000); 
```

现在我如何在 5 秒后清除这个间隔，以便我可以实现 -

```
var i = setInterval("FunctionA()", 1000);
(After 5 seconds)
clearInterval(i); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-06T13:44:54.113

您可以使用以下`setTimeout`功能执行此操作：

```
var i = setInterval(FunctionA ,1000);
setTimeout(function( ) { clearInterval( i ); }, 5000); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-10-24T14:27:45.227

使用 setTimeout 来清除Interval 并不是一个理想的解决方案。它会起作用，但它会在每个时间间隔触发你的 setTimeout 。如果您只清除间隔，这是可以的，但如果您正在执行除清除间隔之外的其他代码，则可能会很糟糕。更好的解决方案是使用计数器。如果您的间隔每 1000 毫秒/1 秒触发一次，那么您知道它是否触发了 5 次，它是 5 秒。这样干净多了。

```
count=0;
var x=setInterval(function(){
  // whatever code
  if(count > 5) clearInterval(x);
  count++;
}, 1000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-27T18:36:23.083

```
function intervalGap(){
    let no = 1;
    setInterval(function(){
    if(no < 11){
        console.log(no);
        no++;
    }else{
        clearInterval(this);
    }}, 500); // for every half second
}
intervalGap(); 
```

# validation - Dreamweaver cs6 Spry 验证

> ID：11363404
> 
> 赞同：0
> 
> 时间：2012-07-06T13:43:37.230
> 
> 标签：validation, dreamweaver, spry

我有一个文本字段和一个 spry 验证文本字段。在 spry 属性中，我将最大字符值更改为 50，选中 required 和 blurr。

当我测试页面时，我会立即收到所有错误消息（“需要值”、“超过最大字符数”），并且文本字段没有着色。在dreamweaver 的预览中看起来不错.. 但是当我在浏览器中运行它时它失败了。有什么提示吗？

- 固定的 -

我没有将 spry assets 文件夹复制到测试服务器。我只在我的本地站点文件夹中拥有它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:00:46.697

我在错误消息中遇到了类似的问题，这非常令人沮丧。我最终通过[http://cssmenumaker.com/dreamweaver-css-menu-extension](http://cssmenumaker.com/dreamweaver-css-menu-extension)找到了解决方案——我肯定会推荐他们。

# php - PHP - 复杂的字符串到多维数组

> ID：11363406
> 
> 赞同：-1
> 
> 时间：2012-07-06T13:43:49.360
> 
> 标签：php, arrays, multidimensional-array

我有一个字符串，看起来像：

```
["DZ_Backpack_EP1",[["M4A1"],["M16A2]],[["ItemWaterbottle","FoodSteakCooked","ItemPainkiller","ItemSodaPepsi","ItemBloodbag","ItemMorphine","ItemEpinephrine","ItemBandage"],[1,2,1,1,1,1,1,1]]] 
```

Ant 我需要得到这个数组：

```
DZ_Backpack_EP1 = array(
                 ['weapons'] => array (
                             [0] => 'M4A1',
                             [1] => 'M16A2' 
                             ),
                 ['items'] => array (
                             ['ItemsList'] => array ( 
                                 [0] = > 'ItemWaterbottle',
                                 [1] = > 'FoodSteakCooked',
                                 [2] = > 'ItemPainkiller',
                                 [3] = > 'ItemSodaPepsi',
                                 [4] = > 'ItemBloodbag',
                                 [5] = > 'ItemMorphine',
                                 [6] = > 'ItemEpinephrine',
                                 [7] = > 'ItemBandage'),
                             ['ItemsCount'] => array ( 
                                 [0] = > 'ItemWaterbottle',
                                 [1] = > 'FoodSteakCooked',
                                 [2] = > 'ItemPainkiller',
                                 [3] = > 'ItemSodaPepsi',
                                 [4] = > 'ItemBloodbag',
                                 [5] = > 'ItemMorphine',
                                 [6] = > 'ItemEpinephrine',
                                 [7] = > 'ItemBandage'
                                 )
                             )
                 ) 
```

我尝试将这个示例[PHP - 字符串编辑为多维数组](https://stackoverflow.com/questions/9030543/php-string-to-multidimensional-array#_=_)，但没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T13:44:49.140

看起来你只需要[`json_decode`](http://php.net/json-decode).

# objective-c - iOS 应用间通信在后台

> ID：11363407
> 
> 赞同：0
> 
> 时间：2012-07-06T13:43:55.423
> 
> 标签：objective-c, ios, ipc, url-scheme

有一个平台应用程序连接到远程服务器并将所需信息存储在其本地存储库中，即 CoreData 中。我想在这个平台应用程序上开发我的应用程序。由于无法访问其本地存储，因此我必须以某种方式与之通信。我能够使用 URL 方案发送/接收数据；然而，用户不断在应用程序之间切换是令人沮丧的。

是否可以通过 URL 方案（或任何其他方式）与另一个应用程序通信而不将其置于前台？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:48:36.267

除了少数例外，例如在后台接收 CoreLocation 数据或通过本地通知被通知唤醒，iOS 中的应用程序不可能“在后台运行”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-26T05:55:48.333

这是 Stack Overflow 上一个很常见的查询，iOS 官方回复可以在这里找到[这里](https://stackoverflow.com/questions/40283590/inter-application-communication-in-ios)[和](https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Inter-AppCommunication/Inter-AppCommunication.html)这里[有](https://stackoverflow.com/questions/4264652/inter-application-communication-in-iphone) SO 文章。

但是，后台数据交换不会成为问题，因为后台应用程序规则有限制（因此 URL 传输将在您的第二个应用程序的前台进行）

# debugging - 用于模拟具有多个条件的子查询的 xpath 表达式

> ID：11363408
> 
> 赞同：2
> 
> 时间：2012-07-06T13:43:55.460
> 
> 标签：debugging, xpath, subquery, predicate, xpath-1.0

我必须使用 xpath 1.0 在两个不同节点上使用两个标准在 xml 中找到一个值

我试着用一个例子来解释：如果我们有以下xml

```
<root>
<obj>
    <index>5</index>
    <datalist>
        <data>
            <code>X</code>
            <value>AAA</value>
        </data>
        <data>
            <code>Y</code>
            <value>BBB</value>
        </data>
    </datalist>
</obj>
<obj>
    <index>3</index>
    <datalist>
        <data>
            <code>Z</code>
            <value>CCC</value>
        </data>
    </datalist>
</obj>
<obj>
    <index>4</index>
    <datalist>
        <data>
            <code>X</code>
            <value>DDD</value>
        </data>
    </datalist>
</obj>
<obj>
    <index>2</index>
    <datalist>
        <data>
            <code>Y</code>
            <value>EEE</value>
        </data>
    </datalist>
</obj> 
```

我们想在最小的范围内检索 with `<value>`（在`<obj/data>`我们的例子中，我们将有 DDD 作为结果）。`<code=X>``<obj>``<index>`

我尝试了以下表达式，但它似乎不起作用：

```
/root/obj[datalist/data/code='X'][not(preceding-sibling::obj/index <= index)
and not(following-sibling::obj/index <= index)]/datalist/data/value 
```

但它不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T23:10:48.833

经过一段时间的凝视后，我想我已经弄清楚发生了什么。简而言之，您在`code='X'`for 的初始匹配中强制执行`obj`，而不是在兄弟轴中强制执行。

换句话说，您是在说：“给我找一个`obj`节点，它 a) 没有具有 lower 的兄弟姐妹`index`，并且 b) 有后代`code='X'`。没有节点符合这些标准。

当然，您的意思是只考虑*也*有后代的兄弟姐妹`code='X'`，而不是任何*兄弟姐妹*。

试试这个（可在[这个 XML Playground](http://www.xmlplayground.com/FCbbdA)上运行）

```
root/obj[datalist/data/code='X'][
    not(preceding-sibling::obj[
        datalist/data/code='X'
    ]/index &lt; index)
    and
    not(following-sibling::obj[
        datalist/data/code='X'
    ]/index &lt; index)
]/datalist/data/value 
```

# java - Selenium Firefox IDE 到 JAVA 代码作为参数化

> ID：11363410
> 
> 赞同：2
> 
> 时间：2012-07-06T13:44:05.013
> 
> 标签：java, selenium, selenium-ide

我想准备一个参数化的硒测试。我研究过 Selenium Firefox IDE 的参数化。没有问题。它使用一个JS文件等等。但是当我将它作为 Java 代码导出为 Junit 时，从 js 文件中获取值作为参数不起作用。

这是 selenium HTML 和导出的 Java 代码；

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="http://www.google.com.tr/" />
<title>Parameterization_Example</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">New Test</td></tr>
</thead><tbody>
<tr>
    <td>open</td>
    <td>/</td>
    <td></td>
</tr>
<tr>
    <td>storeEval</td>
    <td>email</td>
    <td>email</td>
</tr>
<tr>
    <td>storeEval</td>
    <td>password</td>
    <td>password</td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>id=gbi4t</td>
    <td></td>
</tr>
<tr>
    <td>type</td>
    <td>id=Email</td>
    <td>${email}</td>
</tr>
<tr>
    <td>type</td>
    <td>id=Passwd</td>
    <td>${password}</td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>id=signIn</td>
    <td></td>
</tr>
</tbody></table>
</body>
</html> 
```

```
import java.util.regex.Pattern;
import java.util.concurrent.TimeUnit;

import com.thoughtworks.selenium.SeleneseTestCase;
import org.junit.*;

import static org.junit.Assert.*;
import static org.hamcrest.CoreMatchers.*;

import org.openqa.selenium.*;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.htmlunit.HtmlUnitDriver;
import org.openqa.selenium.support.ui.Select;

public class SeleniumTest extends SeleneseTestCase {
    @Before
    public void setUp() throws Exception {
        System.setProperty("webdriver.chrome.driver", "/home/ahmet/Desktop/chromedriver");
        WebDriver driver = new ChromeDriver();
        String baseUrl = "http://www.google.com.tr";
        selenium = new WebDriverBackedSelenium(driver, baseUrl);
    }

    @Test
    public void testU() throws Exception {
        selenium.open("/");
        String email = selenium.getEval("email");
        String password = selenium.getEval("password");
        selenium.click("id=gbi4t");
        selenium.waitForPageToLoad("30000");
        selenium.type("id=Email", email);
        selenium.type("id=Passwd", password);
        selenium.click("id=signIn");
        selenium.waitForPageToLoad("30000");
    }

    @After
    public void tearDown() throws Exception {
        selenium.stop();
    }

} 
```

当它试图用`getEval`函数获取价值时，`SeleniumException`就会发生。

有没有办法为直接从 Selenium Firefox IDE 生成的 Java 代码提供参数化？

注意：代码更新了一点，只是为了与 ChromeDriver 一起工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T05:13:30.953

使用以下代码创建 SelectItem.java 文件。

```
public class SelectItem {

    private String label;
    private String value;

    public SelectItem(String label, String value) { 
        this.label = label; 
        this.value = value;
    }
    public String getLabel() {
        return label;
    }
    public void setLabel(String label) {
        this.label = label;
    }
    public String getValue() {
        return value;
    }
    public void setValue(String value) {
        this.value = value;
    }
} 
```

然后创建 SeleniumTest.java 文件并在 @Test 部分添加以下代码。

```
@Test
public void testU() throws Exception
{
java.util.List<SelectItem> selectItems = new java.util.ArrayList<SelectItem>();
selectItems.add(new SelectItem("Email1","Password1"));
selectItems.add(new SelectItem("Email2","Password2"));

for(SelectItem selItem:selectItems)
{
String user = selItem.getLabel();
String password = selItem.getValue();
selenium.click("id=gbi4t");
selenium.type("id=Email", email);
selenium.type("id=Passwd", password);
selenium.click("id=signIn");
}
} 
```

# android - Android上的jquery移动表单输入文本

> ID：11363411
> 
> 赞同：3
> 
> 时间：2012-07-06T13:44:06.817
> 
> 标签：android, jquery, mobile, cordova

我正在使用 Jquery Mobile 在 Android 上使用 Cordova-Phongap 1.9.0 制作应用程序。我正在尝试制作类似于以下示例的输入文本表单

```
<div data-role="fieldcontain">
<label for="name">Text Input:</label>
<input type="text" name="name" id="name" value=""  />
</div> 
```

当我在设备或虚拟设备上尝试时，焦点在输入类型上，我看到虚拟键盘，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T03:34:52.100

对我有用的是去 stock index.css 文件并改变

```
-webkit-user-select: none;                  /* prevent copy paste, to allow, change 'none' to 'text' */ 
```

到

```
-webkit-user-select: text;                  /* prevent copy paste, to allow, change 'none' to 'text' */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:56:18.887

我在使用 Android 和 Phonegap 1.9.0 的表单输入时遇到了非常相似的问题。就我而言，这是由于使用了页面顶部的菜单。

```
position:fixed;
z-index: 1; 
```

一旦我删除了这个 CSS，表单就会再次工作（尽管我的菜单不再像我想要的那样固定......）

# webpage - 确定数据包捕获中的对象与哪个网页相关联

> ID：11363413
> 
> 赞同：1
> 
> 时间：2012-07-06T13:44:09.867
> 
> 标签：webpage, capture, packet, wireshark

我目前正在尝试进行数据包捕获并向后工作以确定哪些对象与每个页面请求相关联。例如，如果一个数据包捕获包含 2 个不同网页的请求，我希望能够为每个对象（TCP 流）确定它与哪个根页面相关联。是否有捷径可寻？

我知道有一些工具可以隔离 TCP 流并将其中的数据提取出来，但是我不打算复制网页。我只是希望能够将每个流与请求它的原始页面相关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:59:43.960

您要做的是重建浏览会话的“调用图”。对于简单的分析，您可以只检查 HTTP 标头。[Bro](https://stackoverflow.com/a/11081321/1170277)使这个过程非常方便。如果站点*A*加载站点*B*，则*A*通常显示在*B*`Referer`的标题中。

 *但是，如果您以完整性为目标，则此任务将成为一项艰巨的挑战：您需要解析 HTTP 正文负载甚至 JavaScript 以确定在客户端运行时创建的所有 URL，例如，通过 AJAX、iframe 和朋友.*

# javascript - 如何在jquery中组合两个变量

> ID：11363415
> 
> 赞同：-1
> 
> 时间：2012-07-06T13:44:16.100
> 
> 标签：javascript

我有两个变量，例如：

```
<script language="javascript" type="text/javascript">
    var count = 1;
    calc_my_project_ + count = Math.round( count * 268 / 100); // It shoud be calc_my_project_1 and next time it shoud be calc_my_project_2

    count += count + 1;
</script> 
```

现在结果是 calc_my_project_ + count 。我怎样才能做到这一点 ？

编辑：这是我的主要代码：

```
<script language="javascript" type="text/javascript">
    var count = 1;
    var str = 'calc_my_project_';
    var str2 = 'my_pro_';
    var result = str + count;
    result = Math.round( @Html.DisplayFor(x => item.ProgressPercent) * 268 / 100);
    var secresult = str2 + count;
    secresult = "-" + result + "px 0";

    var jq3 = jQuery.noConflict(); 
    jq3(document).ready(function () {
        jq3("#bar-pro-@barcount1st").css({ "background-position": secresult });
        if (@Html.DisplayFor(x => item.ProgressPercent) == 100) {
            jq3("#bar-pro-@barcount1st").css({ "background-image": "none" });
            jq3("#bar-pro-@barcount2st").css({ "background-image": "none" });
        };
    });
    count++;
</script> 
```

result 和 secresult 返回一个固定值，我不想这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:47:03.613

你可以这样做：

```
var myObj = {};
myObj['my_project_' + count] = 'some value';

count++; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:50:21.563

尝试这样的事情

```
<script language="javascript" type="text/javascript">
    var count = 1;
    var str = 'calc_my_project_';

    var result = str + count = Math.round( count * 268 / 100); 

    count += count + 1;
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T14:01:15.000

如果要设置“全局”变量，可以使用全局变量容器窗口：

```
window["calc_my_project_"+ count ] = Math.round( count * 268 / 100); 
```

或者，您可以使用 eval 但涉及更多风险：

```
eval ("calc_my_project_"+ count +"= Math.round( count * 268 / 100)") ; 
```

否则，如果你不需要，全局变量，你可以使用*baszz提供的解决方案*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T13:52:56.190

使用[数组](http://www.w3schools.com/js/js_obj_array.asp)。

```
var myCount = new Array();
var count = 0;
$("#click").click(function() {
   myCount[count] = Math.round( count * 268 / 100);
    console.log(count + ' - ' + myCount[count]);
    count++;
});​ 
```

小提琴：http: [//jsfiddle.net/johnkoer/yyakv/1/](http://jsfiddle.net/johnkoer/yyakv/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T13:45:49.370

你可以将你的 calc_my_project_ 变量存储在一个数组中，每次都遍历它

```
obj = new Array(calc_my_project_1, calc_my_project2, ...);
obj[0] = 1;
obj[1] = 2;
... 
```

# powershell - 使用 Powershell，如何检测表格单元格中的换行符是 MS Word 文档

> ID：11363422
> 
> 赞同：0
> 
> 时间：2012-07-06T13:44:32.010
> 
> 标签：powershell

我正在使用 Powershell 阅读包含表格的 word (2003) 文档。表中的文本具有我需要捕获以进行处理的换行符。但是当我使用 Write-host 或 Write-output 时，会忽略换行符，并且打印多个值，就好像它是一行一样。

如何打破单元格内的换行符？我正在使用的代码如下：

```
$objWord = New-Object -Com Word.Application

$filename = 'C:\Chicago_NewUser.doc'
$objDocument = $objWord.Documents.Open($filename)

$LETable = $objDocument.Tables.Item(1)
$LETableCols = $LETable.Columns.Count
$LETableRows = $LETable.Rows.Count

Write-output "Starting to write... "

for($r=1; $r -le $LETableRows; $r++) {
    for($c=1; $c -le $LETableCols; $c++) {
        #Write-host $r "x" $c
        $content = $LETable.Cell($r,$c).Range.Text
        Write-output $content
    }
}
$objDocument.Close()
$objWord.Quit()
$rc = [System.Runtime.Interopservices.Marshal]::ReleaseComObject($objWord) 
```

Word 文档可在[https://docs.google.com/document/d/1W0usG4ASsvd3PqQ20l7P8rq0hWBsYlrI0iM1S5ZcumU/edit](https://docs.google.com/document/d/1W0usG4ASsvd3PqQ20l7P8rq0hWBsYlrI0iM1S5ZcumU/edit)获得 有问题的值是：SET REG=04 SET BLD=01

但是 powershell 脚本将其打印为 SET REG=04SET BLD=01

本人回答：

我想我想通了。

我可以使用这行代码检测换行符：

```
Write-output $content.contains("`r") 
```

# maven-3 - Maven：mavent--ant-run 不支持属性

> ID：11363424
> 
> 赞同：0
> 
> 时间：2012-07-06T13:44:50.653
> 
> 标签：maven-3, maven-antrun-plugin

目前我正在研究一个 Maven 构建脚本，我的下一个问题是将源文件复制到目标文件夹中。我找到了这个[线程](https://stackoverflow.com/questions/4257858/maven-copy-files-without-subdirectory-structure)，它工作正常，除非我不使用“flattern”属性。我知道计算机使所有事情都正确，但我想知道为什么构建会失败。

这是我使用 maven antrun 插件的代码：

```
<build>
 <plugins>
  <plugin>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.7</version>
    <executions>
     <execution>
      <phase>process-resources</phase>
      <configuration>
       <target>
        <copy todir="${project.basedir}/target"  flattern="true" overwrite="true">
         <fileset dir="${project.basedir}/src/main"/>
        </copy>
       </target>
      </configuration>
      <goals>
       <goal>run</goal>
      </goals>
     </execution>
    </executions>
  </plugin>
 </plugins>
</build> 
```

我得到的错误信息是

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-antrun-plugin:1.7:run (default) on project setup_core: An Ant BuildException has occured: copy doesn't support the "flattern" attribute
[ERROR] around Ant part ...<copy todir="C:\Projekte\CQ5_Migration\setup\core_upload/target" overwrite="true" flattern="true">... @ 4:101 in C:\Projekte\CQ5_Migration\setup\core_upload\target\antrun\build-main.xml: The <copy> type doesn't support the "flattern" attribute.
[ERROR] -> [Help 1] 
```

我是否监督过某事，如果有，缺少的事实是什么？

再次感谢你的帮助 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:49:38.950

它应该是“扁平化”而不是“扁平化”。

删除“r”。

# vba - 通过但在Word模板中获取Word中TextBox的值

> ID：11363427
> 
> 赞同：0
> 
> 时间：2012-07-06T13:44:57.243
> 
> 标签：vba, ms-word, word-template

背景：我想使用来自 TextBox 的特定输入文本作为 SaveAs 对话框中的默认文件名。

我在我的文档中实现了以下 VBA 脚本，一个 Word 2010 模板 .dotm

```
Sub FileSaveAs()

'for testing
Dim fileName As String
fileName = Me.tb_myTextBox.Value & "_MyFileNameToSave"
MsgBox fileName

'use specific file name in save dialog
With Dialogs(wdDialogFileSaveAs)
  .Name = fileName
  .Show
 End With

End Sub 
```

它工作正常，当我运行它时。我保存了 .dotm，将其关闭并从 Windows 资源管理器中重新打开（表示“最终用户”）。但是在这种情况下，意味着在以“最终用户”身份打开模板文档后（这样我就可以从中保存一个新文档而不覆盖模板），即使我输入了一些内容，TextBox 的内容/值也是空的进去。

那么，如何在模板的“文档模式”中读出TextBox的数据呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-01-03T12:51:20.147

据推测，OP的意图是这样的：

```
Sub FileSaveAs()
Dim StrNm As String
With ActiveDocument
  StrNm = Split(.Shapes(1).TextFrame.TextRange.Text, vbCr)(0) & "_MyFileNameToSave"
  'use specific file name in save dialog
  With Dialogs(wdDialogFileSaveAs)
    .Name = StrNm
    .Show
  End With
End With
End Sub 
```

其中 .Shapes(1) 标识特定的文本框 Shape 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T14:47:34.293

> 如何在模板的“文档模式”中读出 TextBox 的数据？

不明白你的意思。这对我有用：

创建一个表格：

```
Private Sub btn_OK_Click()
    Dim fileName As String
    fileName = tb_myTextBox.Value & "_MyFileNameToSave"
    With Dialogs(wdDialogFileSaveAs)
      .name = fileName
      .Show
     End With
End Sub 
```

创建一个子来调用这个表单：

```
 Sub FileSaveAs()
    UserForm1.Show
End Sub 
```

这都保存在模板/.dotm 中。

现在，从模板创建一个文档（双击模板以启动文档）。Alt + F8 并从模板运行宏（您可能必须从“宏输入”下拉菜单中选择模板）。结果：我的表单出现了，我输入了文档的名称，按确定，然后出现 Word 另存为对话框，其中包含我为文档提供的名称。

# javascript - JMeter - 如果先前测试的正则表达式可以提取某个值，则仅运行后续测试？

> ID：11363432
> 
> 赞同：1
> 
> 时间：2012-07-06T13:45:15.827
> 
> 标签：javascript, regex, jmeter

我正在 JMeter 中运行一系列 Web 服务测试，我想知道如果前一个测试中的正则表达式提取器由于空响应或其他原因而无法提取值，是否有办法跳过测试。我知道我需要使用 If 控制器，但我不知道我应该把什么作为条件。上一个测试的正则表达式如下：

```
Reference Name: alarmid
Regular Expression: alarmStatus="raised" [^>]+ alarmId="(.+?)" 
```

因此，如果它找不到具有“引发”状态的警报 ID，我希望跳过下一个测试，因为 ${alarmid} 是它的参数，否则会出错 500。有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T10:30:59.430

您可以尝试将[Response Assertion](http://jmeter.apache.org/usermanual/component_reference.html#Response_Assertion)和[If Controller](http://jmeter.apache.org/usermanual/component_reference.html#If_Controller)与 javascript condition:结合使用`${JMeterThread.last_sample_ok} (check if last sample succeeded)`。

架构如下：

```
采样器 1
    响应断言- 检查响应中是否存在带有 alarmStatus="raised" 的 alarmId；
    正则表达式提取器 - 你的提取器来获取 alarmId；
如果控制器
条件 = ${JMeterThread.last_sample_ok}
    采样器 2 - 获取作为参数的采样器提取的 alarmId；

```

Response Assertion 将 Sampler 1 的状态设置为“failed”，如果没有找到对应的 alarmId，If Controller 的条件将被评估为“false”，Sampler 2 将被跳过。

更好的方法似乎是这样的：

1.  [为正则表达式提取器](http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor)的“默认值”字段设置值：（`Default Value: NOT_FOUND`如果正则表达式不匹配，将设置此值）；
2.  使用 javascript 比较 alarmId var 与默认值作为 If Controller 的条件：`"${alarmId}"!="NOT_FOUND"`- 如果不等于 Sampler 2，则执行。

在这种情况下，您不需要使用响应断言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:16:03.937

您可以使用变量。将正则表达式的结果保存到变量中，然后在 IF CONTROLLER 中使用此变量。

变量的语法是

```
${myVariable} 
```

这可以在 JMeter 的任何地方使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T08:40:47.197

在您的 IF 控制器中，使用：

```
"${alarmId}"  == "raised" 
```

# ajax - 如果 XMLHttp Open Method 向 URL 参数添加唯一 ID - 这是什么意思，如何完成？

> ID：11363437
> 
> 赞同：1
> 
> 时间：2012-07-06T13:45:35.910
> 
> 标签：ajax, header, message, unique-id

我需要帮助理解 AJAX。我正在阅读有关 W3C 学校的教程（创建一个在服务器上打开文本文件并在 div 中显示结果的按钮）

教程的一部分对我来说似乎很抽象，没有足够的解释。我确信这是我错过或不知道的先决条件，详情如下

为了避免响应向服务器发出的 XMLHttpRequest 获得缓存结果，本教程说需要在 XMLHttp Open Method 中的 URL 参数中添加一个唯一 ID，这已通过添加一个？，另一个字符 (t) 和文件扩展名后的 =，然后将随机数加入 URL（使用 Math.random()）。请参阅下面的代码。

一个简单的 GET 请求如下：

```
xmlhttp.open("GET","demo_get.asp,true); \\I can understand this 
```

添加到 URL 的唯一 ID

```
xmlhttp.open("GET","demo_get.asp?t=" + Math.random(),true);  \\ I can't undersatnd this 
```

“？” , 't' & 一个随机数生成器添加到 demo_get.asp - 为什么是 T，为什么不是 PQRZ ？为什么 ”？” .asp 之后

如果将任意字符添加到文件位置，编译器是否不应该发疯并报告错误。在这种情况下如何处理文件扩展后的 URL 部分 ?t= + Math.random()

在过去的 3 天里，这是一个非常痛苦和沮丧的案例，因为我不知道我在这里错过了 JS 的哪一部分，你把这个概念叫做什么，我在哪里可以阅读它？

除此之外，在发送数据时指定消息标头 - 什么是 HTTP 标头以及它们的含义。我如何决定 setRequestHeader() 方法的参数应该是什么？

请帮忙。Ajax 的其余部分对我来说很清楚。

（我还没有阅读第二部分 - 消息标题。我已经在这里询问了该查询以避免稍后发布另一个问题，以防万一它变得像 UNIQUE ID 概念一样难以捉摸和神秘 - 道歉以防万一一个直接简单的问题，我应该自己阅读）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:49:33.870

缓存将请求的 URL 与存在的 URL 进行比较，如果将唯一 id 添加到 URL，则它不匹配并且浏览器将其视为*新*的GET 请求，然后将其转发到服务器。这是绕过/禁用浏览器缓存的标准方法。

请参阅本文档以更好地了解浏览器缓存。见第 4 页，它解释了与上述相同的事情。

[http://www.f5.com/pdf/white-papers/browser-behavior-wp.pdf](http://www.f5.com/pdf/white-papers/browser-behavior-wp.pdf)

# android - 以编程方式创建可同步的 android 日历

> ID：11363440
> 
> 赞同：2
> 
> 时间：2012-07-06T13:45:37.830
> 
> 标签：android, calendar

我开发了一个应用程序功能来通过应用程序创建和同步本地电话日历。现在我必须在线同步这个日历，最好是通过本地电话帐户。我尝试通过帐户名称和类型扩展 URI 的内容值参数（请参阅下面的 API LVL < 8 参数列表），但在此之后运行到日历冻结。

```
_id
sync_account
_sync_account_type
_sync_id
_sync_version
_sync_time
_sync_local_id
_sync_dirty
_sync_mark
url
name
displayName
hidden
color
access_level
selected
sync_events
location
timezone
ownerAccount 
```

还有另一种方法可以创建在线可同步的谷歌日历吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:47:27.297

您不能以编程方式创建一个新的。而是解析所有可用的

```
Uri.parse("content://com.android.calendar/calendars",null, null, null, null); 
```

并将您的事件填写到现有事件中。

但请确保您的活动相同

```
sync_account 
```

和

```
_sync_account_type 
```

# sql-server - SQL Server 2008 查询抛出错误

> ID：11363441
> 
> 赞同：0
> 
> 时间：2012-07-06T13:45:40.320
> 
> 标签：sql-server

我正在使用以下查询在 SQL Server 2008 上检查它，我得到的错误是

> 消息 102，级别 15，状态 1，第 13 行 '.' 附近的语法不正确。

询问：

```
SELECT total_worker_time/execution_count AS AvgCPU  
, total_worker_time AS TotalCPU
, total_elapsed_time/execution_count AS AvgDuration  
, total_elapsed_time AS TotalDuration  
, (total_logical_reads+total_physical_reads)/execution_count AS AvgReads 
, (total_logical_reads+total_physical_reads) AS TotalReads
, execution_count   
, SUBSTRING
    (
      st.TEXT, (qs.statement_start_offset/2)+1, 
      (
        (
           CASE qs.statement_end_offset 
             WHEN -1 THEN datalength(st.TEXT)  
             ELSE qs.statement_end_offset  
             END - qs.statement_start_offset
         )/2
       ) + 1
    ) AS txt  
, query_plan
FROM sys.dm_exec_query_stats AS qs  
cross apply sys.dm_exec_sql_text(qs.sql_handle) AS st  
cross apply sys.dm_exec_query_plan (qs.plan_handle) AS qp 
ORDER BY 1 DESC 
```

第 13 行是

```
FROM sys.dm_exec_query_stats AS qs 
```

不知道是什么问题

我的 SQL Server 版本是：

```
Microsoft SQL Server 2008 (RTM) - 10.0.1600.22 (X64)   
Standard Edition (64-bit) on Windows NT 6.1 <X64> (Build 7600) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:54:20.477

您的数据库处于 2000 兼容模式。执行此操作后，您的查询将起作用：

```
ALTER DATABASE YourDatabase SET COMPATIBILITY_LEVEL = 100; 
```

请注意，它可能出于某种原因处于 80 模式，但通常这只是升级或迁移过程中被遗忘的步骤。

# c# - GetDirectoryEntry 不返回所有属性

> ID：11363446
> 
> 赞同：2
> 
> 时间：2012-07-06T13:45:52.167
> 
> 标签：c#, active-directory

我正在尝试查询 AD 以检索用户数据。

查询工作正常，但在枚举通过 GetDirectoryEntry 返回的属性时，我无法看到我在 Active Directory Explorer 中看到的所有属性。

下面的代码片段：

```
offEntry = pResult.GetDirectoryEntry();
foreach (PropertyValueCollection o in offEntry.Properties)
{
    Debug.Print(o.PropertyName + " = " + o.Value.ToString());
} 
```

我看到像“displayName”和“SAMAccountName”等属性，但不是我真正想要的属性，例如：“postalCode”、“streetAddress”。

我已经尝试为这个特定问题寻找解决方案，但已经走到了死胡同。我错过了什么？？？

问候彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:54:29.417

您应该能够使用这样的搜索器类。

```
DirectorySearcher search = new DirectorySearcher(entry);
                search.Filter = "(sAMAccountName=" + userAccount + ")";
                search.PropertiesToLoad.Add("mail");
                SearchResult result = search.FindOne(); 
```

然后通过该行加载您想要的属性

```
 search.PropertiesToLoad.Add("mail"); 
```

然后在你的`SearchResult`你将能够读取属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-04T09:19:44.017

这是一个旧的，但也许它可以帮助别人：

1.  将 DirectorySearcher 的 PropertiesToLoad 保留为**空**（无 .add）将导致所有属性都已**包含 value**。
2.  SearchResult 有一个返回实际 DirectoryEntry 的方法：result.GetDirectoryEntry()。哪个（我仍在试图阻止）将加载所有已填充值的属性。
3.  DirectoryEntry 有一个“InvokeSet”方法来填充尚未填充的属性，之后它们将被返回。（还有一个“InvokeGet”方法，还没试过，但也许它有助于获取空属性）

# css - 所有css类都没有加载到网页中

> ID：11363452
> 
> 赞同：0
> 
> 时间：2012-07-06T13:46:07.407
> 
> 标签：css, visual-studio-2010, user-interface, aspmenu-control

我有一个转换为 VS 2010 的应用程序。asp:menu 的 css 类没有完全加载。当我单击浏览器的兼容视图时，css 工作正常。

关于可能是什么问题以及如何解决的任何想法？

参考代码：

```
<div class="SetHeight">
            <asp:Menu ID="MasterMenu" runat="server" DataSourceID="SiteMapDataSource1" MaximumDynamicDisplayLevels="4"
                Orientation="Horizontal" StaticDisplayLevels="3" StaticMenuItemStyle-CssClass="tab"
                StaticSelectedStyle-CssClass="slctTab" CssClass="tabs" StaticSubMenuIndent="0px">
            </asp:Menu>
</div>

        .SetHeight
        {
            border-bottom: 1px solid red;
            margin-bottom: 5px;
            clear: both;
        }

        table.tabs
        {
            position: relative;
            top: 0px;
        }

        table.tab
        {
        }

        a.tab, a.tab:selected, a.tab:link, a.tab:active, a.tab:visited
        {
            background-color: Green;
            font-family: Arial, Verdana, Helvetica, sans-serif;
            font-weight: 650;
            text-decoration: none;
            color: White;
            padding: 2px 7px;
            display: block;
        }

        a.tab:hover
        {
            background-color: #009900;
        }

        a.slctTab, a.slctTab:hover, a.slctTab:link, a.slctTab:active, a.slctTab:visited
        {
            color: White;
            background-color: Blue text-decoration: none;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:48:47.033

你可以在这里找到答案。希望这能解决您的问题。在此我们将 asp:menu 加载到 div 中，并将样式可见性设置为可见[Asp.net 默认主题 css 菜单问题](https://stackoverflow.com/questions/5893976/asp-net-default-theme-css-menu-problem)

# ios - 在添加另一个之前，我如何检查超级视图中是否还有其他选择器视图？

> ID：11363455
> 
> 赞同：0
> 
> 时间：2012-07-06T13:46:11.883
> 
> 标签：ios, uiview, uipickerview

我有一个应用程序，我在其中使用 3 个pickerviews。每个带有一个标签和一个按钮。当单击按钮时，我想添加一个选择器视图并从该选择器视图中获取标签文本，然后当我选择下一个按钮时我想删除旧的pickerview并像这样添加新的pickerview。任何人都可以帮助我实现这一点。我做了第一部分。我没有一个部分就完成了所有这些，即我想在我的时候删除旧的picker view选择新按钮并需要添加新按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:56:33.447

一种解决方案（多种可能）：

如果您将这三个 UIPickerView 对象附加到“ ”，您可以通过“ ”属性 `IBOutlet`检查它们是否可见或是否隐藏。`hidden`

如果一个选择器可见，您可以从中检索选定的值，将其隐藏，然后显示下一个。

# objective-c - 在 Unity3d 生成的 Xcode AppDelegate 文件中未调用 UIApplicationDelegate

> ID：11363459
> 
> 赞同：0
> 
> 时间：2012-07-06T13:46:17.173
> 
> 标签：objective-c, ios, unity3d

我有一个在 Unity3d 中开发的游戏，并将其导出为 Xcode 形式，并且未调用 Unity3d 生成的 iPhone_target2AppDelegate.m 文件中的`UIApplication`委托，我尝试通过显示以下内容在此方法中放入一些代码：`applicationDidFinishLaunching``UIAlertView`

```
- (void)applicationDidFinishLaunching:(UIApplication *)application 
  {
 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Hello" message:@"It Works" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
     [alert show];
     [alert release];
// Override point for customization after app launch    
[window makeKeyAndVisible];
  } 
```

但是屏幕上什么也没有！

请有任何帮助

已解决：查看帖子底部:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T10:04:05.620

我解决了它，似乎 AppController.h+.m 是处理`UIApplication`委托的一个响应，如果你看一下 AppController.m 文件，你会发现它们已经像 the`applicationDidFinishLaunching`和其他一样存在。

我还输入了一些代码`applicationDidFinishLaunching`，它可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:52:30.947

`UIAlertView`如果AppDelegate 上没有显示，我不会感到惊讶... A`NSLog`绰绰有余。

# android - jblough 库不支持 UniJIS-UCS2-HW-H 编码

> ID：11363461
> 
> 赞同：1
> 
> 时间：2012-07-06T13:46:24.920
> 
> 标签：android, pdf-viewer

我正在使用 jblough 库[https://github.com/jblough/Android-Pdf-Viewer-Library](https://github.com/jblough/Android-Pdf-Viewer-Library)来查看 pdf。但它没有在pdf中显示日语字符。我认为 UniJIS-UCS2-HW-H cmap 不包括在内。这是否是问题的原因？我该如何克服呢？

# c# - 通过输入局域网计算机的IP显示Web界面

> ID：11363465
> 
> 赞同：0
> 
> 时间：2012-07-06T13:46:31.027
> 
> 标签：c#, web-services, tcp, client, ip

所以基本上，我有一个软件，它可以包含 1 到多个客户端和 1 到多个服务器。我想为我的服务器端软件创建一个 Web 界面。客户端应该能够获取其服务器机器的 IP 地址并将其输入到 Web 浏览器中。然后它将显示我们的 Web 界面，其中填充了与服务器端软件交互的不同按钮。

通常，我们正在尝试复制连接到无线路由器的技术。例如，使用路由器的 IP，您可以将其输入 Chrome 等浏览器，它将显示您的无线路由器的配置屏幕，您可以在其中更改路由器的配置。

我需要使用像 IIS 或 Apache 这样的服务来做这样的事情吗？

如果有人可以帮助我进入正确的方向，我将不胜感激。

我先谢谢大家了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:16:51.790

如果您希望用户通过 Web 浏览器访问您的界面，那么可以，您将需要一个 HTTP 服务器来为您的界面提供服务。这里可以使用 Apache 和 IIS。

当您使用 [C#] 标记标记您的问题时，我认为您将使用 .NET 技术编写应用程序，因此 IIS 将成为您的首选服务器。

关于使用IP地址访问您的服务器，只要您知道IP并且可以访问它，这不是问题。如果服务器位于路由器后面，您可能需要稍微调整一下 NAT 配置。

# eclipse - 如何在 Eclipse 文件搜索中使用 unicode 字符？

> ID：11363469
> 
> 赞同：2
> 
> 时间：2012-07-06T13:46:47.793
> 
> 标签：eclipse

我们有一些包含一些无效字符的 XML 文件，程序既没有说明它是哪个文件，也没有说明是哪个行号或字符偏移量。如果我可以准确地搜索那个字符，那么解决问题需要几秒钟的时间，但是我找不到如何在文件搜索中表达 Unicode 字符（或者至少我假设是这样，因为搜索什么都不返回）。

0x1e 和 \u001e 似乎都不匹配任何东西。

[编辑] 我的意思是，我仍然可以更改代码，并最终通过捕获异常找到它是哪个文件，并使用某种脚本/工具来查找字符的确切位置，但我相信应该可以在 Eclipse 中使用 Unicode 搜索，这就是我在这个问题中要问的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:58:28.823

可能是字符编码的问题。

由于您需要执行全局/站点范围的搜索来查找 ，您可能需要设置全局文本文件编码：

首选项 -> 工作区 -> 文本文件编码

此选项可能位于 Eclipse 的“常规”部分下，具体取决于您的设置和安装的插件等。

确保编码设置为 UTF-8。

您还需要转义 unicode 字符序列，如下所示：

```
\u2665 
```

（我看到你已经尝试过了）

# cucumber-jvm - 手动运行 Cucumber JVM 测试

> ID：11363472
> 
> 赞同：2
> 
> 时间：2012-07-06T13:46:56.183
> 
> 标签：cucumber-jvm

我有一点特殊情况。基本上我有一个单元测试，用@Test 注释，在那个测试中我需要执行一个 Cucumber JVM 测试类。

为什么？很长的故事。与类加载器和 RoboGuice 有关，它不是很重要，但它确实限制了我能做什么和不能做什么。

下面是测试方法：

```
@Test
public void runCucumberFeature() throws Exception {
    Cucumber cucumber = new Cucumber(MyCucumberTest.class);
    cucumber.run(new RunNotifier());
} 
```

MyCucumberTest 是我创建的一个类，注释如下：

```
//@RunWith(Cucumber.class)
@Cucumber.Options(format = {"pretty", "html:target/cucumber"}, strict=true)
public class MyCucumberTest {
    // Empty, as required by Cucumber JVM
} 
```

为什么我注释掉了@RunWith 注释？因为如果我不这样做，Cucumber 测试运行程序将拿起测试并运行它，这是我不想要的，因为我正在手动运行测试。

问题是上述方法不起作用。看起来 Cucumber 正在查找功能文件，它正在验证 MyCucumberTest 是否包含 @Givens 等，它甚至会打印出测试，就好像它正在运行它一样。

但事实并非如此。在@Given、@When 和@Then 方法中没有执行任何代码。我不确定为什么会这样，但我有一个模糊的想法，即 Cucumber JVM 测试运行器不想执行代码，因为该类没有使用 @RunWith 注释。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:01:15.637

我无法提供您正在寻找的解决方案，但是......

...您是否考虑过标记要手动运行的测试（例如使用`@Manual`）？

然后您可以取消注释您的注释并通过添加到您的 Cucumber-JVM 调用来`@RunWith`排除手动测试。`--tags ~@Manual`

在您的手动 JUnit 调用中，您可以添加`--tags @Manual`

# java - 用户删除应用程序时如何删除所有文件？

> ID：11363485
> 
> 赞同：1
> 
> 时间：2012-07-06T13:47:45.643
> 
> 标签：java, blackberry, java-me, blackberry-jde

我有黑莓应用程序（java）。我的应用程序将一些信息存储在文件中（file:///store/home/user/app_name/）。当用户删除应用程序时，这些文件不会删除。我想在用户删除应用程序时删除文件。什么是解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T14:13:31.840

不要以这种方式存储文件 - 将 Persistable 用于您的应用数据：http: [//docs.blackberry.com/en/developers/deliverables/17952/Storing_objects_persistently_1219782_11.jsp](http://docs.blackberry.com/en/developers/deliverables/17952/Storing_objects_persistently_1219782_11.jsp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T18:29:32.530

卸载应用程序有两种“标准”方式。第一个，通过`Options - Applications`菜单。第二个，通过`javaloader -erase -f`命令。

理论上，您可以通过第一种方式拦截卸载事件（当您使用“选项 - 应用程序”菜单时），但您需要接收此事件并执行清理操作的其他应用程序。

为了拦截和识别未知事件，我执行以下操作。

我编写了一个简单的 BlackBerry 应用程序，它实现和使用 GlobalEventListener 并在后台运行，并将每个截获的**全局事件 guid**打印到系统输出和/或带有时间戳的日志。

现在，从选项菜单中卸载您的应用程序并检查记录的全局事件指南。之后安装/卸载其他应用程序。然后检查日志/系统输出窗口以找出与操作相关的事件`uninstall`。

它不能保证 100% 的结果，但至少你会在编码、记录和探索方面获得乐趣。

# c# - 将 Entity Framework 5 与重载的 Oracle 存储过程一起使用

> ID：11363486
> 
> 赞同：0
> 
> 时间：2012-07-06T13:47:48.887
> 
> 标签：c#, oracle, entity-framework, stored-procedures, odp.net

我有以下问题。

我在 Oracle 数据库包中有几个存储过程。实际上，它们的参数数量不同（我不允许触摸或更改存储过程）。

我使用 ODP.NET 和 Entity Framework 5 以及 EntLib.Contrib.Data 来管理对该数据库的访问和操作：

```
Database db = EnterpriseLibraryContainer.Current.GetInstance<Database>();
...
using( var reader = db.ExecuteReader("SP_NAME", parameters[])
{
     ...
} 
```

我必须使用参数发现，因为我们的框架就是这样设计的。改变它是最后的资源。

我已经能够使用这种方法访问 SP 和函数，但是当我尝试执行具有过载的 SP 时会出现问题。即，抛出一个异常，我没有发送正确数量的参数来执行该 SP。只有其中一个是可访问的（在包中第一个声明的那个）：第二个总是抛出这个异常。

我尝试使用 ExecuteDataSet() 在 List {} 和 object[] 中一一传递参数，但没有成功。

有没有办法让它发生？

谢谢。

# iphone - UIView 动画像语音气泡

> ID：11363490
> 
> 赞同：0
> 
> 时间：2012-07-06T13:47:55.920
> 
> 标签：iphone, ios5, ios4, uiviewanimation, uiviewanimationtransition

我正在开发一个应用程序，它有这个按钮调用菜单。当我单击该按钮时，它会将菜单视图添加到主视图。但我需要像从按钮中出来一样添加它。就像讲话泡泡。

![在此处输入图像描述](../Images/fbad81395b5bf904bdf1693e8c9dc4b8.png)

这是我从一些 iphone 应用程序中获取的示例图像，他们在动画视图方面做得很棒，就像按钮中出现的气泡一样。

这是我正在谈论的应用程序，其中包含我提到的动画。

[从这里下载位智应用程序](http://itunes.apple.com/us/app/waze-social-gps-traffic/id323229106?mt=8)

如果您使用的是 iphone，请下载并查看它。然后，您将正确了解该动画是如何发生的。顺便说一句，它是一个免费的应用程序。

我在网上搜索以找到解决方案，但找不到任何有用的东西。有一些想法可以使用以下代码来调用子视图。我尝试了一些视图动画，它有一些进展，但还不够好。

```
CGAffineTransform transform = CGAffineTransformMakeScale(1.2, 1.2); 
```

但我很确定这不是正确的方法。应该有适当的方法来做到这一点。

任何人都可以帮我解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:06:59.773

在我的项目中，我使用以下代码从左到右制作动画。更改 CGAffineTransform 的值（x 和 y 位置）将提供变化。希望这会对你有所帮助！

```
[self.view addSubview:subView];
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.0];
CGAffineTransform t2 = CGAffineTransformMakeTranslation(SubView_Width, 0);
subView.transform = t2;
subView.alpha = 1;
[UIView commitAnimations];

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1];
[UIView setAnimationDelegate:self];
subView.alpha = 1;
subView.transform = CGAffineTransformIdentity;
[UIView commitAnimations]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-07T06:42:18.433

你需要这个 - iPhone 的弹出窗口， http: [//mobiledevelopertips.com/open-source/ios-open-source-popover-api-for-iphone-wepopover.html](http://mobiledevelopertips.com/open-source/ios-open-source-popover-api-for-iphone-wepopover.html)

# c# - 规范化 URI 以仅提取域名的最佳方法是什么？

> ID：11363493
> 
> 赞同：4
> 
> 时间：2012-07-06T13:48:07.140
> 
> 标签：c#, .net, uri

例如：

```
http://www.google.co.uk
www.google.co.uk
google.co.uk 
```

将全部转换为：

```
google.co.uk 
```

我本来想使用 System.Uri 类，但这似乎只接受带有方案的 url。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-01-30T20:47:02.680

## 提取域名很容易

该类[`UriBuilder`规范化](https://msdn.microsoft.com/en-us/library/system.uribuilder.aspx)URL 并处理许多边缘情况，例如缺少方案。这使得提取域名变得容易。例如，这些都给你`www.google.co.uk`：

```
new UriBuilder("www.google.co.uk").Host
new UriBuilder("http://www.google.co.uk").Host
new UriBuilder("ftp://www.google.co.uk:21/some/path").Host 
```

## ...但删除`www.`很难

这个问题看起来很容易，但事实并非如此。您无法可靠地删除子域，`www`因为没有真正的区别。域*是* `www.google.co.uk`，包括`www`. `co.uk`成为域的一部分`google`而不是域的一部分并没有什么特别之处`www`——它只是`co.uk`由注册商`google.co.uk`管理，由谷歌管理。

为了让您了解这个问题，这里有一个[*不完整*的域后缀列表，](https://publicsuffix.org/list/)到目前为止包括近 7100 个条目。值得注意的是，哪个部分甚至不一致：

```
URL你想要的域
--------------------------------- -----
http://www.crews.aero 船员.aero
http://www.crew.aero www.crew.aero

```

最好的方法是[谷歌自己为 Chrome 的 omnibar 所做的](https://publicsuffix.org/learn/)：获取[（不完整的）域后缀列表，](https://publicsuffix.org/list/)临时缓存它，并将域名与域后缀列表进行比较。您可以自己查看结果：在 Chrome 多功能栏中输入“crews.aero”，它将被视为 URL，或输入“crew.aero”，它将被视为搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:52:57.100

尝试使用此代码

```
var url = "";
if (! url.Contains("://"))
{
        Url = "http://" + url;
}

var result = new Uri(url).Host; 
```

# vb6 - 格式化整数

> ID：11363495
> 
> 赞同：2
> 
> 时间：2012-07-06T13:48:09.973
> 
> 标签：vb6, vbscript

我几乎有一个两部分的问题。首先，我试图格式化一个已转换为整数的字符串。我有以下代码：

```
If Idx2 = 0 Then    
    response.Write(sName & vbKeyTab & " E01 " & vbKeyTab & CInt(oSplit(1)) & "</br>")
End If 
```

这正确地将我的值显示`oSplit(1)`为`75`. 我想显示为`00075.00`

我试过这个，但我得到一个 500 错误：

```
Format(CInt(oSplit(1)), "00000.00") 
```

我的第二个问题是关于`CInt`我的代码部分。我的`oSplit`数组中的数据是一个字符串，我将它转换为一个整数。然而，似乎是在`CInt`四舍五入我的价值观。有没有我可以传递的参数`CInt`来防止这种情况发生？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:00:49.517

要处理 .05，您需要将其转换为小数而不是 Int：

```
 Format(CDec(oSplit(1)), "00000.00") 
```

# ios - 分发企业（内部）iOS 应用程序

> ID：11363496
> 
> 赞同：1
> 
> 时间：2012-07-06T13:48:15.237
> 
> 标签：ios, mobile

我很好奇分发 iOS 应用程序供内部使用的过程。据我所知，您必须拥有企业许可证。其他问题表明，Apple 只是为您提供了签署应用程序的密钥，您可以分发原始 IPK 文件。公司是否必须向 Apple 注册设备？我相信苹果不会简单地给人们应用签名能力，因为他们可以用它来绕过应用商店

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:03:40.660

开发内部使用的应用程序非常简单。如果是为公司（不是您的），他们将不得不购买企业许可证，您只需要使用此证书编译您的代码/生成应用程序。无需注册任何设备，应用程序无需通过 Apple 审核流程或 Apple Store。

最近，Apple 发布了一个新的[证书（即 B2B）](https://developer.apple.com/programs/volume/b2b/)，它为您提供了更多与公司分发的可能性。可能这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:04:57.273

很抱歉之前误读了这个问题。

本手册与您将要执行的操作更相关：http: [//manuals.info.apple.com/en%5FUS/Enterprise%5FDeployment%5FGuide.pdf](http://manuals.info.apple.com/en%5FUS/Enterprise%5FDeployment%5FGuide.pdf)

# rabbitmq - 无法使用 rabbitmqadmin 声明死信交换

> ID：11363512
> 
> 赞同：4
> 
> 时间：2012-07-06T13:49:19.083
> 
> 标签：rabbitmq

我正在尝试通过调用 rabbitmqadmin 的脚本在 RabbitMQ 中设置各种交换和队列。虽然我可以声明一个队列，但我无法找到在声明中发送“x-dead-letter-exchange”或“x-dead-letter-routing-key”参数的任何方法。这可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-20T13:21:19.797

是的，这可以通过在 'arguments' 参数中指定 JSON 来实现：

```
call rabbitmqadmin.py declare queue name=MyQueue arguments={\"x-dead-letter-exchange\":\"MyExchange\",\"x-dead-letter-routing-key\":\"MyRoutingKey\"} 
```

注意：Windows 批处理文件除外。（在其他操作系统上，某些语法可能不同）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T21:10:08.177

对于那些感兴趣的人，解决方案是执行“rabbitmqadmin export rabbit.config”，更改文件以包含必要的交换、队列和绑定，然后执行“rabbitmqadmin import rabbit.config”。不是最佳解决方案，但功能强大。

# json - 动态填充标题文本

> ID：11363515
> 
> 赞同：-1
> 
> 时间：2012-07-06T13:49:24.270
> 
> 标签：json, extjs

我在 Extjs 中的代码类似于

```
{
    xtype: 'numbercolumn',
    header: 'Model1',
    sortable: false,
    resizable: false,
    format: '0,000.00',
    align: 'right',
    width: 80,
    dataIndex: 'description',
    id: 'description'                         
} 
```

这里的标题是静态的。我想更改标题文本也喜欢`dataIndex`字段。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:02:18.913

看`reconfigure`方法：[http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.panel.Table-method-reconfigure](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.panel.Table-method-reconfigure)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:46:43.437

是的，你可以做到这一点。

最初将标题文本设置为空白或您想要的。

并在`gridstore.load`事件中获取列名并设置文本。

例如，

```
linelistunitstore.on('load',function(store)
{
    Ext.getCmp('usertype').setText(store.getAt('0').get('operationconditiontempunit'));    
}); 
```

# c# - 如何使用 c# 改进此代码

> ID：11363521
> 
> 赞同：4
> 
> 时间：2012-07-06T13:49:35.127
> 
> 标签：c#, string

> **可能重复：**
> [是否有更简单的方法可以在 C# 中执行此 if 语句](https://stackoverflow.com/questions/11358004/is-there-a-simpler-way-to-do-this-if-statement-in-c-sharp)

我有这个代码：

```
while ((txtSource.Text[startPos].ToString() == " ") || 
       (txtSource.Text[startPos].ToString() == ",") || 
       (txtSource.Text[startPos].ToString() == ".")))
        {
            // do something
        } 
```

有什么办法可以做到以上几点，例如：

```
while (!txtSource.Text[startPos].ToString() in (" ",",",".")) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T13:53:59.010

```
while ((new char[] {' ', ',', '.'}).Contains(txtSource.Text[startPos])) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T13:52:47.433

LINQ`Any()`寻求帮助：

```
string text = "some text";
char[] controlChars = { ' ', ',', '.' };
int index = 1;
bool passed = controlChars.Any(c => c == text[index]); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-06T13:53:07.387

```
string[] SearchList =  {" ",",","."};

while (SearchList.Contains(txtSource.Text[startPos].ToString() ))
{
   // Do Something
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-06T13:56:17.300

```
private static bool IsStopChar(char c)
{
  switch (c)
  {
    case ' ':
    case ',':
    case '.':
      return false;
    default:
      return true;
  }
}

//...

  while (!IsStopChar(txtSource.Text[startPos]))
  {
    //...
  } 
```

使用此解决方案，您可以避免集合迭代、内存分配、初始化……修改案例仍然很容易。

# javascript - [97,98].map(String.fromCharCode) 的奇怪输出

> ID：11363526
> 
> 赞同：4
> 
> 时间：2012-07-06T13:49:49.557
> 
> 标签：javascript, ecmascript-5

这按预期工作

```
[97,98].map(function(x){String.fromCharCode(x)})
// [ 'a', 'b' ] 
```

但输出是以下行是意外的

```
[97,98].map(String.fromCharCode)
// [ 'a\u0000\u0000', 'b\u0001\u0000' ] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T13:55:14.253

`String.fromCharCode`可以接受可变长度的参数，并将每个参数视为一个字符代码来构建一个`arguments.length`字符长度的字符串。

`map`将几个参数传递给内部函数。首先，显然是当前项目的价值。第二个是数组中的索引，它是`\u0000`and`\u0001`的来源（添加更多字符代码，你会得到`\u0002`, `\u0003`...）。第三个参数是对正在遍历的数组的引用，它被转换为 number `0`。

来源：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)

编辑很久以后：另一种方法：

```
String.fromCharCode.apply(String, [97,98]);
// [ 'a', 'b' ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:03:15.620

```
 a2 = [97,98].map(function(x){return String.fromCharCode(x)});
       alert(a2);
       a2 = [97,98].map(String.fromCharCode);
       alert(a2); 
```

Linux 上的 Firefox13 都警告“a,b”。第一个函数缺少返回语句。

# java - 如何开始构建基于 Java 的网络抓取工具

> ID：11363527
> 
> 赞同：0
> 
> 时间：2012-07-06T13:49:56.090
> 
> 标签：java, web-scraping, information-extraction

什么是开始构建网络抓取工具的最佳（也是最短）方法，该工具足够灵活，可以与几乎所有类型的网站一起使用，并能够将这些网站存储在数据库中以供检索。

我想构建类似于“谷歌搜索”的东西，其中“谷歌搜索”在搜索之前将所有网站缓存到他们的服务器。

这是我的研究项目的组成部分之一。

如果已经有一些开源项目，请告诉我，这将使我的任务更容易。

我更喜欢java来构建它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:51:55.827

例如像[heritrix](https://webarchive.jira.com/wiki/display/Heritrix/Heritrix)这样的东西？

# ruby-on-rails-3 - rails activerecord 扩展数据集以包含joineddata

> ID：11363528
> 
> 赞同：0
> 
> 时间：2012-07-06T13:49:56.800
> 
> 标签：ruby-on-rails-3, json

我们正在尝试使用 json 将标记数据传递给谷歌地图。

到目前为止，我们只是拉取我们需要的数据集（其中不包括坐标），然后使用 belongs_to 关系提取视图的坐标。例如：

控制器：

```
@clubs = Clubs.all 
```

看法：

```
@clubs.each do |club|
  lng = club.town.longitude
  lat = club.town.latitude
end 
```

现在我们要通过 json 拉取数据。这意味着belongs_to 在视图中不再可用，因此我们需要将long 和lat 数据附加到控制器内的json @clubs 数据集中，以便我们能够做到：

```
@clubs.each do |club|
  lng = club.longitude
  lat = club.latitude
end 
```

我们如何做到这一点，或者有其他方法可以解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T12:56:29.107

您可以在俱乐部中包含“城镇”协会：

```
club.as_json(:include => :town) 
```

# android - 缺少要求：Android 层次结构查看器

> ID：11363532
> 
> 赞同：0
> 
> 时间：2012-07-06T13:50:19.457
> 
> 标签：android, hierarchy, viewer

我对 linux 和 android 非常陌生，我尝试在 youtube 视频的帮助下安装 android sdk。我安装了 android sdk - android 4.1 (API 16) 然后我安装了 eclipse Eclipse SDK 版本：3.5.2 Build id：M20100211-1343

我的操作系统是 Ubuntu 10.04 LTS 调用 eclipse 并尝试帮助->安装新软件并添加[https://dl-ssl.google.com/android/eclipse](https://dl-ssl.google.com/android/eclipse)

选择 Developer Tool -> Next 后，一段时间后我收到错误消息

*无法完成安装，因为找不到一项或多项所需项目。（正在安装的软件：Android Hierarchy Viewer 20.0.0.v201206242043-391819 (com.android.ide.eclipse.hierarchyviewer.feature.group 20.0.0.v201206242043-391819) 缺少要求：Android Hierarchy Viewer 20.0.0.v201206242043-391819 com.android.ide.eclipse.hierarchyviewer.feature.group 20.0.0.v201206242043-391819) 需要 'org.eclipse.ui 3.6.2' 但找不到*

我尝试了互联网搜索来解决这个问题 1\. 我尝试了 http 和 https - 同样的错误来了。2\. 在选择新软件下载之前，我启用了所有可用的软件站点 - 出现同样的错误，但失败后我看到一些站点被禁用。3\. 我尝试使用本地 zip 文件 /home/xxxx/Downloads/ADT-20.0.0.zip!/- 仍然相同的错误请帮助我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:03:56.650

您必须从检查软件更新的同一更新 eclipse 版本，使用此链接： `http://download.eclipse.org/eclipse/updates/3.6`您将找到 Eclipse SDK>Eclipse SDK，然后尝试再次更新 ADT，它将起作用。

# c# - 模拟socket断开

> ID：11363538
> 
> 赞同：0
> 
> 时间：2012-07-06T13:50:42.613
> 
> 标签：c#, sockets, asyncsocket

我正在尝试完全按照主题对测试用例所说的去做，这意味着在进行检查时`if(socket.Connected)`你会得到错误的结果，但是套接字对象仍然存在并且不会被处置。我知道轮询测试会更精确，但对于我目前的测试目的，我对此并不感兴趣。

我在这个论坛上环顾四周，但我没有看到在 C# 中执行此操作的方法，这可能吗？我正在尝试创建这种情况：

1.  检查 Socket Connected，它失败了。
2.  重新连接套接字，因此`Socket.Connected`返回 true。
3.  休眠或等待一段时间。
4.  再次将 设置`Socket.Connected`为 false。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:45:30.133

为 Socket 模拟或创建一个测试替身并覆盖 Connected，以便将其设置为 True 或 False。如果您要测试的只是代码对该布尔值做出反应并且采取了正确的步骤，那么它是一个非常简单的模拟。

# asp.net - 我无法让模态窗口工作！我尝试了所有能找到的教程

> ID：11363539
> 
> 赞同：2
> 
> 时间：2012-07-06T13:50:45.200
> 
> 标签：asp.net, visual-studio-2010, web-applications, asp.net-ajax

我已经完全遵循了所有教程（或者我认为），我无法打开模式窗口。现在，我只是想让一个在“测试”ASP 页面中打开，这样我就可以弄清楚它的功能。

这是我的“Test.aspx”代码

```
<%@ Page Title="" Language="VB" MasterPageFile="~/Site.master" AutoEventWireup="false"  CodeFile="Test.aspx.vb" Inherits="Test" %> 
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="act"%>

<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" Runat="Server">

</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" Runat="Server">
   <asp:ScriptManager ID="ScriptManager1" runat="server">
   </asp:ScriptManager>

<act:ModalPopupExtender ID="MPE" runat="server"
   TargetControlID="LinkButton1"
   PopupControlID="Panel1"
   OkControlID="OkButton"
   BackgroundCssClass="modalBackground"></act:ModalPopupExtender>

<asp:Panel ID="Panel1" runat="server" CssClass="ModalWindow">
   <asp:Table Width="100%" runat="server">
   <asp:TableRow>
       <asp:TableCell>
          Fields1:
       </asp:TableCell>
       <asp:TableCell><asp:TextBox ID="txtFields1" runat="server">
                   </asp:TextBox>    
       </asp:TableCell>
   </asp:TableRow>
   </asp:Table>
       <asp:Button ID="Button1" runat="server" Text="Submit" />
       <asp:Button ID="btnCancel3" runat="server" Text="Cancel" />
   </asp:Panel>

   <asp:Button ID="LinkButton1" runat="server" Text="Link Button" /> 
```

我也把它放在 Site.Master 的顶部

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %> 
```

我得到的错误是：http: [//i.stack.imgur.com/4gCvF.png](http://i.stack.imgur.com/4gCvF.png)

如果我点击忽略错误，这就是 [http://i.stack.imgur.com/D0f1k.png](http://i.stack.imgur.com/D0f1k.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:00:12.190

`OkControlID="OkButton"`

应该匹配提交按钮

`<asp:Button ID="Button1" runat="server" Text="Submit" />`

关闭模态窗口。您目前没有 ID 为“OkButton”的按钮

**编辑：** 另外，你想使用

`<asp:ToolkitScriptManager ID="ScriptManager1" runat="server" > </asp:ToolkitScriptManager>`

代替

`<asp:ScriptManager ID="ScriptManager1" runat="server"> </asp:ScriptManager>`

（或者在你的情况下，我认为你想使用`<act:ToolkitScriptManager...`，但我不是专业人士，所以玩吧）

注意：我几天前就知道了，我必须将属性添加`CombineScripts="false"`到`ToolkitScriptManager`它才能使其工作，但我认为这取决于您的环境以及您运行的其他 javascript 文件

# http - 我可以让wireshark 只显示HTTP 交换的上层吗？

> ID：11363540
> 
> 赞同：0
> 
> 时间：2012-07-06T13:50:47.377
> 
> 标签：http, wireshark

我正在调试一个 HTTP REST 接口，其中客户端和服务器都是用 java 编写的（即没有 JavaScript 并且没有在浏览器上运行）

为了可视化 HTTP 交换，我可以单击一个数据包并跟踪一个 TCP 流，这将只显示 HTTP 层，但我必须在每个 TCP 流的基础上执行此操作。

我有一种感觉，我没有使用正确的工具（wireshark）或者我用错了。你们是怎么做到的？

注意：我知道 firebug 和类似工具，但请记住我没有涉及所有这些的浏览器

注2：希望问题对更多人有用，欢迎各平台。然而，我个人在 Linux 中需要一些东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:55:46.223

[Fiddler](https://www.fiddler2.com/fiddler2/)是 Web 开发人员的必备工具，但仍然适用于发出 Web 请求的独立应用程序（稍作调整，它甚至可以使用 HTTPS）。它将自己设置为代理，并为您提供对流量的大量控制，包括即时编辑流量、模拟拨号速度、在特定类型的流量上设置断点，以及至少 JSON 和 XML 的多个语法视图（可能还有其他? 这些是我使用的唯一视图）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:50:21.203

[Bro](http://www.bro-ids.org)是适合您用例的工具。它自动重组 TCP 流并在顶部运行应用层（例如 HTTP）解析器。Bro 在 Linux 上运行良好，已在网络测量和网络安全社区中得到广泛采用。

在您的情况下，按如下方式运行 Bro：

```
bro -C -r <trace> 
```

并检查结果`http.log`。它应该看起来像这样（在右端修剪）：

```
#separator \x09
#set_separator  ,
#empty_field    (empty)
#unset_field    -
#path   http
#fields ts      uid     id.orig_h       id.orig_p       id.resp_h       id.resp_p       trans_depth     method  host    uri     referrer        user_agent      request_body_len        response_body_len       status_code     status_msg
#types  time    string  addr    port    addr    port    count   string  string  string  string  string  count   count   count   string  count   string  string  table[enum]     string  string  table[string]   string  string  file
1258535653.087137       an7i43AgB5h     192.168.1.104   1191    65.54.95.64     80      1       HEAD    download.windowsupdate.com      /v9/windowsupdate/redir/muv4wuredir.cab?0911180916      -       Windows-Update-Agent    0       0
1258535655.525107       qPXo2uv96I5     192.168.1.104   1192    65.55.184.16    80      1       HEAD    www.update.microsoft.com        /v9/windowsupdate/selfupdate/wuident.cab?0911180916     -       Windows-Update-Agent    0       0
1258535656.495997       9vr3tgviuu6     192.168.1.104   1193    65.54.95.64     80      1       HEAD    download.windowsupdate.com      /v9/windowsupdate/a/selfupdate/WSUS3/x86/Other/wsus3setup.cab?0911180916        -       Windows-Update 
```

随附的工具`bro-cut`允许您将输出减少到所需的字段，例如：

```
bro-cut id.orig_h id.resp_h method host uri < http.log | head 
```

一些示例输出：

```
192.168.1.104   65.54.95.64     HEAD    download.windowsupdate.com      /v9/windowsupdate/redir/muv4wuredir.cab?0911180916192.168.1.104   65.55.184.16    HEAD    www.update.microsoft.com        /v9/windowsupdate/selfupdate/wuident.cab?0911180916
192.168.1.104   65.54.95.64     HEAD    download.windowsupdate.com      /v9/windowsupdate/a/selfupdate/WSUS3/x86/Other/wsus3setup.cab?0911180916192.168.1.104   65.54.95.64     GET     download.windowsupdate.com      /v9/windowsupdate/a/selfupdate/WSUS3/x86/Other/wsus3setup.cab?0911180916
192.168.1.104   65.54.95.64     HEAD    download.windowsupdate.com      /v9/windowsupdate/redir/muv4wuredir.cab?0911180916192.168.1.104   65.54.95.64     HEAD    download.windowsupdate.com      /v9/windowsupdate/redir/muv4wuredir.cab?0911180916
192.168.1.102   212.227.97.133  POST    212.227.97.133  /rpc.html?e=bl
192.168.1.102   87.106.1.47     POST    87.106.1.47     /rpc.html?e=bl
192.168.1.102   87.106.1.89     POST    87.106.1.89     /rpc.html?e=bl
192.168.1.102   87.106.12.47    POST    87.106.12.47    /rpc.html?e=bl 
```

# asp-classic - 如何在经典asp中显示活动目录中的照片

> ID：11363543
> 
> 赞同：1
> 
> 时间：2012-07-06T13:50:50.627
> 
> 标签：asp-classic, active-directory, photos

如何在经典asp中显示活动目录中的照片？我可以登录到我们的 AD 并从 calssic asp 页面查询用户名电话等。缩略图照片字段只返回一个字符串，我该如何格式化以在经典 asp 中显示照片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:22:33.097

所以我想出的答案是：strUsername = request.querystring("req") strUserRole = request.querystring("rol")

```
Set objDomain = GetObject ("GC://rootDSE")
objADsPath = objDomain.Get("defaultNamingContext")
Set objDomain = Nothing
Set con = Server.CreateObject("ADODB.Connection")
con.provider ="ADsDSOObject"
con.Properties("User ID") = "XXXXXXXXXXX"
con.Properties("Password") = "XXXXXXXXXXXXXXX"
con.Properties("Encrypt Password") = False
con.open "Active Directory Provider"
Set Com = CreateObject("ADODB.Command")
Set Com.ActiveConnection = con
Com.CommandText ="select name,telephonenumber,mail,thumbnailPhoto, Department, title FROM 'GC://"+objADsPath+"' where sAMAccountname='"+strUsername+"'"

Set rs = Com.Execute
if not rs.eof then
 tmpphoto=rs("thumbnailPhoto")
 tmpdept=rs("Department")
 tmptitle=rs("title") 
 name=rs("name")
 telephonenumber=rs("telephonenumber")
 mail=rs("mail") 
 NameArr = Split(name, " ")
 cname = NameArr(0)
 sname = NameArr(1)
rs.Close
con.Close
Set rs = Nothing
Set con = Nothing

 %>
 <div id="card"><img src="badge.jpg"  width="100%"/>
<div id="personname"><%=cname & " " & sname%></div>
<div id="persongroup"><%=tmptitle%></div>
<div id="persondept"><%=tmpdept%></div>
<div id="personrole"><%=strUserRole%></div>
<div id="personimage">  
    <img src="getaduserimage.asp?req=NAME.SURNAME" width="100" height="100" frameborder="0" scrolling="no" />

</div>
<div id="logoimage"><img src="OUR_logo_white_small.png"  width="100"/></div>
<%
 else 
   cname = strUsername & " Not found"
end if

%>

<% 'getaduserimage.asp file contains:
strUsername = request.querystring("req")
Set objDomain = GetObject ("GC://rootDSE")
objADsPath = objDomain.Get("defaultNamingContext")
Set objDomain = Nothing
Set con = Server.CreateObject("ADODB.Connection")
con.provider ="ADsDSOObject"
con.Properties("User ID") = "xxxxxx"
con.Properties("Password") = "xxxxxxxx"
con.Properties("Encrypt Password") = False
con.open "Active Directory Provider"
Set Com = CreateObject("ADODB.Command")
Set Com.ActiveConnection = con
Com.CommandText ="select thumbnailPhoto FROM 'GC://"+objADsPath+"' where sAMAccountname='"+strUsername+"'"

Set rs = Com.Execute
Response.Expires = 0  
Response.Buffer = TRUE  
Response.Clear  
Response.ContentType = "image/jpeg" 
'#### Assuming your images are jpegs 
if not rs.eof then
Response.BinaryWrite rs("thumbnailPhoto")  
else 
   response.write "image for " &  strUsername & " Not found"
end if
rs.Close
con.Close
Set rs = Nothing
Set con = Nothing
%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:45:19.750

如果我正确理解您的问题，您将在返回图像数据时使用`FileSystemObject`和使用二进制图像文件，`response.contenttype = "image/jpeg"`以便将内容呈现为图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T07:12:19.787

您可以通过使用 html img 标签来做到这一点。例如：

```
<img src="<%=myPhotoUrl%>"> 
```

在 asp 代码块中，您必须将其声明为：

```
<%
    Response.Write "<img src=""" & myPhotoUrl & """>"
%> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T17:09:49.497

您还可以将照片内嵌在图像中：

...img src=[图片的base64表示]>...

[带有 base64 字符串的 HTML 图像标记（数据 URI）](https://stackoverflow.com/questions/11134707/html-image-tag-with-base64-string-data-uri-scheme)

# c# - 这个中央静态类的实现是否正确？

> ID：11363545
> 
> 赞同：0
> 
> 时间：2012-07-06T13:51:00.867
> 
> 标签：c#, castle-windsor

所以，我开始了一个新项目，尝试实现我在过去几年中学到的一些东西，其中第一个是将 Castle 用于 IoC。

我想要一个中央“核心”课程，它将在众多最终项目（控制台应用程序、网站）中共享。所以我想，这里有两个问题：

a）这种方法是否正确 b）我的实施是否正确。

我知道这是一个非常小的课程，但我想从一开始就正确。

```
public static class Global {
        static IWindsorContainer _Container;
        static int ContainerInitalised = 0;
        static string ServicesFile;

        public static IWindsorContainer Container{
            get{
                if (Interlocked.CompareExchange(ref ContainerInitalised, 1, 0) == 0) {
                    Collection<IWindsorInstaller> installers = new Collection<IWindsorInstaller> {
                        { FromAssembly.InDirectory(new AssemblyFilter("Installers")) }
                    };
                    if (!String.IsNullOrWhiteSpace(ServicesFile)) {
                        installers.Add(Configuration.FromXmlFile(ServicesFile));
                    }
                    _Container = new WindsorContainer().Install(installers.ToArray());
                }
                return _Container;
            }
        }

        public static void Initialise(string servicesFile) {
            ServicesFile = servicesFile;
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T17:12:34.477

按照 David 的说法，您的想法是使用 ServiceLocator 解决方案，这是使用 IoC 容器的最糟糕的方式。

使用通用接口抽象 IoC 容器也是一个坏主意，因为您最终会失去特殊的容器功能：特别是不公开发布方法的接口会导致使用成熟的 IoC 容器（例如基于 RRR 模式的 Windosr）的灾难。

[Krzysztof 在他的 NDC 演讲](http://kozmic.pl/presentations/)中清楚地描述了正确的方法

*   根据 MVC3 实现，使用工厂将 IoC 容器插入您的应用程序
*   尽快做一个 Resolve：非 web 应用的一个 Resolve，一个 web 场景的每个请求一个 resolve
*   总是发布你解决的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:02:26.087

您可能可以通过向“服务定位器”实现迈出一步来清理它。（确实，有[一个通用库](http://commonservicelocator.codeplex.com/)可以做到这一点。）

例如，您可以在接口后面抽象 IoC 容器，并拥有一个提供当前实现的静态工厂（以替换您的泛型`Global`类并使其更具针对性）。像这样的东西：

```
public interface IoCContainer
{
    object GetInstance(Type serviceType);
    object GetInstance(Type serviceType, string key);
    IEnumerable<object> GetAllInstances(Type serviceType);
    T GetInstance<T>();
    T GetInstance<T>(string key);
    IEnumerable<T> GetAllInstances<T>();
}

public static class IoCContainerFactory
{
    private static IoCContainer current;

    public static IoCContainer Current
    {
        get
        {
            if (current == null)
                throw new DomainException("IoC Container Not Initialized.  This application must call a bootstrap method in an IoC implementation project.");
            return current;
        }
    }

    public static void Initialize(IoCContainer container)
    {
        current = container;
    }
} 
```

然后在另一个项目中我实现了`IoCContainer`接口（我使用 StructureMap，你使用 Castle……有很多选择）。同样在另一个项目中，我有一个`Initializer`类将引导容器实现（因为任何实现的配置都不同），并且作为最后一步，初始化这个“全局”工厂：

```
IoCContainerFactory.Initialize(new IoCContainerImplementation(ObjectFactory.Container)); 
```

（在上述代码行的情况下，`IoCContainerImplementation`是我对上述接口的实现，并且`ObjectFactory`来自 StructureMap，并且刚刚在之前的代码行中配置/引导。）

当然，使用这种方法，需要进行一些权衡。通过将我的 IoC 容器抽象到一个通用接口后面，我只能做许多 IoC 容器实现中通用的事情。对于我的需要，我想要的只是调用一个方法来解决依赖关系。但是其他的东西，比如用属性装饰类/属性（如果你选择的 IoC 容器具有该功能）将需要与该特定容器紧密耦合或扩展此实现以包含以某种方式使用该功能的自定义属性。

# javascript - Javascript：使用来自 textarea 的 html 标签获取值，就像使用 tinyMCE

> ID：11363547
> 
> 赞同：0
> 
> 时间：2012-07-06T13:51:13.513
> 
> 标签：javascript, html, htmltext

当我使用 TinyMCE 时，我得到的值是 HTML，也带有 HTML 标签。是否有可能从 textarea 获得相同的结果？

当我尝试

```
var text= $('#myTextarea').val(); 
```

我只得到简单的文本，没有 html 标签。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:57:37.910

您可以使用 outerHTML 属性来获取“标签源”

对于 id="inputId" 的简单输入，您将获得“ `<input type="text" id="inputId">`”

在你的情况下尝试

```
var text = $('#myTextarea')[0].outerHTML 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:28:08.097

似乎 text 和 textarea 只返回纯文本，没有 html。在这种情况下，我们需要使用 tinyMCE。

# c# - 在字符串中为行着色（datagrid wpf）

> ID：11363550
> 
> 赞同：0
> 
> 时间：2012-07-06T13:51:26.523
> 
> 标签：c#, wpf

我设置颜色

```
e.Row.Background = new SolidColorBrush(Colors.Tomato); 
```

但是我如何设置颜色是字符串？色标？以 D7F9C7 为例...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:57:34.143

您可以设置：

```
Brush MyBrush = (Brush)new BrushConverter().ConvertFrom("#4CE4FF00"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:11:40.160

您可以使用静态[ColorConverter.ConvertFromString 方法](http://msdn.microsoft.com/en-us/library/ms606533.aspx)：

```
Color color = (Color)ColorConverter.ConvertFromString("#D7F9C7"); 
```

# php - 将按钮添加到链接到该行数据的表行

> ID：11363551
> 
> 赞同：1
> 
> 时间：2012-07-06T13:51:44.407
> 
> 标签：php, html, button, html-table, row

我想知道是否有人可以帮助我。

我正在使用下面的代码创建一个表，其中列出`location records`了`current user`.

```
<form name="locationsconsole" id="locationsconsole" method="post" action="locationsaction.php">
            <table width="865">
                    <tr>
                        <th width="22"></th>
                        <th width="236"><div align="left">Location Name</div></th>
                        <th width="244"><div align="left">Location Address</div></th>
                        <th width="71"></th>                                
                    </tr>   

                    <?php

                    $query = "SELECT  l.*, COUNT(f.locationid) totalfinds FROM detectinglocations l LEFT JOIN finds f ON f.locationid = l.locationid WHERE l.userid = '$idnum' GROUP BY l.locationname";
                    $result = mysql_query($query) or die('error');

                    while($obj=mysql_fetch_object($result))
                    {

                    ?>

                    <tr>
                        <td><input type="hidden" name="lid" value="<?php echo $obj->locationid;?>"/></td>
                        <td><?php echo $obj->locationname;?></td>
                    <td><?php echo $obj->returnedaddress;?></td>
                        <td><input name="type" type="submit" value="View Details"/></td>
                    </tr>
                                <?php
                                    }   

                                ?>

              </table>
      </form> 
```

您会看到在每一行都有一个按钮，通过`locationsaction.php`该按钮将用户带到下面列出的另一个页面。

```
<?php 
session_start();
$_SESSION['lid'] = $_POST['lid'];
if (isset($_POST['type'])) {
    $urls = array(
        'View Details' => 'viewlocation.php'
    );
    $url = $urls[$_POST['type']];
    header("Location: " . $url);
}
?> 
```

表中当前有 3`location`条记录是正确的，当单击按钮时，用户会被带到正确的屏幕。

但是，我遇到的问题是，无论我在哪一行单击按钮，检索到的记录总是与最后一条`location`记录相关。

很长一段时间以来，我一直在尝试对此进行排序，尽管重写了许多页面，但我一直无法找到解决方案。

我只是想知道是否有人可以看看这个，让我知道我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T10:48:07.563

在互联网上花了相当长的时间研究这个问题后，我在[这里](http://forums.devshed.com/php-development-5/first-data-row-submit-button-doesn-t-work-in-while-758827.html)找到了解决方案。然后我可以编辑它以满足我对以下脚本的需要：

```
<?php

                    $query = "SELECT  l.*, COUNT(f.locationid) totalfinds FROM detectinglocations l LEFT JOIN finds f ON f.locationid = l.locationid WHERE l.userid = '$idnum' GROUP BY l.locationname";
                    $result = mysql_query($query) or die('error');
                    $row = mysql_fetch_assoc($result);              
                    extract($row); 

                    /* Display Users in a table */ 
                    echo "<table cellspacing='5' border='0' cellpadding='0' width=95%>"; 
                    echo "<tr><td colspan='0' style='text-align: Left'></td></tr>\n"; 
                    echo "<tr><td style='font-weight: bold; 
                        font-size: 1.0em'>Location</td><td style='font-weight: bold; 
                        font-size: 1.0em'>Address</td><td style='font-weight: bold;  
                        font-size: 1.0em'>Finds Made</td></tr>\n";
                    mysql_data_seek($result, 0);

                    while($row = mysql_fetch_array($result))
                    {

                    /* display row for each user */ 
                        echo "<tr>\n"; 
                        $theID = $row['locationid']; 
                        echo " <td>{$row['locationname']}</td>\n"; 
                        echo " <td>{$row['returnedaddress']}</td>\n"; 
                        echo " <td>{$row['totalfinds']}</td>\n"; 
                        echo " <td><form action= locationsaction.php  method= 'post'><input type='hidden' name='lid' value=$theID />
                                    <input type= 'submit' name= 'type' value= 'View/Amend Location Details'/><input type= 'submit' name= 'type' value= 'Add/View Find Images'/><input type= 'submit' name= 'type' value= 'View Location Finds'/><input type= 'submit' name= 'type' value= 'View Location Finds'/></form></td>\n"; 
                        echo "</tr>\n"; 

                    }
                    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:57:03.803

查看您的查询。由于您已硬编码查询

```
$query = "SELECT  l.*, COUNT(f.locationid) totalfinds FROM detectinglocations l LEFT JOIN finds f ON f.locationid = l.locationid WHERE l.userid = '27' GROUP BY l.locationname"; 
```

如位置 ID 和用户 ID。这是一个假设，因为我看不到它们的行为是可变的。相反，它们是字符串。看看吧。

# c# - C# 控制台会溢出太多的 Writelines 吗？

> ID：11363552
> 
> 赞同：7
> 
> 时间：2012-07-06T13:51:49.003
> 
> 标签：c#, console.writeline

如果我有一个每秒执行多次 Console.Writeline 的程序，并且该程序运行了很长时间，控制台会溢出太多行吗？我只想知道它是否最终会引发 IO 异常，或者 Console.Writelines 的数量是否实际上是无限的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-06T13:53:57.170

不，它不会溢出。如果您检查*选项选项*卡以获取命令窗口的快捷方式，您将看到*缓冲区大小*选项。这指定将存储的最大行数。旧的被删除。

正如 Scott 在下面的评论中建议的那样，您可以使用[`Console.BufferHeight`](http://msdn.microsoft.com/en-us/library/system.console.bufferheight.aspx). 这个（当我在我的开发 PC 上测试时）的默认值是**300**。最大允许值为**32766** ( `Int16.MaxValue - 1`)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T13:54:12.607

控制台有一个保存多少行的缓冲区，您可以在 cmd.exe 属性中设置它：

![Cmd.exe 属性](../Images/28bb7438076b99032ede127630d08098.png)

所以在 300 行之后它会忘记第 1 行的输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T13:53:25.810

最大允许值为 32766（已更正）；

# build - Gradle 和 Sonar - 连接被拒绝错误

> ID：11363556
> 
> 赞同：0
> 
> 时间：2012-07-06T13:52:09.887
> 
> 标签：build, gradle, sonarqube

我已经配置了 gradle 和 sonar 插件：

```
apply plugin: 'sonar'

// sonar settings - gradle-1.0-milestone-3 2  - check new sonar plugin for milestone 5 release
        sonar {
            server { 
                Url = "http://myserver:9000"
            }
            database {

            url="jdbc:mysql://myserver:3306/sonar?useUnicode=true&characterEncoding=utf8"
            driverClassName="com.mysql.jdbc.Driver"
            username="usrname"
            password="pwd"
            }

        } 
```

*   我可以使用网络浏览器连接到声纳。
*   我可以使用简单的 java 测试程序连接到 mySQL 数据库。
*   我已将 mysqlconnector.jar 文件复制到 GRADLE_HOME/lib

当我跑步时

gradle -debug sonarAnalyze

我正进入（状态：

```
09:42:25.074 [ERROR] [org.gradle.BuildExceptionReporter]        ... 53 more
09:42:25.074 [ERROR] [org.gradle.BuildExceptionReporter] Caused by: java.net.ConnectException: **Connection refused: connect**
09:42:25.074 [ERROR] [org.gradle.BuildExceptionReporter]        at org.sonar.batch.bootstrapper.Bootstrapper.remoteContent(Bootstrapper.java:123)
09:42:25.075 [ERROR] [org.gradle.BuildExceptionReporter]        at org.sonar.batch.bootstrapper.Bootstrapper.downloadBatchFiles(Bootstrapper.java:156)
09:42:25.075 [ERROR] [org.gradle.BuildExceptionReporter]        ... 65 more
09:42:25.075 [ERROR] [org.gradle.BuildExceptionReporter]
09:42:25.075 [LIFECYCLE] [org.gradle.BuildResultLogger]
09:42:25.076 [LIFECYCLE] [org.gradle.BuildResultLogger] **BUILD FAILED**
09:42:25.076 [LIFECYCLE] [org.gradle.BuildResultLogger]
09:42:25.076 [LIFECYCLE] [org.gradle.BuildResultLogger] Total time: 5.59 secs 
```

可能是什么问题呢？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:32:26.243

`server.url`在您的代码片段中拼写错误；它必须是小写的`u`。除此之外，它可能是错误的 URL 或错误的网络配置。或者，您可能正在使用与 Gradle 1.0-milestone-3 附带的 Sonar 客户端库不兼容的 Sonar 服务器版本。

顺便说一句，Gradle 1.0-milestone-3 真的很老了（18 个月左右），从那以后发生了很多变化。我建议尝试使用 1.0。

# android - Android：listview角落的背景

> ID：11363564
> 
> 赞同：1
> 
> 时间：2012-07-06T13:52:33.293
> 
> 标签：android, listview

我有圆角的列表视图。如何设置这些角落的背景？我需要将它们设置为灰色，就像主背景一样，但它们是白色的。

![在此处输入图像描述](../Images/b827ce2c22f28fd7038bd9de0b82af85.png)

我的列表视图

```
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/cats_list"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:cacheColorHint="#000"
            android:background="@drawable/round_corners"
            /> 
```

round_corners.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <corners android:bottomRightRadius="7dp" android:bottomLeftRadius="7dp" 
     android:topLeftRadius="17dp" android:topRightRadius="17dp"/> 

    <gradient
        android:angle="180"
        android:endColor="#ff0000"
        android:startColor="#ff0000"
        android:type="linear" />

</shape> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:55:16.753

是否可以将您的 xml 形状的背景设置为透明？可以使用系统默认

```
@android:color/transparent 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T14:14:50.163

在添加 ListView 之前尝试以下添加视图的**技巧。**该视图的背景颜色为灰色。

```
<View
        android:background="@android:color/darker_gray"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        />

<ListView xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/cats_list"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:cacheColorHint="#000"
            android:background="@drawable/round_corners"
            /> 
```

我检查了它，它可以工作。

# java - 如何使用 Jxl API 读取下拉列表的值

> ID：11363575
> 
> 赞同：0
> 
> 时间：2012-07-06T13:53:10.970
> 
> 标签：java, drop-down-menu, jxl, jexcelapi

我有一个 Excel 工作表，其中 2 列有一个下拉列表，其中一个有大约 4-5 个值，另一个有 2 个可以选择的值。我想读取这两列中每一行的值。. 执行此操作的代码示例是什么？我确实在网上和这个论坛上浏览了一段时间，但没有找到任何答案。我在 JExcel 雅虎群发帖，但没有成功。我添加了以下代码，但这无济于事。此代码示例只是防止“常见断言失败”错误

```
 WorkbookSettings settings = new WorkbookSettings();
  settings.setSuppressWarnings(true);
 Workbook workbook = Workbook.getWorkbook(sis, settings); 
```

当下拉菜单存在时，工作表会给出错误的行数。有没有人能够读取下拉列表中选择的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:06:37.017

如果您对 Excel 工作表应用了自动过滤器，那么这可能是导致问题的原因。我建议您删除自动过滤器，然后尝试获取组合框的值。

```
Cell yourCell = yourSheet.getCell(x,y);
String comboboxValue = yourCell.getContents();
logger.log("value selected in combobx is : " + comboboxValue ); 
```

# javascript - HTML5 Canvas 游戏中的多个 setInterval

> ID：11363576
> 
> 赞同：1
> 
> 时间：2012-07-06T13:53:15.030
> 
> 标签：javascript, html, canvas, html5-canvas

我正在尝试在使用 Canvas 创建的游戏中实现多个动画（这是一个简单的乒乓球游戏）。这是我的第一个游戏，我是画布的新手，但之前已经创建了一些实验，所以我对画布的工作原理有很好的了解。

首先，看看[这里](http://cssdeck.com/t/egkk1kra/7)的游戏。问题是，当球击中桨时，我想在接触点爆发 n 个粒子，但这并不正确。即使我将粒子数设置为 1，它们也只是不断从接触点而来，然后在一段时间后自动隐藏。

另外，我想在每次碰撞时都有爆发，但它只发生在第一次碰撞时。我在这里粘贴代码：

```
//Initialize canvas
var canvas = document.getElementById("canvas"),
    ctx = canvas.getContext("2d"),
    W = window.innerWidth, 
    H = window.innerHeight,
    particles = [],
    ball = {},
    paddles = [2],
    mouse = {},
    points = 0,
    fps = 60,
    particlesCount = 50,
    flag = 0,
    particlePos = {}; 

canvas.addEventListener("mousemove", trackPosition, true);

//Set it's height and width to full screen
canvas.width = W;
canvas.height = H;

//Function to paint canvas
function paintCanvas() {
    ctx.globalCompositeOperation = "source-over";
    ctx.fillStyle = "black";
    ctx.fillRect(0, 0, W, H);
}

//Create two paddles
function createPaddle(pos) {
    //Height and width
    this.h = 10;
    this.w = 100;

    this.x = W/2 - this.w/2;
    this.y = (pos == "top") ? 0 : H - this.h;

}

//Push two paddles into the paddles array
paddles.push(new createPaddle("bottom"));
paddles.push(new createPaddle("top"));

//Setting up the parameters of ball
ball = {
    x: 2,
    y: 2,
    r: 5,
    c: "white",
    vx: 4,
    vy: 8,
    draw: function() {
        ctx.beginPath();
        ctx.fillStyle = this.c;
        ctx.arc(this.x, this.y, this.r, 0, Math.PI*2, false);
        ctx.fill();
    }
};

//Function for creating particles
function createParticles(x, y) {
    this.x = x || 0;
    this.y = y || 0;

    this.radius = 0.8;

    this.vx = -1.5 + Math.random()*3;
    this.vy = -1.5 + Math.random()*3;
}

//Draw everything on canvas
function draw() {
    paintCanvas();
    for(var i = 0; i < paddles.length; i++) {
        p = paddles[i];

        ctx.fillStyle = "white";
        ctx.fillRect(p.x, p.y, p.w, p.h);
    }

    ball.draw();
    update();
}

//Mouse Position track
function trackPosition(e) {
    mouse.x = e.pageX;
    mouse.y = e.pageY;
}

//function to increase speed after every 5 points
function increaseSpd() {
    if(points % 4 == 0) {
        ball.vx += (ball.vx < 0) ? -1 : 1;
        ball.vy += (ball.vy < 0) ? -2 : 2;
    }
}

//function to update positions
function update() {

    //Move the paddles on mouse move
    if(mouse.x && mouse.y) {
        for(var i = 1; i < paddles.length; i++) {
            p = paddles[i];
            p.x = mouse.x - p.w/2;
        }       
    }

    //Move the ball
    ball.x += ball.vx;
    ball.y += ball.vy;

    //Collision with paddles
    p1 = paddles[1];
    p2 = paddles[2];

    if(ball.y >= p1.y - p1.h) {
        if(ball.x >= p1.x && ball.x <= (p1.x - 2) + (p1.w + 2)){ 
            ball.vy = -ball.vy;
            points++;
            increaseSpd();

            particlePos.x = ball.x,
            particlePos.y = ball.y;
            flag = 1;
        }
    }

    else if(ball.y <= p2.y + 2*p2.h) {
        if(ball.x >= p2.x && ball.x <= (p2.x - 2) + (p2.w + 2)){ 
            ball.vy = -ball.vy;
            points++;
            increaseSpd();

            particlePos.x = ball.x,
            particlePos.y = ball.y;
            flag = 1;
        }
    }

    //Collide with walls
    if(ball.x >= W || ball.x <= 0)
        ball.vx = -ball.vx;

    if(ball.y > H || ball.y < 0) {
        clearInterval(int);
    }

    if(flag == 1) {
        setInterval(emitParticles(particlePos.x, particlePos.y), 1000/fps);
    }

}

function emitParticles(x, y) {

    for(var k = 0; k < particlesCount; k++) {
        particles.push(new createParticles(x, y));
    }

    counter = particles.length;

    for(var j = 0; j < particles.length; j++) {
        par = particles[j];

        ctx.beginPath(); 
        ctx.fillStyle = "white";
        ctx.arc(par.x, par.y, par.radius, 0, Math.PI*2, false);
        ctx.fill();  

        par.x += par.vx; 
        par.y += par.vy;

        par.radius -= 0.02; 

        if(par.radius < 0) {
            counter--;
            if(counter < 0) particles = [];
        }

    } 
}

var int = setInterval(draw, 1000/fps); 
```

现在，我的发射粒子函数在第 156 行，我在第 151 行调用了这个函数。这里的问题可能是因为我没有重置`flag`变量，但我尝试这样做并得到了更奇怪的结果。你可以在[这里查看](http://cssdeck.com/t/egkk1kra/8)。

通过重置`flag`变量，无限粒子的问题得到了解决，但现在它们只有在球与桨碰撞时才会动画并出现。所以，我现在没有任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-14T02:07:14.703

我可以在这里看到 2 个问题。

您的主要短期问题是您对 setinterval 的使用不正确，它的第一个参数是一个函数。

```
setInterval(emitParticles(particlePos.x, particlePos.y), 1000/fps);
```

应该

```
setInterval(function() {
    emitParticles(particlePos.x, particlePos.y);
}, 1000/fps);
```

其次，一旦你开始一个间隔，它就会永远运行——你不希望每个碰撞事件都让后台计时器像这样运行。

有一个要更新的粒子数组，并且每帧更新一次这个列表。当你制作新粒子时，将额外的粒子推入其中。

# vba - 创建一个根据 Excel 中的用户输入调整大小的表格？

> ID：11363577
> 
> 赞同：4
> 
> 时间：2012-07-06T13:53:17.693
> 
> 标签：vba, input, excel

作为记录，我使用的是 Excel 2010。

我正在尝试自学 VBA 以完成工作（他们为实习生提供了 VBA 的东西......），而我却陷入了最简单的事情。

我正在尝试制作一个三列宽的带边框的表格。表中的行数必须基于用户的输入量。在我的代码中，这是用户给出的值`Count`。

我的问题是我不知道如何选择我需要的范围。我知道如何选择范围的唯一方法是使用：

```
ActiveCell.Range("Top left cell:Bottom right cell").Select 
```

如果是 from `A1`to `C8`，我该如何做？我希望它会像这样工作：

```
ActiveCell.Range("A1:C(count)").Select 
```

这是我到目前为止所拥有的：

```
Option Explicit
Dim Count As Long
Dim CFLArray() As Variant
Sub TableCreation1()
    Range("A1").Select
    ActiveCell.FormulaR1C1 = "Time (days)"
    ActiveCell.Offset(0, 1).Range("A1").Select
    ActiveCell.FormulaR1C1 = "CFL (measured)"
    ActiveCell.Offset(0, 1).Range("A1").Select
    ActiveCell.FormulaR1C1 = "De (estimated)"
    ActiveCell.Offset(0, -2).Range("A1:C1").Select
    Selection.Font.Bold = True
    ActiveCell.Columns("A:A").EntireColumn.EntireColumn.AutoFit
    ActiveCell.Offset(0,1).Columns("A:A").EntireColumn.EntireColumn.AutoFit
    ActiveCell.Offset(0,2).Columns("A:A").EntireColumn.EntireColumn.AutoFit
    ActiveCell.Select
End Sub

Sub FindRange()
    Range("A2").Select
    Count = InputBox("How many pairs of data do you have? ")
End Sub 
```

大约一天前，我使用我工作中的一本书自学了 VBA，但我在其中找不到任何类似的内容。我的互联网搜索也失败了。最糟糕的是，我知道这将非常简单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T14:00:50.547

就是这么简单！你只是偏离了一点点。

改变：`ActiveCell.Range("A1:C(count)").Select`

到：`ActiveCell.Range("A1:C" & count).Select`

不过，我`count`在您的代码中看不到任何变量。

如果您知道它始终是同一列，您可以这样做：

`Range("A1:C" & ActiveSheet.Range("C1048576").End(xlUp).Row).Select`

（`1048576`是 Excel 2010 中的最大行。这可能不适合您的数据，但希望它能让您朝着正确的方向开始......）

`Select`此外，作为关于 VBA 的补充点，您在大多数情况下不需要使用。例如，这个：

```
Range("A1").Select

ActiveCell.FormulaR1C1 = "Time (days)" 
```

可以更简单地重写为：

```
Range("A1").FormulaR1C1 = "Time (days)" 
```

如果您只是使用文本：

```
Range("A1").value = "Time (days)" 
```

* * *

我还想指出 using`ActiveCell.Range("A1:C" & count).Select`与`ActiveSheet.Range("A1:C" & count).Select`. 根据当前选择的单元格，这些将选择不同的范围。如果您的意思是`A1:C8`，而不是`A1:C8 (relative to the current cell)`，那么您将要使用`ActiveSheet`（或省略）版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T13:57:34.427

那将是：

```
ActiveCell.Range("A1:C" & Count).Select 
```

是`&`字符串连接运算符。

* * *

旁注 - 您的第一个过程 (TableCreation1) 可以更简洁地重写：

```
Sub TableCreation1()

  Range("A1") = "Time (days)"
  Range("B1") = "CFL (measured)"
  Range("C1") = "De (estimated)"
  Range("A1:C1").Font.Bold = True
  Columns("A:C").EntireColumn.EntireColumn.AutoFit

End Sub 
```

# html - 推特网站上的可点击链接？

> ID：11363578
> 
> 赞同：0
> 
> 时间：2012-07-06T13:53:21.547
> 
> 标签：html, twitter

对，基于这个问题[Tweet clickable links with twitteroauth?](https://stackoverflow.com/questions/8984441/tweet-clickable-links-with-twitteroauth) ,

我如何实际解析整个字符串并将 t.co 链接部分替换为

```
<a href=""></a> 
```

部分？

例如，我在推特上发布了这个 -

```
Hey check out this link www.google.com 
```

目前在我的网站上显示

```
Hey check out this link http://t.co/generatedlink 
```

那么我如何解析它并使它成为这个

```
Hey check out this link <a href="http://t.co/generatedlink">http://t.co/generatedlink</a> 
```

这将在我的网站上显示如下：

嘿，看看这个链接[http://t.co/generatedlink](http://t.co/generatedlink)

我如何能够检测到推文文本的某个部分内部有链接？还是我要解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:59:26.840

您需要了解[Twitter 实体](https://dev.twitter.com/docs/tweet-entities)。

当您请求推文时，请确保您使用 include_entities=true

例如：

```
https://api.twitter.com/1/statuses/show.json?id=220197158798897155&include_entities=true 
```

在响应中，您将在其中看到一个名为“entities”的元素，您将看到“urls”。

这将包含推文中的所有 URL 及其位置（索引）。

```
"text": "Twitter for Mac is now easier and faster, and you can open multiple windows at once http://t.co/0JG5Mcq",

"entities": {

  "urls": [

    {

      "url": "http://t.co/0JG5Mcq",

      "display_url": "blog.twitter.com/2011/05/twitte…",

      "expanded_url": "http://blog.twitter.com/2011/05/twitter-for-mac-update.html",

      "indices": [

        84,

        103

      ]

    }

  ],

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:05:21.713

```
function urlify(text) {
    var urlRegex = /(https?:\/\/[^\s]+)/g;
    return text.replace(urlRegex, function(url) {
        return '<a href="' + url + '">' + url + '</a>';
    })}

var text = "Hey check out this link http://t.co/generatedlink";
var a = urlify(text);
alert(a); 
```

上述解决方案非常适合您的需求。我也有一个小提琴链接看看[http://jsfiddle.net/UhzCx/](http://jsfiddle.net/UhzCx/)

我在这里得到了这个答案[Detect URLs in text with JavaScript](https://stackoverflow.com/questions/1500260/detect-urls-in-text-with-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T14:09:30.257

如果你可以使用 javascript，这里有一个例子[http://jsfiddle.net/3VF96/13/](http://jsfiddle.net/3VF96/13/)

功能

```
function generateURL(text){
   var str=text;
    var n=str.indexOf("http");
    var strv=str.substring(0,n);
    var link=str.substring(n,str.length);
    strv=strv+" <a href='"+link+"'>"+link+"</a>";
      $("#Link").append(strv);
}
​ 
```

# android - SVN 错误：无法添加目录 'bin/classes/com'

> ID：11363583
> 
> 赞同：1
> 
> 时间：2012-07-06T13:53:48.877
> 
> 标签：android, eclipse, svn, subversive

我在问题的标题中收到错误：

```
"svn: Failed to add directory 'bin/classes/com'an unversioned directory of the same name already exists" 
```

当我试图从我当前的分支“切换”到主干时。它根本不允许我切换。当我更新分支上的 Android 目标和没有问题的主干时发生此错误（从 2.2 -> 3.0 更新）。但现在我不断收到这个错误！

我不确定如何解决这个问题。将不胜感激任何帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:59:15.013

`–-force`您可以通过使用带有 SVN checkout/update 命令的选项来解决此问题。

这会将相关文件夹标记为已更新，并将子文件夹文件标记为版本，但不会覆盖您在工作副本中可能进行的任何更改。

# list - scala zip列表到元组

> ID：11363584
> 
> 赞同：3
> 
> 时间：2012-07-06T13:53:50.460
> 
> 标签：list, scala, zip, tuples, variable-assignment

使用 JodaTime，尝试将 List[LocalDate] 转换为 Tuple2[JodaTime, JodaTime] 以便我可以像这样进行多重分配：

```
val(expire, now) = 
  List(row.expireDate, new JodaDate) zip (_.toDateTimeAtStartOfDay.getMillis) 
```

这当然不会编译。是否有类似简洁的方法来完成上述操作？我知道我可以手动完成：

```
val(expire, now) = 
  (row.expireDate.toDateTimeAtStartOfDay.getMillis, 
   new JodaDate().toDateTimeAtStartOfDay.getMillis) 
```

但这有点难看

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T14:06:56.767

```
val Seq(expire, now) = 
  Seq(row.expireDate, new JodaDate).map(_.toDateTimeAtStartOfDay.getMillis) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T14:08:35.150

您想要的（假设您不想转换到`Seq`路由）是[Scalaz 的元组`Bifunctor`实例](http://scalaz.github.com/scalaz/scalaz-2.9.1-6.0.4/doc.sxr/scalaz/Bifunctor.scala.html)（不在标准库中）。有了它，您可以编写以下内容：

```
scala> import scalaz._, Scalaz._
import scalaz._
import Scalaz._

scala> val cap = (_: String).toUpperCase
cap: String => java.lang.String = <function1>

scala> val removeLs = (_: String).replaceAll("l", "")
removeLs: String => java.lang.String = <function1>

scala> cap <-: ("hello", "world") :-> removeLs
res0: (java.lang.String, java.lang.String) = (HELLO,word) 
```

或者，在您的情况下：

```
val f = (_: JodaDate).toDateTimeAtStartOfDay.getMillis
val (expire, now) = f <-: (row.expireDate, new JodaDate) :-> f 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T14:07:48.443

```
val Seq(a, b) =
  Seq("a", "b").map(_.toUpperCase)

println("a, b = %s, %s".format(a, b)) // a, b = A, B 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T15:50:53.207

如果你想保持使用元组的类型安全（记住，当取消应用 a 时`Seq`，编译器不会检查长度），你可以编写一个包装器来添加一个标准库中不可用的函数，它会让你映射过去一个元组。

在使用单个函数映射两个元素的情况下，因为 a`Tuple2[A, B]`有两个类型参数，所以实现这项工作的关键是需要证明`A`和`B`是相同类型。为此，需要一个类型为隐式的参数`B =:= A`；如果类型确实相等，编译器将提供 type 的函数`B => A`。

```
class Tuple2Wrapper[A, B](t: (A, B)) {
  def bimap[C, D](f: A => C, g: B => D): (C, D) = (f(t._1), g(t._2))
  def <-:->[C](f: A => C)(implicit ev: B =:= A): (C, C) = bimap(f, f compose ev)
}

implicit def tuple2Tuple2Wrapper[A, B](t: (A, B)) = new Tuple2Wrapper(t)

scala> (1, 1) <-:-> (_ + 1)
res1: (Int, Int) = (2,2) 
```

`Tuple2`如果根据 Scalaz 的`Bifunctor`特征来实现，这可以以更通用和更有用的方式完成（适用于更多类型，而不仅仅是）。

# jquery - 使用 jquery 用正则表达式在 .attr() 上查找 .each

> ID：11363585
> 
> 赞同：0
> 
> 时间：2012-07-06T13:53:53.667
> 
> 标签：jquery, regex, each

我确信这已经被回答过，但我找不到正确的搜索词。

我想使用 jquery[1.3.2] .each() 函数在对象中搜索集合名称+var(i)`info1="value1", info2="value2"`函数的 (i) val 未知，可能是 0+n

我正在将 id 解析为函数，所以我的问题是

```
function findInfos(hostId){
 $($('#'+hostId).attr('[info]')).each(function(){
        alert($(this).attr('[info(i)]'));
    });
 } 
```

1.  我将如何插入 (i)
2.  是否可以对部分正则表达式进行搜索而不是使用 (i), (info*)`infoA, infoB`
3.  给定对象 ID 将被传递给函数并且不知道 .each() 的正确结构使用是什么

我确实看过`http://stackoverflow.com/questions/4606133/jquery-each-and-attr-functions`但无法弄清楚如何将 .each() 限制为传递的 ID。

谢谢艺术

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:56:34.610

如果我没记错的话，我相信你想要这样的东西：

```
function findInfos(hostId) {
    $('#' + hostId).attr('[info]').each(function(i) {
        alert($(this).attr('[info'+i+']'));
    });
}​ 
```

此外，避免将相同的 id 分配给多个对象，因为这可能会导致一些*令人讨厌的*错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:05:38.617

看起来您正在查看具有多个属性的单个元素，并且您想对与某个正则表达式匹配的属性执行某些操作，例如`/^info\d$/`. 如果是这样，您想要做的是循环遍历 DOM 元素的`attributes` `NamedNodeMap`：

```
​var el = $('#foo');
var attributes = el[0].attributes;

$.each(attributes,function(i,attr){
    var name = attr.nodeName;
    var val = attr.nodeValue;
    var regex = /^info\d$/;

    if(name.match(regex)) {
        //Do something with your matched attributes
    }
});​ 
```

使用 jQuery 1.3.2 测试

[**jsFiddle 演示**](http://jsfiddle.net/jackwanders/gcbqW/)

# c# - 通过 C# 将 Html utf-8 字符集转换为 ISO-8859-1

> ID：11363589
> 
> 赞同：0
> 
> 时间：2012-07-06T13:54:00.557
> 
> 标签：c#, html, html-agility-pack, encode, iso-8859-1

我一直在努力转换属性的 html 值，但没有成功。

这是我要转换的 HTML（确保字符集不会在此处显示，但是，我看到的和您看到的完全一样）。

```
<a href="https://sistemas.usp.br/jupiterweb/listarGradeCurricular?codcg=12&amp;codcur=12012&amp;codhab=1&amp;tipo=N" target="_blank">Administração – São Paulo – diurno</a> 
```

好吧，这个 htmlnode 的 VALUE 是“Administração - São Paulo - diurno”。

我正在使用 HtmlAgilityPack 来解析 HtmlPage ，一旦我到达这个节点，它的 innerText 值就像这样：`AdministraÃ§Ã£o â SÃ£o Paulo â diurno`

我假设页面的原始字符集是 UTF-8，因为这就是 html 上的编码标签对我说的。

如何将这个奇怪的字符串转换为 : `Administração - São Paulo - Diurno`？

我已经尝试过这些线程：[线程一](https://stackoverflow.com/questions/1922199/c-sharp-convert-string-from-utf-8-to-iso-8859-1-latin1-h)和[线程二](https://stackoverflow.com/questions/629617/how-to-convert-string-to-iso-8859-1) 并没有解决我的问题

**编辑：我通过 C# WebRequest Get 获取页面。**

**EDIT2：添加了 HtmlAgilityPack 标签**

问题是孤立的：WebRequest 有时会弄乱 Html。

有没有其他方法来设置编码？我正在尝试：_webReq.Encoding = "ISO-8859-1"

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:26:09.023

经过一个小测试后，您可以看到字符串未正确编码回其原始形式。

样品测试：

```
 var item = "Administração - São Paulo - Diurno";
 Console.WriteLine(item);

 var buffer = Encoding.UTF8.GetBytes(item);
 var item2 = Encoding.Default.GetString(buffer);
 Console.WriteLine(item2); 
```

这打印：

```
Administraçao - Sao Paulo - Diurno
AdministraA§A£o - SA£o Paulo - Diurno 
```

如您所见，原始字符串正在使用[UTF8转换为字节，但随后又使用](http://msdn.microsoft.com/en-us/library/system.text.encoding.utf8.aspx)[默认](http://msdn.microsoft.com/en-us/library/system.text.encoding.default.aspx)编码转换回字符串。

这是错误的。

如果 WebRequest.GetResponse() 将字符串作为错误值返回，则该方法存在问题。尝试将HttpWebRequest 上的[TransferEncoding属性设置为 UTF8。](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.transferencoding.aspx)

> 在设置 TransferEncoding 属性之前，您必须先将 SendChunked 属性设置为 true。通过将 TransferEncoding 设置为 null 来清除它对 SendChunked 的值没有影响。分配给 TransferEncoding 属性的值将替换任何现有内容。

或者您可以尝试在您打开的 StreamReader 上将编码设置为 UTF8。我可以看看你的代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-20T15:11:00.630

我解决了：

```
 HtmlWeb Webget = new HtmlWeb();
    HtmlDocument doc = new HtmlDocument();
    Webget.AutoDetectEncoding = false;
    Webget.OverrideEncoding = Encoding.UTF8;

    doc_tmp.OptionOutputAsXml = true;
    doc_tmp.OptionReadEncoding = true;
    doc_tmp.OptionFixNestedTags = true;
    doc_tmp.OptionDefaultStreamEncoding = Encoding.UTF8;

            doc_tmp.LoadHtml(tmp.InnerHtml);
            doc_tmp.Save(Console.Out); 
```

# java - 同步关键字 - 它是如何工作的？

> ID：11363592
> 
> 赞同：2
> 
> 时间：2012-07-06T13:54:20.063
> 
> 标签：java, multithreading, concurrency

如果我有一个类，称之为 X 并且 X 包含一个集合（假设我没有使用同步的集合之一，只是一个普通的集合）。

如果我要编写自己的方法 synchronized add() - 锁定是如何工作的？锁定是在 X 的实例上完成的，而不是在集合对象上完成的吗？

所以同步我的 add() 方法不会阻止 X 的许多实例调用 add() 并插入到集合中 - 因此我仍然可能遇到线程问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:56:59.583

同步方法锁定对象。如果你`X.add`是同步的，它将阻止同一`X`对象的其他同步方法的并发执行。如果该`X`对象之外的任何人有权访问同一集合，则该集合将不受保护。

如果您希望您的收藏受到保护，请确保世界其他地方无法通过`X`. 另外，这在您的问题中有点不清楚，但请注意同步的非静态方法会锁定*object*。假设每个`X`实例都有自己的集合，它们不会相互干扰。

另一种选择，顺便说一句，是锁定集合而不是`X`对象：

```
void add(Object o) {
   synchronized(myCollection) {
      myCollection.add(o);
   }
} 
```

这将同步对锁定集合而不是`X`对象的访问。使用任何你觉得更容易和更有效的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T14:02:02.877

> 如果我要编写自己的方法 synchronized add() - 锁定是如何工作的？锁定是在 X 的实例上完成的，而不是在集合对象上完成的吗？

锁定是在您同步的对象上完成的——而不是对象内的任何字段。为了使锁定起作用，所有线程必须在同一个确切对象上同步。通常`private final`，最好锁定一个对象。

```
 private final Collection<...> myCollection = ...
    ...
    synchronize (myCollection) {
        myCollection.add(...);
    } 
```

虽然一种常见的模式是锁定您要保护的对象，但它实际上可以是任何常量对象。你也可以这样做：

```
 private final Object lockObject = new Object();
    ...
    synchronize (lockObject) {
        myCollection.add(...);
    } 
```

> 所以同步我的 add() 方法不会阻止 X 的许多实例调用 add() 并插入到集合中 - 因此我仍然可能遇到线程问题？

如果您的应用程序的其他部分正在访问`myCollection` *而不*在`synchronized (myCollection)`块内，那么是的，您将遇到线程问题。您需要同步*所有*访问以正确保护集合并提供内存屏障。这意味着`add(...)`, `contains(...)`, 迭代器等。

通常，如果您试图保护集合或其他类，将其包装在执行同步的类中是有意义的。这隐藏了锁定并保护集合免受缺少`synchronized`块的代码的意外修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T13:57:27.387

在您的示例中，`synchronized`将确保一次只有一个线程可以在该类的一个实例上调用该方法。其他方法可以访问该集合，这是不安全的。查找[并发集合](http://docs.oracle.com/javase/tutorial/essential/concurrency/collections.html)以获取有关线程安全集合实现的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T14:12:03.237

您是否在**许多 X 实例中共享****一个集合**？然后，您需要在集合实例本身上进行同步。不要创建方法本身，而是将其所有代码包装在一个块中。**`synchronized``synchronized(coll) { ... }`**

 **另一方面，如果每个 X 都有自己的集合，那么`synchronized add()`您只需要。这将保证没有两个线程同时`add`在同一个实例上执行。**

# php - CI：上传到虚拟主机时找不到 My_Controller

> ID：11363595
> 
> 赞同：0
> 
> 时间：2012-07-06T13:54:31.840
> 
> 标签：php, codeigniter

我通过 Code Igniter 创建了一个应用程序，并且在 xampp 中一切正常。但是当我在我的网络服务器（Hawkhost）上启动它时，我收到了这个错误：

```
Fatal error: Class 'MY_controller' not found in /home/deremoec/public_html/an.deremoe/application/controllers/search.php on line 5 
```

我已经将 base_url 从 webhost 重命名为我的域。

我还将我的 .htaccess 重命名为当前的网络服务器文件夹。

为了清晰的理解

```
$config['base_url'] = 'http://an.deremoe.com/'; 
```

我的 .htaccess

```
RewriteEngine On

# Put your installation directory here:
# If your URL is www.example.com/, use /
# If your URL is www.example.com/site_folder/, use /site_folder/

RewriteBase /an.deremoe/

# Do not enable rewriting for files or directories that exist
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# For reuests that are not actual files or directories,
# Rewrite to index.php/URL
RewriteRule ^(.*)$ index.php/$1 [PT,L] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T14:11:59.507

这确实是区分大小写的问题，就像zourite所说的那样。这里的问题是，您必须命名文件`MY_Controller.php`和类`MY_Controller`。注意大写的“C”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:57:36.760

您似乎`http://an.deremoe.com/`正在浏览器中访问您的网站。但是您使用的 RewriteBase 会将其放在`http://whatever.com/an.deremoe/`.

尝试将您的 RewriteBase 更改为`/`

# javascript - (#3) 应用程序没有能力进行此 API 调用。JavaScript SDK

> ID：11363598
> 
> 赞同：5
> 
> 时间：2012-07-06T13:54:42.560
> 
> 标签：javascript, facebook, api

我正在尝试使用 JavaScript API 来点赞帖子，如下所示（id 是帖子 ID）：

```
FB.api('/'+id+'/likes', 'post'); 
```

例如FB.api('/55353596297_10150952824706298/likes', 'post');

这将返回“(#3) 应用程序没有能力进行此 API 调用”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:02:27.680

确保您有权影响这一点。大多数应用程序仅具有 PUBLISH 功能（提要）和基本权限。

现在，如果您要检索给定用户池的 Likes，请使用：

`FB.api("/likes?ids=55353596297,55353596298")`

用于检索多个用户兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T15:27:44.453

您的应用需要 publish_actions 权限。我的代码：

```
FB.api(
    '131389306871851_642563079087802/likes',
    'post',
    {access_token:yourTokenHere}, // from authResponse.accessToken
    function(r) {
        console.log(r)            // Prints "true"
    }
); 
```

# iphone - Cocos2d 中的关门过渡

> ID：11363600
> 
> 赞同：1
> 
> 时间：2012-07-06T13:54:44.763
> 
> 标签：iphone, cocos2d-iphone, transition

我正在尝试让关门过渡就像我们在 Kingdom Rush 中看到的那样。（左右两扇门）

我在想的是两种方法：

*   第一个可能是自定义转换，将输入作为门图像

    对于这种方法，尽管这是我的首选方法，但我找不到方法

*   第二种方法可能是在第一个场景中创建关门动画，并在第二个场景中关闭相同的门来推动第二个场景。之后做开门动画。

    这种方法是可能的，但我想知道场景转换中是否会出现闪烁

有没有人遇到过这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:23:41.800

查看 cocos2d 源代码中的 CCTransition.m 文件。在翻转过渡类中，您可以找到 CCOrbitCamera 动作使用的示例。在场景的情况下，它会将它们相对于它们的中心翻转。但是所有的转换都是相对于节点的锚点进行的。因此，您可以尝试不同的变体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T16:55:43.403

我建议第二个。这很容易......像这样：

在单独的类中制作动画，并在您的场景中调用动画以在场景结束时关闭并将下一个场景替换为：`[[CCDirector sharedDirector]replaceScene:[NextScene scene]];`

如果您的场景加载相对较快..它根本不会闪烁..但如果它确实（出于某种原因）创建另一个线程并将“大事”添加到后台线程中的下一个场景，以便场景立即加载，并在您为门设置动画时加载其余部分。

要检测门是否关闭......只需`NSUserDefaults`在第一个场景中将 BOOL 设置为 YES，然后在第二个场景中检查门是否关闭。

至于动画本身，只需在屏幕外制作 2 个 ccsprite，然后在屏幕上对其进行动画处理。另外..因为当您离开场景时精灵已经在内存中，您不需要在下一个场景中加载任何内容..所以它是即时的。

# asp.net-mvc-3 - id 是 URL 路径的 Html.ActionLink 导致 404

> ID：11363603
> 
> 赞同：1
> 
> 时间：2012-07-06T13:55:04.743
> 
> 标签：asp.net-mvc-3

我知识有限，所以根据需要殴打我。

我使用带有 ASPX(C#) 视图的 EF 创建了一个控制器。我继承了这个设置。

目标表/EF 中的 PK 是实际 URL。因此，当您单击链接 ActionLink 提供 URL 时，我会收到 404。

```
Html.ActionLink("Edit", "Edit", new { id=item.ImagePath }) 
```

所以 id= /foldername/foldername2/image.jpg

这会导致浏览器尝试加载资源。

有人可以给我一个线索如何相应地处理这个“id”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:57:30.933

您是否更改了路由以接受这种 id？

如果没有，那么您将需要进入您的 global.asax.cs 文件并编辑地图路线。

这应该可以帮助您：

[创建自定义路由](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-custom-routes-cs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:04:48.593

控制器中的 EDIT 操作...正在等待字符串 ID 还是整数？

如果 EDIT 操作接受字符串，那么您可以将 ID 的“/”转义...这样路由引擎就不会认为 ID 是 URL。

# r - Anova Type 2 和对比

> ID：11363610
> 
> 赞同：0
> 
> 时间：2012-07-06T13:55:23.480
> 
> 标签：r, anova

我必须分析的数据的研究设计很简单。有 1 个对照组 (CTRL) 和 2 个不同的治疗组 (TREAT_1 和 TREAT_2)。数据还包括 2 个协变量 COV1 和 COV2。我被要求检查数据中是否存在线性或二次处理效果。

我创建了一个虚拟数据集来解释我的情况：

```
df1 <- data.frame(

Observation = c(rep("CTRL",15), rep("TREAT_1",13), rep("TREAT_2", 12)),

COV1 = c(rep("A1", 30), rep("A2", 10)),

COV2 = c(rep("B1", 5), rep("B2", 5), rep("B3", 10), rep("B1", 5), rep("B2", 5), rep("B3", 10)),

Variable = c(3944133, 3632461, 3351754, 3655975, 3487722, 3644783, 3491138, 3328894,
             3654507, 3465627, 3511446, 3507249, 3373233, 3432867, 3640888,

             3677593, 3585096, 3441775, 3608574, 3669114, 4000812, 3503511, 3423968,
             3647391, 3584604, 3548256, 3505411, 3665138, 

             4049955, 3425512, 3834061, 3639699, 3522208, 3711928, 3576597, 3786781,
             3591042, 3995802, 3493091, 3674475)
)

plot(Variable ~ Observation, data = df1) 
```

从图中可以看出，对照组和治疗组之间存在线性关系。为了检查这种线性效应是否具有统计显着性，我使用 contr.poly() 函数更改对比度并拟合如下线性模型：

```
contrasts(df1$Observation) <- contr.poly(levels(df1$Observation))

lm1 <- lm(log(Variable) ~ Observation, data = df1)
summary.lm(lm1) 
```

从总结中我们可以看出，线性效应在统计上是显着的：

```
Observation.L  0.029141   0.012377    2.355    0.024 *  
Observation.Q  0.002233   0.012482    0.179    0.859 
```

然而，第一个模型不包括任何两个协变量。包括它们会导致线性关系的 p 值不显着：

```
lm2 <- lm(log(Variable) ~ Observation + COV1 + COV2, data = df1)
summary.lm(lm2)

Observation.L  0.04116    0.02624   1.568    0.126    
Observation.Q  0.01003    0.01894   0.530    0.600    
COV1A2        -0.01203    0.04202  -0.286    0.776    
COV2B2        -0.02071    0.02202  -0.941    0.354    
COV2B3        -0.02083    0.02066  -1.008    0.320 
```

到目前为止，一切都很好。但是，我被告知要进行 II 型 Anova 而不是 I 型。要进行 II 型 Anova，我使用了 car 包中的 Anova() 函数。

```
Anova(lm2, type="II")

Anova Table (Type II tests)

Response: log(Variable)
              Sum Sq Df F value Pr(>F)
Observation 0.006253  2  1.4651 0.2453
COV1        0.000175  1  0.0820 0.7763
COV2        0.002768  2  0.6485 0.5292
Residuals   0.072555 34 
```

使用 Type II 的问题是您没有得到线性和二次效应的 p 值。所以我不知道效果是否在统计上是线性的或二次的。

我发现以下代码为 Observation 生成了与 Anova() 函数相同的 p 值。但结果也不包括线性或二次效应的任何 p 值：

```
lm2 <- lm(log(Variable) ~ Observation + COV1 + COV2, data = df1)
lm3 <- lm(log(Variable) ~ COV1 + COV2, data = df1)
anova(lm2, lm3) 
```

有人知道如何进行 II 型 anova 和对比函数来获得线性和二次效应的 p 值吗？

帮助将不胜感激。

最好的彼得

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T20:29:08.910

我为此找到了一个部分解决方法，但可能需要进一步更正。stats 包中函数 drop1() 的文档表明该函数产生类型 II 平方和（尽管此页面： http: [//www.statmethods.net/stats/anova.html](http://www.statmethods.net/stats/anova.html)）声明 drop1() 产生类型III 平方和，我没有花太多时间研究这个（http://afni.nimh.nih.gov/sscc/gangc/SS.html）来交叉检查平方和计算。您可以使用它来手动计算所有内容，但我怀疑您是在问这个问题，因为如果有人已经完成了它会很好。

无论如何，我向名为 Observation2 的虚拟数据添加了第二个向量，并*仅*使用线性对比进行设置（您只能在给定时间为给定向量指定一组对比）：

```
df1[,"Observation2"]<-df1$Observation
contrasts(df1$Observation2, how.many=1)<-contr.poly 
```

然后创建了第三个线性模型：

```
lm3<-lm(log(Variable)~Observation2+COV1+COV2, data=df1) 
```

并使用 drop1 进行 F 检验，以比较两个模型之间来自 II 型 ANOVA 的 F 统计量：lm2，其中包含线性项和二次项：

```
drop1(lm2, test="F") 
```

*lm3，它只*包含线性对比：

```
drop1(lm3, test="F") 
```

这不包括模型之间的直接比较，尽管线性模型的 F 统计量更高（并且 p 值相应更低），这将导致人们依赖它而不是二次模型。

# coffeescript - 摩卡速递咖啡应该等于不工作

> ID：11363613
> 
> 赞同：2
> 
> 时间：2012-07-06T13:55:45.960
> 
> 标签：coffeescript, express, mocha.js

我正在关注一个[教程](http://blog.james-carr.org/2012/01/16/blog-rolling-with-mongodb-node-js-and-coffeescript/#comment-348560)。当我跑步时

```
require "should"

describe "feature", ->
   it "should add two numbers", ->
    (2+2).should.equal 4 
```

我跑

```
mocha routes-test.coffee --compilers coffee:coffee-script 
```

我收到以下错误

```
 1) feature should add two numbers:
 AssertionError: expected {} to be true
  at Object.true (/home/../../coffeepress/node_modules/should/lib/should.js:251:10)
  at Context.<anonymous> (/home/../../coffeepress/test/routes-test.coffee:7:28)
  at Test.Runnable.run (/usr/lib/node_modules/mocha/lib/runnable.js:184:32)
  at Runner.runTest (/usr/lib/node_modules/mocha/lib/runner.js:300:10)
  at Runner.runTests.next (/usr/lib/node_modules/mocha/lib/runner.js:346:12)
  at next (/usr/lib/node_modules/mocha/lib/runner.js:228:14)
  at Runner.hooks (/usr/lib/node_modules/mocha/lib/runner.js:237:7)
  at next (/usr/lib/node_modules/mocha/lib/runner.js:185:23)
  at Runner.hook (/usr/lib/node_modules/mocha/lib/runner.js:205:5)
  at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

这里发生了什么？我安装了 should.js ( npm install should) 和 mocha。是否有一些语法错误或一些设置错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:53:29.493

您的问题可能是您的节点版本和 mocha 版本之间不匹配，并且您应该使用该版本。如果您`package.json`完全使用该教程中的文件，您将加载 mocha 0.10.0 并且应该是 0.5.1。当我使用当前版本的节点（v0.8.1）尝试相同的操作时，我看到以下警告`npm install`：

```
npm WARN engine mocha@0.10.0: wanted: {"node":">= 0.4.x < 0.7.0"} (current: {"node":"0.8.1","npm":"1.1.34"})
npm WARN engine commander@0.5.1: wanted: {"node":">= 0.4.x < 0.7.0"} (current: {"node":"0.8.1","npm":"1.1.34"}) 
```

然后，当我针对您提供的示例测试运行 mocha 时，我得到了同样的错误。

简单地改变摩卡咖啡和应该在我`package.json`的版本是

```
"mocha": ">=0.10.0",
"should": ">=0.5.1" 
```

然后运行`npm update`解决了问题，测试运行良好。`"latest"`如果您想锁定它们（分别在我写这篇文章时），`"1.3.0"`您还可以将这些版本或这些软件包的当前版本设置为。`"0.6.3"`

# java - 字符编码问题？

> ID：11363614
> 
> 赞同：2
> 
> 时间：2012-07-06T13:55:48.173
> 
> 标签：java, character-encoding

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:01:01.493

Re: your final observation - Java bytes are always signed. To interpret them as unsigned, you can bitwise AND them with an int:

```
byte[] bytes = "”".getBytes("UTF-8");
for(byte b: bytes)
{
    System.out.println(b & 0xFF);
} 
```

which outputs:

```
226 
128
157 
```

Note that your string is actually three bytes long in UTF-8\.

As pointed out in the comments, it depends on the encoding. For UTF-16 you get:

```
254
255
32
29 
```

and for US-ASCII or ISO-8859-1 you get

```
63 
```

which is a question-mark (i.e. "I dunno, some new-fangled character"). [Note that](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#getBytes%28java.lang.String%29):

> The behavior of this method [`getBytes()`] when this string cannot be encoded in the given charset is unspecified. The CharsetEncoder class should be used when more control over the encoding process is required.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T14:04:17.247

I think that it will be better to print character code like this way:

```
System.out.println((int)'”');//result is 8221 
```

[This link](http://www.codetable.net/decimal/8221) can help you to explain this extraordinary double quote (include html code).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T15:12:23.653

To answer your question about displaying the character correctly in an HTML document, you need to do one of two things: either set the encoding of the document or entity-ize the non-ascii characters.

To set the encoding you have two options.

1.  Update your web server to send an appropriate charset argument in the Content-Type header. The correct header would be `Content-Type: text/html; charset=UTF-8`.
2.  Add a `<meta charset="UTF-8" />` tag to the head section of your page.

Keep in mind that Option 1 will take precedence over option 2\. I.e. if you are already setting an incorrect charset in the header, you can't override it with a meta tag.

The other option is to entity-ize the non ASCII characters. For the quote character in your question you could use `&rdquo;` or `&#8221;` or `&#x201D;`. The first is a user friendly named entity, the second specifies the Unicode code point of the character in decimal, and the third specifies the code point in hex. All are valid and all will work.

Generally if you are going to entity-ize dynamic content out of a database that contains unknown characters you're best off just using the code point versions of the entities as you can easily write a method to convert any character >127 to its appropriate code point.

One of the systems I currently work on actually ran into this issue where we took data from a UTF-8 source and had to serve HTML pages with no control over the Content-Type header. We actually ended up writing a custom java Charset which could convert a stream of Java characters into an ASCII encoded byte stream with all non-ASCII characters converted to entities. Then we just wrapped the output stream in a Writer with that Charset and output everything as usual. There are a few gotchas in implementing a Charset correctly, but simply doing the encoding yourself is pretty straight forward, just be sure to handle the surrogate pairs correctly.

# visual-studio - Visual Studio 生成后事件中的路径

> ID：11363616
> 
> 赞同：6
> 
> 时间：2012-07-06T13:55:59.593
> 
> 标签：visual-studio, command-line, command-line-arguments, robocopy

我有以下问题：因为 Visual Studio 无法处理链引用，我需要将所有“链引用”-DLL 复制到我程序的 bin 文件夹中。为此，我使用 Robocopy。

唯一的问题是，我在 Visual Studio 构建后事件中输入的命令行拆分不正确。

```
ROBOCOPY "$(TargetDir)" "$(SolutionDir)Map\bin\$(ConfigurationName)\" *.dll /LOG:RCPY.log 
```

这是我的构建事件。我现在得到的只是：

```
Gestartet: Fri Jul 06 15:40:30 2012

Quelle : F:\Sicherung\Visual Studio\Projects\Map\Core\Core.GUI\bin\Release\ F:\Sicherung\Visual\
Ziel : F:\Sicherung\Visual Studio\Projects\Map\Core\Core.GUI\bin\Release\Studio\Projects\Map\Map\bin\Release\

Dateien : *.dll

Optionen: /COPY:DAT /R:1000000 /W:30 
```

但是，它在第​​二个路径/参数中的“Visual Studio”的空白处将其拆分。我用引号尝试了所有内容，但要么没有执行 Robocopy（至少日志文件没有被覆盖），要么我得到了显示在上面的这个日志条目......

Visual Studio 显示：

> 命令 ... 以代码 16 退出

这意味着存在致命错误，主要是由于路径无效。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-03-06T16:01:36.550

与 xcopy 不同，robocopy 将 \" 视为转义字符，如[http://ss64.com/nt/robocopy.html](http://ss64.com/nt/robocopy.html)所述：

> 如果源或目标是“带引号的长文件夹名”，则不要包含尾部反斜杠，因为这将被视为转义字符，即“C:\some path\”将失败，但“C:\some path\”或“C:\一些路径。” 或 "C:\some path" 将起作用。

由于尾部反斜杠已包含在构建后宏中，因此您需要在源和目标参数的末尾添加第二个反斜杠或句点：

```
ROBOCOPY "$(TargetDir)." "$(SolutionDir)Map\bin\$(ConfigurationName)\." *.dll /LOG:RCPY.log 
```

我建议添加句点，因为这消除了转义字符而不是解决它。

# image - 如何在 Matlab 中根据像素对齐图像？

> ID：11363626
> 
> 赞同：0
> 
> 时间：2012-07-06T13:56:41.793
> 
> 标签：image, matlab, image-processing, alignment

我有两张相似的图片：[A] 和 [B]（请看图片）。它们在 X 和 Y 中偏移。如何使用 A 中的像素作为参考将 A 对齐到 B？换句话说，就是将A点指示的像素点定位到B点上，使A点和B点集中在这个点点​​上。谢谢你。

![图像 A](../Images/e324fab20c601a08a9fc81e165a95f24.png) ![图像 B](../Images/10f829cf4c0b5cfc5d1d333f190f4960.png)

最终结果手动制作

![在此处输入图像描述](../Images/c79a83668a4fe8c5b6d01bcf99252eb8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:36:37.217

你可以手动完成：

```
img1 = 255-mean(imread('a1.png'),3);
img2 = 255-mean(imread('a2.png'),3);

subplot(221);imagesc(img1);axis image
[x1 y1] = ginput(1);
subplot(222);imagesc(img2);axis image
[x2 y2] = ginput(1);

x = x1-x2;
y = y1-y2;

T = maketform('affine',[1 0 x;0 1 y; 0 0 1]');
img2N = imtransform(img2,T,'xdata',[1 size(img1,2)],'ydata',[1 size(img1,1)]);

subplot(2,2,[3 4]);
imagesc(max(img1,img2N));axis image 
```

要自动执行此操作，您可以执行以下操作::

```
%size(img2) <= size(img1)
img1 = 255-mean(imread('a1.png'),3);
img2 = 255-mean(imread('a2.png'),3);
subplot(221);imagesc(img1);axis image
subplot(222);imagesc(img2);axis image
colormap(gray(256))
c = normxcorr2(img2,img1);
[y x] = find(c==max(c(:)));
y = y-size(img2,1);
x = x-size(img2,2);

T = maketform('affine',[1 0 x;0 1 y; 0 0 1]');
img2N = imtransform(img2,T,'xdata',[1 size(img1,2)],'ydata',[1 size(img1,1)]);
subplot(2,2,[3 4]);
imagesc(max(img1,img2N));axis image 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:57:34.790

我认为您想要的是图像配准，在您的情况下，这需要至少 2 个控制点，因为它是没有反射的仿射变换。鉴于这两张图片的相似性，我认为很容易找到另一个推荐点。之后，您可以使用`imtransform`或简单`cp2tform`地执行注册。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T17:27:57.130

您将需要微调“XData”和“YData”属性，但您可以这样做...

```
rgbA = imread('A.jpg'):
rgbB = imread('B.jpg');
alpha(.2)
image(rgbA,'XData',2)
alpha(.2)
hold on
image(rgbB,'XData',2)
alpha(.2) 
```

# mysql - MySQL 中两个几乎相同的表避免使用 UNION

> ID：11363631
> 
> 赞同：2
> 
> 时间：2012-07-06T13:56:50.460
> 
> 标签：mysql, sql, optimization

我不太擅长 MySQL，我将编写一个查询来**计算用户发送的消息**，基于它的类型和`is_auto`字段。

消息可以是“小文本消息”或“时事通讯”类型。我创建了两个实体，它们之间有一些不同的字段。重要的是**`messages_count`它在表中不存在，`newsletter`并且在查询中使用**：

```
CREATE TABLE IF NOT EXISTS `small_text_message` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `messages_count` int(11) NOT NULL,
  `username` varchar(255) NOT NULL,
  `method` varchar(255) NOT NULL,
  `content` longtext,
  `sent_at` datetime DEFAULT NULL,
  `status` varchar(255) NOT NULL,
  `recipients_count` int(11) NOT NULL,
  `customers_count` int(11) NOT NULL,
  `sheduled_at` datetime DEFAULT NULL,
  `sheduled_for` datetime DEFAULT NULL,
  `is_auto` tinyint(1) NOT NULL,
  `user_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB; 
```

和：

```
CREATE TABLE `newsletter` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `subject` varchar(78) DEFAULT NULL,
  `content` longtext,
  `sent_at` datetime DEFAULT NULL,
  `status` varchar(255) NOT NULL,
  `recipients_count` int(11) NOT NULL,
  `customers_count` int(11) NOT NULL,
  `sheduled_at` datetime DEFAULT NULL,
  `sheduled_for` datetime DEFAULT NULL,
  `is_auto` tinyint(1) NOT NULL,
  `user_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB; 
```

我结束了一个`UNION`查询。**可以缩短或优化此查询，因为唯一的区别是`messages_count`应该始终为 1`newsletter`吗？**

```
SELECT
CONCAT('sms_', IF(is_auto = 0, 'user' , 'auto')) AS subtype,
SUM(messages_count * (customers_count + recipients_count)) AS count
FROM small_text_message WHERE status <> 'pending' AND user_id = 1
GROUP BY is_auto
UNION
SELECT
CONCAT('newsletter_', IF(is_auto = 0, 'user' , 'auto')) AS subtype,
SUM(customers_count + recipients_count) AS count
FROM newsletter WHERE status <> 'pending' AND user_id = 1
GROUP BY is_auto 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T14:02:54.710

我没有看到任何简单的方法来避免 UNION（或 UNION ALL）操作，这将返回指定的结果集。

我建议您使用`UNION ALL`运算符代替`UNION`运算符。那么执行计划将不包括消除重复行的步骤。（您已经对每个查询进行了 GROUP BY 操作，这两个查询不可能产生相同的行。）

否则，您的查询看起来就像写的一样。

（考虑这个问题总是一件好事，可能有更好的方法吗？为了得到你所要求的结果集，从你拥有的模式中，你的查询看起来和它会得到的一样好。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T14:06:24.493

如果您正在寻找更一般的数据库建议，我建议重组表以将常见元素分解为一个表，可能称为`outbound_communication`或其他表，其中包含所有常见字段，然后可能有特定类型的“子表”来托管该类型独有的字段。这确实意味着需要一个简单的 JOIN 来选择您想要的*所有*字段，但同样，它已标准化并且实际上使这种情况更容易（一个表包含所有感兴趣的实体）。此外，您可以选择只将 JOIN 作为“视图”编写一次，然后您现有的代码甚至不需要更改即可查看这两个表，就好像它们从未更改过一样。

```
CREATE TABLE IF NOT EXISTS `outbound_communicaton` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `content` longtext,
  `sent_at` datetime DEFAULT NULL,
  `status` varchar(255) NOT NULL,
  `recipients_count` int(11) NOT NULL,
  `customers_count` int(11) NOT NULL,
  `sheduled_at` datetime DEFAULT NULL,
  `sheduled_for` datetime DEFAULT NULL,
  `is_auto` tinyint(1) NOT NULL,
  `user_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB;

CREATE TABLE `small_text_message` (
  `oubound_communication_id` int(11) NOT NULL,
  `messages_count` int(11) NOT NULL,
  `username` varchar(255) NOT NULL,
  `method` varchar(255) NOT NULL,
  PRIMARY KEY (`outbound_communication_id`),
  FOREIGN KEY (outbound_communication_id) 
    REFERENCES outbound_communicaton(id)
) ENGINE=InnoDB;

CREATE TABLE `newsletter` (
  `oubound_communication_id` int(11) NOT NULL,
  `subject` varchar(78) DEFAULT NULL,
  PRIMARY KEY (`outbound_communication_id`),
  FOREIGN KEY (outbound_communication_id) 
    REFERENCES outbound_communicaton(id)
) ENGINE=InnoDB; 
```

然后选择一个文本消息是这样的：

```
SELECT * 
FROM outbound_communication AS parent
  JOIN small_text_message 
    ON parent.id = small_text_message.outbound_communication_id
WHERE parent.id = 1234; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T14:02:06.853

查询的性质本质上是来自小文本消息和时事通讯表的数据的联合，因此 UNION 查询是唯一现实的公式。例如，这两个表之间没有关联。

所以，我认为你的查询非常正确。

你为什么担心UNION？

# java - 将视频分成预定义的块

> ID：11363638
> 
> 赞同：0
> 
> 时间：2012-07-06T13:57:14.830
> 
> 标签：java, video, video-processing

我想知道如何将视频分成帧并将它们存储为一个集合。我有几个以不同帧速率收集的摄像机，我希望能够像`.avi`或一样输入视频文件，`.mp4`并且必须使用帧集合（可能是 LinkedList）。在代码的某个地方，我会注入我可以自己做的帧率依赖。就是不知道怎么剪视频。有人建议使用 JMF，但我对此感到非常困惑。有谁知道任何例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T23:08:24.353

[Xuggler](http://www.xuggle.com/xuggler/ "许格勒")是 ffmpeg 库之上的 Java 库，它使这样的任务在 Java 中相对容易。查看网站上的教程以快速入门。

# c# - SQL 查询性能 - 如果有的话，哪种方法更好？

> ID：11363645
> 
> 赞同：2
> 
> 时间：2012-07-06T13:57:30.163
> 
> 标签：c#, sql, performance, tsql, stored-procedures

我必须从 SQL Server 返回几个记录集来构造 C# 对象。虽然 EF 目前不支持（可能是 beta 版本）返回这样的复杂对象，但我不得不求助于使用 ADO.NET 返回 DataSet 来检索数据，然后再将其转换为令人愉悦的 C# 表示形式，见下文。

```
SELECT * FROM ...
exec dbo.usp_SP1 @ProductID,@CatalogName
exec dbo.usp_SP2 @ProductID,@CatalogName 
```

进行更少的数据库调用总是更好，但是由于如何执行此查询，是否会对每个 DataSet 进行多个请求是最糟糕的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:02:17.087

一次数据库往返总是优于三次（或两次）。

即使使用这组查询，您的代码也可能是干净的。您只需`DataTable.Load`连续调用 3 次，即可从`DbDataReader`.

所以是的，我推荐一个更大的查询和一个`DataSet`用于所有结果集的查询。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T14:07:59.220

您可以在`dataset`. `ds.Tables[index].Rows...`. 所以我会打一个电话，获取所有数据，然后通过调用另一个 sproc 或只是一个简单的`SELECT`.

# ios - 从包含 .SVC 的 URL 获取 JSON 数据？iOS 5 中的 wsdl 文件？

> ID：11363651
> 
> 赞同：1
> 
> 时间：2012-07-06T13:57:50.137
> 
> 标签：ios, json, post, xcode4.2

有人请在这个查询中帮助我。

如何从 iphone (ios5) 中包含 .SVC 文件的 URL 获取 JSON 数据？

链接如下：http://156.160.45.118/api/Login.svc?wsdl（非原创）

和参数是：电子邮件和密码。

那么如何验证登录凭据呢？

我的代码：

```
NSString *username = emailField.text;
 NSString *password = passwordField.text;
 NSMutableDictionary *dictionnary = [NSMutableDictionary dictionary];
 [dictionnary setObject:username forKey:@"user_email"];
 [dictionnary setObject:password forKey:@"user_password"];

 NSError *error = nil;
 NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dictionnary
 options:kNilOptions
 error:&error];   

 NSString *urlString = @"http://156.160.45.118/api/Login.svc?wsdl";
 NSURL *url = [NSURL URLWithString:urlString];

 // Prepare the request
 NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
 [request setHTTPMethod:@"POST"];
 [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
 [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
 [request setValue:@"json" forHTTPHeaderField:@"Data-Type"];
 [request setValue:[NSString stringWithFormat:@"%d", [jsonData length]]  forHTTPHeaderField:@"Content-Length"];
 [request setHTTPBody:jsonData];    

 NSError *errorReturned = nil;
 NSURLResponse *theResponse =[[NSURLResponse alloc]init];
 NSData *data = [NSURLConnection sendSynchronousRequest:request
 returningResponse:&theResponse
 error:&errorReturned];
 if (errorReturned) 
 {
 //...handle the error
 }
 else 
 {
 NSString *retVal = [[NSString alloc] initWithData:data
 encoding:NSUTF8StringEncoding];
 NSLog(@"%@", retVal);

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:20:47.347

最后我通过研究很多事情得到了答案。

```
NSString *username = emailField.text;
        NSString *password = passwordField.text;
        NSMutableDictionary *dictionnary = [NSMutableDictionary dictionary];
        [dictionnary setObject:username forKey:@"user_email"];
        [dictionnary setObject:password forKey:@"user_password"];

        NSError *error = nil;
        NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dictionnary
                                                           options:kNilOptions
                                                             error:&error];   

        NSString *urlString = http://156.160.45.118/api/Login.svc/login;

        NSURL *url = [NSURL URLWithString:urlString];
 NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
        [request setHTTPMethod:@"POST"];

        [request setHTTPBody:jsonData];
        NSURLResponse *response = NULL;
        NSError *requestError = NULL;
        NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&requestError];
        NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding] ;
         NSLog(@"%@", responseString); 
```

# java - JPanel 上的永久背景图像

> ID：11363654
> 
> 赞同：0
> 
> 时间：2012-07-06T13:58:04.813
> 
> 标签：java, swing, jpanel, background-image

我正在构建一个用于在特定图像上绘制叠加层的摆动界面。我已经[找到](https://stackoverflow.com/questions/2937403/jpanel-background-image) [了几个如何在 JPanel 上绘制图像的](https://stackoverflow.com/questions/4051408/jpanel-with-image-background) [示例](https://stackoverflow.com/questions/4280870/jpanel-with-a-background-image)，并且我能够毫无困难地做到这一点。但是，我想保持此图像完全静态，同时在其上动态绘制叠加层。考虑到这一点，如果我可以将图像设置为面板的永久背景，而不是`paintComponent()`每次都重绘图像会更好。这将特别有用，因为经常会出现我想要`removeAll()`在面板上绘制当前图形并重新绘制新图形的情况。

所以我的问题是：有没有办法在 JPanel 中设置永久背景图像，还是每次`paintComponent()`调用时都必须重绘图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:47:36.140

*   `Image`至于_ `Icon / ImageIcon`_`JLabel`

*   使用这种[`JLabel`方法`JPanel`](https://stackoverflow.com/questions/10140800/why-to-add-jpanel-to-a-jlabel-under-what-circumstance-this-situation-can-arise)

*   与`JFrame(BorderLayout)`or相比， [JLabel 没有实现任何 LayoutManager](https://stackoverflow.com/questions/8575641/how-returns-xxxsize-from-jcomponents-added-to-the-jlabel)`JPanel(FlowLayout)`

*   你必须定义正确的`LayoutManager`，接受 PreferredSize 是它的孩子

*   那么对于JPanel，所有方法都可以访问（几乎几乎），因为容器工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:05:31.677

也许您可以尝试将 Jpanel 放入另一个 Jpanel 中。您在容器 JPanel 上绘制图像。然后使您的内部 JPanel 成为透明的。这样，当上面没有对象时，您会看到父 JPanel 的背景没有改变。

# zend-framework - Zend 导航对象在视图 phtml 中为空

> ID：11363655
> 
> 赞同：0
> 
> 时间：2012-07-06T13:58:11.457
> 
> 标签：zend-framework, partial, zend-navigation, php

我有一个基于模块的应用程序，带有一个默认模块和一个用户模块。从布局调用的我的导航菜单工作正常，但现在想创建一个侧边菜单。我想从用户/设置/语言中的例如language.phtml 中调用它。

用我的语言.phtml

```
...
<?php echo $this->navigation()->menu()
    ->setPartial('partials/sidemenu.phtml')
    ->render(); ?>
... 
```

此部分位于用户模块的脚本目录中。正在调用部分，但由于某种原因导航/容器对象为空。

提前致谢！

彼得

# javascript - 为什么 "true" == true 在 JavaScript 中显示为 false？

> ID：11363659
> 
> 赞同：96
> 
> 时间：2012-07-06T13:58:21.620
> 
> 标签：javascript, string, equals

[MDC 对`==`算子的描述如下](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comparison_Operators)：

> 如果两个操作数的类型不同，JavaScript 会转换操作数，然后应用严格比较。如果任一操作数是数字或布尔值，则尽可能将操作数转换为数字；否则，如果任一操作数是字符串，则尽可能将另一个操作数转换为字符串。

考虑到这一点，我将评估`"true" == true`如下：

1.  它们是同一类型吗？**不**
2.  操作数是数字还是布尔值？**是的**
3.  我们可以将两者都转换为数字吗？**否**( `isNaN(Number("true")) // true`)
4.  任一操作数都是字符串吗？**是的**
5.  我们可以将另一个操作数转换为字符串吗？**是**( `String(true) === "true" // true`)

我最终得到了字符串`"true"`and `"true"`，它的计算结果应该是`true`，但 JavaScript 显示为 false。

我错过了什么？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-07-06T14:01:08.220

因为`"true"`转换为`NaN`，while`true`转换为`1`。所以他们不同。

就像您报道的那样，两者都被转换为数字，因为至少`true`可以（参见 Erik Reppen 的评论），然后进行比较。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-05-22T09:58:14.593

`==`比较运算符在[ECMA 5 中定义](http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.3)为：

4.  如果[Type](http://www.ecma-international.org/ecma-262/5.1/#sec-8) (x) 是 Number 并且[Type](http://www.ecma-international.org/ecma-262/5.1/#sec-8) (y) 是 String，则
    返回比较结果 x == [ToNumber](http://www.ecma-international.org/ecma-262/5.1/#sec-9.3) (y)。
5.  如果[Type](http://www.ecma-international.org/ecma-262/5.1/#sec-8) (x) 是 String 并且[Type](http://www.ecma-international.org/ecma-262/5.1/#sec-8) (y) 是 Number，则
    返回比较结果[ToNumber](http://www.ecma-international.org/ecma-262/5.1/#sec-9.3) (x) == y。
6.  如果[Type](http://www.ecma-international.org/ecma-262/5.1/#sec-8) (x) 是 Boolean，则返回比较结果[ToNumber](http://www.ecma-international.org/ecma-262/5.1/#sec-9.3) (x) == y。
7.  如果[Type](http://www.ecma-international.org/ecma-262/5.1/#sec-8) (y) 为 Boolean，则返回比较结果 x == [ToNumber](http://www.ecma-international.org/ecma-262/5.1/#sec-9.3) (y)。

因此， "true" == true 被评估为：

1.  "true" == [ToNumber](http://www.ecma-international.org/ecma-262/5.1/#sec-9.3) (true) *  （通过规则 7）*
2.  “真” == 1
3.  [ToNumber](http://www.ecma-international.org/ecma-262/5.1/#sec-9.3) ("true") == 1 *  （通过规则 5）*
4.  南== 1

===> 假的

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-22T19:54:06.080

根据抽象等式比较算法

[http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.3](http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.3)

如果其中一个 oprend 是布尔值而另一个不是，则布尔值是数字 0 或 1 的转换器。所以`true == "true"`是假的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-15T20:35:25.843

相等运算符 (`==`和`!=`) 使用[抽象相等比较算法](https://262.ecma-international.org/5.1/#sec-11.9.3)来比较两个操作数。

### `"true" == true`

由于`"true"`is`String`和`true`is `Boolean`，我们需要返回`"true" == Number(true)`（算法中的步骤`7`）的结果，即`"true" == 1`。

### `"true" == 1`

由于`"true"`is`String`和`1`is `Number`，我们需要返回（算法中的`Number("true") == 1`步骤）的结果。返回。现在我们有了.`5``Number("true")``NaN``NaN == 1`

### `NaN == 1`

现在两个操作数的类型相同 ( `Number`)。根据算法，如果两个操作数都是`Number`并且其中一个是`NaN`，`false`则返回（`1.c.i`算法中的步骤）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-10T12:52:59.320

解释考虑场景**true == "true"**。
直接，上面返回**false**，然而，我们的期望是**true**
J​​avaScript 使用**抽象相等比较算法**，所以根据算法

```
true == "true"

// If one of the operands is Boolean, convert the Boolean operand to 1 if it is true and +0 if it is false
ConvertToNumber(true) == "true"

1 == "true"

// When the algorithm finds the above statements, it thinks that it needs to do one more conversion - 
// "When comparing a number to a string, try to convert the string to a numeric value"
1 == ConvertToNumber("true)
1 == NaN

// Which returns false 
```

# java - 是否有一种“正确”的方式来做“你喜欢这个，其他喜欢这个的人也喜欢这些东西，所以你可能会喜欢这些”查询？

> ID：11363662
> 
> 赞同：0
> 
> 时间：2012-07-06T13:58:30.847
> 
> 标签：java, algorithm, social-media-like

我需要为登录用户生成一个建议列表。基本上是“因为你喜欢这些东西，而其他喜欢这些东西的人也喜欢这些东西，所以你可能也喜欢这些东西”。

我可能会想出一个像样的算法来产生这样的结果，但在我重新发明轮子之前，我想知道是否已经有一种通用的或已建立的方法或搜索算法来产生这样的结果？

任何建议或意见将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:10:31.513

最常用的方法是[K 最近邻算法](http://en.wikipedia.org/wiki/K-nearest_neighbor_algorithm)。

算法是这样的：

*   选择 N 个“邻居”来考虑（例如 5 个）
*   选择一种对两个用户的喜欢之间的相似性进行评分的方法（例如两个用户喜欢的项目总数）
*   要为用户推荐，首先要找到具有最相似个人资料的其他 N 个用户。这里有 5 个与我们的用户共同点赞最多的用户。
*   推荐是当前用户不喜欢的那些其他用户喜欢的东西。自然地，其他 N 个用户中大多数人喜欢的项目是最佳候选者。

如果 Apache Mahout 适合你，那就去吧。但如果不是，这是迄今为止最常用（也是最简单）的算法之一。如果你在谷歌上搜索，你可能想要搜索“协作过滤”，这是这个问题的公认名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:03:18.710

[Apache Mahout](http://mahout.apache.org/)是一种方法。它相当复杂，但提供了良好的结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T14:03:36.793

通常[Apache Mahout](http://mahout.apache.org/)用于此类事情，请参阅“建议”

# css - GWT 共享 CSS 样式不起作用

> ID：11363668
> 
> 赞同：3
> 
> 时间：2012-07-06T13:58:55.327
> 
> 标签：css, gwt, uibinder, gwt2

我需要在一些 UI Binder 模板中使用相同的样式，所以我按照以下说明进行了所有操作：[https](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Using_an_external_resource) ://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Using_an_external_resource 。

所以我做了以下事情：

1、创建资源界面：

```
公共接口资源扩展 ClientBundle {
    @Source("shared.css")
    风格风格（）；

    公共接口样式扩展 CssResource {
        字符串 grayedOut();
    }
}

```

`shared.css`2.在与资源类相同的目录中创建文件：

```
.grayedOut{
    背景颜色：红色；
}

```

`with`3\. UI Binder模板 新增元素：`<ui:with type="correct.package.Resources" field="res"/>`

4、在UI Binder模板中增加了对样式的引用：`addStyleNames="{res.style.grayedOut}"`

但是它不起作用。视图被渲染，就像 grayedOut 样式根本没有应用一样。

但我观察到两件事：

1.  在 Firebug/Chrome 开发工具中，我可以看到该元素分配了一个与我要添加的样式相对应的滥用样式名称：（`class="GAWERH0MI gwt-TabLayoutPanelContent"`似乎`GAWERH0MI`对应于我的`grayedOut`类）但我无法在“元素样式”面板中找到它可能意味着这个类是空的（没有主体）。（我做了实验并将空类分配给在该工具中具有相同效果的元素）。
2.  当我在 .css 中更改样式名称时，出现运行时错误，即`grayedOut`找不到样式，这似乎意味着我的样式类通常已成功找到，但由于某种原因无法按预期工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T14:14:55.873

您可能忘记调用实例`ensureInjected()`。`Resources.Style`

这是为 a 自动完成的`<ui:style>`（因为您不编写`ClientBundle`and`CssResource`接口，它们是由 UiBinder 为您生成的），但不会为任何其他`CssResource`.

不过，您可以使用`@UiField Resources res`它，它将被注入 的值`<ui:with field="res">`，因此`res.style().ensureInjected()`在调用`createAndBindUi`.
IMO，但是您最好将`Resources`实例注入您的视图并使用`@UiField(provided=true)`，因此请确保`ensureInjected()`在将实例注入您的视图之前调用它，或者选择`ensureInjected()`在您的每个视图中调用。如[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Share_resource_instances](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Share_resource_instances)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T13:33:15.417

ui小部件java文件：

```
@UiField
Resources res;
public YourWidget() {
        initWidget(uiBinder.createAndBindUi(this));     
        res.style().ensureInjected();
    } 
```

ui 小部件 xml 文件：

```
<ui:with field='res' type="your path to Resource class" /> 
```

和

```
<g:Label addStyleNames="{res.style.grayedOut}" ui:field="icon"></g:Label> 
```

# sql - 来自重叠间隔的 Oracle 时间线报告

> ID：11363669
> 
> 赞同：5
> 
> 时间：2012-07-06T13:58:56.683
> 
> 标签：sql, oracle, intervals

我正在使用 Oracle 10g，并且我有一个具有重叠间隔的表。以简化形式：

```
create TABLE INTERVAL_TEST (
    STARTDATE DATE NOT NULL,
    ENDDATE DATE,
    ITEM VARCHAR2(100) NOT NULL
)

insert into INTERVAL_TEST (STARTDATE, ENDDATE, ITEM) values (to_date('2012-01-01', 'YYYY-MM-DD'), null, 'AAA');
insert into INTERVAL_TEST (STARTDATE, ENDDATE, ITEM) values (to_date('2012-02-01', 'YYYY-MM-DD'), to_date('2012-03-01', 'YYYY-MM-DD'), 'BBB'); 
```

如您所见，有重叠的条目。第一个中的 null 意味着这是“永远”有效的。我需要生成一份报告，在时间线上显示历史记录，列出每行的有效项目数。输出中不应该有时间重叠，而是应该为每个没有变化的子间隔列出所有有效项目：

```
START       END          VALID_ITEMS
----------  ----------   --------------
2012-01-01  2012-02-01   AAA
2012-02-01  2012-03-01   AAA, BBB
2012-03-01  NULL         AAA 
```

是否有生成这样结果的 SQL 语句？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T14:54:21.617

您可以在一个大喊大叫的声明中做到这一点：

```
SQL> WITH timeline AS
  2          (SELECT mydate startdate,
  3                  lead(mydate) OVER (ORDER BY mydate) - 1 enddate
  4             FROM (SELECT startdate mydate FROM interval_test
  5                   UNION
  6                   SELECT enddate FROM interval_test)
  7            WHERE mydate IS NOT NULL)
  8  SELECT startdate,
  9         enddate,
 10         max(substr(sys_connect_by_path(item, ','), 2)) items
 11    FROM (SELECT t.startdate,
 12                 t.enddate,
 13                 item,
 14                 row_number() OVER (PARTITION BY t.startdate, t.enddate
 15                                    ORDER BY i.item) rn
 16            FROM    timeline t
 17                 JOIN
 18                    interval_test i
 19                 ON nvl(i.enddate, DATE '9999-12-31') - 1 >= t.startdate
 20                AND i.startdate <= nvl(t.enddate, DATE '9999-12-31'))
 21  START WITH rn = 1
 22  CONNECT BY rn = PRIOR rn + 1
 23         AND startdate = PRIOR startdate
 24  GROUP BY startdate, enddate
 25  ORDER BY startdate;

STARTDATE  ENDDATE    ITEMS
---------- ---------- --------------------
2012-01-01 2012-01-31 AAA
2012-02-01 2012-02-29 AAA,BBB
2012-03-01            AAA 
```

我使用第一个子查询列出所有间隔：

```
SQL> SELECT mydate startdate,
  2                  lead(mydate) OVER (ORDER BY mydate) - 1 enddate
  3             FROM (SELECT startdate mydate FROM interval_test
  4                   UNION
  5                   SELECT enddate FROM interval_test)
  6            WHERE mydate IS NOT NULL;

STARTDATE  ENDDATE
---------- ----------
2012-01-01 2012-01-31
2012-02-01 2012-02-29
2012-03-01 
```

加入以下查询，该查询列出了给定两个日期的一行中的所有项目：

```
SELECT max(substr(sys_connect_by_path(item, ','), 2)) items
  FROM (SELECT item, row_number() OVER (ORDER BY item) rn
          FROM interval_test
         WHERE nvl(enddate, DATE '9999-12-31') >= :startdate
           AND startdate <= :enddate)
CONNECT BY rn = PRIOR rn + 1
START WITH rn = 1; 
```

# .net - 允许服务访问特定客户端版本

> ID：11363675
> 
> 赞同：0
> 
> 时间：2012-07-06T13:59:24.163
> 
> 标签：.net, wcf, n-tier-architecture, wcf-extensions

我正在为如下场景寻找一些架构理念：

**环境：** 我有一个服务（托管在 Windows 服务中的 wcf），它具有多种功能。我提供客户端库（.NET windows dll），它提供 API 来访问此服务，并且还具有其他客户端功能。

**问题：** 出于业务原因，我需要为服务寻找一种机制，只允许特定版本的客户端访问某些功能（访问某些 API），而不允许访问其他版本的客户端。基本上，我希望教育服务信任来自 1 个特定客户端版本的所有请求，并仅通过任何其他版本的客户端支持基本操作。

**请注意：**不能添加任何用户许可或用户安全上下文，因为我只想允许或拒绝特定版本的软件客户端的访问，与用户无关。

**例如：**从版本 X 客户端，我需要允许所有 READ 和 SAVE 功能。但是从任何其他版本中，我只能允许所有 READ 而不允许任何 SAVE。

**可能的解决方案：** 到目前为止，我已经考虑向客户端添加一个带有版本号的配置，并将其传递给来自客户端的所有服务请求。该服务可以从数据库或 Web 配置中了解要完全信任的版本。在服务中，我可以拦截通道并查看是否有来自客户端消息的特定字符串，因此支持\拒绝访问特定 API。

对这种情况的任何其他优雅的建议，或者如果有人做过任何相关的事情，那也会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:19:37.993

您可以为客户端提供一个哈希值，当它与对服务的请求一起提供时，将根据客户端提供的哈希值授予客户端访问权限？

就像你提到的那样，有很多方法可以给猫剥皮。

请问您为什么要让您的服务/客户端系统以这种方式运行？

# multithreading - Dart 会在多核环境中并行执行隔离吗？

> ID：11363676
> 
> 赞同：21
> 
> 时间：2012-07-06T13:59:25.747
> 
> 标签：multithreading, parallel-processing, dart, dart-isolates

### 问题

Dart 中的隔离是否会利用多核环境中的所有可用内核并行运行，还是会在单个内核上多路复用？

### 背景

Google将 Dart 编程语言中的*隔离*（单线程并发单元）描述为在主堆栈上运行的“轻量级线程”，不会阻塞。

因此，在我看来，它只能在单核上多路复用，而不能在 SMP、双核、多核或集群环境中的多个核上并行运行。

虽然，我找不到任何关于此的信息，因此我提出了一个谦虚的问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-06T14:48:26.800

## 警告：以下代码已过时，不适用于 Dart 1.0。

### 简短的回答

也许。

### 长答案

[dart:isolate 库指南](http://www.dartlang.org/docs/library-tour/#dartisolate---concurrency-with-isolates)指出：“*隔离**可能**在单独的进程或线程中运行，具体取决于实现。对于 Web 应用程序，如果可用，隔离可以编译为 Web 工作者。* ”（我的重点）

运行此代码并观察您的 CPU 负载将告诉您您的实现是否这样做。

```
#import('dart:isolate');
main() {
  for (var tmp = 0; tmp < 5; ++tmp) {
    SendPort sendPort = spawnFunction(runInIsolate);
    sendPort.call(tmp).then((reply) {
      print(reply);
    });
  }
}

runInIsolate() {
  port.receive((msg, SendPort reply) {
    var k = 0;
    var max = (5 - msg) * 100000000; 
    for (var i = 0; i < max; ++i) {
        i = ++i - 1;
        k = i;
    }
    reply.send("I received: $msg and calculated $k");
  });
} 
```

独立的 dartvm**将**并行运行隔离，利用所有可用的内核。Dart 的浏览器实现*可能会有所不同*，具体取决于是否实现了 Web Worker。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-20T05:44:41.223

这是 Dart 1.0 的更新代码。

```
import 'dart:isolate';

main() {
  int counter = 0;

  ReceivePort receivePort = new ReceivePort();

  receivePort.listen((msg) {
    if (msg is SendPort) {
      msg.send(counter++);
    } else {
      print(msg);
    }
  });

  for (var i = 0; i < 5; i++) {
    Isolate.spawn(runInIsolate, receivePort.sendPort);
  }
}

runInIsolate(SendPort sendPort) {
  ReceivePort receivePort = new ReceivePort();
  sendPort.send(receivePort.sendPort);

  receivePort.listen((msg) {
    var k = 0;
    var max = (5 - msg) * 100000000; 
    for (var i = 0; i < max; ++i) {
        i = ++i - 1;
        k = i;
    }
    sendPort.send("I received: $msg and calculated $k");
  });
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-06T14:32:51.887

我查了一下。隔离似乎是实际的线程。

> 隔离之间唯一可用的通信机制是传递消息。

非常好，除了

> 每个隔离区都有自己的堆，这意味着内存中的所有值（包括全局值）仅可用于该隔离区。

一点都不好，因为消息：

> 也可以发送对象实例（将在过程中复制

很坏。

这种方案似乎无法在不复制的情况下将大量数据从一个隔离区传递到另一个隔离区，因此消除了有效的*隔离间*通信。

我不会使用它，因为这种限制不允许按地址传递大对象/缓冲区，就像通常使用传统线程所做的那样。

起初它看起来很有趣，因为我几乎只使用消息传递设计，但他们坚持只使用私有堆来破坏线程间通信。

# xslt - XPath 1.0 选择兄弟姐妹的不同属性

> ID：11363678
> 
> 赞同：2
> 
> 时间：2012-07-06T13:59:30.733
> 
> 标签：xslt, xpath-1.0

我四处寻找，但无法获得任何我发现可行的想法。

这些是我在 xml 文件中的几个节点（从 db 生成）

```
<PANELS>        
<PANEL ATTR1="7"  ATTR2="37" ATTR3="31"/>
<PANEL ATTR1="8"  ATTR2="37" ATTR3="31"/>
<PANEL ATTR1="8A" ATTR2="37" ATTR3="31"/>
</PANELS>
<ZONES>
<ZONE ATTR1="7"  ATTR2="37" ATTR3="31" />
<ZONE ATTR1="8"  ATTR2="37" ATTR3="31" />
<ZONE ATTR1="8A" ATTR2="37" ATTR3="31" />
</ZONES> 
```

我希望能够从每一个中选择不同的 ATTR3。

目前，这适用于第一个 `//PANELS/PANEL[not(@ATTR3 = (preceding::*/@ATTR3))]` 并返回 '31' 的预期结果

但是当我尝试对第二个做同样的事情时，它什么也没有返回（我希望它再次返回'31'） `//ZONES/ZONE[not(@ATTR3 = (preceding::*/@ATTR3))]`

我知道第二个不起作用，因为 ATTR3 的值对于所有这些都相同，但是如何获得每个节点的不同属性值？

（这被用作我用来显示每个不同值的 for-each 的谓词）

这是这样使用的，其中一个`for-each`用于**ZONES**，一个用于**PANELS**

```
<xsl:for-each select="//PANELS/PANEL[not(@ATTR3 = (preceding::*/@ATTR3))]">
<xsl:sort select="@ATTR3"/>
<xsl:value-of select="@ATTR3" />
<xsl:if test="position()!=last()">, </xsl:if>
</xsl:for-each> 
```

我希望它返回

```
PANELS: 31

ZONES: 31 
```

我尝试过使用`preceding-sibling`而不是`preceding`，但后来我得到了

```
PANELS: 31, 31

ZONES: 31 
```

每个都在这样的模板中：

```
 <xsl:template match="//HEADER/ZONES" >              
    <fo:block font-size="10pt">
        <fo:table  table-layout="fixed" > 
            <fo:table-column column-width="proportional-column-width(1)"/>
            <fo:table-column column-width="proportional-column-width(7)"/>
            <fo:table-body>
                <fo:table-row>
                    <fo:table-cell  border-bottom="none">
                        <fo:block font-weight="bold">
                            <xsl:text>Zones:</xsl:text>
                        </fo:block>
                    </fo:table-cell >                       
                    <fo:table-cell>
                        <fo:block>
                            <xsl:for-each select="//HEADER/ZONES/ZONE[not(@ATTR3 = (preceding-sibling::*/@ATTR3))]">
                                <xsl:sort select="@ATTR3"/>
                                <xsl:value-of select="@ATTR3" />
                                <xsl:if test="position()!=last()">, </xsl:if>
                            </xsl:for-each>
                        </fo:block>
                    </fo:table-cell>
                </fo:table-row>             
            </fo:table-body>
        </fo:table>
    </fo:block>
    </xsl:template> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T14:39:54.310

以下 XSLT 使用*31*`preceding-siblings`代替`preceding`并因此产生正确的重复次数：

 *```
<?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="text"/>

    <xsl:template match="//HEADER/ZONES">
        ZONES:
        <xsl:for-each select="//ZONES/ZONE[not(@ATTR3 = (preceding-sibling::*/@ATTR3))]">
            <xsl:sort select="@ATTR3"/>
            <xsl:value-of select="@ATTR3" />
            <xsl:if test="position()!=last()">, </xsl:if>
        </xsl:for-each>
    </xsl:template>

    <xsl:template match="//HEADER/PANELS">
        PANELS:
        <xsl:for-each select="//PANELS/PANEL[not(@ATTR3 = (preceding-sibling::*/@ATTR3))]">
            <xsl:sort select="@ATTR3"/>
            <xsl:value-of select="@ATTR3" />
            <xsl:if test="position()!=last()">, </xsl:if>
        </xsl:for-each>
    </xsl:template>

</xsl:stylesheet> 
```

本文档的输出：

```
<HEADER>
    <PANELS>
        <PANEL ATTR1="7"  ATTR2="37" ATTR3="31"/>
        <PANEL ATTR1="8"  ATTR2="37" ATTR3="31"/>
        <PANEL ATTR1="8A" ATTR2="37" ATTR3="31"/>
    </PANELS>
    <ZONES>
        <ZONE ATTR1="7"  ATTR2="37" ATTR3="31" />
        <ZONE ATTR1="8"  ATTR2="37" ATTR3="31" />
        <ZONE ATTR1="8A" ATTR2="37" ATTR3="31" />
    </ZONES>
</HEADER> 
```

如下：

```
 ZONES:
    31
    PANELS:
    31 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T14:48:59.947

**这个简短（13 行）和简单的转换——只有一个模板，没有硬编码的字符串**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text" />
 <xsl:strip-space elements="*"/>

 <xsl:template match="t/*[*/@ATTR3]">
     <xsl:value-of select="concat(name(), ':')"/>
     <xsl:for-each select="*/@ATTR3[not(. = ../preceding-sibling::*/@ATTR3)]">
       <xsl:value-of select="concat(' ', .)"/>
     </xsl:for-each>
     <xsl:text> </xsl:text>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML（包装到单个顶部元素中以成为格式良好的）文档时**：

```
<t>
    <PANELS>
        <PANEL ATTR1="7"  ATTR2="37" ATTR3="31"/>
        <PANEL ATTR1="8"  ATTR2="37" ATTR3="31"/>
        <PANEL ATTR1="8A" ATTR2="37" ATTR3="31"/>
    </PANELS>
    <ZONES>
        <ZONE ATTR1="7"  ATTR2="37" ATTR3="31" />
        <ZONE ATTR1="8"  ATTR2="37" ATTR3="31" />
        <ZONE ATTR1="8A" ATTR2="37" ATTR3="31" />
    </ZONES>
</t> 
```

**产生想要的正确结果：**

```
PANELS: 31 ZONES: 31 
```*

# css - 如何让一个 div 表现得像另一个 div？

> ID：11363679
> 
> 赞同：0
> 
> 时间：2012-07-06T13:59:30.880
> 
> 标签：css

我正在从父主题中制作子主题。在子主题中，我有一些 div 的行为（样式方面）几乎与父主题中的 div 完全相同。父主题具有 HTML Wysiwyg

在我的孩子主题中，我喜欢使用 HTML Wysiwyg

如何在不更改父 .css 文件的情况下赋予 div "edButtonHTMLChild" 与 edButtonHTML 相同的 .css 样式？

就像是

```
#edButtonHTMLChild = #edButtonHTML 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:59:12.520

如前所述，普通 CSS 不支持继承。如果继承是您想要的东西，以及过多的其他功能，不妨试试[**Sass**](http://sass-lang.com/)或[**LESS**](http://lesscss.org)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T14:04:44.130

如果它具有与直接类一起应用的样式，那么您可以将这些类添加到类列表中。如果它是按 ID 设置样式的，那么您必须将 CSS 规则复制到以您的自定义元素为目标的选择器中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T15:51:21.873

如果您不想复制 CSS 或使用 LESS 之类的东西，您可以使用一些 javascript 来复制元素的样式并将它们应用于您的元素。看看这个线程：

[jQuery CSS插件返回元素的计算样式以伪克隆该元素？](https://stackoverflow.com/questions/1004475/jquery-css-plugin-that-returns-computed-style-of-element-to-pseudo-clone-that-el)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T14:04:53.437

普通 CSS 不支持继承；您需要将孩子的选择器添加到父母的规则集中：

```
#edButtonHTMLChild, #edButtonHTML{
  styles...
} 
```

或使用 Javascript 应用相同的样式。

# javascript - 初始化时返回 tinyMCE 的实例

> ID：11363684
> 
> 赞同：1
> 
> 时间：2012-07-06T13:59:41.270
> 
> 标签：javascript, tinymce

是否可以通过`oninit`回调使此函数返回 textEditor？我试图`textEditor`作为参数传递给`initialised()`但只是未定义。

```
function magic() {

    var returnMe;

    function initialised() {
        console.log('initialised');
        //tried to set returnMe here, textEditor undefined! what!
    }

    var textEditor = new tinymce.Editor(element, {

        ...

        oninit : initialised(),

        ...

        }
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:30:15.840

解决方案很简单：

```
function initialised() {
    console.log('initialised');
}

function magic() {

    var returnMe;

    var textEditor = new tinymce.Editor(element, {

        ...

        oninit : initialised(),

        ...

        }
    });

} 
```

# java - swt jface tableviewer 按数据获取行

> ID：11363685
> 
> 赞同：2
> 
> 时间：2012-07-06T13:59:43.443
> 
> 标签：java, swt, jface, tableviewer

我已使用`TableViewer`. 我用`ArrayContentProvider`然后`TableViewer.setInput`映射我的数组。

我现在需要做的是更改表格中几行的背景颜色，以便在视觉上突出显示它们。每行对应于数组中的一个对象。`TableItem`但是我不知道如何在给定映射类型的对象的情况下获取对行（即它的）的引用。我可以获得一个给定行的对象，`TableItem.getData()`但我真正想做的是获取`TableItem`给定的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:25:35.623

您可以[`TableViewer.doFindItem`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/TableViewer.html#doFindItem%28java.lang.Object%29)使用反射调用受保护的方法。

或者更好的是，让您的标签提供者实施[`ITableColorProvider`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/ITableColorProvider.html)并且`TableViewer`会自动使用正确的颜色。

# java - Java 下拉菜单值选择

> ID：11363687
> 
> 赞同：0
> 
> 时间：2012-07-06T13:59:45.663
> 
> 标签：java

我在java中有一个带有3个选项的下拉菜单，旁边是一个运行按钮。我在 java 中使用 eclipse 并使用 apache wicket 和 html 在 web 浏览器中运行程序。我的问题是，如果我从下拉列表中选择打印数据并单击运行按钮，它应该在控制台中打印打印成功。我尝试了各种方法及其编译，但只是没有根据 system.out.println 语句向我显示它应该执行的消息。

```
 Button b = new Button("Ausführen");
    b.addActionListener(new ActionListener() {

      public void actionPerformed(ActionEvent e) {
        if(role.getValue().equals("Print Data")) {
          System.out.println("Printing successfull!");
        }
      }

    });

    form.add(b); 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:55:19.340

我猜 ActionListener 不会与 Apache Wicket 一起使用。只需使用普通的表单按钮，然后创建一个单独的打印类并在您的 onSubmit 方法中编写一个打印方法。

# php - MySQL SELECT 女性不是男性

> ID：11363688
> 
> 赞同：0
> 
> 时间：2012-07-06T13:59:46.167
> 
> 标签：php, mysql

我的数据库中有一个名为 categories 的字段，其中包含服装店主题的类别（新品、畅销品、男士、女士、儿童等）

我有一个记录有：New Arrival, Men 我有第二个记录有：New Arrival, Women

我如何查询数据库以仅选择女性或男性？

我已经厌倦了这个：`SELECT * FROM products WHERE categories RLIKE [[:<:]]Men[[:>:]]'`

这对男性有效，但对女性无效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T14:02:27.557

好吧，如果您**实际上**存储的是“Men”或“Women”，那么您的数据库设置**不正确**

您应该使用链接表让我们说`categories`将产品链接到类别。

然后您可以执行以下操作：

```
SELECT * FROM products p
JOIN categoriesToProducts ctp ON ctp.productId = p.productId
JOIN categories c ON c.categoryId = ctp.categoryId
WHERE c.categoryName = "Men"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T14:08:37.673

你可以使用`find_in_set function`，看看这个例子

```
mysql> select * from fruits;
+-------------------------------+
| fruit                         |
+-------------------------------+
| banana, apple, orange, grapes |
+-------------------------------+
1 row in set (0.00 sec)

mysql> select * from fruits where find_in_set('banana',fruit);
+-------------------------------+
| fruit                         |
+-------------------------------+
| banana, apple, orange, grapes |
+-------------------------------+
1 row in set (0.00 sec) 
```

所以尝试类似：

```
SELECT * FROM products WHERE categories where find_in_set('men',categories)' 
```

确保后面的单词`,`完全一样，没有多余的空格

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T14:04:59.723

就用这个：

```
SELECT * FROM products WHERE categories LIKE 'Men%';
SELECT * FROM products WHERE categories LIKE 'Women%'; 
```

只使用正确的 %

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-06T14:49:31.160

由于您在选择“女性”时没有问题，因此您可以使用如下查询来解决男性问题：

```
SELECT * FROM products WHERE categories LIKE '% Men'; 
```

只需在字母“M”前留一个空格。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-06T14:06:23.903

您可能只想简化您的方法。

```
SELECT * FROM products WHERE categories = 'Men';
SELECT * FROM products WHERE categories = 'Women'; 
```

由于“Men”是“WoMEN”的一部分，这可能是您的 sql 出现问题的原因？

但是，由于它引起了我的注意，您的数据库可能包含更长的字符串，您也可以这样做。

```
SELECT * FROM products WHERE categories = 'New Arrival, Men';
SELECT * FROM products WHERE categories = 'New Arrival, Women'; 
```

# css - 为什么这些 CSS3 列宽元素会在它们的容器中添加额外的空格？

> ID：11363689
> 
> 赞同：1
> 
> 时间：2012-07-06T13:59:47.937
> 
> 标签：css

我创建了[这个示例](http://jsfiddle.net/sZpC2/)来演示这种奇怪的行为。我使用了 CSS 规则的 webkit 前缀版本，并且仅针对 Mac 版 Chrome 19 对其进行了测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:06:12.257

列中的额外空间来自您指定的一些样式（例如`width:100000px;`）。要修复，请使用以下 CSS（[示例](http://jsfiddle.net/sZpC2/4/)）：

```
#container {
 height: 250px;
 -webkit-columns: 15em;
 -moz-columns: 15em;
 -ms-columns: 15em;
 -o-columns: 15em;
 columns: 15em;
}
#container article {
 vertical-align: top;
 display: inline;
}
#container article img {
 display: block;
 margin: 0 auto;
 max-width: 100%;
 max-height: 100%;
} 
```

# linux - 找出 Linux 中的剩余时间

> ID：11363690
> 
> 赞同：2
> 
> 时间：2012-07-06T13:59:57.443
> 
> 标签：linux, shell, unix

好的，所以我所处的情况是我想确切地计算出距离特定日期（例如 2013 年 5 月 15 日）还有多少天。日期并不重要，但我的想法是计算出剩下的天数在到达那一天之前。

我想过做这样的事情（伪代码）：

```
y=$end_year-$cur_year

if [ y -ge 1 ]; then
   days=$y*365
else
     continue
fi

if [ $end_month -gt $cur_month ]; then
     m=$end_month-$cur_month
else
     contine
fi

if [ $end_day -gt $cur_day ]; then
    d=$end_day-$cur_day
else
    continue
fi

result=$days+$m+$d 
```

现在我不知道是否有更简单的方法可以做到这一点，因为我对 Linux 和 shell 脚本非常陌生，所以如果有更好的方法，请帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T14:07:53.567

这个是根据 unix 时间戳的差异来计算的：

```
date
Fri Jul  6 15:04:04 BST 2012
echo $(( (`date -d "May 15, 2013" +'%s'` - `date +'%s'`) / (60*60*24) ))
312 
```

除法是固定的，因此`1`如果一小部分天算作一整天，则必须添加 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T14:13:05.117

```
[06 Jul 2012 18:13:47] rush@home  ~
$ DIFF=$(( $(date -d '05/15/2013 00:00' +%s) - $(date +%s) )) ; \
  echo $(( DIFF / (3600*24) )) days $(( DIFF % (3600*24) / 3600 )) \
  hours $(( DIFF % 3600 / 60 )) minutes $(( DIFF % 60 )) seconds left
312 days 5 hours 46 minutes 13 seconds left 
```

# configuration - cdh4 hadoop-hbase PriviledgedActionException as:hdfs (auth:SIMPLE) 原因:java.io.FileNotFoundException

> ID：11363692
> 
> 赞同：4
> 
> 时间：2012-07-06T14:00:10.810
> 
> 标签：configuration, hadoop, mapreduce, hbase, cloudera

我已经安装了 cloudera cdh4 版本并且我正在尝试在其上运行 mapreduce 作业。我收到以下错误-->

```
2012-07-09 15:41:16 ZooKeeperSaslClient [INFO] Client will not SASL-authenticate because the default JAAS configuration section 'Client' could not be found. If you are not using SASL, you may ignore this. On the other hand, if you expected SASL to work, please fix your JAAS configuration.
2012-07-09 15:41:16 ClientCnxn [INFO] Socket connection established to Cloudera/192.168.0.102:2181, initiating session
2012-07-09 15:41:16 RecoverableZooKeeper [WARN] Possibly transient ZooKeeper exception: org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase/master
2012-07-09 15:41:16 RetryCounter [INFO] The 1 times to retry  after sleeping 2000 ms
2012-07-09 15:41:16 ClientCnxn [INFO] Session establishment complete on server Cloudera/192.168.0.102:2181, sessionid = 0x1386b0b44da000b, negotiated timeout = 60000
2012-07-09 15:41:18 TableOutputFormat [INFO] Created table instance for exact_custodian
2012-07-09 15:41:18 NativeCodeLoader [WARN] Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
2012-07-09 15:41:18 JobSubmitter [WARN] Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
2012-07-09 15:41:18 JobSubmitter [INFO] Cleaning up the staging area file:/tmp/hadoop-hdfs/mapred/staging/hdfs48876562/.staging/job_local_0001
2012-07-09 15:41:18 UserGroupInformation [ERROR] PriviledgedActionException as:hdfs (auth:SIMPLE) cause:java.io.FileNotFoundException: File does not exist: /home/cloudera/yogesh/lib/hbase.jar
Exception in thread "main" java.io.FileNotFoundException: File does not exist: /home/cloudera/yogesh/lib/hbase.jar
    at org.apache.hadoop.hdfs.DistributedFileSystem.getFileStatus(DistributedFileSystem.java:736)
    at org.apache.hadoop.mapreduce.filecache.ClientDistributedCacheManager.getFileStatus(ClientDistributedCacheManager.java:208)
    at org.apache.hadoop.mapreduce.filecache.ClientDistributedCacheManager.determineTimestamps(ClientDistributedCacheManager.java:71)
    at org.apache.hadoop.mapreduce.JobSubmitter.copyAndConfigureFiles(JobSubmitter.java:246)
    at org.apache.hadoop.mapreduce.JobSubmitter.copyAndConfigureFiles(JobSubmitter.java:284)
    at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:355)
    at org.apache.hadoop.mapreduce.Job$11.run(Job.java:1226)
    at org.apache.hadoop.mapreduce.Job$11.run(Job.java:1223)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1232)
    at org.apache.hadoop.mapreduce.Job.submit(Job.java:1223)
    at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:1244)
    at 
```

我能够运行 hadoop-mapreduce-examples-2.0.0-cdh4.0.0.jar 中给出的示例程序。但是当我的工作成功提交到 jobtracker 时，我收到了这个错误。看起来它正在尝试再次访问本地文件系统（尽管我已经为分布式缓存中的作业执行设置了所有必需的库，但它仍在尝试访问本地目录）。这个问题与用户权限有关吗？

I) `Cloudera:~ # hadoop fs -ls hdfs://<MyClusterIP>:8020/`显示 -

```
Found 8 items
drwxr-xr-x   - hbase hbase               0 2012-07-04 17:58 hdfs://<MyClusterIP>:8020/hbase<br/>
drwxr-xr-x   - hdfs  supergroup          0 2012-07-05 16:21 hdfs://<MyClusterIP>:8020/input<br/>
drwxr-xr-x   - hdfs  supergroup          0 2012-07-05 16:21 hdfs://<MyClusterIP>:8020/output<br/>
drwxr-xr-x   - hdfs  supergroup          0 2012-07-06 16:03 hdfs:/<MyClusterIP>:8020/tools-lib<br/>
drwxr-xr-x   - hdfs  supergroup          0 2012-06-26 14:02 hdfs://<MyClusterIP>:8020/test<br/>
drwxrwxrwt   - hdfs  supergroup          0 2012-06-12 16:13 hdfs://<MyClusterIP>:8020/tmp<br/>
drwxr-xr-x   - hdfs  supergroup          0 2012-07-06 15:58 hdfs://<MyClusterIP>:8020/user<br/> 
```

II) --- 没有后续结果 ----

```
hdfs@Cloudera:/etc/hadoop/conf> find . -name '**' | xargs grep "default.name"<br/>
hdfs@Cloudera:/etc/hbase/conf> find . -name '**' | xargs grep "default.name"<br/> 
```

相反，我认为我们正在使用新的 APIS ->
fs.defaultFS --> hdfs://Cloudera:8020 我已正确设置

虽然对于“fs.default.name”，我得到了 hadoop 集群 0.20.2（非 cloudera 集群）的条目

```
cass-hadoop@Pratapgad:~/hadoop/conf> find . -name '**' | xargs grep "default.name"<br/>
./core-default.xml:  <name>fs.default.name</name><br/>
./core-site.xml:  <name>fs.default.name</name><br/> 
```

我认为 cdh4 默认配置应该在各自的目录中添加这个条目。（如果它的错误）。

我用来运行我的程序的命令 -

> `hdfs@Cloudera:/home/cloudera/yogesh/lib> java -classpath hbase-tools.jar:hbase.jar:slf4j-log4j12-1.6.1.jar:slf4j-api-1.6.1.jar:protobuf-java-2.4.0a.jar:hadoop-common-2.0.0-cdh4.0.0.jar:hadoop-hdfs-2.0.0-cdh4.0.0.jar:hadoop-mapreduce-client-common-2.0.0-cdh4.0.0.jar:hadoop-mapreduce-client-core-2.0.0-cdh4.0.0.jar:log4j-1.2.16.jar:commons-logging-1.0.4.jar:commons-lang-2.5.jar:commons-lang3-3.1.jar:commons-cli-1.2.jar:commons-configuration-1.6.jar:guava-11.0.2.jar:google-collect-1.0-rc2.jar:google-collect-1.0-rc1.jar:hadoop-auth-2.0.0-cdh4.0.0.jar:hadoop-auth.jar:jackson.jar:avro-1.5.4.jar:hadoop-yarn-common-2.0.0-cdh4.0.0.jar:hadoop-yarn-api-2.0.0-cdh4.0.0.jar:hadoop-yarn-server-common-2.0.0-cdh4.0.0.jar:commons-httpclient-3.0.1.jar:commons-io-1.4.jar:zookeeper-3.3.2.jar:jdom.jar:joda-time-1.5.2.jar com.hbase.xyz.MyClassName`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T07:29:37.353

> 即使我在运行 MR 作业时在 2.0.0-cdh4.1.3 中分阶段解决了同样的问题。在 mapred.site.xml 中添加属性后

```
<property>
<name>mapreduce.framework.name</name>
<value>yarn</value>
</property> 
```

> 用于运行 Hive 作业

```
export HIVE_USER=yarn 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T16:36:27.140

**调试程序**：尝试运行简单的 Hadoop shell 命令。

> hadoop fs -ls /

如果这显示 HDFS 文件，那么您的配置是正确的。如果没有，则缺少配置。发生这种情况时，hadoop shell 命令 like`-ls`将引用本地文件系统而不是 Hadoop 文件系统。如果使用 CMS（Cloudera 管理器）启动 Hadoop，就会发生这种情况。它没有将配置显式存储在`conf`目录中。

通过以下命令（更改端口）检查是否显示 hadoop 文件系统：

> hadoop fs -ls hdfs://host:8020/

如果提交路径时显示本地文件系统，`/`那么您应该设置配置文件`hdfs-site.xml`和`mapred-site.xml`配置目录。还`hdfs-site.xml`应该有`fs.default.name`指向的条目`hdfs://host:port/`。在我的情况下，目录是`/etc/hadoop/conf`.

请参阅：[http ://hadoop.apache.org/common/docs/r0.20.2/core-default.html](http://hadoop.apache.org/common/docs/r0.20.2/core-default.html)

看看，如果这解决了你的问题。

# javascript - jQuery：隐藏动态创建的选择 DOM 元素

> ID：11363693
> 
> 赞同：-3
> 
> 时间：2012-07-06T14:00:11.950
> 
> 标签：javascript, jquery

在以下代码中：

```
$(document).ready( function () {
    var hideInit = function () {
            $(selector1).hide();
    }
    var loadInit = function () {
            //get data
            var thingo = $('<div />');
            //populate thingo with a bunch of divs matching selector1
            $(selector2).append(thingo);
    }
    loadInit();
    hideInit();
}); 
```

我正在解析一些数据并用它填充 DOM `loadInit`，然后我希望`.hide`刚刚创建的 DOM 中存在的每个元素都匹配`selector1`。

不幸的是，这些元素没有被隐藏——我在这里做错了什么？

谢谢！

* * *

## 解决方案

正如许多人所建议的那样，我的选择器并不正确​​，但这是我调用函数的顺序。为了保证`hideInit`run after`loadInit`已经完成，我把它叫做in the end, inside, of `loadInit`.

```
$(document).ready( function () {
    var hideInit = function () {
            $(selector1).hide();
    }
    var loadInit = function () {
            //get data
            var thingo = $('<div />');
            //populate thingo with a bunch of divs matching selector1
            $(selector2).append(thingo);
            hideInit();
    }
    loadInit();
}); 
```

感谢您的评论/回答！

* * *

不相关：[在新创建的 dom 元素上使用 jQUery hide()](https://stackoverflow.com/questions/2061430/using-jquery-hide-on-newly-created-dom-elements)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:11:02.107

`append`这可以通过使用、`filter`和`hide`jQuery 方法操作 DOM 的一行来实现。

1.  `$('selector2').append(thingo)`- 附加项目
2.  `.filter('selector1')`- 原始选择器的，只选择那些匹配过滤器的
3.  `.hide()`- 隐藏过滤的项目

像这样：

```
$(function()
{
    var thingo = $('<div />');
    $('selector2').append(thingo).filter('selector1').hide();
} 
```

或者，如果您想隐藏附加的项目，您需要在 之后添加一个额外的链`filter`，您可以使用该`find()`方法，如下所示：

```
// this will hide all child divs, so you may want to be more specific
$('selector2').append(thingo).filter('selector1').find('div').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:11:33.147

在这里，您有一些有用的东西。我不确定这是否是您尝试实现的目标。无论如何，示例在这里：http: [//jsfiddle.net/dyNbw/](http://jsfiddle.net/dyNbw/)

js：

```
$(document).ready( function () {
    var hideInit = function () {
            $('.name1').hide();
    }
    var loadInit = function () {
            //get data
            var thingo = $('<div>Hi there</div>');
            //populate thingo with a bunch of divs matching selector1
            $('.name2').append(thingo);
    }
    loadInit();
    hideInit();
}); 
```

和html：

```
<div class="name1">This will be hidden</div>
<div class="name2"><span>I want to say:</span></div> 
```

# ios - ASIHTTP 帖子的工作方式与 NSMutableURLRequest 不同

> ID：11363695
> 
> 赞同：0
> 
> 时间：2012-07-06T14:00:13.357
> 
> 标签：ios, post, asihttprequest, nsmutableurlrequest

我曾经有一个方法来发布：

```
-(void) execMethod:(NSString*)methodName andParams:(NSArray*)parameters withID:(NSString*)identificator {

//RPC
NSMutableDictionary* reqDict = [NSMutableDictionary dictionary];
[reqDict setObject:methodName forKey:@"method"];
[reqDict setObject:parameters forKey:@"params"];
[reqDict setObject:identificator forKey:@"id"];

//RPC JSON
NSString* reqString = [NSString stringWithString:[reqDict JSONRepresentation]];
NSData* requestData = [NSData dataWithBytes:[reqString UTF8String] length:[reqString length]];

//Request
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];

//prepare http body
[request setHTTPMethod: @"POST"];
[request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody: requestData];

if (urlConnection != nil) {
    [urlConnection release];
    urlConnection = nil;
}

urlConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];
[request release];

    } 
```

现在我想使用 ASIHttp 并编写了该函数：

```
-(void)startRequest:(NSString*)methodName andParams:(NSArray*)parameters withID:(NSString*)identificator
   {

    NSMutableDictionary* reqDict = [NSMutableDictionary dictionary];
[reqDict setObject:methodName forKey:@"method"];
[reqDict setObject:parameters forKey:@"params"];
[reqDict setObject:identificator forKey:@"id"];

//RPC JSON
NSString* reqString = [NSString stringWithString:[reqDict JSONRepresentation]];

//Request
    NSData* requestData = [NSData dataWithBytes:[reqString UTF8String] length:[reqString length]];

asiRequest=[ASIFormDataRequest requestWithURL:url];

[asiRequest addRequestHeader:@"Accept" value:@"application/json"];
[asiRequest addRequestHeader:@"Content-Length" value:[NSString stringWithFormat:@"%d", [requestData length]]];
[asiRequest addRequestHeader:@"Content-Type" value:@"application/x-www-form-urlencoded"];

[asiRequest appendPostData:requestData];
[asiRequest setDelegate:self];

[asiRequest startAsynchronous];

} 
```

但它的行为不一样。它应该返回一个json。第一个工作正常，但第二个没有。我的错在哪里？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:11:41.017

从您的代码示例看来，您正在提交“application/json”类型的内容，但您将 Content-Type 设置为“application/x-www-form-urlencoded”。

ASIHTTP 对“application/x-www-form-urlencoded”有特殊处理。我认为您可能会遇到这种特殊处理的问题。

* * *

在查看了[ASI 的网站后](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

我发现了以下内容：

> PUT 请求和自定义 POST
> 
> 如果您想通过 PUT 发送数据，或者想通过 POST 发送数据但更喜欢自己创建 POST 正文，请使用 appendPostData: 或 appendPostDataFromFile:。

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request appendPostData:[@"This is my data" dataUsingEncoding:NSUTF8StringEncoding]];
// Default becomes POST when you use appendPostData: / appendPostDataFromFile: / setPostBody:
[request setRequestMethod:@"PUT"]; 
```

因此，通过使用`ASIHTTPRequest`代替`ASIFormDataRequest`你将避免特殊处理。因此，您应该能够执行以下操作（注意：不需要设置内容长度）：

```
asiRequest = [ASIHTTPRequest requestWithURL:url];

[asiRequest addRequestHeader:@"Accept" value:@"application/json"];
[asiRequest addRequestHeader:@"Content-Type" value:@"application/x-www-form-urlencoded"];

[asiRequest setPostBody:requestData];
[asiRequest setDelegate:self];

[asiRequest startAsynchronous]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T06:45:26.050

尝试

```
ASIFormDataRequest 
```

用方法

```
setPostValue:: 
```

这是一个示例片段

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url]; 
NSMutableDictionary *data = [NSMutableDictionary dictionaryWithObjectsAndKeys:self.txtUsername.text, @"name", self.txtEmail.text, @"email", self.txtPassword.text, @"pwd", nil]; 
[request addRequestHeader:@"Accept" value:@"application/json"]; 
[request addRequestHeader:@"Content-Type" value:@"application/x-www-form-urlencoded"]; 
[request setRequestMethod:@"POST"]; 
for (NSString *key in data) { 
    [request setPostValue:data[key] forKey:key]; 
} 

[request setDelegate:self]; 
[request startAsynchronous]; 
```

# python - pyside qt4，对齐语法误解

> ID：11363699
> 
> 赞同：0
> 
> 时间：2012-07-06T14:00:41.120
> 
> 标签：python, user-interface, qt4, pyside

我有以下 pyside 小部件代码：

```
class NavigationHeadWidget(QWidget):
    def __init__(self):
        QWidget.__init__(self)

        self._current_page = 0
        self._last_page = 0

        self._pageination_string = "page %s of %s"
        self._pagination_label = QLabel()
        self._pagination_label.setText(self._pageination_string % (str(self._current_page), str(self._last_page)))

        self.setMinimumWidth(400)
        self._header_buttons_prev = QPushButton("b_prev")
        self._header_buttons_next = QPushButton("b_next")
        self._header_buttons_prev.setText("prev")
        self._header_buttons_next.setText("next")
        self._header_buttons_next.setMaximumWidth(40)
        self._header_buttons_prev.setMaximumWidth(40)
        self._layout = QHBoxLayout()
        self._layout.addWidget(self._header_buttons_prev,Qt.AlignLeft)
        self._layout.addWidget(self._pagination_label,Qt.AlignCenter)
        self._layout.addWidget(self._header_buttons_next,Qt.AlignRight)
        self.setLayout(self._layout) 
```

这导致：

![在此处输入图像描述](../Images/51d64e8f31b004dd65d8e921149820af.png)

我希望文本在按钮之间居中，但它离开了对齐。

如果我注释掉我得到的标签：

![在此处输入图像描述](../Images/3fbe22e5b09937eda25e8602989e3a32.png)

我希望按钮左右对齐，但他们似乎没有这样做。

获得我想要的行为的正确语法是什么？

另外我如何让按钮自动调整大小到它包含的文本？必须在上面的代码中硬编码大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:29:39.450

您正在添加标签，并且它居中（它填充了两个按钮之间的所有空间）。但这并不意味着标签中的文本也会自动居中。为此，只需添加：

```
self._pagination_label.setAlignment(Qt.AlignCenter) 
```

您还可以[`QSpacerItem`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qspaceritem.html)在按钮和标签之间添加 s 以获得相同的效果（通过`addStretch`在需要可拉伸空间的地方调用布局的方法）：

```
self._layout.addWidget(self._header_buttons_prev)
self._layout.addStretch()
self._layout.addWidget(self._pagination_label)
self._layout.addStretch()
self._layout.addWidget(self._header_buttons_next) 
```

# c# - 从终结器调用托管资源安全吗？（如果我检查空）

> ID：11363706
> 
> 赞同：4
> 
> 时间：2012-07-06T14:01:01.770
> 
> 标签：c#, dispose, finalizer

打电话不安全吗：

组件.Dispose(); （如果我检查空）

如果我将代码更改为此，则从终结器：

```
~MyResource()
{
    Dispose();
}
public void Dispose()
{
 // Check to see if Dispose has already been called.
        if(!this.disposed)
        {
            if(component != null) component.Dispose();   // !!! //

            CloseHandle(handle);
            handle = IntPtr.Zero;

            disposed = true;

        }
    GC.SuppressFinalize(this);
} 
```

我知道这行得通——但它安全吗？

（从下面的例子？）

代码示例：（更改代码之前）

[http://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx](http://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx)

```
using System;
using System.ComponentModel;

// The following example demonstrates how to create
// a resource class that implements the IDisposable interface
// and the IDisposable.Dispose method.

public class DisposeExample
{
// A base class that implements IDisposable.
// By implementing IDisposable, you are announcing that
// instances of this type allocate scarce resources.
public class MyResource: IDisposable
{
    // Pointer to an external unmanaged resource.
    private IntPtr handle;
    // Other managed resource this class uses.
    private Component component = new Component();
    // Track whether Dispose has been called.
    private bool disposed = false;

    // The class constructor.
    public MyResource(IntPtr handle)
    {
        this.handle = handle;
    }

    // Implement IDisposable.
    // Do not make this method virtual.
    // A derived class should not be able to override this method.
    public void Dispose()
    {
        Dispose(true);
        // This object will be cleaned up by the Dispose method.
        // Therefore, you should call GC.SupressFinalize to
        // take this object off the finalization queue
        // and prevent finalization code for this object
        // from executing a second time.
        GC.SuppressFinalize(this);
    }

    // Dispose(bool disposing) executes in two distinct scenarios.
    // If disposing equals true, the method has been called directly
    // or indirectly by a user's code. Managed and unmanaged resources
    // can be disposed.
    // If disposing equals false, the method has been called by the
    // runtime from inside the finalizer and you should not reference
    // other objects. Only unmanaged resources can be disposed.
    protected virtual void Dispose(bool disposing)
    {
        // Check to see if Dispose has already been called.
        if(!this.disposed)
        {
            // If disposing equals true, dispose all managed
            // and unmanaged resources.
            if(disposing)
            {
                // Dispose managed resources.
                component.Dispose();
            }

            // Call the appropriate methods to clean up
            // unmanaged resources here.
            // If disposing is false,
            // only the following code is executed.
            CloseHandle(handle);
            handle = IntPtr.Zero;

            // Note disposing has been done.
            disposed = true;

        }
    }

    // Use interop to call the method necessary
    // to clean up the unmanaged resource.
    [System.Runtime.InteropServices.DllImport("Kernel32")]
    private extern static Boolean CloseHandle(IntPtr handle);

    // Use C# destructor syntax for finalization code.
    // This destructor will run only if the Dispose method
    // does not get called.
    // It gives your base class the opportunity to finalize.
    // Do not provide destructors in types derived from this class.
    ~MyResource()
    {
        // Do not re-create Dispose clean-up code here.
        // Calling Dispose(false) is optimal in terms of
        // readability and maintainability.
        Dispose(false);
    }
  }
  public static void Main()
  {
    // Insert code here to create
    // and use the MyResource object.
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T14:55:40.887

在不知道“组件”的实现细节的情况下，很难确定这样做是否安全。对象的终结是无序的并且不尊重包含层次结构，因此虽然“组件”实例可能不是`null`，但在您调用它时它可能已经终结`Dispose`。通常`Dispose`，编写方法时不会考虑到这种类型的安全性，因为它们只希望在对象完成之前被调用。

在你甚至想要考虑做一些聪明的事情之前，比如在终结器中触摸其他对象，请阅读[Chris Brumme](http://blogs.msdn.com/b/cbrumme/)关于该主题的博客文章；[这是一个很好的起点](http://blogs.msdn.com/b/cbrumme/archive/2004/02/20/77460.aspx)。

通常，除非在非常特殊的情况下，并且您知道`Dispose`所包含对象的方法即使在完成后调用时也会按预期运行，我认为您所询问的模式不安全并且会坚持推荐的模式传递一个`bool disposing`参数并且只接触托管对象，如果它是`true`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T16:23:00.480

在 .net 中，可以保证通过任何方式访问的任何对象都存在，可以访问此类对象的字段，并且可以分派对该对象的属性访问或方法调用，就像在任何其他情况下一样。唯一不能保证的是系统是否已经`Finalize`在引用的对象上运行了该方法。完全有可能由于系统已经`Finalize`在一个对象上运行，以前会做一些有用的事情的方法将不再能够这样做，但这是对象`Finalize()`例程的函数，与垃圾收集器本身。

# database - 人们使用 Node.js 部署关系数据库更改的方式有哪些？

> ID：11363716
> 
> 赞同：7
> 
> 时间：2012-07-06T14:01:40.013
> 
> 标签：database, node.js, deployment, migration

我最近越来越多地研究 Node.js 和托管服务，如 Heroku 和 Nodejitsu，并且一直在尝试找出如何最好地为 postgres 或 mysql 部署数据库更改。

我可以看到npm下的几个迁移项目；然而，一切似乎真的有问题或只是不工作。我目前在 npm 上管理 Monarch 迁移项目，但目前它本身有问题，而且我开发此类实用程序的经验是使用其他更程序化的语言。

那么人们在这些环境中使用什么来将更改部署到他们的数据库呢？什么对人们有用？

我正在寻找对当前情况/过程的更好理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:20:37.327

我自己没有使用它，但 Sequelize ORM 从 1.3 开始支持迁移。[http://sequelizejs.com/#migrations](http://sequelizejs.com/#migrations)

也许其他人可以添加他们的体验细节。

# animation - 为什么我的 css3 动画不会反向动画？

> ID：11363722
> 
> 赞同：4
> 
> 时间：2012-07-06T14:01:58.453
> 
> 标签：animation, css, hover, rotation

我有一个简单的动画，它有一个元素在悬停时滚动，然后在鼠标移出时滚动：

```
@-webkit-keyframes swing {
    0%   { -webkit-transform: rotate(180deg);}
    100%   { -webkit-transform: rotate(0);}
}
@-moz-keyframes swing {
    0%   { -moz-transform: rotate(180deg);}
    100%   { -moz-transform: rotate(0);}
}
a#element{  
    margin-left: 100%;
    -webkit-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
    -webkit-transition: margin-left 1s ease;
    -moz-transition: margin-left 1s ease;
    transition: margin-left 1s ease;
}
#element:hover a#element-color{
    -webkit-animation: swing 1s 0 1 alternate forwards; 
    -moz-animation: swing 1s 0 1 normal forwards; 
    animation: swing 1s 0 1 alternate forwards; 
    margin-left: 0;
} 
```

这在滚动时效果很好，但是当我将鼠标移出时，元素会翻转 180 度，然后动画出来。唯一不起作用的是向后旋转；这“只是发生”，而不是动画。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T16:10:40.327

只需摆脱动画并在`transform`（[示例](http://jsfiddle.net/eubYk/2/)）上设置过渡：

```
<span id="google-plus-ghost" class="sm-button">
 <a href="/" class="sm-link" id="google-plus-color">Google Plus</a>
</span>
<span id="twitter-ghost" class="sm-button">
 <a href="/" class="sm-link" id="twitter-color">Google Plus</a>
</span>
<span id="linkedin-ghost" class="sm-button">
 <a href="/" class="sm-link" id="linkedin-color">Google Plus</a>
</span>
<span id="facebook-ghost" class="sm-button">
 <a href="/" class="sm-link" id="facebook-color">Google Plus</a>
</span>​ 
```

```
.sm-button, .sm-link{
    display: block;
    float: left;
    height: 64px;
    overflow: hidden;
    text-indent: -999999px;
    width: 64px;
}
.sm-button{
    margin-top: 10px;
}
#google-plus-ghost{
    background: transparent url(http://healthfreakgeek.com/wp-content/themes/nathanstaines-starkers-html5-b101efa/images/googlePlusGhost.gif) no-repeat 0 0;
}
#twitter-ghost{
    background: transparent url(http://healthfreakgeek.com/wp-content/themes/nathanstaines-starkers-html5-b101efa/images/twitterGhost.gif) no-repeat 0 0;
    margin: 10px 5px 0 10px;
}
#linkedin-ghost{
    background: transparent url(http://healthfreakgeek.com/wp-content/themes/nathanstaines-starkers-html5-b101efa/images/linkedinGhost.gif) no-repeat 0 0;
    margin: 10px 10px 0 5px;
}
#facebook-ghost{
    background: transparent url(http://healthfreakgeek.com/wp-content/themes/nathanstaines-starkers-html5-b101efa/images/facebookGhost.gif) no-repeat 0 0;
}
a#google-plus-color{
    background: transparent url(http://healthfreakgeek.com/wp-content/themes/nathanstaines-starkers-html5-b101efa/images/googlePlusColor.gif) no-repeat 0 0;
}
a#twitter-color{
    background: transparent url(http://healthfreakgeek.com/wp-content/themes/nathanstaines-starkers-html5-b101efa/images/twitterColor.gif) no-repeat 0 0;
}
a#linkedin-color{
    background: transparent url(http://healthfreakgeek.com/wp-content/themes/nathanstaines-starkers-html5-b101efa/images/linkedinColor.gif) no-repeat 0 0;
}
a#facebook-color{
    background: transparent url(http://healthfreakgeek.com/wp-content/themes/nathanstaines-starkers-html5-b101efa/images/facebookColor.gif) no-repeat 0 0;
}
a#google-plus-color,
a#twitter-color,
a#linkedin-color,
a#facebook-color {    
    margin-left: 100%;
    -webkit-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
    -ms-transform: rotate(180deg);
    -o-transform: rotate(180deg);
    transform: rotate(180deg);
    -webkit-transition: margin-left 1s ease, -webkit-transform 1s ease;
    -moz-transition: margin-left 1s ease, -moz-transform 1s ease;
    -ms-transition: margin-left 1s ease, -moz-transform 1s ease;
    -o-transition: margin-left 1s ease, -moz-transform 1s ease;
    transition: margin-left 1s ease, transform 1s swing;
}
#google-plus-ghost:hover a#google-plus-color,
#twitter-ghost:hover a#twitter-color,
#linkedin-ghost:hover a#linkedin-color,
#facebook-ghost:hover a#facebook-color {
    margin-left: 0;
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    transform: rotate(0deg);
}​ 
```

## 替代解决方案

我更多地使用代码，并想出了一个从下一个图标后面推出的新版本，而不是简单地消失在方形边缘。我还大量清理了代码以摆脱 ID（并使代码可重用）。而且，只是为了好玩，我让滚动图像以灰度开始`opacity:0;`（**我**相信目前仅在 webkit 中支持，但其他引擎的占位符代码），然后更改为完全可见和**颜色**（[演示](http://jsfiddle.net/eubYk/5/)）：

```
<div class="social-buttons">
    <span class="google-plus ghost">
        <a href="/" class="color">Google Plus</a>
    </span>
    <span class="twitter ghost">
        <a href="/" class="color">Twitter</a>
    </span>
    <span class="linkedin ghost">
        <a href="/" class="color">LinkedIn</a>
    </span>
    <span class="facebook ghost">
        <a href="/" class="color">Facebook</a>
    </span>
</div> 
```

```
.social-buttons {
    overflow:hidden;
    float:left;
    padding-right:64px;
}
.social-buttons .ghost {
    position:relative;
    display: block;
    float: left;
    height: 64px;
    width: 64px;
    margin:10px 0 0 10px;
}
.social-buttons .color {
    display:block;
    height:64px;
    width:64px;
    text-indent: -999999px;
}
.social-buttons .google-plus.ghost {
    z-index:1;
    background: transparent url(http://healthfreakgeek.com/wp-content/themes/nathanstaines-starkers-html5-b101efa/images/googlePlusGhost.gif) no-repeat 0 0;
}
.social-buttons .twitter.ghost {
    z-index:2;
    background: transparent url(http://healthfreakgeek.com/wp-content/themes/nathanstaines-starkers-html5-b101efa/images/twitterGhost.gif) no-repeat 0 0;
}
.social-buttons .linkedin.ghost {
    z-index:3;
    background: transparent url(http://healthfreakgeek.com/wp-content/themes/nathanstaines-starkers-html5-b101efa/images/linkedinGhost.gif) no-repeat 0 0;
}
.social-buttons .facebook.ghost {
    z-index:4;
    background: transparent url(http://healthfreakgeek.com/wp-content/themes/nathanstaines-starkers-html5-b101efa/images/facebookGhost.gif) no-repeat 0 0;
}
.social-buttons .google-plus a.color {
    background: transparent url(http://healthfreakgeek.com/wp-content/themes/nathanstaines-starkers-html5-b101efa/images/googlePlusColor.gif) no-repeat 0 0;
}
.social-buttons .twitter a.color {
    background: transparent url(http://healthfreakgeek.com/wp-content/themes/nathanstaines-starkers-html5-b101efa/images/twitterColor.gif) no-repeat 0 0;
}
.social-buttons .linkedin a.color {
    background: transparent url(http://healthfreakgeek.com/wp-content/themes/nathanstaines-starkers-html5-b101efa/images/linkedinColor.gif) no-repeat 0 0;
}
.social-buttons .facebook a.color {
    background: transparent url(http://healthfreakgeek.com/wp-content/themes/nathanstaines-starkers-html5-b101efa/images/facebookColor.gif) no-repeat 0 0;
}
.social-buttons a.color {
    opacity:0;
    margin-left: 100%;
    -webkit-filter: grayscale(1);
    -moz-filter: grayscale(1);
    -ms-filter: grayscale(1);
    -o-filter: grayscale(1);
    filter: grayscale(1);
    -webkit-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
    -ms-transform: rotate(180deg);
    -o-transform: rotate(180deg);
    transform: rotate(180deg);
    -webkit-transition: all 1s ease;
    -moz-transition: all 1s ease;
    -ms-transition: all 1s ease;
    -o-transition: all 1s ease;
    transition: all 1s ease;
}
.social-buttons .ghost:hover a.color {
    opacity:1;
    margin-left: 0;
    -webkit-filter: grayscale(0);
    -moz-filter: grayscale(0);
    -ms-filter: grayscale(0);
    -o-filter: grayscale(0);
    filter: grayscale(0);
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    transform: rotate(0deg);
}​ 
```

# html - Sftp 服务器中的子文件夹

> ID：11363727
> 
> 赞同：0
> 
> 时间：2012-07-06T14:02:14.680
> 
> 标签：html, webserver

我可以在我的服务器上创建一个子文件夹，例如**developer** .apple.com 和**m** .facebook.com。还是我需要购买域名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T14:12:52.107

您的意思是“子域”而不是子文件夹。这取决于您的提供商如何为您的域设置子域，通常在控制面板中。因此，如果您拥有例如 apple.com，您可以拥有 dev.apple.com、iPhone.apple.com 等子域。

简短回答：您只需要购买 apple.com

顺便说一句：它对 www 的工作原理相同。- 它也是一个子域，大多数域自动转发，例如 apple.com 到 www.apple.com。

# function - 如何使用 postgreSQL 形成键/值数组？

> ID：11363728
> 
> 赞同：0
> 
> 时间：2012-07-06T14:02:15.303
> 
> 标签：function, postgresql

我目前有两张桌子：

```
tblFoo
foo_id   foo_text
1        foo 
```

和

```
tblBar
bar_id    foo_id     bar_text
100       1          hello
101       1          world 
```

我正在尝试使用一个函数返回一个多态行类型，a la：

```
CREATE OR REPLACE FUNCTION fetch_foo(p_foo_id int) RETURNS record as $$
DECLARE 
    rec record;
BEGIN
    SELECT
        F.foo_id,
        foo_text,
        array_agg(bar_text) as bar_text
    FROM tblFoo F
    LEFT JOIN tblBar B
    ON F.foo_id = B.foo_id
    WHERE F.foo_id = p_foo_id
    GROUP BY F.foo_id
    INTO rec;
RETURN rec;
END
$$ LANGUAGE plpgsql; 
```

目前，这将返回一个名为 'fetch_foo' 的串联字段`(1,"foo","{hello,world}")`。我已阅读[使用 PL/pgSQL 在 PostgreSQL 中将多个字段作为记录返回](https://stackoverflow.com/questions/4547672/how-to-return-multiple-fields-as-a-record-in-postgresql-pl-pgsql/6085167#6085167)的回复，并了解我不需要在这里创建类型来返回具有单独字段的记录。我在看什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:16:35.613

您不需要定义记录。它比这简单得多，只需将其定义为“返回表”并使用 SQL 而不是 PL/pgSQL。

```
CREATE OR REPLACE FUNCTION fetch_foo(p_foo_id int) 
     RETURNS table(foo_id int, foo_text text, bar_text text[]) 
AS 
$$
   SELECT
        F.foo_id,
        foo_text,
        array_agg(bar_text) as bar_text
    FROM tblFoo F
    LEFT JOIN tblBar B
    ON F.foo_id = B.foo_id
    WHERE F.foo_id = $1
    GROUP BY F.foo_id
$$ 
LANGUAGE sql; 
```

# java - 在 ListView (Android) 上使用 OnTouchListener 时崩溃

> ID：11363729
> 
> 赞同：0
> 
> 时间：2012-07-06T14:02:17.217
> 
> 标签：java, android, listview, multi-touch, ontouchlistener

在尝试使用列表视图测试多点触控时，我在 Android 3.2 中遇到了崩溃。我可以使用仅包含 ListView 和不到 20 行 Java 代码的简单布局来重现异常。任何人对此事的建议将不胜感激。

**我正在尝试做的事情：**

我希望用户能够通过拖动来检查 ListView 上的许多项目，而不会妨碍滚动 ListView，所以我认为用户会用一根手指滚动 ListView，然后用两根手指单击并拖动以选择项目他们搬过去。自然地，我决定为我的 ListView 设置一个 onTouchListener 以处理多点触控事件。

**问题：** 用一根手指滚动效果很好。但是当我用两根手指触摸然后抬起时，我的应用程序（有时）会立即崩溃。有时意味着大约 70% 的时间，这让我相信这与从 2 根手指到 0 根手指有关。崩溃甚至不在我拥有的任何代码中，而是在由 ListView 本身调用的 MotionEvent 中的本机方法中（[完整堆栈跟踪的 pastebin 以便我不会弄乱页面](http://pastebin.com/vLrFUhuv)）。

**代码：** 这是我为了引起问题而写的。

MainActivity.java

```
public class MainActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ListView lv = ((ListView) findViewById(R.id.listView1));

        String[] list = new String[]{"a", "b", "c", "d", "e", "f", "g"};

        lv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, list));
        lv.setOnTouchListener(new OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                if (event.getPointerCount() != 2) {
                    return false;
                }
                return true;
            }
        });
    }
} 
```

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >

    </ListView>

</RelativeLayout> 
```

就是这样。我在运行 Android 3.2.1 的 Thrive 上运行我的程序，我的项目针对 API 级别 13 (3.2)。我没有另一台平板电脑可以测试它，也无法使用我的普通开发虚拟机，因为没有多点触控支持。

如果我调用 getter 并返回 false 或 true，无论它的值如何，它都不会崩溃。我认为这与 ListView 在我进行触摸时获得点击事件有关，然后当我的侦听器被调用时，它开始消耗任何包含两个手指的事件。然后，当我同时抬起两根手指时，没有任何事件通过 ListView 表示它已完成，因此它仍然希望能够找到所选项目的指针索引。

所以我的问题是“我写的东西是否违反了 ListView 的某种合同？” 我应该以其他方式进行此测试吗？

另外，如果有人能指出 API 级别 13 的来源，我将不胜感激。它无法通过 Android SDK 管理器访问（只有 14-16 个），如果我拥有它，我更有可能了解问题的根源。

# c - 两个进程如何在没有 pipe() 的情况下相互通信？

> ID：11363731
> 
> 赞同：0
> 
> 时间：2012-07-06T14:02:18.437
> 
> 标签：c, linux, pipe, named-pipes

鉴于此代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/wait.h>
#include <unistd.h>

#define BUF_SIZE 256

int main()
{
    int fd1[2];
    int fd2[2];

    ssize_t numRead = -1;

    // remark : working under the assumption that the messages are of equal length

    const char* messageOne = "Hello world , I'm child number 1\n";
    const char* messageTwo = "Hello world , I'm child number 2\n";

    const unsigned int commLen = strlen(messageOne) + 1;

    char buf[BUF_SIZE];

    if (pipe(fd1) == -1)
    {
        printf("Error opening pipe 1!\n");
        exit(1);
    }

    if (pipe(fd2) == -1)
    {
        printf("Error opening pipe 2!\n");
        exit(1);
    }

    printf("Piped opened with success. Forking ...\n");

    // child 1
    switch (fork())
    {
        case -1:
            printf("Error forking child 1!\n");
            exit(1);

        case 0:
            printf("\nChild 1 executing...\n");
            /* close reading end of first pipe */
            if (close(fd1[0]) == -1)
            {
                printf("Error closing reading end of pipe 1.\n");
                _exit(1);
            }
            /* close writing end of second pipe */
            if (close(fd2[1]) == -1)
            {
                printf("Error closing writing end of pipe 2.\n");
                _exit(1);
            }

            /* write to pipe 1 */
            if (write(fd1[1], messageOne, commLen) != commLen)
            {
                printf("Error writing to pipe 1.\n");
                _exit(1);
            }

            if (close(fd1[1]) == -1)
            {
                printf("Error closing writing end of pipe 1.\n");
                _exit(1);
            }

            /* reding from pipe 2 */
            numRead = read(fd2[0], buf, commLen);
            if (numRead == -1)
            {
                printf("Error reading from pipe 2.\n");
                _exit(1);
            }

            if (close(fd2[0]) == -1)
            {
                printf("Error closing reding end of pipe 2.\n");
                _exit(1);
            }

            printf("Message received child ONE: %s", buf);
            printf("Exiting child 1...\n");
            _exit(0);
            break;

        default:
            break;
    }

    // child 2
    switch (fork())
    {
        case -1:
            printf("Error forking child 2!\n");
            exit(1);
        case 0:
            printf("\nChild 2 executing...\n");
            /* close reading end of second pipe */
            if (close(fd2[0]) == -1)
            {
                printf("Error closing reading end of pipe 2.\n");
                _exit(1);
            }
            /* close writing end of first pipe */
            if (close(fd1[1]) == -1)
            {
                printf("Error closing writing end of pipe 1.\n");
                _exit(1);
            }

            /* read from the first pipe */
            if (read(fd1[0], buf, commLen) == -1)
            {
                printf("Error reading from pipe 1.\n");
                _exit(EXIT_FAILURE);
            }

            if (close(fd1[0]) == -1)
            {
                printf("Error closing reading end of pipe 1.\n");
                _exit(EXIT_FAILURE);
            }

            /* write to the second pipe */
            if (write(fd2[1], messageTwo, commLen) != commLen)
            {
                printf("Error writing to the pipe.");
                _exit(EXIT_FAILURE);
            }

            if (close(fd2[1]) == -1)
            {
                printf("Error closing writing end of pipe 2.");
                _exit(EXIT_FAILURE);
            }

            printf("Message received child TWO: %s", buf);
            printf("Exiting child 2...\n");
            _exit(EXIT_SUCCESS);
            break;

        default:
            break;
    }

    printf("Parent closing pipes.\n");

    if (close(fd1[0]) == -1)
    {
        printf("Error closing reading end of the pipe.\n");
        exit(EXIT_FAILURE);
    }

    if (close(fd2[1]) == -1)
    {
        printf("Error closing writing end of the pipe.\n");
        exit(EXIT_FAILURE);
    }

    if (close(fd2[0]) == -1)
    {
        printf("Error closing reading end of the pipe.\n");
        exit(EXIT_FAILURE);
    }

    if (close(fd1[1]) == -1)
    {
        printf("Error closing writing end of the pipe.\n");
        exit(EXIT_FAILURE);
    }

    printf("Parent waiting for children completion...\n");
    if (wait(NULL) == -1)
    {
        printf("Error waiting.\n");
        exit(EXIT_FAILURE);
    }

    if (wait(NULL) == -1)
    {
        printf("Error waiting.\n");
        exit(EXIT_FAILURE);
    }

    printf("Parent finishing.\n");
    exit(EXIT_SUCCESS);
} 
```

这是两个使用`pipe()`.

输出是：

```
Piped opened with success. Forking ...
Parent closing pipes.
Parent waiting for children completion...

Child 2 executing...

Child 1 executing...
Message received child TWO: Hello world , I'm child number 1
Exiting child 2...
Message received child ONE: Hello world , I'm child number 2
Exiting child 1...
Parent finishing. 
```

从上面可以看出，这两个孩子正在用`fork`and 和另一个说话`pipe`。但是我想在没有管道的情况下做到这一点，这可能吗？如果是这样，请解释一下，我不想使用`pipe()`我想要**模拟** `pipe()`的东西。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T14:07:56.733

虽然你为什么要这样做超出了我的理解，但还有一些其他的 IPC 机制（都更复杂，更容易出错）：

*   命名管道 (FIFO)
*   共享内存
*   映射的共享内存
*   UNIX 域套接字
*   互联网域套接字

有关这些方面的优秀教程，请查看“进程间通信”一章中的这本电子书： [高级 Linux 编程](http://www.advancedlinuxprogramming.com/alp-folder/advanced-linux-programming.pdf)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T14:04:11.323

您可以使用共享内存或 Unix 套接字。如果管道足够的话，不知道你为什么想要这样做。shmem 和 sockets 都比较低级。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T20:09:54.337

我已经修改了您的程序，以显示 System V 共享内存的示例。为了避免竞争条件，还使用了信号量（POSIX 命名的信号量）。我也写了一些评论。PL。看看这个例子是否有帮助。可以参考各个功能的手册页以了解有关功能的更多信息。编译标志应该是 -lpthread。要生成密钥（引用唯一的共享内存段），现有文件（我将其命名为“anyfile”）应该在当前目录中可用，因为我使用了 ftok 函数。PL。通过检查函数的返回值来添加适当的错误处理。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/wait.h>
#include <unistd.h>
#include <fcntl.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <sys/shm.h>
#include <semaphore.h>

#define BUF_SIZE 256
int main()
{
    key_t key;
    char *virtualaddr;
    sem_t *get, *put;
    ssize_t numRead = -1;
    int shmid;

   const char* messageOne = "Hello world , I'm child number 1\n";
   const char* messageTwo = "Hello world , I'm child number 2\n";

   const unsigned int commLen = strlen(messageOne) + 1;
   char buf[BUF_SIZE];

   key = ftok("anyfile",'R');

  shmid = shmget(key,1024,0644|IPC_CREAT);
  if (0 > shmid)
  {
    perror("Shared Mem creation error\n");
    exit(1);

  }
//Attaching  the shared mem to my address space(available across fork)
 virtualaddr = shmat(shmid, (void*)0, 0);
  /*Create two POSIX Named Semaphores, get and put and initialising with 0*/
 get = sem_open("/get", O_CREAT|O_RDWR, 0644, 0);

 put = sem_open("/put", O_CREAT|O_RDWR, 0644, 0);

 // child 1
switch (fork())
{
    case -1:
        printf("Error forking child 1!\n");
        exit(1);
    case 0:
        printf("\nChild 1 executing...\n");
    //Referring the semaphores..
    get = sem_open ("/get", O_RDWR);
    put = sem_open ("/put", O_RDWR);

    //Child 1 writing in shared mem
        strcpy (virtualaddr, messageOne);
    //Child 1 signalling that now child 2 can write
        sem_post (get);
    //Child1 waiting for Child2 to write..
    sem_wait (put);
    //Child 1 reading from shared mem
    strcpy (buf, virtualaddr);          
    printf("Message received child ONE: %s", buf);
        printf("Exiting child 1...\n");
        _exit(0);
        break;
 default:
        break;
}
// child 2
switch (fork())
{
    case -1:
        printf("Error forking child 2!\n");
        exit(1);
    case 0:
        printf("\nChild 2 executing...\n");
    //Referring the semaphores..
    get = sem_open ("/get", O_RDWR);
    put = sem_open ("/put", O_RDWR);

    //Waiting Till Child 1 has written.
        sem_wait (get);
        //Now child 2 can read from shared memory
    strcpy (buf, virtualaddr);
    //Child 2 writing in shared mem
    strcpy (virtualaddr,messageTwo );
    //Signalling that now Child 1 can read.
    sem_post (put);                            
        printf("Exiting child 2...\n");
    printf("Message received child TWO: %s", buf);
        _exit(EXIT_SUCCESS);
        break;

    default:
        break;
}
printf("Parent waiting for children completion...\n");

if (wait(NULL) == -1)
{
    printf("Error waiting.\n");
    exit(EXIT_FAILURE);
}

if (wait(NULL) == -1)
{
    printf("Error waiting.\n");
    exit(EXIT_FAILURE);
}

printf("Parent finishing.\n");
//Deleting semaphores..
sem_unlink ("/get");
sem_unlink ("/put");
//Deleting Shared Memory.
shmctl (shmid, IPC_RMID, NULL);
exit(EXIT_SUCCESS); 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T14:20:29.853

1.  Unix 套接字
2.  共享内存
3.  科尔巴
4.  IPC 消息传递（参见[http://www.cs.cf.ac.uk/Dave/C/node25.html](http://www.cs.cf.ac.uk/Dave/C/node25.html)）
5.  TCP/IP 甚至 UDP
6.  甚至可以写入文件并使用信号量对其进行标记以供其他进程读取。

就在我的头顶

# javascript - 如何通过弹出窗口获取输入并通过 javascript/jquery 将文本放入变量中

> ID：11363732
> 
> 赞同：11
> 
> 时间：2012-07-06T14:02:18.933
> 
> 标签：javascript, jquery, popup

我的页面上有一个按钮。单击时应出现一个弹出框，允许用户输入文本。当按下 OK/Submit 时，我的 jscript 将使用输入的数据执行一些功能。非常简单，但我就是不知道该怎么做。

谢谢！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-06T14:07:26.453

以最简单的形式，您可以使用**prompt(question, default)** : (取自 w3schools: [http://www.w3schools.com/js/tryit.asp?filename=tryjs_prompt](http://www.w3schools.com/js/tryit.asp?filename=tryjs_prompt) )

```
function myFunction(){
    var x;
    var name=prompt("Please enter your name","Harry Potter");
    if (name!=null){
       x="Hello " + name + "! How are you today?";
      alert(x);
   }
} 
```

其他任何东西都需要大量的 javascript 和 CSS 来创建带有按钮的图层并在这些按钮上单击事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:13:32.183

将此代码粘贴到`head`标签之间的`script`标签中

**HTML**

```
<button id="button">Get Text</button>​ 
```

**JS**

```
window.onload=function()
{
    var el=document.getElementById('button');
    el.onclick=function(){
        var my_text=prompt('Enter text here');
        if(my_text) alert(my_text); // for example I've made an alert
    }
} 
```

[**演示。**](http://jsfiddle.net/XNsJf/)

# c++ - 枚举值与枚举名称冲突

> ID：11363737
> 
> 赞同：6
> 
> 时间：2012-07-06T14:02:26.567
> 
> 标签：c++, gcc, enums

让我们看一下我最近在项目某处发现的代码构造：

```
namespace Test
{
    enum EName
    {
        CoolEnum,
        NiceEnum
    };

    enum CoolEnum
    {
        CoolVal1,
        CoolVal2
    };

    enum NiceEnum
    {
        NiceVal1,
        NiceVal2
    };
} 
```

我的问题是为什么编译器允许这样的事情。让我们在这里看一个代码示例：

```
Test::CoolEnum cEnum = Test::NiceVal1; // INVALID, as compiler refers to Test::CoolEnum value of Test::Ename enum 
```

为什么允许这样的混淆？我理解为什么我必须添加 enum 关键字，所以编译器清楚地知道我正在声明给定枚举的变量，而不是使用同一命名空间中其他枚举的值。我只是不明白为什么首先甚至可以进行这样的构造。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T14:05:05.347

C++11 的枚举类是解决这个问题的方法：

```
namespace Test
{
    enum class EName
    {
        CoolEnum,
        NiceEnum
    };

    enum class CoolEnum
    {
        NiceVal1,
        NiceVal2
    };

    enum class NiceEnum
    {
        NiceVal1,
        NiceVal2
    };
} 
```

然后你可以使用适当的`NiceVal1`：

```
Test::CoolEnum cEnum = Test::CoolEnum::NiceVal1; 
```

普通枚举是从 C 继承的，其中没有命名空间是什么的概念。如果普通枚举引入了某种命名空间，那么使用枚举的 C 代码将根本无法编译。这就是引入枚举类的原因，以免破坏向后兼容性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:02:56.763

答案是因为标准规定了这种行为。见 3.3.7/2：

> 类名 (9.1) 或枚举名 (7.2) 可以被在同一范围内声明的对象、函数或枚举器的名称隐藏。如果一个类或枚举名称和一个对象、函数或枚举器在同一个范围内（以任何顺序）以相同的名称声明，则无论对象、函数或枚举器名称可见，该类或枚举名称都会被隐藏。

想必这是为了便于与 C 的机制（枚举器不打开新的作用域）兼容，这种机制已经建立了很长时间。

在您的情况下，至少可以使用 g++`typename`来指示您要使用类型而不是枚举器（`typename Test::CoolEnum cEnum = Test::NiceVal1;`）。

但是，一般来说，我喜欢将所有枚举限定在单独的命名空间或类中，以完全防止这些冲突。

# microsoft-metro - 从字符串转换为 int Metro 应用程序 C++

> ID：11363738
> 
> 赞同：-1
> 
> 时间：2012-07-06T10:00:47.683
> 
> 标签：microsoft-metro

我是 Metro 应用程序的新手。我的应用程序包含两个文本框，我试图将它们的值相加并显示在另一个文本框中。但我无法将从文本框中读取的文本转换为 int。谁能指导我如何做到这一点...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T18:05:15.990

字符串转数值：

*   [http://en.cppreference.com/w/cpp/string/basic_string/stol](http://en.cppreference.com/w/cpp/string/basic_string/stol)
*   [http://en.cppreference.com/w/cpp/string/basic_string/stoul](http://en.cppreference.com/w/cpp/string/basic_string/stoul)
*   [http://en.cppreference.com/w/cpp/string/basic_string/stof](http://en.cppreference.com/w/cpp/string/basic_string/stof)

字符串的数值：

*   [http://en.cppreference.com/w/cpp/string/basic_string/to_string](http://en.cppreference.com/w/cpp/string/basic_string/to_string)

# sql - 报告服务 - 分组列“时间”之间的 datedif

> ID：11363742
> 
> 赞同：0
> 
> 时间：2012-07-06T14:02:39.113
> 
> 标签：sql, database, tsql, reporting-services

我有一个 Tablix 和一个小组。对于每个组，我想要列的日期差异： 与前一组的**时间（时间戳）**。

伪代码：

```
=DateDiff(PriorGroup!Fields!Time,ThisGroup!Fields!Time) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:15:08.967

Datepart 缺少 afaik，请检查：http: [//msdn.microsoft.com/es-es/library/ms189794.aspx](http://msdn.microsoft.com/es-es/library/ms189794.aspx)

# c - android 和 libc 线程安全上的共享本机库

> ID：11363743
> 
> 赞同：3
> 
> 时间：2012-07-06T14:02:52.867
> 
> 标签：c, android-ndk, thread-safety, shared-libraries, bionic

我是 Android 开发新手（也不是 C/C++ 专家），但我发现自己正在研究一个用 C 编写的本机共享库，该库应该由 Android 应用程序（在其他平台中）使用。

现在，我开始考虑线程安全，并确定我的库当前不是线程安全的（使用静态/全局变量）。没问题，我只会从一个线程中使用它。

这是我的实际问题开始的地方。从互联网上的一些帖子（例如[在 Launchpad 上](https://bugs.launchpad.net/firefox/+bug/856072)，似乎仿生 libc 的某些部分（特别是 stdio）也不是线程安全的，至少在某些 Android 版本中（我们仍然针对 3.0 之前的版本）。现在的问题是，此应用程序/进程中使用的其他本​​机库是否会共享相同的 libc 实例，从而导致线程安全问题，或者每个共享库是否都有自己的 libc 实例？

如果 libc 在所有共享库之间共享，我在哪里可以找到关于它的哪些部分是线程安全的以及哪些不是线程安全的信息？为了安全起见，我是否必须使用同一线程中的所有本机库？

编辑：根据我目前的理解进行更新：仿生 libc*应该*完全是线程安全的，上面显示的问题是一个孤立的错误，在大多数情况下不会发生（如许多 MT 错误）。问题是存在的，但我最好的猜测是整个进程共享同一个 libc 实例。稍后我将尝试对此进行测试。

# c# - 如何防止插件执行有害代码

> ID：11363748
> 
> 赞同：7
> 
> 时间：2012-07-06T14:03:08.453
> 
> 标签：c#, .net, plugins, module

我目前正在为我的学士论文开发一个非常模块化和基于插件的框架。主要思想是，在我的应用程序结构中有一个名为的文件夹，您可以在其中放入符合特殊接口`plugins`的已编译插件（例如-files） 。然后应用程序使用用户选择的插件执行任务。因此，如果我想在 PDF 文件中执行一次任务，我会选择 ，在 Word 文档中执行一次，我会选择到工作。`.dll``IPlugin``PdfPlugin``DocPlugin`

输出也在接口中定义，因此每个插件都返回相同的数据结构。只是每个图书馆的实际工作不同。

现在，由于应用程序只是调用接口中定义的方法，例如`ParseDocument()`等等，我怎样才能防止插件（可能是由第三方开发的）执行有害代码？

我正在研究 .NET3.5（可能会切换到 4，尚未决定）和 C#。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T14:08:07.133

> 我正在研究 .NET3.5

在这种情况下，我会将您的插件隔离在单独的[AppDomain](https://stackoverflow.com/questions/1094478/what-is-a-net-application-domain)中运行，使用[代码访问安全](http://msdn.microsoft.com/en-us/library/930b76w0(v=vs.90).aspx)性并限制 App Domain 的权限集。这会“沙箱”您的插件程序集。

例如，您可以取消所有非托管代码权限和文件 IO 权限，然后您的插件将永远无法写入文件系统。

这不适合胆小的人。AppDomain 使用起来可能很棘手，并且需要序列化、对象生命周期策略等。您可以使用[MAF](http://www.developerfusion.com/article/9396/creating-extensible-applications-with-maf/)，因为它消除了很多管道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:11:36.880

我知道在这方面进行了相当多的研究。一种可行的方法是检查 IL 代码并查找禁止的方法签名。然后你可以将它们重定向到一个错误钩子，这将阻止插件 vom 执行进一步的代码。

一种应用是提高智能手机的安全性，您可以在其中检查下载的应用程序中的 IL 代码，了解对 GPS 模块、相机、麦克风等的访问方法。然后，安全应用程序可以修补这些访问方法并询问用户是否真的应该允许应用程序启用麦克风。

使用 .NET，您可以使用像 Mono.Cecil 这样的 IL 阅读器来检查 IL 代码中的有害签名。但是总有办法解决这个问题，因为您仍然可以动态生成代码或简单地将代码存储为资源并在运行时从资源中加载它。对于概念证明，这种方法很容易做到。

您甚至可以编写一个 FXCop 规则并使用它来静态检查插件是否有被禁止的方法调用。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-06T14:13:31.817

你不能。

DLL 是使用调用程序的权限执行的二进制代码。当调用 DLL 中的方法时，您无法控制它的作用。

当您想限制插件的功能时，您必须将执行移至主程序。一个好的方法是用脚本语言实现插件，由你的程序而不是二进制库解析和执行。

# asp.net-mvc - ASP.NET Mvc jquery ui 对话框作为视图还是部分视图？

> ID：11363749
> 
> 赞同：1
> 
> 时间：2012-07-06T14:03:13.250
> 
> 标签：asp.net-mvc, jquery-ui, jquery-ui-dialog, partial-views

我想在对话框中显示视图或部分视图。ASP.NET Mvc 4 默认模板 (AjaxLogin.js) 中有一个示例。如果登录是 ajax，AjaxLogin.js 会捕获。并运行 jsonresult 或 actionresult。AjaxLogin 通过将参数传递给对话框来控制它。所以传递参数对我来说很重要。

我将这个库用于我指定的表单是否有问题。还是有关于这个主题的另一个 js 库？

我是 jquery ui 的新手。我现在在我的项目中使用 AjaxLogin.js，用于其他形式。他们工作。我是否应该继续使用。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T15:31:58.107

您可以为对话框使用[**jQuery UI**](http://jqueryui.com/)库。就这么简单

1)在页面/布局中**添加对 jQuery UI 库的引用（来自****[CDN](http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/)** **/LocalCopy的引用）**

```
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" type="text/javascript"></script>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" /> 
```

**2）向链接添加一个特定的类，以便我们可以将其用作 jQuery 选择器**

```
@Html.ActionLink("Email", "Details", "Customers", null, new { @class = "popupLinks" }) 
```

**3) 将 Diloag 功能绑定到 DOM 就绪事件上的那些链接**

```
<script type="text/javascript">
    $(function(){
        $(".popupLinks").click(function (e) {
            var url = this.href;
            var dialog = $("#dialog");
            if ($("#dialog").length == 0) {
                dialog = $('<div id="dialog" style="display:hidden"></div>').appendTo('body');
            }
            dialog.load(
                url,
                {}, // omit this param object to issue a GET request instead a POST request, otherwise you may provide post parameters within the object
                function (responseText, textStatus, XMLHttpRequest) {
                    dialog.dialog({                       
                        close: function (event, ui) {                            
                            dialog.remove();
                        },
                        modal: true,                            
                         width: 460, resizable: false
                    });
                }
            );           
            return false;           
        });
    });
    </script> 
```

现在点击链接会显示控制器的`Details`action方法的结果内容。`Customers`（您可以根据自己的情况进行更改）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:25:51.113

如果您对该功能感到满意并且它适合您，那就去吧。我没有使用 ajaxlogin.js，所以我不能直接评论它，但我使用[FancyBox](http://fancybox.net/)作为我的模态对话框，非常成功地显示部分视图。

# java - 使用 Java 和 Dynamic C 通过 WiFi 进行套接字连接

> ID：11363750
> 
> 赞同：0
> 
> 时间：2012-07-06T14:03:13.957
> 
> 标签：java, sockets, wifi, tcpclient, tcplistener

好的，所以我在通过 WiFi 发送数据时遇到了一些小问题。我有一个 Rabbit RCM5400W WiFi 板，我需要向它发送数据。我在 Java 中创建了一些客户端/服务器套接字示例，它们通过 localhost 端口 5000 运行并且能够发送和接收数据。我现在正在尝试创建一个通过 WiFi 运行的程序，它将回显客户端（Java）发送给服务器（动态 C）的任何信息。到目前为止，我的所有连接都已超时或抛出“java.net.ConnectException：连接被拒绝”。任何帮助连接这两个将不胜感激。

动态 C 服务器

```
 #class auto

     #define TCPCONFIG             1
     #define _PRIMARY_STATIC_IP    "10.10.6.100"
     #define _PRIMARY_NETMASK      "255.255.255.0"
     #define MY_GATEWAY            "10.10.6.1"
     #define MY_NAMESERVER         "10.10.6.1"
     #define IFC_WIFI_SSID         "rabbitTest"
     #define IFC_WIFI_ROAM_ENABLE  1
     #define IFC_WIFI_ROAM_BEACON_MISS  20
     #define IFC_WIFI_CHANNEL      1
     #define IFC_WIFI_MODE         IFPARAM_WIFI_ADHOC
     #define IFC_WIFI_REGION       IFPARAM_WIFI_REGION_AMERICAS
     #define IFC_WIFI_ENCRYPTION   IFPARAM_WIFI_ENCR_NONE

#use "dcrtcp.lib"

#define PORT 5000

void main()
{
int bytes_read;
/*
    Unless STDIO_ENABLE_LONG_STRINGS is defined, printf() has max 127 bytes
    it can output.  For this sample, we'll read in a maximum of 100 bytes
    at a time.
*/
char    buffer[100];
tcp_Socket socket;

// Start network and wait for interface to come up (or error exit).
sock_init_or_exit(1);

while(1) {
    tcp_listen(&socket,PORT,0,0,NULL,0);

    printf("Waiting for connection...\n");
    while(!sock_established(&socket) && sock_bytesready(&socket)==-1)
        tcp_tick(NULL);

    printf("Connection received...\n");

    do {
        bytes_read=sock_fastread(&socket,buffer,sizeof(buffer)-1);

        if(bytes_read>0) {
            buffer[bytes_read]=0;
            printf("%s",buffer);
            sock_write(&socket,buffer,bytes_read);
        }
    } while(tcp_tick(&socket));

    printf("Connection closed...\n");
 }
} 
```

Java 客户端

```
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.net.*;
import java.util.Scanner;

public class Client implements Runnable {
// The socket connecting us to the server

private Socket socket;
// The streams we communicate to the server; these come
// from the socket
private DataOutputStream dout;
private DataInputStream din;

// Constructor
public Client(String host, int port) {

// Connect to the server
    try {
// Initiate the connection
            socket = new Socket(host, port);
// We got a connection! Tell the world
            System.out.println("connected to " + socket);
// Let's grab the streams and create DataInput/Output streams
// from them
            din = new DataInputStream(socket.getInputStream());
            dout = new DataOutputStream(socket.getOutputStream());
// Start a background thread for receiving messages
        new Thread(this).start();
    } catch (IOException ie) {
        System.out.println(ie);
    }
    //create a variable to hold how many times we send a message
    int counter = 1;

    //continuously accept user messages from console
    while (true) {
        Scanner kb = new Scanner(System.in);
        //we only want to display this message on startup 
        if (counter == 1) {
            System.out.println("Send:");
        }
        processMessage(kb.nextLine());
        counter++;
    }
}

// Gets called when the user types something
private void processMessage(String message) {
    try {
// Send it to the server
        dout.writeUTF(message);     
    } catch (IOException ie) {
        System.out.println(ie);
    }
}
// Background thread runs this: show messages from other window

@Override
public void run() {
    try {
        // Receive messages one-by-one, forever
        while (true) {
           // Get the next message
            String message = din.readUTF();
           // Print it to our text window
            System.out.println("Recieved: " + message);
           //add a new line for user input
            System.out.println("Send:");
        }
    } catch (IOException ie) {
        System.out.println(ie);
    }
   }
 } 
```

Java RunClient 程序

```
public class ClientRun {

public static void main(String[] args) {
    //we will run the client on port 5000, the same as the server
    int port = 5000;
    //create a new client on WiFi Router port 5000
    new Client("10.10.6.100",port);
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:23:50.043

如果您收到“连接超时”，这可能意味着客户端无法将任何网络数据包发送到服务器。如果你得到一个“连接被拒绝”，这意味着客户端能够通过一个数据包，但是它得到的任何东西都没有监听新的连接。

无论哪种情况，问题很可能不在 Java 代码中，而在您的网络设置中；例如，您在两端配置 WiFi 网络、网络接口、路由和/或防火墙和数据包过滤器的方式。

您可能应该从简单的事情开始：

*   您可以从客户端的命令行“ping”服务器吗？

*   您可以从命令行建立 TCP/IP 网络连接吗？例如使用`telnet`或`nc`连接到服务器端口？

# html - 如何创建响应式网页？

> ID：11363753
> 
> 赞同：-3
> 
> 时间：2012-07-06T14:03:22.267
> 
> 标签：html, css

创建响应式网页的最佳方法是什么？Skeleton Framework 是否兼容所有浏览器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:19:23.010

访问此链接：http: [//johnpolacek.github.com/scrolldeck.js/decks/responsive/](http://johnpolacek.github.com/scrolldeck.js/decks/responsive/)

在那里你可以找到如何做以及一些教程和框架的链接。对于所有其他不知道什么是响应式网站的人，也可以使用此链接：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:28:35.183

有很多资源可以了解什么是[响应式网页设计](http://www.alistapart.com/articles/responsive-web-design/)。了解什么适合您和您的要求至关重要。因此，对像您这样的问题给出一个通用的答案并不容易。但是，上面的文章中解释了基本原理。一旦您清楚地了解了基础知识，您就可以查看诸如[LESS](http://lessframework.com/)或[Skeleton](http://getskeleton.com)之类的框架 以获取更多样板类型的东西。

# php - 如何使用 htaccess 文件添加静态内容过期

> ID：11363761
> 
> 赞同：0
> 
> 时间：2012-07-06T14:03:53.800
> 
> 标签：php, codeigniter

htaccess 文件内容。我想设置我的静态内容的过期时间，比如图像、js、css

```
RewriteEngine On
RewriteCond $1 !^(index\.php|images|css|js|robots\.txt|favicon\.ico)
RewriteCond %{REQUEST_URI} ^/system.*
RewriteRule ^(.*)$ index.php?/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)$ index.php?/$1 [L] 
```

我的图像位置是

```
www.sitename.com/css/css/css files
www.sitename.com/images/img/images 
```

像这样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:17:10.620

像这样的东西怎么样

```
<Directory "css/">
    ExpiresDefault A0
    Header set Cache-Control "max-age=0,  no-cache, must-revalidate"
</Directory> 
```

`0`它以秒为单位到期的时间在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:22:14.280

检查[mod_expires](http://httpd.apache.org/docs/2.0/mod/mod_expires.html "apache mod_expires")文档。

你可以使用类似的东西

```
<FilesMatch "\.(ico|jpg|jpeg|png|gif|js|css|swf)$">
ExpiresDefault "access plus 12 hours"
</FilesMatch> 
```

# javascript - 似乎无法将函数绑定到backbone.js中查看

> ID：11363763
> 
> 赞同：0
> 
> 时间：2012-07-06T14:04:05.567
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我想绑定`checkScroll()`到视图`PhotoListView`，以便我可以`this.checkScroll()`从内部调用，`$(Window).scroll()`而无需先`var self = this`调用`self.checkScroll()`.

**问题：**但是绑定似乎不起作用，并且我收到错误`Uncaught TypeError: Object [object Window] has no method 'checkScroll'`我绑定错误了吗？

**看法**

```
PhotoListView = Backbone.View.extend({
    el: '#photo_list',

    initialize: function() {
        _.bindAll(this, 'checkScroll');
        this.bind('checkScroll', this)

        $(window).scroll(function() {
            this.checkScroll();
        });
    },

    checkScroll: function() {
        console.log('checkScroll');
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T14:07:09.497

是的，试试这个：

```
initialize: function() {
    _.bindAll(this, 'checkScroll');
    $(window).scroll(this.checkScroll)
}, 
```

`_.bindAll`将获取`this.checkScroll`并将其上下文修复为`this`，因此您可以直接将其作为处理程序传递。但是你使用匿名函数把它扔掉了。

请注意，有两种不同的“绑定”概念：

*   将函数绑定到对象，这样无论函数如何调用，它都会有固定的`this`值
*   将处理程序附加到元素的事件

`_.bindAll`前者。

* * *

[jsfiddle 演示](http://jsfiddle.net/yepUg/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T14:07:39.620

尝试：

```
var view = this; //add this
$(window).scroll(function() {
    view.checkScroll(); //change "this" to "view"
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-03T10:55:05.223

您的代码的实际问题是丢失`this`. 通过删除内联函数并提供对该函数的直接引用，您可以避免在闭包时丢失上下文。

但是，如果您仍想使用内联函数或执行一系列函数，您仍然可以使用相同的代码，使用公开适当上下文的代理包装函数。

您必须代理该功能并为其提供适当的范围：

使用[下划线](http://underscorejs.org/)：

```
$(window).scroll(_.bind(function() {
    this.checkScroll();
    this.anotherFunction();
},this)); 
```

使用[jQuery](http://api.jquery.com/)：

```
$(window).scroll($.proxy(function() {
    this.checkScroll();
    this.anotherFunction();
},this)); 
```

# jquery - 使用 fadeOut 向后迭代 - 无法确定条件

> ID：11363766
> 
> 赞同：1
> 
> 时间：2012-07-06T14:04:14.497
> 
> 标签：jquery, fadein, fadeout, loops

我在这里得到了这个代码：http: [//jsfiddle.net/Az5Uk/](http://jsfiddle.net/Az5Uk/)

```
function fadeIt (element) {

    var elem = $(element).hide();
    var elemLen = $(element).length;

    elem.each(function (i){
        $(this).delay(i * 900).fadeIn(900);

        if (i == elemLen -1) {

            $($(this).get().reverse()).each(function(i) {
                 $(this).delay(elemLen * 900).fadeOut(900);
            });
        }
    });

}

fadeIt(".animate");​ 
```

我想做的事：淡入三个X，然后将它们向后淡出。这应该都是递归函数的一部分。

我没有在示例中编写递归部分，因为我无法弄清楚为什么淡出在一个 X 之后停止。或者换句话说：我知道这是因为`if (i == elemLen -1)`但我不知道如何编辑条件使其淡出所有三个 X。

我已经尝试过`if (i == elemLen -1 || i == elemLen -2)`，但是使用这种语法它会先淡出中间的 X，然后是最后一个 X。所以这不起作用。

谁能把我推向正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:29:46.073

[http://jsfiddle.net/npwvH/](http://jsfiddle.net/npwvH/)

我不太擅长解释别人的代码，所以我给你写了一个替代方案。

```
function ponyo(elements, anim) {
    elements.each(function(i) {
        $(this).delay(i*900)[anim](900);
    });
    setTimeout(function() {
        ponyo($(elements.get().reverse()), (anim=='fadeIn')?'fadeOut':'fadeIn');
    }, elements.length * 900);
}
ponyo($(".animate").hide(), 'fadeIn');​ 
```

它只是像您一样执行动画，等待动画完成所需的时间（setTimeout），然后在反向集合上调用相反的动画。

# ios - 一定分数后显示警报视图

> ID：11363769
> 
> 赞同：2
> 
> 时间：2012-07-06T14:04:25.940
> 
> 标签：ios, xcode4, uialertview, xcode4.3, alert

我正在 Xcode 上创建一个应用程序，我希望在他们单击按钮 100 次时显示警报视图，但由于某种原因，当我单击按钮 100 次时没有任何反应，我会向您显示我在应用程序中拥有的所有代码目前以及我在 xib 中所做的事情以及与希望你们提供帮助的相关内容。

```
#import <UIKit/UIKit.h>

int counter;

@interface ViewController : UIViewController {

    IBOutlet UILabel *count;
}

-(IBAction)plus;
-(IBAction)minus;
-(IBAction)zero;

@end 
```

执行

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void) buttonAction {
    counter++;
    if(counter == 100)
        [self showAlert];
}

- (void) showAlert {

    UIAlertView *alert = [[UIAlertView alloc]

                          initWithTitle:@"Tile"
                          message:@"This is the message" 
                          delegate:nil 
                          cancelButtonTitle:@"Dismiss" 
                          otherButtonTitles:nil];

    [alert show];

}

-(IBAction)plus {
    counter=counter + 1;
    count.text = [NSString stringWithFormat:@"%i",counter];
}

-(IBAction)minus {
    counter=counter - 1;
    count.text = [NSString stringWithFormat:@"%i",counter];
}

-(IBAction)zero {
    counter=0;
    count.text = [NSString stringWithFormat:@"%i",counter];
}

- (void)viewDidLoad {
    counter=0;
    count.text = @"0";
        [super viewDidLoad];

}

- (void)viewDidUnload {

     [super viewDidUnload];
    }

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

这就是我拥有的所有代码，我遇到的问题是计数器工作正常，就在我达到 100 时，没有任何反应这是图像

![在此处输入图像描述](../Images/cf8ae4dec2d27a035e42f698da8ec1ae.png)

![在此处输入图像描述](../Images/0eeaa66b7562d270973e3269ae827255.png) 并且没有警报 ![在此处输入图像描述](../Images/5337f8bdc22d42b615f12add4f6e321e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:11:15.820

你没有调用你的“buttonAction”方法。试试这个：

```
-(IBAction)plus {
    counter=counter + 1;
    [self buttonAction];
    count.text = [NSString stringWithFormat:@"%i",counter];
}

-(IBAction)minus {
    counter=counter - 1;
    [self buttonAction];
    count.text = [NSString stringWithFormat:@"%i",counter];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:22:30.970

我不会使用“buttonAction”函数，而是将 if 语句放在您的 plus 函数中。类似这样的东西：

```
-(IBAction)plus {
    counter=counter + 1;
    count.text = [NSString stringWithFormat:@"%i",counter];
    if(counter == 100)
        [self showAlert];
} 
```

它消除了对那个额外函数的需求，如果无论如何调用它都会增加太多计数器。（plus 和 buttonAction 都告诉 counter 增加 1，意思是每次 plus 被称为 counter 增加 2）

# ios - 添加注释时 MKMapView 崩溃

> ID：11363771
> 
> 赞同：0
> 
> 时间：2012-07-06T14:04:31.370
> 
> 标签：ios, xcode, annotations, mkmapview

**问题**

我的 MKMapView 有问题。当我初始化它并尝试添加几个注释时，应用程序崩溃，给我一个 SIGABRT 并声称我有一个“未捕获的异常'NSInvalidArgumentException'，原因：'-[__NSCFSet addObject: ]: 尝试插入 nil'" 我弄乱了 NSLogs 和我的代码，发现每当我调用 [mapView addAnnotation:myAnnotation] 时都会发生这种情况。我已经分别尝试了这两个注释，但应用程序仍然崩溃。

**代码**

这是我用于 MKMapView 的代码

```
IBOutlet MKMapView *mapView; //these are in interface
DisplayMap *thing1; //yes, I have @properties too, and I synthesize them
DisplayMap *thing2;

-(void) initMap //called in viewDidLoad after [super viewDidLoad]
{
[mapView setMapType:MKMapTypeStandard];
[mapView setZoomEnabled:YES];
[mapView setScrollEnabled:YES];
mapView.showsUserLocation = YES;
MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } };
region.center.latitude = 0;
region.center.longitude = 0;
region.span.longitudeDelta = 0.01f;
region.span.latitudeDelta = 0.01f;
[mapView setRegion:region animated:YES]; 
[mapView setDelegate:self];

thing1.title = @"thing1";
thing1.subtitle = @"is here"; 
thing1.coordinate = region.center; 

thing2.title = @"thing2";
thing2.subtitle = @"is somewhere"; 
CLLocationCoordinate2D thing2Coord = {0.005,0.005};
thing2.coordinate = thing2Coord;
[mapView addAnnotation:thing1];
[mapView addAnnotation:thing2];
}

//and my DisplayMap code
//the .h
#import <Foundation/Foundation.h>
#import <MapKit/MKAnnotation.h>

@interface DisplayMap : NSObject <MKAnnotation> {
CLLocationCoordinate2D coordinate; 
NSString *title; 
NSString *subtitle;
}

@property (nonatomic, assign) CLLocationCoordinate2D coordinate; 
@property (nonatomic, copy) NSString *title; 
@property (nonatomic, copy) NSString *subtitle;

@end
//the .m
#import "DisplayMap.h"

@implementation DisplayMap
@synthesize coordinate,title,subtitle;

-(void)dealloc{
[title release];
[subtitle release];
[super dealloc];
}

@end 
```

**理论**

我试图隔离 initMap 以便在我的应用程序的任何其余部分加载之前调用它。我稍后会运行其他进程，但此时它们不应处于活动状态，因为它们尚未初始化。我想这个问题可能与我初始化 MKMapView 本身或我的 Displaymap 属性有关。Xcode 无法检测到它，不管它是什么，我也不确定我得到的错误是什么意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:09:46.907

从您的代码来看，您似乎从未实例化`thing1`和`thing2`.

尝试在 init 函数的开头添加这些行。

```
 thing1 = [[DisplayMap alloc] init]; 
 thing2 = [[DisplayMap alloc] init]; 
```

仅仅因为这些成员是属性并不意味着它们是自动初始化的。

# windows - Autosys：KILLJOB 事件离开孤立进程

> ID：11363774
> 
> 赞同：1
> 
> 时间：2012-07-06T14:04:46.450
> 
> 标签：windows, signal-handling, autosys, remote-process

我在 Windows 服务器上运行各种进程（批处理文件、java、perl、csharp 脚本/应用程序的混合）。这些进程是使用 Autosys 启动的。Windows 上的 autosys 代理总是在我在作业定义中提供的命令前加上“cmd /c”（参见下面的示例）

```
C:\Windows\system32\cmd.exe /C foobar.exe 
```

这本身不是问题，但是当我尝试通过发送 autosys KILLJOB 事件（根据 Autosys 文档向进程发送中断后跟终止信号）来终止作业时，foobar.exe 不会被终止，它是被杀死的父 cmd.exe。foob​​ar.exe 最终成为一个孤立进程，然后我们需要登录到服务器以使用任务管理器手动终止它。

有没有人有任何解决方案，以便来自 autosys 的终止信号传播到实际过程？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T19:37:22.703

这是处理 Windows Autosys 作业时的一个已知错误。这来自 Autosys R11 参考手册。我从未尝试过使用此修复程序。祝你好运。

foob​​ar.exe 会在不使用 cmd.exe 的情况下运行吗？我会尝试一下，看看 KILLJOB 事件是否正常工作。

*Windows 不支持进程组的概念。当您为运行可执行文件 (.exe) 的作业发出 KILLJOB 事件时*，KILLJOB 会终止命令定义中指定的进程。当您为运行非 *.exe 的作业（例如，*.bat、*.cmd 或 .com）的作业发出 KILLJOB 事件时*，KILLJOB 仅终止 CA Workload Automation AE 用来执行的 CMD.EXE 进程启动工作。Job Status 是根据被终止的 CMD.EXE 进程的返回码设置的，可以是以下之一：SUCCESS、FAILURE 或 TERMINATED。由用户应用程序或批处理启动的进程（*.bat) 文件不会被杀死。要解决此限制，您可以修改程序以观察来自在 Windows 计算机上运行的 CA Workload Automation AE 作业的信号，并且您可以为 SEND_SIGNAL 事件实施此参数。*

# cuda - MPI+CUDA：多 CPU 主机 (MPI) 和单 GPU (CUDA) 的 CPU 到 GPU 数据传输

> ID：11363778
> 
> 赞同：1
> 
> 时间：2012-07-06T14:04:56.560
> 
> 标签：cuda, mpi

我想改进 MPI-CPU 节点和单个 GPU 之间的“数据传输”算法。

对于 NUMPROCS 节点，每个 MPI 节点都有一个 Ntot/NUMPROCESS float4 的一维数组。

我的算法很简单：

1) 将一维数组 (MPI_GATHER) 聚集在主节点上的一个大数组 (大小 Ntot) 中。

2) 使用主节点，通过 cudaMemcpy 函数将大数组发送到 GPU。CUDA 内核与主节点一起启动。

是否可以避免第一步？我的意思是，每个 MPI 节点通过 cudaMemcpy 发送其数组，并且连接直接在 GPU 的内存上完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:07:56.370

由于您的 MPI-CPU 节点与 GPU 在同一物理主机上运行，​​因此您可以避免第一步。

您可以使用异步函数`CudaMemcpyAsync()`来执行您的第二步。该函数有一个流参数。它有助于同时进行 GPU 计算`memcpy`。

在每个进程中，您都可以使用`CudaSetDevice(devicenumber)`来控制您选择的 GPU。

有关详细信息，请参阅 CUDA 手册。

# profiling - 如何通过一个 clFinish 分析顺序启动的多个 OpenCL 内核？

> ID：11363780
> 
> 赞同：5
> 
> 时间：2012-07-06T14:05:00.867
> 
> 标签：profiling, opencl

我有多个内核，它们按如下顺序启动：

```
 clEnqueueNDRangeKernel(..., kernel1, ...);
        clEnqueueNDRangeKernel(..., kernel2, ...);
        clEnqueueNDRangeKernel(..., kernel3, ...); 
```

并且，多个内核共享一个全局缓冲区。

现在，我通过在 clEnqueueNDRangeKernel 之后添加代码块来分析每个内核执行并总结它们以计算总执行时间：

```
 clFinish(cmdQueue);
        status = clGetEventProfilingInfo(...,&starttime,...);
        clGetEventProfilingInfo(...,&endtime,...);
        time_spent = endtime - starttime; 
```

我的问题是如何通过一个 clFinish 一起分析三个内核？（就像在最后一次内核启动后添加一个 clFinish() ）。

是的，我给每个 clEnqueueNDRangeKernel 不同的时间事件，并得到大的负数。详细信息：

```
clEnqueueNDRangeKernel(cmdQueue,...,&timing_event1);
clFinish(cmdQueue);
clGetEventProfilingInfo(timing_event1,CL_PROFILING_COMMAND_START,sizeof(cl_ulong),&starttime1,NULL);
clGetEventProfilingInfo(timing_event1,CL_PROFILING_COMMAND_END,sizeof(cl_ulong),&endtime1,NULL);
time_spent1 = endtime1 - starttime1;

clEnqueueNDRangeKernel(cmdQueue,...,&timing_event2);
clFinish(cmdQueue);
clGetEventProfilingInfo(timing_event2,CL_PROFILING_COMMAND_START,sizeof(cl_ulong),&starttime2,NULL);
clGetEventProfilingInfo(timing_event2,CL_PROFILING_COMMAND_END,sizeof(cl_ulong),&endtime2,NULL);
time_spent2 = endtime2 - starttime2;

clEnqueueNDRangeKernel(cmdQueue,...,&timing_event3);
clFinish(cmdQueue);
clGetEventProfilingInfo(timing_event3,CL_PROFILING_COMMAND_START,sizeof(cl_ulong),&starttime3,NULL);
clGetEventProfilingInfo(timing_event3,CL_PROFILING_COMMAND_END,sizeof(cl_ulong),&endtime3,NULL);
time_spent3 = endtime3 - starttime3;

time_spent_all_0 = time_spent1 + time_spent2 + time_spent3;
time_spent_all_1 = endtime3 - starttime1; 
```

如果我有每个 clFinish，所有分析值都是合理的，但是 time_spent_all_1 大约是 time_spent_all_0 的 2 倍。如果我删除除最后一个 clFinish 之外的所有 clFinish，则所有分析值都是不合理的。

感谢 Eric Bainville，我得到了我想要的结果：通过一个 clFinish 分析多个 clEnqueueNDRangeKernel。以下是我使用的最终代码：

```
clEnqueueNDRangeKernel(cmdQueue,...,&timing_event1);
clEnqueueNDRangeKernel(cmdQueue,...,&timing_event2);
clEnqueueNDRangeKernel(cmdQueue,...,&timing_event3);
clFinish(cmdQueue);

clGetEventProfilingInfo(timing_event1,CL_PROFILING_COMMAND_START,sizeof(cl_ulong),&starttime,NULL);
clGetEventProfilingInfo(timing_event3,CL_PROFILING_COMMAND_END,sizeof(cl_ulong),&endtime,NULL);
time_spent = endtime - starttime; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T16:41:14.720

每个`clEnqueueNDRangeKernel`都会创建自己的`cl_event`：调用的最后一个参数是指向 a 的指针`cl_event`；如果最后一个 arg 不为 0，则将创建一个新事件。

命令完成后，可以查询相关事件的开始/结束分析信息。此事件必须在使用后释放（调用`clReleaseEvent`）。

`clFinish`阻塞，直到所有排队的命令都完成。

您只需要一次调用`clFinish`，然后您就可以查询所有事件的分析信息。

# hadoop - Apache Mahout 与 Apache Hive 的集成

> ID：11363782
> 
> 赞同：1
> 
> 时间：2012-07-06T14:05:14.623
> 
> 标签：hadoop, hive, mahout

我已将数据集存储在 Apache Hive 中，但想对 Hive 数据库中的数据使用 Mahout。

如何集成 Mahout 和 Hive，以便让 Mahout 从 Hive 数据库中读取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:49:58.307

我认为您需要修改 mahout 作业并替换 hive 中的数据源。当数据存储在 HBase 中时，我会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:51:00.567

我认为，您可以使用[HiveJDBC 驱动程序](https://cwiki.apache.org/Hive/hivejdbcinterface.html)并在 Mahout 方面使用相应的 JDBC 组件

# java - 通过单击 Android 上的按钮发送 TCP 命令

> ID：11363787
> 
> 赞同：-1
> 
> 时间：2012-07-06T14:05:32.057
> 
> 标签：java, android, xml

我是 Android 编程新手，所以我对网络不太了解。我想要做的是，当我单击一个按钮时，它会通过网络向特定 IP 发送特定命令；就像网络遥控器一样。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:37:22.063

我将从阅读 Oracle Socket 文档开始： http: [//docs.oracle.com/javase/tutorial/networking/sockets/index.html](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)

它提供了一个很好的总体概述。之后，请确保`INTERNET`在您的 Android 项目中启用该权限，否则您尝试创建的任何套接字都只会返回`null`.

一旦你建立了一个 TCP 套接字，你似乎只想将命令代码发送到服务器并让它做一些事情。要做到这一点，它只是一个简单的：

```
try{
    <dataOutputStream>.write(BUFFER);
} catch(IOException e)
{
    //error code
} 
```

where`buffer`是您发送的任何命令的整数常量。不过要小心，因为`write()`这种情况下的方法只会写入整数的最低有效字节，因此不会发送大于 255 的任何内容。有几种`write()`方法，您可以选择最合适的一种。

# java - 类型不匹配：无法从 Class <..> 转换为 Class <...>

> ID：11363788
> 
> 赞同：1
> 
> 时间：2012-07-06T14:05:33.367
> 
> 标签：java, eclipse-rcp

我已经“继承”了一个 Eclipse RCP 项目，该项目似乎适用于基于 3.6 的目标平台集。但是，继续前进，我们需要更新到平台的最新版本，但是当我将目标平台更改为 3.7（或 4.2）时，我遇到了一些错误，类似于

```
Type mismatch: cannot convert from Class<capture#1-of ?> to Class<? extends IDatasetProvider> 
```

任何人都可以建议/解释为什么这在 3.6 中可以正常工作，但在 3.7（及更高版本）中不能正常工作？关于我从哪里开始解决这个问题的任何想法也很棒！

导致此错误的代码片段（出现在 b.loadClass 部分）：

```
 List<Class<? extends IDatasetProvider>> list = new LinkedList<Class<? extends IDatasetProvider>>();
    ClassMap<IDatasetProvider, List<String>> map = new ClassMap<IDatasetProvider, List<String>>();

    for (IConfigurationElement e : elements)
    {
        try
        {
            Bundle b = Platform.getBundle(e.getContributor().getName());

            String viewId = e.getAttribute("viewId");
            Class<? extends IDatasetProvider> datasetType = b.loadClass(e
                    .getAttribute("datasetProvider"));
            ...
            ...
            ...
        }
     } 
```

还有3个（可能）相关的警告

```
 IDatasetProvider is a raw type. References to generic type IDatasetProvider<T> should be parameterized 
```

如果我改回我们的 3.6 平台，一切都会再次运行。

编辑：在 Alexy 和 gzukmin 的帮助下修复。

我使用了以下代码，特别是转换为，`Class<? extends IDatasetProvider>`而不仅仅是`Class`：

```
Class<? extends IDatasetProvider> datasetType = 
    (Class<? extends IDatasetProvider>) b.loadClass(e.getAttribute("datasetProvider")); 
```

如果有任何理由我应该考虑只转换为更通用的`Class`，请告诉我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T17:29:53.747

您可以像这样将其转换为原始类型：

```
Class<? extends IDatasetProvider> datasetType = 
    (Class) b.loadClass(e.getAttribute("datasetProvider")); 
```

请注意，这将：

1.  添加更多关于原始类型和未经检查的强制转换的警告。

2.  如果您的类实际上没有扩展，则在运行时炸毁`IDatasetProvider`。而且不是在演员表位置，而是稍后当您尝试实际使用该课程时。所以检查这个可能是个好主意

    ```
    IDatasetProvider.class.isAssignableFrom(datasetType) 
    ```

（参见[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#isAssignableFrom%28java.lang.Class%29)）。

# antlr - 如何在 antlr 语法中做别名

> ID：11363789
> 
> 赞同：1
> 
> 时间：2012-07-06T14:05:38.210
> 
> 标签：antlr, antlr3

假设我试图为一个简单的 JPA 查询语法做一个语法，像这样

```
select e from Entity e where e.name=:name and e.data>:time 
```

有没有关于如何做那个别名部分的文档（基本上是“e”）？

如果用户输入，我基本上是在尝试获取错误

```
select a from Entity e where a.name=:name 
```

注意 a 没有定义，所以这应该失败。我应该在语法中这样做吗？或者我应该在我走树时解析语法后这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:28:18.567

> 我应该在语法中这样做吗？

当然，您应该或不应该做的是您的业务:)

> 或者我应该在我走树时解析语法后这样做？

是的，这通常是在评估您的 AST 时完成的，而不是在 AST 创建期间（所以不是在解析期间）。

# java - 在没有打开对话框的情况下读取本地文件（在浏览器中）

> ID：11363791
> 
> 赞同：0
> 
> 时间：2012-07-06T14:05:39.200
> 
> 标签：java, javascript, flash, html, applet

有什么方法（从浏览器）可以在不打开对话框的情况下读取本地文件？

可以使用：javascript、flash 或 java。

目标：当您在 WYSIWYG 中粘贴带有 MS Word 图像的文本时，会有指向图像文件的链接。像“file:///C:/Users/username/AppData/Local/Temp/msohtmlclip1/01/clip_image001.jpg”。我想阅读这些文件，上传到服务器并替换本地路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:10:54.283

未经用户许可从浏览器访问磁盘内容存在安全风险。因此，要使用 Java 执行此操作，您需要对小程序进行签名并且用户允许它运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T14:10:26.180

Java 小程序可以做到这一点，但它需要使用来自受信任机构的 SSL 证书进行签名，否则小程序将不会在引发安全异常的情况下运行。

您可以使用任何标准的 Java 方法来加载和上传文件（Apache Commons FileUtils 和 HttpClient？）；如果您是 Java 新手，那么可能会有更简单的解决方案。

# sql-server-2008 - 使用ms sql在表中插入逗号分隔值的存储过程？

> ID：11363792
> 
> 赞同：0
> 
> 时间：2012-07-06T14:05:43.723
> 
> 标签：sql-server-2008, java-stored-procedures

我有一个名为 assignRole 的表。

我正在传递 userid (int) csv 字符串，并传递 roleid(int)。

我想要一个存储过程，它从字符串中拆分用户 ID 并获取角色 ID 并将这些值插入表中。这对用户 ID 字符串中的所有值都会发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:16:15.163

我喜欢使用表值函数进行拆分。

IF OBJECT_ID (N'dbo.StrSplit') 不为空 DROP FUNCTION dbo.[StrSplit] GO

CREATE FUNCTION [dbo].[StrSplit] (@String VARCHAR(MAX), @Delimiter char(1)) 返回@Results TABLE (Items NVARCHAR(MAX)) 作为开始声明@INDEX INT DECLARE @SLICE nvarchar(MAX)

```
-- HAVE TO SET TO 1 SO IT DOESNT EQUAL ZERO FIRST TIME IN LOOP
SELECT @INDEX = 1

-- Early exit if passed string is null
IF @String IS NULL RETURN

WHILE @INDEX !=0
BEGIN 
          -- GET THE INDEX OF THE FIRST OCCURENCE OF THE SPLIT CHARACTER
          SELECT @INDEX = CHARINDEX(@Delimiter,@STRING)

          -- NOW PUSH EVERYTHING TO THE LEFT OF IT INTO THE SLICE VARIABLE
          IF @INDEX !=0
                 SELECT @SLICE = LEFT(@STRING,@INDEX - 1)
          ELSE
                 SELECT @SLICE = @STRING
          -- PUT THE ITEM INTO THE RESULTS SET
          INSERT INTO @Results(Items) VALUES(@SLICE)
          -- CHOP THE ITEM REMOVED OFF THE MAIN STRING
          SELECT @STRING = RIGHT(@STRING,LEN(@STRING) - @INDEX)
          -- BREAK OUT IF WE ARE DONE
          IF LEN(@STRING) = 0 BREAK
END
RETURN 
```

结尾

GO GRANT SELECT ON [dbo].[StrSplit] TO [public]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:08:18.737

首先，创建一个函数：

```
CREATE FUNCTION [dbo].[SplitInts]
(
   @List       VARCHAR(MAX),
   @Delimiter  CHAR(1)
)
RETURNS TABLE
WITH SCHEMABINDING
AS
   RETURN ( SELECT Item = CONVERT(INT, Item) FROM ( 
     SELECT Item = x.i.value('(./text())[1]', 'int') FROM ( 
       SELECT [XML] = CONVERT(XML, '<i>' + REPLACE(@List, @Delimiter, '</i><i>') 
       + '</i>').query('.') ) AS a CROSS APPLY [XML].nodes('i') AS x(i)) AS y
     WHERE Item IS NOT NULL
   ); 
```

现在你可以说：

```
INSERT dbo.assignRole(RoleID, UserID)
  SELECT @RoleID, Item
  FROM dbo.SplitInts(@UserIDList, ','); 
```

# javascript - 是否可以在其他功能中访问克隆？

> ID：11363795
> 
> 赞同：0
> 
> 时间：2012-07-06T14:05:59.033
> 
> 标签：javascript, jquery, variables, clone

我有一个名为 taskButtonClick() 的函数：

1.  将变量形式设置为克隆。
2.  将变量 formParent 设置为最外层的 div。
3.  删除父 div 及其元素。
4.  并用表单替换那些删除的元素。

    ```
    function taskButtonClick() {
    $(".task-btn").click(function(){
        // Setting form to the clone I want to acces in .on()
        var form = $(this).closest('#form-to-date').clone(true);
        var formParent = $(this).closest('#date-container');
        $(this).closest('#form-to-date').remove();
            $(formParent).html('\
                <form>\
                    <fieldset>\
                    <legend>Task<button class="btn task-btn" id="exit- button"><img src="http://localhost/ia/assets/img/remove.png"></button></legend>\
                     <input type="text" class="span12 input-xlarge"  id="input01">\
                    <div class="control-group">\
                        <div class="controls">\
                        </div>\
                    </div>\
                    <div class="form-actions">\
                        <button class="btn btn-primary span12"  type="submit">Save changes</button>\
                    </div>\
                    </fieldset>\
                </form>\
                ');
    });
    } 
    ```

表单中添加了一个退出按钮，我为其创建了一个 .on() 函数并附加了一个点击处理程序。我试图找出一种从 .on 函数中访问变量表单（克隆）的方法，并将表单替换为以前的内容：

```
$("#date-container").on("click", "#exit-button", function(event){
alert("Exit Button Works.");
event.preventDefault();
    // Here's kind of what I'm going for
$(form).appendTo(formParent);
}); 
```

我对 jquery 不是很熟悉，所以如果我能以某种方式更好地澄清，请告诉我。

```
Edit: Here's where I'm calling the funcitons:

$('document').ready(function(){
    setAjax();
    initialize();
    setDates();
    setButton(); 
    setActiveNav(); 
    taskButtonClick();
    removeButtonClicked();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:17:08.907

尝试声明一个全局变量。

```
$(document).ready(function(){
       //Notice variable is outside of the event function. It can be accessed by other functions and events.
       var formParent = null;

       $(".task-btn").click(function(){
    // Setting form to the clone I want to acces in .on()
    var form = $(this).closest('#form-to-date').clone(true);
    formParent = $(this).closest('#date-container');
    $(this).closest('#form-to-date').remove();
        $(formParent).html('\
            <form>\
                <fieldset>\
                <legend>Task<button class="btn task-btn" id="exit- button"><img src="http://localhost/ia/assets/img/remove.png"></button></legend>\
                 <input type="text" class="span12 input-xlarge"  id="input01">\
                <div class="control-group">\
                    <div class="controls">\
                    </div>\
                </div>\
                <div class="form-actions">\
                    <button class="btn btn-primary span12"  type="submit">Save changes</button>\
                </div>\
                </fieldset>\
            </form>\
            ');
     });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:17:57.687

如果要使用克隆变量，请使用全局变量声明。

# svn - 有没有办法让我找出哪些用户从存储库中进行了“svn update”？

> ID：11363805
> 
> 赞同：0
> 
> 时间：2012-07-06T14:06:34.037
> 
> 标签：svn, repository

我拥有一个存储库，并且我创建了能够对其进行读写的用户。SVN 日志显示用户做了哪些“提交”，但我想知道用户从存储库中专门做了哪些“svn update”？我一直在网上寻找，但我没有找到方法。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:57:18.827

如果您对服务器具有管理员访问权限，则可以在以下问题的答案中找到您要查找的内容：[如何判断是否有人下载了最新代码](https://stackoverflow.com/questions/1631972/how-to-tell-if-someone-has-downloaded-the-latest-code)

如果您使用的是 TortoiseSVN 客户端，另一种解决方案可能是使用[客户端钩子。](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-settings.html#tsvn-dug-settings-hooks)

# git - Git：在签出新分支之前没有提交分支

> ID：11363806
> 
> 赞同：2
> 
> 时间：2012-07-06T14:06:37.983
> 
> 标签：git, git-branch

我在一个分支上做一些工作，然后签出一个新分支而不提交旧分支。在新分支上，我删除/添加了一堆东西，然后提交了更改。现在，当我回到原始分支时，它丢失了很多在最后一次提交到该分支之后添加到其中的东西。啊！

有没有办法让那个分支恢复到我签出新分支之前的状态？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T14:10:28.317

不，您从未直接向 Git 展示过的内容，即已提交或至少暂存的内容，一旦您将其删除，就会永远消失。但是，当您切换到新的时，您的更改应该已经保留，因此除非您完全删除那里的更改，否则它应该包含在那里的提交中。

# vb.net - 从 System.Linq.EnumerableQuery 转换为 System.Data.Datatable（使用动态 LINQ）

> ID：11363811
> 
> 赞同：3
> 
> 时间：2012-07-06T14:06:49.037
> 
> 标签：vb.net, linq, dynamic, exception-handling, casting

我正在尝试将动态 LINQ 查询的结果放入 DataTable 中。尝试将查询直接放入 DataTable 会给我这个错误：

> 无法将“System.Linq.EnumerableQuery`1[DynamicClass1]”类型的对象转换为“System.Data.DataTable”类型。

我的代码是：

```
Dim query = tbl.AsEnumerable.AsQueryable.Select("new(it[""curr""] as Curry)")
Dim tbl As DataTable = query 
```

我试过了：

```
Dim query As IEnumerable(Of DataRow) = tbl.AsEnumerable.AsQueryable.Select("new(it[""curr""] as Curry)").Cast(Of DataRow)()
Dim tbl1 As DataTable = query.CopyToDataTable 
```

但这给了我：

> 无法将“DynamicClass1”类型的对象转换为“System.Data.DataRow”类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-12-01T11:42:20.097

```
 Public Shared Function ConvertIEnumerableToDataTableFromProperties(Of T)(ByVal list As IEnumerable(Of T)) As DataTable
        Dim table As New DataTable()
        Dim fields() As PropertyInfo = GetType(T).GetProperties()
        For Each field As PropertyInfo In fields
            table.Columns.Add(field.Name, field.PropertyType)
        Next
        For Each item As T In list
            Dim row As DataRow = table.NewRow()
            For Each field As PropertyInfo In fields
                row(field.Name) = field.GetValue(item)
            Next
            table.Rows.Add(row)
        Next
        Return table
    End Function 
```

# ruby-on-rails - 如何将 `/users/sign_up` 路径映射到 `/users/new`？

> ID：11363812
> 
> 赞同：0
> 
> 时间：2012-07-06T14:06:55.200
> 
> 标签：ruby-on-rails, ruby, rest, routing

我正在使用 Ruby on Rails 3.2.2，我想“使用” `/users/sign_up`PATH 而不是`/users/new`为了向我的应用程序注册新用户。

我怎样才能做到“a la Ruby on Rails Way”？

* * *

*注意*：此时我在`routes.rb`文件中使用以下代码，但我认为这不是完成我正在寻找的最佳方法：

```
resources :users, :except => [:new] do
  collection do
    get 'sign_up'
  end
end 
```

你有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T14:23:20.493

这应该有效：

```
resources :users, :path_names => {:new => 'sign_up'} 
```

[它在此处](http://guides.rubyonrails.org/routing.html#overriding-the-new-and-edit-segments)的文档中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:24:04.207

您可以执行以下操作：

```
match '/users/sign_up' => 'users#new', :as => :signup 
```

并与`signup_path`辅助方法建立链接

# c# - 是否可以将 DataContract 作为 MessageContract 的成员？

> ID：11363815
> 
> 赞同：0
> 
> 时间：2012-07-06T14:07:00.793
> 
> 标签：c#, wcf

这可能是一个愚蠢的问题，但这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:08:31.260

是的，它工作得很好。您可以将任何可序列化类型作为数据协定的成员（或`[MessageHeader]`或`[MessageBodyMember]`），并且数据协定可由 WCF 序列化。

# javascript - 在 JavaScript 中创建具有单个预定义选择的随机数组

> ID：11363819
> 
> 赞同：0
> 
> 时间：2012-07-06T14:07:14.823
> 
> 标签：javascript, arrays, random

我正在创建一个程序，它会提出一个问题并给出 5 个答案选择。
一个是预定义的并且是正确的，其他的我想从一组答案中随机选择，整个数组也将被洗牌。

我写了一些东西，但它有一些不一致之处。
一方面，有时预定义的选项会在列表中出现两次（它似乎跳过了我的`if`检查）。另一个是有时，当我运行它时，编辑器会崩溃。
我使用`for in`循环，我担心崩溃是由永无止境的循环引起的。

这是我的代码：

```
private var numberOfComponents:int;
private var maxComponents:int = 5;

//numberOfComponents returns the length property of my 'components' answer bank

componentsSelection = buildComponentSelectionList(0); //0 is the index of my correct answer

function buildComponentSelectionList(correctItemIndex){
    var theArray:Array = new Array();
    var indicesOfSelection:Array = getIndicesByIncluding(correctItemIndex);
    Debug.Log(indicesOfSelection);
    for (var i=0;i<indicesOfSelection.length;i++)
        theArray.Push(components[indicesOfSelection[i]]);
    return theArray;
}
function getIndicesByIncluding(correctItem){
    var indicesArray:Array = new Array();
    var numberOfChoices = maxComponents-1;  
    for(var i=0;i<numberOfChoices;i++){
        var number = Mathf.Round(Random.value*(numberOfComponents-1));
        addToRandomNumberSelection(indicesArray, number,correctItem);
    }   
    indicesArray.Push(correctItem);
    RandomizeArray(indicesArray);                                                                   
    return indicesArray;
}
function addToRandomNumberSelection(indicesArray:Array,number,correctItem){
    if(indicesArray.length == 0){
        indicesArray.Push(number);
    } else {    
        var doesntExist = true;
        for(var i=0;i<indicesArray.length;i++){
            if(indicesArray[i] == correctItem)
                doesntExist = false;
            if (indicesArray[i] == number)
                doesntExist = false;        
        }
        if(doesntExist) {
            indicesArray.Push(number);  
        } else {
            addToRandomNumberSelection(indicesArray, Mathf.Round(Random.value*(numberOfComponents-1)),correctItem);
        } 
    }
}
function RandomizeArray(arr : Array)
{
    for (var i = arr.length - 1; i > 0; i--) {
        var r = Random.Range(0,i);
        var tmp = arr[i];
        arr[i] = arr[r];
        arr[r] = tmp;
    }
} 
```

编辑器是Unity3D，代码是JavaScript的一个版本；我认为我的错误是逻辑错误，而不是句法错误。

我觉得我已经盯着这段代码太久了，我错过了一些明显的东西。
有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:43:34.160

您可以遍历选项并确定应该包含它的概率，然后随机播放包含的选项：

```
function getRandomOptions(allOptions, correctIndex, count){
  var result = [allOptions[correctIndex]];
  count--;
  var left = allOptions.length;
  for (var i = 0; count > 0; i++) {
    if (i != correctIndex && Math.floor(Math.random() * left) < count) {
      result.push(allOptions[i]);
      count--;
    }
    left--;
  }
  shuffleArray(result);
  return result;
}

function shuffleArray(arr) {
  for (var i = arr.length - 1; i > 0; i--) {
    var r = Math.floor(Math.random() * i);
    var tmp = arr[i];
    arr[i] = arr[r];
    arr[r] = tmp;
  }
} 
```

演示：http: [//jsfiddle.net/Guffa/wXsjz/](http://jsfiddle.net/Guffa/wXsjz/)

# android - admob 横幅错误

> ID：11363820
> 
> 赞同：0
> 
> 时间：2012-07-06T14:07:15.543
> 
> 标签：android

我试图在我的应用程序中添加一个 admob 横幅，但我在 android 清单中遇到了问题。下一个代码似乎是问题所在：

```
<activity android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

没有标志 screenSize 和 minimumScreenSize 的 configChanges 在代码中没有给我任何错误，但是横幅所在的位置我收到了缺少 configChanges 的消息。使用这些标志我收到错误：不允许字符串类型。所以看起来清单没有识别这个标志。

这是我的安卓清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.company"
      android:versionCode="1" android:versionName="1.0">
<application android:icon="@drawable/icon" android:label="@string/app_name"
           android:debuggable="true">
<activity android:label="@string/app_name" android:name="BannerExample">
  <intent-filter>
    <action android:name="android.intent.action.MAIN"/>
    <category android:name="android.intent.category.LAUNCHER"/>
  </intent-filter>
</activity>
<activity android:name="com.google.ads.AdActivity"
           android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>

</application>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
</manifest> 
```

我希望有一个解决方案。

# android - 在 webview 中显示 xml、css 页面

> ID：11363821
> 
> 赞同：2
> 
> 时间：2012-07-06T14:07:15.597
> 
> 标签：android, xml, webview

我有一个 webview，我正在尝试在其中加载一个 xml 或 css 文件 - 例如这个： [http ://www.w3schools.com/xml/cd_catalog.xml](http://www.w3schools.com/xml/cd_catalog.xml)

现在 xml 以一种非常“丑陋的方式”显示 - 所有值都被连接在一个填充屏幕的单个字符串中（不幸的是我还不能发布屏幕截图，但只是在 webview 中加载链接，没什么花哨的）。

**有什么方法可以像在浏览器中一样以格式良好的方式显示 xml（与 css 相同）？**

# c++ - C ++中的编译时条件成员函数调用

> ID：11363822
> 
> 赞同：1
> 
> 时间：2012-07-06T14:07:21.250
> 
> 标签：c++, templates, c++11

我有一个模板类，它的某些成员函数只有在模板参数满足某些条件时才有意义。使用，例如，`std::enable_if<>`我可以只为这些情况定义它们，但我怎样才能有条件地调用它们呢？这是一个简单的例子

```
template<class T> class A
{
   typename std::enable_if<std::is_floating_point<T>::value>::type a_member();
   void another_member()
   {
     a_member(); // how to restrict this to allowed cases only?
   }
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T14:19:36.110

首先，您不能像那样使用 SFINAE - 模板类型参数需要在函数上，而不是在类上。

完整的解决方案如下所示：

```
template<class T> class A
{
private:
   template <class S>
   typename std::enable_if<std::is_floating_point<S>::value>::type a_member() {
       std::cout << "Doing something";
   }

   template <class S>
   typename std::enable_if<!std::is_floating_point<S>::value>::type a_member() {
       //doing nothing
   }

public:
   void another_member()
   {
     a_member<T>();
   }
};

int main() {
    A<int> AInt;
    AInt.another_member();//doesn't print anything

    A<float> AFloat;
    AFloat.another_member();//prints "Doing something"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T14:23:16.477

# 警告：这是一个完整的、可怕的 hack，我没有尝试过它可能永远不会奏效。

尝试将其添加到类声明中：

```
typename std::enable_if<std::is_floating_point<T>, int*>::type a_enabled_p() { return 0;};
void another()
{
  if((a_enabled_p()+1)==1)
  {
    //Not enabled
  }
  else if((a_enabled_p()+1)==sizeof(int))
  {
    //Is enabled
  }
} 
```

这就是为什么这种恐怖可能会起作用的原因。如果它们是浮点数，则谓词的返回值为`int*`. 如果是，则没有 typedef，并且默认为`int`（我希望）。当您将 1 添加到 时`int*`，您实际上是在添加`sizeof(int)`。将 1 添加到 int 会增加 1。这意味着通过检查加一的值，我们知道。

注意：不要使用这个。想出来很有趣，但上面的答案是很多，很多

# 很多

更好的。不要使用这个。请。

# sql - 如何抑制来自多个存储过程的结果

> ID：11363832
> 
> 赞同：2
> 
> 时间：2012-07-06T14:08:08.210
> 
> 标签：sql, sql-server-2008, suppress

我有一个存储过程 sp_1，它调用另一个存储过程 sp_1_1。

[我知道如何使用这个技巧](https://stackoverflow.com/q/571670/67249)来抑制 sp_1_1 的结果。

真正的问题是 sp_1_1 本身也调用了另一个存储过程 sp_1_1_1，它也将其结果返回给 sp_1_1！

我可能不会更改 sp_1_1 或 sp_1_1_1，只能更改 sp_1。

返回到 sp_1 的结果是 2 个记录集，第一个来自 sp_1_1，第二个来自 sp_1_1_1。

**概括：**

sp_1（需要抑制从下面返回的两个记录集）

+---- sp_1_1 （返回自己的结果，然后从下面的结果）

+----------sp_1_1_1（返回结果）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:25:11.570

首先，顺便说一句，SQL Server“Denali”为您提供了处理结果集的新选项。

在这种情况下，因为你在嵌套你显然不能使用插入/执行技巧。

一个笨拙的解决方法，如果你不想重构太多，是使用默认值向 proc 添加一个参数，比如@SuppressResults bit = false。

然后，在需要嵌套的例程中，使用@SuppressResult=True 显式调用它，然后在@SuppressResults=True 时更改例程中的代码以不选择结果。

重要的是提供一个默认值并将参数放在最后。这将防止需要更改代码库中其他地方对例程的现有调用。

# css - 使用 Bootstrap 的网格，有没有办法在不创建新行的情况下垂直对齐？

> ID：11363833
> 
> 赞同：2
> 
> 时间：2012-07-06T14:08:11.780
> 
> 标签：css, grid, twitter-bootstrap, vertical-alignment

假设我有以下 HTML（嗯，haml，但是......）：

```
.container
  .row
    .span4
      %h1
      %p
      %img
    .span4
      %h1
      %p
      %img
    .span4
      %h1
      %p
      %img 
```

因此，每一列都有一个标题、一些文本和一个图像。有没有办法让图像垂直对齐，就好像它们是这样完成的：

```
.container
  .row
    .span4
      %h1
      %p
    .span4
      %h1
      %p
    .span4
      %h1
      %p
  .row
    .span4
      %img
    .span4
      %img
    .span4
      %img 
```

但没有创建新行？原因是，我希望图像与标题和文本分组，以便在移动/平板电脑布局上，图像与它们匹配的内容一起布置，而在第二种情况下，你会得到三个文本组，然后是三个图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T20:38:41.310

我可以想到两种方法：

无论如何，`img-outer`在某些情况下可能不需要。

```
<div class="container">
    <div class="row">
        <div class="span4">
            <h1></h1>
            <p></p>
            <div class="img-outer"><img src="" /></div>
        </div>
        <!-- ... -->
    </div>
</div> 
```

### 高度*控制*

如果您为文本元素及以上**设置固定高度** ，那么您的图像将被对齐。`h1``p`

您还可以为**设置固定高度`.span`**并使用绝对定位。这个如下图所示：

```
.container .row [class*="span"] {
    height: 100px;
    padding-bottom: 150px;
    position: relative;
}
.container .row [class*="span"] .img-outer{
    height: 150px;
    line-height: 150px;
    vertical-align: middle;
    position: absolute;
    bottom: 0;

    /* Take the whole width */
    left: 0;
    right: 0;
} 
```

[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/K3PkD/)

### 其他定位

似乎可行，我没有足够的绝对定位知识来保证结果是跨浏览器的。

```
.container .row {
    padding-bottom: 150px;
    position: relative;
}
.container .row [class*="span"] .img-outer{
    height: 150px;
    line-height: 150px;
    vertical-align: middle;
    position: absolute;
    bottom: 0;

    /* Take the whole width */
    width: 300px; /* .span4 width */
} 
```

[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/K3PkD/3/)

# objective-c - NSXMLParser，值和键的设置

> ID：11363835
> 
> 赞同：1
> 
> 时间：2012-07-06T14:08:29.103
> 
> 标签：objective-c, xcode, nsxmlparser

在遵循教程之后，我查看了值和对应的“键”的设置位置。

```
[aBook setValue:currentElementValue forKey:elementName]; 
```

我的一个问题是这种方法适用于字典，而不是 NSArrays。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:09:45.010

该`setValue:forKey:`方法适用于所有支持[*键值编码*](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html)的东西。它允许您为由字符串标识的属性设置值。在这种特殊情况下，字符串来自解析器已完成处理的 XML 元素的名称，而值来自相应元素的文本。

KVC 技巧允许您使用 XML 解析器来设置对象的值，而无需硬编码对象的属性或方法的名称。例如，如果您有这样的 XML 片段

```
<book>
    <author>Kernighan and Ritchie</author>
    <title>The C Programming Language</title>
</book> 
```

和具有属性的 KVC 兼容`Book`类和，解析器将能够处理 XML 并设置属性的值，而无需了解 XML 的结构或类的结构。`NSString*``author``title``Book`

# firefox - 如何将 chrome 书签从 windows 导入 ubuntu 浏览器（mozila）

> ID：11363839
> 
> 赞同：0
> 
> 时间：2012-07-06T14:08:44.860
> 
> 标签：firefox, google-chrome, bookmarks, ubuntu-12.04

过去 5 年我是 Windows 用户，但想切换到 Ubuntu World。在使用 Windows 时，我将太多（大约 100 个）书签保存到 chrome 中。现在我想将这些书签导入 Ubuntu 浏览器 (Firefox)。你能帮我找出问题所在吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:16:17.897

你有gmail账号吗？如果你有一个，你可以在两个系统中登录 chrome 的偏好。然后书签将自动同步。

# css - 您如何将图像浮动到另一个图像的旁边？

> ID：11363844
> 
> 赞同：1
> 
> 时间：2012-07-06T14:09:03.083
> 
> 标签：css, html, css-float

嘿伙计们，我希望我的两个#previews 并排浮动。我试过添加 float:left 但它不起作用。此刻，他们只是坐在彼此之上。我所有的代码都在下面，谢谢你的帮助。

```
<!DOCTYPE html>

<html lang="en">

<head>

<meta charset="utf-8">

<title>Juicy Designs</title>

<meta name="description" content="Juicy Designs">  

<meta name="author" content="Juicy Designs">

<link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>

<!--[if lt IE 9]>  

<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>  

<![endif]--> 

<style>

body {
background: #F4F4F4;
font-family: 'Lobster', cursive;
}
#logo {
background: url(logo.png);
width: 300px;
height: 75px;
margin: 70px 200px;
}
#container {
width: 1300px;
}
h2 {
text-align: center;
font-size: 29px;
color: #444;
}
p {
text-align: center;
font-size: 22px;
color: #444;
}
.line {
background: url(line.png);
width: 972px;
height: 1px;
margin: 0 auto;
}
#previews {
border: 5px solid #FFF;
width: 300px;
margin: 50px 200px;
}
</style>

</head>

<body>

<div id="logo"></div>

<div id="container">

<div class="line"></div>

<h2>Simple, clean & modern designs</h2>

<p>We create simple, clean and modern designs!</p>

<div class="line"></div>

<div id="previews"><img src="preview.jpg" /></div>

<div id="previews"><img src="preview.jpg" /></div>

</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:11:23.787

将它们都浮动到左侧，它将起作用。您还需要清除它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T14:12:18.520

一些事情： a) DIV 是块级的。您需要将它们定义为 display:inline; 浮动工作。b）您应该使用类而不是 ID。ID 应该只在页面上出现一次。类可以根据需要多次出现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T14:13:06.630

就这样：

```
<div id="previews">
    <img src="preview.jpg" style="float:left;" />
    <img src="preview.jpg" style="float:left;" />
</div> 
```

你也可以使用这个：

```
#previews img { 
    float:left;
} 

<div id="previews">
    <img src="preview.jpg" />
    <img src="preview.jpg" />
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T14:14:10.157

```
<html lang="en"><head>

<meta charset="utf-8">

<title>Juicy Designs</title>

<meta name="description" content="Juicy Designs">  

<meta name="author" content="Juicy Designs">

<link href="http://fonts.googleapis.com/css?family=Lobster" rel="stylesheet" type="text/css">

<!--[if lt IE 9]>  

<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>  

<![endif]--> 

<style>body {background: #F4F4F4;font-family: 'Lobster', cursive;}#logo {background: url(logo.png);width: 300px;height: 75px;margin: 70px 200px;}#container {width: 1300px;}h2 {text-align: center;font-size: 29px;color: #444;}p {text-align: center;font-size: 22px;color: #444;}.line {background: url(line.png);width: 972px;height: 1px;margin: 0 auto;}#previews {border: 5px solid #FFF;width: 300px;display:inline-block; vertical-align:top; margin:50px 100px;}</style>

</head>

<body>

<div id="logo"></div>

<div id="container">

<div class="line"></div>

<h2>Simple, clean &amp; modern designs</h2>

<p>We create simple, clean and modern designs!</p>

<div class="line"></div>

<div id="previews"><img src="preview.jpg"></div>

<div id="previews"><img src="preview.jpg"></div>

</div>

</body></html> 
```

您只需`display:inline-block; vertical-align:top;`在 CSS 下添加`#previews`. 您还需要减少`horizontal margin`使用的数量，`#previews`因为容器的宽度只有 1300 像素。

# sql - 计算列中的表达式

> ID：11363848
> 
> 赞同：1
> 
> 时间：2012-07-06T14:09:07.840
> 
> 标签：sql, sql-server, sql-server-2008, tsql, calculated-columns

我有一张桌子：

```
Col1
Col2
Total (computed column) 
```

所有都是**十进制（10,1）**类型。

我希望 Total 的值是 Col1 * Col2 的结果，但如果 Col1 的值小于 1.00，我只想将其视为 1.00。

例子：

```
Col1  Col2    Total
 -------------------
 4      2       8
 1      2       2 
 0.5    7000    7000 (here, total should not be 3500) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T14:11:29.283

```
ALTER TABLE dbo.tablename ADD Total
  AS CONVERT(DECIMAL(10,1),
    (Col2 * CASE WHEN Col1 < 1 THEN 1.0 ELSE Col1 END)); 
```

# .net - 通过注释 URL 解析文档时，Notes 会话返回 NotesView 而不是 NotesDocument

> ID：11363860
> 
> 赞同：1
> 
> 时间：2012-07-06T14:09:50.610
> 
> 标签：.net, lotus-notes

我正在使用 Domino .NET 包装类来允许用户将电子邮件从他们的 Lotus 收件箱拖到 winform。

我正在获取一个数据对象，其中包含文档的注释 URL，格式为

```
notes://server/replicaID/viewID/documentUNID 
```

并将其传递给应该返回匹配文档的 Domino.NotesSession.Resolve(pUrl)。实际上，在我的浏览器中粘贴链接（用 http:// 替换 notes:// 就像一个魅力，我得到了电子邮件的 HTML 版本）工作。

但是 Resolve 方法继续返回似乎是 NotesView 的内容，而不是实际的文档：

```
Dim notesSession as Domino.NotesSession = ' ...  Initialize session here
Dim notesURL as string = "notes://server/replicaID/viewId/documentID"

Dim draggedDocument = notesSession.Resolve(notesURL)
' Here, I do get an actual document, but its UnID matches the viewId 
' part of the url, not the document. 
```

我尝试从 URL 中删除 viewID，但没有成功。我发现成功检索文档的唯一方法是使用 OLE 对象（莲花命名空间）：

```
' Get UnId from url
Dim unid as String = notesURL.Split("/").Last()

' Get UI Automation object
Dim workspace = CreateObject("Notes.NotesUIWorkspace")
' Get currently open DB (the where the drag event was initiated)
Dim notesDb = workspace.CURRENTDATABASE.Database
' Retrieve matching document
Dim notesDoc = notesDb.GetDocumentByUNID(unid) 
```

虽然这种方法有效，但我不想使用 UI 自动化类 (OLE)，而是使用 Domino 的 COM 包装器 (.NET)。

那么这些笔记 URL 究竟是如何在互操作中工作的呢？有没有什么方法可以在不知道数据库的情况下检索匹配的文档？为什么在给定文档 URL 时 Resolve 方法会返回视图对象？

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:03:25.527

听起来您正在处理 Resolve 方法中的错误。但是您的第二个想法似乎是一个合理的解决方法。不过，我认为没有必要打电话给`CreateObject`。包装类应该可以正常工作。

您在第一个代码示例（Domino.NotesSession 对象）中有 NotesSession，因此您应该能够在其上调用 Resolve 方法，以根据您拥有的 NotesUrl 检索数据库对象。您不一定需要获取视图，只需获取数据库对象即可。然后，您可以从该对象调用 GetDocumentByUNID 方法来检索所需的文档。如果 Resolve 方法为您做到这一点会很好，但听起来它让您足够接近。

```
Dim notesSession as Domino.NotesSession =  <Session>
Dim notesURL as string = "notes://server/replicaID"    
Dim notesDocUNID as string = "parse URL to get the UNID"

Dim notesDatabase = notesSession.Resolve(notesURL)
Dim document = notesDatabase.GetDocumentByUNID(notesDocUNID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T04:33:37.320

Session.resolve 不返回 NotesDocument。它返回一个通用对象（我会说 Base - 所有 Notes 数据对象的基类）。您必须相应地调暗变量，然后检查类型并将其转换为文档

# mysql - 如何组合三个选择查询，每个查询都不包括前一个查询的结果？

> ID：11363861
> 
> 赞同：2
> 
> 时间：2012-07-06T14:10:06.703
> 
> 标签：mysql, sql

假设我有三个不同的选择语句，像这样

```
SELECT 'Final', ID FROM Stage WHERE stageCompleted = 1;
SELECT 'Active', ID FROM Stage WHERE StartDate < NOW();
SELECT 'Inactive', ID FROM Stage; 
```

我想要的是某种组合这些的方法，以便它显示一个表

*   `'Final'`返回第一个查询匹配的所有行的字符串和行 ID
*   `'Active'`返回与第二个查询匹配但不与第一个查询匹配的所有行的字符串和行 ID
*   并返回字符串`'Inactive'`和所有剩余行的 ID。

我研究了各种联接，但它们似乎并不真正适合我要解决的问题。如何在 SQL 中组合三个选择查询，其中每个查询都排除了前一个查询的结果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T14:13:26.193

使用案例陈述

```
SELECT
   CASE WHEN stageCompleted = 1 THEN 'Final'
        WHEN StartDate < NOW() THEN 'Active'
        ELSE 'Inactive'
   END,
   ID
FROM Stage 
```

# javascript - 如何部分防止Default（）？

> ID：11363868
> 
> 赞同：5
> 
> 时间：2012-07-06T14:10:31.787
> 
> 标签：javascript, jquery, google-chrome, preventdefault

里面有`<label>`一个`<a href="#">`元素。我想阻止`<a>`元素的默认行为（即导航），但它*应该*执行`<label>`元素的默认行为（即选中其中的复选框）。

测试用例：http: [//jsfiddle.net/3M6WE/](http://jsfiddle.net/3M6WE/)。单击`foo`可切换复选框。单击`bar`不会导航，但也不会切换复选框。

我怎样才能让`<a>`元素*不*导航但*让它*切换复选框？我想避免像手动切换复选框这样的黑客行为。如果有的话，我正在寻找“部分” `preventDefault`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T14:21:02.343

您可以触发父元素（标签）的点击：

[http://jsfiddle.net/3M6WE/11/](http://jsfiddle.net/3M6WE/11/)

```
$("a").on("click", function(e) {
    e.stopPropagation();
    $(this).parent().click();
    // do stuff...
    e.preventDefault();
}); 
```

然后做一些魔术，最后调用 preventDefault();

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T14:16:41.760

我想你不能阻止这一点：

来自[MDN](https://developer.mozilla.org/en/HTML/Element/label)：

> 嵌套元素中的单击事件
> 
> 从 Gecko 8.0 (Firefox 8.0 / Thunderbird 8.0 / SeaMonkey 2.5) 开始，冒泡点击事件最多触发一次`<label>`，合成点击事件不能触发额外`<label>`的 s。在 Gecko 中，点击事件仍然会冒泡过去`<label>`，而在 WebKit 或 Internet Explorer 中，点击事件将在`<label>`. Gecko 8.0 之前的行为（触发多个`<label>`s）导致 Firefox 停止响应（请参阅[错误 646157](https://bugzilla.mozilla.org/show_bug.cgi?id=646157)）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T14:19:55.583

[http://jsfiddle.net/3M6WE/10/](http://jsfiddle.net/3M6WE/10/)怎么样？通过删除`href='#'`.

# eclipse - 从 svn eclipse 生成显式 .diff 文件

> ID：11363870
> 
> 赞同：2
> 
> 时间：2012-07-06T14:10:34.627
> 
> 标签：eclipse, svn

在 Eclipse Java 编辑器中，在 Eclipse 比较编辑器中打开和打开版本`right click -> Compare With`之间的差异。`Working copy``base revision`

有没有办法将实际的 .diff 作为文件获取，即

```
Index: Something.java
===================================================================
--- Something.java  (revision 10155)
+++ Something.java  (revision 10154)
@@ -227,9 +227,6 @@
 import ...
 import ...
 import ...
-import com...
-import com...
-import com...
+import com.... 
```

从 eclipse 中不使用 shell svn diff 命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:47:53.427

您可以在多个上下文菜单中使用*Create Patch命令，例如选择文件时的**Team*子菜单，或在*Synchronize*透视图中选择更改时。

*就个人而言，我发现在历史*视图中浏览资源历史的最方便的方法是选择 2 个不同的修订版，然后从选择的上下文菜单中调用命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T12:16:38.917

没有意识到。非常简单！

```
Java Editor -> Right click -> Team -> Create Patch 
```

# c# - 如何从 C# 程序在 Ubuntu 机器上创建用户？

> ID：11363871
> 
> 赞同：-2
> 
> 时间：2012-07-06T14:10:47.277
> 
> 标签：c#

我从来没有接触过网络，我有一个任务：在虚拟机器上我有一个 Ubuntu 在真正的机器上我有一个 Windows；我需要在 Windows 中编写一个程序，即在 Ubuntu 中创建一个用户。网络连接已建立，机器正在 ping。我尝试使用 NFS（Netwerk 文件系统），但我对此一无所知...请帮助，将我推到右侧。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:14:28.610

*   为 windows安装[gnu 工具](http://gnuwin32.sourceforge.net/)。
*   编写脚本以使用 ssh 在远程计算机上[创建用户](http://www.cyberciti.biz/faq/howto-add-new-linux-user-account/)
*   从 C# 程序调用脚本作为[Process](http://msdn.microsoft.com/en-us/library/0w4h05yb.aspx)。

请参阅[在远程机器上执行多个命令](https://stackoverflow.com/questions/9817950/execute-multiple-commands-on-remote-machine)

# android - simpledialog2 自动关闭

> ID：11363877
> 
> 赞同：0
> 
> 时间：2012-07-06T14:11:04.917
> 
> 标签：android, jquery-mobile, cordova

Android, Phonegap, Jquery Mobile

当我打开 simpledialog 它显示并销毁时，**在浏览器中调试时不会发生**，但在手机上启动应用程序时会发生。有趣的是，它并非一直都在发生，但是当它开始发生时，每次打开这个简单对话框时都会发生。您唯一能做的就是重新启动应用程序来修复它。据我所知，在对话框显示它会自动触发按钮事件，从而关闭对话框。也许它与问题无关，但是当对话框关闭时，它会触发两次关闭事件并且我得到 js 错误：`Uncaught TypeError: Cannot call method 'destroy' of undefined` 有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:44:23.410

我有一个类似的问题。显然，该对话框不再在页面上，因为根据该错误消息它是未定义的。当我的对话框需要关闭时，我添加了这个简单的检查，以检查它是否仍在页面上：

```
function close_simple_dialog() {
  if(typeof $.mobile.sdCurrentDialog !== "undefined"){
    $.mobile.sdCurrentDialog.close();
  }
}); 
```

# c++ - ADO 连接 CreateInstance 在 Windows Server 2003 上失败

> ID：11363878
> 
> 赞同：1
> 
> 时间：2012-07-06T14:11:13.380
> 
> 标签：c++, ado

我有一个在 Windows 7 上运行良好但在 Server 2003 上失败的应用程序。失败的行是下面的第三行

```
_ConnectionPtr pConnection = NULL;
::CoInitialize(NULL);
HRESULT hr = pConnection.CreateInstance(__uuidof(Connection)); 
```

返回的 HRESULT 为 0x80004002（不支持接口）。两台机器都安装了 MDAC，我不明白为什么会出现这个错误。这可能发生的任何原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:14:47.367

这可能会有所帮助...

[在运行 Windows 7 SP 1 或 Windows Server 2008 R2 SP 1 或安装了 KB983246 的计算机上重新编译 ADO 应用程序后，它无法在下层操作系统上运行](http://support.microsoft.com/kb/2517589)

# python - BeautifulSoup粗体标签失败

> ID：11363885
> 
> 赞同：1
> 
> 时间：2012-07-06T14:11:32.567
> 
> 标签：python, html, beautifulsoup

我有一个包含以下内容的 html：

```
<b>
<p align="left">TXT1</p>
</b>
<p align="left">
<b>NR1</b> 
<b>TXT2</b>
TXT3 
<b>TXT4</b>
TXT5
</p> 
```

当我做：

```
from BeautifulSoup import BeautifulSoup
html = urllib.urlopen('url')
htmlr = html.read()
soup = BeautifulSoup(htmlr)

print soup 
```

我得到不同的东西：

```
<p align="left">TXT1</p>
<p align="left">NR1 <b>TXT2</b> TXT3 <b>TXT4</b>
TXT5</p> 
```

我正在分析 html 文档布局，因此丢失标签非常令人沮丧。为什么会发生这种情况以及阻止它的最佳方法是什么？帮助很大！

编辑：我需要处理格式错误的 html 文档以进行信息提取。如果他们的创建者希望将某些文本呈现为粗体，我必须考虑到这一点，即使该人创建了无效的 html。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T14:13:31.350

HTML 无效。你不能有一个`<p>`内部 a `<b>`。BeautifulSoup 正在尝试执行错误恢复（浏览器也是如此）。

阻止它的最佳方法是[修复 HTML](http://validator.w3.org)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T14:44:57.623

HTML Tidy 似乎可以正确修复无效的 HTML。他们在这里有一个网络实现：http: [//infohound.net/tidy/](http://infohound.net/tidy/)

我进入了：

```
<b><p>hello world</p></b> 
```

并得到了这个结果：

```
<p><b>hello world</b></p> 
```

这里似乎有一个python版本： [http ://www.egenix.com/products/python/mxExperimental/mxTidy/](http://www.egenix.com/products/python/mxExperimental/mxTidy/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T14:32:23.210

您可以尝试[html5lib](http://code.google.com/p/html5lib/)而不是 BeautifulSoup。Html5lib 实现了 HTML5 解析器算法，因此它应该产生与现代浏览器相同的 DOM。

免责声明：我自己没有尝试过 html5lib 解析器，所以我不知道它的当前稳定性级别。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-06T14:20:03.243

与昆汀建议的相同。

如果您希望`<p>`元素为粗体，请使用内联 CSS 而不是`<b>`标签。

```
<p style='font-weight:bold;' align="left">TXT1</p>
<p align="left">
<b>NR1</b> 
<b>TXT2</b>
TXT3 
<b>TXT4</b>
TXT5
</p> 
```

# ios - iOS 笔尖问题，导致崩溃

> ID：11363890
> 
> 赞同：0
> 
> 时间：2012-07-06T14:11:42.543
> 
> 标签：ios, xcode, nib

我的应用程序中有一个相当奇怪的错误

它只是在它好了这么久之后才开始发生，我所有的笔尖都从我所看到的情况下正确连接

任何其他建议将不胜感激

错误如下

2012-07-06 15:07:22.761 xxxxx[681:f803] *** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类与键 MyTableView 的键值编码不兼容。*** First throw call stack: (0x1907022 0x1b64cd6 0x1906ee1 0x11df022 0x1150f6b 0x1150edb 0x116bd50 0xa5371a 0x1908dea 0x18727f1 0xa5226e 0xa53eb7 0x830ce1 0x830ff8 0x83017f 0x83f183 0x83fc38 0x833634 0x1f4cef5 0x18db195 0x183fff2 0x183e8da 0x183dd84 0x183dc9b 0x82fc65 0x831626 0xe544 0x2255) terminate called throwing an exception

如果我能做些什么来提供额外的，请告诉我

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:14:02.753

这意味着您在 xib 中的某处定义了一个名为“MyTableView”的出口，并且没有该名称的属性。

检查你所有的网点！

# asp.net - 共享点设计师 2007

> ID：11363893
> 
> 赞同：0
> 
> 时间：2012-07-06T14:12:08.127
> 
> 标签：asp.net, sharepoint, web, web-parts, sharepoint-designer

我不是使用 Sharepoint Designer 2007 的专家，那么我需要一些帮助来维护网站。

我有一个页面，需要添加一个网站内已经存在的 .aspx。当我单击添加 WebPart 时，有一些 WebParts 可供选择，但我需要的 aspx 看起来在 Webpart 内。有些像这样：

我有一个菜单'Recruiting'，它包含一些像'New Jobs.aspx'这样的aspx，另一个是'New employees.aspx'。我需要在页面“新员工.aspx”中添加页面“新工作.aspx”作为示例。但是当我点击添加 webpart 时，似乎没有选择这个 aspx。

我怎样才能做到这一点？

谢谢，很抱歉英语不好，对 Sharepoint 的了解也很糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:29:30.233

您不能将一个页面作为 Web 部件添加到另一个页面，这没有任何意义。您可以做的是找出您尝试添加的页面上的 Web 部件（可以是列表视图 Web 部件）。然后，您可以将相同的 Web 部件添加到第一页。

# html - css 凸版火狐不工作

> ID：11363898
> 
> 赞同：0
> 
> 时间：2012-07-06T14:12:19.590
> 
> 标签：html, css, frontend

我用我自己的字体有这种凸版效果，它在 Chrome 和 Safari 上完美运行。

```
.letterpress {
    text-align: center;
    font: 95px peskeu;
    background-color: #666666;
    -webkit-background-clip: text;
    -moz-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 0px 2px 4px rgba(255,255,255,0.65);
} 
```

我最近看到这`-moz-background-clip:text;`不起作用。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:15:34.990

看看这个关于堆栈溢出的问题。提到的答案是好的和解释性的，因为 webkit 对此有自己的支持，所以最好为此获得一个 hack。下面的链接提供了一个。 [-moz-background-clip：Mozilla 中的 *text*](https://stackoverflow.com/questions/5466650/moz-background-clip-text-in-mozilla)

# reporting-services - 组周围的 SSRS 边框在页面末尾失败

> ID：11363900
> 
> 赞同：2
> 
> 时间：2012-07-06T14:12:30.707
> 
> 标签：reporting-services, ssrs-2008, ssrs-grouping

我想在每个整个组周围设置一个边框。我在网上找到了一种表达方式来帮助解决这个问题，但它有一个缺陷。当组扩展到新页面时，最后一项的下边框和下一页上第一项的上边框不会出现。

上边框代码

```
=Iif(Fields!ROWNUM.Value = First(Fields!ROWNUM.Value, "EVENT"),"Solid",nothing) 
```

底部边框的代码。

```
=Iif(Fields!ROWNUM.Value = Last(Fields!ROWNUM.Value, "EVENT"),"Solid",nothing) 
```

基于这个表达式的逻辑，我可以完全理解它为什么会这样，但我想知道是否有任何方法可以解决这个问题。不幸的是，在组的实例之间插入分页符不是一种选择，其中一些组很大并且会使页面几乎完全空白。我相信您不能在页眉/页脚之外使用全局变量页码。是否有一个“分页符”变量可以用来在分页符之前或之后说？

任何想法都会很棒！谢谢

# vbscript - VBscript Robocopy 语法

> ID：11363903
> 
> 赞同：0
> 
> 时间：2012-07-06T14:12:35.717
> 
> 标签：vbscript, robocopy

我对我认为 VBscript 中关于运行 robocopy 的语法错误有疑问。

以下是我现在用来尝试运行 robocopy 的代码片段：

```
Dim Command2

sLocalDestinationPath = "C:\Script\files\outzips\"
sFinalDestinationPath = "C:\CopyTestFolder\"

Command2 = "Robocopy.exe " & sLocalDestinationPath & " " & sFinalDestinationPath 
```

问题是该命令不会产生任何错误，但它也不会将任何文件从本地路径复制到最终路径。从命令行执行时，它运行得非常好。任何帮助将不胜感激，因为这个简单的命令使我无法完成此脚本的其余部分。

我也让它回显命令，并且命令与我在命令行中输入的完全匹配。

谢谢，如果您需要更多解释，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:50:34.797

您没有说您是如何尝试“运行”的`Robocopy`，但我认为它是 via `WScript.Shell.Run()`。

我碰巧没有`Robocopy`方便，但我确实使用 Windows 编写了一个示例`XCopy`。也许您可以调整我的简单`XCopy`示例，以更深入地了解您的问题`Robocopy`。

```
Option Explicit

' XCOPY doesn't Like trailing slashes in folder names
Const sLocalDestinationPath = "C:\Script\files\outzips"
Const sFinalDestinationPath = "C:\CopyTestFolder"

Dim Command2 : Command2 = _
    "XCOPY" _
    & " " & sLocalDestinationPath _
    & " " & sFinalDestinationPath _
    & " /E /I /Y" _
    & ""

Dim oSh : Set oSh = CreateObject("WScript.Shell")

WScript.Echo "Cmd: [" & Command2 & "]"

On Error Resume Next
Dim nRetVal : nRetval = oSh.Run(Command2, 0, True)

If Err Then
    WScript.Echo "An exception occurred:" _
           & vbNewLine & "Number: [" & Hex(Err.Number) & "]" _
           & vbNewLine & "Description: [" & Err.Description & "]" _
           & ""
Else
    If nRetVal Then
         WScript.Echo "Copy error: [" & nRetVal & "]"
    Else
         WScript.Echo "Copy succeeded."
    End If
End If

Set oSh = Nothing

' XCOPY options:
'
' /E    Copies directories and subdirectories, including empty ones.
'       Same as /S /E. May be used to modify /T.
'
' /I    If destination does not exist and copying more than one file,
'       assumes that destination must be a directory.
'
' /Y    Suppresses prompting to confirm you want to overwrite an
'       existing destination file.

' End 
```

# html - 在 VB.net 中解析 HTML

> ID：11363904
> 
> 赞同：-1
> 
> 时间：2012-07-06T14:12:36.550
> 
> 标签：html, vb.net, parsing

我想知道如何使用 VB.net 解析网站。基本上页面中有一个表，我需要使用其中的内容更新数据库。所以我需要能够捕获其中的任何内容，然后获取所有列和行并将它们放入数据表对象中。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:15:28.000

从使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)开始。如果遇到问题，请尝试解析并返回具体问题。

您不必将其保存到文件中，您可以在内存中获取它：

```
HtmlAgilityPack.HtmlWeb w = new HtmlAgilityPack.HtmlWeb();
var doc = w.Load("http://www.microsoft.com/en-us/default.aspx");
textBox1.Text = doc.DocumentNode.OuterHtml; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:30:16.237

这些窗口中的每一个都可以包含一个 HTML 文档。

指定如何将屏幕划分为框架的文件称为框架集。

如果您想创建一个使用框架的主页，您应该： 使用框架集制作 HTML 文档

制作应该加载到每个框架中的普通 HTML 文档。

加载框架集页面时，浏览器会自动加载与框架关联的每个页面。

# asp.net-mvc-3 - 单击 PartialView 中的按钮后重新加载主视图

> ID：11363909
> 
> 赞同：0
> 
> 时间：2012-07-06T14:12:59.360
> 
> 标签：asp.net-mvc-3, razor, mef, partialviews

我有一个部分视图，用户可以在其中执行搜索，搜索结果显示在选择框中。在我的主视图中，我有一个部分应该在按下选择按钮后显示搜索结果。现在，当我单击选择按钮时，会将正确的信息加载到我的主视图的正确模型中，但主视图不会改变。当我单击刷新时，页面会正确更新。在插件视图中单击按钮时如何使页面自动更新？

我在主应用程序的主视图 ( `Index.vbhtml`) 中的部分：

```
@Section CUInfo

 Credit Union Name: @Model.CUInfo.CUName

 end section 
```

这是我的插件中的控制器方法：

```
Function ChangeCUInfo(strCUName As String) As ActionResult
        m_hostApp.CUInfo.CUName = strCUName
        m_hostApp.blnPluginRefreshButtonPressed = True
        Return View("Index", m_hostApp)
    End Function 
```

我尝试在 hostApp 对象中设置一个布尔值，然后在我的主剃须刀视图中调用此函数，如果它是真的：

```
@code
     If Model.blnPluginRefreshButtonPressed = True Then

         @<script type="text/javascript">
              $(function () {
                  window.location.reload();
              });
         </script>

      End If

      Model.blnPluginRefreshButtonPressed = False
End Code 
```

**编辑：**

单击选择按钮时调用的 JS 函数：

```
function loadCU(CUInfo) {
           strCU = CUInfo.split('|');
           strCUName = strCU[0];         
           $.ajax({
           type: "POST",
           url: "/CUContractNumberPlugin/ChangeCUInfo",
           data: { "strCUName": strCUName }
       });
       } 
```

插件视图中使用的表单：

```
@Using (Html.BeginForm("ChangeCUInfo", "CUContractNumberPlugin"))
                 @<div id="LogoSigSearch" style="height:300px;width:500px;position:relative;">

    <span style="display:inline-block;height:20px;width:166px;position:absolute;top:35px;left:5px;">Credit Union Name</span>

    <br />
     @Html.TextBox("strCUName")
    <input type="submit" name="LogoSigSearch$ctl02" value="Search" id="LogoSigSearch_ctl02" tabindex="3" style="width:60px;position:absolute;top:5px;left:352px;" />

    <input name="LogoSigSearch$ctl05" type="button" onclick="javascript:clearSearch()" value="Clear" style="position:absolute;top:35px;left:352px;width:60px;" />

    <select size="4" name="LogoSigSearch$ctl06" id="LogoSigSearch_ctl06" tabindex="5" style="height:230px;width:342px;position:absolute;top:65px;left:5px;"></select>

    <input type="button" name="SelectCU" value="Select" onclick="javascript:loadCU(LogoSigSearch_ctl06.options[LogoSigSearch_ctl06.selectedIndex].value)"  tabindex="4" style="width:60px;position:absolute;top:65px;left:352px;" />
        </div>
    End Using 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:01:41.487

两个按钮都是表单的一部分吗？如果您没有将按钮附加到脚本或使其成为具有关联操作的表单的一部分，则按钮不会调用操作。

使用局部视图来呈现查询结果，即使在主页加载时也是如此。这简化了您的开发。

添加一个 jQuery 事件处理程序 ( [jQuery.on()](http://api.jquery.com/on/ "jQuery.on()") ) 来监视主页上的按钮单击，或者如果按钮在局部视图中返回，只需在局部视图中使用准备就绪处理程序并附加一个 button.click( ) 事件，再次使用 jQuery。

jQuery 事件处理程序可以处理提交查询的值、发布到您的控制器以及显示结果。我在[这里](http://jameschambers.com/articles)有一些较旧的文章，但它们仍然与您的问题相关，并展示了提交数据和获取部分数据。

您的客户端代码最终将如下所示：

```
 $("#your-button").click(function () {
    var fetchUrl = '@Url.Action("ActionName", "Controller")';

    $.post(fetchUrl, { searchParams: $("#your-search-box").val() })
        .success(function (data) {
          // replace the contents of the DIV with the results. 'data' 
          // here has whatever you sent back from your partial view
        })
        .error(function (data) { 
          // handle the error, use a DIV with some kind of alert message etc
        });

}); 
```

希望这会有所帮助。

# silverlight - 如何将验证样式添加到我的所有自定义控件并且仍然是 DRY？

> ID：11363910
> 
> 赞同：2
> 
> 时间：2012-07-06T14:12:59.283
> 
> 标签：silverlight, validation, templates, xaml, custom-controls

我目前正在 Silverlight 中构建一些自定义控件。我希望这些控件能够响应验证错误。我想做的是让我的控件周围有红色边框，就像默认的 Silverlight 控件一样。

我的理解是我需要将它添加到我的模板中：

```
<VisualStateManager.VisualStateGroups>
  <VisualStateGroup x:Name="ValidationStates">
    <VisualState x:Name="Valid"/>
    <VisualState x:Name="InvalidUnfocused">
      <Storyboard>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement" Storyboard.TargetProperty="Visibility">
          <DiscreteObjectKeyFrame KeyTime="0">
            <DiscreteObjectKeyFrame.Value>
              <Visibility>Visible</Visibility>
            </DiscreteObjectKeyFrame.Value>
          </DiscreteObjectKeyFrame>
        </ObjectAnimationUsingKeyFrames>
      </Storyboard>
    </VisualState>
    <VisualState x:Name="InvalidFocused">
      <Storyboard>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement" Storyboard.TargetProperty="Visibility">
          <DiscreteObjectKeyFrame KeyTime="0">
            <DiscreteObjectKeyFrame.Value>
              <Visibility>Visible</Visibility>
            </DiscreteObjectKeyFrame.Value>
          </DiscreteObjectKeyFrame>
        </ObjectAnimationUsingKeyFrames>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip" Storyboard.TargetProperty="IsOpen">
          <DiscreteObjectKeyFrame KeyTime="0">
            <DiscreteObjectKeyFrame.Value>
              <sys:Boolean>True</sys:Boolean>
            </DiscreteObjectKeyFrame.Value>
          </DiscreteObjectKeyFrame>
        </ObjectAnimationUsingKeyFrames>
      </Storyboard>
    </VisualState>
  </VisualStateGroup>
</VisualStateManager.VisualStateGroups> 
```

```
<Border x:Name="ValidationErrorElement" BorderThickness="1" CornerRadius="1" BorderBrush="#FFDB000C" Visibility="Collapsed">
  <ToolTipService.ToolTip>
    <ToolTip x:Name="validationTooltip" Template="{StaticResource ValidationToolTipTemplate}" Placement="Right"
              PlacementTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}"
              DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}">
      <ToolTip.Triggers>
        <EventTrigger RoutedEvent="Canvas.Loaded">
          <EventTrigger.Actions>
            <BeginStoryboard>
              <Storyboard>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip" Storyboard.TargetProperty="IsHitTestVisible">
                  <DiscreteObjectKeyFrame KeyTime="0">
                    <DiscreteObjectKeyFrame.Value>
                      <sys:Boolean>true</sys:Boolean>
                    </DiscreteObjectKeyFrame.Value>
                  </DiscreteObjectKeyFrame>
                </ObjectAnimationUsingKeyFrames>
              </Storyboard>
            </BeginStoryboard>
          </EventTrigger.Actions>
        </EventTrigger>
      </ToolTip.Triggers>
    </ToolTip>
  </ToolTipService.ToolTip>
  <Grid Width="12" Height="12" HorizontalAlignment="Right" Margin="1,-4,-4,0" VerticalAlignment="Top" Background="Transparent">
    <Path Margin="1,3,0,0" Data="M 1,0 L6,0 A 2,2 90 0 1 8,2 L8,7 z" Fill="#FFDC000C"/>
    <Path Margin="1,3,0,0" Data="M 0,0 L2,0 L 8,6 L8,8" Fill="#ffffff"/>
  </Grid>
</Border> 
```

和

```
<ControlTemplate x:Key="ValidationToolTipTemplate">
  <Grid x:Name="Root" Margin="5,0" RenderTransformOrigin="0,0" Opacity="0">
    <Grid.RenderTransform>
      <TranslateTransform x:Name="xform" X="-25"/>
    </Grid.RenderTransform>
    <VisualStateManager.VisualStateGroups>
      <VisualStateGroup Name="OpenStates">
        <VisualStateGroup.Transitions>
          <VisualTransition GeneratedDuration="0"/>
          <VisualTransition To="Open" GeneratedDuration="0:0:0.2">
            <Storyboard>
              <DoubleAnimation Storyboard.TargetName="xform" Storyboard.TargetProperty="X" To="0" Duration="0:0:0.2">
                <DoubleAnimation.EasingFunction>
                  <BackEase Amplitude=".3" EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
              </DoubleAnimation>
              <DoubleAnimation Storyboard.TargetName="Root" Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.2"/>
            </Storyboard>
          </VisualTransition>
        </VisualStateGroup.Transitions>
        <VisualState x:Name="Closed">
          <Storyboard>
            <DoubleAnimation Storyboard.TargetName="Root" Storyboard.TargetProperty="Opacity" To="0" Duration="0"/>
          </Storyboard>
        </VisualState>
        <VisualState x:Name="Open">
          <Storyboard>
            <DoubleAnimation Storyboard.TargetName="xform" Storyboard.TargetProperty="X" To="0" Duration="0"/>
            <DoubleAnimation Storyboard.TargetName="Root" Storyboard.TargetProperty="Opacity" To="1" Duration="0"/>
          </Storyboard>
        </VisualState>
      </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>

    <Border Margin="4,4,-4,-4" Background="#052A2E31" CornerRadius="5"/>
    <Border Margin="3,3,-3,-3" Background="#152A2E31" CornerRadius="4"/>
    <Border Margin="2,2,-2,-2" Background="#252A2E31" CornerRadius="3"/>
    <Border Margin="1,1,-1,-1" Background="#352A2E31" CornerRadius="2"/>

    <Border Background="#FFDC000C" CornerRadius="2"/>
    <Border CornerRadius="2">
      <TextBlock
          UseLayoutRounding="false"
          Foreground="White" Margin="8,4,8,4" MaxWidth="250" TextWrapping="Wrap" Text="{Binding (Validation.Errors)[0].ErrorContent}"/>
    </Border>
  </Grid>
</ControlTemplate> 
```

我需要为我创建的每个控件添加它（ValidationToolTipTemplate-ControlTemplate 除外）。

1.  如何将验证样式添加到我的所有控件并且仍然是 DRY？
2.  如果这不可能，这是否意味着当验证模板的样式发生变化时，我必须将已知 Universe 中所有控件的模板复制并粘贴到一个名为“generic.xaml”的文件中并相应地进行更改？

我使用 Microsoft API 的时间已经足够长，知道 (2) 可能是要走的路，但我想先确定一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:49:39.220

Silveright/WPF 的工作方式在这些情况下存在一些问题。您最终会重复 XAML，因为 ControlTemplates 是全部或全部*。*您要么最终替换样式的模板，要么不替换。您不能像对待班级那样挑选和选择要覆盖的内容。

我将尝试回答您的具体问题，然后尝试提供一些有助于消除 XAML 文件中的冗余的广泛方法。

**如何将验证样式添加到所有控件？**

首先，获取该边框并通过提供 Key 属性使其成为 StaticResoruce。然后将其放入共享资源字典中。当您再次需要该样式时，您可以在模板中使用它，如下所示：

```
<ContentControl x:Name="ValidationErrorElement" Content={StaticResource MyBorderResource}" /> 
```

除了封装模板之外，您无能为力。就 Validation VisualStates 而言，它们已经尽可能紧凑。但是，您可以将多个模板组合成一个更大的模板。我喜欢用看起来像按钮的 ToggleButtons、Buttons 和 RadioButtons 来做到这一点。请参阅下面的第 2 点。

**一般经验法则**

1.  将常用的 XAML 片段封装到模板化控件和控件模板中。例如，假设您在一个边界内有一个边界，您在几个不同的地方使用它。这可以描述为 ControlTemplate 资源并加载到 ContentControl 中。

2.  如果您有几个基本相同的样式或控件模板（想到 Button、ToggleButton、RadioButton），那么在这种情况下，您可以将样式应用于共同的祖先*ButtonBase 。*您的新按钮 ControlTemplate 将包含 Button、ToggleButton 和 RadioButton 所需的所有 VisualStates 和图形元素，并应用于 ButtonBase 类型。如上所述，这种方法适用于外观非常相似的控件，但对于不太相似的控件来说是一个糟糕的选择。

# c# - 确定是新请求还是编辑现有记录

> ID：11363926
> 
> 赞同：0
> 
> 时间：2012-07-06T14:14:02.777
> 
> 标签：c#, asp.net, entity-framework

我有一个对 AD 进行身份验证的登录页面，效果很好。登录后有一个服务请求页面，用户可以保存他们的请求并稍后返回以完成或在完成后提交。这 2 个操作在记录中设置了一个标志（已保存或已提交）。当用户登录时，我可以向他们展示他们保存的请求列表。现在，如果他们单击已保存的请求链接，我可以通过 URL 传递记录 ID .... 但后来我卡住了。我应该有一个不同的页面来编辑/更新记录，还是应该再次使用新的请求页面？如果我使用相同的页面，那么最好的方法是什么？我的印象是会有很多“if...returning...else”，使代码难以阅读。另一方面......如果我做两页，任何更改或更新都需要进入。我正在使用 VS2010 和 EF4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:39:48.747

我是重用页面的粉丝；有一些 if/else，但不是到处都是。例如，在更新实体时，您可以执行以下操作：

```
SomeEntity entity;
bool adding = false;

if (key > 0)
   entity = db.Entities.FirstOrDefault(i => i.Key == key);
if (entity == null)
{
   entity = new SomeEntity { initialvalue = "X" };
   adding = true;
}

entity.Z = someValue;
//set other props

if (adding)
   db.Entities.AddObject(entity);
db.SubmitChanges(); 
```

就 UI 而言，是的，有一些显示/隐藏，但在努力方面会更少。

# centos - 文件/目录权限 centos 6.2

> ID：11363930
> 
> 赞同：0
> 
> 时间：2012-07-06T14:14:15.527
> 
> 标签：centos

在 Centos6.2 上，我试图让 mod_wsgi（使用 Django）运行。我从一个目录为两个站点提供服务，在 Centos 5.2 上一切正常。在日志中，我得到了第二个域的“拒绝访问错误”。

要找出问题是我在用户 A 的主目录中创建了一个测试目录，权限为 777，并尝试以用户 B 的身份访问它。在 Centos 5.2 上，我可以访问测试目录，而在 Centos 6.2 中则不行。

我的第一个想法是 Selinux 处于活动状态，但 Selinux 被禁用。

[root@server sysconfig]# sestatus SELinux 状态：禁用

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:13:19.320

主目录中的新目录是使用权限 710 创建的。在旧的 Centos 中，它们是使用 711 创建的。将目录更改为 711 就可以了。

# gwt - 登录GWT，通过代码配置

> ID：11363933
> 
> 赞同：0
> 
> 时间：2012-07-06T14:14:35.263
> 
> 标签：gwt, logging, configuration, log4j, settings

现在我的 GWT APP 中有两套日志框架，gwt log 和 log4j。我很难设置配置，所以我决定放弃通过 log4j.xml 或 lo4j.property 以及 gwt.xml 进行设置。

我看到了一些可以设置日志级别的 API 代码，有谁知道如何在代码中设置附加程序或处理程序？

或者，如果有人可以帮助我让 GWT 日志记录正常工作，那就太棒了，目前我发现根记录器完全具有调试级别 INFO 和 null 处理程序，与我的 gwt.xml 中的设置完全不同

这是与日志记录相关的 gwt.xml 代码：

```
<!-- for gwt logging                                            -->
<inherits name="com.google.gwt.logging.Logging"/>
<set-property name="gwt.logging.enabled" value="TRUE"/> 
<set-property name="gwt.logging.logLevel" value="FINE"/>
<set-property name="gwt.logging.consoleHandler" value="DISABLED" />
<set-property name="gwt.logging.developmentModeHandler" value="ENABLED" />
<set-property name="gwt.logging.popupHandler" value="DISABLED" />
<set-property name="gwt.logging.systemHandler" value="ENABLED" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:25:34.137

好吧，我终于发现我做错了什么，对于 google web toolkit 项目和服务器端日志，将 log4j.xml 配置文件放入 war/WEB-INFO/classes。并在您的启动参数中添加 -dLog4j.debug=true 以查看 lo4j 配置加载的实际效果。

# r - R ggplot2堆积条以错误的顺序填充一个条

> ID：11363934
> 
> 赞同：4
> 
> 时间：2012-07-06T14:14:40.887
> 
> 标签：r, ggplot2

我正在制作带有 5 个条形的堆叠条形图。对于 5 个条中的 3 个，填充按预期排序，但在第 3 个条中，堆叠段的显示顺序错误。我不允许发布图片，但在第三栏，应该在栏底部的部分显示在顶部。

这是一个简化示例的代码。在示例中，每个 x 和 fill 变量的组合只有一个观察值，但我仍然使用 stat_summary 函数，因为我实际上想将代码用于具有数千个观察值的数据框。

这段代码有什么问题，我怎样才能让所有的条都以正确的顺序显示填充？

```
library(ggplot2)
str(d2)
d2
ggplot(data=d2, aes(x=x,y=y, fill=f) ) +  stat_summary(fun.y="mean", geom="bar", position="stack")
R.version
packageVersion("ggplot2")

> str(d2)
'data.frame':   20 obs. of  3 variables:
 $ x: Factor w/ 5 levels "1CP","2PD","3AM",..: 1 1 1 1 2 2 2 2 3 3 ...
 $ y: num  0.3456 0.0699 0.6659 0.7358 0.3456 ...
 $ f: Ord.factor w/ 4 levels "N1"<"N2"<"N3"<..: 1 2 3 4 1 2 3 4 1 2 ...
> d2
        x          y  f
1     1CP 0.34556309 N1
20021 1CP 0.06985134 N2
25026 1CP 0.66592260 N3
30031 1CP 0.73577575 N4
2     2PD 0.34556309 N1
20022 2PD 2.37410008 N2
25027 2PD 0.74289404 N3
30032 2PD 0.35221355 N4
3     3AM 0.34556309 N1
20023 3AM 0.80074871 N2
25028 3AM 0.62036885 N3
30033 3AM 0.09105373 N4
4     4AP 0.34556309 N1
20024 4AP 0.35911943 N2
25029 4AP 0.12228402 N3
30034 4AP 0.18667499 N4
5     ALL 0.34556309 N1
20025 ALL 0.97839760 N2
25030 ALL 0.58666595 N3
30035 ALL 0.36948221 N4
> ggplot(data=d2, aes(x=x,y=y, fill=f) ) +  stat_summary(fun.y="mean", geom="bar", position="stack")
> R.version
           _                                           
platform       i386-pc-mingw32                             
arch           i386                                        
os             mingw32                                     
system         i386, mingw32                               
status         Patched                                     
major          2                                           
minor          15.1                                        
year           2012                                        
month          07                                          
day            04                                          
svn rev        59723                                       
language       R                                           
version.string R version 2.15.1 Patched (2012-07-04 r59723)
nickname       Roasted Marshmallows                        
> packageVersion("ggplot2")
[1] ‘0.9.1’
> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T17:02:11.870

我还将这个问题作为一个潜在的错误报告给 的作者`ggplot2`，他提供了这个解决方案：

*我不确定这是否是错误 - 但您可以通过添加 `order=f`到 ggplot 函数调用来获得所需的行为。我不确定为什么它不默认。*

建议的添加`order=f`解决了问题！

# sql-server-2008 - 尝试在 Microsoft SQL Server 2008 中恢复损坏的 SQL 表

> ID：11363935
> 
> 赞同：2
> 
> 时间：2012-07-06T14:14:45.793
> 
> 标签：sql-server-2008, import, ssms, crm

我在这里碰壁了，这让我发疯了。

我的服务器崩溃了几个月，备份损坏。我必须做的是恢复一个非常旧的备份，现在我正在尝试将好的表重新导入。

系统是带有 SQL Server 2008 的 CRM 2011。

旧数据库只有几个损坏的表，所以我应该可以轻松地将更新后的新表导入旧数据库，对吧？至少我是这么认为的……

导入/导出没用...我找到了一个脚本可以轻松删除约束，但是由于主键约束而出错...。

然后我不能删除表并导入更新的表，因为外键约束。

我已经在 MYSQL 中多次完成了这个过程。这是完全荒谬的，这在你支付数千美元的东西中似乎是不可能的。

任何帮助将不胜感激。

有什么方法可以简单地强制删除带有约束的表吗？其中一些表不可能删除约束，因为它们被大量表引用。我只需要用一张桌子代替另一张桌子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:52:49.783

我提供了一个类似的解决方案来删除带有约束的表。您仍然必须删除外部约束，但这个脚本应该有助于做到这一点。

[SQL Server：删除表级联等效？](https://stackoverflow.com/questions/4858488/sql-server-drop-table-cascade-equivalent/4858773#4858773)

# linux - UNIX Shell 脚本从文件中删除一列

> ID：11363940
> 
> 赞同：0
> 
> 时间：2012-07-06T14:14:54.563
> 
> 标签：linux, bash, shell, unix, scripting

我有一个如下文件：

```
Header1:value1|value2|value3|
Header2:value4|value5|value6| 
```

列号未知，我有一个可以返回列号的函数。

我想编写一个可以从文件中删除一列的脚本。例如，删除第 1 列后，我将得到：

```
Header1:value2|value3|
Header2:value5|value6| 
```

我`cut`用来实现这一点，到目前为止，我可以在删除一列但没有标题后给出值。例如

```
value2|value3|
value5|value6| 
```

谁能告诉我如何添加标题？或者任何命令都可以直接做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:24:12.897

用管道替换冒号，执行您的`cut`命令，然后再次用冒号替换第一个管道：

```
sed 's/:/|/' input.txt | cut ... | sed 's/|/:/' 
```

您可能需要调整 cut 命令的列号，以确保不计算标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T14:23:35.660

把':'变成'|'，这样头部就是另一个字段，而不是第一个字段的一部分。您可以在任何生成数据开始时执行此操作，也可以通过将数据传递给`tr ':' '|'`before `cut`。然后，您的其余字段将被 +1 抵消，但这应该很容易弥补。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T14:25:08.683

您的问题是 HeaderX 后跟 ' **:** ' 这不是 ' **|** ' 在 cut 中使用的分隔符。

你可以先用 : 将你的行分成两部分，比如“cut -f 1 --delimiter=: YOURFILE”，然后删除第一列，然后放回标题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T14:40:42.607

awk 可以处理多个分隔符。所以另一种选择是...

```
jkern@ubuntu:~/scratch$ cat ./data188 
Header1:value1|value2|value3|
Header2:value4|value5|value6|
jkern@ubuntu:~/scratch$ awk -F"[:|]" '{ print $1 $3 $4 }' ./data188 
Header1value2value3
Header2value5value6 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T14:28:31.550

你可以在`sed`没有的情况下做到这一点`cut`：

```
sed 's/:[^|]*|/:/' input.txt 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T14:29:27.200

我的解决方案：

```
$ sed 's,:,|,' data | awk -F'|' 'BEGIN{OFS="|"}{$2=""; print}' | sed 's,||,:,'
Header1:value2|value3|
Header2:value5|value6| 
```

*   替换`:`为`|`
*   `-F'|'`告诉`awk`使用`|`符号作为字段分隔符
*   在每一行中，我们用空字符串替换第二个（因为标题现在成为第一个）字段，并用新的字段分隔符 ( `|`)替换打印结果行
*   `|`通过替换 first来返回标题`:`

不完美，但应该可以。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-08T07:53:27.900

`$ cat file.txt | grep 'Header1' | awk -F"1" '{ print $1 $2 $3 $4}'`

这将在单独的列中打印所有值。您可以打印任意数量的列。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-14T03:48:01.283

只需加入 Perl 解决方案：（
根据需要重新排列/删除字段）

-l 有效地为每个打印语句添加一个换行符
-a 自动拆分模式使用 -F 表达式将每一行拆分为数组 @F
-n 在 - 周围添加一个循环e code
-e your 'one liner' 遵循此选项

```
$ perl -F[:\|] -lane 'print "$F[0]:$F[1]|$F[2]|$F[3]"' input.txt 
```

# windows-phone-7 - 适用于 AR、位置聊天的 Windows Phone SDK？

> ID：11363942
> 
> 赞同：1
> 
> 时间：2012-07-06T14:14:57.173
> 
> 标签：windows-phone-7, augmented-reality, quickblox

嗨，我正在构建一个社交网络/约会应用程序，用户可以在其中看到谁在增强现实模式下。为了加快速度，我需要：

1.  存储用户位置的服务器/API
2.  用于客户端集成的 AR 库或 SDK

我对此进行了一些研究，有 WP7 的 GART 库：[使用 GART 实现增强现实](http://igrali.com/2012/05/24/implementing-augmented-reality-using-gart/)和来自 MSDN 的代码示例：[增强现实运动示例](http://msdn.microsoft.com/en-us/library/ff431744%28v=vs.92%29.aspx#BKMK_Sensors)

我也在考虑使用 Quickblox SDK，因为他们已经完成了我所需要的 - AR Chat - 但对于 iPhone - 所以我正在考虑使用他们的 WP7 Location Chat 代码示例[QuickBlox Developers（API 文档、代码示例、SDK）](http://quickblox.com/developers/SuperSample_%28Map_Chat_code_sample%29_Windows_8_%28WP7%29)并做AR 将自己与 GART 库分开，或者使用 MSDN 示例从头开始。

也研究了 Wikiitude Architect，但他们通过 web/Javascript 覆盖来完成，所以不是我不喜欢的原生。

关于在 WP7 上实施 AR 聊天的最佳方法有什么建议 - 有没有更好的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:35:18.717

> 1.  存储用户位置的服务器/API

我认为 QuickBlox 是一个很好的解决方案。VK Radar 示例应用程序[http://quickblox.com/augmented-reality-chat-for-mobile-applications/](http://quickblox.com/augmented-reality-chat-for-mobile-applications/)证明 QuickBlox 是基于 AR 的应用程序的良好解决方案。

> 1.  用于客户端集成的 AR 库或 SDK

我建议使用 GART。这是一个很棒的工具包，它有 2 个示例[http://gart.codeplex.com/documentation：SimpleAR](http://gart.codeplex.com/documentation)和 BingAR。前段时间我在一次黑客马拉松上开发简单的应用程序时使用了它们

# c# - 如何在 C# 字符串中找到单词

> ID：11363951
> 
> 赞同：-2
> 
> 时间：2012-07-06T14:15:42.727
> 
> 标签：c#, html-parsing

我需要从互联网上加载一个长字符串，我已经做到了。现在我需要找到`H1`标题标签并打印内容。

最短或最简单的方法是什么？

```
for (int x = 0; x < tempString.Length; x++)
{

    if (write == 2)
    {
        name =name + tempString[x];
        lenght++;
    }
    if (tempString[x] == '<' && tempString[x] == 'h' && tempString[x] == '1' )
        write = 1;

    if (write == 1 && tempString[x] == '>')
        write = 2;

    if (tempString[x] == '-' && write == 1)
        write = 0;
} 
```

我知道这有点奇怪。但这就是我所拥有的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T14:17:26.653

使用[HTML Agility Pack](https://www.nuget.org/packages/HtmlAgilityPack) - 您尝试的任何其他方法都只会让您[头疼](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。

**HtmlAgility 示例：**

```
var html = "<html><head></head><body><h1>hello</h1></body></html>";

HtmlDocument d = new HtmlDocument();
d.LoadHtml(html);

var h1Contents = d.DocumentNode.SelectSingleNode("//h1").InnerText; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T14:20:04.613

如果您想在平面 C# 中执行此操作，并且您只查看 1 个标签：

```
int first_tag = str.IndexOf("<H1>");
int last_tag = str.IndexOf("</H1>");
string text = str.SubString((first_tag + 4), (last_tag - first_tag)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T14:18:24.847

使用 HTML 库！

否则尝试：

```
String.IndexOf(String x ) 
```

[http://msdn.microsoft.com/en-us/library/k8b1470s.aspx](http://msdn.microsoft.com/en-us/library/k8b1470s.aspx)

您可以使用它来获取开始和结束标签的第一个索引。然后，您可以在这些索引之间进行阅读。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T14:22:25.550

System.String 类具有**IndexOf(String)**等方法- 报告指定字符串第一次出现的从零开始的索引。

所以在你的情况下，你可以传入`"<H1>"`. 然后你可以得到一个从那个点开始的子字符串，然后再次调用这个方法再次寻找`"</H1>"`。

或者，如果您愿意，在 .NET 中使用正则表达式可能会更容易。这些位于 System.Tet.RegularExpressions 命名空间中。这些肯定更复杂。但我相信你可以练习使用一些小样本并了解黑暗面的力量！(errr....) 正则表达式的威力！:)

[编辑] 现在我看到其他人的答案，我绝对同意其他人。如果您需要做的事情比在 HTML 格式的字符串中获取一项更复杂，请使用 html 解析器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T14:47:53.760

以上所有工作都很好我只是不能使用任何外部库

这对我很有效

```
for (int x = 0; x < tempString.Length; x++)
        {

            if (tempString[x] == '-' && write == 2)
            { write = 0; }

            if (write == 2)
            {
                title =title + tempString[x];
                lenght++; 
            }
            if (tempString[x] == '<' && tempString[x+1] == 'h' && tempString[x+2] == '1' )
            { write = 1; }

            if (write == 1 && tempString[x] == '>')
            { write = 2; }

        } 
```

# sql - Sqlite：在子查询“消除”结果中排序

> ID：11363956
> 
> 赞同：1
> 
> 时间：2012-07-06T14:16:16.743
> 
> 标签：sql, sqlite

SQLite 版本 3.3.6

sqlite中有一个表

```
CREATE TABLE stats (Date TEXT , Sub TEXT ,  DELAY95TH INT ) ; 
```

每行是：

```
Date      |Sub|Delay
2012-06-25|212|750
2012-06-25|214|1180
2012-06-25|216|14902 
```

任务是通过汇总延迟获取 Sub 来自前 10 名的所有记录

执行此操作的 SQL：

```
Select 
    Date, Sub, Delay 
from 
    stats 
where 
    Sub in (select Sub 
            from stats 
            group by Sub  
            order by SUM(Delay) desc limit 10 ) ; 
```

但是，它不会产生任何结果。一旦您删除“order by”子句，查询就会开始工作。

因此，例如：

```
select 
    Date, Sub, Delay 
from  
    stats  
where
    Sub in (select Sub from stats group by Sub limit 10); 
```

运作良好并产生预期的效果。

更有什者。在同一实例中也有表：

```
CREATE TABLE data ( Date DATE , Sub INT, Subcont TEXT, Session INT, MsgType TEXT, Score INT); 
```

并选择与有问题的类似，工作正常：

```
select 
    Subcont, MsgType, SUM(Score) 
from
    data 
where 
    Subcont in (select Subcont 
                from data 
                group by Subcont 
                order by sum(Score) desc limit 10) 
group by
    Subcont, MsgType 
order by 
    Subcont, MsgType; 
```

它的作用几乎相同：通过汇总 Score 识别前 10 个 Subcont，并显示包含这些 Subcont 的所有记录。它有效！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:17:03.947

发现问题。

我不知道它是 bug 还是它是为 sqlite 目的而设计的。问题是在使用文本字段操作时，“order by”在子查询中不起作用。

在 Sub 之后，即 TXT 已转换为 INT，接下来的查询开始返回预期的结果：

```
Select Date, Sub , Delay from stats where Sub in (select Sub from stats group by Sub  order by Sub) ; 
Select Date, Sub , Delay from stats where Sub in (select Sub from stats group by Sub  order by SUM(Delay) desc limit 10 ) ; 
```

虽然 Sub 是 TEXT，但这些查询什么也没返回。

唯一的问题是：如果 Sub 里面有一些字母并将其转换为 INT 是不可能的，应该怎么做？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:34:40.440

如果我将“日期”列重命名为 d1（日期是 SQL 中的关键字），我会得到预期的（？）输出：

```
create table stats (d1 date, sub number, delay number);
insert into stats values('2012-06-25', 212, 750);
insert into stats values('2012-06-25', 214, 1180);
insert into stats values('2012-06-25', 216, 14902);

Select D1, Sub , Delay from stats where Sub in (
select Sub from stats group by Sub  order by SUM(Delay) desc limit 10 ) ; 
```

返回 3 行。因此，只需重命名您的日期列并重试:-)

# ios - iOS 将证书添加到现有分发配置文件

> ID：11363958
> 
> 赞同：0
> 
> 时间：2012-07-06T14:16:19.030
> 
> 标签：ios, xcode, app-store

我正在尝试将我们的应用程序的新版本上传到应用商店，但是 Xcode 告诉我我没有有效的身份可以签名。

我查看了分发配置文件，发现确实只有我们的公司证书与此分发配置文件相关联。我需要将我的个人证书添加到此分发配置文件中，但我无法找到执行此操作的方法。

有谁知道这是否可能？

编辑：实际上，我的证书看起来不像是 DISTRIBUTION 证书。我想我实际上需要创建一个新的分发证书？是否可以将现有的开发人员证书更改为分发证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:55:15.760

您不能将证书添加到现有分发或供应配置文件.. !! 你必须要么

*   下载与配置文件关联的原始证书或
*   为您的开发人员证书创建分发配置文件 - 您当前拥有的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:27:01.397

在将构建的第二个版本上传到应用商店时，我也遇到了来自 Xcode 4.3 的相同错误日志。

然后我使用旧版本的Xcode上传构建并成功上传。这是对我有帮助的类似帖子。

[Xcode 4.3：代码设计操作失败（检查您选择的身份是否有效）](https://stackoverflow.com/questions/9386925/xcode-4-3-codesign-operation-failed-check-that-the-identity-you-selected-is-va)

# javascript - 如何将矩阵信息转换为简单的 x 和 y 坐标

> ID：11363960
> 
> 赞同：0
> 
> 时间：2012-07-06T14:16:35.793
> 
> 标签：javascript, matrix, svg, raphael

我有一个 SVG 文件，我正在 illustrator 中进行编辑。我已经使用这个文件中的路径信息来创建一个 Raphael 对象。我现在要做的是在绘图的某些部分添加文本。问题是 Raphael 只接受 X 和 Y 坐标，而 SVG 文件中的文本是一个矩阵。

基本上我需要转这个：

```
<text transform="matrix(1 0 0 1 583 562)" font-size="12">Argentina</text> 
```

变成这样的东西：

```
var t = paper.text(x, y, "Argentina"); 
```

那可能吗？我也尝试将文本变成轮廓，但结果路径很复杂，我更喜欢更轻的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:49:50.450

在您的特定情况下，矩阵仅转换为`x: 583`and `y: 562`，但如果您的元素被缩放或旋转，那么这些值将具有误导性。

您可以直接在 Raphael 中应用变换矩阵，您只需...

```
transformation = Raphael
     .matrix(1, 0, 0, 1, 583, 562)
     .toTransformString();

text = paper
    .text(0, 0, "Argentina")
    .attr("font-size", 12)
    .transform(transformation)​ 
```

现在，如果不喜欢在您的元素上应用转换，您可以通过执行将矩阵转换转换为更易于阅读的格式`console.log(transformation)`，这将为您提供一个字符串，例如[Raphael 的文档](http://raphaeljs.com/reference.html#Element.transform)`t100,100r30,100,100s2,2,100,100`中很好解释的字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:30:30.987

我听到你的问题。当我编写一个 SVG 到 Raphael 转换器（第一个）时，我研究了这些问题。转换器将所有变换移出路径并将所有坐标从相对坐标更改为绝对坐标。在 svg Text 中，有很多东西可以让您了解。我写的coverter 提供了一些对文本转换的支持。我想您可以尝试将您的 SVG 通过转换器并查看它参考文本丢弃的 javascript。转换器至少会输出几种格式，但您可能会尝试的 2 种是默认输出。转到[转换器页面](http://www.irunmywebsite.com/raphael/SVGTOHTML_LIVE.php)

仅使用默认值上传您的 SVG。当您单击“收集 Raphael”时，将带您进入生成的交互式 javascript。这仅处理路径以查看使用文本完成的工作单击“或页面”链接...

如果您需要帮助，我会回来查看...

# c# - .NET HTTPS 请求 - 发布数据以登录到站点

> ID：11363961
> 
> 赞同：1
> 
> 时间：2012-07-06T14:16:41.370
> 
> 标签：c#, .net, http, https, web-scraping

我正在尝试构建一个服务来登录网上银行网站并下载用户的最新交易信息。

我正在用 .NET/C# 构建它，我正在尝试按照我在另一篇文章中看到的关于如何执行此操作的示例... [.NET HTTP POST 方法 - Cookies 问题](https://stackoverflow.com/questions/2151576/net-http-post-method-cookies-issue)

但我似乎无法让这个例子起作用。

我要登录的网站是... [http://www.communityamericacu.com/](http://www.communityamericacu.com/)

这是我到目前为止想出的...

```
public void RetrieveTransactions()
{
    var request = (HttpWebRequest) WebRequest.Create("https://secureaccess.cacu.com/accountlink/SignOn/SignOn.aspx");
    var cookies = new CookieContainer();
    request.CookieContainer = cookies;
    request.Method = "POST";
    request.ContentType = "application/x-www-form-urlencoded";

    using (var requestStream = request.GetRequestStream())
    {
        using (var writer = new StreamWriter(requestStream))
        {
            writer.Write("user=****&PIN=****&BankFolder=Banking&BrandID=1&BrandFolder=cacu&BrandType=R&screenwidth=&screenheight=&RemoteLogin=N&ExitURL=&UserJavaPlatForm=Win32&UserJavaBrowser=Netscape&UserJavaVersion=5.0+%28Windows+NT+6.1%3B+WOW64%29+AppleWebKit%2F536.11+%28KHTML%2C+like+Gecko%29+Chrome%2F20.0.1132.47+Safari%2F536.11&UserJavaCodeName=Mozilla&UserJavaColorDepth=32&UserJavaColors=4294967296&UserJavaCurrentResolution=1600x900&UserJavaMaxResolution=1600x870&UserJavaEnabled=Yes&UserJavaAAFonts=No&UserJavaPlugins=+Remoting+Viewer+Native+Client+Chrome+PDF+Viewer+Shockwave+Flash+Shockwave+Flash+Adobe+Acrobat+Microsoft+Lync+2010+Meeting+Join+Plug-in+QuickTime+Plug-in+7.7.2+QuickTime+Plug-in+7.7.2+QuickTime+Plug-in+7.7.2+QuickTime+Plug-in+7.7.2+QuickTime+Plug-in+7.7.2+QuickTime+Plug-in+7.7.2+QuickTime+Plug-in+7.7.2+Microsoft+Office+2010+Microsoft+Office+2010+Google+Update+NVIDIA+3D+Vision+NVIDIA+3D+VISION+Java%28TM%29+Platform+SE+7+U5+Java+Deployment+Toolkit+7.0.50.255+Shockwave+for+Director+Silverlight+Plug-In+Remoting+Viewer+Native+Client+Chrome+PDF+Viewer+Shockwave+Flash+Shockwave+Flash+Adobe+Acrobat+Microsoft+Lync+2010+Meeting+Join+Plug-in+QuickTime+Plug-in+7.7.2+QuickTime+Plug-in+7.7.2+QuickTime+Plug-in+7.7.2+QuickTime+Plug-in+7.7.2+QuickTime+Plug-in+7.7.2+QuickTime+Plug-in+7.7.2+QuickTime+Plug-in+7.7.2+Microsoft+Office+2010+Microsoft+Office+2010+Google+Update+NVIDIA+3D+Vision+NVIDIA+3D+VISION+Java%28TM%29+Platform+SE+7+U5+Java+Deployment+Toolkit+7.0.50.255+Shockwave+for+Director+Silverlight+Plug-In&UserJavaUTCOffset=5");
        }
    }

    using (var responseStream = request.GetResponse().GetResponseStream())
    {
        if (responseStream != null)
        {
            using (var reader = new StreamReader(responseStream))
            {
                var result = reader.ReadToEnd();
            }
        }
    }

} 
```

但这是我得到的回应......

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>@ccountLink Error</title>
</head>
<body>
An error occurred.
</body>
</html> 
```

当我尝试登录该站点时，即使用户名和密码不正确，这也不是我得到的。

在这一点上，这一切都让我有点过头了。我能得到的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:56:28.173

也许银行会检查 HTTP 请求的其他字段，例如 User-Agent（即浏览器），当它找不到它们时会给出错误？尝试至少添加用户代理（您已链接到的问题中有一个示例）。也许您还必须添加其他字段。您可以在此处查看完整列表[http://en.wikipedia.org/wiki/List_of_HTTP_header_fields](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)

# json - IE8 中的 FullCalendar - 事件未呈现

> ID：11363966
> 
> 赞同：0
> 
> 时间：2012-07-06T14:16:54.010
> 
> 标签：json, fullcalendar

这是其他人遇到的问题，但其他地方列出的解决方案都没有对我有用。我正在使用 FullCalendar 1.5.3 缩小版（尽管有趣的是，非缩小版有所不同——它没有调用我的完整功能。不过那是另一回事）。

这是我生成的 javascript/JSON（从数据库输出）：

```
$(document).ready(function() {
    var colours = new Array();
    colours[159] = '#ED8E00';
    colours[160] = '#531493';
    colours[161] = '#69A2E2';
    colours[162] = '#C39';
    colours[163] = '#DEED42';

    $('#calendar').fullCalendar({
       header: {
         left: 'prev,next today',
         center: 'title',
         right: 'month,basicWeek'
       },
       events: [{title: 'Consultation on the Preparation of the EU Adaptation Strategy', url: '/~sniffer/news-diary/calendar/consultation-on-the-preparation-of-the-eu-adaptation-strategy/', start: new Date('2012-07-03T00:00:00'), end: new Date('2012-08-20T00:00:00'), allDay: true, page_id: ''},{title: 'Festival of Politics', url: '/~sniffer/news-diary/calendar/festival-of-politics/', start: new Date('2012-08-18T00:00:00'), end: new Date('2012-08-24T00:00:00'), allDay: true, page_id: ''},{title: 'Consultation on Energy Efficiency Standard for Social Housing closing 28.09.12', url: '/~sniffer/news-diary/calendar/consultation-on-energy-efficiency-standard-for-social-housing-closing-28.09.12/', start: new Date('2012-06-25T00:00:00'), end: new Date('2012-06-25T00:00:00'), allDay: true, page_id: ''},{title: 'Consultation on efficient use of materials closing on 28.09.12', url: '/~sniffer/news-diary/calendar/consultation-on-efficient-use-of-materials-closing-on-28.09.12/', start: new Date('2012-06-27T00:00:00'), end: new Date('2012-06-27T00:00:00'), allDay: true, page_id: ''},{title: 'Launch of the latest Sustainable Consumption Institute (SCI) report', url: '/~sniffer/news-diary/calendar/launch-of-the-latest-sustainable-consumption-institute-sci-report/', start: new Date('2012-07-04T00:00:00'), end: new Date('2012-07-13T00:00:00'), allDay: true, page_id: ''},{title: 'Strathclyde Loch Restoration Phase 1', url: '/~sniffer/knowledge-hubs/resilient-catchments/river-restoration-partnerships/strathclyde-loch-restoration-phase-1/', start: new Date('2012-05-01T00:00:00'), allDay: true, page_id: '161'}],
       eventRender: function(event, element) {
           element.attr('rel', event.page_id);
       },
       timeFormat: 'H(:mm)',
       complete: function() {
           $('#calendar').css('background', 'none');
       }
   });

   // Append coloured pills to events
   function updateEventCats() {
        var colour;
        $('a.fc-event').each(function() {
            var rel = $(this).attr('rel');
            var ids = rel.split('-');

            for (var i=0; i<ids.length; i++) {
                colour = colours['+i+'];
                if (rel != '') {
                   $(this).find('.fc-event-inner').prepend('<div class=\'event-pill\' style=\'background:'+colours[ids[i]]+'\'></div>');
                }
            };
        });
   }

   updateEventCats();

   // Update pills on calendar paging
   $('.fc-button').click(function() {
        updateEventCats();
   });

}); 
```

似乎没有任何不必要的逗号，我也没有从 IE 的开发人员工具中得到任何脚本错误。我在 IE=edge 中运行，所以是 IE8 标准模式。否则，日历可以完美呈现，页面没有任何问题。

我试过禁用药丸的东西，所以日历呈现香草，但这没有帮助。

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:17:40.037

将日期作为字符串而不是 Date 对象传递。喜欢：

```
{
  title: 'Consultation on the Preparation of the EU Adaptation Strategy',
  url: '/~sniffer/news-diary/calendar/consultation-on-the-preparation-of-the-eu-daptation-strategy/',
  start: '2012-07-03T00:00:00',
  end: '2012-08-20T00:00:00',
  allDay: true,
  page_id: ''
} 
```

我在 IE9 上对此进行了测试，`Browser Mode: IE8 and Document Mode: IE8 standards`并且可以正常工作。

希望这可以帮助！

# css - 翻转CSS中的分隔线图像？

> ID：11363967
> 
> 赞同：0
> 
> 时间：2012-07-06T14:16:55.153
> 
> 标签：css, rollover

我有一个带有图像分隔符的导航栏，当您滚动时，链接会改变颜色。我希望翻转颜色覆盖分隔线，但它会停在它们前面，看起来很奇怪。示例：[http ://stsh.me/2PD](http://stsh.me/2PD)

如您所见，分隔线图像仍显示在右侧。如何在 css 中覆盖它们？我需要js吗？我有的：

```
.navigation ul{
     width: 600px;
     float: right;
     margin: 0px;
     border-left: solid 25px #a34699;
     background-color: #c3bf36;
     padding: 0;
}
.nav li{
     float: left;
     background: url(../images/nav_divider.png) center left no-repeat;
     text-align: center;
     position: relative;
}
.nav a{
    color: #fff;
    text-decoration: none;
    display: block;
    font-size: 13pt;
    padding: 4px 23px 4px;    
}
.nav a:hover{
    color: #636466;
}
.nav li:hover{
    background: #4dd1e5;
    list-style-image: none;
    list-style-type: none;
    position: relative;
    z-index: 999;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:56:21.330

尝试这个：

```
.nav li{
    float: left;
    background-color:transparent;
    background-image: url(../images/nav_divider.png);
    background-position:center left;
    background=-repeat:no-repeat;
    text-align: center;
    position: relative;
}

.nav li:hover{
    background-color: #4dd1e5;
    background-image: none;
    list-style-image: none;
    list-style-type: none;
    position: relative;
    z-index: 999;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:30:08.077

尝试添加背景图像：无；到 .nav li:hover。

# c++ - 是否需要对 std 构造函数的调用进行限定？

> ID：11363968
> 
> 赞同：8
> 
> 时间：2012-07-06T14:17:00.340
> 
> 标签：c++, exception, inheritance, constructor, namespaces

构造函数的调用是否`std`需要用 限定`std::`？

```
class whatever : public std::runtime_error
{
public:
    explicit whatever(const std::string& what) : runtime_error(what) {}
};                                            // ^ do I need std:: here? 
```

它可以在没有资格的情况下在我的编译器上运行，但我不确定这种行为是否是标准的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T14:22:51.350

不，你没有。在类的范围内查找初始化列表中的名称`whatever`。此类范围包括在基类中声明的名称，并且基类的名称 ( `runtime_error`) 插入到范围中`std::runtime_error`（这是所有类的标准行为）。

`typedef`请注意，如果您使用的名称是实际类名的 a，则这不起作用。你很容易被诱惑，例如，`std::istream`和朋友。[看这里。](https://stackoverflow.com/questions/7868009/why-is-no-qualification-necessary)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T14:21:14.613

初始化列表中不需要资格（老实说，我不知道那里是否允许资格），因为它是一个基础，可以通过类查找找到。

# java - 日历对象数组

> ID：11363969
> 
> 赞同：4
> 
> 时间：2012-07-06T14:17:00.543
> 
> 标签：java, android

可以创建一组日历对象吗？

如果是，如何做到这一点？这段代码肯定会出错

```
Calendar cal[length];     
//loop for initialising all the objects in cal[] array 
```

如果不是，还有什么其他方法可以获取“n”个日历对象？我需要这个重复警报，设置在不同的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T14:19:32.243

你总能做到`Calendar[] cal = new Calendar[length];`

您也可以使用 ArrayList，例如：

`List<Calendar> list = new ArrayList<Calendar>();`

然后还有很多方便的方法，比如`add(Calendar calendar);`

然后：

您可以使用`for (int x = 0; x < list.size(); x++)`

或者`for (Calendar cal : list)`

这对数组也有效。里面供您使用`getCalendar()`或您需要的`new GregorianCalendar()`任何东西。`Calendar`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T14:20:31.790

另一种方法是使用`java.util.Timer`并`java.util.TimerTask`安排重复警报：

```
Timer t = new Timer();
Calendar c = Calendar.getInstance();

t.schedule(
    new TimerTask()
    {
        public void run()
        {
            System.out.println("alarm1");
        }
    },
    c.getTime()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T14:19:05.317

日历 cal[] = 新日历[100];

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T14:20:17.637

看看这个Java[文档站点](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)。在那里你可以找到如何使用数组，这个例子非常有用。实际上，您只需要根据您的情况将其更改`int`为`Calendar`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T14:22:37.183

`Calendar`是`abstract`类。所以你应该用一些子类来初始化`Calendar`变量/数组，这不是抽象的。例如：

```
Calendar[] calendars = new Calendar[1];
calendars[0] = new GregorianCalendar(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T14:23:41.583

在 Java 中创建数组的正确语法是：

日历[] cal = 新日历[长度];

然后您可以初始化各个元素。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-06T14:23:48.900

可能更好的解决方案是使用这样的代码：

```
ArrayList<Calendar> list = new ArrayList<Calendar>(); 
```

现在使用循环逻辑：

```
Calendar cal = Calendar.getInstance(); 
```

使用 cal 设置值并将其添加到 ArrayList :)

这是因为它将赋予您动态添加/删除项目的能力。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-06T14:26:05.000

```
 Calendar[] calendars = new Calendar[length];
    for (int i = 0; i < length; i++) {
        calendars[i] = Calendar.getInstance();
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-06T14:26:55.120

`new`在 Java 中，除非您使用关键字，否则不会分配对象。这与 C++ 中的 new 仅用于动态分配内存不同。要实现您想要做的事情，请执行以下操作：

```
Calendar cal[] = new GregorianCalendar[length]; 
```

您可能会发现这些链接很有帮助： http: [//docs.oracle.com/javase/6/docs/api/java/util/Arrays.html](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html) http://docs.oracle.com/javase/tutorial/java/nutsandbolts/数组.html

此外，在 Java 中，列表通常优先于数组使用，因为它们使用起来更方便，并且包含您很可能需要访问和操作的大多数函数。使用列表如下：

```
List<Calendar> calendars = new ArrayList<Calendar>();
for(int i=0; i<length; i++) {
    calendars.add(myCalendar);
} 
```

# c# - 将 UIElement 添加到 Panel 会导致 InvalidOperationException “已经是另一个元素的逻辑子元素”

> ID：11363975
> 
> 赞同：1
> 
> 时间：2012-07-06T14:17:20.183
> 
> 标签：c#, wpf, c#-4.0, wpf-controls, uielement

好的，你们中的大多数人会说“在将元素添加到新面板之前从其先前的父元素中删除它”。我知道，我已经在其他情况下多次应用了这个，我无法解释为什么它在这种特殊情况下不起作用。

这是我的调试会话的摘录以及发生异常的位置：

![在此处输入图像描述](../Images/9516b3d60477fb9cc1909d8d0d5b3bac.png)

如您所见，我的元素的父元素没有子元素！你有什么建议吗？我该如何诊断这个问题？谢谢 ！

编辑：我准确地说，该元素以前已添加到用于生成 XPS 的面板中，并在生成完成后删除。==> 这是在我们进入“AddNewSpecialElement 方法”之前完成的，但它不应该改变上面的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:03:29.423

问题解决了。解释。

当我按照这些步骤操作时出现了问题：

1.  在屏幕上绘制一个视觉列表（所有视觉都放在一个 stackPanel 中）==> 好的
2.  从 stackPanel 中删除视觉效果以在我自己的 DocumentPaginator 中使用它们 ==> 好的
3.  打印或导出它们（例如使用`PrintQueue.CreateXpsDocumentWriter().Write(paginator)`）。==> 好的
4.  导出完成并处理 Paginator 后，将视觉效果添加到原始 stackPanel 以再次在屏幕上显示它们 ==> 好的
5.  开始一个新的 XPS 导出，从第 2 步开始重复 ==> 异常！

我认为处理 Paginator 就足够了。我没有理由认为它不是，因为第 4 步效果很好。事实上，我必须在步骤 3b 中从分页器内的父视觉对象中显式删除视觉对象。

谢谢阅读。

# javascript - django tinymce javascript 未在非管理页面上加载

> ID：11363977
> 
> 赞同：4
> 
> 时间：2012-07-06T14:17:22.763
> 
> 标签：javascript, python, django, tinymce

我试图在 Django 上实现 TinyMCE，我已经使用如下设置在管理页面上成功实现了它：

管理员.py：

```
class TinyMCEAdmin(admin.ModelAdmin):
    class Media:
            js = ('/media/js/tiny_mce/tiny_mce.js', '/media/js/tiny_mce/textareas.js',) 
```

设置.py：

```
TINYMCE_JS_ROOT = '/media/js/tiny_mce/'
TINYMCE_JS_URL = '/media/js/tiny_mce/tiny_mce.js' 
```

然后当我尝试在我的表单上实现它时（非管理员）：

表格.py：

```
from tinymce.widgets import TinyMCE

class Foo(forms.Form):
    title       = forms.CharField(max_length = 100)
    content     = forms.CharField(widget = TinyMCE()) 
```

当我看到结果时，它只显示纯 html textarea，然后我在 Chrome 上点击“F12”，然后它说：“未捕获的引用错误：未定义 tinyMCE”。

我该如何解决这个错误？谢谢各位

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T14:32:10.827

[查看文档](https://github.com/aljosa/django-tinymce/blob/master/docs/usage.rst#templates)，如果您在管理员之外的表单中使用 TinyMCE，您需要告诉它包含手动渲染 TinyMCE 所需的 JS/CSS。因此，在您的基本模板（或类似的地方）中，您需要添加：

```
<head>
    ...
    {{ form.media }}
</head> 
```

或者您可以简单地手动加载 js：

```
<head>
   <script src="{{ MEDIA_URL }}js/tiny_mce/tiny_mce.js"></script>
   <script src="{{ MEDIA_URL }}js/tiny_mce/textareas.js"></script>
</head> 
```

但前者可能更容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:31:52.283

在这种情况下，文件`tiny_mce.js`似乎尚未加载。

# actionscript-3 - 包定义困难

> ID：11363980
> 
> 赞同：0
> 
> 时间：2012-07-06T14:17:33.043
> 
> 标签：actionscript-3, flash

我在名为 sample 的文件夹中有 .fla 文件。在示例中，我有另一个名为 one 的文件夹，其中包含类。我已将类的源路径设置为这个文件夹。现在在我的类文件中

```
 package one
{ // code
} 
```

但我收到错误“C:\Users\gaurav\Documents\sample\one\CDK.as, Line 1 5001: The name of package 'one' does not reflect the location of this file. Please change the package definition's inside inside这个文件，或移动文件。C:\Users\gaurav\Documents\sample\one\CDK.as" ...有人可以帮我解决这个问题吗...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:24:22.363

包反映了与您的项目相同的文件夹结构。

如果您的项目位于：

> C:\Users\gaurav\Documents\sample\sample.fla

`package one`将在：

> C:\Users\gaurav\Documents\sample\one

如果您的包命名空间根目录与您的 FLA 相同，则无需为类设置源路径。

如果将类的源路径设置为文件夹，`one`则必须是该文件夹的子文件夹。

即：将源路径设置为`one`隐含`one\one`将定义`package one`，如：

> C:\Users\gaurav\Documents\sample\one\one

否则，您可以在与 FLA 不同的文件夹位置（例如公共源文件夹）中为 Flash 添加源路径。

# regex - 从数组中删除空白元素

> ID：11363981
> 
> 赞同：11
> 
> 时间：2012-07-06T14:17:44.370
> 
> 标签：regex, perl

在我的 Perl 代码中，我正在访问一封电子邮件。我需要获取其中的表并将其解析为一个数组。我是这样做的：

```
my @plain = split(/\n/,$plaintext); 
```

但是， 中存在许多空白元素`@plain`。它有 572 个元素，其中大约一半是空的。

我在这里做错什么了吗？我需要在我的代码中添加/更改什么来摆脱空白元素？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-06T15:21:45.687

`grep`输出，因此您只能获得包含非空白字符的条目。

```
my @plain = grep { /\S/ } split(/\n/,$plaintext); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T14:23:03.243

[正确的](https://stackoverflow.com/questions/11363981/removing-blank-elements-from-an-array/11365090#11365090)方法来自@dave-cross

如果您不准备修复拆分，则快速而肮脏：

```
foreach(@plain){
    if( ( defined $_) and !($_ =~ /^$/ )){
        push(@new, $_);
    }
} 
```

编辑：它是如何工作的

将有比上述更优雅和更有效的方法，但与 perl-y tmtowtdi 一样！它的工作方式是：

1.  循环遍历数组`@plain`，`$_`设置为当前数组元素

    `foreach(@plain){`

2.  检查当前元素，看看我们是否对它感兴趣：

    `( defined $_) # has it had any value assigned to it !($_ =~ /^$/ ) # ignore those which have been assigned a blank value eg. ''`

3.  如果当前元素通过了这些检查，则将其推送到 @new

    `push(@new, $_);`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-13T20:55:00.077

您的代码中需要添加一行，并且可以正常工作

```
 @plain= grep { $_ ne '' } @plain; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-24T11:22:25.917

这是我用的，太晚了，但这个很好，以后可以用

```
$t = "1.2,3.4,3.12,3.18,3.27";
my @to = split(',',$t);
foreach $t ( @to ){
    push ( @valid , $t );
}
my $max = (sort { $b <=> $a } @valid)[0];
print $max 
```

# javascript - javascript回调函数的参数

> ID：11363984
> 
> 赞同：2
> 
> 时间：2012-07-06T14:17:58.500
> 
> 标签：javascript, callback, arguments

```
var data = [{offset: 2000, str:'foo'}, {offset: 4000, str:'bar'}];

for (var i=0; i<data.length; i++) {
    var x = data[i];
    setTimeout(function(){printStuff(x.str)}, x.offset);
}

function printStuff(str) {
    console.log(str);
} 
```

我期望得到`printStuff('foo')`2000 毫秒的偏移量和`printStuff('bar')`4000 毫秒的偏移量，但它两次都打印“条形图”。我不知道发生了什么，请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T14:19:52.063

做这个 ：

```
for (var i = 0; i < data.length; i++) {
    (function (x) {
        setTimeout(function () {
            printStuff(x.str)
        }, x.offset);
    })(data[i]);
} 
```

您的问题是调用函数时 x 在闭包中发生了变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T14:24:03.560

您可以使用免费提供闭包的功能迭代：

```
data.forEach( function( x ) {
      setTimeout( printStuff.bind(null, x.str), x.offset );
}); 
```

如果需要 oldIE 支持，则适用于所有人的垫片：

[为每个](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)

[绑定](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T14:24:08.070

`setTimeout`不会阻止代码继续执行，因此循环完成，到执行`setTimeout`回调时，'x' 的最新值是`data`数组中的第二个对象。

# jquery - iframe 上的 jquery 键绑定延迟问题？

> ID：11363985
> 
> 赞同：2
> 
> 时间：2012-07-06T14:18:03.257
> 
> 标签：jquery, iframe, key-bindings

我有一个应用程序，它有一个我已经构建的 iframed 所见即所得编辑器。iframe 内容来自同一个域，因此它不是 XSS 问题，但必须对内容进行 iframe 以保持样式表和内容沙盒化。

无论如何，我遇到的问题是我有某些热键要添加到 iframe 中。例如，点击“删除”会删除一个对象。点击 control+z 撤消最新的操作。很基本的东西。我已经完成了所有操作设置，然后在 iframe 加载的前 x 时间内工作得很好。有时我可以立即单击并使用键盘快捷键。其他时候，我必须在快捷方式出现之前单击 5-10 秒或编辑某些内容。一旦他们开始工作，他们就会工作得很好，但我们需要他们每次都全力以赴。这个运行的脚本被加载到 iframed 内容中。该脚本通过了验证并以它应该的所有其他方式工作。

我基本上发现这是一个问题，DOM 混淆了它应该从哪个文档中获取它的键绑定队列，但是还没有提出任何一致的解决方案。

这是我到目前为止所尝试的：

*   将选择器从 $(document) 更改为 $(parent.document) ：这产生了相反的效果 - 开始运行良好然后停止工作。

*   将 document 和 parent.document 作为选择器：相同的不稳定行为

*   绑定到 $(window) 而不是 $(document) ：同样不稳定的行为

*   将键绑定移动到延迟后调用的函数：这​​里不走运

*   调用一个函数来触发点击或关注 iframe 主体以查看是否会启动 jquery：这里也没有运气。

*   使用绑定功能（当前设置为 .keydown()） - 切换到 .on('keydown', .keypress 等，但没有运气

这似乎在所有浏览器中都发生了，但我在 Chrome 和 FF 最新版本中肯定看到过。

如果您需要，我可以发布我的代码的一些基本示例，但代码工作正常，我认为我要么绑定到错误的东西，要么有其他东西可能会捕捉到我遗漏的东西。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:41:24.660

想出了一个解决办法。每个浏览器都需要一些不同的东西才能使其正常工作。问题完全在于 iframe 文档不是 DOM 中的顶级文档，但是一旦您专注于 iframe，问题就消失了。这是我为每个浏览器所做的：

*   铬合金：

    ```
    $(parent.document).find("#iframe").focus();
    ```

*   Firefox：将焦点添加到 documentElement 并将触发器选择器从 $(document) 更改为

    ```
      $(document.documentElement).keydown().focus()
    ```

*   IE：

    ```
    $('body').focus();
    ```

希望对其他人有所帮助。

# c# - 将路径分隔符 csharp 替换为 matlab 路径

> ID：11363996
> 
> 赞同：0
> 
> 时间：2012-07-06T14:18:41.353
> 
> 标签：c#, matlab, c#-4.0, path

我正在 VisualStudio 10 中创建一个小型 WPF 程序，它在 matlab 中绘制一个图形，然后将此图形保存到目录中的一个文件中。

在 C# 中，我首先检索当前路径

> 路径 = System.IO.Directory.GetCurrentDirectory();

之后，我将它与 MLApp 包一起发送到 Matlab，让 matlab 保存在正确的目录中。

> matlabExe.Execute("cd" + 路径 + ";"); 其中 matlabExe 是 MLApp.MLApp 东西..

但是，由于 C# 有这种用双反斜杠 (\\) 保存路径的奇特方式，matlab 无法识别该路径！所以，我想会很容易，只要做

> path.Replace(System.IO.Path.DirectorySeparatorChar, System.IO.Path.AltDirectorySeparatorChar); 但可悲的是，这并没有起到作用！将手表添加到路径时，我发现执行此替换后没有任何变化..

我还尝试通过执行替换双分隔符“手动”

> path.Replace("\\", "/");

但也没有运气..我怎么能做到这一点？:(

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:40:47.147

C# 使用双 \ 作为转义序列

如果您在调试窗口中查看字符串，它将如下所示

```
 "C:\\Program Files\\MatLab\\MatLab.exe" 
```

但是当程序实际使用字符串时，它看起来像这样

```
 "C:\Program Files\MatLab\MatLab.exe" 
```

所以你确实需要做任何路径。替换它会自己处理它，这就是你遇到麻烦的原因。如果你想确保试试这个

```
 string path = "C:\Program Files\MatLab\MatLab.exe";
  int count = path.Count(s => s == '\'); 
```

即使在调试窗口中显示为 6，计数也将为 3。

**如果matlab不能识别路径还有另一个原因**

如果您想显示您尝试创建的确切路径以及 C# 吐出的确切路径，我可以帮助您

有关详细信息，请参阅[MSDN 上的转义序列](http://msdn.microsoft.com/en-us/library/h21280bw.aspx)

# fortran - 如何追踪潜在的未定义行为情况？

> ID：11363997
> 
> 赞同：1
> 
> 时间：2012-07-06T14:18:41.950
> 
> 标签：fortran

当指针关联时，我在解除分配时收到双重释放错误。我怀疑一些未定义的行为正在进行，但我不知道从哪里开始寻找它，或者如何。你如何追踪未定义的行为？

编译器是intel 12。我无法发布代码，因为它很大，我什至不确定问题的根源在于我的代码。它可能在同事的图书馆里。我试图用 gdb 做一些调试，但我没有走得太远。这是错误。

malloc：*** 对象 0x102302f20 的错误：未分配被释放的指针 ***在 malloc_error_break 中设置断点以进行调试

紧接其前的行是 print *, associated(pointer)，它打印为 true。

这是回溯

```
#0  0x00007fff9327b6c0 in malloc_error_break ()
#1  0x00007fff9327b805 in free ()
#2  0x0000000100d27470 in for_dealloc_allocatable ()
#3  0x0000000100506699 in sharedarraysmodule_mp_deleterealsharedarray2_ () at SharedArrays.f90:609
#4  0x00000001003bbc4e in gammaaggregatormodule_mp_deleteprivate_ () at GammaAggregator.f90:86
#5  0x0000000102300bc0 in ?? ()
Previous frame inner to this frame (gdb could not unwind past this frame) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T14:59:24.923

长评论，可能会指向（对不起，无法抗拒）答案......

为了迂腐，看起来您的编译器的最佳猜测是“未分配指针被释放”。但是在 Fortran 指针中只有 statuses `undefined`，`associated`因此`disassociated`错误消息可能来自对编译器链接到可执行文件的系统函数的调用。

话虽如此，我会寻找：

*   目标超出范围，而指向它的指针仍在范围内。Fortran 2003 标准状态（注释 16.13）

    来自模块程序单元的指针可以通过使用关联在子程序中访问。此类指针的生命周期大于子程序中声明的目标，除非保存此类目标。因此，如果这样的指针与本地目标相关联，则有可能当子程序定义的过程完成执行时，目标将不复存在，从而使指针“悬空”。本标准认为此类指针具有未定义的关联状态。它们既没有关联也没有分离。在重新建立其状态之前，不得在计划中再次使用它们。不要求处理器能够检测指针目标何时停止存在。

同一份文档还指出，传递给`associated`内在函数的指针的关联状态*不应是未定义*的，因此程序可能会撒谎并告诉您`associated(undefined_pointer)==.true.`.

*   通过超出范围或作为`deallocate()`调用的结果，正在释放的可分配目标。
*   指针在声明时被取消，例如`real, pointer :: rptr => null()`（这通常被认为是一件好事，您可能希望确保您的代码符合）。
*   指针在关联之前被无效，尽管根据标准我不认为使空指针无效是错误的。
*   指向指针的指针。

您报告的错误消息往往表明您遇到模块变量超出范围的情况，但是，正如您已经观察到的那样，很难确定。

如果这没有帮助，请联系英特尔技术支持，我发现他们非常有帮助，他们非常擅长发现代码中的问题。

# jquery - 使用 AJAX 和 ASP.NET WebService 的 JQuery UI 自动完成

> ID：11363999
> 
> 赞同：0
> 
> 时间：2012-07-06T14:18:51.947
> 
> 标签：jquery, asp.net, ajax, wcf, jquery-ui

使用 AJAX 实现 JQuery 自动完成

我很难使这个程序工作。我想要做的是使用 JQuery UI API 实现自动完成并从启用 AJAX 的 WCF 服务中获取结果。

我相信我的问题是到达 Web 服务（如果我将它实现为 asmx 而不是 svc 它似乎正在工作）

默认.aspx

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="SandwichServices._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
    <script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>
    <link href="Styles/jquery-ui-1.8.21.custom.css" rel="stylesheet" type="text/css" />
    <script language="javascript" type="text/javascript">
// <![CDATA[
        $(document).ready(function () {
            $(".searchinput").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        url: "~/CostService.svc/GetAllPredictions",
                        data: "{'keywordStartsWith':'" + request.term + "'}",
                        dataType: "json",
                        async: true,
                        success: function (data) {
                            response(data.d);
                        },
                        error: function (result) {
                            alert("Due to unexpected errors we were unable to load data");
                        }
                    });
                },
                minLength: 2
            });
        });

// ]]>
    </script>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
        <Services>
            <asp:ServiceReference Path="CostService.svc" />
        </Services>
    </asp:ScriptManager>
    <div class="ui-widget">
        <asp:Label ID="lblSearch" Text="Search" AssociatedControlID="txbSearchKeyword" runat="server"></asp:Label>
        <asp:TextBox ID="txbSearchKeyword" runat="server" CssClass="searchinput"></asp:TextBox>
        <asp:Button ID="Button2" Text="Go!" runat="server" OnClick="Search_Click" />
    </div>
    <asp:Literal ID="litStatus" runat="server"></asp:Literal>
</asp:Content> 
```

默认.aspx.cs

```
using System;

namespace SandwichServices
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Search_Click(object sender, EventArgs e)
        {
            litStatus.Text = "Search conducted for keyword: " + txbSearchKeyword.Text;
        }
    }
} 
```

成本服务.svc.cs

```
using System.Collections.Generic;
using System.Linq;
using System.ServiceModel;
using System.ServiceModel.Activation;

namespace SandwichServices
{
    [ServiceContract(Namespace = "SandwichServices")]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class CostService
    {
        private readonly List<string> _names = new List<string> // dummy list
                                         {
                                             "one",
                                             "one111",
                                             "one2222",
                                             "one4444",
                                         };

        [OperationContract]
        public IList<string> GetAllPredictions(string keywordStartsWith)
        {
            IList<string> output = (from c in _names
                                    where c.Contains(keywordStartsWith)
                                    select c).ToList();
            return output;
        }
    }
} 
```

网络配置：

```
<?xml version="1.0"?>

<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->

<configuration>
  <connectionStrings>
    <add name="ApplicationServices"
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />
  </connectionStrings>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />

    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
    </authentication>

    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership>

    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
      </providers>
    </profile>

    <roleManager enabled="false">
      <providers>
        <clear/>
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager>

  </system.web>

  <system.webServer>
     <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
  <system.serviceModel>
    <behaviors>
      <endpointBehaviors>
        <behavior name="SandwichServices.CostServiceAspNetAjaxBehavior">
          <enableWebScript />
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"
      multipleSiteBindingsEnabled="true" />
    <services>
      <service name="SandwichServices.CostService">
        <endpoint address="" behaviorConfiguration="SandwichServices.CostServiceAspNetAjaxBehavior"
          binding="webHttpBinding" contract="SandwichServices.CostService" />
      </service>
    </services>
  </system.serviceModel>
</configuration> 
```

**编辑：** 控制台说：

> “[发布 http://XXXXXX:7070/~/CostService.svc/GetAllPredictions](http://XXXXXX:7070/~/CostService.svc/GetAllPredictions) 404（未找到）”

我怎样才能达到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:28:25.600

让它变得 RESTful！

但首先将您的服务拆分为合同（接口）和实现（类）。

然后将此添加到您的 GetAllPredictions-Method

```
[WebInvoke(Method = "POST", 
                    ResponseFormat = WebMessageFormat.Json, 
                    UriTemplate = "predictions/{keywordStartsWith}")] 
```

这使它成为 RESTful

添加`webHttp`enpointPoint-Behaviour。

```
<behavior name="SandwichServices.CostServiceAspNetAjaxBehavior">
    <webHttp />
    <enableWebScript />
</behavior> 
```

然后尝试调用它：

```
$(document).ready(function () {
        $(".searchinput").autocomplete({
            source: function (request, response) {
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "/predictions/" + request.term,
                    async: true,
                    success: function (data) {
                        response(data.d);
                    },
                    error: function (result) {
                        alert("Due to unexpected errors we were unable to load data");
                    }
                });
            },
            minLength: 2
        });
    }); 
```

您可能需要删除以下行：

```
 <Services>
        <asp:ServiceReference Path="CostService.svc" />
    </Services> 
```