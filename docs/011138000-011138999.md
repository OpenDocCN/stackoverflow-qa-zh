# StackOverflow 问答 11138000-11138999

# java - Java - 偏好的存储结构？

> ID：11138002
> 
> 赞同：0
> 
> 时间：2012-06-21T12:19:40.243
> 
> 标签：java, data-structures

我需要做的是将偏好结构存储在对象中。是否有一种通常的模式如何在 Java 中保存属性，具有以下先决条件：

*   不同的数据类型可以显示为设置（布尔、整数、复选框）
*   不同的数据类型有不同数量的值（布尔有一个，复选框有很多）
*   不知道会有多少首选项条目存在。

    ```
     {TYPE;NAME;VALUE} 
            {TYPE;NAME;VALUE} 
            {TYPE;NAME;VALUE} 
    ```

例如：

```
 {CHECKBOXES;"Radio box choice"; { Red, White, Blue}}
            {BOOLEAN;"Hintergrund"; true}} 
            {INT;"Page number"; 34}} 
            {STRING;"App title";"Jenny"}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:51:19.190

*使用属性type*、*name*和*values*创建一个名为 Preference 的基本 JavaBean (POJO) 。为每个首选项类型创建 Preference 的子类，例如 CheckboxPref、BooleanPref 等。在这些子类中适当地覆盖行为。例如 CheckBoxPref 中的 setValue() 可能与 IntPref 中的 setValue() 具有不同的行为。

然后创建另一个名为 PreferenceManager 的类。在那里存储一个 Preference 集合，并公开诸如 loadPreferences(File preferenceFile)、setPreferenceValue(String name) 之类的方法。

PreferenceManager 也可以用作 FactoryMethod 来根据 Preference Type 创建正确的 Preference 子类。

不确定这是否是模式，但我就是这样做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:25:22.007

您可能想要使用 Java Preferences API：

[http://docs.oracle.com/javase/7/docs/api/java/util/prefs/Preferences.html](http://docs.oracle.com/javase/7/docs/api/java/util/prefs/Preferences.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:29:25.283

您可以创建一个类来表示一个属性。并在您的对象中使用列表。

```
class Property{

   enum dataType; //create a specific enum
   String name;
   Object value;

} 
```

如果你想更进一步，那么你可以从这个属性继承来添加一些类型的专门类，比如 BooleanProperty 或 StringProperty。

# xml - 属性上的 QXmlStreamReader 和空 namespaceUri()

> ID：11138009
> 
> 赞同：1
> 
> 时间：2012-06-21T12:20:27.960
> 
> 标签：xml, qt, xml-namespaces, qxmlstreamreader

这既是一个 Qt 问题，也是一个 XML 问题：为什么以下对元素`attr`属性的命名空间 uri 的测试会失败？`foo`

```
{
    const QString test("<foo xmlns='http://example.org/ns' attr='value'><empty/></foo>");

    QXmlStreamReader r(test);
    QVERIFY(r.namespaceProcessing());
    QVERIFY(r.readNextStartElement());
    QCOMPARE(r.name().toString(), QLatin1String("foo"));
    QCOMPARE(r.namespaceUri().toString(),
             QLatin1String("http://example.org/ns"));
    QVERIFY(!r.attributes().isEmpty());
    QCOMPARE(r.attributes().front().name().toString(),
             QLatin1String("attr"));

    // FAIL, namespaceUri() is empty:
    QCOMPARE(r.attributes().front().namespaceUri().toString(),
             QLatin1String("http://example.org/ns"));
} 
```

这是一个`QXmlStreamReader`错误，还是 XML 属性通常不在用 声明的命名空间中`xmlns`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-05T15:55:19.093

XML 属性不在用 . 声明的命名空间中`xmlns`。

[有同样的问题，并在 XML 命名空间规范中](https://www.w3.org/TR/REC-xml-names/#defaulting)找到了答案：

> 默认命名空间声明适用于其范围内的所有无前缀元素名称。默认命名空间声明不直接应用于属性名称；无前缀属性的解释由它们出现的元素决定。

# gnuplot - 围绕一个点画一个半径为 R 的圆

> ID：11138012
> 
> 赞同：15
> 
> 时间：2012-06-21T12:20:37.840
> 
> 标签：gnuplot, geometry

我正在使用 gnuplot，我想知道是否可以围绕给定点 (x,y) 绘制一个半径为 R 的圆？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T13:28:26.787

如果您不想绘制圆，可以使用该`set object circle`命令。你像这样使用它，例如：

```
set object X circle at axis 0,0 size scr 0.1 fc rgb "navy" 
```

这将在原点绘制一个深蓝色圆圈，半径为屏幕（画布）大小的 0.1。请注意，当您为圆指定位置/半径时，您必须指定您使用的坐标系：`first`对应于第一个 xy 坐标系，`scr`（缩写`screen`）是屏幕坐标。您可以通过查看绘制圆圈的文档来了解更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-11-08T19:13:26.863

> 现在，如果我有很多点（在每行是 xy 的 txt 文件中）并且我想为每个点绘制一个不同指定半径的圆。我是否应该为每个点 i 重复命令“设置对象 i 在 Xi,Yi 大小第一 Ri fc rgb “navy””？！

回答：不！绘图`with circles`在 gnuplot V4.4 (2010) 中可用。

`"Circles.dat"`

```
1 1 0.1
2 2 0.2
3 3 0.3
4 4 0.4
5 5 0.5
6 6 0.6 
```

**代码：**

```
plot "Circles.dat" u 1:2:3:1 w circles lc var notitle 
```

**结果：（**使用 gnuplot 4.4 创建）

[![在此处输入图像描述](../Images/57b42a4907904441d43558dd24ff2ede.png)](https://i.stack.imgur.com/LPt67.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-08T03:57:47.687

工作 gnuplot 脚本：

```
# tell gnuplot where we want to look at
set xrange [0:1]
set yrange [0:1]

# make a square plot
set size square

# create a black circle at center (0.5, 0.5) with radius 0.5
set object 1 circle front at 0.5,0.5 size 0.5 fillcolor rgb "black" lw 1

f(x) = x # we need to plot at lest one function
plot f(x) # show the stuff 
```

# sql - 如何编写sql查询以获取与数据库中数据最匹配的数据

> ID：11138014
> 
> 赞同：3
> 
> 时间：2012-06-21T12:20:42.917
> 
> 标签：sql, database

我在 AI 聊天机器人上工作。我需要 sql 查询从数据库中选择用户输入和数据库中文本最匹配的单行。（也匹配百分比 > %80）

例如：“你好”和“你好！” ，“嗨，你好吗”和“你好吗？”，“你叫什么名字？” “你叫什么名字？”

我的目的是在出现笔误时得到答案。提前感谢，对不起我的英语

机器人链接：http: [//developersland.net/chatbot/jessica.html](http://developersland.net/chatbot/jessica.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:43:29.407

在 google 上搜索一个 levenstein 距离算法实现（像[这样](http://www.artfulsoftware.com/infotree/queries.php#552)），然后

```
select text 
from mytable 
where levenshtein_ratio(text, 'text_to_compare') > 80 
limit 1 
```

# encryption - Arduino 上的 HTTPS 替代方案

> ID：11138017
> 
> 赞同：15
> 
> 时间：2012-06-21T12:20:47.810
> 
> 标签：encryption, https, arduino

我正在考虑在我正在进行的项目中使用 Arduino，但仍有一个问题悬而未决。

Arduino 将收集数据，并偶尔将它们发送到服务器。我希望能够保护数据传输。

我知道 Arduino 没有足够的处理能力来处理 HTTPS 加密，但我想知道这里是否可以使用可靠的替代方案。

你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T17:44:29.490

您可以在 arduino 中使用的最好的是 xxtea 加密。速度快但不是超级安全

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T07:45:56.727

查看 Microchip PIC 18x 和 24x 系列 uC。 [http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=2505¶m=en535724](http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=2505&param=en535724)

如果您正在寻找重型微型平台，请查看“Raspberry Pi”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T06:33:11.963

你可以看看这是 PIC32 Arduino 兼容[http://www.digilentinc.com/Products/Detail.cfm?NavPath=2,892,893&Prod=CHIPKIT-UNO32](http://www.digilentinc.com/Products/Detail.cfm?NavPath=2,892,893&Prod=CHIPKIT-UNO32)

# html - Vinaora 等简单网站的访客计数器

> ID：11138020
> 
> 赞同：2
> 
> 时间：2012-06-21T12:21:01.350
> 
> 标签：html, hitcounter

有没有人知道一个网站的访客计数器，它是在不使用 CMS（Joomla、Drupal）但使用简单的 HTML、CSS、JS、PHP 的情况下构建的？最好有一个像 Vinaora 访客柜台这样的 joomla 柜台，可以[在这里找到](http://extensions.joomla.org/extensions/site-management/analytics/visitors/2519)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:39:59.250

不知道任何不依赖数据库来存储信息并将其精美地呈现给访问者的东西。

可以像这样执行依赖于文本文件的解决方案：

```
<?php

  // file name and file path
  $fileName = 'counter.txt';
  $filePath = dirname(__FILE__).'/'.$fileName;

  /*
   * If the file exists
   */
  if (is_file($filePath)) {

    $fp = fopen($filePath, "c+");            // open the file for read/write
    $data = fread($fp, filesize($filePath)); // ready entire file to variable
    $arr = explode("\t", $data);             // create array

    // run by each array entry to manipulate the data
    $c=0;
    foreach($arr as $visit) {
      $c++;
    }

    // output the result
    echo '<div id="visits">'.$c.'</div>';

    // write the new entry to the file
    fwrite($fp,time()."\t");

    // close the file
    fclose($fp);

  /*
   * File does not exist
   */
  } else {

    $fp = fopen($filePath, "w"); // open the file to write
    fwrite($fp, time()."\t");    // write the file

    // output the data
    echo '<div id="visits">1</div>';

    // close the file
    fclose($fp);

  }

?> 
```

该解决方案使用 PHP [fwrite()](http://www.php.net/manual/en/function.fwrite.php)、[fread()](http://www.php.net/manual/en/function.fread.php)、[fopen()](http://php.net/manual/en/function.fopen.php)和[fclose()](http://php.net/manual/en/function.fclose.php)存储每次访问的 PHP [time(](http://php.net/manual/en/function.time.php) ) 。使用存储的时间，您可以执行一些计算并在访问板上显示您需要的详细信息。`\t`

上面的示例说明了所有这些，但仅显示了总访问量。

# c# - 处理工作线程抛出的主线程中的事件

> ID：11138022
> 
> 赞同：0
> 
> 时间：2012-06-21T12:21:06.077
> 
> 标签：c#, .net

我有一个抛出事件的工作线程，这些事件由常见的处理程序方法处理，实际上我想实现处理程序方法由创建包含抛出事件的工作线程的对象的线程执行。

我尝试了以下代码：

```
public partial class Form1 : Form
{
    public event EventHandler Tested;

    public Form1()
    {
        InitializeComponent();

        Tested += new EventHandler(Form1_Tested);
    }

    private void Form1_Tested(object sender, EventArgs e)
    {
        Text = "Test";
    }

    private void Form1_Shown(object sender, EventArgs e)
    {
        #region Test 1
        // Works normal in GUI-Thread directly
        Form1_Tested(this, EventArgs.Empty);
        #endregion

        #region Test 2
        // Works in worker thread and throws GUI exception 
        // because of foreign thread access
        new Thread(new ThreadStart(delegate()
            {
                OnTested(EventArgs.Empty);
            })).Start();
        #endregion

        #region Test 3
        // Works in worker thread and returns to GUI-Thread
        // to throw the event, so no need in eventhandler 
        // to use Control.Invoke();
        AsyncOperation asyncOp = AsyncOperationManager.CreateOperation(null);
        new Thread(new ThreadStart(delegate()
            {
                asyncOp.Post(new SendOrPostCallback(delegate(object obj)
                    {
                        OnTested(EventArgs.Empty);
                    }), null);
            })).Start();
        #endregion
    }

    protected virtual void OnTested(EventArgs e)
    {
        EventHandler tmpHandler = Tested;
        if (tmpHandler != null)
            tmpHandler(this, e);
    }
} 
```

我仔细查看了我使用的线程

```
Thread.CurrentThread.ManagedThreadId; 
```

在启动工作线程之前，我的主线程的 id 是“1”。在 UI 线程中，就在触发事件之前，线程 ID（工作线程）是“4”。现在仔细查看处理程序方法中的线程 ID，线程 ID 类似于“10” - 但我希望 ID 为“1”。我对此很困惑。

一般来说：我的代码片段是正确的方法吗，或者这样做的最佳实践是什么（甚至是一个工作示例）？

实际上，我想避免在工作线程上使用 Invoke。

问候，托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:56:42.307

您可以使用 Task<> 代替委托吗？我认为如果可以的话，它可能会为您简化事情。

基本上，如果您创建一个 Task<>，您可以通过访问 .Result 属性来访问该任务的结果，该属性将等待线程完成，然后给您返回码，或者 - 如果线程抛出异常 - 将在访问 .Result 属性的线程的上下文中重新抛出该异常。

（如果你的线程没有返回任何东西，你可以调用 Task.Wait() 而不是访问 .Result）

一些代码可能有助于解释我的意思：

```
using System;
using System.Threading;
using System.Threading.Tasks;

namespace Demo
{
    class Program
    {
        static void Main(string[] args)
        {
            var task = new Task<int>(() => test(1000, "Test1"));
            tryTask(task);

            task = new Task<int>(() => test(2000, "Test2"));
            tryTask(task);

            task = new Task<int>(() => test(1, "Test2"));
            tryTask(task);
        }

        static void tryTask(Task<int> task)
        {
            task.Start();

            try
            {
                Console.WriteLine("Task result = " + task.Result);
            }

            catch (AggregateException ex)
            {
                Console.WriteLine("Task threw an exception: " + ex.InnerException.Message);
            }
        }

        static int test(int value, string name)
        {
            Console.WriteLine("Starting thread " + name);
            Thread.Sleep(value);
            Console.WriteLine("Ending thread " + name);

            if (value == 1) // Magic number!
            {
                throw new InvalidOperationException("Test Exception");
            }

            return value;
        }
    }
} 
```

# telerik - 为什么我无法启动 Telerik 测试记录器？

> ID：11138026
> 
> 赞同：1
> 
> 时间：2012-06-21T12:21:16.317
> 
> 标签：telerik, automation, telerik-test-studio

我无法启动 Telerik Test Studio 录音机。我的机器符合要求。我根据需要配置了 IE。我找不到 WebUI Test Studio 记录器。

机器配置如下：

```
XP 2002 SP3
.Net 4.0 Installed 
```

日志如下：

```
06/21 17:47:11,Telerik.TestStudio.exe(2836:30),Error] <>c__DisplayClass6.<AttachRecorderToWindow>b__4() : EXCEPTION! (see below)
Outer Exception Type: System.TimeoutException
Message: Wait for condition has timed out
HRESULT: 0x80131505 (Official ID (if app.) = COR_E_TIMEOUT, Error Bit = FAILED, Facility = FACILITY_URT, Code = 5381)
Call Stack:
    at ArtOfTest.Common.WaitSync.CheckResult(WaitSync wait, String extraExceptionInfo, Object target)
    at ArtOfTest.Common.WaitSync.For[T](Predicate`1 predicate, T target, Boolean invertCondition, Int32 timeout, WaitResultType errorResultType)
    at ArtOfTest.Common.WaitSync.For[T](Predicate`1 predicate, T target, Boolean invertCondition, Int32 timeout)
    at ArtOfTest.Common.WaitSync.For[T](Predicate`1 predicate, T target, Int32 timeout)
    at Telerik.TestStudio.Web.WebRecorderWindowManager.WaitForRecorderCallBackReady()
    at Telerik.TestStudio.Web.WebRecorderWindowManager.<>c__DisplayClass6.<AttachRecorderToWindow>b__4() 
```

# jquery - jQuery UI DatePicker - 选择日期设置日期，月份，但当前年份

> ID：11138027
> 
> 赞同：1
> 
> 时间：2012-06-21T12:21:16.797
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我正在使用带有一年一个月选择框的 jQUI DatePicker (DP)。

1.  当 DP 打开时，您可以看到月份 (June)、年份 (1912)：

![在此处输入图像描述](../Images/9e4c7813ab2771a286aef1c118beba65.png)

2.  然后我选择日期（1912 年 6 月 7 日）：

![在此处输入图像描述](../Images/2467bc3e67bdd591322147e057713bdc.png)

3.  这就是我一直得到的（我在一年前发现了同样的错误）：

![在此处输入图像描述](../Images/5609e1479e273be00fb7d141f0041db3.png)

选择的日期是 Jun 7, **2012**而不是 Jun 7, **1912**。

是否有可能实现正确的年份（仅当您不更改年份时才有效 - 如果您更改年份，例如更改为 1950 年，则会得到 1950 年 6 月 7 日）

感谢离子推进的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:29:15.433

我之前尝试过使用该日期选择器，但没有成功。我不得不更改为[Primefaces 日历](http://www.primefaces.org/showcase-labs/ui/calendarMinMax.jsf)（[这是您想要实现的](http://www.primefaces.org/showcase-labs/ui/calendarLocalization.jsf)），这更容易，更好:)

# c# - 使用每行键将 DataTable 转换为 JSON

> ID：11138035
> 
> 赞同：5
> 
> 时间：2012-06-21T12:21:38.447
> 
> 标签：c#, json, serialization, datatable, json.net

我认为以下将是一项非常常见的任务，并假设会有一个简单的解决方案，但我找不到。

如果我有以下结构的数据表。

```
ID  Name    Active
ID1 John    TRUE
ID2 Bill    FALSE 
```

我想将它序列化为一个 JSON 对象，其中 ID 列是 JSON 对象中的一个节点，例如：

```
[
    {
        "ID1": {
            "Name": "John",
            "Active": "True"
        },
        "ID2": {
            "Name": "Bill",
            "Active": "False"
        }
    }
] 
```

我查看了 JSON.NET，但无法让它工作。编辑：我正在使用 C#

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-24T23:44:51.993

这对于 JSON.NET 来说非常简单。只需将您的数据表转换为等效的字典字典：

```
public Dictionary<string, Dictionary<string, object>> DatatableToDictionary(DataTable dt, string id)
{
    var cols = dt.Columns.Cast<DataColumn>().Where(c => c.ColumnName != id);
    return dt.Rows.Cast<DataRow>()
             .ToDictionary(r => r[id].ToString(), 
                           r => cols.ToDictionary(c => c.ColumnName, c => r[c.ColumnName]));
} 
```

然后调用：

```
JsonConvert.SerializeObject(DatatableToDictionary(dt, "ID"), Newtonsoft.Json.Formatting.Indented); 
```

这是完整的测试：

```
var dt = new DataTable("MyTable");
dt.Columns.Add("ID");
dt.Columns.Add("Name");
dt.Columns.Add("Active");

dt.LoadDataRow(new[] {"ID1", "John", "True"}, true);
dt.LoadDataRow(new[] {"ID2", "Bill", "False"}, true);

JsonConvert.SerializeObject(DatatableToDictionary(dt, "ID")); 
```

结果：

```
{
  "ID1": {
    "Name": "John",
    "Active": "True"
  },
  "ID2": {
    "Name": "Bill",
    "Active": "False"
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-12T13:02:28.930

使用 JSON.NET ( `Newtonsoft.Json.Linq`)

```
var obj = new JObject(
    dataTable.Rows.Cast<DataRow>()
         .Select(r => new JProperty(r["ID"].ToString(),
                 new JObject(
                     new JProperty("Name", r["Name"].ToString()),
                     new JProperty("Active", r["Active"].ToString())
                 )
             ))
);

// Convert the JObject to a JSON string
var json = obj.ToString(); 
```

# html - xml/html形式的数据是临时存储的吗？

> ID：11138036
> 
> 赞同：0
> 
> 时间：2012-06-21T12:21:39.870
> 
> 标签：html, forms, browser

例如：如果数据被输入到 HTML 表单的字段中，在按下“提交/输入”之前，数据存储在哪里。键盘输入的数据是否存储在某个文件/某个数据结构中。和我发这篇文章之前一样，这些句子暂时存放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:32:43.987

这个问题可能有几个答案。

*   如果浏览器开发人员想要存储它们，他会这样做。
*   如果您的问题是关于 stackoverflow 的，那么就会有草稿之类的东西。如今，许多网络表单都具有草稿保存功能。以便保存它的副本以供以后编辑/查看。

大多数情况下，您所做的一切都作为事件保存在事件记录器（微软）中，也许在 Linux 中也有类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:33:11.617

当您尚未提交表单时，输入中的文本会存储在您的内存中。输入允许用户通过类型或选择进行交互，用户交互不会对 DOM 进行实时修改。因此，在您提交/提交页面之前，文本一直存在于内存中。

类似于创建一个新的文本文件，输入它并且你还没有保存它。

提交时，无论服务器端语言处理请求，并使您输入的数据在 php 中的超级全局 $_POST 或 $_GET 中可用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:34:40.897

当您输入表单域时，数据存储在浏览器本身中（很可能只是在内存中）。

当您输入文本输入时，您实际上是在设置该HTML标记的`value`属性。`<input>`如果您想即时操作这些数据，您可以使用 JavaScript 之类的语言来访问这些数据。

# c - 32位机器中符号位如何表示

> ID：11138039
> 
> 赞同：1
> 
> 时间：2012-06-21T12:22:01.420
> 
> 标签：c, byte, bit

假设我在 32 位机器上工作。参考作为符号位的 MSB（最高有效位），我的问题是它如何代表这个架构。

我的理解是每个字节都有一个符号值。因此，如果是这种情况，那么将有四个有符号位。我在这里是正确还是遗漏了什么。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T12:24:54.567

字节是一组位。它们没有任何内在含义，构成它们的部分也没有。*仅当您选择将这四个字节解释*为有符号整数时才给出含义，然后这些位表示它们的含义，因为平台设计者是这样说的。

在几乎所有流行的架构中，整数都使用[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)表示。这意味着：

1.  整个值只有一个符号位（不是每个字节），但这是*事实上的*条件，仅仅是因为平台设计者*选择*使用二进制补码——而不是因为宇宙中所有 MSB 都有什么特别之处。
2.  无符号值根本没有符号位（显然）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T12:25:59.717

**标准没有指定**C 中整数的具体表示。然而，在实践中，大多数（几乎所有？）机器将使用[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)表示负数。*二进制补码本身*没有符号位，但整数的最高有效位将是 1 用于负数，0 用于非负数，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:25:06.967

在大多数架构上，您的 32 位有符号整数存储在[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)中：只有一个“符号位”（严格来说，这并不是一个真正的符号位）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T12:26:08.330

如果您使用有符号整数，那么编译器会将字节组视为一个整数，并且该组有一个符号位。在 C 术语中：当您使用 时`int16_t`，两个字节有一个符号位。对于`int32_t`，四个字节有一个。对于`signed char`，每个有符号字符 (=byte) 都有一个符号位。

# javascript - 使用 iphone 和 javascript 加密和解密 aes

> ID：11138041
> 
> 赞同：1
> 
> 时间：2012-06-21T12:22:21.123
> 
> 标签：javascript, ios, node.js, encryption, aes

我试图弄清楚在 ios 和 javascript 之间进行加密和解密。我一直在使用[http://dotmac.rationalmind.net/2009/02/aes-interoperability-between-net-and-iphone/](http://dotmac.rationalmind.net/2009/02/aes-interoperability-between-net-and-iphone/)和[http://cryptojs.altervista.org/secretkey/doc/doc_aes_nodejs.html](http://cryptojs.altervista.org/secretkey/doc/doc_aes_nodejs.html)为了看看他们是否会工作。我环顾四周并尝试了其他代码，但没有运气。

# google-maps-api-3 - Google map api v3“dragend”事件触发了不止一个

> ID：11138051
> 
> 赞同：4
> 
> 时间：2012-06-21T12:22:48.770
> 
> 标签：google-maps-api-3

目前我在我的谷歌地图（api v3）上有这个监听器事件：

```
google.maps.event.addListener(Map, 'center_changed', FixedMarkerInCenter);
google.maps.event.addListener(Map, 'zoom_changed', FixedMarkerInCenterZoom);
google.maps.event.addListener(Map, 'dragend', FindReverseGeocode }); 
```

问题是“dragend”事件触发了多次（至少四次），并且函数“FindReverseGeocode”发生了很多次。有谁知道这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T19:30:49.977

的确，这很烦人，但是……不要绝望——你可以用简单的 JavaScript 来修复它：

```
map.dragInProgress = false; //adding flag to already existing map object to keep DOM clean
google.maps.event.addListener(map, 'dragend', function() {
  if(map.dragInProgress == false) { //only first shall pass
    map.dragInProgress = true;
    window.setTimeout(function() {
        console.log('Note how you will see this console message only once.');
        //cast your logic here
        map.dragInProgress = false; //reset the flag for next drag
    }, 1000);
  }
}); 
```

简而言之，这允许您每秒仅接收一次 dragend 事件。确保你的脚本不会在你的逻辑中间死掉，否则第一个将是最后一个拖累。你可以使用 try/catch/finally 来克服这个问题。享受！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T17:22:21.910

我支持我的评论，但这里是一个基本地图，它实现`center_changed`（带有标记）和`dragend`地理编码器。

在 IE9、Chrome 19 和 Firefox 13 中，`dragend`每次拖动只会触发一次事件。你会注意到它`center_changed`被触发了很多次，即使拖动没有完成。这就是为什么我相信您的`FindReverseGeocode`方法正在被调用`FixedMarkerInCenter`。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js' type='text/javascript'></script>
<script type="text/javascript"></script>
</head>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">

var map;
var geocoder;

function initialize()
{
    var latlng = new google.maps.LatLng(47.6059399181561, 14.747812500000007);
    map = new google.maps.Map(document.getElementById('map'), {
      zoom:6,
      center:latlng,
      mapTypeId:google.maps.MapTypeId.HYBRID
    });

    google.maps.event.addListener(map, 'center_changed', placeMarker);
    google.maps.event.addListener(map, 'dragend', reverseLookup);

    geocoder = new google.maps.Geocoder();
}

function placeMarker()
{
    var center = map.getCenter();
    marker = new google.maps.Marker({
      map:map,
      position: center
    });
}

function reverseLookup()
{
    geocoder.geocode({'latLng': map.getCenter()}, function(results, status)
    {
      if (status == google.maps.GeocoderStatus.OK)
      {
        document.getElementById('area').value = 
        results[results.length-1].formatted_address + " " +
        map.getCenter() + "\r\n" + document.getElementById('area').value;
      }
    });
}

</script>
<body onLoad="initialize()">
<div id="map" style="width: 800px; height: 350px;"></div>
<textarea id='area' cols='80' rows='5'></textarea>
</body>
</html> 
```

# sql - 尝试创建新函数时 Sql 代码不起作用

> ID：11138053
> 
> 赞同：0
> 
> 时间：2012-06-21T12:22:54.787
> 
> 标签：sql, sql-server, tsql

我正在尝试使用以下代码在 SQL 中创建一个新函数：

```
CREATE FUNCTION PROFITIBLE_CATEGORIES (@startDate date, @endDate date)
RETURNS @ResultTable TABLE (Name varchar(20), AMOUNT INT)
AS BEGIN
    @ResultTable =  SELECT TOP 5 NAME, COUNT(*) AS AMOUNT
                    FROM dbo.PURCHASES P JOIN 
                        (SELECT PInC.NAME, PInC.[Walmart number],
                                 PInSP.[Purchase Id] AS PInSP_PURCHASE_ID,
                                 DPP.[Purchase Id] AS DPP_PURCHASE_ID

                         FROM dbo.PRODUCTS_IN_CATEGORIES PInC LEFT JOIN 
                         dbo.Products_in_self_pick_up_purchases PInSP ON 
                         PInC.[Walmart number] = PInSP.[Walmart number] LEFT JOIN
                         dbo.Delivered_products_purchases DPP ON 
                         DPP.[Walmart number] = PInC.[Walmart number]) X
                         ON (P.[Purchase Id] = X.DPP_PURCHASE_ID) 
                         OR (P.[Purchase Id] = X.PInSP_PURCHASE_ID)
                    WHERE [Date] < @endDate AND [Date] > @startDate
                    GROUP BY NAME
                    ORDER BY AMOUNT
    RETURN 
    END 
```

但我收到以下错误：

> 消息 102，级别 15，状态 1，过程 PROFITIBLE_CATEGORIES，第 4 行
> “@ResultTable”附近的语法不正确。

有人可以帮忙吗？这可能是语法错误，但我是新手。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:32:53.580

一种更有效的方法是内联表值函数：

```
CREATE FUNCTION dbo.PROFITIBLE_CATEGORIES
(
  @startDate date, 
  @endDate date
)
RETURNS TABLE
WITH SCHEMABINDING
AS
    RETURN 
    (
       SELECT TOP (5) NAME, COUNT(*) AS AMOUNT
       FROM dbo.PURCHASES P JOIN 
                       (SELECT PInC.NAME, PInC.[Walmart number],
                                 PInSP.[Purchase Id] AS PInSP_PURCHASE_ID,
                                 DPP.[Purchase Id] AS DPP_PURCHASE_ID

                         FROM dbo.PRODUCTS_IN_CATEGORIES PInC LEFT JOIN 
                         dbo.Products_in_self_pick_up_purchases PInSP ON 
                         PInC.[Walmart number] = PInSP.[Walmart number] LEFT JOIN
                         dbo.Delivered_products_purchases DPP ON 
                         DPP.[Walmart number] = PInC.[Walmart number]) X
                         ON (P.[Purchase Id] = X.DPP_PURCHASE_ID) 
                         OR (P.[Purchase Id] = X.PInSP_PURCHASE_ID)
                    WHERE [Date] < @endDate AND [Date] > @startDate
                    GROUP BY NAME
                    ORDER BY AMOUNT
    );
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:26:58.293

如果您要向表中插入行，那么试试这个

```
 CREATE FUNCTION PROFITIBLE_CATEGORIES (@startDate date, @endDate date)
   RETURNS @ResultTable TABLE (Name varchar(20), AMOUNT INT)
   AS BEGIN
    INSERT INTO @ResultTable
    SELECT TOP 5 NAME, COUNT(*) AS AMOUNT
                FROM dbo.PURCHASES P JOIN 
                    (SELECT PInC.NAME, PInC.[Walmart number],
                             PInSP.[Purchase Id] AS PInSP_PURCHASE_ID,
                             DPP.[Purchase Id] AS DPP_PURCHASE_ID

                     FROM dbo.PRODUCTS_IN_CATEGORIES PInC LEFT JOIN 
                     dbo.Products_in_self_pick_up_purchases PInSP ON 
                     PInC.[Walmart number] = PInSP.[Walmart number] LEFT JOIN
                     dbo.Delivered_products_purchases DPP ON 
                     DPP.[Walmart number] = PInC.[Walmart number]) X
                     ON (P.[Purchase Id] = X.DPP_PURCHASE_ID) OR (P.[Purchase Id] = X.PInSP_PURCHASE_ID)
                WHERE [Date] < @endDate AND [Date] > @startDate
                GROUP BY NAME
                ORDER BY AMOUNT
RETURN 
END 
```

# mysql - 如何将构造 MySQL synatx 的 Coldfusion 循环转换为 MySQL 存储过程？

> ID：11138057
> 
> 赞同：0
> 
> 时间：2012-06-21T12:23:05.353
> 
> 标签：mysql, stored-procedures, coldfusion, left-join, temp-tables

我正在尝试将产品搜索从 Coldfusion 转移到 MySQL 存储过程中。

搜索有大约 20 个标准，并且是它所在站点的普通功能，因此希望将其转换为存储过程，因为必须进行大量预编译。

我想我找出了大部分的搜索条件。我正在努力解决最后一个问题。

首先是冷融合部分：

```
<cfquery datasource="dtb" name="get_pricelists">
  SELECT sid, pricelist
  FROM buyerList AS b
  LEFT JOIN sellerList AS s ON s.sid = b.sid AND s.pass = b.pass
  WHERE b.bid = >parameter<
</cfquery> 
```

这将使用价目表和当前用户的相应价目表销售所有卖家。看起来像这样（在 MySQL 中我正在创建一个临时表）：

```
=====================
sellerID    pricelist
12345         NULL
23467         foo
99999         bar 
```

下一部分是我正在努力的地方：

```
<cfset misterLister = "LEFT JOIN preislisten p ON ">
<cfoutput query="get_pricelists" >
<cfif pricelist IS ''>
     <cfset misterLister = misterLister & '(p.sid = a.sid AND p.pricelist = "BASE" AND p.ean = a.ean AND p.iln = "#sellerID#") OR '>
  <cfelse>
     <cfset misterLister = misterLister & '(p.sid = a.sid AND p.pricelist = "#pricelist#" AND p.ean = a.ean AND p.iln = "#sellerID#") OR '>
  </cfif>
</cfoutput>
<cfset misterLister = misterLister & "(1=0)"> 
```

因此，对于上面的示例，这将遍历 3 个找到的卖家和价格表，以在 Coldfusion 中创建以下 MySQL 语法：

```
LEFT JOIN pricelists p ON
   (p.sid = a.sid AND p.pricelist = "BASE" AND p.ean = a.ean AND p.iln = 12345 ) OR 
   (p.sid = a.sid AND p.pricelist = "foo" AND p.ean = a.ean AND p.iln = 23467 ) OR 
   (p.sid = a.sid AND p.pricelist = "bar" AND p.ean = a.ean AND p.iln = 99999) OR 
   (1=0) 
```

然后将其传递到实际查询中。

**问题**：
我可以做第一部分并将其存储在临时表中。但是是否也可以在 MySQL 中创建第二部分，即遍历临时表的结果并从中构造上述语句？

我还是 MySQL 新手，所以我不知道从哪里开始。我正在查看准备好的语句和光标，但这些是唯一的选择吗？

**编辑：**
好的。我试图提出我的第一个准备好的陈述。看起来像这样：

```
SET @sql_text := '
DECLARE strCount   INT DEFAULT 1;

SELECT sid, ifnull(pricelist,"BASE"), count(*) AS recs
    FROM buyerList AS b
    LEFT JOIN sellerList AS s ON s.sid = b.sid AND s.pass = b.pass
    WHERE b.bid = ?

SET @string = "LEFT JOIN preislisten AS p";

lj:
  LOOP

    SET @string = CONCAT( @string, "ON (p.iln = a.iln AND p.preisliste = sid AND p.ean = a.ean AND p.iln = pricelist ) OR");

    SET strCount = strCount+1;
    IF strCount = recs
    THEN LEAVE lj;
    END IF;

END LOOP lj;

SET @string = CONCAT( @string,"(1=0)")
';
SET @param_iln = param_iln;
PREPARE stmt FROM @sql_text;
EXECUTE stmt using @param_iln;
DEALLOCATE PREPARE stmt; 
```

所以我在 prep 语句字符串中进行初始查询，然后希望能够遍历找到的价目表（它将超过 3 个卖家和价目表，所以我需要遍历一个循环，对吗？）。我将所有内容连接在一起。但如果这可行，我将如何将此字符串添加到我的实际搜索查询中，如下所示：

```
SELECT articles AS art 
   << insert left join here >>
    FROM bigtable AS bt
    WHERE
      a lot of other criteria 
```

我迷路了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:52:18.993

代替`SELECT sid, pricelist`

和`SELECT sid, ifnull(pricelist,'BASE')`

（sql server 读者，mysql 的`ifnull()`就像你的`isnull()`函数）

这使得价格表在为空时显示为“BASE”。

然后，您可以跳过`<cfif pricelist IS ''>`+`<cfelse>`

如果您使用的是 cf9+，您还可以使用速记连接`<cfset misterLister &= "value">`

通过构建动态 sql 并在存储过程中执行，您将获得更好的性能。更少的数据库往返。如果coldfusion 只需要和mysql 对话一次会更快。

你不需要一个临时表来循环。只需构建 sql 字符串即可直接在查询中执行。然后执行sql字符串。

不用担心游标——当您想要加载一些记录、循环它们并对每一行执行操作时，它们就可以使用。

准备好的语句：[http ://dev.mysql.com/doc/refman/5.1/en/sql-syntax-prepared-statements.html](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-prepared-statements.html)

存储过程：[http ://dev.mysql.com/doc/refman/5.1/en/create-procedure.html](http://dev.mysql.com/doc/refman/5.1/en/create-procedure.html)

您基本上想要一个提供参数的存储过程。它在内部构建了一个准备和执行的字符串。返回结果数据。

# python - IndexError：列表分配索引超出范围

> ID：11138062
> 
> 赞同：0
> 
> 时间：2012-06-21T12:23:26.880
> 
> 标签：python

```
class Packagings:
    def __init__(self):
        self.length=0
        self.deckle=0
        self.tmp=0
        self.flute=[]
        self.gsm=[]
        self.t_weight=0
        self.weight=0

    def read_values(self):
        print """Select Type Of Paper
               1.3 Ply
               2.5 Ply
               3.7 Ply
               """
        self.type=input("Enter the type:")
        self.l=input("Enter Length:")
        self.b=input("Enter Breadth:")
        self.h=input("Enter Height:")
        self.flap=input("Enter Flap:")

    def ply_read_values(self):
        for i in range(0,2):
            self.flute[i]=input("Enter flute:")
            self.gsm[i]=input("Enter Gsm:")
            self.weight[i]=self.tmp*(flute[i]*gsm[i])
            self.t_weight=self.t_weight+self.weight[i]

    def do_calc(self):
        self.length=(2*self.l+2*self.b+self.flap)/1000
        self.deckle=(float(self.h+self.b))/1000
        self.tmp=self.length*self.deckle

    def print_value(self):
        print self.length
        print self.deckle
        print self.t_weight

#Main Function
obj=Packagings()
obj.read_values()
obj.do_calc()
obj.ply_read_values()
obj.print_value() 
```

当我运行这个程序时，我收到以下错误。我找不到列表分配如何超出范围。你们能通过我的程序告诉我哪里出错了吗？对我来说，这份清单似乎很好。它是如何超出索引的？

```
Traceback (most recent call last):
  File "C:/Python27/packagings.py", line 47, in <module>
    obj.ply_read_values()
  File "C:/Python27/packagings.py", line 27, in ply_read_values
    self.flute[i]=input("Enter flute:")
IndexError: list assignment index out of range 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:24:42.397

`self.flute`被初始化为一个空列表，因此它没有可以重置的元素。使用`self.flute.append`和 类似地用于您的其他列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:26:59.137

假设您的代码，您需要替换`self.weight=0`为`self.weight=[]` 我认为这是您的问题

# ravendb - 为什么 RavenDB EmbeddableDocumentStore 依赖于 Raven.Database 程序集？

> ID：11138064
> 
> 赞同：1
> 
> 时间：2012-06-21T12:23:28.963
> 
> 标签：ravendb

我正在尝试`Raven.Client.Embedded.EmbeddableDocumentStore`在单元测试项目中使用（Build 960），如下所示：

```
private IDocumentStore CreateDocumentStore()
{
    var store = new EmbeddableDocumentStore
    {
            RunInMemory = true,
            Conventions = new DocumentConvention
            {
                    DefaultQueryingConsistency = ConsistencyOptions.QueryYourWrites,
                    IdentityPartsSeparator = "-"
            }
    };
    store.Initialize();
    IndexCreation.CreateIndexes(typeof (RavenIndexes).Assembly, store);
    return store;
} 
```

我通过 NuGet 安装了以下 RavenDB 组件：

*   RavenDB.嵌入式
*   RavenDB.Client

上面的代码失败，因为它找不到 Raven.Database 1.0.0.0 程序集。为了解决这个问题，我也通过 nuget 安装了 RavenDB.Database 包。这增加了一大堆我不想要的东西，考虑到这个包的[nuget 描述，这是可以预料的：](http://nuget.org/packages?q=RavenDB.Database)

> 如果您想扩展 RavenDB，请使用此包。如果您只想使用现有的 RavenDB 服务器，请不要使用此包，以便使用 RavenDB.Client 包中的客户端 API。

现在，当我尝试使用 NuGet 卸载 RavenDB.Database 包时，它告诉我不能：

> 卸载包：无法卸载“RavenDB.Database 1.0.960”，因为“RavenDB.Embedded 1.0.960”依赖于它。

那么该怎么办？我是否会弄乱我的 NuGet 纯度并`RavenDB.Smuggler`从我的单元测试项目中手动删除所有未使用的引用（等），只留下`RavenDB.Database`引用？还是我哪里出了问题？当然`EmbeddableDocumentStore`不需要我安装整个 RavenDB.Database 包。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T14:15:31.323

Embeddable 依赖于 Database，因为当您运行 Embeddable 时，您将在应用程序中运行整个数据库服务器引擎，并且 Database 包包含该引擎。

# java - 在Android中初始化本机库状态的正确方法

> ID：11138065
> 
> 赞同：1
> 
> 时间：2012-06-21T12:23:31.880
> 
> 标签：java, android, android-ndk

不幸的是，我必须在我的 Android 项目中使用具有内部状态的 C 库。该库包括状态维护函数`init()`和`release()`. 我写了一个包含静态`init()`和`release()`成员的包装类。`OnCreate()`然后我分别在主要活动中添加了对这些方法的调用`OnDestroy()`。

这就是我遇到问题的地方。当系统内存不足并且其他一些活动处于前台时，主要活动被杀死并被`release()`调用。因此，对本机库的所有后续调用都会失败。

问题是，如何确保主要活动永远不会被杀死？或者也许有比在活动的回调中调用本机函数更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:35:34.123

也许你应该看看[`Application`](http://developer.android.com/reference/android/app/Application.html)课堂。您可以覆盖它并`Application`在`Manifest`. `onCreate()`对您的`Application`班级进行初始化。

我不确定您的库实际上是做什么的，也许您可​​以详细说明，并且根据您的需要，您还可以考虑运行 a [`Service`](http://developer.android.com/reference/android/app/Service.html)，它`Android`比您的`Activity`.

# android - Android 强制关闭 java.lang.NullPointerException

> ID：11138066
> 
> 赞同：1
> 
> 时间：2012-06-21T12:23:40.453
> 
> 标签：android, forceclose

我在 logcat 中遇到了这个错误

```
06-21 11:58:27.275: E/AndroidRuntime(404): java.lang.RuntimeException: Unable to start activity ComponentInfo{App.Biodata/App.Biodata.viewdata}: java.lang.NullPointerException
06-21 11:58:27.275: E/AndroidRuntime(404):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
06-21 11:58:27.275: E/AndroidRuntime(404):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
06-21 11:58:27.275: E/AndroidRuntime(404):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
06-21 11:58:27.275: E/AndroidRuntime(404):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
06-21 11:58:27.275: E/AndroidRuntime(404):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-21 11:58:27.275: E/AndroidRuntime(404):  at android.os.Looper.loop(Looper.java:123)
06-21 11:58:27.275: E/AndroidRuntime(404):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-21 11:58:27.275: E/AndroidRuntime(404):  at java.lang.reflect.Method.invokeNative(Native Method)
06-21 11:58:27.275: E/AndroidRuntime(404):  at java.lang.reflect.Method.invoke(Method.java:521)
06-21 11:58:27.275: E/AndroidRuntime(404):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-21 11:58:27.275: E/AndroidRuntime(404):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-21 11:58:27.275: E/AndroidRuntime(404):  at dalvik.system.NativeStart.main(Native Method)
06-21 11:58:27.275: E/AndroidRuntime(404): Caused by: java.lang.NullPointerException
06-21 11:58:27.275: E/AndroidRuntime(404):  at App.Biodata.viewdata.onCreate(viewdata.java:42)
06-21 11:58:27.275: E/AndroidRuntime(404):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-21 11:58:27.275: E/AndroidRuntime(404):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
06-21 11:58:27.275: E/AndroidRuntime(404):  ... 11 more 
```

.java文件：

```
package App.Biodata;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.os.Bundle;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;

public class viewdata extends ListActivity {

private static String link_url = "http://10.0.2.2/biodatawebservice/view.php";

private static final String BIO_NAMA = "nama";
private static final String BIO_ALAMAT = "alamat";
private static final String BIO_TGLLAHIR = "tgl_lahir";
private static final String BIO_JK = "jk";
private static final String BIO_EMAIL = "email";    
private static final String BIO_PHONE = "phone";

JSONArray biodata = null;

ArrayList<HashMap<String, String>> daftar_biodata = new ArrayList<HashMap<String, String>>();

/** Called when the activity is first created. */
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewdata);

    JSONParser jParser = new JSONParser();

    JSONObject json = jParser.AmbilJson(link_url);

    try {
        biodata = json.getJSONArray("biodata");

        for(int i = 0; i < biodata.length(); i++){
            JSONObject bio = biodata.getJSONObject(i);

            String nama = bio.getString(BIO_NAMA);
            String alamat = bio.getString(BIO_ALAMAT);
            String tgl_lahir = bio.getString(BIO_TGLLAHIR);
            String jk = bio.getString(BIO_JK);
            String email = bio.getString(BIO_EMAIL);
            String phone = bio.getString(BIO_PHONE);

            HashMap<String, String> map = new HashMap<String, String>();

            map.put(BIO_NAMA, nama);
            map.put(BIO_ALAMAT, alamat);
            map.put(BIO_TGLLAHIR, tgl_lahir);
            map.put(BIO_JK, jk);
            map.put(BIO_EMAIL, email);
            map.put(BIO_PHONE, phone);

            daftar_biodata.add(map);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }
    this.adapter_listview();
}       

private void adapter_listview() {
    // TODO Auto-generated method stub
    ListAdapter adapter = new SimpleAdapter(this, daftar_biodata,
            R.layout.list_data,
            new String[] {  BIO_NAMA, BIO_ALAMAT, BIO_TGLLAHIR, BIO_JK, BIO_EMAIL, BIO_PHONE}, new int[] {
                    R.id.txtNama, R.id.txtAlamat, R.id.txtTgllahir, R.id.txtJK, R.id.txtEmail,R.id.txtPhone});

    setListAdapter(adapter);
    ListView lv = getListView();

}

} 
```

listactivity的xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView>

</LinearLayout> 
```

每个项目的xml：

```
<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingBottom="10dp" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingTop="5dp"
        android:text="Nama"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#FFF" />

    <TextView
        android:id="@+id/txtNama"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#333"
        android:text=" "
        android:textAppearance="?android:attr/textAppearanceMedium" />
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingBottom="10dp" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingTop="5dp"
        android:text="Alamat"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#FFF" />

    <TextView
        android:id="@+id/txtAlamat"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#333"
        android:text=" "
        android:textAppearance="?android:attr/textAppearanceMedium" />
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingBottom="10dp" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingTop="5dp"
        android:text="Tanggal Lahir"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#FFF" />

    <TextView
        android:id="@+id/txtTgllahir"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#333"
        android:text=" "
        android:textAppearance="?android:attr/textAppearanceMedium" />
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingBottom="10dp" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingTop="5dp"
        android:text="Jenis Kelamin"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#FFF" />

    <TextView
        android:id="@+id/txtJK"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#333"
        android:text=" "
        android:textAppearance="?android:attr/textAppearanceMedium" />
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingBottom="10dp" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingTop="5dp"
        android:text="Telepon"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#FFF" />

    <TextView
        android:id="@+id/txtPhone"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#333"
        android:text=" "
        android:textAppearance="?android:attr/textAppearanceMedium" />
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingBottom="10dp" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingTop="5dp"
        android:text="Email"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#FFF" />

    <TextView
        android:id="@+id/txtEmail"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#333"
        android:text=" "
        android:textAppearance="?android:attr/textAppearanceMedium" />
</LinearLayout>

</LinearLayout> 
```

我找不到这个应用程序有什么问题，谁能告诉我为什么这个应用程序强制关闭？我已经在这里阅读了一些答案，告诉它xml布局文件有问题，但仍然找不到解决方案

提前致谢。

## [解决了]

非常感谢stackoverflow.com成员帮助我，问题是这样的

> biodata = json.getJSONArray("biodata");

为空，因为我的 php 失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:26:17.577

`json is null`所以 NPE.You 无法从 JsonParser 中获取 JsonObject。

```
biodata = json.getJSONArray("biodata");//here json is null. 
```

并检查您的`json = jParser.AmbilJson(link_url);`

`ListView lv = getListView();`并且在 setAdapter 到列表视图之后没有使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:29:55.017

好吧，我认为你应该学会正确地阅读日志。从 logcat 告诉您的内容中检测问题更为重要。因此，您可以这样做：

首先，在 IDE 上启用行号。其次，看一下logcat中是如何描述问题的：

```
 java.lang.RuntimeException: Unable to start activity componentInfo{App.Biodata/App.Biodata.viewdata}: java.lang.NullPointerException 
```

所以在你的 viewdata 类中抛出了一个空指针异常。发生这种情况是因为您尝试从空对象访问方法。

三、继续查找问题原因：

```
 Caused by: java.lang.NullPointerException   E/AndroidRuntime(404):  at App.Biodata.viewdata.onCreate(viewdata.java:42). 
```

所以问题出在第 42 行的 viewdata.java 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:28:06.080

我认为下面的行有错误。

```
ListView lv = getListView(); 
```

所以请在下面使用。

```
ListView lv = (ListView) findViewById(R.id.list);

lv = getListView(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T12:28:51.727

您将活动扩展为列表活动，并且您尝试访问该制造商的 XML 布局。所以删除你的 setContentView(R.layout.viewdata);

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T12:30:22.967

你这里有错误

```
 biodata = json.getJSONArray("biodata"); 
```

你必须把条件

```
if(json!=null)
{
    biodata = json.getJSONArray("biodata");
} 
```

你`jParser.AmbilJson(link_url);`一定失败了

# python - 以字符串失败为条件的 IF

> ID：11138067
> 
> 赞同：-3
> 
> 时间：2012-06-21T12:23:47.067
> 
> 标签：python

我一直在处理我正在处理的简单代码时遇到问题。它会询问您的姓名，以及您今天过得怎么样，并且根据您的回答，它应该执行与该回答相关联的操作。感谢您提前提供的所有帮助。

```
import time
print "Hello."
time.sleep(.5)
print "What's your name?"
var = raw_input()
time.sleep(.3)
print "Hello", var
time.sleep(1)
print "How are you?"
i = 0
answer1 = False
answer2 = False
answer0 = False
repeat = True
while repeat == True:
        if i == 0:
                answer = raw_input()
        if answer == "Good" or "good":
                answer1 = True
        if answer == "Bad" or "bad":
                answer2 = True
        if answer is not "good" or "Good" or "ok" or "Ok" or "OK" or "Not so good" or "not so good" or "Not so good." or "not so good.":
                answer0 = True
        if answer2 == True:
                print "That sucks."
                time.sleep(1)
                print "Well that's end of my code", var
                time.sleep(1)
                print "See ya!"
                break
        if answer1 == True:
                print "That's awesome!"
                time.sleep(1)
                print "Well that's end of my code", var
                time.sleep(1)
                print "See ya!"
                break
        if answer0 == True:
                print "I'm sorry, I didn't understand you."
                time.sleep(1.5)
                print "Are you good, ok, or not so good?" 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-21T12:30:43.783

这些条件将始终为真，因为**非空字符串文字**在 python 中是真实的：

```
if answer == "Good" or "good":
if answer == "Bad" or "bad":
if answer is not "good" or "Good" or "ok" ...:
...
# is the same as
if (something == something_else) or (True) or (True) ... :` 
```

所以用以下代码重新编写该代码：

```
if answer in ("Good", "good"):
if answer not in ("good", "Good", "ok", ...):
.... 
```

或者更好的是，如果您想包含“GOOD”和其他案例变体：

```
if answer.lower() == "good":
if answer.lower() not in ("good", "ok", ...):
... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T12:30:02.600

这是错误的：

```
if answer == "Bad" or "bad": 
```

你可能的意思是：

```
if answer == "Bad" or answer == "bad": 
```

或者

```
if answer in ("Bad", "bad"): 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T12:30:24.440

正如评论所说，您应该更具体地说明出了什么问题，但下面这行肯定是：

```
if answer is not "good" or "Good" or "ok" or "Ok" or "OK" or "Not so good" or "not so good" or "Not so good." or "not so good." 
```

这应该看起来像

```
if answer not in ('good', 'Good', ...): 
```

此外，您`else`有时可能会发现从句很有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T12:32:35.377

用这些代替你的条件。

```
if i == 0:
        answer = raw_input().strip() #use strip(), because command prompt adds a \n after you hit enter
        if answer == ("Good") or answer ==("good"):
                answer1 = True
        if answer == "Bad" or answer =="bad":
                answer2 = True 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T12:34:31.640

如果您要使用逻辑运算符，请始终牢记您还需要将布尔值作为操作数。

意思是，在你的代码中

```
if answer == "Good" or "good": 
```

您正在尝试比较，`answer == "Good"`，它产生一个布尔值，和`"good"`，它基本上是一个字符串文字。

要解决这个问题，你需要重写你的条件

```
if answer == "Good" or answer == "good": 
```

# c++ - Visual Studio 2010 的 C++ 内存泄漏工具

> ID：11138069
> 
> 赞同：2
> 
> 时间：2012-06-21T12:23:52.320
> 
> 标签：c++, visual-studio-2010, visual-studio

任何人都可以建议我可以集成到 Visual Studio 2010 中的内存泄漏的好插件吗？任何建议都是好的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T12:29:50.863

您可以尝试使用[Visual Leak Detector](http://vld.codeplex.com/)。它虽然适用于 Visual C++。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:39:04.203

您可以尝试可以与 Visual Studio 集成的[BoundsChecker ！](http://www.componentsource.com/products/devpartner-visual-c-boundschecker-suite-visual-studio-named-users/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T13:39:50.417

您可以执行以下操作：

```
#ifdef _DEBUG
# define _CRTDBG_MAP_ALLOC 1 // better in project file in DEBUG mode
# include <crtdbg.h>
# include <new>
# define malloc(size)       _malloc_dbg(size,_CLIENT_BLOCK,__FILE__,__LINE__)
# define realloc(addr,size) _realloc_dbg(addr,size,_CLIENT_BLOCK,__FILE__,__LINE__)
# define free(addr)         _free_dbg(addr,_CLIENT_BLOCK)

void * __stdcall operator new ( size_t size, const char * filename, int linenumber )
{
  void * tmp = _malloc_dbg( size, _CLIENT_BLOCK, filename, linenumber );
  if ( tmp == NULL )
    throw std::bad_alloc;
  return tmp;
}
void * __stdcall operator new [] ( size_t size, const char * filename, int linenumber )
{
  void * tmp = _malloc_dbg( size, _CLIENT_BLOCK, filename, linenumber );
  if ( tmp == NULL )
    throw std::bad_alloc;
  return tmp;
}
// If you need, you could implement the nothrow version of new operator, too.
void __stdcall operator delete( void *p, const char * filename, int linenumber )
{
  _free_dbg(p,_CLIENT_BLOCK)
}
void __stdcall operator delete[]( void *p, const char * filename, int linenumber )
{
  _free_dbg(p,_CLIENT_BLOCK)
}
void __stdcall operator delete( void *p )
{
  _free_dbg(p,_CLIENT_BLOCK)
}
void __stdcall operator delete[]( void *p )
{
  _free_dbg(p,_CLIENT_BLOCK)
}
// if there is MFC, you could use MFC style DEBUG_NEW
# ifdef DEBUG_NEW
#  define new DEBUG_NEW
# else
#  define DEBUG_NEW_HEAP new( __FILE__, __LINE__ )
#  define new DEBUG_NEW_HEAP
# endif
#endif 
```

这样您就不需要分析器或任何额外的插件，Visual Studio 会自动为您收集内存泄漏（专业版就足够了）。

# ios - ios json从url读取代码

> ID：11138070
> 
> 赞同：-2
> 
> 时间：2012-06-21T12:24:02.413
> 
> 标签：ios, json

我需要从ios中的url读取json数据的代码（目标c）

如果你对我有简单的例子，那么它对我有好处

我想将 read json 方法添加到委托中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:53:23.267

```
-(NSString*)SendWebURL:(NSString*) posturl SendWebPostData:(NSString*) post1 {
NSString *data;
if([self ConnectToInternet]){
    NSData *postData = [post1 dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];  

    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:[[NSString alloc] initWithFormat:@"%@",posturl]]];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postData];

    NSError *error;
    NSURLResponse *response;    
    NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    data=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];

}
else
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Message" message:@"Internet connection is not available"  delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [alert show];
    [alert release];
}
return data;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:19:44.910

使用[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

以下是获取 JSON 的示例代码。

向您的 WS 发送电话

```
 NSURL *url = [NSURL URLWithString:@"Your URL"];
    ASIFormDataRequest *alertRequest = [ASIFormDataRequest requestWithURL:url];
    [alertRequest setRequestMethod:@"POST"];
    [alertRequest setDelegate:self];
    [alertRequest setTimeOutSeconds:60];
    [alertRequest setNumberOfTimesToRetryOnTimeout:4];
    [alertRequest addRequestHeader:@"Content-Type" value:@"application/json"];
    [alertRequest setDidStartSelector:@selector(getRequestStarted:)];
    [alertRequest setDidFinishSelector:@selector(getRequestFinished:)];
    [alertRequest setDidFailSelector:@selector(getRequestFailed:)];
    [alertRequest appendPostData:[jsonString  dataUsingEncoding:NSUTF8StringEncoding]]; 
    [alertRequest startAsynchronous]; 
```

获取 JSON

```
- (void)getRequestFinished:(ASIHTTPRequest *)request 
{
    [HUD hide: YES];

    NSString* jsonResponseString = [request responseString];
    NSLog(@"Response JSON for Authenticate User: %@", jsonResponseString);
    NSDictionary *aAlertResponse = [jsonResponseString objectFromJSONString];
    if ([[aAlertResponse valueForKey:@"status"] isEqualToString:@"success"]) 
    {
//From NSDictiornary you can get all json as name value pair..

    }
} 
```

希望这可以帮助..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-21T12:56:56.650

```
-(NSArray*)StringToArray:(NSString*)str seprator:(NSString*)sep{

NSArray *retArray = [str componentsSeparatedByString:[[NSString alloc] initWithFormat:@"%@",sep]];

return retArray;
}
-(NSString*)getValueFromIndex:(NSString*)indexVal withArray:(NSArray *)warray{
NSString *retVal = @"";
for(id list in warray)
{
    NSMutableArray *response = [self performSelector:@selector(StringToArray:seprator:) withObject:list withObject:@"\":\""];    

    NSString *str = [response objectAtIndex:0];

    str = [str stringByReplacingOccurrencesOfString:@"\"" withString:@""];
    if([str isEqualToString:indexVal])
    {
        retVal = [response objectAtIndex:1];           
        retVal = [retVal stringByReplacingOccurrencesOfString:@"\"" withString:@""];

        break;
    }
}
return retVal;
}
-(NSString*)getValue:(NSString*)val fromArray:(NSString*)arr{
NSString *retArray = @"";

NSMutableArray *mData = [self performSelector:@selector(StringToArray:seprator:) withObject:arr withObject:@"\",\""];

NSArray *m1;
for(int i=0;i<[mData count];i++)
{
    NSString *str=   [mData objectAtIndex:0];

    str=[str stringByReplacingOccurrencesOfString:@"\"\":" withString:@""];
    [mData removeObjectAtIndex:0];
    [mData insertObject:str atIndex:0];
    m1 = [self performSelector:@selector(StringToArray:seprator:) withObject:[mData objectAtIndex:i] withObject:@"\":\""];
    NSString *st = [[NSString alloc] initWithFormat:@"%@",[m1 objectAtIndex:0]];
    //UTF8

    st = [st stringByReplacingOccurrencesOfString:@"\"" withString:@""];

    if([st isEqualToString:val])
    {
        retArray = [[NSString alloc] initWithFormat:@"%@",[m1 objectAtIndex:1]];
        break;
    }
}
return retArray;
}
-(NSString*)getImageValue:(NSString*)val fromArray:(NSString*)arr{
//NSString *retArray = @"";

NSArray *mData = [self performSelector:@selector(StringToArray:seprator:) withObject:arr withObject:@","];

NSArray *m1;
//for(int i=0;i<[mData count];i++)
//{
m1 = [self performSelector:@selector(StringToArray:seprator:) withObject:[mData lastObject] withObject:@"image"];
NSString *st = [[NSString alloc] initWithFormat:@"%@",[m1 objectAtIndex:1]];
st= [st stringByReplacingOccurrencesOfString:@"\":\"" withString:@""];    
NSLog(@" Image string %@",st);
//UTF8

// st = [st stringByReplacingOccurrencesOfString:@"\"" withString:@""];

//if([st isEqualToString:val])
//{
//retArray = [[NSString alloc] initWithFormat:@"%@",[m1 objectAtIndex:1]];
//break;
//}
//}
NSLog(@"st %@",st);
return st;
} 
```

# java - Java中的地理位置IP

> ID：11138071
> 
> 赞同：0
> 
> 时间：2012-06-21T12:24:04.587
> 
> 标签：java, geolocation, ip

有没有办法从IP地址获取国家，城市（通常：地理位置信息）。请注意，我的应用程序是 java。

我访问并尝试了许多 Web 服务，但没有找到合适的，我更喜欢自己编写。此外，我发现了一些 CSV 数据库，但这个解决方案根本不是可取的。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T12:29:21.180

您只需要MaxMind 公司提供的[GeoIP 。](http://dev.maxmind.com/geoip/)

他们提供[免费的 GeoIP2 数据库 - GeoLite2](http://dev.maxmind.com/geoip/geoip2/geolite2/)和几个[GeoIP2 API](http://dev.maxmind.com/geoip/geoip2/downloadable/#MaxMind_APIs)（感谢 karel），包括用于读取数据库文件的 Java API。

*   [文件](http://maxmind.github.io/GeoIP2-java/)
*   [Java API](http://maxmind.github.io/GeoIP2-java/doc/v2.1.0/overview-summary.html)
*   [可下载的 Java 库](https://github.com/maxmind/GeoIP2-java/releases)
*   [可以从 maven.org 下载 Java 库](http://search.maven.org/#search|ga|1|com.maxmind)，我最喜欢 :)，您需要同时下载[com.maxmind.db](http://search.maven.org/#search|ga|1|g%3A%22com.maxmind.db%22)和[com.maxmind.geoip2](http://search.maven.org/#search|ga|1|g%3A%22com.maxmind.geoip2%22)。

在 GeoIP2 之前，有 GeoIP，现在他们称之为[GeoIP Lecacy](http://dev.maxmind.com/geoip/legacy/)，[免费数据库](http://dev.maxmind.com/geoip/legacy/geolite/)和[可从 maven.org](http://search.maven.org/#search|ga|1|g%3A%22com.maxmind.geoip%22)或[github](https://github.com/maxmind/geoip-api-java/releases)下载的 Java 库仍然可用。

GeoIP Lecacy 将来可能会死，但是，现在，因为 GeoIP2 不提供 Java API 来读取数据库信息（例如**GEO-533LITE 20150303 Build 1 Copyright (c) 2015 MaxMind Inc All Rights Reserved**），所以我仍然在我的网站上使用它。我在 IRC 机器人中使用 GeoIP2 以从 GeoIP2 的多语言功能中受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:07:07.767

每个国家/地区都有几个 IP 范围。

我不知道它的 Java 实现，但您可以使用[http://services.ce3c.be/ciprg/](http://services.ce3c.be/ciprg/)的输出并创建自己的代码，根据 IP 地址给出国家/地区。

# javascript - 在多个 div 之间切换可见性

> ID：11138075
> 
> 赞同：0
> 
> 时间：2012-06-21T12:24:21.773
> 
> 标签：javascript, jquery

我试图找到最简单的 JS 解决方案，最好是 jQuery，以完成以下任务：我有许多 div，它们都具有相同的类，我想简单地切换每个的可见性，一次一个。

```
<a href="#" id="toggle-trigger">Toggle Div Visibility</a>    
<div class="slide" id="slide-one"></div>
<div class="slide" id="slide-two"></div>
<div class="slide" id="slide-three"></div>
<div class="slide" id="slide-four"></div>
<div class="slide" id="slide-five"></div> 
```

默认情况下，第一个 div 始终通过 CSS 可见。

```
.slide{
display:none;
}
#slide-one{
display:block;
} 
```

除了在两个元素之间切换，我找不到任何东西，而不是多个项目。如果我能在别处找到答案，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T12:34:45.577

像这样的东西？

```
 ​$(​'#toggle-trigger')​​​​​​​​​​.click(function()
  {
    var $Current = $('.slide:visible');
    var $Slides = $('.slide');
    var $Next = $Current.next();
    if ($Next.length == 0) $Next = $Slides.first();
    $Slides.hide();
    $Next.show();
  }); 
```

我为它制作了一个 JSFiddle：http: [//jsfiddle.net/uxqBx/](http://jsfiddle.net/uxqBx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:51:46.127

即使 Wivlaro 给出了答案，这里也有不同的方式，使用类作为活动元素而不是`:visible`伪选择器。

[jsfiddle 上的示例](http://jsfiddle.net/CHRWr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:29:27.273

尝试：

```
$('.slide').each(function(){
    $(this).show().prev().hide();
}); 
```

或者，如果您想计时：

```
$('.slide').each(function(i){
    var elt = this;
    setTimeout(function(){$(elt).show().prev().hide()},i*1000);
}); 
```

***错误的答案***

* * *

现在作为幻灯片：

```
var current;
$(function(){
     current = $('.slide').first();
     SetInterval(function(){
         var next = $(current).next('.slide');
         if(next.length == 0)
                 current = $('.slide').first();
         $(current).hide();
         $(next).show();
     },1000); 
```

编辑：添加切换，我以为你希望 div 一个接一个地显示，但保持可见性。现在它应该切换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T12:29:50.597

抱歉，出了点问题，我发晚了。- [http://jsfiddle.net/ZEBza/](http://jsfiddle.net/ZEBza/)

```
$("#toggle-trigger").click(function() {
    var opened="";
    $(".slide").each(function(i, el) {
      console.log(opened);
      var pass = true;
      if(opened!="")
      {
         $(el).css("display", "block");
         opened = "";
         pass = false;
      }
      if($(el).css("display")=="block" && pass)
      {
         opened = $(el).attr("id");
         $(el).css("display", "none");
      }
    });
  if(opened!="")
  {
      $(".slide:first").css("display", "block");
  }
}); 
```

# java - 未经用户同意，如何在 ICS 上安装 (x509 / pk12) 证书？

> ID：11138088
> 
> 赞同：3
> 
> 时间：2012-06-21T12:25:12.447
> 
> 标签：java, android, certificate, android-4.0-ice-cream-sandwich

对于我正在开发的应用程序，我需要能够在他或她不知情的情况下安装 CA 和用户证书和私钥。

我将拥有完整的系统特权，并且可以公平地假设用户在此之前将拥有密码。如果是 CA 证书，我将拥有 x509，如果是用户证书 + 私钥文件，我将拥有 pk12，如果是用户证书 + 私钥，我将拥有密码。我需要这样做才能自动设置 WPA-EAP wifi 配置，并且最好我希望在员工不必注意任何事情的情况下发生这种情况。

如果有人也知道如何列出所有已安装的证书，我将不胜感激。

我已经检查了一整天，并使用**keystore_cli**进行了一些测试，但没有成功，而且我还通读了 CertInstaller 代码，但没有得到任何更明智的结果。那里的所有东西都是包范围的，所以我不能直接调用这些方法，+ 它似乎将东西发送到更远的地方 com.android.settings"、"com.android.settings.CredentialStorage"。

任何建议都会非常棒。

* * *

**编辑**对于那些想知道的人，这是我使用 CA 证书的方式。应用程序需要能够以系统用户身份运行（`android:sharedUserId="android.uid.system"`在 android manifest 中）。

```
 // Android...why do you enjoy doing my life so difficult...
            try {
                Class<?> keyStoreClass = WifiConfiguration.class.getClassLoader().loadClass("android.security.KeyStore");

                Method getInstanceMethod = keyStoreClass.getMethod("getInstance");
                Object keyStore = getInstanceMethod.invoke(null);

                Log.d("DeviceManager", "Got keystore" + keyStore.toString());

                // Put(Key, Value)
                Method putCertificateMethod = keyStoreClass.getMethod("put", String.class, byte[].class);

                Log.d("DeviceManager", "Putting...");

                RandomAccessFile file = new RandomAccessFile("/data/ca.crt", "r");
                byte[] b = new byte[(int)file.length()];
                file.read(b);
                byte[] cacert = b;

                Log.d("DeviceManager", "Certificate is bytes long: " + b.length);

                putCertificateMethod.invoke(keyStore, "CACERT_name", cacert);

            } catch (ClassNotFoundException e) {
                e.printStackTrace();
            } catch (IllegalArgumentException e) {
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            } catch (InvocationTargetException e) {
                e.printStackTrace();
            } catch (NoSuchMethodException e) {
                e.printStackTrace();
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:26:20.000

幸运的是，这在库存设备上是不可能的。否则，任何流氓应用都可以在未经用户同意的情况下安装 CA 证书。如果您有少量设备，则可能需要预先配置它们。至于 PKCS#12 文件，它们受密码保护，因此需要有人输入密码。

不确定“完全系统权限”是什么意思，但是如果您可以将应用程序与平台代码链接并使用系统证书对其进行签名，则可以`KeyChainService`直接调用方法。这将允许您安装证书。此外，CA 证书只是存储为文件，因此您可以将它们复制到正确的位置。这里的一些细节：http: [//nelenkov.blogspot.jp/2011/11/ics-credential-storage-implementation.html](http://nelenkov.blogspot.jp/2011/11/ics-credential-storage-implementation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-21T12:09:04.643

以下方法将使用 CA 证书和用户证书配置 WPA/EAP-TLS wifi 配置。您也可以将它用于其他 EAP 配置。

```
公共静态无效createEapConfig（上下文上下文，字符串ssid，字符串密码，布尔自动连接，布尔隐藏网络，
                                   整数 eapMethod、整数 phase2、字符串身份、字符串匿名身份、字符串 caCertificateData、
                                   字符串 clientCertificateData，字符串 clientCertPass) {
    if (ssid == null || eapMethod == null) {
        返回;
    }
    WifiManager wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);
    布尔连接 = 自动连接；
    布尔 isWifiReceiverRegistered = false;
    尝试 {
        Logger.logEnteringOld();

        WifiConfiguration 配置 = 新 WifiConfiguration();
        配置.SSID = "\"" + ssid + "\"";
        config.hiddenSSID = hiddenNetwork;//false; //隐藏网络总是设置为假。
        config.status = WifiConfiguration.Status.ENABLED;
        config.priority = 40;
        尝试 {
            wifiManager.getClass().getMethod("setWifiApEnabled", WifiConfiguration.class, boolean.class).invoke(wifiManager, config, false);
        } 捕捉（异常 e）{
            Logger.logError(e);
        }
        Settings.isWifiHotspotEnabled(false);
        如果（！wifiManager.isWifiEnabled（））{
            wifiManager.setWifiEnabled(true);
            线程.sleep(5000);
        }

        如果（连接）{
            lastActNetId = wifiManager.getConnectionInfo().getNetworkId();
            wifiManager.disableNetwork(lastActNetId);
            wifiManager.disconnect();
        }
        config.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_EAP);
        config.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.IEEE8021X);

        // 设置默认值
        if (phase2 == null) phase2 = WifiEnterpriseConfig.Phase2.NONE;
        如果（身份==空）身份=“”；
        if (anonymousIdentity == null) 匿名身份 = "";
        if (caCertificateData == null) caCertificateData = "";
        if (clientCertificateData == null) clientCertificateData = "";
        if (Build.VERSION.SDK_INT >= 18) {
            如果（Util.isNullOrEmpty（密码））{
                config.enterpriseConfig.setPassword(密码);
            }

            config.enterpriseConfig.setEapMethod(eapMethod);

            如果（阶段2！= null）{
                config.enterpriseConfig.setPhase2Method(phase2);
            }
            if (!Util.isNullOrEmpty(identity)) {
                config.enterpriseConfig.setIdentity(identity);
            }
            如果（！Util.isNullOrEmpty（anonymousIdentity））{
                config.enterpriseConfig.setAnonymousIdentity(anonymousIdentity);
            }
            输入流是 = null;
            如果（！Util.isNullOrEmpty（caCertificateData））{
                尝试 {
                    byte[] decodedCaCert = Base64.decode(caCertificateData);
                    //is = new FileInputStream(Environment.getExternalStorageDirectory()+"/local-root(1).cer" );
                    CertificateFactory cf = CertificateFactory.getInstance("X.509");
                    尝试 {

                        is = new ByteArrayInputStream(decodedCaCert);
                        X509Certificate caCert = (X509Certificate) cf.generateCertificate(is);
                        config.enterpriseConfig.setCaCertificate(caCert);
                    } 捕捉（CertificateException ex）{
                        Logger.logError(ex);
                    } 最后 {
                        如果（是！= null）{
                            is.close();
                        }
                    }
                } 捕捉（可投掷的 t）{
                    Logger.logError(t);
                }
            }
            if (!Util.isNullOrEmpty(clientCertificateData) && !Util.isNullOrEmpty(clientCertPass)) {
                尝试 {
                    byte[] decodeClientCert = Base64.decode(clientCertificateData);
                    KeyStore p12 = KeyStore.getInstance("pkcs12");
                    is = new ByteArrayInputStream(decodedClientCert);
                    //is = new FileInputStream(Environment.getExternalStorageDirectory()+"/createdDERCert(1).pfx");
                    p12.load(is, clientCertPass.toCharArray());
                    枚举别名 = p12.aliases();
                    for（字符串别名：Collections.list（别名））{

                        如果（别名 == null）{
                            继续;
                        }

                        PrivateKey privateKey = (PrivateKey) p12.getKey(alias, clientCertPass.toCharArray());
                        if (privateKey == null) {
                            继续;
                        }

                        X509Certificate clientCert = (X509Certificate) p12.getCertificate(alias);

                        if (clientCert != null) {
                            config.enterpriseConfig.setClientKeyEntry(privateKey, clientCert);
                        }
                    }
                } 捕捉（可投掷的 t）{
                    Logger.logError(t);
                } 最后 {
                    如果（是！= null）{
                        尝试 {
                            is.close();
                        } 捕捉（IOException e）{
                            e.printStackTrace();
                        }
                    }
                }
            }
        }

        int networkId = -1;
        networkId = wifiManager.addNetwork(config);

        wifiManager.enableNetwork(networkId, true);
        wifiManager.saveConfiguration();

        如果（连接）{
            wifiManager.reconnect();
            IntentFilter filter = new IntentFilter();
            filter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);
            Settings.cntxt.registerReceiver(wifiReceiver, filter);
            isWifiReceiverRegistered = true;
            线程.sleep(15000);
        }
    } 捕捉（InterruptedException 即）{
        if (NetworkStateReceiver.activeConnection(Settings.cntxt)) {
            lastActNetId = wifiManager.getConnectionInfo().getNetworkId();
        }
    } 捕捉（异常前）{
        Logger.logError(ex);
    } 最后 {
        //注销wifi状态接收器
        if (connect && isWifiReceiverRegistered) {
            isWifiReceiverRegistered = 假；
            Settings.cntxt.unregisterReceiver(wifiReceiver);
        }
    }

    Logger.logEnteringOld();
}

```

# java - 如果我们一开始不知道字符串的数量，如何创建动态字符串数组？

> ID：11138090
> 
> 赞同：5
> 
> 时间：2012-06-21T12:25:18.247
> 
> 标签：java

我有一个`HashMap<String, String>`. 如果我想创建 的字符串数组`hashmap.values()`，我们可以将其创建为

```
String[] strArray = new String[hashmap.size()] 
```

但我的问题是，如果 hashmap 值包含“A，B，C”，那么我需要将 A、B 和 C 添加到 strArray。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-21T12:26:57.153

使用`ArrayList`.

`List<String> myList = new ArrayList<String>();`

无论您的尺寸是多少，您`HashMap`都可以轻松地使用[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html).

如果你需要一个数组，你可以使用

```
String[] arr = myList.toArray(new String[myList.size()]); 
```

当你完成时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:32:32.857

您可以在需要数组时获取值的副本。

```
Map<Double, String> map = ...
String[] values = map.values().toArray(new String[map.size()]); 
```

如果您更改地图（即使大小没有改变），数组也不会改变，您需要再复制一份。这些值需要是唯一的吗？

> 所以我需要用值（A，B，C，P，Q，R ...，Z）创建字符串数组。

在这种情况下，您似乎想要执行以下操作。

```
Map<Double, String> map = ...
List<String> valueList = new ArrayList<>();
for(String value: map.values())
   valueList.addAll(Arrays.asList(value.split(",")));
String[] values = valueList.toArray(new String[valueList.size()]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:28:17.470

它需要是一个数组吗？使用 Maps，您可以获得值集的键。

# objective-c - Touch Up Inside 不能与 UISlider 一起使用

> ID：11138091
> 
> 赞同：1
> 
> 时间：2012-06-21T12:25:21.307
> 
> 标签：objective-c, xcode, ios5, uislider

我已经将我的 UISlider 与两种方法联系起来——Touch Up Inside 和 Value Changed。第一个在拖动完成后更新，第二个在拖动过程中更新。当我用滑块在屏幕上拖动“长”距离时，一切都很好。当我一步一步拖动时，Value Changed 工作正常，但 Touch Up Inside 并没有……有人经历过同样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:24:45.157

问题出在手势识别器上。当我实现了在滑块上识别“点击”的方法以使滑块快速移动到该位置而无需将其碎片化到那里时，我忘记使用 if-else 语句将其与内部修饰分开。

```
UISlider* s = (UISlider*)gestureRecognizer.view;
if (s.highlighted) {
    switch (s.tag) {
        case 1:
            [_cpuStepper setValue:[s value]];
            break;
        case 2:
            [_ramStepper setValue:[s value]];
            break;
        case 3:
            [_hddStepper setValue:[s value]];
            break;
        default:
            break;
    }
    [self updatePrice];
    return; // on thumb
} 
```

现在都在工作。

# html - 使用边距：0 auto，Div 仍未居中

> ID：11138099
> 
> 赞同：1
> 
> 时间：2012-06-21T12:25:52.317
> 
> 标签：html, css

我试图将一个容器 div 放在我的背景上，我通常对此完全没有问题。我通常只添加css“margin：0 auto;”。对于这个网站，我不知道为什么，它可能是 MIME 类型或 CSS3 或其他东西......但 div 不会居中。

这是我的HTML...

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HEAD>
<TITLE>title</TITLE>
<link rel="stylesheet" type="text/css" href="style.css" />

    <BODY>
        <div class="container">
        </div>
    </BODY>
</HTML> 
```

这是我的 CSS ......

```
body {
    background-image: linear-gradient(left top, #000000 30%, #0000FF 90%);
    background-image: -o-linear-gradient(left top, #000000 30%, #0000FF 90%);
    background-image: -moz-linear-gradient(left top, #000000 30%, #0000FF 90%);
    background-image: -webkit-linear-gradient(left top, #000000 30%, #0000FF 90%);
    background-image: -ms-linear-gradient(left top, #000000 30%, #0000FF 90%);
    background-image: -webkit-gradient(linear, left top, right bottom, color-stop (0.3, #000000), color-stop(0.9, #0000FF));
    height: 100%;
    width: 100%;
    margin: 0;
    width: 0;
}

.container 
{
    margin-left: auto;
    margin-right: auto;
    position: relative;
    width: 940px;
    z-index: 0;
    width: 940px;
    top: -10px;
    height: 80%;
    background-color: #F0F8FF;
    border-radius: 0px 0px 35px 35px; 
    -moz-border-radius: 0px 0px 35px 35px; 
    -webkit-border-radius: 0px 0px 35px 35px; 
    border: 10px solid #696969;
} 
```

请忽略我的 CSS 上糟糕的格式。这不是它在文件中的方式，这只是复制它的错误。我最初测试的浏览器也是 Chrome。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T12:29:19.903

删除`width: 0;`from `body`in css 规则，如下所示：

```
body {
    background-image: linear-gradient(left top, #000000 30%, #0000FF 90%);
    background-image: -o-linear-gradient(left top, #000000 30%, #0000FF 90%);
    background-image: -moz-linear-gradient(left top, #000000 30%, #0000FF 90%);
    background-image: -webkit-linear-gradient(left top, #000000 30%, #0000FF 90%);
    background-image: -ms-linear-gradient(left top, #000000 30%, #0000FF 90%);
    background-image: -webkit-gradient(linear, left top, right bottom, color-stop (0.3, #000000), color-stop(0.9, #0000FF));
    height: 100%;
    width: 100%;
    margin: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:31:55.657

您没有`HTML`标签来启动文档，确定这可能会产生问题

# regex - Notepad++：使用正则表达式查找和替换

> ID：11138102
> 
> 赞同：2
> 
> 时间：2012-06-21T12:25:57.263
> 
> 标签：regex, notepad++

如果这对您来说听起来很愚蠢，我深表歉意，但我需要找到`__( 'anyTextHere', 'foo' )`所有实例并将其替换为`'anyTextHere'`.

基本上，我只想保留`'anyTextHere'`，然后删除其余的。

示例代码：

```
 __( 'beach', 'foo' )
    __( 'summer', 'foo' ) 
```

然后找到：

```
 __( 'anyTextHere', 'foo' ) 
```

当用正则表达式替换时，结果应该是：

```
 'beach'
    'summer' 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:28:39.467

你可以更换

```
__\( '([']+), [^)]+) 
```

经过`'\1'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:28:47.563

搜索

```
 __\( '([^']*)', 'foo' \) 
```

并替换为`$1`

更笼统地说：

```
__\( '([^']*)', '[^']*' \) 
```

并替换为`$1`

# javascript - localStorage 中的 JSON 响应

> ID：11138111
> 
> 赞同：1
> 
> 时间：2012-06-21T12:26:18.170
> 
> 标签：javascript, json, string, local-storage

我的 JSON 响应是一个键值对。

```
 {"category":[{"id":1,"name":"Merc"},{"id":2,"name":"BMW"}]} 
```

在我解析响应之后

```
 var data = JSON.parse(xhr.responseText); 
```

我需要存储在`localStorage`

```
 localStorage.setItem('carList', cars); 
```

现在这辆车应该保存为逗号分隔的键、值对……怎么办？

```
 //1,Merc,2,BMW 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-12T06:29:48.980

我希望以下链接[HTML5 localstorage to store JSON objects](http://samcroft.co.uk/2013/using-localstorage-to-store-json/)将帮助您在 localStorage 中存储 json 响应。

它看起来像.,

```
var dataToStore = JSON.stringify(data);
localStorage.setItem('someData', dataToStore); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:45:43.773

我同意 Felix 的观点，最好将值存储在 json 字符串中。但只是为了回答你的问题。

```
var text = [];
for(var i = 0; i < data.category; i++){
    var car = data.category[i];
    text.push(car.id, car.name);
}
localStorage.setItem('carList', text.join(',')); 
```

# .net - 是否可以发送 HTML 作为 WebService 调用的响应？

> ID：11138113
> 
> 赞同：0
> 
> 时间：2012-06-21T12:26:21.867
> 
> 标签：.net, web-services, rest

由于 Web 服务请求的响应格式似乎是 Xml 或 Json。但是，由于 HMTL 是一种 XML，我想知道是否可以（和常见的做法）将 HTML 发送回客户端......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:30:34.410

您可以向客户端发送 xml 响应并在其中嵌入 html 代码。发送 html 不是一种常见的做法，但它是可能的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:28:43.567

您可以直接返回 HTML 并在客户端解释结果，也可以将 HTML 包装在一个结果对象中，然后该对象将是由您的 Web 服务框架编码的 SOAP 或 JSON。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:32:27.933

返回 HTML 不是一般做法，但您可以通过将 HTML 包含在 JSon 或 XML 中的字符串中来返回 HTML

你可以做：

```
[WebMethod]
public string GetHTMLString()
{
    return "<HTML><TITLE>...";
} 
```

[从 wcf 服务返回 html 时](https://stackoverflow.com/questions/2019708/return-html-from-wcf-service)发现了这个

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)]
public Stream getHtml()
{
    // get the html
    var html = DoSomethingToGetHtml();  //Not a built-in .Net method ;)

    // we want our result interpreted as plain html
    WebOperationContext.Current.OutgoingResponse.ContentType = "text/html";

    // create a stream from our html because trying to return a string adds an extra header tag
    //      to the response.  Returning a stream returns the html by itself
    var result = new MemoryStream(ASCIIEncoding.UTF8.GetBytes(html));

    // return the result
    return result;
} 
```

# java - 使用 ant sshexec 任务在远程计算机上运行命令

> ID：11138117
> 
> 赞同：0
> 
> 时间：2012-06-21T12:26:33.547
> 
> 标签：java, ant, ssh

我是这个主题的新手，Apache Ant，我想使用 ant sshexec 任务在远程计算机上运行命令。这是我本科论文的一部分。我必须尽快解决这个问题。有一个这样的目标：

```
<target id="9" name="connectrun">
<sshexec host="192.168.1.34"
   username="remoteusername"
   password="remotepassword"
   trust="true" 
   verbose="true"
   command="cmd /c dir C:\">
   </sshexec>
</target> 
```

我使用 ant 版本 1.8.2 和 jsch-0.1.48.jar。操作系统是每台计算机的windows 7。当我运行目标时，我关闭了 Windows 防火墙，出现了这个错误：

```
com.jcraft.jsch.JSchException: java.net.ConnectException: Connection refused: connect
at com.jcraft.jsch.Util.createSocket(Util.java:341)
at com.jcraft.jsch.Session.connect(Session.java:182)
at com.jcraft.jsch.Session.connect(Session.java:150)
at org.apache.tools.ant.taskdefs.optional.ssh.SSHBase.openSession(SSHBase.java:223)
at org.apache.tools.ant.taskdefs.optional.ssh.SSHExec.execute(SSHExec.java:190)
at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
at org.apache.tools.ant.Task.perform(Task.java:348)
at org.apache.tools.ant.Target.execute(Target.java:390)
at org.apache.tools.ant.Target.performTasks(Target.java:411)
at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
at org.apache.tools.ant.module.bridge.impl.BridgeImpl.run(BridgeImpl.java:284)
at org.apache.tools.ant.module.run.TargetExecutor.run(TargetExecutor.java:539)
at org.netbeans.core.execution.RunClassThread.run(RunClassThread.java:153)
Caused by: java.net.ConnectException: Connection refused: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
at java.net.Socket.connect(Socket.java:579)
at java.net.Socket.connect(Socket.java:528)
at java.net.Socket.<init>(Socket.java:425)
at java.net.Socket.<init>(Socket.java:208)
at com.jcraft.jsch.Util.createSocket(Util.java:335) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:25:07.850

仔细查看 Java 堆栈跟踪：

```
Caused by: java.net.ConnectException: Connection refused: connect 
```

这是一个通用的 Java 网络错误，在无法建立连接时抛出。典型的根本原因是远程端没有进程监听。

问一个相当明显的问题.... 你有没有在远程 Windows 机器上安装 SSH 服务器？它在监听 22 端口吗？

# java - 真正动态的 JPA CriteriaBuilder

> ID：11138118
> 
> 赞同：48
> 
> 时间：2012-06-21T12:26:34.003
> 
> 标签：java, jpa, jpa-2.0, criteria-api

我需要创建一个“真实的”动态 JPA `CriteriaBuilder`。我得到一个`Map<String, String>`与陈述。看起来像：

```
name : John
surname : Smith
email : email@email.de

...more pairs possible 
```

这是我实现的：

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<User> query = cb.createQuery(User.class);
Root<User> userRoot = query.from(User.class);
query.select(userRoot);

List<Predicate> predicates = new ArrayList<Predicate>();
Iterator<String> column = statements.keySet().iterator();
while (column.hasNext()) {

    // get the pairs
    String colIndex = column.next();
    String colValue = statements.get(colIndex);

    // create the statement
    Predicate pAnd = cb.conjunction();
    pAnd = cb.and(pAnd, cb.equal(userRoot.get(colIndex), colValue));
    predicates.add(pAnd);
}

// doesn't work, i don't know how many predicates i have -> can not address them
query.where(predicates.get(0), predicates.get(1), ...);

// doesn't work, because it is a list of predicates
query.where(predicates);

// doesn't work, because the actual predicate overwrites the old predicate
for (Predicate pre : predicates) {
     query.where(pre)
} 
```

我尝试构建一个 big `Predicate`，其中包含所有其他谓词并将其添加到`query.where()`，但谓词再次覆盖旧值。看起来不可能添加 a`Predicate`而不是更改 Predicate :-(

真正的项目更复杂，因为有些对需要 a `equal`，有些需要 a `like`。这甚至还不够：可能还有一个`or`包含 like的额外语句`type : 1;4;7`。在这里，值必须拆分并创建如下语句：

`<rest of statement> AND (type = 1 OR type = 4 OR type = 7)`

**UPDATE 和 SOLUTION** 有两个列表，第一个列表用于 AND 效果很好。第二个列表包含 OR 语句，如预期：

```
final List<Predicate> andPredicates = new ArrayList<Predicate>();
final List<Predicate> orPredicates = new ArrayList<Predicate>();
for (final Entry<String, String> entry : statements.entrySet()) {
    final String colIndex = entry.getKey();
    final String colValue = entry.getValue();
    if (colIndex != null && colValue != null) {

        if (!colValue.contains(";")) {
            if (equals) {
                andPredicates.add(cb.equal(userRoot.get(colIndex), colValue));
            } else {
                andPredicates.add(cb.like(userRoot.<String> get(colIndex), "%" + colValue + "%"));
            }
        } else {
            String[] values = colValue.split(";");
            for (String value : values) {
                orPredicates.add(cb.or(cb.equal(userRoot.get(colIndex), value)));
            }
        }       
    }
}

// Here goes the magic to combine both lists
if (andPredicates.size() > 0 && orPredicates.size() == 0) {
    // no need to make new predicate, it is already a conjunction
    query.where(andPredicates.toArray(new Predicate[andPredicates.size()]));
} else if (andPredicates.size() == 0 && orPredicates.size() > 0) {
    // make a disjunction, this part is missing above
    Predicate p = cb.disjunction();
    p = cb.or(orPredicates.toArray(new Predicate[orPredicates.size()]));
    query.where(p);
} else {
    // both types of statements combined
    Predicate o = cb.and(andPredicates.toArray(new Predicate[andPredicates.size()]));
    Predicate p = cb.or(orPredicates.toArray(new Predicate[orPredicates.size()]));
    query.where(o, p);
}

query.where(predicates.toArray(new Predicate[predicates.size()]));
users = em.createQuery(query).getResultList(); 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-21T12:32:08.493

您可以将谓词数组传递给`CriteriaBuilder`、 决定`equal`或`like`随心所欲。为此，构建一个列表并将列表的内容打包到单个`and`语句中的数组中。像这样：

```
final List<Predicate> predicates = new ArrayList<Predicate>();

for (final Entry<String, String> e : myPredicateMap.entrySet()) {

    final String key = e.getKey();
    final String value = e.getValue();

    if ((key != null) && (value != null)) {

        if (value.contains("%")) {
            predicates.add(criteriaBuilder.like(root.<String> get(key), value));
        } else {
            predicates.add(criteriaBuilder.equal(root.get(key), value));
        }
    }
}

query.where(criteriaBuilder.and(predicates.toArray(new Predicate[predicates.size()])));
query.select(count); 
```

如果您需要区分`and`和`or`，请使用两个列表。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-21T12:34:46.110

一种选择是使用具有可变数量参数的方法可以采用数组这一事实：

```
query.where(predicates.toArray(new Predicate[predicates.size()])); 
```

或者，您可以将它们组合成一个谓词（请注意，如果您不这样做，则不需要像示例中那样创建连词）；：

```
Predicate where = cb.conjunction();
while (column.hasNext()) {
    ...
    where = cb.and(where, cb.equal(userRoot.get(colIndex), colValue));
}

query.where(where); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-24T03:53:37.870

我一直认为创造这样的解决方案就像重新发明自行车。这里[https://github.com/sasa7812/jfbdemo](https://github.com/sasa7812/jfbdemo)是我的解决方案。它在 EclipseLink 和 Hibernate 上进行了测试（EclipseLink 在生产中，我们在几个项目中使用它来实现简单的案例）。有时你只需要一个快速的解决方案来制作一个带有排序和过滤的数据表，没什么特别的。它能够过滤和排序连接的字段，甚至是集合。项目包含有关 Primefaces 的演示，展示了 FilterCriteriaBuilder 的能力。在它的核心，你只需要这个：

```
 public List<T> loadFilterBuilder(int first, int pageSize, Map<String, Boolean> sorts, List<FieldFilter> argumentFilters, Class<? extends AbstractEntity> entityClass) {
    FilterCriteriaBuilder<T> fcb = new FilterCriteriaBuilder<>(getEntityManager(), (Class<T>) entityClass);
    fcb.addFilters(argumentFilters).addOrders(sorts);
    Query q = getEntityManager().createQuery(fcb.getQuery());
    q.setFirstResult(first);
    q.setMaxResults(pageSize);
    return q.getResultList();
} 
```

从数据库中获取结果。

我真的需要有人告诉我它很有用，并且在某个地方被用来继续我在这个库上的工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-04T21:35:47.097

您可以转换为 Predicate ... 如下

```
query.where( predicates.stream().toArray( Predicate[]::new ) ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-07T04:17:23.867

对于 Predicate 您可以创建新的 ArrayList 将所有谓词添加到列表中，然后最后您可以创建一个谓词数组并将列表转换为谓词数组并直接将其分配给 criteriabuilder.where(new Pridicate[])

# solr - 获取 SOLR 索引大小

> ID：11138122
> 
> 赞同：0
> 
> 时间：2012-06-21T12:26:51.213
> 
> 标签：solr, sunspot

我在我的 web 应用程序的 SOLR 之上使用 Sunspot (Ruby/Rails)。现在，当 SOLR 遇到 Java 堆空间时，我遇到了问题。我不知道如何找到 SOLR 索引大小？有没有办法从命令行找到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:49:56.650

If you are looking for the physical on-disk size of the index, you can look at 'data/index' folder under 'dataDir' per the definition in solrconfig.xml. For eg. in example index, it is example/solr/data/index folder.

If you are looking for count of the documents, then you can either look at stats.jsp page or search for "*:*".

If you are looking for understanding memory usage, you can start with the stats.jsp - and look at document count, various field cache size etc.

I am afraid you will need to do more research to understand your memory requirements, profile the application and plan for capacity.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:46:03.300

您遇到的问题是由于内存使用情况，而不是物理大小。如果您在 Windows 下运行 tomcat，则可以使用下图所示的 tomcat 监控工具修复此问题。我建议您根据硬件将 Solr 2048+ 作为最大值。这将解决您遇到的错误。如果您正在运行 linux，则需要编辑 java 选项以包含*-xmx2048*并重新启动 Tomcat。

![Tomcat 内存设置](../Images/61a186ba08f5c83f30b6ebb9c6e23308.png)

* * *

如果您真的想查看索引的大小，另一种方法是将复制处理程序添加到您的“solrconfig.xml”中。这个处理程序允许您备份 Solr 数据，但也有一个漂亮的 gui，可以显示索引大小等。

```
<requestHandler name="/replication" class="solr.ReplicationHandler">
   <str name="maxNumberOfBackups">1</str>
</requestHandler> 
```

然后您可以访问*[http://[SolrServer]/solr/admin/replication/index.jsp](http://[SolrServer]/solr/admin/replication/index.jsp)*在您的浏览器中查看索引大小。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-06T03:41:19.183

if you want to see your memory consumption, I recommend you to use [MAT Tool](http://www.javacodegeeks.com/2011/08/eclipse-memory-analyzer-mat.html) enjoy !:)

# asp.net - 如何使用锚标签打开文件

> ID：11138136
> 
> 赞同：1
> 
> 时间：2012-06-21T12:27:46.393
> 
> 标签：asp.net

我正在做的是我有一个动态表并创建所有工作正常的行。在其中一个单元格中，我试图创建一个链接，单击该链接将打开一个文件。但是当我单击链接时，它给了我一个错误，说找不到文件中的服务器。然后我检查文件的方法是在地址栏中输入位置并找到它，但将地址更改为（file:///c:/inetpub/wwwroot/test1.txt）。所以我所做的就是将该地址放入锚标记中，但它仍然不起作用。这是我到目前为止所拥有的。任何帮助将不胜感激。

```
tblrow = New TableHeaderRow
tblcell = New TableHeaderCell
tblcell.Text = "<a href='C://inetpub/wwwroot/test1.txt' target='_blank'>" & Test &   "</a>"
 tblrow.Cells.Add(tblcell)
 tableName.Rows.Add(tblrow) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T12:29:31.507

使用 url 而不是物理路径。

改变

```
<a href='C://inetpub/wwwroot/test1.txt' target='_blank'> 
```

通过绝对 url 位置

```
<a href='http://DOMAIN/test1.txt' target='_blank'> 
```

如果文件位于您的网站上，则为相对 url 位置

```
<a href='RELATIVE_PATH/test1.txt' target='_blank'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:33:42.380

1.  由于安全原因，大多数操作系统不支持直接文件调用。您必须使用临时位置或从服务器加载文件。

2.  您的文件应位于虚拟目录中，并具有其他帖子提到的完整 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:36:35.500

您应该考虑使用异步处理程序 (ASP.NET) 来下载文件。最终，锚点会在浏览器中发起另一个请求，该请求会将文件下载给用户。

这是一篇文章，其中包含来自 MSDN 的一些信息。

这是您将在处理程序中编写的代码示例：

```
public void ProcessRequest(HttpContext context) {
    // read input etx
    context.Response.Buffer = false;
    context.Response.ContentType = "text/plain";
    string path = @"c:\somefile.txt";
    FileInfo file = new FileInfo(path);
    int len = (int)file.Length, bytes;
    context.Response.AppendHeader("content-length", len.ToString());
    byte[] buffer = new byte[1024];
    Stream outStream = context.Response.OutputStream;
    using(Stream stream = File.OpenRead(path)) {
        while (len > 0 && (bytes =
            stream.Read(buffer, 0, buffer.Length)) > 0)
            {
                outStream.Write(buffer, 0, bytes);
                len -= bytes;
            }
    }
} 
```

希望这可以帮助

# bash - 如何通过 bash 脚本递归地重命名文件？

> ID：11138137
> 
> 赞同：0
> 
> 时间：2012-06-21T12:27:49.387
> 
> 标签：bash, rename, mv

我正在尝试在 bash 中重命名几个不同的文件。例如，如何将 temp_1 重命名为 temp_01 直到 09（temp_9 到 temp_09）？

我使用了 sed 但不知何故没有工作。

我试过这个：

```
 for i in temp_?.txt; 
 do
   j=echo $i | sed 's/[^0-9]*/0[^0-9]*/g';
   mv "$i" "$j"; 
 done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:40:35.477

尝试将您的`sed`命令修改为类似

```
sed 's/[0-9]/0&/' 
```

这将为您的示例案例完成工作。

您的命令不起作用，因为当您尝试引用匹配的字符串时实际上并没有：它是用`&`(for the whole match) 或 numbered [references](http://www.grymoire.com/Unix/Sed.html#uh-4)完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:03:11.650

不需要`sed`；只需使用您对文件名的了解：

```
for i in {0..9}
do
   mv temp_$i.txt temp_0$i.txt
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:58:18.307

它不起作用，因为您没有捕获 sed 的输出，您需要将其放入反引号或`$( ... )`. 另外，你的 RE 错了，试试这个：

```
for i in temp_?.txt 
do  
    j=$(echo $i | sed 's/\([0-9]\{1,\}\)/0\1/g')
    mv "$i" "$j"   
done 
```

注意：我更喜欢使用 -E 选项来`sed`扩展正则表达式，但我不知道你是否`sed`支持它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T22:51:30.643

你需要逃避你的变量赋值

```
j=`echo echo $i | sed 's/[^0-9]*/0[^0-9]*/g'` 
```

此外，您不需要在每条语句的末尾使用分号，除非您将所有操作都放在一行中

# php - PHP SOAP 服务器存储参数

> ID：11138140
> 
> 赞同：1
> 
> 时间：2012-06-21T12:28:01.193
> 
> 标签：php, soap, wsdl

我目前正在尝试使用以下代码设置 SOAP 服务器。

服务器.php

```
<?php
class Name {
    private $_name;

    public function setName($name) {
        $this->_name = $name;
    }

    public function getName() {
        return $this->_name;
    }
}

$server = new SoapServer('soap.wsdl');
$server->setClass('Name');
$server->handle();
?> 
```

客户端.php

```
<?php
$client = new SoapClient('soap.wsdl');

$client->setName('test');
print $client->getName();
?> 
```

肥皂.wsdl

```
<?xml version ="1.0" encoding ="UTF-8" ?>

<definitions
    name="Name"
    targetNamespace="/Name/"
    xmlns="http://schemas.xmlsoap.org/wsdl/"
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    xmlns:tns="http://www.examples.com/wsdl/HelloService.wsdl"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">

    <message name="nameInput">
        <part name="sName" type="xsd:string" />
    </message>
    <message name="nameOutput">
        <part name="sName" type="xsd:string" />
    </message>

    <portType name="NamePortType">
        <operation name="setName" parameterOrder="sName">
            <input message="tns:nameInput" />
        </operation>
        <operation name="getName">
            <output message="tns:nameOutput" />
        </operation>
    </portType>

    <binding name="NameBinding" type="tns:NamePortType">
        <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
        <operation name="setName">
            <soap:operation soapAction=""/>
            <input>
                <soap:body use="literal"/>
            </input>
        </operation>
        <operation name="getName">
            <soap:operation soapAction=""/>
            <output>
                <soap:body use="literal"/>
            </output>
        </operation>
    </binding>

    <service name="NameService">
        <port name="NamePort" binding="tns:NameBinding">
            <soap:address location="http://10.200.3.48/zI/soap/server.php"/>
        </port>
    </service>

</definitions> 
```

是否可以在类对象的参数中存储一个值？getName() 返回一个空字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:15:42.790

否 无法将值存储在 WebService 中。

当您调用 Web 服务时，服务器会使用新的类实例创建单独的线程，并且您存储的值会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:18:56.233

不，唯一的方法是将数据保存在数据库中，然后检索它。

# java - 如何在 Java 类中实现封装？

> ID：11138145
> 
> 赞同：0
> 
> 时间：2012-06-21T12:28:12.853
> 
> 标签：java

我正在学习 Java，并获得了以下选项：

如何在类中实现封装？

1.  使所有变量受到保护，并且只允许通过方法访问。
2.  将所有变量设为私有，并且只允许通过方法访问。
3.  确保所有变量都由包装类表示。
4.  确保通过祖先类中的方法访问所有变量。

我的选择是第二个，但我也想知道是否有人认为任何其他选择是正确的？还有没有其他方法来实现这里没有介绍的封装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:32:52.210

你是对的。任何其他方法都是定义一个接口，该接口将封装实现类的功能。

来自[维基百科](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)：

封装是：

*   一种语言机制，用于限制对某些对象组件的访问。
*   一种语言结构，有助于将数据与操作该数据的方法（或其他功能）捆绑在一起。

# php - 用给定的时间值减去sql时间值

> ID：11138150
> 
> 赞同：2
> 
> 时间：2012-06-21T12:28:31.183
> 
> 标签：php, mysql

**我的查询**

```
 SELECT DATE, SEC_TO_TIME( SUM( TIME_TO_SEC(  `total_hours` ) ) ) AS total
FROM work_details
WHERE  `employee_id` =  '28'
AND DATE
BETWEEN  '2012-02-01'
AND  '2012-02-29'
GROUP BY DATE
ORDER BY DATE 
```

// 从数据库表 work_details 中获取给定员工在给定日期的总工作时间，total_hours 是时间类型。

**结果**

```
DATE    total
2012-02-01  04:19:50
2012-02-02  07:38:21
2012-02-06  07:43:24
2012-02-07  07:21:36
2012-02-08  07:38:45
2012-02-09  06:05:22
2012-02-10  07:28:00
2012-02-13  07:37:38
2012-02-14  07:37:22
2012-02-15  07:35:10
2012-02-16  07:29:13
2012-02-17  07:07:23
2012-02-20  07:40:32
2012-02-21  07:43:32
2012-02-22  07:36:40
2012-02-23  07:37:57
2012-02-24  07:35:04
2012-02-27  09:54:02
2012-02-28  07:41:35
2012-02-29  04:01:11 
```

我需要检索总工作时间**小于**4 小时的日期，以便我可以将这些天数计算为一半的假期。有什么帮助吗？？

我也试过这个查询，我给了 8 而不是 4，因为我的表现在不包含少于 4 的数据。

```
SELECT DATE, SEC_TO_TIME( SUM( TIME_TO_SEC(  `total_hours` ) ) ) AS total, 
CASE WHEN SEC_TO_TIME( SUM( TIME_TO_SEC(  `total_hours` ) ) ) < ( 3600 *8 ) 
THEN 1 
ELSE 0 
END AS half_day
FROM work_details
WHERE  `employee_id` =  '28'
AND DATE
BETWEEN  '2012-02-01'
AND  '2012-02-29'
GROUP BY DATE 
```

结果

```
DATE    total   half_day
2012-02-01  07:19:50    0
2012-02-02  07:38:21    0
2012-02-06  07:43:24    0
2012-02-07  07:21:36    0
2012-02-08  07:38:45    0
2012-02-09  06:05:22    0
2012-02-10  07:28:00    0
2012-02-13  07:37:38    0
2012-02-14  07:37:22    0
2012-02-15  07:35:10    0
2012-02-16  07:29:13    0
2012-02-17  07:07:23    0
2012-02-20  07:40:32    0
2012-02-21  07:43:32    0
2012-02-22  07:36:40    0
2012-02-23  07:37:57    0
2012-02-24  07:35:04    0
2012-02-27  09:54:02    0
2012-02-28  07:41:35    0
2012-02-29  08:01:11    0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:34:06.277

尝试在查询末尾添加：

```
HAVING HOUR(total) < 4; 
```

# asp.net-web-api - Asp.Net webapi xml格式化程序不起作用

> ID：11138155
> 
> 赞同：1
> 
> 时间：2012-06-21T12:28:47.623
> 
> 标签：asp.net-web-api, self-hosting

我已经使用 asp.net webapi 框架创建了一个**自托管服务**，并添加了一个自定义 MediaTypeFormatter 以便我可以返回 html。我的问题是我想在我的 html 中使用 Jquery，所以我`<script type="text/javascript" src="/scripts/jquery-1.7.1.min.js"></script>`在我的模板中包含了常用的。当我浏览到我的网址时，它完美地为 html 提供服务，但 jquery 文件的 GET 返回 404。

我想这是有道理的，因为我的“网络服务器”不知道如何处理这个请求。那么我是否必须添加路由和控制器来提供脚本和 css 文件等文件？或者有没有更简单的方法？

如果没有，我可以直接将 jquery 脚本添加到我的模板中，但如果有人有更好的解决方案，我宁愿不要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:58:26.503

我不建议从您的自托管站点提供 jQuery。自托管的全部意义在于消除对 ASP.NET MVC 及其附带的所有内容的依赖。因此，如果您想提供脚本或其他文件，我认为您有几个选择。

1.  在 ASP.NET MVC 中托管 WebApi 站点，然后您也可以选择托管 jQuery。
2.  在您的 html 页面上引用来自 CDN（如 Google 或 Microsoft）的 jQuery 脚本。有关详细信息，请参阅[CDN 托管的 jQuery 。](http://docs.jquery.com/Downloading_jQuery#CDN_Hosted_jQuery)

# php - DOMDocument 解析 html

> ID：11138158
> 
> 赞同：-1
> 
> 时间：2012-06-21T12:28:53.957
> 
> 标签：php, xpath, html-parsing, domdocument

我有一个 html 页面，其中有许多`<tr><td>`元素，例如

```
<tr>
<td class="notextElementLabel width100">address:</td>
<td style="width: 100%" colspan="1" class="formFieldelement"><b>12284,CA</b></td>
</tr> 
```

假设上面`<tr>`是第 4 个位置意味着在这个元素之前还有 3 个`<tr>`

现在我想获取地址的值，所以我正在做

```
$doc = new DOMDocument();
    @$doc->loadHTML($this->siteHtmlData);
    $tdElements = $doc->getElementsByTagName("td");
    $i=0;
    foreach ($tdElements as $node) {
        if(trim($node->nodeValue) == 'address:'){
            echo "\n\ngot it\n\n";
        }else{
            echo "\n\n---no ---\n\n";
        }

    } 
```

如何获得“12284，CA”的值。请指导。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:40:43.700

在您的情况下，查询背后的逻辑非常简单，可以完全用 XPath 语法表示：

```
//td[text()="address:"]/following-sibling::td/b/text() 
```

这会找到`<td>`文本等于 的任何节点，`"address:"`获取以下内容`<td>`，进入`<b>`其中并获取它在那里找到的文本。

这意味着你可以做到

```
$doc = new DOMDocument();
$doc->loadHTML($html);
$xpath = new DOMXPath($doc);
echo $xpath->evaluate('string(//td[text()="address:"]/following-sibling::td/b)'); 
```

它会立即输出您正在寻找的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:40:56.497

我自己得到了答案，类似于nickb的答案

```
$tdElements = $doc->getElementsByTagName("td");
    $tdCnt  = $tdElements->length;

    for ($idx = 0; $idx < $tdCnt; $idx++) {

        if(trim($tdElements->item($idx)->nodeValue) == 'address:'){
            echo $tdElements->item($idx+1)->nodeValue;
        }
    } 
```

希望它会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:34:30.627

您必须获取`<tr>`元素，然后解析其子项，类似于：

```
$trElements = $doc->getElementsByTagName("tr");
foreach ($trElements as $node) {
    $children = $node->childNodes;
    foreach( $children as $child)
        echo $child->textContent; // or $child->nodeValue
} 
```

这输出：`address: 12284,CA`

现在，如果有更多`<tr>`不是地址的元素，您将需要解析`$children`节点列表以确保找到`"address:"`，然后一旦您这样做，您就知道下一个子节点的值就是您要查找的值。

# c# - 如何在 string.Format 中将 int 显示为 TimeSpan？

> ID：11138164
> 
> 赞同：0
> 
> 时间：2012-06-21T12:29:05.497
> 
> 标签：c#, formatting, timespan, string.format

我有以下代码：

```
int sec = 62;
string str = string.Format("Time: {0:xxx}", sec); 
```

`xxx`如果我想要这样的输出，我应该输入什么： `Time: 00:01:02`？

我知道我可以输入：

```
string.Format("Time: {0:xxx}", TimeSpan.FromSeconds(sec)); 
```

或类似的，但我唯一可以改变的部分是该`xxx`部分。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:31:23.707

由于格式字符串无法更改其参数的类型，因此除了您无法使用的选项外，没有其他选项。

毕竟，`int`是一种包含数字（至少从根本上说）而不是时间跨度的类型，因此为什么`int`可以格式化为时间跨度？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:32:27.560

你可以做类似的事情`String.Format("Time: {0}", TimeSpan.FromSeconds(sec).ToString("c");`

参数的确切格式`ToString`可以在[http://msdn.microsoft.com/en-us/library/dd992632.aspx找到](http://msdn.microsoft.com/en-us/library/dd992632.aspx)

# asp.net - Cookie 和读取方式

> ID：11138168
> 
> 赞同：1
> 
> 时间：2012-06-21T12:29:19.700
> 
> 标签：asp.net, web-services, cookies, httpwebrequest, httpwebresponse

**假设我在域abc.com**中创建了一个有效期为一年的 cookie，现在

*   我正在访问此域中的任何页面，cookie 会自动附加到请求对象。
*   我在同一个域**abc.com**中有一个网络服务。**每当从abc.com**或**xyz.com**进行呼叫时，Web 服务是否能够访问 cookie
***   假设我有一个更新面板并单击其中的一个按钮，我是否能够通过异步方法访问 cookie。*   从**xyz.com**，我可以在 asp.net 中的 HttpWebRequest 和 HttpWebResponse 类的帮助下异步检查此 cookie 的存在。（因为我感觉这其实也是从浏览器发送请求）*   CookieContainer 实际上将如何帮助我从一个域读取 cookie 到另一个域？**

 **谢谢，

米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:53:05.597

假设请求来自浏览器，您将获得您的域允许拥有的任何 cookie。至于 cookie 共享，请看[这篇文章](http://www.codeguru.com/csharp/csharp/cs_internet/article.php/c19417/Sharing-Cookies-Across-Domains.htm)。**

# jdbc - 有成熟的命令行 JDBC 客户端吗？

> ID：11138175
> 
> 赞同：37
> 
> 时间：2012-06-21T12:29:30.430
> 
> 标签：jdbc, command-line, command-line-interface

我正在尝试创建一组测试脚本，这些脚本将对与数据库一起使用的东西进行黑盒测试。为此，我需要从标准输入或文件发出 SQL 命令，这对于“mysql”客户端来说是很可能的，但现在我们使用其他数据库，它只有 jdbc 驱动程序。我在命令行中需要与 mysql 客户端相同的基本功能，但对于任何 jdbc 驱动的数据库。如果不编写我的自定义 java 工具，这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-02-09T21:16:37.000

这个非常常用，适用于任何 SQL 数据库，并且得到很好的支持：[https ://github.com/julianhyde/sqlline](https://github.com/julianhyde/sqlline)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-20T17:37:37.717

我在 jisql for Oracle 和 Postgres 数据库方面取得了成功，它似乎支持大多数带有 JDBC 驱动程序的数据库：

[http://sourceforge.net/projects/jisql/](http://sourceforge.net/projects/jisql/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-21T14:43:42.530

你的意思是像[http://web.quuxo.com/products/jdbctool/](http://web.quuxo.com/products/jdbctool/)吗？

**编辑 6/22：** HenPlus 怎么样：[http](http://henplus.sourceforge.net/) ://henplus.sourceforge.net/ ？

# jquery - 使用 jQuery 的类似 Twitter 的输入字段

> ID：11138179
> 
> 赞同：1
> 
> 时间：2012-06-21T12:29:46.187
> 
> 标签：jquery, forms, twitter, input, focus

![推特注册](../Images/eda2bc46beea6b4b8daee6f7c55fe38d.png)

我正在尝试制作一些我想像 Twitter 的注册表单一样工作的输入字段。

1.  在焦点上，值文本变为浅灰色。
2.  当您开始键入时，浅灰色默认值完全消失，用户编写的文本变为 #000000。
3.  如果您不写任何内容并且失去焦点，则默认文本会再次出现。

如何用jQuery实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:47:08.413

这是执行此操作的示例方法，将输入的值设置为您想要它说的内容，并在附近有一个标签（您可以隐藏它，但将它放在 dom 中）以便您可以获取它的值并添加/去掉它。

```
// clear input on focus
    $('input.myclass').focus(function() {
        var inputlabel = $(this).attr('label');
        if($(this).val() == inputlabel) { $(this).val('').removeClass('inactive'); }
    });
    // restore text on blur if blank
    $('input.myclass').blur(function() {
        var inputlabel = $(this).attr('label');
        if($(this).val() == '') { $(this).val(inputlabel).addClass('inactive'); }
    }); 
```

您也可以`placeholder`在输入 ex 上使用 HTML5 `<input placeholder='Your name' type='text' />`，默认情况下它会清除焦点上的文本，但它不会像您期望的那样在所有浏览器上工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T14:34:02.427

看看这个样本。

[如何为文本输入元素指定一些水印文本？](http://jqfaq.com/how-to-specify-some-watermark-text-for-a-text-input-element/)

# matlab - 如何在 Matlab 中优化嵌入式循环索引以实现并行化？

> ID：11138185
> 
> 赞同：2
> 
> 时间：2012-06-21T12:29:55.470
> 
> 标签：matlab, optimization, parallel-processing, indexing

目前我正在做一个项目，我想提高执行速度。我对并行编码完全陌生。我的程序最初有六个循环，我设法将其优化为三个循环，执行时间减少了 300%。根据我的研究，我认为问题出在索引上。我在前一个循环中已经使用了 parfor，但索引是 i = 1:vs_max-1。

在以下代码中：

```
for i = 1:vs_max-1
 for j = i+1:vs_max-1
  d = max(abs(X(i,:)-X(j,:)));
  DD = exp(-(d/r)^n);
  D(i,j) = DD;
  D(j,i) = DD;
  while (i~=vs_max)
    d2 = max(abs(X2(i,:)-X2(j,:)));
    DD2 = exp(-(d2/r)^n);
    D2(i,j) = DD2;
    D2(j,i) = DD2;
    break;
  end

 end
end 
```

我相信问题出在第二个循环索引中，其中 j 还需要 i 值，当我们有多个线程时，我们可以多次访问这些值。

谁能帮我重新索引这个循环，以便 parfor 不提示或提供另一种类型的代码优化，以使上述代码变得更快？

提前感谢您的好意阅读和回答我的帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:32:06.290

您基本上是在上三角矩阵中生成索引。随着 的值`i`向 前进`vs_max-1`，线条越来越短。`schedule(dynamic)`除非正在执行一些动态工作调度（例如，如果您碰巧熟悉 OpenMP，类似于 ，这不会很好地分布在多个线程之间）。

您可以将事物“展平”并运行一个循环并使用一些数学运算将迭代次数转换为一`(i,j)`对，例如，请参阅[此问题](https://stackoverflow.com/questions/242711/algorithm-for-index-numbers-of-triangular-matrix-coefficients)以获取可能的解决方案。如果您有足够的内存，您还可以使用所有可能`(i,j)`对的预填充列表，然后使用它来快速计算`i`迭代`j`次数。

顺便说一句：计算的第二部分看起来很奇怪。为什么要把它放在一个`while`总是执行并且只执行一次的循环中（`i ~= vs_max`总是正确的，因为在第一次迭代后`i`永远不会到达`vs_max`并`break`终止它）？

# c++ - 将int的所有字节都设置为(unsigned char)0，保证代表零？

> ID：11138188
> 
> 赞同：43
> 
> 时间：2012-06-21T12:30:00.337
> 
> 标签：c++11中被评估为, , c++, c++11, language-lawyer

> [这不是*推荐做法*的问题（也不是*未定义的行为*），而是关于*c++*标准在将整数类型的所有字节转换为`(unsigned char)0`.]

* * *

## 问题

在下面的片段中，*if 语句*使用的表达式是否保证在[c++11中被评估为](/questions/tagged/c%2b%2b11 "show questions tagged 'c++11'")*true*？

```
std::memset (
  reinterpret_cast<char*> (&a), // int a;
  (unsigned char)0,
  sizeof (int)
);

if (a == 0) {
  ...
} 
```

通过阅读 C99 和 C++11 标准的引用（在这篇文章的后面），我们发现 C99 明确**保证**所有位都设置为的整数类型`0`将表示该`0`类型中的值。

**我在 C++11 标准中找不到这个保证。**

*   *没有这样的保证吗？*
*   *上一个片段的结果真的是特定于实现的吗？*

* * *

* * *

## 在 C99 中 (ISO/IEC 9899:1999)

> ### 5.2.1.2/1 多字节字符
> 
> 所有位为零的字节应解释为与移位状态无关的空字符。这样的字节不应作为任何其他多字节字符的一部分出现。

> ### 6.2.6.2/1 整数类型
> 
> 任何填充位的值都是未指定的。^(45))符号位为零的有符号整数类型的有效（非陷阱）对象表示是相应无符号类型的有效对象表示，并且应表示相同的值。
> 
> **对于任何整数类型，所有位都为零的对象表示应是该类型中值零的表示。**

* * *

* * *

## 在 C++11 中 (ISO/IEC 14882:2011)

> ### 2.3/3 字符集 [lex.charset]
> 
> 基本执行字符集和基本执行宽字符集应分别包含基本源字符集的所有成员，加上表示警报、退格和回车的控制字符，加上**一个空字符**（分别为空宽字符），其表示**全为零位**。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T14:02:32.813

### C++ 11

我认为相关的部分是

3.9.1/1 在 C++11 中

> 对于字符类型，对象表示的所有位都参与值表示。对于无符号字符类型，值表示的所有可能的位模式都表示数字。这些要求不适用于其他类型。

随着 3.9.1/7

> 整数类型的表示应使用纯二进制计数系统定义值。

### C11

6.2.6.2 非常明确

> 对于 unsigned char 以外的无符号整数类型，对象表示的位应分为两组：值位和填充位（后者不需要任何一个）。如果有 N 个值位，则每个位应表示 1 和 2 ^(N-1)之间的 2 的不同幂，以便该类型的对象应能够使用纯二进制表示表示从 0 到 2 ^(N-1的值；)这应称为值表示。未指定任何填充位的值。
> 
> 对于有符号整数类型，对象表示的位应分为三组：值位、填充位和符号位。不需要任何填充位；signed char 不应有任何填充位。应该有一个符号位。作为值位的每个位应与相应无符号类型的对象表示中的相同位具有相同的值（如果有符号类型中有 M 个值位，无符号类型中有 N 个值位，则 M ≤ N）。如果符号位为零，则不应影响结果值。如果符号位为 1，则该值应通过以下方式之一进行修改：
> 
> — 符号位为 0 的对应值取反（符号和幅度）；
> 
> — 符号位的值为 -(2 ^M )（二进制补码）；
> 
> — 符号位的值为 −(2 ^(M − 1) )（反码）。
> 
> 其中哪一个适用是实现定义的，符号位为 1 且所有值位为零（对于前两个）或符号位和所有值位为 1（对于一个补码）的值是否是陷阱表示或正常值。在符号和幅度以及一个的补码的情况下，如果这个表示是一个正常值，它被称为负零。

### 总结

我认为这两个标准的意图是相同的。

*   `char`，`signed char`并`unsigned char`让所有位参与该值

*   其他整数类型可能具有不参与该值的*填充位。*它们中的错误位模式可能意味着无效值。

*   解释是纯二进制表示，其定义在上面的 C11 引用中得到了扩展。

有两点可能不清楚：

*   可以 -0（用于*符号和幅度*以及 _ones 的补码）是 C++ 中的陷阱值

*   其中一个填充位可以是奇偶校验位吗（即，如果我们确保填充位不被修改，我们可以修改表示吗）

我会很保守，并认为两者都是肯定的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:30:01.163

**是的，这是有保证的。**

保证转换整数类型的所有字节/位以使该类型的实例具有零值 ( `0`)，如上述标准中的以下片段所述。

* * *

> ### 3.9.1/7 基本类型
> 
> 整数类型的同义词是整数类型。*整数类型的表示应使用纯二进制计数系统定义值。*^(49)

> ^(49)[使用二进制数字 0 和 1 的整数的位置表示，其中由连续位表示的值是相加的，从 1 开始，并乘以 2 的连续整数幂，除了可能具有最高位置的位。（改编自*美国国家信息处理系统词典*。）]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T21:25:11.933

没有。例如，标准中没有任何内容禁止基于偏差的表示，它只要求它是二进制的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-22T06:51:46.057

不，我不相信它实际上是有保证的，但它相当模糊。

如果曾经有一个 C++ 实现，其中所有位为零*不是*的表示，我会感到*非常*惊讶，但我相信这样的实现可能是符合要求的（尽管有悖常理）。*`0`*

 *让我们从考虑 C99 标准开始。（是的，我知道，这个问题是关于 C++ 的；请耐心等待。）它说无符号整数类型的对象表示的位分为两组：值位和填充位（不需要任何填充位，并且大多数实现都没有它们）。值位构成纯二进制表示；填充位对值没有贡献。填充位的某些组合可能会生成*陷阱表示*。

有符号类型是相似的，只是增加了一个符号位。有符号类型可以使用*符号和幅度*、*二进制补码*或*一个补码*来表示——但同样，任何填充位都不会对值做出贡献，并且填充位的某些组合可以生成陷阱表示。

此描述不排除以下可能性，例如，比整数类型更宽的`char` 可能具有必须始终为 1 的单个填充位；如果它是 0，你有一个陷阱表示。或者，也许更合理的是，它可能有一个奇偶校验位。

*C99标准发布后*，第二次技术勘误增加了以下句子，同样出现在C11中。

> 对于任何整数类型，所有位都为零的对象表示应是该类型中值零的表示。

我要强调的是，这是作为规范文本而不是作为脚注添加的，这表明（但不证明）委员会成员认为 C99 标准中并未隐含该保证。

（C90 对整数类型的表示方式没有那么具体。它没有提到填充位、陷阱表示或二进制补码等。我认为它为实现提供了至少与 C99 一样多的灵活性。）

所以从 C99 TC2 开始，C 语言保证所有位为零是任何整数类型的零表示。在 C99 和 C90 中，没有说明该保证。

那是C。C++呢？

与 1990 年的 C 标准相比，2011 年的 C++ 标准似乎只提供了关于整数类型表示的稍微多一点的特殊性。它确实需要使用 2 的补码、1 的补码或有符号幅度来表示有符号类型。它还需要一个“纯二进制计数系统”。它*没有*提到“陷阱表示”，也没有讨论填充位，除非在位字段的上下文中。

因此，在 C90 和 TC2 之前的 C99 中，至少在理论上，全位零是整数类型的陷阱表示。C++ 标准对整数类型的要求与 C90 和 C99 的要求非常相似。它确实需要“纯二进制表示”，但我认为这适用于 C99 中的情况，仅适用于值位；尽管 C++ 没有提到填充位，但它并没有禁止它们。

同样，这主要是理论上的兴趣（因此是“语言律师”标签）。C 委员会随意强加要求所有位为零必须是零的表示，因为*所有*实现都已经满足它。几乎可以肯定，这同样适用于 C++。*

# asterisk - 如何使用 Asterisk 呼叫文件提取目标号码

> ID：11138190
> 
> 赞同：0
> 
> 时间：2012-06-21T12:30:01.990
> 
> 标签：asterisk

我是 Asterisk 的新手，但我可以通过生成呼叫文件并将其移动到假脱机文件夹来拨打电话。我什至可以将它链接到 AGI 脚本并获得调用以执行更多操作

问题是我可以看到所有详细信息，包括 cdrdb 数据库中的 CLI 号码，但看不到它正在调用的号码。只有“dst”列中的字母“s”。

此外，当我键入“core show channels concise”时，我会得到一个当前拨出电话的频道，但它显示“SIP/0001c”或类似的东西。

我应该在呼叫文件或 AGI 脚本中放入可以传递目标号码的内容吗？或者我应该在这里做一个拨号计划？

顺便说一句，电话正在反抗。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:28:06.533

来自：[http ://www.voip-info.org/wiki/view/Asterisk+auto-dial+out](http://www.voip-info.org/wiki/view/Asterisk+auto-dial+out)

> 您拨打的电话号码不会通过 * 存储在 CDR 中 - 如果您需要此信息用于 CDR 处理，您可以将呼叫文件中的 CallerID 设置为该号码并将其存储。但是，这将显示您正在呼叫的人他们自己的电话号码，这没有多大意义。更好的解决方案可能是将您拨打的号码放在 .call 文件中的 Set: 通道变量中，然后将其放入 CDR 的 UserField 中。请参阅上面第一节中的示例。

所以我认为最好的方法是在你的调用文件中添加一个变量（如文本所述），目标是：

```
Set: Target=5555555 
```

然后，在您的 agi 脚本中，您将拥有一个名为**Target**的通道变量，其中包含相关值。

[通过GET VARIABLE](http://www.voip-info.org/wiki/view/get+variable)或[GET FULL VARIABLE](http://www.voip-info.org/wiki/view/get+full+variable)获取其内容，并在您的 agi 脚本中，通过使用[SET VARIABLE "CDR(myvariablename)" "value"设置](http://www.voip-info.org/wiki/view/set+variable)**CDR(myvariable)添加自定义 CDR 字段**

这将获得 cdr 的值，准备保存。**您可以通过在cdr_custom.conf**中添加自定义字段来尝试使用 csv 后端，例如在末尾添加**${CSV_QUOTE(${CDR(myvariablename)})}**。

如果您使用其他 cdr 后端，您可能需要查看正确的文档（对于 mysql - 可能还有其他文档 - 您可能会使用“ **userfield** ”列）。

希望能帮助到你！

# php - preg_match_all 在哈希标记之后 在字符串中的下一个哈希标记之前

> ID：11138191
> 
> 赞同：0
> 
> 时间：2012-06-21T12:30:02.240
> 
> 标签：php, regex, preg-match-all, hashtag

我想找到（如果它们存在）任何哈希标签，并获取每个标签的第一个共现加上它之后但在下一个标签之前的文本（如果另一个标签存在）。

*并非所有消息字符串都带有哈希标签！

这是我正在尝试做的事情：

**发送到脚本的可能字符串示例列表：**

1) $message = '添加了一些新内容';

2) $message = ' **#BALANCE** X 的平衡运动';

3) $message = ' **#CHANGE**一些日志文本**#FIX**一些其他日志文本';

$num = prereg_match_all('@?????@', $message, $matches);

这是我从比赛中瞄准的数组结构结果：

**示例 1) 的结果**

```
(
[0] => Array
    (
        [0] => Added some new stuff
    )
) 
```

**示例 2) 的结果**

```
(
[0] => Array
    (
        [0] => balanced movement of X
        [1] => #BALANCE
    )
) 
```

**示例 3) 的结果**

```
(
[0] => Array
    (
        [0] => some log text
        [1] => #CHANGE
    )
[1] => Array
    (
        [0] => some other log text
        [1] => #FIX
    )
) 
```

让我发疯的事情试图在 REGEX 上找到像样的文档

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:59:42.370

试试这个代码：

```
$msg = '#CHANGE some log text #FIX some other log text';
$msg = preg_replace('/(#[\w]+)(\s+)/', "\n\n$1\n", $msg);

foreach (explode("\n\n", trim($msg)) as $k => $v) {
    $res[$k] = array_reverse(explode("\n", $v));
}

print_r($res);
/*
Array
(
    [0] => Array
        (
            [0] => some log text 
            [1] => #CHANGE
        )

    [1] => Array
        (
            [0] => some other log text
            [1] => #FIX
        )

)
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:01:10.643

为所有测试用例尝试这样的事情：

```
$messages[] = 'Added some new stuff';
$messages[] = '#BALANCE balanced movement of X';
$messages[] = '#CHANGE some log text #FIX some other log text';

foreach( $messages as $message) {
    preg_match_all( '~(#\w+)?\s*([\w\s]+)~i', $message, $matches);
    // var_dump( $matches);
    echo "Message: " . $message . "\n";
    $count = strlen( $matches[1][0]);
    if( $count == 0) {
        // No hash tags
        echo "No hash tags, so the match string text is: " . $matches[2][0] . "\n";
    } else {
        for( $i = 0; $i < count( $matches[1]); $i++) {
            echo "\t Hash tag $i\n";
            echo "\t\t - Tag: ".$matches[1][$i]." Value: ".$matches[2][$i]."\n";
        }
    }
} 
```

这输出：

```
Message: Added some new stuff
No hash tags, so the match string text is: Added some new stuff

Message: #BALANCE balanced movement of X
     Hash tag 0
         - Tag: #BALANCE Value: balanced movement of X

Message: #CHANGE some log text #FIX some other log text
     Hash tag 0
         - Tag: #CHANGE Value: some log text 
     Hash tag 1
         - Tag: #FIX Value: some other log text 
```

[看它工作](http://codepad.viper-7.com/z3N46a)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:52:20.030

我刚得到它！经过3个小时的战斗，BSDNOOBZ给出了最接近的答案……

给它以下情况：

```
$messages[] = 'Blla vajfkj asfhkha asfha lskahfa';
$messages[] = '#CHANGE reduced sentry health/armor to 325/100 and made them easier to repair with welders #FIX reduced sentry build time to 6 seconds (down from 10)';
foreach($messages AS $message)
{
    $num = preg_match_all('@(\#\w+)([^#]+)@', $message, $matches, PREG_SET_ORDER);
    if($num > 0)
    {
        print_r($matches);
    } else {
        echo $message;
    }
} 
```

结果：

```
string Blla vajfkj asfhkha asfha lskahfa

Array ( 
    [0] => Array 
    ( 
        [0] => #CHANGE reduced sentry health/armor to 325/100 and made them easier to repair with welders 
        [1] => #CHANGE 
        [2] => reduced sentry health/armor to 325/100 and made them easier to repair with welders 
    ) 
    [1] => Array 
    ( 
        [0] => #FIX reduced sentry build time to 6 seconds (down from 10) 
        [1] => #FIX 
        [2] => reduced sentry build time to 6 seconds (down from 10) 
    )
) 
```

# ios - iOS plist 无法从 plist 加载数据，但适用于模拟器

> ID：11138193
> 
> 赞同：0
> 
> 时间：2012-06-21T12:30:09.083
> 
> 标签：ios, xml, load, plist, tableview

```
-(NSString*)dataFilePath{        
    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentDirectory = [path objectAtIndex:0];

    return [documentDirectory stringByAppendingPathComponent:@"ProperyList.plist"];
} 
```

iDevice不能从这个路径加载数据，只有模拟器可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:41:34.290

首先，`NSLog`您`dataFilePath`从此方法返回的值，然后检查您的文档目录中是否存在 plist 文件 (PropertyList.plist)。使用以下代码进行检查：

```
NSFileManager *fileManager = [NSFileManager defaultManager];
BOOL success = [fileManager fileExistsAtPath:dataFilePath]; 
```

您还必须确认您是否使用了正确的文件名。iOS 设备区分大小写，而模拟器则不区分大小写。

# php - 单个用户的 MySQL pconnect 错误

> ID：11138195
> 
> 赞同：0
> 
> 时间：2012-06-21T12:30:16.667
> 
> 标签：php, mysql

我遇到一个问题，即单个用户在尝试使用 MySQL 数据库连接到网站时间歇性地收到以下错误：

```
Warning: mysql_pconnect() [function.mysql-pconnect]: Can't connect to local MySQL     server through socket '/var/lib/mysql/mysql.sock' (2) in /home/wind/public_html/db.php on line 13 
```

一个用户每次都从同一台计算机连接。她大约每天收到一次。其他 40 多个日常用户根本没有收到它，包括来自同一网络的用户。有什么想法吗？我的猜想是这应该平等地影响每个人——但我可能错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:33:15.010

如果她收到太多连接，请从 mysql.ini 文件更改最大允许连接到 mysql

# oop - Scala 和 OO：在超类中指定层次结构

> ID：11138199
> 
> 赞同：0
> 
> 时间：2012-06-21T12:30:29.997
> 
> 标签：oop, scala, inheritance

假设我正在创建一个超类 Animalia。它可能有大量的子类：例如智人、黑猩猩脊索动物、哺乳动物昆虫等。现在能够在超类中指定子类级别非常有用：门、科、属、物种等. 这将允许我们使用类似`self.Family.Type` or的东西`self.Species.Type`。因此，人类的 self.Genus.Type 将是 Homo，而 self.Family.Type 将是 Hominadae。这是我经常发现自己在自己的代码中想要的东西。我想使用 self 类型，但我不能，因为我无法在预期的继承层次结构中指定级别。

这可能还允许我们做其他事情，例如指定一个类不能在物种级别之上实例化，或者某些成员必须在某些级别成为最终的。所以我们可能有 val bool 分化的组织，必须在 Phylum 级别完成。我们还可以指定一个物种不能直接从 Animalia 继承，而是从一个 Genus 继承，该 Genus 必须从一个 Family 等继承。

我刚刚以 Animalia 为例，因为它是一个易于理解的复杂层次结构。所以我对生物学不感兴趣，但作为对评论的回应，动物界可能有：

```
class Animalia {
Type fundamentalCellType = Eucharyotic // All sub species inherit from this.
val HasDifferentiatedTissues: Boolean
} 
```

**目前有什么方法可以用 Scala 做这些吗？如果没有，是否有任何文章论文等在 Scala、其他语言或一般 OO 理论中讨论这个问题？**我什么都没找到，但我敢肯定我不会是第一个想要这种功能的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:18:54.233

OO 继承建模比看起来要简单。`extends`关键字是“is-a”关系的同义词。因此，“黑猩猩是灵长类动物，所有灵长类动物都是哺乳动物”是有意义的，因此您可以将这种关系建模为：

```
trait Primate extends Mammal
class Chimp extends Primate 
```

但是“灵长类动物是一种秩序”的关系并不成立。所以你不能通过继承来建模它。但是，“Primate order is an Order”是有意义的，您可以将此关系建模为：

```
object Primates extends Order
object Mammals extends Klass 
```

然后您可以说“Chimp 属于 PrimateOrder”，但这是一种不同的关系，您可以将其建模为：

```
trait Animal {
  def order: Order
  def klass: Klass
}
trait Mammal extends Animal {
  val klass = Mammals
}
trait Primate extends Mammal {
  val order = Primates
}
class Chimp extends Primate

chimp.order //=> Primates
chimp.klass //=> Mammals 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:47:53.007

您将*继承*层次结构与事物的层次生物分类混淆了！例如; 为什么会`Chimpanzee` *是*一个`Animalia`？为什么一个物种*会是*一个门？这些是不同的概念。

您真正要寻找的是*聚合*（为我缺乏生物学正确性而道歉）

```
trait Animalia { def phyla: List[Phylum] } 
```

那么我们可能有：

```
trait Family { def phylum: Phylum }
trait Genus { def family: Family }
trait Species { def genus: Genus } 
```

还有一个例子：

```
object Primates extends Family { val phylum = Mammals }
object Apes extends Genus { val family = Primates }
object HomoSapiens extends Species { val genus = Apes } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:59:27.537

答案的第一步可能如下所示

```
class Animalia {
  Type FundamentalCellType = Eucharyotic // All sub species inherit from this.
  val HasDifferentiatedTissues: Boolean

  type PhylumT <: Animalia
  val phylum : PhylumT
  type KlassT <: phylum.type //Not sure if this would work.
  val klass: KlassT
  type GenusT <: klass.type  //intermediate classification left out for simplicity
  val genus: GenusT
} 
```

# html - 如图所示，如何在 Metro 应用程序中创建不同的组？

> ID：11138204
> 
> 赞同：1
> 
> 时间：2012-06-21T12:30:34.630
> 
> 标签：html, microsoft-metro, winjs

我为两个组创建了两个组，如下所示，我有图像和图像下方的一些数据。但对于第二组，我不想显示任何图像，我只想显示用户数据。如果我在第二组中进行任何更改，它会影响我不想发生的两个组。我无法为不同的组编写不同的逻辑。谁能帮我提供一些样本来解决这个问题？我希望我的问题很清楚。

谢谢你。

这是我的图片，显示了我的要求的示例演示

![在此处输入图像描述](../Images/9f7f76fe26ac4cc122e6ad79b54b1f07.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T23:50:13.233

您需要创建一个自定义渲染器函数，然后可以根据数据内容选择要使用的模板。然后，不要引用定义模板的 DOM 元素，而是引用自定义渲染器函数。

查看[ListView 项目模板示例](http://code.msdn.microsoft.com/windowsapps/ListView-item-templates-7d74826f/sourcecode?fileId=50887&pathId=1418094029)，了解有关如何构建自定义渲染器函数的信息。

# javascript - 将图像的 onError 函数转换为 return

> ID：11138205
> 
> 赞同：2
> 
> 时间：2012-06-21T12:30:37.153
> 
> 标签：javascript, onload, onerror

所以我需要一个函数来测试图像是否可以加载。这是我所拥有的：

```
function imgExists(url){
    var img = new Image();
    img.onerror = function(){
        alert('error')
    }
    img.onload = function (){
    alert('load')
    }
    img.src = url;
}

imgExists('http://hashtraffic.com/img/jackson@2x.png') 
```

问题是警报被困在他们赢得的功能中。如果图像加载，我怎样才能让`imgExists()`函数返回 true，否则返回 false？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T12:34:41.037

您需要使用回调，因为您的函数本质上是异步的：

```
function imgExists(url, callback) {
    var img = new Image();
    img.onerror = function() {
        callback(false);
    }
    img.onload = function () {
        callback(true);
    }
    img.src = url;
}

function checkImage(exists) {
    alert("Image exists: " + exists); // Usage example.
}

imgExists('http://hashtraffic.com/img/jackson@2x.png', checkImage); 
```

# java - Spring RMI 远程注解配置

> ID：11138207
> 
> 赞同：2
> 
> 时间：2012-06-21T12:30:45.173
> 
> 标签：java, spring, rmi

我一直在为此寻找一些时间，但我似乎无法找到答案。我正在使用 Spring RMI 远程处理，我想使用注释配置。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:58:42.190

据我所知，spring 没有基于标准注释的 RMI 支持。我遇到了[这个链接](http://rpgkan.blogspot.in/2010/05/rmi-remote-server-on-spring-framework.html)（*它的泰语*），它简要介绍了创建一个可以在 spring 容器环境中使用的**自定义注释。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-29T15:15:48.450

正如@Santosh 回答的那样，RMI 支持没有标准注释。但是您可以使用标准 bean 注释来注册 RMI bean。

在服务端执行此操作（参数 barService 是 Spring 注入的服务的实现 -> 所以需要已经注册了这样的 bean）：

```
@Bean
public RmiServiceExporter registerService(BarService barService) {
    RmiServiceExporter rmiServiceExporter = new RmiServiceExporter();
    rmiServiceExporter.setServiceName("BarService");
    rmiServiceExporter.setService(barService);
    rmiServiceExporter.setServiceInterface(BarService.class);
    rmiServiceExporter.setRegistryPort(5000);

    return rmiServiceExporter;
} 
```

客户端：

```
@Bean
public BarService createBarServiceLink() {
    RmiProxyFactoryBean rmiProxyFactoryBean = new RmiProxyFactoryBean();
    rmiProxyFactoryBean.setServiceUrl("rmi://localhost:5000/BarService");
    rmiProxyFactoryBean.setServiceInterface(BarService.class);
    rmiProxyFactoryBean.afterPropertiesSet();
    return (BarService) rmiProxyFactoryBean.getObject();
} 
```

# wpf - 如何防止由 d:DataContext 绑定引起的设计时错误

> ID：11138209
> 
> 赞同：2
> 
> 时间：2012-06-21T12:30:45.767
> 
> 标签：wpf, mvvm, design-time

使用 将 ViewModel 附加到 View 是相当方便的 `d:DataContext="{d:DesignInstance ViewModel}"`，但是在这种情况下，View 设计者开始创建 ViewModel 的实例并因异常而崩溃。

例如，我在 ViewModel 中有一个命令，它的可用性取决于从数据库加载的统计信息。可视化设计器无法加载统计信息，并且统计信息保持不变`null`，因此该命令引发异常并且设计器崩溃。

是否有解决此问题的选项，或者我是否必须删除与 ViewModel 的绑定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:53:00.380

通常，您有一个单独的设计视图模型（存根）返回测试数据。您可以从您的真实 ViewModel 继承并设置虚拟默认值，或者拥有一个具有相同命名属性的完全独立的 ViewModel。

我通常发现在 WPF 中将所有内容初始化为某个默认值是一个好主意

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:53:02.653

除非您`IsDesignTimeCreatable`在 DesignInstance 标记中进行设置，否则它实际上不会通过其构造函数实例化数据上下文类。它只会创建一个具有相同“数据形状”的实例。此虚假数据形状的默认内容可以包含空值，因此您需要在使用数据上下文的类中进行修复，这样如果数据未初始化，它们就不会使设计器崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T14:00:23.893

好吧，您的视图模型的构造函数在设计时构造数据上下文很累并且失败了。

一个原因可能是。可能是您正在使用配置中的一些数据连接。

最简单的方法是将视图模型的构造函数代码放入 try catch 块中，以便更好地检查其失败的位置。

像

```
public class myViewmodel()
{
 public myViewmodel()
{

try
{
// build your data context.
}
catch(Exception ex)
{
//show the messages
}

} 
```

}

# jquery-mobile - 在 jquery mobile 中为导航栏创建自定义图标时出现问题

> ID：11138213
> 
> 赞同：1
> 
> 时间：2012-06-21T12:31:08.810
> 
> 标签：jquery-mobile

以为我找到了通过此链接为导航栏创建自定义图标时遇到的问题的解决方案

***HTML***

```
<div data-role="page">  
    <div data-role="content">
        <div data-role="footer" class="nav-glyphish-example">
            <div data-role="navbar" class="nav-glyphish-example" data-grid="d">
            <ul>
                <li><a href="#" id="favorite" data-icon="custom">Favorite</a></li>
                <li><a href="#" id="recent" data-icon="custom">Recent</a></li>
                <li><a href="#" id="contacts" data-icon="custom">Contacts</a></li>
                <li><a href="#" id="keypad" data-icon="custom">Keypad</a></li>
                <li><a href="#" id="voicemail" data-icon="custom">Voicemail</a></li>
            </ul>
            </div>
        </div>
     </div>
 </div> 
```

**演示：http:** [//jsfiddle.net/vh4Ca/62/](http://jsfiddle.net/vh4Ca/62/)

但我仍然有问题。我无法将其设置`border radius`为`none`并且图标具有深色背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T10:04:35.457

这在 jQuery Navbars 中对我有用：

在 HTML 中，将**class="ui-icon-nodisc"**添加到您设置数据图标的位置

```
<a href="link.html" data-icon="custom" id="linkid" data-iconshadow="false" class="ui-icon-nodisc">Diplay Information</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T01:17:04.830

要解决深色背景问题，您需要在 Photoshop 中打开该图标并将其删除。与 jQuery 无关。

如果您不想使用深色背景，您的图标需要具有透明背景。只需将您的图标格式设置为启用 Alpha 通道的 PNG 并删除背景。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T13:19:33.667

好吧，设计师设计的[Glyphish 图标](http://glyphish.com/)是深色的

*   [http://glyphish.com/images/demo.png](http://glyphish.com/images/demo.png)

更新主题为您提供更多控制权

*   [http://jsfiddle.net/p9fC5/2/](http://jsfiddle.net/p9fC5/2/)

按钮选项我的帮助

*   [http://jquerymobile.com/demos/1.1.0/docs/buttons/buttons-options.html](http://jquerymobile.com/demos/1.1.0/docs/buttons/buttons-options.html)

应用了主题的 HTML

```
<div data-role="page">  
    <div data-role="content"> 
        <!-- Adding theme b -->
        <div data-role="footer" class="nav-glyphish-example" data-theme="b"> 
            <div data-role="navbar" class="nav-glyphish-example" data-grid="d"> 
            <ul> 
                <li>
                    <!-- Adding theme a -->
                    <a href="#" id="favorite" data-icon="custom" data-theme="a">Favorite</a></li> 
                <li><a href="#" id="recent" data-icon="custom">Recent</a></li> 
                <li><a href="#" id="contacts" data-icon="custom">Contacts</a></li> 
                <li><a href="#" id="keypad" data-icon="custom">Keypad</a></li> 
                <li><a href="#" id="voicemail" data-icon="custom">Voicemail</a></li> 
            </ul> 
            </div> 
        </div> 
     </div>
 </div> ​ 
```

CSS用于定位图标

```
.nav-glyphish-example .ui-btn .ui-btn-inner {
    padding-top: 40px !important; 
}

.nav-glyphish-example .ui-btn .ui-icon { 
    width: 45px!important; 
    height: 35px!important; 
    margin-left: -24px !important; 
    box-shadow: none!important; 
    -moz-box-shadow: none!important; 
    -webkit-box-shadow: none!important;
    -webkit-border-radius: none !important;
    border-radius: none !important; 
}

#favorite .ui-icon { 
    background-image: url(http://glyphish.com/images/demo.png);
    background-position: -345px -112px;
    background-repeat: no-repeat;
}

#recent .ui-icon { 
    background-image: url(http://glyphish.com/images/demo.png);
    background-position: -9px -61px;
    background-repeat: no-repeat; 
}

#contacts .ui-icon { 
    background-image: url(http://glyphish.com/images/demo.png);
    background-position: -9px -540px;
    background-repeat: no-repeat; 
}

#keypad .ui-icon { 
    background-image: url(http://glyphish.com/images/demo.png);
    background-position: -9px -783px;
    background-repeat: no-repeat; 
}

#voicemail .ui-icon { 
    background-image: url(http://glyphish.com/images/demo.png);
    background-position: -394px -733px;
    background-repeat: no-repeat; 
}

​ 
```

# http - EntityTag - 值、缓存、比较 - 如何在泽西岛

> ID：11138215
> 
> 赞同：5
> 
> 时间：2012-06-21T12:31:19.540
> 
> 标签：http, rest, jersey

目前我正在尝试为我的球衣宁静服务启用缓存。

所以出现了一些问题。

1.  entityTag 的值是多少？它可以只是一个唯一生成的随机字符串吗？

2.  当我从客户端向服务器发出发布请求时，我会返回带有实体标签的响应。问题：如何缓存它以及我如何知道我必须为下一个获取请求发送哪个缓存的 entityTag？

3.  在服务器端，我得到了发送的 entityTag。我如何将其与资源进行比较？因为我没有将 entityTag 附加到资源。

4.  它只是关于比较实体标签。那么我什么时候需要最后修改的标头值呢？

抱歉，很高兴获得服务器和客户端的示例。我找不到任何关于这个问题的东西。如何在请求中发送 entityTags，如何在服务器端比较它们以及最后修改的内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T08:54:23.323

ETag 为客户端缓存提供了一种机制，以验证其缓存的内容是否仍然是最新的。关于你的问题：

1.  由服务器决定 - 它必须在给定时间点唯一标识资源的版本（可以是资源的修订号，或资源表示的 CRC32 散列，或任何其他可用于确定资源是否已更改）
2.  Jersey 目前不提供对客户端缓存的任何支持。您可以通过实现拦截客户端请求的 ClientFilter 创建自己的缓存，查看将 URI、媒体类型和请求方法映射到缓存响应的内部 HashMap（例如）。从该缓存响应中获取 ETag 并将其附加到客户端请求。当服务器响应时，过滤器检查服务器是否响应了 304（未修改）状态码，如果是，则过滤器将之前缓存的响应返回给客户端，如果没有，则缓存服务器返回的响应并将其返回给客户端客户。
3.  通过在请求中发送实体标签，客户端基本上说：“我有一个对应于这个实体标签的实体版本 - 实体仍然是一样的，还是已经改变了？如果它已经改变，给我发送新版本的实体和标签！”。如果服务器在初始响应中没有发送任何实体标签，则客户端不知道缓存实体对应的标签，因此它无法在其请求中发送标签。服务器知道标签的含义——对于客户端，标签值是不透明的。
4.  您可以选择其中之一或两者兼而有之。

在服务器端，Jersey 支持评估 ETag 和生成响应。例如，您的资源方法可能如下所示：

```
@GET
public Response doGet() {
    EntityTag et = yourMethodForCalculatingEntityTagForThisResource();

    // the following method call will result in Jersey checking the headers of the
    // incoming request, comparing them with the entity tag generated for
    // the current version of the resource generates "304 Not Modified" response
    // if the same. Otherwise returns null.
    ResponseBuilder rb = request.evaluatePreconditions(new EntityTag("1"));
    if (rb != null) {
        // Jersey generated 304 response - return it
        return rb.build();
    }
    // return the current version of the resource with the corresponding tag
    return Response.ok(getCurrentVersion(), "text/plain").tag(et).build();
} 
```

为 last-modified 标头以及 etag 和 last-modified 提供了相同类型的支持。

这篇维基百科文章很好地概述了 ETag：[http ://en.wikipedia.org/wiki/HTTP_ETag](http://en.wikipedia.org/wiki/HTTP_ETag)

# matlab - 检查矩阵中的每个矩阵元素并将结果放入变量中

> ID：11138219
> 
> 赞同：-1
> 
> 时间：2012-06-21T12:31:36.170
> 
> 标签：matlab

我有一个矩阵`v`：

```
0     1     0     0     1     1
1     0     1     1     0     0
0     1     0     1     0     0
0     1     1     0     0     1
1     0     0     0     0     0
1     0     0     1     0     0 
```

我需要使用循环检查此矩阵中的每个元素（如果元素为 0，则结​​果将为 -1，如果元素为 1，则结果将为 0）。每个元素的结果将在一个变量中，以便在另一个操作中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:37:13.473

您只需减去与 大小相同的矩阵`v`，无需循环：

```
>> v = [0     1     0     0     1     1
 1     0     1     1     0     0
 0     1     0     1     0     0
 0     1     1     0     0     1
 1     0     0     0     0     0
 1     0     0     1     0     0];

>> v - ones(size(v))

ans =

    -1     0    -1    -1     0     0
     0    -1     0     0    -1    -1
    -1     0    -1     0    -1    -1
    -1     0     0    -1    -1     0
     0    -1    -1    -1    -1    -1
     0    -1    -1     0    -1    -1 
```

甚至只是`v - 1`，正如@Andrey 所指出的那样。

似乎@Veger 在我写这篇文章时得到了他的评论，所以请给他们的评论一些爱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:18:44.443

试试看嘛

[x,y] = 查找（V==1）

找到值为 1 的位置。

# .net - 基于 GMT 的 Microsoft Enterprise Logger 文件翻转

> ID：11138221
> 
> 赞同：0
> 
> 时间：2012-06-21T12:31:42.163
> 
> 标签：.net, enterprise-library

我正在为我的应用程序使用 Microsoft Enterprise Logger。我将滚动间隔设置为午夜。一切都按预期完美运行，但问题是本地机器需要时间来翻转。有没有办法根据格林威治标准时间（或任何其他更通用的时区）而不是当地时间来滚动文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:16:15.923

不，滚动平面文件跟踪侦听器使用本地机器时间。对于基于任意时区的滚动，请使用提供的[源](http://download.microsoft.com/download/A/5/B/A5BF3B05-CB8A-40FE-B3E0-93FA84136D2B/Enterprise%20Library%205.0%20-%20Source%20Code.msi)并根据需要进行修改。

此外，如果您希望将来将此添加到 EntLib，请通过[uservoice](http://entlib.uservoice.com)提出建议。

# html - 页面字段定位表单冲突的处理方法

> ID：11138228
> 
> 赞同：0
> 
> 时间：2012-06-21T12:32:07.123
> 
> 标签：html, css, forms

我必须制作一个看起来像下面绘画的页面，但是：

**字段 1**和字段**4**与**提交 2**在一个**表格中**

 ****字段 2**和字段**3**在一个（另一个）**表单**中，**提交 1**

你知道任何样式定位html组件的方法来处理它吗？

![在此处输入图像描述](../Images/c21b61c4c611248eaae65164a48ead77.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:43:10.457

试试这个代码（我同意 Wivlaro ）

```
 <form id="form1" action="">
<br/>
    <input type="text" id="field2" value="field2"/><br/><br/>
    <input type="text" id="field3"  value="field3"/><br/><br/>
    <input type="submit" value="Submit 1" />
    </form>

<form id="form2" action="">
    <input type="text" id="field1"  value="field1"/><br/><br/>
    <input type="text" id="field4"  value="field4"/><br/><br/>
    <input type="submit" id="submit2" value="Submit 2" />   
</form>

<style>
    #field1{
        position:absolute;
        top:0;      
    }
    #form2{
        margin-top:-18px    
    }
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:41:28.743

我认为将字段放在他们自己的提交表单旁边会更有意义，以便用户的心理模型与应用程序的行为相匹配。

但是，如果你**必须**这样做，你可以使用一些像这样的 CSS for field1 将它移动到其他两个之上（只要布局相当固定）：

```
position:relative;
top: -100px; /* Pick an appropriate number and unit */ 
```

然后你可以给字段 1 的容器一些负的顶部填充或边距来补偿缺失的高度。

虽然很丑。**

# android - 在 ListView 中，仅使按钮可点击

> ID：11138231
> 
> 赞同：0
> 
> 时间：2012-06-21T12:32:11.820
> 
> 标签：android

我已经实现了一个列表视图。

我的列表视图中的每个项目都有两个元素 - 一个 TextView 和一个 Button。

现在我已经实现了 ArrayList 适配器以使我的列表视图可点击。

目前发生的情况是，每当我单击列表视图中的任何元素时，都会调用 OnItemClickListener。

现在我想做的是我只想让我的按钮点击而不是整个元素。

这是我已经实现的代码。

```
public class SurveyListActivity extends ListActivity {

static private ArrayList<Survey> EU=new ArrayList<Survey>();

static {

        EU.add(new Survey(R.string.Survey1, R.drawable.completed,R.string.Survey1));
        EU.add(new Survey(R.string.Survey2, R.drawable.completed,R.string.Survey2));
        EU.add(new Survey(R.string.Survey3, R.drawable.inprogress,R.string.Survey3));
        EU.add(new Survey(R.string.Survey4, R.drawable.inprogress,R.string.Survey4));
        EU.add(new Survey(R.string.Survey5,R.drawable.inprogress,R.string.Survey5));
        EU.add(new Survey(R.string.Survey6, R.drawable.start,R.string.Survey6));

}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    setListAdapter(new SurveyAdapter());
}

@Override
protected void onListItemClick(ListView l, View v,int position, long id) 
{

    Toast.makeText(SurveyListActivity.this, "You Selected :- " + EU.get(position).name, Toast.LENGTH_LONG).show();

}

static class Survey 
{
    int name;
    int status;
    int result;

    Survey(int name, int status, int result) 
    {
        this.name=name;
        this.status=status;
        this.result=result;
    }
}

class SurveyAdapter extends ArrayAdapter<Survey> 
{
    SurveyAdapter() 
    {

        super(SurveyListActivity.this, R.layout.row, R.id.name, EU);
    }

    @Override
    public View getView(int position, View convertView,
    ViewGroup parent) 
    {
        SurveyWrapper wrapper=null;

        if (convertView==null) 
        {
            convertView=getLayoutInflater().inflate(R.layout.row, null);
            wrapper=new SurveyWrapper(convertView);
            convertView.setTag(wrapper);
        }
        else 
        {
            wrapper=(SurveyWrapper)convertView.getTag();
        }

        wrapper.populateFrom(getItem(position),position);
        return(convertView);
    }
}

class SurveyWrapper 
{
    private TextView name=null;
    private ImageView status=null;
    private View row=null;

    SurveyWrapper(View row) 
    {
        this.row=row;
    }

    TextView getName() 
    {
        if (name==null) 
        {
            name=(TextView)row.findViewById(R.id.name);
        }
        return(name);
    }

    ImageView getstatus() 
    {
        if (status==null) 
        {
            status=(ImageView)row.findViewById(R.id.flag);
        }
        return(status);
    }

    void populateFrom(Survey survey, int i) 
    {
        if((i%2)!=0)
        {

            row.setBackgroundColor(Color.LTGRAY);
            getName().setBackgroundColor(Color.LTGRAY);
        }
        getName().setText(survey.name);
        getstatus().setImageResource(survey.status);

    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:41:40.187

如果我理解正确，您需要删除 onItemClickedListener 并将 onClick 侦听器附加到按钮。您应该能够在行布局 xml 中设置一个通用按钮单击侦听器，并确定通过视图对象的父级（应该是 ListView）单击哪个按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:45:21.440

`onListItemClick`将做到这一点：响应单击项目上的任何位置。如果您只想让项目中的部分视图可点击，请`getView`在适配器中执行此操作：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) 
{
    SurveyWrapper wrapper=null;

    if (convertView==null) 
    {
        convertView=getLayoutInflater().inflate(R.layout.row, null);
        wrapper=new SurveyWrapper(convertView);
        convertView.setTag(wrapper);
    }
    else 
    {
        wrapper=(SurveyWrapper)convertView.getTag();
    }

    wrapper.populateFrom(getItem(position),position);
    convertView.findViewById(R.id.my_button).setOnClickListener(new onClickListener() {
        @Override
        public void onClick(View v) {
            Toast.makeText(SurveyListActivity.this, "You Selected :- " + EU.get(position).name, Toast.LENGTH_LONG).show();
        }
    });
    return(convertView);
} 
```

并彻底删除`onItemClickListener`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T14:11:55.337

使用自定义适配器，然后将 setOnClickListener 添加到特定项目（按钮）

```
Button btnAction= (Button)v.findViewById(R.id.btnAction);

btnAction.setOnClickListener(new View.OnClickListener() {

                      @Override
                      public void onClick(View view) {
                            Toast toast = Toast.makeText(mContext.getApplicationContext(), "Click", Toast.LENGTH_SHORT);
                            toast.show(); 
                      }
                    }); 
```

# android - Android布局不正常

> ID：11138239
> 
> 赞同：0
> 
> 时间：2012-06-21T12:32:34.013
> 
> 标签：android, layout

我想在我的应用程序中遵循布局。顶部的按钮，底部的第二个按钮和第三个按钮占据整个中间空间。以下代码我正在使用 bt 它没有显示第二个按钮。如何达到效果？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:id="@+id/LinearLayout01"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical">
           <!--view=2-->

   <Button
    android:id="@+id/button2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Save" 
     />

<Button
    android:id="@+id/button4"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:text="Previous" 
  />
 <Button
    android:id="@+id/button5"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"

    android:text="Next" 
   />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:37:52.667

你可以通过Relative Layout来实现

干得好

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout01"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    <!-- view=2 -->

    <Button
        android:id="@+id/button2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Save" />

    <Button
        android:id="@+id/button4"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="Previous" />

    <Button
        android:id="@+id/button5"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/button4"
        android:layout_below="@+id/button2"
        android:text="Next" />

</RelativeLayout> 
```

引用OP的第二个问题

> 如果在第一行有三个按钮，那么我应该在 android:layout_below 中使用什么参考

干得好

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout01"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <!-- view=2 -->

    <LinearLayout
        android:id="@+id/LinearLayout01"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button2"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Save" />

        <Button
            android:id="@+id/button12"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Save" />

        <Button
            android:id="@+id/button22"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Save" />
    </LinearLayout>

    <Button
        android:id="@+id/button4"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="Previous" />

    <Button
        android:id="@+id/button5"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/button4"
        android:layout_below="@+id/LinearLayout01"
        android:text="Next" />

</RelativeLayout> 
```

它会给你以下输出

![在此处输入图像描述](../Images/3e59283e740714a0b73c01a9372cee2b.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T12:38:25.040

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout01"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:weightSum="1" >

    <!-- view=2 -->

    <Button
        android:id="@+id/button2"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight=".1"
        android:text="Save" />

    <Button
        android:id="@+id/button4"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight=".8"
        android:text="Previous" />

    <Button
        android:id="@+id/button5"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight=".1"
        android:text="Next" />

</LinearLayout> 
```

![在此处输入图像描述](../Images/9672f07e4b680a1c7f8e6ccc2fcf7cc4.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:36:36.687

```
<LinearLayout android:id="@+id/LinearLayout01"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical">

           <!--view=2-->

    <Button
        android:id="@+id/button2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Save" />

<Button
    android:id="@+id/button4"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Previous" />

 <Button
     android:id="@+id/button5"
     android:layout_width="fill_parent"
     android:layout_height="match_parent"
     android:text="Next" />

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T12:37:23.400

改为使用`RelativeLayout`。尝试从上到下放置按钮。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T12:39:16.700

这是代码

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout01"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<!-- view=2 -->

<Button
    android:id="@+id/button2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Save" />

<Button
    android:id="@+id/button5"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:text="Next" />

<Button
    android:id="@+id/button4"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/button5"
    android:layout_below="@+id/button2"
    android:text="Previous" />

</RelativeLayout> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T12:44:08.147

我想你必须随心所欲地尝试这个

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:weightSum="9">

   <Button
    android:id="@+id/button2"
    android:layout_weight="4"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="Save" 
     />

<Button
    android:id="@+id/button4"
     android:layout_weight="1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="Previous" 
  />
 <Button
    android:id="@+id/button5"
     android:layout_weight="4"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="Next" 
   />
</LinearLayout> 
```

如果您想更改占用的屏幕只需修改该按钮的重量，此布局会根据需要划分按钮。但我建议您改用相对布局，这会使您的工作变得轻松..

# node.js - 检查用户身份

> ID：11138240
> 
> 赞同：0
> 
> 时间：2012-06-21T12:32:35.077
> 
> 标签：node.js, authentication, express, mongoose

我有允许我检查用户身份验证的中间件，这里是：

```
function checkAuth(req, res, next) {
 if (!req.session.user_id) {
   res.redirect('/login');
 } else {
    next();
 } 
} 
```

我有两个问题；

1.  它是强大的用户身份验证检查吗？或者我应该像下面这样检查数据库中的 user.id：

    ```
    if (!req.session.user_id) {
       res.redirect('/login');
    } else {
      User.findById(req.session.user_id, function (err, user) {
        if (!user) return res.redirect('/login');
        else return next();
     })
    } 
    ```

2.  如果检查失败，我会重定向到登录页面：

    ```
     res.redirect('/login'); 
    ```

    但如果我收到 AJAX 请求，我应该发送以下内容（我认为）

    ```
     res.send(403, 'Permission denied'); 
    ```

    那么如何检查请求类型并发送适当类型的响应呢？像上面那样做正确的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:37:54.107

检查会话就足够了。服务器会话和客户端会话之间存在映射，这就是它足够安全的原因。当然，如果您想要“绝对”安全性（但不存在 100% 安全性），那么您正在使用 SSL。

以下是 Django/RoR 如何检查请求是否来自 AJAX 调用（在 node.js 代码中转换）：

```
function isXHR( req, res ) {
    return !!req.header( 'HTTP_X_REQUESTED_WITH' ) === 'XMLHttpRequest';
} 
```

但是，这意味着 XHR 调用必须包含此 HTTP 标头。大多数库都这样做（jQuery、Dojo、YUI、...），但如果您正在执行手动 XHR 请求，则一定不要忘记包含它。

另一种可能适合您需求的方式：

```
function isJSON( req, res ) {
    return !!req.header( 'Content-Type' ) === 'application/json';
} 
```

在那里，您正在检查`Content-Type`标题。如果它询问一些 JSON 数据（就像大多数 XHR 请求一样），你向它发送一些 JSON 数据。

# iphone - 使用/不使用 AVFoundation 获取本地存储图像的基地址？

> ID：11138245
> 
> 赞同：1
> 
> 时间：2012-06-21T12:32:51.147
> 
> 标签：iphone, objective-c, ios, avfoundation

我没有使用 AVCaptureSession，而是将图像存储在 Xcode 项目的资源文件夹中。我需要像 AVCaptureOutput 一样获取图像的基地址和所有相关信息，但不使用 AVCaptureOutput。

或者，如果有一种方法可以使用 AVFoundation 来获取相同的详细信息，但对于本地存储的图像，我会怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:16:09.163

使用以下内容获取信息：

```
UIImage *image = [UIImage imageNamed:@"something.jpg"];
NSData  *dataObj = UIImageJPEGRepresentation(image, 1.0);
CGImageRef cgImage = [image CGImage] ;
NSUInteger width = CGImageGetWidth(cgImage);
NSUInteger height = CGImageGetHeight(cgImage)
unsigned char *rawData = (unsigned char*) calloc(height * width * 4, sizeof(unsigned char));
NSLog(@"rawdata %u",rawData); 
```

不过，面对一个问题，我将如何记录 rawdata 的日志。我正在使用 %u，但它返回一些随机数，因为它是无符号字符，我应该使用 %c，但对于 %c，它返回空白。

# r - 使用字符串键生成列表？

> ID：11138259
> 
> 赞同：0
> 
> 时间：2012-06-21T12:33:37.450
> 
> 标签：r

我有两个向量，v1 和 v2

```
v1 <- c('one', 'two', 'three')
v2 <- c('two', 'three', 'four') 
```

我想创建一个产生的列表：

```
"two" : "two", "three" : "three" 
```

目前，我只能生成以下代码：

```
> l <- list()
> l <- c(l, subset(v1, v1 %in% v2)
> l
    [[1]]
    [1] "two"

    [[2]]
    [1] "three" 
```

如何使键成为实际值而不是索引？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:52:51.853

我不确定您所说的“键”是什么意思，但我猜您希望列表节点的“名称”与值相同：

```
l <- c(l, subset(v1, v1 %in% v2) )
names(l) <- unlist(l)
 l
$two
[1] "two"

$three
[1] "three" 
```

（我反对将列表命名为“l”，因为 l 和 1 字符在 serif 字体中经常令人困惑地相似。更不用说 l 和 I 在非衬线字体中的歧义了。）

# deprecated - 以编程方式折旧运行 ax 4

> ID：11138260
> 
> 赞同：1
> 
> 时间：2012-06-21T12:33:39.260
> 
> 标签：deprecated, axapta, x++, ax

我想要一些关于在 X++ 中创建折旧运行的帮助，变量是资产和结束日期中的帐号。

我非常有效地创建了 LedgerJournalTable、LedgerJournalName、LedgerJournalTrans 但不了解 AssetProposal 的 LedgerJournalEngine

到目前为止的代码：

```
client static void DepreciationRun()
{
AssetProposal assetProposal ;// = AssetProposal::construct();
LedgerJournalTable _ledgerJournalTable;// = args.caller()._ledgerJournalTable();
LedgerJournalName ledgerJournalName;
LedgerJournalEngine ledgerJournalEngine;// = args.caller().ledgerJournalEngine();
FormDataSource formDataSource ;// = args.record().dataSource();
LedgerJournalTrans ledgerJournalTrans ;// = args.record();
Voucher lastVoucher; Str 10 Type = "FAD";
;
switch(Type)
{
case "FAD":
assetProposal = new AssetProposalDepreciation();
break;
case "ACC":
assetProposal = new AssetProposalAcquisition();
ledgerJournalName = LedgerJournalName::find("Fixed Asset Acquisition");
break;
}
assetProposal.getLast();
ledgerJournalName = LedgerJournalName::find("GL_Daily");
_ledgerJournalTable.JournalNum = NumberSeq::newGetVoucherFromCode(ledgerJournalName.VoucherSeries).voucher(); //Generate
_ledgerJournalTable.JournalName = ledgerJournalName.JournalName;
_ledgerJournalTable.JournalType = LedgerJournalType::Daily;
_ledgerJournalTable.Name = ledgerJournalName.Name;
_ledgerJournalTable.LedgerJournalInclTax = NoYes::Yes;
_ledgerJournalTable.initValue();
_ledgerJournalTable.insert();
ledgerJournalName = LedgerJournalName::find(Type);
//ledgerJournalTrans.Voucher = NumberSeq::newGetVoucherFromCode(ledgerJournalName.VoucherSeries).voucher();
ledgerJournalTrans.initValue();
ledgerJournalTrans.JournalNum = _ledgerJournalTable.JournalNum;
ledgerJournalTrans.Voucher = NumberSeq::newGetVoucherFromCode(ledgerJournalName.VoucherSeries).voucher();
//ledgerJournalTrans.insert();
ledgerJournalEngine = LedgerJournalEngine::construct(_ledgerJournalTable.JournalType);
ledgerJournalEngine.newJournalActive(_ledgerJournalTable);
//ledgerJournalEngine
//ledgerJournalEngine.initValue(ledgerJournalTrans);
//Fixed Asset Depriciation
assetProposal.journalNum(_ledgerJournalTable.JournalNum);
assetProposal.parmLedgerJournalEngine(ledgerJournalEngine);
assetProposal.addBookIdRange();
assetProposal.init();
if (assetProposal.prompt())
{
// Check if line exists on form that hasn't been saved, and clear the voucher number
if (!ledgerJournalTrans.RecId && ledgerJournalTrans.Voucher)
{
ledgerJournalEngine.clearVoucher();
}
//
// Find the last voucher number. This is needed when user had done a ctrl-N to
// create a new line and then deleted the line.
//
else if (ledgerJournalTrans.RecId)
{
select firstonly Voucher from ledgerJournalTrans
order by Voucher desc
where ledgerJournalTrans.JournalNum == _ledgerJournalTable.JournalNum;
lastVoucher = ledgerJournalTrans.Voucher;
}
// run the proposal
assetProposal.run();
// update the voucher totals if reuse the voucher
if (!ledgerJournalTrans.Voucher || !ledgerJournalTrans.RecId)
{
// No lines existed where user did the proposal, need to update the
// totals for the first voucher.
if (!ledgerJournalTrans.Voucher)
{
select firstonly ledgerJournalTrans
order by Voucher
where ledgerJournalTrans.JournalNum == _ledgerJournalTable.JournalNum;
}
// User was on a new line when doing the proposal, need to update the
// totals for the voucher on that line.
else
{
ledgerJournalTrans = LedgerJournalTrans::find(_ledgerJournalTable.JournalNum, 
ledgerJournalTrans.Voucher, false);
}
}
// User was on an existing line when doing the proposal, need to update the
// total for the next voucher after the last voucher number that existed
// before doing the proposal
else
{
select firstonly ledgerJournalTrans
order by Voucher
where ledgerJournalTrans.JournalNum == _ledgerJournalTable.JournalNum &&
ledgerJournalTrans.Voucher > lastVoucher;
}
// Update the totals. This is needed because is updates variables in
// JournalEngine that control if the voucher is complete.
if (ledgerJournalTrans)
{
ledgerJournalEngine.voucherTotals(ledgerJournalTrans, true);
}
// redisplay the form
formDataSource.executeQuery();
ledgerJournalEngine.ledgerJournalTableUpdateTotals(_ledgerJournalTable,true);
} } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T03:34:49.577

代码中的任何错误，或者您为什么不使用日记帐来折旧？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:24:02.057

```
static void testAssetProposalDepriciation(Args _args)
{
    LedgerJournalTable ledgerJournalTable;
    LedgerJournalTableData journalTableData = JournalTableData::newTable(ledgerJournalTable);
    AssetProposalDepreciation assetProposal = new AssetProposalDepreciation();  //AssetProposalAcquisition();
    Query query;
    QueryBuildDataSource qbdsAssetTable;

    ttsbegin;
    ledgerJournalTable.JournalNum = journalTableData.nextJournalId();
    ledgerJournalTable.initFromLedgerJournalName("Day1");
    ledgerJournalTable.CurrencyCode = 'USD';
    ledgerJournalTable.Name = 'test';
    ledgerJournalTable.insert();

    //run proposal
    assetProposal.journalNum(ledgerJournalTable.JournalNum);

    assetProposal.addBookIdRange();
    assetProposal.init();
    assetProposal.parmAssetTransDate(systemDateGet());

    query = assetProposal.queryRun().query();
    qbdsAssetTable = query.dataSourceTable(tableNum(AssetTable));
    SysQuery::findOrCreateRange(qbdsAssetTable, fieldNum(AssetTable, AssetId)).value(QueryValue("B-0002"));

    assetProposal.run();
    //update totals
    if (journalTableData)
    {
        journalTableData.initTotal();
        journalTableData.journalTable().write();
    }
    ttscommit;
} 
```

# joomla - 通过电子邮件设置的 Joomla 密码

> ID：11138268
> 
> 赞同：3
> 
> 时间：2012-06-21T12:34:16.360
> 
> 标签：joomla, passwords, registration, joomla2.5

我正在使用 Joomla 2.5。

在我的网站上，当用户注册时，她/他会收到一个密码，然后用户必须登录并更改它。这和大多数无关紧要的东西一样惹恼了人们。我想回到标准在注册表中输入自己的密码，密码创建和降低规则，以便用户注册。我有验证码，我会保留电子邮件检查，但这个创建的密码都不需要更改，需要数字、大写字母和小写字母。

我想知道这两件事...

我在哪里将密码创建设置回注册表单？我在哪里设置密码规则？

很抱歉，因为我确信这些要点已经在某个地方有所提及，但是我已经浏览论坛好几天了，而且没有地方可以查看了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:37:27.263

默认的 Joomla 注册表自动允许人们输入他们选择的密码。除非有某种插件可以实现这一点，否则它无法为用户提供预先设置的密码然后让他们更改。如果您使用其他组件进行注册，只需更改默认的 Joomla 组件即可。至于密码规则，标准的 Joomla 组件没有任何规则，因此您很可能必须将它们编码或从[Joomla 扩展目录中查找注册组件](http://extensions.joomla.org/)

# ios - 来自本机移动应用程序的 AJAX 请求

> ID：11138273
> 
> 赞同：0
> 
> 时间：2012-06-21T12:34:26.387
> 
> 标签：ios, ajax, sencha-touch-2, native

我一直在研究这个主题，但仍然有点困惑。

我有一个 Sencha Touch 2，它在我的机器上运行良好。原因很简单，我在机器的 apache 上配置了代理，它允许我在不需要绝对路径的情况下调用服务器。即请求是通过以下方式从我的机器向服务器发出的：

```
url: /folder/subfolder/etc 
```

如果在域 abc.mydomain.com 上公开访问该应用程序也可以工作，因为服务器在同一个浏览器上，显然它可以工作。

我需要知道的是：

我现在要将这个应用程序部署为原生 IOS 应用程序。如果 URL 保留为绝对 URL，则这些 URL 将不起作用，因为由于没有配置代理，电话将无法解析该路径。但是，如果我将它们更改为绝对 URL，它们会起作用吗？根据我的阅读，手机不考虑访问源问题，因此它应该可以工作。

因此，如果我有以下要求：

```
var L_AssetAjaxConnection = new Ext.data.Connection();
        L_AssetAjaxConnection.request({
            url: /folder/subfolder/etc
            timeout: 60000,

            success: function(P_Response){
               console.write('success');
            }
        });

            failure: function(P_Response){
               console.write('failed');
            } 
```

在我在 IOS 上部署之前，我将其更改为：

```
var L_AssetAjaxConnection = new Ext.data.Connection();
        L_AssetAjaxConnection.request({
            url: http://mydomain.com/folder/subfolder/etc
            timeout: 60000,

            success: function(P_Response){
               console.write('success');
            }

            failure: function(P_Response){
               console.write('failed');
            }
        }); 
```

这在桌面上不起作用。但是，它应该在 iPhone 上部署后工作吗？

期待您的反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:54:16.127

我已经在我的 Android 手机上尝试过了，结果是，绝对 URL 可以在本机应用程序上运行，但由于安全问题，不能在台式机上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T12:47:13.693

您还可以考虑在您的域上使用[JSON-P](http://en.wikipedia.org/wiki/JSONP)或[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)，在这种情况下，任何应用程序都可以正常工作，无论是否为原生应用程序。Sencha 支持这两种技术（参见[此处](http://docs.sencha.com/touch/2-0/#!/guide/ajax)和[此处](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.JsonP)）

# mongodb - Hadoop 中的增量 MapReduce（使用 mongodb-hadoop 适配器）

> ID：11138277
> 
> 赞同：1
> 
> 时间：2012-06-21T12:34:30.773
> 
> 标签：mongodb, hadoop, mapreduce

我想在 Hadoop 中做一个 mapreduce 工作，在 MongoDB 中获取并保存结果，这要归功于 mongo-hadoop 连接器。有一种方法可以像在 MongoDB 中那样在 hadoop 中执行增量 mapreduce？

> *如果结果集中和旧集合中的给定键存在文档，则将对这两个值执行归约操作（使用指定的归约函数），并将结果写入输出集合。*

不要告诉我使用 MongoDB 的 MapReduce，因为它的性能很尴尬。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T05:20:01.000

我们目前在 Mongo-Hadoop 中不支持这种增量作业。它可能会在未来的版本中得到支持。

# asp.net - 如何从代码隐藏添加到页面的 html？

> ID：11138283
> 
> 赞同：0
> 
> 时间：2012-06-21T12:34:44.483
> 
> 标签：asp.net, html, asp.net-4.0

我正在尝试`POST`从后面的代码中使用 PayPal 或 GoogleCheckout“立即购买”按钮。

我得到了[这个](https://stackoverflow.com/a/11121196/939213)答案，告诉我添加到当前的 html 页面。但是那里的代码不能按原样工作。那里的代码添加了`literal`以下行：

```
__parent.AddControl( _lit ); 
```

这显然不能按原样工作。

怎么*办*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:46:34.290

**aspx**

```
<div runat="server" id="div"></div> 
```

**代码绑定**

```
 Literal ltr= new Literal();
  ltr.Text="mytext";
  div.Controls.Add(ltr); 
```

对我来说工作得很好

# iphone - 使用 HTML5 和 js（网络应用程序）在 iPhone 中替代 facebook 身份验证对话框

> ID：11138286
> 
> 赞同：0
> 
> 时间：2012-06-21T12:34:47.047
> 
> 标签：iphone, mobile, web, fbconnect, fbjs

我可以通过打开一个新窗口来验证 fb 用户，因此它可以张贴在他的墙上。我正在使用 HTML 5 Web 应用程序来制作它，但我的分享按钮在 iPhone 中不起作用。它不会打开一个新窗口。

我需要它的方式是单击共享按钮在同一页面上打开一个对话框（不是新窗口）和用户共享图像等。我看到了一个应用程序，但它是本机 iPhone 应用程序，但我希望它使用网络工具 HTML 5 js。

任何帮助都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:39:22.940

我在 iframe 中看到过 Facebook 股票，这可能会对您有所帮助。例如，尝试在 LivingSocial 上进行 Facebook 分享——他们使用 iframe 而不是新窗口进行操作。（例如[http://www.livingsocial.com/cities/9-philadelphia/deals/364564-20-to-spend-on-mexican-fare](http://www.livingsocial.com/cities/9-philadelphia/deals/364564-20-to-spend-on-mexican-fare)）

# arrays - 如何在 PowerShell 中创建数组数组？

> ID：11138288
> 
> 赞同：36
> 
> 时间：2012-06-21T12:34:51.940
> 
> 标签：arrays, powershell

我想在 PowerShell 中创建一个数组数组。

```
$x = @(
    @(1,2,3),
    @(4,5,6)
) 
```

它工作正常。但是，有时我在数组列表中只有一个数组。在这种情况下，PowerShell 会忽略以下列表之一：

```
$x = @(
    @(1,2,3)
)

$x[0][0] # Should return 1
Unable to index into an object of type System.Int32.
At line:1 char:7
+ $a[0][ <<<< 0]
    + CategoryInfo          : InvalidOperation: (0:Int32) [], RuntimeException
    + FullyQualifiedErrorId : CannotIndex 
```

如何创建一个数组数组，即使数组中只有一个数组项，也能保证它保持为二维数组？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-06-21T12:38:54.830

添加逗号力以创建数组：

```
$x = @(
    ,@(1,2,3)
) 
```

简单的方法：

```
$x = ,(1,2,3) 
```

# c# - 为同一个标记实现各种业务逻辑

> ID：11138292
> 
> 赞同：0
> 
> 时间：2012-06-21T12:35:08.557
> 
> 标签：c#, asp.net

再会！我正在研究一个 ASP.NET 项目 refatoringom 并遇到了这样一个问题，因为该项目是国际性的，它有几个位置，并且在业务逻辑上的许多地方，具体操作都是在不那么狡猾的帮助下解决的检查：

```
 if (IsChina) 
    {
        ...
    }
    else if (IsFrance)
    {
        ...
    } 
```

这样的代码自然会快速增长，变得难以忍受，你无法支持重用。结果，当问题出现在某个位置改变布局的时候，就不得不对后面的代码做了什么，更可怕的是。事实证明我们有两个问题： A. 对相同（相似）的业务逻辑需要不同的标记 二。需要具有不同业务逻辑的相同布局

如果第一段都只是决定了读写类的层次结构和继承，那么第二个问题，其中最重要的就是重复布局。那么我的问题是什么，我们能否以某种方式继承布局（不将其添加到后面的代码中）或借助技巧一个 ASCX 文件来绑定业务逻辑的多个实现，而这些实现又将在右侧动态连接时间。也许有类似经历的人已经经历过？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:56:56.953

我看到的关键问题是认真思考解决方案的设计。

在标记（aspx 或 ascx）中：哪些控件是常见的，哪些是可变的？常见的可以放在 MasterPageFile 上并由您的其他标记文件引用。

In Code-Behind(aspx.cs or ascx.cs)：这里只放与页面控件直接相关的逻辑。

在业务逻辑类（.cs）中：同样，应将公共元素（方法、属性等）放入“父”文件（基类）中，同时将更多独特元素放入从基类继承的“子”类中。

# python - 将 Perl For 循环转换为 Python

> ID：11138297
> 
> 赞同：1
> 
> 时间：2012-06-21T12:35:41.410
> 
> 标签：python, perl, loops, for-loop

这就是我试图转换为 python

这是我有点迷路的地方

```
 foreach (@files) {
        if ($_ =~ /_histogram/) { next; }   #Exclude all the histogram files

        for($row = 0, $mytype = 500; $row < $filearray_count; $row++) {
                if ($_ eq $filearray[$row][0]) { 
                $mytype = $filearray[$row][1]; 
                print "$row, $mytype,  $_ \n";
                break;
        }}

        $myfile = $mydir.$_; 

        if ($mytype > 0) {
            open($in,  "<",  ($myfile)) or die "Can't open source file $myfile: $!";

            if ($mytype >= 500) { $mytype += ++$new_attribute; }
            #print "$row, $mytype,  $_ \n";
                    this while loop is confusing. Is it setting $Instring equal to $in?
            while ($inString = <$in>) {
                $inString =~ s/^\s*(.*)\s*$/$1/;
                if ($inString =~ /Feature File Version:/) { next; }
                if ($mytype eq 11 && $inString !~ /Subject:/) { next; }

                if ($mytype eq 11 && $inString =~ /Subject:/) { 

                    my($f1, $f2, $f3) = $inString =~ m/(.*\t)(.*\t)(.*)/;
                    #print $out $inString, "\n";
                    $f3 =~ s/(\\\d{3})/\^/g;
                    print $out $mytype, "\t", $f1, $f2, $f3, "\n";

                    foreach ($f3) {
                        push @f4, split(/(Subject:|In-Reply-To:|Reply-To:|To:|From:|Bcc:|Cc:|Host:|Date:|Distribution:)/i);
                    }

                    #print $out $mytype, "\t", $f1, "\t", "scalar=", $#f4+1, "\n";
                    $count = 0;
                    while ($count < $#f4) {

                        $f4[$count+2] =~ s/\^/ /g;
                        push @f5, substr(join('', $f4[$count+1], $f4[$count+2]), 0, 50);;
                        $count = $count + 2; 
```

这部分很容易理解}

```
 print $out $mytype, "\t", $f1, $_, "\t", $f3, "\n" for @f5;
                    undef @f4;
                    undef @f5;

                    next; 
                } 
```

不确定这里的替换。$inString =~ s/(\\d{3})/\^/g; 打印 $out $mytype, "\t", $inString, "\n";

```
 }

        }

    }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:46:44.627

看起来可以这样做：

```
my_type = 500
for row, value in filearray:
   if row == member:
      my_type = value
      print row, my_type
      break 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:47:01.307

我不确定你想要什么`mtype`，因为它的初始值`500`被覆盖了（除非你在循环中进一步使用它）。我只是假设您需要保留collection中 each的`500`值。`mtype``member``files`

但是为了使您的代码更正确：

```
for member in files:
        mytype = 500
        x = 0 #if you really need x variable here
        for file in filearray:
            x += 1
            if member in file[0]:
                mytype = file[1]
                print(x, mytype, member)
                break 
```

# smartphone - 是否存在适用于 Android、iPhone 和其他智能手机的具有原生外观和感觉的移动网站开发框架？

> ID：11138299
> 
> 赞同：0
> 
> 时间：2012-06-21T12:35:43.473
> 
> 标签：smartphone

据我所知，本机应用程序开发是使用

*   电话间隙
*   钛

我们是否有一个框架或什么东西可以构建一个可以使用 MySQL DB、HTML5 和 jQuery mobile 的移动网站。这个移动网站可以通过不同的智能手机（安卓、iPhone、黑莓等）访问。这个移动网站将具有原生的外观和感觉。

如果您对此有所了解，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:45:24.773

当您描述您要查找的内容时，我想到的主要框架是[**Sensha Touch 2**](http://www.sencha.com/products/touch/ "森沙触摸 2")。

经过一番谷歌搜索后，我想你也可以看看[**Wink**](http://www.winktoolkit.org/ "眨眼")，它似乎更轻量级。

# abap - Calling the same LDB with different selection screens

> ID：11138302
> 
> 赞同：2
> 
> 时间：2012-06-21T12:36:03.240
> 
> 标签：abap, sap-selection-screens

I have a program that uses the Logical db F1S. That means that it can use an automatic *magical* include with the name DBF1SSEL.

So let's say i have 2 programs that need to use the logical database F1S. Would they be able to have 2 selection screens, or would they all have to use the DBF1SSEL one?

Or how does this automatic name binding-conversion-thingy work? (i'm a java guy learning abap)

Thx, you guys rule!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:12:53.120

N.b. I'm not up to scratch on LDBs, have only used them a couple of times.

The selection screen that appears depends on the `NODES` from the LDB that you specify for use in the program, see [SAP docs](https://help.sap.com/doc/saphelp_nw70ehp3/7.03.19/en-US/4a/43c3225a503f04e10000000a421937/content.htm?no_cache=true). So if your two programs use different sets of nodes, you will potentially get different selection screens (but still built up automatically). I think you can additionally specify manual selection screen elements too.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-22T12:58:19.767

Another way of calling LDB is through FM `LDB_PROCESS`. It accepts `SELECTIONS` parameter which is used for selection criteria specification.

Consider this sample:

```
* Populate selection-fields
 clear seltab[].
 clear wa_seltab.
 wa_seltab-kind = 'S'.
 wa_seltab-selname = 'CARRID'.
 LOOP AT CARRID INTO wa_carrid.
   MOVE-CORRESPONDING wa_carrid TO wa_seltab.
   APPEND wa_seltab TO seltab.
 ENDLOOP.

* Process the logical database
CALL FUNCTION 'LDB_PROCESS'
 EXPORTING
   ldbname = 'F1S'
   variant = ''
 TABLES
   callback = callback
   selections = seltab[]
   exceptions
 OTHERS = 4.
END-OF-SELECTION. 
```

# pydev - pydev 交互式控制台和 raw_input

> ID：11138304
> 
> 赞同：2
> 
> 时间：2012-06-21T12:36:20.350
> 
> 标签：pydev, raw-input

我在 Eclipse 中使用 PyDev 2.5。当我使用 raw_input 命令并在控制台中输入一些文本时，这会被解释为导致 NameError 的控制台命令。

例如：

我运行 name = raw_input('name:')

我回复：姓名：马丁

结果我得到：

回溯（最近一次调用最后）：文件“C:\Program Files\eclipse\plugins\org.python.pydev.debug_2.5.0.2012040618\pysrc\pydevd_comm.py”，第 755 行，在 doIt 结果 = pydevd_vars.evaluateExpression( self.thread_id, self.frame_id, self.expression, self.doExec) 文件“C:\Program Files\eclipse\plugins\org.python.pydev.debug_2.5.0.2012040618\pysrc\pydevd_vars.py”，第 384 行，在 evaluateExpression 结果 = eval(compiled, updated_globals, frame.f_locals) File "", line 1, in NameError: name 'martin' is not defined

该脚本似乎继续按预期将名称命名为“martin”，但控制台中充斥着此错误消息。有没有办法摆脱控制台中的 NameError 消息？

我发现的最相似的帖子是： [Greeting program](https://stackoverflow.com/questions/7747871/greeting-program) but I'm using raw_input already。

我还按照 [http://pydev.org/faq.html中的建议尝试了 raw_input().replace('\r', '') 和 eval(raw_input().replace('\r', '')) #PyDevFAQ-hyrawinput%28%29%2Finput%28%29doesnotworkcorrectlyinPyDev%3F](http://pydev.org/faq.html#PyDevFAQ-hyrawinput%28%29%2Finput%28%29doesnotworkcorrectlyinPyDev%3F) 但我仍然有这种奇怪的行为。

谢谢马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:07:50.777

从堆栈跟踪来看，当 PyDev 尝试评估您在调试模式下的某个表达式时（可能从您的表达式视图或悬停某个变量时），似乎发生了错误

这也意味着您可能在调试模式下运行程序，而不是在发布模式下（因此，如果您真的想在调试模式下运行它，请从表达式视图中删除该表达式，否则，请定期运行程序而不是在内部调试模式）。

# php - Orbeon 3.9 与表单的任何用户交互都会触发 java.lang.NullPointerException 错误

> ID：11138305
> 
> 赞同：1
> 
> 时间：2012-06-21T12:36:22.053
> 
> 标签：php, apache, tomcat, orbeon, mod-jk

我们有一个 PHP 应用程序，它在后台使用 Orbeon 向用户显示表单，最近我们不得不为 8080 端口被阻塞的人提出解决方案，因此我们安装了 jk_mod 以在 vhost 文件中为 Tomcat webapps 提供服务：

```
JkMount /orbeon/* geronimo_ajp13
JkMount /ops/* geronimo_ajp13 
```

用户可以打开 Orbeon 文档，但一旦他们执行任何 Orbeon 操作（单击表格、提交表单等），他们就会收到以下 Orbeon 错误：

![在此处输入图像描述](../Images/028758386ff39621095163eb6b818d29.png)

这是触发 Orbeon 操作时我的 Firebug 响应（200 ok）：

![在此处输入图像描述](../Images/d236dff19b171ec689f3343562056e8e.png)

这是触发的 orbeon.log 错误：

```
 2012-06-21 12:19:21,796 INFO  ProcessorService  - /xforms-server - Received request
2012-06-21 12:19:21,866 ERROR ProcessorService  - Exception at line 55, column 65 of oxf:/ops/xforms/xforms-server.xpl (reading processor output: name='response', id='x
forms-response')
java.lang.NullPointerException
        at org.orbeon.oxf.xforms.state.XFormsStateManager.checkUUIDInSession(XFormsStateManager.java:92)
        at org.orbeon.oxf.xforms.state.XFormsStateManager.findOrRestoreDocument(XFormsStateManager.java:277)
        at org.orbeon.oxf.xforms.processor.XFormsServer.doIt(XFormsServer.java:152)
        at org.orbeon.oxf.xforms.processor.XFormsServer.access$000(XFormsServer.java:56)
        at org.orbeon.oxf.xforms.processor.XFormsServer$1.readImpl(XFormsServer.java:88)
        at org.orbeon.oxf.processor.impl.ProcessorOutputImpl$TopLevelOutputFilter.read(ProcessorOutputImpl.java:263)
        at org.orbeon.oxf.processor.impl.ProcessorOutputImpl.read(ProcessorOutputImpl.java:406)
        at org.orbeon.oxf.processor.ProcessorImpl.readInputAsSAX(ProcessorImpl.java:260)
        at org.orbeon.oxf.processor.pipeline.TeeProcessor$TeeProcessorOutputImpl.readImpl(TeeProcessor.java:89)
        at org.orbeon.oxf.processor.impl.ProcessorOutputImpl$TopLevelOutputFilter.read(ProcessorOutputImpl.java:263)
        at org.orbeon.oxf.processor.impl.ProcessorOutputImpl.read(ProcessorOutputImpl.java:406)
        at org.orbeon.oxf.processor.ProcessorImpl.readInputAsSAX(ProcessorImpl.java:260)
        at org.orbeon.oxf.processor.ProcessorImpl.readInputAsTinyTree(ProcessorImpl.java:286)
        at org.orbeon.oxf.processor.ProcessorImpl$3.read(ProcessorImpl.java:315)
        at org.orbeon.oxf.processor.ProcessorImpl.readCacheInputAsObject(ProcessorImpl.java:365)
        at org.orbeon.oxf.processor.ProcessorImpl.readCacheInputAsObject(ProcessorImpl.java:330)
        at org.orbeon.oxf.processor.ProcessorImpl.readCacheInputAsTinyTree(ProcessorImpl.java:313)
        at org.orbeon.oxf.processor.pipeline.choose.ConcreteChooseProcessor.start(ConcreteChooseProcessor.java:186)
        at org.orbeon.oxf.processor.pipeline.PipelineProcessor$5.run(PipelineProcessor.java:661)
        at org.orbeon.oxf.processor.pipeline.PipelineProcessor.executeChildren(PipelineProcessor.java:726)
        at org.orbeon.oxf.processor.pipeline.PipelineProcessor.start(PipelineProcessor.java:658)
        at org.orbeon.oxf.processor.pipeline.choose.ConcreteChooseProcessor.start(ConcreteChooseProcessor.java:248)
        at org.orbeon.oxf.processor.pipeline.PipelineProcessor$5.run(PipelineProcessor.java:661)
        at org.orbeon.oxf.processor.pipeline.PipelineProcessor.executeChildren(PipelineProcessor.java:726)
        at org.orbeon.oxf.processor.pipeline.PipelineProcessor.start(PipelineProcessor.java:658)
        at org.orbeon.oxf.pipeline.InitUtils.runProcessor(InitUtils.java:89)
        at org.orbeon.oxf.webapp.ProcessorService.service(ProcessorService.java:97)
        at org.orbeon.oxf.servlet.OrbeonServletDelegate.service(OrbeonServletDelegate.java:133)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
        at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
        at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
        at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:769)
        at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:698)
        at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:891)
        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
        at java.lang.Thread.run(Thread.java:636) 
```

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:20:30.973

该错误清楚地表明会话 cookie 出于某种原因未传播。我会检查一下。

# c++ - 如何使用 DirectShow 正确捕获音频

> ID：11138306
> 
> 赞同：0
> 
> 时间：2012-06-21T12:36:22.030
> 
> 标签：c++, directx, directshow

基本上我只想捕获音频并将其保存到磁盘上的文件中。我得出结论，使用 AVI 格式是最好的，也是最不烦人的。在涉足 DirectShow API 之后，这就是我想出的。

```
//I find the mic in previous code
hr = pMoniker->BindToObject(0, 0, IID_IBaseFilter, (void**)&pSrc);

hr = CoCreateInstance(CLSID_FilterGraph, NULL, CLSCTX_INPROC_SERVER, IID_IGraphBuilder, (void**)&pGraph);
//Initialize the Capture Graph Builder
hr = pBuild->SetFiltergraph(pGraph);

IBaseFilter *pMux;
//IFileSinkFilter *pSink;
hr = pBuild->SetOutputFileName(
    &MEDIASUBTYPE_Avi,  // Specifies AVI for the target file.
    L"C:\\Example.avi", // File name.
    &pMux,              // Receives a pointer to the mux.
    NULL);              // (Optional) Receives a pointer to the file sink.

hr = pBuild->RenderStream(
    &PIN_CATEGORY_CAPTURE, // Pin category.
    &MEDIATYPE_Audio,      // Media type.
    pSrc,                  // Capture filter.
    NULL,                  // Intermediate filter (optional).
    pMux);                 // Mux or file sink filter. 
```

现在，我认为这足以满足我的要求，但磁盘上没有创建文件，RenderStream 给了我 E_INVALDARGS。如果我将函数调用更改为：

```
hr = pBuild->RenderStream(
    NULL, // Pin category.
NULL,      // Media type.
    pSrc,                  // Capture filter.
    NULL,                  // Intermediate filter (optional).
    pMux);                 // Mux or file sink filter. 
```

我得到了 VFW_E_NOT_IN_GRAPH 错误。

我在这里做错了什么？我将非常感谢任何帮助，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:59:25.753

`VFW_E_NOT_IN_GRAPH`意味着您需要`pSrc`使用 call 将您创建的过滤器添加到过滤器图中`IGraphBuilder::AddFilter`。

要将纯音频流保存到文件中，您可能更喜欢 .WAV 格式，Windows SDK 附带`WavDest`项目/示例，它可以接受来自音频过滤器的音频并输出兼容的 .WAV 文件流`File Writer Filter`以保存到文件中。

# objective-c - 使用 CGPoint 和 CATransform3D 在直线上查找新点？

> ID：11138310
> 
> 赞同：0
> 
> 时间：2012-06-21T12:36:36.833
> 
> 标签：objective-c, ios, cocoa-touch, math, core-animation

我有一个图层，`CAKeyframeAnimation`它沿着路径对其进行动画处理。`transform`当动画`rotationMode`设置为 时，图层也有一个变化的属性`kCAAnimationRotateAuto`。

当我点击图层时（我正在使用点击手势识别器进行检测并[像在这个问题](https://stackoverflow.com/questions/8346100/uibutton-cant-be-touched-while-animated-with-uiview-animatewithduration/8346178#8346178)`presentationLayer`中一样对动画图层进行点击测试，如果有更好的方法让我知道），我想做以下事情：

1.  从表示层抓取位置和变换
2.  移除当前动画。
3.  使用在步骤 1 中获取的信息，向图层添加一个新动画，以保持变换和起点，并减慢图层到新端点的传输速度，距离上一个动画刚刚结束的位置约 40 像素。

最终结果应该是，当点击时，动画层将沿着一条直线减速到停止，该直线与删除原始关键帧动画的点处的路径相切。

在数学方面，我该怎么做？我已经有了起点和变换，所以在我看来，我只需要找出终点，也许可以通过使用起点、变换和距离（为了好玩，比如 40）。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:37:46.280

If I understand correctly what you basically want is for the animated layer to decelerate and stop along the same vector as it's moving when you tap it. If you have the position when you tap it and the transform when you tap it I think you can find out the endpoint by doing the following:

```
CATransform3D transform = <Your layer's transform goes here>;
CGPoint startPoint = <Your layers's current position goes here>;
CGFloat distance = 40.f;

CGPoint v = CGPointMake(0, distance);

CGAffineTransform affineTransform = CATransform3DGetAffineTransform(transform);

CGPoint offset = CGPointApplyAffineTransform(v, affineTransform);
CGPoint endPoint = CGPointMake(startPoint.x + offset.x, startPoint.y + offset.y); 
```

P.S. - This only works if you don't apply any scaling, skewing etc. as part of your animation (i.e. the transform should only represent rotations and translations)

# html - 从 css 中删除错字奇怪地弄乱了显示

> ID：11138312
> 
> 赞同：2
> 
> 时间：2012-06-21T12:36:41.177
> 
> 标签：html, css

在尝试解决我在项目中遇到的问题时，我注意到我的 css 文件中出现了一个随机的“/”。删除它后，它实际上使部分边框在 Firefox 中消失了，甚至更多的在 Chrome 中消失了……我已经将代码剥离到最基本的部分，试图找出问题所在，但仍然无法弄清楚出来。我已将问题的根源缩小到我的 css 中的“项目”类，但不明白它有什么问题，因为当我验证该类时它不会抛出任何错误。

以下是删除斜线后的显示方式：http: [//jsfiddle.net/NrYws/2/](http://jsfiddle.net/NrYws/2/)

这里是斜线在我删除它之前的位置，以及它如何正确显示（在 FF 和 Chrome 中）...... [http://jsfiddle.net/NrYws/3/](http://jsfiddle.net/NrYws/3/)

将斜杠移动到文件中的不同位置（即在 outerContainer 类上方）会导致显示错误。当我完全删除“项目”类时，它工作正常：http: [//jsfiddle.net/NrYws/4/](http://jsfiddle.net/NrYws/4/)

我知道现在似乎不需要 items 类，但这只是因为我已经将所有东西都剥离到骨头上以试图解决这个问题，并且是实际项目所需要的。

关于这里发生了什么的任何想法？我敢肯定，我只是忽略了一些令人痛苦的显而易见的事情......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:38:11.710

就好像它删除了第一段一样`.items`。删除它并正确显示。

我相信，只要你想让它工作，就只`overflow: hidden`在作品中删除。`.items`

尽管`overflow: hidden`无论您在做什么都需要 if ，但我们将需要更多的代码来为您提供一个可以按您预期工作的修复程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:39:33.963

因为它消除了

```
.items
{
     float: left;
     height:180px;
    overflow: hidden;
} 
```

你可以删除它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T12:43:59.693

从项目类中删除溢出：隐藏，因为它正在剪裁外部容器边框。

工作小提琴：http: [//jsfiddle.net/NrYws/8/](http://jsfiddle.net/NrYws/8/)

这是关于css中反斜杠的解释：[http ://www.webteacher.ws/2005/01/22/490/](http://www.webteacher.ws/2005/01/22/490/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T12:46:39.123

`overflow: hidden`如果您需要使用溢出，请删除或将高度设置为 184px

```
.items
{
    float: left;
    height:184px;
    overflow: hidden;
} 
```

# spring-security - 如何映射 Spring Security 元素到特定的 servlet

> ID：11138317
> 
> 赞同：2
> 
> 时间：2012-06-21T12:37:14.977
> 
> 标签：spring-security

我有一个带有两个 servlet 和与每个 servlet 关联的多个映射的 Web 应用程序，即

`web.xml`：

```
<servlet-mapping>
    <servlet-name>cheese</servlet-name>
    <url-pattern>/edam/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>cheese</servlet-name>
    <url-pattern>/cheddar/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>dog</servlet-name>
    <url-pattern>/poodle/*</url-pattern>
</servlet-mapping>
... 
```

我现在想将 Spring Security 应用到这个 Web 应用程序，为每个**servlet**使用不同的安全配置。这是因为 servlet 具有不同的身份验证要求。因此，我希望只有两个过滤器映射：

```
<filter-mapping>
    <filter-name>springSecurityFilterChainCheese</filter-name>
    <servlet-name>cheese</servlet-name>
</filter-mapping>
<filter-mapping>
    <filter-name>springSecurityFilterChainDog</filter-name>
    <servlet-name>dog</servlet-name>
</filter-mapping> 
```

使用 Spring Security 3.1，我能够定义多个`<http>`元素，这看起来是个不错的方法。但是，我看不到如何为每个`<http>`元素指定 bean 名称或将元素映射到 servlet 的任何其他方式。

我知道我可以在 上[指定一个`pattern`属性`<http>`](https://stackoverflow.com/questions/8355593/can-you-create-several-springsecurityfilterchain-with-http)，但是我需要在我的 Spring Security 配置中重复 servlet 到 URL 的映射，这不是 DRY。

如何将`<http>`元素映射到这样的特定 servlet？或者我是否需要扩展`<http>`元素并自己定义我所有的 Spring Security bean？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:32:25.887

从您的示例中不确定，但您真的需要两个过滤器吗？

你读过[http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-minimal](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-minimal)吗？这可以让你朝着正确的方向前进。

您可以在单个元素中包含多个元素；那对你有用吗？我不知道有任何其他方式来做你所要求的。请记住将最具体的规则放在顶部，因为这是它们将被评估的顺序。

有时你不能有一个完全 DRY 的解决方案，至少它不是代码。如果您真的很担心，请使用诸如 Ant 之类的机制来填写 servlet 名称和模式元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T13:56:58.557

查看 Spring Security 的源代码，似乎*可以*通过在元素上提供`id`or来实现，但 Spring Security XML 模式阻止了这种情况！我相应地提出了[https://jira.springsource.org/browse/SEC-1978](https://jira.springsource.org/browse/SEC-1978)。`name``<http>`

# verilog - 总是用一个非阻塞赋值 @* 阻塞 - 好、坏还是不相关？

> ID：11138318
> 
> 赞同：9
> 
> 时间：2012-06-21T12:37:19.970
> 
> 标签：verilog

到目前为止，我读过的所有书籍中提到的一般经验法则是，您必须在由时钟的上升沿或下降沿驱动的 always 块中使用非阻塞分配。相反，阻塞赋值必须用于组合逻辑描述。这条规则对我来说很有意义，示例的作者会彻底遵循它。

但是，我在其中一个生产代码中发现了以下 Verilog：

```
always @* begin
   in_ready <= out_ready || ~out_valid;
end 
```

`<=`请注意，正在使用非阻塞赋值。我认为在这种情况下没有任何区别，因为没有多重分配。但是，我似乎找不到任何解释。所以问题是——无论是在给定的始终块的范围内还是作为更大设计的一部分，它是否会产生任何影响？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T21:58:17.787

当然，这违反了我的编码准则 #3：[http](http://www.sunburst-design.com/papers/CummingsSNUG2000SJ_NBA.pdf) ://www.sunburst-design.com/papers/CummingsSNUG2000SJ_NBA.pdf ）但它会起作用。

避免对代码组合逻辑使用非阻塞赋值的原因是仿真性能。在 Munkymorgy 的示例中，在 always 块触发后，您将评估所有方程的右侧 (RHS)，回到 always 块的顶部，更新方程的 LHS，这将再次触发always 块，这将再次强制模拟器评估方程的 RHS，转到 always 块的顶部，然后更新方程的 LHS。对于较大的块，这可能会导致通过 always 块进行多次迭代，并产生相应的模拟损失。

在您简单的 1 行示例中，没有内部模拟惩罚，但其他地方可能存在交叉分配惩罚。

优秀的编码员使用始终如一的良好编码习惯。我会更改代码。如果更改代码会破坏模拟结果，那么代码中的其他地方就会隐藏额外的不良编码习惯。代码不应该那么脆弱。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T15:31:15.363

不相关但不好的做法。

我怀疑单一分配会导致任何副作用。always 块将触发右侧的任何更改，更新 in_ready。没有什么可阻塞的，所以非阻塞不会引起问题。

如果更大的设计有：

```
always @* begin 
  in_ready    <= out_ready || ~out_valid  ;
  other_ready <= in_ready  || other_ready ;
end 
```

我不太确定，因为它是组合的，它可能只需要一个额外的增量步骤来解决。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-30T11:36:58.973

如果您了解电路的行为方式，它的选择还不错，例如

总是@* 开始 b<=a+c; a=b; 结尾

1.  所以在这个示例代码中，当灵敏度列表中的任何东西（所有输入）上升或下降时，总是块内开发的完整电路将被激活，它会改变其当前状态
2.  现在 b <=a+c 现在这里将使用“a”和“c”作为输入创建一个全加器，但是
3.  现在设计已经完成，或者编译器以这样的方式合成电路，下一条语句 a=b 这里的线是从旧值中取出的，而不是从更新后的 b 中取出并提供给 a ；如此简单
4.  如果你想要同样的事情发生，欢迎你做任何问题都不会出现

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-24T09:34:06.987

如果要模拟门延迟，则需要始终 @(*) 中的非阻塞分配。

例如，下面的代码在输出端正确模拟了具有 3 ns 延迟的 OR 门。在这种情况下，阻塞分配将不起作用。

```
always @(*) begin
  a <= #3 b | c;
end 
```

进一步阅读：

1.  [http://www.sunburst-design.com/papers/CummingsHDLCON1999_BehavioralDelays_Rev1_1.pdf](http://www.sunburst-design.com/papers/CummingsHDLCON1999_BehavioralDelays_Rev1_1.pdf)
2.  [https://electronics.stackexchange.com/q/572643/238188](https://electronics.stackexchange.com/q/572643/238188)

# c# - 从不同的桌面应用程序访问相同的数据库

> ID：11138319
> 
> 赞同：-1
> 
> 时间：2012-06-21T12:37:20.567
> 
> 标签：c#, mysql, sql, desktop-application, .net

我想问问你的意见。

例如：餐厅 A 是位置 B 的一家新餐厅。通常我只是通过书本管理信息，也许还有一些 excel 公式来计算。我管理的信息是关于员工时间表、员工工资、员工出勤、收入和仓库。两年后，我想扩大我的业务。我建了同一家餐厅，但在位置 C。现在，我意识到了。用书和excel是无能为力的。只是为我浪费时间。我有一个想法，如果所有的信息都存储在计算机中呢？然后，我计划建立一个可以帮助我管理信息的系统。实际上是一个桌面应用程序。然后我买了两台电脑。一个用于 B 中的 A 餐厅。另一个用于 C 中的 A 餐厅。

我的问题是： 1\. 我应该使用哪种数据库？因为我需要快速检索数据。2\. 我应该在哪里存储数据库？在每家餐厅的两台电脑上？如果是，如果我在家，如何访问数据？

你能给我你的意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:44:28.953

这听起来像是一个需要开箱即用的解决方案的问题。您是否查看过现有的云解决方案？我做了一个快速搜索，看起来像[这样](http://www.timeforge.com)的东西可以满足你的需要。

如果您必须创建自己的解决方案（这可能会更昂贵），那么我肯定会使用像 SQL Azure 这样的云数据库。这样，它就可以从任何地方访问，而无需同步/合并。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:48:57.687

Web 应用程序更有可能解决您的问题，但如果您仍然想要一个桌面应用程序，您可以购买一个数据库主机并连接到它。如果这将是昂贵的并且您将无法访问互联网，只需在您的应用程序中使用 accessdb。将应用程序和数据库文件放在 USB 驱动器中，然后将其放到您想要的任何计算机上。exe 文件可能保持不变，但您应该移动数据库文件以获取不同位置的更新数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T12:49:41.020

是的。您的问题有不同的解决方案。

1.  如果您的餐厅之间有自己的网络连接，那么您可以在一台服务器（集中式）上安装 SQL Server，您可以通过 windows 应用程序连接到它。

2.  开发可通过浏览器访问的 Web 应用程序。你可以在点击中获得你需要的所有信息。那应该托管在服务器中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T12:51:11.867

在我看来，您应该选择共享 Web 托管，它将为您提供数据库和 Web 应用程序托管服务。

例如，在 IIS 等上提供带有 .Net Web 应用程序主机的 Sql Express 或服务器的东西

我建议您使用 Web 应用程序的原因是，它可以通过互联网 24/7 全天候可用，您可以从任何地方访问和更新您的数据，并将让您有更多时间专注于管理餐厅而不是维护软件。

另一个优点是您无需担心在每台计算机上安装软件和应用程序，因为您将能够通过 Web 浏览器使用您的 Web 应用程序

# web-applications - Eclipse RAP 被 Google 抓取？

> ID：11138321
> 
> 赞同：4
> 
> 时间：2012-06-21T12:37:28.883
> 
> 标签：web-applications, web-crawler, google-search-console, eclipse-rap, google-index

我正在开发一个 RAP 网站，并希望像 Google 这样的机器人可以访问它（我在这里只指 Google；但我认为其他搜索引擎的工作方式类似）。Webapp 包含我从数据库加载的动态内容，具体取决于用户正在搜索的内容。如何使这些内容可供 Google 使用？我已阅读 Google 的 ajax 抓取指南，但不知道如何将其应用于 RAP：

*   RAP 在“内部”进行 AJAX 调用。我可以将它们用于谷歌吗？如何？
*   RAP 是单页，我应该如何向 Google 提供站点地图 (XML)？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T16:12:48.297

Ajax 的理念是应用程序不会一直加载新页面，而是在后台使用 Ajax 请求加载新的内容。无论如何，要在您的应用程序中提供“深层链接”，您需要包含片段部分的 URL，例如`example.com/myapp#mystate`. 使用这个技巧是因为当只有 URL 的片段部分发生变化时，浏览器不会重新加载页面。

这与 RAP 没有什么不同。为了处理这种 URL，RWT 提供了浏览器历史 API。当您的应用程序的状态发生变化时，例如当用户选择某种选项卡或启动搜索时，您可以在浏览器历史记录中添加一个新条目，这有效地改变了浏览器中的 URL 片段：

```
RWT.getBrowserHistory().createEntry( "!mystate", "Example" ); 
```

这会将 URL 更改为`example.com/app/entrypoint#!mystate`（此状态的“深层链接”），并在浏览器历史记录中添加一个名为“Example”的条目，因此您可以稍后使用浏览器的后退按钮返回此状态。

为了能够对 URL 的更改做出反应，您必须向浏览器历史记录添加一个侦听器。每次片段部分更改时都会通知此侦听器。当应用程序以片段启动时也是这种情况（有人跟随深层链接）。然后，您的应用程序负责重新安装此片段表示的状态。

```
RWT.getBrowserHistory().addBrowserHistoryListener( new BrowserHistoryListener() {
  public void navigated( BrowserHistoryEvent event ) {
    // show state represented by event.entryId
  }
} ); 
```

RAP 应用程序使用不同“子页面”的片段 URL 的示例是[RAP 示例演示](http://rap.eclipsesource.com)。

其余的故事应该在[Google 的 AJAX 抓取指南](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=174992)中解释。您的 id 必须以 a 开头，`!`才能生成带有`#!mystate`. 这些 URL 是您应该添加到站点地图中的 URL。为了给爬虫提供数据，您可以实现一个 servlet 过滤器，它捕获对 URL 模式的请求`?_escaped_fragment_=mystate`并返回特定状态的 HTML 表示。

# excel - Excel 中的嵌套 INDIRECT 函数——在一台计算机上工作，但在另一台计算机上返回 #REF

> ID：11138322
> 
> 赞同：7
> 
> 时间：2012-06-21T12:37:31.397
> 
> 标签：excel, excel-formula

这很复杂，但我会尽力解释清楚。如果没有意义，请告诉我。

我有两个工作簿——一个输入和一个输出。由于系统的工作方式，它们必须分开，即“提名人”将所有输入输入到一个简单的输入工作簿中，并且输出工作簿的格式可供使用。为了使其工作，输出工作簿必须引用输入工作簿来检索值。

我一直在打开两个工作簿进行测试。

为此，我使用了嵌套`INDIRECT`函数；第一个创建文件路径，调用命名范围，第二个告诉 Excel 解释该文件路径并检索值。

我首先使用`INDIRECT`构建文件路径：

```
=INDIRECT("input_sheet_location")&"Wk 25 2012'!$B$11" 
```

这会返回类似：

```
\\My Documents\Subfolder\[input_sheet.xlsx]Wk 25 2012'!$B$11 
```

然后将其嵌套在另一个中以使 Excel 读取该路径：

```
=INDIRECT("'"&INDIRECT("input_sheet_location")&"Wk 25 2012'!$B$12") 
```

这成功地从 input_sheet_location 返回单元格 B12 的值——一个命名范围，它是一个文件目录。为了论证的缘故，我们可以说它返回：

```
Captain America's underpants 
```

所以上面的工作非常好。为了我。但是，在另一个用户的机器上，它不起作用。我试图深入研究，并得出以下结论：

1.  文件之间的连接也存在于他们的系统上——探索数据>编辑链接显示他们与我有相同的工作连接。
2.  产生的文件路径是一样的；我构建了一个宏来向用户展示它，在 3 台机器上，它每次都一样。
3.  最关键（也是令人困惑），非嵌套`INDIRECT`公式*确实*有效。它**只是嵌套公式，仅适用于我的计算机。**在每个其他用户的计算机上，它都会返回一个`#REF`错误。

有谁知道为什么会这样？我很茫然。

感谢您阅读该剧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T20:42:46.040

您说第一个间接公式 + Concatination 返回的值如下：

```
\\My Documents\Subfolder\[input_sheet.xlsx]Wk 25 2012'!$B$11 
```

工作表名称不应该在每一侧都有一个单引号并返回如下值：

```
\\My Documents\Subfolder\[input_sheet.xlsx]'Wk 25 2012'!$B$11 
```

我注意到您的第二个公式在文件路径之前有工作表名称的单引号。

而是尝试以下两个公式：

```
=INDIRECT("input_sheet_location")&"'Wk 25 2012'!$B$11" 
```

和/或

```
=INDIRECT(INDIRECT("input_sheet_location")&"'Wk 25 2012'!$B$12") 
```

让我知道他们是否为您工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T23:15:29.800

可能是一个愚蠢的问题，但这真的有效吗？

=INDIRECT("input_sheet_location")&"Wk 25 2012'!$B$11"

_Location 末尾的括号不会关闭 Indirect 函数吗？不应该

=INDIRECT("input_sheet_location"&"Wk 25 2012'!$B$11")

至少这是它对我有用的唯一方法是将整个路径放在 Indirect 函数括号内。

# android - 在 Android 应用程序中使用 viber 发送短信

> ID：11138328
> 
> 赞同：5
> 
> 时间：2012-06-21T12:37:47.137
> 
> 标签：android, message

我写了一个Android应用程序。[我想用Viber](http://www.viber.com/)发送短信（如果已安装）。可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:40:25.027

您可以使用相关键启动 Viber 包的意图，并将文本作为附加包中的附加内容。

**编辑**

例如，这将启动无线设置活动。

```
startActivity( new Intent( Settings.ACTION_WIRELESS_SETTINGS ) ); 
```

如果您选择 Action Viber 支持（如果有），则应该启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-23T22:03:33.613

本站提供 Viber API。

测试它。

[http://viberapi.ir/](http://viberapi.ir/)

# android - editText.setRawInputType(Configuration.KEYBOARD_QWERTY) 不适用于 Galaxy S II

> ID：11138333
> 
> 赞同：1
> 
> 时间：2012-06-21T12:37:53.613
> 
> 标签：android, android-edittext, android-softkeyboard

Android中有什么方法可以在专注于EditText时显示数字软键盘，但仍然允许输入任何文本？

我试过使用下面的代码，但它不适用于 Galaxy S II、Galaxy Tab 等。

`editText.setRawInputType(Configuration.KEYBOARD_QWERTY)`

这对所有设备都有效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:58:31.293

尝试这个

需要设置属性`android:inputType="number"`。`EditText`

这个对我有用。

让我知道

# amazon-s3 - 如何在 Amazon S3 中添加或修改现有对象的 Content-Disposition？

> ID：11138336
> 
> 赞同：2
> 
> 时间：2012-06-21T12:37:54.370
> 
> 标签：amazon-s3, amazon-web-services

我们在 AWS S3 存储桶中有数百个没有设置内容处置的对象。

我正在使用 Ruby aws-sdk gem。

如何在不重新上传文件的情况下向这些对象添加或更改内容配置？

我努力了

```
obj.write(:content_disposition => 'attachment')
obj.copy_from(obj.key, :content_disposition => 'attachment') 
```

还有copy_to（），move_to（），但这些似乎都不能将内容配置添加到对象中。在少数情况下，对象似乎根本没有被修改（修改时间没有改变），在其他情况下，对象文件已损坏！

* * *

我知道在通过 HTTP 请求 s3 对象时使用 :response_content_disposition 的替代方法，它设置 Content-Disposition 标头，

```
obj.url_for(:read, :response_content_disposition => "attachment") 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:30:46.843

我们通过更改 aws-sdk 源代码找到了解决方案。

在 s3/s3_object.rb

将以下行添加到 copy_from() （类似于 :content_type 的处理方式）

```
if options[:content_disposition]
    copy_opts[:content_disposition] = options[:content_disposition]
    copy_opts[:metadata_directive] = "REPLACE"
end 
```

另外，在 s3/client.rb

添加下面标记的行

```
object_method(:copy_object, :put,
                    :header_options => {
                    :copy_source => 'x-amz-copy-source',
                    :cache_control => 'Cache-Control',
                    :metadata_directive => 'x-amz-metadata-directive',
                    :storage_class => 'x-amz-storage-class',
                    :server_side_encryption => 'x-amz-server-side-encryption',
                    :content_type => 'Content-Type',
                    :content_disposition => 'Content-Disposition', # add this line here
                }) do 
```

完成上述操作后，您可以执行以下操作以将内容处置添加到现有对象：

```
obj.copy_from(obj.key, :content_disposition => 'attachment', :content_type => 'image/png', :acl => :public_read) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-15T18:03:56.260

对于后代，这是一个基于 cli 的解决方案。if 首先列出其中的对象，`/mybucket/brand_img/ios/`然后将每个项目的内容配置设置为文件名。我需要这个，因为我的文件名中有“@”，我不想强​​制客户端对路径进行 url 编码。

```
aws s3 ls s3://mybucket/brand_img/ios/|awk {'print $4'} > objects.txt

while read line; do aws s3api copy-object --bucket mybucket  \
--copy-source /mybucket/brand_img/ios/$line --key brand_img/ios/$line \
--metadata-directive REPLACE --metadata Content-Disposition=$line --acl public-read; done < objects.txt 
```

# iphone - 将 xml 的内容呈现给表格视图

> ID：11138337
> 
> 赞同：-1
> 
> 时间：2012-06-21T12:37:55.173
> 
> 标签：iphone, ios4

我如何在 UITableview 上呈现 XML 内容。

样本结构：

```
 </node>
        <node name="abcd" id="id:1">
        <node name="abcde" id="id:1"/>
    </node> 
```

表中的结构应表示为 abcd abcde

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T15:10:56.550

您可以使用以下行...

[http://www.edumobile.org/iphone/iphone-programming-tutorials/parsing-an-xml-file/](http://www.edumobile.org/iphone/iphone-programming-tutorials/parsing-an-xml-file/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:20:35.700

对于初学者，也许您应该使用 iPhone sdk 5.0...话虽如此，您需要使用 NSXMLParser 对象解析您的 XML。

我在向朋友解释时做了一个简单的，并且我已经对其进行了调整以与您的代码一起使用。这是标题：

```
@interface MyParser : NSObject <NSXMLParserDelegate> {
  NSMutableArray *nodeArray;
}

+(NSArray*)parseNodeData:(NSData*)data;
-(NSArray*)nodes;
-(void)parseWithData:(NSData*)data;
@end 
```

和实施：

```
@implementation MyParser

+(NSArray*)parseNodeData:(NSData*)data {
  NSArray *ret;
  MyParser *parser = [[MyParser alloc] init];
  [parser parseWithData:data];
  ret = [parser nodes];
  [parser release];
  return(ret);
}

-(NSArray*)nodes {
  if (nodeArray == nil)
    return(nil);
  return([NSArray arrayWithArray:nodeArray]);
}

-(void)dealloc {
  [nodeArray release];

  [super dealloc];
}

-(void)parseWithData:(NSData*)data {
  NSXMLParser parser = [[NSXMLParser alloc] initWithData:data];
  [parser setDelegate:self];
  [parser parse];
  [parser release];
}

#pragma mark - NSXMLParserDelegate methods
-(void)parserDidStartDocument:(NSXMLParser*)parser {
  if (nodeArray != nil)
    [nodeArray release];

  nodeArray = [[NSMutableArray alloc] init];
}

-(void)parser:(NSXMLParser*)parser didStartElement:(NSString*)elementName namespaceURI:(NSString*)namespaceURI qualifiedName:(NSString*)qName attributes:(NSDictionary*)attributeDict {
  if ([elementName compare:@"node" options:NSCaseInsensitiveSearch] == NSOrderedSame) {
    [nodeArray addObject[attributeDict valueForKey:@"name"]];
  }
}

@end 
```

使用该代码（可以优化——很多）来获取 XML 文件中的信息并将其保存到`NSArray`、将其存储在 UITableView 上并显示数据。

# django - 如何在 django 中获取文件的插入路径？

> ID：11138339
> 
> 赞同：0
> 
> 时间：2012-06-21T12:38:06.513
> 
> 标签：django, django-forms

我写了一个包含文件字段的表单。现在在我看来，我想访问我使用此字段插入的文件的路径....是否可能，是的，方法是什么，可以用于相同的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:04:05.713

[`File`](https://docs.djangoproject.com/en/1.4/topics/files/#using-files-in-models)字段在 Django中具有三个（主要）属性：

`.name`= 文件名

`.path`= 文件在磁​​盘上的位置

`.url`= 浏览器可以使用的该文件的 URL。当您想要提供指向模板中文件的链接时，请使用此选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:55:26.827

在 Django 中，文件由[File](https://docs.djangoproject.com/en/1.4/ref/files/file/#the-file-class)类表示。这个类有一个名为 的字段`name`。该字段的文档说：

> 文件名，包括来自 MEDIA_ROOT 的相对路径。

**例子**

您的 MEDIA_ROOT 是`media`，文件的名称是`my-test-file`. 然后`myfile.name`会返回`media/my-test-file`。

随时问更多问题。

# perl - Perl 函数参数消失。为什么？

> ID：11138341
> 
> 赞同：2
> 
> 时间：2012-06-21T12:38:15.517
> 
> 标签：perl, undefined, matching, function-calls

我正在用 Perl 构建一个压力系统来纠正学生的编程作业。我构建了一个`check(<boolean>,<congrats-message>,<blame-message>)`应该在此过程中帮助我的函数。

当我调用它时

```
check(get_option('content-type') eq "text/html","good type", "bad type"); 
```

一切安好。但如果我敢做

```
check(get_option('content-type') =~ m:text/html:i, "good type", "bad type"); 
```

当正则表达式找不到匹配项时，它会中断。实际上它相当于一个`check("good type", "bad type")`. 我在 check() 函数中只使用`$_[0]`,`$_[1]`等等，这不像我有 'undef' 作为第一个参数：我真的可以用`die unless $#_ == 2`.

发生了什么 ？我解决了这个问题

```
check((get_option('content-type') =~ m:text/html:i && 1), "good type", "bad type"); 
```

但我很想了解这种奇怪情况的原因和原因。

--

```
sub check {
  if ($_[0]) {
    $okay++;
    print STDERR "^_^ $_[1] ($okay)\n";
  } else {
    print STDERR ">_< $_[2]\n";
  }
  return $_[0];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T12:43:27.383

`eq`总是返回真或假，但`=~`（在列表上下文中）返回“由模式中括号匹配的子表达式组成的列表”。

当您将一个列表放入另一个列表中时（例如，子例程的参数列表中的匹配列表），它们会被合并。

如果有 0 个匹配项，您将获得列表中的另外 2 个参数。

如果有 2 个匹配项，您将获得这 2 个匹配项，然后是 2 个其他参数，总共 4 个参数。

您的代码取决于恰好有三个参数。

# java - 使用 spring resttemplate 使用键值对

> ID：11138346
> 
> 赞同：0
> 
> 时间：2012-06-21T12:38:35.027
> 
> 标签：java, json, spring, rest, resttemplate

理想情况下，我只想要一个字符串列表，或 Hashmap String,String ：

```
List<String> = restTemplate.getForObject(url, List.class, urlVariables); 
```

但是我收到错误**无法提取响应：没有找到适合响应类型的 HttpMessageConverter。**

我可以使用restclient访问restful api并检索以下内容：

```
Content-Type    text/javascript; charset=iso-8859-1 
```

响应主体是：

```
[{"name":"lemons"},{"name":"pears"},{"name":"apples"}] 
```

我的 restTemplate 定义如下：

```
<bean id="restTemplate" class="org.springframework.web.client.RestTemplate">
        <property name="messageConverters">
            <list>
                <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"/>                
            </list>
        </property>
    </bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:49:36.793

我没有合适的项目来测试它，但请尝试：

```
<bean id="restTemplate" class="org.springframework.web.client.RestTemplate">
  <property name="messageConverters">
    <list>
      <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
        <property name="supportedMediaTypes" value="text/javascript" />
      </bean>
    </list>
  </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-03T18:58:33.667

我想你可能想看看这个：

[https://spring.io/guides/gs/consuming-rest/](https://spring.io/guides/gs/consuming-rest/)

该页面说：

> 如果您看到错误 Could not extract response: no proper HttpMessageConverter found for response type [class hello.Quote] 可能您处于无法连接到后端服务的环境中（如果您可以访问它，它将发送 JSON）。也许您支持公司代理？尝试将标准系统属性 http.proxyHost 和 http.proxyPort 设置为适合您环境的值。

这几乎就是你得到的。我知道最初的问题是在 2012 年，但希望其他人会将此视为可能的解决方案。

# c - 如何刷新协进程管道中的 I/O 缓冲区

> ID：11138355
> 
> 赞同：3
> 
> 时间：2012-06-21T12:39:03.157
> 
> 标签：c, unix, pipe, flush

我正在使用*管道*编写协程。父级创建两个管道，一个用于写入子级，另一个用于从子级读取。但是当我运行程序时，它处于挂起状态，因为它将*printf*默认设置为完全缓冲。而且我不想在子进程源代码中*刷新缓冲区。*

*我知道UNIX 环境中的高级编程*第 19 章介绍了一种使用伪终端的方法。但我想知道是否有更多示例方法可以做到这一点。谢谢大家。

这是我的源代码：

```
#include <stdio.h>
#include <unistd.h>
#include <string.h>
#include <stdlib.h>
#include <errno.h>

int main()
{
    #define MAXSIZE 1024

    char workload[MAXSIZE];
    char result[MAXSIZE];
    char buf[10] = {0};
    workload[strlen(workload)] = EOF;
    int workload_size = strlen(workload);

    int fd1[2], fd2[2];
    int n;
    pid_t pid;
    if (pipe(fd1) < 0 || pipe(fd2) < 0) {
        fprintf(stderr, "pipe error: %s\n", strerror(errno));
        exit(1);
    }

    if ((pid = fork()) < 0) {
        fprintf(stderr, "fork error: %s\n", strerror(errno));
        exit(1);
    } else if (pid > 0) {
        close(fd1[0]);
        close(fd2[1]);
        while(fgets(workload, MAXSIZE, stdin) != NULL)
        {
            workload_size = strlen(workload);
            if (write(fd1[1], workload, workload_size) != workload_size) {
                fprintf(stderr, "write to pipe error: %s\n", strerror(errno));
                exit(1);
            }

            if ((n = read(fd2[0], result, MAXSIZE)) < 0) {
                fprintf(stderr, "read from pipe error: %s\n", strerror(errno));
                exit(1);
            }

            if (n == 0) {
                fprintf(stderr, "child closed the pipe\n");
                exit(1);
            }

            result[n] = 0;

            if (puts(result) == EOF) {
                fprintf(stderr, "fputs error\n");
                exit(1);
            }
        }
    } else {
        close(fd1[1]);
        close(fd2[0]);
        if (fd1[0] != STDIN_FILENO) {
            if (dup2(fd1[0] ,STDIN_FILENO) != STDIN_FILENO) {
                fprintf(stderr, "dup2 error to stdin.\n");
                exit(1);
            }
            close(fd1[0]);
        }
        if (fd2[1] != STDOUT_FILENO) {
            if (dup2(fd2[1] ,STDOUT_FILENO) != STDOUT_FILENO) {
                fprintf(stderr, "dup2 error to stdout.\n");
                exit(1);
            }
            close(fd2[1]);
        }

        if (execl("./a.out", "a.out", NULL) < 0) {
            fprintf(stderr, "execl error: %s\n", strerror(errno));
            exit(1);
        }
        exit(0);
    }

    return 0;
} 
```

子进程只是从标准输入中读取并输出它：

```
#include <stdio.h>

int main()
{
    #define MAXSIZE 1024
    char x[MAXSIZE];
    int n;
    while(fgets(x, 1024, stdin) != NULL)
    {
        printf("%s", x);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:41:25.313

您可以使用[`stdbuf`](http://www.gnu.org/software/coreutils/manual/html_node/stdbuf-invocation.html)实用程序来更改子进程的缓冲。

或者，如果您可以更改子进程的代码，则[`setvbuf`](http://pubs.opengroup.org/onlinepubs/009604499/functions/setvbuf.html)直接从子进程调用。

# perl - Perl：导出器的问题

> ID：11138361
> 
> 赞同：4
> 
> 时间：2012-06-21T12:39:33.737
> 
> 标签：perl, exporter

模块：***`./FOO/BAR/Foobar.pm`***

```
use strict;
use warnings;

package Foobar;
   our($VERSION , @ISA , @EXPORT , @EXPORT_OK , %EXPORT_TAGS , $FOO);
   BEGIN {
      require Exporter;
      @ISA       = qw(Exporter);
      @EXPORT_OK = qw(&foo);
   }

   sub foo {
      print "Loaded\n";
      $FOO = q{some val};
   }

1; 
```

程序：***`./Caller.pl`***

```
#!/usr/bin/perl

   use strict;
   use warnings;

   use FOO::BAR::Foobar qw/foo/;

   Foobar::foo();  # works
   foo();          # errors out - can't find &main::foo 
```

* * *

我会列出我尝试过的所有东西，但还有很多 - 正如你所看到的，我有比列出的更多的全局 Foobar 全局变量。我已经删除了 BEGIN 并按照 PerlMonks 上 [older] 帖子中的建议做了一些其他的事情。

我想我曾经在某处读过，如果包名称与模块名称相同，则默认情况下，Exporter 会以某种方式工作。我不知道将模块放在子目录中是否会改变这种行为（？）。但是，我很想看看我是怎么搞砸的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T13:02:50.107

如果模块位于 FOO/BAR/Foobar.pm，那么包名应该是`FOO::BAR::Foobar`.

我还会`&`从 @EXPORT_OK 数组中删除符号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T13:45:57.870

除了 choroba 的回答，我还发现了[Sherm Pendley的这篇](http://shermspace.blogspot.com/)[文章](http://www.velocityreviews.com/forums/t908972-dose-package-name-has-to-be-the-same-as-the-filename-for-oo.html)，我认为这与我几年前读过的相同：

> 在导出函数的非 OO 模块中，它们必须相同，Exporter 才能执行其操作。当你使用（）一个模块时——我们称之为“Foo”，以下步骤基本上是发生的：
> 
> ```
> BEGIN {
>    require Foo;
>    import Foo qw(args);
> } 
> ```
> 
> 第二步是可选的 - 如果模块 Foo 中没有 import() 函数，use() 仍然会成功。
> 
> 现在，让我们假设包 Bar 在 Foo.pm 中。Foo.pm 由 require() 编译，没有问题。因为它的代码在包 Bar 中，所以显式声明或从 Exporter 继承的 import() 函数也被编译到该包中。
> 
> 但是 use() 仍然尝试调用 Foo 包中的 import() 函数。更糟糕的是，因为 import() 是可选的，它会*默默地*失败。用户将得到出错的唯一线索是，如果没有完全指定的包名称，即 Bar::baz()，包 Bar 中声明的任何函数都无法使用，因为 import() 未能创建当前包中它们的别名。
> 
> 其他事情也可能取决于 filename = package 约定。以 perldoc 为例。如果您模块的用户运行“perldoc Foo”来获取您模块的文档，它将读取在 Foo.pm 中找到的文档。如果这些文档描述了一个名为“Bar”的包，用户会感到困惑。
> 
> 即使您的模块是“纯”OO 并且不导出任何内容，遵循既定约定也有助于避免混淆 - 想象一个维护程序员在一年后查看您的脚本，并看到以下内容：
> 
> ```
> use Foo;
> my $bar = Bar->new(); 
> ```
> 
> 看到 Foo.pm 中定义的类 Bar 不是很直观。
> 
> 所以不，理论上不需要。但是将它们命名为相同的约定被广泛遵循，实际上它或多或少是需要的。

* * *

因此，似乎每个模块有多个包，只有与文件同名的包才能导出其变量/函数。我怀疑如果你要为其他包创建自己的导入函数（？），你可以让它工作。

无论如何，在我的示例中，如果我不想将*包*称为整个层次结构树，我可以设置 lib：

```
use lib './FOO/BAR';
use Foobar qw/foo/;   # instead of "use FOO::BAR::Foobar" 
```

这意味着我仍然可以拥有`Foobar.pm`并在其中`package Foobar`而不是`package FOO::BAR::Foobar`

# c# - 我必须引用哪些 dll 才能访问 .net 框架 4.5 中的 JsonArray

> ID：11138366
> 
> 赞同：3
> 
> 时间：2012-06-21T12:39:48.207
> 
> 标签：c#, asp.net-mvc-4, visual-studio-2012, arrays

我正在尝试在 Visual Studio 2012 RC 的新空 asp.net mvc4 项目中使用 JsonArray 类。但是，我似乎无法访问该课程。

我在文档中读到该类是在命名空间 System.Json 中的 System.Runtime.Serialization.dll 中定义的。但是，当我在项目中添加 dll 文件并在对象浏览器中打开它时，命名空间 System.Json 不在那里。

有什么想法可能是错的吗？他们是否已将班级搬迁到 RC 中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T14:57:00.847

如果您安装了 Json.net，请添加 using 语句

使用 Newtonsoft.Json.Linq

那么您可以使用 JArray 代替 JsonArray 和 JObject 代替 JsonObject

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:50:42.090

我认为你需要 Json.Net

来自[Scott Hanselman 博客](http://www.hanselman.com/blog/OnTheNightmareThatIsJSONDatesPlusJSONNETAndASPNETWebAPI.aspx)

> Web 团队中的我们将在 Web API 发布时将 JSON.NET 作为默认的 JSON 序列化器包括在内，这样会很好。

# java - 在 Install4j 中处理不同的发布计划

> ID：11138369
> 
> 赞同：2
> 
> 时间：2012-06-21T12:39:54.667
> 
> 标签：java, build, install4j

我目前正在为我的公司评估 Install4J。我们有一个用例，希望能够处理以下构建：开发、预发布和生产。它们只会在两个方面有所不同：

1.  一个命令行参数指定它是哪个构建（用于确定要连接到哪个服务器环境等）。
2.  发布时间表。

例如：我们希望能够在安装了预发布版本的情况下向一小群人发布我们软件的新版本，一旦我们觉得它足够稳定，我们就想创建一个生产版本。我们希望自动更新功能能够自动理解它不应该在版本类型之间混用（即，如果您安装了预发行版，则应该只获得预发行版更新）。

我们如何在不创建 4 个完全独立的设置项目的情况下实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:04:14.377

您可以使用编译器变量来做到这一点。在 General Settings->Compiler Variables 选项卡上定义适当的编译器变量，并将它们与语法一起使用

```
${compiler:variableName} 
```

在其他文本字段中。所有文本字段旁边都有一个变量选择器（右侧的箭头），可让您从列表中选择变量。

构建时，您可以从命令行 ( `-D NAME=VALUE[,NAME=VALUE]`) 或 ant 任务（子元素`<variable name="variableName" value="variableValue"/>`）覆盖编译器变量值。

# asp.net - System.DirectoryServices.AccountManagement.UserPrincipal - localhost 但不是 iis

> ID：11138373
> 
> 赞同：9
> 
> 时间：2012-06-21T12:40:08.380
> 
> 标签：asp.net, impersonation, userprincipal

为什么下面的代码在我运行我的 Web 应用程序 localhost 时可以正常工作，但在我将其安装到 IIS 服务器时却不行？

```
using (HostingEnvironment.Impersonate())
{
    UserPrincipal activeUser = UserPrincipal.Current;
    String activeUserSid = activeUser.Sid.ToString();
    String activeUserUPN = activeUser.UserPrincipalName;
} 
```

请不要建议我坚持，`HttpContext.Current.User`因为它不提供对 SID 或 UPN 的访问，而无需额外调用 Active Directory。

Web 应用程序将由来自三个独立域的 Windows 身份验证用户使用，Web 服务器托管在第四个域中。应用程序池配置为在`NetworkService`身份下运行，并且 Web 应用配置将身份模拟设置为 true。

在 IIS 上运行时的错误消息是：

> Page_Load() 中的错误：UserPrincipal.Current。
> System.InvalidCastException：无法将“System.DirectoryServices.AccountManagement.GroupPrincipal”类型的对象转换为“System.DirectoryServices.AccountManagement.UserPrincipal”类型。
> 在 System.DirectoryServices.AccountManagement.UserPrincipal.FindByIdentity(PrincipalContext context, IdentityType identityType, String identityValue)
> 在 System.DirectoryServices.AccountManagement.UserPrincipal.get_Current()
> 在 webapp.Details.Default.Page_Load(Object sender, EventArgs e)

**编辑**：尝试了以下两种方法，不幸的是得到了同样的错误。

```
UserPrincipal userPrincipal = UserPrincipal.Current;
Response.Write(userPrincipal.Name); 
```

```
Principal userOrGroup = UserPrincipal.Current;
Response.Write(userOrGroup.Name); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-13T19:32:02.743

我在部署 UserPrincipal.Current 时遇到了很多问题，但仍然不完全明白为什么。

我最终最终使用了 PrincipalSearcher，并创建了以下函数来完成我认为 UserPrincipal.Current 正在做的事情。

```
private UserPrincipal GetActiveDirectoryUser(string userName)
{
    using(var ctx = new PrincipalContext(ContextType.Domain))
    using(var user = new UserPrincipal(ctx) { SamAccountName = userName})
    using(var searcher = new PrincipalSearcher(user))
    {
        return searcher.FindOne() as UserPrincipal;
    }
} 
```

我将 System.Web.HttpContext.Current.User.Identity.Name 作为用户名传递给该方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T14:35:46.433

似乎需要一些其他方法来确定用户。
这里来自 msdn 的属性描述：
“获取代表当前运行线程的用户的用户主体对象。”
因此，UserPrincipal.Current 返回运行 IIS 的用户。

[http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.userprincipal.aspx](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.userprincipal.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-23T11:41:11.360

是的，这是因为由于多个 using 语句，您正在处理返回的 UserPrincipal 对象。从 using 语句中删除 'ctx'，然后调用者负责处理返回的对象。

# jqgrid - jqgrid在chrome vs firefox上显示

> ID：11138375
> 
> 赞同：1
> 
> 时间：2012-06-21T12:40:12.020
> 
> 标签：jqgrid, jqgrid-formatter

我不确定这是否是 chrome 上的错误，但我在网格上的最后一个 td 显示不正确。以下是使用 FIREFOX 时的屏幕截图

![火狐显示](../Images/7dd1ba08a5188a98feb4414bde5deea7.png)

而在 CHROME 上显示就是这样。宽度设置为 80 像素。我暂时将其左对齐以至少显示内容。

```
{name:'act', index:'act', width:80, align:"left"} 
```

![在此处输入图像描述](../Images/ff849df41770274cf3b634dcb9d4b3f5.png)

有这方面的经验吗？我的 chrome 版本是 19.0.1084.56 m

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:05:55.113

您使用的是什么版本的 jqGrid？该团队最近发布了[4.4.0 版](http://www.trirand.com/blog/?p=974)，该版本纠正了 Chrome 中出现的一些显示错误，即 Internet Explorer/Firefox。我升级了，许多这些显示异常都消失了。

# ruby-on-rails-3 - 如何在项目根文件夹中制作 rvmrc 文件？

> ID：11138376
> 
> 赞同：24
> 
> 时间：2012-06-21T12:40:12.457
> 
> 标签：ruby-on-rails-3, rvm

我刚刚在我的机器上安装了 RVM，遇到了 rvmrc 文件的问题，谁能帮我，如何创建 rvmrc？

我已经做了：

```
rvmrc --create ruby-1.8.7-p352@gemset 
```

但没有得到结果...

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-21T12:46:15.977

似乎有一个小错误。在您的`.rvmrc`文件中添加：

```
rvm use ruby-1.8.7-p352@gemset --create 
```

此外，您可能希望将 gemset 的名称更改为更易于阅读的名称：)

**更新**

使用 rvmrc 文件现在已被视为已弃用。而是一个带有 ruby​​ 版本的 .ruby-version 文件，例如“2.0.0”和一个带有 gemset 名称的 .ruby-gemset 文件，例如“monkeys_of_doom”

这样，使用其他版本管理器（例如 rbenv）的开发人员可以自动获取 ruby​​ 版本。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-21T12:46:36.013

```
rvm --rvmrc --create ruby-1.8.7-p352@gemset 
```

阅读这篇文章。[http://net.tutsplus.com/tutorials/why-you-should-use-rvm/](http://net.tutsplus.com/tutorials/why-you-should-use-rvm/)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-09T17:50:14.553

如果 gemset 已经存在，添加`rvm ruby-1.8.7-p352@gemset`到`.rvmrc`文件中就足够了，例如可以通过

```
echo "rvm ruby-1.8.7-p352@gemset" > .rvmrc 
```

更新：看起来 .rvmrc 文件格式已被弃用，而是鼓励使用`.ruby-gemset`and文件。`.ruby-version`如果“rails2.3.5”是您的 gemset 名称，则需要以下两个命令

```
echo "ruby-1.8.7-p352" > .ruby-version
echo "rails2.3.5" > .ruby-gemset 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-02-26T07:37:55.887

我找到了可行的解决方案（[http://sirupsen.com/get-started-right-with-rvm/](http://sirupsen.com/get-started-right-with-rvm/)）

```
rvm --create --rvmrc 1.8.7@project 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-06-27T06:13:44.740

你也可以这样做

```
rvm --rvmrc --create use ruby-1.9.3-p194@myproject 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-04-02T14:27:13.710

而不是`rvmc`使用：

```
rvm --create --ruby-version ruby-2.1.04@my-project 
```

将生成`.ruby-gemset`和`.ruby-version`文件

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-06-21T15:35:52.927

有关如何创建 rvmrc 文件以及影响它们的全局 .rvmrc 参数的最终文档位于[https://rvm.io/workflow/rvmrc/ 。](https://rvm.io/workflow/rvmrc/)

--rvmrc 参数是实际创建 rvmrc 文件的参数，然后您必须运行

> rvm rvmrc 信任。

在项目目录中生成并记录安全 md5 哈希以使用该 rvmrc 文件。该命令“信任”该文件，因此每次进入目录时都不会提示您信任它。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-06-21T13:36:25.360

这是另一种更简单的方法

```
rvm use 1.8.7@gemset --create 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-01-21T08:07:59.647

首先你需要创建一个 rvmrc 像 -

```
rvm --rvmrc --create  use ruby-2.2.1@gemset_name 
```

然后运行

`rvm rvmrc trust .`

这将解决为不同应用程序选择 rvm 的问题。

希望你喜欢。:)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-02-15T14:16:54.210

要使用特定的 ruby​​ 和 gemset 创建 rvmrc 文件，请使用以下命令 -

```
rvm --rvmrc --create ruby-with-version@gemset_name 
```

喜欢：

```
rvm --rvmrc --create ruby-2.3.3@rails5 
```

现在我们应该需要选择项目位置以进行更改反射，因此键入**cd ..**并在终端中按**回车键**

再次输入**cd project_name/**以选择我们的项目，但现在您会看到*** 注意**如下图所示的内容，因此您只需输入**y**并按**Enter**即可。

[![在此处输入图像描述](../Images/609041b8d114e25200a09e6bb4d52e41.png)](https://i.stack.imgur.com/lijEp.jpg)

现在您已经成功创建了 rvmrc 文件，因此从现在开始无需在每次选择不同项目时都选择 gemset。

# gwt - 向 LiveGrid 添加过滤器？

> ID：11138381
> 
> 赞同：2
> 
> 时间：2012-06-21T12:40:20.273
> 
> 标签：gwt, extjs, gxt

我正在使用 gxt 的[LiveGrid](http://www.sencha.com/examples/#ExamplePlace%3alivegrid)。我想添加[过滤器](http://www.sencha.com/examples/#ExamplePlace%3afiltergrid)。我在下面添加了几行，但没有过滤数据。我在这里错过了什么吗？

```
GridFilters filters = new GridFilters(); 
filters.setLocal(true); 

StringFilter nameFilter = new StringFilter("column name"); 
filters.addFilter(nameFilter); 

filters.init(liveGrid);
liveGrid.addPlugin(filters); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:37:11.703

从[过滤器](http://dev.sencha.com/deploy/gxt-3.0.0/javadoc/gxt/com/sencha/gxt/widget/core/client/grid/filters/Filter.html)javadoc ：

> 要将过滤器添加到 Grid 列，请创建 Filter 的具体子类的实例，将列的 ValueProvider 传递给构造函数，然后将过滤器添加到 GridFilters

您的代码示例似乎过于严格，可能应该参数化。StringFilter 应该为您希望过滤的模型对象的属性提供一个 ValueProvider。以下是如何使用过滤器创建网格的简单概述。

假设您有一个类用户

```
public class User implements Serializable {
    private String name;
    private Integer id;

    // Setters and getters
}

public interface UserProperties extends PropertyAccess<User> {
    @Path("id")
    ModelKeyProvider<User> key();

    ValueProvider<User, String> name();
} 
```

要创建一个将显示您的用户的网格，您将执行以下操作

```
private static final UserProperties props = GWT.create(UserProperties.class);
...

// Create column config
ColumnConfig<User, String> nameCol = new ColumnConfig<User, String>(props.name(), 200, "Name");

// Create column model
List<ColumnConfig<User, ?>> l = new ArrayList<ColumnConfig<User, ?>>();
l.add(nameCol);
ColumnModel<User> cm = new ColumnModel<User>(l);

// Create User store
ListStore<User> store = new ListStore<User>(props.key());

// Create your grid
final LiveGridView<User> liveGridView = new LiveGridView<User>();
liveGridView.setForceFit(true);

Grid<User> view = new Grid<User>(store, cm) {
  @Override
  protected void onAfterFirstAttach() {
    super.onAfterFirstAttach();
    // Get grid data
  }
};

// Create a String filter for the column
StringFilter<User> nameFilter = new StringFilter<User>(props.name());

// Create a GridFilters
GridFilters<User> filters = new GridFilters<User>();
filters.initPlugin(grid);
filters.setLocal(true);
filters.addFilter(nameFilter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:25:56.633

GridFilters 过滤器 = new GridFilters(); filters.setLocal(true);

StringFilter nameFilter = new StringFilter("列名"); filters.addFilter(nameFilter);

过滤器.init(liveGrid); liveGrid.addPlugin(过滤器);

如果您想在应用过滤器后获取数据，您需要覆盖 AbstractGridFilters 的 reload() 方法。

# javascript - 将 url 的最后一个字符串与 li 的 id 名称进行比较

> ID：11138382
> 
> 赞同：0
> 
> 时间：2012-06-21T12:40:22.613
> 
> 标签：javascript, jquery

我需要将 url 的最后一个字符串与 an 的 id 进行比较`<li>`，如果相同，则执行某些操作。在下面的示例中，我首先使用我的代码将其与通用 ID 进行比较，它可以工作，但我还需要针对`<li>`s 的特定 id，需要提到这些`<li>`s 以字符串“filter-”开头，因此我也需要删除“filter-”，然后获取 id 的最后一位，最后将其与 url 的最后一个字符串进行比较，如果相同，请做一些事情。我试过这个：

示例网址：

```
url: http://www_example_com/category=.name 
```

示例 html：

```
<div class="leftNav">
   <ul id="name">
      <li id="filter-name">Lorem</li>
      <li id="filter-name2">Lorem</li>
   </ul>
</div> 
```

结束前的</head>：

```
 jQuery(window).load(function() {
       var string = document.location.href.split('=.')[1];
       var stripString = $(".leftNav ul li").attr("id").replace("filter-", "");
       $(".leftNav ul").hide();
       $("#" + string).slideDown("slow");
       if(string == stripString) {
           $("#" + stripString).slideDown("slow");
       }
    }); 
```

任何人？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:49:15.690

我想，你想要这个：

```
var token = document.location.href.split('=.')[1];
$(".leftNav ul").children().andSelf().hide();
$("#" + token).slideDown("slow");
$(".leftNav ul li[id$='"+token+"']").slideDown("slow"); 
```

或者最后一行可以改为：

```
$(".leftNav ul li#filter-"+token).slideDown("slow"); 
```

# ios - 无法在 XCode 中找到或创建新的 Storyboard 文件

> ID：11138384
> 
> 赞同：0
> 
> 时间：2012-06-21T12:40:27.210
> 
> 标签：ios, xcode

我正在尝试在 XCode 中使用 Storyboard 文件，但在创建项目时找不到它，当我下载 Storyboard 示例时，我无法打开它作为 XML 文件打开的 Storyboard 文件任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:05:44.513

看来您使用的是旧版本的 xcode，您必须下载 xcode 4.2+ 版本

您当前版本的 xcode 无法理解故事板文件，并且由于故事板是 xml 文件，因此打开它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:00:49.933

故事板从 iOS 5 SDK 开始就可以使用了。如果您使用的是旧版本，那么您可能应该更新。在这里下载：[https ://developer.apple.com/technologies/ios5/](https://developer.apple.com/technologies/ios5/)

# c# - 将 String.Compare/CompareInfo.Compare 全局设置为 Ordinal

> ID：11138387
> 
> 赞同：5
> 
> 时间：2012-06-21T12:40:38.867
> 
> 标签：c#, string, cultureinfo

我正在寻找一种策略，我可以使用该策略将 String.CompareTo 的默认排序顺序设置为 bytewise - ordinal。我**需**要这样做，而不必在方法调用中指定排序顺序。

我尝试了几种策略，但都没有令人满意的结果。我做到了这一点：

```
CultureAndRegionInfoBuilder crib = 
            new CultureAndRegionInfoBuilder("foo", CultureAndRegionModifiers.Neutral);

        CompareInfo compareInfo = new CustomCompareInfo();
        crib.Register(); 
```

在此 CustomCompareInfo 中，我尝试覆盖默认的 CompareInfo 类，但不幸的是，这无法编译：

```
The type 'System.Globalization.CompareInfo' has no constructors defined 
```

我被困在这里。感觉 CompareInfo 的自定义实现是我的问题的解决方案。

对此有任何想法吗？

编辑：我的问题的背景：

我正在从事的这个项目非常不同寻常——一个庞大的代码库已经从另一种编程语言转换为 .NET。在这种编程语言中，字符串比较默认为序数，而与 .NET 的这种差异会导致转换后的代码库出现错误，所以我认为如果我们能够将 .NET 配置为相同的默认行为，这将是最优雅的解决方案。

当然，可以使用比较说明符重新转换代码。或者，我们可以引入一个扩展方法来执行序数（二进制）比较。等等..

然而，就我而言，从架构的角度来看，这些解决方案并不那么优雅。这就是为什么我正在寻找一个解决方案，我可以在框架上全局设置这个序数比较。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T12:53:21.033

抱歉，您无法完成这项工作。CompareInfo 类*确实*有一个构造函数。但它是内部的，并以 CultureInfo 作为参数。实际实现涉及 CultureInfo 的私有成员，这些成员反映内置于 mscorlib 中的排序表。它们不可扩展。

这在 VB.NET 中确实有效，大概是您追求这个的原因。它有一个选项比较语句，可让您选择二进制比较。然而，这不是通过 CultureInfo 实现的，而是由编译器完成的。它识别字符串比较并将其*替换*为知道所选选项比较的自定义 vb.net 字符串比较方法。它的名字是 Microsoft.VisualBasic.CompilerServices.Operators.CompareString()

您不能哄骗 C# 编译器进入相同的行为。您必须煞费苦心地替换转换后的 vb.net 代码中的比较表达式。当然，这是一项糟糕的工作，而且很容易出错。如果转换是由转换器程序完成的，那么使用好的反编译器可能会更好，它不会隐藏 CompareString() 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:03:33.867

似乎无法设置默认比较模式（此处为序数）。

如果您想要的是始终一致的比较结果，您可以为您在应用程序中创建的每个线程设置文化为“不变”（cultureInfo 以空字符串作为参数） Thread.CurrentThread.CurrentCulture = new CultureInfo("") ; 如果您想为性能执行序数比较，我真的认为无法全局执行任何操作 - 每次执行字符串比较时都需要显式传递此选项。

你能告诉我们你到底需要什么吗？

# excel - 使用 VBA 在 excel 中自定义饼图排序

> ID：11138388
> 
> 赞同：1
> 
> 时间：2012-06-21T12:40:41.660
> 
> 标签：excel, pie-chart, vba

有没有办法使用 VBA 在 excel（2003、2007、2010）中自定义饼图切片的顺序，这样它们就不会仅仅按值分组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T15:17:35.493

所以我不知道为什么它以前不起作用，但你所做的就是重新排序范围内的数据。

例如要更改第 5 项和第 6 项的位置，只需重新排列即可。 ![切片改变](../Images/29379b520d6af0cada0c6ac7edf9e707.png)

像这样： ![在此处输入图像描述](../Images/21e8e5ad01c0a948fbbf0dab807e460a.png)

# javascript - 在 EmberJS 中从模板中检索数据的首选方式

> ID：11138389
> 
> 赞同：1
> 
> 时间：2012-06-21T12:40:43.073
> 
> 标签：javascript, jquery, ember.js

我试图从我的模板中获取一些数据，比如说，添加一个用户。

这是我的视图对象的样子：

```
Ember.View.create({
    template: Ember.Handlebars.compile( UsersIndexTemplate ),
    addUser: function() {
        var value = $('#my-awesome-input').val();
    }
}) 
```

从理论上讲，我已经通过 jQuery 获得了我的价值，但这是首选的方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:17:48.133

您应该使用绑定将模板中的值绑定到视图上的属性，请参见示例[http://jsfiddle.net/pangratz666/uuvAp/](http://jsfiddle.net/pangratz666/uuvAp/)：

**车把**：

```
<script type="text/x-handlebars" data-template-name="my-template" >
    <!-- bind value of TextField to property username of view -->
    Username: {{view Ember.TextField valueBinding="view.username"}}
    <button {{action addUser}}>addUser</button>
</script>​ 
```

**JavaScript**：

```
Ember.View.create({
    templateName: 'my-template',
    addUser: function(event){
        var username = this.get('username');
        console.log('add user with name: %@'.fmt(username));
    }
}).append(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:14:06.263

您可以使用可用的 insertNewline 来处理该值。

看到这个小提琴[http://jsfiddle.net/z5SNW/6/](http://jsfiddle.net/z5SNW/6/)

# android - 如何防止其他用户更改 gps 位置和位置更新调用每个小间隔（比如 3 秒）

> ID：11138392
> 
> 赞同：3
> 
> 时间：2012-06-21T12:40:55.623
> 
> 标签：android, gps, location, spoofing

我见过一些应用程序，如 gpsspoofer 和假 gps 应用程序，它们将位置设置为欺骗错误的位置，但我的应用程序要获得正确的位置，请提供建议。

我的另一个问题

```
 Loc.requestLocationUpdates(Provider.get(i), 600000, 1000, new LocationListener() {
        @Override
        public void onStatusChanged(String provider, int status,Bundle extras) {
        /// some thing
       }
       @Override
       public void onProviderEnabled(String provider) {
       /// some thing
      } 
       @Override
       public void onProviderDisabled(String provider) {
        /// some thing
       }
       @Override
       public void onLocationChanged(Location location) { 
      /// some thing
      }
     });
    } 
```

> **我的问题是**，如果我已经设置了**600000 毫秒**的位置更新，那么为什么每个小于**1000**和 **6000000的****小间隔**都会调用**onLocationChanged(Location location)**

 ******* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T10:50:36.650

据我所知，这是可能的。可以从两件事中检索 Gps。来自手机本身的 GPS，这个可以被没有 root 访问权限的人通过使用模拟定位来欺骗。以及具有 root 权限且没有打开模拟定位的正确权限的人。也可以使用 wifi (wps) 计算用户的位置。我不知道是否有任何方法可以简单地伪造 wps 位置，但是如果将这两者结合起来，并且它们不一样，您就可以知道是否有人在伪造 gps。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T00:49:29.890

> 简单的答案：你不能。您的应用程序从系统获取 GPS 位置。这些应用程序的工作方式使系统返回欺骗/不正确的值。如果您在有根手机上运行并拥有 root 权限，那么您可以检查 GPS 呼叫是否被拦截并对其进行处理。否则你就不走运了。
> 
> 反向问题：如何检测是否存在某种 GPS 模拟？[http://gpscreations.com/Products_GPS_SIM14.html](http://gpscreations.com/Products_GPS_SIM14.html)也就是说，你永远无法确定。即使对于软件解决方案，如果您正在检查，应用程序可能已经预料到了这一点并具有反检查机制；所以你需要检查那些；这也可能是意料之中的等等。-海龟一直向下:-(******

# css - 如何使左对齐文本居中？

> ID：11138395
> 
> 赞同：0
> 
> 时间：2012-06-21T12:41:02.183
> 
> 标签：css

这是有效的丑陋代码：

```
<table style="margin: auto"><tr><td>
Name: Fred Flintstone<br>
Home: Bedrock<br>
Favorite activity: Going to the drive-in and eating a brontosaurus burger!
</td></tr></table> 
```

我的目标是将左对齐文本块居中。在这一点上我知道如何做的唯一方法是尝试测量/猜测必要的包含 div 的宽度。“好吧，也许是 400 像素。不，这会导致它换行……让我们试试 450。”

我真正需要的是一些代码来创建一个容器，该容器允许我将任何文本放入其中并将其自身调整为该宽度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:46:31.677

`<div>`您还可以按如下方式使用一些容器（[例如小提琴](http://jsfiddle.net/u3bWh/)）：

```
<div id="container">
    <div id="content">
      Name: Fred Flintstone<br>
      Home: Bedrock<br>
      Favorite activity: Going to the drive-in and eating a brontosaurus burger!
    </div>
</div> 
```

这个CSS：

```
#container {
    text-align: center;
}

#content {
    display: inline-block;
    text-align: left;
} 
```

# ios - 使用 selectannotation 时 iOS Mapkit 崩溃

> ID：11138403
> 
> 赞同：3
> 
> 时间：2012-06-21T12:41:32.873
> 
> 标签：ios, ipad, crash, mapkit, segmentation-fault

我无法弄清楚这次崩溃的原因。

我在同一屏幕上有一个带有 MapView 和 Tableview 的 iPad 应用程序。我试图让用户在表格中选择一行，然后在地图中突出显示相应的引脚，反之亦然。在模拟器中它工作正常。在设备上它可以工作一段时间，但如果我继续这样做，它会因 SIGSEGV 而崩溃。我不知道为什么。

它似乎仅在从选定的 tableview 行转到在 mapview 中选择 pin 时才会发生。

这是代码

```
 Place *p = [self.results objectAtIndex:[indexPath row]];

NSArray *annon = [self.mapView annotations];
for ( int i = 0; i < [annon count]; i++)
{
      NSObject *a = [annon objectAtIndex:i];
      if ([a isKindOfClass:PlaceAnnotation.class])
      {
           PlaceAnnotation *pa = (PlaceAnnotation *)a;
           if (p.placeid == pa.placeid)
           {  
                [self.mapView selectAnnotation:pa animated:YES];
                break;
           }
      }
} 
```

以下是我们在执行此代码时看到的崩溃类型。

```
Exception Type:  SIGSEGV
Exception Codes: SEGV_ACCERR at 0x9
Crashed Thread:  0

Thread 0 Crashed:
0   libobjc.A.dylib                     0x317c4f78 0x317c1000 + 16248
1   CoreFoundation                      0x3195576b 0x318c6000 + 587627
2   CoreFoundation                      0x318cd644 0x318c6000 + 30276
3   CoreFoundation                      0x318cf701 0x318c6000 + 38657
4   MapKit                              0x36b061f3 0x36ab9000 + 315891
5   MapKit                              0x36acf33d 0x36ab9000 + 90941
6   MapKit                              0x36acf2f1 0x36ab9000 + 90865
7   MapKit                              0x36ad29bd 0x36ab9000 + 104893
8   MapKit                              0x36acdf03 0x36ab9000 + 85763 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:12:29.107

我认为崩溃是因为找到准确位置后立即出现的当前位置气泡。尝试使用以下禁用用户位置

```
[self.mapView setShowsUserLocation:NO]; 
```

如果您需要用户位置，请包含以下委托方法并检查应用程序是否崩溃。

```
- (MKAnnotationView *) mapView:(MKMapView *) mapView viewForAnnotation:(id ) annotation {
if(![annotation isKindOfClass:[PlaceAnnotation class]]) {
    return nil;
} 
```

}

谢谢。

# asp.net - 创建一个值为 MAX(Column)+1 的新 sql 条目给出无效使用组函数

> ID：11138409
> 
> 赞同：1
> 
> 时间：2012-06-21T12:41:40.547
> 
> 标签：asp.net, mysql, sql

我想手动创建一个 ID 字段，我在其中执行 MAX + 1，并且我想在一个 QUERY 中执行它，所以我确定 2 个条目无法获得相同的字段。

```
 using (MySqlConnection dbConn = new MySqlConnection(ConfigurationManager.ConnectionStrings["ProjektConStr"].ConnectionString))
    {
        dbConn.Open();
        using (MySqlCommand cmd = new MySqlCommand("INSERT INTO Submission (CaseId , SubjectId, CenterId, EmployeeName, Reason, Description, Explanation, Date, Done, ChiefLevel) VALUES (MAX(CaseId)+1, @subject_id, @center_id, @employee_name, @reason, @description, @explanation, @date, @done, @chief)", dbConn))
        {
            cmd.Parameters.AddWithValue("date", submission.Date);
            cmd.Parameters.AddWithValue("subject_id", submission.SubjectId);
            cmd.Parameters.AddWithValue("center_id", submission.CenterId);
            cmd.Parameters.AddWithValue("employee_name", submission.EmployeeName);
            cmd.Parameters.AddWithValue("reason", submission.Reason);
            cmd.Parameters.AddWithValue("description", submission.Description);
            cmd.Parameters.AddWithValue("explanation", submission.Explanation);
            cmd.Parameters.AddWithValue("done", false);
            cmd.Parameters.AddWithValue("chief", false);
            cmd.ExecuteNonQuery();
        } 
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:44:13.810

```
 Use subquery to select max and insert a value 
```

插入提交（CaseId、SubjectId、CenterId、EmployeeName、原因、描述、解释、日期、完成、ChiefLevel）值（

```
 (1 + coalesce((SELECT max(CaseId) FROM Submission), 0)) 
```

、@subject_id、@center_id、@employee_name、@reason、@description、@explanation、@date、@done、@chief）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:44:37.153

```
 using (MySqlCommand cmd = new MySqlCommand("INSERT INTO Submission 
 (CaseId , SubjectId, CenterId, EmployeeName, Reason, Description, Explanation, 
 Date, Done, ChiefLevel) 
 VALUES ((select MAX(CaseId)+1 from YourTable), 
 @subject_id, @center_id, @employee_name, @reason, @description, @explanation,
 @date, @done, @chief)", dbConn)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:45:21.640

您不能在单个查询中执行此操作，您必须获取 MAX_id 然后递增它，然后插入，或者您可以将表设为自动递增，在这里您不必在插入查询中包含 id。

# c++ - std::copy ：复制仅发生 1 个字节，而不是指定长度

> ID：11138411
> 
> 赞同：-1
> 
> 时间：2012-06-21T12:41:44.227
> 
> 标签：c++

请看下面的代码片段：

```
#include <iostream>
using namespace std;

int main()
{
uint32_t len, x;
char abc[] = "12345678";
uint8_t *ptr = (uint8_t *)abc;
copy(ptr, ptr + 4, reinterpret_cast<uint32_t*>(&len));
cout << " len: " << len << endl;
} 
```

输出是49！我希望输出为 1234。我错过了什么吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T12:46:09.280

您的目标是一个长度为 1 的“容器”（即单个对象`len`）。

您正在将四个后续字节值复制到此容器中，这当然会失败 - 特别是，它会导致溢出，因为目标只有单个元素的空间。

代码中的其他错误（不是详尽的列表）：

*   您正在混淆字符代码及其字符串表示
*   您正在执行多余的演员表

特别是第一点是相关的，因为您真正想要做的是将字符串前四个字符中编码的数字*解析*为十进制数。但是你实际上做的是复制它的字符代码。

要在 C++ 中解析数字，请使用 as[`std::stringstream`](http://en.cppreference.com/w/cpp/io/basic_stringstream)或，从 C++11 开始，[`std::stoi`](http://en.cppreference.com/w/cpp/string/basic_string/stol)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:51:13.253

std:copy 无法按您的预期工作。它将源“元素方式”复制到目标。所以它将第一个 uint8（= char '1' == 0x49 in hex）复制到 'len'，然后继续践踏内存中的三个随机 uint32 值。

这反而是为了看看实际发生了什么。

```
#include <iostream>
using namespace std;

int main()
{
  uint32_t len[4];
  char abc[] = "12345678";
  copy(abc, &abc[4], &len[0]);
  cout << " len: " << len[0] << " " <<len[1] << " " << len[2] << " " << len[3] << endl;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:49:38.580

首先，`std::copy`大致这样做：

```
template <typename InputItr, typename OutputItr>
void copy(InputItr begin, InputItr end, OutputItr obegin)
{
    while (begin != end)
        *obegin++ = *begin++;
} 
```

您的输出迭代器是`uint32_t*`，这实际上会导致您覆盖 4 个 32 位字！（缓冲区溢出）。您看到`49`是因为复制的第一个字符 ( `'1'`) 具有 ASCII 值 49。

# linq - Linq to Entites - 项目实体关联到接口列表

> ID：11138414
> 
> 赞同：0
> 
> 时间：2012-06-21T12:41:58.017
> 
> 标签：linq, entity-framework, linq-to-entities

我有一个场景，我想查询一个包含两个的 Context`EntityObjects`并将结果转换为强类型的接口列表。

**实体对象**

```
public class CompanyEntity : EntityObject
{
    public string Name { get; set; }
    public EntityCollection<StaffEntity> Staff { get; set; }
}

public class StaffEntity : EntityObject
{
    public string FullName { get; set; }
} 
```

**领域对象**

```
public class Company : IOrganisation
{
    public string Name { get; set; }
    public List<IPerson> Staff { get; set; }
}

public class StaffMember : IPerson
{
    public string FullName { get; set; }
} 
```

**接口**

```
public interface IOrganisation
{
    string Name { get; set; }
    List<IPerson> Staff { get; set; }
}

public interface IPerson
{
    string FullName { get; set; }
} 
```

如果我忽略`StaffEntity`并只查询`CompanyEntity`，将其转换为 a`List<IOrganisation>`是直截了当的，如下所示：

```
List<IOrganisation> orgs = (from c in context.Companies
                            select new Company
                            {
                                Name = c.Name 
                            }).ToList<IOrganisation>(); 
```

但是，当我想查询两者`EntityObjects`并将关联的`StaffEntity`对象投影到`StaffMember`域对象时遇到问题，然后将它们转换为`List<IPerson>`以便可以将它们分配给对象的`Staff`属性`Company`。

我已经尝试了很多东西，我得到的最接近的是如下，但是在运行时 EF 不喜欢这个调用`.ToList<IPerson>()`：

```
List<IOrganisation> orgs = (from c in context.Companies.Include("Staff")
                            select new Company
                            {
                                Name = c.Name,
                                Staff = (from s in c.Staff
                                         select new StaffMember
                                         {
                                             FullName = s.FullName,
                                         }).ToList<IPerson>()
                            }
                            into results
                            select results).ToList<IOrganisation>(); 
```

所以我基本上需要使用 LINQ to Entities 查询检索接口列表的嵌套对象图。我需要域对象作为接口列表的原因是因为它们被传递到其他程序集中，这些程序集没有引用具体的域对象或实体框架，但是它们确实引用了它们实现的接口。此外，实现接口是不合适的`EntityObjects`，所以我想看看我问的问题是否可能。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:54:16.343

好的，我解决了。EF 无法做我想做的事，所以我`EntityObjects`使用该`AsEnumerable()`方法检索了我的，然后我可以使用 LINQ to Qbjects 在集合上做我想做的事`IEnumerable`。

工作解决方案如下

```
List<IOrganisation> orgs = context.Companies.Include("Staff")
                               .AsEnumerable()
                               .Select(c => new Company
                               {
                                   CompanyName = c.CompanyName,
                                   Staff = c.Staff.Select(s => new StaffMember
                                                  {
                                                      FullName = s.FullName
                                                  }).Cast<IPerson>().ToList()
                               }).Cast<IOrganisation>().ToList(); 
```

# php - 对于在同一页面上生成的变量，插入语句在 MYSQL 中不起作用

> ID：11138419
> 
> 赞同：0
> 
> 时间：2012-06-21T12:42:21.200
> 
> 标签：php, mysql, insert

我的脚本需要你的帮助。我正在尝试将值插入 mysql，同时输入 $row['senatorial'] 和 $constituencys。下面的 coe 是我正在努力工作，但它不起作用。我在屏幕上没有显示任何错误，也没有任何内容输入到数据库中。请问我哪里错了

```
<?php

if (isset($_POST['action']) && $_POST['action'] == "submit") {

  $state  = mysql_real_escape_string(trim($_POST['state']));

  $query = mysql_query("SELECT senatorial              
                    FROM state
                    WHERE state = '".$state."'") or die (mysql_error());

  $duplicates = mysql_num_rows($query);

  if (isset($_POST['constituency']) && $_POST['action'] == "create") {

    $constituencys = $_POST['constituency'];
    foreach($constituencys as $constituency) {
      $query = "
                    INSERT INTO  `state` (
                    `state_id`,
                    `state`,
                    `senatorial`
                    `constituency`
                    ) VALUES (
                    NULL,
                    '{$state}',
                    '{$row['senatorial']}',
                    '" . mysql_real_escape_string(trim($constituency)) . "'
                    )
                    ";
      mysql_query($query) or die (mysql_error());

    }
  } ?>

<form action="<?php echo $_SERVER['SCRIPT_NAME'] ?>" method="post">
  <?php

  while($row=mysql_fetch_assoc($query)){
    echo strtoupper($row['senatorial']) ;?>
    <input type='text' name='constituency[]' title='Federal Constituency' />
    <?php  } ;?>
  <input type="hidden" name="create" value="create" />
  <input type='submit' name='create' value='Create' />
</form>
<?php } ?>

<h2>Select State To show Senatorial Districts</h2>
<form  action="<?php echo $_SERVER['SCRIPT_NAME'] ?>" method="post">
  State:<select name="state" title='State'  class='OpenInput_Select'>
  <option value ="">    </option>
  <option value ="state1">state1</option></select>
  <input type="hidden" name="action" value="submit" />
  <input type='submit' name='submit' value='SHOW' />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:57:49.280

这个 if 语句：

```
if (isset($_POST['constituency']) && $_POST['action'] == "create") 
```

在这个 if 语句中：

```
if (isset($_POST['action']) && $_POST['action'] == "submit") 
```

所以，$_POST['action'] 不能同时是“提交”和“创建”，所以你永远不会进入你的 INSERT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:05:28.263

试试这个代码：

```
if (isset($_POST['action']) && $_POST['action'] == "submit") {
    $state  = mysql_real_escape_string(trim($_POST['state']));
    $query = mysql_query("SELECT senatorial              
                    FROM state
                    WHERE state = '".$state."'") or die (mysql_error());

    $duplicates = mysql_num_rows($query);
}

if (isset($_POST['constituency']) && $_POST['action'] == "create") {
    $constituencys = $_POST['constituency'];
    foreach($constituencys as $constituency) {
        $query = "INSERT INTO  `state` (
                `state_id`,
                `state`,
                `senatorial`
                `constituency`
                ) VALUES (
                NULL,
                '{$state}',
                '{$row['senatorial']}',
                '" . mysql_real_escape_string(trim($constituency)) . "'
                )";
        mysql_query($query) or die (mysql_error());
    }
} 
```

**我建议开始使用`mysqli_*`函数或 PDO 扩展而不是`mysql_*`...**

# iphone - 文件名形式 NSFileHandle

> ID：11138420
> 
> 赞同：0
> 
> 时间：2012-06-21T12:42:21.130
> 
> 标签：iphone, objective-c, ios, file-io, nsfilehandle

我正在使用第三方 SDK 进行文件处理，他们为文件打开、文件读取、文件写入提供了一些句柄。当我使用文件路径创建该 SDK 的包装器对象时，它会调用这些句柄方法（文件打开、文件读取等）。

我想在读取文件时更改文件的数据。但是 SDK 打开多个支持文件，所以我无法找到它是我的文件处于读取状态还是其他文件。

他们在读取方法中提供了 NSFileHandle 的对象，我有什么方法可以找出它是我的文件还是使用文件句柄对象的支持文件，或者还有其他方法。

请建议我解决方案。

问候：

# complexity-theory - 复杂度分析 - 添加 2 个函数

> ID：11138423
> 
> 赞同：0
> 
> 时间：2012-06-21T12:42:36.737
> 
> 标签：complexity-theory, big-o

我有一个家庭作业问题

```
Given f(n) is O(k(n)) and g(n) is O(k(n)), prove f(n)+g(n) is also O(k(n)) 
```

我不确定从哪里开始，有什么帮助可以指导我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:48:23.387

尝试并在逻辑上完成它。 `f(n)`以线性速率增加。也是如此`g(n)`。所以

```
O(n) + O(n) = O(2n) 
```

当试图找到一个函数的大 O 分类时，常量不计算在内。我会把剩下的（包括*为什么*）留给你练习。（获得关于 SO 的完整答案将是作弊！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:58:01.003

请参阅[**Big-Oh 表示法的规则。**](http://www.augustana.ualberta.ca/~hackw/csc210/exhibit/chap04/bigOhRules.html)

**求和规则：**如果`f(n)`is`O(h(n))`和`g(n)`is `O(p(n))`，那么`f(n)+g(n)`is `O(h(n)+p(n))`。

对您的情况使用此规则的复杂性将是`O(2k(n))`，这不过是`O(k(n))`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T17:24:46.373

因此，对于任意大的 n 值，如果 f(n) 小于或等于 g(n) 的某个正常数倍数，则 f(n) 为 O(g(n))（因此：f(n) <= cg(n) 对于 n >= n_0)。通常，为了证明某事是 O(g(n))，我们提供一些 c 和 n_0 来证明它是真的。

在您的情况下，我将从使用该定义开始，因此您可以说 f(n) <= ck(n) 和 g(n) <= dk(n)。我不想为你完全回答这个问题，但你基本上只是想证明 f(n)+g(n) <= tk(n)。

*c、d 和 t 都是任意的正常数。如果您需要更多帮助，请发表评论，我很乐意提供更多信息。

# excel - Excel 2007 中基于“良好”中心值/绝对值的色标格式

> ID：11138424
> 
> 赞同：2
> 
> 时间：2012-06-21T12:42:39.267
> 
> 标签：excel

假设我有一个单元格，如果值为 2000，我希望它是红色的，如果它是 +-200，我想是黄色，如果它是 +-500，我想是红色。Excel 似乎不想让我有一个好的中心值，任何过高或过低的值都是不好的值。

我能得到的最接近的是 3 色渐变，它是红色/绿色/红色，没有黄色中间色。我尝试使用基于绝对值的公式，其中我将最小颜色设置为绿色，公式为 abs(a1-2000)=0，黄色中点为 abs(a1-2000)=200，红色最大值为 abs(a1 -2000)=500 但 Excel 不允许我在公式中使用相对引用进行色阶格式设置。

有人有想法么？

编辑：我应该澄清我正在使用 Excel 2007

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:03:03.423

创建 3 条新规则的**Format only 包含**类型的单元格，**如果为 true 则全部停止**：

1.  正好 2000 红
2.  1800 到 2200 黄色
3.  在 1500 和 2500 之间红色。

![在此处输入图像描述](../Images/97ad8d6a45bd1a40d1e299263c16239a.png) ![在此处输入图像描述](../Images/e71f7e07fd46a431b87915fca5df20d0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-24T21:39:00.643

根据需要在 2000 处使用尽可能多的隐藏单元格，以使平均值偏向 2000。您可以在创建规则时选择所有这些额外的单元格，然后隐藏它们。

# java - 替换标签内的字符串？

> ID：11138425
> 
> 赞同：11
> 
> 时间：2012-06-21T12:42:40.483
> 
> 标签：java, regex

我想替换一些标签内的内容，例如：

```
<p>this it to be replaced</p> 
```

我可以提取这样的组之间的内容，但我真的可以替换组吗？

```
str = str.replaceAll("<p>([^<]*)</p>", "replacement"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T12:45:27.370

您可以为此使用[环视](http://www.regular-expressions.info/lookaround.html)（积极的前瞻和后视）：

将正则表达式更改为：`"(?<=<p>)(.*?)(?=</p>)"`你会没事的。

* * *

## 例子：

```
String str = "<p>this it to be replaced</p>";
System.out.println(str.replaceAll("(?<=<p>)(.*?)(?=</p>)", "replacement")); 
```

输出：

```
<p>replacement</p> 
```

* * *

*但是请注意，如果您正在解析 HTML，您应该使用某种 HTML 解析器，通常正则表达式还不够好......*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-21T12:46:41.203

将正则表达式更改为：

```
(?<=<p>).*?(?=</p>) 
```

IE

```
str = str.replaceAll("(?<=<p>).*?(?=</p>)", "replacement"); 
```

这使用“向后看”和“向前看”来断言，但不捕获匹配（非贪婪）正则表达式之前/之后的输入

以防万一有人想知道，这个答案与 dacwe 的不同：他使用了不必要的括号。这个答案更优雅:)

# android - 我的第一个使用 Ice Cream Sandwich 制作的 Android 应用程序几乎完成了，并且想知道向后兼容性

> ID：11138426
> 
> 赞同：2
> 
> 时间：2012-06-21T12:42:43.060
> 
> 标签：android, android-4.0-ice-cream-sandwich, backwards-compatibility, android-2.3-gingerbread

您好，我已经使用 Ice Cream Sandwich SDK 开发了我的第一个 Android 应用程序，我想知道是否有一种方法可以使其与运行 Gingerbread 的设备兼容，而无需重新执行整个程序。我试图从其他来源找到答案，但还没有找到任何东西。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:52:39.213

祝贺您开发了您的第一个应用程序；）如果不知道您的应用程序正在使用什么，就很难回答您的问题。如果您的应用程序使用 Android ICS API 的新功能，您必须实现一些兼容性代码（请参阅[支持包](http://developer.android.com/sdk/compatibility-library.html)）。如果没有，您只需将其添加到您的 AndroidManifest.xml 中：

```
<uses-sdk
    android:targetSdkVersion="14"
    android:minSdkVersion="7"
/> 
```

请注意，7 适用于 Android 2.1

了解您是否使用 Android 4 (ICS) 的特定 API 的最佳方法是尝试在较低版本的模拟器上启动您的项目。如果这给您带来错误，那是因为您有兼容性问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:49:15.563

只需`build target`在 Eclipse 中设置为`Android 2.3`. 如果您在 Eclipse 中遇到任何编译错误，这意味着您正在使用`APIs`在中不可用的内容，并且您的应用程序将在运行>`2.3`时到达这些行时崩溃。`2.3`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:46:27.147

只需确保您使用的是旧版本 Android 上的 API。尝试阅读 ICS 的新内容并避免使用这些内容 :) 这几乎超出了使用更新的 SDK 的目的，该 SDK 会发生很多变化并破坏很多东西。小心新的布局......

# iphone - 无法从另一个类访问类实例

> ID：11138429
> 
> 赞同：0
> 
> 时间：2012-06-21T12:43:04.290
> 
> 标签：iphone, objective-c, xcode, class, instance

在我的 AppDelegate 中，我导入了我创建的类的标题，并对其实例进行了属性化和合成（在 AppDelegate 中）。现在我正在尝试从其他两个视图访问此实例中的方法和变量。我对objective-c比较陌生，但到目前为止我已经了解到，如果我这样做：

```
AppDelegate *appdelegate = [AppDelegate new]; 
```

我将从 AppDelegate 中的类中获取一个新实例，因此如果我从一个视图设置变量，我将无法从另一个视图访问它。我已经读过，如果我这样做的话：

```
AppDelegate *ap = (AppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

它将允许我访问现有实例。但它不起作用。

我尝试这样做的方式完全错误吗？非常感谢你的帮助！

更新：

当我在 AppDelegate 中执行此操作时：

```
myClass.string = @"test";
NSLog(@"appDelegate: %@", myClass.string); 
```

我明白了：

```
appDelegate: (null) 
```

更新2：

我写了@class AppDelegate；在 viewController 中的 @import 行下方，但我仍然无法访问 myClass。一个主要问题（这可能是从视图中无法正常工作的原因）是我什至无法从 AppDelegate 访问 myClass。

在 AppDelegate.h 我写道：

```
@property (strong, nonatomic) testClass *myClass; 
```

在 AppDelegate.m 中：

```
#import "testClass.h"
@synthesize myClass; 
```

这应该是对的，对吧？

我的类.h

```
 @property (strong, nonatomic) NSString *string; 
```

我的班级.m

```
@synthesize string; 
```

然后当我尝试从 appDelegate 访问 myClass 时，我写道：

```
self.myClass.string = @"test";
NSLog(@"appDelegate: %@", self.myClass.string); 
```

结果是：

```
appDelegate: (null) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:14:41.393

`#import "AppDelegate"`

也写

`@class AppDelegate;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T13:30:51.493

我认为你必须分配和初始化`myClass`

写入文件 `myClass = [MyClass alloc] init]`_`AppDelegate.m`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T14:45:10.940

除非您没有显示它，否则您不会分配 testClass 并且不会将其分配给 myClass。Objective-C 不像 C++ 或 Java，您可以简单地声明一个特定类类型的变量并将其实例化到堆栈上。您使用的每个类都必须实例化，无论是手动还是通过 InterfaceBuilder。例外情况是各种框架提供的某些类具有单个共享实例。您只需请求共享实例，而不是分配这些类。但是，这里不是这样。这是你自己的类，所以你需要分配它。

它看起来像：

```
myClass = [[testClass alloc] init]; 
```

# xml - 以文本形式输出带有名称的版本

> ID：11138432
> 
> 赞同：1
> 
> 时间：2012-06-21T12:43:14.477
> 
> 标签：xml, xslt, xslt-1.0

这是我的输入 xml。xml 最多可以有 3 个节点，最少可以有 1 个节点。输入 xml 可以具有的最小节点，如下所示

```
<Root>
   <node>uniquename</node>
</Root> 
```

输入 xml 可以具有的最大节点数如下。包含节点的唯一名称将始终存在。

以下示例所需输出的示例输入 xml

```
<Root>
   <node>abc</node>
   <node>e1</node>
   <node>uniquename2</node>
</Root> 
```

值“abc”对于所有输入 xml 都是通用的。e1 的值就像一个版本号。它可以有 e1 到 e9。它也可以有像 e1.1 到 e9.9 这样的次要版本。第三个节点是唯一的。我的输出应该是下面的文本，下面的示例作为所需的输出

```
Unique name with version from the xml - uniquename2e1
version number - e1
common name - Present in the input 
```

输入 xml 节点的顺序会有所不同，即有时版本号可能位于顶部，有时唯一名称可能位于顶部。通用名称也是如此。不过，我的输出应该有唯一名称，后跟版本号。如果输入 xml 中没有通用名称，则输出文本应指示，它不存在

如果输入中没有版本号，则输出中的版本号行可以为空白

```
Unique name with version from the xml - uniquename3
common name - Present/Absent in the input. 
```

虽然我没有 xslt 2.0 处理器，但我的 xslt 处理器支持 xmlns:regexp="http://exslt.org/regular-expressions"，我想用它来查找版本控制部分。

**编辑**

唯一名称是不遵循版本号模式`^e\d(\.\d)*$`或不是通用名称的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:29:14.510

**这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns:my="my:my">
     <xsl:output method="text"/>

     <my:commonAbsent/>

     <xsl:variable name="vVer" select=
      "/*/node
           [starts-with(., 'e')
          and
           number(substring(.,2)) = number(substring(.,2))]"/>

     <xsl:template match="/*">
      <xsl:apply-templates mode="unique" select=
       "node[not(. = 'abc'
                or
                 generate-id() =generate-id($vVer)
                 )
             ]"/>
      <xsl:apply-templates select="$vVer" mode="ver"/>

      <xsl:apply-templates select=
       "node[. = 'abc']
       |
        document('')
           [not(current()/node[.='abc'])]
                        /*/my:commonAbsent
       "/>
     </xsl:template>

     <xsl:template match="node" mode="unique">
     Unique name with version from the xml - <xsl:text/>

     <xsl:value-of select="concat(., $vVer)"/>
     </xsl:template>

     <xsl:template match="node" mode="ver">
     Version number - <xsl:value-of select="$vVer"/>
     </xsl:template>

     <xsl:template match="node[. = 'abc']">
     Common name - Present in the input
     </xsl:template>

     <xsl:template match="my:commonAbsent">
     Common name - Absent in the input
     </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<Root>
    <node>abc</node>
    <node>e1</node>
    <node>uniquename2</node>
</Root> 
```

**产生想要的正确结果**：

```
 Unique name with version from the xml - uniquename2e1
 Version number - e1
 Common name - Present in the input 
```

**当对没有“通用名称”的 XML 文档应用相同的转换时：**

```
<Root>
    <node>e1</node>
    <node>uniquename2</node>
</Root> 
```

**再次产生正确的、想要的结果：**

```
 Unique name with version from the xml - uniquename2e1
 Version number - e1
 Common name - Absent in the input 
```

**最后，如果 XML 文档中没有表示“版本”：**

```
<Root>
    <node>abc</node>
    <node>uniquename2</node>
</Root> 
```

**再次应用相同的转换会产生想要的正确结果：**

```
 Unique name with version from the xml - uniquename2
 Common name - Present in the input 
```

**说明**：

结果树中节点的顺序（在这些情况下，它们都是文本节点）完全由指令的顺序决定，这些`xsl:apply-templates`指令选择执行生成这些结果树节点的模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:28:48.467

我没有对此进行测试，因为我无法访问 EXSLT，但是这个样式表应该可以工作.. 这个脚本还有很大的改进空间，比如将节点放入变量中，这样它们就不会必须重复计算并在 not( 条件) 上使用 xsl:choose 而不是 xsl:if 和 xsl:if。所以认为这是快速而肮脏的版本。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:regexp="http://exslt.org/regular-expressions"
  extension-element-prefixes="regexp">
<xsl:import href="regexp.xsl" />    
<xsl:output method="text" />

<xsl:template match="/">
<xsl:value-of select="Root/node[.!='abc'][regexp:test(.,'^e\d(\.\d)*$','')]" /><xsl:value-of select="Root/node[regexp:test(.,'^e\d(\.\d)*$','')]" /> 
<xsl:if test="Root/node[regexp:test(.,'^e\d(\.\d)*$','')]">
version number - <xsl:value-of select="Root/node[regexp:test(.,'^e\d(\.\d)*$','')]" />
</xsl:if>  
<xsl:if test="Root/node[.='abc']">
common name - Present in the input
</xsl:if>  
<xsl:if test="not( Root/node[.='abc'])">
common name - Absent in the input
</xsl:if>  
</xsl:template>

</xsl:stylesheet> 
```

# sed - 就地更换

> ID：11138434
> 
> 赞同：25
> 
> 时间：2012-06-21T12:43:27.150
> 
> 标签：sed, awk

我有一个 CSV。我想编辑 CSV 的第 35 个字段并将更改写回第 35 个字段。这就是我在 bash 上所做的：

```
awk -F "," '{print $35}' test.csv  | sed -i 's/^0/+91/g' 
```

因此，我使用 awk 拉出第 35 个条目，然后将字符串中起始位置的“0”替换为“+91”。这个效果很好，我在控制台上得到了想要的输出。

现在我希望将这个新条目写入文件中。我正在考虑 sed 的“就地”替换功能，但这个 fetuare 需要输入文件。在上面的命令中，我无法提供输入文件，因为我的主要命令是 awk 而 sed 正在从 awk 获取输入。

谢谢。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-21T12:48:27.110

您应该选择两种工具之一。至于`sed`，可以如下进行：

```
sed -ri 's/^(([^,]*,){34})0([^,]*)/\1+91\3/' test.csv 
```

不确定`awk`，但@shellter 的评论可能对此有所帮助。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-21T15:14:35.767

sed的`in-place`功能命名错误，因为它不会就地编辑文件。相反，它会创建一个同名的新文件。例如：

```
$ echo foo > foo
$ ln -f foo bar
$ ls -i foo bar  # These are the same file
797325 bar  797325 foo
$ echo new-text > foo  # Changes bar
$ cat bar
new-text
$ printf '/new/s//newer\nw\nq\n' | ed foo  # Edit foo "in-place"; changes bar
9
newer-text
11
$ cat bar
newer-text
$ ls -i foo bar  # Still the same file
797325 bar  797325 foo
$ sed -i s/new/newer/ foo   # Does not edit in-place; creates a new file
$ ls -i foo bar
797325 bar  792722 foo 
```

由于 sed 实际上并不是在原地编辑文件，而是编写一个新文件，然后将其重命名为旧文件，因此您也可以这样做。

```
awk ... test.csv | sed ... > test.csv.1 && mv test.csv.1 test.csv 
```

存在一种误解，即使用`sed -i`某种方式可以避免创建临时文件。它不是。它只是向你隐藏了事实。有时抽象是一件好事，但有时它是不必要的混淆。在 的情况下`sed -i`，是后者。Shell 非常擅长文件操作。按预期使用它。如果您确实需要就地编辑文件，请不要使用 ; 的流式传输版本`ed`。只需使用`ed`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T16:39:31.803

这可能对您有用：

```
sed -i 's/[^,]*/+91/35' test.csv 
```

编辑：

要替换第 35 个字段中的前导零：

```
sed 'h;s/[^,]*/\n&/35;/\n0/!{x;b};s//+91/' test.csv 
```

或更简单地说：

```
|sed 's/^\(\([^,]*,\)\{34\}\)0/\1+91/' test.csv 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-22T08:46:08.967

因此，事实证明有很多方法可以做到这一点。我让它与 sed 一起工作，如下所示：

`sed -i 's/0\([0-9]\{10\}\)/\+91\1/g' test.csv`

但这有点棘手，因为它会编辑任何符合条件的条目。但是在我的情况下，它工作正常。

perl中上述逻辑的类似实现：

`perl -p -i -e 's/\b0(\d{10})\b/\+91$1/g;' test.csv`

同样，与上述相同的警告。

**Lev Levitsky**展示了更精确的方法， 因为它将专门在第 35 场上运行

`sed -ri 's/^(([^,]*,){34})0([^,]*)/\1+91\3/g' test.csv`

对于更复杂的情况，我将不得不考虑使用 perl 的任何 csv 模块。

感谢大家的时间和投入。阅读您的回复后，我肯定对 sed/awk 有更多了解。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-21T13:21:26.023

如果您安装了[moreutils](https://joeyh.name/code/moreutils/)，您可以简单地使用该`sponge`工具：

```
awk -F "," '{print $35}' test.csv  | sed -i 's/^0/+91/g' | sponge test.csv 
```

`sponge`吸收输入，关闭输入管道（stdin），然后才打开并写入`test.csv`文件。

截至 2015 年，moreutils 可在几个主要 Linux 发行版的软件包存储库中使用，例如[Arch Linux](https://www.archlinux.org/packages/community/x86_64/moreutils/)、[Debian](https://packages.debian.org/jessie/moreutils)和[Ubuntu](http://packages.ubuntu.com/lucid/utils/moreutils)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-13T00:24:07.720

另一种就地编辑第 35 个字段的 perl 解决方案：

`perl -i -F, -lane '$F[34] =~ s/^0/+91/; print join ",",@F' test.csv`

使用这些命令行选项：

*   `-i`就地编辑文件
*   `-n`循环输入文件的每一行
*   `-l`在处理之前删除换行符，然后将它们添加回来
*   `-a`自动拆分模式——将输入行拆分到`@F`数组中。默认为空格分割。
*   `-e`执行 perl 代码
*   `-F`自动拆分修饰符，在这种情况下拆分`,`

`@F`是每行中的单词数组，从 0 开始索引
`$F[34]`是数组的第 35 个元素进行
`s/^0/+91/`替换

# xml - xsd可以保证节点数而不关心顺序吗

> ID：11138436
> 
> 赞同：0
> 
> 时间：2012-06-21T12:43:27.787
> 
> 标签：xml, xsd

我已经尝试了几种方法来为这个问题创建一个模式，但我没有取得任何成功。我不确定这是否可能。

基本上，假设我有一个根节点`<root>`，它可以有子节点`<A>`、`<B>`和`<C>`。

对于输出 xml 的程序的每次迭代，创建 A、B 和 C 节点并将其作为子节点附加到根。但是，每次迭代并不总是使用每个 A、B 和 C……在这种情况下，它不输出任何节点。所以我得到这样的例子：

```
<A>sfs</A> <!-- first iteration used A, B, and C -->
<B>sfs</B>
<C>ss</C>
<A>fff</A> <!-- second iteration used A, and C, not B -->
<C>ss</C>
<B>fff</B> <!-- third iteration used only B --> 
```

我没有编写以这种方式输出它的程序，并且对格式没有真正的权力。

例如，我所知道的是，永远不会有超过 10 个 A、2 个 C、5 个 B。但是，不能保证订单。

所以我想要的只是一个 XSD 来确定根内只有 A、B 和 C 节点，并且不超过 10 个 A、2 个 C 和 5 个 B。

我可以通过使用 xs:choice 和 maxOccurs unbounded 来实现第一部分。它只保证 A、B 和 C 节点，但我似乎无法找到一种方法来强制执行它们的数量。

这个问题有一些聪明的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:51:08.740

要使用 XSD 验证这种结构，您无能为力。XSD 非常严格。

您可能会更好地使用 xml，然后对代码中的反序列化实例进行一些检查。

# perl - 通过http打开远程文件

> ID：11138438
> 
> 赞同：2
> 
> 时间：2012-06-21T12:43:41.890
> 
> 标签：perl, http, module, screen-scraping

是否有任何 perl 模块，如 File::Remote，可通过 http（只读）工作？就像是

```
$magic_module->open( SCRAPE, "http://somesite.com/");
while(<SCRAPE>)
{
  #do something     
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T12:48:23.380

是的当然。您可以使用`LWP::Simple`：

```
use LWP::Simple;
my $content = get $url; 
```

不要忘记检查内容是否为空：

```
die "Can't download $url" unless defined $content; 
```

`$content`会不会是`undef`在下载过程中发生了一些错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T13:22:16.633

使用[HTTP::Tiny](http://p3rl.org/HTTP%3a%3aTiny)：

```
use HTTP::Tiny qw();
my $response = HTTP::Tiny->new->get('http://example.com/');
if ($response->{success}) {
    print $response->{content};
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T13:11:43.850

您也可以使用[`File::Fetch`](https://metacpan.org/module/File%3a%3aFetch)模块：

```
File::Fetch
    ->new(uri => 'http://google.com/robots.txt')
    ->fetch(to => \(my $file));
say($file); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T13:00:14.983

如果您希望统一接口同时处理本地、远程 (HTTP/FTP) 和任何其他文件，请使用[`IO::All`](http://p3rl.org/IO%3a%3aAll)module.

```
use IO::All;

# reading local
my $handle = io("file.txt");
while(defined(my $line = $handle->getline)){
    print $line
}

# reading remote
$handle = io("http://google.com");
while(defined(my $line = $handle->getline)){
    print $line
} 
```

# jquery-ui - TipTip 仅在 ajaxpost 之后的第二次悬停时起作用

> ID：11138441
> 
> 赞同：2
> 
> 时间：2012-06-21T12:43:51.093
> 
> 标签：jquery-ui, jquery

**情况：**

我的工具提示显示在我的页面上。打开我的fancybox作品。从那个fancybox 做ajax 帖子是可行的。但是我的工具提示在那个花式框中不起作用。在我发布 ajax 之后它们就不起作用了。

我尝试使用 fancybox 的回调重新初始化 TipTip。

**编辑** 标题更改所以我找到了一种方法让它在发布后的第二次悬停时运行，而不是在第一次悬停时运行。

[我也在这里](https://stackoverflow.com/questions/8386176/tiptip-works-on-second-hover-after-ajax-request-using-tiptip-and-jquery-on)找到了一些解释，但它仍然没有解决我的问题。很可能是做错了。

**EDIT 2** Tootip 在 fancybox 工作中仅使用 afterShow。

**变化**

在 $(function () { 中添加了这个，以便它调用这个函数而不是 initTipTip。

```
 $(".tooltip").live('mouseover', function () {
    $(this).tipTip();

}); 
```

我的函数的代码，它完成了发布的事情并关闭了我的幻想箱。

> ```
> var reservation = MakeReservation();
> var oldDateSplit = $("#resDate").val().split('/');
> var newDateSplit = $("#dateEditReservation").val().split('/');
> var oldDate = new Date(oldDateSplit[2], oldDateSplit[1] - 1, oldDateSplit[0]);
> var newDate = new Date(newDateSplit[2], newDateSplit[1] - 1, newDateSplit[0]);
> var time = $("#txtTime");
> $.ajax({
>     url: ResolveUrl('~/Reservation/CheckSettings'),
>     data: "JSONString=" + reservation + "&hasJavaScriptMethod=" + true
> }).done(function (data) {
> 
>     if (data.length == 0 || oldDate.getTime() == newDate.getTime()) {
>         $.fancybox.close();
>         var id = $("#reservationId").val();
> 
>         $("#reservationList").load(ResolveUrl('~/Reservation/reservationList', 
> ```
> 
> 函数 () { initTipTip(); })); $("#reservationDetail").load(ResolveUrl('~/Reservation/DetailInfo', function () { initTipTip(); }), { reservationId: id }); $("#reservationList").on("悬停", ".tooltip", function () { $(this).tipTip(); }); } else { $(".errorDiv").removeClass("hidden"); $(".errorDiv").html(数据); $(".btnReservations").removeAttr('disabled'); }
> 
> ```
> }); 
> ```
> 
> **新** $(".tooltip").live('mouseover', function () { $(this).tipTip();
> 
> ```
> }); 
> ```
> 
> }

**还是和修改前一样。**

TipTip 的代码初始化

```
function initTipTip () {

   $(".tooltip").tipTip();

} 
```

花式盒子的代码

```
function openFancy() {

    $("a.inline").fancybox({
        'type': 'ajax',
        'afterShow': function () {
             return initTipTip();
          }
    });

    $("a.inlineBlockedDate").fancybox({
        'type': 'ajax',
        'ajax': { cache: false },
        'afterShow': function () {
            return initTipTip();
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T06:32:19.960

我找到了解决方案。

所以我在 $(function(){ 中使用了我的 .live ，就像在我的问题中一样，但我在这里没有使用“.tooltip”而是表格本身。我也在这里使用 initTipTip 而不是 $(this).tipTip(); 所以这个从 TipTip 解决工具提示。

**说明：**这是因为 tooltip.live 仅在第一次悬停时触发，而不是在表格“刷新”时触发。因此，现在您在表格的刷新时添加该事件 如果我在这里错了，请纠正我。

所以不需要任何其他 .tiptip 东西或 InitTipTip 然后在 $(function(){

```
 $("#reservationList").live('mouseover', function () {
    initTipTip();

}); 
```

我希望你的问题能通过这个问题得到解决。

# jsf - 通过 FacesContext 进行部分渲染

> ID：11138443
> 
> 赞同：3
> 
> 时间：2012-06-21T12:43:59.273
> 
> 标签：jsf

实际上我得到了一个 inputText 和一些 ajax 请求来在 keyup 事件出现时呈现一个数据表。

我的页面.xhmtl：

```
 <h:form id="form">

    <h:inputText id="number_in" value="#{bean.number}" redisplay="false" >
         <f:ajax event="keyup" render=":form:dataTable" />
    </h:inputText>

    <h:dataTable id="dataTable" ...>
    ...
    </h:dataTable>

 <h:form> 
```

我不想再从 jsf 页面呈现 dataTable 了。我想在调用侦听器方法时通过 FacesContext 在 MangedBean 中呈现数据表。

我的页面.xhtml：

```
<h:form id="form">

    <h:inputText id="number_in" value="#{bean.number}" redisplay="false" >
         <f:ajax event="keyup" listener="#{bean.onKeyup}" />
    </h:inputText>

    <h:dataTable id="dataTable" ...>
    ...
    </h:dataTable> 
```

mybean.java：

```
 @ManagedBean(name="bean")
  @SessionScoped
  public class Bean {
     ...
     public void onKeyUp(AjaxBehaviorEvent event) {
        //Here I want to render the dataTable
     }
     ...
  } 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T13:10:41.037

您可以以编程方式将渲染 ID 添加到[`PartialViewContext#getRenderIds()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/PartialViewContext.html#getRenderIds%28%29).

```
FacesContext.getCurrentInstance().getPartialViewContext().getRenderIds().add("form:dataTable"); 
```

请注意，这只能包含绝对客户端 ID，并且不应以 . 为前缀`:`。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-09-08T20:34:20.730

```
FacesContext.getCurrentInstance().getPartialViewContext().setRenderAll(true); 
```

# java - 可序列化的 Spring AOP 切入点

> ID：11138446
> 
> 赞同：4
> 
> 时间：2012-06-21T12:44:01.117
> 
> 标签：java, spring, aop, spring-aop, serializable

是否可以为 SpringBean Serializable 创建一个切入点？

我想使用以下语法拦截控制器的 writeObject 和 readObject：

```
execution(* ((@org.springframework.stereotype.Controller java.io.Serializable)+).*(..)) 
```

我认为问题是 readObject/writeObject 是私有的并且以不同的方式调用。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:46:11.783

问题是：Spring AOP 将无法匹配这些切入点。Spring AOP 只匹配公共方法的切入点。您将需要 AspectJ 编译或 Load Time Weaving 才能使其工作。

> **笔记**
> 
> 由于 Spring 的 AOP 框架基于代理的性质，根据定义，受保护的方法不会被截获，对于 JDK 代理（这不适用）和 CGLIB 代理（这在技术上可行但不推荐用于 AOP 目的）都是如此。 **因此，任何给定的切入点都只会与公共方法匹配！**
> 
> 如果您的拦截需求包括受保护/私有方法甚至构造函数，请考虑使用 Spring 驱动的本机 AspectJ 编织而不是 Spring 的基于代理的 AOP 框架。这就构成了具有不同特点的不同AOP使用模式，所以在做决定之前一定要先熟悉编织。

**来源：[8.2.3.1。支持的切入点指示符](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/aop.html#aop-pointcuts-designators)**

在你问之前：将方法公开也无济于事，因为它们将由 Java 序列化机制调用，而不是由 Spring 调用，因此 Spring AOP 不知道发生了什么。

# jquery - 如何使用 Selenium Webdriver 移动 jQuery 的水平滑块或垂直滑块

> ID：11138449
> 
> 赞同：3
> 
> 时间：2012-06-21T12:44:12.077
> 
> 标签：jquery, selenium, slider, webdriver

我想制作 selenium 脚本来移动以下站点上给出的滑块

示例名称是如何更改 jQuery UI 滑块的方向

[http://jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)

我不知道怎么做

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T11:49:50.947

我计算出相当于[Franz Ebner 的答案的](https://stackoverflow.com/a/11139314/1300626 "其他答案")Python 版本。以防万一它对某人有帮助

注意：在 Python 中，

1.  find_element_by_XXX 在框架内找不到元素，除非您使用 switch_to_frame （不确定其他语言）

2.  负 (-) 偏移值无法按预期工作，因此仅移动基于传递给方法的百分比计算的偏移值

* * *

```
def check(self, percent):
    driver = self.driver
    driver.get("http://jqueryui.com/demos/slider/");
    driver.switch_to_frame(0)
    driver.switch_to_active_element()

    slidebar = driver.find_element_by_id("slider")
    height = slidebar.size['height']
    width = slidebar.size['width']

    move = ActionChains(driver);
    slider = driver.find_element_by_xpath("//div[@id='slider']/a")

    if width > height:
        //highly likely a horizontal slider
        move.click_and_hold(slider).move_by_offset(percent * width / 100, 0).release().perform()
    else:
        //highly likely a vertical slider
       move.click_and_hold(slider).move_by_offset(percent * height / 100, 0).release().perform()

    driver.switch_to_default_content() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T13:31:34.997

你试过[`Action`](http://code.google.com/p/selenium/wiki/AdvancedUserInteractions)界面吗？

特别是“生成动作链”这一点应该可以帮助您

```
/**
 * Moves a jQuery slider to percental position, don't care about directions
 * @param slider to move
 * @param percent to set the slider
 */
public void moveSliderToPercent(WebElement slider, int percent){

    Actions builder = new Actions(this.driver);

    Action dragAndDrop;

    int height = slider.getSize().getHeight();
    int width = slider.getSize().getWidth();

    if(width>height){
        //high likely a horizontal slider
        dragAndDrop = builder.clickAndHold(slider).moveByOffset(-(width/2),0).
                       moveByOffset((int)((width/100)*percent),0).
                       release().build();
    }else{
        //high likely a vertical slider
        dragAndDrop = builder.clickAndHold(slider).moveByOffset(0, -(height/2)).
                       moveByOffset(0,(int)((height/100)*percent)).
                       release().build();
    }

    dragAndDrop.perform();

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T06:02:56.963

工作代码 -

```
WebDriver driver = new InternetExplorerDriver();
driver.get("http://jqueryui.com/demos/slider/");
//Identify WebElement
WebElement slider = driver.findElement(By.xpath("//div[@id='slider']/a"));

//Using Action Class
Actions move = new Actions(driver);
Action action = move.dragAndDropBy(slider, 30, 0).build();
action.perform();

driver.quit(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T14:29:42.643

生成动作链

Actions 链生成器实现了 Builder 模式来创建一个包含一组其他操作的 CompositeAction。这应该通过配置一个动作链生成器实例并调用它的 build() 方法来获取复杂的动作来简化构建动作：

```
 Actions builder = new Actions(driver); 
 Action dragAndDrop = builder.clickAndHold(someElement)
    .moveToElement(otherElement)
    .release(otherElement)
    .build(); 
 dragAndDrop.perform(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T05:02:25.400

在这种情况下，我更喜欢使用以下代码移动滑块-

```
Actions builder = new Actions(driver);

Action dragAndDrop =

builder.clickAndHold(someElement).moveByOffset(xOffset,yOffset).release().build();

dragAndDrop.perform(); 
```

在这种特殊情况下，将滑块移动一个偏移量而不是使用 moveToElement(otherElement) 是有意义的。

希望这对您有所帮助。

# ruby - 使用 ruby 1.8 和 1.9 可靠地将 ruby DateTime 转储到 YAML 时间戳

> ID：11138451
> 
> 赞同：1
> 
> 时间：2012-06-21T12:44:14.823
> 
> 标签：ruby, datetime, yaml

我有一个问题，YAML 在 ruby​​ 1.8 和 1.9 中的工作方式不太一样。特别是在转储 DateTime 对象时。

红宝石 1.8：

```
require 'yaml'
YAML.dump(DateTime.now)
=> "--- 2012-06-21T14:29:02+02:00\n" 
```

红宝石 1.9：

```
require 'yaml'
YAML.dump(DateTime.now)
=> "--- !ruby/object:DateTime 2012-06-21 14:29:41.874102975 +02:00\n...\n" 
```

困扰我的是**!ruby/object:DateTime**标签，这很烦人。在 1.9 中使用 Time 对象解决了这个问题：

```
YAML.dump(DateTime.now.to_time)
=> "--- 2012-06-21 14:31:37.904841646 +02:00\n...\n" 
```

问题是 ruby​​ 1.8 中不存在 to_times 。此外，ruby 1.8 Time 类不处理时区（不可能创建具有任意时区的 Time 对象）。

如果可能的话，我希望时间格式相同。

那我怎么能在 YAML 中转储一个 DateTime 对象呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-19T11:16:33.940

在 Ruby 1.9.3 中，默认的 YAML 引擎从 Syck 更改为 Psyck，但两者都可用。

红宝石 1.9

```
require 'yaml'
YAML::ENGINE.yamler = 'syck'
YAML.dump(DateTime.now)
 => "--- 2016-10-19T13:12:22+02:00\n" 
```

如果你想在 Ruby 2.0 或更高版本中使用旧的 YAML 引擎（其中 Syck 肯定被删除了），你可以使用 gem [syck](https://rubygems.org/gems/syck/versions/1.1.0)。

红宝石 2.0：

```
require 'syck'
YAML.dump(DateTime.now)
 => "--- 2016-10-19T13:14:37+02:00\n" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:44:15.663

一个远非完美的解决方案是：

```
class DateTime
  def to_yaml_time
    if DateTime.method_defined? :to_time
      # to_time is defined, and Time can be converted with timezones, perfect
      to_time
    else
      # We're a bit less lucky, but hopefully in this version of Ruby, DateTime
      # can be exported without garbage in the timestamp
      # ("!ruby/object:DateTime")
      self
    end
  end
end 
```

# asp.net - ASP.NET MVC 3 授权属性

> ID：11138454
> 
> 赞同：0
> 
> 时间：2012-06-21T12:44:16.077
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我正在使用 ASP.NET MVC 3 开发一个项目，现在使用 MembershipProvider、RoleProvider AuthorizeAttribute 和自定义。所以在代码的某些部分使用这个：

```
[Logon(Roles = "login, test1")] 
```

此代码完美运行，可在 MembershipProvider 代码中使用：

```
public override string [] GetRolesForUser (string username)
{
    var = UsuarioRepository.GetListaPermissoesByUsuarioEmail permissions (username);

    if (permissions == null)
    {
        nullPermissao var = new string [0];
        nullPermissao return;
    }

    return permissions;
} 
```

我的问题是。如何使用以下代码，需要自定义哪种方法？我要检查的是确定是否登录了特定类型的用户以及它是否具有某些权限。

```
[Logon(Roles = "login, test1," Users = "User1")] 
```

使用覆盖字符串[] GetRolesForUser（字符串用户名）方法检查角色，我可以用哪种方法检查用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:40:53.620

这应该使用 AuthorizeAttribute 开箱即用。它检查 HttpContext.User.Identity.Name 是否与您在 AuthorizeAttribute.Users 下定义的任何术语匹配

正如我从评论中看到的，您在可能覆盖了 OnAuthorize 方法的地方推出了自己的 LogonAttribute。这就是 AuthorizeAtrribute 的神奇之处。

*原始 ASP.NET MVC 源*

```
protected virtual bool AuthorizeCore(HttpContextBase httpContext)
{
  if (httpContext == null)
    throw new ArgumentNullException("httpContext");
  IPrincipal user = httpContext.User;
  return user.Identity.IsAuthenticated && (this._usersSplit.Length <= 0 || Enumerable.Contains<string>((IEnumerable<string>) this._usersSplit, user.Identity.Name, (IEqualityComparer<string>) StringComparer.OrdinalIgnoreCase)) && (this._rolesSplit.Length <= 0 || Enumerable.Any<string>((IEnumerable<string>) this._rolesSplit, new Func<string, bool>(user.IsInRole)));
}

public virtual void OnAuthorization(AuthorizationContext filterContext)
{
  if (filterContext == null)
    throw new ArgumentNullException("filterContext");
  if (OutputCacheAttribute.IsChildActionCacheActive((ControllerContext) filterContext))
    throw new InvalidOperationException(MvcResources.AuthorizeAttribute_CannotUseWithinChildActionCache);
  if (this.AuthorizeCore(filterContext.HttpContext))
  {
    HttpCachePolicyBase cache = filterContext.HttpContext.Response.Cache;
    cache.SetProxyMaxAge(new TimeSpan(0L));
    cache.AddValidationCallback(new HttpCacheValidateHandler(this.CacheValidateHandler), (object) null);
  }
  else
    this.HandleUnauthorizedRequest(filterContext);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:13:11.487

您的意思是使用以下内容吗？

```
[Authorize(Roles = "login, test1", Users = "User1")] 
```

# spring - 未找到休眠验证器：忽略

> ID：11138455
> 
> 赞同：0
> 
> 时间：2012-06-21T12:44:18.883
> 
> 标签：spring, hibernate-mapping

当我启动 tomcat 时，我有这个日志到我的控制台

*   未找到休眠验证器：忽略
*   构建新的 Hibernate SessionFactory

我做了更多的研究，我没有得到好的答案，一些身体可以帮助我吗？

感谢

我apply的结构有：jsp、hibernate、spring、oracle 11g、tomcat

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:55:09.830

假设您使用[Spring MVC](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)和[`<mvc:annotation-driven />`](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-config-enable)，如果可以在类路径中找到它，您的应用程序将选择 Hibernate Validator。由于找不到它，请下载 Hibernate Validator jar 并将其放在类路径中（更好的是：通过 maven 之类的构建工具引用它）。然后它应该“自动”工作。

# c# - （另一个）远程服务器返回了意外响应：（400）错误请求 - Castle Windsor，WCF

> ID：11138460
> 
> 赞同：0
> 
> 时间：2012-06-21T12:44:37.610
> 
> 标签：c#, asp.net-mvc-3, wcf, castle-windsor

我将这个问题作为一个单独的问题向众多其他人提出的原因是我使用 Castle Windsor 3.0 作为我的 DI 框架，因此通过 CW 的 WCF 设施配置我的端点。我无法使用此设置找到任何解决方案。

* * *

**：： 更新 ：：**

感谢您的评论。

该项目是一个标准的 WCF 服务应用程序，它提供了许多连接到底层功能（SQl 服务器等）的标准类库。项目中存在的 Web 服务是标准的 Wcf 服务 (.svc)，将托管在 IIS 中（在默认的 VS 调试服务器中测试）将由 ASP.NET MVC3 Web 应用程序使用。

这些服务在客户端和服务端都连接到 Windsor Container。

服务端：

```
<%@ ServiceHost 
Language="C#" 
Debug="true" 
Service="FileDownloadService" 
CodeBehind="FileDownloadService.svc.cs" 
Factory="Castle.Facilities.WcfIntegration.DefaultServiceHostFactory, 
    Castle.Facilities.WcfIntegration" %> 
```

因此，Windsor WCFacility 负责 MVC3 应用程序和 WCF 服务应用程序中的所有依赖注入解析。

我担心配置的主要原因（我知道使用从教程/演练/SO 问题中获得的值）是因为我不确定 Windsor 是否 100% 在服务端选择此配置 - 意见？

我还更新了代码片段以显示当前的 impl。

```
[DataContract]
    public enum FileTypeEnum
    {
        [EnumMember]
        Generic = 1,

        [EnumMember]
        TXT = 2,

        [EnumMember]
        XLS = 3,

        [EnumMember]
        PDF = 4,

        [EnumMember]
        DOC = 5
    } 
```

* * *

包含 WCF Web 服务的 Web 服务解决方案定义了以下协定：

```
[ServiceContract]
public interface IFileDownloadService
{
    [OperationContract]
     FileDownloadReturnMessage DownloadFile(FileDownloadMessage request);
} 
```

返回类型合约是：

```
[MessageContract]
public class FileDownloadReturnMessage : IDisposable
{
    public FileDownloadReturnMessage(FileMetaData metaData, Stream stream)
    {
        FileByteStream = stream;
    }

    [MessageBodyMember(Order = 1)]
    public Stream FileByteStream;

    [MessageHeader(MustUnderstand = true)]
    public FileMetaData DownloadedFileMetadata;

    public void Dispose()
    {
        if (FileByteStream != null)
        {
            FileByteStream.Close();
            FileByteStream = null;
        }
    } 
```

请求合同是：

```
[MessageContract]
public class FileDownloadMessage
{
    [MessageHeader(MustUnderstand = true)]
    public FileMetaData FileMetaData;
} 
```

和：

```
[DataContract(Namespace = "http://schemas.acme.it/2009/04")]
public class FileMetaData
{
    public FileMetaData(string fileName, string remoteFilePath)
    {
        FileName = fileName;
        RemoteServerFilePath = remoteFilePath;
        FileType = FileTypeEnum.Generic;
    }

    public FileMetaData(string fileName, string remoteFilePath, FileTypeEnum? fileType)
    {
        FileName = fileName;
        RemoteServerFilePath = remoteFilePath;
        FileType = fileType;
    }

    [DataMember(Name = "FileType", Order = 0, IsRequired = true)]
    public FileTypeEnum? FileType;

    [DataMember(Name = "FileName", Order = 1, IsRequired = true)]
    public string FileName;

    [DataMember(Name = "RemoteFilePath", Order = 2, IsRequired = true)]
    public string RemoteServerFilePath;
} 
```

Windsor 注入服务在服务器上的配置是：

```
.Register(Component.For<IFileDownloadService>()
       .ImplementedBy<FileDownloadService>()
       .Named("FileDownloadService")
       .AsWcfService(new DefaultServiceModel()
       .AddEndpoints(WcfEndpoint
              .BoundTo(new BasicHttpBinding
                   {
                       MaxReceivedMessageSize = 2147483647,
                       MaxBufferSize = 2147483647,
                       MaxBufferPoolSize = 2147483647,
                       TransferMode = TransferMode.Streamed,
                       MessageEncoding = WSMessageEncoding.Mtom,
                       ReaderQuotas = new XmlDictionaryReaderQuotas
                            {
                              MaxDepth = 2147483647,
                              MaxArrayLength = 2147483647,
                              MaxStringContentLength = 2147483647,
                              MaxNameTableCharCount = 2147483647,
                              MaxBytesPerRead = 2147483647
                            }
                   }))
              .Hosted()
              .PublishMetadata())
      .LifeStyle.PerWcfOperation()) 
```

端点的客户端配置是：

```
_container.Register(Component.For<IFileDownloadService>()
                    .AsWcfClient(new DefaultClientModel
                        {
                            Endpoint = WcfEndpoint
                                .BoundTo(new BasicHttpBinding
                                    {
                                        MaxReceivedMessageSize = 2147483647,
                                        MaxBufferSize = 2147483647,
                                        MaxBufferPoolSize = 2147483647,
                                        TransferMode = TransferMode.Streamed,
                                        MessageEncoding = WSMessageEncoding.Mtom,
                                        ReaderQuotas = new XmlDictionaryReaderQuotas
                                            {
                                                MaxDepth = 2147483647,
                                                MaxArrayLength = 2147483647,
                                                MaxStringContentLength = 2147483647,
                                                MaxNameTableCharCount = 2147483647,
                                                MaxBytesPerRead = 2147483647
                                            }
                                    })
                                .At(ConfigurationManager.AppSettings["FileDownloadAddress"])
                            })); 
```

据我所知，这些端点配置必须匹配，它们确实如此。但由于某种原因，击中方法：

```
var commandResult = _downloadService.DownloadFile(command); 
```

导致具有以下堆栈跟踪的异常：

```
Ex Message:     The remote server returned an unexpected response: (400) Bad Request.
Source:     Castle.Facilities.WcfIntegration
Target Site:    Castle.Facilities.WcfIntegration.Proxy.WcfRemotingInterceptor+<>c__DisplayClass1 -> Void <PerformInvocation>b__0(Castle.Facilities.WcfIntegration.WcfInvocation)
Stack Trace:    at Castle.Facilities.WcfIntegration.Proxy.WcfRemotingInterceptor.<>c__DisplayClass1.<PerformInvocation>b__0(WcfInvocation wcfInvocation)
   at Castle.Facilities.WcfIntegration.Proxy.WcfRemotingInterceptor.ApplyChannelPipeline(Int32 policyIndex, WcfInvocation wcfInvocation, Action`1 action)
   at Castle.Facilities.WcfIntegration.Proxy.WcfRemotingInterceptor.<>c__DisplayClass4.<ApplyChannelPipeline>b__3()
   at Castle.Facilities.WcfIntegration.WcfInvocation.Proceed()
   at Castle.Facilities.WcfIntegration.RepairChannelPolicy.Apply(WcfInvocation wcfInvocation)
   at Castle.Facilities.WcfIntegration.Proxy.WcfRemotingInterceptor.ApplyChannelPipeline(Int32 policyIndex, WcfInvocation wcfInvocation, Action`1 action)
   at Castle.Facilities.WcfIntegration.Proxy.WcfRemotingInterceptor.PerformInvocation(IInvocation invocation, IWcfChannelHolder channelHolder, Action`1 action)
   at Castle.Facilities.WcfIntegration.Proxy.WcfRemotingInterceptor.PerformInvocation(IInvocation invocation, IWcfChannelHolder channelHolder)
   at Castle.Facilities.WcfIntegration.Async.WcfRemotingAsyncInterceptor.PerformInvocation(IInvocation invocation, IWcfChannelHolder channelHolder)
   at Castle.Facilities.WcfIntegration.Proxy.WcfRemotingInterceptor.Intercept(IInvocation invocation)
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at Castle.Proxies.IWcfChannelHolderProxy_2.FakeDownloadTest(FakeDownloadTestRequest request)
   at cpfe.DAL.Repositories.FileDownloadRepository.DownloadFile(IEnumerable`1 fileIds, TenantDTO tenant, String zipPackageName, UserDTO user) \..\..\..\FileDownloadRepository.cs:line 44 
```

有人知道为什么会这样吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:12:57.583

我认为您不能在消息正文中传输 Stream 和其他数据。您需要使用 MessageContract 在消息的标头中添加自定义数据，并在正文中添加流。

您需要使用特定的合同。您可以使用带有 messagecontract 的类来封装您当前的合同。像这样 ：

```
[ServiceContract]
public interface IFileDownloadService
{
    [OperationContract]
    StreamResponse DownloadFile(DownloadFileCommandRequest command);
}

[MessageContract]
public class StreamResponse
{
    [MessageHeader()]
    public CommandResult<FileDownloadDTO> {get; set;}

    [MessageBodyMember(Order = 1)]
    public Stream FileByteStream { get; set; }
}

[MessageContract]
public class DownloadFileCommandRequest 
{
    [MessageBodyMember(Order = 1)]
    public DownloadFileCommand FileCommand {get; set;}
} 
```

并删除 FileDownloadDTO 类中的流属性。也许如果您只删除 DataMember 属性就可以了。

```
[DataContract]
public class FileDownloadDTO : IDisposable, IDTOBase
{
   [DataMember]
   public string FileName { get; set; }

   [DataMember]
   public long Length { get; set; }

   [DataMember]
   public int Id { get; set; }
} 
```

这里是客户端配置的示例。

```
<binding name="FileHttpBinding"  closeTimeout="04:01:00"
                openTimeout="04:01:00" receiveTimeout="04:10:00" sendTimeout="04:01:00"
                allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
                transferMode="Streamed" messageEncoding="Mtom">
                <readerQuotas maxDepth="128" maxStringContentLength="2147483647" maxArrayLength="2147483647"
                        maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
                <security mode="None">
                </security>
            </binding> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T17:49:55.350

我重现了 400 错误，在对代码进行了一些更改后它就消失了：

1.  使用`TransferMode = TransferMode.StreamedResponse,`而不是`Streamed`. 我仅将其应用于客户端配置。服务器还有`Streamed`。
2.  将默认（无参数）构造函数添加到`FileDownloadReturnMessage`. 这是`MessageContract`反序列化所必需的。代码 -`public FileDownloadReturnMessage() { }`

有趣的是，现在我无法重现错误，即使使用`TransferMode.Streamed`

让我知道这是否有帮助。

如果您仍然无法解决问题，我可以发布我的代码。

有趣的是客户端中的 WCF 会生成 400 错误。如果您在 fiddler 中检查流量，服务器总是返回 200 和正确的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T10:51:42.393

请在服务端检查您的连接字符串。如果您在连接字符串中使用 Windows 身份验证，请尝试通过为您的数据库创建 sql 用户来使用 SQL 身份验证

# utf-8 - 如何从 java assets 文件夹中读取和写入 UTF-8 编码？我有代码，但它不起作用。我得到“D�nde est”/D�nde

> ID：11138467
> 
> 赞同：0
> 
> 时间：2012-06-21T12:45:02.440
> 
> 标签：utf-8, inputstream, bufferedreader, outputstream, android-assets

```
 private void CopyAssets2() {
    AssetManager assetManager = getAssets();
    String[] files = null;
    try {
        files = assetManager.list("");
    } catch (IOException e) {
        Log.e("File Error", e.getMessage());
    }
    for (String filename : files) {
        InputStream in = null;
        OutputStream out = null;
        try {
            in = assetManager.open(filename);
            out = new FileOutputStream("/sdcard/Translate/" + filename);
            copyFile2(in, out);
            in.close();
            in = null;
            out.flush();
            out.close();
            out = null;
        } catch (Exception e) {
            Log.e("Save Error", e.getMessage());
        }
    }
}

private void copyFile2(InputStream in, OutputStream out)
            throws IOException {
    char[] buffer = new char[1024];
    Reader reader = new BufferedReader( new InputStreamReader(in, "UTF-8"));

    Writer writer = new BufferedWriter(new OutputStreamWriter(out, "UTF-8"));

    int read;
    while ((read = reader.read(buffer)) != -1) {
        writer.write(buffer, 0, read);
    }
    reader.close();
    writer.flush();
    writer.close();
} 
```

我使用assetManager 获取输入流，并将其作为指定UTF-8 编码的阅读器参数传递。我也在用 UTF-8 的 writer 写入输出流文件路径

文件被读写，但编码仍然错误。我得到这样的角色：在哪里...... =“D�nde est”/D�nde

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:29:37.827

您确定输入文件是用 UTF-8 编码的吗？您在输出中看到的 � 是一个字符，用于替换读取时无法转换为字符的字节序列。

您可以制作二进制副本而不是解码和编码文本：

```
byte[] buffer = new byte[1024];

InputStream reader = new BufferedInputStream(in);

OutputStream writer = new BufferedOutputStream(out);

int read;
while ((read = reader.read(buffer)) != -1) {
    writer.write(buffer, 0, read);
} 
```

# php - 在 Image onclick 事件中提交表单并在 PHP 中处理提交

> ID：11138468
> 
> 赞同：0
> 
> 时间：2012-06-21T12:45:12.523
> 
> 标签：php, javascript, forms

我在图像的 onclick 事件中用 JavaScript 提交表单，问题是如何在 PHP 中知道我来自图像提交？

```
if(isset(??))
{
  //submission code
} 
```

注意：表单动作是`$PHP_MYSELF`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:47:14.130

您也许可以在表单中放置一个隐藏字段并对其进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:47:47.873

既然您要提交表单，为什么不使用以下方法检查 PHP 中的表单提交：

```
if(isset($_POST))
{
    //do code
} 
```

# excel - VBA如何在另一个工作簿上运行代码

> ID：11138475
> 
> 赞同：1
> 
> 时间：2012-06-21T12:45:40.293
> 
> 标签：excel, vba

我不知道如何从另一个工作簿中的一个工作簿运行代码。

代码示例：

```
Set dlsheet = appexcel.Workbooks.Open(strPath & "dlsheet.csv")

With dlsheet.Sheets("data")

    numofrows = Sheet1.Range("A1").Offset(Sheet1.Rows.Count - 1, 0).End(xlUp).Row

    Columns("I:I").Select

    Selection.Insert Shift:=xlToRight, CopyOrigin:=xlFormatFromLeftOrAbove

end with 
```

我知道这不是我想要运行的代码的完整摘录，但是我如何制作它以便它不计算我正在运行代码的工作簿中的行数，而不是那个 dlsheet。

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:49:05.203

由于您已经在使用`with`，您可以使用 a`.`来引用参考表：

```
Set dlsheet = appexcel.Workbooks.Open(strPath & "dlsheet.csv")

With dlsheet.Sheets("data")

    numofrows = .Range("A1").Offset(.Rows.Count - 1, 0).End(xlUp).Row

    .Columns("I:I").Insert Shift:=xlToRight, CopyOrigin:=xlFormatFromLeftOrAbove

end with 
```

# c# - 带有部分视图的 ASP.NET MVC3 JQuery 对话框

> ID：11138478
> 
> 赞同：2
> 
> 时间：2012-06-21T12:45:45.240
> 
> 标签：c#, asp.net, asp.net-mvc-3

我不知道如何正确地做到这一点：

我正在开发一个简单的用户成员资格应用程序，用于将应用程序角色分配给用户。我要做的只是弹出一个 JQueryUI 对话框，其中包含一个包含所有可用应用程序的 DropdownBox 和一个动态复选框列表，该列表将列出所选应用程序的可用角色。

它需要看起来像这样（简单！）：

![在此处输入图像描述](../Images/5130294effa79e72013cbc94cc51c389.png)

[感谢 Richard Covo 的教程，](http://ricardocovo.com/2012/04/06/asp-mvc3-editing-records-with-jqueryui-dialogs-and-ajaxforms-razor-version/)我已经成功地让对话框正确显示。

下拉列表的代码如下所示：

```
<label for='ApplicationsDropdownList'>Application:</label>

 @Html.DropDownListFor(
        x => x.SelectedApplicationId,
        new SelectList(Model.Applications, "Value", "Text"),
        "-- Select Application --",
             new
             {
                 id = "ApplicationsDropdownList",
                 data_url = Url.Action("ViewUserRolesForApplication", "UserRole")
             }
    ) 

</div>
<br />   <div id="RolesForApplication"></div> 
```

这就是我如何动态加载可用于所选应用程序的角色复选框列表：

```
$('#ApplicationsDropdownList').change(function () {
            var url = $(this).data('url');
            var applicationId = $(this).val();
            $('#RolesForApplication').load(url, { applicationId: applicationId, selectedUserId: SelectedUserId })
        });
    }); 
```

复选框列表是使用 MVC 复选框列表扩展生成的：

```
@using (Html.BeginForm("SaveUsersRoles", "Index", FormMethod.Post))
{    

    @Html.CheckBoxList("Roles",                         // NAME of checkbox list (html 'name' property of each       
                   x => x.Roles,                        // data source (list of 'Cities' in our case)
                   x => x.RoleId,                       // field from data source to be used for checkbox VALUE
                   x => x.Code + " " + x.Description,   // field from data source to be used for checkbox TEXT
                   x => x.RolesForUser,
                   new HtmlListInfo(HtmlTag.table, 1))   
} 
```

弹出窗口显示正确，角色填充正确，但保存时出现了我的困惑。我假设这种情况应该只有一个视图模型（我目前有 2 个），如下所示：

```
public class ApplicationsForUserViewModel
{
    public Guid SelectedUserId  {get;set;}
    public int SelectedApplicationId { get; set; }
    public IEnumerable<SelectListItem> Applications { get; set; }

    public Application Application { get; set; }
    public IList<Role> Roles { get; set; } //all available roles
    public IList<Role> RolesForUser { get; set; } //roles that the user has selected

} 
```

当按下对话框上的保存按钮时，我在 Index 控制器上输入了 Edit 方法，但复选框列表是在来自不同控制器的不同表单上生成的，那么我怎样才能成功地模型绑定？是否有捷径可寻？

如果您想查看更多代码，请告诉我，以便您可以进一步指出我哪里出错了！

**编辑：**保存按钮当前连接到索引控制器上的编辑操作。

编辑视图：

```
@using (Ajax.BeginForm("Edit", "Index", new AjaxOptions
        {
            InsertionMode = InsertionMode.Replace, 
            HttpMethod = "POST",
            OnSuccess = "updateSuccess"
        }, new { @id = "EditUserRolesForm" })) 
```

和 jQuery UI 对话框：

```
 $('#AddRolesDialog').dialog({                     
                buttons: {
                    "Save": function () {                      
                      $("#update-message").html('');
                      $("#EditUserRolesForm").submit();
                    }
                }
            }); 
```

因此，下拉列表当前位于 EditUserRoles 表单上，而复选框列表位于单独的表单上 - 这是正确的方法吗？我是否应该提交复选框列表表单？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:04:45.203

您的 POST 控制器操作可以直接获取所选角色 ID 的列表：

```
[HttpPost]
public ActionResult SaveUsersRoles(int[] roles)
{
    // the roles parameter will contain the list of ids of roles 
    // that were selected in the check boxes so that you could take 
    // the respective actions here
    ...
} 
```

现在我想您可能还需要用户 ID。所以定义一个视图模型：

```
public class SaveUsersRolesViewModel
{
    public Guid SelectedUserId { get; set; }
    public int[] Roles { get; set; }
} 
```

然后让您的控制器操作采用此视图模型：

```
[HttpPost]
public ActionResult SaveUsersRoles(SaveUsersRolesViewModel model)
{
    ...
} 
```

当然不要忘记在表单中包含用户 ID：

```
@using (Html.BeginForm("SaveUsersRoles", "Index", FormMethod.Post))
{    
    @Html.HiddenFor(x => x.SelectedUserId)
    @Html.CheckBoxList(
        "Roles",
        x => x.Roles,
        x => x.RoleId,
        x => x.Code + " " + x.Description,
        x => x.RolesForUser,                       
        new HtmlListInfo(HtmlTag.table, 1)
    )
} 
```

# django - Django admin - 允许用户访问特定对象/字段？

> ID：11138479
> 
> 赞同：5
> 
> 时间：2012-06-21T12:45:59.683
> 
> 标签：django, django-admin, django-permissions

我需要为管理员创建一个“所有者”登录。假设我们有这个模型结构：

```
class Product(models.Model):
    owner = models.ManyToManyField(User)
    name = models.CharField(max_length=255)
    description = models.CharField(max_length=255)
    photos = models.ManyToManyField(Photo, through='ProductPhoto')

class Photo(models.Model):
    order = models.IntegerField()
    image = models.ImageField(upload_to='photos')
    alt = models.CharField(max_length=255)

class ProductPhoto(models.Model):
    photo = models.ForeignKey(Photo)
    product = models.ForeignKey(Product) 
```

我们有一个名为的组`Owners`，其中一些用户是其中的一部分。这`ProductPhoto`是管理页面`TabularInline`上的一个。`Product`

现在，所有者需要获得编辑权限

1.  **（主要目标）** *只有*产品`product__in=user.products`（所以基本上，只有他们拥有的产品）。

2.  **（次要目标）** *只有*产品的**描述**和**照片**

我将如何使用 Django 的管理/权限系统来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:07:23.357

这是行（或对象）级别的权限。[Django 为对象权限](https://docs.djangoproject.com/en/dev/topics/auth/#handling-object-permissions)提供了基本支持，但代码的实现取决于您。

幸运的是，有一些应用程序提供了嵌入式对象级权限框架。[`django-guardian`](https://github.com/lukaszb/django-guardian)是我以前用过的一种。[djangopackages.com 上的这个页面](http://www.djangopackages.com/grids/g/perms/)提供了更多可以尝试的内容。

# c# - 更改服务器端asp.net上的html代码

> ID：11138481
> 
> 赞同：-1
> 
> 时间：2012-06-21T12:46:11.503
> 
> 标签：c#, asp.net, html, string

我想在加载时更改 html 文件中的一些字符串。例如，我有一个 html 文件：

```
<html>
<head>
<title>MyTitle</title></head>
<body>
Some Text
<script type='text/javascript'>
/*some script*/
var myString = "TargerInfo";
/*some script*/
</script>
</body>
</html> 
```

我`Page_Load`在代码隐藏文件中使用方法：

```
protected void Page_Load(object sender, EventArgs e)
{
/*Insert necessary snippet of code*/
} 
```

我应该使用什么代码将字符串“TargerInfo”更改为“OtherString”？

**[编辑]** 对不起，我忘了提到我只能在代码隐藏类中向 html 页面添加任何信息，因为这个页面不是由我生成的。我想我应该使用这样的东西：

1）加载html文件

2）找到我的字符串

3）更换它

4）发送html文件

有一个aspx页面，但我只添加了部分代码，其他代码由VS添加

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:51:24.470

除非我遗漏了一些东西（因为这看起来有点像 ASP.NET 101），否则你有几个选择......

在代码隐藏中创建一个变量，然后使用它...

```
protected string _newText = "";
protected void Page_Load(object sender, EventArgs e)
{
   _newText = "OtherString";
} 
```

然后在 ASPX...

```
var myString = "<%=_newText%>"; 
```

否则你可以使用`<asp:Literal>`控件

**更新**

在与@andDaviD 进行了广泛的[交谈](https://chat.stackoverflow.com/rooms/12860/discussion-between-freefaller-and-anddavid)后，事实证明 javascript 位于 SharePoint Foundation 中的母版页中。

`DynamicMasterPageFile`母版页通过指令中的属性在他的内容页面中被引用`<%@ Page`，这就是为什么他说他能够更新代码的某些部分，但不能更新其他部分。

我仍然不确定是否可以修改母版页（由他自己或管理员），这是他需要从他公司的负责人那里找到的东西。但我相信向母版页添加属性或方法以提供他需要的内容是唯一明智的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:52:05.403

您可以使用内联 aspx 代码标签：

```
<script type='text/javascript'>
/*some script*/
var myString = "<%= getTargetInfo() %>";
/*some script*/
</script> 
```

在代码隐藏中：

```
protected String getTargetInfo()
{
    return "OtherString";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T12:50:46.980

您可以使用文字：

```
protected void Page_Load(object sender, EventArgs e)
{
     literal.Text = string.Format("var myString = \"{0}\"", targetInfoValue);
} 
```

标记：

```
<html>
<head>
<title>MyTitle</title></head>
<body>
Some Text
<script type='text/javascript'>
/*some script*/
<asp:Literal id="literal" runat="server" />
/*some script*/
</script>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T12:51:36.637

您可以将它放在 asp.net 中的隐藏字段中，并在后面的代码中更改隐藏字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T12:55:30.690

在你后面的代码中：

```
public string otherString;

otherString = "some text"  //update the string with the value oyu want. 
```

在 aspx 页面中，将此行放在您想看到 otherString 的任何地方。

```
<%=otherString%> 
```

# ruby-on-rails - 如何检索 json 对象的特定值？

> ID：11138485
> 
> 赞同：0
> 
> 时间：2012-06-21T12:46:18.867
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个包含 json 格式的信息（新闻提要）的对象，如下所示：

```
def index
@news_feed = FeedDetail.find(:all)
@to_return = "<h3>The RSS Feed</h3>"
@news_feed.items.each_with_index do |item, i|
    to_return += "#{i+1}.#{item.title}<br/>"
    end

    render :text => @to_return
 end 
```

我只想显示该 json 数组中的特定值，例如标题描述等。当我直接渲染 @news_feed 对象时，它会给出这个

```
[{
    "feed_detail":{
        "author":null,
        "category":[],
        "comments":null,
        "converter":null,
        "description":"SUNY Levin Institute, Empire State Development Facilitate Collaboration to Drive Economic Opportunities Across New York State",
        "do_validate":false,
        "enclosure":null,
        "guid":null,
        "link":"http://www.suny.edu/sunynews/News.cfm?filname=2012-06-20-LevinConferenceRelease.htm",
        "parent":null,
        "pubDate":"2012-06-20T23:53:00+05:30",
        "source":null,
        "title":"SUNY Levin Institute, Empire State Development Facilitate Collaboration to Drive Economic Opportunities Across New York State"
    }
}] 
```

当迭代 json 对象时，它会给出 - 未定义的方法项。我想要的只是从该数组中获取特定的值。我也使用了 JSON.parse() 方法，但它说不能将数组转换为字符串。

我该怎么做，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:29:37.060

您需要先解析json：

```
@news_feed = JSON.parse(FeedDetail.find(:all)) 
```

然后你可以像数组和哈希一样访问它：

```
@news_feed.each_with_index do |item, i|
  to_return += "#{i+1} #{item["feed_detail"]["title"]}<br/>"
end 
```

在 ruby​​ 中，您可以使用与javascript`[]`不同的方式访问子元素。`.`您的示例 json 没有名为 items 的元素，因此我删除了该部分。 `each_with_index`将每条记录放入`item`变量中，然后您必须`"feed_detail"`在获取详细信息之前引用键。

# sql-server-2008 - 如何计算查询执行或存储过程的 CPU 时间？

> ID：11138486
> 
> 赞同：1
> 
> 时间：2012-06-21T12:46:23.047
> 
> 标签：sql-server-2008, sql-server-2008-r2

我正在研究 SQL SERVER 2008 R2 性能调整部分，但我是新手。

如何计算：

*   CPU使用时间
*   逻辑读取
*   写

等由查询或存储过程进行。

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T00:31:34.107

`SET STATISTICS IO`并且`SET STATISTICS TIME`有两个设置可以帮助您衡量存储过程查询的执行情况。

`SET STATISTICS IO`显示查询生成的磁盘活动量的统计信息。`SET STATISTICS TIME`显示解析、编译和执行查询中的每个语句所需的时间。

```
USE <Your Database>;
GO       
SET STATISTICS IO ON;
SET STATISTICS TIME ON;
GO
SELECT * 
FROM YourTable
WHERE KeyValue > 1200
GO
SET STATISTICS IO OFF;
SET STATISTICS TIME OFF;
GO 
```

**可能的结果**

```
Table 'YourTable'. Scan count 1, logical reads 5, physical 
reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, 
lob read-ahead reads 0.

SQL Server parse and compile time: 
   CPU time = 0 ms, elapsed time = 1 ms.
SQL Server parse and compile time: 
   CPU time = 0 ms, elapsed time = 1 ms.

(269 row(s) affected)

SQL Server Execution Times:
   CPU time = 0 ms,  elapsed time = 2 ms.
SQL Server parse and compile time: 
   CPU time = 0 ms, elapsed time = 1 ms. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:58:57.650

获取 SQL Sentry [Plan Explorer](http://www.sqlsentry.com/plan-explorer/sql-server-query-view.asp)（它是免费的），输入您的 EXEC 调用或查询，并生成一个实际的执行计划。您将获得各种有趣的指标，包括 CPU 和 I/O。除了比您在 Management Studio 中获得的更有用的计划之外。

（免责声明：我为 SQL Sentry 工作。）

# iphone - 更改整个应用程序背景

> ID：11138489
> 
> 赞同：0
> 
> 时间：2012-06-21T12:46:28.390
> 
> 标签：iphone, ipad

我在**applicationDidFinishLaunching**中拍摄了一个图像视图，如下所示。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
 {
      self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
      UIImageView* imageBg = [[UIImageView alloc]initWithFrame:CGRectMake(0, 20, 320, 460)];
      imageBg.image = [UIImage imageNamed:@"AppBG.png"];
       [self.window addSubview:imageBg];
       [self.window sendSubviewToBack:imageBg]; 
 } 
```

现在在**rootViewController**我有一个按钮

我的需要是**按下****RootViewController**中的按钮时，我想将图像从 AppBG.png 更改为 AppBG1.png

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:53:31.390

```
//add a tag to your imageview
imageBg.tag = 1001;

//fetch the imageview from window like this
UIImageView *imgView = [self.window viewWithTag:1001];

//use this imageView to replace existing image like this
imageView.image = [UIImage imageNamed:@"newimg.png"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:53:07.357

简单的！只需`imageBg`在 AppDelegate 中创建一个本地属性和实例。不要忘记合成你的属性。在 RootViewController 类中，将此代码放在一个`IBAction`连接到的按钮中`UIButton`：

```
- (IBAction)buttonWasPressed {
AppDelegate *delegate = [[AppDelegate alloc] init];
delegate.imageBg.image = [UIImage imageNamed: @"AppBG1.png"];
// Don't forget memory management!
[delegate release];
} 
```

您可以执行此操作的另一种方法是在应用程序委托中添加一个方法：

```
- (void)changeImage {

 self.imageBg.image = [UIImage imageNamed: @"AppBG1.png"];
} 
```

并在 RootViewController 中调用此方法：

```
- (IBAction)buttonWasPressed {
AppDelegate *delegate = [[AppDelegate alloc] init];
[delegate changeImage];
// Don't forget memory management!
[delegate release];
} 
```

只是简单的Objective-C！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T12:53:30.413

使你的`UIImageView`,`imageBg`一个属性，合成它。

然后在按钮单击上使用以下代码：

```
MyAppdelegate *appdelegate = (MyAppdelegate *)[[UIApplication sharedApplication] delegate];
appdelegate.imageBg.image = [UIImage imageNamed:@"AppBG1.png"]; 
```

# cordova - Android 设备的 PhoneGap 无法正常工作

> ID：11138501
> 
> 赞同：0
> 
> 时间：2012-06-21T12:46:54.583
> 
> 标签：cordova

问题是“设备就绪”事件未触发。科尔多瓦附带的示例应用程序可以工作，我可以从那里复制和创建。但我需要知道出了什么问题。我已经尝试了一切（你可以看到注释代码）。一些重要的事情。

1.  我从这里[http://docs.phonegap.com/en/1.8.1/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/1.8.1/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)创建了项目。
2.  我正在使用 Jquery mobile，它工作正常。
3.  整个项目在这里[http://www.filefactory.com/file/1pseohvngmuz/n/HelloCordova_zip](http://www.filefactory.com/file/1pseohvngmuz/n/HelloCordova_zip)

    ```
    /*************************************************************
    function init() {
        alert('init');
    }

    $(function() {
        alert('load');
    document.addEventListener("deviceready", function(){
          alert("123");
     },false);
    });

    $(document).ready(function(e) {
    });

     document.addEventListener("deviceready", onDeviceReady, true);
    function onDeviceReady()
    {
        alert('Phonegap ready');
    }
    ********************************************/
    function init() {

        document.addEventListener("deviceready", deviceInfo, false);
    }
    var deviceInfo = function() {
        alert('PhoneGap ready');
    };
    </script> 
    ```

非常感谢你..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T07:03:27.320

自己发现了这个错误。科尔多瓦脚本文件名为“cordova-1.8.1.js”。当我包含“cordova-1.8.0.js”时，我花了两天时间才找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:57:17.190

尝试此代码以使用 jQM 准备好设备

```
window.addEventListener('load', function () {
    document.addEventListener('deviceready', function () {
        alert("PhoneGap is now loaded!");
    }, false);
}, false); 
```

# asp.net - 当我未指定控制器时，我的路线包括图像文件请求

> ID：11138504
> 
> 赞同：1
> 
> 时间：2012-06-21T12:47:01.953
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我正在构建一个站点，我只想拥有一个控制器，并且 url 看起来像：

```
\main-page\sub-page 
```

`main-page`不是控制器，*也不*`sub-page`是动作，它们只是数据库中页面的名称，我想即时渲染*。*换句话说，有很多页面，我不想为每个页面制作一个控制器。事实上，我只想要一个`Home`控制器，其中一个`Index`动作如下所示：

```
Function Index(ByVal Page As String, ByVal SubPage As String) As ActionResult 
```

并且只有一个视图，它使用参数来动态加载页面内容。

以下路线*几乎*可行：

```
 routes.MapRoute(
        "Default", _
        "{page}/{subpage}", _
        New With {.controller = "Home", .action = "Index", .page = "Landing", .subpage = "Index"}
    ) 
```

但问题是它也会接收对文件的请求，例如`/images/somefile.jpg`，因为这与路由匹配。

所以问题是：我怎样才能做到这一点而不会错误地获取图像请求，或者是否有完全不同的方式来支持我正在尝试做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:18:43.260

你能不能试着忽略这条路线，即

```
routes.IgnoreRoute("{*alljpg}", new {alljpg=@".*\.jpg(/.*)?"}); 
```

这是基于这篇[文章](http://haacked.com/archive/2008/07/14/make-routing-ignore-requests-for-a-file-extension.aspx)，可能比这篇简短的文章更有帮助。

好吧，说实话，这不是一个完整的猜测。我有一个与 favicon 相关的问题，导致额外的请求。下面的代码解决了它，所以主体是合理的

```
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
    routes.IgnoreRoute("{*favicon}", new { favicon = @"(.*/)?favicon.ico(/.*)?" }); 
```

# c# - 此特定场景中的最佳缓存策略

> ID：11138509
> 
> 赞同：3
> 
> 时间：2012-06-21T12:47:12.777
> 
> 标签：c#, asp.net, caching, query-string

我正在检索一大堆新闻项目。

出于明显的原因，我想利用此列表的缓存（运行查询超过必要不会这样做）。

我将此列表绑定到我已扩展以启用分页的转发器（在页面之间轻弹会导致页面加载，因此会再次检索列表）。

复杂之处在于，这些新闻项目也可以从查询字符串“年”中按日期查询，该查询字符串仅在按日期查询新闻项目时才出现。

下面是我到目前为止所拥有的伪代码（在此处粘贴真实代码将花费太多时间来修剪所有只会增加混乱的位）：

```
if(complete news items list are not cached OR querystring["year"] != null)
{
   Int year = queryString["year"] (could be null)
   Cache.Add(GetNewsItems(year));
}
else
{
   return cached newsItems;
} 
```

问题是当新闻项目页面加载时（由于分页控件的回发），查询字符串的 [year] 参数仍将被填充，因此将重新执行 GetNewsItems。此外 - 即使主页 URL（即没有查询字符串）被导航到 - 实际上仍然有新闻项目的缓存版本，因此它不会费心尝试检索它们 - 但它们可能在特定年份存在因此与“所有年份”的搜索无关。

我是否添加一个新的缓存条目来标记最近完成的搜索？我必须在这里做哪些考虑来缓存超时？如果需要（最好不要），我可以添加一个新的查询字符串 - 这会解决问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:22:17.567

您能否在第一个查询中获得完整的列表，并将其缓存（假设它不是太大）？然后对于任何后续查询，从缓存中获取数据并查询它以过滤出您想要的年份。

也许您可以将数据以以下形式存储在缓存中

```
IDictionary<int, IEnumerable<NewsItem>> 
```

（假设一年有多个 NewsItem）其中键是年份，因此您只需检索单个字典值对即可获取一年的数据。

或者按年份缓存数据，就像您在示例中所做的那样，并实现一种机制以从缓存中获取每年的数据（如果存在）。获取所有数据时，您可以从数据存储中获取所有数据并将其单独缓存，或者实施某种机制来确定缓存中缺少哪些年份并获取这些数据。就个人而言，我认为我会缓存所有数据并从缓存中过滤数据，以免过多的缓存数据堵塞内存。

从缓存中获取有用的 TryGetValue 模式类似于：

```
private bool TryGetValue<U>(string key, out U value)
    {
        object cachedValue = HttpContext.Current.Cache.Get(key);
        if (cachedValue == null)
        {
            value = default(U);
            return false;
        }
        else
        {
            try
            {
                value = (U)cachedValue;
                return true;
            }
            catch
            {
                value = default(U);
                return false;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:55:50.840

不确定这是否对您的情况有帮助，但您可以将转发器添加到用户控件，并为其启用 OutputCache，以通过 POST/GET 参数无效：

```
<%@ OutputCache Duration="100" VaryByParam="year" %> 
```

# java - Andengine：区分 OnAreaTouched 和 OnSceneTouched

> ID：11138511
> 
> 赞同：6
> 
> 时间：2012-06-21T12:47:28.273
> 
> 标签：java, android, andengine, game-engine

### 嗨，大家好，

在我用 AndEngine 开发的游戏中，有很多精灵在跑来跑去。现在每个精灵都有一个**`TouchArea`**注册到场景中，因为当它被触摸时我会显示一些关于精灵的信息。场景本身有一个**`OnSceneTouchListener`**我用来移动相机和缩放的。

我的问题是，每次用户移动相机（通过触摸显示屏某处并移动手指）时**`OnAreaTouched()`**，任何精灵的方法，即意外在手指下方，都会在移动完成时被调用（手指被抬起） . 我已经将触发事件限制为`event.getAction()==UP`（在它被称为 touchAreas 的真正混乱之前），但这还不够。如果用户正在缩放或移动相机，则不应激活精灵 touchAreas。

有什么方法可以区分`OnAreaTouched`-event 和`OnSceneTouched`-event 吗？首先调用哪个，我可以压制另一个吗？

### 这是我的`OnSceneTouched()`方法（简化）：

```
public boolean onSceneTouchEvent(Scene scene, final TouchEvent event) {
    boolean isZooming = event.getMotionEvent().getPointerCount() >= 2;
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        // REMEMBER FIRST TOUCHPOINT, TO KNOW IN WHICH DIRECTION TO MOVE
        this.touchPoint = new Point(event.getMotionEvent().getX(), event.getMotionEvent().getY());  
    } else if (event.getAction() == MotionEvent.ACTION_MOVE) {
        if (isZooming) {
            // DO SOME ZOOM STUFF
        } else {
            // DO SOME MOVEMENT STUFF
        }
        return true;
    } 
```

好的，实际上这不是很有趣 - 但正如你所看到 `true`的，我总是返回信号表示触摸事件已被处理。仍然`OnAreaTouched()`被调用

### 这是一个典型`OnAreaTouched()`的精灵方法：

```
public boolean onAreaTouched(final TouchEvent touchEvent, float touchAreaLocalX, float touchAreaLocalY) {
    if (touchEvent.getAction() == TouchEvent.ACTION_UP) {
          // DISPLAY INFORMATION ABOUT THE SPRITE
          return true;
    }
    return false;
} 
```

你看，它并没有什么特别之处。所以我希望有人可以在这里帮助我找到一个解决方案，如何在应该使用`OnAreaTouch`-event 时抑制 -event 。`OnSceneTouch`也许我能以某种方式捕捉`event.getAction()==UP`到`OnSceneTouched()`-Method??

我希望我能很好地解释这个问题，让你理解（对不起，这对我来说并不容易：）。非常感谢您的帮助，感谢您的宝贵时间！

问候
克里斯托夫

### 编辑：

在尝试了 MahdeTo 以某种方式标记事件的建议后，我发现了以下内容：

*   `TouchEvent`触发方法的`OnSceneTouchEvent()`与触发`OnAreaTouched()`方法的不同。
*   `OnAreaTouched()` 20 毫秒后被调用`OnSceneTouchEvent()`
*   `OnAreaTouched()`当用户将手指放在显示器上时，事件调用实际上开始（然后他移动它并`OnSceneTouchEvent()`多次调用），然后当他抬起手指时，第一个事件停止并得到处理。（我通过测量时间来试一试）

所以我想出了一个解决方案来测量一个触摸事件持续了多长时间。如果事件超过 200 毫秒，我猜用户不想简单地*单击*，而是移动或缩放（因为这些操作通常需要更长的时间）。因此，现在该`OnAreaTouched()`方法仅在有人真正想要*单击*而不是意外滑过该区域时才被调用。

**但这**仍然不是一个好的解决方案，如果有人知道更多关于控制此类事件的信息，我将不胜感激。

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:01:46.843

我最近使用触摸控件编写了一个相当复杂的应用程序 - 按下屏幕上的按钮、捏缩放、用两根手指旋转和移动对象等等。我最终做的是迭代地改进应用程序并添加规则来控制如何响应不同的触摸事件组合。每当出现问题时，我都会记录 TouchEvents 的序列并添加规则，以便处理行为不端的操作。

您还可以创建阻止`onAreaTouched`执行的布尔开关，只需添加一个条件，例如，如果您想触摸一个对象，检查`doNotTouchObject`是真还是假。

我发现另一件有用的东西是触摸模式切换器。我写了几个方法来完全改变用户触摸屏幕时的行为。我相信您可以在旅途中切换它们，因此您应该可以`scene.setOnAreaTouchListener(touchListener)`在触摸屏幕时拨打电话。

由于取消/注册触摸区域的速度非常快，因此可以在执行某些操作时简单地取消注册某些触摸区域。操作完成后，重新注册它们。

我使用了以上所有方法的组合，效果很好，但保持代码干净是必不可少的，否则调试或实现新功能将是一件痛苦的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T07:14:43.410

1.  也许你可以使用 TouchDetector。使用 clickDetector 代替处理 TouchUp 事件，则精灵只处理检测到的点击事件；也将滚动检测器用于场景滚动；

2.  启用 SceneTouchListenerBinding 和 TouchAreaBinding 还将帮助您绕过所有意外的进行中事件。

# delphi - Delphi 2007 错误“无法将 unit.pas 重命名为 __history\unit...”的解决方法

> ID：11138513
> 
> 赞同：2
> 
> 时间：2012-06-21T12:47:40.480
> 
> 标签：delphi, delphi-2007

在 Delphi 2007 IDE 中，我希望有一个配置选项可以打开以关闭 __HISTORY 文件夹的生成。

我收到了这个异常，它阻止了我在 IDE 中保存文件的能力：

```
 Unable to rename '..\myunit.pas' to '..\__history\myunit.pas.~1~'. 
```

MadExcept 告诉我这发生在 coreide100.bpl::

```
20a21bab +057 coreide100.bpl EditorForm     4256   +3 TryRename
20a21e0d +255 coreide100.bpl EditorForm     4297  +38 WriteEditorStream
20a52f46 +082 coreide100.bpl EditorBuffer   2633   +5 TEditBuffer.SaveFile
20a52c6d +005 coreide100.bpl EditorBuffer   2587   +1 TEditBuffer.Save
2097d128 +038 coreide100.bpl SourceModule    625   +2 TSourceModule.SaveFile
20a5ea9c +348 coreide100.bpl DocModul       1361  +61 TDocModule.Save
2097e1cf +117 coreide100.bpl SourceModule    970  +17 TSourceModule.Save
209b8792 +016 coreide100.bpl EditorControl  7485   +2 TEditEventHandler.EditSaveFile
209b4d91 +015 coreide100.bpl EditorControl  5672   +1 TCustomEditControl.SaveFile 
```

我似乎记得注册表中有一些内容可以更改以解决此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:00:45.950

关闭 IDE。从 sysinternals 下载 Process Explorer 按 Ctrl+F 并搜索被锁定的文件名。找到后，关闭该文件的句柄

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:50:43.427

您可以在工具\选项\编辑器选项，“创建备份文件”中将其关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T17:24:41.930

备份文件*很好*，因此您可能确实想花一些时间来找出无法保存它们的原因。有一些行为不端的应用程序会在更改的文件中四处游荡——基本上是在您尝试完成工作时锁定它们。突然想到：病毒扫描程序（考虑关闭对源文件夹的扫描）和 Copernic Desktop（*很棒的*本地搜索应用程序，但 @$#*! 在我编辑源文件和备份文件时会锁定它们，并且是唯一的“修复”是关闭搜索应用程序，保存文件，然后重新加载应用程序）。我不知道 Windows 自己的文件索引器（就像我说的那样，Copernic 的表现要好得多），但如果您正在运行索引器服务，请尝试将其关闭。

# sql-server - 事务内的 T-SQL EXEC 命令

> ID：11138519
> 
> 赞同：6
> 
> 时间：2012-06-21T12:48:02.443
> 
> 标签：sql-server, tsql, transactions

我需要使用通用`EXEC`命令从另一个执行存储过程。我需要确定，所有的 sql 语句都将在事务中。

```
BEGIN TRANSACTION
BEGIN TRY   

    SET @Esercizio = (SELECT ESERCIZIO_OBIETTIVI_CONSUNTIVARE from TB_SCHEDE WHERE MATRICOLA = @iMATRICOLA and COD_VALUTAZIONE = @iCOD_VALUTAZIONE)
    SET @TipoProcesso = (SELECT ISNULL(TipoProcesso, 'middle') from TB_SCHEDE WHERE MATRICOLA = @iMATRICOLA and COD_VALUTAZIONE = @iCOD_VALUTAZIONE)

    DELETE FROM TB_SCHEDE WHERE MATRICOLA = @iMATRICOLA and COD_VALUTAZIONE = @iCOD_VALUTAZIONE
    DELETE FROM TB_SCHEDE_AUTOVAL WHERE MATRICOLA = @iMATRICOLA and COD_VALUTAZIONE = @iCOD_VALUTAZIONE
    DELETE FROM TB_OBIETTIVI WHERE MATRICOLA = @iMATRICOLA and ESERCIZIO =  @Esercizio
    DELETE FROM TB_OBIETTIVI_AUTOVAL WHERE MATRICOLA = @iMATRICOLA and ESERCIZIO =  @Esercizio

    EXEC AnotherStore @iCOD_VALUTAZIONE, @iMATRICOLA, @TipoProcesso
    COMMIT TRANSACTION

END TRY
BEGIN CATCH
    ROLLBACK TRANSACTION
END CATCH 
```

如果`AnotherStore`过程抛出异常，数据库引擎是否确保从调用者存储过程回滚？

希望清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:53:58.410

有关事务存在时执行处理的示例，请参阅[异常处理和嵌套事务：](http://rusanu.com/2009/06/11/exception-handling-and-nested-transactions/)

```
create procedure [usp_my_procedure_name]
as
begin
    set nocount on;
    declare @trancount int;
    set @trancount = @@trancount;
    begin try
        if @trancount = 0
            begin transaction
        else
            save transaction usp_my_procedure_name;

        -- Do the actual work here

lbexit:
        if @trancount = 0   
            commit;
    end try
    begin catch
        declare @error int, @message varchar(4000), @xstate int;
        select @error = ERROR_NUMBER(), @message = ERROR_MESSAGE(), @xstate = XACT_STATE();
        if @xstate = -1
            rollback;
        if @xstate = 1 and @trancount = 0
            rollback
        if @xstate = 1 and @trancount > 0
            rollback transaction usp_my_procedure_name;

        raiserror ('usp_my_procedure_name: %d: %s', 16, 1, @error, @message) ;
    end catch   
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:37:06.680

简单的答案是肯定的，它会回滚调用者存储过程的更改，但是如果您在另一个存储过程中有事务，请仔细考虑，如果是这种情况，则可能会出现与您预期不同的情况。A`ROLLBACK`将影响所有事务，尽管这可能是您想要的。您可以`@@TRANCOUNT`在您的捕获中使用并确定是否要回滚整个事物以及[保存点。](http://msdn.microsoft.com/en-us/library/ms378414%28v=sql.90%29.aspx)

您在and or之间*对数据库*所做的一切都是事务的一部分，如果任何行出错，控制将被路由到事务将回滚的块。 *诸如表变量之类的东西会超出这个范围并且不会被回滚*。正如@David Brabant 所说，应该在街区内。 `BEGIN TRANSACTION``COMMIT``ROLLBACK``CATCH`*`BEGIN TRANSACTION``BEGIN TRY`*

# parsing - 在 Haskell 中解析变量类型的元素

> ID：11138521
> 
> 赞同：4
> 
> 时间：2012-06-21T12:48:12.363
> 
> 标签：parsing, haskell, types

我终于设法安装了我的 Haskell 程序，所以最后，如果我写

```
 let foo = bar :: A 
```

然后我得到一种行为，如果我写

```
 let foo = bar :: B 
```

然后我得到其他想要的行为。

现在我希望我的程序能够在运行时解析这个参数，但我真的不知道如何继续。有什么建议吗？

* * *

**编辑：**我想解析某种（文本）配置文件，我可以自由地为其制定规范/格式。
一个可能的玩具示例是根据配置文件中提供的进一步上下文将整数读取为 Int 或 Double ，类似于配置文件中的以下内容

```
barType: Int
barValue: 2 
```

给我 bar = 2 :: Int，并且

```
barType: Double
barValue: 2 
```

给我 bar = 2 :: 双倍。在这种情况下，我应该能够接受任何具有 Num 实例的类型。
就我而言，我有一个带有一些方法的类型类，我想用该类型类的实例解析任何东西；根据确切的类型，这些方法可以做一些显着不同的事情。我不知道如何为此编写一个 Read 实例。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:35:30.737

如果您这样做，我假设您有一些代码，其内容取决于 foo 的类型，但其返回类型不。假设您的完整代码示例是

```
let foo = bar :: Int
in print (foo + 1) 
```

运行时参数传递一般是通过函数来​​完成的，所以先把代码改写成函数。类型签名中的`(Show a, Num a) =>`表示某些类型类方法作为隐藏参数传递给函数。

```
printBar :: (Show a, Num a) => a -> IO ()
printBar x = print ((bar `asTypeOf` x) + 1) 
```

例如，将在其正文中`printBar (undefined :: Double)`使用类型。`Double`编译器发现参数有类型`Double`，并传入类型类方法`Double`。

现在，让我们编写一个选择实际类型的函数`printBar`。

```
invokeBar :: Bool -> (forall a. (Show a, Num a) => a -> b) -> b
invokeBar True  f = f (undefined :: Int)
invokeBar False f = f (undefined :: Double) 
```

现在您可以调用`invokeBar True printBar`or`invokeBar False printBar`来选择是否使用`Int`or `Double`。

您无法从文件中读取“未知类型”，因为没有包含*所有*可能类型的文件格式。但是，您可以创建一个解析器来识别您将使用的类型的名称，并对每个名称使用上述方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:53:49.413

如果您正在寻找基于被实例化的类型的不同行为，那么您需要一个类型类。学习的好例子是[Data.Binary](http://hackage.haskell.org/packages/archive/binary/0.5.1.0/doc/html/src/Data-Binary.html#Binary)甚至`Read`类型类的实例。

例如

```
class Binary t where

    -- | Decode a value in the Get monad
    get :: Get t 
```

你没有说你想做什么样的解析——文本？二进制？-- 但它可能就像重用现有的解析库并为您的类型编写实例一样简单。

或者，您可以使用解析器组合器在不同的选项之间进行选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T13:33:54.740

我理解配置文件的方式指定了解析器如何进一步进行。一个非常简单的示例是 CSV，其中第一行确定所有后续行中的字段数。假设所有字段都是字符串字段，我的变体是将第一行解析为解析以下行的解析器：

```
csvHeader :: Parser (Parser [String]) 
```

的结果`csvHeader`是一个将应用于所有剩余行的解析器：

```
csvHeader >>= many 
```

现在，在您的情况下，实际结果也可以是多种类型中的一种。最简单的方法是创建一个带有可能结果的 ADT：

```
data CsvField = Coordinate Float Float | Person Name 
```

更先进、更安全、更灵活的解决方案不是从数据的角度考虑，而是从您可以对它们执行的操作的角度考虑。假设您正在解析一个包含数字（整数或浮点数）的配置文件。无论哪种情况，您都希望将数字打印到屏幕上。因此，不要返回实际数字，而是返回操作：

```
config :: Parser (IO ()) 
```

最后，如果您想在保留类型变量的同时保留有关字段中包含的任何内容的一些信息，则需要变得存在：

```
data Field = forall a. Field a (a -> a) 
```

现在你可以解析任意的东西，只要你返回一个值和一个函数来应用它：

```
config :: Parser Field 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T17:39:37.157

使用您的示例输入：

```
barType: Int
barValue: 2 
```

由于`barType`告诉您如何解释`barValue`，您需要同时解析两行，或者在解析时保持状态（使用`State`or `StateT`）。无论哪种情况，您基本上都需要对类型进行模式匹配。例如，如果我`Data.Binary.Get`用于解析，我会有类似的东西：

```
data Bar = IntBar Int | DoubleBar Double

parseBar :: String -> Get Bar
parseBar t = case t of 
  "Int" -> liftM IntBar $ get
  "Double" -> liftM DoubleBar $ get 
```

重点是，无论您如何对其进行切片，您都需要提前知道您将使用哪些类型，因为您的解析器需要考虑所有这些类型。这也意味着代表所有可能的类似`Bar`事物的类型类可能不是要走的路。您可能想要一个简单的`Bar`ADT。

# xml - 用另一个经典 ASP、VB 脚本替换 XML 节点值

> ID：11138522
> 
> 赞同：1
> 
> 时间：2012-06-21T12:48:18.130
> 
> 标签：xml, asp-classic, vbscript

我有以下需要使用 ASP VBscript 解析的 XML，

```
<ERROR>
    <ITEM>
        <CODE>X11</CODE> 
        <TEXT>E112</TEXT>
    </ITEM>
    <ITEM>
        <CODE>X14</CODE> 
        <TEXT>E888</TEXT> 
    </ITEM>
    <OTHER-INFO>
        <XID>I989</XID>  
    <OTHER-INFO>    
<ERROR> 
```

我的要求是将 ITEM 中的 TEXT 值替换为其相应的详细信息，我将从 getInfo(code) 函数中获取它。如何使用经典的 asp 和 vbscript 替换 TEXT 值。

需要输出，

```
<ITEM>
    <CODE>X11</CODE> 
        <TEXT>Detailed Explanation about this error</CODE>
</ITEM> 
```

我编写了以下代码来遍历每个项目。objMSXML 包含上述标签，我需要将结果返回到同一个对象中。

```
If objMSXML.getElementsByTagName("ERROR").length <> 0 Then
    For Each ObjNode In objMSXML.documentElement.selectNodes("ITEM")
        strTrasMsg = getInfo(objECGO.xVal("CODE",ObjNode,"STR"))

    Next
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:11:37.580

您可以尝试使用 xpath 选择节点并替换文本吗

类似的东西，我没有尝试过，但它应该可以工作，因为支持 xpath

```
 Set Node = xmlDoc.selectsinglenode("//ERROR/ITEM[../CODE/text()="item code vlaue"/text)

   Node.text = "NEW VALUE"

   xmldoc.save 
```

或者另一种方法是通过编写标签来重新创建响应，因为您已经填充了代码和描述。

```
var myxml = "<ITEM><CODE>"your value"</CODE><TEXT>"your value"</CODE></ITEM> 
```

除了保存这个xml之外的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:29:55.720

简短的回答：

```
For Each ObjNode In objMSXML.documentElement.selectNodes("ITEM")
    strTrasMsg = "whatever-" & ObjNode.firstChild.text ' getInfo(objECGO.xVal("CODE",ObjNode,"STR"))
    WScript.Echo strTrasMsg, ObjNode.childNodes(1).text
    ObjNode.childNodes(1).text = strTrasMsg
Next 
```

即：使用 DOM 树，按索引访问子节点。

长答案：

如果您（所有人）根据此框架提出“编辑我的 xml”问题：

```
 Dim sXml : sXml = Join(Array(_
       "<ERROR>" _
    ,  "    <ITEM>" _
    ,  "        <CODE>X11</CODE>" _
    ,  "        <TEXT>E112</TEXT>" _
    ,  "    </ITEM>" _
    ,  "    <ITEM>" _
    ,  "        <CODE>X14</CODE>" _
    ,  "        <TEXT>E888</TEXT>" _
    ,  "    </ITEM>" _
    ,  "    <OTHER-INFO>" _
    ,  "        <XID>I989</XID>" _
    ,  "    </OTHER-INFO>" _
    ,  "</ERROR>" _
  ))
  Dim objMSXML : Set objMSXML = CreateObject("Msxml2.DOMDocument")

  objMSXML.setProperty "SelectionLanguage", "XPath"
  objMSXML.async = False
  objMSXML.loadXml sXml

  If 0 = objMSXML.parseError Then
     If objMSXML.getElementsByTagName("ERROR").length <> 0 Then
        Dim ObjNode, strTrasMsg
        For Each ObjNode In objMSXML.documentElement.selectNodes("ITEM")
            strTrasMsg = "whatever-" & ObjNode.firstChild.text '             
            ---- problem -----
        Next
        WScript.Echo objMSXML.xml
     End If
  Else
     WScript.Echo objMSXML.parseError.reason
  End If 
```

输出：

```
whatever-X11 E112
whatever-X14 E888
<ERROR>
        <ITEM>
                <CODE>X11</CODE>
                <TEXT>whatever-X11</TEXT>
        </ITEM>
        <ITEM>
                <CODE>X14</CODE>
                <TEXT>whatever-X14</TEXT>
        </ITEM>
        <OTHER-INFO>
                <XID>I989</XID>
        </OTHER-INFO>
</ERROR> 
```

格式和有效性的琐碎问题可以在发布之前解决，并且解决方案会更快地涌入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:27:19.027

尝试以下操作（假设每个 ITEM 都存在 TEXT 元素）。

```
For Each oItem In objMSXML.documentElement.selectNodes("ITEM") 
    oItem.selectSingleNode("TEXT").text = getInfo(objECGO.xVal("CODE", oItem ,"STR"))  
Next 
```

# plone - 在编辑表单上也为字段提供默认值

> ID：11138524
> 
> 赞同：1
> 
> 时间：2012-06-21T12:48:22.917
> 
> 标签：plone, dexterity

所以我有一个表格（只是从[plone.directives.form](http://pypi.python.org/pypi/plone.directives.form#value-adapters)获取示例）：

```
from plone.directives import form
from zope import schema

class IMySchema(form.Schema):

    title = schema.TextLine(title=u"Title")

@form.default_value(field=IMySchema['title'])
def default_title(data):
    return data.context.suggested_title 
```

仅适用于添加表单。

所以问题是：我怎样才能使同样的方法也用于编辑表单？如果与此事相关，我不会自己生成编辑表单。

编辑：我忘记了一些非常相关的东西：在字段中输入的值存储在其他地方，并且由于事件处理程序已经可以工作，所以这就是为什么我需要能够始终提供默认值（从存储的地方）并允许用户（系统管理员）更改该值，但主要是查找它（即该字段具有什么值）。

这里的用例是让系统管理员查看成员的电子邮件字段。电子邮件保存在 portal_membership 中，但我们增强了常规成员编辑配置文件，只允许系统管理员查看他们的电子邮件并能够更改它。

# visual-studio-2010 - 在 MFC 应用程序中单击按钮时显示表单

> ID：11138527
> 
> 赞同：0
> 
> 时间：2012-06-21T12:48:25.137
> 
> 标签：visual-studio-2010, forms, visual-c++, mfc

我有一个 MFC 应用程序。在这个 MFC 中有一个包含一些按钮控件的对话框。有一个名为“播放”的按钮控件，用于在另一个按钮控件上显示 Live Camera Image。我通过右键单击项目添加了一个表单，并在该表单中添加了一个“pictureBox”。

我想要的是当我点击“播放”按钮控件时，这个表单将被打开，实时摄像机将显示在“图片框”而不是另一个按钮控件上。

由于我是 MFC 应用程序的新手，所以我不知道如何通过单击“播放”按钮控件打开。我已使用此代码打开表单

```
PvSimpleUISample::display^ obj;
    obj=gcnew PvSimpleUISample::display(); 
```

但这显示错误，例如 PvSimpleUISampleDlg.cpp(740): error C2653: 'PvSimpleUISample' : is not a class or namespace name

```
PvSimpleUISampleDlg.cpp(740): error C2065: 'display' : undeclared identifier
PvSimpleUISampleDlg.cpp(740): error C2065: 'obj' : undeclared identifier
PvSimpleUISampleDlg.cpp(741): error C2065: 'obj' : undeclared identifier
PvSimpleUISampleDlg.cpp(741): error C2653: 'PvSimpleUISample' : is not a class or namespace name
PvSimpleUISampleDlg.cpp(741): error C2061: syntax error : identifier 'display' 
```

不知道怎么办？

任何人都可以帮助解决这个问题。

任何帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:14:00.943

您通常所做的是创建一个基于 CDialog（或 CDialogEx）的控件，其中包含关联的对话框表单资源，然后将其打开：

```
CMyDialog dlg;
if ( dlg.DoModal() == IDOK )
{
    // User pressed ok
} 
```

# javascript - 取消选中与 div 元素相关的复选框的功能？

> ID：11138529
> 
> 赞同：0
> 
> 时间：2012-06-21T12:48:34.687
> 
> 标签：javascript, jquery, html, label

我有这个人名单，他们的名字旁边有复选框。当您单击复选框时，该人的姓名将添加到页面底部的空槽列表中。

空槽列表只是带边框的空 div。默认数字是六。但如果用户需要，我已经制作了这两个简单的函数来添加和删除插槽。它们看起来像这样：

```
function addSlot() {
    var count = jQuery('.member').length;
    var div_id = count + 1;
    $("#list").append("<div id ='member" + div_id + "' class='member'></div>");
}

function removeSlot() {
    var div_id = jQuery('.member').length;
    $('#member' + div_id + '').remove();
} 
```

所以，是的，它们非常基本。现在我不能做的棘手的事情是，如果你删除一个带有名字的插槽，相应的复选框就会被取消选中。不知道这有多可行。这是我的“人员”和“插槽”的样子：

```
<input type='checkbox' name='check[]' id='159' value='159' /><label for='159'>John Smith</label> 
```

和

```
<div id="member1" class="member"></div> 
```

所以我想我只需要它，以便如果我删除一个填充的 div，它会获取该 div 的内容并使用它来取消选中与该内容对应的标签的复选框？有道理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T15:18:41.803

我试过你的小提琴，但有些功能不起作用：

我改变了一些部分，比如：

```
$('#add').click(function(){
    var count = $('.member').length;
    var div_id = count + 1;
    $("#list").append("<div id ='member" + div_id + "' class='member'></div>");
});

$('#remove').click(function(){
    $('.member:last').remove();
}); 
```

替代函数 addSlot() 和函数 removeSlot()

和

```
<input type="button" id="add" value="Addslot" /><br />

<input type="button" value="RemoveSlot" id="remove" /><br /> 
```

这似乎适用于 jquery 1.4.4

[小提琴](http://jsfiddle.net/yfwz5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:01:44.180

我想如果是我来实现它，我会选择这个解决方案。

```
$('input[type=checkbox]').change(function(){
    var $t = $(this), id = $t.attr('id'), $list = $('#list');
    if($t.is(':checked')){
        $list.append("<div class='member' data-id='" + id + "'></div>");
    }
})

function removeSlot(){
    var $t = $('.member').eq(-1), id = $t.attr('data-id');
    $('#' + id).attr('checked', false);
    $t.remove();
} 
```

编辑：

我想我现在明白你的意思了。我的想法仍然是使用一些 attr 将插槽链接回复选框。请查看它是否按您的预期工作，[http://jsfiddle.net/uNMvs/4/](http://jsfiddle.net/uNMvs/4/)

```
var $list = $('#list');

$list.find('.member').attr('data-id', '-1');

$('input:checkbox').change(function(){
   var $t = $(this), $lbl = $t.next(), 
       text = $lbl.html(), id = $t.attr('id');

    if($t.is(':checked')){
        $slot = $list.find('.member[data-id=-1]').eq(0);
        if($slot.size()) $slot.html(text).attr('data-id', id);
        else {
            alert('Please add another slot first');
            $t.attr('checked', false);            
        }
    } else {
        $list.find('.member[data-id=' + id + ']').attr('data-id', '-1').empty();
    }
});

$('#addSlot').click(function () {
    $list.append("<div data-id='-1' class='member'></div>");
})

$('#removeSlot').click(function () {
    var $slot = $list.find('.member').eq(-1);
    $('#' + $slot.attr('data-id')).attr('checked', false);
    $slot.remove();
})

​ 
```

# delphi - 如何同时创建和显示多个任意长度的电子邮件？

> ID：11138530
> 
> 赞同：0
> 
> 时间：2012-06-21T12:48:41.250
> 
> 标签：delphi, mapi, shellexecute

我一直在使用 ShellExecute 使用 Windows 默认邮件客户端一次生成 5 或 6 封电子邮件：

```
ShellExecute(Self.Handle, nil, Pchar(email), nil, nil, SW_NORMAL); 
```

然后，这允许用户决定是否要发送它们。

我遇到的问题是，如果电子邮件正文太长，它会在创建的电子邮件中被截断。我认为这是以这种方式创建电子邮件的限制。

我已经考虑将生成电子邮件的方式改为使用 MAPI，但我发现的问题是我尝试过的所有 MAPI 例程或组件似乎一次只允许我创建一封电子邮件。然后，最终用户必须在生成下一个之前决定是否要发送它。

是否有解决 ShellExecute 长度问题的方法，或者是否有办法使用 MAPI 或其他方式一次性生成一批电子邮件？我想使用默认的 Windows 电子邮件客户端来显示消息。

我正在使用德尔福 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T01:14:23.457

我使用 JclMapi.pas 使用 MAPI 发送电子邮件。我编写了一个类来简化 TJclEmail 类的使用。

发送电子邮件的代码是：

```
class function TMAPISendMail.Execute(const Name, EmailTo, Subject, Body: string; Attachment: TStrings): boolean;
var
  I: Integer;
  Email: string;
  MAPISendMail: TMAPISendMail;
begin
  MAPISendMail:= TMAPISendMail.Create;
  try
    I:= 1;
    while I > 0 do
    begin
      Email:= TString.Token(EmailTo, ';', I);
      if Email <> '' then
        MAPISendMail.AddRecipient(Email, Name);
    end;
    for I := 0 to Attachment.Count - 1 do
      MAPISendMail.AddAttachment(Attachment[I]);
    MAPISendMail.MailSubject:= Subject;
    MAPISendMail.HTMLBody:= False;
    MAPISendMail.MailBody:= Body;
    Result:= MAPISendMail.SendMail;
  finally
    MAPISendMail.Free;
  end;
end; 
```

类接口是：

```
 TMAPISendMail = class
  private
    FAJclEmail: TJclEmail;
    FPrerequisites: TPrerequisites;
    FResolveNames: Boolean;
    FShowDialog: Boolean;
    [...]
  protected
    function DoSendMail: Boolean; virtual;
  public
    constructor Create;
    destructor Destroy; override;
    class function Execute(const Name, EmailTo, Subject, Body: string; Attachment: TStrings): boolean; static;
    property MailBody: string read GetMailBody write SetMailBody;
    property HTMLBody: Boolean read GetHTMLBody write SetHTMLBody;
    property ShowDialog: Boolean read FShowDialog write FShowDialog;
    property MailSubject: string read GetMailSubject write SetMailSubject;
    property ResolveNames: Boolean read FResolveNames write FResolveNames;
    property Prerequisites: TPrerequisites read FPrerequisites;
    procedure AddRecipient(const Address: string; const Name: string = '');
    procedure AddAttachment(const FileName: string);
    function SendMail: Boolean;
  end; 
```

希望它对你有用。

也检查这个线程：[发送带有签名的电子邮件](https://stackoverflow.com/questions/11001835/sending-email-with-signature)

# css - 元素高度/宽度缩放问题

> ID：11138532
> 
> 赞同：0
> 
> 时间：2012-06-21T12:48:52.370
> 
> 标签：css

我的背景元素有问题。我有两个 div，窗帘左和窗帘右，它们需要是浏览器高度的 100%，宽度不小于 20%，宽度不超过 40%。主要要求是窗帘比例为高度的 100%。

现在，我有

```
#curtain_left {
left: 0px;
min-width: 20%;
max-width:40%
height: 100%;
text-align: left;
z-index: -1;
position: fixed;
background-image: url(img/curtain_right.png);
background-size: 100%;
background-repeat: no-repeat; 
```

它似乎只关注最小宽度，而不是根据缩放高度进行扩展。所以它适用于宽屏显示器，但在标准情况下，背景图像将扩大到 20% 的宽度，然后在底部留下一个尴尬的间距。

![在此处输入图像描述](../Images/cc3b8483f0d4824f62b1f5bf1158d8d5.png)

有小费吗？

[http://jsfiddle.net/kJbcj/1/](http://jsfiddle.net/kJbcj/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:57:54.540

**编辑：删除 jquery 解决方案。**

我理解你错了，因此发布了，如果你尝试为该元素以及所有父元素提供高度和最大高度为 100% 会更好。例如

HTML：

```
<div class="wrapper">
    <div id="curtain_left"></div>
</div> 
```

CSS：

```
html, body, .wrapper, #curtain_left {
    height: 100%;
    max-height: 100%;
} 
```

请尝试一下这个概念。

# java - java中的主线程是否在它可能使用运行时类创建的任何进程完成执行之前完成

> ID：11138534
> 
> 赞同：4
> 
> 时间：2012-06-21T12:49:01.337
> 
> 标签：java, multithreading, runtime.exec

我正在使用 Runtime 类来执行软件的安装。但是，它不起作用，这意味着，在我触发作业（使用 Runtime 类创建）之后，一段时间（很快）安装作业就会退出。我认为问题在于主线程必须完成并因此终止使用 Runtime 类创建的进程。我对么 ？这里的解决方案是什么？

这就是我在主要课程中解雇我的工作的方式：

```
try
        {
            Runtime.getRuntime().exec(cmd);
        }                               
        catch(IOException e)    
        {   
            //add logging functionality
            e.printStackTrace();
        } 
```

在这个命令之后不久，主函数就完成了。

运行时命令没有问题。它有效..我什至可以看到它开始（我通过代码触发的安装）然后它突然退出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T12:53:25.473

您可能想查看 java.lang.Process 类。你可能想要这样的东西：

```
 Process process = Runtime.getRuntime().exec(cmd);
        process.waitFor(); 
```

子进程可能正在接收 SIGHUP 并退出。

编辑：

在上下文中，我会认为是这样的：

```
 try
    {
        Process process = Runtime.getRuntime().exec(cmd);
        process.waitFor();
    }                               
    catch(IOException e)    
    {   
        //add logging functionality
        e.printStackTrace();
    }
    catch(InterruptedException e)    
    {   
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:54:52.820

创建的进程是主线程的*子*进程。如果主线程完成，进程将被终止，类似于手动执行命令并按下`ctrl``c`或关闭窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:52:10.310

这只是一个疯狂的猜测，但我认为编程退出是因为你的代码中有错误（逻辑）可能是一个很快退出的 while 循环，

尝试查看运行时执行的代码。

该过程可能陷入僵局。解决方案在评论中，并附有示例。

# android - 透明颜色资源在Android中显示为红色渐变

> ID：11138536
> 
> 赞同：1
> 
> 时间：2012-06-21T12:49:05.737
> 
> 标签：android, android-layout, android-resources

我在 Android 中遇到颜色资源问题，特别是使用透明颜色。

每当我使用颜色资源中的透明颜色时，视图的背景显示为红色渐变，而不是在模拟器（在 AVD 上测试版本 1.6、2.2 和 2.3）或设备（DroidX w/ 2.3\. 4）。在 Eclipse 的预览模式中，透明色显示正确（或者说不正确）。

据我所知，这个特定的渐变没有在我的应用程序的任何地方定义。标题栏确实使用了来自 xml 形状资源的红色渐变，但它是完全不同的红色阴影。还有一个非常简单的自定义样式定义，但它只设置窗口标题背景和文本颜色。

我的颜色定义：

```
<color name="transparent">#0000</color>  <!--Tried #00000000 as well // --> 
```

展示该问题的示例视图：

```
<Button
    android:id="@+id/btn_login"
    android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_margin="5dp" android:layout_marginRight="10dp"
    android:text="@string/ui_btn_login" android:textColor="@color/dark_grey"
    android:background="@color/transparent"
    android:drawableTop="@drawable/ic_login" android:drawablePadding="2dp" /> 
```

结果为红色渐变（使用颜色资源时）：http: [//i683.photobucket.com/albums/vv194/platinumF150/trans_resource.png](http://i683.photobucket.com/albums/vv194/platinumF150/trans_resource.png)

```
<Button
    android:id="@+id/btn_login"
    android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_margin="5dp" android:layout_marginRight="10dp"
    android:text="@string/ui_btn_login" android:textColor="@color/dark_grey"
    android:background="#0000"
    android:drawableTop="@drawable/ic_login" android:drawablePadding="2dp" /> 
```

结果显示正确（使用内联颜色代码时）：http: [//i683.photobucket.com/albums/vv194/platinumF150/trans_color.png](http://i683.photobucket.com/albums/vv194/platinumF150/trans_color.png)

但是，当我使用`android:background="@android:color/transparent"`一切正常时...

我在整个应用程序中都看到了这一点，任何使用的视图`@color/transparent`都会获得红色渐变。

显然，在任何地方都使用 Android 的透明颜色并不是什么大不了的事，它只是令人沮丧，我相信有一个解决方案。我以前从未见过这个问题，但我也从未在应用程序中使用过多的透明度。

感谢您的任何想法或意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:51:52.973

按照

[android.R.color.transparent 不完全透明](https://stackoverflow.com/questions/9988671/android-r-color-transparent-not-fully-transparent)

&

[如何在 Android 中使 ListView 透明？](https://stackoverflow.com/questions/1377336/how-to-make-a-listview-transparent-in-android)

“#00000000”应该可以工作............

使用`@android:color/transparent`透明色代替`android:background="@color/transparent"`

# c++ - C++：“请求 Y 的非类类型 Z 的成员 X”的奇怪出现

> ID：11138543
> 
> 赞同：4
> 
> 时间：2012-06-21T12:49:16.200
> 
> 标签：c++, most-vexing-parse

以下程序用 g++ 4.6 编译，产生错误

```
request for member ‘y’ in ‘a2’, which is of non-class type ‘A<B>(B)’ 
```

在最后一行：

```
#include <iostream>

template <class T> class A
{
public:
  T y;
  A(T x):y(x){}
};

class B
{
public:
  int u;
  B(int v):u(v){}
};

int main()
{
  int v = 10;
  B b1(v);

  //works
  A<B> a1(b1);

  //does not work (the error is when a2 is used)
  A<B> a2(B(v));

  //works
  //A<B> a2((B(v)));

  std::cout << a1.y.u << " " << a2.y.u << std::endl;    
} 
```

从代码中包含的工作变体可以看出，在 A 的构造函数的参数周围添加括号可以解决问题。

我已经看到由于将构造函数调用解释为函数声明而导致的一些相关错误，例如在创建一个没有构造函数参数但带有大括号的对象时：

```
myclass myobj(); 
```

但在我看来

```
A<B> a2(B(v)); 
```

不能解释为函数声明。

有人可以向我解释发生了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T12:54:55.077

这是编译器将其解释为函数声明的**最令人头疼的解析情况。**`A<B> a2(B(v))`这样：

`A<B>`是返回类型
`a2`是函数名
`B`是参数的类型
`v`是参数名

所以，当你在做

```
std::cout << a1.y.u << " " << a2.y.u << std::endl; 
```

编译器不认为`a2.y.u`是一个类，这就是你收到`non-class type`错误的原因。

此外，由于**在函数声明中不允许使用双括号**，因此该版本`A<B> a2((B(v)));`有效，因为编译器不再将其解释为函数声明，而是作为变量声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:54:39.447

我认为您被“最令人烦恼的解析”所困扰，这意味着它`A<B> a2(B(v));`被解析为函数声明而不是变量声明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T12:54:39.653

如以下代码示例所示：

```
int a (int(v)) {
    return v;
}

int main() {
    std::cout << a(5); //prints 5
} 
```

那一行确实是一个宣言。在这个例子中，参数是 type`int`和 named `v`。将其与您的代码相关联，参数是 type`B`并命名为`v`. 这就是为什么当你使用双括号时会得到类似的行为：因为它是同一件事！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T12:55:45.100

这是一个函数声明：

```
A<B> a2(B(v));
//is same as:
A<B> a2(B v);

//consider:
int foo(int v);
int foo(int (v)); 
```

# android - 从文件中读取保存的数据

> ID：11138544
> 
> 赞同：0
> 
> 时间：2012-06-21T12:49:17.910
> 
> 标签：android

我正在尝试从我保存的文件中读取数据。此代码是用于读取数据“值”的部分。但是编译器说最后一部分'return Value;'有一个错误。它说“无法将值解析为变量”。我应该怎么办？

```
public static double[] getValue(){
    FileInputStream fis = null;
    ObjectInputStream ois = null;
    List<Double> newList = new ArrayList<Double>();
    try {
        fis = new FileInputStream("user_data.txt");
        ois = new ObjectInputStream(fis);

       double[] Value = (double[]) ois.readObject();

    } catch (Exception ex) {

        try {
            fis.close();
            ois.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return Value;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:50:29.933

在块外声明`Value`变量。`try`顺便说一句，`value`用作名称，而不是`Value`.

```
double[] Value;
try {
        fis = new FileInputStream("user_data.txt");
        ois = new ObjectInputStream(fis);

       Value = (double[]) ois.readObject();

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:50:48.643

你的问题是你声明`Value`inside `try`，所以它在外面是不可见的。试试这个：

```
public static double[] getValue(){
    FileInputStream fis = null;
    ObjectInputStream ois = null;
    List<Double> newList = new ArrayList<Double>();
    double[] Value;

    try {
        fis = new FileInputStream("user_data.txt");
        ois = new ObjectInputStream(fis);

        Value = (double[]) ois.readObject();

    } catch (Exception ex) {

        try {
            fis.close();
            ois.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return Value;
} 
```

# asp.net-mvc-3 - 如何在查询中设置默认为空

> ID：11138545
> 
> 赞同：1
> 
> 时间：2012-06-21T12:49:22.553
> 
> 标签：asp.net-mvc-3, linq, linq-to-sql

所以我有这个查询：

```
 var list = (from x in xList 
                 join a in AList on x.commonfield equals a.commonfield
                 join b in BList on x.newCommonField equals b.newCommonField
                 from c in Clist.Where(p=>p.connectorID==x.connectorID).DefaultifEmpty()
                                select new { x, a.DesiredFieldFromA, b.DesiredFieldFromB,c.name}).ToList();

    list.ForEach(el =>
                    {
                        el.x.DesiredFieldFromA= el.DesiredFieldFromA;
                        el.x.DesiredFieldFromB= el.DesiredFieldFromB ;
                        el.x.Name=el.name;
                    });
    return list.Select(p=>p.x); 
```

当我做 ：

```
select new { x, a.DesiredFieldFromA, b.DesiredFieldFromB,c.name}).ToList(); 
```

问题#1：我怎么能告诉它它仍然应该向我显示记录......但是如果 name 字段为空，则放置 string.empty。
一些东西：

```
select new { x, a.DesiredFieldFromA, b.DesiredFieldFromB,c.name??string.Empty}).ToList(); 
```

问题#2：我怎么能告诉它即使“connectorID”为空..我仍然需要它来显示 x 记录
提前谢谢！

**#1 和 #2 的解决方案如下：**

```
from c in Clist.Where(p=>p.connectorID==x.connectorID).DefaultifEmpty()
                                select new { x, a.DesiredFieldFromA, b.DesiredFieldFromB,name= (c==null) ?"Not Defined": c.name}).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:07:49.350

对于问题 #2，更改：

```
from c in Clist.Where(p=>p.connectorID==x.connectorID).DefaultidEmpty() 
```

至：

```
from c in Clist.Where(p=>p.connectorID==x.connectorID || x.connectorID == null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:04:52.470

对于问题 #1，试试这个：

```
select new { 
    x, 
    a.DesiredFieldFromA, 
    b.DesiredFieldFromB, 
    name = c.name ?? string.Empty
}).ToList(); 
```

您需要指定名称“名称”，以便您可以使用您的表达式来分配它。

对于问题 #2，请参阅[jonnyGold 的回答](https://stackoverflow.com/a/11138866/93652)。

# c# - AsyncFileUpload 上传完成无法正常工作

> ID：11138547
> 
> 赞同：1
> 
> 时间：2012-06-21T12:49:25.703
> 
> 标签：c#, asp.net

我在我的 asp.net 应用程序中使用 ajaxToolkit:AsyncFileUpload。在 AsyncFileUpload1_UploadedComplete 服务器端事件中，我试图使标签可见并将其更改为文本，但未启用按钮。

我正在使用 asyncfileupload 控件的客户端事件，如下所示：

```
function UploadComplete(sender, args) {
    var filename = args.get_fileName();
    var contentType = args.get_contentType();
    var text = "Size of " + filename + " is " + args.get_length() + " bytes";
    if (contentType.length > 0) {
        text += " and content type is '" + contentType + "'.";
    }
    document.getElementById('<%= lblStatus.ClientID %>').innerText = text;
} 
```

所有标签、按钮和文件上传控件都在更新面板之外。我也尝试将控件放在更新面板中，但结果相同。

请提出解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T15:26:46.113

它是异步文件上传。它异步工作。因此，您将文件发送到代码隐藏。它变成了你的结果。没有视图状态，没有回发，没有 html 渲染。

所以你不能改变标签或按钮。如果你想要这个，使用普通的文件上传。或者在客户端做你的工作..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T08:50:51.967

I had a similar problem once .. You can not set visible to true or false but you can set its style .. Here is what I did ..

```
function OnClientAsyncFileUploadComplete(sender, args) {            
        //similar to visible = false;
        document.getElementById('<%=lbl_Lable1.ClientID%>').style.display = 'none'; 

        //similar to visible = true;
        document.getElementById('<%=lbl_Lable2.ClientID%>').style.display = 'inline';

        return true;
    } 
```

I am sorry I wont be of much help on setting text in label as I had predefined text in label but you can always merge your innertext or innerhtml code with it ..

# asp.net - 在数据网格的超链接 OnClick 之前设置会话

> ID：11138556
> 
> 赞同：0
> 
> 时间：2012-06-21T12:49:50.843
> 
> 标签：asp.net, session, datagrid

我的网站上有一个数据网格，其中一列是超链接列。在单击超链接之前，我需要设置一些会话。但我无法在客户端设置会话。我该怎么做？

注意：我不能使用按钮栏，浏览器“在新窗口中打开”、“在新标签中打开”属性不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:55:22.617

使用`LinkButton`. 此控件生成回发到服务器作为任何按钮。在按钮处理程序上，设置您需要的会话变​​量，然后执行`Response.Redirect()`。

如果您需要在新窗口中打开链接。用这个代替`Response.Redirect()`

**ASPX**

```
 <asp:LinkButton ID="LinkButton1" runat="server"     
    OnClick="LinkButton1_Click">Open</asp:LinkButton> 
```

**CS**

```
protected void LinkButton1_Click(object sender, EventArgs e)
{
    Session["MyVar1"] = "SomeValue";

    Page.ClientScript.RegisterClientScriptBlock(GetType(), "OPEN_NEW_WINDOW",  
      "window.open('page.aspx','_blank')", true);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T13:14:16.880

如果您确实需要从客户端设置会话变量，您仍然可以这样做，但您必须为此对服务器进行 AJAX 调用。

# c# - RequireFieldValidator 的错误消息阻止我执行除了填写表格之外的其他操作

> ID：11138559
> 
> 赞同：0
> 
> 时间：2012-06-21T12:50:09.327
> 
> 标签：c#, asp.net, web

我的表单中的 RequireFieldValidator 有问题。当我填写错误的表格时，我的错误消息会很好地显示，这很酷。事实是，如果我决定不填写表格（在提出 requirefieldvalidor 之后）并单击取消按钮或单击我的菜单的链接按钮，我不能。所以 requirefieldvalidator 阻止我更改页面并做我想做的事。我怎么解决这个问题？

真挚地，

昆汀

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:52:56.690

设置`CausesValidation="False"`在`cancel`和`linkbutton`按钮上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:54:40.343

添加要重定向到某个页面的按钮并设置 CauseValidation="fasle"

```
<asp:Button ID="cmdCancel" Text="Cancel" runat="server" CauseValidation="false"
              OnClick="cmdCancel_Click" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:53:49.437

您需要为验证器和提交按钮设置验证组。请参阅[http://msdn.microsoft.com/en-us/library/ms227424.aspx](http://msdn.microsoft.com/en-us/library/ms227424.aspx)

# forms - 表格内表格

> ID：11138560
> 
> 赞同：2
> 
> 时间：2012-06-21T12:50:11.117
> 
> 标签：forms

为什么这是错误的？

```
<table>
  <form>
    <tr><td>something something</td/>
  </form>
</table> 
```

我说的是表格标签内表格标签的位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T12:54:50.787

从[DTD](http://www.w3.org/TR/html4/sgml/dtd.html)：

```
<!ELEMENT TABLE - -
     (CAPTION?, (COL*|COLGROUP*), THEAD?, TFOOT?, TBODY+)>
<!ELEMENT CAPTION  - - (%inline;)*     -- table caption -->
<!ELEMENT THEAD    - O (TR)+           -- table header -->
<!ELEMENT TFOOT    - O (TR)+           -- table footer -->
<!ELEMENT TBODY    O O (TR)+           -- table body -->
<!ELEMENT COLGROUP - O (COL)*          -- table column group -->
<!ELEMENT COL      - O EMPTY           -- table column -->
<!ELEMENT TR       - O (TH|TD)+        -- table row -->
<!ELEMENT (TH|TD)  - O (%flow;)*       -- table header cell, table data cell--> 
```

这些是元素中唯一可以包含的`table`元素（在这种情况下，在 HTML 4 中，但是您检查了相同类型的文档是否有其他版本，并且没有太大变化）。

* * *

另一方面，一个`form`元素可以包含任何其他块级元素（其他形式除外）：

```
<!ELEMENT FORM - - (%block;|SCRIPT)+ -(FORM) -- interactive form --> 
```

并且该`td`元素可以包含任何“流”元素（如第一个代码块中所示），“流”包括块级元素：

```
<!ENTITY % flow "%block; | %inline;"> 
```

因此，您可以将`<form>`标签放置在整个表格周围或一个表格单元格内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:54:50.013

只有元素 CAPTION、COL、COLGROUP、THEAD、TFOOT 和 TBODY 允许作为 TABLE 元素的子元素。请参阅HTML 规范中[的 TABLE 元素](http://www.w3.org/TR/REC-html40/struct/tables.html#edef-TABLE)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T12:55:32.440

因为你只能根据标准把`<form>`标签放在里面`<td>`或外面。`<table>`

# html - Outlook 和 Gmail 不尊重时事通讯中的 html 标记宽度

> ID：11138569
> 
> 赞同：0
> 
> 时间：2012-06-21T12:50:50.637
> 
> 标签：html, gmail

我正在从 php 创建一个时事通讯，它输出以下代码。尽管内页的宽度固定为 640 像素，但 Outlook 和 Gmail 在大屏幕上显示的宽度要宽得多。具有固定宽度甚至高度的图像也会发生同样的情况！我应该怎么做才能避免这种情况？

[链接到时事通讯。](http://www.african-parks.org/xTemplates/NewsletterPark_01.php?BroadcastEmail_ID=7&VID=0&Mode=)

[链接到 Gmail 显示的内容](http://www.african-parks.org/Alpha/Newsletter_Gmail.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:26:40.107

相信我..SpaceBeers 是对的..过去 3 天我一直在创建许多时事通讯和电子邮件，这是我第一次使用表格和内联 css..它在电子邮件和 Outlook 中给出了完美准确的结果。我猜时事通讯和电子邮件是表仍然存在的唯一原因：D

# blackberry - 我如何在黑莓 4.5 中滚动多个标签字段

> ID：11138570
> 
> 赞同：2
> 
> 时间：2012-06-21T12:50:53.223
> 
> 标签：blackberry, scroll, horizontalfieldmanager, labelfield, fieldmanager

嗨朋友，我想通过使用多个标签字段在黑莓屏幕中显示几个数据。但是当我使用多个标签字段时，它不会垂直和水平滚动，所以请帮我解决这个问题。

这是我的代码

```
public class Data extends MainScreen {

   BGManager objManager = new BGManager();
   public LabelField objTitle;
   private VerticalFieldManager vfmMainManager;
   private VerticalFieldManager vfmScrollManager;
   private HorizontalFieldManager hfmUsernameManager;
   private HorizontalFieldManager hfmPasswordManager;
   private HorizontalFieldManager headerBar;
   private ImageButton btn_Update;
   private Bitmap[] img1;
   private LabelField objLabelField;
   public TaskListField objTaskListField;
   public TextField objTextField = new TextField(TextField.TYPE_PLAIN, TextField.FIELD_HCENTER);
   public String strIndex;
   public LabelField objLabelField2, objLabelField3, objLabelField4, objLabelField5, objLabelField6, objLabelField7, objLabelField8, objLabelField9;
   public LabelField objLabelField12, objLabelField13, objLabelField14, objLabelField15, objLabelField16, objLabelField17, objLabelField18, objLabelField19, objLabelField20;
   public String strSerno, strDate, strAllo, strMob, strDetail, strRemark, strSldate, strEmail, strStatus;
   public int curentIndex = 0;
   public H_FieldManager objH_FieldManager1, objH_FieldManager2, objH_FieldManager3, objH_FieldManager4, objH_FieldManager5, objH_FieldManager6, objH_FieldManager7, objH_FieldManager8, objH_FieldManager9, objH_FieldManager10, objH_FieldManager11, objH_FieldManager12, objH_FieldManager13, objH_FieldManager14, objH_FieldManager15, objH_FieldManager16, objH_FieldManager17, objH_FieldManager18;

   public Data(int index) {
      super(MainScreen.VERTICAL_SCROLL | MainScreen.VERTICAL_SCROLL_MASK);
      objTitle = new LabelField("Details Page", LabelField.FIELD_HCENTER | LabelField.USE_ALL_WIDTH);
      objTitle.setColor(Color.BLACK);
      setTitle(objTitle);

      this.add(objManager);
      System.out.println("Index1 ==" + index);
      this.curentIndex = index;
      strSerno = XmlHander.vectSrno.elementAt(curentIndex).toString();
      strDate = XmlHander.vectSrdate.elementAt(curentIndex).toString();
      strAllo = XmlHander.vectAllo.elementAt(curentIndex).toString();
      strMob = XmlHander.vectMob.elementAt(curentIndex).toString();
      strDetail = XmlHander.vectDetails.elementAt(curentIndex).toString();
      strRemark = XmlHander.vectRemark.elementAt(curentIndex).toString();
      strSldate = XmlHander.vectSldate.elementAt(curentIndex).toString();
      strEmail = XmlHander.vectEmail.elementAt(curentIndex).toString();
      strStatus = XmlHander.vectStatus.elementAt(curentIndex).toString();

      img1 = new Bitmap[3];
      img1[0] = Bitmap.getBitmapResource("btn-hover.png");
      img1[1] = Bitmap.getBitmapResource("btn.png");
      img1[2] = Bitmap.getBitmapResource("btn.png");

      btn_Update = new ImageButton(img1, "Update", ImageButton.FIELD_LEFT);
      btn_Update.setColor(Color.WHITE);
      hfm12 = new HorizontalFieldManager(HorizontalFieldManager.FIELD_HCENTER);
      hfm12.add(btn_Update);

      objLabelField12 = new LabelField("SRNo : ");
      objLabelField12.setColor(Color.BLACK);
      objLabelField13 = new LabelField("SRDate : ");
      objLabelField13.setColor(Color.BLACK);
      objLabelField14 = new LabelField("AllocationDate : ");
      objLabelField14.setColor(Color.BLACK);
      objLabelField15 = new LabelField("MobileNumber : ");
      objLabelField15.setColor(Color.BLACK);
      objLabelField16 = new LabelField("SRDetails : ");
      objLabelField16.setColor(Color.BLACK);
      objLabelField17 = new LabelField("Remarks : ");
      objLabelField17.setColor(Color.BLACK);
      objLabelField18 = new LabelField("SLADate : ");
      objLabelField18.setColor(Color.BLACK);
      objLabelField19 = new LabelField("Email : ");
      objLabelField19.setColor(Color.BLACK);
      objLabelField20 = new LabelField("CaseStatus : ");
      objLabelField20.setColor(Color.BLACK);

      objLabelField = new LabelField(strSerno);

      objLabelField.setColor(Color.BLACK);
      objLabelField2 = new LabelField(strDate);

      objLabelField2.setColor(Color.BLACK);
      objLabelField3 = new LabelField(strAllo);

      objLabelField3.setColor(Color.BLACK);
      objLabelField4 = new LabelField(strMob);

      objLabelField4.setColor(Color.BLACK);
      objLabelField5 = new LabelField(strDetail);

      objLabelField5.setColor(Color.BLACK);
      objLabelField6 = new LabelField(strRemark);

      objLabelField6.setColor(Color.BLACK);
      objLabelField7 = new LabelField(strSldate);

      objLabelField7.setColor(Color.BLACK);
      objLabelField8 = new LabelField(strEmail);

      objLabelField8.setColor(Color.BLACK);
      objLabelField9 = new LabelField(strStatus);

      objLabelField9.setColor(Color.BLACK);
      objTextField = new TextField(TextField.TYPE_PLAIN, TextField.FIELD_HCENTER);
      objTextField.setText(strMob);

      //      hfm11=new VerticalFieldManager();
      //      hfm11.add(objTextField);

      hfm10 = new VerticalFieldManager(HorizontalFieldManager.USE_ALL_WIDTH | HorizontalFieldManager.USE_ALL_HEIGHT | MainScreen.HORIZONTAL_SCROLL | MainScreen.VERTICAL_SCROLL);
      hfm1 = new VerticalFieldManager(HorizontalFieldManager.FIELD_HCENTER);
      //      hfm1.add(objLabelField);
      //      hfm2=new VerticalFieldManager(HorizontalFieldManager.FIELD_HCENTER|VerticalFieldManager.VERTICAL_SCROLL);
      //      hfm2.add(objLabelField2);
      //      hfm3=new VerticalFieldManager(HorizontalFieldManager.FIELD_HCENTER|VerticalFieldManager.VERTICAL_SCROLL);
      //      hfm3.add(objLabelField3);
      //      hfm4=new VerticalFieldManager(HorizontalFieldManager.FIELD_HCENTER|VerticalFieldManager.VERTICAL_SCROLL);
      //      hfm4.add(objLabelField4);
      //      hfm5=new VerticalFieldManager(HorizontalFieldManager.FIELD_HCENTER|VerticalFieldManager.VERTICAL_SCROLL);
      //      hfm5.add(objLabelField5);
      //      hfm6=new VerticalFieldManager(HorizontalFieldManager.FIELD_HCENTER|VerticalFieldManager.VERTICAL_SCROLL);
      //      hfm6.add(objLabelField6);
      //      hfm7=new VerticalFieldManager(HorizontalFieldManager.FIELD_HCENTER|VerticalFieldManager.VERTICAL_SCROLL);
      //      hfm7.add(objLabelField7);
      //      hfm8=new VerticalFieldManager(HorizontalFieldManager.FIELD_HCENTER|VerticalFieldManager.VERTICAL_SCROLL|VerticalFieldManager.USE_ALL_HEIGHT);
      //      hfm8.add(objLabelField8);
      //      hfm9=new VerticalFieldManager(HorizontalFieldManager.FIELD_HCENTER|VerticalFieldManager.VERTICAL_SCROLL);
      //      hfm9.add(objLabelField9);

      objH_FieldManager1 = new H_FieldManager(objLabelField12, objLabelField, true);
      objH_FieldManager2 = new H_FieldManager(objLabelField13, objLabelField2, true);
      objH_FieldManager3 = new H_FieldManager(objLabelField14, objLabelField3, true);
      objH_FieldManager4 = new H_FieldManager(objLabelField15, objLabelField4, true);
      objH_FieldManager5 = new H_FieldManager(objLabelField16, objLabelField5, true);
      objH_FieldManager6 = new H_FieldManager(objLabelField17, objLabelField6, true);
      objH_FieldManager7 = new H_FieldManager(objLabelField18, objLabelField7, true);
      objH_FieldManager8 = new H_FieldManager(objLabelField19, objLabelField8, true);
      objH_FieldManager9 = new H_FieldManager(objLabelField20, objLabelField9, true);

      objManager.add(objH_FieldManager1);
      objManager.add(objH_FieldManager2);
      objManager.add(objH_FieldManager3);
      objManager.add(objH_FieldManager4);
      objManager.add(objH_FieldManager5);
      objManager.add(objH_FieldManager6);
      objManager.add(objH_FieldManager7);
      objManager.add(objH_FieldManager8);
      objManager.add(objH_FieldManager9);
      objManager.add(hfm12);
      objManager.add(hfm10);

      //     add(objTextField);
      //      this.add(mgr);
   }
} 
```

在这段代码中，我使用了几个标签，例如

```
objLabelField12=new LabelField("SRNo : "); 
```

这种类型的标签字段要水平显示，这是垂直的

```
objLabelField=new LabelField(strSerno); 
```

我想水平和垂直滚动两侧。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:54:08.320

尝试使您的标签字段可聚焦。

objLabelField = new LabelField("文本", Field.FOCUSABLE | LabelField.FIELD_HCENTER | LabelField.USE_ALL_WIDTH)

# php - php函数修改与检查

> ID：11138572
> 
> 赞同：-2
> 
> 时间：2012-06-21T12:51:01.817
> 
> 标签：php, mysql, facebook, facebook-graph-api

> **可能重复：**
> [修改 php 中的函数以获得所需的结果](https://stackoverflow.com/questions/11137456/modify-function-in-php-in-order-to-get-desired-result)

我正在做这个模块，在一些人的帮助下，她一直在进步。

我试图让 facebook 用户喜欢，但我显然不能......它让我一无所获......

你能检查一下这个函数是否有任何错误..？

谢谢

```
function _facebook_graph_friends_list() {

    global $user;
    if(!empty($user->uid)){

        $fbuid = facebook_graph_get_fbuid();
        $return = '';

        if(!empty($fbuid)){
            $facebook = facebook_client();
            $friends = $facebook->api('/me/friends');

            if(!empty($friends['data'])){
                $size = variable_get('facebook_graph_pic_size_nodes','square');
                $protocol = (isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] == 'on') ? 'https' : 'http';

                foreach($friends['data'] as $data){
                    $fbid = $data['id'];
                    $fbfriendlikes[$fbid]=$facebook->api('/'.$fbid.'/likes'); 

                    foreach($fbfriendslikes['data'] as $data){
                        $fbname = $data['name'];
                        $fbid1 = $data['id'];
                        $path = $protocol . '://graph.facebook.com/' . $fbid1 . '/picture?type=' . $size;
                        $image = theme('image', array('path' => $path, 'alt' => $fbname));
                        $return .= '<div class="fimage">'.$image.'</div>';
                        $link = '<a href="'.$protocol . '://www.facebook.com/profile.php?id='.$fbid1.'" target="_blank">'.$fbname.'</a>';
                        $return .= '<div class="flink">'.$link.'</div>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:12:31.923

这实际上可能是 facebook 的问题，而不是您的代码。您需要的可能是friends_likes 权限。此外，您的朋友可能已禁用查看他们喜欢的内容（这是一项隐私设置）。

# tfs - TFS 2010 先决条件

> ID：11138579
> 
> 赞同：0
> 
> 时间：2012-06-21T12:51:26.087
> 
> 标签：tfs

1）谁能告诉我机器上安装了哪些先决条件。

2）sqlserver 2008 企业试用版是否兼容TFS？

我尝试安装这个 sqlserver，但以异常“.net framework3.5 is required”结束。但我已经安装了 .netframework 3.5 sp1。

为此，当我在网上搜索时，许多人建议安装“windows installer 4.5”。但是当我尝试安装它时，它给出的错误是“没有足够的内存来完成这个操作”......即使我尝试通过添加名为 IRPStackSize 的注册表项来修复它，其值如 15、25、30 ......都没有工作.

请回答我由于缺少软件安装，我被困在 TFS 配置中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:58:33.230

您可以连接到：

[http://www.microsoft.com/fr-fr/download/details.aspx?id=15070](http://www.microsoft.com/fr-fr/download/details.aspx?id=15070)

首先下载iso，安装iso的时候，如果你的电脑没有安装sql server，，，iso启动安装

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:01:54.007

可以用Daemon Tools解压iso文件，必须下载，点击mount，选择iso文件。安装需要几分钟

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:54:08.863

您必须创建工作区，请按照以下步骤操作：

1.  打开团队资源管理器
2.  单击源代码管理，选择工作区的下拉列表（屏幕顶部）
3.  创建您的工作区（姓名、PC、所有者......）
4.  将 tfs 中的源代码控制与工作区同步（检查工作区是否在下拉列表中被选中）。
5.  您可以在工作区中获取最新版本

# expect - 在expect中使用if语句检查逻辑

> ID：11138583
> 
> 赞同：0
> 
> 时间：2012-06-21T12:51:44.203
> 
> 标签：expect

我有一个场景，我将连接到远程机器并在期望中执行一个命令（优先级），它会给出一个输出。我正在检查确切的模式，如果成功，我需要打开一个由上面执行的命令创建的文件。

我需要转到指定的目录并打开文件并解析我在 tcl 中使用 expect 的文件，下面提到了代码

```
#!/home/pub/bin/expect -f
spawn telnet 172.16.67.213 23 
expect "login name:"
send "administrator\r"
expect "password:"
send "Administrator1@\r"
expect "Windows NT Domain:"
send "\r"    
expect "C:\WINNT\Profiles\Administrator>"
send "\r"
expect "C:\WINNT\Profiles\Administrator>"
send "x -j Y -a run -d\r"
sleep 60
expect "ZZ"

****if {[string match *Z* $expect_out(buffer)]} {
        send "dir";} else {
    puts "Script failed";
    }**** 
```

这里脚本正在执行直到字符串匹配，成功时下一个命令发送“dir”不执行。

如果我替换如下的逻辑，我将得到 echo 语句，但如果我想在它不成功后执行其他命令，则返回。

```
**if {[string match *Z* $expect_out(buffer)]} {
        puts "Script passed";} else {
    puts "Script failed";
    }** 
```

我希望问题很清楚，我正在尝试所有方法但没有成功..

在此先感谢，卡梅什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:57:40.553

与换行符一起发送`dir`将触发命令：

```
send "dir\n" 
```

该命令现在被执行，但在后续的期望匹配之前可能看不到输出（由脚本打印到标准输出）。要立即刷新它（比如脚本调试），请使用：`set timeout 1; expect; expect *`.

# c# - c#中特殊字符的Url编码方法

> ID：11138584
> 
> 赞同：2
> 
> 时间：2012-06-21T12:51:45.097
> 
> 标签：c#, http, urlencode, vbulletin

我使用 post 方法将数据提交到并且我使用过

```
HttpUtility.UrlEncode(string data) 
```

用于数据的 URL 编码。但是对于某些特定字符串，服务器端的数据显示与我提交的不同。

前任：

```
string data = "¦=¦=¦";
data = HttpUtility.UrlEncode(data); 
```

向服务器提交数据后，它显示字符串为**Â¦=Â¦=Â¦**但原始字符串为**¦=¦=¦**。

我应该使用哪个 url 编码可以将“ **(** ”编码为**%28**，“ **)** ”编码为**%29**。我能找到这个。

我也使用了 HttpUtility.UrlEncodeUnicode ,HttpUtility.UrlPathEncode 但不起作用。哪种 url 编码适合这种类型的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:19:01.290

使用 HttpUtility.UrlDecode(data) 将其取回为“¦=¦=¦”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:13:40.677

在您的代码示例中，您将 ASCII 用于字符“¦”，这不是有效的 ASCII 字符。使用 Unicode，它可能会起作用。

```
System.Text.UnicodeEncoding uni = new UnicodeEncoding();
byteArray = uni.GetBytes(data); 
```

# stored-procedures - 如何将存储过程的列映射到实体框架 4.3 中的 POCO 类

> ID：11138589
> 
> 赞同：0
> 
> 时间：2012-06-21T12:51:58.543
> 
> 标签：stored-procedures, ef-code-first, entity-framework-4.3

我将实体框架 CodeFirst 与现有数据库一起使用。我有一个现有的存储过程，它从`Customer_Info`具有 2 列的表中返回数据`Customer_ID, Customer_Name`。我为这个实体创建了一个名为`Customer`2 Properties的类`CustomerID, CustomerName`。现在我试图通过这个存储过程获取数据。我在我的`OnModelCreating`方法中定义了这样的映射。

```
modelBuilder.Entity<Customer>().ToTable("Customer_Info");
modelBuilder.Entity<Customer>().
                 Property(x => x.CustomerID).HasColumnName("Customer_ID"); 
```

这就是我试图从存储的过程中获取数据并将数据加载到实体中的方式。

```
public IList<Customer> GetCustomers()
{
  return context.Database.SqlQuery<Customer>("exec GetCustomers @p0","NY")
                                                                       .ToList();
} 
```

但它没有用！这样说给我一个错误

> 数据读取器与指定的“客户”不兼容。类型的成员“CustomerID”在数据读取器中没有同名的对应列。

我该如何解决 ？如果我直接从表中读取，我的属性映射有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:26:41.453

修改您的存储过程以使用类似的东西

```
SELECT Customer_ID AS CustomerID, Customer_Info AS CustomerName ... 
```

或将您的`Customer`类中的属性修改为`Customer_ID`and `Customer_Info`。您首先使用代码，它不支持存储过程映射。它使用简单的内置映射，其中属性名称与其名称匹配的列名称。

如果要映射存储过程结果集，必须先放弃代码并使用 EDMX。

# php - 如何修复或优化代码以忽略 PHP 中的内存大小错误

> ID：11138593
> 
> 赞同：0
> 
> 时间：2012-06-21T12:52:10.827
> 
> 标签：php

我用 simple_html_dom 库编写了一个图像爬虫，我使用这段代码来获取网站中的所有图像；

```
include 'simple_html_dom.php';
$img_array = array();
if (isset($_POST['url'])) {
    $url = $_POST['url'];
    $html = file_get_html($url);
    echo $html->getElementByTagName('title')->innertext();
    foreach ($html->find('a') as $a) {

        if (strpos($a->href, $url) !== FALSE) // only images from this site
        {
            //
            //    find_images($a->href);
            $imgs = file_get_html($a->href);
            foreach ($imgs->find('img') as $img) {
                if(!in_array($img->src, $img_array))
                {
                    echo '<img src="' .$img->src. '" class="thumb">';
                    $img_array[] = $img->src;
                }
            }
            echo '<hr>';
        }
    }
} 
```

但是当我执行这段代码时，我得到了`Fatal error: Allowed memory size of 209715200 bytes exhausted (tried to allocate 71 bytes) in /home/iphotosh/public_html/test/simple_html_dom.php on line 122`

测试和演示：[test.iphotoshop.ir](http://test.iphotoshop.ir/)

如何修复此错误或如何优化此代码以从网站获取所有图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:56:16.577

您是否尝试过使用 ini_set() 增加内存：

```
ini_set("memory_limit","256M"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:22:12.167

您应该同时做两件事： 将内存限制设置得非常高：

在 php.ini 中：

```
memory_limit = 512M 
```

或/和在 php 文件中：

```
ini_set("memory_limit","512M"); 
```

同时，您应该删除大变量以释放一些内存，通常通过：

```
unset($var); 
```

顺便说一句，您可以通过以下方式检查已用内存量

```
echo memory_get_usage(); 
```

我会尝试运行演示并检查代码的每一行中的内存使用情况，这样你就可以看到这里发生了什么，以及从哪里开始修复

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:01:40.950

好像你试图分配太多的内存。您可以尝试增加 php.ini 中的可用内存（查找`memory_limit=`指令）。然而，如果你分配了很多，你仍然可以超过它。您可以动态检查可用的内容和使用的数量：

```
function get_available_memory() {
    $ini_mem = ini_get('memory_limit');
    $m = substr($ini_mem, strlen($ini_mem) - 1;
    if($m == 'k' || $m == 'K') {
        $max_mem = 1024 * substr($ini_mem, 0, strlen($ini_mem) - 1);
    }
    elseif($m == 'm' || $m == 'M') {
        $max_mem = 1024 * 1024 * substr($ini_mem, 0, strlen($ini_mem) - 1);
    }
    elseif($m == 'g' || $m == 'M') {
        $max_mem = 1024 * 1024 * 1024 * substr($ini_mem, 0, strlen($ini_mem) - 1);
    }
    else {
        $max_mem = $ini_mem;
    }

    $used_mem = memory_get_usage(true);

    return $max_mem - $used_mem;
} 
```

现在你可以做

```
$available_memory = get_available_memory(); 
```

并且，如果没有足够的可用空间，请不要尝试分配它并优雅地关闭您的进程。

# php - 设置默认控制器或从 url zend 框架中排除某些内容

> ID：11138594
> 
> 赞同：2
> 
> 时间：2012-06-21T12:52:23.257
> 
> 标签：php, zend-framework, frameworks

我把我能找到的关于 Zend_Controller_Router_Route 的所有东西都涂红了，但我无法找到如何设置默认控制器或从 url 中排除某些内容，例如：

www.example.com/test/controler/action

我怎么能忽略“测试”？

现在我总是将“测试”作为默认控制器..

谢谢，文齐斯拉夫·安杰洛夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:17:13.917

这可以在 /public 子目录的 .htaccess 中完成。

像这样添加另一个 RewriteCond：

```
RewriteCond %{REQUEST_URI} !^/test* [OR] 
```

这应该解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:31:42.523

在您的示例中，如果您使用默认路由，则url *'test'将是模块。*

```
www.example.com/test/controler/action //module = test, controller = controler, action = action 
```

您可以使用以下行在 application.ini 中为所有这三个指定默认值：

```
 resources.frontController.defaultcontrollername = 'index'
 resources.frontController.defaultaction = 'index'
 resources.frontController.defaultmodule = 'default' 
```

您可能感兴趣的另一个可用设置：

```
resources.frontController.useDefaultControllerAlways = false 
```

**[编辑]** 如果您确实需要从路由/请求中过滤字符串。您可能可以通过路线来做到这一点，但我对路线的了解不足以帮助您解决问题。另一个选择（除了 .htaccess）是测试和重定向。也许是这样的：

```
public function preDispatch() {
       $request = $this->getRequest();
       if ($request->getController() = 'test' || $request->getAction() = 'test' || $request->getModule() = 'test' ) {
           $this->_redirect('url');
      }
    } 
```

这可以放在每个控制器中，但作为插件可能会更好。当然，您可以使用 switch() 而不是讨厌的 if() 语句。

希望其中一位路由器专家能提供更好的解决方案。

祝你好运...

# mysql - 单个 SQL 选择查询与单个大 SQLselect 查询：什么更好？为什么？

> ID：11138596
> 
> 赞同：-2
> 
> 时间：2012-06-21T12:52:37.047
> 
> 标签：mysql, sql, query-optimization, whmcs

我有这三个单独的查询，这是它们的伪版本：

```
SELECT packageid from tblhosting where userid=1234 AND id=4351
SELECT id FROM tblcustomfields WHERE relid =tblhosting.packageid AND fieldname ='foo'
SELECT value FROM  `tblcustomfieldsvalues` WHERE  `fieldid` =tblcustomfields.id AND relid=tblhosting.id 
```

目前，这些是单独的查询，它们显示为每个查询的子查询。将它们组合成单个查询是否有意义？如果是，那么为什么以及如何将其结合起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:30:04.630

抱歉有点密集，但您的问题似乎没有使用子查询。

如果真正的代码使用子查询，沿着

```
SELECT value 
FROM  `tblcustomfieldsvalues` 
WHERE  `fieldid` = 
   (SELECT id 
   FROM tblcustomfields 
   WHERE relid =(
     SELECT packageid 
     from tblhosting 
     where userid=1234 
     AND id=4351)
 AND fieldname ='foo')
AND relid=tblhosting.id 
```

那么您只需将其与@Chopin 的版本进行比较，就可以看到从可读性的角度来看，连接要好得多。

连接也是执行此操作的惯用方式——大多数 SQL 开发人员在研究基于子查询的方法时会摸不着头脑；这使得它的可维护性和可扩展性降低。

在性能方面，我猜查询优化器会认识到它们是等价的。“更好”的版本可能没有任何改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:16:14.603

查询可能是这样的：

```
SELECT value FROM tblcustomfieldsvalues
INNER JOIN tblcustomfields ON tblcustomfields.id = tblcustomfieldsvalues.fieldid
INNER JOIN tblhosting ON tblhosting.packageid = tblcustomfields.relid
WHERE tblcustomfields.fieldname = 'foo' AND tblhosting.userid = 1234 AND tblhosting.id = 4351 
```

在这里你加入`tblcustomfieldsvalues`，`tblcustomfields`最后加入`tblhosting`。查看`ON`条件以确保它们正确连接。

最后，将该`WHERE`子句应用于您要约束的属性。

希望这可以帮助！

# javascript - 如何使用 javascript 事件避免文本字段中的无效输入？

> ID：11138598
> 
> 赞同：2
> 
> 时间：2012-06-21T12:52:40.290
> 
> 标签：javascript, jquery, events

我无法正确处理**input type="text"**中的某些事件。我只需要一个过滤器来只接受 [^0-9] 字符。

我需要以下帮助：

*   不接受来自**Control + Paste**命令的任何内容。从 Control+V（键盘）或右键单击鼠标 + 粘贴选项。

到目前为止我尝试了什么：

*   按键事件我可以很好地处理来自键盘的任何输入。（任何不在 [^0-9] 中的字符和 enter、backspace、home、end 等都将被忽略）。

*   keyup 我奇怪地处理 Control + Paste（键盘）事件。我粘贴了一些字符串，粘贴字符串后，我裁剪了所有非白名单字符。PS： **但这**不适用于右键单击+粘贴（鼠标），也不是

*   onChange 垃圾字符串保持可见，直到用户模糊该字段。

我想要的是：

*   复制示例字符串“123.321.456-78”并粘贴“12332145678”或“abc!2¨#7”并粘贴“27”。

*   不要以任何可能的方式接受任何非白名单字符。（即使使用 $('#field').val("trash input 123")。

从上述所有问题中，我可以很好地或奇怪地（又名：keuup）处理输入，但是右键单击 + 粘贴（鼠标）永远不会触发任何事件，所以我可以进行正确的处理。

我想过做间隔检查，但这太丑陋了。

编辑：

下面的代码

```
function soNumeroInteiro_keypressHandler(event)
{
    var code = event.keyCode || event.which;

    switch(code)
    {
        case  8: // backspace
        case 37: // left
        case 39: // right
        case  9: // tab
        case 46: // delete
        case 35: // end
        case 36: // home
            return true;
        break; 

        case  86: // control + A
        case  97: // control + V
        case 120: // control + X
            if (event.ctrlKey) {
                return true;                
            }
        break;
    }

    var tecla = String.fromCharCode(code);

    return tecla.match(/^\d$/) != null;
}

function soNumeroInteiro_keyupHandler(event)
{
    event.currentTarget.value = event.currentTarget.value.replace(/[^0-9]/g, '');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:03:09.410

鼠标点击事件请看这个问题： [How to区分左右鼠标点击与jQuery](https://stackoverflow.com/questions/1206203/how-to-distinguish-between-left-and-right-mouse-click-with-jquery)

现在您有了鼠标单击事件，即使是右键单击，您也可以轮询内容一小段时间（2 秒？）以检测更改并处理内容验证。这样，您可以根据您的业务逻辑需求选择接受有效或拒绝内容。

编辑：只是添加一个注释， onpaste 事件将无法正常工作，因为它会在粘贴内容之前触发（至少在某些测试用例中）。

例子：

```
$('#pasteyMe').on('paste', function() {
    $(this).val();// gets the content prior to the paste event
}); 
```

要解决此问题，您可以设置另一个事件观察器，例如更改，然后触发它：

```
$('#pasteyMe').on('click focus blur paste', function() {
    var me = this;
    window.setTimeout(function() {
       $(me).trigger('change');
    }, 1);
});

$('#pasteyMe').change(function() {
    $('#resulty').text($(this).val());
}); 
```

在此处查看此操作：http: [//jsfiddle.net/MarkSchultheiss/kQxAj/](http://jsfiddle.net/MarkSchultheiss/kQxAj/)

# c++ - 使用 code::blocks 制作 .so 文件

> ID：11138605
> 
> 赞同：-1
> 
> 时间：2012-06-21T12:53:11.007
> 
> 标签：c++, linux, codeblocks, shared-libraries

我如何制作`.so`文件`Code::Blocks`？我`Code::Blocks`为linux安装的。我一直在用它来制作一个`.dll`Windows。

*项目选择中的一个镜头：*

![在此处输入图像描述](../Images/825b497051c6048dc89e437974d0b5df.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:56:51.573

您想创建一个共享库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:10:18.887

你想要`Shared Library`。静态库是包含在它喜欢的二进制文件的可执行文件中的库。尽管它们更易于使用，但它们增加了程序大小和更新难度。当您链接共享库时，二进制文件中包含的所有内容都是对库名称的引用，并且库文件通常位于以下 lib 文件夹之一中：/usr/lib、/lib、/usr/local /lib、/opt/lib 等

值得一提的是，共享库在运行时需要以下三件事之一：

*   包含此选项的编译命令：`-Wl,-rpath,/path/to/dir/with/shared/lib/file`
*   或者，您必须将`.so`文件放在`lib`s 之一（上面列出）
*   或者，将包含库文件的目录添加到环境变量中，`LD_LIBRARY_PATH`

# windows - 循环遍历非整数值

> ID：11138608
> 
> 赞同：2
> 
> 时间：2012-06-21T12:53:22.067
> 
> 标签：windows, batch-file

如何使用批处理文件循环非整数值？

我正在尝试使用 0 和 1 之间的不同参数多次运行我的应用程序，如下所示：

```
!! DO NOT RUN THIS !!
set application=C:\path\to\my\application.exe

for /L %%p in (0, 0.05, 1) do (
  md %%p
  cd %%p
  START %application% %%p
  cd ..
) 
```

但是运行上面的代码会让我进入一个无限循环，我猜是因为`for /L`正在寻找整数参数并且 0.05 被转换为 0。

是否可以使用批处理文件遍历非整数值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:05:55.313

不，这是不可能的，因为 cmd.exe 无法以任何方式处理实际值。

但是您可以计算整数并稍后计算实际值。

```
setlocal EnableDelayedExpansion
for /L %%p in (0, 5, 100) do (
  set "value=00%%p"
  set "value=!value:~-3!"
  set "prefix=!value:~0,1!"
  set "postfix=!value:~-2!"
  set "num=!prefix!.!postfix!"
  md !num!
  pushd !num!
  START %application% !num!
  popd
) 
```

代码计数现在从 0 到 100。
每个数字都将加上前缀，`00`以确保每个数字至少有三个数字（如 2->002）。
然后我只取最后三个字符，所以所有数字都有相同的长度。

```
5->005->005
15->0015->015 
```

然后代码将数字分成两部分

```
015->prefix=0 postfix=15 
```

然后`set "num=!prefix!.!postfix!"`将点放在两个部分之间

# iphone - Apple 推送通知服务是针对特定国家/地区的吗？

> ID：11138611
> 
> 赞同：3
> 
> 时间：2012-06-21T12:53:28.047
> 
> 标签：iphone, ios, apple-push-notifications

在我的应用程序中，我已经实现了 APN。目前，我正在使用来自印度的应用程序并在英国发送推送通知，有人正在使用我的应用程序，但问题是他没有收到通知。

如果我向在印度的人发送推送通知，那么他正在接收它。

我想知道，APNs 是特定于国家/地区的服务吗，如果不是特定于国家/地区的，那么我应该怎么做才能克服这个问题。非常感谢 ！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:23:34.987

不保证会发送推送通知。但是，如果您发送推送通知的服务似乎正在运行，那么您可以在以下几行中进行调试：

1.  用户可能为您的应用禁用了推送通知
2.  令牌可能无效
3.  用户可能未连接

文档摘录是***“请记住，通知的传递是‘尽力而为’，不能保证。*** ”

# smarty - Smarty 在 foreach 循环中分配错误

> ID：11138620
> 
> 赞同：0
> 
> 时间：2012-06-21T12:53:56.107
> 
> 标签：smarty, smarty2

好的，这让我很头疼，因为它没有任何意义。我有一个从 php 分配的数组，其中包含 15 个字符串，如下所示。

```
Array (
     [0] => 001
     [1] => 002
     [2] => 003
     [3] => 004
     [4] => 005
     [5] => 006
     [6] => 007
     [7] => 008
     [8] => 009
     [9] => 010
     [10] => 011
     [11] => 012
     [12] => 013
     [13] => 014
     [14] => 015 
) 
```

在我的模板中，我试图将填充的数字分配给一个字符串并输出该值。除非它不能 100% 工作。在循环中的第一次分配中，该值不存在，但在随后的分配中，它使用**前一个循环中的值 value**。

这是代码

```
{foreach from=$faq item="qNumber" key="qKey"}
    {$qNumber} - {$qKey} -
    {assign var="qQuestion" value="help_faqQuestion$qNumber"}
    {$qQuestion}
    <br />
{/foreach} 
```

我的输出如下所示：

```
001 - 0 - help_faqQuestion 
002 - 1 - help_faqQuestion001 
003 - 2 - help_faqQuestion002 
004 - 3 - help_faqQuestion003 
005 - 4 - help_faqQuestion004 
006 - 5 - help_faqQuestion005 
007 - 6 - help_faqQuestion006 
008 - 7 - help_faqQuestion007 
009 - 8 - help_faqQuestion008 
010 - 9 - help_faqQuestion009 
011 - 10 - help_faqQuestion010 
012 - 11 - help_faqQuestion011 
013 - 12 - help_faqQuestion012 
014 - 13 - help_faqQuestion013 
015 - 14 - help_faqQuestion014 
```

有谁知道为什么会发生这种情况，因为我没有想法。

**更新**

出于某种任意原因，这可以工作并产生正确的输出，但我不明白为什么我不能在一个分配行中执行此操作。

```
{foreach from=$faq key="qKey" item="qNumber" }
    {assign var="num" value=$qNumber}
    {assign var="qQuestion" value="help_faqQuestion$num"}
    <li>{$qNumber} - {$qKey} - {$qQuestion}</li>
{/foreach} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:25:30.117

我希望这个**编辑**有效

```
 {foreach from=$yourarray key=yourkey item=yourvalue}
       {assign var="qQuestion" value="help_faqQuestion-$yourvalue"}                         
       <li>key :-{$yourkey} -- value:-{$yourvalue} = {$qQuestion}</li>
    {/foreach} 
```

输出如下：

```
key :-0 -- value:-1 = help_faqQuestion-1
key :-1 -- value:-2 = help_faqQuestion-2
key :-2 -- value:-3 = help_faqQuestion-3
key :-3 -- value:-4 = help_faqQuestion-4
key :-4 -- value:-5 = help_faqQuestion-5
key :-5 -- value:-6 = help_faqQuestion-6
key :-6 -- value:-7 = help_faqQuestion-7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:34:56.247

改变

```
{assign var="qQuestion" value="help_faqQuestion$qNumber"} 
```

至

```
{assign var="qQuestion" value="help_faqQuestion`$qNumber`"} 
```

你很好。

# php - 每 2 小时更新一次浏览器（如果有连接）？

> ID：11138622
> 
> 赞同：0
> 
> 时间：2012-06-21T12:54:02.023
> 
> 标签：php, flash, connection

我正在试验一种数字标牌解决方案，它只是在 Firefox 中重复查看 Flash 播放器（安装了 R-kiosk）

现在我运行一个让播放器每 2 小时更新一次（我使用远程更新）

问题是有时路由器会失去连接。浏览器只说“您的互联网连接丢失了......”或其他什么......是否有可能： **检查是否有互联网连接（每 2 小时）** ，如果有，请更新。否则不要。我使用 php。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:56:56.317

在后台使用 ajax 请求来保持连接或测试：

```
$.ajax({
    statusCode: {
        404: function() {
            alert("page not found");
        }
    }
}); 
```

您可以使用这部分代码来补充您自己的 ajax 状态检测器。只需找出连接丢失时获得的代码并从那里构建...

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# java - 使用 CDI 的受限泛型

> ID：11138625
> 
> 赞同：10
> 
> 时间：2012-06-21T12:54:05.613
> 
> 标签：java, generics, dependency-injection, cdi

JSR-299 规范在 §3.1 中声明：

> 如果托管 bean 类是泛型类型，则它必须具有 @Dependent 范围。如果带有参数化 bean 类的托管 bean 声明了除 @Dependent 之外的任何范围，则容器会自动检测到问题并将其视为定义错误。

实际上意味着你不能这样做：

```
@Named
@SessionScoped or @RequestScoped or similar
public class MyProducer<T> {...} 
```

这个决定的技术原因是什么？

它会在即将发布的 CDI 版本中得到补救吗？

是否有处理/解决此问题的最佳实践？

谢谢

**编辑**- 我经常使用的一种解决方法是将通用 POJO-bean 注入具有所需范围的 bean 中。经常，但并非总是如此。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-21T15:37:45.527

这是一个通用的、非依赖的 bean 类：

```
@ApplicationScoped
public class FavouriteChooser<T> {
    public T getFavourite() {
        // ...
    }
} 
```

应用程序中有多少这个 bean 的实例？

这是一个注射部位：

```
@Inject
private FavouriteChooser<String> favouriteWord; 
```

这是另一个：

```
@Inject
private FavouriteChooser<Integer> favouriteNumber; 
```

你想改变你的答案吗？:D

哦，还有一个：

```
@Inject
private FavouriteChooser<CharSequence> favouriteLetters; 
```

编辑。如果您想要一个解决方案，我建议您将泛型类抽象化，并添加绑定类型的具体子类。所以：

```
public abstract class MyProducer<T> {...}

@Named
@SessionScoped
public class MyStringProducer extends MyProducer<String> {}

@Named
@SessionScoped
public class MyIntegerProducer extends MyProducer<Integer> {} 
```

它是样板文件，但每种类型只有三行。请记住，这将为每种类型的每个会话提供一个实例，您可能不希望这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T14:42:18.490

所有非依赖范围的 bean 都必须被代理 - AFAIK 这对于泛型类型是不可能的。

更新：

我希望能够更详细地解释这一点，但我不是;-) Weld 使用[javassist](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/)，并且他们声明[代理泛型类型原则上是可能的](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/tutorial/tutorial3.html#generics)- 尽管顶级 API 不直接支持。但我们谈论的是规范，而不是 Weld 的实现......

也许其他人可以填补空白？

# c++ - 错误 1400 无效的窗口句柄

> ID：11138626
> 
> 赞同：0
> 
> 时间：2012-06-21T12:54:09.063
> 
> 标签：c++

我有代码：

```
......
    g_hWnd = CreateWindow( L"Urok6WindowClass", L"TitleWindow", WS_OVERLAPPEDWINDOW,
                           CW_USEDEFAULT, CW_USEDEFAULT, rc.right - rc.left, rc.bottom - rc.top, NULL, NULL, hInstance,
                           NULL );
    if( !g_hWnd )
        return E_FAIL;

    ShowWindow(g_hWnd, nCmdShow ); 
```

一切正常。但如果我添加：

```
 LPTSTR tilte_old= L"Old title";
    int gettus = GetWindowText(g_hWnd, tilte_old, 100);
    DWORD error = GetLastError();
    WCHAR szTest[10];
    swprintf_s(szTest, 10, L"%d", error); 
    MessageBox(NULL, szTest, L"TEST2", MB_OK); 
```

消息框 >> 1400

获取>>''

为什么会这样？为什么windows句柄无效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:00:06.130

的[第二个参数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633520.aspx)是`GetWindowText`一个输出参数：

> lpString [out] 类型：LPTSTR
> 
> 将接收文本的缓冲区。如果字符串与缓冲区一样长或更长，则字符串将被截断并以空字符终止。

所以你需要提供一个要填充的缓冲区，而不是一个指向常量字符串的指针（第三个参数表示缓冲区的最大大小以避免溢出）

尝试：

```
const size_t BUFF_SIZE = 100;
TCHAR title_old[BUFF_SIZE];
int gettus = GetWindowText(g_hWnd, title_old, BUFF_SIZE); 
```

此外，您只需要调用`GetLastError`if `gettus`is 0 （`GetWindowText()`失败）

# android - 如何获取传入 xmpp 消息的时间戳？

> ID：11138627
> 
> 赞同：18
> 
> 时间：2012-06-21T12:54:12.470
> 
> 标签：android, xmpp, smack, asmack

我正在使用 aSmack 库与远程 xmpp 服务器进行通信。我能够发送/接收消息，但我想获取传入消息的时间戳。

请你告诉我，这可能吗？因为我找不到关于这个问题的任何信息。

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T13:32:07.470

由于规范，XMPP 消息需要时间属性：

[http://xmpp.org/extensions/xep-0203.html#protocol](http://xmpp.org/extensions/xep-0203.html#protocol)

检查`<delay`项目`<message`：

```
<delay xmlns='urn:xmpp:delay'
 from='capulet.com'
 stamp='2002-09-10T23:08:25Z'>
Offline Storage
</delay> 
```

但是获得它看起来有点棘手。一旦 aSmack 用一些被替换的东西重新编译 Smack，所以试着像这里一样得到它：

[http://edwin.baculsoft.com/2011/06/how-to-get-offline-messages-timestamp-on-openfire/](http://edwin.baculsoft.com/2011/06/how-to-get-offline-messages-timestamp-on-openfire/)

```
DelayInformation inf = null;
try {
    inf = (DelayInformation)packet.getExtension("x","jabber:x:delay");
} catch (Exception e) {
    log.error(e);
}
// get offline message timestamp
if(inf!=null)
    Date date = inf.getStamp(); 
```

**您可能需要检查服务器发送的消息作为扩展值并替换`"jabber:x:delay"`为`'urn:xmpp:delay'`XMPP 规范示例中所示的内容。**

但不确定它是否有效。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-21T15:44:20.490

时间戳不是常规消息的一部分。因此，您无法提取它。

有一个规范（如@Dmitry 所述），但这仅适用于特定类型的消息。通常那些不是实时的，例如离线和在创建新订阅时发布节点的最后一条 pubsub 消息。这些消息具有内置的固有延迟。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-25T20:15:50.090

尽管部分混合了这里已经存在的其他答案，但我将按如下方式提供答案......

XMPP 是“实时的”......虽然这个术语对不同的人可能意味着很多不同的东西，但一般来说，您可以放心地假设您（几乎）在消息发送后立即收到 - 所有 XMPP 软件都是围绕实现而设计的这个目标。

但是，没有关于端到端延迟的实际保证。在一般实践中，您通常总是会在发送者发送消息后不到一秒的时间内收到消息，尽管网络条件会影响这一点。

在某些情况下，消息会暂时延迟，例如需要建立新的服务器到服务器连接时。这通常可能需要几秒钟，这又取决于网络条件和服务器之间使用的身份验证方法。

如果收件人离线，邮件也可能会被搁置 - 收件人的服务器可能会将邮件保存在“离线邮件”存储中，直到当收件人在线时它可以传递它。

由于 XMPP 消息的一般即时传递，时间戳通常不包含在消息本身中，因为该信息是无用的（并且假设时钟都是正确的）。

但是，在消息被故意延迟的情况下，例如在上面的示例中，延迟消息的实体可以将标签插入到消息中，指示消息的原始时间。这在[XEP-0203: Delayed Delivery](http://xmpp.org/extensions/xep-0203.html)中有详细说明。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-11T09:38:40.613

它也适用于 4.1.9

```
延迟信息 inf = null;
                    inf = (DelayInformation)message.getExtension(DelayInformation.ELEMENT,DelayInformation.NAMESPACE);
                    如果（inf！= null）{
                        日期日期 = inf.getStamp();
                        System.out.println("日期："+日期);
                    }

```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-06T14:29:48.747

使用 smack 4.2.0-rc2-SNAPSHOT 版本很容易访问，

```
DelayInformation delayInformation = forwarded.getDelayInformation();
delayInformation.getStamp().getTime(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-05T18:13:49.193

对于离线消息：您将收到如下消息：

```
<message xml:lang='en' to='<TO>' from='<FROM>' type='chat' id='3SE7n-39'><delay xmlns='urn:xmpp:delay' from='lakshitnagar.com' stamp='2020-09-05T18:01:01.854690Z'>Offline Storage</delay><offline xmlns='http://jabber.org/protocol/offline'><item node='335'/></offline><body>Hello</body></message> 
```

您可以解析此 XML 以获取***delay标记下的******stamp***属性。这将为您提供从发件人发送它的时间。

 **对于 MAM 存档消息：您将收到以下内容：

```
<message xmlns='jabber:client' to='<TO>' from='<FROM>' id='NzVV5-84' xml:lang='en' type='chat'><archived xmlns='urn:xmpp:mam:tmp' xmlns:stream='http://etherx.jabber.org/streams' by='lakshitnagar@lakshitnagar.com' id='1599328757912003'></archived><body>hello</body></message> 
```

您可以解析此 XML 以获取***归档***标记下的***id***属性。这将为您提供从发件人发送此消息时的纪元时间（以微秒为单位）。**

# .htaccess - htaccess 从 url 中删除最后一个字符

> ID：11138630
> 
> 赞同：0
> 
> 时间：2012-06-21T12:54:35.933
> 
> 标签：.htaccess

h3llo，我的一个 URL 的末尾有一个 &，我想使用 .htaccess 文件中的重写器将其删除。我已经搜索了一段时间，虽然我找到了很多信息，但我似乎无法让它发挥作用。这是我尝试过的：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} (.*)&$
RewriteRule ^(&)?$ /$1 [L] 
```

我正在使用 CodeIgniter 构建我的网站，以防万一。我也确定 mod_rewrite 已打开。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:04:41.777

尝试这个：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule (.*)&$ $1 [L,QSA] 
```

# java - 在 Eclipse 中编译为 JAR（存在 Git 存储库时）

> ID：11138640
> 
> 赞同：0
> 
> 时间：2012-06-21T12:54:51.947
> 
> 标签：java, eclipse, git, jar

我进行了搜索，发现了一些关于在 Eclipse 中编译为 JAR 的内容，但似乎没有提到我的问题。

我决定要使用 GiT 对源代码进行版本控制，因此在我的项目工作区（在 src 目录中）我初始化了一个 GiT 存储库。现在，GiT 存储库创建了一个名为“/.git”的隐藏文件夹，该文件夹位于存储库文件夹中（在我的例子中，同样是“src”）。现在，当我尝试导出到 JAR 时，它似乎只是从“src”目录中获取所有资源（以及项目工作区中的所有其他文件），并在编译时出错。

我可以轻松地剪切文件，编译成 JAR，然后将它们粘贴回那里，但我想要一些不那么生硬和更流畅的东西。

有任何想法吗？

提前感谢您的所有回复，

-M

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:00:24.040

`src`很简单，在文件夹外建一个git仓库

**或者**

使用 Maven 并告诉 jar 插件（用于将`.class`文件和其他资源打包到 a`.jar`中）排除该`.git`文件夹。链接到[排除选项](http://maven.apache.org/plugins/maven-jar-plugin/jar-mojo.html#excludes)。

# c#-4.0 - 在 C# 中通过 FTP 打开和读取 MS Word 文档

> ID：11138645
> 
> 赞同：0
> 
> 时间：2012-06-21T12:55:08.243
> 
> 标签：c#-4.0, ms-office

我需要知道一种使用这两个命名空间从 FTP 打开和读取 word 文档的方法。

```
using Microsoft.Office.Interop.Word;
using Microsoft.Office.Core; 
```

我知道如何编写代码以从本地计算机打开和读取 WORD 文档，但我需要编写一个代码，以便我可以连接到 FTP 并使用上述命名空间从 FTP 打开和读取 WORD 文档

我能怎么做 ？帮助

# jasper-reports - 如何将 iReport 中正在迭代的当前元素传递给子报表？

> ID：11138650
> 
> 赞同：1
> 
> 时间：2012-06-21T12:55:24.000
> 
> 标签：jasper-reports, ireport

我有一份报告和一份子报告。

**如何将主报告中正在“迭代”的当前元素的信息传递给我的子报告，以便它填充我的子报告的查询？**

*例子：*

*我的问题是拍卖。拍卖有一组产品。这些产品将填充主报告。但是一个产品有另一个我想要的信息，即公司（购买它的公司）。*

*所以我想做的是：*

*我的主报告将有一个查询，从给定的拍卖中选择产品。该报告必须有一个包含有关每个产品的其他信息的子报告。如何将当前产品的 ID 提供给子报表以便填充？*

*-> 主报告：从拍卖中选择产品。（工作正常^^）*

*-> 子报告：对于给定的产品（由主报告传递），创建一个报告。*

**提前谢谢=D**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:22:51.487

我找到了这样做的方法（相当逻辑）..

只需将正在使用的数据源的字段传递给子报表。因此，当它在 Detail 字段中迭代时，它将获取查询中每个元素的值。

# android - 在App购买响应中哪个购买时间，将此时间戳值转换为日期格式？

> ID：11138654
> 
> 赞同：4
> 
> 时间：2012-06-21T12:55:36.620
> 
> 标签：android

应用内购买响应，作为购买时间，如何将此时间戳转换为日期格式，我面临的问题是时间戳的值超出了长数据类型限制？请解释在这种情况下如何从时间戳中找到日期？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T13:52:41.913

您正在尝试使用不正确的格式字符串“MMddyyHHmmss”解析带有 SimpleDateFormat 的时间戳。返回的时间戳值以“自纪元（1970 年 1 月 1 日）以来的毫秒数”表示。将字符串解析为其 long 值并直接从中创建一个 Date 对象：

```
Date date = new Date(Long.parseLong(timestampString)); 
```

# google-app-engine - 如何将 Google App Engine 应用程序帐单转移到不同的 Google Checkout（电子钱包）帐户？

> ID：11138662
> 
> 赞同：5
> 
> 时间：2012-06-21T12:55:58.790
> 
> 标签：google-app-engine

我的公司有一个托管在 Google App Engine 上的应用程序，当我们无法使用 Google Apps 为您的域帐户设置 Google Checkout 帐户时，我已为此启用了结算功能。

所以我所做的就是将公司的信用卡添加到我的个人 Google Checkout 帐户中，并使用我的个人 Checkout 帐户来支付 GAE 应用程序的每周费用。

现在可以使用域帐户设置 Google Checkout（又名 Google Wallet），我想将我公司的 GAE 应用计费转移到我使用公司的 Google App 域帐户创建的 Wallet/Checkout 帐户。

*但是，在我的应用程序管理控制台的计费设置*部分中，我没有看到任何明显的方法来执行此操作，并且文档仅提到如何将计费责任转移给其他人。

有人知道怎么做这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T13:19:45.963

您必须使用您想成为计费管理员的帐户登录，然后转到`Billing Settings`并`Admin Console`单击`Take Over Billing`。这是一个屏幕截图：

![接管谷歌应用引擎上的计费](../Images/46a6530b7d86522d7ae2297cfb7c6ced.png)

# javascript - JavaScript 字符串出现时的颜色

> ID：11138663
> 
> 赞同：0
> 
> 时间：2012-06-21T12:56:00.903
> 
> 标签：javascript, database, string, colors

我想知道是否有任何 JavaScript 函数可用于更改文本框中某些字符串的字体颜色。

假设我创建了一个文本框，每次出现 hello 字符串时，字体颜色都会变为蓝色。

是否有任何简单的方法可以创建字符串数据库以便发生此事件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:42:15.830

这是一项非常重要的任务，因为 a 中的文本`textarea`无法直接格式化。我会考虑使用一个`div`或其他一些适用的标签，并使用[Content Editable](https://developer.mozilla.org/en/HTML/Content_Editable)属性。这样用户可以编辑文本，您可以控制格式。在最简单的级别上，您可以聆听按键并使用正则表达式或`replace`方法突出显示字典中的所有单词。

这是一个开始，如果这是你想要的，你需要充实它可能不区分大小写，并跟踪插入符号的位置，这是一项更复杂的任务：

[http://jsfiddle.net/VJQHD/](http://jsfiddle.net/VJQHD/)

您可以在这里查看类似的问题：[Get caret (cursor) position in contentEditable area contains HTML content](https://stackoverflow.com/questions/4767848/get-caret-cursor-position-in-contenteditable-area-containing-html-content/4770562#4770562)

# java - 如何防止 JList 在单元格范围之外进行选择？

> ID：11138665
> 
> 赞同：10
> 
> 时间：2012-06-21T12:56:15.393
> 
> 标签：java, swing, jlist

*“当用户单击列表中的最后一个元素时，有什么方法可以防止 JList 选择最后一个元素？”*

[这是有人在这里](http://objectmix.com/java/72850-jlist-selection-outside-cell-bounds.html)问的问题，我也有同样的问题。那家伙找到了一个马马虎虎的解决方案（通过覆盖 processMouseEvent() ），但我想知道是否有更好/更优雅的方法来做到这一点。

[编辑]

好的，更详细的。如果您有一个 JList 并且有一些空间未被任何单元格/元素占用，并且您单击该空间，则 JList 中的最后一个元素被选中。

对于一个真实的例子，试试这个[JList Swing 教程例子](http://docs.oracle.com/javase/tutorialJWS/uiswing/components/ex6/ListDialogRunner.jnlp)，**点击空白处**，看到 Rollo 被选中。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-21T13:19:44.020

请参阅[https://forums.oracle.com/forums/thread.jspa?threadID=2206996](https://forums.oracle.com/forums/thread.jspa?threadID=2206996)

```
import java.awt.EventQueue;
import java.awt.Point;
import java.awt.Toolkit;
import java.awt.event.InputEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JScrollPane;

public class TestJList {
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                JList list = new JList(new Object[] { "One", "Two", "Three" }) {
                    @Override
                    public int locationToIndex(Point location) {
                        int index = super.locationToIndex(location);
                        if (index != -1 && !getCellBounds(index, index).contains(location)) {
                            return -1;
                        }
                        else {
                            return index;
                        }
                    }
                };

                list.addMouseListener(new MouseAdapter() {

                    @Override
                    public void mouseClicked(MouseEvent e) {
                        JList list = (JList) e.getSource();
                        if (list.locationToIndex(e.getPoint()) == -1 && !e.isShiftDown()
                                && !isMenuShortcutKeyDown(e)) {
                            list.clearSelection();
                        }
                    }

                    private boolean isMenuShortcutKeyDown(InputEvent event) {
                        return (event.getModifiers() & Toolkit.getDefaultToolkit()
                                .getMenuShortcutKeyMask()) != 0;
                    }
                });

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                frame.getContentPane().add(new JScrollPane(list));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T13:49:37.617

查看调用堆栈，如果不弄乱 AWT-Events，您将无法真正做您想做的事：

```
Thread [AWT-EventQueue-0] (Suspended (breakpoint at line 384 in DefaultListSelectionModel)) 
    DefaultListSelectionModel.changeSelection(int, int, int, int, boolean) line: 384    
    DefaultListSelectionModel.changeSelection(int, int, int, int) line: 415 
    DefaultListSelectionModel.setSelectionInterval(int, int) line: 459  
    TestJList$1(JList<E>).setSelectionInterval(int, int) line: 2067 
    BasicListUI$Handler.adjustSelection(MouseEvent) line: 2739  
    BasicListUI$Handler.mousePressed(MouseEvent) line: 2695 
    AWTEventMulticaster.mousePressed(MouseEvent) line: 280  
    TestJList$1(Component).processMouseEvent(MouseEvent) line: 6502 
    TestJList$1(JComponent).processMouseEvent(MouseEvent) line: 3321    
    TestJList$1.processMouseEvent(MouseEvent) line: 24  
    TestJList$1(Component).processEvent(AWTEvent) line: 6270    
    TestJList$1(Container).processEvent(AWTEvent) line: 2229    
    TestJList$1(Component).dispatchEventImpl(AWTEvent) line: 4861   
    TestJList$1(Container).dispatchEventImpl(AWTEvent) line: 2287   
    TestJList$1(Component).dispatchEvent(AWTEvent) line: 4687   
    LightweightDispatcher.retargetMouseEvent(Component, int, MouseEvent) line: 4832 
    LightweightDispatcher.processMouseEvent(MouseEvent) line: 4489  
    LightweightDispatcher.dispatchEvent(AWTEvent) line: 4422    
    JFrame(Container).dispatchEventImpl(AWTEvent) line: 2273    
    JFrame(Window).dispatchEventImpl(AWTEvent) line: 2713   
    JFrame(Component).dispatchEvent(AWTEvent) line: 4687    
    EventQueue.dispatchEventImpl(AWTEvent, Object) line: 707    
    EventQueue.access$000(EventQueue, AWTEvent, Object) line: 101   
    EventQueue$3.run() line: 666    
    EventQueue$3.run() line: 664    
    AccessController.doPrivileged(PrivilegedAction<T>, AccessControlContext) line: not available [native method]    
    ProtectionDomain$1.doIntersectionPrivilege(PrivilegedAction<T>, AccessControlContext, AccessControlContext) line: 76    
    ProtectionDomain$1.doIntersectionPrivilege(PrivilegedAction<T>, AccessControlContext) line: 87  
    EventQueue$4.run() line: 680    
    EventQueue$4.run() line: 678 
```

你可以实现自己的 ListUI，然后做任何你想做的事情（包括防止这种不需要的行为），但我真的不建议你走这条路。

对于它的价值（它是通过覆盖 processXXXEvent 方法完成的），这里有一个小片段，我实际上发现它并不难看，并且可以防止在单击其范围之外时选择对象：

```
import java.awt.event.MouseEvent;

import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class TestJList {

    private JList list;

    protected void initUI() {
        JFrame frame = new JFrame("test");
        list = new JList(new Object[] { "Hello", "World", "!" }) {

            private boolean processEvent(MouseEvent e) {
                int index = list.locationToIndex(e.getPoint());
                return index > -1 && list.getCellBounds(index, index).contains(e.getPoint());
            }

            @Override
            protected void processMouseEvent(MouseEvent e) {
                if (processEvent(e)) {
                    super.processMouseEvent(e);
                }
            }

            @Override
            protected void processMouseMotionEvent(MouseEvent e) {
                if (processEvent(e)) {
                    super.processMouseMotionEvent(e);
                }
            }
        };
        list.setVisibleRowCount(10);

        frame.add(new JScrollPane(list));
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestJList().initUI();
            }
        });
    }
} 
```

# mysql - 未记录的 MySQL 将 LIKE 运算符用于多个单词

> ID：11138667
> 
> 赞同：2
> 
> 时间：2012-06-21T12:56:31.917
> 
> 标签：mysql, sql, syntax

似乎无法使用 LIKE 运算符找到有关特定 SQL 格式的文档。使用 MySQL，使用 LIKE 运算符对多个单词的典型查询可能如下所示：

```
SELECT * from table AS t WHERE t.col LIKE '%word1%' AND t.col LIKE '%word2%' 
```

尽管以下语句也有效，但返回的行将根据查询中单词的顺序而有所不同。例如：

```
SELECT * from table WHERE col LIKE '%word1%' '%word2%' 
```

在没有 AND 布尔值的情况下执行，但结果不同：

```
SELECT * from table WHERE col LIKE '%word2%' '%word1%' 
```

我的问题是，当使用这种查询形式而不是使用布尔值时，实际发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T13:00:06.200

从[手册](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html)：

> 彼此相邻放置的带引号的字符串连接到单个字符串。以下几行是等效的：
> 
> `'a string'`
> 
> `'a' ' ' 'string'`

所以，发生的事情是`'%word1%' '%word2%'`被解释为 '%word1%%word2%'

# axapta - 使用 Excel 插件将数据从旧系统导入 AX 2012 的 Excel 模板文件

> ID：11138674
> 
> 赞同：2
> 
> 时间：2012-06-21T12:56:55.670
> 
> 标签：axapta, etl, excel-addins, dynamics-ax-2012

我想知道是否有要下载的 excel 模板，您应该填写该模板以将数据从 excel 导入 AX 2012。例如**客户**和**全球通讯簿**电子表格。

我们目前的计划是先导入全局地址簿，然后将地址关联为客户，然后再导入客户数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:46:23.187

在这里查看资源：http: [//axlearning.com/excel-addinax2012/](http://axlearning.com/excel-addinax2012/)

原始来源是[Alex Anikiev](http://ax2012exceldataimport.blogspot.dk/)。

# javascript - Regex - 使用 Javascript/Regex 从字符串中删除一个值

> ID：11138679
> 
> 赞同：1
> 
> 时间：2012-06-21T12:57:16.907
> 
> 标签：javascript, regex

我有以下格式的文本变量 -

```
value1|34|value2|45|value3|67|value4|687| 
```

现在我只有文本“ `value3`”，我必须从上面的字符串中删除该值及其关联的数字。删除它后，我必须得到 -

```
value1|34|value2|45|value4|687| 
```

注意：管道中的数字以其值字符串为前缀。前 - 值|56|。因此，如果我必须删除一个值，我必须将其连同其编号一起删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:07:09.060

看起来您可以从使用 JSON 之类的存储格式中受益。

```
'value1|34|value2|45|value3|67|value4|687|'.replace(/value3\|\d+\|/,'') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:05:17.937

```
var input = 'value1|34|value2|45|value3|67|value4|687|',
    remove = 'value3',
    result = input.replace(RegExp(remove + '\\|\\d+\\|'), '');
console.log(result); // 'value1|34|value2|45|value4|687|' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T13:11:43.713

你可以

```
var s = "value1|34|value2|45|value3|0000|value4|687|";
var r = "value3";

s = s.replace(new RegExp("(?:^|\\|)" + r + "\\|\\d+"), "") 
```

包括 start-guard（不匹配 xxxvalue3）

# google-docs-api - 503 在从内部网络运行的 Chrome 应用程序中下载 PDF 时服务不可用

> ID：11138682
> 
> 赞同：1
> 
> 时间：2012-06-21T12:57:39.700
> 
> 标签：google-docs-api

我们有一个 Chrome 应用程序，目前已发布，它将 PDF 下载到 HTML 文件系统，然后显示在 IFrame 中。PDF 文件是使用特定 PDF 资源的资源提要的内容部分中提供的链接下载的。我们的应用程序一直工作到昨天。但是，从那时起，应用程序在获取 PDF 文件时收到“503 - 服务不可用”错误。但是，在获取特定文档的资源提要时，我们不会收到错误消息。我们正在使用具有双重作用域、谷歌文档和谷歌用户内容的 OAuth 2.0 来获取资源提要和 PDF 文件。

我们仅在内部网络中运行应用程序时发现此问题，而不是在其他网络上运行的应用程序上。此错误是否与任何使用限制有关？如果是这样，我们怎样才能解决这个问题？

# soa - 什么是甲骨文 ADF？

> ID：11138686
> 
> 赞同：14
> 
> 时间：2012-06-21T12:57:49.960
> 
> 标签：soa, oracle-adf

什么是甲骨文 ADF？

在互联网上我找到了以下定义：

> ADF 集成了混合子框架，为对象关系映射和其他形式的服务访问、数据绑定和用户界面提供关键功能，以及将它们结合在一起的功能粘合剂。ADF 代表“应用程序开发框架”，由 Oracle 开发。ADF 是一个框架，它将帮助您轻松构建应用程序，因为我们在开发应用程序时所做的许多冗余事情都由框架处理。

但是对于理解 ADF，我还有几个问题：

1.  ADF 是对[Java EE](http://en.wikipedia.org/wiki/Java_Platform,_Enterprise_Edition)框架的扩展，使用 ADF 可以完成的事情（包括 SOA 开发）是否可以通过普通的 Java EE 编程来完成？（如果我错了，请纠正我。）

2.  做[SOA](http://en.wikipedia.org/wiki/Service-oriented_architecture)应用程序必须学习 ADF 吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-21T13:12:14.907

它是一个基于[JSF](http://en.wikipedia.org/wiki/JavaServer_Faces)的 Web 开发框架。但是更重！！

如果您打算使用它进行 Web 开发，请注意此框架不是很灵活。感觉就像在 1999 年使用 Visual Studio 开发 Web 软件一样！！

您在 Oracle IDE JDeveloper 中构建所有内容（包括 UI！）拖放 UI 小部件已经制作...如果您可以使用默认外观并且不想包含流行的 JavaScript 库 (jQUery)，那么您应该没问题。例如，构建 Intranet 应用程序可能没问题。但是如果你想做一个公共网络应用程序（互联网）我不推荐这个框架！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-22T15:00:11.077

ADF 实际上是 4 个“部分”：

ADF 业务组件是一个声明性的、基于元数据的对象关系映射解决方案。它提供了强大的数据库读/写/更新功能，而开发人员不必使用 Java（因此是声明性的），尽管框架扫描可以使用 Java 进行扩展以添加自定义行为。

ADF 模型是一个绑定层，用于绑定 UI（基于 JSF 的 ADF Faces），而不会将 UI 组件紧密耦合到后端数据模型。

ADFController 实现了任务流，这是 JSF 页面流的一个进步，它允许您将应用程序分解为可重用的页面集，称为任务流、声明性事务管理。

ADF Faces 基于 JSF 并构建在[Trinidad](https://en.wikipedia.org/wiki/MyFaces_Trinidad)（一个开源 JSF 框架）之上。

是的，您几乎可以在自定义 Java EE 代码中执行 ADF 提供的所有内容（不是 ADF C）。但它是一个*框架*——它处理了大量重复的、可预测的、冗余的代码。此外，有人可能会争辩说，一旦学会了 ADF，就可以比手动编写 Java EE 应用程序更有效率。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-01-01T17:10:34.787

Oracle adf 允许您开发主要可以支持企业需求的 mvc 应用程序。您必须在这里考虑一些具体的事情：

*   **实体对象**

这些是数据库交互的核心元素。它们对应于模型层和业务服务。电子商务逻辑在这里实现。

*   **查看对象**

这些是被视为显示元素的元素。视图对象可以是可更新的或只读的。

可更新的视图对象派生自实体对象，因为视图对象中的任何更改都会反映在实体对象中，然后反映在数据库中。

可以使用标准 SQL 查询开发只读视图对象。

*   **应用模块**

这些是任何 adf 应用程序的核心部分，因为它们包括需要显示的视图对象。任何需要显示的视图都必须添加到应用程序模块中。

它还可以用于测试业务服务，因为需要在将业务服务附加到视图部分之前验证其结果是否正确。

**SOA（面向服务的架构）**

这有助于您使用 BPEL 语言和 java 开发 Web 服务。这些 Web 服务包含可用于进一步描述任何企业应用程序的 adf 应用程序的业务流程。

**优点：**

*   您可以真正快速地开发企业应用程序，因为对数据库表的所有操作都是在数据模型本身中提供给您的。

*   丰富的 UI 组件集，可以以各种方式进行交互。例如。面板分离器，面板标签，装饰盒等。

*   Web 服务可以很容易地在 adf 中使用。

*   它使开发更快。

**缺点：**

*   与其他替代品相比更重。

*   不能使用流行的 JavaScript 库，如 jQuery、Ajax 等。

*   与 Bootstrap、jQuery 等最新框架相比，UI 组件看起来太旧了。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-21T13:07:30.883

ADF 只是让开发变得更容易。

1.  是的，您仍然可以使用常规 Java EE 框架开发您需要的东西
2.  这不是强制性的，但它可能会让您的生活更轻松，开发时间更短

请阅读[http://www.oracle.com/technetwork/developer-tools/adf/overview/index.html](http://www.oracle.com/technetwork/developer-tools/adf/overview/index.html)

还有一个[ADF 概述视频](http://download.oracle.com/otn_hosted_doc/jdeveloper/11gdemos/ADF112/ADF112.html)可以帮助您更好地了解这项技术。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-10-15T11:00:00.810

Oracle ADF (framework) + Oracle Jdeveloper(IDE) 使 Web 应用程序变得非常简单和快速。1.Oracle ADF 是 JEE 堆栈之上的框架。
2.这不是必需的。但是如果您想使用 oracle SOA 套件，是的，它是必需的

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-06T16:30:22.220

您可以将 ADF 视为对标准 Java EE 的增强。它增强了多个层，包括数据访问、业务逻辑和用户界面。

SOA 更像是一个概念，您可以使用或不使用 ADF 来实现它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-22T10:23:55.923

对于您对 Oracle ADF 的查询，

通俗地说，这就是它的意思……：ADF 为构建企业应用程序提供了一个商业 Java 框架。它为 Java EE 开发提供可视化和声明性方法。它支持基于即用型设计模式、元数据驱动和可视化工具的快速应用程序开发。

1) 可以通过普通的 Java EE 编程进行开发，但是使用 ADF（使用 jDeveloper IDE）降低了复杂性，因为它遵循[MVC](https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)架构。

2) 不，ADF 知识对于 SOA 来说不是强制性的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-21T16:57:06.527

`Oracle ADF`是一个端到端的 Java EE 框架，可以使用开箱即用的基础设施服务以简单的方式进行应用程序开发。

作为相关信息：

1.  使用 MVC 模式。
2.  开发（轻松）与 Java EE 应用程序集成。
3.  有些`out of the box`功能不需要编码。
4.  类似于`BPM tool`with`TaskFlows`

关于你的问题：

1.  ADF 是 Java EE 框架的扩展，使用 ADF 可以完成的事情（包括 SOA 开发）是否可以通过普通的 Java EE 编程来完成？**是的，你是对的，你也可以使用`JavaEE 7`and `JavaEE 6`。**

做 SOA 应用程序必须学习 ADF 吗？**Oracle ADF Web 应用程序中的用户操作或其他活动需要调用 SOA 组合。调用是异步的，不需要响应。在 SOA 组合中，Oracle Mediator 组件可以提供路由和转换，BPEL 组件可以提供业务流程编排，人工任务服务可以提供工作流，决策服务可以提供基于复杂业务规则的决策制定。**

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-04-29T18:42:29.950

ADF 是一个基于 JSF 框架以更轻松的速度创建复杂企业应用程序的框架。对于一些编码示例，请查看我在 adf-webcenter.blogspot.com 下面的博客

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-06-27T15:41:36.447

Oracle ADF 是第 4 代语言。从某种意义上说，人们可以在几秒钟内创建一个成熟的 Java Web 应用程序。

从数据库表到页面中的建模视图，一切都是拖放行为。

ADF 的强项是任务流。通过任务流，我们实际上可以在单个页面/流中组织数千个片段。

无需成为任何技术专家即可使用 jDeveloper/ADF 构建应用程序。这将使任何 Web 开发人员的工作变得简单而轻松。

# android - 安卓应用崩溃

> ID：11138690
> 
> 赞同：-2
> 
> 时间：2012-06-21T12:58:07.883
> 
> 标签：android

为什么是这样：

```
 public class HelpTab extends Activity
    {
LinearLayout helpLayout; //was changed to LinearLayout helpLayout = new LinearLayout(this);
TextView helpText = new TextView(this);
Button tips = new Button(this);
Button walkThrough = new Button(this);

public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    buttonCreator();
    setContentView(helpLayout);
}

public void buttonCreator()
{
         //Button featuress defined in here (setText("") and adding them to the layout, addView();)
    } 
```

导致我的程序崩溃？我已经广泛地查看了代码，但我无法将手指放在它上面，并且调试器在打开新页面选项卡时还说找不到源来告诉我发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:59:18.180

尝试`setContentView(helpLayout);`先打电话，然后再 打电话`buttonCreator();`

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    setContentView(helpLayout);
   buttonCreator();
} 
```

假设您正在尝试针对您在 中声明的按钮初始化 buttonCreater() 中的按钮`helplayout`，您可能会遇到空指针异常。

# jquery - 使用 jQuery Validate 验证单个元素时指定验证消息

> ID：11138691
> 
> 赞同：0
> 
> 时间：2012-06-21T12:58:08.173
> 
> 标签：jquery, jquery-validate

当我在单个元素上使用 jQuery 验证时，如何更改验证消息。

在下面的示例中，我只是尝试在单击按钮时验证“DestinationId”选择列表。

```
$(".process").click(function () {
    return $("form[action$='process']").validate({
        rules: {
            DestinationId: "required"
        },
        messages: {
            DestinationId: "Please provide the destination"
        }
    }).element("#DestinationId");
}); 
```

这是 select 元素的渲染 HTML：

```
<select class="required" id="DestinationId" name="DestinationId"
   <option value="">Select Destination</option>
   <option value="3">Europe</option>
   <option value="4">USA</option>
</select> 
```

然而出现的消息只是：“此字段是必需的”。

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:05:49.933

参考**[现场演示](http://jsfiddle.net/SivaCharan/7PTNg/)**

我尝试了这种方式并按预期工作正常。检查您是否以不同的方式尝试过。

## HTML：

```
<form action="process">
    <select class="required" id="DestinationId" name="DestinationId">
        <option value="">Select Destination</option>    
        <option value="3">Europe</option>    
        <option value="4">USA</option> 
    </select><br/>
    <button class="process">Submit</button>
</form> 
```

## 查询：

```
$(".process").click(function () {     
    return $("form[action$='process']").validate({         
        rules: {             
            DestinationId: "required"         
        },         
        messages: {             
            DestinationId: "Please provide the destination"         
        }     
    }).element("#DestinationId"); 
}); 
```

## 编辑：

正如**@Jasper Mogg**提到的，不关闭选择标签可能是个问题。

替换此行

```
<select class="required" id="DestinationId" name="DestinationId" 
```

对此

```
<select class="required" id="DestinationId" name="DestinationId"> 
```

# sql-server - 如何自动刷新 SQL Server Management Studio 智能感知缓存？

> ID：11138693
> 
> 赞同：46
> 
> 时间：2012-06-21T12:58:28.813
> 
> 标签：sql-server, refresh, intellisense, ssms

在 SQL Server Management Studio 中，如果用户创建新的表列、表等，用户需要使用`CTRL`++刷新`Shift`IntelliSense缓存`R`。

是否有设置或某种方法可以自动执行此操作，以便在插入新表等后立即自动刷新？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-21T13:05:05.043

我不知道有没有一种方法可以自动刷新缓存而无需手动按下`Ctrl`++ （或等效项，例如菜单）`Shift`。`R`原因是当应用程序与数据库对话过多时，人们会抱怨它太健谈（也许有人可以编写一个简单的插件来执行此操作 - 使用[查询通知](http://technet.microsoft.com/en-us/library/ms130764.aspx)之类的东西来指示元数据视图中的某些内容发生了变化？ ）。您可能还想考虑像 SSMS Boost 之类的附加组件（尽管通过快速关键字搜索，我在其[功能页面](http://www.ssmsboost.com/VersionCompare)上没有看到此功能）或 SQL 提示（但我也没有[在他们的文档](http://documentation.red-gate.com/display/SP6/SQL+Prompt+6+documentation)，这里只[提到一个实验特性](https://stackoverflow.com/a/10516731/61305)）。

我相信[SQL Server Data Tools](http://msdn.microsoft.com/en-us/data/tools.aspx)可以做到这一点，但我不知道你是否可以控制刷新的频率。使用该工具可能还需要您对数据库开发的看法发生重大转变。

# android - Android：ParcelFileDescriptor“createpipe”方法 64KB 错误

> ID：11138696
> 
> 赞同：1
> 
> 时间：2012-06-21T12:58:39.273
> 
> 标签：android, pipe, android-contentprovider, parcelable

我有一个使用 ContentProvider 类的应用程序。在 openFile 方法中，我需要能够解码文件并作为数据流返回。所以我决定使用内置管道。

问题是如果我使用 createPipe 方法，我只能写入 64KB。之后我无法将数据写入管道。另请注意，在数据完全解码并写入管道之前，我无法读取。

```
package com.aujas.html.viewer.content;
public class LocalFileContentProvider extends ContentProvider {

private static final String URI_PREFIX = "content://com.aujas.html.viewer.localfile.dec/";
public static File file;
public String filename;
public ParcelFileDescriptor[] parcels;

public static String constructUri(String url) {
    String editString = url.replaceAll("%20", " ");
    int n = editString.length();
    String uri = editString.substring(5, n - 1);
    Log.d("URI", uri);
    return URI_PREFIX + uri + "\"";
}

public ParcelFileDescriptor openFile(Uri uri, String mode) {

    Log.d("OPEN", uri.getPath());
    return parcels[0];

}

@Override
public boolean onCreate() {
    return true;
}

@Override
public int delete(Uri uri, String s, String[] as) {
    throw new UnsupportedOperationException(
            "Not supported by this provider");
}

@Override
public String getType(Uri uri) {
    throw new UnsupportedOperationException(
            "Not supported by this provider");
}

@Override
public Uri insert(Uri uri, ContentValues contentvalues) {
    throw new UnsupportedOperationException(
            "Not supported by this provider");
}

@Override
public Cursor query(Uri uri, String[] as, String s, String[] as1, String s1) {
    throw new UnsupportedOperationException(
            "Not supported by this provider");
}

@Override
public int update(Uri uri, ContentValues contentvalues, String s,
        String[] as) {
    throw new UnsupportedOperationException(
            "Not supported by this provider");
}

class DecryptAsync extends AsyncTask<String, Integer, String> {

    @Override
    protected String doInBackground(String... paramArrayOfParams) {
        // TODO Auto-generated method stub
        try {
            file = new File(paramArrayOfParams[0]);
            Log.d("DecrypOpened", file.toString());
            parcels = ParcelFileDescriptor.createPipe();
            Log.d("filebeindec", LocalFileContentProvider.file.toString());
            FileInputStream fis = new FileInputStream(LocalFileContentProvider.file);

            android.os.ParcelFileDescriptor.AutoCloseOutputStream out = new android.os.ParcelFileDescriptor.AutoCloseOutputStream(parcels[1]);
            Cipher ecipher;
            Cipher dcipher;
            SecretKey key;
            String input = "768f8a949de079da";
            byte[] encoded = new BigInteger(input, 16).toByteArray();
            key = new SecretKeySpec(encoded, "DES");
            byte[] iv = new byte[] { (byte) 0x8E, 0x12, 0x39, (byte) 0x9C,
                    0x07, 0x72, 0x6F, 0x5A };
            AlgorithmParameterSpec paramSpec = new IvParameterSpec(iv);
            ecipher = Cipher.getInstance("DES/CBC/PKCS5Padding");
            dcipher = Cipher.getInstance("DES/CBC/PKCS5Padding");
            ecipher.init(Cipher.ENCRYPT_MODE, key, paramSpec);
            dcipher.init(Cipher.DECRYPT_MODE, key, paramSpec);
            byte[] buf = new byte[1024];
            InputStream in = new CipherInputStream(fis, dcipher);
            int numRead = 0;
            int n = 1;
            while ((numRead = in.read(buf)) >= 0) {
                n++;
                out.write(buf, 0, numRead);
                Log.d("Error", "SD");
                if (n == 64) {
                    out.flush();
                    out.flush();
                    n = 0;
                }
            }

            Log.d("Decypt Done", out.toString());
        } catch (Exception e) {
            Log.d("AsyncError", e.toString());
        }
        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
    }

} 
```

}

当我执行这个时，我只能写 64KB。由于我每次写入使用 1KB，我得到 64 条日志，之后没有任何反应。这些管道有尺寸限制吗？有解决方法吗？感谢和问候 rtindru

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T19:12:12.193

Linux 内核（至少是嵌入 Android 的版本）对管道有 64k 的缓冲区限制。

因此，您不能写入整个文件（大于 64k 的文件）。你要做的是

a) 创建管道

b) 创建写入器线程，它将写入此管道。它将阻塞并等待，直到阅读器线程从管道中读取内容。

c) 启动这个线程

d) 将阅读器文件描述符返回给客户端。

所以，会发生什么，作家和读者都会同时写作和阅读。写入器将在填充缓冲区时阻塞，而读取器在清空缓冲区时将阻塞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T17:38:41.797

我扩展了@victor-ronin's answer how into code using code from @commonsware 在回答另一个问题时：

[自定义 ContentProvider - openInputStream()、openOutputStream()](https://stackoverflow.com/questions/2148301/custom-content-provider-openinputstream-openoutputstream/14734310#14734310)

# namespaces - Axis2 部署与生成的服务 WSDL 差异

> ID：11138698
> 
> 赞同：0
> 
> 时间：2012-06-21T12:58:41.677
> 
> 标签：namespaces, wsdl, client, axis2

我有一个使用axis2 构建的Web 服务。此外，我使用了axis2 提供的Java2WSDL 实用程序在构建时从我的类（而不是部署的服务）生成WSDL。

然后，我通过 wsimport 为 Java EE 应用程序服务器中部署的 Web 服务和生成的 WSDL 文件生成了一个客户端。问题是生成的代码在包和mamespaces方面是不同的，因为从WSDL文件生成的客户端无法正常工作，因为它抱怨命名空间不匹配......在jboss上我看到了以下异常；

```
13:46:04,524 ERROR [RPCMessageReceiver] Exception occurred while trying to invoke service method getLanguage
org.apache.axis2.AxisFault: namespace mismatch require http://CustomerServiceWs found http://customer.webservices.temenos.com
        at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:177)
        at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:102)
        at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
        at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:114)
        at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:173)
        at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:173)
        at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:144)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
        at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
        at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
        at java.lang.Thread.run(Thread.java:619) 
```

我使用以下命令从类文件生成我的 WSDL 文件；

```
java2wsdl.bat -o C:\Temp -tn http://CustomerServiceWs -cn com.temenos.webservices.customer.CustomerServiceWS 
```

你能帮我解决这个问题或提出一个更好的方法来解决这个问题吗？

谢谢，

--

斯茹内霍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:12:33.633

确保架构中的命名空间与 WSDL 的命名空间匹配，坦率地说，我什至不喜欢使用 Axis2 的想法，因为它有很多问题。无论如何尝试将 xsd 的命名空间与 wsdl 的命名空间匹配并确保所有请求和响应的名称都相似。

# tomcat - Tomcat的extraResourcePaths和别名访问外部目录的区别

> ID：11138701
> 
> 赞同：3
> 
> 时间：2012-06-21T12:58:46.463
> 
> 标签：tomcat, tomcat7

简单问题：在Tomcat7中，使用extraResourcePaths和别名访问应用程序外的目录有什么区别？

我可以使用这两个 server.xml 片段中的任何一个，它们似乎都可以工作。两者似乎都成功加载了这个 URL `http://localhost/app/images/box.jpg`：. 使用一个比另一个有优势吗？

```
<Context docBase="Eclipse_Project" path="/app"
        reloadable="true" source="org.eclipse.jst.j2ee.server:Eclipse_Project"
        aliases="/images=D:\path\to\images"/> 
```

或者

```
<Context docBase="Eclipse_Project" path="/app"
        reloadable="true" source="org.eclipse.jst.j2ee.server:Eclipse_Project">
        <Resources className="org.apache.naming.resources.VirtualDirContext"
                extraResourcePaths="/images=D:\path\to\images"/>
</Context> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T22:27:43.943

这是使用多种不同方式提取不属于 WAR 或已展开目录的资源的结果。坦率地说，这是一个早就应该清理的烂摊子。为 Servlet 3.1（即 Tomcat 8）提议的“覆盖”（或任何它最终被称为的）特性已经促使进行了重大清理。所有当前的实现都将统一为一个实现。虽然它并不漂亮，而且需要一段时间才能完成。

别名被视为 Web 应用程序资源的外部。DirContext 在检查其内部资源之前检查别名。因此，当您请求真实路径时，您将获得原始路径。

如果您使用 extraResourcePaths，它们将被视为 Web 应用程序资源的一部分。看起来 Eclipse 已触发将应用程序资源复制到工作目录。通常这样做是为了避免文件锁定。由于 extraResourcePaths 被视为 webapp 的一部分，因此它们也会被复制，并且 getRealPath() 会报告复制的位置，因为 Tomcat 从那里提供资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:24:54.810

经过进一步调查，我发现了这种差异。

这个 Java 代码的结果是不同的。我仍然不知道为什么。

```
String path = getServletContext().getRealPath("/images"); 
```

使用 extraResourcePaths，路径如下，这是 Eclipse 爆炸我的 Web 应用程序的文件夹，而不是有效目录。

```
C:\Projects\.metadata\.plugins\org.eclipse.wst.server.core\tmp2\wtpwebapps\Eclipse_Project\images 
```

使用别名，路径在下面，是我真正需要的。

```
D:\path\to\images 
```

现在，如果有人可以真正解释这一点。:-)

# c++ - 我的 glsl 着色器加载代码有什么问题吗？

> ID：11138705
> 
> 赞同：0
> 
> 时间：2012-06-21T12:58:59.727
> 
> 标签：c++, opengl, compiler-errors, glsl, shader

问题是，着色器（非常简单的，因为我正在学习 OpenGL）无法以看似随机的方式编译（并给出随机错误消息 * ）。然而，相同的着色器在大约 3 或 4 次尝试后编译。这是代码：

```
Shader::Shader(GLenum Type,std::string filename)
{
    shader_type = Type;

    std::ifstream ifs(filename);
    if(!ifs)
        throw(std::runtime_error("File:"+filename+" not opened."));
    std::ostringstream stream;
    stream<<ifs.rdbuf();

    const GLchar* data = stream.str().c_str();

    handle = glCreateShader(shader_type);
    glShaderSource(handle,1,static_cast<const GLchar**>(&data),0);

    glCompileShader(handle);

    int status;
    glGetShaderiv(handle,GL_COMPILE_STATUS,&status);
    if(status == GL_FALSE)
    {
        int loglength;
        glGetShaderiv(handle,GL_INFO_LOG_LENGTH,&loglength);

        auto data = new char[loglength];

        glGetShaderInfoLog(handle,loglength,&loglength,data);

        std::string strdata(data);
        delete [] data;

        throw(std::runtime_error(strdata));
    }
} 
```

请注意，着色器最后没有缺少换行符，在最后一个分号之后有一个额外的空格，并且使用制表符而不是空格。（正如互联网上*各种旧帖子中所建议的那样！）。*

*   下面是从同一个顶点着色器产生的两条错误消息，不是同时产生的：

```
 #version 330
in vec2 Position;
uniform mat4 transform;
void main()
{
    gl_Position = transform*vec4(Position,0.0f,1.0f);

} 
```

错误：

```
0(1) : error C0000: syntax error, unexpected $undefined at token "<undefined>"

0(6) : error C0000: syntax error, unexpected '!', expecting ',' or ')' at token "!" 
```

有时它只是工作！是我的驱动程序有问题吗？（我在 Arch Linux 64 位上使用最近的 302.x 稳定的 nvidia 二进制驱动程序，并带有一张陈旧的 9600 GSO 卡）

PS：只要着色器正确编译，代码就会按预期工作，所以我认为它应该是正确的。如果无法从中找到问题，我很乐意将工作（有时！）示例作为 zip 文件发布，并且有人想看看。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T16:38:01.153

```
const GLchar* data = stream.str().c_str(); 
```

这是不好的。如果你想要字符串的数据，你需要*存储它*。`str`将返回缓冲区的*副本*，然后您将获得指向 with 的指针`c_str`。一旦该临时对象被销毁（在此行的末尾），该指针将指向您不再有权访问的内存。

正确的代码是这样的：

```
std::string dataString = stream.str();
const GLchar *data = reinterpret_cast<GLchar*>(dataString.c_str()); 
```

# numpy - imshow 的颜色条，以 0 为中心，带有符号刻度

> ID：11138706
> 
> 赞同：4
> 
> 时间：2012-06-21T12:59:10.403
> 
> 标签：numpy, matplotlib

我想生成一个图网格，由几个数组组成，具有正值和负值，具有对数刻度，共享相同的颜色条。

我已经实现了颜色条的共享部分（使用 ImageGrid 和常见的最大值和最小值），并且我知道在只有正值的情况下，我可以在 imshow 调用中使用 LogNorm() 获得对数刻度。但是考虑到负值的存在，我需要一个对称对数刻度的颜色条。

我在[https://stackoverflow.com/a/7741317/1101750](https://stackoverflow.com/a/7741317/1101750)上找到了解决方案，但是运行 Yann 提供的示例代码给了我非常不同的结果，显然错误： ![Yann 示例的结果](../Images/428eb7bb9a89cecad8d7c75bc01c5b1d.png) 查看代码，我无法掌握这是怎么回事。

除此之外，我发现在 Matplotlib 1.2 上， scale.SymmetricalLogScale.SymmetricalLogTransform 要求文档中未解释的新参数（linscale，查看其他转换的代码，我认为将其保留为 1 是安全的价值）。

最简单的解决方案是 LogNorm 的子类化吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-16T19:38:46.183

我过去使用了一个非常简单的方法来做到这一点，而无需进行任何子类化。matplotlib.colors.SymLogNorm 提供了您需要的大部分功能，除了我发现有必要手动生成刻度线。请注意，此解决方案使用 matplotlib 1.3.0，我可能正在使用 1.2 中不可用的功能。

```
def imshow_symlog(my_matrix, vmin, vmax, logthresh=5):
    img=imshow( my_matrix ,
                vmin=float(vmin), vmax=float(vmax),
                norm=matplotlib.colors.SymLogNorm(10**-logthresh) )

    maxlog=int(np.ceil( np.log10(vmax) ))
    minlog=int(np.ceil( np.log10(-vmin) ))

    #generate logarithmic ticks 
    tick_locations=([-(10**x) for x in xrange(minlog,-logthresh-1,-1)]
                    +[0.0]
                    +[(10**x) for x in xrange(-logthresh,maxlog+1)] )

    cb=colorbar(ticks=tick_locations)
    return img,cb 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-16T19:43:38.173

从 1.3 开始，matplotlib 有一个 SymLogNorm。[http://matplotlib.org/api/colors_api.html#matplotlib.colors.SymLogNorm](http://matplotlib.org/api/colors_api.html#matplotlib.colors.SymLogNorm)

# node.js - Node.js 和 Redis

> ID：11138710
> 
> 赞同：3
> 
> 时间：2012-06-21T12:59:19.033
> 
> 标签：node.js, redis, serverside-javascript

我正在尝试将 redis 数据库与我正在构建的 Node.js 应用程序链接起来，以便能够存储有关项目的评论。我正在使用 node_redis 库来处理连接。当我尝试从数据库中检索评论时，只返回“[true]”。出于测试目的，我将所有内容都塞进了一个方法中，并且我已经硬编码了这些值，但我仍然收到“[true]”。

```
exports.getComment = function (id){

var comments = new Array();

rc.hmset("hosts", "mjr", "1", "another", "23", "home", "1234");

comments.push(rc.hgetall("hosts", function (err, obj) {

    var comment = new Array();

    if(err){
        comment.push("Error");
    } else {
        comment.push(obj);
    }

    return comment;
}));

return comments;

} 
```

**根据教程**更新了代码，结果如下：****

 **检索评论：

```
exports.getComment = function (id, callback){

  rc.hgetall(id, callback);

} 
```

添加评论：

```
exports.addComment = function (id, area, content, author){

//add comment into the database
rc.hmset("comment", 
         "id", id, 
         "area", area, 
         "content", content,
         "author" , author,
         function(error, result) {
            if (error) res.send('Error: ' + error);
         });

//returns nothing

}; 
```

渲染代码：

```
var a = [];
require('../lib/annotations').addComment("comment");
require('../lib/annotations').getComment("comment", function(comment){
    a.push(comment)
});
res.json(a); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:27:16.327

Node.js 是**异步**的。这意味着它异步执行 redis 的工作，然后在回调函数中返回结果。

我建议您阅读本教程并在进一步了解之前完全理解它：http: [//howtonode.org/node-redis-fun](http://howtonode.org/node-redis-fun)

基本上，这种方式是行不通的：

```
function getComments( id ) {
    var comments = redis.some( action );
    return comments;
} 
```

但它必须是这样的：

```
function getComments( id, callback ) {
    redis.some( action, callback );
} 
```

这样，您可以像这样使用 API：

```
getComments( '1', function( results ) {
    // results are available!
} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:19:35.287

当调用 addComment 时，问题出在实际的 Redis-Node 库中，如下所示。

```
require('../lib/annotations').getComment("comment", function(comment){
    a.push(comment)
}); 
```

此调用缺少回调函数中的参数。第一个参数是错误报告，如果一切正常，应该返回 null，第二个参数是实际数据。所以它的结构应该像下面的调用。

```
require('../lib/annotations').getComment("comment", function(comment){
    a.push(err, comment)
}); 
```**

# quartz-scheduler - 将 Quartz 调度程序作为服务

> ID：11138711
> 
> 赞同：1
> 
> 时间：2012-06-21T12:59:20.677
> 
> 标签：quartz-scheduler

我已经实现了一个 Quartz Job 调度程序，每 30 秒调用一个 java 进程，这工作正常。要启动调度程序，我正在做的是，创建包含 java - jar“MainJava.jar”的 bat 文件。一旦我们点击 jobScheduler .bat 文件，作业已启动，但问题是如果任何一个关闭窗口，作业将停止。因此，为避免此类问题，是否有任何选项可以使用命令提示符启动和停止石英调度程序，例如：

如果我说“从命令行启动 jobScheduler”，作业必须开始。作业必须在从命令提示符发出停止 jobScheduler 时停止“

# php - 直接从 url 将图像保存到 php 中的数据库

> ID：11138713
> 
> 赞同：1
> 
> 时间：2012-06-21T12:59:24.760
> 
> 标签：php

我曾尝试将图像下载到一个目录，但现在我想通过不使用文件选择器将图像保存到使用 BLOB 类型的数据库中。我的意思是直接从 URL 保存图像：

说：

```
http://someserver.com/images/imageone.gif 
```

如何将其直接保存到数据库？在保存到数据库之前我必须先下载它吗？请帮我..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:06:02.503

就像你会保存任何其他数据一样。

```
$imageContents = file_get_contents('http://someserver.com/images/imageone.gif');
$imageContentsEscaped = mysql_real_escape_string($imageContents, $link);
mysql_query("INSERT INTO table_name (imageData) VALUES ('$imageContentsEscaped')", $link); 
```

确保要将图像数据保存到的列设置为二进制类型，例如 BLOB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:17:33.890

```
// download image to memory
$image = file_get_contents('http://example.com/my/image.jpg');

// open PDO connection
$db = ...;

// insert downloaded data to the DB
$sql = 'insert into my_table(filename, content) values (?,?)';
$stmt = $db->prepare($sql);
$stmt->bindParam(1, 'my/image.jpg');
$stmt->bindParam(2, $image, PDO::PARAM_LOB);
$stmt->execute(); 
```

# python - Python：这是一个传递参数约定吗？

> ID：11138717
> 
> 赞同：3
> 
> 时间：2012-06-21T12:59:29.257
> 
> 标签：python

当我浏览 Python 代码并查看调用的函数时，我注意到类似

```
functionCall(argument='something') 
```

或者

```
someclass.functionCall(argument='something') 
```

我已经玩过它，并注意到您必须使用与函数或类函数本身范围内的变量相同的名称来命名该变量。这只是一个约定（用于有用的命名）还是我缺少的更多？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T13:02:08.843

这些只是标准的[**关键字参数**](http://docs.python.org/tutorial/controlflow.html#keyword-arguments)。

它们主要在调用通常采用默认值的函数时很有用，但用户有兴趣在不影响其他默认值的情况下传递自定义值。例如：

```
def foo(a='a', b='b', c='c'):
    print a + b + c 
```

然后：

```
>>> foo()
'abc'
>>> foo(c='x')  # don't know or care about a and b's value
'abx' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T13:02:36.540

最好有命名参数，因为可以使用命名参数以任何顺序指定参数。

甚至可以命名必需的参数（如没有默认值的对象），并且命名参数可以以任何顺序出现。

[另见此](http://davedash.com/2007/12/21/python-named-arguments-pure-genius/)

Python 的参数传递机制非常灵活。

缺点：**函数的参数太多**。解决方案：拆分为多个函数，在字典或对象中一起传递一些 args。

缺点：**变量名不好**。解决方案：给变量起更具描述性的名称。

或者记住正确的顺序.. :)

```
class xyz:
    def __init__ (self, a='1', b='2'):
        print a,b

xyz(b=3,a=4)
xyz(a=5,b=6)

>>4 3
>>5 6 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T13:10:03.500

这称为[关键字参数](http://docs.python.org/tutorial/controlflow.html#keyword-arguments)。关键字参数有几个明显的优点：

1.  调用者可以按任何顺序指定它们。
2.  它们具有默认值，这意味着如果默认值合理，调用者不必为每个参数提供值。
3.  它们可以使代码更具可读性。例如，`foo(width=100, height=200)`比 更容易理解`foo(100, 200)`。它也更容易使用，因为您不必记住该函数是采用宽度、高度还是高度、宽度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T13:07:57.167

这些是关键字参数。它们使您能够以任何顺序传递参数（对于跳过可选参数很有用）

但请注意，以这种方式调用函数会带来一些开销：

```
def test(a,b,c):
    return a+b+c

def t1():
    return test(1,2,3)

def t2():
    return test(a=1, b=2, c=3)

timeit(t1)
    0.23918700218200684
timeit(t2)
    0.2716050148010254 
```

# java - 强制 jvm 返回本机内存

> ID：11138723
> 
> 赞同：7
> 
> 时间：2012-06-21T12:59:52.353
> 
> 标签：java, eclipse, memory, jvm, jvm-arguments

我不时在需要大量内存的 Eclipse 任务中运行。因此，jvm 在任务运行时会占用大约 2-3gb 的 RAM，这没关系。但是，一旦 jvm 占用了该内存，它就不会释放它，而且我遇到的情况是，堆中使用的内存约为 200mb，总堆大小约为 3gb，这确实是不需要的，因为其他程序正在缺乏内存。

我尝试`Max/MinHeapFreeRatio`使用参数来强制 jvm 减少未使用内存的消耗。那是我的eclipse`config.ini`文件：

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.100.v20110502
-vm
c:/Program Files/Java/jdk1.6.0_26/bin/javaw.exe
-showlocation
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
256M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Duser.name=Michael Nesterenko
-Dosgi.requiredJavaVersion=1.5
-Xms512m
-Xmx4096m
-XX:MinHeapFreeRatio=10
-XX:MaxHeapFreeRatio=30 
```

但这无济于事，我仍然遇到大量未使用内存的情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:03:43.157

Java 在作为虚拟内存启动时分配最大堆大小。当它使用内存时，它被分配为真正的主内存。它永远不会缩小这个尺寸。释放此内存的唯一方法是让程序退出。

Java 将压缩它的内存使用，因此它之前使用的许多页面可以交换到磁盘，但是如果它再次需要它们，这可能会对性能产生重大影响。

# android - 突出显示地图视图上的区域

> ID：11138724
> 
> 赞同：0
> 
> 时间：2012-06-21T12:59:58.783
> 
> 标签：android, android-mapview, geofencing

例如，当您搜索城市时，谷歌地图本身可以突出显示区域。![http://2.bp.blogspot.com/-H_1aAsFOGks/TxhQNCgz8II/AAAAAAABD_I/Xent-NpuVjM/s640/google-maps-highlight.png](../Images/57bba487353b4796e8dca50013b428c3.png)

因为我没有通过搜索功能和谷歌找到很多......

有没有一种方法可以在 android mapview 上突出显示一个区域（圆形或矩形）或者我是否必须花费很长的时间来计算图片的必要大小（例如圆形）（取决于缩放级别）并放置每当缩放级别发生变化时，它就必须被替换为mapoverlay？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:03:28.473

扩展`Overlay`和覆盖该`draw`方法。

例如：

```
class HighlightedAreaOverlay extends Overlay {
    public void draw(Canvas canvas, MapView mapv, boolean shadow){
       super.draw(canvas, mapv, shadow);
       // your drawing code here
    }
} 
```

然后通过调用将其添加到您的 mapView`mapView.getOverlays().add(new HighlightedAreaOverlay());`

# git - 在 git cvsimport 之后，如何将 cvs 文件修订号映射到 git commit hash？

> ID：11138729
> 
> 赞同：0
> 
> 时间：2012-06-21T13:00:06.130
> 
> 标签：git, cvs

我正在将几个大型 CVS 存储库转换为 git 存储库。我已经运行了 git cvsimport，现在我需要更新一些依赖 cvs 修订号的内部工具。修订号很重要，因为它们存储在数据库中以跟踪已部署特定文件的哪些版本。我需要使用 cvsimport 的 git 存储库中的相应提交哈希更新数据库中的文件修订号。有没有办法为任何文件获取任意修订号，并找出进行特定更改的 git commit 哈希？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:49:58.977

使用需要在 git cvsimport 中使用“-R”选项：

```
 -R
       Generate a $GIT_DIR/cvs-revisions file containing a mapping from CVS revision numbers to newly-created Git commit
       IDs. The generated file will contain one line for each (filename, revision) pair imported; each line will look like

           src/widget.c 1.1 1d862f173cdc7325b6fa6d2ae1cfd61fd1b512b7 
```

我的带有该选项的 git 版本是 1.7.0.4

# javascript - highchart json数据点

> ID：11138733
> 
> 赞同：1
> 
> 时间：2012-06-21T13:00:11.067
> 
> 标签：javascript, json, highcharts, datapoint

我在这个问题上打破了我的头。

我有一个包含 Json 数据的图表。现在想将 Json 数据拆分为 2 个数据点。

```
json data;
[1340283205000,5,32]

Explanation
time, number, number 
```

当前图表适用于时间、数字。现在我添加了另一个数据点，但这不起作用。

```
function requestData() {
        $.ajax({
            url: 'php/hits_json.php', 
            success: function(point) {
                var series = chart1.series[0],
shift = series.data.length > 20; // shift if      the series is longer than 20

                // add the point
                chart1.series[0].addPoint(eval(point), true, shift);

                // call it again after one second
                setTimeout(requestData, 5000);  
            },
            cache: false
        });
    }

    $(document).ready(function() {
        window.chart1 = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                defaultSeriesType: 'areaspline',
                events: {
                    load: requestData
                }
            },
            title: {
                text: 'Hits per 5 sec'
            },
            xAxis: {
                type: 'datetime',
                tickPixelInterval: 100,
                maxZoom: 10 * 10000
            },
            yAxis: {
                min: 0,
                minPadding: 0.25,
                maxPadding: 0.1,
                title: {
                    text: 'Hits',
                    margin: 40
                }
            },
    plotOptions: {
                series: {
                    dataLabels: {
                        enabled: true
                            },
                    marker: {
                        enabled: true
                            },
                        }
                    },
        credits: {
                enabled: false
                    },
            series: 

            [{
                name: 'Hits',

                data: [0],lineWidth: 1
            },{
                        name: 'Requests',
                        data: [0],lineWidth: 1
            }]
        });     
    }); 
```

有人可以指出我正确的方向来解决我的问题:)

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:32:12.057

您的 json 中没有标记数据。所以前两个值被视为 x 和 y，第三个被忽略。要正确格式化您的数据，请执行以下操作：

```
var json = [
{
  "x":1340283205000,
  "y":5
}, 
{
  "x":1340283205000,
  "y":32
}]; 
```

# bash - 使用 gnuplot 的 for 循环设置变量

> ID：11138742
> 
> 赞同：0
> 
> 时间：2012-06-21T13:00:46.467
> 
> 标签：bash, variables, for-loop, gnuplot

我正在尝试使用**set for cycle**命令为 gnuplot 环境设置变量。我使用的是 4.6 版本，根据[gnuplot 文档（第 70 页）](http://www.google.cz/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFgQFjAA&url=http%3A%2F%2Fwww.gnuplot.info%2Fdocs_4.6%2Fgnuplot.pdf&ei=9EHjT_yuEI31sgac1uzBBg&usg=AFQjCNGIBRhbpB8my3nC1akK7rLPFSWCKQ&sig2=hoNqqc-j-Kp0oJoCtZDO7w)，语法如下：

```
for [intvar = start:end{:increment}]
for [stringvar in "A B C D"]
Examples:
set for [i = 1:10] style line i lc rgb "blue" 
```

但我得到这个错误：

```
gnuplot> set for [var in gpvars] replace(var,'#_#',' ')
                                 ^
         line 0: Unrecognized option.  See 'help set'. 
```

我的脚本：

```
#!/bin/bash

OUTDIRNAME="out"
TIMEFORMAT='%d.%m.%y'
GPPARS=( "xlabel "Time"" "ylabel "value1"" "y2label "value2"" "format x "%H:%M"")
GPPARS_MOD=()

for (( i=0; i < ${#GPPARS[@]}; i++)); do 
  FILE=${GPPARS[${i}]}
  echo "arg=${FILE}"
  GPPARS_MOD+=( "`echo "${FILE}" | sed -e 's/ /#_#/g'`" )
done

gnuplot << EOF
reset

replace(S,C,R)=(strstrt(S,C)) ? \
    replace( S[:strstrt(S,C)-1].R.S[strstrt(S,C)+strlen(C):] ,C,R) : S

set terminal png
set output "${OUTDIRNAME}/graph.png"
set timefmt "${TIMEFORMAT}"
set xdata time

gpvars="${GPPARS_MOD[@]}"

set for [var in gpvars] {
   replace(var,'#_#',' ')
}

...

EOF

...

exit 0 
```

我也在使用函数替换，因为空格（gnuplot 忽略转义序列）该函数可以完美地用于循环绘图。我尝试过使用和不使用函数以及使用不带空格的变量，但结果是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:33:36.657

作为旁注——我不确定我是否相信你的 bash 数组会按照你想要的方式对事物进行分组......对我来说，你的报价被剥夺了。尝试：

```
GPPARS=( "xlabel 'Time'" "ylabel 'value1'" "y2label 'value2'" "format x '%H:%M'") 
```

反而。（内部双引号替换为单引号）

这是一个棘手的问题——您使用 gnuplot 4.6 是一件好事，否则我不知道如何解决它。 *（编辑——使用 gnuplot 4.4，您可以使用 、 、 、 和宏的组合`word`，`words`但这`if`是`reread`一个`exists`相当混乱的解决方案）*

请注意，您所拥有的内容不起作用，因为它类似于：

```
MYLABEL='xlabel "foo"'
set MYLABEL 
```

Gnuplot 不会在执行 set 命令之前扩展 MYLABEL，以便您可以执行以下操作：

```
MYLABEL="totally cool X label here!"
set xlabel MYLABEL 
```

你想要的*可以*使用宏来完成（但是唉，不是迭代）：

```
set macro 
MYLABEL='xlabel "foo"'
set @MYLABEL 
```

但这在这里也不起作用，因为宏扩展发生在其他任何事情之前（例如函数评估）。您在这里需要的是 gnuplot 在 4.6 中引入的更通用的迭代，并结合`eval`

```
do for [ var in gpvars ] {
    eval( 'set '.replace(var,'#_#',' ') )
} 
```

**编辑——gnuplot 4.2+ 解决方案**

```
#top of script -- Nothing should go here.
replace(S,C,R)=(strstrt(S,C)) ? \
     replace( S[:strstrt(S,C)-1].R.S[strstrt(S,C)+strlen(C):] ,C,R) : S
if( ! exists("N") ) N=1
TODO="${GPPARS_MOD[@]}"
set macro
do_set=replace(word(TODO,N),'#_#',' ')
set @do_set
N=N+1
if( N <= words(TODO) ) reread
#rest of script here ... 
```

# android - 如何在 opengl es 2.0 中即时渲染对象

> ID：11138743
> 
> 赞同：0
> 
> 时间：2012-06-21T13:00:49.630
> 
> 标签：android, opengl-es-2.0

所以我正在制作一个应用程序，您可以在其中单击屏幕并动态创建对象。我该怎么做呢？我已经创建了一个单独的类，它包含您要创建的对象的属性、我要渲染的每个特定形状的类以及前面的类的抽象类。但基本上我只想能够点击一个特定的点，它会呈现一个以该点为中心的指定形状。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:11:04.877

首先，让您的活动实现 OnTouchListener 并覆盖以下方法，您可以在其中检索触摸坐标：

```
@Override
public boolean onTouch(View v, MotionEvent event) {
  if (event.getAction() == MotionEvent.ACTION_DOWN) {
    touchX = (int) event.getX();
    touchY = (int) event.getY();
  }

  return true;
} 
```

在触摸事件上，您可以调用您的方法来绘制所需的形状，并传递 touchX 和 touchY 值并进行平移。

# c# - NavigationService WithParam 的 Caliburn Micro for WP

> ID：11138748
> 
> 赞同：1
> 
> 时间：2012-06-21T13:01:15.707
> 
> 标签：c#, windows-phone-7, caliburn.micro

众所周知，CM 不支持通过 NavigationService 传递复杂类型的对象，例如 MVVM Light。所以我搜索了一种解决方法并这样做了。

有两个视图模型：MainPageViewModel 和 SubPageViewModel。

我首先定义了 3 个类，分别是 GlobalData、SnapshotCache 和 StockSnapshot。StockSnapshot 是我想在 2 个视图模型之间传递的对象的类型。

```
public class SnapshotCache : Dictionary<string, StockSnapshot>
{
    public StockSnapshot GetFromCache(string key)
    {
        if (ContainsKey(key))
            return this[key];

        return null;
    }
}

public class GlobalData
{
    private GlobalData()
    {

    }

    private static GlobalData _current;
    public static GlobalData Current
    {
        get
        {
            if (_current == null)
                _current = new GlobalData();

            return _current;
        }
        set { _current = value; }
    }

    private SnapshotCache _cachedStops;
    public SnapshotCache Snapshots
    {
        get
        {
            if (_cachedStops == null)
                _cachedStops = new SnapshotCache();

            return _cachedStops;
        }
    }
}

public class StockSnapshot
{
    public string Symbol { get; set; }
    public string Message { get; set; }
} 
```

接下来，我像这样调用 MainPageViewModel 上的导航服务：

```
StockSnapshot snap = new StockSnapshot {Symbol="1", Message = "The SampleText is here again!" };
GlobalData.Current.Snapshots[snap.Symbol] = snap;
NavigationService.UriFor<SubPageViewModel>().WithParam(p=>p.Symbol,snap.Symbol).Navigate(); 
```

在 SubPageViewModel 我有这个：

```
 private string _symbol;
    public string Symbol
    {
        get { return _symbol; }
        set
        {
            _symbol = value;
            NotifyOfPropertyChange(() => Symbol);
        }
    }

    public StockSnapshot Snapshot
    {
        get { return GlobalData.Current.Snapshots[Symbol]; }
    } 
```

这就是问题所在。当我运行程序时，我发现它总是先运行到 Snapshot 的 getter，而此时 Symbol 还没有被初始化。所以后来我尝试添加一些额外的代码来消除 ArgumentNullException 以便它可以运行到 Symbol 的设置器，然后一切都很好，只是 UI 无论如何都不会更新。

谁能告诉我哪里错了？提前谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:36:07.137

为什么不直接使用：

```
private string _symbol;     
public string Symbol     
{         
    get { return _symbol;}         

    set         
    {             
        _symbol = value;            
        NotifyOfPropertyChange(() => Symbol);   
        NotifyOfPropertyChange(() => Snapshot);        
    }     
}      
public StockSnapshot Snapshot     
{         
    get { return Symbol!=null? GlobalData.Current.Snapshots[Symbol]:null; }     
} 
```

在这种情况下，当 Symbol 为空时，您不会尝试从 GlobalData 获取数据（无论如何都是明智的方法！），并且当设置“Symbol”时，您在快照上调用 NotifyOfPropertyChange() 以强制重新获取属性。

# javascript - 单击单选按钮时如何更改背景颜色

> ID：11138751
> 
> 赞同：1
> 
> 时间：2012-06-21T13:01:24.280
> 
> 标签：javascript, html

**JavaScript**

```
<script>
function changeColor() {
    var element = user.elements["group1"];

    for (var i = 0; i < element.length; i++) {
        if (element[i].checked == true) {

            var newColor = element[i].value;
            alert("hai");
            document.getElementById("changeColor").style.background = newColor;

        }
    }
}​
</script> 
```

**HTML**

```
<div id="color"> 
    <input type="radio" name="group1" id="color1" value="#990000" /><label     for="color1">Red</label>
    <input type="radio" name="group1" id="color2" value="#009900" /><label for="color2">Green</label>
    <input type="radio" name="group1" id="color3" value="#FFFF00" /><label for="color3">Yellow</label><br><br><br>
    <button onclick="changeColor()">Change</button> 
```

当我单击单选按钮时，上面的 HTML 和 JavaScript 代码很好，背景颜色发生了变化。它工作正常。但是，我的问题是颜色更改后浏览器会自动刷新，这是我不想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T14:20:30.840

单击提交按钮后，将调用 onclick 事件。因此，如果您发送布尔值**返回 false**则页面未提交这里是我使用的代码**返回 false；**

```
<script>
function changeColor() {
    var element = user.elements["group1"];
    for (var i = 0; i < element.length; i++) {
        if (element[i].checked == true) {

            var newColor = element[i].value;
            document.getElementById("changeColor").style.backGround = newColor;
        return false;
        }
    }
}
</script> 
```

在您的 changeColor() 函数之前更改 onlick 事件添加返回

```
<button onclick="return changeColor();">Change</button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:04:20.100

它看起来像您的按钮是表单中的唯一按钮，因此浏览器正在考虑它的表单提交按钮。

正如尖尖所说，您可以向按钮添加类型，将 onclick 功能添加到不同的元素，例如链接（当然，锚不是实际链接，否则您会遇到同样的问题）或将按钮移到表单之外.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:11:16.567

我强烈建议您使用[`jQuery`](http://jquery.com/)：

HTML

```
<button id="btnColor">Change</button> 
```

jQuery：

```
$('#btnColor').live('click', function(e) {
    e.preventDefault();
    $('#changeColor').css('background-color', $('input:radio[name=group1]:checked').val());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T13:11:26.467

您可以使用这样的表单包装单选按钮，将按钮留在外面：

```
<form name="form_radiobuttons">
  <input type="radio" name="group1" id="color1" value="#990000" /><label     for="color1">Red</label>
  <input type="radio" name="group1" id="color2" value="#009900" /><label for="color2">Green</label>
  <input type="radio" name="group1" id="color3" value="#FFFF00" /><label for="color3">Yellow</label><br><br><br>
</form>
<input type="button" onclick="changeColor()">Change</button> 
```

这样，当您单击按钮时，表单将不会被提交。

# mysql - 存在空值时从两个表中减去两个值

> ID：11138752
> 
> 赞同：5
> 
> 时间：2012-06-21T13:01:31.743
> 
> 标签：mysql

```
select p.partnerid,
sum(case when c.amount is not null then c.amount else 0 end) as amount,
sum(case when c.netamt is not null then c.netamt else 0 end) as total,
sum(case when (c.netamt - d.paidamount) is not null then (c.netamt - d.paidamount) else 0 end) as remainingamount,
sum(case when d.paidamount is not null then d.paidamount else 0 end) as paidamt
from customerinfo c
left join dailypayments d on c.accno = d.accno
right join partnerinfo p on c.partnerid = p.partnerid
where (d.paiddate is null or (d.paiddate >= '2011-3-15' and d.paiddate <= '2012-6-13')) and  p.manager = 7 group by p.partnerid 
```

从上面的查询中，我需要从两个表中减去第二个表中没有值的两个值。

为了更好地理解，请参见下图。

[![图片](../Images/8cc38954a874e804efc51cb3e969f368.png)](https://i.stack.imgur.com/5Nu4m.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-21T13:06:53.470

使用该[`IFNULL()`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)函数删除`case`并简化您的计算：

```
sum(c.netamt - ifnull(d.paidamount, 0)) as remainingamount, 
```

# perl - 在 Perl 中使用 Log::Log4perl 时，如何在记录之前替换模式？

> ID：11138756
> 
> 赞同：0
> 
> 时间：2012-06-21T13:01:42.227
> 
> 标签：perl, logging, log4perl

我试图在登录到文件之前替换日志消息中的模式。记录器使用 Perl 模块`Log::Log4perl`。我看到这个模块中只有一个过滤器选项可用，这并不能解决我的问题。

其实，这就是我想做的。假设我的日志消息是`"Testing the logger module"`和`"Developing the logger module"`。我想将字符串替换为`'module'`消息`'package'`中的。因此，只要日志消息中有字符串“模块”，就应该在记录之前将其替换为“包”。我想在这里使用 Perl 的正则表达式查找/替换，这将允许我替换不同的模式。

这可能吗？任何人都可以帮忙吗？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:01:32.473

您可以通过在 conf 文件中指定[自定义 cspec来做到这一点。](https://metacpan.org/module/Log%3a%3aLog4perl%3a%3aLayout%3a%3aPatternLayout#Custom-cspecs)

```
# basic config to write the log to a file
log4perl.logger.mylog = DEBUG, MyLog
log4perl.appender.MyLog = Log::Log4perl::Appender::File
log4perl.appender.MyLog.filename = my.log

# create a custom cspec called 'A' with an anonymous sub.
# The sub would be called with the following args: $layout, $message, $category, $priority, $caller_level
# Then apply the regex as you like.
log4j.PatternLayout.cspec.A = sub { $_[1] =~ s/module/package/; $_[1] }

# then use the cspec here with '%A'
log4perl.appender.MyLog.layout = Log::Log4perl::Layout::PatternLayout
log4perl.appender.MyLog.layout.ConversionPattern = %A%n 
```

而且您的代码不需要更改：

```
use Log::Log4perl;
log::Log4perl::init('log.conf');
my $logger = Log::Log4perl->get_logger('mylog');
$logger->info("Testing the logger module"); # prints 'Testing the logger package' 
```

# ios - 重新创建选定的 UITabBarItem 边框

> ID：11138760
> 
> 赞同：2
> 
> 时间：2012-06-21T13:01:49.623
> 
> 标签：ios, ios5, core-graphics, core-image

我想重新创建一个标签栏，但我偶然发现了这个问题。正如您在下面的图像中看到的，我当前（右图）选择的选项卡栏项目比 UITabBar 中的选项要清晰或锐利得多。请注意左侧图标周围的小 1 点边框（我不知道该怎么做）以及图标内部的渐变，这在我的身上非常明显。我已经将 Core Graphics 和 Core Images Filters 视为可能的方法，但似乎无法获得这种效果。我找到了一个较旧的[线程](https://stackoverflow.com/questions/4052549/simulating-selected-tab-bar-effect)，这是我想要的一部分，但答案似乎对我不起作用，并且需要手动循环遍历图像的像素（我不知道是否需要）。有人能帮我吗？

![想要的](../Images/27236c0dbb092760381bc6ad239ad090.png) ![当前的](../Images/2f44fbc559cc32c3059bd655559b391f.png)

这是我目前使用的代码，顺便说一句，如果您看到任何错误，欢迎您纠正一些错误，因为我从 Core Graphics 开始：

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextSaveGState(context);
    {
        /* Adjust for different coordinate systems from UIKit and Core Graphics and center the image */
        CGContextTranslateCTM(context, self.bounds.size.width/2.0 - self.image.size.width/2.0, self.bounds.size.height - self.bounds.size.height/2.0 + self.image.size.height/2.0);
        CGContextScaleCTM(context, 1.0f, -1.0f);

        CGRect rect = CGRectMake(0, 0, self.image.size.width, self.image.size.height);

        /* Add a drop shadow */
        UIColor *dropShadowColor = [UIColor colorWithRed:0.0f green:0.0f blue:0.0f alpha:0.8f];
        CGContextSetShadowWithColor(context, CGSizeMake(0, 1), 5, dropShadowColor.CGColor);

        /* Draw the original image */
        CGContextDrawImage(context, rect, self.image.CGImage);

        /* Clip to the original image, so that we only draw the shadows on the
           inside of the image but nothing outside. */
        CGContextClipToMask(context, rect, self.image.CGImage);

        if(self.isSelected){
            /* draw background image */
            CGImageRef background = [UIImage imageNamed:@"UITabBarBlueGradient"].CGImage;
            CGContextDrawImage(context, rect, background);
        }
        else{
            /* draw background color to unselected items */
            CGColorRef backgroundColor = [UIColor colorWithRed:95/255.0 green:95/255.0 blue:95/255.0 alpha:1].CGColor;
            CGContextSetFillColorWithColor(context, backgroundColor);
            CGContextFillRect(context, rect);

            /* location of the gradient's colors */
            CGFloat locations[] = { 0.0, 1.0 };

            NSArray *colors = [NSArray arrayWithObjects:(id)[UIColor colorWithRed:1 green:1 blue:1 alpha:0].CGColor, (id)[UIColor colorWithRed:1 green:1 blue:1 alpha:0.6].CGColor, nil];

            /* create the gradient with colors and locations */
            CGGradientRef gradient = CGGradientCreateWithColors(colorSpace,(__bridge CFArrayRef) colors, locations);
            {
                /* start and end points of the gradient */
                CGPoint startPoint = CGPointMake(CGRectGetMidX(rect), CGRectGetMinY(rect));
                CGPoint endPoint = CGPointMake(CGRectGetMidX(rect), CGRectGetMaxY(rect));
                /* draw gradient */
                CGContextDrawLinearGradient(context, gradient, startPoint, endPoint, 0);
            }
            CGGradientRelease(gradient);
        }
    }
    CGContextRestoreGState(context);
    CGColorSpaceRelease(colorSpace);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T20:44:28.337

我也在研究这个，你可以做的优化不是每次调用 drawrect 时都渲染 UIImage，你可以将 UIImage 对象保存在 ivar 中，只需更新 UIImageView.image 属性来显示它们。

我正在用这样的“闪耀”生成我的图像：

（plus_icon.png 是一个 30 x 30 的图像，一个 4 px 宽的十字在透明背景上以黑色占据整个物体： ![加号图标](../Images/e48fa8300faabbafefa5a63f79068f57.png)在 imageView 2 和 4 中呈现如下：![呈现加号图标](../Images/5c965054f605561ec279b1ada59ab6ef.png)

```
-(UIImage *)tabBarImage{

    UIGraphicsBeginImageContext(CGSizeMake(60, 60));

    UIImage *image = [UIImage imageNamed:@"plus_icon"];

    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextSetFillColorWithColor(ctx, [[UIColor clearColor] CGColor]);
    CGContextFillRect(ctx, CGRectMake(0, 0, 60, 60));

    CGRect imageRect = CGRectMake(15, 15, 30, 30);
    CGContextDrawImage(ctx, imageRect, [image CGImage]);

    image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return image;
}

-(UIImage *)sourceImage{
    UIGraphicsBeginImageContext(CGSizeMake(60.0, 60.0));

    CGContextRef context = UIGraphicsGetCurrentContext();

    size_t num_locations = 2;
    CGFloat locations[2] = { 0.3, 1.0 };

    CGFloat components[8] = {NC(72), NC(122), NC(229), 1.0, NC(110), NC(202), NC(255), 1.0 };

    CGColorSpaceRef cspace;
    CGGradientRef gradient;
    cspace = CGColorSpaceCreateDeviceRGB();
    gradient = CGGradientCreateWithColorComponents (cspace, components, locations, num_locations);

    CGPoint sPoint = CGPointMake(0.0, 15.0);
    CGPoint ePoint = CGPointMake(0.0, 45.0);
    CGContextDrawLinearGradient (context, gradient, sPoint, ePoint, kCGGradientDrawsBeforeStartLocation| kCGGradientDrawsAfterEndLocation);
    CGGradientRelease(gradient);
    CGColorSpaceRelease(cspace);
    [self addShineToContext:context];

    UIImage * image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();    

    return image;
}

-(void)addShineToContext:(CGContextRef) context{
    CGContextSaveGState(context);
    size_t num_locations = 2;
    CGFloat locations[2] = { 0.3, 0.7};
    CGFloat components[8] = {1.0, 1.0, 1.0, 0.8, 1.0, 1.0, 1.0, 0.0};//{0.82, 0.82, 0.82, 0.4,  0.92, 0.92, 0.92, .8 };

    CGColorSpaceRef cspace;
    CGGradientRef gradient;
    cspace = CGColorSpaceCreateDeviceRGB();
    gradient = CGGradientCreateWithColorComponents (cspace, components, locations, num_locations);

    CGPoint sPoint = CGPointMake(25.0f, 15.0);
    CGPoint ePoint = CGPointMake(35.0f, 44.0f);

    [self addShineClip:context];

    CGContextDrawLinearGradient(context, gradient, sPoint, ePoint, kCGGradientDrawsBeforeStartLocation);
//    CGContextSetFillColorWithColor(context, [[UIColor redColor] CGColor]);
//    CGContextFillRect(context, CGRectMake(15,15, 30, 30));

    CGColorSpaceRelease(cspace);
    CGGradientRelease(gradient);

    CGContextRestoreGState(context);

}

-(void)addShineClip:(CGContextRef)context{
    CGContextMoveToPoint(context, 15, 35);
    CGContextAddQuadCurveToPoint(context, 25, 30, 45, 28);
    CGContextAddLineToPoint(context, 45, 15);
    CGContextAddLineToPoint(context, 15, 15);
    CGContextClosePath(context);
    CGContextClip(context);
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.imageView1.image = [self compositeOverSlate:[self drawTabBarOverSourceWithBlend:kCGBlendModeSourceIn]];
    self.imageView2.image = [self compositeOverSlate:[self drawTabBarOverSourceWithBlend:kCGBlendModeDestinationIn]];
    self.imageView3.image = [self compositeOverSlate:[self drawTabBarOverSourceWithBlend:kCGBlendModeSourceAtop]];
    self.imageView4.image = [self compositeOverSlate:[self drawTabBarOverSourceWithBlend:kCGBlendModeDestinationAtop]];
}

-(UIImage *)compositeOverSlate:(UIImage *)image{
    UIGraphicsBeginImageContext(image.size);
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGRect imageRect = CGRectMake(0, 0, 0, 0);
    imageRect.size = image.size;

    CGContextSetFillColorWithColor(ctx, [[UIColor darkGrayColor] CGColor]);

    CGContextFillRect(ctx, imageRect);
    CGContextSetShadow(ctx, CGSizeMake(-1.0, 2.0), .5);
    CGContextDrawImage(ctx, imageRect, [image CGImage]);

    UIImage *result = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();
    return result;
}

-(UIImage *)drawTabBarOverSourceWithBlend:(CGBlendMode)blendMode{
    UIGraphicsBeginImageContext(CGSizeMake(60,60));
    CGContextRef ctx = UIGraphicsGetCurrentContext();

    CGContextDrawImage(ctx, CGRectMake(0, 0, 60.0, 60.0), [[self sourceImage] CGImage]);

    CGContextSetBlendMode(ctx, blendMode);
    CGContextDrawImage(ctx, CGRectMake(0, 0, 60.0, 60.0), [[self tabBarImage] CGImage]);

    UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return result;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
} 
```

但我还没有破解边框轮廓，但如果我破解它会更新。

# authentication - yii 中的 RBAC 运气不好

> ID：11138762
> 
> 赞同：3
> 
> 时间：2012-06-21T13:01:52.183
> 
> 标签：authentication, yii, rbac

我正在尝试按照 yii 上的各种在线教程和文档来学习 RBAC，最后以类似下面的内容结束，我遗漏了一些东西，但我不知道是什么。我学习了两次理论和教程，但在实际实现方面仍然很困难，所以最后我决定向 SO 社区寻求帮助。我到现在所做的正好在下面

```
**I step**
create a table with fields:  username,password,email,role
role is enum datatype with 4 roles values ('superadmin','admin','useractive','userpassive')

**II step**
then i imported the schema-mysql.sql file in my database from the framework/web/auth folder of my yii setup.

**III step**
configured my config.php for CDbauthmanager

'authManager'=>array(
    'class'=>'CDbAuthManager',
'connectionID'=>'db',
'itemTable'=>'AuthItem',
'itemChildTable'=>'AuthItemChild',
'assignmentTable'=>'AuthAssignment',
),

**IV step**

then i added few lines to UserIdentity.php

public function authenticate()
{
    $user = Users::model()->findByAttributes(array('email'=>$this->username));
if ($user===null) { // No user found!
    $this->errorCode=self::ERROR_USERNAME_INVALID;
} 
    else if ($user->password !== $this->password ) 
    { // Invalid password!
    $this->errorCode=self::ERROR_PASSWORD_INVALID;
} else { // Okay!
        $this->errorCode=self::ERROR_NONE;
        // Store the role in a session:
        $this->setState('roles', $user->role);
    $this->_id = $user->id;
}
    return !$this->errorCode;
}
public function getId()
{
 return $this->_id;
}

**V step**

then i inserted values manually in the RBAC required table i.e. AuthItem,AuthItemChild,AuthAssignment

AuthItem table values
================================================================
name         type   description     bizrule data
user1        2          the user1 role      NULL    NULL
updateProfile    0          update profile      NULL    NULL
================================================================

AuthItemChild 
================================================================
parent  child
user1   updateProfile
================================================================

AuthAssignment table values
================================================================
itemname    userid  bizrule data
user1   1   NULL    NULL

And My users table
=================================================================
username    password    email             role
test1       pass1       tes1@local.com    user1

**VI step**

after that i tried to play with a controller

public function actionIndex()
{
    if(Yii::app()->user->checkAccess('updateProfile'))
    {
        echo "yes";
    }
    else
    {
        echo "missing something";
    }
} 
```

现在，当我登录并尝试使用它访问控制器时，`user1`它会显示“缺少某些东西”，但我已经为用户分配了相同的角色。我到底想念什么。

这就是我所做的正是我缺少的部分我不知道我几乎无法做到这一点。

感谢大家宝贵的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:06:15.217

请注意您称为“user1”的角色。如果您还不知道：这不是您的用户，而只是一个名为 user1 的角色，如果您以后再回到它，可能会感到困惑 :)

您表中的数据看起来不错。您添加了一个角色 (user1)、一个操作 (updateProfile) 并将 updateProfile 操作链接为“user1”的子项。此外，您的 AuthAssignment 表明角色 user1 已添加到 userid 1，所以一切都很好。

我认为问题在于您似乎从未对 CWebUser 实例做任何事情。Yii::app()->user 是一个 CWebUser 实例，它需要有一个与之关联的用户 ID。由于我没有看到分配此代码的代码，因此它可能为 NULL。NULL 表示 Yii 将用户视为访客。你应该尝试做一个 Yii::app()->user->id 的 var_dump 来确保；

正确的方法是在某处进行登录，如下所示： Yii::app()->user->login(, );

要么这样做，要么采取懒惰的方式，做一个 Yii::app()->user->id = ;

# macos - 使用 svnX 签出 svn:extrenals 的身份验证失败

> ID：11138764
> 
> 赞同：1
> 
> 时间：2012-06-21T13:01:57.657
> 
> 标签：macos, svn

我通过 svn:externals 属性设置了一个存储库，其中包含一些指向其他存储库的链接。使用 svn 命令从命令行签出效果很好。但是，如果我尝试使用[svnX](http://www.lachoseinteractive.net/en/community/subversion/svnx/features/) GUI 更新我的工作副本，则会出现以下错误：

> svn：警告：处理'/Users/MyName/MyProject/third_party_library'的外部定义时出错：svn：警告：'http://svn.external.com/repositories/third_party_library'的选项：授权失败：无法对服务器进行身份验证: 拒绝基本挑战 (http://svn.external.com)

因此，似乎 svnX 在签出外部时未能选择适当的身份验证方法。这很奇怪，因为如果我尝试将外部存储库作为独立工作副本检出，它甚至可以使用 svnX。

你已经有这个问题了吗？有什么方法可以告诉 svnX 在签出外部时使用哪种身份验证方法？

# android - ActionbarSherlock 溢出菜单样式问题

> ID：11138767
> 
> 赞同：7
> 
> 时间：2012-06-21T13:02:27.227
> 
> 标签：android, actionbarsherlock

我正在关注 ActionbarSherlock 网站上的示例

```
<style name="Theme.Styled" parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="actionBarStyle">@style/Widget.Styled.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.Styled.ActionBar</item>
</style>

<style name="Widget.Styled.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
    <item name="background">@drawable/bg_striped</item>
    <item name="android:background">@drawable/bg_striped</item>

    <item name="backgroundSplit">@drawable/bg_striped_split</item>
    <item name="android:backgroundSplit">@drawable/bg_striped_split</item>
</style> 
```

但是，通过此设置，我无法更改溢出菜单的样式。属性“ **android:popupMenuStyle** ”和“ **android:dropDownListViewStyle** ”被完全忽略。

如果我将主题父项更改为“ **Theme.Sherlock.Light** ”，它会起作用。这是故意的吗？如果不是，您将如何设置溢出菜单下拉菜单的样式，同时按照 Sherlock 网站上的示例保留主题父级“ **Theme.Sherlock.Light.DarkActionBar ”。**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T23:13:47.717

您应该查看此操作栏样式生成器。它工作得很好，应该有助于解决您的问题：http: [//jgilfelt.github.com/android-actionbarstylegenerator/](http://jgilfelt.github.com/android-actionbarstylegenerator/)

# c# - 使用 .net 框架（System.Drawing.Imaging）读取 exif 数据

> ID：11138769
> 
> 赞同：0
> 
> 时间：2012-06-21T13:02:31.183
> 
> 标签：c#, .net, exif

我正在使用 .net 框架从 jpg 文件中读取 exif 元数据。问题是如何将 PropertyItem.Value（即字节数组）转换为可读形式，例如字符串。

例如，我使用此代码读取图片的 GPSAltitude 值：

```
 var pic = System.Drawing.Image.FromFile(@"c:\mypic.jpg");
        var GPSAltitude = pic.GetPropertyItem(6); 
```

GPSAltitude.Value 是一个像这样的字节数组：{75,2,0,0,1,0,0,0}。

我知道高度是 587 msl .. 但是我如何从那个字节数组转到 587 ？

我试图用 ASCIIencoding 和其他一些编码来阅读它，但我得到了类似“K\0\0\0\0\0”的东西。

任何想法 ？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T13:32:14.450

除了已经给出的答案之外，您可能还想查看实际的[Exif 规范](https://web.archive.org/web/20131207065832/http://exif.org/Exif2-2.PDF)。

**GPS海拔高度**（第 47 页）

指示基于 GPSAltitudeRef 中的参考的高度。高度表示为一个 RATIONAL 值。参考单位是米。

**GPSAltitudeRef**（第 47 页）

指示用作参考高度的高度。如果参考是海平面并且海拔高度高于海平面，则给出 0。如果海拔低于海平面，则给出值 1，并且海拔在 GPSAltitude 标签中显示为绝对值。参考单位是米。请注意，此标签是 BYTE 类型，与其他参考标签不同。

**理性**（第 14 页）

两个长。第一个 LONG 是分子，第二个 LONG 表示分母。

**长**（第 14 页）

一个 32 位（4 字节）无符号整数。

所以，`{75, 2, 0, 0, 1, 0, 0, 0}`是`{75, 2, 0, 0} / {1, 0, 0, 0}`。当您将字节读取为小端字节序时，您得到`0000 0010 0100 1011 / 0000 0000 0000 0001`的计算结果为 587。其他答案解释*了如何*获得答案，但希望这能解释为什么会这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:15:31.670

只需将您转换`byte[]`为 an`int`即可查看您期望的 587 值：

```
var pic = System.Drawing.Image.FromFile(@"c:\mypic.jpg");         
var GPSAltitude = pic.GetPropertyItem(6); 
var altitude = System.BitConverter.ToInt32(GPSAltitude,0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T13:09:16.467

可能[BitConverter](http://msdn.microsoft.com/en-us/library/system.bitconverter.aspx)会起作用。

```
public static void Main()
   {

      byte[] bytes = {75, 2, 0, 0, 1, 0, 0, 0};
      int result = BitConverter.ToInt32(bytes, 0);
      Console.WriteLine("Returned value: {0}", result);
      Console.ReadLine();
   } 
```

结果是：587

# drupal - 干扰在 drupal 中创建或查看内容的常规模式后，换行符丢失

> ID：11138775
> 
> 赞同：0
> 
> 时间：2012-06-21T13:03:02.073
> 
> 标签：drupal, newline, drupal-modules, drupal-forms

已经创建了一个模块和两个自定义内容类型（协议和协议 2）。该模块干扰了创建和编辑内容类型协议的常规模式，并改变了查看内容类型协议的常规模式2。

在这两种情况下，我都会遇到问题，即我丢失了添加内容的文本区域中存在的换行符，或者在查看存储的换行符的情况下。

这是在文本区域中输入的文本，如下所示：

“文本

和

线

休息。”

最终看起来像这样：

“带有换行符的文本。”

我已经回显了 form_state 的内容，在这两种情况下我都没有看到换行符，并且我在获取和更改文本时使用了 form_state。

我不确定问题可能是什么，或者该信息丢失的确切时间和方式。有没有人有任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:22:59.840

这可能意味着您的默认文本格式是一种去除换行符的格式。转到 admin/config/content/formats 以查看您的文本格式以及哪个是默认格式。

如果您想在自定义模块中为您的 textarea 专门设置某种文本格式，则如下所示：

```
$form['yourfield'] = array(
 '#type'=>'text_format',
 '#format'=>'full_html',
 ...
 ...
); 
```

这能解决吗？

# android - 为什么我的邮件应用程序无法工作（运行时错误）？

> ID：11138777
> 
> 赞同：0
> 
> 时间：2012-06-21T13:03:07.697
> 
> 标签：android, email, runtime-error

我一直在努力让一个邮件应用程序从一个教程中工作

[http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android](http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android)

但是，每次尝试运行它时，我都会遇到运行时错误。我是 android 编程的新手，我不太确定如何阅读 logcat 错误，所以我让自己受互联网的摆布，请帮忙。

我正确设置了 Internet 权限，并且activation.jar、mail.jar 和additional.jar 包含在项目中并设置了构建路径。

主要代码

```
 package com.dummies.android.MailTest;

 import android.app.Activity;
 import android.os.Bundle;
 import android.util.Log;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.widget.Button;
 import android.widget.Toast;

 public class MailTestActivity extends Activity 
 {
private Button mButton;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
   {
    mButton = (Button) findViewById(R.id.send);

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button mButton = (Button) findViewById(R.id.send); 
    mButton.setOnClickListener(new View.OnClickListener() 
    { 
      public void onClick(View view) 
      { 
        Mail m = new Mail("********.com", "********"); 

        String[] toArr = {"*******@gmail.com"}; 
        m.setTo(toArr); 
        m.setFrom("*********.com"); 
        m.setSubject("This is an email sent using my Mail JavaMail wrapper from an        Android device."); 
        m.setBody("Email body."); 

        try { 
          //m.addAttachment("/sdcard/filelocation"); 

          if(m.send()) { 
            Toast.makeText(MailTestActivity.this, "Email was sent successfully.", Toast.LENGTH_LONG).show(); 
          } else { 
            Toast.makeText(MailTestActivity.this, "Email was not sent.",   Toast.LENGTH_LONG).show(); 
          } 
        } catch(Exception e) { 
          //Toast.makeText(MailApp.this, "There was a problem sending the email.", Toast.LENGTH_LONG).show(); 
          Log.e("MailApp", "Could not send email", e); 
        } 
      } 
    }); 
  } 
} 
```

邮件类

```
 package com.dummies.android.MailTest;

 import java.util.Date; 
 import java.util.Properties; 
 import javax.activation.CommandMap; 
 import javax.activation.DataHandler; 
 import javax.activation.DataSource;  
 import javax.activation.FileDataSource; 
 import javax.activation.MailcapCommandMap; 
 import javax.mail.BodyPart; 
 import javax.mail.Multipart; 
 import javax.mail.PasswordAuthentication; 
 import javax.mail.Session; 
 import javax.mail.Transport; 
 import javax.mail.internet.InternetAddress; 
 import javax.mail.internet.MimeBodyPart; 
 import javax.mail.internet.MimeMessage; 
 import javax.mail.internet.MimeMultipart; 

 public class Mail extends javax.mail.Authenticator { 
 private String _user; 
 private String _pass; 

 private String[] _to; 
 private String _from; 

 private String _port; 
 private String _sport; 

 private String _host; 

 private String _subject; 
 private String _body; 

 private boolean _auth; 

 private boolean _debuggable; 

 private Multipart _multipart; 

 public Mail() { 
  _host = "smtp.gmail.com"; // default smtp server 
  _port = "465"; // default smtp port 
  _sport = "465"; // default socketfactory port 

  _user = ""; // username 
  _pass = ""; // password 
  _from = ""; // email sent from 
  _subject = ""; // email subject 
  _body = ""; // email body 

  _debuggable = false; // debug mode on or off - default off 
  _auth = true; // smtp authentication - default on 

  _multipart = new MimeMultipart(); 

   // There is something wrong with MailCap, javamail can not find a handler for the    multipart/mixed part, so this bit needs to be added. 
   MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap(); 
   mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html"); 
   mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml"); 
   mc.addMailcap("text/plain;; x-java-content- handler=com.sun.mail.handlers.text_plain"); 
   mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed"); 
   mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822"); 
   CommandMap.setDefaultCommandMap(mc); 
   } 

  public Mail(String user, String pass) { 
  this(); 

  _user = user; 
  _pass = pass; 
 } 

 public Mail(EditText user, EditText pass) 
 {
  _userE = user; 
  _passE = pass;
 }

 public boolean send() throws Exception { 
 Properties props = _setProperties(); 

 if(!_user.equals("") && !_pass.equals("") && _to.length > 0 && !_from.equals("") && !_subject.equals("") && !_body.equals("")) { 
  Session session = Session.getInstance(props, this); 

  MimeMessage msg = new MimeMessage(session); 

  msg.setFrom(new InternetAddress(_from)); 

  InternetAddress[] addressTo = new InternetAddress[_to.length]; 
  for (int i = 0; i < _to.length; i++) { 
    addressTo[i] = new InternetAddress(_to[i]); 
  } 
    msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); 

  msg.setSubject(_subject); 
  msg.setSentDate(new Date()); 

  // setup message body 
  BodyPart messageBodyPart = new MimeBodyPart(); 
  messageBodyPart.setText(_body); 
  _multipart.addBodyPart(messageBodyPart); 

  // Put parts in message 
  msg.setContent(_multipart); 

  // send email 
  Transport.send(msg); 

  return true; 
  } else { 
   return false; 
  }  
  } 

 public void addAttachment(String filename) throws Exception { 
  BodyPart messageBodyPart = new MimeBodyPart(); 
 DataSource source = new FileDataSource(filename); 
 messageBodyPart.setDataHandler(new DataHandler(source)); 
 messageBodyPart.setFileName(filename); 

 _multipart.addBodyPart(messageBodyPart); 
 } 

 @Override 
 public PasswordAuthentication getPasswordAuthentication() { 
 return new PasswordAuthentication(_user, _pass); 
 } 

private Properties _setProperties() { 
Properties props = new Properties(); 

props.put("mail.smtp.host", _host); 

if(_debuggable) { 
  props.put("mail.debug", "true"); 
} 

if(_auth) { 
  props.put("mail.smtp.auth", "true"); 
} 

props.put("mail.smtp.port", _port); 
props.put("mail.smtp.socketFactory.port", _sport); 
props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory"); 
props.put("mail.smtp.socketFactory.fallback", "false"); 

return props; 
 } 

 // the getters and setters 
 public String getBody() { 
 return _body; 
 } 

 public void setBody(String _body) { 
  this._body = _body; 
 } 

 public void setSubject(String _subject) 
 { 
    this._subject = _subject; 
 }

 public void setFrom(String _from) 
 { 
    this._from = _from; 
 }

 public void setTo(String[] _to) 
 { 
    this._to = _to; 
 }

 // more of the getters and setters ….. 
 } 
```

最后这是我的logcat

```
06-21 12:42:32.049: E/dalvikvm(1079): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
06-21 12:42:32.859: E/dalvikvm(1079): Could not find class 'com.dummies.android.MailTest.Mail', referenced from method com.dummies.android.MailTest.MailTestActivity$1.onClick
06-21 12:42:36.820: E/AndroidRuntime(1079): FATAL EXCEPTION: main
06-21 12:42:36.820: E/AndroidRuntime(1079): java.lang.NoClassDefFoundError: com.dummies.android.MailTest.Mail
06-21 12:42:36.820: E/AndroidRuntime(1079):     at com.dummies.android.MailTest.MailTestActivity$1.onClick(MailTestActivity.java:30)
06-21 12:42:36.820: E/AndroidRuntime(1079):     at android.view.View.performClick(View.java:3511)
06-21 12:42:36.820: E/AndroidRuntime(1079):     at android.view.View$PerformClick.run(View.java:14105)
06-21 12:42:36.820: E/AndroidRuntime(1079):     at android.os.Handler.handleCallback(Handler.java:605)
06-21 12:42:36.820: E/AndroidRuntime(1079):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-21 12:42:36.820: E/AndroidRuntime(1079):     at android.os.Looper.loop(Looper.java:137)
06-21 12:42:36.820: E/AndroidRuntime(1079):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-21 12:42:36.820: E/AndroidRuntime(1079):     at java.lang.reflect.Method.invokeNative(Native Method)
06-21 12:42:36.820: E/AndroidRuntime(1079):     at java.lang.reflect.Method.invoke(Method.java:511)
06-21 12:42:36.820: E/AndroidRuntime(1079):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-21 12:42:36.820: E/AndroidRuntime(1079):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-21 12:42:36.820: E/AndroidRuntime(1079):     at dalvik.system.NativeStart.main(Native Method) 
```

编辑：没有对我的代码进行编辑，我没有得到 NoClassDefFoundError 。两个类都直接添加到包下的 src 文件夹中，没有外部添加任何代码。那么为什么我现在收到此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:17:28.070

> 06-21 12:42:32.859: E/dalvikvm(1079):**找不到**类 ' *com.dummies.android.MailTest.Mail* '，**引用自**方法 *com.dummies.android.MailTest.MailTestActivity$1.onClick*

这个错误应该是不言自明的。确保所有课程都在正确的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:01:07.487

Android SDK 可能有一个错误，我在 SDK 包 18 中遇到了同样的错误，所以我恢复到 SDK 包 16，它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:53:03.647

答案比我想象的更简单，我开始的教程是一个较旧的教程。我只需要将 lib 文件夹的名称更改为 libs 就可以了！

# facebook - 如何在配置文件上添加指向打开图形操作的链接

> ID：11138780
> 
> 赞同：1
> 
> 时间：2012-06-21T13:03:21.200
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我创建了一个适用于配置文件的开放图形操作。这会以这种形式创建一个帖子

```
{User 1} {action} {User 2} in {my application} 
```

问题是当我点击帖子图片或用户名时，我被重定向到用户的个人资料。我需要将用户重定向到我们应用程序的主页。如何将链接添加到我们的主页？

澄清：我希望 {user 2} 收到执行操作的通知并将其张贴在他的墙上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:23:09.583

如果您在操作中链接到用户，Facebook 会将对该用户姓名的点击带到用户的个人资料中——这是预期的行为。

如果您不希望这样，请不要链接到用户的 Facebook 个人资料，链接到您的应用程序中的自定义对象，该对象代表该用户在您的应用程序中的活动/个人资料

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:28:42.627

如果您想在有人点击 {User 2} 或点击该操作的图片时将用户重定向到您的主页，最好的办法是创建一个自定义页面（与您网站上的用户个人资料分开），该页面将检测用户是否代理是 Facebook 或普通用户。将该页面设置为您的 Open Graph 对象的 url。

Facebook 将获取其数据，您会将用户重定向到主页。例如：

```
if request.env['HTTP_USER_AGENT'] == 'facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)'
  render :profile_tags # you just need to show the open graph tags
else
  redirect_to root_url
end 
```

# ruby-on-rails - Rails - 处理异常

> ID：11138785
> 
> 赞同：2
> 
> 时间：2012-06-21T13:03:32.383
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我知道如何处理 RecordNotFound 的错误

但是我该如何处理路由错误（没有路由匹配 [GET]）？

PS 在本主题中我找不到答案 - [Rails - 如何处理不存在的路由（“没有路由匹配 [GET]”）？](https://stackoverflow.com/questions/10218912/rails-how-to-handle-routes-that-dont-exist-no-route-matches-get)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T14:23:43.077

处理路由（以及所有其他）的另一种方法是在 ApplicationController 中添加以下内容：

```
unless Rails.application.config.consider_all_requests_local
  rescue_from Exception do |e|
    render_500 e
  end
  rescue_from ActionController::RoutingError, with: :render_404
  rescue_from ActionController::UnknownController, with: :render_404
  rescue_from ActionController::UnknownAction, with: :render_404
  rescue_from ActiveRecord::RecordNotFound, with: :render_404
end 
```

然后确保定义`render_500`，`render_404`以便他们实际渲染一些东西。在我的应用程序中，我完成了：

```
def render_404(exception)
  @not_found_path = exception.message
  respond_to do |format|
    format.html { render template: 'errors/error_404', layout: 'layouts/application', status: 404 }
    format.all { render nothing: true, status: 404 }
  end
end 
```

然后在`errors/error_404`. 这样它就可以处理所有路由错误并且仍然使用我的应用程序布局。

您可以使用 @not_found_path 向用户显示错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T13:07:01.530

在你的每一条路线之后`config/routes.rb`，添加这一行：

```
match '*url' => 'errors#routing' 
```

然后创建一个名为的控制器`ErrorsController`并添加一个`routing`操作，您可以在其中`params[:url]`了解哪个 URL 导致了 404。

顺便说一句，这是查看您的网站是否有死链接的好方法。

希望能帮助到你 ！

# cocoa - 截断多行 NSTextField 的最后一行

> ID：11138786
> 
> 赞同：6
> 
> 时间：2012-06-21T13:03:34.700
> 
> 标签：cocoa, nstextfield, nstextfieldcell

我正在尝试创建一个类似于 Finder 文件标签的文本字段。我希望在中间截断最后（第二）行。

我从多行开始`NSTextField`。

但是，调用`[self.cell setLineBreakMode:NSLineBreakByTruncatingMiddle];`会导致文本字段仅显示一个*截断行*（不再有换行符）。

这是 Finder 中的样子：

![查找器示例](../Images/d9ae4c718db69ed8aca9b63667aa8dce.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T12:45:30.647

如果您想像查找器标签一样包装文本，使用两个标签对您没有任何好处，因为您需要知道第一行的最大可破坏文本量是多少。另外，如果您正在构建将显示大量项目的东西，则两个标签会不必要地使 GUI 负担过重。

像这样设置你的 NSTextField.cell：

```
[captionLabel.cell setLineBreakMode: NSLineBreakByCharWrapping]; 
```

然后找到“NS(Attributed)String+Geometrics”的代码（谷歌它，它就在那里）。您必须 #import "NS(Attributed)String+Geometrics.h" 来测量文本。它猴子修补 NSString 和 NSAttributedString

我包含以下代码以完全按照 Finder 在其标题中的操作方式包装文本。使用图标下方的一个标签，它假定与 Finder 一样，将有两行标题。

首先，这是您在代码中调用以下代码的方式：

```
NSString *caption = self.textInput.stringValue;
CGFloat w = self.captionLabel.bounds.size.width;
NSString *wrappedCaption = [self wrappedCaptionText:self.captionLabel.font caption:caption width:w];
self.captionLabel.stringValue = wrappedCaption ? [self middleTruncatedCaption:wrappedCaption withFont:self.captionLabel.font width:w] : caption; 
```

现在主要代码：

```
#define SINGLE_LINE_HEIGHT 21

/*
    This is the way finder captions work - 

    1) see if the string needs wrapping at all
    2) if so find the maximum amount that will fit on the first line of the caption
    3) See if there is a (word)break character somewhere between the maximum that would fit on the first line and the begining of the string
    4) If there is a break character (working backwards) on the first line- insert a line break then return a string so that the truncation function can trunc the second line
*/

-(NSString *) wrappedCaptionText:(NSFont*) aFont caption:(NSString*)caption width:(CGFloat)captionWidth
{
    NSString *wrappedCaption = nil;

    //get the width for the text as if it was in a single line
    CGFloat widthOfText = [caption widthForHeight:SINGLE_LINE_HEIGHT font:aFont];

    //1) nothing to wrap
    if ( widthOfText <= captionWidth )
       return nil;

    //2) find the maximum amount that fits on the first line
    NSRange firstLineRange = [self getMaximumLengthOfFirstLineWithFont:aFont caption:caption width:captionWidth];

    //3) find the first breakable character on the first line looking backwards
    NSCharacterSet *notAlphaNums = [NSCharacterSet alphanumericCharacterSet].invertedSet;
    NSCharacterSet *whites = [NSCharacterSet whitespaceAndNewlineCharacterSet];

    NSRange range = [caption rangeOfCharacterFromSet:notAlphaNums options:NSBackwardsSearch range:firstLineRange];

    NSUInteger splitPos;
    if ( (range.length == 0) || (range.location < firstLineRange.length * 2 / 3) ) {
        // no break found or break is too (less than two thirds) far to the start of the text
        splitPos = firstLineRange.length;
    } else {
        splitPos = range.location+range.length;
    }

    //4) put a line break at the logical end of the first line
    wrappedCaption = [NSString stringWithFormat:@"%@\n%@",
                        [[caption substringToIndex:splitPos] stringByTrimmingCharactersInSet:whites],
                        [[caption substringFromIndex:splitPos] stringByTrimmingCharactersInSet:whites]];

    return  wrappedCaption;
}

/*
    Binary search is great..but when we split the caption in half, we dont have far to go usually
    Depends on the average length of text you are trying to wrap filenames are not usually that long
    compared to the captions that hold them...
 */

-(NSRange) getMaximumLengthOfFirstLineWithFont:(NSFont *)aFont caption:(NSString*)caption width:(CGFloat)captionWidth
{
    BOOL fits = NO;
    NSString *firstLine = nil;
    NSRange range;
    range.length = caption.length /2;
    range.location = 0;
    NSUInteger lastFailedLength = caption.length;
    NSUInteger lastSuccessLength = 0;
    int testCount = 0;
    NSUInteger initialLength = range.length;
    NSUInteger actualDistance = 0;

    while (!fits) {
        firstLine = [caption substringWithRange:range];

        fits = [firstLine widthForHeight:SINGLE_LINE_HEIGHT font:aFont] < captionWidth;

        testCount++;

        if ( !fits ) {
            lastFailedLength = range.length;
            range.length-= (lastFailedLength - lastSuccessLength) == 1? 1 : (lastFailedLength - lastSuccessLength)/2;
            continue;
        } else  {
            if ( range.length == lastFailedLength -1 ) {
                actualDistance = range.length - initialLength;
                #ifdef DEBUG
                    NSLog(@"# of tests:%d actualDistance:%lu iteration better? %@", testCount, (unsigned long)actualDistance, testCount > actualDistance ? @"YES" :@"NO");
                #endif
                break;
            } else {
                lastSuccessLength = range.length;
                range.length += (lastFailedLength-range.length) / 2;
                fits = NO;
                continue;
            }
        }
    }

    return range;
}

-(NSString *)middleTruncatedCaption:(NSString*)aCaption withFont:(NSFont*)aFont width:(CGFloat)captionWidth
{
    NSArray *components = [aCaption componentsSeparatedByString:@"\n"];
    NSString *secondLine = [components objectAtIndex:1];
    NSString *newCaption = aCaption;

    CGFloat widthOfText = [secondLine widthForHeight:SINGLE_LINE_HEIGHT font:aFont];
    if ( widthOfText > captionWidth ) {
        //ignore the fact that the length might be an odd/even number "..." will always truncate at least one character
        int middleChar = ((int)secondLine.length-1) / 2;

        NSString *newSecondLine = nil;
        NSString *leftSide = secondLine;
        NSString *rightSide = secondLine;        

        for (int i=1; i <= middleChar; i++) {
            leftSide = [secondLine substringToIndex:middleChar-i];
            rightSide = [secondLine substringFromIndex:middleChar+i];

            newSecondLine = [NSString stringWithFormat:@"%@…%@", leftSide, rightSide];

            widthOfText = [newSecondLine widthForHeight:SINGLE_LINE_HEIGHT font:aFont];

            if ( widthOfText <= captionWidth ) {
                newCaption = [NSString stringWithFormat:@"%@\n%@", [components objectAtIndex:0], newSecondLine];
                break;
            }
        }
    }

    return newCaption;
} 
```

干杯!

PS 在原型中测试效果很好可能有错误...找到它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:12:07.970

我怀疑那里有两个标签。第一个包含文件名的前 20 个字符，第二个包含任何溢出，截断。

第一个标签的长度可能会根据用户的字体设置受到限制。

# html - css浮动表单中的2个输入字段

> ID：11138787
> 
> 赞同：2
> 
> 时间：2012-06-21T13:03:35.247
> 
> 标签：html, css, forms, css-float, fieldset

我在理解 css 时遇到以下问题。

我有一个注册表。在那种形式中，我使用了一个字段集。现在我想在每一行旁边放置两个输入字段。上面的每个字段也应该有一个标签。

所以我想要实现的是：

```
 label 1                         label 2
    _______________                 _______________ 
   (_______________)               (_______________)

    label 3                        label 4
    _______________                 _______________ 
   (_______________)               (_______________) 
```

我是 CSS 新手，在理解 float 和 clear 方面存在一些问题。

到目前为止，我有以下结构：

```
 _______________              
label 1   (_______________)             
           _______________              
label 2   (_______________) 
           _______________              
label 3   (_______________) 
           _______________              
label 4   (_______________) 
```

这是我的想法：

我将字段集设置为特定的高度和宽度：

```
fieldset { height: 330px; width: 550px;} 
```

之后我用来为我的标签和输入设计设置信息：

```
label { font-family: Arial, Helvetica, sans-serif;
    font-size: 20px;
    font-weight: bold;
    color: #ECECEC;
    text-decoration: none;
    width: 100px;
}
input {
    width: 250px;
    height: 25px;
    color:#bababa;
    padding:5px;
    font-size: 12px;
    -moz-border-radius: 6px;  
} 
```

到目前为止的设计。现在我想，由于旁边的 2 个列，我想实现它需要每一个都浮动。所以我建立了这两个类：

```
.fl { float: left; margin-bottom:15px;}
.fd { clear: left; margin-bottom:15px;} 
```

在类 fl float 中，意味着将 box1 设置为浮动属性，即 box2 将位于其左侧。fd 类将用于下一行。这样 box3 将分成另一行。边距只是为了在每个字段之间保留一些空间。

在我的 html 中，我得到了以下代码：

```
<form>
<fieldset>
<legend>Headline for fieldset</legend>
<ul>

<li class="fl">
<label for="label1">label 1</label>
<input type="text" id="label1" name="label1" tabindex="10" autocomplete="off">
</li>

<li class="fl">
<label for="label2">label2</label>
<input type="text" id="label2" name="label2" tabindex="20" autocomplete="off">
</li>

<li class="fd">
<label for="label3">label3</label>
<input type="text" id="label3" name="label3" tabindex="30" autocomplete="off">
</li>

<li class="fl">
<label for="label4">label4</label>
<input type="text" id="label4" name="label4" tabindex="40" autocomplete="off">
</li>

</ul>
</fieldset>
</form> 
```

所以我有以下问题：

1\. 我怎样才能将标签放置在输入字段上方？

2\. 我怎样才能达到将它们放在旁边的主要目标？

3\. 如何调整一行输入字段之间的间距？

如果有人可以帮助我，我真的很感激。多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:09:27.247

在列表中使用表单控件存在一些语义问题。但最简单的方法是找到您的解决方案，将每个`<label><input>`组合包装在一个`<div>`then 位置`<div>`。使用 as table 是一种非常古老的方法。

CSS

```
form div.left {
 width: 20%;
 float: left;
 display: inline;
 }
form div.right {
 width: 20%;
 float: right;
 display: inline;
 } 
```

HTML

```
<form>
<div class="left"><label for="one">Label one</label><br>
<input id="one"></div>
<div class="right"><label for="two">Label two</label><br>
<input id="two"></div> 
```

如果您不想使用`<br>`like 包装`<label>`或`<input>`在跨度中并定位它，您可能会觉得很有趣。你能扩展问题3吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:11:18.570

我认为这就是你想要的：

```
fieldset { 
    height: 330px; 
    width: 580px;
}

label { 
    font-family: Arial, Helvetica, sans-serif;
    font-size: 20px;
    font-weight: bold;
    color: #ECECEC;
    text-decoration: none;
    width: 100px;
    display: block;
}
input {
    width: 250px;
    height: 25px;
    color:#bababa;
    padding:5px;
    font-size: 12px;
    -moz-border-radius: 6px;
    margin-right: 15px;
}

.fl, .fd { 
    float: left; 
    margin-bottom:15px;
 } 
```

编辑：工作示例：http: [//jsfiddle.net/7hMCN/](http://jsfiddle.net/7hMCN/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:24:12.437

问题 1 [和 2？]）我添加了`<br />`新的行元素（您可能会让标签向左浮动或更改`display:block;`）。

问题 3）我使用`:nth-of-type(odd)`并添加了一个边距权利

[小提琴示例在这里](http://jsfiddle.net/Kyomu/EnM2g/)

# android - 如何在 Scrollview 内的 Webview 中进行垂直滚动？

> ID：11138788
> 
> 赞同：1
> 
> 时间：2012-06-21T13:03:41.107
> 
> 标签：android, webview, scrollview, touch-event

我有一个嵌入在滚动视图中的 Webview。Webview 本身具有可垂直滚动的区域。

现在，如果我尝试在 webview 内滚动，scrollview 会拦截 touchevent 并滚动整个 webview，而不是只移动小的可滚动 div。

仅当 webview 不想滚动时，如何才能使滚动视图工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T02:23:50.510

@Janusz，我遇到了同样的问题。我的解决方案是基于扩展的滚动视图行为以及正确的布局。我在[这里](https://stackoverflow.com/a/12963499/1152250)写了同一个问题的答案。如果您有实施问题或疑问，请告诉我，请告知是否有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T21:39:01.343

就我而言，我在滚动视图容器中有一个 webview，并且滚动视图和 webview 是全屏的。我可以通过覆盖 webView touchListener 中的 onTouch 事件来解决这个问题。

```
 scrollView = (ScrollView)findViewById(R.id.scrollview); 

   webView.setOnTouchListener(new OnTouchListener() {           
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            scrollView.requestDisallowInterceptTouchEvent(true);
            return false;
        }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-24T06:06:36.443

使用 TouchyWebView.java

```
public class TouchyWebView extends WebView {

    public TouchyWebView(Context context) {
        super(context);
    }

    public TouchyWebView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public TouchyWebView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event){
        requestDisallowInterceptTouchEvent(true);
        return super.onTouchEvent(event);
    }          
} 
```

在布局文件中：

```
<yourclasapath.TouchyWebView 
                android:id="@+id/description_web"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                 /> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-26T06:58:37.883

我们的解决方案通过[Javascript 接口](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29)使用 Javascript 回调。每次触摸 WebView 内可滚动的 UI 的一部分时，都会通过 java 脚本调用一个侦听器，该侦听器在 WebViews 父级上调用[requestDisallowInterceptTouchEvent](http://developer.android.com/reference/android/view/ViewParent.html#requestDisallowInterceptTouchEvent%28boolean%29)。

这不是最优的，而是目前找到的最好的解决方案。如果用户滚动得非常快，则 WebView 中的图层将不会滚动，但以正常的滚动速率可以正常工作。

# php - Facebook FQL 批量请求：突然收到“异常：1：发生未知错误”

> ID：11138789
> 
> 赞同：0
> 
> 时间：2012-06-21T13:03:43.060
> 
> 标签：php, facebook, facebook-graph-api, facebook-fql

直到昨天（2012 年 6 月 20 日）我的应用程序运行顺利。从昨天开始，我开始在对各个页面的所有多查询中收到此错误（但奇怪的是，对活动用户来说不是）。

除了这个应用程序正在从“洞察”表中查询一天的信息以及其他表中的一些其他指标这一事实之外，我真的不确定要提供哪些其他信息......但这从来都不是对我来说问题。

我查看了一些错误报告，但似乎没有什么能模仿我遇到的问题。整个月都有关于此错误发生的零星报告，但它一定不能猖獗，因为它似乎对 Facebook 并不高度关注。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T00:14:11.090

对我来说，`page_fans_city`从我想要的指标列表中删除可以让一切恢复正常。希望对您有所帮助。

# jquery - Google Chrome Prerender 是否适用于 ajax 请求

> ID：11138792
> 
> 赞同：5
> 
> 时间：2012-06-21T13:03:50.247
> 
> 标签：jquery, html, google-chrome, prerender

我正在寻找使用预渲染来加速页面，使用 Chrome 预渲染：

[https://developers.google.com/chrome/whitepapers/prerender](https://developers.google.com/chrome/whitepapers/prerender)

我想知道这是否适用于 ajax 请求？我有一组链接，它们通过 jQuery $.get 在他们的页面中加载到模式中。我还有一个为这些链接创建预渲染标签的脚本。

不过，ajax 负载似乎没有任何性能提升。预渲染正在工作（检查上面链接中的故障排除部分），它似乎加快了标准链接，但不是 ajax 请求。

它可能无法以这种方式工作，但我在其他任何地方都找不到有关它的任何信息。

# jquery - 在 IE8 中裁剪的 jQuery fancyBox 关闭图标

> ID：11138794
> 
> 赞同：0
> 
> 时间：2012-06-21T13:03:55.003
> 
> 标签：jquery, css, fancybox

我正在尝试使用 Fancybox 为托管在 Wild Apricot 在线会员系统上的网站提供模式登录。

重新设计仍有待完成，但在 IE8 中显示框的方式存在一个重大缺陷（在 FF、Chrome 和 Opera 中很好）。方框的右上角应该有一个带有 X 的不透明圆圈；在 IE8 中，只有与框重叠的圆圈部分可见 - 其余部分被裁剪。

较早的一个问题[jQuery fancyBox Closing icon](https://stackoverflow.com/questions/10217408/jquery-fancybox-closing-icon)产生了一个建议，（误用溢出：隐藏）但是更改我可以在各种 CSS 文件中找到的两个实例没有任何区别。

该页面在这里：[www.eastmidlandsletb.net](http://www.eastmidlandsletb.net)。要启动该框，请单击主菜单下方的“登录和管理帐户”链接。

我假设这是一些 IE CSS 故障，但这超出了我的知识水平。我怎样才能让它在 IE 中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:20:52.250

您的页面没有有效的 DOCTYPE。

# github - 是否可以在 Gollum wiki (GitHub wiki) 页面中重定向？

> ID：11138802
> 
> 赞同：6
> 
> 时间：2012-06-21T13:04:27.733
> 
> 标签：github, wiki, gollum-wiki

在 RailsConf 2012 上，我们当地的 Ruby 小组创建了一个[众包 wiki](https://github.com/newhavenrb/railsconf2012/wiki)。我们对它的受欢迎程度感到非常满意（截至今天有 218 位观察者）。

一些成员正在参加 Goruco 2012，我们希望为该会议做一些类似的事情。目前的计划是拥有一个大型的基于 git 的 Ruby 会议 wiki。我们有过去几年的内容（RubyConf 2011、RailsConf 2011、2012 和现在的 Goruco 2012），所以我们想将它们合并到一个地方。到目前为止，RailsConf 2012 wiki 的关注者最多，我们希望保留这些人。最简单的方法似乎是像这样重命名存储库：

*   旧：[https ://github.com/newhavenrb/railsconf2012/wiki](https://github.com/newhavenrb/railsconf2012/wiki)
*   新：[https ://github.com/newhavenrb/conferences/wiki](https://github.com/newhavenrb/conferences/wiki)

然后，“主页”页面将按年份列出会议。

但因为它已成为社区资源，我们不想破坏博客、Twitter 等的任何链接。这样做最简单的方法是什么？[Gollum](https://github.com/github/gollum)是否支持任何类型的重定向？（或者我们需要想出一个创造性的解决方案？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T00:28:37.333

由于没有人从木制品中走出来，这就是我打算做的事情：

*   克隆现有的 wiki
*   运行脚本

```
for f in *.md; do
  cat <<EOF > $f
We've Moved!
------------

The RailsConf 2012 wiki is now [a general Ruby conference wiki](https://github.com/newhavenrb/conferences/wiki).

Please find this page in its new home:  https://github.com/newhavenrb/conferences/wiki/$(basename $f .md)
EOF
done 
```

这将使 Markdown 像这样：

> ## 我们搬家了！
> 
> RailsConf 2012 wiki 现在[是一个通用的 Ruby 会议 wiki](https://github.com/newhavenrb/conferences/wiki)。
> 
> 请在其新主页中找到此页面： [https ://github.com/newhavenrb/conferences/wiki/Rich-Hickey-Keynote](https://github.com/newhavenrb/conferences/wiki/Rich-Hickey-Keynote)

*   提交更改（除了`Home.md`, `README.md`, `_Footer.md`, `_Sidebar.md`; 他们将是错误的）
*   将现有 wiki 重命名为`conferences`
*   使新的 repo 命名`railsconf2012`
*   按“我们搬家了！” 新`railsconf2012`仓库的内容

# c# - 从 C# 程序调用 Eclipse 插件中的 Java 方法

> ID：11138805
> 
> 赞同：1
> 
> 时间：2012-06-21T13:04:41.443
> 
> 标签：c#, java, eclipse, eclipse-plugin, communication

我编写了一个 C# 程序，它必须在 eclipse 插件进程中调用两个方法。

我需要一个关于如何实现 C# 进程和 java 进程之间通信的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:07:46.820

您可以使用套接字或进程间通信 (IPC) 结构（更多信息请参见[此处](http://www.cs.um.edu.mt/~jcord/SystemsProgramming/CourseMaterials/10_SimpleSynchronousIPCCommunication.pdf)）。最好的取决于你在做什么以及你是如何做的，这不是你在你的问题中暴露的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:08:19.677

也许试试这个：[Ikvm](http://www.ikvm.net/) 它是一个在 .net 中实现的 JVM，它提供了多种工具来帮助开发。

# java - 如何在无状态会话 Bean 中访问 SFSB

> ID：11138809
> 
> 赞同：2
> 
> 时间：2012-06-21T13:04:52.167
> 
> 标签：java, jakarta-ee, ejb, stateless, stateful

我正在创建一个应用程序，其中 java swing 客户端通过远程接口连接到 EJB。现在，一旦客户端登录，无状态 ejb 是否可以直接从有状态会话 bean 获取客户端特定数据而不涉及客户端？

找不到有关上述问题的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:56:34.580

AFAIK，如果您使用 JAAS（推荐），那么您不必使用有状态会话 bean 来存储身份验证状态。

对于远程客户端，通常首选无状态方法，其中所有数据都在客户端收集并发送到服务器。

一些有用的 JAAS 链接：

[http://docs.oracle.com/javaee/6/tutorial/doc/gijrp.html](http://docs.oracle.com/javaee/6/tutorial/doc/gijrp.html)

[可以从自定义 LoginModule 访问远程 EJB？](https://stackoverflow.com/questions/2772893/possible-to-access-remote-ejbs-from-a-custom-loginmodule/3143013#3143013)

[http://docs.oracle.com/javase/6/docs/technotes/guides/security/jaas/JAASRefGuide.html](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jaas/JAASRefGuide.html)

[http://docs.oracle.com/javase/6/docs/technotes/guides/security/jaas/JAASLMDevGuide.html](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jaas/JAASLMDevGuide.html)

[http://docs.oracle.com/javase/6/docs/technotes/guides/security/jaas/tutorials/GeneralAcnOnly.html](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jaas/tutorials/GeneralAcnOnly.html)

书：

[http://www.amazon.com/GlassFish-Security-Masoud-Kalali/dp/1847199380/ref=sr_1_1?s=books&ie=UTF8&qid=1340361926&sr=1-1&keywords=GlassFish+Security](https://rads.stackoverflow.com/amzn/click/com/1847199380)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T14:01:38.390

根据定义，无状态会话 bean 是无状态的。您不应该在 SLSB 中编写依赖于会话状态的业务逻辑，这是对此类组件如何工作的误解的标志，并且可能表明存在设计问题。

如果您确实、绝对需要访问会话信息来执行业务逻辑，那么请从 SFSB 而非 SLSB 进行。或者，您可以将会话状态作为参数传递给 SLSB 中的方法，但这种状态必须来自调用 SLSB 的有状态组件。

# c# - 饼图 C# 中的百分比格式

> ID：11138820
> 
> 赞同：0
> 
> 时间：2012-06-21T13:05:38.210
> 
> 标签：c#, excel-interop

我使用 Microsoft Office Interop Excel 在 VS 2008 C# 项目中创建饼图。

代码是：

```
Excel.Chart xlChart = (Excel.Chart)xlWorkBook
        .Charts
        .Add(Type.Missing, Type.Missing, Type.Missing, Type.Missing);                

Excel.Range xlDataRange = xlWorkSheet
        .get_Range(xlWorkSheet.Cells[
                       nDataForDiagramRow - alToExcelInvestmentGroupNames.Count,
                       _nColumnsCount - 3
                   ],
                   xlWorkSheet.Cells[
                       nDataForDiagramRow - 1, 
                       _nColumnsCount - 2
                   ]);

xlChart.ChartType = Excel.XlChartType.xl3DPieExploded;
xlChart.Elevation = 60;
xlChart.Rotation = 130;

xlChart.SetSourceData(xlDataRange, Type.Missing);
xlChart.ApplyDataLabels(Excel.XlDataLabelsType.xlDataLabelsShowLabelAndPercent,
                        Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                        Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                        Type.Missing);

xlChart.Location(Excel.XlChartLocation.xlLocationAsObject, xlWorkSheet.Name); 
```

使用方法`xlChart.ApplyDataLabels`我使标签和百分比可见，但百分比是四舍五入的。

如何访问标签的格式以显示百分比的小数部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:10:24.370

我自己建立了解决方案。 `nLabel`是图表中标签集合中标签的整数。

```
Excel.Series xlSeries = (Excel.Series)xlWorkBook.ActiveChart.SeriesCollection(1);

Excel.DataLabel dl = (Excel.DataLabel)xlSeries.DataLabels(nLabel);

dl.NumberFormat = "0.0%"; 
```

# vbscript - 使用 vbscript 枚举

> ID：11138822
> 
> 赞同：5
> 
> 时间：2012-06-21T13:05:43.997
> 
> 标签：vbscript, enums

由于 vbscript 不支持枚举，是否有任何工作可以解决这个问题？

我有这个代码：

```
Private Enum dataType
 dt_Nothing
 dt_Boolean
 dt_Decimal
 dt_Double
 dt_Integer
 dt_string
 dt_Array
 dt_NetJSON
End Enum 
```

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T00:54:15.033

使用常量是非常合乎逻辑的。另一方面，您可以使用您自己的类的全局实例来模仿 VB 枚举。请注意，它看起来就像枚举，我不确定它是否真的有必要。

```
Class EnumDataType
    Public  dt_Nothing, dt_Boolean, dt_Decimal
    Private Sub Class_Initialize
        dt_Nothing = 1
        dt_Boolean = 2
        dt_Decimal = 4
    End Sub
End Class

Dim dataType
Set dataType = New EnumDataType

WScript.Echo dataType.dt_Nothing Or dataType.dt_Boolean Or dataType.dt_Decimal 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T13:54:03.707

根据[http://www.tek-tips.com/viewthread.cfm?qid=1146844](http://www.tek-tips.com/viewthread.cfm?qid=1146844)，最好的方法是使用常量。

```
Const dt_Nothing = Something
Const dt_Boolean = Something
Const dt_Decimal = Something
Const dt_Double = Something
Const dt_Integer = Something
Const dt_string = Something
Const dt_Array = Something
Const dt_NetJSON = Something 
```

我找不到其他方法。我会搜索是否有更好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-17T18:49:36.857

提醒一下，您可以通过（例如）这样做来避免臃肿并使其无痛。

```
Public Const xupv = 1, xvet = 2, xhid = 3, xban = 4, xrep = 5, xech = 6, xvus = 7, xfDpth = 8, xEds = 9 
```

或这个..

```
Public Const _
  xupv = 1 _
, xvet = 2 _
, xhid = 3 _
, xban = 4 _
, xrep = 5 _
, xech = 6 _
, xvus = 7 _
, xfDpth = 8 _
, xEds = 9 
```

（这是经过测试的。解析得很好）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-08T14:23:52.553

我有时使用的另一种方法是声明字典。喜欢：

昏暗的枚举

设置 oEnum = CreateObject("scripting.Dictionary")

在线程/应用程序初始化时，我确实用我喜欢使用的值填充它，同样我应该使用枚举。

所以 ：

oEnum.Add 0, "Enum1"

oEnum.Add 1, "Enum2"

在代码中我喜欢使用枚举的地方，我将这个字典对象称为： someval = oEnum.Items()(index) -> 索引有点像枚举方法。

编辑：您也可以像这样使用它：

oEnum.Add "CONSTANTNAME"，整数值

然后您可以通过以下方式获取值：

oEnum.Item(CONSTANTNAME)

Grz约翰

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2013-01-31T20:25:46.910

这是我发现有效的代码行。

```
Const navOpenInNewTab = &H800
Set IE1=CreateObject("InternetExplorer.Application")
IE1.Visible=true
IE1.Navigate2 "http://blogs.msdn.com"
IE1.Navigate2 "http://blogs.msdn.com/tonyschr", CLng(navOpenInNewTab)
IE1.Navigate2 "http://blogs.msdn.com/oldnewthing", CLng(navOpenInNewTab)
IE1.Navigate2 "http://msdn.microsoft.com", CLng(navOpenInNewTab) 
```

'不要忘记使用以下代码行关闭 IE：IE1.Quit

# sql - SQL在数字-字母-数字之间添加'-'

> ID：11138824
> 
> 赞同：1
> 
> 时间：2012-06-21T13:05:47.040
> 
> 标签：sql, oracle, teradata

我有一个有趣的场景要`- (minus sign)`在数字、字母和数字之间添加。

例子：

> 输入：123AB56；输出：123-AB-56；
> 
> 输入：56XYZ777；输出：56-XYZ-777；

源数据没有规则模式。

对此的任何意见表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:23:39.620

如果是相对较晚的 Oracle，则可以`regexp_replace`执行以下任务：

```
SELECT
  REGEXP_REPLACE(YOURFIELD,
                 '([[:digit:]]+)([[:alpha:]]+)([[:digit:]]+)',
                 '\1-\2-\3') REPLACED_RESULTS
  FROM YOURTABLE; 
```

# sql - [PersistenceException：org.hibernate.exception.SQLGrammarException：无法执行查询]

> ID：11138829
> 
> 赞同：0
> 
> 时间：2012-06-21T13:06:03.693
> 
> 标签：sql, playframework

我需要帮助。我正在尝试通过播放框架中的 sql 语句从数据库中进行选择，但它给了我错误，我无法弄清楚线索在哪里。这是代码：

```
@Transactional
public static Users findByUsernameAndPassword(String username, String password){
String hash = DigestUtils.md5Hex(password);
Query q = JPA.em().createNativeQuery("select * from USERS where" + "USERNAME=? and PASSWORD=?").setParameter(1, username).setParameter(2, password);
List<Users> users = q.getResultList();
if(users.isEmpty()){
    return null;
} else{
    return users.get(0); 
```

这是错误消息：

```
[PersistenceException: org.hibernate.exception.SQLGrammarException: could not execute query] 
```

有人能帮助我吗！任何帮助我将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T14:09:16.360

您在 ORM（对象关系映射）查询中使用纯 sql。JPA 允许您使用对象及其属性而不是数据库表来构建查询。

```
TypedQuery<Users> q = JPA.em().createQuery("select * from Users where username= :username and password= :password", Users.class);
q.setparameter("username", username);
q.setparameter("password", hash);
List<Users> users = q.getResultList(); 
```

也就是说，如果您的用户实体被命名为用户，它可能是用户。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T15:11:55.677

您在查询中缺少一些空格。尝试解决这个问题：

```
"select * from USERS where USERNAME=? and PASSWORD=?" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-25T14:57:20.510

我也遇到了同样的问题，并从 id 替换了 @GeneratedValue 并手动输入了它现在正在工作的 id 的值。

# ffmpeg - ffmpeg 在一个命令中包含多个文本（ drawtext ）

> ID：11138832
> 
> 赞同：6
> 
> 时间：2012-06-21T13:06:20.850
> 
> 标签：ffmpeg

如何在一张图像上显示多行

我尝试了命令，但它给出了错误

```
[NULL @ 0203D780] Unable to find a suitable output format for '[in][T1]'
[in][T1]: Invalid argument 
```

命令 ：

```
ffmpeg -threads 8 -i D:\imagesequence\dpx\brn_055.%04d.dpx -vf "drawtext="fontsize=18:fontcolor=Green:fontfile='/Windows/Fonts/arial.ttf':text='shotcam':x=(w)/2:y=(h)-25[T1], [in][T1] "drawtext="fontsize=18:fontcolor=Green:fontfile='/Windows/Fonts/arial.ttf':text='Focal Length':x=(w)/1.2:y=(h)-25[out]" D:/imagesequence/dpx/final_with_text_mod_04.jpg 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T13:46:50.067

您不需要标记每个绘图文本，您只需要指定两个绘图文本都应用于“主”源。在 [in] 标记应用到主源之后发生的所有事情。如果您使用不同的过滤器，您只需要标记，因为您需要指定每个过滤器发生的情况和时间，以及它与主要来源的关系。此命令应该适合您：

```
ffmpeg -threads 8 -i D:\imagesequence\dpx\brn_055.%04d.dpx -vf "[in]drawtext=fontsize=18:fontcolor=Green:fontfile='/Windows/Fonts/arial.ttf':text='shotcam':x=(w)/2:y=(h)-25, drawtext=fontsize=18:fontcolor=Green:fontfile='/Windows/Fonts/arial.ttf':text='Focal Length':x=(w)/1.2:y=(h)-25[out]" D:/imagesequence/dpx/final_with_text_mod_04.jpg 
```

# php - 将 php 文件（当前正在使用）上传到服务器时会发生什么？

> ID：11138833
> 
> 赞同：3
> 
> 时间：2012-06-21T13:06:23.460
> 
> 标签：php, file-upload, ftp

**案例：**
我有一个 PHP 脚本当前正在被许多用户执行。
此脚本需要一些时间才能完成（例如，从浏览器获取数据、处理数据、更新数据库等）

现在我修改了脚本并使用 FTP 客户端将其上传到服务器。FTP客户端愉快地上传它并说已上传。

* * *

**现在这里到底发生了什么？**
当我上传修改后的脚本时，当前执行发生了什么？

我想出的可能性是：

**1）**所有当前的执行都被搞砸了。
上传新脚本后，执行停止。如果是这种情况（我祈祷不是），如何在不影响当前执行的情况下将脚本上传到服务器？

**2)**当前执行是用旧脚本完成的。当新请求到来时，它会使用新修改的脚本进行处理。

**3)**别的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T13:36:04.457

假设您进行`index.php`了一些密集的计算，花费了相当多的时间，然后调用`process.php`

访问者来到您的网站并加载`index.php`。这由您的 Web 服务器软件（Apache、nginx、IIS 等）加载到内存中并提供给您的访问者。当您的访问者对您进行这些计算时，`index.php`您决定上传`index.php`和的更新版本`process.php`。此时，您的访问者将继续运行**旧**版本，`index.php`并且在刷新页面之前他们不会看到新版本。

`process.php`然而，在旧版本`index.php`调用它之后，他们会看到新版本。这是因为服务器读取任何被调用的文件，将其加载到内存中并将其提供给用户，从而在服务器和用户之间创建会话。如果用户在部分上传时尝试获取 process.php 或 index.php，他们将收到错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:22:50.933

如果您的服务器上有 APC，则脚本将使用旧代码执行，直到您重新启动 apache。

如果不是，那么您根本不知道，但我投票支持解决方案**2**：脚本在执行时应该在“内存中”，然后在执行结束时丢弃。

# php - str_split 返回两个字符

> ID：11138838
> 
> 赞同：0
> 
> 时间：2012-06-21T13:06:29.083
> 
> 标签：php, char

我为返回字符串的安全链接编写了一个函数。该函数称为 safe_link( *string* )，但我遇到了字符替换问题。我不知道为什么 str_replace() 不起作用，这就是我编写自己的函数的原因。我需要保存一个有效的 URL，我需要删除**http://**，**www。**来自以表格形式给出的字符串。

```
function safe_link($arg){
    $url = str_split($arg);
    $string = array();
    $max = 0;

    if($url[0] == "h" && $url[7] == "w") # http://www.
        $max = 11;
    elseif($url[0] == "h") # http://
        $max = 7;
    elseif($url[0] == "w") # www.
        $max = 4;

    str_replace("/", "", $url);

    for($i = $max, $n = 0; $i < sizeof($url); $i++, $n++){
        $string[$n] = $url[$i];
    }

    return implode("", $string);
} 
```

该功能正在运行，但是如果有人在 URL 的末尾写了一个“/”（斜杠）怎么办？我需要从该字符串中删除，但我不知道该怎么做。str_replace() 不起作用。我尝试调试，我看到该数组`$url[sizeof($url) - 1]`返回两个字符而不是一个字符。但为什么？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:46:03.700

这个功能怎么样：

```
function safe_link($url) {
    $url = str_replace('http://', '', $url);
    $url = str_replace('www.', '', $url);
    $url = str_replace('/', '', $url);
    return trim($url);
} 
```

这是你所期望的吗？

# javascript - ITU 格式的电话号码正则表达式

> ID：11138839
> 
> 赞同：-2
> 
> 时间：2012-06-21T13:06:33.330
> 
> 标签：javascript, regex

我只想以 ITU 格式验证电话号码，例如 +xx xxxxxxxxxx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:14:05.793

```
^\+\d{2,3}\s\d{7,15}$ 
```

将 x,y 值替换为要匹配的最小值和最大值。

`\+`因为`+`是正则表达式中的特殊字符，所以需要转义

`\d`是一个数字

`\s`是一个空白字符

`^`将正则表达式锚定到字符串的开头和`$`结尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:18:10.083

电话号码可以从大约 6 位到大约 14 位不等，包括国家代码。

国家代码可以是 1、2 或 3 位数字。

该号码可能有 1 到 6 位数的区号或根本没有区号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:12:04.500

最简单的变体是：

```
\+.. .......... 
```

你也可以这样说：

```
\+.. .{10} 
```

这意味着最后一个符号 ( `.`) 必须在字符串中恰好出现 10 次。

当您只需要数字时，您必须使用`[0-9]`or`\d`代替点 ( `.`)。

# wordpress - 用于网站上不同类别页面的 Phantom Facebook 页面

> ID：11138840
> 
> 赞同：1
> 
> 时间：2012-06-21T13:06:36.343
> 
> 标签：wordpress, facebook, facebook-like, facebook-opengraph

我想在我的网站上获得以下结构。因此，当有人“喜欢”我的主页或儿童类别页面时，他们会被放入我在 Facebook 上的秘密网站，这样我就可以偶尔发布到他们的新闻提要。

网站： [http](http://www.thebleeppeoplesay.com) ://www.thebleeppeoplesay.com Facebook 页面创建：The Bleep People Say（使用开放图元标签）

和

[http://wwwthebleeppeoplesay.com/category/kids](http://wwwthebleeppeoplesay.com/category/kids) Facebook 页面创建：The Bleep Kids Say（使用开放图元标签）

是否可以在同一个主域中拥有两组元标记？我正在使用一个简单的 Wordpress 模板，其中包含一个用于网站内所有页面的 header.php 文件。我在想可能有一种方法可以将特殊代码放在标题中，以调用 category.php 和 index.php 中的代码？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T15:02:20.470

请参阅[Wordpress PHP 中的 Dynamic Facebook og Meta Tags](http://facebook.stackoverflow.com/questions/11075694/dynamic-facebook-og-meta-tags-in-wordpress-php)以将元标记添加到 wordpress。如果我找到任何更好的示例，我将对其进行编辑。

# javascript - 将 json 保存在 javascript 数组中

> ID：11138845
> 
> 赞同：0
> 
> 时间：2012-06-21T13:06:54.270
> 
> 标签：javascript, arrays, json, variables

我正在尝试将 json 保存在 javascript 数组中，但我不明白该怎么做。我不想将所有内容保存在数组的第一个元素中。这是我的功能：

```
function jeyson()
{
var onion = new XMLHttpRequest();
onion.open("GET", "json.json", true);
onion.send(null);

/* var anotheronion = angular.fromJson(onion.responseText, false); */

    var onionarray = new Array()

} 
```

onionarray 是我想要包含我的 json 文件的数组。

我的 json 可能是这样的：

```
{

"count": 2,
"e": 1,
"k": null,
"privateresult": 0,
"q": "surname",
"start": 0,
"cards": [
    {
        "__guid__": "efd192abc3063737b05a09a311df0ea0",
        "company": false,
        "__title__": "name1 surname",
        "__class__": "entity",
        "services": false,
        "__own__": false,
        "vanity_urls": [
            "name1"
        ]
    },
    {
        "__guid__": "01917cfa71a23df0a67a4a122835aba8",
        "photo": {
            "__own__": false,
            "__title__": null,
            "__class__": "image",
            "__guid__": "01917cfa71a23df04d03f83cb08c11e1"
        },
        "company": false,
        "__title__": "name2 surname",
        "__class__": "entity",
        "services": false,
        "__own__": false,
        "vanity_urls": [
            "name2"
        ]
    }
]

} 
```

如何将它保存在我的数组中？

PS我没有像“同源策略”这样的问题，因为json文件在同一台服务器上（现在我正在使用本地文件。我可以使用不在同一个域中的文件吗？）。

**PS** 是否可以将json用作javascript对象（如数组）？如果我想在我的 json 对象中搜索某些内容，我该怎么做？

```
function geisson()
{
var iabile = new XMLHttpRequest();
iabile.open("GET", "json.json", true);
iabile.send(null);

var objectjson = {};
objectson = JSON.parse(iabile.responseText);
alert(objectson.cards.toSource());  
return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:19:22.963

您传入的 JSON 不是数组；它是一个 JSON 结构（在 Javascript 中，与对象相同）。所以不能直接存储为数组。

json 确实包含一个数组作为`cards`元素。——想要吗？

你需要

1.  将传入的 JSON 解析为 JS 结构。（使用 JSON.parse。）
2.  一旦你有了 Javascript 的结构：

    ```
    incoming = JSON.parse(data);
    onionarray = incoming.cards; 
    ```

另请注意，声明空数组的现代方法是

```
var onionarray = [];  

// not
var onionarray = new Array() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:11:11.653

使用浏览器方法`JSON.parse()`并将`JSON.stringify()`您的 json 转换为 javascript 对象并返回。

在你的情况下，`onionarray`不应该是一个数组，而是一个对象（实际上数组和对象在 javascript 中是 >pretty< 相似的）。您可以像这样分配您的 jsondata：

```
onionarray = JSON.parse(data); 
```

# java - 如何在 Java 中获取 memcpy？

> ID：11138847
> 
> 赞同：4
> 
> 时间：2012-06-21T13:06:54.737
> 
> 标签：java, android

我正在开发一个与 Windows 服务器上运行的**C 程序**通信的应用程序，该程序是使用 Visual Studio 开发的（如果此信息有任何帮助）。

服务器通过套接字通信向我发送一个整数，在发送服务器之前执行以下操作：-

1.  声明一个整数
2.  赋予它一些价值
3.  **使用memcpy**将 2 个字节复制到 char * （比如缓冲区）
***   向该缓冲区添加更多数据*   发送该缓冲区**

 **现在在接收端我有java实现，所以不能直接使用**memcpy**，我用过

```
short mId = java.nio.ByteBuffer.wrap(recvBuf, 0, 2).order(ByteOrder.LITTLE_ENDIAN).getShort(); 
```

可以，很好，但是这部分代码每隔几毫秒就会调用一次，所以我正在尝试优化它..我也使用过

```
short mId =(short)(recvBuf[0] + recvBuf[1]*128); 
```

这也可以正常工作，但我怀疑如果将来数量增加，它是否会起作用。在 java中重复**memcpy**的最佳方法是什么？

我已经访问过[这个](https://stackoverflow.com/questions/3329163/is-there-an-equivalent-to-memcpy-in-java)线程，但这并没有太大帮助，

**编辑** 我实现了以下四种对我有用的方法，

```
public class CommonMethods {
    /*
     * Returns the byte[] representation of an int in Little Endian format
     * 
     * @param value that should be converted to byte[]
     */
    public static byte[] toByteArray(int value) {
        return new byte[] { (byte) value, (byte) (value >> 8), (byte) (value >> 16), (byte) (value >> 24) };
    }

    /*
     * Returns the int in LittleEndian value of the passed byte[]
     * 
     * @param bytes is the input byte[]
     * 
     * @param offset is the offset to start
     */
    public static int getInt(byte[] bytes, int offset, int length) {
        int retValue = (bytes[offset] & 0xFF);
        byte bVal;
        for (int i = 1; i < length; i++) {
            bVal = bytes[offset + i];
            retValue |= ((bVal & 0xFF) << (8 + (8 * (i - 1))));
        }
        return retValue;
    }

    /*
     * Returns the int in BigEndian from the passed byte[]
     * 
     * @param bytes is the byte[]
     */
    public static int getIntBigEndian(byte[] bytes, int offset, int length) {
        int retValue = (bytes[offset + length - 1] & 0xFF);
        for (int i = 1; i < length; i++) {
            retValue |= ((bytes[offset + length - 1 - i] & 0xFF) << (8 + (8 * (i - 1))));
        }
        return retValue;
    }

    /*
     * Returns the byte[] representation of an int in Big Endian format
     * 
     * @param value that should be converted to byte[]
     */
    public static byte[] toByteArrayBigEndian(int value) {
        return new byte[] { (byte) (value >> 24), (byte) (value >> 16), (byte) (value >> 8), (byte) value };
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:51:41.900

可以`ByteBuffer`直接收到。这节省了一些系统调用/内存副本。

```
ByteBuffer buf = ByteBuffer.allocate(1024); // just allocate enough, can be reused later;
buf.reset();  // in case this is reused, you need reset()

SocketChannel channel = socket.getChannel();
channel.read(buf);

short mId = buf.order(ByteOrder.LITTLE_ENDIAN).getShort();

byte[] otherBytes = new byte[....];
buf.get(otherBytes); 
```

当然，您需要检查实际读取的长度。为了清楚起见，我省略了它们。如果您想了解更多信息，可以谷歌“java nio 阻塞模式”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:57:42.397

这段代码：

```
short mId =(short)(recvBuf[0] + recvBuf[1]*128); 
```

绝对是**不正确**的。它可能适用于您尝试过的某些值，但绝对**不适**用于其他值。

如果`recvBuf[1]`不是零，这将给出不正确的结果。

如果`recvBuf[0]`大于 127，这将给出不正确的结果。

原因如下：

*   `byte`在 Java 中已签名。如果字节中的值介于 128 和 255 之间，它将被解释为负数（这可能不是您想要的）
*   乘以`recvBuf[1]`128 是不正确的。您需要乘以 256 才能正确放大该值。另见上述关于负数的观点

假设您正在以 LITTLE-ENDIAN 字节顺序从 C 写入字节，您可以这样做：

```
int mId = ((recvBuf[0] & 0xFF) | ((recvBuf[1] & 0xFF) << 8)); 
```

用于仅屏蔽值的`& 0xFF`低 8 位，以防设置了高位（因为 Java 将在将字节转换为 int 时对其进行符号扩展）。

的`<< 8`功能等同于`* 256`，但它是一个位移函数，而不是算术函数，它更适合这个用例。

将结果分配给 a`int`而不是 a`short`将保证 32768 和 65535 之间的值被正确解释为正数而不是负数。

这将适用于 0 到 65535 之间的所有值。一旦您的数字变得更大，无论如何发送时您将无法将其放入 2 个字节中。如果您想为未来做计划并认为您可能需要超过 2 个字节，那么只需复制 C 整数的所有 4 个字节并读取 Java 中的值，如下所示：

```
long mId = (long)(((recvBuf[0] & 0xFF) | ((recvBuf[1] & 0xFF) << 8) |
              ((recvBuf[2] & 0xFF) << 16) | ((recvBuf[3] & 0xFF) << 24)) & 0xFFFFFFFF); 
```

另请注意，Java 默认字节顺序是 BIG-ENDIAN，而不是 LITTLE-ENDIAN。**

# javascript - javascript onunload 延迟

> ID：11138848
> 
> 赞同：1
> 
> 时间：2012-06-21T13:06:57.173
> 
> 标签：javascript, apache-flex

我试图在 onUnload 上触发 Flex 中的一个事件，但浏览器必须保持打开状态，并且在发送信息之前几秒钟内不会杀死 flash。

只需要几秒钟的延迟。无论如何，在没有警报的情况下这样做吗？

提前致谢。

# java - 在服务器上渲染和导出 FusionCharts

> ID：11138852
> 
> 赞同：3
> 
> 时间：2012-06-21T13:07:07.790
> 
> 标签：java, javascript, fusioncharts

我正在尝试在服务器上完全渲染和导出 FusionCharts。我知道诸如 FCimg 和 FusionCharts .NET 解决方案之类的解决方案。我还实现了一个使用 Process 类来运行 wkhtmltoimage 的 Java 解决方案。

但是，我正在尝试找到一个纯 Java 解决方案来执行此操作。我有一个 html 文件，其中包含 FusionCharts JS 库和生成融合图表的代码。我发现 JxBrowser 可以正确呈现图表，但它需要 X-Server 才能在 Linux 上运行。我也尝试过 Cobra/Lobo 浏览器，但它并不完全支持 JavaScript。有没有其他方法可以在服务器上渲染和导出融合图表，或者至少渲染一个包含 JavaScript 的 html 文件（并且不需要 xserver）？

提前感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:18:10.360

**更新**：不需要 xserver: [WebRenderer](http://www.webrenderer.com)的解决方案。Swing 版是截至 2012 年 7 月 9 日唯一支持 HTML5 的版本。您可以使用 swing 版来捕获图像而无需 GUI。

* * *

我找到了一种使用 Eclipse 的 SWT 浏览器的方法。但是，这不能在无头模式下运行。您将不得不使用 xserver 来实现它。看到[这个问题](https://stackoverflow.com/questions/11157301/how-to-hide-swt-browser-or-run-in-headless-mode/11157816#11157816)。

由于这需要 xserver 并且不能在无头模式下运行，我建议使用 JxBrowser。它要简单得多，您只需要生成一个包含所有融合图表脚本的 html 文件。见#1、#2、#3

1.  您必须创建一个包含标题 ( `<html><head>`)、jquery.min.js、FusionCharts.js、FusionCharts.HC.js、FusionCharts.HC.Charts.js 的 template.html 文件。确保这些脚本中的每一个都在它们自己的脚本标签中 ( `<script type="text/javascript"> [js code] </script>`)

2.  现在添加另一个 JavaScript 函数，它有自己的脚本标签，其中包含渲染图表的步骤。例如：

`function load() { FusionCharts.setCurrentRenderer('javascript'); var chart = new FusionCharts("swf", 'chart0', "width", "height", "0", "1"); chart.setXMLData("XML DATA HERE"); chart.render("divNAMEHere"); }`

3.  现在您需要调用 load() 函数 onload，创建一个 div 来呈现图表，并结束 html 文件。例如：

    `

测试`

4.  创建一个导入 eclipse swt 浏览器库的新类。实例化显示、Shell 和浏览器（以此为指导帮助了解正在发生的事情：[http](http://www.roseindia.net/tutorials/swt/swt-browser.shtml) ://www.roseindia.net/tutorials/swt/swt-browser.shtml ）。

5.  将浏览器的文本 ( `browser.setText("htmlcode")`) 设置为来自 template.html 的 html 代码。最好的方法是使用 BufferedReader 读取文件。

6.  最后，图像需要一些时间来渲染。现在可能有更好的方法来做到这一点，但如果你想让它正常工作，我会设置一个计数，它会在一定数量后捕获图像。这是您需要添加到最后的内容：

    ```
    int i = 0;
    while (!shell.isDisposed())
    {
      if (!display.readAndDispatch())
      {
         display.sleep();
         i++;
       //  System.out.println(i);
         if(i==100)
         {
             GC source = new GC (shell);  
             Image image = new Image(display, browser.getClientArea()); 
             source.copyArea(image, 0, 0);
             ImageLoader io = new ImageLoader ();
             io.data = new ImageData[] { image.getImageData() };
             File f = new File (currentDir+"/workpng.png");
             io.save (f.getAbsolutePath(), SWT.IMAGE_PNG); 
         }
      }
    } 
    ```

# css - 使用带溢出的最小宽度

> ID：11138855
> 
> 赞同：2
> 
> 时间：2012-06-21T13:07:09.227
> 
> 标签：css

使用以下标记：

```
<div style="overflow: auto">
    <select multiple="true" style="min-width: 300px;">
        <option>a loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong string</option>
    </select>
</div> 
```

min-width 导致选择宽度为容器的 100%，即它不会溢出。删除最小宽度，使其溢出（这是所需的行为，但我也想要一个最小宽度，以便即使没有选项，框看起来也不错）。

如何做到这一点？min-width 影响 max-width 的事实让我感到不安。请注意，我只对 css 解决方案感兴趣，避免使用 javascript。

编辑：为了澄清，样式应该导致以下标记呈现一个空框，即 300px 宽：

```
<div>
    <select multiple="true">
    </select>
</div> 
```

以下是渲染一个与其容器一样宽的框，并带有一个滚动条以允许查看其余部分：

```
<div>
    <select multiple="true">
        <option>a loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong string</option>
    </select>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T23:05:31.350

我试图找到一个解决方案，但是一旦选择元素具有定义的最小宽度，css 似乎非常顽固。

虽然我在 JS/JQuery 中做了一个简单的解决方法，但它在我的 JSfiddle 中似乎运行良好：http: [//jsfiddle.net/RHfm4/2/](http://jsfiddle.net/RHfm4/2/)

```
var v = $("select");
  for(var i = 0; i < v.length; i++){
    if(parseInt($(v[i]).css("width")) < 300){
      $(v[i]).css("width", "300px");
  }
}​​​​​​​ 
```

这将为您提供所需的功能，但这只是一种解决方法。希望这有点帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:45:43.857

希望它可以帮助你...

```
<div style="min-width:300px; overflow-x: auto">
  <select multiple="true" style="width: auto;">
    <option>a loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong string</option>
    <option>a long string</option>
    <option>a long string</option>
    <option>a long string</option>                                    
  </select>
</div> 
```

# servlets - 从 servlet 过滤器重定向到 jsf 会返回未呈现为 html 的实际 jsf 代码

> ID：11138857
> 
> 赞同：5
> 
> 时间：2012-06-21T13:07:22.033
> 
> 标签：servlets, jsf-2, login, glassfish-3, servlet-filters

下面是我的代码；

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package racms;

import java.io.IOException;
import javax.faces.application.NavigationHandler;
import javax.faces.context.FacesContext;
import javax.servlet.*;
import javax.servlet.annotation.WebFilter;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

@WebFilter("/faces/*")
public class AuthenticationFilter implements Filter {

    @Override
    public void init(FilterConfig config) throws ServletException {
        // If you have any <init-param> in web.xml, then you could get them
        // here by config.getInitParameter("name") and assign it as field.
    }

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;
        HttpSession session = request.getSession(false);

        String pageRequested = request.getRequestURI().toString(); 
        //try{
        //FacesContext fctx = FacesContext.getCurrentInstance();
        //NavigationHandler myNav = fctx.getApplication().getNavigationHandler();

         if(session==null){       
               session = request.getSession(true); // will create a new session     
               response.sendRedirect("Login.xhtml");       
               //myNav.handleNavigation(fctx, null, "Login");
         }else if(session==null && pageRequested.contains("Login.xhtml")){       
                //  session.getAttribute("user");     
                chain.doFilter(request, response); // continue filtering       
         }else if((session.getAttribute("user")== null) && (!pageRequested.contains("Login.xhtml"))){          
             response.sendRedirect("Login.xhtml");
             //myNav.handleNavigation(fctx, null, "Login");
         }else {
             chain.doFilter(request, response);
         }
        //}catch(Exception e){
        //    System.out.println("Error :"+ e);
        //}
        /*if ((((HttpServletRequest) req).getSession().getAttribute("user") == null)) {
            FacesContext fctx = FacesContext.getCurrentInstance();
            NavigationHandler myNav = fctx.getApplication().getNavigationHandler();
            myNav.handleNavigation(fctx, null, "Login");
            //response.sendRedirect(request.getContextPath() + "/Login.xhtml"); // No logged-in user found, so redirect to login page.
        } else {
            chain.doFilter(req, res); // Logged-in user found, so just continue request.
        }*/
    }

    @Override
    public void destroy() {
        // If you have assigned any expensive resources as field of
        // this Filter class, then you could clean/close them here.
    }

} 
```

如果我使用 FacesContext.getCurrentInstance()，会发生 java.lang.Nullpointer 异常；如果我使用 response.sendRedirect("Login.xhtml"); 它显示一个空白页面，如果我查看源代码，我可以在 jsf 中看到 Login.xhtml 的源代码。它不会呈现为 html..

我想要做的是：如果用户未登录并访问任何页面，则将他发送到 Login.xhtml，如果用户在 Login.xhtml 上，则向他显示要登录的页面。

请帮忙..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T03:28:33.953

重定向到与`FacesServlet`映射匹配的 URL。显然它被映射到`/faces/*`而不是`*.xhtml`. 然后重定向到`faces/Login.xhtml`.

这是一个重写，它简化了逻辑：

```
@Override
public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
    HttpServletRequest request = (HttpServletRequest) req;
    HttpServletResponse response = (HttpServletResponse) res;
    HttpSession session = request.getSession(false);
    User user = (session != null) ? (User) session.getAttribute("user") : null;
    String loginURL = request.getContextPath() + "/faces/Login.xhtml"; 

    if (user == null && !request.getRequestURI().equals(loginURL)) {       
        response.sendRedirect(loginURL);
    } else {
        chain.doFilter(request, response);
    }
} 
```

# python - 熊猫面板数据

> ID：11138859
> 
> 赞同：1
> 
> 时间：2012-06-21T13:07:26.023
> 
> 标签：python, pandas

我有一个按整数值索引的 python 面板。在 dict 形式中，它看起来像这样：

```
{1:{1:series,2: series,3:series,4:series} 2:{1:series,2:series,3:series,4:series}...} 
```

我想按日期滚动我的数据，并在每个日期取一个过去的时间片将一个函数应用于每个时间序列，所以我得到这样的结果，其中 X 是时间片函数的输出。

```
 1 2 3 4 ...
1 X X X X
2 X X X X
3 X X X X
4 X X X X 
```

我以为`pandas.Panel.apply(func)`会这样做，但事实并非如此。我只在 1 个看似随机的列中得到结果。我可以使用 for 循环进行迭代，但我希望有一种更快、更简单的方法来做到这一点。

我有一个看起来像这样的面板：

```
 <class 'pandas.core.panel.Panel'>
 Dimensions: 1000 (items) x 3714 (major) x 1000 (minor)
 Items: 1 to 1000
 Major axis: 1997-09-10 00:00:00 to 2012-06-19 00:00:00  
 Minor axis: 1 to 1000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:52:33.893

你有没有把数据放在一个`Panel`？如果你这样做了（时间轴`data.apply(f, axis=time_ax)`在哪里）应该可以解决问题。`time_ax`否则，请发布更多有关不起作用的上下文/数据/示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T18:34:20.483

我认为您可以使用 Python lamba 函数来实现这一点，如以下链接所示：http: [//pandas.sourceforge.net/dataframe.html#function-application](http://pandas.sourceforge.net/dataframe.html#function-application)

# java - 没有弹簧的 ActiveMQ PooledConnectionFactory

> ID：11138861
> 
> 赞同：3
> 
> 时间：2012-06-21T13:07:36.443
> 
> 标签：java, activemq

请你帮我解决一个简单的问题。我需要使用没有弹簧的 PooledConnectionFactory，JMSTemplate。ActiveMQ 说这个类正在汇集连接、生产者、会话，而让我感到困惑的是，我不知道如何从实例中获取它们。我在等待一些 takeConnection()，然后是 realeaseConnection() 和 takeProducer() 并实现 producer()。pooledConnectionFactory.start(); 之后我该怎么办？Normaly，我会做 Connection c = pooledConnectionFactory.createConnection... 希望，我解释了我的问题。以及如果生产者和会话是直接从 Connection 创建的，它们是如何池化的。

```
 connectionFactory = new ActiveMQConnectionFactory(
            userId, 
            passWord, 
            brokerURL);
    log.info("Queueing service init: BrokerURL: " + brokerURL + "  UserId: " + userId + "   Paasword: " + passWord);

    pooledConnectionFactory = new PooledConnectionFactory(connectionFactory);

    pooledConnectionFactory.setIdleTimeout(5000);
    pooledConnectionFactory.setMaxConnections(10);
    pooledConnectionFactory.setMaximumActive(5000);
    pooledConnectionFactory.start(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:46:11.657

好吧，在使用池连接工厂时，它就像任何其他 jms 连接工厂一样。

只需致电：

pooledConnectionFactory.createConnection(); // 如你所愿

连接工厂不会真正创建连接，而是为您提供一个池化连接。然后，connection.close(); 将再次将其释放到池中。但是所有这些都在引擎盖下，只要按照习惯使用它就可以了。会话和生产者也是如此，而不是消费者。

# html - 使用 KinetickJS 更新 HTML 5 画布

> ID：11138862
> 
> 赞同：0
> 
> 时间：2012-06-21T13:07:41.507
> 
> 标签：html, html5-canvas, kineticjs

我正在使用 KinetickJS 在屏幕上绘制图像。我在舞台上有一个图层，并收到了 1000 张 base64 格式的图像。首先，我尝试用 Kinetic 绘制它们

示例 1，在 1000 张图像之后效果很好，但当我尝试拖动或对图层执行某些操作时，它变得非常缓慢。所以我尝试下一个示例

```
var imageObj = new Image();
        imageObj.onload = function () {
            var image = new Kinetic.Image({
                x: imageInfo.LocationX,
                y: imageInfo.LocationY,
                image: imageObj,
                width: imageInfo.Width,
                height: imageInfo.Height,
                name: "Update"
            });

            layer.add(image);
            layer.draw();

        };
        imageObj.src = "data:image/jpeg;base64," + imageInfo.Image; 
```

示例 2，但在这种情况下，画布开始在每次更新时闪烁

```
var imageObj = new Image();

       imageObj.onload = function () {

                 var canvas = layer.canvas;
                  var context = canvas.getContext('2d');
//                   context.globalCompositeOperation = "destination-over";
             context.drawImage(imageObj, imageInfo.LocationX, imageInfo.LocationY);

            };
        imageObj.src = "data:image/jpeg;base64," + imageInfo.Image; 
```

那么你有什么想法可以让它更快和/或禁用闪烁吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:18:24.753

最新的 KineticJS 4.3 大大加快了拖动和其他功能的速度。这可能会解决您的问题。

```
 http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.3.0.min.js 
```

# javascript - Onclick 功能在 Safari 中不起作用

> ID：11138865
> 
> 赞同：0
> 
> 时间：2012-06-21T13:07:47.353
> 
> 标签：javascript, ruby-on-rails, onclick

这是我的查看代码..

当我单击图像`onClick="q1('1'); return false"`时，浏览器会转到顶部而不选择图像。但它在 Chrome 和 Firefox 中运行良好。在 Safari 中，它会抛出错误，因为“对象输入元素不是评估 elem(q1) 的函数”

我的脚本是..

```
function q1(option)
{
    if (document.getElementById("q1").value == option)
    {

    }
    else if (document.getElementById("q1").value!= "")
    {
        a = document.getElementById("q1").value;
        document.getElementById('op'+a).className = "";

        if (option == '1')
            document.getElementById("op1").className +=  "visited";
        else if (option == '2')
            document.getElementById("op2").className +=  "visited";
        else if (option == '3')
            document.getElementById("op3").className +=  "visited";
        else if (option == '4')
            document.getElementById("op4").className +=  "visited";
        else if (option == '5')
            document.getElementById("op5").className +=  "visited";

    }
    else
    {
        if (option == '1')
            document.getElementById("op1").className +=  "visited";
        else if (option == '2')
            document.getElementById("op2").className +=  "visited";
        else if (option == '3')
            document.getElementById("op3").className +=  "visited";
        else if (option == '4')
            document.getElementById("op4").className +=  "visited";
        else if (option == '5')
            document.getElementById("op5").className +=  "visited";
    }

    document.getElementById("q1").value = option;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:27:52.203

听起来您可能在函数和元素 ID 之间存在命名冲突。您有一个名为 q1 的 html 元素和一个名为 q1 的函数。尝试将函数重命名为独特的东西？

并不是说这*应该*是一个问题，正如它在其他浏览器中工作所证明的那样。

# ios - 在情节提要中按下按钮时发出 Sigabrat 信号

> ID：11138867
> 
> 赞同：0
> 
> 时间：2012-06-21T13:07:51.867
> 
> 标签：ios, xcode, storyboard

嗨，当我在一个页面中按下按钮以连接到另一个视图时出现错误

请你帮我提前谢谢！

**这是我的代码**

```
-(void)buttonPressed:(UIButton *)button
{
NSLog(@"button %u -- frame: %@", button.tag, NSStringFromCGRect(button.frame));
[self performSegueWithIdentifier:@"WeekView" sender:self];

}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([segue.identifier isEqualToString: @"WeekView"]){

    [segue.destinationViewController setTitle:@"WeekView"];
    }} 
```

**此行中的此错误**

```
with debugging = Signal Sigabrat start from here

 [self performSegueWithIdentifier:@"WeekView" sender:self]; 
```

我还在 Segue 中识别 WeekView 并使用 shipt+command+K 清理但仍然错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:21:16.623

您必须先初始化目标视图控制器，然后才能更改属性：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([segue.identifier isEqualToString: @"WeekView"]){

SecondViewController*second=segue.destinationViewController;   //You´re missing this line.

second.title=@"WeekView";    // now you can do stuff on your destinationViewController

    }} 
```

我希望它能修复它。

# javascript - JSLint：意外结束

> ID：11138872
> 
> 赞同：0
> 
> 时间：2012-06-21T13:08:05.730
> 
> 标签：javascript, jquery, jslint

```
$.fn.hasScrollBar = function () {
    "use strict";

    return this.get(0).scrollHeight > this.height();
} 
```

[JSLint](http://www.jslint.com/)抱怨说：

```
Unexpected '(end)'.
}
line 5 character 1 
```

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T13:09:18.110

由于它是一个函数表达式（不是函数声明），它应该以分号结尾：

```
$.fn.hasScrollBar = function () {
    "use strict";

    return this.get(0).scrollHeight > this.height();
}; //<-- Semi-colon here 
```

JSLint 抱怨“意外结束”，因为它没想到会在结束`}`字符处遇到其输入的结尾。

# java - 使用 HtmlUnit 时，如何配置底层 NekoHtml 解析器？

> ID：11138875
> 
> 赞同：0
> 
> 时间：2012-06-21T13:08:16.390
> 
> 标签：java, htmlunit, cyberneko

我正在使用 HtmlUnit 来尝试抓取网页，因为它支持 Javascript。（我宁愿使用 Jsoup，但不支持 JS）。

该问题与底层 NekoHtml 解析器的一个功能有关：“ [http://cyberneko.org/html/features/scanner/allow-selfclosing-iframe](http://cyberneko.org/html/features/scanner/allow-selfclosing-iframe) ”

见： http: [//nekohtml.sourceforge.net/settings.html](http://nekohtml.sourceforge.net/settings.html)

这显然可以在 Neko 中启用，但我使用的是 HtmlUnit。有没有办法配置 HTML 单元用来启用此功能的底层 Neko 解析器？

尝试运行此代码时：

```
final WebClient webClient = new WebClient();
HtmlPage page = webClient.getPage(url.toString()); 
```

我收到此错误：

```
Caused by: com.gargoylesoftware.htmlunit.ObjectInstantiationException: unable to create HTML parser
    at com.gargoylesoftware.htmlunit.html.HTMLParser$HtmlUnitDOMBuilder.<init>(HTMLParser.java:418)
    at com.gargoylesoftware.htmlunit.html.HTMLParser$HtmlUnitDOMBuilder.<init>(HTMLParser.java:342)
    at com.gargoylesoftware.htmlunit.html.HTMLParser.parse(HTMLParser.java:203)
    at com.gargoylesoftware.htmlunit.html.HTMLParser.parseHtml(HTMLParser.java:179)
    at com.gargoylesoftware.htmlunit.DefaultPageCreator.createHtmlPage(DefaultPageCreator.java:221)
    at com.gargoylesoftware.htmlunit.DefaultPageCreator.createPage(DefaultPageCreator.java:106)
    at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseInto(WebClient.java:433)
    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:311)
    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:373)
    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:358)
    at 
Caused by: org.xml.sax.SAXNotRecognizedException: Feature 'http://cyberneko.org/html/features/scanner/allow-selfclosing-iframe' is not recognized.
    at org.apache.xerces.parsers.AbstractSAXParser.setFeature(Unknown Source)
    at com.gargoylesoftware.htmlunit.html.HTMLParser$HtmlUnitDOMBuilder.<init>(HTMLParser.java:411)
    ... 41 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:19:02.820

尝试使用 FF 行为初始化 Web 客户端

```
WebClient webClient = new WebClient(BrowserVersion.FIREFOX_3_6); 
```

并激活 javascript

```
webClient.setJavaScriptEnabled(true); 
```

那应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T03:07:32.327

解决了...

```
 BrowserVersionFeatures[] bvf = new BrowserVersionFeatures[1];
    bvf[0] = BrowserVersionFeatures.HTMLIFRAME_IGNORE_SELFCLOSING;
    BrowserVersion bv = new BrowserVersion(
            BrowserVersion.NETSCAPE, "5.0 (Windows; en-US)",
            "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.8) Gecko/20100722 Firefox/3.6.8",
            (float) 3.6, bvf);

    WebClient webClient = new WebClient(bv);
    webClient.setJavaScriptEnabled(true); 
```

# apache - 在 https 的情况下忽略 Apache RewriteCond

> ID：11138877
> 
> 赞同：0
> 
> 时间：2012-06-21T13:08:22.807
> 
> 标签：apache, .htaccess, mod-rewrite, https

我必须从一个域重定向到另一个域。两个域都启用了 http 和 https 协议。因此，为了映射 http 和 https，我在 conf 文件中尝试了各种组合，如下所示：#RewriteCond %{HTTPS} =on #RewriteCond %{SERVER_PORT} ^443$ #RewriteRule ^(.+)$ - [env=askapache: HTTPS]

```
#RewriteCond %{HTTPS} !=on
#RewriteRule ^(.+)$ - [env=askapache:http]
RewriteCond %{SERVER_PORT}s ^(443(s)|[0-9]+s)$
RewriteRule ^(.+)$ - [env=askapache:%2]

RewriteCond %{HTTP_HOST} ^([www.]+)?test-redirect\.com$ [NC]  
RewriteRule  ^(.*)$ http%{ENV:askapache}//amit.test.com/content/test/category/6  [L]

#RewriteCond %{HTTP_HOST} ^([www.]+)?test-redirect\.com$ [NC]  <BR> 
#RewriteCond %{HTTPS} !on
#RewriteRule .? http://amit.test.com/content/test/category/6 [L]` 
```

但是每次都跳过/忽略 https 条件。也没有任何重写日志。我在网上看到了很多例子。但不明白为什么它没有检测到 https？http 在哪里工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:07:55.860

*   重写日志很可能位于 https 和 http 的 2 个不同位置。您可以尝试使用`HTTP_AA`而不是使用“askapache”作为环境名称。前缀 HTTP_ANYTHING 是确保 var 可用的更安全的方法，因为某些设置不允许自定义 var 以 HTTP_ 以外的任何内容开头，因为它通常代表 HTTP 标头，因此它们必须允许。

*   确保您的 https 端口实际上是 443，否则您将需要更改代码。

*   `block`通过在此处尝试第一种和第二种方法来确保您的代码的 mod_rewrite工作：[甚至较新的 HTTP/HTTPS 重写代码](http://www.askapache.com/htaccess/http-https-rewriterule-redirect.html)如果使用第一个示例不起作用，您需要首先使用该规则使其工作。

*   尝试`HTTP_AA`使用 SetEnvIfNoCase 指令或使用在重写代码上方设置 var

    `SetEnv HTTP_AA`

*   验证 SSL 和非 SSL 的 vhost/httpd.conf 设置，例如文档根目录和 Options 和 AllowOverrides、Logs 以及 SSLOptions 的 StdEnvVars。

*   `mod_includes`使用它构建一个 shtml 文件`printenv`。然后查看 ssl 和非 ssl 输出，并特别注意带有前缀**`REDIRECT_`**的 var，显然要确保**`HTTP_AA`**var 在输出中正确显示`printenv`。或者，您可以使用askapache 站点上的[printenv cgi 脚本或 shtml 示例。](http://www.askapache.com/hosting/enhanced-printenv.html)

*   不要忘记[http://httpd.apache.org/](http://httpd.apache.org/)。

或者试试这个

```
 Options +FollowSymLinks +ExecCGI

    # Set var now to try to try to have it availabe for mod_rewrite
    SetEnv HTTP_AA

    RewriteEngine On
    RewriteBase /

    # HTTP_AA is set to either s or is blank
    RewriteCond %{SERVER_PORT}s ^(443(s)|[0-9]+s)$
    RewriteRule ^(.+)$ - [env=HTTP_AA:%2]

    # if host not new domain, its old so redirect both http/https to new
    RewriteCond %{HTTP_HOST} !^amit\.example\.com$ [NC]
    RewriteRule  .* http%{ENV:HTTP_AA}://amit.example.com/content/test/category/6  [R=301,L] 
```

# asp.net - 仅在有消息要显示时才显示标签控件

> ID：11138878
> 
> 赞同：0
> 
> 时间：2012-06-21T13:08:23.683
> 
> 标签：asp.net

我是asp的菜鸟，如果有动态填充的消息，我会尝试显示标签控件，否则隐藏标签。这基本上是和错误消息控制。

我已将 css 样式应用于具有彩色背景的控件，因此如果没有要显示的消息，用户仍然会看到空白控件。

我知道如何用 javascript 做到这一点，只是不确定它是否可以在控件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:10:53.860

```
lbl.visible = (lbl.Text.Length > 0); 
```

`lbl`Label 控件的 ID在哪里

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T13:11:28.570

在服务器端，所有控件都有一个`Visible`属性来确定它们是否出现在页面上。您应该能够使用它，如下所示：

```
if (String.IsNullOrEmpty(MyLabel.Text)
{
    MyLabel.Visible=false;
} 
```

# java - java中的唯一ID

> ID：11138879
> 
> 赞同：0
> 
> 时间：2012-06-21T13:08:23.593
> 
> 标签：java

> **可能重复：**
> [在 Java 中生成 UUID 在 Java 中](https://stackoverflow.com/questions/325443/generate-uuid-in-java)
> [创建 GUID](https://stackoverflow.com/questions/2982748/create-a-guid-in-java)

我正在使用下面的代码片段来生成唯一 ID

```
String id = Long.toString(System.nanoTime()); 
```

问题是它在 1 分钟之前生成相同的 id。

有没有其他方法可以生成唯一 ID？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T13:12:30.253

包上有一个 UUID 类`java.util`。

```
String id = UUID.randomUUID().toString(); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T13:13:18.850

UUID.randomUUID()

[http://docs.oracle.com/javase/6/docs/api/java/util/UUID.html](http://docs.oracle.com/javase/6/docs/api/java/util/UUID.html)

# javascript - 与工人一起使用的最佳 XHR 解决方案？

> ID：11138881
> 
> 赞同：3
> 
> 时间：2012-06-21T13:08:33.567
> 
> 标签：javascript, ajax, web-worker

（如果有问题可以回答这个问题，请告诉我）

我正在寻找有关跨浏览器 XHR 支持的建议，在工作人员中。

在普通的 VM 中，我通常将 jQ 用于 XHR 的东西。仅仅为了 AJAX 支持（假设这是可行的；没有尝试过），将 jQ 加载到工作程序中似乎有点过头了。

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T15:21:14.513

我认为从网络工作者发出 XML HTTP 请求没有多大意义。毕竟，这些请求是异步的！:)

有趣的是，有人建议在 jQuery 的核心中实现对 Web 工作者的 XHR 支持，但是对于为什么这可能不是一个好主意，有一个非常详细的回应。

他为什么不这样做的一些理由是：

1.  网络工作者的启动时间很长
2.  对于单个请求，它的时间效率不高
3.  IE 对网络工作者的支持不是很好
4.  jQuery 始终使用 DOM 方法，这意味着在 Web Worker 中使用时会引发异常

真的很好读

[http://bugs.jquery.com/ticket/9889](http://bugs.jquery.com/ticket/9889)

希望这可以帮助！

# php - 检查字符串是否包含PHP中的字符串

> ID：11138882
> 
> 赞同：2
> 
> 时间：2012-06-21T13:08:34.447
> 
> 标签：php, mysql, string

我想知道如果该 IP 地址具有 x 字符串，我如何检查 I 字符串（特别是 IP 地址）

例如

```
$ip = "66.124.61.23" // ip of the current user
$x = "66.124" // this is the string what I want to check in my $ip. 
```

那么如何检查 $ip 是否有 $x 字符串？

如果您很难理解这种情况，请发表评论。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T13:10:21.697

利用[`strstr()`](http://us3.php.net/manual/en/function.strstr.php)

```
if (strstr($ip, $x))
{
    //found it
} 
```

也可以看看：

*   [`stristr()`](http://us3.php.net/manual/en/function.stristr.php)对于此功能的不区分大小写的版本。
*   [`strpos()`](http://us3.php.net/strpos)查找第一次出现的字符串
*   [`stripos()`](http://us3.php.net/manual/en/function.stripos.php)查找字符串中第一次出现不区分大小写的子字符串的位置

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T13:13:49.577

您也可以使用[`strpos()`](http://php.net/strpos), 如果您专门寻找字符串的开头（如您的示例中所示）：

```
if (strpos($ip, $x) === 0) 
```

或者，如果您只想查看它是否在字符串中（并且不关心*它*在字符串中的位置：

```
if (strpos($ip, $x) !== false) 
```

或者，如果要比较开头的 n 个字符，请使用[`strncmp()`](http://php.net/strncmp)

```
if (strncmp($ip, $x, strlen($x)) === 0) {
    // $ip's beginning characters match $x
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T13:12:32.063

## 使用[strstr()](http://php.net/manual/en/function.strstr.php)

```
$email  = 'name@example.com';
$domain = strstr($email, '@');
echo $domain; // prints @example.com 
```

根据 $domain 判断是否找到字符串（如果 domain 为空，则找不到字符串）

***此函数区分大小写。对于不区分大小写的搜索，请使用[stristr()](http://www.php.net/manual/en/function.stristr.php)。***

您也可以使用***[strpos()](http://php.net/manual/en/function.strpos.php)***。

```
$mystring = 'abc';
$findme   = 'a';
$pos = strpos($mystring, $findme);

// Note our use of ===.  Simply == would not work as expected
// because the position of 'a' was the 0th (first) character.
if ($pos === false) {
    echo "The string '$findme' was not found in the string '$mystring'";
} else {
    echo "The string '$findme' was found in the string '$mystring'";
    echo " and exists at position $pos";
} 
```

另请阅读之前的帖子，***[如何使用 PHP 检查一个单词是否包含在另一个字符串中？](https://stackoverflow.com/questions/1019169/how-can-i-check-if-a-word-is-contained-in-another-string-using-php)***

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T13:13:40.673

使用[strpos()](http://php.net/manual/en/function.strpos.php)。

```
if(strpos($ip, $x) !== false){
    //dostuff
} 
```

注意使用双等号来避免类型转换。 `strpos`可以返回`0`（并且将在您的示例中），这将使用单个等号计算为 false。

# javascript - 偏移高度计算

> ID：11138887
> 
> 赞同：1
> 
> 时间：2012-06-21T13:08:45.420
> 
> 标签：javascript, html

当我在函数中使用 offsetHeight 时，对于所有浏览器，不同浏览器的 offsetHeight 结果是不同的。

有什么方法可以使所有人的结果都相同。？

对于firefox我得到40和对于IE 38。所有浏览器都一样吗

```
 <body>
  <div id="container">
     <div id="richText">
        Resi9 is het volledige gamma modulaire apparatuur integreerbaar in modulaire kasten voor woningen en andere residentiële toepassingen.<br>
        Het omvat de volgende productfamilies :

    </div>

  </div>

<script>

var height=document.getElementById("richText").offsetHeight;

alert("height" + height);

</script>
 </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-21T02:05:19.667

你在使用@font-face 吗？某些浏览器可能不支持 @font-face 或 woff2 字体，在这种情况下，它将使用本地字体文件，因此会导致 offsetHeight 不同。

# jquery - 如何在网站内容后面创建居中的图像幻灯片

> ID：11138888
> 
> 赞同：0
> 
> 时间：2012-06-21T13:08:52.097
> 
> 标签：jquery, css, image, slideshow

我正在尝试通过以下方式在我的网站内容后面创建幻灯片：

[样机图像。](https://dl.dropbox.com/u/6558226/slideshow.jpg)

我有这个 HTML：

```
<div id="wrapper">
  <div id="slideshow">
    <img src="images/image1.jpg" alt="" />
    <img src="images/image2.jpg" alt="" />
    <img src="images/image3.jpg" alt="" />
  </div>
  <div id="content">This is content</div>
</div> 
```

这个CSS：

```
#wrapper{
    width:100%;
    background: url(images/pattern.jpg) repeat left top;
}

#slideshow{
    position: relative;
}

#slideshow img{
    position: relative;
    left:0;
    right: 0;
    top:0;
}

#content{
   width: 1000px; /* just for testing */
   position: absolute;
   z-index: 10;
} 
```

我正在使用`jQuery cycle plugin`基本的淡入淡出效果

使用上述方法， my 与 my`wrapper` `div`具有相同的高度`slideshow` `div`。我怎样才能使`wrapper`延伸到浏览器窗口的底部，同时允许`slideshow`从里面的图像中获取它的高度？我也想`slideshow` `div`水平居中。

谢谢。

**更新：已解决。**
感谢@Alvaro

这是最终代码[http://jsfiddle.net/r6JYr/5/](http://jsfiddle.net/r6JYr/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:16:36.767

如果你想让它响应，你可以将#slideshow（或#wrapper）的宽度设置为70％，然后将margin-left设置为15％（15 * 2 + 70 = 100）

或者您可以设置像素宽度为 1500 像素，并将左侧值设置为 1500 像素，将左侧边距设置为 750 像素（如 1500/2= 750）

那行得通。

您还必须将 #slideshow 设置为 position:absolute;

你可以删除#wrapper

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:25:34.487

要水平居中图像，您可以设置：

```
margin:auto; 
```

调整包装以占据整个高度：

```
height:100%; 
```

[JSFiddle](http://jsfiddle.net/r6JYr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:39:49.447

不不不，最好是给外部容器一个特定的宽度，将它的左右边距设置为自动，然后锻炼其余部分。看看这个：

```
<!doctype html>
<head>
<style>
#wrapper {width:600px; background: url(images/pattern.jpg) repeat left top; position: relative; margin: 0 auto; }
#slideshow {position: relative; }
#slideshow img {position: relative; left:0; right: 0; top:0;}
#content {
   width: 600px; /* just for testing */
   margin: 0 auto;
   z-index: 2;
   position: absolute;
   border: 1px #000 solid;
   top: 0;
}
#slideshow {
   width: 1000px; /* just for testing */
   margin-left: -200px;
   z-index: 1;
   border: 1px #f00 solid;
}
</style>
</head>
<body>
<div id="wrapper">
  <div id="slideshow">
slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow slideshow 
  </div>
  <div id="content">This is content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content 
</div>
</div>
</body>
</head> 
```

# perl - perl中如何根据扩展名删除文件？

> ID：11138889
> 
> 赞同：0
> 
> 时间：2012-06-21T13:08:52.953
> 
> 标签：perl, delete-file

我在 Perl 中删除文件时遇到问题。我想删除带有扩展名的文件夹中的所有文件`.log`。在 Perl 中是否有一种聪明的方法可以做到这一点？

我没有太多的 perl 编码经验。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T13:12:13.233

又快又脏：`unlink glob('*.log');`。

我建议使用[`opendir`](http://p3rl.org/opendir)/ [`readdir`](http://p3rl.org/readdir)over 目录进行手动循环以获得更多控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:52:18.473

我喜欢奥列格的，它很短。我通常会破解类似的东西：

```
$ perl -e 'foreach my $f (@ARGV){ print `ls -l $f`; 取消链接 $f }' *.log
-rw-r--r-- 1 天才无 0 Jun 21 06:15 bar.log
-rw-r--r-- 1 天才无 0 Jun 21 06:14 foo.log
```

因为我不记得所有的命令，而且很容易添加测试和正则表达式。这也打印出它做了什么的一些迹象。选择你的咖啡。

# javascript - 检查是否选中了 JQuery 移动复选框

> ID：11138898
> 
> 赞同：8
> 
> 时间：2012-06-21T13:09:36.057
> 
> 标签：javascript, jquery, jquery-mobile, checkbox

我有一个复选框列表，我想获取每个复选框的状态。名单在这里：

```
<div data-role="fieldcontain">
    <fieldset data-role="controlgroup">
       <input type="checkbox" name="Sunday" id="Sunday-1" class="custom" />
       <label for="Sunday-1">Sunday</label>
       <input type="checkbox" name="Monday" id="Monday-1" class="custom" />
       <label for="Monday-1">Monday</label>
       <input type="checkbox" name="Tuesday" id="Tuesday-1" class="custom" />
       <label for="Tuesday-1">Tuesday</label>
  </fieldset>
</div> 
```

我通常使用此报价检查复选框的状态：

`var isChecked = $('#CheckboxID').is(':checked');`

但现在就我而言，有没有一种方法可以一次获取“Jquery Mobile”复选框的状态？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-21T13:14:00.470

你可以做

```
var status = $('input[type="checkbox"]').filter('.custom').map(function(){
    return $(this).is(':checked') ? 1 : 0;

}); 
```

然后`status array`将为每个复选框以相同的顺序输入一个条目，`0`用于未选中和`1`选中。它没有多大用处，因为您没有数组中复选框的其他信息。

如果您想基于`status`您可以使用的执行操作`.each()`，例如

```
$('input[type="checkbox"]').filter('.custom').each(function(){
   if($(this).is(':checked')){
     // perform operation for checked
   }
   else{
     // perform operation for unchecked
   }

}); 
```

**更新**

如果您想`array of objects`使用`name and status`复选框构建一个，您可以使用

```
var status = $('input[type="checkbox"]').filter('.custom').map(function(){
    var name = $(this).attr('name'); 
    if($(this).is(':checked'))
         return { 'name':name, 'status' : 'Checked'}; 
    else
        return { 'name':name, 'status' : 'UnChecked'};

});

console.log(status);​ 
```

**演示：http:** [//jsfiddle.net/joycse06/rL3Ze/](http://jsfiddle.net/joycse06/rL3Ze/)

阅读更多关于[`.each()`](http://api.jquery.com/each)和[`.map()`](http://api.jquery.com/map)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T13:13:08.280

我有这个代码。我认为你应该适应你的情况。

```
 $('#formfriends input[type=checkbox]').each(function() {
    if ($(this).attr('checked'))
     //$(this).attr('disabled' , true);
     // do what you want here
  }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T13:15:45.763

你可以使用 jQuery 每个函数[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

.each 函数将帮助您遍历您的复选框

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T10:49:25.890

对于 jQm 1.3，我必须检查包装器 div 中标签上的类

*   ui-复选框关闭
*   ui-checkbox-on

示例代码（已经由 jQm 呈现）：

```
<div class="ui-checkbox">
  <label data-corners="true" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-icon="checkbox-off" data-theme="a" data-mini="false" class="ui-checkbox-off ui-btn ui-btn-corner-all ui-fullsize ui-btn-icon-left ui-btn-up-a">
    <span class="ui-btn-inner">
      <span class="ui-btn-text">
        myLabel
      </span>
      <span class="ui-icon ui-icon-checkbox-off ui-icon-shadow">&nbsp;</span>
    </span>
  </label>
  <input type="checkbox" name="flip-num" class="flip-num">
</div> 
```

# c++ - c结构不允许静态成员，而c ++允许

> ID：11138899
> 
> 赞同：0
> 
> 时间：2012-06-21T13:09:38.070
> 
> 标签：c++, c

**今天，我对c structure 与 c++ structure**的行为有点惊讶。

fun.cpp：http: [//ideone.com/5VLPC](http://ideone.com/5VLPC)

```
struct nod
{
    static int i;
};

int main()
{

    return 0;  
} 
```

上述程序完美运行。

但，

当在**C**环境中运行相同的程序时，它会给出错误：

```
prog.c:3: error: expected specifier-qualifier-list before ‘static’ 
```

见这里：http: [//ideone.com/2JRlF](http://ideone.com/2JRlF)

**为什么会这样？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T13:12:42.167

因为在 C++ 中，结构只是具有默认可见性的类`public`。因此，在 C 中，结构只是数据的聚合，它不知道可以将其视为独立类型这一事实。

另请参阅[C++ 中结构和类之间的区别是什么](https://stackoverflow.com/questions/92859/what-are-the-differences-between-struct-and-class-in-c)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T13:14:07.087

`nod::i`每个 C++ 类都有其类命名空间，因此您可以从类命名空间外部引用该静态数据成员，而`i`在其内部也可以简单地引用该静态数据成员。C 没有命名空间范围，也没有“在”C 结构中的代码，因此无法在命名空间中隐藏全局变量，或者在它们自己的范围内通过它们的非限定名称来引用它们。所以在 C 中没有动机去拥有在 C++ 中被称为静态数据成员的东西。

做吧`int nod_i;`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T13:12:29.967

`static`在 C 中**只有**内部链接的含义。不要像C++`struct`中的 a`struct`或 a那样考虑 C-。`class`它只是一个聚合器，而不是 OOP 构造。

由于 C 没有类，因此这种使用`static`没有意义。

# msbuild - 需要有关工件路径中的 Web 配置转换的帮助

> ID：11138903
> 
> 赞同：0
> 
> 时间：2012-06-21T13:09:51.287
> 
> 标签：msbuild, teamcity, transform, msdeploy

我正在尝试明智地设置不同的工件路径配置。例如

在 teamcity 的一般设置中，我指定了以下工件路径：

```
testing\obj\Deploy-Dev\package
testing\obj\Deploy-Test\package
testing\obj\Deploy-Live\package 
```

但是当我使用以下内容发布网站时：

```
/M /P:Configuration=%env.Configuration% /P:DeployOnBuild=True/P:DeployTarget=MSDeployPublish /P:MsDeployServiceUrl=%env.TargetServer%/MsDeployAgentService /P:DeployiisAppPath=%env.IISPath% /P:MSDeployPublishMethod=RemoteAgent /P:CreatePackageOnPublish=True /P:Username=%env.username% /P:Password=%env.password% 
```

在这一步中，我只使用 1 个配置。我假设通过指定这些工件路径。它还将根据指定的配置转换 Web 配置。但它只是在实际包装时转换指定的那个。

知道如何在所有包中转换 Web 配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:46:27.010

我不确定我是否完全理解您的问题，但这是我认为您要问的问题。“如何创建一个包含所有 web.config 转换所需的 web 包，以便我可以将同一个包发布到多个不同的环境？”

不幸的是，打包工作的方式是使用正在构建的构建配置的 web.config 转换来转换 web.config。然后转换后的 web.config 文件将其放入包中。转换文件未打包。

我确实意识到创建单个包并将其发布到不同位置很重要。我们无法将这些功能构建到盒子中，但我创建了一个 NuGet 包[PackageWeb](http://nuget.org/packages/PackageWeb)，它可以在这种情况下提供帮助。我在[http://sedodream.com/2012/03/14/PackageWebUpdatedAndVideoBelow.aspx](http://sedodream.com/2012/03/14/PackageWebUpdatedAndVideoBelow.aspx)上发布了一个 5 分钟的视频，您可以看看。我相当肯定它会对您的情况有所帮助。[仅供参考，package-web 的代码在https://github.com/sayedihashimi/package-web](https://github.com/sayedihashimi/package-web)是开源的。我们确实有一些[已知问题](https://github.com/sayedihashimi/package-web/issues?direction=desc&sort=created&state=open)。如果你最终使用这个，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:11:51.187

尝试为您的 teamcity 工件路径设置环境变量。

测试\obj\%env.Configuration%\package

[特洛伊猎人 - 你部署错了！TeamCity、Subversion 和 Web 部署第 5 部分：使用 TeamCity 进行 Web 部署](http://www.troyhunt.com/2010/11/you-deploying-it-wrong-teamcity_26.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:54:45.530

工件路径无论如何都不会影响构建\打包过程。它们只是提供了在构建后保留一些文件\文件夹以供进一步访问的能力。

如果要生成 3 个不同的包，则需要在配置中指定 3 个相应的构建步骤并去掉 '%env.Configuration%'。

# mysql - 在 Windows Azure 上安装 MySql（使用 Eclipse）

> ID：11138907
> 
> 赞同：0
> 
> 时间：2012-06-21T13:10:10.500
> 
> 标签：mysql, azure, azure-worker-roles

我使用 Web Plaform Installer 创建了一个 Web 角色来安装 PHP（运行良好，没有问题），我使用 Eclipse 创建了一个 Worker 角色来安装 MySql。Eclipse 创建 Mysql_WorkerRole.dll（以及其他）。以下是我的 .csdef 文件

```
<WebRole enableNativeCodeExecution="true" name="PhpMySqlWA_phpWebRole">
<Startup>
  <Task commandLine="install-php.cmd" executionContext="elevated" taskType="background" />
</Startup>
<Sites>
  <Site name="MyPHPSite" physicalDirectory=".\PhpMySqlWA_phpWebRole">
    <Bindings>
      <Binding name="HttpEndpoint" endpointName="HttpIn" />
    </Bindings>
  </Site>
</Sites>
<Imports/>
<Endpoints>
  <InputEndpoint name="HttpIn" port="80" protocol="http"/>
</Endpoints>
<ConfigurationSettings>
  <Setting name="StorageAccountName"/>
  <Setting name="StorageAccountKey"/>
  <Setting name="SqlAzureHost"/>
  <Setting name="SqlAzureUserName"/>
  <Setting name="SqlAzurePassword"/>
  <Setting name="SqlAzureDatabase"/>
  <Setting name="UseDataStorage"/>
  <Setting name="UseDevelopmentStorage"/>
  <Setting name="UseCloudStorage"/>
  <Setting name="UseSqlAzure"/>
  <Setting name="LogLevel"/>
  <Setting name="ScheduledTransferPeriodInSeconds"/>
  <Setting name="WindowsAzureStorageConnectionString"/>
  <Setting name="XDrives"/>
  <Setting name="XDrivesLocalCache"/>
</ConfigurationSettings>
</WebRole>
<WorkerRole enableNativeCodeExecution="true" name="PhpMySqlWA_MysqlWorkerRole" vmsize="Medium">
<Imports>
  <Import moduleName="RemoteAccess" />
  <Import moduleName="RemoteForwarder" />
</Imports>
<LocalResources>
  <LocalStorage cleanOnRoleRecycle="false" name="MySQL" sizeInMB="260"/>
  <LocalStorage cleanOnRoleRecycle="false" name="MySQLDatastore" sizeInMB="60"/>
</LocalResources>
<ConfigurationSettings>
  <Setting name="InitFile"/>
  <Setting name="LogLevel"/>
  <Setting name="ScheduledTransferPeriodInSeconds"/>
  <Setting name="WindowsAzureStorageConnectionString"/>
</ConfigurationSettings>
 <Endpoints>
   <InternalEndpoint name="MySQL" protocol="tcp"/>
 </Endpoints>
</WorkerRole> 
```

当我执行

```
cspack ServiceDefinition.csdef /generateConfigurationFile:ServiceConfiguration.cscfg /role:PhpMySqlWA_MysqlWorkerRole;PhpMySqlWA_MysqlWorkerRole;Mysql_WorkerRole.dll /role:PhpMySqlWA_phpWebRole;PhpMySqlWA_phpWebRole /copyonly
and
csrun ServiceDefinition.csx ServiceConfiguration.cscfg /launchbrowser 
```

Compute Emulator 中的 web 角色和 worker 角色都是绿色的，以下是我看到的 worker 角色

```
[fabric] Role Instance: deployment17(63).PhpMySqlWA.PhpMySqlWA_MysqlWorkerRole.0
[fabric] Role state Started
[runtime] Role entrypoint . CALLING   OnStart()
[WaWorkerHost.exe] RoleEntryPoint.OnStart()
[runtime] Role entrypoint . COMPLETED OnStart()
[runtime] Role entrypoint . CALLING   Run()
Information: Mysql_WorkerRole entry point called
Information: Copying folder mysql to C:/Users/ksaleh.CORP/AppData/Local/dftmp/Resources/d3fdb9aa-    67b5-4dad-9c50-0d5116ded0bc/directory/MySQL/
Information: Copying folder mysql\data to     C:/Users/ksaleh.CORP/AppData/Local/dftmp/Resources/d3fdb9aa-67b5-4dad-9c50-0d5116ded0bc/directory/MySQLDatastore/
Information: MySQLIP=127.255.0.0
Information: MySQLPort=20001
Information: Copy C:/Users/ksaleh.CORP/AppData/Local/dftmp/Resources/d3fdb9aa-67b5-4dad-9c50-  0d5116ded0bc/directory/MySQL/my.ini
Information: Starting mysqld C:/Users/ksaleh.CORP/AppData/Local/dftmp/Resources/d3fdb9aa-67b5-4dad-9c50-0d5116ded0bc/directory/MySQL/bin/mysqld.exe
 Information: Arguments --init-file=C:\\Users\\ksaleh.CORP\\AppData\\Local\\dftmp\\Resources\\d3fdb9aa-67b5-4dad-9c50-0d5116ded0bc\\directory\\MySQL\\
Information: enter looping
Information: Working 
```

我将 connectDB.php 更改为使用 127.255.0.0:20001 作为主机（如上），但它会生成“连接到数据库时出错！”。我检查了我机器的事件查看器，发现错误：

```
C:/Users/myuser/AppData/Local/dftmp/Resources/d3fdb9aa-67b5-4dad-9c50-0d5116ded0bc/directory/MySQL/bin/mysqld.exe: unknown option '--skip-locking' 
```

它说mysqlid.exe关闭完成

我是否真的安装了 mysql localy（计算模拟器），如果是，为什么服务停止了？为什么我无法连接数据库？我如何检查一切正常？谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:35:02.997

根据您的意见和您对使用 Java/PHP/MySQL 的要求，我建议最好的选择是使用 Windows Azure 虚拟机，而不是使用 Windows Azure Worker Role。

Windows Azure 虚拟机将比您的项目的 Worker 角色更具优势，因为您不需要自动化安装脚本，并且您可以管理和扩展它们相同的 Worker 角色。您的配置如下：

1.  拥有一个 Windows Azure VM（Linux 或 Windows）来配置您的 PHP/Java 实例
2.  拥有一个 Windows Azure VM（Linux 或 Windows）来配置您的 MySQL 实例

您可以通过 RDP 将虚拟机上的应用程序安装/配置到 Windows VM 中的实例，在 Linux 上，您可以使用 Putty 安装/配置您的应用程序。这些虚拟机是耐用的，因此所有安装都将持续存在，您不需要在这方面自动化任何事情。

当您只需要更多资源时，将更多实例添加到您的 Web 实例。我不确定如何处理具有多个实例的 MySQL，这是您未来需要考虑的事情（同时使用 Worker Role 和 Azure VM）。

以下是使用带有 Java 的 Windows Azure VM 的起点： [https ://www.windowsazure.com/en-us/develop/java/tutorials/tomcat-on-a-virtual-machine/](https://www.windowsazure.com/en-us/develop/java/tutorials/tomcat-on-a-virtual-machine/)

最后，如果我必须从事 Java/PHP/MySQL 项目，我更喜欢 Windows Azure 虚拟机和（如果可能的话，用 SQL Azure 替换 MySQL，所以我不需要担心数据库的可扩展性，但 MySQL 也是最佳选择）

# visual-studio - Visual Studio 的 xaml 设计器中的共享资源

> ID：11138908
> 
> 赞同：1
> 
> 时间：2012-06-21T13:10:13.233
> 
> 标签：visual-studio, xaml, shared, resourcedictionary, xaml-designer

如果您尝试将任何共享资源与 x:Shared="false" 一起使用，Visual Studio 2010 的 xaml 设计器会向您显示以下异常：

System.InvalidOperationException 指定元素已经是另一个元素的逻辑子元素。先断开它。

是否有可能解决它（例如，通过实现一个附加属性来创建相同的共享对象）？

示例 xml：

```
<Window.Resources>
    <Image x:Key="SharedImage" x:Shared="false" Source="/Images/image.png" />
    <Style x:Key="ImageButton" TargetType="{x:Type Button}">
        <Setter Property="Content" Value="{StaticResource SharedImage}" />
    </Style>
</Window.Resources>
<StackPanel>
    <Button Style="{StaticResource ImageButton}" />
    <Button Style="{StaticResource ImageButton}" />
</StackPanel> 
```

这个错误在 Visual Studio 2012 中修复了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T14:35:36.837

[不幸的是，这不被视为错误。](https://groups.google.com/d/msg/wpf-disciples/yckol_wAf_U/G_uAsbOxnHcJ)除非 Microsoft 改变主意，否则将您想要共享的任何内容包装在[`ControlTemplate`](http://msdn.microsoft.com/en-us/library/system.windows.controls.controltemplate.aspx).

您的示例看起来像这样（未经测试）：

```
<Window.Resources>
    <ControlTemplate x:Key="ImageButton">
        <Image Source="/Images/image.png" />
    </ControlTemplate>
    <Style TargetType="Button">
        <Setter Property="Content">
            <Setter.Value>
                <Control Template="{StaticResource ImageButton}"/>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>
<StackPanel>
    <Button />
    <Button />
</StackPanel> 
```

# design-patterns - 使用 MVVM 时接口放置在哪里

> ID：11138910
> 
> 赞同：0
> 
> 时间：2012-06-21T13:10:18.810
> 
> 标签：design-patterns, mvvm

## 编辑：

我提供了几个接口来描述项目应该包含的所有功能。我不知道如何组织项目。这是我的选择，我不知道哪个最合适：

1.  创建一个引用包含接口的项目的新项目。开始在该项目中实现接口。

2.  将实现放在项目中的每个接口旁边。换句话说，如果接口 IFoo.cs 位于文件夹 Model 中，则将 Foo.cs 放在同一文件夹中。

3.  将所有接口放在一个名为 interfaces 的文件夹中。

## 编辑 2

我基本上提供了类似的东西：

![在此处输入图像描述](../Images/f49c0b74783764b3ec2ac66702f31bf1.png)

接口没有组织，它们都在同一个命名空间和目录中。我必须组织它并使用 mvvm 模式实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:14:12.607

这取决于您要访问/实现界面的位置。

a）如果您希望界面位于表示层，那么继续创建一个名为 Common 的项目，并将您假设在多个项目中使用的所有界面放置。

b) 如果您希望界面在多个层上可见，例如 WCF 中的服务合同，它应该在表示层和中间/服务层都可用。然后您可以将它们放在一个共享项目中，该项目将在多个层之间共享。

# c# - Visual Studio 2010 报告：水晶或标准报告？

> ID：11138915
> 
> 赞同：0
> 
> 时间：2012-06-21T13:10:27.293
> 
> 标签：c#, crystal-reports, report

我有一个快速赞成的问题要问你。我以前从未在 c# 中做过任何报告，因此我正在寻找 Microsoft 报告技术与 Crystal 报告之间的比较。两者之间有什么大的区别吗？一个人做某事是否比另一个人做得特别好？

在我开始研究报告之前，我想弄清楚我想使用哪一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:33:01.890

我发现报告是一种必要的邪恶，我更愿意通过工作流程管理分析，即报告。因此，如果我的回答似乎是否定的，那么报告的内容比工具本身还多。我只使用了 CR，所以我无法与 MS 报告对话。

CR 的设计理念与他们的设计时间不同，所以 UI 起初感觉有点尴尬。有点像在马路对面开车。你知道你在做什么，但感觉不舒服。

我总是通过将数据推送到我的 CR 报告中，`datatables`而不是将报告直接连接到数据库。这是我唯一能以自动化方式使报告“可测试”的方法。这也将报告与数据库/源分开，从而更容易从本地开发转移到暂存，再到生产。

您可以将对象和集合传递给报表（IEnumerable），但对的支持`datatables`更好。例如。如果集合为空，CR 将抛出异常。但如果数据表为空，CR 将呈现没有数据的报表。

with `dataset`CR 的表现很糟糕。我总是将我的对象图展平为表格数据，然后将数据传递给报告。否则它会永远渲染。

在 VS 2010 CR for .Net 之前作为 VS 的一部分发布，这使得升级和迁移相当直接。升级从来都不是简单的，但至少 .net 和 CR 是一起发布的。从 VS 2010 开始，CR 现在处于其自己的发布周期，这意味着无法保证您何时升级到 VS 的下一个版本并且仍然与 CR 兼容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T13:33:49.440

根据我的经验，Microsoft 报告在自定义设计报告中并没有那么强大。我们使用 Crystal 报表已有 4 年了。尽管我们遇到了一些关于重载和未处理异常的可忽略问题，但我还是建议您使用它。

*   内置功能导出为 PDF 和 EXCEL。
*   通过数据集轻松实现数据源。
*   子报告有助于管理何时需要报告大量详细信息。

等等。

# c# - 限制通过并行任务库运行的活动任务数量的最佳方法

> ID：11138927
> 
> 赞同：37
> 
> 时间：2012-06-21T13:10:51.557
> 
> 标签：c#, .net, task-parallel-library

**考虑一个包含许多**需要处理的作业的队列。队列的限制是一次只能获得一份工作，并且无法知道有多少工作。这些作业需要 10 秒才能完成，并且需要大量等待来自 Web 服务的响应，因此不受 CPU 限制。

如果我使用这样的东西

```
while (true)
{
   var job = Queue.PopJob();
   if (job == null)
      break;
   Task.Factory.StartNew(job.Execute); 
} 
```

然后它会以比完成它们的速度更快的速度从队列中快速弹出作业，耗尽内存并跌倒在它的屁股上。>.<

我不能使用（我不认为）[ParallelOptions.MaxDegreeOfParallelism](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.aspx)，因为我不能使用 Parallel.Invoke 或 Parallel.ForEach

我找到了 3 个替代方案

1.  将 Task.Factory.StartNew 替换为

    ```
    Task task = new Task(job.Execute,TaskCreationOptions.LongRunning)
    task.Start(); 
    ```

    这似乎在一定程度上解决了这个问题，但我[不清楚这是在做什么](https://stackoverflow.com/questions/3488381/does-the-task-parallel-library-or-plinq-take-other-processes-into-account)以及这是否是最好的方法。

2.  创建[限制并发程度的自定义任务调度程序](http://msdn.microsoft.com/en-us/library/ee789351.aspx)

3.  [使用BlockingCollection](http://msdn.microsoft.com/en-us/library/dd997371.aspx)之类的东西在启动时将作业添加到集合中，并在完成时删除以限制可以运行的数量。

对于#1，我必须相信自动做出正确的决定，#2/#3 我必须计算出可以自己运行的最大任务数。

我是否正确理解了这一点-这是更好的方法，还是有其他方法？

**编辑**- 这是我从下面的答案中得出的，生产者 - 消费者模式。

以及整体吞吐量目标不是使作业出队的速度超过处理速度，并且没有多个线程轮询队列（此处未显示，但这是一个非阻塞操作，如果从多个地方以高频率轮询将导致巨大的交易成本） .

```
// BlockingCollection<>(1) will block if try to add more than 1 job to queue (no
// point in being greedy!), or is empty on take.
var BlockingCollection<Job> jobs = new BlockingCollection<Job>(1);

// Setup a number of consumer threads.
// Determine MAX_CONSUMER_THREADS empirically, if 4 core CPU and 50% of time
// in job is blocked waiting IO then likely be 8.
for(int numConsumers = 0; numConsumers < MAX_CONSUMER_THREADS; numConsumers++)
{
   Thread consumer = new Thread(() =>
   {
      while (!jobs.IsCompleted)
      {
         var job = jobs.Take();
         job.Execute();
      }
   }
   consumer.Start();
}

// Producer to take items of queue and put in blocking collection ready for processing
while (true)
{
    var job = Queue.PopJob();
    if (job != null)
       jobs.Add(job);
    else
    {
       jobs.CompletedAdding()
       // May need to wait for running jobs to finish
       break;
    }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-21T13:43:00.947

我刚刚给出了一个非常适用于这个问题的[答案。](https://stackoverflow.com/questions/11099810/managing-the-tpl-queue/11100423#11100423)

基本上，TPL Task 类用于调度 CPU 密集型工作。它不是为阻止工作而设计的。

您正在使用不是 CPU 的资源：等待服务回复。这意味着 TPL 将错误地管理您的资源，因为它在一定程度上假定 CPU 有界性。

自己管理资源：启动固定数量的线程或LongRunning任务（基本相同）。根据经验确定线程数。

**您不能将不可靠的系统投入生产。**出于这个原因，我推荐 #1 但*节流*。不要创建与工作项一样多的线程。创建使远程服务饱和所需的尽可能多的线程。为自己编写一个辅助函数，它产生 N 个线程并使用它们来处理 M 个工作项。通过这种方式，您可以获得完全可预测且可靠的结果。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-03-19T19:28:10.030

稍后在您的代码或 3rd 方库中由 , 引起的潜在流拆分和延续`await`不会很好地与长时间运行的任务（或线程）一起使用，因此不要打扰使用长时间运行的任务。在这个`async/await`世界上，它们是无用的。更多细节[在这里](https://blog.i3arnon.com/2015/07/02/task-run-long-running/)。

您可以调用`ThreadPool.SetMaxThreads`，但在进行此调用之前，请确保使用 设置最小线程数`ThreadPool.SetMinThreads`，使用低于或等于最大值的值。顺便说一句，MSDN 文档是错误的。通过这些方法调用，您可以低于机器上的内核数量，至少在 .NET 4.5 和 4.6 中，我使用这种技术来降低内存有限的 32 位服务的处理能力。

但是，如果您不想限制整个应用程序，而只是限制它的处理部分，则自定义任务调度程序将完成这项工作。很久以前，MS 发布了带有几个自定义任务调度程序的[示例](https://code.msdn.microsoft.com/ParExtSamples/Release/ProjectReleases.aspx?ReleaseId=4179)，包括一个`LimitedConcurrencyLevelTaskScheduler`. 使用 手动生成主处理任务`Task.Factory.StartNew`，提供自定义任务调度程序，由它生成的所有其他任务都将使用它，包括`async/await`甚至`Task.Yield`用于在`async`方法的早期实现异步。

但是对于您的特定情况，两种解决方案都不会在完成之前停止耗尽您的工作队列。这可能是不可取的，具体取决于您的队列的实现和目的。它们更像是“触发一堆任务并让调度程序找到时间执行它们”类型的解决方案。因此，也许这里更合适的东西可能是一种更严格的方法来控制作业的执行`semaphores`。代码如下所示：

```
semaphore = new SemaphoreSlim(max_concurrent_jobs);

while(...){
 job = Queue.PopJob();
 semaphore.Wait();
 ProcessJobAsync(job);
}

async Task ProcessJobAsync(Job job){
 await Task.Yield();
 ... Process the job here...
 semaphore.Release();
} 
```

给猫剥皮的方法不止一种。使用你认为合适的东西。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-01-23T07:02:35.383

Microsoft 有一个非常酷的库，称为 DataFlow，它完全可以满足您的需求（以及更多）。详情[在这里](https://msdn.microsoft.com/en-us/library/hh228603(v=vs.110).aspx)。

您应该使用 ActionBlock 类并设置 ExecutionDataflowBlockOptions 对象的 MaxDegreeOfParallelism。ActionBlock 与 async/await 配合得很好，因此即使在等待外部调用时，也不会开始处理新作业。

```
ExecutionDataflowBlockOptions actionBlockOptions = new ExecutionDataflowBlockOptions
{
     MaxDegreeOfParallelism = 10
};

this.sendToAzureActionBlock = new ActionBlock<List<Item>>(async items => await ProcessItems(items),
            actionBlockOptions);
...
this.sendToAzureActionBlock.Post(itemsToProcess) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-21T13:59:26.887

这里的问题似乎不是*running太多，而是* *schedule*`Task`太多。您的代码将尝试调度尽可能多的 s，无论它们执行的速度有多快。如果你有太多的工作，这意味着你会得到OOM。 *`Task``Task`*

 *因此，您提出的任何解决方案都不会真正解决您的问题。如果看起来简单地指定`LongRunning`可以解决您的问题，那么这很可能是因为创建一个新的`Thread`（这就是什么`LongRunning`）需要一些时间，这有效地限制了获得新工作。因此，此解决方案只能在偶然情况下起作用，并且很可能会在以后导致其他问题。

关于解决方案，我大多同意 usr：运行良好的最简单的解决方案是创建固定数量的`LongRunning`任务，并有一个循环调用（如果该方法不是线程安全的，`Queue.PopJob()`则由 a 保护）并完成工作。`lock``Execute()`

**更新：**经过更多思考，我意识到以下尝试很可能会表现得很糟糕。仅当您确实确定它对您有用时才使用它。

* * *

但是 TPL 试图找出最好的并行度，即使对于 IO-bound 也是如此`Task`。因此，您可能会尝试利用它来发挥自己的优势。Long `Task`s 在这里是行不通的，因为从 TPL 的角度来看，似乎没有做任何工作，它会`Task`一遍又一遍地启动 new s。相反，您可以做的是`Task`在每个`Task`. 这样，TPL 就会知道发生了什么，并且它的算法可能运行良好。此外，为了让 TPL 决定并行度，`Task`在其行中第一个的 a 的开头，开始另一行`Task`s。

该算法*可能*运行良好。但也有可能 TPL 会在并行度方面做出错误的决定，我实际上还没有尝试过这样的事情。

在代码中，它看起来像这样：

```
void ProcessJobs(bool isFirst)
{
    var job = Queue.PopJob(); // assumes PopJob() is thread-safe
    if (job == null)
        return;

    if (isFirst)
        Task.Factory.StartNew(() => ProcessJobs(true));

    job.Execute();

    Task.Factory.StartNew(() => ProcessJob(false));
} 
```

然后开始

```
Task.Factory.StartNew(() => ProcessJobs(true)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T15:56:07.043

`TaskCreationOptions.LongRunning`对于阻止任务很有用，在这里使用它是合法的。它的作用是建议调度程序将一个线程专用于该任务。调度程序本身尝试将线程数保持在与 CPU 内核数相同的级别，以避免过多的上下文切换。

[Joseph Albahari 在 C#](http://www.albahari.com/threading/part5.aspx#_Task_Parallelism)中的线程中有很好的描述

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-08T20:23:55.277

我使用消息队列/邮箱机制来实现这一点。它类似于演员模型。我有一个有邮箱的类。我称这个班级为我的“工人”。它可以接收消息。这些消息是排队的，它们本质上定义了我希望工作人员运行的任务。工作人员将使用 Task.Wait() 来完成其任务，然后再将下一条消息出列并开始下一个任务。

通过限制我拥有的工人数量，我可以限制正在运行的并发线程/任务的数量。

这在我关于分布式计算引擎的博客文章中通过源代码进行了概述。如果您查看 IActor 和 WorkerNode 的代码，我希望它是有意义的。

[https://long2know.com/2016/08/creating-a-distributed-computing-engine-with-the-actor-model-and-net-core/](https://long2know.com/2016/08/creating-a-distributed-computing-engine-with-the-actor-model-and-net-core/)*

# javascript - 在 javascript 中调用 C 函数

> ID：11138929
> 
> 赞同：8
> 
> 时间：2012-06-21T13:10:59.117
> 
> 标签：javascript, html, c, translation

下面`javascript`是打印`HTML`到页面上的示例，是否可以在其上调用`C`函数，例如`C`将某些内容转换为另一种语言，有一个函数 `LANG_Str("text")`可以将文本转换为指定的语言。是否可以在 Javascript 中的以下文本上使用此功能？

```
"<tr><th>Service</th><th>Target Allocation (%)</th><th></th>" 
```

**编辑：**

我基本上想做人类语言翻译。该站点已经支持多语言，问题出在上面显示的自定义屏幕上，它是用 Javascript 生成的，不能使用用于翻译文本的函数，就像它在 C 中正常完成的那样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T13:13:15.810

如果它在浏览器中运行：否。对不起。

在将页面内容放在一起时，您可能可以事先在服务器端代码中执行此操作（例如可以调用 C 的 Python 或 PHP）。或者，您可以向将 C 函数公开为 HTTP API/端点（通过 GCI、FCGI 或 Python/PHP/Perl）的服务器发出 AJAX 请求。但不是在浏览器中。

这是因为 JS 在沙盒虚拟环境中运行，无法访问系统调用或运行时之外的任何内容。

**编辑**

回应您的评论“脚本是在 C 中使用 HTML_WriteToCgi 运行的”，这表明您正在将 C 中的 HTML 放在您的服务器上。如果这是正确的，请选择上面的选项 1，如果所有值都来自服务器已知的某些数据，则将值直接注入 JS 源代码。

您可能会考虑将一些功能从浏览器 JS 中移出并返回到服务器端代码中来解决您的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T13:14:36.383

您可以提出特殊请求，以便网络服务器可以使用该请求并将其发送到网页。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T13:13:36.300

JavaScript 不能直接访问任何其他进程，但它*可以*向服务器发出信息请求。如果需要，服务器可以调用 C 函数。

最后，调用 C 函数的不是 JavaScript，而是调用 C 函数的服务器（以及它使用的任何语言：Python、PHP、ASP.NET、JSP 等）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-28T13:16:37.123

我的解释是，您的目标是在 HTML / Javascript 中调用 C 函数并捕获输出。

你可以做的是制作一个虚拟机。基本上，你有一个巨大的数组“内存”，几个“寄存器”等等......最难的部分是确保它们的指令集和你的 VM 的字节码反映了一些有 C 编译器的常见指令集为了。您在计算机上编译该 VM 的 C 代码，将其保存到文件中，然后在 VM 上运行它。如果这样做太难了，你可以得到一个 C 到汇编的转换器，然后只定义几个汇编指令。有一个纯 javascript 中的[Linux 模拟器](https://s-macke.github.io/jor1k/demos/main.html?user=6hnlraO8Dr&cpu=asm&n=1&relayURL=wss%3A%2F%2Frelay.widgetry.org%2F)，没有服务器调用可以做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T13:23:51.420

您可能会考虑在您的服务器上创建一个[RESTful Web 服务](http://en.wikipedia.org/wiki/Representational_state_transfer)，该服务将接收源文本和目标语言 ID，然后返回翻译后的文本。然后，您可以通过[ajax 调用](http://api.jquery.com/jQuery.ajax/)从您的网页访问它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-08T13:40:21.807

我不是网络开发方面的专家。但是javascript不能使用webassembly调用c吗？虽然不确定它的限制/约束 - 例如内存

像这样的东西？ [https://developer.mozilla.org/en-US/docs/WebAssembly/C_to_wasm](https://developer.mozilla.org/en-US/docs/WebAssembly/C_to_wasm)

# authentication - OpenDS DSMLv2 身份验证

> ID：11138933
> 
> 赞同：0
> 
> 时间：2012-06-21T13:11:05.063
> 
> 标签：authentication, opends, dsml

我已经设置了 OpenDS 并在 Tomcat 中安装了 DSML 服务。

我可以验证设置是否正常工作。但是，我无法使用 DSML 服务进行身份验证以进行更改。

在soapUI中，我准备了一个请求。我已将主体和密码放入请求的 HTTP 基本身份验证属性中。

但是，在执行调用时，我在服务的响应中收到以下错误消息：

```
The entry o=TestOrgUnit,dc=example,dc=com cannot be added due to insufficient access rights 
```

否则指定凭据的正确方法是什么？这是必须在 SOAP 请求消息中完成的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:17:22.607

只要主体采用 DN 的形式（现有用户的），这应该可以工作。服务器还应该设置访问控制以允许用户添加条目。

访问权限不足似乎表明 LDAP 连接未经过身份验证，或者 ACI 不允许该用户添加到 OpenDS 目录。

您可能需要检查 OpenDJ DSML 网关，因为它在身份验证方面提供了 OpenDS 更多的功能（包括对 LDAPS 的支持）。主干或 OpenDJ 2.5.0-Xpress1 具有该支持。

亲切的问候，

卢多维奇·普瓦图

ForgeRock - OpenDJ 的产品经理。[http://opendj.forgerock.org/](http://opendj.forgerock.org/)

# visual-studio-2010 - Visual Studio 2010 打开解决方案时显示消息

> ID：11138934
> 
> 赞同：0
> 
> 时间：2012-06-21T13:11:08.383
> 
> 标签：visual-studio-2010, plugins, start-page

我想知道是否有人知道任何可以在 Visual Studio 2010 中用于为项目设置启动页面的插件。

我想要做的是在每次打开项目时显示一些关于项目的重要说明。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:16:02.547

也许你需要看看这个 Adrian Collier - MSFT 的文章：

[创建自定义起始页](http://blogs.msdn.com/b/visualstudio/archive/2010/07/29/walkthrough-creating-a-custom-start-page-part-1.aspx)

# javascript - 如何在打印事件上触发 javascript？

> ID：11138939
> 
> 赞同：30
> 
> 时间：2012-06-21T13:11:18.663
> 
> 标签：javascript, browser, printing

用户打印页面时是否可以触发 javascript 事件？当用户选择打印页面时，我想删除对 j​​avascript 库的依赖，因为该库非常适合屏幕但不适合打印。

知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-29T23:34:16.583

对于任何偶然发现谷歌这个答案的人，让我试着澄清一下：

正如 Ajay 指出的那样，有两个事件被触发以进行打印，但它们并没有得到很好的支持；据我所知，它们仅在 Internet Explorer 和 Firefox (6+) 浏览器中受支持。这些事件是 window.onbeforeprint 和 window.onafterprint，它们（如您所料）将在打印作业之前和之后触发。

但是，正如 Joe 的链接 ( [https://stackoverflow.com/a/9920784/578667](https://stackoverflow.com/a/9920784/578667) ) 中所指出的，这并不是在所有情况下都完全实现的。在大多数情况下，这两个事件都会在对话之前触发；在其他情况下，脚本执行可能会在打印对话框期间暂停，因此两个事件可能会同时触发（在对话框完成后）。

有关这两个事件的更多信息（和浏览器支持）：

[https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeprint](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeprint)

[https://developer.mozilla.org/en-US/docs/DOM/window.onafterprint](https://developer.mozilla.org/en-US/docs/DOM/window.onafterprint)

简短的回答：如果您希望干扰打印流程，请不要。如果您希望在打印后触发代码，那么它不会像您想要的那样工作；期待糟糕的浏览器支持，并尝试优雅地降级。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-05-12T13:30:38.683

它可以通过覆盖来完成，例如，`window.onbeforeprint`。

使用 Chrome，我发现更神秘的`window.matchMedia("print").addListener(function() {alert("Print Dialog open.")})`也可以。

这个有争议的特性可以用来阻止用户打印页面。

我第一次在[Scribd](http://www.scribd.com/doc/125450990/e-WATCH-INC-v-AVIGILON-CORPORATION)上遇到它。在那里，如果您使用菜单命令打开打印对话框，页面内容将显示为灰色，并出现警告弹出消息，说明您无法打印页面的原因。（完整分析的注意事项：在该页面上， control-p 也被覆盖，因此您根本无法使用它来打开打印对话框。此外，还有一个用于隐藏内容的打印机输出的 @media CSS；所有测试均在 Firefox 上进行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:18:56.120

如果你有一个场景，你想在打印对话框出现之前或文档发送到打印机队列之后做一些事情，可以使用下面的事件 window.onafterprint ， window.onbeforeprint

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-18T11:36:00.173

对于像我一样来这里寻找使用 Bootstrap 选项的人，我使用以下代码在**单击打印按钮时**实现此目的。当他们按 CTRL + P 时，这**将不起作用。**

```
$("#print_page").click(function(){
$("#print_section").addClass('visible-print-block');
window.print();
$("#print_section").removeClass('visible-print-block');}) 
```

您需要将 hidden-print 添加到您不想打印的任何内容，然后将 print_section 的 ID（或一个类，如果您有多个部分）添加到您想要打印的位！有点hacky，但它的工作原理！

# matlab - 在 MATLAB 中加载 motorhawk DLL

> ID：11138946
> 
> 赞同：1
> 
> 时间：2012-06-21T13:11:45.730
> 
> 标签：matlab, dll, loadlibrary

我真的不是编程专家，所以我已经为我的愚蠢问题道歉。

我正在尝试以这种方式加载控制板（来自 pc-control.co.uk 的 motorhawk）的 dll

```
loadlibrary('hawk.dll', 'hawkdll.h', 'alias', 'hawk') 
```

如果然后我检查库是否已加载

```
libisloaded('hawk') 
```

我得到了积极的回应。但是，如果我要求我刚刚加载的功能

```
libfunctions('hawk') 
```

我没有得到任何功能，错误提示找不到 lib.hawk 方法。

我认为问题可能出在标题的编写方式上

```
///////////////////////////////////////////////
//          hawkdll.h
//        revision 1.3
//
//    All copyright PC Control Ltd. 2010
//      
///////////////////////////////////////////////
// DLL Function type definitions

// system defs
typedef int (*Type_Sys_Initialise)();               // find all devices connected and open USB paths to them
typedef int (*Type_Sys_GetMotorHawkCount)();        // find number of motor hawks connected
typedef int (*Type_Sys_GetSwitchingHawkCount)();    // find number of switching hawks connected
typedef int (*Type_Sys_GetServoHawkCount)();        // find number of servo hawks connected
typedef int (*Type_Sys_CloseAllDevices)();          // close all open paths to USB devices

// motor hawk defs
typedef int (*Type_Motor_SetType)(int devnum, int type);                // choose motor type (stepper or DC Motors)
typedef int (*Type_Motor_RunSteps)(int devnum, int steps);              // set the number of steps to execute
typedef int (*Type_Motor_SetDCMotors)(int devnum, int M1Speed, int M1Dir, int M2Speed, int M2Dir);      // set the speed and direction of both DC motors
typedef int (*Type_Motor_GetDCMotors)(int devnum, int *M1Speed, int *M1Dir, int *M2Speed, int *M2Dir);  // get the speed and direction of both DC motors from the specified board
typedef int (*Type_Motor_GetType)(int devnum, int *motor_type);                                         // get the type of motor currently configured for from the specified board
typedef int (*Type_Motor_GetStepper)(int devnum, int *direction, int *interval, int *step_mode, int *power, int *steps, int *run_mode, int *paused);            // get the current stepper motor settings from the specified board
typedef int (*Type_Motor_GetStepsRemaining)(int devnum, int *steps_remaining);          // get the current steps remaining from the specified board
typedef int (*Type_Motor_SetDigitalOutputs)(int devnum, int outputs);                   // set the digital outputs
typedef int (*Type_Motor_GetDigitalOutputs)(int devnum, int *outputs);                  // get the current settings of the digital outputs
typedef int (*Type_Motor_GetDigitalInputs)(int devnum, int *inputs);                    // get the current digital inputs
typedef int (*Type_Motor_SetLimitEnables)(int devnum, int m1_forward, int m1_reverse, int m2_forward, int m2_reverse);          // set the limit switch enables
typedef int (*Type_Motor_GetLimitEnables)(int devnum, int *m1_forward, int *m1_reverse, int *m2_forward, int *m2_reverse);      // get the current limit switch enable settings
typedef int (*Type_Motor_SetStepper)(int devnum, int direction, int interval, int step_mode, int power);                    // configure the stepper motor
typedef int (*Type_Motor_PauseStepper)(int devnum);                                     // temporarily pause the stepper motor
typedef int (*Type_Motor_ResumeStepper)(int devnum);                                    // resume running of the stepper motor
typedef int (*Type_Motor_StopStepper)(int devnum);                                      // stop the stepper motor and clear any remaining steps
typedef int (*Type_Motor_SetRunMode)(int devnum, int run_mode);                         // set the stepper running mode (once or continuous)
typedef int (*Type_Motor_ResetBoard)(int devnum);                                       // reset board

// switching hawk defs
typedef int (*Type_Switching_SetOutputs)(int devnum, int outputs);      // set the outputs
typedef int (*Type_Switching_GetOutputs)(int devnum, int *outputs);     // get the current outputs

// servo hawk defs
typedef int (*Type_Servo_SetServos)(int devnum, int Servo1, int Servo2, int Servo3, int Servo4, int Servo5, int Servo6, int Servo7, int Servo8);            // set the servos
typedef int (*Type_Servo_GetServos)(int devnum, int *Servo1, int *Servo2, int *Servo3, int *Servo4, int *Servo5, int *Servo6, int *Servo7, int *Servo8);    // get the current servo positions
typedef int (*Type_Servo_SetOutputs)(int devnum, int outputs);      // set the outputs
typedef int (*Type_Servo_GetOutputs)(int devnum, int *outputs);     // get the current outputs

///////////////////////////////////////////////
// other defs
#define STEP_MODE_FULL  1
#define STEP_MODE_HALF  2

#define POWER_ZERO          1
#define POWER_FRACTIONAL    2
#define POWER_MAX           3

#define MHK_STOPPED         0
#define MHK_FORWARD         1       // direction of DC motors
#define MHK_REVERSE         2

#define TYPE_STEPPER    0           // motor hawk is driving a stepper motor
#define TYPE_DCMOTORS   1           // motor hawk is driving two DC motors

#define STEPPER_RUN_ONCE        0   // run the specified steps once
#define STEPPER_RUN_CONTINUOUS  1   // run stepper continuously 
```

有什么建议吗？

谢谢你的帮助

戴维德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:05:00.947

首先，我建议您将负载调用更改为

```
[notfound, warnings] = loadlibrary('hawk.dll', 'hawkdll.h', 'alias', 'hawk') 
```

该变量`notfound`将列出头文件中提到但在 dll 中找不到的任何函数。 `warnings`也可以提供一些见解。

一个可能的问题是如果 hawk.dll 是一个 c++ 库，matlab 只支持 c 样式链接。如果是这种情况，你仍然可以用 c++ 编写 dll，但你必须添加`extern "C"`到每个函数定义和原型中，并重新编译 dll。如果您无权访问源代码，则需要创建一个包含`extern "C"`函数的包装 DLL，然后调用 c++ 函数。

您可以使用[Dependency Walker](http://www.dependencywalker.com/ "依赖步行者")等工具来确定 hawk.dll 导出的函数，以及它们是 c 还是 c++ 样式的链接。

# android - 在特定时间设置飞行模式

> ID：11138954
> 
> 赞同：0
> 
> 时间：2012-06-21T13:12:11.423
> 
> 标签：android, airplane

```
public class AirPlaneModeActivity extends Activity {

Button b;
TimePicker tp;
Calendar cal;
AlarmManager am ;
PendingIntent pi;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    b = (Button)findViewById(R.id.button1);
    tp = (TimePicker)findViewById(R.id.timePicker1);
    cal = Calendar.getInstance(Locale.getDefault());
    am = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
    tp.setIs24HourView(true);        

    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            cal.set(Calendar.HOUR_OF_DAY,tp.getCurrentHour());
            cal.set(Calendar.MINUTE,tp.getCurrentMinute());
            cal.set(Calendar.SECOND,0);
        }
    }); 

    pi = PendingIntent.getBroadcast(this, 0, setAPM(), 0);       
    am.set(AlarmManager.RTC_WAKEUP,cal.getTimeInMillis(),pi);        

}
public Intent setAPM(){
    boolean isEnabled = Settings.System.getInt(
              getContentResolver(), 
              Settings.System.AIRPLANE_MODE_ON, 0) == 1;
    // toggle airplane mode
    Settings.System.putInt(getContentResolver(),
            Settings.System.AIRPLANE_MODE_ON, isEnabled ? 0 : 1);

    // Post an intent to reload
    Intent intent = new Intent(Intent.ACTION_AIRPLANE_MODE_CHANGED);
    intent.putExtra("state", !isEnabled);
    return intent;          
}

} 
```

我想在设定的时间更改飞机模式，这是我从时间选择器获得的。

然后我将时间选择器的时间设置为女巫的日历，我得到了`alarmmanager.set`方法的时间，但它没有做任何事情。

我在互联网上到处看，但我什么也没找到。[我在stackoverflow](https://stackoverflow.com/questions/9136924/timed-airplane-mode-for-android)上找到了这篇文章，但没有答案（抱歉我的英语不好）谢谢你的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:17:39.560

我在我的代码中发现了这个，[不断切换飞行模式](https://stackoverflow.com/questions/4287506/control-and-display-airplane-mode-in-android)

```
/** Code snippet in AirplaneModeService*/
@Override
public void onCreate() {
    airplaneModeToggler = new AirplaneModeToggler(this);
    Thread mThread = new Thread(null, airplaneModeToggleTask, "AirplaneModeToggleTask");
    mThread.start();
}

private Runnable airplaneModeToggleTask = new Runnable() {
    @Override
    public void run() {
        airplaneModeToggler.toggle(null);
        AirplaneModeService.this.stopSelf();
    }
}; 
```

我认为您需要对 d 执行异步任务，正如您可以在此处或在我链接您的帖子中看到的那样。

编辑：我还在这里找到了[如何在 Android 上检测飞行模式？](https://stackoverflow.com/questions/4319212/how-can-one-detect-airplane-mode-on-android)在答案中知道它是否被激活（做某事或不做某事；））

```
/**
* Gets the state of Airplane Mode.
* 
* @param context
* @return true if enabled.
*/
private static boolean isAirplaneModeOn(Context context) {

   return Settings.System.getInt(context.getContentResolver(),
           Settings.System.AIRPLANE_MODE_ON, 0) != 0;

} 
```

最后我找到了这个[http://dustinbreese.blogspot.com.es/2009/04/andoid-controlling-airplane-mode.html](http://dustinbreese.blogspot.com.es/2009/04/andoid-controlling-airplane-mode.html)我认为这里有你需要的一切！

# sql-server-2008 - 将四个存储过程合二为一

> ID：11138956
> 
> 赞同：0
> 
> 时间：2012-06-21T13:12:14.403
> 
> 标签：sql-server-2008, stored-procedures

我试图在“主”存储过程中调用 3 个其他存储过程，然后返回所有 4 个存储过程的组合结果。

这可能吗？

如果是这样，我将不胜感激一些示例 sql 代码。我可以看到这种工作的唯一方法是“主”存储过程是否可以以某种方式将它从其他存储过程中获得的 3 个部分结果集存储在变量中。我很感激这方面的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:16:28.927

假设您不需要将子过程的输出连接在一起，并且子过程使用`SELECT`语句返回结果集，那么这应该可以正常工作，而您不需要对结果集进行任何额外的存储。

基本示例：

```
CREATE PROC up_sample
AS
    EXEC up_proc1

    EXEC up_proc2

    EXEC up_proc3
GO 
```

# wordpress - 多语言wordpress...哪个插件？

> ID：11138959
> 
> 赞同：8
> 
> 时间：2012-06-21T13:12:23.850
> 
> 标签：wordpress, plugins, translation, multilingual

我正在为某人制作一个小博客，他们想要 2 种语言。我知道有支持多语言的插件，但是我没有足够的时间来测试其中的许多插件，看看哪个更合适。出于这个原因，我会告诉你我想做什么，希望你能给我一些建议。

这个博客将有一些用一种语言写的文章，一些用另一种语言写的，还有一些用两种语言写的。当有人点击切换语言按钮时，我不一定需要它指向同一个帖子，只需切换到只有该语言文章的主页视图。我在看 qTranslate，我可以用它来做吗？对于这种类型的结构，您还有什么要推荐的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T13:31:52.803

**qTranslate**是迄今为止我所知道的最好的，[http:](http://wordpress.org/extend/plugins/qtranslate/) //wordpress.org/extend/plugins/qtranslate/ 。

一篇文章可以用一种或多种语言编写，由您选择。这个插件也很容易个性化、设置、在代码中使用和通过博客仪表板进行管理。

祝你好运！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T06:17:22.883

[WPML](http://wpml.org/)拥有超过 10 万客户和高级支持，它还处理不同的特定场景，如菜单翻译、管理选项/自定义字段翻译等。

它的工作方式与 qTranslate 不同 - 它为每种翻译的语言创建一个帖子条目，这使得添加不同的值（甚至是每个翻译的类别、标签和字段）变得更加容易，而 qTranslate 正在向真实的帖子添加一些元标签和从技术上讲，这很奇怪。

# c# - MonoTouch - 2 个绑定项目之间的冲突

> ID：11138970
> 
> 赞同：1
> 
> 时间：2012-06-21T13:12:57.840
> 
> 标签：c#, objective-c, binding, xamarin.ios

我想在 MonoTouch 应用程序中使用两个 Objective-C 库：Facebook 库和 Millennial Media 的广告库。

当我尝试编译我的 MonoTouch 应用程序（即使只是用于模拟器）时，我收到错误：

```
ld: duplicate symbol _OBJC_CLASS_$_SBJsonParser in /var/folders/4s/lcvdj54x0g72nrsw9vzq6nm80000gn/T/tmp6024c613.tmp/libMMSDK_4.5.5.a(SBJsonParser.o) and /var/folders/4s/lcvdj54x0g72nrsw9vzq6nm80000gn/T/tmp6024c613.tmp/libFacebookSDK.a(SBJsonParser.o) for architecture i386
collect2: ld returned 1 exit status 
```

我假设两个库都在使用`SBJsonParser`，这就是问题所在。

因此，我尝试将它们放在同一个 MonoTouch 绑定项目中，但仍然得到完全相同的错误。

我的绑定来自[GitHub 上的 Xamarin 绑定项目](https://github.com/mono/monotouch-bindings)。这是设置的链接器标志：

```
[assembly: LinkWith ("libMMSDK_4.5.5.a", LinkTarget.ArmV6 | LinkTarget.ArmV7 | LinkTarget.Simulator, Frameworks = "CoreGraphics QuartzCore MediaPlayer CoreLocation MobileCoreServices AudioToolbox AVFoundation SystemConfiguration UIKit", ForceLoad = true)]

...

[assembly: LinkWith ("libFacebookSDK.a", LinkTarget.Simulator | LinkTarget.ArmV6 | LinkTarget.ArmV7, ForceLoad = true, Frameworks = "CoreGraphics")] 
```

我能做些什么来解决这个问题吗？也许是一个额外的 MonoTouch 编译器标志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:27:23.840

好的，找到了解决方法。

Millenial Media SDK 有一个名为 的文件夹`MMSDK_Split_Libraries`，在里面我发现了一个`libMMSDK_4.5.5_withoutJSON.a`文件，其中包含`SBJsonParser`XCode 的实现文件。使用这个不同的库，至少我的应用程序现在可以编译了。我还没有集成 MM SDK，所以我得看看它是否正常工作。

很好奇是否有人有另一种方法来解决它。

# ubuntu - Play 在 ubuntu 12.04 LTS 上运行时给出“非法指令”

> ID：11138974
> 
> 赞同：0
> 
> 时间：2012-06-21T13:13:04.467
> 
> 标签：ubuntu, playframework, vps, playframework-1.x

最近我们开始使用 play-framework 开发一个项目。由于我的开发人员是分布式的，因此我希望为他们提供一个通用的开发环境，因此我购买了一台在 Ubuntu 12.04 LTS 上运行的 Xen-VPS 服务器。

现在，当我开始运行 play-framework 时，它会给出一条错误消息“非法指令”

注意：我已经在 PATH 中设置了我的 PLAY_HOME 的路径。

请检查下面的屏幕截图

![在此处输入图像描述](../Images/f9dae232e8c270f8b9287b90a39d701f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:51:16.717

尝试以完整路径为前缀运行它。

```
/root/play-1.2.4/play 
```

有传言 play 也是 Ubuntu 中包含的一个命令行命令，用于播放声音。检查您是否对此没有冲突。

如果是这种情况，只需重命名 play 可执行文件，或者更好的是，使用另一个名称创建指向 play 可执行文件的链接：

```
ln -s /root/play-1.2.4/play /usr/bin/play-framework 
```

并且检查`/usr/bin`在您的路径中。

# php - 在 php 中使用原始模式在服务器上打印

> ID：11138977
> 
> 赞同：1
> 
> 时间：2012-06-21T13:13:14.287
> 
> 标签：php, printing

```
printer_set_option($ph, PRINTER_MODE, "RAW");
printer_set_option($ph, PRINTER_PAPER_FORMAT, PRINTER_FORMAT_CUSTOM);
printer_set_option($ph, PRINTER_PAPER_LENGTH, 50);
printer_start_doc($ph,"abc");
printer_start_page($ph);
$font = printer_create_font("Arial", 72, 48, 400, false, false, false, 0);
printer_select_font($ph, $font);
printer_draw_text($ph, "test", 10, 10);
printer_start_page($ph);
printer_end_doc($ph); 
```

我正在尝试以原始模式在服务器（连接到服务器的热敏打印机）上的 php 中打印。有没有办法改变字体大小？我尝试使用printer_draw_text，但没有起始页就无法工作。如果我使用起始页，热敏打印机将进纸大约 A4 尺寸。有没有办法可以更改文本的字体大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:22:48.123

Printer_set_option() 没有帮助吗？[http://php.net/manual/en/function.printer-set-option.php](http://php.net/manual/en/function.printer-set-option.php)

# php - 尝试加载 SQLSRV 时页面挂起（IIS6 中的 PHP5，Windows Server 2003 R2）

> ID：11138983
> 
> 赞同：4
> 
> 时间：2012-06-21T13:13:42.557
> 
> 标签：php, iis-6, windows-server-2003, sql-server-native-client

如果这听起来像是破纪录，我深表歉意，但我已经在互联网上搜索了好几天，并且交叉引用了至少三个“如何使用 IIS 6 安装 PHP 5”指南，但没有任何运气。我正在尝试在 Windows Server 2003 R2 上使用 IIS 6 配置 PHP 5.4，以及用于连接 SQL Server 的 SQLSRV（SQL Server Native Client）。

这是我到目前为止所做的：

1.  将php-5.4.4-nts-Win32-VC9-x86.zip**解压**到 C:\PHP
2.  安装 FastCGI **fcgisetup_1.5_rtw_x86.msi**
3.  下载 Microsoft Drivers for PHP for SQL Server 并将**php_sqlsrv_54_nts.dll**和**php_pdo_sqlsrv_54_nts.dll**提取到 C:\PHP\ext
4.  修改 PHP.ini 并进行以下更改：

    error_log=C:\Windows\temp\php_errors.log
    upload_tmp_dir=C:\Windows\temp session.save_path=C:\Windows\temp
    cgi.force_redirect=0 cgi.fix_pathinfo=1 fastcgi.impersonate=1
    fastcgi.logging=0 max_execution_time=300 date.timezone=欧洲/都柏林 extension_dir="C:\PHP\ext\"

    扩展=php_mysql.dll 扩展=php_mysqli.dll 扩展=php_mbstring.dll 扩展=php_gd2.dll 扩展=php_gettext.dll 扩展=php_curl.dll 扩展=php_exif.dll 扩展=php_xmlrpc.dll 扩展=php_openssl.dll 扩展=php_soap.dll扩展=php_pdo_mysql.dll 扩展=php_pdo_sqlite.dll 扩展=php_imap.dll 扩展=php_tidy.dll 扩展=php_pdo_sqlsrv_54_nts.dll 扩展=php_sqlsrv_54_nts.dll

5.  已安装**Microsoft SQL Server 2005 Native Client**

如果我注释掉最后两个扩展，我可以毫无问题地查看**phpinfo()**。但是，一旦它们被引入并且应用程序池被回收，它就会导致页面挂起，或者 phpinfo() 将显示但 SQLSRV 不存在。

有什么我想念的吗？谢谢，瓦卢克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:49:21.370

我相信这个问题与我为有问题的服务器使用错误版本的软件有关。例如：

1.  我更改为 PHP 5.3 (5.3.14) VC9 x86 Non Thread Safe
2.  我卸载了 Microsoft SQL Server 2005 Native Client 并安装了 Microsoft SQL Server 2008 Native Client

我现在在 PHP 中运行 SQLSRV！

# android - 用于复杂模式交互的 Android 约定

> ID：11138985
> 
> 赞同：0
> 
> 时间：2012-06-21T13:13:47.053
> 
> 标签：android, user-interface, modal-dialog, android-4.0-ice-cream-sandwich

我正在寻找实现模式视图的“Android方式”，它会中断当前流程并显示另一组屏幕（多个屏幕）。完成后，我想回到原来的位置。我实际上正在寻找类似于[此处](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)描述的 iOS 行为的东西。

在Android（ICS）中是否有标准的方法？

谢谢！

爱丽儿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:22:35.393

我认为最接近 iOS 模式视图的功能将是一个主题设置为的 Activity，例如

```
<activity android:theme="@android:style/Theme.Dialog"/>
```

或者

```
<activity android:theme="@android:style/Theme.Holo.Dialog"/>
```

# java - 使用正则表达式以任何顺序查找单词列表的子段

> ID：11138988
> 
> 赞同：1
> 
> 时间：2012-06-21T13:13:50.630
> 
> 标签：java, regex, special-characters, unordered

我有一个单词列表，我必须找到单词的最小单词子段，忽略任何特殊字符和数字，这个子段可以有任何顺序的单词和不区分大小写的搜索，这个编码是在爪哇

例如

```
aaaa aaaa cccc cccc bbbb bbbb bbbb bbbb Bbbb Aaaa Cccc 
```

并且有话

```
aaaa
bbbb
cccc 
```

那么它应该给我输出

```
Bbbb Aaaa Cccc 
```

我知道正则表达式（java中的正则表达式）但是，它是新手，所以任何帮助都会很有用..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:45:43.633

你可以做的是构造一个这样的正则表达式：

```
(?i)\b(aaaa|bbbb|cccc)(?=\W+(\w+)\W+(\w+)\b)
\__/  \_____________/    \______/         \__ makes sure it's a complete word
 |           |               \____ repeat N-1 times (N = number of words)
 |           \___ all words alternated to match the first word
 \__ case insensitive matching 
```

然后使用 Java 检查捕获组是否包含所有单词。如果他们找到了匹配项，如果没有，请搜索下一个匹配项并重复。

* * *

您可以一直使用正则表达式来解决这个问题，但您必须构造正确的表达式：

```
(?i)\b(words)\W+(?!\1\b)(words)\W+(?!(?:\1|\2)\b)(words)\b
       \___/ \________________/   \_____________/
         |           |                  |
  list of all the    |         lookahead has to include
  words alternated   |         all previous capturing groups
                     |
             repeat N-1 times but you have to 
             change the lookahead each time 
```

对于许多单词来说，这将是一个相当大的表达式，尽管`words`可以是匹配所有允许单词的任何表达式（不必是交替）。

# javascript - 让 javascript 将文本准确地写入它的位置

> ID：11138999
> 
> 赞同：3
> 
> 时间：2012-06-21T13:14:10.503
> 
> 标签：javascript, jquery

是否可以让 javascript 在 javascript 代码所在的位置输出 html？

例如

```
<html>
<head>
<title>
</title>
</head>
<body>
<div>header</div>
<div>main

<script type="text/javascript" language="javascript">
// print some html here, maybe <a href="http://www.google.com">google</a>
</script>

</div>
<div>footer</div>

</body>
</html> 
```

最终结果如下所示：

```
<html>
<head>
<title>
</title>
</head>
<body>
<div>header</div>
<div>main<a href="http://www.google.com">google</a></div>
</script>

</div>
<div>footer</div>

</body>
</html> 
```

我知道我可以提供包含的 div 和 id，然后让 javascript 像这样插入锚点，但我只是想知道是否可以直接执行此操作，就像将 html 准确地写在 javascript 的位置一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T13:15:28.000

用于`document.write('YOUR_TEXT')`那个

```
<script type="text/javascript" language="javascript">
    document.write('<a href="http://www.google.com">google</a>') 
</script> 
```

[jsFiddle 演示](http://jsfiddle.net/fAUm2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T13:16:06.940

是的，虽然 有很多细微差别，但它会在调用元素`document.write`之后立即输出其内容。`script`

**警告**：一旦 dom 关闭以进行写入，document.write 将清除您的 DOM。如果您需要异步调用函数，则必须进行 DOM 操作，否则将用它应该输出的任何内容`document.write`重写*所有内容。*这会导致无意的结果，这就是为什么它经常被劝阻的原因。