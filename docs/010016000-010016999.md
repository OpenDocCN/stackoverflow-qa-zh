# StackOverflow 问答 10016000-10016999

# java - 如何在 AWT 中围绕文本绘制轮廓？

> ID：10016001
> 
> 赞同：14
> 
> 时间：2012-04-04T17:08:46.670
> 
> 标签：java, awt

如何在 AWT 中的任何文本周围绘制轮廓，类似于这张图片？

![大纲](../Images/1341635869c378e6981a4d60c45483aa.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T18:21:16.663

两个例子

*   [字体和仿射变换](http://www.java2s.com/Code/Java/2D-Graphics-GUI/Paints.htm)

*   [字体、TextLayout 和 AffineTransform](http://www.java2s.com/Code/Java/2D-Graphics-GUI/OutlineFontpaint.htm)

此绘制的输出将是`BufferedImage`，对于 AWT 组件使用方法`paint()`，对于 Swing JComponents 就在那里`paintComponet()`

此外，来自评论中链接的代码：

![](../Images/ece95cff85ba4d2b70119d5522f685a6.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-02-05T10:42:11.320

尝试以下操作：

```
public void paintTextWithOutline(Graphics g) {
    String text = "some text";

    Color outlineColor = Color.white;
    Color fillColor = Color.black;
    BasicStroke outlineStroke = new BasicStroke(2.0f);

    if (g instanceof Graphics2D) {
        Graphics2D g2 = (Graphics2D) g;

        // remember original settings
        Color originalColor = g2.getColor();
        Stroke originalStroke = g2.getStroke();
        RenderingHints originalHints = g2.getRenderingHints();

        // create a glyph vector from your text
        GlyphVector glyphVector = getFont().createGlyphVector(g2.getFontRenderContext(), text);
        // get the shape object
        Shape textShape = glyphVector.getOutline();

        // activate anti aliasing for text rendering (if you want it to look nice)
        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);
        g2.setRenderingHint(RenderingHints.KEY_RENDERING,
                RenderingHints.VALUE_RENDER_QUALITY);

        g2.setColor(outlineColor);
        g2.setStroke(outlineStroke);
        g2.draw(textShape); // draw outline

        g2.setColor(fillColor);
        g2.fill(textShape); // fill the shape

        // reset to original settings after painting
        g2.setColor(originalColor);
        g2.setStroke(originalStroke);
        g2.setRenderingHints(originalHints);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T18:11:31.667

不知道你现在是如何绘制文本的，但你可以这样做的一种方法是使用 BufferedImage 作为你正在绘制的任何内容的覆盖。

1.  使用要绘制的字符串和字体的尺寸创建 BufferedImage（查看 FontMetrics 类）。
2.  用透明度填充 BufferedImage。
3.  使用您想要的任何颜色将您的字符串绘制到 BufferedImage 上。
4.  遍历 BufferedImage 中的每个像素，查看它与文本颜色像素的距离。如果它在一定距离内，则将该像素绘制为黑色，如果它远离文本颜色，则可能更透明。当然，如果像素已经与您的文本颜色相同，则忽略它。
5.  将 BufferedImage 绘制到您正在绘制的任何物体上。

**编辑**

可能有一些库已经这样做了，但是如果我必须从头开始编写代码，这就是我尝试这样做的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-07T14:52:20.903

这是一个骇人听闻的例子。它不像其他的那样复杂，但更易于理解，并且它的行为类似于 JLabel。

```
public class OutlineLabel extends JLabel {

    private Color outlineColor = Color.WHITE;
    private boolean isPaintingOutline = false;
    private boolean forceTransparent = false;

    public OutlineLabel() {
        super();
    }

    public OutlineLabel(String text) {
        super(text);
    }

    public OutlineLabel(String text, int horizontalAlignment) {
        super(text, horizontalAlignment);
    }

    public Color getOutlineColor() {
        return outlineColor;
    }

    public void setOutlineColor(Color outlineColor) {
        this.outlineColor = outlineColor;
        this.invalidate();
    }

    @Override
    public Color getForeground() {
        if ( isPaintingOutline ) {
            return outlineColor;
        } else {
            return super.getForeground();
        }
    }

    @Override
    public boolean isOpaque() {
        if ( forceTransparent ) {
            return false;
        } else {
            return super.isOpaque();
        }
    }

    @Override
    public void paint(Graphics g) {

        String text = getText();
        if ( text == null || text.length() == 0 ) {
            super.paint(g);
            return;
        }

        // 1 2 3
        // 8 9 4
        // 7 6 5

        if ( isOpaque() )
            super.paint(g);

        forceTransparent = true;
        isPaintingOutline = true;
        g.translate(-1, -1); super.paint(g); // 1 
        g.translate( 1,  0); super.paint(g); // 2 
        g.translate( 1,  0); super.paint(g); // 3 
        g.translate( 0,  1); super.paint(g); // 4
        g.translate( 0,  1); super.paint(g); // 5
        g.translate(-1,  0); super.paint(g); // 6
        g.translate(-1,  0); super.paint(g); // 7
        g.translate( 0, -1); super.paint(g); // 8
        g.translate( 1,  0); // 9
        isPaintingOutline = false;

        super.paint(g);
        forceTransparent = false;

    }

    public static void main(String[] args) {
        JFrame w = new JFrame();
        w.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        OutlineLabel label = new OutlineLabel("Test", OutlineLabel.CENTER);
        label.setOpaque(true);
        w.setContentPane(new JPanel(new BorderLayout()));
        w.add(label, BorderLayout.CENTER);
        w.pack();
        w.setVisible(true);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T17:15:04.640

一些最愚蠢的解决方法： - 输入相同的单词两次，但其中一个是黑色的，另一个是白色的，把白色放在黑色的上面，你可能会得到类似的东西。- 找到一个看起来像上面例子的字体，并使用它。

# java - Bresenham 3d 椭球体问题

> ID：10016002
> 
> 赞同：1
> 
> 时间：2012-04-04T17:08:49.210
> 
> 标签：java, algorithm, math

我正在用体素制作一个椭圆体，并且我有一个实现，但它不能正常工作，在过去的几个小时里，我一直在尝试没有成功的事情。

以下是它的工作原理：

*   它使用 Bresenham 圆算法沿 Z 轴绘制 2D 椭圆
*   它计算一个向前和一边到另一边的圆的坐标
*   它使用这些坐标作为 X 和 Y 的半径

这是有效的：

*   球体是完美的
*   椭球体是完美的
    *   z > x 和 z > y
    *   x == y

这是没有的：

*   x != y 时的椭球体
    *   y > x 时的示例[http://postimage.org/image/gslvykrgd/](http://postimage.org/image/gslvykrgd/)
    *   当 x > y 只翻转时也会发生同样的事情

我猜是因为我每次都从中心到前面绘制切片，但我不知道。下面是我的实现，一团糟。我很快把它清理了一下，所以在某种程度上是可以理解的。另外我正在为以后保存优化，我只想让它现在工作。

我不会展示我对圆算法本身的实现，因为我知道它可以工作，而且只会让这个问题变得更长。所以我将解释它的两个功能。

`private List<Integer> getSlice(int rx, int ry)`从运行 Bresenham 圆算法获得原始结果，不需要对称性。它将结果作为 x、y 结果的列表返回。

`public void generateEllipse(int z, int cx, int cy, int cz, int rx, int ry)`使用给定信息生成一个椭圆并使用对称性绘制坐标，这些将呈现在屏幕上。

```
ArrayList<Integer> s = getSlice(rz, rx);
ArrayList<Integer> s2 = getSlice(rz, ry);

int cap = Math.max(s2.size(), s.size());

while (s.size() > 1)
{
    int x = 0;
    int z = 0;
    int z2 = 0;
    int y2 = 0;

    int i = cap - 2;

    if (s.size() > i)
    {
        z = s.get(i);
        x = s.get(i + 1);

        s.remove(i + 1);
        s.remove(i);
    }

    if (s2.size() > i)
    {
        z2 = s2.get(i);
        y2 = s2.get(i + 1);

        s2.remove(i + 1);
        s2.remove(i);
    }

    if (x != 0 && y2 != 0)
        generateEllipse(z, cx, cy, cz, x, y2);

    cap = Math.max(s2.size(), s.size()); 
```

一两周前我问了一个类似的问题（是的，我遇到问题很久了：（）并得到了答案，我实现了它并且它有效，但我不满意，我想避免浮点数一起看[3D Ellipsoid out of distinct units](https://stackoverflow.com/questions/9811582/3d-ellipsoid-out-of-discrete-units)。

有了这个，我在四舍五入和得到不均匀的切片时遇到了问题，所以球体是不可能的。具有讽刺意味的是，现在球体是唯一可能的东西（除了从前到后的椭圆）。

编辑：

我通过添加 x > y 工作

```
else if (y2 < x && ry - y2 != 0)
    generateEllipse(z, cx, cy, cz, x, ry - y2); 
```

并`|| r - y2 == 0`到底部的第一个测试。

我不太确定为什么会这样，我现在正在弄清楚。但我仍然遇到 y > x 的问题。任何人？

编辑2：

现在我看它，它与 y = x 椭球不同，回到绘图板上。

编辑3：

昨晚我在想这个，我想我已经想通了，这不是我自己问题的答案，但我想指出我所看到的错误。我正在测试第一个列表并从最大列表的大小递减地绘制坐标。

这很糟糕，因为不能保证两个列表的长度相等，这是我试图加速算法的失败。

在图片中，你看不到，但小椭圆实际上距离大椭圆有几个街区。这是由于未绘制椭圆而引起的，这是由于列表没有数据引起的。实际的小椭圆大椭圆是因为算法绘制了两个八分圆，这两个八分圆都存储在列表中`getSlice(...)`。

那么我该如何解决这个问题呢？我还没有实现任何东西，可能暂时不会（现在还早），但这就是我的大脑所产生的结果。同样，这不是问题的答案，只是想法。

我`while(!s.isEmpty())`在循环外迭代并定义了两个新值：`incX = s.size`然后`incY = s1.size`测试它们的 z 值是否匹配，如果不匹配，则进行更正。我想我会得到这些值，测试最大的列表，如果它们不匹配，那么将最小列表的 inc 值减 2 并获取旧值。

我测试是`!s.isEmpty()`因为这两个列表将同时为空。同样绘制椭圆，我将使用任何一个 z 值，因为同样，它们都应该相等。

如果那是错误的，那么我想我找到了这份文件：[http](http://www.cs.sunysb.edu/vislab/wordpress/pdf/398.pdf) ://www.cs.sunysb.edu/vislab/wordpress/pdf/398.pdf 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:26:46.527

感谢任何查看此内容的人（即使我没有得到任何回复:()，我设置此答案是因为问题已解决，代码如下：

```
 ArrayList<Integer> s = getSlice(rz, rx);
    ArrayList<Integer> s2 = getSlice(rz, ry);

    boolean yMax = Math.max(s2.size(), s.size()) == s2.size();

    int decX = s.size() - 1;
    int decY = s2.size() - 1;

    boolean done = false;

    while (!done)
    {

        int x = 0;
        int z = 0;
        int z2 = 0;
        int y = 0;

        y = s2.get(decY--);
        z2 = s2.get(decY--);

        x = s.get(decX--);
        z = s.get(decX--);

        if (z != z2)
        {
            if (yMax)
            {
                decX += 2;
                x = s.get(decX);

                s2.remove(decY + 2);
                s2.remove(decY + 1);    
            }
            else
            {
                decY += 2;
                y = s2.get(decY);

                s.remove(decX + 2);
                s.remove(decX + 1); 
            }

            z = z < z2 ? z : z2;
        }
        else
        {
            s.remove(decX + 2);
            s.remove(decX + 1);             

            s2.remove(decY + 2);
            s2.remove(decY + 1);    
        }

        if (y != 0 && x != 0)
            generateEllipse(z, cx, cy, cz, x, y);

        done = yMax ? s2.isEmpty() : s.isEmpty();
    } 
```

现在需要做的就是优化。我仍然会阅读那篇论文，它涵盖了其他对我的程序有趣且有用的主题:)。

问题是我没有考虑每个列表的不同大小，如果一条曲线比另一条曲线不那么陡峭，它将有更多的坐标。当 rx == ry 时，Z 总是相同的。这使我能够绘制球体和前后椭圆体。

当它们不相同时，z 会发生变化，因为曲线会更快/更慢。当我在测试第一个列表时发生这种情况时，它会忽略那些，因为迭代会在到达它们之前停止。

大椭圆，小椭圆是因为它们被向后绘制而引起的，因此首先绘制了外部八分圆，恰好具有较少的总值。

在不久的将来，我将提出更详细的答案和更优雅的实现。我只是提出这个答案，让任何路人知道问题已经解决。我不想让任何人经历我试图弄清楚这一切的挫败感！令人惊讶的是，最棘手的问题是如何由最愚蠢的事情引起的。

# java - 创建具有多个图像的 JPanel

> ID：10016003
> 
> 赞同：1
> 
> 时间：2012-04-04T17:08:50.493
> 
> 标签：java, image, swing, jpanel, drawrect

我有一个 JPanel，我想在这个 JPanel 上画一些非常简单的图像（项目）。我想使用 DrawRect 或 DrawOval 之类的方法。这个面板将有一个滚动条。它应该看起来像[这样](http://seznamovak.kx.cz/download/nakres.png)。

我需要在特定索引上删除和添加项目（图像）。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:14:03.453

你看看

*   适当的[LayoutManager](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)（可能`GridLayout`）

*   你看过带有[图标的](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)[JList](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:28:04.557

从使用 GridLayout 或垂直 BoxLayout 的主 JPanel 开始。把它放在一个 JScrollPane 中。在主 JPanel 中，您将希望拥有 JPanel 的实例，它扩展了常规的paintComponent() 方法以使用 drawRect()、drawOval() 等进行绘图。这应该可以帮助您入门：

```
public JScrollPane buildScrollingContainerPanel()
{
    JPanel containerPanel = new JPanel(new GridLayout(0, 1));
    JScrollPane scrollPane = new JScrollPane(containerPanel);
    containerPanel.add(new MyPanel(true, false));
    containerPanel.add(new MyPanel(false, true));

    return (scrollPane);
}

private class MyPanel extends JPanel
{
    private boolean drawRect;
    private boolean drawOval;

    public MyPanel(boolean drawRect, boolean drawOval)
    {
        super();
        this.drawRect = drawRect;
        this.drawOval = drawOval;
    }

    public void setDrawRect(boolean b)
    {
        drawRect = b;
        repaint();
    }

    public void setDrawOval(boolean b)
    {
        drawOval = b;
        repaint();
    }

    @Override
    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);

        if (drawOval)
        {
            g.setColor(Color.RED);
            g.drawOval(16, 16, 16, 16);
        }

        if (drawRect)
        {
            g.setColor(Color.GREEN);
            g.drawRect(32, 32, 16, 16);
        }
    }
} 
```

要访问 containerPanel 的子项，请使用`containerPanel.getComponent(int)`then cast to MyPanel。

# objective-c - Objective C - 使用路径解析带有命名空间的 xml

> ID：10016023
> 
> 赞同：3
> 
> 时间：2012-04-04T17:10:07.540
> 
> 标签：objective-c, xml, xpath, namespaces

我在解析以下 xml 数据时遇到了一些问题：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<encryption xmlns="urn:oasis:names:tc:opendocument:xmlns:container">
<EncryptedData xmlns="http://www.w3.org/2001/04/xmlenc#">
<EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes128-cbc"/>
<KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
<resource xmlns="http://ns.nuts-for-africa.com/epubdrm">urn:uuid:7297037a-6a5e-4bb1-bfa3-9a683288adb5</resource>
</KeyInfo>
<CipherData>
<CipherReference URI="OPS/epubbooksinfo.html"/>
</CipherData>
</EncryptedData>
<EncryptedData xmlns="http://www.w3.org/2001/04/xmlenc#">
<EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes128-cbc"/>
<KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
<resource xmlns="http://ns.nuts-for-africa.com/epubdrm">urn:uuid:7297037a-6a5e-4bb1-bfa3-9a683288adb5</resource>
</KeyInfo>
<CipherData>
<CipherReference URI="OPS/chapter-008.html"/>
</CipherData>
</EncryptedData> 
```

我正在使用以下代码读取 xml 文件并对其进行解析。我已经尝试了所有我能想到的 xpath 组合，但无法让它工作：

```
NSData *encryptData = [self getResourceFileName:filename extension:fileext readFileInZip:@"encryption.xml"]; //this is a function to retrieve files from a zip file. This  is working
if(encryptData != nil){
    //http://www.w3.org/2001/04/xmlenc#
    CXMLDocument* cryptFile = [[CXMLDocument alloc] initWithData:encryptData options:0 error:nil];
    NSArray *encryptionItems = [cryptFile nodesForXPath:@"EncryptedData" namespaceMappings:[NSDictionary dictionaryWithObject:@"http://www.w3.org/2001/04/xmlenc#" forKey:@""] error:nil];
    for (CXMLElement* encEl in encryptionItems) {
        NSArray *uuidArray = [encEl nodesForXPath:@"KeyInfo/resource" namespaceMappings:nil error:nil];
        NSString *uuid = [[uuidArray objectAtIndex:0] stringValue];

        NSArray *fileArray = [encEl nodesForXPath:@"CipherData/CipherReference" namespaceMappings:nil error:nil];
        NSString *fileRef = [[fileArray objectAtIndex:0] stringValue];

        NSLog(@"File: %@ - UUID: %@",fileRef,uuid);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:12:19.010

这是一个非常容易使用的 XML 解析器。

[http://www.tbxml.co.uk/TBXML/TBXML_Free.html](http://www.tbxml.co.uk/TBXML/TBXML_Free.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:17:32.557

我正在使用 CXMLDocuments 和 CXMLElements 并且刚刚花了一些时间处理类似的问题（Google 的 KML 文件）。您的问题可能是由于命名空间问题。当您设置命名空间映射时，给命名空间一个键，然后在您的 XPath 表达式中为您的选择器添加前缀，该键后跟一个冒号 (:)。从一个简单的例子开始，假设您的 XML 是：

```
<books xmlns="http://what.com/ever">
  <book>
    <title>Life of Pi</title>
  </book>
  <book>
    <title>Crime and Punishment</book>
  </book
</books> 
```

您将选择所有书籍：

```
// So, assuming you've already got the data for the XML document
CXMLDocument* xmldoc = [[CXMLDocument alloc] initWithData:xmlDocData options:0 error:nil];
NSDictionary *namespaceMappings = [NSDictionary dictionaryWithObjectsAndKeys:@"http://what.com/ever", @"nskey", nil];
NSError *error = nil;
NSArray *bookElements = [xmldoc nodesForXPath:@"/nskey:books/nskey:book" namespaceMappings:mappings error:&error]; 
```

请注意，您需要为每个元素添加前缀，而不仅仅是声明命名空间的元素。这是您正在处理的名称空间繁重的 XML 文档，祝您好运。

# jquery - jQuery：如何按名称检测表单

> ID：10016030
> 
> 赞同：1
> 
> 时间：2012-04-04T17:10:38.697
> 
> 标签：jquery

我在将 jQuery 添加到一些现有代码时遇到问题，请帮忙。

我们有相同的表单（相同的表单名称，相同的字段，相同的提交按钮，没有为表单定义的 id 或类）在页面上出现了几次，现在我需要使用 jQuery 验证表单，而不传递表单对象，jQuery 可以判断提交的是哪个表单吗？

谢谢大家的回复，问题解决了:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:36:23.473

从您的问题评论看来，您可能需要指定表单的上下文以及您的选择器：

```
$('form').submit(function() {
    var form = $(this);
    var myInputValue = $("input[name='myinput']", form).val();
    // myInputValue is now the value of the myinput control that is 
    // within the submitted form
}); 
```

请注意，jquery 函数采用可选的**第二个参数**，即选择的上下文。这应该可以帮助您仅在提交的表单中找到输入元素。

在此处查看文档：

[http://api.jquery.com/jQuery/#expressioncontext](http://api.jquery.com/jQuery/#expressioncontext)

@NiftyDude 的回答遇到了同样的问题，尽管他没有专门使用 jquery 来获取当前提交表单的子级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:13:33.530

您是否将#id 或.class 附加到`<form>`标签以选择它并不重要。

试试这个：

```
$('form').submit(function () {
   //put your ajax submission code here...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:13:40.427

`$("form[name='IDENTIFIER']")` 如果您在单个页面上有多个表单以针对特定表单，这很有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T17:13:51.403

```
$('form').submit(function(e) {
   // $(this) refers to the current form being submitted

   // if you need to, for example iterate over all the inputs
   var inputs = $(this)[0].getElementsByTagName('input'); // array of inputs

   for(var i = 0; i < inputs.length; i++) { inputs[i].value; }

   // this is important to avoid recursive submit
   $(this)[0].submit();

   return false;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T17:14:40.310

```
$('form').submit(function(){
    var form = $(this);
    var inputs = $('input', this);
    var isValid = true;

    //do validation on the inputs of the form submitted.

    if (isValid) {
        //do something
    }

     return false;
}); 
```

或者，您可以捕获提交输入操作（这是我喜欢做的）：

```
$('input[type="submit"]').click(function(event){
    event.preventDefault();
    var form = $(this).nearest('form');
    var inputs = $('input', form).not(this);
    var isValid = true;

    //validate inputs
    if (isValid) form.submit();
}); 
```

请注意，`isValid = true`根据您的代码，可能不需要。如果您的任何元素未通过验证并且表单提交将无法继续，则可以将其设置为 false。如果您正在使用为您执行此操作的验证库并提交表单（如果有效），则不需要它。

一些验证器为每个失败的项目设置一个无效的类，您可以检查表单中是否存在具有该类的输入来确定是否应该提交表单。

# javascript - 当您将另一个方法作为属性添加到 Javascript 中的函数时会发生什么？

> ID：10016031
> 
> 赞同：3
> 
> 时间：2012-04-04T17:10:39.147
> 
> 标签：javascript

我同意函数是 JS 中的对象。当使用函数作为构造函数时，我们可以通过将这些属性添加到函数的原型属性来向对象创建添加属性。这是我尝试过的：

```
var Mammal = function(name) {
    this.name = name;
};

var Cat = function(name) {
    this.saying = 'meow';
};

Cat.prototype = new Mammal();

Cat.prototype.display = function() {
    console.log('I display Cats');
};

//This is what I find hard to digest
Cat.display = function() {
    console.log('I display cats but at the top level');
}; 
```

我发现很难掌握的是评论部分。我只是想描绘我不明白的地方和这个特定的部分。我的意思是如果我必须编写一个函数并在定义函数时执行类似的操作，那么语法会是什么样的？如果我尝试以下操作：

```
function demo() {
    this.saying = function() {
        console.log('I display cats but at the top level');
    };
}; 
```

这里的变量`this`指的是DOMWindow。如何在函数定义中实现上述内容。

我是 JS 的新手。对于我的任何无知，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:44:11.423

这些类似于基于类的对象中的静态方法。也就是说，该方法只能从构造函数访问，而不能从实例本身访问。

一个很好的例子是[jQuery.get()](http://api.jquery.com/jQuery.get/)你不能这样做

```
$('.someclass').get(myUrl); 
```

你必须使用

```
$.get(myUrl); 
```

但是，如果您确实需要从实例访问静态方法，您有两个选择

```
var cat = new Cat('catName');
cat.constructor.display();
Cat.display(); 
```

[http://jsfiddle.net/c39bW/](http://jsfiddle.net/c39bW/)

并不是说 Cat 的构造函数属性已损坏，当您设置继承时，您应该修复 Cat.prototype.constructor 以指向 Cat，请参阅上面的我的 jsFiddle。此外，您没有从 Cat 的构造函数中调用基本构造函数 (Mammal)。有关继承最低要求的教程，请参阅[http://js-bits.blogspot.com/2010/08/javascript-inheritance-done-right.html](http://js-bits.blogspot.com/2010/08/javascript-inheritance-done-right.html)

关于静态属性何时有用的一个很好的例子是，当一个对象需要跟踪它被实例化的次数时，你不能在实例级别这样做；

```
function Tracker() {
   this.constructor.count++;
}

Tracker.count = 0;

Tracker.getCount = function() {
     return Tracker.count;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:40:18.943

这个问题不是很清楚...

但是，请考虑以下代码：

```
function Test(title) { // object constructor (class)
    this.title = title;
}

Test.prototype.getTitle = function () { return this.title }; // shared (inherited) getter method
Test.version = 1; // static property (no need to instantiate an object)

var obj = new Test('hello, world!'); // an instance of the 'Test' class
console.log(obj.constructor.version); // reference to a static property of the class 
```

当函数与**`new`**关键字一起调用时，它是一个构造函数并**`this`**指向正在构造的对象（`new Test('hello, world!')`）。

当函数作为对象方法调用时（例如，`obj.getTitle()`），**`this`**指向该对象。

当函数被正常调用时（`Test('hello, world!')`），**`this`**指向全局对象（**Window**）。

这有帮助吗？:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:38:06.687

为清楚起见，我已将您的 Cat 类更改为 Animal。

添加到 Animal 原型的任何内容都将应用于 Animal 的任何新实例。调用时，关键字`this`将引用实例。

```
var cat = new Animal();
cat.display(); // calls Animal.prototype.display(), 'this' points to 'cat' 
```

任何直接附加到 Animal 的东西都不会，并且只能直接访问：

```
Animal.display(); // 'this' points to 'Animal' 
```

# tcp - 为什么 TCP 数据包不包含源 IP 和目标 IP？

> ID：10016032
> 
> 赞同：4
> 
> 时间：2012-04-04T17:10:46.460
> 
> 标签：tcp, ip

从[这里](http://www.cisco.com/en/US/docs/internetworking/troubleshooting/guide/tr1907.html)cisco说TCP数据包不包含源IP和目标IP？网络层如何知道这个 IP 发送数据包以及谁必须取回 ack？

![在此处输入图像描述](../Images/7190a35111e886ad0fb421fb0ecd990f.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T17:16:22.550

TCP 通常在 IP 上运行，IP 地址存储在封装 TCP 部分的数据包的 IP 部分中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T17:22:01.997

TCP 数据包进入 IP 数据包内部。IP 标头指定源地址和目标地址等。[请参阅此图](http://en.wikipedia.org/wiki/IPv4#Packet_structure)。在这里，TCP 数据将被插入到数据位置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-04T17:18:20.970

您将 TCP 数据包信息（传输层）与 IP 包装器（网络层）混淆了。ip 地址包含在外部 IP 数据包包装器中。

# java - 嵌入式码头 doGet 调用，预期 doPost

> ID：10016034
> 
> 赞同：1
> 
> 时间：2012-04-04T17:11:08.587
> 
> 标签：java, jetty

问题：当我希望调用 doPost 时，只调用 doGet 。

我有一个嵌入式 Jetty 服务器，我按如下方式启动：

```
server = new Server(8080);
ServletContextHandler myContext = new ServletContextHandler(ServletContextHandler.SESSIONS);
myContext.setContextPath("/Test.do");
myContext.addServlet(new ServletHolder(new MyServlet()), "/*");

ResourceHandler rh = new ResourceHandler();
rh.setResrouceBase("C:\\public");

HandlerList hl = new HandlerList();
hl.setHandlers(new Handler[]{rh, myContext});

server.setHandler(hl);

//server.start() follows 
```

启动服务器后，我打开以下页面（位于“public”文件夹中，并通过[http://localhost:8080/test.html](http://localhost:8080/test.html)打开）：

```
<html>
<head><title>Test Page</title></head>
<body>
<p>Test for Post.</p>
<form method="POST" action="Test.do"/>
<input name="field" type="text" />
<input type="submit" value="Submit" />
</form>
</body>
</html> 
```

当我按下提交按钮时，我希望调用我的 servlet 的 doPost 方法，但是 doGet 似乎被调用了。MyServlet 类（扩展 HttpServlet）包含：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException{
  System.out.println("   doGet called with URI: " + request.getRequestURI());
}

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException{
  System.out.println("   doPost called with URI: " + request.getRequestURI());
} 
```

我从来没有得到 doPost 打印，只是来自 doGet 的打印（在提交按钮按下时）。

显然，Jetty（以及一般的网络技术）对我来说是全新的。我一直在梳理 Jetty 示例，但似乎无法让 POST 真正被 doPost 方法拾取。

感谢任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T19:42:12.460

问题是您的上下文路径。B/c 路径设置为

```
myContext.setContextPath("/Test.do"); 
```

Jetty 正在返回一个 HTTP `302 Found`，其位置告诉浏览器“从这里获取页面”：

```
HTTP/1.1 302 Found
Location: http://localhost:8080/test.do/
Server: Jetty(7.0.0.M2)
Content-Length: 0
Proxy-Connection: Keep-Alive
Connection: Keep-Alive
Date: Wed, 04 Apr 2012 19:32:01 GMT 
```

然后使用 GET 检索实际页面。将 contextPath 更改为`/`以查看您的预期结果：

```
myContext.setContextPath("/"); 
```

# objective-c - UITableView 中单元格的右 CellIdentifier

> ID：10016035
> 
> 赞同：2
> 
> 时间：2012-04-04T17:11:12.017
> 
> 标签：objective-c, ios, uitableview

有人可以解释两者之间的区别吗

```
static NSString* CellIdentifier = @"Cell"; 
```

和

```
NSString *CellIdentifier = [NSString stringWithFormat: @"Cell%i", indexPath.row]; 
```

我应该什么时候使用第一个，第二个在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T17:48:37.990

```
static NSString* CellIdentifier = @"Cell"; 
```

这个标识符（假设没有其他标识符）将标识一个单元池，当需要新单元时，所有行都将从该池中提取。

```
NSString *CellIdentifier = [NSString stringWithFormat: @"Cell%i", indexPath.row]; 
```

此标识符将为每一行创建一个单元池，即它将为每一行创建一个大小为 1 的池，并且一个单元将始终仅用于该行。

通常，您会希望始终使用第一个示例。第二个示例的变体如下：

```
NSString *CellIdentifier = [NSString stringWithFormat: @"Cell%i", indexPath.row % 2]; 
```

如果您希望每隔一行都具有某种背景颜色或类似的东西，这将很有用。

如何从[此处](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW1)正确设置单元创建的示例：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyIdentifier"];

    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MyIdentifier"] autorelease];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    NSDictionary *item = (NSDictionary *)[self.content objectAtIndex:indexPath.row];
    cell.textLabel.text = [item objectForKey:@"mainTitleKey"];
    cell.detailTextLabel.text = [item objectForKey:@"secondaryTitleKey"];
    NSString *path = [[NSBundle mainBundle] pathForResource:[item objectForKey:@"imageKey"] ofType:@"png"];
    UIImage *theImage = [UIImage imageWithContentsOfFile:path];
    cell.imageView.image = theImage;

    return cell;
} 
```

# options - 编写 vimscript 时如何使用选项？

> ID：10016039
> 
> 赞同：4
> 
> 时间：2012-04-04T17:11:15.293
> 
> 标签：options, vim

[已解决] 似乎解决方案是这样的：

```
if exists('g:nameOfMyOption') && g:nameOfMyOption
     ...
endif 
```

* * *

这很简单，但我在网上找不到答案。我想在插件文件中做这样的事情：

```
" MyChecker.vim
"
" Uncomment the following line to set the autochecker option
"set autochecker=1

if ISSET(autochecker)
   autocmd InsertChange * :call MyAutoCheckerFunction()
endif 
```

我如何做 ISSET 线？我宁愿不必显式设置 autochecker=0，我希望它只检查 autochecker 是否存在。

编辑：当我尝试以下操作时：

```
if &autochecker == 1
    ...
endif 
```

我收到此错误消息：

```
Error detected while processing MyChecker.vim:
line   32:
E113: Unknown option: autochecker
E15: Invalid expression: &autochecker == 1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T17:34:30.403

您不能在 vim 中创建自定义选项。您需要创建一个全局变量，例如：

```
let g:AutoChecker = 1

....

if g:AutoChecker == 1
   " ...
endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T11:30:50.027

对于一般选项，我使用以下函数：[lh#option#get()](http://code.google.com/p/lh-vim/source/browse/vim-lib/trunk/autoload/lh/option.vim#56)。它首先搜索是否`b:{varname}`存在以返回其值，然后`g:{varname}`. 否则，如果不存在任何变量，则返回提供的默认值。

对于编程相关选项（即可以针对特定文件类型覆盖选项），我使用另一个函数：[lh#dev#option#get()](http://code.google.com/p/lh-vim/source/browse/dev/trunk/autoload/lh/dev/option.vim#48)。

[lh-cpp](http://code.google.com/p/lh-vim/wiki/lhCpp)文档的*[C++ 选项](http://code.google.com/p/lh-vim/source/browse/cpp/trunk/doc/lh-cpp-readme.txt#512)*部分间接解释了这两个函数背后的基本原理。

# compiler-construction - 编译器如何处理 for 循环检查

> ID：10016040
> 
> 赞同：2
> 
> 时间：2012-04-04T17:11:15.913
> 
> 标签：compiler-construction

如果我正在做类似的事情

```
for i = 0; i < len(arr); i++ {
    ...
} 
```

len() 是否在每次迭代时计算？对于 gcc，是否可以设置任何优化标志来更改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:15:28.127

我相信语言定义（假设我们在这里使用 C/C++）要求每次都调用它。正如其他答案中所建议的，您必须自己进行此优化。编译器一般无法知道调用 len() 函数是否会产生副作用，或者每次调用都会返回相同的值，因此一般无法将其拉出循环。由于您知道 len() 的作用，因此您可以执行该优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:15:10.707

是的，每次迭代都会调用 len()。如果你使用一个简单的变量，它是一样的。

```
for( i=0 ; i< a; i++) 
```

虽然不建议您更改`a`mid-run 的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T17:20:54.760

如果它在每次迭代中都没有改变。它被称为循环不变量。循环不变量可以（可以是单词）被提升到循环体上方。但为了正确性，没有必要这样做。在函数调用的情况下，编译器将很难确定该值是否为循环不变量。如果它是一个内联函数，那么理论上可以确定循环不变性。但我不确定是否有任何特定的编译器真的这样做了。

有关更多信息，请参见[循环不变代码运动](http://en.wikipedia.org/wiki/Loop-invariant_code_motion)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T17:13:26.120

如果您不希望 len 每次都执行：

```
int length = len(arr);

for i = 0; i < length; i++ {
    ...
} 
```

# xsd - XML Schema 中的订单定义

> ID：10016044
> 
> 赞同：2
> 
> 时间：2012-04-04T17:11:35.683
> 
> 标签：xsd

我想定义第一个元素将是特定类型，以下将是任何顺序的一些元素。像这样：

```
<node>
<!-- always at first -->
<node-data>
...
</node-data>

<!-- other nodes in any order-->
<node3></node3>
<node1></node1>
<node2></node2>
</node> 
```

我不能使用`<xsd:sequence>`，因为它会强制所有节点有序。

谢谢你的帮助。对不起我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:18:28.457

一个好的起始布局可能如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="node">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="node-data"/>
        <xs:choice minOccurs="0" maxOccurs="unbounded">         
          <xs:element name="node3" />
          <xs:element name="node1" />
          <xs:element name="node2" />
        </xs:choice>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

然后您可以优化类型，在选项下添加更多节点等。如果您想支持通配符，则`xs:any`需要使用 of。

# ajax - 请求中的 AJAX 请求

> ID：10016045
> 
> 赞同：0
> 
> 时间：2012-04-04T17:11:48.013
> 
> 标签：ajax, google-maps

首先我加载 php 页面，然后是一个 java 函数调用来自 JAVA 脚本的第一个 AJAX 请求，它调用第二个 php 并发布一些变量并操作函数一个......意味着第一个 AJAX 请求仍在工作......

现在，第二个 php 中的函数调用另一个 JAVA 脚本，该脚本创建另一个 AJAX 请求，该请求调用第三个 php，为 MAP API 生成 XML 数据......意味着第二个 AJAX 请求......但它失败了，因为第一个请求仍未完成...... .我该如何处理？哪个 AJAX 调用 php 和那个 php 调用第二个 AJAX 请求？...

请帮我....

根据您的示例查看我的要求，因为我的代码太长，无法按照堆栈格式在此处发布和格式化

首先，我直接在浏览器中加载 ajax1.php。

现在我调用第一个 AJAX 请求

```
$.ajax('/ajax2.php', function(data2){
// But the ajax2.php having Call another AJAX request for ajax3.php which retrive XML Data genereted from mysql and create Google MAP
    $.ajax('/ajax3.php', function(data3){
       // I need to display the ajax2.php Generated MAP to DIV created by ajax1.php
     // Whene I call ajax2.php directy from browser url it AJAX ajax3.php runs and gerete MAP perfectly
     // But I call ajax2.php through ajax1.php AJAX request it dosen't create the ajax3.php AJAX request 
    });
}); 
```

简而言之，我调用第一个 AJAX 请求，但第一个 AJAX 请求调用另一个第二个 AJAX 请求。它生成 MAP。

```
document.getElementById("ntfs").innerHTML=xmlhttp.responseText;
// This above code is not working but I write like

document.write(xmlhttp.responseText);
//This above Code works perfect, but it create new document I can't fill to DIV.innerHTML 
```

为什么？发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:17:13.793

与往常一样，如果您发布一些自己的代码，帮助您会容易得多。我将使用 jquery。

您需要了解 ajax 是异步的。IDE 不会等待 ajax 调用完成以执行下一行代码。如果您想让 ajax1 在完成时调用 ajax2，并在完成时让 ajax2 调用 ajax3，则需要使用ajax 技术的`finished:`or处理程序。`complete:`在jquery中它看起来像这样......

```
$.ajax('/ajax1.php', function(data1){
    $.ajax('/ajax2.php', function(data2){
        $.ajax('/ajax3.php', function(data3){
            //All 3 ajax calls are done, in order
        });
    });
});

alert('the first ajax call was made and is probably still executing'); 
```

例如，如果您希望 ajax1 和 ajax2 同时运行，并在完成后让 ajax2 调用 ajax3，它会如下所示...

```
$.ajax('/ajax1.php', function(data1){
    //ajax1 call is done
});

$.ajax('/ajax2.php', function(data2){
    //ajax2 is done
    $.ajax('/ajax3.php', function(data3){
        //ajax2 and ajax3 calls are done, in order
    });
});

alert('the first 2 ajax call were made and are probably still executing'); 
```

补充阅读： [异步与同步](http://www.inetdaemon.com/tutorials/basic_concepts/communication/asynchronous_vs_synchronous.shtml)

# html - 从 IE8 中打印的链接图像中删除蓝色边框

> ID：10016050
> 
> 赞同：4
> 
> 时间：2012-04-04T17:12:00.093
> 
> 标签：html, css, printing, internet-explorer-8

我已经阅读了有关此主题的类似问题，但没有一个解决与打印相关的问题。

我也有动态生成的链接图像。使用以下 CSS，我可以防止蓝色边框显示在 Firefox 和 IE8 中的链接图像上。

```
a img { border: 0; } 
```

但是，从 IE8 打印页面时，蓝色边框仍然存在。我在 IE8 中找不到任何选项来防止这种行为，并且我已经通过 CSS 采取了行动。有谁知道为什么会发生这种情况以及如何防止打印恼人的蓝色边框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T17:19:00.867

对我来说很重要的时刻。

使用：

```
a img { border: 0; } 
```

在 media="print" 工作表中完美运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:15:50.143

你有没有尝试过`a { outline: none; }`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T17:33:01.563

您可能需要重置的不仅仅是链接，重置代码 = [http://CSSesta.tk](http://CSSesta.tk)

如果您尚未处理它们，下面将解决一些其他问题。

*如果它是一个实际的样式边框而不是轮廓`a img { border: 0; }`可能会有所帮助，尽管您可能需要追踪它导致它的样式（**在那种情况下**）*

```
/**/
a:hover,a:active{
    outline: none;
}
body div:focus{
    outline: none;
}
img{
    outline:none;
}
a:focus{
    outline:none;
}
a::-moz-focus-inner{
    border: 0;
} 
```

# performance - Visual Studio 开发服务器在 IE 上非常慢，在 chrome 或 firefox 上正常

> ID：10016052
> 
> 赞同：0
> 
> 时间：2012-04-04T17:12:10.430
> 
> 标签：performance, visual-studio-2010

当我启动开发服务器（Ctrl+F5 - 不是调试）时，在 IE 上加载需要很长时间，但在 chrome/firefox 上正常加载。当页面最终加载时，图片也需要很长时间才能加载，并且一张一张地加载，每张之间大约有 30 秒。

有谁知道可能是什么？

使用 IE9/Visual Studio 2010/Windows 7 64 位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:55:14.550

这对我来说也是一个问题。喜欢集成调试环境，但是如果你有很多 JS 需要调试，VS 需要很长时间才能将调试器连接到 IE。我最好的建议是关闭所有你不需要的东西。

1.  使用“连接现有网站”并连接到Web服务器地址（我使用IIS）

2.  如果您不在同一会话中调试 .net，请关闭 ASP.NET 调试

3.  在您的属性页面中的 build 下关闭 Build (Before running start page)

4.  首次运行时，请关闭解决方案资源管理器窗口，使其在调试模式下不会启动。这将防止窗口必须更新 EVAL 和动态 JS 节点的堆。

5.  确保在 web.config 中将 maxage 设置为 0

    ```
    <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="00:00:00" /> 
    ```

这将阻止 IE 积极缓存您的所有 javascript

我设法将加载时间从 30 秒减半到 15 秒。

希望这可以帮助。

# asp.net - 在gridview中过滤行

> ID：10016055
> 
> 赞同：1
> 
> 时间：2012-04-04T17:12:19.833
> 
> 标签：asp.net, vb.net

我有一个包含用户信息的网格视图，其中一列是将用户添加到系统的日期。

是否可以使用**GridView.onRowCreated**方法检查用户是否在给定时间范围内添加？如果在该时间范围内添加了用户，则添加该行，如果没有，则不添加该行。

请注意，我无法修改 gridview 的数据源，因此我需要在创建 gridview 时以某种方式执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:37:39.083

您可以`RowBoundData`根据您的特定条件使用和设置隐藏行

```
Protected Sub GridView_RowDataBound(sender As Object, e As GridViewRowEventArgs)
    If e.Row.RowType = DataControlRowType.DataRow Then
        e.Row.Visible = True ' base on some condition
    End If
End Sub 
```

* * *

另一种方法是过滤您的数据。在下面的函数中传递过滤器表达式，它将返回您所需的输出。您可以在绑定之前执行此操作。

```
Public NotInheritable Class GetFilteredData
    Private Sub New()
    End Sub
    <System.Runtime.CompilerServices.Extension> _
    Public Shared Function FilterDataTable(Dt As DataTable, FilterExpression As String) As DataTable
        Using Dv As New DataView(Dt)
            Dv.RowFilter = FilterExpression
            Return Dv.ToTable()
        End Using
    End Function
End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:38:50.990

您可以过滤掉您的 gridview 数据源并绑定到 gridview，具体取决于您在日期列上的 where 条件。这将比在 gridview 事件上设置条件更简单。

干杯！！

# jsf-2 - JSF 2.0 和 如何在会话范围内传递选定的单选按钮？

> ID：10016058
> 
> 赞同：0
> 
> 时间：2012-04-04T17:12:26.283
> 
> 标签：jsf-2

我想在会话范围内传递选定的单选按钮值。我的代码不起作用。

这是视图（searchPerson.xhtml）：

```
<h:form>

                        <h:selectOneRadio id="searchRadio" value="#{controller.radioButtonFlag}" valueChangeListener="#{controller.selectRadioButton}" >
                            <f:selectItem itemValue="fachid" itemLabel="#{msg.fachId}">
                                <f:attribute name="radioButtonField" value="fachid" />
                            </f:selectItem>
                            <f:selectItem itemValue="vngw" itemLabel="#{msg.VNGW}">
                                <f:attribute name="radioButtonField" value="vngw" />
                            </f:selectItem>
                        </h:selectOneRadio>

                        ...                     <h:commandButton action="#{controller.search}" value="#{msg.search}"></h:commandButton> 
```

这是托管bean：

```
@ManagedBean @SessionScoped public class Controller { private String radioButtonField = "fachid"; private boolean VNGWSelected = false; public void selectRadioButton(ValueChangeEvent event){
    String select = (String) event.getComponent().getAttributes().get("radioButtonField");

    if(select.equals("vngw"))
        VNGWSelected = true;
} public String search() {... if(!VNGWSelected){logger.info("FachID RadioButton selected."); else{... logger.info("VNGW RadioButton selected."); ...} return "personsearch"; } ...} ... } 
```

有人可以告诉我我在这里做错了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:04:36.957

尝试这个：

```
<h:selectOneRadio id="searchRadio" value="#{controller.select}" >
     <f:selectItem itemValue="fachid" itemLabel="#{msg.fachId}" />
     <f:selectItem itemValue="vngw" itemLabel="#{msg.VNGW}" />
</h:selectOneRadio>

<h:commandButton action="#{controller.search}" value="#{msg.search}"></h:commandButton> 
```

我不确定 bean 的语义或控制器的目标是什么，但最好使用属性以及 getter 和 setter。

```
@ManagedBean 
@SessionScoped 
public class Controller { 
private String radioButtonField = "fachid"; 
private boolean VNGWSelected = false; 

private String select;

public void setSelect(String select){
        this.select = select;   
    if(select.equals("vngw"))
        VNGWSelected = true;
} 

public String getSelect(){
    return select
}

public String search() {... 
    if(!VNGWSelected){
        logger.info("FachID RadioButton selected."); 
    else{... 
        logger.info("VNGW RadioButton selected."); ...} 
    return "personsearch"; 
} ...} ... } 
```

# c# - 静态对象在多个正在运行的应用程序中是同一个对象吗？

> ID：10016061
> 
> 赞同：6
> 
> 时间：2012-04-04T17:12:37.013
> 
> 标签：c#, winforms, windows-services

如果您有一个使用相同静态对象的 Windows 服务和一个 Windows 窗体应用程序，那么这两个应用程序中的对象是否相同？换句话说，如果我更新服务中的对象，如果两者同时运行，它是否也会在表单应用程序中更新？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T17:14:58.010

它们在不同的进程上运行，因此它们不共享静态对象。

与您的问题无关，但在同一应用程序上创建的线程是另一回事。除非标有[`ThreadStatic`](http://msdn.microsoft.com/en-us/library/system.threadstaticattribute.aspx)属性，否则它们将共享静态变量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T17:15:45.260

不。除非你做一些特定的事情来实现这个对象在不同的​​进程之间是不共享的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:14:23.080

我认为每个应用程序都在自己的进程中运行。我真的怀疑在 Windows 服务中更新静态对象对作为 Windows 窗体应用程序运行的静态对象有任何影响。

Windows 服务在`system`帐户下运行，而 Windows 窗体应用程序在`User`帐户下运行。

正如其他人在评论中指出的那样，这些进程在不同的内存中运行。每个进程都有自己的地址空间。

Windows 服务响应服务控制管理器命令。

它们是完全不同的两种东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T17:41:42.787

对此的简单回答是每个进程都有自己的静态，所以不，它不会在服务和桌面进程之间共享。

*复杂的部分是**单个**进程中甚至可能有多个静态实例。*

每个加载类`Java`的静态对象都有一个实例。`ClassLoader`我检查了`C#`. 我[在 SO 上发现了这个问题，](https://stackoverflow.com/questions/185836/equivalent-of-class-loaders-in-net)`C#`这表明在（我猜实际上在）中确实存在类似于多个类加载器的东西`CLR`，虽然我没有找到对静态多个实例的任何具体引用，但我确信情况会如此。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T20:06:57.910

简单地说不，
静态是“ `static per AppDomain`”（每个进程可以有多个域），因此即使一个进程也不能安全地假设您的静态变量将是“共享的”（通常是真的，除非您手动创建新域，例如，请参阅[什么是 AppDomain？](https://stackoverflow.com/questions/574708/what-is-appdomain)） - 例如，网络应用程序通常会破坏“静态”单例等
。换句话说，您需要使用某种持久性才能在不同的应用程序之间共享您的数据。或者使用远程处理、WCF 通过应用程序（域）边界进行通信。

# algorithm - HTML5 Canvas 算法在垂直轴上生成随机对称

> ID：10016064
> 
> 赞同：0
> 
> 时间：2012-04-04T17:12:44.927
> 
> 标签：algorithm, html

我正在开发一个在画布上以 8 x 8 矩阵生成形状的游戏。用户需要确定生成的形状是否在垂直轴上对称，因此为了生成对称形状，我正在考虑创建一个 4 x 8 数组，一旦这是，用 1 和 0（对于形状）随机填充数组完成然后我遍历 4 x 8 数组并创建另一个 8 x 8 数组，它反映了 4 x 8 矩阵。

有一个更好的方法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:16:54.757

如果没有看到代码并且不知道使用什么标准，“更好”将很难确定。

也就是说，你的方法听起来很合理。试一试，注意不要过早优化。:)

# sql - 带有 UniVerse ODBC 驱动程序的标量函数

> ID：10016065
> 
> 赞同：3
> 
> 时间：2012-04-04T17:13:03.370
> 
> 标签：sql, sql-server, ssis, odbc, universe

我正在使用 UniVerse ODBC 驱动程序将数据从我们的事务系统提取到 SQL Server 2008。ODBC 驱动程序安装在 Windows Server 2003 上并且工作正常。我试图在编写标量函数（如 CONVERT）的语法上找到一些帮助。

当我浏览手册时，我发现该功能是受支持的。但是当我尝试写一个查询时

```
SELECT CONVERT(ID AS VARCHAR(10)) FROM TableName 
```

查询因语法错误而失败。我怀疑 ODBC 驱动程序不支持这种语法。对此的任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T18:30:22.663

You will need to format your scalar functions like so:

```
{fn CONVERT(EXAMPLEFIELD, SQL_VARCHAR )} 
```

Therefore, your completed query may look like:

```
SELECT {fn CONVERT(ID, SQL_VARCHAR )} FROM TableName 
```

I tested a similar query through my ODBC connection to Universe and it did not result in a syntax error.

I found the following article from Microsoft about ODBC explicit conversions to be helpful: [http://msdn.microsoft.com/en-us/library/windows/desktop/ms715381(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms715381(v=vs.85).aspx)

# ruby-on-rails - 如何在 Rails 3.1 邮件中的 link_to 中传递值？

> ID：10016066
> 
> 赞同：1
> 
> 时间：2012-04-04T17:13:06.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

这是我在我的网站上批准某些事件的方式。这个想法是：对于每个新事件，都会向“admin@example.com”发送一封电子邮件。该电子邮件包含某些内容和指向更改“已批准”布尔值的方法的链接。除了电子邮件中生成的 url 之外，一切都有效。
它生成[http://example.com/approve_event](http://example.com/approve_event)。我收到错误消息“找不到 ID 为 nil 的事件”

我应该怎么做才能获得一个指向[http://example.com/approve_event?=23之类的网址](http://example.com/approve_event?=23)

管理员通知程序

```
 def approve_event(event)
    @event = event    
    mail(:to => "admin@example.com", :subject => "Event pending of approval")
  end 
```

电子邮件视图 html

```
 = link_to "Approve", approve_event_url(:id=> @event.id) 
```

事件控制器

```
 def approved
   @event = Event.find(params[:id])
   @event.approved = true
   @event.save
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:01:25.070

您需要确保`@event`在 mailer 方法中正确定义了变量（`approve_event`在这种情况下），以确保它在视图中可用。

[有关 Rails 指南的更多信息](http://guides.rubyonrails.org/action_mailer_basics.html)

# ruby-on-rails - 设计用户继承和 user_signed_in？和 current_user

> ID：10016068
> 
> 赞同：0
> 
> 时间：2012-04-04T17:13:22.267
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, devise

我正在使用设计来帮助进行身份验证，出于各种原因，我有几个 User 模型的子类，它们有助于分离注册和其他一些业务逻辑的关注点。

`User`are `Affiliate`and的子类`Admin`（将来我可能会有更多），所有这些子类都将所有数据存储在 User 表中（不是单独的表）。

所有用户都可以通过默认`users`资源 ( `/users/sign_in`) 登录。但是，这是我遇到问题的地方。

如果用户通过`/users/sign_in`资源登录，我可以访问`user_signed_in?`and `current_user`helper，然后访问任何其他 Active Record 关联。这就是我要的！呜呼！这很好用。

但是，对于注册为`Affiliate`. 由于设计会自动登录用户（我确实想要），我希望它`user_signed_in?`等于`true`并且`current_user`是刚刚登录的用户。当用户通过`/affiliate/sign_up`资源注册时，情况并非如此。

在`Affiliate`模型上（请记住，它像这样子类化用户`class Affiliate < User`）我已经（通过设计）为 sign_up 生成了一组单独的控制器/视图，因此我可以稍微自定义这个过程（因为 sign_up 过程对于这个特定类型更加自定义）用户）。当用户通过此资源`/affiliate/sign_up`注册会员时，然后注册，但现在，`current_user`是`nil`和`user_signed_in?`是`false`。但是，助手`current_affiliate`是一个水合物体，`affiliate_signed_in?`是真实的。

我想要做的是能够访问一种类型的助手 -`user_signed_in?`助手和`current_user`助手而不是孩子`affiliate_signed_in?`和`current_affiliate`. 我想访问：`current_user`并且`user_signed_in`只有。看到`Affiliate`子类，`User`为什么不返回当前用户（又名：the ）？为什么and助手可以工作，而-esque 则不行？`user_signed_in?``current_user``Affiliate``current_affiliate``affiliate_signed_in?``user`

有没有办法让框架总是使用`current_user`和`user_signed_in?`帮助，因为一切都是`User`模型的子类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:45:11.223

根据您的设置方式，您似乎可以同时以用户和会员身份登录。这意味着，在给定的时刻可能有一个 current_user 和一个 current_affiliate。如果你希望它一直是 current_user，你可以覆盖 Devise 助手。但是您必须确保只有一个用户或会员通过一个会话登录。Else Devise 无法知道为 current_user 返回哪个对象。

# jquery - jQuery脚本仅获取具有给定前缀的复选框

> ID：10016072
> 
> 赞同：0
> 
> 时间：2012-04-04T17:13:34.990
> 
> 标签：jquery, forms, checkbox

我正在使用下面列出的 jQuery 脚本来选择一些复选框输入。

```
$(document).ready(function() {
  $("input:checkbox:not(:checked)").each(function() {
    var column = "table #" + $(this).attr("name");                            
    $(column).hide();
  });

  $("input:checkbox").click(function(){
    var column = "table #" + $(this).attr("name");                            
    $(column).toggle();
  });
}); 
```

如何修改脚本以仅获取名称以“col_”开头的那些复选框？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T17:14:56.533

您可以选择属性`^=`来表示前缀`$=`后缀等

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

```
$('input:checkbox[name^=col_]') 
```

# c# - 从 DataTable 到 gridview 的值作为组合框

> ID：10016076
> 
> 赞同：0
> 
> 时间：2012-04-04T17:13:47.393
> 
> 标签：c#, mysql

我试图从我的数据表中获取一列，以在我的网格视图中显示为组合框。还需要有能力用一个小集合来填充组合以供选择。当我从 Gui 绑定它时它不会显示值，所以我正在尝试编程但似乎找不到正确的代码。

```
 connection2 = new MySqlConnection(ConnectionString2);

        try
        {
            string proid = txtbxProjId.Text;

            //prepare query to get all records from items table
            string query2 = "select sl.sample_id As sample_id, sl.sample_number As Sample_Number, sl.sample_date As Sample_Date, sl.sample_time As Sample_Time, sl.sample_comments As Sample_Comments FROM spt_sample_login sl Where project_id = '"+proid+"'";

            //prepare adapter to run query
            adapter2 = new MySqlDataAdapter(query2, connection2);
            adapter3 = new MySqlDataAdapter(query2, connection2);

            //create a DataTable to hold the query results
            DataTable dTable2 = new DataTable();
            DataSet DS2 = new DataSet();

            //fill the DataTable

            //get query results in dataset
            adapter2.Fill(dTable2);
            adapter3.Fill(DS2);

            //return datatable with all records
            //BindingSource to sync DataTable and DataGridView

                //set the BindingSource DataSource
            GridView1.DataSource = dTable2;

            this.GridView1.Columns["sample_id"].Visible = false;

            this.GridView1.Columns["Sample_Type"].DisplayIndex = 4;
           this.GridView1.Columns["Sample_Type"].Visible = true;

            //set the DataGridView DataSource

        }
        catch (MySqlException ex)
        {

        }
    } 
```

这可行，但将 Sample_Type 显示为一个文本框，我希望它与 F、PQ、B 作为选项的组合。

谢谢布伦特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:18:59.377

您必须将 ComboBox 放在 itemTemplate 中，并且必须在 rowDataBound 事件期间填充它。

我当前项目的快速示例：

```
DropDownList ddlRole = (DropDownList)e.Row.FindControl("ddlRole");

ddlRole.DataSource = GetTruckersRoles();

string[] rolesList = Roles.GetRolesForUser((string)gvTruckers.DataKeys[e.Row.RowIndex][0]);
if (rolesList.Length > 0)
{
    //If user is not in any roles, dont' do this
    ddlRole.SelectedValue = rolesList[0];
}

ddlRole.DataBind(); 
```

只需根据您的情况调整代码

# v8 - GetPropertyNames() 是否保留属性顺序

> ID：10016077
> 
> 赞同：0
> 
> 时间：2012-04-04T17:13:47.570
> 
> 标签：v8

如果我们有这个 javascript 代码： var obj = { b:{propb: 10}, d: {propd: 15}, c: {propc: 15}, a: {propa: 5} }

v8::Object::GetPropertyNames() 是否保证属性名称将以与上面定义的顺序相同的顺序返回？我做了一个测试，订单被保留了，但我想知道这是否有保证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:31:46.827

ECMA-262 规范 5.1：“未指定枚举属性 [...] 的机制和顺序。”

对于 v8，枚举属性的顺序目前也未指定。在某些情况下它可能会起作用，但最好不要依赖它。

关于 v8 订购的 Chromium 票：[http ://code.google.com/p/chromium/issues/detail?id=21901](http://code.google.com/p/chromium/issues/detail?id=21901)

# html - 如果源在 AUDIO 标签中无效，则回退到默认值

> ID：10016079
> 
> 赞同：0
> 
> 时间：2012-04-04T17:13:53.720
> 
> 标签：html, audio

所以我有一个基本的音频元素。假设我有一个 mp3 源。我正在使用火狐。浏览器看到音频标签，喜欢它，按指示放置控件，但不喜欢任何源，因此它不加载任何音频，但仍然忽略较小浏览器会显示的默认项目。

遗憾的是，我更希望浏览器在那时实际显示默认项目（比如下载 mp3 的链接），而不是显示不工作的音频控件。既然没有AudioElement.stuffThatsNotSRC，那我们怎么做呢？

所以我要做的是有一个 checkSources() 触发 onLoad 来查看 networkState 如果它找到 0 或 3 然后转到我在音频控件周围的 HTML 跨度并用非源内容替换其内部 HTML那是在音频标签里面。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-17T22:01:04.160

使用源标签定义多种文件类型。

```
<audio controls="true">
    <source src="demo.mp3" type="audio/mp3"> 
    <source src="demo.ogg" type="audio/ogg"> 
    <source src="demo.aac" type="audio/mp4"> 
    <!-- If no support at all. -->
    HTML5 audio not supported 
</audio> 
```

[http://msdn.microsoft.com/en-us/library/gg589524(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/gg589524(v=vs.85).aspx)

# java - java中的字符串比较

> ID：10016081
> 
> 赞同：3
> 
> 时间：2012-04-04T17:13:58.663
> 
> 标签：java

> **可能重复：**
> [比较可能为空的字符串的更好方法](https://stackoverflow.com/questions/8336856/a-better-way-to-compare-strings-which-could-be-null)

我有一个看起来像这样的 if 条件：

```
if( !str1.equals(str2) )
{
    ---
    ---
    ---
} 
```

其中 str1 和 str2 是两个字符串对象。

str1 有可能是 null ，那么下面的代码是否与上面的代码等价，以及处理 null 检查？

```
if( !(str1==null ? str2==null : str1.equals(str2)) )
{
    ---
    ---
    ---
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T17:17:00.173

假设您希望两个空值相等，当然。根据您的方法，NullPointerException 可能是正确的响应。通过了解，您可以节省大量打字时间

```
org.apache.commons.lang.StringUtils 
```

`!StringUtils.equals(str1, str2);`以相同的方式为您处理空值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T17:18:22.840

如果您使用的是 Java 7：

```
java.util.Objects.equals(str1, str2); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T17:15:38.667

是的，这将导致相同的结果。

更具体一点：

1.  如果`str1` *不为*空，则*完全相同*，因为它只是通过三元检查得到与之前相同的表达式
2.  如果`str1` *为*空，则检查是否`str2`也为*空*。

而且由于您将整个三元表达式都包裹在`!`前面，因此其行为与以前相同。

如果您想更清楚*一点*，可以在and :`str2==null`之间进行实际比较。由于其中一个值已经是，因此它是参考检查而不是正确的字符串相等检查并不重要，并且最终在代码中更加清晰（对我来说，无论如何）`str1``str2``str1==str2``null`

然而，正如其他人所提到的，Apache Commons 库已经包含了这种空安全相等功能，但它确实需要包含相当大量的库。另一方面，许多人认为 Apache Commons 功能应该被视为 Java 本身的一部分，因此您可以自己决定是否需要额外的依赖项。

*最后，该功能在技术上*并不等效，因为默认`.equals()`方法会抛出 a `NullPointerException`，而您的相等检查代码*不会*。如果这是您正在寻找的行为（我认为是），那么您很好，但这是需要注意的事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T17:18:17.640

它看起来是正确的，如果你认为`null`s 相等，并且允许`str2`是`null`。但是你最好不要相信任何人，而是为所有可能的情况编写一个测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T17:18:07.600

使用三元运算符是一种非常愚蠢的检查方式，它会让你阅读起来感到沮丧。只需使用 AND。

```
if(str1 != null && !str1.equals(str2))
{
    ---
    ---
    ---
} 
```

您不需要导入一个全新的库来进行空检查。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T17:39:46.313

是的，只有当字符串不相等时，您的代码才会进入该`if`块（其中只有一个为空或两者都不为空且不同）。

另一种方法是

```
if( (str1 == null && str2 != null) || !str1.equals(str2) ){
    // Only executes when strings are unequal
} 
```

这是口味问题，有些人对三元运算符过敏。（我喜欢他们）。

# function - 如何使用 MATLAB 在给定方程的情况下绘制 w 和 phi 之间的图形？

> ID：10016088
> 
> 赞同：-1
> 
> 时间：2012-04-04T17:14:13.873
> 
> 标签：function, matlab, plot, using

> tanh(w/2 sqrt(β^2 −k^2εd) =−εd /εm sqrt((β^2−k^2εm)/(β^2−k^2εd))

其中 w 介于 50 到 250 之间。

> β=phi/d
> 
> d=500纳米
> 
> k^2=9.85*10^(-5)
> 
> εd=1
> 
> εm=-17.2355+0.498i(复数)

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:16:09.670

```
w=50:0.0001:250;
f= sin(w);
plot(w,f); 
```

现在也根据需要定义 f 。

也检查一下

[http://www.mathworks.com/help/techdoc/ref/plot.html](http://www.mathworks.com/help/techdoc/ref/plot.html)

# mysql - Silverlight 和在线 MySQL 数据库

> ID：10016089
> 
> 赞同：0
> 
> 时间：2012-04-04T17:14:19.123
> 
> 标签：mysql, silverlight

我可以制作一个 Silverlight 应用程序，从虚拟主机上的在线 MySQL 数据库获取他的数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:19:54.997

是的，但是您需要在 MySQL 数据库之上抛出一个 WCF 接口。可能最简单的方法是使用[WCF RIA Services](http://www.silverlight.net/learn/advanced-techniques/wcf-ria-services/get-started-with-wcf-ria-services)。

# c# - 在 SQLite 数据库读取 C# 上实现进度条

> ID：10016090
> 
> 赞同：1
> 
> 时间：2012-04-04T17:14:19.567
> 
> 标签：c#, visual-studio-2010, sqlite, progress-bar

我正在使用下面的代码将 SQLite3 数据库中的表中的数据读入 ListView

目前我将记录限制为仅显示 200 条，因为显示所有记录需要的时间太长。（大约 30,000 条记录）

我想提供一个显示所有记录的选项，如果选择该选项以能够加载每条记录。

正如我所说，这需要相当长的时间，我想使用进度条来显示它的状态。

我以前从未使用过进度条，所以我不知道它们是如何工作的。是否会在我的代码中添加几行额外的代码以允许使用进度条，或者我是否必须对其进行线程化并使用后台工作人员？

```
private void cmdReadDatabase_Click(object sender, EventArgs e)
{
    listView4.Columns.Add("Row1", 50);
    listView4.Columns.Add("Row2", 50);
    listView4.Columns.Add("Row3", 50);
    listView4.Columns.Add("Row4", 50);
    listView4.Columns.Add("Row5", 50);
    listView4.Columns.Add("Row6", 50);
    listView4.Columns.Add("Row7", 50);

    try
    {
        string connectionPath = Path.Combine(@"C:\", @"temp\");

        SQLiteConnectionStringBuilder csb = new SQLiteConnectionStringBuilder();
        csb.DataSource = Path.Combine(connectionPath, "database.db");

        SQLiteConnection connection = new SQLiteConnection(csb.ConnectionString);
        connection.Open();

        // Query to read the data
        SQLiteCommand command = connection.CreateCommand();
        string query = "SELECT * FROM table_name LIMIT 200 ";
        command.CommandText = query;
        command.ExecuteNonQuery();

        SQLiteDataAdapter dataAdaptor = new SQLiteDataAdapter(command);
        DataSet dataset = new DataSet();
        dataAdaptor.Fill(dataset, "dataset_name");

        // Get the table from the data set
        DataTable datatable = dataset.Tables["dataset_name"];
        listView4.Items.Clear();

        // Display items in the ListView control
        for (int i = 0; i < datatable.Rows.Count; i++)
        {
            DataRow datarow = datatable.Rows[i];
            if (datarow.RowState != DataRowState.Deleted)
            {
                // Define the list items
                ListViewItem lvi = new ListViewItem(datarow["Row1"].ToString());
                lvi.SubItems.Add(datarow["Row2"].ToString());
                lvi.SubItems.Add(datarow["Row3"].ToString());
                lvi.SubItems.Add(datarow["Row4"].ToString());
                lvi.SubItems.Add(datarow["Row5"].ToString());
                lvi.SubItems.Add(datarow["Row6"].ToString());
                lvi.SubItems.Add(datarow["Row7"].ToString());

                // Add the list items to the ListView
                listView4.Items.Add(lvi);
            }
        }
        connection.Close();
    }
    catch(SQLiteException ex)
    {
        MessageBox.Show(ex.ToString(), "Error", MessageBoxButtons.OK);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:34:16.640

为了显示和更新进度条，您必须在想要显示进度时设置`Maximum`然后`Increment`方法。这意味着在你想要的地方添加增量代码。您可以设置`Value`属性或使用`Increment`函数。

要更新进度条，您必须委托给进度条的父线程，就像您必须使用其他控件一样。

一个简单的例子是：

```
progressBar.Maximum = 200; //you have 200 records
//after retrieving one record, and adding it to list you can do
//you may have to Invoke it on creating thread if InvokeRequired.
progressBar.Increment(1); 
```

你可以像这样从互联网上获得很多[样本](http://www.c-sharpcorner.com/UploadFile/mahesh/WorkingwithProgressBarinCSharp11302005045625AM/WorkingwithProgressBarinCSharp.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:57:05.220

Id 使用 DataView，因此我可以使用 RowStateFilter 获取我需要的记录数。然后使用 foreach 而不是 for 语句遍历 DataView。

```
 ProgressBar _Bar = new ProgressBar();

        DataView _View = new DataView();
        _View.Table = datatable;
        _View.RowStateFilter = DataViewRowState.CurrentRows;

        _Bar.Minimum = 0;
        _Bar.Maximum = _View.ToTable().Rows.Count;

        foreach (DataRow datarow in _View.ToTable().Rows)
        {
            // Define the list items    
            ListViewItem lvi = new ListViewItem(datarow["Row1"].ToString());
            lvi.SubItems.Add(datarow["Row2"].ToString());
            lvi.SubItems.Add(datarow["Row3"].ToString());
            lvi.SubItems.Add(datarow["Row4"].ToString());
            lvi.SubItems.Add(datarow["Row5"].ToString());
            lvi.SubItems.Add(datarow["Row6"].ToString());
            lvi.SubItems.Add(datarow["Row7"].ToString());

            // Add the list items to the ListView    
            listView4.Items.Add(lvi); 
            _Bar.PerformStep();
        } 
```

以下增量进度条：

```
_Bar.PerformStep(); 
```

如果不运行此代码，我怀疑您会遇到进度条实际更新的问题，就像您认为的那样。您的进程在 UI 线程上运行，因此它将阻止 UI 更新。您可能想研究在另一个线程上运行此进程。那是另一个话题。

# java - 在 Hashmap 中传递类以及如何使用键获取值

> ID：10016095
> 
> 赞同：1
> 
> 时间：2012-04-04T17:14:40.413
> 
> 标签：java, reflection, hashmap, predicate

我正在尝试将类作为哈希图中的值传递。我需要使用特定的键获取类（值）并为检索到的类实例化一个对象。但为了创建对象，我需要传递参数。

当我从另一个传递键值的类调用 getExpo 方法时，我的流程就在这里。使用键值，我需要获取正确的类，并且使用该类需要实例化对象并需要返回对象。为了创建对象，我需要传递参数，因为该类没有默认构造函数。

此过程的目的是将来，我需要添加另一个键，对值，我不应该做任何更改........所有类的实现都是相同的，即创建对象

我的课在这里

```
public class ExampleFactory {

    static {
        HashMap<String,Class<?>> hmap = new HashMap<String,Class<?>>();

        hmap.put("jxpath", JXPathExpression.class);
        hmap.put("spel", SpelExpression.class);
    }

    public Predicate getExpo(String key,String expression) {

        // Need to get the class using key value and instantiate the object for the class
        // but i need to pass parameters in order to create the object.something like this

        //JXPathExpression object = new JXPathExpression(expression);
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:40:47.087

尝试

```
Class aClass = hmap.get(key);
Constructor constructor = aClass.getConstructor(new Class[]{String.class});
return (Predicate) constructor.newInstance(expression); 
```

# ios - 自定义卡片组应用程序的数据和类设计

> ID：10016097
> 
> 赞同：2
> 
> 时间：2012-04-04T17:14:46.433
> 
> 标签：ios

我正在为一个自定义塔罗牌制作一个应用程序，它应该能够洗牌、选择一张卡片并给出卡片的描述。

我的主要问题是：

1.  在 Card 类中用作数据持有者的内容。总共有 36 张卡片。每个都有不同的正面图像/描述的 png/文本，但每个都有相同的背面图像（就像播放甲板一样）。我认为这将是某种数组，但我不知道如何声明两个图像和文本（前/后/描述）并将其链接到单个索引位置，或者如果我需要 3 个单独的数组，那么如何我将它们相互链接，以便它们都获得正确的数据？

2.  甲板类：我假设将是一个空数组，在它们被洗牌后从卡片类中获得对象？我有一个很好的洗牌方法，我一直在控制台中尝试，`NSLog`但基本上需要在卡片类上实现它？然后牌组将显示在“FlowCover”（http://chaosinmotion.com/flowcover.html）中。这是有效的，我已经整理出“didselect”方法来更改视图但是 -

3.  选择：我不确定将保存什么对象并将所选数据从卡座传递到所选视图。我认为它必须是与卡类相同的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:54:38.863

1.  将三个“事物”链接到单个索引位置的典型方法是将事物放入单个类，然后将该类的对象放在索引位置。
2.  卡片组可以是一个简单的 NSMutableArray，它是 Objective-c 的可编辑对象容器
3.  选择可以是第二个 NSMutableArray，或者您可以将选定的属性添加到每张卡片。两者都是可行的选择，但您的算法会有所不同。

所以有一个包含静态背景图像的 CardClass（即背景图像存在于您从中实例化的每个对象中）。将属性添加到正面图像和描述的类。然后将您的列表创建为这些对象的集合。

```
//Card.h
@interface Card : NSObject

{
    UIImage * back;
    UIImage * front;
    NSString * description;
}
@property (readonly) UIImage * back;
@property (readonly) UIImage * front;
@property (readonly) NSString * description;
- (id) initWithFront:(UIImage *)setFront Description:(NSString*)setDescription; 
@end

//Card.m
#import "Card.h"

static UIImage * backimage = nil;

@implementation Card
@synthesize back;
@synthesize front;
@synthesize description;

+(void) initialize
{
    if (!backimage){
        backimage = [[UIImage alloc]initWithContentsOfFile:@"imagefile.png"]; //though imagefile.png will be replaced with a reference to a plist.info string 
    }
}

- (id) initWithFront:(UIImage *)setFront Description:(NSString*)setDescription{
    if (self = [super init]){
        front=setFront;
        description= setDescription;
        back = backimage;
    }
    return self;
}
@end

//... elsewhere, perhaps your main viewDidLoad method
NSMutableArray *deck = [NSMutableArray initWithCapacity:36];
Card * card1 = [[CardClass alloc] initWithFront:@"card1.png" Description:@"card 1"];
[deck addObject:card1];
... //etc to create the remaining cards in the whole deck 
```

扩展您的 NSMutableClass 以获得一个随机播放程序。请参阅[随机播放 NSMutableArray 的最佳方法是什么？](https://stackoverflow.com/questions/56648/whats-the-best-way-to-shuffle-an-nsmutablearray)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:35:21.977

两个常量数组，测试和前图像。那么你的牌组就是简单的整数数组（1 - 36）。所以洗他们，顶牌是18

```
Text is Descriptions[18] (or 17 if zero based arrays)
FrontImage is Images[18] ditto
BackImage is always the same so no point in having 36 of them. 
```

如果你的视图只是两张图片和一张卡片的文字，那么它不需要知道卡片类或套牌类的任何内容，只需要这三个参数。

# drupal-6 - 在 Drupal 6 中以编程方式创建带有音频场的节点

> ID：10016107
> 
> 赞同：1
> 
> 时间：2012-04-04T17:15:21.767
> 
> 标签：drupal-6

如何以编程方式创建音频域（作为音频小部件的表单域）内容？

特别是我如何“导入”文件内容（在本例中为 MP3 文件）。

我尝试了节点导入模块，但似乎无法正常工作。

这是 Drupal 6 的实现。

谢谢，

穆拉利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T00:26:42.493

我不确定我是否完全理解你的问题。如果你想上传一个 mp3 文件到一个 cck 节点，你可以使用 filefield 模块。

*   创建一个新的 cck 节点类型
*   向此节点类型添加一个文件字段，并选择“文件”作为字段类型。
*   配置此文件字段：在“允许的上传文件扩展名”下，输入“mp3”。如果您想上传任意数量的 mp3 文件，请在“数值数量”下选择“无限制”。

一旦定义了节点类型，就可以使用 node_save() 以编程方式创建节点。见这里：[http ://drupal.org/node/1111514](http://drupal.org/node/1111514)

# asp.net-mvc-3 - 我的 HTML 标签被篡改

> ID：10016108
> 
> 赞同：2
> 
> 时间：2012-04-04T17:15:25.643
> 
> 标签：asp.net-mvc-3, html, umbraco

我有一个 Umbraco 5 MVC3 项目，在那里我发现那里到处都是空白。在调查时，我发现在 Firefox Web 开发人员工具中“查看生成的源代码”时，我的 HTML 看起来非常糟糕。例如，它删除了我的 doctype 声明并将我的元标记和内容移出脑海。简化代码：

```
<!doctype html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>@ViewBag.Title</title>
    <link rel="stylesheet" href="@Url.Content("~/Content/Styles/style.css")"/>
</head>
<body id="" class="default">
    <div id="wrapper">
        <header id="banner" class="body">
            <a class="ir logo" href="/"><h1>Christian </h1></a>
            <ul class="share">
                <li id="facebook"><a class="ir" href="http://www.facebook.com/sharer.php?u=@Request.Url.AbsoluteUri">Facebook</a></li>
                <li id="twitter"><a class="ir" href="http://twitter.com/share?text=Christian">Twitter</a></li>
            </ul>
            @Html.Partial("nav")
        </header>
        <section id="content" class="body">
            @RenderBody()
        </section>
    </div>
    <script src="@Url.Content("~/Scripts/plugins.js")"></script>
    <script src="@Url.Content("~/Scripts/script.js")"></script>
</body>
</html> 
```

输出是这样开始的

```
<html class="no-js" lang="en"><head></head><body id="" class="default"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:01:18.380

如果要检查服务器生成的 HTML，应使用`View source`( `CTRL`+ `U`)。

`Generated source`更像是基于 DOM 的 HTML 重构，并且包括例如在页面加载后在客户端使用 javascript 创建的节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:34:56.773

好吧，我解决了。花了我一段时间。在 Marapet 建议不要使用“生成的源”之后，我在一堆浏览器中尝试了普通的“查看源”，并在所有浏览器中得到了不同的结果。当我试图验证我的来源时，我收到了一些奇怪的抱怨：

> 在没有首先看到文档类型的情况下找到非空格字符。预期`<!DOCTYPE html>`。
> 
> 元素头缺少子元素标题的必需实例。

还有我个人的最爱

> 上次错误后无法恢复。任何进一步的错误都将被忽略。

看起来文档类型有问题。打开记事本并粘贴到那里以从元数据中“清洗”代码，就像我有时将内容粘贴到 tinyMCE 时所做的那样。即使在记事本中，文本的格式也很奇怪。doctype 声明的字体大小比 html 的其余部分小。

所以我也用记事本++打开了它，声明前面有一堆问号。我删除了它们并将其复制回 Visual Studio，保存，现在一切正常。

我认为我遇到这个问题的原因是我直接从 github 上的 HTML5 Boilerplate 复制了片段。

// 夏洛克

# mysql - sql查询没有正确分组

> ID：10016111
> 
> 赞同：2
> 
> 时间：2012-04-04T17:15:31.517
> 
> 标签：mysql, group-by

出于某种原因，下面的查询允许重复名称。这是为什么？

```
SELECT id, name_without_variants, SUM(relevance) as total_relevance FROM (
    SELECT 
        card_definitions.id, 
            card_definitions.name_without_variants,
        (MATCH(card_definitions.name_without_variants) AGAINST ('lost soul site discard')) * 0.40 AS relevance
        FROM card_definitions
        GROUP BY name_without_variants, id
    UNION
    SELECT 
        card_definitions.id,
            card_definitions.name_without_variants,
        (MATCH(card_def_identities.special_ability_text) AGAINST ('lost soul site discard')) * 0.05 AS relevance
        FROM card_def_identities 
        INNER JOIN card_definitions ON card_def_identities.card_def_sid = card_definitions.id 
        GROUP BY name_without_variants, id
    UNION
    SELECT 
        card_definitions.id,
            card_definitions.name_without_variants,
        (MATCH(brigades.brigade_color) AGAINST ('lost soul site discard')) * 0.30 AS relevance
        FROM brigades 
        INNER JOIN card_def_brigades ON brigades.id = card_def_brigades.brigade_sid
        INNER JOIN card_definitions ON card_def_brigades.card_def_sid = card_definitions.id 
        GROUP BY name_without_variants, id
    UNION
    SELECT 
        card_definitions.id,
            card_definitions.name_without_variants,
        (MATCH(identifiers.identifier) AGAINST ('lost soul site discard')) * 0.20 AS relevance
        FROM identifiers
        INNER JOIN card_def_identifiers ON identifiers.id = card_def_identifiers.identifier_sid
        INNER JOIN card_definitions on card_def_identifiers.card_def_sid = card_definitions.id 
        GROUP BY name_without_variants, id
    UNION
    SELECT 
        card_definitions.id,
            card_definitions.name_without_variants,
        (MATCH(card_effects.effect) AGAINST ('lost soul site discard')) * 0.05 AS relevance
        FROM card_effects
        INNER JOIN card_def_effects ON card_effects.id = card_def_effects.effect_sid
        INNER JOIN card_definitions on card_def_effects.card_def_sid = card_definitions.id 
        GROUP BY name_without_variants, id
    ) AS combined_search 
GROUP BY name_without_variants, id
HAVING total_relevance > 0
ORDER BY total_relevance DESC
LIMIT 10; 
```

这是我得到的结果。注意两个`Lost Soul [Site Doubler]`

```
2623    Lost Soul [Deck Discard]    6.35151714086533
1410    Lost Soul [Hand Discard]    6.29273346662521
1495    Lost Soul [Discard Card]    5.93360201716423
1442    Lost Soul [Demon Discard]   5.91308708190918
1497    Lost Soul [Site Doubler]    5.05888686180115
1498    Lost Soul [Site Doubler]    5.05888686180115
2572    Lost Soul [Site Guard]  4.82421946525574
2774    Lost Soul [Far Country] 3.39325473308563
2891    Fortify Site [RoA2] 2.77084048986435
1418    Lost Soul [Hopper]  2.63041100502014 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:18:27.070

因为 ID 不同，并且您按 ID 分组，所以每个 ID 都有多行，这就是这样`GROUP BY`做的。如果您将顶层更改`SELECT`为

```
SELECT name_without_variants, SUM(relevance) as total_relevance 
```

和外部 GROUP BY 到：

```
GROUP BY name_without_variants 
```

您应该会看到不同的名称，但不会再有 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:23:26.573

```
GROUP BY name_without_variants, id 
```

您按 name_without_variants，id 分组。两条记录的 id 不同：

```
1497    Lost Soul [Site Doubler]    5.05888686180115
1498    Lost Soul [Site Doubler]    5.05888686180115 
```

您需要决定如何管理 id。

从 group by 中删除 id 并将聚合函数添加到您选择的 id 列中。或者只是一起删除列。

这是一个简化为单个查询的示例。请理解我对您的架构或数据没有完整的看法，也没有经过测试。我在这里也做了一些假设。但是，如果架构是关系的，这应该会带回您正在寻找的内容：

```
SELECT cd.id, cd.name_without_variants, (((MATCH(cd.name_without_variants) AGAINST ('lost soul site discard')) * 0.40)+
                                   ((MATCH(cdi.special_ability_text) AGAINST ('lost soul site discard')) * 0.05)+
                                   ((MATCH(b.brigade_color) AGAINST ('lost soul site discard')) * 0.30)+
                                   ((MATCH(i.identifier) AGAINST ('lost soul site discard')) * 0.20)+
                                   ((MATCH(ce.effect) AGAINST ('lost soul site discard')) * 0.05)
                                  ) as total_relevance 
FROM card_definitions cd 
 LEFT OUTER JOIN card_def_identities cdi ON cd.id=cdi.card_def_sid
 LEFT OUTER JOIN brigades b ON cd.id=b.card_def_sid
 LEFT OUTER JOIN identifiers i ON i.id=cdi.identifier_sid
 LEFT OUTER JOIN card_def_effects cde ON cde.card_def_sid=cd.id
 LEFT OUTER JOIN card_effects ce ON ce.id=cde.effect_sid
GROUP BY cd.id, cd.name_without_variants
HAVING total_relevance > 0
ORDER BY total_relevance DESC
LIMIT 10; 
```

# css - 如何使用 CSS 位置在网站上定位 AdSense：绝对

> ID：10016117
> 
> 赞同：4
> 
> 时间：2012-04-04T17:15:53.227
> 
> 标签：css, position, ads, adsense

我有一个 AdSense 帐户，只需复制/粘贴一段 Javascript 即可在我的网站上添加广告。然而，由于我没有放置任何 HTML，Js 正在生成一个 iframe 和一个 ins 元素，广告出现在其中。

我想将这些广告移到我的内容左侧，在那里我为它们腾出空间。我尝试添加 CSS，例如“ins，iframe { position: absolute; left: 0; top: 0; }”，但它似乎被覆盖了。

所以我的问题是：如何强制 AdSense 广告出现在我希望它们出现的位置？最好用CSS。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T17:19:54.167

你可以像使用 CSS 来控制其他任何东西一样：把它放在一个 div 中，给它一个类（或 id），然后格式化父对象。

你已经在使用 CSS 了吗？如果是这样，只需在以下位置添加一个类似这样的新内容`main.css`：

```
#google{
    position:absolute;
    right:0px;
    width:160px;
    top:120px;
    border-left: 1px solid black;
} 
```

然后在您的页面中，酌情在 Google 的 JavaScript 周围添加以下内容：

```
<div id="google">
    <--! code here -->
</div> 
```

# javascript - Javascript 加载图像

> ID：10016120
> 
> 赞同：3
> 
> 时间：2012-04-04T17:16:09.380
> 
> 标签：javascript, image, html, loading

我创建了一个 html5 网络应用程序来显示数据，并模仿我使用了一个名为 Wipetouch 的 Jquery 插件的滑动手势。当触发擦除手势时，我所做的就是通过 javascript 函数用新数字重绘所有数据。我意识到这不是最佳解决方案，因为图像是静态的，并且当前每次滑动时都会加载。任何想法都会很棒。

*编辑*

```
var img01 = new Image();
enter code here
img01.onload = function () {
    ctx.drawImage(img01, x, y, img01.width * 2, img01.height * 2);
    ctx.fillStyle = "white";
    //draw text
    ctx.font = "bold 28pt Calibri";
    ctx.fillText(monthname[date.getMonth()], x+51, y+135);
    ctx.fillText(d[1], x+47, y+37);
}
img01.src = 'images/retail_car.png'; 
```

我很抱歉没有早点说清楚。我在画布上绘制图像，每次wipetouch插件注册滑动时都会触发此代码。我想让所有东西都留在画布上，所以提到的 CSS 修复在我的情况下不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:24:47.720

您可以将图像放在您的 html 中，并在 css 中为它们提供一个具有 display:none; 的类。然后，当您调用该函数时，您可以将显示图像的类更改为具有 display: block; 的类。或者您需要显示它们。只需确保在滑动后将班级改回，以便出现新图像并且不再可见旧图像。这样，每次您调用滑动时，它们都不会再次生成。

# c - OpenCL 中的复数支持

> ID：10016125
> 
> 赞同：5
> 
> 时间：2012-04-04T17:16:36.540
> 
> 标签：c, opencl

我知道 OpenCL 不支持复数，而且据我所知，这个功能不会很快出现。尽管如此，仍有几个示例在 OpenCL 内核中使用复数（例如 FFT 实现）。

有人有这方面的经验吗？在 OpenCL 中启用复数支持的“最佳”方法是什么？我假设使用 float2 来包含实部和虚部，但是我应该编写一组宏，还是内联函数更好？有人知道为此目的是否已经存在一组函数/宏吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-06T10:45:08.553

因此，由于我需要一组函数来处理 OpenCL 中的复数，我最终实现了一组函数。具体来说，我需要求和和减法（微不足道，可以通过标准向量运算完成）、乘法、除法、获得复数的模数、参数（或角度）和平方根。
相关的维基百科文章： http:
[//en.wikipedia.org/wiki/Complex_number#Absolute_value_and_argument](http://en.wikipedia.org/wiki/Complex_number#Absolute_value_and_argument)
[http://en.wikipedia.org/wiki/Square_root#Principal_square_root_of_a_complex_number](http://en.wikipedia.org/wiki/Square_root#Principal_square_root_of_a_complex_number)
这主要是微不足道的，但确实需要一些时间，所以希望这次可能会救人，这里是：

```
//2 component vector to hold the real and imaginary parts of a complex number:
typedef float2 cfloat;

#define I ((cfloat)(0.0, 1.0))

/*
 * Return Real (Imaginary) component of complex number:
 */
inline float  real(cfloat a){
     return a.x;
}
inline float  imag(cfloat a){
     return a.y;
}

/*
 * Get the modulus of a complex number (its length):
 */
inline float cmod(cfloat a){
    return (sqrt(a.x*a.x + a.y*a.y));
}

/*
 * Get the argument of a complex number (its angle):
 * http://en.wikipedia.org/wiki/Complex_number#Absolute_value_and_argument
 */
inline float carg(cfloat a){
    if(a.x > 0){
        return atan(a.y / a.x);

    }else if(a.x < 0 && a.y >= 0){
        return atan(a.y / a.x) + M_PI;

    }else if(a.x < 0 && a.y < 0){
        return atan(a.y / a.x) - M_PI;

    }else if(a.x == 0 && a.y > 0){
        return M_PI/2;

    }else if(a.x == 0 && a.y < 0){
        return -M_PI/2;

    }else{
        return 0;
    }
}

/*
 * Multiply two complex numbers:
 *
 *  a = (aReal + I*aImag)
 *  b = (bReal + I*bImag)
 *  a * b = (aReal + I*aImag) * (bReal + I*bImag)
 *        = aReal*bReal +I*aReal*bImag +I*aImag*bReal +I^2*aImag*bImag
 *        = (aReal*bReal - aImag*bImag) + I*(aReal*bImag + aImag*bReal)
 */
inline cfloat  cmult(cfloat a, cfloat b){
    return (cfloat)( a.x*b.x - a.y*b.y, a.x*b.y + a.y*b.x);
}

/*
 * Divide two complex numbers:
 *
 *  aReal + I*aImag     (aReal + I*aImag) * (bReal - I*bImag)
 * ----------------- = ---------------------------------------
 *  bReal + I*bImag     (bReal + I*bImag) * (bReal - I*bImag)
 * 
 *        aReal*bReal - I*aReal*bImag + I*aImag*bReal - I^2*aImag*bImag
 *     = ---------------------------------------------------------------
 *            bReal^2 - I*bReal*bImag + I*bImag*bReal  -I^2*bImag^2
 * 
 *        aReal*bReal + aImag*bImag         aImag*bReal - Real*bImag 
 *     = ---------------------------- + I* --------------------------
 *            bReal^2 + bImag^2                bReal^2 + bImag^2
 * 
 */
inline cfloat cdiv(cfloat a, cfloat b){
    return (cfloat)((a.x*b.x + a.y*b.y)/(b.x*b.x + b.y*b.y), (a.y*b.x - a.x*b.y)/(b.x*b.x + b.y*b.y));
}

/*
 *  Square root of complex number.
 *  Although a complex number has two square roots, numerically we will
 *  only determine one of them -the principal square root, see wikipedia
 *  for more info: 
 *  http://en.wikipedia.org/wiki/Square_root#Principal_square_root_of_a_complex_number
 */
 inline cfloat csqrt(cfloat a){
     return (cfloat)( sqrt(cmod(a)) * cos(carg(a)/2),  sqrt(cmod(a)) * sin(carg(a)/2));
 } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T17:38:34.573

PyOpenCL 在 OpenCL 中有一个更完整和更健壮的复数实现：

[https://github.com/pyopencl/pyopencl/blob/master/pyopencl/cl/pyopencl-complex.h](https://github.com/pyopencl/pyopencl/blob/master/pyopencl/cl/pyopencl-complex.h)

# ios - 在 iOS 上使用 CoreMedia.framework 解码视频

> ID：10016126
> 
> 赞同：5
> 
> 时间：2012-04-04T17:16:43.290
> 
> 标签：ios, video, h.264, mp4, core-media

我需要解码 mp4 文件并在 ios 应用程序中使用 OpenGL 绘制它。我需要从 mp4 文件中提取和解码 h264 帧，我听说使用 CoreMedia 可以做什么。有人知道怎么做吗？CoreMedia 使用的任何示例？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T17:58:33.377

您要找的不是 Core Media，而是 AVFoundation。特别是，您将使用 AVAssetReader 从电影中加载并遍历帧。然后，您可以使用`glTexImage2D()`或（在 iOS 5.0 上）使用更快的纹理缓存将这些帧作为 OpenGL ES 纹理上传。

如果您不想推出自己的实现，我可以在我的[GPUImage](https://github.com/BradLarson/GPUImage)框架中通过 OpenGL ES 进行基于 AVFoundation 的电影加载和处理。GPUImageMovie 类封装了电影读取和上传到纹理的过程。如果您想提取该纹理以在您自己的场景中使用，您可以将 GPUImageTextureOutput 链接到它。这两个类的示例可以在框架分发中的 SimpleVideoFileFilter 和 CubeExample 示例应用程序中找到。

您可以直接使用它，或者只查看我编写的代码，以在 GPUImageMovie 类中执行这些相同的操作。

# django - Django DetailView模板默认字段值不起作用

> ID：10016130
> 
> 赞同：1
> 
> 时间：2012-04-04T17:16:57.290
> 
> 标签：django, templates, django-templates, detailview

我在 django 模板中使用 '|default' 时遇到问题。

如果我这样做（它有效）：

```
<tr>
    <td>{% trans 'NAMEOFTHEFIELD' %}:</td>
    <td>{{ object.nameofthefield|default:"Not informed" }}</td>
</tr> 
```

但是我有很多领域，所以我这样做：

```
{% for name, value in object.get_fields %}
  {% if value %}
    <tr>
        <td>{% trans name %}:</td>
        <td>{{ value|default:"Not informed" }}</td>

    </tr>
  {% endif %}
{% endfor %} 
```

在这种情况下，默认值不起作用，它在模板中显示“无”而不是“未通知”。

你知道修复它的简单方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:53:31.670

我猜你正在转换为`str`模型`get_fields`方法。如果这不是真的，请发布您的`get_fields`方法。

# javascript - jQuery div 自动滚动条解决方案

> ID：10016131
> 
> 赞同：1
> 
> 时间：2012-04-04T17:16:57.677
> 
> 标签：javascript, jquery, scroll

我需要一个 jQuery 滚动器来使用自动滚动功能滚动我的 div。我正在寻找类似[**jCarousel**](http://sorgalla.com/projects/jcarousel/)的东西。

![在此处输入图像描述](../Images/b4e479578e4b45247a16dde5a1a2c72b.png)

但这有一些限制。我想要的是一个；

**1.**滚动`<div>`s（或某些`html`元素）而不仅仅是图像。我可能有类似下图的内容，可以滚动。

![示例图像](../Images/79a0975ee441a4cc73db06a084df139e.png)

它是文本和图像的组合。

**2.**它应该自动滚动内容

**3.**滑块应连续**MARQUE**且不应回退到开头。滑块不应后退（以相反方向）以在最后一个图像/内容之后转到第一个图像/内容。

jcarousel 所做的是在自动滚动模式下，它一次显示一组图像/内容，停一会，然后立即显示下一组。我不想要这个并且想在一个循环中平滑地自动滚动内容。也就是说，第一个内容应该在最后一个内容之后，在循环中。

我可以提供更多细节。只是发表评论。

有人知道我想说什么以及我想要什么并建议我解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:28:26.923

你可以在没有插件的情况下使用一些相当简单的 jQuery 来做到这一点。

在此处查看一个示例，我将其放在一起以获得另一个答案：

[http://jsfiddle.net/6Dxg6/](http://jsfiddle.net/6Dxg6/)

基本上，这个想法是您克隆包装器的内容，然后将内容不断地向右/向左移动原始内容的宽度，然后重置。适用于任何内容。

该代码甚至包括悬停功能。没有它，代码仍然更简单：

[http://jsfiddle.net/qJZtp/1/](http://jsfiddle.net/qJZtp/1/)

# git - 为什么我的文件提交会从 git 历史记录中丢失

> ID：10016132
> 
> 赞同：1
> 
> 时间：2012-04-04T17:16:57.880
> 
> 标签：git, version-control

所以我正在处理一个文件并将其提交到我的跟踪分支并推送到远程分支。其他人必须对同一个文件进行了更改并且与我的更改发生冲突，他们解决了问题，但删除了我的编辑作为解决方案。当他们下次访问该应用程序并意识到这是我正在处理的事情时出现了错误。

我试图查看该文件的历史记录，但似乎我的提交已从历史记录中删除。从事该项目的人没有做任何高级 git 技术，它几乎是获取合并、提交推送。

我只是不明白为什么提交从我的历史中消失了。它不应该在那里，或者当存在合并冲突并且有人解决并最终执行合并提交时是否会删除历史记录？

我们在 bitbucket 上托管我们的 repo，我可以去那里找到我的提交以及更新文件所需的代码，但这似乎不太理想。

我们都是 git 的新手，并且第一次在我们的一个项目中使用它，所以我们对这一切都很无知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T18:49:15.403

Git 的内部结构是一个[DAG](http://en.wikipedia.org/wiki/Directed_acyclic_graph)，分支只是指向提交的可变指针（标签是不可变指针）。Git 的日志只显示通过回溯这些分支/提交指针可以访问的提交。不知何故，分支指针发生了变化，以至于您的提交变得无法通过回溯访问。为了导致这种情况发生了一些破坏性的事情，比如变基。

由于您找到了提交，您可以通过执行以下操作查看它适合树的位置：

```
git checkout -b temp_branch
git reset --hard <lost-commit-sha1>
gitk --all 
```

temp_branch 现在指向您的提交，您可以通过查看 DAG 来了解发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:47:54.843

回答你的问题：有人重写了分支历史。没有其他方法可以丢失推送的提交。

避免这种情况的解决方案：将非快进推送限制在大多数开发人员和培训中。

# webmatrix - 防止主机数据库 WebMatrix 的意外更新

> ID：10016159
> 
> 赞同：0
> 
> 时间：2012-04-04T17:18:37.073
> 
> 标签：webmatrix, msdeploy, web-deployment-project

我在开发过程中使用 WebMatrix 部署文件和数据库。我想在开发后继续使用它来更新主机上的文件。我还想将我的本地数据库同步到主机数据库，但绝不会反过来。我害怕不小心覆盖主机上的数据库。

如何在防止主机上的数据库意外更新的同时做我想做的事？本质上，我正在寻找一种方法来告诉 WebMatrix 主机数据库是只读的，不能更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T04:39:02.297

您可以将开发项目链接到实时数据库。这样，您仍然可以在使用实际数据进行开发的同时离线开发文件。如果您链接到数据库，WebMatrix 将不会尝试更新它，因为它已经在使用它。是的，如果您出于开发目的进行更改，它将在实时站点上进行更改。但是，如果您只是开发网页，则不必担心。要链接到您的数据库，只需转到数据库工作区并单击“新建连接”图标。请记住，在此之后对 WebMatrix 中数据库的任何更改都会立即发送到您的数据库。

# javascript - 只使用来自 twitter bootstrap 的插件有意义吗？

> ID：10016160
> 
> 赞同：2
> 
> 时间：2012-04-04T17:18:50.253
> 
> 标签：javascript, twitter-bootstrap

我目前没有使用 twitter bootstrap，但我确实喜欢其中的一些组件。当我不使用框架的其余部分时，使用该框架中的一些插件是否有意义？例如 bootstrap-alert.js。我也不确定插件与框架的其余部分是如何相互排斥的。我是否必须加载所有内容才能使用一对，在这种情况下，在其他地方寻找漂亮的弹出框等可能更有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:34:30.820

使用网站的自定义部分创建一个较小版本的框架，其中仅包含您要使用的组件。我已经将他们的一些组件与 ExtJS 结合使用来获得我想要的外观。即按钮、徽章和警报。

[自定义 Twitter 引导程序](http://twitter.github.com/bootstrap/download.html)

# jquery - Jquery & CSS 位置绝对中心

> ID：10016161
> 
> 赞同：0
> 
> 时间：2012-04-04T17:18:53.717
> 
> 标签：jquery, css, image, center

我的图像有点问题。它实际上是一个 jquery 幻灯片。图像的位置是绝对的，这使得将它们居中变得很棘手......

这对我有用

```
 #slideshow IMG {
    position:absolute;
    top:0;
    left:0;
    z-index:8;
    opacity:0.0;
    width:100%;
    text-align:center;
} 
```

但宽度为 100% 时，它使图像 100% 成为 div 的内部。有些图像比其他图像更薄，我只希望那些图像居中。宽度为 100% 时，它会拉伸较薄的图像。

这是HTML

```
<div class="contentImages">

<div id="slideshow">

<img src="upload/<?php echo $array['image'] ?>" height="200" class="active" />

<img src="upload/<?php echo $array['image2'] ?>" height="200" />

<img src="upload/<?php echo $array['image3'] ?>" height="200" />

</div></div> 
```

和 CSS 的其余部分

```
#slideshow {
    position:relative;
    height:200px;
    overflow:hidden;
    float:left;
    width:250px;
}

.contentImages{
    border:1px solid #CCC; 
    padding:10px; 
    margin:20px auto 0; 
    position:relative;
    width:750px; 
    overflow:hidden;
} 
```

我尝试将文本对齐应用到幻灯片 div，但这没有做任何事情，我什至尝试将幻灯片 div 设置为绝对位置和文本对齐中心，但没有（有或没有100% 或 250px 的宽度；) 工作，它可能只显示图像的 10%，而且它们也没有居中。

长话短说，如何在不拉伸薄图像的情况下使图像居中？

我希望这是有道理的。

谢谢。

- - 添加 - - -

我已经尝试使用此代码进行 jQuery 溃败

```
$(window).bind('load', function() {  
    var img_width = $("#slideshow img").width();
    $("#slideshow img").css("width", img_width);
    alert(img_width);
}); 
```

但是对于所有图像，甚至是薄图像，警报都会返回 255。

我也调整了我的css

```
#slideshow IMG {
    position:absolute;
    top:0;
    z-index:8;
    opacity:0.0;
    text-align:center;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:23:49.703

尝试

```
#slideshow img{
    ...
    left: 50%;
    margin-left: -/*half the width of the image in pixels*/; (-85px)
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:29:53.107

乔的答案是诀窍，但因为如果你的浏览器屏幕小于图像宽度，你应该使用它：[http ://d-graff.de/fricca/center.html](http://d-graff.de/fricca/center.html)

这是用绝对值解决居中问题的诀窍，它使用了 Joe 的技术，但稍微改进了一点。

* * *

编辑回答评论：

像这样使用它：

```
<div id="distance"></div>
<img src="img/some-img.png" alt="some alt"> 
```

您可以在网站的 broncode 中找到 CSS（带注释）。

# sql-server-2008 - MSSMS 2008 rs 错误

> ID：10016165
> 
> 赞同：0
> 
> 时间：2012-04-04T17:19:01.203
> 
> 标签：sql-server-2008

**这是我现在的桌子。**

```
USE [PS_GameData]
GO

/****** Object:  Table [dbo].[Guilds]    Script Date: 04/04/2012 11:58:35 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [dbo].[Guilds](
    [RowID] [int] IDENTITY(1,1) NOT NULL,
    [GuildID] [int] NOT NULL,
    [GuildName] [varchar](30) NOT NULL,
    [MasterUserID] [varchar](12) NOT NULL,
    [MasterCharID] [int] NOT NULL,
    [MasterName] [varchar](30) NOT NULL,
    [Country] [tinyint] NOT NULL,
    [TotalCount] [smallint] NOT NULL,
    [GuildPoint] [int] NOT NULL,
    [Del] [tinyint] NOT NULL,
    [CreateDate] [datetime] NOT NULL,
    [DeleteDate] [datetime] NULL,
 CONSTRAINT [PK_Guilds] PRIMARY KEY CLUSTERED 
(
    [GuildID] ASC
) WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS =   ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

ALTER TABLE [dbo].[Guilds] ADD  CONSTRAINT [DF_Guilds_Del]  DEFAULT ((0)) FOR [Del]
GO 
```

**我正在尝试将其更改为此。**

```
USE [PS_GameData]
GO
/****** Object: Table [dbo].[Guilds] Script Date: 09/29/2011 06:36:30 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Guilds](
    [RowID] [int] IDENTITY(1,1) NOT NULL,
    [GuildID] [int] NOT NULL,
    [GuildName] [varchar](30) COLLATE Chinese_PRC_Stroke_CI_AI NOT NULL,
    [MasterUserID] [varchar](12) COLLATE Chinese_PRC_Stroke_CI_AI NOT NULL,
    [MasterCharID] [int] NOT NULL,
    [MasterName] [varchar](30) COLLATE Chinese_PRC_Stroke_CI_AI NOT NULL,
    [Country] [tinyint] NOT NULL,
    [TotalCount] [smallint] NOT NULL,
    [GuildPoint] [int] NOT NULL,
    [Del] [tinyint] NOT NULL CONSTRAINT [DF_Guilds_Del] DEFAULT (0),
    [CreateDate] [datetime] NOT NULL,
    [DeleteDate] [datetime] NULL,
CONSTRAINT [PK_Guilds] PRIMARY KEY CLUSTERED 
(
    [GuildID] ASC
)WITH (PAD_INDEX = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]

GO
SET ANSI_PADDING OFF 
```

这是我的错误：

```
Msg 2714, Level 16, State 6, Line 2
There is already an object named 'Guilds' in the database.
Msg 1781, Level 16, State 1, Line 2
Column already has a DEFAULT bound to it.
Msg 1750, Level 16, State 0, Line 2
Could not create constraint. See previous errors. 
```

我已经删除了表 Guilds 并尝试创建另一个名为 guilds 的表并插入脚本，但脚本保持不变或者它说 Guilds 已经在数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T01:11:18.457

尝试在新 DDL 的开头显式删除表：

```
USE [PS_GameData]
GO
if exists(
    select 1
    from sys.objects o
    inner join sys.schemas s on s.schema_id=o.schema_id
    where o.[type]='U'
    and s.name='dbo'
    and o.name='Guilds'
)
drop table [dbo].[Guilds];
go

/****** Object: Table [dbo].[Guilds] Script Date: 09/29/2011 06:36:30 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Guilds](
    [RowID] [int] IDENTITY(1,1) NOT NULL,
    [GuildID] [int] NOT NULL,
    [GuildName] [varchar](30) COLLATE Chinese_PRC_Stroke_CI_AI NOT NULL,
    [MasterUserID] [varchar](12) COLLATE Chinese_PRC_Stroke_CI_AI NOT NULL,
    [MasterCharID] [int] NOT NULL,
    [MasterName] [varchar](30) COLLATE Chinese_PRC_Stroke_CI_AI NOT NULL,
    [Country] [tinyint] NOT NULL,
    [TotalCount] [smallint] NOT NULL,
    [GuildPoint] [int] NOT NULL,
    [Del] [tinyint] NOT NULL CONSTRAINT [DF_Guilds_Del] DEFAULT (0),
    [CreateDate] [datetime] NOT NULL,
    [DeleteDate] [datetime] NULL,
CONSTRAINT [PK_Guilds] PRIMARY KEY CLUSTERED 
(
    [GuildID] ASC
)WITH (PAD_INDEX = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]

GO
SET ANSI_PADDING OFF
GO 
```

# java - 更新表的特定字段，而不考虑休眠中的其他字段

> ID：10016167
> 
> 赞同：0
> 
> 时间：2012-04-04T17:19:05.167
> 
> 标签：java, sql, hibernate, hibernate-mapping

我的桌子上有很多信息。从视图页面更新此表时，我没有加载所有信息。

下面是我使用**休眠更新表的代码**

```
HibernateTemplate hibernateTemplateObj = getHibernateTemplate();
        hibernateTemplateObj.update(myEntityBean); 
```

以上是更新字段，但在我的视图页面上不可见的字段将更新为空白。

所以，我用了下面一个...

```
HibernateTemplate hibernateTemplateObj = getHibernateTemplate();
        hibernateTemplateObj.update("myRequiredField", myEntityBean); 
```

根据[此处](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/orm/hibernate3/HibernateTemplate.html#update%28java.lang.String,%20java.lang.Object%29)的文档，它说如果我使用 update("string",entity) 它将更新该字段。但它的工作方式不一样。

任何人都可以提出一些建议。

* * *

我找到了一些帖子。

[后 1](https://stackoverflow.com/questions/6790602/updating-a-field-of-a-object-in-hibernate) [后 2](https://stackoverflow.com/questions/7210947/hibernate-idempotent-update)

它说，我需要创建查询。但我不知道如何从中创建查询？如果有人有任何想法..请帮忙。我认为这是这些帖子中的已知问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T06:31:10.230

您可以像这样使用 Session 对象创建查询。

```
 SessionFactory factory= HibernateUtil.getSessionFactory();  
    session = factory.openSession();  
    session.beginTransaction();  
    Query query = session.createQuery("Select c.productList from Cart c Where c.cartId=:cartId"); 
    query.setParameter("cartId", cart.getCartId());
    List productList=(List) query.list();
    session.getTransaction().commit(); 
```

虽然您知道应该从查询中返回哪种对象，但您可以强制转换并使用它。您可以编写本机查询或休眠查询，但我认为休眠查询更容易。

# javascript - “不是函数”来自 Period Updater 的 Stop 函数的错误

> ID：10016169
> 
> 赞同：2
> 
> 时间：2012-04-04T17:19:13.583
> 
> 标签：javascript, jquery

```
$.PeriodicalUpdater.stop(); 
```

...给我...

```
TypeError: Result of expression '$.PeriodicalUpdater.stop' [undefined] is not a function. 
```

我已经仔细检查了[用户手册](https://github.com/RobertFischer/JQuery-PeriodicalUpdater)，我无法弄清楚为什么它不能正常工作。该错误在大多数情况下是无害的，只是用户的浏览器不会停止进行不再需要的服务器调用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:22:59.453

医生说

> 函数调用返回一个句柄。您可以在此句柄上调用 .stop() 以停止更新并忽略任何后续响应。如果已触发最大调用次数 .stop() 或 autoStop，您可以使用句柄上的 .restart() 重新启动更新程序。这个句柄也作为第四个参数传递给回调函数。

所以应该是

```
var handle =$.PeriodicalUpdater(url, options);
handle.stop(); 
```

编辑 - 在您发表评论后，尝试

```
$.PeriodicalUpdater( url, { options, function(remoteData, success, xhr, handle){ 
  if(condition){ 
     handle.stop(); 
   } 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:27:13.400

从手册

> 函数调用返回一个句柄。您可以在此句柄上调用 .stop() [...]

我认为您必须在句柄上调用 stop() 。

前任：

```
var handle = $.PeriodicalUpdater('path',{},func);
handle.stop(); 
```

# mysql - 在 MySQL 数据库导出中添加表名

> ID：10016170
> 
> 赞同：1
> 
> 时间：2012-04-04T17:19:14.167
> 
> 标签：mysql, export

导出 mysql 转储时是否可以在所有表​​中添加一些文本。

例如：如果表被命名`chapters`，我想在它前面加上`old_`它，所以它变成`old_chapters`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:11:31.623

根据架构的复杂性，您可以使用精心设计的命令来完成此操作，该`sed`命令会查找所有表引用并在表名前加上“old_”。

例如，此命令将转储您的模式和数据，并将 old_ 前缀添加到 drop/create table 语句以及 lock/alter table 和 insert 语句：

```
mysqldump your_schema | sed -e 's/DROP TABLE IF EXISTS `/DROP TABLE IF EXISTS `old_/' -e 's/CREATE TABLE `/CREATE TABLE `old_/' -e 's/INSERT INTO `/INSERT INTO `old_/' -e 's/LOCK TABLES `/LOCK TABLES `old_/' -e 's/ALTER TABLE `/ALTER TABLE `old_/' 
```

但是，该命令不会为以下任何类型的表引用添加表前缀：

*   外键约束
*   意见
*   触发器
*   存储的例程

# php - 为什么不呈现已发送邮件的 html？

> ID：10016174
> 
> 赞同：1
> 
> 时间：2012-04-04T17:19:43.763
> 
> 标签：php, html-email

我的脚本发送电子邮件，但它不呈现 html 标签。我不知道为什么不。

```
$email = $row['email'];

$mail_body = '<html>
<body>

<p>hello,'.$name.'</p>
<p>this is a testing email </p>
<hr />
<p>by server</p>
</body>
</html>';
$subject = "Better website";
$to = "$email";

$headers = "From: mailscript@hotmail.com\r\n";
$headers .= "Content-Type: text/html\r\n";

$mail_result = mail($to, $subject, $mail_body, $headers); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:22:49.593

尝试设置 mime 类型以及[mail()的手册中所示](http://php.net/manual/en/function.mail.php)

```
// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T23:05:20.027

正如 Jrod 已经回答的那样，您需要添加标题

```
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
```

但我发现这个最近把我搞砸了，不得不把它评论出来：

```
$headers  = 'MIME-Version: 1.0' . "\r\n"; 
```

# c# - 没有主窗口的屏幕截图

> ID：10016177
> 
> 赞同：0
> 
> 时间：2012-04-04T17:19:52.103
> 
> 标签：c#, wpf, screen-capture

我想在没有窗口的情况下进行屏幕截图。我目前隐藏我的主窗口拍摄桌面的屏幕截图，然后让我的主窗口再次可见。是否可以在不必隐藏我的窗口的情况下实现相同的功能？

如果您对我为什么要尝试实现该功能感到好奇，请查看我要解决的[这个问题。](https://stackoverflow.com/questions/10004802/create-vista-glass-effect-on-wpf-with-custom-color)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:29:27.580

尝试过类似 Jing 或 SnagIt 的东西吗？SnagIt 似乎是屏幕捕获工具中功能最全的。因此，如果有任何东西，那就是 SnagIt。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:41:08.930

您可以使用[RenderTargetBitmap](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap.aspx)类将您的 Visual 转换为位图。

# android - 在 Android 上检测触摸区域

> ID：10016181
> 
> 赞同：5
> 
> 时间：2012-04-04T17:20:03.157
> 
> 标签：android

是否可以检测到每个被触摸的像素？更具体地说，当用户触摸屏幕时，是否可以跟踪用户触摸的点簇的所有 xy 坐标？我如何区分用户何时用拇指绘图和何时用指尖绘图？我想根据用户触摸屏幕的方式来反映画笔差异，并且还想跟踪随着时间的推移被触摸的所有像素的 xy 坐标。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T17:36:32.210

这将非常棘手，主要是因为每部 android 手机的行为都会有所不同。相比之下，有些触摸屏设备非常、非常敏感，而有些则基本上“乏味”。

这听起来更像是您想要跟踪压力——用户在屏幕上按下的力度有多大——这实际上在 android 设备上得到了支持。

我认为您的一些答案可以通过监视**所有**触摸事件来找到 - 实际上，大多数应用程序会忽略大量事件或对事件执行某种“平滑”，因为当用户正在操作屏幕。但是，这样做可能会对您的应用程序性能产生负面影响。

我建议您查看压力灵敏度并根据压力计算主要触摸点周围的圆形区域，然后围绕该区域构建画笔。

另一个想法是在您尝试做的事情中加入更多的手势方法 - 例如，想象用两个手指尖（食指和中指）一起触摸屏幕并将中指围绕食指滚动或简单地移动中指相对于食指上下。两个手指将一起移动以进行绘画。这可用于动态操纵绘图角度，甚至可以在一组预选的画笔之间切换，或者可以在绘画时动态更改画笔大小。

我希望看到上面的一些想法被实现——当你准备好你的应用程序时让我知道。

祝你好运！罗德尼

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T17:31:33.897

如果您的图像上有一个侦听器，它将响应该边界框内的触摸，基本上。

所以，为了得到你想要的，你可以，但是，我永远不会这样做，在每个像素或一小组像素周围创建一个框，然后听一听。

无论您在哪里触摸，它都可能触发一个事件，然后您可以做出相应的反应。

我想不出任何其他解决方案可以一次为您提供一个人触摸的每个像素。

不过，您可能想阅读多点触控，因为这里有一些建议可以帮助您：

[http://android-developers.blogspot.com/2010/06/making-sense-of-multitouch.html](http://android-developers.blogspot.com/2010/06/making-sense-of-multitouch.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:30:17.330

如果您正在寻找一种将内容视图作为*View* after的方法`Activity#setContentView(int)`，那么您可以在布局的最外层元素上设置一个 id：

`android:id="@+id/entire_view"``onCreate()`并在您的方法中引用它`setContentView`：

```
View view = getViewById(R.id.entire_view);
view.setOnTouchListener( ... ); 
```

# java - 日期时间字段验证器

> ID：10016193
> 
> 赞同：1
> 
> 时间：2012-04-04T17:21:08.210
> 
> 标签：java, validation, wicket

我创建了一个自定义验证器来验证 dateTimefield。我的问题是我无法将它添加到 datetimefield 变量

> 类型中的方法 add( `IValidator<? super Date>`)`FormComponent<Date>`不适用于参数（DateTimeFieldValidator）

这是我得到的错误。

是否有任何标准方法来验证 DateTimeField？

```
package validators;

import java.text.ParsePosition;
import java.text.SimpleDateFormat;

import org.apache.wicket.extensions.yui.calendar.DateTimeField;
import org.apache.wicket.validation.IValidatable;
import org.apache.wicket.validation.IValidator;
import org.apache.wicket.validation.ValidationError;

public class DateTimeFieldValidator implements IValidator<DateTimeField> {
/**
 * 
 */
private static final long serialVersionUID = 2342344609244L;
public DateTimeFieldValidator() {

}

private void error(IValidatable<DateTimeField> validatable, String errorKey) {
    ValidationError error = new ValidationError();
    error.addMessageKey(getClass().getSimpleName() + "." + errorKey);
    validatable.error(error);
}

public void validate(IValidatable<DateTimeField> validatable) {

    DateTimeField dateTime = (DateTimeField) validatable.getValue();

    if ( dateTime== null){
        error(validatable, "invalid.datetime");
    }
    else{

        if( dateTime.getHours()!=null){
            if( dateTime.getHours()>12  || dateTime.getHours()<0){

                error(validatable, "invalid.hour");
            }
        }
        else{
            error(validatable, "invalid.hour");
        }

        if(dateTime.getMinutes()!=null){
            if( dateTime.getMinutes() > 60 ){

                error(validatable, "invalid.hour");
            }
        }else {
            error(validatable, "invalid.minutes");
        }

        if( dateTime.getDate() == null ){
            error(validatable, "invalid.date");
        }

    }  
}
boolean isLegalDate(String s) {
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
    sdf.setLenient(false);
    return sdf.parse(s, new ParsePosition(0)) != null;
}

} 
```

这就是我添加验证器的方式。

```
startDateTimeField.add(new DateTimeFieldValidator()); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T17:33:49.107

您的 DateTimeFieldValidator 必须实现`IValidator<Date>`而不是`IValidator<DateTimeField>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:43:02.997

我最终验证了 datetimefield 以下方式.. 并找出 datetimefield( yui ) 已内置验证 - 它实际上负责所有基本验证。您所要做的就是在文件夹中放置一个 XXX.properties 文件 -

您还可以添加自己的错误键和消息 - 就像我使用 startDate.after.enddate

```
 IFormValidator validator = new AbstractFormValidator() {
        /**
         * 
         */
        private static final long serialVersionUID = -3252346839511722L;

        public FormComponent<?>[] getDependentFormComponents() {
            return new FormComponent[] { startField, endField };
        }
        ValidationError error = new ValidationError();

        public void validate(Form<?> form) {

           Date startDate = (Date) startField.getConvertedInput();
           if(endField.isEnabled()){
                Date endDate = (Date) endField.getConvertedInput();

                if (endDate.before(startDate)){

                    error.addMessageKey(getClass().getSimpleName()  + "startDate.after.enddate");
                    startField.error(error);
                }
           }
        }
    };
    logForm.add(validator ); 
```

# jquery - 当 Twitter Bootstrap 模式窗口包含 Rails 表单助手时显示错误

> ID：10016195
> 
> 赞同：3
> 
> 时间：2012-04-04T17:21:16.103
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

**我在询问是否使用带有 Rails 表单助手的 Twitter Bootstrap 模式窗口并显示表单验证错误消息。我正在使用带有 Rails 3.2 的 Twitter Bootstrap 2.0。**

我在 Twitter Bootstrap 模式窗口中有一个表单。页面上有一个按钮可以打开模式窗口并显示表单。一切都很好，除了当表单提交错误时，页面显示并且看不到错误消息，因为表单位于（最初未显示的）模式窗口内。

我需要使用 jQuery 来测试表单是否包含 Rails 错误消息并覆盖“display: none;” 呈现页面时的样式（或切换模式窗口以显示）。

我尝试将以下代码添加到我的 assets/javascripts/application.js 文件中，但它不起作用：

```
$('document').ready(function() {
  if ($('#error_explanation').length > 0) {
    $("#request_invite").css("display", "block");
  }
}) 
```

并且：

```
$('document').ready(function() {
  if ($('#error_explanation').length > 0) {
    $("#request_invite").modal('toggle');
  }
}) 
```

**当出现错误消息时，我需要做什么来显示模式窗口或将其打开？**

下面是在 Twitter Bootstrap 模式窗口 (Haml) 中显示表单的代码：

```
#request-invite.modal{:style => "display: none;"}
  = form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f|
    .modal-header
      %a.close{"data-dismiss" => "modal"} ×
      %h3 Request Invitation
    .modal-body
      - if @user.errors.any?
        #error_explanation
          %ul
            - @user.errors.full_messages.each do |msg|
              %li= msg
      %p
        = f.label :email
        %br/
        = f.email_field :email
    .modal-footer
      = f.submit "Request Invitation", :class => "btn.btn-success"
      %a.btn{"data-dismiss" => "modal", :href => "#"} Close
#romance-copy{:style => "text-align: center; margin-top: 100px"}
  %h2 Want in?
#call-to-action{:style => "text-align: center; margin-top: 100px"}
  %a.btn.btn-primary.btn-large{"data-toggle" => "modal", :href => "#request-invite"} Request invite 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T19:52:08.980

好像是笔误？您在 Haml 中的 div 具有 ID request-invite（带有破折号）。但是，您的 jQuery 正在寻找带有下划线的 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T00:15:10.283

我想提供另一种选择。您使用的方式应该可以，但是为什么不使用 AJAX 在有任何错误时显示错误消息。响应 JS 所做的是添加额外的样式以显示错误消息。

> 我需要使用 jQuery 来测试表单是否包含 Rails 错误消息并覆盖“display: none;” 呈现页面时的样式（或切换模式窗口以显示）。

看看[http://www.twitmark.me/](http://www.twitmark.me/)。尝试使用推特登录。输入一个伪造的邀请码，看看错误是什么样的。这是一个更好的解决方案吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T08:33:43.027

正如@wanghq（部分由@miked）所述，我认为最好的方法是使用AJAX 在模态中呈现html 并提交表单数据。这样，所有逻辑都委托给服务器端，仅使用 JS 来实现*效果*并保持视图干净（视图内部不涉及助手或逻辑）。

有了这个解决方案，当 JS 在客户端上不起作用时，您可以通过使用相同的控制器操作来呈现表单，从而优雅地降级。一个简单的例子：

```
def new
  @user = User.new
  # some stuff...
  render :handler => 'haml', :layout => !request.xhr?
end

# similar logic should be used for #create action 
```

对于 (d)html 部分，您可以使用 ruby​​ 来检测它是否应该因为错误而显示。我的意思是这样的（如果需要，您可以编写一个助手）：

```
#request-invite.modal{:style => "display: #{ @user.errors.any? ? 'block' : 'none' };"} 
```

附带说明一下，使用 simple_form 2.0.x，您将获得 twitter-bootstrap 标记支持（我的意思是，它将为您的表单生成引导友好的标记）。通过这种方式，您将干掉模板内的一些逻辑（例如：检查@user.errors 以显示错误消息）

这样，你不应该需要 JS 来做检查；）

我的 2 美分 ;-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T19:52:21.093

我可能误解了这个问题，但据我所知，当模式加载时，您的 error_explanation div 没有隐藏（显示：无），它不存在，因为它以 if @user.errors.any 为条件？堵塞。因此，你扔给它的 javascript 并不重要，它不存在。

对于初学者，请尝试：

```
.modal-body
  #error_explanation
    - if @user.errors.any?
      %ul
        - @user.errors.full_messages.each do |msg|
          %li= msg 
```

这样，div 将存在，并且 ul 将仅在显示错误时才显示项目。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T20:53:42.427

为什么需要 jQuery？为什么不直接使用已有的条件？

这段代码很烂，你可能会清理它（将它移动到帮助程序或其他东西中），但你会明白的。

```
- def display?; @user.errors.any? ? "block;" : "none;"; end;
#request-invite.modal{:style => "display: " + display? } 
```

# java - Java 进程崩溃 - Java 终结器

> ID：10016198
> 
> 赞同：0
> 
> 时间：2012-04-04T17:21:18.593
> 
> 标签：java, crash

这发生在使用 JGroups 库和用于存储和检索文本文件的简单 RMI 服务器的网络应用程序上。通常它会在我关闭应用程序时发生，尽管有时它会在运行时发生。我不确定这是否发生在 Windows 上，因为我最近没有测试过。发生此错误时，我会在 netbeans 控制台上打印出有关无效内存访问的信息。欢迎就可能的原因提出任何建议。

```
Process:         java [16180]
Path:            /usr/bin/java
Identifier:      com.apple.javajdk16.cmd
Version:         1.0 (1.0)
Code Type:       X86-64 (Native)
Parent Process:  java [3237]

Date/Time:       2012-04-04 20:02:35.865 +0300
OS Version:      Mac OS X 10.7.3 (11D50)
Report Version:  9

Interval Since Last Report:          213989 sec
Crashes Since Last Report:           -4
Per-App Interval Since Last Report:  22680 sec
Per-App Crashes Since Last Report:   -2
Anonymous UUID:                      368E726E-03C9-45EA-A019-631C4374BC4D

Crashed Thread:  8  Java: Finalizer

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: 0x000000000000000d, 0x0000000000000000

VM Regions Near 0:
--> 
    __TEXT                 00000001035c2000-00000001035ca000 [   32K] r-x/rwx SM=COW  /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java

Application Specific Information:
objc_msgSend() selector name: release
objc[16180]: garbage collection is OFF

Java information:
 Exception type: Bus Error (0xa) at pc=7fff95c00390

 Java VM: Java HotSpot(TM) 64-Bit Server VM (20.6-b01-413 mixed mode macosx-amd64)

Current thread (7f86d184e800):  JavaThread "Finalizer" daemon [_thread_in_native, id=178642944, stack(10a95e000,10aa5e000)]
Stack: [10a95e000,10aa5e000]
Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  sun.font.AppleNativeStrike.disposeNativeStrikePtr(J)V+0
j  sun.font.AppleNativeStrike.finalize()V+13
v  ~StubRoutines::call_stub
j  java.lang.ref.Finalizer.invokeFinalizeMethod(Ljava/lang/Object;)V+0
j  java.lang.ref.Finalizer.runFinalizer()V+45
j  java.lang.ref.Finalizer.access$100(Ljava/lang/ref/Finalizer;)V+1
j  java.lang.ref.Finalizer$FinalizerThread.run()V+11
v  ~StubRoutines::call_stub

Java Threads: ( => current thread )
  7f86d18be000 JavaThread "Image Fetcher 0" daemon [_thread_in_Java, id=288497664, stack(111222000,111322000)]
  7f86d18f4800 JavaThread "ViewHandler,Default Channel,ILMBP-61076" [_thread_blocked, id=287436800, stack(11111f000,11121f000)]
  7f86d3829000 JavaThread "Connection.Sender [192.168.1.2:10900 - 192.168.1.2:61215],Default Channel,ILMBP-61076" [_thread_blocked, id=286375936, stack(11101c000,11111c000)]
  7f86d3828000 JavaThread "Connection.Receiver [192.168.1.2:10900 - 192.168.1.2:61215],Default Channel,ILMBP-61076" [_thread_in_native, id=279425024, stack(11097b000,110a7b000)]
  7f86d3830800 JavaThread "Connection.Sender [192.168.1.2:10900 - 192.168.1.2:61210],Default Channel,ILMBP-61076" [_thread_blocked, id=276242432, stack(110672000,110772000)]
  7f86d380f800 JavaThread "Connection.Receiver [192.168.1.2:10900 - 192.168.1.2:61210],Default Channel,ILMBP-61076" [_thread_in_native, id=180469760, stack(10ab1c000,10ac1c000)]
  7f86d1a64800 JavaThread "Timer-5,Default Channel,ILMBP-61076" daemon [_thread_blocked, id=338313216, stack(1141a4000,1142a4000)]
  7f86d3806800 JavaThread "OOB-2,Default Channel,ILMBP-61076" [_thread_blocked, id=337252352, stack(1140a1000,1141a1000)]
  7f86d3805800 JavaThread "OOB-1,Default Channel,ILMBP-61076" [_thread_blocked, id=336191488, stack(113f9e000,11409e000)]
  7f86d3804800 JavaThread "Timer-4,Default Channel,ILMBP-61076" daemon [_thread_blocked, id=335130624, stack(113e9b000,113f9b000)]
  7f86d3804000 JavaThread "Timer-3,Default Channel,ILMBP-61076" daemon [_thread_blocked, id=334069760, stack(113d98000,113e98000)]
  7f86d3803000 JavaThread "pool-4-thread-1" [_thread_blocked, id=331956224, stack(113b94000,113c94000)]
  7f86d31fa800 JavaThread "GC Daemon" daemon [_thread_blocked, id=281546752, stack(110b81000,110c81000)]
  7f86d18a9000 JavaThread "RMI RenewClean-[192.168.1.2:61200]" daemon [_thread_blocked, id=280485888, stack(110a7e000,110b7e000)]
  7f86d19d0800 JavaThread "RMI Scheduler(0)" daemon [_thread_blocked, id=278364160, stack(110878000,110978000)]
  7f86d18f7000 JavaThread "Incoming-2,Default Channel,ILMBP-61076" [_thread_blocked, id=277303296, stack(110775000,110875000)]
  7f86d18f3800 JavaThread "Incoming-1,Default Channel,ILMBP-61076" [_thread_in_Java, id=188440576, stack(10b2b6000,10b3b6000)]
  7f86d31b6800 JavaThread "Timer-2,Default Channel,ILMBP-61076" daemon [_thread_blocked, id=275181568, stack(11056f000,11066f000)]
  7f86d1ae2000 JavaThread "ConnectionMap.Acceptor,null,null" [_thread_in_native, id=274120704, stack(11046c000,11056c000)]
  7f86d31b6000 JavaThread "TransferQueueBundler,Default Channel,ILMBP-61076" [_thread_blocked, id=273059840, stack(110369000,110469000)]
  7f86d1ae1800 JavaThread "DiagnosticsHandler,Default Channel,ILMBP-61076" daemon [_thread_in_native, id=271998976, stack(110266000,110366000)]
  7f86d1acc800 JavaThread "Poller SunPKCS11-Darwin" daemon [_thread_blocked, id=270938112, stack(110163000,110263000)]
  7f86d1acb000 JavaThread "Timer runner-1,Default Channel,ILMBP-61076" daemon [_thread_blocked, id=269524992, stack(11000a000,11010a000)]
  7f86d3290800 JavaThread "SwingWorker-pool-1-thread-1" daemon [_thread_blocked, id=268464128, stack(10ff07000,110007000)]
  7f86d1a06000 JavaThread "TimerQueue" daemon [_thread_blocked, id=267403264, stack(10fe04000,10ff04000)]
  7f86d1801800 JavaThread "DestroyJavaVM" [_thread_blocked, id=67104768, stack(103eff000,103fff000)]
  7f86d31ca000 JavaThread "AWT-EventQueue-0" [_thread_blocked, id=261455872, stack(10f858000,10f958000)]
  7f86d18c6800 JavaThread "Java2D Disposer" daemon [_thread_blocked, id=260395008, stack(10f755000,10f855000)]
  7f86d31ec800 JavaThread "AWT-Shutdown" [_thread_blocked, id=192757760, stack(10b6d4000,10b7d4000)]
  7f86d3194800 JavaThread "AWT-AppKit" daemon [_thread_in_native, id=2066884960, stack(7fff629c2000,7fff631c2000)]
  7f86d3054800 JavaThread "Low Memory Detector" daemon [_thread_blocked, id=185786368, stack(10b02e000,10b12e000)]
  7f86d3054000 JavaThread "C2 CompilerThread1" daemon [_thread_blocked, id=184725504, stack(10af2b000,10b02b000)]
  7f86d3053000 JavaThread "C2 CompilerThread0" daemon [_thread_blocked, id=183664640, stack(10ae28000,10af28000)]
  7f86d3052800 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=182603776, stack(10ad25000,10ae25000)]
  7f86d1862800 JavaThread "Surrogate Locker Thread (Concurrent GC)" daemon [_thread_blocked, id=181542912, stack(10ac22000,10ad22000)]
=>7f86d184e800 JavaThread "Finalizer" daemon [_thread_in_native, id=178642944, stack(10a95e000,10aa5e000)]
  7f86d304d800 JavaThread "Reference Handler" daemon [_thread_blocked, id=177582080, stack(10a85b000,10a95b000)]
Other Threads:
  7f86d3049000 VMThread [stack: 10a758000,10a858000] [id=176521216]
  7f86d305e000 WatcherThread [stack: 10b131000,10b231000] [id=186847232]

VM state:not at safepoint (normal execution)
VM Mutex/Monitor currently owned by a thread: None

Heap
 par new generation   total 19136K, used 2958K [7f3000000, 7f44c0000, 7f44c0000)
  eden space 17024K,   4% used [7f3000000, 7f30d3a20, 7f40a0000)
  from space 2112K, 100% used [7f40a0000, 7f42b0000, 7f42b0000)
  to   space 2112K,   0% used [7f42b0000, 7f42b0000, 7f44c0000)
 concurrent mark-sweep generation total 63872K, used 5065K [7f44c0000, 7f8320000, 7fae00000)
 concurrent-mark-sweep perm gen total 37696K, used 26941K [7fae00000, 7fd2d0000, 800000000)

Code Cache  [10416d000, 1043de000, 10716d000)
 total_blobs=657 nmethods=137 adapters=482 free_code_cache=49396928 largest_free_block=18368

Virtual Machine Arguments:
JVM Args: -Dfile.encoding=UTF-8 
Java Command: gui.AppInterface
Launcher Type: SUN_STANDARD
Physical Memory: Page Size = 4k, Total = 7936M, Free = 29M

Thread 0:: Dispatch queue: com.apple.main-thread
0   libsystem_kernel.dylib          0x00007fff96b6067a mach_msg_trap + 10
1   libsystem_kernel.dylib          0x00007fff96b5fd71 mach_msg + 73
2   com.apple.CoreFoundation        0x00007fff8da8d6fc __CFRunLoopServiceMachPort + 188
3   com.apple.CoreFoundation        0x00007fff8da95e64 __CFRunLoopRun + 1204
4   com.apple.CoreFoundation        0x00007fff8da95676 CFRunLoopRunSpecific + 230
5   com.apple.HIToolbox             0x00007fff918cb31f RunCurrentEventLoopInMode + 277
6   com.apple.HIToolbox             0x00007fff918d25c9 ReceiveNextEventCommon + 355
7   com.apple.HIToolbox             0x00007fff918d2456 BlockUntilNextEventMatchingListInMode + 62
8   com.apple.AppKit                0x00007fff8f274f5d _DPSNextEvent + 659
9   com.apple.AppKit                0x00007fff8f274861 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 135
10  libawt.jnilib                   0x000000010b4530a5 -[NSApplicationAWT nextEventMatchingMask:untilDate:inMode:dequeue:] + 124
11  com.apple.AppKit                0x00007fff8f27119d -[NSApplication run] + 470
12  libawt.jnilib                   0x000000010b3ff674 +[AWTStarter startAWT:] + 1495
13  libawt.jnilib                   0x000000010b3fefee -[CPerformer perform] + 93
14  com.apple.CoreFoundation        0x00007fff8daf075d -[NSObject performSelector:withObject:] + 61
15  com.apple.Foundation            0x00007fff8b562d94 __NSThreadPerformPerform + 214
16  com.apple.CoreFoundation        0x00007fff8da6f6e1 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17
17  com.apple.CoreFoundation        0x00007fff8da6ef4d __CFRunLoopDoSources0 + 253
18  com.apple.CoreFoundation        0x00007fff8da95d39 __CFRunLoopRun + 905
19  com.apple.CoreFoundation        0x00007fff8da95676 CFRunLoopRunSpecific + 230
20  java                            0x00000001035c6843 0x1035c2000 + 18499
21  java                            0x00000001035c629a 0x1035c2000 + 17050
22  java                            0x00000001035c3a98 0x1035c2000 + 6808

Thread 1:
0   libsystem_kernel.dylib          0x00007fff96b6067a mach_msg_trap + 10
1   libsystem_kernel.dylib          0x00007fff96b5fd71 mach_msg + 73
2   libclient64.dylib               0x0000000103813ed3 0x103800000 + 81619
3   libclient64.dylib               0x0000000103813da4 0x103800000 + 81316
4   libclient64.dylib               0x0000000103813d12 0x103800000 + 81170
5   libclient64.dylib               0x00000001038138ed 0x103800000 + 80109
6   libclient64.dylib               0x0000000103813712 0x103800000 + 79634
7   libclient64.dylib               0x00000001038cf65c 0x103800000 + 849500
8   libclient64.dylib               0x00000001038cf1c1 0x103800000 + 848321
9   java                            0x00000001035c5286 0x1035c2000 + 12934
10  libsystem_c.dylib               0x00007fff949a58bf _pthread_start + 335
11  libsystem_c.dylib               0x00007fff949a8b75 thread_start + 13

Thread 2:: Java: Exception Handler Thread
0   libsystem_kernel.dylib          0x00007fff96b6067a mach_msg_trap + 10
1   libsystem_kernel.dylib          0x00007fff96b5fd71 mach_msg + 73
2   libsystem_kernel.dylib          0x00007fff96b6031c mach_msg_server + 641
3   libclient64.dylib               0x0000000103814d99 0x103800000 + 85401
4   libclient64.dylib               0x0000000103814c53 0x103800000 + 85075
5   libclient64.dylib               0x0000000103813854 0x103800000 + 79956
6   libsystem_c.dylib               0x00007fff949a58bf _pthread_start + 335
7   libsystem_c.dylib               0x00007fff949a8b75 thread_start + 13

Thread 3:: Java: Gang worker#0 (Parallel GC Threads)
0   libsystem_kernel.dylib          0x00007fff96b6067a mach_msg_trap + 10
1   libsystem_kernel.dylib          0x00007fff96b5fd71 mach_msg + 73
2   libclient64.dylib               0x0000000103813ed3 0x103800000 + 81619
3   libclient64.dylib               0x0000000103813da4 0x103800000 + 81316
4   libclient64.dylib               0x0000000103813d12 0x103800000 + 81170
5   libclient64.dylib               0x00000001038138ed 0x103800000 + 80109
6   libclient64.dylib               0x0000000103813793 0x103800000 + 79763
7   libclient64.dylib               0x000000010382c578 0x103800000 + 181624
8   libclient64.dylib               0x0000000103813854 0x103800000 + 79956
9   libsystem_c.dylib               0x00007fff949a58bf _pthread_start + 335
10  libsystem_c.dylib               0x00007fff949a8b75 thread_start + 13

Thread 4:: Java: Gang worker#1 (Parallel GC Threads)
0   libsystem_kernel.dylib          0x00007fff96b6067a mach_msg_trap + 10
1   libsystem_kernel.dylib          0x00007fff96b5fd71 mach_msg + 73
2   libclient64.dylib               0x0000000103813ed3 0x103800000 + 81619
3   libclient64.dylib               0x0000000103813da4 0x103800000 + 81316
4   libclient64.dylib               0x0000000103813d12 0x103800000 + 81170
5   libclient64.dylib               0x00000001038138ed 0x103800000 + 80109
6   libclient64.dylib               0x0000000103813793 0x103800000 + 79763
7   libclient64.dylib               0x000000010382c578 0x103800000 + 181624
8   libclient64.dylib               0x0000000103813854 0x103800000 + 79956
9   libsystem_c.dylib               0x00007fff949a58bf _pthread_start + 335
10  libsystem_c.dylib               0x00007fff949a8b75 thread_start + 13

Thread 5:: Java: Concurrent Mark-Sweep GC Thread
0   libsystem_kernel.dylib          0x00007fff96b6067a mach_msg_trap + 10
1   libsystem_kernel.dylib          0x00007fff96b5fd71 mach_msg + 73
2   libclient64.dylib               0x0000000103813f65 0x103800000 + 81765
3   libclient64.dylib               0x0000000103832b1e 0x103800000 + 207646
4   libclient64.dylib               0x00000001038138ed 0x103800000 + 80109
5   libclient64.dylib               0x0000000103813793 0x103800000 + 79763
6   libclient64.dylib               0x00000001039088a1 0x103800000 + 1083553
7   libclient64.dylib               0x000000010390878b 0x103800000 + 1083275
8   libclient64.dylib               0x0000000103832999 0x103800000 + 207257
9   libclient64.dylib               0x0000000103813854 0x103800000 + 79956
10  libsystem_c.dylib               0x00007fff949a58bf _pthread_start + 335
11  libsystem_c.dylib               0x00007fff949a8b75 thread_start + 13

Thread 6:: Java: VM Thread
0   libsystem_kernel.dylib          0x00007fff96b6067a mach_msg_trap + 10
1   libsystem_kernel.dylib          0x00007fff96b5fd71 mach_msg + 73
2   libclient64.dylib               0x0000000103813f65 0x103800000 + 81765
3   libclient64.dylib               0x0000000103832b1e 0x103800000 + 207646
4   libclient64.dylib               0x00000001038138ed 0x103800000 + 80109
5   libclient64.dylib               0x0000000103813793 0x103800000 + 79763
6   libclient64.dylib               0x00000001038aa578 0x103800000 + 697720
7   libclient64.dylib               0x00000001038aa2b7 0x103800000 + 697015
8   libclient64.dylib               0x0000000103813854 0x103800000 + 79956
9   libsystem_c.dylib               0x00007fff949a58bf _pthread_start + 335
10  libsystem_c.dylib               0x00007fff949a8b75 thread_start + 13

Thread 7:: Java: Reference Handler
0   libsystem_kernel.dylib          0x00007fff96b6067a mach_msg_trap + 10
1   libsystem_kernel.dylib          0x00007fff96b5fd71 mach_msg + 73
2   libclient64.dylib               0x0000000103813ed3 0x103800000 + 81619
3   libclient64.dylib               0x0000000103813da4 0x103800000 + 81316
4   libclient64.dylib               0x00000001038b8b7f 0x103800000 + 756607
5   libclient64.dylib               0x00000001038b800c 0x103800000 + 753676
6   libclient64.dylib               0x00000001038b7c78 JVM_MonitorWait + 154
7   libjvmlinkage.dylib             0x000000010369cb0b JVM_MonitorWait + 59
8   ???                             0x000000010417dd6e 0 + 4363640174
9   ???                             0x000000010417285a 0 + 4363593818
10  ???                             0x000000010417285a 0 + 4363593818
11  ???                             0x000000010416d438 0 + 4363572280
12  libclient64.dylib               0x00000001038ab736 0x103800000 + 702262
13  libclient64.dylib               0x00000001038b77c4 0x103800000 + 751556
14  libclient64.dylib               0x00000001038b76ba 0x103800000 + 751290
15  libclient64.dylib               0x00000001038b765a 0x103800000 + 751194
16  libclient64.dylib               0x00000001038b74fc 0x103800000 + 750844
17  libclient64.dylib               0x00000001038b7311 0x103800000 + 750353
18  libclient64.dylib               0x0000000103813854 0x103800000 + 79956
19  libsystem_c.dylib               0x00007fff949a58bf _pthread_start + 335
20  libsystem_c.dylib               0x00007fff949a8b75 thread_start + 13

Thread 8 Crashed:: Java: Finalizer
0   libobjc.A.dylib                 0x00007fff95c00390 objc_msgSend_vtable14 + 16
1   com.apple.CoreFoundation        0x00007fff8da65ca0 CFRelease + 176
2   libawt.jnilib                   0x000000010b434076 Java_sun_font_AppleNativeStrike_disposeNativeStrikePtr + 42
3   ???                             0x000000010417dd6e 0 + 4363640174
4   ???                             0x000000010417285a 0 + 4363593818
5   ???                             0x000000010416d438 0 + 4363572280
6   libclient64.dylib               0x00000001038ab736 0x103800000 + 702262
7   libclient64.dylib               0x00000001038ab4fa 0x103800000 + 701690
8   libclient64.dylib               0x00000001038ba662 0x103800000 + 763490
9   libclient64.dylib               0x00000001039a1b28 0x103800000 + 1710888
10  libjava.jnilib                  0x00000001040054cb Java_java_lang_ref_Finalizer_invokeFinalizeMethod + 88
11  ???                             0x000000010417dd6e 0 + 4363640174
12  ???                             0x000000010417285a 0 + 4363593818
13  ???                             0x000000010417285a 0 + 4363593818
14  ???                             0x000000010417285a 0 + 4363593818
15  ???                             0x000000010416d438 0 + 4363572280
16  libclient64.dylib               0x00000001038ab736 0x103800000 + 702262
17  libclient64.dylib               0x00000001038b77c4 0x103800000 + 751556
18  libclient64.dylib               0x00000001038b76ba 0x103800000 + 751290
19  libclient64.dylib               0x00000001038b765a 0x103800000 + 751194
20  libclient64.dylib               0x00000001038b74fc 0x103800000 + 750844
21  libclient64.dylib               0x00000001038b7311 0x103800000 + 750353
22  libclient64.dylib               0x0000000103813854 0x103800000 + 79956
23  libsystem_c.dylib               0x00007fff949a58bf _pthread_start + 335
24  libsystem_c.dylib               0x00007fff949a8b75 thread_start + 13

Thread 9:: Dispatch queue: com.apple.libdispatch-manager
0   libsystem_kernel.dylib          0x00007fff96b627e6 kevent + 10
1   libdispatch.dylib               0x00007fff8bbc55be _dispatch_mgr_invoke + 923
2   libdispatch.dylib               0x00007fff8bbc414e _dispatch_mgr_thread + 54 
```

--- 由于长度限制，线程被删除 ---

```
Thread 43:: Java: Image Fetcher 0
0   ???                             0x0000000104222a58 0 + 4364315224

Thread 8 crashed with X86 Thread State (64-bit):
  rax: 0xa00000001037e07d  rbx: 0x00000001037e0b40  rcx: 0xa00000001037e07d  rdx: 0x00007fff7a411760
  rdi: 0x00000001037e0b40  rsi: 0x00007fff7a3e0580  rbp: 0x000000010aa5d3c0  rsp: 0x000000010aa5d378
   r8: 0x000000010417c8a0   r9: 0x000000010aa5d690  r10: 0x000000010417dd41  r11: 0x0000000103c445a3
  r12: 0x0000000000000000  r13: 0x00000007fb999e10  r14: 0x00007f86d184e9d0  r15: 0x00007f86d298f038
  rip: 0x00007fff95c00390  rfl: 0x0000000000010246  cr2: 0x000000010ac1e000
Logical CPU: 0

--- binary images deleted----

External Modification Summary:
  Calls made by other processes targeting this process:
    task_for_pid: 5
    thread_create: 0
    thread_set_state: 0
  Calls made by this process:
    task_for_pid: 0
    thread_create: 0
    thread_set_state: 0
  Calls made by all processes on this machine:
    task_for_pid: 118704
    thread_create: 1
    thread_set_state: 0

VM Region Summary:
ReadOnly portion of Libraries: Total=156.0M resident=73.8M(47%) swapped_out_or_unallocated=82.2M(53%)
Writable regions: Total=464.3M written=73.4M(16%) resident=109.9M(24%) swapped_out=0K(0%) unallocated=354.4M(76%)

REGION TYPE                      VIRTUAL
===========                      =======
ATS (font support)                 31.8M
ATS (font support) (reserved)         4K        reserved VM address space (unallocated)
CG backing stores                  5300K
CG image                           1036K
CG raster data                      128K
CG shared images                   3448K
CoreGraphics                         16K
CoreServices                       1336K
Java                              260.5M
Java (reserved)                    40.0M        reserved VM address space (unallocated)
MALLOC                             53.2M
MALLOC guard page                    64K
MALLOC_LARGE (reserved)            2048K        reserved VM address space (unallocated)
Mach message                          8K
Memory tag=242                       12K
STACK GUARD                        56.2M
Stack                              50.8M
VM_ALLOCATE                        16.6M
__CI_BITMAP                          80K
__DATA                             14.1M
__IMAGE                             528K
__LINKEDIT                         48.6M
__RC_CAMERAS                        240K
__TEXT                            107.5M
__UNICODE                           544K
mapped file                        50.8M
shared memory                      2428K
===========                      =======
TOTAL                             747.0M
TOTAL, minus reserved VM space    705.0M 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:29:16.813

关键位是

```
Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  sun.font.AppleNativeStrike.disposeNativeStrikePtr(J)V+0
j  sun.font.AppleNativeStrike.finalize()V+13
v  ~StubRoutines::call_stub 
```

我会用谷歌搜索类似的故障，但如果不是操作系统，则升级 JVM 很可能是解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:32:43.723

我有完全相同的问题。它仅在 Mac 上，并且在使用 drawString 方法在 Graphics2D 上呈现文本时更常发生。还没有弄清楚到底是什么问题以及是否有解决方法，但我怀疑它与 Mac 的 JRE 实现有关，因为它在 Windows 上运行良好。

# xpages - 当我从扩展库对话框中保存文档时，某些值是空白的

> ID：10016205
> 
> 赞同：3
> 
> 时间：2012-04-04T17:21:50.193
> 
> 标签：xpages

使用 8.5.3 UP1

当我从对话框保存文档时，某些字段没有被填充。如果我从 xpage 中保存文档，它会很好地保存这些字段。这是一个简单的例子来说明这个问题：

```
 <xp:link text="Save Document By Dialog"
    id="link21">

    <xp:eventHandler event="onclick" submit="false">
        <xp:this.script><![CDATA[XSP.openDialog("#{id:dialog1}");]]></xp:this.script>
    </xp:eventHandler>
</xp:link>
<br/>
<xp:button value="Save By Button" id="button1">
    <xp:eventHandler event="onclick" submit="true"
        refreshMode="complete">
        <xp:this.action>
            <xp:saveDocument var="document1"></xp:saveDocument>
        </xp:this.action>
    </xp:eventHandler>
</xp:button>
<xe:dialog id="dialog1" title="Dialog">
    <br />
    <b>
        <xp:text escape="true" id="computedField1">
            <xp:this.value><![CDATA[#{javascript:"Save this document?"}]]></xp:this.value>
        </xp:text>
    </b>
    <br />
    <br />
    <xp:button value="Yes" id="button7">
        <xp:eventHandler event="onclick" submit="true"
            refreshMode="complete">
            <xp:this.script><![CDATA[XSP.closeDialog("#{id:dialog1}");]]></xp:this.script>
            <xp:this.action>
                <xp:saveDocument var="document1"></xp:saveDocument>
            </xp:this.action></xp:eventHandler>
    </xp:button>        
    <xp:button value="No" id="button8">
        <xp:this.onclick><![CDATA[XSP.closeDialog("#{id:dialog1}");]]></xp:this.onclick>
    </xp:button>
</xe:dialog>
<br/><br/>
<xp:inputText id="TitleTX" value="#{document1.TitleTX}"></xp:inputText>
<br/><br/>
<xp:inputRichText id="inputRichText1" value="#{document1.ProcessMapsRT}">
</xp:inputRichText> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T21:51:25.740

与 xe:dialog 关联的 DOJO 进程将对话框移动到 DOM 中的另一个位置，这意味着它将失去对文档主要部分中数据源的跟踪。如果你用 SSJS 保存对话框而不是简单的操作，它可能会更好。

我使用包含在自定义控件中的对话框取得了最大的成功，其中数据源通过复合数据传入。这样，与数据的连接不会丢失并且仍然有效，但是，在这些情况下，我仍然使用 SSJS 进行保存。

/新人

更新：这可能是使用在 NotesIn9 #42 中描述的技术 Steve Pridemore 的时候了（参见[xpages.tv](http://xpages.tv)）。

首先将一个新事件放到您的 XPage 中，并在其中包含数据源。

```
<xp:eventHandler
    id="saveEventHandler"
    submit="true"
    save="true"
    event="calledbyid"
    refreshMode="complete">
</xp:eventHandler> 
```

接下来，让对话框中的操作使用客户端 javascript 调用此事件：

```
XSP.executeOnServer('#{id:saveEventHandler}') 
```

那“应该”这样做。我还没有完全测试它，但 NoteIn9 中的示例确实有效。

/新人

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:11:39.100

您是否尝试过使用 dataContexts 来定义您的数据源？我相信 dataContext 是一个全局对象。

**更新：** dataContexts 甚至 dominoDocument 数据源在保存文档时工作，但问题是没有保存值。因此，我使用了一个 viewScope 变量来存储这些值，这就成功了。我不确定这是否会对您有所帮助，但是您可以这样做，这对我有用：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"
    xmlns:xe="http://www.ibm.com/xsp/coreex">
    <xp:this.data>
        <xp:dominoDocument var="newDoc" formName="frmContact"></xp:dominoDocument>
    </xp:this.data>
    <xp:inputText id="inputText1" value="#{viewScope.firstName}"></xp:inputText>
    <xp:inputText id="inputText2" value="#{viewScope.lastName}"></xp:inputText>

    <xp:button value="Label" id="button1">
        <xp:eventHandler event="onclick" submit="true"
            refreshMode="partial" refreshId="dialog1">
            <xp:this.action><![CDATA[#{javascript:getComponent("dialog1").show();}]]></xp:this.action>
        </xp:eventHandler>
    </xp:button>

    <xe:dialog id="dialog1">
        <xp:button value="Label" id="button2">
            <xp:eventHandler event="onclick" submit="true"
                refreshMode="complete">
                <xp:this.action><![CDATA[#{javascript:newDoc.replaceItemValue("fldFirstName", viewScope.firstName);
newDoc.replaceItemValue("fldLastName", viewScope.lastName);
newDoc.save(); 
getComponent("dialog1").hide();}]]></xp:this.action>
            </xp:eventHandler>
        </xp:button>
    </xe:dialog>
</xp:view> 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T07:03:19.637

确保在打开对话框之前将您的数据发布到服务器。我建议用 SSJS 语法打开这样的对话框 - getComponent("dialog1").show()

# android - 每次我返回 MainActivity 时，AlertDialog 都会重新启动

> ID：10016209
> 
> 赞同：0
> 
> 时间：2012-04-04T17:22:11.720
> 
> 标签：android, service, android-alertdialog, android-activity

我创建了一个 MainActivity，其中用户有一些应用程序选项，显示在网格菜单中，可以访问后续的特定活动。但是，当应用程序启动时，我使用 AlertDialog 让用户输入登录详细信息，在网格布局定义之后膨胀。问题是，每次我在网格菜单中选择一个项目（并因此选择一个新活动）时，AlertDialog 都会再次弹出。我怎样才能避免这种情况？

此外，我有一个上传服务，它应该从 MainActivity 的开头（或者登录之后）开始，但每次调用新活动时都不应该重新启动。我认为这个问题与前一个问题有关，尽管我已经设法通过 OptionsMenu 使用 startService 按钮暂时解决了它。这不是永久的解决方案。

先感谢您。

**编辑：**我尝试使用 getSharedPreferences 如下：

```
private SharedPreferences prefs;
private String prefName = "MyPref";
int hasLoggedIn;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mm_gridmenu);

    SharedPreferences prefs = getSharedPreferences(prefName, MODE_PRIVATE);
    hasLoggedIn = prefs.getInt("hasLoggedIn", 0);

    if (hasLoggedIn == 0) {
        showDialog(SHOW_DIALOG);
        prefs = getSharedPreferences(prefName , MODE_PRIVATE);
        SharedPreferences.Editor editor = prefs.edit();
        editor.putInt("hasLoggedIn", 1);
        editor.commit();
    } 
```

但是，这种方式 hasLoggedIn 值被保存为 1 并且对话框不再弹出。我尝试设置后退按钮来解决这个问题，但这似乎阻止了应用程序被最小化。有没有办法将该操作添加到按钮？（我也会在主页按钮上复制）

```
@Override
public void onBackPressed() {
    prefs = getSharedPreferences(prefName , MODE_PRIVATE);
    SharedPreferences.Editor editor = prefs.edit();
    editor.putInt("hasLoggedIn", 0);
    editor.commit();
    Log.i("hasLoggedIn", hasLoggedIn + "");
    return;
} 
```

此外，我相信此操作会影响后续活动（重新设置 alertDialog）。哪个应该是这个的有效替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:28:26.847

基本上你需要跟踪你的应用程序状态，你有几个选项可以做到这一点。一种简单的方法是使用 a`SharedPreferences`来存储一个布尔变量，例如`hasLoggedIn` 在用户登录后将此值设置为`true`. 每次您的主要活动启动时，只需检查`hasLoggedIn`其是否设置为`false`要求用户再次登录的值。如果已经为真，则不显示登录对话框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:38:51.627

你可以试试这个：在你的 MainActivity 中添加一个布尔标志：

```
private boolean dialogFlag = true; 
```

在 onCreate/onResume 方法中：

```
if(dialogFlag) {
    createDialog();
    dialogFlag = false;
} 
```

如果您只想在安装应用程序后弹出，您可以将此标志保存到属性文件中。并在应用程序启动时先阅读它。

# c# - MVC 返回非完整模型的列列表

> ID：10016211
> 
> 赞同：1
> 
> 时间：2012-04-04T17:22:17.690
> 
> 标签：c#, visual-studio-2010, entity-framework

我有一个使用名为“客户”的表创建的模型。

它包含以下字段：

*   客户资料 ID
*   顾客姓名
*   出生日期
*   地址1
*   城市
*   状态
*   压缩
*   创建于
*   由...制作

我对搜索表的存储过程 (CustomerProfiles_Search) 进行了“函数导入”。（由于敏感信息，我无法发布 Sproc）。“返回集合”设置为“实体：客户配置文件”。它返回以下内容：

*   顾客姓名
*   出生日期
*   地址1

**现在这是我感到困惑的地方。** 我的控制器正在传递要搜索的字段，然后将其传递到返回列表的“网关”中。

**我的控制器：**

```
public ActionResult GetRowCount(string CustomerName, string BirthDate, string Address1, string City, string State, string Zip)
{
    List<CustomerProfile> searchResults = CustomerProfileGateway.Search(CustomerName, BirthDate, Address1, City, State, Zip);

    int count = searchResults.Count();
    string rowCount = count.ToString();

    if (Request.IsAjaxRequest())
        return Content(rowCount);
    else
        return RedirectToAction("Index", "OneView");
} 
```

...在我的**CustomerProfileGateway.cs**文件中：

```
public static List<CustomerProfile> Search(string CustomerName, string BirthDate, string Address1, string City, string State, int Zip)
{
    using (ModelEntities context = new ModelEntities())
    {
        return context.CustomerProfiles_Search(CustomerName, BirthDate, Address1, City, State, Zip).ToList();
    }
} 
```

但是，当我尝试将结果输出到列表时，会出现错误：

```
The data reader is incompatible with the specified 'SVPModel.CustomerProfile'. A member of the type, 'CustomerProfileID', does not have a corresponding column in the data reader with the same name. 
```

我想我需要创建一个返回的模型。

**我创建了以下内容：**

```
namespace Project.ABC.Objects
{
    class SearchModel
    {
            public class SearchResults
            {
                public string CustomerName { get; set; }
                public string BirthDate { get; set; }
                public string Address1 { get; set; }
            }
    }
} 
```

但我不知道该怎么做？有人可以告诉我我在这里做错了什么。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:55:59.983

问题是您的 sproc 并没有返回您需要的所有列，因为它应该映射到`CustomerProfile`.

当它尝试从 中读取属性时`DataReader`，找不到名为 的列`CustomerProfileID`，因此出现以下消息：

> 类型的成员“CustomerProfileID”在数据读取器中没有同名的对应列

你`SearchResults`看起来不错。您只需将“返回集合”设置为“实体：搜索结果”

# python - Python 多处理：如何在池中添加或更改进程数

> ID：10016217
> 
> 赞同：5
> 
> 时间：2012-04-04T17:22:44.853
> 
> 标签：python, process, multiprocessing, pool

我从 python 多处理模块创建了一个池，并希望更改池中运行的进程数或添加到它们中。这可能吗？我尝试过这样的事情（我的代码的简化版本）

```
class foo:
    def __init__():
        self.pool = Pool()
    def bar(self, x):
        self.pool.processes = x
        return self.pool.map(somefunction, list_of_args) 
```

它似乎有效并最终达到了我想要的结果（即在多个进程之间拆分工作），但我不确定这是最好的方法，或者它为什么有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:06:33.647

我认为这实际上行不通：

```
import multiprocessing, time

def fn(x):
    print "running for", x
    time.sleep(5)

if __name__ == "__main__":
    pool = multiprocessing.Pool()
    pool.processes = 2

    # runs with number of cores available (8 on my machine)
    pool.map(fn, range(10))

    # still runs with number of cores available, not 10
    pool.processes = 10
    pool.map(fn, range(10)) 
```

`multiprocessing.Pool`将进程数存储在私有变量（即`Pool._processes`）中，该变量在池实例化时设置。请参阅[源代码](http://hg.python.org/cpython/file/118729090dc5/Lib/multiprocessing/pool.py#l133)。

这似乎有效的原因是进程数会自动设置为当前机器上的内核数，除非您指定不同的数字。

我不确定您为什么要更改可用进程的数量 - 也许您可以更详细地解释这一点。无论何时创建一个新池都非常容易（大概是在其他池完成运行之后）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-07T20:15:19.570

您可以通过使用私有变量`_processes`和私有方法`_repopulate_pool`。但我不建议使用私有变量等。

```
pool = multiprocessing.Pool(processes=1, initializer=start_process)
>Starting ForkPoolWorker-35

pool._processes = 3
pool._repopulate_pool()
>Starting ForkPoolWorker-36
>Starting ForkPoolWorker-37 
```

# php - 在 Wordpress 自定义元字段中插入 html 代码

> ID：10016219
> 
> 赞同：1
> 
> 时间：2012-04-04T17:22:57.817
> 
> 标签：php, html, wordpress

我在 functions.php 文件中创建了自定义元字段。我在这里面临的问题是，当`<a href="example.com"></a>`插入和保存诸如 html 代码时，元框会合并代码，并且该框现在只显示`<a href="`. 如果用户要再次保存帖子，`<a href=`则会将其添加到页面中，这可能会导致许多错误。有没有办法格式化元字段以包含代码，而不是将其合并为它自己的元字段标记的一部分。

我的元字段目前是这样的

```
"example_name" => array(
"name" => "example_name",
"std" => "",
"title" => "Example",
"description" => "Example text") 
```

请您的帮助将不胜感激..我也在寻找代码，而不是我的解决方案的插件。

HTML 是这样插入的

```
if($meta_box_value == "")
$meta_box_value = $meta_box['std'];
echo'<input type="hidden" name="'.$meta_box['name'].'_noncename" id="'.$meta_box['name'].'_noncename" value="'.wp_create_nonce( plugin_basename(__FILE__) ).'" />';
echo'<h2 style=" margin:0px; padding:0px 3px; font-style:normal; font-family:Tahoma; font-size:13px;font-weight:bold;">'.$meta_box['title'].'</h2>';
echo'<input type="text" name="'.$meta_box['name'].'_value" value="'.$meta_box_value.'" size="95" /><br />';
echo'<p><label for="'.$meta_box['name'].'_value">'.$meta_box['description'].'</label></p>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:44:14.783

在 PHP 中使用`htmlspecialchars()`-function。

# python - 使用 bash 将同一字符串多次替换为文件中的不同字符串

> ID：10016221
> 
> 赞同：0
> 
> 时间：2012-04-04T17:23:09.490
> 
> 标签：python, regex, perl, bash, replace

我有一个包含此内容的文件

```
 import os
  import sys

  sys.path.append('/home/user/dj/project/')
  sys.path.append('/home/user/dj/')

  os.environ.setdefault("DJANGO_SETTINGS_MODULE", "proj.settings")

  import django.core.handlers.wsgi
  application = django.core.handlers.wsgi.WSGIHandler() 
```

`/home/user/dj/proj/`并且`/home/user/dj/`可能是其他未知值。

我有一个 bash 脚本来进行安装，并且我想在那里执行一些操作来将这些行更改为

```
 import os
  import sys

  sys.path.append('/var/django/proj/')
  sys.path.append('/var/django/')

  os.environ.setdefault("DJANGO_SETTINGS_MODULE", "proj.settings")

  import django.core.handlers.wsgi
  application = django.core.handlers.wsgi.WSGIHandler() 
```

我试过了，`sed`但我在正则表达式中遇到了贪婪的问题。

我试过了，`perl -pi -e s/str1/str2/`但我遇到了麻烦，因为 perl 取代了所有的出现。

**编辑：** 为了澄清，我只想替换单引号内的值。IE：

`sys.path.append('foo')``sys.path.append('what I want')`和_

`sys.path.append('bar')`和`sys.path.append('the second thing I want')`

并且`bar`可以不同或等于`foo`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:31:22.537

As a basis for your solution:

```
 replStr="/var/django"
 echo "sys.path.append('/home/user/dj/project/')" \
| sed "s@sys.path.append('[^'][^']*[']@sys.path.append('${replStr}'@" 
```

**output**

```
sys.path.append('/var/django') 
```

The trick to getting a non-greedy solution, is to say "[^']" (any char not a sngl-quote). Adding the second "[^']*" (and the star), make the whole setting say, "at least 1 char that is not a single-quote". Then you add a single-quote (I use the char-class container to make it more visible, it may not be needed).

When a search target is known, I prefer just to match it, and then type it out again in my replacment string, rather than try to capture the value inside of ()s and reference with \1\. again, just that it makes what is happening a little more obvious to a maintenance coder.

I hope this helps

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T20:10:36.883

我在 bash 命令行上针对您的代码 ( ) 的副本运行了这个`filename`，它奏效了；

```
sed s/sys\.path\.append\(\'.*\'\)/sys\.path\.append\(\'\\/var\\/django\\/proj\\/\'\)/ filename 
```

如果您想影响程序中的所有 sys.path.append() 调用，则有很多转义但很有效。显然，很容易调整以与其他函数/方法调用一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T22:30:30.340

我终于用了这个

```
sed -i "1,/sys.path.append/ {/sys.path.append/i sys.path.append('$HOMEDIR/')\nsys.path.append('/home/$SYS_USER/')
}" $HOMEDIR/wsgi.py 
```

与之前的回车`}`

是唯一对我有用的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T17:35:44.410

```
sed 's@home/user/[^/]*@var/django@' file 
```

是你要找的吗？

它将 /home/user/any_user 替换为 /var/django

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T10:54:20.083

如果您想要一个可以针对任何程序运行的 bash 脚本来更改传递给任何给定函数的字符串，那么您可以使用它；

```
#!/bin/bash

# Usage:  replacer.bash funcname repstring inputfile
#         funcname - function/method to affect
#         repstring - replacement string that you want passed into the function/method
#         inputfile - program/script to process

function main
{
    fun=$1
    shift
    text=$1
    shift

    sed "s@\\($fun\\)(\'.*\')@\\1\(\'$text\'\)@" $1
}

main $* 
```

例子;

```
replacer.bash sys.path.append /var/django/proj/ myprog > myprog.new 
```

# c# - C# 等效于 php mysql_real_escape_string 函数

> ID：10016225
> 
> 赞同：1
> 
> 时间：2012-04-04T17:23:27.957
> 
> 标签：c#, mysql-real-escape-string, equivalent

我正在寻找与 C#.NET 中使用的 PHP 函数 mysql_real_escape_string() 的等效项。我使用 .NET 3.5 框架。我找不到任何可以使用的东西。

我读了一些 System.Web.HttpUtility 会有的东西，但我不能使用它。它说我没有参考它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:27:58.423

我强烈怀疑你不会找到任何东西，原因有两个：

*   这不是避免 SQL 注入攻击的首选方法。使用参数化查询是。
*   无论如何，它都是特定于数据库的，因此它`mysql_real_escape_string`在 PHP 中。鉴于它与 SQL 有关，我不希望 System.Web.HttpUtility*像*您想要的那样。

所以问题是您实际上是在尝试将值传递给数据库，还是转义 URL。如果它正在转义 URL，那么我们需要更多地了解您的应用程序（例如 .NET 目标配置文件）以进一步帮助您。如果将值传递给数据库，请改用参数化 SQL。

# ruby-on-rails - 按 created_at 加另一个值排序

> ID：10016228
> 
> 赞同：1
> 
> 时间：2012-04-04T17:23:45.477
> 
> 标签：ruby-on-rails

我有一个表，其中包含一列“discussion_duration”，我在其中以秒为单位存储某些时间（6 小时 = 21600）。我想按“created_at”+“discussion_duration”对该表进行排序。

我可以在 ruby​​ 中添加 created_at 和 Discussion_duration 并返回一个日期。但是，由于 rails .order() 中的参数是原始 sql，我不确定如何添加这两个字段然后按输出排序。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:44:54.903

编辑：实际上这可能是您正在寻找的。您需要使用数据库特定的日期/时间函数来执行此操作，这是一个 mysql 示例。

`.order('TIMESTAMPADD(SECOND, discussion_duration, created_at)')`

# backbone.js - 清除 Backbone Collection 中的所有元素并将它们从关联的 Lawnchair 中移除

> ID：10016230
> 
> 赞同：4
> 
> 时间：2012-04-04T17:23:56.130
> 
> 标签：backbone.js, javascript, lawnchair

我正在使用 Backbone.js、[Lawnchair](http://westcoastlogic.com/lawnchair/)和[backbone.lawnchair.js](https://github.com/niallsmart/Backbone.Lawnchair/blob/master/backbone.lawnchair.js)。

我想知道“清空”集合（来自应用程序和本地存储）的正确方法是什么？

目前，我正在使用这些方面的东西：

```
Favorites.Collection = Backbone.Collection.extend({
  model: Favorites.Model,
  lawnchair: new Lawnchair({ name: "favorites" }, function(e){}),

  empty: function(){
    this.lawnchair.nuke();
    this.fetch();
  }
}); 
```

这本质上是破坏 localStorage 中的元素（lawnchair 提供了 nuke 方法）并从 localStorage 中获取。这似乎有点笨拙，我想知道我是否正在考虑这个权利 - 或者是否有更好的方法。

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T05:22:17.157

Backbone 遵循某种 RESTish 原则，遗憾的是 REST 没有描述批量删除过程。一次只能删除一个资源。通常，API 不支持对整个集合 URI 进行 HTTP DELETE，`DELETE /favorites`例如`DELETE /favorites/42`- 一次一个。因此，没有单一的主干方法可以做到这一点，因为通常集合主要设计用于获取/获取，然后委托给各个模型进行保存和删除。所以，是的，您可以自行使用批量删除方法。你可以做一些更像 RPC 的事情，并将一个 ID 列表传递给一个删除过程，但是你上面的内容对我来说似乎完全足够了，是的，直接删除它们然后重新获取集合对我来说似乎也很合理。所以我认为你的解决方案很好，但我也很想看看其他人的建议。

# stored-procedures - where 子句中的动态关系运算符无效（PL/SQL Oracle）

> ID：10016231
> 
> 赞同：0
> 
> 时间：2012-04-04T17:24:02.813
> 
> 标签：stored-procedures, dynamic, oracle10g, operators, where-clause

我正在使用 Oracle 10g，并且我有以下存储过程：

```
CREATE OR REPLACE PACKAGE BODY RF_PKG_STFCA_PositivePay
AS
PROCEDURE RF_SP_STFCA_PositivePay(IN_DATE IN NUMBER, IN_DATE_OPERATOR IN NVARCHAR2, OUT_DATA OUT CUR_DATA)
IS
/* this procedure returns a Ref Cursor with all the requested parameters
calling the stored procedure from an asp page (and anywhere else)
does not require posting a predefined number of records */
    PaymentBatchNumber      NVARCHAR2(4);
    CurrencyCode            NVARCHAR2(3);
    TransactionCode         NVARCHAR2(3);
    Transit_BranchNumber        NVARCHAR2(5);
    BankAccountNumber       NVARCHAR2(7);
    ChequeNumber            NVARCHAR2(8);
    ChequeAmount            NVARCHAR2(10);
    ClientReference         NVARCHAR2(19);
    IssueDate           NVARCHAR2(8);
    PayeeName1          NVARCHAR2(60);
    AddressLine1            NVARCHAR2(60);
    AddressLine2            NVARCHAR2(60);
    AddressLine4            NVARCHAR2(60);
    AddressLine5            NVARCHAR2(60);
    DateCreated         NVARCHAR2(25);
    DateVoided          NVARCHAR2(25);
BEGIN
OPEN OUT_DATA FOR
    SELECT LPAD(NVL(CD.PAYMENT_BATCH_NO, '0'), 4, '0') AS PaymentBatchNumber, 
    SUBSTR(NVL(CD.CURRENCY_ID, ' '), 1, 1) AS CurrencyCode,
    NVL(CD.STATUS, ' ') AS TransactionCode,
    LPAD(NVL(BA.BRANCH_ID, '0'), 5, '0') AS Transit_BranchNumber,
    LPAD(NVL(BA.ACCOUNT_NO, '0'), 7, '0') AS BankAccountNumber,
    LPAD(NVL(CD.CHECK_NO, '0') , 8, '0') AS ChequeNumber,
    LPAD(TO_CHAR(NVL(CD.AMOUNT, 0)), 10, '0') AS ChequeAmount,
    LPAD(NVL(CD.CONTROL_NO, '0'), 19, '0') AS ClientReference,
    TO_CHAR(NVL(CD.CHECK_DATE, LPAD(' ', 8, ' ')), 'YYYYMMDD') AS IssueDate,
    RPAD(NVL(CD.NAME, ' '), 60, ' ') AS PayeeName1,
    RPAD(NVL(CD.ADDR_1, ' '), 60, ' ') AS AddressLine1,
    RPAD(NVL(CD.ADDR_2, ' '), 60, ' ') AS AddressLine2,
    RPAD(NVL(CD.CITY, '') || CASE WHEN CD.CITY IS NULL OR CD.STATE IS NULL THEN ' ' ELSE ', ' END || NVL(CD.STATE, ''), 60, ' ') AS AddressLine4,
    RPAD(NVL(CD.ZIPCODE, ' '), 60, ' ') AS AddressLine5,
    TO_CHAR(CD.CREATE_DATE, 'YYYYMMDDHH24MISS') AS DateCreated,
    CASE WHEN CD.VOID_DATE IS NULL THEN ' ' ELSE TO_CHAR(CD.VOID_DATE, 'YYYYMMDDHH24MISS') END AS DateVoided
    INTO PaymentBatchNumber, CurrencyCode, TransactionCode, Transit_BranchNumber, BankAccountNumber, ChequeNumber, 
    ChequeAmount, ClientReference, IssueDate, PayeeName1, AddressLine1, AddressLine2, AddressLine4, AddressLine5,
    DateCreated, DateVoided
    FROM BANK_ACCOUNT BA 
    INNER JOIN CASH_DISBURSEMENT CD ON BA.ID = CD.BANK_ACCOUNT_ID 
    WHERE BA.ACCOUNT_NO IS NOT NULL AND CD.CHECK_NO > 0 AND CD.STATUS != 'X' AND CD.AMOUNT != 0 AND ((TO_NUMBER(TO_CHAR(CD.CREATE_DATE, 'YYYYMMDDHH24MISS')) || IN_DATE_OPERATOR || IN_DATE) OR 
    (CASE WHEN CD.VOID_DATE IS NULL THEN 0 ELSE TO_NUMBER(TO_CHAR(CD.VOID_DATE, 'YYYYMMDDHH24MISS')) END || IN_DATE_OPERATOR || IN_DATE)) 
    ORDER BY BA.BRANCH_ID, BA.ACCOUNT_NO;
END RF_SP_STFCA_PositivePay;
END RF_PKG_STFCA_PositivePay; 
```

将其输入 SQL plus 时出现以下错误：

无效的关系运算符

我正在尝试做的事情：我有这个存储过程，它使用 REF CURSOR 将 secordset 返回到我的 asp.net 应用程序。我给它2个输入参数。1 是日期 (IN_DATE)，1 是运算符 (IN_DATE_OPERATOR)。如果“|| IN_DATE_OPERATOR ||”，该程序可以工作 is 替换为 = 或 >= 只是我希望它工作的方式。问题基于 .Net 应用程序中发生的情况，我希望它在 where 子句中使用的操作符是 ">=" 或 "=" ，直到运行时我才知道哪个。

我知道我做错了，但我不知道如何让 oracle 重新确认 IN_DATE_OPERATOR 是一个关系运算符。我对拥有动态运算符的其他方法持开放态度（我试过 CASE WHEN IN_DATE_OPERATOR = '=' THEN '=' ELSE '>=' END 也无济于事）但我不想创建一个完整的单独存储过程我除了这个或完全动态的 where 子句之外，还必须维护。我理想的解决方案是尽可能少地对此查询进行更改。有什么建议么？

编辑：好的，我已经编辑了我的查询，如下所示：

```
CREATE OR REPLACE PACKAGE BODY RF_PKG_STFCA_PositivePay
AS
PROCEDURE RF_SP_STFCA_PositivePay(IN_DATE IN NUMBER, IN_DATE_OPERATOR IN VARCHAR2, OUT_DATA OUT CUR_DATA)
IS
/* this procedure returns a Ref Cursor with all the requested parameters
calling the stored procedure from an asp page (and anywhere else)
does not require posting a predefined number of records */
    SQL_Statement       VARCHAR2(8000);
BEGIN
    SQL_Statement := 'SELECT LPAD(NVL(CD.PAYMENT_BATCH_NO, ''0''), 4, ''0'') AS PaymentBatchNumber, ' ||
    ' SUBSTR(NVL(CD.CURRENCY_ID, '' ''), 1, 1) AS CurrencyCode, ' ||
    ' NVL(CD.STATUS, '' '') AS TransactionCode, ' ||
    ' LPAD(NVL(BA.BRANCH_ID, ''0''), 5, ''0'') AS Transit_BranchNumber, ' ||
    ' LPAD(NVL(BA.ACCOUNT_NO, ''0''), 7, ''0'') AS BankAccountNumber, ' ||
    ' LPAD(NVL(CD.CHECK_NO, ''0'') , 8, ''0'') AS ChequeNumber, ' ||
    ' LPAD(TO_CHAR(NVL(CD.AMOUNT, 0)), 10, ''0'') AS ChequeAmount, ' ||
    ' LPAD(NVL(CD.CONTROL_NO, ''0''), 19, ''0'') AS ClientReference, ' ||
    ' TO_CHAR(NVL(CD.CHECK_DATE, LPAD('' '', 8, '' '')), ''YYYYMMDD'') AS IssueDate, ' ||
    ' RPAD(NVL(CD.NAME, '' ''), 60, '' '') AS PayeeName1, ' ||
    ' RPAD(NVL(CD.ADDR_1, '' ''), 60, '' '') AS AddressLine1, ' ||
    ' RPAD(NVL(CD.ADDR_2, '' ''), 60, '' '') AS AddressLine2, ' ||
    ' RPAD(NVL(CD.CITY, '''') || CASE WHEN CD.CITY IS NULL OR CD.STATE IS NULL THEN '' '' ELSE '', '' END || NVL(CD.STATE, ''''), 60, '' '') AS AddressLine4, ' ||
    ' RPAD(NVL(CD.ZIPCODE, '' ''), 60, '' '') AS AddressLine5, ' ||
    ' TO_CHAR(CD.CREATE_DATE, ''YYYYMMDDHH24MISS'') AS DateCreated, ' ||
    ' CASE WHEN CD.VOID_DATE IS NULL THEN '' '' ELSE TO_CHAR(CD.VOID_DATE, ''YYYYMMDDHH24MISS'') END AS DateVoided ' ||
    ' FROM BANK_ACCOUNT BA ' ||
    ' INNER JOIN CASH_DISBURSEMENT CD ON BA.ID = CD.BANK_ACCOUNT_ID ' ||
    ' WHERE BA.ACCOUNT_NO IS NOT NULL AND CD.CHECK_NO > 0 AND CD.STATUS != ''X'' AND CD.AMOUNT != 0 ' ||
    ' AND ((TO_NUMBER(TO_CHAR(CD.CREATE_DATE, ''YYYYMMDDHH24MISS'')) ' || IN_DATE_OPERATOR || ' :1) ' ||
    ' OR (CASE WHEN CD.VOID_DATE IS NULL THEN 0 ELSE TO_NUMBER(TO_CHAR(CD.VOID_DATE, ''YYYYMMDDHH24MISS'')) END ' || IN_DATE_OPERATOR || ' :2)) ' ||
    ' ORDER BY BA.BRANCH_ID, BA.ACCOUNT_NO ';       
    OPEN OUT_DATA FOR SQL_Statement USING IN_DATE, IN_DATE;     
END RF_SP_STFCA_PositivePay;
END RF_PKG_STFCA_PositivePay;/ 
```

但我收到以下错误：

LINE/COL 错误

* * *

32/3 PL/SQL：语句被忽略 32/21 PLS-00382：表达式类型错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:32:38.643

您需要在字符串中动态组合 SQL 语句，然后使用该字符串打开游标。您将需要`get_cur`按照以下过程的方式在局部`VARCHAR2`变量中组装 SQL 语句，包括绑定变量的占位符，然后使用您组装的 SQL 语句和传入的绑定变量打开游标。

```
SQL> create or replace procedure get_cur( p_date in date, p_operator in varchar2, p_cur out sys_refcursor )
  2  as
  3    l_sql_stmt varchar2(1000);
  4  begin
  5    l_sql_stmt := 'select * from emp where hiredate ' || p_operator || ' :1';
  6    open p_cur for l_sql_stmt using p_date;
  7  end;
  8  /

Procedure created.

SQL> var rc refcursor;
SQL> exec get_cur( date '2001-01-01', '>=', :rc );

PL/SQL procedure successfully completed.

SQL> print rc;

no rows selected

SQL> exec get_cur( date '2001-01-01', '<=', :rc );

PL/SQL procedure successfully completed.

SQL> print rc;

     EMPNO ENAME      JOB              MGR HIREDATE         SAL       COMM
---------- ---------- --------- ---------- --------- ---------- ----------
    DEPTNO
----------
      7369 SMITH      CLERK           7902 17-DEC-80        801
        20

      7499 ALLEN      SALESMAN        7698 20-FEB-81       1601        300
        30

      7521 WARD       SALESMAN        7698 22-FEB-81       1251        500
        30

     EMPNO ENAME      JOB              MGR HIREDATE         SAL       COMM
---------- ---------- --------- ---------- --------- ---------- ----------
    DEPTNO
----------
      7566 JONES      MANAGER         7839 02-APR-81       2976
        20

      7654 MARTIN     SALESMAN        7698 28-SEP-81       1251       1400
        30

      7698 BLAKE      MANAGER         7839 01-MAY-81       2851
        30

     EMPNO ENAME      JOB              MGR HIREDATE         SAL       COMM
---------- ---------- --------- ---------- --------- ---------- ----------
    DEPTNO
----------
      7782 CLARK      MANAGER         7839 09-JUN-81       2451
        10

      7788 SCOTT      ANALYST         7566 19-APR-87       3001
        20

      7839 KING       PRESIDENT            17-NOV-81       5001
        10

     EMPNO ENAME      JOB              MGR HIREDATE         SAL       COMM
---------- ---------- --------- ---------- --------- ---------- ----------
    DEPTNO
----------
      7844 TURNER     SALESMAN        7698 08-SEP-81       1501          0
        30

      7876 ADAMS      CLERK           7788 23-MAY-87       1101
        20

      7900 JAMES      CLERK           7698 03-DEC-81        951
        30

     EMPNO ENAME      JOB              MGR HIREDATE         SAL       COMM
---------- ---------- --------- ---------- --------- ---------- ----------
    DEPTNO
----------
      7902 FORD       ANALYST         7566 03-DEC-81       3001
        20

      7934 MILLER     CLERK           7782 23-JAN-82       1301
        10

14 rows selected. 
```

我的猜测是你想要这样的东西（显然，因为我没有你的表或类型，我无法测试它是否真的编译，所以你可能需要更正拼写错误）

```
CREATE OR REPLACE PACKAGE BODY RF_PKG_STFCA_PositivePay
AS
PROCEDURE RF_SP_STFCA_PositivePay(IN_DATE IN NUMBER, IN_DATE_OPERATOR IN NVARCHAR2, OUT_DATA OUT CUR_DATA)
IS
/* this procedure returns a Ref Cursor with all the requested parameters
calling the stored procedure from an asp page (and anywhere else)
does not require posting a predefined number of records */
  l_sql_stmt VARCHAR2(4000);
BEGIN
  l_sql_stmt := q'[SELECT LPAD(NVL(CD.PAYMENT_BATCH_NO, '0'), 4, '0') AS PaymentBatchNumber, ]' ||
    q'[SUBSTR(NVL(CD.CURRENCY_ID, ' '), 1, 1) AS CurrencyCode, ]' ||
    q'[NVL(CD.STATUS, ' ') AS TransactionCode, ]' ||
    q'[LPAD(NVL(BA.BRANCH_ID, '0'), 5, '0') AS Transit_BranchNumber, ]' ||
    q'[LPAD(NVL(BA.ACCOUNT_NO, '0'), 7, '0') AS BankAccountNumber, ]' ||
    q'[LPAD(NVL(CD.CHECK_NO, '0') , 8, '0') AS ChequeNumber, ]' ||
    q'[LPAD(TO_CHAR(NVL(CD.AMOUNT, 0)), 10, '0') AS ChequeAmount, ]' ||
    q'[LPAD(NVL(CD.CONTROL_NO, '0'), 19, '0') AS ClientReference, ]' ||
    q'[TO_CHAR(NVL(CD.CHECK_DATE, LPAD(' ', 8, ' ')), 'YYYYMMDD') AS IssueDate, ]' ||
    q'[RPAD(NVL(CD.NAME, ' '), 60, ' ') AS PayeeName1, ]' ||
    q'[RPAD(NVL(CD.ADDR_1, ' '), 60, ' ') AS AddressLine1, ]' ||
    q'[RPAD(NVL(CD.ADDR_2, ' '), 60, ' ') AS AddressLine2, ]' ||
    q'[RPAD(NVL(CD.CITY, '') || CASE WHEN CD.CITY IS NULL OR CD.STATE IS NULL THEN ' ' ELSE ', ' END || NVL(CD.STATE, ''), 60, ' ') AS AddressLine4, ]' ||
    q'[RPAD(NVL(CD.ZIPCODE, ' '), 60, ' ') AS AddressLine5, ]' ||
    q'[TO_CHAR(CD.CREATE_DATE, 'YYYYMMDDHH24MISS') AS DateCreated, ]' ||
    q'[CASE WHEN CD.VOID_DATE IS NULL THEN ' ' ELSE TO_CHAR(CD.VOID_DATE, 'YYYYMMDDHH24MISS') END AS DateVoided ]' ||
    q'[FROM BANK_ACCOUNT BA  ]' ||
    q'[INNER JOIN CASH_DISBURSEMENT CD ON BA.ID = CD.BANK_ACCOUNT_ID  ]' ||
    q'[WHERE BA.ACCOUNT_NO IS NOT NULL AND CD.CHECK_NO > 0  ]' ||
    q'[AND CD.STATUS != 'X'  ]' ||
    q'[AND CD.AMOUNT != 0  ]' ||
    q'[AND ((TO_NUMBER(TO_CHAR(CD.CREATE_DATE, 'YYYYMMDDHH24MISS'))]' || IN_DATE_OPERATOR || ':1') OR  ' ||
    q'[(CASE WHEN CD.VOID_DATE IS NULL THEN 0 ELSE TO_NUMBER(TO_CHAR(CD.VOID_DATE, 'YYYYMMDDHH24MISS')) END]' || IN_DATE_OPERATOR || ':2'))  ' ||
    q'[ORDER BY BA.BRANCH_ID, BA.ACCOUNT_NO ]';
  OPEN out_data
   FOR l_sql_stmt
   USING in_date, in_date;
END RF_SP_STFCA_PositivePay;
END RF_PKG_STFCA_PositivePay; 
```

# ruby - 条件 || 提高（“错误”）

> ID：10016234
> 
> 赞同：4
> 
> 时间：2012-04-04T17:24:18.267
> 
> 标签：ruby

我只是想知道这个语法记录在哪里：

```
1 > 2 || raise("error") 
```

我试过用它作为条件：

```
1 > 2 || p "test" 
```

但它不起作用：

```
SyntaxError: (irb):9: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
1 > 2 || p "test"
            ^
        from C:/Ruby193/bin/irb:12:in `<main>' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T17:26:31.403

这只是一种内联方式来表示“如果条件为假则引发错误”。|| 只是一个普通`OR`运算符，表达式是使用[短路](http://en.wikipedia.org/wiki/Short-circuit_evaluation)评估来评估的。不过，为了清楚起见，我更喜欢这个：

```
raise("error") unless 1 > 2 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T17:32:20.453

你所拥有的不起作用，因为你需要括号：

```
1 > 2 || p("test") 
```

请注意，[`or`(and `and`) 的优先级与`&&`/`||`](http://devblog.avdi.org/2010/08/02/using-and-and-or-in-ruby/)不同，因此可以在没有括号的情况下工作（并且您正在做的事情更具语义意义）：

```
1 > 2 or p "test" 
```

一样`unless`：

```
p "test" unless 1 > 2 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T17:33:04.680

两种执行都有效，问题是排除了`p`. *从IRB*运行代码：

```
ruby-1.8.7-p302 :003 > 1 > 2 || raise("error")
RuntimeError: error
    from (irb):3 
```

通过添加**(** "test" **)**，调用按预期工作：

```
ruby-1.8.7-p302 :004 > 1 > 2 || p("test")
"test" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-12T00:31:37.540

您在这里尝试完成的是控制流而不是条件逻辑。这是条件逻辑的无效语法。正确的控制流将使用“and”和“or”结构。这就是它们的用途，而不是通常错误地假设的 && 和 || 的语法糖替代品。条件运算符。它们是不同的，具有不同的评估优先顺序，应该在正确的位置使用。例子：

```
1 > 2 or p 'no it is not'
2 > 1 and return
instance.exists? or not_found!
instance && instance.success? or raise FailureException, 'missing or unsuccessful' 
```

本质上，如果您试图从语句中读取真假，请使用 && 和 ||。如果您尝试基于条件评估执行代码路径，请使用 and and or。

# c++ - 如何将数组从 perl 传递到内联 C++？

> ID：10016237
> 
> 赞同：6
> 
> 时间：2012-04-04T17:24:26.853
> 
> 标签：c++, perl, inline

我不知道这是一个错误还是什么。

以下代码适用`Inline::C`但不适用`Inline::CPP`

```
#!/usr/bin/perl
use warnings;
use Inline C;

my @array = (1..10);
print findAvLen(\@array), "\n";

__END__
__C__

int findAvLen(AV* arrayIn) {
    return av_len(arrayIn);
} 
```

以上运行正常，但替换`C`为`CPP`，我得到错误`Can't locate auto/main/findAvLen.al in @INC...`

我可以让其他内联 C++ 代码工作。[例如，可以像在本例中](http://search.cpan.org/~davido/Inline-CPP-0.38/lib/Inline/CPP.pod#Example_3_-_The_Ellipsis_Abridged)那样使用省略号将变量列表传递给内联代码，但我想知道为什么 AV* 不起作用！例如，我想使用一个子例程将传递给 C++ 的 perl 数组转换为向量，例如`void perl2vector(AV* ar, std::vector<T> &v) {...}`，而不是将执行这种转换的代码插入到我编写的每个接受数组参数的 C++ 函数中。我如何使用该示例的语法将 perl 数组传递给这样的转换器？

* * *

这似乎是一个错误，但与此同时，uesp 找到了解决方法：

```
int findAvLen(SV* arrRef) { 
    AV * arr = MUTABLE_AV(SvRV(arrRef));
    return av_len(arr);
} 
```

`arr`现在等效于`arrayIn`上面示例代码中的期望。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T18:00:32.883

这似乎与5.10.0 中存在的[这个 Perl 错误](https://rt.cpan.org/Public/Bug/Display.html?id=36421)相同，应该在 5.10.29 版本中修复。如果您运行的是 5.10.0-28，请尝试更新。如果您没有运行这些版本并且仍然收到错误消息，您可以尝试执行[本论坛帖子](http://www.perlmonks.org/?node_id=689679)中提到的操作，方法是`AV`将`SV`.

# php - PHP表单多个按钮

> ID：10016247
> 
> 赞同：1
> 
> 时间：2012-04-04T17:25:08.723
> 
> 标签：php, javascript, forms, button

我有一个带有 2 个按钮的表单，根据选择的按钮将被从数据库中删除或编辑。这些是使用 SQL 语句（questionedit 和 questiondelete）的每个单独的页面。但是，当我按下按钮时，什么也没有发生……任何想法

这是我的 javascript

```
function SelectedButton(button)
{
    if(button == 'edit')
    {
        document.testedit_questionform.action ="testedit_questionedit.php";
    }else if(button == 'delete'){
        document.testedit_questionform.action ="testedit_questiondelete.php";
    }
    document.forms[].testedit_questionform.submit();
} 
```

这是我的表格（从循环中回显）

```
<form name="testedit_questionform" action="SelectedButton" method="POST"> 
    <span class="grid_11 prefix_1" id="" >
Question:<input type="text" name="QuestionText" style="width:588px; margin-left:10px;" value="$row[0]"/>
    <input type="button" value="Edit" name="Operation" onclick="submitForm('edit')" />
    <input type="button" value="Delete" name="Operation" onclick="submitForm('delete')" />
    <input type="hidden" name="QId" value="$row[3]" /><br />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:29:45.353

首先，你的函数应该命名为`submitForm`

```
function submitForm(button) {
  if(button == 'edit') {
    document.testedit_questionform.action ="testedit_questionedit.php";
  } else if(button == 'delete') {
    document.testedit_questionform.action ="testedit_questiondelete.php";
  }

  document.testedit_questionform.submit();
} 
```

然后，从您的表单中调用提交方法。

**编辑：**

调用表单的另一种方法是：`document.forms['FORM_NAME'].submit()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:27:20.123

查看您如何访问要调用的表单`submit()`。现在看看您如何访问表单以更改操作。其中之一显然是错误的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T17:35:15.673

制作一个 PHP 文件和具有不同名称的按钮会更容易，如下所示：

```
<form method="post" action="actions.php">
<input type="submit" name="action1" value="Action 1" />
<input type="submit" name="action2" value="Action 2" />
[...] 
```

和文件actions.php：

```
if(isset($_POST["action1"])) {
     // action 1
}
elseif(isset($_POST["action2"])) {
    // action 2
} 
```

# gwt - 使用 GWT 平台添加演示者时出现延迟绑定失败错误

> ID：10016248
> 
> 赞同：0
> 
> 时间：2012-04-04T17:25:09.390
> 
> 标签：gwt, gwt-platform

我不确定为什么会收到此错误：

> 原因：java.lang.RuntimeException：“com.mygwt.client.core.FrameView$Binder”的延迟绑定失败（您是否忘记继承所需的模块？）

尽管 View 和 Presenter java 文件与我在代码中使用的工作 Views 和 Presenter 具有相同的代码模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T04:52:07.437

您的客户端代码正在使用外部 JAR，它们需要在 GWT 的主模块中继承

您需要在 gwt.xml 中为此 API 添加条目

```
<inherits name='com.mygwt.client.core' /> 
```

# fortran - Fortran中实数的精度问题

> ID：10016261
> 
> 赞同：2
> 
> 时间：2012-04-04T17:26:06.207
> 
> 标签：fortran, precision, gfortran, real-datatype

我一直在尝试将 Fortran 用于我的研究项目，使用最新版本的 GNU Fortran 编译器 (gfortran)，但我在处理实数的方式上遇到了一些问题。如果您有例如代码：

```
program test
implicit none

real :: y = 23.234, z

z = y * 100000
write(*,*) y, z

end program 
```

你会得到输出：

```
23.23999    2323400.0 
```

我觉得这真的很奇怪。有人能告诉我这里到底发生了什么吗？看着 z 我可以看到 y 确实保留了它的精度，所以对于我认为不应该成为问题的计算。但是为什么 y 的输出与我指定的值不完全相同，我该怎么做才能使其完全相同？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T17:37:23.020

这不是问题 - 您所看到的只是计算机中数字的浮点表示。计算机不能精确地处理实数，而只能处理它们的近似值。可以在此处找到有关此内容的好读物：[每个计算机科学家都应该了解的浮点运算知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T17:37:17.263

只需用 替换`real`，`double precision`您就可以在大多数平台上将有效小数位数从大约 6 位增加到大约 15 位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T06:26:42.010

这里的问题不在于 Fortran，实际上它根本不是问题。这只是浮点运算的一个特性。如果您考虑如何将 23.234 表示为二进制中的“单个浮点数”，您会发现该数字必须保存到只有这么多位精度的小数。

关于浮点数要记住的一点是：**看起来四舍五入甚至以 10 为底的数字可能不会是 binary**。

有关浮点主题的简要概述，请查看[Wikipedia](https://en.wikipedia.org/wiki/Floating_point)文章。如需非常详尽的解释，请查看 Goldberg 的规范[论文](http://perso.ens-lyon.fr/jean-michel.muller/goldberg.pdf)(PDF)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T18:51:27.383

一般问题不仅限于 Fortran，而是以 10 为基数的实数在另一个有限精度基数中的表示。这个计算机科学问题在这里被问了很多次。

对于特定的 Fortran 方面，声明“真实”可能会给您一个单精度浮点数。将常量表示为没有类型限定符的“23.234”。没有小数点的常量“100000”是一个整数，因此表达式“y * 100000”导致整数到实数的隐式转换，因为“y”是一个实数变量。

有关这些问题的先前讨论，请参阅[扩展双精度](https://stackoverflow.com/questions/9211037/extended-double-precision/9215930)、[Fortran：整数*4 与整数（4）与整数（种类 = 4）](https://stackoverflow.com/questions/3170239/fortran-integer4-vs-integer4-vs-integerkind-4/3170438)和[Fortran 90 中是否有更好的双精度分配？](https://stackoverflow.com/questions/6146005/is-there-a-better-double-precision-assignment-in-fortran-90/6150181)

# ruby - 测试结果整数是否在一个范围内的任何特殊断言

> ID：10016263
> 
> 赞同：1
> 
> 时间：2012-04-04T17:26:29.093
> 
> 标签：ruby, unit-testing

我想测试一个实例变量是否位于一个数字范围内：

```
#part of the tested class
class Item
  def initialize(value = 70 + rand(30))
    @value = value
  end 
```

我尝试了[minitest 断言列表](http://bfts.rubyforge.org/minitest/MiniTest/Assertions.html)中的断言，但它们不起作用。我通过使用 assert_in_delta 解决了这个问题，如下所示：

```
#test_value.rb
class ValueTestCase < Test::Unit::TestCase
  def test_if_value_in_range
    item = Item.new
    assert_in_delta(85, item.value, 15)
  end
end 
```

但想知道是否对此有正式的断言。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T17:48:16.493

```
assert(item.value.between?(70, 100)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-04T17:39:19.207

另一种方法是使用`Range#include?`：

```
assert_includes 70..100, p.value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-25T12:03:51.667

断言（（最小..最大）===结果）

与 Test::Unit 一起使用。

# android - 安卓上的日期选择器

> ID：10016265
> 
> 赞同：0
> 
> 时间：2012-04-04T17:26:37.457
> 
> 标签：android, android-layout, android-widget

我在 android 上的 DatePicker 中遇到问题我无法使其小于默认大小

这是使用的 XML 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
       <DatePicker
          android:id="@+id/datePicker1"
          android:layout_width="70dp"
          android:layout_height="40dp"
          android:layout_alignParentLeft="true"
          android:layout_below="@+id/addevent_location" />
</RelativeLayout> 
```

请提供任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:42:39.273

我还没有找到调整它大小的方法，但是已经看到了他们使用 DatePicker 作为对话框的实现。日期呈现为带有编辑按钮的 TextView，该按钮启动 DatePicker 对话框。它在不编辑时节省了屏幕空间......

[http://developer.android.com/resources/tutorials/views/hello-datepicker.html](http://developer.android.com/resources/tutorials/views/hello-datepicker.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:45:17.743

不可以。您不能将视图的大小缩小到超出其最小尺寸。使用 wrap_content 可确保 DatePicker 足够大以包含其内容。

```
<DatePicker
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:34:44.783

据我所知，`DatePicker`小部件本身无法重新调整大小，当我启动 Android 时，我尝试了各种方法让它更小，但没有任何结果。

如果您希望通过缩小屏幕空间来获得屏幕空间，我建议您使用[`DatePickerDialog`](http://developer.android.com/reference/android/app/DatePickerDialog.html)开发人员创建的众多可用自定义选择器中的一个或其中之一（其中许多可在网络上获得，并且大多数构建良好且可定制）。

`DatePickerDialog`如果您不熟悉此小部件，[这里有一个链接](http://developer.android.com/resources/tutorials/views/hello-datepicker.html)可让您开始使用。

# c# - WIA 错误“消息=无法加载文件或程序集 'Interop.WIA”

> ID：10016282
> 
> 赞同：0
> 
> 时间：2012-04-04T17:28:17.657
> 
> 标签：c#, .net, wia

我在 .NET Frame Work 4.0 上使用 C# 创建了一个项目，并且我使用了 WIA（Windows 图像采集）并且它工作成功。
当我在另一台 PC 上运行 .exe 文件时，我收到一条消息：

> > System.BadImageFormatException 未处理 Message=Could not load file or assembly 'Interop.WIA, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' 或其依赖项之一。

甚至我已经在那台 PC 上成功安装了 WIA.dll。

**注意：* *我已经在 windows 7 上创建了项目，并且 .exe 尝试在 windows XP 上运行，其他功能运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-06-24T06:57:59.023

当您没有在 IIS 中为应用程序池启用 32 位应用程序时，通常会发生这种情况

要将 IIS 配置为运行 32 位应用程序，您必须执行以下步骤：

```
Open IIS.
Go to the current server – > Application Pools.
Select the application pool your 32-bit application will run under.
Click the Advanced setting or Application Pool Default.
Set Enable 32-bit Applications to True. 
```

希望能帮助到你

# iphone - xcode 加载视图

> ID：10016284
> 
> 赞同：0
> 
> 时间：2012-04-04T17:28:26.477
> 
> 标签：iphone, objective-c, ios, xcode

我想在我的应用程序启动时下载文件时显示进度视图。加载视图应该处于活动状态，直到下载结束，然后，将显示主选项卡控制器。达到它的最佳方法是什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:46:17.087

我认为，首先加载“主选项卡控制器”，然后在顶部添加一个视图，显示 Progress 应该可以完成工作。

也许 MBProgressHUD ( [GitHub](https://github.com/matej/MBProgressHUD) ) 对你来说可能很有趣。

如果用户看到的只是进步，那就太好了。所以使前面的视图半透明。

# python - Django 1.4 中的多对多 SQL 生成语句

> ID：10016287
> 
> 赞同：0
> 
> 时间：2012-04-04T17:28:38.937
> 
> 标签：python, django, many-to-many, django-1.4

django1.4 发行说明说：

*   数据库后端的多对多 SQL 生成函数将被删除。

有人可以指出这些功能吗？它们位于哪里？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:57:29.657

[它在 django 1.4 中被删除，但您可以在django 1.3 源代码](https://github.com/django/django/blob/1.3.X/django/db/backends/creation.py#L135)中看到代码（和弃用警告）。

# c# - 如何更改已禁用选项卡控件的颜色

> ID：10016289
> 
> 赞同：0
> 
> 时间：2012-04-04T17:28:48.393
> 
> 标签：c#, winforms, colors, tabcontrol

我当前的程序在启动时禁用 tabControl，直到按下按钮。但是我不喜欢选项卡变灰时的外观。

我希望它看起来一样，但仍然禁用它。有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:34:23.260

您需要自己绘制 TabControl 才能实现此目的。[这是 CodeProject.com 上的教程](http://www.codeproject.com/Articles/12185/A-NET-Flat-TabControl-CustomDraw)。不幸的是，实现它需要一些时间，但这当然取决于你。

而不是自己绘制 TabControl，也许您可​​以禁用 TabPage 上的控件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:36:31.147

如果您使用的是 WPF，则可以使用模板来自定义您禁用的样式。请参见：

[http://msdn.microsoft.com/en-us/library/ms754137.aspx](http://msdn.microsoft.com/en-us/library/ms754137.aspx)

注意禁用控件等的视觉状态。

# c++ - C++ 创建和使用类

> ID：10016295
> 
> 赞同：0
> 
> 时间：2012-04-04T17:29:35.070
> 
> 标签：c++, class, constructor

我必须为作业创建一个班级，我已经尽我所能，我已经完成了研究并且我已经阅读了我的教科书。我还需要对我的课程做些什么来制作我的 Main run 中的内容？您需要知道的一切都在代码描述中。

```
/*  LAB07.cpp
    ALEXANDER YHAP
    04/2012

    In this lab you will create a new class called LabMetaData. Objects of this
    class could be used in future lab assignments to store information about 
    the lab itself. 

    An object of class LabMetaData has the following attributes:
    .   Lab Number - A whole, positive number. Zero is valid.
    .   Lab Title - A title for the Lab Assignment
    .   Lab Author - The name of the programmer that wrote the lab.
    .   Lab Data - The date the lab was written, stored as three integer 
        numbers. The Day must be between 1 and 31\. The month must be between 1 
        and 12\. The year must be 4 digits and in the 21st Century (between 2000 
        and 2099).
    .   Lab Description - A description of the Lab Assignment.

    An object of class LabMetaData has the following methods:
    .   Constructor - set the Lab Number to zero, the Lab date to 1/1/2010, 
        and all other attributes to empty strings. (Hint: call the SetData() 
        from the constructor function to avoid duplicating your code)
    .   SetData() - sets the attributes of the object to the parameters as long 
        as the parameters are valid. Rules: 
        o   ALL of the parameters must be valid in order for ANY of the 
            attributes to change. 
        o   Validation rules are explained above for Lab Number and Lab Date. 
            Title, Author, and Description have no validation.
        o   If no problems are detected, return TRUE. Otherwise return FALSE.
    .   ShowData() - displays all the object's attributes on the console. 

    The main() function and a sample executable is provided. 
*/

#include <iostream>
using namespace std;
//Class Declaration Section
class LabMetaData 
{
    private:
    int labNum;
    string labTitle;
    string labAuthor;
    int Month;
    int Day;
    int Year;
    string labDesc;    

    public:    
//    LabMetaData(int labNum, string labTitle, string labAuthor,int Month, int Day, int Year, string labDesc); //constructor
    LabMetaData(int = 0, string = "Empty Title", string = "Empty Author",int = 01, int = 01, int = 2012, string = "Empty Description");
    void LabMetaData::SetData(int, string, string, int, int, int, string);
    void LabMetaData::ShowData();
};
//Class Implementation Section
LabMetaData::LabMetaData(int Num, string Title, string Author, int MM, int DD, int YYYY, string Desc)
{
    labNum = Num;
    labTitle = Title;
    labAuthor = Author;
    Month = MM;
    Day = DD;
    Year = YYYY;
    labDesc = Desc;
}

void LabMetaData::SetData(int Num, string Title, string Author, int MM, int DD, int YYYY, string Desc)
{
//    labNum = 7;
//    labTitle = "N/A";
//    labAuthor = "Unknown";
//    Month = 01;
//    Day = 01;
//    Year = 2012;
//    labDesc = "N/A";
//    return;
    labNum = Num;
    labTitle = Title;
    labAuthor = Author;
    Month = MM;
    Day = DD;
    Year = YYYY;
    labDesc = Desc;
    return;
}

void LabMetaData::ShowData()
{
     cout << "Lab " << labNum << ": " << labTitle << endl;
     cout << "Created by: " << labAuthor << endl;
     cout << "Date: " << Month << "/" << Day << "/" << Year << endl;
     cout << "Description: " << labDesc << endl;
     cout << endl;

     return;
}

int main()
{

    LabMetaData Lab7; 

    cout << endl << "Uninitialized: " << endl;
    Lab7.ShowData();

    Lab7.SetData(7,
    "Introduction to Classes",
    "Alexander Yhap",
    10, 3, 2010,
    "In this lab you will create a new class called LabMetaData. Objects of this class could be used in future lab assignments to store information about the lab itself.");

    cout << endl << "Intialized: " << endl;
    Lab7.ShowData();

    if(!Lab7.SetData(-1, "Test", "Test", 13, 32, 11, "Causing Errors"))
        cout << "\nErrors!" << endl;

    cout << endl << "After Invalid Modification Attempt: " << endl;
    Lab7.ShowData();

    cout << endl << endl;
    system("pause");
    return 0;
} 
```

* * *

错误消息是：

```
prog.cpp:32:27: error: no 'void LabMetaData::SetData()' member function declared in class 'LabMetaData'
prog.cpp:44:28: error: no 'void LabMetaData::ShowData()' member function declared in class 'LabMetaData'
prog.cpp: In function 'int main()':
prog.cpp:58:17: error: no matching function for call to 'LabMetaData::LabMetaData()'
prog.cpp:21:1: note: candidates are: LabMetaData::LabMetaData(int, std::string, std::string, int, int, int, std::string)
prog.cpp:5:1: note:                 LabMetaData::LabMetaData(const LabMetaData&)
prog.cpp:61:10: error: 'class LabMetaData' has no member named 'ShowData'
prog.cpp:63:10: error: 'class LabMetaData' has no member named 'SetData'
prog.cpp:66:10: error: 'class LabMetaData' has no member named 'ShowData'
prog.cpp:68:9: error: 'Lab4' was not declared in this scope
prog.cpp:72:10: error: 'class LabMetaData' has no member named 'ShowData' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:34:04.380

您需要在类定义中添加方法声明。有一个大小写不匹配：

```
class LabMetaData 
{
//....
    void setData(int, string, string, int, int, int, string); // should be SetData
    void showData(); // should be ShowData
}; 
```

您还缺少该类的默认构造函数：

```
class LabMetaData 
{
//....
   LabMetaData(); // <-- default constructor
}; 
```

因此你不能这样做：

```
LabMetaData Lab7; 
```

因为这试图调用缺少的默认构造函数。定义一个或将参数传递给构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:37:18.187

(1) 第一条错误消息：`error: no 'void LabMetaData::SetData()' member function declared in class 'LabMetaData'`意味着您应该仔细查看您的函数`setData`并确保它们匹配：

```
void              setData(int, string, string, int, int, int, string);
                  |       |
void LabMetaData::SetData() 
```

我在这里注意到，您的大小写错误，并且在定义中没有参数。这些必须匹配。你的`showData`功能也有大写错误。

(2) 错误消息：`error: no matching function for call to 'LabMetaData::LabMetaData()'`表示您的类没有收到自动默认构造函数，（因为您给了它一个需要参数的构造函数），因此它不知道如何在该行正确创建一个：

```
LabMetaData Lab7; 
```

因此，您要么必须使用参数构造它，要么提供默认构造函数：

```
void LabMetaData::LabMetaData() {
    //stuff
} 
```

您所有其余的错误都是由于这两个问题造成的。

(3) 回复您的评论，您会收到以下错误`Lab4`：

```
if(!Lab4.SetData(-1, "Test", "Test", 13, 32, 11, "Causing Errors")) 
```

但是您从未创建过一个名为`Lab4`. 您的意思是在对象上调用函数`Lab7`吗？另外，您说该`SetData`函数不应返回任何内容。我看不出它怎么会在不抛出异常的情况下失败，所以我认为你根本不需要那个`if`声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:34:50.610

C++ 区分大小写。 `setData`不一样`SetData`。您需要按照定义的方式调用它。

# sql - 使用光标陷入无限循环

> ID：10016296
> 
> 赞同：0
> 
> 时间：2012-04-04T17:29:39.783
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我是 SQL 新手。我的问题是我在下面的代码中找不到无限循环。查询一直在执行，但我不知道为什么。谁能指出我的代码中的错误？

其他详细信息：我将为 3500 个条目运行此查询。我知道我的查询可能会运行得太慢。因此，我也有兴趣了解任何更快的方法。

提前致谢。

```
DECLARE @intCounter INT,@strNo VARCHAR(8)
DECLARE @strResult VARCHAR(12),@strResult1 VARCHAR(2),@strResult2 VARCHAR(2),@strResult3 VARCHAR(1),@strResult4 VARCHAR(1),@strResult5 VARCHAR(3),@strResult6 VARCHAR(2)
DECLARE @intDecimalValueYear INT,@intDecimalValueMonth INT,@intDecimalValueDay INT,@intDecimalValueTimer1 INT,@intDecimalValueTimer2 INT,@intDecimalValueTimer3 DECIMAL(7,2),@intCounterTemp INT
DECLARE @intRemainder DECIMAL(7,2),@intDividend bigint,@strBranchCode VARCHAR
DECLARE @intWidth1 INT,@intWidth2 INT, @intWidth3 INT
DECLARE @CharacterSet VARCHAR
DECLARE C1 CURSOR FOR SELECT No FROM Pol 
WHERE No='0900001'
OPEN C1
    SET @CharacterSet='— :;?@[\]^ˆ_`{|}~¡¦¨¯´¸¿˜‘”&lt;=>±×÷¢£¤¥§©¬®°µ¶·†‡•…‰€0¼½¾123456789AªÁÀÂÄÃÅÆBCÇDÐEÉÈÊËFƒGHIÍÌÎÏJKLMNÑOºÓÒÔÖÕØŒPQRSŠßTÞ™UÚÙÛÜVWXYÝŸZ'
    SET @intCounter=0
    SET @strResult2=''
    SET @strResult3=''
    SET @strResult4=''
    SET @strResult5=''
    SET @strResult6=''
    FETCH NEXT FROM C1 INTO @strNo
    WHILE @@FETCH_STATUS=0
        BEGIN   
            SET @intCounter = @intCounter + 1
            SET @intDecimalValueYear=YEAR(GETDATE())
            SET @intDecimalValueMonth=MONTH(GETDATE())
            SET @intDecimalValueDay=DAY(GETDATE())
            SET @intDecimalValueTimer1=(DATEPART(HH,CURRENT_TIMESTAMP) * 3600) + (DATEPART(MI,CURRENT_TIMESTAMP) * 60) + (DATEPART(SS,CURRENT_TIMESTAMP))
            SET @intDecimalValueTimer2=(DATEPART(MS,CURRENT_TIMESTAMP))
            SET @intDecimalValueTimer3=@intDecimalValueTimer1+(@intDecimalValueTimer2/1000)
            SET @intCounterTemp=@intCounter
            SET @strResult1='HQ'

            IF @intCounter > LEN(@CharacterSet)
                BEGIN 
                    SET @intCounter = 1 
                END
            --------------
            WHILE @intDecimalValueYear > 0
                BEGIN
                    SET @intRemainder = @intDecimalValueYear % LEN(@CharacterSet)
                    SET @intDecimalValueYear = @intDecimalValueYear / LEN(@CharacterSet)
                    SET @strResult2 = (RIGHT(LEFT(@CharacterSet, @intRemainder + 1),1)) + @strResult2
                END
            IF LEN(@strResult2)=1
                BEGIN
                    SET @strResult2 = '—'
                END
            ELSE IF LEN(@strResult2)=0
                BEGIN
                    SET @strResult2 = '——' + @strResult2
                END
            --------------
            WHILE @intDecimalValueMonth > 0
                BEGIN
                    SET @intRemainder = @intDecimalValueMonth % LEN(@CharacterSet)
                    SET @intDecimalValueMonth = @intDecimalValueMonth / LEN(@CharacterSet)
                    SET @strResult3 = (RIGHT(LEFT(@CharacterSet, @intRemainder + 1),1)) + @strResult3
                END
            IF LEN(@strResult3)=0
                BEGIN
                    SET @strResult3 = '—'
                END
            --------------
            WHILE @intDecimalValueDay > 0
                BEGIN
                    SET @intRemainder = @intDecimalValueDay % LEN(@CharacterSet)
                    SET @intDecimalValueDay = @intDecimalValueDay / LEN(@CharacterSet)
                    SET @strResult4 = (RIGHT(LEFT(@CharacterSet, @intRemainder + 1),1)) + @strResult4
                END
            IF LEN(@strResult4)=0
                BEGIN
                    SET @strResult4 = '—'
                END
            -------------- 
            WHILE @intDecimalValueTimer3 > 0
                BEGIN
                    SET @intRemainder = @intDecimalValueTimer3 % LEN(@CharacterSet)
                    SET @intDecimalValueTimer3 = @intDecimalValueTimer3 / LEN(@CharacterSet)
                    SET @strResult5 = (RIGHT(LEFT(@CharacterSet, @intRemainder + 1),1)) + @strResult5
                END
            IF LEN(@strResult5)=2
                BEGIN
                    SET @strResult5 = '—' + @strResult5
                END
            IF LEN(@strResult5)=1
                BEGIN
                    SET @strResult5 = '——' + @strResult5
                END
            IF LEN(@strResult5)=0
                BEGIN
                    SET @strResult5 = '———'
                END
            -------------
            WHILE @intCounterTemp > 0
                BEGIN
                    SET @intRemainder = @intCounterTemp % LEN(@CharacterSet)
                    SET @intCounterTemp = @intCounterTemp / LEN(@CharacterSet)
                    SET @strResult6 = (RIGHT(LEFT(@CharacterSet, @intRemainder + 1),1)) + @strResult6
                END
            IF LEN(@strResult6)=1
                BEGIN
                    SET @strResult6 = '—' + @strResult6
                END
            ELSE IF LEN(@strResult6)=0
                BEGIN
                    SET @strResult6 = '——'
                END
            -------------
            --SET @strResult=@strResult1 + @strResult2 + @strResult3 + @strResult4 + @strResult5 + @strResult6

            UPDATE POL
            SET ID=@strResult1 + @strResult2 + @strResult3 + @strResult4 + @strResult5 + @strResult6
            WHERE No=@strNo

            FETCH NEXT FROM C1 INTO @strNo
    END
CLOSE C1
DEALLOCATE C1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:43:50.427

这是问题所在（忽略代码看起来完全奇怪的事实）：

```
DECLARE @CharacterSet VARCHAR 
```

这将@CharacterSet 声明为 VARCHAR(1)，因此除以 LEN(@CharacterSet) 永远不会使值变小，并且您的代码将停留在第一个 WHILE 循环中。@CharacterSet 的赋值被截断为一个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:51:06.320

我同意史蒂夫的观点，您应该将 VARCHAR 设置为一定长度。但是，我认为实际上是因为 @CharacterSet 永远不会改变您陷入无限循环。

像这样的每一条语句都会让你进入一个无限循环：

```
SET @intDecimalValueYear = @intDecimalValueYear / LEN(@CharacterSet)
SET @intDecimalValueMonth = @intDecimalValueMonth / LEN(@CharacterSet)
SET @intDecimalValueDay = @intDecimalValueDay / LEN(@CharacterSet)
-- etc... 
```

就像你一遍又一遍地将任何数字除以 2 一样。它永远不会达到 0，但会接近。

# git - Git：从远程拉

> ID：10016302
> 
> 赞同：4
> 
> 时间：2012-04-04T17:30:04.167
> 
> 标签：git

这是我的设置：我在家里和大学工作，遥控器存储在网上。所有 3 个位置都有三个分支，例如 br1、br2 和 br3。没什么特别的，每个工作站的每个分支都是一样的。换句话说，家里的br1，工作的br1和远程的br1都对应同一个分支等等。

现在，当我尝试在家里拉 br2 时，我收到一条消息，说我必须指定我需要合并的分支。我知道发生了什么以及如何纠正它，但我无法弄清楚它为什么会发生。git不会与同名分支合并吗？我是否必须在配置文件中为我拥有的每个分支创建条目？

附带说明一下， git rm --cached 和 git reset --mixed 有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:38:35.207

我认为发生的事情是您在本地创建了分支并将其推送到远程。
在这种情况下，本地分支没有上游。

你可以设置上游

```
git branch --set-upstream foo origin/foo 
```

> -u
> 
> --set-upstream
> 
> 对于每个最新或成功推送的分支，添加上游（跟踪）引用，由无参数 git-pull(1) 和其他命令使用。有关更多信息，请参阅 git-config(1) 中的 branch..merge。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:43:13.970

您不必手动编辑配置文件。我建议删除分支并从头开始检查跟踪分支。请注意，您不需要推送任何本地更改：

```
git branch -D br2
git checkout --track origin/br2 
```

如果您使用 --track 检出远程分支，它们将在推拉时始终正确设置。

# java - 如何使用 Dozer 将数组映射到复杂类型

> ID：10016304
> 
> 赞同：0
> 
> 时间：2012-04-04T17:30:16.847
> 
> 标签：java, dozer

我正在使用 Dozer 来映射一些 bean，并且我有一个我无法弄清楚的映射。

这是我的课程：

```
class A{
    private ComplexeType type;
    //Constructors & getters    
}

class B{
    private String[] type;
    //Constructors & getters 
}

class ComplexteType{
     private List<String> list;
    //Getter for the list, no constructor
} 
```

如何将 A 类映射到 B 类？

我想使用xml将A类的字段类型映射到B类的字段类型。

这是xml文件：

```
<mapping>
        <class-a>A</class-a>
        <class-b>B</class-b>
        <field custom-converter="AToBCustomConverter">
            <a>type</a>
            <b>type</b>
        </field>
    </mapping> 
```

这是我的 CustomConverter 中的一个 sippet

```
if (source == null) {
            return null;
        }
        B dest = null;
        if (source instanceof java.lang.String) {
            // check to see if the object already exists
            if (destination == null) {
                dest = new A();
            } else {
                dest = (A) destination;
            }
            dest.getTypes().add((String) source);
            return dest;
        } else if (source instanceof B) {
            String[] sourceObj = ((B) destination)
                    .getType()
                    .toArray(
                            new String[((B) destination)
                                    .getType().size()]);
            return sourceObj;
        } else {
            throw new MappingException(
                    "Converter StatResultCustomConverter used incorrectly. Arguments passed in were:"
                            + destination + " and " + source);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:17:52.953

在这种情况下，我认为您`CustomConverter`没有必要，请参见[此处](http://dozer.sourceforge.net/documentation/collectionandarraymapping.html)。

在你的映射文件中试试这个：

```
<mapping>
  <class-a>A</class-a>
  <class-b>B</class-b>
  <field>
    <a>type.list</a>
    <b>type</b>
  </field>
</mapping> 
```

Dozer*应该*自动执行嵌套映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:48:54.040

这是我用来解决问题的映射。

```
<mapping>
  <class-a>Q</class-a>
  <class-b>B</class-b>   
  <field>
    <a is-accessible="true">type<list</a>
    <b is-accessible="true">type</b>
  </field>
</mapping> 
```

# c# - C# MDI - 当 MDIChild 超出范围时，在 MDI 调整大小后隐藏 MDI 滚动条

> ID：10016311
> 
> 赞同：0
> 
> 时间：2012-04-04T17:31:06.860
> 
> 标签：c#, scrollbar, mdi, wndproc, mdiparent

我有一个 MDI Parent ( **Form1** ) 和一个 MDI Child ( **Form2** )。当*Form2*超出 Form1 的边界*时*，我目前已禁用 Form1 的滚动条，方法是*在*Form2 中放置以下代码：

 **```
protected override void WndProc(ref Message m)
{
    const int WM_MOVE = 0x0003;

    switch (m.Msg)
    {
        case WM_MOVE:
            return;

        default:
            base.WndProc(ref m);
            break;
    }
} 
```

当用户将*Form2*拖出*Form1的范围时，* *Form1*的滚动条将不会显示*Form2*是否超出范围。*但是，如果用户将Form1的***大小调整**到*Form2*超出范围的位置，它将显示滚动条。

 *****我该如何解决它，以免发生这种情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:18:47.367

我现在为自己找到了一个可行的解决方案。在 MDI 表单 (Form1) 上。我使用以下代码。它至少有助于摆脱闪烁。

```
 [System.Runtime.InteropServices.DllImport("user32.dll")]

    private static extern int ShowScrollBar(IntPtr hWnd, int wBar, int bShow);

    protected override void WndProc(ref Message m)
    {
        const int WM_MOVE = 0x0003;
        const int WM_ENTERSIZEMOVE = 0x0231;
        const int WM_EXITSIZEMOVE = 0x0232;
        const int SB_BOTH = 3;

        switch (m.Msg)
        {
            // Use SuspendLayout() instead of having constant flickering on resize starting
            case WM_ENTERSIZEMOVE:
                this.SuspendLayout();
                base.WndProc(ref m);
                break;

            // Do not forget to ResumeLayout() when resizing finished
            case WM_EXITSIZEMOVE:
                this.ResumeLayout();
                base.WndProc(ref m);
                break;

            default:
                ShowScrollBar(this.Handle, SB_BOTH, 0);
                base.WndProc(ref m);
                break;
        }
    } 
```*******

# php - javascript 函数仅提供第一个 FileUpload 的文件大小，而不提供其他文件大小

> ID：10016313
> 
> 赞同：1
> 
> 时间：2012-04-04T17:31:16.710
> 
> 标签：php, javascript, upload

我正在通过 javascrpit 函数制作文件输入框，如果用户想附加更多文件，该函数是

```
<script type="text/javascript">
var upload_number = 1;
var attachmentlimit = 5;
function addFileInput() {

var d = document.createElement("div");
var file = document.createElement("input");
file.setAttribute("type", "file");
file.setAttribute("name", "attach[]");
d.appendChild(file);
document.getElementById("moreUploads").appendChild(d);
upload_number++;
if(upload_number == attachmentlimit) {
      document.getElementById('moreUploadsLink').style.display='none';
    }

    }
    </script> 
```

我还通过javascript函数检查客户端文件输入的大小，

```
 <script type="text/javascript">
  var myFile = document.getElementById('attach');
    myFile.addEventListener('change', function() {
   var  size = this.files[0].size;
   alert(size,'File Size Exceeds'); 
   });
  </script> 
```

问题是，上面的 javascript 函数只给出了第一个文件上传框的大小警报，而不是其他框。任何告诉如何制作此文件以提供所有文件上传大小的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:35:18.467

将事件侦听器添加`file`到`d.appendChild(file)`. 否则，如果你从不告诉 JS 去监听事件，你怎么能指望它呢？

# string - 使用 Perl 从多行末尾删除 n 个字符

> ID：10016314
> 
> 赞同：2
> 
> 时间：2012-04-04T17:31:17.143
> 
> 标签：string, perl

我想使用 PERL 从每一行中删除 n 个字符。

例如，我有以下输入：

catbathatxx（长度 11；11%3=2 个字符）（从此行中删除 2 个字符）

mansunsonx (长度 10; 10%3=1 个字符) (从这一行中删除 1 个字符)

```
#!/usr/bin/perl -w
open FH, "input.txt";
@array=<FH>;
foreach $tmp(@array)
{
$b=length($tmp)%3;
my $c=substr($tmp, 0, length($tmp)-$b);
print "$c\n";
} 
```

我想输出最终的字符串（在字符被删除之后）。

但是，这个程序没有给出正确的结果。你能指导我错误是什么吗？

非常感谢。如果有任何疑问/澄清，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T17:46:05.647

正`\K`则表达式序列使这一点更加清晰；它是在 Perl v5.10.0 中引入的。

代码看起来像这样

```
use 5.10.0;
use warnings;

for (qw/ catbathatxx mansunsonx /) {
  (my $s = $_) =~ s/^ (?:...)* \K .* //x;
  say $s;
} 
```

**输出**

```
catbathat
mansunson 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:52:10.710

我假设尾随空格并不重要。

```
#!/usr/bin/env perl

use strict; use warnings;

use constant MULTIPLE_OF => 3;

while (my $line = <DATA>) {
    $line =~ s/\s+\z//;
    next unless my $length = length $line;
    my $chars_to_remove = $length % MULTIPLE_OF;
    $line =~ s/.{$chars_to_remove}\z//;
    print $line, "\n";
}

__DATA__
catbathatxx
mansunsonx
0123456789
012345678 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:35:06.173

一般来说，您会希望发布您得到的*结果*。话虽如此...

文件中的每一行末尾都有一个`\n`（或`\r\n`在 Windows 上），您没有考虑到该行。你需要`chomp()`排队。

**编辑添加：**我的 perl 因不使用而生锈，但如果记忆对我有用，您实际上可以`chomp()`在读取文件后整个数组：`chomp(@array)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T17:37:54.487

您应该在数组上使用 chomp() ，如下所示：

```
@array=<FH>;
chomp(@array); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T18:01:32.710

```
perl -plwe 'chomp; $c = length($_) % 3; chop while $c--' < /tmp/zock.txt 
```

查找 中的选项[`perlrun`](http://perldoc.perl.org/perlrun.html)。请注意，行尾也是字符。使用`chomp`;将它们排除在外 `-l`使用该选项将它们重新添加到输出中。用于[`chop`](http://p3rl.org/chop)有效地从字符串末尾删除字符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-25T14:18:10.520

阅读您的代码，您正在尝试仅打印前 'nx3' 个字符，以获得每行的最大值 n。

下面的代码使用一个简单的正则表达式来做到这一点。

对于每一行，它首先删除行结尾，然后贪婪匹配尽可能多`.{3}`的（`.`匹配任何字符，`{3}`要求正好 3 个）。

这种方法的内存需求（与使用文件大小的数组相比）是固定的。如果您的文件与可用内存相比较小，这并不重要，但有时文件是千兆字节，有时内存非常小。

总是值得使用反映变量用途的变量名，而不是像`$a`or之类的东西`@array`。在这种情况下，我只使用了一个变量，我称之为`$line`.

完成文件后立即关闭文件也是一种好习惯。

```
#!/usr/bin/perl
use strict;
use warnings; # This will apply warnings even if you use command perl to run it

open FH, '<', 'input.txt'; # Use three part file open - single quote where no interpolation required.
for my $line (<FH>){
    chomp($line);  
    $line =~ s/((.{3})*).*/$1\n/;
    print $line;
}
close FH; 
```

# php - 使用 bindParam() 的非常基本的 PDO 方法

> ID：10016315
> 
> 赞同：1
> 
> 时间：2012-04-04T17:31:21.250
> 
> 标签：php, sqlite, pdo

我有一个类似的类，有很多方法，但`getData()`只返回`$column`参数的值。

```
private $db;

function __construct()
{
    $this->db = new PDO('sqlite:\db');
}

public function getData($rowid, $column)
{
    $st = $this->db->prepare('SELECT ? FROM tbl WHERE rowid=?');
    $st->bindParam(1, $column, PDO::PARAM_STR);
    $st->bindParam(2, $rowid, PDO::PARAM_INT);
    if ($st->execute())
        return $st->fetchColumn();
    else
        return false;
} 
```

班级的其他部分和剩下的一半`getData()`作品。这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:35:18.513

`bindParam`用于绑定参数，而不是标识符。您在那里绑定的值将扩展为：

```
SELECT 'some_value' FROM tbl WHERE rowid='some_other_value'; 
```

...因此相当于：

```
SELECT 'some_value'; 
```

您应该只将参数用于*实际参数*：

```
$this->db->prepare('SELECT '.$column.' FROM tbl WHERE rowid=?'); 
```

如果您的列是用户提供的并且您想要转义它，请使用正确的转义函数。在这种情况下，它是[`SQLite3::escapeString()`](http://php.net/sqlite3.escapeString)：

```
$column = SQLite3::escapeString($column);
$this->db->prepare('SELECT '.$column.' FROM tbl WHERE rowid=?'); 
```

如果该列不是用户提供的，则您实际上不必转义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:38:02.270

标识符不是字符串。
你不能绑定标识符。
您必须将它们列入白名单。

或者 - 更好 - 以完全不需要动态字段名的正确方式设计您的应用程序。

# r - 如何在 ggplot2 直方图中手动填充颜色

> ID：10016316
> 
> 赞同：10
> 
> 时间：2012-04-04T17:31:21.857
> 
> 标签：r, ggplot2

我正在生成一个直方图，我想用特定颜色为某些组着色。这是我的直方图：

![在此处输入图像描述](../Images/bb42d3b02163a95927c075bbac50f00a.png)

我有 14 组，我想将前 7 组染成红色，接下来的 4 组染成蓝色，最后 3 组染成橙色。我怎样才能在ggplot中做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-21T22:10:14.287

**更新后的版本**

无需指定分组列，`ggplot`命令更紧凑。

```
library(ggplot2)
set.seed(1234)

# Data generating block
df <- data.frame(x=sample(1:14, 1000, replace=T))
# Colors
colors <- c(rep("red",7), rep("blue",4), rep("orange",3))

ggplot(df, aes(x=x)) +
  geom_histogram(fill=colors) +
  scale_x_discrete(limits=1:14) 
```

![在此处输入图像描述](../Images/e5cb9deb2ac3ab4a3736629f14e634d0.png)

**旧版**

```
library(ggplot2)

# 
# Data generating block
#
df <- data.frame(x=sample(c(1:14), 1000, replace=TRUE))
df$group <- ifelse(df$x<=7, 1, ifelse(df$x<=11, 2, 3))

#
# Plotting
#
ggplot(df, aes(x=x)) +
  geom_histogram(data=subset(df,group==1), fill="red") +
  geom_histogram(data=subset(df,group==2), fill="blue") +
  geom_histogram(data=subset(df,group==3), fill="orange") +
  scale_x_discrete(breaks=df$x, labels=df$x) 
```

![在此处输入图像描述](../Images/0b143dc2472bfaa36d4f3198f408bb1b.png)

# mysql - 在 MySQL 中插入数据时出错

> ID：10016320
> 
> 赞同：-4
> 
> 时间：2012-04-04T17:31:36.740
> 
> 标签：mysql, jakarta-ee, servlets

当我在 db 表中执行插入时，发生异常，它说：

```
Data truncation error in mySQL while inserting data.. 
```

在：->

```
com.mysql.jdbc.MysqlDataTruncation: Data truncation: Data too long for column 'branchname' at row 1 
```

列类型是`varchar`

JSP：

```
<form action="BranchServlet" method="post">
<table align="center">
<tr>
<td align="center" colspan="2"><hr>Add Branch Details<hr></td>
</tr>

<tr>
<td align="left">Branch Name</td>
<td align="center"><input type="text" name="branchname"></td>
</tr>
<tr>
<td align="left">Branch Code</td>
<td align="center"><input type="text" name="branchcode"></td>
</tr>
<tr>
<td align="center">

</td>
</tr>
<tr>
<td align="center" colspan="2"><input type="submit" Value="Submit"></td>
</tr>
</table>
</form> 
```

小服务程序：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {

        String bname = request.getParameter("branchname");
        String bcode = request.getParameter("branchcode");

        BranchModel bm = new BranchModel();
        BranchDAO bd = new BranchDAO();

        bm.setBranchcode(bcode);
        bm.setBranchname(bname);

        bd.insert(bm);

        response.sendRedirect("branches.jsp");
    } 
```

道方法：

```
public void insert(BranchModel m)
    {
        try{
            Class.forName(driver);
            con = DriverManager.getConnection(url+db,"root","root");
            Statement st = con.createStatement();

            st.executeUpdate("insert into branches values('"+m.getBranchcode()+"','"+m.getBranchname()+"')");
            System.out.println("record inserted");
        }catch(Exception e)
        {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T17:37:30.163

您说该列是 varchar 类型，但不是什么大小的 varchar。这似乎是你问题的根源。我没有看到任何对文本输入大小进行限制的验证。输入验证需要将输入大小限制为相应 varchar 列的大小。

# android - 跨应用程序存储数据的最佳位置是什么

> ID：10016321
> 
> 赞同：0
> 
> 时间：2012-04-04T17:31:41.467
> 
> 标签：android, storage

我有应用程序 A 和 B（以及某天 C）。两者都需要对某些数据进行读/写访问。它不敏感，但同时我不希望它出现在用户面前（比如他们的下载文件夹或任何东西）。我还需要支持带或不带 SD 卡的手机。我也不知道应用程序的安装顺序（A 然后 B，或 B 然后 A）。

最好的存储方法是什么？

SharedPreferences 似乎是个好主意，但据我了解，它们只能用共享包名称来定义，如果该包是 A，那么在安装 A 之前，B 将无法使用它们。

内部存储是我的下一个想法，但我不知道哪些文件夹适合这个。

编辑 - 澄清要求：

应用程序 A、B 和 C 都使用相同的数据，并且需要在它们之间共享这些数据。无论首先安装什么应用程序，都应该创建此数据，然后所有其他应用程序都应该访问该数据。没有一个应用程序需要安装任何其他应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:42:19.630

您无法访问内部存储（除非您的设备已植根）以进行跨应用文件访问，但应用自己的内部缓存/文件目录除外。

就您而言，我可以推荐两种选择。

1.  使用[ContentProviders](http://developer.android.com/guide/topics/providers/content-providers.html)将应用程序的数据提供给其他应用程序。
2.  使用[外部存储](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)（SD 卡）来保存您的数据（不在应用程序的缓存目录中）并让您的应用程序独立读取/写入

# model-view-controller - 带有表单 cals servlet 的 Ext.js 4 窗口返回 JSON 但无法填充网格面板

> ID：10016322
> 
> 赞同：1
> 
> 时间：2012-04-04T17:31:44.113
> 
> 标签：model-view-controller, extjs, datastore, gridpanel, formpanel

我正在使用带有 MVC 的 Ext.js 4。我有一个弹出窗口，并询问用户一些标准。该窗口调用一个 servlet，它以 JSON 格式返回数据，然后应该填充一个网格。我可以通过 Firefly 看到 JSON 对象被返回。但是，网格没有被填充。原因是对 servlet 的后续调用是有必要的。这是因为我在两个地方指定了 URL。我知道这是错误的，但是如果省略其中一个，我会收到错误消息。

这是 app/controller/PSLocators.js

```
Ext.define('MyApp.controller.PSLocators', {
    extend: 'Ext.app.Controller',
    stores: [ 'PSLocators' ],
    models: [ 'PSLocator' ],
    views : [ 'pslocator.List' ]
}); 
```

这是 app/model/PSLocator.js

```
Ext.define('MyApp.model.PSLocator', 
{
    extend: 'Ext.data.Model',
    fields: 
    [
        'id', 
        'name',
        'address',
        'city',
        'state',
        'zip',
    ]
}); 
```

这是`app/store/PSLocators.js`. 这有第一个网址。这是不返回任何数据的那个。我认为我不应该在此处使用代理{}，但如果我删除代理 {}，则会收到错误消息

```
uncaught exception: [Exception... "'You are using a ServerProxy but have not supplied it with a url.' when calling method: [nsIDOMEventListener::handleEvent]" 
nsresult: "0x8057001c (NS_ERROR_XPC_JS_THREW_JS_OBJECT)" 
location: "JS frame :: chrome://firebug/content/net/spy.js :: callPageHandler :: line 812" data: no]"

Ext.define('MyApp.store.PSLocators', {
    extend: 'Ext.data.Store',
    model: 'MyApp.model.PSLocator',
    autoLoad: false,    // see also activate() in grid panel
    sortOnLoad: false,  // sorted by SAS
    proxy: 
    {
        type: 'ajax',
        url: MyGlobalData.contextPath + '/PSLocator',
        reader: 
        {
            type: 'json',
            root: 'data',  // the name of the array within the JSON dataset
            totalProperty: 'results',
            successProperty: 'success'
        }
    }
}); 
```

这是`app/view/pslocator/List.js`. 这有第二个网址。此 url 以 JSON 格式正确返回数据。如果我删除 URL，我会收到错误消息“未捕获的异常：未指定 URL”

```
Ext.define('MyApp.view.pslocator.List' ,{
    extend: 'Ext.grid.Panel',
    alias : 'widget.pslocatorlist',
    store : 'PSLocators',
    title : 'Store Locator',
    id    : 'pslocator.List',

    autoScroll: true,
    height: 400,
    columnLines: true,

    initComponent: function()
    {
        this.columns = [
            {header: 'ID'          , dataIndex: 'id'        , flex: .05 , align: 'center' },
            {header: 'Name'        , dataIndex: 'name'      , flex: .20 , align: 'left'   },
            {header: 'Address'     , dataIndex: 'address'   , flex: .20 , align: 'left'   },
            {header: 'City'        , dataIndex: 'city'      , flex: .10 , align: 'left'   },
            {header: 'State'       , dataIndex: 'state'     , flex: .05 , align: 'center' },
            {header: 'Zip'         , dataIndex: 'zip'       , flex: .05 , align: 'center' }
        ];

        this.callParent(arguments);
    },

    listeners:
    {
        activate: function()
        {
            this.un('activate', arguments.callee);
            var win = new Ext.Window(
            {
                id: 'id-pslocator-window',
                title: 'Show locations near which store?',
                items: [
                {
                    xtype      : 'form',
                    id         : 'id-pslocator-form',
                    bodyPadding: 5,
                    width      : 500,
                    height     : 125,
                    autoScroll : false,

                    // The form will submit an AJAX request to this URL when submitted
                    url: MyGlobalData.contextPath + '/PSLocator',

                    layout: 'auto',

                    defaults: 
                    {
                        anchor: '100%'
                    },

                    items: [
                    {
                        xtype       : 'textfield',
                        fieldLabel  : 'Store number',
                        name        : 'pStoreNumber',
                        labelWidth  : 200,
                        width       : 300,  // includes labelWidth
                        allowBlank  : false,
                        regex       : /^([0-9]+)([ ]*)$/,  
                        regexText   : 'Must be a single unsigned integer.',
                    }
                ],

                // Reset and Submit buttons
                buttons: [
                    {
                        text: 'Reset',
                        handler: function() 
                        {
                            this.up('form').getForm().reset();
                        }
                    },
                    {
                        text: 'Submit',
                        formBind: true, //only enabled once the form is valid
                        disabled: true,
                        handler: function() 
                        {
                            var form = this.up('form').getForm();
                            if (form.isValid()) 
                            {
                                form.submit(
                                {
                                    success: function(form, action) 
                                    {
                                        console.log('In success function');
                                        var myGrid = Ext.getCmp('id-pslocator-panel');
                                        console.log('myGrid = ' + myGrid);
                                        var myStore = myGrid.getStore();
                                        console.log('myStore = ' + myStore);
                                        myStore.load();  /* requires store be defined as above */
                                        myGrid.getView().refresh();

                                        var myPopup = Ext.getCmp('id-pslocator-window');
                                        myPopup.destroy();

                                    }  // end success function
                                });  // end form submit
                            }  // end if is valid
                        }  // end handler
                    }   //  end submit
                ]   // end buttons
                }]  // end items
            }); // end win

            win.show();
            // this.store.load();
        }
    }
});  // Ext.define 
```

有人可以帮忙，或者给我一个工作示例（提醒：我正在尝试使用 MVC 架构。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:32:50.993

您应该将代理配置存储在模型中，而不是存储在 ExtJS4 中。此外，您似乎只是想将您的商店搜索限制为特定的商店编号。您不需要通过表单提交 POST 请求来执行此操作。您应该向您的商店添加一个过滤器，以便服务器可以返回正确的数据。

免责声明：我没有测试过这段代码，但它应该足以让你继续前进。

**应用程序/模型/PSLocator.js**

```
Ext.define('MyApp.model.PSLocator', 
{
    extend: 'Ext.data.Model',
    fields: 
    [
        'id', 
        'name',
        'address',
        'city',
        'state',
        'zip',
    ],
    proxy: 
    {
        type: 'ajax',
        url: MyGlobalData.contextPath + '/PSLocator',
        reader: 
        {
            type: 'json',
            root: 'data',  // the name of the array within the JSON dataset
            totalProperty: 'results',
            successProperty: 'success'
        }
    }
}); 
```

**应用/商店/PSLocators.js**

```
Ext.define('MyApp.store.PSLocators', {
    extend: 'Ext.data.Store',
    model: 'MyApp.model.PSLocator',
    autoLoad: false,    // see also activate() in grid panel
    sortOnLoad: false,  // sorted by SAS,
    remoteFilter: true  // Needed so filter changes will go to the server
}); 
```

**应用程序/视图/pslocator/List.js**

```
Ext.define('MyApp.view.pslocator.List' ,{
    extend: 'Ext.grid.Panel',
    alias : 'widget.pslocatorlist',
    store : 'PSLocators',
    title : 'Store Locator',
    id    : 'pslocator.List',

    autoScroll: true,
    height: 400,
    columnLines: true,

    initComponent: function()
    {
        this.columns = [
            {header: 'ID'          , dataIndex: 'id'        , flex: .05 , align: 'center' },
            {header: 'Name'        , dataIndex: 'name'      , flex: .20 , align: 'left'   },
            {header: 'Address'     , dataIndex: 'address'   , flex: .20 , align: 'left'   },
            {header: 'City'        , dataIndex: 'city'      , flex: .10 , align: 'left'   },
            {header: 'State'       , dataIndex: 'state'     , flex: .05 , align: 'center' },
            {header: 'Zip'         , dataIndex: 'zip'       , flex: .05 , align: 'center' }
        ];

        this.callParent(arguments);
    }
});  // Ext.define 
```

**应用程序/视图/pslocator/Window.js**

```
Ext.define('MyApp.view.pslocator.Window', {
    extend: 'Ext.Window',
    alias: 'widget.storeselector',
    id: 'id-pslocator-window',
    title: 'Show locations near which store?',
    items: [
    {
        xtype      : 'form',
        id         : 'id-pslocator-form',
        bodyPadding: 5,
        width      : 500,
        height     : 125,
        autoScroll : false,

        // The form will submit an AJAX request to this URL when submitted
        url: MyGlobalData.contextPath + '/PSLocator',

        layout: 'auto',

        defaults: 
        {
            anchor: '100%'
        },

        items: [
        {
            xtype       : 'textfield',
            fieldLabel  : 'Store number',
            name        : 'pStoreNumber',
            labelWidth  : 200,
            width       : 300,  // includes labelWidth
            allowBlank  : false,
            regex       : /^([0-9]+)([ ]*)$/,  
            regexText   : 'Must be a single unsigned integer.',
        }
    ],

    // Reset and Submit buttons
    buttons: [
        {
            text: 'Reset',
            handler: function() 
            {
                this.up('form').getForm().reset();
            }
        },
        {
            text: 'Submit',
            formBind: true, //only enabled once the form is valid
            disabled: true,
            handler: function() 
            {
                var form = this.up('form').getForm();
                if (form.isValid()) 
                {
                    this.fireEvent('storeselected', form.getValues().pStoreNumber);
                    this.destroy();
                }  // end if is valid
            }  // end handler
        }   //  end submit
    ]   // end buttons
    }]  // end items
}); 
```

**应用程序/控制器/PSLocators.js**

```
Ext.define('MyApp.controller.PSLocators', {
    extend: 'Ext.app.Controller',
    stores: [ 'PSLocators' ],
    models: [ 'PSLocator' ],
    views : [ 'pslocator.List' ],
    init: function() {
        this.control({
            'pslocatorlist': {
                activate: this.showStoreSelector
            },
            'storeselector': {
                storeselected: this.updatePSLocatorStore
            }
        );
    },

    showStoreSelector: function()
    {
        var win = Ext.create('MyApp.view.pslocator.Window');
        win.show();
    },

    updatePSLocatorStore: function(storeId) {
        this.getPSLocationsStore().filter('id', storeId);
        this.getPSLocationsStore().load(); // I can't remember if this step is needed.
    }
}); 
```

我认为这就是我通过阅读代码所能得到的最好的结果。它应该让您了解如何使用 MVC 技术来发挥自己的优势，并希望让您走上正确的道路。

# java - 使用 Apache-POI 在 Excel 超链接中设置屏幕提示

> ID：10016325
> 
> 赞同：1
> 
> 时间：2012-04-04T17:32:00.590
> 
> 标签：java, excel, apache-poi

我正在使用 POI 3.8 使用 Java 创建 Excel 工作表

我已经使用 Prashant Jadhav 在 [How to Create Hyperlink to a filter on other sheet using Apache poi in Java? 中解释的方法成功创建了超链接？](https://stackoverflow.com/questions/6728945/how-to-create-hyperlink-to-a-filter-on-other-sheet-using-apache-poi-in-java)

但是我也想设置 ScreenTip

我试过

```
linkPrint.setLabel("Print"); 
```

但无济于事。

这甚至可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:32:58.830

Apache POI 中 HyperLink 的当前实现不可能包含工具提示。检查超链接接口。它只有 4 个属性：

*   链接地址。
*   链接标签。
*   只读属性的链接类型。

[http://poi.apache.org/apidocs/org/apache/poi/common/usermodel/Hyperlink.html#getType%28%29](http://poi.apache.org/apidocs/org/apache/poi/common/usermodel/Hyperlink.html#getType%28%29)

# jquery - 不依赖于特定控制器/模型的骨干. js 应用程序范围的功能

> ID：10016326
> 
> 赞同：5
> 
> 时间：2012-04-04T17:32:02.543
> 
> 标签：jquery, backbone.js, javascript

我正在使用骨干模板，您可以在[此处](https://github.com/backbone-boilerplate)找到。

我想知道如何添加全局功能，它不明确绑定到任何特定的集合、模型、视图等。一个例子是“注销”功能，它可能看起来像这样：

```
var logout = function(){
  // Clear Favorites
  // Handle asynchronous logging (all in-app logs are sent to the server at logout)
  // Redirect to the login page
  // Do other cleanup
} 
```

基本上，这将处理大量模型/集合，包括`Favorites`、`Events`、`Logs`、`Users`和应用程序`Router`

如果您查看主干样板中的[main.js](https://github.com/backbone-boilerplate/init/blob/master/todomvc/root/app/main.js)文件，我一直在顶部（第 13 行）添加这些函数，如下所示：

```
function(namespace, $, Backbone, Example){

  // BEGIN MY APP LOGIC
  namespace.app.logout = function(){
    // Do logout here
  };
  // END MY APP LOGIC

  var Router = Backbone.Router.extend({ 
```

这很好用，但应用程序逻辑可能会很快失控。我的问题是，组织此代码的更好方法是什么？如果我有一个`Utils`模块并加载了该 Utils 模块，它会更有意义吗？

干杯!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T04:31:50.767

TLDR：[http](http://addyosmani.github.com/backbone-fundamentals/) ://addyosmani.github.com/backbone-fundamentals/高级部分。

让它成为可能，然后让它美丽，然后让它快速。

随着您开发应用程序并使事情正常运行（可能），哪些功能属于一起将变得显而易见。将它们相应地分成模块（漂亮）。

我使用 require.js，但不使用骨干样板（bb 也有 AMD 分支）。我组织应用程序的方式与您描述的完全一样，我有一个具有通用应用程序内容的 utils 模块。然后，我将 Auth、Notification 和 Date 格式化内容添加到 utils 模块。然后我在任何我懒惰的地方都包含 utils 模块，并希望我的所有 util 函数都可用。

由于它们都只是模块/mixin，我还可以将 auth/notification/date 模块包含在我需要它们的任何单个模块中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T18:16:33.910

我在我的backbone.js 应用程序中遇到了同样的问题。我最终所做的与您的建议类似，创建一个具有特定全局函数的视图（如 Utils 模块）。

如果您希望避免对这个“Utils”类的引用与其耦合，您可以绑定到事件队列，并根据消息进行处理。例如，对于注销功能，您可以将“注销”消息发布到事件队列并从“Utils”视图中绑定到它。这样，无论在哪里调用，消息都会传递给正确的函数。要调用注销功能，您只需将“注销”消息发布到事件队列。

如果你的类变得非常大，这可能会让人感到困惑，但我建议只放置全局需要的函数。

**更新：**作为更强大的解决方案，您可以将实用程序功能直接构建到主干本身。该文档指出：

“因为它（骨干）作为应用程序的基础，所以你应该以你认为合适的方式扩展和增强它——整个源代码都经过注释，使你更容易做到这一点。”

我发现通过添加到主干对象，您可以增强内置的实用程序功能（noConflict 和 setDomLibrary），以包含诸如注销之类的内容。就像任何 Javascript 函数一样，您可以初始化必要的变量，然后像这样调用它们

```
 Backbone.logout(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-06T21:04:45.520

我会将它们放入应用程序视图中。当它变得太大时（我个人的限制是 600-800 行），您通常可以将这些全局方法中的大部分组合成几个逻辑上合理的帮助模块，以使您的应用程序视图足够小。

# css - 如何创建一个左右边界的 CSS 下拉菜单？

> ID：10016330
> 
> 赞同：1
> 
> 时间：2012-04-04T17:32:23.320
> 
> 标签：css, menu, drop-down-menu

我需要创建一个水平 css 下拉菜单，其中最右边的下拉列表右对齐而不是左对齐。

假设子 UL LI 比父 LI 长，它们将与父 LI 左对齐，而如果子 UL 的右边缘流过父 UL（菜单容器）的右边界，则子 UL 向右对齐父 LI 的边缘。

用例：具有 100% 屏幕宽度的流畅页面布局——不能有下拉菜单强制水平滚动。

例如

```
<ul id="menu">
  <li>First Item
    <ul>
      <li>First sub item</li> # aligns to the left
    </ul>
  </li>
  <li>Second Item
    <ul>
      <li>second list sub item</li> # aligns to the left edge of parent
    </ul>
  </li>
  <li>Third Item
    <ul>
      <li>third list sub item</li> # aligns to the left edge of parent
    </ul>
  </li>
  <li>Fourth Item
    <ul> # expected to flow over right edge
      <li>fourth list sub item</li> # aligns to the right of parent LI
    </ul>
  </li>
  <li>Fifth Item
    <ul> # expected to flow over right edge
      <li>fifth list sub item</li> # aligns to the right of parent LI
    </ul>
  </li>
</ul> 
```

和CSS：

```
#menu, #menu li {
-moz-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
list-style:none;
}
#menu {
width:100%;
float:left;
position:relative;
padding:0;
margin:2em 0;
z-index:5;
}
#menu li {
position:relative;
float:left;
width:20%; /* 5 list items for main nav */
}
#menu li a {
text-decoration:none;
display:block;
}
#menu li a:hover, #menu li:hover a {
text-decoration:none;
}
#menu ul {
position:absolute;
left:-9999px;
margin:0;
padding:0;
}
#menu ul li {
border-top:1px solid #fff;
float:none;
width:100% !important;
}
#menu ul a {
white-spacing:nowrap;
font-weight:normal;
}
#menu li:hover ul {
left:0;
}
#menu ul li a {
padding:0.5em 1em;
} 
```

# android - 使用 return 语句停止线程

> ID：10016331
> 
> 赞同：4
> 
> 时间：2012-04-04T17:32:23.677
> 
> 标签：android, multithreading, return

停止一个线程，如：

```
new Thread ( new Runnable() { 

 public void run(){ 
    if ( condition ) return; // this will stop the thread. 

} 
}).start(); 
```

是否正确/安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:33:57.903

当然。然后`Thread`遗嘱完成并可以加入。`RuntimeException`如果你抛出一个或者只是让代码在方法的末尾运行，线程也会退出`run()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:35:32.653

`run()`线程在其方法返回时停止。`run()`内部使用什么逻辑来决定何时或如何返回并不重要。您的代码完全正确且安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:34:55.597

是的，它是正确和安全的......

# axapta - 来自 ItemId 的 InventDim

> ID：10016340
> 
> 赞同：0
> 
> 时间：2012-04-04T17:33:28.653
> 
> 标签：axapta, dynamics-ax-2009, x++

我正在生成一个包含维度字段的表单，包括`Itemid`.

我有一个表格，其中只有`ItemId`，我需要找到`inventDimID`它。

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:50:17.353

我认为您在这里寻找的是物品的尺寸，不一定是`inventDimId`. 为了获得维度，您可以执行以下操作（出于本示例的目的，我们有维度 [1] = 部门：

```
static void Job8(Args _args)
{
    Dimension   dim;
    SysDim      department;
    ;
    dim = InventTable::find('3t80').Dimension;
    department = dim[1];

} 
```

# c# - 为什么我在尝试重新附加对象时收到 InvalidOperationException

> ID：10016342
> 
> 赞同：1
> 
> 时间：2012-04-04T17:33:35.923
> 
> 标签：c#, entity-framework, detach

我在试图理解为什么我的代码崩溃（我开始工作）时遇到了一些困难。

当您同时查看原始方法和工作方法时，一行的位置是不同的

```
ctx.Inventories.Attach(this); 
```

当原始方法不起作用但第二种方法起作用时，我感到很困惑。谁能提供一些见解？

这是我得到的例外。

System.InvalidOperationException : ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。

这是我原来的方法

```
 public void RemoveDependency(int depId)
    {
        bool returnValue = false;

        if (this.Id != 0 && depId > 0)
        {
            using (ApsEntities ctx = new ApsEntities())
            {
                var query2 = from d in ctx.Dependencies
                             where d.Id == depId
                             select d;

                Dependency found = query2.FirstOrDefault();

                if (found != null)
                {
                **ctx.Inventories.Attach(this);**
                    ctx.ObjectStateManager.ChangeObjectState(this, EntityState.Modified);
                    this.Dependencies.Remove(found);

                   ctx.SaveChanges();
                }
            }
        }

        return returnValue;
    } 
```

这是我的工作方法

```
public void RemoveDependency(int depId)
{
    bool returnValue = false;

    if (this.Id != 0 && depId > 0)
    {
        using (ApsEntities ctx = new ApsEntities())
        {
            **ctx.Inventories.Attach(this);**

            var query2 = from d in ctx.Dependencies
                         where d.Id == depId
                         select d;

            Dependency found = query2.FirstOrDefault();

            if (found != null)
            {
                ctx.ObjectStateManager.ChangeObjectState(this, EntityState.Modified);
                this.Dependencies.Remove(found);

               ctx.SaveChanges();
            }
        }
    }

    return returnValue;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:54:11.780

该行为与`ObjectStateManager`跟踪关系有关。

当当前`Inventory`项目不为人所知`ObjectContext`（如您的第一个示例中）时，上下文无法识别`Inventory`和之间的关系。`Dependency`由于您对 a 的查询`Inventory`未知，因此将加载它，并且当您将其附加到您的.`ObjectContext``Inventory``ObjectContext`

在第二个示例中，您首先附加`Inventory`然后执行查询。然后`ObjectContext`将明确地将`Dependency`对象附加到`Inventory`项目。

该[文档](http://msdn.microsoft.com/en-us/library/system.data.objects.objectstatemanager.aspx)指出：

> ObjectStateManager 跟踪查询结果，并提供合并多个重叠查询结果的逻辑。它还在用户插入、删除或修改对象时执行内存中的更改跟踪，并提供更改集以进行更新。更改处理器使用此更改集来保存修改。

当相关对象不为`ObjectContext`.

# android - GridLayout（不是GridView）如何均匀拉伸所有孩子

> ID：10016343
> 
> 赞同：242
> 
> 时间：2012-04-04T17:33:37.647
> 
> 标签：android, android-layout, android-gridview, android-gridlayout

我想要一个 2x2 网格，里面有一个按钮。这只是 ICS，所以我尝试使用给定的新 GridLayout。

这是我的布局的 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/favorites_grid"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#00ff00"
    android:rowCount="2"
    android:columnCount="2">
  <Button
      android:text="Cell 0"
      android:layout_row="0"
      android:layout_column="0"
      android:textSize="14dip" />
  <Button
      android:text="Cell 1"
      android:layout_row="0"
      android:layout_column="1"
      android:textSize="14dip" />

  <Button
      android:text="Cell 2"
      android:layout_row="1"
      android:layout_column="0"
      android:textSize="14dip" />
  <Button
      android:text="Cell 3"
      android:layout_row="1"
      android:layout_column="1"
      android:textSize="14dip" />
</GridLayout> 
```

问题是我的观点并没有均匀地延伸到每一行。这会导致我的 GridLayout 右侧有很多额外的空间。

我尝试了设置`layout_gravity="fill_horizontal"`，但这仅适用于该行的**最后一个**视图。这意味着单元格 1 一直延伸以为单元格 0 提供足够的空间。

关于如何解决这个问题的想法？

* * *

## 回答 #1

> 赞同：336
> 
> 时间：2015-05-14T19:30:45.477

从 API 21 开始，权重的概念被添加到 GridLayout。要支持较旧的 android 设备，您可以使用 v7 支持库中的 GridLayout。

以下 XML 提供了一个示例，说明如何使用权重填充屏幕宽度。

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.v7.widget.GridLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:grid="http://schemas.android.com/apk/res-auto"

    android:id="@+id/choice_grid"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:padding="4dp"

    grid:alignmentMode="alignBounds"
    grid:columnCount="2"
    grid:rowOrderPreserved="false"
    grid:useDefaultMargins="true">

    <TextView
        android:layout_width="0dp"
        android:layout_height="100dp"
        grid:layout_columnWeight="1"
        grid:layout_gravity="fill_horizontal"
        android:gravity="center"
        android:background="#FF33B5E5"
        android:text="Tile1" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="100dp"
        grid:layout_columnWeight="1"
        grid:layout_gravity="fill_horizontal"
        android:gravity="center"
        android:background="#FF33B5E5"
        android:text="Tile2" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="100dp"
        grid:layout_columnWeight="1"
        grid:layout_gravity="fill_horizontal"
        android:gravity="center"
        android:background="#FF33B5E5"
        android:text="Tile3" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="100dp"
        grid:layout_columnWeight="1"
        grid:layout_gravity="fill_horizontal"
        android:gravity="center"
        android:background="#FF33B5E5"
        android:text="Tile4" />

</android.support.v7.widget.GridLayout> 
```

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2012-04-05T17:54:43.057

***更新**：从 API 21 开始支持权重。有关详细信息，请参阅[PaulT 的答案](https://stackoverflow.com/a/30245753/984780)。*

使用 GridLayout 时存在限制，以下引用来自[文档](http://developer.android.com/reference/android/widget/GridLayout.html "文件")。

> “GridLayout 不提供对权重原则的支持，如权重中定义的那样。通常，因此无法配置 GridLayout 以在多行或多列之间以非平凡的比例分配多余的空间......为了完全控制行或列中的多余空间分布；使用 LinearLayout 子视图将组件保存在关联的单元格组中。”

这是一个使用 LinearLayout 子视图的小示例。（我使用了占用未使用区域并将按钮推到所需位置的空间视图。）

```
<GridLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:columnCount="1"
>
    <TextView
        android:text="2x2 button grid"
        android:textSize="32dip"
        android:layout_gravity="center_horizontal" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" android:orientation="horizontal">
        <Space
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1" />
        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button 1" />
        <Space
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1" />
        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="start"
            android:text="Button 2" />
        <Space
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
    >
        <Space
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1" />
        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button 3" />
        <Space
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1" />
        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="start"
            android:text="Button 4" />
        <Space
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1" />
    </LinearLayout>
</GridLayout> 
```

* * *

## 回答 #3

> 赞同：82
> 
> 时间：2015-08-29T22:31:19.007

[![在此处输入图像描述](../Images/ff508a9d05f3770bce03e96c049f36a7.png)](https://i.stack.imgur.com/VBcgV.png)

Appcompat21`GridLayout`具有列和行的权重，可以像下面这样使用，以像上图一样在 gridlayout 中均匀地创建每个网格项。

```
<android.support.v7.widget.GridLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:grid="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_centerHorizontal="true"
    grid:alignmentMode="alignBounds"
    grid:columnCount="4" >

    <Button android:layout_width="0dp"
        style="?buttonStyle"
        android:layout_height="0dp"
        android:text="-1"
        grid:layout_columnWeight="1"
        grid:layout_rowWeight="1"
        grid:layout_gravity="fill" />
    ...
</<android.support.v7.widget.GridLayout> 
```

* * *

## 回答 #4

> 赞同：58
> 
> 时间：2016-07-01T10:30:38.887

从 API 21 开始，没有带有 ScrollView 的 v7 支持库：

[![在此处输入图像描述](../Images/6e0d48521f66ed411af6a14ef05dac0e.png)](https://i.stack.imgur.com/FL0I2.png)

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    >

    <GridLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:columnCount="2"
            >

        <TextView
            android:layout_width="0dp"
            android:layout_height="100dp"
            android:layout_columnWeight="1"
            android:gravity="center"
            android:layout_gravity="fill_horizontal"
            android:background="@color/colorAccent"
            android:text="Tile1" />

        <TextView
            android:layout_width="0dp"
            android:layout_height="100dp"
            android:layout_columnWeight="1"
            android:gravity="center"
            android:layout_gravity="fill_horizontal"
            android:background="@color/colorPrimaryDark"
            android:text="Tile2" />

        <TextView
            android:layout_width="0dp"
            android:layout_height="100dp"
            android:layout_columnWeight="1"
            android:gravity="center"
            android:layout_gravity="fill_horizontal"
            android:background="@color/colorPrimary"
            android:text="Tile3" />

        <TextView
            android:layout_width="0dp"
            android:layout_height="100dp"
            android:layout_columnWeight="1"
            android:gravity="center"
            android:layout_gravity="fill_horizontal"
            android:background="@color/colorAccent"
            android:text="Tile4" />

    </GridLayout>
</ScrollView> 
```

* * *

## 回答 #5

> 赞同：36
> 
> 时间：2012-06-26T15:07:08.123

您可以动态设置每个孩子的宽度：

```
GridLayout.LayoutParams params = (GridLayout.LayoutParams) child.getLayoutParams();
    params.width = (parent.getWidth()/parent.getColumnCount()) -params.rightMargin - params.leftMargin;
    child.setLayoutParams(params); 
```

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2017-04-21T07:21:02.677

这是正确答案

```
<?xml version="1.0" encoding="utf-8"?>
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/favorites_grid"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#00ff00"
    android:rowCount="2"
    android:columnCount="2">
    <Button
        android:text="Cell 0"
        android:layout_row="0"
        android:layout_column="0"
        android:layout_columnWeight="1"
        android:layout_rowWeight="1"
        android:textSize="14dip" 
        />
    <Button
        android:text="Cell 1"
        android:layout_row="0"
        android:layout_column="1"
        android:textSize="14dip"
        android:layout_columnWeight="1"
        android:layout_rowWeight="1"/>

    <Button
        android:text="Cell 2"
        android:layout_row="1"
        android:layout_column="0"
        android:textSize="14dip"
        android:layout_columnWeight="1"
        android:layout_rowWeight="1"/>
    <Button
        android:text="Cell 3"
        android:layout_row="1"
        android:layout_column="1"
        android:textSize="14dip"
        android:layout_columnWeight="1"
        android:layout_rowWeight="1"/>
</GridLayout> 
```

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2012-06-28T12:31:13.220

尝试将以下内容添加到您的 GridLayout 规范中。那应该行得通。

```
android:useDefaultMargins="true" 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2013-03-11T14:44:52.647

我终于找到了解决方案。正如Rotemmiz所说，您必须在之后动态地进行操作。此代码拉伸按钮以水平填充视图，但垂直方向也可以这样做。

```
public void fillview(android.support.v7.widget.GridLayout gl)
{
    Button buttontemp;

    //Stretch buttons
    int idealChildWidth = (int) ((gl.getWidth()-20*gl.getColumnCount())/gl.getColumnCount());
    for( int i=0; i< gl.getChildCount();i++)
    {
        buttontemp = (Button) gl.getChildAt(i);
        buttontemp.setWidth(idealChildWidth);
    }
} 
```

（20 用于内部和外部填充和边距。这可以更普遍地完成，但这更干净）

然后可以这样调用：

```
 android.support.v7.widget.GridLayout gl = (android.support.v7.widget.GridLayout)findViewById(R.id.buttongrid);
    ViewTreeObserver vto = gl.getViewTreeObserver();
    vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {@Override public void onGlobalLayout() 
    {

            android.support.v7.widget.GridLayout gl = (android.support.v7.widget.GridLayout) findViewById(R.id.buttongrid);
            fillview(gl);

            ViewTreeObserver obs = gl.getViewTreeObserver();
            obs.removeGlobalOnLayoutListener(this);
    }}); 
```

它必须由观察者完成，因为我们需要在调用视图之前等待视图被绘制。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2016-11-15T20:46:33.230

在我的例子中，我是动态添加按钮的，所以我的解决方案需要一些 XML 部分和一些 Java 部分。我不得不从几个不同的地方找到并混合解决方案，并认为我会在这里分享它，这样其他寻找类似解决方案的人可能会发现它很有帮助。

我的布局文件 XML 的第一部分...

```
<android.support.v7.widget.GridLayout
    xmlns:grid="http://schemas.android.com/apk/res-auto"
    android:id="@+id/gl_Options"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    grid:useDefaultMargins="true">
</android.support.v7.widget.GridLayout> 
```

`grid:useDefaultMargins="true"`不是必需的，但我补充说，因为这对我来说看起来更好，您可以应用其他视觉效果（例如填充），如此处的一些答案中所述。现在是按钮，因为我必须动态添加它们。这是制作这些按钮的代码的 Java 部分，我只包括与此上下文相关的那些行。假设我必须从`myOptions`我的代码可用的尽可能多的按钮中制作按钮，并且我也没有复制 OnClickListener 代码。

```
import android.support.v7.widget.GridLayout;   //Reference to Library

public class myFragment extends Fragment{
    GridLayout gl_Options;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        gl_AmountOptions = (GridLayout)view.findViewById( R.id.gl_AmountOptions );
        ...
        gl_Options.removeAllViews();     // Remove all existing views
        gl_AmountOptions.setColumnCount( myOptions.length <= 9 ? 3: 4 );  // Set appropriate number of columns

        for( String opt : myOptions ) {
            GridLayout.LayoutParams lParams   = new GridLayout.LayoutParams( GridLayout.spec( GridLayout.UNDEFINED, 1f), GridLayout.spec( GridLayout.UNDEFINED, 1f));
            // The above defines LayoutParameters as not specified Column and Row with grid:layout_columnWeight="1" and grid:layout_rowWeight="1"
            lParams.width = 0;    // Setting width to "0dp" so weight is applied instead

            Button b = new Button(this.getContext());
            b.setText( opt );
            b.setLayoutParams(lParams);
            b.setOnClickListener( myClickListener );
            gl_Options.addView( b );
        }
    }
} 
```

`YourProject.grade`由于我们使用的是支持库中的 GridLayout 而不是标准的 GridLayout，因此我们必须在文件中告知等级。

```
dependencies {
    compile 'com.android.support:appcompat-v7:23.4.0'
    ...
    compile 'com.android.support:gridlayout-v7:23.4.0'
} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2015-04-26T13:35:59.867

您可以通过覆盖 ViewGroup onLayout 方法来加快速度。这是我的通用解决方案：

```
package your.app.package;

import android.content.Context;
import android.view.ViewGroup;

public class GridLayout extends ViewGroup {

    public GridLayout(Context context) {
        super(context);
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        final int columns = 2;//edit this if you need different grid
        final int rows = 2;

        int children = getChildCount();
        if (children != columns * rows)
            throw new IllegalStateException("GridLayout must have " + columns * rows + " children");

        int width = getWidth();
        int height = getHeight();

        int viewWidth = width / columns;
        int viewHeight = height / rows;

        int rowIndex = 0;
        int columnIndex = 0;

        for (int i = 0; i < children; i++) {
            getChildAt(i).layout(viewWidth * columnIndex, viewHeight * rowIndex, viewWidth * columnIndex + viewWidth, viewHeight * rowIndex + viewHeight);
            columnIndex++;
            if (columnIndex == columns) {
                columnIndex = 0;
                rowIndex++;
            }
        }
    }

} 
```

**编辑：** 不要忘记孩子的 match_parent ！

```
android:layout_width="match_parent"
android:layout_height="match_parent" 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2014-11-21T12:22:13.690

我能找到的最佳解决方案是为您想要的每一行使用线性布局（水平），并在其中将按钮（单元格）宽度分配给 0dp，将权重分配给 1。对于每个线性布局（行）分配高度到 0dp 和权重到 1。找到下面的代码 - 也 android:layout_gravity="center_vertical" 用于将按钮对齐在一行中，以防它们包含可变长度的文本。使用 0dp 并对其进行加权是一个非常简洁但不太为人所知的技巧。

```
<LinearLayout
 android:id="@+id/parent_layout"
 android:layout_width="match_parent"
 android:layout_height="wrap_content"
 android:background="@drawable/button_bue_3d"
 android:orientation="vertical" >

            <LinearLayout
                android:id="@+id/layout_row1"
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:layout_weight="1"

                android:orientation="horizontal" >

                <Button
                    android:id="@+id/button1"
                    style="?android:attr/buttonStyleSmall"
                   android:layout_height="wrap_content"
                   android:layout_width="0dp"
                   android:layout_weight="1"
                    android:clickable="false"
                   android:layout_gravity="center_vertical"
                    android:text="ssssssssssssssssssssssssss" />

                <Button
                    android:id="@+id/button2"
                    style="?android:attr/buttonStyleSmall"
                    android:clickable="false"
                    android:layout_height="wrap_content"
                     android:layout_width="0dp"
                   android:layout_weight="1"
                   android:layout_gravity="center_vertical"
                    android:text="sggggggg" />

            </LinearLayout>

            <LinearLayout
                android:id="@+id/layout_row2"
                android:layout_weight="1"
                android:layout_width="match_parent"
                  android:layout_height="0dp"

                android:orientation="horizontal" >

                <Button
                    android:id="@+id/button3"
                    style="?android:attr/buttonStyleSmall"
                    android:layout_height="wrap_content"
                     android:layout_width="0dp"
                   android:layout_weight="1"
                    android:layout_gravity="center_vertical"
                    android:text="s" />

                <Button
                    android:id="@+id/button4"
                    style="?android:attr/buttonStyleSmall"
                    android:layout_height="wrap_content"
                     android:layout_width="0dp"
                   android:layout_weight="1"
                    android:clickable="false"
                     android:layout_gravity="center_vertical"
                    android:text="s" />

            </LinearLayout>

       </LinearLayout> 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2017-12-25T20:41:41.763

给你 ：

```
Button button = new Button(this);
// weight = 1f , gravity = GridLayout.FILL 
GridLayout.LayoutParams param= new GridLayout.LayoutParams(GridLayout.spec(
            GridLayout.UNDEFINED,GridLayout.FILL,1f),
            GridLayout.spec(GridLayout.UNDEFINED,GridLayout.FILL,1f));
// Layout_height = 0 ,Layout_weight = 0
params.height =0;                                                                                                           
params.width = 0;
button.setLayoutParams(param); 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-03-10T01:46:11.657

我有同样的问题，我认为只是以编程方式设置宽度和高度：

使用 metrics.widthPixels / 2 指标设置按钮的宽度是 DisplayMetrics 的对象。

```
 GridLayout gridLayout=findViewById(R.id.grid);
    for (int i = 0; i <gridLayout.getChildCount() ; i++) {
        View view= gridLayout.getChildAt(i);
        if(view instanceof Button){
            Button btn = (Button) view;
            btn.setWidth(200);//metrics.widthPixels / 2
            btn.setHeight(200);//metrics.heightPixels / 7
        }
    } 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-08-01T18:40:46.923

结果 ：

[![在此处输入图像描述](../Images/ddc2235677dbd5d8bf35980d51b0c7f7.png)](https://i.stack.imgur.com/P3nZG.png)

尝试这样的事情：

```
 final int MAX_COLUMN = gridView.getColumnCount(); //5
    final int MAX_ROW = gridView.getRowCount(); //7
    final int itemsCount = MAX_ROW * MAX_COLUMN; //35

    int row = 0, column = 0;

    for (int i = 0; i < itemsCount; i++) {
        ImageView view = new ImageView(this);

        //Just to provide alternate colors
        if (i % 2 == 0) {
            view.setBackgroundColor(Color.RED);
        } else {
            view.setBackgroundColor(Color.GREEN);
        }

        GridLayout.LayoutParams params = new GridLayout.LayoutParams(GridLayout.spec(row, 1F), GridLayout.spec(column, 1F));
        view.setLayoutParams(params);
        gridView.addView(view);

        column++;

        if (column >= MAX_COLUMN) {
            column = 0;
            row++;
        }
    } 
```

如果您想要单元格的特定宽度和高度，请使用：

```
 params.width = 100; // Your width
     params.height = 100; //your height 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-12-08T18:24:45.150

这是一个相当古老的问题，但显然很多人都感兴趣。对于像这样的 4 个按钮的简单布局，似乎 TableLayout 是实现所需结果的最简单方法。

下面是一些示例代码，显示了一个表的前 2 行，其中 6 列跨越其父级的宽度。每个单元格中的 LinearLayout 和 ImageView 用于允许“打开和关闭”单元格内的图像，同时保持单元格的颜色保持不变。

```
<TableLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:stretchColumns="1,2,3,4,5,6"
    android:background="@drawable/vertical_radio_button_background"
    android:padding="2dp">

    <TableRow
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <LinearLayout
            android:id="@+id/brown"
            android:tag="13"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:layout_margin="1dp"
            android:layout_column="1"
            android:background="@color/brown">

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:src="@drawable/selected_check"
                android:visibility="invisible"/>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/maraschino"
            android:tag="9"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:layout_margin="1dp"
            android:layout_column="2"
            android:background="@color/maraschino">

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:src="@drawable/selected_check"
                android:visibility="invisible"/>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/cayenne"
            android:tag="22"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:layout_margin="1dp"
            android:layout_column="3"
            android:background="@color/cayenne">

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:src="@drawable/selected_check"
                android:visibility="invisible"/>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/maroon"
            android:tag="18"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:layout_margin="1dp"
            android:layout_column="4"
            android:background="@color/maroon">

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:src="@drawable/selected_check"
                android:visibility="invisible"/>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/plum"
            android:tag="3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:layout_margin="1dp"
            android:layout_column="5"
            android:background="@color/plum">

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:src="@drawable/selected_check"
                android:visibility="invisible"/>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/eggplant"
            android:tag="15"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:layout_margin="1dp"
            android:layout_column="6"
            android:background="@color/eggplant">

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:src="@drawable/selected_check"
                android:visibility="invisible"/>
        </LinearLayout>
    </TableRow>

    <TableRow
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <LinearLayout
            android:id="@+id/plum2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:layout_margin="1dp"
            android:layout_column="1"
            android:background="@color/plum">

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:src="@drawable/selected_check"
                android:visibility="invisible"/>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/lavender"
            android:tag="14"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:layout_margin="1dp"
            android:layout_column="2"
            android:background="@color/lavender">

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:src="@drawable/selected_check"
                android:visibility="invisible"/>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/carnation"
            android:tag="16"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:layout_margin="1dp"
            android:layout_column="3"
            android:background="@color/carnation">

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:src="@drawable/selected_check"
                android:visibility="invisible"/>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/light_pink"
            android:tag="23"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:layout_margin="1dp"
            android:layout_column="4"
            android:background="@color/light_pink">

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:src="@drawable/selected_check"
                android:visibility="invisible"/>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/strawberry"
            android:tag="10"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:layout_margin="1dp"
            android:layout_column="5"
            android:background="@color/strawberry">

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:src="@drawable/selected_check"
                android:visibility="invisible"/>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/magenta"
            android:tag="20"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:layout_margin="1dp"
            android:layout_column="6"
            android:background="@color/magenta">

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:src="@drawable/selected_check"
                android:visibility="invisible"/>
        </LinearLayout>
    </TableRow>
</TableLayout> 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-11-08T02:17:53.287

我想要一个居中的表格，标签右对齐，值左对齐。额外的空间应该在桌子周围。经过大量试验并且没有遵循文档所说的我应该做的事情，我想出了一些可行的方法。这是我所做的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_horizontal"
android:orientation="vertical" >

<GridLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:columnCount="2"
    android:orientation="horizontal"
    android:useDefaultMargins="true" >

    <TextView
        android:layout_gravity="right"
        android:text="Short label:" />

    <TextView
        android:id="@+id/start_time"
        android:layout_gravity="left"
        android:text="Long extended value" />

    <TextView
        android:layout_gravity="right"
        android:text="A very long extended label:" />

    <TextView
        android:id="@+id/elapsed_time"
        android:layout_gravity="left"
        android:text="Short value" />
</GridLayout> 
```

这似乎可行，但 GridLayout 显示消息：

“此 GridLayout 布局或其 LinearLayout 父级无用”

不知道为什么它对我有用时是“无用的”。

我不确定这为什么有效，或者这是否是一个好主意，但如果您尝试它并且可以提供更好的主意、小的改进或解释它为什么有效（或不会有效），我将不胜感激反馈。

谢谢。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-08-22T12:51:53.943

尝试和错误中有关网格布局的一些提示。

1.  默认网格布局在 min SDK 21+ 上效果最佳。
2.  GridLayout 的高度/宽度应该是固定的或`match_parent`. 这是因为 Grid 布局计算其子级的高度/宽度，并且具有自己的可变高度可能会导致计算精确高度时出现问题。
3.  `android:useDefaultMargins="true"`默认情况下，网格布局会忽略孩子的边距，所以如果我们希望孩子控制他们的边距，我们应该使用它。
4.  要使用网格布局创建动态、自动拉伸的视图组，请执行以下任一操作：
    1.  父级将同时控制：总组的最大高度和每行中的元素数或
    2.  父级将控制每行中的列数，子级将控制总高度。

第一个场景的优点是我们可以在组中添加任意数量的孩子，他们都会很好地均匀地伸展。缺点是我们得到了一个固定大小的组。内容大的孩子也占据了固定的空间。

第二种情况的优点是我们可以添加更多的孩子，他们将决定组的高度。在父级顶部附加嵌套滚动视图将使整个元素列表可滚动。缺点是儿童控制组的高度和可变高度，可能导致整个视图看起来凌乱。

如果我们稍微调整一下，这两种情况都可以发挥它们的优势，并且可以最大限度地减少它们的劣势。

第一个场景的例子：

```
 <GridLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:columnCount="2"
        android:useDefaultMargins="true">

        <View
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_rowWeight="1"
            android:layout_columnSpan="1"
            android:layout_columnWeight="1"
            android:layout_gravity="fill"
            android:layout_marginHorizontal="8dp"
            android:layout_marginVertical="8dp"
            android:background="@color/black" />

        <View
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_rowWeight="1"
            android:layout_columnSpan="1"
            android:layout_columnWeight="1"
            android:layout_gravity="fill"

            android:layout_marginHorizontal="8dp"
            android:layout_marginVertical="8dp"
            android:background="@color/black" />

        <View
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_rowWeight="1"
            android:layout_columnSpan="2"
            android:layout_columnWeight="1"
            android:layout_gravity="fill"

            android:layout_marginHorizontal="8dp"
            android:layout_marginVertical="8dp"
            android:background="@color/black" />

        <View
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_rowWeight="1"
            android:layout_columnSpan="1"
            android:layout_columnWeight="1"
            android:layout_gravity="fill"
            android:layout_marginHorizontal="8dp"
            android:layout_marginVertical="8dp"
            android:background="@color/black" />

        <View
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_rowWeight="1"
            android:layout_columnSpan="1"
            android:layout_columnWeight="1"
            android:layout_gravity="fill"

            android:layout_marginHorizontal="8dp"
            android:layout_marginVertical="8dp"
            android:background="@color/black" />

        <View
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_rowWeight="1"
            android:layout_columnSpan="2"
            android:layout_columnWeight="1"
            android:layout_gravity="fill"

            android:layout_marginHorizontal="8dp"
            android:layout_marginVertical="8dp"
            android:background="@color/black" />

        <!--        
        add more elements here with same attributes and they will fit on their own!
        -->

    </GridLayout> 
```

输出： [![图像1](../Images/0d64eb88d28c4e325679a77c0fd2fb50.png)](https://i.stack.imgur.com/DVprA.png)

第二种情况：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:ignore="HardcodedText"
    >

    <GridLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:columnCount="2"
        android:orientation="horizontal"
        android:useDefaultMargins="true"
        >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_columnSpan="1"
            android:text="this is a text"
            android:textColor="@color/white"
            android:layout_gravity="center"
            android:layout_margin="8dp"
            android:background="@color/black"
            />
        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_columnSpan="1"
            android:layout_gravity="fill_horizontal"
            android:text="this is something cool. this should be taking more space but it is also controlling the total height of row"
            android:textColor="@color/white"
            android:gravity="center"
            android:layout_margin="8dp"
            android:background="@color/black"
            />
        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_columnSpan="1"
            android:layout_gravity="fill_horizontal"
            android:text="once the width is determined by any child, the whole column shall take the same height"
            android:textColor="@color/white"
            android:gravity="center"
            android:layout_margin="8dp"
            android:background="@color/black"
            />
        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_columnSpan="1"
            android:layout_gravity="fill"
            android:text="this column can only control how they shall look by layout gravity. this should look like column 0,0 but its  taking full row height/width"
            android:textColor="@color/white"
            android:gravity="center"
            android:layout_margin="8dp"
            android:background="@color/black"
            />

        <!--

        -->

    </GridLayout>

</FrameLayout> 
```

输出： [![在此处输入图像描述](../Images/1fb03be40d7227e41a96d19bdb6d5463.png)](https://i.stack.imgur.com/WuyxT.png)

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-08-24T14:52:49.500

这是没有按钮的更多默认应用程序的代码，这对我来说非常方便

```
<GridLayout
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
   android:layout_height="wrap_content"
   android:columnCount="1"
   >
   <TextView
       android:text="2x2 button grid"
       android:textSize="32dip"
       android:layout_gravity="center_horizontal" />

   <LinearLayout
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:orientation="horizontal">
       <Space
           android:layout_width="wrap_content"
           android:layout_height="match_parent"
           android:layout_weight="1" />
       <TextView
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="Naam" />
       <Space
           android:layout_width="wrap_content"
           android:layout_height="match_parent"
           android:layout_weight="1" />
       <TextView
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_gravity="start"
           android:text="@{viewModel.selectedItem.test2}" />
       <Space
           android:layout_width="wrap_content"
           android:layout_height="match_parent"
           android:layout_weight="1" />
   </LinearLayout>

   <LinearLayout
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:orientation="horizontal"
       >
       <Space
           android:layout_width="wrap_content"
           android:layout_height="match_parent"
           android:layout_weight="1" />
       <TextView
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="Nummer" />
       <Space
           android:layout_width="wrap_content"
           android:layout_height="match_parent"
           android:layout_weight="1" />
       <TextView
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_gravity="start"
           android:text="@{viewModel.selectedItem.test}" />
       <Space
           android:layout_width="wrap_content"
           android:layout_height="match_parent"
           android:layout_weight="1" />
   </LinearLayout>
</GridLayout> 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-11-26T12:44:52.863

主.xml

```
<GridLayout
    android:id="@+id/grid_related_news"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="8dp"
    android:padding="3dp"
    android:columnCount="2">

</GridLayout> 
```

项目.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:layout_width="0dp"
    android:layout_height="wrap_content"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_columnWeight="1"
    android:gravity="center"
    android:padding="3dp"
    android:layout_gravity="fill_horizontal"
    xmlns:android="http://schemas.android.com/apk/res/android">

    <androidx.cardview.widget.CardView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@color/white"
        app:cardBackgroundColor="@color/white"
        app:cardCornerRadius="5dp"
        app:cardElevation="2dp"
        android:layout_margin="4dp">

        <androidx.constraintlayout.widget.ConstraintLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

            <ImageView
                android:id="@+id/img_related_news"
                android:layout_width="0dp"
                android:layout_height="0dp"
                android:layoutDirection="rtl"
                android:scaleType="centerCrop"
                app:layout_constraintDimensionRatio="H,1:1"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toTopOf="parent"
                app:srcCompat="@drawable/light_gray" />

            <LinearLayout
                android:layout_width="0dp"
                android:layout_height="0dp"
                android:background="#59000000"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toTopOf="parent" />

            <TextView
                android:id="@+id/txt_related_news_title"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_marginStart="12dp"
                android:layout_marginTop="6dp"
                android:layout_marginEnd="12dp"
                android:layout_marginBottom="12dp"
                android:elevation="2dp"
                android:fontFamily="@font/yekan_bold"
                android:letterSpacing="-0.1"
                android:lineSpacingExtra="4dp"
                android:maxLines="4"
                android:textColor="@color/white"
                android:textSize="13sp"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                tools:text="@string/lorem_ipsum_sentence" />

        </androidx.constraintlayout.widget.ConstraintLayout>

    </androidx.cardview.widget.CardView>

</LinearLayout> 
```

爪哇

```
GridLayout grid_related_news = findViewById(R.id.grid_related_news);
View view = LayoutInflater.from(this).inflate(R.layout.related_item, (ViewGroup) grid_related_news, false);
ImageView img_related_news = view.findViewById(R.id.img_related_news);
...

grid_related_news.addView(view); 
```

你可以使用这个例子

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2021-02-19T14:02:52.117

**这是一个例子**

[![在此处输入图像描述](../Images/ddafcc281474c4c56c9b19059198d26e.png)](https://i.stack.imgur.com/92jHR.png)

```
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".GridMenuActivity">

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="#FFFFFF"
            android:orientation="vertical"
            android:weightSum="10">

            <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="200dp"
                android:layout_weight="2"
                android:background="@drawable/oval_background">

                <ImageView
                    android:id="@+id/imageView6"
                    android:layout_width="75dp"
                    android:layout_height="75dp"
                    android:layout_centerInParent="true"
                    android:layout_margin="5dp"
                    app:srcCompat="@mipmap/dmm_logo" />

            </RelativeLayout>

            <GridLayout
                android:id="@+id/mainGrid"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="8"
                android:alignmentMode="alignBounds"
                android:columnCount="2"
                android:columnOrderPreserved="true"
                android:padding="5dp"
                android:rowCount="5">

                <androidx.cardview.widget.CardView
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_row="0"
                    android:layout_rowWeight="1"
                    android:layout_column="0"
                    android:layout_columnWeight="1"
                    android:layout_gravity="fill"
                    android:layout_marginLeft="8dp"
                    android:layout_marginTop="8dp"
                    android:layout_marginRight="8dp"
                    android:layout_marginBottom="16dp"
                    android:clickable="true"
                    android:focusable="true"
                    android:foreground="?android:attr/selectableItemBackground"
                    app:cardCornerRadius="8dp"
                    app:cardElevation="3dp">

                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center"
                        android:layout_margin="16dp"
                        android:orientation="vertical">

                        <ImageView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_horizontal"
                            android:src="@drawable/ic_dashboard" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Dashboard"
                            android:textAlignment="center"
                            android:textColor="@color/colorPrimary"
                            android:textSize="16sp"
                            android:textStyle="bold" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:gravity="center"
                            android:text="Add Entry"
                            android:textSize="10sp" />

                    </LinearLayout>

                </androidx.cardview.widget.CardView>

                <androidx.cardview.widget.CardView
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_row="0"
                    android:layout_rowWeight="1"
                    android:layout_column="1"
                    android:layout_columnWeight="1"
                    android:layout_gravity="fill"
                    android:layout_marginLeft="8dp"
                    android:layout_marginTop="8dp"
                    android:layout_marginRight="8dp"
                    android:layout_marginBottom="16dp"
                    android:clickable="true"
                    android:focusable="true"
                    android:foreground="?android:attr/selectableItemBackground"
                    app:cardCornerRadius="8dp"
                    app:cardElevation="3dp">

                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal|center_vertical"
                        android:layout_margin="16dp"
                        android:orientation="vertical">

                        <ImageView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_horizontal"
                            android:src="@drawable/ic_sell" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:text="Sale Forecast"
                            android:textAlignment="center"
                            android:textColor="@color/colorPrimary"
                            android:textSize="16sp"
                            android:textStyle="bold" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:gravity="center"
                            android:text="Upcoming Milk Requirement"
                            android:textSize="10sp" />

                    </LinearLayout>

                </androidx.cardview.widget.CardView>

                <androidx.cardview.widget.CardView
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_row="1"
                    android:layout_rowWeight="1"
                    android:layout_column="0"
                    android:layout_columnWeight="1"
                    android:layout_gravity="fill"
                    android:layout_marginLeft="8dp"
                    android:layout_marginRight="8dp"
                    android:layout_marginBottom="16dp"
                    android:clickable="true"
                    android:focusable="true"
                    android:foreground="?android:attr/selectableItemBackground"
                    app:cardCornerRadius="8dp"
                    app:cardElevation="3dp">

                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal|center_vertical"
                        android:layout_margin="16dp"
                        android:orientation="vertical">

                        <ImageView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_horizontal"
                            android:src="@drawable/ic_seller" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:text="Sellers"
                            android:textAlignment="center"
                            android:textColor="@color/colorPrimary"
                            android:textSize="16sp"
                            android:textStyle="bold" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:gravity="center"
                            android:text="Milk Providers"
                            android:textSize="10sp" />

                    </LinearLayout>

                </androidx.cardview.widget.CardView>

                <androidx.cardview.widget.CardView
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_row="1"
                    android:layout_rowWeight="1"
                    android:layout_column="1"
                    android:layout_columnWeight="1"
                    android:layout_gravity="fill"
                    android:layout_marginLeft="8dp"
                    android:layout_marginRight="8dp"
                    android:layout_marginBottom="16dp"
                    android:clickable="true"
                    android:focusable="true"
                    android:foreground="?android:attr/selectableItemBackground"
                    app:cardCornerRadius="8dp"
                    app:cardElevation="3dp">

                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal|center_vertical"
                        android:layout_margin="16dp"
                        android:orientation="vertical">

                        <ImageView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_horizontal"
                            android:src="@drawable/ic_shopping" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:text="Purchasers"
                            android:textColor="@color/colorPrimary"
                            android:textSize="16sp"
                            android:textStyle="bold" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:text="Milk Consumers"
                            android:textSize="10sp" />

                    </LinearLayout>

                </androidx.cardview.widget.CardView>

                <!-- Row 2 -->

                <!-- Column 1 -->
                <androidx.cardview.widget.CardView
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_row="2"
                    android:layout_rowWeight="1"
                    android:layout_column="0"
                    android:layout_columnWeight="1"
                    android:layout_gravity="fill"
                    android:layout_marginLeft="8dp"
                    android:layout_marginRight="8dp"
                    android:layout_marginBottom="16dp"
                    android:clickable="true"
                    android:focusable="true"
                    android:foreground="?android:attr/selectableItemBackground"
                    app:cardCornerRadius="8dp"
                    app:cardElevation="3dp">

                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal|center_vertical"
                        android:layout_margin="16dp"
                        android:orientation="vertical">

                        <ImageView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_horizontal"
                            android:src="@drawable/ic_advance" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:text="Advance"
                            android:textColor="@color/colorPrimary"
                            android:textSize="16sp"
                            android:textStyle="bold" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:text="Advance Payments"
                            android:textSize="10sp" />

                    </LinearLayout>

                </androidx.cardview.widget.CardView>

                <!-- Column 2 -->
                <androidx.cardview.widget.CardView
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_row="2"
                    android:layout_rowWeight="1"
                    android:layout_column="1"
                    android:layout_columnWeight="1"
                    android:layout_gravity="fill"
                    android:layout_marginLeft="8dp"
                    android:layout_marginRight="8dp"
                    android:layout_marginBottom="16dp"
                    android:clickable="true"
                    android:focusable="true"
                    android:foreground="?android:attr/selectableItemBackground"
                    app:cardCornerRadius="8dp"
                    app:cardElevation="3dp">

                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal|center_vertical"
                        android:layout_margin="16dp"
                        android:orientation="vertical">

                        <ImageView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_horizontal"
                            android:src="@drawable/ic_reciever" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:text="Due"
                            android:textColor="@color/colorPrimary"
                            android:textSize="16sp"
                            android:textStyle="bold" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:text="Pending Payments"
                            android:textSize="10sp" />

                    </LinearLayout>

                </androidx.cardview.widget.CardView>

                <androidx.cardview.widget.CardView
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_row="3"
                    android:layout_rowWeight="1"
                    android:layout_column="0"
                    android:layout_columnWeight="1"
                    android:layout_gravity="fill"
                    android:layout_marginLeft="8dp"
                    android:layout_marginRight="8dp"
                    android:layout_marginBottom="16dp"
                    android:clickable="true"
                    android:focusable="true"
                    android:foreground="?android:attr/selectableItemBackground"
                    app:cardCornerRadius="8dp"
                    app:cardElevation="3dp">

                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal|center_vertical"
                        android:layout_margin="16dp"
                        android:orientation="vertical">

                        <ImageView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_horizontal"
                            android:src="@drawable/ic_transaction" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Transactions"
                            android:layout_gravity="center"
                            android:textColor="@color/colorPrimary"
                            android:textSize="16sp"
                            android:textStyle="bold" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:text="Payments Detalis"
                            android:textSize="10sp" />

                    </LinearLayout>

                </androidx.cardview.widget.CardView>

                <androidx.cardview.widget.CardView
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_row="3"
                    android:layout_rowWeight="1"
                    android:layout_column="1"
                    android:layout_columnWeight="1"
                    android:layout_gravity="fill"
                    android:layout_marginLeft="8dp"
                    android:layout_marginRight="8dp"
                    android:layout_marginBottom="16dp"
                    android:clickable="true"
                    android:focusable="true"
                    android:foreground="?android:attr/selectableItemBackground"
                    app:cardCornerRadius="8dp"
                    app:cardElevation="3dp">

                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal|center_vertical"
                        android:layout_margin="16dp"
                        android:orientation="vertical">

                        <ImageView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_horizontal"
                            android:src="@drawable/ic_sell" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Sell Product"
                            android:layout_gravity="center"
                            android:textColor="@color/colorPrimary"
                            android:textSize="16sp"
                            android:textStyle="bold" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:text="Ghee, Curd etc."
                            android:textSize="10sp" />

                    </LinearLayout>

                </androidx.cardview.widget.CardView>

                <androidx.cardview.widget.CardView
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_row="4"
                    android:layout_rowWeight="1"
                    android:layout_column="0"
                    android:layout_columnWeight="1"
                    android:layout_gravity="fill"
                    android:layout_marginLeft="8dp"
                    android:layout_marginRight="8dp"
                    android:layout_marginBottom="16dp"
                    android:clickable="true"
                    android:focusable="true"
                    android:foreground="?android:attr/selectableItemBackground"
                    app:cardCornerRadius="8dp"
                    app:cardElevation="3dp">

                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal|center_vertical"
                        android:layout_margin="16dp"
                        android:orientation="vertical">

                        <ImageView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_horizontal"
                            android:src="@drawable/ic_purchase_report" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Purchases"
                            android:layout_gravity="center"
                            android:textColor="@color/colorPrimary"
                            android:textSize="16sp"
                            android:textStyle="bold" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:text="Milk Purchase Entries"
                            android:textSize="10sp" />

                    </LinearLayout>

                </androidx.cardview.widget.CardView>

                <androidx.cardview.widget.CardView
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_row="4"
                    android:layout_rowWeight="1"
                    android:layout_column="1"
                    android:layout_columnWeight="1"
                    android:layout_gravity="fill"
                    android:layout_marginLeft="8dp"
                    android:layout_marginRight="8dp"
                    android:layout_marginBottom="16dp"
                    android:clickable="true"
                    android:focusable="true"
                    android:foreground="?android:attr/selectableItemBackground"
                    app:cardCornerRadius="8dp"
                    app:cardElevation="3dp">

                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal|center_vertical"
                        android:layout_margin="16dp"
                        android:orientation="vertical">

                        <ImageView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_horizontal"
                            android:src="@drawable/ic_sale_report" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Sales"
                            android:layout_gravity="center"
                            android:textColor="@color/colorPrimary"
                            android:textSize="16sp"
                            android:textStyle="bold" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:text="Milk Sale Entries"
                            android:textSize="10sp" />

                    </LinearLayout>

                </androidx.cardview.widget.CardView>

            </GridLayout>

        </LinearLayout>

    </ScrollView>
</androidx.constraintlayout.widget.ConstraintLayout> 
```

适合我。我希望它也能帮助你

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-12-01T17:00:19.037

我只是从网格视图中制作了简单的网格布局，并在想为什么我以前没有这样做。这很容易实现。（我在示例中使用自定义包装器 CSView，但只是将其更改为 View）。Ops 要求仅适用于 GridView，因此我将其发布在这里作为答案。因此，例如使拉伸均匀公正`numColumns:auto_fit android:numColumns=2`。

用法：

```
CSGridLayout(this, R.id.sound_store_grid, SubscriptionUpgradeStoreDialogItem(this),
            PresetUpgradeStoreDialogItem(this), MidiUpgradeStoreDialogItem(this)) 
```

执行：

```
class CSGridLayout(parent: CSActivityView<*>,
                   viewId: Int,
                   vararg items: CSView<*>) : CSView<GridView>(parent, viewId) {

    private val items = list(items)
    private var adapter = Adapter()

    init {
        view.adapter = adapter
        adapter.notifyDataSetChanged()
    }

    inner class Adapter : BaseAdapter() {
        override fun getCount() = items.size
        override fun getViewTypeCount() = 1
        override fun isEnabled(position: Int) = true
        override fun getItem(position: Int) = items[position]
        override fun getItemViewType(position: Int) = 0
        override fun getItemId(position: Int) = position.toLong()
        override fun getView(position: Int, toReuseView: View?, parent: ViewGroup) =
            items[position].view
    }
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-05-15T07:46:15.710

[![网格布局](../Images/c2064242e26a9d999af47196798c9fe1.png)](https://i.stack.imgur.com/ZLSmw.png)

```
 <GridLayout
        android:layout_width="match_parent"
        android:layout_weight="3"
        android:columnCount="2"
        android:padding="10dp"
        android:rowCount="3"
        android:background="@drawable/background_down"
        android:layout_height="0dp">

        <androidx.cardview.widget.CardView
            android:layout_height="0dp"
            android:layout_width="0dp"
            android:layout_columnWeight="1"
            android:layout_rowWeight="1"
            android:layout_margin="10dp"
            android:elevation="10dp"
            app:cardCornerRadius="15dp"
            >
            <LinearLayout
                android:weightSum="3"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical"
                >

                <ImageView
                    android:layout_weight="2"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:layout_margin="15dp"
                    android:src="@drawable/user" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Users"
                    android:textSize="16sp"
                    android:layout_marginStart="15dp"
                    android:layout_marginLeft="15dp" />
            </LinearLayout>

        </androidx.cardview.widget.CardView>
        <androidx.cardview.widget.CardView
            android:layout_height="0dp"
            android:layout_width="0dp"
            android:layout_columnWeight="1"
            android:layout_rowWeight="1"
            android:layout_margin="10dp"
            android:elevation="10dp"
            app:cardCornerRadius="15dp"
            >
            <LinearLayout
                android:weightSum="3"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical"
                >

                <ImageView
                    android:layout_weight="2"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:layout_margin="15dp"
                    android:src="@drawable/addusers" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Add Users"
                    android:textSize="16sp"
                    android:layout_marginStart="15dp"
                    android:layout_marginLeft="15dp" />
            </LinearLayout>

        </androidx.cardview.widget.CardView>

        <androidx.cardview.widget.CardView
            android:layout_height="0dp"
            android:layout_width="0dp"
            android:layout_columnWeight="1"
            android:layout_rowWeight="1"
            android:layout_margin="10dp"
            android:elevation="10dp"
            app:cardCornerRadius="15dp"
            >
            <LinearLayout
                android:weightSum="3"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical"
                >

                <ImageView
                    android:layout_weight="2"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:layout_margin="15dp"
                    android:src="@drawable/newspaper" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Report"
                    android:textSize="16sp"
                    android:layout_marginStart="15dp"
                    android:layout_marginLeft="15dp" />
            </LinearLayout>

        </androidx.cardview.widget.CardView>
        <androidx.cardview.widget.CardView
            android:layout_height="0dp"
            android:layout_width="0dp"
            android:layout_columnWeight="1"
            android:layout_rowWeight="1"
            android:layout_margin="10dp"
            android:elevation="10dp"
            app:cardCornerRadius="5dp"
            >
            <LinearLayout
                android:weightSum="3"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical"
                >

                <ImageView
                    android:layout_weight="2"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:layout_margin="15dp"
                    android:src="@drawable/settings" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Settings"
                    android:textSize="16sp"
                    android:layout_marginStart="15dp"
                    android:layout_marginLeft="15dp" />
            </LinearLayout>

        </androidx.cardview.widget.CardView>

    </GridLayout> 
```

你可以在这里找到完整的教程， [Android Grid Layout With CardView and OnItemClickListener](https://youtu.be/C9WqYBv7U1w)

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-02-11T20:32:42.103

它可以通过具有相等的`layout_columnWeight`&`layout_rowWeight`

**布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:grid="http://schemas.android.com/apk/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:columnCount="3">

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_rowWeight="1"
        android:layout_columnWeight="1"
        android:gravity="center"
        android:text="item 0x0"
        grid:layout_column="0"
        grid:layout_gravity="center"
        grid:layout_row="0" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_rowWeight="1"
        android:layout_columnWeight="1"
        android:gravity="center"
        android:text="item 0x1"
        grid:layout_column="1"
        grid:layout_gravity="center"
        grid:layout_row="0" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_rowWeight="1"
        android:layout_columnWeight="1"
        android:gravity="center"
        android:text="item 0x2"
        grid:layout_column="2"
        grid:layout_gravity="center"
        grid:layout_row="0" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_rowWeight="1"
        android:layout_columnWeight="1"
        android:gravity="center"
        android:text="item 1x0"
        grid:layout_column="0"
        grid:layout_gravity="center"
        grid:layout_row="1" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_rowWeight="1"
        android:layout_columnWeight="1"
        android:gravity="center"
        android:text="item 1x1"
        grid:layout_column="1"
        grid:layout_gravity="center"
        grid:layout_row="1" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_rowWeight="1"
        android:layout_columnWeight="1"
        android:gravity="center"
        android:text="item 1x2"
        grid:layout_column="2"
        grid:layout_gravity="center"
        grid:layout_row="1" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_rowWeight="1"
        android:layout_columnWeight="1"
        android:gravity="center"
        android:text="item 2x0"
        grid:layout_column="0"
        grid:layout_gravity="center"
        grid:layout_row="2" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_rowWeight="1"
        android:layout_columnWeight="1"
        android:gravity="center"
        android:text="item 2x1"
        grid:layout_column="1"
        grid:layout_gravity="center"
        grid:layout_row="2" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_rowWeight="1"
        android:layout_columnWeight="1"
        android:gravity="center"
        android:text="item 2x2"
        grid:layout_column="2"
        grid:layout_gravity="center"
        grid:layout_row="2" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_rowWeight="1"
        android:layout_columnWeight="1"
        android:gravity="center"
        android:text="item 3x0"
        grid:layout_column="0"
        grid:layout_gravity="center"
        grid:layout_row="3" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_rowWeight="1"
        android:layout_columnWeight="1"
        android:gravity="center"
        android:text="item 3x1"
        grid:layout_column="1"
        grid:layout_gravity="center"
        grid:layout_row="3" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_rowWeight="1"
        android:layout_columnWeight="1"
        android:gravity="center"
        android:text="item 3x2"
        grid:layout_column="2"
        grid:layout_gravity="center"
        grid:layout_row="3" />

</GridLayout> 
```

**结果**

[![在此处输入图像描述](../Images/ab79ffe799b50ea2f3603bc8c63d47d5.png)](https://i.stack.imgur.com/TQweG.jpg)

[![在此处输入图像描述](../Images/82b34bae96ca45ff9d02d3e5d96c3683.png)](https://i.stack.imgur.com/5VmKY.jpg)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-04-18T12:05:50.960

对我来说，我只是更改`layout_width`并设置为：`layout_height``wrap_content``layout_gravity``center_horizontal`

```
<GridLayout
    android:id="@+id/gridLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:columnCount="2"
    android:rowCount="4"> 
```

* * *

## 回答 #25

> 赞同：-2
> 
> 时间：2014-10-15T20:50:57.523

这就是我所做的，我很高兴地说这对我有用。我也想要一个 2x2、3x3 等网格的项目来覆盖整个屏幕。网格布局不遵守屏幕的宽度。LinearLayouts 的工作，但你不能使用嵌套的权重。

对我来说最好的选择是使用**Fragments**我使用[本](http://www.tutorialspoint.com/android/android_fragments.htm)教程开始我想做的事情。

这是一些代码：

主要活动：

```
public class GridHolderActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main_6);
    }
} 
```

activity_main_6 XML（膨胀 3 个片段）

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <fragment
        android:id="@+id/frag1"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:name=".TwoHorizontalGridFragment"
        tools:layout="@layout/two_horiz" />
    <fragment
        android:id="@+id/frag2"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:name=".TwoHorizontalGridFragment"
        tools:layout="@layout/two_horiz" />
    <fragment
        android:id="@+id/frag3"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:name=".Grid.TwoHorizontalGridFragment"
        tools:layout="@layout/two_horiz" /> 
```

基本片段布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="wrap_content"
    android:layout_gravity="center"
    android:layout_height="match_parent">

    <ImageQueue
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:id="@+id/img1"
        android:layout_weight="1"/>

    <ImageQueue
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:id="@+id/img2"
        android:layout_weight="1"/>
</LinearLayout> 
```

片段类（仅处理自定义视图的初始化）每个片段膨胀 2 个图块

```
public class TwoHorizontalGridFragment extends Fragment {
private View rootView;

private ImageQueue imageQueue1;
private ImageQueue imageQueue2;

@Override
public View onCreateView(LayoutInflater inflater,
                         ViewGroup container, Bundle savedInstanceState) {
    /**
     * Inflate the layout for this fragment
     */
    rootView = inflater.inflate(
            R.layout.two_horiz, container, false);
    return rootView;
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    imageQueue1 = (ImageQueue)rootView.findViewById(R.id.img1);
    imageQueue2 = (ImageQueue)rootView.findViewById(R.id.img2);
    imageQueue1.updateFiles();
    imageQueue2.updateFiles();
} 
```

}

而已！

本质上，这是一个使用嵌套权重的奇怪工作。它给了我一个完美的 2x3 网格，填充了我的 10 英寸平板电脑和我的 HTC droid DNA 的整个屏幕。让我知道你的情况如何！

# javascript - 如何在标签内外突出显示文本？

> ID：10016344
> 
> 赞同：1
> 
> 时间：2012-04-04T17:33:38.173
> 
> 标签：javascript, regex, tags, string-matching, replace

我正在开发 WebApp。我有快速搜索文章的功能。

用两个词结构是：

*   页
*   包含由 ajax 获取的文章的全局数组（json，100-150 项）。（带有字段：id、title、snippet）。Title & Snippet 可能包含简单的样式标记标签。

因此，当用户在 popup-quicksearch 字段中键入查询时，app

1.  在全局数组中搜索
2.  如果找到匹配项，`push`则到临时搜索结果数组（带缓存）
3.  突出显示温度中的匹配项。结果数组并显示给用户

如您所见，原始数组没有修改。

目前我正在使用原语`String.indexOf`，但它无法匹配通过 html 标签文本格式化的文本（下面的示例）：

问题是关于 RegEx 模式的。我清楚地知道不建议使用 RegEx 来操作 DOM，并且期望下面的结果在语义上不正确，但***它符合需要***。

例如：我们有这样的事情：

`<ul><li>Item <i><span style="color:red">Y</span></i></li></ul>`

我们需要突出显示 query `e`，期待 result: `... It<em>e</em>m ...`，但如果使用 trivial`replace(/e/ig, '<em>$&</em>')`它也会替换`e`in `style="color:red"`。

即什么正则表达式模式不接触标签中的单词？

* * *

第二个例子：我们需要高亮`Item Y`，所以期望的结果是`<ul><li><em>Item <i><span style="color:red">Y</em></span></i></li></ul>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:27:57.170

如果我理解正确，您需要在 DOM 树的片段的文本内容中进行搜索。实现此目的的一种方法是使用 XML/HTML 文本内容。这个例子使用了 jQuery，但是这个想法很容易移植到其他库：

HTML：

```
<div id="article_contents">
Blah blah blah, Item 1, Item 2 blah blah <b>Ite</b>m <span>1</span> blah blah
</div> 
```

JavaScript：

```
var source = jQuery('#article_contents').text();
var queryRegexp = new RegExp ( 'Item 1', 'g' );
var results = source.match (queryRegexp); 
```

现在`results`将保存您的搜索字符串的所有出现。当然，要实现突出显示结果的目标，您必须更进一步（例如使用 RegExp.exec 获取匹配项的偏移量）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T17:43:47.480

一个简短的 hackish 解决方案是在搜索字符串的每个字母之间寻找标记。如果您的关键字是“搜索”，它将如下所示：

`(s)(<[.^>]*>)*(e)(<[.^>]*>)*(a)(<[.^>]*>)*(r)(<[.^>]*>)*(c)(<[.^>]*>)*(h)`

但实际上你需要做的还不止这些，因为：

*   脚本
*   文本区域
*   `display:none`, `visibility:hidden`, 等

# entity-framework - 是否有相当于 Entity Framework 的 fluent API 的 WillCascadeOnDelete() 的数据注释？

> ID：10016347
> 
> 赞同：4
> 
> 时间：2012-04-04T17:33:43.630
> 
> 标签：entity-framework

在我的`OnModelCreating`方法中，我删除了`CascadeDeleteConventions`，但我想在我的模型中指定一些关系作为级联删除。

但是，关系是使用属性（例如`[ForeignKey("Foo")]`）定义的，而不是通过 fluent API 定义的。是否有与 fluent API 的`WillCascadeOnDelete`功能等效的属性？

# android - 我如何从一项活动转到另一项活动？

> ID：10016349
> 
> 赞同：0
> 
> 时间：2012-04-04T17:33:49.370
> 
> 标签：android, button, android-activity, android-intent

我有一个 Main 类和一个 HelloWorld 类。当我单击此按钮时，我在 Main.xml 中创建了一个按钮，它应该启动 HelloWorld 活动。当我执行它时，当我单击按钮时它会强制关闭。日志猫也在下面给出。

主.java

```
import java.io.IOException;
import java.util.List;
import java.util.Locale;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.MyLocationOverlay;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.graphics.drawable.Drawable;
import android.location.Address;
import android.location.Criteria;
import android.location.Geocoder;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class Main extends MapActivity implements LocationListener {
/** Called when the activity is first created. */
MapView map;
long start;
long stop;
int x, y;
GeoPoint touchedPoint;
Drawable d;
List<Overlay> overlayList;
LocationManager lm;
String towers;
int lat ;
   int longi; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button button = (Button)findViewById(R.id.button1);
    button.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            //Toast.makeText(Main.this, "you clicked on button!",     Toast.LENGTH_LONG).show();
            Intent intent = new Intent(Main.this, HelloWorld.class);
    startActivity(intent)
        }
    });

    map = (MapView)findViewById(R.id.mv);
    map.setBuiltInZoomControls(true);

    Touchy t = new Touchy();
    overlayList = map.getOverlays();
    overlayList.add(t);

    d = getResources().getDrawable(R.drawable.pinn);

    //Placing pintpoint
    lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Criteria crit = new Criteria();

    towers = lm.getBestProvider(crit, false);
    Location location = lm.getLastKnownLocation(towers);

    if (location != null){
        lat = (int) (location.getLatitude() *1E6);
        longi= (int) (location.getLongitude() *1E6);

        GeoPoint ourLocation = new GeoPoint(lat,longi);
        OverlayItem overlayItem = new OverlayItem(ourLocation, "Hi!!", "2nd");
        CustomPinPoint custom = new CustomPinPoint(d, Main.this);   
        custom.insertPinpoint(overlayItem);
        overlayList.add(custom);
    }else{
        Toast.makeText(Main.this, "Couldnt get provider", Toast.LENGTH_SHORT).show();
    }

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub

    super.onPause();
    lm.removeUpdates(this);
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub

    super.onResume();
    lm.requestLocationUpdates(towers, 500, 1, this );
}

    @Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

class Touchy extends Overlay{
    public boolean onTouchEvent(MotionEvent e, MapView m){
    if (e.getAction() == MotionEvent.ACTION_DOWN){
        start = e.getEventTime();

    }
    if (e.getAction() == MotionEvent.ACTION_UP){
        stop = e.getEventTime();
        x = (int) e.getX();
        y = (int) e.getY();
        touchedPoint = map.getProjection().fromPixels(x, y);

    }
    if (stop - start > 1500){
        AlertDialog alert = new AlertDialog.Builder(Main.this).create();
        alert.setTitle("Pick Option");

        alert.setButton("Hello", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

                OverlayItem overlayItem = new OverlayItem(touchedPoint, "Hi!!", "2nd");
                CustomPinPoint custom = new CustomPinPoint(d, Main.this);   
                custom.insertPinpoint(overlayItem);
                overlayList.add(custom);

        }
        });
        alert.setButton3("Get Address", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
            Geocoder geocoder = new Geocoder(getBaseContext(), Locale.getDefault());
            try{
                List<Address> address = geocoder.getFromLocation(touchedPoint.getLatitudeE6() / 1E6, touchedPoint.getLongitudeE6() / 1E6 , 1);
                if (address.size() > 0){
                    String display = "";
                    for (int i = 0; i<address.get(0).getMaxAddressLineIndex(); i++){

                        display += address.get(0).getAddressLine(i) + "\n";
                    }
                    Toast t = Toast.makeText(getBaseContext(), display, Toast.LENGTH_LONG);
                    t.show();
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }finally{
            }
        }});
        alert.setButton2("Toggle View", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

                if (map.isSatellite()){
                    map.setSatellite(false);
                    map.setStreetView(true);
                }else{
                    map.setStreetView(false);
                    map.setSatellite(true);
                }
            }
});
        alert.setButton("Place a Pin", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

                OverlayItem overlayItem = new OverlayItem(touchedPoint, "Hi!!", "2nd");
                CustomPinPoint custom = new CustomPinPoint(d, Main.this);   
                custom.insertPinpoint(overlayItem);
                overlayList.add(custom);

            }

        });
        alert.show();
        return true;
    }

        return false;
    }

}

public void onLocationChanged(Location l) {
    // TODO Auto-generated method stub
    lat = (int) (l.getLatitude() *1E6);
    longi = (int) (l.getLongitude() *1E6);
    GeoPoint ourLocation = new GeoPoint(lat,longi);
    OverlayItem overlayItem = new OverlayItem(ourLocation, "Hi!!", "2nd");
    CustomPinPoint custom = new CustomPinPoint(d, Main.this);   
    custom.insertPinpoint(overlayItem);
    overlayList.add(custom);

}

public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}

} 
```

HelloWorld.java

```
import com.google.android.maps.OverlayItem;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class HelloWorld extends Activity
{

    protected void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);

    Button button1 = (Button) findViewById(R.id.button1);
    button1.setOnClickListener(new View.OnClickListener() 
    {
        public void onClick(View v)
        {
            Toast.makeText(HelloWorld.this, "you clicked on button![enter image description here][3]", Toast.LENGTH_LONG).show();
        }
}); 
```

原木猫

```
04-04 22:56:21.623: W/dalvikvm(309): threadid=1: thread exiting with uncaught exception    (group=0x4001d800)
04-04 22:56:21.703: E/AndroidRuntime(309): FATAL EXCEPTION: main
04-04 22:56:21.703: E/AndroidRuntime(309): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mehul.googlemaps/com.mehul.googlemaps.HelloWorld}: android.view.InflateException: Binary XML file line #20: Error inflating class <unknown>
04-04 22:56:21.703: E/AndroidRuntime(309):  at        android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-04 22:56:21.703: E/AndroidRuntime(309):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-04 22:56:21.703: E/AndroidRuntime(309):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-04 22:56:21.703: E/AndroidRuntime(309):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-04 22:56:21.703: E/AndroidRuntime(309):  at  android.os.Handler.dispatchMessage(Handler.java:99)
04-04 22:56:21.703: E/AndroidRuntime(309):  at android.os.Looper.loop(Looper.java:123)
04-04 22:56:21.703: E/AndroidRuntime(309):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-04 22:56:21.703: E/AndroidRuntime(309):  at java.lang.reflect.Method.invokeNative(Native Method)
04-04 22:56:21.703: E/AndroidRuntime(309):  at java.lang.reflect.Method.invoke(Method.java:521)
04-04 22:56:21.703: E/AndroidRuntime(309):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-04 22:56:21.703: E/AndroidRuntime(309):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-04 22:56:21.703: E/AndroidRuntime(309):  at dalvik.system.NativeStart.main(Native   Method)
04-04 22:56:21.703: E/AndroidRuntime(309): Caused by: android.view.InflateException:    Binary XML file line #20: Error inflating class <unknown>
04-04 22:56:21.703: E/AndroidRuntime(309):  at android.view.LayoutInflater.createView(LayoutInflater.java:513)
04-04 22:56:21.703: E/AndroidRuntime(309):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
04-04 22:56:21.703: E/AndroidRuntime(309):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
04-04 22:56:21.703: E/AndroidRuntime(309):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
04-04 22:56:21.703: E/AndroidRuntime(309):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-04 22:56:21.703: E/AndroidRuntime(309):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-04 22:56:21.703: E/AndroidRuntime(309):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
04-04 22:56:21.703: E/AndroidRuntime(309):  at android.app.Activity.setContentView(Activity.java:1647)
04-04 22:56:21.703: E/AndroidRuntime(309):  at com.mehul.googlemaps.HelloWorld.onCreate(HelloWorld.java:20)
04-04 22:56:21.703: E/AndroidRuntime(309):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-04 22:56:21.703: E/AndroidRuntime(309):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-04 22:56:21.703: E/AndroidRuntime(309):  ... 11 more
04-04 22:56:21.703: E/AndroidRuntime(309): Caused by: java.lang.reflect.InvocationTargetException
04-04 22:56:21.703: E/AndroidRuntime(309):  at com.google.android.maps.MapView.<init>(MapView.java:238)
04-04 22:56:21.703: E/AndroidRuntime(309):  at java.lang.reflect.Constructor.constructNative(Native Method)
04-04 22:56:21.703: E/AndroidRuntime(309):  at   java.lang.reflect.Constructor.newInstance(Constructor.java:446)
04-04 22:56:21.703: E/AndroidRuntime(309):  at android.view.LayoutInflater.createView(LayoutInflater.java:500)
04-04 22:56:21.703: E/AndroidRuntime(309):  ... 21 more
04-04 22:56:21.703: E/AndroidRuntime(309): Caused by:   java.lang.IllegalArgumentException: MapViews can only be created inside instances of   MapActivity.
04-04 22:56:21.703: E/AndroidRuntime(309):  at com.google.android.maps.MapView.<init>(MapView.java:282)
04-04 22:56:21.703: E/AndroidRuntime(309):  at com.google.android.maps.MapView.<init>(MapView.java:255)
04-04 22:56:21.703: E/AndroidRuntime(309):  ... 25 more 
```

如果还有什么需要让我知道..会放上去的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:38:41.190

```
java.lang.IllegalArgumentException: MapViews can only be created inside instances of   MapActivity. 
```

错误信息对我来说似乎很清楚。您的活动包括`MapView`需要从`MapActivity`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:40:06.200

这是您必须注意的logcat

```
04-04 22:56:21.703: E/AndroidRuntime(309): Caused by:   java.lang.IllegalArgumentException: MapViews can only be created inside instances of   MapActivity. 
```

您可以做的是，使用以下内容创建一个 test.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/hellotv"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

</LinearLayout> 
```

在你的 HelloWorld 中做`setContentView(R.layout.test);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:40:38.900

在 Helloworld 类中，您正在使用 setcontentView(r.layout.main);

并且您的 main.xml 具有地图视图。

并从代码中的以下行

```
public class HelloWorld extends Activity 
```

您正在扩展到活动，因此应用程序正在崩溃。

使用下面的行而不是上面

```
public class HelloWorld extends MapActivity 
```

或者为 HelloWorld.java 创建一个新的布局文件。

就是这样...

# jquery - 如何使用 jQuery 编写类似 Sparrow 的侧边导航菜单？

> ID：10016350
> 
> 赞同：2
> 
> 时间：2012-04-04T17:33:51.413
> 
> 标签：jquery, html, mobile, css, mobile-safari

如果有人熟悉 Sparrow iOS 应用程序，我正在寻找教程，或者只是想知道如何在 HTML5/CSS3/jQuery 中构建类似的方法。我在下面直接从应用程序中包含了 3 个屏幕截图，因此您可以了解我在说什么..

当然，jQuery 功能可能无法完美模仿 iOS 动画等。但我希望功能可以相似，即你点击左上角的按钮，我们的第一个导航菜单就会出现。然后，您可以点击旧屏幕将其重新显示，或使用另一个后退按钮滑入第二个导航窗口。

以下是供参考的屏幕 - 提前感谢您的帮助！

![默认屏幕](../Images/c9cea11c76f49ebfd974970785926ad4.png) ![第一个滑动导航](../Images/79c1e2bc233836c31d502878dc9b6bcd.png) ![第二个子菜单滑块](../Images/717400cbc8f0bdc98e2bd9b33bae4700.png)

# python - 将numpy数组转换为元组

> ID：10016352
> 
> 赞同：137
> 
> 时间：2012-04-04T17:33:55.970
> 
> 标签：python, numpy

**注意：**这要求与通常的元组到数组的转换相反。

我必须将参数作为嵌套元组传递给（包装的 c++）函数。例如，以下作品

```
X = MyFunction( ((2,2),(2,-2)) ) 
```

而以下*不*

```
X = MyFunction( numpy.array(((2,2),(2,-2))) )
X = MyFunction( [[2,2],[2,-2]] ) 
```

不幸的是，我想使用的参数是一个 numpy 数组。对于某些 N，该数组的维度始终为 2xN，这可能非常大。

有没有一种简单的方法可以将其转换为元组？我知道我可以循环，创建一个新的元组，但如果 numpy 数组提供了一些不错的访问，我会更喜欢。

如果不可能像我希望的那样完美地做到这一点，那么通过循环或其他方式做到这一点的最漂亮的方法是什么？

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2012-04-04T17:35:41.920

```
>>> arr = numpy.array(((2,2),(2,-2)))
>>> tuple(map(tuple, arr))
((2, 2), (2, -2)) 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-04-04T17:52:23.107

这是一个可以做到这一点的函数：

```
def totuple(a):
    try:
        return tuple(totuple(i) for i in a)
    except TypeError:
        return a 
```

还有一个例子：

```
>>> array = numpy.array(((2,2),(2,-2)))
>>> totuple(array)
((2, 2), (2, -2)) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-08-12T13:35:06.367

我不满意，所以我最后用了这个：

```
>>> a=numpy.array([[1,2,3],[4,5,6]])
>>> a
array([[1, 2, 3],
       [4, 5, 6]])

>>> tuple(a.reshape(1, -1)[0])
(1, 2, 3, 4, 5, 6) 
```

我不知道它是否更快，但它看起来更有效；）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-05-01T18:50:15.230

另外一个选项

```
tuple([tuple(row) for row in myarray]) 
```

如果您将 NumPy 数组传递给 C++ 函数，您可能还希望查看使用 Cython 或 SWIG。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-02-19T10:41:21.967

如果你喜欢长切，这里有另一种方式 tuple(tuple(a_m.tolist()) for a_m in a )

```
from numpy import array
a = array([[1, 2],
           [3, 4]])
tuple(tuple(a_m.tolist()) for a_m in a ) 
```

输出为 ((1, 2), (3, 4))

请注意 (tuple(a_m.tolist()) for a_m in a ) 将给出生成器表达式。受到@norok2 对[Greg von Winckel 回答的评论的启发](https://stackoverflow.com/a/23414424/12226486)

# php - 使用 GD 编译 PHP5.4 OS X Lion 时出现问题

> ID：10016353
> 
> 赞同：0
> 
> 时间：2012-04-04T17:33:57.393
> 
> 标签：php, macos, makefile, osx-lion, gd

我正在尝试在 Mac OS X Lion 上使用 GD 编译 PHP5.4.0，但收效甚微。我尝试通过 Homebrew 手动安装 GD，但这似乎也不起作用。据我所知，GD 无论如何都与 OS X 捆绑在一起。

我的配置命令如下所示：

```
./configure --enable-sockets --with-curl --with-mysql=/usr/local/Cellar/mysql/5.5.20 --with-mysqli=/usr/local/Cellar/mysql/5.5.20/bin/mysql_config --prefix=/usr --with-apxs2 --enable-mbstring --enable-exif --with-gd --with-png-dir=/usr/X11 --with-jpeg-dir=/usr/X11 
```

...配置非常好。当我尝试`make`我的来源时，问题就来了：

`Undefined symbols for architecture x86_64: "_php_gd_gdImageEllipse", referenced from: _zif_imageellipse in gd.o _php_gd_gdImageArc in gd.o "_php_gd_gdImageFilledEllipse", referenced from: _zif_imagefilledellipse in gd.o "_php_gd_gdImageRotate", referenced from: _zif_imagerotate in gd.o "_php_gd_gdImageColorMatch", referenced from: _zif_imagecolormatch in gd.o "_php_gd_gdImageConvolution", referenced from: _zif_imageconvolution in gd.o "_php_gd_gdImageNegate", referenced from: _php_image_filter_negate in gd.o "_php_gd_gdImageGrayScale", referenced from: _php_image_filter_grayscale in gd.o "_php_gd_gdImageBrightness", referenced from: _php_image_filter_brightness in gd.o "_php_gd_gdImageContrast", referenced from: _php_image_filter_contrast in gd.o "_php_gd_gdImageColor", referenced from: _php_image_filter_colorize in gd.o (maybe you meant: _php_gd_gdImageColorResolve, _php_gd_gdImageColorExactAlpha , _php_gd_gdImageColorAllocate , _php_gd_gdImageColorAllocateAlpha , _php_gd_gdImageColorExact , _php_gd_gdImageColorClosest , _php_gd_gdImageColorClosestAlpha , _php_gd_gdImageColorDeallocate , _php_gd_gdImageColorClosestHWB , _php_gd_gdImageColorResolveAlpha , _php_gd_gdImageColorTransparent ) "_php_gd_gdImageEdgeDetectQuick", referenced from: _php_image_filter_edgedetect in gd.o "_php_gd_gdImageEmboss", referenced from: _php_image_filter_emboss in gd.o "_php_gd_gdImageGaussianBlur", referenced from: _php_image_filter_gaussian_blur in gd.o "_php_gd_gdImageSelectiveBlur", referenced from: _php_image_filter_selective_blur in gd.o "_php_gd_gdImageMeanRemoval", referenced from: _php_image_filter_mean_removal in gd.o "_php_gd_gdImageSmooth", referenced from: _php_image_filter_smooth in gd.o "_FT_Done_FreeType", referenced from: _php_gd_gdFontCacheShutdown in gdft.o _php_gd_gdFreeFontCache in gdft.o "_FT_Init_FreeType", referenced from: _php_gd_gdFontCacheSetup in gdft.o _php_gd_gdImageStringFTEx in gdft.o "_FT_New_Face", referenced from: _fontFetch in gdft.o "_FT_Done_Face", referenced from: _fontRelease in gdft.o "_FT_Set_Char_Size", referenced from: _php_gd_gdImageStringFTEx in gdft.o "_FT_Get_Glyph", referenced from: _php_gd_gdImageStringFTEx in gdft.o "_FT_Glyph_Get_CBox", referenced from: _php_gd_gdImageStringFTEx in gdft.o "_FT_Glyph_To_Bitmap", referenced from: _php_gd_gdImageStringFTEx in gdft.o "_FT_Set_Transform", referenced from: _php_gd_gdImageStringFTEx in gdft.o "_FT_Get_Char_Index", referenced from: _php_gd_gdImageStringFTEx in gdft.o "_FT_Get_Kerning", referenced from: _php_gd_gdImageStringFTEx in gdft.o "_FT_Load_Glyph", referenced from: _php_gd_gdImageStringFTEx in gdft.o "_FT_Done_Glyph", referenced from: _php_gd_gdImageStringFTEx in gdft.o "_gdImageGetPixel", referenced from: _gdImageNegate in gd_filter.o _gdImageGrayScale in gd_filter.o _gdImageBrightness in gd_filter.o _gdImageContrast in gd_filter.o _gdImageColor in gd_filter.o _gdImageConvolution in gd_filter.o _gdImageSelectiveBlur in gd_filter.o ... (maybe you meant: _php_gd_gdImageGetPixel) "_gdImageGetTrueColorPixel", referenced from: _gdImageNegate in gd_filter.o _gdImageGrayScale in gd_filter.o _gdImageBrightness in gd_filter.o _gdImageContrast in gd_filter.o _gdImageColor in gd_filter.o _gdImageConvolution in gd_filter.o _gdImageSelectiveBlur in gd_filter.o ... (maybe you meant: _php_gd_gdImageGetTrueColorPixel) "_gdImageColorAllocateAlpha", referenced from: _gdImageNegate in gd_filter.o _gdImageGrayScale in gd_filter.o _gdImageBrightness in gd_filter.o _gdImageContrast in gd_filter.o _gdImageColor in gd_filter.o _gdImageConvolution in gd_filter.o _gdImageSelectiveBlur in gd_filter.o ... (maybe you meant: _php_gd_gdImageColorAllocateAlpha) "_gdImageColorClosestAlpha", referenced from: _gdImageNegate in gd_filter.o _gdImageGrayScale in gd_filter.o _gdImageBrightness in gd_filter.o _gdImageContrast in gd_filter.o _gdImageColor in gd_filter.o _gdImageConvolution in gd_filter.o _gdImageSelectiveBlur in gd_filter.o ... (maybe you meant: _php_gd_gdImageColorClosestAlpha) "_gdImageSetPixel", referenced from: _gdImageNegate in gd_filter.o _gdImageGrayScale in gd_filter.o _gdImageBrightness in gd_filter.o _gdImageContrast in gd_filter.o _gdImageColor in gd_filter.o _gdImageConvolution in gd_filter.o _gdImageSelectiveBlur in gd_filter.o ... (maybe you meant: _php_gd_gdImageSetPixel) "_gdImageCreateTrueColor", referenced from: _gdImageConvolution in gd_filter.o _gdImageSelectiveBlur in gd_filter.o _gdImageRotate90 in gd_rotate.o _gdImageRotate180 in gd_rotate.o _gdImageRotate270 in gd_rotate.o _gdImageRotate45 in gd_rotate.o (maybe you meant: _php_gd_gdImageCreateTrueColor) "_gdImageSaveAlpha", referenced from: _gdImageConvolution in gd_filter.o (maybe you meant: _php_gd_gdImageSaveAlpha) "_gdImageFill", referenced from: _gdImageConvolution in gd_filter.o (maybe you meant: _php_gd_gdImageFilledPolygon, _php_gd_gdImageFilledArc , _php_gd_gdImageFilledRectangle , _php_gd_gdImageFillToBorder , _gdImageFilledEllipse , _php_gd_gdImageFill ) "_gdImageCopy", referenced from: _gdImageConvolution in gd_filter.o _gdImageSelectiveBlur in gd_filter.o _gdImageRotate45 in gd_rotate.o (maybe you meant: _php_gd_gdImageCopyMerge, _php_gd_gdImageCopyResampled , _php_gd_gdImageCopyResized , _php_gd_gdImageCopyMergeGray , _php_gd_gdImageCopy ) "_gdImageDestroy", referenced from: _gdImageConvolution in gd_filter.o _gdImageSelectiveBlur in gd_filter.o _gdImageRotate45 in gd_rotate.o _gdImageRotate in gd_rotate.o (maybe you meant: _php_gd_gdImageDestroy) "_gdImageFilledRectangle", referenced from: _gdImagePixelate in gd_pixelate.o (maybe you meant: _php_gd_gdImageFilledRectangle) "_gdImageColorResolveAlpha", referenced from: _gdImagePixelate in gd_pixelate.o (maybe you meant: _php_gd_gdImageColorResolveAlpha) "_gdImagePaletteCopy", referenced from: _gdImageRotate90 in gd_rotate.o _gdImageRotate180 in gd_rotate.o _gdImageRotate270 in gd_rotate.o _gdImageRotate45 in gd_rotate.o (maybe you meant: _php_gd_gdImagePaletteCopy) "_gdImageAlphaBlending", referenced from: _gdImageRotate45 in gd_rotate.o (maybe you meant: _php_gd_gdImageAlphaBlending) ld: symbol(s) not found for architecture x86_64 collect2: ld returned 1 exit status make: *** [libs/libphp5.bundle] Error 1`

当我不包含与 gd/image 相关的开关时，PHP 编译得非常好，所以它一定是 GD 位的问题。我对 UNIX 和`make`.

谢谢，我最好的，

杰米

# java - 高效的mysql查询

> ID：10016359
> 
> 赞同：-1
> 
> 时间：2012-04-04T17:34:25.877
> 
> 标签：java, mysql

我正在尝试从 20 多分钟的运行时间中获取一份报告，并且我已经跟踪了一个 mysql 查询的瓶颈，该查询使用 5 个连接和 3 个子查询在一个数据集中返回所有结果。到目前为止，我的最大瓶颈似乎是：在支付表上加入 stock 表是 stock.id 匹配 payment.stock_id 并且 payment.type 是这种类型， payment.status 是这种状态。我正在慢慢地将其分解为各种查询，并让 Java 决定要保留和丢弃哪些记录，但我想知道 mysql 中是否有一种有效的方法来获取几个结果集，也许是存储在内存中的表，然后查询反对那些？我的一些结果集会非常大，在最坏的情况下有几十万个条目。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:40:37.840

您有一些创建物化视图的选择，以便您可以按时间间隔运行它，但您基本上会对数据的有效性产生延迟影响。但肯定更快。

其次是索引连接列。

子选择通常比 JOIN 更昂贵，因此请尝试将您的子选择合并到连接中。

有很多关于这些问题的 SQL 优化书籍值得一读。但是不知道您的数据库或架构或索引以及连接和子选择的方式。这几乎就像在黑暗中接球一样。

# php - Yii，用一个文本框更新多个模型

> ID：10016365
> 
> 赞同：1
> 
> 时间：2012-04-04T17:34:47.070
> 
> 标签：php, yii

我讨厌问这样一个笼统的问题，这不是为我编写代码的问题。我只需要一些帮助才能朝着正确的方向开始。

我将做类似的事情： [http ://www.yiiframework.com/doc/guide/1.1/en/form.table](http://www.yiiframework.com/doc/guide/1.1/en/form.table)

但这是场景，我的模型是木材产品。您可以将 2x4 8' 作为一个，将 2x4 10' 作为另一个。一直到24'。它们都有一个价格字段，具有不同的价格。但它们可以按直线英尺、板英尺、千板英尺等定价。

所以 2x4 8' 的价格可能是 1.92，而 2x4 10' 的价格可能是 2.40。但是您可以通过将 0.24 作为线性价格传递给两个模型来设置价格值。所以 .24 * 8 和 .24 * 10。每个木材模型都有可以在这里使用的称为长度的字段。

使用 Yii，并以 Yii 的方式进行操作……而不是像我想的那样解决一些问题。将一个 CActiveTextField 链接到多个模型的正确方法是什么。例如。一组 2x4 项目。

我对表单的看法最终看起来像这样：

```
 Fir   Spruce
2x4  [.24] [ .22]
2x6  [.30] [ .32] 
```

在 [ ] 之间是链接到多个模型的输入框......所以左上角将链接到所有 2x4 的冷杉

谢谢=p

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T23:13:07.520

我不知道正确的“YII 方式”，但您可以从控制器更新多个模型，如下所示：

```
 /**
     * Update several models.
     */
    public function actionUpdate()
    {
            // post filtering left out for brevity
            $editFir10 = new Fir10;
            $editFir8 = new Fir8;
            $editFir10->costPerLF=$_POST['firCLF'];
            $editFir8->costPerLF=$_POST['firCLF'];
            $editFir10->save();
            $editFir8->save();
            //here you can send several models AFAIK
            $this->render('update',array(
                    'model1'=>$editFir8,
                    'model2'=>$editFir10,
            ));
    } 
```

# flash - 如何将参数传递给 AS2 中的 .onPress()？

> ID：10016368
> 
> 赞同：0
> 
> 时间：2012-04-04T17:34:51.103
> 
> 标签：flash, function, actionscript-2

我正在尝试做这样的事情：

```
var something = "someValue";

some_btn.onPress = function (something) {
   someFunction(something);
}

function someFunction (argument) {
   trace(argument);
} 
```

但它跟踪“未定义”。实现这一目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T23:57:37.463

`onPress()`不接受争论。

您可以像这样制作自己的新闻功能：

```
Object.prototype.myPress = function(str:String):Void
{
    // Delete old onPress.
    if(this["onPress"] != undefined) delete this.onPress;

    // Add new onPress.
    this.onPress = function():Void
    {
        someFunction(str);
    }
} 
```

用你的`someFunction()`：

```
function someFunction(str:String):Void
{
    trace(str);
} 
```

然后像这样实现：

```
some_btn.myPress("hello"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T22:36:15.947

这将起作用：

```
var something = "someValue";

some_btn.onPress = function () {
   someFunction(something);
}

function someFunction (argument) {
   trace(argument);
} 
```

或者，这也将起作用：

```
var something = "someValue";

some_btn.onPress = function () {
   someFunction();
}

function someFunction () {
   trace(something);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T23:00:24.927

发生这种情况是因为您将参数命名为您创建的全局变量名称：

```
var something = "someValue";
some_btn.onPress = function (something) { ... 
```

这“创建了一个同名的局部变量”。由于局部变量具有偏好并且 onPress 不发送任何值，因此您得到了`undefined`.

要解决此问题，请按照 net.uk.sweet 的建议从事件处理程序中删除变量：

```
some_btn.onPress = function () { ... 
```

# asp.net-mvc-3 - MVC3 Url Routing 创建会员区

> ID：10016370
> 
> 赞同：2
> 
> 时间：2012-04-04T17:34:55.600
> 
> 标签：asp.net-mvc-3, url-routing

我想在我的网站上使用以下 URL 模式创建一个会员区：

注销用户的模式：

```
domain.com
domain.com/About
domain.com/Blog
domain.com/Blog/1 (where 1 is the post ID) 
```

但我也有一个会员区，我在 URL 前面加上 Member，如下所示：

```
domain.com/Member/MyProfile
domain.com/Member/MySettings 
```

这看起来很简单，但我看不到为此制定路由规则的明显方法。我有：

```
 routes.MapRoute(
         "Member", // Route name
         "Member/{controller}/{action}/{id}", // URL with parameters
         new { controller = "Task", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

            routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

当您登录时，这对成员非常有用，但不幸的是，第一条规则也与注销的视图匹配，并且 Url.Action("Blog", "Home") 生成一个如下所示的 Url：

```
domain.com/Member/Home/Blog 
```

如何告诉 Url.Action 它必须在成员区域之外使用默认规则形成 Url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:38:42.457

您可以使用[真正的 MVC 区域](http://msdn.microsoft.com/en-us/library/ee671793.aspx)，而不是尝试模拟一个。还有一个[视频](http://www.asp.net/mvc/videos/mvc-2/how-do-i/aspnet-mvc-2-areas)你可以看看。这个想法是您将默认路由定义保留在 Global.asax 中，然后将成员区域添加到您的站点，该区域将具有单独的路由配置。

# ruby-on-rails - 如何从javascript调用link_to

> ID：10016378
> 
> 赞同：0
> 
> 时间：2012-04-04T17:35:40.137
> 
> 标签：ruby-on-rails, ruby-on-rails-3, unobtrusive-javascript

我有一些特定的情况，我必须从 javascript 启动远程 ajax 调用（使用串口读取 rfid 数据），我想发送它并获得 ajax 响应。这就是我要调用的：

```
<%= link_to "evidentiraj", {:action => 'time', :id=>25}, :remote => true %> 
```

我尝试从 javascript 手动启动 xmlhttp.opetn，但它不起作用：

```
xmlhttp.open("GET","/evidentiraj/time?id=23",true);
xmlhttp.send(); 
```

谢谢你。多里扬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:42:17.683

您可以运行`rake routes`并查找所需的 url，我认为它应该类似于`time_evidentiraj`. 那么，在你看来：

```
xmlhttp.open("GET","<%= time_evidentiraj_path(@evidentiraj) %>",true);
xmlhttp.send(); 
```

# ios - 几秒钟后显示警报视图

> ID：10016383
> 
> 赞同：0
> 
> 时间：2012-04-04T17:35:50.977
> 
> 标签：ios, nstimer, uialertview

我试图在用户触摸圆角矩形按钮三秒钟后显示警报，但是当我运行应用程序时它不起作用（但 Xcode 说“没有问题”）。

这是我的 .h 文件：

```
@interface ViewController : UIViewController {
}

-(IBAction)timerAlert:(id)sender;
-(void)showAlert; 
```

这是我的实现文件：

```
@implementation ViewController

-(IBAction)timerAlert:(id)sender {

    [NSTimer scheduledTimerWithTimeInterval:3 target:sender selector:@selector(showAlert) userInfo:nil repeats:NO];
}

-(void)showAlert {

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Three seconds have elapsed" message:@"Please return to the app" delegate:self cancelButtonTitle:@"Return" otherButtonTitles:nil, nil];
    [alert show];
} 
```

这是我收到的错误消息：

```
2012-04-04 19:25:42.833 DisplayAfterTime[740:f803]
-[UIRoundedRectButton showAlert]: unrecognized selector sent to instance 0x6b74220 
2012-04-04 19:25:42.837 DisplayAfterTime[740:f803]
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIRoundedRectButton showAlert]: unrecognized selector sent to instance 0x6b74220'
*** First throw call stack: (0x13c7022 0x1558cd6 0x13c8cbd 0x132ded0 0x132dcb2 0x94deb6 0x139b936 0x139b3d7 0x12fe790 0x12fdd84 0x12fdc9b 0x12b07d8 0x12b088a 0x11626 0x1edd 0x1e45) terminate called throwing an exception 
```

那我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:50:10.937

您正在设置计时器以发送到错误的目标。应该是自己。

# windows-phone-7 - 在 XAML 页面之间传递数据对象

> ID：10016387
> 
> 赞同：1
> 
> 时间：2012-04-04T17:36:17.113
> 
> 标签：windows-phone-7, xaml

我没有找到任何有用的答案，或者我应该说“任何答案”如何在 WP7 的页面之间传递数据对象？

第 1 页

```
IEnumerable<dictParts> Parts = LoadParts(); 
```

我怎样才能传递`Parts`到 PAGE2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:09:17.063

另请参阅[如何在 WP7 的 Silverlight 页面之间传递值？](https://stackoverflow.com/questions/4637533/how-to-pass-a-value-between-silverlight-pages-for-wp7)

你有几个选择：

*   序列化数据并将其传递给 Navigate() 请求的查询字符串。
*   将数据存储在可从两个页面访问的全局变量中（如 MVVM 模式）。

# java - 基本的java计算问题

> ID：10016392
> 
> 赞同：0
> 
> 时间：2012-04-04T17:36:31.383
> 
> 标签：java, android, android-edittext

```
 Cursor ca2 = dbh1.getReadableDatabase().query(DatabaseHelper.TABLE_NAME, null, null,     null, null, null, null);
 int countTotal = ca2.getCount();
 Cursor ca1 = dbh1.getReadableDatabase().query(DatabaseHelper.TABLE_NAME, null, DatabaseHelper.VALUE6 + "='Automatic'", null, null, null, null);
 int count = ca1.getCount();

 int percentTrans = ((count/countTotal)*100);
 statText=(EditText)findViewById(R.id.etext3);
 statText.setText(Integer.toString(percentTrans));

 Toast toast=Toast.makeText(this, Integer.toString(percentTrans), 2000);
 toast.show(); 
```

你好，我这里有一个愚蠢的问题。我想通过将 count 除以 countTotal 并将其乘以 100 来获得百分比。 percentTrans 本质上是整数，这个值将传递给需要将 percentTrans 转换为字符串的编辑文本。count 是 2，countTotal 是 3。但结果是 0。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T17:39:05.767

`count/countTotal`是`int`太和`(int)(2/3)`是`0`。

把它写成`(count*100/countTotal)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:44:32.797

整数数学不像使用计算器 - 而是这样做：

```
int percentTrans = Math.round(count * 100.0f / countTotal); 
```

这会将所有计算作为浮点数进行（当您将 100.0f 指定为浮点数时，它会隐式执行此操作），然后将其四舍五入到最后的适当整数值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T17:48:27.510

只需按照上面显示的答案进行计算，并将值放入编辑文本中，如下所示：

```
statText.setText(String.valueOf(percentTrans)); 
```

# java - 有没有办法通过许多循环来加速递归？

> ID：10016394
> 
> 赞同：3
> 
> 时间：2012-04-04T17:36:34.023
> 
> 标签：java, algorithm, data-structures, recursion

我基本上是在尝试使用递归并创建了一个小程序，该程序可以从 0-10 的 10 个项目中找到所有组合（{1 苹果，0 葡萄}，{2 苹果，0 葡萄}，{0 苹果，1 葡萄} ， ETC..） 。

```
import java.util.Arrays;
import java.util.List;

public class main {

    public static void main(String[] args) {
        System.out.println("Starting..");
        long startTime = System.currentTimeMillis();
        List<Integer> list_to_start = Arrays.asList(new Integer[] {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}); 
        String[] name_of_list_to_start = new String[] {"Grapes", "Strawberries", "Raspberries", "Blackberries", "Pineapples", "Oranges", "Prunes", "Pears", "cherries", "Peaches", "Apples"};       
        System.out.println(list_to_start.size());
        counter(list_to_start.size(), list_to_start, name_of_list_to_start);
        long endTime = System.currentTimeMillis(); 
        System.out.println("Total execution time: " + (endTime-startTime));
    }

    private static void counter(int length, List<Integer> list_to_start, String[] name_of_list_to_start) {
        // If we've gone through everything then return the results
        if (length == 0) {
            for (int i = 0; i<list_to_start.size(); i++) {
                //System.out.println(name_of_list_to_start[i] + " = " + list_to_start.get(i));
            }
            //System.out.println("****");
            return;
        }   
        //This part basically increments list_to_start and then the above part displays it.
        for (int i = 0; i<=10; i++) {
            if (length != 0 ) {
                list_to_start.set((length-1), i);
                counter((length-1), list_to_start, name_of_list_to_start);
                list_to_start.set((length-1), 0);
            }
        }
    }
} 
```

现在它有 10,000,000,000 个循环（10 ^ 10）所以我理解为什么需要很长时间，但我想知道是否有任何 Java 或算法技巧可以用来减少循环数以加快速度？

我考虑过使用线程/多处理，但是仍然需要发生相同数量的循环，这仍然需要很长时间。我不确定这里是否可以使用任何数据结构、排序算法或缓存算法。或者我可以将结果并行添加到数组中，然后将它们组合在一起以获得最终结果？我不熟悉任何其他现有方法，因此非常欢迎任何关于语言特定技巧或算法解决方案的建议。

更新：为了澄清我在做什么以及我将发布一些示例的性能。要增加处理时间，只需向 list_to_start 添加/删除零（以下结果以毫秒为单位）：

```
1 zero = 0 
2 zero = 1
3 zero = 1
4 zero = 29
5 zero = 37
6 zero = 115
7 zero = 345
8 zero = 1517
9 zero = 23738 (23 seconds)
10 zero = over 30 min. I gave up. 
```

输出（我禁用它以使其运行得更快）是 2 个变量（上面的代码运行 10）：

```
Grapes = 0
Strawberries = 0
****
Grapes = 1
Strawberries = 0
****
Grapes = 2
Strawberries = 0
****
Grapes = 3
Strawberries = 0
****
Grapes = 4
Strawberries = 0
****
Grapes = 5
Strawberries = 0
****
Grapes = 6
Strawberries = 0
****
Grapes = 7
Strawberries = 0
****
Grapes = 8
Strawberries = 0
****
Grapes = 9
Strawberries = 0
****
Grapes = 10
Strawberries = 0
****
Grapes = 0
Strawberries = 1
****
Grapes = 1
Strawberries = 1
****
Grapes = 2
Strawberries = 1
****
Grapes = 3
Strawberries = 1
****
Grapes = 4
Strawberries = 1
****
Grapes = 5
Strawberries = 1
****
Grapes = 6
Strawberries = 1
****
Grapes = 7
Strawberries = 1
****
Grapes = 8
Strawberries = 1
****
Grapes = 9
Strawberries = 1
****
Grapes = 10
Strawberries = 1
****
Grapes = 0
Strawberries = 2
****
Grapes = 1
Strawberries = 2
****
Grapes = 2
Strawberries = 2
****
Grapes = 3
Strawberries = 2
****
Grapes = 4
Strawberries = 2
****
Grapes = 5
Strawberries = 2
****
Grapes = 6
Strawberries = 2
****
Grapes = 7
Strawberries = 2
****
Grapes = 8
Strawberries = 2
****
Grapes = 9
Strawberries = 2
****
Grapes = 10
Strawberries = 2
****
Grapes = 0
Strawberries = 3
****
Grapes = 1
Strawberries = 3
****
Grapes = 2
Strawberries = 3
****
Grapes = 3
Strawberries = 3
****
Grapes = 4
Strawberries = 3
****
Grapes = 5
Strawberries = 3
****
Grapes = 6
Strawberries = 3
****
Grapes = 7
Strawberries = 3
****
Grapes = 8
Strawberries = 3
****
Grapes = 9
Strawberries = 3
****
Grapes = 10
Strawberries = 3
****
Grapes = 0
Strawberries = 4
****
Grapes = 1
Strawberries = 4
****
Grapes = 2
Strawberries = 4
****
Grapes = 3
Strawberries = 4
****
Grapes = 4
Strawberries = 4
****
Grapes = 5
Strawberries = 4
****
Grapes = 6
Strawberries = 4
****
Grapes = 7
Strawberries = 4
****
Grapes = 8
Strawberries = 4
****
Grapes = 9
Strawberries = 4
****
Grapes = 10
Strawberries = 4
****
Grapes = 0
Strawberries = 5
****
Grapes = 1
Strawberries = 5
****
Grapes = 2
Strawberries = 5
****
Grapes = 3
Strawberries = 5
****
Grapes = 4
Strawberries = 5
****
Grapes = 5
Strawberries = 5
****
Grapes = 6
Strawberries = 5
****
Grapes = 7
Strawberries = 5
****
Grapes = 8
Strawberries = 5
****
Grapes = 9
Strawberries = 5
****
Grapes = 10
Strawberries = 5
****
Grapes = 0
Strawberries = 6
****
Grapes = 1
Strawberries = 6
****
Grapes = 2
Strawberries = 6
****
Grapes = 3
Strawberries = 6
****
Grapes = 4
Strawberries = 6
****
Grapes = 5
Strawberries = 6
****
Grapes = 6
Strawberries = 6
****
Grapes = 7
Strawberries = 6
****
Grapes = 8
Strawberries = 6
****
Grapes = 9
Strawberries = 6
****
Grapes = 10
Strawberries = 6
****
Grapes = 0
Strawberries = 7
****
Grapes = 1
Strawberries = 7
****
Grapes = 2
Strawberries = 7
****
Grapes = 3
Strawberries = 7
****
Grapes = 4
Strawberries = 7
****
Grapes = 5
Strawberries = 7
****
Grapes = 6
Strawberries = 7
****
Grapes = 7
Strawberries = 7
****
Grapes = 8
Strawberries = 7
****
Grapes = 9
Strawberries = 7
****
Grapes = 10
Strawberries = 7
****
Grapes = 0
Strawberries = 8
****
Grapes = 1
Strawberries = 8
****
Grapes = 2
Strawberries = 8
****
Grapes = 3
Strawberries = 8
****
Grapes = 4
Strawberries = 8
****
Grapes = 5
Strawberries = 8
****
Grapes = 6
Strawberries = 8
****
Grapes = 7
Strawberries = 8
****
Grapes = 8
Strawberries = 8
****
Grapes = 9
Strawberries = 8
****
Grapes = 10
Strawberries = 8
****
Grapes = 0
Strawberries = 9
****
Grapes = 1
Strawberries = 9
****
Grapes = 2
Strawberries = 9
****
Grapes = 3
Strawberries = 9
****
Grapes = 4
Strawberries = 9
****
Grapes = 5
Strawberries = 9
****
Grapes = 6
Strawberries = 9
****
Grapes = 7
Strawberries = 9
****
Grapes = 8
Strawberries = 9
****
Grapes = 9
Strawberries = 9
****
Grapes = 10
Strawberries = 9
****
Grapes = 0
Strawberries = 10
****
Grapes = 1
Strawberries = 10
****
Grapes = 2
Strawberries = 10
****
Grapes = 3
Strawberries = 10
****
Grapes = 4
Strawberries = 10
****
Grapes = 5
Strawberries = 10
****
Grapes = 6
Strawberries = 10
****
Grapes = 7
Strawberries = 10
****
Grapes = 8
Strawberries = 10
****
Grapes = 9
Strawberries = 10
****
Grapes = 10
Strawberries = 10 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:53:45.350

您可以使用单个循环。

有 11^10 种可能的组合。你可以遍历它们

```
// String[] names = "Grapes,Strawberries,Raspberries,Blackberries,Pineapples,Oranges,Prunes,Pears,Cherries,Peaches,Apples".split(",");
String[] names = "Pineapples,Oranges,Prunes,Pears,Cherries,Peaches,Apples".split(",");
int maxQuantity = 10;
long combinations = 1;
int quantities = maxQuantity + 1;
for (String _ : names)
    combinations *= quantities;

long start = System.currentTimeMillis();
PrintStream out = new PrintStream(new BufferedOutputStream(new FileOutputStream("combinations.tsv")));
// heading
for (String name : names)
    out.print(name + "\t");
out.println();

for (long comb = 0; comb < combinations; comb++) {
    // comb is a base N number of digits 0 to maxQuantity.
    long c = comb;
    for (int i = 0; i < names.length; i++) {
        long n = c % quantities;
        c /= quantities;
        out.print(n);
        out.print('\t');
    }
    out.println();
}
out.close();
System.out.println("Took " + (System.currentTimeMillis() - start) / 1e3 + " seconds" +
        " to write " + combinations + " combinations"); 
```

印刷

```
Took 51.585 seconds to write 19487171 combinations 
```

如果您注释掉这些行，它会将值打印到您获得的文件中

```
Took 0.065 seconds to write 19487171 combinations 
```

注意：该程序将大部分时间用于打印。如果您移除打印部分，它将很快完成。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:12:53.377

假设您只关心同一项目的第一个实例，您可以在匹配时打破循环以避免额外的循环。你能更好地分解这里的“问题”（你的程序应该做什么）吗？

# hosting - 什么是最快的网络托管选择，可以扩展到大流量峰值并可以处理快速页面加载？

> ID：10016396
> 
> 赞同：0
> 
> 时间：2012-04-04T17:36:42.383
> 
> 标签：hosting, web-hosting, cloud-hosting, buddypress

云托管是要走的路吗？还是有更好的东西可以提供快速的页面加载？

我问的原因是因为我在 bluehost 专用服务器上运行 buddypress 站点，但它似乎在一天中的大多数时间运行缓慢。这让我很害怕，因为目前这些网站不存在，我担心当它获得流量时会变得更糟，我的访问者会失去兴趣。我使用 Amazon Cloud 来处理我所有的媒体、JS 和 CSS 文件以及一个捕获插件，但它有时仍然加载缓慢。

我觉得问题出在 Bluehost，因为我访问了其他运行 buddypress 的网站，他们的网站似乎可以立即加载。我不精通网络托管，所以有人可以在这里指出正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:31:28.900

托管选择取决于许多因素，例如技术要求、增长率、突发率、预算等。

**更大的硬件**

要扩大托管操作，您的首选通常只是使用更强大的服务器、VPS 或云实例。重点不是云与专用，而是您只需为问题带来更多的计算能力。云可以使扩展更容易——通常只需点击几下。

**劳动分工**

下一步往往是分工。您将数据库、静态内容、缓存或其他项目卸载到特定的服务器或服务。例如，您可以将静态内容卸载到 CDN。您可以使用专用数据库。

再一次，云与非云不是问题。关键是为您的托管问题带来更多资源。

**选择正确的应用程序堆栈**

我不能强调为您的需求选择正确的底层技术。例如，我最近帮助一个客户端从 Apache/PHP 堆栈切换到 Varnish/Nginx/PHP-FPM 堆栈，以进行非常商业的 Wordpress 操作（>1 亿页面浏览量/月）。通过适度的硬件更改，此更改将容量提高了近 5 倍。

**相同的应用程序。不一样的故事**

同样，仅仅因为您使用的是特定应用程序，并不意味着相同的托管设置适用于您。我不知道您正在使用的具体应用程序，但对于 Drupal、Wordpress、Joomla、Vbulletin 等，插件、网站设计、主题和其他项目对整体性能至关重要。

更复杂的是，用户行为也是需要考虑的事情。考虑一个阅读：发布比例为 95:1 的讨论表。如果你在设计中做一些事情来鼓励更多的帖子，这个比例会变成 75:1。这意味着更多的数据库写入，更少的缓存等。

简而言之，细节很重要，因此在开始横向扩展托管之前，请充分了解您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:23:35.553

托管服务是解决方案的一部分。另一部分是正确的服务器配置。

例如[，这个人](http://www.ewanleith.com/blog/900/10-million-hits-a-day-with-wordpress-using-a-15-server)优化了他的设置，在 AWS 上的一个微实例中每天处理 1000 万个请求。

我认为您应该先查看您的服务器配置，然后再购买其他主机。如果您无法控制服务器配置，请尝试 AWS、Rackspace 或其他云服务。

仅供参考：您可以注册 AWS 并免费使用一年的微型实例。我发布的链接 - 他只是在同一台服务器上进行了优化。您可能必须升级到小型服务器，因为亚马逊已经声明微型服务器仅用于处理峰值和持续流量。

祝你好运。

# c# - 管理数据库中持久的动态网站设置

> ID：10016398
> 
> 赞同：8
> 
> 时间：2012-04-04T17:36:46.343
> 
> 标签：c#, asp.net, architecture

我正在尝试创建一些东西来在我们的 ASP.NET 网站中保存全球站点范围的设置 - 例如站点名称、谷歌分析帐号、facebook url 等......该站点可以有多个“品牌”或关联的子站点有了它，因此有了sitguid 列，我们还希望可以选择将它们分组，因此也可以选择组列——例如TEST 和PRODUCTION（通过web.config appsetting 设置）。

我不希望在任何地方对任何 KEY 进行硬编码，但我希望能够在代码中尽可能简单地引用它们，例如 SiteSetting.getSetting(“SiteName”) （这些可以在模板中使用（母版页等） ）更多初级开发人员将创建）

我还希望能够在我们的管理控制台中管理现有设置并能够创建新设置。

数据类型列用于编辑表单，以便可以使用正确的输入元素，例如位类型的复选框、varchar 的文本框等...

SiteSettings 数据库表当前：

```
 [sts_sitGuid] [uniqueidentifier] NOT NULL, -- tells us which site the setting is for
  [sts_group] [nvarchar](50) NOT NULL, -- used to group settings e.g. test/live
  [sts_name] [nvarchar](max) NULL, -- the display name of the setting, for edit forms
  [sts_alias] [nvarchar](50) NOT NULL, -- the name for the setting
  [sts_value] [nvarchar](max) NOT NULL, -- the settings value
  [sts_dataType] [nvarchar](50) NULL, -- indicates the control to render on edit form
  [sts_ord] [tinyint] NULL,  -- The order they will appear in on the admin form 
```

我目前正在完成这项工作，但我对我的工作方式不满意，并希望这里的任何人有任何可能有助于找到“正确”解决方案的建议！我敢肯定，在我之前人们已经这样做了。（我会分享我到目前为止所拥有的，但不想以任何特定方式扭曲答案）我正在寻找的只是一个关于如何最好地完成它的概述，而不是寻找任何人为我写它； )

我在这里和谷歌都做了很多搜索，并没有真正找到我想要的东西，尤其是添加新设置“定义”以及编辑现有设置的能力。

该系统使用 webforms 在 ASP.NET 上运行，全部用 c# 编写并使用 MSSQL 2008。

与往常一样，非常感谢任何帮助！

**编辑**：为了澄清，我将解释我到目前为止所构建的内容。我决定将所有这些存储在 SQL 中，因为我们不希望 web.config 或其他 xml 文件或其他数据库浮动，因为当我们向其他客户推出应用程序时，它会给我们更多工作。

到目前为止，我有一个 SiteSettings 类，它有一个 GetSetting 方法，我可以使用 GetSetting("SettingAlias") 调用它来获取数据库中“SettingAlias”的值。此类的构造函数从数据库中获取当前站点的所有设置并将其存储在字典中，GetSetting 从该字典中读取。到目前为止，我对所有这部分都很满意。

我正在努力的部分是生成编辑表单。以前的版本使用网络服务来获取/设置设置，我正在尝试继续使用类似的东西来保存工作，但它们都在代码中定义，例如 GoogleAnalyticsID、Sitename 等......并且每个都有一个列在数据库中，我所做的更改是将这些设置存储为 ROWS（从那时起添加更多更容易，无需更改架构和所有 sitesettings 类）目前我的 SiteSettings 类有一个 SiteSettingsEditForm 方法，它可以获取所有来自 db 的信息，为表单元素创建一堆控件，将其放入临时页面并执行，然后通过 ajax 将生成的 HTML 传递给我们的管理系统。这感觉不对，有点笨拙，是在这里发布的原因，

所以总而言之，我（我想我）想写一个类来缓存和读取数据库表中的几行，并给我一个编辑表单（或将数据提供给其他东西以生成表单），即动态基于同一个数据库表的内容（例如，我的类型列是“位”我想要一个复选框，它是“文本”我想要一个文本输入）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T09:29:47.330

如果您从数据模型开始，有时这种问题更容易可视化。如果您想要每行设置，那么两个表可能是存储它的最佳方式：

地点：

```
站点 ID 站点密钥 站点名称
1 XYGZ4345 客户端站点 1
2 AZT43752 客户端站点 2

```

这将定义您为其配置的站点列表。我会使用 SiteKey，就像您将其放在 web.config 中一样，最好将其抽象为随机字符串或 GUID（以使其更难意外加载其他人的配置），客户端可以更改其名称和您将来不会感到困惑，因为您没有使用他们的旧名称作为密钥等。

配置表本身也很简单，如果我们将每个设置都视为一个字符串：

站点设置：

```
SettingId SiteId SettingName SettingValue
1 1 品牌 KrustyBrand
2 1 GoogleId MSFTSUX0R
3 2 品牌 ConfigMasters(TM)

```

然后，您可以非常简单地加载所有配置：

```
SELECT * FROM SiteSetting INNER JOIN Site ON (SiteSetting.SiteId = Site.SiteId) WHERE Site.SiteKey = 'XYGZ4345' 
```

现在我们有了一个键值对列表，您可以将其存储在一个类中，例如：

```
public class SiteSetting
{
    public Site Site {
        get; set; //Site would just be a simple class consisiting of Id, Key and Name to match the database table
    }

    protected Dictionary<String, String> Settings { get; set; } //Simple key value pairs

} 
```

所以这是一个非常简单的解决方案。但是，我们可以更进一步 - 需要考虑的事项：

1）我们可以在某个地方添加一个环境吗？

我们可以为每个环境添加一个站点

或者

将环境添加到 SiteSetting 表。这样做的好处是您可以定义 enironment = 'ALL' 以避免重复。

或者

加载配置的数据库定义环境；所以你在应用程序配置中更改配置连接字符串。当然，要连接到不同的环境，您必须更改 app.config，但无论如何您都可能必须这样做才能更改客户端密钥和/或环境。

2) 添加用户可定义设置的概念 - 一些您想要更改的设置，一些您想要锁定的设置。包含“UserDefinable”的位列将允许您对此进行排序

3) 设置类型。

这稍微困难一些。你可能有类似的东西：

```
PropertyId PropertyName PropertyType 格式 UserDefined
1 品牌字符串 NULL 1
2 DatePresentation DateTime "yyyy-MM-dd" 1

```

然后，设置表只定义一个值和一个 PropertyId。这样做的好处是您可以开始增加有关您存储的每个设置的信息，并在设计更加规范化时重用这些信息。然后 Settings 类改变如下：

```
public List<PropertyValue> { get; set; } //replacing the dictionary 
```

PropertyValue 然后看起来像：

```
public class PropertyValue
{
    int Id { get; set; }

    public string Name { get; set; }

    public string Value { get; set; }

    public string PVType { get; set; } //Could be an enum

    public string DisplayFormat { get; set;

    private string _RawValue;

    public string Value{
        get{
          switch(PVType){
            case "DateTime":
                    return Convert.ToDateTime(_RawValue).ToString(DisplayFormat);
            break;
            case "Double":
                    return Convert.ToDouble(_RawValue).ToString(DisplayFormat);
            break;
            default:
                    return _RawValue;
          }
        }
        set{
            _RawValue = value;
        }
    }

} 
```

需要改进诸如 Value 方法之类的东西以支持强大的错误处理（您也可以使用 Convert.ChangeType 进行调查以简化 switch 块）

这个主题和你选择的一样简单或复杂；-)

**编辑**

至于维护它们；一个非常简单的 GUI 将允许用户以表格格式查看其所有属性。您可能会考虑将 UserDefinable = 0 的行设为只读，否则用户可以编辑和添加行。您需要进行验证，尤其是对于重复的设置名称。

最简单的方法是使用 DataGrid；一个简单的模型可能看起来像这样：

![网格编辑模型](../Images/8ada65cd66dd08d70f06523185d27445.png)

更复杂的方法可能看起来像[这样](http://trirand.com/blog/jqgrid/jqgrid.html)

因此，生成表单就像将一组 PropertyValue 对象数据绑定到您选择的网格解决方案一样简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:03:07.593

正如您可能发现的那样，您可以通过多种方式执行此操作，从 Microsoft 推荐的到 100% 自己动手。你目前处于自己动手的一端，我认为这通常会更好。

无论如何，基本上你要找的是一个StateBag。一些松散类型和高度可配置的东西，它并不适合 RDBMS，但如果您已经拥有 SQL Server，那么使用它可能是最容易的。

## 选项 1：Redis

但是，另一种选择是为站点配置运行类似 Redis 的东西。您可以将其作为键/值对的集合存储在 Redis 对象中，将其拉入 JSON 对象，然后将其转换为 Hashtable（查找速度非常快）或其他一些可散列集合。一个简单的围绕集合的包装类就足够了。

Redis 非常轻巧，在您的情况下不需要大量配置或维护。

## 选项 2：SQL 服务器

您提到的方法实际上是一种很好的方法，但不是每次都查询数据库，而是将强类型集合或 Hashtable 放入缓存中，让它每隔几个小时过期一次。

如果你基本上使用你现在拥有的东西，你可以像这样存储它：

```
Setting
    SettingId Int PK,
    Key NVarchar(50),
    Name NVarchar(50),
    Description NVarchar(1000),
    Type NVarchar(50),
    Priority Int

Configuration
    SiteId Int,
    SettingId Int FK(Setting),
    SettingValue NVarchar(1000) 
```

不要在数据库中存储诸如 live/test/dev 之类的东西。您需要拥有完全独立的数据库和服务器来区分 live/test/dev/stage/QA 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T13:13:32.353

我目前通过创建一个具有所有设置的类来做到这一点，例如

```
class Setting
{
GUID siteGuid{get; set;}
//other settings
} 
```

然后我创建了一个`SettingManager`像这样的静态类

```
public static class SettingManager

{
private ConcurrentDictionary<GUID,Setting> settings= new ConcurrentDictionary<GUID,Setting>;
GetSetting(Guid siteGUID)
{
settings.TryGet(siteGuid);
Lastrefreshed = DateTime.Now;
//other code
}
Private DateTime LastRefreshedOn = DateTime.Now;
public void PopulateSetingsDic()
{
//populate the settings dictionary by getting the values from the database
}
} 
```

现在在您的代码中的任何地方只包含命名空间并使用设置。您可以在使用变量时
填充一次或每个间隔填充设置，这将很快，因为您将所有设置都保存在内存中。 另外，如果您希望您应该能够动态添加设置，那么您可以使用数据库中的列名或仅使用映射动态添加设置， 然后您可以通过将设置 ExpandoObject 转换为此处来使用设置string 可以是字符串转换后的 GUID`application_start``lastRefreshedOn`

`ExpandoObject`
`IDictionary<string,object>`

编辑：- [http://zippedtech.blogspot.in/2012/04/dynaminism-in-net-40.html](http://zippedtech.blogspot.in/2012/04/dynaminism-in-net-40.html)检查链接.. 我添加了一个新帖子来解决此类问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T16:57:44.843

我会使用 xml，创建一个可以将 xpath 作为“关键”的类
`Ex.` `MySett.get("//level1/mysetting")` `or even` `MySett.get("//mysetting")`

每个人都可以返回一个集合，只是第一个集合，或者你想要的任何东西。你甚至可以超载。我喜欢 xml 是因为它具有很好的灵活性，并且为了减少其他代码，只需编写一个类。不利的一面是，您需要在应用程序启动时加载文档并在关闭时保存。这是vb代码中的示例类。（c 代码还是很相似，我只用了 vb，因为当时它已经上线了

```
Imports System.Xml
Public Class XSett
Public xml As XmlDocument
Public Overloads Function gett(ByVal xp As String)
    Return CType(xml.SelectSingleNode(xp), XmlElement).InnerXml
    'by using inner xml, you can have either text setting 
    'or more markup that you might need for another function
    'your choice.  you could even cast it into another instance
    'of this class
End Function
Public Overloads Function gett(ByVal xp As String, ByVal sel As Integer)
    Return CType(xml.SelectNodes(xp)(sel), XmlElement).InnerXml
    'here, you can have multiple and choose the one you want
End Function
Public Overloads Sub gett(ByVal xp As String, ByRef col As Collection)
    Dim i As Integer
    Dim nds = xml.SelectNodes(xp)
    For i = 0 To nds.Count - 1
        col.Add(CType(nds(i), XmlElement).InnerXml)
    Next
    'Creted an entire collection of elemens.
    'i used vb's "collection" object, but any collection would do
End Sub
Public Overloads Sub sett(ByVal ap As String, ByVal name As String, ByVal data As String)
    'assume add here.
    'ap asks for existing parent element. eg: //guids
    'name ask for name of setting element
    Dim ts = xml.CreateElement(name)
    ts.InnerXml = data
    If ap = "" Then 'we assume document element
        xml.DocumentElement.AppendChild(ts)
    Else
        Dim p = CType(xml.SelectSingleNode(ap), XmlElement)
        p.AppendChild(ts)
    End If
End Sub
Public Overloads Sub sett(ByVal xp As String, ByVal sel As Integer, ByVal data As String)
    'just change existing setting
    CType(xml.SelectNodes(xp)(sel), XmlElement).InnerXml = data
End Sub
'naturally you can expand infinitely if needed
End Class 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-10T11:58:45.077

如果我正确理解您的问题，您正在寻找一个集中的配置框架。对于配置和服务器管理，我通常会推荐[Chef](http://wiki.opscode.com/display/chef/Home)或[Puppet](http://projects.puppetlabs.com/projects/puppet)，但对于 ASP.NET，我做了一些快速的谷歌搜索，似乎基于 WCF 的[配置服务](https://www.google.ca/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CDkQFjAC&url=http://download.microsoft.com/download/7/C/9/7C9F7B89-8AF0-4433-AB3A-B615C8EF9484/ConfigServiceTechnicalGuide.pdf&ei=gR6ET_THNsXItgey592KCA&usg=AFQjCNGy6og5Qhqx_l1zTOPZsTBC302MjA)可能会为您解决问题。[我链接到的文档是.NET StockTrader 5 示例应用程序](http://www.microsoft.com/download/en/details.aspx?id=26553#overview)中使用的配置服务的分步教程。

# objective-c - 在 ios 中生成网站屏幕截图

> ID：10016401
> 
> 赞同：4
> 
> 时间：2012-04-04T17:37:14.823
> 
> 标签：objective-c, ios, image, screenshot

正如问题所说，在 iOS 设备上，如果用户在 uitextfield 中输入 URL，我想生成该 URL 的缩略图捕获。如何做到这一点？不幸的是，我不知道从哪里开始。

当然，我可以做到这一点的一种方法是将此 URL 发送到后端并从那里获取图像屏幕截图。我知道如何使用 python 或 php 来做这种事情。但我想避免到我的后端服务器的额外往返。

我想要类似的东西 -`(uiimage *)screenCapture:(nsurl *)url`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-16T09:39:05.447

根据您的问题，我认为您以后会想要操作生成的屏幕截图。您将以编程方式添加 UIWebView 以加载所需的 URL，然后对加载的网页进行快照，然后删除 UIWebView 以下是步骤

1.  一个 UIImageView 到你的 viewController 并将它连接到你的 viewController 类

    ```
    @property (weak, nonatomic) IBOutlet UIImageView *image_Thumbnail; 
    ```

2.  将 URL 放在名为“webPageUrlString”的变量中，添加以下行

    ```
    UIWebView* webView = [[UIWebView alloc] initWithFrame:self.view.frame];
    webView.backgroundColor = [UIColor redColor];
    NSURL *websiteUrl = [NSURL URLWithString:**webPageUrlString**];
    NSURLRequest *urlRequest = [NSURLRequest requestWithURL:websiteUrl];
    [webView loadRequest: urlRequest];
    webView.delegate = self;
    [self.view addSubview:webView]; 
    ```

3.  现在您已请求加载 URL，但除非网页已完全加载，否则无法呈现快照，因此您需要等待网页加载通知。为此，您必须订阅 webView 委托像这样的头文件

    ```
    @interface ViewController : UIViewController<UIWebViewDelegate> 
    ```

4.  现在您将实现“webViewDidFinishLoad”并拍摄您想要的快照，然后隐藏和删除 webView。

    ```
    -(void)webViewDidFinishLoad:(UIWebView *)webView{

    viewImage = [[UIImageView alloc] initWithFrame:self.view.frame];
    viewImage.backgroundColor = [UIColor greenColor];

    UIGraphicsBeginImageContext(webView.bounds.size);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    viewImage.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    [webView setAlpha:0];
    [webView removeFromSuperview];

    [self.view addSubview:viewImage]; 
    ```

    }

5.  现在你在名为“viewImage”的属性中拥有了你想要的截图，你可以用它做任何你想做的事情；）

# xml - XSLT 2.0 测试以某个值开头的元素名称

> ID：10016402
> 
> 赞同：2
> 
> 时间：2012-04-04T17:37:16.317
> 
> 标签：xml, xslt, xslt-2.0

我做了一些环顾四周，但我没有看到我的问题的明显答案。我确定我忽略了一些东西，但我不知道是什么。

我已经对下面的 XML 进行了一些预处理以编辑一些元素名称，在预处理之后，我有一个 XSL 样式表，它可以进行简单的身份转换。但是，我想知道是否有一种方法可以避免预处理步骤并在一个样式表中完成所有事情。两个 XML 输入之间的主要区别`<subj*>`已变为`<subj>`.

是否有一种方法可以测试元素名称的起始（或结束，我想也是）值？非常感谢您的时间和建议。

我有如下所示的 XML 输入：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <row>
      <issueNumber>1.001</issueNumber>
      <subj1>Cats</subj1>
      <subj2>LOLCats</subj2>
      <subj3>Cheezburgers</subj3>
      <subj4></subj4>
   </row>
   <row>
      <issueNumber>2.001</issueNumber>
      <subj1>Cats</subj1>
      <subj2>LOLCats</subj2>
      <subj3>NOMS</subj3>
      <subj4>Cheezburger</subj4>
   </row>
   <row>
      <issueNumber>3.001</issueNumber>
      <subj1>NOMS</subj1>
      <subj2></subj2>
      <subj3></subj3>
      <subj4></subj4>
   </row>
</root> 
```

我正在使用以下 XSL 处理它：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="2.0">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:template match="/">
    <xsl:apply-templates />
</xsl:template>

<xsl:template match="row">
    <!--<xsl:result-document href="{concat(issueNumber, '.xml')}">-->
        <xsl:copy>
            <xsl:copy-of select="@*"/>
            <xsl:apply-templates/>
        </xsl:copy>
    <!--</xsl:result-document>-->    
</xsl:template>

<xsl:template match="issueNumber">
    <xsl:copy>
        <xsl:apply-templates />
    </xsl:copy>
</xsl:template>

<xsl:template match="subj">
    <xsl:choose>
        <xsl:when test="not(string(.))"></xsl:when>
        <xsl:when test="string(.)">
            <subject>
                <xsl:apply-templates />
            </subject>
        </xsl:when>
    </xsl:choose>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:41:55.747

您是否在 XSLT 中搜索类似“正则表达式”的内容？如果您是，此链接可能对您非常有用：[http ://www.w3.org/TR/xslt20/#re​​gular-expressions](http://www.w3.org/TR/xslt20/#regular-expressions)

但是，此解决方案仅适用于 XSLT 2.0。您可能会失去与旧 XSLT 版本的兼容性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:56:44.500

如果我正确理解了这个问题，你可以这样做：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="*[starts-with(name(),'subj')]">
    <subj>
      <xsl:if test="string(.)">
        <subject>
          <xsl:apply-templates/>
        </subject>
      </xsl:if>
    </subj>
  </xsl:template>

</xsl:stylesheet> 
```

使用您的 XML 输入（更正为格式正确）：

```
<root>
  <row>
    <issueNumber>1.001</issueNumber>
    <subj1>Cats</subj1>
    <subj2>LOLCats</subj2>
    <subj3>Cheezburgers</subj3>
    <subj4></subj4>
  </row>
  <row>
    <issueNumber>2.001</issueNumber>
    <subj1>Cats</subj1>
    <subj2>LOLCats</subj2>
    <subj3>NOMS</subj3>
    <subj4>Cheezburger</subj4>
  </row>
  <row>
    <issueNumber>3.001</issueNumber>
    <subj1>NOMS</subj1>
    <subj2></subj2>
    <subj3></subj3>
    <subj4></subj4>
  </row>
</root> 
```

产生以下输出：

```
<root>
   <row>
      <issueNumber>1.001</issueNumber>
      <subj>
         <subject>Cats</subject>
      </subj>
      <subj>
         <subject>LOLCats</subject>
      </subj>
      <subj>
         <subject>Cheezburgers</subject>
      </subj>
      <subj/>
   </row>
   <row>
      <issueNumber>2.001</issueNumber>
      <subj>
         <subject>Cats</subject>
      </subj>
      <subj>
         <subject>LOLCats</subject>
      </subj>
      <subj>
         <subject>NOMS</subject>
      </subj>
      <subj>
         <subject>Cheezburger</subject>
      </subj>
   </row>
   <row>
      <issueNumber>3.001</issueNumber>
      <subj>
         <subject>NOMS</subject>
      </subj>
      <subj/>
      <subj/>
      <subj/>
   </row>
</root> 
```

# mutex - 中断服务程序中的互斥锁

> ID：10016406
> 
> 赞同：0
> 
> 时间：2012-04-04T17:37:21.970
> 
> 标签：mutex, interrupt

在 linux 中，为什么我们不能在 isr() 例程中使用互斥锁来保护共享资源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:40:47.743

因为互斥锁上的锁定操作可以休眠，而在 ISR 中休眠是非法的。请改用自旋锁。

# objective-c - AVPlayer 在多次播放后崩溃-

> ID：10016407
> 
> 赞同：13
> 
> 时间：2012-04-04T17:37:22.883
> 
> 标签：objective-c, ios, avplayer

我正在尝试创建一个应用程序，它使用`AVFoundation`. 视频显示在通过点击父表视图中的一行访问的视图中。真正的应用程序每行都会有一个视频，但目前我只使用一个进行测试。

在模拟器上运行时，应用程序正常，但在设备上（在 ios 5.1 下）运行时，视频播放正常约 5 次，然后以各种方式意外崩溃。最常见的是，视频视图加载但视频本身不播放，但有时我得到`EXC_BAD_ACCESS`一个`coremedia.remote`线程，抱怨在没有自动释放池的情况下分配对象。我添加了一个`@autoreleasepool`块来包装启动 AVPlayer 的代码，但这似乎没有帮助。

我想知道 GCD 是否正在主队列上创建多个线程来播放项目，但它们并没有终止。

所以关键问题是 - 如果用户在视频视图中点击后退按钮，我如何清除运行 AVPlayer 的多余 GCD 线程我已经尽可能遵循 Apple`AVFoundation`文档中提供[的](http://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html)`@autoreleasepool`示例代码在其中一个 GCD 块中添加了一些日志记录和（如上所述）一个块——除此之外，我没有更改代码。

`viewDidLoad`方法如下：

```
-(void)viewDidLoad{   
[super viewDidLoad];

NSURL *fileURL = [[NSBundle mainBundle] URLForResource:@"TestLapCar2Vid" withExtension:@"m4v"];
AVURLAsset *asset = [AVURLAsset URLAssetWithURL:fileURL options:nil];
NSString *tracksKey = @"tracks";

[asset loadValuesAsynchronouslyForKeys:[NSArray arrayWithObject:tracksKey] completionHandler:
 ^{
     dispatch_async(dispatch_get_main_queue(),
     ^{
         @autoreleasepool {
         NSError *error = nil;
             AVKeyValueStatus status = [asset statusOfValueForKey:tracksKey error:&error];

             if(status == AVKeyValueStatusLoaded){
                 avPlayerItem = [AVPlayerItem playerItemWithAsset:asset];
                 [avPlayerItem addObserver:self forKeyPath:@"status"
                                   options:0  context:&ItemStatusContext];

                 [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(playerItemDidReachEnd:)
                                                             name:AVPlayerItemDidPlayToEndTimeNotification object:avPlayerItem];

                 avPlayer = [AVPlayer playerWithPlayerItem:avPlayerItem];
                 [videoView setPlayer:avPlayer];
                 NSLog(@"Asset loaded");
                 [avPlayer play];
             }
             else{
                 NSLog(@"The asset's tracks were not loaded");
             }

         }
     });
 }]; 
```

}

`viewWillDisappear`方法是：

```
-(void)viewWillDisappear:(BOOL)animated{
NSLog(@"view will disappear called");
[super viewWillDisappear:animated];
dispatch_async(dispatch_get_main_queue(), 
    ^{
        [avPlayer pause];
        [avPlayerItem removeObserver:self forKeyPath:@"status"];
        [[NSNotificationCenter defaultCenter]removeObserver:self];
        NSLog(@"Race timeline nav controller has %d sub controllers",self.navigationController.childViewControllers.count);
        avPlayerItem = nil;
        avPlayer = nil;
        videoView = nil;
        dataStore = nil;
        pkReader = nil;
        receivedData = nil;
        revDial = nil;
        speedDial = nil;
        mapView = nil;
        throttle = nil;
        NSLog(@"releasing stuff");
    }); 
```

}

我今天大部分时间都在为此苦苦挣扎——任何帮助都将不胜感激

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-11T00:00:35.460

您应该首先从 superview 中删除，因为它会将保留计数减少 1，并且 ARC 将负责您的代码的发布。

像这样

```
[videoView removeFromSuperview];
[self setVideoView:nil]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T15:24:25.517

您可能会将您的 videoView 保留在某个地方吗？因为如果您这样做，您的 avPlayerItem 和 avPlayer 将保持活动状态，并且根据[本](https://stackoverflow.com/questions/8608570/avplayeritem-fails-with-avstatusfailed-and-error-code-cannot-decode)主题，您遇到了 iOS 对“渲染管道”的限制，其中 4 个视频保留在内存中。

请记住，将 var 设置为 nil 实际上并不释放底层对象。所以你的

```
videoView = nil; 
```

可以有零影响。

# objective-c - Xcode 无法识别的选择器错误

> ID：10016410
> 
> 赞同：0
> 
> 时间：2012-04-04T17:37:33.190
> 
> 标签：objective-c, ios, xcode

我正在编写的应用程序的这一部分遇到了很多问题，我相信这里的人们已经厌倦了我，所以我将尝试在这篇文章中解决我的所有问题。我正在开发一个类似于照片库的应用程序，并且我正在实现让用户从他们的画廊中删除照片的选项。为此，我决定在每张图片上放置一个隐形按钮。当用户点击“编辑”按钮时，每张图片上隐藏的删除按钮将变为活动状态。为了简单起见，我在每个隐藏按钮上都使用了相同的 IBOutlet，并且我在 Interface Builder 中适当地标记了每个按钮。当用户点击图片上的按钮时，会出现一个警告视图，询问他们是否真的要删除它。如果他们点击是，我调用 removeObjectAtIndex 并从 UI 中删除图像。但是，当我在警报视图中单击“是”时，我从 Xcode 中收到一条错误消息：

**2012-04-04 11:26:40.484 AppName[608:f803]-[UIButton setImage:]：无法识别的选择器发送到实例 0x6a922c0**

**2012-04-04 11:26:40.485 应用名称[608:f803]****由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UIButton setImage:]：无法识别的选择器发送到实例 0x6a922c0”* **

 *几个小时以来，我一直试图弄清楚是什么原因造成的，但无济于事。我没有在代码中的任何位置设置 UIButton 的图像。我在 IB 中做过，但我只是将按钮类型设置为自定义，以便它们看起来不可见。我将在下面发布我的整个文件，我在我的代码中找不到任何问题，因此非常感谢任何帮助！谢谢。 **编辑**这是代码的当前版本：

```
 - (IBAction)grabImage {
    self.imgPicker = [[UIImagePickerController alloc] init];
    self.imgPicker.delegate = self;
    self.imgPicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        _popover = [[UIPopoverController alloc] initWithContentViewController:imgPicker];
        [_popover presentPopoverFromRect:self.imageView.bounds inView:self.imageView permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    } 

    else {
        [self presentModalViewController:imgPicker animated:YES];
    }
    [self.imgPicker resignFirstResponder];
}
// Sets the image in the UIImageView
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)img editingInfo:(NSDictionary *)editInfo {
    if (imageView.image == nil) {
        imageView.image = img;

        self.array = [NSMutableArray arrayWithObject:[NSData dataWithData:UIImagePNGRepresentation(imageView.image)]];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;

    }

    if (imageView2.image == nil) {
        imageView2.image = img;
        NSLog(@"The image is a %@", imageView);
        [self.array addObject:[NSData dataWithData:UIImagePNGRepresentation(imageView2.image)]];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;
    }

    if (imageView3.image == nil) {
        imageView3.image = img;

        [self.array addObject:[NSData dataWithData:UIImagePNGRepresentation(imageView3.image)]];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;
    }

    if (imageView4.image == nil) {
        imageView4.image = img;

        [self.array addObject:[NSData dataWithData:UIImagePNGRepresentation(imageView4.image)]];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;
}
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Photo Gallery", @"Photo Gallery");
        self.tabBarItem.image = [UIImage imageNamed:@"42-photos.png"];
    }
    return self;
}
////start of saving////

- (void)applicationDidEnterBackground:(UIApplication*)application {
    NSLog(@"Image on didenterbackground: %@", imageView);
    self.array = [NSMutableArray arrayWithObject:[NSData dataWithData:UIImagePNGRepresentation(imageView.image)]];

    [self.array addObject:[NSData dataWithData:UIImagePNGRepresentation(imageView2.image)]];
     [self.array addObject:[NSData dataWithData:UIImagePNGRepresentation(imageView3.image)]];
      [self.array addObject:[NSData dataWithData:UIImagePNGRepresentation(imageView4.image)]];

            [self.user setObject:self.array forKey:@"images"];
    [user synchronize];

            }

- (void)viewDidLoad
    {
        self.user = [NSUserDefaults standardUserDefaults];
        NSLog(@"It is %@", self.user);
        self.array = [[self.user objectForKey:@"images"]mutableCopy];
        imageView.image = [[UIImage alloc] initWithData:[self.array objectAtIndex:0]];
        imageView2.image = [[UIImage alloc] initWithData:[self.array objectAtIndex:1]];
        imageView3.image = [[UIImage alloc] initWithData:[self.array objectAtIndex:2]];
        imageView4.image = [[UIImage alloc] initWithData:[self.array objectAtIndex:3]];

        UIApplication *app = [UIApplication sharedApplication];
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(applicationDidEnterBackground:)
                                                     name:UIApplicationDidEnterBackgroundNotification
                                                   object:app];

        backToGalleryButton.hidden = YES;
        tapToDeleteLabel.hidden = YES;
        deleteButton1.hidden = YES;
        [super viewDidLoad];

    }

///// shows the hidden and invisible "delete" button over each photo.
- (IBAction)editButtonPressed:(id)sender {
    grabButton.hidden = YES;
    editButton.hidden = YES;
    backToGalleryButton.hidden = NO;
    tapToDeleteLabel.hidden = NO;
    deleteButton1.hidden = NO;
}
////

// This is when the user taps on the image to delete it.
- (IBAction)deleteButtonPressed:(id)sender {
    NSLog(@"Sender is %@", sender);
    UIAlertView *deleteAlertView = [[UIAlertView alloc] initWithTitle:@"Delete"
                                                              message:@"Are you sure you want to delete this photo?"
                                                             delegate:self
                                                    cancelButtonTitle:@"No"
                                                    otherButtonTitles:@"Yes", nil];
    [deleteAlertView show];
    int imageIndex = ((UIButton *)sender).tag;
    deleteAlertView.tag = imageIndex;

}

- (void)alertView: (UIAlertView *) alertView 
clickedButtonAtIndex: (NSInteger) buttonIndex
{

    if (buttonIndex != [alertView cancelButtonIndex]) {
        NSLog(@"User Clicked Yes. Deleting index %d of %d", alertView.tag, [array count]);
        NSLog(@"The tag is %i", alertView.tag);
        [self.array removeObjectAtIndex: alertView.tag];
        NSLog(@"After deleting item, array count  = %d", [array count]);
    NSLog(@"Returned view is :%@, in view: %@", [self.view viewWithTag:alertView.tag], self.view);
        ((UIImageView *)[self.view viewWithTag:alertView.tag]).image =nil;
    }

    [self.user setObject:self.array forKey:@"images"];
} 
```

更新：我添加了断点，发现那`((UIImageView *)[self.view viewWithTag:alertView.tag]).image =nil;`是导致崩溃的行，但我仍然不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:42:09.637

我没有看到`setImage:`在您粘贴到问题中的任何代码中被调用，但我可以告诉您： `UIButton`的`setImage`方法实际上需要按钮状态作为第二个参数。

例如

[`[UIButton setImage: forState:]`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/occ/instm/UIButton/setImage%3aforState%3a)

我已经为您链接了 Apple 的文档。

如果您的调用`setImage:`没有第二个参数，那将解释您看到的“无法识别的选择器错误”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:14:09.350

这是@MichaelDautermann 的扩展，他很好地指出 UIButton 有一个 setImage:forState: 方法，但没有 setImage 方法。但是，您正在调用 set image。不是在按钮上，而是当您说 imageView.image 和 imageView2.image 时。这会调用图像视图的 setter 方法。我会设置一个断点（或使用 NSLog 和 %@ 项）以确保 imageView 实际上是一个 imageView 而不是一个按钮。如果它以某种方式从你下面改变，这可能是导致问题的原因。只需在这两行处设置一个断点，看看你是否能越过它们。

此外，如果 Xcode 没有将您弹出到实际导致问题的行，请检查您的崩溃日志。符号化的，日志会给你行号。或者，一种不太直接的方法是在您在答案中提供的方法的末尾设置断点，并查看您通过了多少。一旦你崩溃了，你可以缩小导致你悲伤的方法，然后开始在方法中设置断点，直到你到达有问题的行。

***更新：*** 您在评论中说 ((UIImageView *)[self.view viewWithTag:alertView.tag]).image =nil 是您所拥有的，但 self.view 是 UIControl。更改演员表不会影响结果。您尝试删除 UIControl 子视图的 UIImageView 是其图像吗？如果没有，您将永远无法从 viewWithTag 取回图像视图。通常，self.view 指的是视图控制器的视图，所以如果你得到一个 UIControl，我的假设是你的整个视图是一个 UIControl，或者你在错误的类中这样做。你在哪个类做这个，它是什么的子类？看来您是在视图控制器中执行此操作，但我只是想确定一下。同样，在任何一种情况下（UIControl 或 UIImageView），两个类都没有响应 setImage。*

# r - 将变量转换为 R 中的 %H:%M 时间格式

> ID：10016412
> 
> 赞同：2
> 
> 时间：2012-04-04T17:37:40.413
> 
> 标签：r

我有这个向量表示时间记录为小时（0 到 24）和分钟（0 到 59）。我想将其转换为 R 中的 %H:%M 时间格式，以便我可以使用 difftime 之类的函数。

```
str(SF5$ES_TIME)
 int [1:11452] 1940 600 5 1455 1443 2248 1115 900 200 420 ... 
```

这是我尝试过的，但在这两种情况下，我都有一个错误：

```
>SF5$time1<-as.POSIXct(SF5$ES_TIME, format = "%H:%M",tz="EST")
Error in as.POSIXct.numeric(SF5$ES_TIME, format = "%H:%M", tz = "EST") : 
  'origin' must be supplied
SF5$time1<-as.POSIXct(as.character(SF5$ES_TIME), format="%H:%M",tz="")
> str(SF5$time1)
POSIXct[1:11452], format: NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA ... 
```

任何帮助或阅读建议将不胜感激！谢谢你，奥雷莉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T18:29:22.340

好吧，错误消息告诉您提供`origin`，一分钟是 60 秒，所以：

```
SF5 <- list(ES_TIME=as.integer(c(1940,600,5,1455,1443,2248,1115,900,200,420)))

x <- as.POSIXct(SF5$ES_TIME*60, origin="1970-01-01")
format(x, format="%H:%M")
#[1] "08:20" "10:00" "00:05" "00:15" "00:03" "13:28" "18:35" "15:00" "03:20" "07:00" 
```

请注意，`POSIXct`日期只是一个数字（带有类），因此您需要`format`调用来打印它 - 默认打印`x`将打印完整的日期信息（年/月/日等）。

...任何起源日期都可以，因为您不关心它，但它`1970-01-01`是通常的起源...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T16:32:11.630

I was able to crack down the code! Thank you all for your tip!

```
#1) as suggested by Justin : put all numbers into four digits with zero padding
    SF5$ES_TIME2<-sprintf("%04d",SF5$ES_TIME) 
#2) Matched these %H%M with their corresponding date %y-%m-%d
    SF5$ES.datetime <- paste(SF5$ES_TIME2,SF5$ES_DATE,sep=" ")
#3) Transform into Date-Time format
    SF5$ES.datetime2 <- as.POSIXct(SF5$ES.datetime,format="%H%M %y-%m-%d", tz="")

# Did the same for my other time-date of interest
SF5$SH_TIME2<-sprintf("%04d",SF5$SH_TIME) 
SF5$SH.datetime <- paste(SF5$SH_TIME2,SF5$SH_DATE,sep=" ")
SF5$SH.datetime2 <- as.POSIXct(SF5$SH.datetime,format="%H%M %y-%m-%d", tz="")

# Calculate the time difference between the 2 date-time in hours
SF5$duration<-difftime(SF5$SH.datetime2,SF5$ES.datetime2,units="hours",tz="") 
```

# javascript - 需要帮助将 Perl 正则表达式转换为 Javascript 正则表达式

> ID：10016414
> 
> 赞同：2
> 
> 时间：2012-04-04T17:37:42.727
> 
> 标签：javascript, regex, perl

我正在寻找从多行文本字符串中挖掘出一些好东西。我很乐意在 Perl 中执行正则表达式（尽管我确信有比我下面的代码更好的方法），但并不真正了解如何在正则表达式中使用标记的字符串作为 Javascript 中 newSubStr 的一部分。有没有办法或者我是否坚持运行多个替换来放弃音频和源线？

```
$_ = <<END;
<audio controls="controls" preload="metadata">
   <source src="01.mp3" type="audio/mpeg">
   <source src="01.ogg" type="audio/ogg">
   Stuff
   Default: <a href="01.mp3">&gt;&gt;download</a>
</audio>
END

s#.*<source.*?>.*?\n(.*)\n</audio>.*#$1#s;

print "[$_]\n"; 
```

（我有限的）Javascript中的倍数正则表达式可能像这样：

```
// We're really dependent on the HTML layout for line feeds
// so watch out.
var line = aElems[i].innerHTML.replace(/.*?audio.*?\n/gm, '');
var line2 = line.replace(/.*<source.*?\n/mg, '');
console.log(line2); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T18:03:55.737

尽管您说您想使用 JavaScript，但我想我会向您展示非正则表达式 Perl 方法。[HTML::TokeParser::Simple](https://www.metacpan.org/module/HTML::TokeParser::Simple)让它变得非常简单：

```
use HTML::TokeParser::Simple;
my $p = HTML::TokeParser::Simple->new( *DATA );

TOKEN: while( my $token = $p->get_token ) {
    if( $token->is_start_tag( 'audio' ) ){
        AUDIO: while( my $t = $p->get_token ) {
            next AUDIO if $t->is_tag( 'source' );
            last AUDIO if $t->is_end_tag( 'audio' );
            print $t->as_is;
            }
        next TOKEN;
        }

    print $token->as_is;
    }

__DATA__
<html>
<head><title>Test</title></head>
<body>
<p>Keep this</p>
<audio controls="controls" preload="metadata">
   <source src="01.mp3" type="audio/mpeg">
   <source src="01.ogg" type="audio/ogg">
   Stuff
   Default: <a href="01.mp3">&gt;&gt;download</a>
</audio>
<p>Keep this</p>
</body>
</html> 
```

这给出了：

```
<html>
<head><title>Test</title></head>
<body>
<p>Keep this</p>

   Stuff
   Default: <a href="01.mp3">&gt;&gt;download</a>

<p>Keep this</p>
</body>
</html> 
```

还有其他 Perl 模块也可以正确解析 HTML 并使用该结构。

对于 JavaScript 方面，为什么不直接替换 HTML？我知道你问[了一个相关的问题](https://stackoverflow.com/questions/10016079/fallback-to-the-default-if-source-is-invalid-in-audio-tag)。在我看来，应该有其他东西在音频中生成内容，并且在这种情况下应该能够为您提供您喜欢的东西。我会后退一步并继续努力。或者，您可以详细解释您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T19:46:04.347

通过阅读您的两个问题，听起来您真正想要的是使音频标签的父标签包含音频标签的 innerHTML 并删除源元素。

正则表达式很容易出错，尤其是当您可以使用 DOM 以更少的努力获得相同的结果时。

```
var audio_tag = ...;
var elements_to_delete = audio_tag.getElementsByTagName('source');
for (var idx = elements_to_delete.length - 1; idx >= 0; --idx) {
    audio_tag.removeChild( elements_to_delete[idx] );
}
audio_tag.parentNode.innerHTML = audio_tag.innerHTML; 
```

# ios - 延迟加载远程数据（RestKit 和 CoreData）

> ID：10016415
> 
> 赞同：0
> 
> 时间：2012-04-04T17:37:47.183
> 
> 标签：ios, core-data, mapping, restkit

我在这个问题上工作了很长时间，但找不到适合我需要的解决方案。

问题是，如何在不加载整个结构的情况下加载数据并将它们映射到关系

简单的例子：

我们得到了一些鸟：

```
{ 
    "birds":[{ 
            "bird":{"id":"1","value":"LaLeLu"}, 
            "bird":{"id":"2","value":"LeLeLa"}, 
            ... 
    }] 
} 
```

这可以通过以下方式映射：

```
RKManagedObjectMapping *birdMapping = [RKManagedObjectMapping 
mappingForClass:[Bird class]]; 
menuMapping.primaryKeyAttribute = @"identifier"; 
[menuMapping mapKeyPath:@"value" toAttribute:@"value"]; 
[menuMapping mapKeyPath:@"id" toAttribute:@"identifier"]; 

[[[RKObjectManager sharedManager] mappingProvider] 
setMappingForKeyPath:"birds.bird"]; 
```

现在效果很好。

现在每只鸟都可以有很多评论 - 但我不想在第一次请求时加载所有这些评论。

当用户点击特定的鸟时，应该会加载评论。

所以我要求：

```
NSString *resourcePath = [NSString stringWithFormat:@"/birds/%@/ 
comments", myBird.id] 
[[RKObjectManager sharedManager] 
loadObjectsAtResourcePath:resourcePath]; 
```

我可以更改它符合 RestKit 需求的响应——但需求是什么？

```
{ 
    "comments":[{ 
            "comment"{"id":"1","value":"Comment1","bird_id":"1"} 
    }] 
} 
```

现在我不知道如何映射这个响应。

映射与鸟类没有任何关系的评论是没有问题的：

```
RKManagedObjectMapping *commentMapping = [RKManagedObjectMapping 
mappingForClass:[Comment class]]; 
menuMapping.primaryKeyAttribute = @"identifier"; 
[menuMapping mapKeyPath:@"value" toAttribute:@"value"]; 
[menuMapping mapKeyPath:@"id" toAttribute:@"identifier"]; 

[[[RKObjectManager sharedManager] mappingProvider] 
setMappingForKeyPath:"comments.comment"]; 
```

希望有人理解我的问题并可以提供帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:06:44.323

对于所有对解决方案感兴趣的人：

RestKit 0.10.0 修复了这个问题：

```
RKManagedObjectMapping *commentMapping = [RKManagedObjectMapping 
mappingForClass:[Comment class]]; 
commentMapping.primaryKeyAttribute = @"identifier"; 
[commentMapping mapKeyPath:@"value" toAttribute:@"value"]; 
[commentMapping mapKeyPath:@"id" toAttribute:@"identifier"];

// Here starts the relevant part:

[commentMapping mapKeyPath:@"bird_id" to Attribute:@"bird_id"];
[commentMapping mapRelationship:@"bird" withMapping:birdMapping];
[commentMapping connectRelationship:@"bird" withObjectPropertyForPrimaryKeyAttribute:"bird_id"]

[[[RKObjectManager sharedManager] mappingProvider] 
    setMapping:commentMapping ForKeyPath:"comments.comment"]; 
```

# sql - 如何在所有字段中搜索 int 或 string

> ID：10016417
> 
> 赞同：0
> 
> 时间：2012-04-04T17:38:01.677
> 
> 标签：sql, search

```
SqlDataAdapter da = 
    new SqlDataAdapter("SELECT * 
        FROM Patient 
        Where Registration_Id = '" + textBox1.Text + "'  
           OR Patient_Name = '" + textBox1.Text + "'", cn); 
```

如何在所有字段中搜索 int 或 string？

编辑代码：

```
if (comboBox1.Text == "Registration_Id") 
{ 
    da = new SqlDataAdapter("SELECT * 
                            FROM Patient 
                            Where Registration_Id = '" + textBox1.Text + "'", cn); 
} 
else if (comboBox1.Text == "Patient_Name") 
{ 
    da = new SqlDataAdapter("SELECT * 
                            FROM Patient 
                            Where Patient_Name = '" + textBox1.Text + "'", cn); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:13:34.303

对于一种方法，该方法可能会受到 SQL 注入攻击，因此您需要对其进行清理。否则，一种解决方案（在检查攻击之后）是：

```
SELECT * 
FROM Patient 
Where column1 like "'%" + textBox1.Text + "%'" 
   or column2 like "'%" + textBox1.Text + "%'"
   ......
   or columnn like "'%" + textBox1.Text + "%'" 
```

如果他们不知道项目的 id 则不要检查该列，这可以使这变得更简单。否则有一个下拉列表来选择他们正在搜索的列。

# jquery - 子div内的jquery链接

> ID：10016420
> 
> 赞同：0
> 
> 时间：2012-04-04T17:38:04.887
> 
> 标签：jquery, hyperlink

我在 div 中的 jquery 链接有问题

解释一下，我有一个`<div id=map></div>`which 里面可以加载地图的单独页面（`inc_map.php`）。

在这个 div 之外，在主页面上，我有 4 个链接通过重新加载来控制 div 内的字符。当您单击其中一个时，会运行一个函数，例如：

```
$(function() {
  $("#left").click(function(evt) {
     $("#map").load("inc_map.php?move=left");
     evt.preventDefault();
     }) 
```

我想将链接从 div 外部更改为 div 内部，但这让我感到悲伤并且无法正常工作。

知道为什么吗？我也尝试将它们命名为不同的 ID 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:14:38.273

这对我来说按预期工作：

```
<script type="text/javascript" language="javascript">
    $(function () {
        $("#left").click(function (evt) {
            $("#map").load("test.html?move=left");
            evt.preventDefault();
        });
    });

</script>

<div id="map">   <a id="left">TEST CLICK </a>
</div> 
```

也许您可以尝试使用firebug对其进行调试以查看全貌。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:16:59.320

请试试这个：（示例`div#map`）

**HTML**

```
<div id="map">
    <a href="#" id="left">L1</a>
    <a href="#" id="right">L2</a>
    <a href="#" id="top">L3</a>
    <a href="#" id="bottom">L4</a>
</div> 
```

**jQuery**

```
$(function() {
    $('#left').on('click', function(evt) {
        var $contents = $('#map').contents();
        $("#map").load("inc_map.php?move=left", function() {
            $(this).prepend($contents);
        });
        evt.preventDefault();
    });
}); 
```

# https - X509 证书用途设置

> ID：10016421
> 
> 赞同：0
> 
> 时间：2012-04-04T17:38:05.063
> 
> 标签：https, ssl-certificate, x509

我想问一下证书的目的是什么时候为证书设置的，例如服务器身份验证，客户端身份验证。

是我们生成 CSR 的时候还是 CA 签署的时候？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T02:25:47.773

CSR 是证书签名请求。如果它是 PKCS#10 请求（迄今为止最常见的类型），它可以指示请求了哪些扩展，并且可以包括扩展密钥用法（也称为目的）。但 CA 最终决定在创建和签署证书时包含哪些内容。它可以选择不颁发证书。它可以颁发带有请求属性子集的证书。它可以颁发一个完全不同的证书。它可以颁发一个正是 CSR 要求的证书。

# android - 大屏幕布局不如预期

> ID：10016424
> 
> 赞同：0
> 
> 时间：2012-04-04T17:38:23.123
> 
> 标签：android, android-layout

我开发和应用并上传了各自可绘制文件夹中的所有图像（不同像素用于不同密度）。

现在我对布局感到困惑。如果我使用 4.1 inc 的布局编辑器（我猜这被认为是 Med 屏幕？）一切看起来都很棒。现在，当我使用 10.1 英寸平板电脑的编辑器时，我看到图标非常小，文字也很小。我还没有运行模拟器。所以我想知道：

1-虽然我没有指定文本大小，但为什么文本会很小？不应该适当地缩放吗？或者我应该给它一个更大的布局的特定尺寸？

2-考虑到我提供了不同的drawable，为什么图标很小？我认为它会相应地扩大规模。

请不要给我支持android中的多屏链接作为答案，因为我已经通过它并且上面仍然没有运气。我需要你的个人建议，因为我认为我在这里遗漏了一些东西

非常感谢你提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:13:35.470

Android 对不同屏幕的支持有点棘手。那是因为您可以拥有*大*、*小*、*中*和*超大*屏幕，以及*高*、*中*、*低密度*的屏幕。有十几种可能性（xlarge 低密度，small 高密度）并且没有**定义一个分辨率**。因此，您必须了解设计 API[的原则](http://developer.android.com/guide/practices/screens_support.html)，并且必须根据小部件在 UI 中**的角色**来定义布局。您还必须记住，您的布局不会在 100% 的设备上完美像素，因此您的目标应该是*可用的*在所有可能的设备上。

在您的具体情况下，您似乎没有设法指定*正确的资源，或者系统没有为您选择正确的资源，但我必须指出，在 Android 上谈论**大*是没有意义的，*小*而*规模*：您应该以（良好的）网络开发人员的心态设计您的布局，他们每天处理大量不同的显示器、分辨率、物理尺寸甚至设备。

如果您是 Android 新手，我还建议不要使用图形构建器，因为您**确实**需要知道 Android 如何布置组件，否则您会经常回到 SO :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:46:42.140

我对 Android 设备动物园的体验让我得出一个可悲的结论，即内置的屏幕尺寸/布局工具毫无用处。直接来自支持的案例：

*   10 英寸平板电脑，搭载 Android 2.2。Android 2.2 不支持屏幕尺寸 xlarge
*   Kindle Fire，7 英寸，声称它是 xlarge。

我最终将所有三种布局（med/large/xlarge）放入`layout`，根据运行时密度和分辨率加载一个，并为用户提供强制特定布局的选项。

只是在说'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:58:13.353

如果您未在布局文件中指定文本大小，Android 将采用默认值，这很可能在 DIP（密度无关像素）中，因此在任何设备上都将是相同的物理大小。这应该可以解释为什么文字在 10 英寸平板电脑上看起来如此之小。

在这种情况下，我会为每个活动设置 3 个布局，并为较大的设备指定文本大小（假设您已经喜欢手机上的外观）并将它们放在此文件夹方案中：

```
res/layout/layout.xml           // phones
res/layout-sw600dp/layout.xml   // 7” tablets
res/layout-sw720dp/layout.xml   // 10” tablets 
```

以上信息取自[本文](http://android-developers.blogspot.ca/2011/07/new-tools-for-managing-screen-sizes.html)。我在我目前的个人项目中应用了这个，到目前为止它就像一个魅力。

其次，就图标而言，我不是可绘制专家，但如果您在每个文件夹中提供相同的文件（就像我认为您从我对您的问题的理解中所做的那样），它不会使其缩放。您必须创建 4 个不同的图标，每个图标对应一种可能的像素密度。

有关图标大小的信息可以在[此页面](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html)上找到。

希望这对您有所帮助。

# mysql - 累计月度报告

> ID：10016425
> 
> 赞同：1
> 
> 时间：2012-04-04T17:38:38.137
> 
> 标签：mysql, cumulative-sum

我有一个光伏发电数据 (pvdata) 的 MySQL 表，我需要从中生成每月汇总表。显示了一个简化的表格：

id 日期时间 pvdata
1 2012-01-01 10:00 50
1 2012-01-31 12:00 60
1 2012-02-10 13:00 70
2 2012-02-08 10:00 12
2 2012-03-20 10:00 17

每月汇总表需要显示数据库中所有系统的累积生成，无论我是否收到了该月的数据，因此例如下面的第 3 个月包含从 id = 1 开始的总生成（第 2 个月收到的数据）。

此外，同一月份可能有多个 id 的数据点，因此报告必须报告该月的 max(data)。

年月 cum_data
2012 1 60
2012 2 82
2012 3 87

我对此很陌生，所以已经挣扎了一段时间。我能想到的最好的方法是显示当月的累计总数，但不包括当月没有数据的 id 的累计总数：

```
CREATE TEMPORARY TABLE intermed_gen_report  
SELECT year(date) AS year, month(date) AS month, id, max(pvdata) AS maxpvdata
FROM pvdata
GROUP BY id, year(date), month(date)
ORDER BY year(date), month(date);

SELECT year, month, SUM(maxpvdata) AS cum_data
FROM intermed_gen_report
GROUP BY year, month
ORDER BY year, month; 
```

给予：

年月 cum_data
2012 1 60
2012 2 82
2012 3 17

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:57:11.233

我认为问题是这样一种[http://www.richnetapps.com/using-mysql-generate-daily-sales-reports-filled-gaps/](http://www.richnetapps.com/using-mysql-generate-daily-sales-reports-filled-gaps/) - 你会想要创建一个表（可能是临时的）日期（或年/月值）。但是，该示例在没有数据的情况下留下零 - 我认为您将希望对返回该日期（或年/月值）之前的最新数据的子选择进行连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:39:58.700

我同意 Aerik 的建议。您将需要加入通常称为“日期维度表”的数据。您可以找到很多关于如何填充所述表格的示例。这是数据仓库中的常用技术。

您还可以使用子选择在一次选择中执行您需要的操作。看看以前的一些线程，例如：[从日期范围生成天数](https://stackoverflow.com/questions/2157282/generate-days-from-date-range)

# javascript - 有没有办法做一个可访问的模式？

> ID：10016433
> 
> 赞同：6
> 
> 时间：2012-04-04T17:39:00.710
> 
> 标签：javascript, twitter-bootstrap, modal-dialog, accessibility, jaws-screen-reader

我正在使用 Twitter Bootstrap 开发一个项目，并使用屏幕阅读器玩[JavaScript 组件。](http://twitter.github.com/bootstrap/javascript.html#modals)

当我触发模态对话框时，Jaws 会跳过模态框，转到页面中的下一个链接。

有没有办法实现可访问的模式？

我认为的另一个解决方案是为模式的功能制作一个静态页面，并在用户使用屏幕阅读器时重定向到该页面。如果用户正在使用屏幕阅读器，我可以以某种方式检测到吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T08:40:38.563

[编辑 2019：N. Hoffmann 在vanilla JS](https://van11y.net/accessible-modal/)（连同其[van11y](https://van11y.net)项目中的其他组件）和[jQuery](https://a11y.nicolas-hoffmann.net/modal/)中编写并维护了一个可访问的模态组件。
行为和样式很容易通过`data-*`属性和类进行修改。
它已经在更多条件下（屏幕阅读器等）进行了测试，而不是您使用自己的脚本；-)

此外，Bootstrap 4 具有相当可访问的模式，而 Bootstrap 3 在其最新版本中（大部分或全部 Paypal Bootstrap 可访问性插件都向后移植到 3.3.x）。

现代资源：**[访问和使用](https://accessuse.eu/en/modal-dialogs.html)***欧洲倡议以简单的方式*详细介绍了许多有趣的方面，并指出了其他资源，包括最新的 ARIA Deisgn 模式。

* * *

这是一个可访问的模式对话框：[http ://hanshillen.github.com/jqtest/#goto_dialog](http://hanshillen.github.com/jqtest/#goto_dialog)

一旦模式被激活，键盘导航就会被困在对话框中，直到它被用户明确关闭。

[http://irama.org/web/dhtml/lightbox/](http://irama.org/web/dhtml/lightbox/)详细介绍了这种可访问的实现（灯箱和模态对话框之间几乎没有区别，重要的是模态部分和键盘管理）。
您还可以阅读DHTML 样式指南的*非官方副本中的*[对话框模式](http://www.html5accessibility.com/dhtmlStyleGuide.html#dialogmodal)部分和 W3C/WAI-ARIA [Making a Dialog Modal](http://www.w3.org/TR/2010/WD-wai-aria-practices-20100916/#modal_dialog)。

如果您需要更 DIY 的方法，J. Wajsberg 编写了一个 jQuery 插件，能够[将键盘输入捕获在 DOM 元素中。](https://github.com/julienw/jquery-trap-input)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T07:35:04.437

如果用户使用屏幕阅读器，我不知道有任何自动检测的解决方案。但是有谷歌解决方案可以在页面开头隐藏链接（左侧：-1000em 和位置：绝对），如果您使用键盘并显示“特殊模式”，则可以激活该链接。

```
<a href="#" style="left:-1000em;position:absolute">Screen reader users, click here to turn off Google Instant.</a> 
```

对于您的模态对话框，请尝试在对话框 html div 上使用 aria 和 aria-atomic="true" aria-live="assertive" 属性。它应该宣布您对话框的内容。

# jquery - 固定标题 jquery

> ID：10016436
> 
> 赞同：0
> 
> 时间：2012-04-04T17:39:07.857
> 
> 标签：jquery, css, fixed-header-tables

我正在尝试将 fixedheader 功能添加到我的数据表中。

我添加了以下语句：`new FixedHeader( oTable);`

```
oTable = $('#mytable').dataTable({ 
    "aaSorting": [ [0,'asc'] ], "aoColumns" : dataTableColumns, "oLanguage": {   
        "sLengthMenu": 'Show <select>'+ 
                       '<option value="10">10<\/option>'+ 
                       '<option value="25">25<\/option>'+ 
                       '<option value="50">50<\/option>'+ 
                       '<option value="100">100<\/option>'+ 
                       '<option value="-1">All<\/option>'+
                       '<\/select> records' }, "iDisplayLength": -1, }); 
new FixedHeader( oTable); 
```

在原始标题之上创建了一个浮动标题。标题具有透明背景，字体和样式与我现有的标题不同。当浮动标题与当前标题重叠时，它看起来很奇怪。

CSS 代码：

```
table.display thead th {
    padding: 3px 18px 3px 10px;
    border-bottom: 1px solid black;
    font-weight: bold;
        cursor: pointer;
}

table.display tfoot th {
    padding: 3px 10px;
    border-top: 1px solid black;
    font-weight: bold;
}

table.display tr.heading2 td {
    border-bottom: 1px solid #aaa;
} 
```

# java - 如何用java语言画一棵树

> ID：10016437
> 
> 赞同：-1
> 
> 时间：2012-04-04T17:39:14.753
> 
> 标签：java, swing

我试图在java中解析一个XML文件，之后我必须使用这样的Jframe将它表示为一棵树![在此处输入图像描述](../Images/53933c6f0b7e329b56bd24d0ae865dd7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:53:56.083

树通常是这样布局的更容易链接的结构之一，因为路径通常不会“合并”或“交叉”。

您可以通过“从左到右”遍历树以大致表格的方式接近它：从根开始，并在该区域的左上角绘制其表示。然后，一次遍历它的“左”分支一层，在与根相同的“列”中连续较低的“行”上绘制这些节点的表示。然后，当您移动到“右侧”节点时，在同一级别右侧可用的下一个“列”中绘制该节点。这将生成树结构的斜坡形图。

您可以添加对每个级别的级别和节点数的一些预分析，这将允许您通过了解图形所需的最大级别数和节点数将树“居中”成一个粗略的金字塔形状该图的每个级别。但是，这需要在开始绘制任何东西之前遍历整个图形。

至于“安排”一棵树的节点，使其适合最小的区域而没有箭头交叉或重叠，这是一个范围远远超过平均 SO 答案的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:42:25.420

有很多很好的图形可视化库。

这是一个非常广泛的选项列表：[http ://s6ai.livejournal.com/33969.html](http://s6ai.livejournal.com/33969.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:48:21.660

[Prefuse](http://prefuse.org/)可能会创造出一些美学上相似的东西。当然，您可以走原始路线并手动绘制图形。对于 XML 到图形的转换，[TreeMLReader](http://prefuse.org/doc/api/prefuse/data/io/TreeMLReader.html) API 可能有些用处，但是您可能必须先使用 XSLT 将 XML 转换为 TreeML 格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T17:52:06.803

我们使用标准格式打印图像 [http://www.java-forums.org/awt-swing/6763-how-display-image.html](http://www.java-forums.org/awt-swing/6763-how-display-image.html)

# search - 如何以编程方式在 Windows 7 中启用 Windows Search 组件？

> ID：10016439
> 
> 赞同：1
> 
> 时间：2012-04-04T17:39:33.200
> 
> 标签：search, windows-7

我找到了很多关于如何手动启用 Windows 搜索组件的参考资料，例如：

[http://www.howtogeek.com/howto/10246/how-to-disable-search-in-windows-7/](http://www.howtogeek.com/howto/10246/how-to-disable-search-in-windows-7/)

但问题仍然存在：如何在代码方面实现自动化？

# iphone - 如何以编程方式静音传入的 iPhone 短信？

> ID：10016443
> 
> 赞同：7
> 
> 时间：2012-04-04T17:40:05.343
> 
> 标签：iphone, xcode, sms, system-sounds

我目前正在尝试使用`AVSystemController`私有框架根据​​用户的选择来静音系统噪音。我目前正在通过以下方式将电话静音：`[(AVSystemController object) setVolumeTo:0.0 forCategory:@"Ringtone"];`

是否有命令对传入的短信执行此操作？我想这将基于该调用中确定的类别的变化。但是，我找不到要参考的类别列表。在我能找到的 10 个中`(Alert, Audio/Video, Ringtone, Voicemail, VoicemailGreeting, PhoneCall, TTYCall, RingtonePreview, Alarm, Record)`，没有一个管理短信声音。有没有一个类别可以做到这一点？如果没有，有没有其他方法可以使传入文本的声音静音？

我意识到这违反了 Apple 的无私有框架政策，但这个应用程序不会在应用程序商店上架，所以没问题。我正在为最新版本的 IOS 使用最新版本的 Xcode 开发它，因此任何实现此目的的方法都是可行的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-14T12:01:50.420

@Jessica，你不能这样做，因为它受到限制。如果您想在您的应用程序中尝试它，那么您的应用程序可能会在 App Store 中被拒绝。

因此，使用公共 API 是不可能的。

您找到的链接使用的是私有 API，这些 API 没有记录或保证按您期望的方式工作。如果您尝试发布调用私有 API 的 App Store 应用程序，它将被自动拒绝。

如果你想检查，是否沉默，然后使用下面的代码，

```
 -(BOOL)silenced {
         #if TARGET_IPHONE_SIMULATOR
             // return NO in simulator. Code causes crashes for some reason.
             return NO;
         #endif

        CFStringRef state;
        UInt32 propertySize = sizeof(CFStringRef);
        AudioSessionInitialize(NULL, NULL, NULL, NULL);
        AudioSessionGetProperty(kAudioSessionProperty_AudioRoute, &propertySize, &state);
        if(CFStringGetLength(state) > 0)
                return NO;
        else
                return YES;

        }

For completeness, building off this link from Dan Bon, I implement the following method to solve this problem in my apps. One thing to note is that the code checks for the iPhone simulator first - executing the below code will crash the simulator. Anyone know why?

-(BOOL)silenced {
     #if TARGET_IPHONE_SIMULATOR
         // return NO in simulator. Code causes crashes for some reason.
     return NO;
     #endif

    CFStringRef state;
    UInt32 propertySize = sizeof(CFStringRef);
    AudioSessionInitialize(NULL, NULL, NULL, NULL);
    AudioSessionGetProperty(kAudioSessionProperty_AudioRoute, &propertySize, &state);
    if(CFStringGetLength(state) > 0)
        return NO;
    else
        return YES;

} 
```

**在视图控制器中声明此权利，您只需检查**

```
if ([self silenced]) {
     NSLog(@"silenced");

else {
     NSLog(@"not silenced");
} 
```

# java - 为什么我会陷入僵局

> ID：10016445
> 
> 赞同：0
> 
> 时间：2012-04-04T17:40:08.477
> 
> 标签：java

我不明白为什么我在这个简单的示例中陷入僵局。它有什么问题？

```
public static void main(String[] args) {
        Object data = null;
        new Thread(new Producer(data)).start();
        new Thread(new Consumer(data)).start();
    }
}

class Producer implements Runnable {
    private Object data;

    public Producer(Object data) {
        this.data = data;
    }

    @Override
    public void run() {
        while (true) {
            while (data != null) {}
            data = new Object();
            System.out.println("put");
        }
    }
}

class Consumer implements Runnable {
    private Object data;

    public Consumer(Object data) {
        this.data = data;
    }

    @Override
    public void run() {
        while (true) {
            while (data == null) {  }
            data = null;
            System.out.println("get");
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:46:30.940

有两个问题。

1：您有两个独立的 Runnable，每个都有自己的私有内部成员，名为 data。对其中一个所做的更改对另一个不可见。如果要在两个线程之间传递数据，则需要将其存储在它们都可以访问它的公共位置。您还需要围绕访问同步或使引用易变。

2：您的支票似乎倒转了。您可能想在它不为空时将其设为空，并在它为空时创建一个？很难说出你想要它在那里实际做什么！:)

```
public static volatile Object data;

public static void main(String[] args) {
        data = null;
        new Thread(new Producer(data)).start();
        new Thread(new Consumer(data)).start();
    }
}

class Producer implements Runnable {

    public Producer(Object data) {
        this.data = data;
    }

    @Override
    public void run() {
        while (true) {
            while (data == null) {}
            data = new Object();
            System.out.println("put");
        }
    }
}

class Consumer implements Runnable {

    public Consumer(Object data) {
        this.data = data;
    }

    @Override
    public void run() {
        while (true) {
            while (data != null) {  }
            data = null;
            System.out.println("get");
        }
    } 
```

（此外，这并不是我们定义为死锁的经典示例，其中两个线程无法继续，因为它们都想要另一个锁。这里没有锁。这是两个无限循环的示例只是什么都不做。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T17:44:09.660

每个实例都有自己的`data`字段。
消费者永远不会看到生产者的变化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T17:44:53.453

消费者和生产者有不同的*数据*字段，所以消费者永远不会得到任何数据来消费。

此外，在字段上自旋锁定消费者/生产者通常不是一个好主意，***最好***使用互斥锁或信号量来表示数据的可用性/发布的可能性。如果这不仅仅是搜索知识的测试，那么您应该真正阅读如何使用这两者。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T17:51:30.943

当您生产的“生产”时，它所做的只是将自己的`data`引用指向新对象，而消费者无法知道发生了什么。你可以做的就是制作另一个课程

```
class Data {
    private Object data = null;
    synchronized void set( Object data ){ this.data = data; }
    synchronized Object get(){ return data; }
} 
```

然后在你的主要做

```
Data data = new Data(); 
```

将“数据”对象传递给消费者和生产者，并使用 get/set 方法而不是赋值。

这样，消费者和生产者都将指向同一个`Data`对象，当生产者生产或消费者消费时，他们将更改他们正在共享的 Data 对象中的引用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T18:00:41.433

我认为这应该做你想要的（它仍然是糟糕的代码）：

```
public class Example {
    public static void main(String[] args) {
        Consumer consumer = new Consumer();
        new Thread(new Producer(consumer)).start();
        new Thread(consumer).start();
    }
}

class Producer implements Runnable {
    private final Consumer consumer;

    public Producer(Consumer consumer) {
        this.consumer = consumer;
    }

    @Override
    public void run() {
        while (true) {
            while (consumer.data != null) {}
            consumer.data = new Object();
            System.out.println("put");
            try {
                Thread.sleep(5);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
}

class Consumer implements Runnable {
    public volatile Object data;

    @Override
    public void run() {
        while (true) {
            while (data == null) {}
            data = null;
            System.out.println("get");
            try {
                Thread.sleep(5);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

我认为您应该关注 Java 的基础知识，然后再学习诸如并行编程之类的高级主题，因为示例中的主要错误（单独的数据字段）非常基础。

# syntax - s.split('').?.? Ruby 语法

> ID：10016448
> 
> 赞同：-2
> 
> 时间：2012-04-04T17:40:21.240
> 
> 标签：syntax

我是 ruby​​ on rails 的新手并开始学习教程并发现了以下功能

```
 def string_shuffle(s)
>>   s.split('').?.?
>> end
=> nil
>> string_shuffle("foobar") 
```

做什么 **`s.split('').?.?`**？我知道拆分方法，但我不知道这两个问号是干什么用的。我看到“？在布尔方法中使用，但我不明白这个是如何工作的。我试图用谷歌搜索它，但我根本找不到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T17:50:51.067

引用有问题的教程：

> 通过用适当的方法替换代码清单 4.10 中的问号，组合 split、shuffle 和 join 来编写一个函数，将给定字符串中的字母打乱。

清单 4.10 是一个练习，其中两个问号被替换为实际的方法调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:45:06.120

此代码无效

您可以看到 split 返回一个数组： [http ://www.ruby-doc.org/core-1.9.3/String.html#method-i-split](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-split)

并且没有调用方法？在数组中： [http ://www.ruby-doc.org/core-1.9.3/Array.html](http://www.ruby-doc.org/core-1.9.3/Array.html)

# f# - 类型 'NS.Type1 ' 与类型 'NS.Type1 不兼容 ' 在 f#

> ID：10016449
> 
> 赞同：0
> 
> 时间：2012-04-04T17:40:25.940
> 
> 标签：f#, compiler-errors

我只是在几个库中拆分了一个项目。我在标题中有奇怪的错误。

我无法解释自己为什么会这样。此外，此错误过去仅出现在 FSI.exe 中

我认为这是因为 pb 在 fsi 中加载了 dll，但还有更多。

这可能是一个愚蠢的错误（可能是..），但如果有人之前遇到过这个 sybillin 错误消息并且知道会发生什么，我会很高兴听到它。

**更新**

我认为这是名称空间问题，但事实并非如此。这个问题很奇怪。如果您没有经历过，请忽略它。我仍在试图查明确切的起源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T18:12:51.103

没有更多信息，很难确定。发生这种情况的一种方法是，如果您最终在 FSI 中重新定义了一个类型，而没有重新定义一些依赖它的东西。然后这些东西期望该类型的旧版本，但您最终会创建不兼容的新版本的实例。例如，给定以下代码：

```
type MyType<'a>() = class end
let myFun (_:MyType<int>) = 0

let result = myFun (MyType()) 
```

如果我将前两行发送到 FSI，然后再将第一行发送给 FSI，然后再发送第三行，我会收到与您的错误消息类似的内容。解决方案是重新评估所有相关定义。

# .htaccess - .htaccess 重写 url 中的某些单词

> ID：10016452
> 
> 赞同：0
> 
> 时间：2012-04-04T17:40:41.207
> 
> 标签：.htaccess, redirect

我似乎找不到这个问题的答案

我正在寻找一种 .htaccess 重写方式来打开这个 url

[http://www.mydomain.com/Virtuemart.html?keyword=adobe&page=shop.browse](http://www.mydomain.com/Virtuemart.html?keyword=adobe&page=shop.browse)

至

[http://www.mydomain.com/virtuemart.html?keyword=adobe&page=shop.browse](http://www.mydomain.com/virtuemart.html?keyword=adobe&page=shop.browse)

所以基本上我只想改变大写V

之后有很多页面和变量？所以一件一件做几乎是不可能的

是他们做到这一点的简单方法。

非常感谢您的时间

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:04:19.877

使用 mod_rewrite（在 apache 下），您可以在文档根目录的 .htaccess 文件中粘贴类似这样的内容：

```
RewriteEngine On
RewriteRule ^Virtuemart.html /virtuemart.html [L,QSA] 
```

查询字符串只是被附加到未触及的末尾。如果要重定向浏览器，请在末尾添加一个**R=301**标志（或者如果您不想要 301，则只添加 R）**。**这使得当有人访问[http://www.mydomain.com/Virtuemart.html](http://www.mydomain.com/Virtuemart.html)时，他们实际上会在`/virtuemart.html`.

# java - 静态方法应该对每个对象都有相同的结果吗？

> ID：10016455
> 
> 赞同：-4
> 
> 时间：2012-04-04T17:41:00.970
> 
> 标签：java

我有一个非常简单的问题：静态方法应该对每个对象都有相同的结果吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T17:41:40.863

**不**

```
public static boolean isEven(int number){
    return (number %2 ==0);    
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T17:41:44.203

你是什​​么意思？静态方法不能有`this`对象，但如果传递不同的参数，它们可能会返回不同的结果。换句话说，`a.staticMethod`and`b.staticMethod`肯定会返回相同的结果，但`staticMethod(a)`and`staticMethod(b)`可能会有所不同。

# linq - LINQ to SQL Server 2000：“必须声明变量 '@p0'”

> ID：10016456
> 
> 赞同：2
> 
> 时间：2012-04-04T17:41:06.373
> 
> 标签：linq, sql-server-2000

我创建了这个简单的 LINQ 查询：

```
var result = from invoice in invoiceTable
             where invoice.Id == 1
             select invoice.Document; 
```

它生成以下 SQL：

```
SELECT [t0].[Document]
FROM [Invoice] AS [t0]
WHERE [t0].[Id] = @p0 
```

每当我运行它时，都会收到此错误：

(ODBC)

> 错误 [42000] [Microsoft][ODBC SQL Server Driver][SQL Server]必须声明变量“@p0”。

(OleDb)

> 必须声明变量“@p0”。

我记得读过 OleDb 和 ADO.NET 不支持 SQL Server 2000 上的命名参数。这个问题与那个问题有关，还是我做错了什么？

**更新 1：**

这似乎是一个供应商问题。我使用 SQL 客户端数据提供程序对 SQL Server 2008 尝试了相同的查询，它运行良好。不幸的是，此提供程序不适用于 SQL Server 2000。

当我尝试在 SQL Server 2008 中使用 ODBC 和 OLEDB 提供程序时，我遇到了同样的错误。

有谁知道合适的解决方法？

**更新 2：**

事实证明，SQL 客户端提供程序**确实**适用于 SQL Server 2000。只是不是来自 Visual Studio 2010。我更改了提供程序，查询现在可以工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:57:44.020

事实证明，SQL 客户端提供程序确实适用于 SQL Server 2000。只是不是来自 Visual Studio 2010。我更改了提供程序，查询现在可以工作了。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-09-11T20:08:29.263

如果您使用的是 ODBC 提供程序，它将不起作用。更改为 SqlClient。

# android - 单击时如何为 ListView 中的项目设置动画？

> ID：10016459
> 
> 赞同：5
> 
> 时间：2012-04-04T17:41:17.497
> 
> 标签：android, listview, animation, swipe-gesture

我想要一个 ListView，当我单击该项目时，视图会滑到左侧。

所以我有：

```
listView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            arg1.startAnimation(openAnimation);
        }
    }); 
```

但是，动画应用于列表中的不同项目，而不是被单击的项目。该行为似乎是随机的，因为有时它同时发生在多个项目上。

我怀疑这是因为适配器重用它的视图来创建项目的方式。我去修改我的适配器中的 getView 方法，以便在每次调用它时膨胀新视图。然后动画不再发生。

有没有办法解决这个问题？我试图将动画移动到我的适配器内部，但是我无法将它与 Listview 上的其他操作相关联。

最终，我希望该项目是可点击的，但是当向左/向右滑动时会显示删除按钮（iOS 删除行为）。我在这里走错了吗？这应该是可能的，因为 Android 可以在通知栏中实现滑动删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:06:01.510

我建议你也检查[这个](https://stackoverflow.com/questions/3928193/how-to-animate-addition-or-removal-of-android-listview-rows)线程。

我不认为这是可能的，而无需修改您的适配器以适应这种类型的行为。据我了解，您在实现识别不同 ListView 行上的滑动手势的代码方面没有任何问题，只有动画应该在相应的行上遵循此手势。

我会重写适配器以适应至少 2 种行类型：普通行和要删除的行。在你的适配器的“getView()”方法中，你应该只重用普通视图的convertView。要删除的行不应该重复使用它们，以便动画一个不会修改其他行。单击正常行时，您应该首先告诉适配器单击位置上的行现在是要删除的类型，调用.notifyDatasetChanged()，然后在该行上启动动画。

# php - 文件中的 MD5ing 单词

> ID：10016460
> 
> 赞同：1
> 
> 时间：2012-04-04T17:41:21.383
> 
> 标签：php, md5

我想做的是，

打开word文件，读取一行，将其转换为md5，如果它不存在则写入db（word和加密字符串）

由于某种原因，它不起作用。

```
$file = fopen("list.txt", "r");

while (!feof($file))
{
$word = fgets($file);
$word = mysql_real_escape_string($word); // to prevent injections
$md5string = md5($word);

//check if in DB

$check = mysql_query("SELECT id FROM table WHERE word='$word'") or die(mysql_error
    ());
if (mysql_num_rows($check) > 0)
{
} //Nothing to do.
else
{
    $write = mysql_query("INSERT INTO table (word, md5string) VALUES ('$word','$md5string')") or
        die(mysql_error());
}
} 
```

它正在制作散列并存储所有内容，但制作的散列并不正确。

知道我的代码有什么问题吗？

修复：我在散列之前 mysql_real_escaped 字符串，这就是我错的地方。

```
$word = trim(fgets($file));
$md5string = md5($word);
$word = mysql_real_escape_string($word); // to prevent injections` 
```

添加：我刚刚使用从这里得到的建议更正了我的脚本并发现

Md5ecnrypter.com 做错了。

他们在散列之前转义了字符串。多么蹩脚。刚刚检查了其他站点以查看 SO 建议是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:43:24.310

只是对此进行尝试，但是您正在使用的 MD5 是文件在mysql_real_escape_string() 调用可能修改*后的 MD5。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T17:45:22.907

也许`md5()`以前用过`mysql_real_escape_string()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T17:45:45.777

尝试更改行的顺序

```
$word = trim(fgets($file));
$md5string = md5($word);
$word = mysql_real_escape_string($word); // to prevent injections 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T18:03:23.123

嗯，

就我个人而言，我会寻找哈希，所以：

SELECT * FROM table WHERE md5word=$hashed_word

我也会在 md5-ing 这个词之前使用 trim，你真的不需要在 md5 之后使用 mysql_real_escape_string()，因为 md5 将数据转换为十六进制数，所以，如果有的话，最好先这样做.

# google-chrome - Google Chrome 中的 ScaleRaphael Raphael 缩放错误

> ID：10016463
> 
> 赞同：0
> 
> 时间：2012-04-04T17:41:37.073
> 
> 标签：google-chrome, raphael

我有一个 ScaleRaphael 问题，我可以在适用于 Windows 和 Mac 的 Google Chrome 上重现，所有其他浏览器都显示了预期的结果。

图像不在正确位置居中/输出。**但是**，如果我在 Chrome 中打开 Web 检查器工具，图像会立即跳转到正确的位置......

[您可以在他们的演示页面上](http://www.shapevent.com/scaleraphael/demo2.html)看到实际问题。

**解决了**！

如果我`paper.text(200,100,"").attr("font","30px Arial").attr("fill","#ffffff");});` 在resizefunctions之后添加到底。（来自 scaleraphael 示例）。图像在 Chrome 中正确呈现。

这在我的情况下有效。

# excel - 如何删除多个空白“Microsoft Excel 对象”

> ID：10016464
> 
> 赞同：1
> 
> 时间：2012-04-04T17:41:39.243
> 
> 标签：excel, excel-2003, vba

我有一个电子表格，其中一张名为“Sheet1”。我已取消隐藏所有其他工作表并将其删除。当我打开 VBA 编辑器时，在“Microsoft Excel 对象”下，我列出了近 4000 个工作表，我无法通过右键单击将它们删除。

我相信当“Sheet1”中没有数据时，这会导致文件的大小太大（~6 MB）。我试过使用“goto>special>objects”方法，但没有找到任何对象。

关于如何清除所有这些空对象的任何想法？

![VBA 资源管理器](../Images/bf79d44e60e1032b838eacf336333e10.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:30:03.460

我想我找到了一个解决方案，至少它对我有用，而且我对 VBA 不是很了解。添加属性窗口（在视图下），选择每个工作表，并将可见选项更改为 -1 - xlsheetvisible，它将使其出现在 excel 中，然后您可以删除选项卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:12:39.450

有很多方法可以实现您想要的。最快的方法是右键单击 Sheet1 并单击“移动或复制”~~>“新书”~~>“确定”

现在您可以保存新工作簿并删除旧工作簿:)

**跟进**

> > > 不幸的是，这不起作用 - 我们在其他工作表中有一些非常冗长的公式存在这个确切的问题，Excel 只会复制它们的前 255 个字符。此外，不会复制原始工作表中的 VBA 代码，这涉及重建受此问题影响的每个电子表格的额外步骤。

在这种情况下，试试这个代码

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet

    Application.ScreenUpdating = False
    Application.DisplayAlerts = False

    For Each ws In ThisWorkbook.Sheets
        If ws.Name <> "Sheet1" Then ws.Delete
    Next

    Application.ScreenUpdating = True
    Application.DisplayAlerts = True
End Sub 
```

![在此处输入图像描述](../Images/0fbb7eaae60a6e13a69bc96e68ad657d.png)

# sql - SQL中逗号分隔列表的行

> ID：10016472
> 
> 赞同：0
> 
> 时间：2012-04-04T17:42:12.517
> 
> 标签：sql

我有一个要求，其中我的表结构看起来像

```
ID                 Owner Id                NAME  
1                  20                      Name 1  
1                  21                      Name 2  
1                  34                      Name 3  
2                  10                      Name 4  
2                  12                      Name 5  
3                  100                     Name 6 
```

我需要一个可以给我结果的查询

```
ID                Owner ID                Name  
1                  20                     Name 1, Name2, Name 3  
2                  10                     Name4, Name5  
3                  100                    Name 6 
```

目前我们在代码隐藏中执行此操作，但理想情况下，我希望通过 SQL 执行此操作，看看这是否有助于提高性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:44:45.043

你没有提到你的 DBMS，所以我假设 PostgreSQL：

```
SELECT id, 
       min(owner_id) as lowest_id,
       string_agg(name, ', ') as name_list
FROM the_table
GROUP BY id 
```

# objective-c - 在 NSView 中以编程方式创建 NSScrollView - Cocoa

> ID：10016475
> 
> 赞同：12
> 
> 时间：2012-04-04T17:42:20.987
> 
> 标签：objective-c, cocoa, nsscrollview

我有一个 NSView 类，它负责在 nib 文件中创建的自定义视图。

现在我想将 NSScrollView 添加到自定义视图中，但我需要以编程方式而不是使用 Interface Builder（嵌入到滚动视图中）来完成。

我找到了这段代码：

```
NSView *windowContentView = [mainWindow contentView];
NSRect windowContentBounds = [windowContentView bounds];
scrollView = [[NSScrollView alloc] init];
[scrollView setBorderType:NSNoBorder];
[scrollView setHasVerticalScroller:YES];
[scrollView setBounds: windowContentBounds];
[windowContentView addSubview:scrollView]; 
```

假设我将上面的变量“mainWindow”和“scrollView”声明为 IBOutlets，我将如何将它们连接到 Interface Builder 中的正确组件？这样做有意义吗？

还是有更好的方法以编程方式添加滚动视图？

PS 我不能以通常的方式连接它们，因为我不能从 Interface Builder 创建一个 NSObject 对象，或者使用文件所有者..

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-09-26T16:27:37.247

我很难`NSScrollView`以`AutoLayout`编程方式创建，但最终让它工作。这是一个`Swift`版本。

```
// Initial scrollview
let scrollView = NSScrollView()
scrollView.translatesAutoresizingMaskIntoConstraints = false
scrollView.borderType = .noBorder
scrollView.backgroundColor = NSColor.gray
scrollView.hasVerticalScroller = true

window.contentView?.addSubview(scrollView)
window.contentView?.addConstraints(NSLayoutConstraint.constraints(withVisualFormat: "H:|[scrollView]|", options: [], metrics: nil, views: ["scrollView": scrollView]))
window.contentView?.addConstraints(NSLayoutConstraint.constraints(withVisualFormat: "V:|[scrollView]|", options: [], metrics: nil, views: ["scrollView": scrollView]))

// Initial clip view
let clipView = NSClipView()
clipView.translatesAutoresizingMaskIntoConstraints = false
scrollView.contentView = clipView
scrollView.addConstraint(NSLayoutConstraint(item: clipView, attribute: .left, relatedBy: .equal, toItem: scrollView, attribute: .left, multiplier: 1.0, constant: 0))
scrollView.addConstraint(NSLayoutConstraint(item: clipView, attribute: .top, relatedBy: .equal, toItem: scrollView, attribute: .top, multiplier: 1.0, constant: 0))
scrollView.addConstraint(NSLayoutConstraint(item: clipView, attribute: .right, relatedBy: .equal, toItem: scrollView, attribute: .right, multiplier: 1.0, constant: 0))
scrollView.addConstraint(NSLayoutConstraint(item: clipView, attribute: .bottom, relatedBy: .equal, toItem: scrollView, attribute: .bottom, multiplier: 1.0, constant: 0))

// Initial document view
let documentView = NSView()
documentView.translatesAutoresizingMaskIntoConstraints = false
scrollView.documentView = documentView
clipView.addConstraint(NSLayoutConstraint(item: clipView, attribute: .left, relatedBy: .equal, toItem: documentView, attribute: .left, multiplier: 1.0, constant: 0))
clipView.addConstraint(NSLayoutConstraint(item: clipView, attribute: .top, relatedBy: .equal, toItem: documentView, attribute: .top, multiplier: 1.0, constant: 0))
clipView.addConstraint(NSLayoutConstraint(item: clipView, attribute: .right, relatedBy: .equal, toItem: documentView, attribute: .right, multiplier: 1.0, constant: 0))

// Subview1
let view1 = NSView()
view1.translatesAutoresizingMaskIntoConstraints = false
view1.wantsLayer = true
view1.layer?.backgroundColor = NSColor.red.cgColor
documentView.addSubview(view1)
documentView.addConstraints(NSLayoutConstraint.constraints(withVisualFormat: "H:|[view1]|", options: [], metrics: nil, views: ["view1": view1]))

// Subview2
let view2 = NSView()
view2.translatesAutoresizingMaskIntoConstraints = false
view2.wantsLayer = true
view2.layer?.backgroundColor = NSColor.green.cgColor
documentView.addSubview(view2)
documentView.addConstraints(NSLayoutConstraint.constraints(withVisualFormat: "H:|[view2]|", options: [], metrics: nil, views: ["view2": view2]))

// Subview3
let view3 = NSView()
view3.translatesAutoresizingMaskIntoConstraints = false
view3.wantsLayer = true
view3.layer?.backgroundColor = NSColor.blue.cgColor
documentView.addSubview(view3)
documentView.addConstraints(NSLayoutConstraint.constraints(withVisualFormat: "H:|[view3]|", options: [], metrics: nil, views: ["view3": view3]))

// Vertical autolayout
documentView.addConstraints(NSLayoutConstraint.constraints(withVisualFormat: "V:|[view1(==100)][view2(==200)][view3(==300)]", options: [], metrics: nil, views: ["view1": view1, "view2": view2, "view3": view3]))
documentView.addConstraint(NSLayoutConstraint(item: documentView, attribute: .bottom, relatedBy: .equal, toItem: view3, attribute: .bottom, multiplier: 1.0, constant: 0)) 
```

[![在此处输入图像描述](../Images/29e2ec1564f77072b73230984d8cec2e.png)](https://i.stack.imgur.com/gnoJd.gif)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-05T05:57:19.990

此代码片段应演示如何以编程方式创建 NSScrollView 并使用它来显示任何视图，无论是来自 nib 还是来自代码。在 nib 生成视图的情况下，您只需事先将 nib 文件加载到您的自定义视图中，并将您的自定义视图 (outletToCustomViewLoadedFromNib) 的出口设置为文件的所有者。

```
NSScrollView *scrollView = [[NSScrollView alloc] initWithFrame:[[mainWindow contentView] frame]];

// configure the scroll view
[scrollView setBorderType:NSNoBorder];
[scrollView setHasVerticalScroller:YES];

// embed your custom view in the scroll view
[scrollView setDocumentView:outletToCustomViewLoadedFromNib];

// set the scroll view as the content view of your window
[mainWindow setContentView:scrollView]; 
```

Apple 有一个关于该主题的指南，我不会链接到它，因为它需要 Apple Developer Connection 访问权限，并且它们的链接经常断开。它的标题是“创建和配置滚动视图”，目前可以通过使用 Google 搜索其标题来找到。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-03-18T10:23:26.500

Brian 的回答是正确的，这里是如何在 Swift 4.2`NSStackView`里面创建`NSScrollView`

见[https://github.com/onmyway133/blog/issues/173](https://github.com/onmyway133/blog/issues/173)

你可能需要翻转`NSClipView`

```
final class FlippedClipView: NSClipView {
  override var isFlipped: Bool {
    return true
  }
}

private func setup() {
  setupScrollView()
  setupStackView()
}

private func setupScrollView() {
  view.addSubview(scrollView)
  scrollView.translatesAutoresizingMaskIntoConstraints = false
  scrollView.hasVerticalScroller = true
  scrollView.drawsBackground = false

  NSLayoutConstraint.activate([
    scrollView.leftAnchor.constraint(equalTo: view.leftAnchor),
    scrollView.rightAnchor.constraint(equalTo: view.rightAnchor),
    scrollView.topAnchor.constraint(equalTo: view.topAnchor),
    scrollView.bottomAnchor.constraint(equalTo: view.bottomAnchor, constant: -30),

    scrollView.heightAnchor.constraint(equalToConstant: 400)
  ])

  let clipView = FlippedClipView()
  clipView.drawsBackground = false
  scrollView.contentView = clipView
  clipView.translatesAutoresizingMaskIntoConstraints = false
  NSLayoutConstraint.activate([
    clipView.leftAnchor.constraint(equalTo: scrollView.leftAnchor),
    clipView.rightAnchor.constraint(equalTo: scrollView.rightAnchor),
    clipView.topAnchor.constraint(equalTo: scrollView.topAnchor),
    clipView.bottomAnchor.constraint(equalTo: scrollView.bottomAnchor)
  ]
  scrollView.documentView = stackView

  stackView.translatesAutoresizingMaskIntoConstraints = false
  NSLayoutConstraint.activate([
    stackView.leftAnchor.constraint(equalTo: clipView.leftAnchor),
    stackView.topAnchor.constraint(equalTo: clipView.topAnchor),
    stackView.rightAnchor.constraint(equalTo: clipView.rightAnchor),
    // NOTE: No need for bottomAnchor
  ])
}

private func setupStackView() {
  stackView.orientation = .vertical
  stackView.edgeInsets = NSEdgeInsets(top: 16, left: 16, bottom: 16, right: 16)

  NSLayoutConstraint.activate([
    myRowView.heightAnchor.constraint(equalToConstant: 40)
  ])

  myRowView.onPress = { [weak self] in
    self?.doSomething()
  }

  stackView.addArrangedSubview(myRowView)
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-05T08:23:25.620

这是一个以`NSStackView`编程方式添加到`NSScrollView`. 可以使用以下解决方案添加任何视图，但我以 NSStackView 为例

我正在使用[SnapKit](http://snapkit.io)来保持自动布局代码简洁，但是，您可以使用锚来添加约束，而无需任何 3rd 方依赖

```
// Create NSScrollView and add it as a subview in the desired location
let scrollView = NSScrollView()
scrollView.borderType = .noBorder
scrollView.verticalScrollElasticity = .none
addSubview(scrollView)
scrollView.snp.makeConstraints { $0.edges.equalToSuperview() } //match edges to superview

// Assign an instance of NSClipView to `contentView` property of `NSScrollView`
let clipView = NSClipView()
scrollView.contentView = clipView
clipView.snp.makeConstraints { $0.edges.equalTo(scrollView) }

// Assign whatever view you want to put inside scroll view to the `documentView` property.
// Also note I have added just 3 constraints; top bottom and left. That way stackview can freely expand on the right
scrollView.documentView = stackView
stackView.snp.makeConstraints { $0.top.bottom.left.equalTo(clipView) } 
```

请注意，我`translatesAutoresizingMaskIntoConstraints`在添加子视图后没有使用，因为 SnapKit 在内部处理它，但如果您使用锚添加约束，那么`translatesAutoresizingMaskIntoConstraints`对于以编程方式添加的所有子视图，确保设置为 false。

# ruby - Vagrant File Chef 属性

> ID：10016476
> 
> 赞同：16
> 
> 时间：2012-04-04T17:42:21.690
> 
> 标签：ruby, chef-infra, vagrant

我正在尝试将我的 Vagrant 文件配置为具有一些厨师属性，但我一定做错了，因为厨师食谱使用的是默认值而不是我试图设置的属性。这是我的 vagrant 文件的配置部分：

```
config.vm.provision :chef_solo do |chef|
    chef.json = {
      :mysql => {
        :server_root_password => 'password'
      },
      :nodejs => {
        :version => '0.6.14',
        :dir => '/usr/local',
        :npm => '1.1.13'
      }
    }
    chef.cookbooks_path = "config/env/cookbooks"
    chef.add_recipe "apt"
    chef.add_recipe "mongodb::10gen_repo"
    chef.add_recipe "mongodb"
    chef.add_recipe "mysql::client"
    chef.add_recipe "mysql::server"
    chef.add_recipe "nodejs"
    chef.add_recipe "nodejs::npm"
    #chef.add_recipe "mymc_service"

end 
```

我的 Ruby 是错误的还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-11T15:40:42.197

我是 Vagrant、Ruby 和 Chef 的新手，但这对我有用：

```
config.vm.provision :chef_solo do |chef|
    chef.json = {
        "mysql" => {
            "server_root_password" => "password"
        }
    }
    chef.add_recipe "mysql" # etc
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T18:29:04.477

我最近遇到了同样的问题。虽然迈克的回答并没有解决我的问题，可能是由于较新的 Vagrant/Chef 版本，但它为我指明了正确的方向。以下是我必须为 MySQL 服务器工作所做的事情：

```
config.vm.provision :chef_solo do |chef|
    chef.json = {
        :mysql => {
            :server_root_password => "password",
            :server_repl_password => "password",
            :server_debian_password => "password"
        }
    }
    chef.add_recipe "mysql::server"
end 
```

# php - 双重编码php多维数组以发送到javascript

> ID：10016478
> 
> 赞同：0
> 
> 时间：2012-04-04T17:42:26.453
> 
> 标签：php, javascript, json, multidimensional-array

这不是一个问题，因为我已经解决了这个问题，但我坚持修复，我想知道为什么当你在 ajax 调用中将它返回到 javascript 时，你需要在 php 中加倍 json_encode 数组例子。

我的阵列

```
$jsonData = array('foo', 'bar');
$jsonData['catOne'][] = array('foo two', 'bar two'); 
```

PHP

```
return json_encode(json_encode($jsonData)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:45:45.373

你不需要。`json_encode`遍历最深的元素，json 将被完美编码：

```
$arr = array(
    1 => array(5,6,7),
    2 => array(4,3,2),
);

var_dump(json_encode($arr)); 
```

输出是：

```
string(25) "{"1":[5,6,7],"2":[4,3,2]}" 
```

如果你试试：

```
var_dump(json_encode(json_encode($arr))); 
```

输出将是：

```
string(31) ""{\"1\":[5,6,7],\"2\":[4,3,2]}"" 
```

看到不同？

# c# - MVC 3，防止人们通过 URL 浏览服务器

> ID：10016479
> 
> 赞同：2
> 
> 时间：2012-04-04T17:42:37.883
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, web-config

我今天刚刚用我的新服务器尝试了一些东西，我发现我在 MVC 应用程序中所做的事情有一个很大的缺陷。

所以应用程序中发生的事情是：人们可以访问页面并登录，当人们登录时，他们可以将文件上传到服务器上自己的文件夹中。然后他们可以在需要时访问它们。但我发现的问题是：如果输入正确的 url，人们可以看到他们想要的任何文件夹。例如 ：

URl 可以命名为：testnameweb.com/Upload/testUserName/testfilename.png 在这种情况下输入 url，可以看到 testfilename.png 文件。但是，如果同一个人进入：testnameweb.com/Upload/

他们可以查看任何人员文件夹并以任何他们想要的方式浏览服务器。

知道如何防止这种情况吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T17:47:05.027

第一步是将这些文件放入不可公开访问的文件夹中。例如`App_Data`. 或者完全在应用程序根目录之外的文件夹。然后，您可以将文件组织到每个用户的文件夹中。所以每个用户都有自己的子文件夹。然后您可以编写一个控制器操作，您将只将文件名传递给该操作，并且基于当前经过身份验证的用户将提供正确的文件。

```
[Authorize]
public ActionResult File(string filename)
{
    string username = User.Identity.Name;
    // now that you know the currently connected username and the filename
    // go and find the corresponding file and stream it as a result
    ...
} 
```

并提供一个链接，以便当前连接的用户可以浏览文件：

```
@Html.ActionLink("Open foo.txt", "file", new { filename = "foo.txt" }) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T17:47:46.820

假设您有一个将 URL 转换为文件名的 UploadController，请在显示之前验证登录用户是否有权查看该控制器中的文件。

# asp.net - 为什么 GetHostByAddress 仅对 Windows 7 客户端会失败？

> ID：10016481
> 
> 赞同：0
> 
> 时间：2012-04-04T17:42:54.887
> 
> 标签：asp.net, .net-3.5

在使用 System.Net.GetHostByAddress 方法的 Web 应用程序中，我们遇到了返回错误主机名的方法的问题。

问题是，给定一个 IP 地址，它总是返回一个不正确的主机名，仅适用于 Windows 7 客户端。运行 Windows XP 的系统正常返回其主机名。

我们使用的代码如下所示：

```
host = System.Net.Dns.GetHostByAddress(GetIPv4Address)
strComputerName = host.HostName 
```

GetIPv4Address 是访问 Web 应用程序的地址。但是，我们也尝试过直接对 IP 地址进行硬编码，结果相同：

```
host = System.Net.Dns.GetHostByAddress("192.168.1.1")
strComputerName = host.HostName 
```

最后一个问题是，对于任何给定的 IP 地址，GetHostByAddress 大多数时间都返回相同的（不正确的）主机名。但是，每隔一段时间它就会抛出一个 SocketException: No such host is known。

更新：

*   [根据API 文档](http://msdn.microsoft.com/en-us/library/ms143998%28v=vs.85%29.aspx)的评论建议，我们从 GetHostEntry 切换到 GetHostByAddress 。

*   GetHostEntry 也返回不正确的结果。

*   进一步调查显示，nslookup 返回的结果与我们从 GetHost* 获得的结果相似。所以它可能不是 .NET 问题。我们正在联系我们的网络管理员，看看他们是否可以解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T23:58:08.097

GetHostByAddress 已弃用。这是我的做法：

```
string ComputerName;
try
{
    ComputerName = System.Net.Dns.GetHostEntry(IPAddress).HostName;
}
catch (Exception e)
{
    ComputerName = "Unknown";
} 
```

这适用于我的 Windows 7 客户端。我还没有尝试过GetHostByAddress，所以ymmv。

# android - 如何在线性布局中以编程方式定位视图/布局

> ID：10016490
> 
> 赞同：0
> 
> 时间：2012-04-04T17:43:33.143
> 
> 标签：android

美好的一天，我有一个要求，我需要根据发送的意图将布局（实际上是自定义 Action_bar）包含到已创建的布局（在 xml 中完成）中。即，如果意图 A 发送，则包括布局。如果意图 B 发送，则不要发送。

我已经成功地添加了可选布局，这样做：

```
layout = (LinearLayout)findViewById(R.id.ad_linearlayout_id);

                LayoutInflater inflater = (LayoutInflater)getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                View view = inflater.inflate(R.layout.actionbar_layout, null, true);  //
                layout.addView(view); 
```

但问题是，我如何使它成为布局中的第一个视图？.. 请任何帮助将一如既往地受到高度赞赏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:55:13.483

您可以使用索引添加视图。例如，第一个视图的索引为 0。

请参阅[文档](http://developer.android.com/reference/android/view/ViewGroup.html#addView%28android.view.View,%20int%29)。

# javascript - 为什么我的 indexOf 语句会产生错误

> ID：10016492
> 
> 赞同：2
> 
> 时间：2012-04-04T17:43:35.420
> 
> 标签：javascript

我正在尝试使用 .indexOf 来确定数组是否包含字符串。有些东西导致错误，但我不知道是什么。我确信这是一件**非常**简单的事情，但我不懂语言，所以看不到它。怎么了？

```
//this code creates an error in IE
var myMines=new Array();
var newMine="22";
var myVar = myMines.indexOf(newMine);   //when I comment out this line, the page does not generate an error 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:47:07.357

在某些现代浏览器中添加 indexOf 之前，它专门用于在一个字符串中搜索另一个字符串并返回起始索引。您正在尝试在空数组上使用此函数，我猜是在不支持数组的 indexOf 函数的浏览器中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T17:49:05.990

您是否偶然使用 IE 8（或更低版本）？ `Array.indexOf`仅适用于 IE 9+、Firefox 3+ 和 Chrome 7+。

来源： http: [//kangax.github.com/es5-compat-table/](http://kangax.github.com/es5-compat-table/)

文档`Array.indexOf`（还包括在不支持它的浏览器中实现此功能的函数）：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T17:45:52.110

您所做的就是创建一个数组，然后查看其中是否存在某些东西。

newMine 只是您尝试在空数组中查找的值。尝试先填充数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T17:47:58.637

你所做的基本上是：

*   创建一个数组；
*   创建一个变量；
*   忘记将其添加到数组中；
*   向数组询问数组中 nou 项的位置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T17:50:44.103

我刚刚将您的代码发布到我的 Firebug 控制台（运行 Firefox 11）中并且它工作正常。由于您的数组在这里是“空的”，因此 indexOf() 只返回-1。也许您的脚本无法处理 -1 值。但是，我相信这段代码应该适用于大多数浏览器。谁知道呢，也许你刚刚在 chrome 的 javascript 实现中发现了一个 bug (^^)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T17:51:16.333

返回字符串的`IndexOf`当前索引/位置（0 base），即

```
var myMines="Hello World";
var myVar = myMines.indexOf('W');
alert(myVar); // Will alert 6 because 'W' is at the 7th position (first index is 0) so index is 6 
```

# python - 我应该导入哪个库以在 Python 中使用 create_shortcut()？

> ID：10016495
> 
> 赞同：2
> 
> 时间：2012-04-04T17:43:45.590
> 
> 标签：python, python-3.x, distutils

我正在尝试根据[http://docs.python.org/distutils/builtdist.html#the-postinstallation-script](http://docs.python.org/distutils/builtdist.html#the-postinstallation-script)在 Python 3.2 的安装后脚本中使用 create_shortcut() 函数。每次我尝试运行该函数时，我都会得到以下信息：

```
NameError: name 'create_shortcut' is not defined 
```

我觉得我错过了一个导入，但我似乎无法在任何地方找到任何关于如何让它工作的文档。

编辑我应该早点指定我的最终目标和我的环境。我正在构建一个运行以下内容的 .msi： python setup.py bdist_msi --initial-target-dir="C:\path\to\install" --install-script="install.py" install.py 文件存在在与我的 setup.py 相同的目录中。

最终目标是拥有一个 .msi 文件，该文件将应用程序安装在指定目录中，并在指定位置创建开始菜单项。如果安装程序允许用户选择创建开始菜单快捷方式或桌面快捷方式，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-11T21:56:30.927

安装后脚本将在本机 Windows 安装例程中运行。

`get_special_folder_path`函数,和不是pythonic ：例如`directory_created`，它们不能被称为关键字-参数对 - 只能在位置上。这些函数在[https://github.com/python/cpython/blob/master/PC/bdist_wininst/install.c中定义](https://github.com/python/cpython/blob/master/PC/bdist_wininst/install.c)`directory_created``create_shortcut`

用于创建快捷方式的例程充当系统接口[`IShellLink`](https://msdn.microsoft.com/en-us/library/windows/desktop/bb774950(v=vs.85).aspx)（shell32.dll 中的“lives”）的包装器，并从第 504 行开始：

```
static PyObject *CreateShortcut(PyObject *self, PyObject *args)
{... 
```

然后在第 643 行链接：

```
PyMethodDef meth[] = {
    {"create_shortcut", CreateShortcut, METH_VARARGS, NULL},
    {"get_special_folder_path", GetSpecialFolderPath, METH_VARARGS, NULL},
  ...
}; 
```

在您的本地安装中，上述 C 代码已经在可执行文件中编译：

```
C:\Python26\Lib\distutils\command\wininst-6.0.exe
C:\Python26\Lib\distutils\command\wininst-7.1.exe
C:\Python26\Lib\distutils\command\wininst-8.0.exe
C:\Python26\Lib\distutils\command\wininst-9.0.exe
C:\Python26\Lib\distutils\command\wininst-9.0-amd64.exe 
```

所以，回答：没有 python 库来导入函数 create_shortcut()，它只能在 Windows 安装后脚本中按原样使用。

如果您想同时支持自动和手动安装后方案，请查看 pywin32 解决方法：

[https://github.com/mhammond/pywin32/blob/master/pywin32_postinstall.py](https://github.com/mhammond/pywin32/blob/master/pywin32_postinstall.py)第80行

```
try:
    create_shortcut
except NameError:
    # Create a function with the same signature as create_shortcut provided
    # by bdist_wininst
    def create_shortcut(path, description, filename,
                        arguments="", workdir="", iconpath="", iconindex=0):
        import pythoncom
        from win32com.shell import shell, shellcon

        ilink = pythoncom.CoCreateInstance(shell.CLSID_ShellLink, None,
                                           pythoncom.CLSCTX_INPROC_SERVER,
                                           shell.IID_IShellLink)
        ilink.SetPath(path)
        ilink.SetDescription(description)
        if arguments:
            ilink.SetArguments(arguments)
        if workdir:
            ilink.SetWorkingDirectory(workdir)
        if iconpath or iconindex:
            ilink.SetIconLocation(iconpath, iconindex)
        # now save it.
        ipf = ilink.QueryInterface(pythoncom.IID_IPersistFile)
        ipf.Save(filename, 0) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-04T18:16:55.387

正如文档所说：

> 从 Python 2.3 开始，**可以使用 --install-script 选项指定安装后脚本**。必须指定脚本的基本名称，并且**脚本文件名也必须列在 setup 函数的 scripts 参数中**。

这些是仅限 Windows 的选项，您需要在构建模块的可执行安装程序时使用它。尝试：

```
python setup.py bdist_wininst --help
python setup.py bdist_wininst --install-script postinst.py --pre-install-script preinst.py 
```

该文件需要进入 setup.py 文件的“脚本”部分。

> 在此上下文中特别有用的一些功能可作为安装脚本中的**附加内置功能使用。**

这意味着您不必导入任何模块。

# php - Magento：管理表单操作不正确

> ID：10016498
> 
> 赞同：0
> 
> 时间：2012-04-04T17:43:59.163
> 
> 标签：php, zend-framework, magento

我想向编辑客户页面添加一个新表单，到目前为止一切顺利，使用重写 customer_edit_tabs 我能够将一个选项卡和我的管理表单添加到页面。代码看起来像这样。

```
protected function _beforeToHtml()
{

        $this->addTab('extraoptions', array(
                'label'     => Mage::helper('customer')->__('Extra options'),
                'class'     => 'ajax',
                'url'       => $this->getUrl('module/adminhtml_tabs/info', array('_current' => true)),
        )); 
```

这会正确添加我的标签。从那里标签控制器上的链接：

```
 public function infoAction()
{
    $this->_init();
    $this->getResponse()->setBody(
    $this->getLayout()->createBlock('module/adminhtml_tabs_edit')->toHtml()
    );;
} 
```

这链接到我在 Block/Adminhtml/Tabs/Edit.php 上的表单容器

```
class Namespace_Module_Block_Adminhtml_Tabs_Edit extends Mage_Adminhtml_Block_Widget_Form_Container{public function __construct()
{
    parent::__construct();

    $this->_objectId = 'id';
    $this->_mode = 'edit';
    $this->_blockGroup = 'module';
    $this->_controller = 'adminhtml_tabs';
    $this->_updateButton('save', 'label', Mage::helper('module')->__('Save'));

}

public function getHeaderText()
{
    return Mage::helper('module')->__('Extra Options');
} 
```

}

我的块/Adminhtml/Tabs/Edit/Form.php

```
class Namespace_Module_Block_Adminhtml_Tabs_Edit_Form extends Mage_Adminhtml_Block_Widget_Form
    {
public function __construct()
{
    parent::__construct();
}
protected function _prepareForm()
{
    $form = new Varien_Data_Form(array(
'id' => 'info_form',
                       'action' => $this->getUrl('module/adminhtml_tabs/save', array('id' => $this->getRequest()->getParam('id'))),
                       'method' => 'post',
                       'enctype' => 'multipart/form-data'
                               )
    ); 

    $fieldset = $form->addFieldset('extra_options', array('legend' => Mage::helper('module')->__('Extra Options Fieldset')));

    $fieldset2->addField('extra', 'text', array(
            'name'      => 'zip',
            'title'     => Mage::helper('module')->__('extra'),
            'label'     => Mage::helper('module')->__('extra data'),
            'maxlength' => '250',
            'required'  => false,
));
    $form->setUseContainer(true);

    }
protected function _prepareLayout()
{
    return parent::_prepareLayout();
} 
```

一切都很好，我在默认的保存客户按钮下方有一个新按钮，但是这个保存按钮不会更新操作，所以如果我点击它，它会转到默认的客户/编辑/保存操作，它不会告诉我不存在它应该存在的方法。我的猜测是容器有问题，但我尝试了三个几乎没有区别的教程，但无济于事，希望有人能提供帮助，甚至可能有人会发现我的代码有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:13:30.803

在这行代码中：

```
'action' => $this->getUrl('module/adminhtml_tabs/save') 
```

您告诉 Magento 在该文件中查找名为 module 的模块、别名为 adminhtml_tabs 的控制器和 saveAction() 方法。

当需要执行保存时，您需要确定要将用户发送到哪里，然后将其放置在那里（例如，到您的控制器的路由-> saveAction() 方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T17:48:39.737

我决定创建一个新按钮以使用自定义操作进行保存。在容器上：

```
$this->_addButton('save', array(
        'label'     => Mage::helper('adminhtml')->__('Save Extras'),
        'onclick'   => 'document.myform.submit();',
        'class'     => 'save',
    ),-1,5); 
```

这成功了。

# python - 带有烧瓶和memcached的nginx返回一些乱码

> ID：10016499
> 
> 赞同：6
> 
> 时间：2012-04-04T17:44:09.147
> 
> 标签：python, caching, nginx, memcached, flask

我正在尝试使用 memcached 缓存 Python/flask 响应。然后我想使用 nginx 提供缓存。我正在使用看起来像这样的烧瓶代码：

```
from flask import Flask, render_template
from werkzeug.contrib.cache import MemcachedCache

app = Flask(__name__)

cache = MemcachedCache(['127.0.0.1:11211'])

@app.route('/')
def index():
    index = cache.get('request:/')
    if index == None:
        index = render_template('index.html')
        cache.set('request:/', index, timeout=5 * 60)
    return index

if __name__ == "__main__":
    app.run() 
```

和一个看起来像这样的 nginx 站点配置：

```
server {
    listen 80;

    location / {
        set $memcached_key "request:$request_uri";
        memcached_pass 127.0.0.1:11211;

        error_page 404 405 502 = @cache_miss;
    }

    location @cache_miss {
        uwsgi_pass   unix:///tmp/uwsgi.sock;
        include      uwsgi_params;

        error_page  404  /404.html;
    }
} 
```

但是，当它从缓存中提取时，html 代码以 V 为前缀，包含 \u000a 字符（换行符）和乱码的本地字符，并以“p1”为后缀。像这样：

```
V<!doctype html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\u000a<head>\u000a  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />\u000a  <meta http-equiv="content-language" content="no">\u000a\u000a  <title>

[...]

\u000a\u000a</body>\u000a</html>
p1
. 
```

尽管 Content-Type 是“text/html; charset=utf-8”。据说 V [...] p1 。事情可能与分块传输编码有关，这是响应标头中不存在的标志。我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T13:59:40.530

耶，我修好了！在我更改分块之前，nginx 配置是正确的，但是 python/flask 代码应该是：

```
@app.route('/')
def index():
    rv = cache.get('request:/')
    if rv == None:
        rv = render_template('index.html')
        cachable = make_response(rv).data
        cache.set('request:/', cachable, timeout=5 * 60)
    return rv 
```

也就是说，我应该只缓存数据，而且只能这样做，afaik，如果我先做 make_response

# java - Java 使用多个参数对对象进行排序

> ID：10016506
> 
> 赞同：4
> 
> 时间：2012-04-04T17:44:26.947
> 
> 标签：java, sorting, object

我最近一直在努力更好地理解排序算法及其与不同类型输入的关系。目前，我正在开发一个学生管理程序，其中每个学生都有三个参数：姓氏、GPA 和用户 ID（字符串、双精度、整数）。它们每个都存储在具有这三个参数的 Student 类中，并且有 DOZENS 学生（该程序的一个关键特性是输入、删除和更新学生）。

我的问题是：使用主要的排序算法（合并排序、快速排序等），按每个参数对我的学生列表进行排序的最佳方法是什么？例如，执行合并排序以按 GPA 对列表进行排序的最佳方法是什么？或者使用快速排序按姓氏对列表进行排序？

基本上我的问题归结为......如果这些对象没有三个参数，我可以对它们进行排序（编写一个合并排序来对 100 个数字进行排序对我来说非常容易）。如何管理其他两个参数并确保它们在排序后可访问？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T17:49:20.413

在 Java 中完成此操作的方式是使用不同的[Comparators](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)。然后你说：

```
Collections.sort(list, new NameComparator()); 
```

或者

```
Collections.sort(list, new GpaComparator()); 
```

这些比较器使用不同的字段来定义两个元素之间的顺序。

例如，名称比较器可能是：

```
class NameComparator implements Comparator< Student> {
    @Override public int compare(Student left, Student right) {
        return left.getName().compareTo(right.getName());
    }
} 
```

而 GpaComparator 可能是

```
class GpaComparator implements Comparator< Student> {
    @Override public int compare(Student left, Student right) {
        if (left.getGpa() < right.getGpa()) {
            return -1;
       } else if (left.getGpa() > right.getGpa()) {
            return 1;
       } else {
           return 0;
     }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:48:57.700

我建议像这样在你的类中实现`Comparable`接口`Student`

```
public class Student implements Comparable {
   public int compareType; //you can make this an enum if you want
   ...

   public int compareTo(Object o) {
       if(compareType == 0) 
         return gpaCompareTo(o);
       else if(compareType == 1)
         return nameCompareTo(o);

       return idCompateTo(o); 
   }

   public int gpaCompareTo(Object o) {
       //implement your gpaCompareTo
   }

   public int nameCompareTo(Object o) {
       //implement your nameCompareTo
   }

   public int idCompareTo(Object o) {
       //implement your idCompareTo
   }
} 
```

然后使用内置排序，如

```
List<Student> list = new ArrayList<Student>();
...
Collections.sort(list); 
```

或者您无法实现`Comparable`和设计自己的比较器

```
public class MyComparator implements Comparator<Student> {

   public int compare(Student o1, Student o2) {
      //implement the comparator
   }

   public boolean equals(Object o) {
      //implement the equals 
   }
} 
```

然后你可以使用其他`Collection's`排序方法

```
Collections.sort(list, MyComparator); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T17:49:10.097

执行此操作的典型方法是对任何接受 a 的类型编写通用排序算法[`Comparator`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)，然后编写不同`Comparator`的 s 以按不同字段排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T18:18:18.880

这可能是题外话，但是如果您想尝试一些很酷的东西，[JDK 8 Lambda Preview](http://jdk8.java.net/lambda/)提供了一些很酷的方法来使用[Lamda 表达式和方法引用](http://cr.openjdk.java.net/~briangoetz/lambda/lambda-state-4.html)来定义比较器。

假设我们有一个类：

```
class Jedi  {
   private final String name;
   private final int age;
   //...
} 
```

然后是它们的集合：

```
List<Jedi> jediAcademy = asList(new Jedi("Obiwan",80), new Jedi("Anakin", 30));
sort(jediAcademy, (j1, j2) -> j1.getAge() > j2.getAge() ? 1 : j1.getAge() < j2.getAge() ? -1 : 0);
System.out.println(jediAcademy); //Anakin, Obiwan 
```

或者使用方法引用，假设 Jedi 具有充当比较器的方法（相同的签名）

```
class Jedi  {
  public static int compareByAge(Jedi first, Jedi second){
     return first.age > second.age ? 1 : first.age < second.age ? -1 : 0;
  }
   //...
} 
```

可以如下使用方法引用来生成比较器：

```
List<Jedi> jediAcademy = asList(new Jedi("Obiwan",80), new Jedi("Anakin", 30));
sort(jediAcademy, Jedi::compareByAge);
System.out.println(jediAcademy);//Anakin, Obiwan 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T17:48:10.117

真的和排序数字没什么区别，只不过在这种情况下你的“数字”是你用户的三个字段，每个数字的值受每个字段的值的约束，字段的顺序决定了排序的排名。

更具体地说，您有一个包含 3 个字段的元组：`<GPA, Last Name, User ID>`，假设您要按 GPA 排序，然后是姓氏和用户 ID。

与 219 排序高于 139 的方式相同（即，即使“十”位较低，“百”位具有更高的值），类似元组的`<3.75, Jones, 5>`将在上方排序，`<3.0, Adams, 2>`因为“GPA 位”（这是更多显着）具有更高的值，即使“姓氏数字”较低（例如，琼斯“低于”亚当斯）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-30T08:08:32.510

使用多个比较器

```
class Student
{

        String lastName;
        dounle GPA;
        int userId

    static Comparator<Student> getStudentLastNameComparator() {
        return new Comparator<Student>() {

            @Override
            public int compare(Student Student1, Student Student2) {
                return Student1.getlastName().compareTo(Student2.getlastName());
            }
            // compare using Student lastName
        };
    }

    static Comparator<Student> getStudentGPAComparator() {
        return new Comparator<Student>() {

            @Override
            public int compare(Student Student1, Student Student2) {
                if(Student1.GPA < Student2.GPA)
                    return 1;
                else
                    return -1;
            }
            // compare using Student GPA
        };
    }

    static Comparator<Student> getStudentUserIdComparator() {
        return new Comparator<Student>() {

            @Override
            public int compare(Student Student1, Student Student2) {
                if(Student1.userId < Student2.userId)
                    return 1;
                else
                    return -1;
            }
            // compare using Student userId
        };
    }
} 
```

# ehcache - ehcache 可以允许使用磁盘存储进行搜索吗？

> ID：10016508
> 
> 赞同：1
> 
> 时间：2012-04-04T17:44:36.603
> 
> 标签：ehcache

我尝试使用 ehcache，但是当我尝试将数据保存在磁盘上时，ehcache 失败。给

> net.sf.ehcache.config.InvalidConfigurationException：此存储类型不支持搜索属性：net.sf.ehcache.store.DiskBackedMemoryStore。

如果我的内存容量超过了 200 Mb，那么在这种情况下我不能使用 ehache 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T01:40:44.523

ehcache 搜索 API 确实（至少目前）不适用于磁盘持久缓存。

# spring - Spring Web 服务中的 Spring 安全过滤器和身份验证

> ID：10016522
> 
> 赞同：0
> 
> 时间：2012-04-04T17:45:49.863
> 
> 标签：spring, authentication, servlets, spring-security, spring-ws

我最近能够保护我的 Web 应用程序并使用基本身份验证对用户进行身份验证。一个额外的要求是从请求参数中检查用户的 IP 地址，并且我利用了自定义身份验证详细信息源的使用和 BASIC_AUTH_FILTER 的覆盖。（见：http://stackoverflow.com/questions/9854592/accessing-httpservletrequest-during-daoauthenticationprovider-authenticate-in-sp）

现在我有一个 Spring Web 服务，它使用 SimplePasswordValidationCallbackHandler 和与上面相同的 AuthenticationManager / Provider 配置（除了具有我所有自定义过滤器逻辑的 http 命名空间配置）。我想做一个类似的活动来完全验证用户，只有在他们的 ip 地址在 Web 服务中进行身份验证时匹配。我在 SOAP 标头中传递用户名和密码，并且身份验证发生没有任何问题。如果我可以在此处为 AuthenticationDetailsS​​ource 和自定义过滤器重用我现有的配置，有什么想法。这甚至可以实现，还是我在这里完全不同？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:51:57.000

我在 web.xml 中添加了一个 RequestContext 侦听器，并在自定义 DAOProvider 中的身份验证过程中使用 RequestContextHolder 访问了 HttpServletRequest。谁有更好的解决方案，请告诉我！

# git - 强制 git 在合并时识别文件已移动

> ID：10016530
> 
> 赞同：0
> 
> 时间：2012-04-04T17:46:31.533
> 
> 标签：git

我正在开发一款基于开源项目但包含一些专有更改的软件。最近，开源项目发生了重大更新，移动了一堆文件。例如：

app/models/my_model.rb --> app/models/namespace/my_namespaced_model.rb

有很多文件被移动了，其中一些有很多变化。所以git没有合并文件，只是说旧文件已“被他们删除”并将其标记为合并冲突。问题是，如果只是少一些更改，以便 git 可以意识到文件已被移动，而不是认为它已被删除并创建了一个新文件，我认为它会轻松解决大部分更改。就目前而言，看起来我需要手动对新文件进行所有旧更改。

所以我的问题是，有什么方法可以强制 git 在无法自动找出文件时意识到文件已被移动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:16:15.863

git merge 默认使用的递归策略有一个“rename-threshold”选项，您可以更改它以提供帮助。您可能需要进行试验才能找到最佳设置。

```
git merge -X rename-threshold=70 mybranch 
```

该设置与 中的效果相同，`git diff -M`并在`git diff`手册页中进行了描述。

# jquery - jQuery Ajax 表单提交无视“成功”功能，重新加载页面

> ID：10016532
> 
> 赞同：0
> 
> 时间：2012-04-04T17:46:37.787
> 
> 标签：jquery, ajax, forms

我正在使用 jQuery .ajax 向 mySQL 数据库提交一个 html 表单。当我提交表单时（在验证所有字段之后），数据作为新记录插入到数据库中，但成功函数没有运行。

[jsFiddle](http://jsfiddle.net/rhewitt/u3C4U/)

*这一切都发生在谷歌地图信息窗口中，但我不确定这是否相关。

HTML：

```
<div id="formDiv">
    <form name="htmlForm" id="htmlForm">

    <p id="contactP">
    <label for="contact">Email:</label>
    <input type="text" name="contact" id="contact"/> <br/>
    </p>

    <p id="phoneP">
    <label for="phone">Phone:</label>
    <input type="text" name="phone" id="phone"/> <br/>
    </p>

    <p id="datepickerP">
    <label for="datepicker">Date:</label>
    <input type="text" name="date" id="datepicker"/> <br/>
    </p>

    <p id="latP">
    <label for="lat">Latitude:</label>
    <input type="text" name="lat" id="lat" class="location"/> <br/>
    </p>

    <p id="lngP">
    <label for="lng">Longitude:</label>
    <input type="text" name="lng" id="lng" class="location"/> <br/>
    </p>        

    <p id="descP">
    <label for="desc" id="dos">Description of Sighting:</label> <br/>
    <textarea name="desc" id="desc"></textarea><br/>
    </p>

    <input type="submit" class="button" id="submitBtn" value="Post Sighting!" onClick="postSighting();"/>

</div> 
```

Javascript / jQuery：

```
function postSighting() {
    // jQuery Validate
    $('#htmlForm').validate({
        rules: {
            contact: {required:true, email:true},
            phone: {required:true},
            date: {required:true, date:true},
            lat: {required:true},
            lng: {required:true},
            desc: {required:true},
        },
        messages: {
            desc: 'Please be descriptive!'
        },
        errorPlacement: function(error, element) {
            error.appendTo($('#' + element.attr('id') + 'P'));
            return false;
        };
    });

    //jQuery ajax form submit
        var contact = $('input#contact').val(),
            phone = $('input#phone').val(),
            date = $('input#datepicker').val(),
            lat = $('input#lat').val(),
            lng = $('input#lng').val(),
            desc = $('textarea#desc').val();
        var dataString = "contact=" + contact + '&phone=' + phone + "&date=" + date + "&lat=" + lat + "&lng=" + lng + "&desc=" + desc;
        $.ajax({
            type: "POST",
            url: "Includes/test.php",
            data: dataString,
            error: function(xhr, ajaxOptions, thrownError){
                alert(xhr.status);
                alert(ajaxOptions);
                alert(thrownError);
            },
            beforeSend: function() {
                return $('#htmlForm').validate().form();
            },
            success: function() {
                $('#formDiv').html('<div id="message"></div>');
                $('#message').html('<h2>Thank You!</h2>')
                    .append('<h3>Your sighting has been reported</h3>')     
                return false;
            }   
        });
        return false;  
    }; 
```

我已经警告了 jQuery ajax 错误，我得到：

警报（xhr）；=> 0

警报（抛出错误）=> 错误

[http://jsfiddle.net/rhewitt/u3C4U/](http://jsfiddle.net/rhewitt/u3C4U/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:03:22.663

试试这个而不是内联 javascript 函数：

```
$("#map_canvas").on('click', '.submitBtn', function(e){
    e.preventDefault();
    postSighting();        
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:46:35.173

jQuery 无法附加到提交按钮，因为它具有*id* submitBtn，并且您尝试附加到*类*submitBtn。

更改自：

```
$('.submitBtn').click(function(e){
    e.preventDefault();
    postSighting();        
}); 
```

到：

```
$('#submitBtn').live("click", function(e){
    e.preventDefault();
    postSighting();        
}); 
```

还要注意使用 ，[`.live()`](http://docs.jquery.com/Events/live)因为表单是[动态创建](https://stackoverflow.com/questions/1519515/jquery-access-dynamically-created-objects)的。

# javascript - 带有 jQ uery 的谷歌地图 API

> ID：10016536
> 
> 赞同：1
> 
> 时间：2012-04-04T17:46:54.637
> 
> 标签：javascript, jquery, html, google-maps

我想设计一个带有地图图标的 html 名片（该图标将显示卡片中地址的红色图钉）。地图窗口将非常小（100 X 100 像素），但单击它会打开带有固定地址的谷歌地图。是否有一个 jQuery 插件可以轻松实现这一点，或者有人会指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:02:40.463

没有必要使用 jQuery 来解决这个问题。

我相信实现这一目标的最简单方法是打开一个新窗口，并将用户发送到谷歌地图。地址可以作为 GET 参数传递。

对于小地图，您可以使用标准的[Google Maps JavaScript-API](https://developers.google.com/maps/documentation/javascript/reference)将标记放在地图上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:46:12.410

我不知道是否有任何 jquery 插件。但是你描述的应该不会太难实现。我会为此任务执行以下操作。

```
$('#my_pin').click(function(){
  1\. create a div for map, set the height and width for this div. 
     var div = document.createElement('div');
     you may want to add some event hanlder to this div so that it can be closed 

  2\. create a google map options similar to 
     var opts = {
       center: new google.maps.LatLng(100,100),
       zoom: 5,
       mapTypeId: google.maps.mapTypeId.ROADMAP
     }
  3\. create your map object base on the newly created div and options
     var map = new google.maps.Map(div,opts )

  4\. attach the new div to your body or whatever parent element
     $(div).appendTo($('body').get(0));

}); 
```

# matlab - 运行程序“try.m”时出现 MATLAB 错误

> ID：10016537
> 
> 赞同：3
> 
> 时间：2012-04-04T17:46:55.373
> 
> 标签：matlab

在编辑器中创建 MATLAB（2010a 版）文件后，出现以下错误：

“MATLAB 无法运行此文件，因为 \toolbox\matlab\lang\try.m 将其隐藏在 MATLAB 路径中”

此外，我还可以选择“更改文件夹”、“添加路径”。即使在单击并使用此选项后，我仍然会收到相同的消息。

我查了matlab手册并试图改变路径。我还检查了我的路径变量，我存储我的 matlab 文件的地方已经存在于路径变量中。请帮助纠正错误。我的文件的名称是 try.m 'try.m' 中的代码只是：

```
 clear all; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T18:08:11.120

TRY 是 MATLAB 中的保留字，因此不应将其用作文件名。将“try.m”重命名为其他名称，您应该没问题。您可以使用编辑器菜单中的“另存为”并键入不同的名称来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:50:10.673

您在文件编辑器中的文件是否也命名为`lang.m`? 因为 Matlab 有时无法解决当前目录中的 m-files 和表示内置函数的 m-files 之间的范围差异。它似乎没有告诉您您的文件不在路径中；相反，它似乎是说它无法将您的文件与`\toolbox\matlab\lang`.

您能否提供有关您的文件是什么的更多详细信息，例如发布代码并包括工作目录名称？

# iphone - UIWebView loadHTMLString 用于播放视频文件

> ID：10016539
> 
> 赞同：0
> 
> 时间：2012-04-04T17:47:00.923
> 
> 标签：iphone, ios, ipad, uiwebview, youtube

LoadHtmlString UIWebView 不工作。我想播放嵌入你管的视频。我尝试过嵌入 HTML 字符串。但有些似乎坏了我得到白屏。我试过以下

```
NSString* html = @"<embed id=\"yt\" src=\"http://www.youtube.com/v/6eK-W32IME0?fs=1&hl=en_US&enablejsapi=1\" type=\"application/x-shockwave-flash\" width=\"330\" height=\"200\"></embed>";

NSString*html = @"<iframe class=\"youtube-player\" type=\"text/html\" width=\"320\" height=\"460\" src=\"http://www.youtube.com/watch?v=oEn9g4pNW9Y&feature=youtu.be\" frameborder=\"0\"> </iframe>";

[videoView loadHTMLString:html baseURL:nil]; 
```

但没有获得成功。谁能帮我 ？我在这里做错了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:53:14.337

请记住，播放此类 youtube 视频`UIWebView`将始终在模拟器上显示白屏。您需要在设备中对其进行测试才能知道它是否真的有效。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:58:33.657

试试这个代码：

```
 NSString *html = @"\
  <html><head>\
  <style type=\"text/css\">\
  body {\
  background-color: transparent;\
  color: white;\
  }\
  </style>\
  </head><body style=\"margin:0\">\
  <embed id=\"yt\" src=\"http://www.youtube.com/v/6eK-W32IME0?fs=1&hl=en_US&enablejsapi=1\" type=\"application/x-shockwave-flash\" \
  width=\"320\" height=\"200\"></embed>\
  </body></html>";

  // Load the html into the webview
  [videoView loadHTMLString:html baseURL:nil]; 
```

另外，我发现如果您在美国 iOS 上进行测试，“ **youtu.be** ”将无法正常工作。它需要本地化。

麦克风

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:50:36.647

尝试

```
- (void)embedYouTube:(NSString*)urls frame:(CGRect)frame { 

    urls=[urls stringByAppendingString:@"&autoplay=1"];
    NSString *htmlString =[NSString stringWithFormat: @"<html><head> <meta name = \"viewport\" content = \"initial-scale = 1.0, user-scalable = no, width = 212\"/></head> <body style=\"background:#F00;margin-top:0px;margin-left:0px\"><div><object width=\"212\" height=\"212\"><param name=\"movie\" value=\"%@\">",urls];

    NSString *htm2=[NSString stringWithFormat:@"</param><param name=\"wmode\" value=\"transparent\"></param>    <embed src=\"%@\"type=\"application/x-shockwave-flash\" wmode=\"transparent\" width=\"212\" height=\"212\"></embed>    </object></div></body></html>",urls];
//    NSString* embedHTML = @"<html><head> </head><body style=\"margin:0\"> <iframe title=\"YouTube video player\" class=\"youtube-player\" type=\"text/html\" width=\"%d\" height=\"%d\" src=\"%@\" frameborder=\"0\" allowFullScreen></iframe> </body></html>";  

    NSString* html = [NSString stringWithFormat:@"%@%@",htmlString,htm2];
    float version = [[[UIDevice currentDevice] systemVersion] floatValue];

    if(version<5.0)
    { 

        NSRange r=[urls rangeOfString:@"v="];
        NSRange ran=NSMakeRange(r.location+2, [urls length]-r.location-2);
        NSString *vid=[urls substringWithRange:ran];
    html=[NSString stringWithFormat:@"<embed id=\"yt\" src=\"http://www.youtube.com/watch?v=%@&fs=0\" type=\"application/x-shockwave-flash\" width=\"300\" height=\"300\"></embed>", vid];
    }
    //NSLog(html);
    if(webView == nil) {  
        webView = [[UIWebView alloc] initWithFrame:frame];  
        [self.view addSubview:webView];  
        [webView setDelegate:self];
    }  
    [webView loadHTMLString:html baseURL:nil];  
} 
```

希望能帮助到你

# c# - 即使在需要时也不会进行垃圾收集

> ID：10016541
> 
> 赞同：25
> 
> 时间：2012-04-04T17:47:06.243
> 
> 标签：c#, .net, memory, garbage-collection

我制作了一个 64 位 WPF 测试应用程序。在我的应用程序运行并打开任务管理器的情况下，我观​​察我的系统内存使用情况。我看到我正在使用 2GB，并且我有 6GB 可用。

在我的应用程序中，我单击添加按钮以将新的 1GB 字节数组添加到列表中。我看到我的系统内存使用量增加了 1GB。我一共点击了 6 次添加，填满了我开始时可用的 6GB 内存。

我单击“删除”按钮 6 次以从列表中删除每个数组。删除的字节数组不应被我控件中的任何其他对象引用。

当我删除时，我没有看到我的记忆下降。但这对我来说没问题，因为我知道 GC 是非确定性的。我认为 GC 将根据需要收集。

因此，现在内存看起来已满，但希望 GC 在需要时收集，我再次添加。我的电脑开始滑入和滑出磁盘抖动昏迷。为什么GC没有收集？如果那不是做的时候，那是什么时候？

作为健全性检查，我有一个强制 GC 的按钮。当我推动它时，我很快就恢复了 6GB。这不是证明我的 6 个数组没有被引用，并且如果 GC 知道/想要的话，可以收集吗？

我读过很多说我不应该调用 GC.Collect() 但如果 GC 在这种情况下不收集，我还能做什么？

```
 private ObservableCollection<byte[]> memoryChunks = new ObservableCollection<byte[]>();
    public ObservableCollection<byte[]> MemoryChunks
    {
        get { return this.memoryChunks; }
    }

    private void AddButton_Click(object sender, RoutedEventArgs e)
    {
        // Create a 1 gig chunk of memory and add it to the collection.
        // It should not be garbage collected as long as it's in the collection.

        try
        {
            byte[] chunk = new byte[1024*1024*1024];

            // Looks like I need to populate memory otherwise it doesn't show up in task manager
            for (int i = 0; i < chunk.Length; i++)
            {
                chunk[i] = 100;
            }

            this.memoryChunks.Add(chunk);                
        }
        catch (Exception ex)
        {
            MessageBox.Show(string.Format("Could not create another chunk: {0}{1}", Environment.NewLine, ex.ToString()));
        }
    }

    private void RemoveButton_Click(object sender, RoutedEventArgs e)
    {
        // By removing the chunk from the collection, 
        // I except no object has a reference to it, 
        // so it should be garbage collectable.

        if (memoryChunks.Count > 0)
        {
            memoryChunks.RemoveAt(0);
        }
    }

    private void GCButton_Click(object sender, RoutedEventArgs e)
    {
        GC.Collect();
        GC.WaitForPendingFinalizers();
    } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-04T19:12:07.170

> 作为健全性检查，我有一个强制 GC 的按钮。当我推动它时，我很快就恢复了 6GB。这不是证明我的 6 个数组没有被引用，并且如果 GC 知道/想要的话，可以收集吗？

你最好问问`When does the GC automatically collect "garbage" memory?`。在我的头顶上：

*   最常见的是，当第 0 代已满或对象分配不适合可用空间时。¹
*   通常情况下，当分配一块内存会导致GC 时`OutOfMemoryException`，会触发一次完整的 GC 以首先尝试回收可用内存。如果收集后没有足够的连续内存可用，则会抛出 OOM 异常。

开始垃圾收集时，GC 确定需要收集哪些代（0、0+1 或全部）。每一代都有一个由 GC 确定的大小（它可以随着应用程序的运行而改变）。如果只有第 0 代会超出其预算，那是唯一将收集垃圾的代。如果第 0 代幸存的对象会导致第 1 代超出其预算，那么第 1 代也将被收集并将其幸存对象提升到第 2 代（这是微软实现中的最高代）。如果也超出了第 2 代的预算，则会收集垃圾，但对象无法提升到更高的一代，因为不存在。

所以，这里有重要的信息，在最*常见*的 GC 启动方式中，只有在第 0 代和第 1 代都已满时才会收集第 2 代。此外，您需要知道超过 85,000 字节的对象不会存储在第 0、1 和 2 代的普通 GC 堆中。它实际上存储在所谓的大对象堆 (LOH) 中。LOH 中的内存仅在 FULL 收集期间（即第 2 代收集时）被释放；永远不会*只*收集第 0 代或第 1 代。

> 为什么GC没有收集？如果那不是做的时候，那是什么时候？

现在应该很明显为什么 GC 从未自动发生。您*只是*在 LOH 上创建对象（请记住，`int`类型，您使用它们的方式，是在堆栈上分配的，不必收集）。您永远不会填满第 0 代，因此永远不会发生 GC。¹

您还在 64 位模式下运行它，这意味着您不太可能遇到我上面列出的另一种情况，即当*整个应用程序*中没有足够的内存来分配某个对象时会发生集合。64 位应用程序的虚拟地址空间限制为 8TB，因此在遇到这种情况之前还需要一段时间。在此之前，您更有可能会用完物理内存和页面文件空间。

由于没有发生 GC，Windows 开始从页面文件中的可用空间为您的应用程序分配内存。

> 我读过很多说我不应该调用 GC.Collect() 但如果 GC 在这种情况下不收集，我还能做什么？

`GC.Collect()`如果您需要编写这种代码，请致电。更好的是，不要在测试之外编写这种代码。

总之，我没有对 CLR 中的自动垃圾收集主题做出公正的评价。我建议通过 msdn 博客文章阅读它（实际上非​​常有趣），或者正如已经提到的，Jeffery Richter 的优秀书籍，CLR Via C#，第 21 章。

* * *

¹我假设您了解 GC 的 .NET 实现是一个分*代*垃圾收集器。用最简单的话来说，这意味着新创建的对象位于编号较低的一代，即第 0 代。当垃圾收集运行时，发现某个代中的对象具有 GC 根（不是“垃圾”），它会被提升到下一代上来。这是一种性能改进，因为 GC 可能需要很长时间并损害性能。这个想法是，较高代的对象通常具有更长的寿命，并且在应用程序中的存在时间更长，因此它不需要像较低代那样检查该代是否存在垃圾。[您可以在这篇维基百科文章](http://en.wikipedia.org/wiki/Garbage_collection_(computer_science)#Generational_GC_.28ephemeral_GC.29)中阅读更多内容. 您会注意到它也称为*临时*GC。

²如果你不相信我，在你删除一个块之后，有一个函数可以创建一大堆随机字符串或对象（我建议不要在这个测试中使用原语数组），你会看到你达到一定的空间量，将发生完整的 GC，释放您在 LOH 中分配的内存。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T17:59:04.023

这是在 LOH（大对象堆）上进行的。这些仅在执行第 2 代收集时被清除。正如 Hans 在他的评论中所说，如果这是真实代码，您将需要更多 RAM。

对于咯咯笑，你可以打电话`GC.GetGeneration(chunk)`看看它会回来`2`。

请参阅 Jeffrey Richter 第 3 版通过 C# 编写的 CLR（第 588 页）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T18:02:02.507

对于需要分配大量数据而不是释放它的真实代码，请考虑在处理完巨大对象后手动调用 GC（ [GC.Collect 最佳实践问题）。](https://stackoverflow.com/questions/233596/best-practice-for-forcing-garbage-collection-in-c-sharp)

您还可以通过将分配分配到更小的（小于 80K）块中来将对象从 LOH 转移到普通堆。

# ios - UINavigationBar 标题如音乐应用

> ID：10016543
> 
> 赞同：3
> 
> 时间：2012-04-04T17:47:15.887
> 
> 标签：ios, uilabel, uinavigationbar

我正在尝试在 UINavigationBar 中创建一个标题，该标题类似于音乐应用程序中的标题。也就是说，它有三行，如果一行太长，就会滚动。下面的代码有几个问题。1）如果一行太长，它将中断到下一行。因此，如果第 2 行太长，它会溢出到第 3 行，并且根本不会显示第三行。此外，无法更改行高，这不适合 UINavigationBar。

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 480, 44)];
label.backgroundColor = [UIColor clearColor];
label.numberOfLines = 3;
label.font = [UIFont boldSystemFontOfSize: 12.0f];
label.shadowColor = [UIColor colorWithWhite:0.0 alpha:0.5];
label.textAlignment = UITextAlignmentLeft;
label.textColor = [UIColor whiteColor];
NSString *songData;
songData = [[songList objectAtIndex:currentIndex] artistName];
songData = [songData stringByAppendingString:@"\n"];
songData = [songData stringByAppendingString: [[songList objectAtIndex:currentIndex] songName]];
songData = [songData stringByAppendingString:@"\n"];
songData = [songData stringByAppendingString: [[songList objectAtIndex:currentIndex] albumName]];
label.text = songData;
self.navigationItem.titleView = label; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T07:07:22.843

你试过[MarqueeLabel](https://github.com/cbpowell/MarqueeLabel)吗？这是很不错的 ：）

> MarqueeLabel 是一个 UILabel 子类，当标签的文本超出可用宽度时添加滚动选取框效果。标签滚动方向和速度/速率也可以指定。所有标准的 UILabel 属性（有意义的地方）都可以在 MarqueeLabel 中使用，它的行为就像 UILabel。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:34:00.967

我正在尝试做类似的事情，虽然 Mangesh 的回答解决了一半的问题（滚动），但我会尽力帮助解决另一半问题。为了适应多个标签，您可以创建一个新视图并用多个标签填充它，以防止出现线条相互重叠的问题。如果您只是在 titleView 中添加一些内容，那么有很多帖子和教程使导航栏的自定义变得比需要的复杂得多。这就是我所做的：

1.  使用 xib 创建新的视图控制器。
2.  删除 IB 中给出的默认视图并用另一个视图替换它。使用尺寸检查器设置其尺寸。128 x 33 是​​ titleView 可以工作的。您很可能希望将视图的背景设置为清除颜色。
3.  将一些标签拖入其中（如果您希望它看起来像 iOS 音乐应用程序，则为 3 个）并相应地调整它们的大小/颜色。
4.  将您的新视图设置为文件所有者的视图。
5.  创建新标签所需的任何 IBOutlets，并将它们附加到 IB 中的文件所有者。
6.  在您希望导航控制器使用的视图控制器的 viewDidLoad 中，初始化您的自定义视图控制器并将其视图设置为 navigationItem 的 titleView：

    TitleViewController *customTitleVC = [[TitleViewController alloc] initWithNibName:nil bundle:nil]; self.navigationItem.titleView = customTitleVC.view;

如果您使用 Mangesh 的链接，您将需要合并滚动视图并将其与他链接的库一起包含在您的自定义视图控制器中。我给出的方法已确认适用于 iOS 4.3 - 5.1。希望对某人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:50:50.393

您可以借助时间创建自己的股票代码视图。请参考下面的源代码。它将文本从一个方向移动到另一个方向。

[https://github.com/MugunthKumar/MKTickerViewDemo](https://github.com/MugunthKumar/MKTickerViewDemo)

[https://github.com/caydenliew/CLTickerView](https://github.com/caydenliew/CLTickerView)

# javascript - Chrome 图片滑块问题

> ID：10016548
> 
> 赞同：1
> 
> 时间：2012-04-04T17:47:54.527
> 
> 标签：javascript, jquery, jquery-plugins, slider, jquery-ui-slider

我正在处理这个[页面](http://simco2.siteprogression.com)当加载到谷歌浏览器上时，你只能在滑块上看到 1/9 的图像。它在刷新时或有时在初始加载时发生。它在所有其他浏览器上都显示得很好。有关如何使其完全加载的任何建议。功能如下图所示。

```
<script type="text/javascript">
        $(function(){
            $('#slides').slides({
                preload: true,
                preloadImage: 'img/loading.gif',
                play: 5000,
                pause: 4000,
                hoverPause: true
            });
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:19:40.950

在我看来，脚本正在尝试根据图像大小计算容器的高度，有时会失败，先试试这个 css

```
.slides_control{
  min-height:466px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:00:54.043

您的问题存在于具有“slides_control”类的 div 中，它似乎有一个定义为 19px 的内联高度。如果您要动态更改此高度值，一种解决方案是简单地将其从内联样式中删除。

编辑：删除它实际上不起作用，您应该将其设置为更理想的高度。当我删除它时，没有任何图像可见。您似乎对如何动态更改此 div 的高度有疑问，因为它有时似乎会失败。

编辑 2：特别是在正确渲染时，它的高度应该是 466px。

编辑 3：我还注意到您的 loading.gif 无法加载。这可能是您的插件无法正确初始化的根本原因。只是一个想法，因为我从未真正使用过这个特定的插件。

# java - 抛出异常时的 Java 最佳实践：抛出核心 Java 异常

> ID：10016550
> 
> 赞同：29
> 
> 时间：2012-04-04T17:48:02.733
> 
> 标签：java, exception, exception-handling

而不是 throwing `new Exception("Some message", maybeSomeCause)`，这意味着我的方法的所有调用者都需要捕获异常（可能包括 RuntimeExceptions），我想在发生问题时抛出更具体的异常类型。

我可以创建自己的异常类型来扩展 Exception 或其他异常类型，但我很好奇重新使用核心 Java 语言附带的一些异常是否是个好主意，例如：

*   IllegalArgumentException
*   不支持的操作异常
*   IO异常
*   其他的？

还有其他我想念的吗？我在这里找到了“核心”例外的基本列表：[http:](http://rymden.nu/exceptions.html) //rymden.nu/exceptions.html，并附有幽默的解释。

谢谢！

**编辑：**

是否有一个很好的“核心”例外列表？

**到目前为止的清单：**

*   [http://rymden.nu/exceptions.html](http://rymden.nu/exceptions.html)
*   [Java 7 异常类 API](http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-04T17:52:27.537

是的，这样做非常好。事实上，它甚至在《*Effective Java, 2nd ed》中也有过介绍。*请参阅第 248 页的第 60 项：“支持使用标准例外”

> 重用预先存在的异常有几个好处。其中最主要的是，它使您的 API 更易于学习和使用，因为它符合程序员已经熟悉的既定约定。紧随其后的是使用您的 API 的程序更易于阅读，因为它们不会被不熟悉的异常所困扰。最后（也是最不重要的），更少的异常类意味着更小的内存占用和更少的加载类的时间。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-10-04T00:33:46.387

您问题中提供的列表不能用作快速参考材料，并且开发文档中的大多数描述对我来说似乎很神秘。

我没有遇到任何最可重用的内置异常的简短列表。我已尽力在下面创建一个，但我确信它远非完美。

[github gist 链接](https://gist.github.com/7yl4r/9e3f223f2eca76104940#file-reusableexceptions-md)（或查看下面的当前内容）

# 潜在可重用的内置异常列表

按估计效用组织

## IllegalArgumentException

抛出以指示方法已传递了非法或不适当的参数。

## IndexOutOfBoundsException

抛出以指示某种索引（例如数组、字符串或向量）超出范围。

## 算术异常

当请求的数学运算没有意义或不可能时抛出。示例：`int x = 1/0`;

## 非法状态异常

应用程序未处于请求操作的适当状态。示例：尝试在加载或创建文件之前保存。

## 数据格式异常

当您收到格式不正确的数据时抛出这个。例子：`MyClass.applyJSONString("{non:sense,all,garbled=definitely.not;json{{{")`

## 超时异常

如果某件事花费了太长时间并且您放弃了，请抛出这个。

## 键选择器异常

我认为如果您尝试使用密钥查找对象但未找到该对象或该密钥无效，则抛出此内容是有意义的，但我并不真正了解其上的[开发文档](http://docs.oracle.com/javase/6/docs/api/javax/xml/crypto/KeySelectorException.html)。

例如：`myDataStructure.get("lookup_key");`when`lookup_key`不在数据结构中。

## IO异常

读/写有问题？抛出这个异常。

## 脚本异常

运行某种形式的脚本并发现它有问题（不是 I/O 或解析）？抛出这个异常。

## 一般安全异常

如果您遇到与安全相关的问题，请抛出此问题。

## 运行时异常

将此用于一些不适合任何其他类别的运行时错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-09T20:28:39.960

大多数核心异常都过于特殊而无法直接使用，除非您要复制核心库中的现有功能。例如，您可能永远不需要创建 ; 的实例`UnknownHostException`。如果主机解析失败，您调用的`InetAddress`or`SocketFactory`方法将已经创建并抛出异常。

我发现通常可用的唯一例外是`IOException`, `IllegalArgumentException`,`IllegalStateException`和`UnsupportedOperationException`.

`IOException`- 接口、网络和硬盘访问的所有问题都属于此范围。如果您正在编写代码来访问外部数据或硬件，那么您应该使用它。例如，如果您正在实现一个 API 来访问某种类型的网络设备，您可以创建一个`MyDeviceException`子类，以便在设备返回错误状态或发生一些奇怪的事情时抛出。在某些情况下，您希望`IOException`从一个或多个低级库调用中捕获一个并`IOException`使用更高级别的消息将其包装在另一个中，例如连接性检查抛出由“请求”引起的“设备不可用”异常超时”异常。

`IllegalArgumentException`- 任何参数检查都应该抛出这个。例如，大小参数的负整数或意外的`null`. 这是一个未经检查的异常，但我建议无论如何都要记录它以使方法的前提条件更加清晰。您可以在核心库中找到很多示例。

`IllegalStateException`- 当方法参数有效，但方法所需的某些内部数据或功能不可用，并且没有更合适的检查异常（如`IOException`）时，您可以使用它。通常最好设计一些东西，这样就没有必要了。

`UnsupportedOperationException`- 如果你创建了某个东西的子类，并且其中一个超类方法在概念上对其无效，请覆盖它并抛出其中一个。Guava 将其用于其[不可变集合类](https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableCollection.html)，因为 Java 的集合接口并非旨在支持不可变性。这往往是超类中设计不良的标志。如果什么都不做或返回 null/empty 将是适当且不足为奇的结果，请不要使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T17:51:59.377

`Exception`当类合理地描述导致抛出异常的场景时，重用类绝对是有意义的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T17:52:45.820

如果您的代码的用户可能需要对两个不同的异常执行不同的操作，那么这些应该是不同的异常类型。也就是说，JDK 异常涵盖了大多数“程序员错误”异常——`IllegalArgumentException`例如，如果抛出 an，则表示编程错误，而不是应该在运行时处理的事情。

# model-view-controller - Appharbor JustOneDb MVC 示例链接已损坏

> ID：10016551
> 
> 赞同：1
> 
> 时间：2012-04-04T17:48:05.900
> 
> 标签：model-view-controller, appharbor

有谁知道或知道 appharbor JustOneDb MVC 示例在哪里？他们提供的链接似乎已损坏。

他们写的：可以在这里找到一个示例 MVC 应用程序：

[https://github.com/appharbor/JustOneDB-Sample-MVC-Application](https://github.com/appharbor/JustOneDB-Sample-MVC-Application)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:43:26.597

感谢您提醒我们注意此错误，我已更新文档。示例应用程序可以在这里找到：[https ://github.com/appharbor/PostgreSQL-Sample-MVC-Application](https://github.com/appharbor/PostgreSQL-Sample-MVC-Application)

# c# - 级联下拉列表 MVC 3 C#

> ID：10016560
> 
> 赞同：4
> 
> 时间：2012-04-04T17:48:35.483
> 
> 标签：c#, asp.net-mvc

我创建了两个下拉列表，我想做的是让它们级联。这样第二个依赖于第一个。原因是因为我的数据库是这样布局的

```
****Car_iD      Car_Name            Car_drive** 
      1           Honda             2 wheel drive
      2           Acura             4wheel drive        
      3           Toyota            2 wheel drive
      4           Honda             4wheelDrive 
```

如您所见，我有两个相同的 Car_Name，但 Car_drive 不同。因此，当用户单击第一个下拉列表时，他们将看到 Honda、Acura、Toyota……但如果他们选择 Honda，第二个下拉框会显示 2wheeldrive 和 4wheeldrive。

我的控制器看起来像这样：

```
 public ActionResult Home()
  {
  ViewData["Car_Name"] = new SelectList(_context.Cars.Select(a => a.Car_Name).Distinct());
   ViewData["Car_drive"] = new SelectList(_context.Cars.Select(a => a.Car_drive).Distinct());
  } 
```

我的视图看起来像这样

```
 Choose an Car
               <label for= "Car_Names"></label>
                <%= Html.DropDownList("Car_Name" )%>  

               <label for= "Application_Names"></label>
                <%= Html.DropDownList("Car_drive")%>    
                <input type = "submit" value ="Update" /> 
                 <% using(Html.BeginForm("Home", "Home")) { %>  
                <%}%> 
```

我已经阅读了很多教程，但没有什么能真正接近。我接近 MVC Awesome 的东西，但我一直收到错误说 SelectableItem 缺少引用。任何有关实现此功能的帮助都会很棒。

***更新*** 我已将此添加到我的控制器

```
 public ActionResult CarNameChange(string Car_Name)
    {
        var car_drive = from env in _context.Cars
                              where env.Car_Name == Car_Name
                              select car_drive;
        return Json(ViewData["Car_Drive"] = car_drive); 
    } 
```

现在需要一些帮助来编写脚本以从控制器获取此信息。

```
 <script type = "text/javascript">
   $('#Car_Names').change(function(){
      var selectedName = $(this).val();
       $getJson('@Url.Action(" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T20:01:38.827

检查： http: [//blogs.msdn.com/b/rickandy/archive/2012/01/09/cascasding-dropdownlist-in-asp-net-mvc.aspx](http://blogs.msdn.com/b/rickandy/archive/2012/01/09/cascasding-dropdownlist-in-asp-net-mvc.aspx)和[http://msprogrammer.serviciipeweb.ro/2011/ 02/13/asp-net-mvc-jquery-and-razor-cascading-dropdown-retrieving-partial-views-json-send-objects-handling-errors/](http://msprogrammer.serviciipeweb.ro/2011/02/13/asp-net-mvc-jquery-and-razor-cascading-dropdown-retrieving-partial-views-json-send-objects-handling-errors/)你不需要其他任何东西。这两个项目都有一个演示可供下载以检查代码。

问候

**编辑：更新后**

不要使用 ViewData 或 ViewBag。制作一个包含 Cars 和 CarDrive 属性的 ViewModel，这样添加新东西会更干净、更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T18:00:58.140

使用一些客户端 jQuery 脚本，让您的`Car_Name`下拉菜单在有人更改选择时触发一个事件。

```
//Use your DOM identifier here. I don't know what it's called.
$('#car_name').change(function() {
    //Magic here.
}); 
```

现在您要做的是，当触发此事件时，触发一个值为 的 AJAX 请求`Car_Name`。

让您的 ActionMethod 返回一个`JsonResult`.

然后，您在客户端捕获该信息，并解析数据以将选择选项插入到您的下拉列表`Car_Drive`中。

这就是您需要做的，将其分解为易于遵循的小块。

# javascript - Backbone.js：检查数据是否准备好以及数据集是否为空的优雅方法

> ID：10016562
> 
> 赞同：15
> 
> 时间：2012-04-04T17:48:37.387
> 
> 标签：javascript, backbone.js

我正在为两件事寻找更好的解决方案：

*   我如何了解数据是否已获取并准备好，我`BasicDealList.on("reset", function(){})`用来了解数据是否从 ajax 获取并解析并准备好使用但感觉很脏。

*   如果一个空的 JSON 来自于 fetch `{}`，它仍然显示 BasicDealList.length 为 1 而它应该是 0 因此我不得不检查第一个元素是否为空，`collection.length == 1 && jQuery.isEmptyObject(BasicDealList.toJSON()[0]`这非常难看。

这是代码：

```
BasicDeal = Backbone.Model.extend();    
BasicDealCollection = Backbone.Collection.extend({
    model: BasicDeal,
    url: '/some/ajax/url/',
});
BasicDealList = new BasicDealCollection();

BasicDealList.on("reset", function(collection, response){
    isEmpty = collection.length == 1 && jQuery.isEmptyObject(BasicDealList.toJSON()[0]);
    if (isEmpty){
    // render no deal found html
    }
    else{ 
    // render list of deals
    }
}
BasicDealList.fetch(); 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-04T18:05:39.153

如果您不喜欢听`reset`，可以直接将回调传递给`.fetch()`：

```
BasicDealList.fetch({
    success: function(collection, response){
        // ...
    }
}); 
```

如果稍后在您的应用程序中，您想知道您是否已经获取数据，您通常只需检查`BasicDealList.length`. 如果您想避免重复请求服务器上实际上为空的集合，您可能需要制定一个自定义解决方案，例如设置一个标志`.fetch()`：

```
BasicDealList.fetch({
    success: function(collection, response){
        BasicDealList.fetched = true;
        // ...
    }
}); 
```

至于空数据问题，您应该`[]`从服务器返回而不是`{}`. Backbone 的 Collection 调用`this.add(models, ...)`inside `.reset()`，并`.add()`检查`models`参数是否为数组；如果不是，则将其包装在一个中：

```
models = _.isArray(models) ? models.slice() : [models]; 
```

所以传递`{}`将导致`models`设置为`[{}]`，这不是你想要的。如果您无法控制服务器，您可以`{}`在自定义`.parse()`方法中进行检查，`[]`如果找到则返回。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-02-20T02:40:38.510

我知道这个问题已经得到回答，但这里有一个替代方案。

```
BasicDealCollection = Backbone.Collection.extend({
    model: BasicDeal,
    url: '/some/ajax/url/',
});

myCollection = new BasicDealCollection()
deferred = myCollection.fetch()

$.when(deferred).then(function() {
  // do stuff when we have the data.
}); 
```

这样做的主要好处是我们使用了“when”函数。“when”函数使我们能够检查多个 fetch 调用并成功执行一次。

```
$.when(deferredOne, deferredTwo, deferredThree).then(function() {
  // do stuff when we have the data.
}); 
```

此外，如果我们将延迟对象存储到一个变量中，我们可以做这样的事情。该变量将是一个标志，让我们知道我们已经加载了数据。

```
if (deferred.state() === "resolved") {
    // do stuff when we have the data.
} 
```

When we call fetch() on a collection it returns a jQuery deferred object. A jQuery deferred object can be in 3 states, "pending", "rejected" or "resolved" and once we have the data, it will set the state of the deferred object to resolved.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-10T23:42:25.500

我们需要一种方法来判断是否已获取 RelationalModel 的关系。这是我们的解决方案（在 Coffeescript 中）。

```
initialize: (objects, options) ->
  @fetched = false
  @listenTo @, 'sync', -> @fetched = true 
```

# security - CakePHP：安全测试

> ID：10016565
> 
> 赞同：0
> 
> 时间：2012-04-04T17:48:54.543
> 
> 标签：security, cakephp, cakephp-1.3, cakephp-2.0

有人会建议我可以用来确保我的网站安全的流程吗？我担心安全漏洞、未经授权的权限、XSS 等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:05:27.110

这是一个沉重的问题，因为安全是一场永无止境的战斗。幸运的是，如果您遵循约定并坚持使用框架的方法，Cake 可以很容易地保护您的应用程序。此外，不知道您的应用程序的性质很难具体说明，因此我将介绍一些默认任务（不按重要性顺序）。

首先，启用[`SecurityComponent`](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html). 默认情况下，它可以保护您免受 CSRF 和表单篡改。它还提供了可用于帮助保护站点的可用方法，例如需要 HTTP 方法或 SSL。

然后，审核您的代码并确保您使用内置`find()`方法进行数据库调用。Cake 转义输入以防止 SQL 注入。如果您有手动查询，请确保保护它们免受 SQL 注入。

最后，为您的授权编写测试。这将使您确信用户只能访问您允许他们访问的应用程序区域，并将深入了解您可能认为可以通过`GET`参数轻松访问的应用程序区域。

# wordpress - Wordpress 自定义字段 - 按值排序的搜索结果

> ID：10016568
> 
> 赞同：0
> 
> 时间：2012-04-04T17:48:59.500
> 
> 标签：wordpress, search, custom-fields

我有一个名为“评级”的自定义字段，其值从 1 到 10。我想要的是您可以**选择**（例如单击按钮或类似的东西）根据评级对搜索结果进行排序。

我找到了这段代码。但问题是您不能选择是否按评级订购帖子。它会自动对帖子进行排序。这是我复制并粘贴到functions.php中的代码

```
add_filter('posts_join', 'add_join' );
function add_join($pjoin){
    global $wpdb;
    $pjoin .= "LEFT JOIN (
    SELECT *
    FROM $wpdb->postmeta
    WHERE meta_key =  'rating' ) AS postmeta ON $wpdb->posts.ID = postmeta.post_id";

    return ($pjoin);
}

add_filter('posts_orderby', 'change_sortorder' );
function change_sortorder( $orderby ){
    global $wpdb;
    $orderby = "postmeta.meta_value+0 DESC";
    return $orderby;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:42:19.283

如果您使用此代码，您只需将 ?rating=desc 添加到您的网址，您将看到按降序排列的评分。

```
function register_my_qv() {
global $wp;
$wp->add_query_var( 'rating' );
}
add_action( 'init', 'register_my_qv' );

function map_my_qv( $wp_query ) {
if ( $meta_value = $wp_query->get( 'rating' ) ) {
    $wp_query->set( 'meta_key', 'rating' );
    if($meta_value == 'asc') {
        $wp_query->set( 'orderby', 'meta_value_num' );
        $wp_query->set( 'order', 'asc' );
    } elseif ($meta_value == 'desc') {
        $wp_query->set( 'orderby', 'meta_value_num' );
        $wp_query->set( 'order', 'desc' );
    } else {
        $wp_query->set( 'meta_value', $meta_value );
    }
}
}
add_action( 'parse_query', 'map_my_qv' ); 
```

# eclipse - 搜索时将焦点更改为 Eclipse 中的编辑器

> ID：10016575
> 
> 赞同：0
> 
> 时间：2012-04-04T17:49:35.183
> 
> 标签：eclipse

这是场景，我按下`Ctrl`-`F`在编辑器中搜索文本，焦点位于编辑器的“查找”部分。然后我想切换回编辑器而不使用鼠标来编辑找到的文本。

这可能吗？我看到了一个激活编辑器快捷方式，但它在已处于查找模式时似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:51:13.653

典型的，我在发布这个问题大约 5 秒后发现了解决方案 - 只需按下`SHIFT`-`TAB`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T14:05:52.167

在 Aptana 中，您必须改为击中`Esc`。

# shell - 美元和波浪号的使用

> ID：10016604
> 
> 赞同：1
> 
> 时间：2012-04-04T17:51:53.850
> 
> 标签：shell

我可以知道为什么在这个 shell 脚本中使用“ `~`”和“ ”。这是脚本删除比特定日期更早的文件的一部分。`+$`

```
if ! [[ $FILE_AGE =~ "^[0-9]+$" ]]; then
  usage
  exit 1 
```

我能够理解这部分脚本用于检查我们输入的是数字还是字母。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T17:58:23.300

运算符的`=~`意思是“如果左侧的字符串与右侧的正则表达式匹配，则为 true，否则为 false”。

`^[0-9]+$``+`表示在 0 到 9（即 ）范围内查找一个或多个（即 ）字符的序列，这些字符从字符串 ( )`[0-9]`的开头 ( ) 开始并在字符串 ( `^`) 的末尾结束`$`。

这是基本的 bash 和正则表达式，有关更多详细信息，请参阅[Bash 手册页](http://linux.die.net/man/1/bash)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:03:53.480

是正`=~`则表达式匹配运算符，`+`属于模式`[0-9]+`，而不是`$`. 该条件测试变量 FILE_AGE 的值是否与（行/字符串开头）和（行/字符串结尾`[0-9]+`）之间的模式（一位或多位）匹配。`^``$`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T17:58:52.513

**=~**是正则表达式匹配

**$**是正则表达式的一部分，`^[0-9]+$`它意味着匹配字符串的结尾

谷歌“正则表达式”的教程或指南

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T17:57:25.007

谷歌“Bash 脚本等于波浪号运算符”：

[http://unixdog.com/?p=94](http://unixdog.com/?p=94)

至于美元符号，第一个是因为`$FILE_AGE`它是 Bash 中的一个变量，第二个是因为它是正则表达式的一部分。这是 RegEx 上的一个很棒的网站：

[http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

# javascript - 对象不支持此操作

> ID：10016609
> 
> 赞同：1
> 
> 时间：2012-04-04T17:52:07.323
> 
> 标签：javascript, internet-explorer, dom, prototype

我有以下代码在 IE 7 上向我抛出该错误：

```
if (navigator.appName == 'Microsoft Internet Explorer') {
            var ua = navigator.userAgent;
            var re  = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
            if (re.exec(ua) != null){
              rv = parseFloat( RegExp.$1 );
              if (rv == 7){
                  var contfaltandias = new Element('div');
                    contfaltandias.setAttribute('id', 'contfaltandias');
                    contfaltandias.setAttribute('style', 'display:none; width:100%; height:100%; z-index:1000; background:#003377; position: absolute; top:0;');
                    $('container').insert({
                            before:contfaltandias
                        });
                    new Effect.Parallel([
                                      new Effect.Appear('contfaltandias', { sync: true, duration: 2.0 }), 
                                      new Effect.Highlight('contfaltandias', { sync:true, startcolor: '#ff6000', endcolor: '#ffffff' }) 
                                 ], { 
                                     duration: 5.0,
                                     delay: 0
                                   });
                  }
          }
        } 
```

我发现导致问题的行是这样的：

> var contfaltandias = new Element('div');

但为什么？任何帮助，将不胜感激

**//这是为了显示一条消息以移动到最新版本，我不是像有人说的那样糟糕的程序员**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:53:56.717

使用`var contfaltandias = document.createElement('div');` [https://developer.mozilla.org/en/DOM/document.createElement](https://developer.mozilla.org/en/DOM/document.createElement)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:56:48.313

据我所知，新元素是使用 document.createElement('type') 创建的。你应该尝试更换

```
var contfaltandias = new Element('div'); 
```

和

```
var contfaltandias = document.createElement('div'); 
```

然后，它应该工作。

# xml - XSLT 和 XPath 出了点问题

> ID：10016610
> 
> 赞同：1
> 
> 时间：2012-04-04T17:52:08.353
> 
> 标签：xml, xslt, xpath, xslt-2.0, xpath-2.0

我已经浪费了很多时间试图弄清楚 xslt 的工作原理

我有这个xml

```
<?xml version="1.0" encoding="UTF-8"?>

<lvl:map xsi:schemaLocation="http://www.ohmeudeus.com lvlMl-v2.xsd"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:lvl="http://www.ohmeudeus.com">
   <name>String</name>
   <myColor>fffffffff</myColor>
</lvl:map> 
```

现在我想通过使用 xslt 制作一个带有单词 String 的 html

所以我的 xslt 类似于

```
 <?xml version="1.0" encoding="UTF-8"?>
   <xsl:stylesheet version="2.0" 
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
   xmlns="http://www.w3.org/1999/xhtml" 
   xmlns:lvl="http://www.ohmeudeus.com lvlMl-v2.xsd">
<xsl:template match="lvl:map">
    <html>
        <head>
            <title>
                normal title
            </title>
            <link href="style.css" rel="stylesheet" type="text/css"/>
        </head>
        <body>
            The name is <xsl:value-of select="name"/>
        </body>
    </html>
</xsl:template>

</xsl:stylesheet> 
```

结果给了我这样的名字和颜色：

字符串ffffffff

我不明白我在这里做错了什么......请帮助我......

我也接受你必须帮助我找到错误的任何提示

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T18:06:03.567

这是因为您的 XML 中的 xmlns：

```
xmlns:lvl="http://www.ohmeudeus.com" 
```

与 XSLT 中的 xmlns 不匹配：

```
xmlns:lvl="http://www.ohmeudeus.com lvlMl-v2.xsd" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:05:15.767

我发现了2个问题。

*   闭幕式`</xsl:stylesheet>`不见了。
*   `<xmlns:lvl>`不应该有架构位置，只有命名空间。

修复此问题后，您应该得到*The name is String*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T19:19:15.653

当我使用针对发布的 XML 固定的命名空间运行发布的 XSLT 时，我得到以下信息。这不是所需的输出吗？

```
<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:lvl="http://www.ohmeudeus.com">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>normal title</title>
      <link href="style.css" rel="stylesheet" type="text/css" />
   </head>
   <body>The name is String</body>
</html> 
```

# php - 退出页面后防止返回按钮

> ID：10016615
> 
> 赞同：5
> 
> 时间：2012-04-04T17:52:35.577
> 
> 标签：php, mysql, session, redirect

我有 php 注销页面。当用户单击注销链接时，请查看此页面并重定向到索引页面。但是当单击后退按钮时，我会看到带有用户数据的上一页。当然，当我刷新页面时，我看不到以前的页面和数据。单击注销并单击返回按钮后，我检查了其他代码（ drupal ），我看不到上一个页面并看到登录页面。我的问题在哪里。如何解决这个问题？

登出页面：

```
if (isset($_GET['req']) && $_GET['req'] == 'logout') {
      session_start();
      session_destroy();
      header("Location: index.php");
   exit();
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:17:03.800

我认为这主要是客户端问题，并且由于浏览器缓存标头。

解决方法是什么？

在我看来，您需要正确设置静态内容和非静态内容的缓存标头

静态内容（css/javascript/images）：[阅读此内容](http://developer.yahoo.com/performance/rules.html)

对于 php 页面本身： `header("Cache-Control", "no-store, no-cache, must-revalidate");`

应该做的伎俩

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T17:57:26.317

代码是对的。实际上，您不需要阻止人们单击后退按钮。如果你真的认为这很重要，你可以在 logout.php 中保存一个 cookie 或其他内容，然后主页会使用 AJAX 检查是否设置了这个 cookie。如果是这样，您可以使用 JS 重新加载页面（当然然后取消设置 cookie）。但是不存在真正安全的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T18:14:01.863

您实际上是在询问如何清除用户的浏览器历史记录和他们有权访问但不再这样做的页面的缓存。当您注销用户时，您将取消他们重新加载页面的能力，并且几乎没有（如果有的话）可以阻止浏览器向他们显示他们一次允许加载的内容（这是陈旧的数据）。重要的是，当它们重新加载时，它们不会获得新数据 - 您无法擦除缓存中已经加载的内容。

**编辑：**还想在阅读其他评论后添加一些内容：您可以告诉浏览器不要缓存任何数据，这将要求他们重新加载所有内容，即使他们按下后退按钮，但您也需要他们重新加载所有内容即使它们经过身份验证 - 这是您必须忍受的权衡。这显然取决于您网站的特定情况——但在大多数情况下，我认为这不是一个值得的权衡。您的托管将需要更多带宽，因为每次页面加载时都会重新下载资源，页面加载时间会更长，因为浏览器不能依赖其本地缓存，因此您的应用程序自然会在用户看来更慢。只要不是绝对有必要不显示数据，除非他们主动登录，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-03T15:38:27.460

这是一种简单快捷的解决方案。在登录表单标签中添加 target="_blank"，它会在不同的窗口中显示内容。然后在注销后只需关闭该窗口并解决后退按钮问题（Safari 浏览器）。即使尝试使用历史记录也不会显示该页面，而是重定向到登录页面。这对于 Safari 浏览器很好，但对于 Firefox 等其他浏览器， session_destroy(); 照顾它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-28T06:47:26.473

```
<?
session_start();
if(!isset($_SESSION['username']) && !isset($_SESSION['password'])){
header("Location:../index.php");
exit;
}
else{
session_destroy();
}
?> 
```

将此粘贴到每个页面或您注销的位置

```
<?php
session_start();
session_unset();
session_destroy();
header("Location:../index.php");
exit; 
```

**user_logout.php**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T18:16:22.037

使用正在使用`$_GET`但不验证任何形式`$_SESSION`

尝试这个

```
session_start ();
if (isset ( $_GET ['req'] ) && $_GET ['req'] == 'logout') {
    $_SESSION ['auth'] = false ;
    session_destroy ();
}

if (! isset ( $_SESSION ['auth'] ) || $_SESSION ['auth'] == false) {
    header ( "Location: index.php" );
    exit ();
} 
```

确保在您的主页中有类似的内容

```
session_start ();

if(/** login Condition **/)
{
    $_SESSION ['auth'] = true ;
}

if (! isset ( $_SESSION ['auth'] ) || $_SESSION ['auth'] == false) {
    header ( "Location: index.php" );
    exit ();
} 
```

谢谢

:)

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-04-04T18:09:42.473

将此添加到您的代码中，它将阻止用户单击后退按钮。

```
 ignore_user_abort(true); 
```

# html - IE9 无法识别边界半径

> ID：10016616
> 
> 赞同：0
> 
> 时间：2012-04-04T17:52:39.237
> 
> 标签：html, css, internet-explorer-9

我无法让 IE9 识别我的 CSS 边框样式：`border-radius: 10px;`. 我也尝试过使用`<meta http-equiv="X-UA-Compatible" content="IE=9" />`，但它只会弄乱我的背景（它会从底部的背景中切出一块）。

```
<html>
<style>
.outer{
    background: url('http://v4m.mobi/php/i/images/grey_background.jpg');
    vertical-align: middle;
    text-align: center;
    width: 100%;
    height: 100%;

.inner{
margin: 0 auto;
border: 3px solid #444444;
vertical-align: middle;
-moz-border-radius: 10px; 
-webkit-border-radius: 10px;
border-radius: 10px;  /* <-- This line */
background-color: #999999;
}

.inner td{
width: 213.33px;
height: 340px;
}
</style>
<body marginwidth="0" marginheight="0" topmargin="0" leftmargin="0" style="margin: 0; 
 padding: 0; border: none">

<div class="outer">
<div style="padding-top: 5%;"></div>
<table class="inner" cellspacing="10">
    <tr>
        <td bgcolor="#ffffff">referferf$<br/>dcsdcsd</td>
    </tr>
</table>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:59:59.297

唯一的解决方案是使用标准渲染模式——添加`<!doctype html>`或`X-UA-Compatible`标题。如果它破坏了您网站的其他部分，那只是意味着您应该重写您的代码，因为它已针对 IE 的 quirks 模式进行了优化。

# sql - PostgreSQL 单列与多列索引以获得最佳 SELECT 性能

> ID：10016622
> 
> 赞同：4
> 
> 时间：2012-04-04T17:53:30.267
> 
> 标签：sql, performance, postgresql, indexing

我是 PostgreSQL 的新手，尤其是它的性能调优方面。基本上，我们通过查询 3 个整数值来访问数据：segmentSize（范围 1...10）、segmentX（范围 +/- 100,000）、segmentY（范围 +/- 100,000）。

前瞻性考虑：当数据量增长时，有可能将数据分段到多个表中，每个单独的 segmentSize 和/或 segmentX 和 segmentY 的连续范围。

目前的选择：我有一个架构选择，要么直接使用键（segmentSize、segmentX、segmentY），要么——为了获得性能——在 PostgreSQL 之外创建一个合成键，将 segmentX、segmentY 组合成一个整数值，成为关键（或者不太可能，所有三个（segmentSize，segmentX，segmentY）。

问题：假设我们不太关心从segmentX，segmentY在Postgress之外发生的这种“组合密钥”派生的成本，并且考虑到我们并不是专门针对每行数据的字节顺序节省空间（除非它会产生性能差异），....是否会通过查询范围segmentX * segmentY的单个int值而不是查询segmentX和segmentY的两个独立int值的组合来获得任何可衡量或有意义的性能增益?

非常感谢。请随意包含任何扩展适用数据和索引策略的链接，以最大限度地提高 SELECT/读取性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:24:35.213

将两（或三）列组合成单个键值的性能优势可能非常小。它实际上可能会*损害*某些用途的性能；如果这些值在其他表中有意义，则通过合成键“导航”的需要会阻止考虑可能更快的计划。当有可用的自然密钥时使用合成密钥往往属于“过早优化”的标题，伴随着与之相关的所有风险——包括它实际上会使事情变慢的可能性很高。

# asp.net-mvc-3 - Html.ValidationSummary(true) 不显示可验证错误

> ID：10016627
> 
> 赞同：4
> 
> 时间：2012-04-04T17:53:54.127
> 
> 标签：asp.net-mvc-3, data-annotations

我有一个带有 Html.ValidationSummary(true) 标记的 Razor 视图。

属性级别验证执行良好，消息显示在错误字段旁边。但是，对于通过实现 IValidatable 的 Validate 方法进行的验证，我有一个问题。

如果模型本身实现了 IValidatable 则错误将添加到模型状态并正确显示在 Html.ValidationSummary(true) 标记处（模型级别错误不是属性级别）如果视图模型包含对复杂对象的引用（装饰有 [必需] 注释），则消息不会显示。它被添加到 ModelState 并且 isValid 正确地变为 false。它在错误列表中，并显示为模型级错误，但不显示。（如果您使用 Html.ValidationSummary(false) 则显示消息）。

这只是不可行吗？难道我做错了什么？辩论转向流利，但这又是更多的工作......

下面是代码示例： 查看模型：

```
public class ViewModel
{
    [Required]
    public TestModel DataModel { get; set; }
} 
```

测试模型：

```
public class TestModel : IValidatableObject
{

    [Display(ResourceType = typeof(ViewResources), Name = "Field1")]
    public string Field1 { get; set; }
    public string Field2 { get; set; }

    [Required]
    public string Field3 { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {

        if (string.IsNullOrEmpty(Field1) && string.IsNullOrEmpty(Field2))
        {
            yield return new ValidationResult("Need to enter either Field1 or Field2.");
        }
    }
} 
```

剃刀视图：

```
@using (Ajax.BeginForm(new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "createDialog" }))
{
    @Html.ValidationSummary(true)

    <fieldset>
        <div class="editor-label">
            @Html.LabelFor(model => model.DataModel.Field1)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.DataModel.Field1)
            @Html.ValidationMessageFor(model => model.DataModel.Field1)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.DataModel.Field2)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.DataModel.Field2)
            @Html.ValidationMessageFor(model => model.DataModel.Field2)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.DataModel.Field3)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.DataModel.Field3)
            @Html.ValidationMessageFor(model => model.DataModel.Field3)
        </div>

        <p>
            <input type="submit" value="Submit"/>
        </p>
    </fieldset> 
```

控制器：

```
if (!ModelState.IsValid) return View();
    return View(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:12:00.423

不是一个干净的实现，但你仍然可以使用它。

```
if (!ModelState.IsValid)
            {  
                System.Web.Mvc.ModelState modelStateObj = new ModelState();
                bool isModelStateAvailable = ModelState.TryGetValue("DataModel", out modelStateObj);
                if (isModelStateAvailable)
                {
                    ModelState.Remove("DataModel");
                    modelStateObj.Errors.ToList().ForEach(t => { ModelState.AddModelError(string.Empty, t.ErrorMessage); });
                }                
            } 
```

# java - 游戏：在游戏/窗口 egdes 处生成敌人的算法

> ID：10016632
> 
> 赞同：0
> 
> 时间：2012-04-04T17:54:06.807
> 
> 标签：java, android

我正在寻找一种算法，用于在 Android 游戏的游戏板/窗口的 egdes 处生成能量。我正在用宇宙飞船做旧的 SpaceWars/Shooting 小行星，我需要小行星在游戏板外的随机位置生成，之后它们将以不同的方向和速度进入游戏板。

将小行星放置在随机位置很容易，但凝灰岩部分（至少对我而言）是根据它们给出的随机位置为它们提供正确的移动方向。

例如：

游戏板 = 1280 x 720

小行星随机位置 = 1100, 0 (x, y)

右移方向：

asteroid.x < gameboard.x/2 - 可能的移动方向 = 南和东南

asteroid.x > gameboard.x/2 - 可行的移动方向 = 南和西南

然后小行星有两个可能的移动方向（这就是我现在定义游戏计划的方式）：直接向南或西南。

我可以做很多 if 语句，但我希望有人可以帮助我解决问题的某种算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:05:02.933

也许我弄错了你的问题，但这就是我看到解决方案的方式：

如果小行星`x-position`超过您的设备宽度（720），那么它的方向应该是 SW，否则它应该是 S。

```
if(asteroid.x>DEVICE_WIDTH){
    asteroid.direction="SW";
}else{
    asteroid.direction="S";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:10:36.183

这个链接可以帮助你 [http://forums.create.msdn.com/forums/p/100862/599129.aspx](http://forums.create.msdn.com/forums/p/100862/599129.aspx)

我认为您可能总是需要一些嵌套的 if 语句，但这种方式可能更聪明一些

# cordova - 当它应该是许多平台的一个代码库时，为什么我必须在 phonegap 中选择一个设备？

> ID：10016637
> 
> 赞同：0
> 
> 时间：2012-04-04T17:54:25.930
> 
> 标签：cordova

我关于phonegap的问题很简单，但我找不到答案。

我即将开始编写一个简单的电话应用程序，我可以将它部署到许多平台上，Phonegap 声称能够做到这一点。

如果我正在编写一个代码库并编译到许多应用程序，为什么我必须选择一个平台来编写代码？我肯定会编写通用代码并在之后为每个设备编译它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T18:02:04.543

如果您构建您的项目，phonegap 需要知道它必须为哪个平台链接它的二进制文件。这样您就可以为您的测试平台获得一个工作包，这样您就可以在发布之前运行和调试它。

应用程序完成后，您将剥离平台相关的二进制文件并将您的源代码上传到他们的 Web 服务。

然后，Web 服务将为其他平台构建二进制文件。

# r - RSNNS 包：循环神经网络

> ID：10016638
> 
> 赞同：1
> 
> 时间：2012-04-04T17:54:30.377
> 
> 标签：r, neural-network

我正在 R 中训练循环神经网络 elman。

nn4 <- elman(norm_traindata4,trsignals,size=10,initFuncparams=iniweight,linOut=FALSE,maxit=1000, learnFunfParams=0.01,inputsTest=norm_testdata4,targetsTest=tesignals)

预测 = 预测（nn4，norm_testdata4）

每次我运行它时，即使对于同一组输入参数（如大小、learnFunParams），预测值也会不同。如何为相同的参数值获得相同的预测值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:49:26.260

在代码开头包含以下行：

```
set.seed(1) 
```

神经网络使用随机初始值，并且可以收敛到局部最小值。因此设置一个种子，生成相同的随机初始值，并且每次都得到相同的神经网络。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-14T12:39:14.703

这是因为每次使用时网络的内存都会发生变化`predict`。

Elman 网络根据输入加上前一个时间步的一组隐藏单元的状态来预测输出。因此，网络的“记忆”会随着您的使用而改变`predict`。第二次使用`predict`网络的“新”内存与（在您的情况下，相同的）输入一起使用来预测新值。

重置网络记忆“及时”的技巧，使用来自训练样本的输入预测（训练）目标。

# objective-c - 如何在 UIScrollview 中设置 UITextView 的框架

> ID：10016641
> 
> 赞同：1
> 
> 时间：2012-04-04T17:55:03.113
> 
> 标签：objective-c, uiscrollview

我正在努力让 UIScrollView 正常工作。

我有一个带有 UIImageView 和 UITextView 的 UIScrollView 作为它的子视图。

UIScrollView、UIImageView 和 UITextView 连接到我的控制器。

当我在 viewDidLoad 中使用这行代码时：

```
self.scrollView.contentSize = CGSizeMake(320, 1000); 
```

滚动工作。但是，向下滚动时，如果 UITextView 包含大量文本，则文本的底部会被剪切掉。 ![这是向下滚动后显示的内容](../Images/516bd719fc441aab19ab4233c365d975.png)

我假设我必须调整 UITextView 的框架。当我在 viewDidLoad 中添加这三行时：

```
CGRect frame = self.bioText.frame;
frame.size = self.bioText.contentSize; 
self.bioText.frame = frame; 
```

文本被截断更多。

![更少的文字](../Images/aa01d23ad4e3fd609f190e7cbf6ef602.png)

几个问题：

*   我如何正确调整 UITextView 以便在滚动时显示所有文本。
*   有没有办法将滚动视图 contentSize 设置为所有子视图的总和（而不是像我现在这样硬编码）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:16:06.230

你不需要调整textView的contentSize，它会根据它的文本自动调整

如果您想让 UIScrollView 的 contentSize 根据其子视图进行调整，并且您的所有子视图都是垂直的，您可以使用它

```
CGFloat height = 0
for(UIView* sub in myScrollView.subviews)
height += sub.frame.size.height

myScrollView.contentSize = CGSizeMake(self.contentSize.width, height) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-30T01:59:37.047

今天我刚刚解决了这个问题。您可以在 viewDidLayoutSubviews 中设置 textView 的框架。这是我的应用程序中的代码：

```
- (void)viewDidLayoutSubviews {
    CGRect rect = self.textView.frame;
    rect.size.height = self.textView.contentSize.height;
    self.textView.frame = rect;
} 
```

希望这可以帮到你。

# android - 通过其相对路径在 XML 中引用自定义视图？

> ID：10016644
> 
> 赞同：0
> 
> 时间：2012-04-04T17:55:15.530
> 
> 标签：android, xml

我已经定义了一个扩展 ImageView 的类 MarkerView 并使用这个视图，我必须像这样引用它：

```
<PACKAGE_NAME.MarkerView  android:id="@+id/startmarker" android:contentDescription="@string/start_marker" /> 
```

我想在不需要 PACKAGE_NAME 的情况下定义我的 XML 文件。这可能吗？我试过了

```
<.MarkerView  android:id="@+id/startmarker" android:contentDescription="@string/start_marker" /> 
```

但这没有用。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:58:18.407

不，我认为它在 xml 文件中是不可能的。如果是类文件，我们可以有导入选项，但在 xml 中我们没有任何这样的选项。

# asp.net - 未找到主题名称 CN=IdentityTKStsCert 的证书

> ID：10016646
> 
> 赞同：0
> 
> 时间：2012-04-04T17:55:31.440
> 
> 标签：asp.net, ssl, iis-7, wif

我正在[学习 WIF 培训套件](http://www.microsoft.com/download/en/details.aspx?id=14347)。尝试通过 STS 站点登录时出现以下错误。我点击登录，然后我被重定向到 STS 网站，我看到了这个`No certificate was found for subject Name CN=IdentityTKStsCert`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T20:04:32.893

为了进行 Microsoft 练习，您需要设置环境（使用正确的证书）。请按照以下设置说明（从 Microsoft 链接中提取（现已过时）- [http://msdn.microsoft.com/en-us/gg271381](http://msdn.microsoft.com/en-us/gg271381)）安装请求的证书。设置的源文件可以在[这里](http://az12722.vo.msecnd.net/wazplatformtrainingcourse2-9-1/labs/webservicesandidentityinthecloud20102-0/Source.zip)~~页面的右上角~~ 找到。

### 设置

您必须执行以下步骤来为本实验室准备您的计算机。

1.  打开 Windows 资源管理器窗口并浏览到实验室的 **Source\Setup**文件夹。
2.  双击 此文件夹中的**Dependencies.dep**文件以启动 Dependency Checker 工具并安装任何缺少的先决条件。这还将安装一些将在实验室中使用的代码片段和本地 STS 在第二个练习中使用的 localhost 证书。

**注意：**此过程可能需要提升。*.dep*扩展名在  安装期间与 Dependency Checker 工具相关联。有关设置过程以及如何安装 Dependency Checker 工具的其他信息，请参阅 培训工具包**Assets**文件夹中的**Setup.docx**文档 。

 **3.  关闭代码片段安装程序后，安装脚本将继续进行证书安装。 如果要继续安装所需的证书，请按 **Y。**

**注意：**如果您已经拥有另一个应用程序所需的“localhost”证书，请确保在继续安装实验室的证书之前对其进行备份。

> 证书安装完成

**注意：**如果您运行的是 Windows 7 或 Windows 2008 R2，您可能看不到此窗口。

4.  完成后按任意键关闭设置控制台。

**Note:** In addition to the setup script, inside the **Source\Setup** folder of this lab, there is a **Cleanup.cmd** file you can use to uninstall all the code snippets installed by setup scripts.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T16:25:40.637

如果您运行“mmc”（开始->运行->“mmc”），您应该能够进入计算机帐户的证书管理单元（文件->添加\删除管理单元）并检查 Personal\Certificates有一个带有 IdentityTKStsCert 的条目。

如果是这样，请尝试从您的 web.config 条目中删除“CN =”，如下所示（隐藏其他 identityModel 配置条目）：

```
 <microsoft.identityModel>
      <serviceCertificate>
        <certificateReference x509FindType="FindBySubjectName" findValue="IdentityTKStsCert" storeLocation="LocalMachine" storeName="My" />
      </serviceCertificate>
    </microsoft.identityModel> 
```

最后，您可能希望确保 IIS 可以访问私钥。回到 IIS 的证书管理单元中，右键单击证书并选择所有任务-> 管理私钥并添加 IIS_IUSRS（如果不存在）。（我相信这仅适用于 IIS 7，正如您所标记的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:36:00.733

发现混乱在哪里。我把`Friendly Name`证书放在 web.config 中。证书公用名实际上是名为 的属性`Issued To`。

这篇文章中有一个关于证书公用名的部分。 [http://www.sslshopper.com/article-how-to-create-a-self-signed-certificate-in-iis-7.html](http://www.sslshopper.com/article-how-to-create-a-self-signed-certificate-in-iis-7.html)**

# php - 用于创建域的 PHP 脚本

> ID：10016648
> 
> 赞同：-3
> 
> 时间：2012-04-04T17:55:33.270
> 
> 标签：php, libvirt

好的，我想使用 libvirt-php 创建域。这是代码。

< ?php

```
$credentials = array(VIR_CRED_AUTHNAME=>'root',VIR_CRED_PASSPHRASE=>'root');
$conn = libvirt_connect("xen:///", FALSE, $credentials); 
$name="oneiric";
$arch="i386";
$memMB=1024;
$maxmemMB=1536;
$vcpus=2;
$iso_image="/root/onericGUI.iso";
$disk1 = array(
                     "path" => "/var/libvirt/images/vm.img",
                "driver" => "raw",
                "bus" => "ide",
                "dev" => "hda",
                "size" => "10G",
                "flags" => VIR_DOMAIN_DISK_FILE | VIR_DOMAIN_DISK_ACCESS_ALL                     ); $disks = array( $disk1 );

$network1 = array(
                            'mac' => '00:11:22:33:44:55',
                            'network' => 'default',
                            'model' => 'e1000'
                        );

    $networks = array( $network1 ); $flags=DOMAIN_FLAG_FEATURE_ACPI;

$newdom=libvirt_domain_new($conn, $name, $arch, $memMB, $maxmemMB, $vcpus, $iso_image, $disks, $networks, $flags);
print_r($newdom);    ?> 
```

一切都很好，但问题仅在于**$flags**。我通过了

> > 1.  DOMAIN_FLAG_FEATURE_ACPI
> > 2.  DOMAIN_FLAG_FEATURE_APIC
> > 3.  DOMAIN_FLAG_FEATURE_PAE
> > 4.  DOMAIN_FLAG_CLOCK
> > 5.  DOMAIN_FLAG_SOUND_AC97, all options Indevedually 但是当我执行它时，它会显示以下警告：
> > 
> > 注意：使用未定义的常量 DOMAIN_FLAG_FEATURE_ACPI - 在第 32 行的 /opt/lampp/htdocs/xampp/xen/create_vm.php 中假定为“DOMAIN_FLAG_FEATURE_ACPI”
> > 
> > 警告：libvirt_domain_new() 期望参数 10 很长，字符串在第 34 行的 /opt/lampp/htdocs/xampp/xen/create_vm.php 中给出
> > 
> > 警告：libvirt_domain_new() [function.libvirt-domain-new]：第 34 行 /opt/lampp/htdocs/xampp/xen/create_vm.php 中的参数无效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:07:56.523

消息：

> 未找到域：第 32 行 /opt/lampp/htdocs/xampp/xen/create_vm.php 中的 xenUnifiedDomainLookupByUUID

来自 libvirt 本身，而不是 libvirt-php。似乎 libvirt 连接到您的 Xen 实例时出现错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:59:58.567

您已定义`$flags`为字符串，但需要 long。我猜你想要的是分配`$flags`常量的值`DOMAIN_FLAG_FEATURE_ACPI`，但是你将它定义为一个包含`DOMAIN_FLAG_FEATURE_ACPI`自身作为文本的文字字符串。

```
$flags = DOMAIN_FLAG_FEATURE_ACPI; 
```

# javascript - 小胡子嵌套模板

> ID：10016650
> 
> 赞同：3
> 
> 时间：2012-04-04T17:55:57.130
> 
> 标签：javascript, mustache

我想知道这是否可能。在本例中，HTML 文件为：

> {{i18n.sample_message}}

在我的渲染函数中，我有这个：

```
var json = {
 i18n:i18n,
 sampleDate:'10/10/10'
}
$('div').html(Mustache.to_html(template,json); 
```

该`i18n`文件是一个对象，并且有一个键：

示例消息：`some long message
date is: {{json.sampleDate}}`

现在我`{{json.sampleDate}}`在屏幕上。我尝试以分号结束字符串并使用 + 连接值，但这也不起作用。

暂时我没有把我`{{json.sampleDate}}`的`i18n`html 更改为

```
{{i18n.sample_message}}{{json.sampleDate}} 
```

实际上，我有一些很长的段落需要注入一些动态值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:11:56.710

我能够以一种丑陋的方式让它工作。如果有更清洁/更好的东西，请评论/编辑。

我不得不调用 Mustache.to_html 两次。

```
var html = Mustache.to_html(template,json);
return Mustache.to_html(html,json); 
```

通过再次调用 to_html，Mustache 找到了 {{json.sampleDate}} 并将其替换为我的 json 中的值。

# windows-ce - 条码扫描仪样本不能被杀死

> ID：10016652
> 
> 赞同：0
> 
> 时间：2012-04-04T17:56:00.367
> 
> 标签：windows-ce, motorola-emdk

当我在设备（摩托罗拉 WT4090 或 MC9090）上启动 CS_Barcode2Sample1 样本（来自 Motorola EMDK for .NET v2.6 或 2.5）并立即不进行任何扫描，尝试将其杀死它不会消失。只有热启动才能摆脱它。挂在那里的几个后台线程似乎与应用程序中启用了扫描仪有关。

同样的行为也发生在我的应用程序中，这使我无法进行自动升级。

我想知道是否有其他人遇到过这个问题并能够解决它。

# ios - 分配一个大的 NSMutableArray 会导致内存不足警告吗？

> ID：10016654
> 
> 赞同：4
> 
> 时间：2012-04-04T17:56:19.213
> 
> 标签：ios

我在我的应用程序中实现了一个 NSMutableArray，其中包含大约 12,000 个字符串。在分配工具中，它大约需要 1000 KB，导致我的总分配为 2200 KB。

使用这样的大型数组会导致内存不足警告吗？

我注意到分配工具中的内存不足警告。有没有办法查看设备的总已用/可用内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T18:00:50.940

没有办法查看“可用”内存，尽管 Instruments 会很高兴地告诉你你的应用程序消耗了多少。这是出于多种原因：即使它*确实*向您显示了“可用”的内存量，它也不会很有用，因为它在该领域中的差异很大，具体取决于背景中的内容，您是否正在听音乐，通话等

正是因为这个问题，您才会*有*内存警告：有几个级别，它们为您的应用程序提供了释放内存并避免被终止的机会。

但是，您所说的 2200 KB 在总体方案中并没有那么多（如果它可以帮助您将这些东西可视化，那么 1024x768 图像会占用更多的内存）。所以我不会*太*担心：也就是说，如果可以的话，让您的应用程序通过释放您不需要的对象来响应内存警告总是有益的。

# javascript - js .replace() 中的正则表达式

> ID：10016655
> 
> 赞同：3
> 
> 时间：2012-04-04T17:56:22.807
> 
> 标签：javascript, regex

我对正则表达式很陌生，需要去掉一些逗号。我正在尝试将 Fri,,April,6,,2012 变成 Fri, April 6, 2012。

有任何想法吗？
我当前的代码如下。eDate 是 Fri,,April,6,2012

```
eDate = edDate4.replace(/,+/g, ", ").replace(/^,/, "").replace(/,$/, "").split(","); 
```

它于 2012 年 4 月 6 日星期五返回。

感谢胡安的帮助！当我将其更改为

```
eDate = edDate4.replace(",,", ", ").replace(",,", ", "); 
```

我得到了 2012 年 4 月 6 日星期五

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T18:11:17.890

`.replace(/,{2,}/g, ", ").replace(/,(?! )/g, " ")`

在您的某些示例中，您可能会做的更简单`.replace(/,(?!,)/g, " ")`，但它将替换`",,,"`为`",, "`，而不是`", "`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:15:08.523

有点奇怪，但我会用空格替换所有逗号，然后用逗号替换任何有两个空格的地方。有点像这样

```
var edDate4 = "Fri,,April,6,,2012"​;
var eDate = edDate4.replace(/,/g, " ")​​​​​​​​.replace(/\s\s/g, ", ");
alert(eDate) //Gives "Fri, April 6, 2012" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-10T20:34:16.807

这是一个例子

```
var stringWithoutComments = s.replace(/(`[^*]*`)|(```[^*]*```)|(''[^*]*'')|(<div [^*]*div>)|(,)|(<[^*]*>)/g, ' ');
console.log(stringWithoutComments); 
```

# mysql - mysql转帐查询

> ID：10016656
> 
> 赞同：0
> 
> 时间：2012-04-04T17:56:33.963
> 
> 标签：mysql

我更新了我的程序处理罚款和收费的方式，现在我需要将旧数据传输/迁移到新格式。它过去的工作方式是罚款/收费存储在用户记录的一个字段中。现在有一个全新的表格用于跟踪每笔费用。我想简单地将该费用字段和 1 条记录带到带有该费用的帐单表中。

```
User table: id as INT, name as VARCHAR, charges as DECIMAL(10, 2)
Charge Table: id as INT, user_id as INT, amount as DOUBLE, type as INT, date_applied as DATETIME, description as VARCHAR 
```

假设我有一个用户记录：`(id => 1, name => 'john doe', charges => 4.20)`并希望将其转移到

```
(id => 1, user_id => 1, amount => 4.20, type => 1, date_applied => (whatever  time the transfer is taking place), description => 'Initial balance') 
```

如何在 SQL 查询中执行此一次性传输？我宁愿不为这个一次性交易编写 PHP 脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:58:52.223

这应该做你想要的。

```
INSERT INTO `Charge Table` SELECT NULL, id, charges, 1, NOW(), 'Initial balance' FROM `User Table` 
```

# erlang - 停止 gen_server 时选择原因的语义是什么？

> ID：10016664
> 
> 赞同：6
> 
> 时间：2012-04-04T17:57:10.633
> 
> 标签：erlang, erlang-otp

Erlang 文档说明了以下关于 gen_servers 的内容：

> ...
> 
> 请注意，由于正常、关闭或 {shutdown,Term} 之外的任何其他原因，假定 gen_server 由于错误而终止，并使用 error_logger:format/2 发出错误报告。

来源：[http ://www.erlang.org/doc/man/gen_server.html#Module:terminate-2](http://www.erlang.org/doc/man/gen_server.html#Module:terminate-2)

* * *

由于除了这三个原因之外的任何其他原因都被视为错误，因此我推断出原因`normal`，`shutdown`并且`{shutdown, Reason}`被视为正常行为。

我想开发人员在选择在正常情况下停止 gen_server 的这三个原因时是有动机的，但我不太确定如何确定使用哪一个。

那么我应该什么时候使用`normal`,`shutdown`和`{shutdown, Reason}`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T19:41:28.857

`normal`如果您的服务器已完成工作并正常终止，您应该使用。

`shutdown`并且`{shutdown, Reason}`当他们告诉他们的孩子终止时被主管进程使用（例如，整个应用程序正在终止或监管树中的另一个进程已经死亡，这是一个 one_for_all 主管）。

我`normal`用于所有预期的终止和`{error, ErrorDescription}`意外的终止。

# php - 无法在 Mac OS Lion 上运行配置良好的 php 脚本

> ID：10016669
> 
> 赞同：1
> 
> 时间：2012-04-04T17:57:34.453
> 
> 标签：php, macos, apache

我有一个让我发疯的问题。我只想在我的 macbook pro 上使用 mac OS 的本机 apache 执行一个简单的 php 脚本。

我成功完成了所有配置步骤： - 激活网络共享 - 在 /etc/apache2/httpd.conf 中取消注释 LoadModule php5_module libexec/apache2/libphp5.so - 取消注释包括 /private/etc/apache2/extra/httpd-userdir。 conf -在终端中重新启动 apache：sudo apachectl restart -我将 php 脚本放在文件夹中 Site

脚本只是：

```
<?php
echo "Hello";
?> 
```

当我尝试在 url 中启动它时：http://localhost/~user/connect.php 我总是看到代码结束而不是 Hello。我没有看到我做错了什么，我在网上找不到解决方案

谢谢您的回答。

昆汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:59:35.333

确保将以 .php 结尾的文件标记为脚本，您可以使用*.htaccess来执行此操作*

```
AddType application/x-httpd-php .php 
```

# iphone - 无需拉起键盘即可在 iOS 5.1 上获取听写输入

> ID：10016671
> 
> 赞同：4
> 
> 时间：2012-04-04T17:57:48.340
> 
> 标签：iphone, ios, voice

我想使用新 iPad 上的语音听写功能。我希望有一种方法可以让一个按钮开始捕获语音，而无需使用键盘上的麦克风按钮。换句话说，我不想拉起键盘来开始录制语音以进行听写。

我查看了 Apple 的文档，发现了新的[UIDictionPhrase 类](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDictationPhraseClass/Reference/Reference.html#//apple_ref/occ/cl/UIDictationPhrase)，但该类似乎仅用于在捕获和发送语音后从 Apple 发回的文本响应。

有谁知道一种方法，或者是否有可能，在不拉起键盘并点击语音输入按钮的情况下使用内置的语音听写功能？

编辑：我不是在寻找未经 Apple 批准的东西。我希望有一个经过批准的 API 可以做到这一点，但我错过了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T15:50:32.837

我自己一直在寻找类似的东西。“合法”的方法可能是直接使用 Nuance Mobile 库。显然 Siri 听写在内部使用了这个（所以它的行为应该类似）。

[http://dragonmobile.nuancemobiledeveloper.com/](http://dragonmobile.nuancemobiledeveloper.com/)

它是免费开发的，但他们对“设备激活”收取 19 美分到 24 美分的费用，并且似乎需要初始 10,000 美元的许可“预付款”才能以足够的带宽来处理实际流量。但是，如果您以 1.99 或更高版本销售应用程序，那么 0.24 美元的许可证“可能”是值得的。如果您的应用程序不是很重的语音识别，他们还有“按会话付费模式”。

[http://dragonmobile.nuancemobiledeveloper.com/public/index.php?task=memberServicesGold](http://dragonmobile.nuancemobiledeveloper.com/public/index.php?task=memberServicesGold)

我的猜测是，Apple 与 Nuance 的合同可能会阻止他们将 Dicatation 直接添加到 API 本身。

# haskell - 将错误值提升到 ErrorT monad 转换器

> ID：10016677
> 
> 赞同：5
> 
> 时间：2012-04-04T17:58:14.300
> 
> 标签：haskell, monads, monad-transformers

我认为我缺少对 monad 转换器的一些基本了解，因为我发现自己正在编写以下代码：

```
import Control.Monad.Identity
import Control.Monad.Error

liftError :: Either String Int -> ErrorT String Identity Int
liftError x = do case x of
                    Right val -> return val
                    Left err -> throwError err

gateway :: Bool -> ErrorT String Identity Int
gateway = liftError . inner

inner :: Bool -> Either String Int
inner True = return 5
inner False = throwError "test" 
```

虽然这可行，但我认为这可以更优雅地完成。特别是，我正在寻找 的替代品`liftError`，我认为我不应该为自己定义。

在不改变类型的情况下，最直接的制作`gateway`和`inner`合作方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T18:10:58.463

如果你只是稍微改变一下类型，你根本不需要做任何提升。

```
{-# LANGUAGE FlexibleContexts #-}

gateway :: Bool -> ErrorT String Identity Int
gateway = inner

inner :: MonadError String m => Bool -> m Int
inner True = return 5
inner False = throwError "test" 
```

`MonadError``ErrorT`和都有实例`Either`，因此您可以`inner`同时使用。

# php - 视频上传到机架空间失败，无法显示图像

> ID：10016679
> 
> 赞同：1
> 
> 时间：2012-04-04T17:58:21.927
> 
> 标签：php, twitter, rackspace

所以我为推特机器人做了一个自定义媒体上传服务。图片上传就好了，推特机器人返回并发布了 URL。但是，当我尝试上传视频时，它会检索 URL，但会发生这种情况：

[http://c0728267.cdn2.cloudfiles.rackspacecloud.com/1333560894-movie.mp4](http://c0728267.cdn2.cloudfiles.rackspacecloud.com/1333560894-movie.mp4)

注意到顶部文本前面的图像了吗？然而这是一个视频。我究竟做错了什么？

这是上传过程的代码

```
$oauthecho = new TwitterOAuthEcho();
$oauthecho->userAgent = 'dpkgme test app';
$oauthecho->setCredentialsFromRequestHeaders();

if ($oauthecho->verify()) {      

 // Verification was a success, we should be able to access the user's Twitter info from the responseText.
 $userInfo = json_decode($oauthecho->responseText, true);
 $twitterId = isset($userInfo['id']) ? $userInfo['id'] : null;

                    $tweet = $_POST['message'];

                    error_reporting(E_ALL);
                    ini_set('display_errors', 1);

                    // include the API
                    require("cloudfiles.php") ;

                    // cloud info
                    $username = ''; // username
                    $key ='' ; // api key
                    $container = ''; // container name

                    ob_start();

                    $localfile = $_FILES['media']['tmp_name'];
                    $filename = $_FILES['media']['name'];
                    $nf = time().'-'.$filename; 

                    ob_flush();

                    // Connect to Rackspace
                    $auth = new CF_Authentication($username, $key);
                    $auth->authenticate();
                    $conn = new CF_Connection($auth);

                    // Get the container we want to use
                    $container = $conn->create_container($container);

                    // store file information

                    ob_flush();

                    // upload file to Rackspace
                    $object = $container->create_object($nf);
                    $object->load_from_filename($localfile);

                    $uri = $container->make_public();
                    //print "Your URL is: " . $object->public_uri();

                    $imagePageUrl = $object->public_uri();

                    ob_end_flush();

$link = 'http://c0728267.cdn2.cloudfiles.rackspacecloud.com/'.$nf ; 

$shortenedurl = file_get_contents('http://gl.gy/index.php?url='.$link);
$keys = parse_url($shortenedurl); // parse the url
    $path = explode("/", $keys['path']); // splitting the path
    $last = end($path); // get the value of the last element 

    echo '<mediaurl>http://gl.gy/'.$last.'</mediaurl>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T18:05:28.670

解决了。我添加了内容类型检测。现在工作正常。

# cognos - 将图表标题作为参数传递以钻取报表

> ID：10016682
> 
> 赞同：0
> 
> 时间：2012-04-04T17:58:29.677
> 
> 标签：cognos, cognos-8

有谁知道是否有办法将图表/图形的标题传递给钻取报告？设置追溯定义时，似乎没有可供选择的选项。只有传递数据值和传递参数选项可用。

我还尝试在查询中选择字符串，以便将其用作数据项值，但由于它不用于图形的计算，因此它不会传递该值。

非常感谢任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:22:14.847

1.  单击图表轴之一，
2.  查找数据：Properties 属性
3.  单击省略号
4.  选择您要传递的数据项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T14:23:29.713

我会在图表的查询中创建一个数据项，其中包含一个等于图表标题的静态文本字符串。这不会用于生成父报表上的图表。在钻取目标报告上，确保为此图表标题创建参数。它不能出现在查询的过滤器部分，因此您可能需要在查询本身的数据项中将其设为提示宏。然后，您应该能够通过传递数据项值来链接钻取定义中的这些字段。

# ios - 在 initWithCoder 中：NSCoder（UINibDecoder）中的键是什么？（对于 UIImageView）

> ID：10016683
> 
> 赞同：8
> 
> 时间：2012-04-04T17:58:31.030
> 
> 标签：ios, uikit, interface-builder, nscoder, black-box

具体来说，我正在尝试查找图像路径。这将是一件非常有用的事情，据我所知，没有人知道如何获得。我查看了生成的 nib 文件中的密钥，并且可以在其中看到图像 URL (test.jpg)，但找不到获取它的密钥。键“UIImage”返回实际已经构造的图像（通过调用上述初始化调用`initWithCGImageStored:(CGImageRef)cgImage scale:(CGFloat)scale orientation:(UIImageOrientation)orientation`的神秘 UIKit 函数调用构造），所以这没有帮助。`GetImageAtPath`

我还尝试使用 NSKeyedArchiver 将 UIImageView 写入磁盘，但这些值似乎都不正确，test.jpg 值也不存在那里。

如果没有人能弄清楚 - 任何人都知道如何将二进制文件作为文本读取？我可以通读笔尖并解析出 URL，这总比没有好，但是无论我尝试什么格式，NSString 的构造函数都会失败。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-28T10:04:28.083

您是否尝试过在 NSKeyedUnarchiver 上实现一个类别并以这种方式捕获密钥？快速实施和调查，您会发现关键是“UIResourceName”。但是请记住，keyed unarchiver 仅返回当前解码范围内的 key 对象。这意味着您无法从根中查询此键，您必须深入挖掘对象层次结构。

下面是记录任何链接资源的代码。如何使用它取决于您。它还会记录 UIImage 何时被解码。如果你愿意，你可以在这里返回你自己的课程。

```
@interface NSKeyedUnarchiver (MyKeyedUnarchiver)
@end

@implementation NSKeyedUnarchiver (MyKeyedUnarchiver)

- (id) mydecodeObjectForKey:(NSString *)key
{
    id obj = [self mydecodeObjectForKey:key];
    if ( [key isEqualToString:@"UIResourceName"] )
        NSLog(@"The linked resource name is: %@", obj);
    return obj;
}

- (Class) myclassForClassName:(NSString *)codedName
{
    if ( [codedName isEqualToString:@"UIImageNibPlaceholder"] )
        NSLog(@"Decoding a UIImage");
    return [self myclassForClassName:codedName];
}

+ (void) load
{
    SEL origM = @selector( decodeObjectForKey: );
    SEL newM = @selector( mydecodeObjectForKey: );
    method_exchangeImplementations( class_getInstanceMethod( self, origM ), class_getInstanceMethod( self, newM ) );

    origM = @selector( classForClassName: );
    newM = @selector( myclassForClassName: );
    method_exchangeImplementations( class_getInstanceMethod( self, origM ), class_getInstanceMethod( self, newM ) );
}

@end 
```

希望这可以帮助。

# spotify - NSURL urlWithSpotifyLink：无法识别的选择器发送到类 Spotify iPhone 错误

> ID：10016689
> 
> 赞同：0
> 
> 时间：2012-04-04T17:58:50.960
> 
> 标签：spotify

我正在开发的 Spotify iPhone 应用程序运行良好，但现在我不断收到此错误：

`Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[NSURL urlWithSpotifyLink:]: unrecognized selector sent to class 0x1e7621c`

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:03:32.523

如[CocoaLibSpotify 自述文件](https://github.com/spotify/cocoalibspotify/)中所述，您需要将`-ObjC`和`-all_load`标志添加到 Xcode 中的“Other Linker Flags”构建设置中。

# jquery - 如何为 Chrome 编写 Greasemonkey 脚本以便对其进行单元测试？

> ID：10016692
> 
> 赞同：4
> 
> 时间：2012-04-04T17:58:55.600
> 
> 标签：jquery, unit-testing, google-chrome, greasemonkey, userscripts

我正在编写一个应该使用 jQuery 并在 Google Chrome 和 Firefox 上工作的 Greasemonkey 用户脚本。

我已经看到了几个如何做到这一点的例子，包括关于 SO 的非常好的答案。所有这些都归结为调用一个“注入脚本”函数，传递另一个回调函数作为参数。

该回调函数内的代码是“魔术”发生的地方，包括对`jQuery`( `$`) 对象的访问。

此解决方案工作正常。但是，使用它的后果之一是不能从回调函数内部调用定义在回调函数*之外的函数：*

```
function doSomethingImportantThatIWantToUnitTest(){ ... }

function with_jquery(callback) {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.textContent = "(" + callback.toString() + ")(jQuery)";
    document.body.appendChild(script);
};

with_jquery(function ($) {
    doSomethingImportantThatIWantToUnitTest(); // <---- meh. Not defined!
}); 
```

所以，我只能使用回调函数*内部定义的函数。*但反过来，这些函数又不能从外部调用。特别是，例如，它们不能从单元测试中调用，这对我来说非常烦人。

有没有办法为 Chrome 编写 Greasemonkey 脚本并对其进行单元测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T00:48:36.103

你应该能够将任何你想要的东西传递给回调函数，包括函数变量。

```
var f = function doSomethingImportantThatIWantToUnitTest(){ ... }

function with_jquery(callback) {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.textContent = "(" + callback.toString() + ")(jQuery,f)";
    document.body.appendChild(script);
};

with_jquery(function ($, f) {
    f(); // <---- DEFINED!
}); 
```

如果您有多个想要执行的函数，并且不想在几个不同的地方更新代码，则可以只传入一个对象或数组，该对象或数组具有所有函数作为对象属性或数组中的元素。

虽然如果是我，我只会在您使用它们的范围内定义功能。

# javascript - 只允许字母和空格 - jquery 验证插件

> ID：10016693
> 
> 赞同：0
> 
> 时间：2012-04-04T17:58:57.710
> 
> 标签：javascript, jquery, regex, validation

我正在验证一个文本字段以只允许字母和空格。

这是我正在使用的方法：

```
jQuery.validator.addMethod("lettersonly", function(value, element) { 
    return this.optional(element) || /^[a-z]+$/i.test(value);
}, "Please enter only letters"); 
```

但是正则表达式不允许单词之间有空格。

我试过了： `/^[a-z ]+$/i.test(value)`和`/^[a-z\s]+$/i.test(value)`

jQuery 版本 -`1.7.1`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T18:01:32.303

正则表达式是：

```
^[a-z\s]*$ 
```

[**现场演示**](http://jsfiddle.net/c4fcH/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-18T13:01:32.033

```
jQuery.validator.addMethod("lettersonly", function(value, element) { 
    return this.optional(element) || /^[a-zA-Z\s]*$/.test(value);
},"Please enter only letters"); 
```

替换这个：**`/^[a-z\s]+$/i`**

这样 ：**`/^[a-zA-Z\s]*$/`**

我检查了它的工作原理。

# android - 处理地图上的拖动事件

> ID：10016695
> 
> 赞同：2
> 
> 时间：2012-04-04T17:58:59.070
> 
> 标签：android, events, google-maps

我正在使用谷歌地图显示地图，然后用标记覆盖它。我希望当用户拖动地图时，从数据库中获取新标记并覆盖。但是我找不到任何可以在地图上处理 onDrag 事件的方法的引用？？

基本上我要做的是在 onDrag() 中，我会调用 use an`AsyncTask`来获取更新的标记，然后绘制它们。所以我所做的是在 mapview 中实现 onDrag()，但它仍然不起作用。

```
mapView = (MapView) findViewById(R.id.mapView); 
         LinearLayout zoomLayout = (LinearLayout)findViewById(R.id.zoom);
         mapView.setStreetView(true);
         mapView.setOnDragListener(new View.OnDragListener() {

            @Override
            public boolean onDrag(View v, DragEvent event) {
                Log.w("ontouch","touche!!!");
                center=mapView.getMapCenter();
                String s= center.getLatitudeE6()/1000000 + "&&" + center.getLongitudeE6()/1000000;

                Log.w("Center " + center.getLatitudeE6() + center.getLongitudeE6() + "ol" + centerold.getLatitudeE6() + centerold.getLongitudeE6(),"DUmp");
                Log.w("center",s.toString());
                Neighbour n=new Neighbour();//AsynTask which fetches new locations
                Log.w("searching neighbors","markers");
                n.execute(s);

                // TODO Auto-generated method stub
                return true;
            }
        }); 
```

在`Neighbour`我生成的类`GeoPoints`中，它们被绘制了。我还缺少什么吗？

# php - 在 Mac OS X 10.7.3 下安装和启用 APC Cache（默认 php）

> ID：10016696
> 
> 赞同：3
> 
> 时间：2012-04-04T17:59:03.967
> 
> 标签：php, macos, apc

在工作中切换到新的 Mac 后，我尝试在某些项目中安装 APC，因为我需要它。

我尝试使用 PECL 安装，一切似乎都很好，我在我的 php.ini 中启用了它。

之后，我尝试使用 APC 功能，但仍然在启用 APC 的位置，查看我的 phpinfo()。

然后我决定获取最新的 apc 源并自己构建它们。

问题似乎是一样的，在我的 phpinfo 上说启用了 APC，但实际上并没有启用（在我的代码上调用 apc 函数时出错）。

有人对这个问题有想法吗？

谢谢，

卢多维奇。

编辑：它似乎在 CLI 中工作，但不是通过 apache ......

这是我的 APC 的 apache 配置：

```
; Enable APC
extension=apc.so
apc.enabled = 1
apc.enable_cli = 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:04:45.303

> 编辑：它似乎在 CLI 中工作，但不是通过 apache ......

这可能意味着您有两个不同的`php.ini`文件。一个用于 CLI，一个用于 Apache。

您是否修改了中指定的那个`phpinfo()`？

# blackberry - 如何准备我的文件以在 BES 上部署？

> ID：10016698
> 
> 赞同：0
> 
> 时间：2012-04-04T17:59:12.620
> 
> 标签：blackberry, java-me

我们的一个客户想要使用我们的应用程序，但他们的 IT 政策禁止访问 App World，我相信许多 IT 政策都会这样做。

我必须向他们提供哪些文件，以便他们可以将我们的应用程序推送给他们的员工？

可以压缩文件并让他们的 IT 部门从我们服务器上的某个位置下载 zip 文件吗？我可以想象，每当我们更新应用程序时，这对我们来说会更容易：让我们所有的 BES 用户从一个中心位置下载它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T05:21:37.013

1.  在构建您的应用程序时，当您的项目 cod 文件包含同级 cod 文件时，使用[jadtool 编写正确的 jad 文件并提取 cod 文件。](http://bb-ant-tools.sourceforge.net/docs#jadtool)必要时会由 jadtool 自动完成提取。确保 jad 文件包含正确的应用程序标题，可以通过设置 jadtool 任务的键值参数来设置。否则应用程序 jad 文件将包含以下内容：com_yourcompany_yourapp.cod 而不是“您的应用程序”。

2.  使用[Alx 工具](http://bb-ant-tools.sourceforge.net/docs#alx)为项目生成 ax 文件。在 alx 任务属性中，为单独的设备操作系统版本指定单独的构建。使用[预处理器](http://bb-ant-tools.sourceforge.net/docs#preproc)为不同的设备操作系统版本提供一个源代码和多个构建。

3.  为您的客户提供两个 zip 文件。一 - 包含由`jadtool`cod 文件和 jad 文件处理的文件。如果您的客户愿意，此 zip 文件用于 OTA 安装。另一个 zip 文件 - cod 文件（未由 jadtool 处理）以及 alx 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T04:26:47.333

**从项目的可交付成果**文件夹中复制**cod**文件并将其粘贴到 PC 中的任何文件夹中。

 **现在将 cod 文件的扩展名更改为 zip 格式并将其解压缩到那里，然后您将获得许多带有 .cod 扩展名的文件。将这些所有提取的文件复制到服务器上的某个文件夹中。然后用户可以通过使用服务器文件夹的特定路径简单地下载。**

# php - PHP 创建的文件 | SSH 无法删除（权限被拒绝）

> ID：10016699
> 
> 赞同：5
> 
> 时间：2012-04-04T17:59:14.337
> 
> 标签：php, linux, file-permissions

Linux SSH

我使用在 php 中创建一个文件

```
if (!is_dir(DIR_FILE))
    mkdir(DIR_FILE, 0777);

$filename = DIR_FILE . $id . '.txt';

$handle_cf = fopen($filename, 'a');
fwrite($handle_cf, $data . "\n");
fclose($handle_cf);

chmod($filename, 0777);

chown($filename, "usr111");  //  usr111 = username
chgrp($filename, "usr111");  //  usr111 = group that is also attached to apache 
```

该文件获得以下权限。

```
-rwxrwxrwx 1 apache       apache       1447 Apr  4 12:48 D.txt
-rwxrwxrwx 1 apache       apache       1447 Apr  4 12:48 E.txt 
```

但是，当我尝试在常规用户帐户（usr111）下删除文件时。我收到以下错误

```
[usr111@host session]$ rm D.txt 
rm: cannot remove `D.txt': Permission denied 
```

注意：我可以删除根目录下的文件。

已修复！即使我在 mkdir 上为 php 使用模式设置。由于某种原因，这不起作用。我添加了以下内容。

```
 if (!is_dir($dir)) {
        mkdir($dir, 0777);

        chmod($dir, 0777);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:37:30.273

[mkdir](http://php.net/manual/function.mkdir.php)运行良好，但第二个参数不是权限，它是系统将与您当前的[umask](http://php.net/manual/function.umask.php)一起用于计算要设置的权限的模式。从手册：

> 该模式也由当前的 umask 修改，您可以使用 umask() 更改它。

您需要更改脚本以设置权限，而无需两次调用文件系统：

```
$oldUmask = umask(0); // disable umask
mkdir($path, 0777);
umask($oldUmask);  // reset the umask 
```

# c# - DataRow 和受保护的内部构造函数

> ID：10016702
> 
> 赞同：3
> 
> 时间：2012-04-04T17:59:29.830
> 
> 标签：c#, .net, constructor, datatable, datarow

如果 DataRow 类的构造函数受内部保护并且 DataTable 不继承自 DataRow，DataTable 如何使用 NewRow 方法创建 DataRow 的新实例？

例子：

```
class Program
{
    static void Main()
    {
        // error: inaccessible due to its protection level
        DataRow dr = new DataRow(); 

        // works
        DataRow dr = new DataTable().NewRow();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:18:14.360

`protected internal`表示“可被派生类访问”和“可由同一程序集中的其他类访问”。`DataTable`并且`DataRow`在同一个程序集中，因此`DataTable`可以访问所有`DataRow`的内部成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T07:07:35.773

希望你已经得到了这个答案。

但是我仍然在添加我的答案来解决“为什么以这种方式设计”。

正如**“hvd”所提到**的，它们在同一个程序集中，这就是 DataTable 能够创建 DataRow 实例的原因。

**采用这种方法的原因是：**

• 数据行包含每列的值 • 理想情况下是内部用于存储这些值的数组

• 因此，每个数据行都包含包含值的数组

• 但数据行将不知道要初始化的数组的大小

• 这取决于数据表中的列数

• 但是数据表知道表中有多少列

• 这就是为什么它需要负责创建或设置 DataRow 的数组大小

# xmlhttprequest - 在 Web 视图上显示来自 telnet 界面的高速数据的最佳方式？

> ID：10016704
> 
> 赞同：3
> 
> 时间：2012-04-04T17:59:46.263
> 
> 标签：xmlhttprequest, websocket, can-bus, tizen

我想在 Web 视图上显示来自 telnet 界面的数据。我有一个守护进程正在运行，它读取 CAN 总线数据并在 telnet 端口上每秒生成约 500 行约 40 个字符。这是一些以 100 Hz 运行的消息，而大多数其他消息以 10 或 5 Hz 运行，因此总而言之约为 500 条/秒。我想获取每个数据包中的最新值并将其显示在网页上。网页在本地加载（不是通过 HTTP），并且守护程序可能位于不同的主机上，因此存在跨域通信。

这是我尝试过但没有做的事情：

1.  使用 XMLHttpRequest。我可以打开连接并读取数据，但是当我收到 onprogress 事件时，我无法清除先前值的 responseText 字段。我无法解析 responseText 的最新值，因为它增长得非常快。我也会遇到内存问题，所以这是不行的。

2.  WebSockets 和 Socket.IO：两者都没有成功连接到 telnet 接口，因为它首先期望 HTTP 然后转换为直接套接字。

所以我的问题是，我怎样才能最好地做到这一点？我看到了一些选项，但我确信还有更多：

1.  在我尝试附加的 canlogserver 守护程序中添加 HTTP 到套接字转换。如何？（它是开源 C，所以我可以添加它）
2.  编写一个 PHP 接口，该接口通过 telnet 连接到守护进程，并可以通过 HTTP 将数据泵回 Web 视图。多次访问 IP 堆栈时，这似乎效率极低。<
3.  JS 客户端代码上还有什么其他内容可以规避我的缓冲区问题并从 telnet 服务器读取消息、显示数据然后转储缓冲区吗？我需要确保在打开套接字后收到*所有*消息，因此打开、关闭、重新打开将不起作用，因为这意味着消息会丢失。

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:38:49.403

实际上，WebSockets 有一个类似 HTTP 的握手，然后为每条消息有一些框架（握手后它们不是原始套接字）。

但是，您可以使用[websockify](https://github.com/kanaka/websockify)在 WebSocket 客户端（浏览器）和普通 TCP 套接字之间进行桥接。即使 WebSocket 协议（例如 Hixie）或浏览器不直接支持二进制类型（例如 Typed Arrays），Websockify 也使您能够向 TCP 服务器发送/接收二进制数据。

[noVNC](https://github.com/kanaka/noVNC)使用 websockify 能够直接连接到还没有内置 WebSocket 支持的 VNC 服务器。Websockify 甚至包含一个小测试，演示将基于浏览器的简单终端仿真器连接到 telnetd 服务器。**免责声明**：我制作了 websockify 和 noVNC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:04:18.903

如果您想要没有任何插件的纯 HTML5，最好的解决方案是使用 WebSockets。请记住此类技术支持的浏览器，您可以在此处找到[支持的浏览器列表](http://caniuse.com/#feat=websockets)和协议版本。

WebSockets 必须在建立连接时进行握手，通常是 http 行。之后，所有消息都应该有框架，何时接收和何时发送。浏览器会自动执行此操作，但您必须为您的守护进程实现此功能。

有现成的解决方案，取决于您使用的语言。

如果您希望自己实现 WebSockets 协议，请查看 Java 实现的源代码，并使用官方规范：[RFC6455](https://www.rfc-editor.org/rfc/rfc6455)

我相信 WebSockets 是最好的方法。Java/Silverlight/Flash 可能是其他解决方案，但它需要更多的努力并且可能不像 WebSockets 实现那样容易扩展，这将只是处理消息并在另一个 DIV 容器中创建 DOM 元素，如 DIV 接收到的消息。

# git - 具有合并子项的 Git rebase 分支

> ID：10016707
> 
> 赞同：13
> 
> 时间：2012-04-04T17:59:53.767
> 
> 标签：git, merge, branch, rebase

今天我遇到了一个问题。我的队友从master创建了分支。他在这个分支中开发了一个特性，然后在子特性的分支中开发了两个子特性。最后，他对整个事情做了两次重构提交。所以...

```
 C--D    E--F             | subfeatures
    /    \  /    \
   B------M1------M2--G--H    | feature
  /
 A-------------------K        | master 
```

通常我们在 no-fast-forward 合并到 master 之前 rebase 特性分支。但是当然这个变基失败了。重新定位的功能分支看起来像：

```
 B'--C'--D'--E'--F'--G'--H'
    /
A--K 
```

当然 C & D 的指针错了，所以我也得到了两个子特征分支“从空中”生长。如果子功能分支未合并到功能中，我了解如何修复它，但此时我很困惑。我在 rebase recovery 分支中挑选了所有内容并再次合并。这里有更简单的方法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-20T12:42:34.220

请注意，您需要 git1.7.6+`git rebase --preserve-merges`才能正常工作。

*   a`rebase --preserve-merges --onto`之前不起作用（“[`git rebase --preserve-merges --onto`不保留合并](https://stackoverflow.com/questions/9521422/git-rebase-preserve-merges-onto-doesnt-preserve-merges)”）
*   `rebase --preserve-merges`在某些情况下有问题 ：
    *   看到[这个线程](http://git.661346.n2.nabble.com/git-rebase-preserve-merges-seems-to-not-work-td5513265.html)，当合并的双方都被重播时）
    *   “ [Git: Rebaseing Merge Commits](http://apasca.blogspot.fr/2012/02/git-rebasing-merge-commits.html) ”（来自 Alexandru Pasca 的帖子）

> 长话短说：你刚刚完成了一个合并，并且在你能够推送你的提交之前有人推送了一个提交。解决方案是让 git 知道您所做的合并。

```
git rebase --preserve-merges <upstream> 
```

或者

```
git rebase -p <upstream> 
```

> 但是有一个问题，如果你的合并有你解决的冲突，它们将不会被 rebase 机器拾取。
> 你最终会再次解决冲突......至少 git 版本 1.7.5.4 是这种情况

（这需要[`git rerere`](https://git-scm.com/docs/git-rerere)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T18:38:26.673

您是否手动逐一挑选每个提交？

只需`git rebase -i master feature`按照您的意愿运行和重写历史。

# telerik - 从 RadTabStrip 中的另一个用户控件加载用户控件

> ID：10016708
> 
> 赞同：0
> 
> 时间：2012-04-04T17:59:54.193
> 
> 标签：telerik, controls

我正在使用 Telerik Rad tabstrip 控件，其中我正在加载两个用户控件 A、B。现在从 User Control A ，我想使用一些查询字符串参数加载或调用或重定向到用户控件 B。

我该怎么做 ？

下面是标记：

```
 <telerik:radtabstrip id="RadTabStrip1" runat="server" skin="Black" 
multipageid="rmpProgressReports" selectedindex="0" cssclass="tabStrip" OnTabClick="RadTabStrip1_TabClick">
            <Tabs>
                <telerik:RadTab Text="DASHBOARD" PageViewID="rpvDashBoard" TabIndex="0" Selected="True" SelectedCssClass="SelectedTab">
                </telerik:RadTab>
                <telerik:RadTab Text="REPORT DETAILS" PageViewID="rpvReportDetails" TabIndex="1" SelectedCssClass="SelectedTab">
                </telerik:RadTab>
            </Tabs>
        </telerik:radtabstrip>
<telerik:radmultipage id="rmpProgressReports" runat="server" selectedindex="0">
            <telerik:RadPageView ID="rpvDashBoard" runat="server" TabIndex="0">
            <uc1:PRDashBoards ID="PRDashBoards" runat="server" />
            </telerik:RadPageView>
            <telerik:RadPageView ID="rpvReportDetails" runat="server" TabIndex="1">
            <uc2:PRDetails ID="PRDetails" runat="server" />
            </telerik:RadPageView>
        </telerik:radmultipage> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:22:08.850

[开始编辑]

在您的主控件上，您可以创建一个事件处理程序。当您想从主控件执行该事件处理程序时（例如单击按钮），它将执行发送页面上的代码。

声明自定义事件处理程序

```
public delegate void ControlChangedEventHandler(string QueryString); 
```

然后在我的第二个控件中，为更改提供公共事件处理程序：

```
public ControlChangedEventHandler OnControlChanged; 
```

然后在提交您的控件时，检查是否已设置 OnControlChanged 然后执行。

```
 if (OnControlChanged != null)
    {
        OnControlChanged(QueryStringParameter);
    } 
```

现在在您的主控件中，创建一个函数来处理工作

```
public void OnControlChanged(string QueryString)
{
    RadTabStrip1.SelectedIndex = 1;
    rmpProgressReports.SelectedIndex = 1;
    PRDetails.LoadFromQuery(QueryString);
} 
```

然后将该函数分配为用户控件的 OnAddressChanged 的​​事件处理程序。

```
PRDashBoards.OnControlChanged += new ControlChangedEventHandler(OnControlChanged); 
```

[基于点击标签的旧答案]

您可以将 RadTabStrip 的 AutoPostBack 属性设置为 True 以允许 OnTabClick 函数触发。

在 OnTabClick 函数内部，您可以访问 UserControl 的公共属性或函数并将数据传递给它，例如，创建一个公共函数，然后根据参数使数据反弹。例如：

```
protected void RadTabStrip1_TabClick(object sender, RadTabStripEventArgs e)
{
    if (e.Tab.TabIndex == 0)
    {
        PRDashBoards.DoSomething();
    }
    else if (e.Tab.TabIndex == 1)
    {
        PRDetails.DoSomethingElse();
    }
} 
```

# database - 更新查询单列多行但不是全部

> ID：10016712
> 
> 赞同：0
> 
> 时间：2012-04-04T18:00:05.387
> 
> 标签：database, rows

我在 phpMyAdmin (MyISAM) 中使用 SQL 查询框。除非我尝试一次更新多行，否则下面的工作正常。有人可以告诉我我做错了什么吗？

UPDATE table_name SET column_name = 'Air' WHERE row_name = 's003';

如果我尝试添加说'tr003，s005'; ——这行不通。我收到消息“0 行受影响”。我已经搜索但找不到帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:00:55.393

您可以`IN`为此使用一个子句：

```
UPDATE table_name 
SET column_name = 'Air' 
WHERE row_name in ('s003', 'tr003', 's005'); 
```

# implicit - 未网格化点云的 Delaunay 点检验

> ID：10016717
> 
> 赞同：1
> 
> 时间：2012-04-04T18:00:49.890
> 
> 标签：implicit, delaunay

给定一个任意点 P，并假设我可以查找按距离排序的附近（未划分网格）点，是否有可能有效地确定形成包含 P 的德劳内三角形的三个附近点？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:30:34.030

我假设你是二维的，没有共线点。我的建议也适用于 3D。构建一个包含所有点的 Kd 树。然后寻找 P 的 2 个最近邻。构造外接圆。

考虑那个圆的中心并寻找它最近的邻居。如果您找到的第一个点（忽略三角形点）比圆半径更远，那么您就有了三角形。否则，违反了空圆属性，在这种情况下，您知道该点在三角形之外。您现在可以定义两个三角形并检查是否像以前一样验证了空圆圈属性（但如果您在圆圈中找到一个点，我认为您需要检查该点是否在三角形内）。然后就像用所有四点和你在外接圆内找到的所有其他点进行 Delaunay 三角剖分。

对于实现，您可以使用例如 CGAL，它提供了[Orthogonal_incremental_nearest_neighbor](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Spatial_searching/Chapter_main.html)、来自[Triangle_2](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Kernel_23_ref/Class_Triangle_2.html)类的 has_on_bounded_side 函数和[circumcenter](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Kernel_23_ref/Function_circumcenter.html)函数。

您还可以直接使用使用前三个点初始化的[Delaunay_triangulation_2](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Triangulation_2/Chapter_main.html#Section_37.5)类，并逐步插入点，从而使三角形面的空圆属性无效。

# ruby-on-rails - 可以使 Ohm for Ruby 中整个对象的内容过期吗？

> ID：10016719
> 
> 赞同：2
> 
> 时间：2012-04-04T18:00:52.273
> 
> 标签：ruby-on-rails, ruby, redis, ohm

一旦我的特定事件发生，我希望能够在我的 Ruby on Rails 应用程序中使基于欧姆的对象的全部内容失效。目前是否可以配合 Redis + expire 来执行此操作？使用 Ohm 时，对象有多个与之关联的键，包括索引等。我想确保一切都得到正确清理 - 这就是为什么我想知道是否有官方支持的方式来执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-20T23:41:43.473

**抱歉不行。**解决这个难题已经进行了多次尝试，但我所看到的每一个都在 Ohm 数据集中留下了伪影。它们都没有独特的属性，据我所知，它们都使欧姆数据处于不一致的状态。

一些例子：

*   [欧姆过期宝石](https://github.com/joseairosa/ohm-expire)
*   [过期.rb](https://gist.github.com/guilleiguaran/1125636)
*   [欧姆到期](https://gist.github.com/sgonyea/1649964)

例如，当一个 Ohm 模型保存时，有几个字段添加到 Redis 哈希，还有成员添加到 Redis 集。虽然您可以在整个哈希或集合上设置过期时间，但您不能使 Redis 哈希的单个字段或集合的单个成员过期。整个哈希或集合都过期了。

这是主要问题：如果这些集合和散列过期，您将丢失模型上的整个索引，或者您的唯一属性的完整记录。因此，使用任何 Ohm expire mixin 时的一个常见问题是，即使主数据键过期，调用`find`仍会从索引中返回一条记录，但哈希值为零。而且，如果您在模型中指定了唯一属性`create`，则即使数据本身已过期，您也不能再次使用过期值调用该模型而不会引发异常。

Redis 中没有过期回调，因此无法在特定键过期时触发删除哈希字段或设置成员。有几个人要求允许散列字段或集合成员在 Redis 问题列表中包含 TTL，但他们都（相当合理地）关闭了[以下答案](https://github.com/antirez/redis/issues/242#issuecomment-3512819)：

> 嗨，这不会由原始设计实现：
> 
> 键中没有嵌套类型。聚合数据类型的单个字段中没有复杂的功能。推理要复杂得多，并且受个人感觉、偏好和敏感性的影响很大，所以我没有客观的方法可以告诉你这是更好的；）
> 
> 关闭。感谢您的报告。

例如，以下是 Ohm 源代码 ( [ohm.rb, 651-699](https://github.com/soveran/ohm/blob/master/lib/ohm.rb#L651-L699) ) 中的一些注释：

```
 # The base class for all your models. In order to better understand
  # it, here is a semi-realtime explanation of the details involved
  # when creating a User instance.
  #
  # Example:
  #
  #   class User < Ohm::Model
  #     attribute :name
  #     index :name
  #
  #     attribute :email
  #     unique :email
  #
  #     counter :points
  #
  #     set :posts, :Post
  #   end
  #
  #   u = User.create(:name => "John", :email => "foo@bar.com")
  #   u.incr :points
  #   u.posts.add(Post.create)
  #
  # When you execute `User.create(...)`, you run the following Redis
  # commands:
  #
  #   # Generate an ID
  #   INCR User:id
  #
  #   # Add the newly generated ID, (let's assume the ID is 1).
  #   SADD User:all 1
  #
  #   # Store the unique index
  #   HSET User:uniques:email foo@bar.com 1
  #
  #   # Store the name index
  #   SADD User:indices:name:John 1
  #
  #   # Store the HASH
  #   HMSET User:1 name John email foo@bar.com
  #
  # Next we increment points:
  #
  #   HINCR User:1:counters points 1
  #
  # And then we add a Post to the `posts` set.
  # (For brevity, let's assume the Post created has an ID of 1).
  #
  #   SADD User:1:posts 1
  # 
```

但是人们通常尝试使欧姆数据过期的方式是使用更简单的方法（不操作唯一性或模型范围的索引）：

```
 Ohm.redis.expire(object.key, @expire)
  Ohm.redis.expire("#{object.key}:_indices", @expire) 
```

总之，在 Redis 中对数据过期进行细粒度控制的最佳方法是使用低级接口（例如[redis-rb](https://github.com/redis/redis-rb) ）设计自己的存储方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-11T22:12:53.107

与使用 Redis 相比，使 Ohm 对象过期的更可靠方法是直接检查和删除对象，例如通过使用单独的过期线程。这可以检查模型对象，检测那些已过期的对象，并通过 Ohm 请求删除。

Ohm 使用[Lua 脚本](https://github.com/soveran/ohm/blob/master/lib/ohm/lua/delete.lua)以原子方式执行删除，这会正确清除与对象关联的所有键，并从其他 Ohm 结构中删除对对象的引用。使用欧姆删除是干净到期的最佳选择。

通过使用这样的设计，您可能需要在性能与可靠性之间进行权衡：您的程序本质上将在所有已知对象上执行垃圾收集，这可能涉及大量内存访问和/或 Redis 查询。

下面是一个清理线程如何工作的示例：

```
def start_expiry_thread expiry_cycle

  Thread.new {

    while (true) do

      MyOhmModel.all.each do |object|
        object.delete if object.expired
      end

      sleep expiry_cycle

    end

  }

end 
```

在 Ohm::Timestamps 模块的支持下，可以在 Ohm 模型类（通过继承或 mixin）中按照以下行实现过期函数：

```
@max_life = 3600

def expired            
    (time_since_update > @max_life)
end

def time_since_update
    updated_secs = self.updated_at.to_i
    (Time.now.to_i - updated_secs)
end 
```

笔记：

*   引入线程时要小心——使用锁定来防止两个线程同时访问同一个对象，或者简单地避免共享对象并让你的过期线程直接进入 Redis。

*   如果您的应用程序进程有定期计划重启，另一种方法是在启动过程中执行清理，然后再启动任何其他工作线程。

*   确保您的其他应用程序代码优雅地处理到期 - 底层 Redis 对象将消失，这意味着应用程序代码持有的任何等效对象都将无效。

*   以上是生产系统代码的简化版本，因此在简化过程中可能会出现错误。

*   更一般地说：请检查您是否真的需要欧姆。如果您正在考虑在键值存储之上添加相当于关系层的内容，您应该认真考虑系统的技术设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:07:48.503

我为 Ohm 开发了一个 gem 来处理它。

看看：[ohm-expire](https://rubygems.org/gems/ohm-expire)

# firefox-addon - Firefox中的measureit替代品？

> ID：10016723
> 
> 赞同：3
> 
> 时间：2012-04-04T18:00:59.510
> 
> 标签：firefox-addon, measurement

我曾经使用一个名为 measureit 的 Firefox 插件。现在它无法正常工作，因为 Firefox 一直在更新，并且开发人员还没有推出新版本的 Firefox 支持的测量版本。有人知道 FF 的一个好的像素标尺插件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T18:02:13.207

您可以下载[Web 开发人员工具栏](http://chrispederick.com/work/web-developer/)。它有一个内置的尺子。安装它后，它将出现在 Firefox 的菜单栏中。单击其他，然后单击显示标尺。

您也可以尝试搜索“像素标尺”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-14T10:18:27.653

不是 Firefox 扩展（它是 Windows 应用程序），但您可以尝试[Ruler](https://ruler.codeplex.com/)。照它说的做也很简单。您甚至不需要安装它，只需单击并使用。

它可以停留在其他窗口的顶部，您可以拖动边框来调整大小并在垂直和水平标尺之间切换。您甚至可以打开多个实例。

我对 MeasureIt 有同样的问题，它停止使用一些 Firefox 更新。到目前为止，我找到了 Ruler 并对此感到满意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-19T23:09:57.163

自从我升级了 Firefox 开发者版之后，我之前的插件就出现了严重的不兼容问题。

Measureit 附加组件是新浏览器中未更新的扩展之一。

我发现这个替代方案虽然不如 Measure it 好，但效果很好。[https://addons.mozilla.org/en-US/firefox/addon/browser-ruler/](https://addons.mozilla.org/en-US/firefox/addon/browser-ruler/)

如果您使用的是 Firefox 开发人员选项，请单击工具图标 > 选择获取更多工具 > 搜索“标尺”并添加它。

# ios - 带有 phonegap 的 Jquery mobile 不适用于移动应用程序

> ID：10016725
> 
> 赞同：1
> 
> 时间：2012-04-04T18:01:10.240
> 
> 标签：ios, jquery-mobile, cordova

我想说我解决了这个问题，但是如果其他人有同样的问题，我想在这里发布这个作为参考。

我一直在关注本教程：[http](http://wiki.phonegap.com/w/page/41524872/JQuery%20Mobile%20Tutorial%20(iOS) ://wiki.phonegap.com/w/page/41524872/JQuery%20Mobile%20Tutorial%20(iOS )

将 jquery mobile 合并到我的应用程序中。我正在使用最新的 jquery 库，它是 1.7.2。

我无法获得教程中显示的结果。造型，行为，没有什么能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:47:53.913

我已经把我的头从桌子上砸了 6 个小时，试图让这些东西正常工作，最后用以下组合解决了它；

用过的; cordova-1.6.0.js（在标题中带有相关的脚本声明）

jquery.mobile-1.1.0.css

jquery-1.6.4.min.js

jquery.mobile-1.1.0.js

这是一个非常令人沮丧的早晨。感谢您将我推向正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:03:09.783

原来 jquery mobile 不支持最新的 jquery 库。

一旦开始使用 jquery 1.6.1，一切都开始看起来和表现如教程中所示。为什么它与旧版本不兼容是我无法理解的。我可能应该一步一步地遵循教程，但老实说，我认为新版本的 jquery 应该更好并且向后兼容。

# vb.net - 如何使用 VB.NET 在 AD 中搜索整个域的用户

> ID：10016728
> 
> 赞同：2
> 
> 时间：2012-04-04T18:01:27.097
> 
> 标签：vb.net, active-directory, ldap

我了解如何使用准确的 LDAP url 查找用户

```
LDAP://domain/CN=Username,OU=Users,DC=domain,DC=com 
```

但是如果我需要在不查看特定 OU 的情况下找到用户怎么办。如何搜索整个域？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T19:23:52.723

如果您使用的是 .NET 3.5 或更高版本，则应查看`PrincipalSearcher`该类：

```
' create your domain context
Dim ctx As New PrincipalContext(ContextType.Domain)

' define a "query-by-example" principal - here, we search for a UserPrincipal 
' and with the first name (GivenName) of "Bruce" and a last name (Surname) of "Miller"
Dim qbeUser As New UserPrincipal(ctx)
qbeUser.GivenName = "Bruce"
qbeUser.Surname = "Miller"

' create your principal searcher passing in the QBE principal    
Dim srch As New PrincipalSearcher(qbeUser)

' find all matches
For Each found As var In srch.FindAll()
    ' do whatever here - "found" is of type "Principal" - it could be user, group, computer.....          
Next 
```

如果您还没有 - 一定要阅读 MSDN 文章[Managing Directory Security Principals in the .NET Framework 3.5](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)，它很好地展示了如何充分利用 .NET Framework 中的新功能`System.DirectoryServices.AccountManagement`。或查看[System.DirectoryServices.AccountManagement](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)命名空间上的 MSDN 文档。

当然，根据您的需要，您可能希望在您创建的“示例查询”用户主体上指定其他属性：

*   `DisplayName`（通常：名字 + 空格 + 姓氏）
*   `SAM Account Name`- 您的 Windows/AD 帐户名称
*   `User Principal Name`- 您的“username@yourcompany.com”样式名称

您可以在 上指定任何属性`UserPrincipal`并将其用作`PrincipalSearcher`.

或者，如果您只想查找特定用户 - 试试这个：

```
' find a user
Dim user As UserPrincipal = UserPrincipal.FindByIdentity(ctx, "SomeUserName")

' do something here....     
If user IsNot Nothing Then
   . .....
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:17:29.303

只需从 LDAP 路径中省略 OU 结构。这会将搜索设置在域的根目录。

```
LDAP://DC=domain,DC=com 
```

并使用过滤器查找特定用户：

```
(&(objectClass=User)(cn=" & susername & ")) 
```

# vb.net - 将互操作表单保持在 VB6 应用程序的顶部

> ID：10016732
> 
> 赞同：1
> 
> 时间：2012-04-04T18:01:32.820
> 
> 标签：vb.net, winforms, vb6, interop, winforms-interop

我正在使用 InteropFormsToolkit 2.1 版。我试图确保当 .NET 表单从 VB6 表单上引发的事件加载时，.NET 表单可以保持在顶部。我已经尝试了很多东西，但什么都做不了。我已经尝试了从 z-index 到将托管调用添加到 User32.dll 以将其推到最前沿等的所有方法。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:30:56.847

在 vb6 中，您可以用作：

```
Private Sub Form_Load()
OnTopMe Me, True
End Sub 
```

和模块中的以下代码

```
Declare Function SetWindowPos Lib "User32" (ByVal hwnd As Long, ByVal hWndInsertAfter As Long, ByVal X As Long, ByVal Y As Long, ByVal cX As Long, ByVal cY As Long, ByVal wFlags As Long) As Long

Public Sub OnTopMe(FormID As Object, onTop As Boolean)
     If onTop = True Then SetWindowPos FormID.hwnd, HWND_TOPMOST, 0, 0, 0, 0, SWP_NOMOVE Or SWP_NOSIZE
     If onTop = False Then SetWindowPos FormID.hwnd, HWND_NOTOPMOST, 0, 0, 0, 0, SWP_NOMOVE Or SWP_NOSIZE
End Sub 
```

我不知道如何在.Net中做到这一点

# android - 在浏览器中工作的 sqlite 中插入查询，但在 android 中没有

> ID：10016733
> 
> 赞同：0
> 
> 时间：2012-04-04T18:01:32.930
> 
> 标签：android, eclipse, sqlite

我真的在这段代码上花了很多时间，但我无法解释数据库无法正常工作的任何原因

我只想插入一行。所以我创建了这个函数：

无效插入fav（字符串k）{

```
 myDataBase = khol();
    Cursor cur = myDataBase.rawQuery("SELECT " + colname + " from "
            + deptTable + " WHERE " + col3 + "=" + "'" + k + "'",
            new String[] {});
    cur.moveToFirst();
    String area = cur.getString(cur.getColumnIndexOrThrow(colname));
    cur = myDataBase.rawQuery("SELECT " + col2 + " from " + deptTable
            + " WHERE " + col3 + "=" + "'" + k + "'", new String[] {});
    cur.moveToFirst();
    String disease = cur.getString(cur.getColumnIndexOrThrow(col2));
    myDataBase.rawQuery(
            "INSERT INTO " + favtable + " ("+colname+", "+col2+", "+col3+")"
                    + "Values (" + "'" + area + "'" + ", " + "'" + disease
                    + "'" + ", " + "'" + k + "'" + ")", new String[] {});
    myDataBase.close();
} 
```

当我在 sqlite 浏览器中运行此查询时，它运行良好，但是当在模拟器中运行应用程序时实际调用此函数时，没有插入任何内容。

khol() 是一个打开数据库的函数。这是 khol() 函数的代码：

```
public SQLiteDatabase khol() throws SQLException {

    // Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null,
            SQLiteDatabase.OPEN_READWRITE);
    return myDataBase;
} 
```

其中 DB_PATH 和 DB_NAME 是：

```
private static String DB_PATH = "/data/data/example.SQLitetest/";

private static String DB_NAME = "desicures.db"; 
```

虽然 khol() 在其他查询中工作正常，但可能是我在这里做错了什么......

请帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:12:43.847

您可能想尝试使用[myDatabase.insert()](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insert%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)而不是 rawQuery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:20:57.837

正如[文档](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)所说 `rawQuery`：

```
Runs the provided SQL and returns a Cursor over the result set. 
```

和`execSQL(String sql)`：

```
Execute a single SQL statement that is NOT a SELECT or any other SQL statement 
that returns data.

    Execute a single SQL statement that is not a query. For example, CREATE TABLE, 
DELETE,INSERT, etc. Multiple statements separated by ;s are not supported. it takes a 
write lock 
```

尝试使用 execSQL 而不是 rawQuery.like

```
myDataBase.execSQL(
            "INSERT INTO " + favtable + " ("+colname+", "+col2+", "+col3+")"
                    + "Values (" + "'" + area + "'" + ", " + "'" + disease
                    + "'" + ", " + "'" + k + "'" + ");"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:17:53.463

rawQuery() 方法返回游标，你不能使用这个方法进行插入，所以

```
myDataBase.rawQuery(
        "INSERT INTO " + favtable + " ("+colname+", "+col2+", "+col3+")"
                + "Values (" + "'" + area + "'" + ", " + "'" + disease
                + "'" + ", " + "'" + k + "'" + ")", new String[] {}); 
```

是错误的方法。

你可以使用 insert() 方法，你可以尝试followin

```
ContentValues values = new ContentValues();
values.put(colname , area);
values.put(col2 , disease);
values.put(col3 , k);
long rowID = db.insert(favtable, null, values);
System.out.println("Added Row No: "+rowID); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T18:26:49.813

关于代码的三件事

*   execSQL 而不是 rawQuery
*   在 - 中使用`?`和参数，`String[]`这样更安全，可以处理`k = "ha'ck"`
*   友好并关闭光标

大概是这样：

```
myDataBase = khol();
Cursor cur = myDataBase.rawQuery("SELECT " + colname + " from "
        + deptTable + " WHERE " + col3 + "=?",
        new String[] { k });
cur.moveToFirst();
String area = cur.getString(cur.getColumnIndexOrThrow(colname));
cur.close();
cur = myDataBase.rawQuery("SELECT " + col2 + " from " + deptTable
        + " WHERE " + col3 + "=?", new String[] { k });
cur.moveToFirst();
String disease = cur.getString(cur.getColumnIndexOrThrow(col2));
cur.close();

// either
myDataBase.execSQL(
        "INSERT INTO " + favtable + " ("+colname+", "+col2+", "+col3+")"
                + "Values (?, ?, ?)",
                new String[] { area, disease, k });
// or 
ContentValues cv = new ContentValues();
cv.put(colname, area);
cv.put(col2, disease);
cv.put(col3, k);
long newRowId = myDataBase.insert(favtable, colname, cv);

myDataBase.close(); 
```

此外，您可能需要检查游标是否`null`/包含值。`cur.getString`可能会给您一个`NullPointerException`错误或错误，因为没有列（如果您的数据库没有数据）。

此外，您的查询不应该需要多个查询，您可以一次请求多个列：

```
cur = myDataBase.rawQuery("SELECT " + colname + "," + col2 + " from "
        + deptTable + " WHERE " + col3 + "=?", new String[] { k, k });
if (cur.moveToFirst()) {
    // starting at 0 columns are ordered in the way you select them
    String area = cur.getString(0);
    String disease = cur.getString(1);
} 
```

# visual-studio-2010 - 将库从 VS 2008 重新编译到 VS 2010

> ID：10016735
> 
> 赞同：0
> 
> 时间：2012-04-04T18:01:34.813
> 
> 标签：visual-studio-2010

我在 VS 2010 中打开了库的 VS 2008 解决方案，它会自动转换它。然后我在Debug DLL下构建，Release DLL。但这只会给我 .dll 文件和增量链接器文件 (.ilk)。如何获取 .dll 的相应 .lib 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:05:06.360

它们应该在中间目录下。检查项目属性（配置属性 -> 常规）以查看它在哪里

# html - div 容器和加载时间

> ID：10016736
> 
> 赞同：0
> 
> 时间：2012-04-04T18:01:37.860
> 
> 标签：html, css, performance, containers, css-tables

我刚刚将网站从表格布局切换到 CSS 布局。我知道的表格的缺点之一是整个表格必须在该表格的任何部分显示在屏幕上之前完成加载。

我在 CSS 布局上使用容器 Div。似乎同样的事情正在这里发生。在加载整个内容之前，似乎没有显示容器 div 的任何部分。这是真的还是只是我的想象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:07:55.843

是的，你正在犯同样的错误。

为什么我们使用 div？所以我们可以保持数据逐行独立。只有在这种情况下，您才能获得性能。像这样

```
<div>some data</div>
<div>row2 data</div>
.....................
....................
<div>row n data</div> 
```

# c# - 将 SpecFlow 功能连接到步骤。链接不断断开

> ID：10016737
> 
> 赞同：0
> 
> 时间：2012-04-04T18:01:45.003
> 
> 标签：c#, cucumber, bdd, specflow, gherkin

早上好。

我遇到了 SpecFlow 的问题，我不知道如何解决它。将不胜感激任何帮助。所以...

让我们看一个简单的 SpecFlow 功能：

```
Given the JoeDoe user is associated to an existing staff account with the following information
  | Field       | Value         |
  | First Name  | Joe           |
  | Last Name   | Doe           | 
```

它连接到以下步骤：

```
 [Given(@"the JoeDoe user is associated to an existing staff account with the following information")]
        public void GivenTheJoeDoeUserIsAssociatedToAnExistingStaffAccountWithTheFollowingInformation(Table table)
       {
        ...logic
       } 
```

但是，一旦我更改步骤以接受来自 Feature 的参数，如下所示：

```
 [Given(@"the (*.) user is associated to an existing staff account with the following information")]
        public void GivenTheJoeDoeUserIsAssociatedToAnExistingStaffAccountWithTheFollowingInformation(string userName, Table table)
       {
       ...logic
       } 
```

功能到步骤的链接中断。从那时起，如果我在功能中按`F12`（或转到 Step Definition），Visual Studio 会告诉我没有匹配的步骤，并且：

“未找到此步骤的匹配步骤绑定！是否要将绑定骨架复制到剪贴板？”

当然，测试场景没有运行。

这是怎么回事？我似乎做的一切都是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:04:32.883

你有没有尝试过：

```
 [Given(@"the (.*) user is associated to an existing staff account with the following information")]
    public void GivenTheJoeDoeUserIsAssociatedToAnExistingStaffAccountWithTheFollowingInformation(string userName, Table table)
   {
   ...logic
   } 
```

它应该`(.*)`代替`(*.)`.

# sql - Access/VBA 和 SQL WHERE 子句格式问题

> ID：10016740
> 
> 赞同：0
> 
> 时间：2012-04-04T18:01:59.553
> 
> 标签：sql, ms-access, vba, where-clause, ms-access-2003

我已经阅读了大量的问题和解决方案，但我无法弄清楚我做错了什么。

```
BounceDate = DateValue(txtBounceDate.Value)
bncSql = "DELETE _BounceMaster.* FROM _BounceMaster" & _
    " WHERE _BounceMaster.DateCheck >= #" & BounceDate & "#;"
DoCmd.RunSQL bncSql 
```

_BounceMaster.DateCheck 采用日期/时间格式，我认为这可能是问题所在，但我无法弄清楚它应该采用什么不同的格式，或者如何到达那里。据我所知，BounceDate 是正确的——即使使用 CDate 也没有什么不同。我遇到了两个数据不匹配错误，目前，使用上面的代码，我遇到了语法错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T19:45:19.270

我想问题来自日期格式。该`BounceDate`变量是 DateTime 类型，因此当您与字符串类型变量连接时，VBA 会使用区域设置中的日期格式自动将 DateTime 变量转换为字符串类型。

我没记错，MS Access 的 SQL 解释器只对 mm/dd/yyyy 日期格式感到舒服，所以请试试这个：

```
BounceDate = DateValue(txtBounceDate.Value)
bncSql = "DELETE _BounceMaster.* FROM _BounceMaster" & _
    " WHERE _BounceMaster.DateCheck >= #" & Format(BounceDate, "mm/dd/yyyy") & "#;"
DoCmd.RunSQL bncSql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:03:48.653

它应该是

```
DELETE FROM _BounceMaster 
```

不是

```
DELETE _BounceMaster.* FROM _BounceMaster 
```

您应该使用参数化查询，因为您的代码会受到 SQL 注入攻击。

# ms-access - 如何比较两个access数据库来比较数据库记录

> ID：10016741
> 
> 赞同：-1
> 
> 时间：2012-04-04T18:02:02.233
> 
> 标签：ms-access

我如何比较两个 MS ACCESS 2007 数据库。两个数据库都包含具有相同字段广告结构的相同表。我需要比较两个数据库之间的记录值以检测记录值的任何差异。

```
 ACCESS 2007 Database1                                

             serial no.     |    NAME         | ADDRESS                   
                1                smith           street 1                                
                2                john            street 4                                  
                3                alix            street 8                   

                           ACCESS 2007 Database2

               serial no.|   NAME     | ADDRESS
               1           smith      street 1              
               2           jhn        stret 4               
               3           alix       street 8 
```

我需要一个用于 ms 访问的 VBA 代码，它可以检测记录的差异，就像序列号 2 的记录一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T08:53:47.417

```
Option Compare Database

Private Sub Command4_Click()

Dim tablename1, tablename2 As String
tablename1 = Text0.Value
tablename2 = Text2.Value

'On Error GoTo Err_cmdValidateGeneralInfo_Click
Dim F As DAO.Field
Dim rs As DAO.Recordset
Dim rs1 As DAO.Recordset
Set curDB = CurrentDb()
'If Me.DateModified = Date Then
    'Adds new employees to the TT_GeneralInfo table in the FTEI_PhoneBook.mdb - which is used thru out the AP databases.
 '   DoCmd.OpenQuery "qryEmpData_TT_General"

strsql = "Select * from " & tablename1

Set rs = curDB.OpenRecordset(strsql)

strsql1 = "Select * from " & tablename2

   DoCmd.CopyObject , "Unmatched_records", acTable, tablename1
   curDB.Execute "DELETE FROM Unmatched_records"

Set rs1 = curDB.OpenRecordset(strsql1)
    Do Until rs.EOF
      For Each F In rs.Fields
        If rs.Fields(F.Name) <> rs1.Fields(F.Name) Then
          'rs.Edit
          strsql = "Select * into test from " & tablename1 & " where " & F.Name & " = """ & rs.Fields(F.Name) & """"
          DoCmd.RunSQL strsql

          If DCount(F.Name, "test") <> 0 Then
          GoTo append_unmatch

          'appending unmacthed records
append_unmatch:

          strsql2 = "insert into Unmatched_records Select * from test"
          DoCmd.RunSQL strsql2

          'if record doesnt match move to next one
          GoTo Nextrecord
          End If
         ' rs.Fields(F.Name) = rs1.Fields(F.Name)
         ' rs.Update
        End If
      Next F

Nextrecord: 
rs.MoveNext
rs1.MoveNext
    Loop

   'To check whether tables matched or not
    Dim rs2 As DAO.Recordset
    strsql3 = "select * from Unmatched_records"
    Set rs2 = curDB.OpenRecordset(strsql3)
    For Each F In rs2.Fields
    If DCount(F.Name, "Unmatched_records") <> 0 Then
    MsgBox ("The two tables didnt match. Check table test for unmatching reocrds.")
    Else
    MsgBox ("Tables match!")
    End If
Exit Sub
   Next F
    rs2.Close

    End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:57:02.517

您应该做的第一件事是将其中一个表链接到另一个数据库，例如将数据库 2 表链接到数据库一个（这允许将两者一起查询）然后您可以使用这个简单的示例和连接来确定是否所有字段根据序列号串在一起匹配：

```
SELECT T1.*, T2.*
FROM Table1 As T1, Table2 As T2
WHERE T2.[serial no.] = T1.[serial no.]
AND T2.[NAME] & T2.[ADDRESS] <> T1.[NAME] & T1.[ADDRESS] 
```

如果您愿意，还可以指定具有各自条件的列。注意：这是假设您只查找序列号不匹配的差异，如果您还需要识别可能出现在一个表中但不在另一个表中的记录，那么您将需要使用“不匹配”查询，查询设计师可以帮助您或回帖，我可以更新我的答案。

# ldap - LDAP：组织单位可以成为组的成员吗？

> ID：10016744
> 
> 赞同：3
> 
> 时间：2012-04-04T18:02:05.723
> 
> 标签：ldap

我只是想知道，对于 LDAP 结构，一个组是否可以有一个组织单位作为成员？还是我几乎可以保证组对象下的任何内容都是用户或另一个组？

还有以下保证吗？

1) 用户的父级是组或组织单元
2) 组的父级是组或组织单元
3) 组织单元的父级是组织单元或根

谢谢，我对 LDAP 还是很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T19:19:19.357

**不，OU 不能是 LDAP 组的成员**
*（至少不能在 Windows Active Directory 中，这是我知道的 LDAP 实现，我在这里谈论）*

组织单位是可以包含其他对象的**容器**- 安全主体，如用户和计算机帐户以及组。

容器也不能分配给它们任何权限——它们不是安全主体，您不能授予文件或目录或类似内容的 OU 权限。

组可以包含安全主体作为其成员（其他组、用户或计算机），但不能包含容器。无论如何，包含容器是没有意义的——因为它们不是“安全主体”，例如它们不能分配给它们任何权限，因此将它们添加到组中也没有任何逻辑意义。

这与其他目录系统（如 Novell 的 NDS / eDirectory）完全不同，其中组织和 OU 确实具有权限（尽管我不记得您是否可以将这些对象添加到组的成员列表中）

此外，您需要将**包含**（组或用户始终**包含**在一个容器中）和组成员身份（用户可以是许多组的成员，但他不**包含**在这些组中 - 只是其中的成员）分开 - 它们是两个完全不同的概念。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T19:32:46.927

使用`groupOfUniqueNames`objectClass，可选的多值属性`uniqueMember`可以是任何有效的专有名称，包括任何或所有 RDN 组件为`ou`或的专有名称`organizationalUnit`。

## 也可以看看

*   [RFC4519](https://www.rfc-editor.org/rfc/rfc4519#section-3.6)

*请注意，`groupOfUniqueNames`require的一些实现`uniqueMember`，而另一些则没有。*

# c# - 排列 2 列表 到列表框

> ID：10016745
> 
> 赞同：0
> 
> 时间：2012-04-04T18:02:07.223
> 
> 标签：c#, winforms, listbox

我有 2 个列表要放入我的列表框中，第一个列表包含名称，第二个包含数字我的问题是某些名称很长，因此数字不能显示在同一行中如何以适当的方式输入？

```
listBox.Items.Add("Name" + "\t\t\t" + "Number");
for (int i = 0; i < lists.Count; i++)
{
    listBox.Items.Add(lists._namesList[i] + "\t\t\t" + lists._numbersList[i]);
} 
```

**这里的更新**是我尝试过的`ListView`

```
listViewProtocols.View = View.Details;
listViewProtocols.Columns.Add("Name");
listViewProtocols.Columns.Add("Number");

for (int i = 0; i < lists._protocolsList.Count; i++)
{
    listViewProtocols.Items.Add(new ListViewItem{ lists._nameList[i], lists._numbersList[i].ToString()});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:31:28.203

考虑使用带有`Details`样式的 ListView 组件。正如@Yuck 在评论中提到的那样，它会给你你需要的效果。

![列表视图示例](../Images/cadcf7bc6561636fef12d70e515c1453.png)

从 2 个单独的列表中填充有点尴尬，但可以使用以下代码：

```
listView1.View=View.Details;
listView1.Columns.Add("Name");
listView1.Columns.Add("Number");

string[] names= { "Abraham", "Buster", "Charlie" };
int[] numbers= { 1018001, 1027400, 1028405 };

for(int i=0; i<names.Length; i++)
{
    listView1.Items.Add(
        new ListViewItem(new string[] {
        names[i], numbers[i].ToString() }));                
} 
```

* * *

我强烈建议做一个结构数组而不是像这样的单独列表：

```
public struct Record
{
    public string name;
    public int number;

    public string[] ToStringArray()
    {
        return new string[] {
            name,
            number.ToString() };
    }
} 
```

并像这样使用：

```
 listView1.View=View.Details;
    listView1.Columns.Add("Name");
    listView1.Columns.Add("Number");

    Record[] list=new Record[] {
        new Record() { name="Abraham", number=1018001 },
        new Record() { name="Buster", number=1027400 },
        new Record() { name="Charlie", number=1028405 }
    };

    for(int i=0; i<list.Length; i++)
    {
        listView1.Items.Add(
            new ListViewItem(list[i].ToStringArray()));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:06:17.630

我能想到几个选择：

1.  使列表框更宽，以便它可以容纳更长的文本或向其添加水平滚动条。
2.  将名称的最大长度限制为 20 个字符，并将多余的字符替换为`...`.
3.  可能最好的解决方案是使用网格而不是列表框 - 您需要显示两列数据，这正是网格的用途。

# ruby - Ruby File.read 与 File.gets

> ID：10016749
> 
> 赞同：1
> 
> 时间：2012-04-04T18:02:24.100
> 
> 标签：ruby, file-io

如果我想将 src 文件的内容附加到 Ruby 中 dest 文件的末尾，最好使用：

```
 while line = src.gets do 
```

或者

```
 while buffer = src.read( 1024 ) 
```

我已经看到这两种方法都使用过，想知道什么时候应该使用每种方法，为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T18:06:47.127

一种用于读取“行”，一种用于读取*n*个字节。

虽然字节缓冲可能会更快，但其中很多可能会消失在操作系统中，无论如何都可能会缓冲。IMO 它与读取的上下文有更多的关系——你想要线条，还是只是在打乱数据块？

也就是说，在您的特定环境中进行性能测试可能会在决定时有所帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T18:09:26.673

读取针对不同情况量身定制的文件时，您有多种选择。

逐行读取文件，但一次只存储一行：

```
while (line = file.gets) do
  # ...
end 
```

一次读入文件的所有行：

```
file.readlines.each do |line|
  # ...
end 
```

将文件读取为一系列块：

```
while (data = file.read(block_size))
  # ...
end 
```

一次读入整个文件：

```
data = file.read 
```

这实际上取决于您使用的数据类型。通常`read`更适合二进制文件，或者您希望将其作为一个大字符串的文件。`gets`和`readlines`相似，但`readlines`如果您确信文件适合内存，则更方便。不要在数 GB 的日志文件上执行此操作，否则当您的系统开始交换时，您将受到伤害。用于`gets`这样的情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T18:07:47.187

`gets`将根据分隔符读取到行尾

`read`一次读取 n 个字节

这完全取决于您要阅读的内容。

`read`如果您的 src 文件具有不可预测的行长，则使用它可能会更有效。

# sql - SQL Server 中的 Hashset 等效项

> ID：10016750
> 
> 赞同：7
> 
> 时间：2012-04-04T18:02:26.657
> 
> 标签：sql, sql-server, hash, cluster-computing, hashset

我想创建一个始终由唯一键访问的大表（大约 450 亿行）。

在 DB 之外，保存它的最佳结构是 Dictionary 或 HashSet，但当然由于数据的大小，不可能在数据库之外执行此操作。

SQL Server 是否提供针对键值访问优化的结构？我知道聚集键非常快，但它仍然是一个索引，因此会有一些与遍历索引页相关的额外磁盘读取。我想从 SQL Server 获得的是一种“本机”结构，它将数据存储为键值对，然后可以根据键访问值。

换句话说，我的问题是如何在 SQL Server 中存储 450 亿行并在没有索引的情况下有效地访问它们，集群或非集群，因为读取索引非叶页可能会导致大量 IO，并且由于每个值都可以通过唯一键访问，应该有一个结构，其中键的哈希解析为值的物理位置。要获得 1 个值，我们需要进行 1 次读取（除非存在哈希冲突）。

（Oracle 中的等价物是 Hash Cluster）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T18:06:34.333

SQL server 中没有这样的东西。您唯一的选择是索引。如果要请求给定键的所有列，则应使用聚集索引。如果您只想请求一个子集，则应使用非聚集索引，仅包括您想要的列，如下所示：

```
 create index IX_MyBigTable on MyBigTable(keyColumn) include (col1, col2, col3youneed); 
```

这将非常有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:09:46.850

根据我的基准，最好的方法是为键创建一个哈希列。[详情](https://stackoverflow.com/a/10354519/2019014)。

# android - 保存复选框状态

> ID：10016752
> 
> 赞同：4
> 
> 时间：2012-04-04T18:02:30.620
> 
> 标签：android, checkbox

我很新，如果有人可以演示在 android 应用程序内的 java 中保存许多复选框状态所需的代码，我将不胜感激。

假设我有一个用户需要完成一项任务的工具列表（十个或更多），并希望他们能够检查每个工具并保存该数据（在应用程序中，而不是 sQlite），以便在何时记录他们返回应用程序。

我知道这是如何完成的，但我真的觉得我需要查看代码才能正确理解。

```
import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.widget.CheckBox;

public class CheckBoxTest extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.checkboxtest);
    CheckBox cb1,cb2,cb3,cb4;

    cb1 = (CheckBox)findViewById(R.id.checkBox1);
    cb2 = (CheckBox)findViewById(R.id.checkBox2);
    cb3 = (CheckBox)findViewById(R.id.checkBox3);
    cb4 = (CheckBox)findViewById(R.id.checkBox4);   
     }
 } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-20T00:20:20.977

使用以下代码在 SharedPreference 中存储和检索数据。您在 SharedPreference 中保存每个复选框状态

//从SharedPreference中获取值

```
SharedPreferences preferences = getApplicationContext().getSharedPreferences("PROJECT_NAME", android.content.Context.MODE_PRIVATE);
boolean value = preferences.getBoolean("KEY", false);
String value = preferences.getString("KEY"); 
```

//在SharedPreference中保存值

```
SharedPreferences preferences = getApplicationContext().getSharedPreferences("PROJECT_NAME", android.content.Context.MODE_PRIVATE);
SharedPreferences.Editor editor = preferences.edit();
editor.putString("KEY", value);
editor.putBoolean("KEY", value);
editor.commit(); 
```

看看它的一些小的变化::::

```
public class CheckBoxTest extends Activity implements OnCheckedChangeListener {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.favorites_add_button);
            CheckBox cb1,cb2,cb3,cb4;

            cb1 = (CheckBox)findViewById(R.id.checkBox1);
            cb1.setChecked(getFromSP("cb1"));
            cb1.setOnCheckedChangeListener(this);
            cb2 = (CheckBox)findViewById(R.id.checkBox2);
            cb2.setChecked(getFromSP("cb2"));
            cb2.setOnCheckedChangeListener(this);
            cb3 = (CheckBox)findViewById(R.id.checkBox3);
            cb3.setChecked(getFromSP("cb3"));
            cb3.setOnCheckedChangeListener(this);
            cb4 = (CheckBox)findViewById(R.id.checkBox4);
            cb4.setChecked(getFromSP("cb4"));
            cb4.setOnCheckedChangeListener(this);

        }
        private boolean getFromSP(String key){
        SharedPreferences preferences = getApplicationContext().getSharedPreferences("PROJECT_NAME", android.content.Context.MODE_PRIVATE);
        return preferences.getBoolean(key, false);
        }
        private void saveInSp(String key,boolean value){
        SharedPreferences preferences = getApplicationContext().getSharedPreferences("PROJECT_NAME", android.content.Context.MODE_PRIVATE);
        SharedPreferences.Editor editor = preferences.edit();
        editor.putBoolean(key, value);
        editor.commit();
        }
        @Override
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            // TODO Auto-generated method stub
            switch(buttonView.getId()){
            case R.id.checkBox1:
            saveInSp("cb1",isChecked);
            break;
            case R.id.checkBox2:
            saveInSp("cb2",isChecked);
            break;

            case R.id.checkBox3:
            saveInSp("cb3",isChecked);
            break;

            case R.id.checkBox4:
            saveInSp("cb4",isChecked);
            break;
            }

        }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-03T08:47:13.167

嗨，我尝试了上述方法，但在重新启动或重新启动我的 android 设备后，我会失去选项菜单的选中状态。我想说，为了解决这个问题：

您有 2 个选项：

1.  在活动的生命周期内获得共享偏好值。

2.  打电话`.clear`之前`.commit`

看我的回答：

[重新启动Android后自定义小部件中的Android持久可检查菜单](https://stackoverflow.com/questions/36939380/android-persistent-checkable-menu-in-custom-widget-after-reboot-android)

# jquery - PreventDefault not working on second click

> ID：10016756
> 
> 赞同：2
> 
> 时间：2012-04-04T18:02:54.420
> 
> 标签：jquery, preventdefault

I have the following html code:

```
<div>
  <span>Products per page:</span>
  <a class="selectview" href="/womens-clothing/shorts?page=1&view=20">20</a>
  <a class="selectview" href="/womens-clothing/shorts?page=1&view=200">200</a>
<div> 
```

and the jQuery is as follows:

```
jQuery('.selectview').click(function (ev) {

  ev.preventDefault();

  var alink = jQuery(this).attr('href'); 

  var view = getLinkVars(alink)["view"]; 
  var page = jQuery("#currentpageno").val();

  alert(alink);
  alert(view);
  alert(page);

  run_ajax(view,page);

}); 
```

The code runs fine the first time if I click on any of the links; I see the alerts and the ajax code runs fine, but when I click on it the second time, the whole page is refreshed and no alerts are shown. Then if I click on it again it works, then when I click on it again it works, and so on.

What could I be doing wrong?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T18:11:30.120

My guess is that `run_ajax` is replacing the links with new ones. `.click` only binds to the elements that matched the selector at that time. The newly added links won't have a click event bound to them.

You need to make the events "live". Bind them using [`.on`](http://api.jquery.com/on/) like so:

```
jQuery(document).on('click', '.selectview', function (ev) {
    ev.preventDefault();
    // code...
}); 
```

This will "delegate" the event. It will run for all `.selectview` links no matter when they are added to the DOM.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:24:51.500

If run_ajax is replacing the links you can wrap the code that attaches your click handlers, and then inside run_ajax you can call the wrapper after you've replaced the links with the new content:

```
var setupClickHandlers = function(container) {
    jQuery(container).find('.selectview').click(function (ev) {

        ev.preventDefault();

        var alink = jQuery(this).attr('href'); 

        var view = getLinkVars(alink)["view"]; 
        var page = jQuery("#currentpageno").val();

        alert(alink);
        alert(view);
        alert(page);

        run_ajax(view,page);
    });
};
setupClickHandlers(container); 
```

The in run_ajax:

```
var run_ajax = function(view, page) {
    // do your stuff here

    // set up click handlers on the new content
    setupClickHandlers(container);
} 
```

# ffmpeg - 在 MPEG2 传输流中封装 H.264 流可变帧率

> ID：10016761
> 
> 赞同：5
> 
> 时间：2012-04-04T18:03:20.217
> 
> 标签：ffmpeg, h.264, mpeg2-ts

想象一下，我有来自实时对话的 H.264 AnxB 帧。封装在 MPEG2 传输流中的最佳方法是什么，同时保持后续播放的时序信息？

我正在使用 libavcodec 和 libavformat 库。当我获得指向 AVCodecContext 类型的对象 (*pcc) 的指针时，我设置了 foll。

```
pcc->codec_id = CODEC_ID_H264;
pcc->bit_rate = br;
pcc->width = 640;
pcc->height = 480;
pcc->time_base.num = 1;
pcc->time_base.den = fps; 
```

当我收到 NAL 单元时，我创建一个 AVPacket 并调用 av_interleaved_write_frame()。

```
AVPacket pkt;
av_init_packet( &pkt );
pkt.flags |= AV_PKT_FLAG_KEY;   
pkt.stream_index = pst->index;
pkt.data = (uint8_t*)p_NALunit;
pkt.size = len;

pkt.dts = AV_NOPTS_VALUE;
pkt.pts = AV_NOPTS_VALUE;

av_interleaved_write_frame( fc, &pkt ); 
```

我基本上有两个问题：

1）对于可变帧率，有没有办法不指定foll。pcc->time_base.num = 1; pcc->time_base.den = fps；并将其替换为指示可变帧速率的内容？

2) 在提交数据包时，我应该为 pkt.dts 和 pkt.pts 分配什么“时间戳”？

现在，当我使用 ffplay 播放输出时，它以我在上面的代码中使用的恒定帧率 (fps) 播放。

我也很想知道如何适应不同的空间分辨率。在我收到的流中，每个关键帧前面都有 SPS 和 PPS。我知道空间分辨率何时发生变化。有没有办法不必指定 pcc->width = 640; pcc->高度 = 480；前期？换句话说，表明空间分辨率可以在中途改变。

非常感谢，埃迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:54:13.627

DTS 和 PTS 在 90 KHz 时钟中测量。请参阅语法表下方的 ISO 13818 第 1 部分第 2.4.3.6 节。

至于可变帧速率，您的框架可能有也可能没有生成它的方法（vui_parameters.fixed_frame_rate_flag=0）。播放软件是否处理它是一个完全不同的问题。无论 PTS 或 DTS，大多数播放器都假定固定帧速率。mplayer 甚至无法正确计算 ffmpeg 生成的固定速率传输流的帧速率。

我认为，如果您要更改分辨率，则需要结束流（nal_unit_type 10 或 11）并开始一个新序列。它可以在同一个传输流中（假设您的客户端不太简单）。

# c# - png格式的桌面捕获

> ID：10016769
> 
> 赞同：1
> 
> 时间：2012-04-04T18:03:44.300
> 
> 标签：c#, wpf, screen-capture

我想获取一个屏幕截图并将其保存为整个屏幕的 png 格式。我怎样才能做到这一点？

我可以使用截图工具库来完成这个吗？互联网上有一些教程向您展示如何使用 Windows 窗体执行此操作，并且图像采用位图格式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T18:29:36.213

这是一种捕获任何屏幕内容的小方法。

```
 private static void CaptureScreen(Screen window, string file)
    {
        try
        {
            Rectangle s_rect = window.Bounds;
            using (Bitmap bmp = new Bitmap(s_rect.Width, s_rect.Height))
            {
                using (Graphics gScreen = Graphics.FromImage(bmp))
                    gScreen.CopyFromScreen(s_rect.Location, Point.Empty, s_rect.Size);
                bmp.Save(file, System.Drawing.Imaging.ImageFormat.Png);
            }
        }
        catch (Exception) { /*TODO: Any exception handling.*/ }
    } 
```

使用示例：

```
 CaptureScreen(Screen.PrimaryScreen, @"B:\exampleScreenshot.png"); 
```

**编辑：**稍后回到这一点，我意识到`Image`从函数返回对象可能更有用，因此您可以选择如何使用捕获的位图。

我现在还使该功能更加强大，以便它可以捕获多个屏幕（即在多显示器设置中）。它*应该*可以容纳不同高度的屏幕，但我自己无法测试。

```
 public static Image CaptureScreens(params Screen[] screens) {
    if (screens == null || screens.Length == 0)
        throw new ArgumentNullException("screens");

    // Order them in logical left-to-right fashion.
    var orderedScreens = screens.OrderBy(s => s.Bounds.Left).ToList();
    // Calculate the total width needed to fit all the screen into a single image
    var totalWidth = orderedScreens.Sum(s => s.Bounds.Width);
    // In order to handle screens of different sizes, make sure to make the Bitmap large enough to fit the tallest screen
    var maxHeight = orderedScreens.Max(s => s.Bounds.Top + s.Bounds.Height);

    var bmp = new Bitmap(totalWidth, maxHeight);
    int offset = 0;

    // Copy each screen to the bitmap
    using (var g = Graphics.FromImage(bmp)) {
        foreach (var screen in orderedScreens) {
            g.CopyFromScreen(screen.Bounds.Left, screen.Bounds.Top, offset, screen.Bounds.Top, screen.Bounds.Size);
            offset += screen.Bounds.Width;
        }
    }

    return bmp;
} 
```

新示例：

```
// Capture all monitors and save them to file
CaptureScreens(Screen.AllScreens).Save(@"C:\Users\FooBar\screens.png"); 
```

# c# - 除了开发人员之间的协调之外，是否有理由使用抽象或接口？

> ID：10016770
> 
> 赞同：0
> 
> 时间：2012-04-04T18:03:46.890
> 
> 标签：c#, interface, abstract-class

> **可能的重复：**
> [接口与抽象类（一般 OO）](https://stackoverflow.com/questions/761194/interface-vs-abstract-class-general-oo)

我可以看到他们在协调开发团队或可能由其他人进一步开发的代码方面的优势。

但如果没有，是否有理由使用它们？如果我省略它们会发生什么？

摘要——我将能够实例化它。没问题。如果这没有意义——我不会。

接口——无论如何，我在派生它的所有类中都声明了该功能。

**注意**：我**不是**在问它们是什么。我在问他们是否对协调以外的任何事情都有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:30:21.890

Both are what I call contracts and can be used in the following fashion by an individual developer:

Abstract

*   Allows for polymophism of differing derived implementations.
*   Allows one to create base functionality which can be dictated *or not* that the derived class be required to implement.
*   Allows for a default operation to be runtime consumed if the derived does not implement or required to implement.
*   Provides a consistency across derived objects which a base class pointer can utilize without having to have the actual derived; hence allows generic operations on a derived object from a base class reference similar to an Interface in runtime operation.

Interface

*   Allows a generic pattern of usage as a defacto `contract of operation(s)`. This usage is can be targetted to the process in hand and allows for the surgically precise operations for that contract.
*   Used to help with factory patterns (its the object returned), mocking of data during unit tests and the ability to replace an existing class (say from a factory returning the interface) with a different object and it doesn't cause any consumer of the factory any pain of *refactoring* due to the adherence of the interface contract.
*   Provides a pattern of usage which can be easily understood away from the static of the rest of the class's implementation.

Long story short are they required to get a job done? No.

But if you are into designing systems which will have a lifespan of more than one cycle, the upfront work by said architect will pay off in the long run whether on a team or by an individual.

* * *

++Update

I do practice what I preach and when handing off a project to other developers it was nice to say

1.  Look at the interface `IProcess` which all the primary business classes adhere to. That process defines a system of goals which can help you understand the purpose and the execution of the business logic in a defined way.
2.  While maintaining and adding new functionality to the project the interfaces *actually* helped me remember the flow and easily add new business logic into the project.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:07:57.233

抽象 - 你可以实例化它的一个孩子，但更重要的是，它可以有自己的*非*抽象方法和字段。

接口 - 就抽象而言更“粗略”的一种，但`.NET`您可以拥有*多重继承*。因此，通过定义接口，您可以引导接口的使用者订阅不同的合约（接口），从而呈现指定类型的不同“形状”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T18:12:04.267

我认为如果你不与他人协调，它会做两件事

1.  有助于防止您对自己的代码做奇怪的事情。想象一下你写了一个类，并在多个项目中使用它。您可以在一个项目中对其进行改进，以使其在另一个项目中的表亲无法识别。拥有一个抽象类或接口会让您在更改函数签名时三思而后行。
2.  它为您提供了前进的灵活性——这里有很多经典的例子。使用你想要完成的事情的通用形式，如果你决定以后需要一种不同的形式（流式阅读器是一个很好的例子，对吧？）你可以在以后更容易地实现它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T18:37:22.430

即使您没有与任何人协调，也有很多理由使用这两种结构。主要用途是两者实际上都**有助于表达开发者的意图**，这可能会帮助您稍后弄清楚为什么选择您实际选择的设计。它们还可以允许**进一步的可扩展性**。

抽象类允许您定义一个通用实现，该实现将在许多派生类之间共享，同时将一些行为委托给子类。它允许 DRY（不要重复自己）原则，以避免在任何地方重复相同的代码。

接口表示你的类实现了一个特定的契约。这在框架内有一个非常有用的用途，其中：

*   使用需要实现某些接口的库功能。示例是 IDisposable、IEquatable、IEnumerable...

*   在泛型中使用约束。

*   允许模拟接口（如果您进行单元测试）而不必实例化真实对象。

*   COM 对象的使用

# php - 如何用跨度标签php替换一个blockquote标签

> ID：10016776
> 
> 赞同：0
> 
> 时间：2012-04-04T18:03:58.080
> 
> 标签：php

我的内容中有标签。我需要用 span 标签替换所有这些标签：例如：我的 contenti 包装如下：

`<blockquote><p>my content</p></blockquote>`.

我需要将其替换为：

```
<span class="highlight">content</span> 
```

我怎样才能在 PHP 中实现这一点。我尝试了一些 preg_replace 但没有任何效果。任何人都可以请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:06:29.283

当然不是最好的解决方案，但应该足够好并且不需要正则表达式：

```
$string = str_replace('<blockquote><p>', '<span class="highlight">', $string);
$string = str_replace('</p></blockquote>', '</span>', $string); 
```

或者：

```
$search = array('<blockquote><p>', '</p></blockquote>');
$replace = array('<span class="highlight">', '</span>');
$string = str_replace($search, $replace, $string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:14:55.113

尝试

`preg_replace('/<blockqoute>.*?<p>(.*?)<\/p>.*?<\/blockqoute>/i', '<span class="highlight">$1</span>', $string);`

# php - 从 S3 中删除最旧的对象

> ID：10016780
> 
> 赞同：1
> 
> 时间：2012-04-04T18:04:07.723
> 
> 标签：php, amazon-s3

我有一个每天备份我的系统的脚本。最后，我每天得到 3 个 zip 文件并将它们存储到 S3。我想做的是始终保留一周或 10 天的这些备份。第 10 天后，从 S3 中删除最旧的 3 个 zip 文件。关于我如何解决这个问题的任何想法。我看不到一种方法可以查询修改的日期以找到最旧的日期。

我正在使用 S3 PHP SDK。作为参考，这是我创建对象的方法。

```
<?php
require_once 'AWSSDKforPHP/sdk.class.php';
define('BACKUPDIR','/backups/');

$backup1="backup1_".time().".zip";
$backup2="backup2_".time().".zip";
$backup3="backup3_".time().".zip";

$s3 = new AmazonS3();
$s3->create_object('mybucket', 'backups/'.$backup1, array(
'fileUpload' => BACKUPDIR.$backup1,
'acl' => $s3::ACL_PRIVATE
));

$s3->create_object('mybucket', 'backups/'.$backup2, array(
'fileUpload' => BACKUPDIR.$backup2,
'acl' => $s3::ACL_PRIVATE
));

$s3->create_object('mybucket', 'backups/'.$backup3, array(
'fileUpload' => BACKUPDIR.$backup3,
'acl' => $s3::ACL_PRIVATE
));
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T03:03:52.797

使用`list_object`需要更多的工作来解析，所以我使用了对象过期。除了让 S3 处理之外，这里无事可做。我所要做的就是添加到期时间：

```
$s3->create_object('mybucket', $backup1, array(
'fileUpload' => BACKUPDIR.$backup1,
'acl' => $s3::ACL_PRIVATE,
'headers' => array(
    'Expires' => gmdate(CFUtilities::DATE_FORMAT_RFC2616, strtotime('+10 days'))
)
)); 
```

现在 S3 将在 10 天后自动清理它。处理备份文件时非常适合我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:28:35.083

使用 GET Bucket（列出对象）API 调用，如此处所述：http: [//docs.amazonwebservices.com/AmazonS3/latest/API/RESTBucketGET.html](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTBucketGET.html)

这将返回存储桶中所有项目的列表以及每个项目的一些元数据，包括项目最后修改的日期。然后，您可以使用 PHP 确定要删除哪些文件，并使用 DELETE Object API 调用来删除它们 :)

# ruby - 检查一个数组中的任何数字是否小于另一个数组中的某个数字

> ID：10016781
> 
> 赞同：5
> 
> 时间：2012-04-04T18:04:08.787
> 
> 标签：ruby

这似乎是一个很常见的问题。可悲的是，我在 SO 上找不到它。如果这是一个重复的问题；我为此道歉。

假设我有两个整数数组`A`和`B`：

```
A = [17, 3, 9, 11, 11, 15, 2]
B = [1, 13] 
```

`A`如果 array的任何元素小于array 的任何元素，我需要返回 true 或 false `B`。

执行此操作的简单方法是每个循环使用 2 个（`O(n^2)`复杂性）

```
def is_greater?(a,b)
  retVal = false
  b.each { |element|
    a.each { |value|
      if (value < element)
        retVal = true
        break
      end
    }
  }
  return retVal
end

is_greater?(A,B) => true 
```

我还整理了两个数组中的元素，然后使用单个 while 循环来确定 in 中的元素`A`是否小于in 中的元素`B`。

```
A.sort!
B.sort!
def is_greater?(a,b)
  retVal = false
  i = 0
  j = 0
  while (i < a.length && j < b.length)
    if (a[i] < b[j])
      retVal = true
      break
    elsif (a[i] == b[j])
      i = i + 1
      j = j + 1
    else
     j = j + 1
    end
  end
  return retVal
end

is_greater?(A,B) => true 
```

我想知道在代码行方面是否有一种有效、精确的方法来做到这一点。我试图弄清楚如何使用该`any?`块，但这对我来说没有任何意义。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-04T18:16:16.997

是的，您可以使用 Enumerable 方法#any？和#min

对于 a 中的每个项目，如果它小于 max，则返回 true：

```
max = b.max
a.any?{|x| x < max} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T18:31:00.607

It should be enough to just check the minimum of the first array against the maximum of the second.

```
a.min < b.max 
```

The only way this conditional returns false is if every element is `b` is less than every element in `a`.

The complexity is O(m+n) which is the single iteration through both `a` and `b`.

# c# - 为什么是 Func<> 和 Expression > 可互换？为什么在我的情况下工作？

> ID：10016782
> 
> 赞同：6
> 
> 时间：2012-04-04T18:04:12.857
> 
> 标签：c#, oop, linq-to-sql, generics

我有一个数据访问课程，我花了一段时间才开始工作。对于我的应用程序，我需要获取不同类型的 SQL Server 表，其中 WHERE 子句仅与列名不同：一些列是 read_time，其他列是 ReadTime，还有一些列是 LastModifiedTime。所以我想我会传入 WHERE 子句，所以我不需要为 50 个不同的表创建新方法。它看起来很简单，并且有效，但我不明白一些东西。

此方法以 Expression<> 作为参数，有效：

```
internal List<T> GetObjectsGreaterThanReadTime<T>(Expression<Func<T, bool>> whereClause) where T : class
{
    Table<T> table = this.Database.GetTable<T>();
    IEnumerable<T> objects = table.Where(whereClause);

    return objects.ToList();
} 
```

现在，我以这种方式（如下）尝试了一段时间，它只会挂在最后一行（ToList（））。首先，为什么会编译？我的意思是，为什么 Expression 和 Func 可以互换用作参数？那么，为什么 Expression 工作，而 Func 版本只是挂起？

注意：上述方法和这个方法的唯一区别是方法参数（Expression vs. Func）。

```
internal List<T> GetObjectsGreaterThanReadTime<T>(Func<T, bool> whereClause) where T : class
{
    Table<T> table = this.Database.GetTable<T>();
    IEnumerable<T> objects = table.Where(whereClause);

    return objects.ToList();
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T18:06:17.780

表达式版本调用[`Queryable.Where`](http://msdn.microsoft.com/en-us/library/bb535040.aspx)它生成一个表达式树，它（当被枚举时`ToList`）被转换为 sql 并在数据库服务器上执行。据推测，数据库服务器将利用基于过滤条件的索引，以避免读取整个表。

Func 版本调用[`Enumerable.Where`](http://msdn.microsoft.com/en-us/library/bb534803.aspx)which（当由 枚举时`ToList`）**加载整个表**（您认为是挂起），然后针对内存中的对象运行过滤条件。

# r - 为什么 qplot 不为此数据文件绘制多个系列的线？

> ID：10016785
> 
> 赞同：0
> 
> 时间：2012-04-04T18:04:21.540
> 
> 标签：r, ggplot2

这是我学习 R 和 ggplot 的第一天。我已经学习了一些教程，并希望通过以下命令生成类似的图：

```
qplot(age, circumference, data = Orange, geom = c("point", "line"), colour = Tree) 
```

它看起来像这个页面上的图： [http ://www.r-bloggers.com/quick-introduction-to-ggplot2/](http://www.r-bloggers.com/quick-introduction-to-ggplot2/)

我创建了一个手工制作的测试数据文件，如下所示：

```
 site    temp    humidity
1       1       1       3
2       1       2       4.5
3       1       12      8
4       1       14      10
5       2       1       5
6       2       3       9
7       2       4       6
8       2       8       7 
```

但是当我尝试阅读并绘制它时：

```
test <- read.table('test.data')
qplot(temp, humidity, data = test, color=site, geom = c("point", "line")) 
```

情节上的线条不是单独的系列，而是链接在一起：

[http://imgur.com/weRaX](http://imgur.com/weRaX)

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:07:27.653

您需要告诉`ggplot2`如何将数据分组到单独的行中。这不是读心术！;)

```
dat <- read.table(text = "        site    temp    humidity
1       1       1       3
2       1       2       4.5
3       1       12      8
4       1       14      10
5       2       1       5
6       2       3       9
7       2       4       6
8       2       8       7",sep = "",header = TRUE)

qplot(temp, humidity, data = dat, group = site,color=site, geom = c("point", "line")) 
```

![在此处输入图像描述](../Images/bfbb7171c48637ed5885e863520ab6d6.png)

请注意，您可能还想`color = factor(site)`强制使用离散色标，而不是连续色标。

# asp.net-mvc-3 - 通过 TestHelper 测试路由约束

> ID：10016787
> 
> 赞同：0
> 
> 时间：2012-04-04T18:04:25.363
> 
> 标签：asp.net-mvc-3, unit-testing, mvccontrib-testhelper

我有下一个路由。

```
routes.MapRoute("Companies", "Companies/{companyId}",
    new { controller = "Company", action = "Details" },
    new { companyId = @"\d+" }); 
```

这是测试它的测试。

```
"~/Companies/7".ShouldMapTo<CompanyController>(action => action.Details(7)); 
```

现在我想测试约束。所以 url "~/Companies/df" 不应该映射到控制器。

有谁知道如何测试它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:20:15.307

```
"~/Companies/df".ShouldBeIgnored(); 
```

# html - 字体系列在 Chrome 中自动更改为“undefined,sans-serif!important”

> ID：10016793
> 
> 赞同：1
> 
> 时间：2012-04-04T18:04:45.753
> 
> 标签：html, css, google-chrome, fonts

最近，当我使用 google chrome 的开发人员工具时，默认字体系列会自动更改为“未定义，无衬线”，并附加“！important”标签。因此，除非我使用“！important”标签添加内联样式，否则它会忽略我的字体系列样式规则。有没有人经历过这个？

我通过下面的 URL 和实际 HTML 页面的 URL 提供了屏幕截图。代码如此混乱的原因是因为我将其设计为通过 Outlook 2007 发送（如果您知道那是什么）。

**截图： http:** [//preview.fahlgrengrip.com/pcb/epro-email/april/img/chrome-bug.jpg](http://preview.fahlgrengrip.com/pcb/epro-email/april/img/chrome-bug.jpg)

**HTML** [http://preview.fahlgrengrip.com/pcb/epro-email/april/](http://preview.fahlgrengrip.com/pcb/epro-email/april/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T19:47:26.320

我发现我安装了一个我不知道的字体样式扩展。卸载后，问题解决了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:31:11.157

It has been crossed out, which means it has been overwritten by something else.

# nhibernate - FluentNhibernate 多对多和 Inverse()

> ID：10016795
> 
> 赞同：3
> 
> 时间：2012-04-04T18:05:02.150
> 
> 标签：nhibernate, fluent-nhibernate, many-to-many, overriding

我定义了以下数据库表：

俱乐部：身份证、姓名

成员：ID、姓名

ClubMember：ClubId、MemberId

我定义了以下实体类：

```
 public class Club() {
        public virtual int Id { get; set; }
        public virtual string Name { get; set; }
        public virtual IList<Member> Members { get; set; }
    }

    public class Member() {
        public virtual int Id { get; set; }
        public virtual string Name { get; set; }
        public virtual IList<Club> Clubs { get; set; }
    } 
```

我定义了以下覆盖：

```
 public class MemberOverride : IAutoMappingOverride<Member>
    {
        public void Override(AutoMapping<Member> mapping_)
        {
            mapping_
                .HasManyToMany(x_ => x_.Clubs)
                .ParentKeyColumn("MemberId")
                .ChildKeyColumn("ClubId")
                .Cascade.All()
                .Table("ClubMembers");
        }
    }

    public class ClubOverride : IAutoMappingOverride<Club>
    {
        public void Override(AutoMapping<Club> mapping_)
        {
            mapping_
                .HasManyToMany(x_ => x_.Members)
                .ParentKeyColumn("ClubId")
                .ChildKeyColumn("MemberId")
                .Inverse()
                .Table("ClubMembers");
        }
    } 
```

我可以从我的覆盖中看到 ClubOverride 上的 Inverse 意味着您不能执行以下操作

```
 session.Save(club.Members.Add(member)); 
```

但这有效：

```
 session.Save(member.Clubs.Add(club); 
```

但这没有逻辑意义。我希望能够保存有会员的俱乐部或有俱乐部的会员。

我想用 FluentNhibernate 做一些不可能的事情吗？

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T18:20:35.407

是的，你是对的，这是不可能的。但这不是 FluentNhibernate 的问题，NHibernate 就是这样工作的。

只有一方是关系的所有者并负责添加元素。

来自官方文档：

> 仅对关联的反向端所做的更改不会保留。这意味着 NHibernate 对于每个双向关联在内存中都有两种表示形式，一种是从 A 到 B 的链接，另一种是从 B 到 A 的链接。如果您考虑一下 .NET 对象模型以及我们如何创建多对对象，这将更容易理解-C#中的许多关系：

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T11:54:02.293

您可以在实体上创建添加或删除方法，这将有助于实现此目的：

```
public class Club() {
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    private IList<Member> members;
    public virtual IEnumerable<Member> Members { get { return members.Select(x => x); } }

    public Club() {
        members = new List<Member>();
    }

    public virtual void AddMember(Member member){
        if (members.Contains(member))
            return;

        members.Add(user);
        member.AddClub(this);
    }

    public virtual void RemoveMember(Member member){
        if (!members.Contains(member))
            return;

        members.Remove(member);
        member.RemoveClub(this);
    }
} 
```

# sql - Sql Bulk Insert -- 文件不存在

> ID：10016799
> 
> 赞同：9
> 
> 时间：2012-04-04T18:05:14.023
> 
> 标签：sql

我有以下查询要插入到表中

```
 BULK
     INSERT tblMain
     FROM 'c:\Type.txt'
     WITH
     (
      FIELDTERMINATOR = ',',
      ROWTERMINATOR = '\n'
     )
    GO 
```

它得到消息

> 消息 4860，级别 16，状态 1，行 1
> 无法批量加载。文件“c:\Type.txt”不存在。

文件显然在那里。有什么我可能忽略的吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-04T18:07:07.810

看那个： [不能批量加载。文件“c:\data.txt”不存在](https://stackoverflow.com/questions/2850205/cannot-bulk-load-the-file-c-data-txt-does-not-exist)

该文件在 SQL Server 的`C:\`驱动器上吗？

SQL BULK INSERT 等始终仅适用于 SQL Server 机器上的本地驱动器。您的 SQL Server 无法访问您自己的本地驱动器。

您需要将文件放到 SQL Server 的 C:\ 驱动器上，然后重试。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-05T06:09:24.203

此处描述了批量导入实用程序语法

[http://msdn.microsoft.com/en-us/library/ms188365.aspx](http://msdn.microsoft.com/en-us/library/ms188365.aspx)

```
> BULK INSERT     [ database_name . [ schema_name ] . | schema_name . ]
> [ table_name | view_name ] 
>       FROM 'data_file' 
>      [ WITH 
>     ( 
```

关于 data_file 参数的注释说

**'数据文件'**

> 是包含要导入指定表或视图的数据的数据文件的完整路径。BULK INSERT 可以从磁盘（包括网络、软盘、硬盘等）导入数据。
> 
> data_file 必须指定运行 SQL Server 的服务器的有效路径。**如果 data_file 是远程文件，请指定通用命名约定 (UNC) name**。UNC 名称的格式为 \Systemname\ShareName\Path\FileName。例如，\SystemX\DiskZ\Sales\update.txt。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T04:14:06.047

我以前遇到过这个问题。除了检查文件路径之外，您还需要确保引用了正确的文件名和文件类型。确保这确实是您保存在源位置的文本文件，而不是文字文件等。我被 .doc 和 .docx 绊倒了。这是我犯的一个新错误，但是嘿，它可能会发生。更改了文件类型并解决了问题。

# c# - 更改包含叠加元素的 Canvas 的背景图像时 CPU 负载高

> ID：10016800
> 
> 赞同：0
> 
> 时间：2012-04-04T18:05:14.367
> 
> 标签：c#, wpf, video, wpf-controls, overlay

我正在开发一个应用程序，该应用程序从相机加载实时视频图像并在所述图像顶部显示叠加层。叠加层不会经常变化，因此可以认为它是静止的。然而，它通常包含大约 1,000 到 10,000 行。更新视频图像时，对 CPU 负载有显着影响，具体取决于覆盖层是否可见。叠加层既不会失效也不会改变，只是它背后的图像在改变。

我的设置是这样的：

```
<Canvas>
    <Image/>
    <Canvas>
        <OverlayElement 1/>
        <OverlayElement 2/>
        <OverlayElement 3/>
        <.../>
    </Canvas>        
</Canvas> 
```

Image 的 Source 是一个 WriteableBitmap。每次有新的相机图像（类型 byte[]）可用时，都会调用主 Canvas 的 Dispatcher 以使用 WriteableBitmap.WritePixels() 写入图像数据。

内部 Canvas 包含所有叠加元素，即 - 轮廓（PolyLine） - 圆形（带有 EllipseGeometry 的路径）和 - 一组光线（带有一个包含 LineSgements 的图形的路径）。轮廓中的点数 n 等于最后提到的路径中的线段数。n 通常在 1,000 - 3,000 左右。

根据叠加层中显示的行数和长度，即使叠加层没有改变，用于显示实时图像的 CPU 负载也会有所不同（如果长度或计数增加，则会增加）。在某些时候，这会影响帧速率并使程序无法使用。线的长度主要与线的交叉点相关，所以尽管没有绘制路径，但路径可能正在努力计算它的填充区域？

那么我该如何提高这里的性能呢？最让我烦恼的是，即使叠加层没有改变，渲染时间也会随着原始数量的增加而增加。一旦覆盖在其最后设置状态下绘制，我希望有恒定的渲染时间。除了将整个叠加层渲染为位图之外，我还能做些什么来实现这一点？

对于如何更有效地将 byte[] 放到屏幕上的建议，我也持开放态度。请记住，这个问题是更大应用程序的一部分，我无法更改所有专注于如何绘制图像的范例。

到目前为止我已经尝试过：

1.  覆盖内部 Canvas 的 OnRender() 方法，自己绘制叠加层。这工作正常，但有性能问题让我来到这里;）

2.  使用 Shapes (PolyLine, Ellipse, Path) 作为内部 Canvas 的子元素来保存覆盖元素。这也有效。当覆盖发生变化时重绘覆盖会更快，但另一方面在更新背景图像时会恶化性能问题。

3.  像 2.，但尽可能在几何上使用 Freeze()。对性能没有影响或影响很小。

提前感谢您的帮助。

# python - 用最接近的值对整数列表进行分组

> ID：10016802
> 
> 赞同：7
> 
> 时间：2012-04-04T18:05:16.033
> 
> 标签：python, list, math, grouping

我有一个清单：

```
d = [23, 67, 110, 25, 69, 24, 102, 109] 
```

如何将最近的值与动态间隙分组，并创建一个这样的元组，最快的方法是什么？：

```
[(23, 24, 25), (67, 69), (102, 109, 110)] 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-04T18:18:41.720

像

```
d = [23,67,110,25,69,24,102,109]

d.sort()

diff = [y - x for x, y in zip(*[iter(d)] * 2)]
avg = sum(diff) / len(diff)

m = [[d[0]]]

for x in d[1:]:
    if x - m[-1][0] < avg:
        m[-1].append(x)
    else:
        m.append([x])

print m
## [[23, 24, 25], [67, 69], [102, 109, 110]] 
```

首先，我们计算顺序元素之间的平均差异，然后将差异小于平均值的元素组合在一起。

# https - HTTPS 校验和或有效负载校验和混淆

> ID：10016811
> 
> 赞同：3
> 
> 时间：2012-04-04T18:06:08.590
> 
> 标签：https, checksum, integrity

如果通信协议是 HTTPS，向有效负载添加任何类型的校验和是否有益？确切地说。

1.  在内容主体上设置校验和以确保完整性是否很好？
2.  拥有文件/多部分内容的校验和以确保完整性是否很好？
3.  1和2都很好
4.  两者都不是必需的

我更多地考虑Web服务。

# ajax - 从网页查询数据库有哪些方法？

> ID：10016812
> 
> 赞同：0
> 
> 时间：2012-04-04T18:06:09.323
> 
> 标签：ajax, client-server, database-connection

我对 Web 开发相当陌生，我目前正在使用 PhoneGap 创建一个移动 Web 应用程序。也就是说，它完全是在 html 和相关技术中完成的，然后应用程序会正确链接这些技术以在设备运行的任何操作系统中运行。

此应用程序的某些部分要求我从远程服务器上的数据库中检索数据。这对我来说是一件全新的事情，从未做过任何涉及网络/连接的编程。

有人建议我为此目的使用 AJAX，但我想确定我正在做出明智的选择。HTML 页面还有哪些其他选项可以从远程服务器检索数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T05:54:32.997

没有其他选择，您将不得不使用 ajax（使用 jquery for exqmple）从服务器取回数据。

最好的方法（从我的角度来看）是确保您的数据以 json 或 jsonp 形式检索，以便您可以在应用程序中轻松处理它。

如果您确实使用 jquery ajax，请记住将其配置为允许外部 ajax 请求。

# jquery - Jquery scrollto 的替代品

> ID：10016813
> 
> 赞同：-1
> 
> 时间：2012-04-04T18:06:09.980
> 
> 标签：jquery

我正在寻找一种在超链接上设置水平滚动条的方法，并且我一直在查看 scrollto 插件，但它似乎真的已经过时了。是否可以仅使用简单的 jquery 获得相同的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:08:10.747

```
$('#divToScroll').animate({'scrollTop': '20'}); // scroll to 20px 
```

或者，如果您想要相对滚动：

```
$('#divToScroll').animate({'scrollTop': '+=20'}); // scroll to 20px below current position 
```

小提琴示例：http: [//jsfiddle.net/zq4a8/](http://jsfiddle.net/zq4a8/)

水平滚动条的示例小提琴：http: [//jsfiddle.net/rGcWm/4/](http://jsfiddle.net/rGcWm/4/)

```
$('#scroller').click(function() { $('#outer').animate({'scrollLeft': '+=20'}); });
$('#scroller_to').click(function() { $('#outer').animate({'scrollLeft': '20'}); });​ 
```

# html - 父 div 继承子 div 边距

> ID：10016816
> 
> 赞同：8
> 
> 时间：2012-04-04T18:06:21.243
> 
> 标签：html, css

它不会一直发生，但是每隔一段时间，父 div 会继承子 div 属性，并使我的布局定位失控。

例如，这是 html（伪）：

```
<div 1>
   <div 2>
      content here
   </div>

</div><!-- div one end --> 
```

CSS（伪）：

```
#1{ margin top:0; }
#2 {margin top:10 } 
```

它应该看起来像这样：div 1 是父级，div 2 是子级

div 1 父级

```
-----------------------------------------
this is address bar (top of win)
-----------------------------------------
----------------
|  ----------  |
| | div2Child  |
| ------------ |
|--------------| 
```

假设从 div 1 到 addy 窗口没有间隙。

现在，出于某种奇怪的原因，使用上面相同的代码，当我预览时，我得到了这个：

```
-----------------------------------------
this is address bar (top of win)
-----------------------------------------

gap here.

----------------
|  ----------  |
| |   div2     |
| ------------ |
|--------------| 
```

无论我做什么，我仍然得到那个差距。当我将它带到萤火虫并在 Divs 上进行测试时，div2 清楚地表明边距正在影响父母的定位。

..我打算举一个例子，但是......这里是实际的代码，所以你可以看到......（尽可能简单）

HTML：

```
<div id="one">
    <div id="two">content here on 2</div>
</div>

the CSS: 

    #one{
        width:1000px;
        height:300px;
        background:#09F;
        margin-top:0px !important;
padding:0px;

    }

    #two{
        width:500px;
        height:100px;
        background:red;
        margin-top:20px;
padding:0px;
    } 
```

我仍然得到我在图表中显示的差距。让我发疯的是，像我们大多数人一样，我们已经完成了这种布局数百万次......我可以提取数十个使用相同方法并且没有问题的作品......我有我一直使用的 Cssreset。有！重要，没有随机`<br/> or <p>`，0填充......事实上，为了确保，我创建了一个虚拟页面，除了2个div和它们的css之外什么都没有......

关于为什么会发生这种情况的任何想法？因为现在我正在查看我创建的最后一个站点和我刚刚测试的这个虚拟 html，并且在每个浏览器上，我得到了那个愚蠢的差距。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-04T18:11:07.703

您正在观察的是边距折叠。它可能发生在并不总是容易理解的场景中，所以我建议参考[文档](https://developer.mozilla.org/en/CSS/margin_collapsing)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:12:40.857

为什么不使用：

```
#one{
        width:1000px;
        height:300px;
        background:#09F;
        margin-top:0px !important;
        padding-top:20px;
    }
    #two{
        width:500px;
        height:100px;
        background:red;
        margin-top:0px;
        padding:0px;
    }​ 
```

? 就是想

# php - 去掉小数位而不四舍五入

> ID：10016830
> 
> 赞同：1
> 
> 时间：2012-04-04T18:07:12.527
> 
> 标签：php, number-formatting

我有一个函数可以将 60000 转换为 60k 或 60100 转换为 60.1k

但是如果我输入例如 60123，它将输出 60.123k

如何使它输出 60.1k 而不会像 number_format 那样四舍五入。

编辑：这是我进行转换的函数

```
function format($val) {
$letter = "";
while ($val >= 1000) {
$val /= 1000;
$letter .= "K";
}
$letter = str_replace("KKKK", "000B", $letter);
$letter = str_replace("KKK", "B", $letter);
$letter = str_replace("KK", "M", $letter);
return $val.$letter;
} 
```

这是我要回显的内容

```
echo format(1)."<br>";
echo format(123548)."<br>";
echo format(1000000)."<br>";
echo format(1000000000)."<br>";
echo format(1200000000)."<br>"; 
```

这是输出：

1
123.548K
1M
1B
1.2B

对于 123.548K，我希望它只是“123.5K”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:11:04.163

您可以使用 floor 函数：[http](http://www.php.net/manual/en/function.floor.php) ://www.php.net/manual/en/function.floor.php - 请注意 floor(-1.2) = -2，如果适用的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:11:12.993

```
$value = 123;
echo number_format($value / 1000, 2).'k'; 
```

编辑（没有看到关于四舍五入的评论）。将值视为字符串：

```
$value = 60146;
$value = $value / 1000;
$value = substr($value, 0, strpos($value, '.')).'.'.substr($value, strpos($value, '.'), 3).'k';
echo $value; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T18:22:50.047

请尝试以下

```
function format($val) {
    $letter = "";
    while ($val >= 1000) {
        $val /= 1000;
        $letter .= "K";
    }
    $val = round($val, 1); // it provides the correct format
    $letter = str_replace("KKKK", "000B", $letter);
    $letter = str_replace("KKK", "B", $letter);
    $letter = str_replace("KK", "M", $letter);
    return $val.$letter;
} 
```

# regex - 正则表达式：匹配单词的第一次出现

> ID：10016834
> 
> 赞同：9
> 
> 时间：2012-04-04T18:07:19.047
> 
> 标签：regex

出什么问题了 ：

```
/(?<={).+(?=public)/s 
```

全文

```
class WeightConvertor {

private:
    double gram;
    double Kilogram;
    double Tonnes;
    void SetGram(double);
    void SetKiloGram(double);
    void SetTonnes(double);
matching end

public:
    WeightConvertor();
    WeightConvertor(double, double, double);
    ~WeightConvertor();
    void SetWeight(double, double, double);
    void GetWeight(double&, double& ,double&);
    void PrintWeight();
    double TotalWeightInGram();

public:

}; 
```

我怎样才能只匹配这个文本：

```
private:
    double gram;
    double Kilogram;
    double Tonnes;
    void SetGram(double);
    void SetKiloGram(double);
    void SetTonnes(double);
matching end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-04T18:10:48.547

你想要一个惰性匹配：

```
/(?<={).+?(?=public)/s 
```

另请参阅：[.* 之间有什么区别？和 .* 正则表达式？](https://stackoverflow.com/questions/3075130/difference-between-and-for-regex)
（我也回答了，似乎）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:13:51.210

我认为你需要这个：

```
(?s)(?<={).+?(?=public) 
```

它就像 Bohemian 发布的答案，但它很懒，所以它符合你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T18:08:56.267

您需要打开“点匹配换行符”开关，并进行非贪婪 ( `.*?`) 匹配：

```
(?s)(?<={).+?(?=public) 
```

引用[正则表达式圣经](http://www.regular-expressions.info/refadv.html)，`(?s)`开关意味着：

> 为正则表达式的其余部分打开“点匹配换行符”。

*请注意，正则表达式周围的斜杠与正则表达式无关 - 这是语言问题（perl、javascript 等），与实际问题无关*

# curl - 使用“用户凭据”流程通过 libcurl 获取身份验证令牌

> ID：10016836
> 
> 赞同：0
> 
> 时间：2012-04-04T18:07:26.953
> 
> 标签：curl, libcurl, soundcloud

我正在尝试使用 Soundcloud API 在开源 DAW 应用程序 (Ardour) 中实现集成的“导出”功能。

至少对于初稿，似乎获得经过身份验证的令牌的最简单方法是使用“用户凭据”流程。所以我以我自己的帐户为例。我正在使用 libcurl 以编程方式生成此请求：

[https://api.soundcloud.com/oauth2/token?client_id=e7ac891eef866f139773cf8102b7a719&client_secret=CLIENT_SECRET&grant_type=password&username=ben@harrisonconsoles.com&password=MY_PASSWORD](https://api.soundcloud.com/oauth2/token?client_id=e7ac891eef866f139773cf8102b7a719&client_secret=CLIENT_SECRET&grant_type=password&username=ben@harrisonconsoles.com&password=MY_PASSWORD)

结果是：“404 - 未找到”

几个问题：

1）任何想法“404 - Not Found”在这种情况下意味着什么？我的用户名格式错误吗？我打错字了吗？或者用户凭据工作流程不再可用？

2) 这是一个开源应用程序，因此 client_id 和 client_secret 实际上对全世界都是可用的。这有什么后果（如果有的话）？

请注意，我不是 curl/web 集成方面的专家（尽管我能够使用 libcurl 从 Freesound.org 导入声音）——所以也许我遗漏了一些非常明显的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:09:02.333

看起来您正在向该 URL 发出 GET 请求。OAuth2 令牌端点仅支持 POST 请求。此外，参数必须在请求正文中发送，而不是作为查询字符串的一部分。使用 curl 命令行实用程序，它看起来像这样：

```
curl -X POST -D - https://api.soundcloud.com/oauth2/token -F'client_id=YOUR_CLIENT_ID' \
   -F'client_secret=YOUR_CLIENT_SECRET' -F'grant_type=password' \
   -F'username=YOUR_USERNAME' -F'password=YOUR_PASSWORD' 
```

从技术上讲，我们应该发回 405 而不是 404。我会为此提交一个错误，感谢您指出。

您绝对不想分发您的客户端凭据。您的客户端 ID 和客户端密码将您的应用程序唯一标识到 SoundCloud。如果您要分发这些，任何其他应用程序开发人员都可以使用这些值来创建一个看起来像您的应用程序。如果其中一个应用程序违反了 SoundClouds 服务条款，我们将不得不切断对客户端 ID 的访问，从而也禁用您的应用程序。

此外，虽然支持用户凭据流，但仅在无法使用更流行的授权代码流时才建议使用。大多数用户更熟悉授权代码流程。它允许您让用户授权访问您的应用程序，而无需他们向您的应用程序提供凭据。不推荐使用用户凭据流程的主要原因是通过 Facebook Connect 注册的用户没有密码，因此无法将您的应用程序连接到他们的 SoundCloud 帐户。

对于桌面/移动应用程序，您可以在应用程序注册过程中指定一个重定向 URI，该 URI 使用自定义协议方案（例如 myapp://），它将控制权返回给您的应用程序。执行此操作的确切方法因平台而异。这意味着您不必拥有正在运行的 Web 服务来调解身份验证流程。

如果您有任何后续问题，请告诉我，我将编辑我的答案以进行详细说明。希望有帮助！

# mysql - 我可以从 SQL 转储文件中导入单个列，因为此后添加了数百行新行。？

> ID：10016838
> 
> 赞同：0
> 
> 时间：2012-04-04T18:07:32.180
> 
> 标签：mysql, linux

我从 mysql 中的表中删除了当时我认为的不必要的字段/列，现在想将其导入回表中。就在我删除列之前，我对整个表进行了备份。从那时起，已添加近 1000 行新行。

如何将列和信息添加回表中？

我有一个可以“玩”的沙盒。我已经尝试过，但还没有得到正确的最终结果。先感谢您。

不确定是否重要，但系统是fedora 16。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:11:08.187

我要做的是将您的转储加载到另一个表中（例如 table_bak，您可能需要在您的沙箱和 redump 中执行此操作）。然后使用合理的默认值将您的列重新添加到实时表中。然后你应该能够像这样把旧数据带回来

```
UPDATE `table`,`table_bak` SET `table`.restored_column=`table_bak`.restored_column WHERE `table`.pk_id=`table_bak`.pk_id 
```

# php - 为什么我必须声明 我认为我已经习惯了关于项目中 PHP 声明的相当自由的政策 - 我一直只是使用： 我只是在 FastCGI 下使用 PHP-FPM 设置了一个 nginx 服务器，现在它需要我明确声明： 我只是在 FastCGI 下使用 PHP-FPM 设置了一个 nginx 服务器，现在它需要我明确声明： 有什么办法可以改变吗？（否则我将不得不进入我的项目并查找/替换所有发生这种情况的实例）。 视图文件本身中的 MVC 页面模板配置？ 我想呈现一个 MVC 页面/视图，该页面上将有不同的小部件。所以一些视图可能有小部件 A，另一个页面可能有小部件 A 和 B，等等。我在想每个小部件都是我想要传递参数的部分视图。因此，如果它是一个天气小部件，我需要将部分视图传递给邮政编码等。 我的问题是从架构上解决这个问题的最佳方法是什么？我们目前有一个存储此信息的外部 xml 文件：myview.xml（用于 myview.cshtm ） ? 有什么建议吗？ php 4 5 回答 5 This answer is useful 13 您需要通过 php.ini 配置文件启用短打开标签。但是，如果您同时使用 XML 和 PHP，就会发生冲突。 刚刚找到一篇关于 PHP6 中弃用短标签的好文章。 于 2012-04-04T18:08:47.450 回答 This answer is useful 5 进入 php.ini 并找到选项short_open_tag。将其设置为On。这将解决您的问题。 于 2012-04-04T18:09:41.117 回答 This answer is useful 4 短开放标签是您正在寻找的。 于 2012-04-04T18:09:20.683 回答 This answer is useful 1 没有 PHP 脚本之类的东西。只有文件中嵌入了 PHP 代码块。您必须启动一个 php 代码块

> ID：10016839
> 
> 赞同：2
> 
> 时间：
> 
> 标签：php

我认为我已经习惯了关于项目中 PHP 声明的相当自由的政策 - 我一直只是使用：

```
<? // here is my php code ?> 
```

我只是在 FastCGI 下使用 PHP-FPM 设置了一个 nginx 服务器，现在它需要我明确声明：

```
<?php // here is my php code ?> 
```

有什么办法可以改变吗？（否则我将不得不进入我的项目并查找/替换所有发生这种情况的实例）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-04T18:08:47.450

您需要通过 php.ini 配置文件启用[短打开标签。](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)但是，如果您同时使用 XML 和 PHP，就会发生冲突。

刚刚找到一篇关于 PHP6 中弃用短标签的[好文章。](http://cubicspot.blogspot.com/2009/06/maximum-failure-php-6-deprecates-short.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T18:09:41.117

进入 php.ini 并找到选项`short_open_tag`。将其设置为`On`。这将解决您的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T18:09:20.683

[短开放标签](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)是您正在寻找的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T18:13:27.470

没有 PHP 脚本之类的东西。只有文件中嵌入了 PHP 代码块。您**必须**启动一个 php 代码块`<?php`（或者`<?`如果您启用了短标签）。没有办法解决这个问题。如果没有那个开始标签，PHP 解释器将充当非常昂贵的“猫”版本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T18:15:49.780

虽然给出的答案在如何启用短标签方面是正确的，但我建议不要这样做。考虑到您编写的代码可能不仅仅在您的计算机上运行。如果您计划分发代码或将其部署到生产服务器，则应始终使用`<?php`打开标签，因为这将最大限度地减少代码未运行的可能性以及与之相关的故障排除。

# c# - 视图文件本身中的 MVC 页面模板配置？

> ID：10016840
> 
> 赞同：0
> 
> 时间：2012-04-04T18:07:34.410
> 
> 标签：c#, asp.net-mvc, razor

我想呈现一个 MVC 页面/视图，该页面上将有不同的小部件。所以一些视图可能有小部件 A，另一个页面可能有小部件 A 和 B，等等。我在想每个小部件都是我想要传递参数的部分视图。因此，如果它是一个天气小部件，我需要将部分视图传递给邮政编码等。

我的问题是从架构上解决这个问题的最佳方法是什么？我们目前有一个存储此信息的外部 xml 文件：myview.xml（用于 myview.cshtm
） ? 有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:45:32.920

您的观点上的独立小部件？

听起来你只需要使用 RenderAction 来渲染它们。

[哈克的更多信息](http://haacked.com/archive/2009/11/17/aspnetmvc2-render-action.aspx)

[MSDN](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.childactionextensions.renderaction.aspx)

# java - 为什么我要关闭 Java.io.IOException 流？

> ID：10016842
> 
> 赞同：1
> 
> 时间：2012-04-04T18:07:39.717
> 
> 标签：java, android, httpurlconnection

我不确定为什么会收到此错误。我尝试在网上搜索答案，但没有成功。

以下是发生错误的部分代码。我正在发送一个标头，并在获得 200 的成功响应后，我将执行我的其余代码。

```
URL url;
        HttpURLConnection connection = null;        
        try{

//Create connection

        url = new URL(targetURL);
        Log.i(TAG,"Connecting to : "+targetURL);
        connection = (HttpURLConnection)url.openConnection();

        //connection.setRequestMethod("POST");
        connection.setRequestProperty("Content-Type", 
                   "application/x-www-form-urlencoded");
        connection.setRequestProperty("Content-Language", "en-US"); 
        connection.setRequestProperty("User-Agent",
                "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11");

        connection.setRequestProperty("x-device-displayheight", device_displayheight );

            connection.setUseCaches(false);
            connection.setDoInput(true);
            connection.setDoOutput(true);
InputStream is = connection.getInputStream();
            BufferedReader br = new BufferedReader(new InputStreamReader(is));
            StringBuffer response = new StringBuffer();
            String rep = connection.getResponseMessage();
            int respcode = connection.getResponseCode();
            String line;

        try{                        
            if(respcode == 200 ){// Everything is ok                            
                if(is != null){
                    //response.append(is.toString());   

                    while((line = br.readLine()) != null){
                        Log.i("Output",line);
                    }

                }
                else{
                    Log.i("Nothing to parse","");
                }

            }
            else{// bad response from server
                Log.i("Bad Response", rep +" : "+respcode);
            }
        }catch(Exception e){
            e.printStackTrace();
        } 
```

//堆栈跟踪

```
04-04 13:14:41.668: W/System.err(23046): java.io.IOException: stream closed
04-04 13:14:41.668: W/System.err(23046):    at org.apache.harmony.luni.internal.net.www.protocol.http.AbstractHttpInputStream.checkNotClosed(AbstractHttpInputStream.java:69)
04-04 13:14:41.668: W/System.err(23046):    at org.apache.harmony.luni.internal.net.www.protocol.http.FixedLengthInputStream.read(FixedLengthInputStream.java:41)
04-04 13:14:41.668: W/System.err(23046):    at java.io.InputStreamReader.read(InputStreamReader.java:248)
04-04 13:14:41.668: W/System.err(23046):    at java.io.BufferedReader.fillBuf(BufferedReader.java:130)
04-04 13:14:41.668: W/System.err(23046):    at java.io.BufferedReader.readLine(BufferedReader.java:357)
04-04 13:14:41.668: W/System.err(23046):    at com.ameba.api.network.Client.executePost(Client.java:95)
04-04 13:14:41.668: W/System.err(23046):    at com.ameba.api.activityClasses.Login$connectToServer.doInBackground(Login.java:190)
04-04 13:14:41.672: W/System.err(23046):    at com.ameba.api.activityClasses.Login$connectToServer.doInBackground(Login.java:1)
04-04 13:14:41.672: W/System.err(23046):    at android.os.AsyncTask$2.call(AsyncTask.java:252)
04-04 13:14:41.672: W/System.err(23046):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-04 13:14:41.672: W/System.err(23046):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-04 13:14:41.672: W/System.err(23046):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
04-04 13:14:41.672: W/System.err(23046):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:574)
04-04 13:14:41.672: W/System.err(23046):    at java.lang.Thread.run(Thread.java:1020) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:13:59.927

`System.setProperty("http.keepAlive", "false");`似乎已经解决了问题。  

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:35:40.323

仅当您有有效的流时，尝试以不同的顺序执行操作并循环：

```
URL url;
        HttpURLConnection connection = null;        
        try{

//Create connection

        url = new URL(targetURL);
        Log.i(TAG,"Connecting to : "+targetURL);
        connection = (HttpURLConnection)url.openConnection();

        //connection.setRequestMethod("POST");
        connection.setRequestProperty("Content-Type", 
                   "application/x-www-form-urlencoded");
        connection.setRequestProperty("Content-Language", "en-US"); 
        connection.setRequestProperty("User-Agent",
                "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11");

        connection.setRequestProperty("x-device-displayheight", device_displayheight );

            connection.setUseCaches(false);
            connection.setDoInput(true);
            connection.setDoOutput(true);
                    InputStream is = connection.getInputStream();
            StringBuffer response = new StringBuffer();
            String rep = connection.getResponseMessage();
            int respcode = connection.getResponseCode();
            String line;
                    BufferedReader br = null;

        try{            
                            //use a constant below instead of 200           
            if(respcode == 200 ){// Everything is ok                            
                if(is != null){
                        br = new BufferedReader(new InputStreamReader(is));

                    //response.append(is.toString());   

                    while((line = br.readLine()) != null){
                        Log.i("Output",line);
                    }

                }
                else{
                    Log.i("Nothing to parse","");
                }

            }
            else{// bad response from server
                Log.i("Bad Response", rep +" : "+respcode);
            }
        }catch(Exception e){
            e.printStackTrace();
        } finally {
                      if( br != null ) { br.close() };
                    } 
```

# jquery - 允许通过覆盖链接单击 div 中的子元素

> ID：10016847
> 
> 赞同：0
> 
> 时间：2012-04-04T18:07:51.307
> 
> 标签：jquery, css

所以基本上，我有一个 jQuery 手风琴。我安排了内容，使其出现在手风琴的边界框（标题）内。我在内容中有几个`href`与它们相关联的项目。问题是我无法点击手风琴标题，因为它显然也是可点击的。

它看起来像这样：

```
---------------------------
- (top layer)             -
-                         -
-   ------------------    -
-   - (bottom layer) -    -
-   - click me!      -    -
-   ------------------    -
-                         -
--------------------------- 
```

所以我可以将一个点击事件绑定到底层，但我真的很想避免这样做。有什么选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:11:27.247

`OnClick="preventAction(event)"`您可以通过JS 和在 JS中防止它

```
function preventAction(e) {
       e.preventDefault();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:27:53.403

取自[http://cmar.me/2011/06/15/links-in-jquery-accordion-headers/](http://cmar.me/2011/06/15/links-in-jquery-accordion-headers/)

```
$('content .image a').click(function() {
    window.location = $(this).attr('href');
    return false;
}); 
```

不是最初要求的，但足够简单，可以接受。

# vba - VB 宏到 ftp 文件

> ID：10016851
> 
> 赞同：0
> 
> 时间：2012-04-04T18:08:03.270
> 
> 标签：vba

我有一个 CSV 文件。单击 csv 文件上的按钮后。我必须使用 ftp 将该文件复制到使用 VB 宏的 unix 服务器中。

没有任何线索。请提供任何样品。

问候，

柴土

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:53:36.290

我为 FTP gif 文件编写了一些代码。您可以在以下位置查看所有代码

[http://www.dailydoseofexcel.com/archives/2006/01/29/ftp-via-vba/](http://www.dailydoseofexcel.com/archives/2006/01/29/ftp-via-vba/)

那里的内容比您需要的要多，但相关部分是：

```
'Create text file with ftp commands
Open sFname & ".txt" For Output As lFnumFtp
Print #lFnumFtp, "open " & sSITE 'open the site
Print #lFnumFtp, sUSER
Print #lFnumFtp, sPASS
Print #lFnumFtp, "binary" 'set file transfer mode
Print #lFnumFtp, "cd " & sDIR
For i = LBound(vFname) To UBound(vFname)
    Print #lFnumFtp, "send " & Dir(vFname(i)) 'send files
Next i
Print #lFnumFtp, "bye" 'close ftp session

Close lFnumFtp  'close text file

lFnumBatch = FreeFile

'open a batch file
Open sFname & ".bat" For Output As lFnumBatch
Print #lFnumBatch, "ftp -s:" & sFname & ".txt"
Print #lFnumBatch, "Echo ""Complete""> " & sFname & ".out"
Close lFnumBatch

'run the batch file
Shell sFname & ".bat" 
```

# java - 寻求固定长度的 LinkedList 变体，有点

> ID：10016852
> 
> 赞同：0
> 
> 时间：2012-04-04T18:08:10.090
> 
> 标签：java

我知道标题并没有真正说明我真正在寻找什么，因为它很难用几句话来解释。

我正在寻找的是我可以迭代的 Java 链接列表变体，但它在某种程度上具有固定长度。

你看，我想用我从遥测插件获得的数据跟踪 Kerbal Space Program 中模拟卫星的地面路径。但我只想显示过去大约两个小时的地面路径。现在整个数据将被写入链接列表，但随着时间的推移，列表变得越来越长，最终它变得如此之大，以至于需要更长的时间来迭代这个列表才能获得轨道最后两个小时的数据需要一组新的数据进来。

因此，如果最旧条目和最新条目之间的时间超过两个小时的任务时间，我正在寻找的链接列表变体将具有一定的固定长度，它会删除最后一个条目（条目）。所以我只需要迭代相对较少的条目，而不是前一个航班的整个数据集（保存以将其转换为 CSV）。

我感谢这里的乐于助人的人可能提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:09:32.257

只需维护一条定期修剪`LinkedList`. 你不需要任何特别的东西。任何`Queue`实现都可能有效；`ArrayDeque`可能是最好的。

那，或者`LinkedList`用一个包装器`Queue`实现来装饰 a ，它会丢弃太旧的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:14:32.783

我建议使用 Louis Wasserman 建议的队列。但您可能要考虑的另一种可能性是[循环链表](http://en.wikipedia.org/wiki/Linked_list#Linear_and_circular_lists)。

这只是您描述问题时我想到的第一个数据结构，我认为它最自然。不幸的是，我不知道 Java 有任何可用的本地循环链表实现，所以如果你这样做，你将不得不实现自己的或使用 3rd 方代码......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:20:23.113

我建议包装几乎所有列表实现，当您添加到列表时，将您刚刚添加的元素与列表中的最后一个元素进行比较，如果时间差大于两个小时，则删除最后一个元素。

# c# - 为每个数据库插入创建数据库连接 - 高 SQL 服务器内存使用率

> ID：10016856
> 
> 赞同：0
> 
> 时间：2012-04-04T18:08:11.337
> 
> 标签：c#, sql-server

我最近更改了我的 Web 应用程序，以便为每个命令创建一个数据库连接，而不是创建一个连接并将其重用于所有命令。今天下午我使用了这段代码，我的数据库内存使用量高达 24GB，执行了大约 8k 次插入。我的代码是这样的（半伪代码）：

```
public int ExecSQL(string SQLStr)
{
    using (SqlConnection Con = new SqlConnection(MyConStr))
    {
        using (SqlCommand Cmd = new SqlCommand(SQLStr, Con))
        {
            return Cmd.ExecuteNonQuery();
        }
    }
}

using (TransactionScope TX = new TransactionScope(TransactionScopeOption.RequiresNew))
{
    //Loop and perform 8000 x
    int ID = ExecSQL("insert into something (column) output unique_id values ('data')").
    // I also perform 1 or 2 selects per insert based on the ID returned from the insert. I don't use a .Supress for my inserts.
} 
```

这会导致数据库内存使用率高吗？我的印象是它应该创建 100 个连接（默认）然后继续重复使用它，但我猜我错过了一些东西。

回答：运行以下SQL：

```
SELECT 
    DB_NAME(dbid) as DBName, 
    COUNT(dbid) as NumberOfConnections,
    loginame as LoginName
FROM
    sys.sysprocesses
WHERE 
    dbid > 0
GROUP BY 
    dbid, loginame 
```

并且我的数据库只有一个打开的连接，所以这不会导致问题。现在想知道什么是..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:12:34.187

ADO.NET 使用[连接池](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)`SqlConnection`，因此具有相同连接字符串的多个对象重用相同的物理数据库连接。几乎没有你的内存增加是由使用引起的`new SqlConnection()`

# php - 加入 MySQL 表，然后将结果过滤为列名

> ID：10016863
> 
> 赞同：0
> 
> 时间：2012-04-04T18:08:57.793
> 
> 标签：php, mysql, html

这是我用来从 4 个不同表中获取 mysql 结果的代码

```
SELECT DISTINCT c.title as CourseTitle, t.title as TopicTitle, l.title as LessonTitle,    r.title as ResourceTitle, r.location, r.type, r.duration
FROM j17_lessons l, j17_topics t, j17_courses c, j17_resources r
WHERE
CONCAT(c.title, t.title, l.title, r.title, r.type, r.location) LIKE '%Fatih%'
AND c.id = t.course_id
AND l.topic_id = t.id
AND r.lesson_id = l.id
ORDER BY c.title, t.id, l.id, r.id; 
```

这是我获取结果的屏幕截图 [http://i40.tinypic.com/2v1w0ib.png](http://i40.tinypic.com/2v1w0ib.png)

现在我需要为数据库中的每个“CourseTitle”创建一个 HTML 表。

使用 SQL 语句和 PHP 代码，我可以获得第一个查询的结果，但我需要第二个查询来拆分表 foreach 'CourseTitle'

```
/* connect to the db */
$connection = mysql_connect('localhost','root','123');
mysql_select_db('alhudapk',$connection);

/* show tables */
$result = mysql_query('SELECT DISTINCT c.title as CourseTitle, t.title as TopicTitle,     l.title as LessonTitle, r.title as ResourceTitle, r.location, r.type, r.duration
FROM j17_lessons l, j17_topics t, j17_courses c, j17_resources r
WHERE
CONCAT(c.title, t.title, l.title, r.title, r.type, r.location) LIKE '%Taleem%'
AND c.id = t.course_id
AND l.topic_id = t.id
AND r.lesson_id = l.id
ORDER BY c.title, t.id, l.id, r.id',$connection) or die('cannot show tables');
while($tableName = mysql_fetch_row($result)) {

$table = $tableName[0];

echo '<h3>',$table,'</h3>';
$result2 = mysql_query('SELECT '.$table . 'AS' .$table);
if(mysql_num_rows($result2)) { 
```

请指导我构建正确和更好的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:49:38.227

我要做的是将数据库结果放入一个大数组结构中，其中数据以应打印的相同顺序排列。这使得维护代码更容易一些。

```
// run the query as you did in the question

$courses = array();

// use mysql_fetch_assoc as it makes the code clearer
while($row = mysql_fetch_assoc($result)) {
    $ct = $row['CourseTitle'];
    // Found a new Course Title? If so create an array to put the data rows in
    if(!isset($courses[$ct]))
        $courses[$ct] = array();

    // add this row to the end of its course array
    $courses[$ct][] = $row;
}

// now print the results out
foreach($courses as $title =>$course) {
    echo "<h3>$title</h3>";
    echo "<table>";
    foreach($course as $line) {
        echo "<tr><td>" . $line['TopicTitle'] . "</td><td>" 
             . $line['LessonTitle'] . "</td></tr>";
    echo "</table>";
} 
```

上面的代码只打印了前 2 列，但如果你可以让它工作，你应该可以很容易地添加其余的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:20:34.563

添加：

```
GROUP BY c.title 
```

到您的 SQL 语句的末尾。

# c# - 如何以编程方式确定 Word 应用程序冻结

> ID：10016867
> 
> 赞同：1
> 
> 时间：2012-04-04T18:09:16.703
> 
> 标签：c#, ms-word, pdf-generation, office-interop, docx

请分享你的想法！我在检查文件夹并转换 PDF 中具有不同扩展名的一组文档时遇到问题

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using Microsoft.Office.Interop.Word;
namespace ConsoleApplication7
{
    class Program
    {
        static void Main(string[] args)
        {

            Microsoft.Office.Interop.Word.Application word = new Microsoft.Office.Interop.Word.Application();
            object oMissing = System.Reflection.Missing.Value;
            word.Visible = false;
            word.ScreenUpdating = false;

            object aa = WdOpenFormat.wdOpenFormatAuto;
            string errorMessage = null;

            word.DisplayAlerts = WdAlertLevel.wdAlertsNone;

            //selection extension 

            var allExtentionGroupFiles = Directory.GetFiles(@"C:\path", "*.*").
                Where(s=>!s.Contains("~$") && (s.EndsWith(".docx") 
                || s.EndsWith(".doc")
                || s.EndsWith(".docm")
                || s.EndsWith(".dotx")
                || s.EndsWith(".dotm")
                || s.EndsWith(".dot")
                || s.EndsWith(".mht")
                || s.EndsWith(".mhtml")
                || s.EndsWith(".rtf")
                || s.EndsWith(".txt")
                || s.EndsWith(".xml")
                || s.EndsWith(".odt")
                || s.EndsWith(".wps"))).
                GroupBy(s=>s.Substring(s.LastIndexOf('.'))).OrderBy(s=>s.Key);

            foreach (var currentExtentionGroup in allExtentionGroupFiles)
            {

                Console.WriteLine("-->>{0}", currentExtentionGroup.Key);
                foreach (var currentDoc in currentExtentionGroup)
                {

                    Object filename = (Object)currentDoc;

                    try
                    {
                        //open current document

                        Document document = word.Documents.Open(filename,ConfirmConversions:aa,OpenAndRepair:true,Revert:true);

                        document.Activate();

                        object outputFileName = currentDoc.Replace(currentExtentionGroup.Key, ".pdf").Insert(10, "TEST");
                        object fileFormat = WdSaveFormat.wdFormatPDF;

                        document.SaveAs(ref outputFileName,
                        ref fileFormat, ref oMissing, ref oMissing,
                        ref oMissing, ref oMissing, ref oMissing, ref oMissing,
                        ref oMissing, ref oMissing, ref oMissing, ref oMissing,
                        ref oMissing, ref oMissing, ref oMissing, ref oMissing);

                        document.Close();

                    }
                    catch (Exception e1)
                    {
                        errorMessage = e1.ToString();

                    }
                }
            }

word.Quit();

}

    }
} 
```

代码正在工作，问题是当我打开一个文档时，或者任何允许的扩展都可以正常工作，但是假设有人更改了文件夹 c:\ 路径中的示例 DoSomething.exe DoSomething.doc 的扩展名文档已损坏Word 停止响应，当我尝试手动打开此文件时，会出现一个模式窗口文件转换。在这种情况下该怎么办

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:33:16.380

我也遇到过类似的情况——一种解决方案是创建一个带有 2 个线程的子进程，一个与 Word 交互，另一个是“看门狗”……“看门狗”线程会反复检查是否出现了某个模态窗口以及预-定义的超时是......在任何这些情况下，它都会杀死单词进程，然后等待另一个线程结束 - 如果另一个线程没有在预定义的时间内结束，它将杀死另一个线程......

这工作正常，但我观察到在相同的情况下，以艰难的方式杀死单词会导致一些令人不快的副作用，从临时文件未清理到某些单词设置被破坏......

我最终使用 3rd-party 库进行此转换，它根本不需要安装 Word。我对解决方案非常满意，它的性能要好得多，如果文档有问题，我会得到一个异常，我可以相应地处理...我使用的图书馆是商业图书馆...如果您可以选择，我可以提供一个链接...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:05:40.777

不幸的是，据我所知，Office 对象模型不提供任何检测或恢复 Office 应用程序冻结的方法。您甚至不需要破坏文档；对于其他有效的文档，Word 到 PDF 的转换有时会冻结。

我发现的唯一解决方案是生成另一个进程（不仅仅是线程），它在单个文档上执行转换，并让您的主进程等待它在有限的时间段内（比如 5 分钟）完成。如果超时，那么您的主进程应该终止转换进程并将文档标记为不可处理。

您可以将要作为转换过程启动的程序编写为 .NET 控制台应用程序，该应用程序通过命令行参数接收 Word 文档的完整路径。

# windows - 如何将 SyndicationFeed 存储到 XDocument 中？

> ID：10016869
> 
> 赞同：0
> 
> 时间：2012-04-04T18:09:18.403
> 
> 标签：windows, rss, linq-to-xml, syndication-feed

我正在 Windows 8 中（在 C# 中）编写一个 RSS 阅读器，我正在尝试**将 SyndicationFeed 对象传递给 XDocument**。有谁知道如何做到这一点？

到目前为止，我有这个。

```
SyndicationItem currentFeed = new SyndicationItem();

/* ... */

currentFeed = client.RetrieveFeedAsync(uri); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T10:23:16.587

您必须将其成员解析为 xml 元素

```
var client = new SyndicationClient;
Stream st = await client.RetrieveFeedAsync(“http://example.com/feed.rss”);

using (StreamReader sr = new StreamReader(st)) {
   string rss = sr.ReadToEnd(); 
```

}

# java - Java Swing：JScrollPane 不工作

> ID：10016879
> 
> 赞同：4
> 
> 时间：2012-04-04T18:09:33.737
> 
> 标签：java, swing, jscrollpane

我有一个 JPanel，其中包含一些字段。JPanel 的高度是有限的，所以我必须在它周围放置一个 JScrollPane 以便人们可以向下滚动。

如下所示，它显示完美。但是您不能向下（或向上）滚动。

```
DetailPanel detail = new DetailPanel();
JScrollPane jsp = new JScrollPane(detail);
jsp.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
jsp.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
jsp.setBounds(745, 10, 235, 225);
add(jsp); 
```

细节面板：

```
private void init(){
            setLayout(null);
            setSize(140, 400);
            int x = 5, y = 0;
            for(int i = 0; i < lbls.length; i++) {
                JLabel lbl = new JLabel(lbls[i]);
                lbl.setBounds(x, y, 200, 25);
                add(lbl);
                fields[i] = new JTextField();
                fields[i].setBounds(x, y+26, 200, 25);
                add(fields[i]);
                y+=50;
            }
        } 
```

![在此处输入图像描述](../Images/4b28db65a90f6acdfb87074b220105a3.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T18:16:12.853

您的 DetailPanel 没有与之关联的布局管理器，这意味着当您向其中添加子项时它不会展开，这意味着 JScrollPane 没有任何地方可以滚动。调用`setLayout()`您的 DetailPanel 或覆盖`getPreferredSize()`以将其子项的高度相加并返回一个有意义的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T18:17:58.440

我可能是错的，但我认为这可能是因为 DetailPanel 的布局为空。如果您在垂直方向使用 BoxLayout 并调用会发生什么`detail.setPreferredSize(new Dimension(140,400));`？

# iphone - 如何为 iPhone 和 iPad 设置不同的方向

> ID：10016880
> 
> 赞同：-1
> 
> 时间：2012-04-04T18:09:34.007
> 
> 标签：iphone, objective-c, ipad, orientation

> **可能重复：**
> [以编程方式检测 iPad/iPhone 硬件的最佳方法](https://stackoverflow.com/questions/2862140/best-way-to-programmatically-detect-ipad-iphone-hardware)

例如，我希望我的视图仅在 iPhone 上为纵向，在 iPad 上为横向。

在这种情况下，如何检测我是在 iPhone 还是 iPad 上运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T18:15:19.787

写在你的`UIViewController`：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
        return UIInterfaceOrientationIsPortrait(interfaceOrientation);
    else
        return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

# java - 标准化迭代计数不起作用。我究竟做错了什么？

> ID：10016881
> 
> 赞同：3
> 
> 时间：2012-04-04T18:09:38.907
> 
> 标签：java, colors, iteration, fractals, mandelbrot

从标题中可以看出，我正忙于编写一个小程序，用于在 Java 中可视化分形。任何处理分形的人都会到达他/她寻找解决方案以消除这些愚蠢的“条带”的地步，而您只需按照逃脱所需的迭代次数为像素着色。所以我搜索了一种更高级的着色算法，找到了“标准化迭代计数”。我使用的公式是：

```
float loc = (float) 1 - Math.log(Math.log(c.abs())) / Math.log(2); 
```

互联网上的每个人都对这个算法非常满意，每个人都使用它，每个人都得到了很好的结果。除了我。我想，这个算法应该提供一个介于 0 和 1 之间的浮点数。但这不会发生。我做了一些计算并得出结论，该算法仅适用于 c.abs() >= Math.E && c.abs() <= Math.exp(2) （即 Math.E * Math.E ）。就数字而言，这意味着，我对这个等式的输入必须介于 2.718 和 7.389 之间。

但是，当复数 c 的大小大于 2 时，它被认为趋于无穷大。但是对于任何小于 Math.E 的 Input，我得到的值都大于 1。对于任何大于 Math.exp(2) 的数字，它都为负数。如果复数逃逸得非常快，就会出现这种情况。

所以请告诉我：我做错了什么。我很绝望。

谢谢。

**编辑：**

我错了：我发布的代码是正确的，我只是 1\. 以错误的方式使用它，因此它没有提供正确的输出。2\. 必须将 mandelbrot/julia 算法的救助值设置为 10，否则我将再次获得愚蠢的乐队。

问题解决了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-22T20:18:03.640

正如您已经发现的那样，在平滑看起来正确之前，您需要增加救助半径。

二是坐标可以具有的最小长度，这样当您将其平方并添加初始值时，它不会导致更小的长度。如果之前的长度是 2.0，并且您将其平方，那么您将拥有 4.0 的长度（指向任何方向），并且 c 的任何值最多可以减少 2.0（通过精确指向相反的方向） . 如果 c 大于那个值，那么它会立即开始逃逸。

现在，为了估计迭代次数的小数部分，我们查看最终的 |z|。如果 z 只是简单地平方并且没有添加 c，那么它的长度将在 2.0 和 4.0 之间（新值必须大于 2.0 才能退出，旧值必须小于 2.0 才能没有退出早点出来）。

如果没有 c，取 |z| 在 2 和 4 之间的比例位置会给我们迭代次数的一小部分。如果 |z| 接近 4，那么之前的长度一定接近 2，所以在之前的迭代中它已经接近救助，并且平滑的结果应该接近之前的迭代计数来表示。如果它接近于 2，那么之前的迭代距离退出更远，因此平滑的结果应该更接近新的迭代计数。

不幸的是，c 搞砸了。c 越大，该简单关系中的潜在误差就越大。即使旧的长度接近 2.0，它也可能已经降落，以至于 c 的影响使它看起来一定更小。

增加救助可以减轻增加 c 的影响。如果 bailout 为 64，则结果长度将在 64 和 4096 之间，并且 c 的最大偏移量 2 对结果的影响相对较小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:47:12.677

您遗漏了迭代值，试试这个：

```
float loc = <iteration_value> + (float) 1 - Math.log(Math.log(c.abs())) / Math.log(2); 
```

是公式`iteration_value`中产生的迭代次数。`c`

# vb.net - 无法访问 Newtonsoft.Json.Linq.JProperty 上的子值

> ID：10016884
> 
> 赞同：3
> 
> 时间：2012-04-04T18:09:55.020
> 
> 标签：vb.net, twitter, json.net, deserialization

我正在尝试从以下流中解析 json 值：

```
{"id": "tag:search.xxxxx.com,2005:xxxxxxxxxxx"}
{"body": "acordei (:"}
{"verb": "post"}
{"link": "http://xxxxx.com/rohanaf_/xxxxxxxxxx/xxxxxxxxx"}
{"generator": {
  "link": "http://xxxxx.com",
  "displayName": "web"
}}
{"postedTime": "2012-03-31T19:23:51.000Z"}
{"provider": {
  "link": "http://www.xxxxx.com",
  "displayName": "xxxxxx",
  "objectType": "service"
}}
{"object": {
  "summary": "acordei (:",
  "id": "object:search.xxxxxx.com,2005:xxxxxxxxxxxx",
  "link": "http://xxxxxxx.com/rohanaf_/statuses/xxxxxxxxxxxx",
  "postedTime": "2012-03-31T19:23:51.000Z",
  "objectType": "note"
}}
{"actor": {
  "summary": "- namorada da @srtameiga fim. &#9829;",
  "twitterTimeZone": "Brasilia",
  "friendsCount": 197,
  "location": {
  "displayName": "Porto Alegre ",
  "objectType": "place"
},
"link": "http://www.xxxxxxxxxx.com/rohanaf_",
"postedTime": "2010-03-31T20:12:49.000Z",
"image": "http://a0.twimg.com/profile_images/xxxxxxxxxxx/Foto1436_normal.jpg",
"links": [
   {
    "rel": "me",
    "href": null
   }
 ],
 "listedCount": 3,
 "id": "id:xxxxxxxxxxx.com:xxxxxxxxx",
 "languages": [
  "pt"
],
"utcOffset": "-10800",
"followersCount": 347,
"preferredUsername": "rohanaf_",
"displayName": ", feia  ;$",
"statusesCount": 48412,
"objectType": "person"
}}
{
 "xxxxxx_entities": {
 "urls": [],
 "hashtags": [],
 "user_mentions": []
}}
{"objectType": "activity"}
{"source": {
 "language": {
 "value": "fr"
},
 "matching_rules": [
 {
  "value": "lang:fr",
  "tag": null
}
],
}} 
```

我使用 JSON.NET 尝试了以下选项，并且主要工作但缺少几个字段（来源：及其所有子项，包括他们的子项）。("source")("matching_rules")("tag") ..etc

```
Dim results as List(Of JToken) = jobj.Children().ToList
For each item as JProperty In results
    item.CreateReader()
    If item.name ="id" then
         id = item.value
    End If
    If item.name ="actor" then
         author = item.Value("displayName").ToString
    End If 
    If item.name="source" then
        Dim gList as IList(Of JToken)= item("matching_rules").Children.ToList
    End If 
Next 
```

我正在尝试获取该属性名称源的所有子值。现在，如果我使用 JsonTextReader，我可以阅读所有内容，但这很乏味且容易出错。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T18:04:38.783

我想到了

```
If item.name = "source" then
    searchterm = item.last.selecttoken("matching_rules").first.item("value").tostring
End if 
```

# c++ - C++ 中的继承、作用域和模板构造函数

> ID：10016887
> 
> 赞同：0
> 
> 时间：2012-04-04T18:10:15.940
> 
> 标签：c++, templates, inheritance, scope, declaration

我有一个快速的问题。我正在编写 C++ 代码；我在同一个文件中有两个类。一个继承自另一个，我正在尝试使用模板使类更通用。

这是基类的文件：

```
template<class E> // this is the class we will execute upon
class Exec{

protected: 

    typedef void (*Exe)(E*); // define a function pointer which acts on our template class.

    Exe* ThisFunc; // the instance of a pointer function to act on the object
    E* ThisObj;    // the object upon which our pointer function will act

public:

    Exec(Exe* func, E* toAct){ThisFunc = func; ThisObj=toAct;} 
    Exec(){;} // empty constructor

void Execute(){ThisFunc(ThisObj);} // here, we pass our object to the function

}; 
```

这是继承的类：

```
template<class E> // this is the class we will execute upon
class CondExec : protected Exec<E>{ // need the template!

protected:

    typedef bool (*Cond)(E*); // a function returning a bool, taking a template class
    Cond* ThisCondition;

public:

CondExec(Exe* func, E* toAct,Cond* condition): Exec<E>(func,toAct){ThisCondition=condition;}

void ExecuteConditionally(){
    if (ThisCondition(ThisObj)){
        Execute();
        }
    }
}; 
```

但是，当我尝试此操作时，出现以下错误：

```
executables.cpp:35: error: expected `)' before ‘*’ token
executables.cpp: In member function ‘void CondExec<E>::ExecuteConditionally()’:
executables.cpp:37: error: ‘ThisObj’ was not declared in this scope
executables.cpp:37: error: there are no arguments to ‘Execute’ that depend on a template             parameter, so a declaration of ‘Execute’ must be available 
```

似乎 Exec （即：基）类没有得到正确声明；如果我在继承类中包含来自基类的 typedef 和实例变量，我不会收到这些错误。但是，如果我包含基类中的所有内容，那么使用继承毫无意义！

正如一些人所推荐的那样，我已经尝试过对基类进行“声明”（即：class Base;），但这似乎没有帮助。

几个小时以来，我一直在做一些 google-fu；如果有人有任何想法，那就太好了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T18:13:51.243

你需要说`typename Exec<E>::Exe`。因为基类是依赖的。执行相同，您需要使用前面的基类名称来限定调用：`Exec<E>::Execute();`。

否则，那些不合格的名称会忽略依赖的基类。

# mysql - ORDER BY RAND() 似乎不是随机的

> ID：10016888
> 
> 赞同：5
> 
> 时间：2012-04-04T18:10:18.953
> 
> 标签：mysql, sql, random, statistics

我有一个相当简单的 SQL（MySQL）：

```
SELECT foo FROM bar ORDER BY rank, RAND() 
```

我注意到当我刷新结果时，随机性非常弱。

在目前的样本数据中，有六个结果具有相同的等级（整数零）。有很多随机测试，但这里有一个简单的手动测试：*当运行两次时，两次运行的第一个结果应该是相同的，大约有六分之一的时间*。这肯定不会发生，领先的结果至少有三分之一的时间是相同的。

我想要在排列上均匀分布。我不是专业的统计学家，但我很确定`ORDER BY RAND()`应该做到这一点。我错过了什么？

使用 MySQL，`SELECT rand(), rand()`显示两个不同的数字，所以我不购买“每个查询一次”的解释

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T18:14:36.323

[`RAND()`每个查询只执行一次。](http://msdn.microsoft.com/en-us/library/ms177610%28v=sql.105%29.aspx)您可以通过查看结果集来验证这一点。

如果您尝试获得随机顺序，则应该使用`NEWID()`或`CHECKSUM(NEWID())`。

```
WITH T AS ( -- example using RAND()
  SELECT 'Me' Name UNION SELECT 'You' UNION SELECT 'Another'
)
SELECT Name, RAND()
FROM T;

WITH T AS ( -- example using just NEWID()
  SELECT 'Me' Name UNION SELECT 'You' UNION SELECT 'Another'
)
SELECT Name, NEWID()
FROM T;

WITH T AS ( -- example getting the CHECKSUM() of NEWID()
  SELECT 'Me' Name UNION SELECT 'You' UNION SELECT 'Another'
)
SELECT Name, CHECKSUM(NEWID())
FROM T; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:15:04.920

`RAND()`不能为每一行刷新。一个可能的解决方案可能是：

```
SELECT foo FROM bar ORDER BY rank, CHECKSUM(NEWID()) 
```

# objective-c - 初始化 NSURL 对象时出现“线程 1：在断点处停止”错误

> ID：10016890
> 
> 赞同：1
> 
> 时间：2012-04-04T18:10:33.913
> 
> 标签：objective-c, ios, breakpoints, xcode4.3

我正在关注 iTunes U 上的斯坦福大学 iOS 开发课程。

在其中一个演示（我一直在尝试遵循）中，有一段代码从 an 加载属性列表`NSURL`并将其返回为`NSMutableDictionary`.

```
-(NSMutableDictionary *) words
{

    NSURL *wordsURL=[NSURL URLWithString:@"http://cs193p.stanford.edu/vocabwords.txt"];

    words=[[NSMutableDictionary dictionaryWithContentsOfURL:wordsURL] retain];

    return words;
} 
```

应用程序已成功构建，但在运行时会出现以下错误并卡住：

![Xcode 在断点处停止的屏幕截图](../Images/d15b12383f3725eb5412274809c028fd.png)

我无法弄清楚问题是什么。你能帮忙吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-04T18:13:22.440

您在断点处停止。那是一个调试工具，而不是错误。看到左边空白处的蓝色箭头/标签，行号在哪里？将其拖走并将其放在任何地方（您会看到“噗”声）以将其删除，然后再次运行您的项目。

您还可以通过键入停用*所有*断点`⌘</kbd>-`Y`, the key equivalent for the menu item Debug>Deactivate Breakpoints, or you can view all your breakpoints in the Breakpoint Navigator (hit `⌘</kbd>-`6`).``

当执行像这样停止时，您可以从断点继续，方法是`continue`在控制台中的调试器提示符处键入：

```
(lldb) continue 
```

或者点击调试器控件中的“播放”按钮。您也可以输入`Control`-`⌘</kbd>-`Y`, which is the equivalent for the menu item Debug>Continue.`

![在此处输入图像描述](../Images/32098617ac57a8f6914f6379aaac0962.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:15:04.280

这不是错误。你只是设置了一个断点（可能不知道它）。

将左侧列中的蓝色小雪佛龙拖到一边。您会看到它消失并发出噗噗声，然后您可以重新构建您的应用程序，您应该会看到它正常运行。

现在，也就是说，我认为您的代码中存在一些内存管理错误，但我们可以稍后再讨论。;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:14:02.830

该程序正在停止，因为您有一个断点。那是代码左侧的蓝色箭头。右键单击它并删除。

# linux - 如何知道键盘映射、字体等。我当前的 linux 系统使用的变量值？

> ID：10016903
> 
> 赞同：1
> 
> 时间：2012-04-04T18:11:12.537
> 
> 标签：linux, linux-from-scratch

我正在使用 Linux Mint。我找不到`/etc/sysconfig/console`可以告诉我键盘映射、字体、utf-8 模式支持等值的文件。我的系统的值。有没有办法我可以做到？我试过了`echo $UNICODE`，`echo $FONT`但他们没有返回任何东西。几乎是 Linux 的新手。请帮助或指导。:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:50:52.417

LFS 实现中默认不安装 GB 语言环境。如果你运行，你可以看到这个

```
locale -a 
```

您需要使用 GB 安装语言环境定义

```
localedef 
```

执行以下：

```
localedef -c -f UTF-8 -i en_GB en_GB.UTF-8
localedef -c -f ISO-8859-1 -i en_GB en_GB.ISO-8859-1 
```

这为您提供了两个主要标准。然后，您需要为控制台和配置文件做的就是使用书中描述的过程插入 GB 的语言环境代码。（我在下面的代码中使用了 ISO 标准。）

```
cat > /etc/sysconfig/console << "EOF"
# Begin /etc/sysconfig/console

KEYMAP="uk"
FONT="lat1-16 -m 8859-1"

# End /etc/sysconfig/console
EOF 
```

和

```
cat > /etc/profile << "EOF"
# Begin /etc/profile

# export LANG=<ll>_<CC>.<charmap><@modifiers> translates to:

export LANG=en_GB.ISO-8859-1

# End /etc/profile
EOF 
```

简单！;-)

希望这有助于比克

# java - 谷歌应用引擎 1.6.4 在本地是否较慢？

> ID：10016909
> 
> 赞同：9
> 
> 时间：2012-04-04T18:11:28.277
> 
> 标签：java, performance, google-app-engine, gwt

**原始问题**

由于我从 1.6.3 更改了版本。到 1.6.4 我在托管模式下与 GWT 一起工作时遇到了严重的性能问题。

**2012 年 4 月 18 日更新**

该问题在开发环境中的 1.6.4.1 中也可以重现。现在最好是降级到 1.6.3

**2012 年 9 月 7 日更新**

根据 Kris Giesing 的说法：这在 1.7.0 中仍未修复。一个请求在 1.4.3 中需要 330 毫秒来处理，在 1.6.3 中需要 415 毫秒来处理，而在 1.7.0 中需要 13740 毫秒来处理。这是从 Java 分析代码（无 I/O）的计时开始的 - 几乎是 40 倍的减速。

**2012 年 9 月 8 日更新**

Google 在google appengine 的公开问题列表的[issue 7282](http://code.google.com/p/googleappengine/issues/detail?id=7282)中承认了该问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-05T04:50:24.773

这是 1.6.4 中确认的性能回归。我们（谷歌）正在整理一个包含修复的补丁，我们会尽快提供。

抱歉，添麻烦了

（我是介绍回归的人）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T23:03:52.350

是的，肯定有问题： [http ://code.google.com/p/googleappengine/issues/detail?id=7282](http://code.google.com/p/googleappengine/issues/detail?id=7282)

> 1.6.4 启动极慢，处理每个请求的时间异常长。

给它加星！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T22:26:27.773

即使在 sdk 1.6.4.1 之后......它仍然很慢！

问题是处理请求，耗时太长。我不能再用真实数据进行测试了，因为它太慢了。

有人同意吗？

当我尝试对 50 个实体进行批量删除 (pm.deletePersistentAll(ltToBeDelete);) 时，我花了 10 秒。

抱歉，我将不得不降级到 1.6.3 SDK .. 太伤心了 :(

# php - 如何在 PHP 代码中添加 PHP 代码？

> ID：10016915
> 
> 赞同：2
> 
> 时间：2012-04-04T18:11:43.023
> 
> 标签：php, wordpress

例如（在我的情况下）这里有一些代码，

```
<?php
    woo_post_inside_before();   
    if ( $woo_options['woo_post_content'] != 'content' AND !is_singular() )
        woo_image( 'width='.$woo_options['woo_thumb_w'].'&height='.$woo_options['woo_thumb_h'].'&class=thumbnail '.$woo_options['woo_thumb_align'] );
    the_title( $title_before, $title_after );
    woo_post_meta();
?> 
```

现在我想放置以下 PHP 代码，以便在之前输出`woo_post_meta();`：

```
 <?php if (is_single()) : ?>
    <div class="testb"><img src="http://whatthenerd.com/what/wp-content/themes/canvas/300.jpg" alt="test Ad" /></div>
    <?php endif; ?> 
```

如果我必须从字面上显示它，代码将是这样的：

```
<?php
    woo_post_inside_before();   
    if ( $woo_options['woo_post_content'] != 'content' AND !is_singular() )
        woo_image( 'width='.$woo_options['woo_thumb_w'].'&height='.$woo_options['woo_thumb_h'].'&class=thumbnail '.$woo_options['woo_thumb_align'] );
    the_title( $title_before, $title_after );

    <?php if (is_single()) : ?>
    <div class="testthisad"><img src="http://whatthenerd.com/what/wp-content/themes/canvas/300.jpg" alt="test Ad" /></div>
    <?php endif; ?>

    woo_post_meta();
?> 
```

显然这不是正确的做法。那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T18:13:06.737

只需一组标签：

```
<?php
    woo_post_inside_before();   
    if ( $woo_options['woo_post_content'] != 'content' AND !is_singular() )
        woo_image( 'width='.$woo_options['woo_thumb_w'].'&height='.$woo_options['woo_thumb_h'].'&class=thumbnail '.$woo_options['woo_thumb_align'] );
    the_title( $title_before, $title_after );

    if (is_single()){
?>
    <div class="testthisad"><img src="http://whatthenerd.com/what/wp-content/themes/canvas/300.jpg" alt="test Ad" /></div>
<?php
    }

    woo_post_meta();
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T18:14:28.103

有很多方法可以做到这一点。这是一个。

```
<?php
woo_post_inside_before();   
if ( $woo_options['woo_post_content'] != 'content' AND !is_singular() )
{
     woo_image(   'width='.$woo_options['woo_thumb_w'].'&height='.$woo_options['woo_thumb_h'].'&class=thumbna il '.$woo_options['woo_thumb_align'] );
}
the_title( $title_before, $title_after );
?>
<?php if (is_single()) : ?>
    <div class="testthisad"><img src="http://whatthenerd.com/what/wp-     content/themes/canvas/300.jpg" alt="test Ad" /></div>
    <?php endif; ?>

<?php  woo_post_meta(); ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T18:16:57.400

这将做你想要的（未经测试）：

```
<?php
    woo_post_inside_before();   
    if ( $woo_options['woo_post_content'] != 'content' AND !is_singular() )
        woo_image( 'width='.$woo_options['woo_thumb_w'].'&height='.$woo_options['woo_thumb_h'].'&class=thumbnail '.$woo_options['woo_thumb_align'] );
    the_title( $title_before, $title_after );

    if (is_single()) : ? echo "[HTML code handling slashes]" /></div>;

    woo_post_meta();
?> 
```

[http://www.w3schools.com/php/php_if_else.asp?output=print](http://www.w3schools.com/php/php_if_else.asp?output=print)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T18:13:30.863

你可以做

```
<?php
// Code...
eval('my code as a string'); 
```

请记住，尽管这非常危险。

但在你的情况下，我认为你可以做到

```
<?php
    woo_post_inside_before();   
    if ( $woo_options['woo_post_content'] != 'content' AND !is_singular() )
        woo_image( 'width='.$woo_options['woo_thumb_w'].'&height='.$woo_options['woo_thumb_h'].'&class=thumbnail '.$woo_options['woo_thumb_align'] );
    the_title( $title_before, $title_after );

    if (is_single()) : ?>
    <div class="testthisad"><img src="http://whatthenerd.com/what/wp-content/themes/canvas/300.jpg" alt="test Ad" /></div>
    <?php endif; 
    woo_post_meta();
?> 
```

# tfs - 如何找到特定 TFS 项目子文件夹的所有标签？

> ID：10016917
> 
> 赞同：19
> 
> 时间：2012-04-04T18:11:55.817
> 
> 标签：tfs, tfvc

假设有一个 TFS 项目`Project`，其中包含子文件夹`trunk`和`1.0`. `trunk`包含此项目的最新版本的应用程序代码，并`1.0`包含同名已发布版本的相同应用程序的代码。

两个子文件夹都有标签，所有标签都包含仅其中一个子文件夹中的文件。[您还可以假设标签在整个子文件夹中的所有文件的特定（最大）变更集上是递归的，如果这样可以简化您的答案。]

如何使用 Visual Studio、TFS`tf.exe`命令行工具或任何其他公开（且免费）可用的工具或代码为这些子文件夹之一创建标签列表。

注意 – 我编写了 T-SQL 代码，直接查询 TFS 版本控制数据库以生成此信息，但我很好奇是否有“更好”的方法可以这样做。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-04T18:26:40.050

在 Visual Studio 的“*源代码管理资源管理器*”窗口中，右键单击要为其列出相关标签的子文件夹，然后从上下文菜单中选择*“查看历史记录”。*在应出现的“*历史记录”*窗口中，应该有一个子选项卡*标签*（如下所示），其中列出了应用于该子文件夹的标签（但不是该子文件夹中的特定项目）。

![在此处输入图像描述](../Images/349553aac614de3bc5e1d81e046e96d5.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-04T18:35:31.960

**在 Visual Studio 中查找标签**

1.  打开**源代码管理资源管理器**。

2.  在**Source Control Explorer**中，打开您要查找的集合、团队项目、分支、文件夹或文件的**快捷菜单**。

3.  选择**查看历史记录**。您将看到一个包含所有**Changesets**的新窗口。

4.  在选项卡菜单中选择**标签**，如下图所示。

![在此处输入图像描述](../Images/349553aac614de3bc5e1d81e046e96d5.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-01T15:21:29.407

我今天需要在命令行上执行此操作，所以这里有一个批处理文件，希望能做同样的事情（我们才刚刚开始使用 TFS，并且文件夹上的标签有限，以测试 OP 的要求）。

您需要将集合参数编辑为`tf`您的设置，并可能根据您的身份验证方式提供登录详细信息。

```
@ECHO OFF
SETLOCAL EnableDelayedExpansion

@REM Check required parameters
IF [%1]==[] GOTO :usage

tf labels /owner:* /format:detailed %2 /collection:http://server:8080/tfs/collection > labels.txt 2> nul

SET CURRENT_LABEL=
FOR /F "tokens=1,2,3" %%G IN (labels.txt) DO (
    IF [%%G]==[Label] (
        SET CURRENT_LABEL=%%I
    ) ELSE (
        IF /I [%%H]==[%1] (
            ECHO !CURRENT_LABEL!
        )
    )
)
DEL labels.txt

GOTO :eof
@REM Subroutines

:usage
echo tfs_labelsforfolder - Display all labels that are applied to a folder.
echo.
echo tfs_labelsforfolder ^<folder^> ^[label_filter^]
echo.
echo     folder       - The folder to show the labels for, e.g. $/Project/folder
echo     label_filter - Search pattern to use in tf labels command.
echo.
GOTO :eof 
```

# java - Posting multiple FormDataParams with the same name to java Jersey REST service

> ID：10016921
> 
> 赞同：6
> 
> 时间：2012-04-04T18:12:06.560
> 
> 标签：java, web-services, rest, jersey

I have a jersey service and unit test (using jersey client) that worked ok with 3 FormDataParams:

```
@Path("myService")
@Consumes(MediaType.MULTIPART_FORM_DATA)
@POST
@Produces(MediaType.TEXT_PLAIN)
public Response doService(@FormDataParam("p1") String v1,
                         @FormDataParam("p2") InputStream v2,
                         @FormDataParam("p3") InputStream v3) throws IOException { 
```

The test code is like this:

```
FormDataMultiPart fdmp = new FormDataMultiPart();      
fdmp.field("p1", v1);
fdmp.field("p2", v2);
fdmp.field("p3", v3);
ClientResponse response = service.path("myService").type(MediaType.MULTIPART_FORM_DATA).accept(MediaType.TEXT_PLAIN).post(ClientResponse.class, fdmp); 
```

The problem is when I change it to support multiple values for the p1 field. I changed the service signature part from

```
@FormDataParam("p1") String v1, 
```

to

```
@FormDataParam("p1") List<String> v1, 
```

but then I get

```
04-Apr-2012 18:56:59 com.sun.grizzly.http.servlet.ServletAdapter doService
SEVERE: service exception:
java.lang.IllegalArgumentException: wrong number of arguments
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:172)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:67)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:265)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:133)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:83)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:133)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:71)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:996)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:947)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:938)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:399)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:478)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:663)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820) 
```

The question is how do I change the working code I posted above to allow multiple values for the "p1" parameter.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T15:57:53.210

You'll want to change the parameter to

```
@FormDataParam("p1") List<FormDataBodyPart> v1 
```

and then pull the Strings off as you process the code

```
for (FormDataBodyPart vPart : v1) {
    String v = vPart.getValueAs(String.class);
    ... 
```

You might be able to just call `vPart.toString()` as well; this is the general method.

# asp.net-mvc-3 - ASP .NET MVC 3 - 处理 ActionResult DeleteConfirmed 中发生的错误

> ID：10016922
> 
> 赞同：0
> 
> 时间：2012-04-04T18:12:11.713
> 
> 标签：asp.net-mvc-3, error-handling, controller

在控制器中，可以使用 try-catch 块处理 Create/Edit ActionResult 的错误，并将错误显示在视图上（通过 ModelState.AddModelError）。

现在我正在尝试使用 DeleteConfirmed ActionResult 进行类似的操作，但视图页面上没有出现错误。我试图从中删除的表应该抱怨删除外键字段值。

我应该以不同的方式 RedirectToAction 还是添加其他内容？

```
 [HttpPost, ActionName("Delete")]
        public ActionResult DeleteConfirmed(int id)
        {
            try
            {
                StatusList statuslist = db.Status.Find(id);
                db.Status.Remove(statuslist);
                db.SaveChanges();
            }
            catch (DataException dex)
            {
                ModelState.AddModelError("", dex.Message);
                return RedirectToAction("Delete");

            }
                return RedirectToAction("Index");

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:11:50.470

如果您进行重定向，您将丢失 ModelState。所以你可以做两件事imo。

1.  [在TempData](http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications) ["myerrorkey"] = dex.Message中设置错误消息，因此消息将“存活”一次重定向
2.  更改您的方法，并在出现错误的情况下返回一个视图，以便在重定向期间不会清除模型状态

我个人会选择第一个。所以你也可以考虑实现 TempData 以防删除告诉用户，在索引页面中，一切都很顺利。

# jquery - 在jquery fullcalendar中，我可以添加一个新事件而不刷新整个月吗？

> ID：10016936
> 
> 赞同：15
> 
> 时间：2012-04-04T18:13:14.813
> 
> 标签：jquery, fullcalendar

我正在使用[jquery fullcalendar](http://arshaw.com/fullcalendar/)，效果很好。我的事件来自 ajax 调用并以 json 形式返回。

我试图弄清楚是否有一种方法可以从客户端添加事件而不刷新整个服务器。

我有能力在我的代码中添加一个新事件（将它添加到我的数据库中），但我知道如何刷新 UI 以显示这个新事件的唯一方法是调用 refetchevents （但这会重新加载该月的所有内容）服务器。

无论如何我可以坚持所有客户端的其他事件以避免整月的事件刷新？

我看到我可以通过 removeEvents 方法（使用 id 过滤器）一一删除事件，但我没有看到添加事件的等价物。

## 更新：

我有一个后续问题，给出了以下两个都有效的答案。（创建另一个问题没有意义）。我想看看推荐的在客户端“刷新”单个事件的方法。我试图简单地使用具有相同 ID 的事件调用“renderEvent”，但这会在日历上创建一个新事件。

我看到有：**UpdateEvent**方法，我认为这将是答案，但似乎这仅在您位于 eventClick 内时才有效（您不能只创建一个新的事件对象，设置 Id 并更改字段并调用更新。

```
 http://arshaw.com/fullcalendar/docs/event_data/updateEvent/ 
```

是否有类似于下面的“添加客户端”事件逻辑的从客户端刷新事件的推荐方法？

现在我只是在这样的事件中删除和阅读：

```
 $('#calendar').fullCalendar('removeEvents', data.Event.id);
       $('#calendar').fullCalendar('renderEvent', data.Event, true); 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-04T18:52:39.270

要将客户端的事件添加到 fullCalendar 中，您可以调用：

```
var myCalendar = $('#my-calendar-id'); 
myCalendar.fullCalendar();
var myEvent = {
  title:"my new event",
  allDay: true,
  start: new Date(),
  end: new Date()
};
myCalendar.fullCalendar( 'renderEvent', myEvent ); 
```

我没有测试这段代码，但这应该可以完成工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-06T15:02:13.083

Here is the code that I use:

```
function addCalanderEvent(id, start, end, title, colour)
{
    var eventObject = {
    title: title,
    start: start,
    end: end,
    id: id,
    color: colour
    };

    $('#calendar').fullCalendar('renderEvent', eventObject, true);
    return eventObject;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-16T20:17:06.810

这个怎么样？

```
$("#calendar").fullcalendar('addEventSource', yourEvent); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-01T10:01:08.147

我发现无需回发即可刷新的最佳方法是

```
 $('#calendar').fullCalendar('removeEvents', data[0].id);
 $('#calendar').fullCalendar('addEventSource', data); 
```

数据需要是“removeEvents”的 ID 或过滤器 [http://fullcalendar.io/docs/event_data/removeEvents/](http://fullcalendar.io/docs/event_data/removeEvents/)

数据需要是“addEventSource”的数组/URL/函数[http://fullcalendar.io/docs/event_data/addEventSource/](http://fullcalendar.io/docs/event_data/addEventSource/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-12T20:08:19.457

我试图编辑像您这样的现有事件，但在我的情况下，我需要它使用相同的 id，所以我无法删除该事件并创建另一个事件，因为这不是很好......

按照 [http://arshaw.com/fullcalendar/docs/event_data/updateEvent/上的文档](http://arshaw.com/fullcalendar/docs/event_data/updateEvent/)

我发现你需要传递给句子的事件： $('#calendar').fullCalendar('updateEvent', eventObject ); 不能是任何对象。它应该是一个完整日历的事件，这就是为什么它对 eventClick 事件非常有效，但不适用于这些事件之外。

要在 fullCalendar 事件之外使用它，这是它适用于我的代码：

```
function updateEvent(id, title, date) {

    i = id;

    /*This is the id of the event on full calendar,
    in my case i set this id when I create each event*/

    event = $('#calendar').fullCalendar( 'clientEvents', [i] )[0];
    /*This method returns an array of object with id == i
    That's why is necessary to aggregate [0] at the end 
    to get the event object.*/

    if (event != null){
        //make your modifications and update
        event.title = title;
        event.start = date;
        $('#calendar').fullCalendar( 'updateEvent', event );
    }
} 
```

希望它适用于任何人！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-09T19:42:34.063

您无需添加和删除事件来更新它们。您只需要从日历中获取事件并将其传递给 updateEvent 方法：

```
 function updateCalanderEvent(id, start, end, title, colour)
    {
        var eventObject = $('#calendar').fullCalendar( 'clientEvents', id )

        if (eventObject != null)
        {
            eventObject.title = title;
            eventObject.start = start;
            eventObject.end = end;
            eventObject.color = colour;

            $('#calendar').fullCalendar( 'updateEvent', eventObject );
        }
        return eventObject;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-02T12:41:59.797

初始化您的日历，然后添加一个点击事件：

```
document.addEventListener('DOMContentLoaded', function () {

     var calendarEl = document.getElementById('calendar');

     var calendar = new FullCalendar.Calendar(calendarEl, {/*OPIONS*/});

     calendar.render();

     calendar.on('dateClick', function(info) {

         addNew(info);
     });
}); 
```

将事件添加到日历：

```
function addNew(info){
     var myEvent = {
         title:"my new event",
         start: info.dateStr,
         end: info.dateStr
     };
     calendar.addEvent(myEvent);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-03T01:14:08.463

用于阿贾克斯

```
function DeploySchedule(){
    $.ajax({
        type: "POST"
        , url: "/Services/ScheduleService.svc/DeploySchedule"
        , contentType: "application/json; charset=utf-8"
        , dataType: "json"
        , success: function (result) {
            $('#calendar').fullCalendar('removeEvents');

            result.forEach(function (_row) {
                var event = new Object();
                event.title = _row.TrackingNumber + " (" + _row.Worker + ")";
                event.start = _row.Date;
                event.WorkerGuid = _row.WorkerGuid;
                event.ScheduleGuid = _row.ScheduleGuid;
                event.TrackingNumber = _row.TrackingNumber;
                event.Worker = _row.Worker;
                $('#calendar').fullCalendar('renderEvent', event);
            });
        }
        , error: function (xhr, status, error) { // if error occure
            alert(xhr.responseText);
        }
        , complete: function () {
        }
    });
} 
```

# vbscript - 使用 VBscript 或批处理文件最小化和最大化 Windows

> ID：10016937
> 
> 赞同：0
> 
> 时间：2012-04-04T18:13:20.243
> 
> 标签：vbscript, batch-file

我正在尝试找到一种使用 vbscript 或批处理文件最大化和最小化某个应用程序的方法。我已经看到过多次尝试这样做，但似乎都没有奏效。有没有人有任何建议，无需下载任何第三方软件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:55:47.793

我认为 START 命令的 /MIN 和 /MAX 开关应该可以工作，即：

```
START "Window Title" /MAX YourApplication Parameters ... 
```

键入`START /?`以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T18:46:52.863

如果您试图最大化批处理窗口，您可以使用代码

```
Mode Con Cols=500 Lines=500 
```

它的作用是确定上下有多少文本块，例如，如果将 cols 更改为 20，则可以在该窗口中放置 20 个字母。线条也是一样的，只不过是上下。

:edit 对不起，我读错了你的问题。无论哪种方式，我的回答都是错误的。我认为唯一的方法是从启动时最大化它。

# cocos2d-iphone - CCMenuitem 多线？

> ID：10016940
> 
> 赞同：0
> 
> 时间：2012-04-04T18:13:25.857
> 
> 标签：cocos2d-iphone, line, menuitem, multiline, break

有没有办法制作 Menuitem 多行？我试过了

```
CCMenuItemFont mapPacks = [CCMenuItemFont itemFromString:@"Map\n Packs" target:self selector:@selector(mapPacks:)]; 
```

但这似乎不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:02:17.050

您忘记在代码片段中的 CCMenuItemFont 之后添加“*”。我使用标签来创建多行项目，如下所示：

```
CCLabelTTF *label = [CCLabelTTF labelWithString:@"Map\n Packs" dimensions:CGSizeMake(100, 100) 
                                           alignment:UITextAlignmentCenter 
                                           fontName:@"Arial" fontSize:22];
CCMenuItemFont *mapPacks = [CCMenuItemFont itemWithLabel:label target:self selector:@selector(mapPacks:)]; 
```

# cocoa - 用于邮件和 ARC 的脚本桥

> ID：10016942
> 
> 赞同：0
> 
> 时间：2012-04-04T18:13:27.790
> 
> 标签：cocoa

我正在将我的项目转移到 ARC 并发生崩溃

```
2012-04-04 21:08:32.438 callsfreecall[39756:780b] warning: <MailApplication @0x87bf27f0: application "Mail" (764)> has no class for scripting class "outgoing message".
2012-04-04 21:08:32.438 callsfreecall[39756:780b] -[MailApplication outgoingMessages]: unrecognized selector sent to instance 0x7ff987bf27f0 
```

我不知道，我该如何解决。

代码是标准的：

```
NSString *to = [toForCheck stringByReplacingOccurrencesOfString:@" " withString:@""];
/* create a Scripting Bridge object for talking to the Mail application */
MailApplication *mail = [SBApplication
                         applicationWithBundleIdentifier:@"com.apple.Mail"];

/* create a new outgoing message object */

// NSData *data = [NSData dataWithContentsOfFile:@"/Users/alex/test.rtf"];
//NSMutableDictionary *attrib = [[NSMutableDictionary alloc] initWithCapacity:0]; 
//NSAttributedString *attributed = [[NSAttributedString alloc] initWithPath:@"/Users/alex/test.rtf" documentAttributes:nil];

MailOutgoingMessage *emailMessage =
[[[mail classForScriptingClass:@"outgoing message"] alloc]
 initWithProperties:
 [NSDictionary dictionaryWithObjectsAndKeys:
  subject, @"subject",
  content , @"content",
  nil]];

/* add the object to the mail app  */
[[mail outgoingMessages] addObject: emailMessage];

/* set the sender, show the message */
emailMessage.sender = from;
emailMessage.visible = NO;

/* create a new recipient and add it to the recipients list */
MailToRecipient *theRecipient =
[[[mail classForScriptingClass:@"to recipient"] alloc]
 initWithProperties:
 [NSDictionary dictionaryWithObjectsAndKeys:
  to, @"address",
  nil]];
[emailMessage.toRecipients addObject: theRecipient];

/* add an attachment, if one was specified */
for (NSString *attachmentFilePath in filePaths)
{
    //NSString *attachmentFilePath = filePath;
    if ( [attachmentFilePath length] > 0 ) {
        /* create an attachment object */
        MailAttachment *theAttachment = [[[mail
                                           classForScriptingClass:@"attachment"] alloc]
                                         initWithProperties:
                                         [NSDictionary dictionaryWithObjectsAndKeys:
                                          attachmentFilePath, @"fileName",
                                          nil]];

        /* add it to the list of attachments */
        [[emailMessage.content attachments] addObject: theAttachment];
    }
}
/* send the message */
[emailMessage send]; 
```

# c++ - CX0030：错误：无法评估表达式

> ID：10016948
> 
> 赞同：0
> 
> 时间：2012-04-04T18:13:41.320
> 
> 标签：c++, pointers

**由于上述错误，我无法修改类对象的成员值：**

当我调用我的初始化函数来初始化我的“garo”对象时，我收到以下运行时错误，

“Heretic.exe 中 0x01323976 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000008。”

注意：Garo 类是 Object 的子类。

**编码**

**加罗**

```
#pragma once
#include "Object.h"

class Garo : public Object
{
private:
    int animationRow;

public:
    Garo();
    void Destroy();

    void Init(ALLEGRO_BITMAP *image = NULL);
    void Update();
    void Render();

    void MoveLeft();
    void MoveRight();
    void Idle();
    void SetAnimationRow(int row);
}; 
```

**加罗.cpp**

```
#include "Garo.h"

Garo::Garo()
{
    Object::Init(20, 200, 3, 0, 0, 0, 16, 24);
}

void Garo::Init(ALLEGRO_BITMAP *image)
{
    Object::Init(20, 200, 3, 0, 0, 0, 16, 24);

    SetID(PLAYER);
    SetAlive(true);

    maxFrame = 3;
    curFrame = 0;
    frameWidth = 32;
    frameHeight = 48;
    animationColumns = 4;
    animationDirection = 1;

    animationRow = 0;

    if(image != NULL)
        Garo::image = image;
} 
```

...其余的已缩写

**对象.h**

```
#pragma once

#include <iostream>
#include <allegro5/allegro5.h>
#include <allegro5/allegro_primitives.h>
#include "Globals.h"

class Object
{
private:
    int ID;
    bool alive;
    bool collidable;

protected:
    float x;
    float y;

    float velX;
    float velY;

    int dirX;
    int dirY;

    int boundX;
    int boundY;

    int maxFrame;
    int curFrame;
    int frameCount;
    int frameDelay;
    int frameWidth;
    int frameHeight;
    int animationColumns;
    int animationDirection;

    ALLEGRO_BITMAP *image;

public:
    Object();
    void virtual Destroy();

    void Init(float x, float y, float velX, float velY, int dirX, int dirY, int boundX,               int boundY);
    void virtual Update();
    void virtual Render();

    float GetX() {return x;}
    float GetY() {return y;}

    void SetX(float x) {Object::x = x;}
    void SetY(float y) {Object::y = y;}

    int GetBoundX() {return boundX;}
    int GetBoundY() {return boundY;}

    int GetID() {return ID;}
    void SetID(int ID) {Object::ID = ID;}

    bool GetAlive() {return alive;}
    void SetAlive(bool alive) {Object::alive = alive;}

    bool GetCollidable() {return collidable;}
    void SetCollidable(bool collidable) {Object::collidable = collidable;}

    bool CheckCollisions(Object *otherObject);
    void virtual Collided(int objectID);
    bool Collidable();
}; 
```

**对象.cpp**

```
#include "Object.h"

Object::Object()
{
    x = 0;
    y = 0;

    velX = 0;
    velY = 0;

    dirX = 0;
    dirY = 0;

    boundX = 0;
    boundY = 0;

    maxFrame = 0;
    curFrame = 0;
    frameCount = 0;
    frameDelay = 0;
    frameWidth = 0;
    frameHeight = 0;
    animationColumns = 0;
    animationDirection = 0;

    image = NULL;

    alive = true;
    collidable = true;
}

void Object::Init(float x, float y, float velX, float velY, int dirX, int dirY, int boundX, int boundY)
{
    std::cout << "HERE?" << std::endl;
    Object::x = x;
    Object::y = y;

    Object::velX = velX;
    Object::velY = velY;

    Object::dirX = dirX;
    Object::dirY = dirY;

    Object::boundX = boundX;
    Object::boundY = boundY;
} 
```

**调用代码**

```
Garo *garo;
// ...
garo->Init(garo_img); 
```

这是我收到运行时错误的地方。我正在使用 Allegro 库，因此请随时询问您可能看到的任何奇怪类型。我还在学习 C++，所以请帮助我理解一些基本的术语。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T18:16:53.780

您需要实例化一个对象实例来进行操作。例如：

```
garo = new Garo(); 
```

通过错过这一点，您试图在未初始化的变量上调用方法。您可能应该考虑使用某种形式的智能指针来确保对象被销毁。

# ruby-on-rails - Rails 模块和路由

> ID：10016955
> 
> 赞同：1
> 
> 时间：2012-04-04T18:14:07.763
> 
> 标签：ruby-on-rails, module, routing, include

我想包括`TestModule`在`MyModule`：

```
# in test_module.rb
module TestModule
    SOMETHING = [1, 2, 3]
end

# in my_module.rb
module MyModule
    include TestModule

    def my_method
        "testing"
    end
end 
```

我收到此错误：

```
Routing Error: uninitialized constant MyModule::TestModule 
```

我已经仔细检查了 Rails 命名约定。**知道为什么这不起作用吗？**

**更多信息**：`config.autoload_paths += ...`in`application.rb`被注释掉。然而，其他模块`/lib`正在以某种方式加载。

**更多信息 2**：我认为 rails 看不到新文件`test_module.rb`。如果我将新模块添加到包含模块的现有文件中，那么包含新模块就可以了。$LOAD_PATH 是否有某种轨道清理或刷新过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:46:51.870

尝试在文件顶部添加“require”，如下所示：

```
# in my_module.rb
require 'test_module'
module MyModule
  include TestModule
  ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T19:02:44.540

你也可以试试这个：

```
# in my_module.rb

load 'test_module.rb'

module MyModule
   include ::TestModule

   def my_method
      "testing"
   end
end 
```

引用顶级命名空间。

# tomcat - 如何在tomcat中为MySQLNonTransientConnectionException摆脱无限循环连接关闭后不允许操作

> ID：10016960
> 
> 赞同：1
> 
> 时间：2012-04-04T18:14:25.647
> 
> 标签：tomcat, jdbc

我在tomcat中覆盖了一个war文件，而没有删除以前的war文件。我去了日志，同样的错误在一个循环中，描述如下：

MySQLNonTransientConnectionException 连接关闭后不允许操作

我已经删除了war文件，停止并启动了tomcat。循环继续打击原木。

有谁知道如何阻止这些错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T17:53:59.720

似乎是侥幸。从那以后我没有看到这个错误。如果你让我知道，我会重新打开。

# php - PHP上传文件php.ini配置

> ID：10016963
> 
> 赞同：0
> 
> 时间：2012-04-04T18:14:34.890
> 
> 标签：php

我有一个问题 - 我有一个文件上传器，每个用户都可以上传 max_size:30M。现在我想从你的经验中知道我应该在 php.ini 中设置什么。

以下是我已经更改的选项，但我不确定这是否是最好的：

```
upload_max_filesize = 30M

post_max_size = 30M 

max_execution_time = 300

max_input_time = 300

memory_limit = 32M 
```

在这里，我认为 memory_limit 有点低。还有什么我必须包括的吗？当我尝试上传超过 30M 时，Firefox 崩溃了。

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:15:38.540

如果您大量处理文件，您应该拆分文件并将其上传到单独的部分，它不会阻塞服务器，您可以检查进度，您也不需要那么多内存和执行时间。

出于某种原因，有人说这不是真的......好吧，我不认为 Youtube 或像 Megaupload (rip) 这样的上传网站使用 2gb 的内存和 2 小时的最大执行时间来上传一个用户的文件，他们拆分文件，无论如何，如果您需要上传 30mb 的文件，并且您使用标准 PHP，您的网络服务器将阻塞直到上传完成，除非您不关心这一点，否则不建议这样做。最简单的解决方案是分段上传，您可以使用 Flash/Silverlight/JS/HTML5 或任何您喜欢的方式在客户端上传，然后在服务器端加入它们。

# sharepoint - New Managed Path before a site collection

> ID：10016973
> 
> 赞同：0
> 
> 时间：2012-04-04T18:15:09.463
> 
> 标签：sharepoint, powershell, collections, path, managed

I already created a top level Web Application and site collection. The powershell input for my site collection is.

```
Get-SPWebTemplate | Where{ $_.Title -eq "Team Site" } | ForEach-Object{ New-SPSite http://teampowershell.sharepoint1c.lab -OwnerAlias SHAREPOINT1C\SP_FARM -Template $_ } 
```

After this I am attempting to create a new top level site at the URL.

> "http://teams.contoso.com/Finance" with the powershell command

```
Get-SPWebTemplate | Where{ $_.Title -eq "Team Site" } | ForEach-Object{ New-SPSite http://teampowershell.sharepoint1c.lab/finance -OwnerAlias SHAREPOINT1C\SP_FARM -Template $_ } 
```

but I am greeted with this error

```
>"New-SPSite : A site collection could not be created as the provided managed pat
h does not exist.  Change the URL to use an existing managed path or create the
 missing managed path prior to calling this command.
At line:1 char:83
+ Get-SPWebTemplate | Where{ $_.Title -eq "Team Site" } | ForEach-Object{ New-S
PSite <<<<  http://teampowershell.sharepoint1c.lab/finance -OwnerAlias SHAREPOI
NT1C\SP_FARM -Template $_ }
    + CategoryInfo          : InvalidData: (Microsoft.Share...SPCmdletNewSite:
   SPCmdletNewSite) [New-SPSite], SPCmdletException
    + FullyQualifiedErrorId : Microsoft.SharePoint.PowerShell.SPCmdletNewSite" 
```

I assume I have to create a managed path but where do I specify a managed SiteCollectionURL?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:23:37.973

Just like you would through Central Admin, you don't specify the site collection but rather the the web app under which the [managed path](http://technet.microsoft.com/en-us/library/cc261845.aspx) will live:

```
New-SPManagedPath [-RelativeURL] "</RelativeURL>" -WebApplication <WebApplication> 
```

# ruby-on-rails - 用于插件架构的 Rails 应用程序范围的事件/挂钩

> ID：10016975
> 
> 赞同：2
> 
> 时间：2012-04-04T18:15:24.660
> 
> 标签：ruby-on-rails

我正在构建一个 Ruby on Rails 应用程序，我希望能够编写自定义插件来响应应用程序范围的事件。

例如，用户可以签到我的应用程序中的某个地方。发生这种情况时，我可能希望能够

*   发送电子邮件通知
*   发送推送通知
*   给用户一些积分
*   将事件记录到数据库

关键是，我希望将上述操作与签入代码分离。我希望能够启用或禁用这些不同的代码片段。我应该能够在不接触签入代码库的情况下向代码中添加其他操作。

Ruby on Rails 有什么机制可以做这样的事情吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:01:18.093

您所描述的本质上是一种通用的发布/订阅机制。有上千种方法可以做到这一点，而且在 github 和 ruby​​gems 上可能有尽可能多的库可用。

他们的关键问题是，你想如何改变行为？您是否乐意在启动时调用一些函数来定义行为？在 ruby​​ 中，这非常简单：

```
#! /usr/bin/ruby

@hooks = []

def run_hooks(*args)
    @hooks.each { |hook| hook.call(*args) }
end

def on_trigger(&hook)
    @hooks << hook
end

on_trigger { |*args| puts "This is one trigger: #{args.inspect}" }

on_trigger { puts "This is another trigger" }

run_hooks("some","params") 
```

或者你想要更复杂的东西？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:10:15.773

虽然我确信还有很多其他发布/订阅类型的系统，但至少值得看看[ActiveSupport::Notifications](http://api.rubyonrails.org/classes/ActiveSupport/Notifications.html)，它是 rails 的一部分

它使向订阅者发布事件和感兴趣的第 3 方订阅它们变得非常容易。应用程序日志文件中的运行时摘要是这样实现的：rails 使用运行时信息发布事件，并提供将信息写入日志文件的订阅者。这也是 activerecord 查询日志的实现方式。

# jquery - 使用reloadGrid时的jqGrid和thickbox

> ID：10016976
> 
> 赞同：1
> 
> 时间：2012-04-04T18:15:28.617
> 
> 标签：jquery, json, jqgrid, thickbox

我在同一页面上使用 jqGrid 和thickbox 时遇到问题。我正在使用“reloadGrid”方法来刷新数组数据。

jqGrid 初始化：

```
jQuery("#tablaCompromisos").jqGrid({
        datatype: "local",            
        height: 270,
        width: 1000,
        colNames: ['ID', 'Nombre Reunión', 'Reunión', 'Descripción', 'Cierre', 'Estado', 'Prioridad', 'Responsable R1', 'Responsable 2', 'Categoría'],
        cmTemplate: {
            resizable: false
        },
        colModel: [
                    { width: 60, name: 'idCompromiso', index: 'idCompromiso', sorttype: "int", align: "center" },
                { width: 300, name: 'reunion.nombre', index: 'reunion.nombre', sorttype: "string" },
                { width: 90, name: 'fechaReunion', index: 'fechaReunion', sorttype: "string", align: 'center', formatter: 'date', formatoptions: { newformat: 'd/M/Y' }, classes: 'reuFecha' },
                { width: 300, name: 'descCompromiso', index: 'descCompromiso', sorttype: "string", classes: 'compDesc' },
                { width: 90, name: 'fechaCierre', index: 'fechaCierre', sorttype: "string", align: 'center', classes: 'fechaCierre', formatter: 'date', formatoptions: { newformat: 'd/M/Y'} },
                { width: 60, name: 'estado.nombre', index: 'estado.orden', sorttype: "int", align: 'center', classes: 'estado', formatter: fomatoEstado },
                { width: 90, name: 'prioridad.nombre', index: 'prioridad.orden', sorttype: "int", align: 'center', formatter: fomatoPrioridad, classes: 'prioridad' },
                { name: 'responsableR1.nombre', index: 'responsableR1.nombre', sorttype: "string", classes: 'resp1' },
                { name: 'responsableR2.nombre', index: 'responsableR2.nombre', sorttype: "string", classes: 'resp2' },
                { name: 'categoria.nombre', index: 'categoria.orden', sorttype: "string", classes: 'categoria' }
                ],
        multiselect: false,
        caption: "Listado de compromisos según filtro",
        rowNum: 11,
        pager: "#tablaCompromisosPag",
        autowidth: false,
        shrinkToFit: false,
        altRows: true
    }); 
```

刷新方法：

```
$("#tablaCompromisos").jqGrid('clearGridData').jqGrid('setGridParam', { datatype: 'local', data: CargarDatosGrilla() }).trigger("reloadGrid"); 
```

没关系，但是点击链接后：

```
<a onclick="cargarGraficoAvance();return false;" title="Ver gráfico de avance" class="thickbox" href="#TB_inline?height=410&amp;width=610&amp;inlineId=wrapperGrafico">11,11</a> 
```

下一个调用

```
$("#tablaCompromisos").jqGrid('clearGridData').jqGrid('setGridParam', { datatype: 'local', data: CargarDatosGrilla() }).trigger("reloadGrid"); 
```

在 updatepager 方法上抛出错误，因为 ts 为空：

```
ts is null
http://localhost/gestion/js/jquery.jqGrid.src.js
Line 1578 
```

原因 ：

```
$(window).unload(function () {
   ts = null;
}); 
```

我改变了方法，避免调用“ts = null”，但是还有另一个解决方法吗？做出这种改变还有其他影响吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:14:30.247

修复：

[http://core.trac.wordpress.org/ticket/19189](http://core.trac.wordpress.org/ticket/19189)

您必须修补您的thickbox.js 文件：

[http://core.trac.wordpress.org/attachment/ticket/19189/19189-2.patch](http://core.trac.wordpress.org/attachment/ticket/19189/19189-2.patch)

# c# - 如何在知道 hash.value 的哈希表中删除一对

> ID：10016977
> 
> 赞同：0
> 
> 时间：2012-04-04T18:15:31.817
> 
> 标签：c#

我确信我的哈希表中没有重复的值和键。这是我的代码：

```
 private void checkclientleave(string content)
    {
        if (content == "I am leaving the room")
        {
            foreach (DictionaryEntry dict in clientsInroom)
            {
                 if (dict.Value == clientSocket)
                    clientsList.Remove(dict.Key);
            }
   }
   } 
```

我的哈希表的值是每个客户端的套接字。我的哈希表的键是每个客户端的名称。我收到一些未知错误：集合已修改枚举操作可能无法执行任何人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:21:05.293

> 我收到一些未知错误：集合已修改枚举操作可能无法执行任何人有任何想法？

这不是一个未知错误 - 这是一个[有据可查的错误](http://msdn.microsoft.com/en-us/library/9c6ftx8b.aspx)：

> 只要集合保持不变，枚举数就保持有效。如果对集合进行了更改，例如添加、修改或删除元素，则枚举器将不可恢复地失效，并且其行为未定义。

对于[`MoveNext`](http://msdn.microsoft.com/en-us/library/ab0k6d6s.aspx)：

> `InvalidOperationException`[throw if] 在创建枚举器后修改了集合。

您正在迭代字典，并且在迭代时无法添加或删除条目。如果您知道您不会有任何其他值，则可以在找到与给定值匹配的键后立即从您的方法中返回：

```
if (dict.Value == clientSocket)
{
    clientsList.Remove(dict.Key);
    return;
} 
```

另一种选择是使用 LINQ：

```
var key = clientsInRoom.Where(pair => pair.Value == clientSocket)
                       .Select(pair => pair.Key)
                       .FirstOrDefault();
if (key != null)
{
    clientsInRoom.Remove(key);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:23:41.563

对我来说它看起来不对 - 我认为

```
 clientsList.Remove(dict.Key); 
```

实际上应该是

```
 clientsInRoom.Remove(dict.Key); 
```

如果是这种情况，您正在修改`foreach`同一字典中的字典，这将导致异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:48:30.193

在迭代期间删除项目是可能的。你只需要以不同的方式处理它。您将需要使用“for”循环并向后迭代。

我知道，在您的具体情况下，这可能不是必需的，但我认为它可能会帮助后来发现这个问题的其他人。

向她寻求更详细的答案： [如何在迭代时从通用列表中删除元素？](https://stackoverflow.com/questions/1582285/how-to-remove-elements-from-a-generic-list-while-iterating-over-it)

# asp.net - IIS 中的 Excel 问题

> ID：10016980
> 
> 赞同：0
> 
> 时间：2012-04-04T18:15:39.073
> 
> 标签：asp.net, excel, iis, powerpoint

我用图表创建了 excel 文件，它在我的本地机器上使用 VS 内置 iis 工作。但是当我将它部署在托管服务器上时它不起作用。我的环境是：-Win2K8 -IIS 7.0 -MS Office 专业 -PIA (2010 试过)

第一次，我收到错误：

*由于以下错误，检索具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80080005 服务器执行失败（来自 HRESULT 的异常：0x80080005 (CO_E_SERVER_EXEC_FAILURE)）*

经过像 Dconfig 这样的配置允许访问网络服务并创建了对所有人具有完全写入权限的桌面文件夹，但我没有成功。即使现在我没有收到任何错误，但文件没有打开（Excel 和 PPT）。我检查了我们的自定义应用程序日志和系统日志。

请指导我为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:23:49.440

使用 Office Open XML 而不是自动化创建文件。有几个库可以帮助您构建 Excel 文件。我个人使用[EPPlus](http://epplus.codeplex.com/)并认为它相当不错。

# java - 是否有用于 Java 开发的带有智能感知的简单 IDE？

> ID：10016981
> 
> 赞同：3
> 
> 时间：2012-04-04T18:15:39.157
> 
> 标签：java, ide

首先，我想发泄我对 Eclipse 的失望，虽然它是一个非常好的 IDE，但如果不先将它与项目关联起来，它就无法运行一个简单的 Java Hello World 程序（或者我错了吗？）。在这方面，我喜欢 JCreator LE，它允许您非常快速地编写 Java 代码，而不必担心创建项目和所有用于小规模工作的不必要的东西。

同时，我怀念 Eclipse 的一些智能感知功能。所以我的问题是，是否有一个具有智能感知功能的 IDE，并且不需要我将 Java 源文件与项目关联即可运行它。我希望你们能帮助我，因为为简单的 Java 程序创建项目真的很令人沮丧。谢谢。

在您投反对票之前 - 请注意我在programmers.stackexchange.com上阅读了以下内容“编程工具（而不是在Stack Overflow上询问）”请参阅 - [https://softwareengineering.stackexchange.com/faq](https://softwareengineering.stackexchange.com/faq)

# cakephp - CakePHP - JsHelper::event 返回 null

> ID：10016983
> 
> 赞同：0
> 
> 时间：2012-04-04T18:16:02.003
> 
> 标签：cakephp, cakephp-2.0

我正在尝试在我的应用程序上使用 JsHelper::event 方法，使用与 CookBook 相同的代码：

```
$this->Js->get('#element');
$ev = $this->Js->event('click', $this->Js->alert('hey you!')); 
```

我尝试运行`debug($ev)`，但它返回`null`。在控制器中，我添加了这样的助手：

```
var $helpers = array('Js' => array('Jquery')); 
```

如何让 JsHelper::event 正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:31:17.227

默认情况下，JsHelper 缓冲这些调用，因此`null`返回。如果需要，您可以通过`'buffer' => false`在选项中设置来内联返回它。

有关更多信息，请参阅本书：http: [//book.cakephp.org/2.0/en/core-libraries/helpers/js.html#javascript-engine-usage](http://book.cakephp.org/2.0/en/core-libraries/helpers/js.html#javascript-engine-usage)

# javascript - 为什么 HTMLDivElement.constructor.prototype == HTMLDivElement ？它应该是原型对象

> ID：10016991
> 
> 赞同：0
> 
> 时间：2012-04-04T18:16:44.423
> 
> 标签：javascript, dom

ECMASCRIPT 将原型对象定义为构造函数的原型属性。

以下是从 ECMA-262 复制的：

**4.3.4 创建和初始化对象的构造函数对象 注意构造函数的“原型”属性的值是一个原型对象，用于实现继承和共享属性。**

为什么 HTMLDivElement.constructor.prototype == HTMLDivElement ？

如果 a 是 HTMLDivElement 对象，Object.getPrototypeOf(a) 返回 HTMLElement，而它应该返回 constructor.prototype，即 HTMLDivElement。

这与 ECMA 标准完全矛盾。

请帮助我理解这个概念......提前致谢。

![在此处输入图像描述](../Images/f28cae504fb5cb4241c5ee31a04282b2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T18:22:01.033

Chrome 控制台向我显示：

> HTMLDivElement.constructor.prototype == HTMLDivElement

错误的

它在控制台中显示的事实`HTMLDivElement`并不意味着它是一个`HTMLDivElement`.

还：`HTMLDivElement.constructor.prototype == HTMLElement.constructor.prototype`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:27:11.220

`HTMLDivElement`由 w3c 定义为接口（参见[http://www.w3.org/TR/html5/the-div-element.html#htmldivelement](http://www.w3.org/TR/html5/the-div-element.html#htmldivelement)），因此其实现取决于浏览器的供应商并有所不同。

在 Chrome 中不是正确的构造函数（只是尝试执行`new HTMLDivElement`），在 Firefox 中它根本不是构造函数（它是一个对象）。

# facebook - 免费托管的 Facebook 应用程序的安全 Canvas URL

> ID：10016992
> 
> 赞同：1
> 
> 时间：2012-04-04T18:16:44.937
> 
> 标签：facebook

我对在 Facebook 平台上构建应用程序非常陌生。我没有托管空间，也没有域名，所以我现在使用免费的托管/域名，我需要为学校项目创建一个 Facebook 应用程序。但是，我必须填写这个 Secure Canvas URL 字段。免费托管服务是否应该具有 SSL 证书（或其他证书）才能加载我的应用程序？我正在使用 000webhost.com 吗？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T12:51:54.997

是的，从 2011 年 11 月 1 日起，Facebook 应用程序应该为其应用程序提供安全连接在这里你可能会找到一些答案[我没有安全的画布 URL（我负担不起 https 连接）](http://facebook.stackoverflow.com/q/11177540/1375001)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:30:07.427

Forward 非常适合测试/开发 Facebook 应用程序。它有一个免费试用版：

[https://forwardhq.com/in-use/facebook](https://forwardhq.com/in-use/facebook)

# php - 如何在 PHP 中使用“foreach”停止多个值的回显？

> ID：10016994
> 
> 赞同：-4
> 
> 时间：2012-04-04T18:16:52.500
> 
> 标签：php, wordpress, foreach, echo, custom-fields

在 Wordpress 中使用自定义字段时，您如何使用 foreach 仅回显第一个值？

目前的代码是：

```
 <?php for(get_field('venue_event') as $post_object): ?>
        <a href="<?php echo get_permalink($post_object); ?>"><?php echo get_the_title($post_object) ?></a>
    <?php endforeach; ?> 
```

这会从 wordpress 页面获取字段（该字段是指向另一个页面的链接），使用 get_permalink 创建指向该页面的链接，但是当我想回显页面标题时，它会执行此操作，但它也会回显所有其他值没有必要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:18:43.150

如果您只想执行循环的第一次迭代，请尝试以下操作：

```
<?php foreach(get_field('venue_event') as $post_object): ?>
    <a href="<?php echo get_permalink($post_object); ?>"><?php echo get_the_title($post_object) ?></a>
<?php break; ?>
<?php endforeach; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:19:22.783

你可以添加

```
$counter = 0;
<?php for(get_field('venue_event') as $post_object): ?>
    $counter++;
    if($counter == 1)
     {
    <a href="<?php echo get_permalink($post_object); ?>"><?php echo get_the_title($post_object) ?></a>
     }

<?php endforeach; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:21:13.747

使用返回数组的第一个元素不是更容易吗？也许 Wordpress 提供了仅返回页面标题的其他过滤器。