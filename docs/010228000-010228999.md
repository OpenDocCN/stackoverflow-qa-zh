# StackOverflow 问答 10228000-10228999

# javascript - Javascript一次请求多个JS文件

> ID：10228003
> 
> 赞同：0
> 
> 时间：2012-04-19T12:23:54.877
> 
> 标签：javascript, performance, httprequest, minify

我正在考虑创建可以执行以下操作的脚本：

1.  从服务器上使用的 JS 目录中获取所有 javascript
2.  将所有脚本合并为一个 - 这将只发出一个请求而不是多个
3.  缩小组合脚本
4.  缓存文件

假设需要加载文件的顺序写在某个配置文件中。

现在，当我加载 myexamplepage.com 时，我实际上使用了 jQuery、backbone、mootools、prototype 和其他一些库，但是我没有向服务器询问这些多个文件，而是调用 myexamplepage.com/js/getjs，我得到的是组合和缩小的 JS文件。这样我就消除了对服务器的那些额外请求。当我在网上阅读有关加速您的网站的信息时，我发现您向服务器发出的请求越多，您的网络就会变得越慢。

由于我对编程世界很陌生，我知道我想到的很多东西已经存在，我不认为这也是例外。

因此，请列出您所知道的与我所描述的完全或相似的内容。（请注意，每次您希望更改脚本时，您都不需要使用任何类型的缩小器或第三方软件，保持原始文件结构，你只使用类助手）

PS 我认为同样的方法也可以用于 CSS 文件。

我正在使用 PHP 和 Apache。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:26:43.697

我建议不要让服务器即时执行此操作：只需连接脚本并通过非破坏性压缩器运行它们，例如“简单”模式下[`jsmin`](http://www.crockford.com/javascript/jsmin.html)的[Google Closure Compiler](https://developers.google.com/closure/compiler/)。

这也使您有机会在该文件上放置一个版本号，并使其具有较长的缓存寿命，这样用户就不必在每次访问该页面时都重新下载它。例如：假设您的页面内容更改得足够频繁，以至于您将页面上的缓存标头设置为每天都过期。自然，您的*JavaScript*不会每天都在变化。因此，您`page.html`可以包含一个名为的文件，该文件`all-my-js-v4.js`具有较长的缓存寿命（例如一年）。如果您更新 JavaScript，请创建一个名为`all-my-js-v5.js`并更新的新的一体化文件，`page.html`以包含该文件。下次用户看到`page.html`时，他们会请求更新的文件；但在那之前，他们可以使用他们的缓存副本。

如果您真的想即时执行此操作，如果您使用的是 apache，则可以使用[`mod_pagespeed`](https://developers.google.com/speed/pagespeed/mod).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:29:07.120

如果您使用的是 .NET，我可以推荐[Combres](http://combres.codeplex.com/)。它对 JavaScript 和 CSS 文件进行组合和缩小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-05T02:34:00.330

我知道这是一个老问题，但您可能对这个项目感兴趣：[https ://github.com/OpenNTF/JavascriptAggregator](https://github.com/OpenNTF/JavascriptAggregator)

假设您在 javascript 中使用 AMD 模块，该项目将根据需要创建高度可缓存的层。它还具有您可能感兴趣的其他功能。

# objective-c - One Button with Two Different Touch Events

> ID：10228007
> 
> 赞同：0
> 
> 时间：2012-04-19T12:24:11.123
> 
> 标签：objective-c, ios, ios5

I have been trying to implement a button with two different touch events. Let's say when user taps the button (touches for short time), it triggers actionTapped and when user touches down the button for a long time it triggers actionTouched.

[This link](https://stackoverflow.com/questions/3284792/uibutton-touch-and-hold) may give an idea but it makes action repeat itself over and over again.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T22:19:49.787

iOS SDK 包括两个非常适合您需求的手势识别器：

*   UITapGestureRecognizer
*   UILongPressGestureRecognizer

创建您的按钮而不附加任何操作。然后创建两个手势识别器，每种类型一个，每个都映射到您想要的操作。然后将手势识别器附加到按钮上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:32:06.837

您需要在 touchDown 事件上设置一个计时器，该计时器将执行您的 longPress 功能。在 touchUp 事件中，您可以取消计时器。真的比较简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:37:13.397

我将执行以下操作：

1.  在您的着陆方法中：存储当前时间（让我们调用它`touchDownTime`）。
2.  在你的修饰方法中：计算`time elapsed = current time - touchDownTime`

    2.1 转换为秒

    2.2 如果经过时间 > 所需时间，请执行 action1（长按），否则执行 action2（短按）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T14:54:25.947

好的，这是我的解决方案。scheduleTimerWithTimeInterval 是使其接触的最小间隔：

```
- (IBAction) micButtonTouchedDownAction {
    self.micButtonTimer = [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(micButtonAction:) userInfo:nil repeats:YES];
    self.micButtonReleased = FALSE;
}

- (IBAction) micButtonTouchedUpInsideAction {
    self.micButtonReleased = TRUE;
}

- (IBAction) micButtonTouchedUpOutsideAction {
    self.micButtonReleased = TRUE;
}

- (void) micButtonAction:(NSTimer *)timer {
    [self.micButtonTimer invalidate];
    self.micButtonTimer = nil;

    if(self.micButtonReleased) {
        NSLog(@"Tapped");
    }
    else {
        NSLog(@"Touched");
    }
} 
```

# c - Invalid sizeof() struct, gap between members

> ID：10228010
> 
> 赞同：0
> 
> 时间：2012-04-19T12:24:31.540
> 
> 标签：c, struct, sizeof

I have a struct like this:

```
typedef struct _HEADER_IO
    {
        uint8_t field1 : 2;
        uint8_t field2 : 4;
        uint8_t field3 : 1;
        uint8_t field4 : 1;
        uint16_t field5;
        uint8_t field6;
    } HEADER_IO; 
```

It's basicly a message header that will be sent over tcp. The server reads this so that it knows what data follows in the buffer. However for some reason intead of the size being 4 bytes (2+4+1+1 first byte + 2 bytes from field 5 + 1 byte field 6) the size is 6 bytes.

Looking it up in memory view it is:

```
XX AA XX XX XX AA 
```

Instead of:

```
XX XX XX XX 
```

Where AA are never set no matter what I do. This is a problem because I am planning for the header to be `send()` to a server and the extra bytes are included making the server interpret the header wrong. What am I doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:18:40.943

一般来说，将位域用于此类事情是个坏主意。由于您无法事先确切知道这些位最终会出现在哪个字节中，并且存在填充和对齐问题。

在我看来，最好“承认”这样一个事实，即您需要对外部表示进行更多控制，而不是 C 结构给您的控制，然后手动进行。您当然可以将结构保留为内存（内部）表示。

基本上，您会编写如下函数：

```
size_t header_serialize(unsigned char *buf, size_t max, const HEADER_IO *header); 
```

它的工作是在 的内存中`buf`构建代表 的正确字节序列`header`。

为了澄清（基于评论），目的是从 中读取字段`header`，而不仅仅是例如

```
memcpy(buf, header, sizeof *header);  /* DON'T DO THIS! */ 
```

相反，您应该从`header`. 这样，无论编译器对`header`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:01:09.710

在标准 C 中，您无法避免结构成员可以在它们之间插入填充的事实。在处理之前，您必须编写一个函数来解码数据并将其存储在您的结构中。这是因为在某些架构上，未对齐的内存访问（从未对齐的指针读取，例如，4 个字节）非常昂贵，C 会自动填充您的结构以避免成本。没有打开或关闭该功能的标准方法。

例如，在 GCC 中，您可以`__attribute__((packed))`在 struct 定义之后添加，Visual Studio 有一些GCC 也支持的`#pragma`命令（参见[http://gcc.gnu.org/onlinedocs/gcc/Structure_002dPacking-Pragmas.html](http://gcc.gnu.org/onlinedocs/gcc/Structure_002dPacking-Pragmas.html)），但要注意总体而言这是非标准的。

由于您的评论提到它是一个 Windows 程序，因此如果您在 struct 定义之前添加它可能会起作用：

```
#pragma pack(push,1) 
```

而这之后：

```
#pragma pack(pop) 
```

虽然编写代码以更手动地解码标头会更便携，但上述方法应该更快。

# postgresql - Postgresql 查找和计算唯一元组

> ID：10228017
> 
> 赞同：0
> 
> 时间：2012-04-19T12:24:53.347
> 
> 标签：postgresql

我有一个问题，我必须在表中找到唯一的元组，而在另一个表中从未见过它们。然后我必须计算这些元组并显示出现超过 10 次的元组。也就是说，有些工作不需要工作人员，我要找到从未需要工作人员并且已经运行超过10次的工作。

```
create table JobStaff (
    Job         integer references Job(id),
    staff       integer references Staff(id),
    role        integer references JobRole(id),
    primary key (job,staff,role)
);

create table Job (
    id          integer, 
    branch      integer not null references Branches(id),
    term        integer not null references Terms(id),
    primary key (id)
); 
```

基本上我的代码存在于：

```
CREATE OR REPLACE VIEW example AS
SELECT * FROM Job
WHERE id NOT IN (SELECT DISTINCT jobid FROM JobStaff);

create or replace view exampleTwo as
select branch, count(*) as ct from example group by 1;

create or replace view sixThree as
select branch, ct from exampleTwo where ct > 30; 
```

这似乎返回两个额外的行，然后是预期的结果。我问了我的讲师，他说这是因为我计算了有时

编辑：这意味着，对于所有可用的工作条款，没有分配给它的工作人员

EDIT2：预期输出和我得到的：

我得到了什么：

```
 branch  | cou
---------+-----
    7973 |  34
    7978 |  31
    8386 |  33
    8387 |  32
    8446 |  32
    8447 |  32
    8448 |  31
   61397 |  31
   62438 |  32
   63689 |  31 
```

预期的：

```
 branch  | cou
---------+-----
    7973 |  34
    8387 |  32
    8446 |  32
    8447 |  32
    8448 |  31
   61397 |  31
   62438 |  32
   63689 |  31 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:39:54.837

您必须了解 SQL 的工作方式是在您设计查询之前必须知道您想要什么。

在您的问题中，您写道您正在寻找`jobs`不在其中的内容，`jobstuff`但现在我们在这里有了答案，很明显您正在寻找`branches`不在的内容`jobstuff`。我给你的建议是：在尝试实现它之前，花点时间（用你的语言，或者用英语，但不要用 SQL）准确地说出你想要的东西。当您更有经验时，这并不总是必要的，但对于初学者来说，这是学习 SQL 的最佳方式。

解决方案：

这里的事情是您不需要视图来级联查询，您只需从`inner queries`. `count`也可以通过`having`子句根据计算值（如 ）过滤元素。

`count(DISTINCT ...)`导致重复条目只计算一次，因此如果一个作业在一个术语中出现两次，它现在只计算一次。

下面的查询选择所有`branches`曾经得到 a 的内容`jobstaff`，然后查找`jobs`不在此列表中的内容。

据我了解您的问题，这应该可以帮助您：

```
SELECT branch, count(DISTINCT term_id) as cou
FROM jobs j
WHERE j.branch NOT IN (SELECT branch FROM job WHERE job.id IN (select jobid FROM jobstaff))
GROUP BY branch
HAVING count(DISTINCT term_id) > 10 
```

# actionscript-3 - as3 removeChild - 我不能针对特定的孩子

> ID：10228021
> 
> 赞同：0
> 
> 时间：2012-04-19T12:25:07.607
> 
> 标签：actionscript-3, flash

我仍在尝试了解 AS3，但无法弄清楚如何针对我的项目中的某些特定儿童并删除它们......我确信在“基本 AS3”的第 1 页上有一个简单的解决方案“在某处预订，但我无法解决！

我正在尝试删除 addNewPoint 函数中创建的红线（或者只是给它们一个 0 的 alpha）作为 fillDriveway 函数的一部分。

如果你需要，我可以给你一个源文件的链接。

提前非常感谢！

这是我可怕的代码：

```
 import flash.display.*

pic.addEventListener(MouseEvent.CLICK,addNewPoint);

var n:Number = 0;

function addNewPoint(e:MouseEvent):void {
    n++;
    pointNo.text = String(n);
    var nextPoint:MovieClip = new newPoint();
    addChild(nextPoint);
    nextPoint.name = "mc"+pointNo.text;
    nextPoint.x = e.target.mouseX;
    nextPoint.y = e.target.mouseY;

    var joinPoints:MovieClip = new MovieClip();
    this.addChild(joinPoints);
    joinPoints.graphics.lineStyle(0.5,0xFF0000);
    joinPoints.graphics.moveTo(this.getChildByName("mc1").x, this.getChildByName("mc1").y);
    for(var i:int=2; i<=n; ++i){
        joinPoints.graphics.lineTo(this.getChildByName("mc"+i).x, this.getChildByName("mc"+i).y);
    }
}

pic.addEventListener(MouseEvent.CLICK, addNewPoint);

function fillDriveway(eventObject:MouseEvent) {
    var joinPoints:MovieClip = new MovieClip();
    this.addChild(joinPoints);
    joinPoints.graphics.beginFill(0xFFFFFF, 0.7);
    joinPoints.graphics.moveTo(this.getChildByName("mc1").x, this.getChildByName("mc1").y);
    for(var m:int=2; m<=n; ++m){
        joinPoints.graphics.lineTo(this.getChildByName("mc"+m).x, this.getChildByName("mc"+m).y);
    }
    joinPoints.name = "driveshape";
    filledDrive.text = "filled";
}

function undoit(eventObject:MouseEvent) {
    if(n > 0) {
        if(filledDrive.text.indexOf("filled") != -1) {
            this.removeChild(this.getChildAt(this.numChildren -1));
            filledDrive.text = "";
            }else{
            this.removeChild(this.getChildAt(this.numChildren -1));
            this.removeChild(this.getChildAt(this.numChildren -1));
            n--;
            pointNo.text = String(n);
        }
    }
}

undo.addEventListener(MouseEvent.CLICK, undoit);

function maskDrive(eventObject:MouseEvent) {
    if(filledDrive.text.indexOf("filled") != -1) {
        var finishA:MovieClip = new finishMC();
        this.addChild(finishA);
        finishA.x = 310;
        finishA.y = 100;
        finishA.mask = getChildByName("driveshape");
        finishA.gotoAndPlay(2);
    }
}

//BTN Actions
function btn1over(myEvent:MouseEvent) {
    btn1.gotoAndPlay(2);
}
function btn1out(myEvent:MouseEvent) {
    btn1.gotoAndPlay(11);
}
function btn2over(myEvent:MouseEvent) {
    btn2.gotoAndPlay(2);
}
function btn2out(myEvent:MouseEvent) {
    btn2.gotoAndPlay(11);
}
function btn3over(myEvent:MouseEvent) {
    btn3.gotoAndPlay(2);
}
function btn3out(myEvent:MouseEvent) {
    btn3.gotoAndPlay(11);
}

//BTN Calls
btn1.addEventListener(MouseEvent.CLICK, fillDriveway);
btn1.addEventListener(MouseEvent.ROLL_OVER, btn1over);
btn1.addEventListener(MouseEvent.ROLL_OUT, btn1out);
btn1.buttonMode = true;
btn1.useHandCursor = true;
btn2.addEventListener(MouseEvent.CLICK, maskDrive);
btn2.addEventListener(MouseEvent.ROLL_OVER, btn2over);
btn2.addEventListener(MouseEvent.ROLL_OUT, btn2out);
btn2.buttonMode = true;
btn2.useHandCursor = true;
btn3.buttonMode = true;
btn3.useHandCursor = true;
btn3.addEventListener(MouseEvent.ROLL_OVER, btn3over);
btn3.addEventListener(MouseEvent.ROLL_OUT, btn3out); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:54:47.870

我认为您的问题是，每次创建新的 joinPoints 时，您都会覆盖指向前一个 joinPoints 实例的指针，因此您无法访问它。（这会造成内存泄漏）。

每次创建 joinPoints 对象时，将其添加到数组中：

```
joinPointsArray.push(joinPoints); 
```

然后您的 fillDriveway 函数可以访问您创建的所有 joinPoints：

```
for (var i:int = 0; i < joinPointsArray.length, i++) {
joinPointsArray[i].alpha = 0;
} 
```

# bash - 如何逐列按字母顺序排列CSV文件中的所有行？

> ID：10228024
> 
> 赞同：1
> 
> 时间：2012-04-19T12:25:15.023
> 
> 标签：bash, sorting, awk

我有一个三列 CSV 文件，如下所示：

```
chips@food@f
pizza@food@f
tiger@animal@a
fish@animal@a
marshmallow@food@f
New Years@festivals@f 
```

我需要按字母顺序排列行，首先按第 3 列，然后按第 2 列，然后按第 1 列。输出将是：

```
fish@animal@a
tiger@animal@a
New Years@festivals@f
chips@food@f
marshmallow@food@f
pizza@food@f 
```

如何以这种方式对数据进行排序？

*   某些列包含 UTF-8 数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T12:29:21.613

你可以试试`sort`命令：

```
$ sort -t@ -k3,3 -k2,2 -k1,1 input.csv
fish@animal@a
tiger@animal@a
New Years@festivals@f
chips@food@f
marshmallow@food@f
pizza@food@f 
```

# asp.net-mvc-3 - Telerik MVC - Numeric textbox in grid editor

> ID：10228026
> 
> 赞同：1
> 
> 时间：2012-04-19T12:25:18.187
> 
> 标签：asp.net-mvc-3, telerik-grid, telerik-mvc

In my editor for insert telerik show only common textbox (not integer,decimal etc).

this is my view:

```
@(Html.Telerik().Grid <GamePlayer2>(Model).Name("za11").DataKeys(keys => keys.Add(c => c.Id))
.ToolBar(commands => commands.Insert()
.ButtonType(GridButtonType.ImageAndText))
.DataBinding(dataBinding => dataBinding.Server()
        .Insert("PlayerAdd", "Player", new { })
        .Update("PlayerUpdate", "Player", new { })
        .Delete("PlayerDelete", "Player", new { })
)
.Columns(columns =>
             {
                 columns.Bound(b => b.Name);
                 columns.Bound(b => b.Price);

                 columns.Command(commands =>
                 {                    
                     commands.Edit();
                     commands.Delete();
                 }).Width(200);

             })
.Editable(editing => editing.Mode(GridEditMode.PopUp))) 
```

model:

```
public class GamePlayer2
{
    public int Id { get; set; }
    public string Name { get; set; }
    [DataType(DataType.Currency)]
    public decimal Price{ get; set; }
} 
```

Scripts are registered on _Layout. Where is a problem? Why currency(integer,date etc) textbox won't display for fields?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:54:03.753

确保您已在**Shared/EditorTemplates**文件夹下添加 EditorTemplates 。基本上，如果您使用向导创建项目，它们会自动添加。如果没有创建一个演示项目并从那里复制粘贴它们。

# jsf-2 - 将选择中的空格转换为 nbsp；

> ID：10228030
> 
> 赞同：1
> 
> 时间：2012-04-19T12:25:38.183
> 
> 标签：jsf-2, tags

我有一个选择：

```
<h:selectOneMenu id="treeNode" label="#{msgs.treeNode}" value="#{treeNode}">
  <f:selectItems value="#{treeItems}" />
</h:selectOneMenu> 
```

它使用这些 selectItems：

```
List<SelectItem> treeItems = new ArrayList<SelectItem>();
treeItems.add(new SelectItem("1", "Parent"));
treeItems.add(new SelectItem("2", "  Child 0 0"));
treeItems.add(new SelectItem("2", "    Child 0 0 0"));
treeItems.add(new SelectItem("2", "    Child 0 0 1"));
treeItems.add(new SelectItem("2", "  Child 0 1")); 
```

我的问题是选择中的输出应该看起来像一棵树，但是由于空白已经消失，我有一个“平面”视图。

有没有办法可以将空白转换为不可破坏的空间？

谢谢强尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:01:16.307

只需自己替换它们`&nbsp;`并将`escape`属性设置为`false`. 这是`SelectItem`构造函数的第 5 个参数。

```
List<SelectItem> treeItems = new ArrayList<SelectItem>();
treeItems.add(new SelectItem("1", "Parent", null, false, false));
treeItems.add(new SelectItem("2", "&nbsp;&nbsp;Child 0 0", null, false, false));
treeItems.add(new SelectItem("3", "&nbsp;&nbsp;&nbsp;&nbsp;Child 0 0 0", null, false, false));
treeItems.add(new SelectItem("4", "&nbsp;&nbsp;&nbsp;&nbsp;Child 0 0 1", null, false, false));
treeItems.add(new SelectItem("5", "&nbsp;&nbsp;Child 0 1", null, false, false)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:30:00.417

在添加最后一个 treeItem 之后，您能否放置一个 foreach 迭代每个 SelectItem 并将每个空字符串“”替换为“ `&nbsp;`”？

# asp.net - Ajaxtoolkit 的可访问性问题

> ID：10228031
> 
> 赞同：0
> 
> 时间：2012-04-19T12:25:40.750
> 
> 标签：asp.net, security, visual-studio-2008, section508

我正在为现有应用程序进行第 508 节合规性工作。

现在，当我使用[http://achecker.ca/checker/index.php](http://achecker.ca/checker/index.php)测试我的页面的第 508 节时，它显示“脚本必须有一个 noscript 节”。用于 Ajax 生成的脚本。

如何让 Ajax 工具包在客户端生成脚本后附加 noscript 标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T22:03:55.003

`noscript`标签用于显示脚本的替代方案，例如当用户禁用它时。因此，如果您有：

```
<script type="text/javascript">
<!--
var currentTime = new Date()
var month = currentTime.getMonth() + 1
var day = currentTime.getDate()
var year = currentTime.getFullYear()
document.write(month + "/" + day + "/" + year)
//-->
</script> 
```

该检查器正在查看您是否`<noscript>`在代码块之后或整个页面上拥有权利。对于较大的 AJAX 驱动的应用程序，`<noscript>`出现在关闭之前`<body>`。确保您对您所说/所说的内容做出良好的判断。我见过开发人员这样做：

```
<script type="text/javascript">
<!--
var currentTime = new Date()
var month = currentTime.getMonth() + 1
var day = currentTime.getDate()
var year = currentTime.getFullYear()
document.write(month + "/" + day + "/" + year)
//-->
</script>
<noscript>
<p>Wow, you suck because you disabled javascript.</p>
</noscript> 
```

请比这更成熟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:12:20.797

在 Global.asax 我添加了下面的事件，它就像一个魅力

void Application_PostReleaseRequestState（对象发送者，EventArgs e）

```
{
    //add no script tag for 508 compatibility               
    if(Response.ContentType == "text/html")
    {
       //add no script tag for 508 compatibility
        Response.Filter = new NoScriptTagAppendFilter(Response.Filter);
    }        
} 
```

公共 NoScriptTagAppendFilter（流流）

```
{
    outputStream = stream;
}

public override void Write(byte[] buffer, int offset, int count)
{
    //base.Write(buffer, offset, count);
    string data = UTF8Encoding.UTF8.GetString(buffer);
    data = Regex.Replace(data, "</script>", "</script><noscript></noscript>");
    outputStream.Write(UTF8Encoding.UTF8.GetBytes(data), offset, UTF8Encoding.UTF8.GetByteCount(data));
    data = null;
} 
```

这肯定会帮助将来想要对 Ajax 生成的脚本进行 508 兼容性并使用[http://achecker.ca/checker/index.php进行测试的人](http://achecker.ca/checker/index.php)

# ios - IOS 编码正文邮件（为 SES 创建我自己的 mime 邮件）

> ID：10228039
> 
> 赞同：3
> 
> 时间：2012-04-19T12:26:06.770
> 
> 标签：ios, email, encoding, amazon-web-services

我正在开发一个应用程序，我在没有 IOS 邮件 API 的情况下发送邮件（邮件是具有 SES 亚马逊服务的发件人，无需用户交互和附加文件......）。在我的 API 中，我必须使用所有 MIME 协议发送编码邮件（这不是问题）。我用 charset ascii 和我在 base64 中附加的 pdf 发送很好的邮件编码正文：

```
 CFUUIDRef    uuidRef   = CFUUIDCreate(kCFAllocatorDefault);
NSString    *uuid     = (__bridge_transfer  NSString *)CFUUIDCreateString(kCFAllocatorDefault, uuidRef);
CFRelease(uuidRef);

//Encapsulation
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSMutableString *rawMime = [[NSMutableString alloc] init];
[rawMime appendFormat:@"To: %@\n", _to];
[rawMime appendFormat:@"From: \"%@\" <boutique@tactill.com>\n", [defaults objectForKey:@"companyName"]];
[rawMime appendFormat:@"Reply-To: %@\n", [defaults objectForKey:@"toEmailForStats"]];
[rawMime appendFormat:@"BCC: %@\n", [defaults objectForKey:@"toEmailForStats"]];
[rawMime appendFormat:@"Subject: %@\n", _subject];
[rawMime appendString:@"Date: Thu, 05 Jan 95 10:53:24 -0500\n"];
[rawMime appendFormat:@"Message-ID: <%@@%@>\n", [(NSString *)uuid stringByReplacingOccurrencesOfString:@"-" withString:@""], @"IETF.CNR I.Reston.VA.US"];
[rawMime appendString:@"Mime-Version: 1.0\n"];
[rawMime appendString:@"Content-type: Multipart/Mixed; boundary=\"NextPart\"\n"];
[rawMime appendString:@"\n"];
[rawMime appendString:@"--NextPart\n"];

//Body
[rawMime appendString:@"Content-type: text/plain; charset=\"us-ascii\"\n"];
[rawMime appendString:@"\n"];
[rawMime appendString:_body];
[rawMime appendString:@"\n"];
[rawMime appendString:@"--NextPart\n"];

//Attach pdf
[rawMime appendString:@"Content-Type: application/pdf; "];
[rawMime appendFormat:@"name=\"%@.pdf\";\n", _pdfName];
[rawMime appendFormat:@"Content-Transfer-Encoding: base64\r\n\r\n"];
[rawMime appendFormat:@"%@\n",_pdfAttached];
[rawMime appendString:@"\n"];

//If necessary attach csv
if (_csvAttached!=nil) {
    [rawMime appendString:@"--NextPart\n"];
    [rawMime appendString:@"Content-Type: text/plain; "];
    [rawMime appendFormat:@"name=\"%@.txt\";\n", _csvName];
    [rawMime appendFormat:@"Content-Transfer-Encoding: base64\r\n\r\n"];
    [rawMime appendFormat:@"%@\n",_csvAttached];
    [rawMime appendString:@"\n"];
    [rawMime appendString:@"--NextPart\n"];
}

NSData        *rawMessageData = [rawMime dataUsingEncoding:NSUTF8StringEncoding]; 
```

当我用 gmail 或邮件应用程序（OSX 或 IOS）打开邮件时，一切都很完美，但是当我用 Windows 邮件打开它时，特殊字符被更改为垃圾邮件。我已经阅读过它，并且我看到 Windows 邮件读取 iso-8859-1(NSISOLatin1StringEncoding)。所以我在那个帖子的帮助下试过：[http://stackoverflow.com/questions/4553388/how-to-convert-utf8-encoding-to-iso-8859-1-encoding][1] 做那个代码：

```
 //add body
char converted[([_body length] + 1)];
[_body getCString:converted maxLength:([_body length] + 1) encoding: NSISOLatin1StringEncoding];   
[rawMime appendString:@"Content-type: text/plain; charset=iso-8859-1\n"];
[rawMime appendFormat:@"Content-Transfer-Encoding: quoted-printable\r\n\r\n"];
[rawMime appendFormat:@"%s", converted];
[rawMime appendString:@"\n"];
[rawMime appendString:@"--NextPart\n"]; 
```

现在所有的邮件客户端都向我展示了这个：Merci pour votre achat。Â¿ bientâ™t！和 NSLog 一样，当我只打印正文时我做错了什么？我怎样才能很好地编码邮件的正文？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T08:19:09.517

这是一个回答这个问题的工作代码，它添加了一个pdf，偶尔也添加了一个csv

```
-(NSData*)formatedMail{

    CFUUIDRef   uuidRef   = CFUUIDCreate(kCFAllocatorDefault);
    NSString    *uuid     = (__bridge_transfer  NSString *)CFUUIDCreateString(kCFAllocatorDefault, uuidRef);
    CFRelease(uuidRef);

    NSDate* today = [[NSDate alloc] init];
    NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ssZ"];

    NSString* date =[dateFormatter stringFromDate:today];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSMutableString *rawMime = [[NSMutableString alloc] init];
    [rawMime appendFormat:@"To: %@\n", email_to];
    [rawMime appendFormat:@"From: \"name_from" <e-mail_from>\n", [defaults objectForKey:@"companyName"]];
    [rawMime appendFormat:@"Reply-To: %@\n", [defaults objectForKey:@"toEmailForStats"]];
    [rawMime appendFormat:@"BCC: %@\n", [defaults objectForKey:@"toEmailForStats"]];
    [rawMime appendFormat:@"Subject: %@\n", _subject];
    [rawMime appendFormat:@"Date: %@\n", date];
    [rawMime appendFormat:@"Message-ID: <%@@%@>\n", [(NSString *)uuid stringByReplacingOccurrencesOfString:@"-" withString:@""], @"IETF.CNR I.Reston.VA.US"];
    [rawMime appendString:@"Mime-Version: 1.0\n"];
    [rawMime appendString:@"Content-type: Multipart/Mixed; boundary=\"NextPart\"\n"];
    [rawMime appendString:@"\n"];
    [rawMime appendString:@"--NextPart\n"];

    //Here's come the body part
    [rawMime appendString:@"Content-type: text/plain; charset=\"UTF-8\"\n"];
    [rawMime appendString:@"\n"];
    [rawMime appendString:_body];
    [rawMime appendString:@"\n"];
    [rawMime appendString:@"--NextPart\n"];

    //Attach pdf
    [rawMime appendString:@"Content-Type: application/pdf; "];
    [rawMime appendFormat:@"name=\"%@.pdf\";\n", _pdfName];
    [rawMime appendFormat:@"Content-Transfer-Encoding: base64\r\n\r\n"];
    [rawMime appendFormat:@"%@\n",_pdfAttached];
    [rawMime appendString:@"\n"];

    //If necessary attach csv
    if (_csvAttached!=nil) {
        [rawMime appendString:@"--NextPart\n"];
        [rawMime appendString:@"Content-Type: application/octet-stream; "];
        [rawMime appendFormat:@"name=\"%@\";\n", _csvName];
        [rawMime appendFormat:@"Content-Transfer-Encoding: base64\r\n\r\n"];
        [rawMime appendFormat:@"%@\n",_csvAttached];
        [rawMime appendString:@"\n"];
        [rawMime appendString:@"--NextPart\n"];
    }

    NSData        *rawMessageData = [rawMime dataUsingEncoding:NSUTF8StringEncoding];

    return rawMessageData;
} 
```

_pdfAttached 是 NSString 代表以 base64 编码的 PDF 我希望它有所帮助，很抱歉之前没有发布解决方案

这是不发送但创建邮件正文的代码。在这里，您可以执行使用 SESSendRawEmailRequest 无法执行的操作，例如在 to 和 from 中添加“显示名称”。我建议您使用这两个部分来定义发件人，您会看到它提供了只有 SESSendRawMessage 无法提供的可能性。最后说，如果你不想有例外，你不应该忘记在 SESSEndRawEmailRequest 中放置收件地址和发件人地址。

# php - php非阻塞soap客户端

> ID：10228040
> 
> 赞同：0
> 
> 时间：2012-04-19T12:26:14.447
> 
> 标签：php, soap, nonblocking

我正在使用很多 web 服务一个巨大的 php 应用程序。通常他们都会在十秒或更短的时间内向我发送数据，但有时我会遇到一个没有响应并冻结所有过程的人。

所以我的问题是，如果在定义的时间后没有响应，我如何在 php 中使用soap webservice而不冻结所有系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:29:37.300

PHP 不支持多线程和异步编程。但是，您可以使用`fork`另一个执行此 SOAP 请求的进程；当然，您将无法从这个新进程向客户端发送一些数据，但您将能够例如将其响应写入 DB。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-23T09:38:24.040

该解决方案与多线程[penartur 无关](https://stackoverflow.com/users/831314/penartur)。唯一要做的就是使用非阻塞流的 I/O 多路复用并使用[nutrija](https://stackoverflow.com/users/1343996/nutrija)建议的 select() 函数。可以在此链接中找到一个已经实现的解决方案： [Making PHP's SOAP client asynchronous](http://www.halon.se/blog/making-phps-soap-client-asynchronous/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T12:47:11.540

您可以使用 JavaScript 对另一个将发出 SOAP 请求的 PHP 文件进行 AJAX 调用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-19T12:46:42.900

您可以使用[stream_set_blocking](http://php.net/stream_set_blocking)将 http/https 流设置为非阻塞模式。

# python - 文件未通过 python 脚本上传到保管箱

> ID：10228043
> 
> 赞同：1
> 
> 时间：2012-04-19T12:26:17.433
> 
> 标签：python

这个问题只是对另一个问题的更深入的解释。

我把代码放在github上，因为它相当公平。对不起给您带来不便 `https://github.com/lonehangman/mccdropdav/blob/master/views.py`

第 100 行以后是问题开始的地方。在过去的一周中，我尝试通过在 Google App Engine (GAE) 上设置的 webdav 将文件从页面（在 iPad 上）上传到保管箱，但未能成功。

我可以查看 Dropbox 的内容，但是当我从计算机或 iPad 下载或上传时，它总是会出错。我检查了日志，发现第 110 行有一个关键错误，所以我尝试通过打印 meta_entry 来解决这个问题，然后我意识到这是一个不存在的资源。
（因此`# make a fake Resource to ease our exporting`. 在第 106 行）。这个问题让我困惑了好几天，但后来我的朋友告诉我删除第 152 行 `root.append(self.export_meta_entry(metadata,href=self.request.path)) # first response's href contains exactly what you asked for (relative path)`
这样做消除了关键错误，但仍然不允许我上传到 Dropbox。iPad 告诉我它正在上传，但我检查了我的保管箱，但看不到新文件。我也不能下载文件。日志似乎没有捡起它。

谁能解释一下并尝试帮助（如果您不打算提供帮助，请不要费心写诸如“去其他地方”或“学习python noob”之类的东西。）

如果需要更多信息，请询问。在写这篇文章的时候我很累，所以看起来有点匆忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:29:36.270

不查看您的整个应用程序，而只查看您的`put`方法（调用 Dropbox `put_file`）

```
def put(self):
        path = '/' + self.request_path
        self.client.put_file(ROOT, os.path.dirname(path), self.request.body_file, file_name=os.path.basename(path))
        self.response.set_status(201,'Created') 
```

[Dropbox API 教程](https://www.dropbox.com/developers/start/files#python)示例`put_file`

```
f = open('working-draft.txt')
response = client.put_file('/magnum-opus.txt', f)
print "uploaded:", response 
```

和[`put_file`文档](https://www.dropbox.com/static/developers/dropbox-python-sdk-1.4-docs/index.html#dropbox.client.DropboxClient.put_file)一样，put_file 的第一个参数是 Dropbox 树中文件的完整路径（包括文件名），第二个参数是一个类似文件的对象。

所以这样的事情可能会更好

```
self.client.put_file(path, self.request.body_file) 
```

如您所见，您可以查看 的返回值以获取有关调用`put_file`中发生的事情的更多信息。`put_file`您可以根据 Dropbox 的响应调整您的响应代码。

# c - 如何知道新客户端是否正在使用 select() 连接到套接字

> ID：10228047
> 
> 赞同：0
> 
> 时间：2012-04-19T12:26:39.447
> 
> 标签：c, sockets, select

我的问题是：（使用 select()）我如何知道新客户端是否正在连接我的服务器？A 不能只使用接受，因为接受（）正在阻塞......

示例：我在 fd user1 (fd = 4) 和 user2 (fd = 5) 上设置了两个客户端。所以，我使用 select 来知道谁在套接字上写：

```
 FD_ZERO(read_fds);
  FD_SET(user1, read_fds);
  FD_SET(user2, read_fds);
  error = select(user2 + 1, read_fds, NULL, NULL, NULL);
  if (FD_ISSET(user1, read_fds) == 1)
     printf("user1 talks.\n");
  ... 
```

但我想知道是否有新用户连接到服务器，我该怎么办？我试过了：

```
 FD_ZERO(read_fds);
  FD_SET(user1, read_fds);
  FD_SET(user2, read_fds);
  FD_SET((user2 + 1), read_fds);
  error = select(user2 + 2, read_fds, NULL, NULL, NULL);
  if (FD_ISSET(users2 + 1) == 1)
  {
      printf("New user.\n");
      accept(..., ...);
  }
  ... 
```

但是使用此代码，每次都选择 return -1 ...

一个办法 ？^^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:32:13.310

您必须将连接的客户端存储在某处，例如列表。

```
struct client_node
{
    int sockfd;
    /* Other data that might be needed */
    struct client_node *next;
};

struct client_node *client_list = NULL;

/* ... */

FD_ZERO(&read_fds);
FD_SET(listening_socket, &read_fds);

int maxfd = listening_socket;

for (struct client_node *c = client_list; c; c = c->next)
{
    FD_SET(c->sockfd, &read_fds);
    maxfd = MAX(maxfd, c->sockfd);
}

int res = select(maxfd + 1, &read_fds, NULL, NULL, NULL); 
```

至于阻塞问题`accept`，如您所见，我添加了一个套接字（变量`listening_socket`），它是您正在侦听的套接字。当`select`说您可以从中读取时，这意味着有一个新连接并且您可以调用接受。

# windows-phone-7 - Invalid appId Bing Translate (WP7)

> ID：10228050
> 
> 赞同：2
> 
> 时间：2012-04-19T12:26:56.687
> 
> 标签：windows-phone-7, reference, bing, translate

> ArgumentException: Invalid appId Parameter name: appId : ID=3737.V2_Soap.Translate.30597BC0

I am getting the above error message everytime I try to run the translate service.

The error is pointing me to the below c# code for references.cs

```
public string EndTranslate(System.IAsyncResult result) {
                object[] _args = new object[0];
                string _result = ((string)(base.EndInvoke("Translate", _args, result)));
                return _result;
            } 
```

I am using this on windows phone 7 and it had worked previously but now i am getting this error.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:51:38.737

其实就是因为[这个](http://social.msdn.microsoft.com/Forums/en-US/microsofttranslator/thread/02054a7c-090c-46a0-a8d1-2d57e236eb4d/)。

> 早在 2011 年 9 月，我们就反对将 Bing AppID 用于翻译服务。实际上，现有的和新的 AppID 一直持续到昨天。我们现在已禁用新的 Bing AppID：使用在 2012 年 3 月 31 日之前未与 Translator 服务一起使用的 Bing AppID 的请求将被拒绝。
> 
> 请升级到 Azure 市场令牌的安全方法。

我有同样的错误，我现在正在努力从`Azure Translate`.

# objective-c - 在字符串前面添加空格？

> ID：10228052
> 
> 赞同：2
> 
> 时间：2012-04-19T12:27:01.153
> 
> 标签：objective-c, ios, ios4, ios5

我想在字符串前面添加空格（“”）（如空格）。这是空格的长度

```
 int spaces_needed=((36-[[dicBusinessDetails objectForKey:@"ResturantName"] length]))/2; 
```

我想要的是创建一个这样的字符串

```
 NSString stringWithFormat:@"               %@",[dicBusinessDetails objectForKey:@"ResturantName"]; 
```

但是空格**不应该像上面那样固定，而是****int spaces_needed**的可变长度。

*这样做的实际原因是居中对齐收据中的字符串*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T12:33:34.717

`NSString`你可能喜欢`stringByPaddingToLength:withString:startingAtIndex`

```
NSString *result = [NSString stringWithFormat:@"%@%@",
                             [@" " stringByPaddingToLength:spaces_needed withString:@" " startingAtIndex:0]
                             [dicBusinessDetails objectForKey:@"ResturantName"]]; 
```

# html - HTML 在 IE6、8、9、10 和所有其他浏览器中打开，但不在 Windows 7 64 位机器的 IETester 中的 IE7 中打开

> ID：10228055
> 
> 赞同：0
> 
> 时间：2012-04-19T12:27:06.880
> 
> 标签：html

我的机器有一个奇怪的问题，我的 html 页面都在安装 XP 的机器上的 IE6、8、9 和 10 中打开，但在另一台我有 Windows 7 64 位操作系统的机器上，这些 HTML 页面在 IE7 上不起作用。我正在使用 IETester 检查兼容性测试。

我无法理解实际问题是什么，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:34:01.257

我认为这是ietest的错误；如果你想打开你的文件，例如：`E:\test\test.html`，你必须输入`E:\test`ietester ie7选项卡地址栏并按“Enter”，它会在E：\ test中显示你的所有文件，你输入`E:\test\test.html`地址栏并按“输入”，它将打开。

而且我从来没有在IEtester中测试过IE7，IE有一个devTool，你只需按“F12”，就像firebug一样，它会显示。它有IE 7 8 9 modo，但IE6除外。

# blackberry - WebWorks Web Inspector - 意外响应代码：426

> ID：10228060
> 
> 赞同：2
> 
> 时间：2012-04-19T12:27:25.110
> 
> 标签：blackberry, blackberry-webworks

我正在尝试在 Blackberry 7.0 (BB Torch 9860) 上的浏览​​器中使用 Web Inspector，在 Chrome 中加载它时出现以下错误：

```
Unexpected response code: 426   :1337:1 
```

任何想法为什么会发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T20:33:19.893

我有一个类似的问题，但设法通过切换浏览器让它工作。

在 safari 而不是 chrome 中尝试。[请参阅http://www.berryreview.com/2011/11/18/blackberry-os-7-web-inspector-easily-debug-blackberry-websites-webworks-browser-apps/](http://www.berryreview.com/2011/11/18/blackberry-os-7-web-inspector-easily-debug-blackberry-websites-webworks-browser-apps/)的第 7 步

我不太确定为什么，主要是因为我不太关心找出原因，但希望这能解决你的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T04:14:44.317

这也给了我很大的悲痛。我有一个运行版本 7.0 的旧黑莓，我正在测试它不会附加到最新的 Chrome 或 Safari（版本 6）中的网络检查器，两者都显示空白页面，右上角有一个搜索字段和两个控件，左下方。

通过安装较旧的 Safari 5 并从中加载网络检查器页面，我终于设法让网络检查器运行。

我从这里下载了它：http: [//support.apple.com/kb/DL1531](http://support.apple.com/kb/DL1531)

# c# - 在中继器中排序

> ID：10228063
> 
> 赞同：0
> 
> 时间：2012-04-19T12:27:36.547
> 
> 标签：c#, asp.net

这是我的代码

```
<asp:Repeater ID="rpRatesheetDetails" runat="server" 
                        onitemcommand="rpRatesheetDetails_ItemCommand" 
                        onitemdatabound="rpRatesheetDetails_ItemDataBound">
                        <HeaderTemplate>
                            <tr>
                                <td width="110" height="25px" class="content">
                                    <table cellpadding="0" cellspacing="1">
                                        <tr>
                                            <td style="cursor:pointer;" runat="server" onclick="toggle();">
                                                Carrier
                                            </td>
                                            <td align="right">
                                                <asp:ImageButton ID="btnCarrierSortAsc" runat="server" ImageUrl="~/Images/Arrow_T.png" ToolTip="Sort Ascending Order" style="display:none;"
                                                    CommandName="SortCarrierASC" />
                                            </td>
                                            <td align="right">
                                                <asp:ImageButton ID="btnCarrierSortDsc" runat="server" ImageUrl="~/Images/Arrow_B.png" ToolTip="Sort Descending Order" style="display:none;"
                                                    CommandName="SortCarrierDESC" />
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td width="110" class="content">
                                    <table cellpadding="0" cellspacing="1">
                                        <tr>
                                            <td>
                                                Date
                                            </td>
                                            <td align="right">
                                                <asp:ImageButton ID="btnDateSortAsc" runat="server" ImageUrl="~/Images/Arrow_T.png"  ToolTip="Sort Ascending Order" style="display:none;"
                                                    CommandName="SortDateASC" />
                                            </td>
                                            <td align="right">
                                                <asp:ImageButton ID="btnDateSortDesc" runat="server" ImageUrl="~/Images/Arrow_B.png" ToolTip="Sort Descending Order" style="display:none;"
                                                    CommandName="SortDateDESC" />
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td width="82" class="content">
                                    Call Type
                                </td>
                                <td width="110" class="content">
                                    Format
                                </td>
                                <td width="100" class="content">
                                    <table cellpadding="0" cellspacing="1">
                                        <tr>
                                            <td>
                                                Status
                                            </td>
                                            <td align="right">
                                                <asp:ImageButton ID="btnStatusAsc" runat="server" ImageUrl="~/Images/Arrow_T.png" ToolTip="Sort Ascending Order" style="display:none;"
                                                    CommandName="SortStatusASC" />
                                            </td>
                                            <td align="right">
                                                <asp:ImageButton ID="btnStatusDsc" runat="server" ImageUrl="~/Images/Arrow_B.png" ToolTip="Sort Descending Order" style="display:none;"
                                                    CommandName="SortStatusDESC" />
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td width="70" class="content">
                                    User
                                </td>
                                <td width="82" class="content">
                                    File Name
                                </td>
                                <td width="110" class="content">
                                    System
                                </td>
                                <td width="110" class="content">
                                    <table cellpadding="0" cellspacing="1">
                                        <tr>
                                            <td>
                                                No. Of Days
                                            </td>
                                            <td align="right">
                                                <asp:ImageButton ID="btnDaysAsc" runat="server" ImageUrl="~/Images/Arrow_T.png" ToolTip="Sort Ascending Order"
                                                    CommandName="SortNoOfDaysASC" />
                                                 <asp:ImageButton ID="btnDaysDsc" runat="server" ImageUrl="~/Images/Arrow_B.png" ToolTip="Sort Descending Order"
                                                    CommandName="SortNoOfDaysDESC" />
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </HeaderTemplate> 
```

以上是我的转发器的标题模板。默认情况下，当我的转发器加载时，它按最后一列排序。现在我想要 dat，如果用户想按任何其他列排序，他应该单击 dat 列。只有 den 排序图标才会将显示并且记录将被排序。我在 ItemDataBound 事件上显示此图标，但是如何在单击标题时触发 ItemDataBound 事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:30:44.700

中继器中项目的顺序取决于绑定集合（`DataSource`）中的顺序。

对之前绑定中的项目进行排序`DataSource`，以便在转发器中获得排序列表。

在您的`rpRatesheetDetails_ItemCommand`- 检查命令名称中执行此操作，相应地对集合进行排序，然后绑定。

# declaration - 如何从着色器中读取顶点声明？

> ID：10228064
> 
> 赞同：1
> 
> 时间：2012-04-19T12:27:36.843
> 
> 标签：declaration, hlsl, vertex

如何从 HLSL 顶点着色器中读取我的顶点声明？我的意思是这些信息：

```
struct VS_INPUT
{
    float4 position : POSITION; 
    float2 uv       : TEXCOORD;
    float4 color    : COLOR;
}; 
```

我尝试了 IDirect3DDevice9::GetVertexDeclaration() 和其他一些东西，但无法让它工作。我需要这些信息，以便在绘制调用之前知道我的着色器处理它试图渲染的网格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:39:43.070

使用 SetVertexDeclaration 或 SetFVF 方法，您可以在下一个 DrawCall 中描述使用的 Vertexbuffer 的格式。在大多数情况下，FVF 就足够了，但是如果您使用法线贴图，例如，您需要切线和副法线，这只能通过顶点声明来描述。

着色器没有顶点声明或类似的东西。该结构仅描述了顶点着色器的预期输入。因此，在顶点数据和着色器输入之间存在一个映射，带有 POSITION、TEXCOORD0、COLOR0 等标签。如果您用标签“Position”标记顶点数据的某些内容，则映射器会将这些数据填充到用 POSITION 标记的着色器结构的变量中. 如果顶点缓冲区中没有标签的信息，则值字段不明确。所有存在但在 shaderstruct 中没有标签的数据将被忽略。

正确的方法是您正在寻找下一个绘制调用的顶点数据并选择正确的着色器，它需要给定的输入。

# git - git hooks：有克隆钩子吗？

> ID：10228065
> 
> 赞同：38
> 
> 时间：2012-04-19T12:27:37.313
> 
> 标签：git, githooks, git-clone

我们想在外部数据库中存储一些关于提交的元信息。在克隆或结帐期间，应引用此数据库，我们将元信息复制到已克隆的 repo 中的文件中。数据库是必需的，而不仅仅是使用文件是为了索引和搜索等......

我想如果有一个克隆钩子，我们可以触发它。我在 .git/hooks 的示例中找不到克隆钩子。有吗？结帐后挂钩是客户端唯一的可能性吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-11T06:49:00.540

好的，一种方法是使用该`clone --template`选项。

指定客户端挂钩将作为值存储到`--template`交换机的位置。钩子被复制到克隆，并立即触发 post-checkout 钩子！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-19T13:18:57.433

当您*克隆*远程存储库时，您无法运行任何客户端挂钩，因为挂钩在您的工作副本中是本地的，并且您正在从头开始创建一个。当您从远程存储库中*提取*新更改时，git 将运行您的本地`post-merge`钩子（如果存在）。

*作为拉取*操作的结果，服务器上没有运行任何内容。*推送*操作将触发服务器的`update`和`post-update`钩子。

有关更多信息，请参阅[Git 手册](https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-19T13:35:17.497

不，没有任何克隆钩子。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-01-07T01:12:38.310

从 git 版本 1.6.3 开始，**post-checkout**钩子在 git-clone 上运行（当没有 运行时`--no-checkout`）。

> 它也在 git-clone[1] 之后运行，除非使用了 --no-checkout (-n) 选项。给钩子的第一个参数是 null-ref，第二个参数是新 HEAD 的 ref，flag 始终为 1。

[https://git-scm.com/docs/githooks#_post_checkout](https://git-scm.com/docs/githooks#_post_checkout)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-04T04:22:14.837

我迟到了，但有一个解决方法：

1.  使用where是用户定义的函数捕获`git clone`执行并设置变量。（例如[https://gist.github.com/KeyAmam/a6afcabc3a724fc4a541aca7629c3ff6](https://gist.github.com/KeyAmam/a6afcabc3a724fc4a541aca7629c3ff6)）`trap set_var_on_git_clone DEBUG``set_var_on_git_clone`

2.  检查脚本中的变量`post-checkout`并在案例中做一些事情。清除脚本末尾的变量。（例如[https://gist.github.com/KeyAmam/6a0e8805c0b6a662adb6bcf8118a089a](https://gist.github.com/KeyAmam/6a0e8805c0b6a662adb6bcf8118a089a)）

这仅适用于 Bash，但您可以在其他 shell 中执行类似的操作。

# c# - Mono For android, 绘图功能

> ID：10228068
> 
> 赞同：0
> 
> 时间：2012-04-19T12:27:50.653
> 
> 标签：c#, android, xamarin.android, draw, polyline

对于你们中的一些人，我有一个简短的，也许很简单的问题，但是：

如何在 android 中绘制折线（就像您通常使用的方式一样`system.windows.shapes`）

我已经四处搜索，但只能找到如何制作一条线。而不是由点集合绘制的线。

谢谢，

巴特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:40:40.547

如果我没记错的话，没有像折线这样的功能，但你可以自己做。

只需在循环中从点到点画线。

**编辑**

阅读这个链接[CrossGraphics](https://github.com/praeclarum/CrossGraphics)，在那里你会发现如何画线。

# javascript - 隐藏包含跨度的单元格的表格行

> ID：10228071
> 
> 赞同：1
> 
> 时间：2012-04-19T12:27:57.510
> 
> 标签：javascript

我试图隐藏在其中一个单元格中包含特定跨度元素的行。以下代码是我到目前为止所拥有的 - 但是 tr 没有 getElementsByTagName

我还能做些什么来获得这一行？谢谢 ！

```
<table id='tableContainer'>
<tr><td><span id='xyz'>Hide</span></td></tr>
<tr><td><span id='abc'>Show</span></td></tr>
</table>

container = document.getElementById('tableContainer');
items = container.getElementsByTagName('tr');

for (var j = 0; j < items.length; j++) {
    spans = items.getElementsByTagName('span');
    for (var i=0; i<spans.length; i++) {
        if (spans.id == 'xyz') {
            items.display = 'none';
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:35:17.483

所以让我们调试一下：

```
container = document.getElementById('tableContainer');
console.log(container)  //<-- Gives you tag element
items = container.getElementsByTagName('tr');
console.log(items); //<-- Gives you HTML Collection

for (var j = 0; j < items.length; j++) {
    spans = items.getElementsByTagName('span');  //<-- error says items.getElementsByTagName is not a function
    for (var i=0; i<spans.length; i++) {
        if (spans.id == 'xyz') {  //<--error here [not referencing index]
            items.display = 'none';  //<--error here [not setting style and index]
        }
    }
} 
```

这里的问题是您没有为每个 tr 编制索引，而是试图在整个 html 集合上运行它。

```
spans = items.getElementsByTagName('span'); 
```

应该

```
spans = items[j].getElementsByTagName('span'); 
```

你需要在 spans 循环中做同样的事情，所以最终的代码是

```
container = document.getElementById('tableContainer');
console.log(container)  //<-- Gives you tag element
items = container.getElementsByTagName('tr');
console.log(items); //<-- Gives you HTML Collection

for (var j = 0; j < items.length; j++) {
    spans = items[j].getElementsByTagName('span');  //<-- use index
    items.getElementsByTagName is not a function
    for (var i=0; i<spans.length; i++) {
        console.log(spans[i].id)
        if (spans[i].id == 'xyz') {  //<-- use index
            items[j].style.display = 'none';  //<-- use index and display
        }
    }
} 
```

运行示例：[JSFiddle](http://jsfiddle.net/WXNG5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:34:08.890

`spans`并且`items`是节点数组，所以你忘了通过数组索引来获取每个节点，它应该是这样的，

```
<table id='tableContainer'>
<tr><td><span id='xyz'>Hide</span></td></tr>
<tr><td><span id='abc'>Show</span></td></tr>
</table>

container = document.getElementById('tableContainer');
items = container.getElementsByTagName('tr');

for (var j = 0; j < items.length; j++) {
    spans = items[j].getElementsByTagName('span');
    for (var i=0; i<spans.length; i++) {
        if (spans[i].id == 'xyz') {
            items[j].style.display = 'none';
        }
    }
} 
```

[演示](http://jsfiddle.net/ocanal/vaMMY/)

**更新：**

并且不要忘记放在`style`前面`display`。

```
items[j].display = 'none'; // false
items[j].style.display = 'none'; // true 
```

# git - 寻找一种使用 git flow 自动化“bump 版本”的方法

> ID：10228073
> 
> 赞同：20
> 
> 时间：2012-04-19T12:27:58.930
> 
> 标签：git, bash, awk, git-flow, version-numbering

我已经使用 git flow 几个月了，效果很好。我想自动化“凹凸版”操作。

该项目是 PHP 并且 footer.php 有一个标记来替换当前的发布标记。我确信通过 git log 和 PHP 文件的一些 awk'ing 一切都应该解决，但我假设有人之前已经这样做了......

有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-23T11:01:11.790

您可以使用[semver gem](https://github.com/flazz/semver)，它将一个文件添加`.semver`到您的 git repo 的根目录中。[语义版本号](http://semver.org/)是具有结构化/一致/有意义的版本号的建议，gem 只是使其易于实现。

因此，您需要做的就是添加：

```
semver inc major|minor|patch 
```

进入您的工作流程（手动或脚本），以便在发布期间更新 .semver。

如果你不想要 ruby​​ 依赖，semver 非常简单，所以一些 sed 实验可能会产生一个可行的解决方案。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-05-05T13:57:50.907

还有旨在取代 sed 魔法的**[bumpversion](https://github.com/peritus/bumpversion)**（更多信息在[https://github.com/peritus/bumpversion ）。](https://github.com/peritus/bumpversion)

使用 安装`pip install bumpversion`，告诉它哪些文件包含您的版本号以及您是否要提交和标记它。它也是高度可配置的（默认使用语义版本控制），因此您可以添加一个声明性配置文件，说明如何将此软件项目的版本升级到您选择的 vcs 中，其他人也可以升级版本。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-11T20:16:27.893

在我的 git-flow 分支项目中，我实际上实现了钩子和过滤器，许多人在原始项目中提出了一个请求，但到目前为止还没有实现。有了这些，您可以自动更新项目中的版本号。分叉项目可以在这里找到 [https://github.com/petervanderdoes/gitflow](https://github.com/petervanderdoes/gitflow)

对于版本碰撞的一些 Bash 脚本，您可以查看我创建的两个要点 [https://gist.github.com/2877083](https://gist.github.com/2877083)或 [https://gist.github.com/2878492](https://gist.github.com/2878492)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-06T17:59:13.983

Semver 网页指出：

> 给定版本号 MAJOR.MINOR.PATCH，增加：
> 
> *   进行不兼容的 API 更改时的主要版本，
> *   以向后兼容的方式添加功能时的次要版本，以及
> *   进行向后兼容的错误修复时的补丁版本。
> 
> 预发布和构建元数据的附加标签可作为 MAJOR.MINOR.PATCH 格式的扩展。

Gitflow 使用分支的命名约定，错误修复以前缀为前缀的分支`hotfix/`，新功能以`feature/`.

当这种类型的任何分支合并到发布分支时，这会导致`PATCH`增加。如果一个特征已被合并，则应增加 MINOR 字段。

给定一个特定的修订版，您应该能够确定是否已合并任何一个分支以及要碰撞的字段。

困难的部分是找出一个突破性的变化。过去，我考虑过对编译后的代码使用反射来确定 API 是否已更改，但是，我认为在提交消息中使用关键字来指定重大更改会容易得多。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-03T01:26:21.940

您还可以查看我的存储库，了解它目前为 python 设置文件制作的可以修改[Using-bumpversion-package](https://github.com/jackton1/Using-bumpversion-python-package)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-14T10:05:37.793

下面是我们用来在 constants.h 中增加版本号的代码：

```
constants='../Include/constants.h'

# Get the current build number
currentbuild=`grep PRODUCT_BUILD $constants|sed 's/[^0-9]//g'`
currentversion=`grep PRODUCT_VERSION $constants|sed 's/[^.0-9]//g'`

echo "currentbuild=$currentbuild and currentversion=$currentversion"
newver=$((1+$currentbuild))

# Update the build number on-disk:
cp $constants /tmp/constants
if sed -e "/PRODUCT_BUILD/ s/[0-9][0-9]*/${newver}/" < /tmp/constants > $constants
then    
    echo "Updated build number from $currentversion.$currentbuild to $currentversion.$newver."
    cd ../Include
    # Check it into version control
    svn ci -m "updated build number to ${currentversion}.${newver} for $buildid in $buildroot"
else
    echo "There was a problem updating $constants to build $newver"
fi 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-12-21T16:44:13.130

如果我正确理解了您的“bump version”操作，那么您的意思是在您开始发布版本后在任意数量的文件中增加版本号`git flow release start x.x.x`，其中版本也表示在 git 标记中。

由于 Driessen 的原始 git-flow 已停产，非官方的继任者似乎是 Peter van der Does `gitflow-avh`( [https://github.com/petervanderdoes/gitflow-avh/](https://github.com/petervanderdoes/gitflow-avh/) )，其中包含大量 git flow 钩子。有关完整列表，请参阅[https://github.com/petervanderdoes/gitflow-avh/tree/develop/hooks](https://github.com/petervanderdoes/gitflow-avh/tree/develop/hooks)。

我`post-flow-release-start`用这个小脚本做了版本碰撞：

```
VERSION=$1

# Get rid of version prefix
STRIPPED_VERSION=`echo $VERSION | cut -d'v' -f 2`
sed -i '' -E "s/^([ |#|[:alpha:]]*)\[.*\]$/\1[$STRIPPED_VERSION]/1" ./README.md
sed -i '' -E "s/^([\t| ]*\"version\": )\".*\"/\1\"$STRIPPED_VERSION\"/1" ./package.json
git commit -a -m "version $STRIPPED_VERSION"

exit 0 
```

这有点死板，因为这两个文件是硬编码的（README.md 和 package.json）。您可以从最后一个标签中搜索旧版本，然后将其替换为循环中的所有配置文件。

注意事项：
OSX 需要后缀`sed -i`，但您可以使用空引号。此外，扩展的正则表达式参数`sed`在 Linux 上的命名方式不同。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-07T02:23:34.663

您可以自动化每次提交的版本。在这里你可以使用 shell 脚本和内置的 git 钩子找到它： [https ://github.com/addonszz/Galileo/tree/develop/githooks](https://github.com/addonszz/Galileo/tree/develop/githooks)

要运行的 shell 脚本是： [https ://github.com/evandrocoan/.versioning/blob/master/scripts/updateVersion.sh](https://github.com/evandrocoan/.versioning/blob/master/scripts/updateVersion.sh)

自动化每件事的问题是，当您提交所有内容时，如何知道您是在更新主要、次要、补丁还是构建。

我的意思是，对于构建，您可以自动化每个开发分支提交，如上面的链接中所做的那样。

该补丁，您可以钩住每个 git flow hotfix 完成。上面的链接只是缺少挂钩修补程序完成以增加正在运行的补丁版本： `./githooks/updateVersion.sh patch`

但是minor和major并没有什么技巧，它们都是在功能完成发布之内完成的。

# 观测值

我找到了挂钩 pre-hotfix-commits 的解决方案，这是一个问题： [如何预先挂钩 gitflow 修补程序完成？](https://stackoverflow.com/questions/37084160/how-to-pre-hook-the-gitflow-hotfix-finish)

# iphone - 我的页脚不会填充 Iphone 或 Ipad 上页面的水平方式

> ID：10228076
> 
> 赞同：0
> 
> 时间：2012-04-19T12:28:12.697
> 
> 标签：iphone, css, ipad, footer

我尝试了很多东西，但直到现在，什么都没有发生。我的页脚不会填满页面（水平），但会卡在页面中间的某个地方。（仅在 Ipad 和 Iphone 上。）元标记不起作用，而不是 min-width:100%, min-width:1024px; 都不适合我。

固定定位的页脚是没有选择的......（当编辑更多文本时，页脚必须与内容一起流动。）

这是我的页脚 CSS 代码：

```
#footer_content{
        min-height:200px;
        min-width:1024px;
        float:left;
        background-color:#29809E;
        bottom:0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:53:05.690

做这个：

```
#footer_content{
        min-height:200px;
        min-width:1024px;
        float:left;
        background-color:#29809E;
        bottom:0;
    } 
```

这个：

```
#footer_content{
        min-height:200px;
        width:100%;
        min-width:1024px;
        float:left;
        background-color:#29809E;
        bottom:0;
        display: block;
    } 
```

然后在关闭页脚 div 之后添加一个 clear: both。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:30:05.427

为表格视图和主视图设置相同的背景颜色

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:32:25.330

尝试将视口设置为 1.0

进一步明确：两者都可能有帮助

这里还有一些关于如何使用视口的很好的解释......

iPad 细节：[http ://www.allenpike.com/2010/choosing-a-viewport-for-ipad-sites/](http://www.allenpike.com/2010/choosing-a-viewport-for-ipad-sites/)

通用” [https://developer.mozilla.org/en/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en/Mobile/Viewport_meta_tag)

# playframework - 我应该使用 Play framework 2.0 还是去玩 1.x

> ID：10228078
> 
> 赞同：6
> 
> 时间：2012-04-19T12:28:12.993
> 
> 标签：playframework, playframework-1.x, playframework-2.0

作为 play 2.0 的当前状态是等待它更成熟并使用 play 1.x 还是去 play 2.0 更好，因为我注意到 play 2.0 几乎没有 1.x 存在的插件

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-13T13:12:19.970

如果您只是想**完成任务**：请使用**playone**。

如果您想要**技术魔法**：选择**playtwo**。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-19T12:56:20.587

我是[Play 2.0](http://www.playframework.org/)的忠实支持者，主要是因为它在异步支持和与[Akka](http://akka.io/)的核心集成方面的巨大改进。Scala API 在 2.0 中比 1.2.4 好得多，使用[SBT](https://github.com/harrah/xsbt/wiki)作为底层构建系统也是一个很好的决定。

如果您担心插件，请不要担心，因为您几乎可以使用任何与[SBT](https://github.com/harrah/xsbt/wiki)兼容的东西。

Play 2.0 确实是 Play Framework 的自然演进，在游戏的这个阶段投资 1.x 平台几乎没有回报。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-03T11:15:35.160

另一篇比较 1.2.x 和 2.0 的博文：http: [//blog.awfbeat.com/post/22314115684/impressions-of-play-framework-1-2-4-vs-2-0](http://blog.awfbeat.com/post/22314115684/impressions-of-play-framework-1-2-4-vs-2-0)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-19T13:01:30.990

*无耻的自我提升：*我最新[的博客文章](http://www.soutier.de/blog/?p=50)谈到了从 1.x 到 2.0 的变化。

确实没有那么多插件，但是有很多东西可以在没有 Play 特定插件的情况下使用（例如用于 MongoDB 访问的 Salat）。您还可以使用 SBT 插件（这是您以前无法做到的）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T13:19:20.810

为了完成 Sean 和 Marius 的回答：永远向前，在第 1 场比赛中，总会有社区决定完成这一行的那一天。没有人知道什么时候。

# ruby - Ruby：Hpricot 问题 - rb_hash_lookup 无法位于 msvcrt-ruby18.dll 中

> ID：10228079
> 
> 赞同：0
> 
> 时间：2012-04-19T12:28:16.933
> 
> 标签：ruby, hpricot, msvcrt

**更新**：此问题已使用`RubyInstaller`和*相关* `DevKit`的. 请看下面的答案。

* * *

在新的 WinXP 上，我们正在尝试设置 RoR。我们在运行 rails 应用程序时遇到了一些问题。在调试 Hpricot gem 时发现了罪魁祸首。如果我们在一个简单的 Ruby 程序中使用 Hpricot，也会出现同样的问题。

当我们运行任何使用 Hpricot 的 Ruby 程序时，会出现一个消息框，其中包含以下消息：

```
The procedure entry point rb_hash_lookup could not be located in the dynamic link library msvcrt-ruby18.dll. 
```

这是堆栈跟踪：

```
C:/Ruby/lib/ruby/gems/1.8/gems/hpricot-0.8.6-x86-mswin32/lib/hpricot_scan/1.8/hpricot_scan.so: 127: The specified procedure could not be found.   
- C:/Ruby/lib/ruby/gems/1.8/gems/hpricot-0.8.6-x86-mswin32/lib/hpricot_scan/1.8/hpricot_scan.so (LoadError)
        from C:/Ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
        from C:/Ruby/lib/ruby/gems/1.8/gems/hpricot-0.8.6-x86-mswin32/lib/hpricot_scan.rb:1
        from C:/Ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
        from C:/Ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
        from C:/Ruby/lib/ruby/gems/1.8/gems/hpricot-0.8.6-x86-mswin32/lib/hpricot.rb:20
        from C:/Ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
        from C:/Ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
        from hp_test.rb:3 
```

红宝石：红宝石1.8.6（2008-08-11补丁级别287）[i386-mswin32]

红宝石：1.3.2

Hpricot：0.8.6（安装`using gem install hpricot`时没有任何问题）

有什么线索吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:34:00.227

Ruby DevKit 是这里的救星。感谢[查拉斯](https://stackoverflow.com/questions/3250406/msvcrt-ruby18-dll-was-not-found-with-ruby)。

我们所做的是：

```
1\. Uninstalled the ruby
2\. Installed it again using RubyInstaller
3\. Installed the DevKit
4\. Install the hpricot gem
5\. That's it 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:53:16.537

你需要另一个 hpricot：0.6.164 可以，而 0.8.6 不行。后者可能适用于 1.8.7+ ruby​​。

# networking - Google Chat 服务器如何将通知推送给数亿客户？

> ID：10228080
> 
> 赞同：2
> 
> 时间：2012-04-19T12:28:22.120
> 
> 标签：networking, browser, tcp, websocket, comet

考虑一个 Web 应用程序，例如 Google Chat，其中的服务器同时为数亿客户提供服务。在这样的应用程序中，服务器必须近乎实时地向客户端推送通知（在聊天示例中 - 传入消息、存在通知等）。

他们如何实施？很大一部分客户端是基于浏览器的。我想轮询甚至会使 Google 的服务器超载。那么，他们使用的是像 Comet 这样的东西吗？如果是这样 - 他们是否需要为每 65536 个客户端分配一个服务器（每台机器的最大 TCP 连接数）？我知道有办法解决[这个](https://stackoverflow.com/a/10126731/138585)限制，但我不知道它是如何实现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:55:59.227

聊天不是由单个应用程序/硬件/实例处理的。他们肯定会使用许多具有负载平衡功能的实例，从而可以水平扩展聊天系统。它可能专用于区域或仅用于单个集群系统（我相信它在区域内是专用的，但仍然在区域内集群）。您也可以拥有硬件和网络可以处理的尽可能多的连接，但不是 64k。因为 64k（实际上少于那个）是关于绑定套接字（服务器套接字，但不是客户端套接字）。

如果是 google 并基于支持的浏览器，他们肯定会使用混合技术来交流选择基于浏览器支持的最强大的技术。这可以是长轮询、套接字，甚至是最古老的一种：简单的 ajax。

例如 facebook 聊天也是基于 erlang 的。并且使用 erlang 有很多例子有超过百万个连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:39:49.800

我不知道谷歌如何处理这个问题，他们可能不会告诉我们。但是，今天你可以处理 http 流、websockets 或长轮询来构建这样的应用程序。给你一个例子[Atmosphere 框架](https://github.com/Atmosphere/atmosphere)

是构建“实时”、高效和可扩展的 Web 应用程序的工具。

# android - android中的Html下拉列表

> ID：10228082
> 
> 赞同：1
> 
> 时间：2012-04-19T12:28:32.503
> 
> 标签：android, html, webview

我在我的应用程序中使用 PHP Web 服务，我的应用程序中有一个下拉框，它来自 PHP 端。我使用网络视图打开下拉框。当我在三星 Galaxy 平板电脑中选择下拉菜单时，它会打开并显示列表，但是当我尝试在手机 2.2 版或 2.1 版中打开时，它会导致应用程序崩溃并给我类似以下错误：

```
04-19 17:57:52.822: ERROR/AndroidRuntime(551): Uncaught handler: thread main exiting due to uncaught exception
04-19 17:57:52.832: ERROR/AndroidRuntime(551): android.view.WindowManager$BadTokenException: Unable to add window -- token android.app.LocalActivityManager$LocalActivityRecord@44c1bc50 is not valid; is your activity running?
04-19 17:57:52.832: ERROR/AndroidRuntime(551):     at android.view.ViewRoot.setView(ViewRoot.java:468)
04-19 17:57:52.832: ERROR/AndroidRuntime(551):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
04-19 17:57:52.832: ERROR/AndroidRuntime(551):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
04-19 17:57:52.832: ERROR/AndroidRuntime(551):     at android.view.Window$LocalWindowManager.addView(Window.java:424)
04-19 17:57:52.832: ERROR/AndroidRuntime(551):     at android.app.Dialog.show(Dialog.java:239)
04-19 17:57:52.832: ERROR/AndroidRuntime(551):     at android.webkit.WebView$InvokeListBox.run(WebView.java:5793)
04-19 17:57:52.832: ERROR/AndroidRuntime(551):     at android.os.Handler.handleCallback(Handler.java:587)
04-19 17:57:52.832: ERROR/AndroidRuntime(551):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-19 17:57:52.832: ERROR/AndroidRuntime(551):     at android.os.Looper.loop(Looper.java:123)
04-19 17:57:52.832: ERROR/AndroidRuntime(551):     at android.app.ActivityThread.main(ActivityThread.java:4363)
04-19 17:57:52.832: ERROR/AndroidRuntime(551):     at java.lang.reflect.Method.invokeNative(Native Method)
04-19 17:57:52.832: ERROR/AndroidRuntime(551):     at java.lang.reflect.Method.invoke(Method.java:521)
04-19 17:57:52.832: ERROR/AndroidRuntime(551):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-19 17:57:52.832: ERROR/AndroidRuntime(551):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-19 17:57:52.832: ERROR/AndroidRuntime(551):     at dalvik.system.NativeStart.main(Native Method) 
```

# css - 行或 html 元素中的 css/js/php 圆角

> ID：10228083
> 
> 赞同：1
> 
> 时间：2012-04-19T12:28:35.647
> 
> 标签：css, rounded-corners

应该有一种方法可以使用几行代码在表格行或元素中创建圆角。（这似乎比使用图像的其他更复杂的方式更可取。）

```
#example1 {
-moz-border-radius: 15px;
border-radius: 15px;
} 
```

但是，作为一个 css/js 菜鸟，我不知道该怎么办。我可以将它放在元素内的样式标签中以进行舍入吗？是否将其放入 .css 文件中？我不希望这适用于所有行或表格单元格，只适用于一个。非常感谢正确的语法/用法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:37:01.343

您可以在容器的样式属性中执行此操作：

```
<div style="-moz-border-radius: 15px; border-radius: 15px;">....</div> 
```

或在您的 css 文件中：

```
.class1 { 
    -moz-border-radius: 15px; 
    border-radius: 15px; 
}  

//and add it to your container:
<div class="class1">....</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:43:48.317

据我所知，这不是 IE 8 或 bellow 友好的，尽管在 Chrome、Safari 和 Firefox（等）中它可以工作。

如果您只打算使用一次，请将其直接放入您的容器中。

```
<div style="-moz-border-radius: 15px; border-radius: 15px;"> Content here </div> 
```

如果您要在页面上多次使用它，我建议将它放在页面顶部的头部（或样式表文件中）：

```
<style type="text/css">
    .roundedcorners { 
        -moz-border-radius: 15px; 
        border-radius: 15px; 
    }  
</style> 
```

并在容器中放入

```
<div class="roundedcorners"> Content here </div> 
```

这是一个有用的网站，可帮助您在表格中使用它：[http ://www.red-team-design.com/practical-css3-tables-with-rounded-corners](http://www.red-team-design.com/practical-css3-tables-with-rounded-corners)

# c++ - 究竟什么是动态内存？

> ID：10228090
> 
> 赞同：-4
> 
> 时间：2012-04-19T12:28:53.833
> 
> 标签：c++

> **可能重复：**
> [动态内存和“普通”内存之间的差异](https://stackoverflow.com/questions/1021138/differences-between-dynamic-memory-and-ordinary-memory)

我正在阅读 C++ 教程，但我不明白为什么我需要声明动态内存，这就是教程所说的：

> 到目前为止，在我们所有的程序中，我们只有为变量声明的可用内存，所有变量的大小在程序执行之前在源代码中确定。

然后它说我们必须使用 new 和 delete 运算符来使用动态内存。但是，我似乎在声明一个指针时使用了动态内存，例如 char* p，我没有为其指定字符数组的长度。事实上，我认为当你使用指针时，你总是在使用动态内存。这不是真的吗？我只是看不出使用 new 运算符声明变量与不声明变量之间的区别。我真的不明白什么是动态内存。谁能给我解释一下？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T12:40:09.330

> 我认为当你使用指针时，你总是在使用动态内存。这不是真的吗？

不，这不是真的，例如

```
int i;
int *p = &i; // uses a pointer to static memory, no dynamic memory. 
```

> 但是，我似乎在声明一个指针时使用了动态内存，例如 char* p，我没有为其指定字符数组的长度

```
char[100] string;
char* p = &(string[0]);  // Same as above, no dynamic memory. 
```

当您无法判断数据结构需要多大时，您需要动态内存。

假设您必须从文件中读取一些整数并将它们存储在内存中。你不知道你需要多少个整数。你可以选择一个 100 的数字，但是如果有 101，那么你的程序就会中断。你可以选择 100,000，希望这已经足够了，但是如果文件中只有 10，那么它会浪费资源，同样，如果文件中有 100,001 个整数，它就会中断文件。

在这种情况下，您的程序可以遍历文件，计算整数的数量，然后*动态*创建正确大小的数组。然后您再次传递文件，将整数读取到新数组中。

**Static v 的动态内存**
静态内存是静态的，因为程序一旦编译就无法更改，它是静态的。您在函数中声明的变量以及在类/结构上声明的成员是静态的。当每个方法被调用时，编译器会准确计算它需要多少个。
动态内存是一个内存“池”，可以在运行时按需供您的程序使用。编译器只知道它需要分配一些（可能是未知的）内存量，并将该内存释放回动态内存池。

希望这可以帮助。

*PS是的，有更有效的方法可以将未知数量的项目放入内存，但这是最简单的解释*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T12:36:18.360

当你有：

```
char* p; 
```

p 是指向 char 类型指针的变量， p 存储在堆栈中，您还没有分配任何动态内存。

但是当你这样做时：

```
p = new char[100]; 
```

您已经分配了一部分大小为 100*sizeof(char) 的动态内存（堆）。

您负责释放堆上分配的内存：

```
delete[] p; 
```

您不需要从堆栈中清除变量 - 它们将在变量超出范围后自动删除。在此示例中，`p`当超出其范围时，将从堆栈中删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T12:32:11.317

> 事实上，我认为当你使用指针时，你总是在使用动态内存。这不是真的吗？

不，这是一个指向堆栈分配（“自动”）内存的指针：

```
{
    int i;
    int *p = &i;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T12:34:35.277

动态内存是程序员必须明确请求的内存，而不是在堆栈上自动分配。

动态内存有许多优点，例如在堆栈帧（函数调用）之间保持持久性，并且可以具有不同的大小。

在堆栈上，数组具有一定的大小：

```
int ar[5]; 
```

但是，如果你有 10 个元素，那么你不能这样做，解决方案是动态分配内存；

```
size_t sz;
std::cin >> sz;
int *i_p=new int[sz]; 
```

也就是说，必须释放所有动态分配的东西（在 C++ 中使用删除）

```
delete i_p; 
```

但是，通常最好在可能的情况下对动态数组使用包装器，例如 std::vector

```
size_t sz;
std::cin >> sz;
std::vector<int> vect(sz); 
```

这将自动管理内存并为阵列提供有用的接口。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-19T12:34:35.360

假设您想从用户那里读取未知数量的整数。例如，您可以声明`int numbers[100]`，询问用户有多少个数字（假设这是存储在变量中`n`），如果他输入的数字大于 100，您将别无选择，只能报告错误。或者，您可以为所有数字编写`int *numbers = new int[n]`并分配足够的空间。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-19T12:37:16.120

c++中的动态内存是使用new操作符在操作系统堆中分配的内存。当您需要分配太大而无法在堆栈中分配的对象时，或者当您有一个多线程环境并且需要在不同线程之间共享在其中一个线程中分配的内存时，您需要动态内存。指针并不意味着您使用动态内存指针也可以包含堆栈中与对象相关的堆栈地址。

# c++ - C++，检查软件是否在 32 位或 64 位系统上运行的函数

> ID：10228103
> 
> 赞同：0
> 
> 时间：2012-04-19T12:29:39.187
> 
> 标签：c++, visual-studio-2008, 32bit-64bit, 32-bit

正如我在许多问题中解释的那样，我正在尝试将软件从 32 位系统迁移到 64 位系统。我对[malloc() 函数有一些问题](https://stackoverflow.com/questions/10172436/c-error-on-ms-visual-studio-windows-has-triggered-a-breakpoint-in-javaw-exe/10227939#10227939)，但现在我通过更正一个参数来解决它。

在我的那部分代码中，如果我在 32 位系统上运行，我可以使用：

> (int**) malloc (const * sizeof(int))

但是，在 64 位系统上，我必须使用：

> (int**) malloc (const * sizeof(int64_t))

我想用**if()**条件管理这些十字路口，所以我需要一个以这种方式运行的**布尔 isIt64system()**函数：

> if(isIt64system()) then *[64 位代码]*
> 
> 其他*[32 位代码]*

这个函数在 C++ 中是否存在？是否有任何功能可以告诉我软件是在 32 位系统还是 64 位系统上运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T13:25:27.890

与其编写两个依赖于大小的分支，不如编写一个正确的、可移植的代码路径。在你的情况下：

```
(int**)malloc(count*sizeof(int*)); 
```

无论`int*`系统上的 sizeof 大小如何，这都能正常工作。

* * *

后记：正如您从这个问题的字面答案中看到的那样，您最好不要使用 if：

```
if(sizeof(int*) == sizeof(int))
    x = (int**)malloc(count*sizeof(int));
else if (sizeof(int*) == sizeof(int64_t))
    x = (int**)malloc(count*sizeof(int64_t)); 
```

希望你能看到代码是多么荒谬的冗余，以及它应该如何被一个结构良好的`malloc`调用替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:41:05.587

您的编译器将具有预处理器定义，可让您检查 32 位与 64 位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:31:40.773

最好的办法是使用这样的东西

```
#ifdef __LP64__
    <64bit code>
#else
    <32bit code>
#endif 
```

但是，如果您真的需要一个功能，那么这应该可以工作。

```
bool is64bit() {
    if (sizeof(int*) == 4) {
        return false;
    }
    return true;
} 
```

# jquery - 如何在 td 有类的地方使用 .each 方法@table td 并将文本放入其中

> ID：10228107
> 
> 赞同：0
> 
> 时间：2012-04-19T12:29:50.897
> 
> 标签：jquery, jquery-ui, jquery-selectors

我想合并所有 td where classname='blahblah'

这是我的 HTML 代码：

```
<table><tbody><tr>
            <th>Single Room</th>
            <th>101</th>
            <td class="blahblah"></td>
            <td class="blahblah"></td>
            <td class="blahblah"></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
        <th>Single Room</th>
            <th>102</th>
            <td class="blahblah"></td>
            <td class="blahblah"></td>
            <td class="blahblah"></td>
            <td></td>
            <td></td>
        </tr></tbody></table> 
```

这是我用来将文本放在一个 td 中的 jquery。

请让我知道我该怎么做 $("tbody").find("tr").each(function() {

```
 //merge and put the text to All merged TD's
                $(this).find('td.blahblah').text('hi'); 

             }); 
```

请帮助我如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:36:33.483

假设我已经理解您要正确执行的操作，您可以获取所有`td.blahblah`元素，删除除第一个（请参阅[`not`](http://api.jquery.com/not/)和）之外的所有元素[`:first`](http://api.jquery.com/first-selector/)，[`remove`](http://api.jquery.com/remove/)然后将文本设置在左侧：

```
$("tbody").find("tr").each(function() {
    //merge and put the text to All merged TD's
    $(this).find('td.blahblah').not(":first").remove().end().text('hi');
});​ 
```

这是一个[工作示例](http://jsfiddle.net/s47kE/1/)。

# c++ - 两个动态库，一个在 C 中，另一个在 C++ 中，相互使用

> ID：10228110
> 
> 赞同：1
> 
> 时间：2012-04-19T12:29:57.657
> 
> 标签：c++, c, shared-libraries

海，

我有一个动态库加载器，它是用 C++ 编写的，但提供了与 C 兼容的 API。

该加载器可以加载以任何编程语言编写的模块。它们排列在一个命名列表中，可以请求其他模块的函数指针。现在，一个用 C 编写并用 C 编译器编译的模块获取任何其他模块的*函数指针，这些模块是用 C++ 编写和编译的。*

所以我的问题是：函数指针交叉编译器是否有效？我想我听说过`__cdecl`一次，很久以前。我使用 Linux 64 位。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:36:50.877

```
// my C++ code ...
extern "C" {
  void thisFunctionWillBeCallableFromC();
}

void butThisOneMayNot();

struct S
{
    void thisDefinitelyWontBeCallableFromC(std::map<int, S>);
}; 
```

C++ 代码应声明具有`extern "C"`可从 C 调用的链接的接口。

还是您的意思是由不同编译器生成的 C++ 代码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:37:50.923

函数指针在 C 和 C++ 之间是兼容的。

唯一的限制是，在 C++ 中使用时，您必须使用外部“C”链接声明 C 函数：

```
extern "C"
{
     int foo();
} 
```

# jquery - 使用jquery刷新浏览器时如何隐藏链接

> ID：10228115
> 
> 赞同：0
> 
> 时间：2012-04-19T12:30:22.320
> 
> 标签：jquery

我有一个问题，当浏览器刷新链接时，如何删除链接？这是我的代码。

```
 //post cheer!!!!!!!
    $('.comment_likes').live("click",function(e){
        var id          = $(this).attr('rel');
        var url         = $(this).attr('href');
        var thisClass   = this;

        if(like2 == true){
        like2 = false;   

            setTimeout(function(){
                $.post(url,function(data){
                    $(thisClass).fadeOut('slow').fadeIn();
                    $(thisClass).removeClass('remove');
                    $(thisClass).addClass('add');

                    $('#boo_click_'+id).hide();
                    like2 = true;
                });       
            },500);
        }
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:36:58.973

如果您的页面正在重新加载，您将丢失在刷新/重新加载时设置的任何客户端信息，因此您需要在单击链接时设置会话变量或 cookie，如果会话变量在头部设置一个 javascript 变量或 cookie 存在，并在页面加载时检查该变量。如果存在，要么不显示链接，要么通过 jquery 删除链接（最好的选择是在服务器端有条件代码来确定是否应该显示链接 - 无需在页面上添加不必要的 DOM 操作加载）。

您的另一个选择是通过 AJAX 刷新内容，而不是链接，这实际上可能更快。

# php - Doctrine2，映射“继承”表

> ID：10228116
> 
> 赞同：1
> 
> 时间：2012-04-19T12:30:23.327
> 
> 标签：php, mysql, orm, doctrine-orm, data-mapping

正如这里所指出的：[Doctrine 2.1 - 将实体映射到多个表](https://stackoverflow.com/questions/7198271/doctrine-2-1-map-entity-to-multiple-tables)Doctrine2 不允许将一个对象映射到多个表。

我目前有一个类似于此的 Mysql 数据库设置：

```
base_entity: id, some_basic_data_columns
state: id, state, entity_id (FK to base_entity.id), start_time, end_time, ...

entity_one: id (FK to base_entity.id), some_specific_data
entity_two: id (FK to base_entity.id), some_specific_data
and so on... 
```

在某种程度上，entity_x 是“扩展”base_entity，所有这些实体都可以有多个状态。要拥有正确的外键，我必须要么有单独的状态表（我不想这样做，因为它们在结构上是相同的），或者这样做。

基础实体本身是无用的，id 甚至可以归结为 id 字段，以允许与每个子实体连接到多个状态。

我不需要 BaseEntity 类，但我确实需要每个子实体都有一个 getStates() 方法。当然，我实际上可能有一个抽象实体类，但具体实体会扩展它，而不是像我将它们映射为映射其他一对一关系时那样将其作为属性

由于 Doctrine 不允许我将 EntityOne 映射到 entity_one 和 base_entity 表，我不得不问：

1.  这是糟糕的设计吗？我是否忽略了其他一些优雅地解决这个问题的方法？我知道其他 DMBS 具有继承性，但例如 PostgreSql 仍然不允许我加入 base_entity 来说明是否不存在孩子的物理 base_entity。

2.  我可以在代码方面做这样的事情：

    ```
    class EntityOne {
        // baseEntity as a property
        private $_baseEntity;

        // private getter for the base table
        private getBaseEntity();

        // and getters like this for properties in the base table
        public getStates(){ 
             return $this->getBaseEntity()->getStates();
        }
    } 
    ```

    这样，实体对于外部世界的行为就像单个实体（不是从基类和子类组合），但它仍然需要我编写一个单独的 BaseEntity 类和所有配置信息以将其连接到其他实体类

基本上，我要问的是：这是一个 Db 设计问题，我从一开始就完全错了（如果我这样做了，这是“最好”的方法），还是这是一个代码问题，我应该用代码解决它（如果是这样，我在 2\. 中的方法是好的，还是有更好的方法来处理这个问题），是否有允许多个表映射的 ORM？

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T21:16:29.340

您可以使用 Class Table Inheritance（[请参阅有关该的 Doctrine 文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/inheritance-mapping.html#class-table-inheritance)），定义 BaseEntity 实体类，并创建 EntityOne 和 EntityTwo 扩展它。您可以将 BaseEntity 类和 State 实体类之间的关系定义为一对多关联 - 如果我正确理解您想要的，在 BaseEntity 类中提供所需的 getState() 方法。

像这样的东西：

```
/**
 * @Entity
 * @Table(name="base_entity")
 * @InheritanceType("JOINED")
 * @DiscriminatorColumn(name="entity_type", type="string")
 * @DiscriminatorMap({"entity_one"="EntityOne", "entity_two"="EntityTwo"})
 */
class BaseEntity {

    /**
     * @Id
     * @Column(type="integer")
     */
    protected $id;

    /**
     * @OneToMany(targetEntity="State", mappedBy="entity)
     **/
    protected $states;

    public function getStates() {
        return $this->states;
    }

    ...
}

/**
 * @Entity
 * @Table(name="entity_one")
 */
class EntityOne extends BaseEntity {

    ...
}

/**
 * @Entity
 * @Table(name="entity_two")
 */
class EntityTwo extends BaseEntity {

    ...
}

/**
 * @Entity
 * @Table(name="state")
 */
class State {

    /**
     * @ManyToOne(targetEntity="BaseEntity", inversedBy="states")
     * @JoinColum(name="entity_id", referencedColumnName="id")
     */
    protected $entity;

    public function getEntity() {
        return $this->entity;
    }

    ...
} 
```

# c# - 订购 1,2,10,11 而不是 1,10,11,2

> ID：10228117
> 
> 赞同：-2
> 
> 时间：2012-04-19T12:30:24.833
> 
> 标签：c#, .net

我的文件夹中有文件，其名称如下：

```
"C:\\Users\\John\\Documents\\333\\12.html" 
```

如何对它们进行排序以使 2.html 出现在 10.html 之前？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:34:56.540

对文件进行排序时，将字符串解析为数字。

例子：

```
string[] files = {
  "2.html",
  "10.html",
  "1.html"
};

files =
  files.OrderBy(s => Int32.Parse(s.Substring(0, s.IndexOf('.'))))
  .ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T12:35:22.250

```
 Directory
      .GetFiles()
      .OrderBy(f => int.Parse(Path.GetFileNameWithoutExtension(f)) ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:32:49.800

看看这个帖子——

[http://www.codeproject.com/Articles/11016/Numeric-String-Sort-in-C](http://www.codeproject.com/Articles/11016/Numeric-String-Sort-in-C)

```
string[] files = System.IO.Directory.GetFiles();

NumericComparer ns = new NumericComparer();
Array.Sort(files, ns);

// files will now sorted in the numeric order
// we can do the same for directories

string[] dirs = System.IO.Directory.GetDirectories();
ns = new NumericComparer(); // new object
Array.Sort(dirs, ns);

public class NumericComparer : IComparer
    {
        public NumericComparer()
        {}

        public int Compare(object x, object y)
        {
            if((x is string) && (y is string))
            {
                return StringLogicalComparer.Compare((string)x, (string)y);
            }
            return -1;
        }
    }//EOC 
```

# iphone - 禁用 iCloud 时是否可以使用 NSMetadataQuery？

> ID：10228118
> 
> 赞同：3
> 
> 时间：2012-04-19T12:30:37.140
> 
> 标签：iphone, ios, ios5, icloud

当我禁用 iCloud 时，我似乎无法让 NSMetadataQuery 工作。我输入了一个有效的搜索 URL，但它从未注册为已完成：

```
//Check for iCloud
NSURL *ubiq = [[NSFileManager defaultManager] 
               URLForUbiquityContainerIdentifier:nil];
if (ubiq) {
    NSLog(@"iCloud access at %@", ubiq);
    self.query = [[[NSMetadataQuery alloc] init] autorelease];
    [self.query setSearchScopes:[NSArray arrayWithObject:
                                 NSMetadataQueryUbiquitousDataScope]];
    _isiCloudEnabled = YES;
} else {
    NSLog(@"No iCloud access");
    //Get the doc directory
    NSString *path = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    self.query = [[[NSMetadataQuery alloc] init] autorelease];
    [self.query setSearchScopes:[NSArray arrayWithObjects:
                                 [NSURL fileURLWithPath:path],nil]];
    _isiCloudEnabled = NO;
}

NSPredicate *pred = [NSPredicate predicateWithFormat: 
                     @"%K like %@", NSMetadataItemFSNameKey, @"*.adoc"];
[self.query setPredicate:pred];
[[NSNotificationCenter defaultCenter] 
 addObserver:self 
 selector:@selector(queryDidFinishGathering:) 
 name:NSMetadataQueryDidFinishGatheringNotification 
 object:self.query];

[self.query startQuery]; 
```

queryDidFinishGathering：永远不会被调用。启用 iCloud 后，它总是会被调用。知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-08T11:26:08.273

我遇到了同样的问题，但我在项目中使用了 ARC。这可以通过将 ivar 设置为 self.query 变量来解决。

```
@property (nonatomic, strong) NSMetadataQuery *query; 
```

我认为对于您的问题，因为您没有使用 ARC，您可能需要执行以下操作：

1.  完成工作后删除自动释放和手动释放。
2.  你需要设置属性

    ```
    @property (nonatomic, retain) NSMetadataQuery *query; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:36:10.660

从 iOS5 开始，`NSMetadataQuery`的搜索范围只能设置为普遍存在的事物 (`NSMetadataQueryUbiquitousDocumentsScope`和`NSMetadataQueryUbiquitousDataScope`)，因此在禁用 iCloud 的情况下使用它是无用的。

正如您可能猜测的`queryDidFinishGathering`那样，永远不会调用的原因是因为您的查询范围，尚不支持本地目录（但可能不会引发异常或错误:)）

在我看来 NSMetadataQuery 类并没有完全移植到 iOS，在 OSX 中可以设置更多的范围，可以设置更多种类`NSPredicate`，`NSSortDescriptors`工作等等。

# null - Paradox 如何管理 null 和空值？

> ID：10228123
> 
> 赞同：1
> 
> 时间：2012-04-19T12:30:53.127
> 
> 标签：null, firebird, string, bde, paradox

我通过 Borland 数据库引擎 (BDE) 使用 Paradox 表。

我无法实现在字符串字段（Paradox 数据类型“A”）中处理**null**和**空字符串值的方式。**

我的具体问题是如何确定字段值是 null 还是空字符串。在数据库桌面工具中，它们似乎都是空字符串。

我需要这个，因为我正在将数据（使用 Database Desktop 以及以编程方式）迁移到 Firebird DB，并且**似乎是空字符串的字段值都作为空值复制到 Firebird** ...甚至属于索引的字段！**如何区分**真正的 null 和空字符串？它取决于 Paradox 还是 BDE？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T04:40:12.327

## BLANK 作为 NULL 被认为是有害的

如您所知，现代数据库实现包括“NULL”的概念，它是一个永远不会匹配任何其他值的值，即使是另一个 NULL。

BDE 及其祖先 Paradox 引擎和 Paradox for DOS*不包括 NULL 的概念*。BDE 表中的所有数据类型都不允许像 NULL 这样的排除值。

BDE*确实*包含 BLANK 的概念，但这只是某些类型的特殊带内值。BLANK 匹配 BLANK，仅此而已。在数字字段中，BLANK 与 0 可区分，但在 alpha 字段中，BLANK 与零长度字符串相同。

显然，在过去的某个时候，有人负责创建一个实用程序来从 BDE 表导入 SQL 数据库，但他并没有完全胜任。他可能无法想象没有 NULL 的数据库，因此他猜测 BLANK 与 NULL 相同。从那以后，其他人都只是跟随他的领导。

将 BDE BLANK 转换为 SQL NULL 是错误的。这样做会改变数据库的体系结构，并破坏任何相关应用程序的体系结构。从 BDE 表导入的数据绝不应包含 NULL。

要么编写自己的导入程序，要么使用内置导入，然后仔细对导入的数据进行后处理，将所有 NULL 转换为其他值。

BLANK alpha 值必须转换为长度为零的 CHAR 或 VARCHAR 值。

BLANK 数值必须转换为与其自身匹配的选定带内标志值。您可能必须保留一个特殊值来表示 BDE BLANK，除非可以使 NaN 或其他类似的值起作用。在许多情况下，根据应用程序体系结构，您将能够将 BDE BLANK 转换为 SQL 0。

当然，如果您的 SQL 实现允许一个与自身匹配并且可与 NULL 区分开来的 BLANK 数值，那么您的问题就会减少，因为您的数据库至少与 BDE 一样有能力。不过，您可能仍然无法使用内置的导入实用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:04:03.410

SQL 示例：

```
select customer_id from customer
where (customer_addr is null) -- string null
   or (customer_addr = '')    -- string is empty 
```

德尔福示例：

```
if (query1customer_addr.AsVariant = NULL) // string null
  or (query1customer_addr.AsString = '')  // string is empty
then ShowMessage('Null or Empty'); 
```

# c++ - Adobe PDF Reader ActiveX 控件 64 位

> ID：10228128
> 
> 赞同：1
> 
> 时间：2012-04-19T12:31:10.690
> 
> 标签：c++, mfc, activex

我在 MFC 应用程序中遇到了 Adob​​e Reader ActiveX 控件的问题。我正在做一个大项目，现在重构为 64 位。并且使用了这个只有 32 位的 ActiveX 控件。所以它不起作用，它崩溃了。

我用谷歌搜索了很多，但我没有发现任何有用的东西。难道你不知道，如果有什么办法，如何在 64 位应用程序中运行这个控件，或者是否有其他选择？

感谢您的任何建议。

# php - 我得到一个未定义的变量

> ID：10228131
> 
> 赞同：0
> 
> 时间：2012-04-19T12:31:37.220
> 
> 标签：php, javascript, jquery, ajax

我正在尝试从 php 脚本上传文件 (imageupload.php) 的页面中检索文件名，并且我想在 javascript 函数 (QandATable.php) 中的另一个页面中显示它。但我不知道该怎么做

我将向您展示所有相关代码，以便您可以遵循它，以便您能够理解正在发生的事情。

更新：下面我将向您展示如何上传文件的步骤。下面的代码成功上传了文件。

下面是表格（QandATable.php）；

```
var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='return imageClickHandler(this);' class='imageuploadform' >" + 
<label>Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><label class='imagelbl'>" + 
"<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" + 
"</p><ul class='listImage' align='left'></ul>" +
"<iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px;solid;#fff;'></iframe></form>"); 
```

在用户提交表单的同一页面上，它会进入下面的函数，它会检查验证，然后当验证清楚时，它会进入`startImageUpload()`函数：

```
 function imageClickHandler(imageuploadform){ 
      if(imageValidation(imageuploadform)){ 
          return startImageUpload(imageuploadform); 
      } 
      return false;
  } 
```

如果没有验证，那么它将进入隐藏文件输入的下面的 JS 函数 (QandATable.php)，并将表单提交到文件上传发生的 imageupload.php。上传文件后，它会回调 stopImageUpload() 函数（QandAtable.php），在该函数中它将显示有关文件是否已上传的消息，这就是我希望来自服务器的文件名的位置附加。

下面是 startImageUpload() 函数：

```
var sourceImageForm;

function startImageUpload(imageuploadform){

$(imageuploadform).find('.fileImage').css('visibility','hidden');
sourceImageForm = imageuploadform;

return true;
        } 
```

下面是上传文件 (imageupload.php) 的 php 脚本：

```
 <?php

    session_start();

    $result = 0;

    if( file_exists("ImageFiles/".$_FILES['fileImage']['name'])) {
        $parts = explode(".",$_FILES['fileImage']['name']);
        $ext = array_pop($parts);
        $base = implode(".",$parts);
        $n = 2;

        while( file_exists("ImageFiles/".$base."_".$n.".".$ext)) $n++;
        $_FILES['fileImage']['name'] = $base."_".$n.".".$ext;

        move_uploaded_file($_FILES["fileImage"]["tmp_name"],
        "ImageFiles/" . $_FILES["fileImage"]["name"]);
        $result = 1;

    }
        else
          {
          move_uploaded_file($_FILES["fileImage"]["tmp_name"],
          "ImageFiles/" . $_FILES["fileImage"]["name"]);
          $result = 1;     

          }

    ?>

    <script language="javascript" type="text/javascript">
window.top.window.stopImageUpload(<?php echo $result;?>);
</script> 
```

最后，当上传完成时，它会返回到 stopUploadImage() 函数 (QandATable.php) 以显示有关文件是否成功上传的消息。这也是我希望从服务器上传的文件名被附加的地方。

```
 function stopImageUpload(success){

          var result = '';
          if (success == 1){
result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';
             $('.listImage').append('<br/>');
          }
          else {
result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
          }

    return true;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:45:57.933

你`$_POST`不会包含`fileimagename`. 相反，您的表单输入被称为`fileImage`. 改用它：

```
// Check $_POST for fileImage, which was the form input name
if (isset($_POST['fileImage'])) {
  $_SESSION['fileimagename'] =  $_FILES['fileImage']['name'];
  // Proceed with the file upload and save.
}
else {
 // oops, can't proceed
} 
```

在 JavaScript 页面上，在访问值时进行一些错误检查：

```
<?php
session_start();
if (isset($_SESSION['fileimagename'])) {
  $fileimagename = $_SESSION['fileimagename'];
  // output JS code...
?>
 <script type="text/javascript">Your JS code here...</script>
<?php
}
else {
  // No filename - can't proceed with JavaScript code
  // Display an eror or a message with instructions for user...
} 
```

**注意：**不要使用用户提供的文件名来存储图像！它使您面临目录遍历攻击，并使用户可以在 Web 服务器具有写入权限的文件系统上的任何位置写入文件。

```
// This is unsafe!
move_uploaded_file($_FILES["fileImage"]["tmp_name"], "ImageFiles/" . $_FILES["fileImage"]["name"]); 
```

相反，通常将值`$_FILES['fileImage']['name']`与实际文件的标识符值一起存储在数据库中，并使用标识符将其存储在磁盘上。

```
$info = pathinfo($_FILES['fileImage']['name']);
// Get the original extension
$filext = $info['extension'];
// Make a unique filename and add the extension
$stored_filename = uniqid() . $filext;

// Use that to store the file on disk
move_uploaded_file($_FILES["fileImage"]["tmp_name"], $stored_filename);

// Now store BOTH $_FILES['fileImage']['name'] and $stored_filename in your database together
// The original user-supplied filename can be used for display, but isn't used on disk 
```

# php - Ajax 片段元标记 - Googlebot 未读取页面内容

> ID：10228133
> 
> 赞同：9
> 
> 时间：2012-04-19T12:31:48.790
> 
> 标签：php, ajax, search-engine, fragment, meta-tags

我读过一篇文章，教如何让搜索引擎机器人可以抓取我的 ajax 页面，当我使用片段 url #! 时它工作得非常好，但现在我正在尝试创建一个没有片段的“主页”使用下面的元标记：

`<meta name="fragment" content="!" />`

我正在使用下面的代码片段来了解 googlebot 发生了什么。

```
<?php
if( isset( $_GET['_escaped_fragment_'] ) )
{
    echo "Crawler is gonna read that page!";
}
?> 
```

事实是机器人在 _escaped_fragment_ 语句中没有返回任何值。

这是该页面的链接：[http ://www.linkerama.com/novo/](http://www.linkerama.com/novo/)

当我使用浏览器时，这个返回一个值：[http ://www.linkerama.com/novo/?_escaped_fragment_=](http://www.linkerama.com/novo/?_escaped_fragment_=)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-17T22:01:03.340

你如何测试这个？如果您使用的是“Fetch as Google”，请阅读下文。

John Mueller（谷歌员工）从[http://productforums.google.com/forum/#!category-topic/webmasters/crawling-indexing--ranking/bZgWCJTnl08%5B1-25%5D](http://productforums.google.com/forum/#!category-topic/webmasters/crawling-indexing--ranking/bZgWCJTnl08%5B1-25%5D)引用

> 查看您博客的主页，要记住的一件事是 Fetch as Googlebot 功能不会解析它获取的内容。因此，当您提交 toddmoyer.net/blog/ 时，它会获取该 URL。获取 URL 后，它不会解析它以检查“片段”元标记，它只是将它返回给您。但是，如果您获取 toddmoyer.net/blog/#! ，然后它应该重写 URL 并获取 URL toddmoyer.net/blog/?_escaped_fragment_= 。
> 
> 当我们抓取您的网页并将其编入索引时，我们会注意到元标记并采取相应措施。它只是 Fetch as Googlebot 功能，它不检查元标记，而只是返回原始内容。

希望有帮助。

# java - 管道 PrintWriter->CipherOutputStream->FileOutputStream

> ID：10228138
> 
> 赞同：0
> 
> 时间：2012-04-19T12:32:02.197
> 
> 标签：java, encryption, aes

这是我的代码：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.PrintWriter;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;
import java.util.Date;
import javax.crypto.Cipher;
import javax.crypto.CipherOutputStream;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.spec.SecretKeySpec;

public class EncryptedLogger {

private static Date lastLogTime = null;
private static EncryptedLogger instance = null;
private static FileOutputStream fos = null;
private static CipherOutputStream cos = null;
private static PrintWriter writer = null;
private Cipher cipher;
byte[] Key ={(byte) 0x12,(byte) 0x34,0x55,(byte) 0x66,0x67,(byte)0x88,(byte)0x90,0x12,(byte) 0x23,0x45,0x67,(byte)0x89,0x12,0x33,(byte) 0x55,0x74};

public static EncryptedLogger getInstance(){
    if (instance==null) {
        instance = new EncryptedLogger();
    }
    return instance;
}

private EncryptedLogger(){

    class SQLShutdownHook extends Thread{
        @Override
        public void run() {
            EncryptedLogger.close();
            super.run();
        }
    }

    SecretKeySpec sks = new SecretKeySpec(Key,"AES");
    try {
        cipher = Cipher.getInstance("AES/ECB/NoPadding");
        cipher.init(Cipher.ENCRYPT_MODE,sks);

        fos = new FileOutputStream(new File("log.txt"),true);
    } catch (InvalidKeyException e) {
        e.printStackTrace();
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    } catch (NoSuchPaddingException e) {
        e.printStackTrace();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
    cos = new CipherOutputStream(fos, cipher);
    writer = new PrintWriter(cos);

    SQLShutdownHook hook = new SQLShutdownHook();
    Runtime.getRuntime().addShutdownHook(hook);
}

public synchronized void logSQL(String s){
    if ((lastLogTime==null)||((new Date().getTime() -lastLogTime.getTime())>1000)){
        lastLogTime = new Date();
        writer.printf("-- %1$tm-%1$te-%1$tY %1$tH-%1$tM-%1$tS\n%2$s\n",new Date(),s);   
    }
    else{
        writer.println(s);
    }
}

public synchronized void logComment(String s){
    writer.printf("-- %1$tm-%1$te-%1$tY %1$tH-%1$tM-%1$tS: %2$s\n",new Date(),s);
}

public static void close(){
    writer.flush();
    writer.close();
}

public static void main(String[] args) throws InterruptedException {
    EncryptedLogger.getInstance().logSQL("1");
    EncryptedLogger.getInstance().logSQL("22");
    EncryptedLogger.getInstance().logSQL("33333");
    EncryptedLogger.getInstance().logSQL("4900");
    EncryptedLogger.getInstance().logSQL("5");
    EncryptedLogger.getInstance().logSQL("66666");
    EncryptedLogger.getInstance().logSQL("Some test logging statement");
    EncryptedLogger.getInstance().logSQL("AAAAAAAAAAAAAAAAAAAAAAAAAA");
    EncryptedLogger.getInstance().logComment("here is test commentary");
}

} 
```

如您所见，我正在尝试通过 PrintWriter->CipherOutputStream->FileOutputStream 链对文本条目进行加密。但是当我解密结果文件时，缺少字节。我试图在 EncryptedLogger.close() 方法中刷新**cos**和**fos - 结果相同。**显然我错过了一些东西。怎么了？

**编辑**：这是我使用的解密代码。它不是我的，取自教程或其他东西......并且在使用类似加密时它工作正常。但是当使用我的代码时......

```
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import javax.crypto.Cipher;
import javax.crypto.CipherInputStream;
import javax.crypto.SecretKey;
import javax.crypto.spec.SecretKeySpec;

public class AESDecrypter
{
        Cipher dcipher;

        public AESDecrypter(SecretKey key)
        {

                try
                {
                        dcipher = Cipher.getInstance("AES");
                        dcipher.init(Cipher.DECRYPT_MODE, key);
                }
                catch (Exception e)
                {
                        e.printStackTrace();
                }
        }

        byte[] buf = new byte[1024];

        public void decrypt(InputStream in, OutputStream out)
        {
            System.out.println("decrypting");
            try
                {
                        in = new CipherInputStream(in, dcipher);
                        int numRead = 0;
                        while ((numRead = in.read(buf)) >= 0)
                        {
                                out.write(buf, 0, numRead);
                        }
                        out.close();
                }
                catch (java.io.IOException e)
                {
                }
        }

        public static void main(String args[])
        {
                try
                {
                        byte[] keystr ={(byte) 0x12,(byte) 0x34,0x55,(byte) 0x66,0x67,(byte)0x88,(byte)0x90,0x12,(byte) 0x23,0x45,0x67,(byte)0x89,0x12,0x33,(byte) 0x55,0x74};
                        SecretKeySpec sks = new SecretKeySpec(keystr,"AES");                        
                        AESDecrypter encrypter = new AESDecrypter(sks);
                        encrypter.decrypt(new FileInputStream("sqllogenc.log"),new FileOutputStream("sqllogdec.log"));
                }
                catch (Exception e)
                {
                        e.printStackTrace();
                }
        }
} 
```

**EDIT2**：当我直接写信给**fos**我得到这个输出：

```
-- 04-19-2012 16-17-56
1
22
33333
4900
5
66666 + delay starting 1100
Some test logging statement
AAAAAAAAAAAAAAAAAAAAAAAAAA
-- 04-19-2012 16-17-56: here is test commentary 
```

在使用**cos**编写和解密时：

```
-- 04-19-2012 16-22-13
1
22
33333
4900
5
66666 + delay starting 1100
Some test logging statement
AAAAAAAAAAAAAAAAAAAAAAAAAA
-- 04-19-2012 16-22-13: here 
```

如您所见，最后一行的一部分丢失了，包括换行符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:17:31.553

`AES/ECB/NoPadding`您应该在两侧使用相同的加密转换（例如）。另外，请注意，`NoPadding`模式不允许您传递任意大小的数据，因此您需要指定其他类型的填充。

所以，你需要在两边构造`Cipher`s 。`Cipher.getInstance("AES/ECB/PKCS5Padding")`

另外，请注意 rossum 关于使用`CBC`or`CTR`代替`ECB`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:29:39.667

好吧，AES 的块大小固定为 128 位。当您使用 AES/ECB/NoPadding 时，您有责任确保消息的大小是块大小的倍数。

可能不是，因此解密时获得的文本更少。

对于任意长度的文本，您应该使用 AES/ECB/NoPadding。

# javascript - 是否可以将对象或字符串列表作为参数发送到 javascript 函数？

> ID：10228139
> 
> 赞同：0
> 
> 时间：2012-04-19T12:32:03.017
> 
> 标签：javascript, asp.net

她是我的密码

```
foreach (var comboBox in this.m_storage.ColumnComboList)
{
    comboBox.OnClientSelectedIndexChanged = string.Format(
       "function(sender, args){{ComboColList(sender, args, '{0}', '{1}', '{2}');}}",
       comboBox.ID,
       comboBox.ClientID,
       list???);
} 
```

名单？？？是第三个参数，是一个字符串列表。当我在调试模式下检查参数时，我只能看到字符串方法。必须有一种方法可以将字符串列表发送到客户端并访问这些值。

# java - 如何使用 java 在 Windows 操作系统中检测工作站/系统屏幕锁定/解锁？

> ID：10228145
> 
> 赞同：5
> 
> 时间：2012-04-19T12:32:27.640
> 
> 标签：java, windows

我试图记下在 Windows 操作系统中工作的每个员工的工作站/系统屏幕锁定和解锁。我需要使用 JAVA 将这些记录存储在数据库中。我已经到处搜索并了解如何使用 JAVA 进行操作。在我搜索过的地方，我只得到了 VB 的代码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-05-25T08:34:19.273

您可以使用[JNA](https://github.com/twall/jna)在纯 Java 中执行此操作。将**jna.jar**和jna **-platform.jar**添加到您的项目中。在这个文件[com.sun.jna.platform.win32.Win32WindowDemo](https://github.com/twall/jna/blob/master/contrib/native_window_msg/src/com/sun/jna/platform/win32/Win32WindowDemo.java)中有一个锁定和解锁监听器的完整示例等等。这是来自 Win32WindowDemo 的必要代码：

```
public class WorkstationLockListening implements WindowProc
{

    /**
     * Instantiates a new win32 window test.
     */
    public WorkstationLockListening()
    {
        // define new window class
        final WString windowClass = new WString("MyWindowClass");
        final HMODULE hInst = Kernel32.INSTANCE.GetModuleHandle("");

        WNDCLASSEX wClass = new WNDCLASSEX();
        wClass.hInstance = hInst;
        wClass.lpfnWndProc = WorkstationLockListening.this;
        wClass.lpszClassName = windowClass;

        // register window class
        User32.INSTANCE.RegisterClassEx(wClass);
        getLastError();

        // create new window
        final HWND hWnd = User32.INSTANCE.CreateWindowEx(User32.WS_EX_TOPMOST, windowClass, "'TimeTracker hidden helper window to catch Windows events", 0, 0, 0, 0, 0, null, // WM_DEVICECHANGE contradicts parent=WinUser.HWND_MESSAGE
                null, hInst, null);

        getLastError();
        System.out.println("window sucessfully created! window hwnd: " + hWnd.getPointer().toString());

        Wtsapi32.INSTANCE.WTSRegisterSessionNotification(hWnd, Wtsapi32.NOTIFY_FOR_THIS_SESSION);

        MSG msg = new MSG();
        while (User32.INSTANCE.GetMessage(msg, hWnd, 0, 0) != 0)
        {
            User32.INSTANCE.TranslateMessage(msg);
            User32.INSTANCE.DispatchMessage(msg);
        }

            /// This code is to clean at the end. You can attach it to your custom application shutdown listener
            Wtsapi32.INSTANCE.WTSUnRegisterSessionNotification(hWnd);
            User32.INSTANCE.UnregisterClass(windowClass, hInst);
            User32.INSTANCE.DestroyWindow(hWnd);
            System.out.println("program exit!");
    }

    /*
     * (non-Javadoc)
     * 
     * @see com.sun.jna.platform.win32.User32.WindowProc#callback(com.sun.jna.platform .win32.WinDef.HWND, int, com.sun.jna.platform.win32.WinDef.WPARAM, com.sun.jna.platform.win32.WinDef.LPARAM)
     */
    public LRESULT callback(HWND hwnd, int uMsg, WPARAM wParam, LPARAM lParam)
    {
        switch (uMsg)
        {
            case WinUser.WM_DESTROY:
            {
                User32.INSTANCE.PostQuitMessage(0);
                return new LRESULT(0);
            }
            case WinUser.WM_SESSION_CHANGE:
            {
                this.onSessionChange(wParam, lParam);
                return new LRESULT(0);
            }
            default:
                return User32.INSTANCE.DefWindowProc(hwnd, uMsg, wParam, lParam);
        }
    }

    /**
     * Gets the last error.
     * 
     * @return the last error
     */
    public int getLastError()
    {
        int rc = Kernel32.INSTANCE.GetLastError();

        if (rc != 0)
            System.out.println("error: " + rc);

        return rc;
    }

    /**
     * On session change.
     * 
     * @param wParam
     *            the w param
     * @param lParam
     *            the l param
     */
    protected void onSessionChange(WPARAM wParam, LPARAM lParam)
    {
        switch (wParam.intValue())
        {
            case Wtsapi32.WTS_SESSION_LOCK:
            {
                this.onMachineLocked(lParam.intValue());
                break;
            }
            case Wtsapi32.WTS_SESSION_UNLOCK:
            {
                this.onMachineUnlocked(lParam.intValue());
                break;
            }
        }
    }

    /**
     * On machine locked.
     * 
     * @param sessionId
     *            the session id
     */
    protected void onMachineLocked(int sessionId)
    {
        System.out.println("Machine locked right now!");
    }

    /**
     * On machine unlocked.
     * 
     * @param sessionId
     *            the session id
     */
    protected void onMachineUnlocked(int sessionId)
    {
        System.out.println("Machine unlocked right now!");
    }
} 
```

我们已经在[Google Group Workstation Lock/Unlock listener](https://groups.google.com/forum/#!topic/jna-users/hNYm9NNQgCg)中解决了这个问题。你可以在那里找到我自己的实现，但这里的代码要好得多！享受 ：）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-09T22:03:35.500

另一种方法，没有任何 Windows 系统库等。

主要思想 - 锁定 PC 的屏幕截图将是全黑的，因此您可以截取一张并简单地检查一些关键点是否为黑色

*-16777216 - 幻数，表示 FFFFFFFFFF000000xH，最后一个 00 00 00 表示 RGB 颜色代码（实际上是黑色）*

```
 BufferedImage image = new Robot().createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()));
        boolean isBlack;    
        isBlack = (image.getRGB(1,1)==-16777216)
                &(image.getRGB(1,image.getHeight()-1)==-16777216)
                &(image.getRGB(image.getWidth()-1,1)==-16777216)
                &(image.getRGB(image.getWidth()-1,image.getHeight()-1)==-16777216)
                &(image.getRGB(image.getWidth()/2,image.getHeight()/2)==-16777216);
        return isBlack; 
```

实际上，只有一种情况下锁识别不正确 - 当您拥有全黑的壁纸、隐藏的任务栏和隐藏的图标时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T13:00:49.227

使用 JNI (Java Native Interface) 从 Windows 系统 dll 调用函数。

以下是使用检查工作站锁定状态的函数的示例代码：http: [//brutaldev.com/post/2008/05/23/Checking-if-the-workstation-is-locked.aspx](http://brutaldev.com/post/2008/05/23/Checking-if-the-workstation-is-locked.aspx)

这里是关于通过 JNI 从 Java 调用 dll 函数的文章：http: [//edn.embarcadero.com/article/20679](http://edn.embarcadero.com/article/20679)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T15:42:48.160

看看[解锁管理员](http://www.e-motional.com/ULAdmin.htm)

该程序的目的是允许管理员分配谁可以解锁计算机，但它也具有日志记录功能。它还允许您在计算机被锁定或解锁时运行脚本。这可能对您有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T15:45:15.913

使用 JDIC 库，

检查系统是否锁定

> SystemInfo.isSessionLocked()

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-31T18:50:08.317

使用 JDK9 (JDK11)，您可以使用 java.awt.Desktop ：

```
Desktop tempDesktop = Desktop.getDesktop();
tempDesktop.addAppEventListener(new UserSessionListener() {

    @Override
    public void userSessionDeactivated(UserSessionEvent aE) {
        LOG.info("Desktop:userSessionDeactivated Reason=" + aE.getReason() + " Source=" + aE.getSource());
            // Windows Key L: 
            // Tue Aug 31 11:22:49 CEST 2021:info:MainController:userSessionDeactivated Reason=LOCK

            // Close Lid:
            // Tue Aug 31 11:24:38 CEST 021:info:MainController:userSessionDeactivated Reason=LOCK
            // Tue Aug 31 11:24:39 CEST 2021:info:MainController:systemAboutToSleep Source=java.awt.Desktop@741f67cd

        ptcUserStatus = PtcUserStatus.AWAY;
    }

    @Override
    public void userSessionActivated(UserSessionEvent aE) {
        LOG.info("Desktop:userSessionActivated Reason=" + aE.getReason() + " Source=" + aE.getSource());
            // Logon after Windows Key L
            // Tue Aug 31 11:22:53 CEST 2021:info:MainController:userSessionActivated Reason=LOCK

            // Open Lid:
            // Tue Aug 31 11:24:56 CEST 2021:info:MainController:systemAwoke Source=java.awt.Desktop@741f67cd
            // Tue Aug 31 11:25:06 CEST 2021:info:MainController:userSessionActivated Reason=LOCK
        ptcUserStatus = PtcUserStatus.BACK;
    }
}); 
```

# ruby - OS X中作为守护进程运行的脚本的菜单栏图标？

> ID：10228148
> 
> 赞同：8
> 
> 时间：2012-04-19T12:32:31.533
> 
> 标签：ruby, macos

我有一个 ruby​​ 脚本（[https://github.com/daemonza/MacBak](https://github.com/daemonza/MacBak)），它作为守护进程在我的 macbook 上运行，并监视一堆目录的文件更改并同步发生的任何更改。我想知道我是否可以让它在顶部的菜单栏中创建一个图标？只是为了让我知道它实际上正在运行，而无需使用 ps 检查它。

也许稍后如果需要，我可能希望能够从那里控制脚本，简单的下拉菜单，停止和状态条目等。

从 ObjectC 看来，我可以调用 NSStatusItem 来获取图标，但我真的只想从我的 Ruby 脚本中轻松完成。也许我可以做一些applescript调用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T15:39:46.133

这个 MacRuby 脚本创建一个状态栏图标：
[https ://github.com/ashchan/gmail-notifr](https://github.com/ashchan/gmail-notifr)

这个也是：
[https ://github.com/isaac/Stopwatch](https://github.com/isaac/Stopwatch)

这是一个要点，包括执行此操作的代码：
[https ://gist.github.com/1480884](https://gist.github.com/1480884)

```
# We build the status bar item menu
def setupMenu
  menu = NSMenu.new
  menu.initWithTitle 'FooApp'
  mi = NSMenuItem.new
  mi.title = 'Hellow from MacRuby!'
  mi.action = 'sayHello:'
  mi.target = self
  menu.addItem mi

  mi = NSMenuItem.new
  mi.title = 'Quit'
  mi.action = 'quit:'
  mi.target = self
  menu.addItem mi

  menu
end

# Init the status bar
def initStatusBar(menu)
  status_bar = NSStatusBar.systemStatusBar
  status_item = status_bar.statusItemWithLength(NSVariableStatusItemLength)
  status_item.setMenu menu 
  img = NSImage.new.initWithContentsOfFile 'macruby_logo.png'
  status_item.setImage(img)
end

# Menu Item Actions
def sayHello(sender)
    alert = NSAlert.new
    alert.messageText = 'This is MacRuby Status Bar Application'
    alert.informativeText = 'Cool, huh?'
    alert.alertStyle = NSInformationalAlertStyle
    alert.addButtonWithTitle("Yeah!")
    response = alert.runModal
end

def quit(sender)
  app = NSApplication.sharedApplication
  app.terminate(self)
end

app = NSApplication.sharedApplication
initStatusBar(setupMenu)
app.run 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:40:17.003

你可以看看[MacRuby](http://macruby.com/)。这是一种使用 Ruby 而不是 Objective-C 开发 OS X 应用程序的方法。它包括许多改进，例如摆脱头文件，因此您只需在 Ruby 中拥有“实现”文件。您也可以使用 IB 来构建窗口

# apache-flex - Flex - 调整 DividerBox 后面板不调整大小

> ID：10228151
> 
> 赞同：0
> 
> 时间：2012-04-19T12:32:41.173
> 
> 标签：apache-flex, layout, panel, expand, collapse

嗨，有一个折叠面板作为分隔盒的组件之一。它可以展开和折叠，并且分隔框在展开/折叠时自行调整。

但是一旦我手动移动/调整分隔线，当我折叠面板时分隔框不会自动调整。因此创建了空白空间 id。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:02:40.557

我认为您应该使用 DivideBox 的 resizeToContent 属性检查以下代码

```
<mx:HDividedBox width="500" height="200" resizeToContent="true"/> 
```

resizeToContent 属性用于在折叠面板时根据子宽度、高度调整您的容器，根据新的高度和宽度，dividebox 会自行调整。

```
resizeToContent was set true. And it is working fine until I adjust the divider. Once it is adjusted, it wont get re-sized with the child size. 
```

当用户未在 HDivdebox 上方为容器设置宽度或高度属性时，resizeToContent 属性将起作用我设置了宽度和高度属性，这就是它不起作用的原因...尝试以下代码...在下面的代码中，我使用 HDivideBox 和 TitleWindow 作为其child... TitleWindow 有自己的高度和宽度，并且 HDivideBox 的 resizeToContent 属性设置为 true。当用户单击关闭按钮时，它的宽度会减小，并且 HDivideBox 会根据孩子的总宽度调整自身大小

```
protected function t1_closeHandler(event:CloseEvent):void
    {
        t1.width = 50;  
    }

protected function t2_closeHandler(event:CloseEvent):void
    {
        t2.width = 50;
    }

<mx:HDividedBox  resizeToContent="true">
        <mx:TitleWindow id="t1" width="150" height="100" showCloseButton="true"  close="t1_closeHandler(event)"/>
        <mx:TitleWindow id="t2" width="150" height="100" showCloseButton="true" close="t2_closeHandler(event)"/>
</mx:HDividedBox> 
```

# asp.net-mvc-3 - mvc3 razor html.actionlink 模型的链接文本部分

> ID：10228154
> 
> 赞同：2
> 
> 时间：2012-04-19T12:32:46.780
> 
> 标签：asp.net-mvc-3, razor

我有一个视图，如果 ViewBag 动态变量为真，我想显示一个 Html.ActionLink，如果同一变量为假，我想显示一个 Html.Label。

我还希望 ActionLink LinkText 基于我的模型中的属性值。即item.Description

所以应该是

```
@Html.ActionLink(item.Description, "MyAction") 
```

或者

```
@Html.LabelFor(item.Description) 
```

我怎样才能让它工作？

谢谢，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:40:53.137

```
@if((bool)ViewBag.isTrue){
   @Html.ActionLink(item.Description, "MyAction")
}
else{
 @Html.LabelFor(item => item.Description)
} 
```

# asp.net - 更改文件的路径

> ID：10228157
> 
> 赞同：0
> 
> 时间：2012-04-19T12:32:51.643
> 
> 标签：asp.net

我正在尝试使用 fileupload 标签来上传文件。它的基本作用是将文件保存到以下目录中：

```
C:\Program Files\Common Files\Microsoft Shared\DevServer\10.0\ 
```

有人可以告诉我如何更改此路径并将上传文件保存到其他目录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:35:18.303

您可以完全控制它。如果要将文件保存到不同的路径，请使用以下命令：

```
fileUpload.PostedFile.SaveAs("c:\my path\" + fileUpload.FileName); 
```

确保它（文件夹）具有权限

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:36:31.437

```
FileUpload1.SaveAs(savePath); 
```

阅读有关[FileUpload.SaveAs 方法的更多信息](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.saveas.aspx)

# java - 从 Jersey 返回 XML 时使用 '"' 而不是普通引号 ("")

> ID：10228160
> 
> 赞同：2
> 
> 时间：2012-04-19T12:33:03.747
> 
> 标签：java, xml-serialization, jaxb, jersey

我有以下问题。我有使用 Jersey 的 Web 服务，它可以生成 2 种返回数据 - XML 和 JSON。

```
@GET
@Produces({"application/xml","application/json"}) 
```

返回的数据还包含一个带引号的字符串`""`，如果返回的数据类型是 JSON，那么一切正常 - 返回带有普通引号`""`的字符串，但如果返回的数据类型是 XML，`&quot;`则返回带有的字符串。

问题是，在客户端字符串中需要正常的`""`引号。请帮助克服这个问题。

预期的字符串示例：

```
{"key1":"value1","key2":"value2"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:45:30.803

您可能想看看：[我可以强制 JAXB 不将“转换为”，例如，在编组为 XML 时？](https://stackoverflow.com/questions/1506663/can-i-force-jaxb-not-to-convert-into-quot-for-example-when-marshalling-to)

（JAX-RS 使用 JAXB）。

我知道“ 和’ 可能会有问题，因为我看到一些旧的 XML 系统会做一些奇怪的事情（包括古老的 IE 7）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:37:24.690

XML 用于程序到程序的通信。`&quot;`字符数据内部的含义与`"`.

您在尝试解析“返回的数据”的程序中是否遇到了一些问题？

# mysql - SQL 日期时间不等于不工作

> ID：10228161
> 
> 赞同：2
> 
> 时间：2012-04-19T12:33:06.483
> 
> 标签：mysql, sql, database, relational-database

我有一个由 Customer、Product 和 Transaction 表组成的数据库。

我正在尝试编写一条 SQL 语句来列出那些在 2000 年没有进行交易的客户的所有客户的姓名和 SSN。

Transaction 表中的 TransactionDate 列是日期/时间数据类型（例如 2000-12-18 00:00:00）。

这是我编写的 SQL 代码：

```
SELECT DISTINCT CustomerName, Customer.CustomerSSN 
FROM Customer, Transaction
WHERE Customer.CustomerSSN=Transaction.CustomerSSN
AND YEAR(TransactionDate)<>2000; 
```

不等于符号 (<>) 似乎由于某种原因不起作用。当我将其更改为等号时，它确实返回了正确的结果......

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T12:41:10.640

我会改变方法。

以下查询不需要`distinct`或`GROUP BY`因为没有客户记录连接到多个交易记录。

它也适用于从未进行过任何交易的客户。

最后，它使用`>= AND <`而不是`YEAR()=2000`. 这启用了索引查找而不是完全扫描*（假设您在 transactions 表上有一个适当的索引）*。

```
SELECT
  CustomerName,
  CustomerSSN
FROM
  Customer
WHERE
  NOT EXISTS (
    SELECT *
      FROM Transaction
     WHERE CustomerSSN      = Customer.CustomerSSN
       AND TransactionDate >= '20000101'
       AND TransactionDate <  '20010101'
  ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T12:39:27.380

```
SELECT DISTINCT
    Customer.CustomerName, 
    Customer.CustomerSSN
FROM Customer
LEFT JOIN Transaction
    ON Customer.CustomerSSN=Transaction.CustomerSSN
    AND YEAR(TransactionDate) = 2000
WHERE Transaction.TransactionDate IS NULL 
```

此查询将交易连接到客户，但专门`Transactions`从 2000 年开始连接。任何没有修补记录的客户`Transactions`因此在该年没有交易。因此，您正在寻找`Transaction.TransactionDate IS NULL`

在您自己的查询中，您只是查找在 2000 年以外的一年内进行过交易的任何客户，但有些客户可能也在 2000 年内进行过交易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T12:42:35.303

```
SELECT CustomerName, CustomerSSN 
FROM Customer
WHERE CustomerSSN NOT IN (
SELECT CustomerSSN
FROM Transaction
WHERE Year(TransactionDate)=2000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-28T11:40:03.953

我知道它已解决，但仍想在此处发布此作为附加答案（可能对其他人有帮助）。

解决此问题的另一种方法是使用 NULLIF 运算符，这是对原始查询的最少修改，如果 <> 不起作用，我认为它是更好的替代品。

```
SELECT DISTINCT CustomerName, Customer.CustomerSSN 
FROM Customer, Transaction
WHERE Customer.CustomerSSN=Transaction.CustomerSSN
AND (NULLIF(YEAR(TransactionDate), 2000) IS NOT NULL) 
```

# objective-c - 使用仪器检测-CFString 泄漏

> ID：10228163
> 
> 赞同：1
> 
> 时间：2012-04-19T12:33:08.250
> 
> 标签：objective-c, xcode

我的应用程序有时会崩溃，但没有任何日志错误。

我正在使用仪器泄漏/分配来找出问题所在。

在某些时候，分配存在线性增长。

如果我检查谁负责，我可以看到有一件主要的事情：

```
 CFString (immutable) Responsible Caller: [NSBundle mainBundle] 
```

我从不`allocate`在我的代码中串起字符串。我在这里读过，它与我的资产有关，它们是在组中而不是在文件夹中。那是对的吗 ？谁能给我指导，让我把手指放在导致这种增长的仪器中的特定对象上？

多谢。

# regex - 将每个文件重命名为在每个文件中找到的正则表达式模式

> ID：10228170
> 
> 赞同：1
> 
> 时间：2012-04-19T12:33:45.670
> 
> 标签：regex, windows

您知道可以实现此目的的工具吗？还是一些肮脏的批处理命令技巧？

**示例：** 我有 1000 个 HTML 文件。在每个 HTML 文件中，它包含下载文件的 URL。现在，我想根据每个文件中捕获的 URL 重命名每个 HTML 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:35:50.957

尝试使用[FlashRenamer](http://www.rlvision.com/flashren/about.asp)。

它是一个共享软件，但在 X 天内完全可用。

否则，您可以使用批处理命令执行此操作。

这取决于您是否需要一次或多次。

# javascript - 是否可以在 Web 应用程序中使用不同的 javascript 文件进行调试和生产？

> ID：10228172
> 
> 赞同：3
> 
> 时间：2012-04-19T12:33:56.090
> 
> 标签：javascript, asp.net, visual-studio, debugging, visual-studio-debugging

我想在我的 ASP.NET WebForms 应用程序（VS 2008）中有不同版本的 .js javascript 文件：

*   完整版，评论等
*   缩小版，用于生产

有没有办法在调试时自动获取完整版本，在应用程序部署到生产时自动获取缩小版本？我不介意答案是否是黑客攻击。

VS 2010 有可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T12:49:53.210

当然有可能，但这里的问题是“**你将如何设置它。** ”

我从这里的关键开始，即`DEBUG`定义。因此，假设您喜欢在页面上进行设置。

因此，在页面上您可以执行以下操作：

```
<% #if DEBUG %>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>
<% #else %>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<% #endif %> 
```

或者，您可以使用 Literal 并在代码后面进行此开关。

```
<asp:Literal runat="server" ID="txtScripts" EnableViewState="false" /> 
```

和

```
protected void Page_Load(object sender, EventArgs e)
    {
#if DEBUG
        txtScripts.Text = "<script type=\"text/javascript\" src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js\"></script>";
#else
        txtScripts.Text = "<script type=\"text/javascript\" src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js\"></script>";
#endif
    } 
```

另一种方法是使用处理程序并读取所有 javascript 文件并使用代码进行缩小，然后再次使用相同的密钥 DEBUG 发送一个或另一个版本。

我个人使用 MS Ajax MInified [http://www.asp.net/ajaxlibrary/AjaxMinDocumentation.ashx](http://www.asp.net/ajaxlibrary/AjaxMinDocumentation.ashx) 我阅读了我所有的 javascript 文件，使它们成为一个文件，并使用此参数来缩小它们或不缩小它们。

```
Minifier MyMin = new Minifier();
CodeSettings cs = new CodeSettings();
#if DEBUG
    cs.MinifyCode = false;
    cs.OutputMode = OutputMode.MultipleLines;
    cs.PreserveFunctionNames = true;
    cs.RemoveFunctionExpressionNames = false;
    cs.RemoveUnneededCode = false;
    cs.StripDebugStatements = false;
#else                   
    cs.MinifyCode = true;
    cs.OutputMode = OutputMode.SingleLine;              
#endif
Write(MyMin.MinifyJavaScript(AllMyJavascript, cs)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T13:54:35.277

我喜欢使用 SquishIt 库。

*   下载：[https ://github.com/jetheredge/SquishIt/downloads](https://github.com/jetheredge/SquishIt/downloads)
*   演练： http: [//www.codethinked.com/squishit-the-friendly-aspnet-javascript-and-css-squisher](http://www.codethinked.com/squishit-the-friendly-aspnet-javascript-and-css-squisher)

允许您将 CSS 和 JavaScript 保存在多个文件中以供本地开发，并发布单个缩小文件以供生产。

**编辑：**此工具允许以编程方式定义要缩小的文件列表。定义此列表的代码嵌入在 .aspx 文件或 MVC 视图的代码块中。在运行时会发生两件事：

*   动态创建缩小文件
*   在最终呈现的 HTML 中创建指向动态创建的缩小文件的链接

但是，如果`#debug`定义了，代码不会这样做，而是在输出中呈现指向原始文件的链接，以便可以使用文件的原始版本进行调试。

它支持 CSS 和 javascript minfication。

欲了解更多信息，请点击上述链接。

# primefaces - primefaces 数据表中的列/行锁定功能

> ID：10228173
> 
> 赞同：0
> 
> 时间：2012-04-19T12:33:56.947
> 
> 标签：primefaces

我正在寻找素面数据表中的列/行锁定功能。

例如：如果数据表有 10 行和 20 列，当我们滚动数据表时，只有 8 行和 15 列应该分别垂直和水平滚动。

这意味着，我们已经锁定了数据表的起始 2 行和 5 列。

请让我知道这样的功能是否在素数面孔中可用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:37:10.027

目前没有这样的选项，但您对以下问题进行投票...

[问题 366：DataTable 的 FixedColumns 和 FixedRows](http://code.google.com/p/primefaces/issues/detail?id=366)

* * *

**更新**

今天实施了行冻结/锁定，请参见此处

[问题 5046：可滚动数据表的冻结行：**状态：已修复**](http://code.google.com/p/primefaces/issues/detail?id=5046)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:26:48.470

只有行能够使用属性 frozenRows="5" 锁定，但对于锁定列，primefaces 尚未开发类似“frozenColumns”的东西

# iphone - 将 CGImageRef 图像转换为图像，并将 UIimage 转换为 NSData

> ID：10228175
> 
> 赞同：0
> 
> 时间：2012-04-19T12:34:02.277
> 
> 标签：iphone, ios4, ios5, xcode4.2

我正在通过以下代码截取我上次查看的屏幕的屏幕截图

```
//Image Code  
UIImage *nextImage;  
CGImageRef imgRef = CGBitmapContextCreateImage(UIGraphicsGetCurrentContext());  
nextImage = [UIImage imageWithCGImage:imgRef];  
CGImageRelease(imgRef);  
CGContextRelease(UIGraphicsGetCurrentContext()); 
```

当我在控制台中显示图像时，我得到了 O/P，如： UIImage：0x929c760
问题就在这里，当我将该 UIImage 转换为 NSData 时，我得到了空值。

我尝试过的事情是

```
//tried    
NSData *data = UIImagePNGRepresentation(nextImage);  
NSData *data2 = UIImageJPEGRepresentation(nextImage, 1.0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:09:32.717

大家好，我已经得到了@NP Compete链接给出的我的问题的解决方案//getting screenshot我没有使用任何UIImageview所以我的代码如下

```
-(UIImage*)doImageOperation
{
    UIImage *image = [[UIImage alloc]init];
    UIGraphicsBeginImageContext(self.bounds.size);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    NSLog(@"image in cg %@",image);
    [self saveImage:image];
    return image;
} 
```

// 保存到文档目录

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
            NSString *documentsDirectory = [paths objectAtIndex:0];
            path = [documentsDirectory stringByAppendingPathComponent: 
                    [NSString stringWithString:@"test.png"]];
 data = UIImagePNGRepresentation(image);
        [data writeToFile:path atomically:YES];
NSData *data = UIImagePNGRepresentation(image1);
        NSLog(@"data %@",data); 
```

# c# - 按位与和正常与

> ID：10228180
> 
> 赞同：-1
> 
> 时间：2012-04-19T12:34:14.563
> 
> 标签：c#, .net, operators

> **可能重复：**
> [为什么是'&&'而不是'&'？](https://stackoverflow.com/questions/7331686/why-and-not)

我什么时候使用按*位 AND*和*普通 AND*？

我读了*逐位 AND*对于有内存限制的应用程序很有用。

总体而言，哪一个最适合使用？

```
if (true & false)
{

} 
```

或者

```
if (true && false)
{

} 
```

*那么总是使用按位 AND*不是更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:36:42.767

按位与 ( `&`) 是对两个操作数的按位运算。`&&`相反，是逻辑与运算。

> 我按位阅读 AND 对有内存限制的应用程序很有用

这个假设是不正确的。我*可以*说按位可以用于密集型微积分，例如在 CAD 应用程序内核的绘图过程中，当您需要将一个绝对数除以 2（比如说）时，我们使用的是按位移位而不是使用缓慢的普通除法`>>`。但这些都是极端条件，99% 的情况下都不会批准使用这种技术。

所以它基本上是关于*性能*改进而*不是*内存。

它们完全不同。

# jquery - 我怎样才能使这种css样式和jquery与像Doctor div这样的诊所div一起使用？

> ID：10228194
> 
> 赞同：1
> 
> 时间：2012-04-19T12:34:49.877
> 
> 标签：jquery, html, css

我怎样才能使这种css样式和jquery与像Doctor div这样的诊所div一起使用？当我像 Doctor div 一样执行 Clinic div 时，Clinic div 停止了，但 Doctor div 正常工作，所以我怎样才能让这种 css 样式和 jquery 与 Doctor div 一样的 Clinic div 一起工作？

html代码：

```
<div id="wrap" class="sidebar" >
    <div id="sidebar" style="height: 150px;">
        <span id="toggleBtn">Doctor</span>
    </div>
</div>
<div id="cwrap" class="csidebar" >
    <div id="csidebar" style="height: 150px;">
        <span id="ctoggleBtn">Clinic</span>
    </div>
</div> 
```

CSS 代码：

```
#wrap {
    border: solid 1px #ccc; 
    width: 1355px;
    margin: 0 auto; 
    overflow: hidden;
    margin-bottom: 20px; 
}
#sidebar {
    width: 220px; 
    position: fixed;
    top: 1em;
    right: 1em;
    border-radius: 5px 5px 5px 5px;
}

#wrap.sidebar #sidebar {
    right: -254px;
}

#wrap.sidebar #mainContent, #wrap.sidebar #sidebar {
    margin: 10px; 
    padding: 10px; 
    box-shadow: 0px 0px 4px #888;
}

.nosidebar #mainContent, #wrap #sidebar {
    margin: 10px; 
    padding: 10px; 
    box-shadow: 0px 0px 4px #888; 
}

#wrap.nosidebar #sidebar {
    right: 0; 
}

#sidebar #toggleBtn {
    width: 60px;
    height: 30px; 
    line-height: 30px; 
    background: #2191c0;
    color: white; 
    cursor: pointer; 
    position: absolute; 
    top: 10px;
    left: -60px; 
    text-align: center;
    border-radius: 5px 0 0 5px;
}

#sidebar #toggleBtn:hover {
    background: #6eac2c; 
}

#cwrap {
    border: solid 1px #ccc; 
    width: 1355px;
    margin: 0 auto; 
    overflow: hidden;
    margin-bottom: 20px; 
}
#csidebar {
    width: 220px; 
    position: fixed;
    top: 1em;
    right: 1em;
    border-radius: 5px 5px 5px 5px;
}

#cwrap.csidebar #csidebar {
    right: -254px;
}

#cwrap.csidebar #cmainContent, #cwrap.csidebar #csidebar {
    margin: 10px; 
    padding: 10px; 
    box-shadow: 0px 0px 4px #888;
}

.cnosidebar #cmainContent, #cwrap #csidebar {
    margin: 10px; 
    padding: 10px; 
    box-shadow: 0px 0px 4px #888; 
}

#cwrap.cnosidebar #csidebar {
    right: 0; 
}

#csidebar #ctoggleBtn {
    width: 60px;
    height: 30px; 
    line-height: 30px; 
    background: #2191c0;
    color: white; 
    cursor: pointer; 
    position: absolute; 
    top: 50px;
    left: -60px; 
    text-align: center;
    border-radius: 5px 0 0 5px;
}

#csidebar #ctoggleBtn:hover {
    background: #6eac2c; 
} 
```

jQuery 代码：

```
$(document).ready(function() {
    // Variables
    var objMain = $('#wrap');
    var objSidebar = $('#nosidebar');
    var objContent = $('#mainContent'); 

    // Show sidebar
    function showSidebar() {
        objMain.removeClass('nosidebar');
        objMain.addClass('sidebar');
        objSidebar.animate({ 'right' : '-254px'},'slow');
        objContent.animate({ 'margin-right': 270}, 'slow');
        $.cookie('sidebar-pref2', 'use-sidebar', { expires: 30 });
    }

    // Hide sidebar
    function hideSidebar() {
        objMain.removeClass('sidebar');
        objMain.addClass('nosidebar');
        objSidebar.animate({ 'right' : '0'},'slow');
        objContent.animate({ 'margin-right': 0}, 'slow');
        $.cookie('sidebar-pref2', null, { expires: 30 });
    }

    // Sidebar separator
    var objSeparator = $('#toggleBtn');

    objSeparator.click(function(e) {
        e.preventDefault();
        if ( objMain.hasClass('nosidebar') ){
            showSidebar();
        }
        else {
            hideSidebar();
        }
    });

    // Load preference
    if ( $.cookie('sidebar-pref2') == null ){
        objMain.removeClass('sidebar');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:07:14.247

试试这个 JSFiddle 并告诉你是否想要这样......

[http://jsfiddle.net/wWtnC/4/](http://jsfiddle.net/wWtnC/4/)

# windows-phone-7 - 无循环导航返回

> ID：10228195
> 
> 赞同：0
> 
> 时间：2012-04-19T12:34:51.100
> 
> 标签：windows-phone-7

我有 2 页和导航到其他页面的代码：

```
NavigationService.Navigate(new Uri("/Page2.xaml", UriKind.RelativeOrAbsoluted)); 
```

使用此代码，我可以从 Page1 转到 Page2。

当我使用相同的代码从第 2 页转到第 1 页时（不是回退）：

```
NavigationService.Navigate(new Uri("/Page1.xaml", UriKind.RelativeOrAbsoluted)); 
```

没关系。但是当我使用后退按钮退出应用程序时，我看到了 Page1 2 次。

我该如何解决这个问题？

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:00:27.403

您可能会发现以下有用的“解决 Windows Phone Silverlight 应用程序中的循环导航”：-

[http://windowsteamblog.com/windows_phone/b/wpdev/archive/2010/12/13/solving-circular-navigation-in-windows-phone-silverlight-applications.aspx](http://windowsteamblog.com/windows_phone/b/wpdev/archive/2010/12/13/solving-circular-navigation-in-windows-phone-silverlight-applications.aspx)

# php - 根据超链接选择显示信息 - 选项卡

> ID：10228200
> 
> 赞同：0
> 
> 时间：2012-04-19T12:35:02.920
> 
> 标签：php, html, css, hyperlink

我注意到很多网站在特殊标签中显示产品信息，例如描述、规格、交付等。

有谁知道这叫什么以及我可以使用什么语言来开发它？请参阅图片以演示我的意思。

![在此处输入图像描述](../Images/58bb94030d4626ded982a44b4db48e1b.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:38:31.640

您可以为此使用 jQuery.UI。它被称为标签:)

[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:42:37.520

预加载隐藏div中的tab信息，页面加载时只显示第一个div，onclick，改变tab显示哪个被点击/选中，取消隐藏对应的div，隐藏原来显示的div。jQuery UI 可以工作，但是对于如此简单的事情，不需要在现有结构中添加这么多代码行，除非您要经常在多个页面上使用它。我发现大多数库都包含很少使用的功能，因此我倾向于编写自己的简化函数。

# c# - C# - Checkbox 的 CheckChanged 事件的检查状态错误

> ID：10228204
> 
> 赞同：0
> 
> 时间：2012-04-19T12:35:10.523
> 
> 标签：c#, events, checkbox, status, checked

我正在开发一个 Windows 表单，它应该根据复选框的选中状态启用/禁用一些控件。要注意这一点，CheckedChanged 事件有一个事件处理程序。这适用于其他形式，具有相同的确切代码，但在这里无法正常工作。无论复选框是选中还是未选中，选中状态始终为 false。这是代码：

```
 private void chkDisable_CheckedChanged(object sender, EventArgs e)
    {
        if (chkDisable.Checked)
        {
            DisableFormFields();
        }
        else
        {
            EnableFormFields();
        }
    } 
```

就像我说的，这个确切的代码可以在一种形式下正常工作——Checked 状态根据您刚刚更改的内容正确设置为 true 或 false。但在新形式中，无论是检查还是未检查，该方法中的 Checked 状态始终为 false。事件触发良好，并达到我在方法中设置的断点，但 Checked 状态永远不会改变。有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:41:15.273

检查您的 eventHandler`chkDisable_CheckedChanged`是否应用于正确的复选框，即`chkDisable`复选框。

如果问题仍然存在，请**删除**并**重新拖动**复选框控件并**应用事件**。

应用强制转换和捷径不应该是解决问题的正确方法（这是我个人的想法。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T12:44:29.127

试试这个

```
private void chkDisable_CheckedChanged(object sender, EventArgs e)
{
        if (((CheckBox)sender).Checked)
        {
            DisableFormFields();
        }
        else
        {
            EnableFormFields();
        }
} 
```

# php - 多页Fpdf表格

> ID：10228211
> 
> 赞同：0
> 
> 时间：2012-04-19T12:35:30.743
> 
> 标签：php, fpdf

我正在尝试使用 fPDF 和 PHP 构建一个 PDF 表，如果它适合一页，它会创建一个表。但是，如果表格不适合一页，虽然第一页很好，但在第二页和其他页面上，表格不规则。这是我的 pdf 输出的示例：

[https://rapidshare.com/files/486723233/results.pdf](https://rapidshare.com/files/486723233/results.pdf)

这是我创建此表的代码：

```
//FILL THE TABLE

            $max_number_of_lines = 0;

            for ($index = 0; $index < count($subjects); $index++,$temp=0,$row_height = 15,$max_number_of_lines = 0) {
                //Account height of row, all will be same
                //Issue a page break first if needed
                if($this->GetY()+$row_height > $this->PageBreakTrigger)
                    $this->AddPage($this->CurOrientation);

                foreach ($subjects[$index] as $fields) {
                    $myString = mb_convert_encoding($fields, "iso-8859-9", "auto");
                    $number_of_lines = ceil(($this->GetStringWidth($fields))/$fieldLengthArray[$temp]);
                    if ($row_height < ceil($number_of_lines * 15)) {
                        $row_height = ceil($number_of_lines * 15);
                        $max_number_of_lines = $number_of_lines+1;
                    }
                    $temp++;
                }
                $temp=0;
                foreach ($subjects[$index] as $myFields) {
                    //$this->SetAutoPageBreak(true,$row_height);
                    $this->SetY($currentY);
                    $this->SetX($currentX);
                    $myString = mb_convert_encoding($myFields, "iso-8859-9", "auto");
                    $number_of_lines = ceil(($this->GetStringWidth($myFields))/$fieldLengthArray[$temp]);

                    if ($number_of_lines < $max_number_of_lines-1) {
                        $this->Rect($currentX, $currentY, $fieldLengthArray[$temp], $row_height);   
                        //Draw the border
                        //$this->Rect($x, $y, $w, $h);
                        $this->MultiCell($fieldLengthArray[$temp], ceil($row_height/$max_number_of_lines) , 
                            $myString,0,  'L', $fill);

                    }
                    else {
                        //Draw the border
                        //$this->Rect($x, $y, $w, $h);
                        $this->Rect($currentX, $currentY, $fieldLengthArray[$temp], $row_height);   
                        $this->MultiCell($fieldLengthArray[$temp], ceil($row_height/$max_number_of_lines), 
                            $myString,0,  'L', $fill);

                    }
                    $currentX += $fieldLengthArray[$temp];
                    $temp++;
                    //$this->Ln();
                }
                $this->Ln($row_height);
                $this->SetY($currentY);
                $currentX = $this->GetX();
                $currentY += $row_height;

            }
            $this->SetFillColor(238);
            $this->SetLineWidth(0.2);
            $this->SetFont('arial_tr', '', 10);
            $this->Ln();
        } 
```

它是我的功能的一部分，生成表，`$subjects`是我从数据库中获得的信息。

```
$subjects = array(array()) 
```

我不明白为什么它在第二页和其他页面上不规则，而在第一页上是规则的。我还检查页面的结尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:47:25.467

发生这种情况是因为您使用一个单元格触发了页面中的分页符。

要么在 fpdf 中禁用“自动分页符”，要么必须提前计算一行单元格的高度。

作为替代方案，您可以查看我的 fpdf 表脚本：http: [//interpid.eu/fpdf-table](http://interpid.eu/fpdf-table)

# silverlight - 视觉状态处于活动状态时动态缩放对象

> ID：10228213
> 
> 赞同：1
> 
> 时间：2012-04-19T12:35:33.500
> 
> 标签：silverlight, windows-phone-7, scale, gesture, visualstates

我正在构建一个具有两种视觉状态的图片查看器。

A) 应用程序基础状态（没有激活的视觉状态）

1）“基础”状态（视觉状态，空故事板）

2）所有图像的“网格”（将图像缩放到四分之一大小的视觉状态）

我想用手势在视觉状态之间切换。目前捏合图像可以做到这一点。当我捏（OnPinchDelta）时，我还希望捏手势来缩放图像。这仅适用于 A) 没有激活的视觉状态。一旦我启动视觉状态 1) 或 2) 捏不再起作用。它仍然会启动视觉状态更改，但不会**在**捏合时缩放图像。

当我的视觉状态处于活动状态时如何修改图像比例，或者如何退出任何活动的视觉状态以不运行任何视觉状态/故事板（[我认为后者是不可能的](https://stackoverflow.com/questions/1508323/how-to-go-back-to-base-state-using-visualstatemanager)）？

捏合时不再缩放图像的原因是因为它与视觉状态有某种冲突。在应用程序启动时，一切正常，但一旦视觉状态被激活，它就不再工作了。如果在应用程序启动中我将视觉状态设置为 1) 它甚至一次都不起作用。

编辑：我建立了一个简化的例子。这是相关的 XAML（其余部分的复制粘贴不起作用，否则它只是带有工具包参考的默认 WP 页面模板）：

```
<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Background="Transparent">
    <VisualStateManager.VisualStateGroups>
        <VisualStateGroup x:Name="VisualStateGroup">
            <VisualState x:Name="Normal"/>
            <VisualState x:Name="Grid">
                <Storyboard>
                    <DoubleAnimation Duration="0" To="0.3" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="image" d:IsOptimized="True"/>
                    <DoubleAnimation Duration="0" To="0.3" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)" Storyboard.TargetName="image" d:IsOptimized="True"/>
                </Storyboard>
            </VisualState>
        </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>

    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0"/>
    <Image x:Name="image" Source="cheetah-picture.jpg" Stretch="Uniform" VerticalAlignment="Top">
        <Image.RenderTransform>
            <CompositeTransform x:Name="ImageTransformation"/>
        </Image.RenderTransform>
        <toolkit:GestureService.GestureListener>
            <toolkit:GestureListener PinchDelta="OnPinchDelta" PinchCompleted="OnPinchCompleted" />
        </toolkit:GestureService.GestureListener>
    </Image>
</Grid> 
```

这是.CS

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;

namespace Pincher
{
public partial class MainPage : PhoneApplicationPage
{
    public MainPage()
    {
        InitializeComponent();
    }

    private void OnPinchDelta(object sender, PinchGestureEventArgs e)
    {
        ImageTransformation.ScaleX = 1 * e.DistanceRatio;
        ImageTransformation.ScaleY = ImageTransformation.ScaleX;
    }

    private void OnPinchCompleted(object sender, PinchGestureEventArgs e)
    {

        bool squeezing = (e.DistanceRatio < 1) ? true : false;

        if (squeezing == true)
        {
            VisualStateManager.GoToState(this, "Grid", true);
            MessageBox.Show("grid");
        }
        else
        {
            VisualStateManager.GoToState(this, "Normal", true);
            MessageBox.Show("normal");
        }
    }
} 
```

}

结束。更改视觉状态适用于捏合。实际上，仅在没有视觉状态处于活动状态时才在捏合时缩放图片。如何在视觉状态处于活动状态时缩放项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T21:38:49.117

我认为您遇到的问题是由于尝试进入**基本**状态。**基本**状态是初始化控制时使用的默认状态，但是一旦 VSM（视觉状态管理器）进入不同的状态，您就不再处于**基本**状态并且无法返回到它。

在你的情况下，你应该有类似**grid** state 和**normal**的东西。并在这两种状态之间切换。

此外，如果您在 WP7 状态下使用默认按钮样式，您会注意到它在默认转换组中具有**Normal**、**MousOver**、**Pressed**和**Disabled状态。**当用户没有对按钮做任何事情（并且它没有被禁用）时，它会进入**Normal**状态，**而不是 BASE**！

# javascript - 如何取消鼠标点击默认行为？

> ID：10228214
> 
> 赞同：0
> 
> 时间：2012-04-19T12:35:40.167
> 
> 标签：javascript, events, mouseevent

如何在 JavaScript 中取消鼠标事件？

当我左键单击任何对象时，我想取消鼠标左键单击的默认行为。它在 JavaScript 中可行吗？

在谷歌地图上鼠标左键拖动地图平移到任何方向。

google.maps.event.addListener(Layers.map, 'mousemove', function (event) { // 做什么 }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:40:21.173

尝试

```
document.body.addEventListener("click", function(e) { e.preventDefault(); }, true); 
```

无论你的情况是什么“默认行为”......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:38:36.130

您可以使用页面正文标记中的 oncontextmenu 事件处理程序来禁用上下文菜单

# .net - 在 WPF 中添加上下文菜单

> ID：10228216
> 
> 赞同：1
> 
> 时间：2012-04-19T12:35:45.977
> 
> 标签：.net, wpf

我有一个 WPF 用户控件。在那个 userControl 中，我将拥有 multmple WPF childControls(inherits My `BaseElement`)。

我需要每个 ChildControl 包含一个指定的上下文菜单（向后，向前命令）

下面的代码不起作用......我做错了什么？

```
<UserControl.Resources>
    <ContextMenu x:Key="ElementContextMenu">
        <MenuItem Header="Move backward"
                  Name="back"
                  Click="back_Click" />
        <MenuItem Header="Move forward"
                  Name="forw"
                  Click="forw_Click" />
    </ContextMenu>
    <Style TargetType="{x:Type my:BaseElement}">
        <Setter Property="ContextMenu"
                Value="{DynamicResource ResourceKey=ElementContextMenu}" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:44:06.100

基本样式不会自动应用于派生元素，您需要为每个元素创建一个样式。幸运的是，您可以通过`BasedOn`属性使用样式继承。

```
<UserControl.Resources>
  <Style
    TargetType="{x:Type my:Element1DerivingFromBase}"
    BasedOn="{StaticResource {x:Type my:BaseElement}}" />

  <Style
    TargetType="{x:Type my:Element2DerivingFromBase}"
    BasedOn="{StaticResource {x:Type my:BaseElement}}" /> 
```

# c - 从 IP 范围转换为 CIDR 掩码

> ID：10228219
> 
> 赞同：2
> 
> 时间：2012-04-19T12:35:53.050
> 
> 标签：c, math, ip, cidr

我一直在研究一种将 IP 范围转换为 CIDR 表示法中的列表 IP 的算法（以后将被称为元组）。现在，让我感到困惑的是，要弄清楚这种转换的最坏情况是什么；

对于 IPv4 范围，我可以获得的最大元组数是多少？对于 IPv6 范围，我可以获得的最大元组数是多少？这是如何计算的？erp

我正在使用[以下 Python 脚本](http://wang.yuxuan.org/blog/?itemid=102)的修改后的 C 版本（非递归） ：

```
 1 #!/usr/bin/env python
 2 
 3 import sys
 4 import re
 5 
 6 def ip2int(ip) :
 7         ret = 0
 8         match = re.match("(\d*)\.(\d*)\.(\d*)\.(\d*)", ip)
 9         if not match : return 0
10         for i in xrange(4) : ret = (ret << 8) + int(match.groups()[i])
11         return ret
12 
13 def int2ip(ipnum) :
14         ip1 = ipnum >> 24
15         ip2 = ipnum >> 16 & 0xFF
16         ip3 = ipnum >> 8 & 0xFF
17         ip4 = ipnum & 0xFF
18         return "%d.%d.%d.%d" % (ip1, ip2, ip3, ip4)
19 
20 def printrange(startip, endip) :
21         bits = 1
22         mask = 1
23         while bits < 32 :
24                 newip = startip | mask
25                 if (newip>endip) or (((startip>>bits) << bits) != startip) :
26                         bits = bits - 1
27                         mask = mask >> 1
28                         break
29                 bits = bits + 1
30                 mask = (mask<<1) + 1
31         newip = startip | mask
32         bits = 32 - bits
33         print "%s/%d" % (int2ip(startip), bits)
34         if newip < endip : 
35                 printrange(newip + 1, endip)
36 
37 while 1 :
38         line = sys.stdin.readline().strip()
39         if not line : break
40         chars = line.split(" ")
41         print "#%s - %s" % (chars[0], chars[1])
42         ip1 = ip2int(chars[0])
43         ip2 = ip2int(chars[1])
44         printrange(ip1, ip2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:26:34.973

这只是猜测，但似乎是，单个 IPv4 范围内 CIDR 前缀的最大数量为 62 (32*2 - 2)，而 IPv6 - 254 (128*2 - 2)。

# php - 从动态下拉菜单中查询 MYSQL DB

> ID：10228221
> 
> 赞同：1
> 
> 时间：2012-04-19T12:35:58.507
> 
> 标签：php, mysql

我从这个网站得到了很好的提示，但现在真的很挣扎，需要一些专家的帮助，我正在学习，所以请友好:-) 无论如何，我有一个脚本可以根据用户选择的内容动态更改 3 个下拉菜单，我有一个带有一个表的数据库，我可以查询没有问题（mysql）到目前为止这么好，问题是我似乎无法根据用户从下拉菜单中选择的内容生成结果，我没有看到任何记录，我我什至不确定我是否可以使用带有数字而不是单词的菜单项的查询，即使是一点点帮助，我也将不胜感激，我只需要一点点工作，然后我想我可以管理 = 非常感谢所有人

```
<?php
// Make a MySQL Connection
mysql_connect("localhost", "", "") or die(mysql_error());
mysql_select_db("travel") or die(mysql_error());

$valid_class = array('4', '6', '7', '1', '5', '3');
$valid_category = array('4.1.9', '4.1.7', '4.1.8', '4.1.6', '4.1.5', 
'4.1.2', '4.1.1', '4.1.10', '4.1.4'' 4.1.3', );

$where = array();
$where[] = 'menuOne = "' . mysql_real_escape_string($_POST['menuOne']) . '"';
;

if (in_array($_POST['menuOne'], $valid_class))
{
$where[] = 'menuOne = "' . $_POST['menuOne'] . '"';
}

if (in_array($_POST['menuTwo'], $valid_category))
{
$where[] = 'menuTwo = "' . $_POST['menuTwo'] . '"';
}
// Retrieve all the data from the "category" table
$result = 'SELECT * FROM records WHERE ' . implode(' AND ', $where);

      if(!isset($result))
{
mysql_affected_rows($result);

}
echo "\n <table border=1 width=100%>";

       echo "\n<tr>" .
             "\n\t<th>ID</th>" .
             "\n\t<th>Name</th>" .
             "\n\t<th>Address</th>" .
             "\n\t<th>Location</th>" .
             "\n\t<th>Email</th>" .
             "\n\t<th>Telephone</th>" .
             "\n\t<th>Website</th>" .
             "\n\t<th>Open Season</th>" .
             "\n\t<th>Destination</th>" .
             "\n\t<th>Categories</th>" .

             "\n</tr>";

       while($row = @ mysql_fetch_array($result)) {

          echo "\n<tr>" .
                "\n\t<td>{$row["ID"]}</td>" .
                "\n\t<td>{$row["Name"]}</td>" .
                "\n\t<td>{$row["Address"]}</td>" .
                "\n\t<td>{$row["Location"]}</td>" .
                "\n\t<td>{$row["Email"]}</td>" .
                "\n\t<td>{$row["Telephone"]}</td>" .
                "\n\t<td>{$row["Website"]}</td>" .
                "\n\t<td>{$row["Open Season"]}</td>" .
                "\n\t<td>{$row["Destination"]}</td>" .
                "\n\t<td>{$row["Categories"]}</td>";

       }
       echo "\n</table>";

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:47:14.367

为了您的mysql查询

`$result = 'SELECT * FROM records WHERE ' . implode(' AND ', $where);`

要工作，您需要实际发送它。

`mysql_query($result)`

你目前拥有的

`while($row = @ mysql_fetch_array($result)) {`

设计为在 msql_query 调用的结果上运行。例如

`$query= mysql_query($result);`

然后运行

`while($row = @ mysql_fetch_array($query)) {`

据我所知，这是您唯一的问题，您刚刚忽略了查询。

希望对您有所帮助，请随时询问更多详细信息。

# java - Java 无法在 ubuntu 11.10 上使用 netbeans IDE 7

> ID：10228225
> 
> 赞同：2
> 
> 时间：2012-04-19T12:36:20.737
> 
> 标签：java, linux, netbeans, netbeans-7, ubuntu-11.10

我在 ubuntu 11.10 上使用 Netbeans IDE 7.1.1，当我尝试使用 File-> New Project-> JAVA Project-> JAVA Application 创建 JAVA 项目时，它显示以下错误：

> JDK 缺少运行某些 NetBeans 模块的必需项。请使用 --jdkhome 命令行选项来指定 JDK 安装或查看[http://wiki.netbeans.org/FaqRunningOnJre](http://wiki.netbeans.org/FaqRunningOnJre)了解更多信息。

所以我使用了以下命令

```
sudo update-alternatives --config java 
```

结果是：

```
 Selection    Path                                           Priority   Status
------------------------------------------------------------
    0            /usr/lib/jvm/java-6-openjdk/jre/bin/java        1061      auto mode
    1            /usr/lib/jvm/java-6-openjdk/jre/bin/java        1061      manual mode
  * 2            /usr/lib/jvm/java-7-openjdk-i386/jre/bin/java   1051      manual mode 
```

我尝试使用以下命令通过终端运行：

```
netbeans --jdkhome /usr/lib/jvm/java-7-openjdk-i386/jre/bin/java 
```

但我得到了错误：

```
Cannot find java. Please use the --jdkhome switch. 
```

并且netbeans也没有启动。

我还使用通过此命令找到的每条路径尝试了此命令：

```
whereis java 
```

但每次我得到同样的错误并且netbeans没有启动。

在 netbeans 配置文件 ( `/usr/local/netbeans-7.0/etc/netbeans.conf`) jdkhome 路径是：

```
netbeans_jdkhome="/usr/lib/jvm/java-7-openjdk-i386/jre" 
```

当我尝试通过此命令使用此路径运行 netbeans 时：

```
netbeans --jdkhome /usr/lib/jvm/java-7-openjdk-i386/jre 
```

netbeans 运行但尝试创建项目时显示相同的 JDK 缺失错误。

我还遇到了一件有趣的事情，如果我使用 Eclipse 一切都很好，我可以在 eclipse 中创建项目并且程序运行顺利。Eclipse 没有显示任何缺失或错误，例如缺少 JDK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:44:17.923

我在 Ubuntu 11.10 上使用 Netbeans 7.1，它工作得很好，我不需要指定任何额外的东西来让 JDK 工作。这是我的`update-alternatives`：

```
Selection    Path                                      Priority   Status
 ------------------------------------------------------------
  0            /usr/lib/jvm/java-6-openjdk/jre/bin/java   1061      auto mode
* 1            /usr/lib/jvm/java-6-openjdk/jre/bin/java   1061      manual mode 
```

您是如何安装 Netbeans 7.1 的？据我记得它不在存储库中。我使用了 Netbeans 网站上的 GUI Swing 安装程序。我以不使用or的*用户*身份安装它。`sudo``su`

还要检查您如何*运行*Netbeans，尝试转到`NETBEANS/bin`文件夹并运行`./netbeans`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:53:23.050

[@维平库马尔](https://stackoverflow.com/users/1180290/vipin-kumar)

嗨 Vinay，我遇到了可以在任何版本的 Ubuntu 上运行的解决方案，它肯定会保持其他 Java 版本完好无损。

为此，请从 [Oracle 网站下载 Java 的 tar.gz 版本。](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

1.  假设，您的 jdk 安装 tar 文件位于`/home/don/`

2.  不要@ubuntu ~ $`tar zxf jdk-7u45-linux-i586.tar.gz`

3.  不要@ubuntu ~ $`sudo bash`

    [sudo] 唐密码：

4.  ubuntu~#`mv /home/don/jdk1.7.0_45/ /usr/lib/jvm/`

5.  ubuntu~#`cd /usr/lib/jvm/`

6.  ubuntu jvm #`update-alternatives --install /usr/bin/java java /usr/lib/jvm/jdk1.7.0_45/bin/java 3`

7.  ubuntu jvm #`update-alternatives --config java`

> ```
>  Selection    Path                                           Priority   Status  
> ------------------------------------------------------------  
> * 0            /usr/lib/jvm/java-7-openjdk-i386/jre/bin/java   1071      auto mode  
>   1            /usr/lib/jvm/java-7-openjdk-i386/jre/bin/java   1071      manual mode  
>   2            /usr/lib/jvm/jdk1.7.0_45/bin/java               3         manual mode  
> Press enter to keep the current choice[*], or type selection number: 2
> update-alternatives: using /usr/lib/jvm/jdk1.7.0_45/bin/java to provide /usr/bin/java (java) in manual mode 
> ```

8.  ubuntu jvm # `java -version`
    java version "1.7.0_45"
    Java(TM) SE Runtime Environment (build 1.7.0_45-b18)
    Java HotSpot(TM) Server VM (build 24.45-b08, mixed mode)

完毕 ！！

现在，轮到netbeans了。

我假设您的文件保存在位置/home/don。

在 netbeans 安装文件上，右键单击 -> `properties`-> `permissions`->`Allow executing file as a program`在 Execute 属性下。

现在单击安装程序，在要求操作时选择运行，您的安装将开始没有任何麻烦。

快乐编程！！

# php - 如何在 CGridView 中设置每页的项目数？

> ID：10228230
> 
> 赞同：5
> 
> 时间：2012-04-19T12:36:32.670
> 
> 标签：php, pagination, yii

我在 Yii 有一个项目，`CGridView`默认情况下每页显示 10 条记录。如何将其设置为 100 条记录？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-29T04:27:42.653

您可以在模型的搜索功能中进行配置，如下所示：

```
public function search()
{
    $criteria=new CDbCriteria;

    $criteria->compare('id',$this->id,true);
    $criteria->compare('start_year',$this->start_year,true);
    $criteria->compare('end_year',$this->end_year,true);
    $criteria->compare('ref_lang_id',$this->ref_lang_id);
    $criteria->compare('submitted_at',$this->submitted_at,true);
    $criteria->compare('ref_submitted_user_id',$this->ref_submitted_user_id,true);

    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
        'pagination' => array(
            'pageSize' => 30,
        ),
    ));
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-19T12:44:01.677

在您的视图中找到`CGridView`正在呈现小部件的位置，并配置`pagination`数据提供者的属性：

```
$this->widget('zii.widgets.CGridView', array(
    'dataProvider' => array(
         /* other options for the data provider... */
        'pagination' => array('pageSize' => 100),
    ),
    /* other options for the grid view... */
)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-15T06:36:59.403

您可以使用下拉菜单配置每页的项目。

[![在此处输入图像描述](../Images/086d7467b30796217a8935a53d440a9d.png)](https://i.stack.imgur.com/qmtJJ.png)

像这样创建一个部分。请按照以下步骤操作。

为屏幕截图上的“Displaying 1-10 of 128”部分定义自定义模板。

将这段代码添加到您的 Gridview 属性数组中。

```
'summaryText' => 'Displaying {start}-{end} of {count} result(s). ' .
    CHtml::dropDownList('pageSize', $pageSize, Yii::app()->params['pageSizeOptions'], array('class' => 'change-pageSize')) .' rows per page', 
```

在视图顶部添加此行

```
$pageSize = Yii::app()->user->getState('pageSize', Yii::app()->params['defaultPageSize']); 
```

在同一视图中添加更改事件。

```
jQuery(function ($) {
$('body').on('change','.change-pageSize', function () {
    $.fn.yiiGridView.update('my-grid', {data: {pageSize: $(this).val()}
    })
});
}); 
```

在模型搜索功能中添加此行，以设置活动数据提供者中的选定行数。

```
$pageSize = Yii::app()->user->getState('pageSize', Yii::app()->params['defaultPageSize']); 
```

然后在控制器中通过ajax接收视图发送的页面大小参数。在控制器中使用以下代码行。

```
if (isset($_GET['pageSize'])) {
                Yii::app()->user->setState('pageSize', (int) $_GET['pageSize']);
            } 
```

在 Params.php 中添加此配置

```
'defaultPageSize' => 20,
'pageSizeOptions' => array(-1 =>'All' , 10 => 10, 20 => 20, 50 => 50, 100 => 100, 500 => 500), 
```

**这对我有用！**

# javascript - 将标签内的图像上传到服务器

> ID：10228233
> 
> 赞同：0
> 
> 时间：2012-04-19T12:36:41.110
> 
> 标签：javascript, jquery, ipad, file-upload

我可以将图像上传到我的网络服务器吗？我知道，如果我的网页中有文件输入，那么我可以轻松上传它并像`$_FILE["name"]`在我的服务器（PHP）上一样获取它。但我正在为 iPad 开发一个不公开文件系统的网页。但稍后，这将通过使用电话间隙来处理。但现在为了演示，我想证明上传是有效的。所以，现在假设我有一个文件的路径。我在我的网页上有它`<img src="path" alt="">`

我可以通过任何方式将其上传到我的服务器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:42:13.620

如果图像已经在线，您可以轻松地使用 PHP`fopen()`获取文件并将其上传到您自己的服务器。当且仅当远程服务器没有安装某些功能来阻止外部图像访问时，这将起作用。

请参阅这篇文章以了解如何：[如何使用 PHP 下载图像？](https://stackoverflow.com/questions/1802296/how-to-download-an-image-with-php)

# ember.js - DS.Model 回调，在创建记录并设置服务器端 id 后调用

> ID：10228235
> 
> 赞同：3
> 
> 时间：2012-04-19T12:36:43.240
> 
> 标签：ember.js, ember-data

当我创建一个新的 DS.Model 记录并在商店中调用 commit 时，我想知道该记录是何时在持久层中创建的，并且我可以访问该`id`属性。

我认为`didCreate`回调会做到这一点。但令我惊讶的`id`是，它仍然`undefined`是`didCreate`被调用的时候。

所以我的问题基本上是，我做错了什么，我的用例有更好的回调还是这是一个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T18:00:24.850

嗯，看起来[这个](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/unit/store_test.js#L469-494)测试用例应该涵盖这个。我认为你应该提交一张罚单。

作为一种解决方法，您可以使用这些方法，请参阅[http://jsfiddle.net/pangratz666/ZkQHE/](http://jsfiddle.net/pangratz666/ZkQHE/)：

```
App.IdWatcher = Ember.Mixin.create({
    init: function() {
        this._super();
        this.addObserver('data', this, '_dataDidChange');
    },
    _dataDidChange: function() {
        var id = this.get('id');
        if (id) {
            this.idHasBeenDefined(id);
            this.removeObserver('data', this, '_dataDidChange');
        }
    }
});

App.Model = DS.Model.extend(App.IdWatcher, {
    label: DS.attr('string'),

    idHasBeenDefined: function(id) {
        console.log('id is set to %@'.fmt(id));
    }
}); 
```

# php - 用于从 html 表单收集数据的 PHP 脚本

> ID：10228236
> 
> 赞同：-1
> 
> 时间：2012-04-19T12:36:44.950
> 
> 标签：php, forms

我在编写用于从 html 表单收集表单数据的 php 脚本时遇到问题，下面是代码。我认为我缺少一些简单的东西，我的 php 经验是有限的。

任何帮助/建议表示赞赏。如果您编辑代码，请尝试具体说明，以便我可以看到错误在哪里。

```
"\nComments:\n".$comments. ;
<?php
$error = "\n Please review the information you provided, there seems to be a problem" ;
$email1 = 'root@centos6.labform.localdomain' ;
$to = "$email1";
$from = $_POST['email'];
$name = "$firstname $lastname";
$headers = "From: $email \n";
$subject = 'Lab Systems Request Form';

// we now create the email

$message = array();
$firstname = $_POST['firstname'] ;
$lastname = $_POST['lastname'] ;
$extnumber = $_POST['extnumber'] ;
$department = $_POST['department'] ;
$email = $_POST['email'] ;
$type = $_POST['type'] ;
$systems = $_POST['systems'] ;
$comments = $_POST['comments'] ;

$body = "We have received the following information from $name:\n\nHere are the details:\n"
"\nFirstName:\n".$firstname.
"\nLastName:\n".$lastname.
"\nExtNumber:\n".$extnumber.
"\nDepartment:\n".$department.
"\nEmail:\n".$email.
"\nFormFactor:\n".$type.
"\nSystemType:\n".$systems.
//$body ="We have received the following information from $name:\n\n";
//"Here are the details:\n " ;
//"FirstName: $firstname \n" ;
//"LastName: $lastname \n" ;
//"ExtNumber: $extnumber \n" ;
//"Department: $department \n" ;
//"Email: $email \n" ;
//"FormFactor: $type \n" ;
//"SystemType: $systems \n" ;
//"Comments: $comments \n" ;

// now we send the email and redirect to thankyou.html if all ok
$send = mail( $to,$from,$headers,$subject,$body );
//print "$to,$subject,$body,$headers";

if($send)
 {header( "Location: thankyou.html" );}
 else
 {print "We encountered an error sending your mail, please notify directly
$email1 or $email2"; }

?> 
```

此外，当我出于某种原因设法打印所有数据时，它会在每行前面放置一个“1”：-S 并以相反的顺序收集数据，非常感谢！斯托尼斯

您好，感谢您的回复。我已经编辑了代码。我添加了你的建议。代码运行正常，它重定向到thankyou.html，但电子邮件正文为空，如果我在每个开头添加打印：“\nFirstName:\n”.$firstname。.......然后我可以看到示例数据已收集，但我得到的只是：日期：2012 年 4 月 19 日星期四 15:54:22 +0100 (IST) 来自：Apache 至：root@centos6.labform。 localdomain 主题：root@centos6.labform.localdomain 实验室系统申请表来自：并且没有收集其他数据

这是html表单： [http](http://dpaste.com/734277/) ://dpaste.com/734277/ 这里是collection.php： [http ://dpaste.com/734276/](http://dpaste.com/734276/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:46:31.707

安东尼奥

您需要对所有代码中的问题进行更多描述（我们需要查看表单），但这听起来像是脚本正在运行。

除了 Lex 所说的，您的 $body 变量还有一个 . 最后不应该在那里：

```
$body = "We have received the following information from $name:\n\nHere are the details:\n"
"\nFirstName:\n".$firstname.
"\nLastName:\n".$lastname.
"\nExtNumber:\n".$extnumber.
"\nDepartment:\n".$department.
"\nEmail:\n".$email.
"\nFormFactor:\n".$type.
"\nSystemType:\n".$systems.
"\nComments:\n".$comments. ; 
```

应该：

```
$body = "We have received the following information from $name:\n\nHere are the      details:\n"
"\nFirstName:\n".$firstname.
"\nLastName:\n".$lastname.
"\nExtNumber:\n".$extnumber.
"\nDepartment:\n".$department.
"\nEmail:\n".$email.
"\nFormFactor:\n".$type.
"\nSystemType:\n".$systems.
"\nComments:\n".$comments ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:41:35.087

函数中的参数`mail()`顺序错误。发件人地址应该在标题中。查看[此功能的手册](http://php.net/manual/en/function.mail.php)以使其正确。

# flash - s:SpriteVisualElement 和“这里不允许组件声明”

> ID：10228237
> 
> 赞同：0
> 
> 时间：2012-04-19T12:36:46.633
> 
> 标签：flash, apache-flex, flash-builder

看看下面的代码。

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" 
               xmlns:view="client.view.*" minWidth="955" minHeight="600">
    <s:Panel x="10" y="10" height="100%" title="CTW" borderColor="#008040" fontFamily="Arial" fontWeight="bold" fontSize="13">
        <s:HGroup>
            ...
            <s:Scroller id="canvasGroup" width="650" height="500">
                <s:Group>
                    <s:SpriteVisualElement>
                        <view:PNGCanvas id="canvas" />  <!-- error is thrown here -->
                    </s:SpriteVisualElement>
                </s:Group>
            </s:Scroller>
        </s:HGroup>
    </s:Panel>  
</s:Application> 
```

`PNGCanvas`延伸`flash.display.Sprite`。我收到一个错误`component declarations are not allowed here`（在标有 的行上`error is thrown here`）。这里有什么问题？

先感谢您！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:50:15.337

你的代码应该是这样的......

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"  
               xmlns:s="library://ns.adobe.com/flex/spark"  
               xmlns:mx="library://ns.adobe.com/flex/mx"  
               minWidth="955" minHeight="600" xmlns:view="view.*"> 
    <s:Panel x="10" y="10" height="100%" title="CTW" borderColor="#008040" fontFamily="Arial" fontWeight="bold" fontSize="13"> 
        <s:HGroup>
            <s:Scroller id="canvasGroup" width="650" height="500"> 
                <s:Group> 
                    <view:PNGCanvas width="100" height="100"/> 
                </s:Group> 
            </s:Scroller> 
        </s:HGroup> 
    </s:Panel>   
</s:Application> 
```

和 PNGCanvas 类应该由 SpriteVisualElement 扩展

```
package view
{   
    import spark.core.SpriteVisualElement;

    public class PNGCanvas extends SpriteVisualElement
    {
        public function PNGCanvas()
        {
            super();
        }
    }
} 
```

检查此代码...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:53:23.107

由于这个原因，您的代码可能无法正常工作...

SpriteVisualElement 类是 IVisualElement 接口的基于 Sprite 的轻量级实现。Spark 容器可以布局和渲染 SpriteVisualElement 对象。如果您使用 ActionScript 将 FXG 组件添加到应用程序，它应该是 SpriteVisualElement 类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:42:10.343

我很确定 SpriteVisualelement 不能有孩子（在 MXML 中），因为它不是容器。

您可以更改 PNGCanvas 以扩展 Canvas；然后用它代替你的 SpriteVisualElement。

此外，您可以使用 ActionScript 将您的 PNGCanvas 实例作为子项添加到您的 SpriteVisualElement；但它稍微复杂一些。

# javascript - 在 Outlook 中发送电子邮件 + 附加代码文件（javascript/AJAX 和 html 内容）

> ID：10228240
> 
> 赞同：1
> 
> 时间：2012-04-19T12:36:55.150
> 
> 标签：javascript, ajax, outlook

我只是想弄清楚一个奇怪的问题，到目前为止我还没有找到正确的答案，所以也许这里有人可以教我为什么会发生以下情况：

这个想法很容易。我想向朋友发送一封电子邮件，并附上代码文件。此代码文件是一个简单的 .html 文件，其中包含一些 AJAX/javascript 和 html 内容。当我的朋友打开文件时，脚本部分似乎在电子邮件传输过程中被删除。双方（发送方/接收方）都没有错误、警告或任何警报。是关于 Outlook 的吗？它是否会检查文件中的禁止脚本/代码并自行删除一些智能内容？使用基于 VPN 的网络可能有问题吗？我几乎不知道在这种情况下到底发生了什么。我可以想象它是一个处理这种修改的安全屏障，但我在 Outlook 的属性或 vpn 设置中找不到任何东西。

如果有人可以帮助我理解这种机制，我将不胜感激。

问候， Ohemgi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:43:35.100

这将是[Exchange 过滤掉您的脚本文件](http://technet.microsoft.com/en-us/library/bb124399.aspx)。您可以尝试重命名 JS 文件或将其打包成容器类型（zip、rar 等）。

# jmeter - 如何从 .csv 文件中读取字符串并将其拆分？

> ID：10228257
> 
> 赞同：0
> 
> 时间：2012-04-19T12:37:50.843
> 
> 标签：jmeter

我有一个 .csv 文件，我必须从中读取一个字符串并将其拆分为子字符串，例如：`s1:s2:s3`.
然后我必须把它分成`s1 s2 s3`.
基于“：”的拆分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:43:13.537

好吧，尝试使用以下 beanshell (=java) 代码将提取的“主题字符串”变量解析为单独的“主题”变量（来自[BeanShell Sampler](http://jmeter.apache.org/usermanual/component_reference.html#BeanShell_Sampler) ，例如）：

```
String line = vars.get("vSubjects");

if(line != null) {
    StringTokenizer st = new StringTokenizer(line, ":");

    int i = 0;
    while (st.hasMoreTokens()) {
        String subj = st.nextToken();

        i++;
        String varname = vars.get("vName") + "_subj_" + i;
        vars.put(varname,subj);
    }
} 
```

所以你会为每个字符串解析变量，如下所示（你可以使用[Debug Sampler](http://jmeter.apache.org/usermanual/component_reference.html#Debug_Sampler)来监控）：

```
John_subj_1=Maths
John_subj_2=Science
John_subj_3=History
. . .
vAge=23
vGender=Male
vName=John
vSubjects=Maths:Science:History 
```

# android - Android 数据库创建和列表视图

> ID：10228259
> 
> 赞同：0
> 
> 时间：2012-04-19T12:38:02.073
> 
> 标签：android

嗨，我对 android 很陌生。我想在 SQLite 中为 android 应用程序创建数据库。数据库中的数据将使用光标适配器显示在列表视图（图像、名称）中。这是最好的方法。我是否也必须拥有持有者类来保存为自定义列表创建的视图。有人可以通过示例指导我吗...感谢您逐步解释。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:55:13.763

请参阅动态列表视图[的](http://android-example-code.blogspot.in/p/dynamic-custoized-list-view-in-android.html)完整示例

# android - 如何在android的登录页面中使用共享偏好概念

> ID：10228260
> 
> 赞同：0
> 
> 时间：2012-04-19T12:38:03.027
> 
> 标签：android

当我在单击登录按钮时提供用户名和密码时，意味着登录将成功。当我在单击复选框时提供用户名和密码时，如果我成功登录并且我现在关闭应用程序，如果我再次打开应用程序用户名和密码必须是他们在文本框中的密码。现在我直接点击登录按钮，它必须完全登录成功。

我试试这段代码

```
public class Login extends Activity {
    CheckBox check;

    private static final String UPDATE_URL = "http://202.62.91.45/NewCozyDine/login1.php3";
    public ProgressDialog progressDialog;
    private EditText UserEditText;
    private EditText PassEditText;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        progressDialog = new ProgressDialog(this);
        progressDialog.setMessage("Please wait...");
        progressDialog.setIndeterminate(true);
        progressDialog.setCancelable(false);
        UserEditText = (EditText) findViewById(R.id.username);
        PassEditText = (EditText) findViewById(R.id.password);
        check=(CheckBox) findViewById(R.id.checkbox);
        Button button = (Button) findViewById(R.id.okbutton);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                int usersize = UserEditText.getText().length();
                int passsize = PassEditText.getText().length();
                if(usersize > 0 && passsize > 0) {
                    progressDialog.show();
                    String user = UserEditText.getText().toString();
                    String pass = PassEditText.getText().toString();
                    doLogin(user, pass);
                } else createDialog("Error","Please enter Username and Password");
            }
        }); 
```

我为 xml 解析器的登录按钮编写了（从服务器数据库验证）。如何写复选框以记住

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:48:22.493

只需在选中的复选框上识别它。在其 Listner 上，您必须使用 SharedPreference，这会将您的数据保存在应用程序中。

```
CheckBox savepass;
public static final String PREFS_NAME = "MyPrefsFile";
private static final String PREF_USERNAME = "username";
private static final String PREF_PASSWORD = "password";
private static final String PREF_STATUS = "status";

savepass = (CheckBox) findViewById(R.id.remeber);
savepass.setChecked(false); 
```

//在登录按钮上写这段代码。此代码用于保存在 SharedPreference

```
if (savepass.isChecked()) {
                getSharedPreferences(PREFS_NAME, MODE_PRIVATE).edit()
                        .putString(PREF_USERNAME, uid.getText().toString())
                        .putString(PREF_PASSWORD, pwd.getText().toString())
                        .putString(PREF_STATUS, "true").commit();
                /*
                 * Toast.makeText(getApplicationContext(),
                 * "Saved Successfully", Toast.LENGTH_LONG).show();
                 */
            }else {
                getSharedPreferences(PREFS_NAME, MODE_PRIVATE).edit()
                        .putString(PREF_USERNAME, "").putString(
                                PREF_PASSWORD, "").putString(PREF_STATUS,
                                "").commit();
//this else part is if user has already been checked and saved in application, then name of the user will be displayed on username and password edittextbox.
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:50:10.980

```
if (successful login and remember-me checkbox is marked...) {
    SharedPreferences SP = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    SharedPreferences.Editor spEditor = SP.edit();
    spEditor.putString("username"),userName);
    spEditor.putString("password",password);
    spEditor.commit(); 
```

然后在 onCreate 上，您只需检查它是否已经存在，如果存在则显示它。

```
SharedPreferences SP = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    userName = SP.getString("username", "none");
if (!userName.equal("none"))
    editText.setText(userName);
.... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T12:43:51.233

像这样试试

```
 public SharedPreferences prefs;
 public String prefName = "MyPref";
 private static final String REMEMBER = "remember_me";
 public static final String Password = "volume_range";
 public static final String User_Name = "my_alarmstate";
 prefs = getSharedPreferences(prefName, MODE_PRIVATE);      
 remember_state  = prefs.getBoolean(REMEMBER, false);   
 remember_chebox.setChecked(remember_state);
 if(remember_state == true) {

            uname_et.setText(prefs.getString(User_Name, null));
            password_et.setText(prefs.getString(Password, null));
        }

SharedPreferences.Editor editor = prefs.edit();

                editor.putString(User_Name, entered_name);
                editor.putString(Password, entered_password);   
                editor.putBoolean(REMEMBER, remember_state);
                editor.commit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T13:03:13.250

当您即将`SharedPreferences`在您的应用程序中使用时。我希望您在这个 SO 链接中查找`SharedPreferences`。

转到此处[在 SharedPreferences 中保存数据](https://stackoverflow.com/questions/785973/what-is-the-most-appropriate-way-to-store-user-settings-in-android-application)。我希望您对密码使用加密。

有关在 Android 中使用 AES 加密的指南，请参阅此

[http://developer.motorola.com](http://developer.motorola.com/docs/using_the_advanced_encryption_standard_in_android/)

# asp.net - Telerik 节点点击和图表刷新

> ID：10228263
> 
> 赞同：0
> 
> 时间：2012-04-19T12:38:18.407
> 
> 标签：asp.net, telerik

我正在使用带有 Telerik 图表控件的 Telerik 树视图。我想在节点单击时刷新/重新加载图表。有什么样品吗？

请建议当用户单击 Treeview 节点时如何在图表上显示节点相关数据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:53:29.823

许多技术可用于树视图的按需加载：

*   客户端
*   服务器端
*   网络服务
*   页面方法

[Telerik 的文档](http://demos.telerik.com/aspnet-ajax/treeview/examples/programming/loadondemandmodes/defaultcs.aspx)真的很全，建议大家看看。

# c++ - 使用右值引用和自动

> ID：10228264
> 
> 赞同：5
> 
> 时间：2012-04-19T12:38:22.120
> 
> 标签：c++, c++11

鉴于下面的代码，一切正常。为什么变量 d 是对 int 的引用？到底是怎么回事？

```
int main()
{
    int a= 10;
    int &&b = a+10; // b is int &&
    auto c =b+10; // c is int
    auto &&d = a; // d is int&
    //int &&di = a; // error, as expected
    return (0);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T14:03:33.370

这与类型推导中的*引用折叠规则有关。*

```
A& & becomes A&
A& && becomes A&
A&& & becomes A&
A&& && becomes A&& 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T05:01:00.747

在引用折叠规则之上值得一提的是如何强制 d 成为右值引用。您可以为此使用 std::move ：

```
int a =4; 
auto &&d = std::move(a); // d is type && 
```

当然，在谈论整数时，右值引用是愚蠢的，因为按值传递同样有效。这对于强制移动语义优化很有用，比如如果您想在函数末尾插入一个复杂类型，该类型将超出范围......

```
vector<std::string> v;
void f()
{
    string s;
    foo(s); // do some kind of operation on s.
    v.push_back(std::move(s)); // use push_back( &&) instead of push_back(const &); 
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T02:37:39.600

类型扣除有一个特殊规则。在`auto &&d = a;`“auto&&”中是对非 const 非易失类型的右值引用，而“a”是左值，则应用此特殊规则：“a”的类型被视为 int& 而不是 int。然后像往常一样选择“auto”的类型与“a”的类型相同，即int&。因此，根据 bames53 提到的参考折叠，“auto&&”的类型是 int&。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T12:41:34.727

`auto&&`调用完美转发。As`a`是类型的左值`int`，`d`是对 的左值引用`int`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-04T21:26:54.980

您需要`std::forward`结合使用`auto&&`来获得您最可能想要的行为。请参阅以下示例代码：

```
#include <iostream>

template <class T>
void f(T&& x) {
    std::cout << "R-value!" << std::endl;    
}

template <class T>
void f(T& x) {
    std::cout << "L-value!" << std::endl;    
}

int get() {
    return 0;    
}

int main()
{
    // Correct usage
    {
        std::cout << "Correct usage" << std::endl;
        auto&& s = get();
        f(std::forward<decltype(s)>(s)); // Prints: R-value!
        std::cout << "----------------------------\n" << std::endl;
    }

    // Above code is robust to refactorings
    {
        std::cout << "After refactoring" << std::endl;
        int i = 5;
        auto&&s = i;
        f(std::forward<decltype(s)>(s)); // Prints: L-value!
        std::cout << "----------------------------\n" << std::endl;
    }
    // Forward is necessary, else l-value version is called.
    {
        std::cout << "Forgetting forward" << std::endl;
        auto&& s = get();
        f(s); // Prints: L-value!
        std::cout << "----------------------------\n" << std::endl;
    }
} 
```

这里有一个自己运行的链接：http: [//cpp.sh/8lducx](http://cpp.sh/8lducx)

# visual-studio-2010 - 如何更改 Visual Studio 2008/2010 的加载项文件夹位置，以便安装 Chirpy

> ID：10228266
> 
> 赞同：0
> 
> 时间：2012-04-19T12:38:33.573
> 
> 标签：visual-studio-2010, visual-studio-2008, chirpy

插件当前正在尝试添加到：My Documents\Visual Studio 2008\Addins 和 My Documents\Visual Studio 2010\Addins

由于我们的网络设置，备份的网络共享上已关闭。

当我尝试安装[Chirpy 时](http://chirpy.codeplex.com/)，我们的网络策略启动并说我无法将 DLL 复制到该位置。

如何更改已安装的附加地址信息？Chirpy 安装程序没有让您有机会更改安装位置，所以猜测它以某种方式从 VS 得到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:09:18.750

我设法解决了这个问题。

Chirpy.vsi 文件可以重命名为 .zip。

这让我可以把内容拿出来。

从工具菜单->选项->环境->加载项/宏安全

在我的 C 驱动器上添加了一个新文件路径，并将 3 个 Chirpy 文件放在那里。

然后 Chirpy 出现在 Add In Manager 的 Tools-> Add In Manager 中，勾选复选框以在启动时启动它。

重新启动VS，Chirpy就像一个魅力。

# javascript - Backbone.js 在集合添加时触发渲染两次

> ID：10228267
> 
> 赞同：8
> 
> 时间：2012-04-19T12:38:35.633
> 
> 标签：javascript, backbone.js

在学习 Backbone.js时，我正在使用[与最新版本的 Backbone (0.9.2) 捆绑在一起的 Todos 示例应用程序。](https://github.com/documentcloud/backbone/)我的问题是，为什么应用程序在将模型添加到 Todos 集合时会触发两次渲染事件？

如果我将此行放在 TodoView 的渲染函数中：

```
// Re-render the titles of the todo item.
render: function() {
  console.log("Rendering!");
  this.$el.html(this.template(this.model.toJSON())); 
```

然后“渲染！” 在控制台中出现两次。我理解这是因为视图将模型的更改事件绑定到视图的渲染：

```
initialize: function() {
  this.model.bind('change', this.render, this); 
```

并且在 addOne 中调用了 render，它绑定了 Todos 的 add 事件：

```
addOne: function(todo) {
  var view = new TodoView({model: todo});
  this.$("#todo-list").append(view.render().el);
}, 
```

但这就是双渲染设计的标准做法吗？看起来视图应该在创建（或进入 DOM）时呈现，然后在底层模型发生变化时再次呈现。在这种情况下，什么都没有改变，但是 render 被调用了两次。

同样，我只是在学习 Backbone，所以我可能有一个基本的误解导致我的困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T15:45:04.100

嗯，快速浏览了一下。发生这种情况是对的，不，这不是标准做法。原因有点模糊，请耐心等待；）

待办事项应用程序正在使用主干本地存储。当您尝试在应用程序中添加新项目时，它会调用：

```
createOnEnter: function(e) {
  if (e.keyCode != 13) return;
  if (!this.input.val()) return;

  Todos.create({title: this.input.val()});
  this.input.val('');
}, 
```

注意`Todos.create`. 通常，a`create`会将模型添加到集合中并将其保存在服务器上。该`add`事件将因此被触发。尽管主干本地存储在以下情况下会发生这种情况`create`：

```
create: function(model) {
  if (!model.id) model.set(model.idAttribute, guid());
  this.data[model.id] = model;
  this.save();
  return model;
}, 
```

注意`model.set`给模型一个id。这就是触发（第二个）`change`事件的原因。

您可以通过将 create 更改为 do 来阻止这种情况发生：

`if (!model.id) model.id = guid();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:09:50.710

*重新渲染*不应该发生。

尝试*调试*更多。尝试将*更改*事件绑定到*包装器方法*，例如：

```
initialize: function(){
  this.model.bind( "change", this.renderWrapper, this );
}, 

renderWrapper: function(){
  console.log( "in the renderWrapper" );
  this.render();
} 
```

确保第二个`render()`是为*更改事件绑定*而不是出于其他原因。

# javascript - 如何编写一个javascript函数来检查我的文本框是否包含特殊字符？

> ID：10228271
> 
> 赞同：1
> 
> 时间：2012-04-19T12:38:57.897
> 
> 标签：javascript, asp.net, regex

我想使用 java 脚本检查我的文本框是否包含特殊字符。为此，我使用以下代码

```
function CheckUserId() {
    var txt = document.getElementById('<%=TextBox1.ClientID%>').value;
    var regexp = "/^[a-zA-Z0-9]+$/";
    if (regexp.match(txt)) {
        alert("No special character ");
        return true;
    }
    else {
        alert("Special character");
        return false;
    }
    } 
```

我在文本框 onblur 上调用这个 java 脚本函数。文本框代码如下

```
 <asp:TextBox ID="TextBox1" runat="server" onblur="CheckUserId()" ></asp:TextBox> 
```

但它总是显示警告消息“特殊字符”。我的代码有什么问题？请帮我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T12:47:51.043

您的 if 语句中有错误的字符串和模式。javascript 匹配的语法是`string.match(regexp)`. 请尝试：

```
if (txt.match(regexp)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T12:55:28.867

除了其他人指出的，您还犯了另一个错误：`var regexp = "/^[a-zA-Z0-9]+$/"`是字符串，而不是 RegExp 对象。[删除](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)正则表达式周围的引号或使用`var regexp = new RegExp("/^[a-zA-Z0-9]+$/")`语法。

这是工作示例：http: [//jsfiddle.net/LJdeE/](http://jsfiddle.net/LJdeE/)

```
function CheckUserId() {
    var txt = document.getElementById('<%=TextBox1.ClientID%>').value;
    var reg = /^[a-zA-Z0-9]+$/;
    if (reg.test(txt)) {
        alert("No special character");
        return true;
    }
    else {
        alert("Special character");
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:51:05.760

它是`(text.match(regex))`和**不是** `(regex.match(text))`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T13:00:30.927

```
^\s*([0-9a-zA-Z ]+)\s*$ 
```

试试这个正则表达式。我已经尝试过了它正在工作

# jquery - 如何通过jquery从img src中删除额外的路径

> ID：10228274
> 
> 赞同：0
> 
> 时间：2012-04-19T12:39:05.570
> 
> 标签：jquery

现在我在 img src 中获得了这条路径

```
<img alt="test" src="http://www.wsoradio.com/wp-content/uploads/http://www.wsoradio.com/wp-content/files/acbreviews/a4/B001THPA4Y/smallimage.jpg"> 
```

但我需要输出

```
<img alt="test" src="http://www.wsoradio.com/wp-content/files/acbreviews/a4/B001THPA4Y/smallimage.jpg"> 
```

我想通过 jquery在[http://www.wsoradio.com/wp-content/files/acbreviews/a4/B001THPA4Y/smallimage.jpg之前从 img src 中删除这个额外的路径](http://www.wsoradio.com/wp-content/files/acbreviews/a4/B001THPA4Y/smallimage.jpg)

```
http://www.wsoradio.com/wp-content/uploads/  (want to remove it) 
```

请指导我怎么做，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:41:40.500

你不应该有 2 个网址，但如果你坚持：

```
$("img ").attr("src",$("img ").attr("src").split('http://www.wsoradio.com/wp-content/uploads/')[1]) 
```

# python - Python 命令中的“r”

> ID：10228275
> 
> 赞同：3
> 
> 时间：2012-04-19T12:39:11.300
> 
> 标签：python

这可能在某个时候在某个地方得到了回答，但是我看到的标题没有连接，所以就这样了。我见过 python 命令读取`os.listdir(r".\bootstrapper")`. 在`'r'`做什么？

干杯...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T12:41:57.270

它防止 Python 解释器将任何特殊含义附加到字符串中的特殊字符（例如反斜杠），并按原样解释它（即，以其“原始”形式）。这是您可以“转义”您使用的字符串中的特殊字符的一种方法。

您经常会在路径规范中看到原始字符串。假设路径包含以 t 开头的目录，例如 ，`c:\tests\data.csv`因此您不希望`\t`被解释为制表符，因此使用`r`修饰符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T12:40:34.620

r 标记原始输入。这意味着字符串中的正常转义字符被忽略（如 \ ）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T12:40:42.147

这是一个*原始字符串*，它消除了反斜杠的特殊性质。

[参考](http://docs.python.org/reference/lexical_analysis.html#string-literals)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T12:40:59.660

它使它成为一个原始字符串。换句话说，将保留反斜杠。 `'\n'`被解释为换行符，但`r'\n'`被解释为文字字符 '\' 和 'n'。

另请注意，有时您会看到`u'string'`您是否使用 python2.x 代码。这意味着该字符串应被解释为 unicode 字符串。（在 python 3.x 中，所有字符串都被解释为 unicode）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T02:55:54.740

`r`意味着`raw input`。如果一个字符串被标记为`r`，那么字符串中任何特殊字符的含义都将被忽略，最常见的情况是`backslash`。

# mysql - mysql内部连接两个具有int和enum数据类型的表

> ID：10228276
> 
> 赞同：0
> 
> 时间：2012-04-19T12:39:14.493
> 
> 标签：mysql

如何连接具有不同数据类型的两个表表？在第一个表中，状态字段类型是枚举，在第二个表中它是 int，我如何加入这些表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:42:47.460

Enum 类型由 MySQL 存储为 int，因此您可以像往常一样进行连接。但如果两个字段不同，您应该尽可能地转换其中一个以使其类型匹配（通常使用转换函数[http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html)）

# android - 如何通过手指滑动来传递多个活动？

> ID：10228278
> 
> 赞同：0
> 
> 时间：2012-04-19T12:39:26.500
> 
> 标签：android

我正在做一个儿童应用程序，在这里我想通过用手指滑动来传递多个页面（活动），因为它的用户友好，尤其是对孩子们来说。所以我尝试使用水平页面控制器，但在这里我只能传递像 textview 这样的视图， imageview，...这里将每个视图视为一个页面。但我必须传递活动。这些活动我需要添加 myviews。所以我正在动态创建 xml 文件。所以请建议我，我怎样才能通过滑动来传递多个活动。或者请让我知道除了水平页面控制器之外......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:45:18.713

我建议使用[ViewPager](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:47:13.540

我的方法是从 v4 兼容性 jar 创建`Fragments`（而不是`Activities`）并使用`ViewPager`

[http://android-developers.blogspot.com/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html)

# html - 如何使页眉和页脚之间的 DIV 高度为 100%

> ID：10228280
> 
> 赞同：19
> 
> 时间：2012-04-19T12:39:30.093
> 
> 标签：html, css, css-position, sticky-footer

有没有办法设置布局，使页眉为 50 像素，正文为 100%，页脚为 50 像素？

我希望身体至少用完整个观看区域。我希望页脚和页眉始终显示在屏幕上

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-19T12:56:38.293

我在 jsfiddle 中创建了一个示例：

更新的 JsFiddle：http: [//jsfiddle.net/5V288/1025/](http://jsfiddle.net/5V288/1025/)

HTML：

```
<body>
    <div id="header"></div>
    <div id="content"><div>
        Content 
    </div></div>
    <div id="footer"></div>
</body> 
```

CSS：

```
html { height: 100%; }
body {
    height:100%;
    min-height: 100%;
    background: #000000;
    color: #FFFFFF;
    position:relative;
}
#header {
    height:50px;
    width:100%;
    top:0px;
    left:0px;
    background: #CCCCCC;
    position:fixed;
}
#footer {
    height:50px;
    width:100%;
    bottom:0px;
    left:0px;
    background: #CCCCCC;
    position:fixed;
}
#content {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    height:100%;
    padding: 0 20px;
}
#content > div {
    padding: 70px 0;
} 
```

没有边框框的内容将是高度 100% + 140px 填充。使用边框框，内容高度将为 100%，并且填充将在内部。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T13:17:44.150

只是对 Andreas Winter 解决方案的修复：

[http://jsfiddle.net/5V288/7/](http://jsfiddle.net/5V288/7/)

*使用它的解决方案，如果内容大于可用窗口区域，您将遇到问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-16T05:12:00.857

我认为您正在寻找的是“多个绝对坐标”。A List Apart 在[这里](http://www.alistapart.com/articles/conflictingabsolutepositions/)有一个解释，但基本上，您只需将主体的位置指定为绝对位置，并同时设置`top: 50px`和`bottom: 50px`：

```
<body>
<style>
#header {
  position: absolute;
  height: 50px;
} 

#body {     
  position: absolute;
  top: 50px;
  bottom: 50px;
  background-color: yellow;
}

#footer {
  position:absolute;
  height: 50px;
   bottom: 0;
}
</style>
<div id="header">Header</div>
<div id="body">Content goes here</div>
<div id="footer">Footer</div> 
```

[http://www.spookandpuff.com/examples/absoluteCoordinates.html](http://www.spookandpuff.com/examples/absoluteCoordinates.html)以更漂亮的方式展示了该技术。

# javascript - 替换 JavaScript 中的特殊字符

> ID：10228282
> 
> 赞同：0
> 
> 时间：2012-04-19T12:39:34.790
> 
> 标签：javascript

如何在 javascript 中替换 '$txt$'。我想替换字符串中的所有匹配项

这是我试过的

```
if (html.indexOf('$txt$') > -1) {
    html = html.replace(/$txt$/ig, '<input type=text></input>');
} 
```

但它不会替换字符串。我的错误是什么。请帮帮我

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T12:42:02.277

您需要做的就是转义 $ 符号，因为它在正则表达式中具有含义。将其更改为

```
html = html.replace(/\$txt\$/ig, '<input type="text" />'); 
```

应该没问题:)

编辑：$ 表示正则表达式中的行尾:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:46:26.067

html = html.replace(/[$]txt[$]/ig, ''); 用这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:48:32.803

您正在使用[正则表达式](http://www.regular-expressions.info/reference.html)进行替换，并且`$`是正则表达式为行尾/字符串保留的特殊字符。

您需要`$`通过在它前面加上一个反斜杠来转义它`\`以使其达到其文字字符：

```
if (html.indexOf('$txt$') > -1) {
    html = html.replace(/\$txt\$/ig, '<input type=text></input>');
} 
```

# c# - 等待在 vb.net 中关闭无模式对话框

> ID：10228294
> 
> 赞同：1
> 
> 时间：2012-04-19T12:40:16.163
> 
> 标签：c#, .net, vb.net, dialog

在表单中，我有一个按钮，该按钮具有从（通过鼠标单击）父应用程序中获取一些数据的功能。

我有父应用程序句柄的句柄，但即使我试图将它放在顶部，我也无法进行选择，因为表单是模态的。

这里的要求是**打开无模式对话框并等待它关闭。**否则它会更进一步并执行下面的功能。

另一个选项可以是**打开形式作为 modal 并在运行时将其更改为 modaless**。

**但是怎么做呢？:)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:42:44.383

假设 WinForms... 当你创建对话框时，钩入它的`FormClosed`事件。当它关闭时，此事件将触发并且您的原始表单将被通知（假设事件处理程序是原始表单）。

就像是：

```
class MainForm : Form
{
    private ChildForm _childForm;

    public void ShowChildForm()
    {
        _childForm = new ChildForm();
        _childForm.FormClosed += (s, e) => MessageBox.Show("Child was closed.");
        _childForm.Show();
    }
} 
```

也就是说，如果您需要*等到*它关闭，那么这听起来很像***模态***对话框：

```
_childForm.ShowDialog(); 
```

这将在主窗体上阻塞，直到子窗体关闭。无需挂钩关闭的事件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T13:03:12.270

您的问题没有完全意义，但到目前为止尝试回答 -

您可以使用显示模式对话框

```
Form1.ShowDialog 
```

如果您需要显示另一个模态对话框，您可以这样做：

```
Form2.ShowDialog 
```

*当前显示模态*对话框时，您不能显示*非模态*对话框。

# javascript - 使用 Javascript 解析 XML

> ID：10228304
> 
> 赞同：0
> 
> 时间：2012-04-19T12:41:02.340
> 
> 标签：javascript, xml, parsing

我试图将 xml 文件解析为 html。所以我atm跟着

```
<script>
  xmlDoc=new window.XMLHttpRequest();
  xmlDoc.open("GET","test",false);
  xmlDoc.send("");
</script> 
```

现在我想“回应”这个请求，我该怎么做

```
<?xml version="1.0"?>
<catalog>
   <book id="bk101">
      <author>Gambardella, Matthew</author>
      <title>XML Developer's Guide</title>
      <genre>Computer</genre>
      <price>44.95</price>
      <publish_date>2000-10-01</publish_date>
      <description>An in-depth look at creating applications 
      with XML.</description>
   </book>
</catalog> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:54:21.983

试试这个 ：

```
xmlDoc=new window.XMLHttpRequest() || new ActiveXObject("Microsoft.XMLHTTP") || new ActiveXObject("Msxml2.XMLHTTP");
xmlDoc.onreadystatechange = function(){
    if(xmlDoc.readyState = 4 && xmlDoc.status == 200)  // Success
    {
        document.write(xmlDoc.responseText);
    }
}
xmlDoc.open("GET","test",false);
xmlDoc.send(""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:55:06.417

***解析 XML 字符串***

以下代码片段将 XML 字符串解析为 XML DOM 对象：

```
txt="<bookstore><book>";
txt=txt+"<title>Everyday Italian</title>";
txt=txt+"<author>Giada De Laurentiis</author>";
txt=txt+"<year>2005</year>";
txt=txt+"</book></bookstore>";

if (window.DOMParser)
{
  parser=new DOMParser();
  xmlDoc=parser.parseFromString(txt,"text/xml");
}
else // Internet Explorer
{
  xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
  xmlDoc.async=false;
  xmlDoc.loadXML(txt); 
} 
```

* * *

***解析 XML 文档***

以下代码片段将 XML 文档解析为 XML DOM 对象：

```
if (window.XMLHttpRequest)
{ // code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
}
else
{ // code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.open("GET","books.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:56:11.320

您可以警告（“您的数据或此处的文本”）数据并将其显示在弹出窗口中，或者使用各种方法选择一个 div 并使用 .html(data) 插入您的数据。

# javascript - 未调用 IE 兼容模式 JavaScript 函数

> ID：10228305
> 
> 赞同：0
> 
> 时间：2012-04-19T12:41:04.080
> 
> 标签：javascript, jquery, internet-explorer

我在一个运行正常的外部 .js 文件中有一些 JavaScript(1.7.2)。但是在检查 IE 兼容模式以确保它与 IE7+ 兼容后，我遇到了一个问题。在页面加载时调用的函数 loader() 中，调用 chooseImage(img) 会阻止后续调用 timeImgChange()。如果我更改这两个调用的顺序，问题仍然存在，因为没有调用 chooseImage()。希望有人能帮忙，尼尔。

```
window.onload = loader;

function loader(){
    var img = document.getElementById('selector_chicks');
    chooseImage(img); //This function call works
    timeImgChange();  //Not called. Works in IE9\. Is called if chooseImage() is removed
}

function chooseImage(img){
    document.getElementById('chooseimage').src = imageMap[img.title].path;
    document.getElementById(img.id).style.background = "#A66B00";
    document.getElementById('textselected').innerHTML = imageMap[img.title].text;

    /*unselect the other divs*/
    var selectors = document.getElementsByClassName('selector');
    for (var i = 0; i < selectors.length; i++){
        if (selectors[i].title != img.title){
            selectors[i].style.background = "#261e1e";
        }
    }
}

function timeImgChange() {  /*Change the image ever x milliseconds*/
    var imgIdArray = ["selector_egg", "selector_chicks", "selector_poults"];
    var n = 1;
    setInterval(function(){ 
      if (doImageCycle){
          var img = document.getElementById(imgIdArray[n]);
          chooseImage(img);
          n++;
          if (n > 2) {n = 0;}
       }
     }, 2000); 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T12:43:34.430

[IE < 9 不支持`getElementsByClassName`.](http://caniuse.com/getelementsbyclassname) 由于`chooseImage`函数依赖于它，引擎将抛出错误而不是继续运行您的代码。

# c++ - 是否有基于参数设置变量的约定？

> ID：10228309
> 
> 赞同：0
> 
> 时间：2012-04-19T12:41:10.663
> 
> 标签：c++, conventions

假设我有一个带有标志或其他东西的函数：

```
void foo (Param p1, Param p2, bool setVariable)
{
    //if setVariable is true, set some bool var to true, else false
} 
```

是否有强烈偏好以下各项？

```
if (setVariable)
    _someClassVariable = true;
else
    _someClassVariable = false; 
```

或者

```
_someClassVariable = setVariable; 
```

显然，第二个打字更少，但第一个让我觉得更具可读性。哪一个会更受欢迎？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:44:55.507

我会选择第二个，它同样具有可读性。可读性更多的是变量的名称，而不是两个选项的选择。如果变量和参数有好的名称，那么赋值就会很自然。这类似于从您不会执行的函数返回布尔值：

```
bool conditionHolds() {
    if (condition)
       return true;
    else
       return false;
} 
```

（如果您正在考虑这样做，请重新考虑）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T12:46:03.930

我一般更喜欢第二种。对我来说，第一个将是一个强烈的警告，即编写代码的人充其量只能勉强胜任。

也就是说，我也倾向于建议不要将 bool 作为参数传递。很难立即看出`foo(true);`vs.的`foo(false);`真正含义。通常最好使用枚举，这样你就可以得到`foo(do_this);`vs了。`foo(do_that);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T12:45:03.417

我更喜欢第二个。如果减少打字对你来说还不够，还要考虑你同事的意见。如果我看到类似的东西，我个人会笑

```
if (condition)
   return true;
else
   return false; 
```

在生产代码中。（假设变量是布尔值，并且您没有使用它来实现某些强制转换机制）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T12:45:11.357

后者要好得多， if else 看起来毫无用处，并在代码和编译器生成的代码生成中引入了额外的复杂性（尽管可能已优化掉）。

我也会避免使用前导下划线符号，其中一些名称是为标准库和编译器保留的。

# .net - WPF ContextMenu 将 MenuItem 图标绑定到 MenuItem 标头

> ID：10228310
> 
> 赞同：-1
> 
> 时间：2012-04-19T12:41:11.730
> 
> 标签：.net, wpf, data-binding, contextmenu

请解释为什么这不起作用..

```
 <ContextMenu>     
      <MenuItem>
          <MenuItem.Header>
               <TextBox Name="tbColor" Text="Black" />
          </MenuItem.Header>
          <MenuItem.Icon>
               <TextBox Text="{Binding ElementName=tbColor,Path=Text}" />
          </MenuItem.Icon>                                                                    
      </MenuItem>
 </ContextMenu> 
```

我尝试了几种方法，但没有。`RelativeSource`不行。。

编辑..从另一个控件绑定工作..

```
<DataGrid Foreground="{Binding ElementName=tbColor,Path=Text,Converter={StaticResource textToBrushConverter}}">          
        <DataGrid.ContextMenu>
            <ContextMenu>.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:20:04.893

快速浏览[MSDN](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.WINDOWS.CONTROLS.HEADEREDITEMSCONTROL.HEADER%29;k%28VS.XAMLEDITOR%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29&rd=true)关于`ContextMenu`,的内容`MenuItem`，`HeaderedItemsControl`看起来您可以将任何您想要的内容放入`MenuItem` `Header`. 仔细检查表明情况并非如此。a的`Header`属性`MenuItem`实际上是在寻找一个字符串。您可以通过在 中放置 a`TextBlock`而`Header`不是`TextBox`.

`Icon`虽然我没有深入研究它，但我怀疑对象的属性也是如此（除了 Image）`MenuItem`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:05:19.947

让原始代码像这样工作..丑陋但出于我自己的理智..

```
<MenuItem.Header>
   <TextBox Name="tbColor" Text="Black" TextChanged="tbColor_TextChanged" />
</MenuItem.Header>
<MenuItem.Icon>
   <Rectangle Name="rectangleColor" Width="20" Height="20" />
</MenuItem.Icon> 
```

在后面的代码中..

```
private void tbColor_TextChanged(object sender, TextChangedEventArgs e)
    {
        try
        {
            rectangleColor.Fill = new SolidColorBrush((Color) ColorConverter.ConvertFromString(((TextBox) sender).Text));
        }
        catch (Exception)
        {
            return;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:31:35.183

控件可视树之外的上下文菜单，因此找不到元素名称。尝试 -

> {绑定 PlacementTarget，RelativeSource={RelativeSource FindAncestor，AncestorType={x:Type ContextMenu}}}"

# c# - 以 WAV 格式从麦克风捕获流

> ID：10228312
> 
> 赞同：6
> 
> 时间：2012-04-19T12:41:17.783
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime, .net-4.5

我正在将 Metro 风格的应用程序从 windows phone 7.5 迁移到 windows 8。我的应用程序用于捕获麦克风输入流。

我在 Metro 风格应用程序的 win 8 api 中找到[了 MediaCapture](http://msdn.microsoft.com/en-us/library/windows/apps/windows.media.capture.mediacapture.aspx)类，但我看不到以 wav 编码获取麦克风输入流的可能性。

切换到另一种编码格式会显着影响代码库。

是否有可能以 wav 编码捕获麦克风流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:47:11.333

是的。我推荐你使用 Naudio 类，并且在源代码下你可以很容易地找到如何捕获记录。这是代码[示例](http://voicerecorder.codeplex.com/)

享受！

# c# - 复制多个图像并显示磁贴通知？

> ID：10228313
> 
> 赞同：1
> 
> 时间：2012-04-19T12:41:19.253
> 
> 标签：c#, microsoft-metro

这是我的代码，其中我将 1 个图像从本地文件夹复制到我的应用程序存储文件夹，然后它显示一个磁贴通知。请帮助我复制所有图像，然后将这些图像显示在磁贴通知中。

```
namespace Tiles
{
    public sealed partial class BlankPage : Page
    {
        string imageRelativePath = String.Empty;

        public BlankPage()
        {
            this.InitializeComponent();
            CopyImages();
        }

        public async void CopyImages()
        {

            FileOpenPicker picker = new Windows.Storage.Pickers.FileOpenPicker();
            picker.ViewMode = PickerViewMode.Thumbnail;
            picker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
            picker.FileTypeFilter.Add(".jpg");
            picker.FileTypeFilter.Add(".jpeg");
            picker.FileTypeFilter.Add(".png");
            picker.CommitButtonText = "Copy";
            StorageFile file = await picker.PickSingleFileAsync();
            StorageFile newFile = await Windows.Storage.ApplicationData.Current.LocalFolder.CreateFileAsync(file.Name);
            await file.CopyAndReplaceAsync(newFile);
            this.imageRelativePath = newFile.Path.Substring(newFile.Path.LastIndexOf("\\") + 1);

                    IWideTileNotificationContent tileContent = null;
                    ITileWideImage wideContent = TileContentFactory.CreateTileWideImage();
                    wideContent.RequireSquareContent = false;
                    wideContent.Image.Src = "ms-appdata:///local/" + this.imageRelativePath;
                    wideContent.Image.Alt = "App data";
                    tileContent = wideContent;
                    tileContent.RequireSquareContent = false;
                    TileUpdateManager.CreateTileUpdaterForApplication().Update(tileContent.CreateNotification());
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:18:15.353

Instead of calling `.PickSingleFileAsync()` you should call `.PickMultipleFileAsync()`. See [PickMultipleFileAsync Docs](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.pickers.fileopenpicker.pickmultiplefilesasync.aspx) for an example of how to get all the file names returned.

You code that you have now that copies one file and create a tile, should be surround by a loop that goes through all the files returned by `.PickMultipleFileAsync()`

I didn't test this, but it should look a little like this:

```
FilePickerSelectedFilesArray  files = await picker.PickMultipleFileAsync(); 
for (var i = 0; i < files.size; i++) 
{
     StorageFile newFile = await 
             Windows.Storage.ApplicationData.Current.LocalFolder
             .CreateFileAsync(files[1].Name); 
    await file.CopyAndReplaceAsync(newFile); 
    this.imageRelativePath = newFile.Path.Substring(
           newFile.Path.LastIndexOf("\\") + 1); 
    IWideTileNotificationContent tileContent = null; 
    ITileWideImage wideContent = TileContentFactory.CreateTileWideImage(); 
    wideContent.RequireSquareContent = false; 
    wideContent.Image.Src = "ms-appdata:///local/" + this.imageRelativePath; 
    wideContent.Image.Alt = "App data"; 
    tileContent = wideContent; 
    tileContent.RequireSquareContent = false; 
    TileUpdateManager.CreateTileUpdaterForApplication().Update(
          tileContent.CreateNotification()); 
} 
```

# c++ - Visual Studio 2010 不构建标头更新

> ID：10228314
> 
> 赞同：0
> 
> 时间：2012-04-19T12:41:21.687
> 
> 标签：c++, visual-studio-2010, header-files

我正在使用带有 C++ 的 Visual Studio 2010，尽管将预编译标头选项设置为“不使用预编译标头”，但它仍然坚持忽略我的标头。在另一台机器上，它可以在相同的设置下正常工作。我怎样才能解决这个问题？

复杂的.h

```
#include <cmath>
#include <cstdlib>
using namespace std;

class Complex{

private:
    double real, imaginary, magnitude, angle;
    double rectangularToMagnitude(double, double);
    double rectangularToAngle(double, double);
    double polarToReal(double, double);
    double polarToImaginary(double, double);
public:
    Complex (char, double, double);
    Complex (double, double);
    Complex (double);
    Complex ();

    double getReal();
    double getImaginary();
    double getMagnitude();
    double getAngle();

    void setRectangular(double, double);
    void setPolar(double, double);
}; 
```

复杂的.cpp

```
#include "Complex.h"

// Three arguments passed, type and variables.
Complex::Complex(char type, double a, double b)
{
    switch(type)
    {
    case 'R':
    case 'r':
        setRectangular(a, b);
        break;
    case 'P':
    case 'p':
        setPolar(a, b);
        break;
    }
}

// Two arguments passed, assume rectangular.
Complex::Complex (double a, double b)
{
    real = a;
    imaginary = b;
    magnitude = rectangularToMagnitude(a, b);
    angle = rectangularToAngle(a, b);
}

// One argument passed, assume real, used to cast double to complex.
Complex::Complex (double a)
{
    real = a;
    imaginary = 0;
    magnitude = a;
    angle = 0;
}

// No argument passed, assume values of zero.
Complex::Complex ()
{
    real = 0;
    imaginary = 0;
    magnitude = 0;
    angle = 0;
}

// Convert real to imaginary and vice versa.
double Complex::rectangularToMagnitude(double re, double im) {return sqrt((re*re)+(im*im));}
double Complex::rectangularToAngle(double re, double im) {return atan2(im, re);}
double Complex::polarToReal(double ma, double an) {return ma*cos(an);}
double Complex::polarToImaginary(double ma, double an) {return ma*sin(an);}

// Accessors
double getReal() {return real;}
double getImaginary() {return imaginary;}
double getMagnitude() {return magnitude;}
double getAngle() {return angle;}

// Mutators
void setRectangular(double re, double im)
{
    real = re;
    imaginary = im;
    magnitude = rectangularToMagnitude(re, im);
    angle = rectangularToAngle(re, im);
}

void setPolar(double ma, double an)
{
    real = polarToReal(ma, an);
    imaginary = polarToImaginary(ma, an);
    magnitude = ma;
    angle = an;
} 
```

错误

```
error C2065: 'real' : undeclared identifier
error C2065: 'imaginary' : undeclared identifier
error C2065: 'magnitude' : undeclared identifier
error C2065: 'angle' : undeclared identifier
error C2065: 'real' : undeclared identifier
error C2065: 'imaginary' : undeclared identifier
error C2065: 'magnitude' : undeclared identifier
error C3861: 'rectangularToMagnitude': identifier not found
error C2065: 'angle' : undeclared identifier
error C3861: 'rectangularToAngle': identifier not found
error C2065: 'real' : undeclared identifier
error C3861: 'polarToReal': identifier not found
error C2065: 'imaginary' : undeclared identifier
error C3861: 'polarToImaginary': identifier not found
error C2065: 'magnitude' : undeclared identifier
error C2065: 'angle' : undeclared identifier
IntelliSense: identifier "real" is undefined
IntelliSense: identifier "imaginary" is undefined
IntelliSense: identifier "magnitude" is undefined
IntelliSense: identifier "angle" is undefined
IntelliSense: identifier "real" is undefined
IntelliSense: identifier "imaginary" is undefined
IntelliSense: identifier "magnitude" is undefined
IntelliSense: identifier "rectangularToMagnitude" is undefined
IntelliSense: identifier "angle" is undefined
IntelliSense: identifier "rectangularToAngle" is undefined
IntelliSense: identifier "real" is undefined
IntelliSense: identifier "polarToReal" is undefined
IntelliSense: identifier "imaginary" is undefined
IntelliSense: identifier "polarToImaginary" is undefined
IntelliSense: identifier "magnitude" is undefined
IntelliSense: identifier "angle" is undefined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:22:56.380

例如，您需要在 .cpp 文件中将 getReal() 定义为 Complex::getReal()。此外，getReal() 之后的所有成员函数都是这种情况。

# jquery - 风景照片裁剪不正确

> ID：10228316
> 
> 赞同：2
> 
> 时间：2012-04-19T12:41:30.347
> 
> 标签：jquery, asp.net, system.drawing, jcrop

这是我的代码

```
using (var photo = System.Drawing.Image.FromFile(Server.MapPath(src)))
using (var result = new Bitmap(width, height, photo.PixelFormat))
{
    result.SetResolution(
    photo.HorizontalResolution,
    photo.VerticalResolution);

    using (var g = Graphics.FromImage(result))
    {
        g.InterpolationMode = InterpolationMode.HighQualityBicubic;

        g.DrawImage(photo,
                new Rectangle(0, 0, width, height),
                new Rectangle(x, y, width, height),
                GraphicsUnit.Pixel);

        photo.Dispose();
        result.Save(Server.MapPath(src));
    }
} 
```

如果我选择垂直图像，它会很酷。但是水平图像裁剪了错误的区域。每次。我正在使用 jcrop。我不认为 jcrop 导致这个。但任何人都这么认为。我可以编写我的 jcrop 代码。

**编辑：已解决**

我得到了它。这是，如何显示上传（未裁剪）的图像；

```
<img src="blabla.jpg" width="400px" /> 
```

所以，Jcrop 在这 400px 上寻找点。但原始图像是 800 像素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T06:48:48.243

我得到了它。这是，如何显示上传（未裁剪）的图像；

```
<img src="blabla.jpg" width="400px" /> 
```

所以，Jcrop 在这 400px 上寻找点。但原始图像是 800 像素。

# java - hibernate：根据另一列更新一列

> ID：10228322
> 
> 赞同：2
> 
> 时间：2012-04-19T12:41:55.697
> 
> 标签：java, hibernate

我有一个包含 2 个主要列的表：名称和不带重音的名称。当第一个更改时，我希望休眠更新第二个：

```
@Column(name = "name")
public String getName() {
    return this.name;
}

public void setName(String s) {
    this.name = s;
    this.noAccentName = RemoveDiacritics(name);  //remove diacritics from name
}

@Column(name = "noaccent_name")
public String getNoAccentName() {
    return this.noAccentName;
}

public void setNoAccentName(String s) {
    this.noAccentName = s;
} 
```

这是有效的，但它有一个开销：名称的设置器将对象设置为脏，并且休眠想要一直更新它...... :(

当“名称”以干净的方式更改时，我如何要求休眠更新“noAccentName”？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:00:44.157

您找到了拦截​​器，但从 Hibernate 4 开始，推荐的执行此类操作的方法是使用[回调方法](http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/listeners.html)。事实上，我在 Hibernate 4 中根本找不到拦截器，所以如果你这样做，你可能没有升级路径。

我相信你想要做的是：

```
@Column(name = "name")
public String getName() {
    return this.name;
}

public void setName(String s) {
    this.name = s;
}

@PrePersist
private void updateNoAccentName() {
    this.noAccentName = RemoveDiacritics(this.name);
}

@Column(name = "noaccent_name")
public String getNoAccentName() {
    return this.noAccentName;
}

private void setNoAccentName(String s) {
    this.noAccentName = s;
} 
```

然后 Hibernate 将负责在保存对象之前更新 noAccentName。请注意，我还将 setNoAccentName 方法设置为私有，因为无法从 noAccentName 转换为 name 并获得正确的重音。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T12:19:35.730

我找到了解决方案。:) 它的名字是休眠拦截器。

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/events.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/events.html)

在一个简单的拦截器的帮助下，我可以根据另一个来更新 noAccent 字段。

感谢您的时间和精力，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:44:56.490

给定 name 的值，你总能得出 noAccentName 吗？如果是这样，您应该标记它以及 getter 和 setter `@Transient`，以便它们不再受 hibernate 的影响。只需在设置 name 时设置 noAccentName 的值，除非 name 的值更改，否则 hibernate 不会更新该特定实例。

**编辑：** 或者，您可以尝试检查名称与分配的新名称的相等性，因此除非绝对必要（这会导致休眠将其标记为脏），否则您不会分配任何字段。如果它*仍然*更新，要么是因为 hibernate 被配置为更新，要么是因为另一个字段也在更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T21:08:15.943

一种简单的方法是使用字段访问而不是属性访问，甚至可能仅针对这两个属性（请参阅[访问类型](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#d0e535)，不推荐）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T21:22:05.370

我认为这是一个域命名问题。此时调用 setName 时，您不仅仅是在设置名称。另一种像 changeName 这样改变两者值的方法似乎更合适。尽管我同意 Neil 的观点，如果该值始终是派生的，那么保留名称和更改后的名称就没有什么价值了。如果您的应用程序是唯一使用该信息的应用程序，为什么不删除该列并仅提供一个单独的访问器来删除变音符号。

# windows - 在 Jenkins 中运行 bat 文件

> ID：10228327
> 
> 赞同：11
> 
> 时间：2012-04-19T12:42:15.990
> 
> 标签：windows, batch-file, jenkins

我有一个简单的问题。我想运行一个应该在构建后运行的 bat 文件。bat 文件包含参数 previousVersion 和 currentVersion（这些参数在构建开始之前作为验证字符串参数输入）。

这就是我尝试过的执行 Windows 批处理命令

```
set v = %currentVersion%
set pv = %previousVersion%
cmd \k "C:\jenkins\workspace\mybatfile.bat %pv% %p%" 
```

我得到的错误是cmd不被识别为内部或外部命令可运行程序或批处理文件退出9009

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-19T14:20:32.380

将“cmd \k”替换为“调用”

Execute Windows Batch 命令已经在 cmd 中运行；无需专门开始一个新的。只需“调用”您的 BAT 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-26T05:56:31.087

如果您想启动一个单独的命令窗口，您可以尝试：

```
start cmd \k "your\bat" 
```

这是一个参考：[http ://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds.mspx?mfr=true)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-12T15:55:53.640

创建文件名`jenkins.bat`并将此文件放在您的`jenkins.war`文件可用的地方。

您必须单击`jenkins.bat`文件。

注意：- 点击`jenkins.bat`文件后，chrome 浏览器会自动打开 jenkins url。

> 如果您的系统配置了 Java 8 或 7 安装，请尝试此操作。

```
timeout 3
start chrome http://localhost:8080
timeout 3
java -jar jenkins.war 
```

> 如果您的系统配置了 Java 10 或更高版本，请尝试此操作。

```
timeout 3
start chrome http://localhost:8080
timeout 3
java -jar jenkins.war --enable-future-java 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-03T18:38:48.943

我尝试这样做，首先将其指向您的 bat 文件所在的路径，然后“调用”命令来触发该 bat 文件。如下：

```
cd yourFilePath 
```

进而

```
call yourFile.bat 
```

# sql - SQL 查询不会仅返回一个字段的完整结果

> ID：10228328
> 
> 赞同：5
> 
> 时间：2012-04-19T12:42:19.463
> 
> 标签：sql, excel, vba, adodb

我在使用 VBA 执行 SQL 查询并将结果复制到 Excel 工作表中时遇到问题。

当子执行时，它只复制 256 的倍数的行（因此第 256、512、768 等行是唯一填充到 Excel 中的行）。我从数据库中复制任何其他字段都没有问题。此外，当我在 MySQL 中运行相同的查询时，它工作正常。作为 SQL 和 VBA 的新手，我看不出这个特定字段会造成麻烦的任何原因。我唯一能想到的是它的内容是一个始终以下划线开头的字符串（我只提到这一点是因为它是它与其他一些字段之间的唯一区别）。

有人对为什么会发生这种情况有任何想法吗？

干杯，

利亚姆

编辑：这是有问题的代码片段。老实说，我不确定看到代码是否会有所作为，因为它在其他情况下工作得很好，但话又说回来，这就是我是新手的原因:)

```
 Dim con As ADODB.Connection
        Dim rst As ADODB.Recordset

        Set con = New ADODB.Connection
        Set rst = New ADODB.Recordset

        con.ConnectionString = "DRIVER={MySQL ODBC 5.1 Driver};SERVER=ipaddress;UID=userID;PWD=password;DATABASE=jiradb;OPTION=16427;"
        con.Open

        sql = "SELECT TEMPO_DATA FROM gssd_worklog WHERE WORK_DATE BETWEEN '2012-01-01' AND '2012-03-31'"

        'Open Recordset'
        rst.Open sql, con

        'Copy Data to Excel'
        Set ws = ActiveSheet

        ws.Range("A2").CopyFromRecordset rst 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T09:03:05.200

我昨天遇到了一个非常相似的问题，并在研究时发现了这个线程，所以想添加我的“解决方案”，以防它帮助其他人。

为了完善问题描述，我发现它适用于我的数据集中的一个特定字段，有趣的是，如果我重新排序查询，它适用于每个后续字段。添加尾随或删除较早的字段对我的问题列没有影响。

检查类型显示它与其他一些确实有效的字段类型相同，因此也没有任何线索。

但是，由于它是一个特定字段（在本例中为文本字段），我决定尝试将我的 SQL 查询更改为 CAST 问题字段，更改：

```
SELECT Col1, Col2, Col3 FROM TableName 
```

...到...

```
SELECT Col1, Col2, CAST(Col3 AS VARCHAR(8)) AS Col3 FROM TableName 
```

...突然出现所有数据（包括任何尾随列）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T13:12:16.653

当您尝试复制工作表上的记录时，我认为您的问题出在最后一行。尝试这样的事情（代码从[http://msdn.microsoft.com/en-us/library/aa223845(v=office.11](http://msdn.microsoft.com/en-us/library/aa223845%28v=office.11%29.aspx) ​​).aspx 修改）：

```
For iCols = 0 to rs.Fields.Count - 1
    ws.Cells(1, iCols + 1).Value = rst.Fields(iCols).Name
Next
ws.Range("A2").CopyFromRecordset rst 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T09:16:54.870

感谢 Lamak 的帮助，我想我已经找到了解决方案：

```
rst.Open sql, con

Dim iRows As Integer
For iCols = 0 To rst.Fields.Count - 1
    ws.Cells(1, iCols + 1).Select
    With Selection
        .Value = rst.Fields(iCols).Name
        .Font.Bold = True
        .EntireColumn.AutoFit
    End With
Next iCols

iRows = 2

While Not rst.EOF
    For iCols = 0 To rst.Fields.Count - 1
        ws.Cells(iRows, iCols + 1).Value = rst.Fields(iCols).Value
    Next iCols
    rst.MoveNext
    iRows = iRows + 1
Wend 
```

问题似乎一直试图一次将所有字段从记录集中复制出来，逐个字段和逐行复制记录似乎可以解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-16T09:26:31.123

我在使用记录集时遇到了类似的问题。它会在 SQL 查询中很好地返回一组客户结果，但不会将结果粘贴到某些客户的工作表中。

按照转换数据的提示，我深入研究了查询，并注意到结果集中隐藏了空值。从记录集中出现的空值来看，超出该空值（按该特定列排序）的任何结果都不会粘贴到我的工作表上。

或者在伪代码中：

```
SELECT DISTINCT a,b,e
FROM DATASET 
```

其中 c 列将包含一个空值。

所以我的解决方案：在 Excel 中使用它之前，在 SQL 中删除结果集中的重复值和空值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-11T15:15:53.530

我打赌你的问题是记录集（在内存中）没有完全填充来自数据源的数据。这是 ADO 记录集的已知行为。

最简单的解决方法是在“.CopyFromRceordset rst”方法调用之前执行“rst.movelast” - 此方法将确保使用数据源中的数据完全加载记录集。

您的 RBAR (Row By Agnonizing Row) 替代过程通过使用 .movenext 方法顺序移动记录集中的记录来实现相同的结果（这会导致 ADO 代码在记录指针移动通过加载的记录时不断加载新数据）内存中的数据页）。

# wcf - 尝试检索数据表而不是数据集时出现 WCF 错误

> ID：10228334
> 
> 赞同：0
> 
> 时间：2012-04-19T12:42:38.020
> 
> 标签：wcf, oracle

我有一个带有两种方法的 wcf basicHttpBinding 服务。方法 1 执行一个 oracle 打包的存储过程，它返回一个数据集中的两个数据表。这工作正常。

方法 2 返回一个带有简单选择语句的（单个）表。这失败了，但是为什么？

```
System.ServiceModel.CommunicationException was caught
  Message=An error occurred while receiving the HTTP response to http://localhost:10500/WcfOracle.svc. This could be due to the service endpoint binding not using the HTTP protocol. This could also be due to an HTTP request context being aborted by the server (possibly due to the service shutting down). See server logs for more details.
  Source=mscorlib
  StackTrace:
    Server stack trace: 
       at System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)
       at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
       at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
       at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs)
       at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
       at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
    Exception rethrown at [0]: 
       at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
       at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
       at svcOracleTestRig.wcfOracle.IWcfOracle.Select(String stmt, Boolean LeaveConnectionOpen)
       at svcOracleTestRig.wcfOracle.WcfOracleClient.Select(String stmt, Boolean LeaveConnectionOpen) in D:\iWorx-dev-v1\WCF4\svcOracle\svcOracleTestRig\Service References\wcfOracle\Reference.cs:line 180
       at svcOracleTestRig.Form1.button2_Click(Object sender, EventArgs e) in D:\iWorx-dev-v1\WCF4\svcOracle\svcOracleTestRig\Form1.cs:line 98
  InnerException: System.Net.WebException
       Message=The underlying connection was closed: An unexpected error occurred on a receive.
       Source=System
       StackTrace:
            at System.Net.HttpWebRequest.GetResponse()
            at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
       InnerException: System.IO.IOException
            Message=Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host.
            Source=System
            StackTrace:
                 at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
                 at System.Net.PooledStream.Read(Byte[] buffer, Int32 offset, Int32 size)
                 at System.Net.Connection.SyncRead(HttpWebRequest request, Boolean userRetrievedStream, Boolean probeRead)
            InnerException: System.Net.Sockets.SocketException
                 Message=An existing connection was forcibly closed by the remote host
                 Source=System
                 ErrorCode=10054
                 NativeErrorCode=10054
                 StackTrace:
                      at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags)
                      at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
                 InnerException: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:24:33.567

不要从您的 Web 服务操作返回数据集。原因如下： [http ://www.hanselman.com/blog/ReturningDataSetsFromWebServicesIsTheSpawnOfSatanAndRepresentsAllThatIsTrulyEvilInTheWorld.aspx](http://www.hanselman.com/blog/ReturningDataSetsFromWebServicesIsTheSpawnOfSatanAndRepresentsAllThatIsTrulyEvilInTheWorld.aspx)

# sql-server - Silverlight 绑定 DataGridComboBoxColumn Xaml SQL

> ID：10228336
> 
> 赞同：0
> 
> 时间：2012-04-19T12:42:50.250
> 
> 标签：sql-server, silverlight, xaml, binding, datagridcomboboxcolumn

我将 DataGrid 中的 ComboBox 与 SQL 数据绑定。

Xaml 代码

```
<c1:C1DataGrid Width="1119" Name="DataGridName" Background="Transparent" Cursor="Hand" CanUserAddRows="False" CanUserEditRows="True" MaxHeight="380" RowBackground="Transparent" AlternatingRowBackground="Transparent"  AutoGenerateColumns="False">
                        <c1:C1DataGrid.Columns>
                            <c1:DataGridCheckBoxColumn Binding="{Binding Selectionnee,Mode=TwoWay}" Header="Sélection" CanUserSort="True"/>
                            <c1:DataGridTextColumn Binding="{Binding Adresse}" Header="Adresse" CanUserSort="True" CanUserFilter="True" IsReadOnly="False"/>
                            <c1:DataGridTextColumn Binding="{Binding Nom}" Header="Nom" CanUserSort="True" IsReadOnly="True"/>
                            <c1:DataGridTextColumn Binding="{Binding NumMot,Mode=TwoWay}" Header="N° mot" CanUserSort="True" />
                            <strong><c1:DataGridComboBoxColumn Binding="{Binding Format , Mode=TwoWay}" Header="Format"/></strong>
                         </c1:C1DataGrid.Columns> 
```

这部分工作正常。

格式值是这样的文本：“B1”、“B2”、“N1”、“N3”、...</p>

现在我想在这个 ComboBox 中显示与 SQL 数据相对应的其他文本值（如特定的枚举）。可能不清楚，总而言之，我想显示：“1.* B1”代表“B1”值“2.* B1”代表“B2”值“3.* B1”代表“N1”值“4.* B1″ 代表“N3” 值……</p>

所以我尝试了很多事情，但没有成功。

C# 代码

```
private List<string> FormatList = new List<string>()
{
        "1.* B1",
        "2.* B2",
        "3.* N1",
        "4.* N3"
};

this.Resources.Add("FormatList", FormatList);

InitializeComponent(); 
```

Xaml 代码

```
<c1:DataGridComboBoxColumn Binding="{Binding Format , Mode=TwoWay}" Header="Format" ItemsSource="{StaticResource FormatList}"/> 
```

我不知道如何加入 Format 和 FormatList。我试过 DictionaryConverter 但我不完全理解它。

谁能帮我？

谢谢

杰罗姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T21:36:13.863

您必须设置选定的值

```
[SelectedValue="{Binding Path=Format, Mode=TwoWay}"] 
```

在我的**[博客文章](http://blog.digitaltools.com/post/2011/05/06/Binding-a-Datagride28099s-ComboBox.aspx)**中，您可以下载工作示例的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:39:02.477

您可以通过使用数据模板来做到这一点：

```
 <c1:DataGridColumn Binding="{Binding Format , Mode=TwoWay}" Header="Format" >
                <ComboBox ItemsSource={Binding FormatList}>
                 <ComboBox.ItemTemplate>
                    <DataTemplate>
                       <StackPanel Orientation="Horizontal">
                      <TextBox Text="{Binding PrefixPart}" />
                      <TextBox Text="{Binding NamePart}" />
                       </StackPanel>                                                            
                    </DataTemplate>
                 </ComboBox.ItemTemplate>
                </ComboBox>
            </c1:DataGridColumn> 
```

然后创建一个名为 Format 的类

```
public class Format
{
    public string PrefixPart{get;set;}
    public string NamePart{get;set;}
} 
```

然后创建一个 IList / ObservableCollection FormatList 并添加到此列表中。

希望有帮助。

# java - 如何在Java中拆分文件系统路径？

> ID：10228338
> 
> 赞同：5
> 
> 时间：2012-04-19T12:42:53.993
> 
> 标签：java, string, path

如果我在一个类中有一个字符串变量

```
MainActivity.selectedFilePath 
```

有这样的价值

```
/sdcard/images/mr.32.png 
```

我想在某个地方只打印到该文件夹​​的路径而没有文件名

```
/sdcard/images/ 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-19T12:46:42.143

你可以做：

```
File theFile = new File("/sdcard/images/mr.32.png");
String parent = theFile.getParent(); 
```

或（不推荐）

```
String path = "/sdcard/images/mr.32.png";
String parent = path.replaceAll("^(.*)/.*?$","$1"); 
```

[**看见**](http://ideone.com/G72gV)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-19T12:46:55.847

```
 String string = "/sdcard/images/mr.32.png";
    int lastSlash = string.lastIndexOf("/");
    String result = string.substring(0, lastSlash);
    System.out.println(result); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T12:45:45.553

新文件(MainActivity.selectedFilePath).getParent().getAbsolutePath()

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T12:45:54.120

使用该路径创建一个 File 对象，然后使用[File Class](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html)中的 getPath 方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-19T12:46:43.180

```
String realPath = "/sdcard/images/mr.32.png";
String myPath = realPath.substring(0, realPath.lastIndexOf("/") + 1); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-08-29T08:17:12.257

```
final String dir = System.getProperty("user.dir");
String[] array = dir.split("[\\\\/]",-1) ;
String arrval="";

   for (int i=0 ;i<array.length;i++)
      {
        arrval=arrval+array[i];

      }
   System.out.println(arrval); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-19T12:46:06.707

您可以使用`String.lastIndexOf(int ch);`which 为您提供字符 ch 的最后出现

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-19T12:48:45.537

试试这个 ：

`File file = new File("path");`

`parentPath = file.getParent();`

`parentDir = file.getParentFile();`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-04-19T12:51:30.533

*   文件

If the Files actually exist on the box, you could wrap the Strings up in a File object and call [File.getParent()](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#getParent%28%29).

*   String.split()

If the files don't exist, you could use the String.split() function to split the String with "/" as delimiter. You could then drop the last String in the array and rebuild it. This approach is rather dirty though.

*   Regular expressions

You could use regular expressions to replace the part after the last / with "".

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-19T12:46:45.067

查看Apache Commons IO 库中的[Apache FileNameUtils ，尤其是](http://commons.apache.org/io/api-1.4/org/apache/commons/io/FilenameUtils.html)[getFullPath()](http://commons.apache.org/io/api-1.4/org/apache/commons/io/FilenameUtils.html#getFullPath%28java.lang.String%29)。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-04-19T12:49:01.277

这是解决方案 -

```
 String selectedFilePath= "/sdcard/images/mr.32.png";
 selectedFilePath=selectedFilePath.substring(0,selectedFilePath.lastIndexOf("/"));
System.out.println(selectedFilePath); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-01-15T14:34:40.290

Java 11:

```
String folderOnly = Path.of(MainActivity.selectedFilePath).getParent().toString(); 
```

# c++ - 什么时候创建qt窗口？

> ID：10228340
> 
> 赞同：2
> 
> 时间：2012-04-19T12:43:06.873
> 
> 标签：c++, linux, qt, window-management

如果 QWidget 是在没有父级的情况下创建的，它会创建一个窗口。

那么，窗口究竟是什么时候创建的呢？是在`show()`被调用的时候吗？或者当对象被构造时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:51:56.487

`show()`调用该方法时会创建窗口。如果在显示小部件之前设置小部件的父级，则不会创建任何窗口。

# c++ - Automatic Proxy Class

> ID：10228343
> 
> 赞同：8
> 
> 时间：2012-04-19T12:43:27.300
> 
> 标签：c++, templates, design-patterns, macros, proxy-classes

Assume I have an interface

```
class I{
public:
    virtual void f(int id)=0;
    virtual void g(int id, float x)=0;
} 
```

I need a proxy class, to do some sort of id to pointer mapping

```
class Proxy : I
{
    I * i[5];
public:
    void f(int id)
    {
        i[id]->f(id);
    }

    void g(int id, float x)
    {
        i[id]->g(id, x);
    }

} 
```

So when i write

```
Proxy *p;
p->f(1); 
```

f is called on the object with id=1

there are several such cases and interfaces are rather large. So I don't want to code all the functions in the proxy class. Is there way to do it automatically? maybe using macros, templates, overloading "->" etc.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T13:04:39.633

The easy solution is to define an operator-> that returns the pointer to the interface. But this will break your encapsulation since everybody can access your objects directly and you actually don't need your proxy class (you might as well just use a std::map).

Alternative you could do something like

```
template <typename Interface>
class Proxy
{
   Interface* interfaces[5];
public:
  template <typename F, typename... Params>
  auto operator()(F f, const int id,  Params... parameters)
           -> decltype((interfaces[id]->*f)(id, parameters...))
  { return (interfaces[id]->*f)(id, parameters...); }
}; 
```

It heavily relies on C++11 features so it might not compile with your compiler.

First it uses the Variadic templates. See [https://en.wikipedia.org/wiki/Variadic_Templates](https://en.wikipedia.org/wiki/Variadic_Templates) for more information.

Next it uses decl_type. See [https://en.wikipedia.org/wiki/Decltype](https://en.wikipedia.org/wiki/Decltype) for more information.

You have to use it like this:

```
 Proxy<I> p;
  ...

  p(&I::f,1);
  p(&I::g,3, 1.); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:00:06.883

I don't know if this is suitable for you, but you could take care of this using pointers to functions...

ie.

```
#include <stdio.h>

typedef void (*f)(int);

void f1(int a)
{
    printf("f1: %d\n", a);
}
void f2(int a)
{
    printf("f2: %d\n", a);
}
int main(int argc, char *argv[])
{
    f array[5] = {NULL}; // create array of pointers
    array[0] = f1; // assign different functions on them
    array[1] = f2; // -||-

    array[0](10); // call them
    array[1](12);

    // and you end up with something like "array[i]();" in your proxy class...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-08T07:28:30.850

## Yet another solution.

[http://coliru.stacked-crooked.com/a/857329ab4433a3a9](http://coliru.stacked-crooked.com/a/857329ab4433a3a9)

```
 #include <iostream>

  template <class F, class... Args>
  inline decltype(auto) invoke(F&& f, Args&&... args) 
     //-> decltype(std::forward<F>(f)(std::forward<Args>(args)...)
  { 
    return std::forward<F>(f)(std::forward<Args>(args)...);
  }

  int main()
  {
     using namespace std;

     cout<<"hello"<<endl;

     struct RaiiProxy {
        RaiiProxy(){
           cout<<"RaiiProxy in"<<endl;
        }
        ~RaiiProxy(){
           cout<<"RaiiProxy out"<<endl;
        }
     };
     auto proxy = [](auto&&f,auto&&...args){
        RaiiProxy raii;
        return invoke( forward<decltype(f)>(f), std::forward(args)... );
     };

     // Use as function
     proxy( [](){ cout<<"I am in proxy."<<endl; } );

     // Use raii
     {  RaiiProxy raii;
        cout<<"I am in RaiiProxy."<<endl;
     }

     cout<<"bye."<<endl;
  } 
```

# c# - C#，如何更新 Excel 文件中的特定单元格

> ID：10228345
> 
> 赞同：0
> 
> 时间：2012-04-19T12:43:33.480
> 
> 标签：c#, excel, windows-applications

我在 C# 中创建了一个 Windows 应用程序，并且我使用 excel 作为临时数据库。我能够读取 excel 数据，但我不知道如何使用 C# 更新该文件中的单元格值。

结构如下：

![在此处输入图像描述](../Images/dfcd4ce3abfa2ac4eaeeafd28fdbdb92.png)

我想`yes`在完成执行后更新 done 字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:47:52.980

如果您使用 excel 作为 OLEDB 数据源，那么您将像使用数据库一样使用 SQL。查询看起来有点像：

`SELECT [Column Name One], [Column Name Two] FROM [Sheet One$]`

在你的情况下

```
UPDATE [Sheet One$]
SET [column1]=value, [done]='yes'
WHERE [some_column]=some_value 
```

如果您需要更多帮助，请查看周围的大量信息。也许[http://www.codeproject.com/Articles/8500/Reading-and-Writing-Excel-using-OLEDB](http://www.codeproject.com/Articles/8500/Reading-and-Writing-Excel-using-OLEDB)会帮助您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:05:18.570

我必须更新

```
Extended Properties=HDR=NO; IMEX=1 
```

和

```
Extended Properties=HDR=YES; 
```

所以它将是：

```
connString = "Provider=Microsoft.Jet.OLEDB.4.0;Excel 8.0; Extended Properties=HDR=YES;Data Source=" + Directory.GetCurrentDirectory() + "/swtlist.xls";

OleDbConnection oledbConn = new OleDbConnection(connString);

oledbConn.Open();
DataTable dt = oledbConn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);

OleDbCommand cmd = new OleDbCommand("UPDATE [Sheet1$] SET done='yes' where id=1", oledbConn);

cmd.ExecuteNonQuery(); 
```

# objective-c - 将 CLLocation 保存到 plist

> ID：10228348
> 
> 赞同：4
> 
> 时间：2012-04-19T12:43:43.517
> 
> 标签：objective-c, ios, plist

我正在努力将几个位置保存到 plist 文件中以备后用，经过一番谷歌搜索后，我发现 CLLocation 数组本身无法保存，所以我想知道一种方法。

我正在考虑使用几个类将单个 CLLocation 对象“序列化”/“反序列化”到 NSDictionary 中，然后将这些 NSDictionaries 的数组存储到 plist 文件中，但我想知道是否有更好/更智能/更可靠的实现这一目标的方法。

提前致谢。

编辑：

这是我用来将数据保存在 plist 中的函数（c_propertyName 从答案中获取代码）

```
 - (void) addLocation {
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *path = [documentsDirectory stringByAppendingPathComponent:@"/Locations.plist"];

        NSArray *keys = [curLocation c_propertyNames];
        NSDictionary *dict = [curLocation dictionaryWithValuesForKeys:keys];

        [dict writeToFile: path atomically:YES];
    } 
```

编辑 2 — 解决方案：

好的，我已经想通了。就在下面，我为我自己的问题发布了一个有两种选择的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:44:05.650

使用 KVC 很容易。

这是获取属性名称的 NSObject 类别的方法（需要`<objc/runtime.h>`）

```
- (NSArray *)c_propertyNames {
    Class class = [self class];
    u_int count = 0;

    objc_property_t *properties = class_copyPropertyList(class, &count);
    if (count <= 0) {
        return nil;
    }
    NSIndexSet *set = [NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, count)];

    NSMutableSet *retVal = [NSMutableSet setWithCapacity:count];
    [set enumerateIndexesWithOptions:NSEnumerationConcurrent 
                          usingBlock:^(NSUInteger idx, BOOL *stop) {
                              const char *propName = property_getName(properties[idx]); 
                              NSString *name = [NSString stringWithUTF8String:propName];
                              [retVal addObject:name];
                          }];
    return [retVal allObjects];
} 
```

然后像这样使用它：

```
NSArray *keys = [yourLocation c_propertyNames];
NSDictionary *dict = [yourLocation dictionaryWithValuesForKeys:keys]; 
```

然后保存该字典。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T19:10:02.913

我喜欢[解决方案 2](https://stackoverflow.com/a/10237616/3965)，但如果所有人都在尝试直接写入文件，则序列化会更简单。

```
[NSKeyedArchiver archiveRootObject:arrayOfLocations toFile:path]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T22:16:30.867

经过几个小时的搜索，我已经弄清楚了整个场景。在这里，您有几个解决方案；第一个更“脏”，因为这是我想出的第一个，而第二个更优雅。无论如何，我会把它们都留下，因为也许它们都可以派上用场。

**解决方案 — 1**

感谢 mit3z 的帮助，我可以将各个部分拼凑起来找出解决方案。

正如他所指出的，您可以将此方法实现到 NSObject 上的一个类别中：

```
 - (NSArray *)c_propertyNames; 
```

（查看他对这部分代码的回复以及有关它的更多详细信息）

这让我可以自由地做这样的事情：

```
- (void) addLocation {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *path = [documentsDirectory stringByAppendingPathComponent:@"/Locations.plist"];

    NSArray *keys = [curLocation c_propertyNames]; // retrieve all the keys for this obj
    NSDictionary *values = [self.curLocation dictionaryWithValuesForKeys:keys];
    NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
    for(NSString *key in keys) {
        NSString *aaa = [NSString stringWithFormat:@"%@", (NSString *)[values valueForKey:key]];
        [dict setValue:aaa forKey:key];
    }

    [dict writeToFile:path atomically:YES];
} 
```

需要 superdumb for 循环将 NSDictionary 中的所有数据转换为 NSStrings，以便它们可以毫无问题地写入 plist 文件，如果你只是制作字典然后尝试立即保存它，你不会成功.

通过这种方式，我可以将所有 CLLocation obj“序列化”成一个字典，然后写入一个 plist 文件。

**解决方案 — 2**

我想出了一个非常简单（也更优雅）的方法：使用*NSCoding*。由于（我意识到）*CLLocation*数据类型符合*NSCoding的事实，您可以通过**NSKeyedArchiver*调用数据存档器以获取描述您的数组的 blob，然后将其直接存储到 plist，如下所示：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"/Locations.plist"];
NSMutableDictionary *data = [[NSMutableDictionary alloc] initWithContentsOfFile: path];

[data setValue:[NSKeyedArchiver archivedDataWithRootObject:arrayOfLocations] forKey:@"LocationList"];
[data writeToFile:path atomically:YES];
[data release]; 
```

瞧。就那么简单！:)

基于相同的原则，您可以通过*NSKeyUnarchiver*轻松取回数据：

```
self.arrayOfLocations = [[NSMutableArray alloc] initWithArray:[NSKeyedUnarchiver unarchiveObjectWithData: (NSData *)[dict objectForKey:@"LocationList"]]]; 
```

# vba - VBA 也可以检测带有相应位的 office 版本

> ID：10228363
> 
> 赞同：1
> 
> 时间：2012-04-19T12:44:47.223
> 
> 标签：vba, outlook

我有 Office 2010 的 32 位和 64 位版本。如果我需要为 2010 Office 32 位机器安装 VSTO 2 并为 2010 Office 64 位机器安装 VSTO 4 64 位

```
Public Function checkbitversion() As Variant
#If VBA7 Then
    checkbitversion = "64"
#Else
    checkbitversion = "32"
#End If
End Function 
```

但对于所有机器，它始终为 32 位。我需要帮助来克服这个问题。

我参考了以下 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/ff700513%28v=office.11​​%29.aspx](http://msdn.microsoft.com/en-us/library/ff700513%28v=office.11%29.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:38:58.370

检查 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\version\Outlook 中的 Bitness 值

以上版本为 14.0 或 15.0，具体取决于 Outlook 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T19:04:17.660

从 > [HERE](http://www.mrexcel.com/forum/excel-questions/542727-determining-if-os-32-bit-64-bit-using-visual-basic-applications.html)的第二个论坛帖子中尝试此代码，未经测试。

```
Function Is64bit() As Boolean
Is64bit = Len(Environ("ProgramW6432")) > 0
End Function 
```

他说`The logic seems to be if that environment variable returns anything or not, as that parameter probably doesn't exist in the 32-bit version.`

根据他的描述，如果它返回的东西是 64 位的，否则它是 32 位的。

# css - 使用 chrome (CSS) 格式化图像的问题

> ID：10228364
> 
> 赞同：0
> 
> 时间：2012-04-19T12:44:50.797
> 
> 标签：css, image, google-chrome, image-size

我的新网站在使用 Google Chrome 时遇到问题，我正在用不同的图像设计 iPhone，我遇到的问题是所有其他浏览器的代码加载正常并且 iPhone 显示正确，但是使用 Chrome 似乎出于某种原因，将图像放大到稍微模糊的程度，并且还将图像向左移动了大约 1px，从而使最终用户可以清楚地看到 iPhone 是分开的。

HTML 代码

```
<!-- Copyright 2012 Ben Green -->
<!-- v1.1a Just iStuff -->
<!-- Not to be reproduced without permission -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="main.css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Just iStuff</title>
</head>

<body>
<div id="layout">
    <div id="iphone-holder">
        <div id="iphone-top">
        </div>
        <div id="iphone-left">
        </div>
        <div id="iphone-content">            
            <div id="home-top-alternate2">
            </div>
            <div id="button-top">
            </div>
            <div id="button-left">
            </div>
            <div id="icon-row-holder">

                    </div> <!-- icon row holder -->
                </div>
            <div id="button-right">
            </div>
        <div id="iphone-right">
        </div>
        <div id="iphone-bottom">
        </div>
        </div>
</div>
</body>
</html> 
```

CSS 代码

```
 #iphone-top {
    width:461px;
    height:123px;
    float: left;
    background-image: url(images/iphonetop.png);
}

#iphone-left {
    width:94px;
    height:413px;
    float: left;
    background-image: url(images/iphoneleft.png);
}

#iphone-content {
    width: 274px;
    height: 413px;
    float: left;
    background: url(images/wallpaper.png) no-repeat;
}

#iphone-right {
    width: 93px;
    height:413px;
    float: left;
    background: url(images/iphoneright.png) no-repeat;
}

#iphone-bottom {
    width:461px;
    height:225px;
    background-image: url(images/iphonebottom.png);
    float: left;
}

#iphone-holder {
    width: 461px;
    margin-right: auto;
    margin-left: auto;
} 
```

[http://jsfiddle.net/w5a5f](http://jsfiddle.net/w5a5f)

使用 Chrome： http: [//img851.imageshack.us/img851/7237/iphone1q.png](http://img851.imageshack.us/img851/7237/iphone1q.png)
使用 Safari： [http](http://img571.imageshack.us/img571/5482/iphone2t.png)
://img571.imageshack.us/img571/5482/iphone2t.png Jsfiddle：jsfiddle.net/w5a5f

Firefox 和 Safari 可以正常显示，但 Chrome 无法正常显示，我是否需要一些特定的 chrome CSS 来阻止它放大，或者是否有解决此问题的方法？

更新：似乎一旦上传到服务器，这个问题就会消失，所以它只发生在本地文件上......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:03:30.083

您在 jsfiddle 上传的代码适用于 Chrome 和 Firefox，并且显示相同的 iphone 布局！我在我的系统上测试过！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T06:14:09.023

确保您没有使用 Chrome 放大。当您放大时，您确实会看到屏幕截图显示的 1 个像素的差异。

# mysql - 数据库设计/SQL 优化：WHERE NOT IN（数以千计的 ID）

> ID：10228372
> 
> 赞同：1
> 
> 时间：2012-04-19T12:45:13.480
> 
> 标签：mysql, performance, database-design, optimization

我被要求向应用程序添加功能，让用户在两个选项之间进行投票：A 和 B。这些问题的表格非常基本：

```
QUESTIONS
question_id (PK)
option_id_1(FK)
option_id_2(FK)
urgent (boolean) 
```

每次用户投票时，用户投票的数据都会存储在一个同样简单的表中：

```
USER VOTES
vote_id (PK)
user_id (FK)
question_id (FK) 
```

当用户请求新问题时选择出现哪个问题的算法很复杂，但出于我们的目的，我们可以假设它是随机的。那么，问题呢？

每个用户将对许多问题进行投票。可能数百，甚至数千。我需要确保没有用户收到他们已经投票过的问题，而我想这样做的唯一方法是，我猜，将服务器打到遗忘状态。具体来说，类似：

```
SELECT * from questions WHERE question_id NOT in (SELECT question_id from user_votes WHERE user_id = <user_id>) ORDER BY RAND() LIMIT 1\. 
```

[注意：RAND() 实际上不在查询中 - 它只是作为稍微复杂的 (order_by) 的替代品。]

因此，请记住，许多用户很可能已经对数百个甚至数千个问题进行了投票，并且不可能按固定顺序呈现问题......关于如何在不击败我的服务器的情况下排除投票问题的任何想法进入地下？

感谢所有建议 - 非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:51:21.103

`JOIN`运算符的性能比 MySQL 中的嵌套查询好得多（可能会随着最新的 MySQL 版本而改变，但如果您遇到性能问题，我猜我的说法仍然成立）

您可以做的只是将投票留在问题上，然后只选择那些没有投票的记录（没有人投票）：

```
SELECT * 
FROM questions q 
LEFT JOIN user_votes uv ON 
  uv.question_id = q.question_id AND
  uv.user_id = '<user_id>'
WHERE vote_id IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:54:21.023

RAND() 很讨厌，但是这可能会减轻问题，同时为您提供所需的结果。看到你提到 RAND() 是一个例子，我真的不能提供比下面更具体的建议，但是替换 ORDER BY 应该可以正常工作。

您能够限制内部查询中的行数越多，整个查询的执行速度就越快。

```
SELECT
    q.*
FROM (
    -- First get the questions which have not been answered
    SELECT 
        questions.*
    FROM questions 
    LEFT JOIN user_votes 
        ON user_votes.question_id = questions.question_id
        AND user_votes.user_id = <user_id>
    WHERE user_votes.user_id IS NULL
) q
-- Now get a random 1\.  I hate RAND().
ORDER BY RAND()
LIMIT 1 
```

# c# - 如何将自定义 WCF 协议通道添加到现有绑定

> ID：10228386
> 
> 赞同：0
> 
> 时间：2012-04-19T12:46:02.557
> 
> 标签：c#, wcf, web-services, behavior, channel

我试图编写自己的 WCF-Protocol-Channel 没有特定功能。
在此通道中，我想添加一些行为以在 Web 服务处理之前和通过 Web 服务处理之后查找 SOAP 消息。
但我找不到任何提示如何将自定义通道添加到默认绑定，如 basicHttpBinding 或其他。

背景是，我想指定处理通道堆栈中的行为的顺序。或者，如果检测到损坏，则尽快对 SOAP 消息做出反应。

感谢回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:00:02.553

您只能在自定义绑定中配置通道顺序。无论您是否处于需要控制行为顺序的情况，这都可能暗示一些复杂性。考虑消息检查器是否对您来说还不够。

# mysql - 获取下一个令牌号的 Sql 查询

> ID：10228389
> 
> 赞同：1
> 
> 时间：2012-04-19T12:46:12.773
> 
> 标签：mysql, sql

我的 SQL 表“Tokendata”中有一个 TokenId 列。

```
The TokenId has values say 1,2,3,4,6,7,8,10,11 
```

这里上面的tokenIds都被占用了。当我查询这张表时，它应该给我下一个免费的 tokenId，在这种情况下它应该是**5**。

如果 TokenId 的值为**"1,2,3,4,5,6,7,8,10,11,13,20"**，则查询应返回我**9**。

任何人都可以帮助我进行 SQL 查询吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:56:23.847

*注意：`1`根据评论更新以解决丢失的情况。*

```
SELECT
  t.TokenId + 1
FROM (
  SELECT TokenId
  FROM Tokendata
  UNION ALL
  SELECT 0
) t
  LEFT JOIN Tokendata t2 ON t.TokenId = t2.TokenId - 1
WHERE t2.TokenId IS NULL
ORDER BY t.TokenId
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T06:13:03.160

这是我的问题的答案。但这可能不是乐观的解决方案。欢迎优化解决方案

```
DECLARE @TempTable TABLE
(
    TableID  int PRIMARY KEY IDENTITY,
    TokenId int
)
Insert Into @TempTable 
    Select tt.TokenId from XLBDataPoint tt where tt.TokenId= 1
DECLARE @RowCount INT
SET @RowCount = (SELECT COUNT(*) FROM @TempTable ) 

(SELECT 
Top 1 t.TokenId + @RowCount 
FROM TokenData  t
Where t.TokenId+ @RowCount  NOT in
(select t2.TokenId FROM TokenData t2) 
```

# sql - 如何找出具有相同部门但不同班次的员工

> ID：10228396
> 
> 赞同：1
> 
> 时间：2012-04-19T12:46:36.253
> 
> 标签：sql, informix

我有一个表员工，它具有不同的属性，如 emp_code、naeme、....、deptt。还有一个名为 nightShift 的表，其中包含字段 emp_code、shift_time。任何不在夜班表中的员工都被自动假定为白班。

现在我必须找出那些有一些员工在夜班工作而一些在正常班次工作的部门，这有什么可以查询的。

例子

```
**Employees**
----------------------------------------
emp_code|  Name     |   deptt
----------------------------------------
e1         John     Ops
e2        Martin        Ops
e3        Gary      Infra
e4        John                  Facilities
e5        Michael       Ops
e6        Alan      Ops
e7        Tony      Facilites
e8        Alex      Infra
e9        Peter     Infra
e10       Ron                Ops

**nightShift**    
----------------------------------------
emp_code       |    shift_time  
----------------------------------------
e1          shiftA
e2          shiftA
e5          shiftB
e4          shiftB
e7          shiftC 
```

现在在输出中，我只想要 Deptt Ops，因为它的一些员工在夜班 (e1,e2,e5) 和一些在正常值班 (e6,e10) 输出不应包含所有员工 (e3,e8) ,e9) 正常值班，夜班无。输出不应包含设施，因为所有员工（e4、e7）都在夜班，没有人在正常班。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:17:46.263

这是按版本分组的 - 在左连接中加入两个表并计算每个部门的夜班。如果计数大于零但不等于部门中所有工人的计数，我们就有匹配项。

```
select employees.deptt
from employees
left join nightShift
  on employees.emp_code = nightShift.emp_code
group by employees.deptt
having count (nightShift.emp_code) > 0
   and count (employees.emp_code) <> count (nightShift.emp_code) 
```

[在 Sql Fiddle 上进行测试](http://sqlfiddle.com/#!3/841a9/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:22:27.873

你可以尝试这些方面的东西

```
select 
  distinct e.deptt
from
  Employees e
inner join
  NightShift n
on 
  n.emp_code = e.emp_code
Where
  e.deptt not in ('Facilities', 'Facilites') 
```

内部连接将消除每个不上夜班的人，然后在我们发现任何结果在部门设施中不起作用的地方

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:46:57.300

我认为您需要计算每个部门的夜班工人数量，以及每个部门的白班工人数量，并且您关心两个计数都大于零的那些部门。

第一阶段：每个部门的夜班工人：

```
SELECT e.deptt, COUNT(*) AS headcount
  FROM Employees  AS e
  JOIN NightShift AS n
    ON n.emp_code = e.emp_code
 GROUP BY e.deptt 
```

第 2 阶段：每个部门的白班工人

对此有多种可能的策略。一种是统计每个部门的工人总数，减去夜班工人的数量：

```
SELECT d.deptt, (d.headcount - n.headcount) AS headcount
  FROM (SELECT e2.deptt, COUNT(*) AS headcount
          FROM Employees AS e2
         GROUP BY e2.deptt
       ) AS d
  JOIN (SELECT e.deptt, COUNT(*) AS headcount
          FROM Employees  AS e
          JOIN NightShift AS n
            ON n.emp_code = e.emp_code
         GROUP BY e.deptt
       ) AS n
    ON d.deptt = e.deptt 
```

第 3 阶段：选择那些白班和夜班人数均非零的部门：

```
SELECT d.deptt, (d.headcount - n.headcount) AS dayshift, n.headcount AS nightshift
  FROM (SELECT e2.deptt, COUNT(*) AS headcount
          FROM Employees AS e2
         GROUP BY e2.deptt
       ) AS d
  JOIN (SELECT e.deptt, COUNT(*) AS headcount
          FROM Employees  AS e
          JOIN NightShift AS n
            ON n.emp_code = e.emp_code
         GROUP BY e.deptt
       ) AS n
    ON d.deptt = e.deptt
 WHERE d.headcount > 0
   AND n.headcount > 0 
```

可能有一个更简洁的表述，但我相当肯定这会给出正确的答案。

请注意，这与实际的 SQL DBMS 相去甚远，因此其中可能存在一些语法错误。

我还假设您使用的是受支持的 Informix 版本（而不是 Informix OnLine 或 Informix SE）。一些旧版本的 Informix 不支持所有这些语法，但我相信所有 11.x 版本（目前都支持）都应该处理这些查询。

您可能可以按照[Nikola Markovinović](https://stackoverflow.com/users/1231866/nikola-markovinovic)的回答简化这一点。

# jquery-ui-datepicker - 如何在 Jquery datepicker 中禁用日期范围

> ID：10228397
> 
> 赞同：1
> 
> 时间：2012-04-19T12:46:38.453
> 
> 标签：jquery-ui-datepicker

我想禁用使用 Ajax 获取的一系列日期。我这样做如下 -

```
$("#date_frm").datepicker({
 dateFormat: 'yy-mm-dd',
 constrainInput: true,
 beforeShow:function(input, inst) {
    $.ajax({
            type: "POST",
            url: "/admin/get_time_span",
            data: "",
            success: function(data) {
             disabled_day = data;
            },  
        });
 },
 beforeShowDay: disableRangeOfDays 
 });

 function disableRangeOfDays(d) 
 {
    //var arr = "2012-04-19 to 2012-04-26,";
    var arr = disabled_day.split(",");
    var arr = arr.split(",");
    var cnt = arr.length-1;
    for(i=0; i<cnt; i++) {
        arr1 = arr[i].split(" to ");
        //create date for from_date
        frm_dt = arr1[0].split('-');
        //create date for to_date
        to_dt = arr1[1].split('-');
        if(d >= new Date(frm_dt[0],(frm_dt[1]-1),frm_dt[2]) && 
d <= new Date(to_dt[0],(to_dt[1]-1),to_dt[2])) {
                return [false];
            } 
        }
        return [true,''];
      } 
```

这有效，但不是第一次。当我第一次打开日期选择器时，日期范围仍然可以选择。但是，在我关闭并重新打开它之后，日期范围被禁用。此外，如果我更改月份并返回当前月份，那么它也可以工作。第一次打开日期选择器时如何禁用日期范围？此外，对于每个月，我都想获取日期范围并禁用它们。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T06:25:14.237

在花了很多时间检查可能性之后，我在加载页面时只获取了一次所有日期范围，并将所有日期范围分配给了一个隐藏字段。我删除了 Ajax 调用并直接在函数**disableRangeOfDays(d)**中使用了隐藏字段的值，它按预期工作。

# linq - RavenDB：索引来自多个博客的博客文章标签

> ID：10228402
> 
> 赞同：2
> 
> 时间：2012-04-19T12:46:47.300
> 
> 标签：linq, mapreduce, ravendb, indexing

如何`AbstractIndexCreationTask`为以下场景创建合适的？

对于**多个博客**的场景，如何从**特定博客**中获取标签以及这些博客的**标签计数**？

对存储在 RavenDB 中的数据结构感兴趣的成员：

```
public class BlogPost {
    public string BlogKey { get; set; }
    public IEnumerable<string> Tags { get; set; }
    /* ... */
} 
```

我需要实现的方法具有以下签名：

```
public Dictionary<string, int> GetTagsByBlogs(string tag, params string[] blogKeys) 
```

在普通的 LINQ 中，我会这样写：

```
var tags = from post in blogPosts
           from tag in post.Tags
           where blogKeys.Contains(post.BlogKey)
           group tag by tag into g
           select new {
               Tag = g.Key,
               Count = g.Count(),
           }; 
```

但 RavenDB 既不支持`SelectMany`也不`GroupBy`支持。我已经为 map-reduce 解决方案尝试了不同的组合，但我无法弄清楚如何做到这一点，因为**map 和 reduce 在 data-structure 方面不同**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:54:22.057

在RavenDB[的知识库](http://ravendb.net/kb/2/creating-a-tag-cloud)中描述了如何创建标签云。

在您的情况下，您必须`BlogKey`在索引中包含，尤其是在`group by`子句中：

```
public class Tags_Count : AbstractIndexCreationTask<BlogPost, Tags_Count.ReduceResult>
{
    public class ReduceResult
    {
        public string BlogKey { get; set; }
        public string Name { get; set; }
        public int Count { get; set; }
    }

    public Tags_Count()
    {
        Map = posts => from post in posts
                       from tag in post.Tags
                       select new { 
                           BlogKey = post.BlogKey,
                           Name = tag.ToString().ToLower(), 
                           Count = 1 
                       };
        Reduce = results => from tagCount in results
                            group tagCount by new { 
                                tagCount.BlogKey,  
                                tagCount.Name } into g
                            select new {
                                BlogKey = g.Key.BlogKey,
                                Name = g.Key.Name, 
                                Count = g.Sum(x => x.Count) 
                            };

        Sort(result => result.Count, SortOptions.Int); 
    }
} 
```

然后使用所需的 BlogKey 查询该索引：

```
var result = session.Query<Tags_Count.ReduceResult, Tags_Count>()
    .Where(x => x.BlogKey = myBlogKey)
    .OrderByDescending(x => x.Count)
    .ToArray(); 
```

如果需要查询多个博客，可以试试这个查询：

```
var tagsByBlogs = session.Query<Tags_Count.ReduceResult, Tags_Count>()
    .Where(x => x.BlogKey.In<string>(blogKeys))
    .OrderByDescending(x => x.Count)
    .ToArray(); 
```

AFAIK 是您可以通过索引获得的。您仍然必须像在原始问题中那样在客户端聚合结果，除了您可以跳过 blogKeys 上的过滤：

```
var tags = from tag in tagsByBlogs
           group tag by Name into g
           select new {
               Tag = g.Key,
               Count = g.Count(),
           }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:27:03.973

看看[faceted search](http://ravendb.net/docs/client-api/faceted-search)，你可以在查询时指定条件，像这样：

```
var facetResults = s.Query<BlogPost>("BlogIndex") 
                        .Where(x => x.BlogKey == "1" || x.BlogKey == "5" ...) 
                        .ToFacets("facets/BlogFacets"); 
```

然后对匹配 where 子句的所有结果进行分组（和计数）。

**更新**您需要一个看起来像这样的索引：

```
from post in blogPosts
from tag in post.Tags 
select new 
{
    post.BlogKey
    Tag = tag     
} 
```

# php - 使用 PHP 和 jQuery 模拟推送通知会导致服务器问题

> ID：10228403
> 
> 赞同：2
> 
> 时间：2012-04-19T12:46:48.017
> 
> 标签：php, javascript, jquery, push-notification

我正在通过以下方式使用 PHP 模拟推送通知：

1.  jQuery ajax 调用调用服务器上的脚本。
2.  该脚本在每次迭代后使用 for 循环和睡眠延迟。
3.  如果发生了什么事 - 循环被打破，信息返回给 jQuery。
4.  如果脚本运行超过一分钟 - 脚本返回一个空值。
5.  当 jQuery 从服务器接收到答案时，它会解析信息并再次启动相同的过程。

这是 facebook 使用的一个程序，它在他们的网站上就像一个魅力。在我的服务器上，我遇到了以下问题：例如，如果脚本延迟了 60 秒，而我在第 30 秒点击了我网站上的另一个链接，我们还有 30 秒的时间来生成输出。所以我的网络服务器正在等待这 30 秒，而我的点击请求在这几秒后被处理，这使得我的网站几乎无法使用。我仔细检查了 facebook，发现当您单击链接时，页面永远不会刷新，并且请求会继续在同一页面上流动。但是地址栏发生了变化。在我的网站上实现相同目标的方法是什么？有没有办法强制我的服务器一次处理一个以上的 PHP 请求，或者我们必须只使用 javascript 来执行此操作。我错过了什么？

PS据我所知，没有办法使用javascript更改地址栏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:55:05.693

实际上在 HTML 5 中有。它被称为 History API。

您可以在 GitHub 上找到包含源代码的快速演示：

[http://html5demos.com/history](http://html5demos.com/history)

* * *

Dive Into HTML5 中关于它的完整章节：

[http://diveintohtml5.info/history.html](http://diveintohtml5.info/history.html)

# excel - 在 Excel 中绘制数字序列图表

> ID：10228405
> 
> 赞同：0
> 
> 时间：2012-04-19T12:46:50.433
> 
> 标签：excel, charts, sequence

我有一个数字序列

```
 0.078
 0.117
 0.077
 0.089
 0.094
 0.102
 0.086
 0.107
 0.090
 0.115 
```

如何在 Excel 中将它们绘制成图表，以便 X 轴是顺序索引（1、2、3 ..），而 Y 轴是值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:51:05.530

选择序列中的任何单元格并插入图表。它自动使用 (1,2,3,...) 作为 X 轴

# javascript - 调用字符串构造函数

> ID：10228406
> 
> 赞同：2
> 
> 时间：2012-04-19T12:46:52.963
> 
> 标签：javascript

我有一个构造函数，例如 webapp.core.cf1 或 Backbone.Router。但是我得到这个构造函数不是作为参考，而是作为一个字符串！我不能改变这个要求，constr。必须在一个字符串中。如何从中创建一个新对象，例如 classfun("Backbone.Router")？

```
function classfun (cfstr) 
{ 
  ...
  cf = new window[cfstr](); 
```

如果我以这种方式尝试，我会收到错误消息： ... is not a constructor。

为什么这不起作用？有没有不使用的替代方法`eval()`？

非常感谢提前

编辑

谢谢大家的答案！

谢谢你，Tronix117，这就是问题！

谢谢本杰明舒尔特的功能！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T12:57:06.920

如果您在控制台中尝试：

```
var A=function(a){this.test=a};
b = new window["A"](3);
console.log(b.test); // return 3 
```

这意味着，您正在尝试访问不在窗口范围内的东西，它应该是这样的：window.something["A"]，如果您不知道是什么，`something`那么您应该使用该功能本杰明的，否则使用这个，因为它更快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T12:51:59.920

你可以这样做（如果我理解正确的话）：

```
function getObjectByName(name) {
    var nameParts = name.split('.');
    var nameLength = nameParts.length;
    var scope = window;

    for (var i=0; i<nameLength; ++i) {
        scope = scope[nameParts[i]];
    }

    return scope;
}

var ObjectClass = getObjectByName(cfstr)
new ObjectClass(); 
```

仍然可以优化，但应该以这种方式工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T12:55:20.683

```
ReflectUtil.newInstance = function(strClass) {
    var args = Array.prototype.slice.call(arguments, 1);
    var clsClass = eval(strClass);
    function F() {
        return clsClass.apply(this, args);
    }
    F.prototype = clsClass.prototype;
    return new F();
};

SomeClass = function(arg1, arg2) {
    // ...
}

ReflectUtil.newInstance('SomeClass', 5, 7); 
```

这将允许您通过其名称实例化对象并允许您根据需要传递参数。

# matlab - 在 Matlab 中的两个已知行之间插入一行

> ID：10228409
> 
> 赞同：1
> 
> 时间：2012-04-19T12:46:58.890
> 
> 标签：matlab, insert, interpolation

我有一组数据如下所示：

```
 flow Rate (L/min) 
Speed(rpm)      1      1.25      1.5     1.75    2       2.25    2.5    2.77    ...  6
                            Pressure (Pa)
2000       15251.2  15232   15200   15168   15027.2 14912   14752   0       ...  0
2050       16000    15840   15808   15744   15680   15520   15488   15232   ...  0
2100       16384    16256   16217.6 16192   16128   16064   16032   15872   ...  0
2150       17088    17024   16992   16960   16928   16832   16704   16512   ...  0
.           .            .       .       .        .       .      .       .            .
.           .            .       .       .        .       .      .       .            .
.           .            .       .       .        .       .      .       .            .
4250       61120    60800   60768   60736   60672   60736   60608   60416  ...  56960 
```

如图所示，在特定速度（2000-4250rpm）和流速（1-6 L/min）下，存在不同的压力。

1）我想知道如何在这两个速度之间插入一个新行，例如，如果我的速度为 2030rpm，我希望能够找到 2030rpm 在哪两个值之间，并在 matlab 演示中插入一行如下：

```
2000    15251.2 15232   15200   15168   15027.2 14912   14752   0   ...  0
2030    0           0     0         0     0         0      0     0
2050    16000   15840   15808   15744   15680   15520   15488   15232   ...  0 
```

2）我的第二个问题是我如何在下面的两个值之间进行插值（零在哪里并得到一个值。

```
15232   
  0          
16000 
```

如果有人能回答我的任何问题，最好是第一个问题，我真的很感激，这样我就可以真正进入第二步了，哈哈

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:09:40.477

```
newmat = zeros(size(oldmat,1)+1,size(oldmat,2))

newmat(1:x) = oldmat(1:x)
newmat(x+2:end) = oldmat(x+1:end) 
```

其中`oldmat`,`newmat`是矩阵的新旧版本以及插入 s`x+1`的行的索引。`0``newmat`

然后，假设您想要线性插值，例如：

```
newmat(x+1,:) = newmat(x,:)+0.6*(newmat(x+2,:)-newmat(x,:)) 
```

我希望我犯了一些小错误，这对于您的示例非常具体，如果您在修复和概括时遇到问题，请更新您的问题或评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:13:26.340

假设数据存储在一个名为 的矩阵中`p`，用于以正确的顺序自动定位新行：

在 末尾追加新行`p`，然后： `p = sortrows(p)`

跟进评论，我们有：

```
newrow = [2130, zeros(1,size(test,2)-1)]
p(size(p,1)+1,:) = newrow
p = sortrows(p) 
```

（如果`2130`是新行的第一个值。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:37:06.733

这可能会帮助您：

```
% Matrix dimensions
nCols = 10;
nRows = 8;

% Synthetic data
matrix = [ linspace(2000,4250,nRows)' , 2000*rand(nRows,nCols-1)];
matrix([2,4],2:end) = zeros(2,nCols-1); % where some rows are zeros (2 and 4 on this example)
matrix 
```

> 矩阵 =
> 
> 1.0e+03 *
> 
> ```
> 2.0000    1.7810    1.3674    1.4983    0.7329    1.5439    1.5639    0.2246    0.8653    1.5379
> 2.3214         0         0         0         0         0         0         0         0         0
> 2.6429    1.4687    1.4454    1.4801    1.3701    0.7765    0.5881    0.5831    0.2195    0.5459
> 2.9643         0         0         0         0         0         0         0         0         0
> 3.2857    0.1458    0.2350    1.4699    1.5787    0.4579    1.0617    1.9288    0.3749    1.3466
> 3.6071    0.1771    1.2814    1.9412    0.7353    1.2839    0.1830    0.8650    0.5324    0.8591
> 3.9286    1.5967    0.6576    1.7339    0.4121    0.9690    0.8106    1.3895    1.5957    0.9035
> 4.2500    1.8860    1.3076    0.1725    0.1733    0.3037    0.2097    1.5162    0.9752    1.2197 
> ```

如果您只想用前一行和下一行的平均值填充从第二列到最后一列的元素为零的行。

```
for i=2:nRows-1
  if ( sum(matrix(i,2:end))==0 )
    matrix(i,2:end) = mean( matrix([i-1,i+1],2:end) );
  end
end
matrix 
```

> 矩阵 =
> 
> 1.0e+03 *
> 
> ```
> 2.0000    1.7810    1.3674    1.4983    0.7329    1.5439    1.5639    0.2246    0.8653    1.5379
> 2.3214    1.6248    1.4064    1.4892    1.0515    1.1602    1.0760    0.4039    0.5424    1.0419
> 2.6429    1.4687    1.4454    1.4801    1.3701    0.7765    0.5881    0.5831    0.2195    0.5459
> 2.9643    0.8072    0.8402    1.4750    1.4744    0.6172    0.8249    1.2560    0.2972    0.9462
> 3.2857    0.1458    0.2350    1.4699    1.5787    0.4579    1.0617    1.9288    0.3749    1.3466
> 3.6071    0.1771    1.2814    1.9412    0.7353    1.2839    0.1830    0.8650    0.5324    0.8591
> 3.9286    1.5967    0.6576    1.7339    0.4121    0.9690    0.8106    1.3895    1.5957    0.9035
> 4.2500    1.8860    1.3076    0.1725    0.1733    0.3037    0.2097    1.5162    0.9752    1.2197 
> ```

此代码假定：

*   您要填充的行只有第一列元素是非零的。
*   您想用上一行和下一行值之间的平均值替换零。
*   您只插入内部行。

我希望它有所帮助。

# linux - 在linux中获取网站的状态码

> ID：10228411
> 
> 赞同：3
> 
> 时间：2012-04-19T12:47:06.317
> 
> 标签：linux, apache, http-status-codes

我有一个小型 vps，在其中托管我开发的 Web 应用程序，它开始获得大量访问。

我需要每隔 X 分钟检查/验证网络是否已启动并运行（检查状态代码，200）或是否已关闭（代码 500），如果已关闭，则重新启动运行我的脚本重新启动一些服务。

知道如何在linux中检查吗？卷曲，猞猁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:05:49.647

```
curl --head --max-time 10 -s -o /dev/null \
    -w "%{http_code} %{time_total} %{url_effective}\n" \
    http://localhost 
```

10 秒后超时，并报告响应代码和时间

如果请求超时，Curl 将退出并返回错误代码 28（检查 $?）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:54:13.880

在姐妹网站（serverfault）上找到这个 [https://serverfault.com/questions/124952/testing-a-website-from-linux-command-line](https://serverfault.com/questions/124952/testing-a-website-from-linux-command-line)

```
wget -p http://site.com 
```

这似乎可以解决问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T13:01:15.903

对于这样的问题，`man`工具的页面通常会提供所有可能选项的一个很好的列表。

因为`curl`你也可以在[这里](http://curl.haxx.se/docs/manpage.html)找到它。

您似乎搜索的选项`-w`是`http-code variable`.

**编辑：**

请参阅@Ken 对如何使用的回答`-w`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-19T13:51:01.077

好的，我创建了两个脚本：

1.  site-statush.sh [http://yoursite.com](http://yoursite.com) **=>**检查站点状态，如果为 200，则不执行任何操作，否则调用**services-action.sh 重启**
2.  services-action.sh restart **=>**重新启动 $services 中指示的所有服务

查看[https://gist.github.com/2421072](https://gist.github.com/2421072)

# php - 使用 Zend_Cache_Backend_Static 时防止错误页面缓存

> ID：10228415
> 
> 赞同：1
> 
> 时间：2012-04-19T12:47:12.543
> 
> 标签：php, zend-framework

我们目前正在运行一个使用 Zend_Cache_Backend_Static 将页面缓存到静态 html 文件的应用程序。这非常有效，除了当请求不正确的 url 时，我们的缓存会被数百个空文件和文件夹填满。如果抛出异常，有什么方法可以防止页面被缓存？我惊讶地发现这不是标准行为。

我做了一些挖掘，实际处理保存静态 html 页面的 ZF 代码在 Zend_Cache_Frontend_Capture 中如下所示：

```
public function _flush($data) {        
    $id = array_pop($this->_idStack);
    if ($id === null) {
        Zend_Cache::throwException('use of _flush() without a start()');
    }
    if ($this->_extension) {
        $this->save(serialize(array($data, $this->_extension)), $id, $this->_tags);
    } else {
        $this->save($data, $id, $this->_tags);
    }
    return $data;
} 
```

该函数是 ob_start 的 output_callback。我尝试获取响应对象来测试状态，但它似乎在 _flush 中不起作用。

```
$response = Zend_Controller_Front::getInstance()->getResponse();

if($response->getStatus() == '200') {
    // do the save as normal
}
else {
    // do nothing
    return false;
} 
```

我唯一的另一个想法是测试 $data 的长度，只有在 strlen($data) > 0 似乎有效但感觉不够健壮时才进行缓存。

**更新：**

不幸的是，当我们点击 ErrorController 时，静态页面已经被写入缓存，所以此时禁用缓存是行不通的。但是，可以根据 $_SERVER['REQUEST_URI'] 删除页面，这是首次写入页面时用作 id 的内容。此行可以添加到 ErrorController 中 errorAction 的开头：

```
$this->_helper->cache->removePage($_SERVER['REQUEST_URI'], true); 
```

它工作得很好，但我不想一开始就写页面！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:46:32.080

从进一步的实验来看，问题不在于导致 404 的标准 Zend Framework 异常（即 Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_ROUTE、Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_CONTROLLER、Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_ACTION），而是我的自定义异常。现在想想，这真的很明显，因为 Zend_Cache_Backend_Static 需要在动作控制器的 init 方法中初始化。任何没有路由、控制器或动作的情况都不会被初始化。

我在现有操作中抛出异常，用户可能正在查询不存在的文章。因此，在 init 中启用了缓存，并且当我们在 Front Controller Plugin 中点击 postDispatch 时已经写入了页面（仍然不确定为什么会出现这种情况），所以我当时无法取消。一种解决方案是在抛出异常时取消缓存。管理静态页面缓存的标准方法是使用 Zend_Controller_Action_Helper_Cache 动作助手。我已经扩展了它以添加一个取消方法，如下所示：

```
<?php

class Zend_Controller_Action_Helper_PageCache extends Zend_Controller_Action_Helper_Cache {

    public function cancel() {
        $cache = $this->getCache(Zend_Cache_Manager::PAGECACHE);
        $cache->setOption('caching', false);
        $cache->getBackend('disable_caching', true);
    }
} 
```

我的动作控制器现在看起来像这样：

```
<?php

class IndexController extends Zend_Controller_Action {

    private $_model;

    public function init() {        
        $this->_model = new Model();

        // using extended pageCache rather than $this->_helper->cache:
        $this->_helper->pageCache(array('index'), array('indexaction'));
    }

    public function indexAction() {
        $alias = $this->_request->getParam('article');
        $article = $this->_model->getArticleByAlias($alias);

        if(!$article) {
            // new cancel method will disable caching
            $this->_helper->pageCache->cancel();
            throw new Zend_Controller_Action_Exception('Invalid article alias', 404);
        }

        $this->view->article = $article;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:17:08.330

您应该更改 .htaccess 文件 RewriteRules 以使用选项 -s 检查文件大小

这样，如果在缓存页面时发生错误（从而生成 0 字节文件），它将不会永久存储在缓存中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-19T17:58:49.243

如果您使用标准`ErrorController`来处理 404、500 和未处理的异常，并且可以从那里获取对缓存对象的引用，则可以从错误处理程序中禁用缓存。

在您的错误控制器（或您想从中取消缓存的任​​何地方）中，尝试：

```
$cache->setOption('caching', false); 
```

当 的`save()`方法`Zend_Cache_Core`被 调用时`Zend_Cache_Frontend_Capture::_flush()`，它会看到该`caching`选项设置为 false 并且它实际上不会将数据保存到缓存并返回 true。

# java - 声明类型和创建类型之间的关系

> ID：10228418
> 
> 赞同：0
> 
> 时间：2012-04-19T12:47:15.727
> 
> 标签：java, dynamic-binding

我对以下代码有疑问（这是调用动态绑定吗？）。我对3点感到困惑。

首先，变量 pq 的意思是什么？pd 仍然是 P 的数据类型还是 Q？

其次，当我调用 pq.m(pp) 方法时，为什么结果变成了 Q::P 而不是 P::Q？

最后，这是什么意思 ((P) qq).m(qq);？我希望有人能解决我的问题。

以下代码的结果将是
P::Q、Q::P、Q::Q、R::P、Q::P、Q::Q、Q::Q

```
 class Test {
    public static void main(String[] args) {
        P pp  = new P();     
        Q qq  = new Q();
        R rr = new R();
        P pq  = qq;
        pp.m(qq);    
        pq.m(pp);  
        pq.m(qq);         
        rr.m(pp); 
        qq.m(pq);   
        qq.m(qq); 
        ((P) qq).m(qq);      
    }
}
class P {
    public void m(P p){System.out.println("P::P"); } 
    public void m(Q p){System.out.println("P::Q"); }
    public void m(R c){System.out.println("P::R"); }
}
class Q extends P {
    public void m(P p){System.out.println("Q::P"); } 
    public void m(Q p){System.out.println("Q::Q"); }
    public void m(R c){System.out.println("Q::R"); }
}
class R extends Q {
      public void m(P p){System.out.println("R::P"); } 
      public void m(Q p){System.out.println("R::Q"); }
    public void m(R c){System.out.println("R::R"); }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:59:08.637

开始，我想你的意思是`pq`，不是`pd`。由于 Q 扩展了 P，所以 Q 也是 P 类型。就像说苹果是水果一样。所以你拿着苹果（Q）说：它是一个水果（P）。当你调用`pq`方法时，它们会调用 Q 类的方法，因为`pq`它仍然是一个 Q 对象。在最后一部分中，当您这样做时`((P) qq).m(qq);`，与执行以下操作相同：

```
P p = (P) qq;
q.m(qq); 
```

所以如上所述，代码仍然会从 Q 类调用方法，打印“Q::Q”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:05:52.150

`P pq = qq;`意味着`pq`程序的其余部分将其称为 type `P`。但作为创作者，你知道它真的是 type `Q`。所以这意味着当你调用 时`pq.m()`，它实际上是从类 Q 调用实现。

这称为覆盖方法。因此，当您调用 pq.m(pp) 时，您实际上是在调用： `public void m(P p){System.out.println("Q::P");`因为那是来自 Q 类的方法。

如果 Q 没有 am(P) 方法，那么它将自动调用超类方法，即 P 中的方法。

`((P) qq).m(qq);`和做的一样：

```
P pqq = (P)qq;   // pqq is known as P type, but it's instance is still the original Q type
pqq.m(qq); // Again, since pqq is truly an instance of Q, it calls Q.m(Q) 
```

您应该真正阅读有关继承的内容。这是一个比这里可以解释的更大的主题。

说了这么多，你的例子并没有很好地说明它的力量。但是例如，如果类 Q 有一个额外的方法`public void sayHello();`，那么

```
Q q = new Q();
P p = new Q();
q.sayHello(); // This would be legal
p.sayHello(); // This would be illegal because the compiler knows p as a declared instance of P, even though you know it's truly a Q.
((Q)p).sayHello(); // This would be legal because you told the compiler to look at p as an instance of Q. It's called a cast. 
```

我希望这一切都有帮助。请务必阅读有关面向对象的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:09:24.623

动态绑定和多态性仅适用于方法调用中点左侧的对象（`o.m(x)`-- 仅适用于`o`）。参数类型在编译时静态解析。举一个更广为人知的情况：

```
class A { 
  public boolean equals(A other) { 
    System.out.println("A.equals called"); return true;
  }
}

A a1 = new A(), a2 = new A();
Object o = a1;
o.equals(a1); // doesn't print anything
a1.equals(o); // doesn't print anything
a1.equals(a2); // prints "A.equals called" 
```

这里的重点是类 A 没有覆盖 Object.equals(Object)，而是添加了另一个重载方法 A.equals(A)——只有当参数是声明的类型 A 时才会调用该方法。

# java - Glassfish 3.1b41 - JDO83008：CMP 编译失败：找不到类文件

> ID：10228420
> 
> 赞同：0
> 
> 时间：2012-04-19T12:47:20.327
> 
> 标签：java, deployment, glassfish, glassfish-3

我们有一个“旧的”JavaEE 应用程序，我们希望将它从旧的 Sun Application Server 9.1 移植到当前的 Glassfish 3.1。我们更新了部署描述符 xml 文件（重命名它们，更新了 DocType，针对 DTD 进行了验证，仅此而已）。但是当我们尝试部署到 GF3.1 时，我们得到了这个错误：

```
JDO83008: CMP Compilation failed: 
C:\workspace\glassfish31eclipsedefaultdomain\generated\ejb\archivetool-app-1.9.5\archivetool-ejb-1.9.5_jar\de\ems\archivetool\ejb\metadata\cd\eb\CdBean_821611534_ConcreteImpl.java:10: 
cannot access de.ems.archivetool.ejb.framework.AbstractCMPBean
class file for de.ems.archivetool.ejb.framework.AbstractCMPBean not found

C:\workspace\glassfish31eclipsedefaultdomain\generated\ejb\archivetool-app-1.9.5\archivetool-ejb-1.9.5_jar\de\ems\archivetool\ejb\productdata\product\eb\ProductionLibraryBean40992531_ConcreteImpl.java:416: 
cannot find symbol

symbol  : class EBSBusinessException
location: package de.ems.archivetool.ejb.framework

WARNUNG: JDO83004: CMP Compilation failed. See log for details.
SCHWERWIEGEND: Exception while invoking class org.glassfish.ejb.startup.EjbDeployer prepare method
SCHWERWIEGEND: Exception while invoking class org.glassfish.javaee.full.deployment.EarDeployer prepare method
SCHWERWIEGEND: Exception while preparing the app
SCHWERWIEGEND: JDO83004: CMP Compilation failed. See log for details.
org.glassfish.deployment.common.DeploymentException: JDO83004: CMP Compilation failed. See log for details. 
```

但是我们仍然可以部署在旧的 SUN App Server 中。

该应用程序由 4 个模块和一个构建模块组成。通常，.ear 文件由两个 EJB 模块、一个 WAR 模块和一个 JAR 模块组成，使用 Maven 构建没有问题（UnitTest 成功等）。（[pom.xml](http://pastebin.com/KipvizXM)和生成的[application.xml](http://pastebin.com/16f0BbWX)）

所以，一切都很好，但是当我们尝试将应用程序部署到 GF3.1 时，我们得到“找不到类文件”错误。未找到的类在 JAR 模块中，并包含 EJB 模块的基类。

有人有起点吗？

问候， 安德烈亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:22:07.953

[好的，经过几个小时的谷歌搜索，我终于在这里](http://hanscappelle.blogspot.de/2010/07/ear-deployment-on-glassfish-3-vs.html)找到了这个问题的确切答案。重要的部分是：

> Java EE 6 规范对企业归档 (EAR) 文件中可以看到哪些 JAR 文件施加了严格的规则。参见 EE.8.3.3 节；具体来说，应用程序客户端模块不应访问任何 EJB JAR 文件，除非应用程序客户端 JAR 文件的清单类路径明确引用 EJB JAR 文件。
> 
> 这是对 GlassFish Server v2 的更改，其中应用程序客户端自动可以访问 EAR 文件中的所有 EJB JAR 文件以及 EAR 文件顶层的所有 JAR 文件。为了符合更严格的规范语言，GlassFish Server 3.0.1 无法自动为应用程序客户端提供对这些 JAR 文件的访问权限。

你要做的是，让 maven 将 jar（和其他依赖项）放入 ear 容器中的 library 文件夹中。您可以通过将其添加到您的 ear pom.xml 中来做到这一点：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-ear-plugin</artifactId>
      <configuration>

      //here starts the important part
      <defaultLibBundleDir>lib</defaultLibBundleDir>
      <archive>
        <manifest>
          <addClasspath>true</addClasspath>
        </manifest>
      </archive>
      //end of important part

   <modules>
     <jarModule>
       <groupId>gID</groupId>
       <artifactId>aID</artifactId>
     </jarModule>

     //etc some more ebjs, war, ...
   </modules> 
```

这会将 jar 模块放入文件夹 lib，所有依赖的 ejb 都将在其 MANIFEST.MF 中获得 Class-Path 条目。

希望能帮助你们中的一些人解决同样的问题。

# jquery - 包含 HTML 的变量的 jQuery 选择器

> ID：10228429
> 
> 赞同：1
> 
> 时间：2012-04-19T12:48:04.617
> 
> 标签：jquery, html, jquery-selectors

我有一个包含 HTML 数据的 div（这会发生变化并且是用户生成的）。

该数据中包括各种锚标记。我需要找到所有标签，并删除该`href`属性。

但是，我似乎无法让我的选择器恰到好处。

这是jQuery：

```
var divForHtml = $('#Content');   
divForHtml =  $(divForHtml +'a').attr('href', ''); 
```

完成后，我需要将此变量发送到一个函数，然后该函数将继续处理 HTML。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T12:49:38.117

在这种情况下`divForHtml`是一个 jQuery 对象；所以你不能简单地将*字符串* `' a'`附加到它来构建一个新的选择器。

相反，尝试使用该[`find()`](http://api.jquery.com/find)方法来搜索匹配元素的后代；

```
divForHtml.find('a').attr('href', ''); 
```

尽管您可能[`removeAttr()`](http://api.jquery.com/removeAttr)更喜欢这种方法；

```
divForHtml.find('a').removeAttr('href'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T12:50:44.097

```
var divForHtml = $('#Content');
$('a', divForHtml).attr('href', ''); 
```

或者 - 更容易：

```
$('#Content a').attr('href', ''); 
```

# sql - 更新 MD5 值在 sql server 中不起作用

> ID：10228436
> 
> 赞同：-1
> 
> 时间：2012-04-19T12:48:28.753
> 
> 标签：sql, sql-server, sql-server-2005

我写了一个查询来使用 MD5 更新密码。但新密码无效，旧密码也无效。下面是查询。

```
UPDATE tbl_user
SET password = HashBytes('MD5', CAST(CHECKSUM('abc') AS varchar(32)))
WHERE login_id = 'user123' 
```

现在，当我将 abc 作为密码时，它不起作用，当我登录到我的应用程序时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:59:54.267

我不确定，从来没有做过类似的事情，但我认为你需要将密码的值括`HashBytes('MD5', CAST(CHECKSUM('abc') AS varchar(32)))`在引号中，就像在正常查询中你会说的那样

`UPDATE tbl_user SET password='complexpassword' WHERE login_id = 'user123'`

哦，您可能应该删除 login_id 周围的括号。由于密码值没有引号，它不知道字符串的结尾在哪里，并且可能正在尝试插入 "HashBytes('MD5', CAST(CHECKSUM('abc') AS varchar(32)))WHERE (login_id = 'user123')" 作为您的密码，然后发现它没有位置信息，或者它正在识别您的字符串并将其按原样放置在表中，而不是执行哈希。

最简单的方法是在将密码传递给查询语句之前对其进行哈希处理。告诉我这是否在您的情况下不起作用，以及上述修复是否不起作用。

# git - Git 子模块——排除特定文件/目录

> ID：10228439
> 
> 赞同：15
> 
> 时间：2012-04-19T12:48:34.837
> 
> 标签：git, github, git-submodules

我正在尝试使用 Gits 的“子模块”功能在项目中包含第 3 方代码。我只需要子模块中的几个文件，并希望排除它附带的所有文档等。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-24T11:35:18.663

在我的子模块中，我有一个我想*在本地*`/examples`删除的文件夹，以防止自动生成的 makefile 看到这些文件；不得不对删除一无所知。*`origin`*

 *在 git CLI 中：

`git update-index --assume-unchanged <path/to/file>`

再次跟踪本地更改：

`git update-index --no-assume-unchanged <path/to/file>`

或者在 SourceTree 中，根据[Fabian Blechschmidt 的回答](https://stackoverflow.com/questions/11795913/equivalent-to-git-update-index-assume-unchanged-in-sourcetree)创建自定义操作。

**注意**这*与*“停止跟踪”不同，其中`origin`确实也会在提交时停止跟踪文件 - 不是您想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T13:13:25.687

git 子模块是嵌入在另一个 git 存储库中的 git 存储库。除此之外，它没有什么特别之处——子模块的行为方式与任何其他 git 存储库相同。克隆存储库时，您将获得与存储库关联的所有文件和所有历史记录。

如果您只需要几个文件，并且对跟踪第三方项目的更改历史不感兴趣，也许您应该将特定文件复制到您的项目中并完成。*

# ios - 如何在 ios 上按下 UINavigationBar 后退按钮后隐藏键盘

> ID：10228445
> 
> 赞同：9
> 
> 时间：2012-04-19T12:48:58.063
> 
> 标签：ios, keyboard, back-button

我的键盘出现一个 textView，当用户按下导航栏上的后退按钮时，我想隐藏它。

我试过这个：

```
-(void)viewWillDisappear:(BOOL)animated{

    [myTextView resignFirstResponder];
} 
```

还有这个：

```
-(void)viewDidDisappear:(BOOL)animated{

    [myTextView resignFirstResponder];
} 
```

但它不起作用，我该怎么做？

编辑：

我在这里找到了解决方案：

[如果模态 ViewController 演示样式为 UIModalPresentationFormSheet，iPad 键盘将不会关闭](https://stackoverflow.com/questions/3372333/ipad-keyboard-will-not-dismiss-if-modal-view-controller-presentation-style-is-ui)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-19T12:58:33.307

将其放入 buttonPress 方法中 -

```
[self.view.window endEditing:YES]; 
```

编辑 - 这还可以让您在按下“返回”按钮时获取正在编辑的文本内容

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-25T09:36:15.060

结合上述答案并检查后退按钮将通过此完成

```
- (void)viewWillDisappear:(BOOL)animated{
if ([self.navigationController.viewControllers indexOfObject:self]==NSNotFound) {
    // back button was pressed.  We know this is true because self is no longer
    // in the navigation stack.
    [self.view.window endEditing:YES];
}

[super viewWillDisappear:animated]; 
```

}

# c# - WCF REST 调用中的默认枚举值问题

> ID：10228447
> 
> 赞同：1
> 
> 时间：2012-04-19T12:48:59.247
> 
> 标签：c#, wcf, rest

我在 C# 中有一个简单的 WCF 项目。我正在使用 DTO User.cs：

```
public UserDTO
{

private EmailType _emailType = EmailType.NotSpecified;

[DataMember]
public EmailType UserEmailType
{
get { return _emailType; }
set { _emailType = value; }
}
} 
```

EmailType.cs 具有以下值：

```
None = -1,
NoEmail = 0,
All = 1 
```

现在在服务项目中我有这个方法：

```
public RestResponse CreateNewUser(UserDTO user)
{
try
{
//my code to call BL to create a new user
}
} 
```

但是当我调用这个方法（使用 RESTful URL）时， CreateNewUser() 方法被触发了。我注意到**user.UserEmailType 设置为 NoEmail (0) 而不是我在私有属性实例化中指定的**。看起来 .NET REST API 框架将其设置为 0，即使我已在 UserDTO 类中将其设置为不同的值。你能告诉我为什么 UserEmailType 设置为 0 而不是 -1 吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-19T13:01:12.517

将值设置为 2 的幂，它将起作用。

```
[Flags]
enum EmailType
{
None = 0,
NoEmail = 1,
All = 2
} 
```

试试这个代码，它会正常工作。不知道为什么人们在没有任何解释的情况下给出 -ve 反馈。这对我来说真的很有趣。

我发布了答案，因为我遇到了完全相同的问题，而且这个解决方案确实对我有用。

感谢那些觉得这不是一个好的答案的人:)。

# java - 检测正在运行的应用程序中是否存在线程争用

> ID：10228458
> 
> 赞同：2
> 
> 时间：2012-04-19T12:49:50.430
> 
> 标签：java, multithreading, performance

1.  我有一个 Java 应用程序，我在其中使用来自 oswego 的 PooledExecuter。
2.  我强烈怀疑我的应用程序中存在线程争用，无论是否使用 PooledExecuter，请求都需要时间 = 大约没有请求 * 一个请求的时间。
3.  我想收集证据表明肯定存在线程争用。
4.  有什么方法可以设置一些 JVM 参数，这些参数可以告诉我不同​​的线程正在做什么，或者任何其他有助于检测线程争用的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:58:44.360

从您的描述看来，您有一个单线程资源，而您的代码无法有效地使用多个线程。您应该能够通过在发生这种情况时（几次）进行线程转储来看到这一点。您应该看到一个线程在做“真正的”工作，而池中的所有其他线程都在等待某事或空闲。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:54:00.237

我不知道可以告诉您这一点的 jvm 选项，我会在其上附加一个分析器并查看线程是否正在竞争（阻塞/等待）很多，然后查看它们正在竞争哪些锁。

# xml - 使用命令在 xsl 中创建新字段来分隔数据

> ID：10228459
> 
> 赞同：1
> 
> 时间：2012-04-19T12:49:50.467
> 
> 标签：xml, xslt

您好，我需要用逗号分隔数据并添加新数据。

```
<fields>
<field name="example"><value>example,i,am,new,to,xslt</value></field>
<fields> 
```

我需要将此 xml 转换为

```
<fields>
<field name="example"><value>example</value><value>i</value>am</value><value>new</value><value>to</value><value>xslt</value></field>
<fields> 
```

谁能解释我如何使用 XSLT 做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:14:54.987

**一、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="value">
   <xsl:for-each select="tokenize(., ',')">
     <value><xsl:value-of select="."/></value>
   </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时（已更正！！！为了格式正确）：**

```
<fields>
    <field name="example">
        <value>example,i,am,new,to,xslt</value>
    </field>
</fields> 
```

**产生了想要的正确结果：**

```
<fields>
   <field name="example">
      <value>example</value>
      <value>i</value>
      <value>am</value>
      <value>new</value>
      <value>to</value>
      <value>xslt</value>
   </field>
</fields> 
```

* * *

**二、XSLT 1.0 解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="value" name="tokenize">
  <xsl:param name="pText" select="."/>

  <xsl:if test="string($pText)">
   <value>
    <xsl:value-of select=
     "substring-before(concat($pText, ','), ',')"/>
   </value>

   <xsl:call-template name="tokenize">
     <xsl:with-param name="pText" select=
        "substring-after($pText, ',')"/>
   </xsl:call-template>
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，会产生相同的正确结果**：

```
<fields>
   <field name="example">
      <value>example</value>
      <value>i</value>
      <value>am</value>
      <value>new</value>
      <value>to</value>
      <value>xslt</value>
   </field>
</fields> 
```

**说明**：

1.  使用身份规则“按原样”复制所有内容。

2.  覆盖匹配的（标识模板的）模板`value`。

3.  在解决方案 I 中——适当使用标准 XPath 2.0 函数`tokenize()`。

4.  在解决方案 II 中——使用命名模板实现类似函数——因为在 XPath 1.0/XSLT 1.0`tokenize()`中没有定义。`tokenize()`

5.  在解决方案 II 中，为方便起见，我们将模板匹配`value`与执行逗号标记的命名模板合并。

# iphone - 在 ios 上通过 Twilio 发送短信？

> ID：10228462
> 
> 赞同：3
> 
> 时间：2012-04-19T12:49:52.180
> 
> 标签：iphone, twilio

我如何[通过 twilio 发送短信](https://www.twilio.com/docs/api/rest)，我已经尝试过并正在做以下事情。

```
- (IBAction)sendButtonPressed:(id)sender 
 {
    NSLog(@"Sending request.");

    // Common constants
    NSString *kTwilioSID = delegate.sessionId;
    NSString *kTwilioSecret = delegate.twilioToken;
    NSString *kFromNumber = delegate.twlioNumber;
    NSString *kToNumber = @"+14126620408";
    NSString *kMessage = @"Hi there......";

    // Build request
    NSString *urlString = [NSString stringWithFormat:@"https://%@:%@@api.twilio.com/2010-04-01/Accounts/%@/SMS/Messages", kTwilioSID, kTwilioSecret, kTwilioSID];

    NSURL *url = [NSURL URLWithString:urlString];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setURL:url];
    [request setHTTPMethod:@"POST"];

    // Set up the body
    NSString *bodyString = [NSString stringWithFormat:@"From=%@&To=%@&Body=%@", kFromNumber, kToNumber, kMessage];
    NSData *data = [bodyString dataUsingEncoding:NSUTF8StringEncoding];
    [request setHTTPBody:data];
    NSError *error;
    NSURLResponse *response;
    NSData *receivedData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    // Handle the received data
    if (error) {
        NSLog(@"Error: %@", error);
    } else {
        NSString *receivedString = [[NSString alloc]initWithData:receivedData encoding:NSUTF8StringEncoding];
        NSLog(@"Request sent. %@", receivedString);
    }     
 } 
```

并得到错误：操作无法完成。（kCFErrorDomainCFNetwork 错误 -1012。请帮助解决此问题，或与我分享任何帮助材料。在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:29:47.493

根据[这个答案](https://stackoverflow.com/a/3798846/329700)，错误 1012 表示用户取消了身份验证请求。

这只是一种预感，但您可能想通过添加这样的 Authorization 标头来尝试使用 HTTP Basic Auth：[Objective-c HTTP Basic authentication](https://stackoverflow.com/questions/4120311/objective-c-http-basic-authentication)而不是在 URL 字符串中包含凭据，这依赖于 Objective C 库将它们转换为正确的标题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-07T02:31:54.303

确保 HttpPost 参数是 URL 编码的，所以你应该改变

```
NSString *kToNumber = @"+14126620408"; 
```

到

```
NSString *kToNumber = @"%2B14126620408"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-02T23:46:23.907

我写这篇博文是为了帮助您使用 Xcode 8 和 Swift 3 快速完成这项工作。

[https://www.twilio.com/blog/2016/11/how-to-send-an-sms-from-ios-in-swift.html](https://www.twilio.com/blog/2016/11/how-to-send-an-sms-from-ios-in-swift.html)

使用您选择的服务器端语言和用于 HTTP 请求的 Alamofire，请求归结为：

```
@IBAction func sendData(sender: AnyObject) { 
    let headers = [
        "Content-Type": "application/x-www-form-urlencoded"
    ]

    let parameters: Parameters = [
        "To": phoneNumberField.text ?? "",
        "Body": messageField.text ?? ""
    ]

    Alamofire.request("YOUR_NGROK_URL/sms", method: .post, parameters: parameters, headers: headers).response { response in
            print(response)

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-18T23:01:57.613

@IBAction func sendData(sender: AnyObject) { let headers = [ "Content-Type": "application/x-www-form-urlencoded" ]

```
let parameters: Parameters = [
    "To":  "enter your number",
    "Body":  "enter your text"
]

Alamofire.request("YOUR_NGROK_URL/sms", method: .post, parameters: parameters, headers: headers).response { response in
        print(response)

} 
```

}

你必须安装 TIP: pod 'Alamofire', '~> 5.2'

# c - 存储在 C 结构中的值会“神奇地”自行更改

> ID：10228465
> 
> 赞同：0
> 
> 时间：2012-04-19T12:49:54.457
> 
> 标签：c, structure

我有以下类型的结构（带有嵌套）：

```
typedef struct {
   float precursor_mz;
   float precursor_int;
   int scan;
   float time;
   spectrum* spectra; /* Nested struct */
   int array_length;
   int mz_length;
   int int_length;
   char* mz_binary;
   char* int_binary;
   int hits;
} compound;
typedef struct {
   float mz_value;
   float int_value;
   int peaks;
} spectrum; 
```

我转换了这个结构以允许我使用 qsort，然后我将它作为我自己的“类型”存储回来。在代码后面的几行中，我希望循环遍历结构，但不知何故，值在我没有访问它们的情况下发生了变化（介于两者之间）。下面的代码片段：

```
 // The transformating & qsort chunk
    for (i = 0; i < compounds->hits; i++) {
       spectrum test[(compounds+i)->spectra->peaks];
       for (j = 0; j < (compounds+i)->spectra->peaks; j++) {
           test[j] = *((compounds+i)->spectra+j);
       }
       qsort(test,(compounds+i)->spectra->peaks,sizeof(spectrum),compare_mz);
       for (j = 0; j < (compounds+i)->spectra->peaks; j++) {
           ((compounds+i)->spectra+j)->mz_value = test[j].mz_value;
           ((compounds+i)->spectra+j)->int_value = test[j].int_value;
           if ( j < 10) {
               printf("%i %i\t", i, j);
               printf("%f %f\n",((compounds+i)->spectra+j)->mz_value, ((compounds+i)->spectra+j)->int_value); // Here values are still correct 
           } 
       }
   }

/* Summing values that are in 'mass-tolerance' of each other */
   float int_total;
   float mz_int_total;
   for (i = 0; i < compounds->hits; i++) {
       counter = 0;
       printf("---\n");
       for (j = 0; j < (compounds+i)->spectra->peaks; j++) {
           lower_mass = ((compounds+i)->spectra+j)->mz_value - 0.05; //args->mass_tolerance;
           upper_mass = ((compounds+i)->spectra+j)->mz_value + 0.05; //args->mass_tolerance;
           if (j < 10) { 
               printf("%i %i\t", i , j);
               printf("%f %f\n",((compounds+i)->spectra+j)->mz_value, ((compounds+i)->spectra+j)->int_value);  // Here values are borked
           } 
           // Rest of the code chopped off as it should be irrelevant 
```

但是，此代码会产生以下输出：

```
tarskin@5-PARA-11-0120:/data/programming/C/Compound_Spectra$ ./Run -f ../PeptMoiety/32757_p_01.mzML -c 1
0 0 168.858765 32489.994141
0 1 168.960327 72930.046875
0 2 169.039993 4924.188477
0 3 169.913681 85340.171875
0 4 169.932312 2406.798096
0 5 171.000320 345949.593750
0 6 171.007950 1034718.312500
0 7 171.034088 882886.562500
0 8 171.034378 58554.589844
0 9 171.056320 871035.500000
---
0 0 168.858765 32489.994141
0 1 168.960327 72930.046875
0 2 169.039993 4924.188477
0 3 169.913681 85340.171875
0 4 0.000000 0.000000
0 5 169.932312 2406.798096
0 6 171.007950 1034718.312500
0 7 0.000000 0.000000
0 8 0.000000 0.000000
0 9 0.000000 0.000000 
```

有谁知道会发生什么？

**-- 编辑 1 --**

Alk 请求了 compare_mz 的代码，如下：

```
int
compare_mz (const void *a, const void *b)
{
  const spectrum *fa = (const spectrum *) a;
  const spectrum *fb = (const spectrum *) b;

  return (fa->mz_value > fb->mz_value)
             -(fa->mz_value < fb->mz_value);
} 
```

我展示的测试用例是针对单一化合物的（所以 i = 1）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:05:09.953

我强烈认为 引用的内存`spectrum* spectra; /* Nested struct */`没有正确分配或已（部分）释放。

尝试使用`valgrind`.

另外（如果您正在使用）：如果使用's和/或选项，`gcc`您会收到任何编译器警告吗？`gcc``-Wall``-pedantic`

* * *

`for (j=0;..;..)`尝试以下 mod/ 并查看 app/ 的行为是否不同（这样在 to循环之间不会触及堆栈）：

```
float int_total;
float mz_int_total;
spectrum test[(compounds+i)->spectra->peaks];

for (i = 0; i < compounds->hits; i++) {
  ...

/* Summing values that are in 'mass-tolerance' of each other */    
for (i = 0; i < compounds->hits; i++) {
  ... 
```

# hibernate - 是否可以从带有 Hibernate 注释的类中生成 hbm xml？

> ID：10228467
> 
> 赞同：4
> 
> 时间：2012-04-19T12:50:02.320
> 
> 标签：hibernate, annotations, migration

在其中一个项目中，我们从基于注释的 ORM 开始。我们现在需要将实体类保持为普通的 Javabean，并且不将任何其他特定于层的细节带入其中。因此，我们希望转向使用 HBM XML 的方法。是否有一种简单的方法来进行迁移。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:42:45.273

解决手动编写所有映射文件的一种方法是让 Hibernate 根据您带注释的域类针对实际数据库生成数据库模式（我会选择内存中的数据库，例如 Derby）。然后，您将能够使用 Hibernate-tools 插件生成映射文件。

恕我直言，根据您拥有的域类数量，此解决方案可以从节省您一些时间到成为救生员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:09:19.370

据我所知，没有这样的工具。我正在寻找一个类似的工具，它可以从带注释的 EJB-s 3.X 生成 ejb-jar.xml 文件，但什么也没找到。

编写一个工具来解析 Java 源代码中的注释，然后用从注释中获取的数据填充 Velocity hbm.xml 文件模板是相当容易的。

# javascript - 200/'parsererror' with jquery on ajax post to a https

> ID：10228468
> 
> 赞同：1
> 
> 时间：2012-04-19T12:50:03.753
> 
> 标签：javascript, jquery, ajax

我已经阅读了很多关于这个论点的其他问题，但没有一个可以解决我的问题。我以这种方式调用 php 页面。

```
$.ajax({
        url: 'https://mydomain/page.php',
        type: "POST",
        data: { 
            "arg1": arg1,
            "arg2": arg2
        },
        success: function(data, textStatus, xhr) {
            //do stuff
        },
        error: function(xhr, textStatus) {
            alert("doLogin\n- readyState: "+xhr.readyState+"\n- status: "+xhr.status);
        }
    }); 
```

现在，如果我将这些东西放在与 php 相同的服务器上，它就可以正常工作。当我从 localhost 启动它时，问题就开始了。在这种情况下，我会在 xhr 中收到以下内容： `readyState=0, status=0, statusText="error"`. 阅读有关该主题的一些答案似乎是由于同源限制，因此我在调用中添加了一些参数。尤其：

```
 dataType:"jsonp",
   crossDomain: true, 
```

显然这效果更好，因为现在我收到了`readyState=4, status=200, statusText="success"`. 麻烦的是，`textStatus="parsererror"`。我还在许多配置中尝试了其他的东西，如`jsonpCallback`, `cache`, `async`,没有运气。`jsonp`

现在，我没有收到任何数据，因为这个调用只会给我一个我需要的 cookie。

我的问题是：对于初学者来说，我做事是否正确？在这两种情况下，出现这种错误的原因是什么？我称之为“https”/POST 的事实是否改变了某些东西，而不是普通的 http/GET？

第二个问题是，稍后我将不得不通过soap请求调用一些webservice，这将返回xml中的数据。使用同样的技术会起作用吗（假设 jQuery 文档很好，我可以写`dataType:"jsonp xml"`它来动态转换它（假设它也是正确的技术））？我认为它不会是，因为 jsonp 期望在行`callbackFN({...})`而不是 xml 上的东西，对吧？

如果这些都不正确，那么正确的方法是什么？我无法触摸服务器，因此我仅限于客户端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:54:20.813

如果设置`dataType`为`JSONP`，则只能获取 JSON 格式的数据。

因此，如果 url (https://mydomain/page.php) 没有响应 JSON 对象，您将收到解析错误，因为它尝试解析它并失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:53:16.390

JSONP 仅适用于 JSON 格式的数据！因此，如果您收到一个 parseerror，这意味着您的 PHP 的输出可能不是格式正确的 JSON

不，将 XML 作为对 JSONP 调用的响应并不容易。

# sql - SQL Server 2008 上 TableDiff 实用程序的替代品有哪些？

> ID：10228469
> 
> 赞同：3
> 
> 时间：2012-04-19T12:50:06.507
> 
> 标签：sql, sql-server, database, sql-server-2008, comparison

目前，我们在 SSIS 数据加载期间使用 TableDiff 实用程序从临时表（其中包含要更新的最新数据 - 可能是插入/更新/删除）更新生产中的实时表。

但是 TableDiff 需要花费大量时间来识别差异并创建用于更新作业的 sql 脚本（从几个小时 - 识别大约 1000 行更新到 100,000 行更新，最多几天）。

SQL Server 2008 上的 TableDiff 实用程序是否有更好的替代品或更好的流程/想法？

**更新：** 寻找产品/实用程序选项以及*更好的算法*以使其更快

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:44:45.183

为什么在这里调用带有 MERGE 语句的存储过程不是一个选项？我在 DTS 时代就使用这种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:51:51.570

我建议 Red-Gate 的 SQL 数据比较，但它有点贵。（如果您想查看它是否适合您，可以免费试用）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:55:48.667

RedGate 据说是最好的。

我有时会使用[亚特兰蒂斯](http://www.atlantis-interactive.co.uk/products/sqleverywhere/default.aspx)工具

他们很重，但做他们的工作

# sql - 接收以逗号分隔的整数列表时如何为IN sql运算符生成整数

> ID：10228474
> 
> 赞同：-1
> 
> 时间：2012-04-19T12:50:21.150
> 
> 标签：sql, sql-server, sql-server-2005

> **可能重复：**
> [参数化 SQL IN 子句？](https://stackoverflow.com/questions/337704/parameterizing-an-sql-in-clause)
> [SQL如何在整数列表上获取相等比较器](https://stackoverflow.com/questions/10183797/sql-how-to-get-an-equality-comparator-on-a-list-of-ints)

我在 C# 中有一个这样的字符串：

```
string listOfNumbers = "12,56,90,101"; //of course, this string could be different 
```

和 C# 代码

```
sqlCommand.Parameters.Add("@numbers", listOfNumbers);
SqlDataReader dataReader = sqlCommand.ExecuteReader(); 
```

但是 sqlCommand 绑定到一个存储过程，里面是一个 sql 语句，如

```
SELECT * FROM TABLE1 WHERE COLUMN1 IN(@numbers) 
```

`@numbers`是`NVARCHAR(30)`数据类型。

但是当断点`SqlDataReader dataReader = sqlCommand.ExecuteReader();`在线时，VS2010 会抛出异常`Incorrect syntax near my_stored_procedure`。

对于 IN 运算符，如何“转换”包含以逗号分隔的整数的字符串？

也许，错误是由错误引起的`SELECT * FROM TABLE1 WHERE IN("12,56,90,101")`，错误应该是无法从 varchar 转换为整数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:17:41.573

C#代码：

```
string listOfNumbers = "12|56|90|101"; 
```

SQL查询：

```
SELECT  *
FROM    TABLE1
WHERE   '|' + @numbers + '|' LIKE '%|' + CAST(COLUMN1 AS varchar) + '|%' 
```

# java - Paypal SetExpressCheckout预填地址不起作用java

> ID：10228477
> 
> 赞同：0
> 
> 时间：2012-04-19T12:50:35.220
> 
> 标签：java, paypal

我有 java (76.0) 的最新 nvp sdk，我是否通过以下方式将参数发送到贝宝：

```
NVPEncoder encoder = new NVPEncoder();
encoder.add("VERSION", "76.0");
encoder.add("METHOD","SetExpressCheckout");
encoder.add("RETURNURL",returnURL);
encoder.add("CANCELURL",cancelURL);
encoder.add("AMT",request.getParameter("paymentAmount"));
encoder.add("PAYMENTACTION",request.getParameter("paymentType"));
encoder.add("CURRENCYCODE",request.getParameter("currencyCodeType"));

encoder.add("LANDINGPAGE","Billing");
encoder.add("PAYMENTREQUEST_0_SHIPTOSTREET", "345/3 Moomy St.");
encoder.add("PAYMENTREQUEST_0_SHIPTOCITY", "Umpa Lumpa");
encoder.add("PAYMENTREQUEST_0_SHIPTONAME","Johnny Walker");
encoder.add("PAYMENTREQUEST_0_SHIPTOSTATE", "NSW");
encoder.add("PAYMENTREQUEST_0_SHIPTOZIP","2673");
encoder.add("PAYMENTREQUEST_0_SHIPTOCOUNTRYCODE", "AU");
encoder.add("PAYMENTREQUEST_0_SHIPPINGAMT","56.00");
encoder.add("NOSHIPPING", "0"); 
```

我正在进入“计费”登录页面，但是我没有得到预填地址。我也尝试过交换：encoder.add("PAYMENTACTION",request.getParameter("paymentType")); 与：encoder.add("PAYMENTREQUEST_0_PAYMENTACTION",request.getParameter("paymentType"));

因为前者似乎已被弃用。

我使用与以下相同的参数： [使用 PayPal Checkout Express 时是否可以通过 SetExpressCheckout 传递送货地址？](https://stackoverflow.com/questions/8653720/is-it-possible-to-pass-a-shipping-address-via-setexpresscheckout-when-using-payp)

在那里，api升级似乎是答案，但我有最新的。至少这`System.out.println("API VERSION: "+caller.getAPIVersion());`是告诉我的（76.0）

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:40:58.997

好的解决了**& *&@* &#@ 问题：它适用于正常的旧变量！！！！不要**不要**使用：

PAYMENTREQUEST_n_ANYTHING 它不起作用！

# java - 如何在 Red5 `fitcDemo` 示例中验证用户身份？

> ID：10228481
> 
> 赞同：0
> 
> 时间：2012-04-19T12:50:46.003
> 
> 标签：java, chat, red5

我正在尝试更改`fitcDemo`Red5 应用程序的源代码，并在让它连接到服务器之前以某种方式验证用户名，但我不知道如何开始！
我的意思是我不知道客户端连接时将调用哪个方法以及如何从客户端应用程序获取用户名。
我会把源代码带到这里，以便有人可以帮助我。

```
package org.xyz;

import java.util.List;
import java.util.Set;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.red5.server.adapter.ApplicationAdapter;
import org.red5.server.api.IClient;
import org.red5.server.api.IConnection;
import org.red5.server.api.IScope;
import org.red5.server.api.Red5;
import org.red5.server.api.service.IPendingServiceCall;
import org.red5.server.api.service.IPendingServiceCallback;
import org.red5.server.api.service.IServiceCapableConnection;
import org.red5.server.api.stream.IBroadcastStream;
import org.red5.server.api.stream.IPlayItem;
import org.red5.server.api.stream.IPlaylistSubscriberStream;
import org.red5.server.api.stream.IStreamAwareScopeHandler;
import org.red5.server.api.stream.ISubscriberStream;

public class Application extends ApplicationAdapter
  implements IPendingServiceCallback, IStreamAwareScopeHandler
{
  protected static Log log = LogFactory.getLog(Application.class);

  public boolean appStart(IScope scope)
  {
    return true;
  }

  public boolean appConnect(IConnection conn, Object[] params)
  {
    IServiceCapableConnection service = (IServiceCapableConnection)conn;
    log.info("Client connected {} conn {}");
    service.invoke("setId", new Object[] { conn.getClient().getId() }, this);
    return true;
  }

  public boolean appJoin(IClient client, IScope scope)
  {
    log.info("Client joined app {}");

    IConnection conn = Red5.getConnectionLocal();
    return true;
  }

  public void streamPublishStart(IBroadcastStream stream)
  {
    if (log.isDebugEnabled()) {
      log.debug("stream broadcast start: {}");
    }
    IConnection current = Red5.getConnectionLocal();
    for (Set<IConnection> connections : this.scope.getConnections())
      for (IConnection conn : connections) {
        if (conn.equals(current))
        {
          continue;
        }

        if ((conn instanceof IServiceCapableConnection)) {
          ((IServiceCapableConnection)conn).invoke("newStream", new Object[] { stream.getPublishedName() }, this);

          if (log.isDebugEnabled())
            log.debug("sending notification to {}");
        }
      }
  }

  public void streamRecordStart(IBroadcastStream stream)
  {
  }

  public void streamBroadcastClose(IBroadcastStream stream)
  {
  }

  public void streamBroadcastStart(IBroadcastStream stream)
  {
  }

  public void streamPlaylistItemPlay(IPlaylistSubscriberStream stream, IPlayItem item, boolean isLive)
  {
  }

  public void streamPlaylistItemStop(IPlaylistSubscriberStream stream, IPlayItem item)
  {
  }

  public void streamPlaylistVODItemPause(IPlaylistSubscriberStream stream, IPlayItem item, int position)
  {
  }

  public void streamPlaylistVODItemResume(IPlaylistSubscriberStream stream, IPlayItem item, int position)
  {
  }

  public void streamPlaylistVODItemSeek(IPlaylistSubscriberStream stream, IPlayItem item, int position)
  {
  }

  public void streamSubscriberClose(ISubscriberStream stream)
  {
  }

  public void streamSubscriberStart(ISubscriberStream stream)
  {
  }

  public List<String> getStreams()
  {
    IConnection conn = Red5.getConnectionLocal();
    return getBroadcastStreamNames(conn.getScope());
  }

  public void resultReceived(IPendingServiceCall call)
  {
    log.info("Received result {} for {}");
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:24:32.443

尽管 Red5 提供了这样做的方法： [如何使用 Red5 API 识别发布者和消费者，](https://stackoverflow.com/questions/6775239/how-to-identify-publishers-and-consumers-using-red5-api) 但我需要使用数据库以不同方式识别它们，所以这是我的方法。假设您已经将数据库与 red5 中的用户相关表连接起来。如果没有，官方教程是一个很好的起点： [http](http://www.red5tutorials.net/index.php/Tutorials:MySQL_and_Red5) ://www.red5tutorials.net/index.php/Tutorials:MySQL_and_Red5 虽然该教程是针对 MySQL 的，但您可以为您的数据库使用适当的 JDBC 驱动程序。

首先，您需要使用 as3 在 Flash 中 NetConnection 的 connect() 中从客户端发送一个用户 ID：

```
var nc:NetConnection = new NetConnection();
var userID:String = "foo";
nc.connect("rtmp://" + ipAddrOfRed5Server + "/fitcDemo", userID); 
```

在 Red5 中：

```
public boolean appConnect(IConnection conn , Object[] params )
{
    try { 
         String uID = (String)params[0];             
         //Run a query here to check if the user exists in the DB. 
             // If not, you can call rejectClient("Not an existing user!");
             // Once authenticated here, your normal logic follows
    }
    } catch(Exception e){
        e.printStackTrace();
        log.error("Error handling User connect"); 
    }       
    return true;

} 
```

# android - 如何将主题应用于 a的元素

> ID：10228482
> 
> 赞同：7
> 
> 时间：2012-04-19T12:50:45.947
> 
> 标签：android, preferenceactivity

我有一个扩展 PreferenceActivity 的活动。

我的主题：android:theme="@android:style/Theme.Light.NoTitleBar.Fullscreen" 应用于 Manifest 文件中的应用程序级别。

除了“PreferenceCategory”的“PreferenceScreen”元素之外，一切都得到了想要的主题。它们仍然具有默认的黑色背景。简而言之，具有父首选项屏幕的主首选项类别屏幕正在获取主题，但如果我单击任何 PreferenceScreens 以转到其元素首选项（EditText 等），他们没有获得主题......

知道为什么会发生这种情况吗？

结构或preferences.xml 是这样的：

```
<PreferenceCategory>

    <PreferenceScreen>
        <EditTextPreference>
        ...
        </EditTextPreference>
        <EditTextPreference>
        ...
        </EditTextPreference>
        ...
    </PreferenceScreen>

    <PreferenceScreen>
    ...
    </PreferenceScreen>

</PreferenceCategory> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T11:22:55.697

最后我发现了如何以编程方式更改“PreferenceActivity”的主题（通过java代码）

要更改主题，只需这样做：

```
 @Override
        public void onCreate(Bundle savedInstanceState) {
        setTheme(R.style.Holo_Theme_Light);
        super.onCreate(savedInstanceState);
        } 
```

总是`setTheme(R.style.yourtheme);`在方法之前调用`super.onCreate(savedInstanceState);`方法。通过这样做，它将产生如下所示的结果。

![在此处输入图像描述](../Images/e92db99295f28818d86be188bb67b13f.png)

就这样。

`setTheme(R.style.yourtheme);`如果你在方法之后调用方法`super.onCreate(savedInstanceState);`，它将产生如下所示的结果。

![在此处输入图像描述](../Images/805a720049e2cef3c647a8dcf33def1a.png)

注意：嵌套的 PreferenceScreen 无法识别主题。要将主题应用于该嵌套的 PreferenceScreen，您必须为该嵌套的 PreferenceScreen 创建另一个 PreferenceActivity 并`setTheme(R.style.yourtheme);`在那里调用方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T13:58:04.157

这是早期 Android 版本中的错误（另请参阅[http://code.google.com/p/android/issues/detail?id=4611](http://code.google.com/p/android/issues/detail?id=4611)）。

如果我没记错的话，主题并未正确应用于所有 Android 2.x 版本上的 PreferenceActivity。解决此问题的一种方法是自己设置调整颜色/字体等，但错误报告的评论中也描述了一种解决方法。主题应在 Android 3.0 及更高版本上正常工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-01T21:33:26.520

查看 的源码[`PreferenceScreen#showDialog(Bundle)`](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/preference/PreferenceScreen.java#L174)，我们看到对话框是使用通过 获得的主题资源创建的`mContext.getThemeResId()`，然后在`ContextThemeWrapper`.

这可以极大地帮助我们，因为我们所要做的就是覆盖`getThemeResId()`您的 Activity 中的方法（对公共 API 隐藏），以提供我们的自定义主题，并且子 PreferenceScreen 现在使用我们想要的任何自定义主题资源！

```
/**
 * This is a hack to provide our own theme for the PreferenceScreen's dialog.
 *
 * @see android.preference.PreferenceScreen#showDialog(Bundle)
 */
// NOTE there is no @Override, even though it overrides the Activity method
public int getThemeResId() {
    return R.style.Theme_MyApp_PreferenceScreen;
} 
```

请注意，由于此方法使用 注释`@hide`，因此我们不能使用`@Override`通常在这种情况下使用的注释；而且我们也不能调用该`super.getThemeResId()`方法。如果您真的*非常*希望能够有条件地覆盖它并调用超级实现作为后备，您将不得不使用反射来获取超级实现的方法：

```
 try {
            ((Object) this).getClass().getMethod("getThemeResId").invoke(this);
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            e.printStackTrace();
        } catch (NoSuchMethodException e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-06T16:05:42.157

由于所有其他答案都尝试使用 java 代码解决它，这就是我完全使用 xml 并且没有声明我自己的偏好类的方式。

[首先，我从这里](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/layout/preference.xml)复制了一个首选项的完整布局，并将所有的更改`"@+android:id/xyz"`为`"@android:id/xyz"`. 然后在我的样式文件中，我将新样式声明为：

```
<style name="preference">
    <item name="android:layout">@layout/source_preference</item>
</style> 
```

现在在 AppTheme 中，一个新的首选项条目：

```
<style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar">
    <!-- Customize your theme here. -->
    <item name="colorPrimary">@color/colorPrimary</item>
    <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
    <item name="colorAccent">@color/colorAccent</item>
    <item name="android:textColor">@drawable/text_selector</item>
    <item name="android:preferenceStyle">@style/preference</item>
</style> 
```

现在为这个新布局设置你想要的所有样式。就是这样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-30T22:03:20.540

```
@Override
public boolean onPreferenceTreeClick(final PreferenceScreen preferenceScreen, final Preference preference) {
    // https://code.google.com/p/android/issues/detail?id=4611 comment #35
    if (preference instanceof PreferenceScreen && ((PreferenceScreen) preference).getDialog() != null)
        ((PreferenceScreen) preference).getDialog().getWindow().getDecorView().setBackgroundColor(Color.parseColor("#ffffff"));

    return super.onPreferenceTreeClick(preferenceScreen, preference);
} 
```

# mysql - mySQL 仅选择包含任何顺序的某些字母的数据

> ID：10228485
> 
> 赞同：1
> 
> 时间：2012-04-19T12:50:53.153
> 
> 标签：mysql, select

想象一个像这样的表：

```
string
12345
1234567
13254
123 
```

我只想选择那些包含： 1,2,3,4,5 的行以任意顺序。还有那些更短的，其中的所有字母至少都来自那个“数组”。

选定的字符串可能只有那些以任何顺序排列的字符 1、2、3、4、5，而不是必需的。

已选择：

```
12345
123
1324 
```

未选中的：

```
123a
1123 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T12:55:54.403

从我的头顶上掉下来......

```
SELECT *
FROM yourtable
WHERE yourcolumn RLIKE '/^([1-5])+$/'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T13:03:19.453

尝试这个

```
SELECT *
FROM table_name
WHERE column_name RLIKE '^([1-5])+$'; 
```

# wcf - 将 Web 服务从 http 迁移到 https

> ID：10228486
> 
> 赞同：1
> 
> 时间：2012-04-19T12:50:55.643
> 
> 标签：wcf, web-services, soap, dotnetopenauth

最近，我一直在开发一个 WCF SOAP 网络服务，它通过托管在 IIS7 上的 DotNetOpenAuth 网络服务受 OAuth 保护。我很高兴地说我已经完成了这个项目——也就是说，它可以在 http 上运行。

下一步是将两个项目（消费者和服务提供者，后者包含 Web 服务）移动到 https。然而，这造成了一些麻烦。

从消费者调用 DataApi.svc 时，我收到以下错误；

```
Server Error in '/consumerexample/v2' Application.
--------------------------------------------------------------------------------

The username is not provided. Specify username in ClientCredentials. 
Description: An unhandled exception occurred during the execution of the current web request.     Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidOperationException: The username is not provided. Specify username in ClientCredentials.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[InvalidOperationException: The username is not provided. Specify username in ClientCredentials.]
System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) +4727747
System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) +1725
OAuthConsumer.SampleServiceProvider.IDataApi.retrieveTimeTable(String weekVan, String weekTot) +0
OAuthConsumer.SampleServiceProvider.DataApiClient.retrieveTimeTable(String weekVan, String weekTot) in C:\Program Files\TimeTableWebService\consumer\OAuthConsumer\Service References\SampleServiceProvider\Reference.cs:108
OAuthConsumer.<>c__DisplayClass6.<retrieveTimeTable_Click>b__5(DataApiClient client) in C:\Program Files\TimeTableWebService\consumer\OAuthConsumer\GetTimeTable.aspx.cs:76
OAuthConsumer.GetTimeTable.CallService(Func`2 predicate) in C:\Program Files\TimeTableWebService\consumer\OAuthConsumer\GetTimeTable.aspx.cs:129
OAuthConsumer.GetTimeTable.retrieveTimeTable_Click(Object sender, EventArgs e) in C:\Program Files\TimeTableWebService\consumer\OAuthConsumer\GetTimeTable.aspx.cs:76
System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +154
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3707

--------------------------------------------------------------------------------
Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.237 
```

在 http 上，这就像一个魅力。当我在本地调试消费者时，整个 OAuth 授权运行良好。只有在调用 DataApi.svc 中的方法 retrieveTimeTable 时，我才会收到此错误。

在 IIS7 上，我为消费者和服务提供者站点启用了匿名和基本身份验证。web.config 文件如下；

**消费者**

```
<system.serviceModel>
  <bindings>
    <wsHttpBinding>
      <binding name="WSHttpBinding_IDataApi" closeTimeout="00:01:00"
     openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
     bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
     maxBufferPoolSize="524288" maxReceivedMessageSize="999999999" messageEncoding="Text"
     textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">

        <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
       maxBytesPerRead="4096" maxNameTableCharCount="16384" />
        <reliableSession ordered="true" inactivityTimeout="00:10:00"
       enabled="false" />

        <security mode="Transport">  
    <transport clientCredentialType="Basic" proxyCredentialType="None" realm=""/>  
    <message clientCredentialType="Certificate" algorithmSuite="Default" /> 
        </security>          

      </binding>
    </wsHttpBinding>
  </bindings>

  <client>
    <endpoint address="https://websrv.hszuyd.nl/serviceprovider/v2/DataApi.svc" binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IDataApi" contract="SampleServiceProvider.IDataApi" name="WSHttpBinding_IDataApi">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>        
  </client>
</system.serviceModel> 
```

**服务提供者**

```
<system.serviceModel>
  <behaviors>
    <endpointBehaviors>
      <behavior name="DataApiBehavior">
        <webHttp />
      </behavior>
      <behavior name="wsHttpEnablingBehaviour">
        <webHttp/>
      </behavior>
    </endpointBehaviors>            

    <serviceBehaviors>  
      <behavior name="DataApiBehavior">
        <serviceMetadata httpsGetEnabled="true" />
        <serviceDebug includeExceptionDetailInFaults="true" />
        <serviceAuthorization serviceAuthorizationManagerType="OAuthServiceProvider.Code.OAuthAuthorizationManager, OAuthServiceProvider" principalPermissionMode="Custom" />
      </behavior>
      <behavior name="wsHttpEnablingBehaviour">
        <serviceMetadata httpsGetEnabled="true"/>
        <serviceDebug includeExceptionDetailInFaults="false"/>
      </behavior>
    </serviceBehaviors>
  </behaviors>
  <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />

  <bindings>
    <wsHttpBinding>   
      <binding name="wsHttpBinding" maxReceivedMessageSize="999999999">
        <security mode="Transport">
          <transport clientCredentialType="Basic" />    
        </security>
      </binding>               
    </wsHttpBinding>
  </bindings>
  <services>
    <service behaviorConfiguration="DataApiBehavior" name="OAuthServiceProvider.DataApi">
      <clear/>
      <endpoint address="" binding="wsHttpBinding" contract="OAuthServiceProvider.Code.IDataApi" name="Oauth" bindingConfiguration="wsHttpBinding" />               
    </service>
  </services>
</system.serviceModel> 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:33:49.073

我很抱歉，但我不明白。客户端不应使用基本身份验证。基本身份验证应仅用于 Authorize.aspx 页。所以我认为问题在于webservice本身使用基本身份验证而不是oauth，但我现在不知道如何解决这个问题。如果我删除端点的 binding="wsHttpBinding" 则不起作用。（我是妮可的同事）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:58:36.920

可能您的消费者端使用一些代理来调用提供者，但没有指定基本身份验证所需的用户/通行证。

# c# - ASP.NET 图表控件为空

> ID：10228488
> 
> 赞同：0
> 
> 时间：2012-04-19T12:51:00.633
> 
> 标签：c#, asp.net, charts

我想使用 asp.net 图表控件，在代码隐藏中有这段代码：

```
chIstatistik.DataSource =
                SqliteDatabase.ExecuteDataTable("SELECT COUNT(*) as sayi, kategoriNo FROM kisi WHERE kategoriNo = " +
                                                drpCategories.SelectedItem.Value);

            chIstatistik.Series["Series1"].XValueMember = "sayi";
            chIstatistik.Series["Series1"].YValueMembers = "kategoriNo";
            chIstatistik.DataBind(); 
```

我想要做的是，显示给定“kategoriNo”的行数。代码中是否有任何错误？图表为空，但我可以看到数据源中的数据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:38:15.457

试试下面的代码

```
DataTable dt = SqliteDatabase.ExecuteDataTable("SELECT COUNT(*) as Yaxis, kategoriNo as Xaxis FROM kisi WHERE kategoriNo = " + drpCategories.SelectedItem.Value);
DataView dv = dt.DefaultView;
// Populate series data
chIstatistik.Series["Series1"].Points.DataBindXY(dv, "Xaxis", dv, "Yaxis"); 
```

CategoriNo 应该是一些将显示在 Xaxis 上的名称。希望能帮助到你

# maven - 第谷：'Export-Package' 已从 MANIFEST.MF 中删除

> ID：10228500
> 
> 赞同：2
> 
> 时间：2012-04-19T12:51:41.993
> 
> 标签：maven, tycho

我们正在将构建系统从 Ant 迁移到 Maven，我目前正在构建 Eclipse 插件。在做了一些研究之后，我决定使用 Tycho Maven 插件来进行构建。这并不简单，但我解决了除此之外的大多数问题。

尝试构建依赖插件时出现错误。考虑我有一些插件 A 和一个依赖于 A 的插件 B（使用 A 中的类）。这两个插件都是清单优先的（并且有`<packaging>eclipse-plugin</packaging>`）。

当我尝试构建“B”时，出现以下构建错误：

```
[ERROR] Access restriction: The type Constants is not accessible due to restriction on class pathentry C:/maven/repository/... 
```

我检查了很多次，但直到后来我才意识到我应该看看我的存储库中**A.jar的****MANIFEST.MF**，情况就是这样。由于某种原因已从插件**A**的 MANIFEST-MF 中删除。我在本地 Maven 存储库中手动将缺少的导出添加到 MANIFEST.MF（只是为了确保这是真正的问题！），并且插件**B**的构建成功！**`Export-Package`**

 ******那么问题来了：如何在构建的插件中配置 Tycho**不移除Export-Package（或者配置应该导出哪些包）？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T14:42:21.037

原来，第谷依赖于 MANIFEST.MF 属性的顺序。在我的情况下，`Export-Package`放在 之后`Import-Package`，在这种情况下，Tycho 在构建插件并重新生成 MANIFEST.MF 时丢弃了整个 Export-Package 属性。只要`Export-Package`放在**之前** `Import-Package`，一切正常，目标 MANIFEST.MF 已按预期生成。第谷版本尝试：**0.14.0** , **0.14.1**

**编辑**

Eclipse Bugzilla 上报告了该错误：[当位于提供的 MANIFEST.MF 中的“Import-Package”之后，“Export-Package”会从目标 MANIFEST.MF 中删除](https://bugs.eclipse.org/bugs/show_bug.cgi?id=377249)

**编辑2**

查看提交的错误的详细信息。真正的原因是缺少换行符，这在形式上是一个明显的错误。Tycho 在解析期间忽略了最后一行，因此作为最后一行的 Export-Package 未包含在目标清单中。******

# ffmpeg - 来自 MPEG4 流的运动矢量和 DC 系数

> ID：10228503
> 
> 赞同：1
> 
> 时间：2012-04-19T12:51:57.687
> 
> 标签：ffmpeg, motion-detection, mpeg-4

我需要从 MPEG4 视频中提取有关运动矢量和 DC 系数的信息。我搜索了相关站点和主题，发现一个好的解决方案是使用 ffmpeg 编解码器的代码。尤其是 libavcodec/mpegvideo.c 中的 ff_print_debug_info 函数计算相关信息。

但是，我是 C/C++ 领域的新手，如果有任何示例代码描述或解释如何提取 MV 和 DC 系数，这将非常有帮助。

在我使用的最新版本中（来自[http://ffmpeg.org/download.html](http://ffmpeg.org/download.html)的 FFmpeg 0.10.2 ）还有另一个文件 mpeg4videodec.c。有没有机会通过此代码检索所需的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:33:58.373

查看这段代码： http: [//www.princeton.edu/~jiasic/cos435/motion_vector.c](http://www.princeton.edu/~jiasic/cos435/motion_vector.c)

它给出了使用 ffmpeg 解码帧访问运动矢量的基本思想。

至于 DC 系数，除了将您自己的代码注入解码器以在解码时转储系数外，我没有看到任何其他方法。

# cocoa-touch - 为什么 OpenGL ES 和 cocos2D 比 Cocoa Touch / iOS 框架本身更快？

> ID：10228508
> 
> 赞同：2
> 
> 时间：2012-04-19T12:52:11.823
> 
> 标签：cocoa-touch, opengl-es, cocos2d-iphone, core-animation, quartz-graphics

不知道cocos2D是不是建立在iOS的框架之上的，cocos2D会不会比直接使用Cocoa框架慢一点？（cocos2D 是在 OpenGL ES 之上，而后者又是在 Cocoa Touch / iOS 框架之上，包括 Core Animation 和 Quartz？）。

但是，听说 OpenGL ES 实际上比使用 Core Graphics、Core Animation 和 Quartz 更快？

那么是OpenGL ES最快，cocos2D第二，Core Animation最慢？有人知道为什么使用 OpenGL ES 比直接使用 Cocoa 框架更快吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:58:30.253

cocos2D 建立在 OpenGL 之上。在 cocos2D 中创建精灵时，实际上是在创建 3D 模型并为其应用纹理。3D 模型只是一个扁平的正方形，相机总是直视它，这就是为什么它看起来都是扁平的和 2D 的。但这就是为什么您可以轻松地进行缩放和旋转精灵之类的事情的原因——您真正要做的就是旋转 2D 正方形（实际上是两个三角形）或将它们移近或远离相机。但是 Cocos2D 会为您处理所有这些。

OpenGL 从一开始就被设计为非常快速地输出 3D 图形。因此，它旨在处理周围的推挤点和三角形。然后通过可以专门用于此的 3D 渲染硬件来增强它。由于这就是它所做的一切，它可以非常优化地对构建对象的点进行所有数学运算并将纹理映射到这些对象上。它不必担心 Cocoa 所做的处理触摸或其他系统事情。

Cocoa Touch 不使用 openGl。它可能会使用一些硬件加速，但它不是为此而设计的——它是为创建 2D 按钮等而设计的。它做了什么，它做得很好，但它需要通过很多层来完成它需要做的事情并不像专为图形设计的东西（openGL）那样高效。

OpenGL 是最快的 cocos2D 稍慢，但这只是因为有一些包装器可以让你的生活更轻松。如果你要做同样的事情，那么你可能会更快，但要以灵活性为代价。核心动画是最慢的。

但它们都有自己的用途，并且在各自的利基领域都表现出色。

# sql - 将毫秒转换为 SQL 日期时间

> ID：10228509
> 
> 赞同：0
> 
> 时间：2012-04-19T12:52:12.903
> 
> 标签：sql, datetime

如何将毫秒转换为 SQL 日期时间？

我像这样传输变量开始和结束：

```
 var interval = scheduler.GetSelectedInterval();
 var resourceId = scheduler.GetSelectedResource();
 var start = _aspxDateTimeToMilliseconds(interval.start);
 var end = _aspxDateTimeToMilliseconds(interval.end);
 window.location.href = 
    "FicheAgenda.aspx?Page=ACTION&Mode=Creation&start=" + 
         start + "&end=" + end +"&resourceId=" + resourceId; 
```

输出：

```
FicheAgenda.aspx?Page=ACTION&Mode=Creation&start=1334579400000&end=1334584800000&resourceId=24 
```

在 FicheAgenda.aspx 上，我想将此开始和结束值转换为日期时间

```
 <asp:SqlDataSource ID="SqlDataSource_Activity" runat="server" 
        ConnectionString="<%$ ConnectionStrings:OnyxConnectionString %>" 
        SelectCommand="SELECT DISTINCT [ID_ACTIVITE], [LIBELLE_ACTIVITE]
                       FROM [ESPTEMPS_ACTIVITE]
                       LEFT JOIN ESPTEMPS_PROGRAMMATION
                ON ESPTEMPS_ACTIVITE.ID_ACTIVITE = ESPTEMPS_PROGRAMMATION.ID_ACTIVITY
                        WHERE DATEADD(MINUTE, 
                                CONVERT(int, SUBSTRING(HEURE_DEBUT, 3, 2)), 
                                DATEADD(HOUR, 
                                  CONVERT(int, SUBSTRING(HEURE_DEBUT, 1, 2)), 
                                   DATE_DEBUT))
                               < convert(datetime,@StartDate)
                        AND
                              DATEADD(MINUTE, 
                                CONVERT(int, SUBSTRING(HEURE_FIN, 3, 2)), 
                                DATEADD(HOUR, 
                                  CONVERT(int, SUBSTRING(HEURE_FIN, 1, 2)), DATE_FIN))
                              > convert(datetime,@EndDate) ">
 <SelectParameters>
    <asp:QueryStringParameter Name="StartDate" QueryStringField="start" />
     <asp:QueryStringParameter Name="EndDate" QueryStringField="end" />
 </SelectParameters>             
 </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:57:27.043

使用`dateadd`函数，例如：

```
dateadd(ms, start, '19800101') 
```

`1980-01-01`您在方法中使用的“零”日期在哪里`_aspxDateTimeToMilliseconds`。

# asp.net - ASP.Net FileUpload 控件导致谷歌浏览器崩溃并显示损坏的数据

> ID：10228511
> 
> 赞同：0
> 
> 时间：2012-04-19T12:52:14.560
> 
> 标签：asp.net, google-chrome, file-upload, webkit, crash

我正在处理一个包含文件上传服务器控件（不是异步文件上传）的 asp.net 页面。

我最近注意到，每当该控件在页面上并且发生任何回发时，页面都会崩溃并停止执行..给我奇怪和损坏的数据，就像所附的屏幕截图一样！

我还注意到任何基于 webkit 的浏览器（例如 safari、chrome 等）都会发生这种情况。

奇怪的是，只有在线运行这个页面时才会出现这个问题，但是在本地调试时，却没有出现这个问题！！

有任何想法吗？？

**注意**：以下链接 [ [http://i.stack.imgur.com/lpe24.png](http://i.stack.imgur.com/lpe24.png) ] 是崩溃情况的屏幕，我现在记得一些东西，我曾经在浏览谷歌时有时会看到这个屏幕.com 或 images.google.com ！！希望这会有所帮助：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T07:20:59.853

原来这整个问题是由 web.config 文件中引用的压缩模块引起的。

然而，作为永久解决方案，我将所有**FileUpload**控件更改为**AsyncFileUpload**，获得了解决方案和更轻松的导航和工作方式。

感谢大家 ;）

# java - 从 Java 中的 CSV 流外部化 XML 构造

> ID：10228520
> 
> 赞同：0
> 
> 时间：2012-04-19T12:53:03.957
> 
> 标签：java, xml, xml-serialization

我得到一个值流作为 CSV ，基于某些条件，我需要生成一个 XML，其中仅包含来自 CSV 的一组值。例如。

```
Input : a:value1, b:value2, c:value3, d:value4, e:value5.
if (condition1) 
XML O/P = <Request><ValueOfA>value1</ValueOfA><ValueOfE>value5</ValueOfE></Request>
else if (condition2)
XML O/P = <Request><ValueOfB>value2</ValueOfB><ValueOfD>value4</ValueOfD></Request> 
```

我想以给定模板相应地生成输出 XML 的方式将该过程外部化。字符串操作是实现这一点的最简单方法，但如果输入中出现某些特殊字符等，我不想弄乱 XML。请提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:57:20.010

也许您可以从模板引擎中受益，例如[Apache Velocity](http://velocity.apache.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:58:41.220

我建议创建一个 xsd 并使用[JAXB](http://jaxb.java.net/tutorial/)创建可用于生成 XML 的 Java 绑定类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:10:55.313

我推荐我自己的模板引擎（JATL [http://code.google.com/p/jatl/](http://code.google.com/p/jatl/)）虽然它面向 (X)HTML，但它也非常擅长生成 XML。

我没有费心为您解决整个问题（即对输入进行双重拆分（“，”，然后是“：”）。）但这就是您使用 JATL 的方式。

```
 final String a = "stuff";
    HtmlWriter html = new HtmlWriter() {
        @Override
        protected void build() {
            //If condition1
            start("Request").start("ValueOfA").text(a).end().end();
        }
    };
    //Now write.
    StringWriter writer = new StringWriter();
    String results = html.write(writer).getBuffer().toString(); 
```

这会产生

```
<Request><ValueOfA>stuff</ValueOfA></Request> 
```

所有正确的转义都为您处理。

# c# - 使用带有泛型的结构 - 可访问性不一致

> ID：10228521
> 
> 赞同：0
> 
> 时间：2012-04-19T12:53:04.940
> 
> 标签：c#, generics, struct

我正在尝试在结构继承中使用泛型，请参阅。

```
 public class AuditLogEntry : ObjectBase<AuditLogEntry.AuditLogEntryStruct>
    {

        private struct AuditLogEntryStruct
        {
            public int AuditID;
        }
}

 public abstract class ObjectBase<T> 
{
} 
```

它不会让我对我的结构使用私有，因为它会引发错误：不一致的可访问性：基类“ObjectBaseAuditLogEntry.AuditLogEntryStruct>”比类“AuditLogEntry”更难访问。

但是我真的不想公开我的结构。有任何想法吗？谢谢，亚历克斯

**关注问题：**

这是我们正在尝试做的事情：

```
class AuditLogEntry : ObjectBase<AuditLogEntry.AuditLogEntryStruct>
{
  internal struct AuditLogEntryStruct
        {
            public int AuditID;
}

  public int AuditID
        {
            get
            {
                return udtObject.AuditID;
            }
set{
BeginEdit();
 udtObject.AuditID = value;
        }

}

 class ObjectBase<T>
{
  protected T udtObject;
        protected T udtPreEditObject;

  protected  void BeginEdit()
        {
            if (!IsDirty)
            {
                IsDirty = true;
                udtPreEditObject = udtObject;
            }
        }
} 
```

我不确定如何在公开 AuditLogEntryStruct 中实现这一目标？谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:54:36.960

当一个或多个类型参数不是公共的时，您不能从泛型类派生公共类

任何类型派生自的类型必须与派生类一样可访问，包括作为类型参数提供给基类​​的任何类型参数

如果你有

```
public class publicClass{} 
```

任何类都可以从 A 派生，但是如果您将其更改为

```
internal class internalClass{} 
```

只有其他内部类可以从中派生。

如果您将其中任何一种类型作为类型参数传递，情况也是如此。以下前三项有效，第四项无效

```
public class A : List<publicClass>{}
internal class B : List<internalClass>{}
internal class C : List<publicClass>{}

//not valid because D has wider accessibility than the close generic type List<internalClass>
public class D : List<internalClass>{} 
```

**编辑** 语言团队在某些时候不得不做出决定，是声明您的无效，还是使用您的类型导致非法访问不可访问的类型无效。在您的情况下，将有几个方法返回一个类型，除了您的类之外，所有其他人都无法访问该类型，并且许多方法采用其他类无法提供的类型的参数。因此，真正能够使用您的类的对象的唯一对象将是您的类的对象。你可以用组合而不是继承来解决这个问题

```
public class AuditLogEntry
{
        private ObjectBase<AuditLogEntry.AuditLogEntryStruct> _entry;
        private struct AuditLogEntryStruct
        {
            public int AuditID;
        }
}

public abstract class ObjectBase<T> 
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:01:22.497

考虑这个例子：

```
public class Foo : List<Bar>
{
    private struct Bar { }
}

var myFoo = new Foo();
...
var x = myFoo()[0]; // expression on the right side is of type Bar, yet Bar is inaccessible 
```

**更新**

您要实现的目标实际上并不需要泛型。您只能`ObjectBase<T>`像访问对象一样访问内部的结构。您不妨将它们更改为`object`并完全删除泛型类型。

如果你有更多的逻辑需要某种功能`AuditLogEntryStruct`才能在 中访问`ObjectBase<T>`，你可以提取一个接口：

```
public interface IStructsWithSomeFunctionality { ...  } 
```

使您的结构实现它并将其用作您的类型参数

```
public class AuditLogEntry : ObjectBase<IStructsWithSomeFunctionality> { ... } 
```

# c++ - 是否可以使程序的执行跳过 fprintf 语句/如何创建自己的 fprintf 函数？

> ID：10228528
> 
> 赞同：0
> 
> 时间：2012-04-19T12:53:24.247
> 
> 标签：c++

在我的 C++ 代码中有几个 fprintf 语句，用于调试。因为我可能会再次需要它们，所以我暂时不想评论它们。但是，我需要快速执行程序，所以我想避免它们被打印出来，因为它们目前是这样（我将 stderr 重定向到一个文件）。

最好这将由用户将参数传递给程序来确定，我将这样提取：

```
main (int argc, char *argv[])
{
int isPrint=0;
if (argc > 1 ) {
       isPrint = atoi ( argv[2]);
}

} 
```

我想将 fprintf 重命名为另一个名称，然后根据**isPrint**的值从该函数使用相同的参数执行 fprintf 调用；然而，后来我意识到 fprintf 可以有很多不同类型的参数和不同数量的参数；并且我不知道任何通用的方式来声明我自己的功能与这些要求。

所以我想知道如何创建一个函数，它的工作原理与 fprintf 完全一样，但它需要额外的参数**isPrint**；或者如何以另一种方式解决上述问题。

第一次发布后的补充信息：一种解决方案是在每个 fprintf 语句之前添加：

```
if (isPrint == true ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T12:56:24.807

典型的方法是使用预处理器编译掉对`fprintf()`.

你会做这样的事情：

```
#if defined DEBUG
#define LOG(a) fprintf a
#else
#define LOG(a)
#endif 
```

And in the code you would do:

```
LOG(("The value is %f", some_variable)); 
```

Note the double parenthesis, that's just to make the syntax work. You can do it nicer, but this is simpler to explain.

Now, you would either just edit the code to `#define` or `#undef` the `DEBUG` preprocessor symbol at the top of the file, or pass suitable options to the compiler (`-D` for GCC).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:57:02.083

For debugging purpose you can use the variable argument macro:

```
#ifdef DEBUG
#define FPRINTF(...) fprintf(__VA_ARGS__)
#else
#define FPRINTF(...)
#endif 
```

Be attentive that, if you use `fprintf` directly instead of `FPRINTF` then since you are defining a library function, it should appear after `#include<>` of that function.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T13:09:42.263

First note that if this is just for debugging, I'd agree that the typical way is to use macros or preprocessor defines to tell the compiler to include logging or not.

However, if you don't want it removed entirely by the compiler (so that you can turn the printing on or off with an argument), you could write your own log function that takes `isPrint` and some string, and then use `snprintf()` to format the string before you call it.

Something along these lines:

```
void myLog(int isPrint, char *message)
{
    if(isPrint == 1)
    {
        fprintf(logFile, "%s", message);
    }
}

char msg[64];
snprintf(msg, 64, "Test Message %d", 10);
myLog(isPrint, msg); 
```

It may also be possible to wrap `fprintf()` in your own varags function, but that would be more complicated.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T13:39:13.413

It depends how much flexibilty you've got in changing the code and whether you want to be able to switch this off at runtime or just compile time.

I'd suggest you wrap it in your own variadic function (for tips [look here](https://stackoverflow.com/questions/150543/forward-an-invocation-of-a-variadic-function-in-c)) and then you've encapsulated the functionality.

Your function will essentially be just a thin wrapper round `fprintf()` but at this point you can then either use the preprocessor to ensure that your logging function does nothing if you compile it out, or you can do an integer comparison with, say, a logging level at runtime so that the underlying `fprintf()` only gets called if your debugging level is high enough.

# php - 类似于 Munin 的工具，用于在 PHP 中动态创建图形

> ID：10228534
> 
> 赞同：0
> 
> 时间：2012-04-19T12:53:39.520
> 
> 标签：php, graph, rrd, munin

你知道有什么好的库不需要像 RRD 这样的外部模块，并且可以使用数据库后端动态创建类似 munin 的图形吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:58:31.333

我会推荐[http://pchart.sourceforge.net/](http://pchart.sourceforge.net/)

不过它确实需要GD2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:05:07.680

您也可以使用 Open Flash Chart：[http](http://teethgrinder.co.uk/open-flash-chart/) ://teethgrinder.co.uk/open-flash-chart/ ，但顾名思义，它使用 flash（不确定这是否对您来说是个问题）。

# php - 致命错误：在 /home/dev001/projects/Thrift/gen-php/cassandraTest.php 中找不到类“CassandraClient”

> ID：10228535
> 
> 赞同：0
> 
> 时间：2012-04-19T12:53:49.933
> 
> 标签：php, cassandra, thrift

我已经安装了 cassandra 和 apache Thrift。我创建了一个 PHP 测试页面来测试它。当我运行它时返回以下错误。

致命错误：在第 15 行的 /home/dev001/projects/Thrift/gen-php/cassandraTest.php 中找不到类“CassandraClient”

当我通过 cassandra-cli 检查 cassandra 时，它显示以下错误。

```
power@power-desktop:/home/dev001$ cassandra-cli
org.apache.thrift.transport.TTransportException: java.net.ConnectException: Connection refused  
    at org.apache.thrift.transport.TSocket.open(TSocket.java:183)
at org.apache.thrift.transport.TFramedTransport.open(TFramedTransport.java:81)
    at org.apache.cassandra.cli.CliMain.connect(CliMain.java:79)
    at org.apache.cassandra.cli.CliMain.main(CliMain.java:255)
Caused by: java.net.ConnectException: Connection refused
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
at  java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
at java.net.Socket.connect(Socket.java:579)
at org.apache.thrift.transport.TSocket.open(TSocket.java:178)
... 3 more
Exception connecting to 127.0.0.1/9160\. Reason: Connection refused.
Welcome to Cassandra CLI version 1.1.0~rc1

Type 'help;' or '?' for help.
Type 'quit;' or 'exit;' to quit.

[default@unknown] 
```

请告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:45:36.170

似乎您没有 cassandra 监听正确的 IP/端口。运行 a`netstat -an`以查看它是否正在侦听端口 9160。

话说回来：

*   [Cassandra 不使用 php](https://stackoverflow.com/questions/10164034/cassandra-not-working-with-php/10166284#10166284)
*   [Cassandra 与 PHP - 调用 cassandra-test.php 我得到“调用未定义的方法 CassandraClient::batch_insert()”](https://stackoverflow.com/questions/7256332/cassandra-with-php-on-call-of-cassandra-test-php-i-get-call-to-undefined-meth)

总之，大众的共识是，您应该尽可能避免使用原始节俭并使用维护的客户端库之一： [Cassandra 使用哪个 PHP 客户端库？](https://stackoverflow.com/questions/8401282/which-php-client-library-to-use-with-cassandra)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:33:47.813

我遇到了同样的错误，但是当我通过 cassandra_installation_dir/bin/cassandra 然后“cassandra_installation_dir/bin/cassandra-cli --host 192.168.1.90”启动 cassandra 时，我能够登录。如果可行，请尝试这种方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:09:45.787

在您的终端类型中：

`# service cassandra start`

在使用 cassandra 之前。

这将启动 cassandra 守护进程。必须在向 cassandra 发送命令之前运行

# smtp - 将 java Mailing Service 与 Velocity Engine 一起使用时出现错误“无法找到请求目标的有效证书路径”

> ID：10228541
> 
> 赞同：0
> 
> 时间：2012-04-19T12:54:13.623
> 
> 标签：smtp, ssl-certificate, jakarta-mail, springsource

我正在使用 Velocity enguine 和 java 邮件服务来发送邮件。我正在使用 SMTP 协议.. 这是我的配置

> bean id="mailSender" 类="org.springframework.mail.javamail.JavaMailSenderImpl"/

```
 property name="host" value="lotus.acme.com"/            
        property name="port" value="25"/
        property name="username" value="edosrvc"/
        property name="password" value="wipro@123"/
        property name="javaMailProperties"
            props
                <!-- Use SMTP transport protocol -->
                prop key="mail.transport.protocol">smtp</prop>
                <!-- Use SMTP-AUTH to authenticate to SMTP server -->
                <prop key="mail.smtp.auth">true</prop>
                  <prop key="mail.smtp.ssl.trust">*</prop> 

                <!-- Use TLS to encrypt communication with SMTP server -->
                <prop key="mail.smtp.starttls.enable">true</prop>
                <prop key="mail.debug">true</prop>
            </props>
        </property>
   </bean>

   <bean id="esi" class="com.example.NotificationServiceImpl">      
        <property name="mailSender" ref="mailSender" />
        <property name="velocityEngine" ref="velocityEngine" />     
   </bean>

   <bean id="velocityEngine"class="org.springframework.ui.velocity.VelocityEngineFactoryBean">        
 <property name="velocityProperties">
                       <value>
                   resource.loader=class
                    class.resource.loader.class=org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader
                </value>
                    </property>             
    </bean>

    <bean id="templateMessage" class="org.springframework.mail.SimpleMailMessage">
        <property name="from" value="samplesrvc@acme.com"></property>

    </bean> 
```

我也试过包括这个属性

> *

即使那样我也收到了贝洛错误

> sun.security.provider.certpath.SunCertPathBuilderException：无法在 java.security.cert.CertPathBuilder.build(CertPathBuilder .java:238) 在 sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:280) 在 sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:191) 在 sun.security.validator.Validator.validate( Validator.java:218)

谁能帮我解决这个问题。

我对这些协议和服务器证书非常陌生。

所以任何人都可以请告诉我如何尽快完成我的工作。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:12:57.063

您使用的是什么版本的 JavaMail？

如果[打开 Session debugging](http://www.oracle.com/technetwork/java/javamail/faq/index.html#debug)，调试输出会显示什么？

此外，尝试将系统属性“mail.socket.debug”设置为“true”以获取与证书相关的其他调试输出。

我对 Velocity 一无所知，所以我不知道代码中的这些属性设置是如何到达 JavaMail 的，但它们似乎很可能不是，这可以解释问题。调试输出将有助于验证真正发生了什么。

# codeigniter - codeigniter 在标头中重复的“set-cookie：ci-session”字段

> ID：10228548
> 
> 赞同：6
> 
> 时间：2012-04-19T12:54:24.457
> 
> 标签：codeigniter, session, cookies, http-headers, duplication

每次在我的控制器中使用 $this->session->set_userdata() 或 $this->session->set_flashdata() 时，都会将另一个相同的“Set-Cookie: ci_session=...”添加到 http 标头中服务器发送。

根据 rfc6265，http 标头中的多个 Set-Cookie 字段，具有相同的 cookie 名称是不行的。

那么有没有办法使用codeigniter会话而不创建多个相同的“set-cookie：”？

（我使用 curl 来验证 http 标头）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T12:59:31.950

检查[https://github.com/EllisLab/CodeIgniter/pull/1780](https://github.com/EllisLab/CodeIgniter/pull/1780)

> 默认情况下，当使用 cookie 会话处理程序（加密或未加密）时，每次将新值写入会话时，CI 都会发送整个“Set-Cookie”标头。这导致将多个标头发送到客户端。
> 
> 这是一个问题，因为如果将太多值写入会话，HTTP 标头会变得非常大，并且某些 Web 服务器会拒绝响应。（见[http://wiki.nginx.org/HttpProxyModule#proxy_buffer_size](http://wiki.nginx.org/HttpProxyModule#proxy_buffer_size)）
> 
> 解决方案是在所有其他标头都发送后，在输出页面内容之前仅运行一次“sess_save()”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:13:17.787

我相信你可以将一个数组传递给`$this->session->set_userdata();`我没有测试过这段代码，所以这只是一个尝试按照这些思路进行的建议：

```
$data = array(
    'whatever' => 'somevalue',
    'youget' => 'theidea'
);

$this->session->set_userdata($data); 
```

注意：当我说我没有测试过代码时。我已经使用过这个代码并且我知道它可以工作，我的意思是我还没有测试过它是否会减少发送的标头数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-26T16:15:28.730

就我而言，错误出在浏览器（Chrome）中。它存储了 2 个 cookie 并将它们都发送到服务器，这使得服务器始终创建新会话。我通过清除浏览器中的 cookie 来修复它。希望它可以帮助某人。:)

# querystringparameter - 查询字符串参数的命名规则

> ID：10228550
> 
> 赞同：0
> 
> 时间：2012-04-19T12:54:34.423
> 
> 标签：querystringparameter

我想知道是否有任何规则或指南来命名查询字符串参数

目前我使用非技术用户可以理解的大牌，也喜欢

查看=接受邀请

任务=加入团队

等等

但是当我看到 google、yahoo 等使用的查询字符串参数时，它们非常小，有时甚至是单个字母。

那么他们是否遵循一些规则来向用户隐藏参数的含义？开发人员应该遵循的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:03:06.223

您可以使用任何 urlencoded 字符串作为查询字符串参数，这只是“口味”的问题。显然，Google 会考虑显示搜索结果的第一个 url 参数，因此如果您对索引感兴趣，您可能应该使用有意义的查询字符串参数。谷歌和雅虎显然对那些愚蠢的事情不感兴趣......

# c# - 强制 Richtextbox 仅重绘其前景

> ID：10228552
> 
> 赞同：0
> 
> 时间：2012-04-19T12:54:37.373
> 
> 标签：c#, .net, windows, winforms

你知道如何强制 Richtextbox 只重绘它的前景（而不是背景）。

我应该发送消息或类似的东西吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:05:24.473

您可以覆盖该`OnPaintBackground`方法。

```
protected override void OnPaintBackground(PaintEventArgs pevent)
{
    if (_I_need_to_paint_background) {
        base.OnPaintBackground(pevent)
    }
} 
```

当然，这意味着您必须从原始版本派生出自己的 RichTextBox

```
public class MyRichTextBox : RichTextBox
{
    ...

    protected override void OnPaintBackground(PaintEventArgs pevent)
    {
        // Your background painting logic goes here
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        // Your foreground painting logic goes here
    }
} 
```

使用`Invalidate`控件的方法，您可以告诉控件它们应该重绘自己。该`Refresh`方法使控件无效并告诉它立即重绘自己（使用`OnPaintBackground`and `OnPaint`）。

# javascript - 使用 JavaScript 通过更改其类属性来设置链接样式

> ID：10228553
> 
> 赞同：1
> 
> 时间：2012-04-19T12:54:41.983
> 
> 标签：javascript

编辑：我怀疑问题必须这样做，因为我所有的 # 锚都在同一页面上，除非我重新加载页面，否则 JavaScript 不知道我对链接的点击。虽然我不知道如何解决这个问题......:(

如果显示了它指向的部分，我正在尝试使单击的链接保持蓝色。[这是代码（按照本教程](http://tycoontalk.freelancer.com/javascript-forum/155444-quick-tip-how-make-active-links.html)的建议，我将 Javascript 代码放在结束正文标记之前）。

HTML

```
<ul id="menu">
    <li><a href="#section1">section1</a></li>
    <li><a href="#section2">section2</a></li>
    <li><a href="#section3">section3</a></li> 
```

JavaScript

```
links = document.getElementById("menu").getElementsByTagName("a");

for(i=0; i<links.length;i++) {
   if(links[i].href == window.location.hash) {
   links[i].className = "active";
    }
} 
```

CSS

```
a.active {
    color:blue;
} 
```

但是，它似乎不起作用。任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:59:41.913

您的锚标签未关闭，请确保它们看起来像这样：

```
<a href="#section1">Link Text</a> 
```

注意关闭`"`并且`>`您的代码丢失了。

另外，您是否将 JavaScript 代码包装在一个`<script>`块中？

```
 <script>
    all of your javascript inside of this script block
  </script>
</body> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T13:01:46.700

在这种情况下，您的 href 可能是绝对的，而不仅仅是哈希：

```
 if(links[i].href == window.location.hash) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T13:00:02.673

也许您需要将脚本放在函数中，将其链接到标头中，然后在加载时调用它。

```
function f(){
  var links = document.getElementById("menu").getElementsByTagName("a");

  for(i=0; i<links.length;i++) {
     if(links[i].href == window.location.hash) {
     links[i].className = "active";
      }
  }
} 
```

`<body onload="f()">`

还要注意`var links = ...`声明的含义。

# java - 使用 facebook android 登录

> ID：10228556
> 
> 赞同：0
> 
> 时间：2012-04-19T12:54:52.610
> 
> 标签：java, android, facebook-android-sdk

我正在使用 facebook 创建登录。用户只用 facebook 登录 1 次，我需要得到它的 facebook 用户 ID。

有我正在使用的代码：

```
// Login with facebook
    public void loginFB(View view) {

        System.out.println("started");
        facebook = new Facebook(kAppId);

        facebook.authorize(this, new DialogListener() {

            @Override
            public void onComplete(Bundle values) {
                System.out.println("onComplete");

                new Thread(new Runnable() {
                    public void run() {
                        JSONObject me = null;
                        try {
                            me = new JSONObject(facebook.request("me"));
                        } catch (MalformedURLException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (JSONException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                        try {
                            System.out.println("Login with fb");
//here i should get it's user id                            
String id = me.getString("id");
                            System.out.println("id = " + id);                                                       

                        } catch (JSONException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }
                }).start();

            }

            @Override
            public void onFacebookError(FacebookError error) {
                error.getMessage();
                System.out.println("onFacebookError");
            }

            @Override
            public void onError(DialogError e) {
                e.getMessage();
                System.out.println("DialogError");
            }

            @Override
            public void onCancel() {
                System.out.println("onCancel");
            }

        });

    }

    @Override  
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
            facebook.authorizeCallback(requestCode, resultCode, data);  
    } 
```

所以我在回调这个方法时遇到了一个异常：

```
 @Override
        public void onError(DialogError e) {
            e.getMessage();
            System.out.println("DialogError");
        } 
```

还有一个例外：

```
com.facebook.android.DialogError: The connection to the server timed out. 
```

所以我应该更改代码中的某些内容还是有其他问题？

基本上我需要用户在下载应用程序时登录一次，我需要获取他的用户 ID。

谢谢。

***编辑：***

我已经添加了对互联网的许可。所以问题出在我的互联网上。无法访问 Facebook。

现在的问题是：在这一行中：

```
String id = me.getString("id"); 
```

我返回空值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:12:59.610

您是否修改了您`AndroidManifest.xml`以允许该应用访问互联网？

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

[http://developers.facebook.com/docs/mobile/android/build/#xml](http://developers.facebook.com/docs/mobile/android/build/#xml)

在 JSONObject 你需要做这样的事情：

```
JSONObject me =  Util.parseJson((facebook.request("me")); 
```

`/me` 将返回一个 JSON 对象

# try-catch - Arduino 中的 try/catch 块

> ID：10228562
> 
> 赞同：22
> 
> 时间：2012-04-19T12:55:18.387
> 
> 标签：try-catch, arduino

我正在使用 Arduino 中的套接字通信，我需要 try/catch 块进行正确处理，你们有什么建议？我在互联网上的搜索没有成功。

编辑：

我正在使用的代码使用 WiFly 模块与移动应用程序交互，我正在构建一个机器人模块，其中包含对使用 Android 的移动应用程序的一些控制。一切正常，但有时套接字会断开连接，所以我需要为这种情况添加处理，类似于 try/catch 块，但我没有为 Arduino 找到类似的块。

我的代码：

```
void loop() {
    Client client = server.available();
    if (client) {
        while (client.connected()) {
            if (client.available()) {
                // Serial.print("client connected \n");
                char c = client.read();

                if(c == 'L')
                    turnLeft();
                if(c == 'R')
                    turnRight();
                if(c == 'F')
                    goForward();
                if(c == 'B')
                    goBackward();
                if(c == 'S')
                    Stop();

                Serial.print(c);
            }
        }

        // give the web browser time to receive the data
        delay(100);
        client.stop();
    }
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-19T13:45:19.923

[Arduino 参考](http://arduino.cc/en/Reference/HomePage)未列出（有关原因的`try catch`详细信息，例如，请参阅此[相关答案](https://stackoverflow.com/a/10096149/4023)）。而且我认为，在 µ 控制器上实现 try catch 可能有点困难/不可能。

在大多数语言中，try catch 是一项非常昂贵的操作：程序堆栈为 try 块和每个 catch 块复制一次。如果 try 出错，try-block 堆栈将被丢弃，并且 catch 块堆栈之一将被执行。
我不是 cpu 架构的专家，但我可以想象，这需要大量的内存交换和类似的操作——用一个简单的 µ 控制器应该很难实现。

可能值得看看[C 程序员如何执行类似于 try/catch 的模式](http://www.on-time.com/ddj0011.htm)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-19T15:23:36.897

[Arduino 不支持异常处理](https://stackoverflow.com/a/10096149/4023)。但是，您不需要使用异常处理来使您的代码健壮。通过简单地检查可能失败的函数的返回值，您可以达到相同的目的。

`client.connected()`每次循环时都会检查since，`client.available()`如果未连接，since将返回0，唯一尚未处理的可能失败是从返回`client.read()`。

例如，您可以通过更改以下行来解决此问题：

```
char c = client.read(); 
```

到：

```
int i = client.read();
if (i == -1) {
    break;
}
char c = (char) i; 
```

# mysql - mysql数据库中实现的mongodb“all”条件运算符

> ID：10228570
> 
> 赞同：1
> 
> 时间：2012-04-19T12:55:43.787
> 
> 标签：mysql, mongodb, in-operator

如何翻译 mysql 数据库中 mongodb 中存在的“所有”条件运算符？例如，我在表“标签”中有一个标签列表：

```
table tags:
id   user_id    name
 1   5          apple  
 2   5          banana
 3   5          pear
 4   7          strawberry
 5   7          kiwi 
```

我想查询此表以检索具有苹果**和**香蕉标签的 user_id。因此，IN 运算符不正确，因为它检索具有苹果或香蕉的 user_id。如果标签是有限的，例如苹果和香蕉，我可以用 AND 运算符查询，但我可以查询 20 个标签，所以我不想让 20 和 operator -> name = "banada" and name = "pear" and name = "苹果”和....

在 mongodb 中搜索数组中的所有术语，它使用“all”条件运算符。我怎样才能在mysql中做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:53:30.767

经典答案是：

```
SELECT user_id FROM tags
WHERE name in ('apple','banana', ...18 other names...)
GROUP BY user_id HAVING count(*)=20 
```

# jquery - jQuery 可缩放垂直条形图

> ID：10228575
> 
> 赞同：0
> 
> 时间：2012-04-19T12:55:56.307
> 
> 标签：jquery, jquery-ui, jquery-plugins, charts

我有 24 小时的报告数据，精确到我需要在网站上直观显示的那一秒。有谁知道任何可用的 jQuery 或 JS 库/插件可以做到这一点并允许放大和缩小数据？

看看这个屏幕： [![截屏](../Images/655d081358f1b258fe2a48a16420b43a.png)](https://i.stack.imgur.com/rePyq.jpg)

是否有可能对此进行编码？否则，也许我需要指定开始和结束日期和时间，然后以这种方式构建某种 CSS 表/div？

有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:15:37.903

我会先看看[http://www.highcharts.com/](http://www.highcharts.com/)

Highcharts 看起来很棒，可以轻松修改以适合您。

干杯!

# jquery - 用Jquery检测矩形坐标中的点击

> ID：10228580
> 
> 赞同：0
> 
> 时间：2012-04-19T12:56:21.173
> 
> 标签：jquery

当用户在矩形坐标内单击时，我希望我的代码检测并触发自定义函数。

如果已经知道 Rectangle 的坐标。

我试过这段代码

```
W = $(el).width();
   H = $(el).height();
   X = $(el).position().left;
   Y = $(el).position().top; 
```

但无法检测到它。

例子

考虑一下。我想在这些坐标内检测和触发功能。

[http://www.mathopenref.com/coordrectangle.html](http://www.mathopenref.com/coordrectangle.html)

获取鼠标坐标很容易：-

```
$('canvas').mousemove(function(e){
    drawPaddle(e.pageX, e.pageY);
});

function drawPaddle(paddleX, paddleY) {
    c.beginPath();
    c.rect(paddleX, paddleY, 150, 10);
    c.closePath();
    c.fill();
} 
```

如何检测用户是否在我的矩形坐标内单击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:22:14.957

您可以直接在单击事件上检查鼠标位置。只需将其与您的矩形坐标进行比较。

```
$(document).mousedown(function(e) {
   var x = e.pageX;
   var y = e.pageY; 

    if((x >= X && x <= X+W) &&
       (y >= Y && y <= Y+H))
        alert("in");
});

var el = "#div1";
var W = $(el).width();
var H = $(el).height();
var X = $(el).position().left;
var Y = $(el).position().top; 
```

看看我的[jsfiddle](http://jsfiddle.net/styson/PxcBs/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:17:23.227

像这样的东西

```
var mouseX;
var mouseY;

$(el).mousemove(function(e){
    mouseX = e.pageX;
    mouseY = e.pageY;
});

$(el).click(function(e)
{
    W = $(el).width();
    H = $(el).height();
    X = $(el).position().left;
    Y = $(el).position().top;

    if (mouseX>X   && 
        mouseY>Y   && 
        mouseX<X+W && 
        mouseY<Y+H)
    {
        //do something
    }
}); 
```

虽然它可能需要一些调整...

# hadoop - 从 txt 文件读取并写入 HBase

> ID：10228583
> 
> 赞同：0
> 
> 时间：2012-04-19T12:56:25.983
> 
> 标签：hadoop, hbase

我正在尝试从 txt 文件中读取并写入 HBase。

```
Job Class
   Job job = new Job(conf, "HWriterJob");
        job.setJarByClass(HWriterJob.class);
        FileInputFormat.setInputPaths(job, new Path(otherArgs[0]));

        job.setMapperClass(TokenizerMapper.class);
        job.setOutputKeyClass(ImmutableBytesWritable.class);
        job.setOutputValueClass(Put.class);

        TableMapReduceUtil.initTableReducerJob(table,null,job);

Mapper Class
@Override
    public void map(Text key, Text value, Context context)
            throws IOException, InterruptedException {

        String line = value.toString();

        StringTokenizer st = new StringTokenizer(line, "|");
        String result[] = new String[st.countTokens()];
        int i = 0;
        while (st.hasMoreTokens()) {
            result[i] = st.nextToken();
            i++;
        }

        Map<ImmutableBytesWritable,Put> resultSet = writeToHBase(result);

        for (Map.Entry<ImmutableBytesWritable,Put> entry : resultSet.entrySet()) {
            context.write(new Text(entry.getValue().getRow()), entry.getValue());
        }
    }

Reducer Class

public void reduce(Text key, Iterable<Put> values, Context context)
            throws IOException, InterruptedException {

        for (Put val : values) {
            context.write(key, val);
        }
    } 
```

但我做同样的事情没有成功。

我收到以下错误 java.lang.ClassCastException: org.apache.hadoop.io.LongWritable cannot be cast to org.apache.hadoop.io.Text

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:33:23.223

显然 MR 默认将 LongWritable 作为 MapOutputKeyClass，在您的情况下应该是 Text，因此是错误。

尝试设置**job.setMapOutputKeyClass(Text.class)**并适当设置 job.setMapOutputValueClass。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:38:35.153

```
 @Job Class
            Job job = new Job(conf, "HWriterJob");
    job.setJarByClass(HWriterJob.class);
    FileInputFormat.setInputPaths(job, new Path(otherArgs[0]));

    job.setMapperClass(TokenizerMapper.class);
    TextInputFormat.setInputPaths(job, new Path(args[0]));
    job.setInputFormatClass(TextInputFormat.class);
    job.setOutputKeyClass(ImmutableBytesWritable.class);
        job.setOutputValueClass(Put.class);
    job.setOutputFormatClass(TableOutputFormat.class);

    job.setNumReduceTasks(0);
    System.exit(job.waitForCompletion(true) ? 0 : 1);
            @Mapper 
            Map<ImmutableBytesWritable,Put> resultSet = writeToHBase(result);

    for (Map.Entry<ImmutableBytesWritable,Put> entry : resultSet.entrySet()) {
        context.write(entry.getKey(), entry.getValue());
    } 
```

# c# - 'pnlArr_Click' 没有重载匹配委托 'System.EventHandler'

> ID：10228586
> 
> 赞同：0
> 
> 时间：2012-04-19T12:56:47.633
> 
> 标签：c#

刚从 C# 开始，我一直被这个特定的代码（更准确地说是`lblArr[i, j].Click += pnlArr_Click;`行）卡住：

```
public void CreateLabelArray(int height, int width, int nrofShips)
    {
        pnlBase.Controls.Clear();
        lblArr = new Label[height, width];
        int xpos = 0;
        int ypos = 0;

        for (int j = 0; j < width; j++)
            {
            int column = j + 1;
            for (int i = 0; i < height; i++)
                {
                Coordinaat pos = new Coordinaat();
                pos.X = j;
                pos.Y = i;
                lblArr[i, j] = new Label();
                lblArr[i, j].Left = xpos;
                lblArr[i, j].Top = ypos;
                lblArr[i, j].Width = 35;
                lblArr[i, j].Height = 35;
                lblArr[i, j].Tag = pos;
                lblArr[i, j].Click += pnlArr_Click;
                lblArr[i, j].BackColor = System.Drawing.Color.LightBlue;
                lblArr[i, j].BorderStyle = BorderStyle.FixedSingle;

                pnlBase.Controls.Add(lblArr[i, j]);
                xpos += 0;
                ypos += lblArr[i, j].Height;

                }
            xpos += 35;
            ypos = 0;
            }
    } 
```

当我试图找出在数组中的标签上按下了哪个特定的鼠标按钮时，我认为这种方法可能有效：

```
public int pnlArr_Click(object sender, MouseEventArgs e) 
```

如果我将 MouseEventArgs 更改为 EventArgs，错误就会消失，但这将不再起作用：

```
if (e.Button == MouseButtons.Left) 
```

有任何想法吗？非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:01:30.863

`Click`a 上的事件签名`Label`（在 中定义`Control`）是：

```
public event EventHandler Click; 
```

所以不需要`MouseEventArgs`，只是`EventArgs`。

你应该看看这个`MouseDown`事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:00:17.417

接收 MouseEventArgs 作为第二个参数的事件不是 Click 事件，
而是 MouseDown。以这种方式更改您的代码（另外，为了更好的可读性，重命名 pnlArr_MouseDown 中的事件处理程序）

```
lblArr[i, j].MouseDown += pnlArr_Click; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:01:35.897

您可以使用有效模式`EventArgs`并使用

[Control.MouseButtons](http://msdn.microsoft.com/it-it/library/system.windows.forms.control.mousebuttons.aspx)

或利用`MouseDown`事件。

# android - Android：没有 alpha 的 OpenGL 纹理在 HTC One x 上只是白色

> ID：10228587
> 
> 赞同：0
> 
> 时间：2012-04-19T12:56:48.927
> 
> 标签：android, opengl-es, textures

我在带有 Android ICS 的 HTC One x 上看到了一个问题，但在我迄今为止测试的任何其他设备上都没有：

所有没有 alpha 通道（24 位 png）并且我没有启用 alpha 混合的纹理在该设备上都是白色的。请参阅下面我用来绘制纹理的代码，对于没有 alpha 通道的纹理，m_alpha_blend 为 false：

```
if (m_alpha_blend) {
    gl.glEnable(GL10.GL_BLEND);

    gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
}

gl.glEnable(GL10.GL_TEXTURE_2D);

gl.glBindTexture(GL10.GL_TEXTURE_2D, m_texture_id);
gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, m_texture_buffer);

... (drawing)

gl.glDisable(GL10.GL_TEXTURE_2D);
if (m_alpha_blend) {
    gl.glDisable(GL10.GL_BLEND);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T22:17:26.353

我找到了解决方案。这不是 alpha / 透明度的问题，而是纹理大小的问题。所有边大于 1024 像素的纹理都会在该设备上显示为白色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T23:09:56.820

你可能想要运行类似的东西：

```
int max;
glGetIntegerv(GL_MAX_TEXTURE_SIZE, &max); 
```

在每个设备上，如果设备不支持您的最大分辨率纹理，则将您的纹理降级为更小的尺寸。

# c# - 在 SFTP 上获取远程文件，只知道文件名的一部分

> ID：10228588
> 
> 赞同：2
> 
> 时间：2012-04-19T12:56:49.303
> 
> 标签：c#, .net, ssh, sharpssh

好的，我有完整的文件名，但客户决定在每个名称的末尾包含时间戳，所以这真的让我对如何做到这一点感到困惑。它以前是一个静态名称加上当前日期..

> 例如公司名称OBound2012224.zip

我简单地完成了这个..

```
filename = "CompanyNameOBound" + yr + month + day + ".zip" 
```

但现在他们包括一个时间戳..

> 例如公司名称OBound2012224701611.zip

关于如何解决这个问题的任何想法？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T13:06:34.123

我认为您需要使用sharpssh 的GetFileList 获取目录中所有文件的列表，然后执行检查以查看您想要的文件。

你可能想看看这个问题：[Sharpssh directory Listing](https://stackoverflow.com/questions/3088190/sharpssh-directory-listing)

# c++ - 使用“免费”释放内存时的分段违规

> ID：10228589
> 
> 赞同：0
> 
> 时间：2012-04-19T12:56:52.193
> 
> 标签：c++, crash, segmentation-fault

我正在尝试一个示例程序，我使用“malloc”分配内存并使用“free”取消分配内存......我知道使用“new”和“delete”是正确的方法，但我只是想要去理解……

我得到一个崩溃“分段违规”，但我不明白为什么......

```
class Object{
    public:
       Object(){
          this->def = 10;
          std::cout<<"Object Constructed"<<std::endl;
        }
        ~Object(){
             std::cout<<"Object Destructed"<<std::endl;
         }
         void amIPresent(){
              std::cout<<"Yes Object is Present, Defaulter is "<<this->def<<std::endl;
          }
     private:
         int def;
 };

 int main(){
     std::cout<<"Using malloc to Construct Object"<<std::endl;
     Object *o = static_cast<Object*>(malloc(sizeof(Object)));
     Object o2;
     o = &o2;
     std::cout<<"Freeing Memory using \"free\""<<std::endl;
      o->amIPresent();
      free(o);
      return 0;
 } 
```

输出：

```
 Using malloc to Construct Object
 Object Constructed
 Freeing Memory using "free"
 Yes Object is Present, Defaulter is 10
 Segmentation fault 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T12:58:18.970

因为您正在重新分配`o`指向一个不是用`malloc`. 所以调用`free`它是没有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T12:59:15.417

当您释放 o 时，它指向分配在堆栈上的 o2 的地址（作为变量）。不得`free`用于堆栈对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:08:30.557

我认为您误解了此代码的工作原理：

```
 Object *o = static_cast<Object*>(malloc(sizeof(Object)));
 Object o2;
 o = &o2; 
```

第一的

```
 Object *o = static_cast<Object*>(malloc(sizeof(Object))); 
```

将在堆上分配一块内存，变量 o 将指向它。

```
 Object o2; 
```

将在堆栈上创建一个对象（在堆栈上分配，并调用构造函数）。

```
 o = &o2; 
```

将使 o 指向堆栈上的该对象，它不再引用您使用 malloc 在堆上分配的内存。

所以当你使用

```
 free(o); 
```

它会尝试释放堆栈上的内存，而不是你使用 malloc 分配的内存，所以你会崩溃。

你应该考虑安置新的。参见例如[“安置新”有什么用途？](https://stackoverflow.com/questions/222557/cs-placement-new)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T13:17:40.943

你已经声明了一个指针`o`，你在堆上分配了一些空间，但是你重新分配它指向一个基于堆栈的对象`o2`我不确定你这样做的逻辑是什么，这样做会导致内存泄漏。

然后，您释放与相关联的内存，`o2`但随后 'o2' 被破坏 - 因为所有基于堆栈的变量在您退出它们的范围时都会自动 - 它试图释放已释放的内存。

这里的问题是您正在混合基于堆栈和堆的对象。永远不要尝试删除（或释放）在堆栈上创建的对象，并且正如其他人所说，在 C++ 中坚持使用 new 和 delete 专门用于基于堆的对象。

# javascript - Backbone.js 模型与视图集

> ID：10228591
> 
> 赞同：2
> 
> 时间：2012-04-19T12:57:03.787
> 
> 标签：javascript, model-view-controller, design-patterns, backbone.js

如果我使用 Backbone，其中哪一个（或两者）是设置数据的“正确”方式？

```
// Logic in the Model
// Can call from anywhere that has access
SomeModel = Backbone.Model.extend({
  defaults: {
    visible: false
  },

  toggle: function(visible){
    visible = typeof visible !== "undefined" ? visible : !this.get("visible");
    this.set({visible: visible});
  }
}); 
```

或者

```
// Logic in the View
SomeView = Backbone.View.extend({
  events: {
    "click .toggle" : "toggleVisibility"
  },

  toggleVisibility: function(){
    this.model.set({visible: !this.model.get("visible")});
  }
}); 
```

显然这些工作中的任何一个都有效，但我的问题是应该将多少逻辑推到模型中？例如，如果我遇到更新两个变量的情况：

```
this.model.set({visible: false, foo: bar, something: else}); 
```

在模型上创建这样的函数是否有意义：

```
someFunction: function(visible, foo, something){
  this.set({visible: visible, foo: foo, something: something});
} 
```

这对我来说似乎有点矫枉过正，但视图中的 set({}) 逻辑感觉很脏。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:04:37.267

我将切换功能作为模型的成员，并从您的视图中调用它，隐藏实现细节。请记住，一个模型一次可以由多个视图表示，因此任何常见的模型逻辑都应该集中在那里。

也许是这样的：

```
// Logic in the Model
// Can call from anywhere that has access
SomeModel = Backbone.Model.extend({
  defaults: {
    visible: false
  },

  toggle: function(visible){
    visible = typeof visible !== "undefined" ? visible : !this.get("visible");
    this.set({visible: visible});
  }
});
OR

// Logic in the View
SomeView = Backbone.View.extend({
  initialize: function() {
      this.model.bind('change:visibility',this.changeVisibility);
  }
  events: {
    "click .toggle" : "toggleVisibility"
  },

  toggleVisibility: function(){
    this.model.toggle();
  }
  changeVisibility: function() { 
      ........
      /// seems like alot of extra work to get to this point
      /// but remember, all views for the model are will receive this
      /// event now, not just the one that received the UI click
      /// whether or not that's the behavior you want is up to you. 
      ........
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:05:07.197

可能会觉得很脏，因为您习惯了**视图**和**控制器**之间的区别。然而，在 Backbone.js 中，它并不存在——**视图也是控制器**。当您了解这一点时，与模型的交互会变得更加容易...

在我看来，解决问题的正确方法是结合您介绍的方法。留`SomeModel.toggle`在原地，并在您看来：

```
 toggleVisibility: function() { this.model.toggle(); } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:23:05.487

似乎您正在将视图逻辑混合到您的模型中，这并不是一个好主意。我想您的模型中有*一些*数据与绑定它的视图是否应该可见（例如已删除：true 等）有关，但您应该根据该属性的变化来切换可见性。我会设想这样的事情：

```
SomeModel = Backbone.Model.extend();

SomeView = Backbone.View.extend({
  events: {
    "click .toggle" : "toggleDeleted"
  },

  initialize: function() {
      this.model.on('change:deleted', this.toggleVisibility);
  },

  toggleDeleted: function() {
    var deleted = this.model.get('deleted');
    this.model.set({deleted: !deleted});
  },

  toggleVisibility: function(){
    this.$el.toggle(); // jQuery function toggling visibility
  }
});

// Somewhere in your "controller" logic
var someModel = new SomeModel({deleted: false});
var someView = new SomeView({model: someModel, el: DOMelement}); 
```

这样，您的所有视图逻辑都在您的视图中，而不是您的模型中。该模型是空的，因为主干不需要定义模式，但通常您会在某个时候在那里添加功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T23:32:27.377

类似的问题，有一个很好的答案，在这里：[视图应该设置模型数据吗？](https://stackoverflow.com/questions/7631752/should-views-set-model-data)

与大多数以前的评论者一样，一般的答案似乎是：如果您要更改显示元素，请在视图中设置数据。如果您正在设置业务逻辑，请在模型中设置数据。

# pdf-generation - 使用 Ghostscript 分割 PDF

> ID：10228592
> 
> 赞同：35
> 
> 时间：2012-04-19T12:57:05.883
> 
> 标签：pdf-generation, ghostscript

我尝试使用 Ghostscript 拆分多页 PDF，我在更多网站甚至[ghostscript.com](http://ghostscript.com/doc/7.07/Use.htm#One_page_per_file)上找到了相同的解决方案，即：

```
gs -sDEVICE=pdfwrite -dSAFER -o outname.%d.pdf input.pdf 
```

但这似乎对我不起作用，因为它会生成一个文件，其中包含所有页面，并且名称为*outname.1.pdf*。

当我添加开始页面和结束页面时，它工作正常，但我希望它在不知道这些参数的情况下工作。

在 gs-devel 存档中，我找到了一个解决方案： http: [//ghostscript.com/pipermail/gs-devel/2009-April/008310.html](http://ghostscript.com/pipermail/gs-devel/2009-April/008310.html) - 但我觉得没有`pdf_info`.

例如，当我使用不同的设备但参数相同时，它可以正常工作，生成与我的*input.pdf*包含`pswrite`的一样多的 ps 文件 。

 *使用时这样正常`pdfwrite`吗？难道我做错了什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-09T04:34:59.997

我发现 Weimer 先生编写的这个脚本非常有用：

```
#!/bin/sh
#
# pdfsplit [input.pdf] [first_page] [last_page] [output.pdf] 
#
# Example: pdfsplit big_file.pdf 10 20 pages_ten_to_twenty.pdf
#
# written by: Westley Weimer, Wed Mar 19 17:58:09 EDT 2008
#
# The trick: ghostscript (gs) will do PDF splitting for you, it's just not
# obvious and the required defines are not listed in the manual page. 

if [ $# -lt 4 ] 
then
        echo "Usage: pdfsplit input.pdf first_page last_page output.pdf"
        exit 1
fi
gs -dNOPAUSE -dQUIET -dBATCH -sOutputFile="$4" -dFirstPage=$2 -dLastPage=$3 -sDEVICE=pdfwrite "$1" 
```

来源：[http ://www.cs.virginia.edu/~weimer/pdfsplit/pdfsplit](http://www.cs.virginia.edu/%7Eweimer/pdfsplit/pdfsplit)

将其另存为`pdfsplit.sh`，看看奇迹发生了。

[PDFSAM](http://www.pdfsam.org/)也可以完成这项工作。在 Windows 和 Mac 上可用。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-19T14:53:42.027

您看到的是“正常”行为：当前版本的 Ghostscript`pdfwrite`输出设备不支持此功能。这也在[Use.htm](http://git.ghostscript.com/?p=ghostpdl.git;a=blob_plain;f=gs/doc/Use.htm;hb=HEAD#One_page_per_file)中记录（诚然，不知何故含糊其辞） ：

> ***“但请注意，并非所有设备都支持每个文件一页功能......”***

我似乎记得在 IRC 上提到的 Ghostscript 开发人员之一，他们*可能会*在未来的某个版本中将此功能添加到 pdfwrite，但似乎需要一些主要的代码重写，这就是为什么他们还没有这样做......

* * *

**更新：**正如 Gordon 的评论已经暗示的那样，从[9.06 版](http://git.ghostscript.com/?p=ghostpdl.git;a=blob_plain;f=gs/doc/History9.htm)（2012 年 7 月 31 日发布）开始，Ghostscript 现在支持问题中引用的命令行也用于`pdfwrite`. （Gordon 一定已经在 9.05 中发现了对此的非官方支持，或者他从尚未标记为 9.06 的预发布源编译了自己的可执行文件）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-10T02:40:43.297

```
 #!/bin/bash
#where $1 is the input filename

ournum=`gs -q -dNODISPLAY -c "("$1") (r) file runpdfbegin pdfpagecount = quit" 2>/dev/null`
echo "Processing $ournum pages"
counter=1
while [ $counter -le $ournum ] ; do
    newname=`echo $1 | sed -e s/\.pdf//g`
    reallynewname=$newname-$counter.pdf
    counterplus=$((counter+1))
    # make the individual pdf page
    yes | gs -dBATCH -sOutputFile="$reallynewname" -dFirstPage=$counter -dLastPage=$counter -sDEVICE=pdfwrite "$1" >& /dev/null
    counter=$counterplus
done 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-07-11T11:56:06.397

假设您安装了 Ghostscript，以下是 Windows 命令提示符的脚本（也可用于拖放）：

```
@echo off
chcp 65001
setlocal enabledelayedexpansion

rem Customize or remove this line if you already have Ghostscript folders in your system PATH
set path=C:\Program Files\gs\gs9.22\lib;C:\Program Files\gs\gs9.22\bin;%path%

:start

echo Splitting "%~n1%~x1" into standalone single pages...
cd %~d1%~p1
rem getting number of pages of PDF with GhostScript
for /f "usebackq delims=" %%a in (`gswin64c -q -dNODISPLAY -c "(%~n1%~x1) (r) file runpdfbegin pdfpagecount = quit"`) do set "numpages=%%a"

for /L %%n in (1,1,%numpages%) do (
echo Extracting page %%n of %numpages%...
set "x=00%%n"
set "x=!x:~-3!"
gswin64c.exe -dNumRenderingThreads=2 -dBATCH -dNOPAUSE -dQUIET -dFirstPage=%%n -dLastPage=%%n -sDEVICE=pdfwrite -sOutputFile="%~d1%~p1%~n1-!x!.pdf" "%1"
)

shift
if NOT x%1==x goto start

pause 
```

将此脚本命名为类似的名称`split PDF.bat`并将其放在您的桌面上。将一个（甚至更多）多页 PDF 拖放到其上，它将为您的 PDF 的每一页创建一个独立的 PDF 文件`-001`，`-002`并在名称后附加 suffix 等以区分页面。

`set path=...`如果您的系统 PATH 环境变量中已有 Ghostscript 文件夹，您可能需要自定义（使用相关的 Ghostscript 版本）或删除该行。

它适用于带有 Ghostscript 9.22 的 Windows 10 下的我。请参阅评论以使其与 Ghostscript 9.50+ 一起使用。

享受。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-27T21:33:53.807

这是一个简单的python脚本：

```
#!/usr/bin/python3

import os

number_of_pages = 68
input_pdf = "abstracts_rev09.pdf"

for i in range(1, number_of_pages +1):
    os.system("gs -q -dBATCH -dNOPAUSE -sOutputFile=page{page:04d}.pdf"
              " -dFirstPage={page} -dLastPage={page}"
              " -sDEVICE=pdfwrite {input_pdf}"
              .format(page=i, input_pdf=input_pdf)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-23T18:54:04.813

**更新了仅依赖的答案`pdftk.exe`，而不调用 Ghostscript**

用户@mmj 提供的答案过去对我来说很好用，但不知何故在 GS 版本 9.20 和 9.50 之间的某个地方停止了工作。我也知道@Adobe 提供的解决方案。但是，我喜欢通过选择一个或多个文件并右键单击 → 发送到，从 Windows (10) 资源管理器中完成重复性任务。这是一个 Python 脚本（与 3.8 兼容），它使用`pdftk.exe`（用 2.02 测试）来计算页面总数并将所有页面提取到单个文件中。它应该接受多个 PDF 作为输入。确保你有 Python 并且`pdftk.exe`在 PATH 中。

将其命名`extract-pdf-pages-py.cmd`为`shell:sendto`：

```
python %APPDATA%\Microsoft\Windows\SendTo\extract-pdf-pages-py.py %* 
```

将以下内容放在`extract-pdf-pages-py.py`同一文件夹中：

```
#!/usr/bin/python3
# put as extract-pdf-pages-py.py to shell:sendto

import os
import subprocess
import re
import sys
import mimetypes

def is_tool(name):
    from shutil import which
    return which(name) is not None

if not is_tool('pdftk'):
    input('pdftk.exe not within PATH. Aborting...')
    raise SystemExit("pdftk.exe not within PATH.")

sys.argv.pop(0)

for j in range(len(sys.argv)):
    input_pdf = sys.argv[j]

    if 'application/pdf' not in mimetypes.guess_type(input_pdf):
        input(f"File {input_pdf} is not a PDF. Skipping...")
        continue

    savefile = input_pdf.rstrip('.pdf')

    numpages = subprocess.Popen(f"pdftk \"{input_pdf}\" dump_data", shell=True, stdout=subprocess.PIPE)
    output1 = str(numpages.communicate()[0])
    output2 = re.search("NumberOfPages: ([0-9]*)", output1)
    number_of_pages = int(output2.group(1))

    for i in range(1, number_of_pages + 1):
        os.system(f"pdftk \"{input_pdf}\" cat {i} output \"{savefile}\"{i:04d}.pdf") 
```

我使用了[这个答案](https://stackoverflow.com/a/32259825/12246432)中的代码（@Adobe 编写的脚本）和[那个](https://stackoverflow.com/a/34177358/12246432)（`is_tool`）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-21T16:45:21.233

gs 只接受升序页面。对于从源代码中洗牌（即第 7、第 8、第 5）页，我为 ~/.bashrc 创建了函数：

```
function expdf
{
local str=""
local arr=($(echo $1 | tr "," "\n"))
#          splitting
for i in "${arr[@]}";do
  gs -dBATCH -sDEVICE=pdfwrite -sPageList=$i -dNOPAUSE -sOutputFile=$i.tmp $2
#          reordering for combining
  str="$str $i.tmp"
done
#          combining to combine.pdf
gs -dNOPAUSE -sDEVICE=pdfwrite -sOUTPUTFILE=combine.pdf -dBATCH $str
#          removing temporary files
for i in "${arr[@]}";do rm $i.tmp;done
} 
```

用法示例：`expdf 7-8,5 source.pdf`*

# iphone - SQLite SELECT同时将数据插入数据库

> ID：10228595
> 
> 赞同：1
> 
> 时间：2012-04-19T12:57:09.087
> 
> 标签：iphone, objective-c, sqlite

我试图从表中选择数据：

```
NSMutableArray *tmpArray = [[NSMutableArray alloc] init];
    if (sqlite3_open([path UTF8String], &database) == SQLITE_OK) {
        const char *sql = "SELECT name FROM Artists ORDER BY name";
        sqlite3_stmt *statement;
        if (sqlite3_prepare_v2(database, sql, -1, &statement, NULL) == SQLITE_OK) {
            while (sqlite3_step(statement) == SQLITE_ROW) {

                char *nameChars = (char *)sqlite3_column_text(statement, 0);
                NSString *name = [NSString stringWithUTF8String: nameChars];

                [tmpArray addObject:name];
            }
        }else {
            NSLog(@"Error");
        }
    }else {
        NSLog(@"Error1");
    } 
```

我执行此选择，并在我将数据插入数据库中的另一个表时使用：

```
 -(void)insertAutpPlaylist:(NSString*)playlistName withPlaylist:(NSMutableArray*)songsArray{
    if (sqlite3_open([dataPath UTF8String], &database) == SQLITE_OK) {
        for (int i = 0 ; i < [songsArray count]; i++) {

            SongItem *song = [songsArray objectAtIndex:i];

            sqlite3_stmt *insertStmt = nil;

            NSString *name = song.name; 

            if(insertStmt == nil) 
            {
                NSString *statement = [NSString stringWithFormat:@"INSERT INTO %@ (name) VALUES (?)",playlistName];
                const char *insertSql = [statement UTF8String];

                if(sqlite3_prepare_v2(database, insertSql, -1, &insertStmt, NULL) != SQLITE_OK){
                    NSLog(@"Error while creating insert statement.");
                    insertStmt = nil;
                    continue;
                }

                sqlite3_bind_text(insertStmt, 1, [name UTF8String], -1, SQLITE_TRANSIENT);

                if(SQLITE_DONE != sqlite3_step(insertStmt)){
                    //NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));
                    NSLog(@"Error while inserting data.");
                    insertStmt = nil;
                    continue;
                }
                else{}

                sqlite3_reset(insertStmt);
                insertStmt = nil;
            }

        }

        sqlite3_close(database);
    }
} 
```

如果我不同时插入数据和选择，并且插入和选择在不同的表上，则此代码可以正常工作。

# 编辑

当我尝试进行选择时，我得到“错误”输出： NSLog(@"Error");

# 编辑 2

当我添加`sqlite3_errmsg(database)`到选择方法时，我进入控制台：

```
reason: 'Error while inserting data. 'database is locked' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:34:40.017

选择查询后请敲定sql语句

```
 sqlite3_finalize(statement); 
```

并解决您的问题

# python - 如果在 Plone 4.1 中提交 PloneFormGen 的表单数据，如何触发内容规则

> ID：10228596
> 
> 赞同：1
> 
> 时间：2012-04-19T12:57:09.487
> 
> 标签：python, plone, ploneformgen

如果 PloneFormGen 的表单数据在 Plone 4.1 中提交，如何触发内容规则。例如。我为员工创建了请假申请表。员工提交数据后，内容规则应将休假数据发送给其经理。如果他批准，则应由总经理（GM）进行最终批准。如果中级经理拒绝，邮件将直接发送给员工。如果总经理批准，邮件将直接发送给员工。我想要具有不同状态的 2 或 3 个级别的审阅者。我无法正确定义状态和转换。有人可以指导吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:59:44.187

使用 uwosh.pdf.d2c 将内容提交存储为实际的克隆内容。然后，您可以对这些对象使用内容规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:05:27.180

我记得，PFG 提交不会生成 Plone 事件。虽然您可能会修改 PFG（或者更好的是，贡献增强功能）以在表单提交时添加事件，但我认为您描述的用例可能通过构建自定义内容类型来表示您的休假申请表来更好地实现。虽然这比构建 PFG 表单稍微多一些工作，但您可以轻松利用工作流、事件、内容规则等。

# ios - NSArray of NSStrings 数组包含以字符串开头的对象

> ID：10228605
> 
> 赞同：1
> 
> 时间：2012-04-19T12:58:09.260
> 
> 标签：ios, search, filter, nsstring, nsarray

我试图在以特定字符串开头的 NSStrings 数组中查找所有对象，并返回一个包含所有这些对象的较小数组。例如，您可以有一个包含对象的数组：

```
'Cat',
'Dog',
'Dolphin',
'Whale' 
```

当它搜索的字符串是 时`do`，只返回一个新的 NSArray`Dog`和`Dolphin`对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T13:08:55.650

```
NSString* beginsWithRequirement = @"do";
NSPredicate* predicate = [NSPredicate predicateWithFormat:@"SELF BEGINSWITH[cd] %@", beginsWithRequirement];
NSArray* subArray = [originalArray filteredArrayUsingPredicate:predicate]; 
```

有关使用谓词的更多信息，请参阅[谓词编程指南](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Predicates/predicates.html#//apple_ref/doc/uid/TP40001798-SW1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:04:14.880

尝试这个 -

```
-(NSArray *)entriesInArray:(NSArray *)wordsArray whichStartWithString:(NSString *)startString {

    startString = [startString lowercaseString]; // get rid of this for case-sensitive (& the lowercaseString bit in the loop too)
    NSMutableArray *resultsArray = [NSMutableArray array];

    for (NSString *thisString in wordsArray) {
        if ([[thisString lowercaseString] hasPrefix:startString]) [resultsArray addObject:thisString];
    }

    return resultsArray;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:10:55.390

尝试使用 NSPredicate：

```
 NSArray *arr = [NSArray arrayWithObjects:@"Dog", 
                                          @"Cat", 
                                          @"Dolphin", 
                                          @"Tiger", nil];
 NSString *search = @"do";
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF BEGINSWITH[c] %@", search];
 NSArray *result = [arr filteredArrayUsingPredicate:predicate]; 
```

有关更多信息，您可以查看[谓词编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html)

# asp.net - 对象的asp.net web服务引用对象

> ID：10228606
> 
> 赞同：0
> 
> 时间：2012-04-19T12:58:15.250
> 
> 标签：asp.net, web-services

我里面有一个网络服务我使用一个实体（对象）作为函数参数

但是这个类是“复杂的”，我的意思是里面有对象（简单的OO）

```
class X
{
private Y;
...
} 

class Y
{
private Z;
...
}

class Z
{
int a;
...
} 
```

所以，我的问题是我的服务参考只包含 X，所以我不能确定 Y 和 Z，他不知道它是什么。

有没有办法做到这一点？

* * *

我有 `<WebMethod()` 我可以添加类似的东西`WebAttribute`吗？

# php - 存储在客户端的 cookie 的时区是什么？

> ID：10228608
> 
> 赞同：10
> 
> 时间：2012-04-19T12:58:26.433
> 
> 标签：php, cookies, timezone

我需要使用 PHP setcookie 函数设置 1 小时后过期的 cookie。我服务器上的时区设置为 GMT。我应该如何设置 cookie 到期日期，以使其在不同客户端的浏览器时区中工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T13:07:46.820

据我所知，客户时间是多少无关紧要。PHP 根据 unix 时间码设置过期时间。该时间的任何变化都应与服务器有关。

这是setcookie()的[PHP 手册](http://php.net/manual/en/function.setcookie.php)的摘录：

> 到期：
> 
> cookie 过期的时间。这是一个 Unix 时间戳，因此是自纪元以来的秒数。换句话说，您很可能会使用 time() 函数加上您希望它过期之前的秒数来设置它。或者你可以使用 mktime()。time()+60*60*24*30 将设置 cookie 在 30 天内过期。如果设置为 0 或省略，cookie 将在会话结束时（浏览器关闭时）过期。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T15:59:09.860

PHP 的 setcookie() 函数接受一个对应于 Unix 时间戳值的整数。如果您的 cookie 应该有 1 小时的生存时间，您可以使用 time() + 3600 作为该值。然后 PHP 将创建一个带有过期时间的 cookie，例如“expires=Fri, 3 Aug 2001 20:47:11 UTC”。它采用 UTC (GMT)，因此您不必担心客户端浏览器的时区

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:02:42.517

你可以[试试看](http://www.php.net/manual/en/datetime.gettimezone.php)`getTimeZone`这里`setTimeZone`

[strtotime](http://php.net/manual/en/function.strtotime.php)似乎也可以检索正确的日期时间格式，然后您可以使用gmdate[进行](http://php.net/manual/en/function.gmdate.php)转换

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T13:11:39.120

好吧，假设您使用 set cookie。

我可能错了，但我认为：

您将 expire 参数作为 Unix 时间戳提供，并将时间戳计算为“一小时内”，因此您希望 cookie 在一小时内过期。所以不要关心时区，因为 unix 时间戳是明确的。

然后浏览器的任务是根据 Bowser 设置（区域设置、语言等）翻译日期中的 unix 时间戳

# asp.net-mvc-3 - SlowCheetah - 使用转换后的链接配置文件来共享配置元素

> ID：10228609
> 
> 赞同：3
> 
> 时间：2012-04-19T12:58:27.273
> 
> 标签：asp.net-mvc-3, web-config, slowcheetah

**我正在尝试做的事情**

目前，我们的解决方案中的多个项目中有重复的 WCF 配置设置。我想将 WCF 配置值存储在一个文件中，然后可以根据需要从尽可能多的项目中引用该文件。配置文件必须可转换以允许在不同环境中使用不同的值。

**我试过的**

我已经做了一些研究，其他人已经尝试过使用 SlowCheetah 和链接文件的类似方法。所以这就是我试图做的。值得注意的是，我们的解决方案包含很多项目，一些 MVC3，一些控制台应用程序和一些类库。

1.  我创建了一个 Wcf.Client.config 文件，将其添加到一个通用类库中，并使用 SlowCheetah 添加了转换
2.  我想在 MVC3 项目中引用这个文件，所以我创建了一个指向配置文件的链接
3.  在 MVC3 项目的 web.config 文件中，我添加了一个包含客户端元素的组，其中 configSource 属性设置为“Wcf.Client.config”
4.  我已将链接配置文件的“复制到输出目录”属性设置为“如果较新则复制”
5.  我还向链接文件添加了一个转换（我不确定这是否可行，但它成功链接了文件）

**问题**

我对本地和开发环境进行了转换。不幸的是，当我在开发人员配置中运行 Web 应用程序（或发布它）时，没有拾取转换。查看发布的文件，我可以看到我放置在 web 项目根目录中的链接文件已成功转换，但是，它是从 bin 文件夹中读取的，并且 bin 文件夹中的文件*没有*被转换。

**我到底在问什么？**

我真正想知道的是，我做错了什么？有没有人尝试过我上面描述的并使它起作用？或者失败了，有没有人找到另一种方法来共享转换后的配置文件？

**一些代码**

我创建了一个非常简单的[测试项目](http://tinyurl.com/bosnnkp)，希望能比我漫无边际的解释更好地解释我正在努力做的事情。随意看看。如果您构建或发布它，您将看到 MVC3 项目的 bin 文件夹中的 Wcf.Client.config 文件尚未转换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:30:30.190

[我在这个答案](https://stackoverflow.com/a/5109530/310274)中找到了合适的解决方案。

我已经完成了以下步骤：

1）我在解决方案目录中创建了配置。我叫的是`CommonSettings.config`

2）我添加了转换配置`CommonSettings.Debug.config`和`CommonSettings.Debug.config`源配置（因为微软的构建任务由于某种原因无法写入源文件）`CommonSettings.Source.config`

3）。然后在一个通用类库（所有需要的项目都引用的`CommonSettings.config`）中，我通过添加以下行来编辑项目文件：

```
<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
<UsingTask TaskName="TransformXml" AssemblyFile="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.Tasks.dll" />

<Target Name="BeforeBuild">
    <CallTarget Targets="TransformCommonSettings" />
</Target>

<Target Name="TransformCommonSettings">
    <ItemGroup>
        <ConfigsToTransform Include="..\CommonSettings.config" />
    </ItemGroup>

    <TransformXml 
        Source="@(ConfigsToTransform->'%(RelativeDir)%(Filename).Source%(Extension)')"
        Destination="%(FullPath)"
        Transform="%(RelativeDir)%(Filename).$(Configuration)%(Extension)"
        Condition="Exists('%(RelativeDir)%(Filename).$(Configuration)%(Extension)')" /> 
</Target> 
```

4）然后我将其`CommonSettings.config`作为链接添加到我的 Web 应用程序（以及一些 Windows 应用程序和测试）中。在属性窗口中，我将*Build Action*设置为*Content*并将*Copy to Output Directory*设置为*Copy always* 5) 在我的`Web.config`文件中注册该`commonSettings`部分后，我添加了以下行：

```
<commonSettings configSource="bin\CommonSettings.config" /> 
```

6) 对于测试项目和控制台/Windows 应用程序，我在 App.config 中设置了适当的值：

```
<commonSettings configSource="CommonSettings.config" /> 
```

这里没有`bin`路径，因为两者都`App.config`被`CommonSettings.config`复制到输出目录。

现在，在我选择的配置中构建后，它`CommonSettings.config`被正确转换，并且正确的版本被复制到输出目录。

好的部分是你不需要 SlowCheetah 扩展，它可以在你的构建服务器上工作，如果你包含任务 .dll 对我来说是完美的:)

一个问题是当您只运行一个项目（按 F5）时，转换将不会运行。我不得不将此构建任务添加到我的所有项目中，这使构建过程减慢了大约一秒钟，但对我来说这是可以接受的。

# ios - 通过 Storyboard 使用 UITableViewController 的 iAD

> ID：10228610
> 
> 赞同：1
> 
> 时间：2012-04-19T12:58:30.190
> 
> 标签：ios, storyboard, uitableview, iad

我在这里的第一条消息，所以我需要告诉你，我是 iOS 开发的菜鸟。对不起……

我的问题是我浏览了 Apple 教程：[我的第二个 iOS 应用程序](http://bit.ly/HSQljF)。我使用该教程构建了我的第一个非常基本的小应用程序。现在我想在 MasterViewController 下添加一个 iAd 横幅，它基于通过 Storyboard 添加的 UITaleViewController。我读到不可能将两者混合使用，我应该将我的 TableView 嵌入到 UIView 中以使其工作。

我的问题是：我如何通过故事板做到这一点，而不必从头开始重新编码我的应用程序？

我希望我的问题足够清楚，并且您可以提供帮助。

# web-services - 如何将值从一个响应传递到 Jmeter 中的另一个请求

> ID：10228615
> 
> 赞同：2
> 
> 时间：2012-04-19T12:58:34.483
> 
> 标签：web-services, rest, jmeter

我正在尝试使用 jmeter 测试 RESTfull WS，其中我想使用从一个 xml 响应到另一个 xml 请求的值。
所以任何人请帮助我，因为我是 jmeter 的新手，我该怎么做。

提前致谢。

* * *

从下面的评论中添加了预处理器的代码：

```
import org.apache.jmeter.protocol.http.sampler.WebServiceSampler;

WebServiceSampler wsSampler = (WebServiceSampler) sampler;
String SessionToken = wsSampler.getXmlData().replaceFirst("#sessionToken#", vars.get("sessionToken"));
wsSampler.setXmlData(SessionToken); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:56:27.010

尝试使用任何后处理器：[正则表达式提取器](http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor)、[XPath 提取器](http://jmeter.apache.org/usermanual/component_reference.html#XPath_Extractor)- 更适合您的情况，甚至[BeanShell PostProcessor](http://jmeter.apache.org/usermanual/component_reference.html#BeanShell_PostProcessor)是最强大的。
后处理器作为子采样器添加到采样器，您想要处理的响应会将值提取到您可以使用的变量中，而不是在下一个请求中使用。

# django - “settings.DATABASES 配置不正确”使用 django 1.4 执行 syncdb 时出错

> ID：10228618
> 
> 赞同：38
> 
> 时间：2012-04-19T12:58:40.040
> 
> 标签：django, django-models, django-admin

我创建了一个简单的 django 1.4 项目，并试图发出 syncdb 来创建（postgres）数据库模式。我收到此错误：-

```
Traceback (most recent call last):
File "manage.py", line 10, in <module>
execute_from_command_line(sys.argv)
File "/usr/local/lib/python2.6/dist-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
utility.execute()
File "/usr/local/lib/python2.6/dist-packages/django/core/management/__init__.py", line 382, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File "/usr/local/lib/python2.6/dist-packages/django/core/management/base.py", line 196, in run_from_argv
self.execute(*args, **options.__dict__)
File "/usr/local/lib/python2.6/dist-packages/django/core/management/base.py", line 232, in execute
output = self.handle(*args, **options)
File "/usr/local/lib/python2.6/dist-packages/django/core/management/base.py", line 371, in handle
return self.handle_noargs(**options)
File "/usr/local/lib/python2.6/dist-packages/django/core/management/commands/syncdb.py", line 57, in handle_noargs
cursor = connection.cursor()
File "/usr/local/lib/python2.6/dist-packages/django/db/backends/dummy/base.py", line 15, in complain
raise ImproperlyConfigured("settings.DATABASES is improperly configured. "
django.core.exceptions.ImproperlyConfigured: settings.DATABASES is improperly configured.Please supply the ENGINE value. Check settings documentation for more details. 
```

我的 settings.py 文件看起来像：-

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'test',                      # Or path to database file if using sqlite3.
        'USER': 'test',                      # Not used with sqlite3.
        'PASSWORD': 'test',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
     }
} 
```

我可以使用 psql 连接到数据库 OK - 有什么想法吗？提前致谢 ！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-19T16:10:14.107

可能是 django 没有访问您认为它使用的 settings.py 文件。尝试使用 --settings 明确地将 django 指向您的设置文件

```
./manage.py --settings=nameofproject.settings runserver/syncdb 
```

如果这可行，那么您将必须弄清楚为什么 django 导入了错误的设置文件。

你是不是不小心从 1.3 升级到 1.4 了？

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-09-30T04:05:21.553

对我来说，我刚才在 django 1.6 上遇到了类似的问题：

**背景**

Django 1.6 heroku 项目使用 Heroku Postgresql 数据库

我想直接在 postgresql 服务器上开发（所以如果你不使用 postgresql，请不要复制“.postgresql_psycopg2”位）

*   使用本地 psql db 开发没问题
*   当我取消注释使用 heroku db 的行时出现该错误

    ```
    DATABASES['default'] =  dj_database_url.config(default=os.getenv('DATABASE_URL')) 
    ```

最初的尝试是添加更多细节，例如另一行，

```
DATABASES['default']['ENGINE'] = 'django.db.backends.postgresql_psycopg2' 
```

但这不起作用，因为随后错误要求我输入 NAME，但它拒绝了。

**解决方案**

最后，这解决了它：

1.  我运行“heroku config”以查看以以下格式呈现给我的详细信息：

    ```
    postgres://user:pass@localhost/dbname 
    ```

2.  我更新了 settings.py 文件以反映这些细节：

    ```
    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.postgresql_psycopg2', 
            'NAME': 'your_heroku_db_name',                     
            'USER': 'your_heroku_db_user_name',
            'PASSWORD': 'your_heroku_password',
            'HOST': 'ec2-23-21-133-106.compute-1.amazonaws.com', # Or something like this
            'PORT': '5432',                     
        }
    } 
    ```

    该提示来自[https://stackoverflow.com/a/19719966/870121](https://stackoverflow.com/a/19719966/870121)

    注意：我的下一个计划是将这些抽象回 .env 变量，而不是让它们在 settings.py 中可见

3.  然后我注释掉了后面的行，

    ```
    # DATABASES['default'] =  dj_database_url.config(default=os.getenv('DATABASE_URL')) 
    ```

    所以 DATABASES 只在 settings.py 文件中指定了一次

    这样程序读取连接到 postgresql heroku db 所需的所有内容

    例如，现在`python manage.py syncdb`为我工作

* * *

如果您想尝试*在本地*开发，请注释掉上面的所有内容，而是设置您的本地 postgresql 服务器运行并取消注释上述本地等效项：

```
DATABASES = {
     'default': {
         'ENGINE': 'django.db.backends.postgresql_psycopg2',
         'NAME': 'cool01db',
         'USER': '', 
         'PASSWORD': '',
         'HOST': 'localhost', # '127.0.0.1' probably works also
         'PORT': '5432',
     }
 } 
```

那来自[https://stackoverflow.com/a/25962586/870121](https://stackoverflow.com/a/25962586/870121)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-27T13:01:13.660

您的项目中有两个“settings.py”文件（如果您的操作系统类似于 UNIX）：

*   一个在第一个目录中
*   一个在 dir/dir

您需要将 ENGINE 写入第二个 ( `dir/dir/setting.py`)。

祝你好运！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-16T10:30:53.573

您更新了哪个 settings.py 文件？当我没有读到 Django 从 1.3 到 1.4 的更改导致双重导入时，我最初也遇到了同样的问题。[这是https://docs.djangoproject.com/en/1.4/releases/1.4/#updated-default-project-layout-and-manage-py](https://docs.djangoproject.com/en/1.4/releases/1.4/#updated-default-project-layout-and-manage-py)的摘录 。最新版本的 Django（当前为 1.4.2）附带更新的默认项目布局和用于 startproject 管理命令的 manage.py 文件，并且默认项目布局已更改。

要修复您的错误，您应该使用的正确 settings.py 文件不是主项目目录中的文件，而是在项目目录中创建的目录中的文件（同名）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T01:29:33.740

正如以下链接中所建议的，重新安装 Django 对我有用（实际上是删除了 egg 文件）。 [https://code.djangoproject.com/ticket/18058](https://code.djangoproject.com/ticket/18058) 看来从 1.3 升级到 1.4 似乎会导致很多这样的问题。

# php - 在 wordpress 中添加自定义永久链接标签

> ID：10228619
> 
> 赞同：-1
> 
> 时间：2012-04-19T12:58:40.490
> 
> 标签：php, wordpress, permanent-generation

基本上我想要实现的是在wordpress博客的所有链接的末尾添加一个变量？ ％/％一个％

但是我创建 %a% 作为标签的努力没有成功。

我已经阅读了几天，似乎无法得到任何工作，并感谢任何人在这件事上的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:12:31.423

您应该使用会话或 cookie 来处理您的用户位置，而不是修改所有的 wordpress 链接。

编辑 ：

*   你应该使用 i18n 插件
*   或者您可以使用 javascript 轻松修改所有链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:03:50.943

尝试将您的永久链接结构设置为此

%postname%/?a=uk

**编辑**：从您的讨论来看，您似乎根本不需要修改永久链接结构，因为要链接到它的外部站点将自动包含它们。

**编辑2**：

要在页面的所有链接中自动包含该参数，您应该挂钩 get_permalink 挂钩。您不能通过更改永久链接结构来做到这一点。

# iphone - 多个.h和.m文件，多个接口定义

> ID：10228624
> 
> 赞同：1
> 
> 时间：2012-04-19T12:58:49.117
> 
> 标签：iphone, ios5, xcode4, delegation

抱歉，我对 Xcode 很陌生，但是我正在构建一个项目并且非常卡住。我正在尝试将两个以前运行良好的项目合并到一个项目中，但遇到了麻烦。最初的 .h 文件说

```
@interface ViewController : UIViewController <AVAudioRecorderDelegate> { 
```

和

```
@interface MusicViewController : UIViewController <MPMediaPickerControllerDelegate> { 
```

由于它们引用了不同的接口，如果我只是将 .h 和 .m 文件导入到一个项目中，它将无法工作，因为我只有一个 .xib 文件，我希望它们都可以使用，我不能简单地改变.h 文件中的第一行，因为我有多个接口定义，当我尝试组合这些 .h 文件时，没有正确定义。有没有办法在一个 .h 文件中使用多个委托，它们引用同一个 .xib 文件？或者任何其他方式来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:40:49.717

您可能希望使用以下内容来指代多个代表：

```
@interface ViewController:UIViewController <AVAudioRecorderDelegate, MPMediaPickerControllerDelegate> { 
```

# ios - 如何保证 XMPP 消息发送到 openfire 服务器？

> ID：10228625
> 
> 赞同：1
> 
> 时间：2012-04-19T12:58:55.533
> 
> 标签：ios, xmpp, openfire

我正在构建一个基于 XMPP 的 iOS 应用程序。当我通过 XMPPFramework 从客户端发送 XMPP 消息时，我发现代理的消息立即被调用。

```
- (void)xmppStream:(XMPPStream *)sender didSendMessage:(XMPPMessage *)message 
```

但是我的消息包含大量数据，我确信它不能发送得那么快。然后用户将应用程序置于后台，消息丢失。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:55:08.680

看起来

```
- (void)xmppStream:(XMPPStream *)sender didSendMessage:(XMPPMessage *)message; 
```

立即调用，真实，但是：

如果您的应用程序已进入后台状态，您最多可以请求 10 分钟的时间，以确保您的请求完成：

关于背景的文章：http: [//www.macworld.com/article/1164616/how_ios_multitasking_really_works.html](http://www.macworld.com/article/1164616/how_ios_multitasking_really_works.html)

苹果文档：http: [//developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

XMPPStream 有一个属性 enableBackgroundingOnSocket，您可以将其设置为 YES：

```
/**
 * If set, the kCFStreamNetworkServiceTypeVoIP flags will be set on the underlying CFRead/Write streams.
 * 
 * The default value is NO.
**/
@property (readwrite, assign) BOOL enableBackgroundingOnSocket; 
```

请注意，在使用此技巧“伪造”此处讨论的 voip 后台模式时，您可能会遇到 App Store 的问题：

[iphone XMPP App运行后台](https://stackoverflow.com/questions/5257580/iphone-xmpp-app-run-background)

# c++ - 如何摆脱“BSCMAKE：错误 BK1500：内部错误”编译错误

> ID：10228627
> 
> 赞同：11
> 
> 时间：2012-04-19T12:59:05.703
> 
> 标签：c++, visual-studio-2010

我使用 msbuild 编译**Visual Studio 2010**解决方案，并且需要成功构建且没有任何错误。

但是每次我直接使用 Visual Studio 运行 msbuild、rebuild 或清理和编译我的解决方案时，都会遇到几个类似这样的 bscmake 错误。有时在不清理的情况下再次编译时错误会消失，但运行 msbuild 两次对我来说不是一个好的解决方案。

```
[...]
10>  Generating Code...
11>  xxxxxxxx\mshtml.tlh(63588): warning BK4504: file contains too many references; ignoring further references from this source
11>  
11>BSCMAKE : error BK1500: Internal error
11>  
11>    Version 10.00.30319.01
11>  
11>    ExceptionCode            = C0000005
11>    ExceptionFlags           = 00000000
11>    ExceptionAddress         = 001343DA (00130000) "c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\bscmake.exe"
11>    NumberParameters         = 00000002
11>    ExceptionInformation[ 0] = 00000000
11>    ExceptionInformation[ 1] = 00000000
11>  
11>  CONTEXT:
11>    Eax    = 00141B30  Esp    = 003CF1C0
11>    Ebx    = 04B142C6  Ebp    = 003CF770
11>    Ecx    = 04BB621C  Esi    = 00000006
11>    Edx    = 00000000  Edi    = 00000001
11>    Eip    = 001343DA  EFlags = 00010293
11>    SegCs  = 00000023  SegDs  = 0000002B
11>    SegSs  = 0000002B  SegEs  = 0000002B
11>    SegFs  = 00000053  SegGs  = 0000002B
11>    Dr0    = 00000000  Dr3    = 00000000
11>    Dr1    = 00000000  Dr6    = 00000000
11>    Dr2    = 00000000  Dr7    = 00000000

[...] 
```

关键是我的版本不需要浏览信息，我不希望出现此错误消息。使用 Visual Studio 2008 可以隐藏此类错误，但我认为编译器参数不再可用。

**如何隐藏 bscmake 错误？**

**我可以停用 bscmake（对于发布版本）吗？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-19T13:11:36.133

根据 Hans Passants 的评论：

![在此处输入图像描述](../Images/a733af21289673a12f2454a263898b2e.png)

谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-16T16:49:07.850

造成这种情况的原因之一是在项目中使用 /clr 编译了一个 .cpp 文件，该文件具有静态库的输出。从文件中删除 /clr 或更改项目以输出 dll。

# sql - 如何从 SQL 查询中获得特定的时间戳

> ID：10228630
> 
> 赞同：0
> 
> 时间：2012-04-19T12:59:14.547
> 
> 标签：sql, oracle, timestamp, nvl

我有一个表，其中时间戳存储为`varchar`格式`20120419170525`。该列也有一些空值。

在`SELECT`查询中，我想申请`NVL(my_timestamp, to_timestamp(SYSDATE))`，如果值为 null 那么它应该以相同的格式显示当前时间戳。

我在执行查询 sql 语句之前尝试了这个语句：

```
alter session set nls_date_format = 'YYYYMMDDHH24MISS'. 
```

但没有得到想要的结果。我得到这种格式`YYYY MM DD HH24:MI:SS`

有什么解决方案或者我需要编写一个程序来支持这种格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:55:31.810

你可以这样做：

```
select nvl(my_timestamp, to_char(systimestamp, 'yyyymmddhh24miss'))
from your_table 
```

但是由于您并没有真正使用“时间戳部分”，因此您可以使用 sysdate：

```
select nvl(my_timestamp, to_char(sysdate, 'yyyymmddhh24miss'))
from your_table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:00:53.893

时间戳有单独的格式。它是`NLS_TIMESTAMP_FORMAT`。您可以像`NLS_DATE_FORMAT`为会话设置一样设置它。

# c# - 2 个 C# 应用程序之间的连接

> ID：10228633
> 
> 赞同：0
> 
> 时间：2012-04-19T12:59:23.403
> 
> 标签：c#, connection, client

我想制作双方都用 C# 制作的服务器客户端游戏。我怎样才能在这些应用程序之间建立联系？最有效的方法是什么？每 60 毫秒我会从客户端数据发送玩家做了什么动作，他的会话 ID，也许还有一些额外的数据，比如消息。客户端将发送有关地图表、玩家行动成功的数据。第二个问题：玩家登录时使用密码的算法名称是什么，但客户端会随机生成唯一的会话ID，双方将使用它而不是玩家密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:04:34.453

使用 TcpListener 和 TcpClient 类。这是一个基本示例： http: [//www.codeproject.com/Questions/304417/Problem-implementing-Csharp-Client-Server-to-keep](http://www.codeproject.com/Questions/304417/Problem-implementing-Csharp-Client-Server-to-keep)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:03:17.930

我会使用 WCF，然后您就可以使用各种客户端。您可以为 Windows 客户端使用远程处理，并且还可以构建一个 Web 界面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:45:44.680

如果您使用 C#，听起来 WCF 将是答案。您为服务器创建的 WCF 服务可以利用内置的 Sessions，它可以为您提供一个 Session Id。

我建议使用 NetTcp 绑定，因为它比任何 Http 绑定都快。您可以在以后轻松更改或添加更多绑定配置文件以支持更多类型。这样，您的游戏将很容易扩展——您甚至可以公开服务器 Web 服务以允许人们开发自己的客户端。

# excel - 将公式应用于所有行

> ID：10228634
> 
> 赞同：1
> 
> 时间：2012-04-19T12:59:27.163
> 
> 标签：excel

我知道您可以通过单击并拖动右下角来应用函数/公式，但我有一个问题。

我的功能看起来像这样

```
=IF(COUNT(H3:N3)>0;SUMPRODUCT(H2:N2;H3:N3)/SUM(H2:N2);"") 
```

我希望所有其他行看起来完全相同，除了 COUNT 和 SUMPRODUCT 的第二个参数。

所以下一行应该是这样的：

```
=IF(COUNT(H4:N4)>0;SUMPRODUCT(H2:N2;H4:N4)/SUM(H2:N2);"")
=IF(COUNT(H5:N5)>0;SUMPRODUCT(H2:N2;H5:N5)/SUM(H2:N2);"")
=IF(COUNT(H6:N6)>0;SUMPRODUCT(H2:N2;H6:N6)/SUM(H2:N2);"")
... 
```

所以我的除数保持不变，我乘以的数字也保持不变（H2：N2）。

当我拖动右上角时，我总是得到这个：

```
=IF(COUNT(H4:N4);SUMPRODUCT(H3:U3;H4:U4)/SUM(H3:U3);"") 
```

有什么方法可以在不更改每一行的每个公式的情况下做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T13:09:00.473

您必须使用以下命令冻结单元格引用`$`：

```
=IF(COUNT(H3:N3)>0;SUMPRODUCT($H$2:$N$2;H3:N3)/SUM($H$2:$N$2);"") 
```

*   `$H$2`将保留对行和列的引用，
*   `$H2`将保持对列的引用并在（垂直）拖动时重新排列行，
*   `H$2`将保持对行的引用并在（水平）拖动时重新排列列。

Microsoft 提示：您可以使用 F4 键在您的单元格引用上自动添加美元符号。

# java - 检查单词是否拼写正确

> ID：10228641
> 
> 赞同：0
> 
> 时间：2012-04-19T12:59:51.903
> 
> 标签：java, eclipse

我正在写一个打字导师，我不知道该做什么了。我有一个数据库，其中包含我的打字导师的文本。此文本显示在 JTextfield 中。在这个 TextField 下有一个属于用户的另一个 TextField。用户必须在 JTextField 中显示的文本上键入内容。

现在我的问题是我不知道如何检查用户是否正确拼写了单词并且我不知道我需要搜索什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:11:23.053

```
String st1=textField1.getText();
String st2=textField.getText();
if (st1.equals(st2)){
  System.out.println("The given string is equals");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:11:03.503

你能给出一些示例代码吗？如果你有一个正确拼写的单词数组，`words`以及用户拼写的单词，`userword`那么你可以有这样的东西：

```
for(String word:words){
   if(word.equals(userword)){
      //  word was correctly spelled
    } else if(word.startsWith(userword.substring(0,2))){
       // word was incorrectly spelled
       // tweak substring to see how many letters wrong
    } else {
       // word unknown
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:17:08.077

您需要将用户将看到的单词或文本与他们输入的内容进行比较。

比较字符串的正确方法是使用 .equals() 方法，您可能不想使用 .equalsIgnoreCase()，因为它会忽略大写字母。

就像上面其他人提到的那样，有几种比较它们的方法。我特别喜欢 zovegames 的示例，它将用户输入分解为子字符串以查看用户关闭了多少个字母，并且可以帮助您更轻松地获得准确度计数器或准确度百分比算法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T13:12:33.777

Hunspell4Eclipse 是一个 Eclipse 插件，它将 Hunspell 拼写工具集成为 Eclipse 的拼写检查服务。

该插件能够使用任何 Hunspell 词典进行拼写检查。

[http://code.google.com/p/hunspell4eclipse/](http://code.google.com/p/hunspell4eclipse/)

# javascript - javascript函数仅在ie中未定义

> ID：10228643
> 
> 赞同：4
> 
> 时间：2012-04-19T12:59:54.830
> 
> 标签：javascript, html, internet-explorer

我有一个包含 3 个 .js 文件的 site.html 页面，脚本运行，准备环境并从 .xml 文件中提取另一个 m.html 文件，并使用以下代码在屏幕上显示这个生成的 m.html 文件：

```
var dd=document.open("text/html","replace");
dd.write(htmlData);
dd.close(); 
```

site.html 看起来像这样：

```
 <html>
    <head>
     <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
     <script type="text/javascript" src="file1.js"></script>
     <script type="text/javascript" src="file2.js"></script>
     <script type="text/javascript" src="file3.js"></script>
     <link rel="stylesheet" type="text/css" href="file4.css">
    </head>
    <body>
    _
    </body>
    </html> 
```

生成的 m.html 如下所示：

```
<html>
<head>
   <meta name="viewport" content="user-scalable=no">
   <link rel="stylesheet" type="text/css" href="file4.css">
   <script type="text/javascript" src="uag.js"></script>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head> 
<body id="homebody">
<img class="background" src="a.jpg">
<div id="homebuttons">
<table>
<tr>
<td>
<a href="javascript:alert(typeof PL_open)"><img src="b.png"></a>
</td>

<td class="spacer">
</td>
<td>
<a href="javascript:PL_open('activate:a')"><img src="c.png"></a>
</td>
</tr>
<tr class="spacer">
</tr>
<tr>

<td>
<a href="javascript:PL_open('activate:b')"><img src="d.png"></a>
</td>
<td class="spacer">
</td>
<td>
<a href="javascript:PL_open('activate:c')"><img src="e.png"></a>
</td>
</tr>
</table>

</div>
</body>
</html> 
```

正确显示，但是当我按下其中一个按钮（链接）时，我收到错误消息：预期对象：JScript - 窗口脚本块，第 1 行，字符 1。

如果我按下第一个链接，我会在警报框中看到文本“未定义”。

PL_open() js 函数在 file1.js 中定义，并根据测试定义，直到 m.html 加载到屏幕上。

完全相同的代码在 chrome 和 safary 中完美运行。

谁能指出或指导我解决问题？我将不胜感激任何帮助！我的大脑已经融化了:) 非常感谢！

**编辑：**

感谢您的意见！！我在发布问题时错误地删除了引用，因此问题不是“缺少单引号”。

我做了一个测试，并在 m.html 中包含了 file1.js。在这种情况下，函数会运行，但正如预期的那样，它会进入无限循环。所以我认为 file.js 和 uag.js 都可以。如有必要，我无论如何都可以发布它们。以及关于使用 ajax ......你能解释更多吗？我想试试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:48:47.140

所以我使用 ajax 来更改文档的正文（而不是 document.open），现在它正在工作:) 谢谢 d4rkpr1nc3 的建议！我仍然不确定ie为什么无法识别该功能，但是这个解决方案很好。

# salesforce - 在 Salesforce 中将文本转换为大写

> ID：10228644
> 
> 赞同：1
> 
> 时间：2012-04-19T12:59:58.447
> 
> 标签：salesforce

我有一个自定义对象字段名称 Flight_Request_ *c.Fields.From* _c 其中 Flight_Request 是自定义对象，From__c 是文本字段

当用户从字段中输入时，它怎么可能变成大写

请帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:03:55.863

您应该能够使用工作流和字段更新将大小写更改为 UPPER

工作流程 -> 字段更新 -> 选择 obj，thien 字段。选择公式和你的公式 = UPPER() 然后激活它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:50:33.140

在 onkeyup 属性上使用 JavaScript。

```
<apex:inputtext value="{!Widget__c.Name}" onkeyup="var u=this.value.toUpperCase();if(this.value!=u){this.value=u;}" /> 
```

如果包含接受文本的 Visualforce 字段，这将适用于[`<apex:inputfield>`](http://www.salesforce.com/us/developer/docs/pages/Content/pages_compref_inputField.htm)组件以及。[`<apex:inputtext>`](http://www.salesforce.com/us/developer/docs/pages/Content/pages_compref_inputText.htm)`inputfield`

# asp.net - 在数据行函数中包装代码

> ID：10228654
> 
> 赞同：0
> 
> 时间：2012-04-19T13:00:31.410
> 
> 标签：asp.net, .net, vb.net

我有以下代码将值分配给数据行并添加到数据表中。我想编写一个返回数据行的函数，它使我能够编写更少的代码。请检查下面的代码并给我任何建议

```
 objRow = dtTODO.NewRow
            objRow.Item("Item") = "Test"
            objRow.Item("Message") = "Test"
            objRow.Item("ButtonText") = "Add"
            dtTODO.Rows.Add(objRow)

            objRow = dtTODO.NewRow
            objRow.Item("Item") = "Test2"
            objRow.Item("Message") = "Test2"
            objRow.Item("ButtonText") = "Add"
            dtTODO.Rows.Add(objRow) 
```

假设我正在添加上述记录。我想创建一个返回数据行的函数，

```
Public Function ItemRow(ByVal strItem As String, ByVal strMessage As String, ByVal strButtonText As String, ByVal strUrl As String) As DataRow

End Function 
```

并将其添加为，

dtTODO.Rows.Add(ItemRow(item, msg,bttext,url))

希望我不会混淆太多:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:13:11.303

您的函数签名似乎还可以您还必须将 dtTODO.Newrow 引用传递给该函数。

尝试这个：

```
AddRow("a", "b", "c", dtTODO);
AddRow("a", "b", "c", dtTODO);

void AddRow(string str1, string str2, string str3, DataTable dt)
{
        DataRow objRow = dtTODO.NewRow();
        objRow["Item"] = str1;
        objRow["Message"] = str2;
        objRow["ButtonText"] = str3;
        dt.Rows.Add(objRow);
} 
```

您也可以获得更好的代码。

请把上面的代码转换成VB

# python - Python 冒号运算符

> ID：10228655
> 
> 赞同：3
> 
> 时间：2012-04-19T07:03:18.837
> 
> 标签：python

我正在尝试移植一些 Python 代码，但我对一些小问题有点迷茫，我希望得到一些建议。

我了解操作员，但我对操作员在此示例中的操作`in`有点不清楚。`:`

```
if foo in bar[i][:2]:
    # do something 
```

在[http://docs.python.org/tutorial/introduction.html#strings](http://docs.python.org/tutorial/introduction.html#strings)中，它声明`:`运算符仅在这是一个字符串时才生成前两个字符。但是，当与这样的列表一起使用时，还会发生什么？那么这是否仅表示 th 中字符串的前 2 个字符

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T07:55:43.487

这称为列表切片，您已经链接到问题中文档的正确部分。如果您发现文档令人困惑，有一个视频教程：

[http://www.youtube.com/watch?v=iD6a0G8MnjA](http://www.youtube.com/watch?v=iD6a0G8MnjA)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T07:10:49.813

运算符的行为不依赖于其操作数的来源——无论它是文字、变量还是复杂表达式都无关紧要。运算符做它的事情是因为它的操作数是一个字符串，而不是因为它是以特定方式计算的。

# java - JUnit：如何提供公开我的所有方法以便进行测试

> ID：10228658
> 
> 赞同：1
> 
> 时间：2012-04-19T13:00:34.453
> 
> 标签：java, unit-testing, junit, mocking

我开始在我的项目中使用 JUnit 和 Mockito，我很快注意到我最终将我的私有方法转换为公共方法以便从测试类中访问，这是一个糟糕的解决方案。

有时只测试公共方法就足够了，但有时我也想真正测试一些内部方法。有解决方法吗？例如，允许 JUnit 将私有方法模拟为公共或类似的特殊注释？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T13:04:54.897

需要直接测试私有方法是一种设计味道。在一个设计良好的类中，所有功能都可以通过其公共接口访问、合理并因此可以测试。

缺少这个通常意味着你的类太大太复杂，试图同时处理多个职责。最好的解决方案是重构：将一些功能提取到一个单独的类中，在那里它可以公开可用，因此可以直接进行单元测试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T13:02:41.940

您的公共方法必须调用您的私有方法。因此，您可以通过创建公共方法的测试功能来测试您的私有方法。

如果你还想通过 Junits 测试私有函数，你可以使用 `reflection`.

您必须设置方法的属性`setAccessible==true.`

例子：

```
 public void testisvalid() throws Exception 
    {
        MyHandler handler = new MyHandler();
        Method privateStringMethod = MyHandler.class.getDeclaredMethod("isvalid", Long.class);
        privateStringMethod.setAccessible(true);
        String =  (String) privateStringMethod.invoke(handler, 852l );
        assertNotNull(s);
    } 
```

在中，`getDeclaredMethod`您必须按顺序给出方法的名称`private`，以及`arguments`您在函数**中传递的类型。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-19T13:05:33.110

要问的第一个问题是：这些私有方法是否可以成为附加帮助类的公共接口的一部分。在这种情况下，您可以测试这个助手类，并在原始类中注入一个模拟助手。

如果不可能，则使这些私有方法受到保护，记录它们受保护的事实只是为了进行测试，并且不应被子类调用或覆盖，并将测试类与该类放在同一个包中正在测试能够访问这个受保护的方法。

在这种情况下，我使用`@VisibleForTesting`Guava 提供的注释。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T13:06:10.627

我的 Maven 构建基础架构为测试源提供了一个单独的目录，但具有相同的包结构。因此，如果方法不是公共的但可以通过包访问就足够了。

# cakephp - 一种多输入形式

> ID：10228661
> 
> 赞同：1
> 
> 时间：2012-04-19T13:01:03.970
> 
> 标签：cakephp, cakephp-2.1

我的视图中有以下表格：

```
echo $this->Form->create('Listing',array('type' => 'file'));
echo $this->Form->select('',array('0'=>'Τα καλύτερα','1'=>'Οι καλύτεροι','2'=>'Οι καλύτερες'));
echo $this->Form->input('title');
for ($i = 0; $i < 5; $i++) {
    echo $this->Form->input('Item.content.'.($i+1),array('label'=>'Προσθήκη αντικιμένου'));
}
echo $this->Form->input('picture', array('type' => 'file','label'=>'Φωτογραφία:'));
echo $this->Form->input('description', array('rows' => '4','label'=>'Περιγραφή:'));
echo $this->Form->end('Αποθήκευση Λίστας'); 
```

控制器具有以下代码：

```
public function add() {

        if ($this->request->is('post')) {

            if ($this->Listing->Save($this->request->data)) {

                $this->request->data['Item']['listing_id'] = $this->Listing->id;
                $this->Listing->Item->save($this->request->data);   
                $this->Session->setFlash('Η λίστα αποθηκεύτηκε');   
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash('Αδύνατη η αποθήκευση της λίστας.');
            }
        }   
} 
```

`input`如果我在表单中有一个内容，上面的控制器就可以工作，但是如果我`for`在视图中使用多个循环，`input`它就不起作用了。如何将多个内容保存`input`在关联表中？我试过了`saveMany()`，但没有任何效果`saveAssociated()`，`saveAll()`显然我做错了什么。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:18:08.583

```
for ($i = 0; $i < 5; $i++) {
    echo $this->Form->input('Item.content.'.($i+1),array('name' => 'data[Item][content][]', 'label'=>'Προσθήκη αντικιμένου'));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:17:37.147

将您的 for 语句更改为：

```
for ($i = 0; $i < 5; $i++) {
    echo $this->Form->input('Item.'. $i+1 .'.content', array('label'=>'Προσθήκη αντικιμένου'));
} 
```

# .net - NUnit 和与 Jenkins 的持续集成：需要哪些 NUnit 文件？

> ID：10228670
> 
> 赞同：2
> 
> 时间：2012-04-19T13:01:23.250
> 
> 标签：.net, msbuild, continuous-integration, hudson, jenkins

目前我正在尝试在 Jenkins 上设置自动测试。我有一个包含 4 个不同项目的 Visual Studio 解决方案，其中一个是我的 NUnit 测试项目，另外 3 个项目有几个测试。

**1** 我在 Visual Studio 中的 Nunit 测试项目中添加了一个 PostBuild-Event，其内容如下：

```
`$(SolutionDir)Libs\NUnit-2.6.0.12051\bin\nunit-console.exe $(TargetPath)` 
```

它工作正常，但这是典型的方式吗？测试项目是我构建顺序中的最后一个项目，我认为将 PostBuild 事件添加到其他 3 个项目没有意义吗？

* * *

**2** 正如您在上面给出的路径中看到的，我的 Visual Studio 项目文件夹有一个名为“Libs”的文件夹。这是我放置依赖项的地方，也是 NUnit。但是 NUnit 文件夹大约有 8MB。你能告诉我我可以删除哪些文件吗？因为否则在每次提交源代码控制时，用户只需要为 NUnit 传输 8MB，我认为这有点多。

我绝对需要 nunit.framework.dll 来构建测试。我还需要 console-runner.exe 来运行测试。但我还需要什么？不幸的是，console-runnter.exe 依赖于其他一些文件，没有它们就会崩溃。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:22:34.030

我一直在使用稍微不同的方法将 NUnit 与 Jenkins 下的 Visual Studio（C#、MSBuild）集成。VS 解决方案在其下包含几个项目，这些项目构建了大约 10 个 DLL 和 1 个应用程序。Visual Studio 解决方案不调用 NUnit。

与“应用程序”代码并排的是一个包含测试代码的目录。有一个独立构建的测试解决方案。它引用了应用程序解决方案的输出。

Visual Studio 和 NUnit 都作为应用程序安装在运行 Jenkins 的构建机器上。

我们的基本目录布局

*   成分
    *   bin（已创建）
    *   各种源目录
    *   组件.sln
*   测试
    *   bin（已创建）
    *   各种 NUnit 测试用例源
    *   测试.sln

Jenkins 的基本构建步骤

1.  使用 MSBuild 步骤，MSBuild Components/Components.sln
2.  使用 MSBuild 步骤，MSBuild Test/Test.sln
3.  使用 Windows 批处理文件步骤，在 Tests/Tests.sln 上调用 NUnit：

    `nunit-console.exe Tests\Tests.sln /xml=nunit-test-results.xml /labels`

4.  使用 xUnit Jenkins 插件设置构建后操作以处理`nunit-test-results.xml`和显示结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:13:24.620

To answer your 2 questions:

1.  I use a post build event on my Test project to run the NUnit console in the same way as you've described. Works well in our environment.

2.  As you've said you need to include `nunit.framework.dll` to **build** your tests. To **run** them, the NUnit console will run quite happily with just the following files:

    ```
    bin\nunit-console.exe
    bin\nunit-console.exe.config
    bin\lib\nunit.core.dll
    bin\lib\nunit.core.interfaces.dll
    bin\lib\nunit.util.dll
    bin\lib\nunit-console-runner.dll 
    ```

    This amounts to about 500KB of files for NUnit 2.6.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-02T05:07:27.933

我建议编写一个脚本文件，而不是在 Jenkins 中定义多个步骤。我们使用 powershell 来调用 msbuild 和 nunit-console。这样，我们的开发人员可以在提交之前简单地调用这个 powershell 脚本。如果构建/测试/捆绑/部署步骤是独立的，那么设置 Jenkins（或任何其他构建服务器）也容易得多。

# c++ - 单例实现和对 ::GetInstance 的未定义引用

> ID：10228680
> 
> 赞同：1
> 
> 时间：2012-04-19T13:02:15.013
> 
> 标签：c++, design-patterns, linker

我正在尝试实现我在书中找到的单例设计模式，我知道我可能不需要在这里使用单例，但除此之外我已经创建了一个 GamePropertiesManager 并且我得到了以下编译（或者更确切地说，链接器？）错误：`Main.cpp|| undefined reference to GamePropertiesManager::GetInstance`

我正在尝试在我的主要功能中使用我的单例，就像这样..

```
#include "GamePropertiesManager.hpp"

..

int main()
{
      GamePropertiesManager::Create();
      GamePropertiesManager::GetInstance()->test();
...
} 
```

我的 GamePropertiesManager 在头文件中定义如下：

```
class GamePropertiesManager
{
   public:
      static GamePropertiesManager* GetInstance();
      static void Create();
      static void Destroy();

      void test();

   protected:
      GamePropertiesManager();
      static GamePropertiesManager* _instance;

      enum GameMode{ PLAYERVSPLAYER, PLAYERVSCOM };
      GameMode _gameMode;
      std::string _player1Name, _player2Name;
      int _player1Score, _player2Score;
      std::string _matchSurvivor;
      int _gameSpeed;

}; 
```

并在单独的 cpp 文件中声明：

```
#include "GamePropertiesManager.hpp"
//testic
#include <iostream>

GamePropertiesManager* GamePropertiesManager::_instance = NULL;

void GamePropertiesManager::Create()
{
   if (!_instance) //instance not yet created
      _instance = new GamePropertiesManager();
}

void GamePropertiesManager::Destroy()
{
   delete _instance;
   _instance = 0;
}

GamePropertiesManager::GamePropertiesManager() :
   _gameMode(PLAYERVSCOM), _player1Name("Player 1"), _player2Name("Player 2"),
      _player1Score(0), _player2Score(0), _matchSurvivor("NONE"), _gameSpeed(1)
{

}

void GamePropertiesManager::test()
{
   std::cout << "test success!" << std::endl;
} 
```

如果有人可以查看它并解释我做错了什么，我将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:08:20.480

你已经声明了一个函数`static GamePropertiesManager* GetInstance();`但没有定义它。实际上，您`GamePropertiesManager::Create()`正在完成大部分工作。如果我是你，我会摆脱它并替换为：

```
GamePropertiesManager* GamePropertiesManager::GetInstance()
{
    if (!_instance) //instance not yet created
        _instance = new GamePropertiesManager();

    return _instance;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:05:01.080

正是它在锡上说的。您已经声明了该`GetInstance`函数并试图调用它，但您实际上并未定义该函数的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T13:05:14.483

我看到了 GetInstance() 的声明，但没有看到定义。也许你只是忘记写了？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T13:07:26.947

您忘记定义 GetInstance()！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T13:22:33.327

您必须实现静态函数 GetInstance()。

我会摆脱 _instance 并这样做：

```
GamePropertiesManager* GamePropertiesManager::GetInstance()
{
    static GamePropertiesManager manager;
    return &manager;
} 
```

# java - 如何在Java中更改哈希图中列表中值的位置

> ID：10228682
> 
> 赞同：0
> 
> 时间：2012-04-19T13:02:16.247
> 
> 标签：java, arraylist, hashmap

很抱歉问了另一个非常明显的问题 - 我正在努力解决哈希图..

我想要做的是更改值存储在存储在哈希图中的列表中的顺序，并且我不想使用迭代器。

例如，一所学校有一个课程列表，每门课程都有一个学生列表。那里的大厅监控工作是随机挑选的课程名单上的第一个学生。选择一门课程后，列表顶部的学生将被放在他们所属的所有课程的列表底部。有 9 门课程，一个学生可以出现在多个学生列表中。

我正在尝试按照以下方式做一些事情：

```
//instance variable
private HashMap<String, String[]> qualifiedStudents;
    qualifiedStudents = new HashMap<String, List<String>>();

  public void putStudentLastInRosters(String studentName)
  {
   for(String course : qualifiedStudents.keySet())
   {
      if(qualifiedStudents.get(course).contains(studentName)) 
    {
       qualifiedStudents.remove(course, studentName); 
       qualifiedStudents.put(course, studentName);
    }
  }

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:17:14.187

试试这个：

```
//instance variable
private HashMap<String, List[]> qualifiedStudents;
    qualifiedStudents = new HashMap<String, List<String>>();

public String putStudentLastInRosters(String studentName) {
    for(String course : qualifiedStudents.keySet()) {
        List<String> students = qualifiedStudents.get(course);
        if(students.remove(studentName)) {
            students.add(studentName);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:17:46.577

您需要修改列表，而不是地图。所以代码应该是：

```
for (List<String> list : qualifiedStudents.values()) {
    if (list.remove(studentName)) {
        list.add(studentName);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:17:13.927

为此任务考虑[SortedMap 。](http://docs.oracle.com/javase/7/docs/api/java/util/SortedMap.html)

实现您自己的比较器以反映您要使用的排序顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T13:18:09.967

如果我理解正确，您只想在每门课程的每个列表中重新排序学生。

```
 for(List<String> studentsInCourse : qualifiedStudents.values()) {
        if (studentsInCourse.remove(studentName)) {
            studentsInCourse.add(0, studentName);
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T13:18:56.130

现在，当 HashMap 的值类型是 String 数组时，您似乎正在尝试从 HashMap 中删除和放入 String 对象。

你在哪里：

```
 qualifiedStudents.remove(course, studentName); 
   qualifiedStudents.put(course, studentName); 
```

您想要获取对 String 数组的引用（我相信“课程”）并在其中移动 studentName 字符串。就像barsju所说，使用ArrayList可能比使用String数组更容易。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T13:22:49.833

以下将返回班级中学生的 ArrayList，并允许您执行删除和添加操作。我们只需要删除 studentsName 并读取它。在链表中，这会将其添加到 ArrayList 的末尾。

```
qualifiedStudents.get(course) 
```

我重新声明了你的 HashMap。

```
 //instance variable
private HashMap<String, ArrayList<String>> qualifiedStudents = new HashMap<String, ArrayList<String>>();

  public void putStudentLastInRosters(String studentName)
  {
   for(String course : qualifiedStudents.keySet())
   {
      if(qualifiedStudents.get(course).contains(studentName)) 
    {
       qualifiedStudents.get(course).remove(studentName); 
       qualifiedStudents.get(course).add(studentName);
    }
  }

  } 
```

# c# - Client Generated 未向第三方提供有关 knowntype 的信息

> ID：10228683
> 
> 赞同：3
> 
> 时间：2012-04-19T13:02:18.897
> 
> 标签：c#, .net, wcf, inheritance, known-types

我的服务有一些关于 KnownType 和继承的问题。我已经阅读了几乎所有类似的问题，但我仍然没有找到解决方案。我将尝试解释：

这是我的界面：

```
[ServiceContract(Namespace = "MyNameSpace.Components.Web")]    
public interface ITransactionsService
{
    [OperationContract(Name = "Put")]        
    void Put(WebTransactionItem wtransactionItem);
} 
```

这是我的数据合同：

```
[DataContract(Namespace = "MyNameSpace.Components.Web")]
public class WebTransactionItem
{        
    [DataMember]
    public TransactionItem items { get; set; }

    [DataMember]        
    public TransactionItem[] TransactionItemList { get; set; }        
} 
```

*TransactionItem*是（另一个）程序集中提供的抽象类。
客户端项目中使用了相同的程序集，因此我在客户端和服务器中引用了相同的类型。
在客户端，经过一些操作（读取文件等），我有一个继承自*TransactionItem*的对象数组，说：

```
transItems[0] => TransactionHeaderObject
transItems[1] => TransactionTrailerObject 
```

在我添加的 Service Web.config

```
<dataContractSerializer>
  <declaredTypes>        
    <add type="Namespace.TransactionItem, Assemblyname, Version=1.4.1.2, Culture=neutral, PublicKeyToken=null">
      <knownType type="Namespace.TransactionHeader, Assemblyname, Version=1.4.1.2, Culture=neutral, PublicKeyToken=null"/>
      <knownType type="Namespace.TransactionTrailer, Assemblyname, Version=1.4.1.2, Culture=neutral, PublicKeyToken=null"/>
    </add>
  </declaredTypes>
</dataContractSerializer> 
```

当然，我可以在 [Datacontract] 装饰器上使用*KnownTypeAttribute 。*

如果在*配置服务参考*（在客户端项目服务参考中）我检查（默认情况下检查）*引用程序集中的重用类型*标志，我可以在我的代码中编写：

```
MyNameSpace.Components.Web.WebTransactionItem wtItem = 
   new MyNameSpace.Components.Web.WebTransactionItem(){ 
       TransactionItemList = transItems} 
```

我可以毫无问题地调用服务。那么问题是什么？
问题是，如果我删除

```
[DataMember]
public TransactionItem items { get; set; } 
```

来自 DataContract 的属性（我不希望客户端使用抽象类）服务进入异常：

*尝试序列化参数 MyNameSpace.Components.Web:wtransactionItem 时出错。内部异常消息：类型 'Assemblyname.TransactionHeader' 合同名称为 'TransactionHeader:http://schemas.datacontract.org/2004/07/Assemblyname' 不是预期的。*

现在，据我所知，当我没有在服务中指定类型*TransactionHeader*（继承 TransactionItem）时会发生这种情况，但我指定了（参见 Web.Config 服务的文件，我也尝试过使用 knowntypeAttribute）！ ！
我还注意到，在客户端项目中自动生成的*Reference.cs*类中，在第一种情况下（当我离开

```
[DataMember]
public TransactionItem items { get; set; } 
```

财产）

被编码：

```
[KnownTypeAttribute(typeof(Assemblyname.TransactionHeader))]

[KnownTypeAttribute(typeof(Assemblyname.TransactionTrailer))] 
```

在生成的部分类之上。这允许对继承的类进行序列化，但是如果我删除服务中的属性，则部分类（在 Reference.cs 中）不再具有它，这就是服务抛出该异常的原因。就像它错过了对抽象类*TransactionItem*的引用，即使我已经在 Web.config 文件中指定了它（也通过 KnownTypeAttribute。）。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:45:34.923

您是否尝试过“ServiceKnownTypeAttribute”？
要序列化或反序列化一个类型，WCF 需要通过此属性或通过服务协定本身了解具体的基类。
当您的服务合同中有一个接口（或者可能还有一个抽象类）时，序列化程序在仅使用 KnownTypeAttribute 时会遗漏一些东西。
当您想从另一个程序集中注册类型时，您可能必须提供一个返回已知类型列表的方法并注册此方法：

```
 [ServiceKnownType("GetKnownTypes", typeof(Helper))] 
```

请参阅[http://msdn.microsoft.com/en-us/library/system.servicemodel.serviceknowntypeattribute.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.serviceknowntypeattribute.aspx)。

# wpf - 如何将 CommandParameter 绑定到 x：DataTemplate 中父控件的名称？

> ID：10228686
> 
> 赞同：1
> 
> 时间：2012-04-19T13:02:32.033
> 
> 标签：wpf, binding, datatemplate

我的视图 XAML 中有以下内容

```
<GroupBox Grid.Row="0" Header="Aktionen bei Prüfung Aufbau">
    <ContentControl Content="{Binding BuildUpActions}" ContentTemplate="{StaticResource FullActionListTemplate}" x:Name="BuildUp"/>
</GroupBox>

<GroupBox Grid.Row="1" Header="Aktionen bei Prüfung Abbau">
    <ContentControl Content="{Binding TearDownActions}" ContentTemplate="{StaticResource FullActionListTemplate}" x:Name="TearDown"/>
</GroupBox> 
```

DataTemplate 在单独的资源中定义

```
<DataTemplate x:Key="FullActionListTemplate">
    <DockPanel LastChildFill="True">
        <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Neuer Ausgang" Style="{StaticResource ButtonRowStyle}"
                    Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TabControl}}, Path=DataContext.NewFullIOCommand}" 
                    CommandParameter="{Binding **?HOW?**}"
                    />
            <more buttons here...>
        </StackPanel>
        <ContentControl Content="{Binding}" >

        </ContentControl>
    </DockPanel>
</DataTemplate> 
```

该命令在 ViewModel 中定义

```
 public ICommand NewFullIOCommand
    {
        get
        {
            if (this._newFullIOCommand == null)
            {
                this._newFullIOCommand = new Mvvm.RelayCommand(parm => DoNewFullIO(parm));
            } return this._newFullIOCommand;
        }
    } 
```

我希望能够确定 2 个列表中的哪一个生成了命令。我希望将 CommandParameter 传递给包含控件的 x:Name 的命令处理程序。

如何定义绑定？有没有更好的办法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T02:32:39.307

我查看了您的示例并对读取 CommandParameter 的行进行了快速编辑。完成此更改后，我在 Snoop（WPF 运行时调试器）中检查了这一点，并看到 CommandParameter 设置为您描述为要应用的所需值。

首先，您可以在此处获取 Snoop：

[窥探](http://snoopwpf.codeplex.com)

通过简单地执行以下操作，我能够将 CommandParameter 设置为封闭 ContentControl 的名称：

```
<DataTemplate x:Key="FullActionListTemplate">
        <DockPanel LastChildFill="True">
            <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Neuer Ausgang"
                Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TabControl}}, Path=DataContext.NewFullIOCommand}" 
                CommandParameter="{Binding Path=Name, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContentControl}}}"
                />
            </StackPanel>
            <ContentControl Content="{Binding}" >

            </ContentControl>
        </DockPanel>
    </DataTemplate> 
```

作为旁注，您的示例在上面的行中几乎包含类似的技术，您可以在其中绑定到 Command 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-13T09:13:53.180

**创建自引用属性**

我讨厌 WPF。但是，我只是这样做了：将此属性添加到绑定的数据模型类中：

```
public class MyDataObjectItem
{
    //...
    public MyDataObjectItem Self { get { return this; } }
    //...
} 
```

那么命令参数就很简单了：

```
CommandParameter="{Binding Self}" 
```

**或者，显然这有效**

```
CommandParameter="{Binding}" 
```

见[https://stackoverflow.com/a/11287478/887092](https://stackoverflow.com/a/11287478/887092)

# c# - 使用 C# 发送邮件

> ID：10228687
> 
> 赞同：1
> 
> 时间：2012-04-19T13:02:32.220
> 
> 标签：c#, .net, email

尽管 Stackoverflow 上有关于此的所有主题。我无法找到这个问题的解决方案：

我有这个例外：

> SMTP 服务器需要安全连接或客户端未通过身份验证。来自服务器的回复是：5.5.1 Authentication Required。了解更多信息

使用此代码：

```
 var fromAddress = new MailAddress(user.Email, "From Name");
    var toAddress = new MailAddress("myadress@gmail.com", "To Name");
    const string fromPassword = "fromPassword";
    const string subject = "Subject";
    const string body = "Body";

    var smtp = new SmtpClient
    {
        Host = "smtp.gmail.com",
        Port = 587,
        EnableSsl = true,
        DeliveryMethod = SmtpDeliveryMethod.Network,
        UseDefaultCredentials = false,
        Credentials = new NetworkCredential(fromAddress.Address, fromPassword),
        Timeout = 20000
    };
    using (var message = new MailMessage(fromAddress, toAddress)
    {
        Subject = subject,
        Body = body
    })
    {
        smtp.Send(message);
    } 
```

请问我错过了什么？感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T07:46:20.357

这段代码对我有用

```
 SmtpClient sc = new SmtpClient("smtp.gmail.com");
  NetworkCredential nc = new NetworkCredential("username","password");
  //username doesn't include @gmail.com         
   sc.UseDefaultCredentials = false;
   sc.Credentials = nc;
   sc.EnableSsl = true;
   sc.Port = 587;
     try
      {
       sc.Send(mm);
      } 
     catch (Exception ex)
      {
        EventLog.WriteEntry("Error Sending", EventLogEntryType.Error);
      } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:45:29.453

你没有错过任何东西。我怀疑你的密码错误。您没有忘记将其从“fromPassword”更改为真正应该的，对吗？

[这是相同任务的更简洁的实现](https://stackoverflow.com/questions/704636/sending-email-through-gmail-smtp-server-with-c-sharp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-13T09:41:48.827

Either you have typed your password incorrectly or (more likely) you are trying to use your normal password after you have enabled Google's [2-Step Authentication](http://support.google.com/accounts/bin/answer.py?hl=en&answer=180744&topic=1099588&ctx=topic)

You need to generate and use an [application specific password](http://support.google.com/accounts/bin/answer.py?hl=en&answer=185833)

# c# - 从服务器保存 html 文件

> ID：10228688
> 
> 赞同：1
> 
> 时间：2012-04-19T13:02:39.397
> 
> 标签：c#, asp.net

```
public void SaveSofaXML(object s, EventArgs e)
{
    HttpResponse response = HttpContext.Current.Response;

    StreamReader streamReader = new StreamReader(
        Server.MapPath("~/SentinelOperationsUI/SoFaXML.html"));
    string text = streamReader.ReadToEnd();
    streamReader.Close();

    response.StatusCode = 200;
    response.ContentEncoding = Encoding.UTF32;
    response.AddHeader("content-disposition", "attachment; filename=test.html");
    response.AddHeader("Content-Transfer-Encoding", "binary");
    response.AddHeader("Content-Length", 
        response.ContentEncoding.GetByteCount(text).ToString());
    response.ContentType = "application-download";
} 
```

我认为我在正确的轨道上。但是当我尝试保存 html 文件（~100kb）时，文件永远不会完成下载。我错过了一些必需的标题吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T13:08:54.173

试试这个：

```
 Response.AppendHeader("content-disposition", "attachment; filename=test.html");
 Response.TransmitFile(Server.MapPath("~/SentinelOperationsUI/SoFaXML.html"));
 Response.End(); 
```

# algorithm - Ray - 八叉树相交算法

> ID：10228690
> 
> 赞同：23
> 
> 时间：2012-04-19T13:02:42.080
> 
> 标签：algorithm, graphics, traversal, voxel, octree

我正在寻找一种好的光线八叉树交集算法，它可以让我以迭代的方式获得光线穿过的叶子。我计划在 CPU 上实现它，因为我还不想深入研究 CUDA :)

目前，我的 Voxel raycaster 只是在 XxYxZ 体素的非分层阵列上执行 3D DDA（Amanatides/Woo 版本）。您可以想象，当有很多空白空间时，这会非常昂贵，如下图所示（更亮的红色 = 更多工作 :)）：

![哑 3D DDA 的工作量 - 红色 = 更多工作](../Images/b37f7c3976259aaceb4f4343e0232163.png)

我已经发现这个任务有两种算法：**bottom-up**，从叶子向上工作，**top-down**，基本上是深度优先搜索。

我已经找到了 Revelles 从 2000 年开始的算法，称为*[An Effective parametric algorithm for octree traversal](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.29.987)*，看起来很有趣，但已经很老了。这是一种自上而下的算法。

最流行的自下而上方法似乎是*K. Sung，A DDA Octtree Traversal Algorithm for Ray Tracing，Eurographics'91，North Holland-Elsevier，ISBN 0444 89096 3，p。73-85。*问题是大多数 DDA 八叉树遍历算法都期望八叉树具有相同的深度，这是我不想要的 - 空子树应该只是一个空指针或类似的东西。

在最近关于稀疏体素八叉树的文献中，我设法通读了（最值得注意的是[莱恩关于 SVO 的工作](http://code.google.com/p/efficient-sparse-voxel-octrees/)，它们似乎都基于某种 GPU 实现的 DDA 版本（Amanatides/Woo 风格）。

现在，这是我的问题：有没有人有实现基本的、简洁的光线八叉树相交算法的经验？你会推荐什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T11:48:24.050

作为记录，这是我最终使用的 Revelles 论文的实现：

```
#include "octree_traversal.h"

using namespace std;

unsigned char a; // because an unsigned char is 8 bits

int first_node(double tx0, double ty0, double tz0, double txm, double tym, double tzm){
unsigned char answer = 0;   // initialize to 00000000
// select the entry plane and set bits
if(tx0 > ty0){
    if(tx0 > tz0){ // PLANE YZ
        if(tym < tx0) answer|=2;    // set bit at position 1
        if(tzm < tx0) answer|=1;    // set bit at position 0
        return (int) answer;
    }
}
else {
    if(ty0 > tz0){ // PLANE XZ
        if(txm < ty0) answer|=4;    // set bit at position 2
        if(tzm < ty0) answer|=1;    // set bit at position 0
        return (int) answer;
    }
}
// PLANE XY
if(txm < tz0) answer|=4;    // set bit at position 2
if(tym < tz0) answer|=2;    // set bit at position 1
return (int) answer;
}

int new_node(double txm, int x, double tym, int y, double tzm, int z){
if(txm < tym){
    if(txm < tzm){return x;}  // YZ plane
}
else{
    if(tym < tzm){return y;} // XZ plane
}
return z; // XY plane;
}

void proc_subtree (double tx0, double ty0, double tz0, double tx1, double ty1, double tz1, Node* node){
float txm, tym, tzm;
int currNode;

if(tx1 < 0 || ty1 < 0 || tz1 < 0) return;
if(node->terminal){
    cout << "Reached leaf node " << node->debug_ID << endl;
    return;
}
else{ cout << "Reached node " << node->debug_ID << endl;}

txm = 0.5*(tx0 + tx1);
tym = 0.5*(ty0 + ty1);
tzm = 0.5*(tz0 + tz1);

currNode = first_node(tx0,ty0,tz0,txm,tym,tzm);
do{
    switch (currNode)
    {
    case 0: { 
        proc_subtree(tx0,ty0,tz0,txm,tym,tzm,node->children[a]);
        currNode = new_node(txm,4,tym,2,tzm,1);
        break;}
    case 1: { 
        proc_subtree(tx0,ty0,tzm,txm,tym,tz1,node->children[1^a]);
        currNode = new_node(txm,5,tym,3,tz1,8);
        break;}
    case 2: { 
        proc_subtree(tx0,tym,tz0,txm,ty1,tzm,node->children[2^a]);
        currNode = new_node(txm,6,ty1,8,tzm,3);
        break;}
    case 3: { 
        proc_subtree(tx0,tym,tzm,txm,ty1,tz1,node->children[3^a]);
        currNode = new_node(txm,7,ty1,8,tz1,8);
        break;}
    case 4: { 
        proc_subtree(txm,ty0,tz0,tx1,tym,tzm,node->children[4^a]);
        currNode = new_node(tx1,8,tym,6,tzm,5);
        break;}
    case 5: { 
        proc_subtree(txm,ty0,tzm,tx1,tym,tz1,node->children[5^a]);
        currNode = new_node(tx1,8,tym,7,tz1,8);
        break;}
    case 6: { 
        proc_subtree(txm,tym,tz0,tx1,ty1,tzm,node->children[6^a]);
        currNode = new_node(tx1,8,ty1,8,tzm,7);
        break;}
    case 7: { 
        proc_subtree(txm,tym,tzm,tx1,ty1,tz1,node->children[7^a]);
        currNode = 8;
        break;}
    }
} while (currNode<8);
}

void ray_octree_traversal(Octree* octree, Ray ray){
a = 0;

// fixes for rays with negative direction
if(ray.direction[0] < 0){
    ray.origin[0] = octree->center[0] * 2 - ray.origin[0];//camera origin fix
    ray.direction[0] = - ray.direction[0];
    a |= 4 ; //bitwise OR (latest bits are XYZ)
}
if(ray.direction[1] < 0){
    ray.origin[1] = octree->center[1] * 2 - ray.origin[1];
    ray.direction[1] = - ray.direction[1];
    a |= 2 ; 
}
if(ray.direction[2] < 0){
    ray.origin[2] = octree->center[2] * 2 - ray.origin[2];
    ray.direction[2] = - ray.direction[2];
    a |= 1 ; 
}

double divx = 1 / ray.direction[0]; // IEEE stability fix
double divy = 1 / ray.direction[1];
double divz = 1 / ray.direction[2];

double tx0 = (octree->min[0] - ray.origin[0]) * divx;
double tx1 = (octree->max[0] - ray.origin[0]) * divx;
double ty0 = (octree->min[1] - ray.origin[1]) * divy;
double ty1 = (octree->max[1] - ray.origin[1]) * divy;
double tz0 = (octree->min[2] - ray.origin[2]) * divz;
double tz1 = (octree->max[2] - ray.origin[2]) * divz;

if( max(max(tx0,ty0),tz0) < min(min(tx1,ty1),tz1) ){
    proc_subtree(tx0,ty0,tz0,tx1,ty1,tz1,octree->root);
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T06:44:49.127

自上而下对我来说效果很好；八叉树的上半部分可能是基于指针的，所以大的空子卷不占用内存；下半部分更有效地实现无指针...撞墙的时间复杂度是 log2(N) （这显然是最好的情况）。递归实现非常简单，因此更容易优化代码。所有的数学运算都可以通过整数 SSE 操作有效地实现——计算每个子体积跳跃的新 XYZ 坐标大约需要 x30 个 CPU 周期。顺便说一句，八叉树遍历的公共版本仅适用于教育 - 掌握真正有效的实施可能需要几个月的时间......

斯特凡

# com - 用户代码未处理 COMException（来自 HRESULT 的异常：0xC00CE508）win8 Metro 应用程序

> ID：10228696
> 
> 赞同：0
> 
> 时间：2012-04-19T13:03:02.470
> 
> 标签：com, windows-8, microsoft-metro, windows-runtime, xmlreader

我正在编写一个关于 WinRT Metro Apps 的小应用程序。我需要读取一个 xml 文件，但我得到了一个可怕的 COMException：/

这是应该阅读这个xml：

```
Windows.Storage.StorageFolder storageFolder = await
   Windows.ApplicationModel.Package.Current.InstalledLocation
   .GetFolderAsync("Common");

Windows.Storage.StorageFile storageFile = await
   storageFolder.GetFileAsync("testFile.xml");

var stream = await storageFile.OpenAsync(Windows.Storage.FileAccessMode.Read);

XmlDocument doc = await XmlDocument.LoadFromAsync(storageFile); 
```

有人可以给我一些提示以使其工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:57:25.067

你为什么用`OpenAsync()`？（更进一步，不`LoadFromAsync`存在名为的方法吗？）请参阅此网页：[如何在 Metro 风格的应用程序中读取和写入 XML 文件中的数据？](http://social.msdn.microsoft.com/Forums/en-AU/winappswithcsharp/thread/bcb981aa-f2f8-4f73-89db-43439cf03cd2)

顺便说一句，`0xC00CE508`在解析`XML`. `XML`请使用该`XmlDocument.LoadXml(String)`方法检查内容是否有误。

# jboss - 无法使用 run.bat 从命令提示符运行 jboss

> ID：10228701
> 
> 赞同：1
> 
> 时间：2012-04-19T13:03:16.537
> 
> 标签：jboss

当我从 \jboss-6.1.0.Final\bin 执行 run.bat 时，出现以下错误

```
Calling D:\jboss-6.1.0.Final\bin\run.conf.bat
Could not locate "D:\jboss-6.1.0.Final\bin\bin\run.jar".
Please check that you are in the bin directory when running this script.
Press any key to continue . . . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T06:25:29.830

请设置

> JBOSS_HOME = D:/jboss-6.1.0.Final/bin

请确保您没有对 run.conf.bat 中的 JBOSS_HOME 进行任何修改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T06:29:46.230

我遇到了类似的问题。为了解决它，我设置`JBOSS_HOME`为 bin 目录。将其设置为 bin 目录的父目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-03T15:39:57.207

检查您的 JBOSS_HOME 环境变量。确保它指向您的 jboss 主目录，例如在我的情况下 D:\jboss-5.0.0.CR2

# javascript - 如何在鼠标移出时删除 attr() 值

> ID：10228708
> 
> 赞同：0
> 
> 时间：2012-04-19T13:03:43.720
> 
> 标签：javascript, jquery, mouseover, mouseout

我正在使用此代码为鼠标悬停的图像设置高度和宽度

```
$('#gallery').find("img").attr('height', '20px');
$('#gallery').find("img").attr('width','20px'); 
```

//所以这里的默认高度和宽度由上面的javascript更改

mouseout时如何去掉mouseover设置的图片高度和宽度

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:05:29.873

使用`hover()`：

```
$('#gallery').hover(
    function(){
        // mouseover
        $(this).find("img").attr({'height':'20px', 'width':'20px'});
    },
    function(){
        // mouseout
        $(this).find('img').removeAttr('height').removeAttr('width');
        /* as of jQuery 1.7, it's possible to remove multiple attributes at once:
           $(this).removeAttr('height width'); */
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/t3fYs/)。

[JS Fiddle 演示，使用`.removeAttr('height width')`](http://jsfiddle.net/davidThomas/t3fYs/1/).

参考：

*   [`hover()`](http://api.jquery.com/hover/).
*   [`removeAttr()`](http://api.jquery.com/removeAttr/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:10:33.537

要恢复以前的值而不是恢复为默认值，请执行以下操作：

```
$("#gallery").mouseenter(function() {
   var gallery = this;

   $("img", this).each(function() {
      var prev = {
        "width": $(this).attr("width"),
        "height": $(this).attr("height")
      };

      var img = this;

      $(gallery).one("mouseleave", function() {
        $(img).attr(prev);
      });
   }).attr({'height':'20px', 'width':'20px'});
}); 
```

这将在每个图像的基础上安全地存储旧值，而不会与其他图像冲突。（即使每个图像都有不同的大小开始。

[http://jsfiddle.net/4bEfs/](http://jsfiddle.net/4bEfs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:07:28.600

在 mouseout 上尝试 `$('#gallery').find("img").attr('height', 'auto'); $('#gallery').find("img").attr('width','auto');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T13:08:05.783

如果要处理属性，可以结合使用[http://api.jquery.com/hover/](http://api.jquery.com/hover/)和[http://api.jquery.com/removeAttr/ 。](http://api.jquery.com/removeAttr/)

更灵活的解决方案可能是使用[http://api.jquery.com/css/](http://api.jquery.com/css/)来操作 css 。这样，您可以同时更改多个值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T13:09:32.937

试试这个：在鼠标悬停时存储宽度和高度，然后恢复它们。

```
 var storeddimensions;    
    $('#gallery').hover( 
        function() {
            storeddimensions = new Array($(this).find("img").height(), $(this).find("img").width());
            $(this).find("img").attr({'height':'20px', 'width':'20px'}); 
        }, 
        function() { 
            $(this).find("img").attr({'height':storeddimensions[0] + 'px', 'width':storeddimensions [1] + 'px'}); 
        }
    ); 
```

# silverlight - Silverlight 4 中的虚线

> ID：10228710
> 
> 赞同：1
> 
> 时间：2012-04-19T13:03:46.340
> 
> 标签：silverlight, path, silverlight-4.0

我试图找到一些示例或一些想法，如何仅在一侧绘制带有破折号的路径。

如您所知，`DashArray`不适合那里。我的建议是手动创建破折号，但这似乎很困难。

有任何想法吗？

# c# - 从 Javascript 到 C# 的编码和解码字符串 - 不工作

> ID：10228718
> 
> 赞同：0
> 
> 时间：2012-04-19T13:04:37.870
> 
> 标签：c#, javascript, ajax, decode, encode

我遇到了一些字符串编码的问题，可能是 iis 问题，或者是我忽略的问题。基本上，随机地，当用户提交更改时，文本会与 %20 一起存储，就好像它完全忽略了我的解码一样。在 localhost、live 或任何浏览器上都不会发生在我身上；它从来都不是一致的，甚至不知道如何测试出了什么问题。

*只需粘贴基本部分：*

**接受用户输入的文本控件**

```
<asp:TextBox TextMode="MultiLine" runat="server" txtActionUpdate"></asp:TextBox> 
```

然后

**Javascript“转义”并传递给 ajax 方法以发送到代码隐藏**

```
var tAction = escape(document.getElementById("txtActionUpdate").value); 
```

然后

**在 webmethod 中，我使用以下内容进行解码：**

```
Test = Microsoft.JScript.GlobalObject.unescape(tAction); 
```

（以前是：*Test = HttpUtility.UrlDecode(tAction);*）

但是，上面的两个**解码**选项都可以完美地工作（对我来说？）。但是随机地，当用户在处理它时，它实际上会“跳过”解码步骤，并以其编码格式（即：this%20is%20a%20Test%20string）将其写入数据库，就好像我从来没有代码。

我们有多个客户（单独的 URL），但只有一个代码库。在发布期间，我先删除然后发布，清除应用程序池，让用户清除浏览器缓存（实际上讨厌后者），但这似乎永远不会保持一致。我感觉这更像是一些“缓存”或“服务器设置”问题，而不是代码问题……让我看起来很糟糕！;） 哈哈。有人有预感吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:09:02.493

我不会`escape`用于这个（或其他任何东西）。我会使用[`encodeURIComponent`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)，然后解码`HttpUtility.UrlDecode`（我认为；显然，MSDN 现在已经关闭）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:13:22.500

我的猜测是，在客户端的某个地方，数据被编码了两次，然后导致你看到的效果。

# java - 关于获取访问令牌后访问 Digg API

> ID：10228732
> 
> 赞同：1
> 
> 时间：2012-04-19T13:05:20.073
> 
> 标签：java, oauth, digg

我得到一个异常和代码状态为 400。我的代码有什么问题？

```
OAuthConsumer consumer = new DefaultOAuthConsumer("API key","Secret",SignatureMethod.HMAC_SHA1);
    OAuthProvider provider = new DefaultOAuthProvider(consumer,"http://services.digg.com/oauth/request_token","http://services.digg.com/oauth/access_token","http://digg.com/oauth/authorize");
    System.out.println("Fetching request token from Digg...");

    String authUrl = provider.retrieveRequestToken(OAuth.OUT_OF_BAND);

    System.out.println("Request token: " + consumer.getToken());
    System.out.println("Token secret: " + consumer.getTokenSecret());

    System.out.println("Now visit:\n" + authUrl
            + "\n... and grant this app authorization");
    System.out.println("Enter the PIN code and hit ENTER when you're done:");

    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    String pin = br.readLine();

    System.out.println("Fetching access token from Digg...");

    provider.retrieveAccessToken(pin);

    System.out.println("Access token: " + consumer.getToken());
    System.out.println("Token secret: " + consumer.getTokenSecret());

     URL url = new URL("http://services.digg.com/2.0/story.digg");
     HttpURLConnection request =  (HttpURLConnection)url.openConnection();
     request.setDoOutput(true);
     String charset="UTF-8";
             request.setRequestProperty("story_id","20100706205455:22419803" );
             request.setRequestProperty("key",consumer.getConsumerKey() );
             request.setRequestProperty("secret",consumer.getConsumerSecret()  );
             request.setRequestProperty("access_token" ,consumer.getToken() );
             request.setRequestProperty("access_token_secret",consumer.getTokenSecret()  );

     request.setRequestProperty("Accept-Charset", charset);
    request.setRequestProperty("Content-Type", "application/x-www-form-urlencoded;charset=" + charset);
    OutputStream output = null;
    try {
         output = request.getOutputStream();

    } finally {
         if (output != null) try { output.close(); } catch (IOException logOrIgnore) {}
    }
    System.out.print(request.getResponseCode()); 
```

* * *

例外情况如下：

```
Exception in thread "main" java.io.IOException: Server returned HTTP response code: 400 for URL: http://services.digg.com/2.0/story.digg
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at sun.net.www.protocol.http.HttpURLConnection$6.run(HttpURLConnection.java:1296)
        at java.security.AccessController.doPrivileged(Native Method)
        at sun.net.www.protocol.http.HttpURLConnection.getChainedException(HttpURLConnection.java:1290)
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:944)
        at oauthapplication.Main.main(Main.java:97)
Caused by: java.io.IOException: Server returned HTTP response code: 400 for URL: http://services.digg.com/2.0/story.digg
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1241)
        at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:373)
        at oauthapplication.Main.main(Main.java:96)
400Java Result: 1 
```

# iphone - 想要从 iPhone 状态栏中隐藏定位服务图标

> ID：10228736
> 
> 赞同：-4
> 
> 时间：2012-04-19T13:05:29.333
> 
> 标签：iphone, core-location

我在 iPhone 中运行基于位置的程序。当 iPhone 接收到位置时，电池图标旁边会显示一个小箭头。我希望即使在位置更新时也不会显示此箭头。

请记住，我正在开发越狱的 iPhone。

有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T13:09:40.477

这是不可能的。您的应用程序正在使用内置的 iOS 服务，以便在活动时显示该图标。

您可以尝试打开定位服务，一旦您收到位置信息，就将其关闭。如果您现在需要更新位置，请将其设置在计时器上。该图标将在您打开它时显示，但不应超过 4-5 秒。

# jquery - jQuery 鼠标的 .click() 是通过键盘导航启动的

> ID：10228742
> 
> 赞同：5
> 
> 时间：2012-04-19T13:05:58.570
> 
> 标签：jquery, events, click, accessibility

我发现 jQuery`click`事件的奇怪行为。如果我们使用键盘导航（可访问性案例），则单击由 Enter 或 Space 启动（这取决于我们使用的 HTML 元素）。

jsfiddle上有一个测试页面，您可以尝试在结果框架中使用键盘导航，并在不同情况下启动单击：

[http://jsfiddle.net/DCXhN/9/](http://jsfiddle.net/DCXhN/9/)

在 jQuery 手册中，我发现了以下[点击](http://api.jquery.com/click/)事件的描述：

*“当鼠标指针悬停在元素上时，点击事件被发送到元素，并且鼠标按钮被按下和释放。任何 HTML 元素都可以接收到这个事件。”*

正常吗？如果是正常行为，如何仅拦截鼠标单击事件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T08:11:40.290

是的，这很正常。JQuery 文档是正确的，但有点不完整。[WC3 网站](http://www.w3.org/TR/DOM-Level-3-Events/#event-type-click)上有更多详细信息- 例如：

> 注意：为了获得最大的可访问性，鼓励内容作者在定义自定义控件的激活行为时使用 click 事件类型，而不是其他指针设备事件类型，例如 mousedown 或 mouseup，它们更特定于设备。尽管点击事件类型起源于指针设备（例如鼠标），但随后的实现增强已将其扩展到该关联之外，并且可以将其视为元素激活的与设备无关的事件类型。

或者，换一种说法，对于某些元素，click() 本质上是一个*逻辑*事件，而不是特定于设备的事件。

如果你真的只想响应鼠标输入，你可以使用 mousedown/up 事件 - 但请记住，你必须让你的 UI 键盘可以单独访问（例如，使用 keydown/press/etc 事件来提供键盘相等的）。

# silverlight - 将 Own 对象传递到导航 Windows Phone 7 (silverlight)

> ID：10228744
> 
> 赞同：0
> 
> 时间：2012-04-19T13:06:07.117
> 
> 标签：silverlight, windows-phone-7, navigation

我有自己的对象，我需要在另一个 Windows Phone 页面上查看该对象的列表。这是我到目前为止导航到我的其他页面的代码。我需要在另一页的列表框中列出车主列表

```
 private void btnOwners_Click(object sender, RoutedEventArgs e)
        {
             NavigationService.Navigate(new Uri
                    ("/ViewCarMembers.xaml?info=" + 
                      currentCar.Owners, UriKind.Relative));
        } 
```

currentCar.Owners 基本上是该指定汽车的列表（属于 Car 类型）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:51:03.107

还有另一种方法可以将您的对象传递到页面/从页面传递。我从 wp7 工具包中注意到了这个技巧。DatePicker 控件的工作原理相同。这是诀窍。

您可以使用以下方法获取根框架：

```
var frame = Application.Current.RootVisual as PhoneApplicationFrame 
```

然后您可以使用以下命令导航到另一个页面：

```
frame.Navigate(someUri) 
```

关键时刻是为 frame.Navigated 注册您的处理程序：

```
frame.Navigated += OnFrameNavigated; 
```

然后您可以将任何值传递给您的导航页面，如下所示：

```
private void OnFrameNavigated(object sender, NavigationEventArgs e)
    {
        var myPage = e.Content as IMyPage;
        myPage.MyObject = new MyObject();
    } 
```

这很简单！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:16:50.097

您不能以这种方式通过 NavigationService.Navigate 传递对象，它的行为类似于 URL。

您需要将您需要的信息添加到查询字符串中，在 OnNavigatedTo 函数中读取它并使用这些值来生成您需要的数据：

```
private void btnOwners_Click(object sender, RoutedEventArgs e) 
{ 
      NavigationService.Navigate(new Uri("/ViewCarMembers.xaml?owners=1,2,3,4,5,6,7,8,9",UriKind.Relative)); 
} 
```

您正在导航到的页面中：

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e) 
{ 
    var data = this.NavigationContext.QueryString; 

    if (data.ContainsKey("owners"))
    {
       //Iterate through values (comma seperated)
       //Populate a new list with the owners.
    }

    base.OnNavigatedTo(e); 
} 
```

上面的代码还没有经过测试，这只是我为了理解这一点而编造出来的——你总是可以遍历你的列表并将完整的数据集附加到查询字符串中，将它推回到另一个对象中边。

一个更好的例子，看看 Shai Raiten 如何通过以下博客文章做到这一点：

[http://blogs.microsoft.co.il/blogs/shair/archive/2011/05/01/wp7-data-between-pages-part-1.aspx](http://blogs.microsoft.co.il/blogs/shair/archive/2011/05/01/wp7-data-between-pages-part-1.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:17:04.443

完成这项工作的一种方法是创建一个`ToCSV()`函数，该函数接受 a`List<String>`并将其转换为单个字符串，其中列表中的值用逗号分隔。然后，您可以按如下方式调用它：

```
private void btnOwners_Click(object sender, RoutedEventArgs e)
{
  NavigationService.Navigate(new Uri
    ("/ViewCarMembers.xaml?info=" + 
      ToCSV( currentCar.Owners ), UriKind.Relative));
} 
```

该`ToCSV()`函数需要调用[`Uri.EscapeDataString`](http://msdn.microsoft.com/en-us/library/system.uri.escapedatastring%28v=vs.95%29.aspx)每个所有者名称，然后将其附加到输出字符串以插入适当的转义字符；该字符串会自动转义，因此不需要在`ViewCarMembers`页面内执行任何操作。您还需要创建一个函数来解析 CSV 列表并在目标页面上使用它。

更好的解决方案是传递指定汽车的名称而不是其所有车主的姓名，然后让目标页面从 ViewModel 中获取车主列表。

# php - 无法获取 $_SESSION 登录用户名？

> ID：10228747
> 
> 赞同：0
> 
> 时间：2012-04-19T13:06:08.383
> 
> 标签：php, mysql

我正在尝试获取已登录的用户名，但它不起作用。检查这个：

我试过了：

```
echo $_SESSION['username']; 
```

我只是得到

> 错误：注意：未定义索引：用户名

我知道我有一个名为`username`...的“变量”

我也试过：

```
echo  $_GET['username']; 
```

但这也不起作用，同样的错误。

我`session_start()`已经登录了数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:12:26.290

确保当你设置 $_SESSION 时你把 session_start()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:11:13.437

您必须手动为 分配一个值`$_SESSION['username']`。它不会自动放在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:11:51.967

存储在其中的变量`session`由您的代码放在那里 - 如果您没有分配任何东西，`$_SESSION['username']`那么您将收到错误消息`Undefined index`.. 这是使用会话的基本示例：

```
<?php
// page1.php
session_start();
echo 'Welcome to page #1';
$_SESSION['favcolor'] = 'green'; // set a value
echo '<br /><a href="page2.php">page 2</a>'; 
```

然后在第 2 页：

```
<?php
// page2.php
session_start();
echo 'Welcome to page #2<br />';
echo $_SESSION['favcolor']; // green 
```

在这个简单的示例中，您可以看到在第 1 页中设置了一个值`$_SESSION['favcolor'] = 'green';`，然后在页面中检索了值 '$_SESSION['favcolor']`

[会话的所有文档都在这里](http://www.php.net/manual/en/book.session.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T13:13:16.447

你需要急救。在 php 中是 print_r

```
session_start();
print_r($_SESSION); 
```

如果用户名不存在，print_r 将显示空洞会话数组，您必须先为其分配一个值

```
session_start();
$_SESSION['username'] = $_GET['username'];  // for example 
```

# ruby-on-rails - 未定义的方法`users_path'

> ID：10228750
> 
> 赞同：3
> 
> 时间：2012-04-19T13:06:12.767
> 
> 标签：ruby-on-rails, ruby

```
<%= form_for @user1 do |f| %>

    Username: <%= f.text_field :username %>      <br />
    Password: <%= f.password_field :password %>  <br />.
    Email:    <%= f.email_field :email %> <br />

    <%= submit_tag "Add" %>

<% end %> 
```

我是 ruby​​ 新手，我正在尝试创建简单的程序，但是我遇到了这个错误，我不知道为什么。我有这个错误

```
undefined method `users_path' for #<#<Class:0x000000020576f0>:0x0000000335d5d8> 
```

这里的解决方案是什么？

```
class UserController < ApplicationController
  def add
    @user1 = User.new
    respond_to do |format|
      format.html
      format.json {render :json => @user1}
    end
  end 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-19T13:13:51.093

您是否在 中定义了[路线](http://guides.rubyonrails.org/routing.html)`config/routes.rb`？

```
Rails.application.routes.draw do
  resources :users
  # ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-08T21:43:49.797

我在我的 中遇到了这个错误`config/routes.rb`，我错误地有`user`（单数）：

```
resources :user 
```

它必须是`users`（复数）：

```
resources :users 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-05T13:17:40.363

如果你运行这个命令，你会发现第一列中`rake routes`没有 for 的条目。`users_path`这意味着您没有为提交表单时将调用的操作定义路由。

如果要使用资源，只需添加：

```
resources: users 
```

如果你想对动作使用不同`URL(route name)`的`users#new`，然后添加

```
resources: users, except: [:new] 
```

`users#new`在 routes.rb 文件中的路线下方。

而且，如果您不想采用资源方式，请添加一条新路线：

```
post 'users', to: 'users#create' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-20T14:59:23.650

当我们有一个表单并且当我们按下提交按钮时 Rails 不知道在哪里提交表单时，就会发生这种情况。为此，我们需要去路线并确保我们有`resources:users`：

```
Rails.application.routes.draw do

#all the other resources and routes

resources :users

end 
```

在其他答案之一中，我看到

```
resources :users, except[:new] 
```

仅当我们已经在路由中引入了新操作时才使用它：

```
resources :posts

get 'signup', to: 'users#new 

resources :users, except[:new] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-16T00:40:42.300

在你的课堂`UserController`上，使用：

```
route: get /signup, to: 'user#new'
.
.
resources :users 
```

其中“ `:users`”是复数，因为您将注册多个*用户*。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-11T19:34:23.670

在您的`config/routes.rb`文件中添加：

```
resources :users, except: [:new] 
```

# iphone - 在iphone中绘制画笔时如何从线条中删除点？

> ID：10228751
> 
> 赞同：0
> 
> 时间：2012-04-19T13:06:20.480
> 
> 标签：iphone, drawing, paint, cgcontextref

![在此处输入图像描述](../Images/05b14587413561ba8e61a91174ab3fd9.png)我正在使用以下代码在 iphone 中创建画笔。

```
@interface Canvas : UIImageView {
    CGPoint location;
}

@property CGPoint location;
.m file
@synthesize location;

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];   
    self.location = [touch locationInView:self];    
}

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    CGPoint currentLocation = [touch locationInView:self];  

    UIGraphicsBeginImageContext(self.frame.size); 
    CGContextRef ctx = UIGraphicsGetCurrentContext();  
    //CGContextSetBlendMode(ctx, kCGBlendModeOverlay);

    [self.image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
    CGContextSetLineCap(ctx, kCGLineCapRound);
    CGContextSetBlendMode(ctx, kCGBlendModeNormal);
    CGContextSetLineWidth(ctx, 5.0);
    CGContextSetRGBStrokeColor(ctx, 1.0, 0.0, 0.0, 1.0);
    //CGContextSetBlendMode(ctx, kCGBlendModeOverlay);
    CGContextBeginPath(ctx);
    CGContextMoveToPoint(ctx, location.x, location.y);
    CGContextAddLineToPoint(ctx, currentLocation.x, currentLocation.y);
    CGContextStrokePath(ctx);
    self.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    location = currentLocation;
}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    CGPoint currentLocation = [touch locationInView:self];

    UIGraphicsBeginImageContext(self.frame.size);
    CGContextRef ctx = UIGraphicsGetCurrentContext();  
  //  CGContextSetBlendMode(ctx, kCGBlendModeOverlay);

    [self.image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
    CGContextSetBlendMode(ctx, kCGBlendModeNormal);
    CGContextSetLineCap(ctx, kCGLineCapRound);
    CGContextSetLineWidth(ctx, 5.0);
    CGContextSetRGBStrokeColor(ctx, 1.0, 0.0, 0.0, 1.0);
    CGContextBeginPath(ctx);
    CGContextMoveToPoint(ctx, location.x, location.y);
    CGContextAddLineToPoint(ctx, currentLocation.x, currentLocation.y);
    CGContextStrokePath(ctx);
    self.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    location = currentLocation;     
} 
```

它正在工作，但是在绘制时，在绘制的直线上一定距离后有一些点。我想删除这些点并想要平滑的直线。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:22:09.107

您一遍又一遍地使用相同的图像，将它与旧图像相乘，对吗？我会尝试在每次触摸时使用新的上下文。然后将其乘以现有图像。也许这就是奇怪的样子的原因？

如果起点和终点不同，您也可以添加检查。

你应该做一个额外的绘图方法。TouchesMoved 和 TouchesEnded 中有多余的代码。

# actionscript-3 - AS3 影片剪辑中心旋转和左上角 X、Y 点

> ID：10228756
> 
> 赞同：0
> 
> 时间：2012-04-19T13:06:39.753
> 
> 标签：actionscript-3, flash, actionscript

我正在创建一个 Flash 图像裁剪器。我可以调整和移动包含我的图像的影片剪辑。该影片剪辑也可以旋转。

我遇到的问题是，为了正确裁剪图像，我需要图像位于 0 度处的原始 X、Y 坐标。这就是我所说的可移动电影剪辑。

无论如何我可以获取旋转度数和当前左上角X，Y并获得0度的原点吗？

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:41:14.167

好吧，您可以让 DisplayObject 为您完成工作：

```
var tempRotation:Number = displayObject.rotation;
displayObject.rotation = 0;
var referencePoint:Point = new Point(displayObject.x, displayObject.y);
displayObject.rotation = tempRotation; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:47:24.960

为什么你不能：

*   将其旋转到 0 度。

*   获取新的 x，y。

*   将其向后旋转角度。

* * *

顺便说一句，最好按中心旋转。所以你必须应用类似的东西

*   向后平移一半宽度和一半高度。

*   按角度旋转它。

*   翻译回来...

# sql - 贾斯珀报告。从 JRXML 模板测试 SQL 查询

> ID：10228758
> 
> 赞同：1
> 
> 时间：2012-04-19T13:06:49.840
> 
> 标签：sql, unit-testing, jasper-reports

我们的任务是使用纯 JRXML（不涉及自定义 Java 代码）实现多个报告。有两个主要原因：报告可以仅使用 SQL 查询生成（不需要自定义代码），并且它们应该易于部署 JasperReport 服务器（没有 Java 代码 = 不需要安装自定义数据源和库）。

但是，我们仍然需要对这些报告进行自动化测试。我们决定将数据检索（SQL 查询）和报告呈现的测试分开。

为了测试 SQL，我们希望从 JRXML 模板中提取实际查询，以便更好地进行未来的测试维护。

我们可以手动将报告查询复制到我们的测试中，使用字符串替换函数将所有参数手动替换为实际值，等等。然而在这种情况下，我们将被迫在两个地方手动维护相同的查询：我们的测试和我们的 JRXML 模板。我们想避免它。

从 JRXML 检索的 SQL 查询的问题在于它们仍然包含特定于 JasperReport 的占位符。就像是：

```
SELECT name, department FROM employees WHERE employee_id = $P{employeeId} 
```

到目前为止，我已经找到了一些我们可能会使用的东西（参见[这个线程](https://stackoverflow.com/questions/9789443/export-jasperreports-query-results)）。然而，它仍然涉及 JasperReports 库实现的部分逻辑重复（我们需要重复处理 JRQueryChunks 和向查询添加参数值的逻辑）。

有没有更好的方法（我的意思是从 JRXML 测试 SQL）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:18:31.757

如果您使用 Jasper 服务器来部署您的报告，您可以使用 Jasper API 提取部署的 JRXML 并从那里剥离查询和参数数据类型，将查询参数替换为一些测试参数（$P{xxx} 和$P!{xxx}) 做你的测试并准备好了。

```
<parameter name="employeeId" class="java.lang.Integer">
    <defaultValueExpression><![CDATA[new java.lang.Integer(11)]]></defaultValueExpression>
</parameter>
<queryString>
    <![CDATA[SELECT name, department FROM employees 
                WHERE employee_id = $P{employeeId};]]>
</queryString> 
```

如果您为参数使用默认值，您也可以在测试中使用这些值，如果您没有默认值，您至少具有数据类型，并且能够基于该数据类型创建测试值。

希望这会有所帮助。

# git - 如何修复 Git 分离头？

> ID：10228760
> 
> 赞同：1819
> 
> 时间：2012-04-19T13:07:05.427
> 
> 标签：git, git-detached-head

我正在我的存储库中做一些工作，并注意到一个文件有本地更改。我不再想要它们，所以我删除了文件，以为我可以签出一个新副本。我想做的 Git 相当于

```
svn up . 
```

使用`git pull`似乎不起作用。一些随机搜索把我带到了一个有人推荐做的网站

```
git checkout HEAD^ src/ 
```

（`src`是包含已删除文件的目录）。

**现在我发现我有一个分离的头。我不知道那是什么。我该如何撤消？**

* * *

## 回答 #1

> 赞同：2635
> 
> 时间：2012-04-19T13:32:58.277

分离的头意味着你不再在一个分支上，你已经签出了历史中的一个提交（在这种情况下是 HEAD 之前的提交，即 HEAD^）。

## 如果要*删除*与分离的 HEAD 关联的更改

您只需要检查您所在的分支，例如

```
git checkout master 
```

下次你更改了一个文件并想将它恢复到它在索引中的状态时，不要先删除文件，只需执行

```
git checkout -- path/to/foo 
```

这会将文件 foo 恢复到它在索引中的状态。

## 如果您想*保持*与分离的 HEAD 相关联的更改

1.  运行`git branch tmp`- 这会将您的更改保存在一个名为`tmp`.
2.  跑`git checkout master`
3.  如果您想将所做的更改合并到中，请从分支`master`运行。运行后你应该在分支上。`git merge tmp``master``master``git checkout master`

* * *

## 回答 #2

> 赞同：538
> 
> 时间：2013-12-09T20:05:28.313

如果您更改了不想丢失的文件，可以推送它们。我已经在分离模式下提交了它们，之后你可以移动到一个临时分支以便稍后在 master 中集成。

```
git commit -m "....."
git branch my-temporary-work
git checkout master
git merge my-temporary-work 
```

摘自：

[如何处理在分离的头脑中进行的提交](https://stackoverflow.com/questions/7124486/what-to-do-with-commit-made-in-a-detached-head/7124513#7124513)

* * *

## 回答 #3

> 赞同：188
> 
> 时间：2013-06-11T13:23:11.853

**无需创建临时分支的解决方案。**

*当您已经在此模式下更改了某些内容*并且（可选）想要保存更改时，如何退出（“修复”）分离的 HEAD 状态：

1.  **提交您想要保留的更改。**如果您想接管您在分离 HEAD 状态下所做的任何更改，请提交它们。像：

    ```
    git commit -a -m "your commit message" 
    ```

2.  **放弃不想保留的更改。**硬重置将丢弃您在分离 HEAD 状态下所做的任何未提交的更改：

    ```
    git reset --hard 
    ```

    （没有这个，第 3 步将失败，抱怨在分离的 HEAD 中修改了未提交的文件。）

3.  **检查你的分支。**通过检查您之前处理的分支来退出分离的 HEAD 状态，例如：

    ```
    git checkout master 
    ```

4.  **接管你的提交。**您现在可以通过挑选来接管您在分离 HEAD 状态下所做的提交，如[我对另一个问题的回答中](https://stackoverflow.com/a/15774498/1270008)所示。

    ```
    git reflog
    git cherry-pick <hash1> <hash2> <hash3> … 
    ```

* * *

## 回答 #4

> 赞同：150
> 
> 时间：2016-08-29T00:39:15.080

分离头的意思：

1.  你不再在树枝上，
2.  您已签出历史记录中的单个提交

**如果您没有更改：**您可以通过应用以下命令切换到 master

```
 git checkout master 
```

**如果您有想要保留的更改：**

在分离 HEAD 的情况下，提交工作正常，除了没有命名分支被更新。要使用您提交的更改更新主分支，请在您所在的位置创建一个临时分支（这样临时分支将拥有您在分离的 HEAD 中所做的所有提交更改），然后切换到主分支并将临时分支与大师。

```
git branch  temp
git checkout master
git merge temp 
```

* * *

## 回答 #5

> 赞同：105
> 
> 时间：2019-09-27T23:29:32.837

HEAD 是一个*指针*，它*直接或间接地*指向一个特定的提交：

**附加**  HEAD 表示它附加到某个**分支**（即它*指向*一个分支）。
**分离**的 HEAD 意味着它*没有*附加到任何分支，即它**直接**指向某个提交。

[![在此处输入图像描述](../Images/ee5339e6620c4d8c215c91ba72f9585d.png)](https://i.stack.imgur.com/6mrfN.jpg)

换句话说：

*   **如果它直接**指向提交，则 HEAD 是**分离**的。
*   **如果它间接**指向一个提交（即它指向一个分支，而该分支又指向一个提交），则**附加**HEAD 。

* * *

为了更好地理解附加/分离 HEAD 的情况，让我们展示导致上面四组图片的步骤。

我们从存储库的相同状态开始（所有象限中的图片都相同）：

[![在此处输入图像描述](../Images/fc007914438c60088d570ebd6aa2a94b.png)](https://i.stack.imgur.com/a9uTf.jpg)

* * *

现在我们要执行`git checkout`- 在各个图片中使用不同的目标（它们顶部的命令变暗以强调我们只会*应用*这些命令）：

[![在此处输入图像描述](../Images/be032a2bfa1672049d95f7611b7a7d38.png)](https://i.stack.imgur.com/Ph7Y5.jpg)

* * *

这是执行这些命令*后的情况：*

[![在此处输入图像描述](../Images/d9f97a5359185caccd34e2bb7c817a0f.png)](https://i.stack.imgur.com/ZgKkM.jpg)

如您所见，HEAD 指向命令的目标*——*`git checkout`一个**分支**（四联体的前 3 个图像），或（直接）指向一个**提交**（四联体的最后一个图像）。

工作目录的内容也被更改，以符合适当的提交（快照），即与 HEAD （直接或间接）指向的提交一致。

* * *

所以现在我们处于与此答案开头相同的情况：

[![在此处输入图像描述](../Images/ee5339e6620c4d8c215c91ba72f9585d.png)](https://i.stack.imgur.com/6mrfN.jpg)

* * *

## 回答 #6

> 赞同：82
> 
> 时间：2015-01-01T22:40:00.487

如果您进行了更改，然后意识到您处于超然状态，您可以执行以下操作：stash -> checkout master -> stash pop：

```
git stash
git checkout master   # Fix the detached head state
git stash pop         # Or for extra safety use 'stash apply' then later 
                      #   after fixing everything do 'stash drop' 
```

您将拥有未提交的更改和正常的“附加” HEAD，就像什么都没发生一样。

* * *

## 回答 #7

> 赞同：79
> 
> 时间：2014-08-02T23:33:49.227

这是我在意识到自己处于超然状态并且已经做出一些改变之后所做的事情。

我提交了更改。

```
$ git commit -m "..."
[detached HEAD 1fe56ad] ... 
```

我记得提交的哈希（1fe56ad）。然后我检查了我应该在的分支。

```
$ git checkout master
Switched to branch 'master' 
```

最后，我将提交的更改应用于分支。

```
$ git cherry-pick 1fe56ad
[master 0b05f1e] ... 
```

我认为这比创建临时分支要容易一些。

* * *

## 回答 #8

> 赞同：43
> 
> 时间：2012-04-19T13:32:18.720

当您签出 中的特定提交时`git`，您最终会处于*分离的头部*状态......也就是说，您的工作副本不再反映命名引用的状态（如“master”）。这对于检查存储库的过去状态很有用，但如果您实际上尝试还原更改，则不是您想要的。

如果您对特定文件进行了更改并且只想丢弃它们，则可以使用如下`checkout`命令：

```
git checkout myfile 
```

这将丢弃任何未提交的更改并将文件恢复到它在当前分支头部的任何状态。如果您想放弃已经提交的更改，您可能需要使用该`reset`命令。例如，这会将存储库重置为先前提交的状态，丢弃任何后续更改：

```
git reset --hard HEAD^ 
```

但是，如果您与其他人共享存储库，则 a`git reset`可能会造成破坏（因为它会删除存储库历史的一部分）。如果您已经与其他人共享了更改，您通常希望查看`git revert`它，它会生成一个“反提交”——也就是说，它会创建一个“撤消”相关更改的新提交。

[Git Book](http://book.git-scm.com/5_git_hooks.html)有更多细节。

* * *

## 回答 #9

> 赞同：30
> 
> 时间：2015-11-20T19:30:36.600

由于“分离头状态”使您处于临时分支上，因此只需使用`git checkout -`它将您置于您所在的最后一个分支上。

* * *

## 回答 #10

> 赞同：16
> 
> 时间：2020-04-01T11:00:57.137

你可能做到了`git reset --hard origin/your-branch`。

试着只是`git checkout your-branch`

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2019-02-15T15:16:42.687

处于“分离头”意味着 HEAD 指的是特定的未命名提交（与命名分支相反）（参见：[https](https://git-scm.com/docs/git-checkout) ://git-scm.com/docs/git-checkout部分**分离头**）。实际上，这意味着您已经签出了一个提交，但没有与之关联的分支名称。

您可以选择仅通过以下方式创建与您的提交相关联的新分支

`git branch new-branch-name`.

这使您可以将当前状态保存在名为的新分支`new-branch-name`中，而不再处于某个`detached head`状态。

或者如果你想回到之前的状态，你需要选择之前被选中的分支

`git checkout @{-1}`

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2017-12-06T13:39:17.623

为了进一步澄清@Philippe Gerber 的回答，这里是：

[![git 樱桃采摘](../Images/3f9e92bd801466c2fe56d508a925b061.png)](https://i.stack.imgur.com/Q1HKx.png)

在 之前`cherry-pick`，在这种情况下 a`git checkout master`是必需的。此外，它只需要使用`commit`in `detached head`。

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2016-01-22T11:09:35.253

**附录**

如果您希望返回的分支是您最后一次结帐，您可以简单地使用`checkout @{-1}`. 这将带您回到之前的结帐。

此外，您可以为该命令设置别名，例如，`git global --config alias.prev`您只需键入`git prev`即可切换回上一个结帐。

* * *

## 回答 #14

> 赞同：8
> 
> 时间：2020-01-13T06:35:57.967

分离的头意味着您没有正确签出您的分支，或者您刚刚签出了一个提交。

如果您遇到这样的问题，那么首先**存储**您的本地更改，这样您就不会丢失您的更改。

之后...使用以下命令检查您想要的分支：

假设您想要分支 MyOriginalBranch：

**git checkout -b someName origin/MyOriginalBranch**

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2020-09-29T16:37:12.047

**这种方法可能会丢弃部分提交历史**，但如果旧主分支和当前状态的合并很棘手，或者您只是不介意丢失部分提交历史，则更容易。

为了简单地保持当前状态而不合并，将当前分离的 HEAD 转换为 master 分支：

1.  手动备份存储库，以防出现意外错误。
2.  提交您想保留的最后更改。
3.  创建一个临时分支（让我们命名它`detached-head`），其中将包含处于当前状态的文件：

```
git checkout -b detached-head 
```

4.  (a) 如果不需要保留 master 分支，请删除它

```
git branch -D master 
```

4.  (b) 或者如果您想保留它，请重命名

```
git branch -M master old-master 
```

5.  将临时分支重命名为新的主分支

```
git branch -M detached-head master 
```

来源：改编自Gary Lai 的[这篇 Medium 文章](https://medium.com/@garylai_34633/how-to-fix-detached-head-in-git-5b518574c11a)。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2019-01-31T19:30:55.820

Git告诉我怎么做。

如果您输入：

```
git checkout <some-commit_number> 
```

保存状态

```
git add .
git commit -m "some message" 
```

然后：

```
 git push origin HEAD:<name-of-remote-branch> 
```

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2020-01-05T07:39:47.420

通常`HEAD`指向一个分支。当它不指向分支时，而是指向提交哈希时，`69e51`这意味着您有一个分离的 HEAD。您需要将它指向两个分支来解决问题。你可以做两件事来修复它。

1.  git checkout other_branch // 当您需要该提交中的代码时，这是不可能的`hash`
2.  创建一个新分支并将提交哈希指向新创建的分支。

> **HEAD 必须指向一个分支，而不是提交哈希是黄金法则。**

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2018-12-04T22:11:11.123

我想保留我的更改，所以我只是解决这个问题......

```
git add .
git commit -m "Title" -m "Description"
(so i have a commit now example: 123abc)
git checkout YOURCURRENTBRANCH
git merge 123abc
git push TOYOURCURRENTBRANCH 
```

那对我有用

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2019-03-21T22:15:15.810

当您处于分离头情况并创建新文件时，首先确保将这些新文件添加到索引中，例如：

```
git add . 
```

但是，如果您只更改或删除了现有文件，则可以通过以下方式同时添加 (-a) 并使用消息 (-m) 提交：

```
git commit -a -m "my adjustment message" 
```

然后，您可以使用当前状态简单地创建一个新分支：

```
git checkout -b new_branch_name 
```

您将拥有一个新分支，并且您的所有调整都将在该新分支中进行。然后，您可以根据需要继续推送到远程和/或结帐/拉取/合并。

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2020-07-27T12:21:33.447

`merge`意识到我有一个超然的头脑而不知道我是如何设法得到它的（比如三个提交） ，我还发现尝试`rebase`或`cherry-pick`触发了数百个合并冲突，所以我采取了不同的方法：

1.  （假设一切都已提交（工作树是“干净的”））

2.  保存我的提交信息：`git log > /tmp/log`

3.  保存我的工作树：`mkdir /tmp/backup && cp -a all_my files_and_directories /tmp/backup`

4.  恢复为`master`：`git checkout master`

5.  删除所有工作文件和目录：`rm ...`

6.  使用备份：`cp -a /tmp/backup/. .`

7.  `git add`并`git commit`使用来自 saved 的消息`/tmp/log`，也许用不同的文件子集重复它......

缺点是如果一个文件被多次更改，你会丢失你的提交历史`master`，但最后我有一个干净的`master`.

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2021-03-31T14:41:56.870

我也有类似的情况。
出于某种原因，我最终得到了一个分离的头——我已经在与我认为我所在的分支相同的路径上进行了提交——例如，HEAD 是分支标签的子标签，但由于某种原因，分支标签一直停留在历史上提交...可能是因为我推了？？

它不会让我推动，因为我不被认为在我认为我所在的分支上。

我不想改变我的任何历史或做任何樱桃采摘，我刚刚在分支上工作了大约 8 周，所以`reset --hard`让我有点紧张！

解决方案只是执行以下操作：

```
git branch -f myStuckBranch HEAD
git checkout myStuckBranch 
```

即使 HEAD 和 myStuckBranch 现在指向同一事物，您也需要进行结帐，因为您仍然被认为处于分离的头部状态（而不是在分支上）

我不是 git 专家（主要使用 mercurial，它永远不会造成这种奇怪的情况），但我对这个命令的理解是它只是说“将 myStuckBranch 更改为指向 HEAD”。

我经常发现自己使用此命令在获取后合并来自 master 的更改，而无需交换我的工作目录 - 否则它会尝试使用旧（无趣）版本的 master：

```
git fetch
git branch -f master origin/master  -- err yeah don't just ignore what's been going on remotely - eg point my master at the real master
git merge master -- merge the changes into my local branch 
```

不得不一直手动执行此操作有点烦人，但仍然比更改工作目录只是为了更新另一个分支以合并其中的更改要好。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2014-05-14T14:14:25.840

```
git pull origin master 
```

为我工作。这只是明确给出远程和分支名称。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2020-03-17T17:06:58.730

这对我有用，它将为分离头分配一个新分支：

`git checkout new_branch_name detached_head_garbage_name`

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2020-04-21T10:00:13.823

分离的 HEAD 表示您当前不在任何分支上。如果您想保留当前更改并简单地创建一个新分支，您可以这样做：

```
git commit -m "your commit message"
git checkout -b new_branch 
```

之后，您可能希望将此新分支与其他分支合并。总是有用的是 git ["a dog"](https://i.stack.imgur.com/ElVkf.jpg)命令：

```
git log --all --decorate --oneline --graph 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2021-07-12T16:48:55.530

使用*git rebase*您可以将 HEAD 移动到所需的提交

假设您的分支处于分离状态，如下所示：

```
* bfcb8f9 Commit 4
* 540a123 Commit 3
* 4356d64 Commit 2
| * fecb8d2 Commit 2
|/
| * 8012f45 Commit 2x
|/
| * 6676d15 (HEAD -> master) Commit 2 --amend
|/
* 1818f91 Commit 1 
```

分离的头部是通过错误地变基创建的，指向一个分离的提交，该提交是先前由于***git commit --amend***命令而创建的。

如果您想将 HEAD 引用移动到最近的提交，请使用您想要指向的所需 HASH 提交应用 rebase。在此示例中，哈希是最近提交的：

```
git rebase bfcb8f9 
```

这将使您的分支的 HEAD 指向所需的提交（在这种情况下是最新的）：

```
* bfcb8f9 (HEAD -> master) Commit 4
* 540a123 Commit 3
* 4356d64 Commit 2 --amend
| * fecb8d2 Commit 2
|/
| * 8012f45 Commit 2x
|/
| * 6676d15 Commit 2
|/
* 1818f91 Commit 1 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2022-01-25T20:12:42.350

添加到@ralphtheninja 的答案。如果您在使用后收到此消息`git checkout master`：

> 请在切换分支之前提交您的更改或存储它们。中止

然后，您可以简单地使用 -f 标志强制结帐，如下所示：

```
git checkout -f master 
```

显然，这将导致丢失在分离模式下所做的所有更改。所以使用的时候要小心。

# android - 在运行 android 2.3.3 的设备中获取“java.lang.IllegalArgumentException：不能在此处使用 FLAG_RECEIVER_BOOT_UPGRADE”

> ID：10228762
> 
> 赞同：1
> 
> 时间：2012-04-19T13:07:11.640
> 
> 标签：android, alarmmanager, android-pendingintent

我有一个活动允许用户通过选择日期和时间来安排活动。我已经使用 AlarmManager 完成了

```
Intent i=new Intent(context, AlarmReceiver.class);
i.putExtra("status",status);
i.putExtra("mode",mode);
PendingIntent p=PendingIntent.getBroadcast(context, id, i, PendingIntent.FLAG_CANCEL_CURRENT);
AlarmManager alarms = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
alarms.set(AlarmManager.RTC_WAKEUP, sched_time, p); 
```

在广播接收器中启动了一个新的活动

```
 @Override
    public void onReceive(Context context, Intent data) {
    // Start the scheduled post
    String status=data.getExtras().getString("status");
    int mode=data.getExtras().getInt("mode");

    Intent i=new Intent(context,PostScheduled.class);
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    i.putExtra("status", status);
    i.putExtra("mode", mode);

    context.startActivity(i);
} 
```

在模拟器中，此代码运行良好，但在实际设备（运行 android 2.3.3）中，它在该行崩溃

```
PendingIntent p=PendingIntent.getBroadcast(context, id, i, PendingIntent.FLAG_CANCEL_CURRENT); 
```

这是堆栈跟踪

```
java.lang.IllegalArgumentException: Can't use FLAG_RECEIVER_BOOT_UPGRADE here
at android.os.Parcel.readException(Parcel.java:1326)
at android.os.Parcel.readException(Parcel.java:1276)
at android.app.ActivityManagerProxy.getIntentSender(ActivityManagerNative.java:2254)
at android.app.PendingIntent.getBroadcast(PendingIntent.java:230)
at com.social.autofunnystatus.ScheduleDialog.onClick(ScheduleDialog.java:158)
at android.view.View.performClick(View.java:2538)
at android.view.View$PerformClick.run(View.java:9152)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
at dalvik.system.NativeStart.main(Native Method) 
```

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-05T16:02:30.033

这是android中的一个错误。在历史的某个时刻，这两个标志 -`FLAG_ACTIVITY_NEW_TASK`并且`FLAG_RECEIVER_BOOT_UPGRADE`- 获得相同的数值，因为一些 android 开发人员更改了他们的一个值，而没有检查它是否已经被另一个标志占用。最新版本（4.4）似乎已经修复了它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T14:33:44.213

该`FLAG_RECEIVER_BOOT_UPGRADE`标志是`ActivityManagerService`当您像在此处那样专门定义广播目标时附加的“装饰”：

```
Intent i=new Intent(context, AlarmReceiver.class); 
```

如果你要定义一个动作，例如 " " 并在你的- 中`com.whateveryour.package.is.ACTION_ALARM`声明`AlarmReceiver`a ，然后创建这样的：`<receiver />``AndroidManifest.xml``Intent`

```
Intent i=new Intent("com.whateveryour.package.is.ACTION_ALARM");
i.putExtra("status",status);
i.putExtra("mode",mode);
PendingIntent p=PendingIntent.getBroadcast(context, id, i,PendingIntent.FLAG_CANCEL_CURRENT); 
```

你会摆脱那个阻碍你的讨厌的旗帜。

# java - JBOSS 7 编码未按预期工作

> ID：10228764
> 
> 赞同：7
> 
> 时间：2012-04-19T13:07:14.437
> 
> 标签：java, encoding, utf-8, jboss7.x

我的 listgrids 没有正确显示变音符号时遇到问题，我发现当我从 java 插入数据库时​​，值已经被窃听了。

此处的帖子有所帮助，我更改了项目属性-> 文本编码-> 其他-> UTF-8，这解决了我的问题。问题是这只能在本地解决我的问题。

我需要做的是在我的 Jboss 服务器上也以某种方式设置编码。这是我放入配置文件的内容：

```
 <?xml version='1.0' encoding='UTF-8'?>

<server name="vali-ubuntu" xmlns="urn:jboss:domain:1.0">
    extensions>
        extension module="org.jboss.as.clustering.infinispan"/>
        extension module="org.jboss.as.connector"/>
        extension module="org.jboss.as.deployment-scanner"/>
        extension module="org.jboss.as.ee"/>
        extension module="org.jboss.as.ejb3"/>
        extension module="org.jboss.as.jaxrs"/>
        extension module="org.jboss.as.jmx"/>
        extension module="org.jboss.as.logging"/>
        extension module="org.jboss.as.naming"/>
        extension module="org.jboss.as.osgi"/>
        extension module="org.jboss.as.remoting"/>
        extension module="org.jboss.as.sar"/>
        extension module="org.jboss.as.security"/>
        extension module="org.jboss.as.threads"/>
        extension module="org.jboss.as.transactions"/>
        extension module="org.jboss.as.web"/>
        extension module="org.jboss.as.weld"/>
    /extensions>
     system-properties>
        property name="org.apache.catalina.connector.URI_ENCODING" value="UTF-8"/>
        property name="org.apache.catalina.connector.USE_BODY_ENCODING_FOR_QUERY_STRING" value="tru
e"/>
    /system-properties>

//..... 
```

这不起作用，所以也许我需要添加其他内容。我尝试了所有我能找到的东西，但都没有成功，因此感谢您的帮助。谢谢。

编辑：根据我的阅读，这仅适用于 jboss 7.1.0 beta 1 或更高版本。（URIEncoding）并且我使用 JBoss 7.0.2，所以我需要替换 7.0.2

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T08:43:23.163

对于 jboss-as-7.1.1.Final 我将此行添加到**Standalone.conf**，该文件位于目录**bin**下：

```
JAVA_OPTS="$JAVA_OPTS -Dorg.apache.catalina.connector.URI_ENCODING=UTF-8" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-19T13:12:25.420

您是否尝试过为 JVM 设置默认编码？设置名称混淆的属性：

```
-Dfile.encoding=UTF-8 
```

（对于 JBoss 5，您可以在 run.conf 中设置它。我不知道这对于 JBoss 7 是否不同）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-07T09:31:17.923

对我来说，解决问题的方法是将以下内容添加到 components.xml：

```
 <web:character-encoding-filter encoding="UTF-8"
                    override-client="true"
                    url-pattern="*.seam" /> 
```

# python - 从带有 Starpy 的 Python 脚本到 Asterisk 的 AMI 连接的基本示例

> ID：10228765
> 
> 赞同：0
> 
> 时间：2012-04-19T13:07:17.353
> 
> 标签：python, asterisk

我有多年使用星号的丰富经验，但对 python 很陌生。我想从 python 脚本连接并接收一些事件。我已经创建了一个使用`AMIUSERNAME`和`AMIPASSWORD`作为凭据的经理用户，并测试工作正常。我还安装了[StarPy](http://www.vrplumber.com/programming/starpy/)。然后我使用命令运行`python ami.py USERNAME PASSWORD`以下脚本：

```
import sys
from starpy import manager
f = manager.AMIFactory(sys.argv[1], sys.argv[2])
df = f.login('127.0.0.1',5038) 
```

在监视星号控制台时，没有任何反应。有谁知道我错过了什么？

我想发送一个 Ping 动作并等待 Pong 响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:16:41.733

我想这会`f.login()`返回一个[`AMIProtocol`](http://www.vrplumber.com/programming/starpy/pydoc/starpy.manager.html#AMIProtocol)具有`ping()`方法的实例。

我对starpy一无所知，所以一些模糊的建议：

*   将 Python 作为交互式 shell 启动。执行代码并当场检查结果。`help`函数是你的朋友；`help(df)`在脚本的最后一行之后尝试。

*   查看`examples`starpy发行版中的目录。也许你需要的 90% 的代码已经在那里了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:39:31.247

[以下内容来自Asterisk Test Suite](http://svn.asterisk.org/svn/testsuite/asterisk/trunk/)中的 ami 模块（以及其他一些地方）。我们在整个测试套件中广泛使用 starpy，因此您可能需要查看一些示例。假设以下代码驻留在具有成员方法 login 的某个类中。

```
def login(self):

  def on_login_success(self, ami):
      self.ami_factory.ping().addCallback(ping_response)
      return ami

  def on_login_error(self, reason):
      print "Failed to log into AMI"
      return reason

  def ping_response(self, ami)
      print "Got a ping response!"
      return ami

  self.ami_factory = manager.AMIFactory("user", "mysecret")
  self.ami_factory.login("127.0.0.1", 5038).addCallbacks(on_login_success, on_login_error) 
```

确保你的 manager.conf 配置正确。对于 Asterisk 测试套件，我们使用以下内容：

```
[general]
enabled = yes
webenabled = yes
port = 5038
bindaddr = 127.0.0.1

[user]
secret = mysecret
read = system,call,log,verbose,agent,user,config,dtmf,reporting,cdr,dialplan,test
write = system,call,agent,user,config,command,reporting,originate 
```

# linux - 如何使用 ruby 脚本以 ROOT 用户身份登录 linux 终端

> ID：10228766
> 
> 赞同：2
> 
> 时间：2012-04-19T13:07:23.543
> 
> 标签：linux, ssh, command-line-interface, su

我想使用 SSH 在远程服务器上运行脚本。

我已经编写了使用系统命令正常运行的所有代码。

要在远程服务器上运行我的代码，我需要一些需要安装在远程服务器上的软件包。

为此，我需要以 ROOT 用户身份登录远程终端。当我尝试使用 Ruby 脚本时，我得到如下内容

```
[not_root_user@remote_server]$ su
Password: 
```

我需要一些命令，使用它可以登录到远程服务器，如下所示

```
[not_root_user@remote_server]$ su -p ******
[root@remote_server]# 
```

是否有任何接受密码的linux命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:40:31.937

所以你想让你的脚本作为根？

这不是真的推荐，但你可以使用期望：[http ://en.wikipedia.org/wiki/Expect](http://en.wikipedia.org/wiki/Expect)

那里的 wiki 有一个基本的自动 telnet 会话演练，您可以根据自己的需要进行调整。

但是，您将获得纯文本的 root 密码，这可能是一个安全问题。如果你走那条路，一旦安装了这个包，我肯定会从宇宙中删除该脚本的所有副本。

但是，如果您允许直接 root 登录，那么您已经遇到了一些安全问题。Sudo 在我使用过的每一个现代 linux 发行版上都是开箱即用的，如果可能的话，我会坚持下去。

另一个同样乏味的选择是通过 ssh 设置没有密码的 root 到 root 登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:44:21.113

Sudo 将是我解决此问题的第一个选择。虽然不是最好的选择。

您还可以通过 SSH 使用密钥身份验证，如果关闭密码身份验证，则无需输入密码。

# android - 动态壁纸在主屏幕更改时滑动不顺畅

> ID：10228767
> 
> 赞同：1
> 
> 时间：2012-04-19T13:07:25.623
> 
> 标签：android, wallpaper

我的动态壁纸大部分时间在主屏幕更改时滑动不顺畅。背景位置没有复杂的编码。它只是使用位于 onoffsetschanged 方法上的 xpixles 来调整壁纸的 x 位置。有时它会像在日出动态壁纸应用程序中一样滑动。但大多数其他时间它滑动..不知道如何描述它，但它就像一个静态的急剧移动。有没有关于那些家伙的想法。此致。

```
private void drawS() {
        final SurfaceHolder holder = getSurfaceHolder();        
        canvas = null;
        try {
            canvas = holder.lockCanvas();

            if (canvas != null) {

                background = BitmapFactory.decodeResource(getResources(),
                        R.drawable.background);         
                canvas.drawBitmap(background, mXPixels, mYPixels, null);

            }

        }
        finally {
            if (canvas != null) {
                holder.unlockCanvasAndPost(canvas);
            }
        }

        handler.removeCallbacks(runnableS);

        if (visible) {

            handler.postDelayed(runnableS, 25);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:33:59.390

尽量避免在绘图例程中创建资源；从 drawS() 函数中删除它：

```
background = BitmapFactory.decodeResource(getResources(),
                    R.drawable.background); 
```

并将它放在你初始化你的东西的任何地方，稍后只使用对背景位图的引用。

如果您查看 logcat，您会发现每次调用 drawS(); 时都会进行很多资源混洗和内存管理（为资源分配内存、解码其中的位图图像等）；即每次绘制背景时...

干杯，

伊维察

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:00:49.117

我遇到了同样的问题，并按照 Ivica 的建议解决了。我在表面创建子中移动了位图创建线：

```
public void onSurfaceCreated(SurfaceHolder holder) {
   super.onSurfaceCreated(holder);
   mybackground = BitmapFactory.decodeResource(getResources(), R.drawable.mybg);
 } 
```

这样滑动很流畅

# session - Mongoose-Auth/Express/Connect 不保留会话问题

> ID：10228772
> 
> 赞同：1
> 
> 时间：2012-04-19T13:07:30.523
> 
> 标签：session, node.js, authentication, express, mongoose

我目前正在开发一个节点 js 应用程序，我正在尝试使用 Monggose-Auth 创建用户身份验证过程。我已经完成了多个教程示例以及我能找到的关于如何使用 Mongoose-Auth 的所有指南，但是我遇到了困难。

我的基本密码身份验证似乎可以工作并重定向到正确的位置并保留用户等。我的问题是，在将我的需要登录功能添加到用户个人资料页面时，我遇到了一个问题，即我只是被重定向回登录页。这似乎是因为会话以某种方式丢失了但是当我查看我的everyauth调试输出时（mongoose-auth建立在everyauth之上）我看到以下内容

开始步骤 - displayLogin

...完成的步骤

获取 /favicon.ico

开始步骤 - extractLoginPassword

...完成的步骤

开始步骤 - 验证

...完成的步骤

开始步骤——interpretUserOrErrors

...完成的步骤

开始步骤 - getSession

...完成的步骤

开始步骤 - addToSession

...完成的步骤

开始步骤 - respondToLoginSucceed

...完成的步骤

开始步骤 - respondToLoginFail

...完成的步骤

获取/用户/个人资料

开始步骤 - displayLogin

...完成的步骤

获取 /favicon.ico

我的应用程序可以在这里找到 --> [https://github.com/Themitchell/Node-Express-Connect-Mongoose-Auth-Stack](https://github.com/Themitchell/Node-Express-Connect-Mongoose-Auth-Stack) <-- 如果您想亲自查看，应该可以快速设置！它使用正确的 package.json 等，所以只需运行

npm install 然后节点 server.js

我想从其他地方举一个例子来尝试和建立，但我想了解问题是什么，而不是在我还不了解的东西之上破解！

据我所知，mongoose-auth 不应该坚持会话本身，而是我必须通过连接来做到这一点，例如我认为我做得正确。

在项目中查看的文件可能在

配置/环境.js

应用程序/模型/user.js

最后

config/routes.js 有 requiresLogin 功能（我现在只知道它在这里。

提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:42:00.493

这不是一个完整的答案，但您可以看到我如何在我的项目中处理 Auth。我使用 Mongoose、Express、Passport + Passport Local 来处理 Auth 和 connect-mongodb 来保持会话（很难让整个堆栈正常工作）。优点是即使在服务器重新启动之间也会检索会话。

链接到主要文件：

*   [应用程序初始化](https://github.com/ArnaudRinquin/LostAndFound/blob/master/LostAndFound.js)
*   [身份验证初始化](https://github.com/ArnaudRinquin/LostAndFound/blob/master/core/Auth.js)(Auth.js)
*   [猫鼬模式和初始化](https://github.com/ArnaudRinquin/LostAndFound/blob/master/core/Data.js)

重要的是：

*   Auth.js 将帮助您在 Mongoose 中调整 Passport Auth。
*   将 connect-db 设置为持久会话并不容易，但它非常舒服。

看看我是如何设置 connect-db 的（最好看的是 LoastAndFound.js 或 .coffee）：

```
app.use(express.session({
    secret: 'awesome unicorns',
    maxAge: new Date(Date.now() + 3600000),
    store: new common.mongoStore({
        db: Data.mongoose.connection.db
    }, function(err) {
        return console.log(err || 'connect-mongodb setup ok');
    })
 })); 
```

注意：请原谅我的代码不完美，需要更多评论并且没有经过测试。

# vb.net - 数组不在visualbasic中的文本框内以二维形式打印

> ID：10228773
> 
> 赞同：0
> 
> 时间：2012-04-19T13:07:31.707
> 
> 标签：vb.net

```
Private Sub Command4_Click()
  Dim x As Integer
  r = InputBox("Enter row size ")
  c = InputBox("Enter column size ")
  ReDim arr(r, c) As Integer
  For i = 0 To r - 1 Step 1
    For j = 0 To c - 1 Step 1
     arr(i, j) = InputBox("Enter row : " & (i + 1) & "column size : " & (j + 1))
    Next j
  Next i
  For i = 0 To r - 1
    For j = 0 To c - 1
      Text1.Text = Text1.Text & " " & arr(i, j)
  Next j
    Text1.Text = Text1.Text & vbNewLine & vbCr
 Next i
End Sub 
```

这是我在数组中输入的代码。除了这一行“Text1.Text = Text1.Text & vbNewLine & vbCr”之外，这里一切正常不工作，我的数组打印在一行中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:15:24.720

我建议`vbCrLf`代替`vbNewLine & vbCr`，并且您需要确保在属性编辑器中将文本框设置为 Multiline 。

# c# - 使用 Linq to SQL 通过合并两个整数字段来创建唯一的数字列表

> ID：10228778
> 
> 赞同：1
> 
> 时间：2012-04-19T13:08:06.777
> 
> 标签：c#, linq

我首先使用 MVC 和 EF 代码来访问包含两个 int 字段的 SQL Server 表

例如：

```
F1  F2
1   2
2   3
3   4 
```

由此，我将如何使用 Linq to SQL（或其他任何东西）来生成包含 1,2,3,4 的列表

任何最好在 C# 中的建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T13:11:18.957

```
var items = Table.Select(t=>t.F1)
                 .Union(Table.Select(t=>t.F2))
                 .ToList() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:11:13.457

使用`Union`. 它将合并两个对象并删除重复值。`.Distinct()`请注意，在这种情况下您无需使用，因为`Union`默认情况下会删除重复值。

```
var mergedList = myEntity.Select(p=>p.F1).
                 Union(myEntity.Select(p=>p.F2)).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:12:00.460

```
list1.Union(list2).Distinct(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T13:15:22.083

尝试这个

```
var result = source
    .Select(s => s.F1)
    .Union(
        source.Select(s => s.F2)
    ); 
```

请注意，`Union`返回两个输入序列中的元素，不包括重复项。`.OrderBy(x => x)`如果需要订购元素，您可能还想添加一个。

# salesforce - 是否可以向 Salesforce 中的字段添加样式？

> ID：10228780
> 
> 赞同：0
> 
> 时间：2012-04-19T13:08:10.160
> 
> 标签：salesforce, force.com

我遇到需要将输入文本转换为大写的情况。一旦我们在输入字段中键入一些文本，它就需要将其转换为大写。

为此，我们有以下 css 样式：

```
 style="text-transform: uppercase" 
```

使用这种样式，文本会自动以大写形式输入，因此我们不需要做任何额外的事情，但 Salesforce 中没有选项可以为字段添加样式。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:27:16.167

不幸的是，没有一种简单的方法可以将 CSS 样式添加到在编辑模式下出现在标准页面布局上的字段中。但是，您可能想探索一些选项（如下所列）。

* * *

# 视觉力量

您可以将样式属性添加到**Visualforce** (http://www.salesforce.com/us/developer/docs/pages/Content/pages_compref_inputText.htm) 或[inputfield](http://www.salesforce.com/us/developer/docs/pages/Content/pages_compref_inputField.htm)组件中的 [inputtext]。

```
<apex:inputtext value="{!Widget__c.Name}" style="text-transform:uppercase;" /> 
```

要改为添加 CSS 类，您可以使用该`styleClass`属性。不过，我相信这只会影响文本数据的显示。为了确保在保存到数据库时该值是大写的，请在`onkeyup`属性上使用此 JavaScript（如下）。

```
<apex:inputtext value="{!Widget__c.Name}" style="text-transform:uppercase;" onkeyup="var u=this.value.toUpperCase();if(this.value!=u){this.value=u;}" /> 
```

* * *

# 标准页面布局

## 选项 1：在标准页面布局中嵌入 Visualforce 页面

要在标准**页面布局**上执行此操作，您可以为您希望使用此功能的字段创建一个 Visualforce 页面。但是，这只会显示在记录视图中。它将在编辑中不可见。

Visualforce 页面看起来像这样（其中`Widget__c`替换为您正在使用的 sObject）：

```
<apex:page standardController="Widget__c">
    <apex:form id="WidgetForm">
        <apex:actionFunction name="SavePost" action="{!save}" rerender="WidgetPanel" status="str" />
        <apex:outputpanel id="WidgetPanel">
            <apex:inputtext id="WidgetName" value="{!Widget__c.Name}" style="text-transform:uppercase;" onkeyup="var u=this.value.toUpperCase();if(this.value!=u){this.value=u;}" />
            <apex:commandbutton value="Save" styleClass="btn" onclick="SavePost();" />
            <apex:actionStatus startText="Loading..." stopText="" id="str"> </apex:actionStatus>
        </apex:outputpanel>
    </apex:form>
</apex:page> 
```

然后在页面布局上，单击`Visualforce Pages`下方的类别`Fields`和`Buttons`，然后通过将 Visualforce 页面组件拖到布局中，将 Visualforce 页面添加到页面布局中。请务必通过单击新 Visualforce 页面组件右上角的扳手来配置它的高度。

## 选项 2：在带有侧边栏组件的标准页面布局上使用 JavaScript

使用标准页面布局的另一个更复杂的选项是在包含 JavaScript 的侧边栏上添加一个主页组件。此选项需要对 JavaScript（或[jQuery](http://jquery.com/)一个 JavaScript 库）有一定的了解。然后，JavaScript 可以找到该字段，为其添加`text-transform:uppercase;`样式，并将一个函数绑定到 keyup 事件以将所有输入的字符转换为大写 ( `element.value.toUpperCase();`)。有关此方法的更多信息，请查看[Tehnrd 关于为 JavaScript 添加侧边栏组件的博客文章](http://tehnrd.com/show-and-hide-buttons-on-page-layouts)。他使用此方法显示和隐藏标准页面布局上的按钮，但可以对其进行修改以适合您的目的。

# iphone - 如何使用跳板服务器中的功能？

> ID：10228781
> 
> 赞同：0
> 
> 时间：2012-04-19T13:08:10.783
> 
> 标签：iphone, jailbreak

我想在应用程序中使用springboardserver.framework的函数“Reboot()”，但是当我添加私有框架和springboardserver的头文件时，会出现错误。

reboot() 在 springboardserver.framework 中，关于 springboardserver.framework 函数的信息。 [http://iphonedevwiki.net/index.php/SpringBoard.app/MIG_subsystem](http://iphonedevwiki.net/index.php/SpringBoard.app/MIG_subsystem)

我想知道如何使用这样的功能。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T18:46:51.547

SpringBoardServices.framework 中有一个名为 SBReboot() 的函数（不确定函数参数）

# qt - QML：如何创建由图像制成的 3 状态自定义按钮？

> ID：10228783
> 
> 赞同：3
> 
> 时间：2012-04-19T13:08:17.917
> 
> 标签：qt, qml

所以我尝试：

```
 Rectangle {
       x: 617
       y: 450
   Image {
      id: rect
      source:  "buttons/GO/GO!-norm.png"
      smooth: true
      opacity: 1
      MouseArea {
          id: mouseArea
          anchors.fill: parent
          hoverEnabled: true         //this line will enable mouseArea.containsMouse
          onClicked: Qt.quit()
      }

      states:  [
           State {
               name: "mouse-over"; when: mouseArea.containsMouse
               PropertyChanges { target: rect; scale: 0.95; opacity: 0; }
               PropertyChanges { target: rect2; scale: 0.95; opacity: 1}
               PropertyChanges { target: rect3; scale: 0.95; opacity: 0}
           },

            State {
               name: "mouse-down"; when: mouseArea.pressedButtons
               PropertyChanges { target: rect; scale: 0.95; opacity: 0; }
               PropertyChanges { target: rect2; scale: 0.95; opacity: 0}
               PropertyChanges { target: rect3; scale: 0.95; opacity: 1}
           }
       ]

       transitions: Transition {
           NumberAnimation { properties: "scale, opacity"; easing.type: Easing.InOutQuad; duration: 500  }
       }
   }

   Image {
      id: rect2
      source:  "buttons/GO/GO!-over.png"
      smooth: true
      opacity: 0
      anchors.fill: rect

     }

   Image {
      id: rect3
      source:  "buttons/GO/GO!-down.png"
      smooth: true
      opacity: 0
      anchors.fill: rect

     }
   } 
```

但它只适用于过度\输出状态...如何让我的按钮有 3 个状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:23:39.467

我不完全确定这是否会发生，但有可能：当您将鼠标悬停在图像上时，它的不透明度设置为 0。[文档](http://qt-project.org/doc/qt-4.8/qml-item.html#opacity-prop)说：

1.  更改不透明度也会影响 Item 的子项。
2.  如果项目的不透明度设置为 0，则该项目将不再接收鼠标事件。

因此，当鼠标悬停时，`rect.opacity`设置为 0，`mouseArea`停止接收鼠标事件并且`mouseArea.pressedButtons`条件永远不会满足。您可以通过创建`mouseArea`的兄弟`Image`而不是其子项来避免这种情况。使用`Item`or`Rectangle`作为父项。

# php - 如何自动生成 Google DFP 代码？

> ID：10228785
> 
> 赞同：3
> 
> 时间：2012-04-19T13:08:19.963
> 
> 标签：php, wordpress, google-dfp, google-ad-manager

我正在构建一个使用 Google 的 DFP 广告服务系统的网站。由于我们为网站的多个版块、多个页面和文章定位了广告，因此我们拥有 30 多个广告单元，通常都具有相同的名称，例如：

ad_sports_top_banner_300x250 ad_home_skyscraper_720x90

等等

当我去 DFP 系统并要求生成代码时，它通常会吐出类似这样的内容以添加到：

```
<script type='text/javascript'>
googletag.cmd.push(function() {
googletag.defineSlot('/1234567/ad_home_skyscraper_728x90', [728, 90], 'div-gpt-ad-1234567890123-0').addService(googletag.pubads());
googletag.defineSlot('/1234567/ad_sports_top_banner_300x250', [300, 250], 'div-gpt-ad-1234567890123-1').addService(googletag.pubads()); 
```

和这样的东西添加到我想要添加的位置：

```
<div id='div-gpt-ad-1234567890123-0' style='width:728px; height:90px;'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1234567890123-0'); });
</script>
</div> 
```

据我所知，大多数事情都很明显，前 7 位数字是我的客户 ID 号，然后是广告名称，然后是 13 位广告 ID。

我有很多部分，对正文、头部等使用多个模板，所以与其进入每个部分并不得不在标题和正文上手动输入不同的代码，我更愿意使用部分名称以编程方式生成它们一个变量，像这样：

```
googletag.defineSlot('/1234567/ad_$SectionNameGoesHere_$TypeOfAdGoesHere', [$width, $height], 'div-gpt-ad-1234567890123-0').addService(googletag.pubads()); 
```

唯一似乎以不可预知的方式因标签而异的东西是似乎是标签 ID 的 13 位数字。每当我选择一组不同的广告时，谷歌都会给我一个不同的 13 位数字。我在网站上进行了测试，如果我每次都使用相同的号码，它就可以工作，但这感觉不对。

有谁知道这个数字代表什么？有没有办法可以计算它，或者忽略它？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T18:24:38.220

13 位数字严格来说是每个广告的唯一 ID。您可以随心所欲，并且不会干扰您的广告代码。

它严格用于识别页面上填充广告的 div 的 id。

IE：

```
<script type='text/javascript'>
googletag.cmd.push(function() {
googletag.defineSlot('/1234567/ad_home_skyscraper_728x90', [728, 90], 'div-728x90-1').addService(googletag.pubads());
googletag.defineSlot('/1234567/ad_sports_top_banner_300x250', [300, 250], 'div-300x250-1').addService(googletag.pubads()); 
```

需要：

```
<div id='div-728x90-1' style='width:728px; height:90px;'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-728x90-1'); });
</script>
</div>

<div id='div-300x250-1' style='width:300px; height:250px;'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-300x250-1'); });
</script>
</div> 
```

希望这可以帮助。

# sql - SQL 按位查询以提取多天的事件，同时遵守其他“过滤器”

> ID：10228793
> 
> 赞同：0
> 
> 时间：2012-04-19T13:08:56.110
> 
> 标签：sql, sql-server-2008

我正在尝试构建一个查询，该查询将基于一系列过滤器从数据库中提取事件：baseId、title、age 和它将发生的天数。

这是我到目前为止所得到的：

```
SELECT * FROM [Events]
WHERE BaseId = 574 AND Title LIKE '%occurs%' AND MinAge <= 5 AND MaxAge >= 5 
AND (FreqType = 8 AND (FreqInterval & 2) = 2) 
OR (FreqType = 8 AND (FreqInterval & 4) = 4) 
```

没有 OR 线，它拉得很好。使用 OR 行，它不再关心 BaseId、Title、MinAge 和 MaxAge 列。好吧，它确实如此，但只到 OR 所在的位置......然后它会在 OR 之后拉出所有匹配项（无论前面的 AND 语句如何）。

如何让查询按每列过滤，然后按我想要的每个 FreqInterval 过滤？我可能有不止 2、4... 可能有 1、2、4、8、16、32 或 64 的任意组合。

或者，有没有办法`AND (FreqType = 8 AND (FreqInterval & 6) = 6)`使用 FreqInterval 的 SUM？我不完全理解按位查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:22:50.447

添加括号：

```
SELECT * FROM [Events]
WHERE BaseId = 574 AND Title LIKE '%occurs%' AND MinAge <= 5 AND MaxAge >= 5 
AND 
(
   (FreqType = 8 AND (FreqInterval & 2) = 2) 
   OR (FreqType = 8 AND (FreqInterval & 4) = 4) 
) 
```

OR 的运算符优先级低于 AND，您应该在它们周围加上括号。您可以进一步简化它：

```
 (FreqType = 8 
       AND ( (FreqInterval & 2) = 2 OR (FreqInterval & 4) = 4) )
   ) 
```

根据您的建议，这几乎是正确的，但这是正确的：

```
 (FreqType = 8 
       AND (FreqInterval & 6) <> 0 ) 
```

顺便说一句，运算符优先级的另一个术语是运算符粘性，如果要显式编写原始查询，它是：

```
SELECT * FROM [Events]
WHERE 
( 
  BaseId = 574 AND Title LIKE '%occurs%' AND MinAge <= 5 AND MaxAge >= 5 
  AND (FreqType = 8 AND (FreqInterval & 2) = 2) 
)

OR 

(FreqType = 8 AND (FreqInterval & 4) = 4) 
```

这类似于`4 * 3 + 5`，乘法的优先级高于加法，因此 3 坚持 4 而不是 5，因此输出为`17`。如果你的目标是输出`32`，你应该明确坚持 3 到 5，在 3 和 5 周围加上括号，即`4 * (3 + 5)`

因此，在您使用 OR 的查询中，为了使它们粘在一起，请在它们周围加上括号。

尽管如此，就像你暗示的那样，我更喜欢这个ツ</p>

```
 (FreqType = 8 AND (FreqInterval & 6) <> 0 ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T13:14:30.703

这与按位逻辑无关。您只需要修复您的`WHERE`子句以使用括号使两个按位比较成为同一评估集的一部分：

```
...
AND (FreqType = 8 AND (FreqInterval & 2) = 2 OR 
                       FreqInterval & 4) = 4)) 
```

您也不需要检查`FreqType`两次，所以我为您简化了这一点。

`OR`意味着可以忽略任何先前的标准。将其与其他按位检查放在括号中意味着其中一个必须返回 true。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T13:15:02.577

我认为这是一个优先问题。你正在做的：

```
BaseId = 574 AND Title LIKE '%occurs%' AND MinAge <= 5 AND MaxAge >= 5 AND (FreqType = 8 AND (FreqInterval & 2) = 2) 
OR
(FreqType = 8 AND (FreqInterval & 4) = 4) 
```

尝试添加额外的 ()

```
WHERE BaseId = 574 AND Title LIKE '%occurs%' AND MinAge <= 5 AND MaxAge >= 5 
AND ((FreqType = 8 AND (FreqInterval & 2) = 2) OR (FreqType = 8 AND (FreqInterval & 4) = 4)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T13:16:16.167

```
SELECT * FROM [Events]
WHERE BaseId = 574 AND Title LIKE '%occurs%' AND MinAge <= 5 AND MaxAge >= 5 
AND ((FreqType = 8 AND (FreqInterval & 2) = 2) 
OR (FreqType = 8 AND (FreqInterval & 4) = 4)) 
```

# php - mysql 喜欢你和其他人

> ID：10228795
> 
> 赞同：0
> 
> 时间：2012-04-19T13:09:00.853
> 
> 标签：php, jquery, mysql, sql, ajax

我想知道如何做到这一点

![在此处输入图像描述](../Images/5ff7195c8bb25451b049577e09eaa382.png)

我的意思是“你和其他 19,389 人” 你如何从其他人中识别出**你**。如果用户登录并喜欢某个状态或喜欢某个状态或类似 facebook 的东西。我想抓住“你”的部分。但我似乎不明白它背后的逻辑。

我正在使用 php 和 jquery。你如何在sql中解决这个问题？还是真的是sql？您如何从其他人中定义用户？

如果我做错了或问错了，请告诉我正确的方法和答案，我非常需要你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T13:19:47.923

只需一个查询，您就可以这样做：

```
SELECT COUNT(user_id) AS everybody, SUM(user_id = "your_user_id") AS you FROM fb_likes WHERE post_id = 4; 
```

然后如果`you`大于零打印（实际上它必须是 0 或 1）：

```
You and [everybody - you] others like this. 
```

别的

```
[everybody] like this. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T13:13:41.873

首先，当您单击“喜欢”时，在分配给该帖子的数据库中会出现一个条目。因此，假设该帖子的 ID 为 1234567890，因此您将在数据库表中看到类似的内容：

```
PostID      UserID
1234567890  54543534
1234567890  75231415
1234567890  78653421
1234567890  99653221

// Query example
SELECT COUNT(*) FROM LikeTable WHERE PostID = 1234567890
// Return 4 
```

首先你算一下，这里有 4 个。

之后，检查当前登录用户的 UserID 是否在数据库中。

*   是的。他喜欢过。
*   不，他不喜欢。

假设我们是用户 54543534。**我**在数据库中，所以我喜欢这篇文章。

```
// Query example
SELECT PostID FROM LikeTable WHERE PostID = 1234567890 AND UserID = 54543534 LIMIT 1
// Return 1 
```

假设我们是用户 8748977777。**我**不在数据库中，所以我不喜欢这篇文章。

```
// Query example
SELECT PostID FROM LikeTable WHERE PostID = 1234567890 AND UserID = 8748977777 LIMIT 1
// Return 0 
```

所以我说 IF/ELSE 语句是：

```
IF I liked 
    You and COUNT - 1 others like this.
ELSE
    COUNT like this. Click to like. 
```

编辑 ：

我认为这样的事情会让这份工作：

```
SELECT COUNT(PostID) AS All, SUM(UserID = X) AS Liked FROM LikedTable WHERE PostID = X 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T13:15:19.407

查询他人：

```
SELECT COUNT(userid) FROM likeTable WHERE postid = $postid 
```

为您查询：

```
SELECT COUNT(userid) FROM likeTable WHERE postid = $postid AND userid = $_SESSION['userid'] 
```

然后做：

```
if ($youCount == 1) {
    echo "Liked by you and " . $othersCount - 1 . " others";
}
else {
    echo "Liked by $othersCount people";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T13:14:31.780

我对最佳数据库模式了解不多，但我认为这是 Facebook 术语中的每个点赞都是 FB 社交对象图上的一个节点。这可能意味着每个点赞都是某个表上的单个数据库记录。要计算喜欢的数量，您只需`COUNT`对与帖子相关的喜欢记录进行操作。

现在如果是这样的话，那么在谁执行它的类似记录中包含一些识别信息是微不足道的。从头到尾，这将是用户 PK 上的 FK。

因此，如果您在 Facebook 上登录，它就会知道您是谁以及您关联的用户 ID 是什么。对于它聚合喜欢的每个帖子，它可以将您的用户 ID 与喜欢的用户 ID FK 进行反核，并确定您实际喜欢哪些帖子。因此，它可以有条件地显示`You and 14,000 others like this`或`14,001 like this`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T13:15:07.637

努力理解这个问题，但我认为你可能一次尝试做太多事情。

要么运行两个查询，一个来检查“你”（你的会话 ID 等）是否在记录这个的表中，或者拉出全部并使用 in_array 或类似的东西来查看“你”是否在列表中。

# linux - TCP：从服务器端模拟 EINPROGRESS (linux)

> ID：10228799
> 
> 赞同：1
> 
> 时间：2012-04-19T13:09:11.737
> 
> 标签：linux, sockets, networking, tcp, raw-sockets

如何模拟来自非阻塞客户端的连接以遇到 EINPROGRESS 错误？我可以从服务器做些什么来将此类错误返回给客户端（即调整一些 tcp 计时器、原始套接字服务器等。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:00:18.900

当连接到 localhost TCP 总是立即连接，因此`connect()`不返回`EINPROGRESS`.

`connect()`您可以通过“假装”返回`EINPROGRESS`并等待客户端套接字准备好写入（就像在 之后连接）来模拟客户端`EINPROGRESS`。事实上，一些库只是为了非阻塞而这样做，`connect()`以避免立即连接和慢速连接的两种不同的代码路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-14T18:43:27.017

我最近不得不做类似的事情，我遇到了这个线程。我使用 iptable 规则来解决我的问题。EINPROGRESS 不是服务器返回的东西。如果连接不能立即完成，则连接的返回码为 -1 并且错误号设置为 EINPROGRESS。一旦 connect 发出 SYN 数据包，您的连接将完成（假设您正在连接到一个有效的 IP 地址，并且网络上的其他一切都正常）。

如果您可以在客户端更改 iptables，那么模拟 EINPROGRESS 的最简单方法是创建一个 iptable 规则以将传出的 SYN 数据包丢弃到服务器的 IP 地址和端口。

iptables -A OUTPUT -p tcp --tcp-flags SYN,ACK,FIN,RST SYN -d serverip --dport serverport -j DROP

请记住，这仅在您不希望连接完成时才有效。

# jetty - 在某个端口运行嵌入式码头服务器的实例

> ID：10228811
> 
> 赞同：0
> 
> 时间：2012-04-19T13:10:03.393
> 
> 标签：jetty, embedded-jetty

嵌入式码头服务器在特定端口号上运行。我想让那个正在运行的实例停止

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:32:59.773

查看 STOP.PORT 机制或关闭处理程序。

[http://wiki.eclipse.org/Jetty/Howto/Secure_Termination](http://wiki.eclipse.org/Jetty/Howto/Secure_Termination)

或者

[http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/server/handler/ShutdownHandler.html](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/server/handler/ShutdownHandler.html)

在关闭处理程序 javadoc 链接中有示例嵌入式用法。

干杯

# node.js - 控制台中的堆栈跟踪和异常

> ID：10228812
> 
> 赞同：1
> 
> 时间：2012-04-19T13:10:05.640
> 
> 标签：node.js, error-handling, express

如何获得与我相同的堆栈**跟踪**和**异常**

```
app.use(express.errorHandler({
    showStack: true, 
    dumpExceptions: true
})); 
```

但仅在控制台中？

`console.trace(err)`没有给出与我从上面得到的结果相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-17T09:30:59.503

`console.trace()`打印它被命中的堆栈跟踪，而不是你传递它的错误的跟踪。您可以使用 simple 查看错误的堆栈跟踪`console.log(err)`，它将输出异常和堆栈跟踪。如果您只需要查看堆栈跟踪，您可以`console.log(err.stack)`

# hibernate - 扩展域类会导致奇怪的表格布局和不可访问的字段

> ID：10228813
> 
> 赞同：0
> 
> 时间：2012-04-19T13:10:10.317
> 
> 标签：hibernate, grails, grails-domain-class

我有一个域类用户定义为

```
class User extends SecUser{
    String fullName
    String address
    String city
    String country
    String role
    String email
    String schoolName
    String gradeLevel

    static constraints = {
        fullName(nullable:true)
        username(blank:false, unique:true)
        password(size:6..20, blank:false)
        //passwordRepeat(validator:)
        email(email:true, nullable:true, unique:true)
        address(nullable:true)
        city(nullable:true)
        country(nullable:true)
        phone(nullable:true) //10 digit phone number, no spaces
        role(blank:false, inList:['Teacher', 'Donor', 'Both'])
        schoolName(nullable:true)
        gradeLevel(nullable:true, inList:['K', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', 'College'])

    }
} 
```

SecUser 是通过执行 spring security grails 插件的 quickstart 脚本实现的一个类。其定义为

```
class SecUser {

    transient springSecurityService

    String username
    String password
    boolean enabled
    boolean accountExpired
    boolean accountLocked
    boolean passwordExpired

    static constraints = {
        username blank: false, unique: true
            password blank: false
    }
} 
```

通常，我认为生成的数据库表将是一个 USER 表，上面列出的字段作为列，我可以使用 UserController 方法来实现 CRUD。问题是，永远不会创建用户表，而是使用上述字段实例化 SEC_USER 表。

我的问题与创建新用户和填充相关字段有关。由于 USER 表不存在，我无法从 User 域对象插入记录。

另一方面，我可以在 SEC_USER 表中插入记录，但字段仅限于 SecUser 域类中定义的字段。如果我确实尝试通过新的 SecUser 实例在 User 的特定列中插入一个项目，我会收到一个 property not defined 错误消息。

这有点令人沮丧，因为为了完成用户注册过程，我需要访问、插入和更新相关字段，但是如何在没有访问权限的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:53:39.817

我相信您正在寻找的是每个子类映射的表，而不是每个层次结构的默认表。

默认的 table-per-hierarchy 会使处理数据库变得困难 其他缺点是列不能在 db 级别应用“Not Null”约束。

grails 在 5.5.2.3 Inheritance Strategies 中有一些关于此的文章。

如果您将以下内容添加到您的域类中，您将获得每个子类的表

```
 static mapping = {
    tablePerHierarchy false
 } 
```

# email - 邮件服务器的 SPF 记录

> ID：10228814
> 
> 赞同：0
> 
> 时间：2012-04-19T13:10:14.297
> 
> 标签：email, dns, text-files, spf, mx-record

我使用不同的服务器将邮件发送到我的邮件列表。我想在我的域中添加一条 SPF 记录，以显示不同服务器的 IP 被授权发送邮件（以及默认服务器）。

示例中发送电子邮件的服务器是 1.2.3.4，主域为 test.co.uk。

到目前为止我有`v=spf1 mx a ip4:1.2.3.4/32 mx:test.co.uk ?all"`，这对我想要的有用吗？

编辑：我将使用 sendmail 发送邮件。SPF 记录将增加进入收件箱的邮件百分比，因此我们可以在不久的将来强制执行 SPF。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T09:01:12.017

尝试使用[http://www.mtgsy.net/dns/spfwizard.php](http://www.mtgsy.net/dns/spfwizard.php)等在线工具生成 SPF 记录。如果您用 Google 搜索“SPF 记录检查器”，您会发现许多网站甚至可以验证您的域的 SPF 记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T11:19:18.080

假设您的域是 test.co.uk。这`mx`使得`mx:test.co.uk`. 指定 IP`ip4:1.2.3.4`与 相同`ip4:1.2.3.4/32`。那就足够了：

```
v=spf1 mx a ip4:1.2.3.4 ?all 
```

确保使用 SPF 检查器验证您的 SPF 记录。试试下面的一个。 [http://spf.myisp.ch](http://spf.myisp.ch) 它做了一些相当广泛的测试。

# c# - 如何使用 activeMQ NMS 和 C# 实现同步请求响应应用程序？

> ID：10228815
> 
> 赞同：2
> 
> 时间：2012-04-19T13:10:14.750
> 
> 标签：c#, .net, jms, activemq, nms

我可以使用生产者将消息发送到队列（'test.queue'）（我也可以在另一端收到相同的消息）但是我无法使用消费者.receive（）从回复目的地（'确认'）接收回复消息方法。没有错误。但消费者没有收到任何消息。请让我摆脱它。代码如下： -

```
 class Program
{
    private const String URI = "tcp://localhost:61616";
    private const String DESTINATION = "test.queue";
    static void Main(String[] args)
    {
        ConnectionFactory connectionFactory = new ConnectionFactory(URI);
        connectionFactory.ClientId = connectionFactory.ClientIdGenerator.GenerateId(); ;
        IMessageProducer prod;
        String s = String.Empty;
        while (s.ToLower() != "exit")
        {
            s = Console.ReadLine();
            ISession ses = connectionFactory.CreateConnection().CreateSession();
            prod = ses.CreateProducer();
            IMessage msg=ses.CreateTextMessage(s);
            NmsDestinationAccessor destinationResolver = new NmsDestinationAccessor();
            IDestination destination = destinationResolver.ResolveDestinationName(ses, DESTINATION);
            IDestination replyDestination = destinationResolver.ResolveDestinationName(ses, "confirm");
            IMessageConsumer consumer = ses.CreateConsumer(replyDestination);
            prod.Send(destination, msg);
            IMessage im= consumer.Receive();
            ses.Commit();
            Console.WriteLine(im.ToString());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T14:16:09.830

我不是 activeMQ 专家，但我知道在大多数 JMS 实现中（我认为 NMS 几乎遵循 1:1）你需要在你的连接上调用 Start() 以允许开始消费

# iphone - iPhone：比较当前日期和距当前日期六十天之间的日期的问题

> ID：10228816
> 
> 赞同：0
> 
> 时间：2012-04-19T13:10:16.933
> 
> 标签：iphone, objective-c, nsdate, nsdateformatter

我需要检查一个事件日期，它应该在当前日期和从现在起 60 天之间。使用了下面的代码，但它不能正常工作。请注意，我正在从我的服务器获取这样的事件字符串 - “2012-04-14T16:50:02Z”。

```
 // current date
double currDateInMilliSecs = [NSDate timeIntervalSinceReferenceDate] * 1000;    
NSLog(@"currDateInMilliSecs: %f", currDateInMilliSecs);

// sixty days
double sixtydaysvalue = 60.0 * 24.0 * 3600.0 * 1000.0;
NSLog(@"sixtydaysvalue: %f", sixtydaysvalue);
// add current date + sixt days
double sixtyDaysMilliSecsFromCurrDate = currDateInMilliSecs + sixtydaysvalue;
NSLog(@"sixtyDaysMilliSecsFromCurrDate: %f", sixtyDaysMilliSecsFromCurrDate);

// check does the event date between current date + 60 days
NSDateFormatter *df = [[NSDateFormatter alloc] init];
//[df setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];
[df setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss'Z'"];
//[df setDateFormat:@"yyyy-MM-dd HH:mm:ss"];

// [eventDict objectForKey:@"begin_at"] gives date string like this "2012-04-14T16:50:02Z"  for ex.
NSDate *eventdate = [df dateFromString:[eventDict objectForKey:@"begin_at"]];

NSTimeInterval nowSinceEventDate = [eventdate timeIntervalSince1970];
NSLog(@"nowSinceEventDate: %f", nowSinceEventDate);
double eventDateInMilliSecs = nowSinceEventDate * 1000;
NSLog(@"eventDateInMilliSecs: %f", eventDateInMilliSecs);

// this is not working as expected    
if ( eventDateInMilliSecs<sixtyDaysMilliSecsFromCurrDate && eventDateInMilliSecs>currDateInMilliSecs )
{

}
else
{
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:21:15.190

您正在尝试解决这个问题，就好像它是 Java 一样，但事实并非如此。相反，尝试使用 Cocoa Touch 框架中的东西。由于您的计算相当简单，您可以使用日期来完成它们，但使用 NSCalendar 和 NSDateComponents 可以很容易地完成更复杂的事情。

一个简单的解决您的问题的方法（这里我们假设`eventdate`是您使用格式化程序创建的日期）：

```
NSDate* now = [NSDate date];
NSDate* sixtyDaysFromNow = [now dateByAddingTimeInterval:(60 * 60 * 24 * 60)];
if( [eventDate earlierDate:now] == now && [eventDate laterDate:sixtyDaysFromNow] == sixtyDaysFromNow ) {
  // the event date is within scope
} else {
  // the event date is outside stop
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:15:28.113

使用我的函数来比较它在我的项目上的工作日期

我希望它对你有帮助

```
-(BOOL)date:(NSDate*)date isBetweenDate:(NSDate*)beginDate andDate:(NSDate*)endingDate

{

    if ([date compare:beginDate] == NSOrderedAscending)
        return NO;

    if ([date compare:endingDate] == NSOrderedDescending) 
        return NO;

    return YES;
} 
```

# css - MVC3 中的 WebGrid 对齐与 RAZOR

> ID：10228819
> 
> 赞同：1
> 
> 时间：2012-04-19T13:10:35.680
> 
> 标签：css, asp.net-mvc-3, webgrid, razor-grid

我想在 MVC 3 的 WEBGRID 中的所有列中设置不同的宽度和对齐方式。这意味着在上面的代码中我现在有 5 列我想设置所有标题的不同对齐方式和宽度。

**下面是我的代码：**

```
@{WebGrid grid = new WebGrid();
  if (@Model.VendorItemsList != null)
  {
      grid = new WebGrid(source: @Model.VendorItemsList, ajaxUpdateContainerId:         "gridSearch", canSort: true, rowsPerPage: Model.PageSize);
  }
}
<div id="gridSearch" class="tableGrid">
    @{            
        @grid.GetHtml(
            mode: WebGridPagerModes.All,
            columns: grid.Columns(
            grid.Column("VendorItemName", header: @GeneralResource.Vendor + " " + @GeneralResource.Item + " " + @GeneralResource.Name),
            grid.Column("ItemName", header: @GeneralResource.Item),
            grid.Column("ItemCategoryName", header: @GeneralResource.Category),
            grid.Column("VendorName", header: @GeneralResource.Vendor)
            ))
        }
    }
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:43:47.017

由于没有控制宽度的内置方法，因此您必须使用 CSS 样式。首先为标题和正文行提供类：

```
@grid.GetHtml(
    headerStyle: "header_row", 
    rowStyle: "item_row"
    // ...
) 
```

然后使用 nth-child 伪类选择器设置它们的样式，例如：

```
tr.header_row th:nth-child(1) { width: 100px; }
tr.header_row th:nth-child(2) { width: 75px; }
tr.header_row th:nth-child(3) { width: 50px; }

tr.item_row td:nth-child(1) { width: 100px; }
tr.item_row td:nth-child(2) { width: 75px; }
tr.item_row td:nth-child(3) { width: 50px; } 
```

# android - 调用 finish() 不会停止代码的执行

> ID：10228827
> 
> 赞同：2
> 
> 时间：2012-04-19T13:10:56.977
> 
> 标签：android, android-activity

我有两个活动，我们称它们为 A 和 B。

A 是可以从应用程序中的两个位置启动的活动。我希望能够知道 A 是从位置 1 还是位置 2 开始的，所以在 BI 调用 A 中是这样的：

```
Intent i = new Intent(B.this, A.class);
i.putExtra("code", code);
startActivityForResult(i, code); 
```

（`code`是一个值为 1 的 int。）

在 AI 的 onCreate 方法中这样做：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    Intent i = getIntent();
    Bundle extras = i.getExtras();
    if(extras != null)
    {
        int code = extras.getInt("code");
        if(code == 1)
        {
            ClearReleasesCache(); // just a private method of A
            setResult(1, i);                
            finish();
            return;
        }
    }

    // do everything else as usual
    setContentView...
} 
```

现在，问题是这样的（我在调试时注意到了）：

当我从 B 启动 A 时，我希望 A**完成**，如代码所示。当我从另一个不是 B 的活动中启动 A 时，我希望它像往常一样运行（确实如此）。但是在这里什么`finish()`也不`return`做 - 我可以看到在调试返回调用后，它会跳回到 onCreate，它不会关闭活动。

也就是说，`onActivityResult()`在 B 中永远不会被调用。

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:22:12.587

它怎么能在创建之前完成..一旦当前执行完成，它就会完成..不是突然发生在某事中间......这也很有意义..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:24:14.583

尝试设置这个`setResult(RESULT_OK, i);`，当我传递一个与 RESULT_OK 不同的 resultCode 时，我遇到了类似的问题，在这种情况下，onActivityResult() 从未被调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:17:57.463

您还可以在finish() 之后添加return 语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T14:21:57.627

您看起来正确 - 您是否检查过您的父 Activity 以查看它是否可能会重新启动带有 null 附加功能的 Activity？

您还可以稍微调整逻辑以进行修复：

```
Intent i = getIntent();
Bundle extras = i.getExtras();
if(extras != null && extras.getInt("code") == 1) {
    ClearReleasesCache(); // just a private method of A
    setResult(1, i);                
    finish();
    return;
} else {

    // do everything else as usual
    setContentView...
} 
```

但是，如果您来自父（调用）活动的逻辑不正确，您很可能会得到相同的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T13:15:44.077

```
 if(extras == null || extras.getInt("code") != 1) {
         // do everything else as usual
 } else
       finish(); 
```

你不能只切换if条件吗？

编辑：但你确定 return 语句不起作用吗？

# c# - 在系统托盘中创建通知图标并使用 .net 设置创建向导添加启动快捷方式

> ID：10228830
> 
> 赞同：0
> 
> 时间：2012-04-19T13:11:04.563
> 
> 标签：c#, .net, installation

我进行了很多搜索，但仍然找不到正确的解决方案。

我想使用 .net 设置向导创建设置，并在设置向导中添加 2 个复选框。

第一个复选框将要求用户“在启动时添加程序”。如果选中，则会将软件添加到启动中。

第二个复选框将要求“创建系统托盘通知图标”。如果选中，它将在系统托盘中创建一个通知图标。通知图标不仅在应用程序运行时必须永久显示）。

我知道它与自定义操作有关，但仍然无法弄清楚。请为此提供一些文章或代码并提供适当的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:02:21.757

实际上，自定义操作是执行此操作的正确位置。这是我在安装过程中用于创建两个自定义复选框的代码。

```
[RunInstaller(true)]
    public class DeploymentManager : Installer{

  public override void Install(IDictionary stateSaver) {
     base.Install (stateSaver);

const string DESKTOP_SHORTCUT_PARAM = "DESKTOP_SHORTCUT";
const string QUICKLAUNCH_SHORTCUT_PARAM = "QUICKLAUNCH_SHORTCUT";
const string ALLUSERS_PARAM = "ALLUSERS";

        // The installer will pass the ALLUSERS, DESKTOP_SHORTCUT and QUICKLAUNCH_SHORTCUT   
        // parameters. These have been set to the values of radio buttons and checkboxes from the
        // MSI user interface.
        // ALLUSERS is set according to whether the user chooses to install for all users (="1") 
        // or just for themselves (="").
        // If the user checked the checkbox to install one of the shortcuts, then the corresponding 
        // parameter value is "1".  If the user did not check the checkbox to install one of the 
        // desktop shortcut, then the corresponding parameter value is an empty string.

        bool allusers = true; // Context.Parameters[ALLUSERS_PARAM] != string.Empty;
  bool installDesktopShortcut = true; //Context.Parameters[DESKTOP_SHORTCUT_PARAM] != string.Empty;
        bool installQuickLaunchShortcut = true;// Context.Parameters[QUICKLAUNCH_SHORTCUT_PARAM] != string.Empty;

if (installDesktopShortcut){
    // If this is an All Users install then we need to install the desktop shortcut for 
   // all users.  .Net does not give us access to the All Users Desktop special folder,
   // but we can get this using the Windows Scripting Host.
   string desktopFolder = null;
         if (allusers){
       try{
    // This is in a Try block in case AllUsersDesktop is not supported
    object allUsersDesktop = "AllUsersDesktop";
    WshShell shell = new WshShellClass();
         desktopFolder = shell.SpecialFolders.Item(ref allUsersDesktop).ToString();
}
catch {}
  }
if (desktopFolder == null)
desktopFolder = Environment.GetFolderPathEnvironment.SpecialFolder.DesktopDirectory);

CreateShortcut(desktopFolder, ShortcutName, Path.Combine(TargetAssemblyFolder, TargetAssembly), ShortcutDescription, Path.Combine(TargetAssemblyFolder, "your.ico"));
        }

        if (installQuickLaunchShortcut){
            CreateShortcut(QuickLaunchFolder, ShortcutName, ShortcutFullName, ShortcutDescription, Path.Combine(TargetAssemblyFolder, "your.ico"));
        }
    }

private void CreateShortcut(string folder, string name, string target, string description, string targetIcon){
string shortcutFullName = Path.Combine(folder, name + ".lnk");

try{
    WshShell shell = new WshShellClass();
    IWshShortcut link = (IWshShortcut)shell.CreateShortcut(shortcutFullName);
    link.TargetPath = target;
    link.Description = description;
    FileInfo fi = new FileInfo(targetIcon);

    link.IconLocation = Path.Combine(fi.Directory.FullName, fi.Name);
    link.Save();
}catch (Exception ex){
    MessageBox.Show(string.Format("The shortcut \"{0}\" could not be created.\n\n{1}", shortcutFullName, ex.ToString()),
    "Create Shortcut", MessageBoxButtons.OK, MessageBoxIcon.Information);
}
}
} 
```

获得此代码后，您可以将自定义操作添加到安装程序的安装自定义操作区域。

安装过程的通知代码类似，但需要添加到注册表中。

# php - 在 PHP 中将 HTML 转换为 PNG 或 JPG

> ID：10228832
> 
> 赞同：3
> 
> 时间：2012-04-19T13:11:09.067
> 
> 标签：php

> **可能重复：**
> [将 html 渲染为 png（服务器端）](https://stackoverflow.com/questions/2651173/rendering-html-to-png-server-side)

我有一个 DIV 元素，其中一些图像位于 DIV 元素中。我想用它制作一个 JPG 或 PNG 文件，这样人们就可以将其保存为他们的 Facebook 时间线封面图像。我找到了很多脚本和教程，但没有什么能真正满足我的需求。这真的不是一件很难的事情吗？

我已经让我的主机安装 iMagick。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:15:07.163

您应该通过 JavaScript 获取位置（我猜您正在使用 js 来设置 div 中图像的位置）并将它们发送到 PHP 脚本。借助[PHP GD 手册](http://php.net/manual/en/ref.image.php)，您可以轻松生成 png oder jpeg 图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:18:40.560

I had to achieve the same thing, only for something else than Facebook and I used [webkit2png](https://github.com/paulhammond/webkit2png/blob/master/webkit2png)

I save the HTML code on a temporary HTML file, then I run the python webkit2png command on that temporary HTML file which converts it to PNG. It requires xvfb (apt-get install xvfb)

I then use the following command in PHP:

```
exec('xvfb-run --server-args="-screen 0, 1024x768x24" python webkit2png.py --log=/tmp/webkit2pnglog.log --output=' .$fullUploadPath . ' ' . $fullPath); 
```

Where $fullUploadPath is the location of the target file and $fullPath is the location of the temporary HTML file.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:17:34.660

你可以试试

[WKHTMLTO图像](http://github.com/antialize/wkhtmltopdf)

# facebook - 无法访问为我的 FB 页面创建的应用程序

> ID：10228833
> 
> 赞同：1
> 
> 时间：2012-04-19T13:11:11.280
> 
> 标签：facebook

我有两个页面和两个页面上创建的应用程序。尽管两个页面上的应用程序都可以正常工作，但我无法访问一页上的应用程序来编辑它们。我需要在时间线切换后更新它们。仅显示为其中一个页面创建的 1 个应用程序。我其他页面上的其他 4 个应用程序似乎消失了。如果我以自己的身份登录 FB 以访问开发人员页面，我只会看到一个应用程序。直接登录到受影响的页面并尝试访问 Dev 页面将我直接重定向回我的页面。我有几个小时无法访问的工作！来自 FB 的帮助几乎毫无用处，数小时的搜索也一无所获。任何人都可以建议吗？应用程序存在是因为我创建了它们！如果没有人可以提供建议，有谁知道我可以去哪里获得 FB 的建议和回复？谢谢

# batch-file - 批处理：从文件中读取文件名，搜索它们，将找到的路径添加到文件

> ID：10228838
> 
> 赞同：0
> 
> 时间：2012-04-19T13:11:25.710
> 
> 标签：batch-file, for-loop, find, cmd

我正在尝试编写脚本，该脚本将从 csv 文件中读取第一个值（即每行的第一列），包含文件名。然后在某个位置搜索此文件，并将找到的每个路径添加到 csv，作为新的最后一列。我有下一个脚本，它只是尝试搜索文件。但它不能正常工作。好像我在这一行有空的 %reportname% ：

```
 FOR /F "tokens=*" %%N IN ('dir /b /A:-D /s %reportname%') 
```

完整脚本：

```
setlocal enabledelayedexpansion
set currentdir=%CD%
set grspath=\Sources\ROL\Kesko\grs13\
set filename=sqrscripts.csv
set tmpfilename=scripts.new
SET reppath=""
SET reportname=""

IF NOT "%1"=="" grspath=%1

FOR /F "tokens=1,2,3,4,5,6,7,8* delims=;" %%a in (%filename%) do (

    SET tempstr=%%a;%%b;%%c;%%d;%%e;%%f;%%g;
    SET reportname=%%a

    echo Serching !reportname! in %grspath% ...

    cd %grspath% 
    FOR /F "tokens=*" %%N IN ('dir /b /A:-D /s %reportname%') DO (
        IF NOT "%reppath%"=="" (SET reppath=%reppath%,%%N) ELSE (SET reppath=%%N)
        )
    cd %currentdir%

    echo Found: %reppath%
) 
```

你能看看这个，也许你会发现有问题？

我的输入：

```
E:\tmp>(
SET tempstr=art.rep;1;2;3;4;5;6;7
 SET reportname=art.rep
 echo Serching !reportname! in e:\Sources\ ...
 cd e:\Sources\
 FOR /F "tokens=*" %N IN ('dir /b /A:-D /s ""') DO (IF NOT """" == "" (SET reppa
th="",%N )  ELSE (SET reppath=%N ) )
 cd E:\tmp
 echo Found: ""
) 
```

然后可能像这样的行：

```
E:\Sources\>(IF NOT """" == "" (SET reppath="",E:\Sources\somefolders\somefile.someext )  ELSE (SET reppath=E:\Sources\somefolders\somefile.someext ) )
Found: "" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:43:21.437

解决了。% 替换为 ! 在内部块中：

```
 cd %grspath% 
    FOR /F "tokens=*" %%N IN ('dir /b /A:-D /s !reportname!') DO (
        IF NOT !reppath!==!! (
                SET reppath=!reppath!;%%N
                echo !reppath! - new one !!!
                ) ELSE (
                SET reppath=%%N
                echo !reppath! - new one !!!
                )       
        )
    cd %currentdir%
    echo !reppath! - new one !!!!
    IF NOT !reppath!==!! SET tempstr=!tempstr!;!reppath!

    echo !tempstr!>>%tmpfilename% 
```

# .net - 如何在 MVC3 控制器中处理存储库对象

> ID：10228840
> 
> 赞同：3
> 
> 时间：2012-04-19T13:11:30.313
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-3

几乎我所有的控制器都有一个由初始化程序实例化的存储库，如下所示：

```
public class CompanyController : CtsController
{
    ICompanyRepository _repository = new CompanyRepository(); 
```

我想尝试确保我的存储库始终得到妥善处理，尤其是当我在其中进行模拟时，我相信在这里必须小心。但是，我不想总是`using`在每个操作方法中将每个存储库调用包装在一个新循环中。

MVC3 如何处理控制器实例的生命周期和处置，如果我在它们上实现 Disposable 并在控制器的析构函数中处置我的存储库就足够了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T13:18:53.010

处理此问题的最佳方法是使用依赖注入（也称为控制反转或 IOC）和自定义 IControllerFactory，以便自动创建和处置您的存储库。这是一篇解释如何做到这一点的文章：

[ASP.NET MVC 中的依赖注入：控制器](http://lostechies.com/jimmybogard/2010/04/27/dependency-injection-in-asp-net-mvc-controllers/)

对于 MVC3，您可能会发现一些文章建议使用 IDependencyResolver，但您应该谨慎，因为该接口没有 Release 回调并且会导致内存泄漏（取决于您决定使用哪个 IOC 容器）。

如果您是 Dependency Injection 的新手，请在网络上搜索一些关于其背后想法的文章。

如果您不想切换到使用 IOC，则可以使用覆盖 OnActionExecuted 方法并处理所有 IDisposables 的基本控制器。例如：

```
abstract class DisposingController : Controller
{
    protected IList<IDisposable> Disposables;

    protected DisposingController()
    {
        Disposables = new List<IDisposable>();
    }

    protected override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        foreach (var disposable in Disposables)
        {
            disposable.Dispose();
        }

        base.OnActionExecuted(filterContext);
    }
} 
```

然后在你的控制器中：

```
var myRepository = new MyRepository();
Disposables.Add(myRepository); 
```

# sql-server-2008 - 从应用程序外访问数据库

> ID：10228846
> 
> 赞同：1
> 
> 时间：2012-04-19T13:11:46.403
> 
> 标签：sql-server-2008

我在共享服务器上有一个网站。它使用 Sql server 作为数据库（也是共享的），其帐户仅限于执行程序。现在我想知道是否任何有权访问 sql server 的人都可以在没有我的凭据的情况下读取和操作我的数据（通过使用他们自己的）？如果是这样，我如何跟踪登录到我的数据库的用户，更重要的是阻止他们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:27:13.797

有两种方法可以使用 SQL 登录或使用 Windows 身份验证连接到 SQL。这些是您登录到服务器的信息。然后要连接到数据库，您必须被授予对数据库的权限。因此，只要您的登录名是唯一被授予数据库权限的登录名，那么您就无需担心。

根据您对数据库的权限，可以在数据库中设置角色并将用户分配给角色。这样，任何人都可以在您的数据库中执行任何操作的唯一方法是，如果他们是您设置的角色的成员（或者他们在服务器上拥有 SA 帐户，或者在数据库上设置了 dbo 权限）。

同样，根据您在服务器上拥有的权限，您可以设置跟踪（google sp_trace_create 和 sp_trace_setevent）来捕获登录到您的数据库的登录信息，该登录信息会写入服务器的硬盘驱动器，然后您可以使用 fn_trace_gettable 查询此数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:26:12.777

问题超出了执行权限和日志访问...

底线是您和您的数据受主机支配。如果他们可以信任并且有能力，那么您的数据应该是安全的。但是，如果您不确定，或者**如果您存储的数据太有价值而无法冒险**，您唯一的选择是加密数据，以便从中发现任何有用的信息，并确保您有备份，或者找到不同的主机谁将*提供*适当的保障。

# google-sheets - 电子表格公式将所有匹配项收集到一个单元格中

> ID：10228847
> 
> 赞同：5
> 
> 时间：2012-04-19T13:11:47.223
> 
> 标签：google-sheets, google-sheets-formula, array-formulas

我有一个如下所示的电子表格：

```
A             B              C          D                
FirstName     SurnameName    Address    UniqueFamilyId      
---------------------------------------------------------
Abe           Black          1 Elm Ave  :Black:1 Elm Ave:
Joe           Doe            7 Park Ln  :Doe:7 Park Lane:
Jack          Black          1 Elm Ave  :Black:1 Elm Ave:
Bill          Doe            2 5th Ave  :Doe:2 5th Ave:
Harry         Doe            7 Park Ln  :Doe:7 Park Lane:
Sam           Doe            7 Park Ln  :Doe:7 Park Lane: 
```

我创建了 UniqueFamilyId 列以从本质上唯一地标识每个家庭。

我正在尝试制定一个公式，它将所有住在同一地址的人的名字收集到一个单元格中 - 即一个将填写 E 列（AllFirstNames）的公式。

```
A             B              C          D                    E
FirstName     SurnameName    Address    UniqueFamilyId       AllFirstNames
-------------------------------------------------------------------------------
Abe           Black          1 Elm Ave  :Black:1 Elm Ave:    Abe Jack 
Joe           Doe            7 Park Ln  :Doe:7 Park Lane:    Joe Harry Sam
Jack          Black          1 Elm Ave  :Black:1 Elm Ave:    Abe Jack
Bill          Doe            2 5th Ave  :Doe:2 5th Ave:      Bill
Harry         Doe            7 Park Ln  :Doe:7 Park Lane:    Joe Harry Sam
Sam           Doe            7 Park Ln  :Doe:7 Park Lane:    Joe Harry Sam 
```

我怀疑混合使用 vlookup 和数组公式可以解决问题，但如果我必须使用 Excel VBA 或 Google Apps 脚本，我不介意。你能帮我实现这个吗，拜托。

我猜这是某种形式，在 D 列（UniqueFamilyId）中查找所有相同的值，然后使用 vlookup 来获取名字，所有这些都在一个数组公式中将它们全部收集起来。

PS我已经计算出如何计算每个地址有多少人 - 公式很简单

```
=COUNTIF(D$1:D$65536,D1) 
```

但我希望收集所有这些名字，而不仅仅是一个计数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T12:06:03.247

在 Google 电子表格上，您可以使用这样的 ArrayFormula：

```
=ArrayFormula(concatenate(rept(A:A&" ";D:D=D2))) 
```

只需将其粘贴到单元格上，`E2`然后复制下来。

[编辑]

多玩一点，我知道可以在一个单元格（E2）上完成所有操作。即无需复制下来。当然，这要复杂得多:)但是你去：

```
=ArrayFormula(transpose(split(concatenate(transpose(if(D2:D=transpose(D2:D);A2:A&" ";"")&if(row(D2:D)=rows(D2:D)+1;char(9);"")));char(9)))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T14:07:40.020

使用 VBA 函数将允许您在一个单元格中汇总您的匹配项。我已经多次使用下面的函数来连接一组值——这是内置函数`CONCATENATE()`无法做到的。

**步骤 1：**
按 Alt+F11 在 Excel 中打开 VBA 编辑器窗格。插入一个新模块并粘贴此代码以获得自定义功能。

```
Public Function CCARRAY(rr As Variant, sep As String)
'rr is the range or array of values you want to concatenate.  sep is the delimiter.
Dim rra() As Variant
Dim out As String
Dim i As Integer

On Error GoTo EH
rra = rr
out = ""
i = 1

Do While i <= UBound(rra, 1)
    If rra(i, 1) <> False Then
        out = out & rra(i, 1) & sep
    End If
    i = i + 1
Loop
out = Left(out, Len(out) - Len(sep))
CCARRAY = out
Exit Function

EH:
rra = rr.Value
Resume Next

End Function 
```

此功能将允许您创建以逗号分隔的列表来汇总您拥有的标签数据。

**第 2 步：**
在`E2`您的表格中，粘贴以下公式，然后按`Ctrl`+ `Shift`+ `Enter`。这会将其作为数组公式输入。

```
=CCARRAY(IF(D2=$D$2:$D$7,$A$2:$A$7)," ") 
```

只需填写该列，就可以了。

# html - 如何在 ibook 作者中单击按钮/图标上调用/打开 html 小部件？

> ID：10228853
> 
> 赞同：0
> 
> 时间：2012-04-19T13:12:03.927
> 
> 标签：html, ibook-author

在 iBook Author 中，我有一个 HTML 小部件，当从页面单击按钮时，我想打开它。

有这种可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:06:41.393

使用看起来像按钮的图像，而不是您的默认预览或预览图像。单击它会打开您的 html 小部件...

# visual-studio - 如何使用 MSBuild 收集 NUnit 报告？

> ID：10228864
> 
> 赞同：1
> 
> 时间：2012-04-19T13:12:47.170
> 
> 标签：visual-studio, msbuild, nunit

我最近将 NUnit 引入了一个 Visual Studio C# 项目。项目文件夹结构看起来像

```
- project root
-- applications (rich client interface, web interface, small tools)
-- components   (business logic)
-- vendor       (3rd party components)
-- tests        (Nunit tests) 
```

对于应用程序或组件下的每个 Visual Studio 项目“MyProject”，在测试中都有一个名为“MyProject.Test”的相应项目。当我介绍 NUnit 测试时，我在每个 .Test.csproj 文件中添加了以下内容：

```
<Target Name="AfterBuild">
  <CreateItem Include="$(TargetPath)">
    <Output TaskParameter="Include" ItemName="MyProjectTests" />
  </CreateItem>
  <!-- Create folder for test results -->
  <MakeDir Directories="$(OutDir)\TestResults" />
  <!-- Run tests-->
  <NUnit Assemblies="@(MyProjectTests)" ToolPath="..\vendor\NUnit\bin" OutputXmlFile=".\TestResults\MyProject.Test.Results.xml" WorkingDirectory="$(OutDir)" />
  <!-- Create HTML report -->
  <Xslt Inputs="$(OutDir)\TestResults\MyProject.Test.Results.xml" Xsl="$(MSBuildCommunityTasksPath)\NUnitReport.xsl" RootTag="Root" Output="$(OutDir)\TestResults\MyProject.Test.Results.html" />
</Target> 
```

这在从 Visual Studio 中构建解决方案时以及在使用 MSBuild CLI 的构建服务器上都可以正常工作。

该方法的剩余不便之处在于，它将测试报告留在了每个测试项目输出文件夹的 TestResults 文件夹中，但在我的解决方案的主输出文件夹中没有任何内容。所以，我的问题是：

在解决方案/启动项目的输出文件夹中收集生成的 NUnit html 报告的首选方法是什么？我应该在哪个 .csproj 文件中放置哪些 MSBuild 指令？我刚刚开始使用 MSBuild，但我无法找出最佳实践......

它必须同时在 Visual Studio 和 MSBuild CLI 中工作，但我想这应该不是问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:19:55.163

如果您有构建服务器，一种好方法是设置一个站点，其中配置了一个虚拟路径到您的测试文件夹。然后，您公司的任何人都可以浏览诸如[http://build.companydomain.local/yourapp/nunitreports/ 之](http://build.companydomain.local/yourapp/nunitreports/)类的东西，托管在构建服务器的 IIS 上（如果您的构建服务器有一个）。

我正在用我的报道报告来做这件事。任何人都可以随时浏览它。我希望它有帮助！

# sql - 为什么临时表有效但永久表无效？

> ID：10228878
> 
> 赞同：4
> 
> 时间：2012-04-19T13:13:33.230
> 
> 标签：sql, sql-server, crystal-reports-2008, business-objects

根据公司政策，我为创建一个永久表的报表编写了一个 SQL 查询，然后执行一系列插入和更新以获取所有数据。它在我机器上的 SQL Server Management Studio 和 Crystal Reports 2008 中运行良好。但是，当我使用 SAP BusinessObjects 中央管理控制台安排它在服务器上运行时，它失败并显示错误“未准备关联语句”。我发现将这个永久表更改为临时表可以使查询工作。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:56:15.897

一些研究表明，有时会发送此错误而不是真正的错误。报告它的其他人谈论外键和（我也假设）重复键错误。

我要检查的事情：

*   您的永久表是否有任何可能违反的唯一约束？或者任何外键约束？
*   您是否在创建表后在表上创建索引？
*   您是否在此永久表上创建任何视图？
*   如果在作业运行之前表已经存在，会发生什么？
*   如果作业失败，表会发生什么？
*   是否有任何可能涉及额外临时表或永久表的中间步骤（例如在存储过程中）？

ETA：还要检查永久表属于什么模式：它通常是用“dbo”创建的吗？您是否明确指定？是否有可能存在权限问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:12:36.890

假设您确实需要一个常规表，为什么不能创建一次永久表，而不是每次运行查询时创建它？每次查询运行时重新创建常规用户表似乎并不正确。但是为了使它工作，您可以尝试在单独的批处理或查询中重新创建表（例如，将 GO 放入脚本中，将其拆分为单独的查询）。

关于它发生的原因，我正在考虑语句缓存。服务器编译查询并将结果存储一段时间，以防必须再次运行相同的查询。因此，我推测它会尝试运行已编译的查询，该查询引用您已经删除并以相同名称重新创建的表。名称相同，但实际上它是一个新表。您可以通过这种方式在服务器中遇到一些错误。只是一个猜测，它可能是不同类型的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T02:56:15.890

在没有看到代码的情况下这是一个猜测，但是由于您*每次*运行报告时都在创建一个永久表，所以我假设您必须在某个时候删除该表？（或者随着时间的推移，你会建立很多表。）

我建议考虑几个角度：

1) 如果您担心并发/锁定问题等，请确保为表格添加前缀（可能通过会话 ID 或其他内容），以便每个报告运行都有一个专属于自己的表格。

2）如果您最后要删除表格，请调整您的逻辑以保留表格。编写在您（重新）开始操作时丢弃的代码。报告可能会紧贴在桌子上，而您正在过早地销毁它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T13:16:00.047

这通常是一个通用错误。您是否能够在服务器上以计划运行的帐户运行它？这很可能是权限错误或约束问题。

# c++ - Qt：如何使半透明、无窗口、无铬的窗口可拖动？

> ID：10228880
> 
> 赞同：0
> 
> 时间：2012-04-19T13:13:43.037
> 
> 标签：c++, qt, window, qml

我有一个基于半透明图像的窗口：

```
import QtQuick 1.1
import QtWebKit 1.1
  Image {
       source: "qrc:/assets/bg.png"
  } 
```

在主窗口中有这样的东西

```
#include "mainwindow.h"

    MainWindow::MainWindow(QWidget *parent) :
        QMainWindow(parent)
    {
      setAttribute(Qt::WA_TranslucentBackground);
      setStyleSheet("background:transparent;");

      /* turn off window decorations */
      setWindowFlags(Qt::FramelessWindowHint);

      ui = new QDeclarativeView;
      ui->setSource(QUrl("qrc:/assets/ui.qml"));\

      setCentralWidget(ui);
    }

    MainWindow::~MainWindow()
    {
        delete ui;
    } 
```

和

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QtDeclarative/QDeclarativeView>

namespace Ui {
    class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private:
    QDeclarativeView *ui;
};
 #endif // MAINWINDOW_H 
```

我想知道如何使我的窗口可以在屏幕上拖动（用户按下图像和药物窗口......）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:07:22.247

重新实现`mousePressEvent()`并`mouseReleaseEvent()`知道用户何时按住鼠标，然后重新实现`mouseMoveEvent()`，如果用户按住鼠标，则移动小部件。

```
// **Untested code**
protected:
    virtual void mousePressEvent(QMouseEvent *event) { _mouseIsDown = true; }
    virtual void mouseReleaseEvent(QMouseEvent *event) { _mouseIsDown = false; }
    virtual void mouseMoveEvent(QMouseEvent *event) { if(_mouseIsDown) { move(event->pos() + globalPos()); } } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:13:44.610

```
#include <QMouseEvent>
#include <Qpoint>

class MainWindow : public QMainWindow{
    ...

    void mousePressEvent(QMouseEvent *event);
    void mouseMoveEvent(QMouseEvent *event);
    QPoint LastPoint;
    QPoint LastTopLeft;

    void mousePressEvent(QMouseEvent *event)
    {
        if (event->button() == Qt::LeftButton) {
             QPoint Point=event->globalPos();
             LastTopLeft=this->frameGeometry().topLeft();
             LastPoint=Point;
        }
    }

    void mouseMoveEvent(QMouseEvent *event)
    {
        if ((event->buttons() & Qt::LeftButton)) {
             const QPoint Point=event->globalPos();
             QPoint offset=Point-LastPoint;
             this->move(LastTopLeft+offset);
    }
    }
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-16T18:48:59.537

在我删除前两个声明后，它对我有用。

# c# - 经典 asp 如何访问 COM-Visible 类引用的 .NET dll？

> ID：10228881
> 
> 赞同：0
> 
> 时间：2012-04-19T13:13:45.267
> 
> 标签：c#, dll, com, asp-classic

我有一个 COM 可见的 dll “COMInterface.dll”，它部署到现有应用程序的文件夹中。我创建了一个测试工具来验证这个 dll 的功能。

但是，当我尝试使用经典 asp 调用此 dll 的方法之一时，我收到如下消息：

> MyCompany.MyProject.COMInterface (0x80070002) 无法加载文件或程序集 'MyCompany.Framework, Version=2.6.4202.14897, >Culture=neutral, PublicKeyToken=null' 或其依赖项之一。该系统找不到指定的文件。

我的“COMInterface.dll”引用了许多其他 dll，例如我公司的标准框架、日志记录类等。“Framework”就是这些 dll 之一。

asp 页面将在哪里寻找这些 dll？我猜我的工具可以工作，因为它是从程序文件夹中运行的，而 asp 页面位于 IIS 网站中。

我需要在这里使用 GAC 注册吗？我希望不会，因为我需要在那里部署很多 dll，我希望扩展应用程序而不必影响用户机器上的核心安装。

提前感谢您的问题和建议。

[编辑] 我应该指出可以很好地创建对象。这是导致问题的引用 dll 的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:32:50.597

作为一般答案，您可以使用 Fusion Log Viewer 来确定程序集活页夹搜索了哪些路径。

有关此工具的信息，请参阅[http://msdn.microsoft.com/en-us/library/e74a18c4.aspx](http://msdn.microsoft.com/en-us/library/e74a18c4.aspx)。

Fusion Log Viewer 将列出绑定器探测到的所有路径。如果你把你的程序集放到这些路径中的任何一个中，它就会被找到。我不确定这些路径中的任何一条是否*适合您的场景。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:56:54.057

当您使用`Regasm`注册dll时，您需要使用`/Codebase`开关以确保可以找到dll。

# android - 使用 Inputmethod 连接视图

> ID：10228885
> 
> 赞同：0
> 
> 时间：2012-04-19T13:14:05.073
> 
> 标签：android, view, android-softkeyboard, custom-view

我通过扩展 View 类创建了一个自定义视图。单击时，我希望弹出软键盘，就像使用编辑文本一样（即打开预测文本并能够选择所有可用的输入法）。

我试过让视图扩展一个`onclicklistener`，当被调用时，它`InputMethodManager`用来显示软键盘，然后它又`Onkeydown`用来拦截按键。这很笨重并且不起作用，因为：

1.  我只能在标准文本和数字输入法之间切换。没有其他输入法起作用（如果用户有一个输入法，我需要能够切换到日语输入法，就像编辑文本一样）。

2.  没有预测文本，这对于程序来说是绝对必要的，因为它需要用户输入日文汉字。

有没有办法在标准视图和 IME 之间建立类似于编辑文本的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:38:56.887

要显示预测文本，您应该设置系统可以接受的 EditorInfo 类型。像这样的东西：

```
@Override
public InputConnection onCreateInputConnection(EditorInfo outAttrs) {
       // TODO Auto-generated method stub
       // Set your EditorInfo type in the onCreateInputConnection
       outAttrs.actionLabel = null;
       outAttrs.inputType = InputType.TYPE_CLASS_TEXT;
       outAttrs.imeOptions = EditorInfo.IME_ACTION_NEXT;
       return new MyBaseInputConnection(this, false);
} 
```

# eclipse - Eclipse 共享项目选项？

> ID：10228893
> 
> 赞同：2
> 
> 时间：2012-04-19T13:14:46.320
> 
> 标签：eclipse, svn, eclipse-plugin, subversive

我刚刚打开我的 Eclipse 并出现以下错误：

```
SVN: '0x00000000: Open Project' operation finished with error: 0x00000000: Unable connect to 'my_project' project.
Please check that SVN meta-information exists and its format is supported by the current SVN plug-in version.
If so, it is possible that project working copy is relocated outside plug-in control.
At the current moment project will be automatically disconnected from source control.
0x00000000: Unable connect to 'my_project' project.
Please check that SVN meta-information exists and its format is supported by the current SVN plug-in version.
If so, it is possible that project working copy is relocated outside plug-in control.
At the current moment project will be automatically disconnected from source control. 
```

我想将项目重新连接到 SVN，并在网上搜索并发现可能的解决方案是：

> 右键项目->团队->分享项目

并按照提示进行操作：

1.  我有 2 个选项 cvs ？svn？-> 我选择了 svn 并点击了下一步。
2.  选择存储库位置（使用现有存储库位置）。我选择了一个 n 单击下一步。

但是，在第 2 步中，它在顶部显示：

> 该向导将帮助您首次与 SVN 存储库共享文件。您的项目将自动导入到 SVN 存储库中。

有没有人尝试过重新连接到 SVN 存储库？恐怕不会开始将项目签入该位置并覆盖存储库中的代码。

如果有人确定这不会覆盖或将任何内容签入存储库，而只会重新连接它，我只会使用共享项目选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T12:21:19.847

我尝试了同样的事情。在第 2 步，它应该说：

> 项目已经配置了 SVN 存储库信息。

在这种情况下，它不会覆盖或签入任何内容。只是重新连接。您的情况似乎有所不同，因为它是第一次说共享。我认为它可能会覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:48:59.947

当我将 Eclipse 升级到 Juno 时，我遇到了同样的问题。我使用 Tortoise 将我的工作副本升级到 SVN 1.7，然后在 Eclipse 中使用“Share Project...”，它适用于我的所有项目。

# f# - F# 中仿函数的替代方案

> ID：10228894
> 
> 赞同：2
> 
> 时间：2012-04-19T13:14:48.113
> 
> 标签：f#, functor

我想写以下内容：

```
module A =
  type Token 
  let foo Token = 

module B =
  type Token 
  let foo Token = 

let run (m : module) =
  m.B
  |> m.foo 
```

基本上是模块中通用的功能。有没有办法在 F# 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T23:06:58.270

正如 kvb 在评论中指出的那样，如果没有现实的例子，很难给出答案，因为最好的方法取决于你实际想要做什么。

在这个简单的示例中，我可能会使用 F# 接口来表示`Token`和添加`Foo`为成员。假设`Foo`返回一个`int`，你可以这样写定义：

```
type Token = 
  abstract Foo : unit -> int 
```

然后，您可以使用类（非常重量级）或使用对象表达式来实现不同的标记。例如：

```
let tok = { new Token with
              member x.Foo () = 42 } 
```

与您的函数对应的代码`run`只是`Foo`成员的调用：`tok.Foo()`

# php - 如何控制这个 foreach 循环

> ID：10228896
> 
> 赞同：0
> 
> 时间：2012-04-19T13:14:56.413
> 
> 标签：php

我使用这个 foreach 来构建 youtube 视频库，但我想为每行显示 3 个视频..所以如何指定循环 3 次然后移动到下一行并循环 3 次...我不需要构建所有循环在一条线上..感谢您的帮助

```
table id="tblThumbsLayout" cellpadding="0" cellspacing="6">

<tr>

   <?php  foreach ($vcats as $vcat) { ?>

<td class="tdImg">
    <div>

      <?php  echo '<iframe class="youtube-player" type="text/html" width="  200 " height=" 100 " src="http://www.youtube.com/embed/' . $vcat['Video']['link'] . '"></iframe>' ;?>
        <div class="text"><?php echo  '<b>'.  $vcat['Video']['title'].'</b>' ; ?></div>
    </div>
</td>
<?php  } ?>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:19:48.093

试试这个：

```
 <?php  
        $i = 1; 
        foreach ($vcats as $vcat) { 
        if($i%3 == 0){
           echo "</tr><tr>";
        }

   ?>

    <td class="tdImg">
        <div>

          <?php  echo '<iframe class="youtube-player" type="text/html" width="  200 " height=" 100 " src="http://www.youtube.com/embed/' . $vcat['Video']['link'] . '"></iframe>' ;?>
            <div class="text"><?php echo  '<b>'.  $vcat['Video']['title'].'</b>' ; ?></div>
        </div>
    </td>

    <?php $i++; } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:22:43.320

我会为每个项目添加一个 div id=video 并在该 div id #video 的样式表中使用 display: inline;

然后将 div 的宽度设置为每行允许 3 个。

这样你就不必太担心循环了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:20:20.450

保持循环迭代的计数。然后使用取模运算符检查此迭代除以 3 的余数是否为 0。如果是，则添加断行或新表行以移至下一行。

像这样：

```
<table id="tblThumbsLayout" cellpadding="0" cellspacing="6">

<tr>

   <?php  
       $counter = 1;
       foreach ($vcats as $vcat) {
   ?>

<td class="tdImg">
    <div>

      <?php  echo '<iframe class="youtube-player" type="text/html" width="  200 " height=" 100 " src="http://www.youtube.com/embed/' . $vcat['Video']['link'] . '"></iframe>' ;?>
        <div class="text"><?php echo  '<b>'.  $vcat['Video']['title'].'</b>' ; ?></div>
    </div>
</td>
<?php
       if($counter % 3 == 0){
          echo '<br/>';
        }
       ++$counter;
    }
?>
</tr>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T13:20:22.397

```
<table id="tblThumbsLayout" cellpadding="0" cellspacing="6">

<tr>
   <?php $counter = 1; $last = count($vcats)-1; ?>
   <?php  foreach ($vcats as $vcat) { ?>

<td class="tdImg">
    <div>

      <?php  echo '<iframe class="youtube-player" type="text/html" width="  200 " height=" 100 " src="http://www.youtube.com/embed/' . $vcat['Video']['link'] . '"></iframe>' ;?>
        <div class="text"><?php echo  '<b>'.  $vcat['Video']['title'].'</b>' ; ?></div>
    </div>
    <?php if($counter%3==0 && $counter != $last): ?>
        <br>
    <?php $counter++;  ?>
    <?php endif; ?>
</td>
<?php  } ?>
</tr>
</table> 
```

# programming-languages - 如何将 PHP 连接到 SQL Server？

> ID：10228899
> 
> 赞同：3
> 
> 时间：2012-04-19T12:58:52.407
> 
> 标签：programming-languages, php, sql, sql-server

我正在尝试使用 PHP 连接到 SQL Server，我正在学习这种语言。

我已经读过可能 ODBC 连接是最好的，我已经创建了我的 ODBC，但我不知道如何从 PHP 中使用它，到目前为止我正在尝试这个：

```
$server = 'MyServer\MyDB';

// Connect to MSSQL
$link = mssql_connect=($server, 'MyUser', '');

if (!$link) {
    die('You cannot connect to MSSQL');
} 
```

运行时，我收到以下消息：

> *未找到对象，错误 404。*

但是 ODBC 测试很好。

SQL Server 位于同一台 PC 中，所以也许我不需要输入 IP。

有没有人可以帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:19:22.650

看来您可能有错字。[这是文档中](http://php.net/manual/en/function.mssql-connect.php)的一个示例：

```
// Server in the this format: <computer>\<instance name> or 
// <server>,<port> when using a non default port number
$server = 'KALLESPC\SQLEXPRESS';

// Connect to MSSQL
$link = mssql_connect($server, 'sa', 'phpfi');

if (!$link) {
    die('Something went wrong while connecting to MSSQL');
} 
```

您错误地放置了`=`after `mssql_connect`，试图进行分配（就解释器而言）。

至于在PHP 中*使用*MSSql，请查看相关的[mssql 函数](http://www.php.net/manual/en/ref.mssql.php)。接下来，您将[选择您的数据库](http://www.php.net/manual/en/function.mssql-select-db.php)，然后开始[查询它](http://www.php.net/manual/en/function.mssql-query.php)。

# wpf - 添加选项卡时 TabControl 宽度增加

> ID：10228900
> 
> 赞同：0
> 
> 时间：2012-04-19T13:15:01.590
> 
> 标签：wpf, .net-4.0, tabcontrol, scrollviewer

我的应用程序 UI 分为两部分。左侧是导航菜单，右侧是显示所选菜单内容的查看区域。现在，菜单之一是报告。我正在使用带有标题和内容模板的 Tabcontrol。模板具有作为 DataType 的 ViewModel 和作为 UserControl 的相应 View 的内容。此 TabControl 位于滚动查看器内，该滚动查看器设置为水平和垂直对齐以进行拉伸。

用户控件在 Grid 内托管 ContentPresenter，该 Grid 绑定到 ReportHost，该 ReportHost 有一个报告查看器作为子项。我正在使用这个 ReportViewer 来生成报告。

当用户打开报表时，它会在新选项卡中打开。它工作正常，直到选项卡的数量使得选项卡标题包含在查看区域内。但是一旦添加了更多选项卡，它就会导致 tabcontrol 宽度拉伸，导致选项卡的内容区域拉伸，并且 contentpresenter 也拉伸导致出现水平滚动。这最终导致报告被拉伸，并且由于某种原因，我不知道，报告与 UI 的导航区域重叠，就好像它不是 UI 的一部分而是重叠了它。整个报告在滚动时一直浮动在“查看区域”和“导航”菜单的顶部。

我可以通过向 ScrollViewer 提供 MaxWidth 来修复它，但我不想这样做。我希望 tabcontroll 或 Scrollviewer 的宽度完全基于可用的视图区域来决定。如何在不使用固定宽度的情况下通过代码或 XAML 执行此操作。

我不确定我是否能够解释这种情况。如果需要更多信息或澄清，请告诉我。我很乐意提供详细信息。

编辑：添加代码以获取信息。

```
<DataTemplate x:Key="TabContent" DataType="{x:Type VM:ReportViewModel}">
  <View:Report/>
</DataTemplate>
<DataTemplate x:Key="TabHeader" DataType="{x:Type VM:ReportViewModel}">
  <ContentPresenter Content="{Binding Path=TabHeader}"
    VerticalAlignment="Center"/>
</DataTemplate>

<ScrollViewer HorizontalAlignment="Stretch" VerticalAlignment="Stretch" 
    HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
  <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
  <Grid.RowDefinitions>
    <RowDefinition Height="Auto"/>
    <RowDefinition Height="*"/>
    <RowDefinition Height="Auto"/>
  </Grid.RowDefinitions>
  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="*"/>
  </Grid.ColumnDefinitions>
    <TextBlock HorizontalAlignment="Left" TextWrapping="Wrap"
        Text="Reports" VerticalAlignment="Top" Margin="10,13,0,0" 
        FontSize="18.667" FontFamily="Segoe UI" Foreground="White"/>
    <Border BorderThickness="0" Margin="0,50,0,0" 
        Background="{DynamicResource Brush_HeaderNew}" Height="50" Width="Auto" 
        VerticalAlignment="Top"/>
    <TabControl ItemsSource="{Binding ReportItems}" Grid.Row="1" Margin="0,20,0,0" 
        SelectedItem="{Binding SelectedReportItem}"
        ContentTemplate="{StaticResource TabContent}" 
        ItemTemplate="{StaticResource TabHeader}"
    />
  </Grid>
</ScrollViewer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:34:30.583

`ScrollViewer`向它的孩子展示了一个无限大的区域来设置自己，因为它的理由是，如果它比`ScrollViewer`自身可用的空间大，它就可以提供滚动。因为你的在两个方向上都启用了滚动，这意味着它`TabControl`可以在任何一个方向上任意扩展，并且它不会聪明到知道它在 a 内`ScrollViewer`并且你希望标签不利用这个虚拟空间。

从事情的声音来看，您可能需要考虑`ScrollViewer`在其中移动，`TabControl`以便只有选项卡的内容是可滚动的，而不是整个集合。您应该可以通过修改选项卡内容模板来做到这一点。

# c - 在 C 中读取字符时打印

> ID：10228902
> 
> 赞同：3
> 
> 时间：2012-04-19T13:15:04.033
> 
> 标签：c, stream, newline, printf, carriage-return

我正在尝试编写一个简单的小代码片段来响应箭头键按下。我知道 up 由 ^[[A 表示，并且我有以下代码来检查该序列：

```
 while( 1 )
     {
         input_char = fgetc( stdin );

         if( input_char == EOF || input_char == '\n' )
         {
             break;
         }

         /* Escape sequence */
         if( input_char == 27 )
         {
             input_char = getc( stdin );

             if( input_char == '[' )
             {
                 switch( getc( stdin ) )
                 {
                     case 'A':
                     printf("Move up\n");
                     break;
                 }
             }
         }
     } 
```

每当我点击“向上”时，转义序列 (^[[A) 就会出现在屏幕上，但“向上移动”直到我点击回车才会出现。

最终目标是用其他数据替换当前行上的文本，所以我尝试这样做

```
printf("\r%s", "New Text"); 
```

代替“上移”，但直到按下回车后它仍然不显示。

我在字符中阅读的方式有问题吗？

谢谢！

*编辑*快速说明，它适用于 *nix 系统。

***解决方案*** 感谢大家的指点。我选择了 stepanbujnak 的解决方案，因为它相当简单。我注意到的一件事是，修改字符串（退格等）的键的许多行为与您的预期不同。它将通过在线上的任何内容（包括 printf 的东西）退格，我必须考虑到这一点。在那之后，让其余的人排队并不算太糟糕:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T13:22:44.263

`stdin``getc(stdin)`是行缓冲的，因此`fgetc(stdin)`在您按下之前看不到这些字符，`ENTER`请参阅此[链接](http://www.lix.polytechnique.fr/~liberti/public/computing/prog/c/C/FUNCTIONS/getchar.html)了解更多详细信息

**编辑**：如果你不想进入`ncurses`还有其他有用的方法，比如将终端设置为原始模式等来克服这个限制。检查这个不错的SO帖子

[从标准输入中捕获字符而无需等待按下回车键](https://stackoverflow.com/questions/421860/c-c-capture-characters-from-standard-input-without-waiting-for-enter-to-be-pr)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T13:45:35.103

您实际上只需要使用**termios禁用行缓冲**

这是一个例子：

```
#include <stdio.h>
#include <stdlib.h>
#include <termios.h>

int main() {
  struct termios old_term, new_term;
  char c;

  /* Get old terminal settings for further restoration */
  tcgetattr(0, &old_term);

  /* Copy the settings to the new value */
  new_term = old_term;

  /* Disable echo of the character and line buffering */
  new_term.c_lflag &= (~ICANON & ~ECHO);
  /* Set new settings to the terminal */
  tcsetattr(0, TCSANOW, &new_term);

  while ((c = getchar()) != 'q') {
    printf("You pressed: %c\n", c);
  }

  /* Restore old settings */
  tcsetattr(0, TCSANOW, &old_term);

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T13:29:40.857

查看`curses`用于捕获转义序列（例如箭头键）的库。

[http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/keys.html](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/keys.html)

在大多数系统键（如箭头键、主页、向上翻页、中断等）上都是转义键，它们使用转义序列来识别自己。像 0x1B + 序列这样的东西，如果你想原始捕获它，你需要直接从文件描述符中读取输入并监听序列。上面的替代方法是使用 ncurses。

在使用 curses 之外，以下说明了如何使用系统调用来完成此操作，例如`read`

```
#include <stdio.h>
#include <sys/types.h>
#include <unistd.h>
int main(int argc, char *argv[])
{
    int fd = 0x0; /* STDIN */
    size_t bytes_read;
    char buf[12];

    bytes_read = read(fd, buf, 3);
    printf("%02x %02x %02x\n", buf[0], buf[1], buf[2]);
    return 0;
} 
```

按UP后输出

```
Lukes-ASA-Macbook:tmp luke$ gcc -o out test.c
Lukes-ASA-Macbook:tmp luke$ ./out
^[[A
1b 5b 41 
```

这应该让你上路。

您可以缓冲输入查找`0x1b`，然后启用解析标志来查找字符的转义序列，以代替单字符解析。

# openrasta - 在 OpenRasta 中访问编码流

> ID：10228903
> 
> 赞同：1
> 
> 时间：2012-04-19T13:15:05.267
> 
> 标签：openrasta

在将编码流发送到客户端之前，我需要访问 OpenRasta 中的编码流。我尝试使用 PipelineContributor 并在 KnownStages.IEnd 之前注册它，在 KnownStages.IOperationExecution 之后和 KnownStages.AfterResponseConding 之后尝试，但在所有情况下 context.Response.Entity 流为空或空。

有谁知道我该怎么做？

另外，我想在相当早的时候找出请求的编解码器，但当我在 KnowStages.ICodecRequestSelection 之后注册时，它返回 null。我只是觉得我错过了这些管道贡献者的一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:24:38.193

如果不自己编写[`Codec`](https://github.com/openrasta/openrasta/wiki/Codecs)（顺便说一句，这真的很容易），我不知道有一种方法可以将实际的字节流发送到浏览器。我这样做的方式是在已知阶段`ICommunicationContext.Response.Entity`之前序列化。`IResponseCoding`伪代码：

```
class ResponseLogger : IPipelineContributor
{
    public void Initialize(IPipeline pipelineRunner)
    {            
        pipelineRunner
            .Notify(LogResponse)
            .Before<KnownStages.IResponseCoding>();
    }

    PipelineContinuation LogResponse(ICommunicationContext context)
    {
        string content = Serialize(context.Response.Entity);

    }

    string Serialize(IHttpEntity entity)
    {
        if ((entity == null) || (entity.Instance == null))
            return String.Empty;

        try
        {
            using (var writer = new StringWriter())
            {
                using (var xmlWriter = XmlWriter.Create(writer))
                {
                    Type entityType = entity.Instance.GetType();
                    XmlSerializer serializer = new XmlSerializer(entityType);
                    serializer.Serialize(xmlWriter, entity.Instance);
                }

                return writer.ToString();
            }
        }
        catch (Exception exception)
        {
            return exception.ToString();
        }
    }
} 
```

这`ResponseLogger`是以通常的方式注册的：

```
ResourceSpace.Uses.PipelineContributor<ResponseLogger>(); 
```

如前所述，这不一定为您提供发送到浏览器的确切字节流，但它足以满足我的需求，因为发送到浏览器的字节流基本上只是相同的序列化实体。

通过编写自己的编解码器，您可以使用不超过 100 行的代码来利用该`IMediaTypeWriter.WriteTo()`方法，我猜这是您的字节传输到云端之前的最后一道防线。在其中，您基本上只需执行以下简单操作：

```
public void WriteTo(object entity, IHttpEntity response, string[] parameters)
{
    using (var writer = XmlWriter.Create(response.Stream))
    {
        XmlSerializer serializer = new XmlSerializer(entity.GetType());
        serializer.Serialize(writer, entity);
    }
} 
```

如果您不是直接`IHttpEntity.Stream`写入写入 a`StringWriter`并`ToString()`对其执行操作，您将拥有序列化实体，您可以在将其写入输出流之前记录并执行任何您想做的事情。

虽然上述所有示例代码都基于 XML 序列化和反序列化，但无论您的应用程序使用何种格式，都应适用相同的原则。

# design-patterns - 批处理和业务层通信

> ID：10228915
> 
> 赞同：3
> 
> 时间：2012-04-19T13:15:29.300
> 
> 标签：design-patterns, domain-driven-design, spring-batch

我正在使用 Spring 批处理设计批处理应用程序，其中具有以下架构（层）：

*   我放置所有spring批处理代码（读取文件，处理和写入）的顶级模块。这个顶级模块特定于文件的某种格式。所以，我将来可能会有一个新的并行模块，能够读取/处理/写入新格式。与格式无关，文件的每一行对应于要执行的特定操作。例如，每一行可以表示“将行项目 X 添加到订单 Y”的操作。因此，对于每一行，在完成读取和处理后，我使用一个自定义的 ItemWriter 来调用紧接其下层的所需操作。
*   实现不同批处理操作的业务逻辑层。这些操作中的每一个都是使用域层对象实现的。例如，“添加订单项；X 到订单 Y”操作将通过使用 OrderRepository 检索订单然后调用订单的 addLineItem 方法来实现。
*   我拥有所有域对象的域层。按照前面的示例，我有 Order 和 LineItem 实体。

我的问题是：

*   是否有最佳实践（可能是特定的设计模式）用于顶级模块和业务逻辑层之间的接口？
*   假设每个文件只包含一个订单的行。编写每一行的幼稚方法是每行调用一个批处理操作。在这种情况下，对于每一行，都会调用 OrderRepository 以检索订单，然后保存订单。我正在考虑另一种按块编写行的方法（就像我们使用 Spring 批处理一样）。写操作采用的参数类型为 List。按照第二种方法，我需要向业务操作传递将块添加到相关订单所需的数据。使用哪种形式在顶层模块和业务逻辑层之间传递信息？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T08:21:44.457

> 是否有最佳实践（可能是特定的设计模式）用于顶级模块和业务逻辑层之间的接口？

afaik 没有真正的最佳实践，这与已知的最佳实践不同，但批次通常需要解决性能要求/约束​​，甚至更经常产生性能问题，所以我的最佳实践是：

*   考虑数据和数据流
*   多少数据？
*   瓶颈是什么？（处理与写作，通常是写作部分）

给你一些关于writer和业务层的接口的启发

1.  使用[ItemWriterAdapter](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/item/adapter/ItemWriterAdapter.html)，它可以使用 businessLayer.addOrderItem 方法
2.  编写自己的包装器
3.  将业务层移入编写器，很少真正需要重用**批量优化**的业务层

我会选择选项 2，因为在批处理上下文中我想使用列表和批处理 SQL

像往常一样，这取决于您的具体要求:-)

**ItemWriter 包装器示例**

```
public class SimpleItemWriter implements ItemWriter<SimpleItem> {

    @Override
    public void write(List<? extends SimpleItem> items) throws Exception {        
        // do something, e.g. delegate to another spring bean
    }
} 
```

**ItemWriterAdapter 配置示例**

```
<bean id="sample-item-writer-adapter" class="org.springframework.batch.item.adapter.ItemWriterAdapter">
    <property name="targetObject" ref="businessLayerBean" />
            <property name="targetMethod" value="doSomething"
</bean>

<step id="splitFilesStep">
     <tasklet>
         <chunk 
             reader="itemReader" 
             writer="sample-item-writer-adapter" 
             commit-interval="5">
         </chunk>
     </tasklet>
 </step> 
```

# python - 在 Python 中计算长度为 M 的第 N 个序列

> ID：10228917
> 
> 赞同：1
> 
> 时间：2012-04-19T13:15:33.137
> 
> 标签：python, recursion, set, generator, sequence

我正在编写一个用于验证的库/实用程序。我将有一组元素和一个以某种顺序使用它们的被测系统。该集合代表所有可能的输入，系统将接收这些元素的有限序列。

由于有限序列的集合是无限的，我不打算计算一个集合的所有序列，而是设想使用 python 生成器来完成以下任务：

```
def seq(s): # s is a set
  length = 0
  nth = 0
  # r = calculate nth sequence of length
  # if there are no more sequences of length, length += 1
  # else n += 1, yield r 
```

我最终会将其扩展到单射和双射序列，但现在集合的元素可以出现任意次数。

生成器是解决这个问题的最佳方法吗？使用这样的生成器会消除递归带来的任何简单性吗？任何人都可以向我指出可能对我有帮助的任何 itertools（或其他模块）捷径吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:25:11.243

听起来您正在寻找`itertools.product`. 我相信这会满足您的要求：

```
def seq(s):
    length = 1
    while True:
        for p in itertools.product(s, repeat=length):
            yield p
        length += 1 
```

现在您可以执行以下操作：

```
>>> zip(range(10), seq(set((1, 2, 3))))
[(0, (1,)), (1, (2,)), (2, (3,)), (3, (1, 1)), (4, (1, 2)), 
 (5, (1, 3)), (6, (2, 1)), (7, (2, 2)), (8, (2, 3)), (9, (3, 1))] 
```

或这个：

```
>>> test_seq = itertools.izip(itertools.count(), seq(set((1, 2, 3))))
>>> for i in range(10):
...     next(test_seq)
... 
(0, (1,))
(1, (2,))
(2, (3,))
(3, (1, 1))
(4, (1, 2))
(5, (1, 3))
(6, (2, 1))
(7, (2, 2))
(8, (2, 3))
(9, (3, 1)) 
```

这也可以使用 other 进一步压缩`itertools`：

```
>>> from itertools import chain, product, count
>>> s = set((1, 2, 3))
>>> test_seq = chain.from_iterable(product(s, repeat=n) for n in count(1))
>>> zip(range(10), test_seq)
[(0, (1,)), (1, (2,)), (2, (3,)), (3, (1, 1)), (4, (1, 2)), (5, (1, 3)), 
 (6, (2, 1)), (7, (2, 2)), (8, (2, 3)), (9, (3, 1))] 
```

# c# - WPF ContentControl 内容未获取父资源

> ID：10228918
> 
> 赞同：0
> 
> 时间：2012-04-19T13:15:35.977
> 
> 标签：c#, .net, wpf, visual-studio-2010

我目前正在掌握 WPF 资源并想知道您是否可以帮助我：

我有一个 WPF 窗口，其中包含自己的资源。它还包含一个内容控件，该控件根据树视图中选择的内容更改其内容，例如：

```
contentControl1.Content = someUserControl; 
```

这可以是一个用户控件，例如`SomeUserControl`它使用我在窗口 xaml 中定义的静态资源。

在后面的窗口代码中创建实例时`SomeUserControl`，我得到一个 XMLParseException（'在'System.Windows.StaticResourceExtension' 上提供值引发异常。'）。这是在包含绑定到静态资源的行上。

为了解决这个问题，我将它添加到 SomeUserControl 的构造函数中（parentResources 是 someUserControl 实例化的窗口资源）：

```
public SomeUserControl(ResourceDictionary parentResources)
{
    this.Resources.MergedDictionaries.Add(parentResources);
    InitializeComponent();
} 
```

这是在这种特殊情况下寻找资源的最佳方法吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:20:16.410

我假设你有一个`{StaticResource myResource}`. 你试过使用`{DynamicResource myResource}`吗？

请参阅[http://msdn.microsoft.com/en-us/library/ms748942.aspx](http://msdn.microsoft.com/en-us/library/ms748942.aspx)

**编辑**

好的，鉴于您的资源是一个转换器，它不能使用动态资源，那么我认为您正在做的可能是一个很好的解决方案。

潜在的问题是，在您的控件被实例化的那一刻，它不是 Window 的一部分，因此它无法访问 Window 的资源。正如术语静态`StaticResource`所暗示的那样，控件期望资源将可用。因此，您必须在实例化控件时使其可用。

您可能还想查看[Prism](http://msdn.microsoft.com/en-us/library/gg406140.aspx)之类的东西，它是 Region 的，这可能是处理换出“控件”的更好方法（取决于您的需要）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:25:06.127

实际上，这取决于您在谈论什么资源。

因为你这样做的方式可能非常好，唯一的缺点是你将自己从声明式编程中分离出来，这是WPF 中*预期*的编码方式。

您还可以添加一个`StaticResource`，例如在 App.xaml 中，这样它就会在您的应用程序启动时立即初始化*和*加载，并且以任何方式*在*窗口加载之前。

希望这可以帮助。

# java - Java - 绘制背景问题

> ID：10228919
> 
> 赞同：0
> 
> 时间：2012-04-19T13:15:37.870
> 
> 标签：java, background, paint

我想在框架的中间绘制我的背景图像。由于我的图像没有窗户那么大，我想放一个黑色的背景。

这是我使用的代码：

```
public void paint(Graphics g)
{
    if(this.background != null)
    {
        int bounds_top = getHeight() / 2;
        int bounds_left = getWidth() / 2;
        int half_height = this.background.getHeight(null) / 2;
        int half_width = this.background.getWidth(null) / 2;
        g.drawImage(this.background, bounds_left - half_width, bounds_top - half_height, this.background.getWidth(null), this.background.getHeight(null), this);

        this.setBackground(Color.black);
        //this.setOpaque(false);
    }
} 
```

如果我将框架设置为不透明，我的图像会显示但背景是灰色的。如果我将 opaque 设置为 false，我的框架只是黑色，不会显示任何图像。

所以这是我的问题，我怎样才能显示我的图像并有背景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T13:26:47.403

如果您在 JPanel 子项中执行此操作，请调用`setBackground(Color.black);`构造函数，并在`paintComponent`第一次调用`super.paintComponent(g);`黑色背景时实现代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:23:11.107

您正在将图像绘制到背景，然后将背景颜色设置为黑色。尝试先将背景颜色设置为黑色，然后将图像绘制到它。否则，看起来您在图像上绘制黑色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:07:43.180

我找到了一个小技巧来解决它：

```
Graphics2D g2 = (Graphics2D) g;
g2.setPaint(Color.BLACK);
g2.fill(new Rectangle2D.Double(0, 0, getWidth(), getHeight()));
g.drawImage(this.background, bounds_left - half_width, bounds_top - half_height, this.background.getWidth(null), this.background.getHeight(null), this); 
```

这很好用。

# c# - 使用 View.Details 用 ImageList 填充 ListView

> ID：10228922
> 
> 赞同：4
> 
> 时间：2012-04-19T13:15:41.637
> 
> 标签：c#, .net, listview, imagelist, detailview

将图标加载到我的列表视图时出现问题。我可以让图像在大视图中工作，但不能在细节上工作，不太确定我做错了什么。

```
private void CreateList()
{
    listView1.View = View.Details;

    listView1.Columns.Add("Icon", -2, HorizontalAlignment.Center);

    listView1.Columns.Add("Name", -2, HorizontalAlignment.Left);

    imageList1.ImageSize = new Size(32, 32);

    for (int i = 0; i < subKeys.Length; i++)
    {
        if (subKeys[i].Contains("App"))
        {
            imagePath = subKeys[i];

            if (System.IO.File.Exists(imagePath))
            {
                imageList1.Images.Add(Image.FromFile(imagePath));
            }

            numberOfImages++;
        }
    }

    listView1.StateImageList = this.imageList1;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T13:20:18.977

改变

```
listView1.StateImageList = this.imageList1; 
```

到

```
listView1.SmallImageList = this.imageList1; 
```

并确保为每个 ListItem设置`ImageIndex`、 或属性。`ImageKey`

```
listItem.ImageIndex = 0; // or,
listItem.ImageKey = "myImage"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:18:20.030

试试这个代码：

```
 DirectoryInfo dir = new DirectoryInfo(@"c:\myPicutures"); //change and get your folder
        foreach (FileInfo file in dir.GetFiles())
        {
            try
            {
                this.imageList1.Images.Add(Image.FromFile(file.FullName));
            }
            catch{
                Console.WriteLine("This is not an image file");
            }
        }
        this.listView1.View = View.LargeIcon;
        this.imageList1.ImageSize = new Size(32, 32);
        this.listView1.LargeImageList = this.imageList1;
        //or
        //this.listView1.View = View.SmallIcon;
        //this.listView1.SmallImageList = this.imageList1;

        for (int j = 0; j < this.imageList1.Images.Count; j++)
        {
            ListViewItem item = new ListViewItem();
            item.ImageIndex = j;
            this.listView1.Items.Add(item);
        } 
```

您甚至可以添加第二列，并“添加”文件名。

# objective-c - 在目标 C 中的某个事件上调用触摸事件

> ID：10228925
> 
> 赞同：0
> 
> 时间：2012-04-19T13:15:54.057
> 
> 标签：objective-c, ios, parameters, call, touch-event

我试图在某些事件上调用这些方法：

```
 -(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event

  -(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event { 
```

但我不知道如何填写参数： 1 - (NSSet *)touches 2 - withEvent:(UIEvent *)event

任何人都可以为我提供一个示例参数来调用 (void)touchesEnded 和 (void)touchesMoved: (and - (void)touchesBegan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:50:55.017

这些方法由系统自动调用。你永远不会直接打电话给他们。

你应该做什么，这取决于你的目标。如果您只想“模拟”触摸，只需使用辅助方法即可。然后，让 touchesXXXX 直接调用它们。

我们没有创建 UITouch 对象的 API，所以如果你想保留它们的信息，你必须镜像它们。就像是...

```
@interface MyTouch : NSObject {
UITouchPhase phase
NSUInteger tapCount
NSTimeInterval timestamp
UIView *view
UIWindow *window
CGPoint locationInView;
CGPoint locationInWindow;
@end 
```

然后，你可以有这样的方法......

```
- (void)handleTouches:(NSSet*)touches {
} 
```

触摸的地方是一组 MyTouch 对象。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    // For UITouch in touches, create a MyTouch, and add it to your own
    // collection of touches.

    [self handleTouches:myTouches];
} 
```

如果您对每个 touchesXXXX 方法都执行此操作，则每个方法都会将处理传递给您自己的方法。

现在，通过这样做，您可以控制创建自己的触摸对象。您可以将它们配置为您想要的任何视图或模式。然后，在任何其他代码中，您可以创建 MyTouch 对象的集合，并使用它们调用 handleTouches:。

只要 touchesXXXX 方法只是创建您的特殊对象，并将它们传递给您的方法，无论系统生成触摸还是模拟它们，您都可以拥有完全相同的行为。

现在，您没有得到的是系统事件的自动生成。

如果你被它的性能杀死，有一些简单的方法可以避免创建额外的集合和对象，但这不是你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:52:49.553

UITouch 和 UIEvent 没有公共构造函数，因此无法生成 touch 方法所需的参数。

正如 dasblinkenlight 所说，肯定有另一种方法可以解决您的问题。但是，目前的方法是绝对不可能的。

# java - 如何使用 python 通过套接字将整数发送到 Java 应用程序？

> ID：10228927
> 
> 赞同：2
> 
> 时间：2012-04-19T13:16:00.170
> 
> 标签：java, python, sockets, integer, byte

我在 Python 中有一个发送数据的客户端（前面是数据长度消息）：

```
s = socket.socket()
s.connect((host, port))
data = 'hello world'
s.sendall('%16s' % len(data)) #send data length
s.sendall(data) #send data
s.close() 
```

以及一个接收数据的 Java 服务器。服务器在读取数据之前使用[DataInputStream.readInt()](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/DataInputStream.html#readInt%28%29)读取数据长度。但是，我似乎得到了 readInt() 返回的非常大的数字。问题是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T13:19:02.150

Java 需要整数的二进制表示。您可以使用[struct](http://docs.python.org/library/struct.html)模块生成二进制表示。

在您的情况下，这将是：

```
import struct
s.sendall(struct.pack('i', len(data))) 
```

还要确保使用正确的[字节顺序](http://docs.python.org/library/struct.html#byte-order-size-and-alignment)。Java 可能需要网络字节顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T13:25:04.357

正如@mensi 所说，没有任何其他处理，Java 期望接收数据的二进制表示，这与 Python 发送的不同。此类问题的常见解决方案是将数据[序列化](http://en.wikipedia.org/wiki/Serialization)——即将数据转换为更适合网络传输的格式，并在接收端重构数据。

Python 和 Java 都支持的常见序列化格式是[JSON](http://en.wikipedia.org/wiki/JSON)。最新版本的 Python 将该`json`模块作为标准库的一部分。

# java - 如何将 java.util.prefs.Preferences 存储在文件中？

> ID：10228929
> 
> 赞同：13
> 
> 时间：2012-04-19T13:16:05.393
> 
> 标签：java, configuration

我正在使用 java.util.prefs.Preferences 作为应用程序首选项。而且我需要手动编辑这些首选项的能力。是否可以将其存储到文件而不是 Windows 注册表中？或者我应该使用另一种机制而不是 java.util.prefs.Preferences？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T13:21:49.593

如果您想继续使用 Preferences API，但要写入文件，您将需要一个新的[PreferencesFactory](http://docs.oracle.com/javase/6/docs/api/java/util/prefs/PreferencesFactory.html)，[如此 SO post](https://stackoverflow.com/a/208289/12960)中所述。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-19T13:21:52.043

您将要使用以下两种方法：

```
 Preferences.exportSubtree(OutputStream os) 
```

和

```
Preferences.importPreferences(InputStream is) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-19T13:24:28.357

此代码应该可以帮助您 [http://java.sun.com/developer/technicalArticles/releases/preferences/]：

```
public class PrefSave {

private static final String PACKAGE = "/pl/test";

public static void main(String[] args) {
    doThings(Preferences.systemRoot().node(PACKAGE));
    doThings(Preferences.userRoot().node(PACKAGE));
}

public static void doThings(Preferences prefs) {
    prefs.putBoolean("Key0", false);
    prefs.put("Key1", "Value1");
    prefs.putInt("Key2", 2);

    Preferences grandparentPrefs = prefs.parent().parent();
    grandparentPrefs.putDouble("ParentKey0", Math.E);
    grandparentPrefs.putFloat("ParentKey1", (float) Math.PI);
    grandparentPrefs.putLong("ParentKey2", Long.MAX_VALUE);

    String fileNamePrefix = "System";
    if (prefs.isUserNode()) {
        fileNamePrefix = "User";
    }
    try {
        OutputStream osTree = new BufferedOutputStream(
                new FileOutputStream(fileNamePrefix + "Tree.xml"));
        grandparentPrefs.exportSubtree(osTree);
        osTree.close();

        OutputStream osNode = new BufferedOutputStream(
                new FileOutputStream(fileNamePrefix + "Node.xml"));
        grandparentPrefs.exportNode(osNode);
        osNode.close();
    } catch (IOException ioEx) {
        // ignore
    } catch (BackingStoreException bsEx) {
        // ignore too
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-02T18:01:02.270

尝试以下类，它允许您使用本地文件使用一些简单`put()`的功能。`get()``configuration.xml`

```
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.InvalidPropertiesFormatException;
import java.util.Properties;

public class SimpleProperties
{
    private String propertiesFilePath;
    private Properties properties;

    public SimpleProperties() throws InvalidPropertiesFormatException, IOException
    {
        propertiesFilePath = "configuration.xml";
        properties = new Properties();

        try
        {
            properties.loadFromXML(new FileInputStream(propertiesFilePath));
        } catch (InvalidPropertiesFormatException e)
        {

        }
    }

    public void put(String key, String value) throws FileNotFoundException, IOException
    {
        properties.setProperty(key, value);

        store();
    }

    public String get(String key)
    {
        return properties.getProperty(key);
    }

    private void store() throws FileNotFoundException, IOException
    {
        String commentText = "Program parameters";

        properties.storeToXML(new FileOutputStream(propertiesFilePath), commentText);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T13:20:20.153

在另一篇文章中对此进行了解释，[here](https://stackoverflow.com/questions/333363/loading-properties-file-from-java-package)

```
Properties prop = new Properties();
InputStream in = getClass().getResourceAsStream("foo.properties");
prop.load(in);
in.close() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T13:24:17.703

我认为您可以改用属性文件。它们存储在文件系统中。你可以定义你想要的路径。您可以手动编辑它。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/1318347/how-to-use-java-property-files)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-21T14:01:50.127

不久前，我不得不想出一个 Preferences 类的实现，它可以从注册表读取设置但不写入注册表。我从 AbstractPreferences 派生了一个 ReadOnlyPreferences 类来完成此任务。后来，我需要与访问/从文件完全相同的功能。我刚刚扩展了我的 ReadOnlyPreferences 类以覆盖 sync() 和 flush() 以保持文件同步。关于这一点很酷的部分，它将使用完全相同的逻辑将默认值应用于值，就像通常使用首选项一样，因为注册表中实际上没有任何内容可供读取。我使用基类中的 exportSubtree() 和 importPreferences() 使文件保持同步，为我完成所有繁重的工作。

很抱歉，我无法发布代码，因为我不拥有它，但我使用了您可以在以下链接中找到的加密首选项作为起点。这就是我所做的，我花了大约一个小时将它提炼成我需要的东西，主要是扔掉代码，这比编写代码容易得多！如果您不想单击第一个，它也发布在 Dobbs 博士的以下链接中。我只是从来没有在 dobbs 文章上看到一个简单的地方来下载整个源代码。无论如何，这篇文章是我见过的最好的扩展偏好的文章。

[http://www.panix.com/~mito/articles/#ep](http://www.panix.com/~mito/articles/#ep)

[http://www.drdobbs.com/security/encrypted-preferences-in-java/184416587?pgno=4](http://www.drdobbs.com/security/encrypted-preferences-in-java/184416587?pgno=4)

# css - Sencha Touch 2 CSS 不工作

> ID：10228930
> 
> 赞同：0
> 
> 时间：2012-04-19T13:16:10.667
> 
> 标签：css, sencha-touch, sass, sencha-touch-2, compass-sass

当创建一个新的 CSS 主题并用 compass 编译主题后，样式没有变化。一切都和以前一样，使用默认主题。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:19:24.707

确保将链接移至 CSS 文件的以下行：

```
<script id="microloader" type="text/javascript" src="sdk/microloader/development.js"></script> 
```

`<head></head>`我把它放在元素的末尾。

```
(...)
<script id="microloader" type="text/javascript" src="sdk/microloader/development.js"></script>
<link rel="stylesheet" href="default-theme.css" type="text/css" media="screen" title="no title" charset="utf-8">
</head>
(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T10:35:19.070

只需将所有变量放在默认的 @import 语句下方，如下所示：

```
@import 'sencha-touch/default';
@import 'sencha-touch/default/all';

$base-color: #27ae60;
$base-gradient: 'matte';
$alert-color: #2ecc71;
$confirm-color: #e67e22;
$page-bg-color: #3498db;
$form-bg-color: #ecf0f1;
$button-radius: '0px'; 
```

# java - Clock-Pro 缓存替换

> ID：10228934
> 
> 赞同：0
> 
> 时间：2012-04-19T13:16:26.723
> 
> 标签：java, algorithm, caching, clock

每个人。

我已经阅读了很多关于 ClockPro 缓存替换算法的文章 - 时钟缓存替换的改进版本。起初为了简单起见，我实现了时钟。现在我想用 2 只手在 Java Clock-Pro 中实现（热和冷而不是实际算法中的 3 只手）。我找到了一些描述：

```
The ClockPro Algorithm

On Start():
    cold_block =  first block  
    hot_block = first block

On Memory Lookup():
    curr_block = NULL
    If block is in cache:
        Set clock bit
        Return block to CPU
    Else:
        While curr_block == NULL:
            If cold_block.clockbit == 0:
                curr_block = cold_block
            Else if cold_block.test == 1 :
                Turn cold hand block hot
                Unset the clockbit
                Run Hot Hand Algorithm
            Else:
                cold_block.clockbit = 0
            cold_block = cold_block.next

    If curr_block is dirty : write
    Find accessed block in memory
    Return fetched block to the CPU
    Replace curr_block with fetched one

Hot Hand Algorithm() :
    curr_block = NULL
    While curr_block == NULL:
        If hot_block is cold :
            hot_block.text = 0
        Else if hot_block.clockbit == 0 :
            Turn the block cold
        Else :
            hot_block.clockbit = 0
        hot_block = hot_block.next 
```

如果有人尝试过，请回答一些问题：

考试时间是多少？它什么时候开始，我们可以使用什么类型。是否只是一点点，可以告诉我们对象是否处于测试期，或者它是一个计数器？双手可以在某个时间点指向一个街区吗？

如果有人可以，请帮助我在一个简单的示例中对算法的这种行为进行建模。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:34:31.843

该代码非常不完整。至少缺少两个重要部分：1）测试手（test hand） 2）热/冷页面reatio适应性

我不得不说，关于这个主题的原始论文确实缺乏很多重要的细节。

我目前正在编写 Python 实现，但我还没有发布源代码，因为质量还不够高。

项目网址：[https ://bitbucket.org/samilehtinen/pyclockpro](https://bitbucket.org/samilehtinen/pyclockpro)

即使发布了代码，我也很确定有一些次要但重要的细节，可能需要微调。

比如：1）初始化时内存热/冷页面分配比率，我已经配置为冷页面分配了100％的内存。2）如果热分配调得如此之低以至于热手应该通过冷手怎么办。我假设在这种情况下热分配被简单地忽略了，因为热手超过冷手会破坏一切。在这种情况下，hand hot 也会清除所有非驻留测试页。

根据测试数据，我的实现似乎得到了很好的调整。

您的问题的答案：测试期是保留密钥但丢弃值的时间。在钟面上，您会在冷和测试之间看到这些条目。我使用 int 作为页面类型，0 非驻留冷页面（测试页面），1 用于冷页面，2 用于热页面。如果您使用指向数据的指针，如果指针为 Null，则页面是非常驻页面，因为您只有没有数据（值）的键。

是的，有时两只手都可以指向一个街区。主要问题是，手可以互相过去吗？我认为如果发生这种情况，事情就会被打破。所以基本上热手可以推试手，也可以推冷手。取决于你如何实现事物。或者，如果您像在论文中那样做，手热可以通过测试手，但在这种情况下，它会拖着测试手。据我所知，手热不能超过冷手，或者如果你这样做，那么它会做冷手的工作，但仍然会用热手拖着冷手。

很难做简单的例子，因为这并不简单。还有一些边缘情况需要处理，至少是这里提到的情况。适应性也增加了边缘情况，因为在迭代处理期间内存分配可能会发生变化。在这些情况下保持 100% 的分配需要一些额外的检查。如果您允许 +/- 几个缓存大小的块，那么实现会更简单。

更新，Python 源代码和文档现已发布。因此，在 Python 中可以查看完整的工作示例。

# javascript - 使用 JavaScript/Jquery 解析代码

> ID：10228939
> 
> 赞同：0
> 
> 时间：2012-04-19T13:17:01.450
> 
> 标签：javascript, jquery, parsing, split

我正在尝试从字符串中提取信息。

```
%B6009050000000000^LASTNAME/FIRST MIDDLE^0000000A39418598900000000000000?;6009050000000000=00000000139418598900? 
```

我需要的信息是`A39418598`。

我已将其分配给`var str`，现在我需要将其拆分并作为`var id`.

**我用`var id = str.split('');`吗？**如果是这样，我如何准确地告诉 JavaScript 我需要什么？其余数据可以忽略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:20:50.340

```
var s = "%B6009050000000000^LASTNAME/FIRST MIDDLE ^0000000A394185989000...";

s.match(/\^0+?([^0]+)/)[1];  //"A394185989" 
```

这可以完成工作，但请注意，此正则表达式确实特定于该字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:23:57.377

```
 var str="%B6009050000000000^LASTNAME/FIRST MIDDLE";
 str=str+"^0000000A39418598900000000000000?;6009050000000000=00000000139418598900?" 

 str.match(/\^0+?([^0]+)/)[1]; 
```

# amazon-dynamodb - DynamoDB 和用户登录表

> ID：10228951
> 
> 赞同：16
> 
> 时间：2012-04-19T13:17:27.437
> 
> 标签：amazon-dynamodb

我已经构建了一个应用程序，它目前有一个相当标准的用户表，如下所示：

int id, varchar email, varchar 密码

如果我要将其切换到 DynamoDB，那么我将如何创建此表？

如果我对电子邮件地址使用哈希键，那么我将无法提供更新您的电子邮件的能力，如果我使用哈希来存储 ID，那么我需要使用昂贵且受 1Mb 限制。

请问有什么建议吗？谢谢，马克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T14:19:25.443

您是否说因为需要按电子邮件字段过滤，所以使用 ID 作为哈希会很昂贵？

如果您需要按非键列过滤查询，通常会结束为它创建**索引**。

**DynamoDB**没有内置**二级索引**，但是很容易实现您自己的解决方案。

正如您所指出的，主表可以使用**ID**作为**hash**，并且不同的表可以用作索引，它可以是：

```
varchar email, int id 
```

通过**电子邮件发送**辅助表的哈希键。如果允许多个用户使用相同的电子邮件，那么您可以使用**ID**作为范围，以使事情变得更容易，否则一个简单的列将适合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T10:10:52.920

使用不同的表进行索引将导致高维护。我从我的前 CTO 那里发现了一个冗余模型。

对于您的表：用户

**关系型数据库：**

身份证、邮箱密码

*1、senthil3569@stack.com,问*

**动态数据库：**

KEY、身份证、邮箱、密码

*1, 1, senthil3569@stack.com, 问*

*senthil3569@stack.com,1 , senthil3569@stack.com, 问*

您不是存储一条记录，而是冗余存储以使用非索引列进行获取。

希望解决方案是明确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-14T09:45:55.360

创建`User`具有哈希键 id（用户 UUID）和其他属性的表。使用哈希键电子邮件创建全局二级索引，您可以根据需要选择排序键（用户活动状态，用户类型）。

*   您可以获取它们并在 UUID(user id) 上更新用户
*   使用 emailId 获取用户
*   在没有过滤器的情况下获取具有活动状态的用户（在排序键上）

```
UserTable:
   Type: AWS::DynamoDB::Table
   Properties:
     TableName: UserTable
     AttributeDefinitions:
       - AttributeName: id
         AttributeType: S
       - AttributeName: email
         AttributeType: S
       - AttributeName: status(optional sort key according to your requirement)
         AttributeType: S
     KeySchema:
       - AttributeName: id
         KeyType: HASH
     ProvisionedThroughput:
       ReadCapacityUnits: 5
       WriteCapacityUnits: 5
     GlobalSecondaryIndexes:
       - IndexName: UserDetail
         KeySchema:
           - AttributeName: email
             KeyType: HASH
           - AttributeName: status(option)
             KeyType: RANGE
         Projection:
           ProjectionType: ALL
         ProvisionedThroughput:
           ReadCapacityUnits: 5
           WriteCapacityUnits: 5 
```

# c++ - 动态分配的 std::vector 似乎有内存泄漏

> ID：10228959
> 
> 赞同：1
> 
> 时间：2012-04-19T13:17:51.777
> 
> 标签：c++, stl, memory-leaks, vector

感谢大家，在整个项目中再次检查后，真正的问题是缺少虚拟破坏者......导致内存泄漏......

```
#include "stdafx.h"
#include <vector>

class VecContainerParent
{
public:
    VecContainerParent(){}; 
```

**没有这一行：**

```
 virtual ~VecContainerParent(){}; 
```

**它导致内存泄漏**

```
};

class VecContainerChild : public VecContainerParent
{
public:
    VecContainerChild(){};

    //virtual ~VecContainerChild(){};
private:
    std::vector<int> vec;
};

////////// WITH MEMORY LEAK ///////////////

int _tmain(int argc, _TCHAR* argv[])
{
    VecContainerParent *a;
    while(true)
    {
        a = new VecContainerChild();
        delete a;
    }
} 
```

///// Original Post ///////// *我有一个内存泄漏问题，当在类内部使用vector时，然后使用这个对象与new & delete。类中的向量似乎没有释放内存。为了测试这一点，我在任务管理器中看到进程的内存急剧增加。*

请看下面的例子：

```
class VecContainer
{
public:
       VecContainer(){};
private:
       std::vector<int> vec;
} 
```

1.  内存泄漏：

    ```
    int main()
    {
        VecContainer *a;
        while(true)
        {
            a = new VecContainer();
            delete a;
        }
    } 
    ```

2.  好（因为不使用ptr）：

    ```
    int main()
    {
        while(true)
        {
            VecContainer a;
        }
    } 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:17:52.227

这是典型的。当你

```
 a = new VecContainerChild();
    delete a; 
```

通过指向其基类子对象的指针删除对象，*除非*基类具有虚拟析构函数，否则您将调用未定义的行为。基本上，在这种情况下不会运行孩子的析构函数。

[这可能是一个需要进一步研究的问题。](https://stackoverflow.com/q/294927/51831)

# android - 两个 ListView 上的 MultiChoiceModeListener

> ID：10228971
> 
> 赞同：2
> 
> 时间：2012-04-19T13:18:31.263
> 
> 标签：android, listview, tablet, fragment, android-listfragment

我正在为平板电脑开发一个新的 Android 应用程序。

应用程序的视图分为两个 listFragments（左和右）。

是否可以创建一个可以同时从两个 listFragments 中选择的 MultiChoiceModeListener。

在我的解决方案中，只能从列表片段之一中选择元素。

示例：我通过长按从左侧选择一个元素。当我尝试从骑行侧单击一个元素时，左侧的元素不再启用，而是右侧的元素。

希望有人能帮忙谢谢

# c# - 如何将一个 SetUpTestFixture 用于多个类？

> ID：10228972
> 
> 赞同：1
> 
> 时间：2012-04-19T13:18:37.677
> 
> 标签：c#, nunit

好的，所以我有以下代码，我只想运行一次。我希望它在我运行的所有测试装置的一开始就设置，最后设置一次。

```
 [RequiresSTA]
    class Prepare
    {
        [TestFixtureSetUp]
        public void Setup()
        {
            IE Window = new IE("http://www.google.com");
        }

        [TestFixtureTearDown]
        public void Teardown()
        {
            IE Window = IE.AttachTo<IE>(Find.ByTitle("Google"));
            Window.Dispose();
        }
    } 
```

我的项目中有多个类在同一个命名空间中，我们称它们为 Class1-4。我想设置它，所以当我运行这些测试时， Prepare 只会被调用*一次*。例子：

**运行 3 + 4：**

```
Prepare Setup
     Run3
     Run4
Prepare Teardown 
```

**运行 1 - 4：**

```
Prepare Setup
     Run1
     Run2
     Run3
     Run4
Prepare Teardown 
```

现在准备在每次一组开始时启动，然后在每次结束时结束。在运行该名称空间中的所有测试之前，我怎样才能让它继续？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:20:10.277

您可以为此使用继承。您可以创建一个所有测试都继承自的基类，并在基类中放置您的设置。

但是，您必须小心执行此操作。这将对只查看子类的任何人屏蔽设置。除非您覆盖设置并至少`base.Setup`在每个课程中调用。

但是，这只会有助于代码重用。我不相信这会如你所愿，也不应该。此设置应该为每个测试类运行一次。在你的单元测试中，你不应该依赖于以前的测试，所以如果你需要这个，那么你可能想要重新查看你的测试。他们应该自己工作，而不必运行任何先前的测试。如果你这样做了，那么让每个班级设置自己的夹具应该不是问题。

解决这个问题的唯一方法是将所有测试放在一个夹具中，这又是糟糕的测试设计。

**更新**

看来您可以在将为整个程序集运行的全局类上使用[SetupFixture属性。](http://www.nunit.org/index.php?p=setupFixture&r=2.4)但是，如上所述，请非常小心地使用它，因为您通常不希望在单元测试中共享状态。

从上面的链接中值得注意的是：

> 在给定的命名空间中只能创建一个 SetUpFixture。任何命名空间之外的 SetUpFixture 为整个程序集提供 SetUp 和 TearDown。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:35:32.617

创建一个装配设置夹具将是最好的方法。

```
 //This class does not have a namespace on purpose, do not add one.
  [SetUpFixture]
  public class AssemblySetupFixture
  {
    [SetUp]
    public void SetupTestSuite()
    {
        Debug.WriteLine("Setting up Test Assembly Fixture");
     // Kill all web server instances and then restart them
        WebServerHelper.StopAll(); 
        WebServerHelper.StartAll();
       DatabaseHelper.RestoreDefaultDatabases();
     }

    [TearDown]
    public void TearDownTestSuite()
    {
        Debug.WriteLine("Tearing down Assembly Fixture");
        WebServerHelper.StopAll();
    }
  } 
```

# jquery - jQuery validate 获取文本框/输入元素下方的错误消息

> ID：10228986
> 
> 赞同：3
> 
> 时间：2012-04-19T13:19:32.463
> 
> 标签：jquery

[http://jsfiddle.net/msbUM/](http://jsfiddle.net/msbUM/) 如何在文本框/输入元素下方获取错误消息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T13:20:42.153

应用于`display:block`错误标签。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-19T13:23:18.107

只需添加`display: block;`到 label.error：

```
label.error { 
   float: none; color: red; 
   padding-left: .5em;
   vertical-align: top; 
   display: block;
}​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-26T04:17:34.307

另一个快速的解决方案是`label`用 . 替换为错误元素`div`。

```
$(document).ready(function(){ 
    jQuery("#frmId").validate({
        errorElement:'div',
        rules: {
        // RULES //
        },
        messages: {
        // MESSAGES //
        } 
    });
}); 
```

# c# - 如果我们有一个包含项目列表的位掩码，如何存储项目的顺序？

> ID：10228991
> 
> 赞同：2
> 
> 时间：2012-04-19T13:19:49.933
> 
> 标签：c#, asp.net

我的数据库中有一个位掩码用于存储项目列表。在此之前，我只是在屏幕上一一呈现这些项目。但是现在用户应该能够设置项目的顺序。我有一个我不喜欢的解决方案：使用一些分隔符（类似于 1|8|4|16）将 ids 列表存储在字段中。

谁能帮我找到另一个解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:36:04.203

如果项目的数量限制在某个数字（例如 15），您可以将小数字列表存储在较大的数字类型中。从本质上讲，您的列表变成了 4 位组的“掩码”，其中每个组代表从 0 到 15 的数字，包括 0 到 15。对于 15 个项目，您需要 60 位来存储这样的列表。方便的是，大多数数据库都支持 64 位整数类型，因此您需要做的就是实现一个打包算法。由于项目数为 15，4 位可存储的状态数为 16，因此可以使用全零组合来表示“不存在”；所有非零组合代表项目的数量。

这比在字符串中存储数字列表要快得多，而且要紧凑得多。但是，它更难扩展，因为位组的长度（在本例中为 4）取决于您希望存储的项目数。

# php - eav_entity_type 安装时不带引号

> ID：10228992
> 
> 赞同：4
> 
> 时间：2012-04-19T13:19:50.713
> 
> 标签：php, magento, installation, entity-attribute-value, quote

**起源...**

我有一个带有安装脚本的模块（常见的mysql4-upgrade-0.1.0-0.1.1.php），在引用中添加了一个属性：

```
$eav = new Mage_Eav_Model_Entity_Setup('sales_setup');
$eav->addAttribute('quote', 'my_attribute', array('type' => 'varchar')); 
```

如果我在空数据库上运行我的 magento 存储，设置脚本会运行，并且“错误的实体 ID”错误会中断该过程。调用堆栈指向我的设置脚本。

**...寻找...**

如果我去数据库，我看到**eav_entity_type**表填充但只有 8 种类型：报价类型未注册！

这就是 Mage_Eav_Model_Entity_Setup->getEntityTypeId() 抛出异常的原因。

**问题：**

我不知道为什么没有使用其他实体创建报价实体。如何在我的模块设置之前强制 magento 注册报价实体？有没有其他选择？

有一个[可能相关的问题](https://stackoverflow.com/questions/7272879/magento-add-field-to-sales-flat-quote)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T20:20:42.077

从 1.4.x 开始，所有实体都移入平面结构。但是，仍然可以使用 Mage_Sales_Model_Mysql4_Setup 类的伪 EAV 接口。您的代码不起作用，因为您使用的是 Eav 设置模型而不是销售模型。

此外，默认情况下，app/code/local/ 中的所有模块设置脚本仅在 app/code/core 中的脚本之后处理，因此您可以选择不指定对核心模块的依赖。

真诚的，伊万

# linux - 将缓冲区与 argv 错误进行比较

> ID：10228995
> 
> 赞同：1
> 
> 时间：2012-04-19T13:20:02.117
> 
> 标签：linux, character, buffer, argv

我正在尝试编写一个命令来替换文件中的字符。例如，. **/replace E XY hello.txt** [b]hello.txt [/b] 包含单词 [b]HELLO WORLD[/b]。字母 E 将替换为 XY。因此，**HELLO WORLD**将成为**HXYLLO WORLD。** 我已将文件读入**char buf[100]**

```
 0   1   2   3   4  5   6   7   8   9   10
[H]-[E]-[L]-[L]-[O]-[]-[W]-[O]-[R]-[L]-[D] 
```

我想说：

```
If buf[x] == argv[1],
then buf[x] = argv[2] 
```

其中 x 是一个特定的缓冲区元素（在这种情况下是 buf[1] == argv[1]）。

我收到此错误：**assignment 使 integer without cast**。

如何将缓冲区中的元素与参数向量进行比较？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:19:57.700

如果您需要一个程序来替换所描述的字符串（以及更多），请尝试[`streplace`](http://code.google.com/p/streplace/).

如果您想实现这一点，请尝试使用 Java、C++ 或 Python 等语言，其中字符串处理比 C 容易得多。

如果您必须使用 C，则必须使用诸如“strcmp()”、“strcpy()”、“memcpy()”或“memmove()”之类的函数。提示：`char buf[100]`读取整个文件可能也不是一个好的选择。

评论后编辑：请考虑您的概念和设计 - 这是不行的。示例：在当前解决方案中，您错过了在一个“读取”块中开始并在下一个块中结束的匹配。

您当前的程序也有一些问题：恕我直言，您“忘记”关闭第 40 行中的注释，该注释跳过了与程序的其余部分混淆的右括号。

请：在你输入之前三思！先做一个设计，然后写下来。

另请：阅读（并理解）原始答案（尤其是带有字符串函数的部分）；调整你的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:44:31.327

假设您正在使用 C（这似乎很可能给出错误消息）：

您不能在 C 中以这种方式比较字符串。您现在只是在比较指针。你想这样做：

```
if (! strcmp(buf, argv)) {
  // strings are equal
} 
```

您可能想阅读[C 字符串处理](http://en.wikipedia.org/wiki/C_string_handling)。

# javascript - TinyMCE 模式：textareas 不转换所有文本区域

> ID：10228997
> 
> 赞同：0
> 
> 时间：2012-04-19T13:20:05.350
> 
> 标签：javascript, tinymce

我正在使用 TinyMCE 为管理屏幕供电，使用以下设置：

```
<script type="text/javascript">
tinyMCE.init({
        mode : "textareas",
         theme : "advanced",
         theme_advanced_toolbar_location : "top"

});
</script> 
```

在本页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="template/common/style.css" rel="stylesheet" type="text/css" />

<title></title>

<script type="text/javascript" src="js/tiny_mce/tiny_mce_src.js"></script>

<script type="text/javascript">
tinyMCE.init({
        mode : "textareas",
         theme : "advanced",
         theme_advanced_toolbar_location : "top"

});
</script>

</head>

<body>

<div class="header">
<div class="inner_header">
<ul class="top_bar">
<li><a href="/2028751/project/admin/?p=about&a=static">About Us</a></li>
<li><a href="/2028751/project/admin/?p=passplus&a=static">Passplus</a></li>
<li><a href="/2028751/project/admin/?p=terms&a=static">terms</a></li>
<li><a href="/2028751/project/admin/?p=links&a=static">Links</a></li>
<li><a href="/2028751/project/admin/?a=static_new">New Page</a></li>
</ul>

<hr />

<ul class="low_bar">
<li><a href="/2028751/project/admin/?p=chippenham&a=school">Chippenham</a></li>
<li><a href="/2028751/project/admin/?p=denizes&a=school">Denizes</a></li>
<li><a href="/2028751/project/admin/?p=trowbridge&a=school">Trowbridge</a></li>
<li><a href="/2028751/project/admin/?a=school_new">New School</a></li>
</ul>

</div>
</div>
<div class="logo">

<img src="template/common/image/logo.gif" alt="Wessex Association Of Driving Schools" title="Wessex Association Of Driving Schools" /></div>

<div class="content">
<div class="inner_content">

<div class="item">
<div class="bleft">
<form action="" method="post">

<label for="title">Title :</label><input type="text" name="title" value="" />

<textarea name="body" id="body"><ul>
<li>Professional, patient and reliable female instructor</li>
<li>Structured lessons to suit pupil needs and ability</li>
<li>Help with theory test</li>
<li>Mock test</li>
<li>Covers Melksham, Bath, Trowbridge, Bradford on Avon and outying villages</li>
</ul></textarea>

</div>

<div class="bright">
<div class="input"><label for="contact">Contact :</label><input type="text" name="contact" value="" /></div>
<div class="input"><label for="phone">Phone :</label><input type="text" name="phone" value="" /></div>
<div class="input"><label for="mobile">Mobile :</label><input type="text" name="mobile" value="" /></div>
<div class="input"><label for="email">Email :</label><input type="text" name="email" value="" /></div>
<div class="input"><label for="contact">Website :</label><input type="text" name="website" value="" /></div>

<div class="input"><input type="submit" value="Save" /></div>

<div class="input"><input type="submit" name="delete" value="Delete" class="in_small" /></div>
</form>
</div>

</div>

<div class="clear">&nbsp;</div>
<hr />

<div class="item">
<div class="bleft">
<form action="" method="post">

<label for="title">Title :</label><input type="text" name="title" value="" />

<textarea name="body" id="body"><ul>
<li>DSA Approved Instructor</li>
<li>Female Instructor</li>
<li>Member of MSA</li>
<li>Block Booking Discount</li>
<li>Theory tuition available</li>
<li>Individual attention</li>
<li>Pass Plus</li>
<li>Flexible hours</li>
</ul></textarea>

</div>

<div class="bright">
<div class="input"><label for="contact">Contact :</label><input type="text" name="contact" value="" /></div>
<div class="input"><label for="phone">Phone :</label><input type="text" name="phone" value="" /></div>
<div class="input"><label for="mobile">Mobile :</label><input type="text" name="mobile" value="" /></div>
<div class="input"><label for="email">Email :</label><input type="text" name="email" value="" /></div>
<div class="input"><label for="contact">Website :</label><input type="text" name="website" value="" /></div>

<div class="input"><input type="submit" value="Save" /></div>

<div class="input"><input type="submit" name="delete" value="Delete" class="in_small" /></div>
</form>

</div>
</div>

<div class="clear">&nbsp;</div>
<hr />

</div>
</div>

</body>
</html> 
```

出于某种原因，当我在 Firefox 5.0 中进行测试时，只有第一个 textarea 被转换为文本编辑器。谁能明白为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:27:29.107

每个 ID`textarea`必须是唯一的。这实际上是 HTML 要求，而不是 tinyMce 要求。更改 ID，我想你会看到它开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:25:08.483

你试过验证你的html吗？无效的 html 或引用可能会给您带来意想不到的结果。