# StackOverflow 问答 000179000-000179999

# version-control - 如何管理共享库？

> ID：179004
> 
> 赞同：9
> 
> 时间：2008-10-07T15:22:21.177
> 
> 标签：version-control

每次我做一个项目时，我都会开发几个通用的例程/模块/库，我希望我会在其他项目中使用它们。

由于开发速度的原因，我没有花很多时间使这些模块变得完美——对于这个项目来说已经足够了，并且有足够的文档和可隔离性，我可以轻松地将它们添加到另一个项目中。

到现在为止还挺好。

现在，当我在另一个项目中使用它们时，我不可避免地会改进它们——添加新特性/功能、修复错误、使它们更通用等。

那时我有几个问题：

*   我需要为我正在处理的代码维护模块中的更改
*   我需要在中央“模块”存储库中维护这些相同的更改
*   我需要确保更新的模块可用于旧项目，但不会自动用于旧项目，有时甚至是我已经在处理的现有项目。

你如何管理这个？当您的团队在不同项目中处理不同模块时，这些问题有何不同？

-亚当

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-07T15:44:02.787

如果您对所有项目都使用 Subversion，您可以简单地使用`svn:externals`: 这允许一个存储库引用另一个存储库，可以选择固定在特定版本。例如，

```
svn://svn/shared
svn://svn/project1
  |- 目录1
  |- 目录2
  \- svn:externals "shared -r 3 svn://svn/shared"
svn://svn/project2
  |- 目录3
  \- svn:externals "shared -r 5 svn://svn/shared"
```

提交您的更改`svn://svn/shared`，并在准备好后修改`svn:externals`各个项目中的属性。

否则，使用其他 VCS，您可能只需在 上保留一堆标签`shared`，每个项目使用一个`shared`，指向他们使用的版本。准备好后将每个标签推进到更高版本。不过，这需要手动更新每个项目的副本`shared`（一件好事`svn:externals`是它会自动发生）。

如果您`shared`为每个单独的项目分叉/分支......好吧，这可以工作，但需要人力来维护和合并更改。

## [编辑]

更多参考资料：

参见[svn book](http://svnbook.red-bean.com/)中的[External Definitions](http://svnbook.red-bean.com/en/1.0/ch07s03.html)获取教程和更多详细信息，以及[git-submodule 教程了解 DVCS](http://git.or.cz/gitwiki/GitSubmoduleTutorial) [git](http://git.or.cz/)中的类似功能。`svn:externals`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-07T15:37:35.280

当然，正如 PersistenceOfVision 所说，使用版本控制，并保持每晚构建以确保您不会破坏旧项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-07T15:26:18.143

如果代码足够通用以至于您在多个项目中使用它，那么您是否有可能重新发明轮子？相反，如果您对现有库进行标准化，您将拥有已经经过充分测试和优化的代码，并且您将无需维护任何东西。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-10-07T15:31:02.067

选择软件版本控制包...

例如：
SVN + TortoiseSVN 是我们目前的解决方案。（免费）
有些人更喜欢 Visual Source Safe。（不是免费的）

# php - 如何使用 PHP 邮件从地址更改信封？

> ID：179014
> 
> 赞同：36
> 
> 时间：2008-10-07T15:23:28.150
> 
> 标签：php, email

我在 Linux 上使用 PHP 和 Apache，以及 Sendmail。我使用 PHP[`mail`](http://php.net/manual/en/function.mail.php)函数。电子邮件已发送，但信封中有`Apache_user@localhostname`in `MAIL FROM`（例如 nobody@conniptin.internal），并且一些远程邮件服务器拒绝此，因为域不存在（显然）。使用`mail`，我可以强制它改变信封`MAIL FROM`吗？

`mail`编辑：如果我在() 函数的第四个字段中添加一个标题`From`，则会更改消息正文标题中的字段，并且不会更改信封`MAIL FROM`。

我可以通过生成 sendmail`sendmail -t -odb -oi -frealname@realhost`并将电子邮件内容传送给它来强制它。这是更好的方法吗？

有没有更好、更简单、更适合 PHP 的方法来做到这一点？

编辑：底线是我应该有 RTM。感谢大家的回答，第五个参数有效，一切都很好。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2008-10-07T15:31:06.450

mail() 有第四个和第五个参数（可选）。第 5 个参数应该作为选项直接传递给 sendmail。我使用以下内容：

```
mail('to@blah.com','subject!','body!','From: from@blah.com','-f from@blah.com'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-04T09:37:43.160

[PHP Mail() 官方文档](http://php.net/manual/en/function.mail.php)

> `bool mail ( string $to , string $subject , string $message [, string $additional_headers [, string $additional_parameters ]] )`
> 
> ...
> 
> **附加参数（可选）**
> 
> Additional_parameters参数可用于将附加标志作为命令行选项传递给配置为在发送邮件时使用的程序，如配置**设置**`sendmail_path`所定义。例如，当使用带有sendmail 选项的 sendmail 时，这可用于**设置信封发件人地址。**`-f`
> 
> 该参数被`escapeshellcmd()`内部转义以防止命令执行。`escapeshellcmd()`阻止命令执行，但允许添加其他参数。出于安全原因，建议用户清理此参数以避免在 shell 命令中添加不需要的参数。
> 
> 由于`escapeshellcmd()`是自动应用的，因此无法使用 Internet RFC 允许作为电子邮件地址的某些字符。**mail()** 不允许此类字符，因此在需要使用此类字符的程序中，建议使用其他发送电子邮件的方法（例如使用框架或库）。
> 
> The user that the webserver runs as should be added as a trusted user to the sendmail configuration to prevent a '`X-Warning`' header from being added to the message when the envelope sender (`-f`) is set using this method. For sendmail users, this file is `/etc/mail/trusted-users`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-07T15:32:33.263

你可以试试这个（我不确定）：

```
ini_set("sendmail_from", yourmail@example.com);
mail(...);
ini_restore("sendmail_from"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-07T19:38:50.053

我还建议检查[PHPMailer](http://phpmailer.codeworxtech.com)。它非常适合创建和发送电子邮件，使过程更容易，并且支持 SMTP。

* * *

## 回答 #5

> 赞同：-10
> 
> 时间：2011-03-25T14:02:15.213

您实际需要做的是**更改**运行 Apache 的机器的**主机名，以及运行 Apache 的****用户**。

在您当前的情况下，它是：

*   阿帕奇用户：**没有人**
*   服务器主机名：**conniptin.internal**

更改这两个值非常简单，可以解决问题的根源。

虽然如果您需要从 PHP 中执行此操作，那么也许可以使用这些`system/exec`函数。但我认为它在实践中不会起作用，因为您需要重新启动 Apache，并且可能还需要重新启动整个主机才能使用新名称。

# eclipse - 将 JAR 添加到 Eclipse Java 库

> ID：179024
> 
> 赞同：38
> 
> 时间：2008-10-07T15:24:55.823
> 
> 标签：eclipse, jar

如何将 JAR 文件添加到 Eclipse 中已经存在的 Java 库中？请注意，这不是用户库。

也就是说，如果您查看 Java 项目的 Java 构建路径并单击库选项卡，您将看到项目使用的库列表。如果展开给定的库，您将看到该库中包含的 JAR 文件列表。我想向其中一个库添加一个额外的 JAR 文件。

我正在使用 Eclipse 3.4.0 版。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2010-05-27T14:32:09.837

在日食伽利略中：

*   打开项目的属性
*   选择*Java 构建路径*
*   选择*库*选项卡

从那里你可以添加外部罐子

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-10-07T15:38:43.580

在 Eclipse Ganymede (3.4.0) 中：

1.  选择库并单击“编辑”（窗口左侧）
2.  点击“用户库”
3.  再次选择库并单击“添加 JAR”

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-07T15:52:07.297

你也可以考虑使用像 Maven 这样的构建工具来管理你的依赖。它很容易设置并帮助在 eclipse 中自动管理这些依赖项。如果您有一个具有大量外部依赖项的大型项目，那么绝对值得付出努力。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-05-22T19:09:30.867

从 Helios Service Release 2 开始，不再支持 JAR 文件。您可以添加它们，但 Eclipse 不会将它们识别为库，因此您只能“导入”而不能使用。

# python - 如何在 Python 中执行 IMAP 搜索（使用 Gmail 和 imaplib）？

> ID：179026
> 
> 赞同：12
> 
> 时间：2008-10-07T15:24:59.037
> 
> 标签：python, gmail, imap

在 Gmail 中，我有一堆带标签的邮件。

我想使用 IMAP 客户端来获取这些消息，但我不确定搜索咒语是什么。

```
c = imaplib.IMAP4_SSL('imap.gmail.com')
c.list()
('OK', [..., '(\\HasNoChildren) "/" "GM"', ...])
c.search(???) 
```

我没有找到很多这类事情的例子。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-07T19:37:42.950

`imaplib`是有意对 IMAP 协议进行精简包装，我假设允许更大程度的用户灵活性和更大的适应 IMAP 规范变化的能力。因此，它并没有真正为您的搜索查询提供任何结构，并且需要您熟悉[IMAP 规范](http://www.faqs.org/rfcs/rfc3501.html)。

正如您将在“6.4.4\. SEARCH 命令”一节中看到的，您可以为搜索条件指定许多内容。请注意，您必须先找到`SELECT`邮箱（文件夹的 IMAP 名称），然后才能搜索任何内容。（据我了解，同时搜索多个文件夹需要多个 IMAP 连接。）`IMAP4.list`将帮助您弄清楚邮箱标识符是什么。

在制定您传递给的字符串时也很有用的`imaplib`是上面链接的 RFC 中的“9.正式语法”。

`r'(\HasNoChildren) "/"'`是根邮箱上的邮箱标志，`/`. 请参阅“7.2.6\. FLAGS 响应”。

祝你好运！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2010-06-23T11:45:49.147

```
import imaplib 
obj = imaplib.IMAP4_SSL('imap.gmail.com', 993)
obj.login('username', 'password')
obj.select('**label name**') # <-- the label in which u want to search message
obj.search(None, 'FROM', '"LDJ"') 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-07T16:42:21.920

据谷歌称，[标签的访问方式与 IMAP 文件夹完全相同。](http://mail.google.com/support/bin/answer.py?ctx=gmail&hl=en&answer=75725)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-26T20:25:52.173

将 imaplib 与 Gmail 一起使用的最简单方法是使用 Gmail Imap[扩展页面](https://developers.google.com/gmail/imap_extensions#special-use_extension_of_the_list_command)`X-GM-RAW`中描述的属性。

该过程将是这样的：

首先使用适当的电子邮件和密码连接到该帐户：

```
c = imaplib.IMAP4_SSL('imap.gmail.com', 993)
email = 'eggs@spam'
password = 'spamspamspam'
c.login(email, password) 
```

然后连接到文件夹/标签之一：

```
c.select("INBOX") 
```

如有必要，您可以使用 列出所有可用的文件夹/标签`c.list()`。

最后，使用搜索方法：

```
gmail_search = "has:attachment eggs OR spam"
status, data = c.search(None, 'X-GM-RAW', gmail_search) 
```

您可以在[gmail 高级搜索](https://support.google.com/mail/answer/7190?hl=en)`gmail_search`中使用相同的搜索语法 。

搜索命令将返回命令的状态以及与您的 gmail_search 匹配的所有消息的 ID。

在此之后，您可以通过 id 获取每条消息：

```
for id in data[0].split():
    status, data = gmail.fetch(id, '(BODY[TEXT])') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-09T00:38:53.877

我很惊讶 imaplib 没有做很多响应解析。似乎响应被精心设计为难以解析。

FWIW，回答我自己的问题：c.search(None, 'GM')

（我不知道 '(\HasNoChildren) "/"' 部分是关于什么的。）

# vba - 创建压缩（或压缩）文件夹

> ID：179031
> 
> 赞同：6
> 
> 时间：2008-10-07T15:26:43.947
> 
> 标签：vba, vb6

有没有办法以编程方式在 Windows 中创建压缩文件夹？我看不到使用 FileSystemObject 执行此操作的方法（尽管有“压缩”属性）。

我见过 zip dll，但如果可能的话，我宁愿避免重新分发 dll。毕竟，Windows XP 本身就支持压缩文件夹。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-07T15:29:46.373

看看以下链接：

[http://www.rondebruin.nl/windowsxpzip.htm](http://www.rondebruin.nl/windowsxpzip.htm)

[http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=1383147&SiteID=1](http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=1383147&SiteID=1)

从第[一个链接](http://www.rondebruin.nl/windowsxpzip.htm) 示例中剥离重要部分可能就足够了。

```
Sub NewZip(sPath)
'Create empty Zip File
'Changed by keepITcool Dec-12-2005
    If Len(Dir(sPath)) > 0 Then Kill sPath
    Open sPath For Output As #1
    Print #1, Chr$(80) & Chr$(75) & Chr$(5) & Chr$(6) & String(18, 0)
    Close #1
End Sub

Function Split97(sStr As Variant, sdelim As String) As Variant
'Tom Ogilvy
    Split97 = Evaluate("{""" & _
                       Application.Substitute(sStr, sdelim, """,""") & """}")
End Function

Sub Zip_File_Or_Files()
    Dim strDate As String, DefPath As String, sFName As String
    Dim oApp As Object, iCtr As Long, I As Integer
    Dim FName, vArr, FileNameZip

    DefPath = Application.DefaultFilePath
    If Right(DefPath, 1) <> "\" Then
        DefPath = DefPath & "\"
    End If

    strDate = Format(Now, " dd-mmm-yy h-mm-ss")
    FileNameZip = DefPath & "MyFilesZip " & strDate & ".zip"

    'Browse to the file(s), use the Ctrl key to select more files
    FName = Application.GetOpenFilename(filefilter:="Excel Files (*.xl*), *.xl*", _
                    MultiSelect:=True, Title:="Select the files you want to zip")
    If IsArray(FName) = False Then
        'do nothing
    Else
        'Create empty Zip File
        NewZip (FileNameZip)
        Set oApp = CreateObject("Shell.Application")
        I = 0
        For iCtr = LBound(FName) To UBound(FName)
            vArr = Split97(FName(iCtr), "\")
            sFName = vArr(UBound(vArr))
            If bIsBookOpen(sFName) Then
                MsgBox "You can't zip a file that is open!" & vbLf & _
                       "Please close it and try again: " & FName(iCtr)
            Else
                'Copy the file to the compressed folder
                I = I + 1
                oApp.Namespace(FileNameZip).CopyHere FName(iCtr)

                'Keep script waiting until Compressing is done
                On Error Resume Next
                Do Until oApp.Namespace(FileNameZip).items.Count = I
                    Application.Wait (Now + TimeValue("0:00:01"))
                Loop
                On Error GoTo 0
            End If
        Next iCtr

        MsgBox "You find the zipfile here: " & FileNameZip
    End If
End Sub 
```

# open-source - UTM 和 MGRS 到纬度/经度的转换源代码？

> ID：179041
> 
> 赞同：3
> 
> 时间：2008-10-07T15:28:06.207
> 
> 标签：open-source, latitude-longitude, utm

有哪些开源/公共领域软件可以在纬度/经度、UTM（通用变换墨卡托）和 MGRS（军用网格参考系统）之间进行转换？我们目前正在使用 VB6 库，并且更愿意使用另一种语言和更长的谱系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-07T15:37:35.547

[项目4](http://trac.osgeo.org/proj/)；我不知道它是否执行 MGRS，但我似乎记得上次使用它时它执行了 Lat/Lon -> UTM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-07T15:55:56.883

看看[这个问题](https://stackoverflow.com/questions/41937/converting-latitudelongitude-to-alberta-10-tm-projection)和[这个问题](https://stackoverflow.com/questions/176137/java-convert-latlon-to-utm)。

# font-size - 编程的字体大小？

> ID：179048
> 
> 赞同：12
> 
> 时间：2008-10-07T15:28:54.783
> 
> 标签：font-size

阅读[此](https://stackoverflow.com/questions/4689/recommended-fonts-for-programming)问题后，我安装了 Consolas。问题是，现在文字似乎太小了。我必须将其调整为 12 号才能舒适地使用它。其他人在切换到 Consolas（或任何其他字体）时会遇到这种情况吗？我的眼睛只是需要适应这种新字体还是表明我的视力正在恶化？

我的分辨率是 1280x1024

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-08-12T13:54:36.487

我在我的 1440x900 笔记本电脑 (Windows XP) 上使用 11pt 的 Consolas。我使用 10pt 已经有一段时间了，但我发现自己眼睛疲劳，所以我为我正在使用的所有开发工具、编辑器和 shell 设置了 11pt。

但是，如果 11pt Consolas 小一点，我会更开心。我不喜欢 Consolas 10pt 和 11pt 之间的巨大差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-07T15:39:27.493

I am a huge fan of ProFontWindows @ size 7 on a 24" monitor. Its small but very legible and it allows me to fit a lot more code on my coding screen.

[http://www.tobias-jung.de/seekingprofont/](http://www.tobias-jung.de/seekingprofont/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-17T10:55:47.577

这些天我一直在 14pt 使用[Source Code Pro](https://store1.adobe.com/cfusion/store/html/index.cfm?event=displayFontPackage&code=1960)（Adobe 的开源字体）。我曾经使用较小字体的字体，但我不想让我的眼睛疲劳，我发现 14 的可读性非常好，而且完全不会让我的眼睛疲劳。

我通常可以在我的终端上使用这种字体/大小来放置 44 行代码。我认为这已经足够了，再加上少用眼是无价的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-07T16:39:13.347

我在 Windows 上使用 Consolas 10pt，发现无论我的分辨率是什么——或者更具体地说，显示器的 DPI——它都非常清晰。这是在双 19" 1280x1024 显示器、我家 19" 1440x900、15" 笔记本电脑 1024x768 和 15.4" 笔记本电脑 1440x900（这是我什至考虑调整字体大小的唯一一台）上。

现在，它变得棘手的是在 Mac 世界中。（是的，我做了一件坏事，并将字体复制到我的 Mac 上用于 XCode。）在 Mac 世界中，无论我连接到什么显示器，我发现 10pt 完全难以辨认。对于 Mac，我将自己调整到（我认为）12 或 14pt。然而，在屏幕上，对我来说，它的大小与 Windows 中的 10pt 大致相同，所以它周围都是同一个网络。

我曾经**喜欢**ProFont。直到我发现了康索拉斯。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-07T15:44:38.717

Consolas 9pt on 1280 x 1024 on 19" does it for me, but I'm sure Consolas wins the popularity contest at any size.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-07T15:46:45.577

I use 11pt, bold.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-07T15:31:04.670

我使用 consolas 11 pt，这对我来说很大，但我使用 1440 x 900 的分辨率。

PS。当你在这个游戏中工作时，检查你的眼睛永远不会有任何伤害。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-07T15:36:14.037

我也在 12 点使用 Consolas；我想我曾经是 10 点快递新。

没有显示器的大小，屏幕的分辨率是无关紧要的。即使分辨率相同，笔记本电脑上的字体也需要比 24 英寸显示器更大的字体

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-07T15:46:22.223

Consolas 9pt (I just wish FireFox will 'fix' their font size determination) on 22" and 24" monitors.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-07T15:48:06.150

Perhaps irrelevant, but make sure you have ClearType enabled. It makes the font look crisper.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-07T15:53:26.077

Consolas 10pt

I also invert my IDE colors to run light yellow type on a dark blue background. I think it was an old Borland standard configuration that I have since adopted.

Anyway -- I find it helps a lot on eyestrain (you're not staring into white light all day) and as such it helps with text clarity.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-07T16:42:51.327

我的 gvim 说我使用“Misc Fixed Semi-Condensed 10”。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-10-07T15:32:44.277

我使用 consolas 9 pt @ 1280x800，15.4 英寸显示器（笔记本电脑）

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-10-07T15:34:52.977

我在 1280x1024 屏幕上使用 consolas 10 点，在 1600x1200 屏幕上使用 11 点。即使是小尺寸也非常清晰。

我将 WinMerge 设置为在 8 点使用它，它仍然可读，并且我可以并排比较代码而无需左右滚动（尽管我不想用它来进行这种大小的编码）。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-10-07T15:35:11.543

我在 2x 1680x1050 (22") 上使用 Consolas 10pt。一旦你习惯了它就很好。根据我的经验，我尝试过的其他设置要好得多，即使使用其他字体也是如此。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-08-29T09:39:46.080

我使用[Inconsolata](http://www.levien.com/type/myfonts/inconsolata.html) 11 pt。使用 iTerm2 阅读效果很好

# javascript - 是否有任何好的或可靠的方法来确定 JavaScript 错误在哪里仅使用 Internet Explorer 错误消息？

> ID：179054
> 
> 赞同：8
> 
> 时间：2008-10-07T15:29:44.673
> 
> 标签：javascript, debugging, internet-explorer

我正在编写一个应用程序，由于各种原因涉及 Internet Explorer（IE7，记录在案）、ActiveX 控件和大量 JavaScript，这些 JavaScript 分布在多个 .js 中。

我们的一位远程测试人员遇到了一条错误消息，而 IE 的错误消息说明了以下内容：

```
Line: 719
Char: 5
Error: Unspecified Error
Code: 0
URL: (the URL of the machine) 
```

只有一个 JavaScript 文件有超过 719 行，第 719 行是空行（在这种情况下）。

项目中涉及的 HTML 或其他文件都没有 719 行或更多行，但生成的 HTML（它是一种服务器端包含的东西），至少正如 IE 从“查看源代码”显示的那样确实有 719 行或更多行- 但是第 719 行（在这种情况下）是一个结束表格行标记（换句话说，没有 JavaScript）。

在这种情况下，“查看生成的源代码”的结果只有 310 行。

我想可能是整个页面，以及与 HTML 的其余部分内联表示的 JavaScript 文件的内容，可能是错误所指的地方，但我不知道有什么好的方法来查看会发生什么是，

那么，给定来自 Internet Explorer 的 JavaScript 错误，**其中行号是唯一的提示**，但页面实际上分布在多个文件中？

**更新：**由于用户是远程的并且由于各种网络原因，使用诸如 Visual Studio 2008 之类的东西（顺便说一下，它有很棒的 JavaScript 调试）来调试它是不可能的，这一事实加剧了这个问题。我仅限于让我们中的一个人查看源代码，以尝试找出它在哪一行代码上出现问题。

**更新2：**真正的答案（如下所示）似乎是“不，不是真的”。尽管如此，罗伯特·J·沃克（Robert J. Walker）关于它被淘汰的说法确实让我指出了正确的方向，因为我认为这是违规的路线。但由于这不是我所说的好或可靠的（IE 的错，不是 Robert J. Walker 的错），我将接受“不，不是真的”的答案。我不确定这是否是适当的礼仪。如果不是通过评论，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-07T15:44:04.677

简而言之。并不真地。首先尝试在 FF 中查找错误，如果失败，您可以使用[Visual Web Developer](http://www.berniecode.com/blog/2007/03/08/how-to-debug-javascript-with-visual-web-developer-express/)获得几乎一样好的调试器。在大多数情况下，调试 IE 很糟糕。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-07T15:35:24.863

我发现调试 javascript 的最佳方法是在我认为代码损坏的地方附近添加几个 Response.Write() 或警报消息。未显示的写入或警报最接近代码的问题区域。

我这样做是因为我还没有找到更简单的方法。

更新：如果您使用这种调试方法，您也可以对变量的内容使用写入/警报。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-07T15:39:30.660

IE7 中的 Web 开发人员工具栏可以为您提供呈现的源视图。

```
View > Source > Dom (Page) 
```

当您考虑 IE 为脚本错误提供的行号时，这可能更准确。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-07T17:55:57.187

提示：我发现很多 IE 错误信息行号都*减了一个！*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-07T15:43:43.303

通过在您的服务器上为该页面安装[firebug lite ：](http://getfirebug.com/lite.html)

```
<script type='text/javascript' 
    src='http://getfirebug.com/releases/lite/1.2/firebug-lite-compressed.js'>
</script> 
```

您可以使用以下命令登录到虚拟控制台，

```
firebug.d.console.log("stuff and things")
firebug.d.console.dir( {returnedObject:["404", "Object Not Found"]} ) 
```

并要求您的远程测试人员按 F12 为您获取更多详细信息。

我有点怀疑那里有一个未终止的字符串或一个不匹配的括号或括号。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-07T16:47:34.283

不，没有办法让内置的异常消息变得更少。

相反，您需要使用带有 IE 的调试器。我找到的最好的教程在这里：

[http://www.berniecode.com/blog/2007/03/08/how-to-debug-javascript-with-visual-web-developer-express/](http://www.berniecode.com/blog/2007/03/08/how-to-debug-javascript-with-visual-web-developer-express/)

按照这些说明操作，当发生错误或异常时，您将看到正确文件中的确切行。您还将看到当前范围内的变量值，并且可以设置“监视”项来帮助您进行调试。

除此之外，如果您需要像 Firebug 这样的日志记录和 CSS Cascade 检查，我使用 DebugBar 和 JSCompanion 取得了不错的效果：

[http://www.debugbar.com/](http://www.debugbar.com/) [http://www.my-debugbar.com/wiki/CompanionJS/HomePage](http://www.my-debugbar.com/wiki/CompanionJS/HomePage)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-07T15:36:37.250

试试萤火虫。我可用于 IE： http: [//getfirebug.com/lite.html](http://getfirebug.com/lite.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-07T15:38:36.170

您是否使用 Firebug 检查过 Firefox 中是否也存在此错误？这将是我试图找出这个错误发生在哪里的第一步。

如果它在 Firefox 中不存在，那么我将继续在 IE 中启用脚本调试。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-07T15:41:44.337

我唯一的建议：不要像这样使用 IE 进行调试。这是主流浏览器中绝对最差的：我尝试使用 Firefox（带有 Firebug）或 Chrome/Safari 来处理大多数问题。

如果您绝对必须使用 IE，请安装[IE Developer Toolbar](http://www.microsoft.com/en-us/download/details.aspx?id=18359)（它似乎对 JavaScript 错误没有多大帮助），和/或安装 Script Debugger

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-07T15:38:44.220

我使用[Web 开发助手](http://projects.nikhilk.net/WebDevHelper/)

# c# - 如何在运行时将键值对存储在应用程序设置中？

> ID：179063
> 
> 赞同：4
> 
> 时间：2008-10-07T15:31:39.490
> 
> 标签：c#, .net, settings, app-config

如何在运行时使用应用程序设置 api 将对象的动态键值对存储在 app.config 中？

我一直在努力解决问题，但找不到任何有意义的示例或文档。

我似乎无法在 XML 中序列化 .Net 字典类以将它们存储在 app.config

是使用自定义 XML 序列化类的唯一方法，还是有其他方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-07T15:47:59.550

你应该能够做这样的事情：

```
// Open App.Config of executable
System.Configuration.Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);

// Add an Application Setting with a name Key and a Value stored in variable called Value
config.AppSettings.Settings.Add("Key", Value );

// Save the changes in App.config file.
config.Save(ConfigurationSaveMode.Modified); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-08T09:51:00.113

经过更多搜索网络，我发现了一篇非常好的（虽然很长）文章，它详细描述了 .Net 配置模型：

[揭开 .NET 2.0 配置的奥秘](http://www.codeproject.com/KB/dotnet/mysteriesofconfiguration.aspx)

我还发现了一些非常有用的东西：

[配置部分设计器](http://www.codeplex.com/csd)

一个视觉工作室，用于直观地设计配置部分并生成相应的 XSD 文件。我希望有人觉得这很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-07T16:48:43.157

一直认为在运行时更改 app.config 被认为是不好的做法。app.config 应该用于程序设置和配置；不适用于应用程序实际修改的动态事物。

建议您为动态对象创建单独的“KeyValue.xml”文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T15:41:38.020

根据您的具体需要，您可以尝试 System.Collections.ObjectModel.KeyedCollection<TKey, TValue>。这仅在您可以从项目本身派生项目的密钥时才有效，但在这种情况下，它可以用于此目的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-07T15:41:49.860

它是通用字典吗？如果是这样的话：

[XML 可序列化通用字典](http://weblogs.asp.net/pwelter34/archive/2006/05/03/444961.aspx)

# asp.net-mvc - 在 ASP.NET MVC 中使用 HttpRuntime.Cache 是否发生了变化？

> ID：179072
> 
> 赞同：1
> 
> 时间：2008-10-07T15:34:36.223
> 
> 标签：asp.net-mvc, caching, httpruntime.cache

因此，在准备对控制器进行单元测试时，我正在查看我的标准缓存实用程序，并想，嘿，访问 HttpRuntime.Cache 在 MVC 中直接被认为是有害的吗？

我将缓存包装在一个代理类中，该类实现了一个类似缓存的接口（虽然简单得多），这样我就可以在测试期间模拟它。但我想知道这是否已经在新框架中为我完成了。但是，我什么也找不到。

这是我如何做的一个想法：

```
public ActionResult DoStuffLol(guid id)
{
  var model = CacheUtil.GetOrCreateAndStore(
                  "DoStuffLolModel",
                  () =>
                  {
                    /* construct model here; time consuming stuff */
                    return model;
                  });
  return View("DoStuffLol", model);
} 
```

那么，访问缓存的旧模式是否发生了变化？在 MVC 中缓存操作结果是否有更好的模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-07T17:01:02.337

将 OutputCache 属性添加到您的控制器操作中，以便告诉框架为您缓存输出。[您可以在ScottGu 关于 ASP.NET Preview 4 的博客文章](http://weblogs.asp.net/scottgu/archive/2008/07/14/asp-net-mvc-preview-4-release-part-1.aspx)中阅读有关此属性的更多信息。

[但是，不要将其与 Authorize 属性结合使用](http://weblogs.asp.net/stephenwalther/archive/2008/08/29/asp-net-mvc-tip-40-don-t-cache-pages-that-require-authorization.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-04T18:18:27.557

不，但是缓存在 3.5 中发生了变化。3.5 包括包装类，这些类使得对 asp.net 中使用的许多静态类的存根/模拟变得容易。

[http://www.codethinked.com/post/2008/12/04/Using-SystemWebAbstractions-in-Your-WebForms-Apps.aspx](http://www.codethinked.com/post/2008/12/04/Using-SystemWebAbstractions-in-Your-WebForms-Apps.aspx)

# sql-server - 多索引与多列索引

> ID：179085
> 
> 赞同：756
> 
> 时间：2008-10-07T15:36:44.597
> 
> 标签：sql-server, database, indexing

*跨多列创建一个索引与创建多个索引（每*列一个索引）有什么区别？

有什么理由为什么应该使用一个而不是另一个？

例如：

```
Create NonClustered Index IX_IndexName On TableName
(Column1 Asc, Column2 Asc, Column3 Asc) 
```

相对：

```
Create NonClustered Index IX_IndexName1 On TableName
(Column1 Asc)

Create NonClustered Index IX_IndexName2 On TableName
(Column2 Asc)

Create NonClustered Index IX_IndexName3 On TableName
(Column3 Asc) 
```

* * *

## 回答 #1

> 赞同：370
> 
> 时间：2008-10-07T16:10:57.883

我同意[凯德鲁斯](https://stackoverflow.com/a/179109/50776)的观点。

这篇文章应该让你走上正轨：

*   [SQL Server 2005/2008 中的索引 – 最佳实践，第 1 部分](http://www.sqlskills.com/BLOGS/KIMBERLY/post.aspx?id=19f0ce1c-0d2f-4ad5-9b13-a615418422e0)
*   [SQL Server 2005/2008 中的索引 – 第 2 部分 – 内部](http://www.sqlskills.com/blogs/kimberly/indexes-in-sql-server-20052008-part-2-internals/)

需要注意的一点是，聚集索引应该有一个唯一键（我推荐的标识列）作为第一列。基本上，它可以帮助您在索引末尾插入数据，并且不会导致大量磁盘 IO 和页面拆分。

其次，如果您在数据上创建其他索引并且它们构造巧妙，它们将被重用。

例如，假设您在三列上搜索表格

州、县、邮编。

*   您有时仅按州搜索。
*   您有时会按州和县进行搜索。
*   您经常按州、县、邮编搜索。

然后是州、县、邮编的索引。将在所有这三个搜索中使用。

如果您仅通过 zip 进行大量搜索，那么上述索引将不会被使用（无论如何，SQL Server 都不会使用），因为 zip 是该索引的第三部分，并且查询优化器不会认为该索引有帮助。

然后，您可以仅在 Zip 上创建将在此实例中使用的索引。

顺便说一句，[我们可以利用这样一个事实，即使用多列索引，第一个索引列始终可用于搜索](https://use-the-index-luke.com/sql/where-clause/the-equals-operator/concatenated-keys)，当您仅按“状态”搜索时，它是有效的，但不如“状态”上的单列索引高效'

我想您正在寻找的答案是它取决于您经常使用的查询的 where 子句以及您的 group by。

这篇文章会有很大帮助。:-)

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2008-10-07T15:41:55.880

是的。我建议您查看[Kimberly Tripp 关于索引的文章](http://www.sqlskills.com/blogs/kimberly/category/indexes/)。

如果一个索引是“覆盖”的，那么除了索引之外不需要使用任何东西。在 SQL Server 2005 中，您还可以向索引中添加不属于键的附加列，从而消除对行其余部分的访问。

拥有多个索引，每个索引都在一个列上可能意味着根本只使用一个索引 - 您必须参考执行计划以查看不同索引方案提供的效果。

您还可以使用调整向导来帮助确定哪些索引可以使给定的查询或工作负载表现最佳。

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2008-10-07T15:46:51.520

多列索引可用于引用*所有*列的查询：

```
SELECT *
FROM TableName
WHERE Column1=1 AND Column2=2 AND Column3=3 
```

这可以使用多列索引直接查找。另一方面，最多可以使用一个单列索引（它必须查找所有具有 Column1=1 的记录，然后检查每个记录中的 Column2 和 Column3）。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2008-10-07T19:19:31.153

似乎遗漏的一项是星形变换。 [索引交集](http://www.databasejournal.com/features/mssql/article.php/1438821)运算符通过在对事实表执行任何 I/O 之前计算每个谓词命中的行集来解析谓词。在星型模式中，您将为每个单独的维度键编制索引，并且查询优化器可以通过索引交集计算来解析要选择的行。各个列上的索引为此提供了最佳的灵活性。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2008-10-07T15:46:19.897

如果您的查询经常使用一组相对静态的列，则创建一个包含所有列的覆盖索引将显着提高性能。

通过在索引中放置多个列，优化器只需在列不在索引中时直接访问表。我在数据仓库中经常使用这些。缺点是这样做会花费大量开销，尤其是在数据非常不稳定的情况下。

在单列上创建索引对于 OLTP 系统中经常出现的查找操作很有用。

您应该问自己为什么要索引列以及如何使用它们。运行一些查询计划并查看它们何时被访问。索引调优既是本能，也是科学。

# visual-studio - 工具栏元数据在文件系统上的 Visual Studio 中的位置

> ID：179094
> 
> 赞同：1
> 
> 时间：2008-10-07T15:38:24.937
> 
> 标签：visual-studio

每当我尝试向工具栏添加新组件时，我的 IDE 都会崩溃。我已经尝试过重置工具栏。

文件系统上有关工具栏的信息在哪里，以查看可能有问题的控件是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-07T15:54:52.500

找到位置：

C:\users\\AppData\Local\Microsoft\VisualStudio\9.0

4 个文件：toolbox.tbd、toolbox_reset.tbd、toolboxIndex.tbd、toolboxIndex_reset.tbd

# com - ActiveX / COM / VB6 企业项目的构建过程

> ID：179099
> 
> 赞同：5
> 
> 时间：2008-10-07T15:39:04.453
> 
> 标签：com, vb6, build-process, build-automation, version-control

我们使用微软的 ActiveX/COM (VB6) 技术开发了一个软件系统。去年，我对自动化构建过程和整个 SCM 越来越感兴趣。我在网上大量搜索了有关如何使用基于 COM 的软件系统进行 scm 的最佳实践的信息。

COM 的“问题”是，引用组件通过唯一的接口 id 保存引用。当您重新编译引用的组件时，id 可能会更改并且引用不再有效。这里的主要问题是，iid 被编译成二进制文件。因此，当我不想将编译后的文件签入版本控制时，每个开发人员都必须编译他/她自己的版本并获取其他 id。

当我想在干净的构建机器上检查源代码来编译系统时，这是不可能的，因为所有的引用都是无效的（没有二进制文件，没有接口 id）。

我只是想知道，如果有一些最佳实践，如何为 COM 项目（VB6）设置自动构建系统？

**编辑：** 是的，我知道兼容性设置。但是以这种情况为例，我想在没有任何二进制文件的干净构建机器上构建 wohle 系统。当您说项目兼容二进制时，您必须提供与该项目兼容的二进制文件。

我想我必须编写一个自定义构建工具，它在编译项目之前和之后修改项目文件中的引用和兼容性设置。

因为 VB6 / COM 是一种非常广泛的技术，我只是想必须有一个现成的解决方案。

我们通常使用二进制兼容性进行编译。当我们修改一个组件的公共接口时，我们以项目兼容性进行编译。但是当你改变一个被许多其他组件使用的基本组件的接口时，你必须手动将所有引用项目更改为项目兼容性，重新编译它们并改回二进制兼容性。这就是我想要自动化的主要过程。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-07T18:01:52.293

您可以通过将项目的兼容性设置从“无兼容性”更改为“二进制兼容性”来告诉 VB6 重用 GUID（IID 的 CLSID 的 LIBID 等）。您可以在 Project-> *Your-Project* Properties 下找到这些设置。兼容性设置位于“项目属性”窗口的“组件”选项卡上。有三种选择：

*   不兼容
*   项目兼容性
*   二进制兼容性

以下是[MSDN](http://support.microsoft.com/kb/161137)对它们的评价：

> ### 不兼容
> 
> 使用此设置，不强制执行兼容性。每次生成或编译项目时，Visual Basic 都会创建新的接口 ID 和类 ID。构建的每个版本只能用于为使用该组件的特定构建而创建的应用程序。
> 
> ### 项目兼容性
> 
> 使用此设置，您可以使您的项目与特定组件项目兼容。在生成新的类型库信息时，会维护类型库标识符，以便测试项目仍然可以引用组件项目。此设置用于在测试期间保持兼容性。因此，一旦组件被释放，它的行为就与“无兼容性”设置相同。
> 
> ### 二进制兼容性
> 
> 编译项目时，Visual Basic 仅在必要时创建新的类和接口 ID。它保留了以前版本的类和接口 ID，以便使用早期版本编译的程序将继续工作。如果您所做的更改会导致版本不兼容，Visual Basic 会警告您。如果您想保持与旧版本的 ActiveX 组件的兼容性，这是您需要使用的设置。

听起来您当前正在使用**No Compatibility**进行编译。正如 MSDN 文章所述，您需要使用**二进制兼容性**来保持组件的新版本与旧版本兼容。您现在可以通过执行以下操作来做到这一点：

*   每个项目编译一次，**不兼容**

*   将这些“干净”版本保存到构建人员可以轻松访问的文件夹中，例如网络共享，或者将它们置于源代码控制中。

*   返回并将所有项目更改为“二进制兼容性”并将“兼容文件”指向您刚刚保存在网络/源代码管理中的相应版本（不要将兼容文件指向您正在编译的相同路径项目到。兼容文件应该是原始组件的单独副本，不会更改。它的存在只是为了让 VB 可以在重新编译时将该文件中的 ID 复制到您的项目中）。

每次重新编译项目时，它们都会重用组件的兼容（原始）版本中的 GUID。

编辑：正如 Joe 在评论中提到的，您还必须认识到您的类接口何时发生了变化（即，当接口发生足够的变化时，您可以再保持与以前版本的二进制兼容性）。发生这种情况时，您希望彻底摆脱以前版本的组件：重新编译一个新的“干净”版本（即不兼容）并在将来的构建中使用该新版本作为兼容文件。但是，重要的是要注意只有在类接口（属性和方法）发生更改时才应该重新开始。事实上，当项目不再与以前版本的组件兼容时，VB 会警告您。

### 如果你想生活在边缘...

在我工作的地方，我们倾向于（ab）在我们的大多数项目中使用 No Compatibility，即使它不是真正正确的做事方式（你*应该*使用 Binary Compatibility）。在我们公司，这是一种懒惰，因为我们有一个自动构建工具，可以为我们编译所有项目，该工具的主要功能之一是可以自动修复项目之间损坏的项目引用。由于构建工具为我们解决了这个问题，因此使用二进制兼容性的动机较少。

### 为什么二进制兼容性更好（或者......为什么你不应该做我们所做的）

二进制兼容性通常是更好选择的几个原因：

*   微软这么说

*   如果您的所有组件都与软件的先前版本二进制兼容，那么您可以轻松地重新编译单个组件并将其重新分发给您的客户。这使得错误修复/补丁更易于部署。如果您在项目中使用 No Compatibility，则每次需要发布一个小补丁时，您都必须重新编译和重新分发整个应用程序，因为较新的组件（可能）无法与较旧的组件一起使用。

*   您正在尽自己的一份力量维护 COM 标准：在 COM 中，类 ID 和接口 ID 应该唯一标识一个类或接口。如果您的类和/或接口在构建之间没有改变，那么就没有理由为这些类和接口生成新的 ID（事实上，同一个类会有多个 ID）。二进制兼容性允许您跨构建维护相同的 ID，这意味着您是一个好公民并遵循 COM 约定。

*   减少注册表噪音。如果您总是向与旧版本二进制不兼容的客户部署新组件，则每个新版本都会向注册表添加新信息。除其他事项外，每个新接口和类 ID 都必须注册。如果您保持所有二进制兼容，那么安装程序只需将注册表项添加到一个位置，因为您的类 ID 和接口 ID 不会更改。

*   如果您要公开其他第三方应用程序正在使用的公共 API 或组件，您肯定会希望使用二进制兼容性，这样您就不会破坏依赖于您的代码的第三方软件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-08T16:33:01.830

[视觉生成专业版](http://www.kinook.com/VisBuildPro/)。如果您仍然停留在 VB6 领域，并且必须构建专业产品，我强烈建议您研究这个产品。它提供免费试用，每一分钱都物有所值（此外，它在 .Net 和其他平台的持续集成方面做得非常好。）自从我们开始使用它以来，它在每次发布时都将我们从 DLL 地狱中拯救了出来。我知道没有其他方法可以在 VB6 中创建一个像样的构建框。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-17T06:46:49.367

正如 Mike Spros 所建议的，您应该使用 Binary Compatibility。您可以（并且应该）在干净的机器上构建。为此，您可以在源代码控制系统的“兼容”目录中保留一份当前生产二进制文件（ActiveX DLL 和 OCX）。当您选择二进制兼容性时，所有项目都应参考此副本。例如，将新的二进制文件放到 ...\Release 中，兼容的二进制文件放在 ...\Compatible 中。当新版本投入生产时，您将所有内容从 ...\Release 复制到 ...\Compatible。通过这种方式，您可以保持从一个版本到下一个版本的兼容性。

在二进制兼容模式下，如果您向类中添加新方法，VB 将创建一个新的 IID。请记住，在 COM 中，接口是不可变的。如果您对界面进行最轻微的更改，那么您就是在创造新的东西。VB 遵守 COM 的这条规则，但使用一些烟雾和镜子来防止破坏旧的客户端代码。因为 VB “知道”新接口是旧接口的 100% 超集（这是二进制兼容性所确保的），所以它可以使用“接口转发”。接口转发只是将所有引用从旧接口重定向到新接口。如果没有这个技巧，您将不得不为您修改的任何 ActiveX 组件创建新版本（具有不同的名称和 CLSID）。DLL Hell 将变成 DLL Armargeddon！

VB 将所有接口转发信息存储在组件的资源中。当您注册组件时，它会将所有接口 IID 写入 HKCR\Interface。较旧的接口将在其中包含转发信息。只有“真正的”接口才会引用实际的 coclass。

# c# - Getting a System.Type from type's partial name

> ID：179102
> 
> 赞同：39
> 
> 时间：2008-10-07T15:40:10.487
> 
> 标签：c#, .net, reflection, types

I want to get a `System.Type` given only the type name in a `string`.

For instance, if I have an object:

```
MyClass abc = new MyClass(); 
```

I can then say:

```
System.Type type = abc.GetType(); 
```

But what if all I have is:

```
string className = "MyClass"; 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-12-05T18:34:08.130

这取决于类是哪个程序集。如果它在`mscorlib`或调用程序集，你所需要的就是

```
Type type = Type.GetType("namespace.class"); 
```

但如果它是从其他程序集引用的，则需要执行以下操作：

```
Assembly assembly = typeof(SomeKnownTypeInAssembly).Assembly;
Type type = assembly.GetType("namespace.class");

//or

Type type = Type.GetType("namespace.class, assembly"); 
```

* * *

如果您只有类名“MyClass”，那么您必须以某种方式获取名称空间名称（或名称空间名称和程序集名称，以防它是引用的程序集）并将其与类名连接。就像是：

```
//if class is in same assembly
var namespace = typeof(SomeKnownTypeInNamespace).Namespace;
Type type = Type.GetType(namespace + "." + "MyClass");

//or for cases of referenced classes
var assembly = typeof(SomeKnownTypeInAssembly).Assembly;
var namespace = typeof(SomeKnownTypeInNamespace).Namespace;
Type type = assembly.GetType(namespace + "." + "MyClass");
//or
Type type = Type.GetType(namespace + "." + "MyClass" + ", " + assembly.GetName().Name); 
```

* * *

如果您一无所有（甚至不知道程序集名称或命名空间名称），而只有类名，那么您可以查询整个程序集以选择匹配的字符串。**但这应该慢很多**：

```
Type type = AppDomain.CurrentDomain.GetAssemblies()
                                   .SelectMany(x => x.GetTypes())
                                   .FirstOrDefault(x => x.Name == "MyClass"); 
```

**请注意，这将返回第一个匹配的类，因此如果您在程序集/命名空间中有多个具有相同名称的类，则不需要非常准确。**无论如何，缓存这些值在这里是有意义的。**稍微快一点的方法是假设有一个默认命名空间**：

```
Type type = AppDomain.CurrentDomain.GetAssemblies()
                                   .Select(a => new { a, a.GetTypes().First().Namespace })
                                   .Select(x => x.a.GetType(x.Namespace + "." + "MyClass"))
                                   .FirstOrDefault(x => x != null); 
```

但这又是一个假设，即您的类型将与程序集中的其他随机类具有相同的命名空间；太脆了，不太好。

* * *

[如果您想要其他域的类，您可以通过此链接](https://stackoverflow.com/questions/388554/list-appdomains-in-process)获取所有应用程序域的列表。然后，您可以对每个域执行如上所示的相同查询。如果尚未加载类型所在的程序集，则必须使用等手动加载`Assembly.Load`它`Assembly.LoadFrom`。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2008-10-07T15:42:24.227

```
Type type = Type.GetType("foo.bar.MyClass, foo.bar"); 
```

[MSDN](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx). Make sure the name is [Assembly Qualified](http://msdn.microsoft.com/en-us/library/system.type.assemblyqualifiedname.aspx).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-07T16:51:08.330

在获取类型后创建类的实例并调用方法 -

```
Type type = Type.GetType("foo.bar.MyClass, foo.bar");
object instanceObject = System.Reflection.Activator.CreateInstance(type);
type.InvokeMember(method, BindingFlags.InvokeMethod, null, instanceObject, new object[0]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-07T15:42:32.043

```
Type type = Type.GetType("MyClass"); 
```

Make sure to include the namespace. There are overloads of the method that control case-sensitivity and whether an exception is thrown if the type name isn't found.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-31T11:59:33.713

从当前或其他组件中获取类型的另一种方法。

（假设类命名空间包含它的程序集）：

* * *

```
public static Type GetType(string fullName)
{
    if (string.IsNullOrEmpty(fullName))
        return null;
    Type type = Type.GetType(fullName);
    if (type == null)
    {
        string targetAssembly = fullName;
        while (type == null && targetAssembly.Length > 0)
        {
            try
            {
                int dotInd = targetAssembly.LastIndexOf('.');
                targetAssembly = dotInd >= 0 ? targetAssembly.Substring(0, dotInd) : "";
                if (targetAssembly.Length > 0)
                    type = Type.GetType(fullName + ", " + targetAssembly);
            }
            catch { }
        }
    }
    return type;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-09-02T16:30:21.560

`Type.GetType(...)`如果无法使用运算符，有时可能会失败`typeof`。

相反，您可以反映当前域中的程序集以执行此操作。

检查我在[这个线程上的回复](https://stackoverflow.com/questions/2367652/how-type-gettype-works-when-given-partially-qualified-type-name/7286354#7286354)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-25T06:10:38.633

下面是一个从名称和参数创建和初始化新对象的简单方法：

```
 //  Creates and initializes a new object from its name and parameters
    public Object CreateObjectByName(string name, params Object[] args)
    {
        string s = "<prefix>" + name;    // case sensitive; Type.FullName
        Type type = Type.GetType(s);
        Object o = System.Activator.CreateInstance(type, args);
        return o;
    } 
```

如何使用它的一个示例是读取包含类名[或部分类名]和参数的文件，然后将返回的对象添加到创建的对象共有的基本类型的对象列表中。

要查看您的类名 [或 ] 应该是什么样子，请暂时使用类似这样的内容 [如果您的类名为 NewClass]：

```
 string z = (new NewClass(args)).GetType().FullName; 
```

# c++ - 为什么不应该使用对智能指针的引用？

> ID：179105
> 
> 赞同：26
> 
> 时间：2008-10-07T15:41:15.680
> 
> 标签：c++, smart-pointers

我记得在某处读过使用对智能指针的引用会导致内存损坏。这仅仅是因为在智能指针被销毁后使用了它的引用吗？还是引用计数搞砸了？

感谢您的澄清

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-10-07T15:44:32.507

假设您在这里谈论 shared_ptr ......

> 这仅仅是因为在智能指针被销毁后使用了它的引用吗？

这是一个很好的答案。您可能也不绝对知道您的引用所引用的指针的生命周期。

为了解决这个问题，您需要查看 boost::weak_ptr。它不参与引用计数。当您需要使用它时，它会为您提供一个 shared_ptr，一旦您完成它就会消失。它还会让您知道何时收集了引用的指针。

来自[weak_ptr](http://www.boost.org/doc/libs/1_36_0/libs/smart_ptr/weak_ptr.htm#expired)文档

> weak_ptr 类模板存储了对已由 shared_ptr 管理的对象的“弱引用”。要访问对象，可以使用 shared_ptr 构造函数或成员函数 lock 将 weak_ptr 转换为 shared_ptr。当对象的最后一个 shared_ptr 消失并且对象被删除时，尝试从引用已删除对象的 weak_ptr 实例获取 shared_ptr 将失败：构造函数将抛出 boost::bad_weak_ptr 类型的异常，并且 weak_ptr： :lock 将返回一个空的 shared_ptr。

注意 expired() 方法也会告诉你你的 ptr 是否还在。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-07T16:08:57.230

当使用智能指针（或任何分配管理对象）时，您指望在构造函数/析构函数中定义的行为来管理 refs/derefs/locks/unlocks。因此，这些类型的对象必须是真正的对象才能正确执行。当使用对此类对象（或指针）的引用时，您正在绕过机制（并要求 wedgie）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-07T16:48:29.133

在很多情况下，对智能指针的引用是个好主意。一个明显的例子是智能指针类本身的赋值方法，它接受对另一个智能指针的*引用*作为其参数。

制作一个接受智能指针引用的方法意味着该参数不会增加智能指针的内部引用计数。这可以提高性能 - 但可能不会很多。此外，该方法无法对引用或原始智能指针做很多事情。如果您知道这些东西是什么并避免它们，那么通过引用传递就可以了。当然，智能指针的目的是避免必须知道这些事情。

此外，如果您有一个将*修改*智能指针参数值的方法，则需要作为引用传递，就像使用任何其他类型一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-07T16:49:27.353

智能指针的“智能”部分由智能指针类的构造函数、析构函数、赋值运算符和其他函数管理。通过使用引用，您可以绕过这些操作——当您的引用被初始化时构造函数不会被调用，而当您的引用超出范围时析构函数不会被调用。

本质上，对智能指针的引用是一个哑指针，具有后者所带来的所有风险和陷阱。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-07T18:14:32.873

我们有定制的智能指针，我们总是养成传递“const refsomething &”的习惯

它不会增加或减少智能指针，因此 - 更重要的是 - 避免了对 InterLockedIncrement/Decrement 的调用，这反过来又避免了[内存围栏](http://en.wikipedia.org/wiki/Memory_barrier)以及与之相关的所有事情：总线锁定、缓存失效、.. .

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-01T14:10:50.093

将对智能指针的引用传递给函数是非常安全的，并且是一个好主意。对象可能会消失，但智能指针不会，它会坐在那里说 null 至少直到函数返回。这是在其范围内为智能指针起别名的最佳方式。如果您在引用的内容上使用带有 const 修饰符的引用，那么您将拥有一个智能观察引用：

```
const smart_ptr<T>& 
```

有趣且有用的是， const 会阻止您使用引用来表示智能指针为空并删除对象，但它不会阻止原始智能指针自身为空，并且您的引用将反映该更改。

从函数返回对智能指针的引用会带来各种麻烦。

# web-services - 需要一种对 Exchange Web 服务进行身份验证的方法

> ID：179112
> 
> 赞同：5
> 
> 时间：2008-10-07T15:42:42.777
> 
> 标签：web-services, exchange-server, exchangewebservices

我正在使用 Exchange Web 服务从一个或多个人的日历中查找、创建、更新和删除约会。经理将使用该应用程序查看员工的休假时间，并根据可用性分配约会。

为了使这一切正常工作，必须将经过身份验证的用户凭据发送到 Web 服务。到目前为止，我发现有两种方法可以实现这一点：1）传入每个用户的用户名和密码，2）模拟用户使用 DefaultCredentials。DefaultCredentials 选项对我们不起作用，因为我们不允许模拟用户。

有谁知道另一种方式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-20T08:51:10.060

是否有公司政策限制阻止您使用假冒？您指的是 Windows 模拟还是 Exchange 模拟？

根据您不能使用的模拟，替代方法可能是委托访问。

如果目标是让经理查看多个邮箱，这里有一些选项：

(1) 将员工邮箱的代理访问权限授予经理。根据代表访问级别，这将允许经理查看员工邮箱并根据需要进行编辑。关于这种方法有一个警告，取决于授予访问权限的内容/方式，代表（员工）可以删除访问权限，并阻止经理查看他们的日历。

对于使用委托访问的身份验证，假设使用 Web 服务的应用程序在管理器的上下文中运行，您应该能够使用 DefaultCredentials。

(2) 创建一个具有模拟权限或委托对员工邮箱的访问权限的服务帐户。然后以服务帐户登录。

同样，这里有一些您可能会觉得有用的链接...

*   将委托访问与 Exchange Web 服务一起使用 ( [http://msdn.microsoft.com/en-us/library/bb655860.aspx](http://msdn.microsoft.com/en-us/library/bb655860.aspx) )
*   Exchange Web 服务和代理访问 ( [http://msdn.microsoft.com/en-us/library/bb204081.aspx](http://msdn.microsoft.com/en-us/library/bb204081.aspx) )
*   配置 Exchange 模拟 ( [http://msdn.microsoft.com/en-us/library/bb204095.aspx](http://msdn.microsoft.com/en-us/library/bb204095.aspx) )
*   使用 Exchange 模拟 ( [http://msdn.microsoft.com/en-us/library/bb204088.aspx](http://msdn.microsoft.com/en-us/library/bb204088.aspx) )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-10T12:14:14.507

如果我理解正确，经理将使用该应用程序并以他自己的身份向 EWS 进行身份验证。然后，由于权限不足，EWS 将无法更新其他用户的邮箱。

让管理员访问每个用户的邮箱怎么样？

（或者我错过了问题的很大一部分？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-06-03T07:11:21.187

如果用户要登录到他们自己的机器上，并且这些凭据很可能在凭据缓存中可用，则可以从从那里获得的 ICredentials 对象构造一个 WebCredential 对象：

```
public static ExchangeService GetService()
{
    var webCredentials = new WebCredentials(CredentialCache.DefaultNetworkCredentials);

    var service = new ExchangeService(ExchangeVersion);
    service.AutodiscoverUrl(Properties.Settings.Default.SmptAccountName);
    service.Credentials = credentials;

    return service;   
} 
```

# dependencies - 优雅地处理依赖的计划任务？

> ID：179113
> 
> 赞同：0
> 
> 时间：2008-10-07T15:42:44.803
> 
> 标签：dependencies, scheduled-tasks

假设我有两个预定进程：A 和 B。

鉴于 B 不应该在 A 完成之前运行，我该如何优雅地强制执行这种依赖关系？

已考虑的方法：

1.  完成后有一个时间表 B。如果由于某种原因 A 失败，这具有 B 永远不会被安排的缺点。

2.  当 B 运行时，让它 ping A 以查看后者是否已完成。如何实现这一点（网络、文件、数据库记录、消息队列）可能会很混乱，并且引入第三个依赖项会有问题。

3.  将 A 和 B 合并为一个进程。这具有将两者紧密结合的缺点，如果需要，很难单独重新运行其中一个或另一个。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-07T15:44:07.703

您的选项 1 直接回答了您的问题：如果 B 依赖于 A，并且 A 失败，则 A 不调度 B 意味着 B 不会发生。

除非 B 只需要追随 A，否则无论 A 是否成功。

在这种情况下，类似下面的东西（在 bash 中）会起作用：

```
A && B 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-07T15:45:06.577

您可以修改第 3 步：创建两个进程以单独运行，然后创建第三个进程来运行其他两个进程。

# windows - How to prevent Windows XP from stealing my input Ctrl-Space which is meant for Emacs?

> ID：179119
> 
> 赞同：20
> 
> 时间：2008-10-07T15:44:20.527
> 
> 标签：windows, emacs

I am learning and using Emacs. What I found annoying is that Ctrl-Space input will be stolen by Windows XP to switch the language bar instead of setting the mark in Emacs. The "language bar" is the native input languages selection such as Chinese keyboard other than English keyboard. Is there a way to temporarily prevent XP from stealing it? I have disabled the language bar from "Regional and language options" from Control Panel but the problem still exists. It doesn't happen on my Windows 2000 desktop at office but it happens on my work Windows XP laptop. Thank you very much.

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2010-03-28T01:24:37.107

找到了解决这个问题的方法，因为我刚刚经历过。因此，即使问题很老，也可以这样。

适用于 Windows 7，也许还有其他。我添加了中文、日文和韩文输入语言，因为我需要这些来进行一些开发。之后，我通过控制面板“更改键盘...”再次删除了它们。我一口气将它们全部删除并关闭了对话框。在此之后，所有语言仍然显示在语言栏中，我遇到了 Ctrl-Space 问题。

为了解决这个问题，我一次对每种语言执行以下操作： 1\. 打开控制面板小程序“更改键盘...” 2\. 添加语言的键盘（即中文） 3\. 单击确定并退出控制面板 4.再次打开小程序并移除键盘。

该问题似乎是同时移除多个键盘时出现的错误。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2011-03-11T13:08:07.593

博客[Sorting it all Out](http://www.siao2.com/2007/02/02/1585687.aspx)（在sundar的回答中提到）下的评论提到了这个解决方案：

*   打开 RegEdit 并导航到 HKEY_CURRENT_USER\Control Panel\Input Method\Hot Keys
*   查找具有以下值的“00000070”（繁体中文）或“00000010”（简体中文）键： Key Modifiers='02,c0'（控制） Virtual Key='20'（空格）
*   将这些值替换为，例如 Key Modifiers='FF,c0,00,00' 和 Virtual Key='FF'。
*   注销/重新登录（重要）。

这在 Windows 7 中对我有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-01T14:21:32.517

我已经知道这个 Windows 错误*多年*了。经过大量不满意的解决方法和一年一两次的无果搜索后，我试图找到解决方案，**我终于找到了！**

# 程序

1.  转到`Start`> 输入`regedit`并启动它
2.  导航`HKEY_CURRENT_USER/Control Panel/Input Method/Hot Keys`
3.  选择名为：
    *   `00000070`对于`Chinese (Traditional) IME - Ime/NonIme Toggle`热键
    *   `00000010`对于`Chinese (Simplified) IME - Ime/NonIme Toggle`热键
4.  在右侧子窗口中，有三个子键。
    *   键修饰符指定`Alt`/ `Ctrl`/ `Shift`/etc 并设置为`Ctrl`( `02c00000`)。
    *   虚拟键指定完成键并设置为`Space`( `20000000`)。
5.  将第一个字节`Key Modifiers`从更改`02`为`00`
6.  将第一个字节`Virtual Key`从更改`20`为`FF`
7.  注销并重新登录。我认为没有必要重新启动。
8.  不要更改`Hot keys for input languages`控制面板中的，除非您想重新执行此操作。

**备注：症状**

每个注册表项（看起来像一个文件夹）都对应于您通常会在`Control Panel > Region and Language > Keyboards and Languages > Change keyboards... > Advanced Key Settings > Hot keys for input languages`. 反复出现的错误是即使通过 GUI 更改热键也会自动重置为`Ctrl`+ 。`space`

这适用于 Windows 7 64 位，但根据我的研究，它似乎也适用于 XP 和 Vista。

资料来源：

[繁体中文袖珍输入法热键注册表设置](http://msdn.microsoft.com/en-us/library/ms904366.aspx)

[简体中文 MSPY 3.0 IME 热键注册表设置](http://msdn.microsoft.com/en-us/library/ms904626.aspx)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-10-07T16:29:51.370

[这里](http://www.siao2.com/2007/02/02/1585687.aspx)的博客似乎正在讨论这个确切的问题。似乎即使从控制面板禁用热键也不起作用 - 由于操作系统中的一些错误，它们会自动重新启用。

提供的两种解决方案是：

*   “使用 GeoShell 等替代桌面外壳可以缓解这个问题。” （[链接](http://www.siao2.com/2007/02/02/1585687.aspx#8724303)）
*   “再安装一种语言。我在英文win XP上安装了日文和中文。然后，XP不再响应Ctrl-Space。” （[链接](http://www.siao2.com/2007/02/02/1585687.aspx#8904695)）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-07T16:15:47.200

转到区域和语言选项控制面板。单击语言选项卡，然后单击详细信息... 按钮。单击密钥设置... 按钮。双击“输入语言的热键”列表中的每个条目，并确保未选中复选框。（如果是，取消选中它们并单击确定。）

您无需禁用语言栏，只需禁用热键即可。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-07T15:47:01.910

You can also change the hot key for the language bar.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-15T19:04:49.270

以下对我有用：

有一个 Windows 免费软件 AutoHotkey，例如，它可以让您将 F12 绑定到 Alt-a。

安装 AutoHotkey 并将 C-Space 绑定到 C-@。

将 C-Space 绑定到 C-Space 不起作用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-27T05:17:33.777

对我有用的简单技巧：

Ctrl+Windows+空格

按钮都在一个地方，因此它们可以同时按下。它们作为 Ctrl+Space 工作

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-11-09T05:05:35.760

我找到[了这篇](http://life-hk.blogspot.com/2011/04/disable-ctrl-space-for-language-bar.html)文章，它在 Vista 上对我有用。

*   在运行对话框中打开“regedit.exe”
*   浏览注册表编辑器到以下位置：HKEY_CURRENT_USER\Control Panel\Input Method\Hot Keys\
*   现在删除名称为：0000007x（x 表示任何数字）的注册表项

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-03-04T12:17:54.660

[http://www.emacswiki.org/emacs/DisableImeForEmacs](http://www.emacswiki.org/emacs/DisableImeForEmacs)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-09-20T16:08:21.803

在使用注册表查看并尝试了 Richard C 的答案之后......

我发现，在语言设置窗口中更改了我的所有键序列后，上面指定的注册表值已经更改了......所以没有编辑注册表，我重新启动并禁用了 Ctrl-Space 序列！

*故事的寓意*：如果某些东西在 Windows 中不能正常工作，请**重新启动**！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-05-24T18:32:55.223

愚蠢的方式，但是我的系统上打开了很多应用程序，所以只是从常规选项卡中删除了中文 - 已安装的服务。有效！

# git - 如何修改现有的、未推送的提交消息？

> ID：179123
> 
> 赞同：7656
> 
> 时间：2008-10-07T15:44:47.920
> 
> 标签：git, git-commit, git-rewrite-history, git-amend

我在提交消息中写错了。

如何更改消息？提交尚未推送。

* * *

## 回答 #1

> 赞同：17479
> 
> 时间：2008-10-07T15:50:34.630

# 修改最近的提交信息

```
git commit --amend 
```

将打开您的编辑器，允许您更改最近提交的提交消息。此外，您可以直接在命令行中设置提交消息：

```
git commit --amend -m "New commit message" 
```

…但是，这会使多行提交消息或小的更正输入更加麻烦。

确保在执行此操作之前没有*暂存*任何工作副本更改，否则它们也会被提交。（*未暂存的*更改不会被提交。）

## 更改已推送到远程分支的提交消息

如果您已经将提交推送到远程分支，那么 - 在本地修改提交之后（如上所述） - 您还[需要强制推送提交](https://stackoverflow.com/questions/41003071/why-must-i-force-push-after-changing-a-commit-message)：

```
git push <remote> <branch> --force
# Or
git push <remote> <branch> -f 
```

**警告：强制推送将用本地分支的状态覆盖远程分支**。如果远程分支上有本地分支中没有的提交，您*将*丢失这些提交。

**警告：在修改你已经与其他人共享的提交时要小心。**修改提交实质上会将它们*重写*为具有不同的[SHA](https://en.wikipedia.org/wiki/SHA-1) ID，如果其他人拥有您已重写的旧提交的副本，则会出现问题。任何拥有旧提交副本的人都需要将他们的工作与您新重写的提交同步，这有时会很困难，因此请确保在尝试重写共享提交历史时与其他人协调，或者只是避免重写共享提交共。

* * *

### 执行交互式变基

另一种选择是使用交互式变基。这允许您编辑要更新的任何消息，即使它不是最新消息。

为了做一个 Git squash，请按照以下步骤操作：

```
// n is the number of commits up to the last commit you want to be able to edit
git rebase -i HEAD~n 
```

一旦你压缩你的提交 - 选择`e/r`编辑消息：

[![编辑提交时的终端屏幕截图](https://i.stack.imgur.com/LVcm9.png)](https://i.stack.imgur.com/LVcm9.png)

### 关于交互式变基的重要说明

当您使用`git rebase -i HEAD~n`时，可以有**超过**n 个提交。Git 将“收集”最后 n 次提交中的所有提交，如果在该范围之间的某处有合并，您也会看到所有提交，因此结果将为 n + 。

### 好提示：

如果您必须为多个分支执行此操作，并且在修改内容时可能会遇到冲突，请设置[`git rerere`](https://stackoverflow.com/questions/35415925/is-it-possible-to-setup-git-merge-for-automatic-resolving-git-rerere/35417944#35417944)并让 Git 自动为您解决这些冲突。

* * *

## 文档

*   [git-commit(1) 手册页](https://www.kernel.org/pub/software/scm/git/docs/git-commit.html)

*   [git-rebase(1) 手册页](https://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)

*   [git-push(1) 手册页](https://www.kernel.org/pub/software/scm/git/docs/git-push.html)

* * *

## 回答 #2

> 赞同：2606
> 
> 时间：2010-02-08T04:26:11.333

```
git commit --amend -m "your new message" 
```

* * *

## 回答 #3

> 赞同：2445
> 
> 时间：2008-10-07T19:52:21.803

如果您要修复的提交不是最新的：

1.  `git rebase --interactive $parent_of_flawed_commit`

    如果您想修复几个有缺陷的提交，请传递其中最旧的提交的父级。

2.  一个编辑器会出现，列出自你提交以来的所有提交。

    1.  在您要修复的任何提交之前更改`pick`为`reword`（或在旧版本的 Git 上为）。`edit`
    2.  保存后，Git 将重播列出的提交。

3.  对于您想要*改写*的每个提交，Git 都会将您拉回到您的编辑器中。对于您要*编辑*的每个提交，Git 会将您放入 shell。如果您在外壳中：

    1.  以您喜欢的任何方式更改提交。
    2.  `git commit --amend`
    3.  `git rebase --continue`

这个序列的大部分内容将通过各种命令的输出向您解释。这很容易；你不需要记住它——只要记住它`git rebase --interactive`可以让你更正提交，不管它们是多久以前的。

* * *

请注意，您不会想要更改已推送的提交。或者你可能会这样做，但在这种情况下，你将不得不非常小心地与每个可能已经取消你的提交并在他们之上完成工作的人进行沟通。*[有人将变基或重置推送到已发布的分支后，我如何恢复/重新同步？](https://stackoverflow.com/questions/4084868/how-do-i-recover-resynchronise-after-someone-pushes-a-rebase-or-a-reset-to-a-pub)*

* * *

## 回答 #4

> 赞同：810
> 
> 时间：2011-08-15T21:20:49.540

要修改先前的提交，请进行所需的更改并暂存这些更改，然后运行

```
git commit --amend 
```

这将在您的文本编辑器中打开一个文件，代表您的新提交消息。它开始填充旧提交消息中的文本。根据需要更改提交消息，然后保存文件并退出编辑器以完成。

要修改先前的提交并保持相同的日志消息，请运行

```
git commit --amend -C HEAD 
```

要通过完全删除之前的提交来修复它，请运行

```
git reset --hard HEAD^ 
```

如果要编辑多个提交消息，请运行

```
git rebase -i HEAD~**commit_count**
```

（将**commit_count**替换为您要编辑的提交数。）此命令将启动您的编辑器。将第一个提交（您要更改的那个）标记为“编辑”而不是“选择”，然后保存并退出您的编辑器。进行您要提交的更改，然后运行

```
git commit --amend
git rebase --continue 
```

注意：您也可以从打开的编辑器中“进行所需的更改”`git commit --amend`

* * *

## 回答 #5

> 赞同：409
> 
> 时间：2011-06-06T21:16:18.283

如前所述，`git commit --amend`是覆盖最后一次提交的方法。注意：如果您还想**覆盖文件**，则命令为

```
git commit -a --amend -m "My new commit message" 
```

* * *

## 回答 #6

> 赞同：366
> 
> 时间：2012-09-01T20:35:29.813

你也可以使用`git filter-branch`它。

```
git filter-branch -f --msg-filter "sed 's/errror/error/'" $flawed_commit..HEAD 
```

它不像 trivial 那样简单`git commit --amend`，但如果您在错误的提交消息之后已经进行了一些合并，它会特别有用。

请注意，这将尝试重写与有缺陷的提交之间的*每个*提交，因此您应该非常明智地选择您的命令 ;-)`HEAD``msg-filter`

* * *

## 回答 #7

> 赞同：333
> 
> 时间：2013-01-10T14:23:28.703

我更喜欢这种方式：

```
git commit --amend -c <commit ID> 
```

否则，将会有一个带有新提交 ID 的新提交。

* * *

## 回答 #8

> 赞同：316
> 
> 时间：2012-11-08T03:51:46.947

如果您使用的是 Git GUI 工具，则有一个名为*Amend last commit*的按钮。单击该按钮，然后它将显示您的最后提交文件和消息。只需编辑该消息，您就可以使用新的提交消息来提交它。

或者从控制台/终端使用这个命令：

```
git commit -a --amend -m "My new commit message" 
```

* * *

## 回答 #9

> 赞同：290
> 
> 时间：2013-01-22T17:23:19.293

您可以使用[Git 变基](http://git-scm.com/book/en/Git-Branching-Rebasing)。例如，如果你想修改回提交 bbc643cd，运行

```
$ git rebase bbc643cd^ --interactive 
```

在默认编辑器中，将要修改其提交的行中的“pick”修改为“edit”。进行更改，然后使用

```
$ git add <filepattern> 
```

现在你可以使用

```
$ git commit --amend 
```

修改提交，然后

```
$ git rebase --continue 
```

返回到上一个头部提交。

* * *

## 回答 #10

> 赞同：282
> 
> 时间：2012-10-22T11:22:13.827

1.  如果您只想修改最后一条提交消息，请执行以下操作：

    ```
    git commit --amend 
    ```

这将使您进入您的文本编辑器并让您更改最后的提交消息。

2.  如果您想更改最后三个提交消息，或到该点的任何提交消息，请提供`HEAD~3`给`git rebase -i`命令：

    ```
    git rebase -i HEAD~3 
    ```

* * *

## 回答 #11

> 赞同：266
> 
> 时间：2012-11-15T09:29:35.820

如果您必须在多个分支上更改旧的提交消息（即，带有错误消息的提交存在于多个分支中），您可能需要使用：

```
git filter-branch -f --msg-filter \
'sed "s/<old message>/<new message>/g"' -- --all 
```

Git 将创建一个临时目录用于重写并另外备份`refs/original/`.

*   `-f`将强制执行操作。如果临时目录已经存在或者已经有引用存储在`refs/original`. 如果不是这种情况，您可以删除此标志。

*   `--`将过滤器分支选项与修订选项分开。

*   `--all`将确保重写所有*分支*和*标签。*

由于旧引用的备份，您可以轻松地回到执行命令之前的状态。

说，你想恢复你的主人并在分支中访问它`old_master`：

```
git checkout -b old_master refs/original/refs/heads/master 
```

* * *

## 回答 #12

> 赞同：229
> 
> 时间：2013-03-27T20:43:50.643

采用

```
git commit --amend 
```

要详细了解它，一篇优秀的文章是*[4\. Rewriting Git History](https://www.atlassian.com/git/tutorials/rewriting-history#git-commit--amend)*。它还谈到了**何时不使用** `git commit --amend`.

* * *

## 回答 #13

> 赞同：226
> 
> 时间：2015-02-10T00:01:01.093

如果这是您的最后一次提交，只需**修改**提交：

```
git commit --amend -o -m "New commit message" 
```

*（使用`-o`( `--only`) 标志确保您仅更改提交消息）*

如果它是一个隐藏的提交，请使用很棒的**交互式 rebase**：

```
git rebase -i @~9   # Show the last 9 commits in a text editor 
```

找到您想要的提交，更改`pick`为`r`( `reword`)，然后保存并关闭文件。完毕！

* * *

微型 Vim 教程（或者，如何只用 8 次击键来变基``3j````cw```r``Esc```ZZ``）：

*   `vimtutor`有时间就跑
*   ``h````j````k````l``对应移动键`←</kbd>`↓</kbd>`↑</kbd>`→</kbd>````
*   所有命令都可以以“范围”为前缀，例如``3j``向下移动三行
*   ``i``进入插入模式——您输入的文本将出现在文件中
*   `Esc`或`Ctrl```c``退出插入模式并返回“正常”模式
*   ``u``撤销
*   `Ctrl```r``重做
*   ``dd``, ``dw``,``dl``分别删除一行、单词或字母
*   ``cc``, ``cw``,``cl``分别更改行、单词或字母（与 相同``dd````i``）
*   ``yy``, ``yw``,``yl``分别复制（“yank”）一行、单词或字母
*   ``p``或``P``分别粘贴在当前位置之后或之前
*   ``:w```Enter`保存（写入）文件
*   ``:q!```Enter`不保存就退出
*   ``:wq```Enter`或``ZZ``保存并退出

如果你编辑文本很多，那么切换到[Dvorak 键盘布局](https://en.wikipedia.org/wiki/Dvorak_keyboard_layout)，学习触摸输入，学习 Vim。[值得付出努力吗？](https://stackoverflow.com/questions/597077/is-learning-vim-worth-the-effort)是的。

* * *

ProTip™：不要害怕尝试重写历史记录的“危险”命令*——Git 默认在 90 天内不会删除您的提交；您可以在 reflog 中找到它们：

```
$ git reset @~3   # Go back three commits
$ git reflog
c4f708b HEAD@{0}: reset: moving to @~3
2c52489 HEAD@{1}: commit: more changes
4a5246d HEAD@{2}: commit: make important changes
e8571e4 HEAD@{3}: commit: make some changes
... earlier commits ...
$ git reset 2c52489
... and you're back where you started 
```

**注意类似的选项`--hard`，`--force`尽管它们可以丢弃数据。* * *此外，不要在您正在合作的任何分支上重写历史记录。*

* * *

## 回答 #14

> 赞同：201
> 
> 时间：2013-01-18T01:45:12.053

### 修正

您在这里有几个选择。你可以做

```
git commit --amend 
```

只要这是您的最后一次提交。

### 交互式变基

否则，如果这不是您的最后一次提交，您可以进行交互式变基，

```
git rebase -i [branched_from] [hash before commit] 
```

然后在交互式变基中，您只需向该提交添加编辑。当它出现时，执行`git commit --amend`并修改提交消息。如果您想在该提交点之前回滚，您也可以使用`git reflog`并删除该提交。然后你再做`git commit`一次。

* * *

## 回答 #15

> 赞同：186
> 
> 时间：2012-12-01T05:03:58.357

如果您使用的是 Git GUI，您可以修改尚未推送的最后一个提交：

```
Commit/Amend Last Commit 
```

* * *

## 回答 #16

> 赞同：169
> 
> 时间：2013-08-04T23:13:36.997

我尽可能多地使用[Git GUI ，这使您可以选择修改最后一次提交：](http://git-scm.com/docs/git-gui)

![勾选那个框](https://i.stack.imgur.com/qXMzu.png "选中该框")

此外，`git rebase -i origin/master`这是一个很好的口头禅，它将始终向您展示您在 master 之上所做的提交，并为您提供修改、删除、重新排序或压缩的选项。无需先获取该哈希值。

* * *

## 回答 #17

> 赞同：144
> 
> 时间：2014-11-06T15:01:00.440

对于任何寻找 Windows/Mac GUI 来帮助编辑旧消息（即不仅仅是最新消息）的人，我推荐[Sourcetree](http://www.sourcetreeapp.com)。要遵循的步骤在图像下方。

![Sourcetree 交互式变基](https://i.stack.imgur.com/CcA2P.png)

**对于尚未推送到远程的提交：**

1.  确保您已提交或隐藏所有当前更改（即，“文件状态”选项卡中没有列出任何文件） - 否则它将无法正常工作。
2.  在“日志/历史记录”选项卡中，右键单击图表中要编辑的提交**下方**具有相邻线的条目，然后选择“以交互方式重新设置*<commit ref>的子项...”*
3.  选择要更改的提交消息的整行*（单击“消息”列）*。
4.  单击“编辑消息”按钮。
5.  在出现的对话框中根据需要编辑消息，然后单击`OK`。
6.  如果还有其他提交消息要更改，请重复步骤 3-4。
7.  点击`OK`: 变基将开始。如果一切顺利，输出将结束“成功完成”。***注意：**我有时会`Unable to create 'project_path/.git/index.lock': File exists.`在尝试同时修改多个提交消息时看到此失败。不确定到底是什么问题，或者它是否会在 Sourcetree 的未来版本中得到修复，但如果发生这种情况，建议一次重新设置一个（速度较慢但似乎更可靠）。*

**...或者...对于已经推送的提交：**

按照[这个答案](https://stackoverflow.com/questions/17604232#23239109)中的步骤，这些步骤与上面类似，但需要从命令行 ( `git push origin <branch> -f`) 运行进一步的命令来强制推送分支。我建议阅读所有内容并采取必要的谨慎措施！

* * *

## 回答 #18

> 赞同：141
> 
> 时间：2013-12-02T21:31:02.410

哇，所以有很多方法可以做到这一点。

另一种方法是删除最后一次提交，但保留其更改，以免丢失工作。然后，您可以使用更正的消息进行另一次提交。这看起来像这样：

```
git reset --soft HEAD~1
git commit -m 'New and corrected commit message' 
```

如果我忘记添加文件或进行更改，我总是这样做。

**请记住**指定`--soft`而不是`--hard`，否则您将完全丢失该提交。

* * *

## 回答 #19

> 赞同：130
> 
> 时间：2014-01-06T22:03:35.997

如果您只想编辑最新的提交，请使用：

```
git commit --amend 
```

或者

```
git commit --amend -m 'one line message' 
```

但是如果你想连续编辑多个提交，你应该使用 rebase 来代替：

```
git rebase -i <hash of one commit before the wrong commit> 
```

![Git 变基编辑](https://i.stack.imgur.com/jRTRr.png)

在文件中，如上面的文件，写入`edit/e`或其他选项之一，然后点击保存并退出。

现在你将处于第一个错误的提交。对文件进行更改，它们将自动为您暂存。类型

```
git commit --amend 
```

保存并退出并输入

```
git rebase --continue 
```

移动到下一个选择，直到完成所有选择。

请注意，这些事情会在特定提交之后更改您的所有 SHA 哈希值。

* * *

## 回答 #20

> 赞同：128
> 
> 时间：2014-05-23T08:40:05.847

如果您只想更改最后一条消息，则应使用`--only`标志或其快捷`-o`方式`commit --amend`：

```
git commit --amend -o -m "New commit message" 
```

这可以确保您不会意外地使用分阶段的东西增强您的提交。当然最好有适当的`$EDITOR`配置。然后你可以不选择这个`-m`选项，Git 会用旧的预填充提交消息。通过这种方式，它可以很容易地编辑。

* * *

## 回答 #21

> 赞同：104
> 
> 时间：2014-01-22T08:57:20.010

在一行中用新的提交消息更新你最后一个错误的提交消息：

```
git commit --amend -m "your new commit message" 
```

或者，尝试如下 Git 重置：

```
# You can reset your head to n number of commit
# NOT a good idea for changing last commit message,
# but you can get an idea to split commit into multiple commits
git reset --soft HEAD^

# It will reset you last commit. Now, you
# can re-commit it with new commit message. 
```

### 使用 reset 将提交拆分为更小的提交

`git reset`也可以帮助您将一个提交分解为多个提交：

```
# Reset your head. I am resetting to last commits:
git reset --soft HEAD^
# (You can reset multiple commit by doing HEAD~2(no. of commits)

# Now, reset your head for splitting it to multiple commits
git reset HEAD

# Add and commit your files separately to make multiple commits: e.g
git add app/
git commit -m "add all files in app directory"

git add config/
git commit -m "add all files in config directory" 
```

在这里，您已成功将最后一次提交分成两个提交。

* * *

## 回答 #22

> 赞同：90
> 
> 时间：2014-08-07T09:18:35.723

关于这个问题有很多答案，但没有一个非常详细地解释了如何使用[Vim](http://en.wikipedia.org/wiki/Vim_%28text_editor%29)更改旧的提交消息。我自己也被困住了，所以在这里我将详细写下我是如何做到这一点的，特别是对于那些没有 Vim 经验的人！

我想更改我已经推送到服务器的五个最新提交。这是非常“危险的”，因为如果其他人已经从中撤出，您可以通过更改提交消息来搞砸事情。但是，当您在自己的小分支上工作并且确定没有人拉它时，您可以像这样更改它：

假设您要更改五个最新提交，然后在终端中键入：

```
git rebase -i HEAD~5 
```

*其中 5 是您要更改的提交消息的数量（因此，如果您想将第 10 次提交更改为最后一次提交，请输入 10）。

这个命令会让你进入 Vim，在那里你可以“编辑”你的提交历史。你会在顶部看到你最近的五次提交，如下所示：

```
pick <commit hash> commit message 
```

而不是`pick`你需要写`reword`. 你可以在 Vim 中输入`i`. 这使您进入*插入*模式。（您可以通过底部的*INSERT*一词看到您处于插入模式。）对于您要更改的提交，请输入`reword`而不是`pick`.

然后您需要保存并退出此屏幕。您首先通过按下按钮进入“命令模式” （如果底部的*INSERT*`Esc`字样消失，您可以检查您是否处于命令模式）。然后，您可以通过键入来键入命令。保存和退出的命令是. 因此，如果您输入，您就在正确的轨道上。*`:``wq``:wq`*

 *然后 Vim 会检查你想要改写的每条提交信息，在这里你可以真正改变提交信息。您将通过进入插入模式、更改提交消息、进入命令模式、保存并退出来完成此操作。这样做五次，你就退出了 Vim！

然后，如果您已经推送了错误的提交，则需要`git push --force`覆盖它们。请记住，这`git push --force`是一件非常危险的事情，因此请确保在您推送错误的提交后没有人从服务器中拉出！

现在你已经改变了你的提交信息！

（如您所见，我对 Vim 的经验并不丰富，所以如果我使用了错误的“行话”来解释正在发生的事情，请随时纠正我！）

* * *

## 回答 #23

> 赞同：80
> 
> 时间：2014-01-06T07:24:14.737

我已经为它添加`reci`了别名`recm`。`recommit (amend)`现在我可以用`git recm`or来做`git recm -m`：

```
$ vim ~/.gitconfig

[alias]

    ......
    cm = commit
    reci = commit --amend
    recm = commit --amend
    ...... 
```

* * *

## 回答 #24

> 赞同：80
> 
> 时间：2015-02-21T12:21:22.373

你可以使用[git-rebase-reword](https://github.com/albfan/git-rebase-reword)

它旨在以与相同的方式编辑任何提交（不仅仅是最后一次）`commit --amend`

```
$ git rebase-reword <commit-or-refname> 
```

它以修改提交的 rebase 交互操作命名：“reword”。请参阅[此帖子](https://robots.thoughtbot.com/git-interactive-rebase-squash-amend-rewriting-history)和[man](http://git-scm.com/docs/git-rebase) -section 交互模式-

例子：

```
$ git rebase-reword b68f560
$ git rebase-reword HEAD^ 
```

* * *

## 回答 #25

> 赞同：58
> 
> 时间：2014-07-19T17:27:29.153

我意识到我已经推送了一个包含拼写错误的提交。为了撤消，我做了以下事情：

```
git commit --amend -m "T-1000, advanced prototype"
git push --force 
```

**警告：**强制推送您的更改将用您的本地分支覆盖远程分支。确保您不会覆盖您想要保留的任何内容。如果其他人与您共享分支，还要小心强制推送修改（重写）的提交，因为如果他们拥有您刚刚重写的提交的旧副本，他们将需要重写自己的历史记录。

* * *

## 回答 #26

> 赞同：53
> 
> 时间：2014-09-08T09:14:03.843

我喜欢使用以下内容：

1.  `git status`
2.  `git add --all`
3.  `git commit -am "message goes here about the change"`
4.  `git pull <origin master>`
5.  `git push <origin master>`

* * *

## 回答 #27

> 赞同：47
> 
> 时间：2015-01-13T07:03:07.230

如果您还没有将代码推送到远程分支（[GitHub](http://en.wikipedia.org/wiki/GitHub) / [Bitbucket](http://en.wikipedia.org/wiki/Bitbucket)），您可以在命令行上更改提交消息，如下所示。

```
 git commit --amend -m "Your new message" 
```

如果您正在处理特定分支，请执行以下操作：

```
git commit --amend -m "BRANCH-NAME: new message" 
```

如果您已经推送了错误消息的代码，并且在更改消息时需要小心。也就是说，在您更改提交消息并尝试再次推送它之后，您最终会遇到问题。为了使其顺利，请按照下列步骤操作。

**在做之前请阅读我的全部答案。**

```
git commit --amend -m "BRANCH-NAME : your new message"

git push -f origin BRANCH-NAME                # Not a best practice. Read below why? 
```

**重要提示：**当您直接使用强制推送时，您可能会遇到其他开发人员在同一分支上工作的代码问题。因此，为了避免这些冲突，您需要在**强制 push**之前从分支中提取代码：

```
 git commit --amend -m "BRANCH-NAME : your new message"
 git pull origin BRANCH-NAME
 git push -f origin BRANCH-NAME 
```

如果已推送，这是更改提交消息时的最佳实践。

# c# - 在 C# 中读取复合文档

> ID：179128
> 
> 赞同：6
> 
> 时间：2008-10-07T15:46:00.663
> 
> 标签：c#, .net, binaryfiles

我正在启动一个需要在 c# 中读取 Outlook msg 文件的项目。我有复合文档的规范，但是在 c# 中阅读它们时遇到了麻烦。任何指针将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-10-07T16:33:46.370

这是我的镜头。这是[本文](http://www.codeguru.com/cpp/cpp/cpp_mfc/files/article.php/c13487__1/)的初译。

```
namespace cs_console_app
{
    using System;
    using System.Runtime.InteropServices;
    using System.Runtime.InteropServices.ComTypes;

    [ComImport]
    [Guid("0000000d-0000-0000-C000-000000000046")]
    [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    public interface IEnumSTATSTG
    {
        // The user needs to allocate an STATSTG array whose size is celt.
        [PreserveSig]
        uint Next(
            uint celt,
            [MarshalAs(UnmanagedType.LPArray), Out]
            System.Runtime.InteropServices.ComTypes.STATSTG[] rgelt,
            out uint pceltFetched
        );

        void Skip(uint celt);

        void Reset();

        [return: MarshalAs(UnmanagedType.Interface)]
        IEnumSTATSTG Clone();
    }

    [ComImport]
    [Guid("0000000b-0000-0000-C000-000000000046")]
    [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    interface IStorage
    {
        void CreateStream(
            /* [string][in] */ string pwcsName,
            /* [in] */ uint grfMode,
            /* [in] */ uint reserved1,
            /* [in] */ uint reserved2,
            /* [out] */ out IStream ppstm);

        void OpenStream(
            /* [string][in] */ string pwcsName,
            /* [unique][in] */ IntPtr reserved1,
            /* [in] */ uint grfMode,
            /* [in] */ uint reserved2,
            /* [out] */ out IStream ppstm);

        void CreateStorage(
            /* [string][in] */ string pwcsName,
            /* [in] */ uint grfMode,
            /* [in] */ uint reserved1,
            /* [in] */ uint reserved2,
            /* [out] */ out IStorage ppstg);

        void OpenStorage(
            /* [string][unique][in] */ string pwcsName,
            /* [unique][in] */ IStorage pstgPriority,
            /* [in] */ uint grfMode,
            /* [unique][in] */ IntPtr snbExclude,
            /* [in] */ uint reserved,
            /* [out] */ out IStorage ppstg);

        void CopyTo(
            /* [in] */ uint ciidExclude,
            /* [size_is][unique][in] */ Guid rgiidExclude, // should this be an array?
            /* [unique][in] */ IntPtr snbExclude,
            /* [unique][in] */ IStorage pstgDest);

        void MoveElementTo(
            /* [string][in] */ string pwcsName,
            /* [unique][in] */ IStorage pstgDest,
            /* [string][in] */ string pwcsNewName,
            /* [in] */ uint grfFlags);

        void Commit(
            /* [in] */ uint grfCommitFlags);

        void Revert();

        void EnumElements(
            /* [in] */ uint reserved1,
            /* [size_is][unique][in] */ IntPtr reserved2,
            /* [in] */ uint reserved3,
            /* [out] */ out IEnumSTATSTG ppenum);

        void DestroyElement(
            /* [string][in] */ string pwcsName);

        void RenameElement(
            /* [string][in] */ string pwcsOldName,
            /* [string][in] */ string pwcsNewName);

        void SetElementTimes(
            /* [string][unique][in] */ string pwcsName,
            /* [unique][in] */ System.Runtime.InteropServices.ComTypes.FILETIME pctime,
            /* [unique][in] */ System.Runtime.InteropServices.ComTypes.FILETIME patime,
            /* [unique][in] */ System.Runtime.InteropServices.ComTypes.FILETIME pmtime);

        void SetClass(
            /* [in] */ Guid clsid);

        void SetStateBits(
            /* [in] */ uint grfStateBits,
            /* [in] */ uint grfMask);

        void Stat(
            /* [out] */ out System.Runtime.InteropServices.ComTypes.STATSTG pstatstg,
            /* [in] */ uint grfStatFlag);

    }

    [Flags]
    public enum STGM : int
    {
        DIRECT = 0x00000000,
        TRANSACTED = 0x00010000,
        SIMPLE = 0x08000000,
        READ = 0x00000000,
        WRITE = 0x00000001,
        READWRITE = 0x00000002,
        SHARE_DENY_NONE = 0x00000040,
        SHARE_DENY_READ = 0x00000030,
        SHARE_DENY_WRITE = 0x00000020,
        SHARE_EXCLUSIVE = 0x00000010,
        PRIORITY = 0x00040000,
        DELETEONRELEASE = 0x04000000,
        NOSCRATCH = 0x00100000,
        CREATE = 0x00001000,
        CONVERT = 0x00020000,
        FAILIFTHERE = 0x00000000,
        NOSNAPSHOT = 0x00200000,
        DIRECT_SWMR = 0x00400000,
    }

    public enum STATFLAG : uint
    {
        STATFLAG_DEFAULT = 0,
        STATFLAG_NONAME = 1,
        STATFLAG_NOOPEN = 2
    }

    public enum STGTY : int
    {
        STGTY_STORAGE = 1,
        STGTY_STREAM = 2,
        STGTY_LOCKBYTES = 3,
        STGTY_PROPERTY = 4
    }

    class Program
    {
        [DllImport("ole32.dll")]
        private static extern int StgIsStorageFile(
            [MarshalAs(UnmanagedType.LPWStr)] string pwcsName);

        [DllImport("ole32.dll")]
        static extern int StgOpenStorage(
            [MarshalAs(UnmanagedType.LPWStr)] string pwcsName,
            IStorage pstgPriority,
            STGM grfMode,
            IntPtr snbExclude,
            uint reserved,
            out IStorage ppstgOpen);

        static void Main(string[] args)
        {
            string filename = @"f:\temp\treta2.msg";
            if (StgIsStorageFile(filename) == 0)
            {
                IStorage storage = null;
                if (StgOpenStorage(
                    filename,
                    null,
                    STGM.DIRECT | STGM.READ | STGM.SHARE_EXCLUSIVE,
                    IntPtr.Zero,
                    0,
                    out storage) == 0)
                {
                    System.Runtime.InteropServices.ComTypes.STATSTG statstg;
                    storage.Stat(out statstg, (uint) STATFLAG.STATFLAG_DEFAULT);

                    IEnumSTATSTG pIEnumStatStg = null;
                    storage.EnumElements(0, IntPtr.Zero, 0, out pIEnumStatStg);

                    System.Runtime.InteropServices.ComTypes.STATSTG[] regelt = { statstg };
                    uint fetched = 0;
                    uint res = pIEnumStatStg.Next(1, regelt, out fetched);

                    if (res == 0)
                    {
                        while (res != 1)
                        {
                            string strNode = statstg.pwcsName;
                            bool bNodeFound = false;

                            Console.WriteLine(strNode);

                            if (strNode == "__substg1.0_0E04001E"
                                || strNode == "__substg1.0_0E1D001E"
                                || strNode == "__substg1.0_1000001E"
                                || strNode == "__substg1.0_1013001E")
                            {
                                bNodeFound = true;
                            }

                            if (bNodeFound)
                            {
                                switch (statstg.type)
                                {
                                    case (int) STGTY.STGTY_STORAGE:
                                        {
                                            IStorage pIChildStorage;
                                            storage.OpenStorage(statstg.pwcsName,
                                               null,
                                               (uint) (STGM.READ | STGM.SHARE_EXCLUSIVE),
                                               IntPtr.Zero,
                                               0,
                                               out pIChildStorage);
                                        }
                                        break;
                                    case (int) STGTY.STGTY_STREAM:
                                        {
                                            IStream pIStream;
                                            storage.OpenStream(statstg.pwcsName,
                                               IntPtr.Zero,
                                               (uint)(STGM.READ | STGM.SHARE_EXCLUSIVE),
                                               0,
                                               out pIStream);

                                            byte[] data = new byte[255];

                                            pIStream.Read(data, 255, IntPtr.Zero);
                                        }
                                        break;
                                }
                            }

                            if ((res = pIEnumStatStg.Next(1, regelt, out fetched)) != 1)
                            {
                                statstg = regelt[0];
                            }
                        }
                    }
                }
            }

            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-07T16:04:37.723

[Outlook 互操作](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.aspx)。虽然我从未使用过 Outlook 互操作，但您**应该**能够使用它打开电子邮件。

[MailItem Interface](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.aspx)应该是您需要访问它的接口。

另外，请确保在完成它们后释放[com 引用](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.releasecomobject(VS.80).aspx)

# spring.net - How do I find out when the Spring.NET root context has loaded?

> ID：179140
> 
> 赞同：3
> 
> 时间：2008-10-07T15:48:26.400
> 
> 标签：spring.net

I have a web service running, and it uses Spring.NET for it's IoCness. One of the classes needs to do some stuff when it loads (I'm using `AfterPropertiesSet`) and "some stuff" involves a call to `ContextRegistry.GetContext()`. The problem is this code in the `ContextRegistry` class:

```
if (rootContextCurrentlyInCreation)
{
    throw new InvalidOperationException("root context is currently in creation. You must not call ContextRegistry.GetContext() from e.g. constructors of your singleton objects");    
} 
```

How can I have that object register itself to be notified once the context is fully created?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-04T11:29:45.383

如果可能，请删除对`ContextRegistry.GetContext()`. 无论如何，这都是糟糕设计的标志，因为它将您的代码与容器非常紧密地耦合在一起——我认为我们都同意不应该是这种情况。

你到底想做什么？

**PS**：我还想建议您将 Spring for .NET 相关问题发布到我们的[社区论坛](http://forum.springframework.net/)- 那里更有可能回答您的问题。

# .net - How do I make IEditableObject.EndEdit atomic?

> ID：179141
> 
> 赞同：0
> 
> 时间：2008-10-07T15:48:43.183
> 
> 标签：.net, transactions, atomic, ieditableobject

If I have an Address class that implements ***IEditableObject***, I might have ***EndEdit*** implementation like this:

```
public void EndEdit()
{
    // BeginEdit would have set _editInProgress and save to *Editing fields
    if (_editInProgress)
    {
        _line1 = _line1Editing;
        _line2 = _line2Editing;
        _city = _cityEditing;
        _state = _stateEditing;
        _postalCode = _postalCodeEditing;
        _editInProgress = false;
    }
} 
```

If there is an exception on ***_city***, then ***_line1***, ***_line2***, and possibly ***_city*** should revert. This problem isn't limited to ***EndEdit*** but probably found in other places as well.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-07T04:32:32.667

您是否考虑过使用 System.Transactions 中的 TransactionScope？这将使您的代码块具有事务性，并在引发异常时自动回滚更改。

如果您使用 CommittableTransaction，您可以获得对 Commit 和 Rollbacks 的更多控制，因此您可能需要考虑这一点。

# version-control - DVCS 对开发人员有用吗？

> ID：179161
> 
> 赞同：16
> 
> 时间：2008-10-07T15:53:48.963
> 
> 标签：version-control, dvcs

还是传统的客户端-服务器 VCS 更合适？我目前正在使用 TortoiseSVN，但我对 DVCS 很感兴趣，但我不确定尝试使用类似这样的东西是否是一个好主意。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-10-07T15:56:30.487

由于您仍然可以推送到另一台也运行 Git/Mercurial/Bzr/etc 的机器上，因此您仍然拥有多计算机备份安全性，您希望有任何一种方式。但是，如果您在旅行时编码，拥有完整的存储库访问权限可能是一个巨大的优势，那么当您再次有网络连接/回家/等时，只需重新同步到您的服务器。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-10-07T16:16:41.910

是的。在我看来，DVCS 比传统的基于服务器的系统更适合单独开发。当只有一个开发人员时，许多基于服务器的系统的功能只是不必要的复杂性。

另一方面，如果您独自一人，您可能不会注意到 DVCS 和 SVN 之间的任何主要生产力差异。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-07T15:56:15.103

我想是的。一方面，如果您使用多台计算机，它的扩展性*会*更好，因为合并更容易。其次，您可以离线提交，这一般来说非常棒。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-27T11:28:49.497

我强烈建议使用分布式的。在 Windows 上，我选择了 Mercurial，并且对它非常满意。

大优点：

*   本地提交速度很快，可以经常提交（测试、代码、重构、提交）
*   分支很简单
*   无论您身在何处，都可以提交。
*   轻松移动文件（不再像我使用 SVN 那样弄得一团糟）
*   只是更简单。一个软件完成所有工作（包括管理任务）
*   文件系统更干净。到处都没有 .svn，只有一个文件夹
*   忽略文件列表只是存储库中的另一个文件，并自动复制到每个克隆。比 SVN 更容易保持清洁。
*   Bitbucket.com 很好，并提供了一个免费的私有存储库

缺点：

*   （对于某些）GUI 工具不存在
*   您可能仍然需要 SVN 才能连接到各种源存储库。例如需要使用两个系统。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-08-16T15:59:28.170

是的。我为自己的爱好项目改用 DVCS（Git 和 Mercurial）有两个主要原因。首先是*保存备份*的问题，另一个是我经常四处旅行并*使用几台地理上分开的计算机*。

## 快速简便的备份

我至少使用两个存储库克隆。一个是我工作区中明显的本地文件，另一个是我保存在文件服务器（或在线存储库，如[github](https://github.com/)或[bitbucket](http://bitbucket.org/)）上的文件，每当我在本地完成工作时都会转储它。进行备份就像同步存储库一样简单，换句话说，将您的更改推送到上游。

## 在不同的位置或计算机上工作

对于有爱好项目的开发人员来说，这可能是不太常见的情况，因为我倾向于四处旅行。除了家里的电脑外，我有时会留在父母家，那里放着我的旧电脑（这对于业余爱好编程来说足够快了）。每当我想破解新功能时，我都可以在那台计算机上完成它，然后同步存储库，这样当我回到家时我就会收到这些更改。

## 易于分支/合并

DVCS 非常自动地处理分支/合并已经不是什么秘密了。合并冲突确实会发生，但即使没有集中式版本控制工具（例如 Subversion）中的冲突，即使在简单的场景中也对合并没有太大帮助。尽管我不经常在个人项目中使用此功能，但仍有一些开发人员这样做。

我认识一位编程承包商，他使用 git 来跟踪他自己在公司的专有系统上的工作，他仍在使用 SourceSafe 进行版本控制。Git 让他很容易通过对每个修复进行分支来跟踪单独的修复，即使他最终必须手动合并文件。当他需要将文件签入到 SourceSafe 时，他会查看不同分支中的差异以了解需要进行哪些更改，然后进行更改。可以说，他大部分时间都花在等待他的同龄人赶上来。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-07T15:59:45.457

对于单个开发人员，每个 VCS 都可以。我会选择一个，它易于设置，几乎不需要配置。我个人喜欢[单调](http://en.wikipedia.org/wiki/Monotone_(software))。它是最早的之一，我仍然认为它是最好的之一。

实际上，我曾经最有趣的是使用[darcs](http://en.wikipedia.org/wiki/Darcs)，但它是用一种相当丑陋的语言 (Haskell) 编写的，实际上在 Mac OS X 上从源代码构建它已经很痛苦了。

据说 Git 是一个很好的系统，但我不喜欢它由多个二进制文件和脚本等组成。我真正喜欢 darcs 和 Monotone 等系统的地方在于，只有一个二进制文件……仅此而已。没有杂乱的二进制文件，没有这种或那种语言的脚本，在二进制文件上，它可以做到这一切。

# delphi - Delphi 5 的哈希表实现

> ID：179162
> 
> 赞同：9
> 
> 时间：2008-10-07T15:54:08.197
> 
> 标签：delphi, data-structures, memory-leaks, hashtable

你知道 Delphi 5 的一个好的和免费的 Hashtable 实现吗？

我需要在一个 hastable 中组织大量数据，我有点担心我在网络上大多数可用的实现中发现的内存泄漏问题。

Tks

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-07T19:09:34.307

您还可以查看开源/以前商业的[TurboPower SysTools](http://sourceforge.net/projects/tpsystools/)。不知道更新了多少。[Julian Bucknall 曾在他的EZDSL 库](http://www.boyet.com/FixedArticles/EZDSL.html)中推荐过它，尽管那是在他还在使用 TurboPower 并且正在维护/更新的时候。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-07T16:32:31.613

EZDSL 是一个数据结构库，包括一个哈希表，由 TurboPower 和 DevExpress 的 Julian Bucknall 编写……我没有使用它们，但我对这家伙的代码有很高的期望。

[http://www.boyet.com/FixedArticles/EZDSL.html](http://www.boyet.com/FixedArticles/EZDSL.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-07T16:55:05.733

你可以试试我的[GpStringHash](http://omnithreadlibrary.googlecode.com/svn/trunk/src/GpStringHash.pas)。保证没有内存泄漏，但仅适用于字符串。我*认为*它应该在 D5 中工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-07T15:58:46.673

*   [http://www.benya.com/code/collections/hashtable.html](http://www.benya.com/code/collections/hashtable.html)
*   [http://delphi.blue-aura.co.uk/forum/showthread.php?t=816](http://delphi.blue-aura.co.uk/forum/showthread.php?t=816)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-07T16:06:30.870

您可以尝试在[Koders](http://www.koders.com/)中搜索。
[在这里](http://www.koders.com/delphi/fidBF04C36C18D82F69A118F101A20F98EC523DA329.aspx?s=THashTable)，您有一个简单的实现（[Winjab](http://www.koders.com/delphi/fid02907AFF1132DABC5F684C899D2D01D7D72FEBEC.aspx?s=THashTable)[项目](http://www.koders.com/info.aspx?c=ProjectInfo&pid=U5NFKE7M3K28N9L9SLCK8SU31A&s=THashTable)），或者来自[JCL](http://www.koders.com/info.aspx?c=ProjectInfo&pid=TXVDAK1CPWYALQ6ALXGN97RGGE&s=THashTable)。

注意：使用前请参阅代码许可。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-08T22:52:33.030

Peter below 刚刚在 public.attachments 中发布了他对 Embarcadero 新组所做的一些修改。在 CodeGear 网站[http://cc.codegear.com/Item/24825](http://cc.codegear.com/Item/24825)上他的个人资料中有一些东西描述了它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-24T13:08:56.857

Checkout [DeCAL](http://sourceforge.net/projects/decal/)，其中包括哈希表和更多数据结构。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-10T16:07:01.143

除了实际的哈希表实现之外，使用的哈希函数本身也很重要。

Bob Jenkins 的哈希函数是一个不错的选择，[请在此处阅读他的论文](http://burtleburtle.net/bob/hash/doobs.html)。

该算法最近针对输入为双字大小的情况进行了改进（[请参见此处的 C 版本](http://burtleburtle.net/bob/c/lookup3.c)）。这个版本更快，并且产生两个 32 位散列值而不是一个。（例如，第二个哈希值可用于加速桶内选择。）

对于那些感兴趣的人，我可以在这里粘贴 Delphi 翻译吗？（大约 170 行代码。）

# c# - 将 XML 字符串块附加到现有 XmlDocument

> ID：179173
> 
> 赞同：35
> 
> 时间：2008-10-07T15:56:26.913
> 
> 标签：c#, xml

我有一个已经存在并从文件中读取的 XmlDocument。

我想将一大块 Xml 添加到文档中的节点。有没有一种创建和添加所有节点的好方法，而不会使我的代码因许多 .CreateNote 和 .AppendChild 调用而混乱？

我想要某种方法来制作有效 Xml 部分的字符串或 stringBuilder，然后将其附加到 XmlNode。

例如：原始 XmlDoc：

```
<MyXml>
   <Employee>
   </Employee>
</MyXml> 
```

而且，我想为员工添加一个人口统计（有几个孩子）标签：

```
<MyXml>
   <Employee>
      <Demographic>
         <Age/>
         <DOB/>
      </Demographic>
   </Employee>
</MyXml> 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2008-10-07T16:00:49.807

如果您有自由格式字符串中的数据，我建议使用[XmlDocument.CreateDocumentFragment 。](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.createdocumentfragment.aspx)您仍然必须使用 AppendChild 将片段添加到节点，但您可以自由地在 StringBuilder 中构建 XML。

```
XmlDocument xdoc = new XmlDocument();
xdoc.LoadXml(@"<MyXml><Employee></Employee></MyXml>");

XmlDocumentFragment xfrag = xdoc.CreateDocumentFragment();
xfrag.InnerXml = @"<Demographic><Age/><DOB/></Demographic>";

xdoc.DocumentElement.FirstChild.AppendChild(xfrag); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-10-07T16:02:29.693

试试这个：

```
employeeNode.InnerXml = "<Demographic><Age/><DOB/></Demographic>"; 
```

或者（如果您有另一个要使用的 XML 文档）：

```
employeeNode.AppendChild(employeeNode.OwnerDocument.ImportNode(otherXmlDocument.DocumentElement, true)); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-10-07T16:29:39.403

作为替代方案，您可以通过以下方式以更 LINQy 3.5 的方式进行操作：

```
 XDocument doc = XDocument.Load(@"c:\temp\test.xml");
 XElement demoNode = new XElement("Demographic");
 demoNode.Add(new XElement("Age"));
 demoNode.Add(new XElement("DOB"));
 doc.Descendants("Employee").Single().Add(demoNode);
 doc.Save(@"c:\temp\test2.xml"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-07T16:04:35.307

考虑使用 XmlWriter 在 StringBuilder 上构建片段，因为这将为您提供验证和字符替换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-05T02:59:35.160

我所做的只是创建一个新的数据集对象并使用 ReadXML 打开 xml 文件`myDataset.ReadXML(path and file name)`。

然后添加或删除我需要的行并再次使用`myDataset.WriteXML(path and file name)`.

再见。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-30T17:37:12.490

这些都不适合我，所以我玩了一下，这是我的解决方案。

首先加载一个文本字段（在公共版本中您可以将其设置为 visible = false ）将数据加载到文本字段中，如下所示。

```
string Path = Directory.GetCurrentDirectory() + "/2016";
            string pathFile = Path + "/klanten.xml";
            StreamReader sr = new StreamReader(pathFile);
            txt.Text = sr.ReadToEnd();
            sr.Close(); 
```

在保存按钮上加载文本字段并保存它。不要忘记之后你必须刷新文本字段，如果你想添加多个地址/名称，我没有包括那部分。

```
string name = Globals.s_Name;
        string klanten = txt.Text;
        string s = klanten;
        XmlDocument xdoc = new XmlDocument();

        string klant = "<voornaam>" + naamBox1.Text + "</voornaam>";
        xdoc.LoadXml(s);
        XmlDocumentFragment xfrag = xdoc.CreateDocumentFragment();
        xfrag.InnerXml = klant;
        xdoc.DocumentElement.FirstChild.AppendChild(xfrag);
        xdoc.Save(name + "/klanten.xml"); 
```

# sql-server - 如何创建 SQL 表并使用 Excel 电子表格数据填充它？

> ID：179176
> 
> 赞同：23
> 
> 时间：2008-10-07T15:56:54.667
> 
> 标签：sql-server, excel, ssis, dts

有没有一种简单的方法可以从 Excel 电子表格在 SQL Server (2005) 中创建表。我在想也许是一些工具？

提前致谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-05-21T18:15:59.230

SQL Server 2008R2+

1.  右键单击数据库
2.  任务
3.  导入数据
4.  Excel 作为源
5.  选择 XLXS、XLS 等... 很好 :)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-03-11T21:54:44.707

将excel文件另存为文本（unicode）文件，然后从所有程序中使用“sql导入和导出数据”，然后选择“平面文件源”作为文件源并浏览txt文件。就是这样。简单明了。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-10-07T16:00:42.990

如果数据不是那么大，如果它是一个简单的表，最简单的方法是在 SQL Server Management Studio 中创建并打开表，然后将 Excel 数据复制粘贴到其中。

其他解决方案正在使用 DTS 或使用[SSIS](https://web.archive.org/web/1/http://blogs.techrepublic%2ecom%2ecom/datacenter/?p=205) ..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-13T20:32:26.857

在您的 SQL Server 企业管理器中有一个“导入数据”实用程序。它可以采用多种格式（.mdb、.XLS、.CSV 等）获取数据。指向要导入的文件（到新表中）并开始上传数据和结构是一项简单的工作。另一方面，关于古怪的 Excel 如何准确的评论...... 我的建议是将您的数据剪切并粘贴到 MS Acess 表中（如果是小表，则为所有数据，如果表很大，则大约 10 条记录）。MS Access 数据转储将识别数据的任何“怪癖”。创建 SQL 表后，通过 MS Access 表将数据上传到其中只需使用导入管理器（源 MS Access 表，目标 SQL 表）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-07T16:02:57.460

您可以在 Excel 中编写 VBA 代码：

*   打开与数据库的连接
*   建表
*   通过遍历电子表格 Excel 的行开始填充记录

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-13T20:18:36.837

为此，您可以使用内置的 ODBC 驱动程序将 Excel 文档本身视为数据库。最快的方法是打开 ODBC 数据源管理器，配置现有的 Excel 文件数据源并选择一个工作簿。这为您提供了一个映射到 ODBC 的 Excel 数据库，您现在所需要的只是一个将数据从 ODBC 数据库读取到 SQL Server 数据库的工具。

# mysql - mysql和math.h之间的冲突问题

> ID：179186
> 
> 赞同：0
> 
> 时间：2008-10-07T15:59:53.630
> 
> 标签：mysql, math.h

问题是编译器说在属于 MySQL 的库和 std 库中的 math.h 之间有一个函数的重新定义。

我已经解决了两天了，我仍然无法弄清楚。

这曾经发生在任何人身上吗？

这是编译器的输出

* * *

```
C:\mingw\bin\mingw32-make.exe 全部
'构建文件：../src/interfaz/ventanaconf.cpp'
'调用：GCC C++ 编译器'
C:\mingw\bin\mingw32-g++.exe -mms-bitfields -I"c:\dev-cpp\gtkmm\include\gtkmm-2.4"
-I"c:\dev-cpp\gtkmm\lib\gtkmm-2.4\include" -I"c:\dev-cpp\gtkmm\include\glibmm-2.4"
-I"c:\dev-cpp\gtkmm\lib\glibmm-2.4\include" -I"c:\dev-cpp\gtkmm\include\gdkmm-2.4"
-I"c:\dev-cpp\gtkmm\lib\gdkmm-2.4\include" -I"c:\dev-cpp\gtkmm\include\pangomm-1.4"
-I"c:\dev-cpp\gtkmm\include\atkmm-1.6" -I"c:\dev-cpp\gtkmm\include\sigc++-2.0"
-I"c:\dev-cpp\gtkmm\lib\sigc++-2.0\include" -I"c:\dev-cpp\gtkmm\include\cairomm-1.0"
-I"c:\gtk\include\gtk-2.0"
-I"c:\gtk\include\glib-2.0"
-I"c:\gtk\lib\glib-2.0\include"
-I"c:\gtk\lib\gtk-2.0\include"
-I"c:\gtk\include\pango-1.0"
-I"c:\gtk\include\cairo"
-I"c:\gtk\include\freetype2"
-I"c:\gtk\include"
-I"c:\gtk\include\atk-1.0"
-I"c:\Archivos de programa\MySQL\MySQL Server 5.0\include"
-O0 -g3 -w -c -fmessage-length=0 -MMD -MP -MF"src/interfaz/ventanaconf.d"
-MT“src/interfaz/ventanaconf.d”
-o"src/interfaz/ventanaconf.o" "../src/interfaz/ventanaconf.cpp"
在 c:/Archivos de programa/MySQL/MySQL Server 5.0/include/my_global.h:73 包含的文件中，
                 来自../src/interfaz/../gestiondb/gestordb.h:6，
                 来自../src/interfaz/../gestiondb/operacionesdb.h:5，
                 来自../src/interfaz/ventanamodulos.h:20，
                 来自../src/interfaz/ventanaconf.h:27，
                 来自../src/interfaz/ventanaconf.cpp:1：
c:/Archivos de programa/MySQL/MySQL Server 5.0/include/config-win.h: **在函数`double rint(double)'中：
c:/Archivos de programa/MySQL/MySQL Server 5.0/include/config-win.h:228: 错误：重新定义`double rint(double)'
C:/mingw/bin/../lib/gcc/mingw32/3.4.2/../../../../include/math.h:620: **错误: `double rint(double) ' 之前在这里定义过**
C:\mingw\bin\mingw32-make.exe: *** [src/interfaz/ventanaconf.o] 错误 1**

```

* * *

提前致谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-07T16:15:19.947

[mysql 支持区域中的这个线程](http://bugs.mysql.com/bug.php?id=15936)似乎表明他们已经从今年 4 月的 config_win.h 文件中删除了 rint() 的定义（即使该补丁是在 2006 年提出的）。您使用的 MySQL 源版本是否比该版本更新？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-10T11:01:33.243

问题是关于一个包含的库，linux 简单地忽略了它，但 windows 想要退出。在linux中放出来也没问题...

有时候我觉得 SOOOOOOOOOOOOOOOOOOOOOOO 愚蠢：..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-07T16:08:09.807

在 c:/Archivos de programa/MySQL/MySQL Server 5.0/include/config-win.h 的第 228 行中，您应该找到名为“rint”的函数的声明/定义。在 C:/mingw/bin/../lib/gcc/mingw32/3.4.2/../../../../include/math.h 的第 620 行中，您应该找到另一个函数定义相同的名称（甚至可能相同）。

要解决该问题，您必须删除/取消注释/取消定义这些定义之一。

如果您还链接具有相同功能的两个库，请准备在链接时遇到类似问题。

# c++ - C++ #include 语义

> ID：179213
> 
> 赞同：43
> 
> 时间：2008-10-07T16:07:32.523
> 
> 标签：c++, c-preprocessor

这是同一预处理指令的多个问题。

## 1 - <> 或 "" ？

除了在 MSDN 中找到的信息：

[#include 指令 (C-C++)](https://msdn.microsoft.com/en-us/library/36k2cdd4.aspx "#include 指令 (C-C++)")

1.a：这两种符号有什么区别？
1.b：所有编译器都以相同的方式实现它们吗？
1.c：您什么时候使用<>，什么时候使用“”（即，您使用其中一个或另一个作为标题包含的标准是什么）？

## 2 - #include {TheProject/TheHeader.hpp} 或 {TheHeader.hpp} ？

我已经看到至少有两种写作方式包括一个项目的标题。考虑到您至少有 4 种类型的标头，即：

*   您项目的私有标头？
*   项目的标头，但正在导出符号（因此，“公共”）
*   您的模块链接的另一个项目的标题
*   编译器或标准库的头文件

对于每种标题：

2.a：你会使用 <> 还是 "" ？
2.b：您会包含在 {TheProject/TheHeader.hpp} 中，还是仅包含在 {TheHeader.hpp} 中？

## 3 - 奖金

3.a：您是否在树状组织中使用源代码和/或标头进行项目（即目录中的目录，而不是“一个目录中的每个文件”），优点/缺点是什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-08-09T12:37:50.090

在阅读了所有答案以及编译器文档后，我决定遵循以下标准。

对于所有文件，无论是项目标头还是外部标头，始终使用以下模式：

```
#include <namespace/header.hpp> 
```

命名空间至少有一个目录深，以避免冲突。

当然，这意味着项目头所在的项目目录也应该作为“默认包含头”添加到makefile中。

之所以选择这个，是因为我找到了以下信息：

# 1\. include "" 模式依赖于编译器

我会在下面给出答案

## 1.a 标准

资源：

*   C++14 工作草案 n3797：[https ://isocpp.org/files/papers/N3797.pdf](https://isocpp.org/files/papers/N3797.pdf)
*   C++11、C++98、C99、C89（引用的部分在所有这些标准中都没有变化）

在第 16.2 节源文件包含中，我们可以读到：

> 形式的预处理指令
> 
> ```
>  #include <h-char-sequence> new-line 
> ```
> 
> 在一系列实现定义的位置中搜索由 < 和 > 分隔符之间的指定序列唯一标识的标头，并用标头的全部内容替换该指令。如何指定位置或标识的标头是实现定义的。

这意味着 #include <...> 将以实现定义的方式搜索文件。

然后，下一段：

> 形式的预处理指令
> 
> ```
>  #include "q-char-sequence" new-line 
> ```
> 
> 导致将该指令替换为由 " 分隔符之间的指定序列标识的源文件的全部内容。以实现定义的方式搜索命名的源文件。如果不支持此搜索，或者搜索失败, 该指令被重新处理，就好像它读取
> 
> ```
>  #include <h-char-sequence> new-line 
> ```
> 
> 具有与原始指令相同的包含序列（包括 > 字符，如果有的话）。

这意味着 #include "..." 将以实现定义的方式搜索文件，然后，如果未找到该文件，将进行另一次搜索，就好像它是一个 #include <...>

结论是我们必须阅读编译器文档。

请注意，由于某种原因，标准中的“系统”或“库”标头或其他标头之间没有任何区别。唯一的区别似乎是 #include <...> 似乎针对标头，而 #include "..." 似乎针对源（至少，在英文措辞中）。

## 1.b 视觉 C++：

资源：

*   [http://msdn.microsoft.com/en-us/library/36k2cdd4.aspx](http://msdn.microsoft.com/en-us/library/36k2cdd4.aspx)

### #include "我的文件.hpp"

预处理器按以下顺序搜索包含文件：

1.  在与包含#include 语句的文件相同的目录中。
2.  在任何先前打开的包含文件的目录中，以打开它们的相反顺序。搜索从最后打开的包含文件的目录开始，一直到最先打开的包含文件的目录。
3.  沿着每个 /I 编译器选项指定的路径。
4.  (*) 沿着 INCLUDE 环境变量指定的路径或开发环境默认包含的路径。

### #include <我的文件.hpp>

预处理器按以下顺序搜索包含文件：

1.  沿着每个 /I 编译器选项指定的路径。
2.  (*) 沿着 INCLUDE 环境变量指定的路径或开发环境默认包含的路径。

### 注意最后一步

该文档并不清楚两者的“沿包含环境变量指定的路径”部分`<...>` 和`"..."`包含。以下引用使其符合标准：

> 对于指定为#include "path-spec" 的包含文件，目录搜索从父文件的目录开始，然后通过任何祖父文件的目录进行。也就是说，搜索相对于包含正在处理的#include 指令的源文件的目录开始。如果没有祖父文件且未找到该文件，则继续搜索，就像文件名包含在尖括号中一样。

因此，最后一步（用星号标记）是阅读整个文档的解释。

## 1.c g++

资源：

*   [https://gcc.gnu.org/onlinedocs/cpp/Header-Files.html](https://gcc.gnu.org/onlinedocs/cpp/Header-Files.html)
*   [https://gcc.gnu.org/onlinedocs/cpp/Include-Syntax.html](https://gcc.gnu.org/onlinedocs/cpp/Include-Syntax.html)
*   [https://gcc.gnu.org/onlinedocs/cpp/Include-Operation.html](https://gcc.gnu.org/onlinedocs/cpp/Include-Operation.html)
*   [https://gcc.gnu.org/onlinedocs/cpp/Invocation.html](https://gcc.gnu.org/onlinedocs/cpp/Invocation.html)
*   [https://gcc.gnu.org/onlinedocs/cpp/Search-Path.html](https://gcc.gnu.org/onlinedocs/cpp/Search-Path.html)
*   [https://gcc.gnu.org/onlinedocs/cpp/Once-Only-Headers.html](https://gcc.gnu.org/onlinedocs/cpp/Once-Only-Headers.html)
*   [https://gcc.gnu.org/onlinedocs/cpp/Wrapper-Headers.html](https://gcc.gnu.org/onlinedocs/cpp/Wrapper-Headers.html)
*   [https://gcc.gnu.org/onlinedocs/cpp/System-Headers.html](https://gcc.gnu.org/onlinedocs/cpp/System-Headers.html)

以下引用总结了该过程：

> `<file>`GCC [...] 将在 [系统目录] [...] 中查找使用 #include 请求的标头
> 
> GCC 首先在包含当前文件的目录中查找使用 #include "file" 请求的头文件，然后在 -iquote 选项指定的目录中查找，然后在相同的位置查找使用尖括号请求的头文件。

### #include "我的文件.hpp"

此变体用于您自己程序的头文件。预处理器按以下顺序搜索包含文件：

1.  在与包含#include 语句的文件相同的目录中。
2.  沿着每个 -iquote 编译器选项指定的路径。
3.  至于#include`<MyFile.hpp>`

### #include <我的文件.hpp>

此变体用于系统头文件。预处理器按以下顺序搜索包含文件：

1.  沿着每个 -I 编译器选项指定的路径。
2.  在系统目录里面。

## 1.d 甲骨文/Sun Studio CC

资源：

*   [http://docs.oracle.com/cd/E19205-01/819-5265/bjadq/index.html](http://docs.oracle.com/cd/E19205-01/819-5265/bjadq/index.html)

请注意，文本有些自相矛盾（请参阅示例以理解）。关键短语是：“*区别在于当前目录只搜索名称用引号括起来的头文件。* ”

### #include "我的文件.hpp"

此变体用于您自己程序的头文件。预处理器按以下顺序搜索包含文件：

1.  当前目录（即包含“包含”文件的目录）
2.  使用 -I 选项命名的目录（如果有）
3.  系统目录（例如 /usr/include 目录）

### #include <我的文件.hpp>

此变体用于系统头文件。预处理器按以下顺序搜索包含文件：

1.  使用 -I 选项命名的目录（如果有）
2.  系统目录（例如 /usr/include 目录）

## 1.e XL C/C++ 编译器参考 - IBM/AIX

资源：

*   [http://www.bluefern.canterbury.ac.nz/ucsc%20userdocs/forucscwebsite/c/aix/compiler.pdf](http://www.bluefern.canterbury.ac.nz/ucsc%20userdocs/forucscwebsite/c/aix/compiler.pdf)
*   [http://www-01.ibm.com/support/docview.wss?uid=swg27024204&aid=1](http://www-01.ibm.com/support/docview.wss?uid=swg27024204&aid=1)

两个文档的标题为“XL C/C++ Compiler Reference” 第一个文档较旧 (8.0)，但更易于理解。第二个是较新的（12.1），但更难解密。

### #include "我的文件.hpp"

此变体用于您自己程序的头文件。预处理器按以下顺序搜索包含文件：

1.  当前目录（即包含“包含”文件的目录）
2.  使用 -I 选项命名的目录（如果有）
3.  系统目录（例如 /usr/vac[cpp]/include 或 /usr/include 目录）

### #include <我的文件.hpp>

此变体用于系统头文件。预处理器按以下顺序搜索包含文件：

1.  使用 -I 选项命名的目录（如果有）
2.  系统目录（例如 /usr/vac[cpp]/include 或 /usr/include 目录）

## 1.e 结论

模式 "" 可能会导致编译器之间出现细微的编译错误，并且由于我目前在 Windows Visual C++、Linux g++、Oracle/Solaris CC 和 AIX XL 上工作，因此这是不可接受的。

无论如何，“”描述的功能的优势无论如何都不是有趣的，所以......

# 2\. 使用 {namespace}/header.hpp 模式

我在工作中看到（*即这不是理论，这是现实生活中痛苦的职业经历*）两个同名的标题，一个在本地项目目录中，另一个在全局包含中。

由于我们使用的是 "" 模式，并且该文件同时包含在本地头文件和全局头文件中，当出现奇怪的错误时，我们无法理解到底发生了什么。

使用包含中的目录可以节省我们的时间，因为用户必须写：

```
#include <MyLocalProject/Header.hpp> 
```

或者

```
#include <GlobalInclude/Header.hpp> 
```

你会注意到，虽然

```
#include "Header.hpp" 
```

会成功编译，因此，仍然隐藏问题，而

```
#include <Header.hpp> 
```

在正常情况下不会编译。

因此，坚持 <> 符号将强制开发人员使用正确的目录作为包含前缀，这是首选 <> 而不是“”的另一个原因。

# 三、结论

同时使用 <> 表示法和命名空间表示法从预编译器中消除了猜测文件的可能性，而不是只搜索默认的包含目录。

当然，标准库仍然照常包含，即：

```
#include <cstdlib>
#include <vector> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-07T16:15:20.680

我通常将 <> 用于系统标头，将 "" 用于项目标头。至于路径，仅当您想要的文件位于包含路径的子目录中时才需要这样做。

例如，如果您需要 /usr/include/SDL/ 中的文件，但只有 /usr/include/ 在您的包含路径中，那么您可以使用：

```
#include <SDL/whatever.h> 
```

另外，请记住，除非您放置的路径以 / 开头，否则它是相对于当前工作目录的。

编辑回答评论：这取决于，如果一个库只有几个包含，我只会在包含路径中包含它的子目录，但如果库有很多标题（比如几十个），那么我宁愿只拥有它在我指定的子目录中。Linux 的系统头文件就是一个很好的例子。你像这样使用它们：

```
#include <sys/io.h>
#include <linux/limits.h> 
```

等等

编辑以包含另一个好答案：另外，如果可以想象两个或多个库提供相同名称的标头，那么子目录解决方案基本上为每个标头提供了一个名称空间。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-07T17:01:56.670

引用 C99 标准（乍一看，C90 标准中的措辞似乎是相同的，但我不能从中剪切粘贴）：

> 形式的预处理指令
> 
> `# include "q-char-sequence" new-line`
> 
> 导致将该指令替换为由 " 分隔符之间的指定序列标识的源文件的全部内容。以实现定义的方式搜索命名的源文件。如果不支持此搜索，或者搜索失败, 该指令被重新处理，就好像它读取
> 
> `# include <h-char-sequence> new-line`
> 
> 具有与原始指令相同的包含序列（包括 > 字符，如果有的话）。

所以搜索到的位置是搜索到的位置`#include "whatever"`的超集`#include <whatever>`。目的是第一种样式将用于通常“属于”您的标题，而第二种方法将用于“属于”编译器/环境的标题。当然，通常有一些灰色区域 - 例如，您应该将哪个区域用于 Boost 标头？我会使用`#include <>`，但如果我团队中的其他人想要，我不会争论太多`#include ""`。

在实践中，只要构建不中断，我认为没有人会过多关注使用哪种形式。我当然不记得它曾在代码审查（或其他方式）中提到过。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-07T16:17:33.687

我将解决您问题的第二部分：

我通常`<project/libHeader.h>`在包含来自第 3 方的标头时使用。当在`"myHeader.h"`项目中包含标题时。

我使用`<project/libHeader.h>`代替的原因`<libHeader.h>`是因为可能不止一个库有一个“libHeader.h”文件。为了将它们都包含在内，您需要将库名称作为包含文件名的一部分。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-07T17:55:20.510

1.a：这两种符号有什么区别？

"" 开始在 C/C++ 文件所在的目录中搜索。<> 在 -I 目录和默认位置（例如 /usr/include）中开始搜索。两者最终都搜索到相同的一组位置，只是顺序不同。

1.b：所有编译器都以相同的方式实现它们吗？

我希望如此，但我不确定。

1.c：您什么时候使用<>，什么时候使用“”（即，您使用其中一个或另一个作为标题包含的标准是什么）？

当包含文件应该在 C 文件旁边时，我使用 ""，在所有其他情况下使用 <>。特别是，在我们的项目中，所有“公共”包含文件都在 project/include 目录中，所以我对它们使用 <>。

2 - #include {TheProject/TheHeader.hpp} 或 {TheHeader.hpp} ？

正如已经指出的， xxx/filename.h 允许您执行诸如 diskio/ErrorCodes.h 和 netio/ErrorCodes.h 之类的操作

* 您项目的私有标头？

我的子系统在项目中的私有标头。在项目中使用我的子系统的“filename.h”公共标头（在项目外不可见，但其他子系统可以访问）。使用 或 ，具体取决于适用于项目的约定。我宁愿用

* 项目的标头，但它们正在导出符号（因此，“公共”）

include 就像你的图书馆的用户会包括他们一样。大概

*您的模块链接的另一个项目的标题

由项目决定，但肯定使用编译器或标准库的 <> * 头文件 绝对 <>，根据标准。

3.a：您是否在树状组织中使用源代码和/或标头进行项目（即目录中的目录，而不是“一个目录中的每个文件”），优点/缺点是什么？

我确实在一个结构化的项目上工作。一旦你有超过分数的文件，一些划分就会变得明显。你应该走代码拉你的路。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-07T16:14:06.753

如果我没记错的话。

您将菱形用于可以在“路径”中找到的所有库。因此，STL 中的任何库或您已安装的库。在 Linux 中，您的路径通常是“/usr/include”，在 Windows 中我不确定，但我猜它在“C:\windows”下。

然后使用“”来指定其他所有内容。没有起始目录信息的“my_bla.cpp”将解析为您的代码所在/编译的目录。或者您也可以使用它指定包含的确切位置。像这样“c:\myproj\some_code.cpp”

标题的类型无关紧要，只是位置。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-07T16:17:14.360

`<>`和之间有两个主要区别`""`。第一个是哪个字符将结束名称 - 标题名称中没有转义序列，因此您可能被迫使用`#include <bla"file.cpp>`or `"bla>file.cpp"`。不过，这可能不会经常出现。另一个区别是系统包含不应该发生在`""`，只是`<>`。所以`#include "iostream"`不能保证工作；`#include <iostream>`是。我个人的偏好是用于`""`作为项目一部分的`<>`文件，以及不用于项目的文件。有些人仅`<>`用于标准库头文件和`""`其他所有内容。有些人甚至`<>`只用于 Boost 和 std；这取决于项目。像所有风格方面一样，最重要的是保持一致。

至于路径，外部库将指定标题的约定；例如`<boost/preprocessor.hpp>` `<wx/window.h>` `<Magic++.h>`。在本地项目中，我将编写相对于顶级 srcdir 的所有路径（或者在它们不同的库项目中，包括目录）。

在编写库时，您可能还会发现使用 <> 来区分私有和公共头文件很有帮助，或者不是`-I`源目录而是上面的目录，因此您`#include "public_header.hpp"`和`"src/private_header.hpp"`. 这真的取决于你。

编辑：至于具有目录结构的项目，我强烈推荐它们。想象一下，如果所有 boost 都在一个目录中（并且没有子命名空间）！目录结构很好，因为它可以让您更轻松地找到文件，并且可以让您在命名方面更加灵活（`"module\_text\_processor.hpp"`而不是`"module/text\_processor.hpp"`）。后者更自然，更易于使用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-07T18:38:08.163

重新 <> 与“”。在我的店里，就“风格”问题而言，我非常不干涉。我需要的少数几个领域之一是在#include 语句中使用尖括号——规则是：如果您要#include 操作系统或编译器文件，则可以在适当的情况下使用尖括号。在所有其他情况下，它们是被禁止的。如果您要#include 此处某人或第 3 方库编写的文件，则禁止使用 <>。

原因是：#include "xh" 和 #include 不搜索相同的路径。#include 将仅搜索系统路径以及您在 -i 中添加的任何内容。重要的是，如果该目录未以其他方式包含在搜索路径中，它将不会搜索文件 xh 所在的路径。

例如，假设您有以下文件：

c:\dev\angles\main.cpp

```
#include "c:\utils\mylib\mylibrary.h"

int main()
{
    return 0;
} 
```

c:\utils\mylib\mylibrary.h

```
#ifndef MYLIB_H
#define MYLIB_H

#include <speech.h>

namespace mylib
{
    void Speak(SpeechType speechType);  
};

#endif 
```

c:\utils\mhlib\speech.h

```
#ifndef SPEECH_H
#define SPEECH_H

namespace mylib
{
    enum SpeechType {Bark, Growl};
};

#endif 
```

如果不通过设置 PATH 环境变量或 -i'ing 在 c:\utils\mhlib\ 目录中更改路径，这将无法编译。即使`#include <speech.h>`该文件与`mylibrary.h`!

我们在代码中的#include 语句中广泛使用相对路径名和绝对路径名，原因有二。

1) 通过将库和组件保持在主源代码树之外（即，将实用程序库放在一个特殊的目录中），我们不会将库的生命周期与应用程序的生命周期耦合。当您有几个使用公共库的不同产品时，这一点尤其重要。

2）我们使用[Junctions](http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx)将硬盘上的物理位置映射到逻辑驱动器上的目录，然后在所有#includes 中使用逻辑驱动器上的完全限定路径。例如：

`#include "x:\utils\mylib.h"`-- 很好，x: 是替代驱动器，x:\utils 指向硬盘驱动器上的 c:\code\utils_1.0

`#include "c:\utils_1.0\mylib.h"` - 坏的！t#includes mylib.h 的应用程序现在与特定版本的 MYLIB 库耦合，所有开发人员都必须将它放在硬盘驱动器上的同一目录中，c:\utils_1.0

最后，我团队的一个广泛但难以实现的目标是能够支持一键编译。这包括能够通过从源代码控制获取代码然后点击“编译”来编译主源代码树。特别是，我讨厌必须设置路径和机器范围的#include 目录才能进行编译，因为您在构建开发机器的设置阶段添加的每一个小额外步骤只会让它变得更难、更容易搞砸起来，让新机器加速和生成代码需要更长的时间。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-07T16:15:29.993

我使用系统头文件（stdio、iostreams、字符串等）中的 <...> ，并为特定于该项目的头文件使用“...”。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-07T17:39:10.293

我们将#include "header.h" 用于项目本地的标头，将#include 用于系统包含、第三方包含和解决方案中的其他项目。我们使用Visual Studio，在头文件include中使用项目目录要容易得多，这样每当我们创建一个新项目时，我们只需要指定包含所有项目目录的目录的包含路径，而不是单独的路径每个项目。

# vb.net - 如何在 vb.net 中继承 StringBuilder？

> ID：179223
> 
> 赞同：6
> 
> 时间：2008-10-07T16:10:48.193
> 
> 标签：vb.net, stringbuilder

我想将我自己的成员添加到 StringBuilder 类，但是当我去创建它时，IntelliSense 并没有启动它。

```
public class myStringBuilder()
    Inherits System.Text.[StringBuilder should be here]
    ....
end class 
```

甚至可能吗？谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-10-07T16:13:33.167

`StringBuilder`是`NotInheritable`（在 C# 中又名`sealed`），因此您不能从中派生。您可以尝试包装`StringBuilder`自己的类或考虑使用[扩展方法](http://msdn.microsoft.com/en-us/library/bb384936.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-07T16:12:39.953

不，[StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)是一个[NotInheritable](http://msdn.microsoft.com/en-us/library/h278d2d4.aspx)类。您可以尝试包装[StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)实例，但不能从它继承。如果您使用的是 .NET 3.5，您还可以使用[扩展方法。](http://msdn.microsoft.com/en-us/library/bb384936.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-07T18:21:58.023

这是我想出的，对于那些好奇的人：

```
Imports System.Runtime.CompilerServices
Module sbExtension
    <Extension()> _
    Public Sub AppendFormattedLine(ByVal oStr As System.Text.StringBuilder, _
                                   ByVal format As String, _
                                   ByVal arg0 As Object)
        oStr.AppendFormat("{0}{1}", String.Format(format, arg0), ControlChars.NewLine)
    End Sub
    <Extension()> _
    Public Sub AppendFormattedLine(ByVal oStr As System.Text.StringBuilder, _
                                   ByVal format As String, ByVal arg0 As Object, _
                                   ByVal arg1 As Object)
        oStr.AppendFormat("{0}{1}", String.Format(format, arg0, arg1), ControlChars.NewLine)
    End Sub
    <Extension()> _
    Public Sub AppendFormattedLine(ByVal oStr As System.Text.StringBuilder, _
                                   ByVal format As String, _
                                   ByVal arg0 As Object, _
                                   ByVal arg1 As Object, _
                                   ByVal arg2 As Object)
        oStr.AppendFormat("{0}{1}", String.Format(format, arg0, arg1, arg2), ControlChars.NewLine)
    End Sub
    <Extension()> _
   Public Sub AppendFormattedLine(ByVal oStr As System.Text.StringBuilder, _
                                  ByVal format As String, _
                                  ByVal ParamArray args() As Object)
        oStr.AppendFormat("{0}{1}", String.Format(format, args), ControlChars.NewLine)
    End Sub
End Module 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-07T16:13:19.343

StringBuilder 是一个密封类......所以不允许继承。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-07T16:13:31.153

StringBuilder 是密封的。你不能继承它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-07T16:53:46.423

如果您使用的是早期版本的 .Net，则可以编写基本相同的 StringBuilderExtensions 类，然后显式调用静态方法。

使用 .Net 3.5： `myStringBuilder.MyExtensionMethod(etc...);`

.Net 3.5 之前： `StringBuilderExtensions.MyExtensionMethod(myStringBuilder, etc...);`

# ruby-on-rails - What scares you the most about the integrated IDE of most modern Smalltalks?

> ID：179238
> 
> 赞同：22
> 
> 时间：2008-10-07T16:13:24.960
> 
> 标签：ruby-on-rails, ruby, ide, smalltalk, seaside

As I'm [riding the wave of resurgence of Smalltalk](http://methodsandmessages.vox.com/library/post/the-year-of-smalltalk.html) (especially because many Ruby-on-Rails people are rediscovering Smalltalk and seeing [Seaside](http://seaside.st) as their next upgraded web framework), I get questions like "yeah, but how do I use my favorite editor to edit Smalltalk code?" or "Does Smalltalk still insist on living in a world of its own?".

Now, [having first experienced Smalltalk back in 1981](http://methodsandmessages.vox.com/library/post/transcript-show-hello-world-cr.html), I don't understand these questions very well. It seems rather natural that I'd want the editor and debugger to be savvy of my current code state, and integrate with the change control system that is Smalltalk-aware. Using an external editor or debugger or change control manager would seem very awkward.

So what is it that scares you the most about not being able to edit the five-line methods in Smalltalk with your favorite editor, or use your favorite non-Smalltalk-aware change control system?

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-10-07T16:30:23.460

Everything's different. Want to go to the end of the line? It's not `Ctrl`-`E`. Want to jump a few words over, by word? It's not Meta-F....

Text editing is a *fundamental programming activity*. Messing with those inputs is messing with something deep in my mind.

Edit: and here is [someone asking for emacs key bindings](http://groups.google.co.uk/group/comp.lang.smalltalk/browse_thread/thread/0670a21bc08d2df5?hl=en#) on comp.lang.smalltalk in *1987*.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-10-10T15:15:03.550

The only Smalltalk I've spent any time with is Squeak, so my views may not apply to other Smalltalk environments.

What concerns me about the image-based approach is that, while you have wonderful things in the Smalltalk environment, it is a walled garden that makes it difficult to interoperate with anything outside that environment. For example, what if I want to use external tools like Yacc and Lex? What if I want to use some C or Python programs to generate Smalltalk code? What if I want to mix Smalltalk in with a bunch of code written in other languages, editing code in all those languages in one editor and keeping it all stored in the same source-code tree?

I'm sure it's possible to deal with all these issues by having your Smalltalk environment invoke system functions to control external tools. But how easy is it to let external tools control your Smalltalk environment? In other words, what if I want Smalltalk to be just another component, rather than the master of everything?

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-10-07T17:31:50.450

Nothing scares me in particular, but I found working out the API's in VW a bit of a chore, even when I had used other smalltalks. The effect of the browsers is that you tend to see the API's a little bit at a time and quite often it's not immediately obvious where you should look for particular functionality.

Smalltalk also suffers a bit from the paradigm shift to understand how it works. When I was doing my bachelor's degree at university (some time after I had first encountered Smalltalk) I got to enjoy a bit of Schadenfraude watching everyone else in the class getting over the initial paradigm hump as they learned the system (Squeak) for the first time.

I think the combination of the paradigm shift and functionality being somewhat buried in the class libraries makes for a bit of a steep learning curve. ST had a reputation for a fairly steep learning curve to really come up to speed - most of this is due to the large class libraries and the fact that most of the language functionality is buried somewhere in the libraries.

Also (and sadly), Java came along in the mid 1990s and grabbed all of the mindshare. The major Smalltalks have either died completely or been sold off to niche players. It's quite Ironic (in a happy way) that Ruby has served to re-awaken interest in Smalltalk but the lingering perception of 'also-ran' obsolescence doesn't help.

See [This post of mine](https://stackoverflow.com/questions/149042/would-you-start-learning-smalltalk#149323) for some pontification about the merits (as I see them) of getting heavily involved in Smalltalk in this day and age.

I would be quite happy to go back into Smalltalk if the opportunity were to arise.

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-10-07T22:51:24.283

The one big show-stopper for me is that code I write one Smalltalk VM is STILL, after all these years, not compatible with other Smalltalk VMs.

I understand why that is: the core of Smalltalk is an extremely small set of axioms and keywords. This means that after 30 minutes of learning Smalltalk, you're already learning the API library rather than the language itself. I like that approach to language design.

What it all boils down to however, in the Smalltalk world, is that unless a consensus is reached between all VM vendors to have a common base Standard API, my Smalltalk code written for one VM is almost certain not to run on other VMs when I decide to switch.

This also has the corollary of obsoleting part of my knowledge of the space when I switch VMs.

Note that I have barely tried Smalltalk in my life. I'm far from being an expert. This understanding comes from speaking with [James Robertson](http://www.cincomsmalltalk.com/blog/blogView) about a month ago.

Another point I'd like to make is that Seaside does in fact run on most popular Smalltalk VMs. I wonder how much of (what should have been) a Standard API they had to build for themselves to achieve that feat.

With all that said, I always have an ear out to hear more about the state of Smalltalk. I *do* want to try out Smalltalk's very powerful development environment (and its other goodies).

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-24T16:06:56.563

I know it's late but the biggest annoyance for me is that there is not really good editor in none of the smalltalks. It's a thing I can not understand. Working with text is so essential and that less "supported"....

It's always this just staring at one method and then you need to have some method finder or another browser around just to check another method. This is what I really dislike....

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-07T13:50:39.873

While the restricted Smalltalk environment made things like **relying** on a database driven source control system possible at times where other languages still struggled with having a proper editor, it makes **integration** very hard in todays times.

With tools like Eclipse or Team Foundation Server you get so used to having all tools integrate with each other. E.g. if a requirement is created, it is automatically linked to the change sets that the programmer commits to implement that requirement. This "boundary breaking" between formerly different tools is nearly impossible in the Smalltalk world, but with bigger projects, bigger teams, higher levels of abstraction and so on you need tools which are more than a fancy editor and help you throughout a full software development life cycle.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-10-21T02:44:49.307

No useful support for navigating with the keyboard, or supporting platform UI behavior.

While it's true you don't really need an incredible text editor for (well-written) Smalltalk, being able to move around the environment while keeping your hands on the keyboard is quite useful (and in my case, essential to reducing RSI). I just was trying VisualWorks' inspector and the arrow keys didn't even work properly to move up and down a list. When I hit the space bar, I got a walkback. Sigh.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-21T23:47:06.633

For the Windows world, there is nothing like Dolphin Smalltalk. The IDE is fantastic. Another quality product if you want to try is Visualworks, it works well, has a very fast VM and the documentation is pretty good.

I've used both in the past, there is nothing to fear.

# c# - 使用 ConfigurationManager.RefreshSection 重新加载配置而不重新启动应用程序

> ID：179254
> 
> 赞同：43
> 
> 时间：2008-10-07T16:16:04.377
> 
> 标签：c#, asp.net, performance, settings

有没有人在网络应用程序中得到这个工作？

无论我做什么，似乎我的 appSettings 部分（使用 appSettings file=".\Site\site.config" 从 web.config 重定向）都不会重新加载。

我注定要重新启动应用程序吗？我希望这种方法能引导我找到更高效的解决方案。

更新：

通过“重新加载”，我的意思是刷新 ConfigurationManager.AppSettings 而不必完全重新启动我的 ASP.NET 应用程序并且不必招致通常的启动延迟。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2009-10-20T02:14:32.963

确保将正确的[区分大小写](http://en.wikipedia.org/wiki/Case_sensitivity)的值传递给 RefreshSection，即

```
ConfigurationManager.RefreshSection("appSettings"); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-12-01T12:49:30.513

当为您的 appSettings 使用外部配置文件时，这似乎是一个缺陷（可能是一个错误）。我已经尝试使用 configSource 属性，而 RefreshSection 根本不起作用，我假设在使用 file 属性时这是相同的。如果您将 appSettings 移回 web.config RefreshSection 将完美运行，否则恐怕您注定要失败。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-05T08:24:28.917

由于某种原因`ConfigurationManager.RefreshSection("appSettings")`对我不起作用。将 Web.Config 重新加载到 Configuration 对象中似乎可以正常工作。以下代码假定 Web.Config 文件是执行 (bin) 文件夹下的一个目录。

```
ExeConfigurationFileMap configMap = new ExeConfigurationFileMap();
Uri uriAssemblyFolder = new Uri(System.IO.Path.GetDirectoryName(Assembly.GetExecutingAssembly().GetName().CodeBase));
string appPath = uriAssemblyFolder.LocalPath;
configMap.ExeConfigFilename = appPath + @"\..\" + "Web.config";
Configuration config = ConfigurationManager.OpenMappedExeConfiguration(configMap, ConfigurationUserLevel.None); 
```

并且像这样使用：

```
string webConfigVariable = config.AppSettings.Settings["webConfigVariable"].Value; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-01-06T12:17:32.363

当 appSettings 为外部时，.RefreshSection() 不起作用。

但是，您可以使用以下内容更改值：

```
ConfigurationManager.AppSettings.Set(key, value) 
```

这不会更改文件上的设置，只会更改内存中加载的值。

因此，我没有使用 RefreshSection，而是执行了以下操作：

```
string configFile="path to your config file";
XmlDocument xml = new XmlDocument();
xml.Load(configFile);

foreach (XmlNode node in xml.SelectNodes("/appSettings/add"))
{
    string key = node.Attributes["key"].Value;
    string value= node.Attributes["value"].Value;
    ConfigurationManager.AppSettings.Set(key, value);
} 
```

对 AppSettings.Get 的任何后续调用都将包含更新后的值。

然后 appSettings 将被更新，而无需重新启动应用程序。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-12-12T22:38:33.503

作为替代方案，您可以编写自己的`ConfigSection`并设置`restartOnExternalChanges="false"`.

然后，在阅读带有`ConfigurationManager.GetSection("yourSection")`设置的部分时，将**自动刷新而无需重新启动应用程序**。

您可以将您的设置实现为强类型或 NameValueCollection。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-05-17T19:26:38.053

是的。你被 iis 重新启动卡住了。

asp.net 4.0 和 iis 7.5 有一个功能，其中删除了初始启动。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-06-15T22:05:36.117

我不确定这在网络应用程序中是否可行，但它适用于桌面应用程序。尝试使用 ConfigurationSettings 而不是 ConfigurationManager（它会因为使用过时的类而对你大喊大叫……），然后将所有数据读入一个类。当您希望刷新时，只需创建一个新实例并删除对旧实例的所有引用。我为什么这样做的理论（可能是错误的）：当您在整个运行过程中不直接访问 app.config 文件时，应用程序会删除文件锁定。然后，可以在您不访问文件时进行编辑。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-10-07T16:43:06.367

App.Config 设置在应用程序启动时缓存在内存中。出于这个原因，我认为您将无法在不重新启动应用程序的情况下更改这些设置。一种非常简单的替代方法是创建一个单独的简单 XML 配置文件，并自己处理加载/缓存/重新加载。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-01-30T09:39:58.057

要写，这样称呼它：

昏暗配置为 System.Configuration.Configuration = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("~")

返回 AddOrUpdateAppSetting(config, "YourSettingKey", "YourValueForTheKey")

要读取并确保获得文件中的值，而不是缓存中的值，请以这种方式读取：

```
Dim config As System.Configuration.Configuration = WebConfigurationManager.OpenWebConfiguration("~")
  Return config.AppSettings.Settings("TheKeyYouWantTheValue").Value 
```

完整示例：

```
Protected Shared Function AddOrUpdateAppSetting( _
       ByVal Config As System.Configuration.Configuration _
     , ByVal TheKey As String _
     , ByVal TheValue As String _
     ) As Boolean</p>

    Dim retval As Boolean = True

    Dim Itm As System.Configuration.KeyValueConfigurationElement = _
        Config.AppSettings.Settings.Item(TheKey)
    If Itm Is Nothing Then
        If Config.AppSettings.Settings.IsReadOnly Then
        retval = False
        Else
        Config.AppSettings.Settings.Add(TheKey, TheValue)
        End If

    Else
        ' config.AppSettings.Settings(thekey).Value = thevalue
        If Itm.IsReadOnly Then
            retval = False
        Else
            Itm.Value = TheValue
        End If

    End If
    If retval Then
     Try
        Config.Save(ConfigurationSaveMode.Modified)

     Catch ex As Exception
        retval = False
     End Try

    End If

    Return retval

End Function 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2010-04-07T19:27:51.260

您是否尝试将 AppSettings 存储在其自己的外部文件中？

从 app.config/web.config：

```
<appSettings configSource="appSettings.config"></appSettings> 
```

appSettings.config：

```
<?xml version="1.0"?>
<appSettings>
  <add key="SomeKey" value="SomeValue" />
</appSettings> 
```

对 appSettings.config 所做的更改应立即反映。更多信息：http: [//msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.configsource.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.configsource.aspx)

# .net - 如何使 IEditableObject.EndEdit 成为原子的？

> ID：179255
> 
> 赞同：0
> 
> 时间：2008-10-07T16:16:16.013
> 
> 标签：.net, transactions, atomic, ieditableobject

如果我有一个实现 IEditableObject 的 Address 对象，我可能会有这样的 EndEdit 实现：

```
public void EndEdit()
{
    // BeginEdit would set _editInProgress and update *Editing fields;
    if (_editInProgress)
    {
        _line1 = _line1Editing;
        _line2 = _line2Editing;
        _city = _cityEditing;
        _state = _stateEditing;
        _postalCode = _postalCodeEditing;
        _editInProgress = false;
    }
} 
```

***例如，如果更新_state***时出现异常，则应重置所有 5 个属性。这个原子更新问题可能不仅限于 EndEdit。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-07T17:10:04.487

首先，Kent 想知道为什么设置字段会引发异常是正确的。
忽略这个问题；你可以只使用一个简单的：

```
try {
  //do stuff
}
catch (Exception ex) {
  //reset

  //rethrow exception
  throw;
} 
```

关于每个字段的重置值的构成是什么？

*   最后一个值
*   默认值
*   一些表示无效状态的令牌值
*   以上混合

如果您需要“重置”到最后一个值，那么您可能需要某种方法在对其进行操作之前轻松存储对象状态，以及在出现问题时轻松恢复该状态的能力。查看[Momento Pattern](http://www.primos.com.au/primos/Default.aspx?PageContentID=8&tabid=63)以一种很好的方式来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-07-15T22:56:29.847

我不使用字段来存储值。相反，我使用属性可以读取和写入的哈希表。这给了我一个非常简单的设计。

```
Friend Sub BeginEdit()
    m_Backup = New Dictionary(Of String, Object)(m_DataPoints, StringComparer.OrdinalIgnoreCase)
End Sub

Friend Sub CancelEdit()
    If m_Backup IsNot Nothing Then m_DataPoints = m_Backup
End Sub

Friend Sub EndEdit()
    m_Backup = Nothing
End Sub 
```

# hibernate - 为什么当我尝试更新/插入时，Hibernate 会尝试删除？

> ID：179259
> 
> 赞同：21
> 
> 时间：2008-10-07T16:17:01.893
> 
> 标签：hibernate

在我的应用程序中，我有这些 Hibernate 映射类型（一般情况）：

```
class RoleRule {
  private Role role;
  private PermissionAwareEntity entity; // hibernate-mapped entity for which permission is granted
  private PermissionType permissionType; // enum

  @ManyToOne
  @JoinColumn(name = "ROLE_ID")
  public Role getRole() {
    return role;
  }
  public void setRole(Role role) {
    this.role = role;
  }

}

class Role {
  private Set<RoleRule> rules = new HashSet<RoleRule>(0);

  @OneToMany(cascade=CascadeType.ALL)
  @JoinColumn(name="ROLE_ID")
  public Set<RoleRule> getRules() {
    return rules;
  }
  public void setRules(Set<RoleRule> rules) {
    this.rules = rules;
  }

} 
```

所有类都有`equals() & hashCode()`覆盖。

我的应用程序允许调整角色（仅限系统管理员，不用担心），在其他领域中，允许创建新的角色规则。创建新规则时，我尝试创建一个新`RoleRule`对象并将其插入角色的字段中`rules`。我调用`session.update(role)`将更改应用到数据库。

现在是丑陋的部分...... Hibernate 决定在关闭事务和刷新时执行以下操作：

1.  将新规则插入数据库。出色的。
2.  更新其他角色字段（不是集合）。到目前为止，一切都很好。
3.  更新现有规则，即使它们没有任何变化。我可以忍受这个。
4.  *再次*更新现有规则。这是日志中的粘贴，包括自动评论：

```
/* 删除一对多行 Role.rules */
更新 ROLE_RULE 设置 ROLE_ID=null where ROLE_ID=? 和 ROLE_RULE_ID=?
```

当然，所有字段都不是空的，这个操作非常失败。

任何人都可以尝试解释为什么 Hibernate 会这样做？？？更重要的是，我该如何解决这个问题？？？

**编辑**：我非常确定这与映射有关，然后我的老板一时兴起，删除了两个类中的`equals()`and `hashCode()`，使用 Eclipse 重新创建它们，神秘地解决了这个问题。

不过，我仍然对我的问题很好奇。谁能建议为什么 Hibernate 会这样做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-07T17:29:38.333

在 Hibernate 中，我通常使用两种方法来更新集合（一对多的多方）。蛮力方式是清除集合，在父节点上调用save，然后调用flush。然后重新添加所有集合成员并再次在父级上调用 save 。这将删除所有然后插入所有。中间的刷新是关键，因为它强制删除在插入之前发生。最好只对小型集合使用此方法，因为它会重新插入所有集合。

第二种方式更难编码，但更高效。您循环浏览新的子集并手动修改仍然存在的子集，删除不存在的子集，然后添加新的子集。在伪代码中是：

```
copy the list of existing records to a list_to_delete
for each record from the form
   remove it from the list_to_delete
   if the record exists (based on equals()?  key?)
     change each field that the user can enter
   else if the record doesn't exist
     add it to the collection
end for
for each list_to_delete
  remove it
end for
save 
```

我已经在 Hibernate 论坛上搜索了好几个小时，试图找到解决这个问题的正确方法。您应该能够只更新您的集合以使其准确，然后保存父级，但是正如您所发现的，Hibernate 会尝试在删除子级之前将它们与父级分离，如果外键不为空，它将失败。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-07-03T08:05:36.327

请参阅问题“[在 Java 中覆盖 equals 和 hashCode](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java) ”的答案。

它解释了如何覆盖 equals 和 hashCode 方法，这似乎是你的问题，因为它在重写它们之后起作用。

错误地覆盖它们可能会导致 hibernate 删除您的集合并重新插入它们。（因为哈希键用作映射中的键）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-07T16:34:18.460

我不确定这是否是解决方案，但您可能想尝试：

```
@OneToMany(mappedBy = "role") 
```

并且没有@JoinColumn 注释？我认为这两个实体都试图“拥有”该关联，这就是 SQL 可能会搞砸的原因？

此外，如果您想确保只更新受影响的列，您可以在类上使用特定于休眠的注释：

```
@Entity
@org.hibernate.annotations.Entity(
    dynamicInsert = true, dynamicUpdate = true
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-05T03:04:43.367

Brian Deterling 的回答帮助我克服了幻象删除。我希望他放了一个真实的代码。这是我从他的建议中得到的 1\. 发布以供某人使用或评论我的代码。

```
// snFile and task share many to many relationship

@PersistenceContext
private EntityManager em;

public SnFile merge(SnFile snFile) {
        log.debug("Request to merge SnFile : {}", snFile);

        Set<Task> tasks = taskService.findBySnFilesId(snFile.getId());
        if(snFile.getTasks() != null) {
            snFile.getTasks().clear();
        }
        em.merge(snFile);
        em.flush();
        if(tasks != null) {
            if(snFile.getTasks() != null)
                snFile.getTasks().addAll(tasks);
            else
                snFile.setTasks(tasks);
        }

        return em.merge(snFile);
    } 
```

# cookies - 重定向后打开新窗口时 IE8 丢失 cookie

> ID：179260
> 
> 赞同：6
> 
> 时间：2008-10-07T16:17:03.080
> 
> 标签：cookies, internet-explorer-8

我正在使用 Internet Explorer 8 beta 2。

1.  [客户端在http://alpha/foo](http://alpha/foo)上执行 POST

2.  服务器响应重定向到[http://beta/bar](http://beta/bar)

3.  [客户端在http://beta/bar](http://beta/bar)上执行 GET

4.  服务器响应重定向到[http://beta/baz](http://beta/baz)并设置 cookie

5.  [客户端在http://beta/baz](http://beta/baz) 上执行 GET，*包括 cookie*

6.  服务器提供响应

7.  用户在页面中的链接上选择“在新窗口中打开”

8.  [客户端在http://beta/link](http://beta/link)上执行 GET ，*没有 cookie！*

如果在第 7 步中用户只是单击链接，则 cookie*被*正确传递。如果没有重定向，即使用户选择“在新窗口中打开”，cookie 也会正确传递。

有没有办法说服 IE8 在第 8 步中传递 cookie？

（编辑：我相信这是 IE8 beta 2 中的一个错误，所以我[在 IE beta 新闻组上提出了它](http://www.microsoft.com/communities/newsgroups/list/en-us/default.aspx?mid=f90dfed8-42e3-499a-9a0b-4eefa66efccc&dg=microsoft.public.internetexplorer.beta)。欢迎提出解决方法建议。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-07T16:26:59.643

我相信 IE8 对每个窗口使用单独的进程。如果您使用会话 cookie，新进程将以新会话开始，因此无法提交其他进程收到的会话 cookie。您可以尝试使用持久性 cookie 看看会发生什么吗？

来自[http://www.microsoft.com/windows/internet-explorer/beta/readiness/developers-existing.aspx#lcie](http://www.microsoft.com/windows/internet-explorer/beta/readiness/developers-existing.aspx#lcie)

> 松散耦合的 Internet Explorer (LCIE) 是一种通过分离其组件并放松它们的相互依赖性来改进浏览器的架构工作：最值得注意的是，它试图将 Internet Explorer 框架及其选项卡隔离到单独的进程中。在 Internet Explorer 8 中，这种隔离将带来更高的性能和可伸缩性，以及从磁盘或系统故障等问题中恢复的更有效的方法。

# asp.net - URL 长度的最佳限制是多少？100、200+

> ID：179264
> 
> 赞同：6
> 
> 时间：2008-10-07T16:17:52.500
> 
> 标签：asp.net

我有一个 ASP.Net 3.5 平台和带有所有更新的 windows 2003 服务器。

.Net 有一个限制，它不能处理超过[260 个字符](http://forums.iis.net/p/1105360/1689855.aspx)。此外，如果您在网上查找它，您会发现如果 IE 6 不修补超过 100 个字符，则无法运行。

我希望在最大数量的浏览器上支持重写路径模块，因此我正在寻找可以创建详细 URL 的可接受限制。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-07T20:15:12.773

一个Url就是路径+查询字符串，链接的文章只讲限制路径。因此，如果您使用的是 asp.net，请不要超过 260 个字符的路径。小于 260 将始终有效，并且 asp.net 对长查询字符串没有任何问题。

```
http://somewhere.com/directory/filename.aspx?id=1234
                                             ^^^^^^^- querystring
                    ^^^^^^^^^^^^^^^^^^^^^^^^ -------- path 
```

通常问题出在浏览器上。很久以前我做过测试，记得很多浏览器都支持 4k url，除了 IE 将其限制为 2083，因此出于所有实际目的，将其限制为 2083。我不知道 IE7 和 8 是否有限制，但如果你'要广泛的兼容性，你需要去寻求最低的共同点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-07T16:20:43.527

W3C 没有规定长度限制，但请在此处查看实际限制

[http://www.boutell.com/newfaq/misc/urllength.html](http://www.boutell.com/newfaq/misc/urllength.html)

从中选择你自己的限制。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-07T16:21:11.450

IIS 中的默认限制为 16,384 个字符

但是[IE不支持超过2083](http://support.microsoft.com/kb/q208427/)

更多信息在[链接](http://www.boutell.com/newfaq/misc/urllength.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-07T16:21:00.157

[本文](http://www.boutell.com/newfaq/misc/urllength.html)给出了各种浏览器施加的限制。似乎 IE 将 URL 限制为 2083 个字符，因此如果您的任何用户在 IE 上，您可能应该保持在该范围内。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-07T16:21:38.437

为您的应用定义“最佳”。

HTTP 标准有一个限制（取决于您的应用程序）：

> HTTP 协议对 URI 的长度没有任何先验限制。服务器必须能够处理它们所服务的任何资源的 URI，并且如果它们提供可以生成此类 URI 的基于 GET 的表单，则应该能够处理无限长度的 URI。如果 URI 比服务器可以处理的长（参见第 10.4.15 节），服务器应该返回 414（Request-URI Too Long）状态。
> 
> ```
>  Note: Servers ought to be cautious about depending on URI
>   lengths above 255 bytes, because some older client or proxy
>   implementations might not properly support these lengths. 
> ```

所以问题是 - 您的程序的限制是什么，或者您的程序执行其所有功能所需的最大资源标识符大小是多少？

你的程序应该有一个自然的限制。

如果不是，您最好坚持使用 16k，因为您没有足够的信息来定义问题。

-亚当

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-07T16:26:28.147

短的 ;-）

问题是每个 Web 服务器和每个浏览器都有自己的想法，最大值是多长。HTTP 协议的 RFC 没有给出最大长度。IE 将 get 限制为 2083 个字符，路径本身可能最多 2,048 个字符。然而，这个限制并不普遍。Firefox 声称至少支持多达 65,536 个字符，但有人证实在某些平台上甚至 100,000 个字符都可以工作。Safari 超过 80,000（已测试）。另一方面，Apache 服务器的限制为 4,000。Microsoft 的 Internet Information Server 有一个是 16,384（但它是可配置的）。

我的建议是在任何情况下都保持在 2'000 个字符以下。这不能保证适用于世界上的所有浏览器（尤其是旧版浏览器），但它适用于所有现代浏览器。此外，我建议尽可能使用 POST（例如，避免将 GET 用于 FORM 提交 - 如果某些用户想通过 GET 模拟 FORM 提交，请确保您的应用程序通过 POST 或通过 GET 支持所需的参数，但是当您提交页面时自己通过按钮或 JS，更喜欢 POST 而不是 GET）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-07T16:21:25.100

我认为 RFC 说 4096 个字符，但 IE 截断到 2083 个字符。保持良好状态以确保安全。

实际上，较短的 URL 更友好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-07T16:19:57.037

需要更多信息，但对于正常情况，我会说尽量将其保持在 150 以下。如果只是纯粹的苦行者，我讨厌有人给我发一个 GI-NORMOUS 链接......

您是否通过查询字符串传递值？我想这就是你问的原因，对吗？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-07T16:21:49.420

到底什么是“最佳”？

GET 请求的长度可能有几个 kB，所以这完全是主观的。

我想说 - 保持在最大化的 1024x768 窗口的地址栏长度内，以方便用户使用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-07T16:26:18.147

如果你想让人们记住 URL，我不会超过 60 个。如果可能的话，使用单词，因为记住“www.example.com/this-is-the-url”比记住“www”更容易.example.com/179264”。如果您试图让页面被索引，您可能会走得更多。蜘蛛也会在标题中查找单词，如果 URL 看起来可读，有些人可能更有可能点击链接。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-08T03:50:27.550

当您说“最佳”时，我认为“用户易于访问”，在这种情况下，我认为 URL 越短越好。在这种情况下，我认为最多 20-30 个字符。

# python - 使用 Python 更改 XML 文件中包含的文本的最佳方法是什么？

> ID：179287
> 
> 赞同：5
> 
> 时间：2008-10-07T16:23:52.473
> 
> 标签：python, xml, text

假设我有一个名为“MyData.xml”的现有普通 XML 文件，其中包含以下内容：

```
<?xml version="1.0" encoding="utf-8" ?>
<myElement>foo</myElement> 
```

我想将“foo”的文本值更改为“bar”，结果如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<myElement>bar</myElement> 
```

完成后，我想保存更改。

完成这一切的最简单和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-07T16:29:06.753

使用 Python 的[minidom](http://docs.python.org/library/xml.dom.minidom.html)

基本上你会采取以下步骤：

1.  将 XML 数据读入 DOM 对象
2.  使用 DOM 方法修改文档
3.  将新的 DOM 对象保存到新的 XML 文档

在这个过程中，python 规范应该很好地握住你的手。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-07T16:29:04.053

对于快速、非关键的 XML 操作，我非常喜欢[P4X](http://ponderer.org/p4x)。它让你这样写：

```
import p4x
doc = p4x.P4X (open(file).read)
doc.myElement = 'bar' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-07T21:07:57.360

这是我根据[@Ryan 的回答](https://stackoverflow.com/questions/179287/what-is-the-best-way-to-change-text-contained-in-an-xml-file-using-python#179306)写的：

```
from xml.dom.minidom import parse
import os

# create a backup of original file
new_file_name = 'MyData.xml'
old_file_name = new_file_name + "~"
os.rename(new_file_name, old_file_name)

# change text value of element
doc = parse(old_file_name)
node = doc.getElementsByTagName('myElement')
node[0].firstChild.nodeValue = 'bar'

# persist changes to new file
xml_file = open(new_file_name, "w")
doc.writexml(xml_file, encoding="utf-8")
xml_file.close() 
```

不确定这是否是最简单和最简单的方法，但它确实有效。（[@Javier 的答案](https://stackoverflow.com/questions/179287/what-is-the-best-way-to-change-text-contained-in-an-xml-file-using-python#179305)代码行数较少，但需要非标准库）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-07T21:42:17.293

您可能还想查看 Uche Ogbuji 出色的 XML 数据绑定库 Amara： [http ://uche.ogbuji.net/tech/4suite/amara](http://uche.ogbuji.net/tech/4suite/amara)

（此处的文档：http: [//platea.pntic.mec.es/~jmorilla/amara/manual/](http://platea.pntic.mec.es/~jmorilla/amara/manual/)）

Amara 最酷的地方在于它将 XML 文档转换为 Python 对象，因此您可以执行以下操作：

```
record = doc.xml_create_element(u'Record')

nameElem = doc.xml_create_element(u'Name', content=unicode(name))

record.xml_append(nameElem)

valueElem = doc.xml_create_element(u'Value', content=unicode(value))

record.xml_append(valueElem 
```

（它创建了一个包含 Name 和 Value 元素的 Record 元素（这些元素又包含 name 和 value 变量的值））。

# html - HTML 框架集对齐

> ID：179288
> 
> 赞同：1
> 
> 时间：2008-10-07T16:23:59.993
> 
> 标签：html, frameset

假设我在一个框架集中有 3 个框架，排列成 3 行。框架 1 和 3 来自我的网站，框架 2（中央框架）来自外部网站。有没有一种巧妙的方法可以强制浏览器将第 2 帧中的数据居中对齐？

我发现了一个小的解决方法，它在一个框架集中使用一个框架集，该框架集在数据的两侧都有 2 个空白列，但这意味着第 2 帧和第 3 帧的滚动条不对齐。

有任何想法吗？

编辑：我目前的代码是：

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head id="Head1" runat="server" />
<frameset rows="10%,65%,25%" 边框=0 frameborder="no">
    <frame name="nav" noresize scrolling="no" src='NavigationBar.aspx?NAVIGATION=<%=sDisplayNavigation %>'>
    <frameset cols="1*,1010px,1*">
        <frame name="lspace" scrolling="no" src="border.htm">
        <frame name="main" scrolling="auto" src='<%=sMainTextURL%>#highlight'>
        <frame name="rspace" scrolling="no" src="border.htm">
    </frameset>
    <frame name="suggest" scrolling="yes" noresize src='<%=sSuggestURL%>'>
</frameset>
</html>

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-07T16:53:07.720

我认为您正在寻找的是一种将一些 CSS 注入另一个框架的方法，即使它来自另一个站点。

我认为如果没有服务器端脚本来请求页面并对其进行修改，这将是不可能的。

Javascript 可以使用 window.frames[] 和使用 DOM 遍历来修改其他框架，就像本地框架中的元素一样。由于“同源策略”，这对您来说将是一个问题。这基本上意味着从 example.com 加载的框架中的 javascript 无法访问从 foo.com 加载的框架中的 DOM。即使您有类似的域 foo.example.com 和 bar.example.com，它们在浏览器中也会被视为单独的域，因此您的 javascript 不允许访问另一个域。

这也会影响使用 XMLHttpRequest 的 ajax 调用。有一些方法可以减少这种影响，但我认为您需要能够在线路的两侧运行 javascript。

我最近尝试了与您正在做的类似的事情，我想将一个站点嵌入另一个站点，但同源策略使其不切实际。

另一种方法是服务器端而不是客户端。创建一个 php 脚本，该脚本代表客户端从其他服务器请求内容，然后将其作为一直在您的服务器上提供服务。然后你的javascript，现在在同一台服务器上，可以用那个框架做它会做的事情。如果其他站点使用大量 cookie 或 ajax，这可能会很棘手，但您的 php 将没有同源策略来处理。

# bash - 设置从命名管道读取的管道而不在 bash 中阻塞

> ID：179291
> 
> 赞同：7
> 
> 时间：2008-10-07T16:25:05.637
> 
> 标签：bash, unix, shell, pipe

我正在寻找一个打开给定管道的文件描述符的子进程，这样 open() 调用不会挂起等待管道的另一端接收连接。

展示：

```
$ mkfifo /tmp/foobar.pipe
$ some_program --command-fd=5 5</tmp/foobar.pipe 
```

在这种情况下，`some_program`直到某个进程`/tmp/foobar.pipe`打开以供写入，才会运行；然而，`some_program`即使它没有接收命令也有有用的效果，因此所需的行为是`some_program`立即执行。

通过另一种脚本语言（python、perl 等）或以标志打开的 C 包装器执行此操作的机制`/tmp/foobar.pipe`是`O_NONBLOCK`显而易见的；如果可能的话，我正在寻找一种纯 bash 解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-07T17:12:31.267

在设置管道时打开 FD 读/写而不是只读的可以防止阻塞。

更具体一点：

```
$ mkfifo /tmp/foobar.pipe
$ some_program --command-fd=5 5<>/tmp/foobar.pipe 
```

防止不希望的阻塞行为，因为`5<>/tmp/foobar.pipe`在 RW 模式下打开（与在只读模式下打开相反`5</tmp/foobar.pipe`）虽然`O_NONBLOCK`仍然设置。感谢 irc://irc.freenode.org/#bash 上的 waldner 提供了这个指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-07T16:39:20.493

我知道获得这种结果的唯一方法是破解：

```
mkfifo /tmp/foobar.in
mkfifo /tmp/foobar.out
( cat </tmp/foobar.in ) >/tmp/foobar.out &
some_program --command-fd=5 5</tmp/foobar.out 
```

也许这有帮助:-)

# asp.net-mvc - 我应该学习 NHaml 吗？

> ID：179293
> 
> 赞同：5
> 
> 时间：2008-10-07T16:26:23.060
> 
> 标签：asp.net-mvc, f#, haml, nhaml

我应该学习[NHaml](http://code.google.com/p/nhaml/)吗？

它通过经典的 ASP.NET MVC 视图为我提供了什么？优缺点都有什么？

您是否通过[MVC Contrib](http://www.codeplex.com/MVCContrib/Wiki/View.aspx?title=NHaml&referringTitle=Documentation)项目使用它？

我看到的越来越多。例如...我看到[Matthew Podwysocki](http://codebetter.com/blogs/matthew.podwysocki/archive/2008/10/06/asp-net-mvc-with-nhaml-f-edition.aspx)使用 ASP.NET MVC、NHaml 和 F# 撰写的博客文章！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-07T16:29:37.190

如果您熟悉 MVC 框架，应该只需要几个小时，所以我会说是的，学习它。NHaml 是一种编写 HTML 代码的紧凑方式。一旦你习惯了它，它就很容易阅读和写作。缺点是您失去了 ASP.NET 控件，因此服务器端处理更加困难。你的团队也可能有抵抗力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-10-27T22:14:36.387

当然，学习 NHAML 真的很容易，而且比 Web 表单语法更容易编写。

# .net - 如何向我的班级用户表明验证要求？

> ID：179295
> 
> 赞同：3
> 
> 时间：2008-10-07T16:26:55.120
> 
> 标签：.net, visual-studio, validation, .net-2.0

我正在实现一个使用非常严格定义的模式来包装 xml 文档的类。我不控制架构。

类中的属性之一是模式指示必须匹配某个正则表达式的元素值。在属性的设置器中，如果字符串与表达式不匹配，我将抛出异常。

我的问题是，我怎样才能更好地向我班级的用户传达该领域的要求？有我可以使用的属性吗？Xml 注释（所以它显示在智能感知中）？除了抛出异常，我还应该做些什么吗？我还有什么其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-07T16:35:00.033

如果您将 XmlComments 与您的程序集一起发布，它们可能会有所帮助，但我会说，如果不满足要求，最好不要抛出异常，并使异常消息尽可能详细。如果在用户调用和方法/属性依赖于属性时不满足要求，我也会抛出异常（同样有很多细节）。

您实际上无法阻止使用该代码的人第一次犯错，但是当错误确实发生时，您应该尽可能清楚地知道如何纠正它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-07T16:30:16.017

在 XML 注释中记录它，并引发异常。使消息明确：

```
Element <elementname> must match /regex/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-07T16:30:52.117

您的代码文档应该解决需求，或者架构文档应该解释需求。对于不费心研究他们将要使用的代码的人，您无能为力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T16:39:12.257

感谢您的建议。

我在考虑这个问题时的一个想法是创建一个名为 MatchedString 的新类来强制执行约束。

它有一个需要正则表达式字符串的构造函数，并且在构造之后，表达式只会通过只读属性向用户公开。然后它将有一个用户可以设置的 value 属性，该属性将检查 setter 中的表达式。

我的想法是，当枚举中的验证失败时，我还可以为不同的行为创建选项，并让用户指定他们想要的：

*   设置为空字符串
*   设置为空字符串并抛出异常
*   无论如何设置坏值
*   无论如何设置坏值，并抛出异常
*   只是抛出异常
*   没做什么

另外，我认为这将允许我的班级用户进行一些基本测试，而不必在他们自己的代码中复制 RegEx 对象。对字符串类型进行隐式转换，对类用户来说应该是直观的。

对此有什么想法吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-08T14:38:33.077

无论我是否使用它，实现 MatchedString 类看起来都很有趣。所以这里是：

```
Public Class MatchedString
    Public Enum InvalidValueBehaviors
        SetToEmpty
        AllowSetToInvalidValue
        DoNothing
    End Enum

    Public Sub New(ByVal Expression As String)
        Me.expression = Expression
        exp = New Regex(Me.expression)
    End Sub

    Public Sub New(ByVal Description As String, ByVal Expression As String)
        Me.expression = Expression
        exp = New Regex(Me.expression)
        _expressiondescription = Description
    End Sub

    Public Sub New(ByVal Expression As String, ByVal ThrowOnInvalidValue As Boolean, ByVal InvalidValueBehavior As InvalidValueBehaviors)
        Me.expression = Expression
        exp = New Regex(Me.expression)
        Me.ThrowOnInvalidValue = ThrowOnInvalidValue
        Me.InvalidValueBehavior = InvalidValueBehavior
    End Sub

    Public Sub New(ByVal Description As String, ByVal Expression As String, ByVal ThrowOnInvalidValue As Boolean, ByVal InvalidValueBehavior As InvalidValueBehaviors)
        Me.expression = Expression
        exp = New Regex(Me.expression)
        _expressiondescription = Description
        Me.ThrowOnInvalidValue = ThrowOnInvalidValue
        Me.InvalidValueBehavior = InvalidValueBehavior
    End Sub

    Private exp As Regex
    Private expression As String

    Public ReadOnly Property MatchExpression() As String
        Get
            Return expression
        End Get
    End Property

    Public ReadOnly Property ExpressionDescription() As String
        Get
            Return _expressiondescription
        End Get
    End Property
    Private _expressiondescription As String

    Public Function CheckIsMatch(ByVal s As String)
        Return exp.IsMatch(s)
    End Function

    Public Property ThrowOnInvalidValue() As Boolean
        Get
            Return _thrownoninvalidvalue
        End Get
        Set(ByVal value As Boolean)
            _thrownoninvalidvalue = value
        End Set
    End Property
    Private _thrownoninvalidvalue = True

    Public Property InvalidValueBehavior() As InvalidValueBehaviors
        Get
            Return _invalidvaluebehavior
        End Get
        Set(ByVal value As InvalidValueBehaviors)
            _invalidvaluebehavior = value
        End Set
    End Property
    Private _invalidvaluebehavior As InvalidValueBehaviors = InvalidValueBehaviors.DoNothing

    Public Property Value() As String
        Get
            Return _value
        End Get
        Set(ByVal value As String)
            If value Is Nothing Then value = "" 'Never set to Nothing

            If CheckIsMatch(value) Then
                _value = value
            Else
                Select Case InvalidValueBehavior
                    Case InvalidValueBehaviors.AllowSetToInvalidValue
                        _value = value
                    Case InvalidValueBehaviors.SetToEmpty
                        _value = ""
                End Select

                If ThrowOnInvalidValue Then
                    Throw New ArgumentOutOfRangeException(String.Format("String: {0} does not match expression: {1}", value, MatchExpression))
                End If
            End If
        End Set
    End Property
    Private _value As String = ""

    Public Overrides Function ToString() As String
        Return _value
    End Function
End Class 
```

# shell - shell 文本编辑器是如何工作的？

> ID：179299
> 
> 赞同：8
> 
> 时间：2008-10-07T16:27:13.387
> 
> 标签：shell, text-editor

我是编程新手，但我想知道诸如 vim、emacs、nano 等 shell 文本编辑器是如何控制命令行窗口的。我主要是一名 Windows 程序员，所以在 *nix 上可能有所不同。据我所知，只能将文本打印到控制台并要求输入。文本编辑器如何在命令行环境中创建可导航、可编辑的窗口？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-07T16:33:01.987

通过使用以下库，而这些库又使用转义字符序列

```
姓名
       ncurses - CRT 屏幕处理和优化包

概要
       ＃包括

描述
       ncurses 库例程为用户提供了一个独立于终端的
合理优化更新人物画面的方法。这
实施是“新诅咒”（ncurses）并且是批准的替代品
用于 4.4BSD 经典的 curses，已停产。

[……剪断……]

       ncurses 包支持：整体屏幕、窗口和垫
操纵；输出到 windows 和 pads；阅读终端输入；控制
通过终端和诅咒输入和输出选项；环境查询
例行公事；颜色处理；使用软标签键；terminfo 能力；
并访问低级终端操作例程。

```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-07T16:29:29.170

简短的回答：有它的库（如诅咒，俚语）。

更长的答案：通过打印特殊字符序列（称为转义序列，因为它们以 ESC 字符开头）来完成诸如用光标跳转或更改颜色之类的操作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-07T16:28:16.053

了解[ncurses](http://www.gnu.org/software/ncurses/)可能是一个很好的起点。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-10-07T16:28:51.263

有一个基于“VT100”终端的称为 vt100 的旧协议。它使用以 escape 开头的代码来控制光标位置、颜色、清除屏幕等。

这也是您获得彩色提示的方式。

Google VT100 或“终端转义码”

编辑：我为你搜索了它：[http ://www.termsys.demon.co.uk/vtansi.htm](http://www.termsys.demon.co.uk/vtansi.htm)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-07T16:33:35.323

如果您在 Windows 命令行控制台中键入“edit”，您也会注意到这一点。这个“特性”并不是类unix系统所独有的，尽管以这种方式操作windows控制台的概念与unix中的完全不同。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-07T16:48:14.030

在 Unix 系统上，控制台窗口模拟一个古老的串行终端（通常是[VT100](http://en.wikipedia.org/wiki/Vt100)）。您可以打印特殊控制字符和转义序列来移动光标、更改颜色和执行其他特殊效果。有一些库可以帮助处理细节；[ncurses](http://www.gnu.org/software/ncurses/)是最受欢迎的。

在 Windows 上，[Win32 控制台 API]( [http://msdn.microsoft.com/en-us/library/ms682073(VS.85%29.aspx)](http://msdn.microsoft.com/en-us/library/ms682073(VS.85%29.aspx))提供了类似的功能，但方式却截然不同。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-07T16:54:41.303

在命令行输入“c:\winnt\system32\edit”或“c:\windows\system32\edit”，您将看到一个命令行文本编辑器。

人们对用于控制命令屏幕的 ESC 字符大多是正确的，但一些较旧的程序也将字符直接写入 Windows 命令行屏幕使用的内存空间。

为了控制命令行窗口，您过去必须编写自己的窗口窗体、输入框、菜单等。您还必须将所有这些封装在一个大循环中以处理事件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-07T16:38:24.877

更具体的 Windows 命令行，该应用程序通常调用执行相同操作的 DOS 或 BIOS 函数。有时 ANSI 命令代码支持可用，有时则不可用（取决于确切的 MS 操作系统版本以及是否配置为加载它）。

# orm - O/R 映射值得吗？

> ID：179311
> 
> 赞同：13
> 
> 时间：2008-10-07T16:29:54.223
> 
> 标签：orm

ORM 提供的查询语言 (QL) 的表达能力非常强大。不幸的是，一旦您有一组复杂的查询，然后出现一些令人费解的模式或数据问题，就很难获得您需要的 DBA 帮助？在这里，他们是开发数据库的团队的一部分，但他们无法读取应用程序 QL，更不用说提出修改建议了。我通常最终会为他们从日志中获取生成的 SQL。但是，当他们建议对其进行更改时，这与原始 QL 有何关系？该过程不是往返的。

因此，在宣传 ORM 的价值十年之后，我现在想知道是否应该手动编写 SQL。也许我真正希望框架做的只是尽可能地自动化数据编组。

**问题**：您是否找到了处理组织中往返问题的方法？是否有一个可扩展且易于维护的 SQL 编组框架？

（是的，我知道纯 SQL 可能会将我绑定到数据库供应商。但是*可以*编写符合标准的 SQL。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-07T16:35:49.110

我认为您想要的是一种解决方案，可以最大限度地发挥 ORM 的优势，同时又不妨碍您使用其他方式。在我们的应用程序中，我们遇到的问题与您的问题大致相同；非常繁重的查询和大型数据模型。鉴于数据模型的大小，ORM 对于绝大多数应用程序来说都是无价的。它允许我们扩展数据模型，而无需花费大量精力手动维护 SQL 脚本。此外，您也谈到了这一点，我们支持四个数据库供应商，所以抽象很好。

但是，在某些情况下，我们不得不手动调整查询，并且由于我们选择了灵活的 ORM 解决方案，我们也可以这样做。正如您所说，当我们需要它时，它会自动消失，并且只是为我们整理对象。

所以，简而言之（是的，简而言之）是的，ORM 是值得的，但就像每个问题的解决方案一样，它不是灵丹妙药。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-07T16:35:05.040

一般来说，ORM 可以大大提高开发人员的工作效率，所以我会使用它们，除非它们已经成为一个比它们价值更大的问题。如果您的大多数表都足够大以至于您遇到很多问题，请考虑放弃 ORM。我绝对不会说 ORM 通常是一个坏主意。大多数数据库足够小，大多数查询也足够简单，可以很好地工作。

我已经通过仅针对性能不佳的查询使用存储过程或手写 SQL 来克服这个问题。DBA 喜欢存储过程，因为他们可以在不告诉您的情况下修改它们。大多数（如果不是全部）ORM 允许您混合手写 SQL 或存储过程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-07T16:38:54.517

我相信您熟悉的今天的 O/R 框架支持手动定义一些查询的选项（(N)Hibernate 确实如此）。可用于模式的复杂部分，对于直接部分，请使用框架提供的 ORM。

您要检查的另一件事可能是 iBatis 框架（[http://ibatis.apache.org/](http://ibatis.apache.org/)）。我没有使用过它，但我读到它更接近 SQL，熟悉数据库和 SQL 的人更喜欢它而不是像 hibernate 这样的成熟 ORM 框架，因为它比完全不同的 ORM 概念更接近它们。

# iis - 从 IE 下载 Docx - 在 IIS 中设置 MIME 类型

> ID：179315
> 
> 赞同：29
> 
> 时间：2008-10-07T16:30:50.230
> 
> 标签：iis, mime-types

我相信这个问题有一个简单的答案。

我有一个 docx 文件，尝试下载时出错（找不到文档）.... .doc 很好 .txt 也很好。我确信这只是一个 iis 设置，服务器上的权限对于所有文件都是相同的。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2008-10-07T16:41:49.567

是的，它只是一个 IIS 设置：默认情况下，[它只会提供扩展名与定义的 MIME 类型匹配的文件](http://support.microsoft.com/kb/326965)。

要允许下载 .docx 文件，请按照上面链接的知识库文章中的步骤操作：

1.  打开 IIS Microsoft 管理控制台 (MMC)，右键单击本地计算机名称，然后单击属性。
2.  单击 MIME 类型。
3.  单击新建。
4.  在“扩展名”框中，键入所需的文件扩展名（在本例中为 .docx）。
5.  在 MIME 类型框中，输入 application/vnd.openxmlformats-officedocument.wordprocessingml.document *（感谢@web 开发人员指出此 MIME 类型，它取代了我原始答案中的“应用程序/msword”）。*
6.  应用新设置。请注意，您必须重新启动万维网发布服务或等待工作进程回收以使更改生效。在此示例中，IIS 现在提供扩展名为 .docx 的文件。

请注意，知识库文章使用通用的 application/octet-stream MIME 类型：虽然这通常应该可以工作，但如果存在更具体的 MIME 类型，例如 application/msword，最好使用它。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-03-17T17:26:44.620

在上述解决方案的第 5 步中，您说

> 在 MIME 类型框中，键入 application/msword。

“application/msword” MIME 类型是单词 2003 “.doc” 文件的类型。word 2007 ".docx" 文件的正确 MIME 类型是：

> 应用程序/vnd.openxmlformats-officedocument.wordprocessingml.document

看到[这个](http://www.jameskovacs.com/blog/ConfiguringIIS6ToServeOffice2007FileFormats.aspx)帖子。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-10-20T10:07:04.430

谢谢，这非常有用。

如果您对 .pptx (Powerpoint 2007) 的 MIME 类型感兴趣

> 应用程序/vnd.openxmlformats-officedocument.presentationml.presentation

和 .xlsx (Excel 2007) 是

> 应用程序/vnd.openxmlformats-officedocument.spreadsheetml.sheet

[这些在哪里转置。我现在已经更正了，谢谢你指出斯文。]

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-07T16:35:34.867

当 IIS（6.0 及更高版本）中没有与扩展关联的 mime 类型时，它将为您提供 404。请参阅[Requests for static files return 404 error (IIS 6.0)](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/deeac9ef-cf55-4acd-86ce-b46022ff5479.mspx)。（**编辑：**截至 2017 年年中，原始 MSDN 链接已失效，[Internet Archive 有一个副本](https://web.archive.org/web/20170715213743/http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/deeac9ef-cf55-4acd-86ce-b46022ff5479.mspx?mfr=true)。即使它是为 IIS6 编写的，但该信息仍然适用于现代 IIS 版本。）

除此之外，仅仅因为您没有指定错误出现的*位置*：当您禁止在标头中缓存时，客户端上可能会发生类似的行为。但这是一个普遍问题，并不局限于 .docx。

# wpf - 如何在 Adob e Illustrator 或 Expression Design 文件中嵌入 png 以创建 XAML

> ID：179333
> 
> 赞同：2
> 
> 时间：2008-10-07T16:36:18.797
> 
> 标签：wpf, expression, adobe-illustrator

我有一个 AI 文件。我将它粘贴到 Expression Blend 中，然后导出 XAML 以在我的 WPF 项目中使用。适用于我的大多数文件，但有些导出 XAML 和单独的 png 文件。我该怎么做才能将 png 嵌入到我的图像路径而不是单独的图像中？可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-07T18:35:16.560

您可以尝试的另一种方法是使用 Expression Design 转换 .ai 文件。

（请注意，一旦您打开了 Expression Design，您需要在 File->Import 菜单项启用之前创建一个新文档。）

但是，一旦使用 Expression Design 转换 .ai 文件，您可能仍然会遇到在 .ai 中包含一些栅格信息的问题……正如 Terrapin 已经提到的那样，很难将其转换为矢量（并且通常会带来高内存足迹甚至接近光栅图像的质量）。

但为了帮助您，**Expression Design 还提供了一些将光栅信息转换为矢量的功能。如果您选择要转换的图像，只需转到*Object->Image->Auto Trace Image*进行转换。**

有关更多信息，请参阅此 StackOverflow[问题](https://stackoverflow.com/questions/153762/how-do-i-convert-an-illustrator-file-to-a-path-for-wpf#154494)，但基本上 Microsoft 允许您下载可以使用 90 天的试用版。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-07T16:59:06.473

查看此页面，该页面描述了将光栅图形转换为矢量，然后是 XAML -

[http://weblogs.asp.net/rrobbins/archive/2007/11/11/how-to-convert-raster-graphics-to-xaml.aspx](http://weblogs.asp.net/rrobbins/archive/2007/11/11/how-to-convert-raster-graphics-to-xaml.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-07T16:39:43.440

听起来生成的 PNG 可能是您 AI 文件的光栅部分，并且无法转换为矢量图形。您是否将 PNG、JPG 或其他光栅图形导入您的 AI 文件？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T12:23:04.130

要将光栅图像转换为矢量图像，我发现[Inkscape](http://www.inkscape.org/)（免费）做得非常好（与 VectorMagic 相比，顺便说一句不再免费）。

在 Inkscape 中，导入您的图像并使用路径/跟踪位图功能。它有很多控制权。

转换为矢量图像后，将其另存为 SVG。然后，使用[ViewerSvg](http://www.wpf-graphics.com/ViewerSvg.aspx)，您可以转换为 XAML 矢量数据。（路径和画布）

# asp.net - Google util.js 和 ASP.NET AJAX 之间的冲突？

> ID：179334
> 
> 赞同：0
> 
> 时间：2008-10-07T16:37:01.747
> 
> 标签：asp.net, javascript, asp.net-ajax

我正在尝试使用[Google 的 jstemplate](http://code.google.com/apis/jstemplate/docs/howto.html)作为 ASP.NET 页面上的客户端模板引擎，它似乎与 ASP.NET AJAX 冲突。问题不是 jstemplate.js 而是 util.js，它需要它作为支持文件。

我已将问题隔离如下：

```
<%@ Page Language="VB" %>
<body>
    <form id="form1" runat="server">
        <asp:scriptmanager id="ScriptManager" runat="server" enablepartialrendering="true">
            <scripts>
                <asp:scriptreference path="http://google-jstemplate.googlecode.com/svn/trunk/util.js" />
            </scripts>
        </asp:scriptmanager>
    </form>
</body>
</html> 
```

当我运行这个我得到这个错误

```
Microsoft JScript runtime error: 'type' is null or not an object` 
```

在这条线上`MicrosoftAjax.js`：

```
 Sys.UI.DomEvent = function Sys$UI$DomEvent(eventObject) {
 ...
 var etype = this.type = e.type.toLowerCase(); 
```

在普通`<script>`块中（而不是在 ScriptManager 中）引用 javascript 具有相同的效果。

我还没有深入研究它，但我怀疑只是命名空间冲突。有没有人在 ASP.NET ajax 旁边成功使用了 Google 的 util.js 文件？还是我应该只研究替代的客户端模板引擎？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-26T12:05:03.607

我们在 ASP.net AJAX 和 jQuery 中遇到了类似的问题。问题出在 $ 命名空间上，所以我们不得不恢复使用 jQuery 命名空间。

您的错误听起来很相似，所以我想看看您是否有 google util.js 的替代命名空间或为自己设置一个。

高温高压

马特

# c# - 如何固定变量的精度

> ID：179337
> 
> 赞同：3
> 
> 时间：2008-10-07T16:38:05.470
> 
> 标签：c#, .net, math

在c#中

```
double tmp = 3.0 * 0.05; 
```

tmp = 0.15000000000000002

这与金钱有关。该值实际上是 0.15 美元，但系统希望将其四舍五入到 0.16 美元。0.151 应该四舍五入到 0.16，但不是 0.15000000000000002

有哪些方法可以得到正确的数字（即 0.15，如果小数足够高，则为 0.16）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-10-07T16:39:40.943

使用定点变量类型或十进制浮点类型，如 Decimal。浮点数总是有些不准确，二进制浮点表示在与基数 2 进行转换时又增加了一层不准确性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-07T16:49:53.200

钱应该存储为`decimal`，这是一个[浮点小数点类型](http://pobox.com/~skeet/csharp/decimal.html)。其他数据也是如此，这些数据实际上是离散的而不是连续的，并且在逻辑上本质上是十进制的。

出于显而易见的原因，人类对小数有偏见，因此货币等“人造”数量往往更适合小数形式。“自然”量（质量、高度）具有更连续的尺度，这意味着`float`/ `double`（它们是[浮点二进制点类型](http://pobox.com/~skeet/csharp/floatingpoint.html)）通常（但不总是）更合适。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-07T16:44:25.427

在企业应用架构模式中，Martin Fowler 建议使用 Money 抽象

[http://martinfowler.com/eaaCatalog/money.html](http://martinfowler.com/eaaCatalog/money.html)

大多数情况下，他这样做是为了处理货币，但也是为了精确。

您可以在此 Google 图书搜索结果中看到一些内容：

[http://books.google.com/books?id=FyWZt5DdvFkC&pg=PT520&lpg=PT520&dq=money+martin+fowler&source=web&ots=eEys-C_vdA&sig=jckdxgMLSRJtGDYZtcbYST1ak8M&hl=en&sa=X&oi=book_result&resnum=6&ct=result](http://books.google.com/books?id=FyWZt5DdvFkC&pg=PT520&lpg=PT520&dq=money+martin+fowler&source=web&ots=eEys-C_vdA&sig=jckdxgMLSRJtGDYZtcbYST1ak8M&hl=en&sa=X&oi=book_result&resnum=6&ct=result)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T16:41:08.383

“十进制”类型是专门为此设计的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-07T17:01:25.410

数据类型可以`decimal`很好地工作，并且可能是您的选择。

但是，在过去，我已经能够使用定点整数以优化的方式做到这一点。它是高性能计算的理想之选，在这种情况`decimal`下，您不能有`float`.

从一个 开始`Int32`，然后分成两半。前半部分是整数部分，后半部分是小数部分。你得到 16 位有符号整数加上 16 位小数精度。例如 1.5 作为 16:16 的固定点将表示为`0x00018000`。或者，更改位的分布以满足您的需要。

定点数通常可以像任何其他整数一样添加/sub/mul/div，在 mul/div 周围进行一些工作以避免溢出。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-08T03:38:42.143

你面临的是一个舍入问题，我之前在另一篇文章中提到过

[我可以在 .NET 中使用“System.Currency”吗？](https://stackoverflow.com/questions/151291/can-i-use-systemcurrency-in-net#153410)

并参考这个[舍入](http://en.wikipedia.org/wiki/Rounding)

# version-control - 如何管理不断修改的外部依赖项

> ID：179338
> 
> 赞同：7
> 
> 时间：2008-10-07T16:38:17.513
> 
> 标签：version-control, build-process

我们的开发使用了大量开源代码，我试图找出管理这些外部依赖项的最佳方法。

我们目前的配置：

*   我们正在为 linux 和 windows 开发
*   我们将 svn 用于我们自己的代码
*   外部依赖项（boost、log4cpp 等）不存储在 svn 中。相反，我将它们放在 ./extern （或 Windows 上的 c:\extern ）下。我不想将它们放在我们的存储库中，因为我无法以这种方式更新它们。其中一些正在不断更新。

我的问题

*   如果我需要修改外部代码怎么办？目前我已经在我的 svn 存储库中创建了一个名为 extern_hacks 的文件夹，这就是我放置修改后的外部代码的地方。然后我将文件链接（或在 Windows 上复制）到外部目录结构中。这个解决方案是有问题的，因为很难跟踪复制文件，并且当文件位于两个存储库中时很难从 svn 更新（我的用于修改的文件，原始存储库说 sourceforge）

*   如何管理外部依赖的版本？

我很想听听其他人如何处理这些问题。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-07T16:47:56.170

我将它们保存在 svn 中，并将它们作为[供应商分支](http://svnbook.red-bean.com/en/1.5/svn.advanced.vendorbr.html)进行管理。让它们在外部保持松散使得很难回到以前的构建，或者修复以前构建中的错误（特别是如果错误来自对外部依赖项的更改）

将它们保存在 svn 中为我省去了很多麻烦，还可以让您获得一个能够快速处理您的代码库的新工作站。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-07T16:45:20.183

我不明白你为什么说

> 我不想将它们放在我们的存储库中，因为我无法以这种方式更新它们。其中一些正在不断更新。

你真的需要

1.  在源代码管理中包含外部依赖项并定期更新它们，然后测试、测试、测试。

2.  协调您的构建过程与外部依赖项的更新。

如果您的代码依赖于某些东西，那么您确实需要控制它何时更新/修改。在这些依赖项可以随时更新的空间中编码太痛苦了，因为您无疑会发现。我个人更喜欢选项1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-07T16:50:59.843

当我不得不做这样的事情时，我将外部源添加为外部，然后对其应用补丁。该补丁包含我对外部源的修改。所以，我实际上只对我的补丁进行版本控制。大多数情况下，如果外部代码没有“戏剧性”的变化，这是可行的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T16:50:06.180

你考虑过[Maven](http://maven.apache.org/)吗？它是一个构建系统，对管理依赖项具有出色的支持。对于每个项目，您可以在 xml 文件中指定所需的依赖项作为该项目的一部分。外部库保存在依赖库（在我们的例子中为[Artifactory](http://www.jfrog.org/sites/artifactory/1.2/)）中，它与您的版本控制系统分开，可以只是一个网络驱动器。它还允许管理不同版本的项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-07T21:51:17.603

我会谨慎考虑 Maven，因为：

*   它是系统中的另一个存储库，您已经有一个带有当前版本控制系统的存储库；
*   它（Maven）基于每个开发人员拥有的唯一“通用版本控制”，即文件系统（这意味着没有元数据或附加到文件的属性，没有关于谁修改了什么以及何时修改的适当历史）

现在，当与第三方打交道时，您可以考虑将它们放在您的版本控制系统中，但以**打包的方式**：即以非常紧凑的方式，压缩源和文档，以**尽可能少地保存文件**。

这样，您将轻松管理那些（许多）第三方库的***部署，因为要部署的文件数量很少。***

另外，将它们置于源代码控制下允许您创建一个分支（例如，“hack”分支），您将在其中存储被破解库的打包（或压缩）版本。

您可以以外部方式存储的是代表这些库的未压缩的完整文件集，因为它们没有真正的开发，或者只是准时破解：通常，您的工作不是开发现有的库，而是使用它们（甚至有点修改）用于更快地实现项目的某些功能。

如果您需要在某些时候将某些破解版本与某些官方版本进行比较，您只需从 svn 中提取适当的“破解”版本号，解压缩并与官方（和外部存储）版本进行比较（使用 winmerge例如）

# javascript - 使用 JavaScript 清除所有 cookie

> ID：179355
> 
> 赞同：361
> 
> 时间：2008-10-07T16:41:55.480
> 
> 标签：javascript, cookies

如何使用 JavaScript 删除当前域的所有 cookie？

* * *

## 回答 #1

> 赞同：386
> 
> 时间：2008-10-07T17:27:03.080

```
function deleteAllCookies() {
    var cookies = document.cookie.split(";");

    for (var i = 0; i < cookies.length; i++) {
        var cookie = cookies[i];
        var eqPos = cookie.indexOf("=");
        var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
        document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT";
    }
} 
```

请注意，此代码有两个限制：

*   它不会删除`HttpOnly`设置了标志的 cookie，因为该`HttpOnly`标志会禁用 Javascript 对 cookie 的访问。
*   它不会删除已设置`Path`值的 cookie。（尽管这些 cookie 将出现在 中`document.cookie`，但如果不指定与设置它的值相同的值，则无法删除它`Path`。）

* * *

## 回答 #2

> 赞同：162
> 
> 时间：2014-12-09T08:28:21.110

### 一个班轮

如果您想快速粘贴它...

```
document.cookie.split(";").forEach(function(c) { document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/"); }); 
```

小书签的代码：

```
javascript:(function(){document.cookie.split(";").forEach(function(c) { document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/"); }); })(); 
```

* * *

## 回答 #3

> 赞同：126
> 
> 时间：2015-10-27T10:59:23.060

这是清除所有路径和域的所有变体（www.mydomain.com、mydomain.com 等）中的所有 cookie 的方法：

```
(function () {
    var cookies = document.cookie.split("; ");
    for (var c = 0; c < cookies.length; c++) {
        var d = window.location.hostname.split(".");
        while (d.length > 0) {
            var cookieBase = encodeURIComponent(cookies[c].split(";")[0].split("=")[0]) + '=; expires=Thu, 01-Jan-1970 00:00:01 GMT; domain=' + d.join('.') + ' ;path=';
            var p = location.pathname.split('/');
            document.cookie = cookieBase + '/';
            while (p.length > 0) {
                document.cookie = cookieBase + p.join('/');
                p.pop();
            };
            d.shift();
        }
    }
})(); 
```

* * *

## 回答 #4

> 赞同：78
> 
> 时间：2011-05-04T16:34:52.880

在我自己对此感到有些沮丧之后，我将这个函数拼凑在一起，它将尝试从所有路径中删除一个命名的 cookie。只需为您的每个 cookie 调用此命令，您应该比以前更接近于删除每个 cookie。

```
function eraseCookieFromAllPaths(name) {
    // This function will attempt to remove a cookie from all paths.
    var pathBits = location.pathname.split('/');
    var pathCurrent = ' path=';

    // do a simple pathless delete first.
    document.cookie = name + '=; expires=Thu, 01-Jan-1970 00:00:01 GMT;';

    for (var i = 0; i < pathBits.length; i++) {
        pathCurrent += ((pathCurrent.substr(-1) != '/') ? '/' : '') + pathBits[i];
        document.cookie = name + '=; expires=Thu, 01-Jan-1970 00:00:01 GMT;' + pathCurrent + ';';
    }
} 
```

一如既往，不同的浏览器有不同的行为，但这对我有用。享受。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2014-01-06T09:38:36.047

如果您有权访问[jquery.cookie](http://plugins.jquery.com/cookie/)插件，则可以通过以下方式清除所有 cookie：

```
for (var it in $.cookie()) $.removeCookie(it); 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2008-10-07T16:49:25.120

据我所知，没有办法全面删除域上设置的任何 cookie。如果您知道名称并且脚本与 cookie 位于同一域中，则可以清除 cookie。

您可以将值设置为空，并将到期日期设置为过去的某个时间：

```
var mydate = new Date();
mydate.setTime(mydate.getTime() - 1);
document.cookie = "username=; expires=" + mydate.toGMTString(); 
```

这里有一篇关于使用 javascript 操作 cookie的[优秀文章。](http://www.elated.com/articles/javascript-and-cookies/)

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2017-05-24T16:52:29.260

受此处的第二个答案和 W3Schools 影响的答案

```
document.cookie.split(';').forEach(function(c) {
  document.cookie = c.trim().split('=')[0] + '=;' + 'expires=Thu, 01 Jan 1970 00:00:00 UTC;';
}); 
```

似乎在工作

编辑：哇几乎与 Zach 有趣的 Stack Overflow 如何将它们彼此相邻的方式完全相同。

编辑：显然是暂时的 nvm

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2021-03-18T19:43:28.553

以下代码将删除当前域和所有尾随子域（`www.some.sub.domain.com`、`.some.sub.domain.com`等`.sub.domain.com`）中的所有 cookie。

单行香草 JS 版本（我认为这里唯一没有使用的`cookie.split()`）：

```
document.cookie.replace(/(?<=^|;).+?(?=\=|;|$)/g, name => location.hostname.split('.').reverse().reduce(domain => (domain=domain.replace(/^\.?[^.]+/, ''),document.cookie=`${name}=;max-age=0;path=/;domain=${domain}`,domain), location.hostname)); 
```

这是这一行的可读版本：

```
document.cookie.replace(
  /(?<=^|;).+?(?=\=|;|$)/g, 
  name => location.hostname
    .split(/\.(?=[^\.]+\.)/)
    .reduceRight((acc, val, i, arr) => i ? arr[i]='.'+val+acc : (arr[i]='', arr), '')
    .map(domain => document.cookie=`${name}=;max-age=0;path=/;domain=${domain}`)
); 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2013-11-21T08:09:33.023

更简单。快点。

```
function deleteAllCookies() {
 var c = document.cookie.split("; ");
 for (i in c) 
  document.cookie =/^[^=]+/.exec(c[i])[0]+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT";    
} 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2021-03-13T09:48:58.627

如果您担心仅在安全源上清除 cookie，您可以使用[Cookie Store API](https://wicg.github.io/cookie-store/)及其[.delete()](https://wicg.github.io/cookie-store/#CookieStore-delete)方法。

```
cookieStore.getAll().then(cookies => cookies.forEach(cookie => {
    console.log('Cookie deleted:', cookie);
    cookieStore.delete(cookie.name);
})); 
```

访问[Cookie Store API的](https://wicg.github.io/cookie-store/)[caniuse.com](https://caniuse.com/?search=cookiestore)表以检查**浏览器支持**。

 *** * *

## 回答 #11

> 赞同：5
> 
> 时间：2018-05-11T11:28:07.207

我不知道为什么第一个投票的答案对我不起作用。

正如[这个答案](https://stackoverflow.com/questions/595228/how-can-i-delete-all-cookies-with-javascript)所说：

> 没有 100% 的解决方案可以删除浏览器 cookie。
> 
> 问题在于，cookie 不仅由它们的键“名称”唯一标识，而且由它们的“域”和“路径”唯一标识。
> 
> 在不知道 cookie 的“域”和“路径”的情况下，您无法可靠地删除它。此信息无法通过 JavaScript 的 document.cookie 获得。它也不能通过 HTTP Cookie 标头获得！

所以我的想法是添加一个带有全套设置、获取、删除cookie的cookie版本控制：

```
var cookie_version_control = '---2018/5/11';

function setCookie(name,value,days) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days*24*60*60*1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name+cookie_version_control + "=" + (value || "")  + expires + "; path=/";
}

function getCookie(name) {
    var nameEQ = name+cookie_version_control + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function removeCookie(name) {   
    document.cookie = name+cookie_version_control+'=; Max-Age=-99999999;';  
} 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2013-07-23T19:28:58.920

想我会分享这个清除cookie的方法。也许在某些时候它可能对其他人有所帮助。

```
var cookie = document.cookie.split(';');

for (var i = 0; i < cookie.length; i++) {

    var chip = cookie[i],
        entry = chip.split("="),
        name = entry[0];

    document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
} 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2019-03-01T15:19:22.010

我有一些更复杂和面向 OOP 的 cookie 控制模块。它还包含`deleteAll`清除所有现有 cookie 的方法。请注意，此版本的`deleteAll`方法具有`path=/`导致删除当前域中所有 cookie 的设置。如果您只需要从某个范围内删除 cookie，则必须升级此方法，将动态`path`参数添加到此方法。

有主`Cookie`类：

```
import {Setter} from './Setter';

export class Cookie {
    /**
     * @param {string} key
     * @return {string|undefined}
     */
    static get(key) {
        key = key.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1');

        const regExp = new RegExp('(?:^|; )' + key + '=([^;]*)');
        const matches = document.cookie.match(regExp);

        return matches
            ? decodeURIComponent(matches[1])
            : undefined;
    }

    /**
     * @param {string} name
     */
    static delete(name) {
        this.set(name, '', { expires: -1 });
    }

    static deleteAll() {
        const cookies = document.cookie.split('; ');

        for (let cookie of cookies) {
            const index = cookie.indexOf('=');

            const name = ~index
                ? cookie.substr(0, index)
                : cookie;

            document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/';
        }
    }

    /**
     * @param {string} name
     * @param {string|boolean} value
     * @param {{expires?:Date|string|number,path?:string,domain?:string,secure?:boolean}} opts
     */
    static set(name, value, opts = {}) {
        Setter.set(name, value, opts);
    }
} 
```

Cookie setter 方法 ( `Cookie.set`) 比较复杂，所以我将其分解为其他类。有这个的代码：

```
export class Setter {
    /**
     * @param {string} name
     * @param {string|boolean} value
     * @param {{expires?:Date|string|number,path?:string,domain?:string,secure?:boolean}} opts
     */
    static set(name, value, opts = {}) {
        value = Setter.prepareValue(value);
        opts = Setter.prepareOpts(opts);

        let updatedCookie = name + '=' + value;

        for (let i in opts) {
            if (!opts.hasOwnProperty(i)) continue;

            updatedCookie += '; ' + i;

            const value = opts[i];

            if (value !== true)
                updatedCookie += '=' + value;
        }

        document.cookie = updatedCookie;
    }

    /**
     * @param {string} value
     * @return {string}
     * @private
     */
    static prepareValue(value) {
        return encodeURIComponent(value);
    }

    /**
     * @param {{expires?:Date|string|number,path?:string,domain?:string,secure?:boolean}} opts
     * @private
     */
    static prepareOpts(opts = {}) {
        opts = Object.assign({}, opts);

        let {expires} = opts;

        if (typeof expires == 'number' && expires) {
            const date = new Date();

            date.setTime(date.getTime() + expires * 1000);

            expires = opts.expires = date;
        }

        if (expires && expires.toUTCString)
            opts.expires = expires.toUTCString();

        return opts;
    }
} 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2021-03-01T12:21:48.443

```
document.cookie.split(";").forEach(function(c) { 
    document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/"); 
});
//clearing local storage
localStorage.clear(); 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-10-07T16:54:27.653

您可以通过查看 document.cookie 变量来获取列表。将它们全部清除只是循环所有它们并逐个清除它们的问题。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2016-07-04T11:55:08.417

[这是删除 JavaScript 中所有 cookie](http://mycodingtricks.com/snippets/javascript/javascript-cookies/#Delete_All_Cookies)的简单代码。

```
function deleteAllCookies(){
   var cookies = document.cookie.split(";");
   for (var i = 0; i < cookies.length; i++)
     deleteCookie(cookies[i].split("=")[0]);
}

function setCookie(name, value, expirydays) {
 var d = new Date();
 d.setTime(d.getTime() + (expirydays*24*60*60*1000));
 var expires = "expires="+ d.toUTCString();
 document.cookie = name + "=" + value + "; " + expires;
}

function deleteCookie(name){
  setCookie(name,"",-1);
} 
```

运行该函数`deleteAllCookies()`以清除所有 cookie。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-08-13T09:57:26.697

```
//Delete all cookies
function deleteAllCookies() {
    var cookies = document.cookie.split(";");
    for (var i = 0; i < cookies.length; i++) {
        var cookie = cookies[i];
        var eqPos = cookie.indexOf("=");
        var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
        document.cookie = name + '=;' +
            'expires=Thu, 01-Jan-1970 00:00:01 GMT;' +
            'path=' + '/;' +
            'domain=' + window.location.host + ';' +
            'secure=;';
    }
} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-07-07T11:31:05.303

### 函数式方法 + ES6

```
const cookieCleaner = () => {
  return document.cookie.split(";").reduce(function (acc, cookie) {
    const eqPos = cookie.indexOf("=");
    const cleanCookie = `${cookie.substr(0, eqPos)}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;`;
    return `${acc}${cleanCookie}`;
  }, "");
} 
```

> 注意：不处理路径

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-02-28T17:50:35.197

这里的几个答案不能解决路径问题。我相信：如果您控制网站或其中的一部分，您应该知道使用的所有路径。因此，您只需让它从所有使用的路径中删除所有 cookie。因为我的网站已经有 jquery（并且出于懒惰），所以我决定使用 jquery cookie，但是您可以根据其他答案轻松地将其调整为纯 javascript。

在此示例中，我删除了电子商务平台正在使用的三个特定路径。

```
let mainURL = getMainURL().toLowerCase().replace('www.', '').replace('.com.br', '.com'); // i am a brazilian guy
let cookies = $.cookie();
for(key in cookies){
    // default remove
    $.removeCookie(key, {
        path:'/'
    });
    // remove without www
    $.removeCookie(key, {
        domain: mainURL,
        path: '/'
    });
    // remove with www
    $.removeCookie(key, {
        domain: 'www.' + mainURL,
        path: '/'
    });
};

// get-main-url.js v1
function getMainURL(url = window.location.href){
    url = url.replace(/.+?\/\//, ''); // remove protocol
    url = url.replace(/(\#|\?|\/)(.+)?/, ''); // remove parameters and paths
    // remove subdomain
    if( url.split('.').length === 3 ){
        url = url.split('.');
        url.shift();
        url = url.join('.');
    };
    return url;
}; 
```

我将 .com 站点更改为 .com.br，因为我的站点是多域和多语言的

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2021-06-22T14:09:46.727

我在这里做出贡献是因为此功能将允许您删除所有 cookie（匹配路径，默认情况下为 no-path 或`\`）**以及设置为包含在子域中的 cookie**

```
function clearCookies( wildcardDomain=false, primaryDomain=true, path=null ){
  pathSegment = path ? '; path=' + path : ''
  expSegment = "=;expires=Thu, 01 Jan 1970 00:00:00 GMT"
  document.cookie.split(';').forEach(
    function(c) { 
      primaryDomain && (document.cookie = c.replace(/^ +/, "").replace(/=.*/, expSegment + pathSegment))
      wildcardDomain && (document.cookie = c.replace(/^ +/, "").replace(/=.*/, expSegment + pathSegment + '; domain=' + document.domain))
    }
  )
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-01-13T18:25:39.757

在针对多种样式的 cookie 测试了多种样式的浏览器中列出的几乎所有方法之后，我发现这里几乎没有任何东西可以工作，甚至 50%。

请根据需要帮助纠正，但我要在这里投入我的 2 美分。下面的方法分解了所有内容，基本上基于设置部分以及逐步构建路径字符串来构建 cookie 值字符串，`/`当然是从开始的。

希望这对其他人有所帮助，我希望任何批评都可能以完善这种方法的形式出现。起初，我想要一个简单的 1-liner，就像其他人想要的那样，但是 JS cookie 是那些不容易处理的东西之一。

```
;(function() {
    if (!window['deleteAllCookies'] && document['cookie']) {
        window.deleteAllCookies = function(showLog) {
            var arrCookies = document.cookie.split(';'),
                arrPaths = location.pathname.replace(/^\//, '').split('/'), //  remove leading '/' and split any existing paths
                arrTemplate = [ 'expires=Thu, 01-Jan-1970 00:00:01 GMT', 'path={path}', 'domain=' + window.location.host, 'secure=' ];  //  array of cookie settings in order tested and found most useful in establishing a "delete"
            for (var i in arrCookies) {
                var strCookie = arrCookies[i];
                if (typeof strCookie == 'string' && strCookie.indexOf('=') >= 0) {
                    var strName = strCookie.split('=')[0];  //  the cookie name
                    for (var j=1;j<=arrTemplate.length;j++) {
                        if (document.cookie.indexOf(strName) < 0) break; // if this is true, then the cookie no longer exist
                        else {
                            var strValue = strName + '=; ' + arrTemplate.slice(0, j).join('; ') + ';';  //  made using the temp array of settings, putting it together piece by piece as loop rolls on
                            if (j == 1) document.cookie = strValue;
                            else {
                                for (var k=0;k<=arrPaths.length;k++) {
                                    if (document.cookie.indexOf(strName) < 0) break; // if this is true, then the cookie no longer exist
                                    else {
                                        var strPath = arrPaths.slice(0, k).join('/') + '/'; //  builds path line 
                                        strValue = strValue.replace('{path}', strPath);
                                        document.cookie = strValue;
                                    }
                                }
                            }
                        }
                    }
                }
            }
            showLog && window['console'] && console.info && console.info("\n\tCookies Have Been Deleted!\n\tdocument.cookie = \"" + document.cookie + "\"\n");
            return document.cookie;
        }
    }
})(); 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-07-06T09:54:21.340

**查询：**

```
var cookies = $.cookie();
for(var cookie in cookies) {
$.removeCookie(cookie);
} 
```

**香草JS**

```
function clearListCookies()
{   
 var cookies = document.cookie.split(";");
 for (var i = 0; i < cookies.length; i++)
  {   
    var spcook =  cookies[i].split("=");
    deleteCookie(spcook[0]);
  }
  function deleteCookie(cookiename)
   {
    var d = new Date();
    d.setDate(d.getDate() - 1);
    var expires = ";expires="+d;
    var name=cookiename;
    //alert(name);
    var value="";
    document.cookie = name + "=" + value + expires + "; path=/acc/html";                    
}
window.location = ""; // TO REFRESH THE PAGE
} 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-12-15T08:35:49.323

如果您想使用`js-cookie`npm 包并按名称删除 cookie：

```
import cookie from 'js-cookie'

export const removeAllCookiesByName = (cookieName: string) => {
  const hostParts = location.host.split('.')
  const domains = hostParts.reduce(
    (acc: string[], current, index) => [
      ...acc,
      hostParts.slice(index).join('.'),
    ],
    []
  )
  domains.forEach((domain) => cookie.remove(cookieName, { domain }))
} 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2016-02-28T08:09:45.877

我在 IE 和 Edge 中发现了一个问题。Webkit 浏览器（Chrome、safari）似乎更宽容。设置 cookie 时，请始终将“路径”设置为某些内容，因为默认设置为设置 cookie 的页面。因此，如果您尝试在其他页面上使其过期而不指定“路径”，则路径将不匹配并且不会过期。该`document.cookie`值不显示 cookie 的路径或过期时间，因此您无法通过查看该值来推断 cookie 的设置位置。

如果您需要使来自不同页面的 cookie 过期，请将设置页面的路径保存在 cookie 值中，以便稍后将其拉出或始终附加`"; path=/;"`到 cookie 值中。然后它将从任何页面到期。

# oracle - 如何使用 ADO 连接字符串以 SYS 身份连接到 Oracle 数据库？

> ID：179365
> 
> 赞同：3
> 
> 时间：2008-10-07T16:44:55.537
> 
> 标签：oracle, ado, connection-string, sysdba

我正在尝试这个：

```
Provider=MSDASQL.1;Persist Security Info=False;User ID=sys;Password=pwd;Initial Catalog=DATABASE;Data Source=OdbcDataSource;DBA Privilege=SYSDBA 
```

但我得到了错误：

```
[Microsoft][ODBC Driver Manager] Driver's SQLSetConnectAttr failed 
```

我正在使用 Delphi，但欢迎使用任何语言的答案。

***澄清：我能够以普通用户的身份连接。当我尝试连接 AS SYSDBA 时遇到了麻烦。***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-10T03:37:54.250

您无法使用标准 System.Data.OracleClient 以 SYSDBA 身份连接，如本文所述：[http](http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=2245591&SiteID=1) ://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=2245591&SiteID=1 。

您可以使用 ODP .NET（适用于 .NET 的 Oracle 数据提供程序）或其他第三方库来执行此操作。如果您打算在 .NET 上构建严肃的 Oracle 应用程序，我建议您至少看看 ODP.NET

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-07T16:49:08.273

我不确定作为 SYS 连接是什么意思，但这里有一个指向[连接字符串](http://www.connectionstrings.com)的甜蜜存储库的链接。我希望你能在那里找到你的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-07T16:56:23.953

Oracle 连接字符串示例

您必须在 TNSNames 文件中定义您的 Oracle SID。哪个是数据源。

```
Data Source=oracl;User Id=userID;Password=password;Integrated Security=no 
```

如果您使用的是 Visual Studios，您可以在 Sever Explore 中添加一个数据源，它会为您提供连接字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-22T07:14:11.987

在此处发布答案，因为这是寻找 DBA PRIVILEGE 连接字符串的答案时的最佳结果

```
Data Source=(DESCRIPTION =(ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))(CONNECT_DATA =(SERVER = DEDICATED)(SERVICE_NAME = ORCL))); User ID=sys; Password=syspassword; DBA PRIVILEGE=SYSDBA 
```

# database - 糟糕的数据库设计 - 我的表是否太大？

> ID：179368
> 
> 赞同：4
> 
> 时间：2008-10-07T16:45:41.963
> 
> 标签：database, database-design, performance, size

我有一个设计不佳的数据库。最重要的表之一有 11,000 多个条目。我们想扩展我们的系统，我想知道如果这个表增长到它的 5 倍大小，这会是一个问题吗？它的大小为 15360 kB……如果这很重要的话。

* * *

我正在使用 phpMyAdmin，服务器是 Fedora Linux 盒子（没什么花哨的），负载很轻。它存储了我们系统使用的几乎所有东西。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-10-07T16:47:48.870

什么数据库管理系统？什么服务器？什么负载？什么应用？

此外：11.000 条记录真的不算什么。即使在 MS Access 中。:-)

编辑：所以我假设你使用一个相当新的 MySQL 和 MyISAM 表。理论上，您可以继续将表格填充到数百万条记录中。根据您使用它们的方式（是否有很多连接，是否有很多查询/更新/删除/不），您不需要做任何特别的事情。在桌子上放一个适当的索引，你应该没问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-10-07T17:17:01.400

我了解您担心如果将“设计不佳的数据库”中的记录数增加到 55.000 左右会影响性能。

如果您的系统现在按预期工作，我认为您应该可以处理 50.000 条记录，除非您已经有一些轻微的性能问题。

正如大多数人提到的那样，50k 记录相对于数据库表大小来说是一个非常小的数字，即使没有规范化的数据库也不应该有性能问题。

如果您打算扩展系统的功能，那么也许现在也是查看数据库设计的好时机，否则保持原样应该是相当安全的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-07T16:49:07.663

我认为您没有提供足够的信息让某人给出答案。为什么设计不好？不是标准化了吗？你没有任何索引吗？它是什么数据库？它在什么操作系统上运行？现在从有问题的表中查询记录需要多长时间？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-10-07T16:50:22.967

11k 条目并不多。50K也不大。

将索引放在表上（针对您将在其上运行的查询进行了优化）将允许在比您预想的更多的数量上获得良好的性能。

如果设计不够糟糕，您可能会考虑重新设计的成本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-07T16:48:55.013

“设计不良的数据库”是什么意思？

如果设计不当，请重新设计，将信息从当前表中拖出，然后填充新表。

如果您关心性能，11000 个条目并不大。按照 db 标准，一个 15 MB 的数据库非常小。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-07T16:53:02.947

桌子的大小不是很重要。键、索引和关系的设计与设计质量的关系远大于其中包含的数据大小。对此显然有一些警告；但是优化表格的大小几乎是我在处理性能或设计问题时所做的最后一件事。

您可能想更多地解释为什么您认为这是一个设计不佳的数据库，以及您可以（轻松）做些什么来纠正这些问题。除此之外，您还应该详细说明 DBMS 的类型和用途（Web 应用程序、自定义应用程序、报告等）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-07T16:53:18.093

15MB 不算什么。11k 行也是如此。我有超过 2 GB 数据的数据库，其中一些表包含超过 100 万行，我认为这介于中小型之间。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-07T16:53:58.637

您确实没有提供任何证据来支持您认为这是一个设计不佳的数据库的说法。是什么让它设计不佳？表有 876 列吗？列是否命名为 Col1、Col2、Col3 ...？它是否使用浮点数和日期时间作为复合主键？归一化不好？我们唯一知道的是它的记录数。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-07T16:57:51.220

11K 记录在数据库方面通常不算什么。

除了一张表中的记录数量之外，还有什么让您认为数据库设计不佳？

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-10-07T17:12:07.930

您需要提供有关表结构的更多信息。

一般来说，一个表中的 15,000 行会被认为很小，实际上是如此之小，以至于一些设计人员甚至可能不会费心为其编制索引。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-07T16:49:48.460

一个糟糕的基础将是你最昂贵的错误。如果桌子很重要，那么您需要确定修复它的重要性。表中的行数只会影响您从中提取内容的速度。但是，如果您一开始就有一个糟糕的数据库设计，那么您的双手将在未来的某些地方受到束缚。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-07T16:54:53.580

如果您正在谈论 SQL Server 2005，请查看 SQL Server profiler 并使用索引调整向导。

如果您需要额外的性能，某些数据库还支持将表固定到内存。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-10-07T16:56:57.243

记录的组成比表中有多少记录更重要。

在我工作的地方，我们的数据库中有许多表，记录数达到数万或数十万。在大多数情况下，我们的数据库被认为很小。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-08-05T13:38:16.650

如果您要扩展您的系统，现在是时候重新设计（如果需要）了。拥有 11,000 条记录时，重新设计比拥有 1000 万条记录时的痛苦要小得多。但是，您所说的任何内容都没有向我表明您需要重新设计。拥有连接本身并没有错（事实上，一个设计良好的数据库应该拥有它们）。发布有关结构的一些详细信息，我们可以帮助您决定是否需要重新设计。

问题可能在于您和您的同事根本没有数据库访问经验，并且不知道如何有效和轻松地查询它们。或者问题可能是设计不好，没有结构细节，很难说。

# python - 如何中止 Python 脚本的执行？

> ID：179369
> 
> 赞同：187
> 
> 时间：2008-10-07T16:46:36.500
> 
> 标签：python, syntax, scripting, exit

我有一个简单的 Python 脚本，如果满足条件，我想停止执行。

例如：

```
done = True
if done:
    # quit/stop/exit
else:
    # do other stuff 
```

本质上，我正在寻找与函数体中的'return'关键字等效的东西，它允许代码流退出函数而不执行剩余的代码。

* * *

## 回答 #1

> 赞同：313
> 
> 时间：2008-10-07T17:49:22.147

要退出您可以使用的脚本，

```
import sys
sys.exit() 
```

您还可以提供退出状态值，通常是整数。

```
import sys
sys.exit(0) 
```

以零退出，这通常被解释为成功。非零代码通常被视为错误。默认为以零退出。

```
import sys
sys.exit("aa! errors!") 
```

打印“aa！错误！” 并以状态码 1 退出。

os 模块中还有一个 _exit() 函数。sys.exit [()](http://docs.python.org/2/library/sys.html#sys.exit)函数引发 SystemExit 异常以退出程序，因此可以执行 try 语句和清理代码。os._exit() 版本不这样做。它只是结束程序而不进行任何清理或刷新输出缓冲区，因此通常不应使用它。

[Python 文档](http://docs.python.org/2/library/os.html#os._exit)表明 os._exit() 是结束通过调用 os.fork() 创建的子进程的正常方法，因此它在某些情况下确实有用。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-10-07T17:27:23.890

您可以将脚本的主体放入一个函数中，然后您可以从该函数返回。

```
def main():
  done = True
  if done:
    return
    # quit/stop/exit
  else:
    # do other stuff

if __name__ == "__main__":
  #Run as main program
  main() 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2008-10-07T16:49:25.527

```
import sys
sys.exit() 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2008-10-07T18:11:22.367

您可以使用：

```
import sys
sys.exit(...) 
```

或者：

```
raise SystemExit(...) 
```

可选参数可以是退出代码或错误消息。两种方法是相同的。我以前更喜欢 sys.exit，但我最近改用提升 SystemExit，因为它似乎在其余代码中更突出（由于**raise**关键字）。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2010-01-26T11:26:27.460

尝试

```
sys.exit("message") 
```

就像 perl

```
die("message") 
```

如果这是您正在寻找的。即使从导入的模块 / def /function 调用它也会终止脚本的执行

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-10-07T16:48:19.227

exit() 应该可以解决问题

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-10-07T16:48:22.860

exit() 应该这样做。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-10-07T16:49:15.683

如果整个程序应该停止使用 sys.exit() 否则只使用一个空返回。

# regex - 解释这个 mod_rewrite 规则

> ID：179405
> 
> 赞同：2
> 
> 时间：2008-10-07T16:53:18.687
> 
> 标签：regex, apache, mod-rewrite, codeigniter

谁能解释这个 mod_rewrite 规则在做什么？

我正在尝试评论该文件，但代码似乎与我认为它正在做的相反

```
# Enable rewriting of URLs
RewriteEngine on

# Allow specified file types to be accessed
# Thing to test = URL
# Condition = not starting with  
RewriteCond $1 !^(index\.php|images|css|js|robots\.txt)

# RewriteRule will only be performed if the preceeding RewriteCond is fulfilled
# Remove index.php from all URLs     
# Pattern = anything (0 or more of any character)
# Substitution = index.php + the rest of the URL    
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-07T17:22:02.280

浏览器向服务器发送请求（Apache，因为您使用的是 mod_rewrite）：

获取个人资料/编辑

Apache 接受此请求并在其配置文件中看到您已将其配置为通过 mod_rewrite 传递所有请求。因此，它将字符串“profile/edit”发送到 mod_rewrite。Mod_rewrite 然后将您指定的规则应用于它，然后将请求（以我在上一篇文章中解释的方式）转换为“index.php/profile/edit”。mod_rewrite 完成后，Apache 继续处理请求，并看到“哦，这家伙正在请求文件 index.php”。所以它调用 php 解释器，然后解析并执行 index.php - 并获取 '/profile/edit' 作为参数。php 代码（在您的情况下为 CI）解析这些参数并知道如何在您的应用程序中调用正确的模块。

所以基本上，这是一种始终调用 index.php 的方法，即使 url 没有指定 index.php。这样，index.php 作为前端控制器工作：它将所有请求路由到应用程序中的正确位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-07T16:57:40.020

```
^ = begin of line
( = begin group
.* = any character, any number of times
) = end group 
```

第二部分中的 $1 被第一部分中的组替换。

这是 Symfony 规则吗？思路是将整个查询字符串作为参数传递给 index.php（前端控制器），以便前端控制器对其进行解析和路由。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-07T16:56:08.680

如果 URL 不是以 index.php 或 images 或 css 或 js 或 robots.txt 开头，则以字符串“/index.php/”为前缀。

由于 index.php 可能是一个可执行的 php 应用程序，因此 index.php 可以从其 cgi 环境中读取 URL 的其余部分。（它存储在 ${PATH_INFO} 中）

# java - Java2D：将 Graphics 转换为 Graphics2D 总是安全的吗

> ID：179415
> 
> 赞同：38
> 
> 时间：2008-10-07T16:56:21.723
> 
> 标签：java, java-2d

假设我们总是使用 Sun JVM（比如 1.5+），将 Graphics 引用转换为 Graphics2D 总是安全的吗？

我还没有看到它导致任何问题，据我了解，Graphics 类是遗留代码，但 Java 设计人员不想更改 Swing 和 AWT 类的接口以保持向后兼容性。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-10-07T17:00:08.423

根据[这里](https://community.oracle.com/thread/1350311?db=5)的讨论，从**to 转换****总是安全的`Graphics``Graphics2D`**。但是，我无法快速找到 Sun 的官方声明。

> 从 Graphics 转换为 Graphics2D 有效的原因是 Sun 已经说过，Java 1.2 或更高版本的 API 返回的所有 Graphics 对象都将是 Graphics2D 的子类。

[这里](http://www.unidata.ucar.edu/staff/caron/java/JavaOne2003.html)的另一个提示具有相同的结论。

> 图形对象总是可以转换 Graphics2D g2d = (Graphics2D)g;

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-10-07T20:23:48.840

在 Chet Haase 和 Romain Guy 所著的[Filthy Rich Client](http://filthyrichclients.org)一书中，他们说 Swing 几乎总是使用`Graphics2D`对象。打印和 Swing 的`DebugGraphics`对象除外。因此，只要这些情况都不适用于您的代码，就可以安全地转换为`Graphics2D`.
两位作者都在 Sun 工作，所以我假设他们知道他们在说什么。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-09-01T20:25:47.693

[2D 图形轨迹](http://java.sun.com/docs/books/tutorial/2d/overview/rendering.html)说：

> 要在应用程序中使用 Java 2D API 功能，请将传入组件的呈现方法的 Graphics 对象转换为 Graphics2D 对象。例如：

```
public void paint (Graphics g) {
    Graphics2D g2 = (Graphics2D) g;
    ...
} 
```

这是我能找到的最“官方”的来源。直接来自 Sun 的 Java 教程，我想说这是官方认可的做法。不过，如果 JavaDocs 明确说明了这一点，我不会完全介意......

# c# - 如何在文本框中添加红线（如 Word 中的拼写错误）？

> ID：179423
> 
> 赞同：6
> 
> 时间：2008-10-07T16:58:06.943
> 
> 标签：c#, .net, .net-2.0

我们如何在一个错误的拼写单词下产生红线的效果，如下图：

[替代文字 http://img505.imageshack.us/img505/7253/options285x395rg9.th.png](http://img505.imageshack.us/img505/7253/options285x395rg9.th.png)

**更新**

我不想使用谷歌或任何拼写程序。我想知道如何创建红线的效果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-07T17:12:48.863

您可以使用[RichTextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.aspx) 控件执行此操作，该控件将允许您在文本的任何部分设置下划线样式和下划线颜色。

这是一个完全按照您想做的事情的[例子。](http://geekswithblogs.net/pvidler/archive/2003/10/15/188.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-07T17:05:53.793

使用谷歌的拼写检查器

[http://www.asp101.com/articles/jeremy/googlespell/default.asp](http://www.asp101.com/articles/jeremy/googlespell/default.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-27T17:09:37.267

[这个页面](http://www.codedblog.com/2007/09/17/owner-drawing-a-windowsforms-textbox/)展示了如何通过所有者绘制一个 TextBox 来绘制波浪形的红线。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-04-05T08:29:01.863

您可以使用富编辑控件的属性和方法来绘制波浪线。欲了解更多信息，请访问此网站： http: [//geekswithblogs.net/pvidler/archive/2003/10/15/188.aspx](http://geekswithblogs.net/pvidler/archive/2003/10/15/188.aspx)

# c# - 使用 HttpWebRequest 发布时出现 401（是的，我使用了凭据）

> ID：179425
> 
> 赞同：4
> 
> 时间：2008-10-07T16:59:14.883
> 
> 标签：c#, http, compact-framework, httpwebrequest, credentials

我正在使用 HttpWebRequest 来下拉 XML，并将数据 POST 回“WebService”并在 POST 上获得 401。

创建请求时，我添加了凭据，现在尝试了凭据缓存并将 PreAutenticate 设置为 True，仍然得到 401！:(

观察路由器上的 HTTP 流量，我设置了 get 发出未经身份验证的 GET 请求。它到达 401，然后发出经过身份验证的 GET 并被允许通过。当我观看 POST 时，我看到它达到了 401 ......而且它甚至没有**尝试**经过身份验证的 POST。

这仅出现在手机上（WinMobile 6.1 上的紧凑框架 3.5 和 2.0）。相同的 .exe 可以在任何台式机上完美运行。

我错过了什么？请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-18T21:15:24.307

尝试手动设置标题：

[http://devproj20.blogspot.com/2008/02/assigning-basic-authorization-http.html](http://devproj20.blogspot.com/2008/02/assigning-basic-authorization-http.html)

# java - 如何解决 Java Rounding Double 问题

> ID：179427
> 
> 赞同：85
> 
> 时间：2008-10-07T16:59:41.373
> 
> 标签：java, math, rounding

似乎减法正在触发某种问题，并且结果值是错误的。

```
double tempCommission = targetPremium.doubleValue()*rate.doubleValue()/100d; 
```

78.75 = 787.5 * 10.0/100d

```
double netToCompany = targetPremium.doubleValue() - tempCommission; 
```

708.75 = 787.5 - 78.75

```
double dCommission = request.getPremium().doubleValue() - netToCompany; 
```

877.8499999999999 = 1586.6 - 708.75

得到的预期值为 877.85。

应该怎么做才能确保正确计算？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2008-10-07T17:09:27.547

要控制浮点运算的精度，您应该使用[java.math.BigDecimal](http://java.sun.com/javase/6/docs/api/java/math/BigDecimal.html)。阅读John Zukowski 对[BigDecimal 的需求，了解更多信息。](https://blogs.oracle.com/CoreJavaTechTips/entry/the_need_for_bigdecimal)

鉴于您的示例，最后一行将如下使用 BigDecimal。

```
import java.math.BigDecimal;

BigDecimal premium = BigDecimal.valueOf("1586.6");
BigDecimal netToCompany = BigDecimal.valueOf("708.75");
BigDecimal commission = premium.subtract(netToCompany);
System.out.println(commission + " = " + premium + " - " + netToCompany); 
```

这将导致以下输出。

```
877.85 = 1586.6 - 708.75 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2008-10-07T17:20:34.403

正如前面的答案所述，这是进行浮点运算的结果。

正如之前的海报所建议的那样，当您进行数字计算时，请使用`java.math.BigDecimal`.

但是，使用`BigDecimal`. 当您从 double 值转换为 a`BigDecimal`时，您可以选择使用新的`BigDecimal(double)`构造函数或`BigDecimal.valueOf(double)`静态工厂方法。使用静态工厂方法。

double 构造函数将整个精度转换`double`为 a`BigDecimal`而静态工厂有效地将其转换为 a `String`，然后将其转换为 a `BigDecimal`。

当您遇到那些细微的舍入错误时，这变得相关。一个数字可能显示为 0.585，但在内部它的值为 '0.58499999999999996447286321199499070644378662109375'。如果你使用`BigDecimal`构造函数，你会得到不等于 0.585 的数字，而静态方法会给你一个等于 0.585 的值。

```
双值 = 0.585；
System.out.println(new BigDecimal(value));
System.out.println(BigDecimal.valueOf(value));

```

在我的系统上给出

```
0.58499999999999996447286321199499070644378662109375
0.585

```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-10-07T17:14:13.120

另一个例子：

```
double d = 0;
for (int i = 1; i <= 10; i++) {
    d += 0.1;
}
System.out.println(d);    // prints 0.9999999999999999 not 1.0 
```

请改用 BigDecimal。

编辑：

另外，只是指出这不是“Java”舍入问题。其他语言表现出类似（尽管不一定一致）的行为。Java 至少保证了这方面的一致行为。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-04-30T20:42:03.287

我将上面的示例修改如下：

```
import java.math.BigDecimal;

BigDecimal premium = new BigDecimal("1586.6");
BigDecimal netToCompany = new BigDecimal("708.75");
BigDecimal commission = premium.subtract(netToCompany);
System.out.println(commission + " = " + premium + " - " + netToCompany); 
```

这样您就可以避免使用字符串开头的陷阱。另一种选择：

```
import java.math.BigDecimal;

BigDecimal premium = BigDecimal.valueOf(158660, 2);
BigDecimal netToCompany = BigDecimal.valueOf(70875, 2);
BigDecimal commission = premium.subtract(netToCompany);
System.out.println(commission + " = " + premium + " - " + netToCompany); 
```

我认为这些选项比使用双打更好。在 webapps 中，数字无论如何都是以字符串开头的。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-10-07T17:04:26.933

每当您使用双打进行计算时，都可能发生这种情况。此代码将为您提供 877.85：

双重答案 = Math.round(dCommission * 100000) / 100000.0;

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-10-07T17:09:40.307

保存美分而不是美元，输出时只需将其格式化为美元。这样您就可以使用不受精度问题影响的整数。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-10-07T17:02:42.350

请参阅[对此问题](https://stackoverflow.com/questions/178952/adding-floats-with-gmp-gives-correct-results-sort-of)的回复。本质上，您所看到的是使用浮点运算的自然结果。

如果您觉得这样做很舒服，您可以选择一些任意精度（输入的有效数字？）并将结果四舍五入。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-04-05T12:50:42.127

这是一个有趣的问题。

Timons 回复背后的想法是您指定一个 epsilon，它代表合法双精度可以达到的最小精度。如果您在应用程序中知道您永远不需要低于 0.00000001 的精度，那么他的建议足以获得更接近事实的更精确结果。在他们预先知道其最大精度的应用程序中很有用（例如金融货币精度等）

然而，试图四舍五入的根本问题是，当你除以一个因子来重新调整它时，你实际上引入了另一种精度问题的可能性。任何对双精度数的操作都可能引入频率不同的不精确问题。特别是如果您尝试以非常有效的数字四舍五入（因此您的操作数 < 0），例如，如果您使用 Timons 代码运行以下代码：

```
System.out.println(round((1515476.0) * 0.00001) / 0.00001); 
```

将导致`1499999.9999999998`这里的目标是以 500000 为单位进行舍入（即我们想要 1500000）

实际上，完全确定您已经消除了不精确性的唯一方法是通过 BigDecimal 来缩减。例如

```
System.out.println(BigDecimal.valueOf(1515476.0).setScale(-5, RoundingMode.HALF_UP).doubleValue()); 
```

使用 epsilon 策略和 BigDecimal 策略的组合将使您能够很好地控制您的精度。epsilon 的想法让您非常接近，然后 BigDecimal 将消除由之后重新缩放引起的任何不精确性。尽管使用 BigDecimal 会降低应用程序的预期性能。

有人向我指出，当您可以确定最终除法没有输入值可以重新引入错误时，某些用例并不总是需要使用 BigDecimal 重新调整它的最后一步。目前我不知道如何正确确定这一点，所以如果有人知道如何确定，我会很高兴听到它。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-06-19T14:45:33.057

到目前为止，在 Java 中最优雅和最有效的方法是：

```
double newNum = Math.floor(num * 100 + 0.5) / 100; 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-04-27T04:53:20.177

更好的是使用[JScience](http://jscience.org/api/overview-summary.html#TUTORIAL)，因为 BigDecimal 相当有限（例如，没有 sqrt 函数）

```
double dCommission = 1586.6 - 708.75;
System.out.println(dCommission);
> 877.8499999999999

Real dCommissionR = Real.valueOf(1586.6 - 708.75);
System.out.println(dCommissionR);
> 877.850000000000 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-10-27T07:45:24.767

```
double rounded = Math.rint(toround * 100) / 100; 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2011-11-30T13:35:35.117

尽管您不应该使用双精度数进行精确计算，但如果您无论如何都要对结果进行四舍五入，以下技巧对我有帮助。

```
public static int round(Double i) {
    return (int) Math.round(i + ((i > 0.0) ? 0.00000001 : -0.00000001));
} 
```

例子：

```
 Double foo = 0.0;
    for (int i = 1; i <= 150; i++) {
        foo += 0.00010;
    }
    System.out.println(foo);
    System.out.println(Math.round(foo * 100.0) / 100.0);
    System.out.println(round(foo*100.0) / 100.0); 
```

哪个打印：

```
0.014999999999999965
0.01
0.02 
```

更多信息：[http ://en.wikipedia.org/wiki/Double_precision](http://en.wikipedia.org/wiki/Double_precision)

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2012-03-11T15:07:26.783

这很简单。

使用 %.2f 运算符进行输出。问题解决了！

例如：

```
int a = 877.8499999999999;
System.out.printf("Formatted Output is: %.2f", a); 
```

上述代码的打印输出为：877.85

%.2f 运算符定义只应使用两位小数。

# asp.net - 如何在 ASP.NET 中制作标签云？

> ID：179428
> 
> 赞同：6
> 
> 时间：2008-10-07T16:59:41.497
> 
> 标签：asp.net, css

我是第一次涉足网络编程，并且想要一种以[标签云](http://en.wikipedia.org/wiki/Tag_cloud)的形式显示某些数据的频率指示器的好方法。

例如，假设我有一些关于三种宠物的简单数据：狗、猫、猴子。

有**5 只狗**、**27 只猫**和**101 只猴子**。

鉴于这些数据，**制作标签云的最佳方法是什么，**以直观地表明我有太多的猴子，没有那么多的猫，而且我肯定需要多养几只狗？

**更新**：如果在 stackoverflow 上实际讨论并回答了该解决方案，那就太好了。外部链接有助于支持答案，但将链接作为答案并不一定是 stackoverflow 的意义所在。任何人都可以谷歌查找已链接的内容。希望 stackoverflow 将成为找到答案的地方。这只是一个帮助使 stackoverflow 更好的请求。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-07T17:10:28.463

我不相信这是您正在寻找的答案，但 CodeProject 提供了适用于 ASP.NET 的云控制：

[http://www.codeproject.com/KB/aspnet/cloud.aspx](http://www.codeproject.com/KB/aspnet/cloud.aspx)

它看起来相当容易使用。

--

**编辑：**我可能应该相信我的来源。上面的链接是在以下网页上找到的：

[http://www.technacular.com/2007/04/22/how-to-create-a-tag-cloud/](http://www.technacular.com/2007/04/22/how-to-create-a-tag-cloud/)

此页面包含一些与构建标签云相关的其他一般信息。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-07T17:16:13.787

您需要首先确定您的指标（即*您*要测量的内容，在这种情况下，每种类型的宠物数量），然后您如何将该指标映射到一组类。这些类等同于您附加到标签的样式。

一个非常简单的映射是 x[i] / sum(x) 给出 0 和 1 之间的比率。在范围 [0, 1] 上定义子范围，例如从 0..0.25、0.25..0.50 等 4 个范围上。找到子范围的索引 (0,1,2,3) 并为标签分配 CSS 类“tagX”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-07T17:21:16.960

有很多方法和技术...

[标签云的聚类算法](http://inside.webfactory.de/en/blog/tag-cloud-approaches.html)

[构建标签云的设计技巧](http://www.onlamp.com/pub/a/onlamp/2006/06/08/designing-tag-clouds.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T17:10:58.727

我希望这会有所帮助。

[http://aspnet.4guysfromrolla.com/articles/102506-1.aspx](http://aspnet.4guysfromrolla.com/articles/102506-1.aspx)

# java - 如何将 Eclipse 默认项目更改为 Java 项目

> ID：179439
> 
> 赞同：145
> 
> 时间：2008-10-07T17:03:22.363
> 
> 标签：java, eclipse

我从 SVN 签出一个项目，但没有指定项目类型，所以它作为“默认”项目签出。快速将其转换为“Java”项目的最简单方法是什么？

我正在使用 Eclipse 版本 3.3.2。

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2008-10-07T17:07:49.327

打开 .project 文件并添加 java 性质和构建器。

```
<projectDescription>
    <buildSpec>
        <buildCommand>
            <name>org.eclipse.jdt.core.javabuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
    </buildSpec>
    <natures>
        <nature>org.eclipse.jdt.core.javanature</nature>
    </natures>
</projectDescription> 
```

在 .classpath 中，引用 Java 库：

```
<classpath>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
</classpath> 
```

* * *

## 回答 #2

> 赞同：120
> 
> 时间：2010-07-28T14:53:22.493

除非您确切知道自己在做什么，否则在 Eclipse 中手动更改 XML 和/或设置是非常危险的。在另一种情况下，您最终可能会发现您的整个项目被搞砸了。非常推荐备份！

如何仅使用 Eclipse 来做到这一点？

1.  选择项目。
2.  通过 Project -> Properties 打开项目属性。
3.  转到“目标运行时”并添加正确的运行时。单击应用。
4.  转到“Project Facets”并选择由于步骤 4 而出现的 JAVA facet。单击 APPLY
5.  设置构建路径。
6.  如果是 Maven 项目，您可能要选择项目，单击 Maven -> 更新项目配置...

那是为我做的。并且 Eclipse 配置正确。希望它也对你有用。

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2012-11-29T16:03:01.977

在最新版本的 eclipse 中，修复略有不同......

1.  右键单击并选择项目属性
2.  选择项目方面
3.  如有必要，单击“转换为多面形式”
4.  选择“Java”方面
5.  点击确定

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2008-10-07T17:22:32.480

我删除了项目而不删除内容。然后，我从现有资源创建了一个新的 Java 项目。指向我的 SVN 结帐根文件夹。这对我有用。虽然，克里斯的方式会快得多。这对未来有好处。谢谢！

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-08-12T12:27:56.757

> 使用项目**项目方面**，我们可以配置项目的特征和要求。

要在 Eclipse 上查找项目方面：

*   步骤 1：右键单击项目并`properties`从菜单中选择。
*   第 2 步：选择`project facets`选项。点击`Convert to faceted form...` [![在此处输入图像描述](https://i.stack.imgur.com/q9bsH.png)](https://i.stack.imgur.com/q9bsH.png)

*   第 3 步：我们可以找到所有可用的方面，您可以选择并更改其设置。 [![在此处输入图像描述](https://i.stack.imgur.com/gBlxO.png)](https://i.stack.imgur.com/gBlxO.png)

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2009-11-15T16:28:06.953

Joe 的方法实际上是我发现的最有效的方法来进行这次对话。要详细说明它，您应该在 eclipse 的包资源管理器中右键单击该项目，然后选择删除它而不删除目录或其内容。接下来，您选择创建一个 Java 项目（文件 -> 新建 -> Java 项目）并在“新建 Java 项目”对话框的“内容”部分中，选择“从现有源创建项目”。

这种方法的优点是可以正确识别源文件夹。我发现乱搞 .project 文件会导致整个目录被视为源文件夹，这不是您想要的。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2018-11-13T16:58:33.197

在较新版本的 Eclipse（我使用的是 4.9.0）中，还有另一种可能更简单的方法。除了 Project Facets，现在还有 Project Natures。这里的过程很简单，打开 Project Natures 属性页面，然后单击 Add... 按钮。这将提出可能的性质，包括 Java Nature 和 Eclipse Faceted Project Properties。只需添加 Java Nature 并忽略各种警告消息即可。

[![项目性质](https://i.stack.imgur.com/ovpGZ.png)](https://i.stack.imgur.com/ovpGZ.png)

这种方法可能会更好，因为您不必先转换为分面形式。此外，添加 Facet 菜单中未提供 Java。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-12-06T19:21:20.397

您可以使用 Navigator 视图（Window -> Show View -> Navigator）直接从 Eclipse 中执行此操作。在 Navigator 视图中选择项目并将其打开以便您可以看到该文件`.project`。右键单击-> 打开。您将获得一个 XML 编辑器视图。编辑节点的内容`natures`并插入一个新的子`nature`节点`org.eclipse.jdt.core.javanature`作为内容。节省。

现在创建一个文件`.classpath`，它将在 XML 编辑器中打开。添加一个名为的节点`classpath`，添加一个以内容命名的子`classpathentry`节点和另一个以`kind`内容命名的子节点。节省-`con``path``org.eclipse.jdt.launching.JRE_CONTAINER`

容易得多：从现有 Java 项目**复制**文件`.project`，然后将节点**编辑**为该项目的名称。也许您必须刷新项目（F5）。`.classpath`**`result name`**

 **您将获得与 Chris Marasti-Georg 解决方案相同的结果。

## 编辑

![在此处输入图像描述](https://i.stack.imgur.com/ycbnM.png)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-07-06T14:46:39.673

另一种可能的方法是从 Eclipse 中删除项目（但不要从磁盘中删除项目内容！），然后使用*New Java Project*向导就地创建项目。该向导将检测 Java 代码并自动设置构建路径。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-06-03T12:26:37.850

1.  右键单击项目
2.  配置 -> '转换为分面形式'
3.  您将看到一个弹出窗口，在“Project Facet”列中选择“Java”。
4.  按应用和确定。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-09-20T09:39:52.340

根据所讨论的 Eclipse，可能会发现所需的 WTP 包具有不同的名称。例如，在 Eclipse Luna 中，我发现使用“工具”搜索并选择提到 Java EE 开发工具最容易。这增加了项目方面的功能。用“WTP”搜索并没有多大帮助。

# perl - Perl CGI 脚本默认使用什么内容编码？

> ID：179441
> 
> 赞同：3
> 
> 时间：2008-10-07T17:04:25.230
> 
> 标签：perl, iso-8859-1, content-encoding

我正在修改一个用 Perl 编写的成熟 CGI 应用程序，并且出现了内容编码的问题。浏览器报告内容是 iso-8859-1 编码，并且应用程序将 iso-8859-1 声明为 HTTP 标头中的字符集，但似乎从未*真正进行*编码。[perldoc 教程（ Encode](http://perldoc.perl.org/Encode.html)、[Encoding](http://perldoc.perl.org/encoding.html)、[Open](http://perldoc.perl.org/open.html) ）中描述的各种编码技术都没有在代码中使用，所以我对文档的实际编码方式有点困惑。

如前所述，该应用程序非常成熟，并且可能早于许多当前的编码方法。有谁知道我应该寻找的任何遗留或弃用的技术？当开发人员没有提供方向时，Perl 假设/默认使用什么编码？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-07T17:21:28.940

默认情况下，Perl 将字符串作为字节序列处理，因此如果您从文件中读取并将其打印到 STDOUT，它将产生相同的字节序列。如果您的模板是 Latin-1，那么您的输出也将是 Latin-1。

如果您在文本字符串上下文中使用字符串（例如 with`uc`等`lc`），perl 假定为 Latin-1 语义，除非该字符串之前已被解码。

[更多关于 Perl、字符集和编码](http://perlgeek.de/en/article/encodings-and-unicode)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-07T17:08:47.657

Perl 不会假设任何东西，但浏览器假设编码通常基于猜测。如果不使用任何编码技术，文档将直接输出，就像它们被写入一样。

您可以在 HTTP Content-Type 标头中指定字符集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-26T09:28:38.157

我首先要看的是服务器配置。如果您没有在程序中设置内容编码标头，您可能会得到服务器的猜测。

与服务器分开运行脚本以查看其实际输出。当服务器从 CGI 程序（不是 nph）获得输出时，服务器会在将其发送给客户端之前修复它认为缺少的任何内容的标头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T17:06:27.583

如果浏览器将内容报告为 iso-8859-1，也许您的 perl 脚本没有输出正确的标题来指定字符集？

# reference-library - 您使用哪个在线电子书参考图书馆？

> ID：179447
> 
> 赞同：19
> 
> 时间：2008-10-07T17:06:38.923
> 
> 标签：reference-library

在决定购买纸质版之前，我使用 Safari Books Online 作为参考图书馆并评估书籍，但它不包括任何 Apress 书籍。你有更好的选择吗？

编辑：Safari Books Online 现在包括 Apress 标题，这在我看来是网络上最完整的参考图书馆。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-10-07T17:09:51.383

凭借我的[ACM 会员资格](http://pd.acm.org/)，我可以访问 Safari 和 Books24x7（包括 Apress）。

选择从这些网站的总产品中减少（Safari 中的 600 个仅适用于专业会员，Books24x7 中的 500 个适用于学生和专业会员），但我发现 ACM 年度会员资格非常值得，尤其是当您考虑其他福利。

第一年会员有折扣：http: [//learnmore.acm.org/joinacm5.html](http://learnmore.acm.org/joinacm5.html)

我们当地的图书馆 ( [nutrias.org](http://nutrias.org) ) 也有免费的电子书，但我没有查看他们是否有技术书籍。此外，它们受 DRM (yuk) 的期限限制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-07T17:09:57.623

我使用纸质书籍并使用[亚马逊](http://www.amazon.com)作为参考

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-07T17:40:01.027

凯德，

不是您正在寻找的答案，但如果您为 Safari 付费，请检查您当地的图书馆系统，并确保您无法免费获得它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-08T01:14:12.433

在加利福尼亚州圣克拉拉县，我们可以从图书馆的网站访问图书馆的电子资源，包括 Safari。

# linux - 配置knotify以执行自定义命令

> ID：179448
> 
> 赞同：1
> 
> 时间：2008-10-07T17:06:55.290
> 
> 标签：linux, kde

在 KDE 上，有可能在某些事件发生时执行命令。例如，当 kmail 收到邮件或 akregator 获取新提要时，可以执行脚本。

我想以一种可以在我的脚本中检索邮件/提要主题的方式执行脚本。是否有可能指定要执行的程序：

```
myprogram <SUBJECT> ? 
```

可能将其指定为参数或环境变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T02:13:52.407

不，但您可以在脚本中使用`dcop`(KDE3) 或`qdbus`(KDE4) 来查询 KMail/Akregator 最新的新项目是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T04:36:57.050

我认为您要问的是“当 kmail 收到主题为 Foo 的邮件时，我可以使用knotify 执行命令吗？”

不，但您可以在 kmail 中创建一个过滤器来做同样的事情。在设置 > 配置过滤器下，您将能够创建一个新过滤器；在左下角有一个帮助按钮，它涵盖了所有高级功能，包括如何通过外部应用程序接收到的电子邮件。

如果这不是你要找的，你需要澄清你的问题。

# .net - 如何在 Excel VBA 中使用 .NET 对象？

> ID：179452
> 
> 赞同：8
> 
> 时间：2008-10-07T17:08:57.687
> 
> 标签：.net, excel, vba

VBA 代码可以实例化和使用 .NET 对象吗？我感兴趣的特定类是 System.IO.Compression.GZipStream。

**信息**GAC 是 .NET 全局程序集缓存

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-07T17:40:38.480

我认为安迪确定了这个答案，但我不确定关于 CLR 加载规则的方面是否完全正确。

包含充当 GZipStream 包装器的类的 .NET 程序集将像任何其他 COM 项目库和类一样向 COM 公开和注册。在这方面，VBA 将通过注册表找到 COM 公开的 .NET 程序集的位置。将程序集放在 GAC 中可能很聪明，这样它就不能移动（因为移动程序集会使注册表信息无效），但只要注册表指向正确的位置，就应该没问题。

关于这个主题的一个很好的初学者教程是[here](http://richnewman.wordpress.com/2007/04/15/a-beginner%E2%80%99s-guide-to-calling-a-net-library-from-excel/)

希望这可以帮助...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-07T17:18:47.183

VBA 可以使用任何暴露给 COM 的 .NET 对象。我不知道 GZipStream 是否存在，但我想您创建一个单独的 .NET 对象会更容易，该对象是您想要使用的 GZipStream 功能的包装器。然后您可以将您的对象公开给 COM，然后 VBA 应该使用它。

请注意，包含您的 COM 对象的程序集（以及它的类型库，我认为，尽管我对此并不肯定）需要与主可执行文件（winword.exe 或其他）位于同一目录中，或者位于广汽。这是由于 CLR 对程序集的加载规则。

# visual-studio-addins - CodeRush - 导出类型到文件丢失？

> ID：179459
> 
> 赞同：2
> 
> 时间：2008-10-07T17:10:11.833
> 
> 标签：visual-studio-addins, coderush

我目前正在评估 CodeRush，在阅读功能列表时我最喜欢的一件事是“将类型导出到新文件”或类似功能。现在 CodeRush 在我的 IDE 中运行，我找不到这个功能。是否需要插件或者我只是缺少一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-14T05:01:33.473

您是否可能在谈论“将类型移动到文件”重构？如果是这样，那就很容易了，我几乎每天都在定义新类时使用它。

选择一个类型的名称（可能是一个类） 点击你的重构键（通常是 Ctrl-`）或点击三点重构图标 选择将类型移动到文件

我建议观看一些 Mark Miller 的教程视频，以真正让您开始使用 CodeRush 和 Refactor。[培训视频位于](http://www.devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/Training.xml)此处。

# java - 无法实现的接口方法的正确行为

> ID：179460
> 
> 赞同：8
> 
> 时间：2008-10-07T17:10:17.513
> 
> 标签：java

如果我有一个需要实现接口的类，但该接口上的一个或多个方法在这个特定类的上下文中没有意义，我该怎么办？

例如，假设我正在实现一个适配器模式，我想通过包装一些不可变对象并将其数据公开为键/值对来创建一个实现[java.util.Map的包装类。](http://java.sun.com/javase/6/docs/api/java/util/Map.html)在这种情况下， put 和 putAll 方法没有意义，因为我无法修改底层对象。所以问题是这些方法应该做什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-10-07T17:11:10.163

任何无法根据接口语义实现的方法都应该抛出[UnsupportedOperationException](http://java.sun.com/javase/6/docs/api/java/lang/UnsupportedOperationException.html)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-10-07T17:11:49.663

这取决于您的业务案例。2个选项：

*   没做什么。
*   扔一个[`UnsupportedOperationException`](http://java.sun.com/javase/6/docs/api/java/lang/UnsupportedOperationException.html).

使用更有意义的。如果你什么都不做，你就没有遵守接口的约定。但是，抛出运行时异常可能会对调用代码造成严重破坏。因此，必须根据您将如何使用课程来做出决定。如果可能，另一种选择是使用更简单或不同的界面。

请注意，Java 库在[只读](http://java.sun.com/j2se/1.4.2/docs/api/java/util/Collections.html#unmodifiableList(java.util.List))集合的​​特定情况下会走异常路线。

* * *

下面注意到 UnsupportedOperationException 是 java 集合框架的一部分。如果您的情况不在集合范围内，并且语义困扰您，您可以推出自己的`NotImplementedException`，或者如果您已经在使用 commons-lang，您可以使用[theirs](http://commons.apache.org/lang/api/org/apache/commons/lang/NotImplementedException.html)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-07T17:40:58.153

Java 已经提供的只读集合在写操作期间抛出 UnsupportedOperationException 已经是一个不幸的设计黑客。集合类应该使用单独的只读和只写接口编写，它们都由完整的读写接口继承。然后你就知道你得到了什么。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-10-07T17:13:42.700

您的两个选择实际上只有：

1.  没做什么。
2.  抛出异常。

两者都有缺点。在第一种情况下，通过使用空方法，您可能会误导程序员认为您的数据发生了某些事情。第二种情况打破了接口固有的多态性的整个想法。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-07T17:30:21.433

请注意，UnsupportedOperationException 之所以可行，是因为 Java 集合框架的特定属性，即允许实现“偷懒”实现部分接口，因为它们是不可变的。

所以 put() 没问题（假设所有的 mutator 方法都做同样的事情），但是从 size() 方法抛出 UnsupportedOperationException 的 Map 只会被破坏。如果你试图实现一种不知道它有多大的地图，你可能会遇到麻烦（尽管有时你可以返回 Integer.MAX_VALUE）。

另请注意，UnsupportedOperationException 的类文档说它是 Java 集合框架的一部分。在集合框架之外，不期望抛出 UnsupportedOperationException 并且可能导致普通的客户端代码不起作用。当然，它是一个 RuntimeException，但仅仅因为你可以抛出它并不意味着你的方法总是会起作用。

相反，您可以重构接口（也许将其分成两部分），或者重新考虑为什么这个类声称是 Foo 而它显然不是，因为它不能做 Foos 被定义为能够做的事情做。

# mono - 在 C# 中执行然后删除 DLL

> ID：179466
> 
> 赞同：2
> 
> 时间：2008-10-07T17:12:07.680
> 
> 标签：mono, appdomain, self-updating

我正在创建一个自我更新的应用程序，其中大部分代码都在一个单独的 DLL 中。它是命令行，最终将在 Mono 上运行。我只是想让这段代码在命令行的 Windows 上的 C# 中工作。

如何创建 ac# 应用程序，以便在运行时删除支持的 dll？

```
AppDomain domain = AppDomain.CreateDomain("MyDomain");
ObjectHandle instance = domain.CreateInstance( "VersionUpdater.Core", "VersionUpdater.Core.VersionInfo");
object unwrap = instance.Unwrap();
Console.WriteLine(((ICommand)unwrap).Run());
AppDomain.Unload(domain);
Console.ReadLine(); 
```

在 ReadLine，VersionUpdater.Core.dll 仍被锁定，无法删除

ICommand 接口位于 VersionUpdater.Common.dll 中，命令行应用程序和 VersionUpdater.Core.dll 都引用了该接口

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-07T17:15:33.120

我曾经管理过类似事情的唯一方法是将 DLL 放在一个单独的 AppDomain 中，以尝试删除它。我卸载了另一个 AppDomain，然后从磁盘中删除了 DLL。

如果您正在寻找一种执行更新的方法，那么我会想到一个生成真正 AppDomain 的存根 exe。然后，当该存根 exe 检测到要应用更新时，它会退出另一个 AppDomain，然后执行更新魔法。

编辑：更新程序不能与它正在更新的东西共享 DLL，否则它将锁定这些 DLL，从而防止它们被删除。我怀疑这就是为什么您仍然会遇到异常的原因。更新程序必须是独立的，并且不依赖于其他 AppDomain 使用的任何内容，反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-07T17:28:07.710

Unwrap 会将对象类型的程序集加载到调用它的 appdomain 中。解决此问题的一种方法是在您的“基础”程序集中创建一个调用 command.run 的类型，然后将其加载到您的新 appdomain 中。这样，您就不必从不同程序集中的类型调用对象的 unwrap，并且可以删除磁盘上的程序集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-08T03:42:30.373

当我构建一个自我更新的应用程序时，我使用了存根的想法，但存根就是应用程序本身。

该应用程序将启动，寻找更新。如果它找到更新，它会将新应用程序的副本下载到临时存储，然后使用显示“您正在更新”的命令行选项启动它 (System.Diagnostics.Process.Start())。然后原始的exe退出。

生成的 exe 启动，看到它是一个更新，并将自身复制到原始应用程序目录。然后它从该新位置启动应用程序。然后生成的 exe 结束。

从原始应用程序安装位置新启动的 exe 启动 - 看到临时文件并将其删除。然后恢复正常执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-29T06:48:41.040

您始终可以`MOVEFILE_DELAY_UNTIL_REBOOT`在重新启动时使用删除。这很可能是做这类事情的最简单的方式，通过 hackey 我通常会看到类似的东西；加载新的 DLL 或注入 explorer.exe 甚至修补系统 dll 以加载到另一个进程等...

**[来自 MSDN](http://msdn.microsoft.com/en-us/library/aa365240(VS.85).aspx)**的 MoveFileEx**；**

 **> lpNewFileName [in, **optional** ] 本地计算机上文件或目录的新名称。
> 
> *移动*文件时，目标可以位于不同的文件系统或卷上。如果目标在另一个驱动器上，则必须 `MOVEFILE_COPY_ALLOWED`在 dwFlags 中设置标志。
> 
> 移动目录时，目标必须位于同一驱动器上。
> 
> 如果 dwFlags 指定 `MOVEFILE_DELAY_UNTIL_REBOOT`并且 lpNewFileName 为**NULL**，则*MoveFileEx* 注册 lpExistingFileName 文件以在系统重新启动时**删除。**如果 lpExistingFileName 引用一个目录，则系统仅在目录为空时才会在重新启动时删除该目录。

# c# - 切换选项卡时关注控件

> ID：179468
> 
> 赞同：4
> 
> 时间：2008-10-07T17:12:19.320
> 
> 标签：c#, .net

我想要做的是`TextBox`在选择该标签页时将焦点设置到该标签页上的特定控件（特别是 a ）。

我试图`Focus`在包含选项卡控件的 Selected 事件期间调用，但这不起作用。之后，我尝试在`VisibleChanged`控件本身的事件期间调用焦点（通过检查以使我不专注于不可见的控件），但这也不起作用。

搜索这个网站，我遇到了这个[问题](https://stackoverflow.com/questions/48680/winforms-c-set-focus-to-first-child-control-of-tab-page)，但这也不起作用。虽然在那之后，我确实注意到调用`Focus`控件的确实使它成为`ActiveControl`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-07T17:23:24.647

我这样做了，它似乎工作：

处理. `SelectedIndexChanged`_ `tabControl`检查是否`tabControl1.SelectedIndex`==我想要的那个并打电话`textBox.Focus();`

我正在使用 VS 2008，顺便说一句。

* * *

像这样的工作：

```
private void tabControl1_selectedIndexChanged(object sender, EventArgs e)
{
   if (tabControl1.SelectedIndex == 1)
   {
      textBox1.Focus();
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-07T17:48:32.427

尝试 TabPage.Enter 类似

```
        私人无效tabPage1_Enter（对象发送者，EventArgs e）
        {
            TabPage 页面 = (TabPage) 发件人；
            开关（page.TabIndex）
            {
                案例0：
                    textBox1.Text = "第 1 页";
                    if (!textBox1.Focus())
                        textBox1.Focus();

                    休息;
                情况1：
                    textBox2.Text = "第 2 页";

                    如果（！textBox2.Focus（））
                        textBox2.Focus();

                    休息;
                默认：
                    抛出新的 InvalidOperationException();
            }
        }

```

# silverlight-2.0 - 如何将 Silverlight 2.0 DataGrid 导出到 html？

> ID：179472
> 
> 赞同：1
> 
> 时间：2008-10-07T17:13:35.370
> 
> 标签：silverlight-2.0

我需要将 SL DataGrid 导出为 HTML，以便我的用户可以打印它。有人能把我引向正确的方向吗？

Upate：阅读 Rob 的回答后，我正在改变我的问题。而不是将 Silverlight Grid 转换为 HTML，我现在只想将其导出为 PDF。有没有人在 Silverlight 中使用过任何 3rd 方 PDF 生成器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-09T04:08:29.570

这可能有点牵强，但是如何将 Silverlight Xaml 导出到 XPS 并将 XPS 文档返回给用户（这是可打印的）。你可以下载一个[在此处下载免费的 XPS 查看器](http://www.microsoft.com/whdc/xps/viewxps.mspx)。我过去使用 WPF 和 XBAP 完成了此操作，因此我想您可以在服务器端执行此操作并让用户下载 XPS 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-07T17:38:30.543

HTML 对于打印来说是一个糟糕的选择，原因有很多，这些原因在这个站点上有很好的记录，所以我不会深入探讨它们。

我建议您导出为 PDF，而不是尝试使用 HTML 路线。对于导出为 PDF，有许多好的 .Net 工具[可用](https://stackoverflow.com/questions/177/how-do-i-programmatically-create-a-pdf-in-my-net-application)。其他选项包括将您的网格导出到电子表格程序，如[Excel](https://stackoverflow.com/questions/27288/how-do-i-save-a-datagrid-to-excel-in-vbnet)、[Spreadsheet Gear](http://www.spreadsheetgear.com/)或 OpenOffice Calc，它们将提供额外的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-13T03:11:51.807

如果您想在 Silverlight 中生成 PDF 或 XPS，您必须往返于服务器。有多种框架和工具可用于在 .NET 中生成 PDF。

但是，我不会放弃在 Silverlight 2 中生成 HTML 以进行打印的想法。我认为这是一个绝妙的想法，我不认为 Web 打印会损坏。带有 CSS 打印样式表的 HTML 非常有用。

我最近发表了一篇博客文章，描述了如何使用 ASP.NET AJAX 4.0 客户端模板在使用 Silverlight 2 的客户端上生成 HTML。编写一段 C# 代码将任何数据网格转换为 HTML 应该不难桌子。

但是，如果您知道您在数据网格中显示的对象类型，您可以简单地根据您的对象结构生成您自己的 HTML。

在 Silverlight 中生成 HTML 有多种选择：

*   连接字符串
*   使用 LINQ to XML 构建 HTML 片段
*   使用[Jeff Wilcox HTML 控件库](http://www.jeff.wilcox.name/2008/10/05/html-controls-for-silverlight/)
*   使用 ASP.NET AJAX 4.0 客户端模板

您可以使用 HTML Bridge 将 HTML 传递回浏览器（请在 Google 上获取更多信息）。

您还应该[查看我的博客文章，全面了解 Silverlight 中的打印选项](http://jonas.follesoe.no/PrintingInSilverlight2UsingCSSAndASPNETAJAX4.aspx)。

# jvm - 学习资源——堆栈机器，尤其是JVM

> ID：179478
> 
> 赞同：4
> 
> 时间：2008-10-07T17:15:33.697
> 
> 标签：jvm, stack-machine

我很好奇是否有人有任何非常好的教程/文章/书籍来学习一般的堆栈机器，特别是 JVM。我知道这些：

[http://www.artima.com/insidejvm/applets/EternalMath.html](http://www.artima.com/insidejvm/applets/EternalMath.html)

[http://www.ibm.com/developerworks/ibm/library/it-haggar_bytecode/](http://www.ibm.com/developerworks/ibm/library/it-haggar_bytecode/)

[http://www.theserverside.com/tt/articles/article.tss?l=GuideJavaBytecode](http://www.theserverside.com/tt/articles/article.tss?l=GuideJavaBytecode)

显然 Bill Winners 和 Programming for the JVM 的书籍 Inside the JVM 很不错，尽管它们已经很旧了。

这些都在我的“toread”清单上，适合下雨的秋季周末。

有人有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-09T10:36:32.703

早在 1999 年，我通过阅读 Tim Lindholm 的“Java 虚拟机规范”了解了 JVM 的功能。

我真的不知道在哪里可以找到有关更现代技术的资源，例如 Hotspot VM 可以执行的 JIT 编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-16T13:37:04.617

在“计算机程序的结构和解释”的最后一章中，我找到了很多我现在正在寻找的东西。不过，您将不得不通读整本书，因为它们不断建立在早期的示例和概念之上。

# c# - 使用 C# 在远程 Windows 服务器上创建本地用户

> ID：179480
> 
> 赞同：5
> 
> 时间：2008-10-07T17:16:55.940
> 
> 标签：c#, .net, windows

如果我有管理员访问权限，我需要一种方法来从 ASP.NET 客户端管理（创建、修改、删除）远程计算机中的本地帐户。

我不知道如何处理这个问题。WMI 是一种可能性（System.Management 命名空间）吗？任何指针？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-07T22:18:35.097

试试这个：

```
DirectoryEntry directoryEntry = new DirectoryEntry("WinNT://ComputerName" & ",computer", "AdminUN", "AdminPW");
DirectoryEntry user = directoryEntry.Children.Add("username", "user");
user.Invoke("SetPassword", new object[] { "password"});
ser.CommitChanges(); 
```

如果确实需要使用 Active Directory 路由，可以将 directoryEntry 路径字符串更改为如下所示：LDAP://CN=ComputerName,DC=MySample,DC=com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-07T17:40:35.440

我使用 System.DirectoryServices 从 ActiveDirectory (LDAP) 中的用户那里获取数据。我不知道这是否是你正在寻找的那种东西。
希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-07T17:41:14.347

您应该可以通过 DirectoryEntry 执行此操作。

# .net - 如何在数据绑定场景（即 BindingList）中验证自定义对象的属性？

> ID：179485
> 
> 赞同：3
> 
> 时间：2008-10-07T17:19:56.260
> 
> 标签：.net, winforms, validation, data-binding

当您设置一个属性的值时，您可以在更新内部值之前或之后进行验证。

如果之前进行验证，如果新值无效，您可能会引发异常。然后该对象始终处于有效状态。

如果之后进行验证，则需要撤消（即通过***IEditableObject***），因此用户可以随时取消编辑。我们还可以选择在这里抛出异常或通过***IDataErrorInfo***暴露错误。

如果在设置之前进行验证，我认为***IDataErrorInfo***没有意义。有些人可能会争辩说在验证场景中不保证抛出异常。

在自定义对象包含在 BindingList 中并设置为网格的数据源的情况下，验证后的效果很好。

在网格之前验证也可以，但是您必须抛出异常才能向数据网格发出属性值设置失败的信号（无需大量额外代码）

***我对实现IEditableObject***和***IDataErrorInfo***、***INotifyPropertyChanged***等的域对象也不满意。它使域对象充满了额外的担忧。但是，如果您想很好地使用数据绑定，这似乎是不可避免的。我可以创建一个包装器，也许是 DTO，但我并不太热衷于编写大部分虚拟的额外代码来支持这些数据绑定位。

您如何验证对象（最好在数据绑定和 UI 的上下文中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-06T13:14:48.397

请参阅[我](https://stackoverflow.com/questions/88541/business-objects-validation-and-exceptions/133045#133045)对[Business Objects, Validation And Exceptions](https://stackoverflow.com/questions/88541/business-objects-validation-and-exceptions)的回答：我认为[Paul Stovell](http://www.paulstovell.com/)关于验证的想法（总结[在本文中](http://www.codeproject.com/KB/cs/DelegateBusinessObjects.aspx)）非常强大。

通过[`IDataErrorInfo`](http://msdn.microsoft.com/en-us/library/system.componentmodel.idataerrorinfo.aspx)在您的域实体中实现（可能还有[`IEditableObject`](http://msdn.microsoft.com/en-us/library/system.componentmodel.ieditableobject.aspx)和[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)），您使他们能够在许多 .NET 表示技术（Windows 窗体、WPF、ASP .NET...）上获得数据绑定，而无需太多代码。或者您可以在脚本或批处理中使用它们（即非 UI 流程），并且仍然有可能根据业务规则验证它们：平滑（查询当前实体状态）或硬方式（如果无效则抛出异常保存）。

主要的是，使用这种模式，您的域实体负责自己的验证（这很好，而且在我看来肯定不像*额外的问题*）。如果它们处于无效状态，它们会通过在保存时抛出有意义的异常来强制执行它。如果您愿意先询问，它们可以通过让您知道它们是否有效来与您的代码（UI 或非 UI）很好​​地配合使用。

我什至在我的软件工厂项目（仍处于早期阶段）中将这些原则应用于域模型之外：[Salamanca](http://salamanca.codeplex.com/)。

# .net - .NET 属性列表

> ID：179488
> 
> 赞同：11
> 
> 时间：2008-10-07T17:20:44.747
> 
> 标签：.net, attributes

在对象中使用的通用属性上是否有一个列表`Serializable`？

谢谢

编辑~我问的原因是我在 ntiers ORMS 中遇到了一个 StoredProcedure 属性。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-10-07T17:22:30.187

是的，看看 msdn 是否涵盖了请看[这里](http://msdn.microsoft.com/en-us/library/system.attribute.aspx#inheritanceContinued)。

编辑：这个链接只回答很烂。这是名称中包含 Attribute 的所有可加载类型 (gac) 的有效提取器。

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Reflection;

namespace ConsoleApp1
{
    class Program
    {
        static void Main(string[] args)
        {
            var process = new Process();
            //your path may vary
            process.StartInfo.FileName = @"C:\Program Files (x86)\Microsoft SDKs\Windows\v10.0A\bin\NETFX 4.6.1 Tools\gacutil.exe";
            process.StartInfo.RedirectStandardOutput = true;
            process.StartInfo.UseShellExecute = false;
            process.StartInfo.Arguments = "/l";
            process.Start();

            var consoleOutput = process.StandardOutput;

            var assemblyList = new List<string>();
            var startAdding = false;
            while (consoleOutput.EndOfStream == false)
            {
                var line = consoleOutput.ReadLine();
                if (line.IndexOf("The Global Assembly Cache contains the following assemblies", StringComparison.OrdinalIgnoreCase) >= 0)
                {
                    startAdding = true;
                    continue;
                }

                if (startAdding == false)
                {
                    continue;
                }

                //add any other filter conditions (framework version, etc)
                if (line.IndexOf("System.", StringComparison.OrdinalIgnoreCase) < 0)
                {
                    continue;
                }

                assemblyList.Add(line.Trim());
            }

            var collectedRecords = new List<string>();
            var failedToLoad = new List<string>();

            Console.WriteLine($"Found {assemblyList.Count} assemblies");
            var currentItem = 1;

            foreach (var gacAssemblyInfo in assemblyList)
            {
                Console.SetCursorPosition(0, 2);
                Console.WriteLine($"On {currentItem} of {assemblyList.Count} ");
                Console.SetCursorPosition(0, 3);
                Console.WriteLine($"Loading {gacAssemblyInfo}");
                currentItem++;

                try
                {
                    var asm = Assembly.Load(gacAssemblyInfo);

                    foreach (Type t in asm.GetTypes())
                    {
                        if (t.Name.EndsWith("Attribute", StringComparison.OrdinalIgnoreCase))
                        {
                            collectedRecords.Add($"{t.FullName} - {t.Assembly.FullName}");
                        }
                    }

                }
                catch (Exception ex)
                {
                    failedToLoad.Add($"FAILED to load {gacAssemblyInfo} - {ex}");
                    Console.SetCursorPosition(1, 9);
                    Console.WriteLine($"Failure to load count: {failedToLoad.Count}");
                    Console.SetCursorPosition(4, 10);
                    Console.WriteLine($"Last Fail: {gacAssemblyInfo}");
                }
            }

            var fileBase = System.IO.Path.GetRandomFileName();
            var goodFile = $"{fileBase}_good.txt";
            var failFile = $"{fileBase}_failedToLoad.txt";
            System.IO.File.WriteAllLines(goodFile, collectedRecords);
            System.IO.File.WriteAllLines(failFile, failedToLoad);
            Console.SetCursorPosition(0, 15);
            Console.WriteLine($"Matching types: {goodFile}");
            Console.WriteLine($"Failures: {failFile}");
            Console.WriteLine("Press ENTER to exit");
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-07T17:40:58.463

此外，您可以创建自己的属性。如果您正在搜索其他人的代码，当他们创建自己的代码时很容易感到困惑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-07T17:25:02.647

我不知道属性的完整列表，但是在 MSDN 中搜索属性可以产生有趣的结果。我倾向于浏览命名空间以查找有趣的属性类型，然后查找它们以了解我可能将它们用于什么。我知道，这不是最有效的方法。

[System.Attribute](http://msdn.microsoft.com/en-us/library/system.attribute.aspx "系统属性")的 MSDN 条目底部有一个列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-07T17:40:16.983

您可能找不到您要查找的内容，因为您可能正在查看自定义属性。

[http://www.code-magazine.com/Article.aspx?quickid=0307041](http://www.code-magazine.com/Article.aspx?quickid=0307041)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-07T17:51:15.887

您可以使用 Reflector 浏览`mscorlib`程序集，然后在 下**`System.Attribute`**展开*Derived Types*节点。它将显示当前在 Reflector 中加载的所有程序集的所有属性。

# f# - F# 更改为 OCaml

> ID：179492
> 
> 赞同：130
> 
> 时间：2008-10-07T17:21:40.687
> 
> 标签：f#, ocaml, functor

F# 是从 OCaml 派生的，但缺少或增加了哪些主要项目？具体来说，我很好奇可用于学习 OCaml 的资源是否对想要学习 F# 的人也有用。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2010-03-21T00:10:04.307

这个问题已经回答了一段时间了，但我很惊讶大多数答案都说 F# 中缺少 OCaml 功能——如果你想将现有的 OCaml 程序移植到 F#（这可能是大多数参考文章的动机）。但是，有许多功能使 F# 成为一种不同的语言（不仅仅是用于 .NET 的 OCaml 的受限版本！）以下是 F# 中添加的一些内容：

*   **允许您对处理数值计算的代码进行类型检查**的度量单位****
***   **使用引号的元编程**（这使得在 F# 中使用 LINQ 成为可能，对于 WebSharper 平台等有前途的项目也是必不可少的）*   **为功能数据类型创建抽象的活动模式**（对于更复杂的模式匹配应用程序通常非常有用的特性）*   **计算表达式，这是****异步工作流**背后的语言特性（异步 I/O/Web 服务/GUI 编程的库）*   **.NET 兼容的对象系统**，可以与 .NET 平台完全互操作（OCaml 也支持对象，但不同 - 这两个系统当然都有一些好处）。*   **重载运算符**- 据我所知，OCaml 没有重载运算符 - 在 F# 中，您可以`+`用于所有数字类型以及支持它的类型。**

 **而且，老实说，我认为 Visual Studio IDE 也值得一提。这不是语言的一部分，但它确实改善了用户体验（Visual Studio 中的 IntelliSense 支持非常好！）

如果你看一下这个列表，有很多东西很大程度上促成了 F# 的流行，所以它不仅仅是“没有函子的 OCaml”。F# 绝对基于 OCaml（并从其他语言如 Haskell 中汲取灵感）并与他们共享许多方面，但也有很多其他的东西。我猜如果没有异步工作流、.NET 风格的 OO 和元编程之类的东西，Microsoft 开发部门永远不会在 Visual Studio 2010 中包含 F#。

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2008-10-07T19:27:14.523

主要区别在于 F# 不支持：

*   函子
*   OCaml 风格的对象
*   多态变体
*   camplp4/5 预处理器或扩展点 (ppx)

此外，F# 对标记参数和可选参数有不同的语法。

理论上，不使用这些功能的 OCaml 程序可以用 F# 编译。学习 OCaml 是对 F# 的一个非常合理的介绍（反之亦然，我想）。

完整的差异列表在[这里](http://web.archive.org/web/20080410181630/http://research.microsoft.com/fsharp/manual/ml-compat.aspx)（注意：archive.org 替换死链接）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-05-25T17:30:38.777

F# 和 OCaml 在分类学上属于 ML 语言家族，其中也包括许多其他奇怪的动物。F# 比 OCaml 更新，它还没有函子 [模块的函数 -> 模块] 或行类型 [对象类和多态变体]。在它们之间，这两个简化可能使在 .Net 平台上开发的人的学习曲线更容易。遗憾的是，这两种语言功能在 OCaml 中非常强大，因此阅读 OCaml 文献以深入了解如何为 F# 编码可能会导致对后者过早地感到沮丧，因为后者可能是两者都可用的 C# 的绝佳替代品。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-10-07T17:28:46.570

F# 直接支持 OCaml 语法。它可能不是 100% 兼容，但我认为它非常接近。

[http://plus.kaist.ac.kr/~shoh/fsharp/html/index.html](http://plus.kaist.ac.kr/~shoh/fsharp/html/index.html)

这是差异列表（不确定它是最新的）

[http://plus.kaist.ac.kr/~shoh/fsharp/html/fsharp-vs-ocaml.html](http://plus.kaist.ac.kr/~shoh/fsharp/html/fsharp-vs-ocaml.html)

# c++ - 不是说“C/C++”错了吗？

> ID：179500
> 
> 赞同：23
> 
> 时间：2008-10-07T17:23:43.383
> 
> 标签：c++, c

我已经看到很多关于不正确地使用“C/C++”表达的问题。在我看来原因是：

*   新手 C 和 C++ 程序员可能不了解这两种语言之间的区别。
*   人们并不真正关心它，因为他们想要一个通用、快速和“肮脏”的答案

虽然 C/C++ 有时可能被解释为“C 或 C++”，但我认为这是一个很大的错误。C 和 C++ 提供了不同的编程方法，即使 C 代码可以很容易地实现到 C++ 程序中，我认为用一个表达式 ( C/C++ ) 引用两种不同的语言是错误的。

确实，无论如何，有些问题可以被视为 C 或 C++ 问题。你怎么看待这件事？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-10-07T17:25:53.427

C/C++ 是 C++ 早期的一个保留者，它们比现在更加相似。起初这并没有真正的错误，但越来越多 - 一直如此。

但是，基本结构非常相似，大多数简单的问题仍然可以在两者之间起作用。关于这个主题有一篇完整的维基百科文章：[http ://en.wikipedia.org/wiki/Compatibility_of_C_and_C%2B%2B](http://en.wikipedia.org/wiki/Compatibility_of_C_and_C%2B%2B)

由此产生的最大谬误是，因为有人精通 C，所以他们同样擅长 C++。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-10-07T17:48:09.557

请记住，C++ 的原始实现只是作为一个预编译器，为“真正的”编译器输出 C 代码。所有 C++ 概念都可以用纯 C 手动编码（但不是编译器强制执行的）。

“C/C++”在指代编译器和其他语言/编程工具时也是有效的。几乎每个可用的 C++ 编译器都可以编译 - 因此被称为“C/C++”编译器。大多数都可以选择是否根据扩展名处理 .C 和 .CPP 文件，或者将它们全部编译为 C 或全部编译为 C++。

另请注意，从最初的 C/C++ 编译器开始，就可以在单个编译器项目中混合 C 和 C++ 源代码。这可能是模糊语言之间界限的关键因素。

许多为 C++ 创建的语言/编程工具也适用于 C，因为语言语法几乎相同。许多语言工具都有单独的 Java、C#、Python 版本——但由于高度相似，它们只有一个适用于 C 和 C++ 的“C/C++”版本。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-10-07T17:36:03.343

我们公司注意到以下奇怪的事实：如果求职者在简历中写了“高级 C/C++ 知识”，通常很有可能他真的什么都不知道；）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-10-07T17:26:14.050

这两种语言是不同的，但它们有很多共同点。很多 C 代码在 C++ 编译器上编译得很好。在早期的学生级别，很多 C++ 代码仍然可以在 C 编译器上运行。

请注意，在某些情况下，两个编译器之间的代码*含义*可能会以非常微妙的方式有所不同，但我认为在某些情况下即使在不同品牌的 C++ 编译器之间也是如此，如果你愚蠢到依赖未定义或有争议/非-符合行为。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-10-07T17:36:46.447

是和不是。

C 和 C++ 有很多共同点（事实上，大部分 C 是 C++ 的子集）。

但是 C 更面向“强制编程”，而 C++ 除了 C 范式之外，还有更多易于访问的范式，如函数式编程、泛型编程、面向对象编程、元编程。

因此，根据上下文，我看到“C/C++”项表示为**“C 和 C++ 的交集”或“熟悉 C 编程以及 C++ 编程” 。**

现在，这两种语言确实不同，对于类似的问题有不同的解决方案。AC 开发人员会发现很难“解析/理解” C++ 源代码，而 C++ 开发人员不容易识别 C 源代码中使用的模式。

因此，如果您想在“C/C++”表达式中查看 C 与 C++ 的距离，一个很好的比较是 GTK+ C 教程，在 C++ (GTKmm) 中也是如此：

**C：GTK+ Hello World： http:** [//library.gnome.org/devel/gtk-tutorial/stable/c39.html#SEC-HELLOWORLD](http://library.gnome.org/devel/gtk-tutorial/stable/c39.html#SEC-HELLOWORLD)

**C++：GTKmm Hello World：** [http ://www.gtkmm.org/docs/gtkmm-2.4/docs/tutorial/html/sec-helloworld.html](http://www.gtkmm.org/docs/gtkmm-2.4/docs/tutorial/html/sec-helloworld.html)

阅读这些资源非常有启发性，因为它们是，就我解析它们而言，产生完全相同的东西，“相同”的方式（就语言而言）。

因此，我想 C/C++ 的“表达”可以通过比较这些来源来表达。

:-)

所有这一切的结论是，如果在以下情况下使用它是可以的：

*   描述 C 和 C++ 的交集
*   描述对 C 编程和 C++ 编程的熟悉程度
*   描述兼容代码

但它不适用于：

*   当不需要兼容性时（并且在大多数 C++ 项目中，由于非常有限，因此不希望使用 C++（或 C++）的糖果兼容性）。
*   断言 C 和 C++ 可以/应该以相同的方式编码（如上面的 GTK+/GTKmm 示例未显示）

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-10-07T17:50:37.853

我认为这更多的是第二个答案——他们想要一些可以轻松集成到他们项目中的东西。

虽然 C 答案可能不是惯用的 C++（反之亦然），但我认为这是 C++ 的一大卖点——您基本上可以将 C 嵌入其中。如果一个惯用的答案很重要，他们总是可以将 C/C++/C++ 与 STL/C++ 与 boost/etc 一起指定。

lisp 中的答案将非常不可用。但是 C 或 C++ 中的答案将是直接可用的。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-10-07T21:29:09.080

是的，C/C++ 非常没用。这似乎是 C++ 新手最常使用的术语。我们纯 C 的顽固分子只会说“C”，而有经验的 C++ 人知道它与 C 有多大的不同，所以他们正确地说“C++”。

即使 C （几乎）是 C++ 的一个子集，这对它们的实际使用并没有任何影响。在现代 C++ 代码中，几乎每一个有趣的 C 特性都令人不悦：C 指针（使用迭代器/智能指针/引用）、宏（使用模板和内联函数）、stdio（使用 iostream）等等。

因此，正如 Alex Jenter 所说，任何熟悉这两种语言的人都不太可能会说 C/C++。说你知道如何用“C/C++”编程就像说你知道如何用“Perl/PHP”编程......当然它们有一些显着的相似之处，但它们在实际使用方式上的差异是巨大的.

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-10-07T22:37:34.153

我同意。我阅读了 C 标签的 RSS 提要，我看到大量的 C++ 问题与 C 没有任何关系。

我也经常看到这种交流：

提问者：你如何在 C 中做到这一点？
答：使用 C++ 的 X 库。
提问者：好的，有人用 C 语言回答我的问题怎么样？

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2010-02-11T02:40:53.390

我自己使用这个术语，因为这是我的风格，我不使用 boost、stl 或其他一些东西，甚至不使用标准 C++ 库，如“cout”和“cin”，我编写 C 但使用类，模板和其他（非库）功能对我有利。

我可以说我不是 C 大师，也不是 C++ 大师，但我非常擅长我从 10 年前开始使用的那种特殊风格。（我还在进步！）

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-10-07T17:39:32.430

C/C++ 通常意味着一种编程风格，就像 C 和类，或 C 和 STL :-) 从技术上讲，它是 C++，但它的优点很少。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-10-07T17:29:28.177

我的印象是所有 c 代码都是有效的 c++ 代码。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-10-07T19:15:13.610

> 说“C/C++”不是错的吗？

不，不是。例如，[成立于 25 多年前的 Watcom International Corporation 将他们的 C 和 C++ 编译器和工具集称为“Watcom C/C++”，并且该产品仍以](http://en.wikipedia.org/wiki/Watcom)[OpenWatcom C/C++](http://z.about.com/d/cplus/1/5/G/-/-/-/pic2.jpg)的开源形式开发和提供

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-10-07T20:47:00.290

这对于评论来说太长了，所以我不得不把它作为一个答案，但这是对 Jeff B 的回答的回应。

> 请记住，C++ 的原始实现只是作为一个预编译器，为“真正的”编译器输出 C 代码。

我有一个朋友（他写 C++ 编译器——是的，复数），他会冒犯你的第一句话。目标代码是 C 源代码的编译器与其他任何编译器一样都是编译器。编译器的本质是它理解语言的语法，并在此基础上生成新代码。预处理器对语言一无所知，只是重新格式化其输入。

请记住，将编译那些 C++ 编译器的输出的 C 编译器本身会输出 ASM 代码，然后将通过汇编器运行。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-10-07T19:37:06.110

提出问题的人应该根据问题编写 C、C++ 或 C/C++。

根据我所见，您可以使用*C 方式*或*C++ 方式*编写 C++ 代码。两者都有效，但是从长远来看，非 C 风格编写的 C++ 代码通常更容易维护。

最后，这一切都取决于特定的问题。如果有人问如何连接字符串，那么他是否想要 C 或 C++ 解决方案非常重要。或者，另一个例子，如果有人要求一个 qsort 算法。为了支持不同的类型，您可能希望在 C 中使用宏，在 C++ 中使用模板等。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-10-07T19:27:05.117

如果这是一个需要编写多个函数的复杂问题，是的，它可能是错误的。

如果只是询问有关`sprintf`或位操作的细节，我认为它可以是合法的（后者甚至可以标记为 C/C++/Java/C#，我想......）。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-10-11T21:34:09.773

我倾向于将 C / C++ 放在我的问题中。

通常我正在寻找可以在我的 c++ 应用程序中使用的东西。

如果代码是 C 或 C++ 中的，那么我可以使用它，所以我宁愿不只是将可能的答案限制为一个或另一个。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2010-10-18T11:52:26.060

这两种语言不仅不同，而且方法也不同。C++ 是一种面向对象的语言，而 C 是过程语言。

我必须提到模板吗？

此外，C 和 C++ 标准也存在差异。如果某些东西在 C 中很好，则不必在 C++ 中编译

# css - CSS - 点击链接后有没有办法摆脱选择矩形？

> ID：179510
> 
> 赞同：47
> 
> 时间：2008-10-07T17:26:20.180
> 
> 标签：css, hyperlink

单击不完全刷新当前页面的链接时，有没有办法摆脱选择矩形？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2008-10-07T17:30:31.810

您是指目标的虚线轮廓吗？

尝试：

```
:focus {
    outline: 0;
} 
```

这将删除所有焦点轮廓。它本质上与 JavaScript 术语中的 onclick 相同。您可能更愿意将此应用于`a:focus`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-07T17:29:48.410

尝试添加这个：

```
onclick="this.blur()" 
```

这里也讨论过

[（CSS？）消除浏览器在超链接图像周围的“选定”行？](https://stackoverflow.com/questions/176695/css-eliminating-browsers-selected-lines-around-a-hyperlinked-image)

# safari - Google Chrome 显示的页面是否与 Safari 相同？

> ID：179512
> 
> 赞同：18
> 
> 时间：2008-10-07T17:26:25.360
> 
> 标签：safari, google-chrome, webkit

鉴于 Chrome 和 Safari 使用 webkit，有没有人发现任何在 Chrome 上呈现与 Safari 不同的东西？目前是否有任何理由在两者上测试网站，或者现在测试 Safari 就足够了？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-10-07T17:30:00.373

其中一部分是知道什么依赖于渲染引擎，什么不依赖。例如，Javascript 在两种浏览器中的处理方式不同（谷歌有自己的自定义 javascript 渲染器），所以如果你的页面大量使用 javascript，我会在这两种浏览器中测试它。

这可能是一个注意 Chrome 已添加到[BrowserShots](http://browsershots.org/)的好地方，因此您甚至不需要安装它来测试它和 Safari。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-10-07T17:28:44.637

谷歌浏览器还使用比当前 Safari 更早版本的 Webkit，因此应在两种浏览器中检查页面。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-10-07T17:27:20.567

它们非常相似，但并不完全相同。例如，我记得读过 Apple 在 Safari 中投入了大量工作以在其中获得 Apple 风格的字体渲染，我怀疑 Google 是否重复了这项工作。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-10-07T17:44:11.720

他们不发布 WebKit 的同步版本。例如，

> Google Chrome
> Official Build 2200
> Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) **AppleWebKit/525.13** (KHTML, like Gecko) Chrome/0.2.149.30 Safari/525.1

相对

> Safari
> 3.1.2
> Mozilla/5.0 (Windows; U; Windows NT 6.0; pl-PL) **AppleWebKit/525.19** (KHTML, like Gecko) 版本/3.1.2 Safari/525.21

WebKit 是非常模块化的，所以它们有不同的绘图和 javascript 引擎。插件的处理方式也大不相同。

在实践中，我没有看到任何行为不同的网站，就任何健全的网页而言，两个浏览器应该具有相同的行为。当然，您可以嗅探用户代理并强制执行不同的行为......

所以不，目前没有理由同时测试两者。请记住，Google 还没有稳定的 Chrome 版本。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-10-09T01:36:35.323

不，一些特定的 UI 差异包括在它们之间呈现的 text-shadow 和 box-shadow 不同。与边界半径相同。如果您使用 Chrome，我会避免使用这三个（高级）CSS 渲染规则。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-03-04T05:36:50.137

Chrome 和 Safari 在 Windows 上具有不同的字体渲染。Safari 包含 Apple 的字体渲染，这对 Windows 用户来说有点模糊。在 OS X 上，它们都使用平台的本机字体渲染。所以 Safari 在这两个系统上看起来都像 OS X，而 Chrome 看起来像它运行的平台。

这是对比我了解更多的人提到的其他要点的补充。:)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-07T18:14:39.880

不，这将是一个与“Chrome 渲染与 Konqueror 相同”的类似问题，尽管 Webkit ( HTML Renderer ) 版本可能不同，但 Chrome、Safari 和 Konqueror 之间的 Java 脚本引擎非常不同。这将影响许多 Google 应用程序，因为它们是使用 javascript 繁重的东西 (AJAX) 编写的。这似乎也影响了许多现代站点，尤其是具有复杂菜单和编辑器的站点（例如 this ）。最后，这取决于您正在查看的网站有多少是用 javascript 功能编写的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-03-04T05:33:18.457

FWIW，谷歌的 Chrome 常见问题解答说它们应该非常相似地呈现：

*   [http://www.google.com/chrome/intl/en/webmasters-faq.html#useragent](http://www.google.com/chrome/intl/en/webmasters-faq.html#useragent)
*   [http://www.google.com/chrome/intl/en/webmasters-faq.html#renderie](http://www.google.com/chrome/intl/en/webmasters-faq.html#renderie)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-07T17:30:18.720

它们仍然有不同的 JavaScript 引擎，它们的行为可能会有所不同（但可能仅在一些罕见的情况下）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-07T17:57:44.000

Chrome 目前使用的 Webkit 版本比 Safari 稍旧。

当然，随着时间的推移，它会更新，但它有可能总是有点落后，这取决于 Apple 如何发布其源代码。

此外，Javascript 引擎不同，这可能会影响行为，尽管它们都非常快。

# java - 序列生成的主键的正确大小是多少？

> ID：179513
> 
> 赞同：0
> 
> 时间：2008-10-07T17:26:31.990
> 
> 标签：java, database, integer, primary-key, long-integer

目前，我们系统中的主键长度为 10 位，刚刚超过 Java 整数的限制。我想避免这些键中的数字溢出导致的任何维护问题，但同时我不想牺牲太多系统性能来存储我永远不需要的无限大数字。

您如何处理管理主键的大小？我是否最好坚持使用 Java 整数，以获得更大的 Long 的性能优势，并在需要时增加大小，或者我应该硬着头皮，在我的大部分 PK 中使用 Java Long，并且永远不必担心溢出序列大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-07T17:28:19.863

似乎答案取决于您的数据溢出 Java 整数的可能性有多大。如果不了解您的数据是什么，就无法知道这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-07T17:55:04.257

我一直使用长键（数据库中的数字（18,0）），因为它们只是消除了这种情况在几乎所有情况下发生的可能性（除了极端数据囤积风格的应用程序）。在所有表中为键具有相同的数据类型意味着您可以在父类中的所有模型对象之间共享该字段，以及在您的 SQL getter 中使用一致的代码，等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-07T17:29:57.550

性能优势可以忽略不计，所以我的建议是使用长键。不得不处理这个问题可能会是一个很大的麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T18:11:31.897

这是存储和使用长整数的成本与溢出 32 位整数的可能性之间的平衡。

考虑一个无符号的 32 位整数存储超过 40 亿个值。如果您认为在接下来的 136 年中，此表中每秒平均有超过 1 个新行，那么您需要使用 Long。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-07T18:44:15.763

java中的32位整数是有符号整数，所以只有20亿。如果由于某种原因，您的 SEQUENCE 时不时地跳动，那么您的 PK 之间就会出现一些差距。

有很长的时间并没有什么坏处（请记住，Y2K 问题的发生是因为一些 COBOL 开发人员认为他们会在日期中保存一些字节？？）:-)

因此，我总是使用 Long。

# xml - 重构 XSD 架构

> ID：179538
> 
> 赞同：6
> 
> 时间：2008-10-07T17:32:47.263
> 
> 标签：xml, refactoring, xsd

我正在一个项目中工作，该项目需要清理一些第三方 XSD 架构，并且我想对其中的常见元素进行一些重构。

有没有合适的工具来自动化这个？我通过 XMLBeans 的 sfactor 进行了尝试，但它不起作用（它引发了一个奇怪的异常，甚至 Google 都无法回答！）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-08T22:17:14.740

由于缺乏答案，我抽出一些空闲时间并构建了[xnikt](http://code.google.com/p/xnikt/)，这是一个 Java 工具，可以满足我从 XSD 中提取常见元素的实际需求。我将它作为 GPL 释放，因此任何人都可以对其进行分叉、增强等。

我愿意合作，所以如果有人有想法和时间，请与我联系！

我针对我想要重构的 XSD 模式对它进行了测试，它就像一个魅力。

我希望它可以帮助任何可能处于或将处于相同情况的人。

# php - 在 PHP 中，出于什么原因我不能包含来自外部文件的变量？

> ID：179539
> 
> 赞同：1
> 
> 时间：2008-10-07T17:33:09.837
> 
> 标签：php

如果我在 Page1.php 和 Page2.php 中定义了 $var 我有

```
//Page2.php
包括（'Page1.php'）；

回声 $var;

```

由于什么原因它不会将 $var 的值打印到屏幕上？这些文件位于同一目录中，因此路径不应该是问题。我已经检查了 php.ini 文件，但没有什么能真正引起我的注意。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-07T17:38:01.967

可能的原因：

*   当前的工作路径并不总是与文件的相同。例如，如果 Page2.php 包含在更高级别，则该更高级别将是路径。确保您已直接加载 Page2.php 或相应地移动 Page1.php。
*   确保`$var`确实是您所期望的。在 Page1.php 中回显它以确认。（这也检查是否包含正确的文件）
*   如果源不是真的这么简单，请确保您没有`$var`在任何地方取消定义/清除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-07T17:41:20.493

我刚刚测试过：

page1.php：

```
<?php
$foo = "bar"
?> 
```

page2.php：

```
<?php
include('page1.php');
echo $foo;
?> 
```

这行得通。

您可能需要检查文件路径。var_dump() 也可以方便地检查变量输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-07T17:42:06.387

如果是路径问题，您会在错误日志中看到警告。您也可以更改为 require 而不是 include，这将变得显而易见。

```
echo getcwd(); 
```

您还可以打印您的工作目录以找出问题所在。

$var 是在函数中创建的吗？如果是这样，请确保您有

```
global $var; 
```

在该函数的第一次分配之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T17:43:26.777

检查您是否关闭了整个[error_reporting](http://php.net/error_reporting)。也许包含出错了，因此永远不会包含变量。

# sql-server-2005 - 将 SSIS 包从 SQL Server 2005 迁移到 2008 时要记住什么？

> ID：179542
> 
> 赞同：5
> 
> 时间：2008-10-07T17:34:57.947
> 
> 标签：sql-server-2005, sql-server-2008, ssis, migration, upgrade

将 SQL Server 集成服务包从 SQL Server 2005 DB 移动/导出到 2008 的最佳做法是什么？

有哪些安全问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-29T23:35:42.613

事实证明，从 2005 年迁移到 2008 年并不像看起来那么难看。我读到的所有内容都表明 Visual Studio 2008 环境会自动将 SSIS 包转换为更新的格式。

需要注意的重要一点是，Visual Studio 2008 将能够运行 SSIS 2005 包。但是，当您在设计器中保存包或使用转换工具时，包将被转换为 SSIS 2008 格式，并且无法再次在 Visual Studio 2005 中使用。

我对升级过程所做的一些重要说明：

*   SSIS 2005 中的 VSA（Visual Studio for Applications）已替换为 VSTA（SSIS 2008 中的 Visual Studio Tools for Applications）。虽然升级过程通常可以正常工作。但是，如果您使用任何对 IDTSxxx90 接口的引用，则需要确保它们已更新以引用 IDTSxxx100 接口。

*   SQL Native Client 和 OLE DB 连接字符串的提供程序名称在 SSIS 2005 和 SSIS 2008 之间略有变化，因此请确保使用升级向导或手动检查连接字符串设置。

我发现的有关所有这些信息的一些资源来自：

*   [SSIS 2008 婴儿床单](http://www.simple-talk.com/sql/ssis/sql-server-2008-ssis-cribsheet/)

*   [MSDN 集成服务向后兼容性](http://msdn.microsoft.com/en-us/library/ms143706.aspx)文档

*   [Michael Entin 的笔记本](http://blogs.msdn.com/michen/archive/2007/12/04/SQL-2008-and-VS-2008.aspx)（MSDN 博客）

...嘿，我也学到了一些东西，因为我们正准备解决同样的问题。

# c - 关闭文件上 feof() 的返回值是多少？

> ID：179543
> 
> 赞同：3
> 
> 时间：2008-10-07T17:35:04.000
> 
> 标签：c, file

对于 FILE* 流，如果我尽可能多地读取数据，则 feof(stream) 返回非零。那么，如果我关闭流，它 feof(stream) 会继续返回非零值吗？有保证吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-10-07T17:51:16.167

在关闭的文件上调用 feof() 是没有意义的（实际上比无意义更糟糕 - 它是未定义的，所以任何事情都可能发生）。

来自 C 标准：

> 关闭关联文件（包括标准文本流）后，指向 FILE 对象的指针的值是不确定的。

和

> 成功调用 fclose 函数会导致 stream 指向的流被刷新并关闭相关文件。流的任何未写入缓冲数据都将传递到主机环境以写入文件；任何未读缓冲数据都将被丢弃。无论调用是否成功，流都与文件解除关联，并且 setbuf 或 setvbuf 函数设置的任何缓冲区都与流解除关联（如果它是自动分配的，则解除分配）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-07T17:42:15.903

根据库的实现，调用 fclose() 将导致 FILE 结构中的资源重新分配，随后的尝试很可能会导致崩溃。我相信对此的标准术语是“未定义的行为”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-07T20:16:42.643

不要这样做。不要尝试`feof()`在关闭的文件上运行。结果未定义。跟踪哪些文件句柄以其他方式关闭，而不是假设 EOF 将在它们上发出信号。

一般来说，在编写可移植代码时必须必须避免 C 中未定义的行为......它可能在您的平台上做一些明智的事情，但它可能会在另一个平台上做一些完全荒谬或意想不到的事情。

Usenet 小组的人们`comp.lang.c`几年前提出了一台假设的计算机，即[DeathStation 9000](http://en.wikipedia.org/wiki/User:CompuHacker/CHDS9000)，它在未定义构造的情况下表现出最可怕的不良行为。这是一种教学工具，可让您远离依赖 C 中未定义的行为 :-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-07T17:44:57.507

并非针对 feof() 的每个实现。

事实上，你甚至不能保证在你调用 fclose 之后**任何**f* 调用都会起作用。

# agile - 我是否必须成为 Scrum Master 才能管理敏捷 Scrums？

> ID：179548
> 
> 赞同：4
> 
> 时间：2008-10-07T17:36:44.573
> 
> 标签：agile, scrum

我确信成为 Scrum Master 可以真正为我所遵循的流程增加价值，但是我相信我正在处理的应用程序领域的背景有助于更好地为项目完成计划和调度

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-07T20:21:36.393

我只是对这里使用的措辞有疑问 - 在问题和回复中。作为Scrum 管理员，您**不会****管理**或**运行**项目。团队以自我指导的方式运行项目。Scrum master 的角色是**促进和指导**。

这可能看起来像语义，但我经常发现我们选择的术语揭示了我们的潜在倾向——在这种情况下，它们可能表明倾向于指挥和控制而不是促进自主团队。

我同意阅读敏捷（不仅仅是 Scrum）是有帮助的。***成为敏捷团队的一员对于担任***Scrum Master非常有用。CSM 就像用于敏捷的经典项目管理（未经测试）的 PMP - 不是能力指标，但对于与缩写词短视的招聘人员和招聘经理一起寻找工作很有用。

有很好的顾问可以提供帮助，还有有用的在线资源（请参阅 Yahoo 上的 scrumdevelopment 小组）。我建议你自由地使用两者。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-07T17:41:44.640

成为 CSM 并不能真正使您有资格运行 Scrum 项目。练习是你唯一可以期待的准备。

不过，CSM 类/证书仍然*很有*价值。至少，如果您没有可以依靠的导师/教练，您应该阅读..

*   使用 Scrum 进行敏捷项目管理 (Schwaber)
*   敏捷估计和规划 (Cohn)
*   应用用户故事 (Cohn)

并参加 CSM 课程。您将为运行 Scrum 项目做好充分准备。

你可以从中得到的最大好处是：如果你不熟悉这个，你会犯错误。如果您可以学习一些陷阱并了解应该避免什么，那么您可以避免从这些错误中犯/学习的成本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-07T17:42:13.110

你可能会从成为一名认证的 Scrum Master 中受益（我最近也成为了一名 Scrum Master）。

Scrum master 不应该“管理 Scrums”，而应该为团队提供便利——帮助团队消除障碍。该团队是自组织的，并且几乎可以自我管理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-07T17:43:01.253

如果您需要官方认证来感觉良好或向您的管理层展示 - 去吧。但是，您不必获得认证即可在您的团队中应用 Scrum 流程。

（事实上​​，要求获得认证才能运行敏捷流程对我来说是非常反敏捷的 :-)）

当然，参加课程以更好地理解敏捷原则是什么以及如何使用 Scrum 将它们应用到您的日常工作中总是好的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-07T17:50:36.603

必需：
否。推荐：是。

但没有什么比经验更重要的了。
另请注意，每个团队项目都是独一无二的，因此遵循敏捷书中规定的一组规则可能是一个很好的起点，但您需要根据您的 Scrum 调整流程。请记住，重点是让 ytour 团队在不添加**不需要**的流程的情况下完成他们的工作（注意一些流程是必需的）。

根据我的经验，管理层仍然需要 SCRUM 不提供的指标。就我个人而言，我在最初的几个月里很幽默，但随着 Scrum 流程开始表明我们正在制定目标并且这些指标变得越来越不符合标准，我试着放弃它们。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-16T20:38:55.460

不要将 scrum master 理解为某种经理角色！

这是一个很大的错误，但许多公司都这样理解。任何人都可以成为 Scrum 大师。

有时每个 sprint 都可以有不同的 scrum master。顺便说一句，这很有趣，因为每个人都会意识到成为 Scrum Master 意味着什么。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-07-03T13:00:10.203

关于 Scrum Master 角色的讨论从 Master 这个词开始。从我的角度来看，我们需要了解 Scrum 实施/过渡与在 Scrum 已经运行的环境中处理 Scrum 之间的区别。

1.  每个人都可以通过参加课程成为 Scrum Master。该认证并不代表经验或敏捷过程的知识。
2.  一个好的 Scrum Master 会在 Scrum 环境中处理 Scrum 流程。他将指导球队，并注意球队可以不受干扰地工作。但这并不意味着，他可以培训和教授团队 PO 和其他所有人如何进行 Scrum...
3.  为了在组织或团队中实施 Scrum，它需要有关整体流程和战略思维的经验。

如果您查看 Scrum 联盟网站，您会发现认证的描述，以及在获得认证之前必须知道和证明的内容。

**在成为认证 Scrum 教练**之前，**“认证 Scrum Master”**需要学习很多东西

 **如果 Scrum 失败不是因为 Scrum，而是因为人们认为他们在做 Scrum ;-)

多罗

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-07-03T13:53:36.237

这是一个有趣的话题，在某种程度上非常不确定……“管理”这个词可能包含整个世界。

大家可以“尝试”做Scrum，理论不难掌握，难的是实践。与其他敏捷方法一样，Scrum 非常基于“人员和交互”，为了使它们正确发生，您必须深入了解整个 Scrum 框架所描述的价值观、关系和所有权。这是最难的部分，需要大量的练习和经验才能有效地转化为日常练习。

这当然并不意味着你可以“学习”自己，相反，我们经常听到 Scrum 是“边做边学......失败”，因此“经常失败......快速失败！”。所有精益思维原则，但它似乎比评估结果、识别失败和设置改进的最佳实践时要简单得多。作为一个 Scrum Master 意味着一个人知道框架和三个主要角色之间的关系，这远不能说他可以实施 Scrum。那一步是在 Scrum 联盟签署的购买 CSP（Certified Scrum Practitioner）认证，要求至少一年的 Scrum 实践，才能被允许提交认证表格。

当我们谈论一个组织并且我们想要实施 Scrum 时，要考虑的维度以及复杂性要大一些数量级，并且超出“简单”的范围 - 没有冒犯，我们谈论的是映射价值流、结构、会计...... - Scrum Master。要做这样的事情，要么你自己承担很大的风险，并且你可以承受严重影响公司生产力的能力，要么你需要有帮助公司进行敏捷和 Scrum 交易的经验的人。这就是 CSC（Certified Scrum Coach）认证的意义所在。

希望这个对你有帮助 ：-）

# iis - app_offline.htm 会停止当前请求还是仅停止新请求？

> ID：179556
> 
> 赞同：23
> 
> 时间：2008-10-07T17:39:44.943
> 
> 标签：iis

就像标题说的那样，如果我`app_offline.htm`在应用程序根目录中放置一个，它会切断当前正在运行的请求，还是只是新的请求？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-10-07T18:10:28.203

这是我的蹩脚实验；我使用以下代码创建了一个 ASPX 页面：

```
protected void Page_Load(object sender, EventArgs e)
{
    Response.BufferOutput = false;
    Response.Write("Step 1<br />");
    System.Threading.Thread.Sleep(10000);
    Response.Write("Step 2<br />");
    System.Threading.Thread.Sleep(10000);
    Response.Write("Step 3<br />");
} 
```

这段代码只是介绍了一些冗长的页面加载。我访问了该页面，并在加载时创建了一个“app_offline.htm”文件。然后我加载了另一个 Web 浏览器并确认该应用程序处于脱机状态。然后我重新访问了我的“加载”请求......它一直完成到第 3 步。

这确认当前请求完成加载并且新请求被拒绝。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-07T17:49:22.567

来自 ScottGu 的博客：

> 基本上，如果您将具有此名称的文件放在 Web 应用程序目录的根目录中，**ASP.NET 2.0 将关闭应用程序，从服务器卸载应用程序域，并停止处理该应用程序的任何新传入请求**。然后，ASP.NET 还将通过发回 app_offline.htm 文件的内容来响应应用程序中对动态页面的所有请求（例如：您可能想要“站点正在建设”或“停机维护”消息） .

[App_Offline.htm - ScottGu 的博客](http://weblogs.asp.net/scottgu/archive/2005/10/06/426755.aspx)

因此，它似乎会继续处理当前请求，但会停止新的传入请求。

# f# - CLI 是否意味着“命令行界面”以外的任何内容？

> ID：179559
> 
> 赞同：1
> 
> 时间：2008-10-07T17:40:12.303
> 
> 标签：f#, command-line-interface

根据维基百科，在编程语言的比较页面上，它说 F# 使用 CLI。这是否意味着 F# 是为制作命令行应用程序而不是图形应用程序而设计的，还是 CLI 有其他含义？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-07T17:41:16.327

在 .NET 中，它是公共语言基础结构。

[http://en.wikipedia.org/wiki/Common_Language_Infrastructure](http://en.wikipedia.org/wiki/Common_Language_Infrastructure)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-10-07T17:42:29.180

维基百科列出了 CLI 的几个含义：

> *   命令行界面（计算机技术交互）
> *   命令行解释器（命令行外壳）
> *   调用级接口（一种 SQL 数据库管理 API）
> *   公共语言基础结构（Microsoft .NET Framework 规范）
> *   CLI（x86 指令）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-07T17:42:45.823

[公共语言基础设施](http://en.wikipedia.org/wiki/Common_Language_Infrastructure)?

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-07T17:41:24.767

公共语言基础设施/口译员。它在谈论字节码。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2008-10-07T17:54:40.013

客户忠诚度计划——几家公司使用它来将自己与同行进行对比，以改善/鼓励重复业务。

Acronym Finder 中列出的更多项目：[http ://www.acronymfinder.com/CLI.html](http://www.acronymfinder.com/CLI.html)

# shell - ExitCodes 大于 255，可能吗？

> ID：179565
> 
> 赞同：35
> 
> 时间：2008-10-07T17:40:52.647
> 
> 标签：shell, operating-system, exit-code

如果是，在哪个操作系统、外壳或其他什么上？

考虑以下 java 程序（我以 java 为例，任何语言都可以解决这个问题，这更多地是关于操作系统）：

```
public class ExitCode {
    public static void main(String args[]) {
        System.exit(Integer.parseInt(args[0]));
    }
} 
```

在 Linux 和 bash 上运行它，它总是返回小于等于 255 的值，例如（`echo $?`打印上一个执行命令的退出代码）

```
> java ExitCode 2; echo $?
2

> java ExitCode 128; echo $?
128

> java ExitCode 255; echo $?
255

> java ExitCode 256; echo $?
0

> java ExitCode 65536; echo $?
0 
```

* * *

已编辑：下面的（迄今为止唯一的）答案完全解释了 UNIX 上发生的情况。我仍然想知道其他操作系统。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2008-10-07T18:00:27.787

### 使用`wait()`或`waitpid()`

[`wait()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/wait.html)在 Unix 和衍生产品上使用和等 POSIX 函数是不可能的[`waitpid()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/waitpid.html)。返回的退出状态信息由两个 8 位字段组成，一个包含退出状态，另一个包含有关死亡原因的信息（0 表示在程序控制下有序退出，其他值表示有信号杀死它，并表示是否一个核心被转储）。

### 与`sigaction()`_`SA_SIGINFO`

如果您努力工作，并阅读[`sigaction()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/sigaction.html)and[`<signal.h>`](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/signal.h.html)和[Signal Actions](https://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_04_03)的 POSIX 规范，您会发现您可以获取`exit()`子进程传递给的 32 位值。但是，它并不完全直截了当。

```
#include <errno.h>
#include <signal.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/wait.h>
#include <time.h>
#include <unistd.h>

static siginfo_t sig_info = { 0 };
static volatile sig_atomic_t sig_num = 0;
static void *sig_ctxt = 0;

static void catcher(int signum, siginfo_t *info, void *vp)
{
    sig_num = signum;
    sig_info = *info;
    sig_ctxt = vp;
}

static void set_handler(int signum)
{
    struct sigaction sa;
    sa.sa_flags = SA_SIGINFO;
    sa.sa_sigaction = catcher;
    sigemptyset(&sa.sa_mask);

    if (sigaction(signum, &sa, 0) != 0)
    {
        int errnum = errno;
        fprintf(stderr, "Failed to set signal handler (%d: %s)\n", errnum, strerror(errnum));
        exit(1);
    }
}

static void prt_interrupt(FILE *fp)
{
    if (sig_num != 0)
    {
        fprintf(fp, "Signal %d from PID %d (status 0x%.8X; UID %d)\n",
                sig_info.si_signo, (int)sig_info.si_pid, sig_info.si_status,
                (int)sig_info.si_uid);
        sig_num = 0;
    }
}

static void five_kids(void)
{
    const int base = 0xCC00FF40;
    for (int i = 0; i < 5; i++)
    {
        pid_t pid = fork();
        if (pid < 0)
            break;
        else if (pid == 0)
        {
            printf("PID %d - exiting with status %d (0x%.8X)\n",
                   (int)getpid(), base + i, base + i);
            exit(base + i);
        }
        else
        {
            int status = 0;
            pid_t corpse = wait(&status);
            if (corpse != -1)
                printf("Child: %d; Corpse: %d; Status = 0x%.4X - waited\n", pid, corpse, (status & 0xFFFF));
            struct timespec nap = { .tv_sec = 0, .tv_nsec = 1000000 }; // 1 millisecond
            nanosleep(&nap, 0);
            prt_interrupt(stdout);
            fflush(0);
        }
    }
}

int main(void)
{
    set_handler(SIGCHLD);
    five_kids();
} 
```

运行时（`sigexit73`从 编译的程序`sigexit73.c`），这会产生如下输出：

```
$ sigexit73
PID 26599 - exiting with status -872349888 (0xCC00FF40)
Signal 20 from PID 26599 (status 0xCC00FF40; UID 501)
Child: 26600; Corpse: 26599; Status = 0x4000 - waited
PID 26600 - exiting with status -872349887 (0xCC00FF41)
Signal 20 from PID 26600 (status 0xCC00FF41; UID 501)
Child: 26601; Corpse: 26600; Status = 0x4100 - waited
PID 26601 - exiting with status -872349886 (0xCC00FF42)
Signal 20 from PID 26601 (status 0xCC00FF42; UID 501)
Child: 26602; Corpse: 26601; Status = 0x4200 - waited
PID 26602 - exiting with status -872349885 (0xCC00FF43)
Signal 20 from PID 26602 (status 0xCC00FF43; UID 501)
Child: 26603; Corpse: 26602; Status = 0x4300 - waited
PID 26603 - exiting with status -872349884 (0xCC00FF44)
Signal 20 from PID 26603 (status 0xCC00FF44; UID 501)
$ 
```

删除一毫秒调用`nanosleep()`后，输出看起来像：

```
$ sigexit73
sigexit23
PID 26621 - exiting with status -872349888 (0xCC00FF40)
Signal 20 from PID 26621 (status 0xCC00FF40; UID 501)
Child: 26622; Corpse: 26621; Status = 0x4000 - waited
PID 26622 - exiting with status -872349887 (0xCC00FF41)
PID 26623 - exiting with status -872349886 (0xCC00FF42)
Signal 20 from PID 26622 (status 0xCC00FF41; UID 501)
Child: 26624; Corpse: 26623; Status = 0x4200 - waited
Signal 20 from PID 26623 (status 0xCC00FF42; UID 501)
Child: 26625; Corpse: 26622; Status = 0x4100 - waited
PID 26624 - exiting with status -872349885 (0xCC00FF43)
PID 26625 - exiting with status -872349884 (0xCC00FF44)
$ 
```

请注意，这里只有三行开始`Signal`，也只有三行结束`waited`；一些信号和退出状态丢失。这可能是因为`SIGCHLD`设置到父进程的信号之间的时间问题。

但是，关键是`exit()`当代码使用`sigaction()`, `SIGCHLD`,`SA_SIGINFO`来跟踪状态时，可以在状态中传输 4 个字节的数据。

仅作记录，测试是在运行 macOS Mojave 10.14.6 的 MacBook Pro 上执行的，使用 GCC 9.2.0 和 XCode 11.3.1。该代码也可以在我的 GitHub 上的[SOQ](https://github.com/jleffler/soq)（堆栈溢出问题）存储库中作为`sigexit73.c`src [/so-1843-7779](https://github.com/jleffler/soq/tree/master/src/so-1843-7779)子目录中的文件获得。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-11-30T04:03:51.963

在现代 Windows 上，操作系统本身和默认控制台 shell ( `CMD.EXE`) 至少在整个 32 位有符号整数范围内接受并显示退出代码。在上面运行您的示例`CMD.EXE`会给出您要求的退出代码：

```
> java ExitCode 2
> echo %errorlevel%
2

> java ExitCode 128
> echo %errorlevel%
128

> java ExitCode 255
> echo %errorlevel%
255

> java ExitCode 256
> echo %errorlevel%
256

> java ExitCode 65536
> echo %errorlevel%
65536 
```

Windows 并没有真正的 Unix 信号的概念，也没有试图劫持退出代码来添加额外的信息，所以只要你的 shell（或任何最终读取退出代码的程序）也没有这样做，您应该取回您返回的退出代码。幸运的是，使用 Microsoft C 运行时的程序（包括使用 MS Visual C++ 编译的所有程序）保留退出代码，就像退出进程一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-15T16:01:21.973

Windows 有更多的退出代码，超过 14,000 个。（我敢肯定你经常在自己的屏幕上看到其中的一些）。

来了：

*   [Windows 退出代码列表](http://www.hiteksoftware.com/knowledge/articles/049.htm)。
*   [PowerShell 脚本来测试它们](http://blogs.msdn.com/powershell/archive/2006/10/14/Windows-PowerShell-Exit-Codes.aspx)。

# .net-2.0 - SFTP 的 .NET 开源代码？

> ID：179569
> 
> 赞同：1
> 
> 时间：2008-10-07T17:40:59.433
> 
> 标签：.net-2.0, sftp

我搜索了很多，但在 .NET 中找不到 SFTP 的单一开源实现。我得到的只是 SFTP 的 3rd 方组件。任何人都可以帮助我在 .NET 中实现 SFTP 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-07T17:47:02.557

请参阅[这个问题](https://stackoverflow.com/questions/86458/how-do-i-upload-a-file-to-an-sftp-server-in-c-net#86510)和[shrpssh](http://sourceforge.net/projects/sharpssh)，这是公认的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-07T17:56:51.927

你可能想看看格拉纳多斯

[http://www.csharpopensource.net/granados.aspx](http://www.csharpopensource.net/granados.aspx)

# sql - 您可以/如何在不破坏 RI 的情况下添加参考圈？

> ID：179582
> 
> 赞同：3
> 
> 时间：2008-10-07T17:42:22.097
> 
> 标签：sql, postgresql, foreign-keys

我主要对 pgsql 感兴趣，但我想知道在任何 RDBMS 中是否有一种方法可以在两个相互引用的表上执行插入操作，*而无需*禁用和重新启用任何 FOREIGN KEY 或 NOT NULL 约束. （你可能会认为这是一只从自己的蛋中诞生的鸡。）

举个实际的例子，如果你有一个选择题测验系统，有“问题”和“答案”表，其中 question.correct_answer 指代 answer.id，而 answer.question 指代 question.id，是否可以添加一个问题和它的答案同时？

（作为记录，我知道您可以在事务块中进行禁用和重新启用，并且另一个解决方案是没有正确答案列，而是将 answer.correct 作为布尔值并进行检查约束确保每个问题都有一个正确答案。但我对这里的替代解决方案并不好奇。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-07T18:00:23.870

我认为你回答了你自己的问题——你必须创建一个交易块。在 PostgreSQL 中，这应该可以工作：

```
BEGIN;
  SET CONSTRAINTS ALL DEFERRED;
INSERT INTO questions (questionid, answerid, question)
  VALUES (1, 100, 'How long are Abraham Lincoln\'s legs?');
INSERT INTO answers (answerid, questionid, answer)
  VALUES (100, 1, 'Long enough to reach the ground.');
COMMIT; 
```

它必须在事务块中，因为如果任一 INSERT 语句失败，数据库将处于无效状态（不满足表约束）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-07T18:04:15.470

我会通过以下方式做到这一点：

1.  将 Questions.correct_answer 定义为可为空的列。
2.  在 Questions 中插入行，将 correct_answer 设置为 NULL。
3.  在 Answers 中插入行，引用 Questions 中的行。
4.  更新问题 SET correct_answer = ?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-29T13:13:38.600

在一个问题和一个答案的简单情况下，建议将所有属性放在一张表中。

# .net - 如何进行子表的 LINQ 外连接？

> ID：179591
> 
> 赞同：1
> 
> 时间：2008-10-07T17:44:44.557
> 
> 标签：.net, linq-to-sql, join

我有一个具有这种设置的数据表。

表 A

```
AID     AName
---------------------
1       A_Name1
2       A_Name2
3       A_Name3 
```

表 B

```
BID     BName
---------------------
10      B_Name1
20      B_Name2
30      B_Name3 
```

表 C

```
AID     BID
---------------------
1       10
2       10
2       20
2       30
3       20
3       30 
```

我想使用 LINQ 编写一个查询，对于给定的 A 的 ID，给我一个不在表 C 中的 B 的列表。

所以对于 1 的 AID，我想要 20 和 30 的 BID。

对于 3 的援助，我想要 10 的出价

对于 2 的 AID，什么都没有返回。

我知道 SQL 会是

```
SELECT
    B.BID
FROM B
LEFT OUTER JOIN C ON C.BID = B.BID AND A.AID = 1 
-- AID would change based on which I was looking for, 1, 2, or 3 
```

什么是 LINQ 等效项？

请假设我有与 A、B 和 C 表相匹配的对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-07T17:57:59.803

对于 LinqToSql，数据库优化器会适当地处理这个问题。使用“Not Any”模式。

```
IQueryable<B> query =
  db.BTable
    .Where(b => !db.CTable
      .Where(c=> c.AID == 1)
      .Any(c => c.BID == b.BID)
    ) 
```

对于 LinqToObjects，我们不想为 BList 中的每个项目枚举 CList。做一次枚举。

```
List<int> BIDList = CList
  .Where(c => c.AID == 1)
  .Select(c => c.BID)
  .ToList();
IEnumerable<B> query = BList
  .Where(b => !BIDList.Contains(b.BID)); 
```

# msbuild - 是否有一个 MSBuild 任务可以从文件名中提取路径？

> ID：179595
> 
> 赞同：7
> 
> 时间：2008-10-07T17:45:11.047
> 
> 标签：msbuild

我使用以下内容获取需要编译的项目文件列表。每个项目都存储在项目目录的子目录中。

```
<ItemGroup>
   <dprs Include="c:\projects\**\*.dpr" />      
</ItemGroup> 
```

有没有可以用来解压的任务来解压每个项目文件所在的目录？我知道我可以编写自己的任务来执行此操作，但我希望已经存在一个任务，而我只是还没有找到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-07T18:17:07.940

如果我正确理解了这个问题，那么您不需要任务 - 您可以使用众所周知的元数据来完成此任务。这行得通吗？

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="3.5">
    <ItemGroup>
        <dprs Include="c:\projects\**\*.dpr" />      
    </ItemGroup>

    <Target Name="Default">
      <CreateItem Include="%(dprs.RelativeDir)">
        <Output ItemName="_ProjectFileLocations" TaskParameter="Include" />
      </CreateItem>
      <Message Text="@(_ProjectFileLocations->'%(FullPath)', '%0D%0A')" />
    </Target>
</Project> 
```

从我运行的测试来看，它不应该在新项目组中列出两次目录。

# visual-studio-2008 - 使用 Visual Studio Express 产品分发代码

> ID：179596
> 
> 赞同：1
> 
> 时间：2008-10-07T17:45:36.850
> 
> 标签：visual-studio-2008, licensing

我安装了 Visual Studio（在这种情况下为 Web 开发人员）Express Edition 并正在阅读 EULA。一件没有让我大吃一惊的事情是我被允许将软件用于（私人、商业等）。

有谁知道您是否可以出售/分发您在这些 Express 版本中创建的代码？我知道它们面向业余爱好者和其他软件许可证，例如 Office 的学生版和教师版，不允许将该软件用于商业用途。

我想最终开始通过 BSD 或 GPL 等 OSS 许可证发布代码，甚至可能出售一些代码，但不确定我是否可以使用 Express Editions 做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-07T17:47:26.703

[是](http://www.microsoft.com/express/support/faq/)的，您可以将 Express Editions 用于商业用途。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-01-13T21:55:17.077

您不能创建可执行文件然后在另一台计算机上运行它，除非该计算机上安装了 Visual Studio Express。不要相信任何相反的评论。我已经尝试了有关如何执行此操作的所有建议，但它们不起作用。

# .net - TTS 引擎推荐

> ID：179598
> 
> 赞同：1
> 
> 时间：2008-10-07T17:46:42.790
> 
> 标签：.net, text-to-speech

任何人都可以推荐用于电话应用程序的可靠且具有成本效益的 TTS 引擎吗？

要求是：

*   必须支持Windows平台
*   必须具有丰富的语言支持，包括对口音的支持（即美国英语与英国英语）

很高兴有：

*   与 .NET 平台集成
*   预算友好
*   虽然输出将被定向到电话应用程序，但能够完全控制输出质量（用于未来的潜在用途）会很好

我很想听听不同包装的任何和所有经验。

注意：不幸的是，开源包在这里不是一个选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-10T14:08:17.320

我还不能投票赞成最后一个答案（我想声誉很低）。在我们的应用程序中，我们将 ATT Audrey 用于英国语音，将 ATT Crystal 用于美国语音。我们对成本也很敏感，发现这是最划算的。

此外[，neospeech](http://www.neospeech.com)仍然拥有最好的美国声音（IMO）。不确定费用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-07T18:09:04.960

我曾经是[RealSpeak TTS Engine](http://www.nuance.com/realspeak/)的开发人员。我不知道它要花多少钱，但它非常可靠，并且在多个操作系统上支持十几种语言。

该引擎还支持多种音频输出类型，并提供客户端-服务器模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T03:48:17.943

AT&T NaturalVoices 也非常好，并且带有任何口音

[演示](http://www.research.att.com/~ttsweb/tts/demo.php)

[AT&T 自然之声](http://www.naturalvoices.att.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T10:54:37.433

AT&T NaturalVoices 是付费引擎吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-08T12:26:49.393

Nuance[链接文本](http://www.nuance.com)根据您的需要，它们有多个引擎。我相信它们都不是开源的。

# c# - 有没有 VB6 到 C# 的迁移工具？

> ID：179605
> 
> 赞同：36
> 
> 时间：2008-10-07T17:48:13.457
> 
> 标签：c#, vb6, porting, vb6-migration

有谁知道从 VB6 代码转换为 C# 的方法？

有没有工具可以为我做到这一点？

我可以遵循任何迁移过程来执行此操作吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-10-07T17:54:28.827

VisualStudio 提供（或至少提供）一个向导来进行从 VB6 到 VB.NET 的转换（然后可以通过一些工作将其转换为 C#，这可能得益于#develop 的 VB.NET <-> C# 转换器），但是当我最后一次使用它时，对于任何不平凡的事情都需要做很多手动工作，所以我怀疑如果这是一个大型和/或重要的应用程序，你可能会更好地手动重写或移植。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-10-07T19:52:20.323

它可能会让人觉得有点厚颜无耻，但你的大脑可能是最好的工具。可能值得重写。

也许你不需要移植它。VB6可以变成COM组件吗？端口到 COM，从 C# 调用，及时返回 Judy 法官。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-10-08T14:15:27.333

As someone who has done this a bunch of times, this is not an easy process. You can use the VB6 to VB.Net tool as stated in [this answer](https://stackoverflow.com/questions/179605/how-can-i-convert-vb6-code-to-c#179626), and then use either Reflector or SharpDevelop to convert to C#. With the SharpDevelop conversion, a few caveats. It screws up all the array references and thinks that they are function calls, and all the logical operators are converted to bitwise logical operators (And becomes & not &&). With Reflector you lose a bunch of stuff. Also the Visual Studio converter fails on a lot of large projects, just hangs and never completes.

Once you have got your code converted into C#, you have to start the real work. The conversion gets you at best 50% of the way there, you have to fix a ton of stuff (you will see your code littered with TODO's), refactor a ton of stuff, and at the end you are left with C# that is a representation of your VB6 -- unless you have very nice VB6 code not a place you really want to be. Also all of your code with be littered with the VB helpers rather than using proper DotNet functions (all the string functions are helpers rather than class objects, for examples0\. If you used Variants at all those all have to be rewritten. If you used a lot of API calls, they tend to need rewritting.

In the end you will get a base, but converting a large project (20-30 forms, 30 classes, 30 modules) can take several man months. Rewritting from scratch, however, may take twice as long and you lose all of your business logic. So, it can be done (I have done it with 3 or 4 large projects), but there is no panacea, no silver bullet, and any tool that says it will do it for you alone, is lying.

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-10-07T18:05:02.847

使用新版本的 Visual Studio 打开您的项目，将您的代码转换为 VB.Net，然后下载[.Net Reflector](http://www.red-gate.com/products/reflector/index.htm)以帮助您进行 C# 转换。

祝你好运！

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-10-07T19:25:03.857

[Artinsoft](http://www.artinsoft.com)（现在更名为[Mobilize.Net](http://www.mobilize.net/)）就是这样做的，特别是[Visual Basic Upgrade Companion](http://www.artinsoft.com/pr_vbcompanion.aspx)。

然而，即使在使用 VBUC 之后，系统的某些部分仍然需要手动迁移/校对。但它通常是原始问题的一小部分。由于过去的迁移经验，一些迁移​​问题已经得到解决。

Artinsoft 是建造 Visual Studio 附带的向导的同一家公司，在theraccoonbear 的帖子中提到。但是，如果我没记错的话，向导只会将 VB6 迁移到 VB.Net。

全面披露：我为 Artinsoft 工作

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-10-08T12:43:53.400

简短的回答是 VB6 和 VB.NET（以及因此 C#）是独立的语言，但相关的语言。两个平台之间存在许多细微的差异（Integer 是 Int32 而不是 Int16）和严重的差异（图形、表单和打印引擎）。您需要将此视为您正在转换到一个完全不同的平台。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-10-07T20:43:06.677

我使用了 2 个免费的：

[http://www.carlosag.net/Tools/CodeTranslator/](http://www.carlosag.net/Tools/CodeTranslator/)

[http://www.developerfusion.co.uk/utilities/convertcsharptovb.aspx](http://www.developerfusion.co.uk/utilities/convertcsharptovb.aspx)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-12-26T06:15:58.717

Microsoft 推荐[ArtinSoft 的 Visual Basic Upgrade Companion (VBUC)](http://msdn.microsoft.com/en-us/vstudio//ff793478)。

> Microsoft 和 ArtinSoft 合作为您提供免费的 VBUC 许可证。下面的折扣代码可用于购买许可证，允许您免费将包含多达 10,000 行 VB6 代码的应用程序迁移到 VB.NET 或 C#。它也可以在购买更大的许可证时应用。

它并不完美，生成的代码在编译之前仍然需要大量手动修复，但这个工具仍然值得一试。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-10-13T17:21:29.487

要问自己的一个问题是，拥有 C# 而不是 VB.NET 有多重要？如果您正在转换一个大型应用程序，也许您应该升级到 VB.NET，它会更便宜。

VB6 中有一些在 C# 中没有完全等效的特性（错误处理、后期绑定等）。问问自己为什么值得手动转换它们，当您可以转到支持它们的 VB.NET 时。

如果您不相信我（而且没有人投票支持我的答案，呜呜呜！），也许您会相信[Francesco Balena](http://www.vbmigration.com/Blog/post/2008/07/Sharp-enough-to-convert-from-VB6-to-C.aspx)和 Dan Appleman（在《[转向 VB.NET](https://rads.stackoverflow.com/amzn/click/com/159059102X) 》一书中）同意我的观点。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-09-24T11:44:35.777

在 GreatMigrations，我们是手工完成的——我们用我们的双手来开发一个 VB6/COM 编译器。编译器读取一个 VBP（或一组相关的 VBP）和引用的 COM 库并构造一个“语义模型”。该模型是一组极其详细的符号表和操作码流，可以完整准确地描述源系统定义的所有信息结构和执行的操作。

然后，该工具应用一系列算法来修改和重组模型，使其与 .NET 更兼容，并可选择应用自定义转换；例如用 .NET 类替换 COM 组件。转换规则是由人设计并“手工”创建的，以满足他们的独特要求。

最后，模型被“执行”，但不是分配数据模型和执行操作，而是以目标平台的符号编写文件结构、数据模型和操作。我们可以使用这种方法编写 VB.NET 和 C#。我们也使用这个过程将 ASP 网站迁移到 ASPX，（我们也有一个多方言 FORTRAN-to-C 产品）

该方法不会在第一次尝试时产生生产就绪的软件，但可以通过修改工具的配置并重新运行翻译过程来改进并制作“更好”的软件。我们工具的优势在于它的可重复性、速度和灵活性，这有助于敏捷的工具辅助重写方法。IMO，利用我们的方法的迁移团队将受益于分配更多资源来评估重新设计和开发过程改进的替代方案，而不是重新收集功能需求、手工编码和测试。他们最终将享受到一个更可维护的系统和迁移后更忠实地再现原始应用程序功能，以及迁移过程中更好的控制和可见性。

我们工具的试用版可在此处[获得 gmStudio Trail 请求下载](http://www.greatmigrations.com/resources_gmStudio_demo.aspx)。它将允许您试验高达 10K LOC 的 ASP/VB 代码并运行多达 30 个会话。

# java - 奇怪的休眠缓存问题

> ID：179617
> 
> 赞同：2
> 
> 时间：2008-10-07T17:52:00.033
> 
> 标签：java, hibernate, spring

我们将 Hibernate 3.1 与 Spring MVC 2.0 一起使用。当直接在数据库上更新数据（而不是在应用程序中）时，就会出现我们的问题。我们使用过滤器根据订单是否打开或关闭来过滤结果集合。如果我们将 DB 上的订单更改为关闭，过滤器会返回正确的列表，但是，对象的状态不会改变。

*   我们没有启用二级缓存或查询缓存。
*   从数据库中检索集合是通过 Hibernate 的 Session.createQuery。
*   此外，我们连接了一个 SessionFactory，并在整个应用程序中使用一个 Session。

对象显示正确状态结果的唯一时间是服务器重新启动时——我们不希望定期这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-07T19:40:25.917

Session 总是有一个“一级”缓存，所以如果你使用一个 Session，你通过它读取的所有内容都将被缓存。Hibernate 将对数据库执行查询，但是当它构建对象时，它会检查 Session 缓存以避免构建新对象，因此数据库中更改的任何列都不会被刷新。如果你关闭它并获得一个新的会话，它将在下一次查询时从数据库中读取完整的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-07T18:02:03.197

当您有进程“在其背后”时，您不能真正期望 Hibernate 正确管理其缓存对象的“脏”状态。如果您使用注释，我建议将状态（如果这是字段的名称）标记为@Transient，以便 Hibernate 知道它必须每次都从数据库中获取此值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-07T18:10:22.837

您可能想要启用缓存并设置到期时间。然后一旦缓存过期并且有人请求，Hibernate 将刷新数据库中的数据。

我在家庭项目中使用它，因为我偶尔会调整数据库。然后我稍等片刻，刷新页面并查看调整后的数据。

看看 Hibernate 中的 ehcache。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-07T18:22:05.370

您可以使用版本控制[Hibernate Version](http://www.hibernate.org/hib_docs/v3/reference/en-US/html/mapping.html#mapping-declaration-version)。您的外部进程必须增加版本号（或时间戳）以让 Hibernate 知道有新版本可用。

这不一定是立即更改，但比容器重启更频繁（在我们的例子中每隔几分钟）。

它有几个缺点：

*   您的应用程序可能会使用旧数据运行一段时间
*   如果版本通过批处理作业增加，并且休眠尝试保存更新的旧版本记录，您将生成异常
*   共享数据库的扩展性较差；经常检查确实性价比。

我绝不是 Hibernate 专家，但这是可能的。

# wpf - WPF 中的架构命名空间和程序集引用有什么区别？

> ID：179619
> 
> 赞同：6
> 
> 时间：2008-10-07T17:52:09.473
> 
> 标签：wpf

为什么xaml中有两种引用。

一个看起来像这样：

```
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
```

但我的看起来像这样：

```
xmlns:WPFToolKit="clr-namespace:Microsoft.Windows.Controls;assembly=WPFToolkit" 
```

为什么我不能这样做：

```
xmlns:local="http://myschema.mydomain.com/MyControlNamespace 
```

感谢[ixlettervariables](https://stackoverflow.com/users/7116/sixlettervariables)的回答。[这里](http://codingcontext.wordpress.com/2008/10/09/consolidating-xaml-namespaces/)有详细的解释

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-07T17:55:24.583

第二个实例基本上是对程序集中命名空间的未映射但显式引用。第一个实例是对项目引用的某个程序集中的命名空间的映射引用。[XAML 命名空间和命名空间映射](http://msdn.microsoft.com/en-us/library/ms747086.aspx)，在 MSDN 上更详细地解释了这一点：

> WPF 定义了 XAML 处理器使用的 CLR 属性，以便将多个 CLR 命名空间映射到单个 XML 命名空间。此属性[XmlnsDefinitionAttribute](http://msdn.microsoft.com/en-us/library/system.windows.markup.xmlnsdefinitionattribute.aspx)位于生成程序集的源代码中的程序集级别。WPF 程序集源代码使用此属性将各种常用命名空间（例如 System.Windows 和 System.Windows.Controls）映射到[http://schemas.microsoft.com/winfx/2006/xaml/presentation](http://schemas.microsoft.com/winfx/2006/xaml/presentation)命名空间。

因此，通过将以下内容添加到您的程序集中，您可以做到这一点：

```
[assembly:XmlnsDefinition("http://myschema.mydomain.com/MyControlNamespace", "My.Control.Namespace")] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-07T17:57:10.430

架构引用用于标准 XAML 元素，编译器知道如何将其直接映射到内置 WPF 类。

CLR 命名空间引用是编译器在将命名空间命名空间中的 XML 元素映射到 CLR/WPF 类时要查找的组件和命名空间的提示。

# development-environment - 您使用什么样的编程环境来编写基于 Windows 的游戏？

> ID：179622
> 
> 赞同：1
> 
> 时间：2008-10-07T17:52:54.057
> 
> 标签：development-environment

我使用了与 Flash 集成的 XNA 和 Visual Studio 2005。我很想知道其他人使用和喜欢什么环境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-07T19:07:21.473

我开发了一些跨平台的 2D 游戏（Windows 也是如此），并使用 C++ 与[Geany](http://www.geany.org)和[SDL](http://libsdl.org)。

我发现 SDL 是制作休闲游戏的绝佳库。当然，如果跨平台对您来说意味着 Windows 和 XBOX，那么还有其他库可能是更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-07T17:57:22.253

相同的。VS2005 中的 XNA 2.0 或 VS2008 中的 XNA 3.0。

当我觉得自己喜欢 C++ 时，我也涉足过 darkGDK。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-07T18:02:08.937

虽然不是特定于 Windows 的，但我使用了[pygame](http://www.pygame.org/)，它可以使用 DirectX 作为后端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T18:07:39.643

我使用[Dev-C++](http://www.bloodshed.net/devcpp.html)和[SDL](http://www.libsdl.org/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-08T06:34:33.553

在燃烧之海海盗飞行实验室，我们使用 Visual Studio 2005。在除以零时，我们使用 Visual Studio 2008。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-08T06:43:08.370

我目前正在使用带有 XNA 3.0 CTP 的 Visual Studio 2008。然而，许多游戏开发商店仍在使用 VS05。

# sql - 如何在 2017 年之前修剪 SQL Server 中的字符串？

> ID：179625
> 
> 赞同：150
> 
> 时间：2008-10-07T17:54:18.483
> 
> 标签：sql, sql-server

在 SQL Server 2017 中，您可以使用此语法，但不能在早期版本中使用：

```
SELECT Name = TRIM(Name) FROM dbo.Customer; 
```

* * *

## 回答 #1

> 赞同：277
> 
> 时间：2008-10-07T17:55:15.427

```
SELECT LTRIM(RTRIM(Names)) AS Names FROM Customer 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2008-10-07T17:56:38.060

要在右侧修剪，请使用：

```
SELECT RTRIM(Names) FROM Customer 
```

要在左侧修剪，请使用：

```
SELECT LTRIM(Names) FROM Customer 
```

要在两侧修剪，请使用：

```
SELECT LTRIM(RTRIM(Names)) FROM Customer 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-10-08T10:25:42.073

我认为这是一次性的数据清理练习。完成后，请确保添加数据库约束以防止将来出现错误数据，例如

```
ALTER TABLE Customer ADD
   CONSTRAINT customer_names__whitespace
      CHECK (
             Names NOT LIKE ' %'
             AND Names NOT LIKE '% '
             AND Names NOT LIKE '%  %'
            ); 
```

还要考虑禁止可能导致问题的其他字符（制表符、回车符、换行符等）。

这也可能是将这些名称拆分为 , 等的好`family_name`时机`first_name`:)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-07-07T08:02:01.807

```
SELECT LTRIM(RTRIM(Replace(Replace(Replace(name,'   ',' '),CHAR(13), ' '),char(10), ' ')))
from author 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-18T08:59:14.183

“替换”的扩展版本：

```
REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(RTRIM(LTRIM(REPLACE("Put in your Field name", ' ',' '))),'''',''), CHAR(9), ''), CHAR(10), ''), CHAR(13), ''), CHAR(160), '') [CorrValue] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-06-21T05:55:52.480

在带有 ssis 表达式的 sql server 2008 r2 中，我们有修剪功能。

SQL Server Integration Services (SSIS) 是 Microsoft SQL Server 数据库软件的一个组件，可用于执行广泛的数据迁移任务。

你可以在这个链接上找到完整的描述

[http://msdn.microsoft.com/en-us/library/ms139947.aspx](http://msdn.microsoft.com/en-us/library/ms139947.aspx)

但是这个功能本身有一些限制，msdn 在那个页面上也提到了这些限制。但这是在 **sql server 2008 r2**

```
TRIM("   New York   ") .The return result is "New York". 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-11T22:33:46.363

要从字符串的开头和结尾修剪任何一组字符，您可以执行以下代码，其中 @TrimPattern 定义要修剪的字符。在此示例中，空格、制表符、LF 和 CR 字符被修剪：

声明@Test nvarchar(50) = Concat (' ', char(9), char(13), char(10), ' ', 'TEST', ' ', char(9), char(10), char( 13),'','测试','',char(9),'',char(9),char(13),'')

声明 @TrimPattern nvarchar(max) = '%[^' + char(9) + char(13) + char(10) +']%'

SELECT SUBSTRING(@Test, PATINDEX(@TrimPattern, @Test), LEN(@Test) - PATINDEX(@TrimPattern, @Test) - PATINDEX(@TrimPattern, LTRIM(REVERSE(@Test))) + 2)

# c++ - 优化截锥体剔除

> ID：179643
> 
> 赞同：2
> 
> 时间：2008-10-07T17:57:30.210
> 
> 标签：c++, 3d, frustum, space-partitioning

我正在用 C++ 编写游戏，并且有一个由许多单独的网格组成的关卡，每个网格都有自己的顶点缓冲区。我正在使用 vmmlib（出色的免费 gl compat.vector/matrix 库）来创建我的截锥剔除器，并针对关卡中每个网格的边界球对其进行测试。可悲的是，我的关卡最多可以包含 800 个网格，并且每帧迭代所有这些网格很慢。优化代码的最佳方法是什么，这样我就不必在每次迭代时查看所有网格？截锥体内的边界体积？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-07T18:04:02.693

是的，边界对象是要走的路，你应该注意选择一个足够的边界体积，例如对于像机器人一样在场景中移动并且不躺下的网格是最好的体积，其他最好用立方体表示（轴对齐与否）。

然后创建一个四叉树或八叉树来分层划分网格数据。

这对于户外截锥体剔除非常有效。

对于室内来说，BSP 是最好的选择，因为你有很多墙来分隔你的空间。您仍然应该对具有 10 个以上多边形的网格进行体积绑定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-07T17:59:22.780

[二进制空间分区](http://en.wikipedia.org/wiki/Binary_space_partitioning)或其近亲[四叉树](http://en.wikipedia.org/wiki/Quadtree)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-10T22:34:03.010

我只是想补充一点，现在门户网站通常优于 BSP 或与 BSP 结合使用，但我没有足够的声誉来编辑原始帖子。

# c++ - 如何在 C++ 中获取 char 的整数值？

> ID：179653
> 
> 赞同：4
> 
> 时间：2008-10-07T18:00:37.990
> 
> 标签：c++, bit-manipulation, endianness

我想将存储在 32 位无符号整数中的值放入四个字符中，然后将每个字符的整数值存储在一个字符串中。

我认为第一部分是这样的：

```
char a = orig << 8;
char b = orig << 8;
char c = orig << 8;
char d = orig << 8; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-07T18:09:09.657

假设“orig”是一个包含您的值的 32 位变量。

我想你想做这样的事情：

```
unsigned char byte1=orig&0xff;
unsigned char byte2=(orig>>8)&0xff;
unsigned char byte3=(orig>>16)&0xff;
unsigned char byte4=(orig>>24)&0xff;

char myString[256];
sprintf(myString,"%x %x %x %x",byte1,byte2,byte3,byte4); 
```

顺便说一句，我不确定这是否总是正确的。（*编辑*：确实，它是字节序正确的，因为位移操作不应该受到字节序的影响）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-10-07T18:12:14.767

如果您真的想先提取单个字节：

```
unsigned char a = orig & 0xff;
unsigned char b = (orig >> 8) & 0xff;
unsigned char c = (orig >> 16) & 0xff;
unsigned char d = (orig >> 24) & 0xff; 
```

或者：

```
unsigned char *chars = (unsigned char *)(&orig);
unsigned char a = chars[0];
unsigned char b = chars[1];
unsigned char c = chars[2];
unsigned char d = chars[3]; 
```

或者使用 unsigned long 和四个字符的并集：

```
union charSplitter {
    struct {
        unsigned char a, b, c, d;
    } charValues;

    unsigned int intValue;
};

charSplitter splitter;
splitter.intValue = orig;
// splitter.charValues.a will give you first byte etc. 
```

更新：正如 friol 指出的，解决方案 2 和 3 不是字节序不可知的；哪些字节`a`、`b`和`c`代表`d`取决于 CPU 架构。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-07T18:08:06.397

使用`union`. （这里要求的是示例程序。）

```
 #include <<iostream>>
    #include <<stdio.h>>
    using namespace std;

    union myunion
    {
       struct chars 
       { 
          unsigned char d, c, b, a;
       } mychars;

        unsigned int myint; 
    };

    int main(void) 
    {
        myunion u;

        u.myint = 0x41424344;

        cout << "a = " << u.mychars.a << endl;
        cout << "b = " << u.mychars.b << endl;
        cout << "c = " << u.mychars.c << endl;
        cout << "d = " << u.mychars.d << endl;
    } 
```

正如詹姆斯所提到的，这是特定于平台的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-07T18:05:39.663

不完全的：

```
char a = orig & 0xff;
orig >>= 8;
char b = orig & 0xff;
orig >>= 8;
char c = orig & 0xff;
orig >>= 8;
char d = orig & 0xff; 
```

不完全确定您所说的“将这些值中的每一个的整数值存储到一个字符串中是什么意思。你想`0x10111213`变成`"16 17 18 19"`，还是什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-07T18:07:20.923

对于十六进制：

```
sprintf(buffer, "%lX", orig); 
```

对于十进制：

```
sprintf(buffer, "%ld", orig); 
```

用于`snprintf`避免缓冲区溢出。

# objective-c - NSMutableArray 销毁

> ID：179665
> 
> 赞同：14
> 
> 时间：2008-10-07T18:05:04.640
> 
> 标签：objective-c, cocoa

`NSMutableArray`我有一个包含快乐对象的数组。每当我尝试清除所有对象的数组并重新填充它时，这些对象就会恶意地打开（泄漏）我。

它像这样在init函数中分配

```
self.list = [NSMutableArray array]; 
```

我用来清除它的不同方法包括：

```
self.list = nil;
self.list = [NSMutableArray array]; 
```

和

```
[self.eventList removeAllObjects]; 
```

显式分配和释放数组也不起作用。仅当我尝试重置列表时才会发生泄漏。

重置时我错过了一步还是这是一个不同的问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-10T04:13:29.763

您是如何创建泄漏的对象的？如果你做了这样的事情：

```
- (void)addObjectsToArray {

    [list addObject:[[MyClass alloc] init];

    OtherClass *anotherObject = [[OtherClass alloc] init];
    [list addObject:anotherObject];
} 
```

那么当列表被释放时你会泄漏两个对象。

您应该将任何此类代码替换为：

```
- (void)addObjectsToArray {

    MyClass *myObject = [[MyClass alloc] init];
    [list addObject:myObject];
    [myObject release];

    OtherClass *anotherObject = [[OtherClass alloc] init];
    [list addObject:anotherObject];
    [anotherObject release];
} 
```

更详细地说：

如果您遵循第一个模式，您已经根据您拥有的[Cocoa 内存管理规则](http://developer.apple.com/documentation/Cocoa/Conceptual/MemoryMgmt/Tasks/MemoryManagementRules.html)创建了两个对象。放弃所有权是您的责任。如果你不这样做，对象将永远不会被释放，你会看到一个泄漏。

但是，您不会立即看到泄漏，因为您将对象传递给数组，该数组也拥有它们的所有权。只有当您从数组中删除对象或数组本身被释放时，才会识别出泄漏。当其中任何一个事件发生时，数组将放弃对象的所有权，并且它们将在您的应用程序中保持“活动”状态，但您不会对它们有任何引用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-07T19:08:42.907

您是指数组中的对象泄漏吗？

您如何将对象添加到数组中？阵列将保留它们，因此您需要在将它们添加到阵列后自动释放或释放它们。否则在数组被释放后，对象仍然会被保留（泄漏）。

```
MyEvent *event = [[MyEvent alloc] initWithEventInfo:info];
[self.eventList addObject:event];
[event release];

MyEvent *otherEvent = [[[MyEvent alloc] initWithEventInfo:otherInfo] autorelease];
[self.eventList addObject:otherEvent]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-07T18:13:04.157

你的`@property`声明是什么样的？你在合成访问器吗？如果是这样，您需要`@property(retain)`. 我假设当您说对象正在打开您时，您指的是 core dump `(EXC\_BAD\_ACCESS)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T19:41:52.153

我想说我这里没有足够的信息来给你一个很好的答案。您是说`NSMutableArray`仍然分配了，但是是空的并且其中没有任何对象，但是之前在数组中的对象仍然被分配，即使它们应该在应用程序中被释放？

如果是这种情况，数组可能是空的，但是您的对象没有处理发送给它们的 dealloc 消息，在这种情况下，对象仍然在内存中，但没有被任何东西引用。

我想说帮助你我想确切地知道 MallocDebug 到底说的是什么被泄露了。此外，@Elfred 在检查您`@property`的数组方法时给出了一些很好的建议，实际上它应该是保留或复制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-09T22:05:28.413

如果仅在您尝试重置列表时发生泄漏，则您有其他人/其他人正在使用您刚刚尝试释放的那些其他对象。

# actionscript-3 - ActionScript 3.0 为事件处理程序使用闭包

> ID：179668
> 
> 赞同：15
> 
> 时间：2008-10-07T18:06:10.333
> 
> 标签：actionscript-3, events, closures

我试过这样做：

```
root.addEventListener("click", 
   function () 
   { 
      navigateToURL(ClickURLRequest,"_self"); 
   }); 
```

它确实添加了事件侦听器。我喜欢使用闭包，因为它们在这种情况下工作得很好，

但是，删除事件侦听器需要对原始函数的引用，并且由于我使用了匿名闭包，因此它不起作用，我尝试了：

```
 root.removeEventListener("click", 
       function () 
       { 
          navigateToURL(ClickURLRequest,"_self"); 
       }); 
```

也：

```
 root.removeEventListener("click", function () {} ); 
```

我发现它起作用的唯一方法是放弃匿名闭包并将事件侦听器指向预先存在的函数：

```
 function OnClick (e:Event)
 {
     navigateToURL(ClickURLRequest,"_self");
 }

 root.addEventListener("click", OnClick);
 root.removeEventListener("click", OnClick); 
```

有谁知道一种方法可以为事件处理程序使用匿名闭包，同时仍然保留删除它们的能力？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2008-10-07T19:11:53.010

这是删除我在生产项目中使用的事件侦听器的通用方法

```
 addEventListener
(
    Event.ACTIVATE, 
    function(event:Event):void
    {
        (event.target as EventDispatcher).removeEventListener(event.type, arguments.callee)             
    }
) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2010-10-08T22:17:20.353

正如已经建议的那样，您可以从闭包本身的侦听器链中删除闭包。这是通过使用 arguments.callee 来完成的：

```
myDispatcher.addEventListener("click", function(event:Event):void
{
    IEventDispatcher(event.target).removeEventListener(event.type, arguments.callee);

    // Whatever else needs doing goes here
}); 
```

这将有效地将闭包变成事件的一次性监听器，一旦事件触发就简单地分离自身。虽然语法上很冗长，但对于那些真正只触发一次（或者您只关心一次）的事件来说，它是一种非常有用的技术，例如 Flex 中的“creationComplete”。我在下载数据时一直使用它，因为我认为内联回调代码更容易理解。这就像隐藏异步性：

```
myLoader.addEventListener("complete", function(event:Event):void
{
    /* Even though the load is asynchronous, having the callback code inline
     * like this instead of scattered around makes it easier to understand,
     * in my opinion. */
}); 
```

但是，如果您想多次收听该事件，由于显而易见的原因，这将不是很有效。在这种情况下，您需要在某处存储对闭包的引用。方法是与 ActionScript 中的任何其他对象类似的对象，并且可以传递。因此，我们可以将代码更改为如下所示：

```
var closure:Function;

myDispatcher.addEventListener("click", function(event:Event):void
{
    closure = arguments.callee;

    // Whatever else needs doing goes here
}); 
```

当您需要删除事件侦听器时，请使用“闭包”引用，如下所示：

```
myDispatcher.removeEventListener("click", closure); 
```

显然，这是一个抽象的例子，但使用像这样的闭包非常有用。但是它们确实有缺点，例如效率低于命名方法。另一个缺点是，如果需要，您实际上必须存储对闭包的引用。然后必须注意保持该引用的完整性，就像任何其他变量一样。

因此，虽然不同的语法可能有其用途，但它并不总是最好的解决方案。这是一种苹果和橘子的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-07T18:30:30.737

您可以将 function() 关键字视为构造函数，每次都创建一个新对象（闭包）。因此，如果您创建闭包只是作为参数并且不在任何地方保留引用，则无法在其他地方获得“相同”的闭包。

显而易见的解决方案是你不喜欢的，在使用之前定义函数。当然，它仍然可以是一个完整的闭包，而不仅仅是一个“类静态”函数。只需在所需的上下文中定义它，并将其分配给局部变量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-07-07T13:45:47.050

我有时用这个：

```
var closure:Function = null;
root.addEventListener("click", 
   closure = function () 
   { 
      navigateToURL(ClickURLRequest,"_self"); 
   });

root.removeEventListener("click", closure); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-08T18:13:30.787

它与使用定义的函数没有太大不同，但也许这会满足您的需求。请记住，函数是 ActionScript 中的一等对象，您可以将它们作为变量存储和传递。

```
受保护的函数 addListener()
{
    m_handler = function(in_event:Event) { removeEventListener(MouseEvent.CLICK, m_handler); m_handler=null}
    addEventListener(MouseEvent.CLICK, m_handler)
}
受保护的 var m_handler:函数

```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-07T18:52:46.400

我不确定这是否可行，但值得一试：

```
root.removeEventListener("click", arguments.callee ); 
```

有关它的更多信息，请参阅[Flex lang ref](http://livedocs.adobe.com/flex/2/langref/arguments.html#callee)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-10T13:20:17.947

只是我在 Adob​​e 网站上的 Flex In A Week 教程集中遇到的关于您的代码的旁注。在那里，他们说您应该始终使用事件类型的常量而不是字符串。这样你就得到了错字保护。如果您在事件类型字符串中打错字（比如说“clse”），您的事件处理程序将被注册，但当然不会被调用。相反，请使用 Event.CLOSE 以便编译器捕获拼写错误。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-04T04:05:41.807

> 我发现自己经常这样做，所以我尝试了这个。似乎工作正常。

```
addSelfDestructiveEventListener('roomRenderer', 'complete', trackAction, 'floorChanged');

private function addSelfDestructiveEventListener(listenee:*, event:String, functionToCall:Function, StringArgs:String):void
{
    this[listenee].addEventListener(event, function(event:Event):void
        {
            (event.target as EventDispatcher).removeEventListener(event.type, arguments.callee);
            functionToCall(StringArgs);
        })
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-10-17T21:17:53.657

我不知道你实际上在做什么，但在这个特定的例子中，也许你可以有一个 _clickEnabled 全局变量。

然后在事件处理程序中，您只需检查 _clickEnabled，如果它为假，您只需`return`立即检查。

然后，您可以启用和禁用整个事件，而无需分离和重新附加它。

# vb.net - 如何将 WebResponse 放入内存流？

> ID：179676
> 
> 赞同：10
> 
> 时间：2008-10-07T18:08:16.927
> 
> 标签：vb.net

从 WebResponse 获取文件（在本例中为 .PDF，但任何文件都可以）并将其放入 MemoryStream 的最佳方法是什么？使用 .GetResponseStream() 从 WebResponse 获取一个 Stream 对象，但是如果你想将该 Stream 转换为特定类型的流，你会怎么做？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2011-02-07T17:25:36.967

我在测试时发现了 SoloBold 的[答案存在严重问题。](https://stackoverflow.com/questions/179676/how-do-i-put-a-webresponse-into-a-memory-stream/179712#179712)当使用它通过 an 读取文件时，它间歇性地无法将整个流读入内存`FtpWebRequest`。`MemoryStream`我追踪到`Peek()`有时会在前 1460 个字节后返回 -1，即使 a`Read()`会成功（文件比这大得多）。

相反，我提出以下解决方案：

```
MemoryStream memStream;
using (Stream response = request.GetResponseStream()) {
    memStream = new MemoryStream();

    byte[] buffer = new byte[1024];
    int byteCount;
    do {
        byteCount = stream.Read(buffer, 0, buffer.Length);
        memStream.Write(buffer, 0, byteCount);
    } while (byteCount > 0);
}

// If you're going to be reading from the stream afterwords you're going to want to seek back to the beginning.
memStream.Seek(0, SeekOrigin.Begin);

// Use memStream as required 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-07T19:35:27.423

这是一年前从网上复制的。

```
//---------- Start HttpResponse
if(objHttpWebResponse.StatusCode == HttpStatusCode.OK)
    {
        //Get response stream
        objResponseStream = objHttpWebResponse.GetResponseStream();

        //Load response stream into XMLReader
        objXMLReader = new XmlTextReader(objResponseStream);

        //Declare XMLDocument
        XmlDocument xmldoc = new XmlDocument();
        xmldoc.Load(objXMLReader);

        //Set XMLResponse object returned from XMLReader
        XMLResponse = xmldoc;

        //Close XMLReader
        objXMLReader.Close();
    }

    //Close HttpWebResponse
    objHttpWebResponse.Close();
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2008-10-07T21:25:02.477

我在[http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/eeeefd81-8800-41b2-be63-71acdaddce0e/找到了以下内容](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/eeeefd81-8800-41b2-be63-71acdaddce0e/)

```
 Dim request As WebRequest
    Dim response As WebResponse = Nothing
    Dim s As Stream = Nothing
    Dim fs As FileStream = Nothing
    Dim file As MemoryStream = Nothing

    Dim uri As New Uri(String.Format("http://forums.microsoft.com/forums/ShowPost.aspx?PostID=2992978&SiteID=1"))
    request = WebRequest.Create(uri)
    request.Timeout = 10000
    response = request.GetResponse
    s = response.GetResponseStream

    '2 - Receive file as memorystream
    Dim read(256) As Byte
    Dim count As Int32 = s.Read(read, 0, read.Length)
    File = New MemoryStream
    Do While (count > 0)
        File.Write(read, 0, count)
        count = s.Read(read, 0, read.Length)
    Loop
    File.Position = 0
    'Close responsestream
    s.Close()
    response.Close()

    '3 - Save file
    fs = New FileStream("c:\test.html", FileMode.CreateNew)
    count = file.Read(read, 0, read.Length)
    Do While (count > 0)
        fs.Write(read, 0, count)
        count = file.Read(read, 0, read.Length)
    Loop
    fs.Close()
    File.Close() 
```

# c# - 如何使用 .NET 3.0 中的插件框架？

> ID：179680
> 
> 赞同：1
> 
> 时间：2008-10-07T18:08:58.860
> 
> 标签：c#, add-in, .net-3.0

.NET 3.0 有一些关于如何为您自己的应用程序创建和使用插件的更新。我读到了一些你必须为插件和主机应用程序之间的通信创建的“*管道*”，但找不到关于它的更多信息。

您将如何使用 .NET 3.0/3.5 在应用程序中创建加载项功能？

**必要时附加信息**：宿主应用程序是使用 WPF 和一些通用功能制作的。每个加载项都应将自己的注册选项卡添加到给定容器中，并使用自己的内容（按钮、文本字段等）和扩展主机应用程序的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-07T18:36:25.967

除了[Daniels](https://stackoverflow.com/questions/179680/how-can-you-make-use-of-the-add-in-framework-in-net-30#179727) codeplex 链接之外，Jason He 还有一个很好的关于在开发 Paint.NET 时使用 System.AddIn 命名空间的系列文章 -

[http://blogs.msdn.com/zifengh/archive/2007/01/04/addin-model-in-paint-net-1-introduction.aspx](http://blogs.msdn.com/zifengh/archive/2007/01/04/addin-model-in-paint-net-1-introduction.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-07T18:57:17.330

现在还提供托管可扩展性框架 ( [www.codeplex.com/mef](http://www.codeplex.com/MEF) )，它允许您利用丰富的插件平台。

您可能还会发现依赖注入类似于您可以使用的东西（[Unity](http://www.codeplex.com/unity)，[StructureMap](http://structuremap.sourceforge.net/Default.htm)仅举两个例子）。

您可以在依赖注入框架之上创建一个插件平台，尽管像 MEF 这样的专用插件平台可能更容易实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-07T19:38:41.037

一定要查看[www.codeplex.com/mef](http://www.codeplex.com/mef)上的托管可扩展性框架。它是一个有助于创建可扩展应用程序的框架。创建可插拔应用程序时，它会处理所有管道。我目前正在写一系列文章，在[http://www.jenswinter.com/?tag=/mef](http://www.jenswinter.com/?tag=/mef)上展示 mef 的基本功能。但是这些文章是德文的。

您应该尝试的另一个框架是[CompositeWpf](http://www.codeplex.com/CompositeWpf) (fka Prism)。它让您创建复合 WPF 应用程序。您的应用程序将由一个外壳应用程序和几个模块项目组成，这些模块项目连接在一起并挂接到外壳程序中。

# c++ - C++ CLI 是 C++ 的超集吗？

> ID：179684
> 
> 赞同：13
> 
> 时间：2008-10-07T18:10:03.400
> 
> 标签：c++, c++-cli, clr

C++ [CLI](http://en.wikipedia.org/wiki/Common_Language_Infrastructure)编译器是否能够在不修改的情况下编译一些大型 C++ 类集？

C++ CLI 是 C++ 的超集吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-07T18:14:03.967

根据[维基百科](http://en.wikipedia.org/wiki/C%2B%2B/CLI "维基百科")：

> C++/CLI 应该被认为是一种自己的语言（例如，使用一组新的关键字），而不是面向 C++ 超集的托管 C++

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-07T19:11:09.530

技术上没有，但取决于 C++ 代码的标准，你可能会很好。当你进入 Windows 的东西时，你可能会遇到问题。我曾经在 C++/CLI 中编译过我们在工作中使用的整个游戏引擎，它工作得很好。一位同事对所有 Mozilla 都做了同样的事情，但没有这样的运气。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-29T20:56:08.533

我对 C++/CLI 的学习曲线还是个新手——但我自己也有同样的问题，到目前为止我已经确定 C++/CLI 作为一种语言是标准 C++ 的超集。

如果您不使用 CLI 扩展，您的 C++ 代码最终将成为本机非托管代码，并且应该基本相同，但编译为 CLR IL，而不是本机 x86。

一旦您开始使用 CLI 扩展（并开始使用对象/句柄/托管类），您就开始与底层 CLR 平台进行更频繁的交互。到那时，它本质上就变成了一种新的“语言”，您必须将您的想法区分为“非托管”方面和“托管”方面。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-10-24T00:25:33.633

C++/CLI 不是 C++ 的超集。它是一个带有添加的子集。EG C++/CLI 不支持多重继承。

安杰洛

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T05:02:26.637

Marcus Heege 的书“Expert C++/CLI.NET for Visual C++ Programmers”的第 3 页指出：

> C++/CLI 是对 C++ 语言进行的一组扩展，可从 CLI 的实现提供的服务中受益。

在同一页面下方：

> C++/CLI 是 C++ 语言的超集。

他的优秀著作可从[这里](http://int6.net/ebook/Expert.Cpp.Cli.NET.pdf)免费获得。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-04T09:13:44.963

我能够将整个 Qt 库（很大）编译为 C++/CLI，只需*稍作*修改（主要是在构建环境中，但也修复了 Qt 源代码中的一个错误）

# c++-cli - 如果支持像 C# 和 VB.NET，你会使用 C++/CLI 吗？

> ID：179690
> 
> 赞同：3
> 
> 时间：2008-10-07T18:11:24.503
> 
> 标签：c++-cli

我一直喜欢 C++/CLI。也许是因为没有多少开发人员使用它......或者只是因为它不同。

假设 Microsoft 完全支持 C++/CLI，就像他们支持 VB.NET 和 C#（即 LINQ、WPF 等）一样。你会用吗？

如果不是，为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-10-07T18:17:14.133

我*确实*使用它。即使相对缺乏工具支持，它在处理 Win32 方面仍然胜过原始 P/Invoke。

至于 LINQ，我真的不想看到更多的 C++ 语言被黑。LINQ 可以按原样使用——如果他们要增强编译器，他们应该在 C++ 0x 支持上工作......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-07T18:29:50.193

这一切都是为了使用正确的工具来完成正确的工作。我使用 C++/CLI 进行平台互操作工作，因为更容易正确地进行编组。我将 C# 用于几乎所有其他 .NET 工作，以及一些 VB.Net（我喜欢内联 XML）。我承认我还没有学习 IronRuby、IronPython、F# 或任何其他 .NET 语言，但我正在认真考虑它只是为了增加我的编程库。

为了回答这个问题，我认为我不会再使用它了，因为我觉得我已经将它用于最适合的工作。在我看来，C# 仍然是最好的 .NET 语言，因为它是专门为该平台设计的，而不是硬塞一种旧语言来适应它。为 C++/CLI 添加更好的支持只会减少我的开发时间，而不是影响我对另一种语言的使用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-07T18:36:19.430

C++/CLI 非常有效地兑现了统一托管和非托管代码的承诺。它可以让您公开感觉就像是一个完美的原生 C# 库，“内部”可以 100% 访问原生 C++/库。这不是一个优雅的练习，而是在实用编程工具的历史中比较什么？

如果您需要 LINQ 和 WPF，只需使用 C#。这就是 C++/CLI 的美妙之处：编写托管包装器，然后返回 C#。我没有看到 C++/CLI 打算在日常使用中替换 C#。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-10-07T18:44:33.453

> ...但我并不完全清楚 C++/CLI 提供了 C# 没有提供的功能。——@[托马斯·欧文斯](https://stackoverflow.com/questions/179690/would-you-use-ccli-if-supported-like-c-vbnet#179704)

一个巨大的好处（在我的书中）是 RAII（请参阅[Adam Wright](https://stackoverflow.com/users/1200/adam-wright)对我关于[.NET 中的 RAII 的](https://stackoverflow.com/questions/173670/why-is-there-no-raii-in-net)问题的[回答](https://stackoverflow.com/questions/173670/why-is-there-no-raii-in-net#173845)）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-07T18:15:05.150

也许......但我并不完全清楚 C++/CLI 提供了 C# 没有提供的内容。也许是指针？我已经用 C# 完成了我所有的 .NET 编程（我做过的很少），并且我开始学习 F#，但是如果它得到完全支持并且有充分的文档记录，当然，我会试一试。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-07T18:22:17.087

我将 C++/CLI 与 MFC 混合以利用 WPF 和 XAML，但我使用的是新的 C++ 2008 功能包——免费功能区组件。:)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-07T19:38:37.150

我不会使用它，因为我不想被绑定到一个巨大的运行时。而且我不喜欢所有那些 ^ 指针的东西 :)

不过，我确实喜欢/怀念 .NET 提供的出色库。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-09-30T10:42:54.267

我用它来支持遗留代码以及在托管代码和本机代码之间编写填充程序。喜欢VS11更好地支持它

# c# - 在 C# 中以字符串形式获取类的名称

> ID：179700
> 
> 赞同：68
> 
> 时间：2008-10-07T18:14:46.120
> 
> 标签：c#, entity-framework

有没有办法获取类名并将其转换为 C# 中的字符串？

作为 Entity Framework 的一部分，.Include 方法接受一个以点分隔的字符串列表，以便在执行查询时加入。我有想要加入的类模型，出于重构和未来代码维护的原因，我希望在引用此类时能够具有编译时安全性。

因此，有没有办法可以做到这一点：

```
class Foo
{
}

tblBar.Include ( Foo.GetType().ToString() ); 
```

我不认为我可以在没有实例的情况下执行 GetType()。有任何想法吗？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2008-10-07T18:17:22.340

`.GetType()`没有实例就不能使用，因为`GetType`它是一种方法。

您可以像这样从类型中获取名称：

```
typeof(Foo).Name 
```

正如克里斯所指出的，如果您需要程序集限定名称，您可以使用

```
typeof(Foo).AssemblyQualifiedName 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-10-07T18:21:19.757

[Include 需要属性名](http://msdn.microsoft.com/en-us/library/bb738708.aspx)，而不是类名。因此，它是您想要的属性的名称，而不是其类型的名称。 [你可以通过反射得到](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.aspx)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-02T14:21:10.150

你也可以这样做：

```
Type CLASS = typeof(MyClass); 
```

然后你可以访问名称、命名空间等。

```
 string CLASS_NAME = CLASS.Name;
 string NAMESPACE = CLASS.Namespace; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-07T18:17:44.007

```
typeof(Foo).ToString() 
```

?

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-02-15T15:07:53.060

或者使用`typeof(Foo).ToString()`，您可以使用[nameof()](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/nameof)：

```
nameof(Foo) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-07-15T19:06:20.893

您可以使用 an`DbSet<contact>`而不是`ObjectSet<contact>`，因此您可以使用 lambda 作为参数，例如`tblBar.Include(a => a.foo)`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-19T19:15:40.370

另一种使用反射的替代方法是使用 MethodBase 类。

在您的示例中，您可以添加一个静态属性（或方法），为您提供所需的信息。就像是：

```
class Foo
{
    public static string ClassName
    {
        get
        {
            return MethodBase.GetCurrentMethod().DeclaringType.Name;
        }
    }
} 
```

这将允许您在不生成类型实例的情况下使用它：

```
tblBar.Include(Foo.ClassName); 
```

在运行时会给你：

```
tblBar.Include("Foo"); 
```

# c# - 将虚拟列添加到强类型数据集

> ID：179706
> 
> 赞同：2
> 
> 时间：2008-10-07T18:15:31.033
> 
> 标签：c#, ado.net, dataset, strongly-typed-dataset

我正在编写一个使用强类型数据集的网站。

创建该表的 DBA 为一列提供了一个表示负数的值。该列是“Do_Not_Estimate_Flag”，其中该列可以包含“T”或“F”。我无法更改基础表或填充它的逻辑。我想要做的是在我的强类型数据集的 DataRow 中添加一个“ESTIMATION_ALLOWED”列。我已经使用可以修改的部分类完成了这项工作。（我可以安全地修改自动生成的部分类和非自动生成的部分类。）逻辑在部分类的属性中。麻烦的是，当值加载ala

```
<%#DataBinder.Eval(Container.DataItem, "ESTIMATION_ALLOWED")%> 
```

它直接进入底层 DataRow 忽略我的财产。我怎样才能最好地达到预期的结果？

这是我的代码：

部分类 MyFunkyDataTable {

```
 private System.Data.DataColumn columnESTIMATION_ALLOWED;
        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
        public System.Data.DataColumn ESTIMATION_ALLOWEDColumn
        {
            get
            {
                return columnESTIMATION_ALLOWED;
            }
        }

        public override void EndInit()
        {

            //init class
            columnESTIMATION_ALLOWED = new System.Data.DataColumn("ESTIMATION_ALLOWED", typeof(string), null, global::System.Data.MappingType.Element);
            Columns.Add(columnESTIMATION_ALLOWED);
            columnESTIMATION_ALLOWED.ReadOnly = true;

            //init Vars
            columnESTIMATION_ALLOWED = Columns["ESTIMATION_ALLOWED"];
            base.EndInit();
        }

    }
    partial class MyFunkyRow 
    {
        public string ESTIMATION_ALLOWED
        {
            get
            {
                if(DO_NOT_EST_FLAG == "N")
                {
                    return "Yes";
                }
                return "No";
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-07T18:47:55.490

DataBinder 将看到您绑定到 DataRow 并使用其字段而不是您定义的任何属性。

您可以创建一个方法来做您想做的事，例如：

```
<%#FormatFlag(DataBinder.Eval(Container.DataItem, "Do_Not_Estimate_Flag" ))%> 
```

你有一个方法：

```
protected string FormatFlag(object doNotEstimateFlag)
{
    if (doNotEstimateFlag.ToString() == "N") return "Yes";
    return "No";
} 
```

另一种方法是修改填充 DataTable 的查询。例如，您可以在键入的数据集中有一列“ESTIMATE_ALLOWED”。填充它的查询如下所示（依赖于数据库，这是针对 SQL Server 的）：

```
SELECT
   ...
   CASE WHEN Do_Not_Estimate_Flag = 'N' THEN 'Yes' ELSE 'No' END ESTIMATE_ALLOWED,
   ...
FROM
   ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-08-02T19:09:34.167

如果我记得，ST 数据集数据行是在部分类中实现的。因此，您可以在主 ST 数据集行类的部分类中添加您需要的功能。

# iphone - 如何在 iPhone 上找到换行文本的 Rect？

> ID：179708
> 
> 赞同：1
> 
> 时间：2008-10-07T18:16:37.847
> 
> 标签：iphone, layout, text

任何人都可以推荐一种确定 iPhone 上某些包装文本的 Rect 的好方法吗？我已经尝试了 2.1 SDK 中 NSString 的所有内置方法，但均无济于事。size 方法永远不会返回允许我在自定义视图中完全适应包装文本的大小。

我正在绘制一些用户可自定义的文本，这些文本应始终在我的自定义视图范围内尽可能大。如果我可以确定为给定的最大宽度和字体大小完全包围包装文本所需的矩形，我可以提高或降低字体大小，直到文本大到足以完全填充自定义视图而不会被剪裁。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-07T19:29:06.687

NSString 的 sizeWithFont:constrainedToSize: 方法可能有用：

```
CGSize sizeForText = [theText sizeWithFont:theFont constrainedToSize:CGSizeMake(myMaxWidth, 9999)]; 
```

你说你已经尝试了所有的尺寸方法，但根据你的描述，这听起来像你正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-07T19:38:28.867

既然你知道你的视图大小，调用 NSString 的 sizeWithFont:forWidth:lineBreakMode:，从你的最小字体大小、视图宽度和 UILineBreakModeWordWrap 开始。然后增加字体大小，直到返回的大小与您的视图一样高。

如果要设置最大字体大小，也可以将其实现为二进制搜索，而不是增加字体大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-26T16:17:36.573

我发现每当您设置 UITextView 的 text 属性时，它都会更新其 contentSize 属性。这使得调整文本视图框架的大小以在滚动视图等中显示变得非常容易。

# javascript - 如何使用 jQuery 更改超链接的 href 属性

> ID：179713
> 
> 赞同：1394
> 
> 时间：2008-10-07T18:17:33.977
> 
> 标签：javascript, html, jquery, hyperlink

如何`href`使用 jQuery 更改超链接的属性（链接目标）？

* * *

## 回答 #1

> 赞同：1991
> 
> 时间：2008-10-07T18:19:42.817

使用

```
$("a").attr("href", "http://www.google.com/") 
```

将修改所有超链接的 href 以指向 Google。不过，您可能想要一个更精致的选择器。例如，如果您混合了链接源（超链接）和链接目标（又名“锚”）锚标签：

```
<a name="MyLinks"></a>
<a href="http://www.codeproject.com/">The CodeProject</a> 
```

...那么您可能不想不小心`href`为它们添加属性。为了安全起见，我们可以指定我们的选择器将只匹配`<a>`具有现有`href`属性的标签：

```
$("a[href]") //... 
```

当然，您可能会有更有趣的想法。如果您想将锚点与特定的现有 匹配`href`，您可以使用如下内容：

```
$("a[href='http://www.google.com/']").attr('href', 'http://www.live.com/') 
```

这将找到`href`与字符串完全匹配的链接`http://www.google.com/`。一个更复杂的任务可能是匹配，然后只更新部分`href`：

```
$("a[href^='http://stackoverflow.com']")
   .each(function()
   { 
      this.href = this.href.replace(/^http:\/\/beta\.stackoverflow\.com/, 
         "http://stackoverflow.com");
   }); 
```

第一部分仅选择 href以 .*开头*的链接`http://stackoverflow.com`。然后，定义了一个函数，该函数使用一个简单的正则表达式将这部分 URL 替换为新的部分。请注意这给您带来的灵活性 - 可以在此处对链接进行任何形式的修改。

* * *

## 回答 #2

> 赞同：304
> 
> 时间：2011-06-14T18:28:39.100

使用 jQuery 1.6 及更高版本，您应该使用：

```
$("a").prop("href", "http://www.jakcms.com") 
```

`prop`和之间的区别在于`attr`抓取`attr`HTML 属性而`prop`抓取 DOM 属性。

您可以在这篇文章中找到更多详细信息：[.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)

* * *

## 回答 #3

> 赞同：87
> 
> 时间：2008-10-07T18:20:45.687

`attr`在您的查找中使用该方法。您可以使用新值切换任何属性。

```
$("a.mylink").attr("href", "http://cupcream.com"); 
```

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2015-01-19T00:51:29.060

[尽管 OP 明确要求提供 jQuery 答案，但如今您不需要对所有事情都使用 jQuery。]

## 一些没有 jQuery 的方法：

*   如果要更改***所有***`href`元素的值，请全部选择它们，然后遍历[节点列表](https://developer.mozilla.org/en-US/docs/Web/API/NodeList)：（[**示例）**](http://jsfiddle.net/kqw7h1nq/) *`<a>`[](http://jsfiddle.net/kqw7h1nq/)*

     ***```
    var anchors = document.querySelectorAll('a');
    Array.prototype.forEach.call(anchors, function (element, index) {
        element.href = "http://stackoverflow.com";
    }); 
    ```*** 
****   如果要更改所有实际具有属性`href`的元素的值，请通过添加属性选择器 ( ) 来选择它们：（[**示例）**](http://jsfiddle.net/pLkr9497/)`<a>``href``[href]``a[href]`[](http://jsfiddle.net/pLkr9497/)

     **```
    var anchors = document.querySelectorAll('a[href]');
    Array.prototype.forEach.call(anchors, function (element, index) {
        element.href = "http://stackoverflow.com";
    }); 
    ```** ***   如果要更改*包含*`href`特定值的`<a>`元素的值，例如，请使用属性选择器：（[**示例）**](http://jsfiddle.net/eLw5svh2/)*`google.com``a[href*="google.com"]`[](http://jsfiddle.net/eLw5svh2/)*

     ***```
    var anchors = document.querySelectorAll('a[href*="google.com"]');
    Array.prototype.forEach.call(anchors, function (element, index) {
        element.href = "http://stackoverflow.com";
    }); 
    ```

    同样，您也可以使用其他[属性选择器](https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors)。例如：

    *   `a[href$=".png"]`可用于选择值以 . 结尾的`<a>`元素。`href``.png`

    *   `a[href^="https://"]`可用于选择值以 . 为*前缀*的`<a>`元素。`href`*`https://`**** *****   如果要更改满足多个条件`href`的元素的值：（[**示例）**](http://jsfiddle.net/8fxekxLu/)`<a>`[](http://jsfiddle.net/8fxekxLu/)

     **```
    var anchors = document.querySelectorAll('a[href^="https://"], a[href$=".png"]');
    Array.prototype.forEach.call(anchors, function (element, index) {
        element.href = "http://stackoverflow.com";
    }); 
    ```*********** 

 **********..在大多数*情况下不需要正则表达式。

* * *

## 回答 #5

> 赞同：44
> 
> 时间：2008-10-17T17:58:41.657

根据您是想将所有相同的链接更改为其他内容，还是只想控制页面给定部分中的链接或单独控制每个链接，您可以执行其中之一。

将所有指向 Google 的链接更改为指向 Google 地图：

```
<a href="http://www.google.com">

$("a[href='http://www.google.com/']").attr('href', 
'http://maps.google.com/'); 
```

要更改给定部分中的链接，请将容器 div 的类添加到选择器中。此示例将更改内容中的 Google 链接，但不会更改页脚：

```
<div class="content">
    <p>...link to <a href="http://www.google.com/">Google</a>
    in the content...</p>
</div>

<div class="footer">
    Links: <a href="http://www.google.com/">Google</a>
</div>

$(".content a[href='http://www.google.com/']").attr('href', 
'http://maps.google.com/'); 
```

要更改单个链接而不考虑它们在文档中的位置，请将 id 添加到链接，然后将该 id 添加到选择器。此示例将更改内容中的第二个 Google 链接，但不会更改第一个或页脚中的链接：

```
<div class="content">
    <p>...link to <a href="http://www.google.com/">Google</a>
    in the content...</p>
    <p>...second link to <a href="http://www.google.com/" 
        id="changeme">Google</a>
    in the content...</p>
</div>

<div class="footer">
    Links: <a href="http://www.google.com/">Google</a>
</div>

$("a#changeme").attr('href', 
'http://maps.google.com/'); 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2018-03-30T04:51:53.060

这样做的简单方法是：

**[Attr 函数](http://api.jquery.com/attr/#attr2)（从 jQuery 版本 1.0 开始）**

```
$("a").attr("href", "https://stackoverflow.com/") 
```

或者

**[道具功能](http://api.jquery.com/prop/#prop2)（自 jQuery 版本 1.6 起）**

```
$("a").prop("href", "https://stackoverflow.com/") 
```

此外，上述方式的优点是，如果选择器选择单个锚点，它将仅更新该锚点，如果选择器返回一组锚点，它将仅通过一个语句更新特定组。

现在，有很多方法可以识别准确的锚点或锚点组：

**很简单的：**

1.  通过标签名称选择锚点：`$("a")`
2.  通过索引选择锚点： `$("a:eq(0)")`
3.  为特定类选择锚点（如在此类中仅锚点与 class `active`）：`$("a.active")`
4.  `profileLink` 选择具有特定 ID（此处为示例ID）的锚点：`$("a#proileLink")`
5.  选择第一个锚href：`$("a:first")`

**更有用的：**

6.  选择所有具有 href 属性的元素：`$("[href]")`
7.  选择具有特定 href 的所有锚点：`$("a[href='www.stackoverflow.com']")`
8.  选择所有没有特定 href 的锚点：`$("a[href!='www.stackoverflow.com']")`
9.  选择包含特定 URL 的 href 的所有锚点：`$("a[href*='www.stackoverflow.com']")`
10.  选择以特定 URL 开头的所有带有 href 的锚点：`$("a[href^='www.stackoverflow.com']")`
11.  选择所有以特定 URL 结尾的 href 锚点：`$("a[href$='www.stackoverflow.com']")`

现在，如果你想修改特定的 URL，你可以这样做：

例如，如果您想为所有访问 google.com 的 URL 添加代理网站，您可以按如下方式实现：

```
$("a[href^='http://www.google.com']")
   .each(function()
   { 
      this.href = this.href.replace(/http:\/\/www.google.com\//gi, function (x) {
        return "http://proxywebsite.com/?query="+encodeURIComponent(x);
    });
   }); 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2010-12-10T06:25:44.670

当单击“menu_link”类的链接时调用此代码段，并显示链接的文本和 url。return false 防止链接被跟踪。

```
<a rel='1' class="menu_link" href="option1.html">Option 1</a>
<a rel='2' class="menu_link" href="option2.html">Option 2</a>

$('.menu_link').live('click', function() {
   var thelink = $(this);
   alert ( thelink.html() );
   alert ( thelink.attr('href') );
   alert ( thelink.attr('rel') );

   return false;
}); 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2016-09-01T16:17:17.283

停止使用 jQuery 只是为了它！仅使用 JavaScript 就非常简单。

```
document.querySelector('#the-link').setAttribute('href', 'http://google.com'); 
```

[https://jsfiddle.net/bo77f8mg/1/](https://jsfiddle.net/bo77f8mg/1/)

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2019-01-19T01:16:02.250

`href`在属性中，因此您可以使用纯 JavaScript 更改它，但是如果您已经在页面中注入了 jQuery，请不要担心，我会以两种方式显示它：

想象一下你在`href`下面有这个：

```
<a id="ali" alt="Ali" href="http://dezfoolian.com.au">Alireza Dezfoolian</a> 
```

你想改变它的链接......

使用没有任何库的**纯 JavaScript**，您可以执行以下操作：

```
document.getElementById("ali").setAttribute("href", "https://stackoverflow.com"); 
```

但在**jQuery**中你也可以这样做：

```
$("#ali").attr("href", "https://stackoverflow.com"); 
```

或者

```
$("#ali").prop("href", "https://stackoverflow.com"); 
```

在这种情况下，如果您已经注入了 jQuery，那么 jQuery 可能看起来更短并且更跨浏览器......但除此之外，我选择了那个`JS`......

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-07-13T11:40:28.557

```
 $("a[href^='http://stackoverflow.com']")
   .each(function()
   { 
      this.href = this.href.replace(/^http:\/\/beta\.stackoverflow\.com/, 
         "http://stackoverflow.com");
   }); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-03-24T17:47:05.617

# 更改 Wordpress Avada 主题徽标图像的 HREF

如果您安装 ShortCode Exec PHP 插件，您可以创建这个我称之为 myjavascript 的 Shortcode

```
?><script type="text/javascript">
jQuery(document).ready(function() {
jQuery("div.fusion-logo a").attr("href","tel:303-985-9850");
});
</script> 
```

您现在可以转到外观/小部件并选择一个页脚小部件区域并使用文本小部件添加以下短代码

```
[myjavascript] 
```

选择器可能会根据您使用的图像以及它是否已准备好视网膜而改变，但您始终可以使用开发人员工具找出它。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2021-11-22T10:48:21.777

试试这个;

```
$("#link").attr("href", "https://coenvink.com/") 
```

代码功能的细分：

```
$("#link") 
```

这部分代码获取 id 为“Link”的元素。在此之后，您将属性“href”（witch 基本上是链接到 url）设置为您的新 url，在这种情况下，witch 是我自己的网站：

```
.attr("href", "https://coenvink.com/") 
```

我希望现在很清楚！

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-06-21T19:00:53.617

尝试

```
link.href = 'https://...' 
```

```
link.href = 'https://stackoverflow.com'
```

```
<a id="link" href="#">Click me</a>
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-04-12T10:18:08.957

```
<a class="link">My Link</a>
<script>
$(document).ready(function(){
    $("a.link").attr("href", "https://toptruyenfull.com/")
})
</script> 
```

# python - Python中日期之间的平均差异

> ID：179716
> 
> 赞同：4
> 
> 时间：2008-10-07T18:18:48.450
> 
> 标签：python, algorithm, datetime

我有一系列日期时间对象，想计算它们之间的平均增量。

例如，如果输入是`(2008-10-01 12:15:00, 2008-10-01 12:25:00, 2008-10-01 12:35:00)`，那么平均 delta 正好是 00:10:00 或 10 分钟。

关于如何使用 Python 进行计算的任何建议？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-10-07T18:26:46.063

就算法而言，这是一个简单的算法。只需找到最大和最小日期时间，取差值，然后除以您查看的日期时间数。

如果你有一个日期时间数组，你可以这样做：

```
mx = max(a)
mn = min(a)
avg = (mx-mn)/(len(a)-1) 
```

取回平均差。

编辑：修复了一个错误

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-08T03:33:47.473

说`a`是你的清单

```
sumdeltas = timedelta(seconds=0)
i = 1
while i < len(a):
    sumdeltas += a[i-1] - a[i]
    i = i + 1

avg_delta = sumdeltas / (len(a) - 1) 
```

这确实会将您的增量平均在一起。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-07T18:32:46.317

由于您似乎在示例中丢弃了时间 1 和 3 之间的 20 分钟增量，我想说您应该只对日期时间列表进行排序，将相邻时间之间的增量相加，然后除以 n-1。

您有任何代码可以与我们分享，以便我们帮助您调试吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T18:32:56.160

您可以从前一个日期中减去每个连续的日期（产生一个 timedelta 对象，它表示以天、秒为单位的差异）。然后，您可以平均 timedelta 对象以找到您的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-10-15T10:04:17.727

小澄清

```
from datetime import timedelta

def avg(a):
    numdeltas = len(a) - 1
    sumdeltas = timedelta(seconds=0)

    i = 1
    while i < len(a):
        delta = abs(a[i] - a[i-1])
        try:
            sumdeltas += delta
        except:
            raise
        i += 1
    avg = sumdeltas / numdeltas
    return avg 
```

# linux - 在任何 linux 文件系统上是否有类似备用数据流的东西？

> ID：179720
> 
> 赞同：23
> 
> 时间：2008-10-07T18:20:54.187
> 
> 标签：linux, filesystems, ntfs, alternate-data-stream

在 Windows NTFS 上，我最近在一个爱好开发项目中使用了一个很好但大部分未使用的功能，称为“备用数据流”（ADS）。

在 Mac HFS+ 上，还有一个类似的不错但大多未使用的功能，称为“命名分叉”。

我正在考虑把这个项目移植到Linux上，但不知道linux上的Filesystem有没有这样的功能？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-10-07T18:56:54.240

Windows 和 Linux（以及其他操作系统）上都有支持扩展属性 (EA) 的文件系统。为 OS/2 兼容添加了 Windows 支持，并且没有任何文档化接口，除了通过备份 API 的 hacky 方法（这就是 Cygwin 所做的）。EA 旨在仅存储小值。在 Windows 上，每个 EA 都有一个 ASCII 名称（而几乎所有其他名称都是 Unicode），并且文件中所有 EA 的组合大小不能大于 64k。EA 不是文件：您无法打开 EA 的文件句柄并像普通文件一样读取它。

备用数据流是 NTFS 提供的一项单独功能，它允许您在文件内提供备用子文件。每个文件都有一个默认的未命名数据流，它会自动打开，除非您指定另一个文件。您可以打开 ADS 的句柄并像普通文件一样读取（甚至执行）它，使用单个 (Unicode) 文件名。ADS 可以与任何磁盘文件一样大。

据我所知，Linux 上没有 ADS 的精确模拟，但如果数据值很小，您可以在 Linux 端口上使用 EA。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-10-07T18:33:39.873

ADS 的问题在于，Windows 将在移动到任何非 NTFS 文件系统的第二次“丢失”这些 ADS 流。它不认为这些流很重要，因此通常不会保留它们。当通过网络共享、刻录到 CD、放入 USB 驱动器等时，您会发现它们无法访问或消失...

总而言之，除非您对应用程序的关注范围非常狭窄（始终在 NTFS 上），否则我会完全避免使用 ADS 流。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-10-07T18:51:52.283

一些文件系统支持扩展属性，特别是 XFS 和（我认为）JFS；但大小有限（XFS 中为 64k）。Reiser4 支持任意大小的分叉；但我所知道的任何发行版都不支持它。另一个选择是 ZFS，同样不是很实用。

最后，只使用目录可能更明智。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T18:24:50.547

大多数 Linux 文件系统都有`extended attributes`. 我不熟悉 NTFS 流，所以无法比较两者。大多数文件系统需要挂载标志以启用扩展属性，因此这可能不适用于任何人的系统。它们通常缩写为`xattr`或`xattrs`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-07T18:25:48.967

我唯一知道的，有点朝那个方向发展的是[扩展属性](http://acl.bestbits.at/about.html)，但从我读到的关于 ADS 的内容来看，它是 def。不是一回事。你到底是用来做什么的？

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-10-07T18:25:49.840

常用的 Linux 文件系统不支持这一点。相反，您可以使用多个文件和合适的命名方案（可能只需将流索引附加到每个文件名），或包含多个文件的存档；无论如何，您会发现这种方法在其他方面更好 - 例如，如果有人想将文件 Windows 备份到具有非 NTFS 文件系统的介质，在 Windows 上会发生什么？

# c++ - 在 C++ 中实现断言检查的最佳方法是什么？

> ID：179723
> 
> 赞同：21
> 
> 时间：2008-10-07T18:21:18.413
> 
> 标签：c++, debugging, assert, debugbreak

我的意思是，我需要做什么才能在我的代码中使用有用的断言？

MFC 很简单，我只使用 ASSERT(something)。

什么是非MFC方式？

**编辑：**是否可以停止断言在 assert.c 中的中断而不是我的名为 assert() 的文件？

**编辑：**`<assert.h>` &之间有什么区别`<cassert>`？

**接受的答案：**这篇文章中有很多很好的答案，我希望我能接受多个答案（或者有人会将它们全部结合起来）。所以答案被授予费鲁乔（第一个答案）。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-10-07T18:23:00.360

```
#include <cassert>

assert(something); 
```

对于编译时检查，Boost 的静态断言非常有用：

```
#include <boost/static_assert.hpp>

BOOST_STATIC_ASSERT(sizeof(int) == 4);  // compile fails if ints aren't 32-bit 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-10-07T19:03:27.520

这取决于您是否正在寻找在 Visual C++ 之外工作的东西。它还取决于您要查找的断言类型。

有几种类型的断言：

1.  **预处理器**
    这些断言是使用预处理器指令完成的 预`#error`
    处理器断言只在预处理阶段进行评估，因此对模板等东西没有用处。

2.  **执行时间**
    这些断言是使用执行时间中`assert()`定义的函数完成的，`<cassert>`
    断言仅在运行时进行评估。正如 BoltBait 指出的那样，如果`NDEBUG`宏已定义，则不会编译。

3.  **正如您所说，静态**
    这些断言是通过使用`ASSERT()`宏完成的，但前提是您使用的是 MFC。我不知道另一种方法来执行作为 C/C++ 标准一部分的静态断言，但是，Boost 库提供了另一种解决方案：`static_assert`. Boost 库中
    的函数将被添加到[C++0x 标准](http://en.wikipedia.org/wiki/C++0x)中。`static_assert`

作为附加警告，`assert()`Ferruccio 建议的函数与 MFC`ASSERT()`宏的行为不同。前者是执行时断言，而后者是静态断言。

我希望这有帮助！

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-10-07T21:22:27.893

## 断言（通常）仅调试

“断言”的问题在于它通常在调试二进制文件中，并且一些开发人员使用它们，就好像代码仍在生产中一样。

这本身并不邪恶，因为代码应该经过密集测试，因此肯定会发现并删除产生断言的错误。

但有时（大多数时候？），测试并不像想要的那样密集。我不会谈论直到最后一刻我们必须编码的旧工作（*不要问......有时，经理只是......嗯......*）......断言你有什么意义添加到将在下一分钟编译并作为发布二进制文件交付给客户端的代码？

## 在（某些）现实生活应用程序中断言

在我们的团队中，我们需要一些东西来检测错误，同时需要其他东西来处理错误。我们可能在 Release Build 中需要它。

Assert 将仅在调试构建时检测和处理错误。

所以我们添加了一个 XXX_ASSERT 宏和一个 XXX_RAISE_ERROR 宏。

XXX_ASSERT 宏与 ASSERT 宏做同样的事情，但它会在 Debug 和 Release 中构建。它的行为（写日志、打开消息框、什么都不做等）可以由 .INI 文件控制，然后，它将中止/退出应用程序。

这被用作：

```
bool doSomething(MyObject * p)
{
   // If p is NULL, then the app will abort/exit
   XXX_ASSERT((p != NULL), "Hey ! p is NULL !") ;

   // etc.
} 
```

XXX_RAISE_ERROR 宏只会“记录”错误，但不会尝试处理它。这意味着它可以将消息记录在文件中和/或打开带有消息的 MessageBox 和一个按钮继续，另一个按钮启动调试会话（根据 .INI 文件配置）。这被用作：

```
bool doSomething(MyObject * p)
{
   if(p == NULL)
   {
      // First, XXX_RAISE_ERROR will alert the user as configured in the INI file
      // perhaps even offering to open a debug session
      XXX_RAISE_ERROR("Hey ! p is NULL !") ;
      // here, you can handle the error as you wish
      // Than means allocating p, or throwing an exception, or
      // returning false, etc.
      // Whereas the XXX_ASSERT could simply crash.
   }

   // etc.
} 
```

在我们的库中引入它们一年后，只使用了 XXX_RAISE_ERROR。当然，它不能用于应用程序的时间关键部分（我们有一个 XXX_RAISE_ERROR_DBG），但在其他任何地方，它都很好。并且可以使用任何首选的错误处理，并且可以在开发人员计算机、测试人员甚至用户上随意激活它，这一事实非常有用。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-10-07T18:42:07.797

要在第二次“编辑”中回答问题：

<assert.h> 是 C 头文件

<cassert> 是 C++ 标准库头文件...它通常包括 <assert.h>

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-10-07T19:06:09.090

## 基本断言用法

```
#include <cassert>

/* Some code later */
assert( true ); 
```

### 最佳实践笔记

断言用于识别*应该为 true 的运行时状态*。结果，它们在发布模式下被编译出来。

如果您希望断言始终命中，则可以将 false 传递给它。例如：

```
switch ( someVal ):
{
case 0:
case 1:
  break;
default:
  assert( false ); /* should never happen */
} 
```

也可以通过 assert 传递消息：

```
assert( !"This assert will always hit." ); 
```

成熟的代码库经常扩展断言功能。一些常见的扩展包括：

*   在每个模块的基础上切换断言以本地化测试。
*   创建在大多数调试版本中编译出来的附加断言宏。这对于被非常频繁地调用（每秒数百万次）并且不太可能不正确的代码是可取的。
*   允许用户禁用当前命中的断言、编译单元中的所有断言或代码库中的所有断言。这会阻止良性断言被触发，从而创建不可用的构建。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-10-07T18:36:34.437

要中断调用断言的文件，您可以使用引发异常或调用的自定义宏`__debugbreak`：

```
#define MYASSERT(EXPR, MSG) if (!(EXPR)) throw MSG; 
```

或者：

```
#define MYASSERT(EXPR) if (!(EXPR)) __debugbreak(); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-10-07T19:56:39.020

**Microsoft 特定的 CRT 断言**

```
#include <crtdbg.h>
#include <sstream>
...
// displays nondescript message box when x <= 42
_ASSERT(x > 42);
// displays message box with "x > 42" message when x <= 42
_ASSERTE(x > 42);
// displays message box with computed message "x is ...!" when x <= 42
_ASSERT_EXPR(
   x > 42, (std::stringstream() << L"x is " << x << L"!").str().c_str()); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-11-17T08:48:23.600

有一个更高级的开源库，称为 ModAssert，它具有适用于 Visual C++ 和 gcc 的断言。可能也在其他编译器上，不确定。学习它需要一些时间，但是如果您想要不依赖于 MFC 的良好断言，请查看这些。它位于[http://sourceforge.net/projects/modassert/](http://sourceforge.net/projects/modassert/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-07T18:55:24.617

使用智能感知在 Visual Studio 中打开它（右键单击）

```
// cassert standard header
#include <yvals.h>
#include <assert.h> 
```

yvals.h 是 Windows 的东西。因此，就 assert() 本身而言，包含它的两种方式是相同的。使用它是一个好习惯，`<cxxx>`因为它通常不是那么简单（命名空间包装和其他魔法）

这对我来说在呼叫者网站上中断了......

这里有[一篇文章](http://powerof2games.com/node/10)解释了为什么你不想自己写这个宏。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-02-10T20:26:46.580

这是我在 C++ 中对断言工具的最新迭代：http: [//pempek.net/articles/2013/11/17/cross-platform-cpp-assertion-library/](http://pempek.net/articles/2013/11/17/cross-platform-cpp-assertion-library/)

这是一个包含 2 个文件的插件库，您可以轻松地将其添加到您的项目中。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-11-20T07:40:24.743

回答提问者的第三个问题：我们使用“cassert”而不是“assert.h”的第一个原因是，在 C++ 的情况下，考虑到 C++ 编译器可能不会在代码中存储函数描述这一事实文件，但在 dll 或编译器本身中。第二个是可能会对函数进行细微的更改，以促进 C 和 C++ 之间的差异，无论是现在还是将来。因为 assert.h 是一个 C 库，所以在 C++ 中首选使用“cassert”。

# c++ - 有哪些关于 2D 游戏引擎设计的好资源？

> ID：179735
> 
> 赞同：11
> 
> 时间：2008-10-07T18:25:03.867
> 
> 标签：c++, directx

我在业余时间使用 C++ 和 DirectX 进行 2D 游戏开发。我发现企业问题域建模方法并没有我想要的那么多帮助；）

我或多或少在寻找与基本游戏引擎设计等效的“最佳实践”。实体应如何相互交互，动画和声音应如何在理想世界中表示，等等。

谁有好的资源可以推荐？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-10-07T22:53:02.673

[Gamedev.net](http://www.gamedev.net)通常是我了解游戏开发社区中其他人在做什么的地方。

也就是说，恐怕你会发现游戏开发中“最佳实践”的想法比大多数人都更加不稳定。游戏往往是如此专业的应用程序，几乎不可能给出任何“一刀切”的答案。对俄罗斯方块有用的东西在小行星上将毫无用处，而对光环完美适用的模型对马里奥来说可能会惨遭失败。

您还会很快发现，对于纹理、网格、关卡、声音或动画格式，没有“行业标准”之类的东西。每个人都只是自己滚动或使用平台方便的任何东西。你偶尔会看到[COLLADA](http://www.collada.org)之类的东西，这很好，但它仍然只是一种中间格式，旨在使编写导出器更容易。

如果您是游戏开发的新手，我的建议是：不要在第一次尝试时就因为代码结构而自杀。尝试一个简单的游戏，比如小行星，然后破解直到它工作，不管代码多么“丑陋”。使用您熟悉的简单格式，而不必担心它们在大型项目中的表现如何。不用担心插件、皮肤、编辑器或任何其他绒毛。让它工作！然后，当你第一次完成所有重要的游戏时，选择另一个，这一次清理你代码的一两个方面（但不要过火！）从那里，迭代！

我向您保证，这将使您比任何数量的在线“正确方式”的探索都更快（这来自一个做过很多探索的人）。

最后给你一个想法：如果你觉得在更明确的空间工作更舒服，看看[XNA](http://creators.xna.com/)或类似的库。他们会预先定义一些要使用的“最佳”格式，并为您提供使用它们的工具，从而消除一些最初的猜测。

祝你好运，最重要的是记住：游戏（及其开发）应该很有趣！不要太沉迷于小事！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-07T18:32:39.623

做一个游戏。完成后，再做一个。看看你喜欢什么和不喜欢什么，然后再做一个。

说真的，你可以阅读所有你想要的游戏设计“最佳实践”指南，但最终归结为体验。获得经验的唯一方法是坐下来编写游戏。在你这样做几次之后，你会*更好*地了解如何编写游戏。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-07T18:49:44.380

几乎所有以[Andre Lamothe](http://www.amazon.com/s/ref=nb_ss_gw_0_10?url=search-alias%3Daps&field-keywords=andre+lamothe&sprefix=andre+lamothe)为撰稿人的书。

[GameDev](http://www.gamedev.net/)也有大量文章。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-04T15:42:25.233

我完全同意你的看法：企业应用程序不会让你为游戏编程做好准备。

我用 python、java、html/php 和 perl 创建了一些小型游戏。您可能知道，游戏的基本结构是：

主循环：
  handleInput()
  updateGameLogic()
  renderImages()

现在，对于单屏、单线程游戏来说，这一切都很好，就像 70 年代或 80 年代的任何游戏一样。但我不认为这种结构特别适合多屏游戏（如 RPG）或其他更奇特的游戏。它的螺纹不太好。由于您需要处理各种输入，因此代码变得非常时髦。它不能很好地扩展。

但是，在我过多地抨击这个比喻之前，请注意这是一个很好的起点。我什至建议学习 Python/Pygame 并开始使用该工具而不是 C++ 构建游戏，这会使设计和实现过程复杂化。当您在 python 中进行原型设计时，您会看到游戏的成型速度更快，并且会遇到与语言无关的问题。

对我来说，游戏编程中最困难、最耗时的方面是图形和声音资产。虽然我有点像音频书呆子和业余音乐家，但创作可信且合适的音乐和 SFX 是一个独立的项目。我没有图形天赋，所以我必须依靠修改现有图像或使用免费提供的图像。幸运的是，有一种广泛可用的免费字体可用于游戏（除此之外几乎没有，因为它们几乎普遍都很糟糕）。

最后，没有什么比开源更能看出其他项目是如何处理这个问题的了。Westnoth之战是一款成熟的中型游戏。你可能想看看那里发生了什么。同样，python 中的游戏经常提供其源代码，因此您可以在那里查看数百个项目。您也可以反编译 atari 2600 ROM，但这不会告诉您太多关于今天的编程。旧的 VCS 是一种专用设备，它以非常依赖于系统的方式处理其应用程序。:-D

最后，我也喜欢 Andre LaMothe。我有他 1993 年的旧书，有 100 万页厚。尽管它仍然是一些通用游戏创意的不错参考，但其中很多都被当时不存在的免费可用库和框架的可用性所消除。

祝你的项目好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-08T03:11:32.493

既然还没有提到，为什么不先看看已经发布到社区的现有引擎呢？既然你说的是 2D，我会回去推荐类似[**Abuse**](http://abuse.zoy.org/browser/abuse/trunk)的东西。是的，它很古老，而且大部分有趣的部分都在 Lisp 中——但是这款游戏在一段时间内变得非常流行，这意味着他们做的事情是正确的。

碰巧的是，我认为这么多原始游戏都是用 Lisp 编写的，这是一个非常有用的教训。选择最强大的语言/工具，不要担心性能。您可以随时优化 C 中的慢速部分。

# c# - 如何将 .NET EXE 反编译为可读的 C# 源代码？

> ID：179741
> 
> 赞同：274
> 
> 时间：2008-10-07T18:27:08.950
> 
> 标签：c#, .net, reverse-engineering, decompiling

几年前，我为客户编写了一个 C# 应用程序，但我不再拥有源代码。我所拥有的只是我在客户端 PC 上部署的 EXE。有没有办法可以从 EXE 生成 C# 源代码？

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2008-10-07T18:28:00.850

[Reflector](http://www.red-gate.com/products/reflector/index.htm)及其插件[FileDisassembler](http://www.denisbauer.com/Home/ReflectorFileDisassembler)。

反射器将允许查看源代码。FileDisassembler 将允许您将其转换为 VS 解决方案。

* * *

## 回答 #2

> 赞同：150
> 
> 时间：2011-10-05T16:38:15.137

当 Red Gate 表示将不再提供 .Net Reflector 的免费版本时，我开始使用[ILSpy](https://github.com/icsharpcode/ILSpy/)和 Telerik 的[JustDecompile](http://www.telerik.com/products/decompiler.aspx)。我发现 ILSpy 的反编译比 JustDecompile（仍处于 Beta 阶段）更准确。Red Gate 改变了他们的决定，仍然有一个免费版本的 .Net Reflector，但现在我喜欢 ILSpy。

从 ILSpy 网站 ( [https://github.com/icsharpcode/ILSpy/](https://github.com/icsharpcode/ILSpy/) )：

[ILSpy](https://github.com/icsharpcode/ILSpy/)是开源的 .NET 程序集浏览器和反编译器。

## ILSpy 功能

*   装配体浏览
*   IL 反汇编
*   反编译为 C#
*   支持 lambdas 和“收益回报”
*   显示 XML 文档
*   资源节约
*   搜索类型/方法/属性（子字符串）
*   基于超链接的类型/方法/属性导航
*   基本/派生类型导航
*   导航历史
*   BAML 到 XAML 反编译器
*   将程序集另存为 C# 项目
*   查找字段/方法的用法
*   可通过插件扩展 (MEF)

**更新：**

2012 年 4 月 15 日，ILSpy 2.0 发布。与 1.0 版本相比的新功能：

*   装配清单
*   支持反编译表达式树
*   支持可空值的提升运算符
*   反编译为 Visual Basic
*   搜索以空格分隔的多个字符串（在 ILSpy.exe 中搜索“Assembly manager”会找到 AssemblyListManager）
*   单击局部变量将突出显示该变量的所有其他出现
*   Ctrl+F 可用于在反编译代码视图中进行搜索

**更新：**

*   ILSpy 2.1 支持 async/await 反编译

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2011-06-07T13:40:27.127

Reflector 一般不再免费，但他们确实向开源开发人员免费提供： [http ://reflectorblog.red-gate.com/2013/07/open-source/](http://reflectorblog.red-gate.com/2013/07/open-source/)

但是像 DevExtras 和 JetBrains 这样的一些公司已经创建了免费的替代品：

[DevExtras 代码反射](http://www.devextras.com/decompiler/)

[JetBrains DotPeek](http://www.jetbrains.com/decompiler/)

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2008-10-07T18:32:08.830

Denis Bauer的 Reflector 和[File Disassembler](http://www.denisbauer.com/NETTools/FileDisassembler.aspx)插件。它实际上从程序集中生成源项目，其中 Reflector 仅显示反汇编的源。

补充：我最近最喜欢的是 JetBrains 的[dotPeek](http://www.jetbrains.com/decompiler/)。

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2011-08-15T19:16:00.133

[Telerik JustDecompile](http://www.telerik.com/products/decompiler.aspx)是免费的，并且具有从 .NET 程序集创建项目的功能。

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2015-03-24T17:24:47.757

我很惊讶没有人提到**微软的[ildasm](https://msdn.microsoft.com/en-us/library/f7dy01k1(v=vs.110).aspx)**。它可能不如 ILSpy 或 Reflector 漂亮，但它与 Visual Studio 一起提供，因此许多开发人员已经拥有它。

要运行它（假设 VS 2013，其他版本应该类似）：

1.  选择开始 > 所有程序 > Visual Studio 2013 > Visual Studio 工具。
2.  双击 VS2013 的开发人员命令提示符。
3.  从生成的命令提示符处运行“ildasm”。
4.  在该工具中，选择文件 > 打开并打开您的可执行文件或 DLL。

现在您可以浏览 DLL 结构。双击班级成员以查看 IL。使用 File > Dump 将 IL 导出到文件。

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2008-10-07T18:28:24.000

你想要[反光板](http://www.red-gate.com/products/reflector/index.htm)。

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2020-09-28T08:53:42.337

我很惊讶没有人提到[dnSpy](https://github.com/0xd4d/dnSpy)。**dnSpy**是一个调试器和 .NET 程序集编辑器。即使您没有任何可用的源代码，您也可以使用它来编辑和调试程序集。

主要特点：

*   调试 .NET 和 Unity 程序集
*   编辑 .NET 和 Unity 程序集
*   明暗主题

它是开源的，也是使用最广泛的点网逆向工程工具之一。

# vb.net - 如何将表单上的所有文本框控件与相同的事件处理程序相关联

> ID：179742
> 
> 赞同：8
> 
> 时间：2008-10-07T18:27:32.910
> 
> 标签：vb.net

VB 2008。

我在一个表单上有几个文本框，我希望它们中的每一个都使用相同的事件处理程序。我知道如何手动将每个连接到处理程序，但我正在寻找一种更通用的方式，因此如果我添加更多文本框，它们将自动连接到事件处理程序。

想法？

编辑：使用来自 MusiGenesis 的 C# 示例（并在 nick 留下的评论的帮助下），我编写了这个 VB 代码：

```
Private Sub AssociateTextboxEventHandler()
  For Each c As Control In Me.Controls
    If TypeOf c Is TextBox Then
      AddHandler c.TextChanged, AddressOf tb_TextChanged
    End If
  Next
End Sub 
```

非常感谢！太好了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-07T18:48:33.913

在表单的加载事件中执行类似的操作（C#，抱歉，但很容易翻译）：

```
private void Form1_Load(object sender, EventArgs e)
{
    foreach (Control ctrl in this.Controls)
    {
        if (ctrl is TextBox)
        {
            TextBox tb = (TextBox)ctrl;
            tb.TextChanged += new EventHandler(tb_TextChanged);
        }
    }

}

void tb_TextChanged(object sender, EventArgs e)
{
    TextBox tb = (TextBox)sender;
    tb.Tag = "CHANGED"; // or whatever
} 
```

它不是正确递归的（例如，它不会在面板上找到文本框），但你明白了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-29T09:23:24.697

“c As Control”没有“TextChanged”事件，所以会抛出错误。您可以将其优化到 Linq 并通过以下方式消除该错误：

```
For Each c As TextBox In Controls.OfType(Of TextBox)()
    AddHandler c.TextChanged, AddressOf tb_TextChanged
Next 
```

但这会避免比你更深层次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-07T18:46:26.383

您可以递归地遍历表单的 OnLoad 中的 Controls 集合，并将事件处理程序分配给您找到的任何文本框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T18:35:22.303

宏可能是可能的，但除此之外，我不知道有任何东西会自动将控件连接到通用处理程序。

我知道的唯一简单方法是选择所有适用的文本框，然后简单地同时为单击事件设置事件处理程序，但这不是自动的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-07T19:18:35.243

我认为这将更新所有文本控件：

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    UpdateControls(Me)
End Sub

Private Sub UpdateControls(ByVal myControlIN As Control)
    Dim myControl

    For Each myControl In myControlIN.Controls
        UpdateControls(myControl)
        Dim myTextbox As TextBox

        If TypeOf myControl Is TextBox Then
            myTextbox = myControl
            AddHandler myTextbox.TextChanged, AddressOf TextBox_TextChanged
        End If
    Next

End Sub

Private Sub TextBox_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs)
    MsgBox("text changed in " & CType(sender, TextBox).Name)
End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-30T13:45:58.533

我在 TabPage-Control 内的许多 GroupBoxes 中有许多 Textboxes。

要添加/定义/删除这些文本框的处理程序，我必须首先遍历标签页，然后遍历每个标签页中的组框，然后我可以访问这些组框内的文本框。

```
' cycle through TabPages ...
For Each page As TabPage In Me.TabControl1.Controls.OfType(Of TabPage)()
    ' in every TabPage cycle through Groupboxes ...
    For Each gbox As GroupBox In page.Controls.OfType(Of GroupBox)()
        ' and in every TextBox inside the actual GroupBox
        For Each tbox As TextBox In gbox.Controls.OfType(Of TextBox)()
            AddHandler tbox.TextChanged, AddressOf _TextChanged
        Next
    Next
Next

Private Sub _TextChanged(sender As System.Object, e As System.EventArgs)
    somethingWasChanged = True
End Sub 
```

# java - HttpServlet为什么要实现Serializable？

> ID：179743
> 
> 赞同：78
> 
> 时间：2008-10-07T18:27:52.410
> 
> 标签：java, session, servlets, serializable

在我对 Servlet 的理解中，Servlet 会被 Container 实例化，它的`init()`方法会被调用一次，并且 Servlet 会像单例一样存活，直到 JVM 关闭。

我不希望我的 servlet 被序列化，因为它会在应用服务器恢复或正常启动时重新构建。servlet 不应包含特定于会话的成员，因此将其写入磁盘并重新实例化是没有意义的。这有实际用途吗？

我担心的是，我在其中放置了一些不可序列化的字段，然后我的应用程序将在将发生不同类型的会话复制的生产环境中神秘地失败。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2008-10-07T18:33:48.280

从技术上讲，我相信允许 servlet 容器将 servlet 对象“钝化”到磁盘，这与 EJB 会话 bean 可以采用的方式类似。因此，如果您的应用程序由于不可序列化的字段而失败，您问这个问题是正确的。

在实践中，我从未听说过容器会这样做，所以它实际上只是早期 J2EE 糟糕的旧时代遗留下来的包袱。我不会担心的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-10-07T21:01:46.640

HttpServlet 应该通过序列化到磁盘并在 servlet 容器重新启动后继续存在。例如，tomcat 允许您设置启用这种生存的标志。下一个选项是使用 JNDI 传输。这不是垃圾，它仅用于极端用例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-07T18:38:19.240

谷歌似乎建议这样做是为了让容器作者可以选择，如果他们想要的话。

您是正确的，servlet 不应该包含特定于会话的成员，实际上我认为您希望尽可能少的状态。如果您将所有内容存储在 Session 或 ServletConfig 中，我认为您将能够在序列化中幸存下来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T18:41:00.527

就像 Session 对象被序列化以在那些提供集群选项的 servlet 容器的缓存中存活一样，容器可能有一个选项可以将 Servlet 实例也传输到另一个集群节点？我只是在这里猜测

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2011-11-05T10:01:11.250

**Serializable 用作分布式环境中会话属性的*标记接口*。**

> **SRV.7.7.2 分布式环境 (JSR-154)**
> 
> 在标记为可**分发**的应用程序中，作为会话一部分的所有请求必须一次由一个 Java 虚拟机 (“JVM”) 处理。容器必须能够适当地使用 setAttribute 或 putValue 方法处理放置在 HttpSession 类实例中的所有对象。为了满足这些条件，施加了以下限制：
> 
> *   **容器必须接受实现 Serializable 接口的对象**。
> *   会话的迁移将由特定于容器的设施处理。
> 
> **分布式 servlet 容器必须为容器不能支持迁移存储它们的会话所必需的机制**的对象抛出 IllegalArgumentException 。
> 
> 分布式 servlet 容器必须支持 **迁移实现 Serializable 的对象所**必需的机制。
> 
> (...)
> 
> **容器提供者可以通过将会话对象及其内容从分布式系统的任何活动节点移动到系统的不同节点的能力来**确保负载平衡和故障转移等服务特性的可扩展性和质量。如果分布式容器**持久化或迁移会话**以提供服务质量特性，则它们不限于使用本机 JVM 序列化机制来序列化 HttpSession 及其属性。开发人员不能保证容器在实现会话属性时会调用它们的 readObject 和 writeObject 方法，**但可以保证它们的属性的 Serializable 闭包将被保留**。

# java - 加速 Java

> ID：179745
> 
> 赞同：15
> 
> 时间：2008-10-07T18:28:03.470
> 
> 标签：java, optimization, performance

这确实是两个问题，但它们非常相似，为了简单起见，我想我会把它们放在一起：

*   **首先**：给定一个已建立的 Java 项目，除了简单的代码内优化之外，还有哪些不错的方法可以加速它？

*   **第二**：用Java从零开始写程序的时候，有什么好的方法可以大大提高性能？

**请远离一般的优化技术，除非它们是*Java 特定*的。**

我之前问过关于[Python](https://stackoverflow.com/questions/172720/speeding-up-python)和[Perl](https://stackoverflow.com/questions/177122/speeding-up-perl)的问题。对于 Java，我想知道有哪些好的技巧/窍门可以提高性能，以及是否有任何特别好的 Java 分析器。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-10-07T18:37:12.313

首先：通过代码优化，我假设您已经完成了正确的算法和算法的正确实现。在这种情况下，您将使用分析器并查看您的垃圾收集器 (GC) 收集垃圾的频率以及它使用了多少时间来收集垃圾。然后你开始着手处理 GC 选项——但要小心，如果你不知道你在做什么，你可能会遇到麻烦。
我假设您使用的是 java 5/6。在这种情况下，我会通过[http://java.sun.com/docs/hotspot/gc5.0/gc_tuning_5.html](http://java.sun.com/docs/hotspot/gc5.0/gc_tuning_5.html)上的 java 5 调优指南。还有一个非常好的关于 java 性能的通讯，名为[http://www.javaperformancetuning.com/](http://www.javaperformancetuning.com/)，您可以订阅它。

除此之外，看看你可以消除多少 try/catch 块。看看你是否可以消除不必要的异常抛出。

在可以但不要过度使用的地方使用缓存。

阅读 Effective Java，第 1 版和/或第 2 版

Profilers：我使用 yourkit。对于 java 1.5 及更高版本来说非常好。您可以获得个人许可证。其他分析器也很好。

就像您进行单元和集成测试一样，将一些性能测试作为 CONTINUOUS INTEGRATION(CI) 构建的一部分运行并没有什么坏处。这样你就知道什么时候退化了，特别是如果你使用了一个好的 CI 构建服务器。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-10-07T18:39:34.307

确保您的日志级别不会意外留在 DEBUG :)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-10-07T18:45:42.890

“测量，不要猜测。”
这是一篇关于使用[NetBeans Profiler](http://profiler.netbeans.org/)加速 iText PDF 库的好[文章。](http://www.netbeans.org/community/magazine/html/04/profiler.html)我自己使用过 NetBeans Profiler，我发现它在跟踪我遇到的一些性能问题时非常简单和有用。

对于较旧的应用程序，简单地迁移到 Java 6 可能会提高性能。有关 Java 6 性能改进的信息，请参阅[此白皮书](http://java.sun.com/performance/reference/whitepapers/6_performance.html)。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-10-07T18:37:22.080

使用最新的虚拟机——它们一直在变得更好。

配置文件和测试。除非您绝对确定需要，否则永远不要优化您的代码。

如果它是一个 GUI 应用程序，从 Swing 切换到 AWT 或者可能是 Eclipse 的工具包，它应该很快。这在较旧的 VM 上更为重要（我已经从事嵌入式工作一段时间了，我们实际上是在 1.0.x 的 vm 中，swing 甚至不可用）

我知道这并不完全特定于 Java，但不是分配对象——这包括循环中的字符串连接（在循环之外它是完全可以接受的。这是你可能做的最重要的事情。

您还可以保留对象而不是释放/重新分配它们。有一些“引用”类可用于保存您不需要但可能想要重用的对象——除非它需要空间，否则 GC 不会删除它们。

如果需要，使用 -MX 参数分配更多空间。

加快 Java 的速度有点困难——HotSpot 已经为您做了很多事情，以至于您认为可能会加快代码速度的任何事情通常都会减慢它的速度。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-10-07T18:31:47.160

使用 StringBuilder 代替大量的字符串连接可以大大提高性能。

但是，我不能避免说一般实践性能获得好处，Profiling。我不知道 Java 分析（仅在学术上使用该语言），但分析可以帮助您识别代码的问题部分，并且由于您有一些东西要查找，因此修复特定部分要容易得多。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-10-08T08:04:50.000

不要盲目优化。使用 Yourkit 或任何其他好的分析器来找出应用程序中的“热点”。

您不仅需要查看 CPU 时间，还需要查看为某个步骤分配和释放了多少内存。您还希望确保没有内存泄漏或高内存消耗。我所知道的分析内存消耗的最佳工具是 Eclipse Memory Analyzer ( [http://www.eclipse.org/mat](http://www.eclipse.org/mat) )。

其他维度是线程争用和 IO 问题。有关分析争用问题的简单方法，请查看我的旧博客[https://www.sdn.sap.com/irj/sdn/weblogs?blog=/pub/wlg/4737](https://www.sdn.sap.com/irj/sdn/weblogs?blog=/pub/wlg/4737)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-10-07T19:33:02.373

通过切换到更快的 VM 可以实现另一个潜在的性能提升。它们并非都是平等的，有些更适合不同类型的应用程序。它们也可能各自具有它们支持的特定类型的自定义以及标准自定义类型。

[一些比较](http://www.cs.utexas.edu/users/habals/papers/jvmcmp-cas2008.pdf)

此外，请谨慎使用微基准测试来测试性能，因为大多数 VM 的工作方式导致它们没有意义。因此，一些非常简单的性能测试可能会由于不明显的原因而表现不同。

简单地运行一个测试，然后更改少量代码或 VM 选项并再次运行它，可能会产生不同的结果，但与您所做的更改无关。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-10-07T18:31:45.867

对于分析，请尝试使用 JAMON 进行时间监视，并尝试使用 NetBeans 分析器进行一般性能和内存监视。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-10-07T18:33:24.960

与任何语言一样，使用适当的算法和数据结构。

OOP 的一件好事是，您可以在不更改接口的情况下更改对象的实现。这使您可以从幼稚的实现开始编码，并在需要时替换它们。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-11-05T00:24:29.173

您还就 C# 提出了这个问题，我会给出相同的答案，并且从特定于语言开始是错误的。一旦您使用通用技术和方法压缩了每个周期，那么特定于语言的东西可能会有所作为。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-10-07T20:06:30.683

从项目一开始，你就应该做一件对你有很大帮助的事情：编写可读的代码。

不要试图编写长方法以避免方法调用。如有必要，编译器将内联，但可能会为长方法生成糟糕的代码。如果代码难以阅读，性能问题通常是由于它做了一些你看不到的杂乱的心理问题。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-10-07T18:52:32.127

我已经看到，有时只是给 JVM 更多的堆内存将有助于缓慢的应用程序。这在启动时由`-xmx`和`-xms`JVM 选项控制。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-10-07T20:15:16.080

Java 1.6_07+ 带有自己的分析器。它被称为 Java VisualVM。如果 PATH 上有 %JAVA_HOME%/bin，只需在命令提示符下键入 jvisualvm。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-11-05T09:04:26.427

这似乎无关紧要，但在 Android 开发者网站上有一个[速度提示列表。](http://code.google.com/android/toolbox/performance.html)它在非标准 dalvik 字节码的手机上运行，​​但其中列出的许多技巧普遍适用于 Java。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-10-07T21:32:31.213

这是 Peter Sestoft 的（较旧的）文档，值得一读：[Java 中的性能](http://www.dina.kvl.dk/~sestoft/papers/performance.pdf)。一些建议可能不再正确，因为 Java 在更高版本的优化中变得更好了。但是当分析器发现您无法以任何其他方式（即，通过算法更改）时，仍然有一组很好的宝石可供使用和尝试。

# java - 我可以在 java 命令行上指定一个 JPA 兼容的 persistence.xml 文件吗？

> ID：179748
> 
> 赞同：0
> 
> 时间：2008-10-07T18:29:33.827
> 
> 标签：java, jpa, maven-shade-plugin, uberjar

我有一个包含所有 java 类的 UberJar，但想用外部 persistence.xml 文件执行这个 jar。根据规范，Hibernate（或任何其他 JPA 提供程序）在类路径上的任何 META-INF 文件夹中查找 persistence.xml 文件，但我无法使用 UberJar 完成这项工作。有任何想法吗？UberJar 的类加载器是否仅限于 jar 文件的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T10:57:44.207

从**-jar**命令行选项：

> **"-jar"**使用该选项时，JAR 文件是所有用户类的来源，其他用户类路径设置被忽略

所以，看起来直接的答案是否定的。

您可以编写自己的引导类，该类使用通常的 java 类路径（包括您的 persistence.xml），然后引导 UberJar，尽管您可能正在使用 UberJar 来避免这种情况......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-08T23:39:48.240

为了跟进我是如何解决这个问题的，我将 persistence.xml 文件和我的 jar 添加到类路径中，然后指定了主类。我的路径中还有未归档的类，这导致它们覆盖了 jar 设置。

# asp.net - 调用 Javascript 函数并从 ASP .NET 返回值

> ID：179752
> 
> 赞同：1
> 
> 时间：2008-10-07T18:31:10.830
> 
> 标签：asp.net, asp.net-ajax, asp.net-2.0

让我们在我的页面上说我有这个功能：

```
 function ReturnFoo(bar)
 {
   return bar.toString() + "foo";
 } 
```

现在，我想从 ASP .NET 调用它，希望使用 ASP .NET AJAX 框架，因为我已经在这个代码库中使用它（我已经花了 100k，不妨使用它）。

另外，我想取回从此函数返回的输出，然后将其分配给在服务器端创建的变量。这仅限于 ASP .NET 2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-07T18:46:01.267

是的，这是一个困难的。使用 MS Ajax 会对您有所帮助。您需要从服务器推送代码以在页面加载时调用此函数，并将返回值分配给服务器可以在回发时访问的隐藏字段。

我必须说这个解决方案很糟糕，但我不知道另一种方法。希望有人会有更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-08T05:45:41.660

简单地写下你必须调用 javascript 的地方

Response.Write(" alert('hello');")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-07T18:36:22.847

我不明白您希望服务器端代码如何调用客户端函数？？？

AJAX 调用是从客户端到服务器端的！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T18:38:01.690

我之前通过使用标记为隐藏的文本控件并在更改时自动回发来完成此操作。然后，该函数设置触发回发的控件的文本。

要从服务器端调用该函数，只需注册一些启动脚本，它就会在页面呈现时运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-07T18:41:59.043

如果您打算在服务器端和客户端重用某些函数，我建议在服务器端（aspx 或 asmx）编写该函数，并使用 AJAX 从客户端（JavaScript）调用它。不确定您是否正在寻找这个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-07T18:42:34.223

每当您在服务器端和客户端之间转换时，就性能而言，就像用户单击了浏览器上的刷新按钮一样。

这真的是您想要做的吗，因为您提出的方案将意味着至少两次回传。

这样做的目的是什么？如果您可以将其保留在客户端会更好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-08T05:52:57.357

我会查看 JSON.Net（结合一个库 [jQuery 也是免费的]），它们是开源解决方案，可以让这些问题变得更容易。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-24T10:26:48.133

在第一个答案中，马特提到这是不可能的（在服务器上执行客户端代码）。这是真的。

您对 silverlight 的评论并不准确。Silverlight 无法*从服务器*调用客户端代码。Silverlight 就像 JavaScript 一样在客户端上运行，所以这是一个客户端到客户端的调用。

你能澄清一下这个场景吗......这就是我认为你要问的：

```
private void Page_Load()
{
    string someValue = EXECUTE_JS_ON_CLIENT_AND_GET_RESULT();

    // do some stuff here while still on the server...
} 
```

如果这是你想要做的，那是不可能的。在服务器上时，您无法与客户端通信。

这是你的意思吗？

谢谢，-蒂莫西

# open-source - 一个开源许可证，除非他们购买了它，否则不允许用户编译应用程序？

> ID：179764
> 
> 赞同：10
> 
> 时间：2008-10-07T18:33:35.067
> 
> 标签：open-source, licensing

多年来我一直在开发 GPL 软件，但现在我需要更严格的许可证。

这是一个商业应用程序，我想与全世界分享我的源代码，不管他们是否从我这里购买了应用程序。我也希望允许人们制作衍生作品，但我想禁止对我的原创作品和任何衍生作品进行二进制分发。

基本上，如果有人已经购买了原始作品，他/她可以编译和使用原始源代码，或任何衍生作品。否则，他们只能研究我的源代码，或者衍生作品的源代码。

有谁知道适合我需要的许可证，还是我需要自己编写？

谢谢，

**更新：**

首先感谢大家的解答。

让我澄清一些事情：

1.  此应用程序尚未发布。所以我没有采用像 XFree86 这样的新许可证，我正在尝试为新应用程序选择一个许可证。

2.  我通常使用术语“自由软件”而不是开源，所以这就是我在这里使用术语开源的原因。源确实是“开放的”，而不是 OSI 定义它的方式。

3.  我完全支持 GPL，而且我之前编写的几乎所有软件都是在 GNU GPL v2 下发布的。但这必须是一个例外。

4.  我真的不在乎人们是否违反了许可证。我不会为此起诉任何人，除非他们出售我的软件。

现在我并不是说我写了一个非常特别的软件，但我只是不希望人们通过窃取我的代码来赚钱。但我也希望精通技术的用户能够以他们认为合适的方式修改软件。

哦，最后，应用程序是用编译语言（Objective-C，准确地说是*cough*iPhone*cough*）编写的。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-10-07T18:41:10.263

那不是[OS](http://www.opensource.org/)，听起来像是共享源。具体来说，它很像 Ms-RSL。

来自[维基百科](http://en.wikipedia.org/wiki/Shared_Source)：

> Microsoft 参考源许可证 (Ms-RSL)
> 
> 这是最严格的 Microsoft 共享源许可证。源代码仅供参考。[14] 开发人员不得出于商业或非商业目的分发或修改代码。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-10-07T19:01:54.777

顺便说一句，完全不可能阻止人们维护您发布的最后一个 GPL 版本。如果有足够多的人想要使用你的软件，你应该带着期望在 GPL 版本之后建立一个社区，它的新维护者将匹配你的功能，你将被视为贱民在那些圈子里。

我并不是说这是一种威胁，而是我在过去看到的围绕这些行动发展的模式。XFree86 采用了更严格的许可证，许多贡献者将它分叉到 X.org，现在 XFree86 只不过是其旧版本的影子。cdrecord 产生了 cdrtools。SSH 催生了 OpenSSH。基本上，[自由软件切换到限制性许可证](http://en.wikipedia.org/wiki/Fork_(software_development)#Free_software)的记录中充斥着死气沉沉的商业项目。你确定这是你想要的吗？

替代方案：允许用户购买请求的功能并在 GPL 下发布。提供安装和配置服务。销售支持合同。卖培训。任何这些都比你提议的更有可能成功。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-07T18:35:47.293

那不会是开源许可证。但是，您当然可以拥有一个专有许可证，该许可证准确地说明了您的意图。许多销售组件的机构完全按照您的要求行事，但他们通常在您付款之前不提供货源。

没有什么能阻止你这样做，但我认为现实情况是，一旦你的源代码可用，就会有人编译它（可能很多人）。防止二进制文件的重新分发有多容易......？？？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-15T07:23:47.477

你不能发布带有许可证的代码，然后告诉人们你不会强制执行许可证。这要求他们承担不可接受的法律风险。是什么阻止你改变主意？您应该提前了解您许可代码的条款。

问题是，一旦您将源代码放出大门，就很难跟踪它的位置。无论您如何许可它，肆无忌惮的人可能不会按照您的喜好使用它。

一种方法是在合适的 OSI 兼容许可下提供*大部分但不是全部代码（请参阅*[opensource.org](http://www.opensource.org/licenses)获取当前 OSI 批准的许可证列表）。您以目标代码形式提供的一些低级库或内核并出售它或其他任何东西。如果没有编译好的内核，代码将无法运行。用户仍然可以查看代码中有趣的部分，他们可以根据需要对其进行修改。他们甚至可以重新分发它，但如果没有经过编译的低级内核，它就无法工作。风险是有人可以对您的内核进行逆向工程，但只要稍微聪明一点，您就可以做到这一点。您还可以使用禁止逆向工程的 EULA 交付内核。因此，您可以对这样做的人采取法律行动。我认为这为您提供了您正在寻找的东西 - 共享代码的能力，但不允许其他人将其变成销售产品。

仅供参考：IANAL，这些只是我对此事的个人想法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-07T18:39:06.040

[我认为这不符合开源定义](http://www.opensource.org/docs/definition.php)下的“开源”许可。

不过，一般来说，您应该能够向人们展示您的源代码，而不会自动允许他们编译它。只要您明确表示您仍然保留所有权利，编译后的版本可能会被视为“衍生作品”。

如果它是一个伟大的程序，人们可能会窃取它。除了稍后起诉他们（如果你抓住它），你几乎无能为力。一般来说，在不将其作为开源发布的情况下展示您的源代码听起来不是一个好主意。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-07T18:46:08.223

其他人已经告诉过您，您所描述的不是通常理解的“开源”。没有什么禁止使用商业许可证分发源代码的。

事实上（作为另一个例子）， jira、confluence 和其他 gem 的制造商[atlassian](http://www.atlassian.com)会在您购买了他们的商业产品许可证后提供他们的源代码。您可以更改、修补和使用它，但不能重新分发。

（除了是他们某些产品的用户之外，我与 atlassian 没有任何关系）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-07T18:37:55.247

IANAL，但我建议您为此类事情编写自己的许可证。我从未遇到过您提到的特定于编译的许可证。看看一些许可证作为您可以用作模板的起点。如果您真的很想拥有一些可以在法庭上站起来的东西，那么在发布之前您将需要一些法律建议。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-07T18:43:22.800

开源许可证（根据定义）不符合您的要求。

但是您可以查看 Microsoft Reference Source License - 它允许查看源代码但禁止分发： http: [//www.microsoft.com/resources/sharedsource/referencesourcelicensing.mspx](http://www.microsoft.com/resources/sharedsource/referencesourcelicensing.mspx)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-07T18:44:48.460

这很骇人听闻，但我已经看到它完成了：将您的代码分发为一系列屏幕截图。

它已“发布”，但不可编译。

但是要解决您问题的核心，在不让人们编译的情况下分发源代码显然**不是**FLOSS-y。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-07T19:32:45.337

请注意，您的源代码的可运行版本可能被视为*衍生作品*。

如果您使用 Perl、Ruby、Python 等语言编写应用程序，源代码和可执行版本之间的差异甚至会消失。

尽管如此，您正在寻找的许可证不是开源许可证，在我看来，您希望共享算法和实现提示，而不是产品的完整源代码。在这种情况下，只需这样做并发布算法以及示例源代码。

这样，没有您的许可，没有人可以重新编译您的产品（意思是：完整源代码的副本），感兴趣的开发人员仍然可以使用您的算法并在其上构建。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-15T07:33:49.580

您可以实现一些适当的构建过程，因此即使他们有源代码，如果没有适当的“构建器”，它也无法编译。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-15T07:36:16.377

> 现在我并不是说我写了一个非常特别的软件，但我只是不希望人们通过窃取我的代码来赚钱。但我也希望精通技术的用户能够以他们认为合适的方式修改软件。

所以你想允许更改，但你不想允许商业用途？

也许您正在寻找诸如知识共享非商业许可之类的东西，或者可能是 NoDerivs 许可？

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-30T03:54:35.360

在随后的编辑中，您写道：

> 我真的不在乎人们是否违反了许可证。我不会为此起诉任何人，除非他们出售我的软件。

如果您不在乎人们是否违反许可证中的限制，显然这意味着您的新限制不相关。未经修改的 GNU GPL 应该和以前一样适合您的目的。

# ms-access - MS Access 问题 - 可扩展性/索引/事务

> ID：179768
> 
> 赞同：3
> 
> 时间：2008-10-07T18:34:28.543
> 
> 标签：ms-access, rdbms

关于 MS Access 数据库的几个问题 -

大小：访问数据库的大小是否有限制？我问的原因是我们有一个包含几个简单表的访问数据库。数据库的大小约为 1GB。当我对其进行查询时，我发现它需要 10 多分钟才能运行。

通过适当的索引，MS Access 是否应该能够处理此问题，或者该技术是否存在基本限制。

这是 MS Access XP。

此外，MS Access 是否支持数据库事务、提交和回滚？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-07T18:37:02.033

你会在这里得到很多不同的答案，但在我的观点中，访问并不是一个可扩展的解决方案。它不能很好地处理多用户情况，当您开始接近 1Gb 大小时，稳定性开始成为主要问题，实际上它只是没有性能。

关于事务支持，请参阅[此 Microsoft](http://support.microsoft.com/kb/248011)文章。

此外，这里有一篇文章实际上指出了大多数[访问限制](http://databases.aspfaq.com/database/what-are-the-limitations-of-ms-access.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-07T18:48:00.793

作为回答——

大小：Access 数据库的最大大小为 2GB。

事务：底层 JET 数据库引擎完全支持事务。

根据过去的经验，我倾向于说您可能已经达到了最大可用大小，并且可能应该考虑升级到 SQL Server Express。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-07T18:38:21.563

就个人而言，我发现“可用”限制在几百兆字节范围内。

Access 是为小型数据库设计的。对于大型的，即不仅仅是你和几个人正在使用的东西，你应该看一个“真正的”RDBMS，比如 SQL Server、ORacle、DB2、MySQL 等。

**编辑**- 请参阅[http://www.blueclaw-db.com/vb_transaction_processing.htm](http://www.blueclaw-db.com/vb_transaction_processing.htm)了解使用 Access 处理事务的方法。显然不是原生的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T18:42:42.973

Access 数据库的最大大小为 2GB。您可以通过在其他文件中使用链接表来解决此问题，但如果您已经遇到性能问题，可能是时候使用更强大的数据库了。

我的建议是查看[SQL Server Compact](http://www.microsoft.com/sql/editions/compact/default.mspx)，它是一个免费的基于文件的数据库，或者更好的是[SQL Server Express](http://www.microsoft.com/express/sql/default.aspx)，它是支持多个用户的 SQL Server 的免费“精简”版本以及与 SQL Server 的互操作性。两者都将您限制为 4GB 数据库。

所有提到的产品，包括 Access，都支持事务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-07T18:51:05.657

我不确定它们是否还在 XP 版本中，但在 Access 97 中，有压缩和修复选项。如果这些仍然是选项，它们可能会有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-07T18:53:26.243

虽然这可以追溯到很多年前，当时进入 SQL Server 安装的成本与 Oracle 一样高，但我的一个客户正在使用 Access 尝试管理呼入呼叫中心。

我们正在谈论 VLDB——4000 万行的超大型数据库概念。这是在电话公司推出来电显示并为其订户提供一种免费来电显示设备的时代。由于成本限制，他们不得不无视我对 SQL Server 投资的请求。

在实践中，Access 似乎以大约 800MB 的速度崩溃。我们将表分区到多个 Access 数据库中来处理负载。信不信由你，它工作得很好。客户很感激。

在实践中，考虑到 SQL Express 的可用性，我也建议走这条路。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-08T09:52:05.900

多年来阅读 Access 新闻组的印象是，现在仅在将 MS Access 用作使用绑定表单的基于 RAD 表单的开发环境时才推荐使用 ACE/Jet 引擎（.accdb、.mdb 或 .mde 文件）。如果您没有 Access 前端，那么在考虑更具可扩展性（和功能）的替代方案时，很少有支持 ACE/Jet 后端的论据：用于 MS 商店的 SQL Server Express 或 SQL Server Compact Edition、MySQL、等等

正如 ACE/Jet 引擎中的事务支持一样，是的，它存在并且是原生的。另一个答案链接到一篇关于通过 DAO 使用事务的文章：请注意，DAO 的许多方面都受到限制，因为它的开发落后于引擎，事务就是一个例子。令人高兴的是，您可以使用 SQL DCL：BEGIN TRANSACTION、COMMIT TRANSACTION、ROLLBACK TRANSACTION 等来完成 DAO 无法完成的事情，例如嵌套事务。SQL DCL 要求 Access 接口处于 ANSI-92 查询模式；使用 ADO 将起作用，因为 ADO 本身就使用此模式。有关更多详细信息，请参阅：

[Access 2000 的高级 Microsoft Jet SQL](http://msdn.microsoft.com/en-us/library/aa139977(office.10).aspx)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-08T16:55:05.810

Jet 可以成为任何数量的桌面开发平台的非常好的数据存储，而不仅仅是 Access 本身。它一直是 VB 开发人员的首选，现在仍然是（有充分理由）。

预计不会大幅增长的 1GB MDB 在速度或可靠性方面应该不是问题。如果它很慢，那么你没有正确索引它，或者你正在编写非常低效的 SQL。低效 SQL 的一个例子是将 WHERE 子句应用于表达式，因此不能使用索引——一个例子是

```
WHERE Year([MyTable].[MyDate]) = 2002 
```

与

```
WHERE MyTable.MyDate Between #1/1/2002# And #12/31/2002# 
```

如果您遇到稳定性问题（即经常性损坏），这是一个需要解决的问题——通常是由于人为错误、硬件问题或软件问题（如 AV 软件干扰内部 Jet 写入操作）。

But the key determinant is how fast the MDB is growing. If you extrapolate out the historical growth rate and approach 2GBs within 5 years, I'd say you need to upsize soon. If it's more like 10 years, you should probably do it anyway. If it's 20 years, then, not so much.

# c# - 什么正则表达式将匹配文本，不包括 HTML 标记中的内容？

> ID：179779
> 
> 赞同：5
> 
> 时间：2008-10-07T18:36:51.143
> 
> 标签：c#, regex

我正在为需要突出显示搜索词的搜索结果页面编写代码。这些术语恰好出现在表格单元格中（应用程序正在遍历 GridView 行单元格），并且这些表格单元格可能具有 HTML。

目前，我的代码如下所示（相关大块如下所示）：

```
const string highlightPattern = @"<span class=""Highlight"">$0</span>";
DataBoundLiteralControl litCustomerComments = (DataBoundLiteralControl)e.Row.Cells[CUSTOMERCOMMENTS_COLUMN].Controls[0];

// Turn "term1 term2" into "(term1|term2)"
string spaceDelimited = txtTextFilter.Text.Trim();
string pipeDelimited = string.Join("|", spaceDelimited.Split(new[] {" "}, StringSplitOptions.RemoveEmptyEntries));
string searchPattern = "(" + pipeDelimited + ")";

// Highlight search terms in Customer - Comments column
e.Row.Cells[CUSTOMERCOMMENTS_COLUMN].Text = Regex.Replace(litCustomerComments.Text, searchPattern, highlightPattern, RegexOptions.IgnoreCase); 
```

令人惊讶的是它有效。但是，有时我匹配的文本是如下所示的 HTML：

```
<span class="CustomerName">Fred</span> was a classy individual. 
```

如果您搜索“class”，我希望突出显示代码将“class”包装在“classy”中，但当然不是恰好在其中的 HTML 属性“class”！如果您搜索“Fred”，则应突出显示。

那么什么是一个好的正则表达式可以确保匹配只发生在 html 标签之外？它不必是超级硬核。我认为，只要确保匹配不在 < 和 > 之间就可以了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-08T08:56:52.190

这个正则表达式应该做的工作：`(?<!<[^>]*)(regex you want to check: Fred|span)`它检查`<[^>]*`从匹配字符串开始向后匹配正则表达式是不可能的。

修改后的代码如下：

```
const string notInsideBracketsRegex = @"(?<!<[^>]*)";
const string highlightPattern = @"<span class=""Highlight"">$0</span>";
DataBoundLiteralControl litCustomerComments = (DataBoundLiteralControl)e.Row.Cells[CUSTOMERCOMMENTS_COLUMN].Controls[0];

// Turn "term1 term2" into "(term1|term2)"
string spaceDelimited = txtTextFilter.Text.Trim();
string pipeDelimited = string.Join("|", spaceDelimited.Split(new[] {" "}, StringSplitOptions.RemoveEmptyEntries));
string searchPattern = "(" + pipeDelimited + ")";
searchPattern = notInsideBracketsRegex + searchPattern;

// Highlight search terms in Customer - Comments column
e.Row.Cells[CUSTOMERCOMMENTS_COLUMN].Text = Regex.Replace(litCustomerComments.Text, searchPattern, highlightPattern, RegexOptions.IgnoreCase); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-07T18:47:43.807

您可以将正则表达式与平衡组和反向引用一起使用，但我强烈建议您在此处使用[解析器](http://www.antlr.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-07T20:24:36.763

嗯，我不是 C# 程序员，所以我不知道它使用的正则表达式的味道，但是 (?!<.+?>) 应该忽略标签内的任何内容。它会强制你在 HTML 代码中使用 < >，但无论如何你都应该这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T09:09:13.427

编写一个可以处理 CDATA 部分的正则表达式会很困难。您可能不再假设 > 关闭标签。

例如，`"<span class="CustomerName>Fred.</span> is a good customer (<![CDATA[ >10000$ ]]> )"`

解决方案是（如前所述）解析器。他们在处理你在`CDATA`. madgnome 的向后检查不能用于查找`<![CDATA`从 a开始的`]]>`，因为一个`CDATA`部分可能包含文字`<![CDATA`。

# c# - .NET（或 MFC）的高速图形控制？

> ID：179787
> 
> 赞同：7
> 
> 时间：2008-10-07T18:38:14.980
> 
> 标签：c#, .net, mfc, controls, graph

我需要编写一个数字示波器类型的应用程序。那里有很多很棒的静态图形控件，但我需要能够绘制 16 条轨迹的图形，每秒处理 4000 个样本。

有人知道.NET 的高速图形控制吗？我什至会使用 MFC，因为它可以封装到 .NET 控件中。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-07T18:55:37.440

ZedGraph 怎么样？他们在这里特别提到了实时应用程序：

[http://zedgraph.org/wiki/index.php?title=Display_Dynamic_or_Real-Time_Data](http://zedgraph.org/wiki/index.php?title=Display_Dynamic_or_Real-Time_Data)

他们声称每秒至少有 20 个样本。

在每秒 4000 个样本的情况下，我认为您不会想要实时绘制所有点，因为您将在 0.25 秒内完成整个屏幕...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-07T19:13:01.150

[DirectX](http://msdn.microsoft.com/en-us/library/bb219737(VS.85).aspx)曾经有 .NET 绑定（不确定当前版本）。它包括对高性能 2D 和 3D 图形的支持。如果 Windows 上的任何东西都能满足您的要求，那就是 DirectX。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-24T20:12:52.773

我会推荐 .NET 的 National Instruments 解决方案。National Instruments 在数据采集和仪器控制方面一直处于领先地位。他们有一个用于在 .NET 中绘制/绘图的库，但它是商业的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-07T19:47:42.483

我推荐[**Universal Real-Time Software Oscilloscope GUI DLL Library**](http://www.oscilloscope-lib.com/)。它只是一个 DLL，但具有高性能。查看示例应用程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-07T18:42:09.793

你看过[GraphViz](http://en.wikipedia.org/wiki/Graphviz)吗？我已经看到它在示波器应用中使用过，但我不肯定它会处理您正在寻找的速度。GraphViz 不像我见过的一些 GDI+ 控件那样采用“实时提要”指令。

它有一些[.NET 包装](http://www.codeplex.com/quickgraph) [器](http://quickgraph.tigris.org/source/browse/quickgraph/trunk/src/)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-08T00:53:00.667

看看[这个问题](https://stackoverflow.com/questions/78061/chart-controls-for-mfc-application#78632)。我强烈推荐[IOComp](http://iocomp.com)用于 MFC (ActiveX) 和 .Net。非常快速和稳定。

[http://opcactivex.com/Related_Products___Development/Development_Tools/Plot_Pack/screen_iocomp_plotpack.jpg](http://opcactivex.com/Related_Products___Development/Development_Tools/Plot_Pack/screen_iocomp_plotpack.jpg)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-07T19:01:06.727

你可以看看[QCRTGraph](http://www.quinn-curtis.com/QCRTGraphProdPage.htm)控件。您还可以查看这个[CodeGuru 项目](http://www.codeguru.com/article.php/c2223/)。

不过，老实说，根据您的要求，您最好自己进行 C++ 实现。每个样本只有 0.25 毫秒，锁定和更新任何第三方控件的缓冲区对于您来说太昂贵了。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-07T19:11:06.067

您可能会查看[Visual Numerics](http://www.vni.com)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-07T19:00:28.727

图形渲染（小部件上的点和线）相当简单——你可以用原始的 Win32 a la Petzold 做到这一点。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-06-15T11:11:34.017

你可能想看看 Steema Teechart ( [http://www.steema.com/teechart/net](http://www.steema.com/teechart/net) )。我必须补充一点，我没有任何高速处理的实践经验。

# visual-sourcesafe - 如何重置工作文件夹 VSS 2005

> ID：179791
> 
> 赞同：26
> 
> 时间：2008-10-07T18:38:57.130
> 
> 标签：visual-sourcesafe, visual-sourcesafe-2005

在 Visual Source Safe 6.0 中，您可以通过将其设置为空白字符串来“重置”工作文件夹。这意味着工作文件夹将由父级的工作文件夹确定。

如何在 Visual Source Safe 2005 中执行此操作？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2008-10-07T18:39:01.843

这不能在普通的 VSS 2005“设置工作文件夹”对话框中完成。

但是，如果**在调用“设置工作文件夹”对话框时按住 shift 键**，它会显示旧的 VSS 6.0 对话框。在这里，您可以通过删除字符串并按 OK 来重置工作文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-07T19:11:34.553

如果 VS2005 仍然使用 .ini 文件，您可以从文件中删除工作文件夹记录，它将从父级继承。

# asp.net - Visual Studio 2008 Design Surface 错误：“无法完成操作。无效的 formatetc 结构。”

> ID：179796
> 
> 赞同：3
> 
> 时间：2008-10-07T18:39:50.297
> 
> 标签：asp.net, visual-studio, configuration, asp.net-ajax

在 VS2008 网站项目中，我在拆分视图中打开了一个页面。我尝试将 Infragistics Web 控件拖到页面的设计图面上。没发生什么事。我尝试将其拖到 htmlz 上。对话框与

> 操作无法完成。无效的 formatetc 结构。

随后，拖动的控件不会出现在设计图面或 html 中。

项目编译良好，运行良好。错误只是在设计时。

尝试重置工具箱并重新添加 Infragistics 控件。清理项目并重建解决方案。

帮助？

更多信息：这不是 Infragistics 特有的错误（例如[http://www.google.com/search?q=the+operation+could+not+be+completed.+invalid+formatetc+structure&ie=utf-8&oe= utf-8&aq=t](http://www.google.com/search?q=the+operation+could+not+be+completed.+invalid+formatetc+structure&ie=utf-8&oe=utf-8&aq=t) )。在其他板上有各种伏都教解决方案，但我对模糊的“我重新安装 VS，然后擦除我的高清，然后在我的键盘上执行独角兽牺牲然后它工作！”感到不满意！请具体说明——到底是什么类型的独角兽？

更多配置信息： 无 SP1 或已安装产品的直系带 VS2008。确实有修补程序，但最后一个是几个月前安装的（因为没有问题，重复步骤已经完成了很多次）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-07T20:10:28.803

项目的 web.config 中对控件库 dll 的程序集引用不正确/不存在。添加/更正要修复的 dll 引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-19T12:28:46.673

我在尝试创建我的第一个 WPF 应用程序时遇到了 C#-Express 的这个问题。重置工具栏没有帮助。这是答案：

[https://silverlight.net/forums/p/23191/82251.aspx](https://silverlight.net/forums/p/23191/82251.aspx)

两个注意事项：

*   首先，%localappdata%\Microsoft\VisualStudio 不是路径——它是 vsexpress。
*   *.tbd 文件被隐藏，否则文件夹看起来很稀疏！

删除 .tbd 文件并重置工具栏为我修复了它！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-05-29T19:13:31.033

删除现有的Web.Config，然后重新创建，添加第三方控件的问题是程序集没有在.config中注册好。因此，请确保包含基础设施（或您正在使用的任何东西）程序集。例如。

```
<system.web>
    <!-- 
        Set compilation debug="true" to insert debugging 
        symbols into the compiled page. Because this 
        affects performance, set this value to true only 
        during development.
    -->
    <compilation debug="true">
        <assemblies>
            <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="DevExpress.Web.v9.2, Version=9.2.9.0, Culture=neutral, PublicKeyToken=B88D1754D700E49A"/>
            <add assembly="System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
            <add assembly="DevExpress.Data.v9.2, Version=9.2.9.0, Culture=neutral, PublicKeyToken=B88D1754D700E49A"/>
            <add assembly="System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/></assemblies>
    </compilation> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-12T02:51:04.393

我有 Visual Web Developer 2008 (VWDExpress)，我在拖放 Silverlight 控件时遇到了同样的问题。根据 n8wrl 的建议，我关闭了 VWDExpress 并从 C:\Documents and Settings\\Local Settings\Application Data\Microsoft\VWDExpress\9.0 文件夹中删除了所有 .tbd 文件。再次启动 VWDExpress，它就像魅力一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-03-29T15:40:52.740

当我忘记将 AjaxControlKit.dll 复制到 bin 目录中时，我得到了一个无效的 FORMATETC 结构。

工具箱列出了所有的 ajax 工具，所以它不是很明显。

# java - Java RMI 教程 - AccessControlException：访问被拒绝（java.io.FilePermission

> ID：179799
> 
> 赞同：15
> 
> 时间：2008-10-07T18:41:29.170
> 
> 标签：java, rmi, policy

昨天我尝试开始使用 Java RMI。我找到了这个 sun 教程 ( [http://java.sun.com/docs/books/tutorial/rmi/index.html](http://java.sun.com/docs/books/tutorial/rmi/index.html) ) 并从服务器实现开始。但是每次我启动 pogram（rmiregistry 正在运行）时，我都会得到一个带有以下 StackTrace 的 AccessControlException：

```
LoginImpl exception:
java.security.AccessControlException: access denied (java.io.FilePermission \\\C\ProjX\server\serverProj\bin\usermanager read)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:264)
    at java.security.AccessController.checkPermission(AccessController.java:427)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    at java.lang.SecurityManager.checkRead(SecurityManager.java:871)
    at java.io.File.exists(File.java:700)
    at sun.net.www.protocol.file.Handler.openConnection(Handler.java:80)
    at sun.net.www.protocol.file.Handler.openConnection(Handler.java:55)
    at java.net.URL.openConnection(URL.java:943)
    at sun.rmi.server.LoaderHandler.addPermissionsForURLs(LoaderHandler.java:1020)
    at sun.rmi.server.LoaderHandler.access$300(LoaderHandler.java:52)
    at sun.rmi.server.LoaderHandler$Loader.<init>(LoaderHandler.java:1108)
    at sun.rmi.server.LoaderHandler$Loader.<init>(LoaderHandler.java:1089)
    at sun.rmi.server.LoaderHandler$1.run(LoaderHandler.java:861)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.server.LoaderHandler.lookupLoader(LoaderHandler.java:858)
    at sun.rmi.server.LoaderHandler.loadProxyClass(LoaderHandler.java:541)
    at java.rmi.server.RMIClassLoader$2.loadProxyClass(RMIClassLoader.java:628)
    at java.rmi.server.RMIClassLoader.loadProxyClass(RMIClassLoader.java:294)
    at sun.rmi.server.MarshalInputStream.resolveProxyClass(MarshalInputStream.java:238)
    at java.io.ObjectInputStream.readProxyDesc(ObjectInputStream.java:1494)
    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1457)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1693)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1299)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:339)
    at sun.rmi.registry.RegistryImpl_Skel.dispatch(Unknown Source)
    at sun.rmi.server.UnicastServerRef.oldDispatch(UnicastServerRef.java:375)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:240)
    at sun.rmi.transport.Transport$1.run(Transport.java:153)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:149)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:460)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:701)
    at java.lang.Thread.run(Thread.java:595)
    at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(Unknown Source)
    at sun.rmi.transport.StreamRemoteCall.executeCall(Unknown Source)
    at sun.rmi.server.UnicastRef.invoke(Unknown Source)
    at sun.rmi.registry.RegistryImpl_Stub.rebind(Unknown Source)
    at startserver.StartServer.main(StartServer.java:22) 
```

我的 server.policy 文件如下所示：

```
grant {
    permission java.security.AllPermission;
}; 
```

但我也试过这个......

```
grant {
    permission java.security.AllPermission;
    permission java.io.FilePermission "file://C:/ProjX/server/serverProj/bin/usermanager", "read";
}; 
```

...还有这个（以及其他几个:-()：

```
grant codeBase "file:///-" {
    permission java.security.AllPermission;
}; 
```

但在每种情况下，结果都是一样的。是的，策略文件在路径中（当我将错误的语句写入策略文件时，我看到了解析异常）。我尝试了其他几个“/”和“\”星座，但没有效果。

我使用 Eclipse，我的 VM 参数是这样的：

```
-cp C:\ProjX\server\serverProj\bin\usermanager\
-Djava.rmi.server.codebase=file://C:/ProjX/server/serverProj/bin/usermanager/
-Djava.rmi.server.hostname=XYZ (anonymized)
-Djava.security.policy=server.policy 
```

已编译的 Remote-Interface 和接口实现类 (LoginImpl) 类位于此路径中：“C:/ProjX/server/serverProj/bin/usermanager/”。我将存根实例化并将其重新绑定到注册表的主要方法位于另一个包中，如下所示：

```
public static void main(String[] args) {
    if (System.getSecurityManager() == null) {
        System.setSecurityManager(new SecurityManager());
    }
    try {
        String name = "Login";
        Login login = new LoginImpl();
        Login stub = (Login) UnicastRemoteObject.exportObject(login, 0);
        Registry registry = LocateRegistry.getRegistry();
        registry.rebind(name, stub);
        System.out.println("LoginImpl bound");
    } catch (Exception e) {
        System.err.println("LoginImpl exception:");
        e.printStackTrace();
    }
} 
```

有人对我有什么建议吗？谢谢你的帮助。

* * *

所以问题是一样的（java.rmi.UnmarshalException 表明更改代码库不是我的 AccessControlException 的解决方案）。不：我不想购买插件“GB”;-)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-07T20:14:02.227

授予所有代码的所有权限是非常糟糕的。任何 RMI 客户端都可以作为登录用户做它想做的事。一般来说，尽量限制权限，尤其是当您不知道代码来自何处时。

回到问题...

```
-Djava.rmi.server.codebase=file://C:/ProjX/server/serverProj/bin/usermanager/ 
```

那应该是`"file:///C:/..."`or `"file:/C:/..."`。想想http。`"http://C:/..."`指名为 的主机`C`。请注意，异常消息已删除冒号，因为这只是端口号的语法。

即使您向所有代码授予权限，您也会获得安全异常的原因是，RMI 将权限限制为给定所涉及的 URL（使用 AccessController doPrivileged 两个参数形式）的适当权限。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-14T18:10:28.157

好的，我有。它不是 rmiregistry 属性（不带任何参数工作）。我的代码库 VM 参数中有两个错误：

```
-cp C:\ProjX\server\serverProj\bin\usermanager\
-Djava.rmi.server.codebase=file://C:/ProjX/server/serverProj/bin/usermanager/
-Djava.rmi.server.hostname=XYZ (anonymized)
-Djava.security.policy=server.policy 
```

... 应该看起来像这样：

```
-Djava.rmi.server.codebase=file:/C:/ProjX/server/serverProj/bin/
-Djava.rmi.server.hostname=XYZ (anonymized)
-Djava.security.policy=server.policy 
```

=> 文件：/（只有一个斜线）+ 错误的包结尾。

但是跟踪是如此混乱，我的第一个想法是，策略文件或策略配置一定有问题。

尽管如此：感谢您的帮助和愉快的黑客攻击。;-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-12T18:18:47.303

您还可以以编程方式设置 java.rmi.server.codebase 属性：

```
Hello h = null;
Properties props = System.getProperties();
System.setProperty("java.rmi.server.codebase", "file:/C:/PROJECTX/bin/");
try {
  h = new HelloImpl();
  Naming.bind("//localhost:1099/HelloService", h);
  System.out.println("Serwis gotów...");
} catch (RemoteException e) {
  e.printStackTrace();
} catch (MalformedURLException e) {
  e.printStackTrace();
} catch (AlreadyBoundException e) {
  e.printStackTrace();
} 
```

对于一些假设的`Hello`RMI 服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-14T16:40:26.653

我认为异常实际上来自 rmiregistry。堆栈跟踪的这一部分让我这么想。rmir​​egistry 的存根正在接收异常并将其作为重新绑定尝试的结果传回。

```
    在 sun.rmi.transport.StreamRemoteCall。exceptionReceivedFromServer（未知来源）
    在 sun.rmi.transport.StreamRemoteCall.executeCall（未知来源）
    在 sun.rmi.server.UnicastRef.invoke（未知来源）
    在 sun.rmi.registry.RegistryImpl_Stub.rebind（未知来源）

```

尝试运行 rmiregistry `-J-Djava.security.policy=all.policy`，其中策略文件授予所有权限（至少可以让事情顺利进行）。

最终，您可能还希望切换到 HTTP 代码库 URL，以便您可以在与服务器不同的机器上运行客户端。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-22T09:56:04.827

当我在启动 rmi 注册表之前修复 CLASSPATH 变量时，它工作得很好。我认为这个想法是 RMI 注册表将加载您的远程存根并且它应该具有访问权限。通过在运行注册表之前将我的类放在 CLASSPATH 上，这很容易。所以它与JDK 7或file：/协议等任何其他原因无关。

# javascript - 等效于explicitOriginalTarget 事件参数的跨浏览器

> ID：179826
> 
> 赞同：18
> 
> 时间：2008-10-07T18:48:59.513
> 
> 标签：javascript, events, cross-browser, scriptaculous

有谁知道与explicitOriginalTarget 事件参数等效的跨浏览器？这个参数是 Mozilla 特定的，它给了我导致模糊的元素。假设我的页面上有一个文本输入和一个链接。文本输入具有焦点。如果我点击链接，文本输入的 blur 事件通过 explicitOriginalTarget 参数为我提供 Firefox 中的链接元素。

我正在扩展 Autocompleter.Base 的 onBlur 方法，以便在搜索字段失去对给定元素的焦点时不隐藏搜索结果。默认情况下，如果搜索字段失去对任何元素的焦点，onBlur 方法会隐藏。

```
Autocompleter.Base.prototype.onBlur = Autocompleter.Base.prototype.onBlur.wrap(
function(origfunc, ev) {
    var newTargetElement = (ev.explicitOriginalTarget.nodeType == 3 ? ev.explicitOriginalTarget.parentNode: ev.explicitOriginalTarget); // FIX: This works only in firefox because of event's explicitOriginalTarget property
    var callOriginalFunction = true;
    for (i = 0; i < obj.options.validEventElements.length; i++) {
        if ($(obj.options.validEventElements[i])) {
            if (newTargetElement.descendantOf($(obj.options.validEventElements[i])) == true || newTargetElement == $(obj.options.validEventElements[i])) {
                callOriginalFunction = false;
                break;
            }
        }
    }
    if (callOriginalFunction) {
        return origFunc(ev);
    }
}
);

new Ajax.Autocompleter("search-field", "search-results", 'getresults.php', { validEventElements: ['search-field','result-count'] }); 
```

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-07T20:17:34.717

除了基于 Gecko 的浏览器之外，在任何其他浏览器中都没有与 explicitOriginalTarget 等效的功能。在 Gecko 中，这是一个内部属性，不应由应用程序开发人员（可能由 XBL 绑定编写者）使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-22T21:02:50.007

2015 更新...您可以在 Chrome 上使用 event.relatedTarget。这么基本的东西，希望其他浏览器也能效仿……

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-02-11T18:43:58.247

Mozilla 的 .explicitOriginalTarget 在 IE 中的粗略等价物是 document.activeElement。我说粗略的等效是因为它有时会根据您的情况在 DOM 节点树中返回稍微不同的级别，但它仍然是一个有用的工具。不幸的是，我仍在寻找 Google Chrome 的等价物。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-05T00:43:12.243

IE`srcElement`不包含与 FF 相同的元素`explicitOriginalTarget`。很容易看出这一点：如果您有一个带有操作的按钮字段`onClick`和一个带有操作的文本字段`onChange`，请更改文本字段并将光标直接移动到按钮并单击它。此时 IE`srcElement`将成为文本字段，但IE 将成为`explicitOriginalTarget`按钮字段。对于 IE，可以从`event.x`和`event.y`属性中获取鼠标点击的 x,y 坐标。

不幸的是，Chrome 浏览器既不提供`explicitOriginalTarget`点击坐标，也不提供鼠标坐标。您可以自行决定`onChange`事件是从哪里触发的。为此，明智地使用`mousemove`和`mouseout`事件可以提供鼠标跟踪，然后可以在`onChange`处理程序中对其进行检查。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-07T19:35:36.363

看起来它更适合扩展编写者而不是网页设计......

我会观察两个目标（或潜在目标）上的模糊/聚焦事件并分享他们的信息。
实际上，确切的实现可能取决于目的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-03-07T18:46:48.533

对于 IE，您可以使用`srcElement`, 并强制它。

```
if( !selectTag.explicitOriginalTarget )
    selectTag.explicitOriginalTarget = selectTag.srcElement; 
```

# c# - 检测和存储 Web 应用程序客户端所在时区的最佳方法是什么？

> ID：179834
> 
> 赞同：5
> 
> 时间：2008-10-07T18:50:55.547
> 
> 标签：c#, javascript, timezone

我有一个多时区 Web 应用程序，它以 UTC 格式将所有日期时间值存储在数据库中，当服务器上发生操作时，我可以轻松地将时间转换为 UTC。

但是，当客户端输入时间或时间跨度时，检测和存储它的最佳方法是什么？

我目前正在执行以下操作：

1.  获取 Date.getTimezoneOffset() 的值 (javascript)
2.  通过 Page 上的 ICallbackEventHandler 将其发布到服务器端代码。
3.  将该值存储在会话中
4.  在任何后续请求中，使用客户端的时区计算输出/输入日期时间值。

不管实际实现如何，这似乎是一个不优雅的解决方案。有没有人有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-07T18:59:38.510

我正在做一些非常相似的事情，但我现在认为我更喜欢使用*javascript*将所有时间转换为客户端的本地时间。服务器将在生成的页面中以 UTC 格式提供所有时间，一旦页面加载，*javascript*将对其进行转换。

这消除了服务器端代码的混乱，因为我总是知道现在是什么时间（UTC）。在客户端，我使用*jquery*和`each()`一次格式化所有时间值的函数。我在隐藏字段中将每个时间写为*Unix时间，以便使用**jquery*轻松处理。

我看到这种方法的唯一问题是：

*a) 我在javascript*中还没有一个非常好的日期/时间格式化程序，并且

b）如果用户关闭了*javascript*，那么它就不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-07T19:02:42.653

您可以使用 HttpRequest 对象的“标头”属性来查询客户端发送的“If-Modified-Since”标头。此标头应包含格式包含客户端时区的日期，如下所示：

```
If-Modified-Since: Sat, 29 Oct 1994 19:43:31 GMT 
```

一个简单的子字符串提取将为您提供时区代码。但是，恐怕并非所有浏览器在发送该标头时都是一致的，因此您应该对此进行一些试验。

问候，法布里齐奥

# java - 使用选择过滤器在 Oracle 数据库之间进行批量行传输

> ID：179839
> 
> 赞同：0
> 
> 时间：2008-10-07T18:52:13.203
> 
> 标签：java, database, oracle, html-select

基本上，我试图有选择地将表从一个数据库复制到另一个数据库。我有两个具有相同架构的不同 [Oracle] 数据库（例如，在不同主机上运行）。我对在 DB1 中加载表 A 以及在 DB2 中的表 A 上运行选择结果的有效方法感兴趣。我正在使用 JDBC，如果相关的话。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-07T19:01:24.263

使用数据库链接，并使用创建表作为选择。

```
create database link other_db connect to remote_user identified by remote_passwd using remote_tnsname;

create table a as select * from a@other_db; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-08T16:00:36.450

如果数据库来自同一供应商，它们通常会提供一种本地方式来查看另一个数据库中的表。在这种情况下，“选择进入”查询将没有问题

例如，Oracle 拥有运行良好的数据库链接。

除此之外，您将不得不与每个数据库建立连接并从一个连接读取并写入另一个连接。

有像 Oracle 的 ODI 这样的工具可以完成这项工作，但它们都使用相同的读入、写出模型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-06T11:47:09.353

您甚至可能不需要移动该数据。也许您可以跨数据库链接进行选择。

# web-services - 与大平原整合，最好的方法？

> ID：179840
> 
> 赞同：7
> 
> 时间：2008-10-07T18:52:29.007
> 
> 标签：web-services, dynamics-gp, econnect

我在网上找不到太多关于它的信息。是否有人同时使用 eConnect 和 Dynamics Web 服务与 Great Plains 进行交互（读/写）。我正在寻找这两种方法的优缺点。

该产品将在各个站点上安装和配置，因此易于配置非常重要。我通常讨厌弄乱 IIS。

应该能够针对 GP 9 和 10。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-13T11:30:45.013

使用 Great Plains 连接器 - 完整信息在这里[http://help.boomi.com/display/BOD/Great+Plains+Connector?showChildren=false](http://help.boomi.com/display/BOD/Great+Plains+Connector?showChildren=false)

以及这里的利弊/限制等：

[http://www.articlesbase.com/software-articles/great-plains-customization-how-to-integrate-legacy-application-with-dynamics-gp-452580.html](http://www.articlesbase.com/software-articles/great-plains-customization-how-to-integrate-legacy-application-with-dynamics-gp-452580.html)

当然还有马口中的：http: [//msdn.microsoft.com/en-us/library/ms994230.aspx](http://msdn.microsoft.com/en-us/library/ms994230.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-23T06:34:53.220

我们已经完成了基于 GP 9 的 Web 服务的站点。不用担心 IIS，您不必担心太多。安装过程非常简单。它不需要我对 IIS 进行任何配置。一些配置一开始有点棘手，比如添加用户和设置策略。但是一旦你掌握了它，它就没有问题了。我们现在几乎所有东西都使用 Web 服务，它们很容易开发。我希望有更多，更新和访问更多我希望即将到来的信息，但否则很容易。

我们已经在电子商务网站和 Windows 应用程序上使用了它。我们没有选择 econnect 是因为 Web 服务的易用性，我相信 econnect 有更多选择，我们确实使用它来创建和更新销售发票，但将其更改为 Web 服务。如果您有任何具体问题，请随时告诉我。谢谢！

# html - 如何在不使用表格的情况下格式化 HTML 表单

> ID：179845
> 
> 赞同：23
> 
> 时间：2008-10-07T18:54:04.167
> 
> 标签：html, css

我知道对所有内容都使用 HTML 表格是不好的……而且表格应该只用于呈现表格数据，而不是实现某种样式目标。

我的问题是，如何使用 CSS 制作 HTML 表单，使它们看起来像使用表格时一样美观且对齐？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-10-07T19:04:30.480

Nick Rigby 为 A List Apart 写了一篇出色的文章，题为[Prettier Accessible Forms](http://www.alistapart.com/articles/prettyaccessibleforms/)

使用字段集、图例、标签。高度语义化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-07T18:59:30.803

看看 wufoo 表单中使用的代码，它们使用 ul 来格式化表单，它们看起来非常好。

[http://wufoo.com/gallery/templates/](http://wufoo.com/gallery/templates/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T18:46:38.907

您可以尝试将表单尽可能向后剥离，并根据需要使用CSS 中`<label>`的属性来处理各种表单输入元素。`clear:left;`

这将确保每一行都重新开始，而不必将表单的每一行包装在一个额外的`<div>`或`<p>`什至从中列出一个列表中。

```
.formlabel{
    clear:left;
    display:block;
    float:left;
    margin:0 0 1em 0;
    padding:0 0.5em 0 0;
    text-align:right;
    width:8em;
}

.forminput{
    float:left;
    margin:0 0.5em 0.5em 0;
}

.formwarning{
    clear:left;
    float:left;
    margin:0 0.5em 1em 0;
} 
```

这是一个示例 HTML 表单，其中显示了各种输入类型的示例以及您可以根据需要隐藏或设置样式的额外验证消息：

```
<fieldset><legend>Details</legend>
    <label for="name" class="formlabel">Name</label>
      <input id="name" name="name" type="text" class="forminput" />
      <div class="formwarning">Validation error message</div>

    <label for="dob_year" class="formlabel">DOB</label>
      <div class="forminput">
        <input id="dob_year" name="dob_year" type="text" size="4" /> /
        <input id="dob_month" name="dob_month" type="text" size="2" /> /
        <input id="dob_day" name="dob_day" type="text" size="2" />
      </div>

    <label class="formlabel">Sex</label>
      <label for="female" class="forminput">Female</label>
        <input id="female" name="sex" type="radio" class="forminput" />
      <label for="male" class="forminput">Male</label>
        <input id="male" name="sex" type="radio" class="forminput" />

    <label for="state" class="formlabel">State</label>
      <select id="state" name="state" class="forminput">
        <option>ACT</option>
        <option>New South Wales</option>
        <option>Northern Territory</option>
        <option>Queensland</option>
        <option>South Australia</option>
        <option>Tasmania</option>
        <option>Victoria</option>
        <option>Western Australia</option>
      </select>

    <label for="deadseal" class="formlabel">Death certificate</label>
      <input id="deadseal" name="deadseal" type="file" class="forminput" />
</fieldset> 
```

在上面的例子中，DOB 确实有一个额外的`<div>`混乱的东西。`:after`如果您在需要的地方将日期斜杠作为伪元素的一部分进行样式化，则可以摆脱它。

在 Opera 11.60、Firefox 11、Google Chrome 18 和 Internet Explorer 8 中运行良好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T18:55:42.107

我会使用 div 标签在页面上布局数据进行查找。

表格对于表格数据仍然非常有用，但它不适合布局页面。

在 stackoverflow.com 上查看源代码，可能有一些很好的例子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-07T18:55:44.773

考虑将字段名称放在字段上方，而不是旁边。我发现这是最好的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-06T08:22:18.777

**HTML**

```
<form>
<div id="personal_name">
<label>Name</label>
<input name="name" />
</div>
</form> 
```

**CSS**

```
form
{display: table}
#personal_name
{display: table-row}
#personal_name input, #personal_name label
{display: table-cell} 
```

我认为这就足够了。

# java - 从 Oracle Forms 6i 迁移到 Web 的最佳解决方案？

> ID：179849
> 
> 赞同：12
> 
> 时间：2008-10-07T18:55:33.243
> 
> 标签：java, oracle, migration, oracleforms

我在甲骨文商店工作。有一个由大约 1000 个 Oracle Forms 组成的工具集（使用 6i 的 Forms builder，90 年代早期的软件），后端有 Oracle 10g。它每月为大约 500 个不同的人提供服务，在工作日的任何给定时间都有 200 个并发连接。

显然，这是摆脱 Forms 运行时并转向基于 Web 的解决方案所需要解决的问题。需要从 Windows、Linux、各种 UNIX、VMS 和 Solaris 访问这些工具。

存在哪些可行的迁移选项？不仅迁移需要可行，而且开发需要由大约 8 名支持该工​​具集的工程师完成（其中许多人更愿意留在原地而不是对该工具集进行现代化改造）。

Oracle 提供了一些将 Oracle Forms 转换为糟糕的 Java Applet 的解决方案（这是一个非常糟糕的临时解决方案）。

我选择的解决方案是迁移到 Ruby on Rails（我是 Rails 的大力支持者），但这将涉及其他开发人员的学习曲线（我们将使用任何解决方案）。此外，这方面的另一个困难是将一些非常复杂的表单转换为 HTML 表单。

有没有人解决过这样的解决方案？Oracle 以外的任何人都提供任何软件包吗？

任何特定的 Java Web 框架？

GWT、jQuery UI、ExtJS 或任何其他 JavaScript UI 框架能否提供所需的丰富用户体验？

.NET 是一个考虑因素，但也是最后的手段（主要是因为许可证成本，除了我们为 Oracle 许可证支付的费用之外，预算中没有空间）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-10-07T19:24:08.693

这正是我目前正在使用的......

[Oracle Application Express](http://apex.oracle.com/i/index.html)

对于 Forms 开发人员而言，学习曲线比大多数基于 Web 的替代方案要小得多，因为所有代码都在 PL/SQL 中（除非你开始喜欢 Javascript，你可以）。此外，在最新版本的 Application Express (3.2) 中，有一个[工具可以将 Forms 应用程序转换为 Apex](http://www.oracle.com/technology/obe/apex32/apex32frmmigr.htm)。

自 9.2 起，它随 Oracle 版本免费提供。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-07T19:30:37.650

我会为 Oracle Application Express +1 - 我认为在您的情况下有一些显着的优势。

1.  免费许可
2.  如果他们是像我这样的甲骨文偏执狂，这对当前的员工来说可能是一个有吸引力的选择。
3.  它是 100% Web，在 11g 中甚至不需要 Web 层。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-04T04:47:36.880

一个非常晚的答案，但相关。即将发布的 Oracle Application Express V3.2 版本添加了一个 Oracle Forms 迁移工具，您可能会发现它进一步提高了您的工作效率。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-03-04T15:47:06.797

您应该查看这个站点[http://www.forms2net.com/](http://www.forms2net.com/)它是 Oracle Forms 到 .Net 的迁移工具。这是相当不错的东西！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-12T16:47:24.717

在荷兰，QAFE ( [http://www.qafe.com](http://www.qafe.com) ) 正在成为一种流行的替代品。他们已经存在了几年，也为欧洲以外的公司提供服务。

### 他们声名鹊起

*   自动转换和重用 60-70% 的代码
*   应用过滤规则使输出更干净（删除所有不再适用/需要的代码）。提高输出代码质量的新功能。
*   使用输出并直接在 QAML Builder 中编辑/运行
*   提供您的样式（通过 CSS）
*   定义规则集后的批量处理表单
*   用于更好的影响分析的表格分析
*   轻松呈现您想要的任何 Web 技术（以及尚未开发的技术） - 因为表示层与“逻辑”分离

我为开发这个平台的公司工作，所以不要相信我的话，自己尝试一下，让我知道你的想法；我认为这些人制作了甲骨文之外最好的软件包。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-07T19:44:49.493

Oracle 维护[了一份供应商列表，](http://www.oracle.com/technology/products/forms/htdocs/Oracle_Forms_Migration_Partners.htm)他们都专门从事您需要做的事情。

由于 Oracle Forms 的大量安装基础，这是一个非常普遍和流行的话题。如果你做一个简单的[谷歌搜索](http://www.google.com/search?q=oracle+forms+to+j2ee)，就会有很多关于这种转变的说法。

以我个人的经验，我们很幸运地构建了我们的 Oracle Forms 应用程序以拥有良好的 PL/SQL API。在我们手动完成的向 J2EE 的过渡过程中，重用所有现有的 PL/SQL 很简单。不过，听起来您有太多表单无法有效地做到这一点。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-12-29T04:21:15.423

Oracle 迁移助手是免费的。它几乎完全符合 PITSS 为迁移所做的工作。PITSS 提供了一些可以在未来使用的简洁的东西，这将证明成本是合理的。但如果它是您需要的表单迁移，迁移助手会做同样的工作。

但是，如果您确实购买了 PITSS，您可以轻松编写一个脚本来将一组表单重命名为可重复的名称，并记录名称在哪里。以 1.fmb、2.fmb 等名称加载。执行更改。然后使用另一个引用日志文件的日志文件将它们重命名。然后重复另一组表格。每 100 份表格可以为您节省数千份。

报告迁移是浪费时间。无论如何，您都必须打开每个表单并重新定位字段，尤其是在参数表单上。如果没有 PITSS 工具，这就是您所要做的一切。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-02-23T14:47:10.783

尝试联系 ATX 的相关人员：http: [//www.atxtechnologies.co.uk/java/forms2java/](http://www.atxtechnologies.co.uk/java/forms2java/)。J2EE Java 加上 Adob​​e Flex 意味着许可可能是免费的（除非您也需要 Flash Builder）。如果它像 Forms2Net，转换率会相当高，之后你会得到高质量的 Java 代码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-11T04:23:22.370

嗨，我使用 GWT/springs/ORMS 组合做了类似的工作，结果非常棒，但它也取决于业务流程的复杂性，我的业务流程非常复杂，我所做的是分离所有层并处理每一层都是一种服务，在这个过程中，我做了一个应用程序，每个人都赞叹不已，同时有资格获得许多认证，但如果你想更快地完成它而不改变前端，你可以使用 exodus 欢呼

花瓶

vasem_want@yahoo.co.uk

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-04T21:41:41.143

我发现 PITSS ( [http://www.pitssamerica.com](http://www.pitssamerica.com) ) 开发的 PITSS.CON 是最好的 Oracle Forms Migration。PITSS.CON 可以在几天内从任何 2.3 迁移到 10g，而不是手动执行此操作，您可以花费几个月的时间处理几百个表格或几年的时间处理一千多个表格。这个工具能做什么令人难以置信。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-08T12:25:52.327

嗨，我为 PITSS (pitssamerica.com) 工作，我想详细说明 gwoods1412 所说的内容。您可以从任何版本的 Oracle Forms 2.3、3.0、4.0、4.5、5.0、6i 或 9i 迁移到 10g。该工具还可以迁移您的 Oracle 报表，我们有一个解决方案来解决使用报表参数表单的问题。Oracel Forms and Reports 10g 是一个基于 Web 的解决方案，因此您不必为迁移到另一个平台而付出代价。

APEX 可以免费使用，但不能免费迁移。并且迁移工具只提取字段（项目），它不提取业务逻辑。因此，您并没有从表单中获得真正的投资，而是获得了查询和字段描述。

如果您使用 PITSS.con 之类的工具，几天后您将在网络上测试您的应用程序。您的开发人员将在其他项目上工作，并且一切都将是正确的。哦，是的，您也可以在 10g 中与 APEX、ADF、Java、.NET 等进行互操作。这意味着可以在新工具集中完成新的开发。您开始逐步有条不紊地迁移到新技术。两年内没有举办大型发布会真是太好了，而本月您可以举办一场。

APEX 并不是真正的企业解决方案。以下是 Oracle APEX 产品经理 David Peake 的一句话：

“我的主要目标之一是不要过度推销 APEX 转换功能，并确保与会者了解转换表单需要大量投资，而且无论您要转换到什么工具，这都不是一件容易的事。”

我从 Grant Ronald 的（Oracle 融合中间件产品经理）博客中偷了那句话，可以在[Grant 的博客上查看](http://groundside.com/blog/GrantRonald.php?p=771&more=1&c=1&tb=1&pb=1)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-06-01T19:42:15.027

您确实需要查看 TurboEnterprise 的 Forms Conversion 实用程序。我不使用 Oracle Forms，但我的一个朋友使用他们的软件来隐藏 Oracle Forms，他喜欢它。我想他们的网站上也有免费版本。www.turbo-enterprise.com

# asp.net - DataGrid中自动生成的列的宽度问题

> ID：179860
> 
> 赞同：1
> 
> 时间：2008-10-07T18:57:55.207
> 
> 标签：asp.net

也许世界和平会更容易，但是当 DataGrid 没有行时，我对自动生成的列的宽度有疑问。列标题全部挤在一起，它们之间没有间距。我尝试添加以下 CSS 无济于事：

```
td.gridHeader
{
  padding-left:20px;
  padding-right: 20px;        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-07T19:04:47.080

我相信标题被呈现为 <th> 而不是 <td>。

```
th.gridHeader
{
  padding-left:20px;
  padding-right: 20px;        
} 
```

我还假设您在 DataGrid 标记中应用了 <HeaderStyle CssClass="gridHeader" />。我认为人们不再使用 DataGrids 了吗？或者它实际上是一个 GridView ？

# c# - .NET BCL 中的跟踪与调试

> ID：179868
> 
> 赞同：64
> 
> 时间：2008-10-07T19:00:50.940
> 
> 标签：c#, .net, debugging, instrumentation

看来

*   [`System.Diagnostics.Debug`](https://msdn.microsoft.com/en-us/library/system.diagnostics.debug(v=vs.110).aspx)， 和
*   [`System.Diagnostics.Trace`](https://msdn.microsoft.com/en-us/library/system.diagnostics.trace(v=vs.110).aspx)

大体上是相同的，除了**Debug**使用是在发布配置中编译出来的显着例外。

你什么时候用一个而不用另一个？到目前为止，我找到的唯一答案就是您使用**Debug**类生成只能在调试配置中看到的输出，并且**Trace**将保留在发布配置中，但这并不能真正回答我的头。

如果你要检测你的代码，你为什么要使用**Debug**，因为**Trace**可以在不重新编译的情况下关闭？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2008-10-07T19:07:01.083

主要区别在于您指出的那个： Debug 不包含在发布中，而 Trace 包含。

据我了解，预期的区别在于，开发团队可能会使用 Debug 来发出丰富的描述性消息，这些消息对于产品的消费者来说可能过于详细（或暴露），而 Trace 旨在发出那种更具体地用于检测应用程序的消息。

要回答您的最后一个问题，我想不出使用 Debug 来检测我打算发布的一段代码的理由。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-30T13:50:15.367

trace 和 debug 之间的唯一区别是，当程序编译成 release 版本时，trace 语句默认包含在程序中，而 debug 语句则不包含。

因此，debug 类主要用于开发阶段的调试，而 trace 可用于应用程序编译发布后的**测试和优化。**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2011-12-26T06:14:58.493

Debug 用于纯粹的调试目的。它在调试执行（调试模式）中发出丰富的消息。

Trace 有助于应用程序调试、错误修复和分析（发布后）。

Debug 类在发布模式下没有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-07T19:04:08.203

我会考虑使用 log4net 进行跟踪，因为它的功能更加灵活和强大。

但是对于我从未打算让除我或内部测试人员以外的任何人看到的真正调试消息，我可能会坚持使用 Debug。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-07T19:08:05.607

对于高性能敏感代码块，将 Trace 保留为已编译但禁用可能会产生性能差异。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-06-10T09:44:00.573

Trace 和 Debug 之间的完全区别：

> Debug 和 Trace 都使用 System.Diagnostics 命名空间。
> 
> 调试
> 
> *   它使用调试类。
> *   它用于调试构建。
> *   它使用应用程序开发的时间。
> *   在调试模式下，编译器会在可执行文件中插入一些调试代码。
> *   调试类仅在调试模式下工作。
> *   无法使用 Debug 进行性能分析。
> *   调试用于查找程序中的错误。
> *   对于 Debug，我们可以使用 Debug.Write() 方法。
> *   调试在与主程序执行相同的线程中运行。
> 
> 痕迹
> 
> *   它使用 Trace 类。
> *   当程序编译到发布的版本中时，跟踪语句默认包括。
> *   即使在编译和发布应用程序之后，Trace 类也用于测试和优化。
> *   Trace 类在调试模式和发布模式下都有效。
> *   跟踪以不同的线程形式运行主程序执行线程。
> *   对于 Trace，我们可以使用 Trace.Write() 方法。
> *   它使用应用程序部署的时间。

参考：[C# 角](https://www.c-sharpcorner.com/blogs/difference-between-debug-and-trace1)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-07T19:07:32.283

你已经回答了你自己的问题。如果 Debug 消息保留，人们可以看到它们。例如，假设您这样做：

```
Debug.WriteLine("Connecting to DB with username: blah and PW: pass"); 
```

任何反编译您的代码的人都可以看到这一点。但这可能是您在测试期间了解的非常重要的事情。

迹不同。如果您要进行 Trace，我可能只使用 log4net。

# windows - 需要 Excel SheetSelectionChange 事件示例

> ID：179872
> 
> 赞同：0
> 
> 时间：2008-10-07T19:02:40.937
> 
> 标签：windows, excel, visual-c++, com

我正在尝试解决一个问题，涉及将 C++ 程序与 Excel 接口（特别是导入接口）。SheetSelectionChange 听起来它会让我大部分时间到达我需要的地方，但我找不到任何关于注册事件、在触发时使用其 Range 参数以及在完成时取消注册的好的文档或示例。我的代码目前不使用 COM 包装类；它发出 QueryInterface 调用以获取指向 Excel 中接口的指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-10-07T19:07:52.907

您需要实现 Excel 事件接口，然后在 Excel 连接点上提供建议。查看[Office Automation Using VC++](http://support.microsoft.com/kb/196776/)，更具体地说是第 7 点。您还可以查看[Handle Events for Excel using Visual C++.Net](http://support.microsoft.com/kb/309301)

# python - MATLAB 有什么用？为什么大学如此使用它？什么时候比 Python 更好？

> ID：179904
> 
> 赞同：53
> 
> 时间：2008-10-07T19:11:46.427
> 
> 标签：python, matlab

我最近被要求为一堂课学习一些 MATLAB 基础知识。

是什么让研究人员和在大学工作的人如此酷？我看到使用矩阵和绘制东西很酷......（可以使用一些库在 Python 中轻松完成的事情）。

编写函数或解析文件只是痛苦的。我还处于起步阶段，我错过了什么？

在“真实”世界中，我应该认为将它用于什么？什么时候能比 Python 做得更好？为了更好，我的意思是：写一些表演的简单方法。

* * *

**更新 1：**我最想知道的一件事是“我错过了什么吗？” :D

**更新2：**感谢您的回答。我的问题不是关于购买或不购买 MATLAB。大学可以免费给我一份旧版本的 MATLAB（我猜是 MATLAB 5）的副本，而不会破坏许可证。我对它的功能很感兴趣，如果它值得更深入的研究（我只需要*基本*的 MATLAB 就可以通过考试：P）对于特定类型的任务来说，它确实比 Python 更好世界。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2008-10-07T20:47:37.370

亚当只是部分正确。许多（如果不是大多数）数学家永远不会碰它。如果要使用计算机工具，那将是[Mathematica](http://en.wikipedia.org/wiki/Mathematica)或[Maple](http://en.wikipedia.org/wiki/Maple_(software))之类的东西。另一方面，工程部门经常依赖它，而且对于一些应用数学家来说肯定有一些有用的东西。它还在某些领域的工业中大量使用。

关于 MATLAB，您必须了解的是，它最初是作为[Fortran](http://en.wikipedia.org/wiki/Fortran)线性代数库的包装器。长期以来，它有一种态度，即“整个世界都是一堆双打（花车）”。作为一门语言，它已经非常有机地成长，如果你把它看作一门编程语言的话，它有一些非常明显的缺陷。

但是，如果您将其视为进行某些类型研究的环境，它具有一些真正的优势。它与做浮点线性代数一样好。该符号简单而强大，实现快速且值得信赖。它非常擅长生成情节和其他交互式任务。有大量的“工具箱”为特定任务提供了很好的代码，而且价格实惠。有一个庞大的用户社区共享数字代码（Python + [NumPy](http://en.wikipedia.org/wiki/NumPy)在同一个联盟中没有任何东西，至少目前如此）

Python，疣和所有，是一种更好的编程语言（和许多其他语言一样）。然而，就工具而言，它落后了十年左右。

关键是大多数使用 MATLAB 的人并不是真正的程序员，也不想成为。

对于通用编程语言来说，这是一个糟糕的选择；它很古怪，对于许多任务来说很慢（你需要对事物进行矢量化以获得高效的代码），并且不容易与外界集成。另一方面，对于它擅长的事情，它是非常非常好的。很少有东西比较。有一家公司有合理的支持，谁知道投入了多少人年。这在工业中可能很重要。

严格查看您的 Python 与 MATLAB 比较，它们大多是针对不同工作的不同工具。在它们确实有些重叠的领域，很难说更好的路线是什么（很大程度上取决于你想要做什么）。但大多数情况下，Python 并不擅长 MATLAB 的核心优势，反之亦然。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2011-12-01T19:44:12.893

大多数答案都没有抓住重点。

matlab 如此优秀和如此广泛使用的原因之一是：

## 极快的编码

我是一名计算机视觉博士生，使用 matlab 已经 4 年了，在我攻读博士学位之前，我使用不同的语言，包括 C++、java、php、python ......大多数计算机视觉研究人员都只使用 matlab。

## 1) 研究人员需要快速原型

在研究环境中，我们（希望）经常有新想法，我们希望快速测试它们，看看是否值得继续朝这个方向发展。大多数情况下，我们编写的代码中只有一小部分有用。

**Matlab在执行时**通常较慢，但我们并不在意。因为我们事先不知道什么方法会成功，所以我们必须尝试很多事情，所以**我们的瓶颈是编程时间**，因为我们的代码通常会运行几次才能获得结果发布，那就是全部。

那么让我们看看matlab如何提供帮助。

## 2）我需要的一切都已经有了

Matlab 确实有很多我需要的功能，所以我不必一直重新发明它们：

将矩阵的索引更改为 2d 坐标：`ind2sub`提取图像的所有补丁：`im2col`；计算图像的直方图`hist(Im(:))`：查找列表中的唯一元素`unique(list)`；将向量添加到矩阵的所有向量`bsxfun(@plus,M,V)`；n维数组上的卷积`convn(A)`；计算代码子部分的计算时间：`tic; %%code; toc`；裁剪图像的图形界面：`imcrop(im)`;

列表可能很长......并且通过使用帮助很容易找到它们。

最接近的就是python了...不过就是python的一个痛点，每次都要去google找自己需要的函数名，然后还要加包，包不兼容一个接一个，矩阵的格式发生变化，卷积函数只处理双精度但我给它char时不会出错，只是给出错误的输出......没有

## 3) 集成开发环境

一个例子：我启动一个脚本。由于矩阵，它会产生错误。**我仍然可以使用命令行执行代码。**我想象它在做：`imagesc(matrix)`. 我看到矩阵的最后一行很奇怪。我修复错误。**所有变量仍然设置**。我选择了剩下的代码，按 F9 执行选择，一切继续。多亏了这一点，**调试变得很快。**

Matlab 在执行前强调了我的一些错误。所以我可以很快看到问题。它提出了一些让我的代码更快的方法。

IDE 中包含一个很棒的**分析器。**与此相比，KCahcegrind 使用起来非常痛苦。

python 的 IDE 非常棒。没有 ipython 的 python 是不可用的。我从来没有设法使用 ipython 进行调试。

+自动完成，函数参数的帮助，...

## 4）简洁的代码

为了标准化矩阵的所有列（我一直需要），我这样做： `bsxfun(@times,A,1./sqrt(sum(A.^2)))`

要从矩阵中删除总和较小的所有列：

`A(:,sum(A)<e)=[]`

**在 GPU 上进行计算**：

```
gpuX = gpuarray(X); 
%%% code normally and everything is done on GPU 
```

使我的代码瘫痪：

```
parfor n=1:100
%%% code normally and everything is multi-threaded 
```

什么语言能打败它？

当然，我很少需要创建循环，所有内容都包含在函数中，这使代码更易于阅读，而且索引也不会令人头疼。所以我可以专注于我想要编程的内容，而不是如何编程。

## 5) 绘图工具

Matlab 以其绘图工具而闻名。他们非常有帮助。

Python 的绘图工具的功能要少得多。但是有一件事超级烦人。每个脚本只能绘制一次数字？？？如果我有脚本，我无法在每一步都显示东西--->没用。

## 6) 文档

一切都非常容易访问，一切都非常清晰，功能名称选择得很好。使用 python，我总是需要在谷歌上搜索东西，查看论坛或 stackoverflow.... 完成时间。

**PS：最后，我讨厌 matlab 的地方：它的价格**

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2008-10-10T23:47:23.830

多年来，我一直在使用 matlab 进行研究。它非常适合线性代数，并且有大量编写良好的工具箱。最新版本开始将其推向更接近通用语言（更好的优化器、更好的对象模型、更丰富的范围规则等）。

去年夏天，我有一份工作，我使用 Python + numpy 而不是 Matlab。我很享受节奏的变化。它是一种“真正的”语言（以及所需要的一切），并且它具有一些很棒的数字功能，例如广播数组。我也很喜欢 ipython 环境。

以下是我更喜欢 Matlab 的一些东西：

*   *一致性：* MathWorks 花了很多精力使工具箱看起来和工作起来都一样。他们还没有完成完美的工作，但这是我见过的有几十年历史的代码库中最好的之一。
*   *文档：*我发现在 numpy 和/或 python 中找出一些东西非常令人沮丧，因为文档质量参差不齐：有些东西记录得很好，有些根本没有。当我看到看起来像 Matlab 的东西时，通常最令人沮丧，但工作方式却不尽*相同*。能够获取源代码是无价的（公平地说，大多数 Matlab 工具箱也附带源代码）
*   *紧凑性：*对于我所做的，Matlab 的语法通常更紧凑（但并非总是如此）
*   *动力：*我现在有太多 Matlab 代码要更改

如果我没有这么大的现有代码库，我会认真考虑切换到 Python + numpy。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2008-10-08T05:53:11.513

抓住一切。你最后一次用计算器编程玩俄罗斯方块是什么时候？你真的认为你可以在这 128k 的 RAM 中写任何你想要的东西吗？可能不会。MATLAB 不是用于编程的，除非您正在处理巨大的矩阵。当您有兆字节到千兆字节的数据需要处理和/或绘制时，它就是您可以使用的图形计算器。只学习基本的东西，但也不要为了让 Python 成为图形计算器而自杀。

当您想在 MATLAB 中进行处理、绘图或探索，以及何时想要拥有 Python 提供的所有功能时，您会很快感觉到。许多工程师转向使用 Python 或 Perl 进行预处理和后处理。有时甚至只是向 MATLAB 求助。

它们是完全不同的工具，你应该首先了解它们的基本优势，而不是试图用另一个来代替。为了省钱，我要么使用 Octave，要么轻松地学习使用 Perl 或 Python 中的稀疏矩阵。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2008-10-07T19:13:08.437

MATLAB 非常适合进行数组操作、专门的数学函数以及快速创建漂亮的图。

如果我可以使用大量数组/矩阵操作，我可能只会将它用于大型程序。

您不必像在更正式的软件包中那样担心 IDE，因此对于没有大量编程经验的学生来说更容易上手。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2008-10-08T04:41:56.260

MATLAB 是一种流行且广泛适用的复杂软件包。认为它只是一个数学软件是错误的，因为它具有广泛的“工具箱”。我最近使用[Matplotlib](http://en.wikipedia.org/wiki/Matplotlib)从数据库中绘制了一些数据，它完成了这项工作，而不需要 MATLAB 的所有花里胡哨。但是，在每种情况下比较 Python 和 MATLAB 可能并不合适。与其他一切一样，决定取决于您需要做什么。

我在本科时使用 MATLAB 进行控制系统设计和仿真，还在研究生院进行图像处理。由于强大的控制和图像处理工具箱，MATLAB 对这些领域最有意义。正如大家所提到的，在您需要编写的每个 MATLAB 脚本中使用的数组操作在 MATLAB 中非常容易。

MATLAB 的另一个好处是，使用内置工具箱函数进行原型设计和尝试想法非常容易和快速。例如，导入图像并计算其直方图或对其进行一些简单的处理并不费力。MATLAB 的一个缺点可能是它的速度，因为它具有解释性。但是，如果一个人真的需要速度，他可以选择在 C/C++ 等中实现测试的逻辑。

为了进一步与 Python 进行比较，我可以说 MATLAB 为您提供了一个完整的包来完成您的工作，而无需四处寻找外部库和实现额外的函数。

我看到的关于 MATLAB 的最后一点在这里的答案中没有提到，它有一个非常强大的可视化建模/仿真环境，称为[Simulink](http://www.mathworks.com/products/simulink/)。使用 Simulink 可以更轻松地设计和仿真更大的系统。

最后，同样，这完全取决于您需要解决的问题。如果您的问题域可以使用 MATLAB 的工具箱之一并且您可以访问 MATLAB，那么您可以确定您将拥有正确的工具来解决它。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2008-10-07T19:34:09.080

正如其他人所提到的，MATLAB 非常擅长矩阵操作，最初是作为用于线性代数的著名[BLAS](http://www.netlib.org/blas/)和[LAPACK库的扩展而构建的。](http://www.netlib.org/lapack/)它与 Java 等其他语言的接口很好，并且因其开发良好且文档化的库而受到工程和科学公司的青睐。根据我对 Python 和 NumPy 的了解，虽然它们共享 MATLAB 的许多基本功能，但它们的库并没有完整的广度和深度。

就个人而言，我使用 MATLAB 是因为那是我在实习中学到的，那是我在研究生院使用的，也是我在第一份工作中使用的。我对 Python（或任何其他语言）没有任何反对意见。这也是我常用的。

此外，除了来自 gnu的 @Jim [C](https://stackoverflow.com/questions/179904/what-is-matlab-good-for-why-is-it-so-used-by-universities-when-is-it-better-tha#179935)提到的 scilab 之外，还有另一个免费版本，称为[Octave](http://www.gnu.org/software/octave/)。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2008-10-08T03:53:22.520

就个人而言，我倾向于将 Matlab 视为具有一些脚本功能的交互式矩阵计算器和绘图工具，而不是像 Python 或 C 这样的成熟编程语言。它成功的原因是矩阵的东西和绘图工作盒子，你可以在里面做一些非常具体的事情，几乎没有实际的编程知识。正如您所指出的，该语言在用于更通用的任务时非常令人沮丧，例如即使是最简单的字符串处理。它的语法很古怪，并且在创建它时并没有考虑到超过 100 行左右的项目所需的抽象。

我认为人们尝试使用 Matlab 作为一种严肃的编程语言的原因是大多数工程师（也有例外；我的学位是生物医学工程，我喜欢编程）都是糟糕的程序员并且讨厌编程。他们在大学里学习 Matlab 主要是为了矩阵数学，并且他们学习了一些基本的编程作为学习 Matlab 的一部分，并且只是假设 Matlab 足够好。除了一些纯数字运算应用程序之外，我想不出我认识的任何人都知道除了 Matlab 之外的任何语言，但仍然将 Matlab 用于任何其他应用程序。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2008-10-07T19:13:16.093

它在大学中如此广泛使用的最可能的原因是数学教师已经习惯了它，理解它，并且知道如何将它纳入他们的课程中。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2008-10-07T19:17:03.247

在[matplotlib+pylab](http://matplotlib.sourceforge.net/)和[NumPy](http://numpy.scipy.org/)之间，除了@Adam Bellaire 所建议的文化惯性之外，我认为 Matlab 和 python 之间并没有太大的实际区别。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2008-10-07T19:40:56.070

我相信你有一个很好的观点，它是在我工作的公司提出的。由于涉及许可费用，该公司在应用 matlab 的能力方面受到限制。一位开发人员证明 Python 是一个非常合适的替代品，但它落入了无知的耳朵，因为对于那些耳朵的所有者......

1.  尽管我们中的许多人都想使用它，但公司里没有人知道 Python。
2.  MatLab 背后有一个名字、一个公司和一个工作组来解决任何问题。
3.  有一些（但不是很多）遗留的 MatLab 项目需要重新编写。

如果它值 10,000 英镑（？？）它一定是值得的！！

我在这里和你在一起。Python 是 MatLab 的一个很好的替代品。

**我应该指出，我被告知该公司可能使用了 MatLabs 功能的 5% 到 10%，这是我同意原始海报的基础**

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2008-12-16T07:30:31.400

MATLAB 是一个很棒的工具

*   原型制作
*   工程模拟与
*   数据的快速可视化

您可以非常有效地在数据集上玩、可视化和测试您的想法。它不应被视为用于产品开发的其他软件语言的替代品。我强烈推荐它用于上述任务，尽管它很昂贵 - [Octave](http://en.wikipedia.org/wiki/GNU_Octave)和 Python 等免费替代品正在迎头赶上。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2008-10-08T02:14:20.660

似乎是纯粹的惯性。用在哪里，大家都忙着学习IDL或numpy足够详细的切换，也不想重写好的工作程序。幸运的是，这并不完全正确，但在足够多的地方足够正确，Matlab 将存在很长时间。像 Fortran （在我工作的地方积极使用！）

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2008-10-07T19:21:18.810

它在工业中有用的主要原因是建立在核心功能之上的插件。过去几年中几乎所有活跃的 Matlab 开发都集中在这些方面。

不幸的是，你不会有太多机会在​​学术环境中使用这些。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2008-10-07T19:40:25.433

MATLAB 在大学中受欢迎的一个原因与很多东西在大学中受欢迎的原因相同：有很多教授熟悉它，而且它相当强大。

我已经与许多对 MATLAB 开发 GPU 而不是串行工作的新兴能力特别感兴趣的人交谈过。在研究生院使用 Python 之后，我有点希望在这种情况下能够使用 MATLAB。它肯定会使向量空间计算变得轻而易举。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2008-10-08T05:52:33.073

MATLAB 是常用库的包装器。在许多情况下，它仍然是。当您获得更大的数据集时，它有许多额外的优化，包括检查和特殊情况下的常见问题（例如，在有用的地方减少到稀疏矩阵），以及处理边缘情况。通常，您可以将标准形式的问题提交给通用函数，它将根据您的数据确定要使用的最佳底层算法。对于小的 N，所有算法都很快，但 MATLAB 使确定最佳算法成为非问题。

这是由讨厌 MATLAB 的人编写的，并且由于集成问题而试图替换它。从您的问题中，您提到获得 MATLAB 5 并将其用于课程。在那个级别，您可能想查看 [Octave](http://www.gnu.org/software/octave/)，这是一个具有相同语法的开源实现。我猜它现在已经达到了 MATLAB 5 级别（我只玩它）。这应该可以让你“通过考试”。对于裸 MATLAB 功能，它似乎很接近。它缺乏工具箱支持（同样，它主要用于将函数调用重新定义为该领域工程师熟悉的形式，并选择正确的底层算法来使用）。

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2009-07-11T06:02:31.317

我知道这个问题很老，因此可能不再被观看，但我觉得有必要发表评论。作为佐治亚理工学院的航空工程师，我可以毫不犹豫地说 MATLAB 非常棒。您可以让它与您的 Excel 电子表格快速交互，以获取有关火箭飞行的高度和速度、风如何影响这些相同的火箭以及不同引擎的重要性的数据。除了火箭，类似的概念也适用于汽车、卡车、飞机、航天器，甚至是田径运动。您可以提取大量数据，操纵所有数据，并确保您的结果是应有的。如果出现问题，您可以在出现错误的地方添加换行符来调试程序，而无需每次运行程序时都重新编译。它比其他一些程序慢吗？嗯，从技术上讲。一世'

作为一种通用的编程语言，MATLAB 是薄弱的。它不适用于 Python、Java、ActionScript、C/C++ 或任何其他通用语言。顾名思义，它适用于工程和数学领域，而且做得非常好。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2008-10-07T22:46:25.650

自从我使用 Matlab 已经有一段时间了，但是从内存中它确实提供了（尽管有额外的插件）生成源代码的能力，以允许您在 DSP 上实现您的算法。

由于 python 是一种通用编程语言，所以没有理由不能在 python 中完成在 matlab 中可以完成的所有操作。但是，matlab 确实提供了许多其他工具 - 例如。非常广泛的 dsp 特性，广泛的 S 和 Z 域特性。

所有这些都可以用 python 手动编码（因为它是一种通用语言），但如果你所追求的只是结果，那么在 Matlab 上花钱是更便宜的选择吗？

这些功能也针对性能进行了调整。例如。Numpy 的文档指定他们的傅立叶变换针对 2 点数据集的功率进行了优化。据我了解，Matlab 已被编写为使用最有效的傅立叶变换来适应数据集的大小，而不仅仅是 2 的幂。

编辑：哦，在 Matlab 中，您可以很容易地制作一些*看起来*很吸引人的图，这在您展示数据时很重要。同样，使用其他工具当然不是不可能的。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2008-10-08T04:03:27.897

当您注意到 Matlab “使用矩阵和绘图很酷”时，我认为您回答了自己的问题。任何需要大量矩阵数学和可视化的应用程序都可能在 Matlab 中最容易完成。

也就是说，Matlab 的语法感觉很别扭，显示出语言的年代。相比之下，Python 是一种更好的通用编程语言，并且通过正确的库可以完成 Matlab 所做的大部分工作。但是，对于向量和矩阵操作，Matlab 的语法总是比 Python 更简洁。

如果您的大部分编程都涉及这些类型的操作，例如信号处理和一些统计技术，那么 Matlab 将是一个更好的选择。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2008-10-07T19:28:58.543

[先发优势](http://en.wikipedia.org/wiki/First_mover_advantage)。 [自 1970 年代后期以来， Matlab](http://en.wikipedia.org/wiki/Matlab)一直存在。Python 是最近才出现的，使其适用于 Matlab 类型任务的库甚至是最近才出现的。人们习惯了 Matlab，所以他们使用它。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2009-12-11T21:00:44.033

Matlab 擅长进行数字运算。还有矩阵和矩阵操作。它有许多有用的内置库（取决于什么版本）如果你要计算方程，我认为它比 python 更容易使用。

# c++ - 如何在 C++ ODBC 中使用多个记录集

> ID：179907
> 
> 赞同：0
> 
> 时间：2008-10-07T19:12:34.303
> 
> 标签：c++, sql-server, odbc

我正在尝试简化将信息存储在多个表中并将它们链接到中央表的复杂过程。使用每个表中生成的 IDENTITY 值进行链接以提供唯一链接。我知道我可以使用 SET NOCOUNT ON 和 SELECT @@identity 的组合来获取每个身份，但这仍然需要我为每个表调用单独的 SQLExecute()。我已经阅读了几十篇文章说 ADO 可以使用 ODBC 驱动程序处理多个记录集，所以问题是我如何在没有 ADO 的情况下做到这一点？

我已经封装了与 ADO 类似的所有标准 ODBC 内容。我基本上只需要知道哪些 ODBC API 调用将允许我重新创建 ADO 的 NextRecorset()。

我正在开发 MS SQL 7 和 MS SQL 2005 的组合，酌情使用 SQL Server ODBC 或 SQL Native Client 驱动程序。

最终目标：

```
SET NOCOUNT ON;
INSERT INTO TableA (data) VALUES ('a');
SELECT @@identity AS  NewID;
INSERT INTO TableB (data) VALUES ('b');
SELECT @@identity AS  NewID;
INSERT INTO TableC (data) VALUES ('c');
SELECT @@identity AS  NewID;
...
RS = DB.OpenRecordset()
RS.MoveFirst()
A_ID = RS.GetValue("id")
RS.NextRecordset()
RS.MoveFirst()
B_ID = RS.GetValue("id")
RS.NextRecordset()
RS.MoveFirst()
C_ID = RS.GetValue("id") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-10-07T19:19:37.017

将`SQLMoreResults()`调用用作`NextRecordSet()`函数的模拟。

但是，如果您愿意让您的执行由以下组成，您可能不需要它`INSERT ...; SELECT @@IDENTITY`因为从该语句返回的唯一结果是身份，您不需要为`SQLMoreResults()`.

# ruby - 我在哪里可以从免费提供的经典“Programming Ruby”电子书中找到缺失的数字？

> ID：179911
> 
> 赞同：0
> 
> 时间：2008-10-07T19:13:10.697
> 
> 标签：ruby

我正在研究“Programming Ruby-The Pragmatic Programmer's Guide”的内容，但 HTML 版本不包括图表。

这些数字在网上任何地方都可以找到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-07T19:16:47.740

不幸的是，HTML 版本适用于旧版本的 Ruby，并且不再维护。如果你想通过*Programming Ruby*这本书学习 Ruby，你应该购买[最新版本的](http://pragprog.com/titles/ruby/programming-ruby).

# asp.net-mvc - ASP.NET MVC + ORM

> ID：179915
> 
> 赞同：3
> 
> 时间：2008-10-07T19:15:37.150
> 
> 标签：asp.net-mvc, activerecord

我正在使用 ASP.NET MVC 启动一个项目，并已开始创建我的模型。因为我了解*一些*Ruby On Rails，并且希望尽可能使用类似于 Rails **Active Record**的系统。

有没有人在 ASP.NET MVC 应用程序（或任何相关的应用程序）中使用**Castle Projects Active Record并有一些经验可以分享？**

MVC 和 Castle Active Record 是正确的方法还是建议我改用 LinqToSql。

请分享您可能获得的任何想法和经验。

编辑：澄清；我有很长的 ASP.NET 和 C# 背景，但看过一点 Rails，很喜欢创建 ORM 是多么容易

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-07T19:40:45.570

我在 ASP.NET MVC 中使用了 Castle Active Record。我非常鼓励这种模型，因为 ActiveRecord/NHibernate 比 LINQ to SQL 或实体框架要成熟得多。

我认为 ASP.NET MVC 有一个光明的未来，并且会推荐它而不是 Monorail 用于新项目。然而，正如我所说，ActiveRecord（在我看来）是优于 LinqToSQL 的 ORM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-07T19:23:13.843

来自 Rails 的背景，Castle Project AR 会感觉更接近您的习惯，但 Linq to SQL 更好地与整个 Microsoft 生态系统集成，您可能会发现这值得付出额外的努力来学习它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-07T19:30:58.977

Linq to SQL 有一些主要的缺失部分，尤其是多对多关系。如果您要走“纯”Microsoft 路线，请查看使用新 ADO.net 实体框架的 .net 3.5 sp1 和 Linq to Entities。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-07T19:34:12.777

我已经将 Castle ActiveRecord 与 MonoRail 一起使用，它非常易于使用且直观，尽管您会遇到的不可避免的问题通常很难诊断。它的文档也不是最好的（与许多开源项目一样）。默认情况下，它在下面使用 NHibernate ORM，如果您专门在使用 ORM 框架之后，我相信已经做出了一些努力来支持 NHibernate 的 LINQ，但不知道它走了多远。

我认为这也取决于应用程序的大小，如果它是一个不一定需要大量维护的快速项目，那么 ActiveRecord 提供的易用性可能会很方便，但是 LINQ 也看起来非常简单和整洁。如果它是一个更大的应用程序，我会考虑使用 NHibernate 滚动您自己的数据层，如果它特别是您想要的 ORM。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-07T19:43:14.333

您是否需要免费的 ORM（如啤酒）/开源？

如果你不这样做，那么我强烈推荐DevExpress 的[eXpress Persistent Objects](http://www.devexpress.com/Products/NET/ORM/)。

如果不是，那么我认为 LINQ 不相似，我没有使用 Castle 的 ActiveRecord 但我想这与 RoR 最相似

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-08T18:10:06.923

MVC 不知道您使用的是什么 ORM，或者背后是否有一些 ORM 工具。Controller/Action 必须向 View 发送对象引用，以便对象可以是简单的 int、字符串数组、DataSet、Linq 对象、ActiveRecord 对象等等，对于 View 来说，如何填充数据并不重要！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-27T02:55:30.463

首选 NHibernate 作为您的持久层。

# c# - 如何检查文件夹是否可通过 C# 中的网络访问

> ID：179921
> 
> 赞同：0
> 
> 时间：2008-10-07T19:18:18.237
> 
> 标签：c#, filesystems, directory

我需要知道网络上的其他计算机是否可以访问一个文件夹，所以第一部分是检查该文件夹是否在整个网络中共享。由于我正在检查的文件夹可能是一个子文件夹，我不能只遍历计算机上的共享文件夹以检查其中一个是否指向我的文件夹，除非 WMI 允许我检查这个？

想法？

我想我应该多指定一点，我不需要知道这是否是一个共享文件夹，我需要知道这个文件夹是否是共享的。也就是说，这个文件夹本身很可能不是“共享文件夹”，而是共享文件夹下的子目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-07T19:34:08.160

这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/bb425864.aspx)解释了如何。只需检查文件夹的名称是否出现在示例中返回的共享文件夹列表中。

# .net - 如何解决“找不到元素/属性的架构信息 “？

> ID：179927
> 
> 赞同：47
> 
> 时间：2008-10-07T19:19:41.403
> 
> 标签：.net, xml, xsd, enterprise-library

在 Visual Studio 中，我有一个使用 MS Enterprise Library 4.0 应用程序块的 asp.net 3.5 项目。

当我打开我的 web 配置文件时，我的错误列表充满了 99 条消息，其中包括

```
Could not find schema information for the element 'dataConfiguration'.  
Could not find schema information for the attribute 'defaultDatabase'.  
Could not find schema information for the element 'loggingConfiguration'.   
Could not find schema information for the attribute 'tracingEnabled'.   
Could not find schema information for the attribute 'defaultCategory'. 
```

如果我关闭 Web.config 文件，它们就会消失（但只要我需要再次打开文件，它们就会回来）。

经过一番查看，我发现这是因为缺少 Visual Studio 需要的 XSD 或架构文件，以便正确“理解”web.config 文件中的架构并为其提供智能感知。

有谁知道如何为 VS 提供适当的模式信息，或者关闭这些消息？

@Franci - 感谢您提供信息，我已经尝试过该工具以及 MMC 管理单元（它们往往会破坏 Web.config 中的格式），但它们仍然无法解决我收到的恼人警告。感谢您的尝试。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-01-21T09:06:37.363

我已经根据我当前的 app.config 创建了一个新方案，以使消息消失。我刚刚使用了 Visual Studio 中显示“创建架构”的按钮，并为我创建了一个 xsd 架构。

将架构保存在适当的位置，然后查看 app.config 文件的“属性”选项卡，其中有一个名为 Schemas 的属性。如果单击此处的更改按钮，您可以选择同时使用原始 dotnetconfig 架构和您自己新创建的架构。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2011-09-22T15:34:06.720

XSD 包含在 EntLib 5 中，并安装在 Visual Studio 架构目录中。就我而言，它可以在以下位置找到：

“C:\Program Files (x86)\Microsoft Visual Studio 10.0\Xml\Schemas\EnterpriseLibrary.Configuration.xsd”

### 语境

*   视觉工作室 2010
*   企业图书馆 5

### 删除警告的步骤

1.  在 Visual Studio 项目中打开 app.config
2.  在 XML 文档编辑器中右键单击，选择“属性”
3.  将完全限定路径添加到“EnterpriseLibrary.Configuration.xsd”

### 在旁边

值得重申的是，这些“错误列表”“消息”（“找不到元素的架构信息”）仅在您打开 app.config 文件时可见。如果您“关闭所有文档”并编译...不会报告任何消息。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-01-21T09:45:10.950

我`app.config`使用 EntLib 配置工具进行了配置并设置了我的`LoggingConfiguration`块。然后我把这个复制到`DotNetConfig.xsd`. 当然，它并不涵盖所有属性，仅涵盖我添加的属性，但它不再显示那些烦人的信息消息。

```
<xs:element name="loggingConfiguration">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="listeners">
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" name="add">
              <xs:complexType>
                <xs:attribute name="fileName" type="xs:string" use="required" />
                <xs:attribute name="footer" type="xs:string" use="required" />
                <xs:attribute name="formatter" type="xs:string" use="required" />
                <xs:attribute name="header" type="xs:string" use="required" />
                <xs:attribute name="rollFileExistsBehavior" type="xs:string" use="required" />
                <xs:attribute name="rollInterval" type="xs:string" use="required" />
                <xs:attribute name="rollSizeKB" type="xs:unsignedByte" use="required" />
                <xs:attribute name="timeStampPattern" type="xs:string" use="required" />
                <xs:attribute name="listenerDataType" type="xs:string" use="required" />
                <xs:attribute name="traceOutputOptions" type="xs:string" use="required" />
                <xs:attribute name="filter" type="xs:string" use="required" />
                <xs:attribute name="type" type="xs:string" use="required" />
                <xs:attribute name="name" type="xs:string" use="required" />
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="formatters">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="add">
              <xs:complexType>
                <xs:attribute name="template" type="xs:string" use="required" />
                <xs:attribute name="type" type="xs:string" use="required" />
                <xs:attribute name="name" type="xs:string" use="required" />
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="logFilters">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="add">
              <xs:complexType>
                <xs:attribute name="enabled" type="xs:boolean" use="required" />
                <xs:attribute name="type" type="xs:string" use="required" />
                <xs:attribute name="name" type="xs:string" use="required" />
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="categorySources">
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" name="add">
              <xs:complexType>
                <xs:sequence>
                  <xs:element name="listeners">
                    <xs:complexType>
                      <xs:sequence>
                        <xs:element name="add">
                          <xs:complexType>
                            <xs:attribute name="name" type="xs:string" use="required" />
                          </xs:complexType>
                        </xs:element>
                      </xs:sequence>
                    </xs:complexType>
                  </xs:element>
                </xs:sequence>
                <xs:attribute name="switchValue" type="xs:string" use="required" />
                <xs:attribute name="name" type="xs:string" use="required" />
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="specialSources">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="allEvents">
              <xs:complexType>
                <xs:attribute name="switchValue" type="xs:string" use="required" />
                <xs:attribute name="name" type="xs:string" use="required" />
              </xs:complexType>
            </xs:element>
            <xs:element name="notProcessed">
              <xs:complexType>
                <xs:attribute name="switchValue" type="xs:string" use="required" />
                <xs:attribute name="name" type="xs:string" use="required" />
              </xs:complexType>
            </xs:element>
            <xs:element name="errors">
              <xs:complexType>
                <xs:sequence>
                  <xs:element name="listeners">
                    <xs:complexType>
                      <xs:sequence>
                        <xs:element name="add">
                          <xs:complexType>
                            <xs:attribute name="name" type="xs:string" use="required" />
                          </xs:complexType>
                        </xs:element>
                      </xs:sequence>
                    </xs:complexType>
                  </xs:element>
                </xs:sequence>
                <xs:attribute name="switchValue" type="xs:string" use="required" />
                <xs:attribute name="name" type="xs:string" use="required" />
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="name" type="xs:string" use="required" />
    <xs:attribute name="tracingEnabled" type="xs:boolean" use="required" />
    <xs:attribute name="defaultCategory" type="xs:string" use="required" />
    <xs:attribute name="logWarningsWhenNoCategoriesMatch" type="xs:boolean" use="required" />
  </xs:complexType>
</xs:element> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-07T19:24:54.183

您是否尝试将架构文件复制到 VS 的 XML 架构缓存文件夹？您可以通过查看 VS Tools/Options/Test Editor/XML/Miscellaneous 找到该文件夹​​的位置。不幸的是，我不知道 MS Enterprise Library 4.0 的架构文件在哪里。

**更新**：安装 MS 企业库后，似乎没有 .xsd 文件。但是，有一个用于编辑配置的工具 - EntLibConfig.exe，您可以使用它来编辑配置文件。此外，如果您将正确的配置部分添加到配置文件中，VS 应该能够正确解析配置文件。（EntLibConfig 会为你添加这些，或者你可以自己添加）。这是 loggingConfiguration 部分的示例：

```
<configSections>
    <section name="loggingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
</configSections> 
```

您还需要在项目中添加对相应程序集的引用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-28T19:15:14.373

对我来说，解决“找不到元素的架构信息......”的问题是

*   打开我的`app.config`.
*   在编辑器窗口中单击鼠标右键并选择`Properties`.
*   在属性框中，有一个名为 的行`Schemas`，我单击了该行并选择了`...`该行中出现的浏览框。
*   我只是选中了`use`包含我的项目的所有行的框，以及我正在使用的当前版本的 .Net。例如：`DotNetConfig30.xsd`。

之后，一切都正常工作。

我不确定我的项目中的那些模式行是如何被取消选中的，但是当我确保它们被选中时，我又重新开始工作了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-04T13:27:56.430

导航到此：[NLog xsd 文件](http://nlog-project.org/2010/06/30/intellisense-for-nlog-configuration-files.html)

为您的项目下载适当的 xsd 并将其保存在 NLog.config 中

第一个为我做了伎俩。

# asp.net - ASP.NET jQuery 错误：未知的 Web 方法

> ID：179934
> 
> 赞同：27
> 
> 时间：2008-10-07T19:21:26.017
> 
> 标签：asp.net, jquery, ajax

这是我第一次尝试从 jQuery 调用 ASP.NET 页面方法。我在 responseText 消息中收到状态 500 错误，提示找不到 Web 方法。这是我的 jQuery $.ajax 调用：

```
function callCancelPlan(activePlanId, ntLogin) {
    var paramList = '{"activePlanId":"' + activePlanId + '","ntLogin":"' + ntLogin + '"}';
    $.ajax({
        type: "POST",
        url: "ArpWorkItem.aspx/CancelPlan",
        data: paramList,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function() {
            alert("success");
        },
        error: function(xml,textStatus,errorThrown) {
            alert(xml.status + "||" + xml.responseText);
        }
    });
} 
```

这是我试图调用的页面方法：

```
[WebMethod()]
private static void CancelPlan(int activePlanId, string ntLogin)
{
    StrategyRetrievalPresenter presenter = new StrategyRetrievalPresenter();
    presenter.CancelExistingPlan(offer, ntLogin);            
} 
```

我已经通过使用和不使用parens'（）'来装饰Web方法来尝试这个。有人有想法吗？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2008-10-07T19:23:07.057

您的网络方法需要是公共的和静态的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2011-05-05T13:37:08.493

清理解决方案并重建。在您执行此操作之前，我已经看到 webmethods 抛出 500 次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-24T15:02:51.963

`public static`在您的方法之前添加...

前任。

```
[WebMethod]
public static string MethodName() {} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-08T07:31:31.797

对于ajax成功：

对我来说，这样做很有帮助：

1.  App_Start\RouteConfig

    从设置

```
settings.AutoRedirectMode = RedirectMode.Permanent; 
```

到

```
settings.AutoRedirectMode = RedirectMode.Off; 
```

2.  制作你的使用方法：

```
public

static 
```

3.  添加：

```
using System.Web.Services; 
```

并在方法之上仅使用：

```
[WebMethod] 
```

足够

# asp.net - ASP.NET：如何访问中继器生成的表单输入元素？

> ID：179938
> 
> 赞同：10
> 
> 时间：2008-10-07T19:22:56.123
> 
> 标签：asp.net, datarepeater

我想让中继器生成一堆复选框，例如：

```
<tr><td><input type="checkbox" name="t" value="11cbf4deb87" /> <input type="checkbox" name="a" value="33cbf4deb87" />stackoverflow.com</td></tr>
<tr><td><input type="checkbox" name="t" value="11cbf4deb88" /> <input type="checkbox" name="a" value="33cbf4deb87" />microsoft.com</td></tr>
<tr><td><input type="checkbox" name="t" value="11cd3f33a89" /> <input type="checkbox" name="a" value="33cbf4deb87" />gmail.com</td></tr>
<tr><td><input type="checkbox" name="t" value="1138fecd337" /> <input type="checkbox" name="a" value="33cbf4deb87" />youporn.com</td></tr>
<tr><td><input type="checkbox" name="t" value="11009efdacc" /> <input type="checkbox" name="a" value="33bf4deb87" />fantasti.cc</td></tr> 
```

问题 1：如何在中继器运行时单独引用每个复选框，以便设置唯一值？

我是否使用以下内容对其进行数据绑定：

```
<itemtemplate>
   <tr>
      <td>
         <input type="checkbox" name="t" 
            value="<%# ((Item)Container.DataItem).TangoUniquifier %>" />
         <input type="checkbox" name="a" 
            value="<%# ((Item)Container.DataItem).AlphaUniquifier %>" />
         <%# ((Item)Container.DataItem).SiteName %>
      </td>
   </tr>
</itemtemplate> 
```

或者我应该以某种方式在 OnItemDataBound 中设置它？

```
<asp:repeater id="ItemsRepeater" 
      OnItemDataBound="ItemsRepeater_OnItemDataBound" runat="server">
   ...
   <itemtemplate>
      <tr>
         <td>
            <input id="chkTango" type="checkbox" name="t" runat="server" />
            <input id="chkAlpha" type="checkbox" name="a" runat="server" />
            <%# ((Item)Container.DataItem).SiteName %>
         </td>
      </tr>
   </itemtemplate>
   ...
</asp:repeater>

protected void ItemsRepeater_OnItemDataBound(object sender, RepeaterItemEventArgs e)
{
   // if the data bound item is an item or alternating item (not the header etc)
   if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
   {
      // get the associated item
      Item item = (Item)e.Item.DataItem;

      //???
      this.chkTango.Value = item.TangoUniquifier;
      this.chkAlpha.Value = item.AlphaUniquifier;
   }
} 
```

但是如果我应该在代码隐藏中引用它，我如何在代码隐藏中引用它？我应该使用`<INPUT>`控件的（服务器端）id 属性来引用它吗？我意识到服务器端控件的 ID 与客户端上将出现的 ID 不同。

还是我必须做一些事情，我必须找到一个名称为“t”的输入控件和另一个名称为“a”的输入控件？什么样的控件是允许我设置它的输入值的 CheckBox？

```
protected void ItemsRepeater_OnItemDataBound(object sender, RepeaterItemEventArgs e)
{
   // if the data bound item is an item or alternating item (not the header etc)
   if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
   {
      // get the associated item
      Item item = (Item)e.Item.DataItem;

      CheckBox chkTango = (CheckBox)e.Item.FindControl("chkTango");
      chkTango.Value = item.TangoUniquifier;

      CheckBox chkAlpha = (CheckBox)e.Item.FindControl("chkAlpha");
      chkAlpha.Value = item.AlphaUniquifier;
   }
} 
```

* * *

问题 2：当用户稍后单击提交时，我如何找到所有选中的复选框，或者更具体地说，它们的值？

我必须 FindControl 吗？

```
protected void DoStuffWithLinks_Click(object sender, EventArgs e)
{
   // loop through the repeater items
   foreach (RepeaterItem repeaterItem in actionItemRepeater.Items)
   {
      Item item = repeaterItem.DataItem as Item;

      // grab the checkboxes
      CheckBox chkAlpha = (CheckBox)repeaterItem.FindControl("chkAlpha");
      CheckBox chkTango = (CheckBox)repeaterItem.FindControl("chkTango");

      if (chkAlpha.Checked)
      {          
         item.DoAlphaStuff(chkAlpha.Name);
      }

      if (chkTango.Checked)
      {
         item.DoTangoStuff(chkTango.Name);
      }
   }
} 
```

中继器项 DataItem 是否仍然存在于单击事件处理程序上？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-10-07T20:40:46.120

使用服务器控件而不是输入控件 runat=server

```
 <asp:CheckBox id="whatever" runat="Server" /> 
```

当您在 ItemDataBound 中设置值时，您使用 FindControl

```
CheckBox checkBox = (CheckBox)e.Item.FindControl("whatever");
checkBox.Checked = true; 
```

获取项目时，您还可以使用 foreach 构造中项目的 FindControl。此外，根据数据绑定的方式，回发后 DataItem 可能不再存在。

```
foreach (RepeaterItem item in myRepeater.Items)
{
    if (item.ItemType == ListItemType.Item 
        || item.ItemType == ListItemType.AlternatingItem) 
    { 
        CheckBox checkBox = (CheckBox)item.FindControl("whatever");
        if (checkBox.Checked)
        { /* do something */ }
    }
} 
```

*   许多人倾向于使用`as`带有`FindControl()`. 我不喜欢这样，因为当您更改表单上的控件名称时，您可以默默地忽略开发错误并使其更难追踪。`as`如果不能保证控件存在，我会尝试仅使用操作员。

更新：*哪个 CheckBox 是哪个？*在呈现的 html 中，您最终将拥有所有这些复选框名称，例如

```
ctl00_cph0_ParentContainer_MyRepeater_ctl01_MyCheckbox
ctl00_cph0_ParentContainer_MyRepeater_ctl02_MyCheckbox
ctl00_cph0_ParentContainer_MyRepeater_ctl03_MyCheckbox 
```

您不关心名称是什么，因为 foreach item.FindControl() 会为您获取它们，并且您不应该对它们进行任何假设。但是，当您通过 foreach 进行迭代时，您通常需要一种方法来引用它。大多数情况下，这是通过在每个 CheckBox 旁边有一个 asp:HiddenField 控件来保存一个标识符以将其与正确的实体匹配。

*安全说明*：使用隐藏字段存在安全问题，因为隐藏字段可以在 javascript 中更改；请始终注意，在提交表单之前，用户可能已经修改了此值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-07T19:31:25.810

您可能会发现使用 CheckBoxList 控件更容易。

在简单的情况下，您可以将 DataTextVield 和 DataValueField 设置为从数据源中提取的名称和值（假设您从数据源中填充），然后将其绑定以创建项目。

与在中继器中创建复选框相比，您的工作可能更少。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-09-01T22:06:19.053

以下是一些关于如何处理隐藏字段的特定代码：

标记：

```
<asp:HiddenField ID="repeaterhidden" Value='<%# DataBinder.Eval(Container.DataItem, "value")%>' runat="server" > 
```

C＃：

{

```
HiddenField hiddenField = (HiddenField)item.FindControl(repeaterStringhidden);

{ /* do something with hiddenField.Value */ 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-03-16T12:19:48.257

我相信这个知识库给了我最好的答案：

[http://msdn.microsoft.com/en-us/library/1d04y8ss.aspx](http://msdn.microsoft.com/en-us/library/1d04y8ss.aspx)

由于我自己运气不好，这似乎仅适用于 .net 4.0 版本（我仍然停留在 3.5 SP1）。

引用（粗体是我的）：

> 当控件位于生成控件重复实例的数据绑定控件内时，ASP.NET 会为控件**的每个实例生成 UniqueID 和 ClientID 值**。UniqueID 值是通过组合命名容器的 UniqueID 值、控件的 ID 值和序号生成的。**在 DataList、 Repeater**、GridView 和 ListView 控件等控件中就是这种情况。
> 
> 当 ClientIDMode 属性设置为 AutoID 时，ASP.NET 以类似的方式生成 ClientID 值。这会使在客户端脚本中引用控件变得困难，因为您通常无法预测所使用的序号的值。如果要从客户端脚本访问数据绑定控件，可以**将 ClientIDMode 属性设置为 Predictable。**这使得更容易预测 ClientID 值将是什么。
> 
> 将 ClientIDMode 设置为 Predictable 时，还可以**将 ClientIDRowSuffixDataKeys 属性设置为唯一的数据字段的名称**，例如数据库表中的主键。这会导致 ASP.NET 生成一个客户端 ID，如果您可以预测数据键值，它将更容易在客户端脚本中预测和引用。

所以，在 3.5 版中，我使用隐藏字段：

```
 foreach (RepeaterItem item in rptClientes.Items)
    {
        Panel pnl = (Panel)item.FindControl("divCliente");
        Control c = pnl.FindControl("hdnID");
        if (c is HiddenField)
        {
            if (((HiddenField)c).Value == hdnClienteNome.Value)
                pnl.BackColor = System.Drawing.Color.Beige;
        }
    } 
```

# c# - 将 UTC/GMT 时间转换为本地时间

> ID：179940
> 
> 赞同：324
> 
> 时间：2008-10-07T19:23:05.497
> 
> 标签：c#, .net, datetime, utc

我们正在为 Web 服务客户端开发 C# 应用程序。这将在 Windows XP PC 上运行。

Web 服务返回的字段之一是 DateTime 字段。服务器返回 GMT 格式的字段，即末尾带有“Z”。

但是，我们发现 .NET 似乎做了某种隐式转换，而且时间总是 12 小时。

以下代码示例在一定程度上解决了这个问题，因为 12 小时的差异已经消失，但它没有考虑到 NZ 夏令时。

```
CultureInfo ci = new CultureInfo("en-NZ");
string date = "Web service date".ToString("R", ci);
DateTime convertedDate = DateTime.Parse(date); 
```

根据[此日期网站](http://www.timeanddate.com/worldclock/city.html?n=22)：

> UTC/GMT 偏移量
> 
> 标准时区：UTC/GMT +12 小时
> 夏令时：+1 小时
> 当前时区偏移：**UTC/GMT +13 小时**

我们如何调整额外的时间？这可以通过编程方式完成，还是 PC 上的某种设置？

* * *

## 回答 #1

> 赞同：395
> 
> 时间：2009-06-08T07:43:37.160

For strings such as `2012-09-19 01:27:30.000`, `DateTime.Parse` cannot tell what time zone the date and time are from.

`DateTime` has a *Kind* property, which can have one of three time zone options:

*   Unspecified
*   Local
*   Utc

**NOTE** *If you are wishing to represent a date/time other than UTC or your local time zone, then you should use [`DateTimeOffset`](http://msdn.microsoft.com/en-us/library/system.datetimeoffset.aspx).*

* * *

So for the code in your question:

```
DateTime convertedDate = DateTime.Parse(dateStr);

var kind = convertedDate.Kind; // will equal DateTimeKind.Unspecified 
```

You say you know what kind it is, so tell it.

```
DateTime convertedDate = DateTime.SpecifyKind(
    DateTime.Parse(dateStr),
    DateTimeKind.Utc);

var kind = convertedDate.Kind; // will equal DateTimeKind.Utc 
```

Now, once the system knows its in UTC time, you can just call `ToLocalTime`:

```
DateTime dt = convertedDate.ToLocalTime(); 
```

This will give you the result you require.

* * *

## 回答 #2

> 赞同：125
> 
> 时间：2009-01-18T21:50:49.100

I'd look into using the System.TimeZoneInfo class if you are in .NET 3.5\. See [http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx). This should take into account the daylight savings changes correctly.

```
// Coordinated Universal Time string from 
// DateTime.Now.ToUniversalTime().ToString("u");
string date = "2009-02-25 16:13:00Z"; 
// Local .NET timeZone.
DateTime localDateTime = DateTime.Parse(date); 
DateTime utcDateTime = localDateTime.ToUniversalTime();

// ID from: 
// "HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\Time Zone"
// See http://msdn.microsoft.com/en-us/library/system.timezoneinfo.id.aspx
string nzTimeZoneKey = "New Zealand Standard Time";
TimeZoneInfo nzTimeZone = TimeZoneInfo.FindSystemTimeZoneById(nzTimeZoneKey);
DateTime nzDateTime = TimeZoneInfo.ConvertTimeFromUtc(utcDateTime, nzTimeZone); 
```

* * *

## 回答 #3

> 赞同：63
> 
> 时间：2008-10-07T19:29:47.013

```
TimeZone.CurrentTimeZone.ToLocalTime(date); 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2012-11-16T03:51:35.413

`DateTime`默认情况下，对象具有`Kind`of `Unspecified`，出于 的目的，`ToLocalTime`假定为`UTC`.

要获取`Unspecified` `DateTime`对象的本地时间，您只需执行以下操作：

```
convertedDate.ToLocalTime(); 
```

改变from`Kind`的步骤是不必要的。假定用于：http : [//msdn.microsoft.com/en-us/library/system.datetime.tolocaltime.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.tolocaltime.aspx)`DateTime``Unspecified``UTC``Unspecified``UTC``ToLocalTime`

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2011-10-26T16:10:55.060

我知道这是一个较老的问题，但我遇到了类似的情况，我想分享我为未来的搜索者发现的内容，可能包括我自己:)。

`DateTime.Parse()`可能很棘手-例如，请参见[此处。](http://blog.aasheim.org/2008/04/dont-use-datetimeparse-use.html)

如果`DateTime`来自 Web 服务或其他具有已知格式的来源，您可能需要考虑类似

```
DateTime.ParseExact(dateString, 
                   "MM/dd/yyyy HH:mm:ss", 
                   CultureInfo.InvariantCulture, 
                   DateTimeStyles.AssumeUniversal | DateTimeStyles.AdjustToUniversal) 
```

或者，甚至更好，

```
DateTime.TryParseExact(...) 
```

该`AssumeUniversal`标志告诉解析器日期/时间已经是UTC；`AssumeUniversal`和的组合`AdjustToUniversal`告诉它不要将结果转换为“本地”时间，默认情况下它会尝试这样做。（无论如何，我个人尝试在业务/应用程序/服务层中专门处理 UTC。但是绕过转换为本地时间也加快了速度——在我的测试中提高了 50% 或更多，见下文。）

这是我们之前所做的：

```
DateTime.Parse(dateString, new CultureInfo("en-US")) 
```

我们对应用程序进行了分析，发现 DateTime.Parse 占 CPU 使用率的很大一部分。（顺便说一句，`CultureInfo`构造函数对 CPU 使用率的影响 *并不大。）*

所以我设置了一个控制台应用程序以各种方式解析日期/时间字符串 10000 次。底线：
`Parse()`10 sec
`ParseExact()`（转换为本地） 20-45 ms
`ParseExact()`（不转换为本地） 10-15 ms
...是的，结果以`Parse()`seconds*为单位*，而其他的以*毫秒为单位*。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2008-10-08T12:21:02.743

我只想添加一个一般性的注意事项。

如果您所做的只是从计算机的内部时钟获取当前时间以在显示屏或报告上显示日期/时间，那么一切都很好。但是，如果您要**保存**日期/时间信息以供以后参考或**计算**日期/时间，请注意！

假设您确定一艘游轮于 2007 年 12 月 20 日 15:00 UTC 抵达檀香山。你想知道那是什么当地时间。
**1.**可能至少涉及三个“本地人”。本地可能意味着檀香山，也可能意味着您的计算机所在的位置，或者可能意味着您的客户所在的位置。
**2.**如果使用内置函数进行转换，可能会出错。这是因为夏令时（可能）当前在您的计算机上生效，但在 12 月没有生效。但是 Windows 不知道这一点……它只有一个标志来确定夏令时当前是否有效。如果它目前有效，那么即使是在 12 月的日期，它也会很高兴地增加一个小时。
**3.**夏令时在不同的政治分区中实施不同（或根本不实施）。不要认为仅仅因为您的国家/地区在特定日期发生变化，其他国家/地区也会如此。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2017-05-28T09:25:43.063

```
@TimeZoneInfo.ConvertTimeFromUtc(timeUtc, TimeZoneInfo.Local) 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2008-10-08T12:48:24.343

不要忘记如果您已经有一个 DateTime 对象并且不确定它是 UTC 还是 Local，直接使用对象上的方法很容易：

```
DateTime convertedDate = DateTime.Parse(date);
DateTime localDate = convertedDate.ToLocalTime(); 
```

> 我们如何调整额外的时间？

除非指定 .net 将使用本地 pc 设置。我会阅读：http: [//msdn.microsoft.com/en-us/library/system.globalization.daylighttime.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.daylighttime.aspx)

从外观上看，代码可能类似于：

```
DaylightTime daylight = TimeZone.CurrentTimeZone.GetDaylightChanges( year ); 
```

如上所述，请仔细检查您的服务器所在的时区设置。网上有文章介绍如何安全地影响 IIS 中的更改。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-10-07T19:55:26.277

回答 Dana 的建议：

代码示例现在看起来像：

```
string date = "Web service date"..ToString("R", ci);
DateTime convertedDate = DateTime.Parse(date);            
DateTime dt = TimeZone.CurrentTimeZone.ToLocalTime(convertedDate); 
```

原来的日期是 20/08/08；那种是UTC。

“convertedDate”和“dt”都是一样的：

21/08/08 10:00:26; 那种是本地的

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-10-07T19:59:08.547

我遇到了一个问题，它位于通过网络推送的数据集中（webservice 到客户端），它会自动更改，因为 DataColumn 的 DateType 字段设置为本地。如果您推送数据集，请确保检查 DateType 是什么。

如果您不希望它更改，请将其设置为未指定

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-10-03T16:01:31.207

I came across this question as I was having a problem with the UTC dates you get back through the twitter API (created_at field on a status); I need to convert them to DateTime. None of the answers/ code samples in the answers on this page were sufficient to stop me getting a "String was not recognized as a valid DateTime" error (but it's the closest I have got to finding the correct answer on SO)

Posting this link here in case this helps someone else - the answer I needed was found on this blog post: [http://www.wduffy.co.uk/blog/parsing-dates-when-aspnets-datetimeparse-doesnt-work/](http://www.wduffy.co.uk/blog/parsing-dates-when-aspnets-datetimeparse-doesnt-work/) - basically use DateTime.ParseExact with a format string instead of DateTime.Parse

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-01-20T20:46:46.627

此代码块使用通用时间转换当前 DateTime 对象，然后将其转换回本地 DateTime。非常适合我，希望对我有帮助！

```
CreatedDate.ToUniversalTime().ToLocalTime(); 
```

# c# - 有没有办法以编程方式决定要连接到哪个 WCF 会话？

> ID：179947
> 
> 赞同：1
> 
> 时间：2008-10-07T19:25:40.237
> 
> 标签：c#, wcf, silverlight, session, connectivity

我需要能够在 Silverlight 应用程序中使用 WCF 会话功能。目前 Silverlight 只支持 basicHttp 绑定，所以这是不可能的。我的想法是创建一个具有 wsHttp 功能的中间部分，它将为我处理会话，并且我的无会话 Silverlight 应用程序可以传入 SessionID guid。

这甚至可能吗？如果是这样，它将如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T15:40:30.313

Nicholas Allen 刚刚发布了类似的博客：http: [//blogs.msdn.com/drnick/archive/2008/10/08/working-with-session-state.aspx](http://blogs.msdn.com/drnick/archive/2008/10/08/working-with-session-state.aspx)

你的意思是像“ASP.NET”一样的会话吗？如果是这种情况（并且您在 IIS 中使用基于 HTTP 的绑定和托管），您可以在 ASP.NET 兼容模式下运行您的服务。

他提到的另一件事可能会使您的 WCF 服务更多地处于 WCF 服务的范围内，即创建基于 IInstanceContextProvider 的自定义行为。活动部分很少：您必须将 Session 保存到非易失性存储中，并将会话标识符放在消息头中以在服务端匹配它们（使用可以使用消息合约）但它可以保留一些您的服务的 WCFness。

祝你好运！

# winforms - 从网络共享中获取最新版本的 Windows 窗体应用程序的实用程序

> ID：179951
> 
> 赞同：0
> 
> 时间：2008-10-07T19:27:16.177
> 
> 标签：winforms, deployment, synchronization

是否有任何实用程序可以从中央网络共享复制 Windows 窗体应用程序的“官方”版本并启动它（从客户端桌面）？当我更新中央网络共享上的二进制文件时，我想确保用户获得最新版本。

ClickOnce 对用户不友好，所以我正在寻找其他东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-07T19:32:39.613

您是否可以修改您的问题以描述您认为 ClickOnce 不友好的地方？在我的办公室，我们发现 ClickOnce 是更新和分发应用程序桌面业务应用程序的最有效和用户友好的方式。我想知道解决您的问题的最佳方法是否可能是解决您在 ClickOnce 中遇到的问题，而不是集成/滚动另一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-07T19:33:04.743

看看这个：

**[.NET 客户端应用程序：.NET 应用程序更新程序组件](http://windowsclient.net/articles/appupdater.aspx)**

这是一份白皮书，详细讨论了如何使应用程序可自动更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-07T19:33:53.900

我们有一个可以做到这一点的工具，它在出现 Windows 更新（或任何其他更新）之类的东西之前就已经在使用了。

这种方式的任何更新的问题是用户的安全级别。很多时候，您需要成为管理员才能执行某些功能。

我们的解决方案是两部分/一个可执行文件： 1\. 运行本地系统或管理员执行此类操作的服务模式。2\. 一个可执行文件，可由应用程序调用以通过 UNC、HTTP、FTP 获取应用程序的更新并应用它们。

基本流程是这样的： 1\. 应用检查自己的版本号；我们使用中央数据库列出所有应用程序及其版本号。2\. 如果应用程序是次要版本，我们会为用户提供安装选择退出；如果是重大修订，我们需要安装。3\. 确认更新后，我们调用更新程序可执行文件，该更新程序与其服务模式产品相配合，检索更新、安装更新并重新启动应用程序。

如果您有兴趣，请访问我的个人资料中列出的网站，并向我们发送支持请求地址给我，如果需要，我会为您提供更多详细信息和代码库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T19:42:40.373

我之前通过以下方法完成了此操作：

1 - 将“官方”构建保留在特定的网络位置

2 - 用户从他们的本地机器启动程序

3 - 在启动时，程序将其自己的文件版本# 与服务器上的版本进行比较。

4 - 如果两个版本不同，请从服务器复制新版本并重新启动。

非常简单，只要您在 Intranet 环境中，它就可以工作。

第 4 步是唯一棘手的部分。您不能在使用文件时替换它，因此您必须要么

1 - 首先重命名当前（正在使用的）文件，然后复制新文件。由于您将多次更新，因此您还需要删除任何现有的重命名副本。

或者

2 - 让用户启动一个“帮助”应用程序来检查版本，必要时进行更新，然后启动真正的应用程序。当然，您必须处理更新助手应用程序。

# java - 如何在任意 Java 应用程序中启用抗锯齿功能？

> ID：179955
> 
> 赞同：51
> 
> 时间：2008-10-07T19:28:26.703
> 
> 标签：java, antialiasing

许多 Java 应用程序默认情况下不使用抗锯齿字体，尽管 Swing 能够提供它们。你如何强制一个任意的 java 应用程序使用 AA 字体？（对于我正在运行的应用程序和我正在开发的应用程序）

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2008-10-07T19:31:02.457

如果您可以访问源代码，则可以在 main 方法中执行此操作：

```
 // enable anti-aliased text:
  System.setProperty("awt.useSystemAAFontSettings","on"); 
```

或者，（如果您无法访问源代码，或者这更容易），您可以通过将这些选项添加到命令行来简单地将上面的系统属性传递到 jvm：

```
-Dawt.useSystemAAFontSettings=on 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-16T15:29:56.553

最新版本的 Java 6 / 7 中的 Swing 控件应自动遵守系统范围的偏好。（如果您在 Windows 操作系统上使用 Windows L&F，那么如果您在系统范围内启用了该设置，则应该使用 ClearType 呈现文本。）因此，一种解决方案可能只是：启用本机外观？

在你正在开发的应用程序中，如果你直接渲染你自己的文本，你还需要做这样的事情（在打电话`Graphics.drawText`或朋友之前的某个时候）：

```
if (desktopHints == null) { 
    Toolkit tk = Toolkit.getDefaultToolkit(); 
    desktopHints = (Map) (tk.getDesktopProperty("awt.font.desktophints")); 
}
if (desktopHints != null) { 
    g2d.addRenderingHints(desktopHints); 
} 
```

参考：[http ://weblogs.java.net/blog/chet/archive/2007/01/font_hints_for.html](http://weblogs.java.net/blog/chet/archive/2007/01/font_hints_for.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2011-01-25T12:41:22.877

作为记录，我发现在我的 Windows 7 机器上，

*   如果我不在我的代码中使用它，我会得到漂亮的 ClearType 子像素渲染。
*   但是如果我使用它，我会得到更丑陋的经典黑白抗锯齿。

因此，应谨慎使用此代码。我想当所有 Linux 用户都更新到默认情况下可以很好地处理别名的 OpenJDK 版本时，它将不再需要它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T19:42:50.870

谢谢（你的）信息。我自己也在想这个。我使用 SoapUI(www.eviware.com)，默认情况下它不使用 AA 文本。我在启动它的批处理文件中添加了 -Dawt.useSystemAAFontSettings=on -Dswing.aatext=true 但没有任何区别。猜猜，我必须在他们的论坛上问。

# reporting - 测试报告

> ID：179969
> 
> 赞同：7
> 
> 时间：2008-10-07T19:30:45.840
> 
> 标签：reporting, analysis, business-intelligence, pentaho

我们正在将我们的测试报告数据（单元、回归、集成等）从 XML 格式迁移到数据库格式，以便更好地进行分析。目前，我们的大部分测试分析都是使用 CruiseControl.NET 仪表板完成的，但这主要限于最新的测试数据。可以访问较旧的测试数据，但不容易与新的测试数据进行比较。我们希望查明问题组件并更好地缩小错误范围。随着我们新实施的回归和集成测试带来的大量信息的出现，我希望看到生成一些更好的指标（可能是性能等）。您是否使用过任何商业智能系统，这些系统将为准确、轻松地实施某种分析和报告提供框架？

我已经研究过 JasperReports 和 Pentaho，但目前我正在努力实现 Pentaho。我应该继续与系统斗争吗？这就是我要找的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T19:15:15.230

您可以尝试使用Ben Fry 编写的[Processing](http://processing.org)来滚动自己（如果您知道要查找的内容） 。最好附上他的书《[可视化数据](http://oreilly.com/catalog/9780596514556/)》。

该工具是免费的，我想您可以获得 O'Reilly Books Online 的 45 天免费试用版，以抢占先机，看看它是否适合您。我确实知道有章节是关于从各种来源（包括 XML 和数据库）读取和处理数据，然后从中进行有意义和有用的可视化的。

我目前正在使用它来了解继承代码库的依赖复杂性，并且它非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-17T09:37:17.427

您总是可以只使用 SQL Server Reporting Services 和 Report Builder（MS 的基于 Web 的设计器）或 Report Designer（Visual Studio 的组件）。设置这个也很容易。

*   报告生成器：http: [//msdn.microsoft.com/en-us/library/ms155933.aspx](http://msdn.microsoft.com/en-us/library/ms155933.aspx)
*   报告设计器：http: [//msdn.microsoft.com/en-us/library/ms157166.aspx](http://msdn.microsoft.com/en-us/library/ms157166.aspx)
*   教程：[http ://www.simple-talk.com/sql/learn-sql-server/beginning-sql-server-2005-reporting-services-part-1/](http://www.simple-talk.com/sql/learn-sql-server/beginning-sql-server-2005-reporting-services-part-1/)
*   如何将 Reporting Services 添加到现有 SQL Server：[http ://www.mssqltips.com/tip.asp?tip=1444](http://www.mssqltips.com/tip.asp?tip=1444)

如果您愿意投资一些现金，还有一些最终用户报告解决方案可以更轻松地动态创建报告。

我公司生产一个：[http](http://www.rsinteract.com) ://www.rsinteract.com有一个非常便宜的标准版，报告数量有限（30 天免费试用）。它直接从安装了 Reporting Services 的 SQL Server 报告。它赢得了最好的 TechEd 2006 - [http://windowsitpro.com/article/articleid/53944/best-of-tech-ed-2006-winners.html](http://windowsitpro.com/article/articleid/53944/best-of-tech-ed-2006-winners.html)

我们实际上使用我们的来分析来自客户的支持请求，即哪个组件失败最多，谁报告的错误最多等。没有在测试数据上尝试过。

还有 Proclarity、ApexSQL Report 和 Tableau，它们都很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-25T14:03:55.087

Pentaho的哪个部分？

Kettle 项目有一些东西可以转换您的巡航控制信息并将其加载到关系数据库中。这可能是一个很好的模块，可以正常工作，尤其是当你几乎完成它的时候。我希望你能分享这些东西。我也可以用。

一旦 Kettle 加载，平台将自动安排内容。

为了使 Mondrian 真正有用，您需要为您的测试数据制定一个事实/维度组织。在这一点上，这可能值得你费心，也可能不值得。

加载数据后，您可能会从像这样的简单 SQL 查询中获得很多好处......

```
 select * 
  from test 
  where failed='yes' 
  order by testno, date desc 
```

还有这个...

```
 select max(date), min(date), testno 
  from test
  where failed='yes'
  group by testno 
  order by testno 
```

和类似的东西。您可能会考虑在表服务器中为您喜欢的查询创建视图。

有无数种方法可以将您的 sql 查询转换为报告，包括 pentaho 报告模块、BIRT（一个 Eclipse 插件）、Crystal Reports 以及您可以组合在一起的各种 PHP 或 JSP 东西。

# c# - Python 类工厂……还是？

> ID：179985
> 
> 赞同：2
> 
> 时间：2008-10-07T19:34:13.853
> 
> 标签：c#, python

我们在 C# 中有一个数据库库，我们可以像这样使用它：

```
DatabaseConnection conn = DatabaseConnection.FromConnectionString("..."); 
```

该库隐藏了不同数据库引擎之间的许多差异，如 SQL 函数名称、参数名称和规范等。

在内部，`DatabaseConnection`该类是实现一些基本方法的抽象类，但该`FromConnectionString`方法通过处理实际差异的已注册专用类型列表运行，并构造正确类的对象。换句话说，我没有返回一个 DatabaseConnection 对象，而是返回一个 MSSQLDatabaseConnection 或 OracleDatabaseConnection 对象，它们当然继承自 DatabaseConnection。

连接字符串包含有关此连接适用于哪种数据库引擎和版本的信息。

我想在 Python 中创建一个类似的库。制作可以像这样构造的东西的正确方法是什么？

```
conn = DatabaseConnection("...") 
```

还是使用类方法？

```
conn = DatabaseConnection.FromConnectionString("...") 
```

第一个甚至是可能的，也就是说......构造一个像这样的对象并取回其他东西，一个专门的对象，这取决于传递的字符串中的数据？

好的，让我问一个不同的问题......这样做的*pythonic*方式是什么？

我基本上也希望在 Python 中拥有 DatabaseConnection 基类，实现常用方法，并专门研究派生类，并在某处有一个基于连接字符串构造并返回正确类型的对象的方法或函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-07T19:39:32.377

这在 Python 中是可能的，但可能不是最好的方法。类工厂模式本质上是针对没有一流类的语言的一种解决方法。由于 Python 确实有一流的类，因此您可以将一个类存储在一个变量中，并直接使用该类来创建实例。要更改创建的类，请在变量中存储不同的类。

例如：

```
class class1:
  def greet(self):
    print "hi"

class class2:
  def greet(self):
    print "hello"

maker = class1
obj1 = maker()

maker = class2
obj2 = maker()

obj1.greet() # prints "hi"
obj2.greet() # prints "hello" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-07T20:04:00.453

Python 不在乎你为什么返回类型。

```
def DatabaseConnection( str ):   
    if ( IsOracle( str ) ):   
        return OracleConnection( str )  
    else: 
        return SomeOtherConnection( str ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-07T19:42:54.210

第一个是绝对可能的，在我看来更可取。在 python 中，构造函数背后并没有太多的魔法。出于所有意图和目的，它们就像任何其他功能一样。我已经多次使用这种设计模式来表明不应直接实例化一个类，例如：

```
def DatabaseConnectionFromString(connection_string)
    return _DatabaseConnection(connection_string)

def DatabaseConnectionFromSomethingElse(something_else)
    connection_string = convert_something_else_into_string(something_else)
    return _DatabaseConnection(connection_string)

class _DatabaseConnection(object):
    def __init__(self, connection_string):
        self.connection_string = connection_string 
```

当然，这是一个人为的例子，但这应该给你一个大致的想法。

**编辑：**这也是继承在 python 中不那么令人不悦的领域之一。你也可以这样做：

```
DatabaseConnection(object):
    def __init__(self, connection_string):
        self.connection_string = connection_string

DatabaseConnectionFromSomethingElse(object)
    def __init__(self, something_else):
        self.connection_string = convert_something_else_into_string(something_else) 
```

抱歉，这太冗长了，但我想澄清一下。

# sql-server - SQL Server - 将数据库列从 varchar 更新为 nvarchar 的脚本（如果还没有 nvarchar）

> ID：179987
> 
> 赞同：9
> 
> 时间：2008-10-07T19:34:54.040
> 
> 标签：sql-server, alter-table

我处于必须使用脚本将现有数据库结构从 varchar 更新为 nvarchar 的情况。由于每次运行配置应用程序时都会运行此脚本，因此我宁愿确定列是否已更改为 nvarchar 并且不对表执行更改。我必须支持的数据库是 SQL Server 2000、2005 和 2008。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-10-07T20:11:02.890

您可以运行以下脚本，该脚本将为您提供一组 ALTER 命令：

```
SELECT 'ALTER TABLE ' + isnull(schema_name(syo.id), 'dbo') + '.' +  syo.name 
    + ' ALTER COLUMN ' + syc.name + ' NVARCHAR(' + case syc.length when -1 then 'MAX' 
        ELSE convert(nvarchar(10),syc.length) end + ');'
   FROM sysobjects syo
   JOIN syscolumns syc ON
     syc.id = syo.id
   JOIN systypes syt ON
     syt.xtype = syc.xtype
   WHERE 
     syt.name = 'varchar' 
    and syo.xtype='U' 
```

但是，有几个快速*警告*给您。

1.  这只会做表。您需要扫描所有的存储过程和函数，以确保它们也被更改`NVARCHAR`为。
2.  如果您有`VARCHAR`> 4000，则需要将其修改为`NVARCHAR(MAX)`

但是使用这个模板应该很容易做到。

如果您希望它自动运行，您可以在`WHILE`子句中设置它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-05T08:19:46.823

约瑟夫回答的问题是它会在执行查询后将`NOT NULL`字段更改为。`NULL`以下操作修复了它：

```
SELECT cmd = 'alter table [' + c.table_schema + '].[' + c.table_name 
 + '] alter column [' + c.column_name + '] nvarchar('
 +CASE WHEN CHARACTER_MAXIMUM_LENGTH<=4000
       THEN CAST(CHARACTER_MAXIMUM_LENGTH as varchar(10)) ELSE 'max' END+')' 
 + CASE WHEN IS_NULLABLE='NO' THEN ' NOT NULL' ELSE '' END,*
FROM information_schema.columns c
WHERE c.data_type='varchar' 
ORDER BY CHARACTER_MAXIMUM_LENGTH desc 
```

> **归功于[伊戈尔的回答](https://stackoverflow.com/a/31691558/1221203)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-07T19:41:37.630

以下查询应该可以满足您的需求：

```
IF EXISTS 
  (SELECT *
   FROM sysobjects syo
   JOIN syscolumns syc ON
     syc.id = syo.id
   JOIN systypes syt ON
     syt.xtype = syc.xtype
   WHERE 
     syt.name = 'nvarchar' AND
     syo.name = 'MY TABLE NAME' AND
     syc.name = 'MY COLUMN NAME')
BEGIN
   ALTER ...
END 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-20T07:31:05.430

修复了空间问题并添加了架构

```
SELECT 'ALTER TABLE [' + isnull(schema_name(syo.object_id), sysc.name) + '].[' +  syo.name 
    + '] ALTER COLUMN ' + syc.name + ' NVARCHAR(' + case syc.max_length when -1 then 'MAX' 
        ELSE convert(nvarchar(10),syc.max_length) end + ');'
   FROM sys.objects syo
   JOIN sys.columns syc ON
     syc.object_id= syo.object_id
   JOIN sys.types syt ON
     syt.system_type_id = syc.system_type_id
    JOIN sys.schemas sysc ON
    syo.schema_id=sysc.schema_id
   WHERE 
     syt.name = 'varchar' 
    and syo.type='U' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-28T19:05:19.960

进一步更新以修复 MAX 被替换为 -1。

```
SELECT cmd = 'ALTER TABLE [' + c.table_schema + '].[' + c.table_name 
 + '] ALTER COLUMN [' + c.column_name + '] NVARCHAR('
 +CASE WHEN CHARACTER_MAXIMUM_LENGTH<=4000 THEN 
 CASE WHEN CHARACTER_MAXIMUM_LENGTH = -1 THEN
 'MAX' ELSE CAST(CHARACTER_MAXIMUM_LENGTH AS VARCHAR(10)) END ELSE 'MAX' END+')' 
 + CASE WHEN IS_NULLABLE='NO' THEN ' NOT NULL' ELSE '' END,*
FROM information_schema.columns c
WHERE c.data_type='VARCHAR' 
ORDER BY CHARACTER_MAXIMUM_LENGTH DESC 
```

归功于Nezam[的回答](https://stackoverflow.com/a/31827056/1781344)

另一个管理默认值：

```
SELECT cmd = 
CASE WHEN name IS NOT NULL THEN
    'ALTER TABLE ' + c.table_name + ' DROP CONSTRAINT ' + d.name + '; ' +
    'ALTER TABLE [' + c.table_schema + '].[' + c.table_name + '] ALTER COLUMN [' + c.column_name + '] ' + 
    'NVARCHAR(' +
    CASE WHEN CHARACTER_MAXIMUM_LENGTH <= 4000 THEN 
        CASE WHEN CHARACTER_MAXIMUM_LENGTH = -1 THEN
            'MAX' 
        ELSE 
            CAST(CHARACTER_MAXIMUM_LENGTH AS VARCHAR(10)) 
        END 
     ELSE 
        'MAX' 
    END 
    + ')' +
    CASE WHEN IS_NULLABLE='NO' THEN ' NOT NULL' ELSE '' END + '; ' + 
    'ALTER TABLE '+ c.table_name + ' ADD CONSTRAINT ' + d.name +' DEFAULT '+ c.column_default + ' FOR ' + c.column_name + ';'
ELSE
    'ALTER TABLE [' + c.table_schema + '].[' + c.table_name + '] ALTER COLUMN [' + c.column_name + '] ' +
    'NVARCHAR(' +
    CASE WHEN CHARACTER_MAXIMUM_LENGTH<=4000 THEN
        CASE WHEN CHARACTER_MAXIMUM_LENGTH = -1 THEN
            'MAX' 
        ELSE 
            CAST(CHARACTER_MAXIMUM_LENGTH AS VARCHAR(10)) 
        END 
    ELSE 
        'MAX' 
    END
    + ')' +
    CASE WHEN IS_NULLABLE='NO' THEN ' NOT NULL' ELSE '' END 
END,d.name, c.*
FROM information_schema.columns c
LEFT OUTER JOIN sys.default_constraints d ON d.parent_object_id = object_id(c.table_name)
AND d.parent_column_id = columnproperty(object_id(c.table_name), c.column_name, 'ColumnId')
WHERE c.data_type='VARCHAR' 
ORDER BY CHARACTER_MAXIMUM_LENGTH DESC 
```

# c# - Winforms - 最佳目录/项目结构

> ID：179988
> 
> 赞同：9
> 
> 时间：2008-10-07T19:34:59.920
> 
> 标签：c#, winforms

想看看人们对在 Winforms C# 应用程序的项目/解决方案上组织目录和项目结构的最佳方式的想法。

大多数人同意最好将视图、业务逻辑、数据对象、接口分开，但想看看不同的人如何解决这个问题。另外，将第三方依赖隔离到实现项目中，然后有接口导出项目供消费者引用

*   查看.csproj*   业务逻辑.csproj*   数据.csproj*   CalculatorService.Exported.csproj（接口）*   CalculatorService.MyCalcImpl.csproj（一种实现）*   CalculatorService.MyCalcImpl2.csproj（另一种实现）

    此外，就文件夹结构而言，嵌套更好：

    接口
    ---IFoo
    ---IData
    Impl
    ---Foo
    ---Data

    或者

    Product
    ---Interfaces/IProduct
    ---Impl/Product
    Foo
    ---Impl/Foo
    ---Interfaces/IFoo

    所有人都试图推动对抽象的解耦依赖和快速更改实现的能力。

    想法？最佳实践？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-07T22:30:06.230

对我来说，这取决于我所遵循的模型。如果我使用 MVC，那将是

```
Project
-Models
-Controllers
-Views 
```

或者对于 MVP 它会是

```
Project
-Models
-Presenters
-Views 
```

在视图下，我将它们分成与控制器相关的命名空间，即如果我有一个控制器来处理库存交易，我可能会将它作为

```
Project
-Models
--Inventory
-Controllers
--Inventory
---TransactionsController.cs
-Views
--Inventory
---Transactions
----EditTransactionsView.dfm 
```

对于接口，我将接口放在与实现相同的目录中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2011-06-02T02:05:18.763

答案有点晚，但也可以插话。

我个人一直根据项目的实际类型使用文件夹。例如：

```
- Project
    + Forms
    + Classes
    + UserControls
    + Resources
    + Data 
```

所以我最终得到：

```
new Forms.AboutForm().ShowDialog();
Controls.Add(new Controls.UberTextBox()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-07T19:43:06.940

我们通常使 SourceSafe 项目、项目名称、名称空间和目录结构保持同步。

例如，假设我们的公司名称为 XCENT，SourceSafe 结构和 App1 的相应目录结构如下所示：

```
\XCENT
\XCENT\App1
\XCENT\App1\UI
\XCENT\App1\UI\Test //test harness for UI
\XCENT\App1\Data
\XCENT\App1\Data\Test //test harnesses for Data 
```

等等

UI 项目名为 XCENT.App1.UI.cproj，该命名空间中的类为 XCENT.App1.UI

我们也为许多客户工作，因此专门为他们工作的工作以他们的名字为前缀。Client1\App1\UI 等

我们公司的每个人都使用相同的约定，并且很明显一切都适合。

如果进一步分割逻辑间距有意义，我们就会这样做。此类其他分段包括 .Export、.Import、.Reporting、.Security 等。********************