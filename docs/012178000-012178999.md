# StackOverflow 问答 12178000-12178999

# c# - 如何将具有 2 个 DataTable 的数据集发送到 Stimulsoft 报告

> ID：12178004
> 
> 赞同：5
> 
> 时间：2012-08-29T12:29:47.200
> 
> 标签：c#, dataset, stimulsoft

我创建了一个 C# 程序并连接到 stimulsoft 以生成报告。

我使用以下代码将带有 2 个数据表的数据集发送到我的报告：

```
DataSet ds = new DataSet();
dtP.TableName = "dtP";
dtF.TableName = "dtF";
ds.Tables.Add(dtP);
ds.Tables.Add(dtF);
Report.RegData(ds);
Report.Show(); 
```

和“报告”是stilleport 对象。

当我的报告页面显示时。我的报告是空的。

当仅将 1 个数据表作为数据集发送到我的报告时效果很好。

* * *

**解决：**

将以下代码添加到我的 c# 程序可以解决我的问题：

```
objStiReport.Dictionary.Clear();
objStiReport.RegData(ds);
objStiReport.Dictionary.Synchronize(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-27T06:21:54.173

我也有这个问题。我尝试了很多方法，但没有一个能解决问题。我在 stimulsoft 报表设计器中更改了字典中的某些内容。

1) 选择`Data from Dataset, DataTable`数据适配器类型

2）为`Name In Source`属性设置名称（例如`DS`）

3）添加一些表格`DS`并将`Name In Source`它们设置为类似这样的内容`DS.Table1`。请注意，`Name In Source`像这样设置表的属性很重要。

当我设置`Name In Source`表的属性时`DS.TableName`，问题对我来说消失了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T12:34:00.360

```
 1\. Merge your 2 datables

dtP.Merge(dtF, false, MissingSchemaAction.Add);

 1\. fill your report with datatable
Report.RegData(dtP); 
```

另一种方法（如果数据表无法合并）是创建一个数据表，其中包含每个数据表的所有列

您可以创建一个数据关系来建立两个数据表之间的关系，但是 RegData 方法可以理解关系（datarelationp）吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-06T05:08:56.523

1.  第一个使用刺激报告设计器打开的报告

2.  在 Dictionary 选项卡顶部，单击“Action”，然后选择“Import XML Schema”并选择您的数据集文件（带有 XSD 扩展名）选择“Import XML Schema”并选择您的数据集文件

3.  要添加其他数据集，请重复步骤 2，但选择“Merg XML Schema”

4.  在您的应用程序代码上，使用如下：

    ```
     StiReport report = new StiReport();
     report.Load(Server.MapPath(@"Report.mrt"));
     report.Compile();

     report.RegData(myDataSet1);
     report.RegData(myDataSet2);
     StiMobileViewer1.Report = report; 
    ```

# c# - 在 .NET 中转义 html 4.0 希腊字符

> ID：12178009
> 
> 赞同：0
> 
> 时间：2012-08-29T12:29:58.823
> 
> 标签：c#, html, character-encoding, escaping

我需要在 .NET 中使用类似的方法来`escapeHTML`从 Java 中转义带有特殊希腊符号、小于或等于、等于或任何其他数学字符的纯文本。我有一个纯文本`a ≤ b`，我想将它转义为 HTML 实体`a &le; b`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:32:59.400

您可以使用

```
HtmlEncode() and HtmlDecode() 
```

这些方法在`System.Web.HttpUtility`命名空间中可用

链接：http: [//msdn.microsoft.com/en-us/library/w3te6wfz.aspx](http://msdn.microsoft.com/en-us/library/w3te6wfz.aspx)

# jquery - 将 flash 更改为 jquery

> ID：12178010
> 
> 赞同：-3
> 
> 时间：2012-08-29T12:29:59.073
> 
> 标签：jquery, xml, ajax, flash

在我的网站中嵌入了一个闪存，我需要更改为 jquery，我正在努力解决两个问题：这个闪存是为加载图像而完成的，关键是这些图像是通过 xml 获得的，换句话说，创建了一个函数搜索图像，得到的结果存储在 xml 文件中，然后以某种方式作为 flash 变量在 webservlink 中发送。

关键是我用 jquery 加载这些图像，但关键是，我必须如何从 xml 中获取图像并将它们放入我创建的列表中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:45:03.400

根据 XML 格式，您可以使用以下内容：

```
$(document).ready(function()   
     {   
       $.get('/images.xml', function(data){    

       $(data).find('img').each(function(){    
           var image = $(this);    
           var img_src = $book.attr("src");   

            (new Image()).src = image;   
        });   
    });   
}); 
```

# jquery - Jquery 隐藏\显示功能

> ID：12178022
> 
> 赞同：-4
> 
> 时间：2012-08-29T12:31:14.407
> 
> 标签：jquery, show-hide

我有一个使用 JQuery 实现的表。要求是有一个查看链接，当用户点击它时..应该显示表格。还有一个隐藏\关闭链接，它将隐藏显示的表格。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:36:06.880

您可以通过在链接单击时添加切换事件来轻松做到这一点

```
 $('#lnkVisible').click(function(){
        $('.standard').toggle();
    });​ 
```

[现场演示](http://jsfiddle.net/d6n6m/1/)

如果它可以解决您的问题，请将其标记为答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:36:51.353

您可以尝试 .toggle() 功能。[在这里](http://api.jquery.com/toggle/)查看更多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:45:16.497

将 id 作为“mytable”提供给您的表格并将其作为您的 js

```
$('#Link').click(function(){
    $('#mytable').toggle();
});​ 
```

就是这样。您还可以使用 FadeIn、FadeOut 来获得更多效果。在个人

```
$('#Display_Link').click(function(){
    $('#mytable').show();
});
$('#Hide_Link').click(function(){
    $('#mytable').hide();
}) 
```

# php - 如何使用 PHP 替换括号并将减号添加到数字

> ID：12178029
> 
> 赞同：6
> 
> 时间：2012-08-29T12:31:28.457
> 
> 标签：php

我有这个变量 `$number`——它可能包含不同类型的数字格式。

类型 1： 类型`$number=200,000.00 ;`2：类型`$number=(200,000.00) ;`3：`$number=(20.50) ;`

如果数字有括号，我想删除括号并在其左侧添加一个减号。

示例：如果数字是`$number=(200,000.00) ;`我想将其转换为，`-200,000.00`或者如果`$number=(20.50) ;`我想将其转换为`-20.50`但`$number=200,000.00 ;`我想保持原样。

我已经尝试过了，`preg_replace('/[()^\d-]+/', '', $number);` 但它不起作用。

你能告诉我如何完成这项工作吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T12:37:41.650

您可以执行以下操作

```
str_replace(array("(",")"),array("-",""),$number); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T12:37:06.710

我认为这应该做你想要的：

```
if (strpos($number, "(") !== false && strpos($number, ")") !== false)
    $number = '-'. trim($number, "()"); 
```

示例：[http ://codepad.org/Yhb80H0v](http://codepad.org/Yhb80H0v)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T12:37:42.930

你`$number`必须是一个字符串，让 PHP “知道”括号。使用此代码：

```
$number = "(1,000.2)";
$number = preg_replace('/\(([0-9,.]+)\)/', '-\1', $number);
print $number; 
```

# c - 将字符数组转换为字符串

> ID：12178038
> 
> 赞同：1
> 
> 时间：2012-08-29T12:31:49.813
> 
> 标签：c, string, char

我正在用c语言编写代码。

1.  `char a[]={p,r,a,d,e,e,p}`
    我想`'0/'`在最后添加以使其成为字符串。
    或者除了在最后添加 null 之外，还有什么方法可以使它成为字符串？

2.  `char *a=pradeep;`
    通过在末尾添加 null 将其转换为字符串

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:34:08.270

您无法更改数组的大小，`a`因此无法向其添加空终止符。您可以将声明更改为：

```
char a[] = "pradeep"; 
```

这将隐式添加空终止符。或者：

```
char a[] = { 'p', 'r', 'a', 'd', 'e', 'e', 'p', 0 }; 
```

但字符串文字更简单明了。大多数（如果不是全部）C 字符串库函数都需要以空字符结尾的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:33:56.220

```
char *a="pradeep"; 
```

创建一个字符串文字并在末尾添加空字符。

如果您真的想使用类似于 1 的语法声明它，您可以这样做：

```
char a[] = {'p','r','a','d','e','e','p', 0}; 
```

但没有理由这样做。

**编辑关于评论中的问题**

如果你想从`n`你收到的字符创建一个字符串，你可以这样做：

```
char *a = malloc(n*sizeof(char)+1); 
```

如果总是 10 个字符或更少，您可以将其声明为

```
char a[11]; 
```

然后`a[i]`用接收到的值设置每个，最后一个用`0`.

您也可以使用 sprintf 进行连接，但无论如何您必须确保分配了足够的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T12:34:18.480

您的代码没有任何意义，也不会编译。

字符串文字最好使用字符串文字语法编写：

```
const char *a = "pradeep"; 
```

这将包括终止字符、`a`指向可以与任何字符串处理函数一起使用的 C 字符串、打印输出等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T12:35:20.757

```
1). char a[]={'p','r','a','d','e','e','p','\0'}; 
```

现在它是一个包含有效字符串的数组。

```
2). char *a="pradeep"; 
```

这会自动在末尾附加 null 以生成有效字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T12:38:18.273

如果将文字字符串分配给字符数组，编译器将自动创建正确的数组，并`'\0'`在末尾添加终止字符：

```
char a[] = "pradeep"; 
```

以上与写法相同

```
char a[] = { 'p', 'r', 'a', 'd', 'e', 'e', 'p', '\0' }; 
```

此外，使用数组是推荐的方式，但上面的第一个替代方案相当于

```
char *pa = "pradeep"; 
```

但是，使用最后一个，您不能再使用`sizeof`运算符，因为它将返回*指针*的大小而不是字符串的长度。关于运算符的另一个注意事项`sizeof`，对于前两个示例，它将返回数组的大小而不是字符串的长度，即`sizeof`对于字符数组将包括终止字符。

# grails - 使用复选框选择gsp表中的多条记录？

> ID：12178043
> 
> 赞同：0
> 
> 时间：2012-08-29T12:31:59.970
> 
> 标签：grails

我打算对我的 gsp 表中的项目执行此操作，并且想知道是否有任何“grail-y”方法可以做到这一点，不需要 javascript 遍历表的行来收集选定行的 id 列表（其中 checkbox[row] = 'true') 发送回控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:48:04.150

您可以使用数据绑定：

## HTML

```
<g:each var="item" in="${items}">
    <input name="item" value="${item.id}" type="checkbox"/>
</g:each> 
```

## 控制器

```
def readItems(){
    def items = params.list("item") // You must to use list to retrieve params
    log.info "There are ${items.size()} item(s) selected"
} 
```

# ios - iOS PDF 渲染内存不足

> ID：12178046
> 
> 赞同：0
> 
> 时间：2012-08-29T12:32:08.847
> 
> 标签：ios, pdf, memory, uikit, out-of-memory

我正在使用以下代码在 iOS 应用程序中将大约 100 页呈现为 pdf，基本上是创建应用程序内容的屏幕截图：

```
...
UIGraphicsBeginPDFContextToFile(mainPath, currentFrame, nil);
for(Page *page in pages)
{
  @autoreleasepool
  {
    MainViewController *viewCtrl = [[MainViewController alloc] initWithPage:page contentController:[ContentController singleton] inBackground:NO];
    [self createPageWithView:viewCtrl.view];
  }
}
UIGraphicsEndPDFContext();

-(void)createPageWithView:(UIView *)view
{
  DLog(@"creating page...");
  UIGraphicsBeginImageContextWithOptions(view.bounds.size, NO, 0.0);
  [view.layer renderInContext:UIGraphicsGetCurrentContext()];
  UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();

  UIGraphicsBeginPDFPageWithInfo(currentFrame, nil);
  CGContextRef pdfContext = UIGraphicsGetCurrentContext();

  UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
  [imageView.layer renderInContext:pdfContext];
} 
```

这在中途某处内存不足。mainviewController 添加了几个子视图，没什么特别的。为什么会这样？自动释放池不应该清理使用的内存吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:58:41.450

PDF 文件完全在内存中创建，并在调用 UIGraphicsEndPDFContext 时写入磁盘。如果 PDF 文件变得非常大，这会导致内存问题。

# php - 将 Mysql Query 存储在 php 变量中后过滤它

> ID：12178050
> 
> 赞同：0
> 
> 时间：2012-08-29T12:32:24.240
> 
> 标签：php, mysql

所以我正在编写这个程序，它本质上是一个星号的后端系统，它向管理人员显示所有呼叫、呼叫时间、呼叫日期、用户名等。以前的方式是你有一个 for 循环遍历数据库中的所有用户。里面有很多函数，每个函数总是用来调用这个语句：

```
 $stmt="select callcharge,billsec,src,dst,calldate from cdr where (src='$ext[$x]' or src='238800$ext[$x]') and calldate>='$startdate' and calldate<='$stopdate' and length(dst)>3 and (dst like '7%' or dst like '9%') and billsec>5";
    $result=mysql_query ($stmt); 
```

它会为所有用户执行此操作（每个用户都有自己独特的扩展名）{非常非常慢！}

现在我试图减少加载时间，而是在 for 循环之外调用此语句：

```
$stmtf="select callcharge,billsec,src,dst,calldate from cdr where calldate>='$startdate' and calldate<='$stopdate' and length(dst)>3 and dst like '2%' and billsec>5"; 
```

$results=mysql_query ($stmtf);

请注意，它不再按分机号码过滤（它调用每个分机号码的所有信息）

现在我想做的是：在调用这个mysql查询一次之后，现在所有数据都存储在变量$stmtf中，我希望能够进入for循环并以某种方式过滤这个查询$stmtf变量`(src='$ext[$x]' or src='238800$ext[$x]')`

我的目标是向数据库发出一次请求，而不是从 for 循环向数据库发出大量请求，因为我需要的数据是相同的，只是用于不同的分机号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:55:57.240

您需要遍历查询结果，例如：

```
$stmtf="select callcharge,billsec,src,dst,calldate from cdr where calldate>='$startdate' and calldate<='$stopdate' and length(dst)>3 and dst like '2%' and billsec>5";

$results=mysql_query ($stmtf);

while($row=mysql_fetch_assoc($results)){
//access vars like this - $row['callcharge']
} 
```

[http://uk3.php.net/mysql_fetch_assoc](http://uk3.php.net/mysql_fetch_assoc)

哦，你可能想考虑限制 mysql 库的使用，它正在被逐步淘汰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:00:28.857

这是一些代码来说明我的评论：

```
<?php
/**
 * STORING THE RECORDS SORTED BY EXTENSION
 */
$stmtf="select callcharge,billsec,src,dst,calldate from cdr where calldate>='{$startdate}' and calldate<='{$stopdate}' and length(dst)>3 and dst like '2%' and billsec>5";
$results=mysql_query ($stmtf);
$data = array();
while($row = mysql_fetch_assoc($results)) { // cycle each result returned by the query.
    $row['src'] = substr_replace("238800","",$row['src']); //normalize the 'src' to one format.
    $data[$row['src']][] = $row; //store the record in a sub-array, sorted by 'src' as the first key.
}
print_r($data); //echo the sorted results for debugging.

/**
 * CALLING THE ROWS FOR EXTENSION '98'
 */

foreach($data['98'] as $record) { //if all extensions are numeric, $data[98] will also work.
    print_r($record); //each record contained in the sub-array for '98' is printed individually.
}
?> 
```

# extjs - Extjs 4边框布局与东部地区的垂直标签

> ID：12178051
> 
> 赞同：1
> 
> 时间：2012-08-29T12:32:26.420
> 
> 标签：extjs, extjs4

在 ext js 4 中是否有可能在具有多个选项卡的边框布局中拥有一个东部区域？ ![在此处输入图像描述](../Images/41278c9c72204d7ff6711d7ac9cbb1ba.png)

谢谢你的帮助，我很感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:59:15.540

尝试这样的事情：[http ://www.sencha.com/forum/showthread.php?137711-Vertical-Tabs-in-ExtJS4-Ext.ux.tab.VerticalPanel](http://www.sencha.com/forum/showthread.php?137711-Vertical-Tabs-in-ExtJS4-Ext.ux.tab.VerticalPanel)

然后，您应该能够将面板分配给东部地区，瞧！

# android - 选项卡内的 ListActivity 未更新

> ID：12178052
> 
> 赞同：0
> 
> 时间：2012-08-29T12:32:32.623
> 
> 标签：android, android-listview, listactivity

我在 TabHost 中有一个 ListActivity，它在创建时可以正常工作。但是当这个活动暂停并恢复时，ListView 是空白的。到目前为止，这是我的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_aulas_agendadas);

    dh = new DataHelper(getApplicationContext());

    mMessageListView = getListView();

    cursor = dh.selectAulasAgendadas();
    startManagingCursor(cursor);
    mAdapter = new MessageAdapter(this, cursor);
    mMessageListView.setAdapter(mAdapter);
} 
```

MessageAdapter 扩展了 CursorAdapter，因为我需要使用标头对结果进行分组。

我试图将光标初始化移动到 onResume 方法，但没有成功。当我按下后退按钮并再次创建 Activity 时，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:17:43.010

我花了两天多的时间试图解决它。我最终将 android:noHistory="true" 放在包含 TabHost 的 Activity 上。我知道这不是正确的解决方案，但它确实有效。

# java - 将 BigDecimals 相除会导致 ArithmeticException

> ID：12178053
> 
> 赞同：6
> 
> 时间：2012-08-29T12:32:36.980
> 
> 标签：java, math

> **可能重复：**
> [在 BigDecimal.divide 期间引发 ArithmeticException](https://stackoverflow.com/questions/2749375/arithmeticexception-thrown-during-bigdecimal-divide)

这会导致 ArithmeticException：http: [//ideone.com/RXeZw](http://ideone.com/RXeZw)

提供比例和舍入模式会给我错误的结果。这个例子应该输出 50.03%。如何正确舍入？

为了方便参考，代码如下：

```
BigDecimal priceDiff = BigDecimal.ONE
     .subtract(new BigDecimal(9.99)
     .divide(new BigDecimal(19.99)))
     .multiply(new BigDecimal(100));
System.out.println(priceDiff.toPlainString()); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T12:39:01.890

[`BigDecimal.divide(BigDecimal divisor)`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#divide%28java.math.BigDecimal%29)如果无法准确表示结果，则抛出 ArithmeticException。
您将必须使用提供 MathContext 或 RoundingMode 来告诉您要如何处理它。例如：

```
public class Test {
    public static void main(String[] args) throws java.lang.Exception {
        BigDecimal priceDiff = BigDecimal.ONE.subtract(new BigDecimal("9.99").divide(new BigDecimal("19.99"), MathContext.DECIMAL128))
                                             .multiply(new BigDecimal(100));
        System.out.println(priceDiff.toPlainString());
    }
} 
```

作品和版画

```
50.0250125062531265632816408204102100 
```

此外，请注意使用[`BigDecimal(String)`构造函数](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#BigDecimal%28java.lang.String%29)以避免在`BigDecimal`使用`double`文字创建时出现问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T12:39:15.693

您应该使用 MathContext 作为无限小数的除法：

```
 BigDecimal priceDiff = BigDecimal.ONE
            .subtract(new BigDecimal(9.99)
            .divide(new BigDecimal(19.99), new MathContext(10, RoundingMode.UP)))
            .multiply(new BigDecimal(100));
    System.out.println(priceDiff.toPlainString()); 
```

但是，打印 50.025...

这将打印 49.98：

```
BigDecimal priceDiff = new BigDecimal(9.99)
        .divide(new BigDecimal(19.99), new MathContext(10, RoundingMode.UP))
        .multiply(new BigDecimal(100), new MathContext(4, RoundingMode.UP));
System.out.println(priceDiff.toPlainString()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T12:44:15.193

从[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)：

> 在除法的情况下，精确商可以有一个无限长的小数展开；例如，1 除以 3。如果商具有非终止十进制扩展并且指定操作返回精确结果，则会引发 ArithmeticException。

解决方案是提供一个`MathContext`给分部，例如`MathContext.DECIMAL128`. 如果您想以传统方式进行舍入（向上舍入而不是最接近的偶数），请使用`MathContext(int precision)`

您还应该使用参数而不是参数创建`BigDecimal`s ，因为后者会导致精度损失。`String``double`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T12:42:20.547

BigDecimal 操作总是试图计算精确的结果。试试这个。

```
 BigDecimal priceDiff = BigDecimal.ONE
                .subtract(new BigDecimal(9.99)
                        .divide(new BigDecimal(19.99),RoundingMode.HALF_UP))
                .multiply(new BigDecimal(100));
        System.out.println(priceDiff.toPlainString()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T12:43:33.293

类似于@Keppil的回答

```
double d = (1 - 9.99 / 19.99) * 100;
System.out.printf("%.2f%%%n", d); 
```

印刷

```
50.03% 
```

你不会得到 49.98%，因为这不是你等式的答案。

# rss - 如何使用类 ContentService 创建 RSS 提要

> ID：12178054
> 
> 赞同：1
> 
> 时间：2012-08-29T12:32:45.910
> 
> 标签：rss, google-apps-script, feed

是否有任何教程/示例解释了如何使用类 ContentService 方法创建 rss 提要？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T13:35:14.803

此示例从您的 Gmail 收件箱中创建一个 RSS 提要（但仅在每个线程中的第一条消息）。

> **代码.gs**

```
function doGet() {
  return ContentService.createTextOutput(HtmlService.createTemplateFromFile("rss").evaluate().getContent())
          .setMimeType(ContentService.MimeType.RSS);
} 
```

> **rss.html**

```
<rss version="2.0">
<channel>
  <title><?= "Gmail Feed" ?></title>
  <? var threads = GmailApp.getInboxThreads();
     var messages = GmailApp.getMessagesForThreads(threads);
     for (var t in threads) { ?>
     <item>
       <title><?= threads[t].getFirstMessageSubject() ?></title>
       <description><?= messages[t][0].getBody() ?></description> 
       <guid><?= threads[t].getId() ?></guid>
       <pubDate><?= threads[t].getLastMessageDate().toUTCString() ?></pubDate>
     </item>
  <? } ?> 
</channel>
</rss> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-28T13:36:53.993

在这里查看：[https ://developers.google.com/apps-script/guides/content](https://developers.google.com/apps-script/guides/content)

```
function doGet() {
  var feed =  UrlFetchApp.fetch('http://xkcd.com/rss.xml').getContentText();
  feed = feed.replace(
    /(&lt;img.*?alt="(.*?)".*?&gt;)/g,
    '$1' + new Array(10).join('&lt;br /&gt;') + '$2');
  return ContentService.createTextOutput(feed)
    .setMimeType(ContentService.MimeType.RSS);
} 
```

# facebook - 如何检索选择“只有我”查看我的申请帖子的用户数量？

> ID：12178061
> 
> 赞同：0
> 
> 时间：2012-08-29T12:33:07.740
> 
> 标签：facebook, facebook-graph-api

我有一个 facebook 应用程序，我想从帖子可见性选项中检索选择“只有我”的用户数量。有人知道我该怎么做吗？

最好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:17:52.143

我认为您无法直接获取此数据。有一个[privacy_setting](https://developers.facebook.com/docs/reference/fql/privacy_setting/) FQL 表，可让您获取用户为您的应用程序启用的隐私设置。你可以试试那张桌子，但你想从中得到什么？

# jquery - 单击jquery更改文本

> ID：12178065
> 
> 赞同：2
> 
> 时间：2012-08-29T12:33:15.100
> 
> 标签：jquery

我有以下代码：

```
<td class="select-cli-numbers"><div class="explanationText" style="cursor:pointer;">Click here to select numbers</div></td> 
```

切换时，我想显示为 Click here to hide CLI numbers

我的js如下，但不起作用。有任何想法吗？

```
$(".select-cli-numbers").toggle(function () {
            $('#cli-numbers').show();
            $(this).text() = "Click here to hide CLI numbers"
    }, function () {
            $('#cli-numbers').hide();
            $(this).text() = "Click here to show CLI numbers"
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T12:36:09.847

你的语法有一点小问题。

```
$(".select-cli-numbers").toggle(function () {
  $('#cli-numbers').show();
  $(this).children().text("Click here to hide CLI numbers");
}, function () {
  $('#cli-numbers').hide();
  $(this).children().text("Click here to show CLI numbers");
}); 
```

`text()`接受一个文本字符串并将元素的文本节点设置为该字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:55:27.707

应该是这样的

```
$(document).ready(function() {
    $(".explanationText").toggle(function () {
      $('#cli-numbers').show();
      $(this).text("Click here to hide CLI numbers");
    }, function () {
      $('#cli-numbers').hide();
      $(this).text("Click here to show CLI numbers");
    });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T13:08:13.733

由于`toggle()`您正在使用的功能已[弃用](http://api.jquery.com/category/deprecated/)，我会改为使用点击功能：

```
$(".select-cli-numbers").on('click', function() {
    var msg = $('#cli-numbers').toggle().is(':visible')?'hide':'show';
    $('.explanationText', this).text("Click here to "+msg+" CLI numbers");
});​ 
```

[**小提琴**](http://jsfiddle.net/cGQR5/1/)

# c++ - 将 std::map 复制/插入到 boost::bimap

> ID：12178067
> 
> 赞同：4
> 
> 时间：2012-08-29T12:33:19.633
> 
> 标签：c++, boost, copy, bimap

我尝试将 std::map 的元素复制到 boost::bimap 中。我无法让 std::copy 工作（boost 文档似乎表明 bimap 应该与 std::copy 兼容）。

我尝试了以下方法：

```
std::map<K, T> curves;

boost::bimap<boost::bimaps::set_of<K>,
    boost::bimaps::multiset_of<T>> m_curves;

... // some initialisation of curves

std::copy(curves.begin(), curves.end(), std::inserter(m_curves, 
    m_curves.end())); // This fails

m_curves.insert(curves.begin(), curves.end()); // This fails too ! 
```

错误消息很长，开头是：

```
1>C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\xutility(2266) : error C2679: binary '=' : no operator found which takes a right-hand operand of type 'const std::pair<_Ty1,_Ty2>' (or there is no acceptable conversion)
1>        with
1>        [
1>            _Ty1=const K,
1>            _Ty2=std::string
1>        ]
1>        C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\iterator(129): could be 'std::insert_iterator<_Container> &std::insert_iterator<_Container>::operator =(const boost::bimaps::relation::mutant_relation<TA,TB,Info,force_mutable> &)'
1>        with
1>        [
1>            _Container=Focus::BMpCrvKeyToName,
1>            TA=boost::bimaps::tags::tagged<const K,boost::bimaps::relation::member_at::left>,
1>            TB=boost::bimaps::tags::tagged<const std::basic_string<char,std::char_traits<char>,std::allocator<char>>,boost::bimaps::relation::member_at::right>,
1>            Info=boost::bimaps::detail::manage_additional_parameters<boost::mpl::na,boost::mpl::na,boost::mpl::na>::case_NNN::additional_info,
1>            force_mutable=false
1>        ] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T13:01:56.617

bimap 本身与 签名不兼容`map`，但左视图是。尝试插入`m_curves.left`：

```
m_curves.left.insert(curves.begin(), curves.end()); 
```

# php - MySQL - WHERE、AND & OR 语法

> ID：12178069
> 
> 赞同：4
> 
> 时间：2012-08-29T12:33:29.227
> 
> 标签：php, mysql, chat

我正在编写一个私人聊天的东西，但现在我遇到了这个问题：
你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'to='gskartwii' OR sender='gskartwii' AND to='gs'' 附近使用正确的语法
警告：mysql_fetch_assoc() 期望参数 1 是资源, 在第 38 行的 C:\xampp\htdocs\rivase\private.php 中给出的布尔值
这是我的代码：

```
<!-- language: php -->
<?php
$result=mysql_query("SELECT * FROM rivase_chat_posts WHERE sender='$user' AND to='$user2' OR sender='$user2' AND to='$user'");
echo mysql_error();
while ($row = mysql_fetch_assoc($result)) {
    $sender=$row['sender'];
    $content=$row['content'];
    $time=$row['time'];
    echo "$sender : $content <span class='hidden'>$time</span><br />\n";
}
?> 
```

感谢大家的快速和良好的答复！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T12:34:34.173

尝试`to`用反引号转义

```
$result=mysql_query("SELECT * FROM rivase_chat_posts 
                    WHERE sender='$user' AND `to`='$user2' 
                    OR sender='$user2' AND `to`='$user'"); 
```

[因为它是 MySQL 中的保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:35:13.143

TO 是[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。

```
$result=mysql_query("SELECT * FROM rivase_chat_posts WHERE sender='$user' AND `to`='$user2' OR sender='$user2' AND `to`='$user'"); 
```

应该管用。

# android - 从 App 在 Adob e Reader 中打开 .pdf 文档

> ID：12178071
> 
> 赞同：1
> 
> 时间：2012-08-29T12:33:29.407
> 
> 标签：android, pdf

标题正是我想要做的。

我的应用程序将 pdf 下载到例如。/mnt/sdcard/docs/myfile.pdf

我想启动 adobe reader 并显示这个 pdf。

我尝试了很多变化

```
Intent intent = new Intent();                 
intent.setPackage("com.adobe.reader");    
intent.setDataAndType(Uri.parse("/mnt/sdcard/docs/myfile.pdf"), "application/pdf");  
startActivity(intent); 
```

阅读器弹出，但显示“无法打开文件”。如果我然后在刚刚打开的阅读器中，浏览到我的文档并打开它，它就可以工作。这个错误是关于什么的，我的任务如何完成？

编辑：感谢 KPBirds Link 现在可以使用。

我只是将 Uri.parse(path) 更改为 Uri.fromFile(new File(path))

# django - Django：如何从管理员内联的特定成员中删除一个字段

> ID：12178074
> 
> 赞同：1
> 
> 时间：2012-08-29T12:33:43.783
> 
> 标签：django, django-forms, django-admin

我在 Django admin 中有表格内联表格：

```
class MemberAdminInline(admin.TabularInline):
    model = Member
    fields = ("first_name", "last_name")
    readonly_fields = ("first_name", )

class GroupAdmin(admin.ModelAdmin):
    model = Group
    fields = ("name", "description")
    inlines = [MemberAdminInline] 
```

我想`last_name`有条件地显示会员的。IE

```
"If first_name = "Joe": don't display show field for last_name". 
```

真正不显示字段并且不隐藏它很重要（例如使用 JS），因为在我的实际工作场景中，在某些情况下，该字段可能包含二进制数据，当通过表单时会被破坏。即我只想`last_name`通过管理员对某些`first_name`s 进行编辑。

我已经尝试为内联和有条件地从那里删除字段提供自定义表单，或者`readonly_fields`在各个阶段动态地在列表中包含字段，但是 Django 仍然总是试图找到我想要隐藏字段的字段。

Django 1.3.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:33:43.783

似乎 Django 在内联创建时计算表单集的字段列表，然后表单集坚持这些字段存在。

因此，我发现克服这个问题的唯一方法是在需要时实际忽略保存的值：

```
class MemberAdminInlineForm(forms.ModelForm):
    def clean_last_name(self):
        if hasattr(self, "instance"):
            if self.instance.first_name == "Joe":
                return self.instance.last_name
        return self.cleaned_data["last_name"].

class MemberAdminInline(admin.TabularInline):
    model = Member
    fields = ("first_name", "last_name")
    readonly_fields = ("first_name", )
    form = MemberAdminInlineForm 
```

# android - Android Marquee TextView 可点击链接

> ID：12178076
> 
> 赞同：2
> 
> 时间：2012-08-29T12:33:48.447
> 
> 标签：android, textview, marquee

我的应用程序中有一个 TextView。这是一个字幕文本。我想让这个字幕文本的链接是可点击的。我怎样才能做到这一点？

感谢帮助。

编辑：我的代码：

xml:

```
android:id="@+id/marquee_text"
android:autoLink="web"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="center_vertical"
android:ellipsize="marquee"
android:marqueeRepeatLimit="marquee_forever"
android:singleLine="true"
android:layout_alignParentLeft="true"
android:layout_alignParentRight="true"
android:scrollHorizontally="true"
android:focusable="true"
android:focusableInTouchMode="true" 
android:text=" " 
```

爪哇：

```
marqueeText.setLinksClickable(true);
marqueeText.setText(marquee);//marquee is a string 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:45:45.743

*   通过[XML](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aautoLink)：

    ```
    android:autoLink="web" 
    ```

*   通过[代码](http://developer.android.com/reference/android/widget/TextView.html#setAutoLinkMask%28int%29)：

    ```
    txtView.setAutoLinkMask(Linkify.WEB_URLS) 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:39:36.353

尝试 Linkify 添加到 textview 的链接。

```
mTextSample = (TextView) findViewById(R.id.textSample);
String text = "Visit my blog jtomlinson.blogspot.com You can see Marquee also here";
mTextSample.setText(text);
//jmt: pattern we want to match and turn into a clickable link
Pattern pattern = Pattern.compile("jtomlinson.blogspot.com");
//jmt: prefix our pattern with http://
Linkify.addLinks(mTextSample, pattern, "http://"); 
```

欲了解更多信息，请[单击此处](http://jtomlinson.blogspot.in/2010/03/textview-and-html.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:39:50.577

`android:autoLink="web"`在您的布局 XML 中设置`TextView`，或者您可以在此处使用解决方案：

[如何使 TextView 中的链接可点击？](https://stackoverflow.com/questions/2734270/how-do-i-make-links-in-a-textview-clickable)

# php - phpMyAdmin 致命错误 - require(): 需要打开失败

> ID：12178082
> 
> 赞同：1
> 
> 时间：2012-08-29T12:34:08.493
> 
> 标签：php, phpmyadmin, xampp

我刚刚在我的 Windows 7 系统上安装了 XAMPP，当我从路径打开 phpMyAdmin 时出现以下错误`localhost/xampp/`

```
"Fatal error: require(): Failed opening required './libraries/session.inc.php' (include_path='.;C:\xampp\php\PEAR') in C:\xampp\phpMyAdmin\libraries\common.inc.php on line 367". 
```

我无法理解这意味着什么。请提出解决此问题的方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:30:24.133

对此没有适当的解决方法，只能进行完整的重新安装。我尝试了很多东西，相信我！

# c# - 创建一个在 20 分钟后执行示例 SQL 查询的计时器？

> ID：12178089
> 
> 赞同：0
> 
> 时间：2012-08-29T12:34:30.453
> 
> 标签：c#, asp.net, visual-studio-2008

在房间前面我有一个面板。该面板显示占用时间，例如 14:00 - 15:30。如果有人想在那段时间使用那个房间，他必须按下面板上的 CHECK_IN 按钮。所以系统知道房间里有人。现在我希望如果从 14:00 起 20 分钟后没有人使用该按钮，则应取消占用时间。

我已经编写了取消查询。但我需要类似于计时器的东西，它会在 20 分钟后执行查询。我怎样才能做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T12:36:51.827

使用[计时器](http://msdn.microsoft.com/en-us/library/ms149618.aspx)并将取消代码放入回调中。

```
public void StartCheckin(int dueTime)
{
    var t = new Timer(new TimerCallback(CancelCheckin));
    t.Change(dueTime, Timeout.Infinite);
}

private void CancelCheckin(object state)
{
    // cancel checkin
    // dispose of timer
    ((Timer)state).Dispose();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:36:05.023

您可以`Timer`在 C# 中使用该对象

[http://msdn.microsoft.com/en-us/library/system.timers.timer%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer%28v=vs.71%29.aspx)

# iphone - 在显示启动画面时从 web 服务加载数据

> ID：12178091
> 
> 赞同：2
> 
> 时间：2012-08-29T12:34:34.947
> 
> 标签：iphone, web-services, splash-screen

我正在尝试在显示初始屏幕时从 Web 服务加载一些数据。

我正在尝试使用下面的代码，但我仍然无法找到合适的解决方案。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self backgroundtask];
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]         autorelease];
    splashView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
    splashView.image = [UIImage imageNamed:@"Default.png"];
    [self.window addSubview:splashView];
    [self.window bringSubviewToFront:splashView];

    ViewController *masterViewController = [[[ViewController alloc]         initWithNibName:@"ViewController" bundle:nil] autorelease];
    self.navigationController = [[[UINavigationController alloc] initWithRootViewController:masterViewController] autorelease];
    self.window.rootViewController = self.navigationController;
    [self.window makeKeyAndVisible];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:41:25.313

如果要显示启动画面，只需将名为“default.png”的图像文件放入资源中。该应用程序将在任何视图加载之前在启动时自动显示。并且有`didFinishLaunchingWithOptions`你的代码的其余部分

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
 [self backgroundtask];
 self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]         autorelease];

 ViewController *masterViewController = [[[ViewController alloc]         initWithNibName:@"ViewController" bundle:nil] autorelease];
 self.navigationController = [[[UINavigationController alloc] initWithRootViewController:masterViewController] autorelease];
 self.window.rootViewController = self.navigationController;
 [self.window makeKeyAndVisible];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:38:39.440

做这个：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

  self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]         autorelease];
  //No need of splash View as u add Default.png to bundle and application will autimatically take it as Launch Image
  [self backgroundtask];
  ViewController *masterViewController = [[[ViewController alloc]         initWithNibName:@"ViewController" bundle:nil] autorelease];
  self.navigationController = [[[UINavigationController alloc] initWithRootViewController:masterViewController] autorelease];
  self.window.rootViewController = self.navigationController;
  [self.window makeKeyAndVisible];
} 
```

# php - PHP 传递值

> ID：12178094
> 
> 赞同：0
> 
> 时间：2012-08-29T12:34:49.893
> 
> 标签：php

我对这段代码有疑问：

```
 <?php   echo "<meta http-equiv='refresh' content='3;search_enroll.php?&id='.$id />"; ?> 
```

我正在使用此代码将此页面中的值传递到此页面，`$id`并且它不是空的，我回显了`$id`它并保存了该值。这是接收端的代码：

```
 <?php
            if (isset($_POST['SearchS'])){
                $id = $_POST['searchstudent'];

            }else if(!empty($_GET['id'])){
                $id = $_GET['id'];
            }
            else if(!empty($_GET['student_id'])){
                $id = $_GET['student_id'];
            }

            else {
                $id= $_REQUEST['student_id']; <--- this is line 37
            }
            ?> 
```

目前有这个错误说明，我希望第二条`else`语句应该检索代码。

```
Notice: Undefined index: student_id in C:\xampp\htdocs\Thesis\search_enroll.php on line 37 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:36:18.970

是否正确转义字符串或根本不这样做：

```
<?php
    echo "<meta http-equiv='refresh'
                content='3;search_enroll.php?id=".$id."' />"; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:38:41.567

出现此错误是因为您的 PHP 错误报告设置。

通常，它会在您的变量设置不正确时出现。

使用前检查是否`$_POST['action']`已设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:32:29.000

你应该做：

```
else {
    if(isset($_REQUEST['student_id'])){
        $id= $_REQUEST['student_id'];
    }
} 
```

这将确保在您尝试访问之前`student_id`存在密钥。`$_REQUEST`

没有检查，它会抛出`Notice`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T12:40:39.410

元数据不是那样使用的。您讨厌在 URL 子属性上指定 URL，而不仅仅是在这样的 CONTENT 属性上

```
<META HTTP-EQUIV="Refresh" CONTENT="n; URL=MyURL"> 
```

[http://en.wikipedia.org/wiki/Meta_refresh](http://en.wikipedia.org/wiki/Meta_refresh)

在那里，你的参数永远不会设置

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T12:42:56.463

发生错误时，在变量前使用`@`抑制器 。`Undefined index`

当变量没有首先声明并且我们在代码中使用时会发生此错误：

例如。

```
 else {
     @$id= @$_REQUEST['student_id']; <--- this is line 37
 } 
```

但是在您的情况下，不应运行此 else 条件。

# c# - 如何在 SignalR 中使服务器仅功能

> ID：12178099
> 
> 赞同：2
> 
> 时间：2012-08-29T12:35:03.887
> 
> 标签：c#, signalr

我想使用 SignalR 将数据推送到 Web 客户端。

```
public class PushHub : Hub
{
    public void Push(string data)
    {
        Clients.push(data);
    }
}

public class DataGenerator
{
    private readonly PushHub pushHub;

    public void DataGenerator(PushHub pushHub)
    {
        this.pushHub = pushHub;
    }

    public void Tick()
    {
        pushHub.Push("Ping");
    }
} 
```

但是，我不希望客户端能够调用此函数。

我只是打算从服务器上调用 Hub 对象本身的函数（除非这是一个坏主意？）。

但我不希望客户能够调用推送。

SignalR 是否为此提供了手段（例如，仅服务器功能的属性）？

如果我必须自己实现某些东西，那么我有一些想法，但我不确定它们有多好：

*   让另一个类访问 Clients 属性，然后调用 Push。
*   在 HUB 中存储某种只有服务器知道的 Nonce，并将该 nonce 作为额外参数传递给 Push。
*   从上下文中检查客户端 ID。我想从随机线程调用函数时它不存在。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-29T13:45:41.143

从 Hub 继承会将其公共方法公开给客户端。

我的猜测是，如果您想从服务器方法调用客户端而不从 Hub 继承类，您可以通过解析和获取 hub 对象来实现，如下所示：

```
 public class Notifier
    {
        public static void Say(string message)
        {
            var context = GlobalHost.ConnectionManager.GetHubContext<MyHub>();
            context.Clients.say(message);
        }
    }
} 
```

请参阅集线器上的 SignalR wiki：[https ://github.com/SignalR/SignalR/wiki/Hubs](https://github.com/SignalR/SignalR/wiki/Hubs)

# php - 数组键作为对象属性

> ID：12178108
> 
> 赞同：1
> 
> 时间：2012-08-29T12:35:38.997
> 
> 标签：php, oop, class, static

我有一个带有一些静态属性的 PHP 类，如下所示：

```
static public $_TYPE_DESIGN_DRAFT = 'design_draft';
static public $_TYPE_STORYTELLING_DRAFT = 'storytelling_draft';
static public $_TYPE_OTHER = 'other';
static public $_TYPE_DATA_FILE = 'data_file';

static public $_ALLOWED_EXTENSIONS = array(       // on the next line it breaks
                self::$_TYPE_DESIGN_DRAFT => array("jpeg", "jpg", "png", "gif", "pdf", "txt", "rtf", "doc", "csv"),
                self::$_TYPE_STORYTELLING_DRAFT => array("jpeg", "jpg", "png", "gif", "pdf", "txt", "rtf", "doc", "csv"),
                self::$_TYPE_OTHER => array("jpeg", "jpg", "png", "gif", "pdf", "txt", "rtf", "doc", "csv"),
                self::$_TYPE_DATA_FILE => array("pdf", "txt", "rtf", "doc", "csv", "xls")
); 
```

但似乎 PHP 不允许我用键的值作为同一个类的静态属性来定义这样的数组。

一种解决方法是只`$_ALLOWED_EXTENSIONS`在类的构造函数中定义 var，但是我不能这样做，`static`因为当静态时，构造函数不会被调用。

有没有有效的解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:45:22.450

你不能像这样使用类属性。

继我的评论之后；你能不做这样的事情吗？

```
class Test
{
    static public $_TYPE_DESIGN_DRAFT = 'design_draft';
    static public $_TYPE_STORYTELLING_DRAFT = 'storytelling_draft';
    static public $_TYPE_OTHER = 'other';
    static public $_TYPE_DATA_FILE = 'data_file';

    static public $_ALLOWED_EXTENSIONS = array();

    public static function init()
    {
        self::$_ALLOWED_EXTENSIONS = array(
            self::$_TYPE_DESIGN_DRAFT => array("jpeg", "jpg", "png", "gif", "pdf", "txt", "rtf", "doc", "csv"),
            self::$_TYPE_STORYTELLING_DRAFT => array("jpeg", "jpg", "png", "gif", "pdf", "txt", "rtf", "doc", "csv"),
            self::$_TYPE_OTHER => array("jpeg", "jpg", "png", "gif", "pdf", "txt", "rtf", "doc", "csv"),
            self::$_TYPE_DATA_FILE => array("pdf", "txt", "rtf", "doc", "csv", "xls")       
        );      
    }
}

Test::init();
print_r(Test::$_ALLOWED_EXTENSIONS); 
```

# mysql - mySQL中的反向计数

> ID：12178109
> 
> 赞同：0
> 
> 时间：2012-08-29T12:35:41.650
> 
> 标签：mysql

```
id  one two thr fou five
1   37  84  1   68  10
2   72  50  87  41  67
3   66  30  89  57  48
4   29  27  35  75  36
5   2   72  9   1   55
6   33  89  17  40  64
7   70  90  63  26  54
8   36  19  51  43  61
9   10  61  20  44  84
10  2   41  43  65  87 
```

我需要反向计算上表中的每个数字。

例子：

```
61=>1 because if you count from the bottom to the first 61 there's 1 row
26=>3 because if you count from the bottom to the first 26 there are 3 rows
9=>5 because if you count from the bottom to the first 9 there are 5 rows
and so on... 
```

查询应该为所有数字输出一个类似于以下的表：

```
Number  Rows count
61  1
26  3
9   5 
```

这里的问题是：如何在 mySQL 中反转计数？有什么特殊功能吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:04:20.197

`UNPIVOT`如果 MySQL 有一个函数，这会更干净：

```
SELECT x.num, co.co - count(x.id) FROM
    (SELECT count(id) as co FROM tab) as co, 
    (SELECT t.num, max(t.id) as 'id' FROM
        (SELECT id, one as 'num' FROM tab
        UNION
        SELECT id, two as 'num' FROM tab
        UNION
        SELECT id, thr as 'num' FROM tab
        UNION
        SELECT id, fou as 'num' FROM tab
        UNION
        SELECT id, fiv as 'num' FROM tab) as t
    GROUP BY t.num) as x
    INNER JOIN
    (SELECT id FROM tab) as y on x.id >= y.id
GROUP BY x.num, co.co 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:27:06.893

这是我想出的。它很丑。

```
select num, t1.max - t2.id as reverse_count from 
(select max(id) as max from testtable) as t1, 
(select id, row1 as num from testtable union all select id, 
 row2 as num from testtable union all select id, 
 row3 as num from testtable union all select id, 
 row4 as num from testtable) as t2; 
```

**编辑以使用正确的命名模式**

```
select num as Number, t1.max - t2.id as RowsCount from 
(select max(id) as max from testtable) as t1, 
(select id, one as num from testtable union all select id, 
 two as num from testtable union all select id, 
 thr as num from testtable union all select id, 
 fou as num from testtable union all select id, 
 five as num from testtable) as t2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:02:09.340

```
select COUNT(*) from TestTbl
where id > (select max(id) from TestTbl
where one='9' or two ='9' or three='9' or four='9' or five='9')

select COUNT(*) from TestTbl
where id > (select max(id) from TestTbl
where one='26' or two ='26' or three='26' or four='26' or five='26')

select COUNT(*) from TestTbl
where id > (select max(id) from TestTbl
where one='61' or two ='61' or three='61' or four='61' or five='61') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T12:43:03.603

如果您按应该执行的 id 排序，则可以使用 (Count(*) - id) 获得所需的计数。

如果没有，我相信如果 id 不按顺序，您可以使用 @curRow 标签。看看这些其他问题：

[MySQL在ORDER BY中获取行位置](https://stackoverflow.com/questions/3614666/mysql-get-row-position-in-order-by)

[使用 MySQL，如何在表中生成包含记录索引的列？](https://stackoverflow.com/questions/3126972/mysql-row-number)

# sql-server - SQL Server 中的 sp_depends，有哪些可能的依赖关系？

> ID：12178111
> 
> 赞同：4
> 
> 时间：2012-08-29T12:35:44.847
> 
> 标签：sql-server, stored-procedures, views, depends

我`sp_depends`第一次这样使用

```
sp_depends TestTable 
```

结果我得到了一些存储过程和视图。现在，当我查看 (Ctrl F for `TestTable`) 存储过程和视图的脚本时，我看不到它们指的是`TestTable`.

如果不使用脚本，是否还有其他依赖项？如果是怎么办？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T12:39:53.113

[`sp_depends`](http://msdn.microsoft.com/en-us/library/ms189487.aspx)是史前的，不可靠的。

> 此功能将在 Microsoft SQL Server 的未来版本中删除。避免在新的开发工作中使用此功能，并计划修改当前使用此功能的应用程序。请改用[sys.dm_sql_referenced_entities](http://msdn.microsoft.com/en-us/library/bb630351.aspx)和[sys.dm_sql_referenced_entities](http://msdn.microsoft.com/en-us/library/bb677185.aspx)。

更好的是，考虑使用 Red Gate 的*免费*SQL 搜索工具......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-27T17:26:10.507

我编写了一个存储过程来搜索所有数据库中的所有存储过程以查找文本，并显示数据库名称、存储过程名称以及如何使用文本的示例。您还可以指定两个单词，它将仅显示使用这两个单词的存储过程。例如，这对于搜索表名和单词 INSERT 很有用。

如果您在没有任何参数的情况下调用它，它将为您提供有关如何使用它的帮助。我的 GitHub 中还有其他数据库过程工具。

[sp_FindInAllProcs](https://github.com/RussellHankins/SQL-Server-Tools/blob/master/sp_FindInAllProcs.txt)

# git - Git - 如何用分支上的文件夹覆盖主分支上的文件夹

> ID：12178114
> 
> 赞同：2
> 
> 时间：2012-08-29T12:35:52.133
> 
> 标签：git, replace

> **可能重复：**
> [如何在 git 中使用覆盖选项将分支合并到另一个分支](https://stackoverflow.com/questions/1922336/how-to-merge-a-branch-into-another-with-override-option-in-git)

我在分支上有一些文件夹，我希望它们只覆盖 master 上的相同文件夹。

我不想进行合并。我只想直接替换。

任何想法如何在 Git 中做到这一点？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T12:51:18.347

这真的很简单：

```
git checkout master
git checkout <branch> -- <directory> 
```

第一个命令将您置于`master`. 第二个获取所有差异之间`<branch>`和之间的差异`master`，`<directory>`并将它们分阶段提交。

现在`git commit`像往常一样发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:38:48.687

删除主人。并向其提交新文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:43:43.577

Try something like this:

1.  Create patch:

    git diff master mybranch path/to/folder > foo.patch

2.  Checkout to master and apply it:

    patch -p1 < foo.patch

# android - 在 ScrollView 的中心放置一个块

> ID：12178119
> 
> 赞同：4
> 
> 时间：2012-08-29T12:36:09.530
> 
> 标签：android, android-layout, scrollview, layout-gravity

我有一个`ScrollView`包含一个子项（由 LinearLayout 包装的元素）。有时这个孩子的高度是视口高度的一半，有时它更大。

这里的布局：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingLeft="10dp"
    android:paddingRight="10dp"
    android:paddingBottom="10dp"
    android:paddingTop="10dp"
    android:background="@color/some_background">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:background="@drawable/fond_consult"
        android:orientation="vertical"
        android:weightSum="2">

        ... Some TextViews and ImageViews...

    </LinearLayout>
</ScrollView> 
```

当屏幕尺寸和密度较低时，子项会正确显示在 ScrollView 中，但是当在 HDPI 和 XHDPI 等更大的屏幕上渲染此活动时，内容会放置在 ScrollView 的顶部。

有没有办法为 ScrollView 的唯一孩子设置重力，或者如果设备屏幕大于孩子的测量高度，我是否必须删除 scrollView？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-29T15:38:01.450

你可以做的是尝试用它的和as添加`android:layout_gravity="center"`到。由于 ScrollView 自行管理其子布局的高度和宽度。`ScrollView``layout_width``layout_height``wrap_content`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:14:06.257

正常情况下，ScrollView 只会占用最少的空间，所以根本不会出现垂直对齐的问题（垂直滚动的情况下）。您可以浏览[http://www.curious-creature.org/2010/08/15/scrollviews-handy-trick/](http://www.curious-creature.org/2010/08/15/scrollviews-handy-trick/)中的文章。它可能会帮助你。

# java - JCuda 编译器错误

> ID：12178121
> 
> 赞同：2
> 
> 时间：2012-08-29T12:36:11.420
> 
> 标签：java, jcuda

我已经开始使用 JCuda。当我编译程序时，我收到“jcuda.cuda exception cuda_error_launch_failed”错误。我已按照安装指南中给出的步骤操作但不起作用。网上可用的资源很少。所以，请帮助我.这是我的代码：

```
extern "C"
__global__ void reduce(float *g_idata, float *g_odata, unsigned int n)
{
    extern __shared__ float sdata[];
    unsigned int tid = threadIdx.x;
    unsigned int i = blockIdx.x*blockDim.x*2 + threadIdx.x;
    unsigned int gridSize = blockDim.x*2*gridDim.x;

    float mySum = 0;

    while (i < n)
    {
        mySum += g_idata[i];
        if (i + blockDim.x < n)
            mySum += g_idata[i+blockDim.x];
        i += gridSize;
    }

    sdata[tid] = mySum;
    __syncthreads();

    if (blockDim.x >= 512) { if (tid < 256) { sdata[tid] = mySum = mySum + sdata[tid + 256]; } __syncthreads(); }
    if (blockDim.x >= 256) { if (tid < 128) { sdata[tid] = mySum = mySum + sdata[tid + 128]; } __syncthreads(); }
    if (blockDim.x >= 128) { if (tid <  64) { sdata[tid] = mySum = mySum + sdata[tid +  64]; } __syncthreads(); }

    if (tid < 32)
    {
        volatile float* smem = sdata;
        if (blockDim.x >=  64) { smem[tid] = mySum = mySum + smem[tid + 32]; }
        if (blockDim.x >=  32) { smem[tid] = mySum = mySum + smem[tid + 16]; }
        if (blockDim.x >=  16) { smem[tid] = mySum = mySum + smem[tid +  8]; }
        if (blockDim.x >=   8) { smem[tid] = mySum = mySum + smem[tid +  4]; }
        if (blockDim.x >=   4) { smem[tid] = mySum = mySum + smem[tid +  2]; }
        if (blockDim.x >=   2) { smem[tid] = mySum = mySum + smem[tid +  1]; }
    }

    if (tid == 0)
        g_odata[blockIdx.x] = sdata[0];
} 
```

我安装了 nvidia 460 gtx gpu 和 cuda 驱动程序和工具包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:43:45.820

使用`cudaFree(deviceId);`或`cudaFree(deviceId);`释放内存，然后重试。希望这对您有所帮助。

# android - 如何嵌入来自不同项目的组件？

> ID：12178127
> 
> 赞同：1
> 
> 时间：2012-08-29T12:36:28.333
> 
> 标签：android, ios

我有两个`projects(p1, p2)`，我想`components ( views, classes, ...)`在 p1 中使用 p2（例如：集成作为视图的一部分）。在 android 和 ios 平台上执行此操作的最佳方法是什么？在 android 平台上，我知道这样做的可能性，`generate p2 as a library-project and integrate it as jar-file in p1.`但这是推荐的，还是有更好的方法？

**约束：**两个不同的项目之间没有通信（比如在android中通过intent）我没有p2的源代码，因为这个项目来自另一家公司。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:41:23.687

**如果您有两个项目的来源**

在 Android 上，您可以将项目标记为“库”（项目 -> Android -> 属性 -> 检查是库），然后将其添加到另一个项目（项目 -> Android -> 属性 -> 添加）。**请注意**，您没有创建任何 jar，并且可以使用库项目中的任何资源（您不能使用包含的 jar 来执行此操作）。

推荐（因为它默认包含在 ADT 中）。

**如果不**

没有。

# java - 列出java中的任务管理器进程

> ID：12178129
> 
> 赞同：-1
> 
> 时间：2012-08-29T12:36:32.047
> 
> 标签：java, process

> **可能重复：**
> [如何在 Windows 的命令行上列出所有进程？](https://stackoverflow.com/questions/53489/how-do-you-list-all-processes-on-the-command-line-in-windows)

我想列出使用 Java 的任务管理器的“svchost.exe”、“explorer.exe”等所有进程。如果可能的话，我还想知道每个进程使用的内存量。

我更喜欢仅 Java 的解决方案来调整[此问题的命令行答案](https://stackoverflow.com/questions/53489/how-do-you-list-all-processes-on-the-command-line-in-windows)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:40:31.987

如果你在**窗户上**

```
Process proc = Runtime.getRuntime().exec ("tasklist.exe"); 
InputStream Outputp = proc.getInputStream ();
if(proc.waitFor () ==0){...//print Outputp} 
```

Linux：-

```
Process proc = Runtime.getRuntime().exec ("ps -A"); 
```

# html - 在 css 中为图标使用精灵表

> ID：12178136
> 
> 赞同：3
> 
> 时间：2012-08-29T12:36:55.013
> 
> 标签：html, css, web

由于某种原因，我无法使其正常工作。

这是我要使用的图标表：![在此处输入图像描述](../Images/e3aa6a55e8f19375afe1153be3594777.png)

我的问题是，即使我尝试设置`<li>`项目和`<a>`项目的宽度和高度，但我看不到 25x25px 图标，我只能看到里面的文本所覆盖的背景`<a>`（我当然打算摆脱！）

你能告诉我我做错了什么吗？谢谢！

这是一个显示我的代码和问题[的jsfiddle 。](http://jsfiddle.net/ubguy/)

或者你可以看看我下面的代码：

**html:**

```
<div id="connect">
                <h4>Stay Connected</h4>

                    <ul class="icons">
                    <li><a  class="blogger" href="#blogger">a</a></li>
                    <li><a class="linkdin" href="#linkd">b</a></li>
                    <li><a class="facebook"  href="#facebook">c</a></li>
                    <li><a class="twitter" href="#twit">d</a></li>
                   </ul>
            </div> 
```

**CSS：**

```
#connect ul.icons{list-style: none;}
        #connect ul.icons li{
             width: 25px;
            height: 25px;
        }
        #connect ul.icons li a {
            width: 25px;
            height: 25px;
            background-color: red;
            background-image: url('../IMG/iconset.gif');
        }
            #connect li a.blogger{background-position:100px 0px; }
            #connect li a:hover.blogger{background-position:100px 25px;}
            #connect li a.linkdin{background-position:50px 0px;}
            #connect li a:hover.linkdin{background-position:50px 25px;}
            #connect li a.facebook{background-position:25px 0px;}
            #connect li a:hover.facebook{background-position:25px 25px;}
            #connect li a.twitter{background-position:75px 0px;}
            #connect li a:hover.twitter{background-position:75px 25px;} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T12:38:35.227

你需要制作`a`元素`display:block`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T12:45:07.833

我在这里更新了你的 jsfiddle：

[http://jsfiddle.net/YXeuf/](http://jsfiddle.net/YXeuf/)

您需要将 display: 块添加到锚标记，并将用于悬停的类添加到 li 。我还将文本居中并添加了行高以使文本也垂直居中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T12:39:58.237

试试这个：http: [//jsfiddle.net/hunter/ubguy/14/](http://jsfiddle.net/hunter/ubguy/14/)

我做了你的`li a`造型`display: block;`

`:hover`还要在课后指定您的样式，而不是之前

```
#connect li a.blogger:hover 
```

您还可以使用`text-index: -9999px`隐藏屏幕上的文字

```
#connect ul.icons li a {
    text-indent: -9999px;
    background-image: url('http://c3it.webuda.com/IMG/iconset.gif');
    width: 25px;
    height: 25px;
    display: block;
}

#connect li a.blogger{background-position:25px 0px; }
#connect li a.blogger:hover{background-position:25px 25px;}

#connect li a.linkdin{background-position:75px 0px;}
#connect li a.linkdin:hover{background-position:75px 25px;}

#connect li a.facebook{background-position:100px 0px;}
#connect li a.facebook:hover{background-position:100px 25px;}

#connect li a.twitter{background-position:50px 0px;}
#connect li a.twitter:hover{background-position:50px 25px;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T12:50:29.533

你为什么不试试这个：

[http://jsfiddle.net/ubguy/13/](http://jsfiddle.net/ubguy/13/)

我想这是更好的方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T12:59:17.950

对于 css sprite 技术的一般用法，强烈推荐[A List Apart](http://www.alistapart.com/)中的这两篇文章：

[CSS Sprites：图像切片的死亡之吻](http://www.alistapart.com/articles/sprites/)

第二部分结合使用精灵和javascript（jquery）

[CSS Sprites2 - JavaScript 时间到了](http://www.alistapart.com/articles/sprites2/)

我知道还有很多其他的，但在我看来，这两本书真的很值得一读。

# android - PhoneGap Android 锁屏旋转与外部网页

> ID：12178141
> 
> 赞同：0
> 
> 时间：2012-08-29T12:37:10.890
> 
> 标签：android, cordova, jquery-mobile, screen-rotation

我想禁用屏幕旋转并始终使用横向并始终使用全屏。

我试过

```
android:screenOrientation="landscape" 
```

和

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

它们都适用于第一个网页（包括 jQuery Mobile 和 PhoneGap）。这是第一页：

```
super.loadUrl("file:///android_asset/www/index.html"); 
```

它是全屏的，不会旋转屏幕。在 中`index.html`，有一个指向 game.html 的链接（包括 PhoneGap 但不包括 jQuery Mobile）：

```
<a href="game.html" data-transition="slide" rel="external"> 
```

但是在 中时`game.html`，它不是全屏并且屏幕会旋转。

猜猜这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:46:53.760

我终于通过在 Java 代码而不是 JavaScript 中加载 url 来解决这个问题。

这是如何做到这一点的。

```
public class MainActivity extends DroidGap {

    private JsHelper jsHelper;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.init();

        getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        jsHelper = new JsHelper(this);
        super.appView.addJavascriptInterface(jsHelper, "JsHelper");

        super.loadUrl("file:///android_asset/www/index.html");
    }
}

public class JsHelper {
    private MainActivity activity;

    public JsHelper(MainActivity act) {
        activity = act;
    }

    public void goToHtml(String url) {
        activity.loadUrl("file:///android_asset/www/" + url);
    }
} 
```

在`index.html`：

```
<script type="text/javascript">
    function func() {
        window.JsHelper.goToHtml("game.html");
    }
</script>
<a href="#" data-transition="slide" rel="external" onclick="func()"> 
```

希望这可以帮助其他人。

# php - 如何在 Magento 后端获取默认的商店代码

> ID：12178154
> 
> 赞同：6
> 
> 时间：2012-08-29T12:37:56.240
> 
> 标签：php, magento

我正在尝试从 Magento 的后端中找出默认的商店代码。虽然这听起来很简单，但我找不到任何解决方案。

我发现的片段是

```
Mage::app()->getStore()->getCode() 
```

（尽管这不对应于默认值，而是当前商店）或

```
Mage::app()->getStore(Mage_Catalog_Model_Abstract::DEFAULT_STORE_ID)->getCode(); 
```

但是从后端这些只会返回“admin”（因为后端被视为某种特殊存储，存储 ID 为 0 - 这是 的值`DEFAULT_STORE_ID`）。谁能指出我从任何地方获取实际默认商店代码的方法？（如果“将商店代码添加到 URL”和“自动重定向到基本 URL”选项都被激活，则由 Magento 设置的商店代码）

只是我需要这个的一点背景知识：我需要在 Magento 配置中生成一个 URL，如果“将商店代码添加到 URL”被激活，该 URL 仍然有效。我可以设置任何商店代码，所以如果我在其中一个的配置范围内，我可以使用那个。但是如果配置范围设置为默认或网站，它也必须工作，所以我想在这种情况下使用默认的商店代码。

我找到了一个解决方案：

```
$websites = Mage::app()->getWebsites();
$code = $websites[1]->getDefaultStore()->getCode(); 
```

但是，这给我留下了一些后续问题。

为什么`Mage::app()->getWebsite()`返回一个只包含特殊`admin`商店的特殊网站对象，而返回一个**只**包含通常前端网站`Mage::app()->getWebsites()`的数组，而**不是**返回的对象？****`getWebsite()`****

 ****为什么前端网站对象在数组中占用索引 1，而索引 0 未使用？我真的很想知道必须在那里使用幻数的原因（如果必须的话）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T20:52:27.923

Magento 中没有默认存储。唯一的特殊商店是管理员商店；所有其他商店在 Magento 中拥有相同的权利。

> [...] 而 Mage::app()->getWebsites() 将返回一个数组，该数组仅包含通常的前端网站，但不包含 getWebsite() 返回的对象？

您应该查看`Mage_Core_Model_App::getWebsites()`的源代码：

```
public function getWebsites($withDefault = false, $codeKey = false)
{
    $websites = array();
    if (is_array($this->_websites)) {
        foreach ($this->_websites as $website) {
            if (!$withDefault && $website->getId() == 0) {
                continue;
            }
            //...
        }
    }

    return $websites;
} 
```

如果您调用`$websites = Mage::app()->getWebsites(true);`，您将获得一系列网站，其中管理员位于索引 0。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-03T12:51:46.293

你可以试试：

```
Mage::app()->getDefaultStoreView()->getCode(); 
```****

# iphone - 文本与正在运行的音频同步

> ID：12178160
> 
> 赞同：1
> 
> 时间：2012-08-29T12:38:22.610
> 
> 标签：iphone, ios, ipad, synchronization

有没有人知道如何使文本与音频保持同步，例如随着音频的进行，文本将自动填充或同步？

我真正想要的是我的音频文件正在播放，那时该音频文件的歌词将突出显示。

此外，如果任何应用程序具有相同的功能，请指导我。（对不起我的英语不好）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:51:45.040

我认为您无法自动将文本与音频同步。如果您在 Spotify 上，请安装“TuneWiki”应用程序。这会与音乐同步显示歌词，但如果您仔细观察，则会有一个同步按钮。单击它，您将看到用户随着时间的推移建立数据。

# facebook-like - 我可以将 og:image:secure_url 和 og:image 都放在linkedin 和 facebook 的页面上吗

> ID：12178164
> 
> 赞同：11
> 
> 时间：2012-08-29T12:38:32.730
> 
> 标签：facebook-like, linkedin, facebook-opengraph

我的网站目前在 HTTPS:// 上运行。我正在利用添加这个来实现社交功能。

**问题：**我在链接共享中遇到以下问题。

a) 大多数时候只有一半的图像出现 b) 有时图像没有出现。

**问题：**

1) 我可以将 og:image:secure_url 和 og:image 都放在linkedin 和 facebook 的页面上吗？如果是，应该是什么顺序。例子：

```
<meta property="og:image" content="http://example.com/ogp.jpg" />
<meta property="og:image:secure_url" content="https://secure.example.com/ogp.jpg" /> 
```

2) 必须遵循以下链接才能正确显示图像。

```
<meta property="og:image:type" content="image/jpeg" />
<meta property="og:image:width" content="400" />
<meta property="og:image:height" content="300" /> 
```

任何解决方案，但它应该适用于linkedin和facebook。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T21:22:46.790

1) 是的，并且基于[http://ogp.me/#structured](http://ogp.me/#structured)，这将告诉爬虫服务“网页需要 HTTPS”。

2) 这些不是必需的，因为无论如何 FB 和 LinkedIn 都会形成正确的大小。请记住，LinkedIn[明确有最低要求](https://developer.linkedin.com/documents/setting-display-tags-shares)，而 FB 没有。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-06-05T19:37:54.343

这是我最近使用这些标签和最新的开放图协议（2019 年 6 月）发现的。

1.  您必须包含完整的 URL（相对路径不起作用）
2.  使用`og:image`（不是`og:image:secure_url`）
3.  `og:image`当前支持值`https`的安全 ( )`content`
4.  您可以重新抓取网站并使用[Facebook 共享调试器测试功能](https://developers.facebook.com/tools/debug/)

希望它有所帮助，因为我发现这些具体细节很难遵循文档。

# ruby - 如何通过命令行配置本地部署和远程？

> ID：12178166
> 
> 赞同：0
> 
> 时间：2012-08-29T12:38:37.353
> 
> 标签：ruby, capistrano

我想知道是否可以将代码部署到本地机器而无需从“run”更改为“run_locally”？

例如，我有生产服务器和 Jenkins 服务器。在生产中，任务编译资产等。在 Jenkins 服务器上，我不需要在远程服务器上运行，而只需要在 Jenkins 上运行。

我可以使用“run_locally”，但我不喜欢重复我的任务并出现人为错误的想法。

理想的解决方案是使用 cmd 参数切换“run”和“run_locally”，例如“cap deploy --locally”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:48:21.377

我认为，不同的阶段是你在寻找什么。

[Capistrano 多级](https://github.com/capistrano/capistrano/wiki/2.x-Multistage-Extension)应该会有所帮助

此外，您可以实现与[此处描述的相同](https://github.com/capistrano/capistrano/wiki/2.x-Multiple-Stages-Without-Multistage-Extension)

# security - Web 服务器中的用户文件组织

> ID：12178171
> 
> 赞同：1
> 
> 时间：2012-08-29T12:38:45.033
> 
> 标签：security, scalability, file-organization

我正在开发一个用户可以上传文件的 Web 应用程序。

假设有不同的文件类别，例如*audio*和*docs*。我想我可以将属于某个类别的所有文件放在一个唯一的文件夹中，例如：

```
audio_dir
  -file_from_user1.mp3
  -another_file_from_user1.mp3
  -file_from_user2.mp3
  -file_from_user4.mp3
docs_dir
  -file_from_user1.doc
  -file_from_user5.pdf 
```

我正在评估的另一个解决方案使用第三级，其中文件按用户分组。

```
audio_dir
  user1_dir
    -file_from_user1.mp3
  user2_dir
    -file_from_user2.mp3
  user4_dir
    -file_from_user4.mp3
docs_dir
  user1_dir
    -file_from_user1.doc
  user5_dir
    -file_from_user5.pdf 
```

哪种解决方案是最好的？请注意，我对服务器**安全漏洞**和**可扩展性**感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:49:30.537

就安全性而言，您应该将文件存储在 Web 根目录之外。这有效地避免了某人上传可能基于 HTTPD 的配置执行的一个`*.php`或一个`*.pl`或一个`*.py`或任何其他可执行脚本。`.htaccess`我也会`basename()`在写入文件之前传递文件名以防止目录遍历攻击。

然后，您可以让 PHP 脚本为该文件提供服务。您还可以通过将文件映射到存储在 SQL 数据库中的元数据来添加用户访问控制和文件所有权。

# twitter - 使用 Twitter API 登录用户 - 如何将 oauth_token 和 oauth_verifier 转换为访问令牌

> ID：12178172
> 
> 赞同：1
> 
> 时间：2012-08-29T12:38:46.417
> 
> 标签：twitter, twitter-oauth

这是我使用的教程：

[http://net.tutsplus.com/tutorials/php/how-to-authenticate-users-with-twitter-oauth/](http://net.tutsplus.com/tutorials/php/how-to-authenticate-users-with-twitter-oauth/)

在获取访问令牌的最后一步之前，一切似乎都很好，我得到的错误是：

`Notice: Undefined index: oauth_token in /var/www/vhosts/opticalexpress.com/httpdocs/facebook/2011/ambassador-referral/classes/twitteroauth.php on line 118`

`Notice: Undefined index: oauth_token_secret in /var/www/vhosts/opticalexpress.com/httpdocs/facebook/2011/ambassador-referral/classes/twitteroauth.php on line 118`

据我所知，一切都应该工作：/

这是代码：

```
require_once('classes/twitteroauth.php');
session_start();

// The TwitterOAuth instance
$twitteroauth = new TwitterOAuth('xxxx', 'xxxx');
// Requesting authentication tokens, the parameter is the URL we will be redirected to
$request_token = $twitteroauth->getRequestToken('http://www.domain.com/tweet.php');

// Saving them into the session
$_SESSION['oauth_token']        = $request_token['oauth_token'];
$_SESSION['oauth_token_secret'] = $request_token['oauth_token_secret'];

// If everything goes well..
if($twitteroauth->http_code==200){
    // Let's generate the URL and redirect
    $url = $twitteroauth->getAuthorizeURL($request_token['oauth_token']);
    echo '<a href="'.$url.'">authorise</a>';
} else {
    // It's a bad idea to kill the script, but we've got to know when there's an error.
    die('Something wrong happened.');
}

if(!empty($_GET['oauth_verifier']) && !empty($_SESSION['oauth_token'])){
    // We've got everything we need

    // TwitterOAuth instance, with two new parameters 
    $twitteroauth = new TwitterOAuth('xxxx', 'xxxx', $_SESSION['oauth_token'], $_SESSION['oauth_token_secret']);
    // Let's request the access token
    $access_token = $twitteroauth->getAccessToken($_GET['oauth_verifier']);
    // Save it in a session var
    $_SESSION['access_token'] = $access_token;
    // Let's get the user's info
    //$user_info = $twitteroauth->get('account/verify_credentials');
    // Print user's info
    //print_r($user_info);
} else {
    // Something's missing, go back to square 1
    echo 'something missing';
} 
```

我要让这个工作变得非常疯狂，有什么想法吗？

# javascript - 如何在 Google 表单中添加动态字段？

> ID：12178175
> 
> 赞同：5
> 
> 时间：2012-08-29T12:38:52.730
> 
> 标签：javascript, jquery, google-apps-script, google-forms

是否有[使用 jQuery 添加新字段](http://code.google.com/p/jquery-dynamic-form/)或在 Google 表单中[使用 Javascript 添加字段的功能？](http://www.openjs.com/scripts/examples/addfield.php)

我正在使用谷歌应用程序脚本创建一个问卷应用程序，问题和答案将从我的管理面板中设置（管理员决定会有多少问题）。如果表单旁边有一个 (+) 可以自动加载表单下方的另一个文本框，那将是完美的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T12:36:13.717

我找到了完美的理由，为什么它无法使用 Google 表单添加动态字段，因为 Google 表单应用程序完全与电子表格绑定

所有表格都有单独的电子表格。

因此，由于与电子表格密切相关，因此不可能在 Google 表单中生成动态字段。

这可以说是 Google 表单和电子表格之间的静态关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-02T04:57:28.620

我认为您想构建一个新页面，该页面可以使用 Using jQuery with JSON 和 Google Spreadsheets Data API 提交到 Google 电子表格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-03T19:32:46.603

# 简短的回答

是的，您可以使用表单服务[类表单以编程方式创建/编辑表单](https://developers.google.com/apps-script/reference/forms/form)

注意：目前无法根据用户输入更改表单/问题，例如制作级联下拉菜单。

# 扩展答案

以下是将每种问题类型添加到 Google 表单的具体方法。

```
方法 返回类型 简要说明
-------------------------------------------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- ------------
addCheckboxItem() CheckboxItem 附加一个新问题项，允许受访者选择一个或多个复选框，以及可选的“其他”字段。
addDateItem() DateItem 附加一个新问题项，允许受访者指明日期。
addDateTimeItem() DateTimeItem 附加一个新问题项，允许受访者指明日期和时间。
addDurationItem() DurationItem 附加一个新问题项，允许受访者指示时间长度。
addGridItem() GridItem 追加一个新的问题项，以列和行的网格形式呈现，允许受访者从一系列单选按钮中每行选择一个选项。
addListItem() ListItem 附加一个新问题项，允许受访者从下拉列表中选择一个选项。
addMultipleChoiceItem() MultipleChoiceItem 附加一个新问题项，允许受访者从单选按钮列表或可选的“其他”字段中选择一个选项。
addParagraphTextItem() ParagraphTextItem 附加一个新问题项，允许受访者输入一段文本。
addScaleItem() ScaleItem 附加一个新问题项，允许受访者从编号的单选按钮序列中选择一个选项。
addTextItem() TextItem 附加一个新问题项，允许受访者输入单行文本。
addTimeItem() TimeItem 附加一个新的问题项，允许受访者指示一天中的某个时间。

```

# 也可以看看

*   [我可以通过 Google 应用脚本填写 TextItem 吗？](https://stackoverflow.com/questions/20320670/can-i-fill-in-textitem-by-google-apps-script/20320727#20320727)

# qt - QTableView - 将数字与小数点上的一个字母后缀对齐

> ID：12178179
> 
> 赞同：2
> 
> 时间：2012-08-29T12:39:02.580
> 
> 标签：qt

我需要在 QTableView 中显示特殊的数值。这些值有两种可能的格式：例如 short`'12.34'`和 wide `'12.34W'`。数字从点前一位或两位开始，然后是小数点，然后是两位小数，最后是可选字母“W”。要求是在小数点上对齐数字。居中不够好。

这在qt中可能吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-29T13:40:06.967

不要忘记您可以使用较低级别的技术。
你总是可以`sprintf()`的。然后左/右对齐字符串显示。如果您打算使用这些值，则需要一些样板文件。
就像是`sprintf(string, "%-.2f%c", value, (isWide) ? 'W' : ' ');`

# c# - 与 MVC 应用程序中的线程通信？

> ID：12178181
> 
> 赞同：0
> 
> 时间：2012-08-29T12:39:13.910
> 
> 标签：c#, multithreading, asp.net-mvc-3, asp.net-mvc-4

我创建了一个运行多个线程的服务。我不需要单独与每个线程进行通信，而是一次与所有线程进行通信。我找到了这篇[文章](http://professionalaspnet.com/archive/2009/09/21/Communication-With-a-Background-Thread-in-ASP.NET.aspx)，它允许通过处理程序进行通信。我使用 WCF 作为我的服务端点，想知道我是否可以与它而不是处理程序进行通信。以下是我在服务中所做的一些示例代码：

```
public class ThreadCoordinator
    {
        private int _numberOfThreads = 10;
        private List<Thread> _threads;

        public ThreadCoordinator()
        {
            _threads = new List<Thread>();
        }

        private void StartThreads()
        {
            for (int t = 0; t < _numberOfThreads; t++)
            {
                var st = new TheThread();
                var thread = new Thread(new ThreadStart(st.Run));
                _threads.Add(thread);
                thread.Start();
            }
        }

        public void RunThreads()
        {
            try
            {
                StartThreads();
            }
            finally
            {
                WaitForAllThreads();
                CloseAllConnections();
            }
        }

        private void WaitForAllThreads()
        {
            foreach (Thread t in _threads)
            {
                t.Join();
            }
        }

        private void CloseAllConnections()
        {
            //do some stuff to clean up resources
        }
    }

    internal class TheThread
    {
        public void Run()
        {
            //Do The work and update a global variable
            foreach(var person in somePersonList)
            {
                //do some work on that person 
                _someGlobalIntegerMember ++;
            }
        }
    } 
```

我想要一个全局变量来跟踪所有线程正在处理多少数据。因此，随着每个线程不断更新的东西正在处理数据。更重要的是，我希望能够从客户端的命令中暂停所有线程。如果我执行 ajax 请求或从 MVC 提交表单并不重要。本文[说明](https://stackoverflow.com/questions/142826/is-there-a-way-to-indefinitely-pause-a-thread)了如何暂停一个线程，但我不确定它是否可以应用于多个线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:55:34.663

您可以使用 Interlocked.Increment(ref toYourGlobalMember) 在线程安全模式下递增一个整数。

关于取消，也许你可以试试 TPL 和 Cancellation Tokens。

# javascript - 用户登录后的 web2py 在视图中显示元素

> ID：12178183
> 
> 赞同：0
> 
> 时间：2012-08-29T12:39:15.377
> 
> 标签：javascript, login, web2py

我正在使用 web2py，并且在 globals() 和 auth.navbar(separators=(' ',' | ','')) 中有一个 div class = "navbar" id="navbar">{{='auth' }} 用于用户登录和注册的元素。

一切正常。

用户登录后，我想向他展示一些在此之前隐藏的元素。

我想我是用 java 脚本来做的，但我想知道用它的功能来获取或收集什么，所以我可以用它作为显示隐藏元素的标记

谢谢你

# python - 无法获取有关主题的推文

> ID：12178189
> 
> 赞同：0
> 
> 时间：2012-08-29T12:39:43.153
> 
> 标签：python, twitter, python-twitter

我试图获得关于“GHAZA”的推文，我试图在推特上公开讨论“GHAZA”，有多少人在推特上发布了关于它的信息以及他们说了什么。我的代码运行但它返回奇怪的结果。

```
>>> tweets=api.GetSearch("Ghaza",per_page=100,page=1)
>>> print tweets
[<twitter.Status object at 0x01DD4D70>, <twitter.Status object at 0x01DD4DB0>, <twitter.Status object at 0x01DD4DF0>, <twitter.Status object at 0x01DD4E30>, <twitter.Status object at 0x01DD4E70>, <twitter.Status object at 0x01DD4EB0>, <twitter.Status object at 0x01DD4EF0>, <twitter.Status object at 0x01DD4F30>, <twitter.Status object at 0x01DD4F70>, <twitter.Status object at 0x01DD4FB0>, <twitter.Status object at 0x01DD4FF0>, <twitter.Status object at 0x01DCB050>, <twitter.Status object at 0x01DCB090>, <twitter.Status object at 0x01DCB0D0>, <twitter.Status object at 0x01DCB110>, <twitter.Status object at 0x01DCB150>, <twitter.Status object at 0x01DCB190>, <twitter.Status object at 0x01DCB1D0>, <twitter.Status object at 0x01DCB210>, <twitter.Status object at 0x01DCB250>, <twitter.Status object at 0x01DCB290>, <twitter.Status object at 0x01DCB2D0>, <twitter.Status object at 0x01DCB310>, <twitter.Status object at 0x01DCB350>, <twitter.Status object at 0x01DCB390>, <twitter.Status object at 0x01DCB3D0>, <twitter.Status object at 0x01DCB410>, <twitter.Status object at 0x01DCB450>, <twitter.Status object at 0x01DCB490>, <twitter.Status object at 0x01DCB4D0>, <twitter.Status object at 0x01DCB510>, <twitter.Status object at 0x01DCB550>, <twitter.Status object at 0x01DCB590>, <twitter.Status object at 0x01DCB5D0>, <twitter.Status object at 0x01DCB610>, <twitter.Status object at 0x01DCB650>, <twitter.Status object at 0x01DCB690>, <twitter.Status object at 0x01DCB6D0>, <twitter.Status object at 0x01DCB710>, <twitter.Status object at 0x01DCB750>, <twitter.Status object at 0x01DCB790>, <twitter.Status object at 0x01DCB7D0>, <twitter.Status object at 0x01DCB810>, <twitter.Status object at 0x01DCB850>, <twitter.Status object at 0x01DCB890>, <twitter.Status object at 0x01DCB8D0>, <twitter.Status object at 0x01DCB910>, <twitter.Status object at 0x01DCB950>, <twitter.Status object at 0x01DCB990>, <twitter.Status object at 0x01DCB9D0>, <twitter.Status object at 0x01DCBA10>, <twitter.Status object at 0x01DCBA50>, <twitter.Status object at 0x01DCBA90>, <twitter.Status object at 0x01DCBAD0>, <twitter.Status object at 0x01DCBB10>, <twitter.Status object at 0x01DCBB50>, <twitter.Status object at 0x01DCBB90>] 
```

我是 Python 新手，也是 Twitter Api 新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:57:18.377

查看 twitter 模块的文档。您的查询返回 twitter.Status 类的实例列表。可以在此处找到 twitter.Status 的简短文档：http: [//static.unto.net/python-twitter/0.6/doc/twitter.html#Status](http://static.unto.net/python-twitter/0.6/doc/twitter.html#Status)

你可以这样做：

```
tweets=api.GetSearch("Ghaza",per_page=100,page=1)
for t in tweets:
  print t.text 
```

根据[http://code.google.com/p/python-twitter/](http://code.google.com/p/python-twitter/)，您可以找到更多使用从 shell 运行的这三个命令的文档：

```
$ pydoc twitter.Status
$ pydoc twitter.User
$ pydoc twitter.DirectMessage 
```

# c# - ASP.NET 上一页 保留 搜索

> ID：12178193
> 
> 赞同：0
> 
> 时间：2012-08-29T12:39:56.057
> 
> 标签：c#, asp.net, .net, postback

我知道这已经被问到其他语言并且通过使用 Javascript 但是我有一个类似的问题。

在 .NET 中，有什么方法可以让我发布到另一个页面，然后当我在编辑后按下页面上的“返回”按钮或将我带回第一页时。

关键是第一页也有一个数据表，当时可能会被分页。如何保留此原始数据及其页面以及如何重定向回此页面。

如果它不值得实现或者维护起来会一团糟，那么我可以忽略它，但我觉得我应该在做出这个决定之前询问更好的程序员。

一个例子

[第 1 页] -> 输入搜索文本 -> 获取结果 -> 逐页 (x) -> 单击行
[第 2 页] 上的 URL -> 从上一个 URL 加载数据 -> 单击按钮保存 -> 单击按钮返回

期望的结果：将我带到我离开第 1 页的确切位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:43:25.133

您可以`Session`在离开当前页面之前将数据保存到其中，当您返回此页面时读取会话密钥，如果找到/可用（非空），则将`Session`数据分配给控件属性。

# delphi - 我可以在运行时创建 TDataSetFields 吗？

> ID：12178194
> 
> 赞同：4
> 
> 时间：2012-08-29T12:39:56.973
> 
> 标签：delphi, tclientdataset

我有一个简单的代码，它在运行时创建一个数据集的副本及其所有详细数据集：

```
 DestDataSet.FieldDefs.Assign(SourceDataSet.FieldDefs);
    SourceDataSet.GetDetailDataSets(DetailList);
    for i := 0 to DetailList.Count - 1 do
    begin
      with DestDataSet.FieldDefs.AddFieldDef do
      begin
        Name := TDataSet(DetailList[i]).Name;
        DataType := ftDataSet;
      end;
      DetailCDSs.Add(NestedCDS);
    end;
    DestDataSet.CreateDataSet; 
```

`CreateDataSet`引发`EDBClient`异常并显示消息“无效的字段类型”。谁能告诉我怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:31:44.170

如果创建`FieldDef`具有`ftDataSet`字段的数据集，则需要在创建数据集之前声明子定义。

# ios - #import 指令导入错误的文件

> ID：12178196
> 
> 赞同：1
> 
> 时间：2012-08-29T12:40:21.233
> 
> 标签：ios, preprocessor, objective-c-category

已经在网站上搜索过，但找不到答案。我的项目中经常有通过引用导入的文件。大多数情况下，它们是整个项目的一部分，我可以在其中运行测试用例等。

所以这是我的问题。我在我新创建的项目中导入（通过引用）一个类别，例如 AppDelegate+Category.h/.m。AppDelegate+Category.h 导入 AppDelegate.h。但在我的新项目中，该类别从我的测试项目中导入 AppDelegate。

我怎样才能克服这个问题，以便从我的新项目中导入 AppDelegate.h？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:28:16.283

我知道的唯一解决方案是为您的类别制作文件夹，并将类别 .h 和 .m 放在该文件夹中。您可以将整个文件夹添加到其他项目中，非类别导入将使用本地文件夹，而不是类别所在文件夹上方的文件夹。

# configuration - 使用 Fluent Validation 配置 NancyFx

> ID：12178201
> 
> 赞同：10
> 
> 时间：2012-08-29T12:40:38.760
> 
> 标签：configuration, fluentvalidation, nancy

是否必须在应用程序 Bootstrapper 中添加任何配置代码才能在 Nancy 中启用 FluentValidation？

[按照https://github.com/NancyFx/Nancy/tree/master/src/Nancy.Demo.Validation](https://github.com/NancyFx/Nancy/tree/master/src/Nancy.Demo.Validation)中的示例，我在尝试使用 this.Validate on model 时收到以下异常消息：**无法找到模型验证器工厂**.

我正在使用 Nancy 版本 0.11.0.0

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T13:03:37.580

您是否使用其中一个引导程序包（autofac、ninject、unity、windsor、structuremap）？如果是，则需要从引导程序类型继承，覆盖 ConfigureApplicationContainer 并在容器中注册类型。如果您使用的是默认引导程序，那么它应该自行连接

如果没有下一个版本 0.12，无论您使用什么引导程序，它都会自动连接

# postgresql - PostgreSQL 数据库中的对象分组

> ID：12178205
> 
> 赞同：2
> 
> 时间：2012-08-29T12:40:45.713
> 
> 标签：postgresql, schema, grouping

我继承了一个带有大型 Postgres 数据库的项目（超过 150 个表、超过 200 种自定义类型、近 1000 个函数、触发器等）。不幸的是，所有内容都被转储到一个模式 ( `public`) 中。从应用程序的角度来看，它工作得很好，但是维护起来却是一场噩梦。

显而易见的事情是按功能将这些对象拆分为单独的模式（例如，所有与供应商相关的东西都进入`supplier`模式，所有与管理相关的东西都进入`admin`模式等）。一旦完成，当然，需要对代码进行一些更改（好的，很多更改）才能引用新模式。考虑到 Web 应用程序包含大约 2000 个 php 文件，这可能是一项艰巨的任务。同样，由于系统中的每个 php 都已经开始，`require_once('controller/config.php');`我可以在那里添加一个调用来设置搜索路径以包含所有新模式：`SET search_path = 'public, supplier, admin, ...'`，但不知何故，我潜意识里不喜欢这个解决方案。

有没有其他方法可以处理问题？我不想在重组数据库上花费比绝对必要更多的精力。我也几乎不会在主网站上造成任何停机时间，因为它被世界各地（澳大利亚、欧洲、北美）的客户使用。

你会建议我做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:46:54.500

我认为`search_path`如果您走那条路线，该方法将是您必须这样做的方式。为什么你下意识地不喜欢解决方案？如果你能克服它，它似乎会消除维护的噩梦。哪个是更糟糕的维护噩梦或`search_path`使用？

根据[文档](http://www.postgresql.org/docs/current/interactive/ddl-schemas.html)：

> 将数据库对象组织成逻辑组以使其更易于管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T00:15:04.093

我可以理解不喜欢搜索路径解决方案。但是您知道 search_path 可以为每个用户或每个数据库设置吗？你可以 ALTER DATABASE SET search_path 然后你就完成了，更好的是它不是影响其他人的全局更改。

[http://www.postgresql.org/docs/9.1/static/config-setting.html](http://www.postgresql.org/docs/9.1/static/config-setting.html)

请记住，每个用户的设置是集群全局的，并且会覆盖每个数据库的设置。

# python - 将参数传递给 python 脚本并打开文件

> ID：12178206
> 
> 赞同：5
> 
> 时间：2012-08-29T12:40:48.823
> 
> 标签：python

我已经构建了一个脚本，该脚本将文件名作为参数并提取与特定模式匹配的所有行。问题是我无法打开文件名 - 我不断收到：

```
"TypeError: coercing to unicode: need string or buffer" 
```

它在抱怨线路`info = open(name, 'r')`。

这是代码：

```
import re
import sys
print sys.argv[1:]

keyword = 'queued='
pattern = re.compile(keyword)

name = sys.argv[1:]
inf = open(name, 'r') 
outf = open("test.txt", 'w')

for line in inf:
    if pattern.search(line):
        outf.write(line) 
```

我称之为

```
`extract.py trunc.log` 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T12:43:22.777

`sys.argv[1:]`是一个*列表*，而不是一个*字符串*。当你对一个列表进行切片时，你会得到一个列表——即使切片只取 1 个元素。你需要给`open`一个字符串。也许你想要`sys.argv[-1]`（最后一个元素）？

附带说明一下，python 标准库提供了命令行解析选项——一个是[`argparse`](http://docs.python.org/dev/library/argparse.html)在 python 2.7 中引入的优秀模块，但可以在较旧的 python 版本上轻松安装（我经常将它与 python2.6 一起使用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T12:43:28.673

这：

```
name = sys.argv[1:] 
```

`name`进入除第一个参数之外的所有参数的列表。你的意思是：

```
name = sys.argv[1] 
```

对于实际使用，您可能需要查看[argparse](http://docs.python.org/library/argparse.html#module-argparse)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T12:43:25.120

`sys.argv`返回命令行参数的**列表**。您可能希望循环此列表的每个元素（但第一个元素）：

```
with open("test.txt", "w") as outf:
    for name in sys.argv[1:]:
        with open(name, 'r') as inf:
            ... 
```

请注意，我们`test.txt`首先打开（您的输出文件），然后我们尝试打开作为脚本参数传递的每个文件。您可能想抛出一个`try... except`以防`open(name,'r')`万一（文件无法打开）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T12:49:28.600

你最好~~[光解析](http://docs.python.org/library/optparse.html)~~ [参数解析](http://docs.python.org/dev/library/argparse.html)

```
import argparse

parser = argparse.ArgumentParser(description='Process some integers.')
parser.add_argument('integers', metavar='N', type=int, nargs='+',
                   help='an integer for the accumulator')
parser.add_argument('--sum', dest='accumulate', action='store_const',
                   const=sum, default=max,
                   help='sum the integers (default: find the max)')

args = parser.parse_args()
print(args.accumulate(args.integers)) 
```

~~python 3.2 有[一个替代方案 (argparse)](http://docs.python.org/dev/library/argparse.html)。~~

# asp.net - 处理自动上传的文件

> ID：12178207
> 
> 赞同：1
> 
> 时间：2012-08-29T12:40:50.863
> 
> 标签：asp.net

我有一个简单的 ASP.NET 页面，用户可以浏览到该页面，从他们的机器中选择一个文件并将其上传到我的服务器。我的远程用户希望在他们结束时自动上传文件（使用 CURL）。

由于没有用户单击按钮，我需要做一些事情来处理这个问题，但是什么？

我需要进行哪些更改才能让我的网页在不单击按钮的情况下处理文件上传？

**代码页...**

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Configuration;

namespace FileUpload
{
    public partial class _Default : System.Web.UI.Page
    {
        string UploadTo_Path = ConfigurationManager.AppSettings.Get("UploadTo_Path");
        protected System.Web.UI.HtmlControls.HtmlInputFile File1;
        protected void Page_Load(object sender, EventArgs e){ }
        protected void Button1_Click(object sender, EventArgs e)
        {
            UploadFile();
        }       
        private void UploadFile()
        { 
            if ((File1.PostedFile != null) && (File1.PostedFile.ContentLength > 0))
            {
                string fn = System.IO.Path.GetFileName(File1.PostedFile.FileName);
                UploadTo_Path += "\\" + fn;
                File1.PostedFile.SaveAs(UploadTo_Path);
                Response.Write("The file has been uploaded.");
            }
            else
            {
                Response.Write("Please select a file to upload.");
            }
        }
    }
} 
```

**前端...**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="FileUpload._Default" Trace="true" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
<title>File Upload</title>
</head>
<body>
    <form id="form1" runat="server" enctype="multipart/form-data">
        <input type="file" id="File1" name="File1" runat="server" />&nbsp;
        <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:51:19.467

我会以不同的方式做这件事。

我会检查是否使用 POST 访问了该页面，然后运行 ​​UploadFile()，我不会使用带有单击处理程序的按钮。

在客户端，表单只会对页面进行正常的表单提交（POST）。

然后，这让 CURL 也可以直接访问页面，而无需使用 JavaScript 做任何聪明的事情（这可以被禁用而 CURL 不会这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:47:59.143

您可以使用 javascript 触发，例如在加载页面或您选择的其他事件时

```
"document.getElementById(' " + FileUpload1.ClientID+ "').click()" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:12:37.120

如果是我，我会设置一个带有身份验证的 Web 服务。我认为您正在开放允许任何人将文件塞入您的服务器的能力，而无需 HttpHandler 验证正在上传的文件。

# mysql - 索引mysql损坏？

> ID：12178208
> 
> 赞同：1
> 
> 时间：2012-08-29T12:40:53.993
> 
> 标签：mysql, indexing, corrupt

有一个 mysql 表，我认为唯一索引已损坏。当我执行以下 sql 时：

```
SELECT field_b FROM table LIMIT 0,10 
```

响应为 NULL（10 行为 NULL）。

但是如果我执行

```
SELECT field_b FROM table WHERE field_a = 1 
```

我正在获取（非空）数据。发生了什么？

以下是表格属性

```
field_a and field_b = INT(11)
field_a = PRIMARY
field_b = UNIQUE INDEX
Table type = INNODB 
```

此表中有 200k+ 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:49:02.813

尝试`filed_b`代替`field_b`

```
SELECT filed_b From table limit 0,10 //spelling mistake 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:09:46.683

您可以在具有唯一索引的列中具有重复的 NULL 值。唯一索引仅保证非空值是唯一的。

如[文档](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)所述，BDB 存储引擎有一个例外。

> UNIQUE 索引创建一个约束，使得索引中的所有值都必须是不同的。如果您尝试使用与现有行匹配的键值添加新行，则会发生错误。此约束不适用于 NULL 值，但 BDB 存储引擎除外。

您至少有十行 field_b 为 NULL 并且在您发出查询时它们会显示。

要查看 field_b 为 NULL 的所有行，请尝试以下操作：

```
SELECT * FROM table WHERE field_b IS NULL 
```

# matlab - 两个矩阵维度的Matlab矩阵行到行乘法不一致

> ID：12178211
> 
> 赞同：2
> 
> 时间：2012-08-29T12:41:10.517
> 
> 标签：matlab, matrix, multiplication

例如，我有两个矩阵 A 和 B

**A = [ 1 2 3; 5 4 3; ...]**和 B = **[ 1; 2；3；4；5个；6]（行矩阵）**

我想要这个

**A*B = [1*1 2*1 3*1; 5*2 4*2 3*2；...]**没有循环。是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T13:00:34.633

从数学上讲，两个矩阵只有在它们的维度一致时才能相乘；如果矩阵`A`是`m*n`并且矩阵`B`是`n*k`那么你可以形成`A*B`具有维度的产品`m*k`。因此，从数学的角度来看，您的矩阵不能后乘以`A`which is 。如果您的矩阵实际上是，那么您可以形成具有维度的产品。请注意使用转置运算符从此处转置到此处。`m*3``B``6*1``A``6*3``B'*A``1*3``'``B``6*1``1*6`

Matlab 的矩阵乘法（使用`*`运算符）符合矩阵是一致的数学要求。Matlab 还提供了另一个矩阵乘法运算符 ，`.*`它执行逐个元素的乘法，即它`(i,j)`通过乘法来形成结果的每个元素`A(i,j)*B(i,j)`。我看到@Thor 已经给了你一种方法来做到这一点。

如果您要做的是将行中的每个元素乘以另一种方法的行`i`中`A`的标量，则`i``B`

```
A.*(repmat(B,1,size(A,2))) 
```

或者，您可以使用更高效但可能稍微不那么直观的方法，

```
bsxfun(@times, A,B); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:53:51.657

以通用方式执行此操作需要`A`并且`B`具有相同数量的元素。这样做的一种方法是重塑 -> 乘法 -> 重塑，例如：

```
[x y] = size(A);
AmB   = reshape(A, 1, x*y) .* transpose(B);
AmB   = reshape(AmB, x, y); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:54:01.800

如果`A`行数与向量中的元素相同`B`

```
AmB = diag(B) * A 
```

因为您要求的是行缩放。

这种表达方式优雅但不高效。对于高大的矩阵，应该首选`A`列上的循环。`AmB(:,i) = A(:,i) .* B`

# android - SpringToolSuite 2.9.2 不适用于 Android 插件

> ID：12178213
> 
> 赞同：1
> 
> 时间：2012-08-29T12:41:11.810
> 
> 标签：android, eclipse, plugins

我一直在使用**STS 2.9.2****并**尝试从

[https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)。

我正在使用 Windows XP。

该插件安装成功，然后我多次重新启动 STS（也使用**-clean**）。

但是 Android 并没有出现在任何地方。我试过了：

1.  窗口->首选项，或
2.  文件->新建，或
3.  文件->新建->其他。

我只能在“已安装插件”列表中看到 Android。

*   此插件是否适用于 STS 2.9.2？
*   为什么我什至在任何地方都没有看到它说安装成功？

我也试过

**卸载 Ardroid 插件**->**清理 STS 重新启动**->**安装插件**->**清理 STS 重新启动**

但它仍然没有显示在任何地方。

谢谢，阿迪

# linux - 创建符号链接以供另一个 Linux 实例使用

> ID：12178215
> 
> 赞同：3
> 
> 时间：2012-08-29T12:41:19.627
> 
> 标签：linux, embedded, symlink, embedded-linux

我正在使用 linux 开发嵌入式应用程序。我有一个 HOST linux 发行版（fedora）和一个 TARGET linux 发行版（不确定它是什么，但没关系）。

TARGET 文件系统是 HOST 文件系统中的一个文件夹。例如，TARGET 通过 nfs 从 HOST 文件系统上的 /home/paul/target/rootfs 引导，其中是通常的 linux 文件结构。

我正在向目标添加一个守护程序。我在 HOST 上交叉编译它并使用 make 目标（make install）将文件复制到 TARGET 文件系统并设置守护程序以运行。我复制

*   守护进程二进制
*   一些库和启动脚本
*   一些符号链接 (symlinks) 以促进守护进程的自动启动

正是后者给我带来了问题。为了在启动时自动启动，我需要在 /etc/rc.d/rc0.d 的 TARGET fs 中创建到 rc6.d 的符号链接，它指向我的启动脚本 /etc/rc.d/init/d /mdns。

问题是我需要在主机上创建这些符号链接，但供目标使用。因此它们不能指向主机机器所见的完整路径，它们需要指向目标运行时所见的路径。

所以例如

我需要在 /home/paul/target/rootfs/etc/rc0.d 中创建一个符号链接，但符号链接需要称为 K16mdns 并指向 /etc/init.d/mdns 而不是 /home/paul/target/rootfs/等/init.d/mdns

如何使用 ln 命令来执行此操作？我需要为 ln 指定 3 件事（除了 -s 标志）：- 链接文件名、链接目标和创建链接的目录。我在 ln 手册页中没有看到这种组合。

它似乎总是最终要么弄乱主机上的 /etc/rc.d 目录，要么使用仅与主机相关的路径在 TARGET fs 中创建符号链接，显然失败（目标没有路径 /home/paul/target /rootfs/etc/init.d/mdns）。

当我在 TARGETs 命令行上手动创建符号链接时，一切都很好，但显然这不是一个实用的解决方案。

先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T12:45:26.633

符号链接时应该使用相对路径，例如

```
cd /home/paul/target/rootfs/etc/init.d
ln -s mndns ../rc0.d/K16mdns 
```

# asp.net - ASP.NET / Oracle 问题：TNS 无法解析指定的连接标识符

> ID：12178218
> 
> 赞同：10
> 
> 时间：2012-08-29T12:41:24.747
> 
> 标签：asp.net, visual-studio-2010, oracle

我有一个在 Visual Studio 2010 中运行的 ASP.NET Web 应用程序的本地副本。该代码与在我的开发环境中运行的代码完全相同。

当我尝试通过 ASP.NET 连接到我的 Oracle 数据库时，它会抛出“TNS 无法解析指定的连接标识符”。奇怪的是这个数据库在我的 TNSNAMES.ORA 文件中，当我使用 TNSPING 或 Microsoft Data Link 连接时，它工作正常。

我尝试修改我的 Oracle 目录的权限，但这似乎没有帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-29T15:12:07.787

确保您已安装 Oracle 数据库客户端（x86 或 x64）。

确保您已将 PATH 配置为使用 Oracle bin 文件夹：

> PATH=C:\Oracle\product\11.2.0\client_1\bin

确保您的**tnsnames.ora**文件位于以下目录中：

> C:\Oracle\product\11.2.0\client_1\network\admin

您可以尝试使用以下连接字符串：

```
Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=192.168.1.1)(PORT=1521)))(CONNECT_DATA=(SERVICE_NAME=MYDATABASE)));User ID=myusername;Password=mypassword; 
```

更新：

我没有这个环境变量（因为我使用了扩展的连接字符串）但是[这里](http://kb.tableausoftware.com/articles/knowledgebase/oracle-connection)和[这里](http://yyosifov.blogspot.co.uk/2011/10/ora-12154-tnscould-not-resolve-connect.html)有人建议添加**TNS_ADMIN**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-04-29T11:38:12.823

使用 TNS：

（对于 ASP.NET Core，您需要 TNS_ADMIN 环境变量指向 tnsnames.ora 所在的目录）

```
Data Source = TORCL; User Id = myUsername; Password = myPassword; 
```

不使用 TNS：

```
Data Source = (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP) (HOST = MyHost) (PORT = MyPort))) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = MyOracleSID));
User Id = myUsername; Password = myPassword; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-18T14:58:35.330

如果上述所有验证均失败，请尝试以下操作。这就是解决我的问题的原因。它是 tnsnames.ora 文件中 TNS 条目的名称。

示例：我有 abc.xyz = (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=MyHost)(PORT=MyPort))(CONNECT_DATA=(SERVICE_NAME=MyOracleSID)));

我仍然得到 ORA-12154: TNS:could not resolve the connect identifier specified

然后我将其更改为 abcxyz = () 并且它起作用了。

基本上我删除了特殊字符，如 . 和 _ 在 TNS 条目名称中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-12T04:00:12.157

1.  安装 VirtualBox 5.0.20
2.  在 VirtualBox 上安装 CentOS 7
3.  安装 Oracle 11g R2 (11.0.2)
4.  创建数据库
5.  在 VirtualBox 上安装 Windows 10
6.  安装 VisualStudio Professional 2012 并逐步更新 SP1 到 SP5
7.  更新 Nuget 包管理器
8.  在 Nuget 包管理器控制台中运行：Install-Package Oracle.ManagedDataAccess
9.  创建一个网络项目。
10.  在项目 bin 文件夹中保留一个 tnsnames.ora 文件

    ## TNSNAMES.ORA

MYDB= (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=192.168.56.2)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=SID_NAME)));

使用步骤 12 中的源代码，连接字符串除外，如下所示：

```
string constr = "user id=test;password=test;data source=MYDB"; 
```

或按照步骤 12。

11.  使用 Oracle.ManagedDataAccess.Client 在代码中使用以下命名空间；使用 Oracle.ManagedDataAccess.Types；
12.  要连接 Oracle 数据库，请使用以下语句：

    string constr = "user id=test;password=test;data source=(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=192.168.56.2)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=SID_NAME))) ";

    OracleConnection con = new OracleConnection(constr); 试试 { con.Open(); ViewData["Message"] = "已连接"; con.Dispose(); } 捕捉（异常前）{

    ViewData["Message"] = ex.Message; }

13.  就是这样。它奏效了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-11T00:03:26.160

我得到了同样的错误：ORA-12154: TNS:could not resolve the connect identifier specified

当我尝试从 Visual Studio 连接 Oracle 数据源时。

解决此问题的步骤。

确保您的系统上安装了 Oracle 客户端，还安装了 Oracle Wallet Manager。

1.  打开 Oracle Wallet Manager 并添加您的组织提供的证书。

2.  导航到“C:\APP\ORACLE\product\11.2.0\client_1\network\admin”（或桌面中的类似文件夹结构）文件夹，并将“tnsnames.ora”和“sqlnet.ora”文件替换为附件。

3.  在 C:\ORACLE\product\11.2.0.3\network\admin --> 添加 SQL.net.ora 和 tnsnames.ora 文件

4.  在 SQL.net.ora 文件中，修改步骤 1 中创建的钱包路径

重新启动系统并开始创建共享数据源。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-11T21:14:04.220

发生此错误的另一种可能情况是，如果您在本地使用 IISExpress 进行测试。

添加/修改 TNS 条目时，必须重新启动 IISExpress，以便接受新值。

在我的例子中，我正在调试一个应用程序并停止它以修改 TNS 条目，但是我随后再次运行该应用程序，但使用相同的 IISExpress 实例来运行 API。

一旦我停止了应用程序并手动关闭了 IISExpress，我就可以让我对 TNSNAMES 的修改在下一次执行时正常工作。

# javascript - 返回false后提交表单

> ID：12178221
> 
> 赞同：3
> 
> 时间：2012-08-29T12:41:44.637
> 
> 标签：javascript, jquery

```
$('#form').submit(function(e){

      e.preventDefault();

      $.ajax({
       //ajax stuff
            success: functtion(data){
                 //do stuff with data, then submit form

                 $('#form').submit(); // <-- this wont submit the form
            }
       });
}); 
```

ajax 调用完成后如何提交此表单？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T12:45:04.840

你这里有一个错字：`functtion`

然后尝试以这种方式，使用`submit()`可用于`form`元素的本机方法创建对表单本身的引用

```
$('#form').submit(function(e){

    e.preventDefault();
    var form = this;

    $.ajax({
    //ajax stuff
        success: function(data){
             ...
             form.submit();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T12:46:29.547

使用本[机`submit`方法](https://developer.mozilla.org/en-US/docs/DOM/form.submit)：

```
document.getElementById("form").submit();
// with jQuery:
$("#form")[0].submit(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T12:45:47.150

有一个带有 id 的按钮，`btnSubmit`并在单击按钮时执行以下代码...

```
$('#btnSubmit').click(function(e){
      $.ajax({
       //ajax stuff
            success: functtion(data){
                 //do stuff with data, then submit form

                 $('#form').submit(); // <-- this will submit the form
            }
       });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T12:46:18.850

要按原样提交，请使用以下代码：

```
if ($('#form').length == 1)
    $('#form')[0].submit(); 
```

（`.submit()`jQuery对象的`.submit()`方法不是DOM元素本身的方法）

# php - 批量编辑记录，一机多用

> ID：12178226
> 
> 赞同：1
> 
> 时间：2012-08-29T12:41:59.823
> 
> 标签：php, javascript, html, batch-file, edit

我希望管理员能够批量编辑记录。理想情况下，我希望管理员能够删除记录，或打开/关闭多个值。我发现我可以在表单中显示记录并在每个表单上放置复选框以收集一组 id。提交按钮让我收集检查记录的 id 数组并将它们发送到服务器进行处理，如下所示：

html:

```
<form="batchprocess.php" method="post">
<input type="checkbox" name="record[]" value="'.$id.'">RECORD<input type="submit" value="submit"></form> 
```

服务器/php：

```
$sql = "delete from tbl where id IN (implode(REQUEST['record']))"; 
```

这适用于一个功能，如删除。

我的问题是我无法弄清楚如何让几个按钮执行不同的管理操作，即删除、切换显示、切换隐藏等。如果在 html 中可以有不同的按钮来执行不同的操作，即包含一个提交按钮唯一值，那么我可以只使用 html，但据我所知，表单中不可能有多个不同的提交按钮。

Javascript 让您有多个按钮，但我不知道如何读取 javascript 中的复选框用户输入。

仅供参考，我想每页的记录批次约为 20。由于干净的 U/I 的原因，也不希望在表单中有其他字段说删除/显示/隐藏或类似的东西。

感谢您提供有关如何完成此操作的任何建议。

# javascript - Knockoutjs - 我无法设法使字段绑定

> ID：12178228
> 
> 赞同：0
> 
> 时间：2012-08-29T12:42:15.053
> 
> 标签：javascript, knockout.js

* * *

你好我是新来的knockoutJs，似乎我在某处做错了。这是我的代码[http://jsfiddle.net/adNuR/692/](http://jsfiddle.net/adNuR/692/)。我在 ko 对象中有正确的值，但它们没有绑定到我的 ui 上。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:44:28.567

My bad. I used data-bind with ":" instead of "=". :)

# dll - 图像(png, jpeg) 到 dll 转换器

> ID：12178231
> 
> 赞同：-1
> 
> 时间：2012-08-29T12:42:22.793
> 
> 标签：dll, image-conversion

我需要将我的图像文件（.pnd、.jpeg 等）转换为 dll 文件，以便将其放入 Windows 注册表中，如果有人之前尝试过，请提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:03:04.500

您确实可以将图像的位置添加到上下文菜单中，仅使用它的位置作为图像。

请查看[调整图像大小](http://sourceforge.net/projects/resizeimages/)的代码并查看我是如何创建 Windows 注册表项的。它需要在带有图标键的项目路径中，然后它应该可以工作。如果您有任何问题，请告诉我。

编辑请查看 fig1 了解更多信息：

图。1 ![在此处输入图像描述](../Images/1ddc4cf0eb6ca6cf5a1913a33bb6363e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:45:27.697

PNG和JPEG是图像格式，DLL是动态链接（代码/程序/函数）库。DLL 不**包含**图像，它应该包含便于操作系统/程序操作的代码。

# jquery - Nivo 滑块 - 更改 DIV 背景颜色

> ID：12178233
> 
> 赞同：0
> 
> 时间：2012-08-29T12:42:28.940
> 
> 标签：jquery, slider, nivo-slider

我想知道当 Nivo 滑块在幻灯片中转换时是否可以更改另一个元素（例如 body）的 CSS。如果它只是超链接，我可以使用 JQuery 在点击时应用额外的 CSS，但我不确定从哪里开始这样做。

基本上我希望在幻灯片更改时更改另一个 DIV 的背景颜色。我可以在 JQuery 中设置一个基本循环，但我希望将它绑定到 Nivo（或任何滑块）。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:03:00.973

您可以在幻灯片更改时更改的 Nivo div 上使用[更改事件。](http://api.jquery.com/change/)然后您可以添加自己的代码来设置 div 的颜色。这是一个简单的例子：

```
$('.nivoSlider').css("background-image").change(function() {
  alert('DO STUFF HERE');
}); 
```

我可能没有正确的选择器，但它应该让你朝着正确的方向前进。

# c - 包含相关错误。编译器无法识别先前声明的结构

> ID：12178234
> 
> 赞同：0
> 
> 时间：2012-08-29T12:42:28.923
> 
> 标签：c, include

我从 GCC 收到奇怪的错误，例如

```
main.c:117:3: warning: passing argument 2 of ‘Adsorbate_Timestep’ from incompatible pointer type [enabled by default]
Adsorbate.h:95:6: note: expected ‘struct Substrate *’ but argument is of type ‘struct Substrate *’ 
```

请注意，预期参数与实际参数相同。

我有几个头文件，它们定义了自己的结构并声明了使用这些结构的函数，以及来自其他头文件的结构。

解决了：

解决方案是确保每个头文件至少有每个结构体的减速（当然头文件中定义的结构体不需要再次声明）。

# liferay - Liferay + 地理服务器

> ID：12178238
> 
> 赞同：1
> 
> 时间：2012-08-29T12:42:38.163
> 
> 标签：liferay, geoserver

我有 geoserver 2.1.3 和 Liferay 6 ga1 问题是..我为每个使用 2 个不同的端口，geoserver 在 8080 上运行，Liferay 在 8082 上运行。这是一种浪费，因为它可能让 geoserver 在 Liferay 中运行，正确的？问题是

如何将 GeoServer 与 Liferay 集成？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:25:42.167

Liferay 只是一个 Web 应用程序，就像任何其他常规 Web 应用程序一样。不要被您可以下载 tomcat 包的事实所欺骗：您还可以下载 WAR 存档（以及一些全局依赖文件，用于全局类路径）并将它们部署到任何应用程序服务器（例如 tomcat）。

它在用户指南中有[详细记录。](https://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/lp-6-1-ugen11-installing-liferay-on-an-existing-application-server-0)（仅链接第一个相关章节，同时阅读以下章节，选择您的 appserver/servlet 容器。）

# uml - Enterprise Architect - 在拖放为超链接时为模型提供默认标记值

> ID：12178244
> 
> 赞同：1
> 
> 时间：2012-08-29T12:42:51.030
> 
> 标签：uml, enterprise-architect

我广泛使用 Enterprise Architect，并拥有一个包含多个包/模型的库

现在，我使用在图表中拖放来添加模型本身。我每次都需要分配一个不同的 TaggedValue 。

是否可以**在 ip-step 中添加此模型（在我的示例中）参数**分配 默认标记值？？？

![例子](../Images/14a8a9e23b9a1e5ab5b195e87808c829.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:55:29.993

希望我正确理解了您的问题，如果是这样...

事后您可以通过 Enterprise Architect 的脚本功能来做到这一点。创建所有图表超链接后，在屏幕上选择它们，然后运行以下命令：

```
!INC Local Scripts.EAConstants-JScript

/*
 * Script Name: Add tagged values to select diagram items
 * Author: TomO
 * Purpose: To add tagged values to selected diagram items
 * Date: 31st August 2012
 */

function main()
{
    var diagram as EA.Diagram

diagram = GetCurrentDiagram();

for ( i = 0; i < diagram.SelectedObjects.Count; i ++ )
{
var object as EA.DiagramObject;
var element as EA.Element;
var tag as EA.TaggedValue;

object = diagram.SelectedObjects.GetAt(i);
element = GetElementByID(object.ElementID);

tag = element.TaggedValues.AddNew("email", "");
tag.Value = "";
tag.Update();
}

}

main(); 
```

你会想要改变这一行：

tag = element.TaggedValue.AddNew("输入您的标记值的默认名称", "输入标记值的默认值");

我希望这有帮助！

汤姆

# php - How can I convert my .htaccess to web.config?

> ID：12178250
> 
> 赞同：0
> 
> 时间：2012-08-29T12:43:06.973
> 
> 标签：php, .htaccess, iis, web-config

I need to change this `.htaccess` to `web.config`. Server is IIS and I want my PHP application to run on my server

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php|robots\.txt)
RewriteRule ^(.*)$ index.php/$1

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(application|modules|plugins|system|themes) index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:48:00.327

如果您安装了 IIS，请打开管理器，单击任何站点，单击 URL 重写，在右侧面板上选择导入规则并粘贴您的 .htaccess 规则：

```
<rewrite>
  <rules>
    <rule name="Imported Rule 1">
       <match url="^(.*)$" ignoreCase="false" />
      <conditions>
         <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
    <add input="{R:1}" pattern="^(index.php|robots.txt)" ignoreCase="false" negate="true" />
  </conditions>
  <action type="Rewrite" url="index.php/{R:1}" />
</rule>
<rule name="Imported Rule 2" stopProcessing="true">
  <match url="^(application|modules|plugins|system|themes)" ignoreCase="false" />
  <conditions>
    <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
  </conditions>
  <action type="Rewrite" url="index.php/{R:1}" />
</rule> 
```

# grails - Instance metaclass changes leaking from instance to instance?

> ID：12178251
> 
> 赞同：0
> 
> 时间：2012-08-29T12:43:15.180
> 
> 标签：grails, groovy

I have two junit unit tests, one that tests success of a function, and another that tests failure recovery code when an exception occurs.

The CUT (Class Under Test) instance is instantiated in the setUp method.

In the failure test case's preamble, i override one of the cut's methods to throw an excetion, by overriding the method in the instance's metaclass:

```
cut.metaClass.internalWork ={throw new RuntimeException('Failing')} 
```

As I understood metaprogramming of an Object (not its static class), when you instantiate a new Object, the metaClass of this new Object is not affected by any metaprogramming you did on the old instance, but that's what I am observing, because I see when executing my success scenario, that the Runtime Exception that is set up in the cut instance that was used for the failure test case, is actually thrown.

If you need more details plea&se let me know, I just want to make sure that I am not making a fundamental theoretical mistake.

Thanks.

**Update**

This is to illustrate how my test case should work:

```
class Cut {
    int fn() {
        internalWork()
        1
    }

    void internalWork() {
        println "Doin work"
    }
}

class WtfTests extends TestSupport {
    @Override
    protected void setUp() {
        println "creating new MS instance"
        cut = new Cut()
    }

    void testSuccess() {
        println "testSuccess"
        cut.fn()
    }

    void testFailure() {
        println "testFailure"
        cut.metaClass.internalWork={->
            println "Won't do work"
            throw new RuntimeException('Failing')
        }
        assert 'Failing'==shouldFail(RuntimeException) {
            cut.fn()
        }
    }
} 
```

And this pretty much works as expected:

> creating new MS instance
> testFailure
> Won't do work
> creating new MS instance
> testSuccess
> Doin work

**Update 2**

By the way, by adding

```
registerMetaClass(MyClass) 
```

to the setUp method, I solved the issue, but this is only supposed to save the static metaclass, not the instance's metaclass, so now I'm thoroughly confused, because as shown in my example above, this should not matter... ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:54:21.483

您必须清理 CUT 元类

## 测试

```
@After
public void tearDown() {
    def remove = GroovySystem.metaClassRegistry.&removeMetaClass
    println "Cleaning CUT"
    remove CUT
    remove CUT1
    remove CUT2
} 
```

# iphone - Custom cell in tableView issue

> ID：12178259
> 
> 赞同：0
> 
> 时间：2012-08-29T12:43:27.960
> 
> 标签：iphone, tableview, cell

I am trying to create a custom cell through the following code below in my TableView. I am 100% new to Objective C and Iphone development so I am far away from experienced.

On the following code: **cell.label1 = [[UILabel alloc] initWithFrame:labelFrame];** it says (Property 'label1' not found on object of type 'UITableViewCell':

What have I missed? All the relevant code can be found below. Thanx for all the help / beginner

**BookmarksViewController.h**

```
@interface BookmarksViewController : UITableViewController <UIAlertViewDelegate>
{
NSMutableArray *items;

UILabel *label1;
UILabel *label2;
UILabel *label3;

}
@property (nonatomic, retain) NSMutableArray *items;
@property (nonatomic, retain) UILabel *label1;
@property (nonatomic, retain) UILabel *label2;
@property (nonatomic, retain) UILabel *label3;

- (NSMutableArray*) getStoredItems;
- (void) clearItems;
- (void) removeItemWithId:(int)itemId;

@end 
```

**BookmarksViewController.m**

```
#import "BookmarksViewController.h"

@interface BookmarksViewController ()

@end

@implementation BookmarksViewController

@synthesize items;
@synthesize label1 = _label1;
@synthesize label2 = _label2;
@synthesize label3 = _label3;

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"BookmarkCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    CGRect labelFrame = cell.bounds;
    labelFrame.size.height= labelFrame.size.height * 0.5;

    cell.label1 = [[UILabel alloc] initWithFrame:labelFrame];

}
Bookmark *item = [self.items objectAtIndex:indexPath.row];

NSArray *chunks = [item.name componentsSeparatedByString: @","];

NSString *name;
NSString *book;
NSString *chapter;

if ([chunks count] > 0)
{
    name = [chunks objectAtIndex:0];
    if ([chunks count] > 1)
    {
        book = [chunks objectAtIndex:1];
        if ([chunks count] > 2)
        {
            chapter = [chunks objectAtIndex:2];
        }
    }
}

cell.label1.text = name;

return cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
return 70; // height of tableView Cell
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T13:21:00.980

为此，您需要做的几件事： 1\. 创建 UITableViewCell 子类的自定义类（.h 和 .m）。2\. 然后在您的故事板中将表格视图单元格的类名作为创建的类。3\. 现在您可以在创建的自定义类中设计单元并连接插座。4.也不要忘记在情节提要中给出单元格的重用标识符。5\. 现在在 CellForRowAtIndexPath 方法中，您需要编写以下代码：

-

```
 (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    YourCustomClass *cell = [tableView dequeueReusableCellWithIdentifier:@"YourReuseIdentifier"];
    if (cell == nil) {
        cell = [[YourCustomClass alloc] initWithStyle:UITableViewCellStyleDefault
                                  reuseIdentifier:@"YourReuseIdentifier"];
    }

cell.yourLabel.text = cell.cityNameLbl.text.capitalizedString;
return cell; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:57:11.183

您需要将标签添加到单元格，因为单元格本身没有 label1 属性等 -

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSUInteger row = [indexPath row];

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    } else { // if there is already a subview, remove it
    while ([[cell.contentView subviews] count] > 0) {
        UIView *labelToClear = [[cell.contentView subviews] objectAtIndex:0];
    [labelToClear removeFromSuperview];
    }
    }

    UILabel *myLabel = [[[UILabel alloc] initWithFrame:CGRectMake(10, 5, 400, 30)] autorelease];

    // set up myLabel here

    [cell.contentView addSubview:myLabel];

    return cell;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:56:05.400

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *CellIdentifier = [NSString stringWithFormat:@"%d", indexPath.row] ;
    UILabel *lblTitle = nil;
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        lblTitle =[[UILabel alloc]initWithFrame:CGRectMake(5, 0, 320, 44)];
        lblTitle.backgroundColor = [UIColor clearColor];
        lblTitle.font = [UIFont systemFontOfSize:14.0];
        lblTitle.tag = 1;

        UILabel *lblType =[[UILabel alloc]initWithFrame:CGRectMake(5, 20, 320, 44)];
        lblType.backgroundColor = [UIColor clearColor];
        lblType.font = [UIFont systemFontOfSize:14.0];
        lblType.tag = 2;

        UILabel *lblDate =[[UILabel alloc]initWithFrame:CGRectMake(5, 40, 320, 44)];
        lblDate.backgroundColor = [UIColor clearColor];
        lblDate.font = [UIFont systemFontOfSize:14.0];
        lblDate.tag = 3;

        UILabel *lblTime =[[UILabel alloc]initWithFrame:CGRectMake(155, 20, 320, 44)];
        lblTime.backgroundColor = [UIColor clearColor];
        lblTime.font = [UIFont systemFontOfSize:14.0];
        lblTime.tag = 4;

        [cell.contentView addSubview:lblTitle];
        [cell.contentView addSubview:lblType];
        [cell.contentView addSubview:lblDate];
        [cell.contentView addSubview:lblTime];

    }

    lblTitle = (UILabel*)[cell viewWithTag:1];

    [lblTitle setText:@""];

    UILabel *lblType = (UILabel *) [cell.contentView viewWithTag:2];
    [lblType setText:@""];

    UILabel *lblDate = (UILabel *) [cell.contentView viewWithTag:3];
    [lblDate setText:@""];
    return cell;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T13:00:37.143

写下这段代码：

```
label1 = [[UILabel alloc] initWithFrame:labelFrame];
    [cell.contentView addSubview:label1]; 
```

代替`cell.label1 = [[UILabel alloc] initWithFrame:labelFrame];`

而且也`label1.text = name;`代替`cell.label1.text = name;`

我想这会对你有所帮助。

# mysql - 查询mysql中的days函数

> ID：12178263
> 
> 赞同：0
> 
> 时间：2012-08-29T12:43:35.147
> 
> 标签：mysql, days

我的表名为`sales`. 它包含如下所示的列。

```
fld_id  int(11),
fld_date    date,
fld_state   varchar(45),
fld_dtcode  varchar(45),
fld_companyname varchar(150),
fld_unitrate    int(11),
fld_count   int(11),
fld_amount  int(11), 
```

我想知道过去 30 天的平均销售量。
请帮我找出平均销售量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:45:49.393

尝试

```
select avg(fld_count*fld_amount) as average
from sales
where fld_date > now() - interval 30 day 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/1023b/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:47:47.320

你只会使用`AVG()`

```
SELECT AVG(fld_amount * fld_count) AvgSales30
FROM sales
WHERE fld_date > Date_Add(curdate(), interval -30 day) 
```

# php - 浏览器没有检测到 PHP 生成的 CSS？

> ID：12178269
> 
> 赞同：0
> 
> 时间：2012-08-29T12:43:47.067
> 
> 标签：php, caching

我试图在我的工作中第一次通过 PHP 生成 CSS 来加载它。它现在不起作用。

所以我的PHP端在输出数据方面是正确的，输出完美，但也许我在标题或其他方面有问题？

```
<?php

$p = realpath(dirname(__FILE__));
define('ROOT_SITE_PATH', $p);

include(ROOT_SITE_PATH . '/includes/functions.php'); # Global functions.
include(ROOT_SITE_PATH. '/includes/init.php'); # Page constants, includes for the app 'n stuff.

$init = new Init();

unset($init);

if(isset($_GET['file'])){

    $parts = explode('.', $_GET['file']);
    $ext = end($parts);

    switch(strtolower($ext)){
        case 'css':
            header('Content-Type: text/css; charset: UTF-8;'); 
            $file = DIR_STYLES . $parts[0] . '.php';
            if(is_file($file)){
                include($file);
                echo $css;
            }
        break;

        case 'js':
            header("Content-Type: text/x-javascript;");
            $file = SRC_SCRIPTS . $parts[0] . '.php';
            if(is_file($file)){
                include($file);
                echo $script;
            }
        break;
    }   
} 
```

我得到这个输出：`sitepath/dynamic_src.php?file=main.css`。看看这个。

在我的服务器上，我正在通过这个 main.css 文件进行测试，该文件似乎没有被浏览器呈现。

```
<link rel="stylesheet" type="text/css" href="sitepath/dynamic_src.php?file=main.css"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:39:21.457

您好，我可以清楚地看到您的代码是正确的并且工作正常。请查看[http://rajanmaharjan.com.np/test.php](http://rajanmaharjan.com.np/test.php)页面，您可以在其中看到您的风格出现在我的页面中。我已尝试根据您的设计包含您的 main.css

# ruby-on-rails - 使用 amazon s3 在 Rails 中存储资产的充分理由？

> ID：12178271
> 
> 赞同：0
> 
> 时间：2012-08-29T12:43:53.197
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, amazon-s3

我正在使用`paperclip`gem 并将图像存储在文件夹中，但我在许多用于存储类似图像`public`的示例中看到。为什么？我也读过很少的信息说当我们在其中部署我们的应用程序时，我们不能写入或存储任何东西，因为它是一个. 如果是这样，heroku 是否提供一些类似于亚马逊 s3 的服务。`s3``assets``heroku``read-only file system`

寻找更多的答案，以获得不同的观点和观点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:49:23.870

请记住，当有人使用您的网络应用程序时，浏览器会尝试尽可能快地获取网页。

如果你只有一台服务器渲染 html + 资产，自然比拥有专用 CDN 慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T21:15:29.660

来自[Ryan Bates 的 Railscast on Uploading to Amazon S3](http://railscasts.com/episodes/383-uploading-to-amazon-s3?autoplay=true)：

> 在过去，我已经完成了几集关于文件上传的剧集。但是我没有谈到的一件事是，一旦文件实际上传到服务器，它就会存储在哪里。通常，该文件只是存储在运行 Rails 应用程序的本地文件系统中，但这可能有几个缺点：
> 
> *   有时，该服务器的磁盘空间或带宽有限。
> *   此外，如果您想创建一个 Rails 服务器集群，这可能会增加一些复杂性。
> *   另外，不要忘记允许用户将文件上传到 Rails 服务器的潜在安全问题。
> 
> 因此，您可能希望将上传的文件存储在其他地方有几个原因......

Amazon S3 仅代表“其他地方”的一个实例。:-)

# java - 如何使用用户名/密码（无证书）通过 https 设置 CXF/SOAP 客户端连接

> ID：12178273
> 
> 赞同：4
> 
> 时间：2012-08-29T12:44:03.513
> 
> 标签：java, soap, cxf, password-protection

我们有一个 SOAP-webservice，我们试图通过带有用户名/密码连接的 https-connection 设置来获取连接，不应该涉及任何证书。似乎 Java 仍在尝试和失败的证书握手。如何设置连接以使其设法使用用户名/密码？

尝试在 MyWeb 上进行查询调用时产生的错误：

```
2012-08-29 13:31:19,918 WARN  (LogUtils.java:371) - Interceptor for {http://myaddress/}MyWebService#{http://myqname/}getStatus has thrown exception, unwinding now
org.apache.cxf.interceptor.Fault: Could not send Message.
    at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:64)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
    at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:510)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:440)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:343)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:295)
    at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:73)
    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:124)
    at $Proxy55.getTccStatus(Unknown Source)
    at se.transrail.cato.monitor.server.MonitorWsClient.readTccStatus(MonitorWsClient.java:65)
    at se.transrail.cato.monitor.server.WebServicePoller.run(WebServicePoller.java:73)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:351)
    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:178)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.net.ssl.SSLHandshakeException: SSLHandshakeException invoking https://myaddress/: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.mapException(HTTPConduit.java:1404)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1389)
    at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56)
    at org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:623)
    at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)
    ... 18 more
Caused by: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)
    at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1868)
    at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:276)
    at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:270)
    at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1338)
    at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:154)
    at sun.security.ssl.Handshaker.processLoop(Handshaker.java:868)
    at sun.security.ssl.Handshaker.process_record(Handshaker.java:804)
    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:998)
    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1294)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1321)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1305)
    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:515)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)
    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1090)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:250)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleHeadersTrustCaching(HTTPConduit.java:1337)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.onFirstWrite(HTTPConduit.java:1283)
    at org.apache.cxf.io.AbstractWrappedOutputStream.write(AbstractWrappedOutputStream.java:42)
    at org.apache.cxf.io.AbstractThresholdOutputStream.write(AbstractThresholdOutputStream.java:69)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1361)
    ... 21 more
Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:385)
    at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:292)
    at sun.security.validator.Validator.validate(Validator.java:260)
    at sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:326)
    at sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:231)
    at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:126)
    at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1320)
    ... 37 more
Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:196)
    at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:268)
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:380)
    ... 43 more 
```

MyWeb 和 MyWebService 由 Apache CXF 2.4.8 wsdl2java 生成。MyWeb 是 MyWebService 的接口。在 myweb.wsdl 我已经替换

设置：

```
private MyWeb preparePort() {
    MyWebService ss = new MyWebService(
            // locally stored wsdl to avoid connection at this time
            getClass().getClassLoader().getResource("myweb.wsdl");,
            new QName("http://qname/", "MyWebService"));
    MyWeb port = ss.getMonitorWebServicePort();

    Client cl = ClientProxy.getClient(port);

    HTTPConduit http = (HTTPConduit) cl.getConduit();

    HTTPClientPolicy httpClientPolicy = new HTTPClientPolicy();

    httpClientPolicy.setConnectionTimeout(connectionTimeout);
    httpClientPolicy.setReceiveTimeout(receiveTimeout);
    httpClientPolicy.setConnection(ConnectionType.CLOSE);
    httpClientPolicy.setMaxRetransmits(1);

    http.setClient(httpClientPolicy);

    ((BindingProvider) port).getRequestContext().putAll(of(
            USERNAME_PROPERTY, username,
            PASSWORD_PROPERTY, password,
            ENDPOINT_ADDRESS_PROPERTY, "https://mywebaddress/"));
    return port; 
```

来自 myweb.wsdl

```
<wsdl:service name="MyWebService">
    <wsdl:port binding="tns:MyWebServiceSoapBinding" name="MyWebPort">
        <soap:address location="https://mywebaddress/"/>
    </wsdl:port>
</wsdl:service> 
```

在网上找到的尝试修复无效：

```
//    AuthorizationPolicy authorizationPolicy = new AuthorizationPolicy();
//    authorizationPolicy.setUserName(username);
//    authorizationPolicy.setPassword(password);
//    authorizationPolicy.setAuthorizationType("Basic");
//    http.setAuthorization(authorizationPolicy);

//    Authenticator myAuth = new Authenticator()
//    {
//        @Override
//        protected PasswordAuthentication getPasswordAuthentication()
//        {
//            return new PasswordAuthentication(username, password.toCharArray());
//        }
//    };
//    Authenticator.setDefault(myAuth); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T13:11:37.213

在这里找到了一个有效的解决方案[http://techpolesen.blogspot.se/2007/08/using-ssl-with-xfirecxf-battling.html](http://techpolesen.blogspot.se/2007/08/using-ssl-with-xfirecxf-battling.html)它覆盖了 TrustManager 以使其在不存在证书的情况下接受连接：

```
 String targetAddr = http.getTarget().getAddress().getValue();
    if (targetAddr.toLowerCase().startsWith("https:")) {
        TrustManager[] simpleTrustManager = new TrustManager[] { new X509TrustManager() {
            public void checkClientTrusted(
                    java.security.cert.X509Certificate[] certs, String authType) {
            }

            public void checkServerTrusted(
                    java.security.cert.X509Certificate[] certs, String authType) {
            }
            public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                return null;
            }
        } };
        TLSClientParameters tlsParams = new TLSClientParameters();
        tlsParams.setTrustManagers(simpleTrustManager);
        tlsParams.setDisableCNCheck(true);
        http.setTlsClientParameters(tlsParams);
    } 
```

# android - 向 ViewPager 添加标题

> ID：12178276
> 
> 赞同：1
> 
> 时间：2012-08-29T12:44:08.593
> 
> 标签：android, xml, android-layout, android-viewpager, viewpagerindicator

[在本教程](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)的帮助下，我为我的 Android 应用程序创建了一个 PagerAdapter。

现在我喜欢为每个页面添加一个标题（就像在 Play 商店中一样）。我找到了这个库： http: [//viewpagerindicator.com/](http://viewpagerindicator.com/) 但我不知道如何在我的应用程序中实现它或如何使用它。

有人可以向我解释一下用法吗？

如果需要，这是我的 PagerAdapter 的代码：

```
public class MyPagerAdapter extends PagerAdapter {

    public int getCount() {
        return 5;
    }

    public Object instantiateItem(View collection, int position) {

        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        int resId = 0;

        switch(position) {
            case 0:
                resId = R.layout.farleft;
                break;
            case 1:
                resId = R.layout.left;
                break;
            case 2:
                resId = R.layout.middle;
                break;
            case 3:
                resId = R.layout.right;
                break;
            case 4:
                resId = R.layout.farright;
                break;
        }

        View view = inflater.inflate(resId, null);

        ((ViewPager) collection).addView(view, 0);

        return view;
    }

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) {
        ((ViewPager) arg0).removeView((View) arg2);
    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        return arg0 == ((View) arg1);
    }

    @Override
    public Parcelable saveState() {
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T12:57:53.743

> 现在我喜欢为每个页面添加一个标题（就像在 Play 商店中一样）

`PagerTabStrip`并且`PagerTitleStrip`位于您从中获得的 Android 支持包中`ViewPager`。只需将其中一个添加为您的子项`ViewPager`，并`android:layout_gravity`指示您是要在顶部还是底部添加条带。然后，正如 Luksprog 所指出的，添加`getPageTitle()`到您的`PagerAdapter`.

[这是一个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/ViewPager/Indicator)，演示了`PagerTabStrip`.

> 但我不知道如何在我的应用程序中实现它或如何使用它。

基本说明在您链接到的页面上。将其中一个 ViewPagerIndicator 小部件添加到您的布局中，放置在您想要的位置（例如，使用 a`vertical` `LinearLayout`将一个堆叠在您的 上方`ViewPager`）。在您调用 后的某个`setAdapter()`时间`ViewPager`，调用`setViewPager()`指示器小部件，将`ViewPager`. 再一次，您还需要`getPageTitle()`在您的`PagerAdapter`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-08T14:04:37.743

今天，我发现 PagerSlidingTabStrip 库是比 android 的默认库更好的选择。

[https://github.com/astuetz/PagerSlidingTabStrip](https://github.com/astuetz/PagerSlidingTabStrip)

PS：很抱歉发布为答案，我没有足够的评论声誉。

# c# - 如何使用 WPF 绑定到多个级别

> ID：12178278
> 
> 赞同：0
> 
> 时间：2012-08-29T12:44:15.120
> 
> 标签：c#, .net, wpf, data-binding, relativesource

这是我在WPF中开发复杂控件时经常遇到的问题。

我想将一些属性绑定到多个父级。

我目前正在将它与 RelativeSource 和 TemplatedParent 一起使用：

```
Value="{Binding PropertyToBind, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" 
```

但是有了这个，你可以绑定到直接父级，我有4个级别......所以我做了4个绑定，最终绑定到好的值。

我无法删除我的 4 级对象，它们是复杂的控件...

例如，我的**第一级**是我的操纵杆控制。在我的操纵杆中，我有一个滑块控件（**第二级**）来上下移动。在我的滑块中，我有一个按钮（**第 3 级**）。在我的按钮中，我有一个文本（**第 4 级**），我想将它绑定到我的第 1 级（操纵杆）中的属性。

我所做的是将我的文本绑定到按钮中的一个属性，然后我将按钮的属性绑定到滑块中的属性，等等.. 到操纵杆。有时，我需要创建自定义控件（添加了可以绑定的属性）。

这不是我的场景，这只是一个例子（是的，在这个我们可能会删除一些级别，但不是我的）我不想回答：删除这个或这个对象......

有没有办法直接绑定到多个级别？每个级别都是 Style 中的一个 ControlTemplate。

我正在使用 WPF 4、.NET 4.0、Blend 4、Visual Studio 2010

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:48:17.507

您不应该这样做，它会破坏封装并引入不必要的依赖项。你描述的是要走的路：

> 我所做的是将文本绑定到按钮中的属性，然后将按钮的属性绑定到滑块中的属性，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:49:41.757

`RelativeSource`您是否尝试过绑定中的其他排列？具体来说，您可以使用它`RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type SomeType}}`来查找您上方的特定控件，它看起来可能适用于您的场景。

# c++ - C++ 使用模板对象操作

> ID：12178280
> 
> 赞同：4
> 
> 时间：2012-08-29T12:44:21.093
> 
> 标签：c++, templates, pointers, compare

我有课

```
class BarBase {

}; 
```

和一个派生的模板类，它存储指向成员函数的指针和指向同一类的对象的指针

```
template<typename TypeName> class Bar: public BarBase
{
    void ( TypeName::*action ) ( void );
    TypeName* object;
}; 
```

我创建实例`Bar`并将指向它们的指针存储在另一个类的向量中`Foo`

```
class Foo {
    private:
        vector<BarBase*> myBars;
    ...
}; 
```

现在的问题。Foo 有一个模板函数

```
template <typename TypeName>
void Foo::foo( TypeName* object , void ( TypeName::*action ) ( void ) ) 
```

在此函数中，如何在具有字段且等于此函数参数的`myBars`元素中找到？如您所见，我无法直接访问这些字段，因为这些字段不是（也不能是）.`object``action``this->myBars[i]->action``BarBase`

**编辑** 我可以比较`object`。我添加一个`virtual size_t getObject (){};`to并在like`BarBase`中覆盖它。然后我比较两个，但我不知道如何转换为数字......`Bar``virtual size_t getObject (){ return (size_t)this->object; };``size_t``action`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:58:10.157

最简单的解决方案是使基类多态，并使用`dynamic_cast`它来确定它是否具有预期的类型：

```
class BarBase {
public:
    virtual ~BarBase() {}  // virtual function required for polymorphism
};

Bar<TypeName>* bar = dynamic_cast<Bar<TypeName>*>(myBars[i]);
if (bar && bar->object == object && bar->action == action) {
    // it's a match
} 
```

这确实增加了一些支持 RTTI 的开销；在我的脑海中，我想不出任何不增加开销的明确方法来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:17:15.733

如果您不想使用 Mike 变体（我更喜欢他的变体），您可以使用类似的东西。

```
class BarBase 
{
public:
   virtual ~BarBase() { }
   virtual void* getObject() { return 0; }
   virtual const char* getFunctionName() { return 0; }
};

template<typename T>
class Bar : public BarBase
{
public:
   Bar(T* obj, void (T::*func) (void)):object(obj), action(func)
   {
   }
   virtual void* getObject() { return object; }
   virtual const char* getFunctionName() { return typeid(action).name(); }
   T* object;
   void (T::*action)(void);
}; 
```

[http://liveworkspace.org/code/d79e33d4597ee209645026b2100330f3](http://liveworkspace.org/code/d79e33d4597ee209645026b2100330f3)

**编辑。**

对不起。这不是问题的解决方案，因为`typeid(&S::action).name()`可能等于`typeid(&S::other_action).name()`.

此外，您可以对向量中的所有对象使用`dynamic_cast`或不使用。`static_cast`

```
class BarBase 
{
public:
   virtual ~BarBase() { }
   virtual void* getObject() const { return 0; }
};

template<typename T>
class Bar : public BarBase
{
public:
   Bar(T* obj, void (T::*func) (void)):object(obj), action(func)
   {
   }
   virtual void* getObject() const { return object; }
   T* object;
   void (T::*action)(void);
};

for (auto pos = objects.begin(); pos != objects.end(); ++pos)
{
      if ((*pos)->getObject() == &p)
      {
         auto bar = static_cast<Bar<S>*>(*pos);
         if (bar->action == act)
         {
            // right object founded.
         }
      }
   } 
```

[http://liveworkspace.org/code/87473a94411997914906c22ef0c31ace](http://liveworkspace.org/code/87473a94411997914906c22ef0c31ace)

# java - 从 JAVA Web 应用程序打印 - Applet 或 Java Web Start

> ID：12178284
> 
> 赞同：3
> 
> 时间：2012-08-29T12:44:31.173
> 
> 标签：java, web-applications, printing, applet, java-web-start

现在我正在为 Seam 2 中的一家公司开发销售点应用程序，我的客户希望直接从应用程序打印发票。目前，我只生成发票的 PDF，用户选择打印机并按下打印按钮，但他们希望更快地做到这一点，他们也有 2 台打印机：用于门票的 EPSON TM U220 和用于发票的普通打印机. 所以，我想调查一下直接从网页打印。

我听说过最准确的替代方案：Java Web Start 和 Applets，但我不知道哪个是最好的。我读到，对于小程序，您必须处理身份验证内容或权限（好吧，也许 JWS 也有，但要少一点），并且小程序已停产；另一方面，使用 Java Web Start，我基本上可以开发一个简单的应用程序，在打印机中打印一些东西，但我不知道这是否可以通过 JWS 实现。

我不知道 JWS 是否可行的一件事是，如果我可以从 Web 应用程序（一个 bean，因为我使用 Seam 2）传递数据，例如，传递打印流或PDF，到 JWS 应用程序，并传递打印机的名称，我的意思是，我只想在 JWS 应用程序/Applet 中有打印发票或票证的逻辑，我想从我的 Web 应用程序生成 PDF 或流，所以我不知道这是否可能。

您认为最好的选择是什么？JWS 还是小程序？关于印刷图书馆，我阅读了有关 JAVA POS 的信息，但我可以使用任何图书馆，即使有必要也可以使用付费图书馆。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T23:51:14.250

> 您认为最好的选择是什么？

对于“最少点击”，请使用完全受信任的小程序或 JWS 应用程序。使用由 CA（例如 Verisign）颁发的数字证书进行签名。

系统将提示用户一次接受代码，并可以选择始终记住“始终信任”决定的复选框。

无论是 JWS 应用程序。或者小程序然后可以使用[Java AWT 打印](http://docs.oracle.com/javase/7/docs/api/java/awt/print/package-summary.html)API。

至于嵌入式小程序或自由浮动 JWS 之间的选择。使用最适合用例的方法，但请注意小程序需要更高的维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:00:45.623

您是否没有考虑将纯 html/jsp 中的 JavaScript 作为选项？[在这里](http://www.javascriptkit.com/howto/newtech2.shtml)阅读更多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:22:07.277

基本上，JWS 允许用户使用 Web 浏览器直接从本地计算机使用 Java 平台启动应用程序。该技术的一些主要优势包括全球分布式应用程序的无缝版本更新和对 Java 虚拟机内存分配的更大控制。换句话说，您将 Jar 文件放在 1 处，因此很容易对其进行更新。

您只需创建一个带有 JNLP 扩展名的特殊 XML 文件。此文件与 Java 虚拟机相关联，因此它会执行它并启动从 URL 下载的桌面应用程序（Jar 文件）。

我建议您使用它而不是小程序，因为如果您使用小程序，您将不得不处理来自浏览器的打印权限。另一方面，由于您使用的是桌面应用程序，您不再需要在地下打印的权限。但是您必须处理打印机配置，因为每台电脑可能有不同的打印机设置。我使用这项技术开发了各种应用程序，这些应用程序在没有弹出窗口的情况下打印，它只是使用默认打印机然后发送它。首先，它创建 PDF 文件，然后将其保存在本地，然后打印。

# android - 如何在手电筒灯开启的情况下设置视频参数？

> ID：12178286
> 
> 赞同：1
> 
> 时间：2012-08-29T12:44:44.730
> 
> 标签：android

我从互联网上获得了如何在 android 中打开手电筒的代码。但是该代码对我不起作用。代码如下：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_flash_light);

    PackageManager pm = getPackageManager();

    if (! pm.hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH)){
        Toast.makeText(this, "Your phone does not have flash light support.", Toast.LENGTH_LONG).show();
        finish();
    }

    camera = Camera.open(); 
    cParameters = camera.getParameters();

    cParameters.setFlashMode(Camera.Parameters.FLASH_MODE_TORCH);
camera.setParameters(cParameters);

} 
```

我正在使用 LG Optimus 3D，2.2 版本。我发现我手机的相机只有在视频模式下才会发出手电筒光（普通相机模式只提供手电筒）。我正在搜索如何将视频模式参数添加到 camera.setParameters() 中，但没有这样的参数。那么，我该怎么做呢？

我已经运行下面的代码来确认我的手机是否支持手电筒模式：

```
List<String> abc = cParameters.getSupportedFlashModes();

        for (String a : abc){
            Log.d("mode: ", a);
        } 
```

# html - 相对定位和背景

> ID：12178287
> 
> 赞同：0
> 
> 时间：2012-08-29T12:44:45.863
> 
> 标签：html, css, css-position

当相对定位一个元素时，就它的父级而言，它仍然处于没有相对声明的位置。这意味着父块不会扩展到对象已重新定位的位置。

![在此处输入图像描述](../Images/54f31fca6337ac92786bb0a21cef5a89.png)

在此示例中，大图片周围的浅蓝色/绿色背景和“Beach House”文本不会延伸到下面的栏（带有隐私和喜欢我们等）。这是因为条形图是使用相对定位的。有没有一种简单的方法可以扩展矩形以覆盖底栏？

这是[jsFiddle 的简化版本](http://jsfiddle.net/casebash/zpV3m/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:24:15.220

我假设由于您依赖 html5 标签，我可以忽略旧的 IE，所以我使用 css box-sizing 属性来简化它，代码并达到相同的效果。

[http://jsfiddle.net/zpV3m/4/](http://jsfiddle.net/zpV3m/4/)

即使您确实应该将它们更改回正常的十六进制值以获得 IE8 支持，我还是保留了 rgb 颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:34:33.240

为什么不使用组合`float: left; margin: X;`
而不是在`position: relative; top: Xpx; left: Xpx;`
此处查看示例[http://jsfiddle.net/zpV3m/7/](http://jsfiddle.net/zpV3m/7/)

# python - 在嵌套字典中生成所有可能的组合

> ID：12178291
> 
> 赞同：2
> 
> 时间：2012-08-29T12:44:47.777
> 
> 标签：python, testing, itertools

我需要测试所有可能的安装配置。配置保存在有时包含嵌套数组的字典数组中。

这是配置信息的示例（实际配置要长得多）：

```
config = {'database': 'sqlite',
          'useExisting': False,
          'userCredentials': {'authType': 'windows', 
                              'user': r'.\Testing', 
                              'password': 'testing'
                             }
         } 
```

对于`database`, 选项是`['sqlite','mysql','oracle']`, 对于`useExisting`, 选项是`[True, False]`。我可以弄清楚如何通过这些排列。

但是对于`userCredentials`，选项可能完全不同。如果`authType`是`database`，我需要额外的参数。我可以创建一个循环并创建所有有效组合的函数，但是我如何加入它们呢？还是有更好的方法来生成配置？

`userCredentials`也可能有不同的设置。例如，我有两个用户帐户，testing1 和 testing2。我需要使用两个用户帐户运行测试，最好使用所有可能的配置。当像这样嵌套时，我无法弄清楚如何递归生成所有配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:16:55.153

这是你想要的？[它构建了使用intertools.product](http://docs.python.org/library/itertools.html#itertools.product)列出的数据库、useExisting 和 authType 的所有组合。如果 authType 是“数据库”，它会使用附加参数更新 userCredentials。根据需要修改：

```
from itertools import product

def build_config(db,flag,authType,userPass):
    config = dict(database=db,useExisting=flag)
    config['userCredentials'] = {
        'authType': authType, 
        'user': userPass[0], 
        'password': userPass[1]
    }
    if authType == 'database':
        config['userCredentials'].update(
            dict(extra=1,param=2))
    return config

database = ['sqlite','mysql','oracle']
useExisting = [True, False]
authType = ['windows','database']
userPass = [('testing1','pass1'),('testing2','pass2')]

for options in product(database,useExisting,authType,userPass):
    config = build_config(*options)
    print config 
```

# python - 测试 SVN 连通性

> ID：12178293
> 
> 赞同：1
> 
> 时间：2012-08-29T12:44:54.710
> 
> 标签：python, svn, tortoisesvn

我正在尝试编写一个脚本来测试是否可以访问 SVN 存储库，如果我`svn info`在命令行中输入，我会得到与此类似的结果

```
Path: .
Working Copy Root Path: [path]
URL: [url]
Repository Root: [repo root URL]
Repository UUID: [UUID]
Revision: 2918
Node Kind: directory
Schedule: normal
Last Changed Author: cyberbemon
Last Changed Rev: 2917
Last Changed Date: 2012-08-16 14:31:30 +0100 (Thu, 16 Aug 2012) 
```

我已经删除了 URL 和所有其他细节，我想复制它，但使用 python。我的第一个想法是使用`subprocess.call('svn info')`

这不起作用，因为如果测试通过或失败，我想返回。有没有人做过类似的事情？或有任何指导方针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:00:50.997

我自己的[nxpy](http://sourceforge.net/projects/nxpy/)库中的[svn](http://nxpy.sourceforge.net/0.1.0/svn.html)包将 Subversion 可执行文件包装成一个方便的 API。有了它，您可以执行以下操作：

```
import nxpy.svn.svn

svn = nxpy.svn.svn.Svn()
svn.info() 
```

当当前目录是工作副本时，它将返回一个`nxpy.svn.svn.Info`实例，否则会引发异常。工作副本路径也可以作为参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:24:07.237

像这样的东西？
*注意这个* `flush()` *问题，这里没有使用 PIPE；在 Windows 下使用 python 2.7.1 对我有用。*

```
import os
import subprocess
import sys
import time

g_WINDOWS = os.name == 'nt'
g_LINUX =   os.name == 'posix'

def startProcess(sArgs, dTimeOut = 0.0, hOut = sys.stdout):
    """ Starts process \emph sArgs (command and paramters seperated by spaces).

        If \emph dTimeOut > 0, starts subprocess and if that does not end earlier, kills process after \emph dTimeOut (>0) seconds.
        If \emph dTimeOut = 0, waits until subprocess terminates (unlimited).
        If \emph dTimeOut < 0, starts subprocess and returns leaving it running separately.
        Redirects stdout and stderr to open file handle \emph hOut.

        If (dTimeOut <= 0) returns 0 else
        returns return code of started process.

        \empth hOut: writing and re-reading of a file needed, if printing to console AND to file wished
    """
    try   : hOut.flush() # at least under Windows partly needed to avoid mixed outputs
    except: pass

    p = subprocess.Popen(sArgs, stdin=None, stdout = hOut, stderr = hOut, preexec_fn=None, close_fds=False)
    i = 0
    if dTimeOut > 0:
        tSleep = dTimeOut / 25.0
        # timeout for subprocess given
        tStart = time.clock()
        while 1:
            # poll subprocess
            retVal_p = p.poll()
            if retVal_p != None: # terminated?
                # ----------------------
                p.communicate() # if PIPE: get output when done, no interface to get it chunk-wise
                # ----------------------
                break
            # check timout
            if (time.clock() - tStart) > dTimeOut:
                if g_WINDOWS: killCmd = "taskkill.exe /PID %d /F" % p.pid
                elif g_LINUX: killCmd = "kill -KILL %d"           % p.pid
                pKill = subprocess.Popen(killCmd, stdout = hOut, stderr = hOut)
                while 1:
                    retVal_pKill = pKill.poll()
                    time.sleep(1)
                    if retVal_pKill != None:
                        break
                break
            time.sleep(tSleep)
    elif dTimeOut < 0:
        # let subprocess run alone
        return 0
    else:
        # wait until subprocess terminates (no timeout)
        p.communicate()

    try   : hOut.flush() # at least under Windows partly needed to avoid mixed outputs
    except: pass

    return p.returncode

if __name__ == "__main__":
    #-----------------------------------
    ## just console
    print 'startProcess("echo foo "):', startProcess("echo foo ") # stdout, ret 0
    print 'startProcess("rmdir BBB"):', startProcess("rmdir BBB") # stderr, ret 1
    print
    sys.stdout.flush() # at least under Windows partly needed to avoid mixed outputs

    #-----------------------------------
    # same with logging to file
    fnLog = "my_test.log"
    f = file(fnLog, "w")
    f.write("v"*80 + " before\n")
    print 'startProcess("rmdir BBB", hOut=f):', startProcess("rmdir BBB", hOut=f) # stdout, ret 0
    print 'startProcess("echo foo ", hOut=f):', startProcess("echo foo ", hOut=f) # stderr, ret 1
    sys.stdout.flush() # at least under Windows partly needed to avoid mixed outputs

    f.write("^"*80 + " after\n")
    f.close()

    f = open(fnLog, "r")
    s_log = f.read()
    f.close();
    print "%s:" % (fnLog)
    print s_log

    #-----------------------------------
    #clean up
    os.unlink(fnLog) 
```

# java - JScrollBar 不应触发事件来实现 Videobar

> ID：12178296
> 
> 赞同：1
> 
> 时间：2012-08-29T12:45:05.760
> 
> 标签：java, swing, events, listener, jscrollbar

我尝试实现一个视频栏。这意味着我有一个视频，并且在视频运行期间，JScrollbar 的旋钮应该根据活动的视频帧移动。我还想使用这个栏作为用户输入来移动到视频中的某个帧。

到目前为止，有一个线程轮询活动图像和活动帧号。显示图像并将 JScrollbar 设置为表示帧的位置。这工作正常。（顺便说一句，我知道轮询不好，但由于内部愚蠢的库，我必须这样做。）

现在我为用户交互添加了 AdjustmentListener。每次用户拖动 JScrollBar 的旋钮时，我都会重置视频的位置。它也有效。但问题是每当用户拖动旋钮时都会调用 AdjustmentListener，而且当 VideoImagePollingThread 设置旋钮时也会调用。所以我的电话太多了。

我无法区分用户事件和 VideoImagePollingThread 事件。

我尝试构建自己的 JScrollBar 子类并覆盖

```
void fireAdjustmentValueChanged(int id, int type, int value). 
```

所以我不会在视频线程中引发事件。但这不起作用，因为还有另一种方法

```
void fireAdjustmentValueChanged(int id, int type, int value, boolean isAdjusting), 
```

这是私有的，所以我不能覆盖它。

我认为这是一个普遍的问题，所以必须有一个理想的解决方案。

有什么建议么？提前致谢。

# javascript - 解析以下对象的最佳方法

> ID：12178301
> 
> 赞同：0
> 
> 时间：2012-08-29T12:45:10.907
> 
> 标签：javascript, jquery, underscore.js

我需要解析以下对象。

我实现的代码 (2) 部分工作。请参阅（1）中的评论，如果您能给我一些提示如何修复代码（2），我将不胜感激。

我的目标是在根对象中有 errors 键时调用 parser_2。
我正在使用 jquery 和下划线。

* * *

(1)

```
parser({
    "errors": ["errro1"], // it should be passed to parser_2
                          // with the code I implemented it works
    "children": {
        "points": {
            "errors": ["This value should not be blank.", "error2"]
        },
        "message": [], // it should be passed to parser
                       // with the code I implemented it does not work
                       // because it calls parser_2 instead of parser or nothing!
        "recipient_id": {
            "errors": ["This value should not be blank."]
        }
    }
}); 
```

* * *

(2)

```
parser = function (object) {
    _.each(object, function (object, name) {
        if (object.errors) {
            var inputElement = element.find('[name="' + name + '"]');
            //other code
        } else if ($.isArray(object)) {
            parser_2(object);
        } else if ($.isPlainObject(object)) {
            parser(object);
        }
    });
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:55:15.650

您可以通过检查当前调用是第一次调用还是递归调用来区分根对象和嵌套对象：

```
parser = function (object, firstCall) {
    _.each(object, function (object, name) {
        if (firstCall && $.isArray(object)) {
            parser_2(object);
        } else if (object.errors) {
            var inputElement = element.find('[name="' + name + '"]');
            //other code
        } else if ($.isPlainObject(object)) {
            parser(object);  // don't pass `true` here
        }
    });
}; 
```

然后你用`parser(..., true)`.

顺便说一句，同时命名输入对象和嵌套对象`object`是令人困惑的。

# mysql - MySQL获取有记录但缺少特定记录的日期

> ID：12178304
> 
> 赞同：0
> 
> 时间：2012-08-29T12:45:19.313
> 
> 标签：mysql

希望标题不要太模糊，但我会解释一下。我对高级查询很陌生，所以不幸的是，这不是一个“我正在尝试这个”，而是一个“我将如何去做这个”类型的问题。

我有一个用户活动表。当他们在网站上做某事时，它会被输入到这个数据库中。不幸的是，跟踪登录的方式发生了变化。所以现在我需要查找每个用户 id 的所有记录，检查每条记录的日期，看看是否有该日期具有特定 id 的记录。

我意识到这听起来令人困惑，所以我将把它分解成我能做到的最好的编程逻辑

1.  按日期获取 user_id order 的记录列表
2.  对于每个日期，检查 id 5 是否存在
3.  如果 id 5 不存在，请告诉我

基本上，我将根据该日期将该 id 插入到该 id 不存在的表中。

任何帮助将不胜感激。提前致谢。

编辑** 我忘了在这里添加一个基本结构。

```
id      | user_id      | item_id     | stamp
------------------------------------------------------
1       | user1        | 1           | 2012-08-25
2       | user1        | 2           | 2012-08-25
3       | user1        | 3           | 2012-08-25
4       | user1        | 4           | 2012-08-25
5       | user1        | 6           | 2012-08-25
6       | user1        | 7           | 2012-08-25
7       | user1        | 5           | 2012-08-26
8       | user1        | 11          | 2012-08-26
9       | user1        | 13          | 2012-08-26 
```

这就是基本结构。User1 缺少 id 5，`2012-08-25`所以我需要在该日期添加它。user1 没有丢失 id 5，`2012-08-26`所以我根本不需要插入任何东西。这能澄清什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:38:57.743

```
SELECT   user_id, stamp
FROM     my_table
GROUP BY user_id, stamp
HAVING   NOT SUM(item_id=5) 
```

这是一个包含示例数据的有效 SQLFiddle 示例：[http ://sqlfiddle.com/#!2/1ccf5/5](http://sqlfiddle.com/#!2/1ccf5/5)

# c++ - 如何连续运行 C++ 应用程序？

> ID：12178309
> 
> 赞同：-2
> 
> 时间：2012-08-29T12:45:34.437
> 
> 标签：c++, windows

我想至少 24 小时连续运行我的 exe。如何完成这项任务，有人可以指导我。我的示例代码是这样的。这个 Run_Continously() 函数必须在循环中连续执行。

我之前的尝试是这样的： 第一次尝试：

```
int Cmfc2Dlg::Run_Continously()
{
//Task 1: code to Take ScreenShot(img.tiff format)
//Task 2: code to Read the image file using OCR
//Task 3: Based on data read from the image, other operations are there.

return 1;
}

void Cmfc2Dlg::OnBnClickedButtonOK()
{
   while(Run_Continously());
} 
```

这连续运行。但问题是CPU使用率。在某些小时后，例如：运行 2 小时后，应用程序消耗 250,453 内存使用量，最后应用程序不会截取任何屏幕截图。在这里我猜内存泄漏是这样发生的..

第二次尝试：为了减少 CPU 使用率，我正在使用线程概念，我的代码如下所示：

```
//Header.h
class Cmfc2Dlg
{
 public:
    static DWORD WINAPI Run_Continously(LPVOID lpParam);
};

//source.cpp
DWORD WINAPI Cmfc2Dlg::Run_Continously(LPVOID lpParam)
{
 //Task 1: code to Take ScreenShot(img.tiff format)
//Task 2: code to Read the image file using OCR
//Task 3: Based on data read from the image, other operations are there.

return 0;
}

void Cmfc2Dlg::OnBnClickedButtonOK()
{
 Handle_Of_Thread_1 = CreateThread( NULL, 0,Run_Continously, &Data_Of_Thread_1, 0, NULL);  
    if ( Handle_Of_Thread_1 == NULL)
        ExitProcess(Data_Of_Thread_1);

    WaitForSingleObject(Handle_Of_Thread_1,INFINITE);

    CloseHandle(Handle_Of_Thread_1);

             Sleep(1000);  //This is mainly for so that CPU can can release some                  
              threads & everytime CPU is not busy.
 } 
```

此代码可以连续运行 7 到 8 小时，内存使用量为 1.5k。8小时后，代码再次不会截图。这里的内存使用量是不变的，我不明白为什么它不工作..??

我的第三次尝试：

```
void Cmfc2Dlg::Run_Continously()
{
//Task 1: code to Take ScreenShot(img.tiff format)
//Task 2: code to Read the image file using OCR
//Task 3: Based on data read from the image, other operations are there.

}

void Cmfc2Dlg::OnBnClickedButtonOK()
{
   while(1)
   {
      Run_Continously()

      Sleep(1000); //This is mainly for so that CPU can can release some                  
              threads & everytime CPU is not busy.
    }

} 
```

这也与第二次尝试相同。此代码最多可以运行 6 到 8 小时，内存使用量为 1.5k。之后就没有截图了。

但我知道的一件事是，有些 exe 可以连续运行多年。那为什么我不能那样做？？

如果有人知道这一点..请建议我..任何帮助/指导都将被接受..谢谢。

我的屏幕截图代码如下所示：

```
 DWORD WINAPI Cmfc2Dlg::ScreenShot()
    {
    CImage image;
CWnd *   pWnd;
CRect  rect;
BOOL   bStat;

HDC ScreenDC = ::GetDC(NULL);
HDC hDC = CreateCompatibleDC(ScreenDC);
HBITMAP hBitmap = CreateCompatibleBitmap(ScreenDC, 100, 100);
HBITMAP hOldBitmap = (HBITMAP)SelectObject(hDC, hBitmap);

//(H,W)500,500
//(x,y)78,242

bStat  =  image.Create(110, 64, 24);
ASSERT(bStat);
if ( ! bStat)
return  FALSE;

CImageDC imageDC(image);

::BitBlt(imageDC,  0 ,  0, 110, 64, ScreenDC,  25 ,  208, SRCCOPY);

CString strFull  =  "E:\\Thread\\Test.tiff";
HRESULT hr  =  image.Save(strFull, ImageFormatTIFF);

SelectObject(hDC, hOldBitmap);
DeleteDC(hDC);
::ReleaseDC(NULL, ScreenDC);

if (FAILED(hr))
{
TRACE( " Couldn't Save File: %s, %x " , (LPCTSTR)strFull, hr);
return  FALSE;
}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:08:54.653

因此，您希望 24 小时连续运行您的应用程序。你打算在此期间做点什么吗？如果您处于中间操作中，您将如何优雅地退出？

假设您的应用程序并非毫无价值，并且您在这 24 小时内确实有工作要做，那么您有很多选择：

1.  `CreateWaitableTimer`，另一个计时器，这次它使用一个可等待的对象句柄来表示完成。如果您已经在使用可等待对象，这将直接进入您的设计。
2.  使用 Windows 消息，使用更轻量级的功能`SetTimer`，但精度略低。如果您使用 Windows 消息，这可能是一个不错的选择。
3.  使用`timeSetEvent`which 将在特定时间过去后异步向您的应用程序发出信号。您可以将此用作“是时候退出”警报了。使用它与您的主要工作人员完全分开发出信号。
4.  只是偶尔检查一下系统时间。我**不**推荐这样做，因为系统时钟更改、夏令时、自动时间调整。您可以使用`GetTickCount`或类似方法解决此问题，但很可能这不如其他选项。但是，它确实可以让您即时调整逻辑（例如，`if(x) { shorten the time we should run by 5 minutes }`.

在这三种方法之间，您拥有需要在 24 小时结束时收到信号的一切。只要您的工作人员不这样做，这些方法都不会消耗 CPU。它们都是操作系统发送的事件。

至于内存使用......你有一个简单的内存泄漏。以通常的方式修复它。找出泄漏的位置并修补它。在不了解您的项目的情况下，我只能这么说。如果您`new`在代码中的任何位置使用，请考虑切换到智能指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:51:39.553

**您发布的代码中缺少太多代码来说明问题所在。**

如果您无法修复它，只需使用按钮/GUI / 保持一个简单的循环，当时机成熟时，会产生一个执行操作 1)、2) 和 3) 的新进程，然后终止。如果您不需要花哨的 GUI，您甚至可以编写一个批处理文件，在生成进程之前等待击键。

这样，操作系统将代替您处理释放资源。

# javascript - 共享点站点的 Internet Explorer 中的 Javascript 错误

> ID：12178310
> 
> 赞同：1
> 
> 时间：2012-08-29T12:45:41.363
> 
> 标签：javascript, sharepoint-2010

我有一个 sharepoint 2010 博客站点。当我尝试使用 Internet Explorer 8 在博客上创建帖子时，我在左下角收到如下 javascript 错误。但如果我将网站恢复到 2007 年的外观和感觉，我就可以创建帖子。但是在将视觉升级到 2010 之后，我们无法创建帖子。

错误：“null”为空或不是对象。

任何帮助表示赞赏。提前致谢。

西瓦库玛 P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:58:09.517

可能，您在某处有一个名为“null”的 Javascript 对象。尝试查找并重命名它。

# windows - 使用 DIGEST-MD5 身份验证通过 LDAP 连接到 Active Directory 时出错

> ID：12178322
> 
> 赞同：4
> 
> 时间：2012-08-29T12:46:02.357
> 
> 标签：windows, ldap, sasl

我在使用 SASL DIGEST-MD5 身份验证机制通过 LDAP 连接到 Active Directory (Windows Server 2008 R2) 时遇到问题。我得到下一个错误：

身份验证失败 - [LDAP：错误代码 49 - 8009030C：LdapErr：DSID-0C0904DC，注释：AcceptSecurityContext 错误，数据 52e，v1db1]

不同的客户端报告相同的错误。具有相同凭据的纯文本身份验证工作正常。

我知道 49 错误意味着“无效凭据”，但为什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:04:09.710

检查完全限定的专有名称是否正确。某些服务器会报告`invalid credentials`在目录中找不到可分辨名称的情况。这不是一件坏事，而是一件好事，因为这并不向攻击者表明正在尝试的专有名称不存在。

# c# - 在 C# 中的 WindowsForm 中的 PictureBox 中显示 System.Windows.Media.Imaging.BitmapSource

> ID：12178326
> 
> 赞同：4
> 
> 时间：2012-08-29T12:46:10.813
> 
> 标签：c#, .net, wpf, winforms, picturebox

我想在图片框中绘制一个 System.Windows.Media.Imaging.BitmapSource。在 WPF 应用程序中，我这样做：

```
image1.Source =BitmapSource.Create(....................); 
```

但现在我有一个表格。我在我的表单中导入 PresentationCore.dll 以获得 BitmapSource；但是现在我如何在这样的 PictureBox 上绘制或显示它？：

```
pictureBox1.Image=BitmapSource.Create(.....................); 
```

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:49:09.487

为什么你想要/需要使用 wpf 特定的东西？

看看这个片段 [如何将 BitmapSource 转换为 Bitmap](http://snipplr.com/view/63090/)

```
Bitmap BitmapFromSource(BitmapSource bitmapsource)
{
    Bitmap bitmap;
    using (MemoryStream outStream = new MemoryStream())
    {
        BitmapEncoder enc = new BmpBitmapEncoder();
        enc.Frames.Add(BitmapFrame.Create(bitmapsource));
        enc.Save(outStream);
        bitmap = new Bitmap(outStream);
    }
    return bitmap;
} 
```

用法：

```
pictureBox1.Image = BitmapFromSource(yourBitmapSource); 
```

如果要打开图像文件...：

```
pictureBox1.Image = System.Drawing.Image.FromFile("C:\\image.jpg"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:52:01.533

你可以吗？

```
ImageSource imgSourceFromBitmap = Imaging.CreateBitmapSourceFromHBitmap(bitmap.GetHbitmap(), IntPtr.Zero, Int32Rect.Empty, BitmapSizeOptions.FromEmptyOptions()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-12T11:49:56.483

此方法具有更好的性能（快两倍）并且需要更少的内存，因为它不会将数据复制到`MemoryStream`：

```
Bitmap GetBitmapFromSource(BitmapSource source) //, bool alphaTransparency
{
    //convert image pixel format:
    var bs32 = new FormatConvertedBitmap(); //inherits from BitmapSource
    bs32.BeginInit();
    bs32.Source = source;
    bs32.DestinationFormat = System.Windows.Media.PixelFormats.Bgra32;
    bs32.EndInit();
    //source = bs32;

    //now convert it to Bitmap:
    Bitmap bmp = new Bitmap(bs32.PixelWidth, bs32.PixelHeight, PixelFormat.Format32bppArgb);
    BitmapData data = bmp.LockBits(new Rectangle(Point.Empty, bmp.Size), ImageLockMode.WriteOnly, bmp.PixelFormat);
    bs32.CopyPixels(System.Windows.Int32Rect.Empty, data.Scan0, data.Height * data.Stride, data.Stride);
    bmp.UnlockBits(data);
    return bmp;
} 
```

# typo3 - TYPO3 condition with session

> ID：12178330
> 
> 赞同：1
> 
> 时间：2012-08-29T12:46:27.753
> 
> 标签：typo3, typoscript

I have this TypoSript:

Contance:

```
finish_day_value = TSFE:fe_user|sesData|finish_day 
```

Setup:

```
plugin.Tx_Formhandler.settings.predef.formhandler-multistep-forms {
    if {
        1 {
            conditions.OR1 {
          AND1 = {$finish_day_value} > 7
          AND2 = {$finish_day_value} < 15
        }
         isTrue {
            markers.input_readonly_a_price = CONTENT
            markers.input_readonly_a_price {
              table = tx_pricelist_prices_full
              select {
                pidInList = {$get_carpid}
                orderBy = uid
                selectFields = uid, group_a_8_14
                # possible conditions
                 where = ( tx_pricelist_prices_full.uid='1' AND hidden='0' AND deleted='0')

              } 
              renderObj = COA
              renderObj {
                #value  
                1 = TEXT
                1.insertData = 1 
                1.data = field:group_a_8_14
                2 = TEXT
                2.value = *
                3 = TEXT
                3.insertData = 1 
                3.data = TSFE:fe_user|sesData|finish_day          
                stdWrap.prioriCalc = 1   
              }
        }
       }
      }
    }
  } 
```

The finish_day value is sending by the session from one form to another (that's why I use `TSFE:fe_user|sesData|finish_day`). But when I insert it to Setup (for example):

```
AND1 = TSFE:fe_user|sesData|finish_day > 7 
AND2 = TSFE:fe_user|sesData|finish_day < 15 
```

Nothings happens. So I try to define Constance value, but still nothing.

How to call the session value (finish_day) and use it on `AND` conditions?

Thanks for any help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:29:10.783

我使用了 GlobalVar 条件：

```
[globalVar = TSFE:fe_user|sesData|finish_day > 0] && [globalVar = TSFE:fe_user|sesData|finish_day < 4 ]
...
ts
...
[global] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:50:29.377

What you want to do is very specific. It depends on the extension you use.

If for AND1 is stdWrap implemented, you can use:

```
AND1.data = TSFE:fe_user|sesData|finish_day
AND1.intval = 1
AND1.noTrimWrap = | | > 7| 
```

data: imports the data of the session intval: we expect an integer, no chance for sql-injection here noTrimWrap: i do not know, if you need the extra spaces.

# jquery - jquery 用于 if 语句的行为类似于 CSS 媒体查询

> ID：12178332
> 
> 赞同：0
> 
> 时间：2012-08-29T12:46:30.910
> 
> 标签：jquery, if-statement, media-queries, browser-width

我有这个很好用的 jquery 代码：

```
$(document).scroll(function(){
    if ($(this).scrollTop()>175){
        // animate fixed div to small size:
        $('header').stop().animate({ height: 90 },100);
    } else {
        //  animate fixed div to original size
        $('header').stop().animate({ height: 175 },100);
    }
}); 
```

我需要所有浏览器/设备始终显示和阅读上述内容，但我还需要调整较小标题的高度（当前为 90 像素 - 在行下方 // 将固定 div 动画为小尺寸:) 仅适用于浏览器宽度介于 641 像素和 959 像素之间。对于那些浏览器宽度，我需要标题的高度为 120px，否则使用上面的代码。

有点像媒体查询，我希望它在调整浏览器大小时自行更新。

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T12:50:58.423

```
$(window).width(); 
```

就是你要找的。和，

```
$(window).on("resize",function(){  
   if($(window).width()>641 && $(window).width()<959){
          // do the animations
   }    
} 
```

是它的主要思想。

# soapui - SoapUI with HTTP

> ID：12178334
> 
> 赞同：0
> 
> 时间：2012-08-29T12:46:41.807
> 
> 标签：soapui

I am about to test a web service using SoapUI.I do not have WSDL(Web Service Description Language) of the Web service.I need to test it through HTTP service.How and To which extent can I test? (I've been through SoapUI.org, but unable to find answer). I appreciate your time.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T11:28:05.710

我们可以在没有 WSDL 文件的情况下使用 SoapUI 测试 Web 服务。我们需要 URL (ServiceEndPoint) 和服务的 XML 块...您需要为此创建 HTTP 测试请求，然后输入 ServiceEndPoint URL，然后在 HTTP 测试请求步骤的 XML 块中提供所需的数据并运行测试。

请试试这个......

# java - 在接口中提取 jUnit 测试方法

> ID：12178337
> 
> 赞同：2
> 
> 时间：2012-08-29T12:47:03.780
> 
> 标签：java, junit4

是否可以在带有注释 @Test 的接口中声明方法并在具体类中使用它们。我的问题是，实现接口的类有注解@Override 而不是@Test。有解决方案还是我必须使用父类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:07:37.213

使用`abstract class`而不是`interface`. 您可以使用注释**1)**
标记方法`absctract class``@Test`

 **```
public interface ITest {
   @Test
   public void simpleTest();
} 

public class SimpleTest implements ITest
{
   @Override
   public void simpleTest()
   {
      Assert.assertTrue(true);
   }
} 
```

我们得到

```
Tests in error: 
  initializationError(com.company.tester.SimpleTest) 
```

**2)**

```
public interface ITest {

   public void simpleTest();
}  

public class SimpleTest implements ITest
{

   @Test
   @Override
   public void simpleTest()
   {
      Assert.assertTrue(true);
   }
} 
```

一切正常，测试通过！

```
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0 
```

**3)**抽象类

```
public abstract class ATest {

   @Test
   public abstract void simpleTest();
} 

public class SimpleTest extends ATest
{
   @Override
   public void simpleTest()
   {
      Assert.assertTrue(true);
   }
}  

public class SecondTest extends ATest
{
   @Override
   public void simpleTest()
   {
      Assert.assertFalse(false);
   }
} 
```

测试顺利通过！

```
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0 
```**

# ipad - iPad在加载页面时显示奇怪的字符

> ID：12178338
> 
> 赞同：2
> 
> 时间：2012-08-29T12:47:09.613
> 
> 标签：ipad, safari, mobile-safari

最近，当我打开一个网站时，我的 iPad 开始显示这些随机字符。见附图。但是当我刷新页面时，页面会在 safari 上正确加载。![iPad 上的图像错误](../Images/1455dc46aea3c0a91165273e631f80a1.png)

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:58:34.283

这可能是由于在页面完全加载之前加载流中断造成的！因此，请尝试以下可能帮助您解决此问题的步骤：`Setting > Safari`然后转到*清除 Cookies* & *Clear Cache*

# svn - SVN错误：（成功（2 2（）（编辑管道svndiff1缺席条目提交-revprops深度日志-revprops原子-revprops部分重播）））？

> ID：12178345
> 
> 赞同：3
> 
> 时间：2012-08-29T12:47:28.550
> 
> 标签：svn, browser, redmine, bitnami

无法通过浏览器访问 Bitnami Redmine Subversion（出现一条消息）。

Bitnami Redmine 完美安装并运行：版本 BitNami Redmine Stack 1.3.0-1

在 Windows Server 2008 R2 Foundation 上运行。

目的是访问 Subversion，因为 Manager 工具说 Subversion 正在运行。不确定如果它正在运行，我是否需要对其进行配置？我试图在服务器上访问它并远程访问它。我们还使用 Visual SVN 并且备份了该数据，我们希望将这些备份的数据恢复到 Redmine 自己的 subversion 中。我认为这可能吗？

在地址上的任何浏览器上，我输入： localhost:3690 并在浏览器中收到此消息：

（成功（2 2（）（编辑管道 svndiff1 缺席条目提交-revprops 深度日志-revprops atomic-revprops 部分重播）））

这是什么意思？？我需要做什么？

任何帮助深表感谢！非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T13:31:02.250

> （成功（2 2（）（编辑管道 svndiff1 缺席条目提交-revprops 深度日志-revprops atomic-revprops 部分重播）））

`svnserve`是客户端-服务器握手期间发送的第一个响应。而 3690 是 svn:// 协议的默认端口号。

因此，您使用的是 svn:// 协议，而不是 http(s)://。

您的 SVN 服务器实际上正在运行，因为您收到了消息。您也可以尝试运行`svn info svn://localhost`，或者`svn info svn://localhost/$REPO_NAME`它应该在 Subversion 存储库上打印信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T10:13:09.423

我们已经在[http://answers.bitnami.org/questions/6886/cant-access-bitnami-redmine-subversion-via-browser-a-message-appeared](http://answers.bitnami.org/questions/6886/cant-access-bitnami-redmine-subversion-via-browser-a-message-appeared)中回复了您的问题的答案：

您必须检查启动 apache 错误和 apache2/log/error_log 文件以确定问题。

# windows-phone-7 - 如何在 WebBrowser 中获取 http 标头？

> ID：12178348
> 
> 赞同：1
> 
> 时间：2012-08-29T12:47:40.790
> 
> 标签：windows-phone-7

我编写了一个名为[“Cute Browser”](http://www.windowsphone.com/en-US/apps/1ca4292a-36a1-4e1b-98ff-d1899003fee0)的 WP7 网络浏览器应用程序。

`content-type`有一个问题是，当导航到“应用程序/流”等未知页面时，`WebBrowser`总是`navigating`.

经过多次实验，我找到了一种`always navigating`使用调用脚本来检测状态的方法：

```
var readyStateChange = function(){ 
    if(document.readyState == 'interactive') { 
        document.detachEvent('onreadystatechange', readyStateChange);
        window.external.Notify('MaybeWml');
    } 
} 
if(document.readyState != 'complete'){
    document.attachEvent('onreadystatechange', readyStateChange); 
} 
```

我想知道是否有可能在不启动另一个的情况下`Http Headers`使用？`WebBrowser``HttpRequest`

# ruby-on-rails - 在 Rails 中使用 mailman gem 接收来自多个帐户的电子邮件

> ID：12178349
> 
> 赞同：2
> 
> 时间：2012-08-29T12:47:42.943
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, pop3, mailman-gem

有没有办法从 mailman gem 中的多个帐户接收电子邮件？这是我的 mailman_server.rb 处理来自单个帐户的邮件

```
require "rubygems"
require "mailman"

Mailman.config.pop3 = {
   server: 'pop.gmail.com', port: 995, ssl: true,
   username: "email@gmail.com",
   password: "password"
}

Mailman::Application.run do
default do
  puts message.subject
end
end 
```

我想接收来自 email1@gmail.com 和 email2@gmail.com 的邮件，然后我可以处理这些邮件。有没有办法可以在一个邮递员进程中打开多个帐户？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:28:23.803

1.  创建第三个电子邮件帐户
2.  设置从（email1@gmail.com 和 email2@gmail.com）到该帐户的电子邮件转发
3.  设置邮递员）

# android - Android - 一些解压缩文件的大小为 0（为空）

> ID：12178352
> 
> 赞同：2
> 
> 时间：2012-08-29T12:47:49.267
> 
> 标签：android, unzip

我在 Android 中解压缩文件时遇到问题。这是代码片段：

```
 public void unzip() { 
try  { 

  FileInputStream fin = new FileInputStream(_zipFile); 
  BufferedInputStream in = new BufferedInputStream(fin);
  ZipInputStream zin = new ZipInputStream(in); 

  ZipEntry ze = null; 
  while ((ze = zin.getNextEntry()) != null) { 
    Log.v("Decompress", "Unzipping " + ze.getName()); 

    if(ze.isDirectory()) { 
      _dirChecker(ze.getName()); 
    } else { 
      FileOutputStream fout = new FileOutputStream(_location + ze.getName()); 
      BufferedOutputStream out = new BufferedOutputStream(fout);

      byte[] buffer = new byte[1024];
      int length;

      while ((length = zin.read(buffer,0,1024)) >= 0) {
          out.write(buffer,0,length);
        }

      /* while ((length = zin.read(buffer))>0) {
          out.write(buffer, 0, length);
          }*/
       /*for (int c = zin.read(); c != -1; c = zin.read()) { 
        fout.write(c); 
       }*/

       zin.closeEntry(); 
       fout.close(); 
     } 

   } 
   zin.close(); 
 } catch(Exception e) { 
   Log.e("Decompress", "unzip", e); 
 } 
} 
```

较小的文件（小于 10kB）像空文件一样解压缩 - 大小为 0（html 文件，.jpg）。其他文件没问题。如果我使用相同的代码，但没有缓冲区，所有文件都可以 - 当然，没有缓冲区的解压缩是不可能的，因为它运行时间太长。文件存储在真实设备上的 SD 卡上。我已经尝试过设置更小的缓冲区大小（甚至是新字节 [2]）。提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:29:19.100

试试这个代码，

```
 public void doUnzip(String inputZipFile, String destinationDirectory)
        throws IOException {
    int BUFFER = 2048;
    List zipFiles = new ArrayList();
    File sourceZipFile = new File(inputZip);
    File unzipDestinationDirectory = new File(destinationDirectory);
    unzipDestinationDirectory.mkdir();

    ZipFile zipFile;
    // Open Zip file for reading
    zipFile = new ZipFile(sourceZipFile, ZipFile.OPEN_READ);

    // Create an enumeration of the entries in the zip file
    Enumeration zipFileEntries = zipFile.entries();

    // Process each entry
    while (zipFileEntries.hasMoreElements()) {
        // grab a zip file entry
        ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();

        String currentEntry = entry.getName();

        File destFile = new File(unzipDestinationDirectory, currentEntry);
//          destFile = new File(unzipDestinationDirectory, destFile.getName());

        if (currentEntry.endsWith(".zip")) {
            zipFiles.add(destFile.getAbsolutePath());
        }

        // grab file's parent directory structure
        File destinationParent = destFile.getParentFile();

        // create the parent directory structure if needed
        destinationParent.mkdirs();

        try {
            // extract file if not a directory
            if (!entry.isDirectory()) {
                BufferedInputStream is =
                        new BufferedInputStream(zipFile.getInputStream(entry));
                int currentByte;
                // establish buffer for writing file
                byte data[] = new byte[BUFFER];

                // write the current file to disk
                FileOutputStream fos = new FileOutputStream(destFile);
                BufferedOutputStream dest =
                        new BufferedOutputStream(fos, BUFFER);

                // read and write until last byte is encountered
                while ((currentByte = is.read(data, 0, BUFFER)) != -1) {
                    dest.write(data, 0, currentByte);
                }
                dest.flush();
                dest.close();
                is.close();
            }
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
    }
    zipFile.close();

    for (Iterator iter = zipFiles.iterator(); iter.hasNext();) {
        String zipName = (String)iter.next();
        doUnzip(
            zipName,
            destinationDirectory +
                File.separatorChar +
                zipName.substring(0,zipName.lastIndexOf(".zip"))
        );
    }

} 
```

# c# - 让 linq 知道唯一 ID

> ID：12178353
> 
> 赞同：1
> 
> 时间：2012-08-29T12:47:51.630
> 
> 标签：c#, linq

我有一个小问题。我如何让 linq 知道某些列是唯一的

外汇。我有一个表，列“ID”和“名称”

ID 是自动递增的主键。名称只是 varchar(255)

像这样的 linq 的结果：

```
from item in db.ItemSet
where item.ID == 1
select item 
```

我留下了一个 IQueryable。但是只能有 1 项，“ID”==1 我如何告诉 linq 这个。

目前我这样做

```
(from item in db.ItemSet
 where item.ID == 1
 select item).First() 
```

但我会认为这是一个“黑客”......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:49:01.670

如果您只期待一个，请使用单个

```
(from item in db.ItemSet
 where item.ID == 1
 select item).Single() 
```

实际上，您可以清理更多并执行此操作；

```
db.ItemSet.Single(item.ID == 1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T12:49:06.100

您可以使用`.Single()`而不是`.First()`.

但是，它们都假定记录存在，如果没有找到记录，则会抛出异常。如果有可能查找不存在的记录，您可能需要考虑`.FirstOrDefault()`/ `.SingleOrDefault()`。

进一步阅读：

*   [代码项目文章](http://www.codeproject.com/Articles/72475/LINQ-Single-vs-First)
*   [MSDN 帖子](http://social.msdn.microsoft.com/Forums/en-US/linqprojectgeneral/thread/928a4ed4-8fc1-4677-b22a-a9f8af83b4c3)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T12:49:08.043

使用`SingleOrDefault`或`Single`

```
var result = db.ItemSet.Single(r=>r.ID == 1); 
```

[来自 MSDN 的单曲](http://msdn.microsoft.com/en-us/library/bb155325.aspx)

> 返回序列的唯一元素，如果序列中不完全有一个元素，则抛出异常。

由于主键不能重复，因此您可以使用`Single`，因为如果结果集中存在多个值，则会引发异常。

如果您只想要一个或结果，您可以使用[SingleOrDefault 。](http://msdn.microsoft.com/en-us/library/bb342451.aspx)`one``none`

编辑：至于使 LINQ 知道主键：

```
from item in db.ItemSet
where item.ID == 1
select item 
```

您不能让 LINQ 返回单个类型的项目`ItemSet`。虽然 ID 是主键，但 LINQ 是针对一个集合进行查询，并且将返回一个集合而不是单个类型的项目`ItemSet`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T12:53:22.417

在您的类声明中，您可以使用 KeyAttribute 构造函数。请参阅：http: [//msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.keyattribute.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.keyattribute.aspx)

# asp.net - Visual Studio 2012 - ASPX 设计和拆分视图哪里去了？

> ID：12178359
> 
> 赞同：13
> 
> 时间：2012-08-29T12:48:16.557
> 
> 标签：asp.net, visual-studio-2012

刚刚在 Visual Studio 2012 中启动了一个新的 Web 表单项目。

在 2012 年打开我的 aspx 页面，没有拆分或设计视图？

我正在使用 RTM 版本。

他们真的把这个拿出来了吗？如果没有，我在哪里可以找到它们？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-29T13:01:15.283

按照这些步骤

> 转到工具-> 选择选项
> 
> 勾选此对话框底部的框：显示所有设置。
> 
> 选择 HTML 设计器 --> 启用 HTML 设计器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-14T18:55:44.797

对于使用 Visual Studio 2015 的用户：

1.  在**解决方案资源管理器**中，右键单击要打开的文件。
2.  从弹出菜单中选择**打开方式。**
3.  在**Open With**对话框中，选择**HTML (Web Forms) Editor** ，或者单击**Set as Default**按钮，然后单击**OK**按钮。

显然**HTML（Web 表单）编辑器**具有设计、拆分和源选项卡，但**HTML 编辑器**没有。**HTML 编辑器**似乎是 Razor 和纯 HTML 文件的默认编辑器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-04T14:14:51.673

对于 VS 2017/2019 转到工具 -> 设置 -> Web 表单设计器，然后单击“启用 Web 表单设计器”选项

# java - Eclipse Java 项目上的单一源文件参考

> ID：12178361
> 
> 赞同：2
> 
> 时间：2012-08-29T12:48:16.920
> 
> 标签：java, eclipse

我正在使用 Eclipse，我有两个用 Java 编写的项目（比如 A 和 B）。在项目 A 中，我想添加对项目 B 的单个源文件的引用。当我从 project-A 构建一个 jar 时，我希望该类包含在其中。有没有办法做到这一点？

我想添加对单个源文件的引用，因此以下方法对我不起作用，因为它引用了一个完整的文件夹：

```
Java Build Path -> Source -> Link Source 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-29T13:23:47.750

好吧......让我这样说......

当我们不使用`import`关键字时，我们需要编写我们试图在代码中使用的那个类的整个路径......

所以它是这样的......

```
java.util.List<String> l = new java.util.ArrayList<String>(); 
```

这意味着我们要给出**包名，然后是它的类**............

那么有**两种方法可以处理它：**

**-**添加**到`whole package`.`project path`**

 ****-**或者你可以`Copy-Paste` **把这个类**放到你的项目中。**

# php - SwiftMailer 批量电子邮件使我的服务器超时

> ID：12178364
> 
> 赞同：4
> 
> 时间：2012-08-29T12:48:36.163
> 
> 标签：php, email, batch-file, timeout, swiftmailer

我意识到 batchEmail 不再是新的 SwiftMailer 的一部分。所以我做了这个脚本：

```
<?
//
// GC PRESS EMAILER v5
//
ini_set('display_errors',1);
error_reporting(E_ALL);
require_once("config.php");
include_once("hawkmail/mail/lib/swift_required.php");
$c=mysql_connect($dbh,$dbu,$dbp);
function SendEmail(){
    // DB
    $s=mysql_query("SELECT * FROM `newgc`.`press_list`");
    // Process Color Listing Loop
    while($r=mysql_fetch_array($s)){
    // ###########################
    // START LOOP
    // ###########################
        $name=$r['name'];
        $email=$r['email'];
        $to=array(''.$email.''=>''.$name.'');
        include("hawkmail/templates/press.php");
        # Email subject
        $str=$name;
        $str=substr($str, 0, strrpos($str, ' '));
        $subject='Dear '.$str.', you are invited to our Exclusive Party Collection Press Day!';
        # send message
        include("hawkmail/settings.php");       
    }
    // ###########################
    // END LOOP
    // ###########################
}
SendEmail();
?> 
```

该数据库有 200 条记录。我运行了脚本，它发送了几封电子邮件，然后超时

> 504网关超时

和`name`记录`email`就像

约翰·史密斯 John.smith@site.com

很朴实。我`hawkmail/settings.php`的是这样的：

```
# mail
$smpturl="smtp.sendgrid.net";
$mailu="sitesitesite";
$mailp="sitessssssssssss";
$from=array("no-reply@site.com"=>"site.com");

# login credentials & setup Swift mailer parameters
$transport=Swift_SmtpTransport::newInstance($smpturl, 587);
$transport->setUsername($mailu);
$transport->setPassword($mailp);
$swift=Swift_Mailer::newInstance($transport);

# create a message (subject)
$message=new Swift_Message($subject);

# attach the body of the email
$message->setFrom($from);
$message->setBody($html, 'text/html');

$message->setTo($to);
$message->addPart($text, 'text/plain');

# actually send the message
if($recipients=$swift->send($message, $failures)){}else{} 
```

无论如何要增加 PHP 超时的限制（我使用 Ubuntu 和 Nginx）或者是否有 BatchMail() 的替代品真的不明白为什么它被删除。

**有人可以使用新的 swiftmailer 发布批处理邮件脚本的示例吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T18:34:28.380

发送电子邮件是网上最复杂的事情。

它是使用次数第二多的服务，也是滥用最多的服务。

我建立了自己的自定义电子邮件平台来发送批量电子邮件。

您遇到的超时是因为 Apache 和 PHP 执行限制。

您需要将其作为 CLI 应用程序运行`set_time_limit (0);`

`php /path/to/app/script.php`像这样直接在控制台中。

如果您没有 SSH 访问权限，请`shell_exec`像这样运行它：

```
shell_exec("php /path/to/app/script.php > /dev/null 2>/dev/null &"); 
```

这将确保调用它的脚本在完成之前不会挂起。

# android - 无法在模拟器上运行游戏（Andengine）

> ID：12178367
> 
> 赞同：2
> 
> 时间：2012-08-29T12:48:57.320
> 
> 标签：android, andengine

我正在使用andEngine 开发游戏。游戏在设备上运行，但没有在模拟器上运行。游戏退出并重定向到主屏幕。可能是什么问题？

**Logcat 中没有任何错误**。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T12:56:51.607

这是因为 AndEngine 库的 openGPL.ES2 要求设备应具有并启用 OpenGLES。

你必须：

1.  使用兼容的 AVD 管理器安装 Android SDK 版本 >=19。
2.  并在 Eclipse 中为您的 Android 虚拟设备配置**GPU 仿真 = yes**在 AVD Manager 对话框的硬件配置部分。**或者**在运行配置参数中添加：**`gpu -on`**

# ruby-on-rails - 优化 ActiveRecord 查询

> ID：12178368
> 
> 赞同：1
> 
> 时间：2012-08-29T12:48:58.647
> 
> 标签：ruby-on-rails, activerecord

我在数据库中有 2 个表：汽车和域。一辆车可以有很多域，一个域可以有很多车。

在我的项目中，三个模型：

```
class Car < ActiveRecord::Base

  has_many :cars_domains
  has_many :domains, :through => :cars_domains

...

class Domain < ActiveRecord::Base

    has_many :cars_domains
    has_many :cars, :through => :cars_domains
...

class CarsDomain < ActiveRecord::Base
  belongs_to :car
  belongs_to :domain
end 
```

我想看看没有域名的汽车：

```
@cars = Car.find(:all, :conditions => ['id not in(select car_id from cars_domains where domain_id = ?)', params[:domain_id]]) 
```

这是工作，但我认为这非常困难。也许可以做得更简单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:35:01.737

在我创建的一个快速应用程序中尝试了这个：

```
domain = Domain.find(params[:domain_id])
Car.includes(:cars_domain).where('cars_domain.domain_id <> ?', domain.id) 
```

我查询域对象的原因是因为我总是厌倦将请求标头中的值作为 SQL 中的查询参数传递。

# php - 更改脚本 src 路径的多个变量的重写规则

> ID：12178371
> 
> 赞同：1
> 
> 时间：2012-08-29T12:49:04.063
> 
> 标签：php, .htaccess

我正在为我的网站使用重写规则，但它正在更改脚本 src 路径

这是我正在使用的规则

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

RewriteEngine on
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule .* - [L]
RewriteRule ^(.*)$ /user_page.php?id=$1 [NC]

# Changing Search URL
RewriteRule ^/([^/]*)/([^/]*)/([^/]*)$ search_out.php?comp_city=$1&one=$2comp_landmark=$3 [L] 
```

# 更改搜索 URL 是导致问题的原因...页面将向您显示脚本 src 或所有链接 rel="stylesheet" type="text/css" 指向[http://www.xxxxx.com/ Rajpura/Schools/js/jquery-1.6.2.min.js](http://www.xxxxx.com/Rajpura/Schools/js/jquery-1.6.2.min.js)而不是[http://www.xxxxx.com/js/jquery-1.6.2.min.js](http://www.xxxxx.com/js/jquery-1.6.2.min.js)

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:14:41.410

您可以将基本标签添加到每个页面的头部标签中：

```
<base href="/"> 
```

这样，浏览器将在该页面中的所有链接前面加上 /。

有关基本标签的更多信息，[请参阅文档](http://www.w3schools.com/tags/tag_base.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:54:43.310

在 html 中嵌入 CSS 或图像时，请尝试以斜杠开头以从根目录获取文件：

```
<link rel="stylesheet" href="/css/style.css" /> 
```

与图像相同：

```
<img src="/images/pic.png" alt="image" />
<img src="/mypic.png" alt="image" /> 
```

或者解决方法是将其添加到您的模板中：

```
<base href="/"> 
```

这将强制浏览器将 / （在本例中）添加到所有相关资源链接。

# php - 获取关联数组时如何消除致命错误

> ID：12178373
> 
> 赞同：5
> 
> 时间：2012-08-29T12:49:06.130
> 
> 标签：php, mysqli

我在我的 php/mysqli 代码中收到一个致命错误，它在第 46 行指出：

```
Fatal error: Call to undefined method mysqli_stmt::fetch_assoc() in ... 
```

我只想知道如何删除这个致命错误？

它指向的代码行在这里：

```
$row = $stmt->fetch_assoc(); 
```

原始代码：

```
$query = "SELECT Username, Email FROM User WHERE User = ?";
// prepare query
$stmt=$mysqli->prepare($query);
// You only need to call bind_param once
$stmt->bind_param("s",$user);
// execute query
$stmt->execute(); 
// get result and assign variables (prefix with db)
$stmt->bind_result($dbUser, $dbEmail);
//get number of rows
$stmt->store_result();
$numrows = $stmt->num_rows();                                      

if ($numrows == 1){

$row = $stmt->fetch_assoc();
$dbemail = $row['Email'];

} 
```

更新代码：

```
$query = "SELECT Username, Email FROM User WHERE User = ?";
// prepare query
$stmt=$mysqli->prepare($query);
// You only need to call bind_param once
$stmt->bind_param("s",$user);
// execute query
$stmt->execute(); 
// get result and assign variables (prefix with db)
$stmt->bind_result($dbUser, $dbEmail);
//get number of rows
$stmt->store_result();
$numrows = $stmt->num_rows();                                      

if ($numrows == 1){    
  $row = $stmt->fetch_assoc();
  $dbemail = $row['Email'];    
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T12:53:28.733

变量 $stmt 的类型是 mysqli_stmt，而不是 mysqli_result。mysqli_stmt 类没有为其定义方法“fetch_assoc()”。

您可以通过调用其 get_result() 方法从 mysqli_stmt 对象获取 mysqli_result 对象。**为此，您需要安装 mysqlInd 驱动程序**！

```
$result = $stmt->get_result();
row = $result->fetch_assoc(); 
```

**如果您没有安装驱动程序**，您可以像这样获取结果：

```
$stmt->bind_result($dbUser, $dbEmail);
while ($stmt->fetch()) {
    printf("%s %s\n", $dbUser, $dbEmail);
} 
```

所以你的代码应该变成：

```
$query = "SELECT Username, Email FROM User WHERE User = ?";
// prepare query
$stmt=$mysqli->prepare($query);
// You only need to call bind_param once
$stmt->bind_param("s",$user);
// execute query
$stmt->execute(); 
// bind variables to result
$stmt->bind_result($dbUser, $dbEmail);
//fetch the first result row, this pumps the result values in the bound variables
if($stmt->fetch()){
    echo 'result is ' . dbEmail;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:55:18.093

改变，

```
$stmt->store_result(); 
```

至

```
$result = $stmt->store_result(); 
```

和

改变，

```
$row = $stmt->fetch_assoc(); 
```

至

```
$row = $result->fetch_assoc(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:02:15.250

你错过了这一步

```
$stmt = $mysqli->prepare("SELECT id, label FROM test WHERE id = 1");
$stmt->execute();
$res = $stmt->get_result(); // you have missed this step
$row = $res->fetch_assoc(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-02T19:46:03.707

Asciiom 指出，最好使用 mysqlnd。但是，如果您处于不允许安装 mysqlnd 的奇怪情况，则仍然可以在没有它的情况下将您的数据放入关联数组中。尝试使用此答案中的代码 [Mysqli - Bind results to an Array](https://stackoverflow.com/questions/24363755/mysqli-bind-results-to-an-array)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-30T20:34:46.670

我意识到这段代码是作为stackoverflow某处的答案提供的：

```
//get number of rows
$stmt->store_result();
$numrows = $stmt->num_rows(); 
```

我尝试它来获取行数，但意识到我不需要该行`$stmt->store_result();`，并且它没有给我我的号码。我用这个：

```
$result      = $stmt->get_result();
$num_of_rows = $result->num_rows;
......
$row         = $result->fetch_assoc();
$sample      = $row['sample']; 
```

# c# - 以意想不到的比例绘制虚线形状

> ID：12178379
> 
> 赞同：0
> 
> 时间：2012-08-29T12:49:26.507
> 
> 标签：c#, drawing, gdi+, scale, shapes

我正在使用控件绘制事件在我的应用程序中绘制图形对象。所有对象的大小都以毫米为单位存储，因此我使用“毫米”作为图形对象的 PageUnit。出于某种原因，当我使用 DashStyle 而非实体绘制形状时，它会以非常意外的比例绘制。

在下面的代码示例中，我希望看到两条线都被绘制在另一条之上，但我得到的是红色虚线在其他地方以更大的比例绘制。

知道我缺少什么吗？

```
using System;
using System.Drawing;
using System.Drawing.Drawing2D;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication6
{
    public partial class Form1 : Form
    {
        private Pen solidBlackPen = new Pen(Color.Black, 1);
        private Pen dashedRedPen = new Pen(Color.Red, 1) { 
                                          DashStyle = DashStyle.Dash 
                                       };

        private Point point1 = new Point(5, 5);
        private Point point2 = new Point(35, 5);

        public Form1()
        {
            InitializeComponent();

            this.BackColor = Color.White;
            this.Paint += new PaintEventHandler(Form1_Paint);
        }

        private void Form1_Paint(object sender, PaintEventArgs e)
        {
            e.Graphics.PageUnit = GraphicsUnit.Millimeter;

            e.Graphics.DrawLine(solidBlackPen, point1, point2);
            e.Graphics.DrawLine(dashedRedPen, point1, point2);
        }

    }
} 
```

由于我是新人，我无法上传屏幕截图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:43:27.587

经过几次测试，这在我看来就像某种错误，只发生在特定的操作系统/框架上。

设法解决这个问题的是在绘制形状之前添加以下行：

```
e.Graphics.ScaleTransform(1, 1); 
```

# jquery - Rails：如何在 datepicker 中添加工具提示事件并在几个月内限制它们

> ID：12178385
> 
> 赞同：1
> 
> 时间：2012-08-29T12:49:40.213
> 
> 标签：jquery, ruby-on-rails, jquery-ui, events, datepicker

我有一个日期选择器，我希望用户在其中看到管理员创建的所有事件的颜色。添加功能以添加带有事件标题的工具提示会很好。

我知道 [jQueryUI 的 datepicker](http://jqueryui.com/demos/datepicker/)允许这样的事情。我必须使用[beforeShowDay](http://jqueryui.com/demos/datepicker/#event-beforeShowDay)方法。但问题来了。

1) 我如何将@events 数组传递给jquery 代码？我知道我可以在视图中访问该数组，但我可以这样做：

```
var events = @events; 
```

2）第二个也是**最重要的问题**。这种方法将导致我的应用程序处理大量事件。当事件开始变得很多时，这将减慢一切。如何根据今天的日期将事件限制在几个月内？
希望清楚。有什么帮助吗？？

**更新1**（第一个问题和第二个问题的一小部分已解决）好的，我设法将我的实例事件数组传递给javascript，如下所示：

```
<%= javascript_tag do %>
  var events = <%= raw @calendar_events.to_json %>
<% end %> 
```

这样，我可以通过范围限定在控制器中以我想要的方式限制事件。
当我签入浏览器控制台事件数组是这样组成的：

```
[[" Snap-happy athletes ca...arrival at London 2012 ", "2012-07-28T00:00:00Z"], ["AdWords API Office Hours EMEA", "2012-07-25T00:00:00Z"], ["Under the math", "2012-07-22T00:00:00Z"], ["Superman power", "2012-07-13T00:00:00Z"], ["Google I/O 2012 Keynote","2012-07-01T00:00:00Z"]] 
```

哪个是这样制作的数组 [["title", "date of the events"], ...]
**但是我怎样才能将它们放入带有 beforeShowDday 的日期选择器中？**

这是我的第一次尝试，但它不起作用

```
$("#datepicker").datepicker({
  jQuery.each(events, function(index, event) {
    beforeShowDay: function(event[0]) {
      return [true, "", event[1]];
    }
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:39:49.523

从文档看来，数组只是 jQuery UI 正在寻找的东西的顺序。

> 该函数将日期作为参数，并且必须返回一个数组，其中 [0] 等于 true/false 指示此日期是否可选，[1] 等于 CSS 类名称或默认表示为 "" , 和 [2] 此日期的可选弹出工具提示。在显示之前，它会在日期选择器中的每一天被调用。

基本上该函数需要返回三个项目。

1.  日期是否可以选择
2.  您是否应该在当天添加课程
3.  它的工具提示是什么

这是代码中的示例

```
// what the function should return
return [
  (boolean) is the date selectable,
  (string) the class to add to the day,
  (string) the text to show when hovered over
] 
```

**更新：** Stack Overflow（我认为所有 Stack Exchange 站点）使用以下内容显示“已访问”日历。我认为这种方法比我的*要*好得多，所以我正在更换它。

实际的“访问”日期像这样存储在 JSON 中。

```
{__YEAR__: {__MONTH__: {__DAY__:1}}} 
```

这是一个例子。

```
var visited = {2012: {1: {1:1, 3:1, 4:1, 5:1, 18:1,19:1}, {3: {4:1, 5:1}}} 
```

然后在里面`beforeShowDay`他们确保`visited`对象的键存在。这是我的他们的代码版本。

```
beforeShowDay: function(date) {
  var y = date.getFullYear(),
      m = date.getMonth() + 1,
      d = date.getDay(),

      hasVisited = visited[y] && visited[y][m] && visited[y][m][d];

  return [false, (hasVisited ? 'has-visited-class' : ''), 'date'];        
} 
```

生成填充此所需的 JSON 非常特定于您的表结构。如果您在创建 JSON 方面需要帮助，我将需要更多工作。

## 更新 2

问题是 JavaScript 不能在对象中调用函数，这是无效的语法。另一件事是，我担心循环遍历数组中的所有项目会非常低效。

您的代码的正确语法如下所示。但正如我所提到的，由于效率低下，我不建议这样做。

**注意：**在行中`beforeShowDay: function(__PARAM__)`。__PARAM__*由*jQuery 自动传递。这意味着您需要确保它是您正在寻找的值，而不是询问 jQuery 是否是 jQuery 正在寻找的值。

另一件事是数组从`0`. 事实上，所有的编程语言都是从零开始的。因此，要获得所需索引处的值，您可以这样做。

```
var events = ['created a new product', '30-8-2012'];

console.log(events[0]); // "created a new product"
console.log(events[1]); // "30-8-2012" 
```

这是您的代码的更正语法，但它不起作用，因为您无法从`.each()`下面的函数返回。我只是提供这个，以便您可以看到我将如何更正您所写的内容。

```
$("#datepicker").datepicker({
  beforeShowDay: function(date) {
    jQuery.each(events, function(index, event) {
      var active_class = "no-activity";

      // make sure the event's date matches jQuery's date
      if( event[1] == date ) {
        active_class = "had-activity";
      }

      return [true, active_class, event[0]];
    }
  }
}); 
```

### 变化

在您的控制器内部，您需要以一种非常具体的方式提取事件。我建议使用[Ruby Hash](http://ruby-doc.org/core-1.9.3/Hash.html)。A`Hash`是一个键值对。这意味着您可以将 设置`key`为您的日期，并将 设置`value`为您的标题。这将允许您轻松匹配 jQuery 提供的日期和事件列表中的日期。

这是您需要添加到控制器的内容。我使用了一个名为的函数`[strftime()](http://ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)`来格式化日期。基本上我把它改成了“日-月-年”，这样更容易和jQuery匹配。

1. `%e`返回没有零填充的月份中的日期。所以`1`不是`01`。

2. `%-m`返回没有零填充的月份。

3. `%Y`返回一个四位数的年份。

```
@events = {} # create an empty hash

# get all the events and add them to `@events`
CalendarEvent.select('date, title').all.map do |event|
  @events[event.date.strftime('%e-%-m-%Y')] = event.title
end 
```

然后在你的 JavaScript 中你可以得到`@events`with。

```
<% javascript_tag do %>
$(document).ready(function() {
  var events = <%= @events.to_json %>;

  $("#datepicker").datepicker({
    beforeShowDay: function(date) {
      var y = date.getFullYear(),
          m = date.getMonth() + 1,
          d = date.getDate(), // gets the day of the month
          formatted_date = d + '-' + m + '-' + y;

          hasVisited = events[formatted_date];

      return [true, (hasVisited ? 'has-visited-class' : ''), hasVisited];
    }
  });
});
<% end %> 
```

# c# - 试图 int.parse 多数组字符串

> ID：12178386
> 
> 赞同：3
> 
> 时间：2012-08-29T12:49:48.660
> 
> 标签：c#, arrays, for-loop, multidimensional-array

我这样做：

```
string[,] string1 = {{"one", "0"},{"Two", "5"},{"Three","1"}};
int b = 0;

for(int i = 0; i <= string1.Length; i++)
{
     b = int.Parse(string1[i, 1]); // Error occurs here
} 
```

我收到一个错误，说“索引范围是数组的限制”（或类似的东西，错误是丹麦语）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T12:54:51.043

有两个问题：

*   `string1.Length`将返回 6，因为这是数组的*总*长度
*   您`<=`用于比较，因此它实际上会尝试迭代 7 次。

你的`for`循环应该是：

```
for (int i = 0; i < string1.GetLength(0); i++) 
```

对此处的调用`GetLength(0)`将返回 3，作为“第一个”维度的大小。返回 2的调用`GetLength(1)`，因为第二个维度的大小为 2。（不过，您不需要这样做，因为您基本上是在硬编码您想要每个“行”的第二个“列”的知识。）

有关更多详细信息，请参阅文档[`Array.GetLength()`](http://msdn.microsoft.com/en-us/library/system.array.getlength.aspx)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-29T12:51:17.313

您的数组边界在循环中不正确：

```
for(int i = 0; i <= string1.Length; i++) 
```

应该读：

```
for(int i = 0; i < string1.GetLength(0); i++) 
```

有两件事是错误的：`<=`vs`<`意味着您将一个项目走得太远，并`.Length`返回数组的总长度 (6)，而`GetLength(0)`后者返回第一个维度的长度 (3)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T12:50:56.163

您已经有了正确的答案，我会更新我的答案以更正它。正确的迭代应该是

```
 for (int i = 0; i < string1.GetLength(0); i++)
        {
            b = int.Parse(string1[i, 1]);
        } 
```

因为`i`代表第一个维度的长度，而fixed`1`会返回数字，也就是第二个元素。

我很抱歉我首先给出的错误答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T12:51:14.180

改成

```
for(int i = 0; i <= string1.GetLength(0); i++) 
{ 
b = Int32.Parse(string1[i][0]);
} 
```

您的代码引用索引 1 而不是 0 导致异常称为`Array out of bound`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T12:51:51.837

更改`i <= string1.Length`为`i < string1.Length`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T12:52:45.073

试试这个：

```
for(int i = 0; i < string1.GetLength(0) ; i++)
{
     b = int.parse(string1[i, 0]); // Error occurs here
} 
```

[Array.GetLength 方法](http://msdn.microsoft.com/en-us/library/system.array.getlength)

获取一个 32 位整数，该整数表示 Array 的指定维度中的元素数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-29T13:36:18.907

另外值得一提的是，`int.Parse`可能会抛出一个`FormatException`，考虑一下[`int.TryParse`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)。

# javascript - 当我想在 span 标签中呈现文本时看到 span 标签

> ID：12178387
> 
> 赞同：1
> 
> 时间：2012-08-29T12:49:55.540
> 
> 标签：javascript, razor, resources

我在页面上有一些显示“存在”或“不存在”的字词，用户可以单击这些字词在存在或不存在之间切换。

当单词设置为“不存在”时，我希望该文本为红色。

这个词代表一个布尔值，并使用以下代码在屏幕上更新：

```
<script type="text/javascript">
    absentText = $.trim('@MyApp.Resources.MyAppResource.Absent_Text').toLowerCase();
    presentText = $.trim('@MyApp.Resources.MyAppResource.Present_Text').toLowerCase();
    updateAttendanceUrl = '@Url.Action("UpdateAttendance", "Attendance")';
</script> 
```

在 MyAppResource.Absent_Text = 缺席的情况下，页面上的“缺席”一词可以很好地显示。

当我将 MyAppResource.Absent_Text 更改为阅读“缺席”时，我的页面字面上显示`<span style="color:red">absent</span>`

这是我的视图源示例：

```
<td>&lt;span style=&quot;color:red&quot;&gt;absent&lt;/span&gt;</td> 
```

所以不知何故，我的 < 和 > 符号被拿走了。

**如何更改我的代码，以便当我的屏幕上的单词被写为“缺席”时，它是红色的？** 有没有一种更简单的方法来为屏幕上匹配“缺失”红色的任何文本着色？

作为参考，这是我页面中的其余 javascript：

```
var userId;
var attendanceDay;
var isPresent;
var updateAttendanceUrl;
var absentText;
var presentText;
var courseId;
$(document).ready(function (event) {
    $('.attendance').live('click', function () {
        userId = $(this).parents('tr').attr('id');
        if (userId != '') {
            attendanceDay = $(this).attr('id');
            isPresent = $.trim($(this).find('span').text().toLowerCase());
            courseId = $(this).parents('tbody').attr('id');
            $(this).find('span').addClass('currentClass');
            if (isPresent == absentText) {
                UpdateAttendance(1);
            } else {
                UpdateAttendance(0);
            }
        } else {
            event.preventDefault();
        }
    });
});
function UpdateAttendance(present) {
    url = updateAttendanceUrl;
    $.ajax({
        type: "POST",
        url: url,
        data: "userId=" + userId + "&attendanceDay=" + attendanceDay + "&courseId=" + courseId + "&present=" + present,
        success: function (data) {
            if (isPresent == absentText) {
                $('#' + userId).find('.currentClass').text(presentText).removeAttr('class');
            } else {
                $('#' + userId).find('.currentClass').text(absentText).removeAttr('class');
            }
            return true;
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:53:39.687

您要查找的内容称为 unescape 或 htmldecode。SO上已经有各种可用的主题。这是[一个](https://stackoverflow.com/questions/1912501/unescape-html-entities-in-javascript)。

# grails - Spring-Security-UI

> ID：12178397
> 
> 赞同：1
> 
> 时间：2012-08-29T12:50:47.780
> 
> 标签：grails, spring-security

这是我第一次尝试在我的 Grails 应用程序中使用 Spring Security UI。

我目前正在使用 Spring Security Core，它工作正常，但我喜欢 UI 插件的想法。

我已通读文档，但看不到任何一条命令可以运行以使用默认值设置所有内容。请记住，我已经运行了 Spring Security Core。

谁能帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:50:58.130

您只需要使用覆盖您的身份验证视图

```
grails s2ui-override auth 
```

# c# - EndpointNotFoundException when calling a service

> ID：12178398
> 
> 赞同：0
> 
> 时间：2012-08-29T12:50:49.047
> 
> 标签：c#, asp.net, azure

I successfully added a service reference to my ASP.NET project, but I get a `EndpointNotFoundException`, when I try to call a method from a service client:

```
BenchmarkManagementServiceClient client = new BenchmarkManagementServiceClient();
try {
    int id = Convert.ToInt32(userId);
    if (client.VerifyUser(id)) { //Here is the exception thrown
        FormsAuthentication.SetAuthCookie(userId, false);
    }
} catch (FormatException) { }
client.Close(); 
```

Thats curious, because I can access the address of the service via a browser and nearly the same code works in another project (Windows Forms).

Thanks for your help.

Edit:

The message of the inner exception is `The remote name could not be resolved`

The service I try to request is running in the Azure-Cloud.
The ASP.NET project is running locally on my computer.
My other project (where everything works fine) also runs locally on my computer.

Maybe it's good to know, that I had to create the Service Reference without the package `Newtonsoft.Json`. Otherwhise occured warnings during the code generation for the service reference.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T08:23:35.487

我在代理后面并且遇到了完全相同的问题。

将此部分添加到我的配置中为我修复了代理身份验证错误。

```
<system.net>
    <defaultProxy useDefaultCredentials="true" />
</system.net> 
```

# ipad - Azure html5 Web 应用程序引发应用程序缓存错误事件：清单提取失败 (404)

> ID：12178400
> 
> 赞同：3
> 
> 时间：2012-08-29T12:50:54.350
> 
> 标签：ipad, azure, html5-appcache

我在从 Azure 提供 .appcache 文件时遇到问题。

在 Chrome 开发人员工具控制台中查看时，我收到以下消息

> 应用程序缓存错误事件：清单提取失败 (404) [http://mydomain.cloudapp.net/c.appcahe](http://mydomain.cloudapp.net/c.appcahe)

现在我知道 Azure 实例的默认 vm 无法识别 .appcache 扩展名和 mime 类型，因此我将以下内容添加到我的 webrole web.config

```
<system.webServer>
  <staticContent>
    <mimeMap fileExtension=".appcache" mimeType="text/cache-manifest"/>
  </staticContent>
</system.webServer> 
```

但是，当我尝试浏览 c.appcache 以及控制台中的相应 404 时，仍然出现 404 错误。

如果我在 dev fabric 中运行应用程序，c.appcache 中的资源会很好地下载，并且在 IIS 中创建的临时网站在 iis 配置中添加了相应的 Mime 类型。

谁能帮我解决这个问题。

谢谢

布雷特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T15:16:48.320

以为我会为这个问题提供答案，以防其他人遇到同样的问题。

问题分为两部分。1\. 第一部分是 mime 类型，我上面的代码已正确修复。2.问题的后半部分归结为我从 VS2010 打包我的部署，在打包所有内容时省略了 c.appcache 文件。因此，即使 IIS 现在识别了 mime 类型，它仍然会给出 404，因为文件不存在。这可以通过在 VS 中单击 c.appcache 并对文件“内容”进行构建操作来解决。

希望这可以帮助。

# iphone - 链接器中的 Xcode 错误

> ID：12178411
> 
> 赞同：3
> 
> 时间：2012-08-29T12:51:20.317
> 
> 标签：iphone, xcode

我是新的 iPhone 开发人员。我得到了这个错误。

> ld /Users/c4ntechnology/Library/Developer/Xcode/DerivedData/iPatientCare-azwpvvrjjoaoygfcfqiicwkyssya/Build/Products/Debug-iphonesimulator/iPatientCare.app/iPatientCare normal i386 cd /Users/c4ntechnology/Desktop/iPatientCare setenv MACOSX_DEPLOYMENT_TARGET PATH 10.6 /Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/ sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/ iPhone模拟器5.1。sdk -L/Users/c4ntechnology/Library/Developer/Xcode/DerivedData/iPatientCare-azwpvvrjjoaoygfcfqiicwkyssya/Build/Products/Debug-iphonesimulator -F/Users/c4ntechnology/Library/Developer/Xcode/DerivedData/iPatientCare-azwpvvrjjoaoygfcfqiicwkyssya/Build/ Debug-iphonesimulator -filelist /Users/c4ntechnology/Library/Developer/Xcode/DerivedData/iPatientCare-azwpvvrjjoaoygfcfqiicwkyssya/Build/Intermediates/iPatientCare.build/Debug-iphonesimulator/iPatientCare.build/Objects-normal/i386/iPatientCare.LinkFileList -mmacosx-版本-min = 10。6 -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -fobjc-link-runtime -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -lsqlite3 -framework UIKit -framework AVFoundation -framework CoreGraphics -o /Users/c4ntechnology/Library/Developer/Xcode/ DerivedData/iPatientCare-azwpvvrjjoaoygfcfqiicwkyssya/Build/Products/Debug-iphonesimulator/iPatientCare.app/iPatientCare
> 
> 体系结构 i386 的未定义符号：
> “_OBJC_CLASS_$_ViewController”，引用自：AppDelegate.o 中的 objc-class-ref ld：未找到体系结构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）
> 
> “_OBJC_CLASS_$_ViewController”，引用自：
> 
> clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

请帮我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T13:32:54.957

此编译器错误意味着您的`AppDelegate`类正在引用`ViewController`项目中的类，但`ViewController`当前尚未设置为编译并包含在最终产品中。

为确保`ViewController`该类包含在最终产品中，请选择左上栏中的蓝色 Xcode 项目图标，如下图所示：

![在此处输入图像描述](../Images/57f8d42e1a6e9d2d98ddc06bb47b825b.png)

然后在下一列中选择您的目标，然后选择`Build Phases`选项卡，并确保`ViewController.m`与显示的其他内容一起包含在列表`AppDelegate.m`中。如果它当前不存在，要添加它，您可以将它的图标拖到最左边的列中并将其拖放到 Compile Sources 表视图中，或单击该表视图底部的 + 按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:06:24.097

UIKit 类被调用`UIViewController`，你很可能错过了“UI”部分。您必须导入`<UIKit/UIKit.h>`才能使用此类，但它很可能已经包含在您的`MyApp-Prefix.pch`. 如果 ViewController 是您自己的类，您必须：

```
#import "ViewController.h" 
```

# c# - 从 C# 中的 XmlDocument 读回特殊字符

> ID：12178418
> 
> 赞同：1
> 
> 时间：2012-08-29T12:51:42.950
> 
> 标签：c#, xml, xmldocument

假设我有一个带有转义符号 (&) 的 xml。然后我如何读回它，以便结果给我“未转义”的文本。

运行以下命令会给我**“&”** 作为结果。我如何返回**'&'**

```
void Main()
{
  var xml = @"
  <a>
    &amp;
  </a>
  ";
  var doc = new XmlDocument();
  doc.LoadXml(xml);
  var ele = (XmlElement)doc.FirstChild;
  Console.WriteLine (ele.InnerXml); 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T15:29:48.293

使用**ele.InnerText**代替**ele.InnerXml**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:54:43.180

您可以使用 CDATA 来获取您的数据

像“<”和“&”这样的字符在 XML 元素中是非法的。“<”解析器将其解释为新元素的开始。"&" 解析器将其解释为字符实体的开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:28:13.017

以下字符在 XML 元素中是非法的：

```
Illegal EscapedUsed
------------------
    "   &quot;
    '   &apos;
    <   &lt;
    >   &gt;
    &   &amp; 
```

要获得未转义的值，您可以使用：

```
 public string UnescapeXMLValue(string xmlValue)
  {
    if (string.IsNullOrEmpty(s)) return s;
   string temp = s;
   temp = temp.Replace("&apos;", "'").Replace("&quot;", "\"").Replace("&gt;", ">").Replace("&lt;", "<").Replace("&amp;", "&");
   return temp ;
 } 
```

要获得转义值，您可以使用：

```
public string EscapeXMLValue(string value)
  {
    if (string.IsNullOrEmpty(s)) return s;
   string temp = s;
   temp = temp.Replace("'","&apos;").Replace( "\"", "&quot;").Replace(">","&gt;").Replace( "<","&lt;").Replace( "&","&amp;");
   return temp ;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T12:56:30.433

```
use
 HttpServerUtility.HtmlDecode (ele.InnerXml); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T12:56:40.730

```
Console.WriteLine (HttpUtility.UrlDecode(String.Format("{0}",ele.InnerXml))); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T13:01:10.230

尝试使用此静态方法来解码转义字符：HttpServerUtility.HtmlDecode Method (String) 请参见此处的示例：http: [//msdn.microsoft.com/ru-ru/library/hwzhtkke.aspx](http://msdn.microsoft.com/ru-ru/library/hwzhtkke.aspx)

# java - 使用junit测试用例显示空指针异常

> ID：12178421
> 
> 赞同：0
> 
> 时间：2012-08-29T12:51:44.727
> 
> 标签：java, junit, junit4

我正在尝试使用 junit 测试用例根据薪水对员工对象进行排序。

这是我的员工分类课程

```
package day4;
import day4.Employee;
public class EmployeesInfoWithSalary {
    private Employee[] employee;
    private int numberOfEmployees;
public EmployeesInfoWithSalary(Employee[] employee, int numberOfEmployees) {
    super();
    this.employee = employee;
    this.numberOfEmployees = numberOfEmployees;
}

public Employee[] getSortBasedOnSalary() {

    String temp;
    for (int iterator = 0; iterator < numberOfEmployees; iterator++) {
        int minSalary = employee[iterator].getSalary();
        int index = iterator;
        for (int comparator = iterator; comparator < numberOfEmployees; comparator++) {
            if (employee[comparator].getSalary() < minSalary) {
                index = comparator;
                minSalary = employee[comparator].getSalary();
            }

        }

        employee[index].setSalary(employee[iterator].getSalary());
        employee[iterator].setSalary(minSalary);
        temp = employee[index].getId();
        employee[index].setId(employee[iterator].getId());
        employee[iterator].setId(temp);
        temp = employee[index].getName();
        employee[index].setName(employee[iterator].getName());
        employee[iterator].setName(temp);

    }

    return employee;

}

} 
```

员工对象类如下

```
package day4;

public class Employee {

private String id;
private String name;
private int salary;

public String getId() {
    return id;
}

public void setId(String id) {
    this.id = id;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public int getSalary() {
    return salary;
}

public void setSalary(int salary) {
    this.salary = salary;
}

} 
```

junit测试用例的testemployee工资等级如下

```
package day4;

import static org.junit.Assert.*;
import day4.Employee;

import org.junit.Test;

public class TestEmployeeInfoWithSalary {

@Test
public void testGetSortBasedOnSalary() {

Employee[] employee = new Employee[5];

employee[0].setName("pratap");
employee[1].setName("aruna");
employee[2].setName("satyam");
employee[3].setName("krishna");
employee[4].setName("siva");

employee[0].setId("k0100");
employee[1].setId("k0101");
employee[2].setId("k0102");
employee[3].setId("k0103");
employee[4].setId("k0104");
employee[0].setSalary(10000);
employee[1].setSalary(1000);
employee[2].setSalary(8000);
employee[3].setSalary(6000);
employee[4].setSalary(9000);
EmployeesInfoWithSalary employeeInfoWithSalary= new EmployeesInfoWithSalary(employee, 5);

employee[4].setName("pratap");
employee[0].setName("aruna");
employee[2].setName("satyam");
employee[1].setName("krishna");
employee[3].setName("siva");

employee[4].setId("k0100");
employee[0].setId("k0101");
employee[2].setId("k0102");
employee[1].setId("k0103");
employee[3].setId("k0104");
employee[4].setSalary(10000);
employee[0].setSalary(1000);
employee[2].setSalary(8000);
employee[1].setSalary(6000);
employee[3].setSalary(9000);
assertArrayEquals(employee,employeeInfoWithSalary.getSortBasedOnSalary());

}

} 
```

日志显示空点表达式的错误..

任何人都可以帮助我..谢谢..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T12:57:03.710

我怀疑这是 NPE 的路线。

```
// creates an array full of null values.
Employee[] employee = new Employee[5];

employee[0].setName("pratap"); 
```

您需要将 Employee 对象添加到数组中的每个元素。

更好的方法是使用构造函数来获取所有需要的字段。

```
Employee[] employee = {
    new Employee("pratap", "k0100", 10000),
    new Employee("aruna",  "k0101",  1000),
    new Employee("satyam", "k0102",  8000),
    new Employee("krishna","k0103",  6000),
    new Employee("siva",   "k0104",  9000) }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:05:08.917

后

```
 Employee[] employee = new Employee[5]; 
```

对于数组中的每个索引，您需要初始化`Employee`对象。

```
 employee[0] = new Employee(); etc 
```

# mysql - 左连接 Vs 子查询 Mysql

> ID：12178425
> 
> 赞同：-1
> 
> 时间：2012-08-29T12:51:56.040
> 
> 标签：mysql, subquery, left-join

对不起英语不好，

我有两个查询，例如

1)

```
select t1.id,case when t2.p_id IS NULL then 'Text' ELSE (select t3.data from t3 where t3.p_id = t2.p_id) END FROM t1,t2
WHERE t2.id = t1.id 
```

还有另一个查询

2)

```
select t1.id, t3.data 
FROM t1,t2 left join t3 on t3.p_id = t2.p_id WHERE t2.id = t1.id 
```

以上两个查询哪个更快，为什么？

谢谢你给我时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:02:38.987

我没有详细阅读您的查询，但总的来说第二个查询的结构更好。

# ruby-on-rails - globalize3 和 easy_globalize3_accessors 验证

> ID：12178428
> 
> 赞同：3
> 
> 时间：2012-08-29T12:52:10.177
> 
> 标签：ruby-on-rails, ruby-on-rails-3, localization, internationalization, globalize3

我正在使用宝石：globalize3 和 easy_globalize3_accessors。我有验证问题。例如，我有 Post 模型：

```
class Post
  translates :title, :content
  globalize_accessors :locales => [:en, :ru], :attributes => [:title, :content]
  validates :title, :content, :presence => true
end 
```

和形式：

```
= form_for @post do |f|
  -I18n.available_locales.each do |locale|
    = f.text_field "title_#{locale}"
    = f.text_area "content_#{locale}" 
```

它看起来像在视图中（如果 I18n.locale = :ru）：

```
<form action="/ru/posts" method="post">
  <input id="post_title_ru" name="post[title_ru]" type="text" />
  <textarea cols="40" id="post_content_ru" name="vision[content_ru]"></textarea>

  <input id="post_title_en" name="post[title_en]" type="text" />
  <textarea cols="40" id="post_content_en" name="vision[content_en]"></textarea>

  <input name="commit" type="submit" value="Создать Видение" />
</form> 
```

如果我只用俄语填写字段，则验证通过，如果我只想用英语发布，并且只填写英语字段（当 I18n.locale = :ru），则验证失败

```
Title can't be blank
Content can't be blank 
```

据我了解，属性存在问题，验证仅检查第一个属性：title_ru 和：content_ru。并且对其余属性（：content_en 和：title_en）检查没有达到。

如何制作第二个数据验证器来检查第一组属性的验证是否未通过？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T14:04:47.187

```
validate :titles_validation

def titles_validation
  errors.add(:base, "your message") if [title_ru, title_en].all? { |value| value.blank? }
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T13:49:09.770

问题是 globalize3 正在验证*您当前所在的任何语言环境*的标题。如果要验证*每个*语言环境（而不仅仅是*当前*语言环境），则必须为每个语言环境中的属性显式添加验证器（正如@apneadiving 指出的那样）。

您应该能够通过循环自动生成这些验证器`I18n.available_locales`：

```
class Post < ActiveRecord::Base
  I18n.available_locales.each do |locale|
    validates :"title_#{locale}", :presence => true
  end

  ...

end 
```

# javascript - 使用链接和脚本标签引用 JavaScript 源代码有什么区别？

> ID：12178429
> 
> 赞同：47
> 
> 时间：2012-08-29T12:52:10.717
> 
> 标签：javascript

我尝试使用以下两个源参考行~~. 他们都编译~~. 但是有什么区别呢？

第一种方法：

```
<script src="~/Scripts/jquery-1.4.1.js" type="text/javascript"></script> 
```

方法二：

```
<link href="~/Scripts/jquery-1.4.1.js" type="text/javascript" /> 
```

* * *

注意：*[和](https://stackoverflow.com/questions/51105967/difference-between-script-and-link-as-script)**[标签](https://stackoverflow.com/questions/51105967/difference-between-script-and-link-as-script)**[之间也有类似的区别`script``link as="script"`](https://stackoverflow.com/questions/51105967/difference-between-script-and-link-as-script)*，它询问关于`<link href="js/script.js" as="script">`，这是不同的。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-29T12:56:00.827

`link`标签用于关联样式表或任何其他链接文档，而不是包含 javascript 文件。

HTML[**链接元素**](https://developer.mozilla.org/en-US/docs/HTML/Element/link) `<link>`指定当前文档和其他文档之间的关系。此元素的可能用途包括定义用于导航的关系框架并将文档链接到样式表。

**`rel`属性：**

> 此属性命名链接文档与当前文档的关系。该属性必须是链接类型值的空格分隔列表。该属性最常见的用途是指定指向外部样式表的链接：rel 属性设置为样式表，href 属性设置为外部样式表的 URL 以格式化页面。WebTV 还支持使用 rel 的值 next 来预加载文档系列中的下一页。

**可能的值：**

*   **替代**- 文档的替代版本（即打印页、翻译或镜像）

*   **stylesheet** - 文档的外部样式表

*   **开始**- 选择中的第一个文档

*   **next** - 选择中的下一个文档

*   **prev** - 选择中的上一个文档

*   **内容**- 文档的目录

*   **index** - 文档的索引

*   **词汇表**- 文档中使用的词汇表（解释）

*   **copyright** - 包含版权信息的文档

*   **chapter** - 文档的一章

*   **section** - 文档的一部分

*   **subsection** - 文档的一个小节

*   **附录** 文档的附录

*   **帮助** 帮助文档

*   **书签** 相关文档

*   **快捷方式图标**文档的相关（收藏图标）图像

**而**HTML[**脚本元素**](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script) `<script>`用于在 HTML 或 XHTML 文档中嵌入或引用可执行脚本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T12:53:09.880

第二个（使用`link`）不应该工作或运行并且是非标准的。

[http://jsfiddle.net/qMKUv/](http://jsfiddle.net/qMKUv/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-07-09T18:28:48.117

*   `<link>`对于 CSS
*   `<script>`对于 JS

# c++ - cin.getline() 奇怪的行为

> ID：12178431
> 
> 赞同：1
> 
> 时间：2012-08-29T12:52:19.567
> 
> 标签：c++, queue, user-input, cin

以下是练习某些类继承的书中的练习。但问题出在客户端，而不是类设计。（BaseCore、baseDMA、缺少DMA 和 hasDMA 是 BTW 类）。

```
// usedma.cpp -- polymorphic example (compile with dma.cpp)

#include <iostream>
#include "dma.h" // includes <iostream>

const int ELEMENTS = 1;
const int LENGTH = 30;

int main()
{
    using std::cin;
    using std::cout;

    BaseCore *pArr[ELEMENTS];
    char tempDate[LENGTH];
    char kind;

    for (int i = 0; i < ELEMENTS; i++)
    {
        cout << "\nEntering data for element #" << i + 1 << "\n\n";
        cout << "Enter the date it was created: ";
        cin.getline(tempDate, LENGTH - 1);
        cout << "Enter 1 for baseDMA, 2 for lacksDMA, or 3 for hasDMA: ";
        while (cin >> kind && kind != '1' && kind != '2' && kind != '3')
            cout <<"Wrong data. Please, try again: ";
        while (cin.get() != '\n')
            continue;
        char tempLabel[LENGTH];
        int tempRating;
        cout << "Enter the label: ";
        cin.getline(tempLabel, LENGTH - 1);
        cout << "Enter the rating: ";
        cin >> tempRating;
        if (kind == '1') // baseDMA
            pArr[i] = new baseDMA(tempDate, tempLabel, tempRating);
        if (kind == '2') // lacksDMA
        {
            char tempColor[LENGTH];
            cout << "Enter the color: ";
            cin.getline(tempColor, LENGTH - 1);
            pArr[i] = new lacksDMA(tempDate, tempLabel, tempColor, tempRating);
        }
        if (kind == '3') // hasDMA
        {
            char tempStyle[LENGTH];
            cout << "Enter the style: ";
            cin.getline(tempStyle, LENGTH - 1);
            pArr[i] = new hasDMA(tempDate, tempLabel, tempStyle, tempRating);
        }
        while (cin.get() != '\n')
            continue;
    }

    cout << "\n";
    for (int i = 0; i < ELEMENTS; i++)
    {
        pArr[i]->View();
        cout << "\n";
    }
    cout << "Done.\n";

    std::cin.get();
    return 0;
} 
```

示例执行：

> 为元素 #1 输入数据
> 
> 输入创建日期：2012.01.01
> 
> 为 baseDMA 输入 1，为缺少 DMA 输入 2，或为 hasDMA 输入 3：2
> 
> 输入标签：缺少DMA
> 
> 输入评分：15
> 
> 输入颜色：蓝色
> 
> 创建日期：2012.01.01
> 
> 标签：缺少DMA
> 
> 评分：15
> 
> 颜色：
> 
> 完毕。

似乎 Color 成员被分配了空字符。这种行为发生在`if (kind == '2')`and`if (kind == '3')`语句中（在这种情况下是 style 成员）。

如果我`cin.get();`在 cin.getline() 之前放一个，它可以正常工作，但我必须按一个额外的键才能让程序要求输入。

为什么会这样？如果输入队列中有一个 '\n' 挂起，cin.getline() 会丢弃它并将 '\0' 放入变量中，我可以理解。但是程序要求我输入颜色，让我正常输入。另外，如果我放了一个 cin.get()，那么程序不应该在执行中等待额外的击键，它应该摆脱那个额外的 '\n'。我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T13:22:25.287

```
cout << "Enter the rating: ";
        cin >> tempRating; 
```

与 , 不同，`istream::getline()`将`operator>>`尾随`\n`留在流中。`getline`它会导致对您的一个 if 语句内部的下一次调用获得空输入。

当控制流`while (cin.get() != '\n')`在 for 循环结束时到达语句时，流为空 - 它正在等待输入，并且看起来好像您仍在输入颜色。

马上打电话`cin.ignore()`，它会工作的。

请注意，如果您在颜色的输入语句之后放置“调试 cout”，则这种错误会立即显而易见。你得到的方式还有一个问题`tempRating`。如果输入无效的输入，比如“xy”，错误标志将被设置，`cin`程序将进入无限循环。始终检查输入操作是否成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:16:49.427

> 如果我放一个 cin.get(); 就在 cin.getline() 之前它工作正常，但我必须按一个额外的键才能让程序要求输入。

在我看来，当你不放 cin.get() 时，你的 getline 会变成一个空字符。然后，当您放置 cin.get 时，您会得到那个空字符，并且您的 getline 工作正常。

但是你绝对应该去调试看看到底发生了什么！

# android - Android，试图在我的应用程序上有一个按钮，以允许用户对我的应用程序进行评论

> ID：12178434
> 
> 赞同：-1
> 
> 时间：2012-08-29T12:52:33.790
> 
> 标签：android

我见过其他应用程序有一个按钮，允许人们从应用程序中给应用程序评论。

我无法弄清楚如何做到这一点，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:54:36.550

假设您有一个名为 的按钮`rate`，这应该可以工作。

```
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    if(v == rate) {
        Uri uri = Uri.parse("market://details?id=" + getPackageName());
        Intent goToMarket = new Intent(Intent.ACTION_VIEW, uri);
        try {
            startActivity(goToMarket);
        } catch (ActivityNotFoundException e) {
            Toast.makeText(this, "Couldn't launch market", Toast.LENGTH_LONG).show();
        }
    } 
```

知道您所能做的就是在 Play 应用上打开您的应用页面。用户需要从那里选择费率选项。

# ios - MonoTouch：连续视图

> ID：12178436
> 
> 赞同：1
> 
> 时间：2012-08-29T12:52:40.857
> 
> 标签：ios, multithreading, xamarin.ios, mfmailcomposeviewcontroller, mfmessagecomposeview

我目前正在尝试`MFMailComposeViewController`在 SMS 一 ( `MFMessageComposeViewController`) 之后、用户发送消息或取消之后显示电子邮件视图 ( )。

`MFMessageComposeViewController`正确关闭，但不`MFMailComposeViewController`显示。

我在线程上搜索`InvokeInMainThread`，但它没有显示或不在主线程中。老实说，我根本不知道线程，我阅读的文档也不清楚。

显示方法`MFMessageComposeViewController`：

```
private void SendSms ()
{
    string strMessage = MessageComposer.GetMessage(isEmergency, latitude, longitude, location);
    MFMessageComposeViewController message = Sender.SendSms(strMessage, AppDelegate.contacts);
        message.Finished += delegate {
        message.DismissModalViewControllerAnimated(true);
    };
    this.NavigationController.PresentModalViewController (message, true);
} 
```

`MFMailComposeViewController`一个并没有太大的不同。我这样称呼这种方法：`InvokeOnMainThread(delegate { SendSms(); });`并且效果很好。

我不好的是当它关闭时。我试过`ThreadPool.QueueUserWorkItem(new WaitCallback(new Object(), SendEmail));`了，但它不在主线程中。

我试过那个：

```
SendDelegate d = new SendDelegate(SendSms);
AsyncCallback callBack = new AsyncCallback(SendEmail);
IAsyncResult ar = d.BeginInvoke(new Object(), callBack, null); 
```

不在主线程中。

## 编辑：解决方案代码

这是如何解决的！我应该考虑一下...

```
MFMessageComposeViewController message = new MFMessageComposeViewController();
message.Finished += delegate {
    message.DismissModalViewControllerAnimated(true);
        ThreadPool.QueueUserWorkItem ((e) => {
                        Thread.Sleep(500);
                        InvokeOnMainThread (delegate { 
                SendEmail(); 
                        });
                });
    };
    this.NavigationController.PresentModalViewController (message, true);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T12:24:25.853

`PresentModalViewController`当另一个呼叫`DismissModalViewController`正在进行时，您不能再次呼叫。（如果您尝试这样做，控制台可能会出现错误。）

所以你的选择是：

*   使用计时器显示第二个模态视图控制器
*   对您的 UI 使用更有意义的不同方法

我会推荐第二种选择。也许对这两个操作使用两个不同的按钮或菜单选项。

# android - 如何将已编译的 C 库添加到 Android？

> ID：12178438
> 
> 赞同：2
> 
> 时间：2012-08-29T12:52:42.873
> 
> 标签：android, android-ndk

我已经编译了库（用于 linux(.a) 和 windows(.dll)）。我需要将其中一个（我想对于 Android 我将不得不使用 .a）库导入到我的 android 项目中。

所以我已经阅读了一些关于 NDK 的教程，但这里有一个问题——我是否需要有源文件才能将库添加到 android 或者我可以添加已经编译的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:12:41.393

您必须使用 Android NDK 重新编译库。ARM 架构与 x86 架构完全不同。Linux 和 Windows 上的系统调用不同。就是做不到。

# java - JFrame 停止接收鼠标事件

> ID：12178446
> 
> 赞同：2
> 
> 时间：2012-08-29T12:53:25.460
> 
> 标签：java, swing, jframe, jbutton, mouse-listeners

我有一个 JFrame，它代表我的 Java 应用程序的 GUI。我有一个自定义按钮，从 JComponent 派生并创建并放置在此 JFrame 上。按下此按钮时，会出现一个模式对话框。

问题是，出现模态对话框后，JFrame 停止从鼠标接收鼠标事件。我打开 Spy++，发现来自 Windows 的 MouseEvents 被传递给了 JFrame。所以他们在Java的某个地方被关闭了。

我需要为一件事接收按钮事件 - 当鼠标进入我的自定义按钮区域时，按钮会改变颜色。我需要知道鼠标何时退出按钮区域，才能将按钮更改为原始颜色。标准 JButton 也存在同样的问题 - 在模式对话框出现后它仍然悬停。

当然我可以自己跟踪模态对话框的打开，并使我的按钮悬停，但只是好奇，如果有标准解决方案。

您会看到，JFrame 上的按钮在对话框出现时保持悬停状态。

```
package quixote.sscce;

import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class FrameTop extends JFrame implements MouseListener, ActionListener {
    private JButton button;

    public FrameTop() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(200, 200);
        setLocation(100, 100);

        setLayout(new BorderLayout());
        button = new JButton("Click me");
        add(button, BorderLayout.CENTER);
        button.addActionListener(this);

        addMouseListener(this);
    }

    @Override
    public void actionPerformed(ActionEvent arg0) {
        JDialog dialog = new JDialog(this, "dialog");
        dialog.setModal(true);
        dialog.setLocation(150, 150);
        dialog.setSize(100, 100);
        dialog.setVisible(true);
    }

    private int aaa = 0;
    @Override
    public void mouseClicked(MouseEvent arg0) {
        System.out.println("XXX " + aaa);
    }

    @Override
    public void mouseEntered(MouseEvent arg0) {
        System.out.println("XXX " + aaa);
    }

    @Override
    public void mouseExited(MouseEvent arg0) {
        System.out.println("XXX " + aaa);
    }

    @Override
    public void mousePressed(MouseEvent arg0) {
        System.out.println("XXX " + aaa);
    }

    @Override
    public void mouseReleased(MouseEvent arg0) {
        System.out.println("XXX " + aaa);
    }

    public static void main(String args[]) {
        final FrameTop top = new FrameTop();
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                top.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:41:34.233

我想你可能忘记了 set `opaque`ie。`setOpaque(true)`.

这将允许您更改框架和按钮的背景颜色`button.setOpaque(true)`。

试试看，它可能对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:11:58.970

使用非模态对话框，并调用 dialog.setAlwaysOnTop(true); 希望这可以帮助

# c# - 编辑 MVC3 自动生成代码的最佳实践？

> ID：12178447
> 
> 赞同：7
> 
> 时间：2012-08-29T12:53:28.047
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2012, ef-database-first

对不起，如果这是在错误的地方，但我认为它是。

所以我在创建 MVC3 互联网应用程序时使用了数据库优先方法，并为我生成了我的类。我是 MVC3 的新手，对 c# 和 Visual Studio 也很陌生，尽管我确实有一点经验。

自动生成的代码警告编辑可能会导致意外结果，如果重新生成代码，更改将被删除。据我了解，这意味着更改数据库、重新运行 tt 文件或更新模型。

但是，编辑它是否可行，并且只跟踪更改以防我需要重新生成，还是有更好的方法来解决它？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-29T12:55:05.273

生成的类应该是`partial`类，因此您应该能够通过使您自己的`partial`类具有相同的命名空间和名称来从外部管理增强功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:01:26.690

在模型优先的方法中，对您`EDMX`的文件使用默认的代码生成策略，为您生成的类`DbContext`和`Entity`类都是部分类。

因此，根据您的更改类型，如果您想扩展这些生成的类，只需创建一个新的部分类，其中包含您的自定义代码。您的部分将不会被代码生成器覆盖。

# python - 包 setup.py 和 Flask 目录结构

> ID：12178449
> 
> 赞同：2
> 
> 时间：2012-08-29T12:53:30.140
> 
> 标签：python, flask, setuptools, flask-sqlalchemy

**更新**：添加`setup.py`内容。

我有以下目录结构：

```
setup.py
packagename/
    __init__.py
    useless_file.py 
```

在`__init__.py`中，我有以下内容：

```
from flask import Flask
from flask.ext.sqlalchemy import SQLAlchemy

db = SQLAlchemy()

CONFIG_FILENAME = "packagename.settings"

def create_app():
    app = Flask(__name__)
    app.config.from_object(CONFIG_FILENAME)

    db.init_app(app)

    app.register_blueprint(sms_testing)

    return app 
```

我遵循了 Flask[推荐的包结构](http://flask.pocoo.org/docs/patterns/packages/)。

这里是`setup.py`：

```
import os
from setuptools import setup

requires = (
        "flask",
        "flask-sqlalchemy",
        "requests>=0.13.6",
        "python-dateutil>=1.5",
        "twilio",
        "selenium",
        )

def read(fname):
    return open(os.path.join(os.path.dirname(__file__), fname)).read()

setup(
    name = "Package Name",
    version = "0.0.1",
    author = "Charles-Axel Dein",
    author_email = "ca@d3in.org",
    description = ("useless"),
    license = "BSD",
    keywords = "example documentation tutorial",
    url = "http://packages.python.org/an_example_pypi_project",
    packages=['package_name',],
    # namespace_packages = ['package_name'],
    install_requires=requires,
    long_description=read('README.md'),
    classifiers=[
        "Development Status :: 3 - Alpha",
        "Topic :: Utilities",
        "License :: OSI Approved :: BSD License",
    ],
) 
```

当我这样做时`python setup.py develop`，我得到：

```
Traceback (most recent call last):
  File "setup.py", line 2, in <module>
    from setuptools import setup
  File "/.virtualenvs/api/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/setuptools/__init__.py", line 2, in <module>
    # The Python Imaging Library.
  File "/.virtualenvs/api/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/setuptools/extension.py", line 2, in <module>
  File "/.virtualenvs/api/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/setuptools/dist.py", line 6, in <module>
  File "/.virtualenvs/api/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/setuptools/command/sdist.py", line 5, in <module>
  File "/.virtualenvs/api/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 2623, in <module>
    if not len(req.specs):
  File "/.virtualenvs/api/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 679, in subscribe
    `requirements` must be a string or a (possibly-nested) sequence
  File "/.virtualenvs/api/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 2623, in <lambda>
    if not len(req.specs):
  File "/.virtualenvs/api/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 2172, in activate
    return pv
  File "/.virtualenvs/api/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 1790, in declare_namespace
    module.__path__ = []; _set_parent_ns(packageName)
  File "/.virtualenvs/api/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 1761, in _handle_ns

  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/pkgutil.py", line 238, in load_module
    mod = imp.load_module(fullname, self.file, self.filename, self.etc)
  File "/package_name/__init__.py", line 2, in <module>
    import flask
  File "/.virtualenvs/api/lib/python2.7/site-packages/flask/exthook.py", line 86, in load_module
    raise ImportError('No module named %s' % fullname)
ImportError: No module named flask 
```

（我编辑了文件夹）

我想这是合乎逻辑的，因为 setuptools 正在尝试导入我的包，它 import `packagename/__init__.py`，`import flask`在它有机会安装它之前有这个。

问题是，我需要这个`import flask`来`__init__.py`创建数据库。

你会推荐什么？

谢谢！

chx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T16:48:58.153

我个人不喜欢`python setup.py develop`，你试过吗？

```
% pip install -e . 
```

当前目录是您所在的目录`setup.py`。它类似于`develop`但将安装所有必需的软件包。

# sql-server-2008 - SQL 2008 批量插入和可变长度记录

> ID：12178453
> 
> 赞同：0
> 
> 时间：2012-08-29T12:53:45.303
> 
> 标签：sql-server-2008, csv, import

我在使用 2008 和批量插入时遇到问题。我无法让它处理可变长度记录（特别是标题）。

给定以下文件行：

* * *

*   1,2,3,4,5,6,7,9,10
*   1,2,3,4,5,6,7,9,10,1,2,3,4,5,6,7,9,10
*   1,2,3,4,5,6,7,9,10,1,2,3,4,5,6,7,9,10
*   1,2,3,4,5,6,7,9,10,1,2,3,4,5,6,7,9,10
*   1,2,3,4,5,6,7,9,10,1,2,3,4,5,6,7,9,10
*   1,2,3,4,5,6,7,9,10,1,2,3,4,5,6,7,9,10
*   1,2,3,4,5,6,7,9,10,1,2,3,4,5,6,7,9,10
*   1,2,3,4,5,6,7,9,10,1,2,3,4,5,6,7,9,10
*   1,2,3,4,5,6,7,9,10,1,2,3,4,5,6,7,9,10
*   1,2,3,4,5,6,7,9,10,1,2,3,4,5,6,7,9,10

以下不应该做一些有用的事情，比如导入数据吗？而不是返回一个空表，或者如果 FirstRow 小于 2 则返回错误？

我不记得导入和 SQL 2000 有这么多问题。

* * *

```
 drop table #data

   create table #data
   (    
    a int null, b int null
    ,c int null, d int null
    ,e int null, f int null
    ,g int null, h int null
    ,i int null, j int null
    ,k int null, l int null
    ,m int null, n int null
    ,o int null, p int null
    ,q int null, r int null
    ,s int null, t int null
   ) 
   truncate table #data

   bulk insert #data 
   from 'd:\temp\data.txt'
   WITH(
     TABLOCK
    ,CODEPAGE='RAW'
    ,DATAFILETYPE='char'
    ,FIELDTERMINATOR=','
    ,ROWTERMINATOR='\r\n'
    ,FIRSTROW=2
    )

   select * from #data 
```

忘了提一下，我试过 SSIS 但没有区别……显然我可能使用了错误的组件。

哦，我可以在那里得到 99%，批量插入除了第二行之外的所有内容:(但这对任何人都没有用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:21:15.393

您可以使用 DTS 向导

很简单，dts路径在这里给出

[http://sqlcopy.blogspot.in/2012/07/bulk-sql-to-sql-sql-to-csv-csv-to-sql.html](http://sqlcopy.blogspot.in/2012/07/bulk-sql-to-sql-sql-to-csv-csv-to-sql.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:35:29.490

您可以使用`SQL Server Integration Service (SSIS)`而不是使用批量复制将文本文件转换为 sql server 表。

# regex - 处理 R 中的字符串 - “Word 格式”列表

> ID：12178457
> 
> 赞同：0
> 
> 时间：2012-08-29T12:53:59.250
> 
> 标签：regex, r, plyr

除了少数例外，人们会在 Word (.doc) 文档中找到物种列表（尤其是鸟类），而且它们的结构通常以一种对任何类型的数据分析都无用的方式进行构建。

列表将是这样的，带有空格和其他所有内容：它包括分类（科）和具有通用和科学名称的物种。

# 数据

```
1 STRUTHIONIDAE (1)
Common Ostrich Struthio camelus

2 DIOMEDEIDAE (5 – 1 + 1)

++Northern Royal Albatross Diomedea sanfordi

Black-browed Albatross Thalassarche melanophris

Shy Albatross Thalassarche cauta

Grey-headed Albatross Thalassarche chrysostoma

Atlantic Yellow-nosed Albatross Thalassarche chlororhynchos

3 Procellaridae (11 – 1 + 1)

Southern Giant Petrel Macronectes giganteus

Pintado Petrel Daption capense

Great-winged Petrel Pterodroma macroptera

Soft-plumaged Petrel Pterodroma mollis

Antarctic Prion Pachyptila desolata

White-chinned Petrel Procellaria aequinoctialis

++Spectacled Petrel Procellaria conspicillata

Cory's Shearwater Calonectris [diomedea] borealis

Great Shearwater Puffinus gravis

Sooty Shearwater Puffinus griseus

Manx Shearwater Puffinus puffinus

4 HYDROBATIDAE (3)

Wilson's Storm-Petrel Oceanites oceanicus

British Storm-Petrel Hydrobates pelagicus

Leach's Storm-Petrel Oceanodroma leucorhoa 
```

像这样的列表是技术报告、地理分布设计、区域保护状况、摘要等信息的非凡来源。这对于很少可用或发表的地区特别感兴趣（上面的例子是鸟类列表的一部分来自 www.birdsangola.org 的安哥拉）。如果格式正确，数据将得到更好的使用。数据框将是对数据进行任何后续分析的良好候选者。

我想将上面的列表转换为可用的东西，提取物种通用名、学名和分类科。data.frame 将是一个很好的、自然的候选者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:32:06.673

### 在运行此代码之前，将上面的数据复制到剪贴板。

# 代码：

```
library(stringr)
# Read from clipboard (blank.lines.skip = T)
orig.list <- read.delim2('clipboard', header = F, stringsAsFactors = F)
l.species <- data.frame()
for(i in 1:nrow(orig.list)) {
  tmp.string <- unlist(str_extract_all(orig.list[i, ], "[A-Za-z]+"))
  l.species[i, 1] <- ifelse(length(tmp.string) == 1, tmp.string,
                            paste(tmp.string[1:(length(tmp.string)-2)],
                                  collapse = ' '))
  l.species[i, 2] <- paste(tmp.string[(length(tmp.string) - 1) : length(tmp.string)],
                           collapse = ' ')
  l.species[i, 3]<-ifelse(length(tmp.string) == 1, 1, 0)
}
names(l.species) <- c('common name', 'species', 'is.family')
taxon.family <- toupper(subset(l.species, is.family == 1,
                               select = species)$species)
rows.family <- as.numeric(row.names(subset(l.species, is.family == 1)))
l.species$family <- rep(taxon.family, times = diff(c(rows.family,
                                                     nrow(l.species)+1)))
l.spec.family <- subset(l.species, is.family == 0, select = -is.family) 
```

# 结果对象：

```
> head(l.spec.family)                            
                      common name                     species        family
2                  Common Ostrich            Struthio camelus STRUTHIONIDAE
4        Northern Royal Albatross           Diomedea sanfordi   DIOMEDEIDAE
5          Black browed Albatross    Thalassarche melanophris   DIOMEDEIDAE
6                   Shy Albatross          Thalassarche cauta   DIOMEDEIDAE
7           Grey headed Albatross    Thalassarche chrysostoma   DIOMEDEIDAE
8 Atlantic Yellow nosed Albatross Thalassarche chlororhynchos   DIOMEDEIDAE 
```

# 总结（包含 941 个物种的整个数据集）

```
library(plyr)
summary.nesp <- ddply(l.spec.family, .(family), summarise,
                      prop_esp = length(family)/nrow(*all.data*)*100)
top.summary.nesp <- head(summary.nesp[order(summary.nesp$prop_esp, decreasing = T),], 6)

> top.summary.nesp
          family prop_esp
79     SYLVIIDAE 8.076514
1   ACCIPITRIDAE 5.419766
48    PASSERIDAE 5.100956
24   ESTRILDIDAE 4.250797
83      TURDIDAE 3.613177
44 NECTARINIIDAE 3.506908 
```

# objective-c - UILocalNotification 和 UIDatePicker 不同的时间？

> ID：12178463
> 
> 赞同：1
> 
> 时间：2012-08-29T12:54:31.030
> 
> 标签：objective-c

我正在尝试设置警报时间，用户从`UIDatePicker`

从选择器显示的时间是：`value: 2012-08-29 12:46:48 +0000`但我从选择器中选择的时间是：`today- 3:46 pm`。我不知道为什么。

无论如何，然后我将那个 NSDate 发送给`UILocalNotification`，那不是开火。我的目标是用户可以根据他的时区设置时间，然后将该时间发送到通知。而已 。

我该怎么做，为什么我的选择器时间有差异？

多谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:07:54.573

这是因为`NSDate`不包括时区信息，所以无论何时打印一个`NSDate`对象，它都会以 UTC 显示时间。但是，如果您将其放入`UILocalNotification`并提供正确的时区，则通知将正确触发。

# linux - 在自动 ftp 脚本中通过管道将 stderr 传输到 syslog

> ID：12178466
> 
> 赞同：3
> 
> 时间：2012-08-29T12:54:42.420
> 
> 标签：linux, bash, pipe, syslog

我正在使用简单的脚本来自动化 ftp。脚本如下所示：

```
ftp -nv $FTP_HOST<<END_FTP
user $FTP_USER $FTP_PASS
binary
mkdir $REMOTE_DIR
cd $REMOTE_DIR
lcd $LOCAL
put $FILE
bye
END_FTP 
```

但我想将 STDERR 传送到系统日志，将 STDOUT 传送到日志文件。通常我会做这样的事情：`ftp -nv $FTP_HOST 1>>ftp.log | logger<<END_FTP`但在这种情况下，由于`<<END_FTP`. 我应该如何正确地使脚本正常工作？请注意，我只想重定向脚本内 FTP 命令的输出，而不是整个脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:15:05.797

这可以在不使用临时文件进行错误输出的情况下工作。将`2>&1`错误输出发送到标准输出的去向——即管道。标准输出的`>>`变化——现在是文件——而不改变标准错误的变化。所以，错误去`logger`和输出去`ftp.log`。

```
ftp -nv $FTPHOST <<END_FTP 2>&1 >> ftp.log | logger
user $FTP_USER $FTP_PASS
binary
mkdir $REMOTE_DIR
cd $REMOTE_DIR
lcd $LOCAL
put $FILE
bye
END_FTP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:00:39.203

怎么样：

```
 exec > mylogfile; exec 2> >(logger -t myftpscript) 
```

在你面前的 ftp 脚本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T20:26:40.683

执行此 I/O 重定向的另一种方法是使用`{`...`}`操作，因此：

```
{
ftp -nv $FTPHOST <<END_FTP >> ftp.log
user $FTP_USER $FTP_PASS
binary
mkdir $REMOTE_DIR
cd $REMOTE_DIR
lcd $LOCAL
put $FILE
bye
END_FTP
# Optionally other commands here...stderr will go to logger too
} 2>&1 | logger 
```

当多个命令（但不是所有命令）需要相同的 I/O 重定向时，这通常是最佳机制。

不过，在上下文中，我认为这个解决方案是最好的（但这是别人的答案，不是我的）：

```
ftp -nv $FTPHOST <<END_FTP 2>&1 >> ftp.log | logger
...
END_FTP 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T20:54:14.120

为什么不创建一个[netrc](http://linux.about.com/library/cmd/blcmdl5_netrc.htm)文件并让它登录并为您放置文件。

netrc文件将*允许*您登录并允许您定义一个*init*宏，该宏将创建所需的目录并将您想要的文件放在那里。大多数 ftp 命令允许您指定要使用的*netrc*文件，因此您可以将各种*netrc*文件用于各种目的。

这是一个名为的示例*netrc*文件`my_netrc`：

```
machine ftp_host
user ftp_user
password swordfish
macrodef init
binary
mkdir my_dir
cd my_dir
put my_file
bye 
```

然后，您可以这样做：

```
$ ftp -v -Nmy_netrc $FTPHOST 2>&1 >> ftp.log | logger 
```

# php - PHP 按比例调整大小

> ID：12178482
> 
> 赞同：-1
> 
> 时间：2012-08-29T12:55:31.217
> 
> 标签：php, upload

> **可能重复：**
> [计算图像大小比例以调整大小](https://stackoverflow.com/questions/6594089/calculating-image-size-ratio-for-resizing)

所以我有一个简单的上传脚本来调整上传图片的大小，我想强制宽度大小，让高度自动成比例。

这是我的上传脚本：

```
if (isset($_POST['upload'])) {
        $dirupload = "../images/";
        $dirupload = $dirupload . basename( $_FILES['image-upload']['name']);
        $useless = $_POST['useless'];
        $imageupload = ($_FILES['image-upload']['name']);
        $uploadedfileupload = $_FILES['image-upload']['tmp_name'];
        $uploadedfiletypeupload = $_FILES['image-upload']['type']; 

        $query_add="SELECT * FROM produits ORDER BY position";
        $result_add=mysql_query($query_add);
        $num_add=mysql_num_rows($result_add);
        $add_add=$num_add+1;

        if (!($uploadedfiletypeupload =="image/pjpeg" OR $uploadedfiletypeupload =="image/jpeg" OR $uploadedfiletypeupload =="image/jpg")){
            echo "L'image doit être en .jpg ou .jpeg";
        }else if (move_uploaded_file($_FILES['image-upload']['tmp_name'], $dirupload)){     
            $sql="INSERT INTO produits (position) VALUES ('$add_add')";
            if (!mysql_query($sql,$con)){
                die('Error: ' . mysql_error());
            }       

            $newnameupload = "../images/produit" . mysql_insert_id() . ".jpg";
            rename ("../images/$imageupload","$newnameupload");    
            $orig_imageupload = imagecreatefromjpeg("../image/$newnameupload");
            $sm_imageupload = imagecreatetruecolor(274,219);
            imagecopyresampled($sm_imageupload,$orig_imageupload,0,0,0,0,274,219,imagesx($orig_imageupload),imagesy($orig_imageupload));
            imagejpeg($sm_imageupload, $newnameupload, 100);

        }else{
            echo "Un probleme est survenue";
        }
    } 
```

关于试图让它发挥作用的任何想法？（是的，我现在确实在脚本中设置了高度）

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:00:48.120

我认为，最好的方法是使用一些图像处理库。因为它是一种*裁剪和调整大小的*选项。有时，如果不进行裁剪，图像就无法按比例缩小到所需的大小。

看一眼：

*   **[phpThumb](http://phpthumb.sourceforge.net/)**
*   **[宽幅图像](http://wideimage.sourceforge.net/)**

它们都具有您需要的内置功能，并且非常友好和灵活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:06:10.533

计算宽度到高度因子，如

`$factor = $height /$width;`

然后

```
$newHeight = $newWidth * $factor; 
```

# google-apps-script - 如何根据谷歌电子表格中的另一个单元格设置单元格的背景颜色？

> ID：12178488
> 
> 赞同：1
> 
> 时间：2012-08-29T12:55:51.683
> 
> 标签：google-apps-script, google-sheets, background-color

我想根据另一个单元格的背景颜色设置一个单元格的背景颜色。

我有一张包含天数和相应工作日的表格作为文本。在条件格式的帮助下，我能够将所有周末的背景颜色设置为灰色。但现在我想将相应日期的背景颜色也设置为灰色。

例如，我将 A 行中的范围命名为 days，将 B 行中的范围命名为 weekdays：

```
row A: day1, day2, day3, day4, day5, day6, day7
row B: Mon, Tue, Wed, Thu, Fri, Sat, Sun 
```

Sat 和 Sun 单元格的背景为灰色。

我试图创建一个脚本，指示 B 行中单元格的背景颜色是否为灰色，并将 A 行中的相同单元格也设置为背景颜色灰色。我知道我必须使用函数`getBackgroundColor`and `setBackgroundColor`，但我不知道如何从一个单元格转到另一个单元格。以及如何在另一行中设置相同的单元格？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-30T12:31:40.070

我的范围总是从 D2 开始，这就是我在某些时候使用硬编码数字的原因。我更喜欢比较日期而不是颜色。所以这是我的解决方案。

```
function colorWeekends() {

       var getlastcolumn = SpreadsheetApp.getActiveSpreadsheet().getLastColumn();  

      for (var i = 4; i <= getlastcolumn; ++i) {
        var activecell = SpreadsheetApp.getActiveSheet().getRange(2, i);
        var text =activecell.getValue();

        if (text == "Sun" || text == "Sat") {
          var column = activecell.getColumnIndex();
          var row = activecell.getRowIndex();
          var lastrow = SpreadsheetApp.getActiveSheet().getLastRow(); 
          var range = SpreadsheetApp.getActiveSheet().getRange(1, column, lastrow);
          SpreadsheetApp.getActive().setActiveRange(range).setBackgroundColor("#efefef");
        }

      }

    } 
```

# c# - Base64 编码字节数组的有效方法？

> ID：12178495
> 
> 赞同：55
> 
> 时间：2012-08-29T12:56:24.290
> 
> 标签：c#, .net

我有一个`byte[]`并且我正在寻找对它进行 base64 编码的最有效方法。

问题是内置的 .Net 方法`Convert.FromBase64CharArray`需要 a`char[]`作为输入，将 my 转换`byte[]`为 a`char[]`只是为了将其再次转换为 base64 编码数组似乎很愚蠢。

有没有更直接的方法呢？

[[编辑：]] 我将解释我想要更好地实现的目标 - 我有一个`byte[]`并且我需要返回一个新的 base64 编码`byte[]`

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2012-08-29T12:58:13.637

**字节[] -> 字符串：** 使用 [system.convert.tobase64string](http://msdn.microsoft.com/en-us/library/system.convert.tobase64string.aspx)

```
Convert.ToBase64String(byte[] data) 
```

**字符串 -> 字节[]：** 使用 [system.convert.frombase64string](http://msdn.microsoft.com/en-us/library/system.convert.frombase64string.aspx)

```
Convert.FromBase64String(string data) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-29T12:58:50.233

Base64 是一种以文本形式（作为字符串）表示字节的方法。所以不存在 Base64 编码的字节 [] 这样的东西。您将拥有一个*base64 编码的字符串*，您可以将其*解码*回`byte[]`.

但是，如果您*想*最终得到一个字节数组，您可以采用 base64 编码的字符串并将其转换为字节数组，例如：

```
string base64String = Convert.ToBase64String(bytes);
byte[] stringBytes = Encoding.ASCII.GetBytes(base64String); 
```

然而，这没有任何意义，因为将 byte[] 表示为 byte[] 的最佳方式是 byte[] 本身 :)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-29T12:02:02.057

这是将 base64 直接编码为字节数组的代码（经测试执行 +-10% 的 .Net 实现，但分配了一半的内存）：

```
 static public void testBase64EncodeToBuffer()
    {
        for (int i = 1; i < 200; ++i)
        {
            // prep test data
            byte[] testData = new byte[i];
            for (int j = 0; j < i; ++j)
                testData[j] = (byte)(j ^ i);

            // test
            testBase64(testData);
        }
    }

    static void testBase64(byte[] data)
    {
        if (!appendBase64(data, 0, data.Length, false).SequenceEqual(System.Text.Encoding.ASCII.GetBytes(Convert.ToBase64String(data)))) throw new Exception("Base 64 encoding failed");
    }

    static public byte[] appendBase64(byte[] data
                              , int offset
                              , int size
                              , bool addLineBreaks = false)
    {
        byte[] buffer;
        int bufferPos = 0;
        int requiredSize = (4 * ((size + 2) / 3));
        // size/76*2 for 2 line break characters    
        if (addLineBreaks) requiredSize += requiredSize + (requiredSize / 38);

        buffer = new byte[requiredSize];

        UInt32 octet_a;
        UInt32 octet_b;
        UInt32 octet_c;
        UInt32 triple;
        int lineCount = 0;
        int sizeMod = size - (size % 3);
        // adding all data triplets
        for (; offset < sizeMod;)
        {
            octet_a = data[offset++];
            octet_b = data[offset++];
            octet_c = data[offset++];

            triple = (octet_a << 0x10) + (octet_b << 0x08) + octet_c;

            buffer[bufferPos++] = base64EncodingTable[(triple >> 3 * 6) & 0x3F];
            buffer[bufferPos++] = base64EncodingTable[(triple >> 2 * 6) & 0x3F];
            buffer[bufferPos++] = base64EncodingTable[(triple >> 1 * 6) & 0x3F];
            buffer[bufferPos++] = base64EncodingTable[(triple >> 0 * 6) & 0x3F];
            if (addLineBreaks)
            {
                if (++lineCount == 19)
                {
                    buffer[bufferPos++] = 13;
                    buffer[bufferPos++] = 10;
                    lineCount = 0;
                }
            }
        }

        // last bytes
        if (sizeMod < size)
        {
            octet_a = offset < size ? data[offset++] : (UInt32)0;
            octet_b = offset < size ? data[offset++] : (UInt32)0;
            octet_c = (UInt32)0; // last character is definitely padded

            triple = (octet_a << 0x10) + (octet_b << 0x08) + octet_c;

            buffer[bufferPos++] = base64EncodingTable[(triple >> 3 * 6) & 0x3F];
            buffer[bufferPos++] = base64EncodingTable[(triple >> 2 * 6) & 0x3F];
            buffer[bufferPos++] = base64EncodingTable[(triple >> 1 * 6) & 0x3F];
            buffer[bufferPos++] = base64EncodingTable[(triple >> 0 * 6) & 0x3F];

            // add padding '='
            sizeMod = size % 3;
            // last character is definitely padded
            buffer[bufferPos - 1] = (byte)'=';
            if (sizeMod == 1) buffer[bufferPos - 2] = (byte)'=';
        }
        return buffer;
    } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-29T13:08:53.337

```
byte[] base64EncodedStringBytes = Encoding.ASCII.GetBytes(Convert.ToBase64String(binaryData)) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-29T13:08:43.783

根据您的编辑和评论..这就是您所追求的吗？

```
byte[] newByteArray = UTF8Encoding.UTF8.GetBytes(Convert.ToBase64String(currentByteArray)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T13:02:16.107

您可以使用 String Convert.ToBase64String(byte[]) 将字节数组编码为 base64 字符串，然后使用 Byte[] Convert.FromBase64String(string) 将生成的字符串转换回字节数组。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-01T07:23:05.623

将图像从字节检索到 base64 字符串....

模型属性：

```
 public byte[] NomineePhoto { get; set; }

    public string NomineePhoneInBase64Str 
    {
        get {
            if (NomineePhoto == null)
                return "";

            return $"data:image/png;base64,{Convert.ToBase64String(NomineePhoto)}";
        } 
    } 
```

鉴于：

```
 <img style="height:50px;width:50px" src="@item.NomineePhoneInBase64Str" /> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-01-12T13:02:16.473

```
 public void ProcessRequest(HttpContext context)
    {
        string constring = ConfigurationManager.ConnectionStrings["SQL_Connection_String"].ConnectionString;
        SqlConnection conn = new SqlConnection(constring);
        conn.Open();
        SqlCommand cmd = new SqlCommand("select image1 from TestGo where TestId=1", conn);
        SqlDataReader dr = cmd.ExecuteReader();
        dr.Read();
        MemoryStream str = new MemoryStream();

        context.Response.Clear();
        Byte[] bytes = (Byte[])dr[0];
        string d = System.Text.Encoding.Default.GetString(bytes);
        byte[] bytes2 = Convert.FromBase64String(d);
        //context.Response.Write(d);
        Image img = Image.FromStream(new MemoryStream(bytes2));
        img.Save(context.Response.OutputStream, ImageFormat.Png);
        context.Response.Flush();
        str.WriteTo(context.Response.OutputStream);
        str.Dispose();
        str.Close();
        conn.Close();
        context.Response.End();
    } 
```

# facebook - 如何清除facebook流缓存

> ID：12178497
> 
> 赞同：1
> 
> 时间：2012-08-29T12:56:28.440
> 
> 标签：facebook, caching

我正在使用 facebook`publish_stream`方法在 facebook 用户时间轴上发布提要。该帖子包含图像 URL 和标题以及一些描述。然而，发布的图像可能会在以后更改，但该更改无法反映在 Facebook 方面，因为他们已经缓存了图像。

所以我想知道如何清除发布流上的 facebook 缓存，以便他们可以在用户时间轴上显示最新图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:04:00.167

一旦图像在 Facebook 上发布，FB 将始终显示缓存版本。但是，如果您想更新新帖子的图像，请尝试运行[调试工具](https://developers.facebook.com/tools/debug)的 URL以更新 Facebook 的缓存。任何使用此图片的现有帖子都不会更新。

这是为了防止人们在共享内容后更改内容 - 否则它不会代表用户最初共享的内容。这将是垃圾邮件发送者很容易滥用的东西。

# haskell - Haskell 布尔函数实现

> ID：12178504
> 
> 赞同：1
> 
> 时间：2012-08-29T12:56:50.917
> 
> 标签：haskell, boolean, existential-type

我正在尝试解决以下问题——给定所有选择器（e^i_n）和一些布尔函数（`{f_1, f_2, f_n}`）枚举闭包中 n 个参数的所有函数（在 [f_1,f_2,..f_n] 中）。

所以，我实现了 BooleanFunctionClass 和存在的 BooleanFunction 类型。他们是 Haskell 的反对派精神吗？

```
class BooleanFunctionClass a where
  arity :: a -> Int

instance BooleanFunctionClass Bool where
  arity _ = 0

instance BooleanFunctionClass a => BooleanFunctionClass (Bool -> a) where
    arity f =  arity  (f True) + 1

data BooleanFunction = forall  a. (BooleanFunctionClass a) => BooleanFunction a String
instance Show BooleanFunction where
  show (BooleanFunction _ str) = show str 
```

但我不知道如何实现选择器（n 个参数的函数，返回第 k 个）。我想要`selector :: Int -> Int -> BooleanFunction`。有什么建议么？

PS。对不起。我不知道，如何在 Markdown 中插入 TeX。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:39:25.030

我不确定您要实现的确切目标，但是如果您希望在编译时检查 arity，则列表可能无法完成这项工作（正如您在评论中所建议的那样）。

您将需要元组或类似的东西。处理可变大小元组的最好方法是 Template Haskell。此外[，TupleTH](http://hackage.haskell.org/packages/archive/tuple-th/0.2.4/doc/html/TupleTH.html)已经为您完成了很多关于以类型安全的方式处理元组的工作。

# html - IE 上的 webkit 动画

> ID：12178511
> 
> 赞同：0
> 
> 时间：2012-08-29T12:57:16.693
> 
> 标签：html, css

我为我的图像控件创建了以下发光效果，但它不适用于 IE。我怎样才能让它在IE9上运行？或任何替代方案？

```
@-webkit-keyframes redPulse {
from { background-color: #FF5959; -webkit-box-shadow: 0 0 40px #FF5959; }
50% { background-color: #FD9FA2; -webkit-box-shadow: 0 0 40px #FD9FA2; }
to { background-color: #FF5959; -webkit-box-shadow: 0 0 40px #FF5959; }
}

.red{
-webkit-animation-name: redPulse;
-webkit-animation-duration: 2s;
-webkit-animation-iteration-count: infinite;
width:200px;
padding-top:0px;
margin-top:0px;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:00:23.927

仍然不支持

> Internet Explorer 尚不支持@keyframes 规则或动画属性。
> 
> Firefox 需要前缀 -moz-，Chrome 和 Safari 需要前缀 -webkit-，Opera 需要前缀 -o-。

来自：[http ://www.w3schools.com/css3/css3_animations.asp](http://www.w3schools.com/css3/css3_animations.asp)

**upd** 也许它可以帮助你使用一些 jquery [http://placenamehere.com/article/384/css3boxshadowininternetexplorerblurshadow/](http://placenamehere.com/article/384/css3boxshadowininternetexplorerblurshadow/)

# java - JPanel 如何从一组颜色中显示不同的颜色？

> ID：12178514
> 
> 赞同：4
> 
> 时间：2012-08-29T12:57:25.430
> 
> 标签：java, arrays, swing, colors, jpanel

问题是当我将正方形 JPanel 的背景颜色设置为 square.setBackground(colors[j]) 时，正方形仅绘制颜色列表中的第一种颜色，而不显示其他 3 种颜色。这是我的代码：

```
import java.awt.*;
import java.util.*;
import javax.swing.*;
import java.awt.*;

@SuppressWarnings({ "unused", "serial" })

public class RegionPartition extends JFrame
{
    JLayeredPane layeredPane;
    JPanel regionBoard;
    JLabel regionPiece;

    private static int DELAY = 200;

    private Color[] colors = new Color[]{Color.PINK, Color.GREEN, Color.BLACK, Color.RED};

    public RegionPartition()
    {
        Dimension boardSize = new Dimension(500, 500);

        //  Use a Layered Pane for this this application
        layeredPane = new JLayeredPane();
        getContentPane().add(layeredPane);
        layeredPane.setPreferredSize(boardSize);

        regionBoard = new JPanel();

        layeredPane.add(regionBoard, JLayeredPane.DEFAULT_LAYER);

        regionBoard.setLayout( new GridLayout(4, 4) );

        regionBoard.setPreferredSize( boardSize );
        regionBoard.setBounds(0, 0, boardSize.width, boardSize.height);

        Random random = new Random();

        for (int i = 0; i < 16; i++) {          
            JPanel square = new JPanel(new BorderLayout());
            square.setBorder(BorderFactory.createLineBorder(Color.black));
            regionBoard.add( square );  

            square.setBackground(Color.green);

            int j=0;

            square.setBackground(colors[j]);

            j++;
        }
    }

    {
        JPanel panel = new JPanel()  
        {  
            Clients[] c = new Clients[128];

            Random random = new Random();

            private final int SIZE = 450;
            private int DELAY = 9999999;
            public void paintComponent (Graphics g)
            {
                super.paintComponent(g);

                for (int i=0; i<c.length; i++)
                {
                    int x = ( int ) ( random.nextFloat() * SIZE ) + 10;
                    int y = ( int ) ( random.nextFloat() * SIZE ) + 10;

                    g.drawOval( x, y, 10, 10 );
                    g.fillOval(x, y, 10, 10);
                }

                for (int j=0; j<DELAY; j++)
                {
                    repaint();
                }
            }
        };  

        panel.setOpaque(false);  

        //Set the glass pane in the JFrame  
        setGlassPane(panel);  

        //Display the panel  

        panel.setVisible(true);  
    }

    public static void main(String[] args)
    {
        JFrame frame = new RegionPartition();

        frame.setDefaultCloseOperation(DISPOSE_ON_CLOSE );
        frame.pack();
        frame.setResizable(true);
        frame.setLocationRelativeTo( null );
        frame.setVisible(true);

    }

    protected void paintComponent(Graphics g)
    {
        // TODO Auto-generated method stub
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T13:01:13.727

那是因为您总是在每次迭代时将 j 设置为 0：

```
 int j=0;

    square.setBackground(colors[j]);

    j++; 
```

您可能想要将 j 更改为 i 或执行嵌套循环，这取决于您在这里真正想要做什么。

如果你想让所有 16 个方块都以类似网格的方式具有所有四种颜色，你可能希望将循环更改为：

```
 for (int i = 0; i < 16; i++) {          
        JPanel square = new JPanel(new GridLayout(2,2));
        square.setBorder(BorderFactory.createLineBorder(Color.black));
        regionBoard.add( square );  

        for(int j=0; j<4; ++j){
          JPanel insideSquare = new JPanel();
          insideSquare.setBackground(colors[j]);
          square.add(insideSquare);
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T13:10:31.947

`color`因为您的数组中只有 4 种颜色，但您的循环索引超过了这个，您可以使用：

```
square.setBackground(colors[ i % colors.length]); 
```

交替你的方块的颜色。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T13:01:30.577

您在 for 循环的范围内进行实例化`int j`，因此它的值不会在多次迭代中保留。您应该在代码中的某个位置声明它，以使其作用于整个 for 循环。

```
int j = 0;
<for loop>
    square.setBackground(colors[j]);
    j++;
<end for> 
```

但是，在这种情况下，您`j`的目的是用作数组索引。完全删除会更正确，而是执行以下操作：`i``i``j`

```
 square.setBackground(colors[i]); 
```

# php - Symfony2 Sensio GeneratorBundle：在骨架中添加换行符

> ID：12178533
> 
> 赞同：0
> 
> 时间：2012-08-29T12:58:13.853
> 
> 标签：php, symfony, code-generation, newline

我创建了自己的 GeneratorBundle（基于 SensioGeneratorBundle）来创建基于 Entity 的 FormType 类文件。它按照应有的方式生成文件，但问题是在 for 循环内部生成实体的字段，它将所有代码放在同一行。我希望在 for 循环中生成的代码位于每个字段的新行上。我尝试添加`\n`或`< br/>`，但没有奏效。

命令 ：

```
php app/console kuma:generate:adminlist Bundle:Entity
```

命令类：

```
 class GenerateAdminListCommand extends GenerateDoctrineCommand
    {   

        protected function execute(InputInterface $input, OutputInterface $output)
        {

            $entity = $input->getOption('entity');
            list($bundle, $entity) = $this->parseShortcutNotation($entity);

            $entityClass = $this->getContainer()->get('doctrine')->getEntityNamespace($bundle) . '\\' . $entity;
            $metadata = $this->getEntityMetadata($entityClass);

            $admintypeGenerator = $this->getAdminListTypeGenerator();
            $admintypeGenerator->generate($bundle, $entity, $metadata[0]); 
```

我的发电机类：

```
 class AdminListTypeGenerator extends \Sensio\Bundle\GeneratorBundle\Generator\Generator
    {

        public function generate($bundle, $entity, $metadata)
        {

            $parameters = array('namespace' => $bundle->getNamespace(), 'bundle' => $bundle, 'entity_class' => $entityClass, 'fields' => $this->getFieldsFromMetadata($metadata));

            $this->renderFile($this->skeletonDir, 'EntityAdminListType.php', $dirPath . '/' . $entity . 'AdminListType.php', $parameters);
        } 
```

扩展了以下类：

```
 class Generator
{
    protected function render($skeletonDir, $template, $parameters)
    {
        $twig = new \Twig_Environment(new \Twig_Loader_Filesystem($skeletonDir), array(
            'debug'            => true,
            'cache'            => false,
            'strict_variables' => true,
            'autoescape'       => false,
        ));

        return $twig->render($template, $parameters);
    }

    protected function renderFile($skeletonDir, $template, $target, $parameters)
    {
        if (!is_dir(dirname($target))) {
            mkdir(dirname($target), 0777, true);
        }

        return file_put_contents($target, $this->render($skeletonDir, $template, $parameters));
    }
} 
```

这些字段是从元数据中提取的：

```
 public static function getFieldsFromMetadata(ClassMetadata $metadata)
    {
        $fields = (array) $metadata->fieldNames;

        // Remove the primary key field if it's not managed manually
        if (!$metadata->isIdentifierNatural()) {
            $fields = array_diff($fields, $metadata->identifier);
        }

        foreach ($metadata->associationMappings as $fieldName => $relation) {
            if ($relation['type'] !== ClassMetadata::ONE_TO_MANY) {
                $fields[] = $fieldName;
            }
        }

        return $fields;
    } 
```

在我的骨架文件中：

```
 public function buildForm(FormBuilder $builder, array $options) 
        {
            {%- for field in fields %}
                $builder->add('{{ field }}');
            {%- endfor %}
        } 
```

这就是根据上面的骨架生成的 buildForm() 方法的外观：

```
 public function buildForm(FormBuilder $builder, array $options) 
    {   $builder->add('ip');    $builder->add('timestamp'); $builder->add('firstname'); $builder->add('lastname');  } 
```

所以我想`$builder->add('{{ field }}');`在每次新迭代中创建一个新行。结果应如下所示：

```
 public function buildForm(FormBuilder $builder, array $options) 
    {           
        $builder->add('ip');
        $builder->add('timestamp');
        $builder->add('firstname');
        $builder->add('lastname');          
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:22:43.373

好的，似乎我在同事的帮助下找到了解决方案。

问题是树枝语法中的“-”：

```
{%- for field in fields %} 
```

那个减号意味着它必须放在一条线上。删除减号就可以了。

```
 public function buildForm(FormBuilder $builder, array $options) 
    {
        {% for field in fields %}
        $builder->add('{{ field }}');
        {% endfor %}
    } 
```

现在它呈现：

```
 public function buildForm(FormBuilder $builder, array $options) 
    {
                $builder->add('ip');
                $builder->add('timestamp');
                $builder->add('firstname');
                $builder->add('lastname');
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:06:52.673

你能试一下吗

```
 $builder->add('ip') .'<br/>'. $builder->add('timestamp'); 
```

# sql-server - SQL Server 从字符串中获取中文文本

> ID：12178537
> 
> 赞同：1
> 
> 时间：2012-08-29T12:58:21.623
> 
> 标签：sql-server, tsql

我有一列包含英文和中文的零件名称。

例如“带垫圈的螺丝-玻璃板螺丝”

如何从 SQL Server 中的该字符串中提取中文名称？甚至可能吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T13:07:48.883

假设中文*总是*在最后

```
DECLARE @orig nvarchar(100) = N'Screw with washer-玻璃板螺丝'

SELECT REPLACE(@orig, REPLACE(CAST(@orig AS varchar(100)), '?', ''), '') 
```

# shell - 如何使用管道中断程序

> ID：12178539
> 
> 赞同：0
> 
> 时间：2012-08-29T12:58:30.527
> 
> 标签：shell

我对 unix 命名管道有疑问。假设我们有一个程序 A 将他的输出写入管道（考虑 P），另一个程序（考虑 B）使用这个管道作为输入文件。问题是当程序 B 失败时如何从外部中断程序 A。情况类似于这个伪脚本：

```
mkfifo P
A -output P &
B -input P &
if ( $! != 0 ) //somehow interrupt A 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:04:15.017

保留PID：

```
mkfifo P
A -output P &
pidA=$!
B -input P
if ( $? != 0 )
    kill $pidA 
```

`$!`扩展为最近执行的后台命令的 PID。

`$?`扩展为退出代码。

请注意，要使其正常工作，您不能`B`在后台运行，因为您无法获取它的退出代码。

如果您仍想在后台运行它，请使用：

```
( B -input P || kill $pidA ) & 
```

# ruby - 使用外部 ruby 库时的常见错误处理方式

> ID：12178545
> 
> 赞同：1
> 
> 时间：2012-08-29T12:58:53.947
> 
> 标签：ruby, exception, error-handling

我正在创建一个 ruby​​ 库（但实际上我是一名 java 开发人员），任何人都可以使用它.

在 java 中，异常非常简单，您可以定义“抛出”声明，以便 lib 的用户必须捕获异常。

红宝石中最好的方法是什么？

问候 && tia noircc

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T13:09:47.837

在红宝石中，你`raise`是个例外。异常可以是一个类、一个类的一个实例，或者一个类和一个字符串，并且通常该类是 的后代[`StandardError`](http://www.ruby-doc.org/core-1.9.3/StandardError.html)，它是 的后代[`Exception`](http://www.ruby-doc.org/core-1.9.3/Exception.html)。要捕获异常，请执行以下操作：

```
begin
   raise StandardError, "weeee, exception!"
rescue StandardError => e # or => e for a general rescue
   puts "Exception Message: #{e.message}"
end 
```

通常，异常处理将在库之外完成，因此您只需要担心`raise`线路。 `throw`并且`catch`仍然存在于 ruby​​ 中，但`raise`它是异常处理的首选方法。

# c++ - 确定函数签名

> ID：12178546
> 
> 赞同：0
> 
> 时间：2012-08-29T12:59:05.007
> 
> 标签：c++, c, windows, visual-c++

给定一个函数地址，如何确定它的签名？

```
    DWORD funcAddr = 0x63001023; // 任意地址
    char[MAX] 签名 = ? // 可以设计什么算法？  

```

其原因如下：

```
有一个exe说Calc.exe，一旦进程在PC“A”上启动

我的 exe 拦截进程的创建并将信号发送到 pc“B”

相同的 calc.exe 开始的地方。

然后用户每次点击、移动、

假设加法的内部过程从 pc“A”传递到 pc“B”，其中

它正在虚拟化。所以操作函数参数的所有资源

出现在电脑“B”上，我只需要一个完美的签名......

因此，即使是从根本上挂钩未知 dll 的危险活动也变得“有点”安全......

```

请不要建议任何第三方库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:07:50.060

你不能这样做。

但是，您可以[`boost::function`](http://www.boost.org/doc/libs/1_51_0/doc/html/function.html)使用相同的签名存储并制作`map`函数地址和 boost::function 对象

在程序中存储函数指针而不是原始地址更安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:50:17.040

嗯，第一件事——这并不容易。你可能会放弃。

您需要使用[DbgHelp 函数](http://msdn.microsoft.com/en-gb/library/ms679291%28v=vs.85%29.aspx)，尤其是在**Symbol Handler**下。您需要确定调用约定、参数和返回类型。需要担心它需要的类型（UDF）。然后创建这些类型，将它们传递给函数，并使用适当的调用约定调用函数。

`RunDLL32.EXE`是加载函数、查找函数~~及其类型~~并进行调用的工具之一。尝试在命令提示符下运行以下命令：

`rundll32 user32.dll LockWorkStation`

阅读一些关于 API Hooking 的文章，特别是 Jeffery Ritcher 的一篇文章。

# android - 如何将数据导入 Android 的 SQLite 的最佳方法

> ID：12178547
> 
> 赞同：2
> 
> 时间：2012-08-29T12:59:06.723
> 
> 标签：android, sqlite, import

我会问你的意见，将数据导入 SQLite 数据库的最佳方法是什么。

1.  创建 SQL 转储并将其放入 assert 文件夹并使用 rawQuery() 方法执行。
2.  每个表创建独立的和从 csv/xml 文档中读取的数据
3.  使用 InputStream/OutputStream 复制完整的数据库

    *   如果数据大小约为 1MB / 2000 条记录，并且更少
    *   如果数据大小 >= 1MB

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:12:19.677

复制原始 SQLite db 文件是最简单的方法。只需确保文件与 Android 上的 SQLite 版本兼容。[您还可以从SQLiteMan](http://sqliteman.com/)等第三方工具打开这些文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T20:50:44.387

将 SQLite 数据库复制到您的 assets 文件夹（您甚至可以 gz 它以在某些设备上保留宝贵的空间，您可以使用“GZIPInputStream”解压缩它。这种方法的唯一缺点是 assets 文件夹中的文件不能大于几个 MiB（我认为是 3，但可能因设备而异）。要使用更大的文件，请将数据库文件（或压缩后的 gz 文件）的扩展名更改为“.mp3”，您可以使用大于3 MiB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:04:56.993

我经常创建一个[JSON](http://en.wikipedia.org/wiki/JSON)文件并将其放在`assets`目录中。然后我使用像[GSON](http://code.google.com/p/google-gson/)这样的库将内容提取到模型类中，这样我就可以以面向对象的方式访问数据。然后，您可以使用通过模型类访问的数据插入/更新数据库

# javascript - 将文本更改为驼峰式大小写

> ID：12178548
> 
> 赞同：2
> 
> 时间：2012-08-29T12:59:12.497
> 
> 标签：javascript

我正在使用 Javascript 填充联系表格，但是由于添加方式，其中一个字符串以大写形式出现，即 SCHOOLNAME

```
<script type="text/javascript">
  var userName = '<ecom:PersonFirstName runat="server" /> <ecom:PersonLastName runat="server" />';
$('div.contact-form-name input').val(userName);

var school = '<acc:AccountName runat="server" />';
$('div.contact-form-school input').val(school);

</script> 
```

是否可以将“学校”的案例更改为骆驼案例，无论最初如何找到，学校，学校，学校。

如果名称为“一号学校”应显示为“一号学校”，这也应适用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:09:21.783

您要匹配和替换的是：

*   第一个字母应该是大写的
*   该单词的其余部分应为小写

“单词”可以定义为前面有空格（或没有空格）的非空格字符。

*   `^|\s+`表示：字符串或空格的开头
*   `\S`表示：一个非空白字符
*   `\S*`表示：任意数量的非空白字符

通过对它们进行分组，您可以使用传递给函数的参数：

```
"scHOOL NUMBER ONE".replace(
  /(^|\s+)(\S)(\S*)/g,
  function(match, whitespace, firstLetter, rest) {
    return whitespace + firstLetter.toUpperCase() + rest.toLowerCase();
  }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:16:40.357

作为参考，另一种方法可以做到这一点。

```
 <script type="text/javascript">

                $(document).ready(function () {

                    String.prototype.toTitleCase = function () {
                        return this.replace(/\w\S*/g, function (text) {
                            return text.charAt(0).toUpperCase() + text.substr(1).toLowerCase();
                        });
                    };

                var userName = 'BOB IS A PERSON';
                userName = userName.toTitleCase();
                $('div.contact-form-name input').val(userName);
             });

                </script> 
```

# linux - htop 显示 Eclipse 的多个进程

> ID：12178556
> 
> 赞同：1
> 
> 时间：2012-08-29T12:59:29.883
> 
> 标签：linux, eclipse

我刚刚开始从 windows 迁移到 linux (RedHat 5) 进行开发。我得到了一个具有旧版本 Eclipse (Helios) 和 JDK 1.6_22 的 VM（配置有 2 个处理器）。

我注意到 - 使用 htop - 当我启动 Eclipse 并运行它时，有几个进程 (11) 存在并持续一整天。

问题是 - 这是否正常，是否应该为 eclipse 激活许多进程。它们都有不同的 PID，但运行相同的命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:02:39.110

这里有一个明确的[答案](http://ubuntuforums.org/showthread.php?p=7799667)。简而言之，它显示了由主进程产生的线程。

# windows - Windows PowerShell 导入模块

> ID：12178557
> 
> 赞同：3
> 
> 时间：2012-08-29T12:59:34.503
> 
> 标签：windows, shell, powershell, group-policy, import-module

在我的计算机上的 PowerShell 命令

```
import-module GroupPolicy 
```

失败了

```
import-module <<<<  GroupPolicy
+ CategoryInfo          : ResourceUnavailable: (GroupPolicy:String) [Import-Module],     FileNotFoundException
+ FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand 
```

我找不到这个问题的解决方案，根据[微软](http://technet.microsoft.com/en-us/library/ee461027.aspx)的说法，这是要走的路。

背景资料：

一位同事在他的 Windows 7 32 位上开发了一个 Windows PowerShell 脚本。他安装了 RSAT。此脚本中的第一个命令是“import-module GroupPolicy”。在他的 Win7x86 上，从命令行和作为一个整体运行脚本时，该命令工作正常。

我正在尝试编写他的脚本，但我使用的是 Windows 7 64 位系统。我还安装了 RSAT (Windows6.1-KB958830-x64-RefreshPkg.msu)。但是在我的机器上，命令失败，如上所述。我找不到关于 C:\Windows\System32\WindowsPowerShell\v1.0\Modules 内容的任何重要区别

谷歌搜索也没有多大帮助。有关于 PowerShellV1 和在 Win7x64 上运行 PowerShells x86 版本的帖子，但都没有帮助解决这个问题。

帮助将不胜感激。

问候，T。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T22:07:49.847

您提到*安装*RSAT，但没有*启用*它的任何功能。所以我怀疑你在这方面没有做任何事情......？

如果是这种情况，请进入控制面板 -> 程序和功能 -> 打开或关闭 Windows 功能：

![在此处输入图像描述](../Images/4665a69417f4ebb84129e51ee7b4218b.png)

我怀疑启用标记选项应该可以完成这项工作......

# .htaccess - Magento 和 Apache - 缓存设置似乎被忽略了

> ID：12178558
> 
> 赞同：1
> 
> 时间：2012-08-29T12:59:36.677
> 
> 标签：.htaccess, magento, caching

我正在运行一个 Magento 实例，并且正在尝试为不会经常更改的内容设置缓存规则。我将我想要的规则添加到位于 Magento 根文件夹中的 .htaccess 文件（规则在帖子的底部），但它们似乎被忽略了。当我检查 http 标头时，这就是我所看到的：

```
Pragma: no-cache, no-cache
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0, private, no-cache, no-store, proxy-revalidate, no-transform 
```

显然，我在这里做错了什么。有什么我应该检查的，看看谁在强制执行“无缓存”策略，在哪里？提前感谢您的答案。

**添加到 .htaccess 文件的规则**

```
# Turn on Expires and set default to 0
ExpiresActive On
ExpiresDefault A0

# Set up caching on media files for 1 year (forever?)
<FilesMatch "\.(flv|ico|pdf|avi|mov|ppt|doc|mp3|wmv|wav)$">
    ExpiresDefault A29030400
    Header append Cache-Control "public"
</FilesMatch>

# Set up caching on media files for 2 weeks
<FilesMatch "\.(gif|jpg|jpeg|png|swf)$">
    ExpiresDefault A1209600
    Header append Cache-Control "public"
</FilesMatch>

# Set up 1 week caching on commonly updated files
<FilesMatch "\.(xml|txt|html|js|css)$">
    ExpiresDefault A604800
    Header append Cache-Control "proxy-revalidate"
</FilesMatch>

# Force no caching for dynamic files
<FilesMatch "\.(php|cgi|pl|htm)$">
    ExpiresActive Off
    Header set Cache-Control "private, no-cache, no-store, proxy-revalidate, no-transform"
    Header set Pragma "no-cache"
</FilesMatch> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:41:32.627

你知道 /media 中有一个 htaccess 吗？（面部植物...）

如果您这样做，那么您可能需要考虑将“静态”内容放在一个单独的子域中，即无 cookie 的子域。

在 Magento 的后端转到 system->config->general->web 并输入[http://static.yourdomain.com/](http://static.yourdomain.com/)

现在您可以将 .htaccess 指令移动到您的原始 httpd.conf 文件中（这在理论上更快）并删除/停放 .htaccess 文件。

现在将 cookie 域（在“会话 Cookie 管理”中）设置为 www.yourdomain.com - 现在 static.yourdomain.com 上不会有任何 cookie，因此 Web 服务器应该更快捷。如果这些图像没有通过，那么您可能需要在您的 DNS 'A' 记录上设置一个通配符，以便任何非 www 地址都通过同一个框。

您现在可以微调 /media 中的 .htaccess 文件，并将这些指令放入 static.yourdomain.com.conf

# regex - 用于查找自定义标签的正则表达式

> ID：12178560
> 
> 赞同：1
> 
> 时间：2012-08-29T12:59:39.573
> 
> 标签：regex

我正在尝试从文本中找到与某些自定义标签匹配的正则表达式。标签的格式始终为 [!--sometext--] 或 [!--sometext:param1--]、[!--sometext:param1:param2--]。我需要做的是分别获取“sometext”部分和可选参数作为“param1：param2”或“param1”和“param2”（没关系）。

我对没有参数的标签的方法是

`\[!--(.+?)--\]`

但是如何以优雅的方式匹配参数部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:05:18.537

**更新：**好的，第三次应该是魅力吧？;-) 这在示例 Perl 脚本中对我有用。

这应该可以做到（我假设一个与 Perl 兼容的 reg-ex ......你没有指定你正在用什么语言编写它）：

```
\[!--([^\]:]+):?([^\]-]+?)?--\] 
```

这里发生了什么？

1.  首先我们匹配`[!--`
2.  然后我们对任何不是 a`:`或 a的东西进行匹配（并捕获）`]`
3.  然后我们匹配一个可选的冒号
4.  然后我们有一个可选的非贪婪匹配（和捕获）任何不是 a`-`或 a的东西`]`（这应该一次捕获所有可选参数）
5.  然后我们通过匹配来结束它`--]`

您需要拆分可选参数`:`以捕捉可能有多个参数的情况。

# asp.net - MVC 4 用户身份验证

> ID：12178562
> 
> 赞同：0
> 
> 时间：2012-08-29T12:59:46.953
> 
> 标签：asp.net, c#-4.0, authentication, user-controls, asp.net-mvc-4

我想在我的 Web 项目上使用**用户身份验证。**验证身份后，他们可以看到网站。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:05:02.260

您必须使用**ASP.NET Forms 身份验证**和**Authorize**操作过滤器来实现您想要的。

# iphone - 在uiwebview中实现剪切、复制粘贴

> ID：12178563
> 
> 赞同：1
> 
> 时间：2012-08-29T12:59:49.230
> 
> 标签：iphone

我正在为 ipad 使用 uiwebview 实现一个文本编辑器。我正在使用一个简单的 javascript 来加粗斜体并在文本下划线。

`[webView stringByEvaluatingJavaScriptFromString:@"document.execCommand(\"Bold\")"];`

上面的代码用于使文本变为粗体。

现在我也想实现剪切、复制和粘贴。我正在使用此代码进行剪切复制和粘贴。

`[webView stringByEvaluatingJavaScriptFromString:@"document.execCommand(\"Cut\")"]; [webView stringByEvaluatingJavaScriptFromString:@"document.execCommand(\"Copy\")"]; [webView stringByEvaluatingJavaScriptFromString:@"document.execCommand(\"Paste\")"];` 但它不起作用。我使用了错误的命令参数还是有什么方法可以实现它？我知道有一个弹出菜单提供了所有这些功能，但我想禁用这个弹出菜单并想自己使用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:28:15.053

[在 UIWebView 中禁用用户选择](https://stackoverflow.com/questions/5995210/disabling-user-selection-in-uiwebview)

在这里你可以找到禁用复制过去的菜单项

谢谢

# sql - SQL GROUP BY 项目，价格递增

> ID：12178565
> 
> 赞同：2
> 
> 时间：2012-08-29T12:59:54.540
> 
> 标签：sql, dql

我正在尝试按项目对示例表进行分组，其中包含 0.25 的价格增量和数量的总和。

```
| item_id | qout | 数量 | --输出表--> | item_id | qout | 数量 |
|---------|-------|------| |---------|-------|------|
| 10 | 10.99 | 10 | | 10 | 10.00 | 20 |
| 10 | 10.00 | 20 | | 10 | 10.75 | 10 |
| 10 | 11.00 | 1 | | 10 | 11.00 | 1 |
| 10 | 11.27 | 5 | | 10 | 11.25 | 10 |
| 10 | 11.33 | 5 | | 10 | 11.50 | 10 |
| 10 | 11.50 | 10 |                      

* 注意 11.27 和 11.33 的两个引号是如何组合在一起的
  在输出表中输入 11.25

```

我不知道是否可以使用 SQL 来执行此操作。这最终将在 Doctrine2 DQL 中实现，但我应该能够轻松地将任何 SQL 移植到它。

我真的很想用 SQL 来做这件事。但如果不可能，我可能会想出一种方法来用算法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:29:59.483

这是一个[SQLFiddle 示例](http://sqlfiddle.com/#!2/237e0/5)

```
select item_id,
        floor(qoute)
        +(floor(floor((qoute-floor(qoute))*100)/25)*25)/100 
        as quote,
        sum(qty)
        from t
        group by floor(qoute)
        +(floor(floor((qoute-floor(qoute))*100)/25)*25)/100 
order by 1,2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:20:33.697

这是一种方法，使用 SQL Server 中的语法：

```
select item_id, floor(quote * 4.0)/4.0 as roundquote, sum(qty) as qty
from t
group by item_id, floor(quote * 4.0)
order by 1, 2 
```

这会将值乘以 4，截断为较小的整数，然后除以 4。这应该四舍五入到最接近的 $0.25。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:21:43.273

就像是：

```
select item_id, floor(quote*4)/4 as quote_band, sum(qty) from your_table group by item_id, round(quote*4)/4 
```

# c# - 以编程方式将行添加到 Linq-to-SQL 数据集

> ID：12178570
> 
> 赞同：4
> 
> 时间：2012-08-29T13:00:08.923
> 
> 标签：c#, asp.net, linq, linq-to-sql

假设我们为一个网格生成了这个链接到 sql 的数据集：

```
var query = from c in customers
                    orderby c.FirstName
                    select c;

Grid1.DataSet = query;
Grid1.DataBind(); 
```

生成此数据集后，我们需要以编程方式将“Vince Vaughn”添加到此数据集（目标是向此 linq-to-sql 数据集添加一行，以便从数据库中获取的值，以及以编程方式添加的 1 行，都出现在网格中）。

如何使用 C# 以编程方式完成此任务？（即以编程方式将 Vince Vaughn 的一行添加到数据集中）

```
CUSTOMERS TABLE
ID     FirstName    LastName    
1      John         Jones    
2      Sally        Smith 
```

环境：C#.NET 4.0

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T13:07:48.973

如果您的意思是实际将行添加到后端存储，并且假设`ID`是一个标识列并且您的模型已正确配置，您可以这样做。

```
using (var context =  new ...)
{
    context.customers.Add(
        new Customer { FirstName = "Vince", LastName = "Vaughn" });
    context.SubmitChanges();
} 
```

如果你只是想让文斯看起来好像他在列表中，你可以这样做

```
var query = customers.Concat(new Customer[]
    { 
        new Customer
            {
                ID = customers.Max(c => c.ID) + 1,
                FirstName = "Vince",
                LastName = "Vaughn"
            }
    }).OrderBy(c => c.FirstName); 
```

这会将文斯添加到列表中，而不会实际将他添加到存储中。

* * *

如果您只是想将一个或多个结果“欺骗”到数据库中的一个集合中，您可以连接一组兼容的匿名类型，就像这样......

```
var queryWithVince = query.Select(r = new 
                    { 
                        FirstName = r.FirstName, 
                        LastName = r.LastName
                    })
    .Concat( new []
        {
            new { FirstName = "Vince", LastName = "Vaughn" }
        }
    .OrderBy(p => p.FirstName); 
```

如果两个匿名类型的成员具有相同的属性名称和类型，则它们是兼容的。如果结果`query`是其他一些非匿名类型，您需要确保 linq 处理能够将这些结果与您的匿名添加相结合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:03:44.717

如果`Grid1.DataSet`是类型`IEnumerable<T>`而*不是*[DataSet](http://msdn.microsoft.com/en-us/library/system.data.dataset.aspx)类型，则没有太多选项

*   再次从数据库重新查询所有数据并将其重新分配给控件

*   缓存第一个查询数据`List<T>`，然后只查询“新”数据形成数据库并将其添加到绑定列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:06:37.097

我自己从未尝试过，但这可能会奏效。您可以使用 a`DataTable`作为存储库，[手动添加该行](http://msdn.microsoft.com/en-us/library/07wwak56.aspx)，然后将其用作`GridView`.

您可以使用此方法将 转换`Linq.DataContext` 为 a `DataTable`：

```
public DataTable ToDataTable(System.Data.Linq.DataContext ctx, object query)
{
     if (query == null)
     {
          throw new ArgumentNullException("query");
     }

     IDbCommand cmd = ctx.GetCommand(query as IQueryable);
     SqlDataAdapter adapter = new SqlDataAdapter();
     adapter.SelectCommand = (SqlCommand)cmd;
     DataTable dt = new DataTable("sd");

     try
     {
          cmd.Connection.Open();
          adapter.FillSchema(dt, SchemaType.Source); 
          adapter.Fill(dt);
     }
     finally
     {
          cmd.Connection.Close();
     }
     return dt;
} 
```

[http://www.thejackol.com/2009/06/02/get-linq-to-sql-results-into-a-datatable/](http://www.thejackol.com/2009/06/02/get-linq-to-sql-results-into-a-datatable/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T13:07:01.530

```
 customers.Add(new Customer {FirstName = "Vaughn" LastName="Vince"});

you can also add a new datarow to your dataset

DataRow row  = ds.Table["customer"].NewRow();
row["FirstName"] = "Vince";
row["LastName"] = "VMDFJM"; 
```

# c++ - 有没有一种方法可以防止以前运行的值存储在 txt 文件中（防止覆盖）？

> ID：12178571
> 
> 赞同：2
> 
> 时间：2012-08-29T13:00:09.557
> 
> 标签：c++, file-io

我是 C++ 的初学者（目前正在处理文件），我面临一个困难，因为我以前的运行值是`overwritten`. 我正在寻找解决此问题的方法。

我想保存至少五个可能添加到我的程序中的输入.....例如名字..我询问名字..然后存储它

```
 .....
  ofstream f("f.txt");
  cin>>name
  f<<name;
   .... 
```

每次运行后会发生什么情况是在上一次运行中输入的名称被覆盖......有没有办法防止这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T13:17:28.173

您可能希望*附加*到文件中，请参阅[文档](http://en.cppreference.com/w/cpp/io/basic_ofstream/basic_ofstream)：

```
 std::ofstream f( "f.txt", std::ios::app ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T14:33:23.203

您也可以使用`std::ios::ate`它导致所有写入添加到文件末尾

```
std::ofstream f( "f.txt", std::ios::app | std::ios::ate ) 
```

# iphone - 如何使用 Obj-C 解析 iPhone 中的 SAP 业务连接器链接？

> ID：12178574
> 
> 赞同：0
> 
> 时间：2012-08-29T13:00:14.643
> 
> 标签：iphone, objective-c, xml-parsing, sap

我有 SAP 业务连接器 URL，它在浏览器中以 XML 格式打开。当我在浏览器中粘贴 SAP BU URL 时，弹出窗口会打开询问用户 ID 和密码。然后在输入密码后它会显示 XML 格式的数据。我知道如何在 iPhone 中解析 XML 文件，但该方法不适用于此 SAP url。

使用 xcode、objective C 从 iPHone 中具有用户 ID 和密码的此类 url 获取数据所需的步骤是什么？

用代码更新

```
- (void)applicationDidFinishLaunching:(UIApplication *)application {

self.myURL = [NSURL URLWithString:@"https://connect- test.com....."];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:self.myURL
                                                        cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
                                                    timeoutInterval:60];

[[NSURLConnection alloc] initWithRequest:request delegate:self];

// Configure and show the window
[window addSubview:[navigationController view]];
[window makeKeyAndVisible];
}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge: (NSURLAuthenticationChallenge *)challenge {

NSLog(@"received authentication challenge");

NSURLCredential *newCredential;
newCredential=[NSURLCredential credentialWithUser:@"User"
                                          password:@"pwd"
                                        persistence:NSURLCredentialPersistenceForSession];

[[challenge sender] useCredential:newCredential  forAuthenticationChallenge:challenge];

NSLog(@"responded to authentication challenge");

}
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse  *)response {
self.ZSETIK = [[NSMutableData alloc] init];
NSLog(@"%@  ZSETIK",ZSETIK);

}

 - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
 [ZSETIK appendData:data];

}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
[ZSETIK release];
[connection release];
// [textView setString:@"Unable to fetch data"];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
{
//NSURL *myURL = [NSURL URLWithString:@"https://connect- test.hettich.com/invoke/ZSETIK/main? vendor=su&material=100200300&purchaseorderno=4502892791"];

NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithData:self.ZSETIK];
//Initialize the delegate.
XMLParser *parser = [[XMLParser alloc] initXMLParser];

//Set delegate
[xmlParser setDelegate:parser];

//Start parsing the XML file.
BOOL success = [xmlParser parse];

if(success)
    NSLog(@"No Errors");
else
    NSLog(@"Error Error Error!!!");

NSLog(@"Succeeded! Received %d bytes of data",[ZSETIK
                                               length]);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:20:35.617

使用异步 NSURLConnection，在这种情况下将调用 NSURLConnectionDelegate，提供用户名和密码，您将获得 xml 响应。

```
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {

  NSLog(@"received authentication challenge");

  NSURLCredential *newCredential;
  newCredential=[NSURLCredential credentialWithUser:@"root"
             password:@"rootpassword"
             persistence:NSURLCredentialPersistenceForSession];

  NSLog(@"credential created");

  [[challenge sender] useCredential:newCredential forAuthenticationChallenge:challenge];

  NSLog(@"responded to authentication challenge");

} 
```

# asp.net - Telerik ASP.net AJAX RadComboBox 在下拉菜单打开时保持焦点

> ID：12178576
> 
> 赞同：0
> 
> 时间：2012-08-29T13:00:18.207
> 
> 标签：asp.net, telerik, rad-controls, radcombobox

我们有一个 Telerik ASP.net AJAX RadComboBox，CheckBoxes 设置为 true。选中复选框后，下拉菜单保持打开状态，因此您可以检查更多，这很好。问题是，当您在打开下拉列表时单击文本框时，输入光标会在获得焦点时短暂出现在文本框中，但在组合框下拉列表关闭时文本框失去焦点时会清除。在输入之前必须再次单击文本框。或者，必须先单击组合框下拉按钮以关闭下拉菜单，然后再单击文本框以转移焦点。

当单击另一个控件时，是否有某种方法可以防止组合框保持焦点？我已尝试从控件中删除除以下之外的所有属性，并且问题行为仍然存在。

```
<telerik:RadComboBox ID="ToVehicleSelector" runat="server" CheckBoxes="True">
</telerik:RadComboBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:31:40.063

[我在 Telerik 论坛上](http://www.telerik.com/community/forums/aspnet-ajax/combobox/radcombobox-focus-retained-when-clicking-other-control.aspx#2254011)收到了反馈，这些反馈让我走上了正确的道路，并帮助我找到了解决问题的方法。我在文本框中添加了一个点击处理程序，如下所示。

```
<script language="javascript" type="text/javascript">
  function ForceFocus(textbox) {
    $get(textbox).focus();
  }
</script>

<asp:TextBox ID="SubjectTextBox" runat="server" Width="300" onkeydown="OnMessageKeyDown()"
  onkeyup="OnMessageKeyUp()" onclick="ForceFocus('SubjectTextBox')">
</asp:TextBox> 
```

# wcf - svcutil.exe 未为 minOccurs=0 生成指定字段

> ID：12178577
> 
> 赞同：10
> 
> 时间：2012-08-29T13:00:19.750
> 
> 标签：wcf, command-line, xsd, wsdl, svcutil.exe

使用 svcutil.exe 从本地文件系统中的文件上的 wsdl + xsd 生成代码。以前用过wsdl.exe。当字段是可选的（即 minOccurs="0"）时，如果类型是值类型（如 int 或 enum），则 wsdl.exe 用于生成指定的布尔值。

根据文档，当使用 XmlSerializer 调用时，svcutil 也应该这样做，但在我的情况下它没有。像这样称呼它：

> svcutil WebServiceA.wsdl *.xsd /noConfig /serializer:XmlSerializer

为什么没有生成指定的字段？我不想将 nillable 添加到 wsdl 中的字段，因为这意味着不同的东西，并且需要在 Java 后端进行更改。

重现的示例代码：WebServiceA.wsdl：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<definitions targetNamespace="http://metric_web_service.uis.component.company.com/"
        name="WebServiceA"
        xmlns:tns="http://metric_web_service.uis.component.company.com/"
    xmlns:ows="http://component_web_service.uis.component.company.com/"
        xmlns="http://schemas.xmlsoap.org/wsdl/"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/">
  <types>
    <xsd:schema>
      <xsd:import namespace="http://metric_web_service.uis.component.company.com/" schemaLocation="WebServiceA.xsd"/>
    </xsd:schema>
  </types>
  <message name="GetDataRequest">
    <part name="parameters" element="tns:getDataRequest" />
  </message>
  <message name="GetDataResponse">
    <part name="parameters" element="tns:getDataResponse" />
  </message>
  <portType name="WebServiceAPortType">
    <operation name="getData">
      <input message="tns:GetDataRequest" />
      <output message="tns:GetDataResponse" />
    </operation>
  </portType>
  <binding name="WebServiceABinding" type="tns:WebServiceAPortType">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http" />
    <operation name="getData">
      <soap:operation soapAction="getData" />
      <input>
        <soap:body use="literal" />
      </input>
      <output>
        <soap:body use="literal" />
      </output>
    </operation>
  </binding>
  <service name="WebServiceA">
    <port name="WebServiceAPort" binding="tns:WebServiceABinding">
      <soap:address location="http://localhost:8080/web_services/WebServiceA?wsdl" />
    </port>
  </service>
</definitions> 
```

WebServiceA.xsd：

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema"
        xmlns:tns="http://metric_web_service.uis.component.company.com/"
    xmlns:ows="http://component_web_service.uis.component.company.com/"
        targetNamespace="http://metric_web_service.uis.component.company.com/"
        elementFormDefault="qualified" attributeFormDefault="qualified">

    <!--<import namespace="http://component_web_service.uis.component.company.com/" schemaLocation="ComponentWebService.xsd"/>-->

    <element name="getDataRequest" type="tns:GetDataRequestElement"/>
    <element name="getDataResponse" type="tns:GetDataResponseElement"/>

  <complexType name="GetDataRequestElement">
        <sequence>
            <element name="id" type="string" minOccurs="1" maxOccurs="1"/>
            <element name="dataType" type="tns:DataType" minOccurs="0" maxOccurs="1"/>
        </sequence>
    </complexType>

    <complexType name="GetDataResponseElement">
        <sequence>
            <element name="data" type="tns:DataCollection" minOccurs="1" maxOccurs="1"/>
        </sequence>
    </complexType>
    <complexType name="DataCollection">
        <sequence>
            <element name="data" type="tns:Data" minOccurs="0" maxOccurs="unbounded"/>
        </sequence>
    </complexType>
    <complexType name="Data">
        <sequence>
            <element name="id" type="string" minOccurs="1" maxOccurs="1"/>
            <element name="DataType" type="tns:DataType" minOccurs="1" maxOccurs="1"/>
            <element name="value" type="double" minOccurs="1" maxOccurs="1"/>
        </sequence>
    </complexType>

    <simpleType name="DataType">
        <restriction base="string">
            <enumeration value="TYPE_A"/>
            <enumeration value="TYPE_B"/>
    </restriction>
    </simpleType>

</schema> 
```

生成如下代码。请注意，getDataRequest 类不包含任何可选（指定）字段，因此不可能在没有 dataType 的情况下执行“getData”调用。这是 svcutil.exe 中的另一个错误吗？

```
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
[System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Advanced)]
[System.ServiceModel.MessageContractAttribute(WrapperName="getDataRequest", WrapperNamespace="http://metric_web_service.uis.component.company.com/", IsWrapped=true)]
public partial class getDataRequest
{

    [System.ServiceModel.MessageBodyMemberAttribute(Namespace="http://metric_web_service.uis.component.company.com/", Order=0)]
    public string id;

    [System.ServiceModel.MessageBodyMemberAttribute(Namespace="http://metric_web_service.uis.component.company.com/", Order=1)]
    public DataType dataType;

    public getDataRequest()
    {
    }

    public getDataRequest(string id, DataType dataType)
    {
        this.id = id;
        this.dataType = dataType;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T03:37:33.163

你试过 wscfblue 吗？我发现它很有用。

[http://wscfblue.codeplex.com/](http://wscfblue.codeplex.com/)

# java - Restful API codeigniter - JAVA问题

> ID：12178584
> 
> 赞同：7
> 
> 时间：2012-08-29T12:21:18.453
> 
> 标签：java, api, codeigniter

我们使用[Phil Sturgeons 为 codeigniter 构建了我们的 API 很酷的 Restful API 框架](http://philsturgeon.co.uk/blog/2009/06/REST-implementation-for-CodeIgniter)，该框架已准备好生产并用作我们移动应用程序实施的一部分。

在 Java 中使用 API 时遇到问题

```
httpConnection = (HttpConnection) Connector.open(url, Connector.READ, true);
// Set content type by given parameter......
httpConnection.setRequestProperty("Accept", contentType);
httpConnection.setRequestProperty("User-Agent", "Profile/MIDP-2.0 Configuration/FCLDC-1.0");
httpConnection.setRequestProperty("Content-Type", contentType);
httpConnection.setRequestProperty("TK-API-KEY", UrlFactory.TK_API_KEY);

// httpConnection.setRequestProperty("Model",
// StyleUtil.getDeviceModel());
if (httpConnection.getResponseCode() == 302)
{
  String redirectUrl =  httpConnection.getHeaderField("Location");
  httpConnection = (HttpConnection) Connector.open(redirectUrl, Connector.READ_WRITE, true);
}

if (httpConnection.getResponseCode() == HttpConnection.HTTP_OK)
{
  io = httpConnection.openInputStream();

  int ch;
  while ((ch = io.read()) != -1)
  {
    bo.write(ch);
  }

} 
```

`httpConnection.getResponseCode()`无法获取状态码并返回格式错误的异常。我们的 API 服务器是 NGINX。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:45:33.130

如果未正确设置标头字段，则会引发 MalformedException。请检查不同的标题以及不同的用户代理。尝试使用 httpConnection.setDoOutput(true);

# xml - 通过linq to xml获取子元素

> ID：12178585
> 
> 赞同：0
> 
> 时间：2012-08-29T13:00:37.410
> 
> 标签：xml, c#-4.0, linq-to-xml

如何从以下 xml 格式文件中获取子元素

```
<?xml version="1.0" encoding="UTF-8"?>
<UserMenu Type="Company">
  <li>Credit Card Details</li>
  <li>Account Details</li>
  <li>Disc Usage</li>
  <li>Billing</li>
</UserMenu> 
```

我想要输出为：

“信用卡详细信息”“帐户详细信息”“光盘使用情况”“计费”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:09:33.197

```
var doc = XDocument.Load(fileName);
var lis = (from e in doc.Descendants("li")
          where e.Parent.Attribute("Type").Value == "Company"
          select e.Value).ToArray(); 
```

# javascript - 谷歌分析事件跟踪

> ID：12178587
> 
> 赞同：5
> 
> 时间：2012-08-29T13:00:47.330
> 
> 标签：javascript, events, google-analytics, tracking

我正在尝试将 google 事件跟踪 api 实现到 html5 播放器中，但由于某种原因它不想工作。这就是我正在做的事情：

```
var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-myid-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com//u/ga_debug.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    if (typeof _gaq != undefined){
        _gaq.push(['_trackEvent', 'krusty-player', eventName, 'demo', 1]);
    } 
```

我从谷歌文档页面复制了代码，所以我想它必须是正确的。在开发人员控制台中，我没有看到代码运行时发生任何 HTTP 请求，但是当我这样做时：

```
console.log(_gaq.push(['_trackEvent', 'krusty-player', eventName])); 
```

每次调用这部分时，我都会得到一个计数器增加 +1。这里没有错误..

我也尝试使用：

```
_trackEvent('krusty-player', eventName); 
```

这将返回错误“_trackEvent 未定义”

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T16:13:43.450

您是在 localhost 还是 Intranet 上进行测试？有关详细信息，请参阅[未发送 Google Analytics GIF 请求](https://stackoverflow.com/questions/9738815/google-analytics-gif-request-not-sent/9741228#9741228)。
TLDR：默认情况下，不会为 localhost 服务器发出跟踪 GIF 请求。

关于`_trackEvent is not defined`： _trackEvent() 不是独立函数，需要通过 _gaq.push 调用

```
_gaq.push(['_trackEvent', category, action]) 
```

或通过 pageTracker 对象（旧样式，非异步分析）

```
pageTracker._trackEvent(category, action) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:10:31.923

将操作绑定到`_gaq.push`事件上。

像 ：

```
<span onClick="_gaq.push(['_trackEvent', EVENT_NAME, EVENT_ACTION, EVENT_DESCRIPTION]);">Click me</span> 
```

并用普通/动态生成的文本重命名大写名称，它应该可以工作。

# javascript - Javascript - 将时区添加到日期倒计时

> ID：12178590
> 
> 赞同：0
> 
> 时间：2012-08-29T13:00:52.520
> 
> 标签：javascript

我写了一个 JavaScript 倒计时时钟，这实际上是我的第一个，所以我不得不从网站上复制一些零碎的东西来帮助我，但它仍然有效。但我想知道如何在日期中添加时区？until 变量将时间倒计时到该日期和时间。

```
var until = new Date( 2012, 8 - 1, 29, 19, 0, 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:04:54.640

您可以使用[timezone-js](https://github.com/mde/timezone-js)库，示例用法：

```
var dt = new timezoneJS.Date(2008, 9, 31, 11, 45, 'America/Los_Angeles'); 
```

# c - C中输入的字符串列表

> ID：12178593
> 
> 赞同：0
> 
> 时间：2012-08-29T13:01:14.387
> 
> 标签：c, input

我想对字符串列表进行排序。函数的参数`qsort()`是一个 c[i] 的列表，定义如下：

```
 //N is the number of words
    int N;
    scanf("%d",&N);
    //each c[i] is a word 
    char **c;
    c = malloc(N*sizeof(char*));

    for(i = 0; i < N; i++)
    {
      char *temp[100];
      scanf("%s", &temp);
      c[i]=strdup(temp);
    } 
```

但是当我对列表进行排序时，结果是错误的。

正是为了调试，我添加了这个

```
for(i = 0; i < N; i++){
  j=compare (c[0],c[i]);
  printf("%d",j);
  printf("%s",c[i]);
} 
```

我的输入是 '4;a;b;c;d' 我得到 '0b-1c-1d1a'

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:10:04.477

这是不正确的：

```
char *temp[100];
scanf("%s", &temp); 
```

`temp``100`是一个未初始化的指针数组，`char*`没有存储 a `char[]`。改成：

```
char temp[100];
scanf("%99s", temp); /* Added maximum number of chars to prevent overrun. */ 
```

从你的评论：

```
int compare(const void* l, const void* r)
{
    return strcmp(l, r);
} 
```

这应该是：

```
int compare(const void* a1, const void* a2)
{
    const char** s1   = a1;
    const char** s2   = a2;
    return strcmp(*s1, *s2);
} 
```

来自 C99 标准第*7.20.5.2 节的 qsort 函数*：

> 数组的内容根据 compar 指向的比较函数按升序排序，该函数**使用两个指向被比较对象的参数调用。**如果认为第一个参数分别小于、等于或大于第二个参数，则该函数应返回一个小于、等于或大于零的整数。

这意味着`compare()`函数参数的类型是`char**`，因此需要在执行字符串比较之前取消引用。

例如，请参阅[http://ideone.com/rUG89](http://ideone.com/rUG89)。

# windows - WCF 和 Windows 服务通信

> ID：12178600
> 
> 赞同：0
> 
> 时间：2012-08-29T13:01:43.617
> 
> 标签：windows, wcf, service

请问，有人可以给我建议吗？我使用外部 WCF 客户端创建了实现端点网络管道的 WCF 库。我将 lib 放置在 Windows 服务中。但是我不知道如何在不使用 WCF 客户端-服务器机制的情况下从库中进行数据交换。如何在 Windows 服务中放置或获取正在运行的 WCF 服务的数据？例如，我想在 Eventlog 中注册 WCF 错误或为服务提供参数，以便为连接到 WCF 的客户端传输它们。

在我的项目中，我需要创建 Silverlight 或 WPF 客户端，以便在我的工厂中实时进行工业监控。为此，我想在我的 OPC 客户端上的 wcf 服务中使用双工通道

我的 Windows 服务项目中有两个对象。一个对象是 OPC 客户端和数据库客户端。如果我在代码中创建这个对象 - 一切都很好。另一个对象是带有 net.pipe 绑定的 WCF 服务库，用于到此服务的外部连接。好的。我在我的代码中定义：

```
// window service class   
 public partial class SyncSiemensService : ServiceBase
    {
        private OpcServiceClass opcServer = new OpcServiceClass();

        public SyncSiemensService()
        {
        InitializeComponent();
        }

    protected override void OnStart(string[] args)
    {
              // OPC client- database client object
              opcServer.Start();

             // WCF interface for external communication
             // with this windows service
              using (ServiceHost host = new ServiceHost(typeof(DuplexPipeWcfService)))
                         {
                             host.Open();
                             eventLog.WriteEntry("<Bla-Bla-Bla", EventLogEntryType.Information);
                         }
    }
} 
```

WCF 服务

```
 [OperationContract(IsOneWay = true)]
    void GetActValuesFromLine(string line); 
```

字符串行 - opc 对象的外部数据

和他的回调

```
public interface IDuplexPipeWcfServiceCallback
{
    [OperationContract(IsOneWay = true)]
    void ActualValuesUpdate(WcfDuplexActualValues value);
} 
```

但是我的出现中的“WcfDuplexActualValues 值” - 来自 OPC 对象的数据，用于 WCF 中的外部连接。现在我不知道，如何在不使用 OPC 对象和 WCF 服务库之间的客户端服务通信的情况下从 opc 对象中检索数据。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:15:50.370

您的 OnStart 方法会打开主机，然后立即再次将其关闭。

```
 public partial class SyncSiemensService : ServiceBase
    {
        private ServiceHost _host;
        private OpcServiceClass opcServer = new OpcServiceClass();

        public SyncSiemensService()
        {
        InitializeComponent();
        }

 protected override void OnStart(string[] args)
 {
          // OPC client- database client object
          opcServer.Start();

         // WCF interface for external communication
         // with this windows service
          _host = new ServiceHost(typeof(DuplexPipeWcfService)))

         _host.Open();
        eventLog.WriteEntry("<Bla-Bla-Bla", EventLogEntryType.Information);

 }

} 
```

您需要将其保持打开状态，并且仅在关闭服务时才将其丢弃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T16:22:26.590

我不是 100% 确定我正确理解了您的问题，但我认为您正在尝试在 OpcServiceClass 实例和 DuplexPipeWcfService 之间交换数据**而不**使用 WCF。

您可以通过自己创建实例来使用另一种方式来托管您的服务：

```
protected override void OnStart(string[] args)
 {
          // OPC client- database client object
          opcServer.Start();

          var serviceInstance = new DuplexPipeWcfService();
          _host = new ServiceHost(serviceInstance)

         _host.Open();
        eventLog.WriteEntry("<Bla-Bla-Bla", EventLogEntryType.Information);
 } 
```

现在您拥有两个实例，您可以通过传递引用在它们之间交换数据。例如，您可以更改 OpcServiceClass 的构造函数：

```
protected override void OnStart(string[] args)
 {
          var serviceInstance = new DuplexPipeWcfService();
          opcServer.Start(serviceInstance );

          _host = new ServiceHost(serviceInstance)

         _host.Open();
        eventLog.WriteEntry("<Bla-Bla-Bla", EventLogEntryType.Information);
 } 
```

您只需更改 OpcServiceClass.Start() 方法的签名即可获取 IDuplexPipeWcfServiceCallback 类型的对象。通过这种方式，您可以与 DuplexPipeWcfService 进行通信，但不会产生 WCF 开销。

像这样更改签名：

```
OpcServiceClass.Start(IDuplexPipeWcfServiceCallback wcfService) 
```

# python - 铁蟒中的数据表排序？

> ID：12178612
> 
> 赞同：0
> 
> 时间：2012-08-29T13:02:20.593
> 
> 标签：python, python-2.7, ironpython

我在铁蟒中有一个 dtdtable

```
 dttable = handler.GetDataTable(); 
```

我厌倦了为上表创建一个数据视图

```
 v=dttable.defaultview 
```

那么如何使用 Iron python 对这个 dttable 进行排序呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:42:21.480

```
dv = dttable.DefaultView
dv.Sort="TOP ASC"
dttable = dv.ToTable() 
```

我用上面的几行在 Iron python 中对数据表进行排序，效果很好。“Top”是列名，ASC 是按升序对表进行排序

# vba - VBA：LDAP搜索森林中的所有域

> ID：12178613
> 
> 赞同：1
> 
> 时间：2012-08-29T13:02:24.003
> 
> 标签：vba, dns, active-directory, subdomain

我有以下 VBA 代码，用于搜索特定用户并从 Active Directory 输出全名、电子邮件和部门：

```
 Public Type LDAPUserInfo
    FullName As String
    Email As String
    Department As String
    AccountStatus As String
 End Type

Function FindUser(ByVal username) As LDAPUserInfo
 On Error GoTo Err

 Dim objRoot As Variant
 Dim LDAPdomainName As String
 Dim cn As Variant
 Dim cmd As Variant
 Dim rs As Variant
 Dim LDAPUserInfo As LDAPUserInfo

 Set cn = CreateObject("ADODB.Connection")
 Set cmd = CreateObject("ADODB.Command")
 Set rs = CreateObject("ADODB.Recordset")

 Set objRoot = GetObject("LDAP://RootDSE")
 LDAPdomainName = objRoot.Get("defaultNamingContext") 'Contains the distinguished name for the domain of which this directory server is a member.
'http://msdn.microsoft.com/en-us/library/windows/desktop/ms684291(v=vs.85).aspx

 cn.Open "Provider=ADsDSOObject;"

 cmd.activeconnection = cn
 'cmd.commandtext = "SELECT ADsPath FROM 'LDAP://" & Domain & "' WHERE sAMAccountName = '" & UserName & "'"
 'To see all attributes names available, connect with Active Directory Explorer and add to Select.
 cmd.commandtext = "SELECT cn, mail, physicalDeliveryOfficeName, userAccountControl  FROM 'LDAP://" & LDAPdomainName & "' WHERE sAMAccountName = '" & username & "'"
 Set rs = cmd.Execute

    Debug.Print rs("cn") & " E-mail: " & rs("mail") & " Dept: " & rs("physicalDeliveryOfficeName")
    LDAPUserInfo.FullName = Nz(rs("cn"), "")
    LDAPUserInfo.Email = Nz(rs("mail"), "")
    LDAPUserInfo.Department = Nz(rs("physicalDeliveryOfficeName"), "")

   FindUser = LDAPUserInfo

If Not rs Is Nothing Then rs.Close
If Not cn Is Nothing Then cn.Close

Exit_Err:

 Set rs = Nothing
 Set cmd = Nothing
 Set cn = Nothing
 Set objRoot = Nothing
 Exit Function

Err:

 If Err <> 0 Then
    MsgBox "Error connecting to Active Directory Database: " & Err.Description & vbCrLf & _
            "User: " & username, , "Error: " & Err.Number
 Else
    If Not rs.BOF And Not rs.EOF Then
        rs.MoveFirst
        MsgBox rs(0)
    Else
        MsgBox "Not Found"
    End If
 End If
 Resume Exit_Err

End Function 
```

它适用于主域中的用户。有没有办法改变`LDAPdomainName`它可以在所有子域中搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:42:14.947

答案将根据您的特定林配置略有不同。

一般来说，如果你也想搜索子域，你可以要求 ADSI 做所谓的追逐推荐。如果您搜索 ADSI + 追逐推荐，您将获得大量点击...并且取决于您最终使用的 API，每个都有一个答案。一些信息在这里：[http ://technet.microsoft.com/en-us/library/cc978014.aspx](http://technet.microsoft.com/en-us/library/cc978014.aspx)

也就是说，有一些细微差别：

*   如果您有多个域，从命名空间的角度来看，您的林中的所有域都没有一个父域（例如：想象有一个具有 foo.com、bar.foo.com 和 blech.com 的林......没有一个涵盖所有内容的父级），那么您要么必须进行多次搜索，要么使用所谓的幻根控件（您可以在其中传递不存在的最顶层父级，指示 AD 搜索所有人）
*   请记住，此搜索将在您的整个森林中找到 DC……您追逐的每个域都有一个。如果您只搜索一组有限的属性，您可能希望访问全局目录服务器，它可以从该服务器提供有关您所有域的信息（即搜索速度更快，因为它都是本地的）。为此，您需要连接到全局编录端口，通常是 3268/3269（后者是 LDAPS）。

# java - Eclipse - Jasper 报告未编译 (java.lang.NoClassDefFoundError: org/apache/commons/digester/Digester)

> ID：12178615
> 
> 赞同：4
> 
> 时间：2012-08-29T13:02:25.723
> 
> 标签：java, eclipse, jasper-reports

我正在尝试通过 Eclipse ide 生成碧玉报告，但是当我执行以下代码行时：

```
jasperReport = JasperCompileManager.compileReport("reports/samplereport.jrxml"); 
```

我收到以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/digester/Digester
    at net.sf.jasperreports.engine.JasperCompileManager.compileReport(JasperCompileManager.java:146) 
```

我已将 apache 通用消化器 jar 添加为项目库，但似乎没有什么不同。注意：我来自 java 新手（即我有 .NET 背景），所以我很可能会做一些非常明显的事情！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T13:09:29.430

你可能会错过一些罐子。尝试将这些添加到任何版本。

jasperreports-.jar；
jasperreports-javaflow.jar；
commons-beanutils.jar；
commons-collections.jar；
commons-logging.jar；
commons-digester.jar

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-10T15:57:22.773

如果您的项目基于 maven，您可以将 Jasper 报告添加为 maven 依赖项，请参阅下面的示例代码片段。Jasper 报告会自动导入它需要正常工作的所有库。

```
...
<dependency>
    <groupId>net.sf.jasperreports</groupId>            
    <artifactId>jasperreports</artifactId>
    <version>6.4.1</version>
</dependency>
... 
```

# mysql - 在某些记录上显示可能连接的表

> ID：12178625
> 
> 赞同：0
> 
> 时间：2012-08-29T13:03:19.523
> 
> 标签：mysql, codeigniter

我有两张桌子

表一是文件清单

**文件：**

```
+-------------+---------------+
| document_ID | document_name |
+-------------+---------------+
|    1        |   test.pdf    |
+-------------+---------------+
|    2        |  other.pdf    |
+-------------+---------------+ 
```

表二是使用过该文档的用户列表。这是一个 1-1 的关系 - 即用户只会使用一次文档（或根本不使用）。

**文档用户：**

```
+-------------+---------------+-----------+---------------+
| document_ID | user_ID       | has_read  | (other stuff) |
+-------------+---------------+-----------+---------------+
|    1        |   5           |     1     |      stuff    |
+-------------+---------------+-----------+---------------+
|    1        |   7           |     1     |      stuff    |
+-------------+---------------+-----------+---------------+
|    2        |   5           |     1     |      stuff    |
+-------------+---------------+-----------+---------------+ 
```

当用户浏览列表时 - 我需要能够显示所有文档，以及他们是否可以访问它

因此，例如，上面示例中用户 5 的期望输出是；

```
+-------------+---------------+-----------+---------------+
| document_ID | document_name |  has_read | (other stuff) |
+-------------+---------------+-----------+---------------+
|    1        |   test.pdf    |     1     |      stuff    |
+-------------+---------------+-----------+---------------+
|    2        |  other.pdf    |     1     |      stuff    |
+-------------+---------------+-----------+---------------+ 
```

而用户 7 的期望输出是

```
+-------------+---------------+-----------+---------------+
| document_ID | document_name |  has_read | (other stuff) |
+-------------+---------------+-----------+---------------+
|    1        |   test.pdf    |     1     |   stuff       |
+-------------+---------------+-----------+---------------+
|    2        |  other.pdf    |           |               |
+-------------+---------------+-----------+---------------+ 
```

我尝试按照以下方式进行连接

```
$this->db->join('documents_users', 'documents_users.document_ID = documents.document_ID');
$this->db->where('documents_users.user_ID', '7');
return $this->get_all(); 
```

但这只会返回他们 has_read=1 的记录

我可以看到问题出在“where”命令上——但我不知道该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:26:59.783

您需要一个（左）外部联接，将过滤条件`user_ID`移动到联接条件而不是在`WHERE`子句中：

```
$this->db->join(
   'documents_users',
   'documents_users.document_ID = documents.document_ID
AND documents_users.user_ID = 7',
   'left'
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:07:47.650

你需要采取[STRAIGHT_JOIN](http://dev.mysql.com/doc/refman/5.5/en/join.html)：

```
SELECT a.document_ID, a.document_name, b.has_read,
FROM documents a 
     STRAIGHT_JOIN documents_users b
WHERE b.user_ID = 7; 
```

# iphone - UITextalignment 已弃用：您应该在 NSAttributedString 上使用 setTextAlignment:lineBreakMode:on

> ID：12178627
> 
> 赞同：1
> 
> 时间：2012-08-29T13:03:30.940
> 
> 标签：iphone, xcode, uilabel

我在我的 iPhone 应用程序中使用 OHAttributeLabel 但现在我收到警告

```
UITextAlignment is deprecated : You should use setTextAlignment:lineBreakMode:on your NSAttributedString instead 
```

请任何人建议我如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:41:54.330

尝试这个

```
[label setTextAlignment:NSTextAlignmentCenter]; 
```

这是工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:30:05.393

// 假设标签是 OHAttributedLabel 的 IBOutlet（子类哦 UILabel）

```
label.textAlignment = UITextAlignmentJustify; 
```

// 仅此而已，OHAttributedLabel 为您完成所有需要的工作！

# ruby - 在 Ruby 中，方法的参数列表中的符号“=>”是什么意思？

> ID：12178631
> 
> 赞同：3
> 
> 时间：2012-08-29T13:03:42.393
> 
> 标签：ruby, symbols

```
def wait_for_element_present(element)
    wait = Selenium::WebDriver::Wait.new(:timeout => 30);
    wait.until{driver.find_element(element)};
end 
```

请看一下上面的Ruby代码，我有两个问题：

(1) 至于“Selenium::WebDriver::Wait.new(:timeout => 30)”，这里的“=>”是什么意思？我知道 ":timeout" 是一个红宝石符号，但是当使用它后跟一个 "=>" 和一个值 "30" 时，我会感到困惑。这是关于红宝石符号的某种技巧吗？

(2) 我们在定义哈希时也有符号“=>”对吗？像：

```
cars = {
'altima' => 'nissan',
'camry' => 'toyota',
'rx7' => 'mazda'
}
puts cars['rx7']   =>   mazda 
```

这里的“=>”和问题（1）的意思一样吗？

我是红宝石新手，任何意见将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T13:05:49.027

是的，它具有相同的含义。在这两种情况下，它都是哈希的定义。如果哈希字面量是方法签名中的最后一个参数，Ruby 允许省略花括号。

例子：

```
def my_method a, b, h
  puts a
  puts b
  puts h
end

my_method(1, 2, :timeout => 30)
# my_method(1, 2, timeout: 30) # alternative syntax for ruby 1.9+
# >> 1
# >> 2
# >> {:timeout=>30} 
```

请注意，它仅适用于哈希的最后一个参数。如果最后有多个散列，则必须对除最后一个之外的所有散列使用普通形式（带花括号）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:05:27.430

```
Selenium::WebDriver::Wait.new(:timeout => 30) 
```

是简写

```
Selenium::WebDriver::Wait.new({:timeout => 30}) 
```

它在其参数中使用哈希。

# android - SQLiteConstraintException 不要进入 catch

> ID：12178633
> 
> 赞同：11
> 
> 时间：2012-08-29T13:03:47.340
> 
> 标签：android, sqlite, exception-handling, insert, sql-update

当我运行该代码时，我在 db.insert 中有一个异常：

```
08-29 15:40:17.519: E/SQLiteDatabase(3599): android.database.sqlite.SQLiteConstraintException: column date is not unique (code 19) 
```

这是正常的，因为我已经将该值作为键。所以在那种情况下，我做了一个 catch ，`SQLiteConstraintException`但是当我运行代码时我从来没有进入 catch 中。

我究竟做错了什么？

```
 try {
                db.insert(TABLE_STATISTICS, null, values);
            } catch (SQLiteConstraintException e) {
                Log.d("entered", "entered the exception");
                ContentValues valuesUp = new ContentValues();
                valuesUp.put((isMT ? KEY_MT : KEY_MO), change); 
                db.update(TABLE_STATISTICS, valuesUp, KEY_DATE + "=?",
                        new String[] { message_date });
            } 
```

谢谢你。

整个日志：

```
08-29 15:55:55.870: E/SQLiteDatabase(3828): Error inserting MO=0 date=2012-08-08 MT=1
08-29 15:55:55.870: E/SQLiteDatabase(3828): android.database.sqlite.SQLiteConstraintException: column date is not unique (code 19)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at android.database.sqlite.SQLiteConnection.nativeExecuteForLastInsertedRowId(Native Method)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at android.database.sqlite.SQLiteConnection.executeForLastInsertedRowId(SQLiteConnection.java:775)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at android.database.sqlite.SQLiteSession.executeForLastInsertedRowId(SQLiteSession.java:788)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:86)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1469)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1339)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at xx.xxx.xxx.xx.xxxx.StatisticsHolderDay.updateCounterNextStep(StatisticsHolderDay.java:124)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at xx.xxx.xxx.xx.xxxx.StatisticsHolderDay.updateCounter(StatisticsHolderDay.java:102)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at xx.xxx.xxx.xx.xxxx.LastMonthActivity.onStart(LastMonthActivity.java:146)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1163)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at android.app.Activity.performStart(Activity.java:5018)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2032)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at android.os.Looper.loop(Looper.java:137)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at android.app.ActivityThread.main(ActivityThread.java:4745)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at java.lang.reflect.Method.invokeNative(Native Method)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at java.lang.reflect.Method.invoke(Method.java:511)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-29 15:55:55.870: E/SQLiteDatabase(3828):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-29T13:21:31.620

改为使用`db.insertOrThrow()` 。

# sql - 如何将 docmd.runsql SQL（MS ACCESS）“分组”到事务中并允许在失败时回滚

> ID：12178634
> 
> 赞同：2
> 
> 时间：2012-08-29T13:03:53.877
> 
> 标签：sql, sql-server-2008, ms-access

我需要执行多个 SQL 语句（INSERT、UPDATE 等...），但如果它在任何时候失败，请将它们全部回滚。

我通常使用 docmd.runsql "INSERT INTO..."

我怎样才能实现交易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:06:26.477

从[如何：在 DAO 记录集中使用事务](http://msdn.microsoft.com/en-us/library/office/bb243806(v=office.12).aspx)。根据您的查询，可能无法在 MS Access 的一个事务中运行所有查询。

```
Sub ChangeTitle()

Dim wrkCurrent As DAO.Workspace
Dim dbsNorthwind As DAO.Database
Dim rstEmployee As DAO.Recordset

On Error GoTo ErrorHandler

   Set wrkCurrent = DBEngine.Workspaces(0)
   Set dbsNorthwind = CurrentDB
   Set rstEmployee = dbsNorthwind.OpenRecordset("Employees")

   wrkCurrent.BeginTrans
   Do Until rstEmployee.EOF
      If rstEmployee!Title = "Sales Representative" Then
         rstEmployee.Edit
         rstEmloyee!Title = "Sales Associate"
         rstEmployee.Update
      End If
      rstEmployee.MoveNext
   Loop

   If MsgBox("Save all changes?", vbQuestion + vbYesNo) = vbYes Then
      wrkCurrent.CommitTrans
   Else
      wrkCurrent.Rollback
   End If

   rstEmployee.Close
   dbsNorthwind.Close
   wrkCurrent.Close

   Set rstEmployee = nothing
   Set dbsNorthwind = Nothing
   Set wrkCurrent = Nothing

   Exit Sub

ErrorHandler:
   MsgBox "Error #: " & Err.Number & vbCrLf & vbCrLf & Err.Description
End Sub 
```

[Stackoverflow 上的其他帖子](https://stackoverflow.com/search?q=%5Bms+access%5D+transactions)

更多信息： http: [//msdn.microsoft.com/en-us/library/office/bb208950 (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/bb208950(v=office.12).aspx)

```
With queries

Sub RunQueries()
On Error GoTo errtrap

'Set up all the declarations and begin the transactions
Dim wks As DAO.Workspace
Dim db As DAO.Database
Dim sSQL As String

Set wks = DBEngine.Workspaces(0)
Set db = CurrentDb

wks.BeginTrans

sSQL = "UPDATE Table1 SET AText = 'P'"
db.Execute sSQL, dbFailOnError

db.Execute "Query1", dbFailOnError

'This will fail
sSQL = "UPDATE Table1 SET ANumber = 'P'"
db.Execute sSQL, dbFailOnError

wks.CommitTrans

exithere:

db.Close
wks.Close
Exit Sub

errtrap:

' Something happened so all the queries are not committed
wks.Rollback
GoTo exithere

End Sub 
```

# jquery - 应用程序不重定向到下一页

> ID：12178637
> 
> 赞同：0
> 
> 时间：2012-08-29T13:04:03.660
> 
> 标签：jquery, meteor

我通过流星创建了一个小应用程序。当我在本地主机上运行应用程序时，它运行良好。但是，当我从远程笔记本电脑或台式机访问该应用程序时，该应用程序不会重定向到应用程序的下一页。

我已经使用命令重定向：

```
$('#right2').html(Meteor.ui.chunk(Template.MessageInboxDetails)); 
```

请您给点建议好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:14:29.427

我认为`ui.chunk`现在已弃用。

我通常不喜欢通过将模板填充到 dom 中来进行页面路由。

考虑一下：

```
{{{display_page}}}

Template.whatever.display_page = function() {
    return Template[Session.get("current_page_id")]()
} 
```

现在您所要做的就是在您的活动中设置会话以路由到新页面

# ruby - Ruby 中的斐波那契数列（递归）

> ID：12178642
> 
> 赞同：18
> 
> 时间：2012-08-29T13:04:46.760
> 
> 标签：ruby, recursion, fibonacci

我正在尝试实现以下功能，但它一直给我`stack level too deep (SystemStackError)`错误。

任何想法可能是什么问题？

```
def fibonacci( n )
    [ n ] if ( 0..1 ).include? n
    ( fibonacci( n - 1 ) + fibonacci( n - 2 ) ) if n > 1
end

puts fibonacci( 5 ) 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-29T13:07:53.230

试试这个

```
def fibonacci( n )
  return  n  if ( 0..1 ).include? n
  ( fibonacci( n - 1 ) + fibonacci( n - 2 ) )
end
puts fibonacci( 5 )
# => 5 
```

也检查这篇文章[Fibonacci One-Liner](https://stackoverflow.com/questions/6418524/fibonacci-one-liner)

还有更多...... [https://web.archive.org/web/20120427224512/http://en.literateprograms.org/Fibonacci_numbers_(Ruby)](https://web.archive.org/web/20120427224512/http://en.literateprograms.org/Fibonacci_numbers_(Ruby))

你现在已经被许多解决方案轰炸了:)

关于你的解决方案中的问题

`n`如果它`0`或你应该返回`1`

最后`add`两个数字不是最后一个和下一个

> 新修改版

```
def fibonacci( n )
    return  n  if n <= 1 
    fibonacci( n - 1 ) + fibonacci( n - 2 )
end 
puts fibonacci( 10 )
# => 55 
```

> 一个班轮

```
def fibonacci(n)
   n <= 1 ? n :  fibonacci( n - 1 ) + fibonacci( n - 2 ) 
end
puts fibonacci( 10 )
# => 55 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-25T15:57:14.760

这是我想出的东西，我觉得这更直接。

```
def fib(n)
  n.times.each_with_object([0,1]) { |num, obj| obj << obj[-2] + obj[-1] }
end
fib(10) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-11-30T19:25:36.147

# 这种方法很快并且利用了记忆：

```
fib = Hash.new {|hash, key| hash[key] = key < 2 ? key : hash[key-1] + hash[key-2] }

fib[123] # => 22698374052006863956975682 
```

如果您想知道这个哈希初始化是如何工作的，请阅读这里：

[https://ruby-doc.org/core/Hash.html#method-c-new](https://ruby-doc.org/core/Hash.html#method-c-new)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-07-02T21:46:28.717

**线性**

```
module Fib
  def self.compute(index)
    first, second = 0, 1
    index.times do
      first, second = second, first + second
    end
    first
  end
end 
```

**带缓存的**递归****

 **```
module Fib
  @@mem = {}
  def self.compute(index)
    return index if index <= 1

    @@mem[index] ||= compute(index-1) + compute(index-2)
  end
end 
```

**关闭**

```
module Fib
  def self.compute(index)
    f = fibonacci
    index.times { f.call }
    f.call
  end

  def self.fibonacci
    first, second = 1, 0
    Proc.new {
      first, second = second, first + second
      first
    }
  end
end 
```

如果您致电，这些解决方案都不会使您的系统崩溃`Fib.compute(256)`

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-08-29T14:56:19.600

这不是您计算斐波那契的方式，您正在创建巨大的递归树，它将在相对较小`n`的 s 中失败。我建议你这样做：

```
def fib_r(a, b, n)
  n == 0 ? a : fib_r(b, a + b, n - 1)
end

def fib(n)
  fib_r(0, 1, n)
end

p (0..100).map{ |n| fib(n) } 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-02-17T14:01:24.790

递归很慢，这里有一个更快的方法

```
a = []; a[0] = 1; a[1] = 1
i = 1
while i < 1000000
    a[i+1] = (a[i] + a[i-1])%1000000007
    i += 1
end

puts a[n] 
```

它是 O(1)，但是你可以使用矩阵求幂，这是我的一个实现，但它在 java => [http://pastebin.com/DgbekCJM](http://pastebin.com/DgbekCJM)中，但是矩阵 exp.的 O(8logn) 。这是一个更快算法，称为快速加倍。这是一个快速加倍的java实现。

```
class FD {

    static int mod = 1000000007;

    static long fastDoubling(int n) {
        if(n <= 2) return 1;
        int k = n/2;
        long a = fastDoubling(k+1);
        long b = fastDoubling(k);
        if(n%2 == 1) return (a*a + b*b)%mod;
        else return (b*(2*a - b))%mod;
} 
```

然而，使用 karatsuba 乘法，两个矩阵 exp。并且快速加倍变得更快，但快速加倍击败矩阵 exp。由于一个恒定的因素，我不想在这里非常彻底。但我最近对斐波那契数进行了很多研究，我希望我的研究对任何愿意学习的人有用，;)。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-03-06T05:22:02.940

这可能会对您有所帮助。

```
def fib_upto(max)
  i1, i2 = 1, 1
  while i1 <= max
    yield i1
    i1, i2 = i2, i1+i2
  end
end

fib_upto(5) {|f| print f, " "} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-12-06T19:46:05.210

我认为这很容易：

```
def fibo(n) a=0 b=1 for i in 0..n c=a+b print "#{c} " a=b b=c end

end 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-08-24T05:59:24.460

我们可以使用以下算法执行列表 fibo 系列

```
def fibo(n)
  n <= 2 ? 1 : fibo(n-1) + fibo(n-2)
end 
```

我们可以生成如下系列

```
p (1..10).map{|x| fibo(x)} 
```

下面是这个的输出

```
=> [1, 1, 2, 3, 5, 8, 13, 21, 34, 55] 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-12-01T15:28:03.237

试试这个oneliner

```
def fib (n)
    n == 0 || n == 1 ? n : fib(n-2) + fib(n-1)
end
print fib(16) 
```

输出：987

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-09-06T12:17:06.980

```
PHI = 1.6180339887498959
TAU = 0.5004471413430931

def fibonacci(n)
  (PHI**n + TAU).to_i
end 
```

你不需要递归。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2014-03-23T18:12:03.190

最快和最小的生产线解决方案：

```
fiby = ->(n, prev, i, count, selfy) {
  i < count ? (selfy.call n + prev, n, i + 1, count, selfy) : (puts n)
}
fiby.call 0, 1, 0, 1000, fiby 
```

功能自拍模式:)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-08-01T09:20:07.490

```
a = [1, 1]
while(a.length < max) do a << a.last(2).inject(:+) end 
```

这将填充`a`系列。（你必须考虑 max < 2 的情况）

如果只需要第 n 个元素，您可以使用[Hash.new](http://www.ruby-doc.org/core-2.1.2/Hash.html#method-c-new)

```
fib = Hash.new {|hsh, i| hsh[i] = fib[i-2] + fib[i-1]}.update(0 => 0, 1 => 1)

fib[10]
# => 55 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2015-07-01T05:39:53.217

这是构建查找表的更简洁的解决方案：

```
fibonacci = Hash.new do |hash, key|
  if key <= 1
    hash[key] = key
  else
    hash[key] = hash[key - 1] + hash[key - 2]
  end
end

fibonacci[10]
# => 55 
fibonacci
# => {1=>1, 0=>0, 2=>1, 3=>2, 4=>3, 5=>5, 6=>8, 7=>13, 8=>21, 9=>34, 10=>55} 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2017-06-03T15:42:00.517

这是我在 URI Online Judge 上用来解决编程挑战的片段，希望对您有所帮助。

```
def fib(n)
  if n == 1
    puts 0
  else
    fib = [0,1]
    (n-2).times do
      fib << fib[-1] + fib[-2]
    end
    puts fib.join(' ')
  end
end

fib(45) 
```

它输出

```
# => 0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987 1597 2584 4181 6765 10946 17711 28657 46368 75025 121393 196418 317811 514229 832040 1346269 2178309 3524578 5702887 9227465 14930352 24157817 39088169 63245986 102334155 165580141 267914296 433494437 701408733 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-07-29T11:34:55.773

加入斐波那契火车：

常规的：

```
def fib(num)
  return num if (num < 2) else fib(num-1) + fib(num-2)
end 
```

使用缓存：

```
module Fib
  @fibs = [0,1]
  def self.calc(num)
    return num if (num < 2) else @fibs[num] ||= self.calc(num-1) + self.calc(num-2)
  end
end 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2019-05-02T08:45:26.977

完后还有 ;）

```
def fib(n)
  f = Math.sqrt(5)
  ((((1+f)/2)**n - ((1-f)/2)**n)/f).to_i
end 
```

添加一些缓存也会很方便

```
def fibonacci
  @fibonacci ||= Hash.new {|h,k| h[k] = fib k }
end 
```

所以我们可以得到它

```
fibonacci[3]  #=> 2
fibonacci[10] #=> 55
fibonacci[40] #=> 102334155
fibonacci     #=> {3=>2, 10=>55, 40=>102334155} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2014-06-14T05:35:55.207

如果你想为 fib 编写最快的函数算法，它不会是递归的。这是编写解决方案的功能性方式较慢的少数几次之一。因为如果你使用类似的东西，堆栈会重复它自己

```
fibonacci( n - 1 ) + fibonacci( n - 2 ) 
```

最终 n-1 和 n-2 将创建相同的数字，因此将在计算中进行重复。最快的方法是迭代

```
def fib(num)
# first 5 in the sequence 0,1,1,2,3
fib1 = 1 #3
fib2 = 2 #4
i = 5 #start at 5 or 4 depending on wheather you want to include 0 as the first number
while i <= num
    temp = fib2
    fib2 = fib2 + fib1
    fib1 = temp
    i += 1
end
p fib2
end
fib(500) 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2014-10-10T01:55:08.880

利用记忆化计算斐波那契数的另一种方法：

```
$FIB_ARRAY = [0,1]
def fib(n)
  return n if $FIB_ARRAY.include? n
  ($FIB_ARRAY[n-1] ||= fib(n-1)) + ($FIB_ARRAY[n-2] ||= fib(n-2))
end 
```

这确保了每个斐波那契数只计算一次，大大减少了对 fib 方法的调用次数。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2015-09-11T21:48:05.757

今天有人问我类似的问题，但他想得到一个给定数字的斐波那契数列数组。例如，

```
fibo(5)  => [0, 1, 1, 2, 3, 5]
fibo(8)  => [0, 1, 1, 2, 3, 5, 8]
fibo(13) => [0, 1, 1, 2, 3, 5, 8, 13]
# And so on... 
```

这是我的解决方案。它没有使用递归。如果您正在寻找类似的东西，只需另一种解决方案：P

```
def fibo(n)
  seed = [0, 1]
  n.zero? ? [0] : seed.each{|i| i + seed[-1] > n ? seed : seed.push(i + seed[-1])}
end 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-07-25T07:24:32.640

这是Scala中的一个：

```
object Fib {
  def fib(n: Int) {
    var a = 1: Int
    var b = 0: Int
    var i = 0: Int
    var f = 0: Int
    while(i < n) {
      println(s"f(${i+1}) -> $f")
      f = a+b
      a = b
      b = f
      i += 1
    }
  }

  def main(args: Array[String]) {
    fib(10)
  }
} 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2016-09-20T23:53:31.850

我认为[这是最好的答案](https://stackoverflow.com/a/24438837/995874)，这是另一个 SO 帖子提出类似问题的回应。

这里接受的答案`PriteshJ`使用朴素的斐波那契递归，这很好，但是一旦超过第 40 个元素，它就会变得非常慢。如果您缓存/记忆以前的值并在递归迭代时传递它们，速度会快得多。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2017-02-23T14:16:51.020

已经有一段时间了，但是您可以编写一个相当优雅且简单的单行函数：

```
def fib(n)
  n > 1 ? fib(n-1) + fib(n-2) : n
end 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2019-11-20T17:39:51.737

1) 示例，其中最大元素 < 100

```
def fibonachi_to(max_value)
  fib = [0, 1]
  loop do
    value = fib[-1] + fib[-2]
    break if value >= max_value
    fib << value
  end
  fib
end

puts fibonachi_to(100) 
```

输出：

```
0
1
1
2
3
5
8
13
21
34
55
89 
```

2) 示例，其中 10 个元素

```
def fibonachi_of(numbers)
  fib = [0, 1]
  (2..numbers-1).each { fib << fib[-1] + fib[-2] }
  fib
end

puts fibonachi_of(10) 
```

输出：

```
0
1
1
2
3
5
8
13
21
34 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-02-11T17:13:54.433

[Ruby Fiber](https://ruby-doc.org/core-2.5.1/Fiber.html)的一个不错的小介绍-

```
def fibs x, y
  Fiber.new do
    while true do
      Fiber.yield x
      x, y = y, x + y
    end
  end
end 
```

上面我们创建了一个无限的`fibs`数字流，以非常有效的方式计算。一个不只是`puts`一个无限的流，所以我们必须编写一个小函数来从我们的流中收集有限数量的项目，`take`-

```
def take t, n
  r = []
  while n > 0 do
    n -= 1
    r << t.resume
  end
  r
end 
```

最后让我们看看`100`序列中的第一个数字，从`0`和开始`1`-

```
puts (take (fibs 0, 1), 100) 
```

```
0
1
1
2
3
5
8
13
21
34
55
.
.
.
31940434634990099905
51680708854858323072
83621143489848422977
135301852344706746049
218922995834555169026 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-07-07T04:38:13.337

这个使用记忆和递归：

```
def fib(num, memo={})
  return num if num <= 1

  if memo[num]
    return memo[num]
  else
    memo[num] = fib(num - 2, memo) + fib(num - 1, memo)
  end
end 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2022-01-27T17:17:22.880

# 使用矩阵求幂：

不要使用递归，因为堆栈会累积，并且您将在计算机无法再处理的某个点达到限制。那就是`stack level too deep (SystemStackError)`你看到的。改用矩阵求幂：

```
def fib(n)
  (Matrix[[1,1],[1,0]] ** n)[1,0]
end

fib(1_000_000) #this is too much for a recursive version 
```**

# java - 如何使用反射 API 查找字段变量或方法 - Java

> ID：12178643
> 
> 赞同：2
> 
> 时间：2012-08-29T13:04:47.187
> 
> 标签：java, xml

我正在尝试提出一种算法，该算法允许我将 Java 类编组为 XML，而无需创建该类的对象（这是问题所在，使用我拥有的工具非常复杂）。我必须从日志文件中读取数据并将其转换为 XML 文件。来自日志文件的示例：

```
2206:org.powertac.common.RandomSeed::4::init::TariffMarket::0::fees::-6239716112490883981
2213:org.powertac.common.msg.BrokerAccept::null::new::1
2214:org.powertac.common.msg.BrokerAccept::null::new::1::null
2216:org.powertac.common.RandomSeed::5::init::org.powertac.du.DefaultBrokerService::0::pricing::8741252857248937781
2226:org.powertac.common.TariffSpecification::6::new::1::CONSUMPTION
2231:org.powertac.common.Rate::7::new
2231:org.powertac.common.Rate::7::withValue::-0.5
2232:org.powertac.common.Rate::7::setTariffId::6 
```

日志文件的模式是：

```
<id>:<class_name>::<order_of_execution>::<method_or_new>::<arguments> 
```

因此，我想将以下行转换为`XML`：

```
2231:org.powertac.common.Rate::7::new 
```

将写为：

```
<org.powertac.common.Rate>
    <rate>0</rate>
</org.powertac.common.Rate> 
```

我有解析器给我这些值，所以我可以访问这些数据。到目前为止，我的想法是使用[反射](http://docs.oracle.com/javase/tutorial/reflect/index.html) `Java`API 来完成这项肮脏的工作，否则我几乎必须创建一个符号表来完成我想要的。我知道我可以使用`Reflection`API 来查找符号：

```
private static void printMembers(Member[] mbrs, String s) {
    out.format("%s:%n", s);
    for (Member mbr : mbrs) {
        if (mbr instanceof Field)
        out.format("  %s%n", ((Field)mbr).toGenericString());
        else if (mbr instanceof Constructor)
        out.format("  %s%n", ((Constructor)mbr).toGenericString());
        else if (mbr instanceof Method)
        out.format("  %s%n", ((Method)mbr).toGenericString());
    }
    if (mbrs.length == 0)
        out.format("  -- No %s --%n", s);
    out.format("%n");
    } 
```

我想要完成的一个例子是：

```
2231:org.powertac.common.Rate::7::withValue::-0.5 
```

然后我会取`class`名字`org.powertac.common.Rate`，，使用`Class`：

```
 Class<?> c = Class.forName(args[0]);
 printMembers(c.getMethods(), "Methods"); 
```

将方法及其参数返回给我`withValue`，因此我可以以编程方式创建以下`XML`代码：

```
<org.powertac.common.Rate>
   <withValue>-0.5</withValue>
</org.powertac.common.Rate> 
```

此外，如果使用`method`or时可能会出现`class`一种潜在的并发症`object`，因此应该有某种递归方法来产生正确的结果。我对`Reflection`API 完全陌生，所以我想知道是否有人比我更了解如何做到这一点。谢谢

****更新*** 我确实可以访问这些类，并且我可以实例化它们，但是，我需要找出正确的参数，所以这是一项更复杂的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:28:52.150

您的问题不清楚：您是否有存储数据的类，或者没有？如果您还没有表示数据的类，并且不想创建它们，那么反射对您没有帮助。

相反，我建议只使用[JAXP](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/package-frame.html)来生成输出。创建一个`Document`，向其添加`Element`子级，然后使用序列化程序生成输出。谷歌“DOM 教程”可以找到一些例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:56:29.173

我创建了示例应用程序只是为了为以下类创建结构

```
class Rate
{
private double minValue;

public Rate withValue(double value)
{
    minValue = value;
    return this;
}

public double getValue()
{
    return minValue;
}
} 
```

以下类`Rate`使用创建`Reflection`然后调用`withValue`API

```
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.Arrays;

public class Test
{

public static void main(String[] args) throws ClassNotFoundException, IllegalArgumentException,
        IllegalAccessException, InvocationTargetException, InstantiationException
{
    Class<?> class1 = Class.forName("Rate");
    Object obj = class1.newInstance();
    for (Method m : class1.getMethods())
    {
        if (m.getName().equals("withValue"))
        {
            Class<?>[] parameterTypes = m.getParameterTypes();
            System.out.println(Arrays.toString(m.getParameterTypes()));
            Object methodArgs[] = new Object[parameterTypes.length];
            for (Class<?> parameterType : parameterTypes)
            {
                // Here I know there is primitive and double but your logic
                // should check for each and every type
                if (parameterType == Double.TYPE)
                {
                    double value = 0.5;// Value to be passed
                    // directly using 0 since I know only element is there
                    methodArgs[0] = value;
                }
            }
            // Now Creating Rate here directly to check but you may have to
            // again cast to generic object
            Rate rate = (Rate) m.invoke(obj, methodArgs);
            System.out.println(rate.getValue());

        }

    }
}
} 
```

# javascript - 从 GWT 中的 HighCharts 库中自定义 Stockchart 范围选择器按钮（以及一般的 Javascript）

> ID：12178648
> 
> 赞同：6
> 
> 时间：2012-08-29T13:05:01.810
> 
> 标签：javascript, gwt, highcharts, highstock

我正在为 GWT 使用 HighCharts 库，但遇到了问题。

我正在尝试这样的事情：[股票图表示例](http://jsfiddle.net/WCabG/3/)。我对这个问题唯一感兴趣的是`buttons`里面的属性`rangeSelector`，我想在其中自定义按钮文本）。在 javascript 上，代码是这样的：

```
rangeSelector: {
            buttons: [{
                type: 'day',
                count: 3,
                text: '3dias'
            }, {
                type: 'week',
                count: 1,
                text: '1w'
            }, {
                type: 'month',
                count: 1,
                text: '1m'
            }, {
                type: 'month',
                count: 6,
                text: '6MS'
            }, {
                type: 'year',
                count: 1,
                text: '1ano'
            }, {
                type: 'all',
                text: 'All'
            }],
            selected: 3
        } 
```

现在我尝试在 GWT 中做同样的事情，使用图表上的 setOption() 方法。但似乎没有任何效果。

我认为我遇到了麻烦，因为该`buttons`属性需要一组属性，而这就是我无法弄清楚如何解决的问题。

我试过的东西：

```
chart.setOption("/rangeSelector/buttons", 
      new String[]{"{type: 'day', count: 1, text: '1dia'}", "{type: 'day', count: 1, text: '1dia'}"});` 
```

这是我能想到的最好的方法，它创建了两个空按钮并且没有任何操作。

任何帮助，将不胜感激。非常感谢。

**更新：（2012 年 12 月 13 日）**
给出接受的答案后，我需要设置按钮 witdh。为此，只需使用：

```
buttonTheme: {
    width: 80
} 
```

就像是：

```
rangeSelector: {
                selected: 2,
                inputBoxStyle: {
                    top: '40px',
                    right: '10px'},
                buttons: [{
                    type: 'week',
                    count: 1,
                    text: '1 semana'
                }],
                buttonTheme: {
                    width: 80
                }
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T15:30:12.370

您能否尝试以下操作：

```
 String rangeSelectorConfig =  " {\n" +
            "                buttons: [{\n" +
            "                    type: 'day',\n" +
            "                    count: 3,\n" +
            "                    text: '3dias'\n" +
            "                }, {\n" +
            "                    type: 'week',\n" +
            "                    count: 1,\n" +
            "                    text: '1w'\n" +
            "                }]" +
            "            }" ;
 JSONValue config = JSONParser.parseLenient(rangeSelectorConfig);
 chart.setOption("/rangeSelector", config); 
```

`Chart`类（在 的帮助下`Configurable`）不会为您解析 JSON 对象，因此代码中的按钮作为字符串文字传递给本机 HightCharts JS。

# python - 从 Python 中的字符串获取类型实例

> ID：12178649
> 
> 赞同：6
> 
> 时间：2012-08-29T13:05:02.837
> 
> 标签：python

所以，我需要将一个值转换为给定的类型：

```
if 'int' == type_name:
    value = int(value)
elif 'str' == type_name:
    value = str(value)
... 
```

一般有没有办法做到这一点？例如：

```
type_instance = get_type_instance(type_name)
value = type_instance(value) 
```

我正在使用 Python 2.7，但也会对 Python 3.X 解决方案感兴趣。

**更新：**

这是我正在使用的解决方案：

```
class Token:

    def __init__(self, type_name, value):
        self.type = type_name
        self.value = __builtins__[type_name](value) # not safe 
```

这只是一个玩具解析器。**不要在生产中使用！**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T13:08:02.627

建立一个字典

```
TYPES = {
  'int' : int,
  'str' : str,
...
}

value = TYPES[type_name](value) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-29T13:09:44.217

如果您只需要`__builtins__`类型，您可以这样做

```
value = getattr(__builtins__, type_name)(value) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-15T14:02:25.303

由于您`float64`在问题的早期版本中指定，我假设您也对获取 numpy 类型感兴趣。如果是这样，下面的函数应该解决这个问题：

```
def can_typecast(type, value):        
    try:
        tp = getattr(__builtins__, type)
    except AttributeError:
        try:
            np = __import__('numpy')
            tp = getattr(np, type)
            if not isinstance(tp, type):
                raise ValueError('type string is not a type')
        except AttributeError:
            raise ValueError('Invalid type specified')
        except ImportError:
            raise ValueError('Numpy not found')
    try:
        tp(value)
    except ValueError:
        return False
    return True 
```

它的作用是首先查看给定的类型名称是否可以解析为内置类型。如果失败，它会查看是否可以在 numpy 中找到类型名称，*以及*它是否是有效的类型对象，如果是，则尝试对其进行强制转换操作。

# php - 讨论 MySQL 数据库结构

> ID：12178650
> 
> 赞同：0
> 
> 时间：2012-08-29T13:05:06.787
> 
> 标签：php, mysql, database, model

我正在进行的项目使用多个“墙”进行用户创建的讨论。

我的问题与如何在 MySQL 数据库中建模有关。

是否有一个名为“walls”的表包含诸如谁创建它等信息，另一个名为“messages”的表包含每条消息并带有一个“wall_id”列来区分它属于哪里，工作吗？

另外，“messages”表是否应该使用 wall_id 作为索引的主键？或者重复的数字对主键没有用处？

我对“以正确的方式”建模数据库相对较新，非常感谢任何建议或可靠的帮助，以提高效率和轻松处理数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:13:56.993

你的方法确实是正确的方法，除了你所说的主键。主键必须是唯一的。您可以将多个字段作为主键，但键本身必须是唯一的。

所以你会有以下表格。

```
CREATE TABLE `wall` (
  `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_id` INT(10) UNSIGNED NOT NULL,
  `name` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `user` (`user_id`)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB;

CREATE TABLE `user` (
  `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(50) NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB;

CREATE TABLE `message` (
  `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `wall_id` INT(10) UNSIGNED NOT NULL,
  `user_id` INT(10) UNSIGNED NOT NULL,
  `message` TEXT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `wall` (`wall_id`),
  INDEX `user` (`user_id`)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB; 
```

然后，您将在和上关联`user`表格。`user_id``wall``wall_id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:17:21.470

让我们一一分解场景：

1.  首先，您应该有一个以 user_id 作为***主键***的用户表。
2.  那么你应该有一个墙桌。它的***主键***是 wall_id ，***外键***是 user 表中的 user_id ，因为每面墙都只属于一个 user 。user_id 也将是此表中的唯一键。
3.  然后需要一个消息表。它将消息与**message_id 的主键字段**一起存储。
4.  最后，您将需要一个 message_wall 表来存储消息属于哪个表的信息。这里 message_id ， wall_id 将是***外键***和***复合主键***。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:13:07.737

只需创建一个名为“Wall”的表并将 wall_id 作为您的主键

```
create table wall(wall_id int ,primary key(wall_id)); 
```

然后创建带有外键的“消息”表到 wall_id 为

```
create table message(mes_belong_id int,primary key(mes_belong_id),wall_id int,foreign   key(wall_id) references wall(wall_id)); 
```

然后将每条消息保存在您需要的相同墙 ID 下，并自动存储到消息中。如果您想检索消息，只需使用 wall_id。就是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T13:13:55.233

基本上规范化表格

```
Users
User_id  Name  otherFields

Category
Category_id  Cat_name

Walls
Wall_id  User_id Cat_name

Messages
Message_id User_id Wall_id Message 
```

基本的东西

场景 1 因此，根据 user_id 显示所有特定用户的所有墙并加入消息

场景 2 根据 category_id 将所有墙显示到特定类别

你可以根据你需要的其他东西来扩展它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T13:15:37.590

如您所述，我将使用两张表，一张用于墙壁，一张用于消息，墙壁的主键是自动递增的整数。对于消息，再次使用自动递增的整数作为主键，但它也应该将墙 ID 作为外键。

我最近构建了一个 WordPress 公告板插件，它的工作原理类似，每个公告板都嵌入在一个页面中。页面已经被WordPress设置好了，所以只是添加一个布告栏表的情况，并且每个页面都有自己的主键，但也将WordPress页面ID称为外键。

你可能想考虑买一本关于数据库设计的好书或阅读几篇文章——它对你的帮助无穷无尽。我使用了“数据库漫画指南”，它有点老套，但它确实帮助我了解了如何构建关系数据库。我相信许多其他人也将能够推荐关于这个主题的好书或文章。

# ruby-on-rails - 如何创建我的 Rails 应用程序的 API，如 facebook 和 twitter API

> ID：12178652
> 
> 赞同：0
> 
> 时间：2012-08-29T13:05:09.260
> 
> 标签：ruby-on-rails, json

嗨，我想创建现有 Rails 3 应用程序的 API

```
 like facebook and twitter API. 
```

我的应用程序将收到一个调用，并且应以 json 格式返回适当的结果。

是否有任何最好的 rails gem 或插件可以明确使用。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:07:57.353

广泛的主题，但这应该会有所帮助：http: [//blog.gomiso.com/2011/06/27/building-a-platform-api-on-rails/](http://blog.gomiso.com/2011/06/27/building-a-platform-api-on-rails/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:26:00.527

act_as_api gem 可以帮助你..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:14:55.230

Rails 本身就是构建 api 的宝石。我推荐[Ryan Bates](http://railscasts.com/?tag_id=37)关于 apis 的演员表。

# javascript - jQuery 自动完成显示不需要的动态 html 标签

> ID：12178656
> 
> 赞同：0
> 
> 时间：2012-08-29T13:05:15.127
> 
> 标签：javascript, jquery, html, jquery-autocomplete

不确定这些是如何不被转换为 html 对象的。

我有这个功能：

```
var findPattern = new RegExp(request.term.toLowerCase(), "ig");
var highlightMatch = function(match) {
  return '<span class="highlight">' + match + '</span>';
}; 
```

它在这里被使用：

```
source: function(request, response) {
  $autocomplete_xhr = $.ajax({
    // .. truncated for your viewing pleasure ..
    success: function() {
      return {
         label: $.string(label).interpolate({name: row.customer.name, address: (row.customer.addr == null) ? '' : row.customer.addr}).str.replace(findPattern, highlightMatch), 
```

但结果是我可以看到`<span>`标签而不是它们被解析为 HTML。

任何想法为什么会发生这种情况，我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:43:41.707

知道了！将此添加到我的自动完成代码的末尾。据我了解，这与 JS 库中包含的完全相同的代码。所以我不确定为什么只有从源代码中提取并手动放入文件中才会起作用..

```
 })
      .each(function() {
        // Señor Hackovitz for rendering HTML elements..
        $(this).data("autocomplete")._renderItem = function(ul, item) {
          return $( "<li></li>" )
              .data( "item.autocomplete", item )
              .append( "<a>" + item.label + "</a>" )
              .appendTo( ul );
        };
      }) 
```

我`.each`在@Mu Is Too Short 的示例之后使用了一个语句，以防有许多自动完成功能可用。

干杯!

# facebook - 喜欢按钮没有出现在Firefox中

> ID：12178657
> 
> 赞同：1
> 
> 时间：2012-08-29T13:05:15.877
> 
> 标签：facebook, firefox

我有一个问题，喜欢按钮在我的 Firefox 页面上不起作用，但在所有其他浏览器中都起作用。

请看我的链接：http: [//idhair.eu/swag/hinnerup.html](http://idhair.eu/swag/hinnerup.html)

不要介意布局，它可能看起来很乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:38:39.880

好像你有 `<script src="https://connect.facebook.net/en_US/all.js"></script>`两次嵌入脚本，第一次在 first 之后`<div id="fb-root"></div>`，然后使用

```
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=********";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

我的 chrome 检查还说 fbinit 之前已经初始化，你也有两个`<div id="fb-root"></div>`
你可以这样做，删除第一个 JS。并拥有一个 fb-root div。

```
window.fbAsyncInit = function() {
          FB.init({
            appId      : '*******',
            status     : true, 
            cookie     : true,
            xfbml      : true,
            oauth      : true
        });

    };
        (function(d){
           var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
           js = d.createElement('script'); js.id = id; js.async = true;
           js.src = "//connect.facebook.net/en_US/all.js";
           d.getElementsByTagName('head')[0].appendChild(js);
}(document)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:42:46.140

您的“赞”按钮可能不会显示，因为您链接到的页面可能对登录用户不可用。如果您退出 Facebook，Like 按钮*应该*会正确显示。您对内容/页面的任何查看者限制都将阻止某些用户看到“赞”按钮。

# python - 在 PCAP 文件上使用 BPF

> ID：12178659
> 
> 赞同：1
> 
> 时间：2012-08-29T13:05:22.600
> 
> 标签：python, pcap, scapy

我写了一个代码来嗅探网络上的数据包。然后它会根据 MA​​C 地址对其进行过滤并将其存储为 .pcap 文件。现在我想在代码中添加一个函数，该函数可以读取 .pcap 文件或保存嗅探数据包的对象，以再次过滤它以获取 ARP 数据包。

我尝试使用 PCAP 库的 bpf 函数，但没有帮助。这可能有任何其他方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:01:42.083

如果你想在 python 中完成这一切，我以前用过`dpkt`并且效果很好：[https ://code.google.com/p/dpkt/](https://code.google.com/p/dpkt/)

我不知道它是否支持 BPF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T20:29:07.330

使用 打开 pcap 文件`pcap_open_offline()`，使用 编译过滤器`"arp"`，使用`pcap_compile()`将过滤器设置为`pcap_t *`生成的过滤器`pcap_setfilter()`，然后从中读取数据包`pcap_t *`。

# java - java中的正则表达式？我被困住了

> ID：12178665
> 
> 赞同：0
> 
> 时间：2012-08-29T13:05:51.923
> 
> 标签：java, regex

我得到了一些动态变化的文本，我需要一种方法来找到其中的某些部分。尤其像这些：

+124现在

+78 现在

+45现在

所以我的价值观总是以“+”加号开始，然后是一些数字，最小的一个，然后是“现在”这个词。

我尝试了很多这样的方法：

```
if(myString.contains("+[0-9]+now")) //false 
```

但我厌倦了......你能帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T13:07:52.577

改用[`String#matches()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches%28java.lang.String%29)：

```
if (myString.matches(".*\\+[0-9]+now.*")) 
```

此外，`+`它是一个特殊的正则表达式字符，这就是您需要转义它的原因。

如果您需要*捕获*数字，请使用[`Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)and [`Matcher`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)：

```
Pattern p = Pattern.compile("\\+([0-9]+)now");
Matcher m = p.matcher(myString);
while (m.find()) {
  System.out.println(m.group(1));
} 
```

`()`是一个捕获组，这意味着它将告诉正则表达式引擎*存储*匹配的内容，以便您以后可以使用[`group()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#group%28int%29).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-29T13:09:20.263

尝试这个......

```
Pattern pat = Pattern.compile("\\+\\d+now");
Matcher mat = pat.matcher("Input_Text");

while(mat.find()){

   // Do whatever you want to do with the data now...

 } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T13:08:26.613

您需要像这样转义第一个“+”：

```
if(myString.matches("\\+[0-9]+now")); 
```

+ 表示“从字面上找到字符串中的 +”而不是“找到该字符 1 次或多次”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-29T13:11:08.583

我假设您想匹配字符串或者提取中间的数字？在你的情况下，问题是`+`us 一个特殊字符，因此你需要像这样转义它：`\\+`，所以你的正则表达式变成`\\+[0-9]+now`.

至于您的第二个问题，该`.contains`方法采用字符串，而不是正则表达式，因此您的代码将不起作用。

```
 String str = "+124now";
    Pattern p = Pattern.compile("\\+(\\d+)now");
    Matcher m = p.matcher(str);

    while (m.find())
    {
        System.out.println(m.group(1));         
    } 
```

在这种情况下，我已经提取了数字，以防万一这是您所追求的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T13:18:21.763

既然你说字符串总是以开头`+`并总是以`now`为什么不检查这是真的。如果不是，那么就有问题了。

```
 String[] vals = {"+124now", "+78now", "-124now", "+124new"};

    for (String s : vals) {
        if (s.matches("^\\+(\\d+)now$")) {
            System.out.println(s + " matches.");
        } else {
            System.out.println(s + " does not match.");
        }
    } 
```

当然，如果您想捕获数字，请使用 npinti 建议的匹配器。

编辑：这是获取号码的方法：

```
 Pattern p = Pattern.compile("^\\+(\\d+)now$");
    for (String s : vals) {
        Matcher m = p.matcher(s);
        if (m.matches()) {
            System.out.println(s + " matches and the number is: " + m.group(1));
        } else {
            System.out.println(s + " does not match.");
        }
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-29T13:09:30.863

该方法`contains`不会将其参数解释为正则表达式。请改用该方法`matches`。你也必须逃避`+`，像这样：

```
if (myString.matches("\\+\\d+now")) 
```

# javascript - 我可以在我的内容上方放置这个脚本吗？

> ID：12178667
> 
> 赞同：0
> 
> 时间：2012-08-29T13:05:55.993
> 
> 标签：javascript, html

示例： http: [//mrdoob.github.com/three.js/examples/canvas_geometry_birds.html](http://mrdoob.github.com/three.js/examples/canvas_geometry_birds.html)

我希望将上述脚本合并到我正在设计的一个主页中。这些将有链接、按钮和其他内容等。唯一的问题是我似乎无法让鸟类出现在我的主要内容/网站之上。是否有适当的方法来呈现代码以使它们显示在其他一切之上？感谢您的任何和所有输入！

编辑：

如何让鸟类显示在我的实际网站上方，以便用户看到。我一直在尝试它，每次我将我的网站或代码带入时，鸟都在我的实际网站后面并且看不到。希望这能让事情更清楚！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:11:26.900

看起来一切都呈现到容器 div 中。

所以尝试替换这个

```
<div id="container"></div> 
```

有了这个

```
<div id="container" style="width: 700px; height: 300px;"></div> 
```

或者，您可以将容器 div 插入您希望标题所在的区域，它应该适合该空间？

**编辑！！**

我想我误解了你的问题？在容器 div 中使用 z-index

```
<div id="container" style="z-index: 99;"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:14:13.113

我会说，不要将 Three.js 用于鸟类，因为一些较旧的浏览器不支持它。为什么不只是为你的鸟制作一个 GIF 呢？或者用鸟的照片制作几个 DIV 并移动它们。

# plone - 列出敏捷对象的字段

> ID：12178669
> 
> 赞同：8
> 
> 时间：2012-08-29T13:06:01.147
> 
> 标签：plone, dexterity

我想列出一个灵巧对象的所有字段（和值）。

我可以像这样轻松访问单个字段值`myobject.myfield`

但我不知道如何列出对象的所有可用字段。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T13:09:18.833

敏捷对象由可枚举的模式定义：

```
from zope.interface.interfaces import IMethod

for name, desc in IYourDexteritySchema.namesAndDescriptions():
    value = getattr(yourDexterityInstance, name)
    if IMethod.providedBy(desc):
        # It's a method, call it
        value = value() 
```

这里我使用[`.namesAndDescriptions()`method](http://docs.zope.org/zope3/Code/zope/interface/interface/InterfaceClass/index.html)，但如果你的模式上没有任何方法，你也可以只使用接口作为迭代器：

```
for name in IYourDexteritySchema:
    value = getattr(yourDexterityInstance, name) 
```

最后但并非最不重要的一点是，`zope.schema`有一个名为的实用方法`getFieldsInOrder`，它将过滤`zope.schema`接口中的字段；上述方法还列出了方法和非模式属性，`getFieldsInOrder`只列出了`zope.schema`具体的属性类型：

```
from zope.schema import getFieldsInOrder

for name, field in getFieldsInOrder(IYourDexteritySchema):
    value = getattr(yourDexterityInstance, name) 
```

如果您通过网络定义了模式，您可能不知道如何查找您的类型的接口。您还可以通过工厂类型信息或简称 FTI 检索架构接口：

```
from plone.dexterity.interfaces import IDexterityFTI
from zope.component import getUtility

schema = getUtility(IDexterityFTI, name='your.dexterity.type').lookupSchema() 
```

现在在哪里`schema`保存您的界面。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-26T11:22:32.170

正如大卫所说，我找不到一种方法来枚举来自行为的字段。

因此，深入研究 plone.dexterity，在 utils.getAdditionalSchemata 函数中，我发现这种方法可以大致解决问题：

```
from zope.schema import getFieldsInOrder
from plone.behavior.interfaces import IBehaviorAssignable

behavior_assignable = IBehaviorAssignable(context)
if behavior_assignable:
  behaviors = behavior_assignable.enumerateBehaviors()
  for behavior in behaviors:
    for k,v in getFieldsInOrder(behavior.interface):
      # ... 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-29T14:34:27.097

我找到了一种方法。由于灵巧方案各不相同，我无法直接使用 Christophs 的建议。但这现在有效

```
for key, value in getFieldsInOrder(obj.getTypeInfo().lookupSchema()):
    value = getattr(getattr(obj, key), 'output', getattr(obj, key)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T13:15:39.653

您也可以使用 FTI：

```
from plone.dexterity.interfaces import IDexterityFTI
from zope.component import getUtility

fti = getUtility(IDexterityFTI, name='rgd.venues.venue')
schema = fti.lookupSchema()
fields = getFieldsInOrder(schema)
for key, value in fields:
    # so something 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-12T21:56:03.123

弄清楚如何从字段和行为中列出所有字段：

```
from plone.behavior.interfaces import IBehavior
from plone.dexterity.interfaces import IDexterityFTI
from zope.component import getUtility

def get_fields(portal_type):
    fti = getUtility(IDexterityFTI, name=portal_type)
    schema = fti.lookupSchema()
    fields = schema.names()
    for bname in fti.behaviors:
        factory = getUtility(IBehavior, bname)
        behavior = factory.interface
        fields += behavior.names()
    return fields 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-24T16:58:44.787

您可以使用`iterSchemata`和`getFieldsInOrder`：

```
from plone.dexterity.utils import iterSchemata
from zope.schema import getFieldsInOrder

for schema in iterSchemata(obj):
    print(u'  %s' % schema)
    for field in getFieldsInOrder(schema):
        print(u'    %s\t%s' % field) 
```

如果 obj 是 a`Document`它输出

```
plone.dexterity.schema.generated.Plone_5_1643036771_2_583572_0_Document
plone.app.dexterity.behaviors.discussion.IAllowDiscussion
  allow_discussion    plone.app.dexterity.behaviors.discussion.IAllowDiscussion.allow_discussion
plone.app.dexterity.behaviors.exclfromnav.IExcludeFromNavigation
  exclude_from_nav    plone.app.dexterity.behaviors.exclfromnav.IExcludeFromNavigation.exclude_from_nav
plone.app.dexterity.behaviors.id.IShortName
  id  plone.app.dexterity.behaviors.id.IShortName.id
plone.app.dexterity.behaviors.metadata.IDublinCore
  title       plone.app.dexterity.behaviors.metadata.IBasic.title
  description plone.app.dexterity.behaviors.metadata.IBasic.description
  subjects    plone.app.dexterity.behaviors.metadata.ICategorization.subjects
  language    plone.app.dexterity.behaviors.metadata.ICategorization.language
  effective   plone.app.dexterity.behaviors.metadata.IPublication.effective
  expires     plone.app.dexterity.behaviors.metadata.IPublication.expires
  creators    plone.app.dexterity.behaviors.metadata.IOwnership.creators
  contributors        plone.app.dexterity.behaviors.metadata.IOwnership.contributors
  rights      plone.app.dexterity.behaviors.metadata.IOwnership.rights
plone.app.contenttypes.behaviors.richtext.IRichTextBehavior
  text        plone.app.contenttypes.behaviors.richtext.IRichTextBehavior.text
plone.app.relationfield.behavior.IRelatedItems
  relatedItems        plone.app.relationfield.behavior.IRelatedItems.relatedItems
plone.app.versioningbehavior.behaviors.IVersionable
  changeNote  plone.app.versioningbehavior.behaviors.IVersionable.changeNote
  versioning_enabled  plone.app.versioningbehavior.behaviors.IVersionable.versioning_enabled
plone.app.contenttypes.behaviors.tableofcontents.ITableOfContents
  table_of_contents   plone.app.contenttypes.behaviors.tableofcontents.ITableOfContents.table_of_contents 
```

# extjs - EXTjs：在 extjs 中使用数字和字符串排序问题

> ID：12178681
> 
> 赞同：0
> 
> 时间：2012-08-29T13:06:27.840
> 
> 标签：extjs

我在 extjs 中有网格，列中的值为 200.00 GB、12.00 GB、23.34 GB。当我单击排序时，它没有以正确的顺序显示，例如升序或降序。请帮助我如何显示数字和字符串排序的组合。检查图像

![在此处输入图像描述](../Images/00b879b28e65c4f056b87b7dc9c37edd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:15:07.760

这在文档中有所介绍：[http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Field-cfg-sortType](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Field-cfg-sortType)

您可以提供自己的自定义排序方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-04T13:36:08.127

尝试排序类型

[http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.data.SortTypes](http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.data.SortTypes)

```
sortDir: 'ASC', sortType: 'asInt' 
```

# regex - 如何使用 $1、$2、$3 动态分配哈希

> ID：12178692
> 
> 赞同：6
> 
> 时间：2012-08-29T13:07:02.473
> 
> 标签：regex, perl, eval

我想动态创建一个`%detail`哈希，而不使用`eval`语句。此代码与`eval`语句一起工作正常，但有没有更好的方法来执行此操作而不使用`eval`？

```
my @input=('INFO: Vikram 32 2012','SAL: 12000$','ADDRESS: 54, junk, JUNK');

my %matching_hash= (
                    qr/^INFO:\s*(\S+)\s+(\S+)\s+(\S+)/ =>['name','age','joining'],
                    qr/^SAL:\s*(\S+)/ => ['salary'],
                    qr/ADDRESS:\s*(.*)/ =>['address']
                    );
my %detail;
while(my ($regex, $array) = each(%matching_hash)) {
    foreach (@input){
        if(/$regex/) {
            for(my $i=0;$i<=$#$array; $i++) {
                $j=$i+1;
                eval '$detail{$array->[$i]} = $$j';
            }
        }
    }
}
use Data::Dumper;

print Dumper(\%detail);
++++++++++++++

$VAR1 = {
          'name' => 'Vikram',
          'address' => '54, junk, JUNK',
          'age' => '32',
          'joining' => '2012',
          'salary' => '12000$'
        }; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-29T13:23:30.027

相关部分：

```
if(my @m = /$regex/) {
  for(my $i=0;$i<=$#$array; $i++) {
      $detail{$array->[$i]} = $m[$i];              
  }   
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T13:30:15.643

更改 for 循环：

```
for(my $i=0;$i<=$#$array; $i++) {
    $j=$i+1;
    eval '$detail{$array->[$i]} = $$j';
} 
```

经过：

```
@detail{@{$array}} = ($_ =~ $regex); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T14:01:52.227

如果您可以使用最新版本的 Perl，请参阅`(?<name>...)`regexp [perlre docs](http://perldoc.perl.org/perlre.html)中的此表示法，然后使用 $1、$2、$3 等更清楚。

**脚本**

```
use v5.14;
use Data::Dumper;

my @inputs = ( 'INFO: Vikram 32 2012', 'SAL: 12000$','ADDRESS: 54, junk, JUNK' );

my %matching_hash= (
    qr/^INFO:\s*(?<name>\S+)\s+(?<age>\S+)\s+(?<joining>\S+)/ => [ 'name', 'age', 'joining' ],
    qr/^SAL:\s*(?<salary>\S+)/                                => [ 'salary' ],
    qr/ADDRESS:\s*(?<address>.*)/                             => [ 'address' ],
);

my %detail;
while (my ($regex, $array) = each %matching_hash ) {

    INPUT:
    foreach my $input ( @inputs ) {

        next INPUT if not $input =~ m{$regex};

        for my $name ( @$array ) {
            $detail{$name} = $+{$name};
        }
    }
}

say Dumper( \%detail); 
```

**输出**

```
$VAR1 = {
          'name'    => 'Vikram',
          'address' => '54, junk, JUNK',
          'age'     => '32',
          'joining' => '2012',
          'salary'  => '12000$'
        }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T13:21:48.597

您可以将这两个数组`@LAST_MATCH_START`和`@LAST_MATCH_END`（参见`perldoc perlvar`）一起使用，`substr`而不是`$1, $2...`。类似的东西

```
$detail{ $array->[$i] } = substr $_, $LAST_MATCH_START[$j], $LAST_MATCH_END[$j] - $LAST_MATCH_START[$j]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T01:41:24.517

使用[命名的捕获组](http://perldoc.perl.org/perlre.html#%28%3f%27NAME%27pattern%29)，您可以消除`%matching_hash`成为散列的需要。同时消除了使用数字变量的需要，或者将匹配的结果分配到数组中。这是因为它将相关信息存储到`%+`.

```
use 5.10.1;

my @match = (
  qr'^INFO:\s*(?<name>\S+)\s+(?<age>\S+)\s+(?<joining>\S+)',
  qr'^SAL:\s*(?<salary>\S+)',
  qr'ADDRESS:\s*(?<address>.*)',
);

sub get_details{
  my %detail;

  for my $input ( @_ ) {
    for my $match ( @match ){
      next unless $input =~ $match;
      @detail{keys %+} = values %+;
      last;
    }
  }

  return \%detail;
}

use Data::Dumper;
my @inputs = ( 'INFO: Vikram 32 2012', 'SAL: 12000$','ADDRESS: 54, junk, JUNK' );
say Dumper get_details @inputs 
```

如果您将`qr`' 合二为一，它会变得更加简单。

```
use 5.10.1;

my $match= qr"
    ^INFO:   \s* (?<name>\S+) \s+ (?<age>\S+) \s+ (?<joining>\S+)
  | ^SAL:    \s* (?<salary>\S+)
  | ADDRESS: \s* (?<address>.*)
"x;

sub get_details{
  my %detail;

  for my $input ( @_ ) {
    $input =~ $match;
    @detail{keys %+} = values %+;
  }

  return \%detail;
}

use Data::Dumper;
my @inputs = ( 'INFO: Vikram 32 2012', 'SAL: 12000$','ADDRESS: 54, junk, JUNK' );
say Dumper get_details @inputs 
```

# javascript - javascript中的indexOf

> ID：12178698
> 
> 赞同：1
> 
> 时间：2012-08-29T13:07:35.717
> 
> 标签：javascript

> **可能重复：**
> [Javascript indexOf 不区分大小写](https://stackoverflow.com/questions/8993773/javascript-indexof-case-insensitive)

如何在javascript中使用IndexOf来搜索字符串中的键而不考虑键是小写还是大写

```
<script type="text/javascript">
 var s = "hello world";
 var key="HELLO";
 // the alert should say found if key is lower case or upper case     
 if(s.indexof(key)>1) alert("found") 
 </script> 
```

他们在javascript中是否有任何可以检查密钥是小写还是大写的函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:10:28.273

使用前将`s`和转换`key`为小写`.toLowerCase()``indexOf()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:09:22.853

看看这个：

[检查这个](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_indexof)

这将解释它是如何工作的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:09:38.133

尝试该`toLowerCase()`功能并检查它是否在第一个位置：

```
<script type="text/javascript">
var s = "hello world";
var key="HELLO";    
if(s.toLowerCase().indexof(key.toLowerCase())>=0) alert("found")
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T13:18:07.003

您可以使用不区分大小写的匹配：

```
var string = "This is a HelLo WoRld string";
var lookup = "hellO wOrld";

var result = string.match(lookup,"i");     // "i" = case insensitive
alert(result.index);                       // index starts at 0 
```

# javascript - 属性上的 JQuery show() 和 hide() 具有值

> ID：12178712
> 
> 赞同：1
> 
> 时间：2012-08-29T13:08:00.693
> 
> 标签：javascript, jquery

我有两个 div 元素如下：

```
 <div class="sc-info" tags="abc mno">
     ....
  </div>

  <div class="sc-info" tags="abc xyz">
     ....
  </div> 
```

我想根据标签中存在的值执行 hide() 和 show()。如下所示

```
 $('div.sc-info[tags with "abc"]').hide()   // This should hide both divs

  $('div.sc-info[tags with "xyz"]').show()   //This should show only second one 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T13:09:32.510

使用**属性包含字选择器**( `~=`) 选择器

[http://api.jquery.com/attribute-contains-word-selector/](http://api.jquery.com/attribute-contains-word-selector/)

```
$('div.sc-info[tags~="abc"]').hide()

$('div.sc-info[tags~="xyz"]').show() 
```

* * *

**回复评论：**

> 当我检查多个单词时不起作用（即） str = "New York"; [str ~="abc New York"] 没有给出正确的结果。还有其他方法吗？

要在这些属性中选择多个单词，您必须过滤`div.sc.info`两个可能的属性选择器。

```
$('div.sc-info').filter('[tags~="abc"],[tags~="New York"]').hide() 
```

示例：http: [//jsfiddle.net/hunter/AS6Zp/](http://jsfiddle.net/hunter/AS6Zp/)

# x86-64 - RPM 不适用于 i386 (rhel6) 但它适用于 x86_64(rhel5)

> ID：12178713
> 
> 赞同：0
> 
> 时间：2012-08-29T13:08:02.237
> 
> 标签：x86-64, rpm, rhel, i386

安装包时`Test-5.0-201208280707.amd64.rpm`

我有一台 64 位 RHEL 6 机器，它的架构是 i386 ：

```
# cat /etc/redhat-release
Red Hat Enterprise Linux Server release 6.3 (Santiago)
# rpm --eval '%{_arch}'
i386 
```

当我尝试使用以下方式安装软件包时`rpm`：

```
rpm -ihv Test-5.0-201208280707.amd64.rpm 
```

它向我抱怨错误：

```
package Test-5.0-201208280707.amd64 is intended for a amd64 architecture 
```

当我尝试使用 x86_64 rhel5 架构做同样的事情时，它工作正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:18:50.337

您的 64 位计算机正在 32 位模式下运行。

在 32 位模式下，您只能安装 32 位 rpm。

在 64 位模式下，您可以安装 32 位和 64 位 rpm。

如果您真的想安装 64 位模式的 rpm，则必须使用 64 位安装光盘重新安装系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:11:05.870

> **包 Test-5.0-201208280707.amd64 用于 amd64 架构**

RPM 是预编译包，安装程序适用于 x86_64 类型的体系结构，而不是 i386。您不能在不同的平台上安装可执行文件，而不是在一个平台上，这是它的意思。否则结果可能是毁灭性的。

# macos - 如何在 Mac 上（在整个系统中）捕获光标移动和击键？

> ID：12178715
> 
> 赞同：1
> 
> 时间：2012-08-29T13:08:01.470
> 
> 标签：macos, keystroke, keylogger

也许你知道 Mac 的键盘大师程序。使用Keyboard Maestro，您可以通过按下自定义键盘快捷键来调用脚本，并且无论哪个应用程序正在运行，您都可以监听文本输入（例如，您可以在每次键入“cmd”时创建一个⌘...）。

如何在我的应用程序（在后台运行）中重新创建此行为？单独使用 Node.js 或 AppleScript 似乎无法重现，所以我认为我必须使用 C++ 或 Obj-C。我对吗？但我对其中之一没有经验。有教程吗？不可能这么难吧？我只想要一个系统范围的“on（keyPress，callback）”。而已。

谢谢你，皮波

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T05:01:59.430

我想我自己找到了？

你至少有两个选择。您可以使用 NSEvent 类 (Cocoa) 中的“addGlobalMonitorForEventsMatchingMask:handler”，但它无法处理某些击键（特定的系统快捷键等）。它更“高级”并且是只读的。“低级”解决方案具有读写能力并检测更多击键。它使用 CGEventTaps (Quartz)。你可以在这里找到一个例子：http: [//osxbook.com/book/bonus/chapter2/alterkeys/](http://osxbook.com/book/bonus/chapter2/alterkeys/)。

# jquery - 仅可见的 DIV

> ID：12178716
> 
> 赞同：-1
> 
> 时间：2012-08-29T13:08:06.980
> 
> 标签：jquery, css, html

> **可能重复：**
> [如何禁用所有 div 内容](https://stackoverflow.com/questions/639815/how-to-disable-all-div-content)

是否可以只显示 div 但不能点击其中的任何内容？像“阻塞”的div？因为我在这个 div 中有按钮、选择和一些信息，所以我只想让它可见但不工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:13:21.460

您可以在整个窗口上添加一个透明的 div。

```
$('body').append($('<div style="opacity:0; z-index:10; position:fixed; top:0; left:0; right:0; bottom:0">')); 
```

小提琴演示：http: [//jsfiddle.net/HeNwE/](http://jsfiddle.net/HeNwE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:16:42.697

是的。您可以简单地在内容顶部放置一个与容器大小相同的绝对定位 div。这将禁止与以下元素进行交互。

```
<style type="text/css">
#container{
    width:300px;
    height:300px;
    }

#shield{
    width:300px;
    height:300px;
    position:absolute;
    z-index:10;
    } 
```

```
<div id="container">
<div id="shield"></div>
<a href="#" title="">You can't click me</a>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:26:05.733

你可以这样做

```
<div onclick="return false">
... <!-- insert here your buttons -->
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T13:14:32.597

Lokase 的想法是正确的。

```
$(".wrapper-div-class").click(function(event) {
  event.preventDefault();
}); 
```

您还可以尝试在包含所有元素的 div 顶部创建一个 100% x 100% div z-indexed。

测试 Endy 处理页面上输入元素的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T13:14:38.727

将透明 div 添加到目标 div 中，覆盖整个内容。这是一个演示：http: [//jsfiddle.net/TkTx6/2/](http://jsfiddle.net/TkTx6/2/)

html：

```
<div>
    <div></div>
    <button></button>
    <input type="text">
</div> 
```

CSS：

```
div {
    width : 200px;
    height: 200px;
    background: red;        
}
div div {
    background : transparent;
    cursor: default;
    position: absolute;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T13:38:53.080

在 div 上添加一个透明层：[fiddle](http://jsfiddle.net/joplomacedo/xXhnc/)。

```
div {
    position: relative;
}

div:after {
    content: "";
    position: absolute;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
}​ 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-29T13:10:08.003

在要覆盖的任何元素上使用 preventDefault：

[event.preventDefault()](http://api.jquery.com/event.preventDefault/)

您也可以在特定情况下使用 stopPropagation

[event.stopPropagation](http://api.jquery.com/event.stopPropagation/)

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-08-29T13:14:21.470

您可以使用 Javascript 和 JQuery 在 div 上禁用所有输入元素，然后在您选择时启用它们。

例子：

```
$('.myDiv:input').each(function()) {
    $(this).prop('disabled', 'disabled');
} 
```

如果您不需要动态更改输入，则只需在元素中设置 'disabled="disabled"'。

这种方法也比“不可见的 div”更好，因为如果他/她不能点击页面上的控件或选择文本，它可能会让用户非常困惑。

# jakarta-ee - PDFBox Java EE 不工作

> ID：12178717
> 
> 赞同：0
> 
> 时间：2012-08-29T13:08:09.493
> 
> 标签：jakarta-ee, pdfbox

我写了一个包装类来抽象我经常使用的 PDFBox 的一些功能。它适用于 Java SE，但由于某种原因它不适用于 Java EE。

所有适当的罐子都在它们应该在的地方，包括公共日志记录。

是否有一个已知的原因为什么这不适用于 Java EE？有解决方法吗？

这是我得到的错误：

```
java.lang.ClassNotFoundException: org.apache.pdfbox.pdmodel.graphics.xobject.PDXObject
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
at com.idt.nwu.servlet.IDTNWUServlet.service(IDTNWUServlet.java:67)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:02:51.287

我将所需的罐子放在 WEB-INF/lib 目录中。现在一切正常...

# windows - 如何在 Delphi 中隐藏 MDI 子窗体？

> ID：12178720
> 
> 赞同：4
> 
> 时间：2012-08-29T13:08:13.970
> 
> 标签：windows, delphi, winapi, mdi

如何在 Delphi 中隐藏 MDIChild 窗口？

我在我的 MDI 孩子的 FormClose() 事件中使用此代码，但它似乎不起作用：

```
procedure TfrmInstrument.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  Action := caNone;
  ShowWindow(Handle, SW_HIDE);
  frmMainForm.MDIChildClosed(Handle);
end; 
```

我的子窗口被最小化而不是被隐藏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T14:35:22.813

有一个受保护的过程`TCustomForm`定义为：

```
procedure TCustomForm.VisibleChanging;
begin
  if (FormStyle = fsMDIChild) and Visible and (Parent = nil) then
    raise EInvalidOperation.Create(SMDIChildNotVisible);
end; 
```

在您的 MDI 子窗口中将其覆盖为：

```
procedure TMDIChildForm.VisibleChanging;
begin
  // :-P
end; 
```

[这是一个简单的例子](http://www.yousendit.com/download/TEhVblRwMHczeUpEZU1UQw)

在阅读了 Jeroen 的评论后，我尝试了另一种同样有效的解决方案，但有点闪烁：

```
procedure TMDIChildForm.VisibleChanging;
begin
  if Visible then
    FormStyle := fsNormal
  else
    FormStyle := fsMDIChild;
end; 
```

也许这适用于所有 Windows 版本。

PS：我在 Windows 2k3SP2 x86 和 Windows 7 Ultimate x86 上的第一个解决方案没有发现任何问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:30:04.270

您不能隐藏 MDI 子窗口。这是 Win32 的限制。

# python - numpy 数组 - unravel_index of argmax v. argmax of sum

> ID：12178721
> 
> 赞同：1
> 
> 时间：2012-08-29T13:08:21.403
> 
> 标签：python, numpy, scipy

我试图沿一个轴边缘化一个数组，并检查一维峰值是否出现在与原始二维峰值相同的相关索引处。以下断言在什么情况下（形式`x`）会失败？

```
def check(x,axis=None):
    import numpy
    m = numpy.sum(x, axis=axis)
    v,w = numpy.unravel_index(numpy.argmax(x), x.shape)
    assert(v==numpy.argmax(m))
    return 
```

对于`x=numpy.array(range(15)).reshape(5,3)`,`check(x,axis=0)`会引发错误，但`check(x,axis=1)`不会。我不明白为什么 an`AssertionError`会被提出 - 我是不是很愚蠢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:13:19.210

您正在检查未分解索引的错误坐标。代替

```
v,w=numpy.unravel_index(numpy.argmax(x),x.shape)
assert(v==numpy.argmax(m)) 
```

你可能想要

```
vw = numpy.unravel_index(numpy.argmax(x),x.shape)
assert vw[1 - axis] == numpy.argmax(m) 
```

也许

```
v,w=numpy.unravel_index(numpy.argmax(x),x.shape)
assert (v if axis == 1 else w) == numpy.argmax(m) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:34:52.807

你的`axis`论点的价值是至关重要的。

带数组，`x`会给你`(N, M)``m=np.sum(x, axis=axis)`

*   一个标量 if `axis=None`;
*   一个`M`数组 if `axis=0`;
*   一个`N`数组 if `axis=1`。

因此，您`np.argmax(m)`将始终为 0 if ，或者和(resp. ) if (resp. )`axis=None`之间的整数。`0``M``N``axis=0``axis=1`

但是，您`(v, w) = np.unravel_index(...)`将始终将您`v`作为 0 和 之间的整数给出`N`。

如您所见，对于`axis=0`，潜在值的范围`m`与 for 不同`v`，而对于`axis=1`。

因此，`m`与`v`if`axis=1`或`w`if进行比较`axis=0`（@ecatmur 的回答向您展示了如何）。

# joomla - 升级到 Joomla 2.5.6 - “无法执行：/usr/sbin/sendmail”

> ID：12178723
> 
> 赞同：0
> 
> 时间：2012-08-29T13:08:28.423
> 
> 标签：joomla, sendmail, joomla2.5, phpmailer, php

在升级到 Joomla 2.5 以便我可以使用最新版本的 Virtuemart 后，系统电子邮件不再起作用。

我已经根据 php.ini 文件中的条目检查了 Sendmail 路径。(/usr/sbin/sendmail)。

如果我尝试 Joomla 的 Sendmail 选项，我会得到`Could not execute: /usr/sbin/sendmail.`

如果我尝试 PHP Mail，我会得到`Could not instantiate mail function.`

另外，我不能再上传模板：

```
JFolder::create: Could not create directory
Warning: Failed to move file! 
```

我知道我可以 777 所有相关文件夹以使其正常工作，但这是不可接受的。此外，这当然无助于邮件问题。

文件权限与以前相同。我的虚拟主机需要更改哪些内容才能让 Joomla 执行我升级之前所做的事情？

谢谢，

安迪

[编辑] 我复制了站点，导出了 SQL 并迁移到不同的服务器进行测试。一切正常，所以我可以确认问题不在于我的 Joomla 安装，而在于服务器环境。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T08:14:19.527

Joomla 2.5.8 也有同样的问题。我刚刚更改了 Global Cnf-Server-Mail 设置。SendMail 更改为 PHP Mail 并没有问题了..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:49:50.680

首先，不要对777设置任何权限，这是必要的，而且存在安全风险。你确定你的权限是正确的吗？进入管理员，然后站点 > 系统信息 > 目录权限并确保所有内容都是可写的。文件夹应该是 755，文件应该是 644。

如果您之前启用了 FTP 模式，您可能想要查看那里。但是，与其使用 FTP 模式，不如使用以 CGI 模式运行 PHP 的主机。它不仅更安全，而且通常可以解决大多数权限问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T14:22:23.470

网络主机已经解决了这个问题。我在这里引用他们的解决方案：

“在服务器全局 php.ini 文件中，出于安全原因，我们禁用了一些功能，因此要覆盖它，您只需在文档根文件夹（public_html 文件夹下）下创建自定义 php.ini 文件并更新/更改/启用值为了让您的网站正常运行。

请注意，这样做是为了安全，以避免任何外部黑客/恶意软件等。

您只需将 php.ini（上传到 public_html 文件夹）复制/粘贴到您正在运行应用程序的其他域帐户的目录位置。

即使关闭本地 php.ini 中的值，脚本/应用程序也会正常工作，因为它会覆盖全局 php.ini 文件中的值。请注意，由于服务器上启用了 suPHP，因此用户可以选择创建自己的自定义 php.ini 文件并覆盖全局设置的实际值。

我已经上传了 public_html 文件夹下的自定义 php.ini 文件，然后 sendmail 开始工作了。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T14:10:11.287

您的托管解决方案是否与 Joomla 要求兼容：mysql 和 php 版本？

如果是：
- 使用您的 ftp 客户端检查 Joomla 文件夹所有者
- 安装从 2.5 到 2.5.x 的手动升级补丁（可能某些文件在更新过程中损坏）
- 在所需文件夹上尝试 chmod 777

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T15:38:34.010

请检查全局配置中的邮件设置..

Joomla管理员->站点->全局配置->服务器->邮件设置

*   将 mailer 选项更改为 sendmail，然后检查
*   在升级过程中，有时补丁文件可能会损坏或丢失。可能这也导致了这个问题。
*   **JFolder::create:由于文件夹权限，**无法创建发生此警告的目录。**检查您的文件夹权限。**

# python - 在 Python 中通过代理将 XML 数据发布到服务器

> ID：12178724
> 
> 赞同：1
> 
> 时间：2012-08-29T13:08:29.553
> 
> 标签：python, http, xml-rpc, httplib, httplib2

我需要发送一个包含以下格式数据的请求：

```
parameterss = urlencode({'various': 'credentials', ... ,
'xmlquery': '<?xml version="1.0" encoding="UTF-8"?> \
         <query>...</query>'}) 
```

通常，它包含一个 XML 查询。假设我希望它发送的服务器是`https://some/server`并且我的代理是`proxy:port_number`. 我尝试通过以下方式使用`httplib2`with ：`SocksiPy`

```
import httplib2, socks
from urllib import urlencode
proxy = httplib2.ProxyInfo(proxy_type=socks.PROXY_TYPE_HTTP, proxy_host='proxy', proxy_port=port_number)
http = httplib2.Http(proxy_info=proxy)
response, content = http.request("https://some/server", "POST", parameters)
print response 
```

它有效，但响应不是预期的。显然是因为我需要使用 HTTPS 代理（这是相同的）。我没有任何证书信息 - 类似的工作 Perl 脚本不使用，它将代理定义为环境变量。`SocksiPy`has`PROXY_TYPE_SOCKS4`和`PROXY_TYPE_SOCKS5`constants 但是，我不知道如何使用它们（不定义证书会引发异常）。请指出我如何做到这一点。

也许它适合使用`httplib`with `xmlrpclib`？如何定义这些并放在一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:05:43.807

终于找到方法了，分享一下。它比预期的要简单得多：

```
 import urllib, urllib2
    parameters = urllib.urlencode({'various': 'credentials', ... ,
    'xmlquery': '<?xml version="1.0" encoding="UTF-8"?> \
     <query>...</query>'})
    request = urllib2.Request("https://some/server", parameters)
    response = urllib2.urlopen(request)
    print response 
```

我不知道为什么，但它没有在代码中定义任何代理就可以工作——我只是通过 shell 中的环境变量在服务器上定义了它。

# sql - 计算每个不同的标签

> ID：12178728
> 
> 赞同：0
> 
> 时间：2012-08-29T13:08:41.483
> 
> 标签：sql, tags, count, distinct

```
SELECT GROUP_CONCAT(DISTINCT tag) AS tags, filename, COUNT(tag) AS count
FROM dados
GROUP BY filename
ORDER BY filename 
```

我有那个查询，它显示了每部电影的所有标签，没有重复标签。但现在我想在每个标签前面显示重复次数。像这样的东西：电影（20），火车（50）等。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:16:14.780

为此，您需要一个子查询：

```
select filename, group_concat(tagstr separator ',') as tags,
       count(*) as NumDistinctTags,
       sum(cnt) as NumTags
from (select filename, tag,
             concat(tag, ' (', count(*), ')') as tagstr,
             count(*) as cnt
      from dados d
      group by filename, tag
     ) d
group by filename
order by filename 
```

内部查询为每个标签创建您想要的字符串。外部将它们放在文件名级别。

由于 group_concat，我假设您正在使用 MySQL。在 SQL 的其他方言中，concat 运算符的表达方式可能不同。

# php - YouTube API v2.0 - OAuth 2.0 授权

> ID：12178730
> 
> 赞同：3
> 
> 时间：2012-08-29T13:08:43.983
> 
> 标签：php, api, curl, oauth, youtube

我正在尝试使用 Oauth 和 yt API。我想尝试基于浏览器的 youtube 上传。但首先我必须让用户可以允许程序访问我的页面。 [https://developers.google.com/youtube/2.0/developers_guide_protocol_browser_based_uploading#Browser_based_uploading](https://developers.google.com/youtube/2.0/developers_guide_protocol_browser_based_uploading#Browser_based_uploading)

但首先我需要获得一个 ACCESS_TOKEN，这就是我需要 OAuth 2.0 访问令牌的原因。但由于某种原因，我无法得到它。我在做什么错？

所以首先我去 reddir.php 并点击链接，所以我被重定向以允许程序使用我的 yt 帐户。

**==> 我需要发送的示例发布请求**

> POST /o/oauth2/token HTTP/1.1 主机：accounts.google.com 内容类型：application/x-www-form-urlencoded
> 
> code=4/ux5gNj-_mIu4DOD_gNZdjX9EtOFF&client_id=1084945748469-eg34imk572gdhu83gj5p0an9fut6urp5.apps.googleusercontent.com&client_secret=hDBmMRhz7eJRsM9Z2q1oFBSe&redirect_uri=http://localhost/oauth2callback&grant_type=

**=> redir.php**

```
<?php   
    $Access_token   =   'https://accounts.google.com/o/oauth2/auth?
                        client_id=xxxxxxxxxxxx.apps.googleusercontent.com&  
                        redirect_uri=http://sdesigns.be/UNSharp/obtain_token.php&
                        scope=https://gdata.youtube.com&
                        response_type=code&
                        access_type=offline';               

    echo '<a href="' . $Access_token . '">Click here to obtain a token2</a>';
?> 
```

**=> 获得_token.php**

```
<?php
           //this file is  
    $client_id = 'xxxxxxxxxxxx.apps.googleusercontent.com';
    $client_secret = 'xxxxxxxxxxxxxxxxxxxxxxxxx';
    $redirect_uri = 'http://sdesigns.be/UNSharp/obtain_token.php';

    $author_code = $_GET["code"];

    echo 'Author code: <br>' .$author_code . '<br>';

    $oauth2token_url = "https://accounts.google.com/o/oauth2/token";
    $clienttoken_post = array(
                            "code" => $code,
                            "client_id" => $client_id,
                            "client_secret" => $client_secret,
                            "redirect_uri" => $redirect_uri,
                            "grant_type" => "authorization_code"
                        );

    $curl = curl_init($oauth2token_url);
    curl_setopt($curl, CURLOPT_POST, true);
    curl_setopt($curl, CURLOPT_POSTFIELDS, $clienttoken_post);
    curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

    $json_response = curl_exec($curl);

    echo 'RESULT code: <br>' ;
    var_dump($json_response);
    echo '<br>';    

    curl_close($curl);                                          
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:08:40.683

您的`$body2`字符串可能存在一些编码问题，因为[`curl_setopt()`](http://php.net/manual/en/function.curl-setopt.php)那里有一个 urlencoded 字符串。

只需将参数作为键值对提供，如[本示例](http://www.jensbits.com/2011/12/20/authenticating-with-oauth-2-0-for-google-api-access-with-php/)中所做的那样，因此您不必关心 urlencoding 字符串：

```
$oauth2token_url = "https://accounts.google.com/o/oauth2/token";
$clienttoken_post = array(
"code" => $code,
"client_id" => $client_id,
"client_secret" => $client_secret,
"redirect_uri" => $redirect_uri,
"grant_type" => "authorization_code"
);

$curl = curl_init($oauth2token_url);

curl_setopt($curl, CURLOPT_POST, true);
curl_setopt($curl, CURLOPT_POSTFIELDS, $clienttoken_post);
curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

$json_response = curl_exec($curl);
curl_close($curl); 
```

# mysql - query optimization - 'where not in' on self

> ID：12178731
> 
> 赞同：1
> 
> 时间：2012-08-29T13:08:49.817
> 
> 标签：mysql

I am trying to develop a query that will delete all but the most recently added row in a database. This is based on a Timestamp field, that is stored as a string and a User ID field that is stored as a string..

```
table.Timestamp -> text field
table.Retrieving_User -> text field 
```

This is the query I have developed. We have around 50K records in this database and it runs very slowly. I hope its not because of the string to date conversion that I'm doing, because this needs to be done.

```
DELETE 
FROM `table` main
WHERE (main.Retrieving_User, STR_To_DATE( main.Timestamp , '%a %b %d %H:%i:%s CST %Y' )) NOT IN 
    (SELECT  sub.Retrieving_User, MAX( STR_To_DATE( sub.Timestamp , '%a %b %d %H:%i:%s CST %Y' )) 
    FROM `table` sub
    WHERE sub.Retrieving_User = 'userID'
    GROUP BY sub.Retrieving_User )
AND main.Retrieving_User = 'userID' 
```

Does anyone know of a more efficient way of doing what I'm trying to do?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:19:57.487

Something like this might work faster because it does not use the IN statement that might be looping again and again over an in memory table. Backup and try

```
DELETE 
FROM `table` main
WHERE STR_To_DATE( main.Timestamp , '%a %b %d %H:%i:%s CST %Y' )<
  (SELECT  MAX( STR_To_DATE( sub.Timestamp , '%a %b %d %H:%i:%s CST %Y' ) 
   FROM `table` sub
   WHERE sub.Retrieving_User = main.Retrieving_User )
AND main.Retrieving_User = 'userID' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:41:48.663

Whenever you're deleting many rows and the number of rows that you are keeping is a much smaller portion than those you are deleting, this trick from MySQL [documentation](http://dev.mysql.com/doc/refman/5.0/en/delete.html) works really well:

> If you are deleting many rows from a large table, you may exceed the lock table size for an InnoDB table. To avoid this problem, or simply to minimize the time that the table remains locked, the following strategy (which does not use DELETE at all) might be helpful:
> 
> ```
> Select the rows not to be deleted into an empty table that has the same structure as the original table:
> 
> INSERT INTO t_copy SELECT * FROM t WHERE ... ;
> 
> Use RENAME TABLE to atomically move the original table out of the way and rename the copy to the original name:
> 
> RENAME TABLE t TO t_old, t_copy TO t;
> 
> Drop the original table:
> 
> DROP TABLE t_old; 
> ```

Another method to improve delete time with MyISAM is to use DELETE QUICK and then OPTIMIZE TABLE afterward, also from MySQL documentation:

> If you are going to delete many rows from a table, it might be faster to use DELETE QUICK followed by OPTIMIZE TABLE. This rebuilds the index rather than performing many index block merge operations.

Here's [IvoTops answer](https://stackoverflow.com/questions/12178731/query-optimization-where-not-in-on-self/12178950#12178950) optimized. We simply convert the date back to a string so we don't have to do the conversion again in the outer query:

```
DELETE 
FROM `table` main
WHERE main.Timestamp <>
  (SELECT DATE_FORMAT(MAX(STR_To_DATE( sub.Timestamp , '%a %b %d %H:%i:%s CST %Y'), '%a %b %d %H:%i:%s CST %Y') 
   FROM `table` sub
   WHERE sub.Retrieving_User = main.Retrieving_User )
AND main.Retrieving_User = 'userID' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:21:43.350

I think your performance issue is linked to the NOT IN statement. You'd probaly be better off with

```
DELETE `table`
FROM `table` main,
     (SELECT  sub.Retrieving_User, MAX( STR_To_DATE( sub.Timestamp , '%a %b %d %H:%i:%s CST %Y' )) maxTime
    WHERE sub.Retrieving_User = 'userID'
    GROUP BY sub.Retrieving_User) sub
WHERE STR_To_DATE( main.Timestamp , '%a %b %d %H:%i:%s CST %Y' ) < sub.maxTime
  AND main.Retrieving_User = 'userID'; 
```

# model-view-controller - Knockout.js 通过 id 动态选择选项

> ID：12178738
> 
> 赞同：0
> 
> 时间：2012-08-29T13:09:11.630
> 
> 标签：model-view-controller, knockout.js

我想知道是否有可能从函数中获取选择选项值，该函数是用参数调用的。

例如：

我的标记

```
<select data-bind="options: $root.getOptions('one', $data.ID), optionsCaption: '...', optionsText:'Txt', optionsValue:'ID'"> 
```

我的js

```
 self.getSelectionData = function (type, param) {
    if (type == "one") {
        var idParam = new Object();
        idParam.id = param();
        $.getJSON('/MyController/MyGetAction', idParam, function (result) {
            var r = ko.mapping.fromJS(r);
            return r;
        });
    }
}; 
```

“r”确实包含正确的数据，但选择中没有显示任何数据。

我尝试了几件事，但无法做到。任何想法（或暗示我做错了）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:26:43.720

您应该放在`return`前面，`$.getJSON`因为您的`getSelectionData`函数不返回任何内容而不是 JSON 请求的结果：

```
return $.getJSON('/MyController/MyGetAction', idParam, function (result) {
    var r = ko.mapping.fromJS(result);
    return r;
}); 
```

或者您可以`r`在`getSelectionData`函数中定义：

```
 self.getSelectionData = function (type, param) {
    if (type == "one") {
        var idParam = new Object();
        idParam.id = param();
        var r;
        $.getJSON('/MyController/MyGetAction', idParam, function (result) {
            r = ko.mapping.fromJS(result);
        });
        return r;
    }
}; 
```

# php - 为什么 CodeIgniter 的 Excel CSV 助手会附加页面源？

> ID：12178739
> 
> 赞同：1
> 
> 时间：2012-08-29T13:09:15.850
> 
> 标签：php, codeigniter, pyrocms

我在 PyroCMS 中为 CodeIgniter 使用 Excel CSV 帮助程序，它工作正常，除了它将页面的 html 源附加到文件的末尾。

这里应该是最后一行，然后是页面 html 的开头；

```
18,10629,"2010-03-06 15:25:14","2010-03-06 15:43:01",905,6.4,53.7,9410,Server01,"2010-03-06 15:43:46",25.5
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <!-- Meta data -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

就这样一直持续到页面的 html 结束。

这是我在控制器中对它的调用；

```
if(isset($_POST['csv'])){
$unlmited_result_array = $this->db->get()->result_array();
$top_row[0] = array_keys($unlmited_result_array[0]);
$toto = array_merge($top_row, $unlmited_result_array);
array_to_csv($toto, 'toto.csv');
} 
```

我正在使用以下表格来调用它；

```
<?php
echo form_open('cip')
. form_hidden('Trucknumber', $_POST['Trucknumber'])
. form_hidden('VechicleRegistration', $_POST['VechicleRegistration'])
. form_hidden('from-date', $_POST['from-date'])
. form_hidden('to-date', $_POST['to-date'])
. form_submit('csv', $this->lang->line('cip:CSV'))
. form_close();
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T17:44:38.167

在控制器中，显示 array_to_csv() 后，添加一个返回。它将阻止视图被加载。

另一种选择：使用控制器方法显示表单，使用另一种方法显示 CSV。

# qt - 使用样式表时，子类 QLabel 中的文本换行不起作用

> ID：12178740
> 
> 赞同：1
> 
> 时间：2012-08-29T13:09:17.177
> 
> 标签：qt

我将 QLabel 子类化如下：

```
class TestLabel: public QLabel
{
    Q_OBJECT
public:
    TestLabel(QWidget *parent = 0):QLabel(parent){}
    TestLabel(const QString& text, QWidget *parent = 0):QLabel(text, parent){}

protected:
    void paintEvent(QPaintEvent *paint)
     {
         QStyleOption opt;
         opt.init(this);
         QPainter p(this);
         style()->drawPrimitive(QStyle::PE_Widget, &opt, &p, this);
         style()->drawItemText(&p,this->rect(),Qt::AlignLeft, (this->palette()), true, this->text());

     }
}; 
```

我已按如下方式设置样式表：

```
TestLabel {
    font-size: 16px;
    color: rgb(127, 127, 127);
} 
```

我正在尝试使用以下方法包装文本：`tlab->setWordWrap(true);` 在覆盖paintEvent之前，文本被正确包装。但是现在，文本不再被换行。[文档](http://doc.qt.nokia.com/4.7-snapshot/qstylepainter.html#drawItemText)说“**文本根据标志对齐和包装”。**，但是我如何传入两个标志（它们都是不同的枚举）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:19:21.537

好的。我得到了答案。我看错课了。我在看 QTextOption::WordWrap。

我需要使用**Qt::TextWordWrap**作为`Qt::AlignLeft | Qt::TextWordWrap`

# java - 如何使用 JasperReports API 将生成的 pdf 保存到服务器中

> ID：12178748
> 
> 赞同：0
> 
> 时间：2012-08-29T13:09:25.150
> 
> 标签：java, jasper-reports

我需要将生成的*PDF*文件保存到我的服务器中。我正在使用*JasperReports API*。

*PDF*生成的代码示例：

```
//Result set(rs)
//Report path (rptPath)
//Hash map (hmp)
//ServletOutputStream (sos)
//HttpServletResponse (resp)

JRResultSetDataSource jrrs = new JRResultSetDataSource(rs);
bytes = JasperRunManager.runReportToPdf(rptPath, hmp, jrrs);
sos = resp.getOutputStream();
resp.setContentType("application/pdf");

resp.setHeader("Content-Disposition", "attachment;filename="MyFile.pdf");

sos.write(bytes);

sos.flush();
sos.close(); 
```

它直接生成文件并要求下载。我想将生成的文件存储到服务器中的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:14:39.610

您需要将字节写入服务器上的本地文件，而不是为此将其写回 HttpResponse。您的代码可能如下所示：

```
FileOutputStream fileOuputStream = new FileOutputStream("C:\\report.pdf");
fileOuputStream.write(bytes);
fileOuputStream.close(); 
```

# c# - twainlib 如何在 ShowUI = False 时设置扫描属性

> ID：12178749
> 
> 赞同：2
> 
> 时间：2012-08-29T13:09:26.450
> 
> 标签：c#, winforms, twain

我使用 TwainLib.cs 在我的 c# 项目中进行扫描，[这段代码](http://www.koders.com/csharp/fidA408F1179B1F00D9D1AF6CEF6E29EFD694F79047.aspx?s=button)与我开始使用的相同

为了不显示扫描仪的 UI 界面，我使用 guif.ShowUI = 0 并且它可以工作，但图像质量较低，即使图像中的条形码未读取，

我一步一步地找到了 dpi 或发送的颜色位来更改它们的位置，但我失败了：/

当我在不显示 UI 的情况下进行扫描时，如何更改扫描质量（dpi、颜色...）？

**编辑 ：**

我添加了 iinf.XResolution = 200 但结果相同（分辨率较低的图像）

```
 pxfr.Count = 0;
                IntPtr hbitmap = IntPtr.Zero;

                TwImageInfo iinf = new TwImageInfo();
                iinf.XResolution = 200;
                iinf.YResolution = 200;
                rc = DSiinf(appid, srcds, TwDG.Image, TwDAT.ImageInfo, TwMSG.Get, iinf);
                if (rc != TwRC.Success)
                {
                    CloseSrc();
                    return tifFiles;
                }

                rc = DSixfer(appid, srcds, TwDG.Image, TwDAT.ImageNativeXfer, TwMSG.Get, ref hbitmap);
                if (rc != TwRC.XferDone)
                {
                    CloseSrc();
                    return tifFiles;
                } 
```

如果隐藏了制造商的用户界面，我想知道在哪里可以插入 dpi 分辨率

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:01:40.607

您可以使用 ICAP_XRESOLUTION 和 ICAP_YRESOLUTION 更改分辨率。

# javascript - 骨干转JSON

> ID：12178750
> 
> 赞同：5
> 
> 时间：2012-08-29T13:09:28.603
> 
> 标签：javascript, json, backbone.js, zepto, parse-platform

我要么非常疲倦，要么真的很困惑......但我不确定......我有一个 parse.com javascript 设置（它与backbone.js 完全一样，只是使用解析而不是主干）。我有一个模型和一个系列，这一切都有效。但是该死的 toJSON(); 不起作用，它只会在 console.log 中返回一个 [] ...但是，如果我在 Chrome 控制台中运行相同的函数，它会起作用并返回正确的值。

有什么帮助！？

所有这些可爱的代码都包装在一个准备好的文档中（并且它还有一些其他的不相关的代码，是的，我已经完成`Parse.initialize()`了它。

```
 var Schedule = Parse.Object.extend({
    className: "schedule"
  });

  var ScheduleList = Parse.Collection.extend({
    model: Schedule
  });

   schedule = new ScheduleList();
      schedulejs3 = schedule.toJSON();
      schedule.query = new Parse.Query(Schedule);
      schedule.query.ascending("date");
      schedule.query.limit('500');
      schedulejs2 = schedule.toJSON();
      schedule.fetch();

      schedulejs = schedule.toJSON();
      console.log(schedulejs,schedulejs2,schedulejs3); <-- All three return []

  var ScheduleView = Parse.View.extend({
    el: $("#schedule-holder"),
    initialize: function() {
      this.schedule = new ScheduleList();
      this.schedule.query = new Parse.Query(Schedule);
      this.schedule.query.ascending("date");
      this.schedule.query.limit('500');

      this.schedule.fetch();

      this.schedule.js = this.schedule.toJSON();

      this.render;
    },

    render: function() {
      var template = Handlebars.compile($("#schedule-item").html());
      $(this.el).html(template({shows: this.schedule.toJSON()}));
      return this;
    }
  });

  var App = new ScheduleView().render(); 
```

但是如果我在 Chrome 中打开控制台并运行 schedule.toJSON(); 我得到了正确的值......正如你所看到的，我已经试图解决这个问题（以防你想知道为什么一切都在这个地方）。还有一点需要注意的是，我使用的是 Zepto.js 而不是 jQuery。

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-29T13:17:58.080

可能在您执行`schedule.toJSON()`时它仍然是空的。

请记住，这`Collection.fetch()`是一个**异步**方法。

尝试修改这一行：

```
schedule.fetch(); 
```

这样：

```
schedule.fetch({ success: function() { console.log( "what about now?", schedule.toJSON() ) } }; 
```

（可能您会遇到*上下文*问题，尝试使`schedule`变量可以访问 `success`处理程序）

# c - 将两个 4x4 矩阵连接在一起？

> ID：12178755
> 
> 赞同：1
> 
> 时间：2012-08-29T13:09:33.853
> 
> 标签：c, 3d, matrix

我有一个矩阵类型，定义为：

```
struct __transform_t
{
    float m11, m12, m13, m14;
    float m21, m22, m23, m24;
    float m31, m32, m33, m34;
    float m41, m42, m43, m44;
}; 
```

**我如何将一个矩阵连接到另一个矩阵？**我想“合并”这些矩阵以获得结合两种转换的结果。基本上，我正在尝试制作一个简单的分层系统，因此如果父层被转换，子层（即在父层内部的视觉）也应该继承这些转换并拥有自己的转换。

我正在尝试像下面的示例中那样做，但我认为这不是正确的方法：

```
void transform_concat(transform_t* orig, transform_t* delta)
{
#define __act(x) orig->m##x += delta->m##x;

    __act(11); __act(12); __act(13); __act(14);
    __act(21); __act(22); __act(23); __act(24);
    __act(31); __act(32); __act(33); __act(34);
    __act(41); __act(42); __act(43); __act(44);

#undef __act
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:12:01.127

这听起来像[变换矩阵合成](http://en.wikipedia.org/wiki/Transformation_matrix#Composing_and_inverting_transformations)，所以查找[矩阵乘法](http://en.wikipedia.org/wiki/Matrix_multiplication)。由于矩阵中的每个值都有明确的字段，因此很难编写循环实现。

# ios - uitableview中选定单元格的灯箱效果

> ID：12178760
> 
> 赞同：1
> 
> 时间：2012-08-29T13:09:44.087
> 
> 标签：ios, uitableview

我想在 uitableview 中的所有未选择的单元格上方添加透明层。我实现了以下代码：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    customCell *selectedCell = (customCell*)[tableView cellForRowAtIndexPath:indexPath];

    overlayAboveSelectedCell = [[UIView alloc] initWithFrame:CGRectMake(listViewTable.frameOrigin.x, listViewTable.frame.origin.y, listViewTable.frameWidth, selectedCell.frameOrigin.y)];
    overlayAboveSelectedCell.backgroundColor = [UIColor colorWithWhite:0 alpha:0.5];
    [self.view insertSubview:overlayAboveSelectedCell aboveSubview:listViewTable];

    overlayBellowSelectedCell = [[UIView alloc] initWithFrame:CGRectMake(listViewTable.frameOrigin.x, selectedCell.frameOrigin.y+selectedCell.frameHeight, listViewTable.frameWidth, listViewTable.frameHeight-selectedCell.frameOrigin.y-selectedCell.frameHeight)];
    overlayBellowSelectedCell.backgroundColor = [UIColor colorWithWhite:0 alpha:0.5];
    [self.view insertSubview:overlayBellowSelectedCell aboveSubview:listViewTable];

    listViewTable.scrollEnabled = NO;

    [selectedCell doSomething];
} 
```

它工作正常，有一个例外 - 所有坐标都是针对原始单元格位置计算的（即，即使用户向下滚动，单元格原点也保持不变，因此不应该变暗的屏幕部分可能放置错误。怎么可能我修改代码以便考虑所选单元格的实际坐标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:33:51.947

[使用尼克对从“可见”区域或窗口获取 UITableviewCell 位置](https://stackoverflow.com/questions/5926554/get-uitableviewcell-position-from-visible-area-or-window)的回答，我能够获得所选单元格的当前位置。

新实现：

```
customCell *selectedCell = (customCell*)[tableView cellForRowAtIndexPath:indexPath];
CGRect position = [tableView convertRect:[tableView rectForRowAtIndexPath:indexPath] toView:[tableView superview]];

overlayAboveSelectedCell = [[UIView alloc] initWithFrame:CGRectMake(listViewTable.frame.origin.x, listViewTable.frame.origin.y, listViewTable.frameWidth, position.origin.y)];
overlayAboveSelectedCell.backgroundColor = [UIColor colorWithWhite:0 alpha:0.5];
[self.view insertSubview:overlayAboveSelectedCell aboveSubview:listViewTable];

overlayBellowSelectedCell = [[UIView alloc] initWithFrame:CGRectMake(listViewTable.frameOrigin.x, position.origin.y+selectedCell.frameHeight, listViewTable.frameWidth, listViewTable.frameHeight-position.origin.y-selectedCell.frameHeight)];
overlayBellowSelectedCell.backgroundColor = [UIColor colorWithWhite:0 alpha:0.5];
[self.view insertSubview:overlayBellowSelectedCell aboveSubview:listViewTable];

listViewTable.scrollEnabled = NO; 
```

# list - Ant 中使用列表的并行作业

> ID：12178768
> 
> 赞同：4
> 
> 时间：2012-08-29T13:10:22.097
> 
> 标签：list, ant, parallel-processing, ant-contrib

我正在尝试在 Ant 上运行并行任务。
用户提供服务器列表（`-Drhosts="rhost1,rhost2,..."`），系统每次只能使用不同的主机启动相同的目标。
`<ac:for>`并且`<ac:foreach>`只支持`<sequential>`，不支持`<parallel>`

任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T02:36:44.263

它通过指定一个属性来支持并行运行。

Ant-contrib`<for>`任务参数：

> parallel
> 如果为 true，则嵌套的所有迭代都将并行执行。默认为 false，强制按顺序执行迭代。由调用者确保并行执行是安全的。
> 
> threadCount
> 并行执行时允许的最大线程数。

所以如果你可以设置`parallel="true"`. `<sequential>`请注意，与嵌套元素无关，因为里面的任务`<sequential>`还是按顺序执行的；通过设置`parallel`参数，你告诉`<for>`任务同时执行多个`<sequential>`s——多少个？这取决于列表中元素的数量以及`threadCount`.

请检查

[http://ant-contrib.sourceforge.net/tasks/tasks/for.html](http://ant-contrib.sourceforge.net/tasks/tasks/for.html)

查看所有参数。

* * *

对于`<foreach>`任务，它为列表中的每个元素或嵌套文件集中的每个文件执行指定的目标。您还可以使用`parallel`属性使执行并行。

查看

[http://ant-contrib.sourceforge.net/tasks/tasks/foreach.html](http://ant-contrib.sourceforge.net/tasks/tasks/foreach.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T07:35:05.447

这是示例代码：

```
 <for list="some_list" param="list_param" delimiter="any_delimiter" parallel="true">
     <sequential>
        ...         
     </sequential>
 </for> 
```

# vb.net - 在堆积条形图中，如何找到我点击的条形图？

> ID：12178769
> 
> 赞同：0
> 
> 时间：2012-08-29T13:10:22.883
> 
> 标签：vb.net, teechart

目前我有一个名为 tChart 的带有 tChart 控件的表单：..

```
Private Sub txtChart1_Click(sender As System.Object, e As System.EventArgs) Handles txtChart1.Click

TChart1.Series.Clear()

Dim series1 As New Steema.TeeChart.Chart

Dim FirstLabel = New Label()
FirstLabel.Name = "FirstLabel.Name"
FirstLabel.Text = " FirstLabel.Text"

Dim SecondLabel = New System.Windows.Forms.Label()
Dim GridBand = New Steema.TeeChart.Tools.GridBand()

'Main bar 1
Dim BarSeries1 = New Steema.TeeChart.Styles.Bar()
BarSeries1.Brush.Color = System.Drawing.Color.FromArgb(192, 255, 48)
BarSeries1.MultiBar = Steema.TeeChart.Styles.MultiBars.Stacked
BarSeries1.Pen.Color = Color.FromArgb(48, 255, 192)
BarSeries1.Title = "barSeries1"
BarSeries1.XValues.DataMember = "X"
BarSeries1.XValues.Order = Steema.TeeChart.Styles.ValueListOrder.Ascending
BarSeries1.YValues.DataMember = "Bar"

BarSeries1.Add({123, 123, 123, 123, 123})

TChart1.Series.Add(BarSeries1)

'Main bar 2
Dim BarSeries2 = New Steema.TeeChart.Styles.Bar()
BarSeries2.Brush.Color = System.Drawing.Color.FromArgb(48, 255, 192)
BarSeries2.MultiBar = Steema.TeeChart.Styles.MultiBars.Stacked
BarSeries2.Pen.Color = Color.FromArgb(48, 255, 192)
BarSeries2.Title = "barSeries2"
BarSeries2.XValues.DataMember = "X"
BarSeries2.XValues.Order = Steema.TeeChart.Styles.ValueListOrder.Ascending
BarSeries2.YValues.DataMember = "Bar"

BarSeries2.Add({123, 123, 123, 123, 123})

TChart1.Series.Add(BarSeries2)

TChart1.Aspect.SmoothingMode = Drawing2D.SmoothingMode.HighQuality

End Sub 
```

...在同一个表单类中，我有这个事件处理程序...

```
Private Sub TChart1_MouseDown(sender As Object, e As System.Windows.Forms.MouseEventArgs) Handles TChart1.MouseDown
mouseX.Text = e.X
mouseY.Text = e.Y

If TChart1.Series.Count > 0 Then

Dim CollectionOfBars As New List(Of String)

For idxSeries As Integer = 0 To TChart1.Series.Count - 1
Dim srs As Steema.TeeChart.Styles.Bar = TChart1.Series(idxSeries)

If srs.BarBounds.Contains(e.X, e.Y) Then
CollectionOfBars.Add(srs.TitleOrName)
End If

Next

txtCollisions.Text = Join(CollectionOfBars.ToArray, ", ")
End If

End Sub 
```

...但它的作用只适用于最后一堆酒吧。我需要适用于所有酒吧的东西。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:12:27.507

您应该尝试使用 Clicked 方法：

```
If srs.Clicked(e.X, e.Y) <> -1 Then
CollectionOfBars.Add(srs.TitleOrName)
End If 
```

而不是您使用的代码：

```
If srs.BarBounds.Contains(e.X, e.Y) Then
CollectionOfBars.Add(srs.TitleOrName)
End If 
```

它也可能更适合使用 ClickSeries 事件来完成这项工作。如果这没有帮助，请不要犹豫，让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:39:32.067

```
Private Sub tctChartBar_Click(Sender As Object, srsBarSeriesClicked As Styles.Series, ValueIndex As Integer, e As System.Windows.Forms.MouseEventArgs) Handles tctScrollableChart.ClickSeries
    Dim strMethodAddress As String = strClassAddress & "Private Sub Bar_Click(Sender As Object, srsBarSeriesClicked As Styles.Series, ValueIndex As Integer, e As System.Windows.Forms.MouseEventArgs) Handles GetChartComponent.ClickSeries"
    Try
        Dim CAAGCanvasConversionBreakdownCriteria As clsCriteria = ctaCriteriaSetting.Copy
        CAAGCanvasConversionBreakdownCriteria.SetWeekNum(srsBarSeriesClicked(ValueIndex).Label)
        frmCAAGCanvasConversionBreakdown.RemoteLaunch(CAAGCanvasConversionBreakdownCriteria, GetSelectedCanvassGroupID)

    Catch ex As Exception
        If blnLoudExceptions Then MsgBox("General Exception Caught in Method: " & strMethodAddress)
    End Try
End Sub 
```

# java - 到目前为止处理的 JAX-RS URL

> ID：12178775
> 
> 赞同：0
> 
> 时间：2012-08-29T13:10:32.160
> 
> 标签：java, jax-rs

有什么方法可以获取当前正在处理的资源的 URL？假设我在 Parent 类中（我也有祖父处理程序、父处理程序、子处理程序）。完整的 URL 如下所示：/smt1/smt2/smt3/parent/child。

我知道有一种方法可以获取完整的请求 URL。

但是有什么方法可以在 Parent 处理程序中获取 /smt1/smt2/smt3/parent 部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:11:06.567

[`UriInfo`](http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/UriInfo.html)是您要查找的课程。要获取您当前的 URL/URI，请使用：

```
@Context
private UriInfo info
@Path("/a/b/c")
@GET
public String get() {
  return "URL is: " + this.info.getRequestUri();
} 
```

# android - 是否可以在输入法布局中包含片段？

> ID：12178778
> 
> 赞同：10
> 
> 时间：2012-08-29T13:10:41.917
> 
> 标签：android, android-fragments, android-input-method

是否可以将 a`Fragment`作为输入法 (IME) 的一部分包含在内？

问题是我的输入法必须，`extends InputMethodService`这意味着它不是`FragmentActivity`

# nas - Qnap raid 5 无法重建

> ID：12178780
> 
> 赞同：0
> 
> 时间：2012-08-29T13:10:54.357
> 
> 标签：nas

我在使用 qnap 时还很陌生，我正在处理一个前雇员的旧配置，我对最近办公室 NAS 出现的问题感到迷茫。

一切都以硬盘故障（第 2 号）开始，更换硬盘并重新启动 NAS。一切都很顺利，但是当我尝试重建 RAID 5 时使用网络管理员，日志报告磁盘 1 中的错误。

我扫描了磁盘 1，出现了坏扇区的消息。

我更换了磁盘 1 并再次启动了 NAS，显然 NAS 启动正常，我可以通过 SSH、HTTP 甚至连接到它的共享文件夹访问 NAS。但是当我尝试重建 RAID 5 时，我无法做到，并且日志报告：

> [RAID5 磁盘卷：驱动器 1 2 3 4 5] 检查失败。

同样在日志中，当我启动 NAS 时，第一个条目是：

> 未找到默认共享软件 Web。Apache httpd 启动失败。

我现在很迷茫。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T08:44:58.517

对于任何有同样问题的人。

我联系了qnap支持。

不幸的是，他们发现我的一个硬盘驱动器读/写失败，因此必须更换。

在此之后，他们建议我删除 RAID 并重新创建，之后（大约 10 小时）我的 RAID 5 工作正常，我能够从备份中恢复所有文件夹。

# load - 我们可以使用 Jmeter 或任何其他负载测试工具对具有客户端服务器架构的桌面应用程序进行负载测试吗

> ID：12178787
> 
> 赞同：0
> 
> 时间：2012-08-29T13:11:29.983
> 
> 标签：load, automated-tests, jmeter, performance-testing

该应用程序预计有 1000 个用户的负载，关于它使用的协议，我不太确定，但是它是否可以使用 Jmeter 使用此客户端服务器架构对桌面应用程序进行负载测试，其中用户从桌面应用程序上传报告和内容和在可以从中获取上传内容的服务器上收到相同的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:04:40.577

看 ：

*   [负载测试基于客户端-服务器的 Windows 应用程序](https://stackoverflow.com/questions/12152788/load-testing-client-server-based-windows-application)

要更准确地回答这个问题，您必须提供有关您的客户端/服务器协议的更多信息，无论是文本还是二进制，标准或自定义协议......

选择将取决于此。

问候

菲利普

# c# - Asp.net MVC 角色管理器

> ID：12178791
> 
> 赞同：6
> 
> 时间：2012-08-29T13:11:41.410
> 
> 标签：c#, asp.net-mvc, authorization, roleprovider

我正在为我的 asp.net mvc 项目使用角色管理器和 windows 身份验证，我们有 2 个角色，它们是 viewers 和 Editors 。

```
 <authentication mode="Windows" />
    <roleManager enabled="true" defaultProvider="AspNetWindowsTokenRoleProvider">
        <providers>
          <clear />
          <add applicationName="/" name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
        </providers>
    </roleManager> 
```

编辑器可以访问整个应用程序，但查看器只能访问两个操作

我首先尝试为基本控制器设置 Authorize 属性，它只允许编辑器访问所有内容：

```
[Authorize(Roles = "Editors")]
public class BaseController : Controller 
```

然后将 Authorize 属性添加到这两个操作：

```
[Authorize(Roles = "Viewers,Editors")]
public ActionResult Report(PaymentsUnallocatedAndQueriedModel model) 
```

它不起作用，它不允许查看者访问任何现在有意义的操作。

我认为在每个操作的顶部重复 Authorize 属性并不是一个好主意。

你能告诉我是否有更好的解决方案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T14:08:38.900

你必须从树的角度来看这个。为了获得一个动作，你必须首先能够获得一个控制器。在这种情况下，您已将控制器限制在 Editors 组中，因此 Viewers 甚至无法做到这一点。最有可能更有帮助的是将控制器限制在`Viewers, Editors`仅需要编辑权限的操作中，然后指定这些操作。这将生成冗余属性，但如果您必须根据角色成员身份手动限制每个操作，请考虑代码成本。

```
[Authorize(Roles = "Viewers, Editors")]
public class BaseController : Controller
{

    [Authorize(Roles = "Editors")]
    public ActionResult EditReport(PaymentsUnallocatedAndQueriedModel model)
    {
        // Some editor only functionality
    }

    public ActionResult Report(PaymentsUnallocatedAndQueriedModel model)
    {
        // Some functionality for both. No attribute needed
    }
} 
```

# javascript - 如何在标签内显示数组值？ 我有这样的数组值。我想在 HTML 表格标签中显示这些值  如何在 div 或 table 标签内显示数组的值？？？ 使用非模态对话框，并调用 dialog.setAlwaysOnTop(true); 希望这可以帮助 javascripthtml 4 4 回答 4 This answer is useful 6 orderArray的item代表元素，里面的每个item代表一个元素。因此，您可以循环orderArray创建s，然后在创建 s 的每个循环中遍历其元素：http : //jsfiddle.net/h7F7e/。 var table = document.getElementById("table"); // set this to your table var tbody = document.createElement("tbody"); table.appendChild(tbody); orderArray.forEach(function(items) { var row = document.createElement("tr"); items.forEach(function(item) { var cell = document.createElement("td"); cell.textContent = item; row.appendChild(cell); }); tbody.appendChild(row); }); 于 2012-08-29T13:15:16.723 回答 This answer is useful 2 像这样的东西会为你创建一个动态表： // get handle on div var container = document.getElementById('container'); // create table element var table = document.createElement('table'); var tbody = document.createElement('tbody'); // loop array for (i = 0; i < orderArray.length; i++) { // get inner array var vals = orderArray[i]; // create tr element var row = document.createElement('tr'); // loop inner array for (var b = 0; b < vals.length; b++) { // create td element var cell = document.createElement('td'); // set text cell.textContent = vals[b]; // append td to tr row.appendChild(cell); } //append tr to tbody tbody.appendChild(row); } // append tbody to table table.appendChild(tbody); // append table to container container.appendChild(table); 用途document.createElement()和element.appendChild() 这里的工作示例 于 2012-08-29T13:18:48.893 回答 This answer is useful 2 使用表格元素的 DOM 函数： function display() { var table = document.createElement("table"); for (var i=0; i<orderarray.length; 1="" i++)="" {="" var="" row="table.insertRow();" for="" (var="" j="0;" j<orderarray[i].length;="" j++)="" cell="row.insertCell();" cell.appendchild(document.createtextnode(orderarray[i][j]));="" }="" return="" table;="" 当="" dom="" 准备好时调用该函数，并将返回的表附加到某处。="" 于="" 2012-08-29t13:20:24.507="" 回答="" this="" answer="" is="" useful="" table="<table>" ;="" open="" for(i="0;" i<orderarray.length;="" +="<tr>" for(i2="0;" i2<orderarray[i].length;="" i2++)="" orderarray[i][i2]="" "<="" td="">"; // Each Column } table += ""; // Close Row } table += ""; // Close Table 于 2012-08-29T13:17:58.767 回答 Related 2 mysqli - MySQLi 准备好的语句抱怨“只有变量应该通过引用传递” 1 eclipse - vim 是否像 Eclipse 一样具有自动完成功能？ 3 javascript - AJAX 发送表单中的所有字段 2 php - Yii - 使用单一方法进行 AJAX 更新/创建 0 javascript - jquery ui 对话框默认位置 1 sql - ORA-00935 如何触发？深入了解 Oracle SQL 的嵌套组函数方法 1 c++ - 在自定义 const 本机 C++ 容器类上支持“for each” 1 xampp - 在 XAMPP 1.7.4 上安装 apc 0 javascript - 使用 window.open() 附加事件 3 javascript - 在 DOM 中更新图像的最有效方法是什么？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</orderarray.length;>

> ID：12178792
> 
> 赞同：3
> 
> 时间：
> 
> 标签：javascript, html

我有这样的数组值。我想在 HTML 表格标签中显示这些值

```
<script type="text/javascript">
var orderArray = [
    ["1","29-Aug-2012", "Product1", "client1"],
    ["2","29-Aug-2012", "Product2", "client2"],
    ["3","29-Aug-2012", "Product3", "client3"],
    ["4","29-Aug-2012", "Product4", "client4"],
    ["5","29-Aug-2012", "Product5", "client5"]
    ];

function display()
{
    for(i=0;i<ordertArray.length;i++)
    {
    //How to display values of array inside the div or table tag ???
    }
}

</script> 
```

如何在 div 或 table 标签内显示数组的值？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T13:15:16.723

`orderArray`的item代表`<tr>`元素，里面的每个item代表一个`<td>`元素。因此，您可以循环`orderArray`创建`<tr>`s，然后在创建 s 的每个循环中遍历其元素：http `<td>`: [//jsfiddle.net/h7F7e/](http://jsfiddle.net/h7F7e/)。

```
var table = document.getElementById("table");  // set this to your table

var tbody = document.createElement("tbody");
table.appendChild(tbody);
orderArray.forEach(function(items) {
  var row = document.createElement("tr");
  items.forEach(function(item) {
    var cell = document.createElement("td");
    cell.textContent = item;
    row.appendChild(cell);
  });
  tbody.appendChild(row);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T13:18:48.893

像这样的东西会为你创建一个动态表：

```
// get handle on div
var container = document.getElementById('container');
// create table element
var table = document.createElement('table');
var tbody = document.createElement('tbody');
// loop array
for (i = 0; i < orderArray.length; i++) {
    // get inner array
    var vals = orderArray[i];
    // create tr element
    var row = document.createElement('tr');
    // loop inner array
    for (var b = 0; b < vals.length; b++) {
        // create td element
        var cell = document.createElement('td');
        // set text
        cell.textContent = vals[b];
        // append td to tr
        row.appendChild(cell);
    }
    //append tr to tbody
    tbody.appendChild(row);
}
// append tbody to table
table.appendChild(tbody);
// append table to container
container.appendChild(table); 
```

用途[`document.createElement()`](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)和[`element.appendChild()`](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)

[这里的工作示例](http://jsfiddle.net/QwBsa/2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T13:20:24.507

使用[表格元素](https://developer.mozilla.org/en-US/docs/DOM/HTMLTableElement)的 DOM 函数：

```
function display() {
    var table = document.createElement("table");
    for (var i=0; i<orderArray.length; i++) {
        var row = table.insertRow();
        for (var j=0; j<orderArray[i].length; j++) {
            var cell = row.insertCell();
            cell.appendChild(document.createTextNode(orderArray[i][j]));
        }
    }
    return table;
} 
```

当 DOM 准备好时调用该函数，并将返回的表附加到某处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T13:17:58.767

```
var table = "<table>"; // Open Table

for(i=0; i<orderArray.length; i++)
{
 table += "<tr>"; // Open Row

 for(i2=0; i2<orderArray[i].length; i2++) {
 {
  table += "<td>" + orderArray[i][i2] + "</td>"; // Each Column
 }

 table += "</tr>"; // Close Row
}

table += "</table>"; // Close Table 
```

# android - 如何使用putextra直接将变量的值从第一个活动传递到第三个活动？

> ID：12178793
> 
> 赞同：1
> 
> 时间：2012-08-29T13:11:53.947
> 
> 标签：android, android-intent

如何使用 putextra 将变量的值从第一个活动直接传递到第三个活动？

例如：

如果我点击按钮，我在第一个屏幕（第一个活动）中有一个变量 A，它将显示第二个屏幕。第二个屏幕（第二个活动）有一个按钮。如果我单击该按钮，它将打开第三个屏幕（第三个活动），并将在第三个屏幕（第三个活动）的文本视图中显示变量 A。

如何将变量 A 的值从第一个屏幕直接传递到第三个屏幕（第三个活动）。（第一->第三）

是否可以直接传递值？或者我应该先在第二个活动中通过它，然后再通过第三个活动（1st->2nd->3rd）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:21:56.287

实际上不可能直接从第一个活动到第三个活动......

您必须遵循活动堆栈..

因此，如果您希望数据从第 1 次传递到第 3 次，请遵循

第一 -> 第二 -> 第三

使用@Lalit Poptani 建议的意图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:23:05.053

你可以在你想要的任何两个活动之间传递任何值。你只需要做两件事：

*   在您的 FirstActivity 中：

    ```
    Intent intent = new Intent(context, ThirdActivity.class);
    i.putExtra("value_key", value); //valus is a String
    startActivity(intent); 
    ```

*   在您的 ThirdActivity 中`onCreate()`：

    ```
    Bundle b = getIntent().getExtras();
    String value = (String) b.getString("value_key"); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:25:37.670

您可以将它们保留为静态对象并检索为`Myclass.myObject`. 但你真正想要的是不可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T14:09:58.143

您可以使用数据库、SharedPreferences、应用程序、静态方法等在 Activity 之间共享数据。看[这里](http://developer.android.com/guide/faq/framework.html)

# lucene - Lucene DuplicateFilter 过滤器不仅会重复结果

> ID：12178800
> 
> 赞同：0
> 
> 时间：2012-08-29T13:12:07.633
> 
> 标签：lucene

我有一个包含我们产品所有文档的索引。文档字段是：

*   团体
*   姓名
*   版本
*   文件
*   ...

因为我们的大多数文档都有多个站点，所以我为每个站点创建了索引中的一个文档。因此，当我按组、名称和版本搜索产品时，我会得到一些结果。但有时我希望这种组合（组、名称和版本）只有一个结果（无论产品存在多少文档）。

因此我使用了 DuplicateFilter：

因为这个过滤器只能用于一个字段（而不是字段组合），所以我创建了另一个字段（productkey）。在此字段中，我存储了该产品的 id（组、名称和版本字段组合的 md5Hashvalue）。然后我告诉 DuplicateFilter 使用这个字段来过滤重复项。

但现在我没有得到所有预期的搜索结果。IE：

文件：

```
group | name | version | productkey | description
a     | one  | 1.0     | 808d8f96138b7dec7cc69c2769176424 | ...
a     | two  | 1.0     | 0225635fc76ed8b88c65c7eb9f2ec1f9 | ...
a     | two  | 1.0     | 0225635fc76ed8b88c65c7eb9f2ec1f9 | ...
a     | three| 1.0     | 621e2597b189ee8d9448f6bfb26c5a8f | ...
a     | three| 1.0     | 621e2597b189ee8d9448f6bfb26c5a8f | ...
a     | three| 1.0     | 621e2597b189ee8d9448f6bfb26c5a8f | ...
a     | three| 1.0     | 621e2597b189ee8d9448f6bfb26c5a8f | ...
a     | three| 1.0     | 621e2597b189ee8d9448f6bfb26c5a8f | ...
a     | four | 1.0     | 3d03056a0d0f29f63477ee1f130b7ae8 | ...
a     | four | 1.0     | 3d03056a0d0f29f63477ee1f130b7ae8 | ...
a     | four | 1.0     | 3d03056a0d0f29f63477ee1f130b7ae8 | ...
a     | four | 1.0     | 3d03056a0d0f29f63477ee1f130b7ae8 | ...
a     | four | 1.0     | 3d03056a0d0f29f63477ee1f130b7ae8 | ...
a     | four | 1.0     | 3d03056a0d0f29f63477ee1f130b7ae8 | ...
a     | five | 1.0     | b2d49bc320325007e1466a38e41ce69a | ...
a     | five | 1.0     | b2d49bc320325007e1466a38e41ce69a | ...
a     | five | 1.0     | b2d49bc320325007e1466a38e41ce69a | ...
a     | five | 1.0     | b2d49bc320325007e1466a38e41ce69a | ...
a     | five | 1.0     | b2d49bc320325007e1466a38e41ce69a | ...
zz    | one  | 1.0     | b610a470c9a7d2cc928725e1fb1a577a | ...
zz    | one  | 1.0     | b610a470c9a7d2cc928725e1fb1a577a | ...
zz    | one  | 1.0     | b610a470c9a7d2cc928725e1fb1a577a | ...
zz    | two  | 1.0     | f5bb84453af30dd5f229d04cdb787dec | ...
zz    | three| 1.0     | 4b86d91feded953e57fb3d1ccbf0fc6e | ...
zz    | three| 1.0     | 4b86d91feded953e57fb3d1ccbf0fc6e | ...
zz    | three| 1.0     | 4b86d91feded953e57fb3d1ccbf0fc6e | ... 
```

结果：

```
group | name | version | productkey
a     | two  | 1.0     | 0225635fc76ed8b88c65c7eb9f2ec1f9
a     | three| 1.0     | 621e2597b189ee8d9448f6bfb26c5a8f
zz    | two  | 1.0     | f5bb84453af30dd5f229d04cdb787dec 
```

所以我错过了这些产品：

```
group | name | version | productkey
a     | one  | 1.0     | 808d8f96138b7dec7cc69c2769176424
a     | four | 1.0     | 3d03056a0d0f29f63477ee1f130b7ae8
a     | five | 1.0     | b2d49bc320325007e1466a38e41ce69a
zz    | one  | 1.0     | b610a470c9a7d2cc928725e1fb1a577a
zz    | three| 1.0     | 4b86d91feded953e57fb3d1ccbf0fc6e 
```

这是我实例化过滤器的代码：

```
DuplicateFilter filter = new DuplicateFilter("productkey");
filter.setKeepMode(DuplicateFilter.KM_USE_FIRST_OCCURRENCE);
filter.setProcessingMode(DuplicateFilter.PM_FULL_VALIDATION); 
```

我犯了错误还是重复过滤器中的错误（可能是长字段值等）？

我正在使用 Lucene 3.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:53:36.750

是的，这是行不通的。这是因为过滤器“清理”了所有索引文档，以便搜索查询获得匹配的文档。

即在您的索引中有以下文件：

```
docId, value
1, a
1, b
1, c
2, c
4, a
5, d 
```

并且您有一个特殊的过滤器，它按 id 过滤重复项，而不是您只有以下文档用于搜索：

```
docId, value
1, a
4, a
2, c
5, d 
```

只有在此之后，您的搜索才会运行。即，如果您搜索所有“c”，您将只得到

```
2, c 
```

即使索引中有 2 个具有不同 id 的“c”。

所以你的组合不会这样工作。

# jquery - 使用 Fancybox 在父项中回发

> ID：12178801
> 
> 赞同：0
> 
> 时间：2012-08-29T13:12:08.453
> 
> 标签：jquery, asp.net, fancybox-2

我一直在用fancybox 做一些测试，我们在工作中真正需要的是某种模式，在它关闭后它会在父页面中回发。我正在尝试使用fancybox，我已经阅读了其他主题并尝试以这种方式进行操作，但它不起作用，它甚至没有进入事件，因为警报没有出现：

```
<script type="text/javascript">
    $(document).ready(function () {
        $(".various").fancybox({
            modal: true,
            fitToView: true,
            width: 800,
            height: 500,
            autoSize: false,
            closeClick: false,
            openEffect: 'fade',
            closeEffect: 'fade',
            onClose: function () {
                alert("Hello");
                parent.location.reload(true);
            }
        });
    });
</script> 
```

我也尝试过这样做，`__doPostBack()`但也没有成功。有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:36:29.033

你的回调是错误的。试试`afterClose`。

# windows - 在 VMware/Windows 下使 Command-key 成为 Emacs 元键

> ID：12178803
> 
> 赞同：1
> 
> 时间：2012-08-29T13:12:10.317
> 
> 标签：windows, macos, emacs, vmware

我可以在 OS X 下配置 emacs，以便通过运行最靠近空格键的键（标记为 Command ⌘ 的键）是我的 Meta 键

```
(setq mac-command-key-is-meta t) 
```

当我在 Windows 下运行 emacs 并且 Windows 本身在 VMware Fusion 中运行时，如何将相同的密钥配置为 emacs 元密钥？出于某种原因，即使我在 Windows-VMware 上运行上述行，我的 Meta 键仍然是 Option 键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:51:31.993

我将[keyremap4macbook](http://pqrs.org/macosx/keyremap4macbook/)用于类似情况（Remotedesktop 到 Windows PC）。您可以设置仅在特定应用程序中有效的重映射。

# cakephp - 在 Cakephp 中作为行数组的 find() 查询的结果

> ID：12178804
> 
> 赞同：2
> 
> 时间：2012-08-29T13:12:12.163
> 
> 标签：cakephp

**我正在尝试做的事情：**

在 Cakephp 中以行数组的形式获取 find() 查询的结果

**为什么？：**

我想将结果发送到 Excel，所以常规的 cakePHP 格式不适合我。

**我知道的解决方案：**

我看到两种可能的解决方案：

*   自定义 SQL 查询
*   处理返回的数组以满足我的需要

**我的问题：**

有没有更简单的解决方案来获得标准格式的解决方案：带行的数组？

**编辑：**

cakephp 返回这样的数组：

```
$data=array("0"=>array("ModelName"=>array(Model.field1,Model.field2),
                       "LinkedModelName"=>array(LinkedModel.field1,LinkedModel.field2)

) 
```

我想：

```
$data=array("0"=>array(Model.field1,Model.field2,LinkedModel.field1,LinkedModel.field2)); 
```

**解决方案：（感谢戴夫）：**

```
 foreach($data as &$row){
    $row = Set::flatten($row);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:12:07.373

根据[[这里]](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html)的书，您可以使用`Set::flatten($data);`“将多维数组折叠成一维”。

它的例子：

```
<?php
$arr = array(
    array(
        'Post' => array('id' => '1', 'title' => 'First Post'),
        'Author' => array('id' => '1', 'user' => 'Kyle'),
    ),
    array(
        'Post' => array('id' => '2', 'title' => 'Second Post'),
        'Author' => array('id' => '3', 'user' => 'Crystal'),
    ),
);
$res = Set::flatten($arr);
/* $res now looks like:
    Array (
        [0.Post.id] => 1
        [0.Post.title] => First Post
        [0.Author.id] => 1
        [0.Author.user] => Kyle
        [1.Post.id] => 2
        [1.Post.title] => Second Post
        [1.Author.id] => 3
        [1.Author.user] => Crystal
    )
*/ 
```

`#.`从那里（如果需要），删除字段上的前缀应该非常简单。

可能是这样的：

```
preg_replace('/^[0-9]+\.+/', '', $string); 
```

我尚未对其进行测试，但这是对此处非常相似的问题的公认答案：[Remove numeric prefix from string - PHP regex](https://stackoverflow.com/questions/2398316/remove-numeric-prefix-from-string-php-regex)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-29T13:43:10.067

在 App Controller 文件中定义以下方法：

```
//flattens a multi-dimensional array (recursive implode)
function r_implode( $glue, $pieces )
{
    foreach( $pieces as $r_pieces )
    {
        if( is_array( $r_pieces ) )
        {
            $retVal[] = r_implode( $glue, $r_pieces );
        }
        else    
        {
            $retVal[] = $r_pieces;
        }
    }
    return implode( $glue, $retVal );
} 
```

只需将其调用到您的代码中：

```
 $data = $this->r_implode(',', $data);
 pr($data); 
```

正如您被问到的那样，您需要内爆内部数组，例如：

```
$data=array("0"=>array(Model.field1,Model.field2,LinkedModel.field1,LinkedModel.field2)); 
```

然后你可以使用 foreach 循环来做到这一点：

```
foreach($data as $key => $indexed_array)
{
     $data[$key] = $this->r_implode(",", $indexed_array);
}
pr($data); 
```

# c# - 在 C# 中加载外部 XSLT 时出错

> ID：12178806
> 
> 赞同：0
> 
> 时间：2012-08-29T13:12:24.840
> 
> 标签：c#, .net, xslt

我有一个 XML 文档，我试图在 c# 中添加一个 xslt 并输出到屏幕。我一直在对此进行一些研究，看起来我需要使用 XslCompiledTransform 类来执行此操作。

问题是，当我调用 Load 方法时，我的页面错误。我在网上找到的所有示例似乎都建议我将负载称为“Sort.xsl”——它与该文件位于同一文件夹中。我还假设我需要使用 MemoryStream() 将转换后的 xml 显示到屏幕上？

我使用 XmlDocument 进行所有处理，所有数据都在“xmlDocument”中。有人可以帮我加载外部 xsl，应用它并将结果显示到屏幕上。

非常感谢

```
// Create a writer for writing the transformed file.
MemoryStream strm = new MemoryStream();

XmlWriter writer = XmlWriter.Create(strm);

// Create and load the transform with script execution enabled. 
XslCompiledTransform transform = new XslCompiledTransform();
XsltSettings settings = new XsltSettings();
settings.EnableScript = true;
transform.Load(@"Convert.xsl", settings, null);

// Execute the transformation. 
transform.Transform(xmlDocument, Response.OutputStream); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:27:49.863

我假设您正在编写一个 Web 应用程序，并且“输出到屏幕”意味着将转换后的 XML 发送到浏览器。

当前目录是 IIS 用户的目录 - 即错误的目录。

有必要使用应用程序的实际（物理）路径组成 XSL 文件的路径 - 可使用 `HttpRequest.PhysicalApplicationPath' 访问 - 类似于：

```
transform.Load(Path.Combine(HttpContext.Current.Request.PhysicalApplicationPath,"Convert.xsl"), settings, null); 
```

请注意，这仅在服务请求时调用代码时才有效 - 否则`HttpContext.Current`是`null`，并假定它`Convert.xsl`位于主应用程序目录中（以及 .ASPX 文件等）。

# python - 来自秒系列的 Pandas 日期时间索引

> ID：12178808
> 
> 赞同：4
> 
> 时间：2012-08-29T13:12:38.757
> 
> 标签：python, numpy, pandas

我有一个由 23 个系列组成的熊猫数据框，默认顺序索引 (0,1,2,...) 通过导入 ndarray 获得。

数据框中的两个系列包含记录时间信息。一个系列（'SECONDS'）包含自 1900 年初以来的秒数。另一个系列（'NANOSECONDS'）包含相应秒的纳秒数。

在 python 中，转换可以完成（在单个记录上）：

```
import datetime as dt
Mydt = dt.datetime(1990,1,1,0,0,0) + dt.timedelta(seconds = 706500000)
print Mydt 
```

pandas 方法中是否存在执行类似的数组计算以获得 datetime(64) 日期/时间戳，我可以用它替换当前的顺序数据帧索引？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T18:57:05.573

假设`sec`是一个整数数组，表示自 1990 年以来的秒数：

```
In [26]: import pandas as pd

In [27]: pd.Index(datetime(1990, 1, 1) + sec * pd.offsets.Second())
Out[27]:
<class 'pandas.tseries.index.DatetimeIndex'>
[1990-01-01 00:14:40, ..., 1990-04-26 17:26:52]
Length: 10000, Freq: None, Timezone: None 
```

# html - IFrame 内容在 IE7 和 IE=EmulateIE7 (Sharepoint) 中显示为白色

> ID：12178810
> 
> 赞同：0
> 
> 时间：2012-08-29T13:12:47.627
> 
> 标签：html, css, sharepoint

我想将我的 Web 应用程序作为 Web 部件嵌入到 Sharepoint 中。这在 IE8、IE9 和 Firefox 上效果很好——但是当我用 IE7 打开页面时，尽管已经加载了内部内容，但我只能看到一个空白（白色）的 IFrame。在没有 iframe 的情况下打开的同一个 webapp 可以完美运行 - 在 IE7 中也是如此。

带有 META 标签的 IE8/IE9 也一样：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /> 
```

我也可以在白色区域用鼠标右键单击，可以显示嵌入在 IFrame 中的页面的源代码。

我的 IFrame 是这样嵌入的：

```
<iframe title="WebApp" frameBorder="0" id="MSOPageViewerWebPart_WebPartWPQ2" style="z-index: 1000" name="MSOPageViewerWebPart_WebPartWPQ2" width="1200px" 
height="1200px" src="http://webapps/app1/beta.webapp.aspx?ContentAreaHeight=669px" ddf_src="http://webapps/app1/beta.webapp.aspx?ContentAreaHeight=669px"
<div class="UserGeneric">No IFRames supported.</div></iframe> 
```

在 Sharepoint 中，如果我使用 Content Editor webpart 或 Page Viewer webpart 手动嵌入 IFrame 没有区别。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:19:12.310

更改 IFrame 页面中的 CSS 样式：

```
html {
  height: 100%; <= removed this line
} 
```

...然后它再次工作

# jquery - Jquery周历在ie中不起作用

> ID：12178811
> 
> 赞同：0
> 
> 时间：2012-08-29T13:13:05.337
> 
> 标签：jquery, jquery-plugins

加载 jquery 周日历时，它没有被加载，即只有标题被加载，但是当我按 F12 来查看控制台时，即刷新页面日历被加载。它在其他浏览器上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:57:26.333

解决了这个问题....猜猜我的console.log有问题，因为我已经删除了它开始工作的那些。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:16:24.887

如果我没记错的话，您的参数列表中有一个尾随逗号。IE 会一直在 js 中被尾随逗号阻塞。

# c# - 在数据集中添加数据表

> ID：12178823
> 
> 赞同：14
> 
> 时间：2012-08-29T13:13:29.957
> 
> 标签：c#, .net, ado.net, dataset

我正在向这样的数据集添加数据表：

```
DataTable dtImage = new DataTable();
//some updates in the Datatable
ds.Tables.Add(dtImage); 
```

但是下一次，当数据表更新时，它会反映在数据集中吗？或者我们需要编写一些代码来使其反映？

另外，我正在检查数据集，如果数据表存在于已经使用的数据集中：

```
if(!ds.Tables.Contains("dtImage"))
    ds.Tables.Add(dtImage); 
```

在第一次迭代中，`ds.Tables.Contains("dtImage")`为 false，因此，`ds.Tables.Add(dtImage)` 将表添加到数据集中。但在第二次迭代中，`ds.Tables.Contains("dtImage")`再次为假，但`ds.Tables.Add(dtImage)`抛出错误：

> 数据表已经属于这个数据集。

如果数据集不包含名为“dtImage”的数据表，为什么会抛出错误？

**更新：谢谢，这个问题已经解决了。请回答这个问题：**

> 但是下一次，当数据表更新时，它会反映在数据集中吗？或者我们需要编写一些代码来使其反映？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-29T13:16:15.723

我假设您尚未设置`TableName`DataTable 的属性，例如通过构造函数：

```
var tbl = new DataTable("dtImage"); 
```

如果您不提供名称，它将自动创建`"Table1"`，下一个表将得到`"Table2"`等等。

然后解决方案是提供`TableName`然后检查`Contains(nameOfTable)`。

**澄清**一下：`ArgumentException`如果该 DataTable 已经属于 DataSet（相同的引用），您将得到一个。`DuplicateNameException`如果 DataSet 中已经有一个同名的 DataTable（不区分大小写），您将得到一个。

[http://msdn.microsoft.com/en-us/library/as4zy2kc.aspx](http://msdn.microsoft.com/en-us/library/as4zy2kc.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-29T13:15:09.620

你必须将你想要的 tableName 设置为你的 dtimage，例如

```
dtImage.TableName="mydtimage";

if(!ds.Tables.Contains(dtImage.TableName))
        ds.Tables.Add(dtImage); 
```

它将反映在数据集中，因为数据集是数据表 dtimage 的容器，并且您在 dtimage 上有参考

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-21T15:11:31.113

**只需给 DataTable 起任何名称，例如：**

```
DataTable dt = new DataTable();
dt = SecondDataTable.Copy();    
dt .TableName = "New Name";
DataSet.Tables.Add(dt ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-07T06:14:48.477

```
DataSet ds = new DataSet();

DataTable activity = DTsetgvActivity.Copy();
activity.TableName = "activity";
ds.Tables.Add(activity);

DataTable Honer = DTsetgvHoner.Copy();
Honer.TableName = "Honer";
ds.Tables.Add(Honer);

DataTable Property = DTsetgvProperty.Copy();
Property.TableName = "Property";
ds.Tables.Add(Property);

DataTable Income = DTsetgvIncome.Copy();
Income.TableName = "Income";
ds.Tables.Add(Income);

DataTable Dependant = DTsetgvDependant.Copy();
Dependant.TableName = "Dependant";
ds.Tables.Add(Dependant);

DataTable Insurance = DTsetgvInsurance.Copy();
Insurance.TableName = "Insurance";
ds.Tables.Add(Insurance);

DataTable Sacrifice = DTsetgvSacrifice.Copy();
Sacrifice.TableName = "Sacrifice";
ds.Tables.Add(Sacrifice);

DataTable Request = DTsetgvRequest.Copy();
Request.TableName = "Request";
ds.Tables.Add(Request);

DataTable Branchs = DTsetgvBranchs.Copy();
Branchs.TableName = "Branchs";
ds.Tables.Add(Branchs); 
```

# quartz-scheduler - 如果前一个触发器仍在运行，如何取消作业触发器？

> ID：12178825
> 
> 赞同：0
> 
> 时间：2012-08-29T13:13:43.113
> 
> 标签：quartz-scheduler

我是石英调度程序的新手。我有一个批处理文件，运行需要 3 分钟。我需要使用 Quartz 调度程序每 2 分钟运行一次该批处理。所以我把它安排在每天 3 小时。我的问题是我需要检查第一个触发器的状态，如果它不是完整的状态，我需要退出这项工作。我需要继续我安排的下一个工作。说明：作业 53 触发器从上午 11.30 开始 下一个触发器从上午 11.32 开始 下一个触发器从上午 11.34 开始 我需要检查上午 11.30 的触发器状态，如果它没有完成，我需要关闭这个作业并转到我安排的下一个作业。如何在 Quartz 调度程序中实现这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:27:58.463

您可以从中获取当前正在执行的作业，`Scheduler`并检查您的作业是否已完成：

```
Scheduler scheduler = new StdSchedulerFactory().getScheduler();
List jobsList = scheduler.getCurrentlyExecutingJobs(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T13:08:25.753

如果您有触发器实例，从上午 11.30 开始，那么只需检查“trigger.STATE_BLOCKED”是否等于 1 或否。如果为 1，则作业处于运行状态。

# asp.net-mvc - 使用 Url.Content 和不这样做有什么区别？

> ID：12178826
> 
> 赞同：2
> 
> 时间：2012-08-29T13:13:46.753
> 
> 标签：asp.net-mvc

我正在按照[博客教程](http://weblogs.asp.net/gunnarpeipman/archive/2010/02/03/using-fullcalendar-jquery-component-with-asp-net-mvc.aspx)将名为[FullCalendar的](http://arshaw.com/fullcalendar/)[jQuery](http://jquery.com/)插件实现到 ASP.NET 项目中。

在该教程中，他们声称以下内容：

> Url.Content 方法创建正确的 URL-s，它比 MS 策略好得多（href 像 ....\Content\Site.css）。

但他们甚至没有试图解释他们是如何得出这个结论的。

* * *

那么这之间有什么区别：

```
<script src="~/Scripts/jquery-1.4.1.js" type="text/javascript"></script> 
```

还有这个：

```
<script src="<%= Url.Content("~/Scripts/jquery-1.4.1.js") %>" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:17:42.603

`"~/Scripts/jquery-1.4.1.js"`

上面的内容不会解析为 url，因为`~/`对浏览器没有任何意义

`"<%=Url.Content("~/Scripts/jquery-1.4.1.js") %>"`

`Url.Content`将解析`~/`您的应用程序中指定的 url 的路径

* * *

**UrlHelper.Content 方法**

[http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.content(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.content(v=vs.108).aspx)

```
Converts a virtual (relative) path to an application absolute path. 
```

# r - 更改包的内部功能

> ID：12178830
> 
> 赞同：16
> 
> 时间：2012-08-29T13:14:01.563
> 
> 标签：r, packages

一些背景：

我必须经常使用`HMR`包中`HMR`的功能。不幸的是，这个功能很慢。（`HMR`本质上是一个拟合函数，它被设计为尽可能健壮，这是效率低下的一个原因。）函数`HMR`调用函数`HMR::.HMR.fit1`，它进行实际拟合。使用`Rprof`我知道关于效率的主要问题是使用`lsfit`，这被称为很多。因此，我修改了 的代码，`.HMR.fit1`直接调用了 使用的 C 函数，`lsfit`而没有 的所有开销`lsfit`，这应该会带来相当大的速度提升。

现在我想`HMR::.HMR.fit1`用我修改过的函数替换并测试`HMR`它是否给出相同的结果以及我获得了多少速度。

我试图这样做：

```
mod.fun <- function(<many args>) {
 <a lot of code>
}
environment(mod.fun) <- environment(.HMR.fit1)
.HMR.fit1 <- mod.fun 
```

但是，`HMR::.HMR.fit1`这样做并没有改变，并且显然`HMR::HMR`没有使用我修改后的拟合功能。有没有办法在不从源代码构建包的情况下实现我想要的东西，由于我的（Windows）计算机上的用户权限限制，我无法做到这一点？

目前，我的解决方案是复制 的代码`HMR::HMR`，但我希望有更方便的解决方案。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-29T13:26:42.477

尝试

```
?assignInNamespace 
```

用您的版本替换包`.HMR.fit1`中的内容。`HMR`

可能的重复：

[如何覆盖包命名空间中的不可见函数？](https://stackoverflow.com/questions/8743390/how-do-i-override-a-non-visible-function-in-the-package-namespace)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-29T14:41:10.697

对于快速测试，您可以使用`trace`函数 with`edit=TRUE`来修改函数，这将在适当的命名空间中进行替换，还允许您使用`untrace`将函数恢复为原始函数。这些更改不会持续到当前会话之后。

# java - Java FX 2 堆空间

> ID：12178833
> 
> 赞同：1
> 
> 时间：2012-08-29T13:14:10.783
> 
> 标签：java, javafx-2

我的 Java FX 2 应用程序中有几个 fxml 文件和控制器。

1.  LayoutController 是包含静态布局元素 BorderPane 的 layout.fxml 控制器。这个控制器有一些方法：

*   `BorderPane.setHeader`（加载header.fxml文件并返回Node的一些方法）
*   `BorderPane.setCenter`（加载center.fxml文件并返回Node的一些方法）
*   `initialize(URL url, ResourceBundle resourceBundle)`其中 setHeader 方法调用。

2.  HeaderController 是包含控制元素 TabPane 的 header.fxml 控制器。HeaderController 有 onSelected EventHandler。在此操作中，BorderPane.center 将插入 center.fxml。

3.  CenterController 是 center.fxml 控制器，它在初始化时插入控件元素 TableView 并用数据填充它。

我的问题是内存泄漏。我在重复选择选项卡时获得堆空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:41:35.577

已实现的方法，该方法清除先前创建的控制器中的所有数据，如下所示：

```
public void dispose() {

 table.getColumns().clear();

 table.getItems.clear();

 table = null;
} 
```

这是正确的方法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:22:21.913

您是否尝试使用 JVM 选项 -XX:+HeapDumpOnOutOfMemoryError ？[您可以在此处](http://publib.boulder.ibm.com/infocenter/javasdk/v6r0/index.jsp?topic=/com.ibm.java.doc.diagnostics.60/diag/appendixes/cmdline/commands_jvm.html)阅读有关此内容的更多信息

如果 UI 对象在每次点击时都被重新创建而不是被重用，您应该尝试关注吗？请阅读以下链接以了解更多信息：1) [JavaFX 中的内存泄漏](http://objectsource.com/blogs/2009/11/memory-leaks-in-javafx/) 2)[节点对象未获得 GCed](https://stackoverflow.com/questions/7809679/javafx-node-objects-are-not-garbage-collected)

# jquery - 移动端的 Jquery 验证

> ID：12178834
> 
> 赞同：0
> 
> 时间：2012-08-29T13:14:11.553
> 
> 标签：jquery, validation, jquery-validate

这里我有 HTML：

```
<form  id="referalForm" action="google.com">
            <label>Referring patient:</label>
            <input type="text" ame="txtPname" id="fullname"  placeholder="ENTER YOUR FULL NAME" />
            <label>Email invitaion(s):</label>
            <div class="clear10"></div>
            <input type="email" name="emailP[]" id="emailP1" placeholder="ENTER RECIPIENT`S EMAIL" />
            <label id="lblO1"></label>
            <input type="email" name="emailP[]" id="emailP2" placeholder="ENTER RECIPIENT`S EMAIL" />
            <label id="lblO2"></label>
            <input type="email" name="emailP[]" id="emailP3" placeholder="ENTER RECIPIENT`S EMAIL" />
            <label id="lblO3"></label>
             <input type="hidden"  name="UserEmail" id="UserEmail" value="" />
             <input type="hidden" name="UserID" id="Userid" value="" />
            <div align="center"><input type="button" value="SEND" class="button_red" onclick="validateForm(this.form);" style="width:80%;" /></div>
            </form> 
```

这是我的jQuery代码：

```
 function validateForm(form){
var validate = $("#referalForm").validate({
                     rules:{
                          txtPname:{
                              required: true

                           },
                           "emailP[]":{email:true}

                         },
                     messages:{
                         txtPname:{
                               required: "Please Enter Your Full Name"

                              },
                           "emailP[]":{email:"Please Enter Correct Email"}
                         },
                         focusInvalid: false

             });
} 
```

它根本不工作我无法添加 $(document).ready 因为我在移动设备上验证它并且它不工作任何人都可以告诉我如何使它工作？我累了，花了大约 24 小时仍然无法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:28:41.397

我不确定为什么 ready 语句与 Mobile 有任何关系，但在这里：

您的表单正在提交，您的 txtPname "ame=txtPname" 中有一些拼写错误

我为你做了一个样品。

[http://jsfiddle.net/EAaSs/](http://jsfiddle.net/EAaSs/)

# php - 将访问者从我的页面重定向到其他域（eshop）并在购买产品后将他们重定向回来？

> ID：12178838
> 
> 赞同：0
> 
> 时间：2012-08-29T13:14:20.317
> 
> 标签：php, javascript, redirect

我不知道在哪里可以提出这个问题，所以这里是：

可以说已经建立了一个eshop。现在我正在制作一个带有指向该特定 eshop 的链接的网站。客户问我，是否有可能以某种方式建立链接，以便当用户点击它时，他们会被带到 eshop，如果他们选择在那里购买，将他们重定向回我的页面？当然，我无法访问该 eshop 的来源（购买后我可以轻松地将它们重定向到我的页面）。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:17:09.573

您可以在查询字符串上发送返回 url，但如果第三方 eshop 没有任何逻辑可以重定向回来，那就没用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:22:52.263

您也是这两个网站的所有者吗？

如果您同时拥有两者，则可以通过查询字符串传递第一个站点的编码 url。

第一个网站链接：

[http://www.secondsite.com/?returl=http%3A%2F%2Fwww.firstsite.com%2Fpage.html](http://www.secondsite.com/?returl=http%3A%2F%2Fwww.firstsite.com%2Fpage.html)

第二个站点：

编码 returl 并在任何地方使用这个 url

**编辑：“解码 returl 并在任何地方使用这个 url”**

# html - 使用 html5 清单缓存来自多个图片服务器的图片

> ID：12178845
> 
> 赞同：0
> 
> 时间：2012-08-29T13:14:40.293
> 
> 标签：html, cache-manifest

我正在使用清单 chache 的东西迈出第一步，并偶然发现了一些问题。

我有几个图片服务器，以优化加载时间。因此可以从即交付图像：

*   pics1.domain.com/images/img1
*   或 pics2.domain.com/images/img1
*   或 pics3.domain.com/images/img1

我怎样才能为他们安排缓存？我不喜欢在清单文件中为每个 url 写一行，因为它们非常多。

# java - 如何设置嵌套表格无边框？

> ID：12178850
> 
> 赞同：1
> 
> 时间：2012-08-29T13:15:01.920
> 
> 标签：java, border, itext

我有一张带有一些单元格和嵌套表格的表格。

嵌套表周围有边框，但我不知道为什么。

单元格没有边框，因为我添加到单元格和嵌套单元格：

```
cell.setBorder(Rectangle.NO_BORDER); 
```

然后我将嵌套表添加到表中；

```
table.addCell(nestedTable()); 
```

似乎嵌套表周围的单元格有边框。

如何将其设置为零？

更新：

```
public static void main(String[] args) {
    Document document = new Document();

    try {
        PdfWriter.getInstance(document, new FileOutputStream("Table2.pdf"));

        document.open();

        PdfPTable table = new PdfPTable(3);

        PdfPCell cell1 = new PdfPCell(new Phrase("Cell 1"));
        cell1.setHorizontalAlignment(Element.ALIGN_CENTER);
        cell1.setBorder(Rectangle.NO_BORDER);
        PdfPCell cell2 = new PdfPCell(new Phrase("Cell 2"));
        cell2.setHorizontalAlignment(Element.ALIGN_CENTER);
        cell2.setBorder(Rectangle.NO_BORDER);
        PdfPCell cell3 = new PdfPCell(new Phrase("Cell 3"));
        cell3.setHorizontalAlignment(Element.ALIGN_CENTER);
        cell3.setBorder(Rectangle.NO_BORDER);

        PdfPTable nestedTable = new PdfPTable(2);
        PdfPCell cell4 = new PdfPCell(new Phrase("Nested Cell 1"));
        cell4.setHorizontalAlignment(Element.ALIGN_CENTER);
        cell4.setBorder(Rectangle.NO_BORDER);
        nestedTable.addCell(cell4);

        PdfPCell cell5 = new PdfPCell(new Phrase("Nested Cell 2"));
        cell5.setHorizontalAlignment(Element.ALIGN_CENTER);
        cell5.setBorder(Rectangle.NO_BORDER);
        nestedTable.addCell(cell5);

        table.addCell(cell1);
        table.addCell(cell2);
        table.addCell(cell3);

        table.addCell(nestedTable);
        table.addCell(nestedTable);
        table.addCell(nestedTable);

        document.add(table);

        document.close();

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

![在此处输入图像描述](../Images/3c567373bbe734f4ae6a562a916cd800.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T10:49:26.210

尝试修改主表的默认单元格：

```
PdfPTable table = new PdfPTable(3);
table.getDefaultCell().setBorder(Rectangle.NO_BORDER); 
```

有关更多信息，请参阅[API](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfPTable.html#getDefaultCell%28%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T10:59:26.820

好，我知道了。

我不能这样做：

```
 table.addCell(nestedTable); 
```

而不是这个，我需要创建新单元格并在这个单元格内添加嵌套表，现在我没有边框

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-30T10:33:00.227

你试过 table.setBorder(Rectangle.NO_BORDER); ??

# php - 循环遍历 PHP 对象

> ID：12178851
> 
> 赞同：1
> 
> 时间：2012-08-29T13:15:04.467
> 
> 标签：php, mysql, oop

假设我们有一个 PHP 类，它在 CMS`Page`中生成 PHP对象。`Page`在类内部，我们有一个名为 的函数，它返回系统中所有页面`GetPages()`的对象数组。`Page`

如果我们想在表格中输出这些，我们可以这样做：

```
foreach(Page::GetPages() as $page)
{
    echo $page->title.'<br />';
} 
```

这是一个非常干净的解决方案，但我们实际上是在执行两个循环，而我们只需要运行一次。我在开发客户委托的定制 CMS 时遇到了这个问题，他们现在希望我们对其进行大修（仅仅是因为速度）。

我在想最好`GetPages()`从类中删除该函数，并在管理界面上执行以下操作：

```
$pages = "SELECT `id` FROM `ig_pages`";
$result = Database::Singleton()->Query($pages);
while($page = $result->fetch_object())
{
   $this_page = new Page($page->id);
   echo $this_page->title.'<br />';
} 
```

显然，从架构的角度来看，该函数确实应该包含在`Page`类中，但我对循环有效运行两次感到担忧。任何人都可以为此提出更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:49:17.867

当你假设时，你把你**和**我**搞得****一团糟**。[（好吧，不是我直接，但你明白了）]

 ******[使用XDebug](http://xdebug.org/docs/profiler)**分析您的应用程序**[，](http://xdebug.org/)**分析结果，然后返回有关速度的具体问题。

请记住，[过早的优化是万恶之源](http://en.wikipedia.org/wiki/Program_optimization#When_to_optimize)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:25:32.537

您可以在创建数组时创建输出字符串，但如果您没有无限多的页面，则在页面中循环两次不会太慢。

我认为你的页面应该有一个字符串成员，它将包含你的结果，并且你应该有一个函数来生成包装你的值的 html。但我认为这不是主要问题，您应该通过创建索引来优化数据库，这样您的选择会更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:44:13.497

在您的类顶部放置一个公共 var，然后触发您的函数将该 pages 数组放在该 var 中，然后返回：

```
class myPagescreator(){

public var $pages = array();

function __construct(){

}

function GetPages(){
  //here your query to get all pages info from database (PDO fetchALL or param::fetchCOLUMN return a nice array from your queries)
  $this->pages = $DBqueryReturnInArray;
  #
  # here you should call and merge all the infos you need with a function call like $this->functionToGetPageBody($myPagesID); to merge to your array of pages ($this->page = array_merge($this->page,$thispageBody)) in a foreach or a while

  return $this->pages; 
  }
}

//The on your class call from your CMS
$pageMe = new Page();
//Activate the function in your class
$pageMe->GetPages();

// getting the var of arrayOfpages in the class Page
$imAnArrayOfPages = $pageMe->pages;
// Or getting the return of the function that will return your var at the same...
$imAnArrayOfPages = $pageMe->GetPages(); 
```****

# c# - 将 azure 表诊断数据存储到 sql server 数据库中

> ID：12178857
> 
> 赞同：0
> 
> 时间：2012-08-29T13:15:15.210
> 
> 标签：c#, azure, cloud

我是 Windows azure 的新手。但这是我需要做的。我需要从部署在 Windows azure 中的任何应用程序读取诊断数据，我的意思是日志文件并将它们存储在 sql server 中，然后从中生成报告（必须使用 ssrs）。我真的不知道该怎么做。

我试过这个链接，但我无法关注它[报告诊断数据](http://msdn.microsoft.com/en-us/magazine/hh394141.aspx)

我需要帮助。我不知道如何从工作角色写入连接字符串以读取数据，然后将其保存在本地 sql server 数据库中。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:32:14.527

这篇文章是一个很好的起点，因为它涵盖了您应该做的所有事情。您知道您可以下载文章中描述的示例应用程序吗？您可以从“旧” [code.msdn.com 站点](http://archive.msdn.microsoft.com/mag201109Cloudy/Release/ProjectReleases.aspx?ReleaseId=5721)下载它。

在此示例应用程序中，您将看到连接字符串存储在辅助角色的 app.config 中。作为替代方案，您还可以将连接字符串存储在服务配置中（双击 Azure 项目中的 Worker Role，转到设置并在此处添加连接字符串）：

![在此处输入图像描述](../Images/3bec89f5ce5261ff3cdad6fd87875ba8.png)

然后在初始化数据上下文时，您需要从 ServiceConfiguration 中读取该值：

```
PerfDataEntities pde = new PerfDataEntities(RoleEnvironment.GetConfigurationSettingValue("PerfDataEntities")); 
```

这样做将允许您在每个环境中拥有 1 个连接字符串（即：当您在本地开发时，在“测试版”中运行时，在生产中......）。

# html - 如何显示表单验证错误

> ID：12178860
> 
> 赞同：0
> 
> 时间：2012-08-29T13:15:15.583
> 
> 标签：html, forms, validation, scala, playframework-2.0

我想知道如何在提交不是“有效”时返回“无效的用户名或密码”的函数 validate() 中显示来自我的模型的错误消息

index.scala.html

```
@(myForm: Form[models.profile.MUser])

@import helper._
@import helper.twitterBootstrap._

@main("welcome") {

  <h1>Login with your account</h1>

@helper.form(action = routes.Application.loginAccount()) {

    @helper.inputText(myForm("username"),'_showConstraints -> false)
    @helper.inputPassword(myForm("password"),'_showConstraints -> false)

    <input type="submit" value="Login">
}} 
```

应用程序.java

```
public static Result loginAccount() {
        Form<MUser> filledform = loginForm.bindFromRequest();
        if (filledform.hasErrors()) {
            Logger.debug("unsuccessfull loggin");
              return badRequest(index.render(filledform));
        }
        MUser user = filledform.get();
        SessionCache.setCache(SessionCache.Constants.LOGGED_IN_USER,
                UserController.findUserByUserName(user.username));
        return redirect("/home");

    } 
```

MUser.java 包models.profile；

```
import controllers.services.UserController;
import models.entities.UserDTO;
import play.data.validation.Constraints.*;
import scala.Serializable;

/**
 * @author fbranchetti
 * 
 */
public class MUser implements Serializable{

    @Required
    public String username;
    @Required
    public String password;

    public String validate() {
        if (authenticate(username, password)) {
            return "Invalid username or password";
        }
        return null;
    }

    private boolean authenticate(String username, String password) {
        UserDTO fUser = new UserDTO();
        fUser.setPassword(password);
        fUser.setUsername(username);

        return !UserController.logginUser(fUser);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:44:01.907

您可以将身份验证的结果存储在 flash 变量中。并且在视图中，您可以检查变量是否存在并显示出来。

# video - 如何在不断循环的网站上嵌入短片剪辑

> ID：12178862
> 
> 赞同：1
> 
> 时间：2012-08-29T13:15:25.920
> 
> 标签：video, html5-video, flv, flvplayback

我有一部可以轻松（通过 ffmpeg）转换为 FLV 文件的短片。为了在网页上播放此剪辑，我知道我必须*嵌入 FLV 播放器*。

但是我找不到可以自动连续*循环播放电影*的播放器（就像互联网上的许多 Flash 广告一样）。

还是更容易*通过 HTML5*循环播放影片剪辑？然后我需要将影片剪辑转换成什么文件格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:07:44.297

JWplayer 有一个重复变量。

# javascript - Go Ex 主题错误消息

> ID：12178864
> 
> 赞同：2
> 
> 时间：2012-08-29T13:15:37.673
> 
> 标签：javascript, android, error-handling, themes, launcher

因此，我为 go launcher ex 制作了一个主题，直接安装时它在仿真和我的设备上运行良好，但从应用商店安装时它甚至无法打开。在 Go Ex 主题设置器中，它显示为“正在加载”并且无法使用。我只是想知道是否有人知道如何解决这个问题。下面的错误消息来自谷歌开发者控制台：

> java.lang.RuntimeException：无法实例化接收器 com.gau.go.launcherex.theme.MLP.FIM.LulzDogApps.ComponentControlReceiver：java.lang.ClassNotFoundException：com.gau.go.launcherex.theme.MLP.FIM.LulzDogApps。加载程序dalvik.system.PathClassLoader [/data/app-private/com.gau.go.launcherex.theme.MLP.FIM.LulzDogApps-2.apk]中的ComponentControlReceiver在android.app.ActivityThread.handleReceiver(ActivityThread.java:1777 )at android.app.ActivityThread.access$2400(ActivityThread.java:117)at android.app.ActivityThread$H.handleMessage(ActivityThread.java:985)at android.os.Handler.dispatchMessage(Handler.java:99)at android.os.Looper.loop(Looper.java:130) 在 android.app.ActivityThread.main(ActivityThread.java:3691) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect。 Method.invoke(Method.java:507) 在 com。android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)at dalvik.system.NativeStart.main(Native Method)引起由：java.lang.ClassNotFoundException：com.gau.go.launcherex.theme.MLP.FIM.LulzDogApps.ComponentControlReceiver 在加载器dalvik.system.PathClassLoader [/data/app-private/com.gau.go.launcherex.theme。 MLP.FIM.LulzDogApps-2.apk]at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)at java.lang.ClassLoader.loadClass(ClassLoader.java:551)at java.lang.ClassLoader.loadClass(ClassLoader .java:511) 在 android.app.ActivityThread.handleReceiver(ActivityThread.java:1768)主要（本机方法）引起：java.lang.ClassNotFoundException：com.gau.go.launcherex.theme.MLP.FIM.LulzDogApps.ComponentControlReceiver in loader dalvik.system.PathClassLoader[/data/app-private/com.gau。 go.launcherex.theme.MLP.FIM.LulzDogApps-2.apk]at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)at java.lang.ClassLoader.loadClass(ClassLoader.java:551)at java.lang .ClassLoader.loadClass(ClassLoader.java:511) 在 android.app.ActivityThread.handleReceiver(ActivityThread.java:1768)主要（本机方法）引起：java.lang.ClassNotFoundException：com.gau.go.launcherex.theme.MLP.FIM.LulzDogApps.ComponentControlReceiver in loader dalvik.system.PathClassLoader[/data/app-private/com.gau。 go.launcherex.theme.MLP.FIM.LulzDogApps-2.apk]at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)at java.lang.ClassLoader.loadClass(ClassLoader.java:551)at java.lang .ClassLoader.loadClass(ClassLoader.java:511) 在 android.app.ActivityThread.handleReceiver(ActivityThread.java:1768)ClassLoader.loadClass(ClassLoader.java:551)at java.lang.ClassLoader.loadClass(ClassLoader.java:511)at android.app.ActivityThread.handleReceiver(ActivityThread.java:1768)ClassLoader.loadClass(ClassLoader.java:551)at java.lang.ClassLoader.loadClass(ClassLoader.java:511)at android.app.ActivityThread.handleReceiver(ActivityThread.java:1768)

# c - 在自己的位置反转字符数组

> ID：12178866
> 
> 赞同：6
> 
> 时间：2012-08-29T13:15:40.097
> 
> 标签：c, string, pointers

我在一次采访中被问到这个问题

我应该在自己的位置反转字符数组，而不是反转整个字符数组。

如果

```
 char *ch="krishna is the best"; 
```

然后我应该以这样的方式反转，输出应该像

```
 anhsirk si eht tseb 
```

我无法在面试中编写代码。任何人都可以建议我如何编写来做到这一点。？

可以在指针的帮助下完成吗？

如果面试官没有告诉我将其反转到自己的位置，那么使用数组的另一个字符数组是否容易处理，反转后会有新的字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T13:18:03.357

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T13:23:12.490

This doesn't sound too hard, if I understand it properly. Pseudocode:

```
let p = ch
while *p != '\0'
  while *p is whitespace
    ++p
  let q = last word character starting from p
  reverse the bytes between p and q
  let p = q + 1 
```

The reversal of a range of bytes is trivial once you have pointers to the start and end. Just loop over half the distance, and swap the bytes.

Of course, as pointed out elsewhere, I assume that the buffer in `ch` is actually modifiable, which requires a change in the code you showed.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T13:44:16.090

```
 char *ch="krishna is the best"; 
```

No can do, this is a pointer to a read-only string literal. Let us imagine that your interviewer knew C and wrote this instead:

```
char str[]="krishna is the best"; 
```

Then you could do something like this:

```
#include <stdio.h>
#include <string.h>
#include <ctype.h>

char* str_reverse_word (char* str)
{
  char* begin;
  char* end;
  char* the_end;
  char  tmp;

  while(isspace(*str)) /* remove leading spaces from the string*/
  {
    str++;
  }

  begin = str;
  end = str;

  while(!isspace(*end) && *end != '\0') /* find the end of the sub string */
  {
    end++;
  }
  the_end = end; /* save this location and return it later */
  end--; /* move back 1 step to point at the last valid character */

  while(begin < end)
  {
    tmp = *begin;
    *begin = *end;
    *end = tmp;

    begin++;
    end--;
  }

  return the_end;
}

void str_reverse_sentence (char* str)
{
  do
  {
    str = str_reverse_word(str);
  } while (*str != '\0');
}

int main (void)
{
  char str[]="krishna is the best";
  str_reverse_sentence (str);
  puts(str);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T13:24:53.800

You can reverse it word-by-word.

Just read the string till `' '(space)` ie. you will get `krishna` and reverse this string and continue reading original string till another `' '(space)` and keep reversing the string.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T14:06:34.437

Does the string *really* have to be reversed in place, or is it just the *output* that has to be reversed?

If the former, then you have a problem. If the declaration really is

```
char *ch = "krishna is the best"; 
```

then you're attempting to modify a *string literal*, and the behavior upon attempting to modify a string literal is undefined. If you're working on a platform where string literals are stored in read-only memory, you'll get a runtime error. You would either need to change the declaration to

```
char ch[] = "krishna is the best"; 
```

or allocate a dynamic buffer and copy the contents of the string to it

```
char *ch = "krishna is the best";
char *buf = malloc(strlen(ch) + 1);
if (buf)
{
  strcpy(buf, ch);
  // reverse the contents of buf
} 
```

in order to accomplish a reversal *in place*.

If it's just the *output* that needs to be reversed, then storage doesn't really matter, you'd just need a couple of pointers to keep track of the beginning and end of each substring. For example:

```
#include <stdio.h>
#include <string.h>

int main(void)
{
  char *ch = "krishna is the best";
  char *start, *end;

  // point to the beginning of the string
  start = ch;

  // find the next space in the string
  end = strchr(start, ' ');

  // while there are more spaces in the string
  while (end != NULL)
  {
    // set up a temporary pointer, starting at the space following the
    // current word
    char *p = end;

    // while aren't at the beginning of the current word, decrement the
    // pointer and print the character it points to
    while (p-- != start)
      putchar(*p);

    putchar(' ');

    // find the next space character, starting at the character
    // following the previous space character.
    start = end + 1;
    end = strchr(start, ' ');
  }

  // We didn't find another space character, meaning we're at the start of
  // the last word in the string.  We find the end by adding the length of the
  // last word to the start pointer.
  end = start + strlen(start);

  // Work our way back to the start of the word, printing
  // each character.
  while (end-- != start)
    putchar(*end);

  putchar('\n');
  fflush(stdout);
  return 0;
} 
```

There's probably a better way to do that, this is just off the top of my head.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T13:19:37.563

Not sure of specific code right now, but here is the way I would do it (assuming you were able to write over original variable).

1) Split the string into an array of words using blank space as the delimiter

2) Loop through array and sort the words in reverse order

3) Rebuild the string and assign back to variable.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-29T13:24:58.093

Here is an in-place swap using XOR:

```
void reverseStr(char *string)
{
    char *start = string;
    char *end = string + strlen(string) - 1;

    while (end > start) {
        if (*start != *end)
        {
            *start = *start ^ *end;
            *end   = *start ^ *end;
            *start = *start ^ *end;
        }

        start++;
        end--;
    }
} 
```

This of course assumes that `string` is in writeable memory, so don't come complaining that it isn't.

If you need to split the words first, then give me a few minutes and I'll write something up.

EDIT:

For words separated by space (`0x20`), the following code should work:

```
void reverseStr(char *string)
{
    // pointer to start of word
    char *wordStart = string;

    // pointer to end of word
    char *wordEnd = NULL;

    // whether we should stop or not
    char stop = 0;

    while (!stop)
    {
        // find the end of the first word
        wordEnd = strchr(wordStart, ' ');
        if (wordEnd == NULL) 
        {
            // if we didn't a word, then search for the end of the string, then stop after this iteration
            wordEnd = strchr(wordStart, '\0');
            stop = 1; // last word in string
        }

        // in place XOR swap
        char *start = wordStart;
        char *end   = wordEnd - 1; // -1 for the space

        while (end > start) {
            if (*start != *end)
            {
                *start = *start ^ *end;
                *end   = *start ^ *end;
                *start = *start ^ *end;
            }

            start++;
            end--;
        }

        wordStart = wordEnd + 1; // +1 for the space
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-14T05:07:42.700

```
Here is my working solution ->  
 #include<stdio.h>
    #include<ctype.h>
    #include<string.h>

    char * reverse(char *begin, char *end)
    {
      char temp;
      while (begin < end)
      {
        temp = *begin;
        *begin++ = *end;
        *end-- = temp;
      }
    }

    /*Function to reverse words*/
    char * reverseWords(char *s)
    {
      char *word_begin = s;
      char *temp = s; /* temp is for word boundry */

      while( *temp )
      {
        temp++;
        if (*temp == '\0')
        {
          reverse(word_begin, temp-1);
        }
        else if(*temp == ' ')
        {
          reverse(word_begin, temp-1);
          word_begin = temp+1;
        }
      } /* End of while */
      return s;
    }

    int main(void)
    {
        char str[]="This is the test";
        printf("\nOriginal String is -> %s",str);
        printf("\nReverse Words \t   -> %s",reverseWords(str));
      return 0;
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-14T05:08:02.747

```
Here is my working solution ->  
#include<stdio.h>
#include<ctype.h>
#include<string.h>

char * reverse(char *begin, char *end)
{
  char temp;
  while (begin < end)
  {
    temp = *begin;
    *begin++ = *end;
    *end-- = temp;
  }
}

/*Function to reverse words*/
char * reverseWords(char *s)
{
  char *word_begin = s;
  char *temp = s; /* temp is for word boundry */

  while( *temp )
  {
    temp++;
    if (*temp == '\0')
    {
      reverse(word_begin, temp-1);
    }
    else if(*temp == ' ')
    {
      reverse(word_begin, temp-1);
      word_begin = temp+1;
    }
  } /* End of while */
  return s;
}

int main(void)
{
    char str[]="This is the test";
    printf("\nOriginal String is -> %s",str);
    printf("\nReverse Words \t   -> %s",reverseWords(str));
  return 0;
} 
```

# php - 用 PHP 将图像中的颜色替换为另一种颜色

> ID：12178874
> 
> 赞同：7
> 
> 时间：2012-08-29T13:16:11.347
> 
> 标签：php, gd

有人可以帮助我用一个简单的脚本来使用 PHP 将图像中的特定颜色替换为另一种颜色吗？这是一个示例（颜色从绿色变为黄色）。

![前](../Images/5522a7eddec7a4465789039b900ffb94.png) ![后](../Images/2a805415cb76c34c31d1d1e7c5bc645a.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-29T13:26:11.320

如果你的意思是在 PHP 中使用 GD 库，你应该检查一下[imagefilter()](http://php.net/manual/en/function.imagefilter.php)

步骤是：

*   从 .PNG 图像开始，内部使用白色，外部使用 alpha。
*   使用`imagefilter($img, IMG_FILTER_COLORIZE, 0, 255, 0))`0,255,0 是您的 RGB 颜色（本例中为亮绿色）
*   保存 alpha 并打印出结果。

* * *

编辑，工作代码和说明。

我的意思是，在黑线的外部使用 alpha，在内部使用白色。这是示例图像： ![WhiteInAlphaOut](../Images/0cd762a4b14f34023035967f13a098b3.png)

这是为白色部分着色的工作代码：

```
header('Content-Type: image/png');

/* RGB of your inside color */
$rgb = array(0,0,255);
/* Your file */
$file="../test.png";

/* Negative values, don't edit */
$rgb = array(255-$rgb[0],255-$rgb[1],255-$rgb[2]);

$im = imagecreatefrompng($file);

imagefilter($im, IMG_FILTER_NEGATE); 
imagefilter($im, IMG_FILTER_COLORIZE, $rgb[0], $rgb[1], $rgb[2]); 
imagefilter($im, IMG_FILTER_NEGATE); 

imagealphablending( $im, false );
imagesavealpha( $im, true );
imagepng($im);
imagedestroy($im); 
```

*注意*：我们必须否定值，因为 colorize 仅适用于非白色部分。我们可以通过使用带有黑色内部的白色边框图像来解决此问题。

*注意*：此代码仅适用于黑色边框和白色内部图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:20:49.280

我想答案是拥有多个版本的图像，然后根据选择的颜色加载正确的图像？

您可以使用 switch 语句来加载正确的图像

```
//get selected colour
    switch ($colour) {
    case "red":
        echo "<img src='RED IMAGE' ";
        break;
    case "blue":
        echo "<img src='blue IMAGE' ";
        break;
    case "green":
        echo "<img src='green IMAGE' ";
        break;
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T13:30:11.867

```
<?php
header("Content-type: image/png");
$im = imagecreate(200, 200)
imagefill($im, 0, 0, $red);

// above could come from an uploaded image
// find a blue in the image
$newblue = imagecolorclosest($im, 0, 0, 255);
// change it to green
imagecolorset($im, $newblue, 0, 255, 0);
imagepng($im);
imagedestroy($im);
?php> 
```

在这里，您可以找到最接近蓝色的颜色并替换为绿色。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T13:43:24.463

我试过这个：

```
<?php
$imgname = "1.gif";
$im = imagecreatefromgif ($imgname);
$index = imagecolorexact ($im,0,128,0);
imagecolorset($im,$index,240,255,0);
$imgname = "result.gif";
imagegif($im,$imgname);
?>
<img src="result.gif"> 
```

而不是替换每个绿色像素，我得到了这个（衬衫颜色没有改变）：

![衬衫没有更换](../Images/1faa185f8484e53d876e721b590a11fc.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-28T22:11:32.227

缓慢但确定的方法，迭代每个像素。

```
function ReplaceColour($img, $r1, $g1, $b1, $r2, $g2, $b2)
{
    if(!imageistruecolor($img))
        imagepalettetotruecolor($img);
    $col1 = (($r1 & 0xFF) << 16) + (($g1 & 0xFF) << 8) + ($b1 & 0xFF);
    $col2 = (($r2 & 0xFF) << 16) + (($g2 & 0xFF) << 8) + ($b2 & 0xFF);

    $width = imagesx($img); 
    $height = imagesy($img);
    for($x=0; $x < $width; $x++)
        for($y=0; $y < $height; $y++)
        {
            $colrgb = imagecolorat($img, $x, $y);
            if($col1 !== $colrgb)
                continue; 
            imagesetpixel ($img, $x , $y , $col2);
        }   
} 
```

# symfony - gedmo 在 gedmo-doctrine-extensions 中翻译 setHint 不起作用

> ID：12178884
> 
> 赞同：1
> 
> 时间：2012-08-29T13:16:37.817
> 
> 标签：symfony, doctrine-orm, translation

我正在 Symfony 2.0 上开发网站，并被教义翻译卡住了。我一直在谷歌搜索，Stackoverflow，但没有合适的答案。所以首先，我不会遇到我所有的项目只需要的东西。首先，我安装了理论扩展，然后是 Stof。在 WAMMP 上，sluggable 毫无问题地开始工作（但在 Linux 上我不得不复制并且 config_dev.yml 被破坏了）。但我找不到如何制作可翻译作品的决定。于是我在谷歌上找到了[http://gediminasm.org/article/translatable-behavior-extension-for-doctrine-2](http://gediminasm.org/article/translatable-behavior-extension-for-doctrine-2) 创建了实体和翻译实体。

代码如下：

```
<?php

namespace AV\TradeBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Gedmo\Mapping\Annotation as Gedmo;
use Gedmo\Translatable\Translatable;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * AV\TradeBundle\Entity\Countries
 *
 * @ORM\Table(name="countries")
 * @ORM\Entity
 * @Gedmo\TranslationEntity(class="AV\TradeBundle\Entity\CountryTranslation")
 */
class Countries implements Translatable
{
/**
 * @var integer $id
 *
 * @ORM\Column(name="id", type="integer", nullable=false)
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="IDENTITY")
 */
private $id;

/**
 * @var string $country
 * @Gedmo\Translatable
 * @ORM\Column(name="country", type="string", length=255, nullable=false)
 */
private $country;

/**
 * @Gedmo\Locale
 * Used locale to override Translation listener`s locale
 * this is not a mapped field of entity metadata, just a simple property
 */
private $locale;

/**
* @ORM\OneToMany(
* targetEntity="CountryTranslation",
* mappedBy="object",
* cascade={"persist", "remove"}
* )
*/
private $translations;

public function __construct()
{
    $this->translations = new ArrayCollection();
}
/**
 * Get id
 *
 * @return integer 
 */
public function getId()
{
    return $this->id;
}

/**
 * Set country
 *
 * @param string $country
 */
public function setCountry($country)
{
    $this->country = $country;
}

/**
 * Get country
 *
 * @return string 
 */
public function getCountry()
{
    return $this->country;
}

public function setTranslatableLocale($locale)
{
    $this->locale = $locale;
}

public function getTranslations()
{
    return $this->translations;
}

public function addTranslation(CountryTranslation $t)
{
    if (!$this->translations->contains($t)) {
        $this->translations[] = $t;
        $t->setObject($this);
    }
}

public function __toString() {
    return $this->getCountry();
} 
```

}

在这里继续到那个博客上提到的这样的翻译实体

```
<?php
namespace AV\TradeBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Gedmo\Translatable\Entity\MappedSuperclass\AbstractPersonalTranslation;

/**
* @ORM\Entity
* @ORM\Table(name="country_translations",
* uniqueConstraints={@ORM\UniqueConstraint(name="lookup_unique_idx", columns={
* "locale", "object_id", "field"
* })}
* )
*/
class CountryTranslation extends AbstractPersonalTranslation
{
/**
* Convinient constructor
*
* @param string $locale
* @param string $field
* @param string $value
*/
public function __construct($locale, $field, $value)
{
    $this->setLocale($locale);
    $this->setField($field);
    $this->setContent($value);
}

/**
* @ORM\ManyToOne(targetEntity="Countries", inversedBy="translations")
* @ORM\JoinColumn(name="object_id", referencedColumnName="id", onDelete="CASCADE")
*/
protected $object;
}

?> 
```

最后但不是最后一个 $em = $this->getDoctrine()->getEntityManager();

```
 $query = $em->createQuery(
            " SELECT c FROM AVTradeBundle:Companies c " .
            " ORDER BY c.title ASC "
            )->setHint(
\Gedmo\Translatable\TranslatableListener::HINT_TRANSLATABLE_LOCALE,'en'); 
```

我只看到项目的默认语言没有翻译（在国家/地区左加入公司）。也许我应该将 Symfony 的版本升级到 2.1，但是我的 2.0 冻结了很多包。

请看我的问题。在 symfony 的论坛上根本没有答案。

顺便说一句，我没有注册任何内核侦听器，因为我使用了 Stof。谢谢，事先，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:03:08.703

您误解了在学说扩展包中使用 Translatable。您应用于查询的提示是当您希望所有字段的翻译自动加入时（因此您不必进行左连接），因此您可以使用排序过滤或任何您想要的翻译字段而不是原始记录字段。[请参阅可翻译文档](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/translatable.md)的“使用 ORM 查询提示”部分。因此，通过将提示应用于查询，在您的情况下，它所做的只是您的国家/地区将在您的结果中自动翻译。此外，您提供`\Gedmo\Translatable\TranslatableListener::HINT_TRANSLATABLE_LOCALE,'en'`作为提示，这意味着您的结果将始终翻译成英文。我真的怀疑这是你正在寻找的行为。利用

```
$query->setHint(
    \Doctrine\ORM\Query::HINT_CUSTOM_OUTPUT_WALKER,
    'Gedmo\\Translatable\\Query\\TreeWalker\\TranslationWalker'
); 
```

如果您希望在用户的语言环境中翻译结果。您只需要在`\Gedmo\Translatable\TranslatableListener::HINT_TRANSLATABLE_LOCALE`使用 apc 或 memcache 时使用，因为查询将使用第一次使用的语言环境进行缓存。然后，您需要将此提示与当前用户区域设置一起使用，而不是始终使用“en”。同样，这一切都在[文档](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/translatable.md)中。

所以如果你想要你的翻译，你需要自己去获取它们。如果您不关心您所在国家/地区的名称被自动翻译，则不要应用提示并对您所在国家/地区的翻译执行 LEFT JOIN（在这里我看到您正在查询公司表，因此您必须 LEFT JOIN the country第一的）。这些将通过`$country->getTranslations()`. 如果应用提示，则 LEFT JOIN 是隐式的，但名称将被翻译。

# c# - 类型 'X' 和 X' 都使用来自命名空间 '' 的 XML 类型名称 'X'。使用 XML 属性为类型指定唯一的 XML 名称和/或命名空间

> ID：12178888
> 
> 赞同：3
> 
> 时间：2012-08-29T13:16:42.573
> 
> 标签：c#, asp.net-mvc-3, xml-serialization

**我在反序列化我的一个 DTO 时收到以下异常，是否有任何方法可以解决此问题而无需使用 IXmlSerializable？**

“类型'RRA.Core.Services.DataContracts.ReferenceData.Status'和'RRA.Core.Services.DataContracts.AR.Status'都使用来自命名空间''的XML类型名称'Status'。使用XML属性来指定类型的唯一 XML 名称和/或命名空间。”

**这是 DTO：**

```
namespace RRA.Core.Services.DataContracts.AR
{
    using System.Runtime.Serialization;

    /// <summary>
    /// Status data object
    /// </summary>
    [DataContract]
    public class Status : RRA.Core.Services.DataContracts.ReferenceData.Status
    {
    }
} 
```

****更新/解决方案****

[这](https://stackoverflow.com/questions/8946405/inheriting-existing-net-class-serialization-error)解决了我遇到的特定问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T13:25:04.943

您的两个类具有完全相同的名称。在 C# 中没关系，因为它们位于不同的命名空间中 - 一个在 RRA.Core.Services.DataContracts.AR 中，一个在 RRA.Core.Services.DataContracts.ReferenceData 中。您需要为您的 XML 做同样的事情。

在两个 Status 类上，设置 DataContract 属性的 Namespace 和 Name 属性以区分它们。

# php - 通过 PHP 进行 SVN 结帐

> ID：12178894
> 
> 赞同：4
> 
> 时间：2012-08-29T13:17:07.853
> 
> 标签：php, svn, svn-checkout

这是我的做法：

```
svn_checkout('svn+ssh://server.com/svn_path', 'folder/'); 
```

但似乎该功能无法识别 svn+ssh 协议，因为它给了我内部服务器错误。使用 HTTP 可以正常工作。有没有办法结账？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:19:31.120

此示例演示如何将目录从存储库签出到名为 calc 的目录：

```
svn_checkout('http://www.example.com/svnroot/calc/trunk', dirname(__FILE__) . '/calc'); 
```

参考[**链接**](http://php.net/manual/en/function.svn-checkout.php)

**或者**

尝试这个

```
// svn checkout command
$checkout = "svn --username SVN-USERNAME --password SVN-PASSWORD checkout http://SVN-REPOSITORY-LOCATION DESTINATION-FOLDER";
// run php exec command
exec($checkout); 
```

参考[**链接**](http://www.brightlemon.com/blog/checkout-svn-php)

# asp.net-mvc - ApiController 如何接受多个变量？

> ID：12178895
> 
> 赞同：3
> 
> 时间：2012-08-29T13:17:07.770
> 
> 标签：asp.net-mvc, curl, asp.net-web-api

我可以将多个变量传递给`[HttpGet]`ApiController 操作吗？例如：

```
[HttpGet]
public IPagedList<Something> GetAll(int? page, string sortOrder="")
{
...
} 
```

我测试使用

```
curl http://localhost:[port]/api/[controller]/GetAll?page=3&sortOrder=Name 
```

但该行动从未被调用。返回消息是：未找到与请求 URI 匹配的 HTTP 资源。什么地方出了错？

- -更新 - -

如果我检查 HttpActionContext.Request.RequestUri.Query 中的查询字符串，则`AbsoluteUri`在 & 符号处截断并只给我`page=3`.

---更新结束

我还尝试了一个变量：

```
[HttpGet]
public IPagedList<Something> GetAll(int? page)
{
...
} 
```

在测试中可以毫无问题地到达里面的断点

curl http://localhost:[端口]/api/[控制器]/GetAll?page=3

我还创建了一个视图模型：

```
public class ListRequestModel
{
    public string SortOrder { get; set; }
    public string CurrentFilter { get; set; }
    public string SearchString { get; set; }
    public int PageNumber { get; set; }
} 
```

动作就像：

```
[HttpGet]
public IPagedList<Something> GetAll(ListRequestModel model)
{
...
} 
```

然后测试

curl http://localhost:[端口]/api/[控制器]/GetAll?PageNumber=3&SortOrder=Name

这一次，可以达到里面的断点，这是一件了不起的事情。但模型为空，未填充查询字符串中的数据。

那么，将多个变量传递给动作方法的正确方法是什么？请帮忙。谢谢你。

- - - - - 更新 - - - - - -

根据要求，下面粘贴的是文件中的路由表`RouteConfig.cs`：

```
routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

在`Global.asax.cs`,`AreaRegistration.RegisterAllAreas();`之前`RouteConfig.RegisterRoutes(RouteTable.Routes);`但没有 Area 路线以 . 开头`api`。我对此 ApiController 的所有其他测试都可以毫无问题地进入操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:48:23.083

您的路由和设置很好。当然，您可以将多个参数传递给控制器​​。

您只需要改进您的 Linux foo，因为`&`在 Linux shell 中具有特殊含义......

来自[维基百科](http://en.wikipedia.org/wiki/Ampersand)：

> *   一些 Unix shell 使用 & 作为元字符：
> *   一些 Unix shell，如 POSIX 标准 sh shell，使用与号在后台执行进程并复制文件描述符。
> *   在 Bash 中，& 符号可以分隔单词、控制命令历史记录、复制文件描述符、执行逻辑操作、控制作业以及参与正则表达式。

所以你需要在你的命令`&`中用反冲来逃避＆符号`\`

```
curl http://localhost:[port]/api/[controller]/GetAll?page=3\&sortOrder=Name 
```

`""`或者在 url 周围使用引号：

```
curl "http://localhost:[port]/api/[controller]/GetAll?page=3&sortOrder=Name" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:22:39.693

尝试注册您的路线`HttpRouteCollection`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:32:24.210

如果您没有使用基于操作的路由，那么您做错了。尝试以下操作：

```
curl http://localhost:[port]/api/[controller]?page=3&sortOrder=Name 
```

另一方面，如果您在相同的上下文中运行 Web API 应用程序和 ASP.NET MVC，请确保在 MVC 路由之前注册您的 Web API 路由。否则，默认 MVC 路由将捕获您的所有 Web API 请求，并且很可能返回 404。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-29T20:31:20.257

在您的示例中：

```
[HttpGet]
public IPagedList<Something> GetAll(ListRequestModel model)
{
...
} 
```

这永远不会奏效，你不能得到一个模型，它必须是 POST/PUTed。

# python - SWIG 使 Python 崩溃

> ID：12178897
> 
> 赞同：5
> 
> 时间：2012-08-29T13:17:11.947
> 
> 标签：python, swig

我在这里有一个最简单的测试用例：

```
%module test
%{

static char* MyExceptionName = "_test.MyException";
static PyObject* MyException = NULL;

%}

%inline %{

static PyObject* Foo()
{
    PyErr_SetNone(MyException);
    return NULL;
}

%}

%init
{
    MyException = PyErr_NewException(MyExceptionName, NULL, NULL);
} 
```

这是 setup.py 脚本：

```
from distutils.core import setup, Extension
setup(name="test", version="1.0",
    ext_modules = [Extension("_test", ["test_wrap.c"])]) 
```

当我按如下方式构建和测试它时，我得到：

```
 swig -python -threads test.i
 python_d -c "import test; test.Foo()"
 Fatal Python error: PyThreadState_Get: no current thread 
```

我得到的回溯是

```
python27_d.dll!Py_FatalError(const char * msg=0x000000001e355a00)  Line 1677    C
python27_d.dll!PyThreadState_Get()  Line 330    C
python27_d.dll!PyErr_Restore(_object * type=0x00000000020d50b8, _object * value=0x0000000000000000, _object * traceback=0x0000000000000000)  Line 27 + 0x5 bytes    C
python27_d.dll!PyErr_SetObject(_object * exception=0x00000000020d50b8, _object * value=0x0000000000000000)  Line 58 C
python27_d.dll!PyErr_SetNone(_object * exception=0x00000000020d50b8)  Line 64   C
_test_d.pyd!Foo()  Line 2976    C 
```

环境：

*   赢7 64位，
*   Python 2.7.3（默认，2012 年 8 月 15 日，18:18:52）[MSC v.1500 64 位 (AMD64)] 在 win32 上
*   痛饮 2.0.7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:27:13.937

错误的原因，事实证明是因为当`-threads`通过

```
swig -threads -python test.i 
```

我们得到这样的东西（多余的代码已被编辑）：

```
PyObject *_wrap_Foo(PyObject *SWIGUNUSEDPARM(self), PyObject *args) {
  PyObject *resultobj = 0;
  PyObject *result = 0 ;

  if (!PyArg_ParseTuple(args,(char *)":Foo")) SWIG_fail;
  {
    SWIG_PYTHON_THREAD_BEGIN_ALLOW;
    result = (PyObject *)Foo();
    SWIG_PYTHON_THREAD_END_ALLOW;
  }
  resultobj = result;
  return resultobj;
fail:
  return NULL;
}

static PyObject* Foo()
{
    PyErr_SetNone(MyException);
    return NULL;
} 
```

看，当 Foo() 被调用时，全局解释器锁已经被释放。Foo() 不应再进行任何 Python API 调用。

解决方案是使用 SWIG_Python_SetErrorObj，它在调用 Python C API 之前获取全局解释器锁。

```
static PyObject* Foo()
{
    SWIG_Python_SetErrorObj(MyException, Py_None);
    return NULL;
} 
```

另一种方法是使用 SWIG_PYTHON_THREAD_BEGIN_BLOCK; 和 SWIG_PYTHON_THREAD_END_BLOCK；

```
static PyObject* Foo()
{
    SWIG_PYTHON_THREAD_BEGIN_BLOCK; 

    PyErr_SetNone(MyException);

    SWIG_PYTHON_THREAD_END_BLOCK;
    return NULL;
} 
```

# c# - 我们可以在给定范围内给定相同种子的情况下生成相同的随机数吗

> ID：12178901
> 
> 赞同：1
> 
> 时间：2012-08-29T13:17:20.857
> 
> 标签：c#

假设我有一个种子 x，并且我想使用 c# 内置类生成从 a 到 b 范围内的随机 no 列表。相同的种子 x 稍后会生成与之前生成的相同的随机数列表吗？如果没有，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T13:21:05.943

正如[Random 类的在线文档所述](http://msdn.microsoft.com/en-us/library/vstudio/ctssatww)，是的，如果您的种子相同，您将生成相同的伪随机值序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T13:19:28.660

是的，相同的种子总是产生相同的随机数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T13:19:28.473

是的。相同的种子产生相同的随机序列。

# c# - Azure 网站配置错误

> ID：12178904
> 
> 赞同：0
> 
> 时间：2012-08-29T13:17:33.257
> 
> 标签：c#, asp.net, azure, webforms

我正在尝试将一个大部分为空的 asp.net webforms 应用程序（使用 web.config 中指定的自定义 httpmodule）部署到 Azure 并收到以下错误：

> 配置错误
> 
> 说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。
> 
> 解析器错误消息：加载配置文件时出错：访问路径“D:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\xqhbvcov.tmp”被拒绝。
> 
> 源错误：
> 
> [没有相关的源代码行]
> 
> 源文件：D:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\machine.config
> 行：0
> 
> 版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.276

有任何想法吗？我不确定还有哪些其他信息可能是相关的，所以如果我遗漏了一些重要的信息，请询问，我会提供。

整个 web.config

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <!--<httpModules>
      <add name="AbcdModule" type="org.abcd.abcdHttpModule"/>
    </httpModules>-->
  </system.web>
  <system.webServer>
    <modules>
      <add name="AbcdModule" type="org.abcd.abcdHttpModule"/>
    </modules>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T23:11:02.570

我与 Windows Azure 网站团队进行了讨论，发现 Windows Azure 网站支持自定义 HTTP 模块，因此它们应该可以工作，并且可能会出现问题，具体取决于注册的复杂程度。

为了测试，我使用下面的链接创建了一个自定义 HTTP 模块并在 Azure 网站上对其进行了测试，没有任何问题：http: [//msdn.microsoft.com/en-us/library/ms227673%28v=VS .100%29.aspx](http://msdn.microsoft.com/en-us/library/ms227673%28v=VS.100%29.aspx)

如果您可以提供有关您的自定义 HTTP 模块（这似乎是 org.abcd namspace 和其他任何内容的一部分）的更多信息，我们肯定可以提供帮助。[或者，您可以在Azure 网站论坛](http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/threads)提交请求，有人可以直接帮助您。

# model-view-controller - Jquery：验证MVC中的动态添加字段

> ID：12178906
> 
> 赞同：1
> 
> 时间：2012-08-29T13:17:45.277
> 
> 标签：model-view-controller, jquery

我正在动态添加控件并希望对表单提交执行验证。就像希望在动态添加的控件上进行不显眼的验证一样简单。逻辑如下：

**模型：**

```
public List<MyCollection> MyColl {get;set;} 
```

我在 jquery 对话框中打开部分视图。

**查询：**

> //动态添加控件
> var length=0;
> //每次添加新行时增加长度的逻辑

```
$(".myDiv").append("<tr><input type=text id=MyColl[' + length + '].Field1 name=MyColl[' + length + '].Field1></tr>") 
```

我不知道在这种情况下如何指定不显眼？任何帮助，将不胜感激。

# javascript - javascript 可拖动滑块，可在 mouseUp 上弹回中间位置

> ID：12178907
> 
> 赞同：0
> 
> 时间：2012-08-29T13:17:45.803
> 
> 标签：javascript, jquery

我想在滚动条/滑块中实现类似拨动拨号的行为，如下所示：

一开始，手柄位于“滚动条/滑块”区域的中间。当您单击手柄并将其向左或向右拖动（同时保持单击）时，会执行一些其他操作（更新页面上的另一个区域）——滑块被拖动到左端或右端的次数越多，快点。释放鼠标按钮后，手柄应弹回滑块区域的中间。

有没有像 jquery/ui 插件/组件/脚本这样的东西可以用于和扩展这种行为？

更新以澄清：

我已经有一个像这样的滑块[http://jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)

我希望此滑块以下列方式运行：

*   滑块的手柄应该从中间/中心开始
*   滑块单击手柄时，您可以将其向左或向右拖动（只要按住鼠标按钮）
*   当您释放鼠标按钮时，滑块的手柄应弹回起始位置（中心/中间）
*   根据手柄当前的距离和哪一侧，我想滚动其他内容（其他内容不是这个问题的一部分）

希望这有助于更好地解释我的意图和问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T19:56:49.027

如果您在停止事件处理程序中将滑块值更改回零，那么您将获得所需的快照，这是我刚刚制作的缩放速度控件的代码：

```
$('#zoomslider').slider({
    slide: function(event,ui){
            setzoomspeed(ui.value)
        },

    stop: function(event,ui) {
        $('#zoomslider').slider("value",0);
        setzoomspeed(0);
    },  
    min:-20,
    max:20,
    value:0
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:25:30.090

你应该试试[jQuery UI Slider](http://jqueryui.com/demos/slider/)

在事件选项卡中，您可以看到可以设置`change`处理程序。

然后您可以在处理程序中获取滑块的当前值，例如

```
$( ".selector" ).slider({
   change: function(event, ui) {
       var current_value = ui.value;
       //do something
   }
}); 
```

# php - MySQL - INSERT INTO 说我已经使用了 'to'='$user2' 的语法

> ID：12178910
> 
> 赞同：0
> 
> 时间：2012-08-29T13:17:54.460
> 
> 标签：php, mysql, chat

```
$time=date("G:i:s j.n.Y");
$wholetime="$time";
mysql_query("INSERT INTO rivase_chat_posts SET sender='$user', content='$msg', time='$wholetime', 'to'='$affectuser'");
$msg=""; 
```

我正在做私人聊天。那是我的代码。它导致此错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''to'='gs'' 附近使用正确的语法
> （$user="gskartwii", $msg="HI", $affectuser='gs' )

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T13:18:50.293

对于列名，使用反引号而不是单引号：

```
`to`='$affectuser' 
```

单引号仅用于字符串。反引号（通常在键盘上数字 1 的左侧）是 mysql 中用于列名或表名的东西。

编辑：正如 Michael Berkowski 正确指出的那样，您必须为列名执行此操作的原因是因为`to`它是 mysql 中的保留字 - 这是一种可爱的说法，它是 mysql 认为在 a 中表示某些东西的特殊词正常查询。在那一点上，将保留字用作表格中的列确实可能不是最好的主意 - 您必须在使用它们的每个实例中反引号。您可能需要考虑将其重命名为类似这样`toUser`的名称，这可能会使您的项目的其余部分更容易 SQL 输出:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T13:18:38.353

你把`'to'`单引号之间。列名没有被引用，或者在反引号之间。单引号用于字符串。您不能更新字符串，因此`SET 'to'='user'`是错误的。

```
INSERT INTO rivase_chat_posts 
SET `sender`='$user', `content`='$msg', `time`='$wholetime', `to`='$affectuser' 
```

更新：评论说`to`是一个保留字，应该总是转义 - 使用反引号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T13:19:49.820

`To`是保留字。逃脱它：

```
INSERT INTO rivase_chat_posts 
SET sender='$user', content='$msg', time='$wholetime', `to` ='$affectuser' 
```

# jquery - 如何使用类名对表行进行排序？

> ID：12178916
> 
> 赞同：0
> 
> 时间：2012-08-29T13:18:10.810
> 
> 标签：jquery

嗨，我有下面的代码我想根据类名对表行进行排序..这里每行包含两个类，一个是“sprint1”，第二个是“cls *”..我想根据第二个对行进行排序类...提前谢谢

```
 <tr class="sprint1 cls5">

   <tr class="sprint1 cls4">

   <tr class="sprint1 cls3">

   <tr class="sprint1 cls1">

   <tr class="sprint1 cls2"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:28:52.883

用于`Array.sort`对类进行排序，然后根据该对行重新排序。

[http://jsfiddle.net/jamietre/eyr4N/](http://jsfiddle.net/jamietre/eyr4N/)

```
 var i, 
        table = $('table'),
        rows = $('tr'),
        classes = [];

    // build an array from the 2nd item in the class list on each row

    rows.each(function(i, e) {
        classes.push(e.className.split(' ')[1]);
    });

    // sort the array

    classes.sort();

    // reorganize the rows by adding each one again to the table, in the order of the
    // sorted class list. ("Adding" it with jquery append will move it to the end).

    for (i = 0; i < classes.length; i++) {
        table.append(table.find('tr.' + classes[i]));
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:30:09.480

您可以`array`根据`class`名称制作并替换`tr`元素。

```
var arr = [];
$('tr[class*="cls"]').each(function(i, v){
    var ind = this.className.slice(-1)
    arr[ind-1] = this.outerHTML
})    
$('table').html(arr.join(""))   
// or $('table tbody').html(arr.join("")) 
```

[小提琴](http://jsfiddle.net/6KeZb/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:37:16.030

使用排序方法..

```
var x = $('tr'); // <-- get all tr 
x.sort(function(a,b) {
    // split class name at cls and get the number after to sort with
    return $(a).attr('class').split('cls')[1] - $(b).attr('class').split('cls')[1];
});
// remake the table with new sorted tr
$('table > tbody').html(x); 
```

[http://jsfiddle.net/UTXUY/1/](http://jsfiddle.net/UTXUY/1/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-29T13:21:45.333

尝试使用 jQuery.dataTables ......它提供了分页和排序选项，包括这个

```
 <link href="css/demo_page.css" rel="stylesheet" id="stylesheet"/>
      <link href="css/demo_table.css" rel="stylesheet" />
     <script  src="js/jquery.dataTables.js"></script> 
```

并声明表格

```
 <table id="abc" class="display">
          ...
       </table> 
```

jQuery 调用：

```
 $('#abc').dataTable({

        "iDisplayLength": 5,

           }); 
```

# model-view-controller - Extjs 同步 hasOne 模型存储同步

> ID：12178921
> 
> 赞同：0
> 
> 时间：2012-08-29T13:18:30.633
> 
> 标签：model-view-controller, extjs, model, associations, has-one

我有两个模型：第一个是**PersonAddress**，其中包含有关人员和地址的信息，第二个是**Address**，其中包含有关某个地址的信息。*我用PersonAddress hasOne Address*将它连接到模型。现在我有存储**PersonAddresses**，其中包含几个**PersonAddress**模型。我想创建一个新的 PersonAddress。

1.  我创建地址
2.  我创建 PersonAddress
3.  我为 PersonAddress 设置地址 (personAddress.setAddress(address))
4.  同步 PersonAddresses 存储。

它尝试在服务器上创建 PersonAddress 模型，但尚未创建我的 Address 模型。

我希望在同步模型时存储 PersonAddress 自动同步新的地址模型。可能吗？这很重要，因为我在包含父模型 Person 的表单上使用了保存按钮，并且当我按下 Person 上的保存按钮时，我只想创建 Address 和 PersonAddress。

PS：对不起我的英语。如果你有什么不明白的地方，你可以问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:31:24.353

好的，我认为最好的方法是按照我的做法：

1.  我将地址字段添加到 PersonAddress 模型并使其保持不变。
2.  当我更改地址时，我设置了 PersonAddress 的地址字段并对其调用 setDirty() 。
3.  在服务器端，我获取发布数据并提取地址字段。
4.  在服务器端制作/更新我的地址模型。
5.  在服务器端制作/更新我的 PersonAddress 模型。
6.  将地址与 PersonAddress 连接起来。

# regex - OS X sed -E 不接受扩展的正则表达式

> ID：12178924
> 
> 赞同：27
> 
> 时间：2012-08-29T13:18:39.930
> 
> 标签：regex, macos, sed

我一直在尝试各种方法来在 OS X 上使用 sed 做一些基本的事情。以下是一些简单测试的结果。

```
echo "foo bar 2011-03-17 17:31:47 foo bar" | sed 's/foo/FOUND/g' 
```

返回（如预期）

```
FOUND bar 2011-03-17 17:31:47 FOUND bar 
```

但

```
echo "foo bar 2011-03-17 17:31:47 foo bar" | sed -E 's/\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}/FOUND/g' 
```

返回

```
foo bar 2011-03-17 17:31:47 foo bar 
```

和（更令人恼火）

```
echo "food bar 2011-03-17 17:31:47 food bar" | sed -E 's/\d/FOUND/g' 
```

返回

```
fooFOUND bar 2011-03-17 17:31:47 fooFOUND bar 
```

现在，`man sed`页面上说

```
The following options are available:

 -E      Interpret regular expressions as extended (modern) regular
         expressions rather than basic regular expressions (BRE's).  The
         re_format(7) manual page fully describes both formats. 
```

并`man re_format`说

```
 \d  Matches a digit character.  This is equivalent to
          `[[:digit:]]'. 
```

事实上：

```
echo "foo bar 2011-03-17 17:31:47 foo bar" | sed -E 's/[[:digit:]]{4}/FOUND/g' 
```

给我

```
foo bar FOUND-03-17 17:31:47 foo bar 
```

...但这很烦人。要么是因为我很密集，要么是因为手册页*对我撒谎*（老实说，我更喜欢前者）。

关于 SO 的快速文献回顾表明，我并不孤单，许多人建议安装`GNU coreutils`（或确实使用其他东西 - 比如说`perl -pe`） - 但是，我想确定：

ERE`sed`是否可以与 OS X 捆绑使用——正如`man`页面所暗示的那样——是否可以使用？

（我在 10.8 和 10.6.8）

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-04-18T01:53:10.540

在**macOS 上**，是称为***增强*****功能**`\d`的正则表达式功能集的一部分 - 请注意名称中的区别：***增强***，它**与*****扩展***不同。

 ***相反，***增强*功能**是***基本*****与*****扩展*****的独立维度****，可以为***基本***和扩展正则表达式激活。换句话说：**您可以拥有*增强的基本正则表达式*以及*增强的扩展正则表达式***。**

 **但是，似乎**给定实用程序中是否提供了增强功能已*预编译到其中***；换句话说：给定的实用程序要么支持*增强*功能，要么不支持 -**没有选项可以改变它**。（选项只允许您在*basic*和*extended*之间进行选择，例如`-E`for`sed`和`grep`。）

有关**所有增强功能的说明**`ENHANCED FEATURES`，请参阅中的部分`man re_format`。

还应注意，**如果 POSIX 兼容性很重要，则应避免**使用`sed`.

^(有*一些*POSIX 实用程序，例如`awk`，*确实*支持 ERE（扩展正则表达式），但是 (a)，POSIX 规范必须明确说明，并且 (b) 语法仅限于[*POSIX* ERE](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_04)，它不如特定平台提供的 ERE。)

* * *

**在实践中：**

遗憾的是，`man`各种实用程序的页面没有说明给定实用程序是否支持*增强*的正则表达式功能，因此它归结为反复试验。

**从 macOS 10.15 开始**：

**macOS`sed`不支持*增强*功能**，这说明了 OP 的体验。

*   例如，`sed -E 's/\d//g' <<<'a10'`没有效果，因为`\d`不被识别为代表数字（仅`[[:digit:]]`是）。

我发现**只有*一个*支持*增强*功能的`grep`**实用程序：：

```
grep    -o '\d\+' <<<'a10' # -> '10' - enhanced basic regex
grep -E -o '\d+'  <<<'a10' # -> '10' - enhanced extended regex 
```

*如果您知道其他人这样做，请告诉我们。*

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-29T14:20:57.740

ERE（扩展正则表达式）在 POSIX 中的（惊喜）[正则表达式](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html)下或 Mac OS X 下的`man re_format`. ERE 不使用 PCRE 样式`\d`表示法来表示数字。

您将需要使用`[0-9]`或`[[:digit:]]`表示数字。

```
$ echo "foo bar 2011-03-17 17:31:47 foo bar" |
> sed -E 's/[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}/FOUND/g'
foo bar FOUND foo bar
$ echo "foo bar 2011-03-17 17:31:47 foo bar" |
> sed -E 's/[[:digit:]]{4}-[[:digit:]]{2}-[[:digit:]]{2} [[:digit:]]{2}:[[:digit:]]{2}:[[:digit:]]{2}/FOUND/g'
foo bar FOUND foo bar
$ 
```

### \d 呢？

在我的 Mac OS X (10.7.4) 上，`man re_format`没有说任何关于`\d`匹配数字的内容。

```
RE_FORMAT(7)         BSD Miscellaneous Information Manual     RE_FORMAT(7)

NAME
     re_format -- POSIX 1003.2 regular expressions

DESCRIPTION
     Regular expressions (``REs''), as defined in IEEE Std 1003.2
     (``POSIX.2''), come in two forms: modern REs (roughly those of egrep(1);
     1003.2 calls these ``extended'' REs) and obsolete REs (roughly those of
     ed(1); 1003.2 ``basic'' REs).  Obsolete REs mostly exist for backward
     compatibility in some old programs; they will be discussed at the end.
     IEEE Std 1003.2 (``POSIX.2'') leaves some aspects of RE syntax and seman-
     tics open; `=' marks decisions on these aspects that may not be fully
     portable to other IEEE Std 1003.2 (``POSIX.2'') implementations.

     A (modern) RE is one= or more non-empty= branches, separated by `|'.  It
     matches anything that matches one of the branches.

     A branch is one= or more pieces, concatenated.  It matches a match for
     the first, followed by a match for the second, etc.

     A piece is an atom possibly followed by a single= `*', `+', `?', or
     bound.  An atom followed by `*' matches a sequence of 0 or more matches
     of the atom.  An atom followed by `+' matches a sequence of 1 or more
     matches of the atom.  An atom followed by `?' matches a sequence of 0 or
     1 matches of the atom.

     A bound is `{' followed by an unsigned decimal integer, possibly followed
     by `,' possibly followed by another unsigned decimal integer, always fol-
     lowed by `}'.  The integers must lie between 0 and RE_DUP_MAX (255=)
     inclusive, and if there are two of them, the first may not exceed the
     second.  An atom followed by a bound containing one integer i and no
     comma matches a sequence of exactly i matches of the atom.  An atom fol-
     lowed by a bound containing one integer i and a comma matches a sequence
     of i or more matches of the atom.  An atom followed by a bound containing
     two integers i and j matches a sequence of i through j (inclusive)
     matches of the atom.

     An atom is a regular expression enclosed in `()' (matching a match for
     the regular expression), an empty set of `()' (matching the null
     string)=, a bracket expression (see below), `.' (matching any single
     character), `^' (matching the null string at the beginning of a line),
     `$' (matching the null string at the end of a line), a `\' followed by
     one of the characters `^.[$()|*+?{\' (matching that character taken as an
     ordinary character), a `\' followed by any other character= (matching
     that character taken as an ordinary character, as if the `\' had not been
     present=), or a single character with no other significance (matching
     that character).  A `{' followed by a character other than a digit is an
     ordinary character, not the beginning of a bound=.  It is illegal to end
     an RE with `\'.

     A bracket expression is a list of characters enclosed in `[]'.  It nor-
     mally matches any single character from the list (but see below).  If the
     list begins with `^', it matches any single character (but see below) not
     from the rest of the list.  If two characters in the list are separated
     by `-', this is shorthand for the full range of characters between those
     two (inclusive) in the collating sequence, e.g. `[0-9]' in ASCII matches
     any decimal digit.  It is illegal= for two ranges to share an endpoint,
     e.g. `a-c-e'.  Ranges are very collating-sequence-dependent, and portable
     programs should avoid relying on them.

     To include a literal `]' in the list, make it the first character (fol-
     lowing a possible `^').  To include a literal `-', make it the first or
     last character, or the second endpoint of a range.  To use a literal `-'
     as the first endpoint of a range, enclose it in `[.' and `.]' to make it
     a collating element (see below).  With the exception of these and some
     combinations using `[' (see next paragraphs), all other special charac-
     ters, including `\', lose their special significance within a bracket
     expression.

     Within a bracket expression, a collating element (a character, a multi-
     character sequence that collates as if it were a single character, or a
     collating-sequence name for either) enclosed in `[.' and `.]' stands for
     the sequence of characters of that collating element.  The sequence is a
     single element of the bracket expression's list.  A bracket expression
     containing a multi-character collating element can thus match more than
     one character, e.g. if the collating sequence includes a `ch' collating
     element, then the RE `[[.ch.]]*c' matches the first five characters of
     `chchcc'.

     Within a bracket expression, a collating element enclosed in `[=' and
     `=]' is an equivalence class, standing for the sequences of characters of
     all collating elements equivalent to that one, including itself.  (If
     there are no other equivalent collating elements, the treatment is as if
     the enclosing delimiters were `[.' and `.]'.)  For example, if `x' and
     `y' are the members of an equivalence class, then `[[=x=]]', `[[=y=]]',
     and `[xy]' are all synonymous.  An equivalence class may not= be an end-
     point of a range.

     Within a bracket expression, the name of a character class enclosed in
     `[:' and `:]' stands for the list of all characters belonging to that
     class.  Standard character class names are:

       alnum    digit    punct
       alpha    graph    space
       blank    lower    upper
       cntrl    print    xdigit

     These stand for the character classes defined in ctype(3).  A locale may
     provide others.  A character class may not be used as an endpoint of a
     range.

     A bracketed expression like `[[:class:]]' can be used to match a single
     character that belongs to a character class.  The reverse, matching any
     character that does not belong to a specific class, the negation operator
     of bracket expressions may be used: `[^[:class:]]'.

     There are two special cases= of bracket expressions: the bracket expres-
     sions `[[:<:]]' and `[[:>:]]' match the null string at the beginning and
     end of a word respectively.  A word is defined as a sequence of word
     characters which is neither preceded nor followed by word characters.  A
     word character is an alnum character (as defined by ctype(3)) or an
     underscore.  This is an extension, compatible with but not specified by
     IEEE Std 1003.2 (``POSIX.2''), and should be used with caution in soft-
     ware intended to be portable to other systems.

     In the event that an RE could match more than one substring of a given
     string, the RE matches the one starting earliest in the string.  If the
     RE could match more than one substring starting at that point, it matches
     the longest.  Subexpressions also match the longest possible substrings,
     subject to the constraint that the whole match be as long as possible,
     with subexpressions starting earlier in the RE taking priority over ones
     starting later.  Note that higher-level subexpressions thus take priority
     over their lower-level component subexpressions.

     Match lengths are measured in characters, not collating elements.  A null
     string is considered longer than no match at all.  For example, `bb*'
     matches the three middle characters of `abbbc',
     `(wee|week)(knights|nights)' matches all ten characters of `weeknights',
     when `(.*).*' is matched against `abc' the parenthesized subexpression
     matches all three characters, and when `(a*)*' is matched against `bc'
     both the whole RE and the parenthesized subexpression match the null
     string.

     If case-independent matching is specified, the effect is much as if all
     case distinctions had vanished from the alphabet.  When an alphabetic
     that exists in multiple cases appears as an ordinary character outside a
     bracket expression, it is effectively transformed into a bracket expres-
     sion containing both cases, e.g. `x' becomes `[xX]'.  When it appears
     inside a bracket expression, all case counterparts of it are added to the
     bracket expression, so that (e.g.)  `[x]' becomes `[xX]' and `[^x]'
     becomes `[^xX]'.

     No particular limit is imposed on the length of REs=.  Programs intended
     to be portable should not employ REs longer than 256 bytes, as an imple-
     mentation can refuse to accept such REs and remain POSIX-compliant.

     Obsolete (``basic'') regular expressions differ in several respects.  `|'
     is an ordinary character and there is no equivalent for its functional-
     ity.  `+' and `?' are ordinary characters, and their functionality can be
     expressed using bounds (`{1,}' or `{0,1}' respectively).  Also note that
     `x+' in modern REs is equivalent to `xx*'.  The delimiters for bounds are
     `\{' and `\}', with `{' and `}' by themselves ordinary characters.  The
     parentheses for nested subexpressions are `\(' and `\)', with `(' and `)'
     by themselves ordinary characters.  `^' is an ordinary character except
     at the beginning of the RE or= the beginning of a parenthesized subex-
     pression, `$' is an ordinary character except at the end of the RE or=
     the end of a parenthesized subexpression, and `*' is an ordinary charac-
     ter if it appears at the beginning of the RE or the beginning of a paren-
     thesized subexpression (after a possible leading `^').  Finally, there is
     one new type of atom, a back reference: `\' followed by a non-zero deci-
     mal digit d matches the same sequence of characters matched by the dth
     parenthesized subexpression (numbering subexpressions by the positions of
     their opening parentheses, left to right), so that (e.g.)  `\([bc]\)\1'
     matches `bb' or `cc' but not `bc'.

SEE ALSO
     regex(3)

     Regular Expression Notation, IEEE Std, 1003.2, section 2.8.

BUGS
     Having two kinds of REs is a botch.

     The current IEEE Std 1003.2 (``POSIX.2'') spec says that `)' is an ordi-
     nary character in the absence of an unmatched `('; this was an uninten-
     tional result of a wording error, and change is likely.  Avoid relying on
     it.

     Back references are a dreadful botch, posing major problems for efficient
     implementations.  They are also somewhat vaguely defined (does
     `a\(\(b\)*\2\)*d' match `abbbd'?).  Avoid using them.

     IEEE Std 1003.2 (``POSIX.2'') specification of case-independent matching
     is vague.  The ``one case implies all cases'' definition given above is
     current consensus among implementors as to the right interpretation.

     The syntax for word boundaries is incredibly ugly.

BSD             March 20, 1994                 BSD 
```*****

# xml - GoDaddy 共享主机阻止访问文件夹和内容，但使用文件夹内的脚本

> ID：12178925
> 
> 赞同：0
> 
> 时间：2012-08-29T13:18:46.680
> 
> 标签：xml, .htaccess, web-config

希望这很容易解决，因为它让我觉得很傻。

我有一个 .com 托管的 o​​a 共享 Windows 服务器，我的根。在我的根目录中，我有我的 index.php 和一个名为“admin”的文件夹。

我要做的就是使用我的 index.php 来迎接访问者并阻止任何人访问、发布和链接到我的管理文件夹中的任何东西，而我已经尝试在“admin”中使用 .htaccess 并拒绝所有和今天我发现 GoDaddys Windows 服务器没有注意到 .htacces 文件，我必须改用 Web.config ：-

```
<?xml version="1.0" encoding="utf-8"?>
    <configuration>
        <system.web>
            <authorization>
                <deny users ="*" />
            </authorization>
        </system.web>
    </configuration> 
```

是我在阅读主题后在“管理员”中尝试过的，加上 root 中更简单的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:52:32.057

最好的办法是设置一个窗口密码来保护您的 Admin 文件夹，这样任何试图访问您的 /admin 文件夹的人都需要登录。我不确定 godaddy 是否有这样的功能，但我知道其他托管公司有。

# python - sqlalchemy 多会话提交静默失败，如何将 INSERT 更改为 UPDATE

> ID：12178929
> 
> 赞同：1
> 
> 时间：2012-08-29T13:18:51.547
> 
> 标签：python, mysql, session, sqlalchemy

我有一个事件模型，其中 external_id 设置为唯一。

```
 session1 = create_session()
    session2 = create_session()

    e1 = Event(external_id=1, headline='session1')
    session1.add(e1)
    e2 = Event(external_id=1, headline='session2')
    session2.add(e2)
    session1.commit()
    session2.commit()
    s = create_session()
    e = s.query(Event).filter_by(external_id=1).first()
    print e.headline 
```

我得到没有错误的输出“session1”，这意味着 session2.commit 静默失败。最终我想选择是否要覆盖数据库中的内容。因此，如果 session2.commit() 失败，我想选择是否在某些情况下更改插入以更新。任何人都可以帮助解决这个问题吗？谢谢。

编辑：我找到了答案。做到这一点的方法是通过双通道机制：两个会话都应该添加/提交具有最少信息的行（仅限唯一键）如果我们希望一个会话具有优先级，两个会话都应该进行查询并获取要更新的行，确保我们使用锁进行更新

# neo4j - 在 neo4j 中遍历 ExecutionResult 的成本更低的方法是什么？

> ID：12178930
> 
> 赞同：0
> 
> 时间：2012-08-29T13:18:52.883
> 
> 标签：neo4j

我是[Neo4j 数据库](http://docs.neo4j.org/chunked/stable/index.html)的新手。

我以上面的站点作为参考，并尝试创建数据存储节点和检索节点以及相应的属性。

为了检索节点，我使用以下方法：

```
ExecutionResult result = engine.execute(query,map);
Iterator<Object> columnAs = result.columnAs("n");

while(columnAs.hasNext())
      {
        Node n = (Node)columnAs.next();
           for (String key : n.getPropertyKeys()) {
                Sysout(key);
                Sysout(n.getProperty(key));
            }
      } 
```

对于执行上面的 while 循环，它需要花费大量时间，遍历 28k 个节点需要将近 10 - 12 秒。

**我不确定我是否遵循正确的方法，或者是否有其他替代方法。**

提前致谢。

# jquery - 删除 jQuery 的事件处理程序

> ID：12178932
> 
> 赞同：0
> 
> 时间：2012-08-29T13:18:54.033
> 
> 标签：jquery, events

我在下面有这段代码：

```
 jQuery.noConflict();
    var x=0;
    myw=0;
    oin="";
    jQuery(document).ready(function () {
        if(x >3){
            $("img:odd").unbind("mouseenter");
            return false;
        }        
        jQuery("img:odd").mouseenter(function(e) {
          //  oin="";
            console.log(e);
            console.log(this);
            console.log(this.src);
            oin=this.src;
            this.src="snowdrop.png";
            myw=this.width;
            this.width=100;
            x=x+1;
            console.log(x);
           jQuery(this).css("opacity", 0.5);
        }).mouseout(function(e) {
            this.width=myw;
            this.src=oin;
           jQuery(this).css("opacity", 1.0);
        });

    }); 
```

代码运行良好，但我想做的是在 3 mouseovers(mouseenter) 之后我想禁用 mouseenter 事件。不知道怎么解绑？

谢谢，吉姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:21:05.233

您应该在 mouseout 事件处理程序中移动取消绑定逻辑

```
 }).mouseout(function(e) {
        this.width=myw;
        this.src=oin;
        jQuery(this).css("opacity", 1.0);
        if(x == 3){
            $("img:odd").unbind("mouseenter");
            $("img:odd").unbind("mouseout");
        }
    }); 
```

可能最好在 mouseenter 处理程序上执行此操作以更准确

```
 jQuery("img:odd").mouseenter(function(e) {
      //  oin="";
        console.log(e);
        console.log(this);
        console.log(this.src);
        oin=this.src;
        this.src="snowdrop.png";
        myw=this.width;
        this.width=100;
        x=x+1;
        console.log(x);
        jQuery(this).css("opacity", 0.5);
        if(x == 3){
            $("img:odd").unbind("mouseenter");
            $("img:odd").unbind("mouseout");
        }
    }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:26:12.240

使用`on()`and`off()`为此，类似：

```
(function($) {
    var x=0,
        myw=0,
        oin="";

    $('img:odd').on({
        mouseenter: doStuff, //bind a function, it's easier to rebind
        mouseleave: function() {
           this.width=myw;
           this.src=oin;
           $(this).css("opacity", 1.0);
        }
    });

    function doStuff(e) {
        var elem = e.target;
        if (x>3) {
            $(elem).off('mouseenter'); //unbind the event
            return;
        }else{
            x++;
            oin=elem.src;
            elem.src="snowdrop.png";
            myw=elem.width;
            elem.width=100;
            $(elem).css("opacity", 0.5);
        }
    }
})(jQuery);​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:21:53.587

有一个问题完美地回答了这个问题：[Best way to remove an event handler in jQuery?](https://stackoverflow.com/questions/209029/best-way-to-remove-an-event-handler-in-jquery)

这是一个例子：

如果要添加单个事件然后将其删除（不删除可能已添加的任何其他事件），则可以使用事件命名空间：

```
$('#myimage').bind('click.mynamespace', function() { /* Do stuff */ }); 
```

并仅删除您的活动：

```
$('#myimage').unbind('click.mynamespace'); 
```

# cuda - '刷新记录'-并行 Nsight 分析结果中的警告

> ID：12178935
> 
> 赞同：1
> 
> 时间：2012-08-29T13:19:18.907
> 
> 标签：cuda, profiling, nsight

我正在尝试使用 NVIDIA GTX 480 板来分析我在 Windows 7 32 位机器上运行的 CUDA 内核。我正在使用 CUDA 4.1 32 位工具包和 VS 2010 的 Parallel Nsight 2.1 版本。

我的程序的分析结果总是不定期地显示相同的警告：消息：刷新记录，事件类型：范围，级别：50

在此事件之后，总是会有几毫秒的处理中断。然后 GPU 以之前的速度继续计算。

我没有在 CUDA 文档和网络上找到有关此警告的任何信息，我什至不知道这是否是仅在分析期间出现的问题。

有谁知道这个警告是关于什么以及如何避免它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:12:07.760

警告“刷新记录”用于显示 Nsight CUDA 跟踪活动何时为您的应用程序增加了额外的开销。这是为了让您能够解释高 CPU 活动的时期。无法删除此警告。您的应用程序没有做错任何事情。

Nsight CUDA Trace Activity 收集 GPU 工作开始和结束的时间戳，包括内核启动、内存副本和内存集。当应用程序在 GPU 上启动任务时，该工具会为该任务分配跟踪记录，并对 GPU 进行编程以将时间戳写入记录。时间戳的收集以一种不应该破坏并发性并且不应该使 CPU 停顿的方式完成。工作完成后，工具会收集信息并将其流式传输到内存中。刷新范围包括收集结果和写出信息的时间。这可能包括执行额外内核启动和将内存从设备复制到主机的时间。当应用程序同步上下文（cuCtxSynchronize 或 cuda{Thread, Device}Synchronize）或用完跟踪记录时，该工具将收集结果。

我将输入一个错误来改进用户文档和工具提示。

# android - 从单个复选框创建首选项而不扩展首选项活动

> ID：12178937
> 
> 赞同：1
> 
> 时间：2012-08-29T13:19:23.300
> 
> 标签：android, eclipse, adt

在我的应用程序中，我只有一个使用复选框的基本设置，我希望它像扩展偏好活动时的偏好一样持续存在，除非不这样做。我能找到的所有偏好示例，扩展偏好活动。

是否可以在主 UI 中仅使用一个基本复选框来提供首选项功能，并为其提供逻辑？简短的例子将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:27:31.977

您可以使用**[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)**自己手动保存首选项。一旦复选框被更改，您就可以保存/加载设置

```
CheckBox checkBox = ( CheckBox ) findViewById( R.id.checkbox );
checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener()
{
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
    {
        if ( isChecked )
        {
            // get the preference manager
            SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);

            // get the editor
            SharedPreferences.Editor editor = prefs.edit();

            // put the new setting
            editor.putBoolean(PREF_NAME, true);

            // IMPORTANT - save the new settings
            editor.commit();

         }  
      }
    }
}); 
```

然后，您可以在任何您喜欢使用的地方检索您的设置

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getContext());
if (prefs.getBoolean(PREF_NAME, false)) {
   // setting dependent code goes here
} 
```

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:31:30.963

您可以在任何活动中访问共享首选项...

```
SharedPreferences preferences = getSharedPreferences( NameAsString, Context.MODE_PRIVATE );
SharedPreferences.Editor editor = preferences.edit();
editor.putBoolean( keyAsString, value );
editor.apply(); 
```

请注意， editor.apply() 是异步的，仅在 GB 及以上版本中可用，对于低于 android 2.3 的版本使用 editor.commit()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:31:32.443

```
CheckBox checkBox = (CheckBox) findViewById(R.id.checkbox1);
checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
        SharedPreferences.Editor editor = prefs.edit();
        editor.putBoolean("checkbox_key", isChecked);
        editor.commit();
    }
}); 
```

# php - 需要类似解决方案的单一入口点

> ID：12178941
> 
> 赞同：0
> 
> 时间：2012-08-29T13:19:30.607
> 
> 标签：php, model-view-controller, .htaccess

我在现成的框架（遗留框架）上工作。它几乎就像你在市场上获得的任何其他 MVC 框架一样，除了它没有单一的入口点。
所以在每个控制器文件中我必须包含配置和模型类。
目前我使用 __autoload() 进行管理，但每个页面上仍然保留一个包含。
如果我为单个入口点添加 .htaccess，那么我必须对我的代码进行大量更改。因为每个控制器文件都是不同的物理文件。它甚至不接近面向对象的结构，并且使用了 smarty 视图。
是否有任何解决方案，包括 .htaccess 规则，而不是 php.ini？它会更容易维护。请为我的困难提出最佳解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:23:46.250

我能给你的最好建议是使用[自动前置文件](http://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file)。在任何脚本运行之前，都会预先添加一段代码。

在 Apache 中，您可以使用`php_value auto_prepend_file xxx.php`指令设置每个目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:25:43.570

您可以将所有流量路由到一个 PHP 脚本，通常是 index.php，如下所示：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php [L] 
```

然后 index.php 将处理所有必要的库文件并处理控制器的路由。

# javascript - 使用 jQuery 在链接上调用内联 JavaScript

> ID：12178943
> 
> 赞同：0
> 
> 时间：2012-08-29T13:19:30.740
> 
> 标签：javascript, jquery

我正在修改一个具有内联 JavaScript 的古老表格，其形式为`<a href="javascript:<lots of shit>">`. 内联 JavaScript 可以工作，但需要几个月的时间来重写它以使其适合我的任务，即当单击外部元素时，应该执行内联 JavaScript。

如果我没有任何意义，我很抱歉，但我已经像提供[小提琴](http://jsfiddle.net/s8cQb/)一样周到了。（表格方面应该无关紧要。） TL;DR：当我单击其中一个彩色时`div`，我希望它的内部`alert()`执行，我该怎么做？

**编辑。**此外，链接实际上是隐藏的！

**编辑#2。**而且，就目前而言，任何 HTML 都不应该被篡改。只有 jQuery/JavaScript。

**编辑#3。**我已经更新了脚本以使用我的表。内部`<span>`现在不需要了，我可以`<a>`直接选择。现在我只想知道我`stopPropagation()`是否正确使用？

代码：

```
$(function () {
    $('table.result-v2 tr.view').bind('click', function () {
        var $this = $(this),
            $next = $this.next();

        if ($next.attr('class') == 'detail') {
            var $buttons = $this.find('td.buttons'),
                $link = null;

            if ($next.css('display') == 'none') {
                $link = $buttons.find('a.show-link');
            } else {
                $link = $buttons.find('a.hide-link');
            }

            if ($link != null) {
                eval($link.attr('href')); // evaluate found link
                $link.bind('click', function (event) {
                    event.stopPropagation(); // is this needed when the link never can be clicked (it's hidden)?
                });
            }
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:24:09.437

这是使您的代码正常工作的快速技巧。**只是要注意，这完全不是应该这样做的！**

[http://jsfiddle.net/2QaUX/1/](http://jsfiddle.net/2QaUX/1/)

不要触发点击，而是评估 href 属性内的内联脚本：

老的：

```
$(function () {
    $('.foo').bind('click', function () {
        $(this).find('.bar').parent().trigger('click');
    });
});​ 
```

新的：

```
$(function () {
    $('.foo').bind('click', function () {
        eval($(this).find('.bar').parent().attr('href'));
    });
    $('.bar').parent().bind('click', function (event) {
        event.stopPropagation(); 
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:23:45.817

只需将那个js放在一个函数中

```
function clikEvent(ele)
{
 //<lots of shit>
} 
```

并在 onclick 上调用它并用 void 替换 href js

```
<a  href="javascript:void(0)" onClick='clikEvent(this)'> 
```

你还必须处理传递的数据我已经放置了参数 ele 它将指向 href 所以如果你想使用 jQuery，你可以检索 id 或任何其他东西

```
$('#idofAtag').click(function(){//<lots of shit>}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T13:34:23.113

这里有两个问题。一是事件传播。当你点击 div 时，你触发了对链接的点击，这也是对 div 的点击。这会创建一个无限循环，该循环将很快超过最大调用堆栈大小。为了解决这个问题，你需要做两件事：

1.  `window.location.href`仅当用户单击其中`div`而不是其中时才执行分配`a`。
2.  如果用户确实单击了`a`，请防止事件冒泡到`div`

第二个问题是链接上的“点击”事件不会执行存储在`href`属性中的 javascript。你要做的是设置`window.location.href`。

```
$('.foo').on('click', function (e) {
    var link =  $(this).find('.bar').parent('a');
    if(e.target != link.get(0)) {
        window.location.href = link.attr('href');
    }
});
$('.foo').on('click', 'a', function(e) {
    e.stopPropagation();
}); 
```

这是一个演示

[**--- jsFiddle 演示 ---**](http://jsfiddle.net/VKhaG/1/)

**- 注意 - 我强烈建议寻找另一种方法来处理这种情况，但如果您无法更改现有链接，则此选项是可行的。**

# mysql - 高效查询一对多关系

> ID：12178954
> 
> 赞同：0
> 
> 时间：2012-08-29T13:20:26.287
> 
> 标签：mysql, sql, database

我有一个存储有关游戏世界的信息的数据库。具体来说，我有一个表格来存储所有不同的地图，还有一个表格来存储每个地图中的建筑物。一张地图可以有 0-n 个建筑物，我将信息存储如下：

**地图**（map_id（PK），map_name）

**建筑物**（building_id (PK)、building_name、map_id (FK)）

我的问题是如何有效地查询数据库以获取地图及其所有建筑物的名称。例如，我想获得 10 张地图及其建筑物。

`SELECT * FROM maps JOIN buildings USING (map_id) limit 10`

上面的查询可以返回 10 行或 100 行，但是由于每个答案都重复了 map_name，因此在结果表中存在如此多的重复似乎相当浪费。

或者，我可以先获取 map_ids，然后对每个地图执行单独的查询。例如。：

`SELECT map_id from maps limit 10`

foreach 地图+id：`SELECT * FROM buildings WHERE map_id = x`

但是，这似乎又是浪费，因为我正在执行 11 个单独的 SQL 查询？

综上所述，第一种方法似乎内存/带宽效率低下，第二种方法似乎 CPU 效率低下。我是对的吗？有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:26:10.237

我想你正在寻找这个：

```
SELECT * 
FROM buildings 
WHERE map_id IN (SELECT map_id from maps limit 10) 
```

**编辑：**试试这个：

```
SELECT b.*, (SELECT map_name FROM maps m WHERE m.map_id = p.map_id) 'Map Name'
FROM buildings b
WHERE map_id NOT IN (SELECT map_id from maps limit 10) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:32:34.410

我不会担心您的第一个查询中的内存/带宽效率低下，这就是关系数据库的设计目的。您的表已正确规范化，因此您将需要使用连接从两个表中提取数据。地图名称和 ID 在每一行上重复的事实是微不足道的，直到您开始拥有数以万计的地图，即使那样，这可能也没什么大不了的。

现在，如果您要在 GUI 中显示此信息以便用户可以查看它，您可能需要使用两个单独的查询 - 一个获取地图列表，然后一个单独的查询获取用户后的建筑物列表已选择地图。如果您让我们知道您到底想做什么，我们可能会提供更好的建议。

# java - 如何在java中找到DNS，它提供A、NAPTR和其他记录以及TTL和端口（新手）

> ID：12178955
> 
> 赞同：2
> 
> 时间：2012-08-29T13:20:28.737
> 
> 标签：java, dns, port, ttl

我不想使用 dnsjava 或其他第三方库。有什么方法可以找到 A 或 NAPTR 或任何其他记录的 TTL 和端口值？可能正在使用 java.net 包？使用 getallbyName，我可以获得 IP 地址，但如果我还想要 TTL 和端口怎么办。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:28:04.333

**1.**尝试`Ping`使用`Runtime().getRuntime().exec()`，然后从中提取`TTL`（生存时间）值..

**2.**它**工作**，`Windows`我**不知道**如何使用它`Linux`。

# charts - JfreeChart：显示日期的堆积条形图和 CategoryAxis

> ID：12178960
> 
> 赞同：1
> 
> 时间：2012-08-29T13:20:55.210
> 
> 标签：charts, jfreechart, bar-chart

我创建了一个堆积条形图，其中在*y轴上显示计数，在**x*轴上显示日期。问题是当我在*x*轴上有很多日期时，它会变得非常混乱且无法阅读。我想只显示一些日期，例如每周一个日期。那可能吗？我正在使用`ChartFactory.createStackedBarChart()`创建图表，并且我将数据保存在`DefaultCategoryDataSet`.

任何输入表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T18:45:14.697

对于在 a[`CategoryAxis`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/axis/CategoryAxis.html#setCategoryLabelPositions%28org.jfree.chart.axis.CategoryLabelPositions%29)中用于域轴的 a `StackedBarChart`，您可以使用该方法具有相当大的灵活性[`setCategoryLabelPositions()`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/axis/CategoryAxis.html#setCategoryLabelPositions%28org.jfree.chart.axis.CategoryLabelPositions%29)。[`BarChartDemo1`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/demo/BarChartDemo1.html)源代码中说明了典型用法，[此处](http://sourceforge.net/p/jfreechart/code/3111/tree/branches/jfreechart-1.0.x-branch/source/org/jfree/chart/demo/BarChartDemo1.java)显示。

```
CategoryAxis domainAxis = plot.getDomainAxis();
domainAxis.setCategoryLabelPositions(
    CategoryLabelPositions.createUpRotationLabelPositions(Math.PI / 6.0)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:45:43.697

您是否尝试过覆盖标签生成器中的 generateLabel 方法？就像是：

```
chart.getCategoryPlot().getRenderer().setBaseItemLabelGenerator(
  new CategoryItemLabelGenerator() {

    public String generateColumnLabel(CategoryDataset dataset, Integer column) {
      if(column % 7 == 0)
        super.generateColumnLabel(dataset, column)
      else 
        ""
    }
  }
); 
```

我没有测试过代码，但它应该只每 7 列输出一个标签。关于标签生成器的更多信息在这里：[http ://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/labels/CategoryItemLabelGenerator.html](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/labels/CategoryItemLabelGenerator.html)

# c++ - 如果/什么时候释放的堆内存被回收？

> ID：12178961
> 
> 赞同：6
> 
> 时间：2012-08-29T13:20:55.507
> 
> 标签：c++, linux, memory-management, memory-leaks, heap-memory

我一直在嵌入式 Linux 系统上运行通宵内存测试。使用 vmstat 我观察到可用内存随着时间的推移稳步减少。根据**procfs中的一些****smaps**分析，一个进程的堆以大致相同的速度增长。我怀疑是内存泄漏，并在代码中发现了一些经常使用的地方。但是，我没有看到没有匹配呼叫的呼叫。**`new``delete``new``delete`**

 **我再次运行内存测试，今天早上通过以下调用清除了内存缓存

```
echo 3 > /proc/sys/vm/drop_caches 
```

vmstat 中列出的可用内存下降到接近测试开始时的值。

内核是否定期回收未使用的堆页面？如果是这样，除了上述之外，还有其他时间这样做吗？可能当空闲内存低于某个阈值时？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T14:04:42.480

正如其他人所说，将内存返回给内核是进程的职责。

通常有两种分配内存的方法：如果您`malloc()`/`new`内存块超过一定大小，则内存会从操作系统通过分配，`mmap()`并在空闲时立即返回。`sbrk`通过向上移动边界来增加进程的数据区域来分配较小的块。只有在该段末尾有超过一定大小的块空闲时，才会释放此内存。

eg：（伪代码，我不太懂C++）

```
a = new char[1000];
b = new char[1000]; 
```

内存映射：

```
---------------+---+---+
end of program | a | b |
---------------+---+---+ 
```

如果你现在自由`a`了，你中间有一个洞。它没有被释放，因为它不能被释放。如果你 free `b`，进程的内存可能会也可能不会减少；未使用的剩余部分返回系统。

一个简单的程序测试

```
#include <stdlib.h>

int main()
{
    char * a = malloc(100000);
    char * b = malloc(100000);
    char * c = malloc(100000);
    free(c);
    free(b);
    free(a);
} 
```

导致`strace`输出像

```
brk(0)                                  = 0x804b000
brk(0x8084000)                          = 0x8084000
brk(0x80b5000)                          = 0x80b5000
brk(0x809c000)                          = 0x809c000
brk(0x8084000)                          = 0x8084000
brk(0x806c000)                          = 0x806c000 
```

is 显示该`brk`值首先增加（对于`malloc()`），然后再次减少（对于`free()`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:31:14.803

内核将在需要时回收缓存的内存页面，即当系统内存不足时。进程堆（自由存储）中的内存页面是否返回给操作系统取决于进程的内存管理器，在这种情况下是 C++ 库中的`new`/`delete`实现。这是一个完全自愿的操作，与内核无关。

从成功的事实来看`drop_caches`，您可以推断是内核缓存而不是进程的堆正在填满内存。使用`free`命令找出实际有多少内存可供应用程序使用，尤其是。`-/+ buffers/cache`它报告的行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T13:55:57.033

调用`delete`程序会导致内存返回到作为程序运行时一部分的内存管理器。原则上，这可以写成将释放的内存返回给操作系统，但如果这样做我会感到惊讶。而是保留回收的内存以供后续调用`new`.

请注意，这是您的进程的虚拟内存；在程序执行期间的任何时候，有多少实际驻留在物理内存中取决于整个系统负载并由操作系统处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T14:45:14.317

据我所知，用户对 malloc 和 free（或 new 和 delete）的调用永远不会将不再使用的页面返回给 O/S。相反，它们只记住已释放的内存，因此如果您执行的 malloc/new 的大小可以由先前释放的内存满足，那么它将使用该内存，而不是转到 O/S 并使用 sbrk 来获取更多的记忆。

因此这段代码：

```
for (;;)
{
    struct { char data[200 * 1024 * 1024] } HugeBuffer;
    HugeBuffer *buff = new HugeBuffer;
    delete buff;
} 
```

将分配 200Mb 一次，然后永远稳定地使用该内存。它会在原始分配上转到 O/S 一次，然后在用户空间中循环摆弄。**

# html - jQuery Mobile 日期框 & Knockout.js

> ID：12178962
> 
> 赞同：2
> 
> 时间：2012-08-29T13:21:03.590
> 
> 标签：html, jquery-mobile, knockout.js, datebox

有没有人成功地将[jQuery Mobile DateBox](http://dev.jtsage.com/jQM-DateBox/)与 Knockout.js 一起使用？

在选择日期之前提供要显示的值时，我无法使绑定正常工作。它保持空白。如果我使用标准文本输入，则绑定工作正常。

```
<input id="start" type="date" data-bind="value: start" data-role="datebox" data-options='{"mode": "timeflipbox", "useButton": false, "useFocus": true, "dialogForce" : true, "transition" : "slidedown"}'>

//In the view model:
this.start = ko.observable(startTime); 
```

我试过了

```
$('#start').datebox('refresh') 
```

但没有运气......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T09:11:12.350

我最终为淘汰赛编写了一个自定义绑定，这似乎可以解决问题：

```
 ko.bindingHandlers.jqmDateBox = {
    update: function (element, valueAccessor, allBindingsAccessor, context) {
        setTimeout(function () { 
            var value = valueAccessor();
            var valueUnwrapped = ko.utils.unwrapObservable(value);
            $(element).val(valueUnwrapped);
            $(element).data('datebox').options.defaultPickerValue = valueUnwrapped;
        }, 0);
    }
} 
```

用法：

```
<input id="end" name="end" type="date" data-bind="value: end, jqmDateBox: end" data-role="datebox" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T08:01:41.270

大卫提供的装订对我不起作用。我正在使用最新的不稳定版本的 Datebox。

我已经编写了这个绑定，它在 calbox 模式下对我有用：

```
ko.bindingHandlers['dateboxvalue'] = {
  'init': function(element, valueAccessor, allBindingsAccessor, viewModel) {

     ko.utils.registerEventHandler(element, "change", function () {
       var value = valueAccessor();
       value($(element).datebox('getTheDate'));
  });
},
  'update': function (element, valueAccessor, allBindingsAccessor, context) {

    $(element).datebox();
    $(element).datebox('setTheDate', ko.utils.unwrapObservable(valueAccessor()));
    $(element).trigger('datebox', {'method':'doset'});
  }
}; 
```

像这样使用

```
<label for="mode1">CalBox</label>
<input name="mode1" id="mode1" type="text"
       data-role="datebox"
       data-options='{"mode":"calbox", "useNewStyle":true}'
       data-bind="dateboxvalue: myDate"/> 
```

# python - Plone / Python：Ubuntu 上 Plone 的 zc.async 问题

> ID：12178965
> 
> 赞同：1
> 
> 时间：2012-08-29T13:21:06.350
> 
> 标签：python, plone

我在我的克隆网站上集成了collective.documenviewer。这用于在线查看 PDF 和其他办公文件。

可选的附加产品之一是 plone.app.async，它又使用 zc.async。现在，安装顺利，没有错误。但是当我保存文件时，会产生一个我无法弄清楚的错误：以下是错误：

```
2012-08-29T12:52:03 ERROR collective.documentviewer Error using plone.app.async with collective.documentviewer. Converting pdf without plone.app.async...
Traceback (most recent call last):
File "/home/frank/apps/myplonesite/plone/eggs/collective.documentviewer-2.2a1-py2.7.egg/collective/documentviewer/async.py", line 143, in queueJob
runner = JobRunner(object)
File "/home/frank/apps/myplonesite/plone/eggs/collective.documentviewer-2.2a1-py2.7.egg/collective/documentviewer/async.py", line 50, in __init__
self.queue = self.async.getQueues()['']
File "/home/frank/apps/myplonesite/plone/eggs/plone.app.async-1.2-py2.7.egg/plone/app/async/service.py", line 100, in getQueues
return self._conn.root()[KEY]
File "/home/frank/apps/myplonesite/plone/../../python27/lib/python2.7/UserDict.py", line 23, in __getitem__
raise KeyError(key)
KeyError: 'zc.async' 
```

这些是我正在使用的版本：

```
plone.app.async = 1.2
zc.async = 1.5.4 
```

我该如何解决这个`KeyError`问题？

**更新**：下面是我的扩建

```
[buildout]
newest = false
allow-picked-versions = false 
index = http://dist.candid.org/candid
extends =
    versions.cfg      

parts =
    lxml
    svneggs
    svnproducts
    zeo
    instance
    worker
    paster
    plonesite        

versions = versions

find-links =
    http://dist.candid.org/candid

develop =
      ../src/candid.main
      ../src/ploned.ui
      ../src/z3c.traverser
      ../src/repoze.whooze
      ../src/marginalia
      ../src/ore.alchemist
      ../src/alchemist.ui
      ../src/alchemist.catalyst
      ../src/alchemist.traversal
      ../src/alchemist.security
      ../src/portal.auth

eggs =
    Plone
    Products.PloneHelpCenter
    Products.LinguaPlone
    candid
    alchemist.ui
    alchemist.catalyst
    alchemist.traversal
    alchemist.security
    ploned.ui
    candidcms.plonepas
    candidcms.policy 
    candidcms.theme
    psycopg2
    Products.Scrawl
    collective.contacts
    collective.tabr
    candidcms.workspaces
    lotr.repository
    archetypes.multifile
    Products.ATVocabularyManager
    collective.dynatree
    collective.portlet.explore
    z3c.json
    collective.js.jqueryui            
    python-cjson
    collective.plonetruegallery 
    lotr.templates
    portal.auth
    Products.PloneFormGen
    quintagroup.pfg.captcha
    collective.documentviewer
    five.intid
    plone.app.async

zcml = 
    candidcms.plonepas
    candidcms.policy
    candidcms.theme
    candid.portal
    candidcms.workspaces
    archetypes.multifile
    lotr.templates
    collective.contacts
    collective.tabr
    collective.portlet.explore    

[instance]
recipe = plone.recipe.zope2instance
user = uadmin:uadmin
eggs =
    ${buildout:eggs}
    Products.CMFPlone 
    Paste
    PasteScript
    PasteDeploy
    repoze.tm2
    repoze.retry
    repoze.who

zcml =
    ${buildout:zcml} 

zcml-additional =
    <include package="plone.app.async" file="single_db_instance.zcml" />
environment-vars =
    ZC_ASYNC_UUID ${buildout:directory}/var/instance-uuid.txt

products = 
    ${svnproducts:location}

# !+XAPIAN PATH(mn, apr-2012) hardcoded path to candid xapian installation
# temporary fix because plone uses the 'candid.portal' package which is in the
# candid.main package. Once the candid.portal package is factored out this entry
# should be removed.
extra-paths = 
  ../parts/xapian/lib/python

[lxml]
recipe = z3c.recipe.staticlxml
egg = lxml
force = false
build-libxslt = true
build-libxml2 = true
libxslt-url = http://candid-portal.googlecode.com/files/libxslt-1.1.24.tar.gz
libxml2-url = http://candid-portal.googlecode.com/files/libxml2-2.6.32.tar.gz

[svnproducts]
recipe = infrae.subversion
urls =
    http://candid-portal.googlecode.com/svn/plone.products/CandidHelpCenter/branches/plone4 CandidHelpCenter

[svneggs]
recipe = infrae.subversion
as_eggs = true
urls =
    http://candid-portal.googlecode.com/svn/plone.products/candidcms.plonepas/trunk/ candidcms.plonepas
    http://candid-portal.googlecode.com/svn/plone.products/candidcms.policy/trunk/  candidcms.policy
    http://candid-portal.googlecode.com/svn/plone.products/candidcms.theme/trunk/ candidcms.theme
    http://candid-portal.googlecode.com/svn/plone.products/candidcms.workspaces/trunk/ candidcms.workspaces  
    http://lotr.googlecode.com/svn/lab/apps/lotr.repository/ lotr.repository
    http://lotr.googlecode.com/svn/trunk/products/lotr.templates/ lotr.templates    

[paster]
recipe = zc.recipe.egg
eggs = ${instance:eggs}
# !+XAPIAN PATH(mn, apr-2012) hardcoded path to candid xapian installation
extra-paths =
  ../parts/xapian/lib/python
scripts = paster

[zeo]
recipe = plone.recipe.zeoserver
file-storage = ${buildout:directory}/var/filestorage/Data.fs
blob-storage = ${buildout:directory}/var/blobstorage
eggs = ${instance:eggs}

[worker]
recipe = plone.recipe.zope2instance
user = ${instance:user}
eggs = ${instance:eggs}
zcml = ${instance:zcml}
zserver-threads = 2
debug-mode = on
verbose-security = on
zeo-client = true
blob-storage = ${zeo:blob-storage}
shared-blob = on
eggs = ${instance:eggs}
zcml-additional =
    <include package="plone.app.async" file="single_db_worker.zcml" />
environment-vars =
    ZC_ASYNC_UUID ${buildout:directory}/var/worker-uuid.txt

[plonesite]
recipe = collective.recipe.plonesite
site-id = plone
admin-user = uadmin
instance = instance
profiles-initial = 
    Products.CMFPlone:dependencies
    Products.CMFPlone:plone-content
    lotr.repository:default
    candidcms.policy:default
    candidcms.theme:default
    collective.dynatree:default
    candidcms.workspaces:default
    lotr.templates:default
    Products.FacultyStaffDirectory:default
    Products.PlonePopoll:default
    Products.PloneFormGen:default
    quintagroup.pfg.captcha:default
    collective.documentviewer:default
products-initial =
    Products.CMFPlone
    archetypes.multifile
    candidHelpCenter
    LinguaPlone
    collective.plonetruegallery
    collective.tabr
    Products.PloneFormGen
    quintagroup.pfg.captcha 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:59:00.950

如果 plone.app.async 的队列尚未设置，则会发生这种情况。plone.app.async 和 zc.async （过度）复杂，实际上*确实*需要您阅读自述文件；）

您应该在他们的[pypi](http://pypi.python.org/pypi/plone.app.async)页面上查看 plone.app.async 提供的说明，特别是构建配置。除非您包含必要的 zcml（对于您的“正常”以及您的“工作”实例），否则您的队列将不会被设置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-30T04:35:55.070

这看起来像是collective.documentviewer 的问题。我是作者，实际上我认为我在某个时候解决了这个问题。你运行的是什么版本？

# php - 从 JSON.parse 中获取元素

> ID：12178974
> 
> 赞同：0
> 
> 时间：2012-08-29T13:21:34.083
> 
> 标签：php, javascript, arrays, json

我的 javascript 中有一个 JSON 字符串，我想访问这些值。

```
16
    Object { 3488={...}}

3488
    Object { article_no_internal=

"999184"

, article_name_internal=

"Geschenkbox Kerzenschein 2011"

}

article_name_internal

"Geschenkbox Kerzenschein 2011"

article_no_internal

"999184" 
```

这是一个图像，因为代码看起来有点连线......[解析的json](http://img23.imageshack.us/img23/197/asdmh.png)

我尝试过这样的事情：`obj.16.3488.article_name_internal[]`但似乎不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T13:26:16.623

尝试：

```
obj[16][3488]["article_name_internal"];
// or
obj[16][3488].article_name_internal; 
```

# php - 用php在网页中显示xml数据

> ID：12178975
> 
> 赞同：0
> 
> 时间：2012-08-29T13:21:34.617
> 
> 标签：php, xml, parsing

我正在尝试显示我从外部来源获得的 xml 解析页面的数据。我通过了一些这样的参数： -

[http://www.somewebsite.com/phpfile.php?vendor_key=xxx&checkin=2012-11-02&checkout=2012-11-05&city_id=5&guests=3](http://www.somewebsite.com/phpfile.php?vendor_key=xxx&checkin=2012-11-02&checkout=2012-11-05&city_id=5&guests=3)

当我传递这个参数时，我得到了一个 xml 结果。现在我想在我的网页上以设计器的方式显示该 xml 数据。那我该怎么做。我是 xml 的新手，所以不知道这项技术叫什么，如果有人能告诉我这叫什么，那么这也可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:28:22.710

看看[simplexml_load_string](http://www.php.net/manual/en/function.simplexml-load-string.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:28:42.113

您可以使用[curl](http://www.php.net/manual/en/ref.curl.php)或[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)函数发出 HTTP 请求。然后，您可以使用`DOM`或`SimpleXML`解析请求 URL 的响应 (XML)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:33:03.177

如果你已经有 XML 然后试试

```
echo $xml->asXML(); 
```

一个完整的例子

```
<?php 
 $curl = curl_init();        
 curl_setopt ($curl, CURLOPT_URL, 'http://rss.news.yahoo.com/rss/topstories');   
 curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);   
 $result = curl_exec ($curl);   

 if ($result === false) {
      die('Error fetching data: ' . curl_error($curl));   
 }
   curl_close ($curl);    

//we can at this point echo the XML if you want
 //echo $result;

 //parse xml string into SimpleXML objects
  $xml = simplexml_load_string($result);

   if ($xml === false) {
      die('Error parsing XML');   
   }

   //now we can loop through the xml structure
   foreach ($xml->channel->item as $item) {
       print $item->title;   
   } 
```

# c# - 实体框架上的剃刀类验证

> ID：12178982
> 
> 赞同：2
> 
> 时间：2012-08-29T13:21:50.220
> 
> 标签：c#, asp.net-mvc, entity-framework, razor

关于最佳实践的快速问题。

我有一个项目 MVC3 + razor 在我的课堂上，在我的每个属性上，我都有一些类似的验证：

```
 [StringLength(20)]
    [RegularExpression(@"^[1-9][0-9]*$",ErrorMessage="Only Numbers Allowed") ]
    [Required(AllowEmptyStrings = false, ErrorMessage = "Please Inform The Code")]
    [Display(Name = "Code")]
    public string gCode { get; set; } 
```

这是在我的模型上的，比如说，客户类。验证在 UI 上完美运行。

在第二个项目中，当首先使用 Entity Framework - 数据库时，我有我的 edmx 文件和我的实体，我使用 ObjectContext 查询数据库，这意味着 Customer 类是由 EF 构建的。

我现在应该在哪里添加这些验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:35:17.410

模型首先有这个问题 - 但它可以使用元数据来解决。假设您有一个名为的生成实体`Field`，并且您想用`[Required]`属性装饰 Value 字段，只需执行以下操作：

```
namespace Model.Entities {

    [MetadataType(typeof(FieldMetadata))]
    public partial class Field : EntityBase {

    }

    class FieldMetadata {
        [Required]
        public object Value;
    }
} 
```

在这里，您将元数据添加到无法修改的现有类成员的 Value 成员中。

编辑：如果它不起作用，请同时调用 TypeDescriptor。

```
TypeDescriptor.AddProvider(new AssociatedMetadataTypeTypeDescriptionProvider(typeof(Field), typeof(FieldMetadata)), typeof(Field)); 
```

# c# - 在“拒绝访问”的情况下确定文件的 FileAttribute：

> ID：12178985
> 
> 赞同：1
> 
> 时间：2012-08-29T13:22:04.957
> 
> 标签：c#, wpf, visual-studio-2010, file, access-denied

在我的网络中，有一些文件的访问被简单地阻止了。

用户无法打开或读取文件。

当我尝试打开文件时，我得到的唯一消息是“拒绝访问”。

```
 bool isReadOnly = ((File.GetAttributes(Path) & FileAttributes.ReadOnly) ==   FileAttributes.ReadOnly); 
```

我尝试了 FileAttributes 类下可用的其他选项。“拒绝访问”没有任何匹配项。

简而言之，我如何知道在 c# 中文件是否被拒绝访问。我正在使用 WPF 和 Visual Studio .net 2010

每当我尝试通过代码访问它时，我都会得到一个异常。当我尝试手动打开它时，我得到类似“拒绝访问”的信息。

```
try
{
 IEs = from file in Directory.EnumerateFiles(sDirectoryToBeSearched, sValidExtensions, SearchOption.AllDirectories)
                      from str in File.ReadLines(file)
                      where (str.IndexOf(sSearchItem, StringComparison.OrdinalIgnoreCase) >= 0)
                      select file;
}

  catch
 {
      MessageBox ("Exception arised");
 } 
```

即使使用了 try catch，也不会因为 LINQ 查询而处理异常。任何解决方案？>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:39:01.787

尝试使用递归而不是使用 LINQ，这样如果文件或文件夹访问被拒绝，其余过程将继续。下例。

```
private void SearchDirectory(string folder)
{
    foreach (string file in Directory.GetFiles(folder))
    {
        try 
        {
            // do work;
        }
        catch 
        {
            // access to the file has been denied
        }
    }
    foreach (string subDir in Directory.GetDirectories(folder))
    {
        try 
        {   
             SearchDirectory(subDir);
        }
        catch 
        {
            // access to the folder has been denied
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:25:13.443

您不必检查`FileAttributes`，您需要检查安全列表。

您可以查看[此处](http://msdn.microsoft.com/en-us/library/system.security.accesscontrol.filesecurity.aspx)的示例以了解如何使用`FileSecurity`该类。

# ftp - java ftp 在打开文件列表的二进制模式数据连接时冻结

> ID：12178986
> 
> 赞同：2
> 
> 时间：2012-08-29T13:22:07.520
> 
> 标签：ftp

我编写了一个 java 类来从 ftp 位置检索文件，然后将其保存到 Windows 服务器。它只是在创建数据连接时挂起：

它冻结在这一行：

INFO: 150 为文件列表打开 BINARY 模式数据连接

知道是什么原因造成的吗？我已经为同一个 ftp 运行了一个批处理作业，它使用 ASCII 模式数据连接复制文件，它工作正常。

请帮忙！

# android - 获取 Android 中所有 Windows 的列表

> ID：12178992
> 
> 赞同：11
> 
> 时间：2012-08-29T13:22:27.240
> 
> 标签：android

是否可以*在我的 Android 应用程序中**获取所有**Windows***的列表？

如果没有，是否可以*在创建新**View**或**Window***时收到通知？

干杯:)

例如：我想知道屏幕上是否有可见的键盘视图，或者屏幕上是否有警告对话框。那可能吗？我可以获得持有它的 View 或 Window 实例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:12:58.493

是的，这可以通过多种不同的方式实现。屏幕上显示的所有视图都添加到一个 ViewGroup 中，通常是 R.layout.main、LinearLayout、RelativeLayout 等布局。

在构建布局后，您可以在运行时访问视图，使用诸如 onWindowFocusChanged 之类的处理程序：

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    int count = myLayout.getChildCount();
    for(int i = 0; i < count; i++)
    {
    View v = myLayout.getChildAt(i);
    ...
    }
} 
```

您可以简单地在 onWindowFocusChanged 中设置一个线程，它会通过不断检查当前布局的子视图数量来通知您是否创建了键盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:43:38.937

嘿使用此代码，这将帮助您查找是否在您的活动中创建了任何对话框

```
class MyActivity extends Activity {

@Override
    public void onAttachedToWindow() {

        super.onAttachedToWindow();

        Log.d("TAG", "New Window ATTACHED");
    }

} 
```

每次用户创建新对话框或其他东西时都会调用 onAttachedToWindow

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T12:17:56.637

您只能获取由您的应用程序管理的视图。

***这包括除了***状态和导航栏（高于 HoneyComb）之外的所有视图。如果您选择拥有自己的 InputMethod，则该视图也可以是您的，但您需要注册正确的键盘视图。有关更多信息，请参阅[此](https://stackoverflow.com/questions/3480715/how-to-develop-a-soft-keyboard-for-android)问题。

否则，如果您想获取窗口中的所有视图：

```
ViewGroup decor = (ViewGroup)activity.getWindow().getDecorView();
int count = decor.getChildCount();
for(int i = 0; i < count; i++) {
    View view = decor.getChildAt(i); //voila
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T12:10:03.897

对于键盘问题，您可以在布局中使用自己的键盘视图实例和 KeyboardView：http: [//developer.android.com/reference/android/inputmethodservice/KeyboardView.html](http://developer.android.com/reference/android/inputmethodservice/KeyboardView.html)

对您要处理的其他视图使用相同的原则：在布局中自己管理它们。我不知道你是否可以在你计划做的软件中，但这是一种可行的方式。

# spring - Spring Security - 将“requires-channel”的值外部化

> ID：12178993
> 
> 赞同：4
> 
> 时间：2012-08-29T13:22:28.090
> 
> 标签：spring, spring-security

我需要在我的 Spring Security 文件中同时支持 HTTP 和 HTTPS，并在运行时在它们之间动态切换。

因此，我正在尝试创建包含任何/http/https 之一的属性文件，但这不会解析 XML 配置。

**弹簧安全配置：**

```
<sec:http entry-point-ref="portalEntryPoint">
    <sec:anonymous />
    <sec:intercept-url pattern = "/portal" access="IS_AUTHENTICATED_ANONYMOUSLY"
            requires-channel="${user-security.login.channel}" />
    <!-- rest omitted -->
</sec:http> 
```

**属性文件：**

```
user-security.login.channel=https 
```

我收到以下错误：

```
Caused by: org.xml.sax.SAXParseException: cvc-enumeration-valid: Value '${user-security.login.channel}' is not facet-valid with respect to enumeration '[http, https, any]'. It must be a value from the enumeration. 
```

我正在使用 Spring 3 和 Spring Security 2。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:51:43.837

这在 Spring Security 2 中是不可能的，您必须使用 Spring Security 3.0+

在Spring Security 3.0 发布之前修复[了一个关于此支持的问题。](https://jira.springsource.org/browse/SEC-1201)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:43:38.547

如果您绝对必须使用配置文件来配置您的门户入口点。显然，这意味着在您的 spring 配置中进行大量复制和粘贴......

springsource 文档中的示例：

```
<bean id="transferService" class="com.bank.service.internal.DefaultTransferService">
    <constructor-arg ref="accountRepository"/>
    <constructor-arg ref="feePolicy"/>
</bean>

<bean id="accountRepository" class="com.bank.repository.internal.JdbcAccountRepository">
    <constructor-arg ref="dataSource"/>
</bean>

<bean id="feePolicy" class="com.bank.service.internal.ZeroFeePolicy"/>

<beans profile="dev">
    <jdbc:embedded-database id="dataSource">
        <jdbc:script location="classpath:com/bank/config/sql/schema.sql"/>
        <jdbc:script location="classpath:com/bank/config/sql/test-data.sql"/>
    </jdbc:embedded-database>
</beans>

<beans profile="production">
    <jee:jndi-lookup id="dataSource" jndi-name="java:comp/env/jdbc/datasource"/>
</beans> 
```

链接[http://blog.springsource.com/2011/02/14/spring-3-1-m1-introducing-profile/](http://blog.springsource.com/2011/02/14/spring-3-1-m1-introducing-profile/)

# linux - 将来自 nslookup 的结果放入列中

> ID：12178997
> 
> 赞同：-1
> 
> 时间：2012-08-29T13:22:54.110
> 
> 标签：linux, nslookup

我在测试文件中有一个主机列表。我正在尝试将输出组织成 3 列。我想对主机名和 ilo-hostname 进行 nslookup 并将结果放入如下列中。

```
Hostname    IP-hostname ilo-hosntame
Host-1           FQN        FQN 
Host-2           FQN           ** server can't find Host-2: SERVFAIL 
```

编辑：我现在有一个看起来像这样的文件

Hostname
IloHostname
Hotname
IloHostname
Hostname** server can't find IloHostname: SERVFAIL //当 Ilohostname 未找到或不存在时

用于创建此文件的脚本

```
egrep 'Name:|SERVFAIL' list3 | awk '{sub(/Name:/,"")}; 1' | awk '{$1=$1}1' | awk -F. '{print $1}' 
```

list3 是 nslookup 的输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:32:41.373

```
 This perl code maybe could be useful with some modifications:

#!/usr/bin/perl
use strict;
use warnings;
while(<DATA>){
    my %table;
    print;
    my @res = qx/nslookup $_/;
    my @eres = grep {/(\w+)\:\s+(\S+)\s*/g} @res;
    #now you got it
    foreach my $r (@eres){
        if ($r =~ /Name:(.*)/) {print "$1\t"}
        if ($r =~ /Address:(.*)\n/ and not $r =~ /\#/) {print "$1\n"}
    }
}

__DATA__
www.cisco.com
www.google.com
www.yahoo.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:08:25.230

You might use `host` instead of `nslookup`. It's output format is a little more amenable to post-processing to accomplish what you want.