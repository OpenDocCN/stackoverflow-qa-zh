# StackOverflow 问答 10686000-10686999

# ruby-on-rails - Ruby on Rails：多对多关系

> ID：10686001
> 
> 赞同：1
> 
> 时间：2012-05-21T13:16:11.750
> 
> 标签：ruby-on-rails, ruby

我有一个包含 3 个表的数据库：用户、卡、卡组：

```
User has_many Cards
User has_many Cardsets
Card belongs_to User
Cardset belongs_to User
Card has_and_belongs_to_many Cardsets
Cardset has_and_belongs_to_many Cards 
```

卡片基本上是一张“抽认卡”，它有 card.term 和 card.definition 列。

在登录用户可以创建新卡片的视图 card/new.html 中，我创建了以下表单：

```
<%= form_for(@card) do |f| %>
  <%= f.label :term, "Termin" %>
  <%= f.text_field :term %>
  <%= f.label :definition, "Definicja" %>
  <%= f.text_area :definition %>
  <%= f.label :cardset, "Dodaj automatycznie do setu:" %>
  <%= select("cardset", :id, current_user.cardsets.all.collect {|p| [ p.name, p.id ] }, {:include_blank => true}) %>
  <br>
  <%= f.submit "Dodaj kartę!", class: "btn btn-large btn-primary" %>
<% end %> 
```

有问题的行是这样的：

```
<%= select("cardset", :id, current_user.cardsets.all.collect {|p| [ p.name, p.id ] }, {:include_blank => true}) %> 
```

我希望这是一个下拉菜单，其中包含属于创建新卡的用户的所有集合。当用户从该列表中选择一个集合并单击提交时，将自动创建新卡片和所选卡片集之间的关系（多对多关系，表：Cards_Cardsets）。

在我的 card_controller 我有：

```
def create
  @card = current_user.cards.build(params[:card])
  @cardset = Cardset.find_by_id(params[:cardset])
  @card.cardsets<<@cardset
  if @card.save
    flash[:success] = "Utworzono karte!"
    render 'show'
  else   
    flash.now[:error] = 'Uzupelnij pola.'
    render 'new'
  end
end 
```

该行：

```
@cardset = Cardset.find_by_id(params[:cardset]) 
```

应该返回所选的卡组。但相反，它返回此错误：

```
Unknown key: id
app/controllers/cards_controller.rb:8:in 'create' 
```

如果我像这样将 id 硬编码到这一行：

```
@cardset = Cardset.find_by_id(3) 
```

然后它就起作用了。所以我猜这个问题是由这个表达式引起的：

```
params[:cardset] 
```

我怎样才能让它工作？

# javascript - 视频js全屏按钮不起作用

> ID：10686006
> 
> 赞同：1
> 
> 时间：2012-05-21T13:16:31.353
> 
> 标签：javascript, html

我在 Videojs (http://videojs.com) 中的全屏功能有问题。该视频位于[http://www.filmgasten.com](http://www.filmgasten.com)上。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:29:08.347

这似乎是 iframe 的问题。

查看 Videojs 支持论坛：[问题 #1](http://help.videojs.com/discussions/problems/1345-fullscreen-issues) [问题 #2](http://help.videojs.com/discussions/problems/1345-fullscreen-issues)
只需在您最喜欢的搜索引擎上搜索更多信息。

对于修复，我会说尝试在页面上嵌入视频并进行绝对定位而不是 iframe。不确定此解决方案是否适合您。

# javascript - 使用 JQuery 构建快速搜索框

> ID：10686008
> 
> 赞同：3
> 
> 时间：2012-05-21T13:16:43.640
> 
> 标签：javascript, jquery, combobox, quick-search

我有以下标记：

```
<input type="text" id="comboBox" />
<ul id="comboBoxData">
    <li>1</li>
    <li>12</li>
    <li>123</li>
    <li>1234</li>
    <li>12345</li>
    <li>123456</li>
    <li>1234567</li>
    <li>12345678</li>
</ul> 
```

使用以下 JQuery 代码：

```
$(document).ready(function() {   
    $('#comboBox').bind('keydown keypress keyup change', function () {
        var search = $('#comboBox').val();
        if (search !== '') {
            $('#comboBoxData li').hide();
            $('#comboBoxData li[text*=' + search + ']').show();
        } else {
            $('#comboBoxData li').show();
        }
    });
}); 
```

当我在“组合框”搜索字段中键入“1”或“12”之类的文本时，它应该过滤掉所有文本不包含我的搜索数据的 LI，但由于某种原因，它什么也不显示。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T13:21:17.827

您的示例不起作用，因为 text 不是`li`.

尝试使用`filter()`来搜索文本：

```
$('#comboBox').bind('keydown keypress keyup change', function() {
    var search = this.value;
    var $li = $("#comboBoxData li").hide();
    $li.filter(function() {
        return $(this).text().indexOf(search) >= 0;
    }).show();
}); 
```

[**示例小提琴**](http://jsfiddle.net/RnAQd/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:22:31.880

没有`text`属性`li`。您可以安装该`text()`属性。
安装：

```
$('#comboBoxData li').hide();
$('#comboBoxData li[text*=' + search + ']').show(); 
```

尝试

```
$('#comboBoxData li').each(function(){
   if ( ($this).text().indexOf(search) > -1 ) $(this).show(); 
   else $(this).hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:25:57.207

要从复选框中找到包含值的元素，您必须遍历每个元素并使用 .text() 函数来获取标签的文本内容：

```
$('#comboBoxData li').each(function() {
    if ($(this).text().indexOf(search) != -1) {
        $(this).show();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T13:37:23.973

```
 $(document).ready(function () {
        $("#comboBoxData li").hide();

        $('#comboBoxData li').each(function (i) {
            $(this).attr('data-text', function () {
                return $(this).text();
            });
        });

        $('#comboBox').bind('change keypress  keyup change', function () {
            $("#comboBoxData li").hide();
            $('#comboBoxData li[data-text*="' + $.trim($(this).val()) + '"]').show();
        });
    });​ 
```

for live demo see this link: [http://jsfiddle.net/nanoquantumtech/B7NxP/](http://jsfiddle.net/nanoquantumtech/B7NxP/)

# c# - DataRow.ItemArray 无法修改

> ID：10686011
> 
> 赞同：1
> 
> 时间：2012-05-21T13:17:02.400
> 
> 标签：c#, wpf, datagrid

> **可能重复：**
> [无法更改 DataRow 值](https://stackoverflow.com/questions/6885087/unable-to-change-datarow-value)

我将数据表绑定到数据网格。现在我想在单击按钮后更改与所选单元格的行相对应的数据表的值。这是我的代码：

```
 private void BtnModifyColorBlue_Click(object sender, RoutedEventArgs e)
    {
        if (dataGrid.SelectedCells.Count < 1)
            return;
        DataGridCellInfo dc = dataGrid.SelectedCells.FirstOrDefault();
        DataRowView drv = dc.Item as DataRowView;
        if (drv == null)
            return;
        drv.Row.ItemArray[11] = Brushes.Blue;
    } 
```

出于某种原因，在赋值之后，数据表的值没有改变。这里有什么神秘的事情发生吗？顺便说一句，我可以确认分配已经执行。非常感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-21T13:30:13.247

您不能通过 item 数组进行更改，请使用以下语法：

```
drv.Row[11] = Brushes.Blue; 
```

# php - php+oauth：3-legged 和 2-legged auth 有什么区别？

> ID：10686013
> 
> 赞同：2
> 
> 时间：2012-05-21T13:17:04.250
> 
> 标签：php, oauth

我正在查看 oauth+php 示例（http://code.google.com/p/oauth-php/wiki/ConsumerHowTo#Two-legged_OAuth）。有两种不同的模式可以获得授权：3-legged 和 2-legged。有什么不同？我应该什么时候使用它们中的每一个？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T01:50:12.783

引用的 URL 提供了一个不错的概述。

在谷歌土地上：

*   2-legged OAuth (2LO) 通常用于 Google Apps。在这种情况下，域管理员可以预先批准应用程序访问域上的用户数据的授权（例如：DocuSign 可以代表 example.com 域上的所有用户访问 Google 文档）。管理员通过 Google Apps 控制面板或从 Google Apps Marketplace 安装应用程序来执行此操作。由于批准发生在 OAuth 流程之外——应用程序只需要证明其身份，然后在发出请求时由 API 服务器验证数据访问的授权。通常，应用程序使用 API 调用中的 ?xoauth_requestor_id=user@example.com 查询参数来指示用户代表它发出请求。
*   3-legged OAuth (3LO) 是指在需要授权时直接提示最终用户进行授权。这是“正常”的流程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:40:40.943

从示例中，我猜 2-legged auth 只是更简单，并且允许您仅调用服务器提供的具体方法，因此每次应该进行方法调用时都必须进行身份验证。使用 3-legged auth 时，您可以访问所有可能的服务器，然后选择具体的服务器，然后您可以调用任何您想要的方法，一旦您通过身份验证和授权......

# node.js - 使用 Apache AB 对 ec2 Node.js 进行负载测试 - 在服务器上运行 6500 QPS，但从远程运行 175 QPS

> ID：10686017
> 
> 赞同：0
> 
> 时间：2012-05-21T13:17:22.517
> 
> 标签：node.js, nginx, amazon-ec2, load-testing

我正在尝试在 ubuntu 64 上的 ec2 c1.xlarge 机器上加载测试一个简单的 node.js 和 cyclone hello world 应用程序。它有 8 个内核。我使用 nginx 作为负载均衡器，主管为每个核心启动一个进程。当我在机器上运行以下命令时，对于 node.js，我的 qps 约为 6500。

```
 ab -n 5000 -c 25 http://127.0.0.1 
```

当我从远程机器运行 ab 时，即使是在同一区域中的机器，qps 也会下降到大约 175 qps。如果我从我的开发机器上运行，情况会更糟。

那么，我错过了什么？是否有我必须调整的参数以允许来自远程机器的更多连接？我觉得我错过了什么。我必须在 sysctl 配置文件中调优吗？它是一台相当原始的机器，但在启动时，以下是我调整的 nobs。

```
sysctl -w fs.file-max=128000;
sysctl -w net.ipv4.tcp_keepalive_time=300;
sysctl -w net.core.somaxconn=250000;
sysctl -w net.ipv4.tcp_max_syn_backlog=2500;
sysctl -w net.core.netdev_max_backlog=30000;
sysctl -p 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:22:50.863

延迟会减慢测试速度，从而降低吞吐量。几乎在每种情况下，远程请求都会比本地请求花费更长的时间，因此单个线程在远程运行时的吞吐量将低于在本地运行时，因此，当使用不会调整请求的 Ab 时，总吞吐量必须降低。

例如，您有 25 个线程。假设在本地提出您的请求需要 50 毫秒。对于一个线程，这给出：

1000（1 秒）/50 = 20 个请求/秒 - 这是一个线程可能的最大吞吐量。

超过 25 个线程，总计 25 * 20 = 500 req/s。

如果您采用该公式并将响应时间更改为 250 毫秒，则线程上的总*最大*吞吐量下降到 4 请求/秒，从而在 25 个线程每秒 80 个请求的情况下总体可能的最大值。

更进一步：如果你说你得到 6000 qps 和 25 个线程，那么逻辑上你的应用程序在本地调用时会在大约 4 毫秒内响应。如果您只能远程获得 175 qps，那是因为响应时间下降到大约 142 毫秒，所以在您的系统中，您有大约 138 毫秒的延迟——给予或接受——这就是问题所在。

# c - 打印从文件加载的字符串 (char*)，没有转义的特殊序列（如 \n）

> ID：10686022
> 
> 赞同：1
> 
> 时间：2012-05-21T13:17:32.280
> 
> 标签：c, file, parsing, replace, escaping

我目前正在为我的玩具语言编写一个解析器，作为该解析器的一部分，我已经很好地编写了 print 函数......基本上打印了它的参数。对于字符串常量，它所做的只是

```
printf("%s", pointer); 
```

所以

```
print("\n") 
```

应该被执行为

```
printf("%s", ptr_to_loaded_string); 
```

（或多或少）

但是，我当前的问题是，C 在读取脚本文件时转义了特殊字符序列。所以我得到的不是“\n”，而是“\\n”。

我的问题是：有什么方法可以避免这些序列的转义，如果没有，处理它们的最佳方法是什么？我目前正在考虑搜索和替换 - 用一个 '\' 替换每个 2 '\' 序列，但这可能有点问题（字符串长度更改、重新分配等） - 我想避免这种解决方案，除非它是绝对有必要。

编辑：啊，stackoverflow 逃脱了我的例子....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:39:43.083

并不是说 C 没有对您的序列进行转义——而是它只是将它们单独放置，因此输入流中的“\n”被读取为两个字符（'\' 和 'n'）。

*这是我几年*前写的一些代码来处理这个问题：

```
/*
** Public Domain by Jerry Coffin.
**
** Interpets a string in a manner similar to that the compiler
** does string literals in a program.  All escape sequences are
** longer than their translated equivalant, so the string is
** translated in place and either remains the same length or
** becomes shorter.
*/

#include <string.h>
#include <stdio.h>
#include "snip_str.h"

char *translate(char *string)
{
      char *here=string;
      size_t len=strlen(string);
      int num;
      int numlen;

      while (NULL!=(here=strchr(here,'\\')))
      {
            numlen=1;
            switch (here[1])
            {
            case '\\':
                  break;

            case 'r':
                  *here = '\r';
                  break;

            case 'n':
                  *here = '\n';
                  break;

            case 't':
                  *here = '\t';
                  break;

            case 'v':
                  *here = '\v';
                  break;

            case 'a':
                  *here = '\a';
                  break;

            case '0':
            case '1':
            case '2':
            case '3':
            case '4':
            case '5':
            case '6':
            case '7':
                  numlen = sscanf(here,"%o",&num);
                  *here = (char)num;
                  break;

            case 'x':
                  numlen = sscanf(here,"%x",&num);
                  *here = (char) num;
                  break;
            }
            num = here - string + numlen;
            here++;
            memmove(here,here+numlen,len-num );
      }
      return string;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:21:41.813

您不能让 C 风格的特殊字符直接从 char 序列（例如，从输入文件）中解释。您需要编写解析逻辑来确定序列是否包含所需的特殊字符序列并进行相应处理

*注意*：确保您也正确处理转义字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:31:26.160

如果您愿意使用 GLib，您可以[g_strcompress](http://developer.gnome.org/glib/2.28/glib-String-Utility-Functions.html#g-strcompress)您的字符串以转换转义字符，然后打印结果。

# sql-server - 与 SSRS 配置相关

> ID：10686024
> 
> 赞同：1
> 
> 时间：2012-05-21T13:17:35.423
> 
> 标签：sql-server, reporting-services, ssrs-2008

我完成了报告服务配置步骤，最后我在 url 中给出了 localhost/reports，它只显示“sql server reporting services HOME”。它不显示内容和属性标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:05:41.387

那可能只是因为您没有任何文件夹。如果您部署任何报告并且将创建文件夹：

![在此处输入图像描述](../Images/879ca007dee04c0e138cab2d7111059a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:56:06.283

部署报告时，您必须指定目标位置。该报告将在此处显示。

# jquery - jQuery click() 和 keyup() 以及 IE9 开发者工具问题

> ID：10686040
> 
> 赞同：1
> 
> 时间：2012-05-21T13:18:27.257
> 
> 标签：jquery, internet-explorer-9

我尝试在 IE9 开发人员工具 (F12) 中使用此 JQuery 脚本加载 html 页面：

```
jQuery(document).ready(function() {

    $(this).click(function(event) {

        if ( $("#fancybox-overlay").is(":visible") ) {
            $("#panopano").show();
        }
        else if ( event.target.nodeName == "IMG" && event.pageY > 800 && event.pageY < 1500 ) {
            $("#panopano").hide();
        }

    });

    $(this).keyup(function(event) {

        if (event.keyCode == 27) {
            $("#panopano").show();
        }

    });
    ... 
```

这些函数隐藏或显示 krpano 对象，默认设置为 z-index: auto，导致 fancybox 出现问题。这些功能是否与 IE7 e IE8 兼容？只有这两个浏览器的html页面加载到无穷大！控制台没有错误。如果我使用 IE9 模式或其他浏览器加载页面，没问题。我没有考虑过IE6。

编辑：我修改了代码（谢谢@Imdad）：

```
$(this).keyup(function(event) {

    var kCode;

    if ( event.keyCode )
    {
        kCode = event.keyCode;
    }
    else
    {
        kCode = event.charCode;
    }

    if (kCode == 27) {
        $("#panopano").show();
    }

}); 
```

# javascript - 在页脚中使用 jQuery

> ID：10686043
> 
> 赞同：0
> 
> 时间：2012-05-21T13:18:54.550
> 
> 标签：javascript, jquery, html, performance, jquery-selectors

始终建议（例如参见[this](http://developer.yahoo.com/performance/rules.html#js_bottom)）将 JS 链接放在页脚中。PHP页面的一个典型例子是

```
include 'header.php'
Page Content
include 'footer.php' 
```

`Page Content`我们为特定页面添加自定义 jQuery 代码，同时在页脚加载 jQuery 库。这将导致问题，因为 jQuery 库必须在 jQuery 代码之前加载。

**QUESTION 1：**如何将jQuery库放在页脚中，并在每个对应的案例中放置自定义代码？

一种可能的解决方案是在页脚中包含所有 jQuery 代码（对于所有网站页面）。在这种情况下，所有 jQuery 代码都可以添加到 JS 文件中，而不是内联 JavaScript。这将是类似的

```
$(document).ready(function(){
$('.div1').click ....
$('.div2').click ....
.....
$('.div99').click .... 
```

**问题2：**它不会减慢JavaScript进程，因为在每个页面中，JS必须监听当前页面中不存在的DOM元素的可能事件？例如，JS 必须照顾 99 个 DIV，而我们在每个页面中都有几个 DIV。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:38:59.203

You want to load JS as late as possible and preferably from one file - if you're using something like modernizer it will still need to go in the head.

As far as deferring jQuery goes @samsaffron wrote a pretty definitive post on it - [http://samsaffron.com/archive/2012/02/17/stop-paying-your-jquery-tax](http://samsaffron.com/archive/2012/02/17/stop-paying-your-jquery-tax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:34:49.300

**对问题 1 的回答** 标准做法是将大型脚本放在自己的文件中，并在标题中添加脚本标签。只要您调用 $(document).ready，您就不会对性能造成任何影响，因为该脚本只会在加载文档时运行。

将 JS 放在页脚中的目的是让它在整个页面加载后执行，但对于 body onload 事件不再需要。

如果您真的打算将 JS 留在页脚中，那么使用您要加载的脚本名称创建一个页面变量并将其传递给您的页脚脚本是一项相当简单的任务。

**对问题 2 的回答** 否，页面没有变慢。如果 jquery 没有找到匹配的标签，它不会绑定任何事件。即使页面上有 99 个 div，也不会影响性能，因为事件是通过引用存储的，并且只会触发调用的 DOM 项及其事件。

# javascript - 单击时更改按钮形状

> ID：10686048
> 
> 赞同：1
> 
> 时间：2012-05-21T13:19:02.827
> 
> 标签：javascript, jquery, html, toggle

我正在为学生制定一个评估系统。当老师点击它时，我想更改学生的成绩。我有 2 个“等级”图像可以像这样切换：“A”，然后单击“B”……等等。我现在使用一个函数来完成这个任务，如下：

```
 function ChangeClass(object) 
          {

            var objectClass = $(object).attr('class');

        if (objectClass == 'zero') {

            $(object).removeClass('zero');
            $(object).addClass('one');

        }
        else if (objectClass == 'one') 
        {

            $(object).removeClass('one');
            $(object).addClass('two');
        }
        else if (objectClass == 'two') {
            $(object).removeClass('two');
            $(object).addClass('zero');
        }
    } 
```

但我不喜欢这个解决方案，我想 Jquery 中可能有一些更简单的东西，或者改变按钮形状或切换图像的东西。如果您有任何想法，请分享他们=）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T13:27:51.910

试试这个：

```
var classes = ["zero", "one", "two"],
    i = classes.indexOf(object.className);
object.className = classes[(i + 1) % classes.length]; 
```

不需要 jQuery，但请记住，`indexOf`IE8 及更低版本不支持 for 数组，必须对其进行仿真。

我假设这`object`是一个有效的 DOM 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:57:50.070

如果您想在所有浏览器中使用 jquery，您可以使用它：

```
 var max = 3; //total button or button class
       function ChangeClass(object){
                              var i = $(object).split('_')[1]; //this will explode 1 from className_1
                              var a = "className_" + i; // instead of zero, one, two use className_1, className_2, className_3
                              var b = (i+1) % max;
                              b = "className_" + b;
                              var x = "." + a;
                              $(x).click(function(){  
                                   $(this).removeClass(a).addClass(b);
                                });  
                              } 
```

You can use this solution for any number of buttons, not only for 3 buttons-zero, one, two. I hope this will help !

# sql-server-2005 - SQL Server 2005 排名函数

> ID：10686052
> 
> 赞同：0
> 
> 时间：2012-05-21T13:19:18.677
> 
> 标签：sql-server-2005, function, rank

我在 SQL Server 2005 中有一个问题：

假设我有表`PLAYER`( `string player, int score, bool Active`) 和这个查询：

```
SELECT PLAYER.player AS NAME,
   PLAYER.score AS SCORE,
   POSITION = CASE WHEN PLAYER.Active THEN RANK()OVER(ORDER BY score desc) else NULL end
from PLAYER 
```

问题是当玩家不活跃时，生成的位置不是连续的。

例如 ：

```
JOHN,10000,1
PETER,5000,NULL (NOT ACTIVE)
CHARLES,2500,3 (SHOULD HAVE POSITION 2, NOT 3) 
```

对不起我糟糕的英语，我希望我已经解释了我的观点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:24:50.143

```
declare @Player table
(
  player varchar(20),
  score int,
  state int
)

insert into @Player values ('JOHN', 10000, 1)
insert into @Player values ('PETER', 5000, NULL)
insert into @Player values ('PAUL', 5000, 2)
insert into @Player values ('CHARLES', 2500, 1)

select player as Name,
       score,
       case
          when state = 1 then
            rank() over(partition by state order by score desc)
          else null
       end as position
from @Player 
```

结果：

```
Name                 score       position
-------------------- ----------- --------------------
PETER                5000        NULL
JOHN                 10000       1
CHARLES              2500        2
PAUL                 5000        NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:24:54.233

试试这个：

```
POSITION = 
   RANK()OVER(ORDER BY CASE WHEN Active IS NULL THEN 1 ELSE 0 END ASC, score DESC) 
```

**编辑**：

> ...但问题是实际上我的“活动”列不是布尔值，真正的列是一个称为“状态”的整数，它必须等于 1 才能处于活动状态。在这种情况下代码应该如何？

那么这应该工作：

```
POSITION = 
   RANK()OVER(ORDER BY CASE WHEN State = 1 THEN 0 ELSE 1 END ASC, score DESC) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:31:22.430

试试这个：

```
SELECT PLAYER.player AS NAME, 
PLAYER.score AS SCORE, 
POSITION = RANK()OVER(ORDER BY score desc) 
from PLAYER
WHERE ACTIVE IS NOT NULL
UNION
SELECT PLAYER.player AS NAME, 
PLAYER.score AS SCORE,NULL  
from PLAYER
WHERE ACTIVE IS NULL 
```

与已经回答的查询相比，我不确定这会有多有效，但它更容易理解。

# database - 使用 LibreOffice 数据库查询 CSV 文件

> ID：10686053
> 
> 赞同：1
> 
> 时间：2012-05-21T13:19:19.240
> 
> 标签：database, csv, libreoffice

我正在尝试对 csv 文件执行一些简单的 sql 操作。

为了让它运行，我在一个包含我所有 csv 文件的文件夹上创建了一个新的 LibreOffice*文本数据库。*但是我的测试失败了。

使用此示例文件：

## 客户.csv

```
客户、日期、数量、价格
"约翰·多伊",15/01/2012,12,20
"Doe John",15/01/2012,2,25
“约翰·多伊”，20/01/2012,1,23
```

这个查询：

## 询问

```
SELECT "Customer", COUNT(*) AS numero FROM "Customers" GROUP BY "Customer" 
```

它没有在“numero”列上显示任何结果（它是空的）。它也没有做 GROUP BY。

任何想法 ？

谢谢。

# r - 带有 ggplot2 的轮廓文本

> ID：10686054
> 
> 赞同：40
> 
> 时间：2012-05-21T13:19:26.633
> 
> 标签：r, ggplot2

我想知道是否有一种方法可以使用 ggplot2 绘制“轮廓文本”，例如带有白色小边框的黑色文本，以使其在地图等背景上易于阅读。

理想情况下，我想实现您可以在 Google 地图上看到的相同类型的标签：

![在此处输入图像描述](../Images/67ef07f89f361e2efbd8321d3a2672db.png)

提前感谢您的任何提示！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2018-05-06T15:34:10.173

更简单的解决方案是使用`shadowtext`库并使用`geom_shadowtext`而不是`geom_text`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-21T20:03:06.020

这是一种从包`shadowtext`中的函数实现一般思想的方法`TeachingDemos`。中间部分的代码可以包装成一个函数来简化一些事情。该示例公然从 Richie Cotton 的回答中窃取：

```
d <- diamonds[sample(nrow(diamonds), 10), ]  

p <- ggplot(d, aes(carat, price) ) 
theta <- seq(pi/8, 2*pi, length.out=16)
xo <- diff(range(d$carat))/200
yo <- diff(range(d$price))/200
for(i in theta) {
    p <- p + geom_text( 
        bquote(aes(x=carat+.(cos(i)*xo),y=price+.(sin(i)*yo),label=cut)), 
                    size=12, colour='black' )
}
p <- p + geom_text( aes(label=cut), size=12, colour='white' )
p <- p + opts( panel.background=theme_rect(fill='green' ) )
print(p) 
```

![在此处输入图像描述](../Images/1651cfdfcb1f4226b09905cbd35167ec.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-21T16:49:17.523

不理想或非常灵活，但您可以通过绘制粗体单色文本，然后在顶部绘制标准单色文本来获得效果。

我使用绿色面板背景来模拟地图。

```
d <- diamonds[sample(nrow(diamonds), 10), ]

(p <- ggplot(d, aes(carat, price)) +
  geom_text(
    aes(label = cut, family = "mono", fontface = "bold"), 
    size = 12, 
    colour = "black"
  ) +
  geom_text(
    aes(label = cut, family = "mono"), 
    size = 12, 
    colour = "white"
  ) +
  opts(panel.background = theme_rect(fill = "green"))
) 
```

![带有菱形数据集的粗体文本](../Images/834d9cf230a20db5a9252f8bd4ba4052.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-13T09:00:11.950

Greg Snow 接受的答案不再适用，`ggplot2@2.2.1`因为调用了 of`aes`而不是`aes_q`。

采用

```
for(i in theta) {
  p <- p + geom_text( 
    aes_q(x = bquote(carat+.(cos(i)*xo)),
          y = bquote(price+.(sin(i)*yo)),
          label = ~cut), 
    size=12, colour='black' )
} 
```

反而。

# android - 活动不会在android中从纵向模式更改为横向模式

> ID：10686056
> 
> 赞同：2
> 
> 时间：2012-05-21T13:19:36.600
> 
> 标签：android

我正在尝试将 Android 活动的方向从纵向更改为横向。但它并没有改变为景观。

我在清单文件中提到的活动如下：

```
<activity
    android:name=".OpenFileActivity"
    android:label="@string/app_name"
    android:configChanges="orientation|keyboardHidden"
    android:exported="false"> 
```

但我不成功。谁能告诉我这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:24:40.397

请检查您的手机设置是否启用了屏幕旋转。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:24:06.807

你应该设置 android:screenOrientation="landscape"

来源：http: [//developer.android.com/guide/topics/manifest/activity-element.html#screen](http://developer.android.com/guide/topics/manifest/activity-element.html#screen)

# magento - Magento 客户注册页面布局简单问题

> ID：10686057
> 
> 赞同：0
> 
> 时间：2012-05-21T13:19:38.567
> 
> 标签：magento

我似乎有一个简单的布局问题，没有客户注册页面@ [http://www.skylanternsworld.com/shop/index.php/customer/account/create/](http://www.skylanternsworld.com/shop/index.php/customer/account/create/)

您可以看到文本框和标题文本有点混乱。我浏览了这些文件，但看不到我将在哪里解决这个问题。有人可以将我引导到我需要编辑以解决此问题的文件，我认为这可能只是一个间距或 css 问题，但我真的不确定并且我们尝试过的测试没有奏效。

运行magento 1.6.2.0

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:53:45.233

在管理区域中，转到系统 > 配置 > 高级 > 开发人员。如果您将当前配置范围更改为您的主题，您将在“调试”选项卡下看到一个选项，用于打开模板和块提示。这将为您提供构成页面的各种模板的位置。

# django - 什么是最有效的视图和模板？

> ID：10686060
> 
> 赞同：0
> 
> 时间：2012-05-21T13:19:47.943
> 
> 标签：django, templates, view, model

我有以下模型：

```
from django.db import models
import datetime

class Club(models.Model):
    establishment = models.CharField(max_length=200)
    address = models.CharField(max_length=200)
    def __unicode__(self):
        return self.establishment

class Day(models.Model):
    club = models.ForeignKey(Club)
    day = models.DateField('day')
    def __unicode__(self):
        return unicode(self.day)

class Court(models.Model):
    club = models.ForeignKey(Club)
    day = models.ForeignKey(Day)
    court = models.IntegerField(max_length=200)
    def __unicode__(self):
        return unicode(self.court)

class Slot(models.Model):
    club = models.ForeignKey(Club)
    day = models.ForeignKey(Day)
    court = models.ForeignKey(Court)
    slot = models.TimeField('slot')
    reservation = models.CharField(max_length=200)
    def __unicode__(self):
        return unicode(self.slot) 
```

在 Slot 模型中，每个“slot”可以是“open”，也可以在“reservation”字段中具有任何其他值（通常是电子邮件）。我正在尝试做的事情：给定一个传递给函数的 club_id，显示“slot”中具有“open”保留值和等于今天的“day”的所有字段......然后通过这个进入模板。

```
def avail_times(request, club_id):
    p = get_object_or_404(Slot,pk=club_id)
    return render_to_response('reserve/templates/avail_times.html', {'times':p}) 
```

我无法使用我拥有的当前视图/模板来做到这一点；它只返回一个时间。如何在视图中引用“day”和“club”（给定 club_id），然后在模板中显示以上内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:27:31.330

您应该使用[select_related()](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.select_related)来检索相关对象（又名：foreignKeys）

要在您的视图中引用它，只需键入：

```
club = p.club 
```

这将为您提供相关的俱乐部对象（如果您不使用选择相关，则在数据库中再次点击）

您已经将所有这些信息存储在 Slot 对象 (p) 中，其唯一的“真实”成员是 slot 字段（正如您所指出的，您看到的 datetime 字段）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:58:00.790

首先，该查询不会按照您所说的去做。要获得给定俱乐部今天的所有空缺席位，您需要这样的东西：

```
open_slots = Slot.objects.filter(club_id=club_id, day__day=datetime.date.today(),
                                 reservation='open') 
```

现在在您的模板中，您可以遍历`open_slots`，并为每个显示`slot`时间（您应该在此处选择更好的字段名称）。

顺便说一句，我不明白这个`Day`模型的意义，或者至少为什么你有一个从法庭到一天的 FK。无论哪一天，球场都是一样的，唯一应该与 Day 相关的是 Slot。同样，Day 不需要 FK 到俱乐部（无论您在哪个俱乐部，它仍然是星期一）。事实上，您可以完全删除 Day 模型，直接在 Slot 上使用 DateField。

# .net - 从 C# 中的 Form2 调用 Form1 中的函数

> ID：10686061
> 
> 赞同：0
> 
> 时间：2012-05-21T13:19:48.747
> 
> 标签：.net, winforms, c#-4.0

我在 Form1 中有以下函数，并希望在单击 Form2 中的按钮时调用它。

```
 public object GetStudents()
    {
        using (var DB = new myView1())
        {
            var studentList = (from s in DB.View123
                            select new { s.StudentName, s.StudentNumber, s.ClassName, s.StreamName, s.ParentName }).ToList();
            dataGridViewStudents.DataSource = students;
            return students.ToList();
        }
    } 
```

上面的函数在 Form1 中，我如何从 Form2 中的 button_Click 事件中调用它。这在 VB.NET 中很简单

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:23:12.700

您需要为您的实例提供对`Form2`实例的引用`Form1`，此时它就像`form1.GetStudents()`.

如果`Form1`是你的主要形式，你可以简单地做

```
var students = ((Form1)ApplicationContext.MainForm).GetStudents(); 
```

然而，这段代码有几个部分会散发出不好的代码气味：

*   a 中的数据库代码`Form`（实际上不是表单的责任）
*   返回`object`而不是返回的方法`IList`
*   不清楚什么`ApplicationContext.MainForm`是没有上下文的（推论：不要这样做）

恕我直言，您应该借此机会重构现有代码并使其符合可接受的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T13:30:22.700

在 C# 中也很简单。您只需要一个实例，`Form1`然后您就可以在该实例上调用此方法。

但是，有更好的方法。此代码实际上不*属于*表单。表单用于 UI 交互，而不是用于业务逻辑和数据访问。您最好将此代码移动到两个表单都可以访问的公共位置。

创建数据访问类。像这样的东西：

```
public class StudentRepository
{
    public static object GetStudents()
    {
        using (var DB = new myView1())
        {
            var studentList = (from s in DB.View123
                        select new { s.StudentName, s.StudentNumber, s.ClassName, s.StreamName, s.ParentName }).ToList();
            dataGridViewStudents.DataSource = students;
            return students.ToList();
        }
    }
} 
```

另请注意，该方法现在是`static`，这意味着它不需要调用实例。（这就像`Shared`VB 中的关键字。）所以您的表单可以调用：

```
var students = StudentRepository.GetStudents(); 
```

尽管不在此问题的范围内，但您要修复的另一件事是返回类型。 `object`不是很具体。您应该有一个`Student`类，并且该方法应该返回`IList<Student>`。像这样的东西：

```
public class Student
{
    public string StudentName { get; set; }
    public int StudentNumber { get; set; }
    public string ClassName { get; set; }
    public string StreamName { get; set; }
    public string ParentName { get; set; }
} 
```

和：

```
public class StudentRepository
{
    public static IList<Student> GetStudents()
    {
        using (var DB = new myView1())
        {
            var studentList = (from s in DB.View123
                        select new Student { StudentName = s.StudentName, StudentNumber = s.StudentNumber, ClassName = s.ClassName, StreamName = s.StreamName, ParentName = s.ParentName }).ToList();
            dataGridViewStudents.DataSource = students;
            return students.ToList();
        }
    }
} 
```

我对字段的类型做了一些假设，如果它们错了，你应该能够纠正它们。您甚至可能希望它返回 an`IEnumerable<Student>`而不是`IList<Student>`如果它是不变的结果（也就是说，如果它只是学生的枚举而不是要添加、删除等的列表）。

您可以在这里做更多的事情，例如为其他数据元素创建一个对象，例如`Class`（可能需要一个不同的名称，只是为了干净）`Parent`、、、`Stream`等等。（想想看，其中几个可能需要更好的名称。您的变量命名通常需要一些工作。类似`Form1`或`myView1`不能很好地传达意图的事情。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:23:59.490

我没有使用过 C# 但它应该类似于 VB.Net，因为它仍然在同一个框架上。您是否尝试过将函数放在单独的资源文件中并将其添加到项目中？您无法调用该函数的原因似乎是由于它们以不同的形式存在范围问题。资源文件应该解决这个问题，并且它往往使代码更容易维护，因为它减少了混乱

# ajax - 使用 ajax 使用 flot 绘制多个数据集 - 数据未正确显示

> ID：10686062
> 
> 赞同：6
> 
> 时间：2012-05-21T13:20:13.630
> 
> 标签：ajax, jquery, flot

我正在使用 flot 试图绘制一些数据。我使用单个数据集进行此操作，当我尝试修改代码以使用多个数据集时，我遇到了一个错误，我很难追踪它并且它停止工作。我确信这是我所做的改变，但对于我的生活，我无法追踪它。

Y 轴显示 -1.0、-0.5、0、0.5 和 1.0 - 几乎不是我期望的值，也没有 X 轴数据。图表显示为空白。

我正在尝试完成类似于 StackOverflow 上的信誉图的事情，但这将代表不同的数值。该`data`对的第一个值是时间戳（我认为我计算正确），第二个值`data`是要绘制的值。

我确保我的价值观**没有**引号，我看到这是最常见的问题之一。

任何指出问题的反馈或帮助将不胜感激。

**stats.js**

```
function plotField(){
    var field = 'activeUsers,totalUsers';
    var url = '/api/consoleGet_stats?field='+field;
    $.ajax({
        url: url,
        method: 'GET',
        dataType: 'json',
        success: function(datasets){
            var i = 0;
            console.log(datasets);
            $.each(datasets, function(key, val){
                val.color=i;
                i++;

                var data = [ $(this) ];
                console.log(data);

                var options = {
                    lines: { show: true },
                    points: { show: true },
                    xaxis: {mode: 'time', timeformat: "%y/%m/%d", tickDecimals: 0, tickSize: 1 }
                };

                var placeholder = $("#placeholder");

                $.plot(placeholder, data, options);
            });
        }
    });   
} 
```

**控制台Get_stats.php**

```
<?php
    //simplified for example purposes
    $fields=explode(",",$_REQUEST['field']);

    foreach ($fields as $field){
        $rows=$dbConnect->getRows('select date, ' .$field. ' from websiteStats order by id asc');
        $resultData = array('label' => $field);
        foreach($rows as $row){
            $t = strtotime($row['date']." UTC") * 1000;
            $resultData['data'][]=array($t, (int)$row[$field]);
        }
        $results[]=$resultData;
    }
    die(Json_encode($results));
?> 
```

**控制台输出**

```
[Object { label="activeUsers", data=[6]}, Object { label="totalUsers", data=[6]}]
[[Object { label="activeUsers", data=[6], color=0}]]
[[Object { label="totalUsers", data=[6], color=1}]] 
```

**从 firebug 返回 json（为此帖子添加了格式）**

```
[
    {"label":"activeUsers","data":[[1334583090000,26],[1334669491000,26],[1334755893000,26],[1334842290000,26],[1334928691000,26],[1335015093000,26]]},
    {"label":"totalUsers","data":[[1334583090000,150],[1334669491000,170],[1334755893000,193],[1334842290000,200],[1334928691000,225],[1335015093000,257]]}
] 
```

* * *

![在此处输入图像描述](../Images/a6d72c8d13b5b7c9db8fcfd5fb7160e7.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T14:16:59.733

我能够通过将代码更改为更简化来解决问题：

```
function plotField(){
    var field = 'activeUsers,totalUsers';
    var url = '/api/consoleGet_stats?field='+field;
    $.ajax({
        url: url,
        method: 'GET',
        dataType: 'json',
        success: function(datasets){
            $.plot($("#placeholder"), datasets);
        }
    });   
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T14:31:30.400

`data`您可以一次绘制所有内容，而不是逐个传递参数（顺便说一句，这会覆盖前面的图）。我现在明白你通过迭代来获得合适的颜色，但是你现在做的方式与 flot 的默认方式没有什么不同。

如果您想要其他颜色，您可以在系列数据中将它们指定为：

```
{
    "label":"activeUsers",
    "data": xxx,
    "color": 1 // Or e.g. "rgb(255,0,0)"
} 
```

使用整数时，您使用 flot 生成的颜色。这是实际绘图过程的一[小部分。](http://jsfiddle.net/bFDZk/6/)在那里我`minTickSize: [1, "day"]`用来指定每个刻度应该代表一天。

这应该能够与 ajax 一起使用：

```
function plotField(){
    var field = 'activeUsers,totalUsers';
    var url = '/api/consoleGet_stats?field='+field;
    $.ajax({
        url: url,
        method: 'GET',
        dataType: 'json',
        success: function(datasets){
            var options = {
                lines: { show: true },
                points: { show: true },
                xaxis: {
                    mode: 'time', 
                    timeformat: "%y/%m/%d",
                    minTickSize: [1, "day"]
                }
            }
            var placeholder = $("#placeholder");
            $.plot(placeholder, datasets, options);
        }   
    });   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-02T02:10:04.507

适合我的解决方案是：

**服务器AjaxPage.php**

```
<?php
echo '[
       {
           "data": [
               [
                   1220565600000,
                   106.23
               ],
               [
                   1220824800000,
                   106.34
               ]
           ],
           "label": "Oil price ($)"
       },
       {
           "data": [
               [
                   1167606000000,
                   0.758
               ],
               [
                   1167692400000,
                   0.758
               ],
               [
                   1167778800000,
                   0.7547
               ]
           ],
           "label": "USD/EUR exchange rate",
           "yaxis": 2
       }
   ]'; 
```

（来自[多轴示例](http://www.flotcharts.org/flot/examples/axes-multiple/index.html)的数据）

**客户端页面.html**

```
$(function () {

    //Fetch data with AJAX
    function fetchData() {

        // Normally we call the same URL - a script connected to a
        // database - but in this case we only have static example
        // files, so we need to modify the URL.

        $.ajax({
            url: "/serverAjaxPage.php",
            type: "GET",
            dataType: "json",
            success: onDataReceived
        });

        function onDataReceived(series) {

            // Load all the data in one pass; if we only got partial
            // data we could merge it with what we already have.
            data = series;

            var options = {
                series: {
                    lines: {
                        show: true,
                    },
                    points: {
                        show: false
                    }
                },
                xaxis: {
                    ticks: 11,
                    tickDecimals: 0,
                    mode: "time",
                    timeformat: "%d-%m-%Y"
                },
                yaxes: [{
                    position: "left"
                }],
                legend: {
                    position: "sw"
                }
            };

            $.plot("#placeholder", data, options);
        }
    }
    //If you want to load data every 10 seconds
    var interval = 10000;

    //Set interval operation
    var tid = setInterval(fetchData, interval);

}); 
```

# android - 调用 startActivity(Intent) 的活动状态

> ID：10686064
> 
> 赞同：0
> 
> 时间：2012-05-21T13:20:24.253
> 
> 标签：android, android-activity, lifecycle

有人能帮我吗。当activity通过method启动新activity时，调用activity生命周期的什么方法`startActivity(Intent)`？我想，它是`onPause()`，但它不可能。我让它覆盖以关闭 SQLite 连接，但它没有发生。

谢谢

对不起，也许我描述错了我的问题。活动 A 开始另一个活动 B。我的问题是在启动活动 B 之后调用活动 A 的什么方法方法`startActivity(Intent)`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:03:42.337

它遇到了`onPause`then `onStop`。我测试了它...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:38:43.013

您可以重写这两种方法来检查是否调用了其中一种方法。只需为每个输出一个日志。一旦你找到了正确的连接并且连接没有关闭......也许你的关闭电话是错误的。

```
Log.d("DEBUG", "Here in method METHODNAME") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:22:05.407

检查[http://developer.android.com/images/activity_lifecycle.png](http://developer.android.com/images/activity_lifecycle.png)

onCreate 在活动开始时被调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T13:32:46.330

因为您启动了一个新活动，所以在被调用的方法是`onCreate`. 来自 android 开发者网站：

> onCreate 是您初始化活动的地方。最重要的是，在这里您通常会使用定义 UI 的布局资源调用 setContentView(int)，并使用 findViewById(int) 检索该 UI 中需要以编程方式与之交互的小部件。

# android - Spinner android自定义“提示”

> ID：10686067
> 
> 赞同：1
> 
> 时间：2012-05-21T13:20:44.667
> 
> 标签：android, spinner, android-actionbar

我想在 DropDownMod 中使用微调器作为操作栏中的菜单

我需要微调器显示一个固定的提示，即使它选择了一个项目，而不显示选择了哪个元素。

甚至更多......我需要这个提示是一个类似于布局的视图，而不仅仅是一个文本字符串。

有任何想法吗？

# jquery - jquery插件大小和切片不起作用

> ID：10686068
> 
> 赞同：0
> 
> 时间：2012-05-21T13:20:47.677
> 
> 标签：jquery, plugins, size, slice

我正在创建一个用于对表进行排序和分页的 jquery 插件（我知道它们有很多，我尝试了很多，但到目前为止没有一个适合我的需要。）

无论如何，我的页面上有很多表格，并通过以下方式调用我的插件：

```
$('.data-table').tableSorterTwo(); 
```

这是插件代码：

```
(function($)
{
    $.fn.tableSorterTwo = function()
    {
        return this.each(function()
        {
            countRows($(this));
            hideRows($(this));
        });     
    };

    function countRows(element)
    {
        console.log($(element).find('tbody tr').size());
    }

    function hideRows(element)
    {
        $(element).find('tbody tr').hide().slice(0, 5).show();
    }
})(jQuery); 
```

奇怪的是 size 和 slice 的工作出乎意料，我无法确定。

我有这个有 6 行的表；`countRows`返回 18。这发生在所有表中。结果是行数乘以 3。这是为什么呢？

结果`hideRows`出乎意料。我想显示表格的前 5 行；但现在（对于每个表）只显示前 2 行。将 5 更改为 10 会导致显示 4 行。

是我的错误吗？现在搞砸了一段时间，但我现在完全迷失了，非常欢迎每一个帮助/提示/建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:41:03.010

根据我的评论，我相信 Stack Overflow 一直是你的[泰迪熊](http://compaspascal.blogspot.co.uk/2007/12/teddy-bear-principle-in-programming.html)，仅仅提出这个问题的行为就会导致你解决它。

我可以[证明](http://jsfiddle.net/Tra9N/)您的代码使用选择器按预期运行`tbody tr`，但是更改选择器以`tbody td` [展示您](http://jsfiddle.net/y3ZxL/)在问题中描述的行为，即每行 6 行和 3 个单元格的表。

# javascript - 验证后引发javascript事件

> ID：10686069
> 
> 赞同：-1
> 
> 时间：2012-05-21T13:20:51.693
> 
> 标签：javascript, asp.net, validation

我正在尝试添加一个javascript“请稍候”微调器，因此我的最终用户知道在发生长时间加载事件时正在发生某些事情。我们正在使用 ASP.NET。但是，存在一个问题，因为我们在页面上使用了很多[Peter Blum 的验证器](http://www.peterblum.com/DES/Home.aspx)。就目前而言，我在继续按钮上使用了一个点击事件，如下所示：

```
var btnContinue = $("input[name*='btnContinue']");
        $(btnContinue).click(function() 
        {
            # show the spinner
        } 
```

如果验证失败，这会导致问题，因为验证错误会弹出，但微调器不会消失。我真的没有看到单个 OnAllValidation() 事件或我可以轻松挂钩以获得我真正想要的行为的东西（当我们知道一切正常时开始旋转）。这种事件顺序是有问题的，因为一些验证发生在回发之后，这意味着我失去了在 Javascript 中检查这些条件的能力。至少，如果没有我可以参与的事件。

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T16:38:51.620

我在 Blum 先生的验证用户指南中找到了我正在寻找的内容。具体来说：

```
function DES_ValidateGroup(pGroup) 
```

这将使用 DES 客户端框架在当前页面上的指定验证组上运行客户端验证。有了这样的输入，我可以简单地将其放入 IF 语句中。

在我的情况下，我需要验证整个页面，所以我只是将 pGroup 留空，使调用看起来像这样：

```
DES_ValidateGroup('') 
```

用户指南列举了这完全是洁净的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:59:49.877

你可以 ：

*   使微调器出现在验证函数中
*   在 onclick 事件中调用验证函数

这可能会解决您的问题。

如果这不满足您，请查看[此](https://stackoverflow.com/questions/5000415/javascript-jquery-call-a-function-after-previous-function-is-complete)答案，它解释了使用 jQuery 的方法执行此操作的`when()`方法，不确定是否相关但请查看。

# iphone - 2 个图表用于在单个图中进行比较

> ID：10686080
> 
> 赞同：3
> 
> 时间：2012-05-21T13:21:37.223
> 
> 标签：iphone, ios5, graph, compare, core-plot

我正在开发一个显示折线图的 iPhone 应用程序。我根据日期绘制水果的销售情况。

我打算使用 Core-plot 来绘制图形。

我知道如何使用核心绘图库绘制单个图..

我如何在一个图中绘制 2 个不同的图形，即两个图形应该具有相同的 x 和 y 轴。

该场景类似于比较 2 个不同的图表。例如。如果我想比较本月 Apple 和 Orange 的销售额。我需要在同一个图中绘制两个折线图，这样我就可以知道销售的起伏。

是否可以使用 Core plot 或者我应该使用其他一些库或 drawRect 方法来实现相同的效果..

提前致谢，

癌症患者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:33:29.540

是的，有可能。当您下载它时，Examples 文件夹中有一个它的示例。您基本上创建了两个`CPTScatterPlot`-s 并给它们两个不同的标识符。调用`-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index`时检查标识符并返回不同的值。检查示例文件夹以获取更多信息。

# html - 当身体的最小高度为 100% 时，身体的子元素不占用 100% 的空间

> ID：10686084
> 
> 赞同：3
> 
> 时间：2012-05-21T13:21:50.913
> 
> 标签：html, css

以下代码[正常工作](http://rushbase.net/~rush/test2.html)

```
<!DOCTYPE html>
<html>
<head>
<title>Working</title>
<style type="text/css">
html {
  height: 100%;
}
body {
  height: 100%; /* !!!!! difference in here */
}
div#main {
  min-height: 100%;
  background-color: red;
}
</style>
</head>
<body>
    <div id="main"></div>
</body> 
```

而使用`min-height`而不是`height`for body的代码[可以防止 #main 占用空间](http://rushbase.net/~rush/test.html)

```
<!DOCTYPE html>
<html>
<head>
<title>Not working</title>
<style type="text/css">
html {
  height: 100%;
}
body {
  min-height: 100%; /* !!!!! difference in here */
}
div#main {
  min-height: 100%;
  background-color: red;
}
</style>
</head>
<body>
    <div id="main"></div>
</body> 
```

奇怪的是，在使用 chrome 进行检查时，在这两种情况下，主体都正确占用了 100% 的空间。但是`min-height`，如果子元素`min-height: 100%;`转换为 0。为什么会发生这种情况，是否有任何解决方法？我希望我的网页背景的最小高度能够正常工作并根据需要扩展。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T13:44:49.797

## 至于“为什么会这样？”

该`min-height`属性仅在设置了显式高度时才有效。[规范](http://www.w3.org/TR/CSS2/visudet.html#min-max-heights)读取百分比：

> 指定用于确定使用值的百分比。该百分比是相对于生成框的包含块的高度计算的。如果没有明确指定包含块的高度（即，它取决于内容高度），并且该元素不是绝对定位的，则百分比值被视为'0'（对于'min-height'）或'none' （对于“最大高度”）。

其中的关键点是“如果未明确指定包含块的高度（即，它取决于内容高度）。” 当`body`设置为 时`min-height`，它*仍然取决于内容高度*进行计算，只是它不允许它低于指定的大小（在你的情况下，`html`是显式设置的高度的 100%）。但是，由于`body`仍然是根据内容来设置其高度，`div#main`所以无法计算`min-height`，因为`body`没有明确的高度设置。

## 是否需要“解决方法”？

似乎设置`body`可以`height: 100%`实现您想要的一切。[内容是长的](http://jsfiddle.net/TN3LD/8/)还是短[的](http://jsfiddle.net/TN3LD/7/)。

## `html`对更改的评论的回应`background-color`

我怀疑[您](http://jsfiddle.net/eevq6/)`html`设置更改的原因是因为[本规范](http://www.w3.org/TR/CSS21/colors.html#background)`background-color`中的符号（引用如下）。通过在它上面设置它会改变*[画布](http://www.w3.org/TR/CSS21/intro.html#the-canvas)*渲染本身：`html`

> 根元素的背景成为画布的背景并覆盖整个画布，锚定在同一点（对于“背景位置”），就像它仅为根元素本身绘制时一样。根元素不会再次绘制此背景。
> 
> 然而，对于 HTML 文档，我们建议作者为 BODY 元素而不是 HTML 元素指定背景。对于根元素是 HTML "HTML" 元素或 XHTML "html" 元素的文档，其 'background-color' 的计算值为 'transparent' 和 'background-image' 的计算值为 'none'，用户代理必须改为使用在为画布绘制背景时，从该元素的第一个 HTML“BODY”元素或 XHTML“body”元素子元素计算的背景属性值，并且不得为该子元素绘制背景。这样的背景也必须锚定在同一点，就像它们只为根元素绘制时一样。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-21T13:43:26.373

尝试在标签`&nbsp;`内放置一个。`<div id="main"/>`

# javascript - 主干：下一次渲染时不会触发事件

> ID：10686086
> 
> 赞同：0
> 
> 时间：2012-05-21T13:21:57.827
> 
> 标签：javascript, backbone.js

我有这样的代码。我点击按钮，它只工作几次。Chrome 说按钮上没有事件监听器。但是 View 创建按钮并且 View 有 click 事件。你能帮助我吗？

```
//buttons view
var NavigateBar = Backbone.View.extend({    
    events : {
        'click button#back' : 'onBack',
        'click button#next' : 'onNext',
        'hover' : function() {console.log('hover on navigate')}
    },
    initialize: function(options) {
//buttons html
        this.backDiv = '<button id="back" class="btn btn-primary btn-large pull-left">Back</button>';
        this.nextDiv = '<button id="next" class="btn btn-primary btn-large pull-right">Next</button>';
//save options
        this.back = this.options.back;
        this.next = this.options.next;
    },
//buttons event
    onBack : function(e) {
        e.preventDefault();
        app.navigate(this.back, {trigger: true});
    },
    onNext : function(e) {
        e.preventDefault();
        app.navigate(this.next, {trigger: true});
    },
//render
    render: function() {
        this.$el.html("");
        this.$el.append(this.backDiv);
        this.$el.append(this.nextDiv);
        return this;
    }
    });

//create router class
    var AppRouter = Backbone.Router.extend({
    routes: {
        "" : 'home',
        ":id" : 'test'
    },
//create different views
   initialize:function () {        
        this.homeView = new NavigateBar({
//pass options to view
            back: "1",
            next: "2"
        });
        this.testView = new NavigateBar({
            back: "3",
            next: ""
        });
    },
//route actions
    home : function() {
        $('#view-goes-here').html(this.homeView.render().el);
    },
    test : function(e) {
        $('#view-goes-here').html(this.testView.render().el);
    }
});

//create app
$(function(){  
    app = new AppRouter();
    Backbone.history.start();
});
​ 
```

演示：[http://jsfiddle.net/3Jaru/3/](http://jsfiddle.net/3Jaru/3/)，点击下一步按钮两次，你会看到

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:42:42.300

您正在保持对视图的引用，这导致了麻烦，因此当 jQuery 尝试重新绑定事件时它不会这样做。作为一般规则，我永远不会在初始化方法中定义对视图的引用，总是在它之外，这样我可以确保当父方法请求视图的新实例时它被覆盖。

```
home: function () {
    view = new NavigateBar({
        back: "1",
        next: "2"
    });
    $('#view-goes-here').html(view.render().el);
    // and if you really want to be able to reference it
    this.homeView = view;
},
test: function (e) {
    view = new NavigateBar({
        back: "3",
        next: ""
    });
    $('#view-goes-here').html(view.render().el);
    // and if you really want to be able to reference it
    this.homeView = view;
} 
```

更好的方法是始终确保如果定义了视图，则将其销毁，以便

```
home: function () {
    /* create a method on the NavigateBar view to clear anything 
     * that needs clearing, such as model binds or funky events
     */
    this.homeView && this.homeview.destroy(); 
    view = new NavigateBar({
        back: "1",
        next: "2"
    });
    $('#view-goes-here').html(view.render().el);
    this.homeView = view;
}, 
```

# javascript - Google Maps API - 在标记周围切换圆圈？

> ID：10686088
> 
> 赞同：0
> 
> 时间：2012-05-21T13:22:05.390
> 
> 标签：javascript, google-maps, geometry, toggle

我正在尝试显示一个标记数组，单击该标记数组将显示一个信息窗口以及一个带有半径的圆，其大小也是数组的一部分。

我已经显示了标记、信息框和圆圈，但我正在努力切换圆圈。

如果我想让圆圈最初都打开或关闭，我还没有下定决心，我想这取决于我最终得到多少......

这是我到目前为止所拥有的： -

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<title>Google Maps API Tests</title>
<style type="text/css">
html {font-family:Tahoma,verdana,sans-serif; font-size:0.75em;}
p {font-weight:bold;}
</style>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3.6&amp;sensor=false"></script>
<script type="text/javascript">
//<![CDATA[
  function initialize() {

    var myLatlng = new google.maps.LatLng(36.637484, -121.51057);
    var myOptions = {
      zoom: 6,
      center: myLatlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      streetViewControl: true
    }

    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    setMarkers(map, sites);
    infowindow = new google.maps.InfoWindow({
            content: "loading..."
        });

  }

    var sites = [
        ['Google', 37.422117, -122.083856, 'http://www.google.com/', 402336],
        ['Yahoo', 34.030194, -118.47479, 'http://www.yahoo.com/', 201168]
    ];

    function setMarkers(map, markers) {

        for (var i = 0; i < markers.length; i++) {
            var sites = markers[i];
            var siteLatLng = new google.maps.LatLng(sites[1], sites[2]);
            var marker = new google.maps.Marker({
                position: siteLatLng,
                map: map,
                title: sites[0],
                html: '<p>'+sites[0]+'</p><a href="'+sites[3]+'">Web Link</a>'
            });

            var circle = new google.maps.Circle({
                map: map,
                radius: sites[4],
                fillColor: '#12a3eb',
                fillOpacity: 0.15,
                strokeColor: '#0177b3'
            });

            circle.bindTo('center', marker, 'position'); 

            google.maps.event.addListener(marker, "click", function () {
                infowindow.setContent(this.html);
                infowindow.open(map, this);
            });
        }
    }
//]]>
</script>
</head>
<body style="margin:0px; padding:0px;" onload="initialize()">
  <div id="map_canvas" style="width:100%; height:100%"></div>
</body>
</html> 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:34:21.477

`setMap(null)`将删除任何谷歌地图控件的显示。要从地图中删除圆圈，只需使用

```
 circle.setMap(null) 
```

并以不同的半径再次重新渲染圆

```
 cirlce.setMap(map);
  circle.set('radius', new_radius_value * 1000); 
```

# http - 如果 HTTP TRACE 请求有正文怎么办？

> ID：10686090
> 
> 赞同：2
> 
> 时间：2012-05-21T13:22:10.253
> 
> 标签：http

我正在实现一个特殊用途的 HTTP 服务器，并且偶然发现了一个我无法弄清楚 RFC 想要我做什么的场景。客户端不得发送带有正文的 TRACE 请求（参见第 9.8 节）。但是，如果客户端在 TRACE 请求中发送与正文相关的标头（即 Content-Length 或 Transfer-Encoding 标头），我似乎有两个选项可以让服务器运行：

1.  阅读非法正文并忽略它
2.  对待标头的方式与客户端对待 HEAD 方法的响应相同，即作为关于尚未包含的主体的信息，因此假定没有主体。

我在 RFC 中没有看到任何支持这两种解决方案的内容。那么，我应该服用哪个？还有另一种我没见过的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:18:06.863

您阅读正文，然后要么忽略它，要么返回 4xx 状态代码。请参阅[http://trac.tools.ietf.org/wg/httpbis/trac/ticket/19](http://trac.tools.ietf.org/wg/httpbis/trac/ticket/19)。

# php - 如果用户输入错误，如何防止用户登录

> ID：10686092
> 
> 赞同：1
> 
> 时间：2012-05-21T13:22:20.907
> 
> 标签：php, mysql, login, passwords

我不知道如何解决这个错误。如果用户输入错误的输入，我会在用户登录时得到一个空白页面。如果他们输入数据库中不存在的信息。请帮忙 ：）

登录.php

```
<?php 
 include ("base.php");
 include ("passwordchecker.php");
 include ("functions.php");

    $error = "";

    function postInput($htmlName)
    {
        if(isset($_POST[$htmlName]))
        {
            return $_POST[$htmlName];
        }
        return null;
    }

    //check if the user is already login.
            if(isset($_SESSION['userid']))
            {
                //check the database for existing user.
                $usercheck = $mysqli->prepare("SELECT * FROM user WHERE userid = ?");
                $usercheck->bind_param("i",$_SESSION['userid']);
                $usercheck->execute();
                $usercheck->store_result();
                $results = $usercheck->num_rows;
                if($results == 1)
                {
                    redirect("languages.php");
                }
            }

    $loginusername = postInput('username');
    $loginpassword = postInput('password');

    if(isset($_POST['submit']))
    {

        if($loginusername == "" || $loginpassword == "")
        {
            $error = "Please Enter your user name and password";

        }
        else
        {
                //user isnt logged in
                if($stmt = $mysqli->prepare("SELECT userid, password FROM user WHERE username = ? LIMIT 1"))
                {
                    $stmt->bind_param("s",$loginusername);
                    $stmt->execute();
                    $stmt->bind_result($userid,$correctHash);
                    $stmt->fetch();
                    if(ValidatePassword($loginpassword,$correctHash))
                    {
                        $_SESSION['userid'] = $userid;
                        redirect('languages.php');
                    }
                    die();
                    $stmt->close();
                }
                else
                {
                    $error = "You dont exist in Database."
                }
        }
    }

?> 
```

密码检查器.php

```
<?php
    function HashPassword($password)
    {
        $salt = bin2hex(mcrypt_create_iv(32, MCRYPT_DEV_URANDOM));
        $hash = hash("sha256", $salt . $password);
        $final = $salt . $hash;
        return $final;
    }

    function ValidatePassword($password, $correcthash)
    {
        $salt = substr($correcthash, 0, 64);
        $validhash = substr($correcthash, 64, 64);

        $testhash = hash("sha256", $salt . $password);

        return $testhash == $validhash;
    }
?> 
```

函数.php

```
<?php
    function redirect($page)
    {
        header("Location: " . $page);
        exit();
    }
?> 
```

基础.php

```
 <?php
        session_start();

        $dbhost = "localhost";
        $dbname = "login";
        $dbuser = "root";
        $dbpass = "DirectedStudies2012";

    $mysqli = new mysqli($dbhost,$dbuser,$dbpass,$dbname);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:31:48.867

您必须在以下条件中添加一个 else

```
 if(ValidatePassword($loginpassword,$correctHash))
            {
                $_SESSION['userid'] = $userid;
                redirect('languages.php');
            } 
```

IE

```
 if(ValidatePassword($loginpassword,$correctHash))
            {
                $_SESSION['userid'] = $userid;
                redirect('languages.php');
            } else {
                redirect('backtoyourloginscreen.php');
            } 
```

PS: $error = "你不存在于数据库中。" 缺少一个分号；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:37:16.050

尝试使用`header("Location: ".your page)`代替`die()`语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:24:11.530

快速扫描您的代码，您似乎跟踪了一个 $error 变量，但并没有真正输出它。尝试回显它以将其发送给您的客户。

```
echo $error; 
```

# namespaces - 编组后缺少 JAXB 命名空间

> ID：10686094
> 
> 赞同：1
> 
> 时间：2012-05-21T13:22:37.880
> 
> 标签：namespaces, jaxb, marshalling, default

我已经从 XSD 生成了 Java 类，我想从带有前缀命名空间的 JAXB 类中编组

这就是我所拥有的

```
<?xml version="1.0" encoding="UTF-8"?>  
<schema xmlns="http://www.w3.org/2001/XMLSchema"  
targetNamespace="http://www.example.org/event"  
        xmlns:tns="http://www.example.org/event"  
        elementFormDefault="qualified"> 
<element name="Events" type="tns:EventsType"></element>  
<complexType name="EventsType">  
<sequence>  
<element name="Event" type="tns:inputFlowEventType" maxOccurs="unbounded" minOccurs="1"></element>  
</sequence></complexType>  
<complexType name="inputFlowEventType">  
<sequence>  
<element name="DISTRIBUTOR_ID" minOccurs="1" maxOccurs="1">  
<simpleType><restriction base="string"><maxLength value="17"></maxLength></restriction></simpleType>  
</element>  
</sequence>  
</complexType>  
</schema> 
```

我有这个

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>  <Events xmlns="http://www.example.org/event"><Event><DISTRIBUTOR_ID>6</DISTRIBUTOR_ID></Event></Events> 
```

而不是这个

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>  <tns:Events xmlns="http://www.example.org/event">    <tns:Event><tns:DISTRIBUTOR_ID>6</tns:DISTRIBUTOR_ID></tns:Event></tns:Events> 
```

有人可以知道出了什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T15:18:28.720

这两个文档在命名空间限定方面是等价的。第一个指定默认命名空间，第二个声明带有前缀的名称。如果您想控制使用的前缀，答案将取决于您使用的 JAXB 实现。MOXy 将使用在 @XmlSchema 注释中声明的前缀。JAXB RI 有一个 NamespacePrefixMapper 扩展（也受 MOXy 支持）：

*   [http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html](http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html)

# jquery - 在位置 x 时的 CSS 固定位置

> ID：10686101
> 
> 赞同：2
> 
> 时间：2012-05-21T13:23:12.363
> 
> 标签：jquery, html, css, position

我有一个 div 位于页面顶部，就在标题栏的正下方。当用户向下滚动并且栏上升时，我希望它只上升到浏览器窗口的边缘，然后像固定一样停留在那里。

这怎么可能？仅使用 CSS 可行还是我需要 jQuery？我更喜欢 jQuery 的跨浏览器兼容性。

这是我目前使用的简单的 css 代码：

```
#fbLikeDiv
{
    position: fixed;
    top: 95px;
    left: 10px;
} 
```

您还可以查看该站点：www.myskoob.com/postish/ - 它是关于左侧 Facebook 喜欢框，当用户向下滚动时，我想留在浏览器窗口的顶部边缘，但首先去直到那里。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-21T13:27:01.777

我认为这就是您要寻找的：http: [//jsfiddle.net/QuVkV/3/](http://jsfiddle.net/QuVkV/3/)

您确实需要使用一些 jQuery。在上面的例子中，跟随 id="bar" 的 div

这里的html结构：

```
<div id='wrapper'>
    <div id='upper'>This is upper content</div>
    <div id='position-saver'>
        <div id='bar'>This is your facebook like button</div>
    </div>
    <div id='lower'>This is some content lower than the menu bar</div>
</div> 
```

这是CSS：

```
#wrapper {
    width: 100%;
    height: 2000px;
}

#upper {
    width: 100%;
    height: 100px;
}

#position-saver {
    height: 50px;
    width: 100%;
}

#bar {    
    position: static;
    height : 50px;
    width: 100%;
} 
```

这是javascript：

```
$(document).on('scroll', function(){
    if ($('#bar')[0].offsetTop < $(document).scrollTop()){
        $("#bar").css({position: "fixed", top:0});            
    }
    if ($(document).scrollTop() < $("#position-saver")[0].offsetTop){
        $("#bar").css({position: "static", top: 0});           
    }            
}); 
```

# twitter - 推文按钮现在推文 URL

> ID：10686104
> 
> 赞同：0
> 
> 时间：2012-05-21T13:23:20.210
> 
> 标签：twitter

我正在使用[Twitter Tweet Button](https://dev.twitter.com/docs/tweet-button)。

在我的应用程序中，我有以下代码：

```
<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://localhost:3000/foo/bar/foo/bar/213/foo" data-text="I've just done stuff!" data-size="large" data-dnt="true">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

但是，然后我单击按钮，我只看到以下推文：

```
I've just done stuff! 
```

那是怎么回事？我的网址在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:29:10.130

由于反 XSS，您显然不能在 data-url 属性中使用 localhost

来源：[http ://groups.google.com/group/twitter-development-talk/browse_thread/thread/b7d399df4ea2ba75](http://groups.google.com/group/twitter-development-talk/browse_thread/thread/b7d399df4ea2ba75)

这可能是问题？它可以与其他 URL 一起使用吗？

# android - onPostExecute() 的“在 UI 线程上运行”的真正含义是什么？

> ID：10686107
> 
> 赞同：12
> 
> 时间：2012-05-21T13:23:40.867
> 
> 标签：android, android-activity, android-asynctask

考虑在 Activity 中启动的 AsyncTask。如果 Activity 被暂停或销毁会发生什么？onPostExecute() 会运行吗？如果是，将使用哪个 UI 线程？

就是想。

提前谢谢了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-21T13:30:11.250

UI 线程在应用程序的整个可见生命周期中都可用，它可能跨越多个活动的组合。

您在视图中所做的任何更改都必须在 UI 线程上执行，并且*AsyncTask的***onPostExecute**通过在 UI 线程上执行内部指令来反映相同的逻辑。

 *您可以自己使用**runOnUiThread**`Thread`对视图进行更改。但是由于*AsyncTask*有**onPostExecute**方法（它也在 UI 线程上运行），所以你在逻辑上不需要在那里使用**runOnUiThread**。

* * *

**更新**

关于您的问题：是的，即使您的活动被破坏并且该方法将操纵视图，*onPostExecute*仍将被调用（因为它由单独的线程调用），您将简单地得到**强制关闭**错误，因为对您的活动的引用不可用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:38:47.203

它会`onPostExecute()`因为像进程对话框这样的 UI 线程而崩溃。它发生在我身上，我的 Activity 在我的 Asynctask 完成之前销毁。它说“窗口泄漏......”所以，我删除了`onPostExecute()`. 没有更多的崩溃..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T14:07:02.040

请记住调用取消函数以避免 onPause 或 onDestroyed 出现异常。*

# android - 推特。与媒体发布状态

> ID：10686110
> 
> 赞同：2
> 
> 时间：2012-05-21T13:23:46.990
> 
> 标签：android, twitter, scribe

是否可以使用 Scribe-Java 和 twitter POST Url“https://upload.twitter.com/1/statuses/update_with_media.json”上传图像？
[我的消息来源](http://pastebin.com/rwfr5Jyz)
我得到了响应： {"request": "\ / 1 \ / statuses \ / update_with_media.json", "error": "Could not authenticate with OAuth."}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:45:28.287

只是为了帮助其他人看到这个，构建多部分的简单方法是将 httpmime-4.0.1.jar 和 apache-mime4j-0.6.jar 添加到您的路径并执行以下操作。

```
 /* You will have done this bit earlier to authorize the user

    OAuthService service = new ServiceBuilder().provider(TwitterApi.SSL.class).apiKey("[YOUR API KEY]").apiSecret("[YOUR SECRET]").callback("twitter://callback").build();
    Token accessToken = Do you oauth authorization as normal 

    */  

    OAuthRequest request = new OAuthRequest(Verb.POST, "https://upload.twitter.com/1/statuses/update_with_media.json");
    MultipartEntity entity = new MultipartEntity();
    try {

        entity.addPart("status", new StringBody("insert vacuous statement here"));
        entity.addPart("media", new FileBody(new File("/path/of/your/image/file")));

        ByteArrayOutputStream out = new ByteArrayOutputStream();
        entity.writeTo(out);

        request.addPayload(out.toByteArray());
        request.addHeader(entity.getContentType().getName(), entity.getContentType().getValue());

        service.signRequest(accessToken, request);
        Response response = request.send();

        if (response.isSuccessful()) {
            // you're all good
        }

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

这里的权衡当然是将 2 个罐子的大小添加到您的 APK

# playn - 在 ImmediateLayer 中显示大图像

> ID：10686113
> 
> 赞同：1
> 
> 时间：2012-05-21T13:23:53.177
> 
> 标签：playn

截图：http: [//imgur.com/kNASp](http://imgur.com/kNASp)

编辑 - 为了更好地演示此问题，似乎立即图层中的大图像被裁剪为立即图层的大小。

在示例图像中，有两个 ImmediateLayers。左侧尺寸显示的图像大于 ImmediateLayer 的尺寸，并且在旋转*或*平移时显示为剪裁。在右侧，图像的低分辨率版本被放大并显示在相同的位置。未剪辑。

在背景中显示了图像的原始招聘版本，显示其已全部加载，并且仅在 ImmediateLayer 中显示时被剪裁。

所以，不是旋转问题，而是图像可以在 ImmediateLayer 中显示和翻译而不被剪裁的问题吗？

原来的 -

在 PlayN 中，我试图在渲染到剪辑的 ImmediateLayer 时旋转图像。我可以通过在渲染时设置表面的旋转来旋转图像，但这会导致图像被剪切然后旋转。因此，星形图像会在旋转到位之前对其点进行剪裁。

这个旋转代码是否正确并且剪辑错误？

```
surface.save();

surface.rotate(rotation);

surface.drawImage(star, 0, 0);
surface.restore(); 
```

一点背景，使用 ImmediateLayer 的原因是有 2 播放器分屏视图，并排。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:33:17.100

编辑：

你显然做错了什么。我添加了一个通过旋转和平移 trasform 将图像绘制到剪辑的 ImmediateLayer 的示例，它工作得很好。看看[这个例子](https://github.com/threerings/playn/blob/master/tests/core/src/main/java/playn/tests/core/ImmediateTest.java)，希望它能说明你做错了什么。

![旋转和转换图像绘图到剪切层的示例](../Images/1b67d5078f21d556467b959798323d10.png)

原来的：

您可以发布一个屏幕截图来演示该错误吗？

除了定义剪辑区域的 ImmediateLayer 的边界之外，不会发生任何剪辑（您绝对*不*应该旋转 ImmediateLayer 本身）。

因此，是否旋转 Surface 变换然后绘制图像并不重要。如果旋转图像的某些部分超出 ImmediateLayer 的范围，则这些部分将被剪裁。但是直接图层范围内的所有内容都将正常绘制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T07:11:47.740

@samskivert - 运行您的示例代码并将其与您的屏幕截图进行比较我注意到我有完全不同的结果 - 我根本没有剪辑。

将我的项目的 playn 依赖项从 1.2 移至 1.3.1 并因此移至 Lwjgl 解决了该问题：

[http://imgur.com/hqile](http://imgur.com/hqile)

完全相同的代码，错误的依赖关系。感谢您帮助了解问题的根源，并感谢您在 playn 中投入了如此多的好工作！

# c# - 过程或函数“insertcustrec5”需要参数“@tb1”，但未提供该参数

> ID：10686125
> 
> 赞同：-4
> 
> 时间：2012-05-21T13:24:33.900
> 
> 标签：c#, .net

当我单击页面中的保存按钮时，它会执行此操作

```
protected void btnsave_Click(object sender, EventArgs e) 
```

然后它调用`save()`函数。在`save()`函数中它调用存储过程insertcusrec5。一旦它到达存储过程 insertcusrec5，它就会引发错误

> “过程或函数 'insertcustrec5' 需要参数 '@tb1'，但未提供”

但是我提供了..ni 检查了每个参数的值，但这个错误仍在继续发生。

--> 我的存储过程是：

```
ALTER procedure [dbo].[insertcustrec5]
 (
   @RID int,
   @Remarks varchar(MAX),
   @CRDate date,
   @ChallanNo float,
   @Quantity float,
   @tb1 int,
   @Amount float
 )
 As
 INSERT INTO Customer_Receive(ChallanNo, CRDate, RID, Quantity, Remarks,CustID,Amount)
 VALUES     (@ChallanNo,@CRDate,@RID,@Quantity,@Remarks,@tb1,@Amount) 
```

--> 调用存储过程的保存函数是：

```
public void save()
    {

        data.AddParameter("RID", this.rid);
        data.AddParameter("CustID", this.tb1);
        data.AddParameter("Remarks", this.remarks);
        data.AddParameter("CRDate", this.CRDate);
        data.AddParameter("ChallanNo", this.ChallanNo);
        data.AddParameter("Quantity", this.quantity);
        data.ExecuteNonQuery("insertcustrec5"); 
```

--> ExecuteNonQuerry 函数：-

```
public int ExecuteNonQuery(string commandText)
    {
        try
        {
            SqlCommand command = new SqlCommand(commandText);
            command.CommandType = System.Data.CommandType.StoredProcedure;
            this.OpenConnection();
            command.Connection = this.connection;
            command.Parameters.AddRange(cmdParams.ToArray());
            return command.ExecuteNonQuery();
        }
        finally
        {
            this.CloseConnection();
        }
    } 
```

--> 保存按钮点击：-

```
 protected void btnsave_Click(object sender, EventArgs e)
    {
        bllCustomer_Receive receive = new bllCustomer_Receive();
        string datetime = txtcrdate.Text;
        DateTime dt = DateTime.ParseExact(datetime, "d/M/yyyy", null);
        receive.CRDate = dt;
        receive.ChallanNo = txtchallan.Text;
        receive.rid = txtrid.Text;
        receive.quantity = float.Parse(txtquantity.Text);
        receive.remarks = txtremarks.Text;
        tb1.Text = Convert.ToString(drpdwncustID.SelectedItem);
        receive.tb1 = tb1.Text;
        receive.save();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T13:27:00.317

好吧，您没有`@tb1`在代码的以下部分提供参数（正如错误所说）：

```
 data.AddParameter("RID", this.rid);
    data.AddParameter("CustID", this.tb1);
    data.AddParameter("Remarks", this.remarks);
    data.AddParameter("CRDate", this.CRDate);
    data.AddParameter("ChallanNo", this.ChallanNo);
    data.AddParameter("Quantity", this.quantity);
    data.ExecuteNonQuery("insertcustrec5"); 
```

当您使用它时，您也应该添加一行来添加`@amount`参数......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:32:36.137

边写边给sp加参数

```
data.AddParameter("tb1", this.tb1); 
```

代替

```
 data.AddParameter("CustID", this.tb1); 
```

# c++ - C++ UUID 存储为整数

> ID：10686130
> 
> 赞同：2
> 
> 时间：2012-05-21T13:24:44.480
> 
> 标签：c++, linux, uuid

是否可以在 linux 下使用 c++ 将 UUID 转换为 128 位整数。将 UUID 转换为整数后，我需要将 16 字节整数转换为字节数组，以便可以通过 TCP 将其发送到另一台服务器。

据我所知（如果我错了，请纠正我），在 C++ 中处理 16 字节整数没有开箱即用的支持，你能说明一下如何做到这一点吗？如果无法将其作为整数存储和发送，我正在考虑将 uuid 作为字符串发送。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T13:36:57.653

为什么要将其表示为 128 位整数？

UUID 是如何表示的？大概它是一个字符串或已经是一些 16 字节的类型。如果它是一个字符串，那么您可以自己计算 16 字节数组表示，如果它已经是某个 16 字节长类型，那么您可以直接将其视为 16 字节数组。

与往常一样，无论您做什么，都必须确保所有各方都同意网络表示的字节顺序。

* * *

C++ 实现不需要具有 128 位整数类型，但其中一种内置类型可能是 128 位。`long long`也许。或者您的实现可能会提供您可以使用的扩展整数类型。

Clang 和我认为 GCC 都支持 __uint128_t 类型，但不幸的是，不遵循 C++ 对这种类型的扩展整数的要求。但是 128 位算术应该可以工作，因此您应该能够做正常的事情来将 UUID 粘贴到这种类型中，然后将其视为 16 字节数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:34:42.077

要在 C++ 中实现 16 字节整数，您可以查看：
[http ://straymindcough.blogspot.com/2012/01/on-int128t.html](http://straymindcough.blogspot.com/2012/01/on-int128t.html)

至于：“是否可以在 linux 下使用 c++ 将 UUID 转换为 128 位整数”。答案是肯定的。

亲切的问候，
博

# android - RingTonePicker 抛出 SecurityException？

> ID：10686142
> 
> 赞同：1
> 
> 时间：2012-05-21T13:25:09.847
> 
> 标签：android

我的开发者控制台中有一个错误，它说它无法启动`RingTonePickerActivity`，因为我没有`WRITE_SETTINGS`清单中的权限。为什么我需要该权限才能显示`RingTonePicker`？我在几台设备上测试了这个，而清单中没有，而且根本没有问题，所以什么给出了？

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{android/com.android.internal.app.RingtonePickerActivity}:
java.lang.SecurityException: Permission Denial: writing com.android.providers.settings.SettingsProvider uri content://settings/system from pid=24760, uid=10108 requires android.permission.WRITE_SETTINGS
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3683)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.SecurityException: Permission Denial: writing     com.android.providers.settings.SettingsProvider uri content://settings/system from     pid=24760, uid=10108 requires android.permission.WRITE_SETTINGS
at android.os.Parcel.readException(Parcel.java:1322)
at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:160)
at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114)
at android.content.ContentProviderProxy.insert(ContentProviderNative.java:408)
at android.content.ContentResolver.insert(ContentResolver.java:604)
at android.provider.Settings$NameValueTable.putString(Settings.java:576)
at android.provider.Settings$System.putString(Settings.java:772)
at android.media.RingtoneManager.setActualDefaultRingtoneUri(RingtoneManager.java:655)
at android.media.RingtoneManager.setDefaultNotificationToProvider(RingtoneManager.java:764)
at com.android.internal.app.RingtonePickerActivity.onCreate(RingtonePickerActivity.java:166)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:47:44.630

```
public static final String WRITE_SETTINGS 
```

> 自：API 级别 1
> 
> 允许应用程序读取或写入系统设置。常量值：“android.permission.WRITE_SETTINGS”

也许您需要读取系统铃声设置的权限。

# oauth - 如何为 Twitter 授权创建弹出窗口？

> ID：10686144
> 
> 赞同：0
> 
> 时间：2012-05-21T13:25:18.710
> 
> 标签：oauth, twitter, blackberry-playbook, blackberry-webworks

我想创建一个使用 oauth 库链接到 twitter 的 Blackberry Playbook webworks 应用程序。如何使用 Javascript 在应用程序内创建弹出窗口以显示 Twitter 授权页面？

似乎我不能使用 iframe，因为 Twitter 的代码似乎检查它是否从 iframe 运行，从我读过的内容来看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:06:49.210

这似乎是不可能的，但通过[这个问题](http://www.google.com/url?q=http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Has-Anyone-Implemented-an-OAuth-Flow-in-a-Playbook-WebWorks/td-p/951143&sa=D&sntz=1&usg=AFQjCNGCjrNJ2b0qhrwMznhk4wMWrRGZ2A)，我发现了来自[polarmobile](https://github.com/polarmobile/blackberry.polarmobile.childbrowser)的扩展来完成这项工作。还有一个名为[Lemma](http://lemmaforplaybook.com/)的应用程序演示了如何使用它。

# asp.net - HTTP 错误 500.19 - 内部服务器错误”与动态数据

> ID：10686145
> 
> 赞同：1
> 
> 时间：2012-05-21T13:25:26.247
> 
> 标签：asp.net, iis-7, dynamic-data

我有一个简单的动态数据应用程序，它使用表单身份验证作为另一个 Web 应用程序的管理部分。当我在 Visual Studio 中将其作为独立项目运行时，此方法有效。

我已将其部署到应用程序目录中的实时站点，但出现以下错误：

HTTP 错误 500.19 - 内部服务器错误 无法访问请求的页面，因为该页面的相关配置数据无效。

```
Module IIS Web Core
Notification BeginRequest
Handler Not yet determined
Error Code 0x800700b7
Config Error Cannot add duplicate collection entry of type 'add' with unique key attribute 'name' set to 'UrlRoutingHandler'
Config File \?\C:\sites\website1\dd\web.config 
```

配置来源：

```
<add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
<add name="UrlRoutingHandler" preCondition="integratedMode" verb="*" path="UrlRouting.axd" type="System.Web.HttpForbiddenHandler, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
</handlers> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:46:05.040

此错误消息通常表示“位”问题。

您是否从 32 位应用程序池运行 64 位 dll？

这与您仅在 IIS 应用程序池中而不是在 VS 中运行它时才会遇到问题相匹配。

# json - 我怎么能准确地得到这些值

> ID：10686149
> 
> 赞同：0
> 
> 时间：2012-05-21T13:25:36.340
> 
> 标签：json, format, spreadsheet

如果我从 Chrome 控制台日志中得到了这个结果，我怎么能准确地得到这些值？在第一个“：”之后如何获得值？（有时url值中有“：”，我可以过滤吗？？）

[“名称：item1”，“网址：[http](http://www.flickr.com/photos/nemoorange/5013039951/) ://www.flickr.com/photos/nemoorange/5013039951/” ，“标题：网站”，“照片： http: [//farm5.static.flickr.com/4113 /5013039951_3a47ccd509.jpg](http://farm5.static.flickr.com/4113/5013039951_3a47ccd509.jpg) ", " alt: Stanley", " p: 是一个小型概念验证 JavaScript 库，用于放大文档中的 DOM 元素或点。它使用 CSS3 过渡和 2D 变换（缩放）、“平移”、 "transform origin) 对元素实现动画放大"]

它可以转换为 Array 的 JSON 格式吗？{"name":"item1",.....等}

谢谢你的时间^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T22:55:40.520

使用正则表达式在每个“：”第一次出现时拆分每个数组元素就可以了，只要没有一个键像 url 值那样在其中包含冒号。

这将遍历现有的格式错误的数组，用正则表达式拆分它并将键值对分配给新对象。

```
var newObject = {}

var myRegEx = new RegExp("(?<!:.*):");

foreach(var key in myArray){

    var tempArray = myArray[key].split(myRegEx);

    newObject[tempArray[0]] = tempArray[1];

} 
```

注意：.split() 函数会自动为 *before 和 *after split创建数组元素“tempArray[0]”和“tempArray [1 ”。](http://www.jsonexample.com)

使用[jsonexample.com](http://www.jsonexample.com)参考其他方式来形成 JSON 对象

干杯!

# html - 下拉导航

> ID：10686150
> 
> 赞同：1
> 
> 时间：2012-05-21T13:25:44.087
> 
> 标签：html, css

我正在尝试创建一个下拉菜单，其中只有一个下拉菜单被分成列。原因是这个列表太长了，用户必须滚动，所以我试图避免这种情况。当我尝试仅更改该组的宽度时，它会更改所有宽度。我已经尝试过课程和身份证，但没有任何效果。有什么建议么？这是我的代码：

```
<li><a href="en.tests.html">Test Types</a>
<ul>
<li><a href="">Analytical Lab</a></li>
<li><a href="">Charpy Testing</a></li>
<li><a href="">Chemical Testing</a></li>
<li><a href="">Composite Testing</a></li>
<li><a href="">Corrosion Testing</a></li>
<li><a href="en.creep.html">Creep Testing</a></li>
<li><a href="">CTOD Testing</a></li>
<li><a href="">Fatigue Testing</a></li>
<li><a href="">Fastener Testing</a></li>
<li><a href="">Fracture Toughness</a></li>
<li><a href="">Heat Treat</a></li>
</ul> 
```

CSS：

```
#nav ul li ul {
    width: 170px;
    } 
```

当我更改此宽度时，它会创建我想要的菜单，但会更改所有导航。我怎样才能只选择组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:33:57.977

您应该使用类来区分组，然后仅将 CSS 规则应用于所需的类：

```
<ul>
<li class="column1">
 <ul><li><a href="">Item1</a></li>
     <li><a href="">Item2</a></li>
 </ul>
</li>
<li class="column2>
 <ul><li><a href="">Item3</a></li>
     <li><a href="">Item4</a></li>
 </ul>
</li>
<li class="column3>
 <ul><li><a href="">Item5</a></li>
     <li><a href="">Item6</a></li>
 </ul>
</li> 
```

然后像这样应用 CSS（对于第二列）：

```
#nav ul li.column2 ul {
    width: 170px;
} 
```

您的问题是 CSS 规则过于笼统，您需要更具体，这就是您需要为列添加类的原因。

# ios - 应用程序未通过协同设计验证 (-19011)

> ID：10686153
> 
> 赞同：1
> 
> 时间：2012-05-21T13:25:58.337
> 
> 标签：ios, code-signing

我在归档我的应用程序以上传到 iTunes Connect 时遇到了这个问题。

我已经使用 Xcode 的管理器上传成功，状态为：*Waiting For Review*。

我想知道如何解决这个警告。另外，有了这个警告，我的应用程序会通过审核流程吗？

关于这个特定问题有很多答案，但没有一个可以解决我的问题。

先感谢您！

开发环境：Xcode 4.3.2 和 Mac OS X 10.7.4

```
Validate /Users/jxdwinter/Library/Developer/Xcode/DerivedData/StarHopeFundingApprovalSystem-azmlbbmdkygsuqbxaoguxikbbnfo/Build/Intermediates/ArchiveIntermediates/StarHopeFundingApprovalSystem/InstallationBuildProductsLocation/Applications/StarHopeFundingApprovalSystem.app
cd /Users/jxdwinter/Desktop/StarHopeFundingApprovalSystem
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
setenv PRODUCT_TYPE com.apple.product-type.application
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/Validation /Users/jxdwinter/Library/Developer/Xcode/DerivedData/StarHopeFundingApprovalSystem-azmlbbmdkygsuqbxaoguxikbbnfo/Build/Intermediates/ArchiveIntermediates/StarHopeFundingApprovalSystem/InstallationBuildProductsLocation/Applications/StarHopeFundingApprovalSystem.app

warning: Application failed codesign verification.  The signature was invalid, contains disallowed entitlements, or it was not signed with an iPhone Distribution Certificate. (-19011)
Executable=/Users/jxdwinter/Library/Developer/Xcode/DerivedData/StarHopeFundingApprovalSystem-azmlbbmdkygsuqbxaoguxikbbnfo/Build/Intermediates/ArchiveIntermediates/StarHopeFundingApprovalSystem/InstallationBuildProductsLocation/Applications/StarHopeFundingApprovalSystem.app/StarHopeFundingApprovalSystem
AssertMacros: message,  file: codesign_wrapper.c, line: 554
AssertMacros: profile,  file: codesign_wrapper.c, line: 918
codesign_wrapper-0.7.10: Failed to load provision profile from: /Users/jxdwinter/Library/Developer/Xcode/DerivedData/StarHopeFundingApprovalSystem-azmlbbmdkygsuqbxaoguxikbbnfo/Build/Intermediates/ArchiveIntermediates/StarHopeFundingApprovalSystem/InstallationBuildProductsLocation/Applications/StarHopeFundingApprovalSy- (null) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:32:18.500

确切的问题也发生在我身上 2 周前我的应用程序被拒绝了，因为它未能在审核时初始化我必须重新创建我的分发证书并在它被接受之前重新提交。确保从 Xcode 的管理器窗口中删除旧证书并单击刷新，以便从 iTunes 连接自动检索证书。

更新：这只是发生在我现在通过缩短项目方案标题并删除标题中的所有空格来修复的第二个应用程序。在你做任何其他事情之前尝试这个简单的措施。

更新：该方案在 Xcode 的左上角单击它 > 编辑方案 > 重复方案 > 将副本的名称更改为更短的名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:10:22.000

```
Application failed codesign verification.  The signature was invalid, contains disallowed entitlements, or it was not signed with an iPhone Distribution Certificate. 
```

这意味着，您的发行版有问题。证书。尝试重新创建它。还尝试在项目和供应门户、配置文件中删除或修复它们。检查您是否正确签署了您的发布/分发版本。

# regex - 在等号后替换该行上的所有内容

> ID：10686156
> 
> 赞同：1
> 
> 时间：2012-05-21T13:26:04.543
> 
> 标签：regex, replace, vb.net-2010

在 VB 2010 中使用它：

```
Imports System.Text.RegularExpressions

Public Class Form1
    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim lines() As String = IO.File.ReadAllLines("filename.txt")
        Dim foundIndex As Integer = Array.FindIndex(lines, Function(l) l.StartsWith(TextBox1.Text)) 'assuming TextBox1.Text = the part of the line before the =
        lines(foundIndex) = Regex.Replace(lines(foundIndex), "(?<=" & TextBox1.Text & "=)\d+", TextBox2.Text) 'TextBox2.Text is the replacement number
        Stop
        'to rewrite the file:
        'IO.File.WriteAllLines("filename.txt", lines)
    End Sub
End Class 
```

...但是每次我保存文本文件时，它都会在等号后添加数字。

我希望它在等号之后替换该行上的所有内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:45:56.820

我执行了你的代码，它没有改变：

```
Sub Main
     Dim lines() As String = IO.File.ReadAllLines("c:\temp\filename.txt")
     lines.Dump()
        Dim foundIndex As Integer = Array.FindIndex(lines, Function(l) l.StartsWith("blah")) 'assuming TextBox1.Text = the part of the line before the =
        foundIndex.Dump()
        lines(foundIndex) = Regex.Replace(lines(foundIndex), "(?<=blah=)[\d.e+]+", "replaced") 'TextBox2.Text is the replacement number
        IO.File.WriteAllLines("c:\temp\filename.txt", lines)
End Sub 
```

如果文件是

```
test=456
blah=456
blah=just 
```

它会变成

```
test=456
blah=replaced
blah=just 
```

这是你想要的不是吗？

**更新 1**

我换了

```
"(?<=blah=)\d+" 
```

和

```
"(?<=blah=)[\d.]+" 
```

**更新 2**

关于像“1e+007”这样的字符串的问题。与“=”之后的字符串匹配的部分当前是 [\d.]

还记得小数点像 3.25 这样的数字有问题吗？通过添加“。”解决了这个问题。到字符类 [\d] 所以它变成 [\d.] 现在任何是数字 "\d" 和 "." 会匹配。

新问题以同样的方式解决。现在“e”和“+”也应该匹配。得到它？所以字符类现在变成 [\d.e+]

试一试，让我知道进展如何。

现在也应该清楚如何修改正则表达式以匹配“BGS_LOGO.BIK”如果你能解决你明白发生了什么。

# jquery - 如何在 JQuery 蒙版区域中调整图像/div 的“缩放”？

> ID：10686159
> 
> 赞同：3
> 
> 时间：2012-05-21T13:26:15.073
> 
> 标签：jquery, jquery-ui, zooming, jquery-ui-draggable

我使用在 StackExchange 上找到的一些技巧创建了这篇[JS Fiddle 。](http://jsfiddle.net/smlombardi/WXBga/)它工作正常，但我想创建一个滑块或按钮来调整可拖动 div 上的“缩放”，从您在此处看到的最大值降至 100%。我似乎无法用谷歌找到任何方法，所有方法都不适用于这里。

你会注意到它不仅仅是一个图像，那里也会有 DIV（我的例子中的黄色框）。

这是我正在寻找的效果的[Flash 版本。](http://www.finehomebuilding.com/pages/the-inspector-thirtysix.asp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:14:50.540

你可以看看这个插件： http: [//lab.gianiaz.com/jquery/gzoom/](http://lab.gianiaz.com/jquery/gzoom/) 它似乎有你需要的所有功能。

# powershell - 将当前用户添加到管理员组

> ID：10686160
> 
> 赞同：2
> 
> 时间：2012-05-21T13:26:16.677
> 
> 标签：powershell, powershell-2.0

我正在尝试获取当前用户并将其添加到管理员组。到目前为止，我能够获取当前用户并将它们传递给管理员添加，但我不确定如何使用管理员凭据调用它以实际添加它们。

```
$user = [Environment]::Username
$group = [ADSI]("WinNT://"+$env:COMPUTERNAME+"/administrators,group")
$group.add("WinNT://$env:USERDOMAIN/$User,user") 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T13:03:19.833

这是工作解决方案：

```
$Cred = Get-Credential ("$env:COMPUTERNAME\Administrator")
$User = $env:USERNAME
$Domain = $env:USERDOMAIN
Invoke-Command -Computername localhost -Cred $Cred -ScriptBlock {
    param ($User, $Domain, $ComputerName)
    $Group = [ADSI]("WinNT://$ComputerName/Administrators,Group")
    $Group.add("WinNT://$Domain/$User,user")
} -ArgumentList $User, $Domain, $ENV:COMPUTERNAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T15:24:31.457

我不确定这是否是最好的方法，因为要将 ADSI 与备用凭据一起使用 - 您需要以纯文本形式发送它们：

```
$Local = New-Object -TypeName ADSI -ArgumentList @(
    "WinNT://$env:COMPUTERNAME/Administrators,group",
    $AdminUser,
    $AdminPass                           
)

$Local.Add("WinNT://$env:USERDOMAIN/$env:USERNAME") 
```

用户名通常采用 domain\user（或 $env:ComputerName\User）的形式。

换一种方式做不是更好吗？从登录的用户帐户检查并添加此帐户？到达那里的方法很少（包括检查 explorer.exe 进程的所有者等技巧）。

HTH 巴特克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-10T17:07:10.417

这可能不适用于当前用户，但对于一般用户或组，您可以使用 Powershell Remoting (WinRM) 和[Invoke-Command](http://technet.microsoft.com/en-us/library/hh849719.aspx)和 net.exe 程序将用户作为管理员添加到多台计算机：

```
icm -ScriptBlock {& "$env:SystemRoot\system32\net.exe" localgroup Administrators /add AccountName} -ComputerName server1,server2,server3 
```

其中**AccountName**是 AD 用户或组，**Server1、Server2、Server3**是您要在其上运行脚本块的计算机列表。这不适用于当前用户，因为您必须是管理员才能使用 WinRM，但当您需要将另一个用户或组作为管理员添加到服务器时，它会有所帮助。

如果您没有启用 WinRM，您可以使用[PSEXEC](http://technet.microsoft.com/en-us/sysinternals/bb897553%28v=msdn.10%29.aspx)远程启用它

> psexec -s \Server1 cmd /c "winrm quickconfig -quiet"

# python - 在 Django 模板中旋转（行/列转置）

> ID：10686161
> 
> 赞同：3
> 
> 时间：2012-05-21T13:26:17.840
> 
> 标签：python, django, templates, orm, pivot

我需要在 django 模板中进行旋转（行列转置），我很确定 ORM 无法处理它。是否有任何内置的模板标签，如`regroup`，可以照顾枢轴。

下面正是我需要的？

```
select * from exams;

 +------+------+------+-------+
| pkey | name | exam | score |
+------+------+------+-------+
|    1 | Bob  |    1 |    75 |
|    2 | Bob  |    2 |    77 |
|    3 | Bob  |    3 |    78 |
|    4 | Bob  |    4 |    80 |
|    5 | Sue  |    1 |    90 |
|    6 | Sue  |    2 |    97 |
|    7 | Sue  |    3 |    98 |
|    8 | Sue  |    4 |    99 |
+------+------+------+-------+ 
```

如下所列

```
+------+-------+-------+-------+-------+
| name | exam1 | exam2 | exam3 | exam4 |
+------+-------+-------+-------+-------+
| Bob  |    75 |    77 |    78 |    80 |
| Sue  |    90 |    97 |    98 |    99 |
+------+-------+-------+-------+-------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:03:30.590

这个怎么样？

在你的意见中.py ...

```
exams = Exam.objects.all() 
transposed = {}

for exam in exams:
    transposed.setdefault(exam['name'], {}).update(
                        {'exam%s' % exam['exam']: exam['score']}) 
```

在您的模板中...

```
<table>
  <tr><th>name</th>   ...   </tr>
  {% for name, scores in transposed.items %}
    <tr><td>name</td><td>scores.exam1</td><td>scores.exam2</td>
        <td>scores.exam3</td><td>scores.exam4</td></tr>
  {% endfor %}
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T14:05:54.717

您是否考虑过使用[pandas 之](http://pandas.pydata.org/)类的东西？它提供了一个 DataFrame 对象，为您提供 Python 中的数据透视功能。您可以根据您的需要在我查看或模型中使用它。举个简单的例子，试着看看[这个问题](https://stackoverflow.com/questions/9962822/pandas-pivot-table-on-date)

# coq - coq 中的存在实例化和泛化

> ID：10686164
> 
> 赞同：10
> 
> 时间：2012-05-21T13:26:41.967
> 
> 标签：coq

有人可以给我一个简单的 Coq 中存在实例化和存在泛化的例子吗？当我想证明，使用的一些`exists x, P`在哪里时，我经常想命名（例如），并操纵 P。这可以是 Coq 中的一个吗？`P``Prop``x``x``x0`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T22:46:14.013

如果你要直接证明存在而不是通过引理，你可以使用`[eapply](https://coq.inria.fr/refman/Reference-Manual010.html#eapply) ex_intro`. 这引入了一个存在变量（书面`?42`）。然后，您可以操纵该术语。要完成证明，您最终需要提供一种方法来为该变量构造一个值。您可以使用该[`instantiate`](https://coq.inria.fr/refman/Reference-Manual010.html#instantiate)策略显式执行此操作，也可以通过诸如`eauto`.

请注意，使用存在变量通常很麻烦。许多策略假设所有术语都被实例化，并且可能将存在主义隐藏在子目标中；`Qed`只有在告诉您“错误：尝试保存不完整的证明”时，您才会发现。当您计划尽快实例化它们时，您应该只使用存在变量。

这是一个愚蠢的例子，说明了`eapply`.

```
Goal exists x, 1 + x = 3.
Proof.                        (* ⊢ exists x, 1 + x = 3 *)
  eapply ex_intro.            (* ⊢ 1 + ?42 = 3 *)
  simpl.                      (* ⊢ S ?42 = 3 *)
  apply f_equal.              (* ⊢ ?42 = 2 *)
  reflexivity.                (* proof completed *)
Qed. 
```

# wordpress - Wordpress：the_content 过滤器杀死画廊简码

> ID：10686166
> 
> 赞同：2
> 
> 时间：2012-05-21T13:26:47.697
> 
> 标签：wordpress, plugins, filter, shortcode

我的 the_content 过滤器杀死了画廊短代码，我不知道问题出在哪里......我可以添加空白 the_content 过滤器和画廊从内容中消失，只有`[gallery]`文本。我正在使用 the_content 过滤器：

```
function test($data){
    echo $data;
}
add_filter('the_content', 'test'); 
```

任何建议如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:49:07.353

这是一个常见的错误，您只需要返回信息以继续应用新过滤器，因此请更改此函数：

```
function test($data){
    //apply here any content modification then return new content
    return $data;
}
add_filter('the_content', 'test'); 
```

您可以在以下网址获得更多信息：[http ://codex.wordpress.org/Plugin_API/Filter_Reference/the_content](http://codex.wordpress.org/Plugin_API/Filter_Reference/the_content)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T08:14:19.650

您可以在 do_shortcode() 中传递修改后的内容，以在对内容进行处理后保持短代码功能正常工作。

```
add_filter('the_content','your_function');
function your_function($content)
{   
    $content = get_the_content();
    $content = ;// Add your own stuff
    $content = do_shortcode($content);
return $content;    
} 
```

# android-ndk - 在 NDK 中包含库时出错

> ID：10686168
> 
> 赞同：2
> 
> 时间：2012-05-21T13:27:01.030
> 
> 标签：android-ndk, shared-libraries

我的项目/jni 文件夹中有以下代码作为我的 Android.mk。文件夹 libA 在 project/jni 中，它有一个 Android.mk。我在 jni/Android.mk 中包含了 libA

jni/Android.mk：

```
LOCAL_PATH := $(call my-dir) 
include $(LOCAL_PATH)/libA/Android.mk 
include $(CLEAR_VARS)
LOCAL_MODULE    := hello-jni
LOCAL_SRC_FILES := hello-jni.c
include $(BUILD_SHARED_LIBRARY) 
```

我收到这个错误

```
jni/Android.mk:16: jni: Permission denied
jni/Android.mk:16: /libA/Android.mk: No such file or directory
make: *** No rule to make target `/libA/Android.mk'.  Stop. 
```

我尝试了这个给出的解决方案： [No rule to make target NDK](https://stackoverflow.com/questions/4585591/no-rule-to-make-target-ndk)。但同样的错误再次出现。我无法弄清楚为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:14:25.047

在做了一些研究而不是弄乱不同目录中的makefile之后，我将库的源代码放在/jni中并从/jni/Android.mk编译它，问题就解决了。我想这是最简单的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:07:44.470

Makefile 是一件棘手的事情。当您调用子目录等时， my-dir 会更改。但是您实际上可以在不将源代码放在 /jni 文件中的情况下解决它。

```
MY_PATH = $(call my-dir)
LOCAL_PATH = $(MY_PATH) 
```

在任何明确的变量之前调用第二个语句。完毕！

# php - 如何使用 gammu/wammu 在短信中添加换行符

> ID：10686170
> 
> 赞同：1
> 
> 时间：2012-05-21T13:27:12.890
> 
> 标签：php, sms, sms-gateway, gammu

我在 PHP 中制作了一个自定义脚本，我正在使用 gammu/wammu 发送短信，但我无法弄清楚如何在短信中添加换行符。

我努力了

*   `\n`
*   `\r`
*   `\t`
*   `0x0a`
*   `0x0d`
*   `&10;`

但这些都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:16:37.783

你试过`\r\n`吗？在我看来，SMS 既需要回车又需要换行。我看到的另一个地方说使用`%0a%0d`，这可能有效，但似乎是他们的服务而不是一切。不过我会试一试。无论哪种方式，您都需要确保将`0x0A`and `0x0D`（两个十六进制字符）传递给发送 SMS 的服务。

看到[这里](http://blog.mobivity.com/?p=147)我提到的那个网站`%0a%0d`，它也有一个 SMS 字符集的图表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T14:44:00.750

Even though this question was asked ages ago, i thought i might add this as a reference.

Through my testing i found that it depends on the quotes you use. Use " (double quotes) instead of single for it to format the message properly and use \n or \r.

Hope this helps.

Cheers :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T14:32:09.053

我也不能让它在 gammu-smsd 中工作，我真的需要能够在短信中发送一个真正的换行字节码。我已经用谷歌搜索了几天，搜索了 gammu 代码库。我不知道它是否/在哪里被困，但无论我如何进入我的 sqlite3 gammu-smsd，它不是在另一端出现的换行符（machine2machine sms）。

我不需要 CR/LF，我只需要在可变字符串模板之后发送带有 \n 的模板，在基于 sms 的跟踪器中使用它

更新，我想出了一种让它发送我想要的东西的方法。因为我使用的是带有 gammu 的 sqlite3 数据库，所以这个小 PHP 程序让我将消息发送到移动资产并在那里被接受：

```
$sms_template=<<<EOD
insert into outbox ( TextDecoded , DestinationNumber, DeliveryReport, CreatorID) values ('%s','%s','yes','auto');
EOD;
$number=1243456;
$terminator=sprintf("%s",chr(10));
$db = new SQLite3("/var/spool/gammu/smsd.sqlite");
$sms='SRV=12171%s';
$sql=sprintf($sms_template, sprintf($sms, $terminator), $number);
$db->exec($sql); 
```

这实际上将短信很好地存储在发件箱中，并且真正的换行符到达目的地。真的希望这可以帮助某人。此代码已从私有内容中剥离，可能无法完全按照显示的方式工作，但我使用了类似的脚本。

格伦

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-18T21:16:33.430

答案可能很晚，但作为对我来说非常有用的参考：

```
echo -e "Hello\nWorld" | gammu .... 
```

# python - Sublime text 2：通过插件突出显示/着色一行

> ID：10686172
> 
> 赞同：5
> 
> 时间：2012-05-21T13:27:15.497
> 
> 标签：python, plugins, sublimetext2

我正在尝试创建一个插件，我需要在其中对整行（不是文本）进行*着色/突出显示。*

例如，如果我做类似的事情：

```
 for region in self.view.sel():
        if region.empty():
            line = self.view.line(region)
            self.view.add_regions('put-some-bg-color', [line], 'keyword', 'bookmark', sublime.DRAW_OUTLINED) 
```

这只会在文本上放置一个*大纲*，直到换行符 (\n)。

我想在整行中添加一个背景颜色，就像“ **highlight_line** ”首选项一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-28T14:38:54.847

有可能的。您应该能够像这样画一条线：

```
region = view.text_point(line_number, 0)
line = self.view.line(region)
self.view.add_regions(...) 
```

你可以看看我创建的插件[Diffy 。](https://github.com/zsong/diffy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:06:10.393

我发现目前这是不可能的，在[sublimetext 论坛回复](http://www.sublimetext.com/forum/viewtopic.php?f=2&t=2256&hilit=highlight%20line&start=10#p10129)中，站点管理员回答了[问题](http://www.sublimetext.com/forum/viewtopic.php?f=2&t=2256#p10112)。

# asp.net-mvc-3 - 如何创建具有点“。”的 MVC3 路由 在里面

> ID：10686175
> 
> 赞同：0
> 
> 时间：2012-05-21T13:27:24.233
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

如何使用带有点的静态 url 指定路由。

```
routes.MapRoute( "RouteForContentFolder", // Route name 
"Content/PDF/ABC.pdf", // URL with parameters 
new { controller = "User", action = "GetPdf"}// Parameter defaults 
); 
```

如果我指定此路线，它会直接打开 PDF 文件，而无需通过控制器和操作。

我猜 ABC.pdf 中的点是问题所在。

谁能告诉我如何指定点“。” 在静态网址中。

我希望此路由仅在传入 url 为

[http://www.domainname.com/Content/PDF/ABC.pdf](http://www.domainname.com/Content/PDF/ABC.pdf)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:32:16.113

像往常一样路由到您的控制器，然后让您的控制器返回 pdf。

有一个资源的固定路由不是很可扩展，想象一下如果你有两个或 10 个资源，要维护多少路由。

# java - 将 long 转换为两个 int，反之亦然

> ID：10686178
> 
> 赞同：23
> 
> 时间：2012-05-21T13:27:29.427
> 
> 标签：java, int, long-integer

如何将两个 32 位整数 ( `int`) 转换为一个 64 位`long`，反之亦然？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-26T20:33:23.007

```
long c = (long)a << 32 | b & 0xFFFFFFFFL;
int aBack = (int)(c >> 32);
int bBack = (int)c; 
```

在 Java 中，您不需要那么多括号，也不需要对反向计算进行任何屏蔽。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T13:28:56.410

整数到多头：

```
long c = ((long)a << 32) | ((long)b & 0xFFFFFFFFL); 
```

我将把它作为练习留给读者执行反向计算。但提示是；使用更多位移位和[位掩码](http://en.wikipedia.org/wiki/Bit_mask)。

（根据 T. Murdock 的评论编辑）

# function - 自动完成 ajax g.nodename 未定义

> ID：10686182
> 
> 赞同：2
> 
> 时间：2012-05-21T13:27:46.443
> 
> 标签：function, jquery-autocomplete

我是新来的，我在使用 ajax 自动完成时遇到了问题，我在 Firebug（在 Firefox 中）遇到了这个错误：

> g.nodeName 未定义
> c=f.valHooks[g.type]||f.valHooks[g.nodeName.toLowerCase()];
> jquery....min.js (linha 977)

在 Chrome 中：

> 未捕获的类型错误：无法调用未定义 jquery-1.7.2.min.js:977
> f.fn.extend.val jquery-1.7.2.min.js:977
> $.autocomplete.source novo:77
> a 的方法“toLowerCase”。 widget._search jquery-ui-1.8.18.custom.min.js:127
> a.widget.search jquery-ui-1.8.18.custom.min.js:127
> （匿名函数）

有人可以帮我吗，我正在使用 jQuery 1.7.2 分钟完成，我按照本教程[http://www.jensbits.com/2011/08/24/using-jquery-autocomplete-when-remote- source-json-does-not-contain-label-or-value-fields/](http://www.jensbits.com/2011/08/24/using-jquery-autocomplete-when-remote-source-json-does-not-contain-label-or-value-fields/)

我的 json 源代码返回上面的代码：

```
[{"id":"1","campo":"[1] Empresa Tal"},{"id":"2","campo":"[2] Outra Empresa Tal"},{"id":"3","campo":"[3] Mais Outra Empresa"}] 
```

我的javascript函数：

```
 $('#accadempresa').autocomplete({
        source: function(request, response) {
            $.ajax({
                url: '/ajax.php?action=available&orm=cadempresa&campo=razsoc&valor=' + $(this).val(),
                dataType: "json",
                data: {term: request.term},
                success: function(data) {
                    response($.map(data, function(item) {
                        return {
                            id: item.id,
                            campo: item.campo
                        };
                    }));
                }
            });
        },
        minLength: 2,
        select: function(event, ui) {
            alert('ae');
            //$('#state_id').val(ui.item.id);
            //$('#abbrev').val(ui.item.abbrev);
        }

    }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T06:34:48.030

您好先生，我认为您收到此错误是因为您使用的是 $(this).val(); 将该代码替换为您的 id $(your element id).val()。

```
$('#accadempresa').autocomplete({
        source: function(request, response) {
            $.ajax({
                url: '/ajax.php?action=available&orm=cadempresa&campo=razsoc&valor=' + $(elementid).val(),
                dataType: "json",
                data: {term: request.term},
                success: function(data) {
                    response($.map(data, function(item) {
                        return {
                            id: item.id,
                            campo: item.campo
                        };
                    }));
                }
            });
        },
        minLength: 2,
        select: function(event, ui) {
            alert('ae');
            //$('#state_id').val(ui.item.id);
            //$('#abbrev').val(ui.item.abbrev);
        }

    }); 
```

# vim - 管道 Vim 缓冲区到标准输出

> ID：10686183
> 
> 赞同：22
> 
> 时间：2012-05-21T13:27:47.080
> 
> 标签：vim

我想在管道中间使用 Vim。这篇[现有的帖子](https://stackoverflow.com/questions/6309587/call-up-an-editor-vim-from-a-python-script)看起来像我想做的，除了我希望在没有 Python 帮助的情况下做这件事——只用 bash。[它有帮助，环境是 Android 上终端 IDE 应用程序中的 bash shell。]

拜托，我知道如何*通过*Vim*内部*的命令来传输缓冲区。这很好，但不是我想要的。我想退出 Vim 并将活动缓冲区传递给标准输出。

FWIW，我也知道如何将另一个命令作为输入传递给 Vim。再说一次，这不是我想要达到的目的。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-21T14:08:05.977

看看`vipe`哪个是[`moreutils`](http://joeyh.name/code/moreutils/). 它允许您将任何编辑器用作管道的一部分。

```
 ls -al | vipe | less 
```

要使用它，`vim`只需确保将其设置为您`bashrc`或`cshrc`您使用的任何 shell 中的默认编辑器。

```
 EDITOR=vim 
```

更新：如果你想要一个`bash`唯一的解决方案，你可以使用这样的脚本

```
 #!/bin/bash
 # create temporary file
 TMPFILE=`mktemp /tmp/vipe.bashXXXXXXXX`
 cat > ${TMPFILE}
 vim ${TMPFILE} < /dev/tty > /dev/tty
 cat ${TMPFILE}
 rm ${TMPFILE} 
```

如需更便携的版本，请更换

```
 vim ${TMPFILE} 
```

和

```
 ${EDITOR} ${TMPFILE} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-17T14:19:12.307

要将缓冲区打印到 shell 标准输出，`vim`需要以 Ex 模式启动，否则它将以“正常”方式打开自己的窗口并在退出时清除任何输出缓冲区。

这是最简单的工作示例：

```
$ echo foo | vim +%p -escq /dev/stdin
foo 
```

这相当于：

```
$ echo foo | vim -es '+%print' '+:q!' /dev/stdin
foo 
```

^(需要指定标准输入的特殊文件描述符 ( `/dev/stdin`) 以防止出现额外的烦人消息。)

以下是一些解析字符串的示例：

```
$ echo This is example. | vim '+s/example/test/g' '+%p' -escq! /dev/stdin
This is test.
$ echo This is example. | vim - '+s/example/test/g' '+%p' -escq!
Vim: Reading from stdin...
This is test. 
```

* * *

有关的：

*   [如何以非交互方式编辑文件（例如在管道中）？](https://vi.stackexchange.com/questions/788/how-to-edit-files-non-interactively-e-g-in-pipeline)在 Vim SE
*   [如何将缓冲区内容写入标准输出？](https://stackoverflow.com/questions/3219479/how-to-write-buffer-content-to-stdout)在stackoverflow SE

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-21T14:11:24.940

您不能简单地将 vim 放在管道中，因为这样 Vim 无法显示其 UI。

```
ls | vim - | more # Does not work 
```

解决此问题的一种方法是`gvim -f -`在管道内部使用，因为它在单独的窗口中打开。您需要通过`:w >> /dev/stdout`然后写入文件`:quit!`。

或者（并且是仅在控制台的非图形环境中的唯一方法），您可以编写自己的脚本/函数`vimAndMore`，该脚本/函数将应该在管道中跟随 vim 的命令作为参数，如下所示：

```
vimAndMore()
{
    TMPFILE=/tmp/pipecontents

    # Slurp stdin into the temp file.
    cat - > "$TMPFILE" || exit $?

    # Reconnect stdin to the terminal, so that Vim doesn't complain with "Warning:
    # Input is not from a terminal", and the terminal is kept intact.
    exec 0</dev/tty

    # Launch the editor.
    "${EDITOR:-vim}" "$TMPFILE" || exit $?

    # Carry on with the pipe.
    cat "$TMPFILE" | exec "$@"

    rm "$TMPFILE"
} 
```

并将管道更改为：

```
ls | vimAndMore | more 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-21T14:07:03.270

根据我非常有限的经验，不可能让 Vim 写入`stdout`. 我认为你不能轻易地将 Vim 放入管道中。

你可以试试`vipe`这个[包](http://joeyh.name/code/moreutils/)中的命令。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T13:50:55.410

```
> ls -1 fred*.c | vim - 
```

将导致 Vim 打开一个包含文件列表的未命名文件`fred*`

也许我误解了你的问题......

替代解释：

请参阅此[页面](http://vim.wikia.com/wiki/Send_buffer_to_interpreter_in_a_new_xterm)，该页面描述了一种技术

> 在不保存当前缓冲区的情况下，您希望将其内容发送到解释器（python、scheme 等），并且希望该解释器在新生成的 xterm 中运行。一个新的 xterm 窗口很有用，因为在 Vim 中运行 shell 不允许同时检查程序输出和代码缓冲区，而且 Vim 的 shell 在几个方面很弱。

# html - 使用 CSS 创建 PDF - 未正确设置正文高度

> ID：10686185
> 
> 赞同：0
> 
> 时间：2012-05-21T13:27:57.387
> 
> 标签：html, css, printing, background-image

我正在尝试使用[Snappy PDF 生成 PDF](https://github.com/knplabs/snappy)。它工作得很好，除了我不能指定每页的高度。我有可变的内容长度，所以我不能说正文需要完全正确`height: x inches;`当前背景 URL 设置为`repeat-y`但对于在自然分页符之前发生分页符的情况，背景图像被剪裁并在下一页继续. 请参阅下面的示例。

这是第一个分页符： ![第一个分页符](../Images/650600b3c59a61361f039132a6eea88a.png) 这是第二个分页符。请注意，即使背景图像是 A4 纸的高度（PDF 生成器也设置为使用该纸），它们也会出现在不同的点。 ![第二分页符](../Images/72aecc2dea391b96da0ec3cf7a4a3be6.png)

有没有办法确保背景图像正好是 A4 纸的高度，而不管该页面上的分页符发生在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:30:25.143

我设法解决了这个问题。因为它是为固定尺寸设计的，所以我绝对定位了所有内容，而不是背景图像，我将图像放在文本的其余部分后面，但在 HTML 中。

不理想，但它解决了一个问题。

不过，分页符已成为一个更大的问题，我不得不手动计算它们，然后强制分页符。

# core-text - CTFramesetterSuggestFrameSizeWithConstraints 不限制结果以约束大小

> ID：10686188
> 
> 赞同：0
> 
> 时间：2012-05-21T13:28:11.247
> 
> 标签：core-text

我使用 CTFramesetterSuggestFrameSizeWithConstraints 函数来定义大小，我的属性字符串将需要，但我得到的高度比它应该的要小，宽度也比 constrainSize.width 参数大。这是我的代码：

```
CTTextAlignment textAlignment = kCTLeftTextAlignment;
CTLineBreakMode lineBreakMode = kCTLineBreakByWordWrapping;

CTParagraphStyleSetting paragraphSettings[] = {
    {
        kCTParagraphStyleSpecifierAlignment,
        sizeof(textAlignment),
        &textAlignment
    },
    {
        kCTParagraphStyleSpecifierLineBreakMode,
        sizeof(lineBreakMode),
        &lineBreakMode
    }  
};

CTParagraphStyleRef paragraphStyle = CTParagraphStyleCreate(paragraphSettings, sizeof(paragraphSettings) / sizeof(paragraphSettings[0]));

NSMutableAttributedString *attrString = [[[NSMutableAttributedString alloc] initWithString:[authorString stringByAppendingFormat:@" %@", bodyText]] autorelease];

CTFontRef ctfontAuthor = CTFontCreateWithName((CFStringRef)@"Arial-BoldMT", 14.0, NULL);
CTFontRef ctfontBody = CTFontCreateWithName((CFStringRef)@"Arial", 14.0, NULL);
[attrString addAttribute:(NSString *)kCTParagraphStyleAttributeName value:(id)paragraphStyle range:NSMakeRange(0, [attrString length])];
[attrString addAttribute:(NSString *)kCTFontAttributeName value:(id)ctfontAuthor range:NSMakeRange(0, [authorString length] + 1)];
[attrString addAttribute:(NSString *)kCTFontAttributeName value:(id)ctfontBody range:NSMakeRange([authorString length] + 1, [bodyText length])];
CFRelease(ctfontAuthor);
CFRelease(ctfontBody);
CFRelease(paragraphStyle);

CFRange fitRange;
CGSize result = CGSizeZero;
CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFMutableAttributedStringRef)attrString);
result = CTFramesetterSuggestFrameSizeWithConstraints(framesetter, CFRangeMake(0, [authorString length] + [bodyText length] + 1), NULL, size, &fitRange);
CFRelease(framesetter);
return result;// result is the value I need to be constrained to size (229.0, MAXFLOAT) but sometimes it is 231 and some more 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:26:50.693

在返回结果大小之前，尝试将 result.width 参数设置为约束大小的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T02:42:12.783

我也在这种情况下运行，解决了它并编写了一个类别，在所有情况下都适用于我。如果您使用零作为高度，请参阅我的答案，它不会将高度限制为任何高度。我为这个问题写了一个类别，在所有情况下都对我有用。查看[iOS UITableView 与动态文本和图像一起呈现（NSAttributedString + 图像）](https://stackoverflow.com/questions/16586190/ios-uitableview-with-dynamic-text-and-images-rendered-together-nsattributedstri/22104529#22104529)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T13:56:56.857

我遇到了类似的问题，我从[这篇文章](https://stackoverflow.com/a/10019378/1313863)中找到了解决方案（至少对于高度问题）。您需要指定一个 kCTParagraphStyleSpecifierLineSpacingAdjustment。

# r - 图中的多行 y 标签

> ID：10686189
> 
> 赞同：4
> 
> 时间：2012-05-21T11:51:22.763
> 
> 标签：r, data-visualization

有没有办法在 R 图中为 y 轴创建多线标签？

我尝试添加一个`\n`换行符应该在的位置，但是标签的第一行被剪掉了：

```
l <- 10
plot(0:l, (0:l), type='l',
     yaxt='n',
     xlab='Index',
     ylab='Cumulative sum\nof the sorted weights') 
```

![情节结果](../Images/b7ed32d553e98abcf1d9f132f661bd96.png)

这发生`tikzDevice`在 RStudio 内部和内部。此外，我尝试了一些`par()`没有运气的选项。如何正确地做到这一点？

（过大的上边距也困扰着我……）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T12:12:52.090

您需要使用`mar`or设置边距`mgp`：

```
l <- 10
op <- par(mar=c(5, 6, 4, 2) + 0.1)
plot(0:l, (0:l), type='l',
     yaxt='n',
     xlab='Index',
     ylab='Cumulative sum\nof the sorted weights')
par(op) 
```

![在此处输入图像描述](../Images/6b22fad8fbdf55da09e495e159840026.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:48:47.987

就像@smillig 建议的那样，您可以使用`par`，更改`mar`or`mgp`参数。

但是你必须在打电话`par` **之前**打电话`plot`。

# java - java中矩阵的逆

> ID：10686197
> 
> 赞同：4
> 
> 时间：2012-05-21T13:29:04.090
> 
> 标签：java, matrix, sparse-matrix

我想在java中计算矩阵的逆。是否有任何已经存在的计算矩阵逆的包。我发现了类似的[问题](https://stackoverflow.com/questions/1992638/java-inverse-matrix-calculation)，但问题中的答案并不强烈建议使用任何软件包。即使我无法遵循他们使用的方法。我有一个包含 10000 行和列的大型矩阵。我想计算它的倒数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:34:40.627

Apache Commons Math 支持[线性代数](http://commons.apache.org/math/userguide/linear.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T13:34:33.103

我认为你应该给[JAMA一个机会](http://math.nist.gov/javanumerics/jama/)

该文档提供了矩阵的反函数 [http://math.nist.gov/javanumerics/jama/doc/](http://math.nist.gov/javanumerics/jama/doc/)

不过，看到矩阵的大小，您必须先将其分解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T05:15:18.140

[la4j](http://la4j.org) （Java的线性代数）库支持矩阵求逆。这是一个简短的例子：

```
Matrix a = new Basic2DMatrix(new double[][]{
   { 1.0, 2.0, 3.0 },
   { 4.0, 5.0, 6.0 },
   { 7.0, 8.0\. 9.0 }
});

Matrix b = a.invert(Matrices.DEFAULT_INVERTOR); // uses Gaussian Elimination 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-09-01T11:59:50.543

在 github 中有一个使用 Java 线性代数的例子

```
Matrix a =                                               
             factory.createMatrix(new RandomMatrixSource(SIZE,SIZE));
MatrixInverter inverter = a.withInverter(LinearAlgebra.GAUSS_JORDAN);
         Matrix e = inverter.inverse(factory); 
```

# c# - 无法将字符串（包含数字）转换为 int？

> ID：10686198
> 
> 赞同：2
> 
> 时间：2012-05-21T13:29:06.207
> 
> 标签：c#, string, type-conversion

我有一个非常愚蠢的问题..我有一个包含“ `800.0000`”（不带引号）的字符串，我正在尝试将其转换为数字 800。我正在使用此命令，但它不起作用：

`int inputNumber = Int32.Parse(inputString);`

我收到 FormatException 消息“输入字符串的格式不正确”。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-21T13:31:13.367

尝试这个：

```
int inputNumber = Int32.Parse(inputString, NumberStyles.AllowDecimalPoint); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T13:31:50.187

> 800.000

是类型`Double`，而不是`Integer`

所以，

```
double inputNumber = Double.Parse(inputString); 
```

会为你工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T13:47:18.207

由于您传递的数字是小数，因此您需要使用适当的目标类型 -`float`或`double`

所以这给了你

```
var value = Double.Parse(s); 
```

你可以像这样去掉小数：

```
var integer = (int)value; 
```

但即使使用 ，`Double.Parse`您也需要小心，因为它会根据当前的文化 ( `System.Globalization.CultureInfo.CurrentCulture`) 期待不同的输入。

所以虽然

```
Double.Parse("800.00", System.Globalization.CultureInfo.GetCultureInfo("en-US")) 
```

按预期工作

```
Double.Parse("800.00", System.Globalization.CultureInfo.GetCultureInfo("de-DE")) 
```

将产生值“80000”

EDIT1 - 添加：

所以你可能想要使用

```
Double.Parse("800.00", System.Globalization.CultureInfo.InvariantCulture) 
```

以防止任何可能导致各种麻烦的误解。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T13:32:28.087

发生异常是因为您`string`的不是`int32`。您必须先转换为`double`。

```
double value = Convert.ToDouble(youString); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T13:34:32.523

尝试这个：

```
double myDouble = Convert.ToDouble(string); 
```

与其他类型也类似，

```
int myInt = Convert.ToInteger(string); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-04T05:33:36.877

Int32 valueInInt = (int)double.Parse(inputString);

# php - Virtuemart 付款方式未显示

> ID：10686199
> 
> 赞同：0
> 
> 时间：2012-05-21T13:29:08.210
> 
> 标签：php, joomla, virtuemart

我正在使用 Virtuemart 2。我在 Virtuemart 的付款方式下创建了一个 authorize.net 信用卡付款方式，并设置为匿名和默认组。但是，当我结帐并单击“选择付款方式”时。根本没有可供选择的付款方式。我难住了。为了解决几个问题，我不得不深入研究一下 drugmart 中的代码。我不确定它是否是后端简单的东西，它曾经一次显示，但似乎已经消失了。任何帮助将不胜感激！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:55:12.980

请检查您是否启用了 joomla 插件下的 authorize.net 支付插件。如果已启用，它将列在付款方式下，并确保您已发布付款方式；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T17:49:56.770

有点晚了，但这是我遇到的类似问题的解决方案。

请务必为插件选择正确的购物者组，如果您想允许客人结账，包括“匿名”。

# android - 在哪里设置应用程序购买android的接收帐户？

> ID：10686204
> 
> 赞同：2
> 
> 时间：2012-05-21T13:29:24.833
> 
> 标签：android, in-app-billing

我正在开发一个android应用程序，现在我已经在测试代码中实现了应用程序内购买功能，我研究了文档但没有找到当用户选择要购买的商品时，我的问题是在哪里我必须提供收款的帐号。任何帮助、链接或教程都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:17:54.930

您必须创建商家帐户，否则您现有的发布者帐户也可以使用...转到[此](https://accounts.google.com/ServiceLogin?service=sierra&continue=https://checkout.google.com/main?upgrade=true&hl=en_GB&nui=1&ltmpl=default&sacu=1)链接以配置您的商家帐户并在那里提供您的银行详细信息...

您可以在此处找到我们的应用内结算政策[...](https://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=1153481)

只是为了让您知道 Google 不允许印度出版商销售数字内容

# sql - 从 sql C# 更新数据集

> ID：10686205
> 
> 赞同：0
> 
> 时间：2012-05-21T13:29:26.323
> 
> 标签：sql, c#-4.0

我有一个用于访客登录的信息亭，当他们登录时，它会将数据发送到 SQL 数据库。然后，我将这些数据拉入数据集，然后拉入监控应用程序上的 datagridview。该数据每 15 秒刷新一次。

如何在不每次都获取所有数据的情况下更新此数据集/datagridview？最初的拉动大约是 500 行，我不想每次都拉动所有相同的 500 行。我想检查是否有任何新记录并将它们添加到数据集中。

这是我获取数据的代码

```
private void UpdateUsers()
    {
        SqlConnection conn = ConnectSQL("10.100.25.250", "bhi_kiosk");
        var query = new SqlCommand("SELECT * FROM Users WHERE uStatus=1", conn);
        SqlDataReader read = null;
        listView1.Items.Clear();

        conn.Open();
        read = query.ExecuteReader();
        var dt = new DataTable();
        dt.Load(read);
        query.Connection.Close();
        dataGridView1.DataSource = dt;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:39:30.977

如果您在开始时加载数据：

```
DataTable dt = new DataTable();
DateTime lastChange = new DateTime(1753, 1, 1);
protected override void OnLoad(EventArgs e)
{
    base.OnLoad(e);
    dataGridView1.DataSource = dt;
    UpdateUsers();
} 
```

然后[将](http://msdn.microsoft.com/en-us/library/system.data.datatable.merge.aspx)新数据表合并到旧数据表中：

```
private void UpdateUsers()
{
    SqlConnection conn = ConnectSQL("10.100.25.250", "bhi_kiosk");
    var query = new SqlCommand("SELECT * FROM Users WHERE uStatus=1 AND LastChange > @LastChange ORDER BY LastChange", conn);
    var lastChangeparameter = query.Parameters.Add("@LastChange", SqlDbType.DateTime);
    lastChangeparameter.Value = lastChange;
    //listView1.Items.Clear();
    conn.Open();
    using (SqlDataReader read = query.ExecuteReader())
    {
        using (var dt_merge = new DataTable())
        {
            dt_merge.Load(read);
            dt.Merge(dt_merge);
            if (dt.Rows.Count > 0)
            {
                lastChange = (DateTime)dt.Rows[dt.Rows.Count - 1]["LastChange"];
            }
        }
    }
    conn.Close();
} 
```

You will get what you want. Couple of pointers: there really should be a try ... catch block to ensure conn is disposed in case of error. Query depends on order by LastChange because next reading time is taken from maximum (LastChange). You use datetime from server to avoid possibility of loosing a record if client time is not perfectly aligned with server time.

# c# - 具有统一性的 ASP.net MVC 依赖注入（DI 容器）；如何根据不同的控制器类型注入依赖别名（特定类型）

> ID：10686206
> 
> 赞同：1
> 
> 时间：2012-05-21T13:29:28.393
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, dependency-injection, unity-container

我想根据控制器类型使用 Unity 或任何其他 DI 容器注入特定的依赖项。

下面是一个例子：

2 个依赖项的类型为 interface `IAppLogger`：

```
1\. NetworkLogger : IAppLogger
2\. FileLogger : IAppLogger 
```

现在下面 2 个控制器使用抽象 IAppLogger 使用依赖项。

```
1\. NetworkController depends on IAppLogger
2\. FileController depends on IAppLogger 
```

在我的 MVC 项目中，我安装了 Unity 和 Unity.mvc3 包。之后我得到了一个 bootstrap.cs 文件，我可以在其中注册类型。现在我应该如何设置 DependencyResolver 来解决

```
IAppLogger to NetworkLogger for controller NetworkController 
```

和

```
IAppLogger to FileLogger for controller FileController. 
```

**编辑：**

* * *

如果应用程序的事情是动态的，那么在每个控制器中更改依赖类型将比在服务定位器或解析器中执行它更困难，并且占用空间更少。在独立应用程序中，我可以在注册类型时使用别名。

```
Container.RegisterType<IAppLogger, NetworkLogger>("Network"); 
Container.RegisterType<IAppLogger, FileLogger >("File"); 

IAppLogger flogger = Container.Resolve<IAppLogger>("File");     
IAppLogger nlogger = Container.Resolve<IAppLogger>("Network"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:49:26.267

if`NetworkController`应该始终使用 a `NetworkLogger`then 它应该依赖于`NetworkLogger`，而不是 on `IAppLogger`。或者，`INetworkLogger`如果你愿意，也可以打开。

也是如此`FileController`。

# c# - 响应 .NET 服务器中的 LDAP 查询

> ID：10686207
> 
> 赞同：1
> 
> 时间：2012-05-21T13:29:42.450
> 
> 标签：c#, .net, ldap

我正在寻找一个小样本来演示如何响应传入的 LDAP 查询。

有没有这样的样本可以证明这样的事情？.NET Framework 库中是否有内置功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:14:42.977

如果您的 LDAP 客户端需要完整的服务器安装，OpenLDAP 可能会令人满意。如果客户端可以使用内存服务器进行测试（不需要完整的服务器安装，但提供了功能齐全的 LDAP 服务器安装），请使用UnboundID LDAP SDK 提供的[内存服务器。](http://ff1959.wordpress.com/2011/10/07/in-memory-directory-server/)

# java - 从 Android 应用程序将 PDF 附加到电子邮件 - 文件大小为零

> ID：10686209
> 
> 赞同：6
> 
> 时间：2012-05-21T13:29:51.293
> 
> 标签：java, android, email, pdf, email-attachments

我正在尝试将名为 download.pdf 的 PDF 文件附加到我的 Android 应用程序中的电子邮件中。我首先将文件复制到 SDCard，然后将其附加到电子邮件中。

我不相关，但我正在银河标签设备上进行测试。外部存储路径返回 mnt/sdcard/

我的代码如下：

```
public void sendemail() throws IOException {

    CopyAssets();

    String emailAddress[] = {""};

    File externalStorage = Environment.getExternalStorageDirectory();

    Uri uri = Uri.fromFile(new File(externalStorage.getAbsolutePath() + "/" + "download.pdf"));

    Intent emailIntent = new Intent(Intent.ACTION_SEND);
    emailIntent.putExtra(Intent.EXTRA_EMAIL, emailAddress);
    emailIntent.putExtra(Intent.EXTRA_SUBJECT, "Subject");
    emailIntent.putExtra(Intent.EXTRA_TEXT, "Text");
    emailIntent.setType("application/pdf");
    emailIntent.putExtra(Intent.EXTRA_STREAM, uri);

    startActivity(Intent.createChooser(emailIntent, "Send email using:"));

    }

public void CopyAssets() {
    AssetManager assetManager = getAssets();
    String[] files = null;
    try {
        files = assetManager.list("");
    } catch (IOException e) {
        Log.e("tag", e.getMessage());
    }
    for(String filename : files) {
        InputStream in = null;
        OutputStream out = null;
        if (filename.equals("download.pdf")) {
        try {
          System.out.println("Filename is " + filename);
          in = assetManager.open(filename);
          File externalStorage = Environment.getExternalStorageDirectory();
          out = new FileOutputStream(externalStorage.getAbsolutePath() + "/" + filename);
          System.out.println("Loacation is" + out);
          copyFile(in, out);
          in.close();
          in = null;
          out.flush();
          out.close();
          out = null;
        } catch(Exception e) {
            Log.e("tag", e.getMessage());
        }       
    }
    }
}
private void copyFile(InputStream in, OutputStream out) throws IOException {
    byte[] buffer = new byte[1024];
    int read;
    while((read = in.read(buffer)) != -1){
      out.write(buffer, 0, read);
    }
}
} 
```

问题是附加的文件大小为 0 字节。谁能发现可能出了什么问题？

**编辑**

如果我查看设置，我可以看到文件已保存到设备上，因此这一定是我如何将文件附加到电子邮件的问题。在我看到的错误日志中：

```
gMail Attachment URI: file:///mnt/sdcard/download.pdf
gMail type: application/pdf
gmail name: download.pdf
gmail size: 0 
```

**编辑**

想知道这是否是银河选项卡上的错误？如果我通过 pdf 查看器（从我的应用程序）打开文件，然后尝试附加到 gmail 电子邮件，则大小再次为 0。任何人都可以验证吗？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-07-09T11:24:16.077

```
String[] mailto = {""};
                        Uri uri = Uri.fromFile(new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/CALC/REPORTS/",pdfname ));
                        Intent emailIntent = new Intent(Intent.ACTION_SEND);
                        emailIntent.putExtra(Intent.EXTRA_EMAIL, mailto);
                        emailIntent.putExtra(Intent.EXTRA_SUBJECT, "Calc PDF Report");
                        emailIntent.putExtra(Intent.EXTRA_TEXT, ViewAllAccountFragment.selectac+" PDF Report");
                        emailIntent.setType("application/pdf");
                        emailIntent.putExtra(Intent.EXTRA_STREAM, uri);
                        startActivity(Intent.createChooser(emailIntent, "Send email using:")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:52:47.590

```
File externalStorage = Environment.getExternalStorageDirectory();    
String PDFpath = externalStorage.toString();
String pdfpath =path.replace("/mnt","");
Uri uri = Uri.parse(new File("file://" + pdfpath)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T14:49:28.633

如果您的 download.pdf 文件存在于 SDCard 中。所以问题应该是从文件中获取 Uri。试试这个，它对我有用。

```
Uri uri = Uri.fromFile(new File("/sdcard/", "download.pdf")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T10:05:21.127

同样的问题也发生在我身上。我已经使用示例中的一些方法清除了这一点。我已经[回答](https://stackoverflow.com/a/9273051/940096)了一个与您的查询类似的问题。也许这可以帮助你。

# php - php正则表达式从字符串中解析参数

> ID：10686223
> 
> 赞同：-1
> 
> 时间：2012-05-21T13:30:27.643
> 
> 标签：php, regex

我需要使用正则表达式从字符串中解析参数。

我的示例字符串：

```
'my page',1234,'main', '800,600', 45 
```

所需的输出：

```
Array(
[0] => my page
[1] => 1234
[2] => main
[3] => 800,600
[4] => 45
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:17:05.530

看起来你所拥有的是逗号分隔的值。也许[`str_getcsv()`](http://jp2.php.net/manual/en/function.str-getcsv.php)会更好地为您服务，因为它已经可以解释引号字符串中的逗号。

```
print_r(str_getcsv("'my page',1234,'main', '800,600', 45", ',', "'"));
Array
(
    [0] => my page
    [1] => 1234
    [2] => main
    [3] => 800,600
    [4] =>  45
) 
```

这不会修剪第 4 项中“45”之前的空格，但如果有必要，我们可以使用`array_map()`and `trim()`。

```
print_r(array_map('trim', str_getcsv("'my page',1234,'main', '800,600', 45", ',', "'")));
Array
(
    [0] => my page
    [1] => 1234
    [2] => main
    [3] => 800,600
    [4] => 45
) 
```

# sql-server-2008 - 创建表后如何在 SQL Server 中添加默认值？

> ID：10686227
> 
> 赞同：1
> 
> 时间：2012-05-21T13:30:38.397
> 
> 标签：sql-server-2008, default-value, alter-table

所以，我已经创建了我的数据库，但现在需要为表中的字段添加一个默认值。我想知道如何做到这一点，而不必删除一半的表和约束。

我在网上看了，它说要使用这个：

```
ALTER TABLE TABLE_NAME
ALTER COLUMN ColumnName
SET DEFAULT 1234; 
```

但是，我尝试使用它，但我得到“关键字'SET'附近的语法不正确”。我错过了一些非常明显的东西吗？

哦，我想我应该补充一点，我正在尝试编辑的列是一个外键，如果这会改变任何东西的话。

在此先感谢，艾莉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:33:33.413

```
-- ============================ 
-- Create default constraint
-- ============================ 

ALTER TABLE <schema_name, sysname, dbo>.<table_name, sysname, table_name>
   ADD CONSTRAINT df_<column_name, sysname, column_name>
   DEFAULT <default_expression, sysname, 0>
   FOR <column_name, sysname, column_name>
GO 
```

如果需要添加外键

```
ALTER TABLE Products WITH CHECK 
ADD CONSTRAINT [FK_Prod_Man] FOREIGN KEY(ManufacturerID)
REFERENCES Manufacturers (ID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:51:47.983

只需提供一种方法（应@Romii 的要求）来检查是否已经为列定义了默认值，使用目录视图而不是向后兼容视图。

```
IF NOT EXISTS
(
  SELECT 1 FROM sys.default_constraints AS dc
    INNER JOIN sys.columns AS c
    ON dc.parent_object_id = c.[object_id]
    AND dc.parent_column_id = c.column_id
    WHERE dc.parent_object_id = OBJECT_ID('dbo.TableName')
    AND c.name = 'ColumnName'
)
BEGIN
  ALTER TABLE dbo.TableName
    ADD CONSTRAINT DF_TableName_ColumnName
    DEFAULT 'whatever' FOR ColumnName;
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:35:37.553

使用以下查询检查是否已在该表的列上定义了默认约束。

```
SELECT d.definition ,c.name,d.name
FROM sys.default_constraints AS d
INNER JOIN sys.columns AS c
ON d.parent_column_id = c.column_id
WHERE d.parent_object_id = OBJECT_ID(N'[dbo].[TableName]', N'U')
AND c.name = 'ColumnName'; 
```

在表的列上添加默认约束的语法。

```
ALTER TABLE {TABLENAME} 
ADD {COLUMNNAME} {TYPE} {NULL|NOT NULL} 
CONSTRAINT {CONSTRAINT_NAME} DEFAULT {DEFAULT_VALUE} 
```

示例查询：

```
ALTER TABLE TABLE_NAME
ADD CONSTRAINT DF_TABLENAME_ColumnName
DEFAULT 1234 FOR ColumnName; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T13:38:29.487

要将默认约束添加到现有列，您可以使用如下`ALTER TABLE`命令：

```
ALTER TABLE <TableName>
 add constraint <ConstraintName>
  default <DefaultValue> for <TargetColumn> 
```

一个例子：

```
ALTER TABLE Pages
 add constraint DF_Pages__Link
  default 'asdf' for Link 
```

（我对默认约束的命名约定是`DF_ + tablename + __ + column name`）

# java - 部署 Thrift Java 服务实现的最佳方式是什么？

> ID：10686228
> 
> 赞同：2
> 
> 时间：2012-05-21T13:30:42.230
> 
> 标签：java, sockets, tomcat, soa, thrift

我知道 Thrift 有自己的 Threadpool 服务器，但我不确定它是否能够处理繁重的负载。你会建议把它放在 tomcat 后面吗？
此外，如果您想使用套接字传输实现，您还可以使用 tomcat 吗？还是需要使用其他解决方案？我真的很想听听您部署 Thrift Java 服务的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:51:59.730

考虑将其放入应用服务器（tomcat、jetty 等）并使用[TServlet](http://people.apache.org/~jfarrell/thrift/0.6.1/javadoc/org/apache/thrift/server/TServlet.html)通过 HTTP 访问它。您从服务器获得：

1.  线程管理
2.  连接管理
3.  您可以使用 standard`Filter`来限制请求的速率，或者根据 cookie 管理访问
4.  可能随时可用的访问日志
5.  您可以轻松添加 JSON 协议进行调试

# templates - Clojure 的 Fleet 模板：如何使用“fleet-ns”？

> ID：10686229
> 
> 赞同：2
> 
> 时间：2012-05-21T13:30:43.373
> 
> 标签：templates, clojure

我正在使用 Clojure、Ring、Composure 和 Fleet 开发一个 Web 应用程序。我喜欢 Fleet 的灵活性，并且我发现它的模板文件的语法易于阅读和直观。但是，文档很少，我很难理解宏“fleet-ns”的使用，它为目录树中的 .fleet 文件生成命名空间函数。

特别是，README.md 文件对这些函数的产生做出了以下声明：

> — 将为每个文件创建几个函数。例如文件posts.html.fleet 将产生3 个函数：posts、posts-html 和posts-html-fleet。

我找不到任何解释为什么会有三个函数，它们各自的用途，或者它们的区别是什么。

我通过搜索找到的示例是零碎的、不完整的或被其他问题所掩盖。

总的来说，我的感觉是，由于缺乏文档，采用这个构思精良的软件包受到了阻碍。如果我能更多地了解 Fleet 的工作方式，我倾向于改进。

任何帮助、指针或规范示例表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:20:49.510

事实上，文档很少。也许您可以改用enlive。网上有很多例子。您还可以阅读（如果您还没有阅读）以下内容： [http](http://cleancode.se/2011/01/04/getting-started-with-moustache-and-enlive.html) ://cleancode.se/2011/01/04/getting-started-with-moustache-and-enlive.html 和 Glenn Vanderburg 的一篇非常好的论文： [http ://steve.vinoski.net/pdf/IC-Clojure_Templating_Libraries_Fleet_and_Enlive.pdf](http://steve.vinoski.net/pdf/IC-Clojure_Templating_Libraries_Fleet_and_Enlive.pdf)

# windows - 强制任何正在运行的进程崩溃

> ID：10686231
> 
> 赞同：6
> 
> 时间：2012-05-21T13:30:56.120
> 
> 标签：windows, testing, crash

为了软件测试的目的，我想使我选择的正在运行的程序（例如，notepad++、becrypt、word）崩溃。

我知道如何蓝屏，我知道如何导致我编写的程序崩溃，我知道如何结束进程 - 但如何让现有进程崩溃我不知道！

有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T13:45:08.573

好吧，`CreateRemoteThread`在远程进程上使用并调用使进程可靠崩溃的*东西*[1]。我不确定是否`CreateRemoteThread`可以防止空指针，但是您可以将空页面中的地址传递给它并让远程进程执行该地址。

[1] 空指针或空页访问，除以零，调用特权指令，`int3`...

* * *

例子：

```
#include <stdio.h>
#include <tchar.h>
#include <Windows.h>

BOOL setCurrentPrivilege(BOOL bEnable, LPCTSTR lpszPrivilege)
{
    HANDLE hToken = 0;
    if(::OpenThreadToken(::GetCurrentThread(), TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, FALSE, &hToken)
        || ::OpenProcessToken(::GetCurrentProcess(), TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, &hToken))
    {
        TOKEN_PRIVILEGES tp;
        LUID luid;

        if(!::LookupPrivilegeValue(
            NULL,            // lookup privilege on local system
            lpszPrivilege,   // privilege to lookup 
            &luid ) )        // receives LUID of privilege
        {
            ::CloseHandle(hToken);
            return FALSE; 
        }
        tp.PrivilegeCount = 1;
        tp.Privileges[0].Luid = luid;
        tp.Privileges[0].Attributes = (bEnable) ?  SE_PRIVILEGE_ENABLED : 0;

        // Enable the privilege or disable all privileges.
        if(!::AdjustTokenPrivileges(
            hToken,
            FALSE,
            &tp,
            sizeof(TOKEN_PRIVILEGES),
            (PTOKEN_PRIVILEGES) NULL,
            (PDWORD) NULL)
            )
        {
            CloseHandle(hToken);
            return FALSE; 
        }
        ::CloseHandle(hToken);
    }
    return TRUE;
}

int killProcess(DWORD processID)
{
    HANDLE hProcess = ::OpenProcess(PROCESS_ALL_ACCESS, FALSE, processID);
    if(hProcess)
    {
        if(!setCurrentPrivilege(TRUE, SE_DEBUG_NAME))
        {
            _tprintf(TEXT("Could not enable debug privilege\n"));
        }
        HANDLE hThread = ::CreateRemoteThread(hProcess, NULL, 0, (LPTHREAD_START_ROUTINE)1, NULL, 0, NULL);
        if(hThread)
        {
            ::CloseHandle(hThread);
        }
        else
        {
            _tprintf(TEXT("Error: %d\n"), GetLastError());
            ::CloseHandle(hProcess);
            return 1;
        }
        ::CloseHandle(hProcess);
    }
    return 0;
}

int __cdecl _tmain(int argc, _TCHAR *argv[])
{
    killProcess(3016);
} 
```

当然，您需要在对`killProcess`. 使用 WNET DDK 编译并在 2003 Server R2 上测试。

这里的要点是，我们告诉远程进程在地址 0x1 ( ) 处执行代码，`(LPTHREAD_START_ROUTINE)1`该地址位于空页面内，但不是空指针（以防有针对它的检查）。函数周围的垃圾，特别`setCurrentPrivilege`是用于获得完整的调试权限，以便我们可以做我们的坏事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T15:47:57.453

需要一个两步机制：

1.  注入进程以使其崩溃（使用注入库、使用[Detours](http://research.microsoft.com/en-us/projects/detours/)、使用 Hook 安装等）。您选择什么取决于您拥有的时间和知识以及其他先决条件（如凭证、防注入保护、您想要留下的足迹大小......）
2.  在注入进程中执行无效操作（如 int 2Eh、除以 null 等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T13:43:39.570

您可以使用[DLL 注入技术](http://www.codeproject.com/Articles/4610/Three-Ways-to-Inject-Your-Code-into-Another-Proces)将代码注入另一个进程。然后在您注入的代码中执行一些简单的操作，例如 abort() 或除以零。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-10T14:14:50.460

以下是使用该`winapiexec`工具执行此操作的方法：

`winapiexec64.exe CreateRemoteThread ( OpenProcess 0x1F0FFF 0 1234 ) 0 0 0xDEAD 0 0 0`

替换`1234`为进程id并运行命令，进程将崩溃。

# c++ - C++ Visual Studio 2008，delete() 操作使程序崩溃

> ID：10686232
> 
> 赞同：0
> 
> 时间：2012-05-21T13:30:56.190
> 
> 标签：c++, memory, visual-studio-2008, delete-operator

几天以来，我在 Visual Studio 2008 中遇到了一个与我的 C++ 软件相关的问题。如果我将 Visual Studio 设置设置为“发布 Win32”模式，它工作正常。

但是如果我将它设置为“Debug Win32”，使用删除时会出现崩溃问题。编译没问题，但是，在运行时，软件在第一次“删除”时崩溃。

考虑这个快照：

![在此处输入图像描述](../Images/4b408eda1ec8409aaab617e105beed56.png)

如您所见，当软件到达“删除温度”时；命令执行，它崩溃显示消息：

> 调试断言失败！程序...表达式 _BLOCK_TYPE_IS_VALID(pHead->nBlockHouse)

问题是什么？如何解决？

为什么在“发布”模式下没有任何错误？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T13:33:35.957

你应该只有`delete`什么你`new`和`delete[]`什么你`new[]`。没有其他的。您还尝试使用空指针来调用函数。当你试图调用一个什么都没有的方法时会发生什么？好吧，这不可能是什么好事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T13:33:22.873

你有 temp = NULL 并且在下一行你调用了一个方法？然后你尝试删除它？

* * *

除此之外，断言不是“错误”。断言在调试模式下声明您正在断言某个条件（这些通常也包含在诸如 MFC 之类的库中），如果您的断言失败，它会调用代码来通知您并让您有机会闯入调试器以调试问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:41:07.060

调试器执行“断言”。这是对代码正确性的额外检查，例如：“断言指针不为空。”。这样做很好，因为它有助于发现错误。我同意任何声称调试器发出的消息无助于查找错误源的人。

# java - 如何像 7 段显示器一样打印多位数字

> ID：10686233
> 
> 赞同：2
> 
> 时间：2012-05-21T13:30:57.253
> 
> 标签：java

我只是想知道是否可以以数字格式显示数字。在此我们接受来自控制台的号码。

例如：

```
123 should be display in following format, and in one line.
  _  _
| _| _|
| |_ _| 
```

我尝试使用 switch case 但没有得到合适的方法

```
"arg" is char array;
char c;
for(i=0;i<3;i++)
{
c=arg[i];
switch(char)
{

    case '1' : System.out.println("|");
               System.out.println("|");
               break;
    case '2' : System.out.println("-");
               System.out.println(" "+"|");
               System.out.println("-");
               System.out.println("|");
               System.out.println("-");
               break;

  same for all digit
}
} 
```

我知道这不是正确的显示解决方案。

是否可以使用 java.lang.

**编辑** Joe 建议的更新代码。有用。

```
 /**
        * @author Amit
        */
        public class DigitalDisplay {
            /**
             * @param args
             */
                public static void main(String[] args) {
        String [][] num=new String[4][3];
        num[0][0]="|-|";
        num[0][1]="| |";
        num[0][2]="|_|";

        num[1][0]=" |";
        num[1][1]=" |";
        num[1][2]=" |";

        num[2][0]=" -|";
        num[2][1]=" _|";
        num[2][2]=" |_";

        num[3][0]=" -|";
        num[3][1]=" _|";
        num[3][2]=" _|";
        int[] input = {2,1,3}; 
        for (int line = 0; line < 3; line++)
        {          
            for (int inputI=0; inputI < input.length; inputI++)
            {
                int value = input[inputI];
                System.out.print(num[value][line]);
                System.out.print("  ");
            }          
            System.out.println();
        }
    }
}

**OUTPUT**

 -|   |   -|  
 _|   |   _|  
 |_   |   _| 
```

@乔：谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T13:37:59.353

如果你有多个字符，你需要扫描每一行，建立它。

以下都是伪代码，但我相信你可以把它翻译成Java。您将需要创建一个网格并确保每个数字具有相同的宽度和高度。

1 - 为每个号码设置初始数据。您可以将其作为二维数组执行（维度 1：数字，维度 2：行）例如：

```
numbers[0][0] = "|-|"
numbers[0][1] = "| |"
numbers[0][2] = "|_|"

numbers[1][0] = "  |"
numbers[1][1] = "  |"
numbers[1][2] = "  |" 
```

2 - 对于组成字符的每一行，扫描输入中的每个数字并写下适当的字符串。这将逐行建立字符。

```
input = [1,2,3]
digit_height = 3

for line digit_height:
   for digit in input:
       print numbers[digit][line]
       print "  " to space between characters
   print new line 
```

好的，这是java：

```
 int[] input = {2,1,3}; 
    for (int line = 0; line < 3; line++)
    {          
        for (int inputI=0; inputI < input.length; inputI++)
        {
            int value = input[inputI];
            System.out.print(num[value][line]);
            System.out.print("  ");
        }          
        System.out.println();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:37:57.360

这是一些关于数字时钟的例子，它可能对你有帮助[数字时钟](http://www.muquit.com/muquit/software/jdgclock/jdgclock.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T13:41:42.567

最简单的方法是，画一个 8，然后存储它。然后根据所需的数字，您将知道必须打印哪个 8 笔画，哪些不需要打印。

例子：

8：

```
 _
|_|
|_| 
```

对于 1，只需打印右半部分，

```
|
| 
```

对于2，忽略相应的笔画，

```
 _
  _|
 |_ 
```

对其他人也是如此。这也是 7 段显示器的实际工作方式。

让一个数组存储所需的 7 个笔画的值。然后对于 8，您的数组可能类似于：`{1,1,1,1,1,1,1}` 对于 1，您的数组可能类似于：`{0,0,0,1,0,0,1}`其中 0 表示不打印笔画，1 表示打印笔画。

然后在这个数组的基础上，打印笔画。这比简单地拥有一个`switch`案例并为每个数字打印相应的要好。只需循环遍历数组元素，决定是否打印笔画。

对于您给出的示例，123 有一个二维数组。价值观可以去`{{0,0,0,1,0,0,1},{1,0,1,1,1,1,0},{1,0,1,1,0,1,1}}`

然后比较数组中的值并打印您的笔画！

编辑：示例代码：

```
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
String s;
s = br.readLine();
int n;
n = Integer.parseInt(s);
int stroke = 1;
int arr[] = new int[8];
if(s == 2)
    arr[] = {1,0,1,1,1,1,0};
for(int i=0;i<8;i++)
{
if(arr[i] == 1 && stroke = 1)
   System.out.println(" _");
   stroke++;
   break;
if(arr[i] == 1 && stroke = 2)
   System.out.print("|");
   stroke++;
   break;
if(arr[i] == 1 && stroke = 3)
   System.out.print("_");
   stroke++;
   break;
if(arr[i] == 1 && stroke = 4)
   System.out.println("|");
   stroke++;
   break;
if(arr[i] == 1 && stroke = 5)
   System.out.print("|");
   stroke++;
   break;
if(arr[i] == 1 && stroke = 6)
   System.out.println("_");
   stroke++;
   break;
if(arr[i] == 1 && stroke = 7)
   System.out.println("|");
   stroke++;
   break;
} 
```

打印一个数字后，您可以使用[JLine](http://jline.sourceforge.net/)库替换控制台上的光标以从下一个数字重新开始。（虽然我不确定）。

它可能需要更多的调整才能成为所需的答案！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T13:36:42.320

这里至少有 3 个不同的、非常基本的语法错误，更不用说任何逻辑错误了。

*   `char`是保留字，因此不能将其用作变量名。
*   `switch`写成小写（就像 Java 中的所有其他关键字一样）
*   `"1"`是字符串文字，而不是`char`文字。`char`对文字使用单引号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T14:12:23.803

您可以创建一个新类，其中包含数字的输出以及一个存储您要打印的内容的函数和一个要打印的函数。

例子：

```
public class DigitalNumbers{

   private String buffer = "";
   private int lines = 5; // Number's height
   private String number0[] = {
      "___ ",
      "|  | ",
      "|  | ",
      "|  | ",
      "¯¯¯ "
   };
   private String number1[] = {
      "  ",
      "| ",
      "| ",
      "| ",
      "  "
   };
   //... 

   public DigitalNumbers(){

   }

   public void add(char c){
      buffer += c;
   }

   public void print(){
      for(int i=0; i<lines; i++){
         for(int j=0; j<buffer.length(); j++){
            switch(buffer.charAt(j)){
               case '0': System.out.print(number0[i]); break;
               case '1': System.out.print(number1[i]); break;
               //...
               default: break;
            }
         }
         System.out.print("\n");         
      }
      buffer = "";
   }

} 
```

然后像这样使用：

```
DigitalNumbers DG = new DigitalNumbers();
for(int i=0;i<3;i++){
   DN.add(arg[i]);
}
DG.print(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-25T08:23:33.610

```
 //this program help you 

import java.util.*;
public class Test{
   public static void main(String[] args) throws Exception {
           Scanner inr = new Scanner(System.in);
            char c = inr.next().charAt(0); 
           // Add the necessary code in the below space 

  if(c=='2'||c=='3'||c=='5'||c=='6'||c=='7'||c=='8'||c=='9'||c=='0')
   System.out.println(" _ ");
  else
   System.out.println("   ");

  if(c=='4'||c=='5'||c=='6'||c=='8'||c=='9'||c=='0')
   System.out.print("|");
  else
   System.out.print(" ");

  if(c=='2'||c=='3'||c=='4'||c=='5'||c=='6'||c=='8'||c=='9')
   System.out.print("_");
  else
   System.out.print(" ");

  if(c=='1'||c=='2'||c=='3'||c=='4'||c=='7'||c=='0'||c=='8'||c=='9')
    System.out.println("|");
   else
    System.out.println(" ");

  if(c=='6'||c=='2'||c=='8'||c=='0')
   System.out.print("|");
  else
   System.out.print(" ");
  if(c=='2'||c=='3'||c=='5'||c=='6'||c=='8'||c=='9'||c=='0')
   System.out.print("_");
  else
   System.out.print(" ");

  if(c=='1'||c=='3'||c=='4'||c=='5'||c=='6'||c=='7'||c=='8'||c=='9'||c=='0')
   System.out.println("|");
  else
   System.out.println(" ");
   }
} 
```

# javascript - HTML iframe 更改高度事件

> ID：10686234
> 
> 赞同：1
> 
> 时间：2012-05-21T13:31:04.853
> 
> 标签：javascript, jquery, html, iframe

我已将 iFrame 附加到 div。我正在更改 iframe 加载事件上 div 的高度（使用 jQuery）。

问题是在 iframe 中有很多文本字段，当用户输入大量文本时，它们会变成多行（开始时它们是单行文本字段）。因此，由于添加了新行，iframe 高度扩大了，但 iframe 的加载事件并没有捕捉到这一点。

当 - 由于某些事件 - iframe 高度发生变化时，改变 div 高度的最佳方法是什么（考虑性能）？

我考虑过绑定每个文本字段的 onchange 函数，但我不喜欢这样，因为有时我的函数已经绑定到这些字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:36:26.257

尝试：

```
$("#frame_id").height($("#frame_id").contents().find("html").height()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:42:37.230

您可以将调整大小代码与 setInterval 挂钩，比如说 500 毫秒，它不会对性能产生重大影响。您也可以将代码打开 onfocus 并将其关闭 onblur。

# css - 如何将背景图像设置为右中心并仍然使用精灵？

> ID：10686241
> 
> 赞同：1
> 
> 时间：2012-05-21T13:31:26.433
> 
> 标签：css, sprite, css-sprites, pseudo-element

看看下面的场景：

![在此处输入图像描述](../Images/9e6b9f9976d40d5d5f023b11f09d4e6f.png)

通常您会包含背景图像并将其设置为“*右中心*”。无论如何，是否有这个但语音气泡来自元素具有未知宽度的精灵（包含多个不同的图像）？

我正在考虑使用 :after 伪元素，但是我需要提供 IE7 支持。

我想避免额外的 HTML 标记，因此我很好奇是否存在仅 CSS 的场景。

有人对此有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T15:52:58.410

您可以使用 css 伪元素，例如 :before 或 :after。只需调整您的伪元素的大小并将其放置在您想要的位置即可。content 属性很重要，否则它不会显示出来。

```
#divid:after {
  width: 10px;
  height: 10px;
  margin: -10px 0 0 -10px;
  position: absolute;
  background: url('sprite.png') -20px -15px no-repeat;
  content: ' ';
} 
```

# javascript - phonegap 用 moveTo 重命名文件

> ID：10686245
> 
> 赞同：2
> 
> 时间：2012-05-21T13:31:51.267
> 
> 标签：javascript, android, cordova

我正在尝试重命名已拍摄的图像文件，但我总是使用 error.code = 1 的失败方法

```
function renameImage(imageURI) {  
    window.resolveLocalFileSystemURI(imageURI, renameFile, fail);
}
function renameFile(entry){
    var parent = entry.fullPath.substr(0, entry.fullPath.lastIndexOf('/'));
    deleteFile(entry);
    entry.moveTo(parent, newFileName, setImageSrc, fail);
} 
```

deleteFile 工作正常

父级是**file:///mnt/sdcard/DCIM/Camera**

更新：

```
var path = obj.src.substr(0, obj.src.lastIndexOf('/'));
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function() {}, function() { alert("requestFS");});
window.resolveLocalFileSystemURI(path,  function(e) {
    path = e
    }, function() { alert("resolveFsURI path");}); 
```

resolveLocalFileSystemURI 仍然存在错误：1

编辑：它在没有 deleteFile() 的情况下显示相同的反应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:27:11.010

经过一些尝试后，我使用了这个：

```
 navigator.camera.getPicture(function(i) {
        window.resolveLocalFileSystemURI(i, function(e) {
            var p = e.fullPath.substr(0, e.fullPath.lastIndexOf('/'));
            window.resolveLocalFileSystemURI(p, function(dir) {
                e.moveTo(dir, newName, function(f) {
                    changedSomething = true;
                    var d = new Date();
                    obj.hide();
                    //alert(f.fullPath);
                    obj.attr('src', f.fullPath+'?i='+d.getMilliseconds());
                    obj.fadeIn(600);
                    e.remove(onEmptyLoader, onEmptyLoader);}, onErrorLoader);
            }, onErrorLoader);
        }, onErrorLoader);
    }, onErrorLoader, cameraOptions); 
```

抱歉回复晚了，我忘记了这个问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:25:38.570

我相信你的问题是当它需要是一个 DirectoryEntry 时，你正在调用 moveTo，而父级是一个路径。

# sql-server - 授予用户“suresh\admin”的权限不足以执行此操作

> ID：10686255
> 
> 赞同：1
> 
> 时间：2012-05-21T13:32:27.713
> 
> 标签：sql-server, reporting-services

`http://localhost/ReportServer`我的报告已成功构建和部署，但在我给出它返回的 url之后

> 授予用户“suresh\admin”的权限不足以执行此操作。(rsAccessDenied)。

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T03:53:29.767

基于 MSDN：

> 通过角色分配授予访问报表服务器内容和操作的权限。在新安装中，只有本地管理员可以访问报表服务器。要授予其他用户访问权限，本地管理员必须创建一个角色分配，指定域用户或组帐户、定义用户可以执行的任务的一个或多个角色以及范围（通常是主文件夹或报表服务器文件夹层次结构）。您可以使用报表管理器来创建角色分配。有关详细信息，请在 SQL Server 联机丛书中搜索“角色分配”。

# text - 将批处理变量写入文本文件中的特定行

> ID：10686261
> 
> 赞同：1
> 
> 时间：2012-05-21T13:32:41.073
> 
> 标签：text, batch-file

我有一个批处理文件，我需要将一个变量写入文本文件的特定行并覆盖该行中所有准备好的内容。我有从文件中读取特定行的代码，也许我可以把它切换到也写？

读取行代码：

```
setLocal EnableDelayedExpansion
for /f "tokens=* delims= " %%a in (variables.txt) do (
set /a N+=1
set v!N!=%%a
)
set variable1=!v1!
set variable2=!v2!
set variable3=!v3!
set variable4=!v4! 
```

我试图添加`%variable1% > !v4!`类似的回声，但它不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T12:37:56.150

我想到了！！这是其他任何可能需要它的人的代码。

```
@echo off
setlocal enableextensions enabledelayedexpansion

set inputfile=variables.txt

set tempfile=%random%-%random%.tmp

copy /y nul %tempfile%

set line=0

for /f "delims=" %%l in (%inputfile%) do (
    set /a line+=1
    if !line!==4 (
        echo WORDS YOU REPLACE IT WITH>>%tempfile%
    ) else (
        echo %%l>>%tempfile%
    )
)

del %inputfile%
ren %tempfile% %inputfile%

endlocal 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:51:42.137

另一种选择可能是完全覆盖文件。这是执行此操作的部分：

```
:saveVars
(
ECHO %v1%
ECHO %v2%
ECHO %v3%
ECHO %v4%
ECHO %v5%
) >variables.txt
GOTO :EOF 
```

也就是说，如果行数是固定的并且事先已知。如果没有，您可能希望在示例代码中存储增量的最后一个值，并且在保存变量时，像这样使用它：

```
:saveVars
SETLOCAL EnableDelayedExpansion
(
  FOR /L %%i IN (1,1,%N%) DO (ECHO !v%%i!)
) >variables.txt
ENDLOCAL
GOTO :EOF 
```

我在这里假设`v1`/ `v2`etc. 变量仅用于与文件同步：读取时，行存储在这些变量中，并且当其中任何一个（变量）发生更改时，您只需调用`saveVars`子例程立即地。这是一个如何使用它的示例：

```
…
SET v2=*something*
CALL :saveVars
…
SET v4=%*somevar*%
CALL :saveVars
… 
```

如果文件很小，重写应该足够快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T21:00:39.640

不确定我是否正确理解了所有内容，但是如果您想用批处理脚本替换文本文件的现有部分，您需要先将所有内容（包括更改的部分）写入新文件，然后删除原始文件并将新文件重命名为原始名称。

除非我遗漏了什么，否则我真的看不出将所有内容读入变量的意义。您可以简单地遍历将它们一一写入新文件的行，并在此过程中用替换文本替换特定行的内容：

```
setLocal EnableDelayedExpansion
**>newFile.txt (**
  for /f "tokens=* delims= " %%a in (variables.txt) do (
    set /a N+=1
    **if !N! == 4 (ECHO *substitute text*) ELSE ECHO %%a**
  )
**)
del variables.txt
rename newFile.txt variables.txt** 
```

如果替代文本又必须从其中一行派生，您可以执行以下操作：

```
setLocal EnableDelayedExpansion
>newFile.txt (
  for /f "tokens=* delims= " %%a in (variables.txt) do (
    set /a N+=1
    **if !N! == 1 SET subst_text=%%a**
    if !N! == 4 (ECHO **!subst_text!**) ELSE ECHO %%a
  )
)
del variables.txt
rename newFile.txt variables.txt 
```

# c# - 在 linq 中对列表进行排序

> ID：10686262
> 
> 赞同：1
> 
> 时间：2012-05-21T13:32:42.743
> 
> 标签：c#, linq

我必须制作一个包含对象的列表。并且对象需要以随机顺序排列。在这里，我给他们随机数：

```
Random tal = new Random();
list1[i].nummer = tal.Next(list1.Count);
listGold.Add(list1[i]); 
```

现在我只需要按编号订购它们。我认为 linq 可以为我做。但它不能：S

我正在尝试这个：

```
RepeaterSponsorGold.DataSource = listGold.OrderBy(n => n.nummer);
RepeaterSponsorGold.DataBind(); 
```

按数字排序我的列表并将列表放入我的repater。但是 lsit 似乎没有排序......或者似乎没有得到随机数。我不知道是哪个。谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:33:53.757

尝试

```
RepeaterSponsorGold.DataSource = listGold.OrderBy(n => n.nummer).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T13:38:07.417

您不应该使用 Random() 来打乱列表，因为它会产生确定性分布。

相反，使用 suffle：

[随机化一个列表<T>](https://stackoverflow.com/questions/273313/randomize-a-listt-in-c-sharp)

```
public static void Shuffle<T>(this IList<T> list)  
{  
    Random rng = new Random();  
    int n = list.Count;  
    while (n > 1) {  
        n--;  
        int k = rng.Next(n + 1);  
        T value = list[k];  
        list[k] = list[n];  
        list[n] = value;  
    }  
}

....

listGold.Shuffle(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T13:36:01.150

如果您需要按随机顺序排序，您可以尝试：

```
var listGold = list1.OrderBy(n => Guid.NewGuid()); 
```

无需使用`Random`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T13:38:51.937

这个怎么样：

```
List<string> list = new List<string>()
                        {
                            "Blue",
                            "Brown",
                            "Beige",
                            "Red",
                            "Black"
                        };
Random random = new Random();
var orderedList = list.Select(c => new {Item = c, Order = random.Next()})
    .OrderBy(i=>i.Item)
    .Select(x=>x.Item).ToList();

orderedList.ForEach(x=>Console.WriteLine(x)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T13:41:40.360

你有几个问题。

最重要的是，您应该只拥有一个 Random 实例，并重复使用它，而不是每次都调用一个新实例。

其次，通过使用列表计数作为种子，您将获得一个大致顺序的列表。

```
list1[i].nummer = tal.Next(list1.Count); 
```

因为您正在使用您的 list.Count 作为您的种子，所以您将获得一个大致按添加顺序排列的列表。

而是尝试：

```
Enumerable.Range(0,100)
    .ToDictionary(k=> Guid.NewGuid())
    .OrderBy(o => o.Key).Select(s => s.Value).ToList() 
```

使用 Guids 会给你一个比 Random 更自然的随机化。

# ruby-on-rails - ruby on rails3：错误：无法批量分配受保护的属性：名称，位置

> ID：10686264
> 
> 赞同：1
> 
> 时间：2012-05-21T13:32:58.330
> 
> 标签：ruby-on-rails

我对 ROR 有疑问：

我想创建一个名为“category2”的模型，我使用了以下命令：

> 导轨 g 型号类别 2

然后，我将文件 *db/migrate/20120521113409_create_category2s.rb* 更改为：

> 类 CreateCategory2s < ActiveRecord::Migration
> 
> 定义变化
> 
> ```
> create_table :category2s do |t|
> 
>   t.string :name
> 
>   t.integer :position
> 
>   t.timestamps
> 
> end 
> ```
> 
> add_column :events, :category2_id, :integer
> add_index :events, :category2_id
> 结束
> 
> 结尾

然后，

> bundle exec rake db:migrate

当我打开控制台并输入

> b = Category2.new(:name => 'Ruby', :position => 1)

它返回一个错误：

> irb(main):009:0> b = Category2.new(:name => 'Ruby', :position => 1)

```
ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: name, position

from /usr/local/lib/ruby/gems/1.9.1/gems/activemodel-3.2.3/lib/active_model/mass_assignment_security/sanitizer.rb:48:in `process_removed_attributes'

from /usr/local/lib/ruby/gems/1.9.1/gems/activemodel-3.2.3/lib/active_model/mass_assignment_security/sanitizer.rb:20:in `debug_protected_attribute_removal'

from /usr/local/lib/ruby/gems/1.9.1/gems/activemodel-3.2.3/lib/active_model/mass_assignment_security/sanitizer.rb:12:in `sanitize'

from /usr/local/lib/ruby/gems/1.9.1/gems/activemodel-3.2.3/lib/active_model/mass_assignment_security.rb:230:in `sanitize_for_mass_assignment'

from /usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/attribute_assignment.rb:75:in `assign_attributes'

from /usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/base.rb:498:in `initialize'

from (irb):9:in `new'

from (irb):9

from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands/console.rb:47:in `start'

from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands/console.rb:8:in `start'

from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:41:in `<top (required)>'

from script/rails:6:in `require'

from script/rails:6:in `<main>' 
```

这是什么意思？

如果我不添加参数，我只需输入：

> irb(main):008:0> a = Category2.new
> 
> => #< Category2 id: nil, name: nil, position: nil, created_at: nil, updated_at: nil>

这看起来不错的样子！

但是为什么不能指定“名称”和“位置”？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T14:09:59.953

Rails 中的 ActiveModel 通过阻止您将值分配给属性来保护您的代码免受大规模分配漏洞的影响，除非您明确声明这应该可以使用[attr_accessible 之](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_accessible)类的东西。 [这篇文章](http://pragtob.wordpress.com/2012/03/06/secure-your-rails-apps/)很好地解释了什么是批量分配漏洞。

在您的示例中，您需要添加以下内容：

```
attr_accessible :name, :position 
```

到您的模型，以便在创建对象时分配这些值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-13T11:29:24.127

由于您使用的是小于 rails 4 的 rails 版本，因此您必须明确传递要访问的参数。这是出于安全原因。但是，如果您默认使用 rails 4，rails 会为您处理这个问题。它被称为强参数。

所以你必须告诉你的模型，让我的控制器和视图访问这个属性，就像上面所说的愚蠢。

```
 attr_accessible :name, :position 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-11T14:23:31.897

只需将模型中的数据字段包含为

`attr_accessible :name, :position`

# android - 无法实例化活动错误？如何解决？

> ID：10686267
> 
> 赞同：0
> 
> 时间：2012-05-21T13:33:05.167
> 
> 标签：android, android-activity, android-logcat

我做了一个应用程序。因为我只是想在将它们添加到应用程序之前测试一些功能，

我决定将我的项目复制到一个新项目中。当我尝试运行新项目时，应用程序崩溃并且 log-cat 输出如下。

清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.androidbook.MP"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.CAMERA"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" android:debuggable="true">
    <activity
        android:name=".MPActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="AddLocationActivity"></activity>
    <activity android:name="MPData"></activity>
    <activity android:name="MyLocations"></activity>
    <activity android:name="MPInfo"></activity>
    <activity android:name="Navigation"></activity>
</application> 
```

**日志猫**：

```
 05-21 15:30:03.710: E/AndroidRuntime(11294): FATAL EXCEPTION: main
    05-21 15:30:03.710: E/AndroidRuntime(11294): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.androidbook.MP/com.androidbook.MP.MPActivity}:  
   java.lang.ClassNotFoundException: com.androidbook.MP.MPActivity in loader 
   dalvik.system.PathClassLoader[/data/app/com.androidbook.MP-1.apk]
05-21 15:30:03.710: E/AndroidRuntime(11294):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
05-21 15:30:03.710: E/AndroidRuntime(11294):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
05-21 15:30:03.710: E/AndroidRuntime(11294):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-21 15:30:03.710: E/AndroidRuntime(11294):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
05-21 15:30:03.710: E/AndroidRuntime(11294):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-21 15:30:03.710: E/AndroidRuntime(11294):    at android.os.Looper.loop(Looper.java:130)
05-21 15:30:03.710: E/AndroidRuntime(11294):    at android.app.ActivityThread.main(ActivityThread.java:3691)
05-21 15:30:03.710: E/AndroidRuntime(11294):    at java.lang.reflect.Method.invokeNative(Native Method)
05-21 15:30:03.710: E/AndroidRuntime(11294):    at java.lang.reflect.Method.invoke(Method.java:507)
05-21 15:30:03.710: E/AndroidRuntime(11294):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
05-21 15:30:03.710: E/AndroidRuntime(11294):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
05-21 15:30:03.710: E/AndroidRuntime(11294):    at dalvik.system.NativeStart.main(Native Method)
05-21 15:30:03.710: E/AndroidRuntime(11294): Caused by: java.lang.ClassNotFoundException: com.androidbook.MP.MPActivity in loader dalvik.system.PathClassLoader[/data/app/com.androidbook.MP-1.apk]
05-21 15:30:03.710: E/AndroidRuntime(11294):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
05-21 15:30:03.710: E/AndroidRuntime(11294):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
05-21 15:30:03.710: E/AndroidRuntime(11294):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
05-21 15:30:03.710: E/AndroidRuntime(11294):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-21 15:30:03.710: E/AndroidRuntime(11294):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)
05-21 15:30:03.710: E/AndroidRuntime(11294):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:37:23.230

如果要声明活动，请检查您的清单文件。

**例如：**

```
<application>

    <activity android:name=".MyActivity" android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:40:13.543

I think I found the solution, i should have checked that, the package name of the new project is included in the manifest file as for an example

"package="com.androidbook.MPTest" ..

my mistake is the i used the package name of the old project as a package name of the new project.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T14:14:21.933

查看新项目中的所有文件，确保它们没有引用旧项目中的类。

# android - 在地图中设置纬度和经度

> ID：10686270
> 
> 赞同：1
> 
> 时间：2012-05-21T13:33:23.013
> 
> 标签：android, map, location, latitude-longitude

我写了一个地图查看器，我想从用户那里获取纬度和经度，然后向他展示位置。我使用菜单来完成这项工作。但我不知道如何向他展示一些输入值的东西。这是我的代码。

```
public class main extends MapActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    MapView view = (MapView) findViewById(R.id.themap);
    view.setBuiltInZoomControls(true);

    final MapController control = view.getController();

    LocationManager manager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
    LocationListener listener = new LocationListener() {

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onLocationChanged(Location location) {
            control.setCenter(new GeoPoint((int)location.getLatitude(), (int)location.getLongitude()));
        }
    };
    manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listener);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    return super.onOptionsItemSelected(item);
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

}

所以我有2个问题。首先，如何为我的位置创建菜单。我必须使用上下文菜单或其他东西。第二，如果我得到位置，我可以将它们直接输入到我的纬度和经度吗？在我的代码中，我使用用户的默认位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T15:03:27.020

这是我的代码，它适用于我

```
 Drawable marker=getResources().getDrawable(R.drawable.mapmarker);  
    marker.setBounds( (int) (-marker.getIntrinsicWidth()/2),  
                            -marker.getIntrinsicHeight(), 
                            (int) (marker.getIntrinsicWidth()/2),  
                            0); 

    InterestingLocations funPlaces = 
                  new InterestingLocations(marker); 
```

> 在此处添加您的叠加项目。

```
 mapView.getOverlays().add(funPlaces); 

class InterestingLocations extends ItemizedOverlay { 
    private ArrayList<OverlayItem> locations = 
            new ArrayList<OverlayItem>(); 
    private GeoPoint center = null; 

    public InterestingLocations(Drawable marker) 
    { 
        super(marker); 

        // Put your custom Lat, Long in here , 
        GeoPoint disneySevenLagoon = 
            new GeoPoint((int)(28.410067*1000000), 
                         (int)(-81.583699*1000000));

        locations.add(new OverlayItem(disneySevenLagoon ,  
                      "Seven Seas Lagoon", "Seven Seas Lagoon")); 
        populate(); 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:55:14.943

好吧，如果我对您的理解正确，您可以通过两种方式做到这一点。

1）在您的 xml 布局中添加一个输入框和按钮，然后单击设置您的位置。

2) 覆盖您的 onTouch 并弹出警告框并询问经纬度。然后相应地设置它。

这两个都将设置你的覆盖：http: [//developer.android.com/resources/tutorials/views/hello-mapview.html](http://developer.android.com/resources/tutorials/views/hello-mapview.html)

许多覆盖教程之一：[http ://eagle.phys.utk.edu/guidry/android/mapOverlayDemo.html](http://eagle.phys.utk.edu/guidry/android/mapOverlayDemo.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T14:16:58.070

如果您只想显示您当前的位置，您可以使用 MyLoicationOverlay 类：

```
miPunto = new MyLocationOverlay(this, eMapa);
            eMapa.getOverlays().add(miPunto);
            miPunto.enableCompass();
            miPunto.enableMyLocation(); 
```

如果您不使用它，您必须获取您的位置，然后使用 itemizedoverlay

# php - PHP正则表达式，匹配模式？

> ID：10686273
> 
> 赞同：0
> 
> 时间：2012-05-21T13:33:34.490
> 
> 标签：php, regex

我正在尝试制作一个匹配此模式的正则表达式，

长度必须为 40 个字符，

只允许使用字母和数字，

不得包含空格，

不区分大小写，

到目前为止，我已经想出了这个，但它不起作用；

```
/^[0-9a-f]+$/i 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T13:35:36.887

```
/^[0-9a-f]{40}$/i 
```

应该做的伎俩。花括号中的数字定义了字符的数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T13:35:07.913

试试这个正则表达式：

```
/^[\da-z]{40}$/i 
```

如果你真的只想要字母 af 然后使用：

```
/^[\da-f]{40}$/i 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T13:36:41.463

试试这个：`/^[0-9a-z]{40,40}$/i`

# jquery - 在 IE 中使用 jquery trim

> ID：10686276
> 
> 赞同：0
> 
> 时间：2012-05-21T13:33:55.100
> 
> 标签：jquery, internet-explorer, tablesorter, trim

我最近遇到了无法按日期排序的 tablesorter.js 问题，因为空格破坏了我的脚本（[tablesorter，不会正确按日期排序](https://stackoverflow.com/questions/10584718/tablesorter-wont-sort-by-date-correctly/10599086#10599086)）

我终于想通了，并将代码更改为以下

```
$.tablesorter.addParser({
    id: 'dayMonthYear',
    is: function (s) {
        return false;
    },
    format: function (s) {
        s = $.trim(s.replace(/\s+/g, ' '));
        var date = s.match(/^(\d{1,2})[ ](\w{3})[ ](\d{4})$/);
        var day = String(date[1]);
        if (day.length == 1) {
            day = "0" + day;
        }
        var month = monthNames[date[2]];
        var year = date[3];
        return sortableDate = '' + year + month + day;
    },
    type: 'numeric'
});
var monthNames = {};
monthNames["Jan"] = "01";
monthNames["Feb"] = "02";
monthNames["Mar"] = "03";
monthNames["Apr"] = "04";
monthNames["May"] = "05";
monthNames["Jun"] = "06";
monthNames["Jul"] = "07";
monthNames["Aug"] = "08";
monthNames["Sep"] = "09";
monthNames["Oct"] = "10";
monthNames["Nov"] = "11";
monthNames["Dec"] = "12"; 
```

这似乎可以解决问题，但我刚刚注意到它在 IE8 或 IE7 中不起作用。在 IE9 中似乎很好。

旧版本的 IE 有问题`$.trim`吗？如果是这样，有解决办法吗？

谢谢

* * *

编辑：认为我可能越来越接近答案，刚刚发现这个[http://www.javascripter.net/faq/trim.htm](http://www.javascripter.net/faq/trim.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:30:42.727

感谢您昨天与我一起解决此问题，非常感谢。

我现在有这个工作。

我遇到的问题是如果表包含任何空格，tablesorter 将无法工作，我的解决方案是使用 $.trim 删除它，但我不知道（直到昨天）$.trim 在 IE8/7/6 中不起作用。

我没有找到 $.trim 的替代品来使这项工作在 IE8/7/6 中工作 - 尽管以下帖子可能有用

[JavaScript 中的 .trim() 在 IE 中不起作用](https://stackoverflow.com/questions/2308134/trim-in-javascript-not-working-in-ie)

[http://www.javascripter.net/faq/trim.htm](http://www.javascripter.net/faq/trim.htm)

然而，我确实注意到在其中一个 xsl 文件中存在以下代码 #160; 这导致了所有问题。在向开发人员询问这条线之后，似乎添加了这条线是为了防止 8 年前出现在浏览器中的布局问题。不用说，我现在已经在我的解析器中删除了它和 $.trim 行，它在所有浏览器中都可以正常工作。呼……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:48:08.467

我可能错了，但我认为您没有正确替换空白

```
s = $.trim(s.replace(/\s+/g, ' ')); 
```

在您的代码中，您可以看到空格没有被删除。

尝试

```
s = $.trim(s.replace(/\s+/g, '')); 
```

还有一点，你不能通过删除单词`$.trim`前后的空格来删除单词中的空格。

```
ex :-

var trimmed_text = $.trim('hello world '); 

$.trim  will only remove the space after **world** 
```

所以变量**trimmed_text** 现在是**'hello world'**

**更新**

试试这个代码

```
s.replace(/ /g,''); 
```

# ios - 我的观点的渐变阴影？

> ID：10686285
> 
> 赞同：1
> 
> 时间：2012-05-21T13:34:23.607
> 
> 标签：ios, uiview, gradient

我正在尝试为我的视图背景设置色阶，经过一些研究，我发现了这个线程：[UIView 上的渐变和 iPhone 上的 UILabels](https://stackoverflow.com/questions/422066/gradients-on-uiview-and-uilabels-on-iphone/1931498#1931498)

但是当我添加以下行时：

```
CAGradientLayer *gradient = [CAGradientLayer layer]; 
```

我明白了：

> “_OBJC_CLASS_$_CAGradientLayer”，引用自：clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

这是什么错误？以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:38:39.463

您需要将**QuartzCore.framework**添加到您的项目中。

不要忘记将它也导入到您的代码中（在您的视图控制器的 .h 文件中）：

```
#import <QuartzCore/CoreAnimation.h> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:46:14.007

听起来您的项目没有添加 Quartzcore 框架。

通过（见图）添加框架

1.  打开项目设置
2.  选择构建阶段选项卡
3.  单击 + 按钮，然后在结果对话框中输入石英。

对话应该为您自动完成。

![在此处输入图像描述](../Images/55e64a0a675ed31de340f91c354b62a7.png)

最后，一旦你完成了，你需要在任何你想使用它的地方导入框架头文件（或者在 project.pch 中猛击它）

```
#import <QuartzCore/CoreAnimation.h> 
```

# android - 如何在android中获取设备的方向？

> ID：10686290
> 
> 赞同：0
> 
> 时间：2012-05-21T13:34:36.387
> 
> 标签：android, android-intent, imageview

我在图像视图中显示图像，该图像是由 android 相机的 Intent 方法捕获的。我已经在三星 Nexus 上测试过这段代码，但是当我在 Nexus S 上测试时，图像会自行旋转 270 度。我已经通过这些链接

[Nexus S 和三星 Galaxy S I9000 上的 ACTION_IMAGE_CAPTURE 方向问题](https://stackoverflow.com/questions/6143622/action-image-capture-orientation-problem-on-nexus-s-and-samsung-galaxy-s-i9000)

[Android中的相机/图片方向](https://stackoverflow.com/questions/4465835/camera-picture-orientation-in-android)

[http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setRotation%28int%29](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setRotation%28int%29)

[来自画廊/相机意图的图片方向](https://stackoverflow.com/questions/4517634/picture-orientation-from-gallery-camera-intent)

但是这段代码

```
ExifInterface exif = new ExifInterface("filepath");
exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_NORMAL); 
```

在两个设备中总是给出 0。请告诉我我是否知道图像在显示时以特定设备的哪个角度显示，以便它将应用于所有设备，一旦我得到它的角度，我将自己旋转。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:01:55.053

如果您：

```
ExifInterface exif = new ExifInterface("filepath");
exif.getAttribute(ExifInterface.TAG_ORIENTATION); 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:43:50.053

我不是 100% 确定我了解您要查找的内容，但如果您想要设备的方向，请查看以下问题：

[在 Android 手机上检查方向](https://stackoverflow.com/questions/2795833/check-orientation-on-android-phone)

# c++ - 更深层次的带宽消耗

> ID：10686294
> 
> 赞同：2
> 
> 时间：2012-05-21T13:34:47.023
> 
> 标签：c++, c

我使用的是 Ubuntu 操作系统，我知道可以通过读取文件 /proc/net/dev 文件来获得 PC 带宽的平均使用率。但是，假设我同时向两个节点传输文件（总传输带宽：100 Mpbs）。谁能建议我一个好主意如何获取/存储“将 BW 传输到节点 X/Y”的信息（X：50 Mbps/ Y：50 Mbps）。非常感谢 C/C++ 或 python 中的建议！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T16:19:35.680

查看该`jnettop`实用程序，以直接获取您需要的信息，或在其源代码中找到适当的技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T16:00:20.900

内核通常不关心数据包的下一跳是什么以及将其丢弃到那里的接口。要让它受到关注，您需要一些 linux 的高端路由功能。尝试这个：

```
DEV=`ip route|sed -nr 's/^default.* dev ([^ ]*).*/\1/p'`
/sbin/tc qdisc del dev $DEV root >/dev/null 2>&1
TQ="/sbin/tc qdisc add dev $DEV"
TC="/sbin/tc class add dev $DEV"
TF="/sbin/tc filter add dev $DEV"
$TQ root handle 1: htb default 0 
$TC parent 1: classid 1:1 htb rate 100mbps # interesting destination 1
$TC parent 1: classid 1:2 htb rate 100mbps # ...
$TF parent 1: protocol ip u32 match ip dst 123.231.132.213 classid 1:1
$TF parent 1: protocol ip u32 match ip dst 1.2.3.4 classid 1:2 
```

然后您可以使用`tc -s class show dev $DEV`. 我不知道更简单的方法来做到这一点，对不起。

# asp.net-mvc-3 - 脚手架似乎无法正常工作

> ID：10686303
> 
> 赞同：1
> 
> 时间：2012-05-21T13:35:26.470
> 
> 标签：asp.net-mvc-3, entity-framework, scaffolding

我创建了一个新的 asp.net MVC3 应用程序（互联网应用程序），然后我添加了一个具有 3 个类的新模型：

```
public class BizCard
{
    [Required]
    public string BizCardID { get; set; }

    [Required]
    public string Name { get; set; }

    public string Address { get; set; }

    public List<string> PhoneNumbers { get; set; }

    [Required]
    [DataType(DataType.EmailAddress)]
    public string Email { get; set; }

    public BizType type { get; set; }

    public List<BizService> OfferedServices { get; set; }

    public string Description { get; set; }
}

public class BizType
{
    public int BizTypeID { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public double Price { get; set; }
}

public class BizService 
{
    public int BizServiceID { get; set; }
    public List<BizType> AllowedBizTypes { get; set; }
    public string Name { get; set; }
} 
```

之后，我创建了一个新控制器，使用模板“具有读/写操作和使用实体框架的视图的控制器”，我将模型类设置为“BizCard”，并将数据上下文类设置为一个名为“商务数据库”。我期待得到一个名为 BizDB 的新类，它继承自 DbContext 并包含 3 个 DbSet 实例：

```
DbSet<BizCard>, DbSet<BizType>, DbSet<BizService>. 
```

尽管如此，我只上了一个课：

```
DbSet<BizCard>. 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:48:15.287

您正在使用 EF Code First 方法执行此操作。

`1\. So, you have to create a context class which should inherit DbContext containing required models as DbSet`

`2\. Build the solution. Otherwise it will not be displayed at controller creation`

然后您可以使用必要的模型及其 dbcontext 创建控制器。

# biztalk - 通过字符串变量引用编排中的端口

> ID：10686309
> 
> 赞同：0
> 
> 时间：2012-05-21T13:35:38.260
> 
> 标签：biztalk, biztalk-2010, orchestration

我正在尝试开发用于配置动态端口的通用 BizTalk 应用程序。我有一个编排，可以拉回每个端口的所有配置设置，我想遍历这些设置并配置端口。这些设置保存在 MSSQL 中，例如，其中两个属性是 PortName 和 Address。因此，在编排中，我想通过字符串变量 PortName 引用端口。那么是否有某种方法可以获取编排中所有端口的集合或通过字符串变量引用端口，即`Port['MyPortName'](Microsoft.XLANGs.BaseTypes.Address) = "file://c:\test\out\%MessageId%.xml"`谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:54:16.883

为了从编排中动态配置动态逻辑发送端口，必须将设置存储到持久数据存储（例如数据库或配置文件）中，并实现一种在运行时动态分配这些属性的方法。

但首先，我们需要了解配置动态发送端口时发生了什么。

**如何配置动态逻辑发送端口**

从编排[中配置动态逻辑发送端口的属性涉及两个步骤：](http://msdn.microsoft.com/en-us/library/cc185228%28v=BTS.10%29.aspx)

*   首先，必须在发送端口上指定[TransportType](http://msdn.microsoft.com/en-us/library/microsoft.xlangs.basetypes.transporttype%28v=bts.20%29)和目标[地址属性。](http://msdn.microsoft.com/en-us/library/microsoft.xlangs.basetypes.address(v=BTS.20).aspx)这通常在*Expression Shape*中完成，代码类似于：

    DynamicSendPort(Microsoft.XLANGs.BaseTypes.TransportType) = "文件"; DynamicSendPort(Microsoft.XLANGs.BaseTypes.Address) = "C:\Temp\Folder\%SourceFileName%";

*   其次，必须在传出消息本身的上下文中指定任何其他传输属性。几乎所有 BizTalk 适配器都有[其他属性](http://msdn.microsoft.com/en-us/library/aa562116%28v=bts.20%29.aspx)，用于消息引擎和 XLANG/s 编排引擎之间的通信。例如，[ReceivedFileName](http://msdn.microsoft.com/en-us/library/file.receivedfilename%28v=bts.10%29.aspx)上下文属性用于动态设置特定名称，以便 FILE 适配器何时将传出消息保存在其目标位置。作为构造传出消息的一部分，最好在*Assignment Shape内执行此操作：*

    OutgoingMessage(FILE.ReceiveFileName) = "HardCodedFileName.xml"

您会注意到大多数配置属性必须在传出消息的上下文中指定，指定名称空间前缀（例如 FILE）、属性名称（例如 ReceiveFileName），显然，还需要指定分配给相应属性的值。

事实上，所有上下文属性都是存在于*众所周知的* `Microsoft.BizTalk.GlobalPropertySchemas.dll`程序集中的类。这可以通过在 Visual Studio 的对象资源管理器中查找此程序集来确认。

![Microsoft.BizTalk.GlobalPropertySchemas.dll 中的 FILE.ReceivedFileName](../Images/6cebd2635155e35833a2ad524c18e92c.png)

尽管配置动态逻辑发送端口所需的大多数上下文属性都存在于此特定程序集中，但并非所有属性都存在。例如，MSMQ BizTalk 适配器使用单独的程序集来存储其上下文属性。显然，第三方或自定义适配器也带有附加程序集。

因此，为了使用如下所述的灵活方法在动态发送端口上设置上下文属性，需要四个信息：

*   包含上下文属性类的程序集的完全限定名称。
*   命名空间前缀。
*   属性名称。
*   财产价值。

**在持久性介质中存储端口设置**

以下 .XSD 架构说明了一种用于序列化端口设置的可能结构。

![ContextProperties XML 模式定义](../Images/6a0451fa5396b1ab0b0445fd7ad2f96c.png)

一旦序列化，指定的上下文属性就可以很容易地存储在 SQL 数据库或配置文件中。例如，以下是本文中用作示例的设置：

![ContextProperties 设置示例](../Images/f4dce0fbcd78226cb2165a782ca078e6.png)

**配置动态逻辑发送端口的灵活方法**

使用简单的帮助程序库，设置动态端口配置非常容易。首先，您必须从持久性介质中检索序列化设置。这可以使用 WCF-SQL 适配器和一个简单的存储过程轻松实现。

一旦检索到这些属性，就可以将这些属性反序列化为强类型的 C# 对象图。为此，首先使用以下命令行实用程序创建上面显示的 ContextProperties 模式的 C# 表示：

```
xsd.exe /classes /language:cs /namespace:Helper.Schemas .\ContextProperties.xsd 
```

这会生成一个部分类，可以使用以下方法进行改进：

```
namespace Helper.Schemas
{
    public partial class ContextProperties
    {
        public static ContextProperties Deserialize(string text)
        {
            using (MemoryStream stream = new MemoryStream())
            {
                byte[] buffer = Encoding.UTF8.GetBytes(text);
                stream.Write(buffer, 0, buffer.Length);
                stream.Seek(0, SeekOrigin.Begin);
                return (ContextProperties) 
                    Deserialize(
                          stream
                        , typeof(ContextProperties));
            }
        }

        public static Object Deserialize(Stream stream, Type type)
        {
            XmlSerializer xmlSerializer = new XmlSerializer(type);
            return xmlSerializer.Deserialize(stream);
        }
    }
} 
```

其次，应用此配置涉及根据反序列化的 ContextProperties 对象图中指定的上下文属性类的描述，从代码创建 XLANG/s 消息并使用反射动态设置上下文属性。

为此，我使用了从[Paolo Salvatori的](http://blogs.msdn.com/b/paolos/)[关于动态转换](http://blogs.msdn.com/b/paolos/archive/2010/01/29/how-to-boost-message-transformations-using-the-xslcompiledtransform-class.aspx)的系列文章中借用的技术，该技术包括创建自定义[BTXMessage](http://msdn.microsoft.com/en-us/library/microsoft.biztalk.xlangs.btxengine.btxmessage%28v=BTS.10%29.aspx)派生类，由 BizTalk XLANG/s 引擎在内部使用。

```
namespace Helper.Schemas
{
    using Microsoft.BizTalk.XLANGs.BTXEngine; // Found in Microsoft.XLANGs.BizTalk.Engine
    using Microsoft.XLANGs.Core; // Found in Microsoft.XLANGs.Engine

    [Serializable]
    public sealed class CustomBTXMessage : BTXMessage
    {
        public CustomBTXMessage(string messageName, Context context)
            : base(messageName, context)
        {
            context.RefMessage(this);
        }

        public void SetContextProperty(string assembly, string ns, string name, object value)
        {
            if (String.IsNullOrEmpty(ns))
                ns = "Microsoft.XLANGs.BaseTypes";
            if (String.IsNullOrEmpty(assembly))
                assembly = "Microsoft.BizTalk.GlobalPropertySchemas";

            StringBuilder assemblyQualifiedName = new StringBuilder();
            assemblyQualifiedName.AppendFormat("{0}.{1}, {2}", ns, name, assembly);

            Type type = Type.GetType(assemblyQualifiedName.ToString(), true, true);
            SetContextProperty(type, value);
        }

        internal void SetContextProperty(string property, object value)
        {
            int index = property.IndexOf('.');
            if (index != -1)
                SetContextProperty(String.Empty, property.Substring(0, index), property.Substring(index + 1), value);
            else
                SetContextProperty(String.Empty, String.Empty, property, value);
        }

    }
} 
```

现在，难题的最后一块是如何在 Orchestration 中使用这个自定义类。这可以使用以下帮助代码在*分配形状*中轻松完成：

```
namespace Helper.Schemas
{
    using Microsoft.XLANGs.BaseTypes;
    using Microsoft.XLANGs.Core; // Found in Microsoft.XLANGs.Engine

    public static class Message
    {
        public static XLANGMessage SetContext(XLANGMessage message, ContextProperties properties)
        {
            try
            {
                // create a new XLANGMessage

                CustomBTXMessage customBTXMessage = new CustomBTXMessage(message.Name, Service.RootService.XlangStore.OwningContext);

                // add parts of the original message to it

                for (int index = 0; index < message.Count; index++)
                    customBTXMessage.AddPart(message[index]);

                // set the specified context properties

                foreach (ContextPropertiesContextProperty property in properties.ContextProperty)
                    customBTXMessage.SetContextProperty(property.assembly, property.@namespace, property.name, property.Value);

                return customBTXMessage.GetMessageWrapperForUserCode();
            }

            finally
            {
                message.Dispose();
            }
        }
    }
} 
```

您可以在*分配形状*中使用此静态方法，如下面所示的代码，其中`OutboundMessage`表示您要设置上下文的消息：

```
OutboundMessage = Helper.Schemas.Message.SetContext(OutboundMessage, contextProperties); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T06:16:51.650

首先，您不应该尝试使用 Orchestration 进行这样的配置更改。从技术上讲，做您想做的事情是可行的，但作为一种实践，您不应该将业务流程与管理混为一谈。

执行此类操作的最佳方法是编写一些普通脚本或 PowerShell。

要回答您的问题，您可以从 ExplorerOM [http://msdn.microsoft.com/en-us/library/microsoft.biztalk.explorerom.btsorchestration_members(v=bts.20)中的 BtsOrchestration 类中获取所需的数据](http://msdn.microsoft.com/en-us/library/microsoft.biztalk.explorerom.btsorchestration_members%28v=bts.20%29)

# hibernate - @OrderBy 被休眠和 eclipselink 忽略？

> ID：10686312
> 
> 赞同：1
> 
> 时间：2012-05-21T13:35:51.167
> 
> 标签：hibernate, sorting, sql-order-by, eclipselink

我正在用@ElementCollection 测试@OrderBy，但它似乎不起作用。我检索拥有元素集合的实体并打印集合，它没有对任何东西进行排序..

```
@Entity
public class AtAsOverride

@ElementCollection(fetch = FetchType.LAZY)
@Column(name = "Strings")
@OrderBy(value="stringuri desc") // tried everything: without any value, strings, stringuri ..
private List<String> stringuri;

Query qq = em.createQuery("Select a from AtAsOverride a");
System.out.println(AtAsOverride.class.cast(qq.getResultList().get(0)).getStringuri()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:58:18.020

只需使用 @OrderBy("desc") 或 @OrderBy("asc") 因为它是原始类型。它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:47:59.617

最新版本的 EclipseLink 允许在基本 ElementCollections 上使用 @OrderBy("desc") 和 @OrderBy("asc")。以前这会被忽略。

尝试最新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T19:38:47.117

根据 JPA 规范，基本类型的 ElementCollection 上的 @OrderBy （这是您所拥有的）不应指定任何值。意思是，它应该只是：

```
@ElementCollection(fetch = FetchType.LAZY)
@Column(name = "Strings")
@OrderBy
private List<String> stringuri; 
```

这应该表明“排序将按基本对象的值”。这在第 11.1.38 节中介绍

# meteor - 如何取消部署流星应用程序？

> ID：10686320
> 
> 赞同：52
> 
> 时间：2012-05-21T13:36:16.413
> 
> 标签：meteor

我已经部署了一个应用程序： `meteor deploy a-meteor-app.meteor.com`.

有没有办法让我从meteor.com 取消部署？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2014-04-06T07:36:31.170

假设我在 url 上部署了一个应用程序：- [http://anotherajax.meteor.com/](http://anotherajax.meteor.com/)。

然后，要删除此部署的应用程序，请运行以下命令：-

```
meteor deploy --delete anotherajax.meteor.com 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-05-21T13:47:14.757

从[文档](http://docs.meteor.com/#meteordeploy)：

> 要删除您已部署的应用程序，请指定 --delete 选项以及站点。

# c# - FormClosing 关闭事件不写入文件

> ID：10686323
> 
> 赞同：1
> 
> 时间：2012-05-21T13:36:31.517
> 
> 标签：c#, event-handling, shutdown

我的计算机有一个备用电源，它与计算机和墙壁串联。当我从墙上拔下电源线时，备用电源会在 2-5 分钟后关闭计算机。正是在这段时间内，我想使用以下代码将数据写入文件：

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    if (e.CloseReason.Equals(CloseReason.WindowsShutDown))
    {
        writeContents("Interrupted");
        sendMessage("PWR - The Spring Test Machine has stopped");                
        return;
    }

    if (e.CloseReason.Equals(CloseReason.UserClosing)) 
    {
        if (MessageBox.Show("You are closing this application.\n\nAre you sure you wish to exit ?", "Warning: Not Submitted", MessageBoxButtons.YesNoCancel, MessageBoxIcon.Stop) == DialogResult.Yes)
        {
            writeContents("Interrupted");
            return;
        }
        else
            e.Cancel = true; 
    } 
} 
```

问题是它没有用。我认为闭幕式的活动从来没有被调用过。任何想法将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:46:57.407

从这里[http://www.daniweb.com/software-development/csharp/threads/253249/application-exit-does-not-trigger-the-formclosing](http://www.daniweb.com/software-development/csharp/threads/253249/application-exit-does-not-trigger-the-formclosing)

> 当您使用任务管理器“杀死”应用程序时，它不会触发任何事件，它只是停止执行，这就是您关闭已冻结的应用程序的方式。如果您等待它处理任何事件，那么它仍然会被冻结。
> 
> 至于当您重新启动计算机或关闭时，只有在有足够的时间时才会调用该事件，它们系统会告诉所有应用程序它正在关闭，并且只给它们很短的时间来处理业务，然后才会杀死它们。Windows 7 将显示一个对话框，告诉您哪些应用程序仍然很忙，并询问您是否要杀死它们并关闭或取消。但是对于 XP，它只会在 X 秒后杀死它们。

这几乎就是我想象 FormClosing 的行为的方式...... Application.ApplicationExit Event 会是一个更好的监听事件吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:47:07.797

以下是有关 FormClosing 事件属性的一些有用信息：

[FormClosingEventArgs.CloseReason 中的错误？](https://stackoverflow.com/questions/3631490/bug-in-formclosingeventargs-closereason)

您可以尝试使用 switch 语句，如下所示： [检测表单关闭的原因](https://stackoverflow.com/questions/1623756/c-sharp-detect-reason-for-form-closing)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:47:18.863

不确定它是否有效，因为我需要先检查它，而且我现在不在我的机器前.. 但是您是否也尝试过 CloseReason 枚举的其他元素？尝试 TaskManagerClosing 。在任何情况下，首先尝试抛出一个消息（消息框），看看你是否真的有你想要的正确 CloseReason 并且如果你不希望每次检查时都关闭电脑，也不要忘记使用 e.Cancel = true 。之后检查您写入文件的方法是否正常。

也许这也有助于 [在关闭应用程序时提示用户保存](https://stackoverflow.com/questions/462903/prompt-user-to-save-when-closing-app)

# haskell - MS Windows 上支持的数据库 Haskell

> ID：10686325
> 
> 赞同：1
> 
> 时间：2012-05-21T13:36:39.377
> 
> 标签：haskell

[安装Pathfinder](http://hackage.haskell.org/package/Pathfinder)时，我在 Windows 上遇到此错误，这是 DSH 依赖项之一。是否可以在 Windows 系统上安装[DSH ？](http://hackage.haskell.org/package/DSH)

> D:\Devs>cabal install pathfinder Resolving dependencies... [1 of 1] Compiling Main ( C:\DOCUME~1\kdv\LOCALS~1\Temp\Pathfinder-0 .5.103528\Pathfinder-0.5.10\Setup. hs, C:\DOCUME~1\kdv\LOCALS~1\Temp\Pathfinder-0 .5.103528\Pathfinder-0.5.10\dist\setup\Main.o ) 链接 C:\DOCUME~1\kdv\LOCALS~1 \Temp\Pathfinder-0.5.103528\Pathfinder-0.5.10\di st\setup\setup.exe ... setup.exe：程序 sh 是必需的，但找不到。cabal：错误：某些软件包无法安装：Pathfinder-0.5.10 在配置步骤中失败。例外是：ExitFailure 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:57:27.777

您可以尝试使用[Cygwin](http://www.cygwin.com/install.html)或[MSYS](http://www.mingw.org/wiki/MSYS)编译它。您至少需要以下命令行工具`%PATH%`：

*   `sh`
*   `rm`
*   `cp`
*   `tar`
*   `pwd`
*   `make`
*   `ar`
*   `ld`

这些工具是必要的，因为该库使用内部 C 库，而该库又使用`autotools`和关联的`configure`和`Makefile`s，它们分别由`sh`和解释`make`。如果您安装 MSYS 或 Cygwin，您将拥有必要的类 UNIX 环境来编译它。

当然，您也可以在 Linux 环境中安装该库；您将拥有更轻松的时间，因为您不必潜在地处理 MinGW 版本不兼容等问题。在您的位置上，我至少会考虑安装一个运行某种形式的 Linux 发行版的虚拟机，然后在那里完成我所有的开发- 这就是我在我的主要 Windows 机器上所做的。当您准备好部署时，在 Linux 上交叉编译 Windows Haskell 程序比在 Windows 上直接编译要容易得多，因为您不必处理版本冲突，并且您还可以选择为Linux 服务器（无论如何，这是大多数 RDBMS 倾向于运行的服务器）。

# php - 内连接和外连接产生相同的结果

> ID：10686328
> 
> 赞同：0
> 
> 时间：2012-05-21T13:36:52.530
> 
> 标签：php, mysql, sql

我在 Mysql 中有 2 个表，一个是承包商，另一个是项目，我想生成一个承包商项目报告，显示项目的批准。问题是 INNER JOIN、LEFT 和 RIGHT OUTER JOIN，都产生相同的结果，即使我忽略了看起来很奇怪的情况，也只会显示承包商的项目。这是我的陈述

```
SELECT DISTINCT (tbl_contractor.name_v), count( tbl_project.name_v ) 
FROM tbl_contractor 
INNER JOIN tbl_project 
  ON tbl_project.Contractor=tbl_contractor.contractor_id_v 
  ON tbl_project.Contractor = tbl_contractor.contractor_id_v 
LIMIT 0 , 30;

SELECT DISTINCT (tbl_contractor.name_v), count( tbl_project.name_v ) 
FROM tbl_contractor
LEFT OUTER JOIN tbl_project 
ON tbl_project.Contractor = tbl_contractor.contractor_id_v 
LIMIT 0 , 30; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:03:57.363

您有一个聚合函数`COUNT()`, 没有`GROUP BY`. 这意味着您的查询将仅返回一行。

您可能需要一个`GROUP BY`（承包商）：

```
SELECT tbl_contractor.name_v, COUNT( tbl_project.name_v ) 
FROM tbl_contractor
  LEFT OUTER JOIN tbl_project 
    ON tbl_project.Contractor = tbl_contractor.contractor_id_v 
GROUP BY tbl_contractor.contractor_id_v 
LIMIT 0 , 30; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:42:05.710

通过执行`SELECT DISTINCT (tbl_contractor.name_v)`查询将只为每个承包商名称返回一行，尝试删除不同的并查看是否获得更好的承包商 - 项目结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:57:08.917

这些查询实际上是按对承包商的查询分组的。如果每个承包商至少有一个项目，那么内连接和左外连接将返回相同的结果。如果有承包商没有项目，那么结果会受到 LIMIT 条款的影响。您只获得前 30 个，并且无论出于何种原因，匹配项首先出现。

# python - 使用python编辑子目录中的所有文件

> ID：10686329
> 
> 赞同：-1
> 
> 时间：2012-05-21T13:36:55.080
> 
> 标签：python

我正在尝试递归地遍历一系列目录（大约 3 级深）。在每个目录中都是一系列文本文件，例如，如果该行包含某个字符串，我想用目录路径替换一行文本。

```
/path/to/text/file/fName.txt 
```

如果 fName.txt 文本中的 fName 中的一行包含字符串“String1”，我想用“some text”+ file 替换这一行，其中 file 是路径的最后一部分。

这似乎在 python 中应该很容易，但我似乎无法管理它。

编辑：为一个写得很糟糕的问题道歉，我不得不匆忙离开，不应该按回车键。

这是我到目前为止所拥有的

```
import os

for dirname, dirs, files in os.walk("~/dir1/dir2"):
    print files
    for fName in files:
            fpath = os.path.join(dirname, fName)
            print fpath
            f = open(fpath)
            for line in f:
                #where I'm getting stuck
                s = s.replace("old_txt", "new_txt")

            #create new file and save output 
```

我遇到的问题是如何仅根据线路的一部分替换整条线路。例如，如果该行是

```
That was a useless question, 
```

我似乎无法替换我想要的东西。我要做的是仅基于搜索“无用”来更改整行。另外，有没有比重写整个文件更好的修改单行的方法？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:44:28.907

[`os.walk`](http://docs.python.org/library/os.html#os.walk)（看例子）就是你所需要的

用 解析每个文件`with open(...) as f:`，分析它，然后用`with open(..., 'w') as f:`

# php - 通过下拉 Jquery 填充文本输入

> ID：10686331
> 
> 赞同：0
> 
> 时间：2012-05-21T13:37:00.447
> 
> 标签：php, jquery, mysql

我从 MYSQL 数据库中提取数据以填充下拉

```
<td class="<?php print $Bank_ca_error;?>">Bank Name</td> <td> <select name="Bank" id="Bank" tabindex=24 style="color: <?php print $TextColour;?>"/> <option><?php print $_SESSION['Bank_ca'] ;?></option> <?php //Get Data to populate drop down $BankQuery = "SELECT BankName FROM tblbank ORDER BY BankName"; $BankResult = mysql_query ($BankQuery); While($nt=mysql_fetch_array($BankResult)) { print"<option $nt[BankName]>$nt[BankName]</option>"; } ?> </select> </td> 
```

我想根据选择的值填充文本输入。所以基本上从列表中选择银行并让它在文本输入中自动填充通用分行代码。

我看到了一个使用 Jquery 的示例，但在这方面我完全是个菜鸟，我无法让它正常工作

我在 Head 部分添加了以下内容

```
<script type="text/javascript" src="jquery-1.4.2.min.js"></script> <script type="text/javascript"> jQuery(document).ready(function(){ jQuery('#Bank').live('change', function(event) { $.ajax({ url : 'getData.php', type : 'POST', dataType: 'json', data : $('#myform').serialize(), success: function( data ) { for(var id in data) { $(id).val( data[id] ); } } }); }); }); </script> 
```

然后我将此添加到 getData.php 文件中

```
<?php include "../../../includes/dbinfo.inc"; //Connect to database     mysql_connect($db_host, $db_username, $db_password); @mysql_select_db($db_database) or     die("Unable to select database"); $BankName = $_POST['Bank']; // Selected Bank $query = "SELECT * FROM tblbank WHERE BankName ='{$BankName}'"; $result = mysql_query($query); $row = mysql_fetch_array($result) $BranchCode = $row['UniversalCode']; $arr = array(     'input#BranchCode' => $BranchCode ); echo json_encode( $arr ); ?> 
```

并将以下内容添加到相关的输入和下拉列表中

```
<form id='myform'> </form> 
```

我尝试在此[站点](https://stackoverflow.com/questions/3657127/jquery-populate-text-input-from-table-based-on-select-value)的其他地方使用解决方案，但无法使其正常工作

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:47:22.493

如果我正确理解你想要做什么，那么你不需要ajax，试试这样的

```
<?php
include "../../../includes/dbinfo.inc"; 
//Connect to database
mysql_connect($db_host, $db_username, $db_password); @mysql_select_db($db_database) or die("Unable to select database");

$res = mysql_query("SELECT UniversalCode, BankName FROM tblbank ORDER BY BankName");
while($row = mysql_fetch_assoc($res)) {
    // associative array of banks
    $banks[$row['UniversalCode']] = $row['BankName'];
}
?>
<script type="text/javascript" src="jquery-1.4.2.min.js"></script>
<script type="text/javascript">
$(document).ready( function() {
    $('#Bank').change( function() {
        // enter in an empty field code of the selected bank
        $('#UniversalCode').val( $(this).val() );
    });
});
</script>
<td class="<?php print $Bank_ca_error;?>">Bank Name</td> 
<td> 
<select name="Bank" id="Bank" tabindex=24 style="color: <?php print $TextColour;?>"/> 
    <? foreach($banks as $code=>$name) { ?>
        <option value="<?=$code?>"><?=$name?></option> 
    <? } ?>
</select>
<input value="" id="UniversalCode">
</td> 
```

# php - 在mysql数据库中保存数组

> ID：10686333
> 
> 赞同：30
> 
> 时间：2012-05-21T13:37:04.550
> 
> 标签：php, mysql, arrays

我想在将总订单发送到 Paypal 之前保存额外信息。对于每个项目，我在我的 MySQL 数据库中创建了一个我想要存储它的列。现在我正在考虑将其保存为一个数组，以便稍后读取以创建 PHP 页面。额外字段取自输入表单字段。

通过使用数组，我可以确保不会混淆信息吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-21T13:45:24.047

[`serialize`](http://php.net/serialize)您可以使用/存储数组[`unserialize`](http://php.net/unserialize)。使用该解决方案，它们不能轻易地从其他编程语言中使用，因此您可以考虑使用[`json_encode`](http://php.net/json_encode)/[`json_decode`](http://php.net/json_decode)代替（这为您提供了广泛支持的格式）。*避免*为此使用`implode`/ `explode`，因为您最终可能会遇到错误或安全漏洞。

请注意，这会使您的表非规范化，这可能是个坏主意，因为您无法轻松查询数据。因此，在继续之前仔细考虑这一点。您可能需要查询数据以进行统计或其他方式吗？是否有其他原因来规范化数据？

另外，不要保存原始`$_POST`数组。有人可以轻松地制作自己的 Web 表单并将数据发布到您的网站，从而发送一个占用大量空间的非常大的表单。保存您想要的那些字段，并确保在保存之前验证数据（这样您就不会得到无效值）。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-07-24T09:28:38.920

完成类似事情的方式是**序列化**数组，这意味着“用它制作一个字符串”。为了更好地理解这一点，请看一下：

```
$array = array("my", "litte", "array", 2);

$serialized_array = serialize($array); 
$unserialized_array = unserialize($serialized_array); 

var_dump($serialized_array); // gives back a string, perfectly for db saving!
var_dump($unserialized_array); // gives back the array again 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-21T13:40:24.703

使用 PHP 函数`serialize()`将数组转换为字符串。这些字符串可以很容易地存储在 MySQL 数据库中。`unserialize()`如果需要，可以使用它们再次转换为数组。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-09-19T05:21:11.877

**要使用 PHP 将任何数组（或任何对象）转换为字符串，请调用 serialize()：**

```
$array = array( 1, 2, 3 );
$string = serialize( $array );
echo $string; 
```

**$string 现在将保存数组的字符串版本。上述代码的输出如下：**

```
a:3:{i:0;i:1;i:1;i:2;i:2;i:3;} 
```

**要将字符串转换回数组，请使用 unserialize()：**

```
// $array will contain ( 1, 2, 3 )
$array = unserialize( $string ); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-11-13T11:10:08.387

```
<?php
$myArray = new array('1', '2');
$seralizedArray = serialize($myArray);
?> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-11-28T17:02:01.970

将其存储在 RDBMs 表中使用逗号分隔符的多值列中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-26T06:52:25.457

您可以使用 MySQL JSON 数据类型来存储数组

```
mysql> CREATE TABLE t1 (jdoc JSON); 
```

查询正常，0 行受影响（0.20 秒）

```
mysql> INSERT INTO t1 VALUES('{"key1": "value1", "key2": "value2"}'); 
```

查询正常，1 行受影响（0.01 秒）

在 PHP 中获取上述对象

```
json_encode(["key1"=> "value1", "key2"=> "value2"]); 
```

更多在[https://dev.mysql.com/doc/refman/8.0/en/json.html](https://dev.mysql.com/doc/refman/8.0/en/json.html)

# php - 如何在两个域上管理相同的代码？

> ID：10686338
> 
> 赞同：1
> 
> 时间：2012-05-21T13:37:16.180
> 
> 标签：php, html, apache, svn, gettext

我有一个多语言项目，

该项目与 HE/EN 语言完全兼容。

在一种情况下，它将作为一个大型以色列项目的子文件夹上传，

在另一种情况下，它将被用作它自己的.com 英文域上的完整站点。

我目前为以色列项目设置了 SVN，

我还没有为 .com 创建一个 SVN，这是正确的方法吗，为此保留 2 个 depo？然后我必须确保在以色列项目上编写的代码总是手动复制到 .com 文件夹，

这可以更有效地管理吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:45:21.173

是的，这绝对可以更有效地管理。这里的这个陈述是主要问题：

> 然后，我必须确保始终将在以色列项目上编写的代码手动复制到 .com 文件夹中。

该过程不仅效率低下，而且极易出错。而且它绝对不会扩展。基本上，您将开发/测试/部署/等加倍。努力。如果您需要部署应用程序的另一个实例，您将付出三倍的努力。等等。

您要做的是隔离应用程序实例之间不同的组件。仅仅是语言内容吗？是整个用户界面吗？如果是整个 UI，那么您会希望该 UI 尽可能轻薄。（好吧，无论如何你都想要那个。）那么你所要做的就是 UI 工作。其余逻辑（业务逻辑、数据访问、服务等）可以在应用程序的所有实例中保持不变。

如果它只是文本内容，那么也许您可以重新分解要从数据库中提取的文本。每一个标签，每一篇文章，每一个菜单项，等等。有一些 CMS 系统可以很好地做到这一点，尽管我没有具体的建议。但总体思路是让 UI 成为一个由特定于该应用程序实例的数据填充的空包装器。然后每个实例将通过简单地管理该数据来控制它的“语言”（它的一般内容）。

您绝对不希望为此使用多个代码存储库。毕竟，如果您有两个代码存储库，哪一个是正确的？如果在一个存储库中进行了更改，但在另一个存储库中没有更改，那么哪一个是正确的？你的代码应该有一个单一的“事实来源”。多个真相来源意味着没有真相。

# firefox-addon - 为 Firefox 10 安装 Xpather

> ID：10686342
> 
> 赞同：0
> 
> 时间：2012-05-21T13:37:34.380
> 
> 标签：firefox-addon, xpi, forward-compatibility, firefox-10

我想在 Firefox 10 中使用[Xpather](https://addons.mozilla.org/en-US/firefox/addon/xpather/)。当我尝试安装它时，Firefox 说无法安装 Xpather，因为它不兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:56:45.413

You can redefine the Firefox version compatibility as in an [unrelated question](https://stackoverflow.com/questions/11442844/updating-my-firefox-extension-autoupdates-not-working). Use the [Addon Compatibility Reporter](https://addons.mozilla.org/en-US/firefox/addon/add-on-compatibility-reporter/) or open a thread on the [Mozilla support forum](https://support.mozilla.org/en-US/questions/new) to report this.

# c# - 如何阻止异步 tcp .NET 代码耗尽整个系统的资源

> ID：10686346
> 
> 赞同：9
> 
> 时间：2012-05-21T13:37:52.490
> 
> 标签：c#, .net, asynchronous, tcp

在我的一些异步 tcp 服务器代码中，偶尔会发生错误，导致进程消耗整个系统的内存。在查看日志、事件查看器和一些[MS 文档](http://support.microsoft.com/kb/947862)时，如果“调用应用程序多次对同一个客户端进行异步 IO 调用，那么如果远程客户端停止其结束，您可能会看到堆碎片和私有字节增加/O" 这会导致内存使用量激增以及 System.Threading.OverlappedData 结构和字节数组的固定。

知识库文章提出的解决方案是“使用异步 IO 设置未完成的缓冲区数量（发送或接收）的上限”。

如何做到这一点？这是指发送到 BeginRead 的 byte[] 吗？那么解决方案是否只是用信号量包装访问字节[]？

编辑：信号量控制对字节缓冲区的访问或仅具有静态大小的字节缓冲区池是两种常见的解决方案。我仍然担心的一个问题是，当这个异步客户端问题发生时（实际上可能是一些奇怪的网络事件），信号量或字节缓冲池会阻止我用完内存，但这并不能解决问题。我的缓冲区池可能会被问题客户端吞噬，实际上将正确功能的合法客户端锁定在外。

编辑2：遇到了这个很棒的[答案](https://stackoverflow.com/questions/4830417/manually-unpinning-a-byte-in-c)。基本上它显示了如何手动取消固定对象。虽然异步 TCP 代码将固定保留在幕后运行时规则，但可以通过在使用前显式固定每个缓冲区，然后在块的末尾或在 finally 中取消固定来覆盖它。我现在正试图弄清楚...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T20:40:39.910

解决该问题的一种方法是预先分配异步通信中使用的缓冲区和其他数据结构。如果在启动时预分配，则不会有碎片，因为内存自然会驻留在堆的同一区域。

我建议使用添加到 .Net 3.5 SP1 的`ReceiveAsync`/ `SendAsync`API，它允许您缓存或预分配`SocketAsyncEventArgs`存储在属性中的结构和内存缓冲区`SocketAsyncEventArgs.Buffer`，这与旧的`BeginXXX`/ `EndXXX`API 不同，它只允许缓存或预分配内存缓冲区。

使用旧 API 也会产生大量 CPU 成本，因为 API 在内部一次又一次地创建 Windows 重叠 I/O 结构。在新的 API 中，这发生在 内`SocketAsyncEventArgs`，因此通过池化这些对象，CPU 成本只需支付一次。

关于您对固定的更新：固定是有原因的，即防止 GC 在碎片整理期间移动缓冲区。通过手动取消固定，您可能会导致内存损坏。

# build - IBM Rational Build Forge 适配器

> ID：10686351
> 
> 赞同：0
> 
> 时间：2012-05-21T13:38:04.323
> 
> 标签：build, adapter, forge, ibm-rational

我想问是否有人知道如何构建可在 Build Forge 中用作适配器的 XML 文件，我的意思是是否有任何关于如何编写此类 XML 文件的参考，以及此 XML 文件如何处理变量，因为有时我可以看到这种模式的一些出现（$1，$2 ...等），我不知道这些模式指的是什么......

感谢您的帮助并感谢您...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T00:22:16.493

不幸的是，Build Forge 应用程序中包含的文档并不是最完整的。我经常不得不使用他们的在线文档。

您很可能正在查看适配器的 Command 或 ResultBlock 部分。

IBM Build Forge 适配器在 XML 中使用 Perl 语法。

我建议观看 IBM 在线发布的视频。

[https://mediacenter.ibm.com/media/Using+Build+Forge+adaptors/0_9g8f456l/33943992](https://mediacenter.ibm.com/media/Using+Build+Forge+adaptors/0_9g8f456l/33943992)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-11T16:15:30.030

接受的答案有点陈旧，一些链接已经改变。我本人深陷这个特殊的地狱，所以这是为那些必须处理 Build Forge 和古怪的 API 和参差不齐的文档的人准备的。

视频已移动。现在可以在这里找到： [https ://mediacenter.ibm.com/media/Using+Build+Forge+adaptors/0_9g8f456l/33943992](https://mediacenter.ibm.com/media/Using+Build+Forge+adaptors/0_9g8f456l/33943992)

观看视频后，这里有一个关于如何在 ClearCase 中为 Build Forge 制作基本适配器的食谱说明集：http: [//www.ibm.com/developerworks/rational/library/continuous-integration-build-forge-透明箱/](http://www.ibm.com/developerworks/rational/library/continuous-integration-build-forge-clearcase/)

我设法制作了一个 perl cli 脚本，该脚本将触发 Build Forge 项目构建，但它还没有得到正确的标记。到目前为止，我发现的最佳方法是在 Build Forge 中安排构建作业，然后使用触发另一个 perl cli 脚本的 cron 作业单独运行部署。我玩了带有标签的游戏​​，通过让构建过程将标签写入到 Build Forge 外部的文件中，perl api 部署脚本将其从构建过程中顺利地从构建传递到部署。这是一个破碎的组合，但这是我迄今为止最好的。我希望适配器可以使该过程更加精确。一旦我有一个完整的解决方案，我会更新这个条目，但这是我为持续集成处理过的最古怪的工具集。

# iphone - SearchBar 中的 ScopeBar

> ID：10686358
> 
> 赞同：2
> 
> 时间：2012-05-21T13:38:35.483
> 
> 标签：iphone, xcode

我想在 SearchBar 中更改 ScopeBar 的 ScopeBarButton 的 backGroundColor。我该如何改变它，如下所示。

[红][橙][黄][绿][蓝][紫]

告诉我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:49:09.703

您只能更改整个 searchBar 的颜色，而不能仅更改 scopeButton。但是您确实可以选择为您的范围栏设置背景**图像*：*

```
[searchBar setScopeBarBackgroundImage:[UIImage imageNamed:@"bg.jpg"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T02:04:06.773

可以先画渐变，拿到图片，然后用ABros说的设置backgroundImage：

```
UIGraphicsBeginImageContext(scopeBar.frame.size);
CGContextRef context = UIGraphicsGetCurrentContext();
NSArray *colors = [NSArray arrayWithObjects:(id)[UIColor redColor].CGColor, (id)[UIColor orangeColor].CGColor, (id)[UIColor yellowColor].CGColor, (id)[UIColor greenColor].CGColor, (id)[UIColor blueColor].CGColor, (id)[UIColor purpleColor].CGColor, nil];
CGFloat locations[6] = {0.0,0.2,0.4,0.6,0.8,1.0};
CGGradientRef gradient = CGGradientCreateWithColors(CGColorSpaceCreateDeviceRGB(), (__bridge CFArrayRef)colors, locations);
CGContextDrawLinearGradient(context, gradient, CGPointZero, CGPointMake(scopeBar.size.width, 0), nil);
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

[searchBar setScopeBarBackgroundImage:image]; 
```

# java - Guice：如何打印模块的绑定？

> ID：10686360
> 
> 赞同：3
> 
> 时间：2012-05-21T13:38:38.940
> 
> 标签：java, dependency-injection, guice

在过去的两天里，我一直在盯着我的代码中的一个讨厌的错误，围绕着我的 Guice 模块和我在其中声明的绑定。我的模块中声明了大约 20 个绑定，其中只有 1 个不工作。

我已经*用尽*`module.print()`了这里的所有选项，并且想知道Guice 库中是否有类似- 的方法，我可以在其中打印出所有模块绑定的 String 版本；无论是这样还是以某种方式让 Guice 记录它在读取我有缺陷的绑定时所做的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T12:07:10.987

```
Injector injector = Guice.createInjector(myModuleInstance);
Map<Key<?>,Binding<?>> map = injector.getBindings();
for(Entry<Key<?>, Binding<?>> e : map.entrySet()) {
    System.out.println(e.getKey() + ": " + e.getValue());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T14:56:26.350

herpylderp 的解决方案在大多数情况下应该可以工作。如果您想在不创建 Injector 的情况下单独查看模块（例如，如果您有一个配置错误阻止您构建 Injector），您可以使用 Guice SPI 工具提取一组绑定列表模块。它还可以让你做更多的事情，但这不是重点；）

请参阅： [https ://github.com/google/guice/wiki/ExtendingGuice#examples](https://github.com/google/guice/wiki/ExtendingGuice#examples)

在列出的示例中，他们检查了静态注入的情况。对于这种情况，您可以执行相同的操作，但要覆盖`visit(Binding)`.`ElementVisitor`

另请参阅：http: [//google.github.io/guice/api-docs/4.2.2/javadoc/index.html ?com/google/inject/spi/Elements.html](http://google.github.io/guice/api-docs/4.2.2/javadoc/index.html?com/google/inject/spi/Elements.html)

另外，请注意，每个方法`Binding`都有一个`getSource()`在这种情况下可能有用的方法。

注意：我承认我以前没有尝试过做这个*确切*的事情，所以让我知道它是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-19T15:06:56.180

与上面的答案 IAmYourFaja 相同，但风格更现代：

```
import static java.util.stream.Collectors.joining;
String stringBinder = injector.getAllBindings().entrySet().stream()
            .map(e ->  e.getKey() + ": " +  e.getValue())
            .collect(joining("\n")); 
```

# jquery - Telerik 扩展 DatePicker 和 JQuery DatePicker

> ID：10686363
> 
> 赞同：2
> 
> 时间：2012-05-21T13:38:45.843
> 
> 标签：jquery, asp.net-mvc, jquery-ui, telerik, telerik-mvc

我主要针对图表功能评估 Telerik MVC 扩展。我也在使用 JQuery 和 JQuery.Ui thoruhgout 应用程序。为了让网格正常工作，我通过放置这个包含了 Telerik 扩展。`@Html.Telerik().ScriptRegistrar().DefaultGroup(group => group.Combined(true).Compress(true)` 但是，这似乎包含了它自己的 JQuery 版本，它破坏了其他页面上的 JQuery Datepicker。有没有其他人看到这个？或者有没有人发现“告诉”telerik 不包含 JQuery，而只使用我的应用程序已经包含的那个？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:43:02.830

使用这一行来使用你自己的 jQuery

```
@(Html.Telerik().ScriptRegistrar().jQuery(false).DefaultGroup(group => group.Combined(true).Compress(true))) 
```

这指示 Telerik 不要使用与控件一起安装的 jQuery 版本，而是使用您在脚本部分中包含的版本

# c - 在 Linux 上使用 TCP 传输文件

> ID：10686368
> 
> 赞同：6
> 
> 时间：2012-05-21T13:39:10.360
> 
> 标签：c, linux, file, sockets, tcp

我正在尝试在 Linux 上进行 TCP 文件传输。建立连接后，服务器应发送“send.txt”给客户端，客户端接收文件并保存为“receive.txt”。然后连接中断。

正确的输入输出应该是：

服务器端：

```
$./server &
[server] obtain socket descriptor successfully.
[server] bind tcp port 5000 in addr 0.0.0.0 successfully.
[server] listening the port 5000 successfully.
[server] server has got connect from 127.0.0.1.
[server] send send.txt to the client…ok!
[server] connection closed. 
```

客户端：

```
$./client 
[client] connected to server at port 5000…ok!
[client] receive file sent by server to receive.txt…ok!
[client] connection lost. 
```

并且服务器和客户端都应该在该过程之后退出。

但我现在所拥有的

```
$ ./server &
[server] obtain socket descriptor successfully.
[server] bind tcp port 5000 in addr 0.0.0.0 sucessfully.
[server] listening the port 5000 sucessfully.
[server] server has got connect from 127.0.0.1.
[server] send send.txt to the client...ok!
[server] connection closed.

/*Here the server doesn't exit*/

$ ./client
[client] connected to server at port 5000...ok!

/*Here the client doesn't exit*/ 
```

此外，还会生成一个空的“receive.txt”。

我的代码最初是为传输简单字符串而编写的，并且可以正常工作。所以我猜问题出在文件传输部分。

我的代码如下：

服务器.c

```
#include <stdlib.h>
#include <stdio.h>
#include <errno.h>
#include <string.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <sys/wait.h>
#include <sys/socket.h>
#define PORT 5000 // The port which is communicate with server
#define BACKLOG 10
#define LENGTH 512 // Buffer length
int main ()
{
    int sockfd; // Socket file descriptor
    int nsockfd; // New Socket file descriptor
    int num;
    int sin_size; // to store struct size
    struct sockaddr_in addr_local;
    struct sockaddr_in addr_remote;
    /* Get the Socket file descriptor */
    if( (sockfd = socket(AF_INET, SOCK_STREAM, 0)) == -1 )
    {
        printf ("ERROR: Failed to obtain Socket Descriptor.\n");
        return (0);
    }
    else printf ("[server] obtain socket descriptor successfully.\n");
    /* Fill the local socket address struct */
    addr_local.sin_family = AF_INET; // Protocol Family
    addr_local.sin_port = htons(PORT); // Port number
    addr_local.sin_addr.s_addr = INADDR_ANY; // AutoFill local address
    bzero(&(addr_local.sin_zero), 8); // Flush the rest of struct
    /* Bind a special Port */
    if( bind(sockfd, (struct sockaddr*)&addr_local, sizeof(struct sockaddr)) == -1 )
    {
        printf ("ERROR: Failed to bind Port %d.\n",PORT);
        return (0);
    }
    else printf("[server] bind tcp port %d in addr 0.0.0.0 sucessfully.\n",PORT);
    /* Listen remote connect/calling */
    if(listen(sockfd,BACKLOG) == -1)
    {
        printf ("ERROR: Failed to listen Port %d.\n", PORT);
        return (0);
    }
    else printf ("[server] listening the port %d sucessfully.\n", PORT);
    int success = 0;
    while(success == 0)
    {
        sin_size = sizeof(struct sockaddr_in);
        /* Wait a connection, and obtain a new socket file despriptor for single connection */
        if ((nsockfd = accept(sockfd, (struct sockaddr *)&addr_remote, &sin_size)) == -1) 
            printf ("ERROR: Obtain new Socket Despcritor error.\n");
        else printf ("[server] server has got connect from %s.\n", inet_ntoa(addr_remote.sin_addr));
        /* Child process */
        if(!fork())
        {
            char* f_name = "send.txt";
            char sdbuf[LENGTH]; // Send buffer
            printf("[server] send %s to the client...", f_name);
            FILE *fp = fopen(f_name, "r");
            if(fp == NULL)
            {
                printf("ERROR: File %s not found.\n", f_name);
                exit(1);
            }
            bzero(sdbuf, LENGTH);
            int f_block_sz;
            while((f_block_sz = fread(sdbuf, sizeof(char), LENGTH, fp))>0)
            {
                if(send(nsockfd, sdbuf, f_block_sz, 0) < 0)
                {
                    printf("ERROR: Failed to send file %s.\n", f_name);
                    break;
                }
                bzero(sdbuf, LENGTH);
            }
            printf("ok!\n");
            success = 1;
            close(nsockfd);
            printf("[server] connection closed.\n");
            while(waitpid(-1, NULL, WNOHANG) > 0);
        }
    }
} 
```

客户端.c

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>
#include <netdb.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <sys/socket.h>
#define PORT 5000
#define LENGTH 512 // Buffer length
int main(int argc, char *argv[])
{
    int sockfd; // Socket file descriptor
    char revbuf[LENGTH]; // Receiver buffer
    struct sockaddr_in remote_addr; 
    /* Get the Socket file descriptor */
    if ((sockfd = socket(AF_INET, SOCK_STREAM, 0)) == -1)
    {
        printf("ERROR: Failed to obtain Socket Descriptor!\n");
        return (0);
    }
    /* Fill the socket address struct */
    remote_addr.sin_family = AF_INET; 
    remote_addr.sin_port = htons(PORT); 
    inet_pton(AF_INET, "127.0.0.1", &remote_addr.sin_addr); 
    bzero(&(remote_addr.sin_zero), 8);
    /* Try to connect the remote */
    if (connect(sockfd, (struct sockaddr *)&remote_addr, sizeof(struct sockaddr)) == -1)
    {
        printf ("ERROR: Failed to connect to the host!\n");
        return (0);
    }
    else printf("[client] connected to server at port %d...ok!\n", PORT);
    //printf ("OK: Have connected to %s\n",argv[1]);
    printf("[client] receive file sent by server to receive.txt...");
    char* f_name = "receive.txt";
    FILE *fp = fopen(f_name, "a");
    if(fp == NULL) printf("File %s cannot be opened.\n", f_name);
    else
    {
        bzero(revbuf, LENGTH);
        int f_block_sz = 0;
        int success = 0;
        while(success == 0)
        {
            while(f_block_sz = recv(sockfd, revbuf, LENGTH, 0))
            {
                if(f_block_sz < 0)
                {
                    printf("Receive file error.\n");
                    break;
                }
                int write_sz = fwrite(revbuf, sizeof(char), f_block_sz, fp);
                if(write_sz < f_block_sz)
                {
                    printf("File write failed.\n");
                    break;
                }
                bzero(revbuf, LENGTH);
            }
            printf("ok!\n");
            success = 1;
            fclose(fp);
        }
    }
    close (sockfd);
    printf("[client] connection lost.\n");
    return (0);
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T13:49:02.837

您需要在代码中添加`f_block_sz`代码。`recv()`有几个可能的返回值：

*   `<0`-- 错误，`errno`( `errno.h`)中的错误号
*   `0`-- 连接关闭
*   `>0`-- 数据读取，字节数

您需要处理第二种情况。添加这个`else`案例：

```
else if(f_block_sz)
{
  break;
} 
```

这样当服务器关闭连接时循环将被打破，您的代码将打印您`[client] connection lost`并退出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T14:24:11.860

您还有另一个问题，因为您的服务器程序是多进程的，并且每次获得传入连接时都会分叉。父母保持活动状态以接受新连接，而孩子处理连接。子进程的退出不足以导致父进程也退出。

如果您只想处理一个连接，请不要使用 fork。

如果您希望继续当前的设置，那么您将需要更改要使用的子进程，`_exit`而不是`exit`让父进程处理`SIGCHLD`信号（在子进程退出时收到）。

IE。

```
#include <signal.h>

void terminate(int signal) {
    // close sockfd -- you will need to make it global
    // or have terminate alter some global variable that main can monitor to 
    // detect when it is meant to exit
    exit(0); // don't exit if you choose the second option
}

int main() {

    signal(SIGCHLD, terminate);

    ...

} 
```

# javascript - div onclick 仅在可视区域

> ID：10686369
> 
> 赞同：2
> 
> 时间：2012-05-21T13:39:11.357
> 
> 标签：javascript, html, onclick, textarea

这是场景：

```
<div style="position: absolute; left: 10px; top: 10px; width:50%; height: 50%; border: 1px solid #000000" onclick="alert(0)">
    <textarea style="position: absolute; left: 10px; top: 10px; width:50%; height: 50%; border: 1px solid #FF0000" ondblclick="alert(1)"></textarea>
</div> 
```

主要问题是 textarea 的 ondblclick 事件没有被触发。

发生的情况是，如果我尝试在 textarea 中双击，则会触发 div onclick。我希望 div 的 onclick 仅在我单击 textarea 未覆盖的 div 区域时发生。我怎样才能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:42:52.377

尝试阅读[事件委托](http://www.nczonline.net/blog/2009/06/30/event-delegation-in-javascript/)[并不显眼地](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)添加处理程序

基本上，您可以为`div`元素分配一次单击或 dblclick 处理程序。在该处理程序中，您可以确定原始元素并采取必要的操作。这些链接应为您提供有关此的更多信息。

**编辑** [一个基本示例](http://jsbin.com/omawew/edit#source)（使用 jquery 和一个处理函数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:42:45.663

取消活动就行了。对于传统的事件附加，你必须放在`return false;`最后，但我建议使用一些更现代的方法来附加事件侦听器（即，`addEventListener`或者`attachEvent`对于 IE8 和更早版本）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T14:14:02.467

您可以使用计时器来检测意图。

当点击发生时设置一个计时器，如果没有后续点击发生，该计时器将被执行。

双击清除计时器并执行默认的双击功能。

如下，

```
var dblClickIntentTimer = null;

elem.click(function(){
   dblClickIntentTimer = setTimeout(function() {
      //Wait for 100 ms and then execute 'click' functionality here
   }, 100);
});

elem.dblclick(function(){
   clearTimeout(dblClickIntentTimer);

   //Do double-click functionality here  

}); 
```

# javascript - 同时打开两个jquery datepickers

> ID：10686373
> 
> 赞同：1
> 
> 时间：2012-05-21T13:39:31.960
> 
> 标签：javascript, jquery, uidatepicker

我有两个输入字段，其中包含一个触发日期选择器打开的类。两者都可以独立工作，即当我单击一个或另一个时，但我希望在单击任一输入字段时打开两个日期选择器。

这是代码的脚本部分

```
 $(document).ready(function() {

                    $( ".datefields" ).datepicker({ dateFormat: 'dd/mm/yy',numberOfMonths: 1, yearRange: "2012:2014", changeYear: true, changeMonth: true}); 
```

这是html

```
<div id="quoteformcollection">
<h1>Collection</h1>

<input type"text" class="startTbl locationfields" id="AutoLocStart" value="Please Type a Collection Location"onclick="clearVal(this);"/>
    <input type="hidden" id="DepotStart" value=""/></td>

<input type="text" class="datefields" id="collectiondate" value="21/05/2012"/>
<input type"text" class="timefields" value="12:00" />
</div> 

<div id="quoteformreturn">
<h1>Return</h1>

<input type"text" class="locationfields" value="Enter the city or location for return" />
<input type"text" id="returndate" class="datefields" value="21/05/2012" />
<input type"text" class="timefields" value="12:00" />
</div> 
```

我曾尝试自己寻找答案，但对 jquery 很陌生并且有点挣扎，所以任何帮助都将不胜感激。

我还希望在第一个日期选择器中选择任何值，第二个中的默认日期增加 x 天数，我再次不确定最好的方法。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:45:09.920

例如，尝试使用此代码链接两个数据选择器：

```
$('#collectiondate').datepicker({
    dateFormat: "@",
    onSelect: function(dateText, inst) {
        var dateText = eval(dateText);
        var min = new Date();
        min.setTime(dateText);
        $('#end').datepicker('option', 'minDate', min);
    }
});

$('#returndate').datepicker({
    dateFormat: "@",
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:46:41.963

我认为您必须使用“内联”日历并通过 jQuery / Javascript 自己管理它的弹出方式。您需要将 cal 指向一个 div 标签才能内联使用它。

[http://jqueryui.com/demos/datepicker/#inline](http://jqueryui.com/demos/datepicker/#inline)

# iphone - 如何从 iPhone 应用程序中的 URL 读取 .rtf 文件

> ID：10686381
> 
> 赞同：2
> 
> 时间：2012-05-21T13:39:54.657
> 
> 标签：iphone, ios, uitextview, rtf, readfile

我的应用需要从 URL 读取 .rtf 文件。我要把它读成

```
 NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@.rtf",_URL]];
    NSError* error;
    NSString *content = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:&error]; 
```

现在，当我在 UITextView 中加载此文本时。它给了我带有 { 和 / 字符的标签以及原始文件文本。请指导我如何阅读不包含任何括号和 html 数据的正确文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:49:51.207

.rtf 文件始终包含标签，用于格式化文本颜色对齐和其他属性。

请打开该 .rtf 文件进行文本编辑并将该文件的所有文本部分转换为简单文本。

那么您现有的代码将起作用。

否则，不要使用 UItextView 在 UIWebview 中打开它。

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-18T15:15:05.730

您可以在 UITextView 中使用 RTF，首先将其转换为 NSAttributedString，然后将 UITextView 的属性字符串属性的值设置为 NSAttributedString。

```
NSAttributedString *stringWithRTF = [[NSAttributedString alloc]   initWithFileURL:rtfDoc options:@{NSDocumentTypeDocumentAttribute: NSRTFTextDocumentType} documentAttributes:nil error:nil];

// Instantiate UITextView object
UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(20,20,self.view.frame.size.width,self.view.frame.size.height)];

textView.attributedText=stringWithRTF;

[self.view addSubview:textView]; 
```

# xamarin.ios - 当 ViewDidUnload 不存在时何时调用 ReleaseDesignerOutlets

> ID：10686389
> 
> 赞同：6
> 
> 时间：2012-05-21T13:40:18.643
> 
> 标签：xamarin.ios, uistoryboard

当它不是 a并且因此没有方法时，何时应该调用`ReleaseDesignerOutlets`自定义故事板 UI 类？`UIViewController``ViewDidUnload`

外汇。我有一个自定义 UITableViewCell 类，并想发布我的网点。我可以看到有一种`protected void Dispose(bool disposing)`方法，但无法确定重写此方法是否是正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T19:57:26.153

在没有 ViewDidUnload 的情况下，当我的视图控制器从导航堆栈中移除时，我将释放我的插座。仅在使用 NavigationController 或 PresentViewController 时才有效。在这种情况下，父级将为*空*。

```
public override void DidMoveToParentViewController(UIViewController parent)
{
  base.DidMoveToParentViewController(parent);

  if(parent == null && cleanupOnNavigationStackRemoval)
    Cleanup();
}

protected void Cleanup()
{
  CleanupBindings();

  ReleaseOutlets();
} 
```

# xaml - Xaml中不同元素的宽度

> ID：10686392
> 
> 赞同：0
> 
> 时间：2012-05-21T13:40:32.123
> 
> 标签：xaml, grid, width, stackpanel

我有一个包含两列宽度为 3* 和 1* 的网格。在第一列内，我有一个带有“width =“Auto””的堆栈面板，其中有不同的网格，垂直方向。网格有两列，分别为 15* 和 1*。

所以我的问题是如何设置第一个网格的第一列以适应屏幕的大小，而第二列总是静态的让我们说 50p？我已经准备好将 auto 设置为第一列及其元素，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:50:00.557

```
<Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <Grid.ColumnDefinitions>
        <ColumnDefinitions Width="*"/>
        <ColumnDefinitions Width="50"/>
    </Grid.ColumnDefinitions>
    <StackPanel>
        <Grid>
        </Grid>
        <Grid>
        </Grid>
        <Grid>
        </Grid>
        <Grid>
        </Grid>
    </StackPanel>

</Grid> 
```

# php - 在 php 中使用 curl 时 move_uploded_file 不起作用

> ID：10686393
> 
> 赞同：0
> 
> 时间：2012-05-21T13:40:40.773
> 
> 标签：php, mysql, curl

**以下是 curl 中的代码，我正在发送图像和注册号...**

```
char url[]="xyz.com/imm/application.php?";
    char curlErr[2*CURL_ERROR_SIZE]={0};
    CURL *curl=NULL;
    struct curl_httppost *post=NULL, *last=NULL;
    FILE *fp=NULL;

    fp = fopen(SEND_DATA_RESPONSE_PATH, "w");
    if (fp == NULL) {
printf("%s:unable to open %s\n", __func__, SEND_DATA_RESPONSE_PATH);
        return -1;
    }
    curl = curl_easy_init();
    if (!curl) {
printf("%s:unable to init curl\n", __func__);
        return -2;
    }
    curl_easy_setopt(curl, CURLOPT_URL, url);
    curl_easy_setopt(curl, CURLOPT_FILE, fp);

    curl_formadd(&post, &last, CURLFORM_COPYNAME, "registerNumber",
        CURLFORM_COPYCONTENTS, studentDetails.regNo, CURLFORM_END);
    curl_formadd(&post, &last, CURLFORM_COPYNAME, "studentPhoto",
        CURLFORM_FILE, PHOTO_PATH, CURLFORM_END);
    curl_formadd(&post, &last, CURLFORM_COPYNAME, "parentImage",
        CURLFORM_FILE, SIG_PATH, CURLFORM_END);

    curl_easy_setopt(curl, CURLOPT_HTTPPOST, post);
    curl_easy_setopt(curl, CURLOPT_VERBOSE, 1);
    curl_easy_setopt(curl, CURLOPT_CONNECTTIMEOUT, 60);
    curl_easy_setopt(curl, CURLOPT_TIMEOUT, 60);
    curl_easy_setopt(curl, CURLOPT_ERRORBUFFER, curlErr);
    res=curl_easy_perform(curl);
    curl_formfree(post);
    curl_easy_cleanup(curl);
    if (res != 0) {
printf("%s:Curl error: %s\n", __func__, curlErr);
        return -3;
    }
    return 0; 
```

**在此之后..在application.php页面中，我试图获取rer编号和图像并将此图像上传到服务器..但是move_uploaded_file不起作用......**

```
$regNum=$_POST['registerNumber'];
 $std_img_tmp_name=$_FILES['studentPhoto']['tmp_name'];
 $std_img_name = $_FILES['studentPhoto']['name'];
 $std_img_fileSize = $_FILES['studentPhoto']['size'];
 $std_img_fileType = $_FILES['studentPhoto']['type'];
 $sig_tmp_name=$_FILES['signatureImage']['tmp_name'];
 $sig_name = $_FILES['signatureImage']['name'];
 $sig_fileSize = $_FILES['signatureImage']['size'];
 $sig_fileType = $_FILES['signatureImage']['type'];

 $target_path = "../uploads/";

 $student_img_name=$target_path.$std_img_name;
 $signature_name=$target_path.$sig_name;

$photo_status=move_uploaded_file($_FILES["studentPhoto"]['tmp_name'], $student_img_name); 
$sig_image_status=move_uploaded_file($_FILES["signatureImage"]["tmp_name"], $signature_name); 

if($photo_status==FALSE || $sig_image_status==FALSE)
{
    echo "<result><error>Unable to upload photo</error></result>";
    exit(); 
} 
```

它抛出一个错误......如何解决这个......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:58:22.613

代码看起来正确。检查并确保上传目录具有正确的权限。

# oracle - Oracle 优化器意外结果

> ID：10686395
> 
> 赞同：0
> 
> 时间：2012-05-21T13:40:44.040
> 
> 标签：oracle

我有一位同事写了以下查询。第一个有效，第二个无效。此外，如果您从子查询中删除聚合函数，它也可以工作。预言机优化器正在做一些奇怪的事情。有什么想法吗？在 SQL Developer 3.1 中针对 11.1.0.6.0 64 位运行。

这有效：

```
SELECT
  a.fd_customer_key
, b.fd_customer_key
, b.counter
FROM FETCH_CUSTOMER a
, (select fd_customer_key, count(*) as counter from fetch_customer_order group by fd_customer_key) b
where a.fd_customer_key = b.fd_customer_key (+)
and b.counter is null 
```

这不会：

```
SELECT
a.fd_customer_key
, b.fd_customer_key
, b.counter
FROM FETCH_CUSTOMER a
, (select fd_customer_key, count(*) as counter from fetch_customer_order group by fd_customer_key) b
 where a.fd_customer_key = b.fd_customer_key (+)
 and b.fd_customer_key is null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:11:04.550

实际上是的，您提供的两个查询都应该以相同的方式工作，但是如果我很好地理解您的需求，您正在尝试选择没有订单的 fd_customer_key？

我建议您根据需要进行以下查询，它更简单且消耗更少：

```
SELECT a.fd_customer_key
  FROM FETCH_CUSTOMER a
 WHERE NOT EXISTS (SELECT 1
          FROM fetch_customer_order b
         WHERE a.fd_customer_key = b.fd_customer_key) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:14:04.547

似乎您正在尝试进行反连接（从中查找在`FETCH_CUSTOMER`中没有相应行的行`FETCH_CUSTOMER_ORDER`）。

使用 Oracle，您不必使用这个聪明`OUTER JOIN`的技巧来编写反连接，您可以使用`NOT IN`or`NOT EXISTS`运算符并让优化器找到最佳计划。这将同样有效且更易于阅读。

无论如何，我无法重现您的发现，这是我的设置：

```
CREATE TABLE a (ID NUMBER PRIMARY KEY);
CREATE TABLE b (a_id NUMBER NOT NULL, DATA VARCHAR2(30));
INSERT INTO a (SELECT object_id FROM all_objects);
INSERT INTO b (SELECT object_id, object_name 
                 FROM all_objects WHERE object_type = 'VIEW');

SELECT a.id, b.a_id, b.cnt
  FROM a, (SELECT a_id, COUNT(*) cnt FROM b GROUP BY a_id) b
 WHERE a.id = b.a_id (+)
   AND b.cnt IS NULL;

SELECT a.id, b.a_id, b.cnt
  FROM a, (SELECT a_id, COUNT(*) cnt FROM b GROUP BY a_id) b
 WHERE a.id = b.a_id (+)
   AND b.a_id IS NULL; 
```

您会发现两个查询都返回行。你的数据库版本是什么？

# objective-c - 由于未捕获的异常“NSInvalidArgumentException”，如何解决终止应用程序的此错误，原因：“源类型 1 不可用”

> ID：10686401
> 
> 赞同：8
> 
> 时间：2012-05-21T13:41:16.390
> 
> 标签：objective-c

我正在从画廊中挑选照片并保存在画廊中

我的代码是

```
-(void)onclicksave:(id)sender
{
    NSLog(@"onclicksave");
    UIImagePickerController *picker=[[UIImagePickerController alloc]init];
    picker.delegate=self;

    if((UIButton *)sender== openLibrary)
    {
        picker.sourceType=UIImagePickerControllerSourceTypeSavedPhotosAlbum;

    }
    else
    {
        picker.sourceType=UIImagePickerControllerSourceTypeCamera;
    }

    [self presentModalViewController:picker animated:YES];

}

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    [picker dismissModalViewControllerAnimated:YES];
    imagedisplay.image=[info objectForKey:@"UIImagePickerControllerOriginalImage"];

} 
```

但在这段代码中，运行时错误如

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“源类型 1 不可用”

所以给出适用于我的代码的任何建议和源代码

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-21T13:45:41.090

嗯，这就是它所说的。`UIImagePickerControllerSourceTypeCamera`是来自枚举的值，等于 1。您正在尝试在没有摄像头的模拟器或设备上运行代码。

# xhtml - 令人困惑的 epubcheck 输出

> ID：10686403
> 
> 赞同：0
> 
> 时间：2012-05-21T13:41:18.573
> 
> 标签：xhtml, epub

我从 epubcheck 得到一些似乎没有意义的输出。我不明白错误消息的含义，希望其他人可以提供帮助。

epubcheck 的输出是：

```
Epubcheck Version 3.0b4

Validating against EPUB version 2.0
ERROR: /path/to/my/book.epub/sub_html_file.html(134,117): text not allowed here; expected element "td" or "th" 
```

然后还有数百条其他消息。有问题的文件的第 134 行看起来像

```
<hr class="calibre29"/>
<table border="0" cellpadding="0" cellspacing="0" class="calibre53">
   <tr class="calibre56"> 1
     <td class="calibre55" valign="top">
      <p class="calibre30"><span class="calibre21"><strong class="calibre8">Person(s)</strong></span></p>
      </td> 
```

让我感到困惑的是该行的第 117 位开始`td`，这就是`epubcheck`它所要求的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T16:04:15.303

这是一个简单的 XHTML 验证错误。如果您查看您的 HTML（我已经稍微重新格式化了它），您将看到您的`<tr>`元素包含文本以及元素内容。这是不允许的。的内容模型`<tr>`仅包含`<th>`and `<td>`，没有其他内容。

您需要将该“1”包装在一个元素中。

# html - 在我的 HTML 项目中链接原生项目？

> ID：10686405
> 
> 赞同：1
> 
> 时间：2012-05-21T13:41:33.533
> 
> 标签：html, native

我已经建立了一个网络应用程序。现在我想要一个导航功能的链接（如地图）。这是手机或平板电脑的原生功能，那么如何将其链接到 HTML 项目中？甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:47:35.320

在 iPhone 上，您可以通过遵循[Apples URL Scheme Reference](https://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html)来创建指向 Maps 的链接。

他们在那里说：

> 本机应用程序 URL 字符串 [用于地图]： `http://maps.google.com/maps?q=cupertino`

您可以标记为：

```
<a href="http://maps.google.com/maps?q=cupertino">Cupertino</a> 
```

# facebook - 如何使用图形 API 在 Facebook 粉丝专页上为帖子加注星标？

> ID：10686409
> 
> 赞同：1
> 
> 时间：2012-05-21T13:41:45.337
> 
> 标签：facebook, facebook-graph-api, facebook-page

我在我的粉丝专页上发帖，但我想做重点帖子。有什么建议么？

我必须在粉丝专页上一一为他们加注星标。有没有办法做到这一点？我也阅读了文档，但没有示例。

[http://developers.facebook.com/docs/reference/api/page/#posts](http://developers.facebook.com/docs/reference/api/page/#posts)

代码示例：

```
 $args = array(
      'access_token'  => $page_info['access_token'],
      'message'       => 'MY MESSAGE'
  );

  $post_id = $facebook->api("/MY PAGE ID/feed","post",$args); 
```

我使用 PHP SDK 3.1.x。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T10:48:29.463

采用：

```
POST /<post_id>/ with param timeline_visibility = starred 
```

`timeline_visibility`必须是以下值之一：`hidden`, `normal`, `starred`.

另请参阅[https://stackoverflow.com/a/19861323/1784062](https://stackoverflow.com/a/19861323/1784062)。

# jquery - cakephp 表单 habtm jQuery 自动完成并添加多个

> ID：10686410
> 
> 赞同：0
> 
> 时间：2012-05-21T13:41:58.393
> 
> 标签：jquery, cakephp, autocomplete, add, has-and-belongs-to-many

调用所有 cakephp 大师。

这是一个艰难的。我有一个具有 habtm 关系的表格。与其在表单中添加数百个复选框来选择一两个客户，不如在一个 habtm 上自动完成搜索，并在从自动完成中选择一个后添加另一个按钮，然后下拉最接近名称的下拉菜单，这将是天赐良机。

我已经购买了 jquery 书籍，并有他们的代码，其中有一个自动完成搜索的示例，另一个带有添加另一个文本字段的示例，可以根据需要多次添加，但是如何在 cakephp 2.1 中执行此操作超出了我的范围。

在 cakephp 2.1 中是否有类似的东西？我知道这是一个很大的问题，但我似乎正在做的每个项目都需要在几个方面使用此功能。

这是一个大问题，我认为它会帮助很多 cakephp 开发人员。

任何帮助将不胜感激。

提前完全感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:52:45.400

[在http://ivaynberg.github.com/select2/](http://ivaynberg.github.com/select2/)查看 jquery select2 控件。使用它来替换代表表单上的 habtm 关系的选择框。它允许您轻松选择多个项目，并具有您正在寻找的自动完成搜索。

# contextmenu - 为特定文件夹创建 Windows 右键单击 上下文菜单

> ID：10686411
> 
> 赞同：5
> 
> 时间：2012-05-21T13:42:01.427
> 
> 标签：contextmenu, windows-shell

如何创建为特定文件夹内的文件/文件夹显示的上下文菜单。
假设有一个目录“D:\RandomCodes”
如何为其中的任何文件/文件夹创建自定义上下文菜单项“在 MyApp 中打开”？此菜单项不应出现在任何其他目录中。我知道如果我在 HKCR/Directory/Shell 中添加条目，它会起作用，但它会出现在所有文件和文件夹中。请指导我完成这个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T21:51:34.847

例子：

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\Folder\shell\NetBeans]
"AppliesTo"="System.ItemPathDisplay:\"NetBeansProjects\""
@="Open with NetBeans"

[HKEY_CLASSES_ROOT\Folder\shell\NetBeans\command]
@="\"C:\\Program Files\\NetBeans 7.2.1\\bin\\netbeans64.exe\" --open \"%1\"" 
```

更多信息在这里：

[http://msdn.microsoft.com/en-us/library/cc144171%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/cc144171%28VS.85%29.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T15:58:43.553

是否可以修改 IShellExtInit 的代码：

```
 STDMETHODIMP CShellExt::Initialize(LPCITEMIDLIST pidl,LPDATAOBJECT pDataObj,HKEY hk)
    {
    // Initialize can be called more than once

    // If Initialize has already been called, release the old
    // IDataObject pointer.
    if (m_pDataObj)
    { 
        m_pDataObj->Release(); 
    }

    // If a data object pointer was passed in, save it and
    // extract the file name. 
    if (pDataObj == NULL)
        return E_INVALIDARG;

        m_pDataObj = pDataObj; 
        pDataObj->AddRef(); 

        STGMEDIUM   medium;
        FORMATETC   fe = {CF_HDROP, NULL, DVASPECT_CONTENT, -1, TYMED_HGLOBAL};
        UINT        uCount;

        HRESULT hr = pDataObj->GetData(&fe, &medium);
        if (FAILED(hr))
            return E_INVALIDARG;

        // save the file name
        if (DragQueryFile((HDROP) medium.hGlobal, 0xFFFFFFFF, NULL, 0)==1) 
        {
            DragQueryFile((HDROP) medium.hGlobal, 0, m_szFile, 
                sizeof(m_szFile));

            if (lstrcmpi(m_szFile, "D:\\RandomCodes") == 0) 
            {
                hr = NOERROR;
            }
            else 
                hr = E_INVALIDARG;
        }
        else
            hr = E_INVALIDARG;

        ReleaseStgMedium(&medium);

        return hr;

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-06T15:37:11.980

我知道这是一个很老的问题，但对于以后遇到这个问题的人来说，我发现最简单的方法是将一个字符串值添加到名为“AppliesTo”的键中，并将其值设置为“under:{path}”

在我的示例中，我希望它只查看 T 驱动器，因此我的字符串值为“AppliesTo”：“under:T:”。

在 C# 中，这很容易通过以下方式完成：

```
RegistryKey _key = Registry.ClassesRoot.OpenSubKey("Folder\\Shell", true);
RegistryKey newkey = _key.CreateSubKey("My Menu Item");
newkey.SetValue("AppliesTo", "under:T:");

RegistryKey subNewkey = newkey.CreateSubKey("Command");
subNewkey.SetValue("", "C:\\yourApplication.exe");
subNewkey.Close();

newkey.Close();
_key.Close(); 
```

# php - 取消设置复杂数组中的项目

> ID：10686417
> 
> 赞同：-1
> 
> 时间：2012-05-21T13:42:14.860
> 
> 标签：php, arrays

我有一个数组`$args`：

```
Array ( 
        [0] => stdClass Object ([term_id] => 3 [name] => Default [slug] => default [term_group] => 0 [term_taxonomy_id] => 3 [taxonomy] => media_category [description] => The default media category. [parent] => 0 [count] => 0 [term_order] => 0 [category_count] => 0 [category_description] => The default media category. [cat_name] => Default [category_nicename] => default [category_parent] => 0 ) 
        [1] => stdClass Object ( [term_id] => 7 [name] => Animals [slug] => animals [term_group] => 0 [term_taxonomy_id] => 7 [taxonomy] => media_category [description] => [parent] => 0 [count] => 1 [term_order] => 0 [category_count] => 1 [category_description] => [cat_name] => Animals [category_nicename] => animals [category_parent] => 0 ) 
        [2] => stdClass Object ( [term_id] => 8 [name] => Characters [slug] => characters [term_group] => 0 [term_taxonomy_id] => 8 [taxonomy] => media_category [description] => [parent] => 0 [count] => 1 [term_order] => 0 [category_count] => 1 [category_description] => [cat_name] => Characters [category_nicename] => characters [category_parent] => 0 ) 
) 
```

当我尝试删除数组的第一项时...

```
unset($args[0]); 
```

...什么都没发生。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:44:43.493

该[`unset()`](http://php.net/manual/de/function.unset.php)函数只会删除一个变量，它不会缩小你的数组。

[http://php.net/manual/de/function.unset.php](http://php.net/manual/de/function.unset.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:21:47.010

也许您正在寻找的是：

```
$first_arg = array_shift($args); 
```

或者如果你想删除数组中的任意元素：

```
array_splice($args,0,1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T14:12:26.143

你可以使用这样的东西：

```
foreach($args as $key=>$value){
$args[$key]=get_object_vars($value);
}
unset($args[0]); 
```

# java-me - 诺基亚 Asha 303 中的文件读取问题

> ID：10686420
> 
> 赞同：0
> 
> 时间：2012-05-21T13:42:33.047
> 
> 标签：java-me, nokia-s40

我正在从文件中读取固定数量的字符。该文件包含英文和阿拉伯文文本。我有两台设备诺基亚 X3-02 和诺基亚 Asha 303 进行测试。在诺基亚 X3-02 上，我在每种情况下都从文件中获取了我需要的正确字符串。但是在 Asha 303 上，当字符串包含一些阿拉伯字符时，我没有得到完整的字符串。

我还在 sun 模拟器上测试了我的代码，它也可以正常工作。该问题似乎仅与诺基亚 Asha 303 设备有关。

我的代码是一个非常简单的代码，我通过指定读取位置（偏移）和要读取的长度来读取文件。请帮助我，因为我不明白这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:43:35.693

我已经设法解决了这个问题。在诺基亚 x3-02 上，应用程序正在读取 InputStreamReader 的读取函数中指定的确切字符数，但在诺基亚 Asha 303 上，读取的字符总是少于指定的字符数。所以我必须循环读取函数才能读取所有字符。现在它正在开发诺基亚 Asha 303。

# ruby-on-rails - 设计身份验证 - 这个 gem 的标准行为是什么？

> ID：10686425
> 
> 赞同：0
> 
> 时间：2012-05-21T13:42:45.927
> 
> 标签：ruby-on-rails, devise

设计身份验证 - 这个 gem 的默认行为是什么？

我是说：

是否应该在发送密码重置确认后将用户重定向到站点的根目录，以至于我什至看不到确认消息，或者，如果发生这种情况，这意味着我的应用程序中存在一些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:57:32.877

默认情况下，它会在成功发送 [https://github.com/plataformatec/devise/blob/master/app/controllers/devise/passwords_controller.rb时重定向到 new_session_path](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/passwords_controller.rb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:06:43.860

Do you have put in the settings for email delivery​​? if not so no email can be send

if you have do that after a forget PW request you get a email with a link so you can reset the PW and you get redirect to root

# jquery - 为什么和jquery的点击功能不能一起使用？

> ID：10686427
> 
> 赞同：1
> 
> 时间：2012-05-21T13:42:58.950
> 
> 标签：jquery, html, href

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:54:56.203

click() 不会触发默认事件，因此您必须[设置 window.location](http://unitstep.net/blog/2010/04/12/triggering-links-from-javascript-using-jquery/)

```
$('#link').click(function (e) {
    e.preventDefault();
    $('.toggle').toggle();
    window.location.hash = ($(e.currentTarget).attr("href"));
}); 
```

# iphone - 替代 CGPathAddEllipseInRect

> ID：10686435
> 
> 赞同：0
> 
> 时间：2012-05-21T13:43:22.987
> 
> 标签：iphone, objective-c, ios, cocoa-touch, core-graphics

我想知道，有没有`CGPathAddElipseInRect`画椭圆的替代方法？它工作得很好，但我需要一个曲线不那么陡峭的自定义椭圆。还有什么可以做的吗？我正在使用这个路径，`CTFramesetterCreateFrame`所以`CoreText`我可以在不同的形状内绘制文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T22:03:09.727

不...

## ...但它可以用 Core Graphics 来完成

您将不得不使用类似`CGPathAddQuadCurveToPoint`,`CGPathAddCurveToPoint`或`CGPathAddArcToPoint`为您的椭圆创建自定义路径。如果您不熟悉贝塞尔路径的控制点如何工作，您可以从阅读[Wikipedia 文章](http://en.wikipedia.org/wiki/B%C3%A9zier_curve)开始。您无需阅读有关它的数学部分，只需查看此图像（来自 Wikipedia）。

![带有控制点的贝塞尔曲线（来自维基百科）](../Images/9a3017824dd5be20aca353e1a2f92e7d.png)

**对于`...AddCurveTo...`方法：**

您的当前点是**p [0]**，终点是**p [3]**。两个控制点是**p [1]**和**p [2]**。

**对于`...AddQuadCurveTo..`方法：**

同上，但只有一个控制点。

**对于`...AddArcTo..`方法：**

不要使用控制点。而是使用固定半径。

* * *

## ...如果您愿意，也可以使用 UIBezierPath 创建路径

UIBezier 路径上也有类似的方法，例如`addCurveToPoint:controlPoint1:controlPoint2:`or `addCurveToPoint:controlPoint1:controlPoint2:`。然后可以将贝塞尔路径转换为 ​​CGPath，但如果您熟悉 Core Graphics，则不需要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:47:58.937

您可以创建一个`UIBezierPath`然后获取它的`CGPath`属性。

如何创建此路径将取决于您的需求。该方法`+(UIBezierPath *) bezierPathWithOvalInRect:`看起来最相似`CGPathAddElipseInRect`。

您还可以使用它的填充和描边方法绘制到当前上下文中。

# sql-server-2008 - 仅检索字符串的一部分

> ID：10686439
> 
> 赞同：-1
> 
> 时间：2012-05-21T13:43:30.690
> 
> 标签：sql-server-2008

我只想检索 VARCHAR(15) 字符串的第一部分。哪个字符串操作最快？我的数据是这样的：

```
80:0:0:0
100:00:00:00
0:00:25:60 
```

我希望结果是：

```
80
100
0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:44:52.413

```
DECLARE @str TABLE(x VARCHAR(15));

INSERT @str VALUES ('80:0:0:0'), ('100:00:00:00'), ('0:00:25:60');

SELECT FirstPart = SUBSTRING(x, 1, CHARINDEX(':', x)-1) FROM @str; 
```

结果：

```
FirstPart
---------
80
100
0 
```

如果您需要显示整个字符串，即使它不包含`:`，那么您可以这样做：

```
SELECT SUBSTRING(x, 1, COALESCE(NULLIF(CHARINDEX(':', x), 0), 15)) FROM @str; 
```

# wordpress - iFrame中的MailChimp表单，如何配置“返回我们的主页”链接？

> ID：10686440
> 
> 赞同：2
> 
> 时间：2012-05-21T13:43:36.293
> 
> 标签：wordpress, iframe, hyperlink, parent, mailchimp

我有一个 WordPress 网站，在一个页面中我有一个 iFrame，它加载了 MailChimp 表单。完成表格并提交信息后，我可以从 MailChimp 中选择返回您的主页，但是当我单击链接时，它只会在 iFrame 中加载我的整个网站。单击链接时是否可以在主窗口中加载页面？我知道我必须在链接上有属性 target="_parent"，但是如何在 MailChimp 中添加它？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-26T16:18:37.977

只需用一个可能的解决方案完成这个旧帖子：在邮件黑猩猩最后调用的页面上添加这个小javascript就可以了

```
 <script type="text/javascript">
         // iframe breakout for mailchimp
         if(this != top){
         top.document.location.href = this.document.location.href;
    }
    </script> 
```

# c - \file 命令中路径的 Doxygen 问题

> ID：10686442
> 
> 赞同：0
> 
> 时间：2012-05-21T13:43:44.687
> 
> 标签：c, doxygen

我在使用 Doxygen 1.7.x 时遇到了以下问题：我在子目录中记录了各种文件，并且在相应的`Modules`页面上使用不同的文件名样式引用它们，包括路径和不带路径。但我想在模块页面上有相对路径（wrt 项目根目录）。

这两个文件的标记如下：

```
/**
 * @addtogroup examples_itsolver
 * @{ 
 * @file example/itsolver/bicgstab_1.c 
 * @brief Demostrate the usage of BiCGStab 
 * @date 05/21/2012 
 * @version $Id$
 *@}
 */ 
```

和

```
/**
 * @addtogroup examples_itsolver
 * @{ 
 * @file example/itsolver/sor.c 
 * @brief Demostrate the usage of SOR
 * @date 05/21/2012 
 * @version $Id$
 *@}
 */ 
```

这导致

```
file    bicgstab_1.c
        Demonsrate the usage of BiCGStab.

file    example/itsolver/sor.c
        Demonstrate the usage of the SOR Iterative Solver. 
```

在`Module overview`页面上。但我希望`sor.c`在整个项目中记录所有文件。我怎样才能做到这一点？使用`FULL_PATH_NAMES`配置选项没有帮助。

完整示例（包括生成的 html 输出）可在[http://www-e.uni-magdeburg.de/makoehle/doxygen_error.tgz上找到](http://www-e.uni-magdeburg.de/makoehle/doxygen_error.tgz)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:20:36.100

问题是在您的示例中有两个名为 sor.c 的文件

```
example/itsolver/sor.c
lib/itsolver/sor.c 
```

doxygen 将根据需要添加尽可能多的路径以使名称唯一。

如果 example 包含使用示例，那么最好不要在输入中包含这些，而是​​使用 @snippet、@include 或 @example 并指向`EXAMPLE_PATH`您的示例目录。

# php - PHP + 修改字符串

> ID：10686443
> 
> 赞同：0
> 
> 时间：2012-05-21T13:43:46.420
> 
> 标签：php, string, replace, explode

我有一个字符串，想在某个“点”+单词组合之后删除所有内容。例如：

```
This.Is.A.Test 
```

=> 会变成

```
This.Is.A 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:50:09.940

您是要删除*特定*点+词之后的所有内容，还是只删除*最后一个*点+词？如果您正在寻找一个特定的词，试试这个：

```
$str = "This.Is.A.Test";
$find = ".A";
$index = strpos($str, $find);
if ($index !== false)
    $str = substr($str, 0, $index + strlen($find));
echo $str; // "This.Is.A" 
```

* * *

*回应@SuperSkunk：*

如果你想匹配整个单词，你可以这样做：

```
$find = ".A.";

$str = "This.Is.A.Test";
$index = strpos($str, $find);
if ($index !== false)
    $str = substr($str, 0, $index + strlen($find) - 1);
echo $str; // "This.Is.A"

$str = "This.Is.AB.Test";
$index = strpos($str, $find);
if ($index !== false)
    $str = substr($str, 0, $index + strlen($find) - 1);
echo $str; // "This.Is.AB.Test" (did not match) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:52:35.590

`$str = "This.Is.A.Test"; $str = substr($str, 0, strrpos($str, "."));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:50:01.950

我会做一些非常简单的事情，比如：

```
<?php

$string = 'This.Is.A.Test';

$parts = explode('.', $string);
array_pop($parts); // remove last part
$string = implode('.', $parts);

echo $string;

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T13:53:29.807

$pos = strpos($haystack, ".A" );

$result = substr($haystack,0,$pos);

......像这样的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T13:49:16.447

```
$result = explode('.', $str, 4);
array_pop($result);
implode('.', $result); 
```

# python - 为什么Flask的登录方式使用'GET'？

> ID：10686444
> 
> 赞同：6
> 
> 时间：2012-05-21T13:43:46.550
> 
> 标签：python, login, flask

我正在尝试为一个项目了解有关 Flask 的更多信息，我想知道是否有人可以向我解释为什么示例代码列出了方法 'GET' 和 'POST'，当它只尝试处理登录时，如果请求是“POST”？

```
@app.route('/login', methods=['GET', 'POST'])
def login():
    error = None
    if request.method == 'POST':
        if request.form['username'] != app.config['USERNAME']:
            error = 'Invalid username'
        elif request.form['password'] != app.config['PASSWORD']:
            error = 'Invalid password'
        else:
            session['logged_in'] = True
            flash('You were logged in')
            return redirect(url_for('show_entries'))
    # Note that nowhere do we seem to care about 'GET'...
    return render_template('login.html', error=error) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T13:50:12.897

GET 和 POST 方法都由您的函数处理。

*   使用 GET 时，会返回登录表单 ( `login.html`) 供用户登录。这是函数的最后一行。

*   使用 POST 时，使用提供的登录名/密码验证表单。之后，用户要么被重定向到另一个页面（用于`show_entries`的 url），要么再次发送登录表单并显示相关错误。

您应该阅读“[您何时使用 POST 以及何时使用 GET？](https://stackoverflow.com/questions/46585/when-do-you-use-post-and-when-do-you-use-get)' 有关为什么使用 POST 处理登录表单以及为什么使用 GET 发送它的更多详细信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T13:46:07.890

`return render_template('login.html', error=error)` *是*的处理程序`GET`。

想想逻辑：

1.  如果 request.method == 'POST'：
    1.  检查凭据，设置错误方法
    2.  如果没有凭据错误返回正确的重定向
2.  如果代码的 POST 部分有`render_template`错误，则获取这些错误，否则`None`从方法的开头获取。我假设如果出现错误`None`，`render_template`它可能只是呈现一个普通的登录表单。

`Note: I've never used flask, but I understand python`

# java - 如何在没有 SNMP protoocl 的情况下监控 FTP 服务器

> ID：10686455
> 
> 赞同：0
> 
> 时间：2012-05-21T13:44:24.937
> 
> 标签：java, snmp

我在java中开发了一个允许上传和下载文件的FTP服务器，我的问题是我想用SNMP协议监控这个服务器，但是SNMP谈话没有帮助我我没有找到任何信息我关于 FTP 服务器（CPU、内存...）的文件有没有其他方法可以以编程方式监控 FTP 服务器，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:14:48.727

所有种类。有一种叫做 JMX 的东西只是用于监控 java 类型的东西。你可能会猜到我对此了解不多。

您还可以在服务器内部创建一个侦听器模型，并允许从外部订阅并监控您满意的内容。

# c# - 胡计算DICOM中的像素值是多少

> ID：10686460
> 
> 赞同：0
> 
> 时间：2012-05-21T13:44:42.173
> 
> 标签：c#, winforms, dicom

我正在 c#.net 中开发一个 dicom 查看器。我需要一点帮助来计算 Pixel 的 HU 值。我知道计算 HU 的公式是

```
 HU = Pixel Value * Rescale Slope + Rescale Intercept 
```

我做了一些计算并从我原来的 dicom 像素值中检索出来，但这并没有给我正确的 HU 值。我的问题是像素值到底是什么。任何人都可以帮我解决这个问题。

这是我的代码

```
 public void calculateHU(string x,string y)
        {
            Int32 intercept, slope,pix;
            intercept = -1024;
            slope = 1;
            int xx, yy;
            xx = Convert.ToInt32(x);
            yy = Convert.ToInt32(y);
            xx = xx +Convert.ToInt32( imagerect.X);
            yy = yy + Convert.ToInt32( imagerect.Y);
            pix =  getpixelvalue(xx,yy);
            double hu = pix * slope + intercept;

        }

        public Int32 getpixelvalue(int x, int y)
        {
            string c;
            c = pix16[imgno][y * bmd.width + x].ToString();
            return Convert.ToInt32(c);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:57:17.103

如果像素表示 (0028,0103) 设置为 0（无符号），则像素数据值应为非负数。根据您的示例，截距和斜率分别为 -1024 和 1，原始像素值必须为 -4 才能产生 HU 值 -1028。

如果您期望获得低至 -1028 的结果 HU 值，则很可能通过一个足够负的 Rescale Intercept 值（以及可能的 Rescale Slope）值来管理。

不是硬编码 Rescale Intercept 和 Slope，而是从图像中获取这些值，分别标记 (0028,1052) 和 (0028,1053)，并应用于 HU 计算。

# wpf - 在内部进行 WPF 用户控件转换

> ID：10686468
> 
> 赞同：0
> 
> 时间：2012-05-21T13:45:03.227
> 
> 标签：wpf, user-controls, converter

我正在使用带有 MVVM 的 WPF 开发我的系统，但我无法找到解决以下问题的最佳方法：

我有一个屏幕，其中在特定位置绘制了许多组件（用户控件）。屏幕中的所有组件都根据屏幕 VM 计算的绑定变量进行旋转、平移和缩放。

然而，这些组件中的每一个都可以具有不同的旋转中心、不同的平移原点和不同的比例，这取决于内部变量和屏幕比例。

如何在用户控件内部计算这种转换？我认为更简单的方法是使用`Converter`，但是由于我有许多具有不同行为的不同用户控件，因此我必须创建多个彼此非常相似的转换器，这不是理想的解决方案。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:12:11.233

A`UIElement`只有一个[RenderTransformOrigin](http://msdn.microsoft.com/en-us/library/system.windows.uielement.rendertransformorigin)。某些转换允许您设置该转换的原点，但在相对于控制边界的坐标中（例如：）`125, 34`而不是在比例坐标中，例如`RenderOrigin`（例如`0.5, 0.75`：）

因此，如果您可以使用坐标，那么您就可以开始了。

如果不是，您可以通过创建转换组来组合转换，这些转换组首先转换控件，然后执行转换，然后再转换回控件。

如果您需要更多帮助，请发布您正在尝试实现的示例。

# bash - 我的选项解析片段

> ID：10686478
> 
> 赞同：1
> 
> 时间：2012-05-21T13:45:38.917
> 
> 标签：bash, getopt

这是我用来解析 Bash 中的选项的片段：

```
#!/bin/bash

PROGNAME=${0##*/}
PROGVERSION=0.1
wW='-4.5.5-double'
reName=

usage()
{
  cat << EO
Script purpose goes here.
EO

  cat <<EO | column -s\& -t

  -h, --help & show this output
  -r, --rename & renames confout to Your gro
  -v, --version & show version information
  -w, --workWith & gromax exec suffix
EO
}

SHORTOPTS="hvw:r"
LONGOPTS="help,version,workWith:rename"

ARGS=$(getopt -s bash --options $SHORTOPTS --longoptions $LONGOPTS --name $PROGNAME -- "$@")

eval set -- "$ARGS"

while true; do
    case $1 in
        -h|--help)
            usage; exit 0;;
        -v|--version)
            echo "$PROGVERSION"; exit 0;;
        -w|--workWith)
            wW=$2; shift;;
        -r|--rename)
            reName="true"; shift;;
        --)
            shift; break;;
        *)
            shift; break;;
    esac
    shift
done

# ====================
## finally the script:

echo "rename:" $reName
echo '    wW:' $wW 
```

此片段仅在触发器 (-r) 之前解析选项 (-w)：

```
~/wrk/mlDn/vas/res/bbst: test.bash -w 'dfdff' -r
rename: true
    wW: dfdff
~/wrk/mlDn/vas/res/bbst: test.bash -r -w 'dfdff' 
rename: true
    wW: -4.5.5-double 
```

如何解决这个问题？我的片段有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:56:08.457

`shift`从处理中删除调用`-r`。它正在删除`-w`from `ARGS`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:57:27.620

问题是您要移动两次：一次是在您看到`-r`选项时，一次是在您退出`case`语句时。这会导致您跳过该`-w`选项。因此，您应该只换一次。`shift`从语句外部删除`case`并在其内部进行所有转换。

将您的代码更改为：

```
while true; do
    case $1 in
        -h|--help)
            usage; exit 0;;
        -v|--version)
            echo "$PROGVERSION"; exit 0;;
        -w|--workWith)
            wW=$2; shift 2;; # shift twice here
        -r|--rename)
            reName="true"; shift;;
        --)
            shift; break;;
        *)
            shift; break;;
    esac
    #shift # this shift is not required
done
echo  "rename:" $reName
echo '    wW:' $wW 
```

# iphone - 将 iPhone 应用程序部署到 AppStore

> ID：10686482
> 
> 赞同：1
> 
> 时间：2012-05-21T13:46:02.383
> 
> 标签：iphone, ios, mobile, deployment, app-store

可能这个问题似乎很愚蠢，但奇怪的是我发现很难将应用程序部署到 AppStore，特别是我来自摩洛哥，我们国家没有特定的 AppStore，我也发现了一些关于使用 iTunes连接，但我无法使用我新创建的 AppleID 访问它，是否有人知道部署免费和/或非免费应用程序的任何简单方法（或复杂方法）？

在此先感谢:) 很抱歉这个问题:S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:50:38.980

您需要一个 iTunesConnect 帐户才能将应用程序发布到 AppStore。如果您无法使用您的凭据登录，则需要让管理员向您发送邀请。如果您不知道谁是管理员，您应该向具有开发人员领导角色的人询问。基本上你需要的都可以在这里找到：

[https://developer.apple.com/appstore/resources/submission/index.html](https://developer.apple.com/appstore/resources/submission/index.html)

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:51:27.757

您必须支付 99 美元（每年）才能加入完整的 iOS 开发人员计划。完成后，开发者帐户中会提供很好的指南。

# yesod - Yesod：是否可以在 Julius 中迭代一个 haskell 列表？

> ID：10686483
> 
> 赞同：4
> 
> 时间：2012-05-21T13:46:04.830
> 
> 标签：yesod, hamlet

我有一个需要放在地图上的坐标列表。julius 是否可以迭代列表？现在我正在 hamlet 中创建一个隐藏表并在 julius 中访问该表，这似乎不是一个理想的解决方案。有人能指出更好的解决方案吗？谢谢。

编辑：为列表传递一个 JSON 字符串（julius 可以读取）似乎解决了我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T00:57:16.780

据我所知，您不能直接遍历 julius 中的列表。但是，您可以使用该`Javascript`类型的 Monoid 实例来完成类似的效果。例如：

```
import Text.Julius
import Data.Monoid
rows :: [Int] -> t -> Javascript
rows xs = mconcat $ map row xs
  where
    row x = [julius|v[#{show x}] = #{show x};
|] 
```

然后，您可以`rows xs`在通常放置 julius 块的任何地方使用。例如，在 ghci 中：

```
> renderJavascript $ rows [1..5] ()
"v[1] = 1;\nv[2] = 2;\nv[3] = 3;\nv[4] = 4;\nv[5] = 5;\n" 
```

# php - 创建接受函数的函数

> ID：10686490
> 
> 赞同：2
> 
> 时间：2012-05-21T13:46:40.387
> 
> 标签：php, function

我有一个函数可以运行一些相当通用的代码，这些代码可以连接到数据库并设置不同的配置变量。在我运行的这个顶级函数代码的几个 if 语句中，实际上每个函数都不同。

这就是它现在的样子。

```
function get_users(){
  // config
  // set application keys
  // connect to database
  // retrieve user data
  // authentication to foreign api
  if(something){
    // some more red-tape
    if(something){
      //more more
      if(something){
        /* finally the good stuff */

        // the code here varies from function to function
        // eg. get users
        // probably will run: inner_get_users();

      }
    }
  }
}

function get_data(){
  // config
  // set application keys
  // connect to database
  // retrieve user data
  // authentication to foreign api
  if(something){
    // some more red-tape
    if(something){
      //more more
      if(something){
        /* finally the good stuff */

        // the code here varies from function to function
        // eg. get data
        // probably will run: inner_get_data();

      }
    }
  }
} 
```

我希望它如何工作，也许使用匿名函数：

```
function instance($inner){
  // config
  // set application keys
  // connect to database
  // retrieve user data
  // authentication to foreign api
  if(something){
    // some more red-tape
    if(something){
      //more more
      if(something){
        /* finally the good stuff */

        Call inner

      }
    }
  }
}

function get_data(){

  instance(function(
    // get the data
  ));

} 
```

或许

```
function get_users(){

  $var = function(
    // get the users
  );

  instance($var);

} 
```

我正在寻找更好、更简洁、更易于维护的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:49:03.173

这是 PHP 称为[变量函数](http://www.php.net/manual/en/functions.variable-functions.php)的东西。这适用于`$inner`函数的字符串名称和[匿名函数](http://php.net/manual/en/functions.anonymous.php)（尽管变量函数的手册页没有解释）。

```
function instance($inner){
  // config
  // set application keys
  // connect to database
  // retrieve user data
  // authentication to foreign api
  if(something){
    // some more red-tape
    if(something){
      //more more
      if(something){
        /* finally the good stuff */

        return $inner();

      }
    }
  }
} 
```

# c# - 寻找存储数据的正确方法

> ID：10686492
> 
> 赞同：0
> 
> 时间：2012-05-21T13:46:43.700
> 
> 标签：c#, asp.net, .net, razor, webmatrix

我曾计划为此使用 Dictionary 或 SortedList，但随着项目在规划过程中不断发展，我不确定该怎么做。

我的网站将从数据库查询中加载一堆结果，我需要能够将这些结果存储在某处。

结果如下所示：

![应该为此使用什么类型的字典/列表？](../Images/8dc45814f7be95dd2973e50bad412b8f.png)

所以，这就是我要存储的内容：

```
Result #1 (int) > Name > Value
                > Title > Value
                > Message > Value
                > Date > Value
                > Email > Value

Result #2 (int) > Name > Value
                > Title > Value
                > Message > Value
                > Date > Value
                > Email > Value

Result #3 (int) > Name > Value
                > Title > Value
                > Message > Value
                > Date > Value
                > Email > Value

Result #4 (int) > Name > Value
                > Title > Value
                > Message > Value
                > Date > Value
                > Email > Value 
```

... 等等。我主要担心的是大多数字典和列表以及排序/链接列表不能有重复的键或值。所以我不能为此使用它们，因为每个结果都将具有所有相同的键名称，例如名称、标题、消息等。值可能会有所不同，尽管许多值（例如名称和日期）以及其他值会被欺骗. 所以我有点坚持*不知道选择哪种字典/列表允许重复的键/名称*，*也不知道如何让“一对多”关系发生，所以我可以正确存储这些结果。*

有人可以帮我解决这个问题的最佳方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:49:03.000

每个结果的键看起来都是一样的——这表明您应该将它们封装到一个单独的类中（例如“MailMessage”或任何它的意思）。然后，您将只有一个`Dictionary<int, MailMessage>`- 甚至是这些结果的*列表*，如果键确实为零或作为最低的一，每个结果增加一。

然后，您可能需要编写一些代码来从您收到的数据库结果中*组装该集合，并进行适当的错误检查（例如，未知属性名称、同一消息的重复属性等）。*

当然，这是假设您提供给我们的数据确实具有代表性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T13:49:07.030

你不只需要创建一个这样的类吗？

```
public class Result
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Title{ get; set; }
    public string Message { get; set; }
    public DateTime Date { get; set; }
    public string Email { get; set; }
} 
```

然后将您的数据库结果映射到类似的东西`IList<Result>`，或`IDictionary<int, Result>`键控 Id 属性？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:50:04.590

看起来您只需要生成（使用 Entity Framework 之类的工具或手动）一些类来存储您的对象。

然后，您可以轻松地维护对象的集合。

您也可以使用存储库模式，谷歌它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T13:51:10.433

创建一个结构（因为您只想存储值，不需要方法）并将它们存储在通用列表中。

示例代码：

```
List list = new List();

list.Add(new MyStruct(10));
list.Add(new MyStruct(20)); 
```

# java - 使用 DecimalFormat 在 Java 中将科学记数法转换为固定记数法

> ID：10686493
> 
> 赞同：1
> 
> 时间：2012-05-21T13:46:46.223
> 
> 标签：java

有没有办法将科学记数法转换为 Java 中的固定记数法。目前我有以下代码：

```
DecimalFormat dfmt=new DecimalFormat("######:#######");
print(dfmt.format((new BigDecimal((Math.pow(10,-3)*3000),MathContext.Decimal64)).stripTrailingZero())); 
```

上面的代码确实将科学记数法转换为固定记数法，但是如果结果大于零，则忽略小数位。在上面的例子中，它打印 3；而不是 3.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:53:15.380

使用模式`0.0`：

```
BigDecimal d = new BigDecimal("12345678901234567890"); // large integer
System.out.println(new DecimalFormat("0.0").format(d)); 
```

输出（在我的语言环境中）：

```
12345678901234567890.0 
```

# c# - 键入通用接口

> ID：10686498
> 
> 赞同：0
> 
> 时间：2012-05-21T13:47:07.103
> 
> 标签：c#, generics, interface

我正在尝试创建两个接口层次结构，一个用于业务模型对象，一个用于 ui。我知道在层之间保持松散耦合很重要，但应用程序的一部分将需要绘制图表，因此我需要模型对象可以随时用于其相应的图形表示，并且我有一个公共层持有模型对象的接口..

常用类库代码：

```
public interface IBase {}
public interface IBookObject : IBase {}
public interface ITapeObject : IBase {}

public class Book : IBookObject {} 
```

图形层代码：

```
public interface IModelObject<T> 
{
  T ModelObject { get; set; } // might be a book or tape , etc
}

public class GraphicObject<T> : IModelObject<T>
{
  public T ModelObject { get; set; }
} 
```

代码使用：

```
IBookObject bk = new Book();
var go = new GraphicObject<IBookObject>(); // will fail later
//var go = new GraphicObject<IBase>(); // will succeed later

go.ModelObject = bk;

if (go is IModelObject<IBase>) // can't use is IModelObject<IBookObject>
                               // as go might be GraphicObject<ITapeObject>
{
  Debug.WriteLine("Success");
} 
```

因此，如果我想测试 IBase（然后访问 ModelObject），我必须确保原始对象是使用 IBase 而不是派生接口创建的，这似乎是后来出现错误的原因。我的问题是：

1）我在做一些可怕的事情吗？！:) 我可能忽略了一个更好的方法..

2) 做不到这一点，是否有某种方法可以使用新的逆变 c# 4 技术对从 IBase 派生的任何接口进行 is line 测试？或者，我认为如果 IBook 不从 IBase 继承它会起作用，但是 Book（和 Tape）分别实现了 IBook 和 IBase。

3）如果做不到这一点，有什么方法可以防止构建`GraphicObject<IBookObject>()`and `GraphicObject<ITapeObject>()`？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:04:11.403

这行得通吗？

```
public interface IBase { }
public interface IBookObject : IBase { }
public interface ITapeObject : IBase { }

public class Book : IBookObject { }

public interface IModelObject
{
    IBase ModelObject { get; set; } // might be a book or tape , etc
}

public class GraphicObject<T> : IModelObject
    where T: class, IBase
{
    public T ModelObject { get; set; }

    #region IModelObject Members

    IBase IModelObject.ModelObject
    {
        get
        {
            return ModelObject;
        }
        set
        {
            ModelObject=value as T;
        }
    }

    #endregion
}

class Program
{
    static void Main(string[] args)
    {
        IBookObject bk=new Book();

        var go=new GraphicObject<IBookObject>(); // will fail later

        //var go = new GraphicObject<IBase>(); // will succeed later

        go.ModelObject=bk;

        if(go is IModelObject) // can't use is IModelObject<IBookObject> as go might be GraphicObject<ITapeObject>
        {
            Debug.WriteLine("Success");
        }
    }
} 
```

# iphone - 从哪里上传应用商店的应用二进制文件

> ID：10686502
> 
> 赞同：0
> 
> 时间：2012-05-21T13:47:15.287
> 
> 标签：iphone, app-store

我已按照所有步骤将我的第一个应用程序上传到“https://itunesconnect.apple.com/WebObjects/iTunesConnect.woa”

最后我上传了大图和截图。

我没有上传二进制文件的选项。

现在申请状态为“等待上传”。

我现在对上传我的二进制文件感到困惑，从哪里以及如何上传它？

申请正在审核中吗？一切都顺利吗？或者我将不得不做任何改变？

请帮帮我，我是上传应用程序的新手。

提前感谢所有相关帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T13:59:46.023

安装适当的证书和分发配置文件后，您就可以开始使用了。

打开 XCode -> 在构建设置中选择您的分发证书 -> 代码签名

然后点击顶部栏中的“产品”按钮 -> 存档 -> 选择上传到 Appstore

当您按照这些步骤操作时，您的应用程序应该以正确的方式提交。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T13:57:02.450

请在 mac 上下载一个名为“Application Loader”的应用程序。并使用配置文件编译您的代码。

将您的 iTunes 连接的登录 ID 和密码放入 Application Loader 应用程序中。它会自动询问您的第一个应用程序二进制文件的 .zip 文件。

从 itune connect 完成所有手续。

# jquery - 花式框和链接

> ID：10686511
> 
> 赞同：0
> 
> 时间：2012-05-21T13:47:48.300
> 
> 标签：jquery, html, fancybox, hyperlink, href

我已经在论坛中搜索了解决方案，但我找不到任何东西:) 我有一个里面有一个 div 的fancybox。在这个 div 中，我有诸如图像、文本和指向网站（例如雅虎）的外部链接（标签）之类的东西我想要的是，当我点击链接时，雅虎将在新的选项卡/窗口中打开（目标:_blank ）但我得到的只是“无法加载请求的内容。请稍后再试”

这是代码：

```
<a class="fancybox" href="#content"></a>
<div id="content">
      <img.... />
      <p>......</p>
      <a href="www.yahoo.com" target="_blank">yahoo.com</a>
</div> 
```

非常感谢你帮助我:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:55:24.220

浏览器将`www.yahoo.com`您的网站作为相对 URL，如果您在单击该链接后查看地址栏，您会看到类似[http://mysite.com/www.yahoo.com](http://mysite.com/www.yahoo.com)

您需要以这种格式输入网址

```
<a href="http://www.yahoo.com" target="_blank">yahoo.com</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:56:11.127

你有2个问题：

您的锚上的**href**属性缺少**http://**协议，它应该是**http://www.yahoo.com**：

```
<a class="fancybox" href="#content"></a>
<div id="content">
      <img.... />
      <p>......</p>
      <a href="http://www.yahoo.com" target="_blank">yahoo.com</a>
</div> 
```

此外，某些网站，如 Facebook、Yahoo 或类似网站无法使用 fancybox 打开，它们受到 iframe 的保护。

# objective-c - 可可应用程序中的 system() 调用

> ID：10686515
> 
> 赞同：1
> 
> 时间：2012-05-21T13:47:53.727
> 
> 标签：objective-c, c, system

在我的可可应用程序中，我必须调用 system() 函数来启动外部应用程序。我使用的命令是：

```
system("./main &"); 
```

如果我从 Xcode 运行应用程序，它可以正常工作，因为我知道将 main.js 放在哪里的文件夹。

如果我创建档案并分发我的 .app 应用程序，system() 找不到“main”。我必须把它放在哪里？？或者，当我不在应用程序所在的文件夹中时，如何使用“./”运行应用程序？

编辑：也许我使用 NSTask 解决了，但是如何在后台运行“main”？现在它在一个新的终端窗口中打开。

```
NSTask *task = [[NSTask alloc] init]; 
[task setLaunchPath:@"/Applications/Multibo/main"]; 
[task setArguments:[NSArray arrayWithObjects:[NSString stringWithFormat:@"./main &"], nil]]; 
[task launch]; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:54:25.437

尝试在可执行文件名称之前附加完整路径，并将其用作`system`. 请注意，它`system`是由实现定义的——它的行为不能保证在整个系统中都是相同的，因此不推荐使用它。您可能应该寻找合适的替代方案，例如[`NSWorkspace`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T17:54:33.643

虽然 dirkgently 的答案是直接正确的，但真正的答案更复杂。

首先，`NSTask`它不是一个通用的命令行调用程序。这就是为什么添加`&`不符合您的预期。实际上，通过调用的所有任务实际上`NSTask`都是后台。

但是你真的不想使用 NSTask。你真的应该使用 XPC 服务。现在，如果您的目标是即使在程序退出后也能运行，那么您应该研究 LaunchServices。

# c# - 使用 Validation.HasError 触发属性 WPF 时仅显示错误样式

> ID：10686516
> 
> 赞同：0
> 
> 时间：2012-05-21T13:47:54.863
> 
> 标签：c#, wpf, xaml, .net-3.5, validation

我有一个文本框的自定义样式，我只想允许输入数值。

我创建了一个自定义 ValidationRule 来检查这一点。

如果输入有效，我想显示一个绿色边框，如果不是，我想显示一个红色边框。出现错误时红色边框显示正确，但输入正确时绿色显示不正确，它只显示文本框默认值。

我的自定义 ValidationRule 中的 ValidateResult 方法是：

```
 public override ValidationResult Validate(object value, System.Globalization.CultureInfo cultureInfo)
    {            
        string input = (value ?? String.Empty).ToString();
        double val;
        if (double.TryParse(input, out val))
        {
            return new ValidationResult(true, OkMessage);
        }
        else return new ValidationResult(false, ErrorMessage);
    } 
```

样式和触发器定义：

```
<Style TargetType="{x:Type TextBox}">
        <Style.Triggers>
            <Trigger Property="Validation.HasError" Value="true">
                <Setter Property="Validation.ErrorTemplate">
                    <Setter.Value>
                        <ControlTemplate>                                
                                <Border BorderBrush="Red" BorderThickness="1"/>
                            </DockPanel>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Trigger>
            <Trigger Property="Validation.HasError" Value="False">
                <Setter Property="Validation.ErrorTemplate">
                    <Setter.Value>
                        <ControlTemplate>                                
                                <Border BorderBrush="Green" BorderThickness="1"/>
                            </DockPanel>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Trigger>
        </Style.Triggers>
    </Style> 
```

正确验证输入后，如何使边框显示为绿色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T14:54:54.473

我相信这是因为在没有错误时`Validation.HasError`被*清除*`false`，而不是按照触发器的要求设置。为什么不在模板中包含绿色边框？HasError 触发器会将其更改为红色，但在所有其他时间它应该是绿色的，所以最好只是放置该内联而不是触发器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T16:05:21.647

原因是您正在设置 ErrorTemplate ，当出现错误时会显示...

您正在将错误模板颜色更改为绿色，但没有错误时错误模板将不可见...

# ant - 如何在 Jenkins 中覆盖 http_proxy 环境变量？

> ID：10686518
> 
> 赞同：2
> 
> 时间：2012-05-21T13:47:59.227
> 
> 标签：ant, selenium, jenkins, http-proxy

我有以下设置：

Jenkins -> Ant 脚本 -> Python 脚本 -> 与 Selenium 交互

我在 Windows 盒子上运行 Jenkins。我的 Jenkins 调用了一个 Ant 脚本，该脚本调用了一个与 Selenium 交互的 python 脚本。我遇到的问题是`http_proxy`环境变量已定义并指向一个代理，该代理旨在访问互联网而不是我的测试系统。当我运行我的 Jenkins 作业时，我从代理收到一条错误消息，说明他无法访问我的被测系统。

如何`http_proxy`在 Jenkins 中禁用它，以便它不会将它们传递给 Ant -> Python -> Selenium？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:00:24.733

在运行 ANT 之前，使用[EnvInject](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)插件在构建步骤中重置变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:35:18.183

也许尝试在 jenkins 设置页面中设置变量（覆盖默认值），或者在作业中（作为参数）。这两个选项都将覆盖系统上的任何现有值。这是你需要的吗？

# c# - 纬度经度对的正则表达式

> ID：10686524
> 
> 赞同：3
> 
> 时间：2012-05-21T13:48:28.203
> 
> 标签：c#, regex

我在谷歌地图上画一条线，而不是创建一个字符串，如：

> （-25.368819800291383,130.55809472656256065-58094-05562560629138-05625606299138-052991383,130529138-055291383,130.55809472656256066256.58968620991,41198625209066,41198620906,411986730266,31.05770265,4119805,24.58562567204656,41198556506）

第一个值是纬度，第二个是经度。我为这个字符串分配了一个隐藏字段值，以便我可以在服务器上访问它。

如何检索纬度和经度数字？

我在尝试

```
 Match match = Regex.Match(points, @"(^(0|(-(((0|[1-9]\d*)\.\d+)|([1-9]\d*))))$,^(0|(-(((0|[1-9]\d*)\.\d+)|([1-9]\d*))))$)*", RegexOptions.IgnoreCase); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:52:17.413

使用这个：（`^(\-?\d+(\.\d+)?),\s*(\-?\d+(\.\d+)?)$`取自[这里](https://stackoverflow.com/questions/3518504/regular-expression-for-matching-latitude-longitude-coordinates)）。您的正则表达式的问题之一是您使用`^`and`$`两次。这些表示字符串的开头和结尾，因此在您的情况下，您的正则表达式将永远无法工作。

上面的正则表达式应该提取数字并通过使用组使它们可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:58:47.043

试试这个

```
\((?<lat>[-\d.]+),(?<long>[-\d.]+)\) 
```

我喜欢在这里使用命名组。要仅获取纬度，请使用

```
 Regex regexObj = new Regex(@"\((?<lat>[-\d.]+),(?<long>[-\d.]+)\)");
    Match matchResult = regexObj.Match(subjectString);
    while (matchResult.Success) {
        Console.WriteLine(matchResult.Groups["lat"].Value));
        matchResult = matchResult.NextMatch(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:54:15.503

试试这个：

```
Match match = Regex.Match(points, @"(-?\d+\.\d+)+", RegexOptions.IgnoreCase); 
```

对于您的输入，它将产生 8 个结果，每个结果 = 经度或纬度

```
Match match = Regex.Match(points, @"((-?\d+\.\d+)+,?){2}", RegexOptions.IgnoreCase); 
```

**将产生 4 个结果，每个结果是纬度、经度**形式的一对

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-09T05:32:52.453

试试这个：

```
import re
p = re.compile('([+-]*\d*[\.]*\d*), ([+-]*\d*[\.]*\d*)')
t = int(input())
for i in range(t):
    try:
        z = str(input())
        z = z[1:len(z)-1]
        zz = re.findall(p, z)
        zz = zz[0]
        x = zz[0]
        y = zz[1]
        if(x[0] == '+' or x[0] == '-'):
            x = x[1:]
        if(y[0] == '+' or y[0] == '-'):
            y = y[1:]
        if(x[len(x)-1] == '.' or y[len(y)-1] == '.'):
            print("Invalid")
            continue
        if((len(x) > 1 and x[0] == '0' and x[1] != '.') or (len(y) > 1 and y[0] == '0' and y[1] != '.')):
            print("Invalid")
            continue
        x = float(x)
        y = float(y)
        if(x >= -90.0 and x <= 90.0 and y >= -180.0 and y <= 180.0):
            print("Valid")
        else:
            print("Invalid")
    except:
        print("Invalid") 
```**

# android - 如何将按钮添加到动态创建的布局以返回上一个活动？

> ID：10686528
> 
> 赞同：0
> 
> 时间：2012-05-21T13:48:55.113
> 
> 标签：android, android-layout

我有一个活动，它是使用 setContentView(new SingleTouchEventView(this, null,x) 从主活动动态创建的，我已经编写了这段代码

```
public class SingleTouchEventView extends View {

    private Paint paint = new Paint();
    private Path path = new Path();  

    public SingleTouchEventView(Context context, AttributeSet attrs,int x) {  
        super(context, attrs);  
        LinearLayout ll=new LinearLayout(getContext());  
        ll.setOrientation(LinearLayout.VERTICAL);
        Button b=new Button(getContext());
        b.setText("Back");
        ll.addView(b);
        setContentView(ll);
        paint.setAntiAlias(true);
    }
} 
```

但我在“setContentView(ll);”行出现错误 说“SingleTouchEventView 类型的方法 setContentView(LinearLayout) 未定义”
我必须在此活动上放置一个按钮，以便人们可以返回上一个活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:09:20.080

不要添加按钮。只需让内置的[后退](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)按钮完成它的工作，或者如果您需要自定义功能则覆盖它。为了显示您的视图，您可能需要从一个新的活动、对话框或片段开始，而不是视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:04:02.673

试试这样：

```
public class SingleTouchEventView extends LinearLayout {

    private Paint paint = new Paint();
    private Path path = new Path();  

    public SingleTouchEventView(Context context) {  
        super(context);  
        this.setOrientation(LinearLayout.VERTICAL);
        LinearLayout.LayoutParams parms = new LinearLayout.LayoutParams
                                           (MATCH_PARENT, WRAP_CONTENT);
        setLayoutParams(parms);
        Button b=new Button(getContext());
        b.setText("Back"); // better: getContext().getString(R.string.someString);
        this.addView(b);
        b.setLayoutParams(parms);
        paint.setAntiAlias(true);
    }
} 
```

然后在您的活动中，设置您的内容视图，如下所示：

```
public void onCreate(Bundle icicle){
    SingleTouchEventView v = new SingleTouchEventView(this);
    setContentView(v);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-21T14:21:17.587

类视图中没有称为 setContentView() 的方法..所以你得到这样的错误......

为了消除该错误，请创建您的 mainactivity 的实例并使用 thatone 调用此方法。

例如，如果您的主要活动是 HomeActivity 那么

```
public class SingleTouchEventView extends View {
private Paint paint = new Paint();
Private HomeActivity custom_view=null;
private Path path = new Path();  
public SingleTouchEventView(Context context, AttributeSet attrs,int x) 
{  
super(context, attrs);  
LinearLayout ll=new LinearLayout(getContext());  
ll.setOrientation(LinearLayout.VERTICAL);
Button b=new Button(getContext());
b.setText("Back");
ll.addView(b);   custom_view.setContentView(ll);
paint.setAntiAlias(true);}} 
```

# php - 带有外键的数据库的 php 搜索引擎

> ID：10686534
> 
> 赞同：-2
> 
> 时间：2012-05-21T13:49:09.563
> 
> 标签：php, mysql

大家好，我正在尝试创建一个 php 搜索页面，该页面将从 mysql 数据库中调出书籍列表，然后当单击书名时，会调出与它们在关系表中的书籍列表。我在代码上有点挣扎，希望有人能伸出援手

- 这是我的 search.php 文件

```
 <?php
    $i=0;
    $column_name = 'title'; // column to search by
    $k =$_GET['k'];
    $terms = explode(" ",$k);
    //connect before calling mysql_real_escape_string
    mysql_connect("localhost","","");
    mysql_select_db("test");
    $query ="SELECT id,title,author 
    FROM  books WHERE";
    foreach ($terms as $each){
        $i++;
        $each = '%' . $each . '%'; // add wildcard
        $each = mysql_real_escape_string($each); // prevent sql injection
        if($i==1)
            $query .= " $column_name LIKE '$each' ";
        else
            $query .= " OR $column_name LIKE '$each' ";

    }

    echo 'QUERY: ' . $query;

    $query = mysql_query($query) OR DIE(mysql_error());

//Code below is for using the relationships table assuming you have a column name id that
//references to the relationships table. Also, you should add a index on the column id.

$results = "";

while($row = mysql_fetch_array($query)) {
  $results .= '<li>
                <a href="book-relationships.php?id='.$row['relationshipid'].'">'.$row['title'].'  author: '.$row['author'].'</a>
              </li>';
}

$results = '<ul>' . $results . '</ul>';

echo $results; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:05:53.157

从这一行中删除一个“;”：

```
FROM books WHERE ";                 "; 
```

您必须声明 $i

```
$i = 0; 
```

要防止 sql 注入，您可以使用：

```
foreach ($terms as $each){
        $i++;
        $each = '%' . $each . '%'; // add wildcard
        $each = mysql_real_escape_string($each); // prevent sql injection
        if($i==1)
            $query .= " $keywords LIKE '$each' ";
        else
            $query .= " OR $keywords LIKE '$each' ";

    } 
```

另外，确保用户不能将变量设置为不存在的表

完整代码

```
<?php
    $i=0;
    $column_name = 'title'; // column to search by
    $k =$_GET['k'];
    $terms = explode(" ",$k);
    //connect before calling mysql_real_escape_string
    mysql_connect("localhost","","");
    mysql_select_db("test");
    $query ="SELECT id,title,author 
    FROM  books WHERE";
    foreach ($terms as $each){
        $i++;
        $each = '%' . $each . '%'; // add wildcard
        $each = mysql_real_escape_string($each); // prevent sql injection
        if($i==1)
            $query .= " $column_name LIKE '$each' ";
        else
            $query .= " OR $column_name LIKE '$each' ";

    }

    echo 'QUERY: ' . $query;

    $query = mysql_query($query) OR DIE(mysql_error());

//Code below is for using the relationships table assuming you have a column name id that
//references to the relationships table. Also, you should add a index on the column id.

$results = "";

while($row = mysql_fetch_array($query)) {
  $results .= '<li>
                <a href="book-relationships.php?id='.$row['id'].'">'.$row['title'].'  author: '.$row['author'].'</a>
              </li>';
}

$results = '<ul>' . $ results . '</ul>';

echo $results; 
```

# oracle - 通过独立过程完成“sqlldr”

> ID：10686540
> 
> 赞同：0
> 
> 时间：2012-05-21T13:49:54.497
> 
> 标签：oracle, interface

我是界面新手，现在写我完成了一些任务。我有一个问题是：

我非常熟悉使用 putty（使用 sqlldr）将 .dat 文件（和 .ctl）中的数据加载到临时表中的方法，但我需要完成相同的任务（即将 .dat 文件中的数据加载到临时表中） ) 通过一些 pl/sql 程序。所以请提出逻辑......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T15:41:50.043

Normally, you would use [external tables](http://docs.oracle.com/cd/B19306_01/server.102/b14215/et_concepts.htm). The syntax is going to be very similar to a SQL*Loader control file but it is an object defined in the database that allows you to expose the file as if it were a relational table. You can then do your load simply by querying the external table.

This does require, though, that the data file is present on the database server's file system.

# objective-c - 如何设计一个应用程序以在 iOS 中跨模型保留一组字符串？

> ID：10686542
> 
> 赞同：0
> 
> 时间：2012-05-21T13:49:57.623
> 
> 标签：objective-c, ios, xcode, model-view-controller

我正在编写一个通过服务器和客户端（存储为两个字符串）连接到网络的应用程序。我的应用由多个视图控制器和模型组成（每个可能有 10 个……至少）；但是，几乎我的每个模型都需要访问这些字符串（可能还有另外两个或三个）。让这些字符串在模型中持久存在的最佳方法是什么？除了这些字符串之外，模型本身非常不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:00:38.207

听起来你在整个应用程序中传播网络代码是个错误。服务器的接口是一个单一的职责，应该被分解到它自己的类中。然后，您的模型与此类对话，而无需了解有关该类*如何与服务器对话的任何细节。*我为此找到的最简单的方法是仿单例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:52:19.640

如果字符串没有改变，您可以使用预处理器宏：

```
#define kNetwork @"myNetwork" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:54:01.983

可能有几种可能的方法，其中一些是 -

1.  您可以使用`NSUserDefaults`来保存这些字符串值并在需要时使用。
2.  您可以将这些字符串存储在`plist`文件中。
3.  您可以创建一个包含这两个字符串值的模型类，并创建一个`singleton`实例。
4.  您可以创建一个常量类并将这些字符串值作为常量。

等等

# jsf-2 - JSF 是否支持基于表单的安全性

> ID：10686547
> 
> 赞同：2
> 
> 时间：2012-05-21T13:50:08.560
> 
> 标签：jsf-2

我遵循本教程 [安全性](http://netbeans.org/kb/docs/javaee/ecommerce/security.html)在本教程中提到为基于表单的安全性添加类似的内容

```
<form action="j_security_check" method=post>
    <p>username: <input type="text" name="j_username"></p>
    <p>password: <input type="password" name="j_password"></p>
    <p><input type="submit" value="submit"></p>
</form> 
```

但是在 JSF 表单中，我在 h:form 中没有操作属性，我将其设置为**j_security_check**。在 JSF 中还需要使用 j_username 和 j_password 来提供基于表单的安全性吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T14:00:58.587

是的，此操作 URL 和字段名称对于[基于表单的身份验证](http://docs.oracle.com/javaee/6/tutorial/doc/gkbaa.html#bncbq)是必需的。这是在 servlet 规范中指定的。您可以在 JSF 页面中按原样使用它。唯一的区别是表单提交和身份验证完全由容器处理，而不是由 JSF。你不需要担心这个。

但是，如果您想要对表单提交过程进行更细粒度的控制，或者想要利用 JSF 内置验证和 ajax 功能等，那么您始终可以通过JSF 托管 bean 中的[编程身份验证来接管它。](http://docs.oracle.com/javaee/6/tutorial/doc/gjiie.html)为此，您必须[`HttpServletRequest#login()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#login%28java.lang.String,%20java.lang.String%29)在操作方法中使用。身份验证仍由容器处理。

例如

```
<h:form>
    <h:inputText value="#{login.username}" required="true" />
    <h:inputSecret value="#{login.password}" required="true" />
    <h:commandButton value="login" action="#{login.submit}">
        <f:ajax execute="@form" render="@form" />
    </h:commandButton>
    <h:messages />
</h:form> 
```

和

```
public String submit() {
    FacesContext context = FacesContext.getCurrentInstance();
    HttpServletRequest request = (HttpServletRequest) context.getExternalContext().getRequest();

    try {
        request.login(username, password);
        return "home?faces-redirect-true";
    } catch (ServletException e) {
        context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Unknown login", null));
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:15:46.463

以下是我为在 Websphere 7 中运行的 JSF 应用程序实现 j_security_check（容器管理安全）的方法。不幸的是，我使用的 servlet api 版本没有

```
request.login() 
```

创建了一个登录过滤器类来拦截 j_security_check 调用。ResponseWrapper 记住登录后要重定向的 URL。

```
public class LoginFilter implements Filter {
        private static String loginPage = "login.xhtml"; // read it from init config
    public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {
        // TODO Auto-generated method stub
        // create wrapper
        HttpServletRequest req = (HttpServletRequest) request;
        MyWrapper myRes = new MyWrapper((HttpServletResponse) response);
        // call authentication
        chain.doFilter(request, myRes);
        // check for login error
                String redirectURL = myRes.getOriginalRedirect();
          if (StringUtils.isBlank(redirectURL) || redirectURL.contains(loginPage)) {
                   myRes.setOriginalRedirect(homePage);
              }
    myRes.sendMyRedirect();

}
    class MyWrapper extends HttpServletResponseWrapper {
        String originalRedirect;

        public MyWrapper(HttpServletResponse response) {
            super(response);
        }

        @Override
        public void sendRedirect(String location) throws IOException {
            // just store location, don’t send redirect to avoid
            // committing response
            originalRedirect = location;
        }

        // use this method to send redirect after modifying response
        public void sendMyRedirect() throws IOException {
            super.sendRedirect(originalRedirect);
        }

        public String getOriginalRedirect() {
            return originalRedirect;
        }

        public void setOriginalRedirect(String originalRedirect) {
            this.originalRedirect = originalRedirect;
        }

    } 
```

web.xml 如下所示。

```
<filter>
    <filter-name>LoginFilter</filter-name>
    <filter-class>com.servlet.filter.LoginFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>LoginFilter</filter-name>
    <url-pattern>/j_security_check</url-pattern>
</filter-mapping>
<filter>
    <filter-name>RequestJSFFilter</filter-name
        <filter-class>com.servlet.filter.RequestJSFFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>RequestJSFFilter</filter-name>
    <url-pattern>*.xhtml</url-pattern>
</filter-mapping> 
```

另一个过滤器拦截所有 *.xhtml 并指向 login.xhtml。在 login.xhtml 中，表单可以如下所示

```
<form action="j_security_check" method=post>
    <p>username: <input type="text" name="j_username"></p>
    <p>password: <input type="password" name="j_password"></p>
    <p><input type="submit" value="submit"></p>
</form> 
```

希望这可以帮助。

# heroku - 如何在 Heroku 中获取当前主机名

> ID：10686549
> 
> 赞同：12
> 
> 时间：2012-05-21T13:50:12.350
> 
> 标签：heroku, clojure, noir

我正在尝试在 Heroku 上部署 Clojure/Noir 应用程序，并且我的应用程序大部分都在工作。但是，我需要的最后一件事情是在部署到 Heroku 时弄清楚我的应用程序的主机名。理想情况下，我想动态地执行此操作，而不是对其进行硬编码。

因此，例如，如果我的应用程序的 URL 是“ [http://freez-windy-1800.herokuapp.com](http://freez-windy-1800.herokuapp.com) ”，我希望能够在我的 clojure 代码中动态地获取它。

我知道我可以查看传入的请求来解决这个问题，但理想情况下，我希望有某种“设置”，在其中我评估一次表达式并将值保存在我可以使用的变量中（即将到来来自 Python/Django 世界，我正在考虑`settings.py`Clojure 中的等价物）。

作为参考，我正在部署的代码可在[https://github.com/rmanocha/cl-short](https://github.com/rmanocha/cl-short)获得。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T10:36:29.700

您可以通过以下方式在 Heroku 中设置环境变量

```
heroku config:add BASE_IRI=http://freez-windy-1800.herokuapp.com 
```

并在 Clojure 中读回

```
(defn- base-iri []
  (or (System/getenv "BASE_IRI") "http://localhost/")) 
```

Heroku 已经设置了你可以使用的端口

```
(defn -main []
  (let [port (Integer. (or (System/getenv "PORT") 8080))]
    (run-jetty #'app {:port port}))) 
```

在不同的环境中为我工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T14:04:56.703

您通常会使用[`InetAddress`](http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html)Java 标准库来执行此操作。

```
(.getCanonicalHostName (java.net.InetAddress/getLocalHost)) 
```

但是，这不会进行 DNS 查找。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-09-21T09:04:03.403

获取主机名的 3 种方法。随心所欲地使用。

```
(ns service.get-host-name
  (require [clojure.java.shell :as shell]
           [clojure.string :as str])
  (:import [java.net InetAddress]))

(defn- hostname []
  (try
    (-> (shell/sh "hostname") (:out) (str/trim))
    (catch Exception _e
      (try
        (str/trim (slurp "/etc/hostname"))
        (catch Exception _e
          (try
            (.getHostName (InetAddress/getLocalHost))
            (catch Exception _e
              nil))))))) 
```

# eclipse - 将 src/main/aspect 作为源文件夹添加到 Eclipse Maven 项目

> ID：10686551
> 
> 赞同：0
> 
> 时间：2012-05-21T13:50:14.240
> 
> 标签：eclipse, maven, import, aspectj

我希望能够配置 pom.xml，以便当我将其导入 eclipse 时，它​​指定`src/main/aspect`为 eclipse 源文件夹。

目前，导入会创建默认的源文件夹，仅此而已。

应该做什么？

谢谢

**编辑 1**

我已经配置了aspectj插件：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>aspectj-maven-plugin</artifactId>
    <version>1.4</version>
    <executions> 
    <execution>
        <goals>
            <goal>compile</goal>    
            <goal>test-compile</goal>                           
        </goals>
         <configuration>
            <source>${project.build.source}</source>
            <target>${project.build.target}</target>
            <aspectDirectory>src/main/aspect</aspectDirectory>
            <testAspectDirectory>src/test/aspect</testAspectDirectory>
        </configuration>
    </execution>
   </executions>
</plugin> 
```

**编辑 2**

我已经配置了 m2e 插件：

```
<plugin>
    <groupId>org.eclipse.m2e</groupId>
    <artifactId>lifecycle-mapping</artifactId>
    <version>1.0.0</version>
    <configuration>
        <lifecycleMappingMetadata>
            <pluginExecutions>
                <pluginExecution>
                    <pluginExecutionFilter>
                        <groupId>
                            org.codehaus.mojo
                        </groupId>
                        <artifactId>
                            aspectj-maven-plugin
                        </artifactId>
                        <versionRange>
                            [1.4,)
                        </versionRange>
                        <goals>
                            <goal>test-compile</goal>
                            <goal>compile</goal>
                        </goals>
                    </pluginExecutionFilter>
                    <action>
                        <ignore></ignore>
                    </action>
                </pluginExecution>
            </pluginExecutions>
        </lifecycleMappingMetadata>
    </configuration>
</plugin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:46:14.697

You shouldn't configure the [defaults of the plugin](http://mojo.codehaus.org/aspectj-maven-plugin/compile-mojo.html), cause it defines already the src/test/aspect and src/main/aspect and it shouldn't be necessary to configuration something supplemental to compile etc.

Furthermore the problem with eclipse could be based on a missing [mapping for your m2e plugin](http://wiki.eclipse.org/M2E_plugin_execution_not_covered) this means to add the following to your build:

```
<pluginManagement>
  <plugins>
    <plugin>
      <groupId>org.eclipse.m2e</groupId>
      <artifactId>lifecycle-mapping</artifactId>
      <version>1.0.0</version>
      <configuration>
        <lifecycleMappingMetadata>
          <pluginExecutions>
            <pluginExecution>
              <pluginExecutionFilter>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>aspectj-maven-plugin</artifactId>
                <versionRange>[1.4,)</versionRange>
                <goals>
                  <goal>compile</goal>
                  <goal>test-compile</goal>
                </goals>
              </pluginExecutionFilter>
              <action>
                <execute />
              </action>
            </pluginExecution>
          </pluginExecutions>
        </lifecycleMappingMetadata>
      </configuration>
    </plugin>
  </plugins>
</pluginManagement> 
```

This might cause you problem in Eclipse not to see the source folder correctly imported.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T17:15:38.727

我相信[`source`](http://mojo.codehaus.org/aspectj-maven-plugin/compile-mojo.html)应该是 java 版本，而不是目录。对`target`. `sources`允许您指定源目录，并且文档说如果未指定，则将使用当前项目的 java 源 - 只有一个用于当前配置的项目。

我会尝试在参数中列出目录`sources`，如果这不起作用，我会删除`sources`并尝试[build-helper:add-source](http://mojo.codehaus.org/build-helper-maven-plugin/add-source-mojo.html)。我还不确定是否有 m2e 连接器，`build-helper-maven-plugin`因此您可能必须向提到的 khmarbaise 添加类似的映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T02:31:26.833

我认为它不会被 Eclipse 添加为源文件夹。您可以在`Java Build Path > Source`.

这不是必需的：然后您需要安装[AJDT 插件](http://www.eclipse.org/ajdt/%E2%80%8E)并将项目转换为 AspectJ Project，否则`.aj`文件将充满 Eclipse 抱怨的错误。这些错误不会影响 maven 编译。

根据我的经验，识别或不识别为源不会影响 maven 编译`.aj`下的文件`src/main/aspect`

aspectDirectory并具有您给定的默认值[。](http://mojo.codehaus.org/aspectj-maven-plugin/compile-mojo.html#aspectDirectory)[`aspectTestDirectory`](http://mojo.codehaus.org/aspectj-maven-plugin/compile-mojo.html#testAspectDirectory)如果与默认值相同，则不需要它们。

下面是我的 pom 配置（没有尝试`test-compile`），它可以工作：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>aspectj-maven-plugin</artifactId>
    <version>1.4</version>
    <configuration>
        <source>1.6</source>
        <target>1.6</target>
        <!--<Xlint>ignore</Xlint>--><!--bypass xlint warnings -->
    </configuration>
    <dependencies>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjtools</artifactId>
        <version>1.7.2</version>
    </dependency>
    </dependencies>
    <executions>
    <execution>
        <goals>
            <goal>compile</goal>
        </goals>
    </execution>
    </executions>
</plugin> 
```

# listview - ListView 中的 ListItems 带有空文本

> ID：10686558
> 
> 赞同：4
> 
> 时间：2012-05-21T13:50:43.327
> 
> 标签：listview, vb6, common-controls

我有一个旧的 VB6 程序，它有一段时间没有改变，但现在有了新的行为。我在想一个通用组件是从它下面升级的。这是详细信息。

我在 SmallIcon 模式下有一个标准的 ListView 控件。代码片段：

```
'setup the listview
With lvwMap
   .Appearance = ccFlat
   .BackColor = vbBlack
   .BorderStyle = ccNone
   .Font.Name = "Arial" 
   .Font.Bold = True
   .Font.Size = 9
   .ForeColor = vbYellow
   .LabelEdit = lvwManual
   .LabelWrap = True
   .OLEDropMode = ccOLEDropManual
   .PictureAlignment = lvwTopLeft
   .TextBackground = lvwOpaque
   .View = lvwSmallIcon
End With 
```

添加的大多数 ListItems 都有一个 SmallIcon 和一个 Caption（文本）。TextBackground 设置为不透明，这意味着文本呈现在封闭的彩色矩形中。

有些项目可能没有提供标题，或者用户可以更改它以使没有标题。这曾经很好，只显示 SmallIcon。但是现在任何具有空 Text 属性的 ListItem 都会呈现一个相当宽的封闭矩形，其中没有文本（好像用户可能键入了一堆空格）。

添加 ListItem 的代码很简单：

```
 Set oLI = lvwMap.ListItems.Add(lvwMap.ListItems.Count + 1, Key:=sKey)
 oLI.SmallIcon = sIcon
 oLI.Text = sCaption 
```

我在这里停止了调试器，并在即时窗口中尝试了以下操作：

```
oLI.Text= "AAAAAAA"
?oLI.Width
 100.0063 

oLI.Text= "AAAAAA"
?oLI.Width
 91.99371 

oLI.Text= "AAAAA"
?oLI.Width
 84.0189 

oLI.Text= "AAAA"
?oLI.Width
 76.0063 

oLI.Text= "AA"
?oLI.Width
 60.0189 

oLI.Text= "A"
?oLI.Width
 52.0063 

oLI.Text= ""
?oLI.Width
 96.00001 
```

如您所见， ListItem.Width 会正确重新计算，直到 Text 变为空，然后跳转到 96 像素。

有谁知道有什么方法可以弥补这种行为？我可以使用一些 Windows 消息来配置默认的空 wdith？有关更改 ListView 行为的任何信息也可能会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T22:08:47.343

Mscomctl.ocx[在 4 月进行了更新，](http://technet.microsoft.com/en-us/security/bulletin/ms12-027)以修复 IE 中的一个安全漏洞——我猜这是它的行为发生变化的时候，因为我有一台带有旧版本文件（从 2004 年开始）的 VM 机器，它的行为不是这种方式我很确定那是[最近一次发布](http://support.microsoft.com/kb/896559)之前的最后一次发布。

至于该怎么做：好吧，我想这取决于导致您出现问题的原因。如果是因为您使用了项目的宽度属性，您可以轻松地将其与布尔值相乘，如下所示`iWidth = oLi.Width * Abs(oLi.Text <> "")`：但是，如果您不喜欢它的外观，我唯一能想到的就是在/如果用户将其设置为空时添加一个空格来减轻影响。从使用的角度来看，如果启用标签编辑，新行为可能会更好，因为它提供了更广泛的点击区域。

# c# - EntityFramework Group按实体类型

> ID：10686563
> 
> 赞同：2
> 
> 时间：2012-05-21T13:50:51.587
> 
> 标签：c#, entity-framework-4

我有一个基本实体 A 和派生实体：AA、AB、AC、AD

```
context.A.GroupBy(x => x.GetType()).Select(x => new { type=x.GetType(), count = x.Count() }); 
```

当然我得到错误：

> LINQ to Entities 无法识别方法“System.Type GetType()”方法，并且此方法无法转换为存储表达式。

如何按类型对派生实体进行分组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:54:04.457

如果类型是预定义的，您可以使用[Enumerable.OfType 方法](http://msdn.microsoft.com/en-us/library/bb360913.aspx)

```
var acs = context.A.OfType<AC>().Count(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:54:15.377

在调用 GroupBy 之前，您需要将实体水合到内存中 - 这样 x.GetType() 调用将由 LINQ to Objects 而不是 LINQ to Entities 处理。尝试这样做：

```
context.A.ToList().GroupBy(x => x.GetType()).Select(x => new { type=x.Key, count = x.Count() }); 
```

我更改了它，因此您在选择中调用 x.Key 而不是 x.GetType() ，否则您将获得类似于 IGrouping<...> 的分组类型

# delphi - 将 OpenOffice Calc 文件导出为 PDF 时如何处理打印区域？

> ID：10686569
> 
> 赞同：3
> 
> 时间：2012-05-21T13:51:08.140
> 
> 标签：delphi, pdf, openoffice-calc

[这里](https://stackoverflow.com/questions/7819191/saving-to-pdf-from-openoffice/)有一个将 OpenOffice 文件保存为 PDF 的示例。我正在使用类似的代码将 Calc 文件保存为 PDF。（将属性更改为 就足够了`writer_pdf_Export`。`calc_pdf_Export`）

不幸的是，代码没有考虑到原始文件中定义的打印区域。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:39:05.223

扩展我以前的代码（它不是尽可能干净）我会尝试这样的事情（注意我还没有测试过）。第三个参数将导出的范围指定为`TRect`变量：

```
procedure ExportCalcRangeToPDF(const ASourceFileURL, ATargetFileURL: string;
  ASheetIndex: Integer; ARange: TRect);
var
  CellRange: Variant;
  StarOffice: Variant;
  StarDesktop: Variant;
  StarDocument: Variant;
  FilterParams: Variant;
  ExportParams: Variant;
  ExportObject: Variant;

  function CreateProperty(const AName: AnsiString; const AValue: Variant): Variant;
  begin
    Result := StarOffice.Bridge_GetStruct('com.sun.star.beans.PropertyValue');
    Result.Name := AName;
    Result.Value := AValue;
  end;

begin
  StarOffice := CreateOleObject('com.sun.star.ServiceManager');
  StarDesktop := StarOffice.CreateInstance('com.sun.star.frame.Desktop');

  FilterParams := VarArrayCreate([0, 0], varVariant);
  FilterParams[0] := CreateProperty('Hidden', True);

  StarDocument := StarDesktop.LoadComponentFromURL(ASourceFileURL, '_blank', 0,
    FilterParams);
  CellRange := StarDocument.Sheets.getByIndex(ASheetIndex).getCellRangeByPosition(
    ARange.Left, ARange.Top, ARange.Right, ARange.Bottom);

  ExportParams := VarArrayCreate([0, 0], varVariant);
  ExportParams[0] := CreateProperty('Selection', CellRange);

  ExportObject := StarOffice.Bridge_GetValueObject;
  ExportObject.Set('[]com.sun.star.beans.PropertyValue', ExportParams);

  FilterParams := VarArrayCreate([0, 1], varVariant);
  FilterParams[0] := CreateProperty('FilterName', AnsiString('calc_pdf_Export'));
  FilterParams[1] := CreateProperty('FilterData', ExportObject);

  StarDocument.StoreToURL(ATargetFileURL, FilterParams);

  StarDocument.Close(True);
  StarDesktop.Terminate;

  StarDocument := Unassigned;
  StarDesktop := Unassigned;
  StarOffice := Unassigned;
end;    

procedure TForm1.Button1Click(Sender: TObject);
begin
  ExportCalcRangeToPDF(
    'file:///C:/SourceFile.ods',
    'file:///C:/TargetFile.pdf',
    0,
    Rect(1, 1, 2, 2)
  );
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:30:00.660

为了获得电子表格的打印区域，我这样做了。（当然可以改进）。

```
 ...
  Sheet: Variant;
  PrintAreas: Variant;
  ...

  ...
  Sheet := StarDocument.Sheets.getByIndex(0); // get the first sheet
  PrintAreas := Sheet.getPrintAreas; // get print areas

  CellRange := Sheet.getCellRangeByPosition(PrintAreas[0].StartColumn,
        PrintAreas[0].StartRow, PrintAreas[0].EndColumn,
        PrintAreas[0].EndRow); // Get range of the first print area
  ... 
```

# linq - 使用 where 子句返回值

> ID：10686574
> 
> 赞同：0
> 
> 时间：2012-05-21T13:51:22.227
> 
> 标签：linq, where

我有两个表如下：

```
 ScholarSubject
ScholarSubjectID<pk>
ScholarID
SubjectID
Mark 
```

和

```
 AdmissionReq
SubjectID
DegreeCode
MinumumMark 
```

我正在尝试从学位表（带有 PK degreeID）中返回所有内容，其中学者的分数低于录取的最低分数。我的查询如下：

```
public List<object> getDegreeByAPSandRequirements()
    {
        using (DataLayer.CareerDatabaseEntities context = new DataLayer.CareerDatabaseEntities())
        {
            return (from Degrees in context.Degrees
                    join admissions in context.AdmissionReqs on
                    Degrees.DegreeCode equals admissions.DegreeCode
                    join subject in context.Subjects on
                    admissions.SubjectID equals subject.SubjectID
                    join scholarsubject in context.ScholarSubjects on
                    subject.SubjectID equals scholarsubject.SubjectID
                    join scholar in context.Scholars on
                    scholarsubject.ScholarID equals scholar.ScholarID
                    where Degrees.APSScore <= scholar.APSScore && admissions.MinimumMark <= scholarsubject.NSC && scholarsubject.SubjectID.Equals(admissions.SubjectID)
                    select Degrees).Distinct().ToList<object>();

        }
    } 
```

一切正常，除非我将其中一个分数（在 ScholarSubject 中）更改为比最低分数（在 AdmissionsReq 中）更小的值，那么它仍然会返回一个学位。如果两个分数都高于最低要求，而不仅仅是一个分数，我想返回学位。

我究竟做错了什么？有人可以帮帮我吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:18:23.727

我仍然不确定我是否理解您要做什么-除非您的数据库中只有一位学者，否则在我看来，您将返回所有学者获得的所有学位的列表。如果你不想要这个，你需要在`where`子句中过滤scholarID。

但无论如何 - 为了获得更多信息，我会尝试做两件事。

1.  我会更改您的查询并以`scholar`not开头，`degree`因为这可能会避免一些重复：

    ```
     from scholar in context.Scholars 
        join scholarsubject in context.ScholarSubjects on scholar.ScholarID equals scholarsubject.ScholarID
        join subject in context.Subjects on scholarsubject.SubjectID equals subject.SubjectID
        join admission in context.AdmissionReqs on subject.SubjectID equals admission.SubjectID
        join degree in context.Degrees on admission.DegreeCode equals degree.DegreeCode
        where degree.APSScore <= scholar.APSScore 
            && admission.MinimumMark <= scholarsubject.NSC 
          //&& scholarsubject.SubjectID.Equals(admission.SubjectID) // you should not need this line as you have the joins in place to assert this
        select degree)
       .Distinct()
       .ToList<object>(); 
    ```

2.  如果这产生与您之前的查询相同的结果，那么我将更改返回类型以查看您到底得到了什么 - 用这个替换最后一行并检查集合：

    ```
     select new {ScholarID = scholar.ScholarID, Degree = degree})
       .Distinct()
       .ToList(); 
    ```

# powershell - VMware PowerShell 脚本 - 自动 gmail

> ID：10686578
> 
> 赞同：0
> 
> 时间：2012-05-21T13:51:49.983
> 
> 标签：powershell, vmware

这行得通，但是...

```
$EmailFrom = "vsphere@nasa.gov"
$EmailTo = "userwithOLDsnapshot@nasa.gov" 
$Subject = "Notification" 
$Body = "this is a notification for your snapshot"
$SMTPServer = "smtp.gmail.com" 
$SMTPClient = New-Object Net.Mail.SmtpClient($SmtpServer, 587) 
$SMTPClient.EnableSsl = $true 
$SMTPClient.Credentials = New-Object System.Net.NetworkCredential("username", "password"); 
$SMTPClient.Send($EmailFrom, $EmailTo, $Subject, $Body) 
```

反正有没有用凭证商店做这个？以明文形式在脚本中嵌入凭据是不行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:39:36.377

以下将创建一个加密字符串。您可以将此输出保存到某个文件并稍后读取： `$securePWord=Read-Host "Enter some password" -AsSecureString`

这会将 SecureString 转换为可用文本： `$pWord=[System.Runtime.InteropServices.marshal]::PtrToStringAuto([System.Runtime.InteropServices.marshal]::SecureStringToBSTR($securePWord))`

# resize - 使用 ImageMagick 根据纵横比对图像进行缩略图

> ID：10686579
> 
> 赞同：3
> 
> 时间：2012-05-21T13:51:53.040
> 
> 标签：resize, imagemagick, thumbnails, aspect-ratio

因此，我对此进行了一些研究，但找不到合适的答案，并想知道是否有办法做到这一点：

基本上，在将大文件（adobe cs 文件、图像文件、视频等）上传到网站后，我需要为它们创建缩略图。我已经完成了这部分，它实际上使用一些多线程技术效果很好，不会让用户在上传完成后等待。

目前我正在将所有缩略图调整为 250x250 的正方形大小。这是即时消息命令：

```
convert -quiet examplefile.extn 
-thumbnail x250 
-resize 250x< 
-background white 
-gravity center 
-crop 250x250+0+0 
+repage 
-unsharp 0x.5 
-quality 80 
-flatten 
thumbnail.jpg 
```

在视频和 psd 文件上看起来很棒；）好吧，事实证明一些网站要求已经改变（当这种情况发生时，dontya 喜欢它吗？）现在我需要根据它们的纵横比调整图像大小。条件是：

如果高度/宽度 > 1，则将缩略图宽度设置为 250，高度自由（最大 500）。如果 height/width <= 1，则将缩略图 HEIGHT 设置为 250，宽度自由（最大 500）。

这可能吗？在我继续研究自己的过程中，任何指示、建议、替代方案都非常感谢......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T15:52:26.797

调整大小选项在这里：[http ://www.imagemagick.org/script/command-line-processing.php#geometry](http://www.imagemagick.org/script/command-line-processing.php#geometry)

```
convert -quiet examplefile.extn -thumbnail 250x250 +repage -unsharp 0x.5 -quality 80 thumbnail.jpg 
```

您的代码似乎有点过于复杂 - 尝试上面将保持纵横比和最大尺寸为 250 像素的方法。

如果你想做一些更复杂的事情，我会在 IM 之外做，并将宽度和高度尺寸作为变量传递给命令。

```
-thumbnail {$width}x{$height} 
```

# iphone - iPhone 模式下 iPad 上的锯齿状石英 2D 渲染

> ID：10686582
> 
> 赞同：3
> 
> 时间：2012-05-21T13:52:00.027
> 
> 标签：iphone, ios, ipad, uikit, core-graphics

我正在为 iPhone 创建一个使用 Quartz 进行渲染的小卡片益智游戏。虽然它在 iPhone 上看起来很锐利，但在 iPad 上看起来确实是锯齿状的（它不是通用应用程序，所以它在 iPad 上以 iPhone 模式运行）。这不仅仅是常规的 2x 像素化，而是发生了一些非常奇怪的事情，我也可以在 1x 模式下看到它。（见下面的屏幕截图）

我在 UIButtonView 子类的 drawRect: 方法中绘制卡片。带有渐变、圆角、阴影和卡片内容的卡片都是在 drawRect: 方法中使用 Quartz 绘制的。但是，使用视图对象上的 transform 属性应用了旋转（可能还有可以从底部“向上拉”的较小卡片的平移）。

这里发生了什么？

编辑：
来自 iPhone 的![苹果手机](../Images/e246cddde3f116577b262c36f1dfe71f.png)
屏幕截图：来自 iPad 的屏幕截图：![平板电脑](../Images/53d4d5017a0b634c7f909c1f14583b70.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T23:07:52.623

你无能为力，这基本上是iOS中的一个错误。

问题是，iPad 上的 iPhone 模式早于 iPhone 4，并且通常保留显示。下面是它的实现方式：iPad 只是渲染一个 320x480 的视口。当您点击“2x”按钮时，视口不会改变。事物仍以 320x480 渲染，并且（较差）放大。

Apple 绝对应该改进这一点，并在“2x”模式下以 Retina 呈现您的应用程序。

不过，不要投入更多时间，只有 Apple 可以解决此问题。

# iphone - 恢复当前注册的设备 苹果 ios 付费开发者计划

> ID：10686586
> 
> 赞同：-1
> 
> 时间：2012-05-21T13:52:23.957
> 
> 标签：iphone, uuid, restore, provisioning-profile

我刚刚不小心删除了我的 Apple ios 程序中的所有注册设备。这使我的配置文件无效（正如明确说明的那样）以及如果现在我尝试添加具有相同名称的相同设备，我可以注册的设备数量**减少而不是保持不变。**换句话说，即使 uuid 相同，Apple 的系统也会“认为”它们是新设备。

有人有类似的问题吗？

**如何恢复这些设备**以及如何在不丢失可用设备数量的情况下删除设备？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:24:42.093

[https://developer.apple.com/support/ios/account-management.html](https://developer.apple.com/support/ios/account-management.html)

“每个会员年度，您最多可以注册 100 台 iOS 设备进行测试和临时分发。请注意：尽管您可以从您的帐户中删除设备，但它将继续计入您的 100 台设备限制。”

“在您的新会员年度开始时，团队代理或管理员可以登录 iOS 配置门户以删除列出的设备并将可用设备数量恢复到 100 台设备。请务必在之前删除您不再用于开发的所有设备添加任何新设备。”

[http://www.iphonedevsdk.com/forum/business-legal-app-store/90078-device-ids-when-renewing-dev-account.html](http://www.iphonedevsdk.com/forum/business-legal-app-store/90078-device-ids-when-renewing-dev-account.html)

“在我续订会员资格后，我可以重置我分配用于测试和临时分发的设备吗？

是的。每个会员年度最多可以分配 100 台设备进行测试和临时分发。在新会员年度开始时，团队代理和团队管理员可以删除设备并将其开发团队的可用设备数量恢复到 100 台设备。当团队代理或管理员在新会员年度开始时首次登录 iOS 配置门户时，他们将看到删除设备和恢复这些已删除设备的设备计数的选项。重要提示：只有在添加第一个新设备之前，才能删除设备并恢复其设备计数。因此，在添加任何新设备之前，删除您不再用于开发的所有设备非常重要。”

-=-=-=-=-=-=-=-=-=-=-

看起来您唯一的希望是实际联系 Apple，看看他们是否会按照 MNRSullivan 的建议帮助您解决错误。我不相信有任何其他方法可以快速修复它。但是，它似乎会在您的开发者会员资格的新年伊始自动退还您的注册名额，因此它会在一年后自行修复...

# c - 无法将 C 程序编译为 PostgreSQL 存储过程

> ID：10686590
> 
> 赞同：2
> 
> 时间：2012-05-21T13:52:41.017
> 
> 标签：c, postgresql

每个人。我尝试做一个简单的例子来说明如何在用 C 语言编写的 PostgreSQL 中创建存储过程。编译“test.c”时出现“未知类型基准”错误。我使用版本 1 调用约定。PostgreSQL 9.1 安装在我的 Ubuntu 11.10 下的服务器上。请帮忙。顺便说一句，有人有用 C 语言创建存储过程的分步示例吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T15:00:07.303

我在 FreeBSD 上做这件事的时候写了一个思维导图。这是链接以防万一。

[将 C 函数编译为存储过程大脑转储](http://flycereal.blogspot.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:25:20.940

1.  搜索 postgres 服务器包含路径 (Debian Wheezy = /usr/include/postgresql/9.1/server/)

2.  将示例（foo.c）中`#include`的指令从更改为`PostgreSQL``#include ""``#include<>`

3.  要编译，请使用指令添加包含搜索路径

    -I (gcc -fpic -c foo.c -I/usr/include/postgresql/9.1/server/)

4.  按照 Postgres 文档中的说明继续

[http://www.postgresql.org/docs/9.1/static/xfunc-c.html](http://www.postgresql.org/docs/9.1/static/xfunc-c.html)

# javascript - 将javascript文本框值访问到jsp页面

> ID：10686593
> 
> 赞同：0
> 
> 时间：2012-05-21T13:53:13.773
> 
> 标签：javascript, html, jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01  Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>

<script language="javascript" type="text/javascript">
function addElement() 
{ 

if(intTextBox==1)
{
var contentID = document.getElementById('content'); 
var newTBDiv = document.createElement("div"); 
newTBDiv.setAttribute('id','strText'+intTextBox); 
newTBDiv.innerHTML = "S.No <input type='text' id='sno' />          Name<input    type='text' id='name' />"; 
contentID.appendChild(newTBDiv); 
intTextBox=0;
}
} 

function removeElement() 
{ 
intTextBox=1;
var contentID = document.getElementById('content'); 
contentID.removeChild(document.getElementById('strText'+intTextBox)); 
} 

</script>

</head>
<body>
<p><a href="javascript:addElement();" >Add</a> <a href="javascript:removeElement();"     >Remove</a></p> 
            <div id="content"></div>
<%
String name=request.getParameter("sno");
if(name!=null){
out.println(name);
}
%>

</body>
</html> 
```

大家好，请帮助我，我遇到了一个问题。问题是我在 javascript 中有一个文本框，如何将 javascript 中的文本框**值访问到 jsp 页面**。有什么方法可以访问该值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:14:30.717

为输入字段命名。

所以而不是创造

```
<input type='text' id='sno' /> 
```

你应该创造

```
<input type='text' id='sno' name='sno' /> 
```

这样，提交的值就可以通过该名称在请求参数映射中使用。

```
String sno = request.getParameter("sno"); 
```

# c# - Peek 方法返回 ref 对象

> ID：10686595
> 
> 赞同：0
> 
> 时间：2012-05-21T13:53:15.517
> 
> 标签：c#, struct, queue, ref

好的，所以我有一个用于打印方法的队列。它为我需要打印的每一行存储文本和选定的字体。下面的循环应该打印出队列的内容，但看起来 peek 返回的是对象的值，而不是对象的实际引用。有没有办法让它返回一个参考？

```
 while (reportData.Count > 0 && checkLine(yPosition, e.MarginBounds.Bottom, reportData.Peek().selectedFont.Height))
        {
            ReportLine currentLine = reportData.Peek();

            maxCharacters = e.MarginBounds.Width / (int)currentLine.selectedFont.Size;

            if (currentLine.text.Length > maxCharacters)
            {
                e.Graphics.DrawString(currentLine.text.Substring(0, maxCharacters), currentLine.selectedFont, Brushes.Black, xPosition, yPosition);
                yPosition += currentLine.selectedFont.Height;
                currentLine.text.Remove(0, maxCharacters);
            }
            else
            {
                e.Graphics.DrawString(currentLine.text, currentLine.selectedFont, Brushes.Black, xPosition, yPosition);
                yPosition += currentLine.selectedFont.Height;
                reportData.Dequeue();
            }
        } 
```

ReportLine 是一个结构，因此除非另有说明，否则它总是按值传递。我不想将它更改为一个类，因为它的唯一目的是保存 2 条信息。

[编辑]

这就是 ReportLine 的样子。这很简单：

```
public struct ReportLine
{
    public string text;
    public Font selectedFont;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:01:13.937

`text`是一个类型的字段，`string`您希望它被`currentLine.text.Remove(0, maxCharacters);`. 但`Remove`不修改字符串，它返回一个新字符串。

尝试：

```
currentLine.text = currentLine.text.Remove(0, maxCharacters); 
```

并制作`ReportLine`一个参考类型：

```
public class ReportLine
{
    public string text;
    public Font selectedFont;
} 
```

# iphone - 播放具有透明背景的视频

> ID：10686596
> 
> 赞同：1
> 
> 时间：2012-05-21T13:53:20.660
> 
> 标签：iphone, transparency

有没有办法在iphone上播放具有透明背景的视频，包括声音。例如，如果我收到一条短信通知，应用程序应该播放 MainBundle 中具有透明背景的特定视频。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T14:02:19.827

要播放透明视频，您需要使用`AVFoundation.framework`. 它不是真的很难和可行，互联网上有一些很棒的教程。但是，当您想让应用程序在后台运行并监听传入的 SMS 时，这真的不应该是您的主要关注点，因为这对于 SDK 来说根本不可能。

# c# - 更改组合框中值的名称

> ID：10686598
> 
> 赞同：-1
> 
> 时间：2012-05-21T13:53:29.730
> 
> 标签：c#, .net-3.5, combobox

所以我有这个代码：

```
 public void ChangeDefault()
    {
        string selectedPath = selectdirectories.SelectedItem.ToString();
        if (selectedPath == "Data")
        {
            selectdirectories.ValueMember = "<Default>";
        }
    } 
```

我试图在我的组合框名称选择目录中更改一个值的名称，但它似乎不起作用。没有错误，它只是不起作用。

我也尝试过 DisplayMember，但也没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:25:54.060

如果我理解正确你想做的事情，那么这样的事情应该有效：

```
selectdirectories.Items[selectdirectories.Items.IndexOf("Data")] = "<Default>"; 
```

# java - 从 Eclipse 包中提取后损坏的 ELF 标头/部分

> ID：10686600
> 
> 赞同：1
> 
> 时间：2012-05-21T13:53:30.347
> 
> 标签：java, eclipse, elf

我需要帮助解决以下问题：

我有两个不同的 eclipse 产品，它们使用 linux 可执行文件所在的同一个包，但使用来自目标平台的不同 eclipse 插件（3.5 和 3.7）。两者都运行：

```
Java(TM) SE Runtime Environment (build 1.7.0_04-ea-b06) 
```

在 32 位 Debian 系统上。

两个应用程序都从包中提取可执行文件，`bundle.getEntry()`并通过 FileInputStream -> FileWriter 将其放入目录中。

然后可执行文件被调用。在一种情况下，它可以完美运行，而另一种则不能。对于 3.5 版（工作案例），`$:file myFile`说明如下：

```
ELF 32-bit LSB shared object, Intel 80386, version 1 (SYSV), dynamically linked, not stripped 
```

对于 3.7 版（非工作案例），`$:file myFile`说明如下：

```
ELF 32-bit LSB shared object, Intel 80386, version 1 (SYSV), corrupted program header size, corrupted section header size 
```

他们使用相同的操作系统、JRE 和 Bundle，但是是什么破坏了我的 ELF 元数据？我不知道还有什么地方可以看。是Java问题吗？蚀？图书馆？

这里的复制方法：

```
URL url = bundle.getBundle(path);
inputStream = url.openStream();
FileWriter fileWriter = new FileWriter(path);

int in;
while ((in = inputStream.read()) != -1)
fileWriter.write(in);

inputStream.close();
fileWriter.close();

new File(path).setExecutable(true, false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T15:40:07.243

你不应该使用`FileWriter`二进制数据。改为使用`FileOutputStream`。

`Reader`s 和`Writer`s 用于文本数据，它们与`char`s 一起使用，而`InputStream`s 和`OutputStream`s 用于二进制数据，它们与`byte`s 一起使用。s 和 bytes之间的转换`char`是通过应用适当的字符编码来实现的，它可能会损坏通过`FileWriter`.

# zend-route - Zend Framework 2 - Zend\Mvc\Router\Http\Part - 模块配置

> ID：10686603
> 
> 赞同：0
> 
> 时间：2012-05-21T13:53:40.813
> 
> 标签：zend-route, zend-framework2, zend-framework-mvc, zend-router

我正在使用 ZF2 创建一个多语言应用程序.. 并且无法确定如何添加部分 URL，该部分 URL 将构成每个 URL 的基础，而不管模块如何。

```
http://localhost/en/us/application/index/index/ 
```

我完全了解如何`/[:namespace[/:controller[/:action]]]`使用 DI进行配置

```
http://localhost/application/index/index/
http://localhost/guestbook/index/index/
http://localhost/forum/index/index/ 
```

我不明白的是如何配置将成为所有路由基础的**Part**路由。在 ZF1 中，我使用**Route Chaining**来实现这一点。

所以我需要配置一个适用于站点范围的**部分**路由，`/[:lang[/:locale]]`然后让模块配置`/[:namespace[/:controller[/:action]]]`或任何其他必要的路由..

```
http://localhost/en/us/application/index/index/
http://localhost/zh/cn/application/index/index/
http://localhost/en/uk/forum/index/index/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:58:46.647

I think what you are looking for is the `child_routes` configuration key. Take a look at how [ZfcUser configures it's routing (here)](https://github.com/ZF-Commons/ZfcUser/blob/master/config/module.config.php#L48): it creates a base Literal route (/user) and then chains the sub-routes (/user/login, etc) onto it via the `child_routes` array.

I think something like this will do the trick for you:

```
'router' => array(
    'routes' => array(
        'myapp' => array(
            'type' => 'Segment',
            'options' => array(
                'route' => '/[:lang[/:locale]]',
                'defaults' => array(
                    'lang'   => 'en',
                    'locale' => 'us',
                ),
            ),
            'may_terminate' => false,
            'child_routes' => array(
                'default' => array(
                    'type'    => 'Segment',
                    'options' => array(
                        'route'    => '/[:controller[/:action]]',
                        'constraints' => array(
                            'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                            'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                    ),
                    'defaults' => array(
                        'controller' => 'index',
                        'action'     => 'index',
                    ),
                ),
            ),
        ),
    ),
), 
```

Then in your controller you could do this to get the lang and locale:

```
$this->params()->fromRoute('lang');
$this->params()->fromRoute('locale'); 
```

# c# - 异步调用 - 如何在 UI 线程上等待它们

> ID：10686604
> 
> 赞同：1
> 
> 时间：2012-05-21T13:53:54.450
> 
> 标签：c#, asp.net-mvc, asynchronous

我正在处理的网站上有一个登录页面，并且在调用该页面的操作时，会进行一些异步 Web 调用以缓存结果以供以后使用。不过，我想做的是等待调用完成，然后再进行下一个操作。基本上我有：

```
GetParticipantInfo(planID, partID );

SetCurrentInvestments(partID, planID);

GetLoanFunds(planID, partID); 
```

并且每个都像这样拆分：

```
public void GetParticipantInfo(string planNumber, string participantID)
    {
        IAsyncResult _IAsyncResult;
        List<string> parameter = new List<string>();
        parameter.Add(planNumber);
        parameter.Add(participantID);
        GetParticipantInfo_A _GetParticipantInfo_A = new GetParticipantInfo_A(GetParticipantInfoAsync);
        _IAsyncResult = _GetParticipantInfo_A.BeginInvoke(participantID, planNumber, serviceContext, GetParticipantInfoAsyncCallBack, parameter);

    }

    public ParticipantDataModel GetParticipantInfoAsync(string planNumber, string partId, ServiceContext esfSC)
    {

        ParticipantDataModel pdm = new ParticipantDataModel();
        return pdm;

    }

    private void GetParticipantInfoAsyncCallBack(IAsyncResult ar)
    {
        try
        {
            AsyncResult result;              
            result = (AsyncResult)ar;
            string planID = ((List<string>)ar.AsyncState)[0];
            GetParticipantInfo_A caller = (GetParticipantInfo_A)result.AsyncDelegate;
            ParticipantDataModel pdm = caller.EndInvoke(ar);
            _cacheManager.SetCache(planID, CacheKeyName.GetPartInfo.ToString(), pdm);
        }
        catch (Exception ex)
        { }
    } 
```

所以问题是，如何设置 UI 线程以等待调用完成，然后再进行其他操作？

回应乔：

好的，所以假设他们都返回 asyncresult，我可以做类似的事情：

```
List<IAsyncResult> results;
//After each call
result = OneOfTheAsyncCalls();
results.Add(result);

foreach(IAsyncResult result in results)
{
     result.AsyncWaitHandle.WaitOne();
} 
```

还是顺序很重要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:00:31.643

你能在调用者和异步回调之间使用 AutoResetEvent 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:00:13.097

您可以使用`IAsyncResult.AsyncWaitHandle`等待异步操作完成。

您的示例代码（例如 GetParticipantInfo）丢弃了`IAsyncResult`. 相反，将其返回给调用者。

> 查看我对原始问题的编辑

是的，您的编辑看起来会起作用（或者您可以使用`WaitAll`而不是循环播放`WaitOne`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T14:52:31.163

重构您的方法，以便他们使用该`Task.FromAsync`方法。例如，`GetParticipantInfo`看起来像这样。我基本上将所有内容整合到这个方法中。

```
public Task<ParticipantDataModel> GetParticipantInfo(string planNumber, string participantID)
{
  var instance = new GetParticipantInfo_A(
    (planNumber, partID, esfSC) =>
    {
      return new ParticipantDataModel();
    }
  );
  var main = Task<ParticipantDataModel>.Factory.FromAsync(
    instance.BeginInvoke, 
    instance.EndInvoke, 
    participantID, 
    planNumber, 
    serviceContext,
    null);
  var continuation = main.ContinueWith(
    task =>
    {
      lock (_cacheManager)
      {
        _cacheManager.SetCache(planNumber, CacheKeyName.GetPartInfo.ToString(), task.Result);
      }
    });
  return continuation;
} 
```

然后您的页面请求代码将如下所示。我曾经`Task.WaitAll`阻止页面请求线程，直到每个单独的任务完成。

```
private void YourButton_Click(object sender, EventArgs args)
{
  var t1 = GetParticipantInfo(partID, plantID);
  var t2 = SetCurrentInvestments(partID, planID);
  var t3 = GetLoanFunds(planID, partID);
  Task.WaitAll(t1, t2, t3);
} 
```

# iphone - 如何通过按住 iPhone 中的 UIButton 来重复调用某些方法

> ID：10686612
> 
> 赞同：0
> 
> 时间：2012-05-21T13:54:20.153
> 
> 标签：iphone, ios5, uibutton, xcode4.3

我需要通过按住 UIButton 反复调用某些方法。一旦我释放按钮，它应该停止调用该方法。我怎样才能实现这个功能有没有人知道这意味着请帮助我摆脱这个问题..在此先感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T13:56:04.227

您可以使用`touchesBegan`方法来调用此方法并`touchesEnd`停止此方法。

在方法内部，您可以使用一些循环`for`或`while`根据条件调用此方法，或者您可以启动一个计时器来调用此方法`touchesBegan`并使计时器无效`touchesEnd`。

# java - Java - 导出的 JAR 和 Eclipse IDE 之间的不同行为

> ID：10686613
> 
> 赞同：0
> 
> 时间：2012-05-21T13:54:20.337
> 
> 标签：java, eclipse, eclipse-rcp

今天我在尝试从 Eclipse IDE 调用批处理文件时遇到了一个奇怪的问题。

普通用户的设置是：

*   调用 .bat 文件
*   这设置了一些环境变量
*   并调用一个 Eclipse RCP 应用程序

我的程序的设置是：

*   通过调用相同的 .bat 文件`Runtime.exec()`

以普通用户身份调用它时，一切正常，RCP 启动。

在 Eclipse IDE 中调用它时，`Runtime.exec()`我收到一条错误消息，抱怨`Program Files\jre6\bin\server\jvm.dll could not be found`（尽管它在那里）。

将我的程序导出为可执行的 .jar 文件时，效果很好，就像我自己单击 .bat 一样。

有什么区别？（操作系统为Win7）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:05:11.490

好的，我知道了。

这似乎是 Eclipse 3.7 的一个特定问题。

安装 4.2 后一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:15:02.597

在日食中，

*   右键单击项目，然后单击“属性”。
*   选择“Java 构建路径”。
*   选择“库”选项卡。
*   选择“JRE 系统库”并单击“编辑”。

检查系统库是否指向有效的 JDK 安装（不是 JRE）。如果它不指向有效的 JDK 安装。

*   选择“Alternate JRE”并点击“Installed JREs”
*   单击添加，指向有效的 JDK 安装，然后单击确定。
*   在“Alternate JRE”下拉列表中，选择新添加的有效 JDK，然后单击 Finish。

运行程序并检查。

# javascript - YouTube 视频不会重复

> ID：10686614
> 
> 赞同：0
> 
> 时间：2012-05-21T13:54:24.507
> 
> 标签：javascript, youtube, youtube-api, youtube-javascript-api

[EndlessVideo](http://endlessvideo.com)网站过去运行良好，但突然之间它不再循环播放视频了。我发现在控制台中运行以下代码具有想要的效果，但奇怪的是，将其添加到页面底部似乎不起作用：

```
<script>
ytplayer = jQuery("#ytapiplayer")[0];
ytplayer.addEventListener("onStateChange", "onytplayerStateChange1"); 
function onytplayerStateChange1(state){console.log(state);if(state == 0){ytplayer.playVideo();}}
</script> 
```

我已经尝试了上述的各种修改，包括从 调用它`onYouTubePlayerReady()`，在计时器上运行它等等......似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:23:56.377

加载页面后加载 youtube 视频播放器。所以事件实际上并没有与玩家绑定。请在视频开始播放后或至少在播放器加载后尝试添加状态处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:13:52.917

通过传递`&loop=1`查询字符串启用循环。

启用循环不需要 JavaScript API。

# javascript - 组合后 Javascript 停止工作

> ID：10686616
> 
> 赞同：-2
> 
> 时间：2012-05-21T13:54:25.827
> 
> 标签：javascript

好吧，我有很多脚本，所以我所做的就是将它们全部组合到一个脚本文件中，其中也包含 Jquery 库之类的文件。但是现在的问题是它已经停止工作了，我不知道为什么会这样。

我所做的是我将每个脚本复制并粘贴，然后按几次回车在它下面留出一些空间，然后我用来粘贴其他脚本，我被告知这是组合脚本的方法，但现在脚本不工作。这是组合脚本的链接[http://files.cryoffalcon.com/bloghuts/uncompressed/BlogHuts%20UNCOMPRESSED.js](http://files.cryoffalcon.com/bloghuts/uncompressed/BlogHuts%20UNCOMPRESSED.js)

现场示例的链接是[http://bloghutsbeta.blogspot.com/](http://bloghutsbeta.blogspot.com/)

答案/解决方案：

早些时候我使用的是旧版本的 Jquery，我认为现在是 1.5，现在我将其更改为最新的 1.7，这就是一切停止工作的原因。它与组合无关。我正在使用所有脚本组合并且一切正常但是为什么旧版本比新版本更好，这对我来说是一个新问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:17:27.353

首先，我建议您将 jquery 库链接移到主页。为您的所有 javascript 提供一个文件，并将其他内容包含在单独的行中。

但是，无论您是否这样做，您的问题几乎可以肯定是某种未闭合的括号或分号丢失或类似的东西。Javascript 经常对这样的东西做出反应，举起双手放弃。修复它的方法是检查你的文件并选择一个当前不工作的功能，但它很容易测试功能。然后注释掉其他所有内容，并测试该功能是否有效。如果没有，请修复该功能，直到它起作用。然后，一次一块，取消注释其他每个块，再次测试以查看初始功能是否有效。如果取消注释一个块会导致该块停止工作，那么这就是您需要修复的块。根据您的块的长度，您可能需要分层执行此操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:38:44.590

首先，永远不要用 jQuery 那样做。[将脚本 src 指向某个地方的公共 CDN](http://docs.jquery.com/Downloading_jQuery#CDN_Hosted_jQuery)几乎总是更好。

其次，您尝试做的事情非常脆弱，可能不值得进行故障排除。如果你有那么多 JS 文件，你真的需要使用一个模块库（我喜欢[require.js](http://requirejs.org/)）来给你的项目一些结构，让它更易于管理。大多数像这样的库将包含某种实用程序来安全地组合和缩小您的脚本。

这将需要您做一些工作来进行设置，但从长远来看，这应该证明是值得的！

# node.js - 如何在 Node.js 中“累积”原始流？

> ID：10686617
> 
> 赞同：11
> 
> 时间：2012-05-21T13:54:41.103
> 
> 标签：node.js, stream

目前我将所有内容连接成一个字符串，如下所示

```
var body = '';
res.on('data', function(chunk){
    body += chunk;
}); 
```

如何保存和累积原始流，以便将原始字节传递给期望字节而不是字符串的函数？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-04-25T22:30:35.583

更好地使用[Buffer.concat](http://nodejs.org/api/buffer.html#buffer_class_method_buffer_concat_list_totallength) - 更简单。在节点 v0.8+ 中可用。

```
var chunks = [];
res.on('data', function(chunk) { chunks.push(chunk); });
res.on('end', function() {
    var body = Buffer.concat(chunks);
    // Do work with body.
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-21T14:56:26.860

首先，检查这些函数是否*真的*需要一次性使用所有字节。他们确实应该接受`'data'`事件，以便您可以按照接收它们的顺序传递缓冲区。

无论如何，这是连接所有数据块缓冲区而不解码它们的蛮力方法：

```
var bodyparts = [];
var bodylength = 0;
res.on('data', function(chunk){
    bodyparts.push(chunk);
    bodylength += chunk.length;
});
res.on('end', function(){
    var body = new Buffer(bodylength);
    var bodyPos=0;
    for (var i=0; i < bodyparts.length; i++) {
        bodyparts[i].copy(body, bodyPos, 0, bodyparts[i].length);
        bodyPos += bodyparts[i].length;
    }
    doStuffWith(body); // yay
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-02T20:00:53.520

或者，您也可以使用 node.js 库，例如 bl 或 concat-stream：

```
'use strict'
let http = require('http')
let bl = require('bl')
http.get(url, function (response) {
  response.pipe(bl(function (err, data) {
    if (err)
      return console.error(err)
    console.log(data)
  }))
}) 
```

# iphone - iOS升级问题

> ID：10686618
> 
> 赞同：0
> 
> 时间：2012-05-21T13:54:42.257
> 
> 标签：iphone, ios

> **可能重复：**
> [iOS 升级后应用程序崩溃](https://stackoverflow.com/questions/10680981/app-crashing-after-ios-upgrade)

我将设备从 iOS 5.1.0 升级到 iOS 5.1.1。升级后，我的应用程序在单击应用程序图标时崩溃。这可能是什么原因？

我在我的应用程序中使用以下存储。- 使用 NSUserDefaults 在应用启动时读取值。- 使用钥匙串存储用户凭据。- iOS 升级时用户默认设置和钥匙串是否受到影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:35:14.740

This is most likely happening because Apple changed the internal structure of the views. I have seen this when you loop through the subview and Apple made any significant changes to the view all that code is not going to work. Something similar is happening in your case.

This is what I would do, run application on your phone from xcode and keep breakpoints on, it should help you to narrow down the problem.

# performance - R - 提高简单循环的性能

> ID：10686620
> 
> 赞同：1
> 
> 时间：2012-05-21T13:54:52.077
> 
> 标签：performance, r

我是 R 的初学者，所以我很难以“R 方式”思考事物......

我有这个功能：

```
upOneRow <- function(table, column) {
  for (i in 1:(nrow(table) - 1)) {
    table[i, column] = table [i + 1, column]
  }
  return(table)
} 
```

它看起来很简单，并且不应该花费那么长时间来运行，但是在具有约 300k 行的数据帧上，运行所需的时间是不合理的。解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T13:59:43.127

而不是循环，你可以尝试这样的事情：

```
n <- nrow(table)
table[(1:(n-1)), column] <- table[(2:n), column]; 
```

向量化是关键

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T16:20:09.763

简单的答案：data.frame 中的列也是可以用 [,] 索引的向量

```
my.table <- data.frame(x = 1:10, y=10:1)
> my.table
  x y
1 1 5
2 2 4
3 3 3
4 4 2
5 5 1
my.table$y <-c(my.table[-1,"y"],NA) #move up one spot and pad with NA
> my.table
  x  y
1 1  4
2 2  3
3 3  2
4 4  1
5 5 NA 
```

现在您的函数在末尾重复最后一个数据点。如果这确实是您想要的，请使用 tail(x,1) 而不是 NA 填充。

```
my.table$y <-c(my.table[-1,"y"],tail(my.table$y,1)) #pad with tail(x,1)
> my.table
  x y
1 1 4
2 2 3
3 3 2
4 4 1
5 5 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T16:01:45.970

如果我理解正确，您正在尝试“向上​​移动”数据框的一列，第一个元素位于底部。那么，它可能实现为：

```
col <- table[, column]
table[, column] <- col[c(nrow(table), 1:(nrow(table)-1))] 
```

# asp.net-mvc-3 - 如何从一个 POCO 访问视图中的关联以及对另一个的多个引用

> ID：10686623
> 
> 赞同：0
> 
> 时间：2012-05-21T13:54:59.560
> 
> 标签：asp.net-mvc-3, entity-framework

对不起标题；想不出更好的了。

无论如何，我正在访问我的视图中的关联属性，如下所示：

```
@Model.Company.CompanyName // No problems here... 
```

该模型是映射到 EF POCO 的视图模型。该模型有几个与公司表关联的属性。模型中只有一个属性与 Company 表中的 PK 具有相同的名称。所有其他属性都引用同一张表：

```
public class MyModelClass 
{
    public int Id { get; set; }
    public int CompanyId { get; set; }
    public int AnotherCompanyId { get; set; } // References CompanyId
    public int AndAnotherCompanyId { get; set; } // References CompanyId

    public Company Company { get; set; }
 }

 public class Company
 { 
    public int CompanyId { get; set; }
    public string CompanyName { get; set; }
    public string Address { get; set; }
 } 
```

我显然在这里遗漏了一些东西。

如何在我的模型中获取其他公司的名称？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:59:39.203

> 模型是映射到 EF POCO 的视图模型

我认为您混淆了视图模型的概念。视图模型是专门为满足视图要求而设计的类。因此，如果在您的视图中您需要显示公司名称而不是公司 ID，那么您的视图模型应该直接包含一个`CompanyName`属性。或者对另一个`CompanyViewModel`直接包含名称的视图模型 ( ) 的引用。然后，您的控制器操作负责查询您的域模型（EF 实体）并将它们聚合到单个视图模型中，这将包含视图所需的所有必要信息。

典型的视图模型如下所示：

```
public class MyViewModel
{
    public CompanyViewModel Company { get; set; }
    public CompanyViewModel AnotherCompany { get; set; }
    public CompanyViewModel AndAnotherCompany { get; set; }
}

public class CompanyViewModel
{
    public string Name { get; set; }
} 
```

此视图模型中数据的来源并不重要。您可以从 EF 内容填充 Company 属性，从 XML 文件填充 AnotherCompany 属性，从 WCF 填充 AndAnotherCompany。

# hadoop - Hadoop fs -get 仅复制特定文件

> ID：10686625
> 
> 赞同：3
> 
> 时间：2012-05-21T13:55:07.830
> 
> 标签：hadoop

有没有办法只复制特定文件，比如使用 fs -get 或 fs -copyToLocal 根据文件类型？注意：我希望这是递归的并遍历整个集群。

想通了，但我无法回答我自己的问题。

这是我们如何做到的。刚刚写了一个快速的shell脚本。

```
mkdir /tmp/txt

    for F in `hadoop fs -fs hdfs://namenode.mycluster -lsr / | grep '/*.txt$' | awk '{print $NF}'; 
    do
       hadoop fs -fs hdfs://namenode.mycluster -copyToLocal $F /tmp/las/ 
    done 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T20:49:51.533

这是我们如何做到的。刚刚写了一个快速的shell脚本。

```
LOCAL_DIR=/tmp/txt
mkdir $LOCAL_DIR

for F in `hadoop fs -fs hdfs://namenode.mycluster -lsr / | grep '/*.txt$' | awk '{print $NF}'; 
do
   hadoop fs -fs hdfs://namenode.mycluster -copyToLocal $F $LOCAL_DIR 
done` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T14:25:24.547

您可以使用正则表达式来复制文件。这里有一个在 hadoop 中使用命令行的示例。这不使用 get，但它使用 put，它的行为应该与 get 相同。

像这样的东西：`hadoop fs -get out/*`

[http://prazjain.wordpress.com/2012/02/15/how-to-run-hadoop-map-reduce-program-from-command-line/](http://prazjain.wordpress.com/2012/02/15/how-to-run-hadoop-map-reduce-program-from-command-line/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T14:44:46.007

Hadoop 不支持路径中的双星 glob 表示法，因此没有开箱即用的方法：

```
hadoop fs -get /**/*.txt /tmp 
```

但是，您可以编写自己的代码来执行此操作 - 查看 FsShell 的当前源，并将其与 FileInputFormat 的 listStatus 方法配对 - 可以将其配置为接受 PathFilter。在此 PathFilter 中，只有当 Path 是您想要的文件类型时，您才能返回 true。

# math - 将矩形变成圆环

> ID：10686626
> 
> 赞同：4
> 
> 时间：2012-05-21T13:55:14.137
> 
> 标签：math, graphics, transform

我有一个矩形，我需要“弯曲”成一个环，即矩形的顶部边缘必须映射到环的外圆，底部映射到内圆，并且矩形的边应该连接。

这是矩形和环的非常粗略的草图： ![在此处输入图像描述](../Images/32f64d5023e44383dd70685db4e3da41.png)

如果有帮助或有必要，我可以将矩形视为水平线的集合，将环视为圆的集合。

矩形具有从 a 到 b 的水平渐变，应该映射，以便渐变在圆形方向上进行。

我可以看到这是一个非线性变换，但是我不知道在哪里可以学习解决这个问题的技术。任何在 CG 方面有适当经验的人都可以为我指出正确的文本、正确的算法名称或正确的图形库来制作我的戒指吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T14:03:10.017

尝试只使用[极坐标](http://en.wikipedia.org/wiki/Polar_coordinates)。如果将 x 映射为 r 并将 y 映射为 θ（标准化为 θ 从 0 到 2π），那么向 r 添加一些偏移量将改变环的半径，向 θ 添加偏移量将使其围绕圆旋转。

```
r = fx + a
g = (max_y - min_y)/(2*pi)
theta = gy + b 
```

其中 a 和 b 是这些偏移量，f 缩放环的宽度，g 将矩形的长度标准化为 2π。从这些极坐标转换回笛卡尔坐标（即屏幕）只是：

```
x' = r cos(theta)
y' = r sin(theta) 
```

然后，您有 3 个坐标系：(x,y) 用于原始矩形，(r,θ) 用于环的极坐标，(x',y') 用于屏幕坐标。

# c - Malloc 无法分配内存

> ID：10686629
> 
> 赞同：0
> 
> 时间：2012-05-21T13:55:19.660
> 
> 标签：c, memory-management, malloc

我的代码遇到了这个奇怪的问题。Malloc 在这里返回一个空指针。我的 ram 上有 3 GB 内存，它无法分配几个字节。为什么会这样？？有人请帮忙..

这是我的代码

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

struct htree{
   unsigned char ch;
   unsigned long int freq;
   struct htree *left, *right, *parent;
   };

struct code_list{
   unsigned char ch;
   char *code;
   };

typedef struct htree node;
typedef struct code_list * dict;

dict codes;

int readfile(char *filename, long int *char_count)
{
 int types = 0;
 FILE *fp = fopen(filename,"rb");
 unsigned char byteread;
 fread(&byteread,1,1,fp);
 int count=0;
 while(!feof(fp))
 {

                 if (char_count[byteread] == 0)
                 {
                 types++;
                 }
                 char_count[byteread]++;
                 fread(&byteread,1,1,fp);

 }
 fclose(fp);
 return types-1;
}
node * genhuffnode()
{
 node *t = (node *)malloc(sizeof(struct htree));
 t -> ch = '\0';
 t -> freq = 0;
 t -> left = NULL;
 t -> right = NULL;
 t -> parent = NULL;
 return t;
}

node * genhufftree(long int *char_count, int max_index)
{
 node **stack;
 node *temp;
 stack = (node **) calloc(max_index,sizeof(node *));
 int i,j=0;
 for(i=0;i<256;i++)
 {
                   if(char_count[i]>0)
                   {
                   stack[j] = (node *)malloc(sizeof(node));
                   stack[j] -> ch = i;
                   stack[j] -> freq = char_count[i];
                   stack[j] -> left = NULL;
                   stack[j] -> right = NULL;
                   stack[j] -> parent = NULL;
                   j++;
                   }
 }

 for(i=0;i<=max_index;i++)
 for(j=i+1;j<=max_index;j++)
 if(stack[j] -> freq > stack[i] -> freq)
 {
                 temp = stack[j];
                 stack[j] = stack[i];
                 stack[i] = temp;
 }
 while(i>0)
 {
           temp = genhuffnode();
           temp -> freq = stack[i] -> freq + stack[i-1] -> freq;
           temp -> left = stack[i-1];
           temp -> right = stack[i];
           stack[i-1] -> parent = temp;
           stack[i] -> parent = temp;

           for(j=i-2;j>0;j--)
           {
                              if(temp->freq > stack[j-1]->freq)
                              stack[j+1] = stack[j];
                              else break;
           }
           stack[j] = temp;
           i--;
 }
 return stack[0];
}

void generatedict(node *root, char *s)
{
 if(root == NULL)
 return;
 char *new_code;

 static int index = 0;

 int len = strlen(s)+1;

 if(root->left == NULL && root->right == NULL)
 {

               codes[index].ch = root->ch;
               codes[index].code = (char *) malloc(len*sizeof(char));
               strcpy(codes[index].code,s);
               index++;
 }
 else
 {

               new_code = (char *)(malloc(len+1));/// this malloc is causing prob
               if(new_code == NULL)
               {
               printf("Coudnt allocate memory\n");
               getchar();
               exit(1);
               }
               else 
               {
               strcpy(new_code,s);
               new_code[len] = '\0';
               new_code[len-1] = '0';
               generatedict(root->left,new_code);
               new_code[len-1] = '1';
               generatedict(root->right,new_code);
               }
 }

 free(root);
 return;
}

void writedict(int total_entries)
{
 FILE *fp = fopen("dictionary","wb");
 fwrite(codes,sizeof(struct code_list) * total_entries, sizeof(struct code_list) *         total_entries, fp);
 fclose(fp);
}                  

main()
{

  long int char_count[256];
  int max_index;
  max_index = readfile("2.jpg",char_count);
  node *root_node;
  root_node = genhufftree(char_count, max_index);
  codes = (struct code_list *)calloc(256,sizeof(struct code_list));         
  generatedict(root_node,"");
  writedict(max_index+1);

  getchar();
}

Note : please keep any file named "2.jpg" in the same folder as the  executable 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:02:53.797

我的猜测是，您的程序破坏`malloc`了您调用 malloc 的早期位置之一的池（有很多 malloc 调用！）。您没有检查大多数 malloc 调用的返回值。

我建议检查`malloc`所有地方的返回值，看看哪个首先失败。`valgrind`此外，使用(Linux) 或`purify`(windows)检查代码中的内存泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:02:17.033

如果您不认为您的程序正在耗尽内存，那么很可能`malloc()`只是*认为*您已经耗尽了内存。如果您释放未分配的指针、多次释放同一个指针、覆盖缓冲区等，可能会发生这种情况。仔细调试您的程序，寻找这些问题，和/或使用[valgrind](http://valgrind.org/)自动找到它们。

# javascript - 如果选中复选框，则需要 JQuery 验证输入文本字段

> ID：10686631
> 
> 赞同：9
> 
> 时间：2012-05-21T13:55:28.310
> 
> 标签：javascript, jquery-validate

我有以下复选框：

```
<input type="checkbox" id="startClientFromWeb" name="startClientFromWeb" data-bind="checked: StartClientFromWeb" /> 
```

和以下输入文本字段：

```
<input id="mimeType" name="mimeType" data-bind= "value: MimeType" /> 
```

这是我的 js 验证代码：

```
 $("#franchiseForm").validate({
            rules: {
                mimeType: {
                    required: $("#startClientFromWeb").is(":checked")
                }
            }
        }); 
```

我希望仅在选中复选框时才需要 mimeType 输入文本字段。由于某种原因，上述方法不起作用。我对 javascript 和 jquery 很陌生。任何有关工作示例的帮助将不胜感激。谢谢你！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-21T14:18:13.623

您可以添加自己的自定义验证方法来处理这样的事情：

```
$.validator.addMethod("requiredIfChecked", function (val, ele, arg) {
    if ($("#startClientFromWeb").is(":checked") && ($.trim(val) == '')) { return false; }
    return true;
}, "This field is required if startClientFromWeb is checked...");

$("#franchiseForm").validate({  
        rules: {  
            mimeType: { requiredIfChecked: true }  
        }  
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T14:00:52.393

如果输入为 ，则不会触发验证`disabled`。你可以使用这个事实——让文本框是必需的，但最初是禁用的，只有在选中复选框时才启用它。

```
$(function () {
   $('#startClientFromWeb').change(function () {
        if ($(this).is(':checked')) {
            $('#mimeType').removeAttr('disabled');                
        }
        else {
            $('#mimeType').attr('disabled', 'disabled');
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-28T16:48:50.443

**最简单的工作方式：**
`rules : {mimeType:{required:"#startClientFromWeb:checked"}}, messages: {mimeType: {required: 'Repeat checked, To date required'}}`

# java - Java上下移动图像，动画运动

> ID：10686632
> 
> 赞同：0
> 
> 时间：2012-05-21T13:55:29.153
> 
> 标签：java, image, paint, repaint

我想知道绘制后如何移动图像？

这是我绘制图像的代码：

```
public int probeX = 500;
public int Minerals = 400;
public int drawProbeA, drawProbe = 0;

public void init() {
   // Images Call
   probe = getImage(getDocumentBase(), "image/probe.png");
}

public void paint(Graphics g) {
   if (drawProbe == 1) {
      for (int k = 0; k < drawProbeA; k++) {

         g.drawImage(probe, probeX, 474, 50, 50, this);
         probeX += 50;
      }
      probeX = 500;
   }
}

public boolean mouseDown(Event e, int x, int y) {
   // Clicking on the probe icon
   if (x > 1068 && x < 1119 && y > 785 && y < 832 && onNexus == 1
         && Minerals >= 50) {
      drawProbeA += 1;
      drawProbe = 1;
      Minerals -= 50;
   }

   return true;
} 
```

我怎样才能做到这一点，以便在绘制图像后，点击图标将导致图像自动向下移动 y 轴（如 50 像素）？基本上，就像用动画向下滑动图像一样？然后停下来，然后回到原来的位置。

我正在使用 Applet，并希望动画重复循环。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:00:29.313

你需要有一个全局变量，或者某个地方的另一个变量，这表明......

1.  图片需要移动
2.  它已经在 Y 方向移动了多远
3.  它朝哪个方向（向上或向下）

当你有这个时，你需要在你的`paint()`方法中添加代码来在正确的位置绘制图像。

您还需要一个`Timer`或`Thread`，它将每隔几毫秒告诉组件`repaint()`，并更改您的全局变量，以便它将重新绘制得更低/更高。

所以，作为一个例子，你可能有一些像这样的全局变量......

```
int yPosition = 0;
boolean goingDown = true; 
```

当您需要启动动画时，请启动一个`Timer`一遍又一遍地调用以下内容...

```
if (goingDown == true){
    // if we've gone down 50 pixels, start going up again
    if (yPosition <= 0){
        goingDown = false;
        yPosition++;
    }
    else {
        yPosition--; // move it down 1 pixel
    }
}
else {
    // if we're going up and we reach 0, go down again
    if (yPosition >= 50){
        goingDown = true;
        yPosition--;
    }
    else {
        yPosition++; // move it up1 pixel
    }
}

component.repaint(); // this will call the paint() method 
```

不是你的绘画方法只需要在不同的位置绘制你的图像。只需更改`g.drawImage(probe,probeX,474,50,50,this);`like 以包括 yPosition ...

```
g.drawImage(probe,probeX,474+yPosition,50,50,this); 
```

这至少应该为您指明正确的方向。

# javascript - Jquery css 显示 div 链接不起作用？

> ID：10686636
> 
> 赞同：-1
> 
> 时间：2012-05-21T13:55:48.550
> 
> 标签：javascript, jquery, html, show-hide

> **可能重复：**
> [Jquery css show div？](https://stackoverflow.com/questions/10684482/jquery-css-show-div)

好的，这是我的问题，似乎没有人能回答。我有两个正在使用的javascript。一次是我的弹出窗口，并告诉它在关闭时保持关闭 24 小时。另一种是在页面上的某个位置放置一个链接以显示此弹出窗口，直到刷新并保持隐藏直到 cookie 过期。现在 div 弹出窗口设置为`display:none`. cookie 告诉它在按下关闭按钮之前一直显示。无论我似乎在我的 javascript 中重新设计以暂时显示来自链接的弹出窗口，它都不会显示。一些 cookie javascript 将如何修改，因此必须`display:none`在弹出 div 上删除 css:。我不知道该怎么做。

这是当前代码：

*   [http://jsfiddle.net/Dv7DR/-](http://jsfiddle.net/Dv7DR/-)
*   [http://pastebin.com/fHvv5spn](http://pastebin.com/fHvv5spn)

* * *

```
<script type="text/javascript"> 
$("#linkshow").click(function {
$("#window").show()
});        
</script>

<a href="#" id="linkshow">Submit a comment</a>
<div id="window">
...
<div>
<script type="text/javascript">
...cookie popup hide for 24hr on close
</script> 
```

注意：我已经尝试过：

```
$(document).ready(function() {
   $("#linkshow").click(function(e) {
      e.preventDefault();
      $("#window").show();
   });
}); 
```

和...

```
$(document).ready(function() {
     $("#window").hide();

   $("#linkshow").live('click', function(e) {
      e.preventDefault();
      $("#window").show();
   });
}); ​ 
```

和...

```
$(function() {
        $("#linkshow").click(function() {
            $("#window").show()
        });        
    }); 
```

和...

```
<div id="window" style="display:none;"> 
```

至

```
<div id="window"> 
```

* * *

然后其他 24 小时 cookie javascript 不会隐藏弹出窗口。我假设我需要取出`id="window" style="display:none;`代码底部的 javascript cookie 和一些高级的 javascript cookie，因此当被要求隐藏 24 小时时它将隐藏，并在需要在当前页面上显示时显示，直到刷新但我处于空白关于做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:00:19.827

您应该首先加载 jquery 库：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:59:28.440

```
$(document).ready(function() {
     $("#window").hide();

   $("#linkshow").live('click', function(e) {
      e.preventDefault();
      $("#window").show();
   });
}); ​ 
```

对于现场演示，请参阅此链接：http: [//jsfiddle.net/nanoquantumtech/wTmCL/](http://jsfiddle.net/nanoquantumtech/wTmCL/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T14:03:25.427

如果你想做弹出窗口，你可以查看 jquery 对话框。上面的代码只会显示 div 而不会弹出它。

Jquery 对话框将弹出并确保您引用 jquery ui。[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T14:07:13.840

您的 html 也不正确，而且在页面加载时使用 css 隐藏元素比使用 jquery 隐藏要好

利用

```
<div id="window" style="display:none;">
...
</div> 
```

代替

```
<div id="window">
...
<div> 
```

# php - Symfony 中的 sfForm 和 baseForm 有什么区别？

> ID：10686637
> 
> 赞同：0
> 
> 时间：2012-05-21T13:55:52.230
> 
> 标签：php, symfony-1.4, symfony-forms

我想制作一个自定义表单，但我不知道要扩展哪个类：`sfForm`或者`BaseForm`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:06:13.897

好问题，我通常会扩展`sfForm`我所有的新表格，但我应该使用`BaseForm`，关于[文档](http://www.symfony-project.org/tutorial/1_4/en/whats-new#chapter_a2fae23c9403b0e9ec99806fccf6b53e_sub_baseform)：

> 每个新的 symfony 1.3/1.4 项目都包含一个`BaseForm`类，您可以使用它来扩展 Form 组件或添加项目特定的功能。
> 
> 由此类生成`sfDoctrinePlugin`并 `sfPropelPlugin`自动扩展的表单。
> 
> 如果您创建额外的表单类，它们现在应该扩展`BaseForm`而不是 `sfForm`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:00:34.420

基本表单是您放置项目特定表单相关代码的位置。使用它会导致它从 sfForm 扩展（通过其他一些类）（据我所知）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T15:13:08.523

看 ...

```
BaseFormDoctrine ---extends---> BaseForm  ---extends---> sfForm 
```

因此，在您的情况下，您想创建自定义表单并使用 Doctrine 工具（例如：save()、...等），您应该扩展

> 基本形式主义

并添加

> 父：：设置（）；到您的代码以启用 Doctrine 设施。

# gcc - -msse，-msse2，-mssse3，-msse4 rtc..的cflgs sse选项有什么区别？以及如何确定？

> ID：10686638
> 
> 赞同：21
> 
> 时间：2012-05-21T13:56:03.037
> 
> 标签：gcc, g++, gnu, sse, compiler-flags

对于 GCC`CFLAGS`选项：`-msse`, `-msse2`, `-mssse3`, `-msse4`, `-msse4.1`, `-msse4.2`. 它们是独占使用还是可以一起使用？

我的理解是，选择设置哪个取决于程序将在其上运行的目标拱门是否支持它 - 这是正确的吗？

如果是这样，我怎么知道我的目标拱支持什么 sse？在 Linux 中，我 cat /proc/cpuinfo，但如果是 Mac 或 Windows 怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-21T14:42:20.837

The `-m` switched can be used in parallel, furthermore some of them are implied by the architecture or other switches. For instance, if you build code for x86_64, `-msse -msse2` is always enabled.

For code intended to run on your system you should choose `-march=native`, which will select what is available on your processor. For instance, if you have a Sandy Bridge, this will enable `-msse -msse2 -msse3 -mssse3 -msse4 -msse4.1 -msse4.2 -mavx`.

If you want to specify in detail which instruction set to use, you should only use what is available, not always the "latest". The "latest" one is currently `-mavx2`, which I don't recommend: The first processor which will support it will be available in 2013.

# c++ - 带有自定义分配器和删除器的 C++ tr1 shared_ptr

> ID：10686639
> 
> 赞同：0
> 
> 时间：2012-05-21T13:56:04.423
> 
> 标签：c++, memory-management, constructor, shared-ptr

我正在使用 tr1 shared_ptr（工作尚未更新到 C++0x 或 C++11），我需要将 std::tr1::shared_ptr 与具有自定义分配器和删除器的类 Foo 一起使用。

目前 Foo 由以下代码分配/释放：

```
void createFoo(Foo** mem) {
 *mem = (Foo *) malloc(sizeof(Foo));
  memset(*mem, 0, sizeof(Foo));
} 
```

和

```
void deleteFoo(Foo* mem) {
  // code to call recursive methods to delete Foo substructures
  memset(...)
} 
```

如何声明`std::tr1::shared_ptr<Foo>`使用 createFoo 和 deleteFoo ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T14:12:48.753

如果你不能改变`createFoo`（这将是更可取的），那么你会想要包装`createFoo`隐藏双指针：

```
#include <memory>

struct Foo {};

void createFoo(Foo **p) { *p = new Foo; }
void deleteFoo(Foo *p) { delete p; }

std::shared_ptr<Foo> wrapCreateFoo() {
  Foo *p = NULL;
  createFoo(&p);
  return std::shared_ptr<Foo>(p, deleteFoo);
}

int main() {
  std::shared_ptr<Foo> f = wrapCreateFoo();
} 
```

我在一个地方完成了所有操作，因为`wrapCreateFoo`返回 a`shared_ptr`使得忘记设置正确的删除函数变得更加困难。

在我的示例中，我使用了 C++11 标头/命名空间`shared_ptr`，但对于 TR1/Boost 案例，它是相同的。

# c++ - 将 win32_logicaldisk 映射到 win32_diskdrive？

> ID：10686643
> 
> 赞同：2
> 
> 时间：2012-05-21T13:56:08.173
> 
> 标签：c++, winapi, wmi, command-line-interface, flash-cs5

我正在构建一个 Adob​​e Air 应用程序，我只能在其中获取我插入的特定 USB 拇指驱动器的“驱动器号”。

`wmic logicaldisk where 'DeviceId="D:"'`如果驱动器号为`D:`

但我真正想要的是为前面提到的驱动器获取 Win32_DiskDrive 类的 PNPDeviceID。

据我所知，将 win32_logicaldisk 和 win32_diskdrive 与介于两者之间的某个类联系起来可以解决问题，但我想不出办法。

因此，我恳请您在此线程上提出您的专业知识以解决此问题。

干杯

SJ

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T14:54:44.077

我相信您需要两个不同的 WMI 类来派生它。首先，[`Win32_LogicalDiskToPartition`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394175.aspx)（显然）将逻辑磁盘映射到一个分区。然后您可以使用它[`Win32_DiskDriveToDiskPartition`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394134.aspx)来查找保存该分区的物理驱动器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T14:02:15.053

从这里找到答案[http://forum.exetools.com/showthread.php?t=11226](http://forum.exetools.com/showthread.php?t=11226)

WMIC PATH WIN32_DISKPARTITION ASSOC <--此命令以一种奇怪但易于管理的方式将 win32_logicaldisk 与 win32_diskdrive 链接。

谢谢你们的帮助！

# android - 在 android 的 AchartEngine 中查询

> ID：10686649
> 
> 赞同：1
> 
> 时间：2012-05-21T13:56:35.817
> 
> 标签：android, graph, achartengine

我正在开发一个 android 应用程序，使用 AChartEngine 在我的应用程序中实现图形。现在我想将工作日名称显示为 x 轴的标签。完全感谢我能够做到，但默认标签（2、4、6、8、....）仍在显示。我已经用谷歌搜索了它，但无法找到解决方案。我已经在下面上传了关注的图片。![在 X 轴上显示两组标签的 AChartEngine 图形](../Images/2b8ad8d174a6310d3c2e5d453e78c109.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:16:05.963

将 X 标签大小设置为 1

```
 renderer.setXLabels(1); 
```

# ruby - 检查新推文的最佳方法

> ID：10686651
> 
> 赞同：0
> 
> 时间：2012-05-21T13:56:43.423
> 
> 标签：ruby, twitter

这是来自我的 irc 机器人的一段代码。它的作用是检查特定帐户的新推文，然后在频道中回复。现在，有没有更好的方法来检查新推文？对于 1..999999999 中的我来说，感觉有点不理想，而且 ddos​​'y。

```
tweetzsr = {}
xzsr = {}
zsr = {}

on :message, ".start zsr" do |m|
  if zsr[m.channel] == true
    m.reply "already doing it.."
  else
    m.reply "ok."
    zsr[m.channel] = true
    for i in 1..99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
      sleep 60
      puts "#{xzsr[m.channel]} = x, tweetzsr = #{tweetzsr[m.channel]}"
      tweetzsr[m.channel] = Twitter.user_timeline("twiitterracount").first.text
      if xzsr[m.channel] == tweetzsr[m.channel]
        nil
      else
        m.reply "#{tweetzsr[m.channel]} - via twitter feed"
        xzsr[m.channel] = tweetzsr[m.channel]
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:07:50.970

首先，对于无限循环，请使用该`loop`方法。

最适合这种事情的是使用[Twitter 的流媒体 API](https://dev.twitter.com/docs/streaming-apis/streams/user)。这个 api 将向 Twitter 发送一个请求，然后 Twitter 会将任何新数据推送到您的客户端。为此，有一个名为[TweetStream](https://github.com/intridea/tweetstream)的宝石。

示例用法：

```
TweetStream::Client.new.userstream do |status|
  m.reply "#{status.text} - via twitter"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:07:49.050

那是你的无限循环吗？

将其更改为此以提高理智

```
loop do
  sleep 60
  newtweet[m.channel] = Twitter.user_timeline("twitteracount").first.text
  next if oldtweet[m.channel] == newtweet[m.channel]
  m.reply "#{newtweet[m.channel]} - via twitter"
  oldtweet[m.channel] = newtweet[m.channel]
end 
```

您缺少这两个`end`关键字。

# hibernate - jpa 一对多关系无法给出例外

> ID：10686652
> 
> 赞同：1
> 
> 时间：2012-05-21T13:56:49.207
> 
> 标签：hibernate, jpa-2.0, hibernate3

我正在尝试创建填充 Admin 和 AdminHealthPlan 表。

两者之间的关系是一对多的（一个管理员可以拥有多个健康计划）。

该类`Admin`定义如下：

```
@Entity
@Table(name = "admin")
@NamedQueries(value = {
        @NamedQuery(name = "admin.getAdminById", query = "SELECT a "
            + "from  Admin a WHERE a.id=:id and deleted = 0"),
        @NamedQuery(name = "admin.getAdminByEmail", query = "SELECT a "
            + "from Admin a where a.email = :email and deleted = 0") })
public class Admin extends Persistent {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    @Column(name = "password")
    private String password;
    @Column(name = "email")
    private String email;
    @Column(name = "first_name")
    private String firstName;
    @Column(name = "last_name")
    private String lastName;
    @Column(name = "phone")
    private String phone;
    @OneToOne(mappedBy = "admin", fetch = FetchType.EAGER,
            cascade = CascadeType.ALL)
    private AdminRole role;
    @OneToOne(mappedBy = "admin", fetch = FetchType.EAGER,
            cascade = CascadeType.ALL)
    private AdminPasswordToken passwordToken;
    @OneToMany(mappedBy = "admin", fetch = FetchType.EAGER,
            cascade = CascadeType.ALL)
    private Set<AdminHealthPlan> healthPlans;
    @Column(name = "deleted")
    private Boolean deleted = false;
    @Column(name = "security_question")
    private Integer securityQuestion;
    @Column(name = "security_answer")
    private String securityAnswer;

    public Admin() {}

    // Getters/setters
} 
```

`AdminHealthPlan` 类定义如下。

```
@Entity
@Table(name = "admin_health_plan")
public class AdminHealthPlan implements Serializable {

    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    @Column(name = "health_plan")
    private String healthPlan;
    @ManyToOne(cascade = CascadeType.ALL)
    @JoinColumn(name = "admin_id", nullable = false)
    private Admin admin;
    @Column(name = "deleted")
    private Boolean deleted = false;

    public AdminHealthPlan() {}

    public AdminHealthPlan(String healthPlan) {
        this.healthPlan = healthPlan;
    }

    // Getters/setters
} 
```

我通过从请求中检索值并将其设置为管理对象来创建管理对象，类似地用于创建管理健康计划集对象并将其设置在管理对象中，最后将对象发送到数据库。

它给出了如下例外

```
May 21, 2012 6:49:16 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet appServlet threw exception
com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Column 'admin_id' cannot be null
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
    at com.mysql.jdbc.Util.getInstance(Util.java:381)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1015)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3558)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3490)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1959)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2109)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2648)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2077)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2362)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2280)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2265)
    at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
    at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy70.executeUpdate(Unknown Source) 
```

ws

创建 Admin 和 AdminHealthPlan 对象：

```
private Admin createAdminDummyObject() {
        Admin admin = new Admin();
        admin.setFirstName("Zuned");
        admin.setLastName("Ahmed");
        admin.setEmail("zuned@hcentive.com");
        admin.setPhone("123-1234454");
        admin.setHealthPlans(getHealthPlans(admin));
        return admin;
    }

    private Set<AdminHealthPlan> getHealthPlans(Admin admin) {
         Set<AdminHealthPlan> adminAHP = new HashSet<AdminHealthPlan>();
         AdminHealthPlan ahp = new AdminHealthPlan();
         ahp.setAdmin(admin);
         ahp.setHealthPlan("Plan1");
         adminAHP.add(ahp);
        return adminAHP;
    } 
```

我用了

```
getJpaTemplate().persist(t); 
```

坚持在分贝。

任何人都可以告诉我我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:10:15.277

我使用EclipseLink，所以我不确定它在hibernate中是否有所不同，但这是我看到的错误：

1-您没有将 @Column 注释添加到 Admin 实体的 id 属性。
2 - 我总是使用 GenerationType.IDENTITY 进行 pks。3 - 在表 AdminHealthPlan 中，admin 属性具有 JoinColumn 注释，但您没有包含 referencedColumnName 属性。它应该如下所示：`@JoinColumn(name = "admin_id", referencedColumnName = "admin_id")`
4- 为向 Admin 实体添加新的 AdminHealthPlan，我建议您执行以下操作：在 Admin 类中创建一个名为“addAdminHealthPlan”的方法：

```
public void addAdminHealthPlan(AdminHealthPlan ahp) {
    if(healthPlans == null) {
          healthPlans = new HashSet<AdminHealthPlan>();
    }
    ahp.setAdmin(this);
    healthPlans.add(ahp);
} 
```

我不知道 getJpaTemplate() 方法是什么以及对象“t”是什么，但这将是保持管理员的逻辑：

```
Admin admin = createAdminDummyObject();
AdminHealthPlan ahp = new AdminHealthPlan();
ahp.setAdmin(admin);
ahp.setHealthPlan("Plan1");
admin.addAdminHealthPlan(ahp);
entityManager.persist(admin); 
```

# android - 来自链接文件夹的 Android 资产

> ID：10686653
> 
> 赞同：8
> 
> 时间：2012-05-21T13:56:50.053
> 
> 标签：android, symlink

我想将一个外部目录导入 Assets 文件夹，其中有一些我需要在同一应用程序的不同平台分布之间共享的文件，基本上是 Html 文件。

我尝试使用绝对或相对引用从**New-> Folder-> Advanced将****Linked 文件夹**添加到 android 项目。但是之后

 **```
getAssets().open("folder") 
```

失败，出现 FileNotFound 异常。

我也尝试过资产文件夹中的命令行：

```
ln -s ../../source_folder dest_folder 
```

这会在文件系统中创建一个新的“别名”文件夹，但 Eclipse 不会将该文件夹作为链接资源，而是作为普通的“文件夹”。我会选择这个解决方案，但由于我们是由几个开发人员组成的团队共享同一个项目，我相信别名不会在所有系统上工作，导致一些文件将保存到新的“别名”文件夹中，其他文件原始文件夹。

总结：有没有人遇到过同样的问题？对于团队来说，有没有办法将外部文件夹引用为 Android 资产？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-11T07:27:07.220

如果您使用的是 android studio，您可以将您的文件夹添加到 assets 文件夹，如下所示：

```
sourceSets {
    main {
        assets.srcDirs += 'your/folder'
    }
} 
```

详情见这里：

*   Android Studio： [https ://developer.android.com/studio/build/gradle-tips.html#change-default-source-set-configurations](https://developer.android.com/studio/build/gradle-tips.html#change-default-source-set-configurations)

*   摇篮：http: [//google.github.io/android-gradle-dsl/current/com.android.build.gradle.api.AndroidSourceSet.html](http://google.github.io/android-gradle-dsl/current/com.android.build.gradle.api.AndroidSourceSet.html)**

# python - 从文本文件中读取缺失值的数据

> ID：10686657
> 
> 赞同：15
> 
> 时间：2012-05-21T13:57:16.077
> 
> 标签：python, numpy, python-2.7

我想从具有许多缺失值的文件中读取数据，如下例所示：

```
1,2,3,4,5
6,,,7,8
,,9,10,11 
```

我正在使用 numpy.loadtxt 函数：

```
data = numpy.loadtxt('test.data', delimiter=',') 
```

问题是缺失值破坏了 loadtxt （我得到一个*"ValueError: could not convert string to float:"*，毫无疑问是因为两个或多个连续的分隔符）。

有没有办法使用 loadtxt 或其他函数自动执行此操作，还是我必须硬着头皮手动解析每一行？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-21T14:04:41.173

我可能会使用[genfromtxt](http://docs.scipy.org/doc/numpy/user/basics.io.genfromtxt.html#importing-data-with-genfromtxt)：

```
>>> from numpy import genfromtxt
>>> genfromtxt("missing1.dat", delimiter=",")
array([[  1.,   2.,   3.,   4.,   5.],
       [  6.,  nan,  nan,   7.,   8.],
       [ nan,  nan,   9.,  10.,  11.]]) 
```

然后对 nans 做任何事情（将它们更改为某些东西，改用掩码等）。其中一些可以内联完成：

```
>>> genfromtxt("missing1.dat", delimiter=",", filling_values=99)
array([[  1.,   2.,   3.,   4.,   5.],
       [  6.,  99.,  99.,   7.,   8.],
       [ 99.,  99.,   9.,  10.,  11.]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-19T14:46:47.977

这是因为该函数期望返回一个包含所有相同类型单元格的*numpy 数组。*

如果您想要一个包含混合字符串和数字的表格，您应该将其读入结构化数组，您可能还想添加`skip_header=1`以跳过第一行，即在您的情况下类似于：

```
np.genfromtxt('upeak_names.txt', delimiter="\t", dtype="S10,S10,f4,S10,f4,S10,f4", 
names=["id", "name", "Distance", "name2", "Distance2", "name3", "Distance3], skip_header=1) 
```

也可以看看：

*   genfromtxt 文档： [https ://docs.scipy.org/doc/numpy-1.15.1/reference/generated/numpy.genfromtxt.html](https://docs.scipy.org/doc/numpy-1.15.1/reference/generated/numpy.genfromtxt.html)

*   numpy 中结构化数组的文档：
    [https ://docs.scipy.org/doc/numpy-1.15.0/user/basics.rec.html](https://docs.scipy.org/doc/numpy-1.15.0/user/basics.rec.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-06-12T13:06:39.850

请注意，根据我的测试，没有检测到字符单元，只检测到数值，所以如果你有一个包含字符串和数字的表格，应该有其他方法。

我的例子：

```
upeak_names.txt:
id  name    Distance    name2   Distance2   name3   Distance3
upeak-3 NOC2L   -161    KLHL17  -1135   NOC2L   -162

>>>table= genfromtxt('upeak_names.txt', delimiter="\t")
>>>comb_table[2,]
>>>array([   nan,    nan,  -161.,    nan, -1135.,    nan,  -162.]) 
```

# javascript - 向下滚动时如何更改背景颜色

> ID：10686661
> 
> 赞同：0
> 
> 时间：2012-05-21T13:57:28.657
> 
> 标签：javascript, background

当用户向下滚动时，我有更改背景颜色的代码，但我需要页面平滑地更改背景两次（例如灰色@第 1 段，黄色@第 2 段和红色@第 3 段）。有谁知道如何做到这一点？

我的代码：

```
$(document).ready(function(){
    $(document).scroll(function() {
        var alpha = Math.min(0.5 + 0.4 * $(this).scrollTop() / 3000, 0.9);
        var channel = Math.round(alpha * 255);
        $("body").css('background-color', 'rgb(' + channel + ',' + channel + ',' + channel + ')');
    });
}); 
```

结果：

[www.web-app.be/op](http://www.web-app.be/op/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:09:07.343

你能从这个开始吗？

[如何让垂直渐变背景在所有浏览器中工作？](https://stackoverflow.com/questions/4222611/how-to-get-a-vertical-gradient-background-to-work-in-all-browsers)

```
<!DOCTYPE html>
<html>

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Scroll changes bg</title>
<style>
#gradient1 {
    background: #FFFFFF; /* old browsers */
    background: -moz-linear-gradient(top, #F00 0%, #CCCCCC 100%); /* firefox */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#FFFFFF), color-stop(100%,#CCCCCC)); /* webkit */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#FFFFFF', endColorstr='#CCCCCC',GradientType=0 ); /* ie */
}
#gradient2 {
    background: #FFFFFF; /* old browsers */
    background: -moz-linear-gradient(top, #FF0 0%, #CCCCCC 100%); /* firefox */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#FFFFFF), color-stop(100%,#CCCCCC)); /* webkit */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#FFFFFF', endColorstr='#CCCCCC',GradientType=0 ); /* ie */
}

</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $(document).scroll(function() {
        var alpha = Math.min(0.5 + 0.4 * $(this).scrollTop() / 3000, 0.9);
        var channel = Math.round(alpha * 255);
        $("body").css('background-color', 'rgb(' + channel + ',' + channel + ',' + channel + ')');
    });
});

</script>
</head>

<body>

<div id="gradient1<li></li>">
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
</div>
<div id="gradient2">
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
</div>

</body>

</html> 
```

# inno-setup - InnoSetup：不要卸载更改的文件

> ID：10686665
> 
> 赞同：9
> 
> 时间：2012-05-21T13:57:48.970
> 
> 标签：inno-setup

如何告诉 InnoSetup 不卸载已被用户更改的（文本）文件（== 与 InnoSetup 安装的文件不同）？

或者可能更困难：在现有版本上安装新版本时，InnoSetup 应该询问用户是否覆盖更改的文件，但在纯卸载时，它应该在不询问的情况下将其卸载。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T08:02:59.947

我最近遇到了类似的问题。这是我检测文本文件（配置文件）是否已从上次安装运行期间安装的文件更改的解决方案：

使用 ISPP（Inno Setup Pre-Processor）在编译时创建文本文件列表及其哈希：

```
[Files]
; ...
#define FindHandle
#define FindResult
#define Mask "Profiles\*.ini"
#sub ProcessFoundFile
   #define FileName "Profiles\" + FindGetFileName(FindHandle)
   #define FileMd5 GetMd5OfFile(FileName)
   Source: {#FileName}; DestDir: {app}\Profiles; Components: profiles; \
      Check: ProfileCheck('{#FileMd5}'); AfterInstall: ProfileAfterInstall('{#FileMd5}');
#endsub
#for {FindHandle = FindResult = FindFirst(Mask, 0); FindResult; FindResult = FindNext(FindHandle)} ProcessFoundFile 
```

在“代码”部分的顶部，我定义了一些有用的东西：

```
[Code]
var
   PreviousDataCache : tStringList;

function InitializeSetup() : boolean;
begin
   // Initialize global variable
   PreviousDataCache := tStringList.Create();
   result := TRUE;
end;

function BoolToStr( Value : boolean ) : string;
begin
   if ( not Value ) then
      result := 'false'
   else
      result := 'true';
end; 
```

在“检查”事件处理程序中，我比较了以前安装和当前文件的哈希值：

```
function ProfileCheck( FileMd5 : string ) : boolean;
var
   TargetFileName, TargetFileMd5, PreviousFileMd5 : string;
   r : integer;
begin
   result := FALSE;
   TargetFileName := ExpandConstant(CurrentFileName());
   Log('Running check procedure for file: ' + TargetFileName);

   if not FileExists(TargetFileName) then
   begin
      Log('Check result: Target file does not exist yet.');
      result := TRUE;
      exit;
   end;

   try
      TargetFileMd5 := GetMd5OfFile(TargetFileName);
   except
      TargetFileMd5 := '(error)';
   end;
   if ( CompareText(TargetFileMd5, FileMd5) = 0 ) then
   begin
      Log('Check result: Target matches file from setup.');
      result := TRUE;
      exit;
   end;

   PreviousFileMd5 := GetPreviousData(ExtractFileName(TargetFileName), '');
   if ( PreviousFileMd5 = '' ) then
   begin
      r := MsgBox(TargetFileName + #10#10 + 
         'The existing file is different from the one Setup is trying to install. ' + 
         'It is recommended that you keep the existing file.' + #10#10 +
         'Do you want to keep the existing file?', mbConfirmation, MB_YESNO);
      result := (r = idNo);
      Log('Check result: ' + BoolToStr(result));
   end
   else if ( CompareText(PreviousFileMd5, TargetFileMd5) <> 0 ) then
   begin
      r := MsgBox(TargetFileName + #10#10 + 
         'The existing file has been modified since the last run of Setup. ' +
         'It is recommended that you keep the existing file.' + #10#10 +
         'Do you want to keep the existing file?', mbConfirmation, MB_YESNO);
      result := (r = idNo);
      Log('Check result: ' + BoolToStr(result));
   end
   else
   begin
      Log('Check result: Existing target has no local modifications.');
      result := TRUE;
   end;
end; 
```

在“AfterInstall”事件处理程序中，我将文件哈希标记为稍后存储在注册表中。因为在我的测试中，即使文件移动失败（目标文件是只读的）也会触发事件，所以我再次比较哈希以确定文件移动是否成功：

```
procedure ProfileAfterInstall( FileMd5 : string );
var
   TargetFileName, TargetFileMd5 : string;
begin
   TargetFileName := ExpandConstant(CurrentFileName());
   try
      TargetFileMd5 := GetMd5OfFile(TargetFileName);
   except
      TargetFileMd5 := '(error)';
   end;
   if ( CompareText(TargetFileMd5, FileMd5) = 0 ) then
   begin
      Log('Storing hash of installed file: ' + TargetFileName);
      PreviousDataCache.Add(ExtractFileName(TargetFileName) + '=' + FileMd5);
   end;
end;

procedure RegisterPreviousData( PreviousDataKey : integer );
var
   Name, Value : string;
   i, n : integer;
begin
   for i := 0 to PreviousDataCache.Count-1 do
   begin
      Value := PreviousDataCache.Strings[i];
      n := Pos('=', Value);
      if ( n > 0 ) then
      begin
         Name := Copy(Value, 1, n-1);
         Value := Copy(Value, n+1, MaxInt);
         SetPreviousData(PreviousDataKey, Name, Value);
      end;
   end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T15:04:27.390

Inno 本身无法执行此检查。

要在安装期间不替换更改的文件，您需要使用 custom`[Code]`进行校验和并与预先计算或从先前安装保存的已知良好值进行比较。

为避免在卸载期间删除它们，您需要禁用 Inno 自己对该文件的卸载，并在删除它们之前检查相同的校验和，再次在`[Code]`.

请注意，最好将用户可以编辑的任何文件保留在设置之外，以便更好地处理这种情况并正确遵守应用程序指南。

# javascript - 输入和弹出列表上的默认按钮

> ID：10686667
> 
> 赞同：0
> 
> 时间：2012-05-21T13:57:57.137
> 
> 标签：javascript, jquery, jsp

我正在尝试实现一个带有多个按钮的表单。当我按下回车键时，我希望提交我的默认按钮。来自[http://greatwebguy.com/programming/dom/default-html-button-submit-on-enter-with-jquery/](http://greatwebguy.com/programming/dom/default-html-button-submit-on-enter-with-jquery/)的代码通常有效：

```
$(function() {
$("form input").keypress(function (e) {
    if ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)) {
        $('button[type=submit].default').click();
        return false;
    } else {
        return true;
    }
}); 
```

});

但是...当我在输入字段中输入时，我有一个自动完成弹出窗口，所以当我在此弹出窗口中按 Enter 时，我希望将此值放入输入字段，而不是提交所有表单。我可以以某种方式检查此输入是否来自弹出窗口吗？或者我应该尝试以不同的方式做这件事？

编辑：我想我没有说清楚。此弹出窗口不是 jquery 的任何部分。它是标准弹出窗口，可将先前键入的数据显示到输入中。所以它没有任何类或id。停止传播也不起作用。以下解决方案均不能解决此问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:03:05.247

您可以使用`:visible`查看自动完成的下拉菜单`div`是否打开，然后阻止代码完成的输入键操作。像这样的东西：

```
$("form input").keypress(function(e) {
    var key = e.which || e.keyCode;
    if (key == 13 && !$(".autocomplete").is(":visible")) {
        e.preventDefault();
        $('form').submit();
    }
}); 
```

您也可以`event.stopPropagation()`在自动完成功能中使用回车键，但是您可能必须手动修改源代码，这并不理想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:03:32.267

前`return false;`

写

`e.preventDefault();`

或/和

`e.stopPropagation();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T14:08:54.787

```
 $("form input").keypress(function (e) {
                if (e.target.id !== "autoCompliteId" && ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13))) {
                    $('button[type=submit].default').click();

                    return false;
                } else {
                    return true;
                }
            }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T13:34:37.660

我修改了我的代码，它现在可以工作了。我的命令中有一个名为 Operation 的枚举，我在每个提交按钮之前设置了不同的字段值，例如：

```
<input type="submit" value="do sth" onclick="setOperationAndSubmit('DO_STH')"/>
<input type="submit" value="next" onclick="setOperationAndSubmit('DEFAULT')"/>

function setOperationAndSubmit(operation) {
    if (document.myForm.elements['operation'].value === '') {
        document.myForm.elements['operation'].value = operation;
    }
    document.myForm.submit();
} 
```

然后我有我的动作来监听按键并在每个回车键上设置适当的操作：

```
$(function() {
    $("form input").keypress(function(e) {
        if ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)) {
            document.myForm.elements['operation'].value = 'DEFAULT';
        }
    });
}); 
```

所以当我按回车时执行默认操作

# javascript - 当 ember 完成 DOM 更新时做一些事情

> ID：10686670
> 
> 赞同：6
> 
> 时间：2012-05-21T13:58:06.123
> 
> 标签：javascript, ember.js

我想在 ember 绑定同步并且 DOM 再次更新时做一些事情。

我已经尝试使用操作绑定模型的函数的回调，执行回调时 DOM 不会更新。

我已经尝试直接在模型上使用观察者，执行观察者时不会更新 DOM。

我已经尝试在绑定上使用观察者，执行观察者时不会更新 DOM。

例如

```
App.view = Ember.View.extend({
    modelBinding: 'App.model',
    modelChanged : function() {
        window.scrollTo(0, document.body.scrollHeight);
    }.observes('model'),

    getMore: function(event) {
        App.set('model', "somethingnew");
    }
}); 
```

当我触发“gotMore”时，我会更新模型，当模型更新并呈现其更改时，我想向下滚动。

在我尝试过的任何一种方式中，我都无法获得新的scrollHeight。在这些事件之后几毫秒设置它。

这是关于 jsFiddle 的示例：http: [//jsfiddle.net/kcjzw/15/](http://jsfiddle.net/kcjzw/15/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-17T15:23:42.300

此处记录了执行此操作的正确方法：

[http://emberjs.com/api/classes/Ember.run.html#method_next](http://emberjs.com/api/classes/Ember.run.html#method_next)

```
modelChanged : function() {
  Ember.run.scheduleOnce('afterRender', this, function() {
    window.scrollTo(0, document.body.scrollHeight);
    $('body').append('New scroll height: '+document.body.scrollHeight);
  });
}.observes('content') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T15:15:41.317

采用`Ember.run.next`

[https://github.com/emberjs/ember.js/blob/master/packages/ember-metal/lib/run_loop.js#L531-566](https://github.com/emberjs/ember.js/blob/master/packages/ember-metal/lib/run_loop.js#L531-566)

```
App.view = Ember.View.extend({
    modelBinding: 'App.model',
    modelChanged : function() {
        Ember.run.next(myContext, function(){
            // code to be executed in the next RunLoop, which will be scheduled after the current one
            window.scrollTo(0, document.body.scrollHeight);
        });
    }.observes('model'),

    getMore: function(event) {
        App.set('model', "somethingnew");
    }
}); 
```

**更新**

看看这个：http: [//jsfiddle.net/ud3323/hZ7Vx/](http://jsfiddle.net/ud3323/hZ7Vx/)

您需要的是在渲染助手将创建`Ember.CollectionView`的runloop 之后运行您的代码。`{{each}}`

*JavaScript*：

```
App = Ember.Application.create();

App.model = Ember.Object.create({
    items: [1]
});

App.view = Ember.Handlebars.EachView.extend({
    contentBinding: 'App.model.items',

    itemViewClass: Ember._MetamorphView.extend({
        templateName: 'the_template'
    }),

    modelChanged : function() {
        Ember.run.next(this, function(){
            window.scrollTo(0, document.body.scrollHeight);
            $('body').append('New scroll height: '+document.body.scrollHeight);
        });
    }.observes('content'),

    theAction: function(event) {
        App.controller.doStuffToModel();
    }
});

App.controller = Ember.Object.create({
    doStuffToModel : function() {
        App.model.set('items', [1,2,3,4,5]);
    }
}); 
```

*车把*：

```
<script type="text/x-handlebars" data-template-name="the_template">
    <div style="height:200px;"></div> 
</script>

<script type="text/x-handlebars">
    {{view App.view}}
</script>​ 
```

# java - 显示日期列中的数据 - 解析到日期

> ID：10686671
> 
> 赞同：0
> 
> 时间：2012-05-21T13:58:08.307
> 
> 标签：java, jsp, postgresql, date-format, simpledateformat

我试图在 postgres 中显示一个带有“日期”列的表格。我想这与迄今为止解析字符串有关。我尝试使用简单的日期格式，但没有成功。

我实际上之前发布了类似的问题并尝试了给出的建议，但我仍然没有成功。如果有人可以使用下面的代码给我一个示例，我将不胜感激。

我无法解析字符串并显示数据......下面是我的代码。

我的DAO

```
package source;

import java.sql.*;
import java.sql.SQLException;
import java.text.SimpleDateFormat;
import java.util.*;

public class parseDAO {

    private Database database;

    public parseDAO(Database database) {
        this.database = database;

    }

    public List<parseBean> results() throws SQLException {
        Connection connection = null;
        PreparedStatement statement = null;
        ResultSet resultSet = null;

        String querystring = "select * from dateparse";
        List<parseBean> result_array = new ArrayList<parseBean>();

        try {

            connection = database.getConnection();
            statement = connection.prepareStatement(querystring);

            resultSet = statement.executeQuery();

            while (resultSet.next()) {

                parseBean resultsarray = new parseBean();
                    resultsarray.setDate(resultSet.getDate("date"));
                    resultsarray.setName(resultSet.getString("name"));
                    resultsarray.setAddress(resultSet.getString("address"));

                result_array.add(resultsarray);
            }
        } finally {
            try { resultSet.close(); } catch (SQLException logOrIgnore) {}
            try { statement.close(); } catch (SQLException logOrIgnore) {}
            try { connection.close(); } catch (SQLException logOrIgnore) {}
        }

        return result_array;
    }
} 
```

我的Servlet

```
package source;

import java.io.IOException;
import java.sql.SQLException;
import java.util.*;
import javax.servlet.ServletException;
import javax.servlet.http.*;

public class parseServlet extends HttpServlet {

    private parseDAO parseDAO;

    @Override
    public void init() throws ServletException {
        String driver = "org.postgresql.Driver";
        String url = "jdbc:postgresql://localhost/myDB";
        String username = "postgres";
        String password = "secret";

        Database database = new Database(driver, url, username, password);
        this.parseDAO = new parseDAO(database);
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

            try {
            List<parseBean> result_array = parseDAO.results();

            request.setAttribute("result_array", result_array);
            request.getRequestDispatcher("results.jsp").forward(request, response);
        }
            catch (SQLException e) {
            throw new ServletException("Cannot retrieve areas", e);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:18:53.867

在你的`parseBean`课堂上，改变

```
private String date; 
```

到

```
private Date date; // Note: java.util.Date, NOT java.sql.Date! 
```

和改变

```
resultsarray.setDate(resultSet.getString("date")); 
```

到

```
resultsarray.setDate(resultSet.getDate("date")); 
```

在 JSP 中呈现这个时，使用具有指定[模式的](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)[JSTL](https://stackoverflow.com/tags/jstl/info) ：[`<fmt:formatDate>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fmt/formatDate.html)

```
<fmt:formatDate value="${parseBean.date}" pattern="yyyy-MM-dd" /> 
```

* * *

**与具体问题**无关，也可以处理您的**[Java 命名约定](http://www.oracle.com/technetwork/java/codeconventions-135099.html#367)。类名应以大写开头。重命名`parseBean`为`ParseBean`.**

# mysql - 使用 SP 内的内联查询重用代码

> ID：10686673
> 
> 赞同：0
> 
> 时间：2012-05-21T13:58:10.483
> 
> 标签：mysql, sql, stored-procedures, code-reuse

下面是抽象的。查询要复杂得多。原理完全一样。

我有一个存储过程：

```
SELECT * FROM T1
WHERE T1.fk IN (SELECT id FROM T2); 
```

实际上，这种内联查询非常复杂，并且正在许多其他存储过程中使用。我希望只在一个地方维护它的代码。现在，最坏的情况是这个内部查询返回大约 22K 条记录。

如何将此内部查询仅放在一个位置（作为函数，例如包含，宏等...）

在这种情况下，效率并不重要。可维护性更少的代码，是。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T13:59:22.340

一个[视图](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)？

```
CREATE VIEW MyQuery AS
 SELECT * FROM T1
 WHERE T1.fk IN (SELECT id FROM T2); 
```

# php - 未找到 XMPP 类

> ID：10686675
> 
> 赞同：-2
> 
> 时间：2012-05-21T13:58:24.477
> 
> 标签：php, xmpp, xmpphp

我想用php创建一个XMPP客户端，我试过这段代码

```
<?php
include("xmpphp/XMPPHP/xmpp.php");
$conn = new XMPP('192.168.1.62', 5222, 'client', 'pass', 'xmpphp', 'cnx-pc',           $printlog=False, $loglevel=LOGGING_INFO);
$conn->use_encryption = False;
$conn->connect();
$conn->processUntil('session_start');
$conn->message('cnx', 'hi');
$conn->disconnect();
?> 
```

但我有这个致命错误致命错误：在第 3 行的 D:\EasyPHP-5.3.3.1\www\xmpp1.php 中找不到类 'XMPP'

任何人都对这个问题有想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:25:14.370

类名是`XMPPHP`，不是`XMPP`。使用它，错误就会消失。

也替换`include`为，`require`因为您依赖该类存在。

# php - symfony 会话如何在后端工作？

> ID：10686678
> 
> 赞同：1
> 
> 时间：2012-05-21T13:58:50.873
> 
> 标签：php, session, symfony1, symfony-1.4, session-variables

我需要知道 symfony 会话在后端是如何工作的。

*   如何通过 symfony 类更改 sessionId？
*   如何更改 sessionId 以写入其他用户的会话，例如在不注销的情况下更改他/她的权限？

我知道用 PHP 做这件事的经典方法，但是，我问 symfony 是否可以处理这个问题？

**编辑：**

addCredentials，removeCredential，删除当前用户会话的权限，但我需要更改另一个用户会话...

例如用户 x,y

从用户 x 我可以使用 symfony 类更改用户 y 的会话变量吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T15:20:13.237

*   更改 sessionId 使用`sfSessionStorage::regenerate(true);`，这将重新生成会话 ID
*   要更改权限，这取决于您将使用的身份验证系统（也许您将使用[sfDoctrineGuardPlugin](http://www.symfony-project.org/plugins/sfDoctrineGuardPlugin)？）。Symfony 带有一个基本的[sfBasicSecurityUser 对象](http://www.symfony-project.org/api/1_4/sfBasicSecurityUser)，它提供了动态更改权限的能力：

.

```
 // add $credential1 and $credential2 to current user
  $this->getUser()->addCredentials($credential1, $credential2);

  // remove credential $credential to current user
  $this->getUser()->removeCredential($credential); 
```

# php - 将图像上传到文件夹并获取其路径名

> ID：10686681
> 
> 赞同：0
> 
> 时间：2012-05-21T13:59:14.500
> 
> 标签：php, mysql, forms, file-upload, insert

我有一个带有文件输入字段的表单：

```
<tr align="left">
    <td>Image :</td>
    <td align="left">
        <input type="file" name="ImageFile" size="18">
    </td>
</tr> 
```

然后我在提交时处理这个图像文件：

```
$image_tmpname = $_FILES['ImageFile']['name'];
$imgdir = "blogImages/";
$imgname = $imgdir.$image_tmpname;

$blogs = new Blogs();

move_uploaded_file($_FILES['ImageFile']['tmp_name'], $imgname);
    $insert = $blogs->insertBlog($heading, $article, $date, $imgname); 
```

我要保存图像的目录被调用`blogImages`，并且与上面的目录位于同一目录中。

您可能会注意到在上面我调用`insertBlog`的类`Blogs'. Insert blog takes all the info and inputs the data to a mysql table. The code for`insertBlog 中调用的函数是：

```
function insertBlog($heading, $article, $date, $imgname){
        $query = "INSERT INTO Blogs (BlogTitle, MainArticle, PostDate, Image) VALUES ('$heading', '$article', '$date', '$imgname')";        
        $oDatabase = new database;
        $connection = $oDatabase->Connect();
        if (!mysql_select_db($oDatabase->Name(), $connection))
            $oDatabase->ShowError("Blogs.insertBlog");

        if (!(@ mysql_query ($query, $connection)))
            $oDatabase->ShowError("Blogs.insertBlog");

        return (mysql_insert_id());
    } 
```

当用户填写表格时，它会将除图像信息之外的所有其他信息正确存储在 MySQL 表中。此外，它不会将实际图像存储在`blogImages`文件夹中。那么如何让这个脚本将图像上传到`blogImages`文件夹并将其路径存储在 mysql 表中。目前它没有将图像存储在数据库中，只将值`blogImages/`放在我的 MySQL 表中的图像路径字段中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:19:38.460

要传输文件，您必须`multipart/form-data` `enctype`在 HTML 中指定。

```
<form enctype="multipart/form-data" action="" method="POST"> 
```

# maven - 最佳实践 `mvn install`，多模块项目，运行一个子模块

> ID：10686682
> 
> 赞同：6
> 
> 时间：2012-05-21T13:59:19.493
> 
> 标签：maven

我倾向于避免`mvn install`在我的多模块项目中使用，因为我觉得我不知道在构建/启动其他子模块时（特别是经常在分支之间切换时）使用哪个确切版本的子模块。
我倾向于使用`mvn package`很多然后`mvn verify`.

我现在在[一个 FOSS 项目](https://github.com/tbroyer/gwt-maven-archetypes)（还有一个 Maven 原型）中遇到了这个问题，我想在其中使用 Maven 的*最佳实践*。
这是一个多模块项目，其中一个 webapp 子模块取决于其他模块，让我担心的是与（或）一起*开发的简易性。*`mvn jetty:run``jetty:start`

目前，我定义了 2 个配置文件：

1.  `prod`，默认的，声明对其他子模块的依赖；
2.  `dev`另一方面，**不**依赖于其他模块，并`jetty-maven-plugin`通过将其他模块的输出目录添加为`extraClasspath`和来配置`resourcesAsCSV`。
    这样，我可以`mvn package`一次又一次`cd webapp && mvn jetty:start -Pdev`地快速迭代，重新加载 web 应用程序，而无需停止服务器。

AFAICT`extraClasspath`是为此目的而添加的（[JETTY-1206](http://jira.codehaus.org/browse/JETTY-1206)）。
我被指出在`tomcat7-maven-plugin`使用 Maven 3 时可以从反应堆构建中解析模块（我提出了一个问题以将其带到 Jetty：[JETTY-1517](http://jira.codehaus.org/browse/JETTY-1517)），但这几乎不能解决我的问题

如果我没有从`dev`配置文件中删除对其他子模块的依赖，我必须先做一个`mvn install`，以便验证 POM 不会失败，即使`jetty:start`之后不使用这些依赖。

所以这是我的问题：`mvn install`真的那么普遍吗？或者我将反应堆内依赖项仅放在`prod`配置文件中的方法好吗？

（请注意，我有完全相同的问题`gwt-maven-plugin`，所以请不要告诉我简单地切换到 Tomcat；这实际上根本行不通，详情请[点击此处](https://github.com/tbroyer/gwt-maven-archetypes/pull/13#issuecomment-5809904)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:40:11.703

The mvn install is common in particular in relationship with multi-module builds, cause it will give you the chance to run a single module from your multi-module build.

This can be achieved by using:

```
mvn -pl submodule LifeCycle 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:56:33.670

我刚刚找到了一个解决方法（这似乎是事后的逻辑）：[https ://jira.codehaus.org/browse/JETTY-1517?focusedCommentId=306630&page=com.atlassian.jira.plugin.system.issuetabpanel:comment-tabpanel#评论 306630](https://jira.codehaus.org/browse/JETTY-1517?focusedCommentId=306630&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-306630)

简而言之：默认情况下跳过父模块中的插件，然后在需要时重新启用它。

但是，这仅在可以跳过插件（即具有`skip`配置）并且仅在一个特定子模块中使用时才有效，并且必须为您需要/想要以这种方式运行的每个插件有选择地完成（在我的情况下，`jetty:run`并且`gwt:run`） .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T02:39:41.410

我的大部分开发工作都是在笔记本电脑上完成的。对于我目前正在进行的项目，我的本地存储库实际上更像是一个临时存放区。我`mvn install`一直在跑步。将工件放入本地仓库是我所知道的在项目之间共享构建工件的唯一方法，特别是如果您正在处理相关但不是（也不应该是）同一多模块构建的一部分的项目。

当我完成开发后，我提交对共享 SCM 的更改，并让 Jenkins 构建并将代码部署到共享远程仓库。然后我要么删除本地存储库中更改的项目，以便下一次构建删除新构建的工件，要么我使用 -U 运行 Maven 来强制更新。

这对我很有效，YMMV。

# variables - 在 switch 语句 powershell 中测试 4 个不同的变量

> ID：10686684
> 
> 赞同：2
> 
> 时间：2012-05-21T13:59:24.150
> 
> 标签：variables, powershell, case

我有 4 个变量，$a = 1 $b = 0 $c = 0 $d = 1

我想根据分配了 1 的变量有 15 个不同的输出。a、b、c、d、ab、ac、ad、bc、bd、cd、abc、abd、acd、bcd 和 abcd

我如何编写这个案例以便输入每个案例？我能找到的唯一示例将 1 个参数传递到语句中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:32:47.247

您可以将它们连接为字符串：

```
switch ("$a" + "$b" + "$c" +"$d")
{
   "1000" { Write-Output "a!" }
   "0100" { Write-Output "b!" }
   "0110" { Write-Output "bc!" }
} 
```

# wcf-rest - WCF rest 自动添加的 URITemplate

> ID：10686693
> 
> 赞同：0
> 
> 时间：2012-05-21T13:59:50.803
> 
> 标签：wcf-rest

我有一个带有以下 URL 的 WCF REST 服务：http://localhost/GetAllOrders

但是 factorychannel 总是将 Uri 生成到 http:/localhost/Service.svc/GetAllOrders/GetAllOrders

这是我的客户工厂频道：

```
Uri address = new Uri("http:/localhost/Service.svc/GetAllOrders");
            var factory = new  System.ServiceModel.Web.WebChannelFactory<App.WebService.IOrderSvc>(address);
            var webHttpBinding = factory.Endpoint.Binding as System.ServiceModel.WebHttpBinding;
            App.WebService.IOrderSvc service = factory.CreateChannel();
            var orders = service.GetAll(); // this one throwing an error since the URI has become http:/localhost/Service.svc/GetAllOrders/GetAllOrders 
```

这是服务合同：

```
[WebGet(UriTemplate = "GetAllOrders")]
        [OperationContract]
        List<Order> GetAll(); 
```

知道为什么要添加两次 Uritemplate 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:54:59.763

Uri 是错误的 - 它应该是服务的 Uri。你应该写：

> uri地址 = new Uri("http:/localhost/Service.svc/");

# android - 在 HashMap Android 中获取值

> ID：10686694
> 
> 赞同：0
> 
> 时间：2012-05-21T13:59:55.530
> 
> 标签：android

我有两个活动... 活动 1：有一个 edittext 和两个按钮：button1 和 button2 活动 2：有一个 autocompletetextview 和一个 listview

我想当我输入字符串到edittext并单击button1时，我创建一个HashMap（静态）来保存值（set defaul =“hello word”）并将key作为edittext中的字符串...单击button1时的事件：

```
button.setOnClickListener(new OnClickListener() {       
@Override
public void onClick(View v) {
// TODO Auto-generated method stub
  hashMap.put(edittext.getText().toString(),"hello word");//I declared hashMap  
}
}); 
```

在活动 2 中：

```
public class Notification_App extends Activity {

    AutoCompleteTextView actv_notification;
    ListView lv_notification;
    Dictionary1 dictionary1;
    ArrayList<String> str_value;
    ArrayList<String> array_key;

@Override
public void onCreate(Bundle circle)
{
    super.onCreate(circle);
    setContentView(R.layout.notification);

    actv_notification=(AutoCompleteTextView)findViewById(R.id.actv_notification);
    lv_notification=(ListView)findViewById(R.id.listview_notification);

    array_key=new ArrayList<String>(dictionary1.hashMap.keySet());
    Iterator myVeryOwnIterator = dictionary1.hashMap.keySet().iterator();
    while(myVeryOwnIterator.hasNext())
    {
        String key=(String)myVeryOwnIterator.next();
        String value=(String)dictionary1.hashMap.get(key);
        str_value.add(value);
    }

    ArrayAdapter<String> adapter=new ArrayAdapter<String>(Notification_App.this, android.R.layout.simple_dropdown_item_1line,array_key);
    ArrayAdapter<String> adapter1=new ArrayAdapter<String>(Notification_App.this, android.R.layout.simple_list_item_1,array_key);

    actv_notification.setAdapter(adapter);
    lv_notification.setAdapter(adapter1);
    lv_notification.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
    long id) {
    // TODO Auto-generated method stub
    Toast.makeText(getBaseContext(), str_value.get(position), Toast.LENGTH_LONG).show();
    }
    });     
} 
```

但错误显示：null poiter at line: **str_value.add(value);** ...你能帮助我吗..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:02:32.497

我想你只是忘了初始化`str_value`变量。放在你的`while`循环之前：

```
str_value = new ArrayList<String>(); 
```

它应该可以解决问题。

PS我没有检查你的代码逻辑，只是指出你为什么得到`NullPointerException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:03:41.777

你得到一个例外，因为`str_value`is `null`。

您需要创建实际对象：

```
    str_value = new ArrayList<String>();

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T14:07:46.633

尝试添加

```
str_value = new ArrayList<String>(); 
```

第一次之前

```
str_value.add(value); 
```

# ruby-on-rails - Rails 命名空间和路由

> ID：10686697
> 
> 赞同：1
> 
> 时间：2012-05-21T14:00:01.077
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routing, routes

我需要帮助。我想要管理我的 rails 应用程序。我尝试使用命名空间设置路由，但命名空间需要资源，并且资源在获取请求中必须具有 id。

有人知道如何正确设置吗？我使用Windows机器。谢谢。

我的路线：

```
Web::Application.routes.draw do

  namespace :admin do
    resources :access # GET http://localhost/admin/access/login/login - stupid??
  end

  match ':controller(/:action(/:id))(.:format)'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T16:54:43.967

尝试使用`resource :access`而不是`resources :access`

```
 namespace :admin do
    resource :access
  end 
```

它将生成路线：

```
 admin_access POST   /admin/access(.:format)                                admin/access#create
          new_admin_access GET    /admin/access/new(.:format)                            admin/access#new
         edit_admin_access GET    /admin/access/edit(.:format)                           admin/access#edit
                              GET    /admin/access(.:format)                                admin/access#show
                              PUT    /admin/access(.:format)                                admin/access#update
                              DELETE /admin/access(.:format)                                admin/access#destroy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:12:40.967

```
 namespace :admin do
    get "login" => "access#login", :as => :login # GET http://localhost/admin/login - admin_login_path 
  end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T14:50:48.730

如果您没有一组*restful 资源*，而只是想要一组不同的控制器方法，那么您可以这样做：

```
scope '/admin' do
  get '' => "admin#index", :as => 'admin_home'
  get '/users' => 'admin#users', :as => 'admin_users'
  get '/other_admin_task' => 'admin#other_admin_task', :as => 'other_admin_task'
end 
```

# android - webview 每次显示最后一个 loadurl() 方法的内容

> ID：10686698
> 
> 赞同：2
> 
> 时间：2012-05-21T14:00:05.093
> 
> 标签：android, webview

我有一个问题，我使用 loadDataWithBaseURL 方法加载网站。我在 webview 中加载了一个准备好的网站。如果我回到我之前的活动并启动 webview 活动，它会使用 loadDataWithBaseURL() 方法加载相同的准备好的网站，但我会得到一个包含两倍内容的 webview。例如 Hello World 和第二个 Hello World。我的代码如下：

```
 package de.http.test;

import android.app.Activity;
import android.os.Bundle;
import android.view.KeyEvent;
import android.webkit.WebBackForwardList;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class WebviewActivity extends Activity {

    WebView webview;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mywebview);         
        Bundle bundle= this.getIntent().getExtras();
        String param1 = bundle.getString("Weburl");

        getDetailWebsite(param1);   

        webview = (WebView) findViewById(R.id.webview);
        webview.setWebViewClient(new HelloWebViewClient());
        webview.getSettings().setJavaScriptEnabled(true);
        webview.getSettings().setBuiltInZoomControls(true);

        loadWebview();

    }

    public void loadWebview()
    {       
        webview.clearView();        

        webview.loadDataWithBaseURL("http://branchenportal-schlitz.de", HttpHelperClass.htmlDetailWebsiteCode, "text/html", "UTF-8", HttpHelperClass.htmlDetailWebsiteCode);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if ((keyCode == KeyEvent.KEYCODE_BACK) && webview.canGoBack()) {
            webview.goBack();   

            WebBackForwardList mWebBackForwardList = webview.copyBackForwardList();
            String historyUrl = mWebBackForwardList.getItemAtIndex(mWebBackForwardList.getCurrentIndex()).getUrl();

            if(historyUrl.contains("<html>"))
            {               
                loadWebview();
            }

            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

    private void getDetailWebsite(String url)
    {   
        try{            
            HttpHelperClass.executeHttpGetDetailWebsite(url,this);

        }catch (Exception ex)
        {
            ex.printStackTrace();           
        }
    }

    private class HelloWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }

        @Override
        public void onPageFinished(WebView view, String url) {

            if(url.contains("branchenportal-schlitz.de"))
            {
                view.clearHistory();
            }
            super.onPageFinished(view, url);
        }
    }

    @Override
    protected void onStop() {

        webview.clearCache(true);       
        webview.clearView();
        webview.clearHistory();
        webview.destroy();      
        super.onStop();     
    }

} 
```

有谁知道我做错了什么？提前致谢。带着敬意

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:23:50.630

好吧，解决这个问题我会首先摆脱（注释掉）公共布尔onKeyDown（int keyCode，KeyEvent event）下面的所有代码。然后你可以看看它是否在你的 onCreate 中。但这取决于。

```
 @Override
 public void onCreate(Bundle savedInstanceState)
 {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.buttons);
     wb = new WebView(this);
     wb.getSettings().setJavaScriptEnabled(true);
     wb.setWebViewClient(new HelloWebViewClient()); 

     final String urlToLoad = "http://www.yourWebsite.com";

     wb.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);
     wb.loadUrl(urlToLoad);
 } 
```

从这里开始，然后开始重新添加您的额外代码。

# ruby - 倾斜模板片段

> ID：10686699
> 
> 赞同：5
> 
> 时间：2012-05-21T14:00:09.257
> 
> 标签：ruby, tilt

是否可以渲染 Tilt 模板的片段（即，不使用磁盘上的模板文件）？

背景：我想在 Ruby CGI 程序中呈现内联模板字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T14:21:19.340

是的。您可以使用任何字符串数据：

```
>> require 'haml'
>> template = Tilt::HamlTemplate.new { "%h1= 'Hello Haml!'" }
=> #<Tilt::HamlTemplate @file=nil ...>
>> template.render
=> "<h1>Hello Haml!</h1>" 
```

[在文档中](https://github.com/rtomayko/tilt/blob/master/docs/TEMPLATES.md)查看更多示例

# git - 备份和恢复 github 存储库的最简单方法

> ID：10686701
> 
> 赞同：4
> 
> 时间：2012-05-21T14:00:15.763
> 
> 标签：git, github

> **可能重复：**
> [github repo 的备份](https://stackoverflow.com/questions/1251713/backup-of-github-repo)

我可以备份 github 存储库并在一段时间后（在 github 上删除存储库后）重新创建存储库以使其与以前处于相同状态的最简单方法是什么？

除其他问题外，我不确定一个简单`clone`的是否会获取所有远程分支等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T15:56:24.367

我可能会使用`git clone --mirror $original`, 并使用`git push`.

也可以看看：

*   [git clone --mirror 和 git clone --bare 有什么区别](https://stackoverflow.com/questions/3959924/whats-the-difference-between-git-clone-mirror-and-git-clone-bare)
*   [备份 GitHub 存储库](https://stackoverflow.com/questions/1251713/backup-of-github-repo)

# c# - ASP .NET c# HttpWebRequest 是否支持通过 username:password@www.website.com 进行 HTTPS 身份验证？

> ID：10686709
> 
> 赞同：1
> 
> 时间：2012-05-21T14:00:34.903
> 
> 标签：c#, asp.net, authentication, post, https

正如标题所说，

ASP .NET c# HttpWebRequest 是否支持通过 username:password@www.website.com 进行 HTTPS 身份验证？

我发现的几乎所有关于身份验证的内容都在网站后面附加了用户名和密码。在网站之前使用 System.Net.HttpRequest 会使用用户名和密码吗？

[编辑]

让我解释一下这个场景，这是针对我正在开发的一个向网站发出 HTTP POST 的应用程序。我们已经在使用 HTTPS，并且网站服务器已将我的 IP 列入白名单。应“网站”某人的请求，他们还想使用用户名：password@www.website.com 进行身份验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:05:11.487

在 url 上添加凭据对我来说从来没有用过。这就是我目前的做法：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(apiUrl);
System.Net.CredentialCache credentialCache = new System.Net.CredentialCache();
credentialCache.Add(
    new System.Uri(apiUrl),
    "Basic",
    new System.Net.NetworkCredential(basicAuthUserName, basicAuthPassword)
);

request.PreAuthenticate = true;
request.Credentials = credentialCache; 
```

# gcc - GCC 抑制标志

> ID：10686714
> 
> 赞同：1
> 
> 时间：2012-05-21T14:00:48.593
> 
> 标签：gcc, linker-errors, vxworks

我正在尝试用我的 gcc 创建一个共享库。这是 vxworks 的 gcc（这可能是问题所在......）。

我使用 gcc 如下：

```
./gcc -shared -B/path/to/gnutools/bin -o test.so test.c 
```

结果：

```
/path/to/ld: -r and -shared may not be used together 
collect2: ld returned 1 exit status 
```

如果我对 linux gcc 进行同样的尝试，就没有问题。所以我猜 VxWorks 的 gcc 会自动将 -r（或 -i，相同且结果相同）标志传递给链接器。有没有办法抑制这种情况？

格雷茨

马蒂

PS：使其成为静态并不是真正的替代方案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:08:33.927

尝试使用 -fPIC 单独编译目标文件，然后链接：

```
    gcc -Wall -fPIC -c -o test.o test.c
    gcc -Wall -shared -o test.so test.o

```

另一个建议是使用 libtool （至少要找出正确的标志）。

一种解决方法可能是直接使用`ld`：

```
    ld -shared -o test.so test.o -lc

```

# android - Android 上的“ı,ü,ğ,ş,ç,o”土耳其语字符转换

> ID：10686716
> 
> 赞同：0
> 
> 时间：2012-05-21T14:00:57.730
> 
> 标签：android, listview, character

我有搜索区域（edittext）和巴士站列表。当输入一个字符时，列表同时被过滤。

有一些巴士站包括土耳其语字符，如“beşiktaş”。当我输入“besiktas”时，我希望列表显示“beşiktaş”。

我在服务器数据库上有所有数据（许多土耳其字符数据），并且大约有 5500 个巴士站。因此，由于 RAM 不足，我无法在移动设备上进行投射。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T15:47:55.053

根据您提供的非常有限的信息，您可以执行以下操作（这不是最快的方法，但它应该适合您）：

1）在您的`Station`班级中，添加以下字段：

```
private String latinName;
private static Map<String, String> tokens;
private static Pattern patter; 
```

2）将以下静态初始化程序添加到您的`Station`类中：

```
static {
    tokens = new HashMap<String,String>();

    tokens.put("\u00C0", "A");
    tokens.put("\u00C1", "A");
    tokens.put("\u00C2", "A");
    tokens.put("\u00C3", "A");
    tokens.put("\u00C4", "A");
    tokens.put("\u00C5", "A");
    tokens.put("\u00C6", "AE");
    tokens.put("\u00C7", "C");
    tokens.put("\u00C8", "E");
    tokens.put("\u00C9", "E");
    tokens.put("\u00CA", "E");
    tokens.put("\u00CB", "E");
    tokens.put("\u00CC", "I");
    tokens.put("\u00CD", "I");
    tokens.put("\u00CE", "I");
    tokens.put("\u00CF", "I");
    tokens.put("\u00D0", "D");
    tokens.put("\u00D1", "N");
    tokens.put("\u00D2", "O");
    tokens.put("\u00D3", "O");
    tokens.put("\u00D4", "O");
    tokens.put("\u00D5", "O");
    tokens.put("\u00D6", "O");
    tokens.put("\u00D8", "O");
    tokens.put("\u00D9", "U");
    tokens.put("\u00DA", "U");
    tokens.put("\u00DB", "U");
    tokens.put("\u00DC", "U");
    tokens.put("\u00DD", "Y");
    tokens.put("\u00DF", "s");
    tokens.put("\u00E0", "a");
    tokens.put("\u00E1", "a");
    tokens.put("\u00E2", "a");
    tokens.put("\u00E3", "a");
    tokens.put("\u00E4", "a");
    tokens.put("\u00E5", "a");
    tokens.put("\u00E6", "ae");
    tokens.put("\u00E7", "c");
    tokens.put("\u00E8", "e");
    tokens.put("\u00E9", "e");
    tokens.put("\u00EA", "e");
    tokens.put("\u00EB", "e");
    tokens.put("\u00EC", "i");
    tokens.put("\u00ED", "i");
    tokens.put("\u00EE", "i");
    tokens.put("\u00EF", "i");
    tokens.put("\u00F1", "n");
    tokens.put("\u00F2", "o");
    tokens.put("\u00F3", "o");
    tokens.put("\u00F4", "o");
    tokens.put("\u00F5", "o");
    tokens.put("\u00F6", "o");
    tokens.put("\u00F8", "o");
    tokens.put("\u00F9", "u");
    tokens.put("\u00FA", "u");
    tokens.put("\u00FB", "u");
    tokens.put("\u00FC", "u");
    tokens.put("\u00FD", "y");
    tokens.put("\u00FF", "y");
    tokens.put("\u0100", "A");
    tokens.put("\u0101", "a");
    tokens.put("\u0102", "A");
    tokens.put("\u0103", "a");
    tokens.put("\u0104", "A");
    tokens.put("\u0105", "a");
    tokens.put("\u0106", "C");
    tokens.put("\u0107", "c");
    tokens.put("\u0108", "C");
    tokens.put("\u0109", "c");
    tokens.put("\u010A", "C");
    tokens.put("\u010B", "c");
    tokens.put("\u010C", "C");
    tokens.put("\u010D", "c");
    tokens.put("\u010E", "D");
    tokens.put("\u010F", "d");
    tokens.put("\u0110", "D");
    tokens.put("\u0111", "d");
    tokens.put("\u0112", "E");
    tokens.put("\u0113", "e");
    tokens.put("\u0114", "E");
    tokens.put("\u0115", "e");
    tokens.put("\u0116", "E");
    tokens.put("\u0117", "e");
    tokens.put("\u0118", "E");
    tokens.put("\u0119", "e");
    tokens.put("\u011A", "E");
    tokens.put("\u011B", "e");
    tokens.put("\u011C", "G");
    tokens.put("\u011D", "g");
    tokens.put("\u011E", "G");
    tokens.put("\u011F", "g");
    tokens.put("\u0120", "G");
    tokens.put("\u0121", "g");
    tokens.put("\u0122", "G");
    tokens.put("\u0123", "g");
    tokens.put("\u0124", "H");
    tokens.put("\u0125", "h");
    tokens.put("\u0126", "H");
    tokens.put("\u0127", "h");
    tokens.put("\u0128", "I");
    tokens.put("\u0129", "i");
    tokens.put("\u012A", "I");
    tokens.put("\u012B", "i");
    tokens.put("\u012C", "I");
    tokens.put("\u012D", "i");
    tokens.put("\u012E", "I");
    tokens.put("\u012F", "i");
    tokens.put("\u0130", "I");
    tokens.put("\u0131", "i");
    tokens.put("\u0132", "IJ");
    tokens.put("\u0133", "ij");
    tokens.put("\u0134", "J");
    tokens.put("\u0135", "j");
    tokens.put("\u0136", "K");
    tokens.put("\u0137", "k");
    tokens.put("\u0139", "L");
    tokens.put("\u013A", "l");
    tokens.put("\u013B", "L");
    tokens.put("\u013C", "l");
    tokens.put("\u013D", "L");
    tokens.put("\u013E", "l");
    tokens.put("\u013F", "L");
    tokens.put("\u0140", "l");
    tokens.put("\u0141", "l");
    tokens.put("\u0142", "l");
    tokens.put("\u0143", "N");
    tokens.put("\u0144", "n");
    tokens.put("\u0145", "N");
    tokens.put("\u0146", "n");
    tokens.put("\u0147", "N");
    tokens.put("\u0148", "n");
    tokens.put("\u0149", "n");
    tokens.put("\u014C", "O");
    tokens.put("\u014D", "o");
    tokens.put("\u014E", "O");
    tokens.put("\u014F", "o");
    tokens.put("\u0150", "O");
    tokens.put("\u0151", "o");
    tokens.put("\u0152", "OE");
    tokens.put("\u0153", "oe");
    tokens.put("\u0154", "R");
    tokens.put("\u0155", "r");
    tokens.put("\u0156", "R");
    tokens.put("\u0157", "r");
    tokens.put("\u0158", "R");
    tokens.put("\u0159", "r");
    tokens.put("\u015A", "S");
    tokens.put("\u015B", "s");
    tokens.put("\u015C", "S");
    tokens.put("\u015D", "s");
    tokens.put("\u015E", "S");
    tokens.put("\u015F", "s");
    tokens.put("\u0160", "S");
    tokens.put("\u0161", "s");
    tokens.put("\u0162", "T");
    tokens.put("\u0163", "t");
    tokens.put("\u0164", "T");
    tokens.put("\u0165", "t");
    tokens.put("\u0166", "T");
    tokens.put("\u0167", "t");
    tokens.put("\u0168", "U");
    tokens.put("\u0169", "u");
    tokens.put("\u016A", "U");
    tokens.put("\u016B", "u");
    tokens.put("\u016C", "U");
    tokens.put("\u016D", "u");
    tokens.put("\u016E", "U");
    tokens.put("\u016F", "u");
    tokens.put("\u0170", "U");
    tokens.put("\u0171", "u");
    tokens.put("\u0172", "U");
    tokens.put("\u0173", "u");
    tokens.put("\u0174", "W");
    tokens.put("\u0175", "w");
    tokens.put("\u0176", "Y");
    tokens.put("\u0177", "y");
    tokens.put("\u0178", "Y");
    tokens.put("\u0179", "Z");
    tokens.put("\u017A", "z");
    tokens.put("\u017B", "Z");
    tokens.put("\u017C", "z");
    tokens.put("\u017D", "Z");
    tokens.put("\u017E", "z");
    tokens.put("\u017F", "s");
    tokens.put("\u0192", "f");
    tokens.put("\u01A0", "O");
    tokens.put("\u01A1", "o");
    tokens.put("\u01AF", "U");
    tokens.put("\u01B0", "u");
    tokens.put("\u01CD", "A");
    tokens.put("\u01CE", "a");
    tokens.put("\u01CF", "I");
    tokens.put("\u01D0", "i");
    tokens.put("\u01D1", "O");
    tokens.put("\u01D2", "o");
    tokens.put("\u01D3", "U");
    tokens.put("\u01D4", "u");
    tokens.put("\u01D5", "U");
    tokens.put("\u01D6", "u");
    tokens.put("\u01D7", "U");
    tokens.put("\u01D8", "u");
    tokens.put("\u01D9", "U");
    tokens.put("\u01DA", "u");
    tokens.put("\u01DB", "U");
    tokens.put("\u01DC", "u");
    tokens.put("\u01FA", "A");
    tokens.put("\u01FB", "a");
    tokens.put("\u01FC", "AE");
    tokens.put("\u01FD", "ae");
    tokens.put("\u01FE", "O");
    tokens.put("\u01FF", "o");

    String patternString = "(\u00C0|\u00C1|\u00C2|\u00C3|\u00C4|\u00C5|\u00C6|\u00C7|\u00C8|\u00C9|\u00CA|\u00CB|\u00CC|\u00CD|\u00CE|\u00CF|\u00D0|\u00D1|\u00D2|\u00D3|\u00D4|\u00D5|\u00D6|\u00D8|\u00D9|\u00DA|\u00DB|\u00DC|\u00DD|\u00DF|\u00E0|\u00E1|\u00E2|\u00E3|\u00E4|\u00E5|\u00E6|\u00E7|\u00E8|\u00E9|\u00EA|\u00EB|\u00EC|\u00ED|\u00EE|\u00EF|\u00F1|\u00F2|\u00F3|\u00F4|\u00F5|\u00F6|\u00F8|\u00F9|\u00FA|\u00FB|\u00FC|\u00FD|\u00FF|\u0100|\u0101|\u0102|\u0103|\u0104|\u0105|\u0106|\u0107|\u0108|\u0109|\u010A|\u010B|\u010C|\u010D|\u010E|\u010F|\u0110|\u0111|\u0112|\u0113|\u0114|\u0115|\u0116|\u0117|\u0118|\u0119|\u011A|\u011B|\u011C|\u011D|\u011E|\u011F|\u0120|\u0121|\u0122|\u0123|\u0124|\u0125|\u0126|\u0127|\u0128|\u0129|\u012A|\u012B|\u012C|\u012D|\u012E|\u012F|\u0130|\u0131|\u0132|\u0133|\u0134|\u0135|\u0136|\u0137|\u0139|\u013A|\u013B|\u013C|\u013D|\u013E|\u013F|\u0140|\u0141|\u0142|\u0143|\u0144|\u0145|\u0146|\u0147|\u0148|\u0149|\u014C|\u014D|\u014E|\u014F|\u0150|\u0151|\u0152|\u0153|\u0154|\u0155|\u0156|\u0157|\u0158|\u0159|\u015A|\u015B|\u015C|\u015D|\u015E|\u015F|\u0160|\u0161|\u0162|\u0163|\u0164|\u0165|\u0166|\u0167|\u0168|\u0169|\u016A|\u016B|\u016C|\u016D|\u016E|\u016F|\u0170|\u0171|\u0172|\u0173|\u0174|\u0175|\u0176|\u0177|\u0178|\u0179|\u017A|\u017B|\u017C|\u017D|\u017E|\u017F|\u0192|\u01A0|\u01A1|\u01AF|\u01B0|\u01CD|\u01CE|\u01CF|\u01D0|\u01D1|\u01D2|\u01D3|\u01D4|\u01D5|\u01D6|\u01D7|\u01D8|\u01D9|\u01DA|\u01DB|\u01DC|\u01FA|\u01FB|\u01FC|\u01FD|\u01FE|\u01FF)";
    pattern = Pattern.compile(patternString);
} 
```

3）将以下功能添加到您的`Station`课程中：

```
public static String latinString(String string) {
    Matcher matcher = pattern.matcher(string);
    StringBuffer sb = new StringBuffer();

    while(matcher.find()) {
        matcher.appendReplacement(sb, tokens.get(matcher.group(1)));
    }
    matcher.appendTail(sb);

    return = sb.toString();
} 
```

`name`4）确保在你的类中的类变量的设置器中有以下代码`Station`：

```
public void setName(String _name) {
    this.name = _name;
    this.latinName = Station.latinString(_name).toLowerCase();
} 
```

现在，当您设置电台名称时，该电台名称的拉丁字符（不带重音符号）表示版本也将被设置。

5) 当您需要将用户的输入与电台名称进行比较时，改为比较`Station.latinString(userInput).toLowerCase()`-`yourStation.getLatinName()`这样任何可能的匹配项都会被捕获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:40:46.633

You can use char array instead of strings on your search algorithm. So you can make turkish character control. This will not be an efficient solution but I can't tell more without knowing your structure.

# c# - 如何从 Jobject 中获取值

> ID：10686727
> 
> 赞同：1
> 
> 时间：2012-05-21T14:01:45.570
> 
> 标签：c#, asp.net, json

我正在使用 Newtonsoft JSon c# 插件。我创建了一个 JArray

```
{"data":[{"name":"Wesley 1","id":"616611941"},{"name":"Wesley 2","id":"100000138033375"},.............. 
```

我想知道有没有办法遍历花括号之间的每个对象并提取每个条目的名称和 ID？

感谢任何能提供帮助的人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:13:03.813

根据其他一些问题，您可以尝试：

```
var array = JArray.Parse(json); 
```

然后做一个

```
foreach(var item in array)
    // do something 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T14:15:08.557

```
dynamic dynObj = JsonConvert.DeserializeObject(json);
foreach (var item in dynObj.data)
{
    Console.WriteLine("{0} {1}",item.name,item.id);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T14:06:09.347

使用 jQuery 你可以做到这一点。第一个循环将遍历数组中的每个项目。第二个循环将获取每个数组项中的键、值

```
$.each(data, function() {
  $.each(this, function(key, value) {
    //do what ever you want
  });
}); 
```

**编辑**

好的。你从别人那里得到了一些很好的答案。这是另一种方式。

命名空间

```
using System.Web.Script.Serialization; 
```

添加强类型的类来映射 json 中的数据

```
public class wordList
{
    public List<NameId> data { get; set; }
    public wordList() 
    { 
        data = new List<NameId>(); 
    }
}

public class NameId
{
    public string name { get; set; }
    public string id { get; set; }        
} 
```

然后你打电话

```
 string jsonObj = @"{""data"":[{""name"":""Wesley 1"",""id"":""616611941""},{""name"":""Wesley 2"",""id"":""100000138033375""}]}";

 JavaScriptSerializer jsSer = new JavaScriptSerializer();
 wordList wl = jsSer.Deserialize<wordList>(jsonObj); 
```

您可以遍历 WordList 以获取名称、id 值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-11T10:13:53.863

```
using Newtonsoft.Json.Linq; 
using System.Collections.Generic;

List<JObject> data = JsonConvert.DeserializeObject<List<JObject>>(requestBody); 
   foreach(JObject d in data)
                    {

                        string name = d.GetValue("name").ToString();
                        string id = d.GetValue("id").ToString();

                    } 
```

# java - 预期的。爪哇

> ID：10686729
> 
> 赞同：2
> 
> 时间：2012-05-21T14:02:03.203
> 
> 标签：java

我有这段java代码。我是java中的菜鸟..

错误 ：

```
<identifier> expected
cfg = new Config; 
```

代码：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Set;
import java.io.*; 

import java.util.*;
import java.util.Properties;

public class Config 
{

   Properties configFile;
  public Config()
{
configFile = new java.util.Properties();
try {           
  configFile.load(this.getClass().getClassLoader().getResourceAsStream("config"));          
}catch(Exception eta){
    eta.printStackTrace();
}
  }

  public String getProperty(String key)
  {
 String value = this.configFile.getProperty(key);       
    return value;
  }

}

public class ClosureBuilder { 
```

`cfg = new Config();`

```
private static String JDBC = cfg.getProperty("JDBC");
private static String URL = cfg.getProperty("URL");
private static String DIMENSION_TABLE = cfg.getProperty("DIMENSION_TABLE");
private static String CLOSURE_TABLE = cfg.getProperty("CLOSURE_TABLE");
private static String KEY = cfg.getProperty("KEY");
private static String PARENT_KEY = cfg.getProperty("PARENT_KEY");

private static Object TOP_LEVEL_PARENT_KEY = '0';

private Object topLevel = null;

private Set<Object> processedNodes;

private PreparedStatement aPst;
public static void main(String[] args) throws Exception {

----------- More code -------- 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T14:04:23.537

是的，这就是问题所在：

```
public class ClosureBuilder {
    cfg = new Config();
    ...
} 
```

在顶级课程中，您只能拥有：

*   实例初始化程序块 ( `{ ... }`)
*   静态初始化块 ( `static { ... }`)
*   变量声明
*   构造函数声明
*   方法声明
*   嵌套类型声明
*   终结器声明

这些都不是。如果你*打算*声明一个变量，你应该这样做：

```
private Config cfg = new Config(); 
```

如果那*不是*你打算做的，你应该解释你的意图。

编辑：一旦你解决了这个问题，这个编译器错误似乎很清楚：

> 类 Config 是公共的，应该在一个名为 Config.java 的文件中声明

有两个潜在的解决方法：

*   不`Config`公开
*   将其移动到一个名为`Config.java`

两者都应该修复该错误（可能会揭示更多）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T14:03:50.983

你在哪里声明你的`cfg`变量？

我只看到任务。我认为这可能是原因。

```
Config cfg = new Config(); 
```

应该修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T17:38:31.093

尽管您的意图不是很清楚，但我假设您希望在任何其他变量之前创建 cfg。首先将您的类 Config 声明为非公共类或移至文件 Config.java。在静态块中初始化 cfg 是有意义的。下面是一个可能的代码片段：

私有静态配置 cfg = null;

私有静态字符串 JDBC = null;

静止的 {

```
 cfg = new Config();

  JDBC = cfg.getProperty("JDBC"); 
```

}

# windows - 批处理文件中的 MS-DOS FTP 命令：引发错误

> ID：10686730
> 
> 赞同：3
> 
> 时间：2012-05-21T14:02:03.500
> 
> 标签：windows, error-handling, batch-file, ftp, dos

在 MS-DOS (Windows 2003 R2 Server) 中，我有一个批处理文件，其中包含 FTP 命令，例如：-

```
FTP.CMD
-------
cd d:\extracts\scripts
ftp -i -s:ftp_getfile.ftp
exit 
```

我希望批处理文件引发并返回错误级别 1 而不是 0，以便调用批处理文件可以处理它。

该错误可能是由于 FTP 服务器关闭所致。现在，没有返回任何内容来指示发生了错误情况。

请问有人可以建议吗？

谢谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T04:40:05.480

也许为时已晚，但有可能。我正在运行以下脚本来检查 FTP 脚本返回的文本中的错误。如果您知道 FTP 返回的错误文本，那么这就是您使用“查找”命令查找的内容。ftp 命令位于名为 ftp.inp 的文件中，只需查看 FTP 的帮助，了解如何使用“-s”即可。

```
ftp -s:ftp.inp > ftp.log

find /I /C "not connected" ftp.log
IF NOT ERRORLEVEL 1 GOTO FTPERROR

find /I /C "not found" ftp.log
IF NOT ERRORLEVEL 1 GOTO FTPERROR

find /I /C "failed" ftp.log
IF NOT ERRORLEVEL 1 GOTO FTPERROR

REM --- no errors found
GOTO :END

:FTPERROR
REM --- error found

:END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T21:44:18.263

根据这个问题： [如何在批处理脚本中捕获 ftp 错误代码？](https://stackoverflow.com/questions/7158295/how-to-capture-the-ftp-error-code-in-batch-scripts)

windows FTP 命令不支持这种行为（或 PASV 模式），基本上几乎没用。

您可能想改用[NcFtp](http://www.ncftp.com/ncftp/)。它是免费的、小巧的、便携的，并且有不错的错误代码。

# python - 如何在 virtualenv 中安装 pygresql？

> ID：10686733
> 
> 赞同：0
> 
> 时间：2012-05-21T14:02:11.457
> 
> 标签：python, virtualenv, pygresql

当我尝试通过 pip 或 easy_install 安装它时，它给了我错误：

```
OSError: [Errno 2] No such file or directory: '/usr/include/pgsql/server' 
```

我应该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:16:02.400

您没有 PostgreSQL 服务器包含文件，或者它们不在系统上的预期路径中。有关 PyGreSQL 编译的更多详细信息，请参阅[PyGreSQL 安装](http://www.pygresql.org/install.html)。

例如，在 Ubuntu 上，您需要安装[postgresql-server-dev-all](http://packages.ubuntu.com/precise/postgresql-server-dev-all)软件包才能拥有服务器包含文件。在 Fedora 上，它是[postgresql-devel](http://rpmfind.net/linux/rpm2html/search.php?query=postgresql-devel)。

通常，pip 然后会使用 pg_config 为这些文件找到正确的路径。

```
$ pg_config --includedir-server
/usr/include/postgresql/9.1/server 
```

根据您的错误，pg_config 已`'/usr/include/pgsql/server'`作为服务器头文件的位置返回，但它们尚未安装在您的系统上。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-21T14:44:06.967

您需要安装包的构建依赖项。

在基于 Debian 的操作系统中，这将是：

`sudo apt-get build-dep psycopg2`

您还应该安装该`build-essentials`软件包（如果尚未安装）。然后您可以继续安装 virtualenv。

# windows - 检查命令是否在批处理文件中可用

> ID：10686737
> 
> 赞同：9
> 
> 时间：2012-05-21T14:02:19.700
> 
> 标签：windows, batch-file, command

我正在为 Windows 编写一个批处理文件并使用命令`7z`（7-Zip）。我已将它的位置放在 PATH 中。有没有相对简单的方法来检查命令是否可用？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-11-19T10:09:17.037

不要执行命令***来***检查它的可用性（即，在`PATH`环境变量中找到）。改用[`where`](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/where)：

```
where 7z.exe >nul 2>nul
IF NOT ERRORLEVEL 0 (
    @echo 7z.exe not found in path.
    [do something about it]
) 
```

`>nul`并`2>nul`阻止向用户显示命令的结果`where`。直接执行程序有以下问题：

*   程序的作用不是很明显
*   意外的副作用（更改文件系统、发送电子邮件等）
*   资源密集型、启动缓慢、阻塞 I/O、...

您还可以定义一个例程，它可以帮助用户确保他们的系统满足要求：

```
rem Ensures that the system has a specific program installed on the PATH.
:check_requirement
set "MISSING_REQUIREMENT=true"
where %1 > NUL 2>&1 && set "MISSING_REQUIREMENT=false"

IF "%MISSING_REQUIREMENT%"=="true" (
  echo Download and install %2 from %3
  set "MISSING_REQUIREMENTS=true"
)

exit /b 
```

然后使用它，例如：

```
set "MISSING_REQUIREMENTS=false"

CALL :check_requirement curl cURL https://curl.haxx.se/download.html
CALL :check_requirement svn SlikSVN https://sliksvn.com/download/
CALL :check_requirement jq-win64 jq https://stedolan.github.io/jq/download/

IF "%MISSING_REQUIREMENTS%"=="true" (
  exit /b
) 
```

**电源**：

在 上`PowerShell`，`Get-Command`可以认为 cmdlet 相当于 cmd 的`where.exe`.

```
Get-Command <cmd>
IF ($? -ne $true)
{
    Write-Host "<cmd> not found in path"
    # Do something about it
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:08:05.023

是的：

```
@echo off
set found=
set program=7z.exe
for %%i in (%path%) do if exist %%i\%program% set found=%%i
echo "%found%" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-21T14:05:12.043

是的，打开一个命令窗口并输入“7z”（我假设这是可执行文件的名称）。如果您收到一条错误消息，指出无法识别命令或操作，那么您就知道路径语句在某处存在问题，否则不会。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-21T14:07:30.860

如果未找到该命令，则尝试执行`7z.exe`将返回9009。`%errorlevel%`你可以检查一下。

```
7z.exe
if %errorlevel%==9009 echo Command Not Found 
```

***注意**：这个解决方案对于这个特定的用例是可行的`7zip`，并且可能适用于很多其他用例。但作为一般规则，执行命令以确定它是否存在可能是有害的。因此，请确保您了解执行您正在检查的命令的效果，并使用这种方法自行决定。*

# php - Zend_Form 高级用法（数组）

> ID：10686739
> 
> 赞同：2
> 
> 时间：2012-05-21T14:02:29.757
> 
> 标签：php, forms, zend-form, zend-form-element

我正忙于处理 Zend_Form 对象。

我正在构建一个用于创建新发票的表单。 ![应该使用 Zend_Form 构建的表单](../Images/28377ec556075d460464e9ef9c7a6392.png)

正如您在上图中所见，它是一个表单，在页面的不同位置和 HTML 代码中具有多个不同的输入字段。

通常你会使用装饰器来做到这一点，但我认为这不是一个可取的情况。

插入新 HTML 的按钮会创建具有相同名称但末尾带有 [NUMBER] 的新输入字段（创建数组）。

我认为最好在视图脚本中手动添加字段（伪代码：echo Zend_Form_Text_Element->toHtml();..

谁能给我建议如何让它正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:34:29.883

您应该使用视图脚本装饰器。这是一个很好的[链接](http://devzone.zend.com/1240/decorators-with-zend_form/)。

向下滚动到显示的部分：**示例：使用 ViewScript 装饰器进行完全自定义**

这是使用视图脚本构建的示例表单：

```
<h4>Please register with us!</h4>
<form action="<?= $this->escape($this->form->getAction() ?>"
      method="<?= $this->escape($this->form->getMethod() ?>">

<fieldset>
    <legend>Demographics</legend>
    <p>
        Please provide us the following information so we can know more about
        you.
    </p>

    <?= $this->form->age ?>
    <?= $this->form->nationality ?>
    <?= $this->form->income ?>
</fieldset>

<fieldset>
    <legend>User Information</legend>
    <p>
        Now please tell us who you are and how to contact you.
    </p>

    <?= $this->form->firstname ?>
    <?= $this->form->lastname ?>
    <?= $this->form->email ?>
    <?= $this->form->address1 ?>
    <?= $this->form->address2 ?>
    <?= $this->form->city ?>
    <?= $this->form->state ?>
    <?= $this->form->postal ?>
    <?= $this->form->phone ?>
</fieldset>

<?= $this->form->submit ?>
</form> 
```

这样你就可以完全控制表单的 html 并且你不需要忍受装饰器的地狱：D

# javascript - fb.login 在后台运行对话框？

> ID：10686740
> 
> 赞同：2
> 
> 时间：2012-05-21T14:02:30.940
> 
> 标签：javascript, jquery, facebook, facebook-javascript-sdk

为了检查用户是否提供了我的应用程序所需的所有权限，我这样做：

```
/*Solo hacemos la peticion si el checkbox estaba desmarcado. Nota: esta funcion asume que solo hay un checkbox en el dom*/
if($('input:checkbox').prop('checked')){
    FB.login(function(response){
             console.log(response.status);
            if (response.status == 'connected') {
            hi   /* Entonces listo */
            }else{
                 /* Entonces cancelamos el checkbox */
                 $('input:checkbox').removeAttr('checked');
            }
    }, { scope: 'publish_stream' });
} 
```

这边走：

*   如果用户已经完成：打开一个弹出窗口不到一秒钟

*   如果用户还没有：显示权限对话框

问题是：在第一种情况下，如何防止对话框打开（可能在后台运行）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:44:40.577

使用时无法停止弹出窗口`FB.login`。

在第一种情况下使用服务器端身份验证或用于`FB.getLoginStatus`防止弹出。

> FB.getLoginStatus 允许您确定用户是否已登录 Facebook 并已对您的应用进行身份验证

参考[Facebook 文档](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

来自上述参考链接的片段，

```
FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
    // the user is logged in and has authenticated your
    // app, and response.authResponse supplies
    // the user's ID, a valid access token, a signed
    // request, and the time the access token 
    // and signed request each expire
    var uid = response.authResponse.userID;
    var accessToken = response.authResponse.accessToken;
  } else if (response.status === 'not_authorized') {
    // the user is logged in to Facebook, 
    // but has not authenticated your app
  } else {
    // the user isn't logged in to Facebook.
  }
 }); 
```

这就是你需要的。

**编辑：（**在OP的评论之后）

可能是 facebook 正在缓存旧结果。从我上面提到的同一个链接，

> **往返 Facebook 的服务器**
> 
> 为了提高应用程序的性能，并非每次检查用户状态的调用都会导致对 Facebook 服务器的请求。在可能的情况下，响应会被缓存。在当前浏览器会话中第一次调用 FB.getLoginStatus，或者 JD SDK 以 status: true 初始化，响应对象将被 SDK 缓存。对 FB.getLoginStatus 的后续调用将从此缓存响应返回数据。
> 
> 这可能会导致用户自上次完整会话查找以来登录（或退出）Facebook 时出现问题，或者如果用户在其帐户设置中删除了您的应用程序。
> 
> 为了解决这个问题，您调用 FB.getLoginStatus 并将第二个参数设置为 true 以强制往返 Facebook - 有效地刷新响应对象的缓存。

```
FB.getLoginStatus(function(response) {
      // this will be called when the roundtrip to Facebook has completed
    }, true); 
```

> 如果您在每次页面加载时调用 FB.getLoginStatus，请注意不要为每个页面设置此参数，因为它会显着增加对 Facebook 服务器的请求数，从而降低应用程序的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:09:27.110

facebook sdk`login()`函数默认打开一个弹出窗口，您可以在[文档](http://developers.facebook.com/docs/reference/javascript/FB.login/)中阅读。

所以这不是你想要的方式。有 2 个类似的问题，您可能会发现它的信息很有用。

试试[这个](https://stackoverflow.com/questions/4048385/facebook-js-sdk-check-permissions-before-login-popup)和[这个](https://stackoverflow.com/questions/7125320/facebook-login-without-pop-up)。

# objective-c - 如何清除ipad中的webview缓存

> ID：10686748
> 
> 赞同：0
> 
> 时间：2012-05-21T14:02:59.500
> 
> 标签：objective-c, ios, ipad, uiwebview

在这里，我使用加载了 uiwebview 中的内容

```
[webView loadHTMLString:[theApp.contentArr objectAtIndex:spineIndex] baseURL:url]; 
```

回去之后我需要清除缓存

在这里，我尝试了这些方法来清除缓存：

```
 [webView stringByEvaluatingJavaScriptFromString:@"document.body.innerHTML = \"\";"];
    [webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"about:blank"]]];
    // remove all cached responses
        [[NSURLCache sharedURLCache] removeAllCachedResponses];

        // set an empty cache
    NSURLCache *sharedCache = [[NSURLCache alloc] initWithMemoryCapacity:0 diskCapacity:0 diskPath:nil];
    [NSURLCache setSharedURLCache:sharedCache]; 
```

但是没用，有什么办法解决这个问题.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:14:10.360

简单的方法 ：

```
NSURLCache *sharedCache = [[NSURLCache alloc] initWithMemoryCapacity:0 diskCapacity:0 diskPath:nil];
[NSURLCache setSharedURLCache:sharedCache]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T14:16:17.353

利用 -

```
[webView stringByEvaluatingJavaScriptFromString:@"document.body.innerHTML = \"\";"];

NSURLRequest *urlRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:@"about:blank"]];
[urlRequest setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];

[webView loadRequest:urlRequest]; 
```

# asp.net - 在 UserControl 中未检测到单击事件

> ID：10686764
> 
> 赞同：0
> 
> 时间：2012-05-21T14:03:49.080
> 
> 标签：asp.net, user-controls, click

我有一些动态创建的用户控件，带有参数：

```
foreach (DataRow dr in drc)
{
    question = (from ques in bdd.QUESTION where ques.ID_QUESTION == idQuestion select ques).FirstOrDefault();
    List<Object> listParams = new List<Object>();
    listParams.Add(question);
    AdminQuestion qa = (AdminQuestion)(Controller.LoadControl(Page, "~/UserControls/AdminQuestion.ascx", listParams.ToArray()));
    pnl_question_list.Controls.Add(qa);
} 
```

这是我在 SoF 上找到的一种方法，效果很好。当我单击按钮时会调用此方法，并且我的所有用户控件都已正确创建。在这个用户控件中，我有一个按钮：

```
<asp:Button ID="btn_validation_modify_question" runat="server" Text="Modifier" 
            CssClass="clear_left_float_left myBouton myBoutonEnvoyer" 
            OnClick="btn_validation_modify_question_Click"/> 
```

我的方法：

```
protected void btn_validation_modify_question_Click(object sender, EventArgs e)
{
    QUESTION q = (from m in bdd.QUESTION where m.ID_QUESTION == question.ID_QUESTION select m).FirstOrDefault();
    q.MESSAGE = txt_modify_question_message.InnerText;
    q.ID_THEME = new Guid(ddl_modify_question_theme.SelectedValue);
    bdd.ApplyCurrentValues<QUESTION>("QUESTION", q);
    bdd.SaveChanges();
} 
```

但是当我单击按钮时，它不会应用该方法，而是重新加载页面，就像我没有任何声明的方法一样。

有什么我不知道的吗？我已经使用过这种技术并且一切正常......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:07:47.257

如果您动态添加控件，您通常需要在页面事件`Init`或`PreInit`页面事件上执行此操作。否则事件处理程序将永远无法工作。

> > 因此，必须在每次页面访问时以编程方式将动态添加的控件添加到网页中。添加这些控件的最佳时间是在页面生命周期的初始化阶段，它发生在加载视图状态阶段之前。也就是说，我们希望在加载视图状态阶段到达之前完成控制层次结构。出于这个原因，最好在您的代码隐藏类中为 Page 类的 Init 事件创建一个事件处理程序，并在那里添加您的动态控件。
> > 
> > **注意** 您可能能够摆脱在 Page_Load 事件处理程序中加载控件并正确维护视图状态的情况。这完全取决于您是否以编程方式设置动态加载的控件的任何属性，如果是，那么当您相对于 Controls.Add(dynamicControl) 行进行设置时。对此的深入讨论有点超出本文的范围，但它可能起作用的原因是因为 Controls 属性的 Add() 方法递归地将父视图状态加载到其子视图中，即使加载视图状态阶段已经过去。

[在这里](http://msdn.microsoft.com/en-us/library/ms972976.aspx#viewstate_topic4)，您可以获得更多信息。

**编辑**

只是为了确保我们谈论的是相同的，这里你有你的代码应该是什么样子

```
protected void Page_Init(object sender, EventArgs e)
{
    ...
    foreach (DataRow dr in drc)
    {
        question = (from ques in bdd.QUESTION where ques.ID_QUESTION == idQuestion select ques).FirstOrDefault();
        List<Object> listParams = new List<Object>();
        listParams.Add(question);
        AdminQuestion qa = (AdminQuestion)(Controller.LoadControl(Page, "~/UserControls/AdminQuestion.ascx", listParams.ToArray()));
        pnl_question_list.Controls.Add(qa);

    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T03:32:53.243

```
 PageLoad(){
 If(!Page.IsPostBack())    
    foreach (DataRow dr in drc)
        {
            question = (from ques in bdd.QUESTION where ques.ID_QUESTION == idQuestion select ques).FirstOrDefault();
            List<Object> listParams = new List<Object>();
            listParams.Add(question);
            AdminQuestion qa = (AdminQuestion)(Controller.LoadControl(Page, "~/UserControls/AdminQuestion.ascx", listParams.ToArray()));
            pnl_question_list.Controls.Add(qa);
        }
} 
```

Did you try with this solution? And not use Page_Init()?

# google-maps - 谷歌地图api中的融合表

> ID：10686770
> 
> 赞同：1
> 
> 时间：2012-05-21T14:04:07.657
> 
> 标签：google-maps, google-maps-api-3, google-fusion-tables

我将融合表与 Google API 一起使用。我想添加会引发消息的点击事件。当我按下点击时，我得到了包含融合表中所有信息的消息框。我可以控制这个消息框并使用数据显示不同的消息框吗？我可以禁用消息框吗？

问候， 约西

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T12:16:33.470

在没有看到指向您的页面或代码的链接的情况下，我无法告诉您这些片段可以放入并为您工作，但是抑制信息窗口并不困难，并且可以在您定义图层图后添加。

一个示例片段是：

```
layer = new google.maps.FusionTablesLayer(1264600, {suppressInfoWindows: true});
layer.setQuery("SELECT geometry FROM 1264600");
layer.setMap(map); 
```

当用户根据表格中的数据点击地图时，创建一个自定义信息窗口可以这样完成：

```
//click listener on layer
google.maps.event.addListener(layer, 'click', function(e) {
map.setZoom(7);
if(infowindow) infowindow.close();
else infowindow = new google.maps.InfoWindow();

    //create info window layer
    infoWindowContent = infowindow.setContent(
        '<h3>This comes from the Fusion Table: <br />' + e.row['NAMELSAD10'].value + '</h3>' +
        '<br />' +
        '<p>This is hardcoded to the script <br /> and will appear in each infowindow</p>');

    infowindow.setPosition(e.latLng);
    map.setCenter(e.latLng);
    infowindow.open(map);        
}); 
```

把它们放在一起你会得到这样的东西：http: [//jsfiddle.net/chrislkeller/rYfwm/6/](http://jsfiddle.net/chrislkeller/rYfwm/6/)

希望这会有所帮助，如果您遇到更多问题，请发布一些代码......

克里斯·K。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T16:27:28.840

听起来您正在寻找使用 Fusion 表创建自定义信息窗口。帮助文档中有一个页面描述了如何执行此操作。

[http://support.google.com/fusiontables/bin/answer.py?hl=en&answer=171216](http://support.google.com/fusiontables/bin/answer.py?hl=en&answer=171216)

查看“创建自定义模板”标题

# lambda - 结束视图拼图，序言

> ID：10686773
> 
> 赞同：0
> 
> 时间：2012-05-21T14:04:14.060
> 
> 标签：lambda, prolog, logic, constraints, clpfd

我正在尝试使用 CLPFD 为 End View Puzzles 编写求解器（对于那些不熟悉的人，这里有一个简单的描述[http://www.funwithpuzzles.com/2009/12/abcd-end-view-a1.html](http://www.funwithpuzzles.com/2009/12/abcd-end-view-a1.html)） . 我正在研究将应用于每一行/列的约束，并遇到了一些麻烦。

所以我认为它应该看起来像这样：

```
% NxN board, numbers from 0 to M in the row, Left/Right are the clues
% corresponding to the row
endviews(N,M,List,Left,Right):- 
    length(List,M),
    domain(List,0,M),
    stop_repeats(List,M),
    left_value(List,M,Left),
    reverse(List,RList),
    left_value(RList,M,Right)
    . 
```

所以前三个步骤非常简单：初始化板，设置域，并确保该行不会重复除`0`（我已经写了`stop_repeats/2`谓词）以外的数字。我遇到的问题是处理`left_value/3`谓词；我不太确定如何在这里进行，因为列表中的大部分内容都不受限制，而且我实际上并不知道第一个积极元素的位置。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T15:40:46.807

也许[`automaton/3`](http://www.swi-prolog.org/man/clpfd.html#automaton/3)约束可以在这里提供帮助？您可以构造一个有限自动机，它接受（可选）零，后跟所示的第一个字母，然后是任意的零和字母序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:29:42.323

我写下了拼图规范。这似乎不如您对它的描述一般，然后我使用映射 0=empty,1=A,2=B,3=C 对约束进行了硬编码。

```
/*  File:    abc_view.pl
    Author:  Carlo,,,
    Created: May 21 2012
    Purpose:
*/

:- module(abc_view, [abc_view/0]).
:- [library(clpfd), '~/prolog/lambda'].

abc_view :-
    maplist(\Ls^(length(Ls, 4), Ls ins 0..3), [R1,R2,R3,R4]),
    transpose([R1,R2,R3,R4], [C1,C2,C3,C4]),

    maplist(all_distinct, [R1,R2,R3,R4]),
    maplist(all_distinct, [C1,C2,C3,C4]),

    start(R2, 3),
    start(R3, 3),
    finish(R3, 2),

    start(C3, 1),
    finish(C2, 2),

    maplist(writeln, [R1,R2,R3,R4]).

finish(X, V) :-
    reverse(X, Y),
    start(Y, V).

start([0,Y|_], Y).
start([Y|_], Y). 
```

测试：

```
?- abc_view.
[2,0,1,3]
[0,3,2,1]
[3,1,0,2]
[1,2,3,0]
true ;
false. 
```

我希望你能用它来解决你更普遍的难题。

# url - 查询字符串中是否有任何格式约定？

> ID：10686774
> 
> 赞同：20
> 
> 时间：2012-05-21T14:04:14.467
> 
> 标签：url, formatting, query-string

我想知道您是否通常将查询字符串中的任何字母大写，使用破折号或下划线作为变量名，或者有任何其他查询字符串命名约定。我找不到任何参考。

编辑：由于似乎没有约定，是否有任何最佳做法或通常的方法来做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-21T15:28:29.957

我不记得实际上曾经见过人们在查询字符串的参数名称中使用破折号。这可能是最佳实践。

我个人会避免使用驼峰式大小写，因为我不想涉及区分大小写/不区分大小写的问题。

这留下了下划线，我发现这是常用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:07:20.547

在这种情况下根本没有约定。URL（至少在 .NET 中）无论如何都不区分大小写。

# java - 在 Nimbus L&F 中多次更改 JButton 背景颜色的问题

> ID：10686776
> 
> 赞同：2
> 
> 时间：2012-05-21T14:04:27.757
> 
> 标签：java, swing, jbutton, look-and-feel, nimbus

在 Java 中使用 Nimbus L&F 感觉时，我在多次更改 JButton 的背景颜色时遇到了问题。在下面的代码中，我有一个简单的 Swing 应用程序，它显示一个 JButton 并尝试每秒更改一次颜色。但是，仅应用了第一种颜色。任何人都可以就如何多次进行此更改提供任何建议吗？我正在运行 java 6.29。

```
public class NimbusTest3 extends JFrame {
    private javax.swing.JButton button;

    public NimbusTest3(){
        button = new javax.swing.JButton();
        button.setText("Text");
        this.add(button, BorderLayout.CENTER);
        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        this.pack();

        Timer t = new Timer(1000, new ActionListener() {
            Random r = new Random();
            @Override
            public void actionPerformed(ActionEvent e) {
                UIDefaults buttonDefaults = UIManager.getLookAndFeelDefaults();
                Color c = new Color(r.nextInt(
                        256), r.nextInt(256), r.nextInt(256));
                System.out.println(c);
                buttonDefaults.put("Button.background", c);
                button.putClientProperty("Nimbus.Overrides", buttonDefaults);
                button.putClientProperty("Nimbus.Overrides.InheritDefaults", false);
                SwingUtilities.updateComponentTreeUI(button);
                button.repaint();
            }
        });
        t.start();
    }

    public static void main(String args[]) {
        try {
            for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (Exception e) {
            return;
        } 

        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new NimbusTest3().setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T14:11:50.720

*   对于 Nimbus，您必须在[Nimbus 默认值](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html#primary)`SwingUtilities.updateComponentTreeUI(myButton);`的任何更改后调用

*   [关于背景和JPanel](https://stackoverflow.com/questions/8246589/how-to-change-the-background-color-for-jpanels-with-nimbus-look-and-feel)的这个线程的更多信息

*   阅读[Nimbus 外观和感觉](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html)

编辑 ：

我同意不可能改变那种直接的方式（也许还有另一个肮脏的黑客）有可能以非常复杂的方式（Nimbus L&F 的开发在上半年的某个地方结束），[另一个（类似的）问题是我关于字体的问题](https://stackoverflow.com/questions/9958004/change-font-at-runtime)

```
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;
import javax.swing.JFrame;
import javax.swing.LookAndFeel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.UIDefaults;
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;
import javax.swing.UnsupportedLookAndFeelException;

public class NimbusTest3 extends JFrame {

    private static final long serialVersionUID = 1L;
    private javax.swing.JButton button;

    public NimbusTest3() {
        button = new javax.swing.JButton();
        button.setText("Text");
        add(button);
        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        this.pack();
        Timer t = new Timer(1000, new ActionListener() {

            private Random r = new Random();

            @Override
            public void actionPerformed(ActionEvent e) {
                Color c = new Color(r.nextInt(256), r.nextInt(256), r.nextInt(256));
                try {
                    LookAndFeel lnf = UIManager.getLookAndFeel().getClass().newInstance();
                    UIDefaults uiDefaults = lnf.getDefaults();
                    uiDefaults.put("nimbusBase", c);
                    UIManager.getLookAndFeel().uninitialize();
                    UIManager.setLookAndFeel(lnf);
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }
                UIDefaults defaults = UIManager.getDefaults();
                defaults.put("Button.background", c);
                SwingUtilities.updateComponentTreeUI(button);
            }
        });
        t.start();
    }

    public static void main(String args[]) {
        try {
            for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (Exception e) {
            return;
        }

        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new NimbusTest3().setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:11:53.557

您需要添加这一行：

```
button.setBackground(c); 
```

到你的代码。其他代码 - `buttonDefaults`, `putClientProperty`, `updateComponentTreeUI`,`repaint`都不是必需的。

# facebook - 查询包含括号的facebook关键字

> ID：10686778
> 
> 赞同：1
> 
> 时间：2012-05-21T14:04:47.063
> 
> 标签：facebook, facebook-graph-api, ads, facebook-ads-api

我正在尝试使用 facebook ads api 查询 facebook 关键字。
我的问题是包含括号的关键字。我`urlencode`在将它发送到 facebook 之前的字符串，但它仍然无法正常工作。
例如，如果我想查询居住在美国并喜欢 Apple Inc. 的用户，我会查询以下 url：

```
https://graph.facebook.com/act_19720295/targetingsentencelines?targeting_spec={%22countries%22:[%22US%22],%22keywords%22:[%22Apple+Inc.%22]}&access_token=MY_ACCESS_TOKEN 
```

结果如下：

```
{
   "params": {
      "countries": [
         "US"
      ],
      "keywords": [
         "apple inc"
      ]
   },
   "targetingsentencelines": [
      "who live in the United States",
      "who like apple inc"
   ]
} 
```

如果我添加另一个包含括号“App Store (iOS)”的关键字，facebook 会忽略它：

```
https://graph.facebook.com/act_19720295/targetingsentencelines?targeting_spec={%22countries%22:[%22US%22],%22keywords%22:[%22Apple+Inc.%22,%22App+Store+%28iOS%29%22,%22%22]}&access_token=MY_ACCESS_TOKEN 
```

**我仍然得到相同的结果：**

```
{
   "params": {
      "countries": [
         "US"
      ],
      "keywords": [
         "apple inc"
      ]
   },
   "targetingsentencelines": [
      "who live in the United States",
      "who like apple inc"
   ]
} 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T15:00:22.717

在关键字 ("#app store (ios)") 之前添加 '#' 字符解决了这个问题。

# ssis - 具有较少列的平面文件连接的 SSIS pkg 将失败

> ID：10686785
> 
> 赞同：1
> 
> 时间：2012-05-21T14:05:20.393
> 
> 标签：ssis

假设一个平面文件 F1.txt、列 MyCol1 和一个包 Pkg1 将所述文件加载到 SQL 服务器。

没问题，对吧？对。

现在假设一个平面文件 F2.txt、列 MyCol1、MyCol2 和相同的包 Pkg1 将所述文件加载到 SQL 服务器。

我们将对 Pkg1 和 presto 进行一些调整 - 它加载 F2.txt 就像做梦一样。

现在我们喂它 F1.txt，这就是事情恶化的地方。

顺便说一句，这并不局限于平面文件，而是具有更一般的性质。

欢迎任何和所有关于如何在同一个包中运行遗留数据的建议。

TIA

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T05:12:33.117

看起来你在这里有两个问题。首先是了解如何使用连接管理器。对于平面文件输入，通常通过为每个文件布局创建一个连接管理器来为您提供更好的服务。文件 1 看起来像 (Column1) 而文件 2 看起来像 (Column1, Column2)？这意味着需要定义 2 个不同的平面文件连接管理器。

如果您有 2 个版本的文件 2，其中一个 Column1 包含数字，另一个 Column1 包含字符数据，则需要 2 个唯一的连接管理器（总共 3 个）。

与上述相关的好消息是文件名更改是微不足道的，并且不需要创建唯一的连接管理器。F1.txt、F1_20120501.txt、F1.good.txt 等都将由您为该布局定义的连接管理器提供服务。您只需在给定连接管理器的 ConnectionString 属性上使用表达式，即可在运行时更新当前包。

因此，现在您拥有所有这些平面文件连接管理器，您需要使用它们。这种神奇发生在数据流任务中。数据流对其中使用的元数据非常挑剔。当您设计数据流时，您正在与 SSIS 签订合同，如果您试图通过将字符字段设置为日期字段或不提供所有列来违反它，则包将无法通过验证检查，因为您没有持有讨价还价。对此的解决方案是，您将再次需要围绕您的包所需的各种连接管理器定义多个数据流。

定义完所有这些后，您只需要一个协调器来查看源文件以确定应该执行哪个数据流。我提供了一个关于这个问题的示例[Create SSIS package to import from one of many data sources](https://stackoverflow.com/questions/9082493/create-ssis-package-to-import-from-one-of-many-data-sources/9083370#9083370)

还有一个类似的问题，我提出了一个可能[对不一致的列计数导入的 SSIS 任务感兴趣的解决方案？](https://stackoverflow.com/questions/8168548/ssis-task-for-inconsistent-column-count-import/8173162#8173162)这实际上取决于您的处理规则。

如果您尝试在 SSIS 包中整合/重用业务逻辑，那么我会寻找一种使用各种数据流将离散源暂存为单一数据存储的方法（原始文件、具有大量空列的暂存表等） ）。

# javascript - 从 HTML 文本框到 Javascript var 的值

> ID：10686787
> 
> 赞同：0
> 
> 时间：2012-05-21T14:05:40.470
> 
> 标签：javascript

您好想将用户输入到文本框中的内容存储到我的 javascript var 中以传递给我的外部 PHP 页面，

如果我只定义 mySite= 22 之类的值，但不能从用户输入到文本框中的值，我可以传递变量。

请帮助我访问 texbox.value

```
 <form method="post" action="" onsubmit="submitFun(this)">
  <input type="text" name="order_IDsearch" id="order_IDsearch"onBlur="javascript:setmysite(this);">

    <input type="submit" />

     </form> 

  <script type="text/javascript">

   var mySite = '';
   function setmysite(v1) {

   var parent = document.getElementById('list');
   var element = parent.GetElementsByTagName('order_IDsearch')[0];

   mySite = element;

   }

   function submitFun(f1) {

   t = './get_order.php?s=' + mySite;
   t = encodeURI (t);
   f1.action = t; 
   f1.submit();
   return true;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:09:08.903

你可以试试 document.getElementById('order_IDsearch').value;

# editor - 如何在vim中为指定的文本着色？

> ID：10686792
> 
> 赞同：5
> 
> 时间：2012-05-21T14:05:49.317
> 
> 标签：editor, vim

每当我在 vim 中输入编程关键字时，它们都会得到特定的颜色。

我想创建自己的。

如何使用指定颜色为文本着色？

我试图找到答案，但还没有找到

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T14:12:13.120

扩展 C/CPP 语法（并且可以适用于任何语言，只需检查已经存在的名称，如`Constant`这里）：

在你的`~/.vimrc`

```
if has("autocmd")
    augroup filetypedetect
            au BufNewFile,BufRead *.myext    setf mysyntax
    augroup END
endif 
```

在你的`~/.vim/syntax/mysyntax.vim`

```
runtime! syntax/cpp.vim

syn keyword myConstant foo bar foobar quack
hi def link myConstant Constant 
```

从头开始创建新关键字：

```
syn match myKeyWord "foobar" contained
hi kwRed  term=standout ctermfg=12 guifg=Red
hi def link  myKeyWord  kwRed 
```

你可以用`filetypedetect`, 或直接在你的`.vimrc`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T14:21:30.753

要扩展特定的文件类型语法（例如 Java 的），请使用`:syntax`和`:highlight`。如果您只想为窗口中的特定单词着色，您可以快速使用`:match`，或任何可用的“多标记”插件，如[mark.vim](http://www.vim.org/scripts/script.php?script_id=2666)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T14:35:06.390

看着`match`

```
:match Identifier /\w\+/
:2match Keyword /\v(if|else|then|break)/ 
```

另请参阅`:hi`以查看突出显示组。或者，您可以编写一个语法文件，其中 /way/ 涉及更多

# java - 隐藏 JSP url 扩展名

> ID：10686794
> 
> 赞同：1
> 
> 时间：2012-05-21T14:05:53.853
> 
> 标签：java, jsp, jakarta-ee, struts

如何更改以下 JSP：

```
http://localhost/test/user/people/something.do?method=delete 
```

对此：

```
http://localhost/test/user/people/ 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:14:38.463

您需要查看 URL 重写。有两种流行的解决方案。

1.  基于 Apache 的[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)
2.  基于 Servlet 过滤器的[UrlRewriteFilter](http://www.tuckey.org/urlrewrite/)

您可以公开一个 URL，例如`http://www.example.com/test/user/profile/delete`并将其在内部重新写入`http://www.example.com/test/user/profile`/something.do?method=delete。

# php - 警告：mysql_fetch_object()：提供的参数不是有效的 MySQL 结果资源

> ID：10686798
> 
> 赞同：-4
> 
> 时间：2012-05-21T14:06:10.767
> 
> 标签：php, mysql, html

> **可能重复：**
> [警告：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果](https://stackoverflow.com/questions/795746/warning-mysql-fetch-array-supplied-argument-is-not-a-valid-mysql-result)

当我尝试将 MySQL 记录集作为对象获取时，我收到以下警告：

```
Warning: mysql_fetch_object(): supplied argument is not a valid MySQL result resource in/home/bbbbb/public_html/curl.php on line 24 
```

我该如何解决这个问题？

这是脚本：

```
<?php
$mysqlhost="....."; // Host name 
$mysqluser="...."; // Mysql username 
$mysqlpasswd="....."; // Mysql password 
$mysqldbname="......"; // Database name 

//$post_item[]='username='.$_POST['username'];
$username=$_POST['username']; 

$con = @mysql_pconnect($mysqlhost, $mysqluser, $mysqlpasswd);
  if(!$con) {
echo "Mysql error: " . mysql_error();
  exit();
  }

mysql_select_db($mysqldbname);

$mysqlt = "dle_users"; ///Your table////

$abfrage = "SELECT * FROM `$mysqlt`";
$ergebnis = mysql_query($abfrage);
$tb = array();
while($row = mysql_fetch_object($ergebnis))
  {
$tb[] = $row->username;
 }
if (!in_array($username, $tb)) {
return false;
echo "Wrong Username or Password";
  }
 else {
echo "Login Successful";
 return true;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:08:38.097

尝试：

```
...
$ergebnis = mysql_query($abfrage);
if (false === $ergebnis){
  echo mysql_error(); 
  exit; 
}
... 
```

并显示结果。

# php - PHP 脚本只输出 1 个条目，应该是 3 | WordPress

> ID：10686801
> 
> 赞同：0
> 
> 时间：2012-05-21T14:06:44.590
> 
> 标签：php, arrays, while-loop, wordpress

我正在使用以下脚本将 3 个条目输出到我的 WordPress 页面上。

**但是，由于某种原因，它只输出该列表中的第一个条目。我在数组中移动了数字，它仍然只输出 1 `<div>`。** 尽管肯定有 ID 为 1、4 和 31 的帖子。

任何想法如何解决这一问题？

```
 <?php $thePostIdArray = array("1","4","31"); ?>
        <?php $limit = 3; ?>
        <?php if (have_posts()) : ?>
            <?php while (have_posts()) : the_post(); $counter++; ?>
                <?php if ( $counter < $limit + 1 ): ?>
                    <div class="post" id="post-<?php the_ID(); ?>">
                    <?php $post_id = $thePostIdArray[$counter-1]; ?>
                    <?php $queried_post = get_post($post_id); ?>
                    <h2><?php echo $queried_post->post_title; ?></h2>
                    </div>
                <?php endif; ?>
            <?php endwhile; ?>
        <?php endif; ?> 
```

非常感谢您的任何指点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:16:46.550

我会这样做：

```
<?php 
$thePostIdArray = array(1, 4, 31);
$limit = 3; 
$counter = 0;

foreach( $thePostIdArray as $post_id ){
        $counter++;

        if ( $counter > $limit )
            break;

        $queried_post = get_post($post_id);
        echo '<div class="post" id="post-'.$post_id.'">
                <h2>'.$queried_post->post_title.'</h2>
              </div>';    

} // endforeach
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:27:27.333

您使用计数器和 get_post 有什么特别的原因吗？如果不是，那么执行以下操作会简单得多：

```
<?php 
$post_ids = array(1, 4, 31);

//Use post__in to grab the posts that you're interested in (stored in the variable above) and posts_per_page to specify that you want to show all posts.  You can use other parameters for ordering etc if you want

query_posts(array('post__in' => $post_ids 'posts_per_page' => -1)); 

if (have_posts()) : while (have_posts()) : the_post(); ?>

<?php the_title();?>
    //Use regular wordpress template tags here - no real need to use get_post

<?php endwhile; ?>
<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T14:21:49.863

`have_posts()`是 Wordpress 如此亲切地称呼它的“循环”的一部分。您的代码不会修改此循环。将帖子默认设置为根据您正在查看的页面设置帖子数据。对于静态编码的东西，试试这个：

```
<?php $PostIdArray = array(1, 4, 31);
foreach($PostIdArray as $ID) {
    $my_post = get_posts($ID); ?>
    <div class="post" id="post-<?php echo $ID; ?>">
    <h2><?php echo $my_post->post_title; ?></h2>
    </div>
<?php
}
?> 
```

# c++ - Qt Creator：通过 SIGSEGV (C++) 的分段错误

> ID：10686804
> 
> 赞同：2
> 
> 时间：2012-05-21T14:07:09.120
> 
> 标签：c++, qt, segmentation-fault

在谷歌搜索之后，我发现当程序被指向使用它无权访问的内存时会给出分段错误。

在我尝试制作一个自定义按钮类后，我最近开始遇到这些错误，该类将在其 clicked() 信号中包含一个整数。

这是自定义按钮类：

### 。H：

```
#include <QtGui>

#ifndef CUSTOMBUTTON_H
#define CUSTOMBUTTON_H

class CustomButton : public QPushButton        //This simple class allows us to map arguments in the Widget's cicked() signal.
{                                              //In the project, it's used in the delete-edit buttons so the program knows which part of the Movie/Theater/Screening list we're referring to
 Q_OBJECT

public:
 CustomButton(QString name,int num, QWidget *parent = 0);

signals:
 void clicked(int pos);

private:
 QSignalMapper *signalMapper;
};

#endif // CUSTOMBUTTON_H 
```

### .cpp：

```
#include "custombutton.h"

CustomButton::CustomButton(QString name,int num = 0, QWidget *parent) //Our constructor
    : QPushButton(name,parent)
{   //Our button's now created and shown, through the superconstructor. Let's take care of its clicked() signal.

    signalMapper = new QSignalMapper(this);

    connect(this, SIGNAL(clicked()), signalMapper, SLOT(map()));
    signalMapper->setMapping(this, num);

    connect(signalMapper, SIGNAL(mapped(int)),this, SIGNAL(clicked(int)));

} 
```

然后在我的主要代码中：

```
CustomButton *edit_button = new CustomButton("Edit",i,0);
edit_button->setFixedWidth(30);
connect(edit_button,SIGNAL(clicked(int)),this,SLOT(edit_movie(int))); //When the user decides to edit a movie, we set the class'es working_with var to the position of the film in the MovieList and we set the screen to the appropriate one.

CustomButton *del_button = new CustomButton("Delete",i,0);            //We pass i as an argument to the button, so it can relate to the movie it's set next to.
del_button->setFixedWidth(45);
connect(del_button,SIGNAL(clicked(int)),this,SLOT(del_movie(int))); 
```

其中 i 是我希望它在信号中包含的数字。

事情是，通过调试器，如果我按下删除按钮，它不会给我一个段错误。这一切都发生在编辑之一。

由于我仍然很困惑并且在我什至不知道要问什么的情况下，如果您需要我的其他任何东西，请说出来，我会提供。

这是回溯，我不知道如何阅读：

```
0 QHash<QObject*, QString>::findNode qhash.h 884 0×69e98594
1 QHash<QObject*, QString>::contains qhash.h 874 0×69e98568
2 QSignalMapper::map qsignalmapper.cpp 267 0×69debe0c
3 QSignalMapper::map qsignalmapper.cpp 257 0×69debda2
4 QSignalMapper::qt_static_metacall moc_qsignalmapper.cpp 64 0×69debfce
5 QMetaObject::activate qobject.cpp 3547 0×69de9baf
6 QAbstractButton::clicked moc_qabstractbutton.cpp 220 0×10cb4b8
7 QAbstractButtonPrivate::emitClicked qabstractbutton.cpp 548 0xe2e517
8 QAbstractButtonPrivate::click qabstractbutton.cpp 541 0xe2e495
9 QAbstractButton::mouseReleaseEvent qabstractbutton.cpp 1123 0xe2f941
10 QWidget::event qwidget.cpp 8362 0xae63de
11 QAbstractButton::event qabstractbutton.cpp 1082 0xe2f7cc
12 QPushButton::event qpushbutton.cpp 683 0xecfeba
13 QApplicationPrivate::notify_helper qapplication.cpp 4554 0xa9c020
14 QApplication::notify qapplication.cpp 4097 0xa9a26a
15 QCoreApplication::notifyInternal qcoreapplication.cpp 876 0×69dd3b76
16 QCoreApplication::sendSpontaneousEvent qcoreapplication.h 234 0×113137e
17 QApplicationPrivate::sendMouseEvent qapplication.cpp 3163 0xa98ad6
18 QETWidget::translateMouseEvent qapplication_win.cpp 3363 0xb03171
19 QtWndProc qapplication_win.cpp 1696 0xafdf66
20 USER32!IsDialogMessageW C:\Windows\syswow64\user32.dll 0 0×76726238
21 USER32!RegisterSystemThread C:\Windows\syswow64\user32.dll 0 0×767278b0
22 ?? 0 0×30000
23 USER32!AllowForegroundActivation C:\Windows\syswow64\user32.dll 0 0×767268ea
24 qt_is_translatable_mouse_event qapplication_win.cpp 1463 0xafd465
25 USER32!GetMessageExtraInfo C:\Windows\syswow64\user32.dll 0 0×76727d31
26 ?? 0 
```

有什么可能导致问题的原因吗？正如我所说，只有当我通过调试器运行程序并按下 CustomButton 类的“编辑”按钮时，才会发生段错误。***当我正常构建和运行时，程序运行 9/10 次。有时，单击编辑按钮会导致崩溃。这种不稳定的行为是导致我在这里寻求帮助的原因。***

当我单击按钮时，我被带到一个新屏幕，我怀疑问题可能出在析构函数上？空白析构函数是否正确解构 CustomButton 类对象的元素，因为实际对象已传递给基类构造函数？也许我那里有泄漏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T14:30:03.143

除非知道在哪里创建对象，否则很难说出 QSignalMapper 中为什么存在段错误。指向信号映射器的指针可能在某个时间点无效，因此可能存在不需要的删除。

在某些情况下，完全重建您的应用程序可能会有所帮助。还重新运行**qmake**。当您无法解释为什么存在段错误时，就应该在您的清单上……；）

QSignalMapper 有一个替代方案：保持你的信号 clicked(int) 并实现一个私有插槽：

```
private slots:
    this_clicked() {
        emit clicked(num);
    } 
```

然后放入构造函数：

```
connect(this, SIGNAL(clicked()), SLOT(this_clicked())); 
```

# asp.net - ASP.NET 更新面板不工作

> ID：10686808
> 
> 赞同：0
> 
> 时间：2012-05-21T14:07:24.070
> 
> 标签：asp.net, visual-studio-2010, updatepanel

我添加了一个`UpdatePanel`包围 GridView 并给它两个触发器，它们是 UpdatePanel 之外的按钮。我无法获得按钮单击事件来触发 GridView 异步刷新。

我确定数据源正在更新，因为 F5 页面刷新显示了新数据（通过文本字段提交）

我也尝试过以编程方式更新`UpdatePanel`文件 ( ) 后面的代码中的 ，`UpdatePanel1.Update();`但也没有这样做。

这是我的代码：

```
<%@ Page Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true"
    CodeFile="GamePage.aspx.cs" Inherits="GamePage" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="Server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <span id="userGuess">
        <asp:Label ID="gameStatusLabel" runat="server" CssClass="guesses" Text="15">   
        </asp:Label>
        <asp:Label ID="guessLabel" runat="server" Text="Enter your guess:" 
            CssClass="guessLabel"></asp:Label>
        <asp:TextBox ID="GuessTxtBx" runat="server" MaxLength="4"></asp:TextBox>
        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
            ControlToValidate="GuessTxtBx"
            ErrorMessage="Don't forget to guess!" CssClass="error" Visible="True" 
            Display="Dynamic"></asp:RequiredFieldValidator>
        <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" 
            ControlToValidate="GuessTxtBx"
            ErrorMessage="Your guess must be a four digit number" 
            ValidationExpression="\d{4}"
            CssClass="error" Visible="True" Display="Dynamic"></asp:RegularExpressionValidator>
        <span class="guessBtns">
            <asp:Button ID="SubmitBtn" runat="server" OnClick="SubmitBtn_Click" 
                Text="Submit Guess"/>
            <asp:Button ID="newGameButton" runat="server" OnClick="newGameButton_Click" 
                Text="New Game" /></span>
    </span>
    <div>
        The game history:<br />
        <br />
        <asp:UpdatePanel ID="UpdatePanel1" runat="server" ChildrenAsTriggers="false" 
                UpdateMode="Conditional">
            <ContentTemplate>
                <asp:GridView ID="TurnGridView" runat="server" AutoGenerateColumns="False" 
                    DataKeyNames="turnID"
                    DataSourceID="TurnsDataSource1" Height="133px" Width="446px" 
                        CssClass="table3">
                    <Columns>
                        <asp:BoundField DataField="turnID" HeaderText="turnID" 
                            InsertVisible="False" ReadOnly="True"
                            SortExpression="turnID" Visible="False" />
                        <asp:BoundField DataField="gameID" HeaderText="gameID" 
                            SortExpression="gameID" Visible="False" />
                        <asp:BoundField DataField="guess" HeaderText="Your Guess" 
                            SortExpression="guess" />
                        <asp:BoundField DataField="responseBulls" HeaderText="Bulls" 
                            SortExpression="responseBulls" />
                        <asp:BoundField DataField="responseCows" HeaderText="Cows" 
                            SortExpression="responseCows" />
                    </Columns>
                </asp:GridView>
                <asp:ObjectDataSource ID="TurnsDataSource1" runat="server" 
                    SelectMethod="GetTurnsByGameID"
                    TypeName="BusinessTier.Turn"   
                    OldValuesParameterFormatString="original_{0}" 
                    onselecting="TurnsDataSource1_Selecting">
                    <SelectParameters>
                        <asp:Parameter Name="gameID" Type="Int32" />
                    </SelectParameters>
                </asp:ObjectDataSource>
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="SubmitBtn" EventName="Click"/>
                <asp:AsyncPostBackTrigger ControlID="newGameButton" EventName="Click" />
            </Triggers> 
        </asp:UpdatePanel>
    </div>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:18:46.237

您可能遇到了被吞下的服务器端错误。要查看错误消息，最简单的方法是将您的临时替换`AsyncPostBackTrigger`为`PostBackTrigger`.

# java - 如何以正确的方式处理超过锁定等待超时？

> ID：10686809
> 
> 赞同：3
> 
> 时间：2012-05-21T14:07:25.150
> 
> 标签：java, mysql, hibernate, jpa

我正在运行一项导入工作，该工作一直运行良好，直到几天前实体数量急剧增加。

发生的事情是我得到了一个 Lock wait timeout exceeded 。然后应用程序重试并抛出异常，因为我调用**了 em.getTransaction().begin();** 再一次。

为了摆脱这个问题，我将**innodb_lock_wait_timeout**更改为 120 并将批处理端降低到 50 个实体。

我不知道如何在代码中正确处理所有这些。我不希望整个导入因为锁定而失败。你会怎么处理这个？你有任何代码示例吗？也许还有其他想法？请发疯！

**我的 BatchPersister：**

```
public class BatchPersister implements Persister {

    private final static Log log = getLog(BatchPersister.class);
    private WorkLogger workLog = WorkLogger.instance();

    private static final int BATCH_SIZE = 500;

    private int persistedObjects;
    private long startTime;
    private UpdateBatch batch;
    private String dataSource;

    public BatchPersister(String dataSource) {
        this.dataSource = dataSource;        
    }

    public void persist(Persistable obj) {

        persistedObjects++;
        logProgress(100);

        if (batch == null)
            batch = new UpdateBatch(BATCH_SIZE, dataSource);

        batch.add(obj);

        if (batch.isFull()) {
            batch.persist();
            batch = null;
        }
    }
} 
```

**更新批次**

```
public class UpdateBatch {

    private final static Log log = LogFactory.getLog(UpdateBatch.class);
    private WorkLogger workLogger = WorkLogger.instance();

    private final Map<Object, Persistable> batch;
    private final EntityManager em;
    private int size;

    /**
     * Initializes the batch and specifies its size.
     */
    public UpdateBatch(int size, String dataSource) {
        this.size = size;
        batch = new LinkedHashMap<Object, Persistable>();
        em = EmFactory.getEm(dataSource);
    }    

    public void persist() {
        log.info("Persisting " + this);
        em.getTransaction().begin();    
        persistAllToDB();
        em.getTransaction().commit();

        WorkLog batchLog = new WorkLog(IMPORT_PERSIST, IN_PROGRESS);
        batchLog.setAffectedItems(batch.size());
        workLogger.log(batchLog);
        em.close();
   }

/**
  * Persists all data in this update batch
  */
    private void persistAllToDB() {
        for (Persistable persistable : batch.values())
            em.persist(persistable);
        }

        @Override
        public String toString() {
            final ArrayList<Persistable> values = new ArrayList<Persistable>(batch.values());
            Persistable first = values.get(0);
            Persistable last = values.get(values.size() - 1);
            return "UpdateBatch[" +
                first.getClass().getSimpleName() + "(" + first.getId() + ")" +
                " - " +
                last.getClass().getSimpleName() + "(" + last.getId() + ")" +
                "]";
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:10:46.580

**解决方案 1.** 不要使用 JPA，它不是为处理大量数据库操作而设计的。由于您可以访问您的数据源并且您正在手动管理事务，因此没有什么可以阻止您使用普通的旧 SQL。

**解决方案 2.** 可能存在与持久化上下文一级缓存相关的性能问题 - 每个持久化实体都保存在该缓存中，当该缓存变大时可能会损害性能（主要是内存）

为了改善情况，将 hibernate.jdbc.batch_size 属性（或等效的，如果您不使用 JPA 的 Hibernate 实现）设置为或多或少 20 - 由于查询将在 20 个查询包中发送到数据库。

其次，每 20 次操作清理持久化上下文，强制与数据库同步。

```
private void persistAllToDB() {
    int counter = 0;
    for (Persistable persistable : batch.values())
        em.persist(persistable);
        counter++;
        if(counter % 20 == 0){
           em.flush();
           em.clear();
        }
    }
} 
```

**解决方案 3.** 调整 MySQL InnoDB 引擎 [http://dev.mysql.com/doc/refman/5.1/en/insert-speed.html, http://dev.mysql.com/doc/refman/5.0/en/ innodb-tuning.html]。如果您的表被大量索引，则可能会损害插入性能。

这是我的猜测，希望对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T22:00:34.213

Pitor 已经提出了几个选项。我要指出的是，他的“解决方案 2”的一个变体是利用 Hibernate StatelessSession api，而不是使用 Session 和清除。

但是，您应该考虑的另一件事是事务是一组预计会失败或成功的语句。如果您有一堆语句，而中间有一个语句失败，并且您希望前面的所有语句都是持久的，那么您不应该将它们组合在一个事务中。在事务中正确分组您的报表。一般来说，无论如何在 Hibernate 中启用 jdbc 批处理是个好主意。它通常会导致更有效的数据库通信。

# javascript - JQuery Mobile：操作 DOM 后访问 ID

> ID：10686810
> 
> 赞同：0
> 
> 时间：2012-05-21T14:07:25.587
> 
> 标签：javascript, jquery, ajax, jquery-mobile

我正在使用 AJAX 请求将一些页面添加到我的 JQuery 移动网站中。但是在添加按钮后，我无法使用我之前设置的类访问那些。有没有办法通知 JQuery 我更新了 DOM 并且该类有新按钮？

添加按钮：

```
echo "<a data-role=\"button\" class=\"delbtn\" data-transition=\"fade\" data-icon=\"delete\">Delete</a>"; 
```

访问按钮：

```
$(".delbtn").click(function(){
  //some action.. 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:30:41.390

[http://jsfiddle.net/MEXhE/1/](http://jsfiddle.net/MEXhE/1/)

```
$(".delbtn").live('click',function(){
    alert("clicked");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:23:55.970

您必须绑定实时事件处理程序（[jQuery ON](http://api.jquery.com/on/)），因为您的按钮是动态添加的

```
$(document).on("click",".delbtn", function(){
  //some action.. 
}); 
```

# c# - wpf 中 OnPaintBackground 的替代品。

> ID：10686813
> 
> 赞同：2
> 
> 时间：2012-05-21T14:07:34.820
> 
> 标签：c#, wpf, winforms

有一个 Windows 窗体应用程序，我正在尝试将其转换为 wpf ，但是当我使用主窗口覆盖 onPaintBackground 时

```
protected override void OnPaintBackground(PaintEventArgs pevent) 
```

有错误

> 找不到合适的方法来覆盖

那么 wpf 中 onPaintBackground 的替代方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:46:35.523

In general you shouldn't 'paint' in WPF. Because it can be very slow to continuously recreate the objects (Pens, brushes, shapes).

You can override the [OnRender](http://msdn.microsoft.com/en-us/library/system.windows.uielement.onrender) method, example from this page:

```
protected override void OnRender(DrawingContext dc)
{
    SolidColorBrush mySolidColorBrush  = new SolidColorBrush();
    mySolidColorBrush.Color = Colors.LimeGreen;
    Pen myPen = new Pen(Brushes.Blue, 10);
    Rect myRect = new Rect(0, 0, 500, 500);
    dc.DrawRectangle(mySolidColorBrush, myPen, myRect);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T17:23:39.883

你真的不想用 WPF 来做这件事。重写 OnRender 有充分的理由，但作为绘制背景的替代品并不是其中之一。WPF 是一种保留模式的图形系统，而 WinForms 是一种即时模式的系统。您需要在此处阅读差异：

[http://msdn.microsoft.com/en-us/library/ff684178%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ff684178%28v=vs.85%29.aspx)

而对于 WinForms，如果您想为控件设置动画，您首先需要清除之前渲染它的区域以避免伪影，而对于 WPF，您只需为您想要的属性设置动画并让系统处理使像素无效。

# python - 如何增加 sprite inpygame 的大小？

> ID：10686822
> 
> 赞同：0
> 
> 时间：2012-05-21T14:07:53.133
> 
> 标签：python, pygame

我正在用python制作一个简单的游戏。不幸的是，精灵图像太小了。如何将精灵图像（GrassTile）从 8x8 增加到 16x16。我不太确定如何使用转换模块。

我已经尝试过了

```
pygame.transform.scale(grasstile, (16, 16), DestSurface = None): return grasstile 
```

并得到一个无效的语法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:16:36.973

像这样调用你的函数：

```
biggrasstile = pygame.transform.scale(grasstile, (16, 16)) 
```

（看起来你只是复制了方法签名）

# vb.net - MenuItem 多个父项

> ID：10686824
> 
> 赞同：-1
> 
> 时间：2012-05-21T14:07:54.900
> 
> 标签：vb.net, contextmenu, selection, menuitem, multipleselection

我有一个在右键单击 datagridview 时出现的菜单项。用户将鼠标悬停在菜单项上，然后出现其他菜单项的列表，再次重复。给这样的东西。

```
---------
|  FOO  |---------
---------|  BAR  |------------
          ---------|  FOOBAR  |
                   ------------ 
```

仅在第 3 层处理一个事件 (addressof)。话虽如此，我需要从 FOOBAR 中获取 parent.name 和所述父母（祖父母）的 parent.name。

这是我所在的位置：

```
If currentMouseRow >= 0 AndAlso currentMouseColumn <= 1 Then
            dataGridView_monitorMapping.Rows(currentMouseRow).Selected = True
            mainMenu.MenuItems.Add(New MenuItem("Set Monitor(s) Settings"))
            mainMenu.MenuItems.Add(New MenuItem("Sync Monitor Mapping View", AddressOf triggerSync))
            'list avaliable priorites
            For Each priorityRow As DataRow In priorityTypesDS.Tables(0).Rows
                Dim rowPriortiyName As String = CStr(priorityRow("Priority"))
                Dim subMenu_priorities_item As New MenuItem(rowPriortiyName)
                mainMenu.MenuItems(0).MenuItems.Add(subMenu_priorities_item)
                'list avaliable boards
                For Each boardRow As DataRow In serviceBoardDS.Tables(0).Rows
                    Dim rowBoardName As String = CStr(boardRow("SvcBrd"))
                    Dim subMenu_boards_item As New MenuItem(rowBoardName)
                    subMenu_priorities_item.MenuItems.Add(subMenu_boards_item)
                    'list avaliable types based on board
                    If rowBoardName IsNot Nothing Then
                        Dim availableSvcTypes As DataSet = GetServiceTypes(_objhost, serviceTypes, rowBoardName)
                        For Each svcTypeRow As DataRow In availableSvcTypes.Tables(0).Rows
                            Dim rowSvcTypeName As String = CStr(svcTypeRow(1))
                            Dim subMenu_svcType_item As New MenuItem(rowSvcTypeName, AddressOf triggerSync)
                            subMenu_boards_item.MenuItems.Add(subMenu_svcType_item)
                        Next
                    End If
                Next
            Next
            mainMenu.Show(dataGridView_monitorMapping, New Point(e.X, e.Y))
        End If 
```

和事件处理程序

```
Public Sub updateMultiRowSettingChange(ByVal Sender As System.Object, ByVal e As System.EventArgs)
    'TODO | Handle selection from right click menu.
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:19:08.337

像这样的东西应该让你得到你正在寻找的东西：

```
Public Sub updateMultiRowSettingChange(ByVal Sender As System.Object, ByVal e As System.EventArgs)
    Dim item As MenuItem = CType(sender, MenuItem)
    Dim parent As MenuItem = CType(item.Parent, MenuItem)
    Dim grandparent As Menu = parent.Parent
End Sub 
```

但是，将菜单项上的标签设置为您需要知道它来自何处的任何信息可能更简单，然后您可以`item.Tag`在将其转换为 MenuItem 类后进行检查。

# c# - C#中的成员变量与输出参数

> ID：10686826
> 
> 赞同：0
> 
> 时间：2012-05-21T14:07:58.453
> 
> 标签：c#, c#-4.0

哪一个更好？在类中声明成员变量或返回方法的参数？性能方面哪个更好。

```
class A{ 
    //Declaring member variable
    private string name;
    private int age; 

    private method Display()
    { 
        Passing(); 
        Console.Write("{0}-{1}",name,age); 
    }

    private void Passing() 
    { 
        name = "Hello World"; 
        age = 21; 
    }
} 
```

或者

```
class A{
    //out parameter implementation 
    private method Display()
    { 
        string name= string.Empty; 
        int age = 0; 

        Passing(out name,out age); 

        Console.Write("{0}-{1}",name,age); 
    }

    private void Passing(out string name,out int age) 
    { 
        name = "Hello World"; 
        age = 21; 
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T14:10:33.467

没有一个。我会去：

```
class A
{
    private void Display()
    {
        string name = Passing();
        Console.WriteLine(name);
    }
    private string Passing()
    {
        return "Hello world";
    }
} 
```

如果你想返回不止一个东西，我会把它封装在一个像这样的对象中：

```
class A
{
    private void Display()
    {
        var person= Passing();
        Console.WriteLine(person.Name + ": " + person.Age);
    }
    private Person Passing()
    {
        return new Person() {Name = "John Doe", Age = 99 };
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T14:10:13.677

嗯，也没有。为什么没有返回值？

```
class A
{
    private void Display()
    {
        string name = GetString();
        Console.Write(name);
    }

    private string GetString()
    {
        return "Hello World";
    }
} 
```

不确定您要在这里实现什么。

好的，现在我们知道您要实现的目标，如果该方法纯粹是类内部的，那么它取决于您返回的值的范围。如果它们在逻辑上包含在类中，请使用成员变量。如果它们的范围仅用于方法中的内部使用，请使用 out 参数或自定义类型作为返回值（`Tuple<>`此处可以使用 a）。

你甚至可以使用匿名类型，但正如 Jon Skeet 所逃避的那样，它有点 hacky：

[https://msmvps.com/blogs/jon_skeet/archive/2009/01/09/horrible-grotty-hack-returning-an-anonymous-type-in​​stance.aspx](https://msmvps.com/blogs/jon_skeet/archive/2009/01/09/horrible-grotty-hack-returning-an-anonymous-type-instance.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T14:09:21.577

肯定是前者。使用 out 参数通常不是一个好主意。不要误会我的意思，out 参数有它们的用途，但在这种情况下设置状态的情况下不要使用它们。它们适用于 TryParse 之类的东西，您可以在其中返回一个布尔值，指示解析是否成功，然后在输出参数中返回解析结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T14:23:29.820

我的偏好是：

```
class A
{
    private static void Main(string[] args)
    {
        Passing passing = new Passing("Hello World");
        Console.WriteLine(passing);
     }
}

class Passing
{
    public Passing(string name)
    {
        Name = name;
    }

    public string Name { get; private set; }

    public override string ToString()
    {
        return string.Format("Name: {0}", Name);
    }
} 
```

# javascript - JSON 中是否可以引用？

> ID：10686827
> 
> 赞同：10
> 
> 时间：2012-05-21T14:08:00.417
> 
> 标签：javascript, json, reference

是否可以在 JSON 中分配对对象的引用？我的数据如下所示：

```
[{
  name:"name",
  Parent:[{
    name:"parentName"
    Parent:[{
       .....//and so on
    }]
  }]
}] 
```

我需要在 JavaScript 中遍历它并更改人的`name`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-02-10T10:25:43.263

旧问题，但一些可能的新答案，如**JSON 规范**和**JSON 参考** [https://json-spec.readthedocs.io/reference.html](https://json-spec.readthedocs.io/reference.html)

```
[{
  "name": "John",
 },
 {
  "name" : "Jack",
  "parent": {"$ref": "#/0"}
 },
 ...
] 
```

或者可能更好地使用**JSON 路径**语法[http://goessner.net/articles/JsonPath/](http://goessner.net/articles/JsonPath/)

```
[{
  "name": "John",
 },
 {
  "name" : "Jack",
  "parent": {"$ref": "$.[?(@.name=='John')]"}
 }, 
...
] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-21T14:12:59.523

你不能。您可以将父级的路径指定为字符串并在运行时对其进行评估，但由于 JSON 只是字符串、整数、数组和字典，因此您不能使用引用。

# php - 设置 __autoload 以使用类的私有函数

> ID：10686828
> 
> 赞同：0
> 
> 时间：2012-05-21T14:08:04.803
> 
> 标签：php, oop, encapsulation, autoload

我有一个带有私有函数的类，我不想直接调用它。

**示例类：**

```
class Importer{
    private function import(){}
} 
```

现在我想发送一个传递给`__autoload()`类`import`函数的参数`Importer`。
我也知道经常调用私有函数是不可能且不合逻辑的，但是您知道保持`import()`私有或防止​​直接访问的任何解决方案或技巧吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:26:16.027

```
class Importer {
    public function __construct() {
        spl_autoload_register( array($this, 'import') );
    }

    private function import($class) {
        include $class . '.php';
    }
}

$importer = new Importer();

$obj = new testclass();

var_dump($obj); 
```

输出

> 对象（测试类）#2 (0) { }

# jquery - Jquery addClass 不工作（是的，我看过很多以前的 q 和 a 并且没有喜悦

> ID：10686842
> 
> 赞同：0
> 
> 时间：2012-05-21T14:08:46.360
> 
> 标签：jquery, addclass

我最初只是想添加淡入淡出功能，但没有奏效，所以我求助于这个。我对任何页面中任何元素上的任何选择器都不满意，我很困惑。我正在使用其他 jquery 库，想知道那里是否存在冲突，但在另一个站点中，我使用所有相同的 jquery 库 - 循环、缓动等并且没有冲突。

这是代码：

```
<script type="text/javascript">
$('.boda').click(function()
{

$('.fili1').addClass('appear');
});
</script>

<body onload="DrawCaptcha();">
<div id="top-bg">
    <div class="navcontainer">
        <div class="logo"><img src="graphics/logo.png" alt="logo" width="250" height="100"></div>
        <div class="fili1"><img src="graphics/filigree2.png" alt="filigree" width="90" height="120" /></div>
        <div id="nav">
            <ul>
                <li><a href="#" title="comenzar" onClick="colorFade('top-bg','background','','999999')">HOME</a></li>

                <li><a href="#" title="nuestra oferta" onClick="colorFade('top-bg','background','','999999')">SERVICIOS</a></li>

                <li><span><a href="#" class="boda" title="el dia de tu vida" onClick="colorFade('top-bg','background','999999','ffffff')">Bodas</a></span></li>

                <li><a href="#" title="envia un mensaje" onClick="colorFade('top-bg','background','','999999')">CONTACTO</a></li>
            </ul>
        </div>
    </div>
</div> 
```

CSS：

```
.fili1 {
background-color: none;
position:absolute;
top:10px;
right:10px;
opacity:0;
}

.appear {
opacity1;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:12:07.817

`.appear {opacity1;}`

变成：

```
.appear {
   opacity:1;
} 
```

**但是......**你可以这样做`.toggle()`：

```
$('.boda').click(function(e){
  $('.fili1').toggle();
  return false;
}); 
```

[演示](http://jsbin.com/azagit/edit#javascript,html,live)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:10:30.517

代码示例中的第五行应为

```
$('.fili1').addClass('appear'); 
```

注意类名前面的点。它也应该是`opacity:1;`（注意`:`）。

这是一个工作示例：http: [//jsfiddle.net/xZ6Kr/](http://jsfiddle.net/xZ6Kr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T14:10:55.103

你的选择器是错误的。请阅读[选择器](http://api.jquery.com/category/selectors/)。

```
$('fili1').addClass('appear'); 
```

应该

```
$('.fili1').addClass('appear'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T14:11:58.770

真的吗？看一个点：

```
$('.fili1').addClass('appear'); // instead of $('fili1').addClass('appear'); 
```

祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T14:19:20.613

尝试这个

```
<script type="text/javascript">

$(document).ready(function(){

    $('.boda').click(function()
    {

        $('.fili1').addClass('appear');
        return false;
    });

});
</script> 
```

并且

```
.appear {
   opacity:1;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T14:10:14.860

如果那是您的代码，则 .appear 类错误应该是 opacity: 1;

# google-apps-script - 如何更改 TabPanel 颜色？

> ID：10686845
> 
> 赞同：0
> 
> 时间：2012-05-21T14:09:00.650
> 
> 标签：google-apps-script

使用 TabPanel 默认值，我只会为选项卡获得浅蓝色。有没有办法改变它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T18:53:11.647

您可以在 TabPanel 上设置 CSS 样式，但它们只影响顶级包装元素：

[https://developers.google.com/apps-script/class_tabpanel#setStyleAttribute](https://developers.google.com/apps-script/class_tabpanel#setStyleAttribute)

无法修改子元素的样式，例如选项卡本身。

# python - 快速分类（分箱）

> ID：10686847
> 
> 赞同：2
> 
> 时间：2012-05-21T14:09:06.477
> 
> 标签：python, optimization, numpy, binning

我有大量的条目，每一个都是一个浮点数。这些数据`x`可以通过迭代器访问。我需要使用选择对所有条目进行分类，例如`10<y<=20`, `20<y<=50`, ....`y`来自其他可迭代对象的数据在哪里。条目的数量远远超过选择的数量。最后，我想要一本字典，例如：

```
{ 0: [all events with 10<x<=20],
  1: [all events with 20<x<=50], ... } 
```

或类似的东西。例如我在做：

```
for x, y in itertools.izip(variable_values, binning_values):
    thebin = binner_function(y)
    self.data[tuple(thebin)].append(x) 
```

一般来说`y`是多维的。

这很慢，是否有更快的解决方案，例如使用 numpy？我认为问题来自`list.append`我正在使用的方法，而不是来自`binner_function`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:41:15.800

A fast way to get the assignments in numpy is using `np.digitize`:

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.digitize.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.digitize.html)

You'd still have to split the resulting assignments up into groups. If `x` or `y` is multidimensional, you will have to flatten the arrays first. You could then get the unique bin assignments, and then iterate over those in conjunction with `np.where` to split the the assigments up into groups. This will probably be faster if the number of bins is much smaller than the number of elements that need to be binned.

As a somewhat trivial example that you will need to tweak/elaborate on for your particular problem (but is hopefully enough to get you started with with a numpy solution):

```
In [1]: import numpy as np

In [2]: x = np.random.normal(size=(50,))

In [3]: b = np.linspace(-20,20,50)

In [4]: assign = np.digitize(x,b)

In [5]: assign
Out[5]: 
array([23, 25, 25, 25, 24, 26, 24, 26, 23, 24, 25, 23, 26, 25, 27, 25, 25,
       25, 25, 26, 26, 25, 25, 26, 24, 23, 25, 26, 26, 24, 24, 26, 27, 24,
       25, 24, 23, 23, 26, 25, 24, 25, 25, 27, 26, 25, 27, 26, 26, 24])

In [6]: uid = np.unique(assign)

In [7]: adict = {}

In [8]: for ii in uid:
   ...:     adict[ii] = np.where(assign == ii)[0]
   ...:     

In [9]: adict
Out[9]: 
{23: array([ 0,  8, 11, 25, 36, 37]),
 24: array([ 4,  6,  9, 24, 29, 30, 33, 35, 40, 49]),
 25: array([ 1,  2,  3, 10, 13, 15, 16, 17, 18, 21, 22, 26, 34, 39, 41, 42, 45]),
 26: array([ 5,  7, 12, 19, 20, 23, 27, 28, 31, 38, 44, 47, 48]),
 27: array([14, 32, 43, 46])} 
```

For dealing with flattening and then unflattening numpy arrays, see: [http://docs.scipy.org/doc/numpy/reference/generated/numpy.unravel_index.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.unravel_index.html)

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel_multi_index.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel_multi_index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:58:01.737

`np.searchsorted`是你的朋友。正如我在这里某处阅读同一主题的另一个答案时，它目前比数字化要快得多，并且做同样的工作。

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.searchsorted.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.searchsorted.html)

# javascript - CodeMirror2：如何格式化粘贴的内容？

> ID：10686851
> 
> 赞同：5
> 
> 时间：2012-05-21T14:09:14.713
> 
> 标签：javascript, codemirror

是否可以在 CodeMirror2 中的“onPaste”之类的事件之后格式化插入的内容？- 我想在粘贴后缩进剪贴板中的内容。我已经知道使用 JavaScript 无法访问剪贴板。

所以我认为也没有可能创建具有剪切/复制/粘贴功能的上下文菜单？- 我可以创建自己的 JS 剪贴板还是有现成的解决方案？

谢谢！leX

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-06-17T22:57:39.833

我花了一点时间来解决这个问题，所以如果它对任何人有帮助，这就是我截取粘贴并将每个选项卡替换为 2 个空格的方式：

```
editor.on("beforeChange", (cm, change) => {
  if(change.origin === "paste") {
    const newText = change.text.map(line => line.replace(/\t/g, "  "));
    change.update(null, null, newText);
  }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-03T16:34:55.423

CodeMirror 具有本机“inputRead”事件，因此您可以执行以下操作：

```
editor.on('inputRead', function(cm, event) {
    /* event -> object{
         origin: string, can be '+input', '+move' or 'paste'
             doc for origins >> http://codemirror.net/doc/manual.html#selection_origin
         from: object {line, ch},
         to: object {line, ch},
         removed: array of removed strings
         text: array of pasted strings
    } */
    if (event.origin == 'paste') {
        console.log(event.text);
        var text = event.text[0]; // pasted string
        var new_text = '['+text+']'; // any operations here
        cm.refresh();
        // my first idea was
        // note: for multiline strings may need more complex calculations
        cm.replaceRange(new_text, event.from, {line: event.from.line, ch: event.from.ch + text.length});
        // first solution did'nt work (before i guess to call refresh) so i tried that way, works too
        /* cm.execCommand('undo');
        cm.setCursor(event.from);
        cm.replaceSelection(new_text); */
    }
}); 
```

还有其他事件“剪切”、“复制”和“粘贴”（[http://codemirror.net/doc/manual.html#events](http://codemirror.net/doc/manual.html#events)）所以这将起作用：

```
editor.on('paste', function(cm, event) { ... } ); 
```

Andavtage 是您可以通过调用 event.preventDefault(); 来取消事件；但是检索粘贴的文本是一个问题。

目前我正在做类似的事情 - 挂钩复制/粘贴事件并进行一些替换。我找到了一种以编程方式将文本复制到剪贴板的解决方案。这是 此处讨论的[clipboard.js](http://zenorocha.github.io/clipboard.js/) [codemirror 是否提供剪切、复制和粘贴 API？](https://stackoverflow.com/questions/9492842/does-codemirror-provide-cut-copy-and-paste-api). 最棒的是您可以以编程方式触发点击事件（当我使用 ZeroClipboard 和跨浏览器 flash shim 时，这是一个问题），它会起作用！

```
new Clipboard('.btn-copy', {
    text: function(trigger) {
        var text = editor.getValue(); // or editor.getSelection();
        return text.replace(/\s+/g,' ');
    }
});

editor.on('copy', function(cm, event) {
    $('.btn-copy').click();
    event.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-27T02:17:19.283

我发现的唯一解决方案是拦截偶数使用`inputRead`，然后手动更改粘贴的内容。我做了一个可以重用的通用函数：

```
class CodeMirrorExt {
    // This function returns a callback to be used with codemirror's inputRead event.
    // The intent is to intercept a pasted text, transform the pasted contents (each line) with the function
    // you provide, and then have that transformed content be what ends up in the editor.
    //
    // Usage example that cuts each pasted line to 10 chars:
    //
    // this.codemirror.on("inputRead", CodeMirrorExt.replaceTextOnPasteFunc((line) => {
    //     return line.slice(0, 10);
    // }));

    static replaceTextOnPasteFunc(transformFunc) {
        return ((doc, event) => {
            if (event.origin !== "paste") {
                return;
            }

            const firstText = event.text[0];
            const lineNum = event.from.line;
            const chNum = event.from.ch;

            const newTexts = event.text.map(transformFunc);

            newTexts.forEach((text, i) => {
                if (i == 0) {
                    doc.replaceRange(text, {line: lineNum, ch: chNum}, {line: lineNum, ch: chNum + firstText.length});
                }
                else {
                    doc.replaceRange(text, {line: lineNum + i, ch: 0}, {line: lineNum + i, ch: event.text[i].length});
                }
            })
        });
    }
}

export default CodeMirrorExt; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-15T20:19:44.037

使用[js-beautify](https://github.com/beautify-web/js-beautify)`paste`您可以在事件期间美化 editors 值，`.CodeMirror`如下所示：

```
$(document).on('paste', '.CodeMirror', function(e) {
    var content = $(this).closest('.content');
    var editor = content[0].editor;

    // beautify the code
    editor.setValue( js_beautify( editor.getValue(), { indent_size: 2 } ) );
}); 
```

请注意，将文本插入编辑器时，它会监听第一个缩进，因此如果您的第一行缩进，所有其他行将相应地缩进。

**前任：**

```
 function something() { // if the start is indented like so,
        var blah = something; // next lines will follow
    } 
```

# blackberry - 无法使用 Ant 运行“preverify.exe” 任务

> ID：10686856
> 
> 赞同：1
> 
> 时间：2012-05-21T14:09:24.353
> 
> 标签：blackberry, ant, exec, preverify

我无法让我的 Ant 脚本（用于 BlackBerry 构建）运行`preverify.exe`命令并将正确的参数传递给它。

* * *

在命令提示符 (Windows 7) 中，这 100% 有效 - 给定的参数正常工作：

```
preverify -verbose -classpath C:\development\tools\bb-jde\jde5.0\components\lib\net_rim_api.jar -d build\classes\preverified build\classes\preverified build\classes\unverified 
```

我尝试使用以下目标将其放入我的 Ant 脚本中 - 尝试使用相同的参数：

```
<target name="preverify">
    <mkdir dir="${dest.dir}/classes/preverified" />
    <exec executable="${jde.home}/bin/preverify">
        <arg value="-verbose" />
        <arg value="-classpath C:\development\tools\bb-jde\jde5.0\components\lib\net_rim_api.jar" />
        <arg value="-d build\classes\preverified" />
        <arg value="build\classes\unverified" />
    </exec>
</target> 
```

**这不起作用。**我收到以下错误：

```
Illegal option 
-classpath C:\development\tools\bb-jde\jde5.0\components\lib\net_rim_api.jar 
```

*   这个类路径在命令行中是完全可以接受的（通常 java 命令接受 JAR 文件作为目录，因为它们基本上是 ZIP 文件）。

* * *

**如何让 Ant 向该命令发送正确的参数，就像在命令行版本中一样？**一定有什么`exec`我想念的吗？

* * *

以下是在详细模式下运行此目标的完整 Ant 输出，如果有帮助的话：

```
Apache Ant(TM) version 1.8.2 compiled on December 20 2010
Trying the default build file: build.xml
Buildfile: C:\development\ant\test_using_javac_jar_preverify_then_rapc\Cobi\build.xml
Detected Java version: 1.6 in: C:\Java\jdk1.6.0_24\jre
Detected OS: Windows 7
parsing buildfile C:\development\ant\test_using_javac_jar_preverify_then_rapc\Cobi\build.xml with URI = file:/C:/development/ant/test_using_javac_jar_preverify_then_rapc/Cobi/build.xml
Project base dir set to: C:\development\ant\test_using_javac_jar_preverify_then_rapc\Cobi
parsing buildfile jar:file:/C:/development/tools/apache-ant/lib/ant.jar!/org/apache/tools/ant/antlib.xml with URI = jar:file:/C:/development/tools/apache-ant/lib/ant.jar!/org/apache/tools/ant/antlib.xml from a zip file
Importing file C:\development\ant\common\constants.xml from C:\development\ant\test_using_javac_jar_preverify_then_rapc\Cobi\build.xml
Overriding previous definition of reference to ant.projectHelper
parsing buildfile C:\development\ant\common\constants.xml with URI = file:/C:/development/ant/common/constants.xml
parsing buildfile jar:file:/C:/development/tools/bb-ant-tools/bb-ant-tools.jar!/bb-ant-defs.xml with URI = jar:file:/C:/development/tools/bb-ant-tools/bb-ant-tools.jar!/bb-ant-defs.xml from a zip file
Overriding previous definition of reference to ant.projectHelper
 [property] Loading C:\development\ant\test_using_javac_jar_preverify_then_rapc\Cobi\project.properties
 [property] Loading C:\development\ant\common\jde5.0.properties
 [property] Loading C:\development\ant\common\common.properties
[pathconvert] Set property net_rim_api.jar.dos = C:\development\tools\bb-jde\jde5.0\components\lib\net_rim_api.jar
Build sequence for target(s) `preverify' is [preverify]
Complete build sequence is [preverify, javac, build, sign, clean, ]

preverify:
    [mkdir] Skipping C:\development\ant\test_using_javac_jar_preverify_then_rapc\Cobi\build\classes\preverified because it already exists.
     [exec] Current OS is Windows 7
     [exec] Executing 'C:\development\tools\bb-jde\jde5.0\components\bin\preverify' with arguments:
     [exec] '-verbose'
     [exec] '-classpath C:\development\tools\bb-jde\jde5.0\components\lib\net_rim_api.jar'
     [exec] '-d build\classes\preverified'
     [exec] 'build\classes\unverified'
     [exec]
     [exec] The ' characters around the executable and arguments are
     [exec] not part of the command.
     [exec] preverify: Illegal option -classpath C:\development\tools\bb-jde\jde5.0\components\lib\net_rim_api.jar
     [exec]
     [exec] Usage: preverify [options] classnames|dirnames ...
     [exec]
     [exec] where options include:
     [exec]    -classpath     <directories separated by ';'>
     [exec]                   Directories in which to look for classes
     [exec]    -d <directory> Directory in which output is written (default is ./output/)
     [exec]    -cldc1.0       Checks for existence of language features prohibited
     [exec]                   by CLDC 1.0 (native methods, floating point and finalizers)
     [exec]    -nofinalize    No finalizers allowed
     [exec]    -nonative      No native methods allowed
     [exec]    -nofp          No floating point operations allowed
     [exec]    @<filename>    Read command line arguments from a text file
     [exec]                   Command line arguments must all be on a single line
     [exec]                   Directory names must be enclosed in double quotes (")
     [exec]
     [exec] Result: 1

BUILD SUCCESSFUL
Total time: 1 second 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:23:56.580

这看起来不像是 ANT 问题。**preverify**命令正在返回错误消息，证明 ANT 正在执行它...

我不明白这个命令应该做什么，但是使用消息给出了根本原因的提示：

> ```
> [exec] Usage: preverify [options] classnames|dirnames ...
> [exec]
> [exec] where options include:
> [exec]    -classpath     <directories separated by ';'>
> [exec]                   Directories in which to look for classes 
> ```

您还没有将目录列表指定为“类路径”参数......您提供了一个 jar 文件。该命令是否支持 jar 文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:18:59.253

您传递参数的方式不正确。标记和 JAR 名称之间不允许有空格*。*`-classpath`

您必须将该行（及其`-d`下方）分成 2 行。这有效：

```
 <exec executable="${jde.home}/bin/preverify">
        <arg value="-verbose" />
        <!-- classpath to the RIM api -->
        <arg value="-classpath" />
        <arg value="C:\development\tools\bb-jde\jde5.0\components\lib\net_rim_api.jar" />
        <!-- destination folder -->
        <arg value="-d" />
        <arg value="build\classes\preverified" />
        <!-- source folder -->
        <arg value="build\classes\unverified" />
    </exec> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T05:18:36.763

我通过在环境变量 PATH 中包含 jdk\bin 目录路径解决了这个问题。

# jquery - jquery函数的返回值为空

> ID：10686860
> 
> 赞同：0
> 
> 时间：2012-05-21T14:09:35.057
> 
> 标签：jquery, ajax

当我调用这个函数时，我没有得到在调用它的其他函数中使用的返回值。我知道这个请求有效，因为我可以使用 alert() 并查看该值。任何想法将不胜感激。

```
function GetRepName(InputStr1){
  var name = '';
  $.post("getrepname.php", {queryString: ""+InputStr1+""}, function(data){
    if(data.length >0) {
      $('#Results'+InputStr1).html(data);
      name = data;
    }
  });
  return name;
} 
```

到目前为止我读过的帖子建议在外部函数中定义变量然后返回，但这似乎不起作用。在发出 return 语句之前，我是否需要添加一些等待返回值的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:13:54.567

问题是 $.post 回调是异步调用的，即在函数返回之后。您可以同步进行 AJAX 调用，但不建议这样做。考虑到请求的异步性质，您最好重新设计代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:34:09.593

这可能会解决您的问题，因为这样脚本将停止，直到它得到结果：

```
$.ajaxSetup({async:false}); 
```

请注意，ajax 不是为此而设计的，它应该是异步的，正如其名称所示：Asynchronous JavaScript and XML

* * *

我告诉你我会怎么做：

```
function fnA(){
   GetRepName();
}

function GetRepName(InputStr1){
  var name = '';
  $.post("getrepname.php", {queryString: ""+InputStr1+""}, function(data){
    if(data.length >0) {
      $('#Results'+InputStr1).html(data);
      name = data;
    }
    //fnB will be called if the ajaxing finished
    fnB(name);
  });
}

function fnB(name)
{
   //do something with name
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T14:37:37.477

如果这里的精彩答案对您来说似乎是技术性的/令人困惑的。我已将代码分成段（部分）。看评论。

```
function GetRepName(InputStr1){
  var name = '';   // Part1 (runs immediately when you call function)
  $.post("getrepname.php", {queryString: ""+InputStr1+""},  // Part2 (runs immediately after Part1, an ajax request is called by client to server
function(data){ 
    //Part3 (Javascript does an ajax call to server, server executes its code and then send the result back to client, only then the below part of code executes....(i.e. when server sends its response))
    if(data.length >0) {    
      $('#Results'+InputStr1).html(data);
      name = data;
    }

  } /* end of part 3 */); 
  return name;    // Part4 (runs immediately after part2
} 
```

由于 Part4 在 part3 之前运行，`name=''`因此在您调用时发送`GetRepName("your_string");`

# c# - 降低设置验证的圈复杂度

> ID：10686864
> 
> 赞同：3
> 
> 时间：2012-05-21T14:09:55.197
> 
> 标签：c#

我有一个棕地应用程序，它有一个复杂的方法。CC 是 14。if 语句验证应用程序设置并生成适当的内联 SQL。

EG 这个 if 语句检查设置。settings 是自定义代码，一个具有多个`bool`（**非** `bool?`）属性的 DTO。

```
 string conditions = " AND (";

        List<string> conditionStrings = new List<string>();

        if (settings.AlwaysIncludeCommonResults && settings.SelectedCommonLabs.Count > 0)
        {
            string common = " (Table.Name in (";
            for (int i = 0; i < settings.SelectedCommonLabs.Count; i++)
            {
                common += string.Format("'{0}'", settings.SelectedCommonLabs[i]);
                if (i < settings.SelectedCommonLabs.Count - 1)
                    common += ", ";
            }
            common += ")) ";
            conditionStrings.Add(common);
        }

        if (settings.AlwaysSelectLast24HoursResults)
        {
            string last24 = " (DateDiff(hh, Table.PerformedDtm, GetDate()) < 24) ";
            conditionStrings.Add(last24);
        } 
```

我不知道该怎么做才能简化这个布尔逻辑。Null 合并？...我不知道这是否会变得更好。这种模式在相同的方法中出现了多次。所以我希望多次重复使用答案以减少整体CC并增加可读性。你有什么建议？

**更新**
在决定取消第一次验证后，添加了进一步的方法逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:43:56.860

我首先会缩小代码：

```
 string common = " (Table.Name in (";
            for (int i = 0; i < settings.SelectedCommonLabs.Count; i++)
            {
                common += string.Format("'{0}'", settings.SelectedCommonLabs[i]);
                if (i < settings.SelectedCommonLabs.Count - 1)
                    common += ", ";
            }
            common += ")) ";
            conditionStrings.Add(common); 
```

可以缩小：

```
string common = " (Table.Name in (";
//if SelectedCommonLabs is a collection of strings, LINQ your way through it
common += string.Join(", ", settings.SelectedCommonLabs.ToList().Select(lab => string.Format("'{0}'",lab)));
common += ")) ";
conditionStrings.Add(common); 
```

但我同意这不是很好的代码。

# iphone - 以编程方式将导航栏添加到 tableviewController（segue push 或 modal ）

> ID：10686866
> 
> 赞同：9
> 
> 时间：2012-05-21T14:10:01.857
> 
> 标签：iphone, objective-c, uinavigationbar

我正在尝试以编程方式将 navigationBar 添加到 tableViewController ：

![示例截图：](../Images/dfcc28f3fa2f4c9faebcb7e4ad4ba064.png)

当我来自*PUSH* Segue 时，构建器会添加一个带有导航项的导航栏，就像我想要的那样。

但问题是，当我形成一个*MODAL* Segue 时，我尝试添加一个带有如下代码的栏：

```
UINavigationBar *naviBarObj = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, -260, 320, 44)];
[self.view addSubview:naviBarObj];
UIBarButtonItem *cancelItem = [[UIBarButtonItem alloc] initWithTitle:@"Cancel"         style:UIBarButtonItemStyleBordered target:self action:@selector(cancelButtonPressed)];
UIBarButtonItem *doneItem = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleBordered target:self action:@selector(doneButtonPressed)];

UINavigationItem *navigItem = [[UINavigationItem alloc] initWithTitle:@"Navigation Title"];
navigItem.rightBarButtonItem = doneItem;
navigItem.leftBarButtonItem = cancelItem;
naviBarObj.items = [NSArray arrayWithObjects: navigItem,nil];

....

- (void) cancelButtonPressed { }
- (void) doneButtonPressed { } 
```

但是什么也没有出现……没有顶栏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T15:12:45.667

naviBarObj 的帧 ypoint 是 -260，也许这什么都没有出现。

# javascript - 使用ajax将外部div加载到iframe中

> ID：10686867
> 
> 赞同：0
> 
> 时间：2012-05-21T14:10:11.093
> 
> 标签：javascript, ajax, iframe

我遇到了一堵砖墙，无法让它正常工作。

如何将[http://some-cross-domain-site.com/index.php](http://some-cross-domain-site.com/index.php)中的 #content div 加载到我网站上的 IFrame 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:18:37.837

简短的回答：除非您通过自己域上的代理页面加载页面，否则您不能。

为了阻止恶意用户注入从未知域加载病毒和间谍软件的 JavaScript，现代浏览器内置了禁用跨站脚本 (XSS) 的安全功能，但有少数例外。

# titanium - Appcelerator Titanium 不与示例应用程序 KitchenSink 一起运行

> ID：10686871
> 
> 赞同：1
> 
> 时间：2012-05-21T14:10:16.283
> 
> 标签：titanium, appcelerator

我已经在 PC 上安装了 Appcelerator Titanium Studio，但我无法在其上运行 android 模拟器，所以我对自己说“它至少应该在 Mac 上工作”......我安装了一个新的 Mac，上面有 Titanium它，下载了 SDK，然后我导入了 Kitchen Sink 示例并使用默认设置配置了运行配置......我遇到了完全相同的问题，即“audio_flinged dead”问题的无限循环！所以我能做的最好的就是查看带有黑色窗口和“Android ...”的Android模拟器。

我该怎么做才能最终启动应该运行的示例？我对 Windows 7 设置所做的最好的事情是在没有任何应用程序（默认应用程序）的情况下获取 android 手机的屏幕，所以它非常无用。

我真的很想看看 Titanium 能做什么。Mac 以“Launching New_configuration”结束（几分钟后）遇到问题。会话初始化失败。“Session Initialization failed Failed to get version” 在这两种情况下（PC/Mac），“AudioFlinger”的无限循环问题仍然存在。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:55:14.243

我帮助了一个有类似问题的人。他遇到了一个您似乎没有的错误，但我的回答引导他检查配置是否正常等。

可能会帮助你：

[从 Titanium Studio 运行 Android 模拟器时出错](https://stackoverflow.com/questions/10300661/error-running-android-emulator-from-titanium-studio/10305464)

# java - Horizo ntalListView 淡入边缘

> ID：10686873
> 
> 赞同：0
> 
> 时间：2012-05-21T14:10:16.967
> 
> 标签：java, android

如何为 Horizo​​ntalListView 设置淡入淡出边缘。我目前正在使用此代码

```
HorizontalListView hlv = new HorizontalListView(contxt, null);
hlv.setHorizontalFadingEdgeEnabled(true); 
```

但这不起作用。谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:13:37.597

无效可能会解决您的问题尝试
hlv.invalidate();

# javascript - Jquery .load 删除...内容

> ID：10686875
> 
> 赞同：-1
> 
> 时间：2012-05-21T14:10:22.013
> 
> 标签：javascript, jquery, event-handling, load

当我调用 .load 函数时，它会给我带来 HTML 代码，但它会清除`<script>`内容，即来自 cards.tpl.php 的代码：

```
<script type="text/javascript">
     //anything
</script>
<div style="float:right" class="blah">
<!-- anything -->
</div> 
```

index.php 中的代码：

```
<div id="cards">
     <?php include 'tpl/cards.tpl.php'; ?>
</div>
...
<script type="text/javascript">
    $('#drawCard').click(function(){
            $('#cards').load("tpl/cards.tpl.php",function(){
            });
    });
</script> 
```

当 PHP 包含内容时，它包含`<script>`，但是当我单击#drawCard 时，JavaScript 只会给我带来 div。我刚刚看到 .load 实际上删除了脚本标签，但是它们被执行了，绑定事件在执行后是否仍然存在？

**编辑：**

好的，最后我找到了解决这一切背后的问题的方法。使用 load() 来调用`<script></script>`包含事件绑定代码的代码会让您头疼不已。不要这样做！如果您真正的问题是在使用 $.load() 函数后处理绑定问题，那么我建议您执行以下操作：

使用 livequery('click')将所有 click(), on('click') 事件替换为名为[livequery](http://docs.jquery.com/Plugins/livequery)的插件，它可以 100% 工作。

不是带着提出一个新问题的心情，而是当 JQuery 不能按预期工作时，为什么 JQuery 会告诉你用 on() 替换 live()？

**为 JAAulde 编辑**

```
<div id="cards">
    <!-- this content is replaced -->
    <div value="t1" class="impar tecnologia unselected investigated notUsed">stuff</div>
    </div>
    <!-- end of content replaced-->
</div> 
```

并使用这个 jQuery 代码：

```
$("#cards").on('click','.unselected',(function(e){})); 
```

这在加载前有效，在加载后无效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T16:43:25.417

jQuery 从插入到 DOM 的内容中删除所有脚本，并将它们放在 HEAD 中执行（然后，出于某种原因，之后将它们从 HEAD 中删除）。请放心，您交付的所有脚本都已插入并执行。

为了回答您的编辑，`.live()`巧妙地使用了事件冒泡，它将集合上指定事件的处理委托给`document`对象。

jQuery`.live()`在引入`.delegate()`[（文档）](http://api.jquery.com/delegate/)时已弃用，因为后者允许您指定应委托给的容器，而不是始终使用`document`. 这是首选，因为它允许您限制此类委托事件的影响（更少的冒泡事件要处理，更短的链到处理程序的行程，更少的选择器匹配/过滤等）。

`.delegate()`在事件 API 的统一中，它本身现在已被`.on()`[(docs)](http://api.jquery.com/delegate/)所取代。如果您将选择器作为第二个参数传递给`.on()`您，则告诉 jQuery 将参数 1 中命名的事件委托给与给定选择器匹配的元素。

因此，所有对 的调用`.live()`都应替换为对 . 的适当范围调用`.on()`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-21T14:49:05.413

您的 card.tpl 包含中缺少 $(document).ready(...) 。

我回顾了你的历史，（在我要求你清理它之后:-p）你发布的原始代码，我发现了这个：

```
<script type="text/javascript">
   $('#toggleMax').click(function(){
      // code
   });
   // more code
</script> 
```

然后我编写了类似的代码并且它起作用了。我唯一改变的是将代码包装在 document.ready 中：

```
<script type="text/javascript">
   $(function() {  // Note the document.ready call here.
       $('#toggleMax').click(function(){
          // code
       });
       // more code
   });
</script> 
```

# maven - Maven flex 插件在引导期间寻找 sourceDirectory (scm)

> ID：10686876
> 
> 赞同：2
> 
> 时间：2012-05-21T14:10:23.027
> 
> 标签：maven, maven-3

我已经配置了一个`scm`下载项目并应用一些目标的项目。

问题是下载的项目中的一个插件的行为方式出乎我的意料。我很确定我错过了一些东西。

该项目已下载到`target/it`文件夹。

情况是`test-compile`阶段执行失败，因为找不到`${baseDir}/target/it/src/main/java`.

自行执行项目时效果很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:37:43.830

变量可能没有被正确解析 - 有时 maven 会尝试使用文字名称。尝试在该步骤回显 ${baseDir} 并检查输出。

# asp.net-mvc - 带有 EF 的自定义成员资格提供程序

> ID：10686880
> 
> 赞同：3
> 
> 时间：2012-05-21T14:10:36.540
> 
> 标签：asp.net-mvc, entity-framework, membership-provider

我正在尝试使用 Enitty Framework 在 ASP.NET MVC 3 中实现自定义成员资格提供程序。对于用户数据，我创建了一个包含所有登录数据以及更多数据的 User 类。当我尝试实现 MembershipProvider 时，出现了一些我需要实现的方法，这些方法在签名中有一个 MembershipUser 参数：

```
public override void UpdateUser(MembershipUser user) 
```

我知道我可以让我的 User 类继承 MembershipUser 类，这不会有问题。但是当我试图让它继承时，我无法为只读属性设置值，比如电子邮件和其他。

这些方法有什么方法可以接受用户类型的对象吗？或者也许还有其他更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:47:53.270

## 参考

[http://msdn.microsoft.com/en-us/library/ms152065.aspx](http://msdn.microsoft.com/en-us/library/ms152065.aspx)

[仅具有所需参数的自定义 MembershipUser](https://stackoverflow.com/questions/6303012/custom-membershipuser-with-only-needed-parameters)

[http://www.codeproject.com/Articles/165159/Custom-Membership-Providers](http://www.codeproject.com/Articles/165159/Custom-Membership-Providers)

## 回答

您可以创建 MembershipUser 实例并在构造函数上传递属性（只读或非只读），然后返回该 MembershipUser 实例。

[MembershipUser 类](http://msdn.microsoft.com/en-us/library/ms152065.aspx)的文档有一个引用帮助我更好地理解这一点：

> 创建新的 MembershipUser 对象不会将新的成员资格用户对象添加到成员资格数据存储中。

如果添加自定义属性很重要，则需要您对 MembershipUser 进行子类化。

例如，请参阅：[仅使用所需参数的自定义 MembershipUser](https://stackoverflow.com/questions/6303012/custom-membershipuser-with-only-needed-parameters)

最后一个参考链接显示了一篇不错的文章，其中包含使用 Linq-to-Sql 而不是 EF 的[自定义成员资格提供程序](http://www.codeproject.com/Articles/165159/Custom-Membership-Providers)，但相似之处很多。

希望有帮助。

# javascript - 删除表中的最后一行

> ID：10686888
> 
> 赞同：6
> 
> 时间：2012-05-21T14:10:55.510
> 
> 标签：javascript

我有一个简单的问题，我想删除表中的最后一行，但我复制了一个删除选中的函数：

```
function deleterow(tableID) {
    try {
         var table = document.getElementById(tableID);
         var rowCount = table.rows.length;

         for(var i=1; i<rowCount; i++) {
              var row = table.rows[i];
              var chkbox = row.cells[0].childNodes[0];
              if(null != chkbox && true == chkbox.checked) {
                   table.deleteRow(row);
                   rowCount--;
                   i--;
              }
         }
    }catch(e) {
        alert(e);
    }
} 
```

如何更改它，以便每次调用时只删除最后一行？谢谢大家的帮助！对此，我真的非常感激！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-21T14:20:50.177

[deleteRow](https://developer.mozilla.org/en/DOM/table.deleteRow)函数需要一个索引，然后传递它`count - 1`。

[http://jsfiddle.net/jbabey/HEDNZ/](http://jsfiddle.net/jbabey/HEDNZ/)

```
function deleterow(tableID) {
    var table = document.getElementById(tableID);
    var rowCount = table.rows.length;

    table.deleteRow(rowCount -1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:13:22.917

```
function deleterow(tableID) {

    var table = document.getElementById(tableID);
    var rowCount = table.rows.length;
     var row = table.rows[rowCount - 1 ];

            table.deleteRow(row);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-18T17:11:36.803

为什么不直接使用：

```
function deleterow(tableID) {
    var table = document.getElementById(tableID);
    table.deleteRow(-1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T14:15:44.133

我没有对此进行测试，但我认为这样的事情应该可以工作：

```
function deleterow(tableID) {
    try {
    var table = document.getElementById(tableID);
    var rowCount = table.rows.length;
    var lastRow = table.rows[rowCount]; 
    table.deleteRow(lastRow);

    }catch(e) {
        alert(e);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T14:23:35.073

我不确定 rowCount 是否对您有特殊意义。

使用 while-- 进行迭代让您先从后面开始。当你真正删除一个时才打破。

```
function deleterow(tableID) {
    try {
        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;
        var i = rowCount;

        while(i--) {
            var row = table.rows[i];
            var chkbox = row.cells[0].childNodes[0];
            if(null != chkbox && true == chkbox.checked) {
                table.deleteRow(row);
                rowCount--;
                break;
            }
        }
     }catch(e) {
        alert(e);
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-02-22T22:21:48.210

使用 table.deleteRow(i);

反而

table.deleteRow(行); 希望这有效:)

# jquery - 宽度为 % 的 jQuery 水平导航问题

> ID：10686896
> 
> 赞同：0
> 
> 时间：2012-05-21T14:11:34.443
> 
> 标签：jquery

我使用 jQuery，以便从选择列表中选择一个选项将 div 水平滚动到其中的适当内容。您滚动到的每个 div 应该占据页面可见宽度的 100%。

[http://jsfiddle.net/jamesbrighton/KUMqV/6/](http://jsfiddle.net/jamesbrighton/KUMqV/6/)

我的设计将具有液体宽度，因此我使用 % 值作为宽度而不是像素。我认为问题在于 % 计算略有偏差。对于第一个选项“可能”，div 会像我需要的那样占据整个宽度。当您查看其他选项时，列表越远，div 越短。

这种功能不能如此罕见，因此ID真的很感谢您在选项数量ar an a a n over over of like ynect bike 10时如何解决这个问题的任何想法。谢谢

更新这是我的意思的图片。红色边框应为 100% 宽度，但宽度更小。![在此处输入图像描述](../Images/74994e3729e56cb5a9714a290992c5dc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:30:47.013

看看这个例子： http: [//jsfiddle.net/KUMqV/23/](http://jsfiddle.net/KUMqV/23/) 不是最干净的解决方案，但是通过添加 4 个额外的 div，您可以将宽度设置为 1600% 和 6,25%。问候，吉乔伊

# android - 有意启动新流程。新进程作为旧进程的一部分运行还是创建了新进程？

> ID：10686900
> 
> 赞同：0
> 
> 时间：2012-05-21T14:11:53.650
> 
> 标签：android, android-intent

我在活动 A 中，这是一个带有按钮的简单 Hello world 应用程序。我在按钮 Click 上发出这个。

```
Intent intent =new Intent();
intent.setAction(Intent.ACTION_VIEW);
intent.setUri("http://google.com"); 
```

现在将调用浏览器应用程序/进程，浏览器应用程序/进程是我旧应用程序/进程的一部分还是创建了一个新进程？

我认为这不是我过程的一部分，因为即使我没有`Uses internet permission`，我仍然可以访问互联网。因此，新活动作为新流程的一部分运行。

这个对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:37:58.750

应用程序需要使用相同的密钥签名才能在同一进程中运行。
我猜您的应用程序没有使用与浏览器应用程序相同的密钥进行签名，因此可以肯定地说它们不在同一个进程中运行。

[http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html)

> 您还可以设置 android:process 以便不同应用程序的组件在同一个进程中运行——前提是这些应用程序共享相同的 Linux 用户 ID 并使用相同的证书进行签名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:15:25.927

在这种情况下，系统为“浏览器”进程分配内存，但浏览器`Activity`被添加到您的任务中，添加到您的任务的 BackStack 中，以便更正确。

# visual-studio-2010 - 如何编辑 Visual Studio 的鼠标快捷方式？

> ID：10686901
> 
> 赞同：47
> 
> 时间：2012-05-21T14:11:57.600
> 
> 标签：visual-studio-2010, settings, mouse

每当我点击鼠标上的后退拇指按钮时，Visual Studio 都会执行“Naviagte Backward”命令，但它最近停止了这样做。如何编辑 Visual Studio 的鼠标快捷方式设置以重新启用此功能？

编辑：开始赏金，仍然没有得到关于这个的具体答案。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-10-28T14:19:11.317

From [my topic](https://stackoverflow.com/questions/19320089/visual-studio-2012-navigation-back-forward-with-mouse-confliting-with-mouse-plug).

Plugin that attaches Navigate back/forward to the mouse buttons: [Mouse Navigation](http://visualstudiogallery.msdn.microsoft.com/87fb8c65-d1db-49e9-a068-d62a222a4ae7) The last version (2.2.0) is working fine.

**Some clarifying:**
Visual Studio (2012) separates the normal navigation from "click to go" navigation.
Normal navigation: mouse click anywhere in code editor, tab change also.

Click to go navigation: Go to definition, search result click. It is controlled by the buttons named: "Browse Back / Next" "Previous/Next Definition, Declaration or Reference". You can find it in the View custom toolbar.

The default VS mouse back/forward buttons are attached to the "Browse Back / Next" buttons, not to the Navigate back/forward.

The VS plugin [Mouse Navigation](http://visualstudiogallery.msdn.microsoft.com/87fb8c65-d1db-49e9-a068-d62a222a4ae7) sets the mouse buttons to the Navigate back/forward. The only remaining problem is that because VS doesn't consider "click to go" as normal navigation, when you click to go to a definition and try to go back using the Ctrl+- or mouse back, you will not return to the last position, but to the previous "Normal navigation" position.
My suggestion to the plugin developer is to try to make VS consider "click to go" navigation as normal ones, completely solving this issue.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-11-01T12:17:20.947

在 Visual Studio 2017 15.04 中添加了一个新选项，以允许按 Ctrl 键单击转到快捷会议工具提供的定义功能。当我禁用它时，我的鼠标后退按钮再次开始作为“向后导航”。选项在这里：

Tools > Options > Text Editor > General > Enable mouse click to perform Go To Definition

来源：[Visual Studio 发行说明](https://www.visualstudio.com/en-us/news/releasenotes/vs2017-relnotes)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-09-07T16:33:48.353

您是否以管理员身份运行 Visual Studio？我知道这是我和我的运行 Logitech SetPoint 的 Logitech 鼠标的问题。如果您以管理员身份运行 SetPoint，您的所有按钮都将重新开始工作。

帮助了我，也可能帮助其他人，但可能不是你的问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-17T09:57:17.083

我在 VS 2012 中遇到了同样的问题。后退按钮在 IE 中确实有效。

尽管我同意您对映射鼠标按钮的感受，但我将尝试以下操作：

“诀窍是安装 IntelliPoint 软件，您可以在[http://www.microsoft.com/hardware](http://www.microsoft.com/hardware)上找到该软件。通过该软件，您可以在特定程序处于活动状态时指定鼠标点击，并将其映射到按键。将 VS 设置为程序，击键为`Ctrl`+`-`和`Ctrl`+ `Shift`+`-`左右鼠标按钮。您将能够使用这些按钮在打开的文件中来回导航。

[http://www.microsoft.com/hardware/en-us/downloads/mouse-keyboard-center](http://www.microsoft.com/hardware/en-us/downloads/mouse-keyboard-center)

编辑：唉，它不适用于我的 Trust MaxTrack 并且没有等效的软件（据我所知）。

我确实将“取消构建”分配给“计算器”键。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-21T23:25:14.830

Visual Studio 2010 在 C++、Visual Basic 和 F# 中根本不支持此功能

使用加载项是一种选择吗？这是一个： [在 Visual Studio 2010（C++、Visual Basic、F#）中使用鼠标拇指按钮进行前进/后退代码导航](http://www.codeproject.com/Articles/57119/Forward-Backward-Code-Navigation-with-the-Mouse-Th)

我认为这是解决此问题的最简单的解决方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T15:35:19.863

我不知道您是否已经尝试过，但它可能对您有用。不过我没试过，不知道好不好用。

[http://mousegesturesvs.codeplex.com/](http://mousegesturesvs.codeplex.com/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-15T18:47:26.377

**UAC是原因...**

*来自[Windows Integrity Mechanism Design - 用户界面特权隔离 (UIPI) 和完整性](http://msdn.microsoft.com/en-us/library/bb625963.aspx)*

> 用户界面特权隔离 (UIPI) 在 windows 子系统中实施限制，以防止较低特权应用程序发送窗口消息或在较高特权进程中安装挂钩。允许较高权限的应用程序向较低权限的进程发送窗口消息。这些限制在**SendMessage**和相关的窗口消息函数中实现。并非所有从低权限进程发送到高权限进程的窗口消息都会被阻止。通常，“读取”类型的消息，例如**WM_GETTEXT**，可以从较低权限的窗口发送到较高权限的窗口。但是，写入类型的消息（例如 WM_SETTEXT）会被阻止。

而且我不知道任何解决方案，因为提升驱动程序进程*不是*解决方案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-29T06:13:00.997

环境：Windows 10、Visual Studio 2019、罗技鼠标（无线）和罗技 SetPoint (v6.70.55)。

我尝试安装鼠标导航插件（在另一个答案中提到）。不管有没有这个插件，我都遇到了和 OP 一样的问题——鼠标导航不起作用。

最终对我有用的是完全卸载 SetPoint 软件。

希望这可以帮助其他人解决这个（烦人的）问题！

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2012-05-21T14:17:22.253

履行：

```
Tools -> Options... 
```

然后在`Environment`左侧的部分下`Keyboard`，拉起`View.NavigateBackward`命令，然后将光标放在 下的文本框中`Press shortcut keys:`，然后按鼠标上的“后退拇指按钮”。`OK`那应该这样做。

# java - 带有 HTML 的 JLabel 未正确设置宽度

> ID：10686910
> 
> 赞同：4
> 
> 时间：2012-05-21T14:12:13.473
> 
> 标签：java, html, swing, resize, jlabel

我正在尝试使用 HTML div 标签设置 JLabel 的宽度。

考虑以下代码：

```
import javax.swing.*;

public class Xyzzy extends JFrame{
    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                Xyzzy frame = new Xyzzy();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                frame.setLayout(new BoxLayout(frame.getContentPane(), BoxLayout.PAGE_AXIS));

                String s = "x ";
                for (int i=0; i<200; ++i)
                    s += "x ";

                JLabel jl = new JLabel("<html><div style=\"width: 300px;\">" + s + "</div></html>");

                frame.add(jl);

                frame.setSize(600, 600);
                frame.setVisible(true);
            }
        });
    }
} 
```

我原以为 JLabel 的宽度是 300 像素，但实际上它大约是 390 像素宽。如果我将宽度规格更改为 200 像素，则生成的标签大约为 260 像素宽。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T14:28:05.417

这个 html 代码对于 JLabel 来说太复杂了（仅支持部分 HTML 规范） [http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JLabel.html](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JLabel.html)
组件的大小取决于布局. 我更喜欢 MigLayout [http://www.miglayout.com](http://www.miglayout.com) [简单教程](http://www.java-tutorial.ch/framework/miglayout-tutorial)

编辑：JLabel 中的 HTML 非常过时

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T14:30:50.453

您正在设置 HTML 中文本的宽度，而不是`JLabel`.

使用`setPreferredSize`方法设置`JLabel`.

```
frame.pack();

Dimension d = label.getSize();
d.width = width;
label.setPreferredSize(d); 
```

`JLabel`正如您所见，虽然最好让大小本身适合文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T16:39:03.517

吉尔伯特，我添加了你的代码并得到了这个：

```
import javax.swing.*;
import java.awt.*;

public class Xyzzy extends JFrame{
    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                Xyzzy frame = new Xyzzy();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                frame.setLayout(new BoxLayout(frame.getContentPane(), BoxLayout.PAGE_AXIS));

                String s = "x ";
                for (int i=0; i<200; ++i)
                    s += "x ";

                JLabel jl = new JLabel("<html>" + s + "</html>");

                frame.add(jl);
                frame.pack();

                Dimension d = jl.getSize();
                d.width = 200;
                jl.setPreferredSize(d);

                frame.setSize(600, 600);

                frame.setVisible(true);
            }
        });
    }
} 
```

这根本行不通。我还尝试删除 HTML 标记和 frame.setSize(600,600)，它们都不会产生我正在寻找的东西：一个 200 像素宽并调整了高度的 JLabel。

# c# - 在代码中设置 WPF 标签的 Style 属性？

> ID：10686917
> 
> 赞同：85
> 
> 时间：2012-05-21T14:12:39.157
> 
> 标签：c#, wpf, user-interface, label

在 App.xaml 中，我有以下代码：

```
<Application.Resources>
    <Style x:Key="LabelTemplate" TargetType="{x:Type Label}">
        <Setter Property="Height" Value="53" />
        <Setter Property="Width" Value="130" />
        <Setter Property="HorizontalAlignment" Value="Left" />
        <Setter Property="Margin" Value="99,71,0,0" />
        <Setter Property="VerticalAlignment" Value= "Top" />
        <Setter Property="Foreground" Value="#FFE75959" />
        <Setter Property="FontFamily" Value="Calibri" />
        <Setter Property="FontSize" Value="40" />
    </Style>
</Application.Resources> 
```

这旨在为我的标签提供通用模板。

在主要的 XAML 代码中，我有以下代码行：

```
<Label Content="Movies" Style="{StaticResource LabelTemplate}" Name="label1" /> 
```

但是，我想通过代码初始化 Style 属性。我努力了：

```
label1.Style = new Style("{StaticResource LabelTemplate}"); 
```

和

```
label1.Style = "{StaticResource LabelTemplate}"; 
```

两种解决方案均无效。

任何帮助，将不胜感激 ：）。

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2012-05-21T14:18:18.477

您试图在代码中的哪个位置获取样式？后面的代码？

你应该这样写：

**如果您在代码隐藏中：**

```
Style style = this.FindResource("LabelTemplate") as Style;
label1.Style = style; 
```

**如果你在别的地方**

```
Style style = Application.Current.FindResource("LabelTemplate") as Style;
label1.Style = style; 
```

**底注：**不要`Style`用关键字命名 a `Template`，你最终会混淆 a`Style`和 a `Template`，你不应该因为它们是两个不同的概念。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-09T10:23:25.643

Please check for null style result or you will be sad... ... if (style != null) this.Style = style;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-22T13:08:01.587

也许是一个老问题，但如果你正在尝试 W10 UWP 应用程序必须使用每个对象的资源集合或应用程序对象的资源集合

```
KeyValuePair<object,object> styl = this.Resources
    .FirstOrDefault(x => x.Key == "MyStyleTemplateName");
if (styl.Value != null)
    Style MyStyle = (Style)styl.Value; 
```

其中**MyStyleTemplateName**必须定义为**this的资源**

# objective-c - NSURLConnection 启动很慢

> ID：10686919
> 
> 赞同：0
> 
> 时间：2012-05-21T14:12:44.477
> 
> 标签：objective-c, ios, networking

我最近升级了我的一个应用程序以使用我的 js-c 互操作库。通过这样做，我注意到通过 NSURLConnection 更新 js 的主服务器身份验证需要很长时间才能处理服务器响应。然而，奇怪的是同步 NSURLConnections 工作正常。（请参阅我的日志中的 core.http）知道这里发生了什么吗？

```
2012-05-21 15:55:32.745 myApplication[6327:707] libcrpt::cl.start
2012-05-21 15:55:32.762 myApplication[6327:707] libcrpt::sv.invalidate push //[conn start];
2012-05-21 15:56:03.309 myApplication[6327:707] libcrpt::sv.invalidate auth //[conn didReceiveAuthenticationChallenge]
2012-05-21 15:56:04.092 myApplication[6327:707] libcrpt::sv.invalidate data //[conn didReceiveData]
2012-05-21 15:56:04.093 myApplication[6327:707] libcrpt::sv.invalidate pop //[conn connectionDidFinishLoading]

2012-05-21 15:56:04.329 myApplication[6327:707] libcrpt::core.init->push
2012-05-21 15:56:04.348 myApplication[6327:707] libcrpt::core.init->pop
2012-05-21 15:56:04.594 myApplication[6327:707] libcrpt::core.load->push
2012-05-21 15:56:04.608 myApplication[6327:707] libcrpt::core.load->pop
2012-05-21 15:56:04.624 myApplication[6327:707] libcrpt::core.settings->push
2012-05-21 15:56:04.635 myApplication[6327:707] libcrpt::core.settings->push
2012-05-21 15:56:04.639 myApplication[6327:707] libcrpt::core.settings->pop
2012-05-21 15:56:04.645 myApplication[6327:707] libcrpt::core.settings->pop
2012-05-21 15:56:04.667 myApplication[6327:707] libcrpt::db.testentity.meta.select->push
2012-05-21 15:56:04.681 myApplication[6327:707] libcrpt::db.testentity.meta.select->pop
2012-05-21 15:56:04.687 myApplication[6327:707] libcrpt::db.testentity.data.select->push
2012-05-21 15:56:04.714 myApplication[6327:707] libcrpt::core.http.get->push
2012-05-21 15:56:04.755 myApplication[6327:707] libcrpt::db.testentity.data.select->pop
2012-05-21 15:56:04.812 myApplication[6327:707] libcrpt::core.http.post->push
2012-05-21 15:56:04.840 myApplication[6327:707] libcrpt::core.http.post->push
2012-05-21 15:56:05.734 myApplication[6327:707] libcrpt::core.http.get->pop
2012-05-21 15:56:05.756 myApplication[6327:707] libcrpt::db.testentity.meta.make->push
2012-05-21 15:56:05.762 myApplication[6327:707] libcrpt::db.testentity.meta.make->pop
2012-05-21 15:56:05.868 myApplication[6327:707] libcrpt::core.http.post->pop 
```

# numpy - numpy 数组到 scipy.sparse 矩阵

> ID：10686924
> 
> 赞同：7
> 
> 时间：2012-05-21T14:12:59.970
> 
> 标签：numpy, python-3.x, scipy, sparse-matrix

给定一个任意 numpy 数组 ( `ndarray`)，是否有函数或捷径可以将其转换为`scipy.sparse`矩阵？

我想要这样的东西：

```
A = numpy.array([0,1,0],[0,0,0],[1,0,0])
S = to_sparse(A, type="csr_matrix") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T14:18:26.580

我通常会做类似的事情

```
>>> import numpy, scipy.sparse
>>> A = numpy.array([[0,1,0],[0,0,0],[1,0,0]])
>>> Asp = scipy.sparse.csr_matrix(A)
>>> Asp
<3x3 sparse matrix of type '<type 'numpy.int64'>'
    with 2 stored elements in Compressed Sparse Row format> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T14:20:04.903

帮助中有一个非常有用且相关的示例！

```
import scipy.sparse as sp
help(sp) 
```

这给出了：

```
Example 2
---------

Construct a matrix in COO format:

>>> from scipy import sparse
>>> from numpy import array
>>> I = array([0,3,1,0])
>>> J = array([0,3,1,2])
>>> V = array([4,5,7,9])
>>> A = sparse.coo_matrix((V,(I,J)),shape=(4,4)) 
```

还值得注意的是各种构造函数（再次来自帮助）：

```
 1\. csc_matrix: Compressed Sparse Column format
    2\. csr_matrix: Compressed Sparse Row format
    3\. bsr_matrix: Block Sparse Row format
    4\. lil_matrix: List of Lists format
    5\. dok_matrix: Dictionary of Keys format
    6\. coo_matrix: COOrdinate format (aka IJV, triplet format)
    7\. dia_matrix: DIAgonal format

To construct a matrix efficiently, use either lil_matrix (recommended) or
dok_matrix. The lil_matrix class supports basic slicing and fancy
indexing with a similar syntax to NumPy arrays. 
```

你的例子很简单：

```
S = sp.csr_matrix(A) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-26T06:44:10.420

请参考这个答案：[https ://stackoverflow.com/a/65017153/9979257](https://stackoverflow.com/a/65017153/9979257)

在这个答案中，我解释了如何将二维 NumPy 矩阵转换为 CSR 或 CSC 格式。

# linux - 在列中打印空格分隔的列表

> ID：10686927
> 
> 赞同：4
> 
> 时间：2012-05-21T14:13:08.887
> 
> 标签：linux, bash, unix

我有这个 Makefile，它有一个名为“MODULES”的变量，它列出了我在构建中激活的所有模块。

这个列表由空格分隔，所以当我这样做时它看起来像这样`echo $(MODULES)`：

```
module1 module2 module3 module4 mod5 mod6 mod7 module8 module9 
```

我想做的是在编译时显示的某些列中显示此列表。

像这样：

```
Modules activated:
module1 module2 module3 
module4 mod5    mod6 
mod7    module8 module9 
```

理想情况下，withs 列将调整为该列中最大模块的宽度（请参阅 参考资料`mod7`）；列数会根据当前终端的宽度进行调整。

现在，我发现了一些似乎可以做到这一点的 unix 实用程序，例如[column](http://linux.about.com/library/cmd/blcmdl1_column.htm)，但我无法使其与我的集合一起使用。

你有什么技巧可以让我这样做吗？

**编辑**：

有了下面选择的答案，我终于在我的 Makefile 中破解了这个命令：

```
@printf '%s\n' $(MODULES) | sort | column 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T14:21:15.213

```
printf '%-12s%-12s%s\n' $modules 
```

这会在占位符出现在格式字符串中的次数内消耗变量的内容，并重复直到消耗所有内容。

该`column`实用程序将自动为您生成列：

```
column <<< "$(printf '%s\n' $module)" 
```

那是列优先。如果你想要行优先：

```
column -x <<< "$(printf '%s\n' $module)" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T14:27:06.577

使用[这个问题](https://stackoverflow.com/questions/3014908/how-to-output-an-arrays-content-in-columns-in-bash)的答案，尝试这样的事情：

```
echo "Modules activated:"
for item in $modules; do 
    printf "%-8s\n" "${item}"
done | column 
```

`-x`如果要转置输出，可能会添加到列命令。

就列数而言，这应该是终端敏感的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T14:39:54.427

`column`与和对齐`fold`：

```
echo $modules | column -t | fold | column -t 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T14:35:00.170

You can use fold and tab, to get some rough formatting:

```
echo "module1 module2 module3 module4 mod5 mod6 mod7 module8 module9" | sed 's/ /\t/g' | fold -s -18module1 module2 
module3 module4 
mod5    mod6    
mod7    module8 
module9 
```

but it will not work properly if some modulenames are longer than 8 characters, and some are shorter.

# c++ - 是否可以将命令发送到我的程序正在运行的控制台窗口？

> ID：10686928
> 
> 赞同：3
> 
> 时间：2012-05-21T14:13:10.233
> 
> 标签：c++, windows, console

我知道这个`system()`函数，但是它创建了它自己的环境，所以这里设置的每个变量都不会转发到主控制台。我想知道是否可以发送由用户编写的命令或由 *.bat 文件执行的命令？

我需要这个的原因是我在寻找一种方法来设置父 CMD 进程的 env 变量。是的，我知道系统不希望我这样做，但也许有一些解决方法......

想法是创建将通过输入管道发送给它的任何内容设置为变量的应用程序，如下所示：

```
echo Bob| setvar name 
```

那么：

```
echo %name% 
```

会产生`Bob`

整个想法是更容易地从任何程序输出设置变量（我知道如何使用`for`命令），同时考虑到特殊批处理字符的特性，例如`^!%`文件名中允许使用这些字符。它会使许多 cmd 脚本变得更简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T16:09:03.433

您当然可以在与您的程序相同的控制台窗口中运行程序。这是[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425.aspx). MSDN 有更多关于[共享控制台的相关进程之间发生的事情的](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682528.aspx)详细信息。您可能希望等待子进程终止，然后再继续运行您自己的程序。

但是，这对您的真正目标没有帮助。程序运行的*窗口*与其任何祖先进程的*环境变量*完全无关。您将不得不在[别处](https://stackoverflow.com/search?q=%5Bwindows%5D+change+environment+variables+of+parent+process)寻找解决实际问题的方法。

# database-design - 足球数据库设计

> ID：10686929
> 
> 赞同：-2
> 
> 时间：2012-05-21T14:13:11.343
> 
> 标签：database-design

我的数据库设计有问题。

我想做一个应用程序来管理足球联赛，所以我有表格来记录协会、球队、球员、教练等，现在我遇到了比赛的问题。

所以，我有一个表格比赛来记录比赛的数据，比如赛季、名称和类型。我有另一个表来记录团队的具体数据。一个例子可以是，像英超联赛和球队这样的比赛可以是曼联，但来自西班牙的巴塞罗那也是创纪录的。因此，我想创建一个表，将团队与“竞争团队”之类的比赛联系起来，其中存储可用的团队或该比赛的成员。

我怎样才能在那个英超联赛中存储曼彻斯特的积分，比赛和其他东西？

**编辑**

我有这个想法的草图

![我的设计](../Images/81850859e196137f8603279d6081caf7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:10:32.477

您可以在每次球队赢/平/输比赛时将它们存储在表格中，使用相应的点进行所需的操作，或者您可以有一个比赛表格，并进行计数，例如第 1 队在第 3 季中获胜的位置例如。

# jquery - 滚动到底部太快时航点不起作用

> ID：10686930
> 
> 赞同：3
> 
> 时间：2012-05-21T14:13:12.037
> 
> 标签：jquery, scroll, jquery-waypoints

在我的网站上：[http](http://www.entendu.info/) ://www.entendu.info/我正在使用来自[http://imakewebthings.com/jquery-waypoints/的航点插件](http://imakewebthings.com/jquery-waypoints/)

如果用户直接滚动到底部，大多数路点都没有被触发，只有第一个和最后一个 2 个，好像中间的滚动太快而无法执行。（航点是滚动时加载的社交按钮）

有什么帮助吗？PS：head.ready 只是使用 headjs 加载外部脚本时 document.ready 的替代品。

```
head.ready(function() {

opts = {

        offset: '85%',
        continuous: 'true',

    };

 //$('.share-this').on('click', function(e){

$('.share-this').waypoint(function(event, direction) {
   if (direction === 'down') {

    var contentId = $('.share-this').attr('rel');
    var uri = $('.share-this').attr('rev');

    $.ajax({
   url: 'http://www.entendu.info/share',
   type: 'GET',
   dataType: 'html',
   data: {id:contentId, url:uri},
   complete: function(xhr, textStatus) {

   },
   success: function(data, textStatus, xhr) {

   $('#'+contentId).html(data);

   },
   error: function(xhr, textStatus, errorThrown) {

   }
   });

   }
   else {

      // do this on the way back up through the waypoint
   }
   //});

   $.waypoints('refresh')
   }, opts);

}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-18T03:20:02.587

我相信您可以实现您想要的，而无需使用额外的 jQuery 插件。详细信息可以在这篇文章中找到，因此，所有必要的信用都到期了。

[如何检查用户是否滚动到底部](https://stackoverflow.com/questions/3898130/how-to-check-if-a-user-has-scrolled-to-the-bottom)

长话短说，您可以使用 jQuery 框架已经提供的[scroll()](http://api.jquery.com/scroll/)并将文档高度与当前显示的窗口高度进行比较。不过，我不想偷别人的风头，请查看链接。

# python - 遍历 django 中的 JSON 字段

> ID：10686931
> 
> 赞同：0
> 
> 时间：2012-05-21T14:13:15.917
> 
> 标签：python, django, json, django-socialauth

使用`django-social-auth`，它允许您捕获某些详细信息，因此 Dropbox 用户`extra_data`看起来如下

```
{"access_token": "oauth_token_secret=XXXXXXXXXXXX&oauth_token=YYYYYYYYYYY", "7200": null, "id": null} 
```

models.py 设置如下。

```
class UserSocialAuth(models.Model):
    """Social Auth association model"""
    user = models.ForeignKey(User, related_name='social_auth')
    provider = models.CharField(max_length=32)
    uid = models.CharField(max_length=255)
    extra_data = JSONField(blank=True) 
```

如何分别访问 oauth_token 和 oauth_token_secret？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:54:51.060

使用模块解析 JSON 数据`simplejson`：

```
from django.utils.simplejson import loads

data = {"access_token": "oauth_token_secret=XXXXXXXXXXXX&oauth_token=YYYYYYYYYYY", "7200": null, "id": null} tokens = parse_qs(loads(data)['access_token'])

json_dict = loads(data)
access_token = json_dict['access_token'] 
```

然后使用 Jan 向您建议的内容来解析存储在中的查询字符串`access_token`：

```
from urlparse import parse_qs

tokens = parse_qs(access_token)

print tokens['oauth_token_secret']
print tokens['oauth_token'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:18:22.017

对于解析`access_token`，您可以使用[http://docs.python.org/library/urlparse.html#urlparse.parse_qs](http://docs.python.org/library/urlparse.html#urlparse.parse_qs)：

> 解析作为字符串参数给出的查询字符串（application/x-www-form-urlencoded 类型的数据）。数据作为字典返回。字典键是唯一的查询变量名称，值是每个名称的值列表。

# css - 使用 CSS3 悬停时的背景图像不透明度过渡

> ID：10686932
> 
> 赞同：2
> 
> 时间：2012-05-21T14:13:17.217
> 
> 标签：css, background-image, opacity, css-transitions

当用户将光标放在链接上时，我正在尝试使用背景图像不透明度（从 0 到 100%）过渡。我有这样的东西：

```
<div class="menu">
 <ul class="sf-menu">
  <li class="page_item page-item-2">
    <a href="http://filip-hostel.pl/?page_id=2">o nas</a></li>
  <li class="page_item page-item-6">
    <a href="http://filip-hostel.pl/?page_id=6">oferta</a></li>
  <li class="page_item page-item-8">
    <a href="http://filip-hostel.pl/?page_id=8">galeria</a></li>
  <li class="page_item page-item-10 current_page_item">
   <a href="http://filip-hostel.pl/?page_id=10">cennik</a></li>
  <li class="page_item page-item-12">
   <a href="http://filip-hostel.pl/?page_id=12">kontakt</a></li>
 </ul>
</div> 
```

和 CSS：

```
 .sf-menu a, .sf-menu a:visited{
border:none;
color:#ffffff;
font-family:Arial;
font-size:16px;
line-height:72px;
width:65px;
text-align:center;
padding:0px;
margin:0;
background:none;
-webkit-transition: 1.0s ease-in;
    -moz-transition: .01s ease-in;
    -o-transition: 1.0s ease-in;
    -ms-transition: 1.0s ease-in;
    transition: 1.0s ease-in;

}

.sf-menu li:hover{
background:none;
}

.sf-menu a:hover{
background: url(img/menu_hover.png) center center no-repeat;

}

.current_page_item a{
background: url(img/current_page.png) center center no-repeat;
} 
```

它适用于 current_page_item，但不适用于其他人。[你可以在这里](http://www.filip-hostel.pl)看到它的样子 有人知道吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-25T08:23:32.413

我会使用`:before`继承的元素`background-image`。

像这样的东西。

```
a {
  background: black url('http://umea.ee/thumb.jpg') 0 0 no-repeat;
  background-size: 0 0;
  color: white;
  display: inline-block;
  padding: 1em;
  position: relative;
  z-index: 1;
}
a:before {
  background-image: inherit;
  background-position: 50% 50%;
  background-repeat: no-repeat;
  background-size: cover;
  content: '';
  height: 100%;
  left: 0px;
  opacity: 0.5;
  position: absolute;
  top: 0px;
  width: 100%;
  z-index: -1;
  -webkit-transition: opacity 300ms;
  transition: opacity 300ms;
}
a:hover:before {
  opacity: 1;
}
```

```
<a href="#">I am link</a>
```

更新 - 如果您想为相同的背景图像设置动画，则如下所示：

```
a {
  background: black url('http://umea.ee/thumb.jpg') top left no-repeat;
  background-size: 100% 200%;
  color: white;
  display: inline-block;
  padding: 1em;
  position: relative;
  z-index: 1;
}
a:before {
  background: inherit;  
  background-size: inhertit;
  background-position: bottom right;
  content: '';
  height: 100%;
  left: 0px;
  opacity: 0;
  position: absolute;
  top: 0px;
  width: 100%;
  z-index: -1;
  opacity: 0;
  -webkit-transition: opacity 300ms;
  transition: opacity 300ms;
}
a:hover:before {
  opacity: 1;
}
```

```
<a href="#">I am link</a>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T15:10:09.507

通常 CSS3 的过渡动画只适用于现有的 CSS 属性，比如 background-image 和 background-position。没有背景不透明度字段可以满足您的需求。当属性发生变化时，就会发生转换。

通过更改 background-image 来暗示您想要的转换（某些浏览器不会将其显示为淡入淡出转换，如早期版本的 firefox），在这种情况下， a 的两个不同状态`.current_page_item a`将是`background-image: url(img/current_page.png);`and `background-image: url(img/menu_hover.png);`，其他属性是一样，喜欢`background-position`。但是对于`.sf-menu a`，这两种状态是完全不同的，从`background-iamge: none; background-position: left top;`到`background-image: url(img/menu_hover.png); background-position: center center;`没有办法在不存在的图像和新的图像之间显示动画，所以没有淡入淡出的过渡。

如果您真的想要此动画，请尝试使用`LI`包含您`A`的 s 的剪辑框（可行），并给出`A`半径边框和`background-color`.

# android - Phonegap Cordova 1.7.0 完全退出应用程序 android

> ID：10686941
> 
> 赞同：2
> 
> 时间：2012-05-21T14:14:03.100
> 
> 标签：android, cordova, exit, kill

我使用 Cordova 1.7.0，虽然尝试使用 1.6.1 并调用了我在互联网上找到的完全退出应用程序的所有方法。但我的 android 应用程序始终在后台运行。我用：

```
document.addEventListener("backbutton", function(e) {
          if ($.mobile.activePage.attr('id') === 'homePage') {
            navigator.app.exitApp();
            } else {
              window.history.back();
            }
        }, false); 
```

现在，它在模拟器上完全退出，但从未在设备上退出。有没有确定的方法可以在退出 Android 时杀死 Phonegap 应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T15:32:18.013

来自 Javadoc：

```
 // Enable app to keep running in background. (Boolean - default=true)
 super.setBooleanProperty("keepRunning", false); 
```

更新：忘了提到您需要在扩展 DroidGap 的主活动类中添加这一行，如下所示：

```
public class RSSDemoActivity extends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        super.setBooleanProperty("keepRunning", false);

        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T20:37:26.003

看

```
<script>

document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    blackberry.system.event.onHardwareKey(blackberry.system.event.KEY_BACK, 
    function() {   
        if ($.mobile.activePage.attr('id') == 'page') { 
          blackberry.app.exit();
          return false;
        } 
        else { 
          history.back(); 
          return false;
        } 
    }); 
}
</script> 
```

# meteor - Meteor 似乎没有自动发布

> ID：10686944
> 
> 赞同：1
> 
> 时间：2012-05-21T14:14:09.267
> 
> 标签：meteor

考虑以下：

```
>> meteor mongo
> show collections;
pages
system.indexes
> db.pages.count();
2
> db.pages.findOne();
{
    "_id" : "aec73d51-bb70-4e5b-90fe-a86bb5e5592f",
    "content" : "tuna fish sandwitches\nare super delicious! I mean really delicous",
    "created_at" : 1337353376284,
    "name" : "My first page"
} 
```

但是当我从我的流星客户端运行以下命令时：

```
> Pages = new Meteor.Collection('pages');
> Pages.findOne(); 
```

它产生`undefined`

另请注意：

```
>> Pages.find().count();
>> 0 
```

我没有禁用自动发布。我需要做一些明确的事情来将数据库与 MiniMongo 缓存同步吗？

流星 0.3.6 | 蒙哥 2.0.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T15:31:41.803

Meteor 不会自动发布 Mongo 数据库中的所有内容——只是定义的集合。因此，您只需要在服务器上与客户端上已有的相同声明即可。

```
// client and server code
Pages = new Meteor.Collection('pages'); 
```

# wcf - 通过将 mschart 添加到具有 WCF 服务的 Windows azure 应用程序的问题

> ID：10686949
> 
> 赞同：1
> 
> 时间：2012-05-21T14:14:21.387
> 
> 标签：wcf, visual-studio, azure, mschart

我有一个非常奇怪的问题。我无法运行其中包含 WCF 服务和 mschart 的 Windows azure 应用程序。以下是重现错误的步骤：
1) 使用空白的 asp.net webrole 创建一个新的 windowsazureapplication
2) 现在添加一个新的 WCfService
3) 运行以检查它是否运行正常
4) 现在在其中一个页面中包含 mschart，然后打开页面设计以确保 webconfig 更改为使用 mschart。
5) 现在尝试运行该项目。
我收到这样的错误消息：
![在此处输入图像描述](../Images/9a0c954c0a1c4221c820770150896e19.png)

这是 Windows azure 的问题还是我做错了什么？
仅供参考：这不是我在 Windows azure 上的第一个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T17:33:32.313

我想我已经找到了解决方案。您只需在 system.webserver 部分的 web.config 中添加以下内容：

```
<validation validateIntegratedModeConfiguration="false"/> 
```

最终的 system.webserver 如下所示：

```
<system.webServer>
 <modules runAllManagedModulesForAllRequests="true" />
  <handlers>
   <remove name="ChartImageHandler" />
    <add name="ChartImageHandler" preCondition="integratedMode" verb="GET,HEAD,POST"
    path="ChartImg.axd" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </handlers>
 <validation validateIntegratedModeConfiguration="false"/>
</system.webServer> 
```

在上面添加之后，我完全没有看到问题。

# c# - 将会话变量值与字符串进行比较

> ID：10686953
> 
> 赞同：5
> 
> 时间：2012-05-21T14:14:27.590
> 
> 标签：c#, asp.net, session-variables

我将会话变量与字符串进行比较，以检查登录类型是否为管理员。

我正在使用的代码：

```
if (Session["loggedInUsername"] == null)
        {
            btnLogin.Text = "Sign In";
            lblWelcome.Text = "Welcome!";
            hypManageRestaurants.Enabled = false;
            hypManageReviews.Enabled = false;
            hypPostReviews.Enabled = false;

        }
        else
        {
            if (Session["loggedInUserType"] == "Administrator")
            {
                hypManageRestaurants.Enabled = true;
                hypManageReviews.Enabled = true;
                hypPostReviews.Enabled = true;
            }
            else
            {
                hypManageRestaurants.Enabled = false;
                hypManageReviews.Enabled = false;
                hypPostReviews.Enabled = true;
            }
            lblWelcome.Text = "Welcome " + Session["loggedInUsername"];

            btnLogin.Text = "Sign Out";
        } 
```

所以首先我要检查是否有用户登录。如果用户登录成功，会话变量“loggedInUsername”将具有用户名的值。如果“loggedInUsername”会话变量不为空，它将检查“loggedInUserType”会话变量的登录用户类型。

奇怪的是，“loggedInUserType”的值恰好是“Administrator”而没有“”，在 if 函数中，我将会话变量与字符串“Administrator”进行比较的 if 函数被跳过并转到 else。

当用户登录时，所有会话变量都在获取值。

以下是我用来登录的数据，该记录是唯一具有“管理员”类型的记录。

[图片链接](http://img824.imageshack.us/img824/4471/37860626.png)

是否有任何其他方法可以将会话变量与字符串进行比较

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T14:18:54.140

将对象类型值转换为字符串

```
((string)Session["loggedInUserType"]) == "Administrator" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T14:17:43.337

尝试

`if(Convert.ToString(Session["loggedInUserType"]) == "Administrator) ...`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T14:17:28.073

试试这个：

```
if (Session["loggedInUserType"].ToString().Trim()
        .Equals("Administrator", StringComparison.InvariantCultureIgnoreCase)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T14:17:43.337

你确定所有的空格都从 Session["loggedInUserType"] 的末尾被删除了吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T14:20:00.613

```
if (Session["loggedInUserType"].ToString() == "Administrator") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T14:20:32.040

该`Session`集合返回 type 的值`Object`，因此当您将其与字符串进行比较时，您将比较对象引用的值，而不是比较字符串值。

将对象引用转换为`string`：

```
if (((string)Session["loggedInUserType"]) == "Administrator") 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-19T14:47:50.997

你可以这样做 ：

```
string session = (string)Session["loggedInUserType"]

if (session == "Administrator") 
```

或者您`Session`可以与吸气剂一起参加特定课程。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-19T05:57:49.987

```
if(Convert.ToString(Session["loggedInUserType"]) == "Administrator) 
```

这样就不需要检查空值，因为 Convert.ToString 处理空值返回 "" 空字符串

# session - 在 cakephp 和 moodle 之间共享用户登录/会话

> ID：10686956
> 
> 赞同：1
> 
> 时间：2012-05-21T14:14:29.987
> 
> 标签：session, cakephp, login, shared, moodle

我有一个已经用 CakePHP 运行的网站，它有自己的使用 Auth 组件的登录系统。

现在我将使用moodle 创建另一个网站，托管在同一台服务器上。有没有办法在这两个网站之间共享用户会话？

例如，如果用户登录moodle网站并单击指向其他网站页面的链接，则不会要求他再次登录，因为系统会识别出他已经登录。

我想要做的一件事是告诉moodle（以某种方式）在CakePHP网站已经在使用的数据库中使用相同的**用户表。**然后告诉 CakePHP 网站接受在其他网站中创建的会话。这样的事情对吗？

但我不知道如何做这些事情，或者如果他们甚至可能的话，任何关于如何解决这个问题的建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:08:18.450

单点登录 (SSO) 目前在 Moodle 中并不是一件小事。

您可能会考虑的其他一些方法是：

*   在 Moodle 中使用外部身份验证并将其配置为使用 Cake 的数据库。不提供 SSO 但告诉 Moodle 使用 Cake 的用户帐户。

*   将 Moodle 和 Cake 都配置为使用 LDAP、POP3 或 CAS 等通用身份验证系统。根据您的选择，您有可能实现 SSO。

此页面中有关 Moodle 身份验证插件的更多信息：

[http://docs.moodle.org/dev/Authentication_plugins](http://docs.moodle.org/dev/Authentication_plugins)

# java - 矩形网格内的三角形

> ID：10686960
> 
> 赞同：0
> 
> 时间：2012-05-21T14:14:50.063
> 
> 标签：java, swing, java-2d

我编写了一个代码，在一个网格单元内绘制网格和一个三角形。当窗口最大化或最小化时，网格大小会增加/减少。

我的要求是每次增加/减少网格大小时，三角形大小也应该增加/减小以适应网格单元。

我的代码如下：

```
import java.awt.BasicStroke;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Polygon;
import java.awt.RenderingHints;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Grid extends JPanel {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Grid g = new Grid();
        JFrame f = new JFrame("Application GUI Window");
        f.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {System.exit(0);}
        });
        f.getContentPane().add("Center", g);
        f.pack();
        f.setSize(new Dimension(450,400));
        f.show();
    }

    public void paint(Graphics g) {

        Graphics2D g2d = (Graphics2D) g;
        Dimension d = getSize();
        g2d.setBackground(getBackground());
        g2d.clearRect(0, 0, d.width, d.height);
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                            RenderingHints.VALUE_ANTIALIAS_ON);
        drawGrid(d.width, d.height, g2d);
        int[] xPoints = {20,15,25}; 
        int[] yPoints = {15,25,25};
        int n = 3;

        Polygon triangle = new Polygon(xPoints, yPoints, n);
        g.fillPolygon(triangle);
    }

    private void drawGrid(int width, int height, Graphics2D g2d) {

       /* BasicStroke border = new BasicStroke(3, BasicStroke.CAP_SQUARE, BasicStroke.JOIN_ROUND, 0, new float[]{0,1,0,1}, 0);
        g2d.setStroke(border);
        g2d.drawRect(3,3,width-6,height-6);*/

        //horizontal lines
        int cellheight = height/10;
        int cellwidth = width/5;
        for (int j=0;j<height;j=j+cellheight)
        {
            BasicStroke line = new BasicStroke(1, BasicStroke.CAP_SQUARE, BasicStroke.JOIN_ROUND, 0, new float[]{0,1,0,1}, 0);
               g2d.setStroke(line);
               g2d.drawLine(0, j, cellwidth*5, j);

        }

        //vertical lines

        for (int i=0;i<width;i=i+cellwidth)
        {
            BasicStroke line = new BasicStroke(1, BasicStroke.CAP_SQUARE, BasicStroke.JOIN_ROUND, 0, new float[]{0,1,0,1}, 0);
               g2d.setStroke(line);
               g2d.drawLine(i, 0, i, cellheight*10);

        }

    }
} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:13:26.463

您可以将三角形的坐标与网格单元的尺寸联系起来。这是基于您的示例的代码段：

```
int cellHeight = d.height/10;
int cellWidth = d.width/5;

int xOffset = cellWidth/6;
int yOffset = cellHeight/6;

int[] xPoints = {cellWidth/2, xOffset, cellWidth - xOffset}; 
int[] yPoints = {yOffset, cellHeight - yOffset, cellHeight - yOffset};

Polygon triangle = new Polygon(xPoints, yPoints, xPoints.length); 
```

请注意，在 Swing 中，您通常应该覆盖`paintComponent()`而不是`paint()`，除非在某些特殊情况下。有关详细信息，请参阅[仔细查看绘制机制](http://docs.oracle.com/javase/tutorial/uiswing/painting/closer.html)。

另请注意，`show()`不赞成使用`setVisible()`. 您可以将其替换为：`setVisible(true)`

# java - Java中的命令行参数与文件属性（* .properties）与系统属性（-D）

> ID：10686963
> 
> 赞同：0
> 
> 时间：2012-05-21T14:15:07.740
> 
> 标签：java, command-line-interface, command-line-arguments, ini

有多种方法可以将参数传递给 Java 应用程序。其中有：

1.  命令行参数
2.  属性文件 ( `properties`-style)
3.  系统属性（通过`-D`选项传递）
4.  系统环境变量

从意识形态上讲，什么时候应该更喜欢一个而不是另一个？例如，如果有很多参数要传递给应用程序，是否有任何理由偏爱命令行参数而不是 *.properties 文件？

或者，例如，可以轻松地从堆栈深处的任何类访问系统变量（与 CLI 不同，CLI 只能在 中访问`main`）。是否应该仅仅因为易于访问而更喜欢使用系统属性而不是 CLI？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:28:53.487

取决于部署需要回答其中的一些问题。

命令行参数：当您有其他进程生成您的应用程序并且您想从调用进程控制这些参数时，这很好。一个例子是 CRON 产生它。

文件：我不喜欢 ini 风格......你被困在 Windows 上。如果您想要一些非常简单的东西，请首选可以使用 Properties 类加载的 .properties 文件。或者您可以使用 XML。文件还可以让您选择文件位置，相对于应用程序来说非常适合部署，有些人还喜欢将它们扔到全局的某个地方，例如 /etc

环境变量：它们有它们的位置，尽管它使部署更加复杂。如果环境影响您的应用程序的参数，我只会使用它。这意味着，您的应用程序的行为会有所不同，或者需要根据操作系统、机器等进行不同的配置。

偏好是主观的，可能取决于应用程序、部署、系统等的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:46:16.473

Well, coming to configurations, each programmer has its own idea on how's the right way to do... As usual it depends on a whole lot of things.

I use to deal with this choice in this way: if it's something like an enviroment var, (something similar to $PATH or $SHELL), and can/must be set by the caller (another program or a startup script), it goes straight in System.Properties via -D switch.

If it's something else, then it goes straight to property file (and actually how it's loaded is not really important, there are several ways to do it, each with pros and cons, my fav is loading from classpath, but is just a matter of taste).

I try to keep in System.Properties just minimal, really important things, if it's a big configuration, better use Properties or XML or even better database tables, but again, it depends on the complexity of your application (HelloWorld with a DB is plain overkill ^^).

# django - 从 http://djangosnippets.org/ 将代码片段安装到 Django

> ID：10686968
> 
> 赞同：-1
> 
> 时间：2012-05-21T14:15:21.997
> 
> 标签：django

如何将此片段安装到我的 django 应用程序中？

[http://djangosnippets.org/snippets/1364/](http://djangosnippets.org/snippets/1364/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:21:24.067

没有办法直接从 djangosnippets 中“安装”一个片段，因为它只不过是一个 pastebin。您需要将代码段内容复制到您的项目源中。

# android - OnChildClickListener 消失

> ID：10686971
> 
> 赞同：1
> 
> 时间：2012-05-21T14:15:38.760
> 
> 标签：android, android-layout, listener

我有一个可扩展的列表视图，当我单击一行时，它会触发**onChildClick**或**onGroupClick** ，具体取决于我单击的是子项还是组。

![在此处输入图像描述](../Images/e1bdedd666c876badc2d7c475071bc0f.png)

如果我在 xml 布局文件中添加一些可点击的内容（例如 CheckBox），则**onChildClick**不再触发。（如果我添加一个简单的 textView 它也可以）

![child_layout](../Images/14bffae3338e379655085165f7fbf1a8.png)

有谁知道为什么？该项目是否覆盖了侦听器？

主要代码：

```
 View firstView = inflater.inflate(R.layout.main_layout, container, false);
 listView = (ExpandableListView) firstView.findViewById(R.id.expandableListView1);
listView.setOnChildClickListener(new OnChildClickListener()
         {

             @Override
             public boolean onChildClick(ExpandableListView arg0, View arg1, int arg2, int arg3, long arg4)
             {
                 Toast.makeText(getActivity().getBaseContext(), "Child clicked", Toast.LENGTH_LONG).show();
                 return false;
             }
         }); 
```

适配器代码：

```
public class ExpandableListAdapter extends BaseExpandableListAdapter {

    private Context context;

    private ArrayList<String> groups;

    private ArrayList<ArrayList<FarmaciListItem>> children;

    public ExpandableListAdapter(Context context, ArrayList<String> groups,
            ArrayList<ArrayList<FarmaciListItem>> children) {
        this.context = context;
        this.groups = groups;
        this.children = children;
    }

    @Override
    public Object getChild(int groupPosition, int childPosition) {
        return children.get(groupPosition).get(childPosition);
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        return childPosition;
    }

    // Return a child view. You can load your custom layout here.
    @Override
    public View getChildView(int groupPosition, int childPosition, boolean isLastChild,
            View convertView, ViewGroup parent) {
        FarmaciListItem farmacoItem = (FarmaciListItem) getChild(groupPosition, childPosition);
        if (convertView == null) {
            LayoutInflater infalInflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = infalInflater.inflate(R.layout.child_layout, null); 
        }
        TextView tv = (TextView) convertView.findViewById(R.id.tvChild);
        tv.setText("   " + farmacoItem.getName());

        // Depending upon the child type, set the imageTextView01
        tv.setCompoundDrawablesWithIntrinsicBounds(0, 0, 0, 0);
        if (farmacoItem instanceof PesoItem) {
            tv.setCompoundDrawablesWithIntrinsicBounds(R.drawable.car, 0, 0, 0);
        }
        return convertView;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        return children.get(groupPosition).size();
    }

    @Override
    public Object getGroup(int groupPosition) {
        return groups.get(groupPosition);
    }

    @Override
    public int getGroupCount() {
        return groups.size();
    }

    @Override
    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    // Return a group view. You can load your custom layout here.
    @Override
    public View getGroupView(int groupPosition, boolean isExpanded, View convertView,
            ViewGroup parent) {
        String group = (String) getGroup(groupPosition);
        if (convertView == null) {
            LayoutInflater infalInflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = infalInflater.inflate(R.layout.group_layout, null);
        }
        TextView tv = (TextView) convertView.findViewById(R.id.tvGroup);
        tv.setText(group);
        return convertView;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:18:54.063

问题是因为你的孩子身上有可聚焦的元素。例如考虑一个按钮，默认情况下它将处于焦点状态。因此，将其设置为 false 即可。

在您的情况下，也许为 Checkbox 添加以下属性

```
 android:focusable="false" 
```

这应该可以解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T14:22:37.633

为可聚焦元素设置`android:focusable="false"`，例如复选框

# .net - 我是否应该使用 NuGet

> ID：10686977
> 
> 赞同：1
> 
> 时间：2012-05-21T14:16:07.090
> 
> 标签：.net, tfs, build, nuget

我正在开始一个 Silverlight 4 / PRISM 项目（VS2010 SP1）。我正在寻找一种使用 TFS 2010 处理外部库（如 PRISM、EF 等）的好方法。

通常我会添加一个 Libs 文件夹，添加每个外部库及其名称和版本，然后添加 dll。另一种选择是使用在 MVC3 项目中使用的 NUGet。

我还考虑了一个构建服务器，我认为它不应该连接到互联网。

在这种情况下，使用 NUGet 在工作区本地加载程序集然后签入到 TFS 以便在其他开发人员和构建服务器之间共享库是一个好习惯吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T14:17:44.430

NuGet 与 MVC 无关。
它设计用于所有 .Net 项目。

默认情况下（除非您启用包还原），NuGet 包（包括 DLL）被签入源代码管理。
它应该适用于任何构建服务器。

# php - 在drupal 7的页脚中添加图像

> ID：10686978
> 
> 赞同：0
> 
> 时间：2012-05-21T14:16:07.247
> 
> 标签：php, drupal, drupal-7, drupal-modules, drupal-theming

我是 Drupal 的新手。我正在使用 Marinelli theam。我创建了一个块并放置在带有一些文本的页脚部分。在 Drupal 7 中，如何在位于页脚部分的块中添加图像..我尝试使用完整的 HTML 和过滤的 HTML文本格式。未添加图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T08:19:04.603

确保图像的路径正确。

1- 在 Drupal Core 模块中启用“PHP 过滤器”模块。

2- 在块内容中，确保文本格式为“PHP 代码”，然后键入以下代码：

```
global $base_path;
print "<img alth='' src='" . $base_path . "PATH_TO_IMAGE/image.jpg' />"; 
```

希望这行得通……穆罕默德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:58:37.343

您可以直接使用所见即所得的编辑器，并在您想要的任何地方使用插入图片。我更喜欢CKEditor。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-11T13:47:11.493

您可以做的是进入块的编辑模式。然后使用以下格式添加图片链接：

```
 <a href="[the link address]"><img src="../sites/all/themes/marinelli /images/[your imagename and extension]"></a> 
```

如果你还没有通过，我希望这会有所帮助。

# java - 从数据处理程序写入文件

> ID：10686979
> 
> 赞同：2
> 
> 时间：2012-05-21T14:16:14.133
> 
> 标签：java, web-services, file, mtom, datahandler

我使用 CXF/MTOM 创建了一个用于传输大文件（超过 700Mo）的 Web 服务，我设法将文件传输到服务器，现在我的问题是优化在磁盘中写入数据，我将给出示例：

```
DataHandler handler = fichier.getFichier();

InputStream is = handler.getInputStream();

OutputStream os = new FileOutputStream(new File("myFile"));

byte[] buffer = new byte[BUFFER];
int bytesRead = 0;
while ((bytesRead = is.read(buffer)) != -1) {
os.write(buffer,0,bytesRead);
     } 
```

使用字节会导致我出现 OutOfMemory，所以我宁愿使用这个：

```
DataHandler handler = fichier.getFichier();

handler.writeTo(os); 
```

上传 700Mo 需要 2 分钟。

还有什么其他有效的方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-22T15:52:31.777

我建议你使用**Apache Commons IO的****IOUtils**类[https://commons.apache.org/proper/commons-io/javadocs/api-release/index.html?org/apache/commons/io/input/package-摘要.html](https://commons.apache.org/proper/commons-io/javadocs/api-release/index.html?org/apache/commons/io/input/package-summary.html)

 **QN：org.apache.commons.io.IOUtils

```
DataHandler handler = docClient.getContent(sid, docId);

InputStream is = handler.getInputStream();
OutputStream os = new FileOutputStream(new File("C:/tmp/myFile.raw"));

// This will copy the file from the two streams
IOUtils.copy(is, os);

// This will close two streams catching exception
IOUtils.closeQuietly(os);
IOUtils.closeQuietly(is); 
```**

# php - PHP - 扩展类的正确方法

> ID：10686981
> 
> 赞同：1
> 
> 时间：2012-05-21T14:16:18.743
> 
> 标签：php, oop, class, extend

我目前正在研究一个迷你“框架”，但遇到了一些困难。我尝试这样做是为了加强我对大多数 MVC 中使用的基本概念的理解（至少从我所见）。所以是的，我确实明白使用框架可能更容易，而且我所做的一切并不是理想的。我只是想了解更多。

所以我有 2 个我目前正在使用的文件。

FrontController.php

```
<?php   
class FrontController {
    public function __construct() {
        $this->go(); // RUNS GO FUNCTION UPON LOADING
    }

    public function go() {          
        $url = $_SERVER['REQUEST_URI']; // GRABS URL
        $action = explode("/", $url); // SPLITS UP URL INTO SECTIONS

        $object = ucfirst($action[2]) . "Controller"; // SETS 2ND SECTION OF URL TO UPPERCASE AND IDENTIFIES THE CONTROLLER
        $file = APP_DIR . "/" . $object . ".php"; // IDENTIFIES THE FILE THAT WILL BE USED

        if(!is_file($file)){ // DETERMINES IF FILE EXISTS
            $this->fail(); // IF NOT, FAILS
        } else {
            require_once $file; // IF EXISTS, PULLS IT IN
            $method = ucfirst($action[3]); // THE 3RD SECTION OF THE URL IS THE METHOD
            $controller = new $object(); // CREATE INSTANCE OF THE IDENTIFIED OBJECT

            if(!method_exists($controller, $method)){ // DETERMINES IF METHOD EXISTS IN THE CLASS
                $this->fail(); // IF NOT, FAILS
            }

            $controller->$method(); // RUN METHOD
            exit(0);
        }
    }

    public function fail() {
        echo "<h1>Failure</h1>"; // FAILURE MESSAGE
    }
} 
```

/application/BaseController.php

```
<?php   
class BaseController {
    public function __construct() {
        $this->session();
    }

    public function session() {
        session_start();
        $_SESSION['is_logged_in'] = 1;
        echo "hi";
    }
} 
```

所以我想做的是用 FrontController 扩展 BaseController。我认为扩展 BaseController 可以让我向整个应用程序添加通用功能。问题是我不确定如何正确执行此操作。我知道我需要以某种方式将 BaseController.php '要求'到 FrontController.php 中，但我已经看到了许多不同的方法，我想知道哪种方法最正确。

我尝试过的只是添加'require_once（“/application/BaseController.php”）；' 到 FrontController.php 的顶部，然后扩展 FrontController 类，但这不起作用（空白页），从我读过的内容来看，这不是最好的方法。

我阅读了 __autoload() 但我不明白如何有效地使用它。我只是把它放在我的 FrontController.php 文件的顶部，然后扩展我的类吗？

所以，总而言之，我想用我的 BaseController 扩展我的 FrontController 类（以及其他未来的类，必要时）。我只是想要一些关于如何有效完成这项任务的建议。甚至有可能我的想法是倒退的，如果是这样，请告诉我！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:43:20.487

你扩展类，如：

```
<?php
class FrontController extends BaseController {
 ..code...
}

?> 
```

__autoload 是一种自动加载类的神奇方法。因此，您可以将其添加到您的 FrontController 作为示例，并根据需要加载您的控制器。在此处阅读有关自动加载类的信息：

[http://php.net/manual/en/language.oop5.autoload.php](http://php.net/manual/en/language.oop5.autoload.php)

此外，利用 PHP 中的 SPL，这将有助于更好地定义您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-26T00:13:57.040

为了给你的框架和你未来的项目一个更好的结构，我建议你使用一些技巧和最佳实践。

*   命名空间：为了更好地组织你的代码和你的类
*   自动加载：以一种智能的方式自动加载你的类

命名空间[http://php.net/manual/en/language.namespaces.php](http://php.net/manual/en/language.namespaces.php)和自动加载[http://php.net/manual/en/language.oop5.autoload.php](http://php.net/manual/en/language.oop5.autoload.php)可以在官方文档中查看。

为了更好地理解，你可以看看这里

1.  定义和注册自动加载功能

    ```
    function autoload($class) {
        preg_match('/^(.+)?([^\\\\]+)$/U', ltrim( $class, '\\' ), $match ) );
        require str_replace( '\\', '/', $match[ 1 ] ). str_replace( [ '\\', '_' ], '/', $match[ 2 ] ). '.php';
    }

    spl_autoload_register('autoload'); 
    ```

2.  在应用程序周围使用命名空间

基本控制器

```
 <?php namespace App\Controller;

    class BaseController { ... } 
```

前端控制器

```
 <?php namespace App\Controller;
    use App\Controller\BaseController as BaseController;

    class FrontController extends BaseController { ... } 
```

# c# - 将作业添加到特定用户的 PrintQueue

> ID：10686983
> 
> 赞同：7
> 
> 时间：2012-05-21T14:16:31.770
> 
> 标签：c#, printing, impersonation

我有一个应用程序可以根据用户请求生成一些中央文件。创建文件后，我希望能够将它们放入该用户的打印队列中（在该组织中，有一个中央打印队列，因此用户负责打印自己的文档），以便它们可以当用户准备好时打印出来。

通过使用`System.Printing`.net 中的程序集，我可以将作业添加到我自己的打印队列中，所以我在这方面做得很好。我的打印代码如下所示：

```
private void RunPrintJob( string myFileName )
    {
        PrintServer ps = new PrintServer(@"\\printatron");
        PrintQueue queue = new PrintQueue(ps, "psandqueues");
        try
        {
            PrintSystemJobInfo pj = queue.AddJob(myFileName);
            Stream myStream = pj.JobStream;
            Byte[] myByteBuffer = GenerateBufferFromFile(myFileName);                myStream.Write(myByteBuffer, 0, myByteBuffer.Length);
            myStream.Close();
        }
        catch (Exception ed)
        {
            Debug.WriteLine(ed.Message);
            if (ed.InnerException != null)
            {
                Debug.WriteLine(" -> " + ed.InnerException);
            }
            result = false;
        }
        queue.Commit();
    } 
```

所以我有我集中创建的文档，我知道哪个用户负责他们的创建，我可以将它们发送到打印机。

我现在需要的是一种将它们发送到打印机的方法，并将创建它们的用户设置为他们的用户。有没有办法通过打印队列做到这一点？我知道它可以从`PrintSystemJobInfo.Submitter`属性中读取，但那是只读的。如果不是，我是否必须通过模拟来做到这一点，如果是的话，在后一种情况下，我能做些什么来避免必须存储一堆用户密码并且每次用户更改密码时软件都会失败？这似乎是一种非常笨拙的操作方式，但是由于此活动当前不是交互式执行的，我还有哪些其他选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T22:40:55.320

我正在做类似的事情。如果进程有足够的权限来获得您需要的模拟级别（例如模拟或授权与识别），模拟也不会太糟糕。

这是我模仿的方法：

```
 public static bool GetImpersonationToken(string UPN, out IntPtr dupToken)
    {
        dupToken = IntPtr.Zero;
        WindowsImpersonationContext impersonationContext = null;

        bool result = false;
        try
        {
            WindowsIdentity wid = new WindowsIdentity(UPN);
            impersonationContext = wid.Impersonate();
            result = DuplicateToken(wid.Token, 2, ref dupToken) != 0;
        }
        finally
        {
            if (impersonationContext != null)
                impersonationContext.Undo();
        }

        return result;
    } 
```

注意：清理该令牌句柄是调用方法的责任。

我从基于用户电子邮件的 LDAP 查询中解析 UPN（通常它们是相同的，但通常它们不是）。

但是我传入的字节数组存在一些问题。我尝试了 File.ReadAllBytes，但这会导致打印机吐出乱码。GenerateBufferFromFile 中是否需要进行一些特殊编码？

** 更新 **

看起来直接使用 JobStream 有很多问题：

[PrintSystemJobInfo.JobStream 是否损坏？](https://stackoverflow.com/questions/2042138/is-printsystemjobinfo-jobstream-broken)

所以我只是要写文件，尽管我希望避免这种情况。

# jsrender - 布局模板的jsrender问题

> ID：10686987
> 
> 赞同：1
> 
> 时间：2012-05-21T14:16:54.950
> 
> 标签：jsrender

我下载了最新版本的[jsRender](https://github.com/BorisMoore/jsrender)，发现布局模板不“受支持”。我以前用

```
{{for ListData  tmpl="#LayoutTmpl" ~variable=value Layout=true  /}} 
```

但是在快速查看 jsRender js 代码后，我发现在最新版本中，“Layout”变量重命名为“isLayout”。我试过这个

```
 {{for ListData  tmpl="#LayoutTmpl" ~variable=value isLayout=true  /}}

<script id="LayoutTmpl" type="text/x-jsrender">
 {{:#parent.parent.data.propertyName}}
   {{if #data.length > 0}}
     {{for #data}}
       {{:propertyName}}
     {{/for}}
   {{else}}
       do something
   {{/if}}
</script> 
```

但没有运气。嵌套布局模板呈现为普通模板，并且由于数据对象未被识别为列表类型，因此我得到了“做某事”。

有谁知道我该如何解决这个问题？当然我想避免回滚到以前的版本。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T05:32:19.643

在此处的新设计中，有一个示例展示了如何实现该场景：[页眉和页脚示例](http://borismoore.github.com/jsrender/demos/scenarios/05_arrays-plus-headers-and-footers.html)。

[另外，请在此处](https://github.com/BorisMoore/jsrender/issues/124)查看 GitHub 上对您的问题的回复

# php - 发送电子邮件失败.. 使用 php 函数

> ID：10686989
> 
> 赞同：0
> 
> 时间：2012-05-21T14:16:58.760
> 
> 标签：php, email

我有有效的电子邮件方法：

```
 <?php
     $to = "eddy2012@gmail.com";
     $subject = "Hi!";
    $body=email_template('http://zzzzedapps.com/app_dl.php?app_id=34', $app_pic, $app_name);
    echo $body;
     $headers = 'From: info@zzzzedapps.com' . "\r\n" .
        'Reply-To: info@zzzzedapps.com' . "\r\n" .
        'X-Mailer: PHP/' . phpversion();
     if (mail($to, $subject, $body,$headers)) {
       echo("<p>Message successfully sent!</p>");
      } else {
       echo("<p>Message delivery failed...</p>");
      }
     ?> 
```

但是当我使用这个函数来设置body变量时..：

```
 function email_template($app_link, $img_link, $app_name){
       $message='
            <html xmlns="http://www.w3.org/1999/xhtml">
            <head>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            </head>
            <body>

      <div id="pic" style="position:relative; text-align:center; margin:0px auto;width:320px; height: 480px;">
       <a href="http://zzzzedapps.com">  
       <div id="logo" style="position:absolute; width:130px; height:35px; z-index:99999;top:5;">
       </div>
       </a>
        <div id="clickHere" style=" position:absolute;width:320px;height:50px;z-index:99999;top:60px;text-align: center;">
            <span id="clickHereText" style="font-size:140%; color:white;"> <a href="'.$app_link.'" style="color:yellow">Click Here</a> to Download<br/>
                 your phonemate app
                 </span>
        </div>

        <div id="appImg" style="position:absolute;width:50px; height:50px;z-index:99999; left:50px;top:210px;">
            <img src="http://zzzzedapps.com/'.$img_link.'" width="53px" height="53px"/>
        </div>
        <div id="appLabel" style="position:absolute; width:50px; height:10px; z-index:99999; text-align: center; left:50px; top:260px;">
            <span style="color:white; font-size: 50%;">'.$app_name.'</span>
        </div>

        <div id="downloadLink" style="position:absolute; width:320px; height:30px;  z-index:99999; bottom:0px; text-align: center;">
            <a href="'.$app_link.'" style="color:yellow">Download our app on zzzzedApps.com</a>
        </div>
       <img src="http://zzzzedapps.com/email/images/zzzzedAppEmail.jpg"/>
    </div>
       </body>
   </html>';

  return $message;
} 
```

它无法传递电子邮件。

这失败了：

```
$body=email_template('http://zzzzedapps.com/app_dl.php?app_id=34', $app_pic, $app_name); 
```

虽然身体呼应成功？

我在哪里有错误..我该如何克服它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:27:39.063

您正在使用 php 的[`mail`](http://php.net/manual/en/function.mail.php)功能发送 html 邮件，请查看手册，具体为：

```
// To send HTML mail, the Content-type header must be set 
```

在示例 #4 中。

我也很确定你需要摆脱`doctype`.

# c++ - 出错后如何结束 C++ 程序？

> ID：10686997
> 
> 赞同：9
> 
> 时间：2012-05-21T14:17:20.473
> 
> 标签：c++, error-handling

我正在重构旧代码，我想解决的一件事是处理错误的方式。我很清楚异常以及它们是如何工作的，但我不完全确定它们是我试图处理的情况的最佳解决方案。

在这段代码中，如果事情没有得到验证，那么展开堆栈真的没有理由或优势。我们完成了。试图挽救这艘船毫无意义，因为它是通过 Sun Grid Engine 并行运行的非交互式代码。用户无法干预。更重要的是，这些验证失败并不真正代表特殊情况。他们是意料之中的。

那么我该如何最好地处理这个问题呢？我不确定我想要的一件事是每个可能失败的类方法中的退出点。这似乎是不可维护的。我错了吗？在这样的代码中调用`exit()`或`abort()`在故障点是否可以接受？或者我应该一直抛出异常回到main中的一些通用catch语句？有什么好处？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T14:31:17.567

如果程序不能优雅地处理错误，终止程序是可以接受的。您可以做的事情很少：

*   [`abort()`](http://www.kernel.org/doc/man-pages/online/pages/man3/abort.3.html)如果您需要核心转储，请致电。
*   [`exit()`](http://www.kernel.org/doc/man-pages/online/pages/man3/exit.3.html)如果您想有机会运行那些注册的例程[`atexit()`](http://www.kernel.org/doc/man-pages/online/pages/man3/atexit.3.html)（最有可能调用全局 C++ 对象的析构函数），请调用。
*   调用[`_exit()`](http://www.kernel.org/doc/man-pages/online/pages/man2/exit.2.html)以立即终止进程。

只要你明白自己在做什么，知道你的其他选择，并且心甘情愿地选择那条路，使用这些功能并没有错。毕竟，这就是存在这些功能的原因。因此，如果您认为尝试处理错误或在错误发生时执行其他任何操作没有任何意义 - 请继续。我可能会尝试记录一些信息性消息（例如，到 syslog），然后调用`_exit`. 如果日志记录失败 - 调用`abort`以获取沿终止的核心。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T14:59:59.143

抛出要在 main 中捕获的异常然后退出意味着您的 RAII 资源对象被清理。在大多数系统上，很多资源类型都不需要这样做。操作系统将清理内存、文件句柄等（尽管我使用的系统未能释放内存意味着它一直分配到系统重新启动，因此在程序退出时泄漏不是一个好主意。）

但是还有其他资源类型您可能想要干净地释放，例如网络或数据库连接，或者您正在驾驶并需要安全关闭的机械设备。如果一个应用程序使用了很多这样的东西，那么你可能更愿意抛出一个异常来将堆栈展开回 main，然后退出。

所以适当的退出方法取决于应用程序。如果应用程序知道它是安全的，那么调用 _Exit()、abort()、exit() 或 quickexit() 可能是完全合理的。（库代码不应该调用这些，因为显然库不知道它对于每个将使用该库的应用程序是否安全。）如果在应用程序退出之前必须执行一些关键的清理，但你知道它是有限的，然后应用程序可以通过 atexit() 或 at_quick_exit() 注册该清理代码。

所以基本上决定你需要清理什么，记录它，实施它，并尝试确保它已经过测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T14:21:15.980

我建议调用全局函数

```
void stopProgram() {
  exit(1);
} 
```

稍后您可以更改它的行为，因此它是可维护的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T14:24:34.500

正如您所指出的，在整个代码中使用`exit`or`abort`是不可维护的……此外，将来可能会有一种机制可以让您从错误中恢复，或者以比简单的更优雅的方式处理错误退出，并且如果您已经在其中硬编码了此功能，那么将很难撤消。

抛出一个被捕获的异常`main()`是你目前最好的选择，如果你在不同的场景下运行代码，这也将为你提供灵活性，这将允许你从错误中恢复，或者以不同的方式处理它们。此外，如果您决定添加更多调试支持等，抛出异常可能会有所帮助，因为在您决定让程序退出之前，它将为您提供实现日志功能并从软件中的隔离和可维护点记录程序状态的位置。