# StackOverflow 问答 11317000-11317999

# jquery - 这个 jquery 对话框焦点功能有什么问题？

> ID：11317000
> 
> 赞同：0
> 
> 时间：2012-07-03T18:30:21.200
> 
> 标签：jquery, dialog, focus

如果有人可以帮助我，我将永远感激不尽。

从本质上讲，焦点功能应该是这样，如果用户在对话框中的 3 个字段中的最后一个字段之外的任何字段中按下回车键，它就会充当一个选项卡。如果他们在最后一个字段中按回车键，它会提交表单。后一个功能有效，但制表符无效。

有谁知道为什么？我没有发布整个代码块，但这应该提供足够的数据。我使用 event.target 错了吗？

```
$('#dialog-add-items').dialog({
        autoOpen: false,
        resizable: false,
        width:500,
        position:['center',80],
        modal: true,
        focus: function() {
            $(':input:last', this).unbind('keyup').keyup(function(event) {
                if (event.keyCode == 13) {
                    $('.ui-dialog-buttonpane button:first').click();
                }
            });
            $(':input:not(:last)', this).unbind('keyup').keyup(function(event){
                if(event.keyCode == 13){
                    name=event.target;
                    $(name).next('input').focus();
                }
            });
        },... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:40:21.543

如果我不得不猜测，我会说这`$('.ui-dialog-buttonpane button:first').click();`是罪魁祸首。尝试为您的按钮提供一个 ID 和参考，如下所示：

```
$('#dialog-add-items').dialog({
        autoOpen: false,
        resizable: false,
        width:500,
        position:['center',80],
        modal: true,
        focus: function() {
            $(':input:last', this).unbind('keyup').keyup(function(event) {
                if (event.keyCode == 13) {
                    $('#okbutton').click();
                }
            });
            $(':input:not(:last)', this).unbind('keyup').keyup(function(event){
                if(event.keyCode == 13){
                    name=event.target;
                    $(name).next('input').focus();
                }
            });
        },
        buttons: [{text: 'Ok', id:'okbutton'}],... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:34:21.087

我最后只是添加了一个 if/else 语句来测试 2 个字段中的哪一个被聚焦，然后跳转到下一个。笨重而丑陋，但这是我唯一可以开始工作的事情。

# excel - 将 Excel 函数转换为 R

> ID：11317001
> 
> 赞同：2
> 
> 时间：2012-07-03T18:30:26.793
> 
> 标签：excel, r, for-loop, dataframe, finance

我有两个要转换为 R 的 excel 函数：

```
numberShares
=IF(AND(N213="BOH",N212="BOH")=TRUE,P212,IF(AND(N213="BOH",N212="Sell")=TRUE,ROUNDDOWN(Q212/C213,0),0))

marketValue
=IF(AND(N212="BOH",N213="BOH")=TRUE,C213*P212,IF(AND(N212="Sell",N213="Sell")=TRUE,Q212,IF(AND(N212="BOH",N213="Sell")=TRUE,P212*C213,IF(AND(N212="Sell",N213="BOH")=TRUE,Q212)))) 
```

引用的单元格包括：

*   c = 股票收盘价
*   n =“买入或持有”或“卖出”的头寸值
*   p = 股数
*   q = 市场价值，假设初始股本为 10,000 美元（股票数量*收盘价）

我试图重新创建的两个输出列的顶部如下所示 [：](http://i.imgur.com/Ew3Xm.png)

到目前为止，在 RI 中已经构建了一个包含必要四列的数据框： [data.frame](http://i.imgur.com/WXKPa.png)

我只是不知道如何编写将填充股票数量和市值列的函数。对于循环？如果别的？

再次谢谢你！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T18:56:23.680

将 AND() 隐藏为中缀“&”；“=”到“==”；和 ifelse() 的 IF，你就到了一半。问题在于将单元格引用转换为数组或矩阵引用，对于该任务，我们需要更好地描述数据布局：

```
numberShares <- 
  ifelse( N213=="BOH" & N212=="BOH",  
         #Perhaps PosVal[213] == "BOH" & PosVal[212] == "BOH"
      # ... and very possibly the 213 should be 213:240 and the 212 should be 212:239
             P212, 
             ifelse( N213=="BOH" & N212=="Sell" ,
                         round(Q212/C213, digits=0),
                         0)) 
```

（您似乎返回了不相称的值，这似乎令人怀疑。）假设这是正确的代码，尽管我有疑虑，下一个翻译涉及在此结构中应用相同的替换（尽管您似乎在最后一个 IF 函数中缺少一个 else-consequent：

```
marketValue <- 
 IF( AND(N212="BOH", N213="BOH")=TRUE, 
           C213*P212, 
           IF(AND(N212="Sell",N213="Sell")=TRUE, 
                     Q212, 
                     IF( AND(N212="BOH",N213="Sell")=TRUE, 
                            P212*C213, 
                            IF(AND(N212="Sell",N213="BOH")=TRUE, 
                                         Q212)))) 
```

（我认为您的测试`AND( .,.)=TRUE`在 Excel 中是不必要的，在 R 中当然是不必要的。）

# firefox-addon - 在 Firefox 的 browser.js 中调用 toggleSidebar

> ID：11317005
> 
> 赞同：3
> 
> 时间：2012-07-03T18:30:36.020
> 
> 标签：firefox-addon, firefox-addon-sdk

在尝试创建 Firefox 侧边栏时，我看到了许多对[browser.js的引用。](http://mxr.mozilla.org/mozilla-central/source/browser/base/content/browser.js)我对这个文件是什么没有很好的理解。它有一个方法 toggleSidebar 在里面。我可以从网页调用该方法吗？我可以从浏览器扩展程序调用它吗？我需要先以某种方式在我的扩展中包含 browser.js 吗？我可以从附加 SDK 调用它还是只能从旧式 XUL 扩展中使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:02:41.197

> 我对这个文件是什么没有很好的理解。

它是驱动 Firefox 浏览器窗口的代码，实际上有很多代码。

> 我可以从网页调用该方法吗？

不可以。不过，您可以使用[window.sidebar.addPanel()](https://developer.mozilla.org/en/DOM/window.sidebar)添加侧边栏。

> 我可以从浏览器扩展程序调用它吗？

是的。

> 我需要先以某种方式在我的扩展中包含 browser.js 吗？

不，它已经包含在浏览器窗口中。

> 我可以从附加 SDK 调用它还是只能从旧式 XUL 扩展中使用它？

您也可以从 Add-on SDK 中使用它，但您需要直接访问浏览器窗口 - 通过低级模块之一或[chrome authority](https://addons.mozilla.org/en-US/developers/docs/sdk/1.7/dev-guide/tutorials/chrome.html)。

# c# - 我应该对 ObjectContext 使用 using 关键字吗？

> ID：11317009
> 
> 赞同：3
> 
> 时间：2012-07-03T18:31:00.670
> 
> 标签：c#, asp.net, entity-framework

我在本网站或 CodeProject 上的某处读到，好的规则是，如果某个类实现了 IDisposable 接口，那么您应该使用 using 关键字，因为使用转换为 MSIL 的关键字会尝试/最终阻止类似这样的内容：

```
try
{
   //some logic 
}
finally
{
   if (obj != null)
      {
         obj.Dispose();
      }
} 
```

但是在观看 Entity Framework 的教程时，我遇到了这样的事情：

```
using(SampleBEntities db = new SampleBEntities()){//some logic here} 
```

SampleBEntities 继承自 ObjectContext 并且在 MSDN lib ObjectContext 中没有实现 IDisposable？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T18:32:25.163

是的，它确实实现了`IDisposable`接口。

```
public class ObjectContext : IDisposable 
```

查看[MSDN](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx)

它具有`Dispose()`来自实现`IDisposable`接口的方法。

如果它没有按照你所说的那样实现，让它单独运行，它甚至不会编译。

**使用语句**

Using 定义了一个范围，一个或多个对象将在该范围之外被释放。

C# 通过 .NET Framework 公共语言运行时 (CLR) 自动释放用于存储不再需要的对象的内存。内存的释放是不确定的；每当 CLR 决定执行垃圾回收时，就会释放内存。

using 语句允许我们指定使用资源的对象何时应该释放它们。**提供给 using 语句的对象必须实现 IDisposable 接口。该接口提供了 Dispose 方法，该方法应该释放对象的资源。**

当到达 using 语句的末尾或抛出异常并且控制在语句结束之前离开语句块时，可以退出 using 语句。

# arrays - 如何遍历一系列数字并查找数组中包含的数字？

> ID：11317018
> 
> 赞同：0
> 
> 时间：2012-07-03T18:31:30.950
> 
> 标签：arrays, perl, iteration

我正在尝试制作一个简单的 Perl 脚本来获取一系列数字（`0..255`），遍历每个数字并找到不在另一个数组中的数字。

这样做的目的是让我可以找到我的游戏中尚未占用的 Minecraft 块 ID。第一个数组是一个范围`0..255`，它是最大可能的块 ID。下一个数组是已经使用的 id，它们已经列出了列表。

所以我想要某种循环来检查每个可能的块 id。当我到达我的电脑时，我会发布我所拥有的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T18:38:14.640

最简单（也是最快）的方法是将另一个数组转换为哈希，并检查那里是否存在键：

```
my %hash = map { $_ => 0 } @array2;

print (exists $hash{$_} ? "$_ is there\n" : "$_ is not there\n") for(0..255); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:14:50.673

为什么不使用

```
$occupied_lookup[$_] = 1 for 4,5,6; 
```

代替

```
@occupied_indexes = (4,5,6); 
```

更容易和更快地占用一些东西：

```
$occupied_lookup[$_] = 1; 
```

更容易和更快地制作空置的东西：

```
$occupied_lookup[$_] = 0; 
```

更容易更快地检查是否有人占用：

```
if ($occupied_lookup[$_]) 
```

查找所有占用的索引仍然很容易：

```
my @occupied_indexes = grep $occupied_lookup[$_], 0..$#occupied_lookup; 
```

（其他人建议使用哈希，但数组更快。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:43:21.873

两个数组之间的差异并不一定意味着您需要 for 循环或 while 等。这会打印 @allblocks 中不在 @occupiedones 中的项目。

```
#!usr/bin/perl
use warnings;
use strict;
my @allblocks=(0...255);
my @occupiedones=(1,2,80,255)

my %occupiedones=map{$_=>1} @occupiedones;

# the difference of two arrays

my @diff=grep(!defined $occupiedones{$_}, @allblocks);

# proof it works
print "This is in one array and not the other:\t$_\n" foreach (@diff); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T18:43:44.580

这可以满足您的需求。代码中的注释解释。

```
#!/usr/bin/perl

use warnings;
use strict;

# Print members of @b that are not in @a.
# That is, loosely speaking, print @b minus @a.

my @a = (10, 20, 30, 40, 50);
my @b = (22, 25, 30, 40, 42);

my %a = map {$_=>1} @a;
$a{$_} or print "$_ " for @b;
print "\n"; 
```

这个想法是`@a`变成散列`%a`，然后用散列来控制减法。在散列中，只有键是感兴趣的；对应的值都是 just `1`，这对于这种应用程序来说是常规的（虚拟值是 Perl 实现在 C++ 中称为*set*的方式）。

# .net - 可以在 Lucene.Net 下使用“仅限 Java”分析器吗？

> ID：11317020
> 
> 赞同：1
> 
> 时间：2012-07-03T18:31:38.453
> 
> 标签：.net, lucene, full-text-search, lucene.net, snowball

我认为答案是“不”。但我看到了微软 MVP Simone Chiaretta 的[一些有趣的话：](http://codeclimber.net.nz/archive/2009/08/31/lucene.net-the-main-concepts.aspx)

> **目录**
> 
> 索引结构与 Lucene 的所有端口兼容，因此您也可以使用 .NET 完成索引并使用 Java 进行搜索，或者反过来......
> 
> **分析仪**
> 
> 简而言之，分析器包含从文本中提取索引词的策略。.....而且java版本还有更多的分析器还没有移植到.net。

由此可见，我可以使用非 .NET 功能（例如使用 Snowball 分析器）创建索引，并在 Lucene.Net 驱动的应用程序中使用它。这是真的还是假的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:37:05.050

要记住的一个重要因素是在搜索时将使用哪个分析器。如果用于解析和分析搜索文本的分析器不会还原到索引分析器输出的内容，那么就会出现误报。因此，虽然您的索引可以从 Lucene.Net 中正常读取，但您可能会丢失结果。

# bjam - 用于 Jamroot 路径的 boost-build/bjam 常量

> ID：11317026
> 
> 赞同：0
> 
> 时间：2012-07-03T18:32:19.333
> 
> 标签：bjam, boost-build

有没有办法获取 Jamroot 文件的位置，以用作项目中另一个 Jamfile 中的常量？

现在，我的 Jamroot 中有这个杂物：

```
constant HOME : [ os.environ HOME ] ;
constant MYPROJECT_ROOT : $(HOME)/src/myproject ; 
```

然后稍后我可能会在另一个 Jamfile 中执行类似的操作，以允许我包含带有来自项目根目录的路径的标题。

```
<include>$(MYPROJECT_ROOT) 
```

这尤其令人不满意，因为这意味着如果我与其他人共享此项目，他们必须将其保存在相对于他们的完全相同的位置，`$HOME`或者他们必须更新 Jamroot。

我对执行此特定包含的智能方法感兴趣（而不是我无知的初学者使用常量的方法）。但我也有兴趣按照我提出的方式解决问题——通过将 Jamroot 位置设置为常量——因为这在其他方面也可能有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T04:56:42.200

使用`path-constant`规则。

```
path-constant MYPROJECT_ROOT : . ; 
```

然后在子项目中，您可以使用`$(MYPROJECT_ROOT)`.

请注意，通常人们将此变量命名为 TOP 而不是 MYPROJECT_ROOT，但这只是一个约定。

# sitecore - 如何记住 Sitecore 自定义用户配置文件中的密码字段？

> ID：11317032
> 
> 赞同：0
> 
> 时间：2012-07-03T18:32:37.093
> 
> 标签：sitecore, sitecore6

我在添加到 Sitecore 用户配置文件的自定义属性时遇到了一个烦人的问题。

我在自定义用户配置文件中添加了一个密码字段，但该字段不会在加载时预填充值，因此如果我更改其他字段并保存，它将用空白覆盖现有密码，除非我输入每次编辑时再次输入密码。

例如，

自定义用户配置文件原始保存数据： 1\. 电话号码 = 123.456.7890 2\. 密码 = 1234

仅编辑电话号码并保存： 1\. 电话号码 = 123.123.1234 2\. 密码 = [空白]

问题是因为密码字段在加载时总是显示为空白，有没有办法让这个字段获取数据并屏蔽它？还是我们必须覆盖现有的 Sitecore 字段解析器类以忽略空格？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:41:26.183

检查 Sitecore 文档后...

如果不重写安全 API，就无法处理这个问题。由于用户配置文件模板仅处理基本文本字段类型。

# php - 使用 sql_fetch_array 或使用 csv 字符串挖掘数据并使用 php 分隔值是否更快？

> ID：11317033
> 
> 赞同：0
> 
> 时间：2012-07-03T18:32:37.953
> 
> 标签：php, mysql

我正在一个应该显示计算机规格的网站上工作，例如：Cpu、cpu 速度、内存和类似的东西。有很多字段，我想知道 php 的 mysql_fetch_array 是否会更快或将所有数据保存在一个 varchar 字段中并使用 php 将其分开？还想知道它们中的任何一个是否有任何优点和缺点？我正在使用 php 5.3 和 mySQL 提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:57:34.770

如果我是你，我将使用 A 数据库，但 Everything in 使用实体关系图 + 规范化分隔字段和表（DB 关系）。这样做您将具有可扩展性、独立性、避免冗余，此外，如果您添加良好的 INDEX（PK、FK 和 UK），您可以获得良好的性能。当然，这也取决于您的查询和 PHP 代码。但这是实施正确的数据库设计和安全性的好习惯。

优点很多......缺点，它会花费你更多的时间，但它是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:01:41.050

我怀疑速度差异是否会变得很重要。重要的是您是否具有常规结构以及自由查询数据的能力。将其放入数据库并弄清楚如何在以后/如果它成为问题时加快速度，而不是因为您认为您可能需要更高的性能而预先做出糟糕的设计决策。

# django - Django - 匿名用户组

> ID：11317034
> 
> 赞同：4
> 
> 时间：2012-07-03T18:32:40.007
> 
> 标签：django

我需要允许管理员管理我站点上模型的权限。组、用户和权限现在在这方面做得很好。但是，我还需要允许管理员管理未经身份验证的用户 - 匿名用户的权限。文档说匿名用户的组总是空的，那么我怎样才能允许管理他们的权限呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T18:41:09.560

给匿名用户添加权限很奇怪。[文档](https://docs.djangoproject.com/en/1.3/topics/auth/#authorization-for-anonymous-users)说：

> Django 的权限框架没有为匿名用户存储权限的地方。但是，它有一个基础，允许自定义身份验证后端为匿名用户指定授权。这对于可重用应用程序的作者特别有用，他们可以将所有授权问题委托给 auth 后端，而不需要设置，例如控制匿名访问。

因此，您可以将权限设置为 anon yuser，但使用自定义身份验证后端。有时最好使用声明性权限检查，在具有所需权限的视图上使用装饰器，例如：

```
@permission_required('somemodel.can_add')
def add_model(request): 
```

或对所有人（包括匿名用户）不加限制。或一些自定义权限检查..

或者，如果您无论如何都想拥有权限，您可以随时创建一个虚拟用户，比如“AnonUser”，为其授予权限，然后检查权限以获得以下内容：

```
if not user.is_authenticated():
    dummy_user = User.objects.get(name="AnonUser")
    if dummy_user.has_perm("somepermission"):
        # bla bla bla 
```

但这是我永远不会使用的东西..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-20T15:44:00.743

我已经使用自定义后端来提供匿名组（正如[@Tisho 建议](https://stackoverflow.com/a/11317148/1888983)的那样），可以从管理界面轻松编辑。`AUTHENTICATION_BACKENDS`在`settings.py`（例如`'appname.auth_backend.AnonymousPermissions'`）中添加以下类。

请注意，在检查权限之前要求登录是很常见的（例如使用`login_required`），这将必须替换为仅权限检查。

```
from django.contrib.auth.models import Group

class AnonymousPermissions(object):

    def get_anonymous_permissions(self):
        #largely from django.contrib.auth.backends
        group, group_created = Group.objects.get_or_create(name='Anonymous')
        perms = group.permissions.all()
        perms = perms.values_list('content_type__app_label', 'codename').order_by()
        perms = set("%s.%s" % (ct, name) for ct, name in perms)
        return perms

    def get_group_permissions(self, user_obj, obj=None):
        if user_obj.is_anonymous:
            perm_cache_name = '_anonymous_perm_cache'
            if not hasattr(user_obj, perm_cache_name):
                setattr(user_obj, perm_cache_name, self.get_anonymous_permissions())
            return getattr(user_obj, perm_cache_name)
        return set()

    def get_all_permissions(self, user_obj, obj=None):
        return self.get_group_permissions(user_obj, obj)

    def has_perm(self, user_obj, perm, obj=None):
        return perm in self.get_group_permissions(user_obj, obj) 
```

# mysql - MySQL 复制 - 如何验证复制的数据？

> ID：11317035
> 
> 赞同：0
> 
> 时间：2012-07-03T18:32:42.383
> 
> 标签：mysql, replication, verify

如何验证从 MySQL 服务器上的复制数据？

有什么可推荐的工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:39:24.933

如果您在 *nix 上运行，则有“Percona Toolkit”

您可以查看：[Percona 工具包](http://www.percona.com/software/percona-toolkit/)

还有“ [Maatkit](http://www.maatkit.org/) ”，但我看到它移到了 Percona。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:59:09.683

可以完成这项工作的确切工具是[pt-table-checksum](http://www.percona.com/doc/percona-toolkit/2.1/pt-table-checksum.html)，它通过在 master 上执行校验和查询来执行在线复制一致性检查，这会在与 master 不一致的副本上产生不同的结果。可选的 DSN 指定主控主机。如果发现任何差异，或者出现任何警告或错误，则该工具的退出状态为非零。

# iphone - 创建具有不同 css 样式的移动网页

> ID：11317038
> 
> 赞同：0
> 
> 时间：2012-07-03T18:33:17.453
> 
> 标签：iphone, html, web

我想知道如果我使用 3 个不同的 css 文件，iPhone / iPad 的移动浏览器会下载所有 3 组 css 文件，还是只下载与屏幕尺寸相关的一组？通过使用这个。

```
<link media="only screen and (max-width: 320px)" href="iphone-portrait.css" type= "text/css" rel="stylesheet">
<link media="only screen and (min-width: 321px) and (max-width: 480px)" href="iphone-landscape.css" type= "text/css" rel="stylesheet">
<link media="only screen and (min-device-width: 481px)" href="desktop.css" type="text/css" rel="stylesheet"> 
```

我从[http://www.w3schools.com/html5/html5_app_cache.asp找到了要使用的答案](http://www.w3schools.com/html5/html5_app_cache.asp)

即使您有 3 个不同的 css 文件用于移动设备，将 css 存储到 iphone，也会将带宽最小化为每个 css 仅下载 1 次，这将在使用更少带宽的同时加快网站速度。

创建一个 .htaccess 文件并将其放入。

```
AddType text/cache-manifest manifest 
```

然后创建另一个名为 demo.manifest 的文件并放入

```
CACHE MANIFEST 
# v0.0.1
icon.png
desktop.css
iphone-landscape.css
iphone-portrait.css 
```

然后在 html 页面上，您必须通过这样做来声明它。

```
<html manifest="demo.manifest"> 
```

更新 css 和文件后，您只需更新 demo.manifest 和浏览器，并再次下载新版本的 demo.manifest 及其所有内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T19:19:26.000

以下是标准设备的媒体查询（来自 CSS-Tricks.com）：

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Styles */
}

/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {
/* Styles */
}

/* Large screens ----------- */
@media only screen 
and (min-width : 1824px) {
/* Styles */
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

所有显示 /* Styles */ 的区域都是您为支持的不同设备放置单独的 CSS 组件的地方。

**请注意：这是一个非常复杂的媒体查询表。我通常会删除横向的东西，而 iPhone 媒体查询会处理大多数智能手机，因此通常不需要为此设置两个单独的查询。这是我通常使用的：

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Styles */
}

/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {
/* Styles */
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:38:05.860

如果你全部调用它们，它们都会被加载。最好的计划是使用[媒体查询](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)来分离但在一张表中提供所有样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:36:15.297

它将下载所有这些，除非您创建一些 javascript 来防止这种情况。

# c# - 使用 Protobuf-net 序列化分块字节数组的内存使用

> ID：11317045
> 
> 赞同：9
> 
> 时间：2012-07-03T18:33:47.220
> 
> 标签：c#, protobuf-net, chunking, large-object-heap

在我们的应用程序中，我们有一些数据结构，其中包含一个分块的字节列表（当前公开为`List<byte[]>`）。我们将字节分块，因为如果我们允许将字节数组放在大对象堆上，那么随着时间的推移，我们会遭受内存碎片的困扰。

我们还开始使用 Protobuf-net 序列化这些结构，使用我们自己生成的序列化 DLL。

然而，我们注意到 Protobuf-net 在序列化时创建了非常大的内存缓冲区。浏览源代码，它似乎可能在整个结构被写入之前无法刷新其内部缓冲区，`List<byte[]>`因为它需要在之后将总长度写入缓冲区的前面。

不幸的是，这首先取消了我们对字节进行分块的工作，并最终由于内存碎片给了我们 OutOfMemoryExceptions（异常发生在 Protobuf-net 试图将缓冲区扩展到超过 84k 的时候，这显然把它放在LOH，我们的整体进程内存使用率相当低）。

如果我对 Protobuf-net 工作原理的分析是正确的，有没有办法解决这个问题？

* * *

**更新**

根据马克的回答，这是我尝试过的：

```
[ProtoContract]
[ProtoInclude(1, typeof(A), DataFormat = DataFormat.Group)]
public class ABase
{
}

[ProtoContract]
public class A : ABase
{
    [ProtoMember(1, DataFormat = DataFormat.Group)]
    public B B
    {
        get;
        set;
    }
}

[ProtoContract]
public class B
{
    [ProtoMember(1, DataFormat = DataFormat.Group)]
    public List<byte[]> Data
    {
        get;
        set;
    }
} 
```

然后序列化它：

```
var a = new A();
var b = new B();
a.B = b;
b.Data = new List<byte[]>
{
    Enumerable.Range(0, 1999).Select(v => (byte)v).ToArray(),
    Enumerable.Range(2000, 3999).Select(v => (byte)v).ToArray(),
};

var stream = new MemoryStream();
Serializer.Serialize(stream, a); 
```

`ProtoWriter.WriteBytes()`但是，如果我在它调用方法底部的位置放置一个断点`DemandSpace()`并进入`DemandSpace()`，我可以看到缓冲区没有被刷新，因为`writer.flushLock`equals `1`。

如果我像这样为 ABase 创建另一个基类：

```
[ProtoContract]
[ProtoInclude(1, typeof(ABase), DataFormat = DataFormat.Group)]
public class ABaseBase
{
}

[ProtoContract]
[ProtoInclude(1, typeof(A), DataFormat = DataFormat.Group)]
public class ABase : ABaseBase
{
} 
```

然后`writer.flushLock`等于。`2`_`DemandSpace()`

我猜我在这里错过了一个与派生类型有关的明显步骤？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T06:31:05.693

我将在这里阅读一些行之间的内容......因为`List<T>`(mapped as `repeated`in protobuf parlance) 没有整体长度前缀，并且`byte[]`(mapped as `bytes`) 有一个不应该导致额外缓冲的微不足道的长度前缀。所以我猜你*实际上*拥有的更像是：

```
[ProtoContract]
public class A {
    [ProtoMember(1)]
    public B Foo {get;set;}
}
[ProtoContract]
public class B {
    [ProtoMember(1)]
    public List<byte[]> Bar {get;set;}
} 
```

这里需要缓冲一个length-prefix其实是在写的时候`A.Foo`，基本上就是*声明*“后面的复数数据就是”的值`A.Foo`）。幸运的是，有一个简单的解决方法：

```
[ProtoMember(1, DataFormat=DataFormat.Group)]
public B Foo {get;set;} 
```

这在 protobuf 中的两种打包技术之间发生了变化：

*   默认（谷歌声明的偏好）是长度前缀，这意味着你会得到一个标记，指示要遵循的消息的长度，然后是子消息有效负载
*   但也可以选择使用开始标记、子消息有效负载和结束标记

当使用第二种技术*时，它不需要缓冲*，所以：它不需要。这确实意味着它会为相同的数据写入稍微不同的字节，但是 protobuf-net 非常宽容，并且会很高兴地从这里的*任何一种*格式反序列化数据。含义：如果您进行此更改，您仍然可以读取现有数据，但新数据将使用开始/结束标记技术。

这就提出了一个问题：为什么 google 更喜欢长度前缀方法？*可能*这是因为在使用长度前缀方法**时读取**跳过字段（通过原始读取器 API 或作为不需要/意​​外的数据）时更有效，因为您可以只读取长度前缀，然后只需推进流 [n] 个字节；相比之下，要使用开始/结束标记跳过数据，您仍然需要爬过有效负载，分别跳过子字段。当然，如果您*期望，这种读取性能的理论差异并不适用*该数据并希望将其读入您的对象，您几乎肯定会这样做。此外，在 google protobuf 实现中，由于它不适用于常规 POCO 模型，因此有效载荷的大小是已知的，因此在编写时它们并没有真正看到相同的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T22:30:48.493

补充您的编辑；`[ProtoInclude(..., DataFormat=...)]`看起来它根本没有被处理。我在当前的本地构建中为此添加了一个测试，现在它通过了：

```
[Test]
public void Execute()
{

    var a = new A();
    var b = new B();
    a.B = b;

    b.Data = new List<byte[]>
    {
        Enumerable.Range(0, 1999).Select(v => (byte)v).ToArray(),
        Enumerable.Range(2000, 3999).Select(v => (byte)v).ToArray(),
    };

    var stream = new MemoryStream();
    var model = TypeModel.Create();
    model.AutoCompile = false;
#if DEBUG // this is only available in debug builds; if set, an exception is
  // thrown if the stream tries to buffer
    model.ForwardsOnly = true;
#endif
    CheckClone(model, a);
    model.CompileInPlace();
    CheckClone(model, a);
    CheckClone(model.Compile(), a);
}
void CheckClone(TypeModel model, A original)
{
    int sum = original.B.Data.Sum(x => x.Sum(b => (int)b));
    var clone = (A)model.DeepClone(original);
    Assert.IsInstanceOfType(typeof(A), clone);
    Assert.IsInstanceOfType(typeof(B), clone.B);
    Assert.AreEqual(sum, clone.B.Data.Sum(x => x.Sum(b => (int)b)));
} 
```

此提交与其他一些不相关的重构（WinRT / IKVM 的一些返工）相关联，但应尽快提交。

# javascript - ExtJS 4 中的“Ext 未定义”问题

> ID：11317047
> 
> 赞同：2
> 
> 时间：2012-07-03T18:33:58.080
> 
> 标签：javascript, extjs, firebug

我在 ExtJS 4 中遇到了“Ext is not defined”问题。我实际上是在测试[这里](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.reader.Reader)的示例以开始学习 ExtJS 4。

我的示例脚本文件包括：

```
<script type="text/javascript" src="orderRead.js"></script>
<script type="text/javascript" src="order.js"></script> 
```

以及这些 ExtJS 脚本文件：

```
<script type="text/javascript" src="extjs/ext-all.js"></script>
<script type="text/javascript" src="extjs/ext-all-debug.js"></script> 
```

但问题仍然存在。附件是来自 Firebug 的错误消息： ![在此处输入图像描述](../Images/429436b75828ff04fcda533237f2479a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:43:35.697

将 Ext 库的脚本标签放在示例文件的脚本标签之前，以便在代码运行时加载它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-26T11:35:19.083

您应该按以下顺序包含`ext-base.js`和`ext-all.js`文件。

```
<script type="text/javascript" src="extjs/adapter/ext/ext-base.js"></script>
<script type="text/javascript" src="extjs/ext-all.js"></script> 
```

# wcf - 如何解码来自 iPhone 的 WCF 中的发布请求？

> ID：11317054
> 
> 赞同：1
> 
> 时间：2012-07-03T18:34:27.453
> 
> 标签：wcf, rest, ios5, streaming, datacontract

这个问题我问了好几次，都没有得到好的答案。可能是我做错了。我想发送一个包含一些文本参数和图像的 Http Post 请求。在 iPhone 中：

```
NSString reqstr = "param1=val1&param2=val2&..."
NSData *strData = [str DataUsingEncoding:NSUTF8StringEncoding]; //parameters
NSData *imageData = [NSData NSJPEGRepresenation(myImage.jpg,1)]; //image
NSMutableData *body = ...;
body.appendData = strData;
body.appendData = imageData;
req.setHttpBody = body; 
```

在 WCF 中：

```
void postData(Stream strm)
{
  //strm contains "param1=val1&param2=val2.....image raw binary here..........."
}

[DataContract]
class Employee { string param1,string param2, Stream photo..} 
```

*   这是发送此类对象的正确方法吗？这在 iphone 和 WCF 之间不常见吗？
*   如何解析流中的字节以读取参数，尤其是从二进制数据中形成图像。注意如果它本身是图像，我知道该怎么做。如何使用其他参数将其从流中取出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:30:04.183

WCF 需要选择加入序列化，因此使用 [DataContract] 标记类不足以序列化它的任何成员，您想要序列化的任何成员也必须使用 [DataMember] 标记。此外，您没有理由发送流本身，您应该能够执行以下操作：

```
[DataContract]
class Employee
{
    [DataMember]
    string param1;

    [DataMember]
    string param2;

    [DataMember]
    JPEG image;
}

//Within your service, the postData contract will accept an Employee object from the caller // and perform some logic on it in the service.

void postData(Employee emp)
{
    //Do something with emp
} 
```

如果您有任何问题，或者这与您已经获得的建议相同，请告诉我。

# openssl - RFC 3447(pkcs#1 v2.1)：它是在 Openssl 中实现的吗？如果是从哪个版本？

> ID：11317058
> 
> 赞同：0
> 
> 时间：2012-07-03T18:34:45.220
> 
> 标签：openssl, pkcs#1

我无法找到提到 RFC 3447 是否在 openssl 中实现的文档。

我使用 openssl 1.0.0 生成了一些用于 RSA-OAEP 加密的测试向量。当我检查 openssl 文档时，我看到它提到了 PKCS #1 v2.0 中定义的 EME-OAEP。来源：-http://www.openssl.org/docs/crypto/RSA_public_encrypt.html。

但是当我将这些测试向量提供给我的一位客户时，他们碰巧说这些向量仅与 2.1 版兼容，而不是 2.0 版。

任何指针将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:24:25.047

我已经检查过，即使文档提到 EME-OAEP v2.0 正在实施，但事实并非如此。

文件：- rsa_oaep.c

在 2.0 版中，EM = maskedSeed || 屏蔽数据库

在 2.1 版中 EM = 0x00 || 蒙面种子 || 屏蔽数据库。

因此我能够得出结论，几乎从 openssl 的初始版本开始，它就一直是 2.1 而不是 2.0。

# mysql - 没有子查询的 MySQL 组内聚合 - 建议的测试数据已更新

> ID：11317059
> 
> 赞同：5
> 
> 时间：2012-07-03T18:34:49.290
> 
> 标签：mysql, sql, group-by, grouping, greatest-n-per-group

我在 MySQL 销售数据库中有两个表：

订单表：

```
CREATE TABLE salestest.`orders` (  
`ID` int(11) unsigned NOT NULL auto_increment,  
`OrderDate` datetime NOT NULL,  
`CustomerID` int(11) unsigned NOT NULL,  
PRIMARY KEY (`ID`),  
UNIQUE KEY `ID` (`ID`),  
KEY `OrderDate` (`OrderDate`),  
KEY `CustomerID` (`CustomerID`)  
) ENGINE=InnoDB;  

INSERT INTO salestest.orders VALUES  
( 1, '2012-04-15', 1 ),  
( 2, '2012-05-20', 1 ),  
( 3, '2012-06-30', 1 ); 
```

订单详情表：

```
CREATE TABLE salestest.`OrderDetails` (  
`ID` int(11) unsigned NOT NULL auto_increment,  
`OrderID` int(11) unsigned NOT NULL,  
`ProductID` int(11) unsigned NOT NULL,  
`Price` double NOT NULL default '0',  
PRIMARY KEY  (`ID`),  
UNIQUE KEY `ID` (`ID`),  
KEY `OrderID` (`OrderID`),  
KEY `ProductID` (`ProductID`),  
CONSTRAINT `OrderID_fk` FOREIGN KEY (`OrderID`) REFERENCES `orders` (`ID`)  
) ENGINE=InnoDB;  

INSERT INTO salestest.OrderDetails VALUES  
( 1, 1, 1, 2 ),  
( 2, 1, 2, 15 ),  
( 3, 1, 3, 22 ),  
( 4, 2, 1, 3 ),  
( 5, 2, 2, 17 ),  
( 6, 2, 3, 23 ),  
( 7, 2, 4, 40 ),  
( 8, 3, 1, 4 ),  
( 9, 3, 2, 20 ); 
```

现在我需要为每个客户选择他们购买每种产品的最后价格。

最简单的方法是使用子查询：

```
SELECT od2.CustomerID,od2.ProductID, od2.Price AS LastPrice, od2.OrderDate AS LastDate  
FROM (SELECT o1.ID, o1.CustomerID, o1.OrderDate, od1.ProductID, od1.Price  
  FROM orders AS o1  
  LEFT JOIN OrderDetails as od1 ON o1.ID=od1.OrderID  
  ORDER BY OrderDate DESC) AS od2  
GROUP BY CustomerID, ProductID  
ORDER BY CustomerID, ProductID; 
```

结果：

> CustomerID ProductID LastPrice LastDate
> 1 1 4 2012-06-30 00:00:00
> 1 2 20 2012-06-30 00:00:00
> 1 3 23 2012-05-20 00:00:00
> 1 4 40 2012-05- 20 00:00:00

现在的问题；如果我想避免子查询、临时表或视图，怎么可能得到相同的结果，我只想使用连接；这个查询是一个更大查询的一小部分，并且有子查询是非常低效的。

我试过这个查询：

> SELECT o1.CustomerID,od1.ProductID, od1.Price AS LastPrice, o1.OrderDate AS LastDate
> FROM Orders AS o1 LEFT JOIN OrderDetails as od1 ON o1.ID=od1.OrderID
> GROUP BY CustomerID, ProductID
> ORDER BY CustomerID, ProductID;

但它给出了不同的结果：

> CustomerID ProductID LastPrice LastDate
> 1 1 2 2012-04-15 00:00:00
> 1 2 15 2012-04-15 00:00:00
> 1 3 22 2012-04-15 00:00:00
> 1 4 40 2012-05- 20 00:00:00

如您所见， LastPrice 和 LastDate 不正确。我也尝试了艾伦的建议，但结果是：

> CustomerID ProductID LastPrice LastDate
> 1 1 4 2012-06-30 00:00:00
> 1 2 20 2012-06-30 00:00:00

斯宾塞的回答结果中的第一个查询重复的产品：

> CustomerID ProductID LastPrice LastDate
> 1 3 22 2012-04-15 00:00:00
> 1 3 23 2012-05-20 00:00:00
> 1 4 40 2012-05-20 00:00:00
> 1 1 4 2012-06- 30 00:00:00
> 1 2 20 2012-06-30 00:00:00

其他答案都使用子查询，我试图避免。
有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:51:50.417

寻找[“greatest-n-per-group”](https://stackoverflow.com/a/8977856/663544)

这是我在 SQL 中学到的最棒的东西，我希望你也喜欢它。

好的，这是我的尝试：

```
SELECT o.CustomerID, od.ProductID, od.Price AS LastPrice, o.OrderDate AS LastDate  
FROM OrderDetails od
LEFT JOIN orders as o ON od.OrderID = o.ID
LEFT JOIN orders as o2 ON o.CustomerID = o2.CustomerID AND o.id < o2.id
WHERE o2.id IS NULL
ORDER BY o.CustomerID, od.ProductID; 
```

您想按客户 + 产品了解客户最后一次购买每种产品的时间以及他们为此支付的费用。

所以我从产品开始，加入订单（第一次加入），然后再次加入订单，以便我可以将查询限制为每个客户+产品的单个订单（o2 匹配所有订单，但不包括最近的订单） . 然后，我们使用 o2 与最近的订单不匹配这一事实来仅选择那一行。

这假设您不会在一个订单中两次以不同的价格购买相同的商品，并且新订单将始终具有更高的 ID。

希望这能让您足够接近，以便您的真实数据/查询可以根据需要进行修改 - 祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:04:27.630

**UPDATE:**

I have been unable to reproduce the result set using only joins (without using an inline view or a correlated subquery).

I don't think it's possible to reliably return the specified result set wihtout using an inline view or a correlated subquery.

* * *

 ~~This returns the specified result, but with no inlineview and no subqueries. (But that's not to say that this is going to be the "fastest" query that returns the result set.

**NOT WORKING**... please standby

```
SELECT o1.CustomerID, d1.ProductID, d1.Price, o1.Orderdate
  FROM orders o1
  JOIN OrderDetails d1 ON d1.OrderID = o1.ID
  LEFT      
  JOIN orders o2 
    ON o1.CustomerID = o2.CustomerID
       AND o1.ID <> o2.ID
       AND (o1.OrderDate < o2.OrderDate
           OR (o1.OrderDate = o2.OrderDate AND o1.ID < o2.ID)
           )
  LEFT
  JOIN OrderDetails d2
    ON d2.OrderID = o2.ID
       AND d2.ProductID = d1.ProductId
       AND (o1.OrderDate < o2.OrderDate
           OR (o1.OrderDate = o2.OrderDate AND o1.ID < o2.ID)
           OR (o1.OrderDate = o2.OrderDate AND o1.ID = o2.ID AND d1.ID < d2.ID )
           )
 WHERE d2.ID IS NULL 
```

 ~~This query joins the tables to themselves and filters out the "topmost" row for each group.

--

Conceptually, that query is the same as the following query. The following query makes use of an "inline view" (aliased as `a` and `b`). The purpose of the inline view is really just to get CustomerID and OrderDate associated with each OrderDetail line.

```
 SELECT a.CustomerID, a.ProductID, a.Price, a.Orderdate
   FROM (SELECT o1.CustomerID, d1.ProductID, d1.Price, o1.OrderDate, d1.OrderID, d1.ID
           FROM orders o1
           JOIN OrderDetails d1 ON d1.OrderID = o1.ID
        ) a
   LEFT      
   JOIN (SELECT o2.CustomerID, d2.ProductID, d2.Price, o2.OrderDate, d2.OrderID, d2.ID
           FROM orders o2
           JOIN OrderDetails d2 ON d2.OrderID = o2.ID
        ) b
     ON a.CustomerID = b.CustomerID
        AND a.ProductID = b.ProductId
        AND a.OrderID <> b.OrderID
        AND a.ID <> b.ID
        AND (a.OrderDate < b.OrderDate 
             OR (a.OrderDate = b.OrderDate AND a.OrderID < b.OrderID)
             OR (a.OrderDate = b.OrderDate AND a.OrderID = b.OrderID AND a.ID < b.ID))
  WHERE b.ID IS NULL 
```

We'd use a common table expression (CTE) in place of the inline views, if MySQL supported them.

* * *

Finally, here's an entirely different approach, which uses MySQL "user variables" to simulate the analytic functions that are missing from MySQL.

```
SELECT q.CustomerID
     , q.ProductID
     , q.Price
     , q.OrderDate
  FROM (SELECT IF(p.CustomerID = @last_customerid,IF(p.ProductID = @last_productid,0,1),1) AS break
             , @last_customerid := p.CustomerID AS CustomerID
             , @last_productid := p.ProductID AS ProductID
             , p.Price
             , p.OrderDate
         FROM (SELECT @last_customerid := NULL, @last_productid := NULL) i
         JOIN ( SELECT o.CustomerID, d.ProductID, o.OrderDate, d.Price 
                  FROM orders o
                  JOIN OrderDetails d ON d.OrderID = o.ID
                 ORDER BY o.CustomerID, d.ProductID, o.OrderDate DESC
              ) p
       ) q
  WHERE q.break = 1 
```

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:52:24.497

您可能会发现这更有效：

```
select opl.CustomerID,
    opl.ProductID,
    opl.LastDate,
    od.Price
from (
    select o.CustomerID,
        od.ProductID,
        max(o.OrderDate) as LastDate
    from Orders o
    inner join OrderDetails od on o.ID = od.OrderID
    group by o.CustomerID, od.ProductID
) opl
inner join Orders o on opl.CustomerID = o.CustomerID
    and opl.LastDate = o.OrderDate
inner join OrderDetails od on o.ID = od.OrderID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T18:49:11.023

```
select B.*,A.Price from
(select CustomerID,ProductID,OrderDate,Price from Orders o join OrderDetails od on o.ID=od.OrderID) A 
join 
(select CustomerID,ProductID,max(OrderDate) as LastOrderDate 
from Orders o 
join OrderDetails od on o.ID=od.OrderID
group by CustomerID,ProductID) B 
on A.CustomerID=B.CustomerID and A.ProductID=B.ProductID and A.OrderDate=B.LastOrderDate 
```~~~~

# c# - Visual Studio -- 扩展的 Intellisense 视图（像映射的树视图）

> ID：11317060
> 
> 赞同：1
> 
> 时间：2012-07-03T18:34:51.973
> 
> 标签：c#, .net, visual-studio-2010, intellisense

当您使用 Intellisense 输入并显示类中的参数时，您可以选择一个参数并继续操作，直到您到达基本级别。调试时，Visual Studio 允许您停止对象并检查其中的所有参数或字段。

有没有办法构建所有类参数的树视图或图表？我有一个包含大量子对象和属性的大类，我想构建它所有属性的视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:39:57.607

如果您只是在谈论能够可视化您的类（通过 Visual Studio，而不是通过代码实际构建层次结构），您可以这样做：在 Visual Studio 中，单击*View* - *Class View*。这将为您提供类的树视图。

如果您单击 *查看*-*对象浏览器*，您还将看到其他程序集中的类的树视图，而不仅仅是您的类。

**编辑**

我认为您正在寻找[*Productivity Power Tools*](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef/) Visual Studio 扩展中的*解决方案导航器之类的东西。*单击*工具*-*扩展管理器*-*在线库*。搜索*Productivity Power Tools*并安装它。*然后，您将在Solution Navigator的**View*菜单下看到一个选项。[](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef/)

 **** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:26:48.247

如果要控制在 Visual Studio 调试会话期间变量值的显示方式，可以将[DebuggerDisplay](http://msdn.microsoft.com/en-us/library/x810d419.aspx)属性应用于感兴趣的类。您也可以在感兴趣的类上重载 ToString() 以打印您想要的信息，假设此行为不会与您可能拥有的任何其他要求相冲突。***

# actionscript-3 - Flare 和 ActionScript 错误

> ID：11317065
> 
> 赞同：1
> 
> 时间：2012-07-03T18:35:32.883
> 
> 标签：actionscript-3, eclipse-plugin, adobe, flash-builder, flare

我正在尝试编译这个示例程序，但我对 Flare 和 ActionScript 是全新的。这是我正在尝试编译的 DependencyGraph 示例：http: [//flare.prefuse.org/apps/dependency_graph](http://flare.prefuse.org/apps/dependency_graph)。

我现在收到的错误是：

```
Access of unidentified property App 
```

为了解决这个问题，我需要导入或添加到源代码中是否有某些包或项目文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:58:43.120

看起来你也需要抓住这个类： http: [//flare.prefuse.org/src/flare.apps/src/flare/apps/App.as](http://flare.prefuse.org/src/flare.apps/src/flare/apps/App.as)除了看起来进口都来自包flare 并且应该包含在flare swc文件中。

**编辑** 好的，所以从头开始我能够让 Flex 3.4 SDK 与耀斑演示很好地配合使用：

1.  下载 zip [http://sourceforge.net/projects/prefuse/files/flare/alpha-20090124/prefuse.flare-alpha-20090124.zip/download](http://sourceforge.net/projects/prefuse/files/flare/alpha-20090124/prefuse.flare-alpha-20090124.zip/download)
2.  将flare.apps 提取到我的桌面并将build/flare.swc 提取到我的桌面
3.  在 FlashBuilder/Eclipse 中导入一个项目（现有项目），选择桌面上的flare.apps 文件夹。
4.  将现有的对 bin/flare.swc 的库引用替换为桌面中的库引用。当我在项目属性-> ActionScript 构建路径中导入项目时，我选择了它具有的 bin/flare.swc 条目并点击删除，然后点击添加 swc 并浏览从flare.zip 提取到我的桌面的那个。

5.  编译/运行

这一切都适用于 Flex 3.4（如果你没有注意到的话，Flare 已经过时了）。将我的 SDK 升级到 4.6，我不得不用 com.adobe.serialization.json.JSON 替换 JSON（由于默认包中的新包而含糊不清）。`With Flex 3.4, did you see any errors relating to JSON? I don't have 3.4 on my system so I am using 3.6 right now and see many errors regarding the ambiguity of JSON.`关于 3.4 我没有 JSON 错误，认为 Class 可能是在 3.6 推出时引入的，所以这也很有意义......问题是如果你从某个包导入 JSON，但它也有 JSON 默认包，它不知道您要使用哪一个，如果您在使用缩短版本的任何地方都使用完全限定的类名，它将消除歧义，因此您将 JSON.decode 替换为 com.adobe.serialization。 json.JSON.decode，相信默认包中的那个是新的，并且不匹配旧的接口（方法名称）100%。

在使用 4.6 构建之后，它是一个混合包......我看到了加载栏和依赖项之间的所有行，但没有看到标签本身，我的猜测是与版本之间字体/文本渲染引擎的变化有关。虽然我不确定如何立即解决这个问题。虽然编译/运行没有错误。

**编辑 2**好交易只需将其添加到字体嵌入中即可在 4.6 中工作，embedAsCFF='false'

```
[Embed(source="verdana.TTF", fontName="VerdanaCust",embedAsCFF='false')] 
```

如果您尝试这些步骤但仍有问题，或者这是否有助于您解决问题，请告诉我。

**编辑 3** 也将您添加到我的 gmail 或者可以直接在 SO 上聊天，以保持任何相关信息与此 QA 相关联

# java - Java 中的 Saxon：指定 SAX 解析器

> ID：11317066
> 
> 赞同：4
> 
> 时间：2012-07-03T18:35:38.067
> 
> 标签：java, saxparser, saxon

查看[Saxon 文档](http://www.saxonica.com/documentation/using-xsl/commandline.xml)，命令行上有一个“-x:className”标志，用于指定在 XSLT 应用期间使用的特定 SAX 解析器。

如何以编程方式实现这一目标？我现在在我的代码中使用 s9api，我检查了`Processor`、`XsltCompiler`、`XsltExecutable`和`XsltTransformer`对象；他们都没有办法设置 SAX 解析器。我还实例化了 a `net.sf.saxon.Transform`，它也没有任何东西。

我很可能正在查看错误的对象集，但我不知道我应该如何知道正确的对象集是什么。

**链接到上面提到的命令行文档“对源文件和使用 document() 函数**加载的任何文件使用指定的 SAX 解析器”。我敢肯定，如果我知道自己在做什么，那么提到“ `document()`”函数会立即提示我。不幸的是，我不知道，而且事实并非如此。

**编辑：** Michael Kay 下面的答案是正确的。（当然是！他是撒克逊人！）我想我会为后代添加一些示例代码。

首先，他的解决方案使用`net.sf.saxon.s9api.Processor`：

```
Processor processor = new Processor(false);
processor.setConfigurationProperty(FeatureKeys.SOURCE_PARSER_CLASS,
  "fully.qualified.package.name.of.MySAXParser"); 
```

**在上面，将 SAXParser 的完全限定名**（而不仅仅是类名）**作为 String**提供给它很重要。如果您执行以下操作：

```
processor.setConfigurationProperty(FeatureKeys.SOURCE_PARSER_CLASS,
  new MySAXParser()); 
```

...你会得到这个：

```
java.lang.IllegalArgumentException: SOURCE_PARSER_CLASS class must be a String 
```

其次，他的解决方案使用`net.sf.saxon.s9api.XsltTransformer`：

```
// ^^^ Various setup code to get to this point...
XsltTransformer transformer = xsltExecutable.load();
File file = new File("/path/to/my/file");
InputStream fileInputStream = new FileInputStream(file);
InputSource inputSource = new InputSource(fileInputStream);
Source saxSource = new SAXSource(new MySAXParser(), inputSource);
transformer.setSource(saxSource);
// vvv Set other parameters, actually invoke the transform, etc... 
```

我唯一的问题/警告是：

1.) 在控制台中打印出以下消息：

```
Cannot find CatalogManager.properties 
```

这似乎没有影响任何事情，因为转换仍然可以正常工作，而且我很确定它与撒克逊人本身没有任何关系，而是我在自定义 SAXParser 的实现中搞砸了。

2.) 如果我想转换非 XML 文档（是的，这完全有可能）我不能使用解决方案 #2，因为调用 XsltTransform.setSource() 会导致它默认将源作为 XML 文档查看，并且会给你可怕的

```
Error on line 1 column 1 
  SXXP0003: Error reported by XML parser: Content is not allowed in prolog. 
```

因此，为了转换非 XML 文档，您必须使用“粗粒度”处理器解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:24:13.303

如果您想确保获得 Saxon 问题的答案，请使用位于 dev.saxonica.com 的 Saxon 论坛或 SourceForge 上的 saxon-help 列表。

答案是：你可以使用

```
Processor.setConfigurationProperty(
    FeatureKeys.SOURCE_PARSER_CLASS, parserClassName) 
```

但是，这可能有点粗粒度：它可以在命令行上运行，因为配置通常只是为了转换一个文档而设置的。为了进行更精细的控制，您始终可以以 SAXSource 对象的形式向转换提供输入，该对象包含一个 XMLReader，它表示您要使用的 SAX 解析器的一个实例。

# ruby-on-rails - 带有块的帮助程序中的 link_to

> ID：11317067
> 
> 赞同：19
> 
> 时间：2012-07-03T18:35:44.350
> 
> 标签：ruby-on-rails, forms, twitter-bootstrap

我试图让它工作：

```
link_to("#", class: "add_fields btn btn-success") do
  name
  content_tag(:i, "", :class => "icon-plus icon-white")
end 
```

但它只显示由`i`(twitter-bootstrap css) 指定的图标，而不是中的文本`name`，我做错了什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-03T18:36:54.547

块的返回值成为它的内容。只返回最后一行。

您必须将两个字符串连接在一起`+`以产生单个返回值：

```
link_to("#", class: "add_fields btn btn-success") do
  name + content_tag(:i, "", class: "icon-plus icon-white")
end 
```

您需要使用`html_safe`来防止标签的内容自动被 HTML 编码：

```
link_to("#", class: "add_fields btn btn-success") do
  name + content_tag(:i, "", class: "icon-plus icon-white").html_safe
end 
```

根据 Twitter Bootstrap 的个人经验，我知道您需要在`name`和之间留一个空格`content_tag`：

```
link_to("#", class: "add_fields btn btn-success") do
  name + ' ' + content_tag(:i, "", class: "icon-plus icon-white").html_safe
end 
```

或者，如果您在 ERB 模板中，则可以使用以下命令输出这两个值`<%=`：

```
<%= link_to( ... ) do %>
  <%= name %>
  <%= content_tag( ... ) %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-13T03:02:39.427

我会考虑两件事：

1)`link_to`需要对块的全部内容进行清理。

```
link_to("#", class: "add_fields btn btn-success") do
  (name + content_tag(:i, "", class: "icon-plus icon-white")).html_safe
end 
```

2）我们可以期望输入是`nil`？

`html_safe`如果我们调用一个`nil`对象，事情就会中断。`raw`如果有可能发生这种情况，请使用。

```
link_to("#", class: "add_fields btn btn-success") do
  raw(name + content_tag(:i, "", class: "icon-plus icon-white"))
end 
```

[这](http://www.tigraine.at/2012/08/23/when-to-use-raw-and-when-to-use-html_safe)是一个很好的阅读主题。[我的博客文章](http://www.aharails.com/intermediate/6-link_to-helper-with-a-block/)介绍了一个有趣的应用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-11T11:13:23.650

对于那些使用 font-awesome 或其他东西的人，它可能不会显示图标。但这个解决方案奏效了。

```
link_to :sort => column, :direction => direction do
   "#{title} #{content_tag(:i, "", class: "fa fa-chevron-up") }".html_safe
end 
```

# c# - 使用 c# api 创建一个 mongodb 上限集合

> ID：11317070
> 
> 赞同：8
> 
> 时间：2012-07-03T18:35:49.893
> 
> 标签：c#, .net, mongodb, mongodb-.net-driver

使用 C# MongoDB 驱动程序，我们目前创建我们的集合，如下所示：

```
MongoServer mongoServer = MongoServer.Create("some conn str");
MongoDatabase db = mongoServer.GetDatabase("mydb");
MongoCollection logs = db.GetCollection("mycoll"); 
```

我想`mycoll`用作封顶收藏。我还没有看到任何关于如何使用 C# 驱动程序创建上限集合的示例或文档细节。我找到了大量的 JS 示例，甚至还有一个 Java 示例（这里：[在 java 中创建一个 mongodb capped collection](https://stackoverflow.com/questions/11229237/creating-a-mogodb-capped-collection-in-java)）。

以前有没有人必须这样做，或者知道在 C# 中是否有可能？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-06-21T21:06:07.287

从驱动程序的 v2.0 开始，有一个新的`async`-only API。不应再使用旧 API，因为它是新 API 的阻塞外观并且已被弃用。

当前推荐的创建上限集合的方法是调用并等待指定和或（或两者）`IMongoDatabase.CreateCollectionAsync`的实例。`CreateCollectionOptions``Capped = true``MaxSize = <cap size in bytes>``MaxDocuments = <cap in doc count>`

```
async Task CreateCappedCollectionAsync()
{
    var database = new MongoClient().GetDatabase("HamsterSchool");
    await database.CreateCollectionAsync("Hamsters", new CreateCollectionOptions
    {
        Capped = true,
        MaxSize = 1024,
        MaxDocuments = 10,
    });
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-09T06:29:22.333

这是另一个例子；不要忘记设置 MaxSize 和 MaxDocuments 属性。

```
var server = MongoServer.Create("mongodb://localhost/");
var db = server.GetDatabase("PlayGround");

var options = CollectionOptions
   .SetCapped(true)
   .SetMaxSize(5000)
   .SetMaxDocuments(100);

if (!db.CollectionExists("Log"))
    db.CreateCollection("Log", options); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-03T18:57:31.007

创建集合时，您需要使用以下命令指定集合的​​上限`CollectionOptions`：

```
CollectionOptionsBuilder options = CollectionOptions.SetCapped(true);
database.CreateCollection("mycoll", options); 
```

您需要显式创建集合（通过调用`CreateCollection`方法）才能提供您的选项。`GetCollection`当使用不存在的集合调用时，它会使用默认选项隐式创建。

# ios - iOS - 删除子视图会导致其他视图转移

> ID：11317073
> 
> 赞同：0
> 
> 时间：2012-07-03T18:36:02.100
> 
> 标签：ios, subview

我有一个奇怪的问题。在我的应用程序中，我允许用户将屏幕截图发布到 Facebook。我在截图中删除了一些我不想要的子视图，然后在截图后重新添加它们。

我的问题是，每当我删除 UITextView 时，它会将我的 2 个其他图像视图显着移动到左侧，导致它们部分离开屏幕。

另一件需要注意的事情：我使用的是一个选项卡控制器，有 5 个视图。所有的观点对不同的电视角色做同样的事情。他们都使用同一个类。我的角色中只有 2 个有这个奇怪的转换问题，但所有 5 个角色的所有代码都是相同的。我还确保我所有的插座都连接正确。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:58:00.130

找到了更好的解决方案；将屏幕截图中我不想要的所有视图设置为隐藏，然后在捕获屏幕截图后重新启用它们。

# hadoop - 工作流工具比较：Oozie Vs Cascading

> ID：11317083
> 
> 赞同：7
> 
> 时间：2012-07-03T18:36:40.053
> 
> 标签：hadoop, mapreduce, cascading, oozie

我正在寻找一种工作流工具来运行复杂的 map-reduce 作业。我想到了 Oozie，但也想探索 Cascading。是否有使用级联 API 链接现有 M/R 作业的示例代码或示例？另外，你能提供 Oozie Vs Cascading 的比较吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T06:06:15.540

Cascading 和 Oozie 不在同一类别中。

Oozie 是一个工作流调度程序。

Cascading 是一种用于创建工作流的 API。它与调度程序无关，即它应该与您使用的任何调度程序系统一起运行。

可能有些混淆，因为 Oozie 文档提到了“DAG”，并且都在 Hadoop 上运行。

此外，级联在检查点支持中具有“数据可用性”的概念，在 Oozie 中支持，尽管有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T07:35:50.420

就我个人而言，我在某种程度上都在玩，我发现级联有趣的是

1）简洁而富有表现力的简单关键字如流，水龙头，管道等，

2) 用于本地开发和研究的基于 TDD 的惊人方法

3）漂亮的计划视图（.dot 文件），一旦项目发展起来就会很有用，因此维护很容易。

4) 使用 groovy、scala、cloujre 的基于 DSL 的方法。因此无需担心学习任何新语言或 hadoop。

5）简单的云部署（例如亚马逊支持作为原始jar部署）。

6）你可以调用任何东西，比如现有的 pig 或 hive 或纯其他 MR jar，只要它们公开 java api。

7) 令人惊叹的机器学习和自然语言处理相关工作。

# python - 如何在机械化测试中允许 JSON 响应？

> ID：11317086
> 
> 赞同：1
> 
> 时间：2012-07-03T18:37:00.847
> 
> 标签：python, json, python-2.7, mechanize

我有一个成功时返回 JSON 响应的 Web 服务。不幸的是，当我尝试通过 multi-mechanize 测试此服务时，我收到一个错误 - “未查看 HTML”。显然它不是在查看 HTML，而是将内容明确标记为 JSON。如何让 mechanize 忽略此错误并接受它返回的 JSON？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:37:02.407

事实证明 mechanize 没有设置为开箱即用地接受 JSON 响应。要快速解决这个问题，请更新 mechanize 的 _headersutil.py 文件（检查 /usr/local/lib/python2.7/dist-packages/mechanize）。

在 is_html() 方法中，更改以下行：

```
html_types = ["text/html"] 
```

读书：

```
html_types = ["text/html", "application/json"] 
```

# ruby-on-rails - How do I implement class-table-inheritance in Rails?

> ID：11317095
> 
> 赞同：14
> 
> 时间：2012-07-03T18:37:30.133
> 
> 标签：ruby-on-rails, class-table-inheritance

I just finished working my way through the book *Agile Web Development with Rails*, fourth edition ([http://pragprog.com/book/rails4/agile-web-development-with-rails](http://pragprog.com/book/rails4/agile-web-development-with-rails)), and need some help in understanding how to create a parent-child relationship between models. I did some Googling and poked around here on StackOverflow and learned generally about single table inheritance and class table inheritance.

I have a bunch of metadata about different items in an archival collection. Much of the metadata is the same for all objects, e.g., accession number, title, description, copyright, etc. In addition to the common metadata, there is metadata that is only applicable to certain types of items, e.g., photos need to keep track of whether the item is in color or black and white; sound recordings need to keep track of the format (CD, DAT, cassette tape, etc.) and duration; text materials need to keep track of the number of pages; etc.

```
 Class hierarchy

            Item
              |
  +-----------+------------+
  |           |            |
Photo   SoundRecording    Text 
```

Since I will have many thousands of records I have ruled out single table inheritance as being too inefficient. I understand the idea of class table inheritance as presented here: [http://martinfowler.com/eaaCatalog/classTableInheritance.html](http://martinfowler.com/eaaCatalog/classTableInheritance.html) but am confused on how I would actually implement this in a new Ruby on Rails project. Do I implement class table inheritance as a polymorphic association ([http://guides.rubyonrails.org/association_basics.html#polymorphic-associations](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)) or am I on the wrong track?

Thank you.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T09:32:08.990

Yes. It boils down to this (in Rails 3)

```
class Business < ActiveRecord::Base
  belongs_to  :biz, :polymorphic => true
end

class Restaurant < ActiveRecord::Base
  acts_as_biz
end 
```

Here's a very good tutorial on how to do it.

[http://techspry.com/ruby_and_rails/multiple-table-inheritance-in-rails-3/](http://techspry.com/ruby_and_rails/multiple-table-inheritance-in-rails-3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-18T00:11:17.203

There is a gem that does this cleanly and it also supports rails 5.1

[https://github.com/mvdamme/dbview_cti](https://github.com/mvdamme/dbview_cti)

# joomla - 防止直接访问 Joomla 中的页面

> ID：11317097
> 
> 赞同：1
> 
> 时间：2012-07-03T18:37:41.240
> 
> 标签：joomla

我的网站上集成了一个支付网关。当用户完成付款后，他/她将被重定向到特定页面，例如 www.example.com/redirect。我想阻止用户直接在地址栏中输入此网址（www.example.com/redirect）并访问该页面。我要尽快。

实际上，该页面受到访客用户的保护，但如果登录用户键入该 url，那么它会将他重定向到该页面，因此将跳过付款选项。我希望用户必须先支付金额，然后再重定向到此页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:22:55.733

很难准确回答，因为您只给出了一个非 joomla 网址作为示例，但在每个 Joomla 脚本的顶部都是以下行：

```
defined('_JEXEC') or die( 'Restricted access' ); 
```

您显然不能阻止用户输入 url，因此这至少会检测会话是否已经到位。如果用户不在活动的 Joomla 会话中，这将触发并阻止访问。您可以轻松地调整它以根据您的要求做任何您想做的事情，具体取决于您必须检查的内容，即推荐人是否是您的支付网关等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:39:40.477

我也有类似的愿望。我希望该页面仅在用户登录并填写订单输入页面时显示。

我决定做的是检查 POST 中是否有数据。

控制器/place_order.php（片段）

```
public function submitOrder()
{
    $post = JRequest::get('post');
    $model = $this->getModel();
    if($post != null && $post != ''){
        if($model->placeOrder()){
        }
    }
    JRequest::setVar('layout', 'submitOrder');
    parent::display();
} 
```

这可以防止任务在模型中执行我的 placeOder 函数。然后我只添加类似于提交订单页面的内容。在你的情况下“重定向”。

查看/place_order/tmpl/submitOrder.php (snipet)

```
defined('_JEXEC') or die('Restricted access');

$user =& JFactory::getUser();

if ($user->guest) {
echo "<p>You must login to access this page.</p>";
} 
else if($_POST == "" || $_POST == null){
    echo "<p>You can not directly access this page.</p>";
}else {
//Your order was submitted successfully HTML (don't forget to close it at the bottom ;) 
```

有很多方法可以做到这一点......如果你不想，你可能甚至不需要检查控制器，但我这样做是为了节省时间。如果没有看到你的代码，很难定制答案，但如果你在这里掌握了这个概念，它应该会有所帮助（我希望......）。

您可能还想从[Joomla 中查看有关授权和权限的此页面。](http://docs.joomla.org/Accessing_the_current_user_object#Determining_Status)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-30T12:26:43.370

这应该在组件的基本控制器 ( `controller.php`) 中完成。如果您查看此代码段：

```
// Check for edit form.
if ($vName == 'form' && !$this->checkEditId('com_weblinks.edit.weblink', $id))
{
    // Somehow the person just went to the form - we don't allow that.
    return JError::raiseError(403, 
    JText::sprintf('JLIB_APPLICATION_ERROR_UNHELD_ID', $id));
} 
```

此代码块存在于大多数旨在完全按照您想要的方式执行的核心组件中。通过函数解释了它实际上是如何做的`$this->checkEditId()`。我希望您熟悉该`JControllerForm`课程，如果您不了解该 API，请查看该 API。因为为页面创建编辑 ID 并*“授权用户根据他的最后一页访问特定页面”*是由`JControllerForm`.

# c++ - 对数组进行部分排序

> ID：11317099
> 
> 赞同：-1
> 
> 时间：2012-07-03T18:37:43.487
> 
> 标签：c++, algorithm, sorting

部分排序可以使用 std::partial_sort 完成。

部分分拣手段

5 7 4 2 8 6 1 9 0 3

对 3 个元素进行部分排序后

0 1 2 7 8 6 5 9 4 3

[http://en.cppreference.com/w/cpp/algorithm/partial_sort](http://en.cppreference.com/w/cpp/algorithm/partial_sort)。

但是，当某些元素已经排序时，这并不是最好的。

是否还有其他此类功能可以这样做并利用部分排序的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:20:14.907

您可以使用[流式中位数](https://stackoverflow.com/questions/10930732/c-efficiently-calculating-a-running-median)算法的改编版本来跟踪`k`一组术语中的最小术语。您可以使用`std::priority_queue`最小和最大堆。

该算法将像这样工作：

*   最大堆用于保存`k`最小项
*   最小堆用于保存所有其他项
*   对于要跟踪的每个术语，决定应将其添加到哪个堆，并将其添加到那里
    *   如果最大堆的大小小于`k`将其添加到那里，否则
    *   如果项小于最大堆的顶部，则将其添加到那里，否则
    *   将术语添加到最小堆
*   如果最大堆的顶部有多个`k`术语，则弹出顶部的术语，并将其推入最小堆

如果您需要对术语进行排序，您可以按降序将它们从最大堆中弹出，以相反的顺序将它们放在一个数组中，从而为您留下一个排序后的数组。如果将容器传递给最大堆的构造函数，则可以复制容器并对其进行排序。

默认情况下`std::priority_queue`是最大堆。要使其成为最小堆，您需要修改一些模板参数。

```
typedef std::priority_queue<int> MaxHeap;
typedef std::priority_queue
    <
        int,
        std::priority_queue<int>::container_type,
        std::greater<int>
    > MinHeap; 
```

# sql-server-2012-express - java.sql.SQLException：网络错误IOException：连接超时：连接

> ID：11317100
> 
> 赞同：2
> 
> 时间：2012-07-03T18:37:50.600
> 
> 标签：sql-server-2012-express

我已经在我的笔记本电脑上安装了 SQL Server 2012 Express，并尝试运行一个示例 java 程序，如下所示：

```
import java.sql.*;
public class Ex2 {
  Connection con;
  Statement st;
  ResultSet rs;
  public Ex2(String query){
      System.out.println("IN Const1");
    try{
        System.out.println("IN try");
        Class.forName("net.sourceforge.jtds.jdbc.Driver");
        String dbName = "HOME";
        String user = "sa";
        String password = "JUL@2012";
        //the name of my SQL SERVER 2005 instance
        String SqlServerInstance = "SQLEXPRESS";
        String url = "jdbc:jtds:sqlserver://localhost:1433";
        url = url + "/" + dbName;
        url = url + ";" + SqlServerInstance;
        con = DriverManager.getConnection(url, user, password);
        System.out.println("nach DriverManager");
        st = con.createStatement();
        st.executeQuery(query);
        rs = st.getResultSet();
       while ( rs.next() ){
        System.out.println(rs.getString(0));
        System.out.println(rs.getString(1));
        System.out.println(rs.getString(2));
        System.out.println(rs.getString(3));
      }
    }
    catch(Exception e){
       e.printStackTrace();
            System.out.println("Exception: " + e.getMessage());
    }
  }
  public static void main(String[] argv){
      System.out.println("IN MAIN");
    Ex2 test = new Ex2("SELECT * FROM HOME.dbo.employee;");
  }
}* 
```

并在控制台中获取以下错误日志：

```
java.sql.SQLException: Network error IOException: Connection timed out: connect
    at net.sourceforge.jtds.jdbc.ConnectionJDBC2.<init>(ConnectionJDBC2.java:410)
    at net.sourceforge.jtds.jdbc.ConnectionJDBC3.<init>(ConnectionJDBC3.java:50)
    at net.sourceforge.jtds.jdbc.Driver.connect(Driver.java:184)
    at java.sql.DriverManager.getConnection(DriverManager.java:525)
    at java.sql.DriverManager.getConnection(DriverManager.java:171)
    at Ex2.<init>(Ex2.java:22)
    at Ex2.main(Ex2.java:43)
Caused by: java.net.ConnectException: Connection timed out: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:516)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at net.sourceforge.jtds.jdbc.SharedSocket.createSocketForJDBC3(SharedSocket.java:307)
    at net.sourceforge.jtds.jdbc.SharedSocket.<init>(SharedSocket.java:257)
    at net.sourceforge.jtds.jdbc.ConnectionJDBC2.<init>(ConnectionJDBC2.java:311)
Exception: Network error IOException: Connection timed out: connect
    ... 6 more 
```

当我检查 sql server 配置管理器时，SQL Server 和 SQL Server Browser 服务正在运行。

过去两天我一直在谷歌搜索，努力解决这个问题，但不能。所以请帮助我。

# .net - Orchard CMS 可以在 .NET Framework 3.5 上运行吗？

> ID：11317101
> 
> 赞同：0
> 
> 时间：2012-07-03T18:37:56.243
> 
> 标签：.net, frameworks, orchardcms

我正在为我的公司网站寻找博客解决方案。该站点的其余部分在 3.5 框架上运行，Orchard 构建在 4.0 上运行。有没有办法从 3.5 的源代码重建，或者是否有为早期框架构建的早期版本的 Orchard？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:49:06.030

Orchad 需要 MVC3，而 MVC3 与 .NET 3.5 不兼容，所以不.. 你不能使用 3.5

# java - 背景颜色问题

> ID：11317103
> 
> 赞同：2
> 
> 时间：2012-07-03T18:38:02.277
> 
> 标签：java, swing, background, jframe

有人可以帮助我解释为什么没有设置框架的背景颜色。是否可以在构造函数中设置背景颜色`Paint()`或必须在`JColor`构造函数中完成

我应该为 BG 颜色执行以下操作-

编写一个 GUI 应用程序，显示您选择的单一`JButton`背景颜色和任何背景颜色。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;

/**
 *
 * @author Curtis
 */
public class JColor extends JFrame implements ActionListener
{
Font myFont = new Font("Playbill", Font.PLAIN, 28);
JButton myButton = new JButton("Click Me!");
Color bgColor = new Color(255, 97, 3);
Color txtColor = new Color(0, 0, 205);
String firstName = "Curtis";
String lastName = "Sizemore";

public JColor()
        {
            super("String Painting Fun");
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            setLayout (new BorderLayout());
            add(myButton, BorderLayout.SOUTH);
            setDefaultLookAndFeelDecorated(true);
            setBackground(Color.BLUE);
        }

@Override
public void paint(Graphics e)
{
    super.paint(e);
}

public static void main(String[] args) 
{
    final int TALL = 200;
    final int WIDE = 250;
    JColor frame = new JColor();
    frame.setSize(WIDE, TALL);

    frame.setVisible(true);
}

@Override
public void actionPerformed(ActionEvent e) 
{
    throw new UnsupportedOperationException("Not supported yet.");
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T18:40:23.893

尝试在`ContentPane`实例上调用它（更多信息[在这里](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)）

```
public JColor() {
    super("String Painting Fun");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLayout(new BorderLayout());
    add(myButton, BorderLayout.SOUTH);
    setDefaultLookAndFeelDecorated(true);
    getContentPane().setBackground(Color.BLUE);//<- update
} 
```

# php - 在我的 mac (Snow leopard) 上需要一些 PHP/服务器帮助

> ID：11317106
> 
> 赞同：0
> 
> 时间：2012-07-03T18:38:06.053
> 
> 标签：php, osx-snow-leopard

我是第一次学习 php 和 mySQL（使用 Welling/Thomson），我使用我的 mac 作为服务器。在这样做时，我打开了网络共享并通过类似`http://192.168.0.103/~myname/`或`localhost/~myname/`. 我能够运行基本的 PHP 脚本。[我使用本指南](http://maestric.com/doc/mac/apache_php_mysql_snow_leopard)设置了所有内容。我将每个示例分为几章：进入我`localhost/~myname/book/Chapter02/example.html`在浏览器中完成的第 1 章项目。这些文件实际上存储在`/Users/myname/Sites/book/Chapter02/example.html`

我正在尝试打开文件并收到以下错误：

`Warning: fopen(/Library/WebServer/Documents/../orders/orders.txt): failed to open stream: No such file or directory in /Users/myname/Sites/book/Chapter02/processorder.php on line 72`

我首先认为这是因为目录和 fopen 不同，所以我没有将我的文件存储在 中`localhost/~myname/`，而是尝试`localhost/public_html/`将它们存储`/Library/WebServer/Documents/public_html/`在我的计算机上。我仍然收到错误：

`Warning: fopen(/Library/WebServer/Documents/../orders/orders.txt): failed to open stream: No such file or directory in /Library/WebServer/Documents/public_html/Chapter02/processorder.php on line 72`

然后我在网上查了一下，发现它与权限有关。我在`/Library/WebServer/Documents/public_html/Chapter02/`名为“orders”的目录中创建了一个目录，每个人都通过终端读取和写入权限（使用 chmod 完成），但我仍然遇到同样的错误。我不确定问题出在哪里。如果是我的服务器设置，文件在哪里？任何帮助将不胜感激。

如果您认为它会有所帮助，这里是 php 脚本[http://pastebin.com/14gpim8e](http://pastebin.com/14gpim8e)

我试图尽可能清楚，但我相信这需要一些澄清，所以请随时询问您是否需要更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:28:52.750

找到了答案。

问题有两种方式：

1.  找到文件应该在哪里，和
2.  权限。

在这种情况下，它需要每个人的读/写权限，并且它需要位于 /WebServer/ 目录中并且不能更低（就像我在每个目录中所做的那样，除了 WebServer 目录。现在看起来有点愚蠢，因为我不能不明白）。谢谢大家的帮助。

# django - simplejson解析json错误

> ID：11317107
> 
> 赞同：0
> 
> 时间：2012-07-03T18:38:07.480
> 
> 标签：django, json

我通过 POST 请求发送以下 json 消息：

```
{
    “ID”:”17”,
    “FIRST_NAME”:”John”,
    “LAST_NAME”:”Doe”,
    “TOKEN”:”8cdde0ef552e305cb44e143d3f8c742fb35caab8f360e7”
} 
```

我正在 django 中加载 json，`json_message=simplejson.loads(request.raw_post_data)`但我不断收到以下异常：

`Expecting property name: line 2 column 1 (char 2)`

有人知道问题是什么吗？我在网上搜索了这个并没有找到它。我能够使用 Play! 在另一个应用程序中解析完全相同的 json 消息！框架，所以我不确定我是否缺少某些特定于 django 的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:40:58.897

这是报价单。

```
{
    "ID" : "17",
    "FIRST_NAME" : "John",
    "LAST_NAME" : "Doe",
    "TOKEN" : "8cdde0ef552e305cb44e143d3f8c742fb35caab8f360e7"
} 
```

我试过了，它奏效了。

# ruby-on-rails - 带有条件前缀（self.prefix）的ActiveResource？

> ID：11317113
> 
> 赞同：2
> 
> 时间：2012-07-03T18:38:23.577
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeresource

使用 ActiveResource 并且当我有嵌套资源时，使用“前缀”效果很好。

```
class Account < ActiveResource::Base
  self.prefix = "/users/:user_id/"
end 
```

只要 :user_id 已定义，一切都很好，否则将引发错误。**但是，如果我不想将此资源作为嵌套资源访问，而是作为资源本身访问，如何使“self.prefix”有条件？**例如，我想检索所有帐户，而不仅仅是特定用户范围内的帐户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:37:03.070

您可以将前缀设置为完全动态的：

```
class Account < ActiveResource::Base
    self.prefix = ":prefix_path"
end 
```

然后在运行时设置它：

```
Account.find(:all, :params => { :prefix_path => '/users/4' } ) 
```

# perl - 是否可以捕获另一个 perl 模块中发生的消息？

> ID：11317115
> 
> 赞同：3
> 
> 时间：2012-07-03T18:38:43.223
> 
> 标签：perl, lwp, die, xml-simple

我有一个用 Perl 编写的 SOAP 客户端，它使用`LWP`包进行 HTTPS 传输和`XML::Simple`解析 XML 有效负载。有时调用`XMLin`失败并出现 die() 然后我的脚本死掉了，并且必须由我编写的监控程序重新启动以检测这一点。这真的是不可取的，所以我想知道 Perl 是否有像 C++ 异常处理机制这样的工具，我可以在其中捕获 die 消息，忽略它报告错误并让我的脚本继续，就像发生错误一样？我已经阅读了许多 Perl 书籍并寻找了这个，但我没有设法找到一些东西。这正在扼杀我的应用程序，但我不想编写自己的 XML 解析代码，除非我必须这样做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T18:47:36.463

是的; 这样做的基本机制是`eval`：

```
sub a { die "BAD"; }
eval { a(); }
print "Survived an exception $@"; 
```

但是，您应该使用更高级的构造（仍然在此之上构造）是有原因的，例如[Try::Tiny](http://search.cpan.org/~doy/Try-Tiny-0.11/lib/Try/Tiny.pm)等。（请参阅其文档底部的链接）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-03T19:22:15.400

您可以捕捉“死”，但不能通过捕捉它来阻止脚本死亡： *当“__DIE__”钩子例程返回时，异常处理将继续进行，就像没有钩子时一样，除非钩子例程本身通过“goto”、循环退出或“die()”退出。*

不过，您可以运行容易在 eval{} 块内调用 die() 的例程。

# c# - 如何在 VBA 和 C# 中编码/解码 XML

> ID：11317116
> 
> 赞同：4
> 
> 时间：2012-07-03T18:38:47.967
> 
> 标签：c#, asp.net, ms-access, vba

我目前有一个程序将数据从 VBA (Access) 传输到 C# (通过 ASP.NET POST)。如何在每一端编码/解码？

这是我在 C# 中读取的 XML：

```
StreamReader reader = new StreamReader(Request.InputStream);
string xmlData = "";
XmlDocument xml = new XmlDocument();
xmlData = reader.ReadToEnd();
XmlElement rootXML;
xml.LoadXml(xmlData);
rootXML = xml.DocumentElement; 
```

这是我用 C# 编写的 XML：

```
Response.Clear();
Response.ContentType = "text/xml";
Response.Charset = "UTF-8";
Response.Write(XML_in_String);
Response.End(); 
```

这是我用 VBA 编写的 XML

```
connection.Open "POST", server & "www.webpage.com/" & postData, False
connection.setRequestHeader "Accept", "application/xml"
connection.setRequestHeader "Content-Type", "application/xml"
connection.send "<?xml version=""1.0"" encoding=""UTF-8"" ?><data>" & outXMLstr & "</data>" 
```

这是我在 VBA 中读取的 XML

```
Dim inXML As MSXML2.DOMDocument
Set inXML = New DOMDocument
inXML.loadXML (connection.responseText) 
```

具体来说，我在尝试加载 XML(xmlData) 时在 C# 中遇到错误，因为它无法解析与号 (&)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:11:12.013

在您的 上`xmlData`，您是否尝试过像@HatSoft 所说的那样使用`Server.HtmlEncode`/ `Server.HtmlDecode`？这样您就可以摆脱在 XML 中不起作用的 htmlentities。

或者您可以将数据包装到 CDATA 字段中

[在 C# 中解码 CDATA 部分](https://stackoverflow.com/questions/1236785/decode-cdata-section-in-c-sharp)

[http://www.w3schools.com/xml/xml_cdata.asp](http://www.w3schools.com/xml/xml_cdata.asp)

# php - Mod_Rewrite 将 `/about/` 重定向到 `page.php?page=about`

> ID：11317117
> 
> 赞同：1
> 
> 时间：2012-07-03T18:38:50.247
> 
> 标签：php, mod-rewrite

我正在使用 Mod_Rewrite 创建一个网站。目前所有的 url 都被重定向到最后的页面名称`.php`。

但是`/about/`and`/photos/`应该重定向到`page.php?page=about`and `page.php?page=photos`。

有没有办法做到这一点？

当前代码：

```
RewriteEngine on RewriteBase /new/ 
RewriteRule ^about/$ /new/page.php?page=about [L] 
RewriteRule ^([^/]*)/$ /new/$1.php [L] 
RewriteRule ^blog/([^/]*)/$ /new/blog.php?page=$1 [L] 
RewriteRule ^blog/post/([^/]*)/$ /post.php?post=$1 [L] 
RewriteRule ^blog/category/([^/]*)/$ /category.php?category=$1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:57:16.317

这是你想要的吗？

```
RewriteRule ^blog(/?)$ /new/blog.php [L]
RewriteRule ^blog/([^/]*)(/?)$ /new/blog.php?page=$1 [L]
RewriteRule ^blog/post/([^/]*)(/?)$ /post.php?post=$1 [L]
RewriteRule ^blog/category/([^/]*)(/?)$ /category.php?category=$1 [L]
RewriteRule ^(?!blog)([^/]*)(/?)$ page.php?page=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:55:09.600

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^(.*)/$ /page.php?page=$1 [L,QSA]
</IfModule> 
```

[L] 指令的意思是“最后一个”，因此如果匹配此规则，它将不会继续应用任何进一步的重写规则。

[QSA] 指令允许您将查询参数附加到重写的地址。

在博客重写的情况下，您需要做的就是将这条规则放在最后。

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteRule ^(.*)/$ /new/$1.php 
    RewriteRule ^blog/(.*)/$ /new/blog.php?page=$1 [L] 
    RewriteRule ^blog/post/(.*)/$ /post.php?post=$1 [L] 
    RewriteRule ^blog/category/(.*)/$ /category.php?category=$1 [L]

    RewriteRule ^(.*)/$ /page.php?page=$1 [L,QSA]
</IfModule> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:41:34.173

这很容易：

```
RewriteRule ^about/$ page.php?page=about 
RewriteRule ^photos/$ page.php?page=photos 
```

# android - 包含其他元素的android圆角元素

> ID：11317118
> 
> 赞同：2
> 
> 时间：2012-07-03T18:38:51.190
> 
> 标签：android, subview, rounded-corners

我正在尝试开发一个 android 应用程序，但我迷失在 10 分钟内在 iOS 上所做的事情:(

我正在尝试创建一个圆角视图或布局，其中包含图像、底部阴影和带有数字等内容的标签。

这是我希望创建的示例：

![在此处输入图像描述](../Images/05c1112aa4b48c946756feee6fbaee69.png)

如您所见，它不仅仅是具有圆角的图像，而是完整的元素。

如果有人可以帮助我，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:04:05.810

简短回答：android 不支持将儿童剪裁到背景图像，并且 android 不支持非矩形视图（如果我错了，请随时纠正我）

您可以使用一些我不会亲自给您的hackery来完成此操作，请参阅：[https ://stackoverflow.com/a/8313096/623683](https://stackoverflow.com/a/8313096/623683)

真正的答案是：停止复制“iOS 外观和感觉”，你不会走得太远，它违背了[谷歌自己的 android 风格指南](http://developer.android.com/design/index.html)......可能不是你想听到的，但 android 不是 iOS，所以我们不应该就这样对待...

抱歉，我无法提供更多帮助 -ck

# java - 如何在类型为接口的注入点中注入实现

> ID：11317123
> 
> 赞同：1
> 
> 时间：2012-07-03T18:39:08.793
> 
> 标签：java, spring, dependency-injection

假设我有以下界面：

```
public interface Interface1 {
} 
```

和以下课程：

```
public class Class1 implements Interface1 {} 
```

另外，我有这堂课：

```
public class Class2 {
    private Interface1 interface;
    public void setInterface(Interface1 interface) {
        this.interface = interface;
    }
} 
```

我应该在我的注入一个由into`applicationContext.xml`生成的 bean吗？另外，是否可以使用注释来做到这一点？`Class1``Class2.interface`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:44:10.907

您只需像任何其他 bean 一样注入它，只要运行时类型兼容它就可以正常工作，无需对 XML 中的接口类型做任何特殊处理。

```
<bean id="class1" class="package.Class1"/>
<bean id="class2" class="package.Class2">
  <property name="interface" ref="class1"/>
</bean> 
```

`@Autowired`也可以正常工作，当然如果容器中有多个 interface1 实现，您将需要使用`@Qualifier`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:49:22.803

*   如果你使用 xml 没关系 - 你定义你的 bean 并通过 bean 名称（而不是类型）注入你的 bean
*   如果你使用注解，use can use `@Resource(name="beanName")`or a`@Qualifier`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:20:25.147

另一种选择是javaconfig：

```
package com.mycom.myapp.config;

@Configuration
public class MyConfiguration {
  @Bean
  public Class1 class1() {
    return new Class1();
  }

  @Bean
  public Class2 class2() {
    Class2 class2 = new Class2();
    class2.setInterface(class1());
  }
} 
```

然后是一小部分 xml 胶水代码来获取 xml 配置以找到您的 @Configuration 注释类。

```
<context:component-scan base-package="com.mycom.myapp.config" /> 
```

当它看到 @Configuration 时，它会自动执行一些 spring 魔术，并使用该类来构造您的 bean，并使它们可用于其余基于 Xml 的上下文，因此您可以根据需要混合和匹配。由于一些漂亮的 javassist 魔法，处理 bean 范围、代理等非常聪明。

有关更多信息，请参阅： [http ://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-java](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-java)

# android - 当将 Fragment 添加到其中时，偏移量的 FrameLayout 会重新定位自己吗？

> ID：11317127
> 
> 赞同：1
> 
> 时间：2012-07-03T18:39:16.887
> 
> 标签：android, android-layout, android-fragments, android-view, android-fragmentactivity

我有一个`FrameLayout`（在 a 内）到/从它通过类`RelativeLayout`添加/删除。My最初与其父级左对齐，有时通过该方法水平偏移。`Fragments``FragmentTransaction``FrameLayout``FrameLayout.offsetLeftAndRight(int offset)`

我发现当我`FrameLayout`的偏移量并且我提交一个片段事务以`Fragment`向它添加一个（即`FragmentTransaction.add(R.id.myFrameLayout, myNewFragment).commit()`）时，我的`FrameLayout`跳转回到它的原始位置，忽略它的偏移量。

任何人都知道为什么会发生这种情况，以及当我添加 a 时如何避免`FrameLayout`重新定位`Fragment`？

> **注意：**我使用的是`offsetLeftAndRight(int offset)`方法而不是`setTranslationX(float translationX)`或其他方法，因为我需要我正在做的工作来完成蜂窝之前的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:32:40.077

通过跟踪偏移位置并`onLayout(boolean changed, int left, int top, int right, int bottom)`在调用此方法时覆盖我的 View 的方法以适当地偏移我的 View 来解决，如下所示：

```
@Override
protected void onLayout(boolean changed, int left, int top, int right, int bottom)
{
  super.onLayout(changed, left, top, right, bottom);

  if (changed)
  {
    offsetLeftAndRight(myHorizontalOffset);
    offsetTopAndBottom(myVerticalOffset);
  }
} 
```

# php - 在 HTML 选择标签选项中设置两个不同元素的样式

> ID：11317130
> 
> 赞同：2
> 
> 时间：2012-07-03T18:39:28.463
> 
> 标签：php, html, css

在我的 PHP 代码中，我从数据库中提取了一个包含两列的表，并将它们都显示在一个下拉列表中。以下是代码片段：

```
echo "<select id='isv' class='required'>";
while($row = pg_fetch_row($result)){    
    echo "<option><span class='options'>" . $row[0] . "</span>&nbsp;" . $row[1] . "</option>";
}
echo "</select><br>"; 
```

我想通过不同的样式将它们分开。所以我写了以下CSS：

```
.options
{
    color: red;
    float: left;
    text-align: right;
    width: 15em;
    margin-right: 1em;
} 
```

但是，该样式并未应用于选项。我到底需要在这段代码中更改什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:46:25.967

`<option>`元素不能以这种方式设置样式，您必须使用 JavaScript 设计自己的实现。下拉菜单 ( `<select>`s) 主要由浏览器 chrome 设置样式，而不是 CSS。此外，该`<option>`元素可能没有任何子元素。

以下是您*可以*通过 CSS 设置样式的一个很好的参考：http: [//bavotasan.com/2011/style-select-box-using-only-css/](http://bavotasan.com/2011/style-select-box-using-only-css/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:52:20.377

~~您可以巧妙地使用`margin`for that 而不是`<span>`. （这行不通，不用说）~~

考虑使用一些 jQuery 插件来自定义下拉菜单。[请参阅此处](http://designwithpc.com/Plugins/ddSlick#demo)的示例。还有这个[SO question](https://stackoverflow.com/questions/3721046/custom-drop-down-list-with-jquery)的答案。

# html - 用小单元格标记 HTML 表格的列/行

> ID：11317131
> 
> 赞同：0
> 
> 时间：2012-07-03T18:39:34.247
> 
> 标签：html, html-table

我正在开发一个应用程序，该应用程序将图像作为输入并在 HTML 表格中呈现图像（其中单元格类似于像素）。呈现表格时，我还会对每隔一列和每一行进行编号以供视觉参考。

我遇到了一个问题，“大”图像的单元格大小小于列/行标签的文本，所以最终发生的是标签文本的大小超出了表格的尺寸.

~~您可以在此处查看该应用程序的运行情况：http: [//knit.ly](http://knit.ly)~~[您可以在此处](http://lehmdogg.com/stackoverflow/knit_ly_screenshot.png) 查看我正在谈论的内容的屏幕截图！

最终，我想找到一种方法来提供这些可视列/行标签，而不会影响表格单元格的大小。另一个相关的问题是，我似乎使用 HTML 表格走错了路，但我不确定我还有什么其他选择。也许是 HTML 5 Canvas 功能？

我很想知道有哪些解决方案和/或替代设计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:48:12.277

你可以：

1.  `overflow:hidden`在标签单元格上使用设置宽度和；

2.  [将](http://www.w3schools.com/cssref/css3_pr_transform.asp)标签单元格文本转换 90°（所有现代浏览器和 IE9 都支持前缀形式）并设置`line-height`为所需的表格单元格宽度；

3.  在空白单元格中放置`nbsp;`具有相同字体和行高设置的 a。

# c# - EQATEC 有没有办法分析系统 DLL？

> ID：11317133
> 
> 赞同：0
> 
> 时间：2012-07-03T18:39:49.373
> 
> 标签：c#, profiling, profiler, eqatec

我正在使用 EQATEC，我喜欢它。但是，我似乎也无法让它分析 .NET 系统 DLL，例如`System.Net.dll`或`Microsoft.Xna.Framework.dll`，因为它们不在我的可执行文件目录中。

有没有办法做到这一点？

现在它告诉我一个方法本身需要很多时间，这是错误的，因为它是外部系统 DLL 调用一直需要，但它不显示此信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:51:43.653

根据 EQATEC 用户指南，在已知限制下：

*   当前只分析定义的方法，而不是引用的方法。因此，您的应用程序本身定义的所有方法都将被分析，但不是 System.* 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T02:53:47.353

> 现在它告诉我一个方法本身需要很多时间，这是错误的，因为它是外部系统 DLL 调用一直需要，但它不显示此信息。

没关系。

如果您知道某个系统例程拥有大量程序计数器，那对您有何帮助？您仍然需要弄清楚*代码*中授权它的内容。

示例：内存分配是一个系统功能，通常需要很长时间。这是否意味着您需要更快的内存分配器？不，这意味着你需要做更少`new`的 s。

您应该在代码中查找包含挂钟时间（自身加上被调用者）占总时间很大*一部分*的例程（甚至更好的*行）。*（不要寻找高呼叫数或高毫秒数。寻找高百分比。）

 *为什么？因为这是它负责的总时间的一部分。如果您能以某种方式使例行程序或线路不花费时间，那么总时间将减少该百分比。通常你这样做的方式是让它少打下属电话，或者根本不打。

例如，如果您的程序需要 10 秒，并且如果有一行代码这样做`new`并且其包含百分比为 20%（即该行代码及其封闭的例程有 20% 的时间在堆栈上），那么如果您可以少执行或根本不执行该行，您将节省 2 秒。*

# php - html2pdf = $html2pdf->WriteHTML($VARIABLE); 导致问题的线路

> ID：11317134
> 
> 赞同：1
> 
> 时间：2012-07-03T18:39:51.943
> 
> 标签：php, html2pdf

我有一个表单，它接受用户输入，发布到自身并将我的 php 代码存储到一个字符串变量中，并将该字符串数据保存到我服务器上的 .html 文件中。我想取消 .html 文件，而是使用 html2pdf 保存到 .pdf，但我遇到了问题。

我的 php 文件中有以下代码：

```
require_once(dirname(__FILE__).'/html2pdf_v4.03/html2pdf.class.php');
$html2pdf = new HTML2PDF('P','Letter','en');
$html2pdf->WriteHTML($current);
$html2pdf->Output('/var/www/Inspection/Quote/exemple.pdf'); 
```

当我注释掉第三行“$html2pdf->WriteHTML($current);” 我收到“TCPD 错误：某些数据已输出，无法发送 PDF 文件”的错误。

当我注释掉第三行和第四行时，我的页面的其余部分可以毫无问题地执行。. . 我只是没有得到我的.pdf。

我看过一些关于在写行之前冲洗掉一些东西的帖子，但没有一个足够清楚让我完成工作。

此外，如果我使用非常简化的代码，我可以正确生成 pdf。. . 我不知道为什么这是可能的。

这是有效的：

```
$content = "
<page>
<h1>Exemple d'utilisation</h1>
<br>
Ceci est un <b>exemple d'utilisation</b>
de <a href='http://html2pdf.fr/'>HTML2PDF</a>.<br>
</page>";

 require_once(dirname(__FILE__).'/html2pdf_v4.03/html2pdf.class.php');
$html2pdf = new HTML2PDF('P','A4','fr');
$html2pdf->WriteHTML($content);
$html2pdf->Output('exemple.pdf'); 
```

*** 编辑 *** $current =

```
 <br><div align="center"><H1><center>Sales Order: <font color="red" style="bold"> 1 3
    </font></center></h1>
    </div>
    <hr width="85%">
    <table width="800" align="center">
    <tr>
    <td valign="top" width="50%" align="center">
    <table frame="border">
    <th bgcolor="cccccc" colspan="2" align="center">General Order Information</th>
        <tr>
        <td align="center" nowrap="nowrap" width="40%">Order Num:</td>
        <td width="60%">1</td>
    </tr>   
        <tr>
        <td align="center" nowrap="nowrap" width="40%">Order Rev:</td>
        <td width="20%">3</td>
    </tr>        
    <tr>
        <td align="center" nowrap="nowrap" width="40%">Quote Num:</td>
        <td width="20%">1</td>
    </tr>       
        <tr>
        <td align="center" nowrap="nowrap" width="40%">Order Date:</td>
        <td width="60%">1970-01-01</td>
    </tr>           
        <tr>
        <td align="center" nowrap="nowrap" width="40%">Customer Name:</td>
        <td width="60%">1</td>
    </tr>
        <tr>
        <td align="center" nowrap="nowrap" width="40%">Customer Buyer:</td>
        <td width="60%">1</td>
    </tr>
    <tr>
        <td align="center" nowrap="nowrap" width="40%">Sold By:</td>
        <td width="60%">ED </td>
    </tr>
    <tr>
        <td align="center" nowrap="nowrap" width="40%">Sales Rep:</td>
        <td width="60%">DR</td>
    </tr>
        <tr>
        <td align="center" nowrap="nowrap" width="40%">Prog Mgr:</td>
        <td width="60%">VJ</td>
    </tr>
    </table>
    </td>
    <!-- Start of Shipping Data -->
    <td valign="top" width="50%">
    <table align="center" frame="Border">
    <th bgcolor="cccccc" colspan="2" align="center">Shipping Information</th>
    <tr>
    <td align="center" nowrap="nowrap" >Terms:</td>
    <td align="left">1</td>
    </tr>
    <tr>
    <td align="center" nowrap="nowrap" >FOB:</td>
    <td align="left">1</td>
    </tr>
    <tr>
    <td align="center" nowrap="nowrap" >Shipping Co:</td>
    <td align="left">1</td>
    </tr>
    <tr>
    <td nowrap="nowrap" align="center">Ship Acct Num:</td>
    <td align="left">1</td>
    </tr>
    <tr>
    <td nowrap="nowrap" align="center">Shipping Method:</td>
    <td align="left">1</td>
    </tr>
    <tr>
    <td nowrap="nowrap" align="center" valign="top">Order Comments:</td>
    <td>1</td>
    </tr>
        <tr>
        <td nowrap="nowrap" align="center" width="40%">Cust SO Upload:</td>
        <td width="60%">The file 1-1-3.jpg has been uploaded, and Quote 1 has been added to the Quote directory </td>
    </tr>
    </table>
    </td>
    </tr>
    </table>
    <hr width="85%">  <table align="center" width="85%" cellpadding="3" cellspacing="0"             frame="border" rules="all">
    <tr>
    <td bgcolor="cccccc" align="center"><h5>Line</h5></td>
    <td bgcolor="cccccc" align="center"><h5>Cust PN / Rev</td>
    <td bgcolor="cccccc" align="center"><h5>PN / Rev</td>
    <td bgcolor="cccccc" align="center"><h5>Description</h5></td>
    <td bgcolor="cccccc" align="center"><h5>Qty</h5></td>
    <td bgcolor="cccccc" align="center"><h5>UOM</h5></td>
    <td bgcolor="cccccc" align="center"><h5>Sale Price</h5></td>
    <td bgcolor="cccccc" align="center"><h5>Line Total</h5></td>
    <td bgcolor="cccccc" align="center"><h5>Required Date</h5></td>
    <td bgcolor="cccccc" align="center"><h5>Program</h5></td>
    </tr>  <tr>
    <td width="3px" valign="top" align="center">
    1 </td> <td nowrap="nowrap" valign="top" align="center">
    1 - 1
    </td>
    <td nowrap="nowrap" valign="top" align="center">
    1 - 1
    </td>
    <td nowrap="nowrap" valign="top" align="center">
    1
    </td>
    <td nowrap="nowrap" valign="top" align="center">
    1
    </td>
    <td nowrap="nowrap" valign="top" align="center">
    1
    </td>
    <td nowrap="nowrap" valign="top" align="center">
    1.00
    </td>
    <td nowrap="nowrap" valign="top" align="center">
    1.00
    </td>
    <td nowrap="nowrap" valign="top" align="center">
    1970-01-01
    </td>
    <td nowrap="nowrap" valign="top" align="center">
    1
    </td>
    </tr> <tr>
    <td align="right" colspan="10" bgcolor="cccccc">
    <b>The Order Total is 1.00</b>
    </td>
    </tr>
    </table> 
```

wkhtmltopdf 是我想远离的东西，因为它需要一个 x-server。. . 如果可能的话，我想避免的事情。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-20T18:57:46.397

您应该查看创建 PDF 的所有 php 脚本，然后查看没有任何类型的“备用行”或白线，然后再

```
<?php 
```

标签。祝你好运 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T15:22:11.447

在编写 PDF 之前，您必须非常小心不要输出（也就是渲染）任何内容。

错误消息“我收到“TCPD 错误：某些数据已经输出，无法发送 PDF 文件”的错误消息通常是由于您在编写 PDF 之前已经回显了某些内容。

您注意到其他人所说的“刷新某些东西”与“输出缓冲”有关 - 这是您绝对应该与 html2pdf/TCPPDF 一起使用的技术。

输出缓冲的工作原理如下：

```
ob_start() //starts output buffering
echo "<p>String you want to write to your PDF</p>";
$stringForPdf = ob_get_contents(); // this now contains the the above string
ob_end_clean(); // close and clean the output buffer.
html2pdf->WriteHtml($stringForPdf); 
```

您可以在此处参考完整文档：[输出缓冲控制](http://www.php.net/manual/en/book.outcontrol.php)

此外，请确保您的 PHP 文件中没有结束 PHP 标记：?>，因为后面的每个空格都会被输出。

如果您在剪断之前和之后提供更多代码，我也许可以进一步分析。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-04T13:39:39.643

如果您想使用 WKHTMLTOPDF 但无需安装它，您可以使用[Sprint PDF](http://www.sprintpdf.com)。这是一项将 HTML 转换为 PDF 的在线服务，并通过 RESTful API 进行。

# python - django 中 select_related() 和 select_related('columnname') 的区别

> ID：11317141
> 
> 赞同：5
> 
> 时间：2012-07-03T18:40:28.763
> 
> 标签：python, django

我很抱歉这个新手问题。我试图找出 select_related() 和 select_related('ColumnName') 之间的区别。这两者有区别吗？

我试图理解[这篇文章](http://zerokspot.com/weblog/2008/08/13/genericforeignkeys-with-less-queries/)，其中作者强调使用 select_related('content_type').all() 而不是简单的 select_related().all()。您的帮助将不胜感激，因为从过去两个小时开始，我一直在努力掌握这个概念。

非常感谢你，

苏尼尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T18:54:31.197

来自[django docs](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.select_related)，当不带参数调用时：

> 返回一个 QuerySet，它将自动“遵循”外键关系，在执行查询时选择附加的相关对象数据。

当给出一个论点时：

> 有时您只想访问与根模型相关的特定模型，而不是所有相关模型。在这些情况下，您可以将相关字段名称传递给 select_related() ，它只会遵循这些关系。您甚至可以通过使用双下划线分隔字段名称来对不止一个关系的模型执行此操作，就像过滤器一样。

# c# - 如何从字节显示带有opencv的视频？

> ID：11317143
> 
> 赞同：3
> 
> 时间：2012-07-03T18:40:34.933
> 
> 标签：c#, video, opencv, byte, emgucv

我正在开展一个项目，我们使用无线电调制解调器将数据（视频和遥测）从无人驾驶飞行器传输到地面站。我们需要做的是实时显示视频，并能够知道 C# 中每个遥测数据块对应的帧。

数据被解封装为遥测和视频字节 (mpeg4)。由于我对 OpenCV 有一些经验，我想用它来解码、显示和抓取视频中的点击位置。为此，我使用了名为 Emgu 的 C# 的 OpenCV 包装器。

问题是 OpenCV 从设备或文件加载视频，而我只有一个带有一些字节的回调。我已经尝试将这些字节写入一个文件并使用 OpenCV 打开这个文件，但是一旦它到达最后，我需要重新打开它并从它停止的地方继续，这会产生延迟。

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:32:02.410

一些有用的链接

[http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx)

[http://www.developerfusion.com/article/3918/socket-programming-in-c-part-1/](http://www.developerfusion.com/article/3918/socket-programming-in-c-part-1/)

[http://msdn.microsoft.com/en-us/magazine/cc300760.aspx](http://msdn.microsoft.com/en-us/magazine/cc300760.aspx)

[http://en.wikipedia.org/wiki/Stream_socket](http://en.wikipedia.org/wiki/Stream_socket)

[http://beej.us/guide/bgnet/output/html/multipage/theory.html](http://beej.us/guide/bgnet/output/html/multipage/theory.html)

希望有帮助！

# xcode - UINavigation 按钮样式

> ID：11317145
> 
> 赞同：0
> 
> 时间：2012-07-03T18:40:44.543
> 
> 标签：xcode, ipad, uisplitview, uinavigationcontroller

我正在使用 iphone 上的 UINavigation 控制器...当您单击它时，它会推送一个新视图...与您在 iphone 上的设置完全一样。

问题是......虽然我已经这样做了，但我不能让它看起来与 iphone 的设置完全一样，例如他们有一张图片和一个漂亮的小箭头。

如果这是自定义 id 爱，如果有人有链接可以这样做……谢谢

如果我没有正确解释，也可以链接到我所引用的内容 [http://cdn.kevinworthington.com/wp-content/uploads/2009/08/iPhone-settings1.png](http://cdn.kevinworthington.com/wp-content/uploads/2009/08/iPhone-settings1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:49:27.720

我相信这个图书馆会帮助你

[http://www.inappsettingskit.com/](http://www.inappsettingskit.com/)

# wordpress - 更改 Wordpress URL.. 安全吗？

> ID：11317149
> 
> 赞同：0
> 
> 时间：2012-07-03T18:41:11.390
> 
> 标签：wordpress, seo

我有一些我想更改的链接.. 下面的示例：

我有：

site.com/linktochange/article-title-here **_** _

我想将其更改为：

site.com/**链接更改**/article-title-here

1.  如何将破折号添加到这些类别？
2.  是否需要 301 重定向？每个类别下的文章是否仍然有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:45:19.257

Wordpress 将允许您更改永久链接并处理其余部分，但您可能会丢失一些搜索引擎点击量。

更多信息在这里：[http ://codex.wordpress.org/Using_Permalinks](http://codex.wordpress.org/Using_Permalinks)

如果您自己托管旧 URL，则可以使用 mod_rewrite 将旧 URL 重定向到新 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:10:42.860

您可能不需要为此更改永久链接。只编辑 Category slug 可能更容易。（仪表板 > 帖子 > 类别）

如果您的类别是开源并且其类别 slug 是“开源”，则该类别中的文章将具有以下 URL 结构和永久链接 (/%category%/%postname%)

site.com/opensource/hello-world

您可以将您的开源类别 slug 更改为：open-source，它会将 URL 结构更改为：

site.com/open-source/hello-world

希望这可以帮助。

“slug”是名称的 URL 友好版本。它通常都是小写的，并且只包含字母、数字和连字符。

# functional-programming - 在 Scheme (MIT/GNU Scheme) 中从文件中读取行

> ID：11317159
> 
> 赞同：1
> 
> 时间：2012-07-03T18:42:07.280
> 
> 标签：functional-programming, scheme

我正在尝试使用 Scheme（MIT/GNU Scheme 9.1），并且正在编写一些简单的程序来读写文件。

为了将文件中包含的所有行读入列表中，我编写了以下内容：

```
(define read-lines-from-port-impl
        (lambda (file-input-port)
                (let* ((line (read-line file-input-port))
                      )
                      (if (eof-object? line)
                          (list)
                          (cons line (read-lines-from-port-impl file-input-port))
                      )
                )
        )
)

(define read-lines-from-port
        (lambda (file-port)
                (if (input-port? file-port)
                    (read-lines-from-port-impl file-port)
                    (list)
                )
        )
)

(define read-lines-from-file
        (lambda (filename)
                (call-with-input-file filename read-lines-from-port)
        )
) 
```

**问题 1**

这似乎可行，但在 Scheme 中可能有一种更惯用/更简洁的方法。你能建议如何改进这段代码吗？

**问题2**

在上面的代码中，我使用了 call-with-input-file，它负责在调用 read-lines-from-port 之前打开一个输入端口，并在该过程完成后关闭它。

如果我想使用 open-input-file 和 close-input-port 自己打开和关闭一个输入端口，我将如何在 Scheme 中编写它？我的意思是我必须

*   调用打开输入文件
*   从结果端口读取行
*   调用关闭输入端口

在 Haskell 中，我会使用 do 表示法，但如何在 Scheme 中指定这样的一系列动作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:21:38.777

我没有测试这段代码，但即使我出错了，你也应该能够从这里弄清楚：

```
; read-lines [port-or-filename] -- defaults to current input
(define (read-lines . args)
  (let ((p (cond ((null? args) (current-input-port))
                 ((port? (car args)) (car args))
                 ((string? (car args)) (open-input-file (car args)))
                 (else (error 'read-lines "bad argument")))))
    (let loop ((line (read-line p)) (lines (list)))
      (if (eof-object? line)
          (begin (if (and (pair? args) (string? (car args)))
                   (close-input-port p))
                 (reverse lines))
          (loop (read-line p) (cons line lines)))))) 
```

您使用 编写一系列语句`begin`，如上所示。

# zend-framework2 - 预调度不起作用

> ID：11317161
> 
> 赞同：5
> 
> 时间：2012-07-03T18:42:24.013
> 
> 标签：zend-framework2

我有小问题，我有控制器扩展 AbstractActionController，我需要在任何操作之前调用一些函数，例如 indexAction 我认为 preDispatch() 在任何操作之前调用但是当我在 $this->view->test 中尝试此代码时没有什么。

```
class TaskController extends AbstractActionController
{
 private $view;

 public function preDispatch()
 {
   $this->view->test = "test";
 }

 public function __construct()
 {
   $this->view = new ViewModel();
 }

 public function indexAction()
 {
   return $this->view;
 }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-28T14:11:31.457

当我希望这样做时，我使用定义的`onDispatch`方法：

```
class TaskController extends AbstractActionController
{
  private $view;

  public function onDispatch( \Zend\Mvc\MvcEvent $e )
  {
    $this->view->test = "test";

    return parent::onDispatch( $e );
  }

  public function __construct()
  {
    $this->view = new ViewModel();
  }

  public function indexAction()
  {
    return $this->view;
  }
} 
```

* * *

此外，请查看[http://mwop.net/blog/2012-07-30-the-new-init.html](http://mwop.net/blog/2012-07-30-the-new-init.html)以获取有关如何使用 ZF2 中的调度事件的更多信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T09:26:39.543

您最好在模块类上执行此操作，并使用 EventManager 处理 mvc 事件，如下所示：

```
class Module
{
  public function onBootstrap( $e )
  {
    $eventManager = $e->getApplication()->getEventManager();
    $eventManager->attach( \Zend\Mvc\MvcEvent::EVENT_DISPATCH, array($this, 'preDispatch'), 100 );
  }

  public function preDispatch()
  {
    //do something
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T19:40:44.027

在一行中：

```
public function onBootstrap(Event $e)
{
  $e->getTarget()->getEventManager()->attach('dispatch', array($this, 'someFunction'), 100);
} 
```

最后一个数字是重量。作为减去等于发布事件。

以下事件已预先配置：

```
const EVENT_BOOTSTRAP      = 'bootstrap';
const EVENT_DISPATCH       = 'dispatch';
const EVENT_DISPATCH_ERROR = 'dispatch.error';
const EVENT_FINISH         = 'finish';
const EVENT_RENDER         = 'render';
const EVENT_ROUTE          = 'route'; 
```

# .htaccess - 如何从帖子中删除帖子 ID，然后重定向到新 URL？

> ID：11317163
> 
> 赞同：2
> 
> 时间：2012-07-03T18:42:40.357
> 
> 标签：.htaccess, redirect, wordpress

我刚刚更改了基于 wordrpress 的博客的永久链接结构。以前它有这样的永久链接结构

[http://www.mysite.com/sample-post-example/2345/](http://www.mysite.com/sample-post-example/2345/)

网址末尾的数字是由 wordpress 软件自动生成的。实际上这些数字是post_id。现在我有了这个 url 结构。

[http://www.mysite.com/sample-post-example/](http://www.mysite.com/sample-post-example/)

现在的问题是单个帖子在两个 url 结构下都可用。

在删除旧网址末尾的 Post_ID 后，是否有将（301）旧网址重定向到新网址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:38:05.403

检查这个：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^example.com
RewriteRule (.*) http://www.example.com/$1 [R=301,L]
RewriteRule (.+)/\d{4,5}/?$ $1/ [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:06:20.553

单个帖子不应在两个 URL 下都可用。您确定您发布的第二个链接不是存档页面吗？这可能是您正在寻找的自定义永久链接结构：/%category%/%postname%

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T16:44:58.663

我运行一个 wordpress 博客，其主页包含首页上的最后 13 个帖子。然后主页有分页转到以前的帖子。因此，当我尝试转到第 2 页时，例如[http://www.mysite.com/page/2/](http://www.mysite.com/page/2/)，由于上述行，我收到 404 错误。现在我正在使用两行代码，并且在我的博客上一切正常。请检查它们并告诉我这些代码有什么问题。

```
RedirectMatch 301 ^/([^/]+)/([0-9]{4})/$ http://www.mysite.com/$1
RedirectMatch 301 ^/([^/]+)/([0-9]{5})/$ http://www.mysite.com/$1 
```

我最多有 1000 篇博文，共 74 页。但是第一个帖子的 ID 包含 4 位数字，而我在 URL 末尾使用 ID 创建的最后一个帖子包含 5 位数字。因此，第一行检查帖子是否在 URL 末尾包含 4 位数字，如果是，它将删除它们并显示剩余部分，即 /sample-post-example/ 如上所述。同样，第二行检测 url 末尾的 5 位数字。包含少于或多于 4-5 位的其他 URL 将不受影响。这样，首页的分页不受影响。

我们可以结合以上两条线吗？

对不起，eng 不是我的母语，所以我想我不能以适当的方式告诉你。

# jquery - 如何在周围的 div 标签边框上使用图像来为图像提供自定义边框外观？

> ID：11317169
> 
> 赞同：0
> 
> 时间：2012-07-03T18:43:11.080
> 
> 标签：jquery, html, css

请帮助我，因为我没有为这个问题找到任何好的解决方案我已将以下 css 设置为 div 容器的 ger 边框图像，但问题是我的正确图像没有出现在边框上，但它留下了空格div容器的右边框展开时如何解决这个问题。

```
div#container{
    position:relative;
    margin-left:120px;
    margin-right:120px;
    float:top;
    /*margin-top:-14px;*/
    margin-bottom:50px;
    /*border:2px solid #000;*/
    width:auto;
    height:100%;

    }   
ul#ulmenu{
    padding-left:0;
    list-style:none;

    }
div#menus{
    width:900px;
    margin-top:7px;
    margin-bottom:5px;
    /*display:block;*/

    }       
ul#ulmenu li{
    margin-top:15px;
    float:left;
    line-height:16px;
    }

ul#ulmenu a{
    margin-top:13px;
    text-decoration:none;
    font-family:Verdana, Geneva, sans-serif;
    font-size:16px;
    font-weight:bold;
    padding:8px;
    border:2px solid #060;
    background:#069;
    color:#FFF;
    }
ul#ulmenu a:hover, ul#ulmenu a:visited{
    background:#09F;
    color:#C06;
}
div#left-image{
    position:absolute;
    left:0;
    width:28px;
    height:100%;
    float:left;
    background:url(nios%20admin%20images/images/images/border-left.png) repeat-y;   
    }

div#right-image{
    position:absolute;
    display:compact;
    right:0;
    margin:0;
    width:30px;
    height:100%;
    float:right;
    background:url(nios%20admin%20images/images/images/border-right.png) repeat-y;
    }   
div#bottom{
    position:absolute;
    bottom:0;
    width:100%;
    /*border:2px solid #000;*/
    height:36px;
    z-index:100;
    }   
div#bottom-left{
    width:51px;
    height:36px;
    background:url(nios%20admin%20images/images/images/corner-left.png) no-repeat;
    float:left;
    }   
    div#bottom-center{

    height:36px;
    background:url(nios%20admin%20images/images/images/bottom-image.png) repeat-x;
    margin-right:49px;
    /*clear:both:*/
    }       
div#bottom-right{
    width:49px;
    height:36px;
    background:url(nios%20admin%20images/images/images/corner-right.png) no-repeat;
    float:right;
    margin-top:-36px;

    }   

div#main-containts{
    position:absolute;
    margin-right:30px;
    left:25px;
    right:30px;
    padding:25px 10px;
    text-align:center;
    width:auto;}    
div#data-containts{
    /*position:absolute;*/
    margin-top:50px;
    padding-top:50px;
    }                   
#container #main-containts #data-containts strong {
    font-family: Tahoma, Geneva, sans-serif;
    color: #C03;
    font-size: 18px;
}
.msg {
    font-family: Tahoma, Geneva, sans-serif;
    font-weight: bold;
    color: #C06;
    font-size: 18px;
}
div#workspace{
    position:relative;}
</style>

</head>
<body>
<div id="workspace">
<div id="adminwrapper">
<div align="center">
<img src="images/adminbg-2.png" />
</div>
</div>

<div id="container">
<div id="left-image"></div>

<div id="main-containts" align="center">
    <div id="menus">
    <ul id="ulmenu">
    <li><a href="index.php?act=admin_logout" >Logout</a></li>
    <li><a href="javascript:void(0);" OnClick="c_pass()">Change-Password</a></li>
    <li><a href="#" >Back-Up</a></li>
    <li><a href="students.php?act=show_stud_rec" >Students</a></li>
    </ul>
    </div>
    <div id="data-containts">
    <span class="msg">{$msg}</span> </div>
    <br/>
    <p>
   {$body_data}
    </p>
</div>

<div id="right-image"></div>

   <div id="bottom">

       <div id="bottom-left"></div>
       <div id="bottom-center"></div>
       <div id="bottom-right"></div>

   </div>

</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T18:45:37.590

您可以使用border-image css 属性。

它在这里详细给出：[http ://css-tricks.com/understanding-border-image/](http://css-tricks.com/understanding-border-image/)

这是演示：[http ://www.norabrowndesign.com/css-experiments/border-image-anim.html](http://www.norabrowndesign.com/css-experiments/border-image-anim.html)

# excel - 根据部分文本删除行

> ID：11317172
> 
> 赞同：4
> 
> 时间：2012-07-03T18:43:32.973
> 
> 标签：excel, vba

如果我在 A 列中找到文本“FemImplant”，我正在尝试删除整行。

该文本是由“$”链接的句子的一部分。我需要解析“$”之前的单元格内容，看看它是否匹配“FemImplant”并删除该行。

这就是我到目前为止所拥有的。

```
Dim cell As Excel.Range
RowCount = DataSheet.UsedRange.Rows.Count
Set col = DataSheet.Range("A1:A" & RowCount)
Dim SheetName As String
Dim ParsedCell() As String

For Each cell In col
    ParsedCell = cell.Value.Split("$")
    SheetName = ParsedCell(0)

    If SheetName = "FemImplant" Then
        cell.EntireRow.Delete Shift:=xlUp
    End If
Next 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-03T18:57:34.113

您可以使用 AutoFilter 删除包含文本的行`FemImplant$`。这种方法将比循环快得多。

如果您正在使用**布尔**值，那么您可能希望看到[Trying to Delete Rows with False Value in my Range](https://stackoverflow.com/questions/64112769/trying-to-delete-rows-with-false-value-in-my-range)

看这个例子

我假设 Cell A1 有标题。

```
Sub Sample()
    Dim ws As Worksheet
    Dim strSearch As String
    Dim lRow As Long

    strSearch = "FemImplant$"

    Set ws = Sheets("Sheet1")

    With ws
        lRow = .Range("A" & .Rows.Count).End(xlUp).Row

        '~~> Remove any filters
        .AutoFilterMode = False

        '~~> Filter, offset(to exclude headers) and delete visible rows
        With .Range("A1:A" & lRow)
          .AutoFilter Field:=1, Criteria1:="=*" & strSearch & "*"
          .Offset(1, 0).SpecialCells(xlCellTypeVisible).EntireRow.Delete
        End With

        '~~> Remove any filters
        .AutoFilterMode = False
    End With
End Sub 
```

**快照**

![在此处输入图像描述](../Images/529ce708237316cd49fb808c962cdeeb.png)

# c# - 短信和电子邮件通知服务的 C# 代码

> ID：11317174
> 
> 赞同：5
> 
> 时间：2012-07-03T18:43:36.283
> 
> 标签：c#, model-view-controller, email, alert, reminders

我正在研究 ASP.Net MVC 3.0 SQL Server 实体框架我需要创建一个每日提醒系统，用户将在其中输入电子邮件地址和提醒时间，如第一次提醒（上午 9 点）、第二次提醒（下午 12 点）和第三次提醒（下午 6 点），系统应在这些时间发送电子邮件。

当满足时间条件时，发送电子邮件的最佳方式是什么。请提出不同的方法来完成这项任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:56:47.483

基本上，您希望将电子邮件作为计划作业发送，为此我们都很快将其视为 Windows 服务坐在后台并执行计划作业

但是，如果您想通过 ASP.NET 实现类似功能，请阅读更多关于此类[CacheItemRemovedCallback](http://msdn.microsoft.com/en-us/library/system.web.caching.cacheitemremovedcallback.aspx)

他们是一个非常好的博客，在[https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/](https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/)

# c# - 暂停线程直到 WebBrowser 完成加载

> ID：11317179
> 
> 赞同：3
> 
> 时间：2012-07-03T18:43:59.467
> 
> 标签：c#

我正在尝试浏览网站并使用 Windows 窗体中的 WebBrowser 控件以编程方式在页面上做一些工作。我在寻找一种方法来阻止我的线程直到 WebBrowser 的 DocumentCompleted 事件被触发时发现[了这一点。](https://stackoverflow.com/questions/8258062/whats-the-best-way-to-pause-loop-while-webbrowser-is-loading-page)鉴于此，这是我当前的代码：

```
public partial class Form1 : Form
{
    private AutoResetEvent autoResetEvent;

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Thread workerThread = new Thread(new ThreadStart(this.DoWork));
        workerThread.SetApartmentState(ApartmentState.STA);
        workerThread.Start();
    }

    private void DoWork()
    {
        WebBrowser browser = new WebBrowser();
        browser.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(browser_DocumentCompleted);
        browser.Navigate(login_page);
        autoResetEvent.WaitOne();
        // log in

        browser.Navigate(page_to_process);
        autoResetEvent.WaitOne();
        // process the page
    }

    private void browser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        autoResetEvent.Set();
    }
} 
```

该线程看起来没有必要，但是当我扩展此代码以通过网络接受请求时（线程将侦听连接，然后处理请求）。此外，我不能只将处理代码放在 DocumentCompleted 处理程序中，因为我必须导航到几个不同的页面并在每个页面上执行不同的操作。

现在，据我了解，这不起作用的原因是因为 DocumentCompleted 事件使用了调用 WaitOne() 的同一线程，因此在 WaitOne() 返回之前不会触发该事件（在这种情况下从不）。

有趣的是，如果我从工具箱（拖放）将 WebBrowser 控件添加到表单中，然后使用它进行导航，则此代码可以完美运行（除了将 Navigate 调用放在 Invoke 调用中之外，没有任何更改 -见下文）。但是，如果我手动将 WebBrowser 控件添加到 Designer 文件，它就不起作用。而且我真的不想在我的表单上看到一个可见的 WebBrowser，我只想报告结果。

```
public delegate void NavigateDelegate(string address);
browser.Invoke(new NavigateDelegate(this.browser.Navigate), new string[] { login_page }); 
```

那么，我的问题是：在浏览器的 DocumentCompleted 事件触发之前暂停线程的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:42:07.450

克里斯，

我在这里向您传递了一个解决问题的可能实现，但请看一下这里的评论，我必须在一切按预期工作之前面对和修复。这是在 webBrowser 中的页面上执行某些活动的方法示例（请注意，在我的情况下，webBrowser 是 Form 的一部分）：

```
 internal ActionResponse CheckMessages() //Action Response is a custom class of mine to store some data coming from pages
        {
        //go to messages
        HtmlDocument doc = WbLink.Document; //wbLink is a referring link to a webBrowser istance
        HtmlElement ele = doc.GetElementById("message_alert_box");
        if (ele == null)
            return new ActionResponse(false);

        object obj = ele.DomElement;
        System.Reflection.MethodInfo mi = obj.GetType().GetMethod("click");
        mi.Invoke(obj, new object[0]);

        semaphoreForDocCompletedEvent = WaitForDocumentCompleted();  //This is a simil-waitOne statement (1)
        if (!semaphoreForDocCompletedEvent)
            throw new Exception("sequencing of Document Completed events is failed.");

        //get the list
        doc = WbLink.Document;
        ele = doc.GetElementById("mailz");
        if (!ele.WaitForAvailability("mailz", Program.BrowsingSystem.Document, 10000)) //This is a simil-waitOne statement (2)

            ele = doc.GetElementById("mailz");
        ele = doc.GetElementById("mailz");

        //this contains a tbody
        HtmlElement tbody = ele.FirstChild;

        //count how many elemetns are espionage reports, these elements are inline then counting double with their wrappers on top of them.
        int spioCases = 0;
        foreach (HtmlElement trs in tbody.Children)
        {
            if (trs.GetAttribute("id").ToLower().Contains("spio"))
                spioCases++;
        }

        int nMessages = tbody.Children.Count - 2 - spioCases;

        //create an array of messages to store data
        GameMessage[] archive = new GameMessage[nMessages];

        for (int counterOfOpenMessages = 0; counterOfOpenMessages < nMessages; counterOfOpenMessages++)
        {

            //open first element
            WbLink.ScriptErrorsSuppressed = true;
            ele = doc.GetElementById("mailz");
            //this contains a tbody
            tbody = ele.FirstChild;

            HtmlElement mess1 = tbody.Children[1];
            int idMess1 = int.Parse(mess1.GetAttribute("id").Substring(0, mess1.GetAttribute("id").Length - 2));
            //check if subsequent element is not a spio report, in case it is then the element has not to be opened.
            HtmlElement mess1Sibling = mess1.NextSibling;
            if (mess1Sibling.GetAttribute("id").ToLower().Contains("spio"))
            {
                //this is a wrapper for spio report
                ReadSpioEntry(archive, counterOfOpenMessages, mess1, mess1Sibling);
                //delete first in line
                DeleteFirstMessageItem(doc, ref ele, ref obj, ref mi, ref tbody);
                semaphoreForDocCompletedEvent = WaitForDocumentCompleted(6); //This is a simil-waitOne statement (3)

            }
            else
            {
                //It' s anormal message
                OpenMessageEntry(ref obj, ref mi, tbody, idMess1); //This opens a modal dialog over the page, and it is not generating a DocumentCompleted Event in the webBrowser

                //actually opening a message generates 2 documetn completed events without any navigating event issued
                //Application.DoEvents();
                semaphoreForDocCompletedEvent = WaitForDocumentCompleted(6);

                //read element
                ReadMessageEntry(archive, counterOfOpenMessages);

                //close current message
                CloseMessageEntry(ref ele, ref obj, ref mi);  //this closes a modal dialog therefore is not generating a documentCompleted after!
                semaphoreForDocCompletedEvent = WaitForDocumentCompleted(6);
                //delete first in line
                DeleteFirstMessageItem(doc, ref ele, ref obj, ref mi, ref tbody); //this closes a modal dialog therefore is not generating a documentCompleted after!
                semaphoreForDocCompletedEvent = WaitForDocumentCompleted(6);
            }
        }
        return new ActionResponse(true, archive);
    } 
```

在实践中，此方法获取 MMORPG 的页面并读取其他玩家发送到帐户的消息，并通过方法 ReadMessageEntry 将它们存储在 ActionResponse 类中。

除了真正依赖于案例的代码的实现和逻辑（并且对您没有用）之外，还有一些有趣的元素可能会为您的案例提供很好的注意。我在代码中添加了一些注释并突出显示了 3 个重要点 [带符号`(1)`,`(2)`和`(3)`]

算法是：

1）到达一个页面

2) 从 webBrowser 获取底层 Document

3）找到一个元素点击进入消息页面[完成：`HtmlElement ele = doc.GetElementById("message_alert_box");`]

4）通过 MethodInfo 实例和反射调用触发单击它的事件[这会调用另一个页面，因此 DocumentCompleted 迟早会到达]

5) 等待调用完成的文档，然后继续[完成方式：`semaphoreForDocCompletedEvent = WaitForDocumentCompleted();` 在点 (1)]

6) 页面更改后从 webBrowser 获取新文档

7）在页面上找到一个特定的锚点，该锚点定义了我要阅读的消息的位置

8）确保页面中存在这样的标签（因为可能有一些 AJAX 延迟我想要阅读的内容准备就绪）[完成：`ele.WaitForAvailability("mailz", Program.BrowsingSystem.Document, 10000)`即第 (2) 点]

9) 为读取每条消息执行整个循环，这意味着打开一个位于同一页面上的模式对话框表单，因此不会生成 DocumentCompleted，准备好时读取它，然后关闭它，然后重新循环。对于这种特殊情况，我使用`semaphoreForDocCompletedEvent = WaitForDocumentCompleted(6);`在点 (3)调用的 (1) 重载

现在我用来暂停、检查和阅读的三种方法：

（1）在引发 DocumentCompleted 时停止而不会对 DocumentCompleted 方法过度收费，该方法可用于多个单一目的（如您的情况）

```
private bool WaitForDocumentCompleted()
        {
            Thread.SpinWait(1000);  //This is dirty but working
            while (Program.BrowsingSystem.IsBusy) //BrowsingSystem is another link to Browser that is made public in my Form and IsBusy is just a bool put to TRUE when Navigating event is raised and but to False when the DocumentCOmpleted is fired.
            {
                Application.DoEvents();
                Thread.SpinWait(1000);
            }

            if (Program.BrowsingSystem.IsInfoAvailable)  //IsInfoAvailable is just a get property to cover webBroweser.Document inside a lock statement to protect from concurrent accesses.
            {
                return true;
            }
            else
                return false;
        } 
```

(2) 等待页面中的特定标签可用：

```
public static bool WaitForAvailability(this HtmlElement tag, string id, HtmlDocument documentToExtractFrom, long maxCycles)
        {
            bool cond = true;
            long counter = 0;
            while (cond)
            {
                Application.DoEvents(); //VERIFY trovare un modo per rimuovere questa porcheria
                tag = documentToExtractFrom.GetElementById(id);
                if (tag != null)
                    cond = false;
                Thread.Yield();
                Thread.SpinWait(100000);
                counter++;
                if (counter > maxCycles)
                    return false;
            }
            return true;
        } 
```

(3) 等待 DocumentCompleted 到达的肮脏技巧，因为页面上不需要重新加载框架！

```
private bool WaitForDocumentCompleted(int seconds)
    {
        int counter = 0;
        while (Program.BrowsingSystem.IsBusy)
        {
            Application.DoEvents();
            Thread.Sleep(1000);
            if (counter == seconds)
            {
            return true;
            }
            counter++;
        }
        return true;
    } 
```

我还将 DocumentCompleted Methods 和 Navigating 传递给您，让您全面了解我是如何使用它们的。

```
private void webBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            if (Program.BrowsingSystem.BrowserLink.ReadyState == WebBrowserReadyState.Complete)
            {
                lock (Program.BrowsingSystem.BrowserLocker)
                {
                    Program.BrowsingSystem.ActualPosition = Program.BrowsingSystem.UpdatePosition(Program.BrowsingSystem.Document);
                    Program.BrowsingSystem.CheckContentAvailability();
                    Program.BrowsingSystem.IsBusy = false;
                }
            }
        }

private void webBrowser_Navigating(object sender, WebBrowserNavigatingEventArgs e)
        {
            lock (Program.BrowsingSystem.BrowserLocker)
            {
                Program.BrowsingSystem.ActualPosition.PageName = OgamePages.OnChange;
                Program.BrowsingSystem.IsBusy = true;
            }
        } 
```

如果您现在了解此处介绍的实现背后的细节，请查看[此处](https://stackoverflow.com/questions/11352301/how-to-use-doevents-without-being-evil)以了解 DoEvents() 背后的混乱（希望从 S.Overflow 链接其他站点不是问题）。

最后一点，当您从 Form 实例使用 Navigate 方法时，您需要将调用放在 Invoke 中：这很清楚您需要 Invoke，因为需要在 webBrowser 上工作的方法（或即使将其作为参考变量纳入范围）也需要在 webBrowser 本身的同一线程上启动！

此外，如果 WB 是某种 Form 容器的子容器，它还需要实例化它的线程与 Form 创建的线程相同，并且为了传递性，需要调用 WB 上需要工作的所有方法在 Form 线程上（在您的情况下，调用将您的调用重新定位在 Form 本机线程上）。我希望这对你有用（我只是在我的母语代码中留下了 //VERIFY 注释，让你知道我对 Application.DoEvents() 的看法）。

亲切的问候，亚历克斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:04:23.833

HAH! I had the same question. You can do this with event handling. If you stop a thread mid way through the page, it will need to wait until it the page finishes. You can easily do this by attaching

```
 Page.LoadComplete += new EventHandler(triggerFunction); 
```

In the triggerFunction you can do this

```
triggerFunction(object sender, EventArgs e)
{
     autoResetEvent.reset();
} 
```

Let me know if this works. I ended up not using threads in mine and instead just putting the stuff into triggerFunction. Some syntax might not be 100% correct because I am answering off the top of my head

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:07:24.380

**编辑**

像这样在初始化组件方法中注册，而不是在相同的方法中。

```
WebBrowser browser = new WebBrowser(); 
WebBrowserDocumentCompletedEventHandler(webBrowser_DocumentCompleted); 
```

ReadyState 将在 DocumentCompleted 事件中检查时告诉您文档加载的进度。

```
void webBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
   if (browser.ReadyState == WebBrowserReadyState.Complete)
{

}
} 
```

# authentication - 是否可以在反向代理中缓存经过身份验证的资源_per user_？

> ID：11317182
> 
> 赞同：2
> 
> 时间：2012-07-03T18:44:20.043
> 
> 标签：authentication, rest, caching, basic-authentication

我们有一个 REST-ish（不是非常 RESTful，但仍然通过 uri 访问内容）服务，每个用户必须验证自己才能访问某些资源。基本上，访问资源的结果`http://server/do_something?q=foobar`会因用户而异。

使用 HTTP 身份验证（通过 TSL）对用户进行身份验证。

这里的每个用户都代表一个大容量的 Web 服务，因此缓存对我们非常有利。但是在阅读了缓存之后，似乎身份验证标头的存在会阻止资源被缓存。

如果只查看 URI，这是有道理的，但这里的重要信息包括身份验证标头。那么有没有什么方法可以使用相当标准的工具（Apache 的 mod_cache、Squid 等）来进行这种缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T08:48:21.810

我们最终为每个用户创建了虚拟主机，缓存在每个主机上完成：

*   user1.myservice.net
*   user2.myservice.net
*   ...

# r - 如何在远程 ssh 连接中本地绘制 R？

> ID：11317184
> 
> 赞同：14
> 
> 时间：2012-07-03T18:44:29.067
> 
> 标签：r, ubuntu, ssh

我目前正在通过 ssh 连接到我在 VIM 中设置了 R 的远程计算机。我在两边都使用ubuntu。

当我尝试从 R 中绘制某些东西时，它会出现在远程机器上而不是本地机器上。有什么办法可以在本地制作 R 绘图吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T19:15:04.757

您可以使用带有`-X`开关的 SSH 将图形参数转发到本地计算机。

# objective-c - Xcode 调试器在特定类中崩溃

> ID：11317189
> 
> 赞同：3
> 
> 时间：2012-07-03T18:45:07.233
> 
> 标签：objective-c, ios, xcode

我有一个我正在 Xcode 中开发的 iPad 应用程序。我遇到了一个错误，我缩小到发生在一个特定的课程中。但是，当我尝试在调试器中检查该类的方法时，它开始变得混乱。我尝试点击“跳过”按钮，但它没有响应。最终，调试器按钮（步入、步入、退出）只是灰显，继续按钮变成暂停，就像它正在继续一样。但是，当我按下暂停按钮时，什么也没有发生，据我所知，它没有运行程序。

什么可能导致调试器像这样运行？

编辑：我知道我没有提供关于类本身的太多细节，但是调试器之前已经能够通过这个类，当时无限循环正在运行并且我试图找到它发生的位置。

# ajax - 登录后在codeigniter中重定向

> ID：11317191
> 
> 赞同：1
> 
> 时间：2012-07-03T18:45:11.803
> 
> 标签：ajax, codeigniter

成功登录后尝试进行重定向。登录信息使用 ajax 发送到控制器。

我的控制器代码如下

```
public function login_controller_function()
{
    $this->load->model('login_model');
    if ($this->input->is_ajax_request())
    {
        $user_name=$this->input->post('username');
        $user_password = $this->input->post('password');
        $this->load->helper('url');
        $result = $this->login_model->verify_user($user_name,$user_password);
        //  echo 'user_logged_in';
        if(strcmp($result,'user_logged_in')==0)
        {
            redirect('welcome');

        }
    }
} 
```

但它根本不起作用。有谁知道怎么了？

嗨，我的 html 按要求。我也在使用 twitter 引导程序

```
<li class="divider-vertical"></li>
<li><a href="#" id="login_btn">Login</a></li>
<li><a href="<?php echo base_url('register'); ?>">Register</a></li> 
```

对于按钮，所以当我单击登录按钮时，将出现一个模式窗口并询问登录信息。

所以当我点击登录按钮时，我的 js 代码将发送一个 ajax 请求

我的js代码如下

```
 /*Attempt register user jquery ajax*/
    $('#login').click(function(){ 

        var user_name = $('#loginHere').find('#user_name').val();

        var user_password = $('#loginHere').find('#login_pwd').val();

        if(user_name==""||user_password=="")
            return;

        var login_data = { username:user_name, password:user_password};

                $.ajax({
        type: "POST",
        dataType: "json",
        async: false,
        url:"login_register/login_controller_function",
        data: login_data,
        success: function(data) {
            if(data.login)
            {
                alert(data.redirect);
                window.location.replace(data.redirect);

            }
            else if(!data.login)
            {
                alert('data login not true');
            }
        },
        error:function(data){
            alert('ajax error');
        }
    });
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:53:17.100

当您使用 ajax 调用控制器方法时，您需要将一些变量或值（以指示登录成功或不成功）发回给进行 ajax 调用以处理重定向的 javascript。或者换句话说，javascript 应该处理重定向，因为您不是通过直接发布到控制器方法来调用控制器，而是通过 ajax。

ajax 脚本在登录后将输出作为对 ajax 调用的响应，然后重定向到欢迎控制器是控制器方法将重定向到的页面的整个 HTML，这不是处理 ajax 调用的正确方法。

所以我建议，您应该在登录成功后在控制器中设置一些会话值，并将一些值发送回 ajax 方法以指示 iof 登录成功或失败。

然后，您可以使用 javascript 重定向，并且当您通过 javascript 重定向到安全页面时，您应该设置会话。

控制器：

* * *

```
public function login_controller_function(){
$this->load->model('login_model');
if ($this->input->is_ajax_request())
{
    $user_name=$this->input->post('username');
    $user_password = $this->input->post('password');
    $this->load->helper('url');
    $result = $this->login_model->verify_user($user_name,$user_password);
    //  echo 'user_logged_in';
    if(strcmp($result,'user_logged_in')==0)
    {
     //set the session variables here so that I can access the secure area 

     //send back response to the ajax method  
     print 'success';

    }else{
        //send back response to the ajax method
        print 'failure';
    }
} 
```

}

ajax脚本：

* * *

```
$.ajax({
       type: "POST",
       url: "<?php echo base_url();?>index.php/login/login_controller_function",
       data: "userName="+$('#userName').val()+"&passWord="+$('#password').val(),
       cache:false,
       success: function(msg)
           {            
            if(msg =='success'){
            //redirect to dashboard
            }
            if(msg == "failure"){
            //display login error message               
           }
     }); 
```

这是事物应该如何工作的基本示例。您当然可以扩展它或使其更健壮。

# mongodb - 手动生成插入到 Mongodb 中的文档的 id

> ID：11317192
> 
> 赞同：0
> 
> 时间：2012-07-03T18:45:18.170
> 
> 标签：mongodb, mongoose, database

我想获取已创建文档的 id，而无需在创建文档后进行单独查询来获取文档。我想我需要在创建文档之前手动创建文档的 ID。有没有办法做到这一点？我正在使用`mongoose`驱动程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:02:20.183

创建新的 mongoose 模型实例后，它的`_id`值已经设置为保存时的值。例如：

```
var user = new User();
// user._id is already set.
...
user.save(); 
```

# c# - 在 C# 中确定移动硬件制造商

> ID：11317195
> 
> 赞同：4
> 
> 时间：2012-07-03T18:45:31.897
> 
> 标签：c#, .net, mobile

我正在编写一些 .NET CF 代码，这些代码有时会在 Motorola 设备上运行，而有时会在 Intermec 设备上运行。根据我运行的设备，我想使用制造商库来做我正在做的事情。.NET CF 中是否有一种简单的方法来确定硬件制造商（理想情况下是型号）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T03:01:25.400

尝试使用 coredll.dll 中的 SystemParametersInfoString 方法。

```
StringBuilder sb = new StringBuilder(256);

if (SystemParametersInfoString(SPI_GETPLATFORMTYPE, sb.Capacity, sb, 0) != 0)
{
    String name = sb.ToString();        
} 
```

将 SPI_GETPLATFORMTYPE 更改为 SPI_GETOEMINFO 或使用它。你可能会更好..

# javascript - 如何检查 RichFaces 组件 Rich:messages 是否有 Javascript 中的消息？

> ID：11317198
> 
> 赞同：1
> 
> 时间：2012-07-03T18:45:41.353
> 
> 标签：javascript, jsf-2, richfaces

我需要检查渲染的`rich:messages`组件是否附加了来自 JavaScript 的任何消息。

在执行 AJAX 调用后，我正在`rich:messages`通过 a 重新呈现组件`a4j:jsFunction`，并且我想检查 Javascript 是否附加了任何消息（这意味着验证未通过）。

a4j:jsFunction 的代码如下所示：

```
<a4j:jsFunction name="validateSomething" render="erroFinaliza"
        execute="@form" action="#{someMB.preview}">
</a4j:jsFunction> 
```

现在，我这样称呼它`h:commandButton`：

```
<h:commandButton onclick="validateSomething(); return false;" value="Do Something" /> 
```

我需要一种通过 JavaScript 检查验证结果的方法，然后真正提交表单。

我检查了[rich:messages 文档](http://docs.jboss.org/richfaces/latest_4_2_X/Component_Reference/en-US/html/chap-Component_Reference-Output_and_messages.html#sect-Component_Reference-Output_and_messages-richmessages)，看看是否有办法检查它是否附加了任何消息，但它没有 Javascript API。

有没有人有更好的主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:38:39.180

[我在这个问题](https://stackoverflow.com/questions/7407978/jsf-richfaces-process-submitted-form-data-and-then-confirm-to-continue-or-can)上找到了一个 hacky 解决方案。

我将 替换为`a4j:jsFunction`仅`a4j:commandButton`用于执行验证的目的。

然后在此`oncomplete`之上`a4j:commandButton`，我放置了一个 JS 来检查验证是否通过，然后“单击”另一个`h:commandButton`提交真实表单的不可见的，调用实际操作。

所以，它是这样的：

```
<h:form id="id_form">
    <rich:messages id="errors" />

    ...

    <script>
    function submitIfEmpty(noMessages){
        if (noMessages){
            document.getElementById('id_form:hiddenButton').click();
        }
    };
    </script>

    ...

    <a4j:commandButton value="Do Something" render="errors" execute="@form"
         oncomplete="submitIfEmpty(#{empty facesContext.maximumSeverity});" />
    <h:commandButton id="hiddenButton" action="#{someMB.doSomething}"
         value="Do Something (not visible)" style="visibility: hidden" />
</h:form> 
```

# c# - WPF - 键盘焦点不覆盖控件

> ID：11317200
> 
> 赞同：4
> 
> 时间：2012-07-03T18:45:47.877
> 
> 标签：c#, wpf, focus

下面的屏幕截图显示了我的问题。我有一个`ItemsControl`其中的`DataTemplate`项目包含 a`CheckBox`和 a`TextBox`后跟一些文本。当我从 a`TextBox`切换到下一行时，它正确接收键盘焦点，但小的视觉焦点矩形位于错误的位置 -无论哪个项目具有焦点，`CheckBox`始终位于左上角。`ItemsControl`什么？我添加了一个用绿色突出显示的触发器，`IsKeyboardFocusWithin`以表明焦点在正确的位置。按`Spacebar`取消选中绿色复选框。

![键盘视觉焦点不会覆盖控件](../Images/4a118704183f952b1dad2c2902ef65d0.png)

更改中的值`TextBox`确实会导致在另一个窗口中重新计算一些东西。有一点延迟（在这台机器上至少 < 1 秒），如果我关闭对值变化做出反应的窗口，问题就会消失。是否有可能在键盘焦点使用的视觉树的布局完成更新之前绘制视觉焦点？

我并不十分关心解决这个问题。我只是想知道这是否有意义？

# git - 将文件添加到 .gitignore 并返回到旧版本后文件丢失

> ID：11317202
> 
> 赞同：1
> 
> 时间：2012-07-03T18:45:54.133
> 
> 标签：git

当我从 .gitignore 中删除某些文件的忽略时，我遇到了一种奇怪的情况。例如，如果 .gitignore 包含 *.txt 并且一段时间后我想添加要版本控制的 txt 文件，我从 .gitignore 文件中删除 *.txt 行，然后提交。

如果我尝试回到以前的版本，那么 *.txt 文件就会丢失！

在以前的版本中，*.txt 文件存在，但未进行版本控制。现在，当我试图返回时，我想查看旧的 txt 文件，但它们不见了。我只有将它们添加到 .gitignore 的版本中的 txt 文件。

这是正确的，还是我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T18:50:02.167

Git 无法恢复版本控制之前的文件。在您开始将它们提交到存储库之前，它根本不会为它们记录历史。

# android - 如何从 sdcard 获取图像以显示在小部件图像视图上？

> ID：11317206
> 
> 赞同：0
> 
> 时间：2012-07-03T18:46:05.083
> 
> 标签：android, android-widget, imageview, remoteview

我正在尝试使小部件显示保存在 sdcard 上的图像。到目前为止，我发现了这个：

```
String imageInSD = String.format("/sdcard/facepalm%d.jpeg", counter%10);    
Bitmap bitmap = BitmapFactory.decodeFile(imageInSD);
remoteViews.setBitmap(R.id.imageview1, "setImageBitmap", bitmap);
ImageView myImageView = (ImageView)findViewById(R.id.imageview1);
myImageView.setImageBitmap(bitmap); 
```

注释行导致小部件由于某种原因崩溃。我只是想找到一种方法来完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:57:59.870

尝试无需将图像解码为位图，只需从图像路径获取图像的 URI：

```
File tempFile = new File(Environment.getExternalStorageDirectory()+"/XX/facepalm%d.jpeg");
Uri  imgUri=Uri.fromFile(tempFile);
ImageView  imageView=(ImageView)findViewById(R.id.imageuri);
imageView.setImageURI(imgUri); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:59:44.100

检查以下代码：

```
Bitmap bitmap = null;
    Boolean isSDPresent = android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED);
    if(isSDPresent)
    {
       String pathOfImageInSD = Environment.getExternalStorageDirectory()+"/"+"facepalm.png";
       bitmap = BitmapFactory.decodeFile(pathOfImageInSD);
    }
ImageView myImageView = (ImageView)findViewById(R.id.imageview1);
myImageView.setImageBitmap(bitmap); 
```

# java - Java：从 xml 文件中读取最后一个条目

> ID：11317207
> 
> 赞同：3
> 
> 时间：2012-07-03T18:46:08.670
> 
> 标签：java, xml

所以我有一个项目，我需要提取每 5 分钟更新一次的 xml 文件。但是，我正在设计我的程序以在每次更新时提取此文件。

xml文件的数据结构是这样的...

```
<m:REPORT_DATA>
    <m:DATA_ITEM>ENC</m:DATA_ITEM>
    <m:RESOURCE_NAME>DLAP</m:RESOURCE_NAME>
    <m:OPR_DATE>2012-06-02</m:OPR_DATE>
    <m:INTERVAL_NUM>1</m:INTERVAL_NUM>
    <m:VALUE>16.77734</m:VALUE>
</m:REPORT_DATA>
<m:REPORT_DATA>
    <m:DATA_ITEM>ENC</m:DATA_ITEM>
    <m:RESOURCE_NAME>DLAP</m:RESOURCE_NAME>
    <m:DATE>2012-06-02</m:OPR_DATE>
    <m:INTERVAL_NUM>2</m:INTERVAL_NUM>
    <m:VALUE>16.77739</m:VALUE>
</m:REPORT_DATA>
.... 
```

假设我那天第 200 次拉它，我将如何获取最后一个值

```
"<m:VALUE>16.77739</m:VALUE>" 
```

并为我的数据库获取该值？

我对使用 Sax、Xpath 或 DOM 感到很痛苦。一些帮助将是惊人的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T18:56:37.113

如果您有一个根，可以说`<m:REPORTS>`，使用 XPath 查找最后一个 VALUE 将相当简单：

```
 XPathFactory f = XPathFactory.newInstance() ;
    XPath x = f.newXPath() ;
    try {
        InputSource source = new InputSource(new FileInputStream("logfile.xml")) ;
        XPathExpression expr = x.compile("//REPORT_DATA[DATA_ITEM='ENC'][last()]/VALUE/text()") ;
        String s = expr.evaluate(source) ;
        System.out.println("Last value: " + s ) ;
    }
    catch(Throwable t) {
        System.err.println("Error: " + t) ;
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T19:01:17.537

这不是格式良好的 xml，您可以使用 xpath 查找最后一个节点，例如 //REPORT_DATA[position() = last()] 返回最后一个 REPORT_DATA 节点，对于使用 xpath 读取 xml，请参阅[如何使用 XPath 读取 XML爪哇](https://stackoverflow.com/questions/2811001/how-to-read-xml-using-xpath-in-java)

//REPORT_DATA[last()]/DATA_ITEM[text()="ENC"]

这将返回节点，它的 DATA_ITEM 等于“ENC”

或 //REPORT_DATA[last()]/VALUE[text()="ENC"]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:50:02.370

这不是一个“XML 文件”，因为它没有根元素（或者它有多个根元素），因此它的格式不正确。因此，它不能由 XML 库直接加载，因此您不能使用 DOM、XPath 或 XSLT。

您最好使用一些简单的模式匹配来检测每个段的开头，找到最后一个段，然后仅将该段加载到 DOM 中进行提取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T19:04:23.627

使用 SAX。

使用 xpath 或 DOM，您必须构建一个缓慢且内存昂贵的 DOM，尤其是对于 1 次查找。

SAX 更快，但需要您跟踪您的位置和状态，在您的情况下这应该很容易。只需查找您的 REPORT_DATA 元素，收集其封装的数据，如果它是最后一个（到达的最终文档），您就有了输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T19:12:31.960

```
 //filePath the path to the file you want to parse, tag  the tag of the node you want to search.    
public static String getLastNode(String filePath, String tag) throws             ParserConfigurationException, SAXException, IOException{
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document doc = docBuilder.parse(filePath);

    return doc.getElementsByTagName(tag).item(doc.getElementsByTagName(tag).getLength()-1).getTextContent();
//if you don't care about specific tag name just use :
//return doc.getLastChild().getTextContent;

} 
```

# version-control - 有没有办法在不克隆的情况下合并两个 git 分支？

> ID：11317213
> 
> 赞同：0
> 
> 时间：2012-07-03T18:46:50.880
> 
> 标签：version-control, github, merge, hubot

我正在尝试编写一种工具，该工具会自动将代码从一个分支合并到另一个分支。它将是 hubot 上的一个命令，它将合并适当的分支。我正在寻找的是一种无需在本地克隆代码即可进行此合并的方法。有没有办法做到这一点？我正在使用 github，所以 github api 也会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:47:22.300

github api 使您能够直接在 github 的 repo 上执行合并，而无需克隆。

请参阅[文档](http://developer.github.com/v3/repos/merging/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:09:00.963

我没有完全理解您的要求，但是，这些是我用来合并来自其他 repo 的分支的步骤，看看是否有帮助

```
 git remote add -f (remote name) /path/or/URL/to/remote
 git merge -s ours --no-commit (remote name)/master
 git read-tree --prefix=foo/bar/ -u (remote name)/master
 git commit -m "Merged (remote name) into subdirectory /foo/bar" 
```

而已。

# ruby-on-rails-3 - FactoryGirl has_one 和 belongs_to 不创建关联

> ID：11317216
> 
> 赞同：0
> 
> 时间：2012-07-03T18:47:00.717
> 
> 标签：ruby-on-rails-3, bdd, factory-bot

我有以下工厂：

```
factory :user do
    first_name 'Mister'
    player
end

factory :player do
  rating 20
end 
```

当我这样创建用户时：

```
@user = FactoryGirl.create(:user) 
```

我这样做：

```
puts @user.player.inspect 
```

我得到：

```
#<Player id: nil, rating:nil, user_id: 44> 
```

在用户模型中，我有以下内容：

```
after_create build_player 
```

我认为这是覆盖由工厂创建的播放器。如果是这样，我该如何解决？

请注意，关系是：

```
User has_one Player
Player belongs_to User (foreign key user_id in Player table) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:19:15.890

你总能做到

```
factory :user do
    first_name 'Mister'

    after_create do |user, evaluator|
        user.player = player
    end
end 
```

看看这是否适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:10:18.777

试试这个：

```
FactoryGirl.define do
    factory :user do |u|
        u.first_name 'Mister'
        u.player { |p| p.association(:player) }
    end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:09:57.077

由于用户不需要（成为？）播放器，因此您应该使用以下工厂定义：

```
factory :user do
    first_name 'Mister'
end

factory :player do
  rating 20
  user
end 
```

当您创建一个播放器时，它将创建一个使用对象并将新的播放器对象与此用户对象相关联。

# matlab - 参考表：MATLAB

> ID：11317219
> 
> 赞同：0
> 
> 时间：2012-07-03T18:47:09.117
> 
> 标签：matlab

我正在处理一个[项目欧拉问题](http://projecteuler.net/problem=22)，它要求我对名称的文本文件进行排序，然后根据其字母位置（即'Bob' = 2、15、2）为名称中的每个字母分配一个值。

我正在考虑使用 excel 中的 VLOOKUP 函数之类的方法来解决问题。我想用字母表中的字母按字母顺序创建一个参考列向量 - 每个字母在参考向量中的位置都是它的“值”。然后我可以在我的名字表中输入一个条目，比如“BOB”，并在参考向量中查找值 B、O 和 B，输出它们的位置以及每个字母的值。

我的问题：如何将一个矩阵中的值引用到另一个向量中的值？感谢大家对此的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:02:22.017

Unless performance is a real concern here, I wouldn't bother with a lookup table. There's a simple way to convert your characters into numbers.

Take each of your strings, upper case them using `upper`, subtract off 'A' and add one to convert all 'A's into '1's, 'B's into '2's, etc.

```
s = 'Bob';
num_s = upper(s) - 'A' + 1; 
```

* * *

> I am still curious maybe for my own development to learn how to examine a character, match it to an entry in another vector and recall a value it corresponds to. – user1499689

To do this is easy in Matlab. Let's say you have a lookup table of 26 elements, `lookup`

```
lookup = zeros(26,1);
% define the lookup table
for i=1:numel(lookup)
  lookup(i) = 2*i - 7;   % some random function
end 
```

Now, using the char-to-number conversion above:

```
s =

Joe

>> lookup( upper(s) - 'A' + 1 )

ans =

    13
    23
     3 
```

The key here is that Matlab allows you to index any matrix with another matrix: `M(A)`. The elements of the matrix `A` are treated as indices into the matrix `M`. Your string `s` is a char matrix, which you convert into a numeric matrix by subtracting `'A'`. The line `lookup(...)` then uses the elements of this converted matrix to index the matrix `lookup`.

This, incidentally, can be used for assignment as well. For example, if you wanted to keep a count of each character (independent of case):

```
% Initialize counts to zero somewhere at the beginning
counts = zeros(26,1);

... % do your stuff

% let 's' be an alphabetic word (only A-Z and a-z)
s_inds = upper(s) - 'A' + 1;
counts( s_inds ) = counts( s_inds ) + 1;  % increment the counts of all characters in 's' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:06:04.623

您将需要一种生成各种查找表的方法。我们将使用您在此处的一般示例。字母表中有 26 个字母，不区分大小写。

```
Basic_lookup = 1:26; % Note: this can be changed up if you want some level of randomness.
% Basic_lookup = randperm(26); % I like this a bit better for randomness sake.  And is just an example of making it random. 
```

现在这是一个从 1 到 26 的单行向量。您需要做的只是逐个检查具有值的字符串，然后从查找表中调用所需的值。@sfstewman 在他们的帖子中在某种程度上详细说明了这一点。你可以很容易地从中适应。

# c# - WPF MVVM 多视图问题，使用 ListBox.SelectedItem

> ID：11317227
> 
> 赞同：0
> 
> 时间：2012-07-03T18:47:51.597
> 
> 标签：c#, wpf, wcf, mvvm, viewmodel

我一直在处理简单的 MVVM 模式，并且从那以后更深入地研究了 WPF 中数据绑定的全部功能。我遇到了一个问题，我似乎无法解决问题。以下面的 MainWindowViewModel 代码作为初学者：

```
ObservableCollection<DataRecord> _SomeData = new ObservableCollection<DataRecord>();
public ObservableCollection<DataRecord> SomeData
{
    get
    {
        return _SomeData;
    }
    set
    {
        _SomeData = value;
    }
}

public MainWindowViewModel()
{
    CurrentViewModel.Add(new RandomViewModel(SomeData));
} 
```

我没有粘贴完整的代码，而是将 ListBox 绑定到 ViewModelBase 的 ObservableCollection<>，并引用添加的每个基的 Image 属性（图像导航）。现在！对于问题：

我使用 DataTemplate 从 ViewModel 引用视图，使用从 ListBox.SelectedItem 返回的字符串。因为 RandomViewModel 需要传递一个参数，所以每当我单击 ListBox.SelectedItem 时，都会实例化一个新视图，而不是在 ListBox 中创建的视图。发生这种情况的原因很简单，新视图需要一个 RandomViewModel 来引用数据绑定。所以！使用臭名昭著的 ListBox.SelectedItem 进行 ViewModel/View Navigation，我应该如何创建 View，并且仍然引用它的 ViewModel，即使 ViewModel 需要传递参数？或者！我应该如何使用已经实例化的 ViewModel 并将其用作对新创建的 View 的引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T06:26:41.890

我不明白为什么每个人都先用视图做 MVVM。我首先将视图用于根/主窗口，也许还有登录对话框。对于应用程序的其余部分，我根本不关心视图/xaml，而是采用**Viewmodel 第**一种方法。使用 mvvm 就容易多了。在您的情况下，您的 mainviewmodel 像您一样处理 randomviewmodel 列表。但现在无需创建随机视图并分配随机视图模型，您只需将选定的随机视图模型绑定到内容演示器。wpf 将查看您的资源以找到“我应该如何渲染此随机视图模型”的数据模板，然后您会看到所需的视图。每次创建视图的新实例时，您都会使用相同的视图模型。

这就是 mvvm 对我的意义：不要关心您的视图，只需正确处理您的视图模型。

# javascript - 带有按钮的 Jquery UI 日期选择器

> ID：11317234
> 
> 赞同：2
> 
> 时间：2012-07-03T18:48:14.197
> 
> 标签：javascript, jquery, jquery-ui, twitter-bootstrap

我在一个引导站点上工作，并且我在一个部分使用 Jquery UI 数据选择器。问题是，单击按钮时似乎可以打开日期选择器的唯一方法是使用 Jquery 在 datepicker 函数中选择的按钮对其进行初始化。

理想情况下，我希望使用 Append with Button 样式，但我似乎无法找到对其进行硬编码的方法，以便按钮只是硬编码而不是动态生成。

有没有一种简单的方法可以在不更改 JQuery UI 的源代码的情况下做到这一点？

# 编辑

```
<div class="input-append span2">
     <input type="text" id="datestart" class="datepicker input-small"/>
     <input type="button" class="ui-date-pickertrigger"/>
  </div>
  <div class="input-append">
     <input type="text" id="dateend" class="datepicker input-small"/>
     <input type="button" class="ui-date-pickertrigger"/>
  </div> 
```

然后初始化为

```
$(function(){
    $('.datepicker').datepicker();  
}); 
```

# ruby-on-rails - Form_For 问题

> ID：11317239
> 
> 赞同：0
> 
> 时间：2012-07-03T18:48:27.160
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, ruby-on-rails-3.2

这是我在我的显示页面上为持有人控制器提供的表格：

```
<%= form_for(question) do |f| %>

        <%= f.label :question %>
        <%= f.text_field :question,  :cols => 125, :rows => 4  %>

        <%= f.label :answer %>
        <%= f.text_field :answer,  :cols => 140 %>

        <%= f.hidden_field :holder_id, :value => @holder.id %>
  <br />

  <%= f.submit "Edit Question" %>
<% end %> 
```

该表单可以很好地加载问题，因为它会使用正确的数据自动填充表单。但是，当我点击提交时，没有任何反应。作为一个实验，我将问题控制器中的更新操作更改为重定向到我的 about_path，并在成功提交后重定向到那里。这告诉我整个过程正在运行，但数据没有被更改。

这是我的更新操作：

```
def update
        @question = Question.find(params[:id])
        if @question.update_attributes(params[:holder])
            redirect_to holder_path(@question.holder_id) 
        else
            render 'edit'
        end
    end 
```

什么会导致这种情况，或者你将如何开始解决这个问题？

# c++ - 限制附加的字符串数量

> ID：11317240
> 
> 赞同：0
> 
> 时间：2012-07-03T18:48:38.080
> 
> 标签：c++

我有 CString temp = CString temp1 +CString temp2 + CString temp3 + CString temp4 + CString 5; （应附加不超过 5 个）。有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:53:17.640

由于`CString`是 MS 内部类，不，您不能在代码中的任何地方限制连接。

如果您想在特定的块中执行此操作，您可以简单地提供一个带有 5 个参数的函数：

```
 CString concatenate(const CString& temp1 = CString(),
                     const CString& temp2 = CString(),
                     const CString& temp3 = CString(),
                     const CString& temp4 = CString(),
                     const CString& temp5 = CString(),); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T18:53:28.777

用于`String.Format`附加字符串，如..

```
String _iString = String.Format("{0} {1} {2} {3} {4} {5}", param1,param2,param3,param4,param5) 
```

然后`_iString`在你的代码中使用....

# c# - 在 WPF 中同时验证多个控件

> ID：11317242
> 
> 赞同：5
> 
> 时间：2012-07-03T18:48:44.233
> 
> 标签：c#, wpf, validation, mvvm, passwords

我有一个带有两个密码字段的表单——一个是用户输入密码的地方，另一个是用户必须重新输入密码才能确认的地方。验证用于确认两个密码是否匹配 - 如果匹配，则会启用一个按钮以允许用户继续：

```
<PasswordBox Name="P1Box" src:PasswordBoxAssistant.BindPassword="True">
    <src:PasswordBoxAssistant.BoundPassword>
        <Binding Source="{StaticResource mybinding}" Path="Password.P1" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
            <Binding.ValidationRules>
                <DataErrorValidationRule ValidatesOnTargetUpdated="True"/>
            </Binding.ValidationRules>
        </Binding>
    </src:PasswordBoxAssistant.BoundPassword>
</PasswordBox> 
```

按钮样式：

```
<Setter Property="IsEnabled" Value="False"/>
<Style.Triggers>
    <MultiDataTrigger>
        <MultiDataTrigger.Conditions>
            <Condition Binding="{Binding ElementName=P1Box, Path=(Validation.HasError)}" Value="false"/>
        </MultiDataTrigger.Conditions>
        <Setter Property="IsEnabled" Value="true"/>
    </MultiDataTrigger>
</Style.Triggers> 
```

我的问题是用户可以更改第一个框中的密码，并且不会强制第二个密码框重新验证。例如，如果第一个密码输入为“password”，而用户在第二个框中输入“password”，则验证通过并启用按钮。如果用户随后将原始密码框更改为“密码”，则两个框都将保持验证状态 - 原始框是因为对非空密码没有限制，第二个框是因为没有强制更新验证。

我的密码框使用[此处](http://blog.functionalfun.net/2008/06/wpf-passwordbox-and-data-binding.html)概述的附加属性来允许绑定到密码。因此，我无法以[该解决方案中表达的方式在代码隐藏中访问它（因为 PasswordBox.Password 本身不是依赖属性）。](https://stackoverflow.com/questions/483419/force-validation-on-bound-controls-in-wpf)或者，也许它对附加的属性不起作用——下面的代码没有做任何事情：

```
P2Box.GetBindingExpression(PasswordBoxAssistant.BoundPassword).UpdateSource(); 
```

我有一个自定义类，它继承 IDataErrorInfo 以允许在两个控件之间进行验证 - 绑定是 PasswordData 对象，密码框设置为 PasswordData.P1 和 PasswordData.P2：

```
public class PasswordData : IDataErrorInfo
{
    public string P1 { get; set; }
    public string P2 { get; set; }
    public string Error { get { return string.Empty; } }
    public string this[string propertyName]
    {
        get
        {
            string ret;
            if (propertyName == "P1")
            {
            if (P1 == null || P1 == "")
                ret = "Password cannot be null or empty.";
            else
                ret = "";
            }
            else if (propertyName == "P2")
            {
            if (P2 == null || P2 == "")
                ret = "Password cannot be null or empty.";
            else if (P2 != P1)
                ret = "The passwords do not match.";
            else
                ret = "";
            }
            return ret;
        }
    }
} 
```

我尝试在 PasswordChanged 事件期间加入，创建一个新的 PasswordData 并重新分配绑定。这解决了验证问题，但密码框中的插入符号总是在最开始，破坏了输入的任何数据。

我想要一个仅限 xaml 的解决方案，但后面的代码是完全可以接受的。如果这很重要，我正在使用.Net 4.0。

**编辑：**

好的，事实证明我在 xaml 中输入了错误的事件处理程序，并且该解决方案实际上有效：

```
private void PasswordChanged(object sender, RoutedEventArgs e)
{
    binding.Pass.P1 = ((PasswordBox)sender).Password;
    P2Box.GetBindingExpression(PasswordBoxAssistant.BoundPassword).UpdateSource();
} 
```

我必须手动更新绑定，因为事件在绑定更新之前触发。

我很好奇是否存在使用验证规则、IDataErrorInfo 或其他一些方法在控件之间进行绑定而无需挂钩事件并手动更新的正确的、仅 XAML 的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T04:29:01.640

对于更复杂的验证，通常需要将验证推送到 ViewModel 中，在很多情况下甚至是 Model。IDataErrorInfo 是一个好的开始。

这是一篇关于该主题的优秀文章的链接：http:
[//msdn.microsoft.com/en-us/magazine/ff714593.aspx](http://msdn.microsoft.com/en-us/magazine/ff714593.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T07:01:16.533

这可能会有所帮助。我看到很多帖子在您的模型类中使用了数据注释。当您将模型绑定到 WPF 中的上下文时，您可能会注意到验证在未输入任何数据之前触发。

这可能是有问题的，并且迭代绑定表达式可能会很痛苦。所以我连接了几个扩展来做到这一点。

**这将获得一个 Enumerable 您的类型，如 TextBox。DependencyObject 可能是您的窗口或网格。要引用您的窗口，请使用 var window = Window.GetWindow(this)。如果您愿意，也可以按名称使用像网格这样的控件。**

```
 public static IEnumerable<T> FindVisualChildren<T>(DependencyObject obj) where T : DependencyObject
    {
        if (obj != null)
        {
            for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
            {
                DependencyObject child = VisualTreeHelper.GetChild(obj, i);
                if (child != null && child is T)
                {
                    yield return (T)child;
                }

                foreach (T childOfChild in FindVisualChildren<T>(child))
                {
                    yield return childOfChild;
                }
            }
        }
    } 
```

**获得控件列表后，我们使用“重新验证”扩展来迭代它们并触发绑定表达式。我们返回一个布尔值，它只会告诉我们表单是否有任何失败。请注意， T 是您要验证的类型。如TextBox、ListBox等。请注意，我在下面的 TextBox 上展示了一个示例。您需要构建您要使用的任何其他控件，然后将“obj”转换为正确的类型。**

```
 public static Boolean Revalidate<T>(this Window depObj) where T : DependencyObject
    {
        bool isValid = true;
        foreach (T obj in FindVisualChildren<T>(depObj))
        {
            var name = typeof(T).Name.ToLower();
            BindingExpression exp = null;

            switch (name)
            {
                case "textbox":
                    var tb = obj as TextBox;
                    exp = tb.GetBindingExpression(TextBox.TextProperty);
                    exp.UpdateSource();
                    if (Validation.GetHasError(tb))
                        isValid = false;  
                    break;           
            }                             
        }

        return isValid;
    } 
```

**...并称之为使用：**

```
 valid = this.window.Revalidate<TextBox>(); // where this.window is a reference to our window. 
```

**从那里我们可以检查是否为真，如果失败则返回。**

```
if(!valid){
   return; // you could update a message or something as well obviously.
} 
```

# jquery - Twitter Bootstrap按钮js不起作用

> ID：11317255
> 
> 赞同：9
> 
> 时间：2012-07-03T18:49:42.870
> 
> 标签：jquery, twitter-bootstrap

我正在使用 Twitter Bootstrap，但我似乎无法更改按钮状态。

我正在从[http://jsfiddle.net/YCst4/1/](http://jsfiddle.net/YCst4/1/)复制 js，但没有收到回复。就像我没有加载 jQuery，但我在我的标题中加载了 bootstrap.min.js。我对页面上的其他 javascript 没有任何问题。

这就是我在 Codeigniter 视图中的内容：

```
<script>
$('#button').button();

$('#button').click(function() {
    $(this).button('loading');
});
</script>

<button class="btn" id="button" type="button" data-text-loading="Loading...">Press Me</button> 
```

关于造成这种情况的任何想法？bootstrap-button.js 不是 Bootstrap 附带的 bootstrap.min.js 的一部分吗？

[http://twitter.github.com/bootstrap/javascript.html#buttons](http://twitter.github.com/bootstrap/javascript.html#buttons)

编辑：

当我查看页面的源代码时，我可以看到在标题视图中加载了 bootstrap.min.js，我可以单击它来查看它的源代码，所以路径是正确的。但是，按钮 js 代码仅在我`<script src="http://site.dev/assets/admin/js/bootstrap.min.js"></script>`在实际内容视图本身中重复时才有效。

我让 jQuery 在 bootstrap.min.js 上方加载了一行，并且与按钮在同一视图中的 jQuery 元素可以正常工作。我难住了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-05T18:38:53.980

我在 bootstrap.min.js 之后加载了 jquery-ui-1.8.21.custom.min.js。显然有些冲突。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-03T18:54:03.010

您需要将代码放在文档就绪函数中，以便它在页面准备好之后运行，而不是之前。

```
$(document).ready(function(){
  $('#button').button();

  $('#button').click(function() {
    $(this).button('loading');
  });  
}); 
```

JS Fiddle 似乎会自动为您执行此操作，这就是它在那里工作的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T18:51:17.320

您试图在按钮成为 DOM 的一部分之前将单击绑定到按钮。把你的东西放在文档准备功能中，你应该没问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-25T14:31:13.493

对于像我这样的 javascript 新手：您还需要在定义**之前加载 jQuery**`$('#button').click()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-05T13:37:27.453

我最近遇到了同样的问题。以下是一些可能对您有所帮助的事情：

1.  您是否以必要的顺序加载您的 js 文件。列出的顺序（作为脚本标签）必须是正确的（基于依赖的）顺序，如下所示：

    ```
    <script src="jquery.js"></script>
    <script src="bootstrap.js"></script>
    <script src="button_app.js."></script> 
    ```

2.  您使用的是本地还是远程 css/js 文件？如果您使用的是远程的。检查其中是否有任何引用 github。如果它们看起来像这样：

    ```
    <script src="https://raw.github.com/twitter/bootstrap/master/js/bootstrap-alert.js"></script> 
    ```

    他们不会工作。Chrome 会抛出一个 mime 类型错误。

# asp.net - 性能监视器：来自 ASP.NET v4.0 的计数器不可用

> ID：11317256
> 
> 赞同：1
> 
> 时间：2012-07-03T18:49:43.703
> 
> 标签：asp.net, performance, counter, monitor

我们有一个安装了 .Net 4 的 Windows Web Server 2008 R2。当我尝试将“ASP.NET v4.0.30319”中的一些计数器添加到性能监视器时，我找不到该类别。它只显示“ASP.NET v2.0.50727”。它还缺少很多其他类别，例如所有“.NET ...”类别。

在我们的另一台服务器上，这些类别是可见的。如何使第一台服务器上可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:37:02.533

我在 serverfault 上找到了答案：[https](https://serverfault.com/questions/25842/performance-monitor-cant-add-counters-from-net-data-providers) ://serverfault.com/questions/25842/performance-monitor-cant-add-counters-from-net-data-providers （第二个答案 - 不是标记为答案的那个）。

我所要做的就是删除 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\ASP.NET_4.0.30319\Performance 中的“禁用性能计数器”条目。然后我重新启动性能监视器，一切都很好。我能够看到丢失的再次分类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-28T15:10:30.550

我在 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet002\services\ASP.NET_4.0.30319\Performance 和注册表中的其他 ASP.NET 键中找到了要禁用（禁用性能计数器）的条目。

# c# - 显示表单后执行操作。

> ID：11317257
> 
> 赞同：2
> 
> 时间：2012-07-03T18:49:53.327
> 
> 标签：c#, winforms, events, compact-framework, windows-mobile-6.5

我正在开发一个 Windows 移动应用程序，我想在向用户显示表单（加载屏幕）后做一些事情。

通常，我有一个`Form.Shown`事件，但是使用 .net compact framework v3.5，我找不到这个事件。

有谁知道`Shown`我可以使用的事件或简单的解决方法？如果可以的话，我不想做自己的多线程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:38:03.423

我唯一能想到的就是一点点技巧，当您的表单显示时，如果它有一个默认控件，那么它将获得焦点。Focus 事件将在窗体显示之前的初始加载期间触发，但在第二次可见时将触发。在使用第一个激活设置的激活事件中放置一个布尔值，然后在默认控件 Got Focus 事件中进行测试。

* * *

其他选择是使用计时器。将 Interval 设置为 10 左右，在 Form Load 事件结束时启动它，然后运行特定于启动的代码。

```
private void Form1_Load(object sender, EventArgs e)
{
    timer1.Start();
}

private void timer1_Tick(object sender, EventArgs e)
{
    timer1.Stop();
    //Do something
} 
```

* * *

汉斯评论的一个例子：

```
public partial class Form1 : Form
{
    public delegate void DoWorkDelegate();
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        BeginInvoke(new DoWorkDelegate(DoWorkMethod));
    }

    public void DoWorkMethod()
    {
        //Do something
    }
} 
```

# ms-access - 复杂水晶报表帮助——数据库字段值中的分号

> ID：11317259
> 
> 赞同：0
> 
> 时间：2012-07-03T18:49:58.303
> 
> 标签：ms-access, crystal-reports, report

我有一个名为 Firstname 和 Categories 的数据库列。

```
FirstName  | Categories

Mike       | Blue; Green ; Red
Peter      | Green; Red
Paul       | Red; Blue 
```

我想生成这种格式的报告

```
**Blue :** 
Mike
Paul

**Green:**
Mike
Peter

**Red:**
Peter 
Paul 
```

问题是我无法更改访问数据库列的值，它必须有一个分号来分隔这些值。我有 1000 多条记录和 30 多个类别。

我怎样才能做到这一点？我正在使用水晶报表，我不是专业用户，但我很容易学习东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:59:26.543

我会说你很可能不走运。这些数据的设计**非常糟糕**，并且没有简单的方法可以将这些数据取出。

您的选择是：

*   让其他来源以可解析的格式发送数据，并将 Crystal Reports 指向那个，或者...
*   在 Access 中创建一个新的规范化表，在 Access 中使用 VBA 爬取当前表并填充新表，然后将 Crystal Reports 指向新表。

选项 #2 的缺点是您可能必须在运行 Crystal Report 之前重新填充新表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:46:29.660

这很容易实现，尽管有 30 个类别的可能性它变得丑陋。如果一个类别的整个名称是另一个类别的子字符串（例如：Green 和 YellowGreen），它会变得更加丑陋

1.  制作一个水晶报表，选择数据库，但选择添加命令而不是拖动表格。
2.  像这样插入“SQL”：

.

```
SELECT 'Blue' As Category,*
FROM Customers
WHERE Categories LIKE '*Blue*'
UNION ALL
SELECT 'Green' As Category,*
FROM Customers
WHERE Categories LIKE '*Green*'
UNION ALL
SELECT 'Red' As Category,*
FROM Customers
WHERE Categories LIKE '*Red*' 
```

然后在 Report > Group Expert .. group by Command.Category

# java - 等效于 Arrays.asList() 但对于数组？

> ID：11317266
> 
> 赞同：1
> 
> 时间：2012-07-03T18:50:09.523
> 
> 标签：java

我想要一种方便的方法来获取一组参数并返回一个数组，就像`Arrays.asList(T... items)`获取一组参数并返回其中的一个`List<T>`。

写一个很容易，但是java中是否已经存在一个？

**更新** 我的错！我没有意识到这个问题如此不清楚。你的问题迫使我意识到这个问题并不完全是我认为的问题。

我有几个像下面这样的调用，它们将各种键/值放入 M​​ap：

```
 put( Key.get(A.class), new Key[] { Key.get(X.class), Key.get(Y.class), Key.get(Z.class)}); 
```

...地图的类型`Map<Key<? extends Foo>,Key<? extends Foo>[]>`

我一直在寻找一种类型安全且简洁的方式来执行上述语句，并且我*认为*类似以下的内容会起作用：

```
 put( Key.get(A.class), toArray( Key.get(X.class), Key.get(Y.class), Key.get(Z.class))); 
```

...在哪里`toArray()`被定义为类似的东西

```
private static <T> T[] toArray( T... t ) {
    return t;
} 
```

然而，事实证明这个解决方案本身不是类型安全的，因此它实际上并不比仅仅使用手动创建一个新数组简洁得多`new`。这是我误解的第一个原因。

我认为我可以通过使用列表而不是数组来获得类型安全，然后使用`Arrays.asList()`来填充列表的值，但事实证明这也不是类型安全的。这是我误解的第二个原因。我认为这`Arrays.asList()`会使这个陈述比实际更简洁，因此我一直在寻找对数组有同样作用的东西。

**所以我想问题是真的 -**在上述情况下是否有一种简洁的方法来获得类型安全？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T18:52:23.247

数组已经有了这样的快捷语法：

```
String[] strArray = {"one", "two", "three"}; 
```

* * *

**回应您的更新：**

正如您发现的那样，参数化类型的数组永远不可能是类型安全的。这是几个限制之一，因为[数组和泛型就像油和水](http://www.angelikalanger.com/Articles/Papers/JavaGenerics/ArraysInJavaGenerics.htm)。

诸如 varargs 之类的方法`Arrays.asList`也不能避免这种限制，因为 varargs 通过隐式创建逗号分隔参数的数组来工作。为了具有类型安全性，您需要避免任何涉及数组的解决方案，包括可变参数。

首先，我建议您将地图的类型更改为保存`List`s 而不是数组：

```
Map<Key<? extends Foo>, List<Key<? extends Foo>>> map = new HashMap<>(); 
```

`List`然后在将其放入之前构建一个`Map`：

```
List<Key<? extends Foo>> lst = new ArrayList<>();
lst.add(Key.get(X.class));
lst.add(Key.get(Y.class));
lst.add(Key.get(Z.class));
map.put(Key.get(A.class), lst); 
```

如果您想在一个语句中全部完成，那么没有可变参数会更加棘手。Guava[`ImmutableList`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ImmutableList.html)公开了`of`工厂方法，它最多占用 12 个元素，然后再使用可变参数。如果`List`地图中的 s 以后不会修改，您可以存储`ImmutableList<Key<? extends Foo>>`和使用：

```
map.put(
    Key.get(A.class),
    ImmutableList.of(Key.get(X.class), Key.get(Y.class), Key.get(Z.class))
); 
```

事实上，即使`List`需要通过复制返回的来修改，您仍然可以利用这些工厂方法`ImmutableList`：

```
map.put(
    Key.get(A.class),
    Lists.newArrayList(ImmutableList.of(
        Key.get(X.class),
        Key.get(Y.class),
        Key.get(Z.class)
    ))
); 
```

但是，您只是为了风格而引入开销。

* * *

旁注：如果您碰巧使用 Guava，您可能会考虑使用 a[`Multimap`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimap.html)而不是 a `Map`of `List`s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:53:18.967

这样的方法会做什么，而数组的构造函数还没有呢？

```
String foo = "FOO";
String bar = "BAR";
String[] strings = new String[]{foo, bar}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T18:58:41.253

怎么样

```
public static class ToArray {
    public static <T> T[] toArray(T... items) {
        return items;
    }                
}

public void example() {
    String[] strings = ToArray.toArray("fred", "bob");
} 
```

?

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T19:00:41.947

为了得到 a`Set`并返回 a`List`你可以使用 a `ArrayList`：

```
Set<String> set = new HashSet<String>();
set.add("str1");
set.add("str2");
set.add("str3");

List<String> list = new ArrayList<String>(set); 
```

如果您想要列表中的数组，您可以执行以下操作：

```
myList.toArray();
// or even
String[] myStringArray = myList.toArray(new String[]); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-03T19:10:08.013

这是你想要的吗？这将返回一个数组，因为 Java[将 varargs 构造视为一个数组](http://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html)。我不知道如何通用化它。

```
public Object argsToArray(Object... args) {
return args;
} 
```

# compilation - 如何将 Lua 脚本编译成单个可执行文件，同时仍然获得快速的 LuaJIT 编译器？

> ID：11317269
> 
> 赞同：42
> 
> 时间：2012-07-03T18:50:19.790
> 
> 标签：compilation, nginx, lua, luajit

如何将我的**[Lua](http://lua.org)**脚本编译成单个可执行文件，同时获得**[LuaJIT](http://luajit.org)**的超快速性能优势？

背景：

*   我的 Lua 脚本用于我创建的 Web 应用程序（例如托管[http://example.com](http://example.com)）
*   我目前的技术栈是 NGINX（Web 服务器）、Lua/LuaJIT（检索动态内容的语言）
*   我有大约 50 多个`.lua`文件构成我的 Web 应用程序（来自模型/视图/控制器）
*   FreeBSD 9 操作系统

为了简化部署，我想将运行我的 Web 应用程序的所有 .lua 脚本编译为单个可执行文件。

1.  这可能吗？如何？

    貌似Lua 官方自带了一个叫[**SRLua的库**](http://www.tecgraf.puc-rio.br/~lhf/ftp/lua/#srlua)

2.  将我的 .lua 编译为单个可执行文件有什么负面影响（例如性能会更差等）？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-07-03T20:07:46.847

将所有 Lua 源代码文件转换为目标文件并将它们放入静态库中：

```
for f in *.lua; do
    luajit -b $f `basename $f .lua`.o
done
ar rcus libmyluafiles.a *.o 
```

然后使用 . 将`libmyluafiles.a`库链接到您的主程序中`-Wl,--whole-archive -lmyluafiles -Wl,--no-whole-archive -Wl,-E`。

此行强制链接器包含存档中的所有目标文件并导出所有符号。

例如，现在可以`local foo = require("foo")`从您的应用程序中加载名为 foo.lua 的文件。

`-b`可以在[Running LuaJIT](http://luajit.org/running.html#opt_b)上找到有关该选项的详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T19:12:03.287

对于您当前部署为相关`.lua`文件嵌套的 Web 应用程序，您最简单的答案是将它们压缩成一个文件。这通常可以在简单的情况下使用`luac`. 但是，对于具有混合模块的复杂应用程序，您需要更智能的东西。

我个人使用 Mathew Wild 的实用程序[`squish`](http://matthewwild.co.uk/projects/squish/home)来做类似的事情。

运行 squish 后，您将拥有一个`.lua`包含所有 Lua 源代码的文件，方便打包。您可以只部署该单个文件。

如果您还需要捆绑任何二进制模块，或者 Lua 或 LuaJIT 解释器，那么您可以轻松地使用 SRLua 将其与 Lua 解释器捆绑，或类似技术将其与 LuaJIT 捆绑。

# sql - Sybase 多个子字符串搜索

> ID：11317270
> 
> 赞同：1
> 
> 时间：2012-07-03T18:50:21.617
> 
> 标签：sql, sap-ase

我需要从文本字段中取回数据。输入并非都是漂亮的……有些用户拼写不好或不连贯。我需要寻找各种拼写错误以及替代术语。

我正在使用 Sybase ASE 并且想知道 AND 语句是否变得笨拙并且可能不是最佳的？这是一种尝试：

```
AND (entry_txt like 'fight' OR
    entry_txt like 'confron%' OR
    entry_txt like 'aggres%' OR
    entry_txt like 'grab' OR
    entry_txt like 'push' OR
    entry_txt like 'strike' OR
    entry_txt like 'hit' OR
    entry_txt like 'assa%') 
```

随着我对附加条款以及一些专有名称和 8-9 个更多变体添加一些新要求，它会变得更长！有没有更有效的方法来做到这一点，或者就是这样？

我还读到 LIKE 应该用于部分字符串比较，而 IN 应该用于集合中的值。来自一组部分字符串的值怎么样？我可以/应该在这里使用 IN 吗？这对性能有帮助吗？

我正在搜索数千个文档，因此需要处理大量数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:20:42.873

是的，没有的`%`可以用`IN`，还有的还需要用`OR`。

它看起来像这样：

```
AND (entry_txt in ('fight', 'grab', 'push', 'strike', 'hit')
     OR entry_txt like 'confron%'
     OR entry_txt like 'aggres%'
     OR entry_txt like 'assa%') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T15:11:33.220

您实际上可以将“like”表达式放入表达式中 - 表中的另一列或变量。

因此，您可以创建一个包含一个名为“like_expr”或类似名称的 varchar 列的表。

然后把上面所有的表达式都放进去，包括那些没有 % 的，因为它们只会退化为一个相等操作。

在效率方面，如果entry_txt被索引了，那么索引就可以使用了。我认为 Sybase 会发现加入 like_expr 表比做很多 OR 更容易，但两者都应该使用索引 - 这应该是一个单独的问题。）

创建表 abe (a varchar(20))

插入 abe 值（'hello'）

创建表 abe2 (l varchar(20))

插入 abe2 值（'h%'）

select * from abe a where exists (select 1 from abe2 where aa like l)

## 一种

你好

# python - 在 PYQT 中使用 setCursorPosition

> ID：11317273
> 
> 赞同：0
> 
> 时间：2012-07-03T18:50:35.263
> 
> 标签：python, pyqt

我目前有一个隐藏的 QWidget，其中包含一个 QLineEdit

在显示隐藏的 QWidget 后，我​​希望光标位于 QLineEdit 上。对实施有帮助吗？

当在较早的类中单击按钮时显示此类

```
 class showInfo(QtGui.QWidget):
        def __init__(self, parent=None):
            super(showInfo, self).__init__(parent)

            showName = QtGui.QLabel("Name of Show:")
            self.showNameEdit = QtGui.QLineEdit()
            self.showNameEdit.setCursorPosition(0) #THIS SHOULD WORK

            self.mainLayout = QtGui.QGridLayout()
            self.mainLayout.addWidget(self.showNameEdit)

            self.setLayout(self.mainLayout) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:19:17.727

试着打电话[`self.showNameEdit.setFocus()`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qwidget.html#setFocus)

# jboss7.x - com.impetus.kundera.utils.InvalidConfigurationException：在类路径中找不到任何 META-INF/persistence.xml 文件

> ID：11317274
> 
> 赞同：0
> 
> 时间：2012-07-03T18:50:37.073
> 
> 标签：jboss7.x, persistence.xml, kundera

我正在尝试使用`Kundera on jboss AS7.1.1.final`.

以下是我遵循的步骤：

## 1.创建了一个模块（com.impetus.kundera），这里是module.xml

```
<module xmlns="urn:jboss:module:1.1" name="com.impetus.kundera" slot="2.0.7">
<resources>
    <resource-root path="kundera-core-2.0.7-SNAPSHOT.jar"/>
    <resource-root path="cglib-2.2.jar"/>
    <resource-root path="commons-logging-1.1.1.jar"/>
    <!-- Insert resources here -->
</resources>
<dependencies>
    <module name="javax.api"/>
    <module name="javax.persistence.api"/>
    <module name="javax.transaction.api"/>
    <module name="javax.validation.api"/>
    <module name="org.javassist"/>
    <module name="org.slf4j"/>
    <module name="org.apache.commons.lang"/>
    <module name="org.apache.commons.collections"/>
</dependencies> 
```

## 复制 2.0.7 文件夹下的资源根路径 jars。

2.  **修改 persistence.xml 为：**

> <property name="jboss.as.jpa.providerModule" value="com.impetus.kundera:2.0.7" />

**注意：**我的 persistence.xml 在`deployment/KunderaSampleApp.war/WEB-INF/classes/META-INF`文件夹下，但不知何故我得到以下错误：

* * *

> org.jboss.msc.service.StartException in service jboss.persistenceunit."KunderaSampleApp.war#personnel_cass_pu": 无法在 org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1767) 启动服务 [jboss -msc-1.0.2.GA.jar:1.0.2.GA] 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_15] 在 java.util。 concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_15] at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_15] 原因： com.impetus.kundera.loader.PersistenceLoaderException：com.impetus.kundera.utils.InvalidConfigurationException：在 com.impetus.kundera.configure 的类路径中找不到任何 META-INF/persistence.xml 文件。PersistenceUnitConfiguration.configure(PersistenceUnitConfiguration.java:102) 在 com.impetus.kundera.configure.Configurator.configure(Configurator.java:63) 在 com.impetus.kundera.KunderaPersistence.initializeKundera(KunderaPersistence.java:96) 在 com.impetus .kundera.KunderaPersistence.createEntityManagerFactory(KunderaPersistence.java:71) at com.impetus.kundera.KunderaPersistence.createContainerEntityManagerFactory(KunderaPersistence.java:58) at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.createContainerEntityManagerFactory(PersistenceUnitServiceImpl.java:162 ) 在 org.jboss.as.jpa.service.PersistenceUnitServiceImpl.start(PersistenceUnitServiceImpl.java:85) 在 org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811）[jboss-msc-1.0.2.GA.jar:1.0.2.GA] 在 org.jboss.msc.service.ServiceControllerImpl$StartTask.run（ServiceControllerImpl.java:1746）[jboss-msc-1.0.2 .GA.jar:1.0.2.GA] ... 3 更多原因：com.impetus.kundera.utils.InvalidConfigurationException：在 com.impetus.kundera 的类路径中找不到任何 META-INF/persistence.xml 文件.configure.PersistenceUnitConfiguration.findPersistenceMetadatas(PersistenceUnitConfiguration.java:130) at com.impetus.kundera.configure.PersistenceUnitConfiguration.configure(PersistenceUnitConfiguration.java:86) ... 11 更多 19:17:46,590 错误 [org.jboss.msc. service.fail]（MSC 服务线程 1-3）MSC00001：无法启动服务 jboss.persistenceunit。“KunderaSampleApp.war#address_mongo_pu”：org.jboss.msc.service。服务 jboss.persistenceunit 中的 StartException。“KunderaSampleApp.war#address_mongo_pu”：无法在 org.jboss.msc.service.ServiceControllerImpl$StartTask.run 启动服务（ServiceControllerImpl.java:1767）[jboss-msc-1.0.2.GA .jar:1.0.2.GA] 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_15] 在 java.util.concurrent.ThreadPoolExecutor$Worker.run( ThreadPoolExecutor.java:908) [rt.jar:1.6.0_15] at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_15] 原因：com.impetus.kundera.loader。 PersistenceLoaderException：com.impetus.kundera.utils.InvalidConfigurationException：在 com.impetus.kundera.configure.PersistenceUnitConfiguration 的类路径中找不到任何 META-INF/persistence.xml 文件。configure(PersistenceUnitConfiguration.java:102) at com.impetus.kundera.configure.Configurator.configure(Configurator.java:63) at com.impetus.kundera.KunderaPersistence.initializeKundera(KunderaPersistence.java:96) at com.impetus.kundera .KunderaPersistence.createEntityManagerFactory(KunderaPersistence.java:71) at com.impetus.kundera.KunderaPersistence.createContainerEntityManagerFactory(KunderaPersistence.java:58) at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.createContainerEntityManagerFactory(PersistenceUnitServiceImpl.java:162) at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.start(PersistenceUnitServiceImpl.java:85) 在 org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2\. GA.jar：1.0。2.GA] 在 org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA] ... 3 更多作者：com.impetus.kundera.utils.InvalidConfigurationException：在 com.impetus.kundera.configure.PersistenceUnitConfiguration.findPersistenceMetadatas(PersistenceUnitConfiguration.java:130) 的类路径中找不到任何 META-INF/persistence.xml 文件。 .kundera.configure.PersistenceUnitConfiguration.configure(PersistenceUnitConfiguration.java:86) ... 11 更多在 com.impetus.kundera.configure.PersistenceUnitConfiguration.configure(PersistenceUnitConfiguration.java) 的 com.impetus.kundera.configure.PersistenceUnitConfiguration.findPersistenceMetadatas(PersistenceUnitConfiguration.java:130) 的类路径中找不到任何 META-INF/persistence.xml 文件:86) ... 11 更多在 com.impetus.kundera.configure.PersistenceUnitConfiguration.configure(PersistenceUnitConfiguration.java) 的 com.impetus.kundera.configure.PersistenceUnitConfiguration.findPersistenceMetadatas(PersistenceUnitConfiguration.java:130) 的类路径中找不到任何 META-INF/persistence.xml 文件:86) ... 11 更多

* * *

它与`JBoss AS5CR2`.

任何指向问题的指针都会有很大帮助！

-维维克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:34:19.863

我不确定您是否可以像这样替换 JPA 实现。您可以查看[https://community.jboss.org/wiki/HowToUseEclipseLinkWithAS7](https://community.jboss.org/wiki/HowToUseEclipseLinkWithAS7)可能会提供一些帮助，但我不确定任何细节。

[在JBoss 社区论坛](https://community.jboss.org/community/jbossas7/dev?view=discussions)中提问可能会更好。

此外，您不需要添加 commons-logging 库。只需使用`<module name="org.apache.commons.logging"/>`.

# sql-server-2008 - Sql Server 全文搜索 - 姓氏名字搜索问题

> ID：11317276
> 
> 赞同：-1
> 
> 时间：2012-07-03T18:50:43.023
> 
> 标签：sql-server-2008, tsql, full-text-search

我有一个包含许多字段的表，其中 LastName 和 FirstName 是两个..

该表有大约 200 万条记录。

所以我想到了使用全文搜索。

现在我的要求是在数据库表中使用搜索条件 LastName 和 FirstName 以及 LastName 和 FirstName 的组合来搜索特定记录

```
..|Firstname    |Lastname     |..
------------------------------------------
  |george walker|bush         |
  |bill         |klinton      | 
```

如果这两列的组合包含扩展的搜索条件，它应该返回记录

即，`FirstName=bush`和`LastName=walker` 或
`FirstName=goerge`等等`LastName=walker`。

我不能像这样使用

```
SELECT * FROM TableName where CONTAINS((LastName,FirstName),@LastName)
         and CONTAINS((LastName,FirstName),@FirstName) 
```

因为搜索条件`FirstName`可以`LastName`为空（SQL SERVER 2008 引发错误），也可以包含多个单词

如何解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:54:55.293

```
SELECT * FROM TableName where FirstName IS NOT NULL AND LastName IS NOT NULL (FirstName LIKE '%BUSH%' OR FirstName LIKE '%george%') AND LastName LIKE '%walker%' 
```

试试看 你想允许还是禁止结果中的空值？

# python - Python IOError：文件未打开以进行写入且未定义全局名称“w”

> ID：11317278
> 
> 赞同：10
> 
> 时间：2012-07-03T18:50:54.863
> 
> 标签：python, io, syntax-error

我正在尝试编写一个小程序，用 Python 在文件中写入（附加会更好）一行，如下所示：

```
def getNewNum(nlist):
    newNum = ''
    for i in nlist:
        newNum += i+' ' 
    return newNum

def writeDoc(st):
    openfile = open("numbers.txt", w)
    openfile.write(st)

newLine =  ["44", "299", "300"]

writeDoc(getNewNum(newLine)) 
```

但是当我运行它时，我得到了错误：

```
openfile = open("numbers.txt", w)
NameError: global name 'w' is not defined 
```

如果我删除“w”参数，我会收到另一个错误：

```
line 9, in writeDoc
    openfile.write(st)
IOError: File not open for writing 
```

我完全按照（我希望）[这里](http://www.sthurlow.com/python/lesson10/)有什么。

当我尝试追加新行时也会发生同样的情况。我该如何解决？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-03T18:51:52.960

问题在于文件模式规范中的[open()](http://docs.python.org/library/functions.html?highlight=open#open)调用`writeDoc()`不正确。

```
openfile = open("numbers.txt", w)
                               ^ 
```

需要在`w`它周围有（一对单引号或双引号），即

```
openfile = open("numbers.txt", "w")
                                ^ 
```

引用[docs](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files) re 文件模式：

> 第一个参数是一个包含文件名的字符串。第二个参数是另一个***字符串***，其中包含一些描述文件使用方式的字符。

**回复**：“如果我删除“w”参数，我会收到另一个错误：..IOError: File not open for writing”

这是因为如果*未*指定文件模式，则默认值为`'r'`ead，这解释了有关文件未打开以进行“写入”的消息，它已打开以进行“读取”。

[有关读取/写入文件](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)和有效模式规范的更多信息，请参阅此 Python 文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T18:55:17.083

可以将数据附加到文件中，但您当前正在尝试设置写入文件的选项，这将覆盖现有文件。

> 第一个参数是一个包含文件名的字符串。第二个参数是另一个字符串，其中包含一些描述文件使用方式的字符。mode 可以是 'r' 只读取文件，'w' 只写入（同名的现有文件将被删除），'a' 打开文件进行追加；写入文件的任何数据都会自动添加到末尾。'r+' 打开文件进行读写。mode 参数是可选的；如果省略，将假定 'r'。

此外，您的实现会导致`open()`方法查找声明为 的参数`w`。但是，您想要传递字符串值以指示附加选项，该选项由括在引号中的 a 指示。

```
openfile = open("numbers.txt", "a") 
```

# css - CSS Text-Transform:Capitalize Oddity

> ID：11317279
> 
> 赞同：4
> 
> 时间：2012-07-03T18:51:15.713
> 
> 标签：css, cross-browser

我有一个[显示 javascript 倒计时的页面](http://www.flcbranson.org/elegant.php)。javascript 会自动填充“d”表示天数，“h”表示数小时等... CSS 添加“ay(s)”、“our(s)”等...，如果空间允许，并将它们大写。

Javascript：

```
function cdtd(broadcast) {
    var nextbroadcast = new Date(broadcast);
    var now = new Date();
    var timeDiff = nextbroadcast.getTime() - now.getTime();
    if (timeDiff <= 0) {
        clearTimeout(timer);
        document.getElementById("countdown").innerHTML = "<a href=\"flconlineservices.php\">Internet broadcast in progress<\/a>";
        /* Run any code needed for countdown completion here */
    }
    var seconds = Math.floor(timeDiff / 1000);
    var minutes = Math.floor(seconds / 60);
    var hours = Math.floor(minutes / 60);
    var days = Math.floor(hours / 24);
    hours %= 24;
    minutes %= 60;
    seconds %= 60;
    document.getElementById("daysBox").innerHTML = days + " d";
    document.getElementById("hoursBox").innerHTML = hours + " h";
    document.getElementById("minsBox").innerHTML = minutes + " m";
    // seconds isn't in our html code (javascript error if this isn't commented out)
    /*document.getElementById("secsBox").innerHTML = seconds + " s";*/
    var timer = setTimeout('cdtd(broadcast)',1000);
} 
```

CSS：

```
[role="navigation"] {text-transform:capitalize;}
@media screen and (min-width:1600px) {
    #countdown #daysBox:after {content:"ay(s)";}
    #countdown #hoursBox:after {content:"our(s)";}
    #countdown #minsBox:after {content:"inute(s)";}
} 
```

Firefox 和 Opera 按我的预期显示倒计时（3 天、5 小时等），但 Internet Explorer 大写（3 天（S）、5 小时（S）等） ...）。Safari 和 Chrome 更糟糕，因为它们将 (s) 和 CSS 生成内容的首字母大写（3 DAy(S)、5 HOur(S) 等）。

我发现一个[页面显示排版错误，其中 :first-letter 和 :first-line](http://nicolasgallagher.com/css-typography-experiment/demo/bugs.html)可能有些相关。

我试着做`text-transform:lowercase`然后`text-transform:capitalize`，但这并没有改变结果。

有想法该怎么解决这个吗？我可能会删除大写字母，但我必须确保所有内容都输入正确的大小写。

JJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:55:50.433

好的，据我所知，您只需要天数、小时数和分钟数的第一个字母。您可以在 javascript 中执行此操作。就像是

```
var daysString = days + " d";
document.getElementById("daysBox").innerHTML = daysString.toUpperCase(); 
```

更新：忘了提我们的#countdown {text-transform:capitalize;}

# ios - 输出到 UITextField

> ID：11317284
> 
> 赞同：0
> 
> 时间：2012-07-03T18:51:41.840
> 
> 标签：ios, cocoa-touch, textbox

我有`NSDictionary`一些参数，我想在`UITextField`. 但

```
firstname.text = [userdata objectForKey:@"firstname"]; 
```

抛出异常。如果我使用`NSLog`它`[userdata objectForKey:@"firstname"];`显示正确的值。这里似乎有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:55:54.803

只需使用以下代码：

```
firstname.text = [NSString stringWithFormat:@"%@",
                   [userdata objectForKey:@"firstname"]]; 
```

继续 .. ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T21:43:27.437

当您`NSLog`使用它`[object description]`来将对象转换为字符串以进行输出时。如果存储在字典中的对象不是 NSString 并且您尝试分配给`firstname.text`您将得到异常。

您可能面临的另一个问题是您的`firstname`对象可能没有指向您认为的对象。例如，如果您没有使用 ARC 并且您忘记保留它或者您已经发布了它，则可能会发生这种情况。

您看到的确切异常将决定您遇到的是哪一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T21:35:25.303

试图做类似的事情

```
[NSString stringWithFormat:@"%@",[userdata objectForKey:@"firstname"]];
firstname.text = nameString; 
```

?

# ruby-on-rails - 在一个请求中使用两个模型创建多个 habtm 关系

> ID：11317285
> 
> 赞同：1
> 
> 时间：2012-07-03T18:51:49.760
> 
> 标签：ruby-on-rails, has-and-belongs-to-many

我目前有一个专辑/艺术家数据库，它使用多个连接表来表示艺术家何时与专辑相关。他们可以被列为作曲家、编曲者或表演者。那是：

```
class Artist < ActiveRecord::Base
...
has_and_belongs_to_many :albumbycomposers, :class_name => "Album", :join_table => "albums_composers"
has_and_belongs_to_many :albumbyarrangers, :class_name => "Album", :join_table => "albums_arrangers"
has_and_belongs_to_many :albumbyperformers, :class_name => "Album", :join_table => "albums_performers"
...
end 
```

和

```
class Album < ActiveRecord::Base
has_and_belongs_to_many :composers, :class_name => "Artist", :join_table => "albums_composers"
has_and_belongs_to_many :arrangers, :class_name => "Artist", :join_table => "albums_arrangers"
has_and_belongs_to_many :performers, :class_name => "Artist", :join_table => "albums_performers"
... 
end 
```

此代码用于在数据库中查找现有艺术家，然后创建关联。如果不存在艺术家，那么我使用 .build 方法来创建艺术家。

```
class AlbumsController < ApplicationController
  ...
  def create
    @album = Album.new(params[:album])

    params["Composer Names"].each do |each|
      if each.empty? == false
        @exists = Artist.find_by_name(each)
        if @exists.nil? == true
          @album.composers.build(:name => each)
        else
          @album.composers << Artist.find_by_name(each)
        end
      end
    end

    params["Arranger Names"].each do |each|
      if each.empty? == false
        @exists = Artist.find_by_name(each)
        if @exists.nil? == true
          @album.arrangers.build(:name => each)
        else
          @album.arrangers << Artist.find_by_name(each)
        end
      end
    end
    ...
  end
  ...
end 
```

当我尝试以作曲家和编曲者的身份输入新艺术家时，就会遇到问题。例如，假设我将此作为发布请求提交

```
Parameters: {"Name"=>["New Album"],
             "Performer Names"=>["New Artist"], 
             "Composer Names"=>["New Artist"], 
             "Arranger Names"=>["New Artist"], 
             ...
            } 
```

由于作曲家参数是第一位的，因此 rails 会正确解释它们（就好像艺术家不存在一样）。编曲者和表演者的论点也被解释为艺术家不存在。然后 rails 开始将数据插入我的数据库。首先创建专辑并将其插入专辑表，然后创建“新艺术家”并将其插入专辑作曲家（根据 .build 方法）。

但是，对于arranger和performer参数，build方法不能再使用，因为artist已经创建，所以代码没有正确执行。

对于这种特定情况，我尝试通过在编曲者和表演者参数行中使用 push 方法（又名 <<）来解决此问题，但这不起作用，因为它会立即触发而无需等待作曲家参数制作艺术家，导致在“找不到艺术家”错误中。以供参考：

```
collection<<(object, …)
Adds one or more objects to the collection by creating associations in the join table (collection.push and collection.concat are aliases to this method). 
Note that this operation instantly fires update sql without waiting for the save or update call on the parent object. 
```

处理这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T03:01:59.970

我首先使用代码将每个艺术家分别添加到我的数据库中，从而解决了这个问题：

```
@artists = params["Composer Names"] | params["Arranger Names"] | params["Performer Names"]
@artists.each do |artist|
  if artist.empty? == false
    @exists = Artist.find_by_name(artist)
    if @exists.nil?
      @artist = Artist.new(:name => artist)
      @artist.save
    end
  end
end 
```

我可以使用 push 方法并使用以下代码将每个艺术家添加到正确的连接表中：

```
params["Composer Names"].each do |each|
  if each.empty? == false
    @album.composers << Artist.find_by_name(each)
  end
end 
```

就是这样！

# vim - 如何在vim的多个选项卡中编辑同一个文件？

> ID：11317287
> 
> 赞同：29
> 
> 时间：2012-07-03T18:51:50.887
> 
> 标签：vim, tabs

我经常在 vim 中编辑长文件，这些文件在文件的多个不同位置有代码块，我需要不断地在这些文件之间来回切换。显然，解决此问题的一种方法是使用 :split 拆分窗口并在不同的拆分窗口中编辑每个部分，并且`:w`任一窗口中的 a 都将保存整个文件。如果您有足够大的屏幕，这很好，但有时我必须在低分辨率笔记本电脑上使用 vim，而且我不想通过拆分窗口来进一步减少屏幕空间。

在这种情况下，我真正想做的是在多个*选项卡*中编辑文件，并将每个单独的选项卡完全视为单独的视图拆分。一旦我打开文件的一个副本，我就可以通过使用来模仿这一点`:tabopen <the same filename>`，但这有点hacky - 如果我已经对文件进行了更改，它就不起作用，因为vim认为我只是在打开文件第二次。

有没有一种好方法可以通过 vim 中的选项卡获得我想要的行为？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-03T18:55:41.170

该`:tab`命令将命令作为参数。

所以你可以这样做：

```
:tab split 
```

即使修改了缓冲区，这也将起作用，并且任一选项卡中的保存都会保存文件，同时更新两个选项卡中的保存状态。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-03T18:59:05.773

您可以使用以下`:tab`命令：

> ```
> :[count]tab {cmd}` 
> ```
> 
> > 执行`{cmd}`，当它打开一个新窗口时，打开一个新的标签页。[...] 当`[count]`被省略时，标签页出现在当前标签页之后。何时`[count]`指定新标签页位于标签页之后`[count]`。用于`:0tab cmd`获取新标签页作为第一个。
> > 
> > 例子：
> > 
> > ```
> > :tab split           " opens the current buffer in new tab page
> > :tab help gt         " opens tab page with help for "gt" 
> > ```

# android - Android sdk 编辑大图

> ID：11317294
> 
> 赞同：1
> 
> 时间：2012-07-03T18:52:11.963
> 
> 标签：android, image, process

我已经为 android 制作了一个图像编辑应用程序，我想编辑没有可用内存大小的大图像来将它们的所有数据加载到其中。是否有任何库提供加载和存储图像的一部分的 api，这样我就可以只编辑适合内存的部分？Photoshop for android 可以编辑高达 1600x1600 的图像，这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T21:13:42.067

您可以使用[BitmapRegionDecoder](http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html)来详细说明大图像的块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:01:00.493

您可以使用矩阵来缩放图像，看看这段[代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.3.3_r1/com/android/camera/ViewImage.java?av=f)很难理解，但它可能会给您带来一些启发。

# html - 是否可以有两个 .html 文件组成一个文件

> ID：11317295
> 
> 赞同：0
> 
> 时间：2012-07-03T18:52:14.160
> 
> 标签：html, google-app-engine, jinja2

我目前正在学习如何使用 Python 2.7 和 Jinja2 在 Google App Engine 上制作网站，我想知道是否可以制作两个单独的 HTML 文件来制作一个文件。

在主要的 HTML 文件中，我想要有页面的基本布局（这个 HTML 有主菜单、页眉、页脚，...），在另一个 HTML 文件中，我想要更详细的外观（主页的 HTML 文件，HTML帖子页面，...）。

对不起，我不是以英语为母语的人，如果我写的问题不好，很抱歉。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:01:44.987

正如您已经注意到（通过 jinja2 标记），您想要的是一些模板引擎。对于 jinja2，请参阅[GAE 文档](https://developers.google.com/appengine/docs/python/gettingstartedpython27/templates)中的示例。此外，[在这篇文章](http://www.untilnil.com/2010/08/appenginetemplates2/)中，还有一些其他适用于 GAE 的模板引擎的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:53:32.133

是的，如果您的服务器是 Apache，您可以使用 SSI（服务器端包含）。

在您的第一个文件中：

```
<!--#include virtual="second-file.html" --> 
```

# ruby-on-rails - ruby on rails params 为 nil

> ID：11317316
> 
> 赞同：0
> 
> 时间：2012-07-03T18:53:41.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

在我看来，我有以下代码：

```
<%= form_for :command_selected, :method => "get", :url => {:action => "command_domain_selected"} do |f| %>

   <%= f.submit "Make Deployment" %>
<%= f.radio_button :domain, '1dev-den' %> <%= label :domain, '1dev-den'%><br />
   <%= f.radio_button :domain, '2dev-den' %> <%= label :domain, '2dev-den'%><br /> 
```

当我单击`submit (make deployment)`按钮时，`parameters`从`submit button`并`radio button`传递到`form_for`上面提到的操作。但是，如果我没有选择任何单选按钮并在提交时 cilck，它会抛出（返回的 nil 对象，您可能期望一个数组实例）错误。但是，我想测试参数在我的操作中是否为 nil 并重定向到其他视图。以下是我的操作代码

```
def command_domain_selected
  if(params[:command_selected][:domain].nil?)
    respond_to do |format|
      format.html{redirect_to wrong_selection_path}
    end
  else
    @command_selected = params[:commit]      
    @domain_selected = params[:command_selected][:domain]
  end 
end 
```

为什么即使我事先检查它也会抛出 nil 对象错误？请帮忙

```
Update: Below is the error i'm getting
NoMethodError in AuthorizationController#command_domain_selected 
You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.[]Rails.root: c:/Final/authorize

Parameters: 

{"utf8"=>"✓", "commit"=>"Make Deployment"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:06:13.860

这是一个猜测，但它可能`params[:command_selected]`是你没有检查的 nil 。

# php - cURL 返回不同的

> ID：11317317
> 
> 赞同：0
> 
> 时间：2012-07-03T18:53:48.240
> 
> 标签：php, ssl, curl

简单的脚本，但似乎没有在第二台服务器上正确发布字段。php info 的唯一区别是 NSS/3.12.7.0 和 NSS/3.12.9.0。一个在 https 上，另一个不在，我在这里缺少另一个选项吗？

```
 $ch=curl_init();
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_POST, TRUE);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $request);
    $result=curl_exec($ch);
    curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:57:52.873

添加它会关闭 SSL 验证：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

# xcode - 以编程方式为 iOS 开发创建 UI 或拖放故事板

> ID：11317319
> 
> 赞同：0
> 
> 时间：2012-07-03T18:54:06.067
> 
> 标签：xcode, ios5, user-interface, storyboard

第一次构建用户界面，有一些一般性问题

1）如果您将视图对象拖放到视图控制器中，或者您以编程方式添加子视图并指定框架和字体，这真的很重要吗？采取什么更好的方法？

2）在编程方法中，我最终猜测帧值，（x，y）点，然后如果我喜欢它，然后检查模拟器。这是正确的方法，还是有更快、更好的方法来构建 UI？也许我不知道的方法？

3）关于如何开始的正确方向的任何有用的教程/指针？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:02:37.830

1) 两种方法都很好，但是如果您有更静态的 UI，Interface Builder 通常会更好。在更动态的应用程序中（视图出现和消失，或者如果您使用 UIViewController 包含），您需要在代码中添加/显示/隐藏一些视图。即使在这种情况下，您也可以在 IB 中设计单独的视图，以确保它们看起来不错，然后实例化并在代码中显示它们。

2）如果你在 IB 中设计你的视图，那么猜测大小的问题在很大程度上就消失了。在某些情况下，在 IB 中添加一个空视图会很有用，它充当动态内容的占位符。然后，当您在代码中向其添加视图时，您只需使用超级视图的尺寸，以便您的视图填充占位符。

# javascript - 访问 IFrame

> ID：11317324
> 
> 赞同：0
> 
> 时间：2012-07-03T18:54:12.967
> 
> 标签：javascript, dom, iframe, cross-domain

当我尝试访问 iframe 时，我收到了这个错误，我不确定我做错了什么。有人可以帮我解决这个问题吗？

```
var ifrm = document.getElementById('iframe'),
ifrm = (ifrm.contentWindow) ? ifrm.contentWindow :
                              (ifrm.contentDocument.document)
                            ? ifrm.contentDocument.document :
                              ifrm.contentDocument;

ifrm.open();
ifrm.write("Hello World!");
ifrm.close(); 
```

这些是我收到的错误：

*未捕获的类型错误：无法读取未定义的属性“文档”*

*未捕获的类型错误：无法读取未定义的属性“readyState”*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:36:47.347

您正在寻找 DOM 元素：

```
<iframe> 
```

iframe 是 HTML 标记的名称，而不是该元素的 id 值（将定义为 id="value"），因此您要使用：

```
document.getElementsByTagName('iframe')[0] 
```

如果您的页面上有多个 iframe，请将 0 更改为所需的任何索引，因为 getElementsByTagName() 将返回一组结果，即使页面上只有一个 iframe。

此外，您可以按如下方式简化三元运算：

```
ifrm = ifrm.contentWindow ? ifrm.contentWindow.document : ifrm.contentDocument; 
```

通过这种方式，您可以在所有浏览器中获取 iframe 的文档对象，这将使您能够访问 open()、write() 和 close() 方法以及 readyState 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T04:52:07.553

将 javascript 源代码放在标签之后。

像这样

```
<html>
<head>
</head>
<body>
<iframe>
<script>
blah blah
</script>
</body>
</html> 
```

# android - 找不到本地文件的 Android 调试器源

> ID：11317329
> 
> 赞同：1
> 
> 时间：2012-07-03T18:54:26.773
> 
> 标签：android, eclipse, debugging

我正在使用 Android 并尝试逐步执行我使用 Eclipse Juno 调试器创建的一些代码，但是当我的断点被命中时，调试器会加载 MyClassFile$1.onClick(View) 而不是 MyClassFile。我将断点移动到 onCreate 方法，它在 MyClassFile.onCreate(Bundle) 处中断，但它仍然显示 Source not found。我什至可以在“调试视图”中看到 MyClassFile 选项卡，有时甚至可以看到断点处突出显示的行。

当我单步执行时，我可以看到我创建的局部变量，并且一些值在我单步执行时正在更新，但它没有单步执行同一个文件。

该代码不驻留在 .jar 中，而是我项目中的文件，在本地创建，但它们连接到远程 SVN 存储库。我正在使用具有颠覆性的 Eclipse Juno。其他人遇到过这个问题吗？

编辑 - 我所要做的就是进入附加源，然后单击添加。其中一个选项是工作空间文件夹，我添加了包含所有课程的 src 文件夹，现在它工作正常。

# html - 你能在 Jekyll 中添加自定义的 html 标签吗？

> ID：11317332
> 
> 赞同：1
> 
> 时间：2012-07-03T18:54:33.183
> 
> 标签：html, perl, templates, markdown, jekyll

我想生成一些模板页面`Jekyll`，然后`Perl`使用该模块的脚本将使用这些模板页面`HTML::Template` `Perl`。是否有可能让 Jekyll 单独留下 HTML::Template 的标签而完全忽略它们？

例如：

```
<tr>             <td>Name:               </td>  <td><TMPL_VAR NAME=NAME> </td> </tr>
<tr class="alt"> <td>Email:              </td>  <td><TMPL_VAR NAME=EMAIL></td> </tr> 
```

我希望将页面呈现为 .html 文件，并且`<TMPL_VAR NAME=...>`保留单独的位，稍后后端`Perl`脚本会将此文件用作模板文件并填充`<TMPL_VAR NAME=...>`位所在的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T23:27:46.773

您可以通过创建带有 .html 扩展名的源页面来保持 HTML（标准和 Perl HTML::Template 集）不变。当你这样做时，jekyll（至少从 0.11.2 开始）不会与源 HTML 混淆。您仍然可以使用 YAML 前端内容并放入液体标签。例如，这将作为具有 .html 扩展名的源文件工作。

```
---
layout: default
title: This is the post title
categories: ["miscellaneous"]
---

{{ page.title }}

<table>
<tr>             <td>Name:  </td>  <td><TMPL_VAR NAME=NAME> </td> </tr>
<tr class="alt"> <td>Email: </td>  <td><TMPL_VAR NAME=EMAIL></td> </tr>
</table> 
```

从那里，您可以将 HTML::Template 标签完好无损地传递给您的二级处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T16:14:07.200

使用我从我在 stackoverflow 上提出和回答的[另一个问题](https://stackoverflow.com/a/11321037/33204)中学到的知识，这些似乎是您的 3 个选项。其中一个[@Alan W. Smith](https://stackoverflow.com/users/102401/alan-w-smith)在回答这个问题时也偶然发现。

**选项 #1：** -`HTML::Template`有一个名为`vanguard_compatibility_mode`...来自 perldocs的开关

> vanguard_compatibility_mode - 如果设置为 1，模块将期望看到除了标准语法之外看起来像 %NAME% 的 s。还设置 die_on_bad_params => 0。如果您不在 Vanguard Media 尝试使用旧格式模板，请不要担心这个。默认为 0。

**选项 #2** -`HTML::Template`还支持在注释块中嵌入模板标签，以便您的代码与 HTML 兼容，如下所示：`<!-- TMPL_NAME NAME=FNAME -->`

再次来自 perldocs：

> 如果您对有效的 HTML 很狂热，并且希望您的模板符合有效的 HTML 语法，您可以选择以 HTML 注释的形式键入模板标签。这可能对希望在处理 HTML::Template 之前验证其模板的 HTML 语法或使用 DTD 精通编辑工具的 HTML 作者有用。
> 
> `<!-- TMPL_VAR NAME=PARAM1 -->`

This 2nd option didn't work originally for me until I set the `die_on_bad_params => 0` for the constructor.

**Option #3:** Change the name of your [Jekyll](http://jekyllbootstrap.com/) file from `.md` (markdown) to `.html` (vanilla html). This option get's around Jekyll's use of [ReXML](http://www.germane-software.com/software/rexml/) for it's XML parser. I'm not sure but if you switched from using [ReXML](http://www.germane-software.com/software/rexml/) to [Nokogiri](http://nokogiri.org/), I think that too would get around this issue, but I'm not entirely sure you can even reconfigure [Jekyll](http://jekyllbootstrap.com/) in this manner.

**Conclusion:** Ultimately I think **Option #2** is the best one to use, given it doesn't limit your ability to use `.md` files within [Jekyll](http://jekyllbootstrap.com/).

# iis-7 - IIS 7 拒绝访问路径“0”

> ID：11317337
> 
> 赞同：1
> 
> 时间：2012-07-03T18:54:56.643
> 
> 标签：iis-7

我有一个在 ASP.net 4.0 中开发并托管在 IIS7(ProdServer) 中的 Web 应用程序。在其中一个页面中，我正在创建一个文件并将其存储在 \someOtherServer\Storage\ 文件夹中。

当我登录到生产服务器并点击运行和 \someOtherServer\Storage\ 时，我可以浏览该文件夹。

当我运行我的 ASP.net 应用程序时，我收到错误访问路径“0”被拒绝。

异常详细信息：System.UnauthorizedAccessException：对路径“0”的访问被拒绝。

ASP.NET 无权访问请求的资源。考虑向 ASP.NET 请求标识授予对资源的访问权限。ASP.NET 有一个基本进程标识（通常是 IIS 5 上的 {MACHINE}\ASPNET 或 IIS 6 和 IIS 7 上的网络服务，以及 IIS 7.5 上配置的应用程序池标识），如果应用程序不是模拟的，则使用该标识。如果应用程序通过 模拟，则身份将是匿名用户（通常是 IUSR_MACHINENAME）或经过身份验证的请求用户。

要授予 ASP.NET 对文件的访问权限，请在资源管理器中右键单击该文件，选择“属性”并选择“安全”选项卡。单击“添加”以添加相应的用户或组。突出显示 ASP.NET 帐户，然后选中所需访问权限的复选框。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T07:59:25.780

您必须查看运行 ASP.net 站点的应用程序池的标识，并确保该帐户对另一台服务器上的资源具有权限。

要在 IIS 7 中执行此操作，请执行以下操作：

*   打开 IIS 管理器并浏览到发生这种情况的站点。
*   右键单击该站点并选择“管理应用程序”->“高级设置”。
*   最上面的设置将显示您正在运行的应用程序池的名称。很可能它是 DefaultAppPool，但它也可能是其他东西（最好应该是其他东西）。
*   现在取消并单击 IIS 管理器中的应用程序池节点，然后右键单击上面看到的应用程序池并选择高级设置。
*   查看流程模型下的身份设置 - 这可能是 ApplicationPoolIdentity。要访问另一台计算机上的资源，您必须将其作为 NetworkService 或域帐户运行。我建议你先试一个，然后再试另一个。域帐户应该是一个密码不会过期的服务帐户（否则每次过期时您都必须在此处重新输入）。确保域帐户有权访问远程服务器上的共享资源。

希望对某人有所帮助。

# sql - 分组依据，按日期时间排序

> ID：11317339
> 
> 赞同：0
> 
> 时间：2012-07-03T18:55:09.327
> 
> 标签：sql, group-by, sql-order-by

我有近 15000 个数据行，第一列包含格式的日期： `2012-05-10 09:00:00.000`

我需要按年、月、日、小时对这些数据进行排序，例如：

```
 2012-05-10 09:00:00.000
         2012-05-10 10:00:00.000
         2012-05-10 11:00:00.000
         2012-05-10 12:00:00.000
         2012-05-11 09:00:00.000
         2012-05-11 10:00:00.000
         2012-05-11 11:00:00.000
         2012-05-11 12:00:00.000
         2012-06-01 02:00:00.000
         2012-06-01 03:00:00.000
         2012-06-01 04:00:00.000
         2012-06-01 05:00:00.000 
```

执行此操作的当前`SQL`查询如下：

`SELECT MIN(Datetime) GROUP BY DATEPART(M,jmusa_LOG1.DateTime),DATEPART(D,jmusa_LOG1.DateTime),DATEPART(HH,jmusa_LOG1.DateTime) HAVING MIN(jmusa_LOG1.DateTime) NOT IN(SELECT DateTime FROM AverageRawData)`

`ORDER BY DATEPART(M,jmusa_LOG1.DateTime),DATEPART(D,jmusa_LOG1.DateTime),DATEPART(HH,jmusa_LOG1.DateTime)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:07:51.870

你正在描述一个正常的日期排序，所以你可以这样做：

```
select MyDate
from AverageRawData
order by MyDate 
```

如果您不想重复，请添加`DISTINCT`如下：

```
select distinct MyDate
from AverageRawData
order by MyDate 
```

如果这不符合您的要求，请提供用于生成输出示例的示例数据。

# sql - 如何在 sql server 中为视图创建主键？

> ID：11317344
> 
> 赞同：1
> 
> 时间：2012-07-03T18:55:21.257
> 
> 标签：sql, sql-server-2008

假设我有两个数据库`DB1`，并且`DB2`都在同一个实例下。里面有一张桌子`tab2`。我`DB2`创建了一个视图`DB1`以获取`tab2`：`DB2`

```
CREATE VIEW [dbo].[Tab2]
AS
SELECT *
FROM  DB2.dbo.Tab2 
```

然后我尝试为`tab2`in创建一个密钥`DB1`：

```
CREATE UNIQUE CLUSTERED INDEX tab2_Key
ON dbo. tab2 (id2) 
```

这会引发以下错误：

> 消息 1939，级别 16，状态 1，第 1 行
> 无法在视图“Tab2”上创建索引，因为该视图未绑定架构。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T18:59:56.010

好吧，具有索引的视图有几个规则（与模式绑定所需的规则有一些级联）。

规则之一是视图不能包含 SELECT *。另一个是它必须与它引用的对象存在于同一个数据库中。

我可以为您列出规则，但它们列在[此处](http://msdn.microsoft.com/en-us/library/ms187956.aspx)和[此处](http://msdn.microsoft.com/en-us/library/ms191432.aspx)的文档中。而且我认为告诉你这些规则无论如何都不会取得多大的成就。

您能否准确解释一下您认为此视图上的聚集索引会提供什么好处？有人告诉您索引视图“更快”吗？在这种情况下，我看不到它对查询的作用，`DB2.dbo.Tab2`特别是如果该表已经在`id2`. 这只是在几个方面闻起来不对...

# php - 如果其他人包含文本，则阻止文本字段？

> ID：11317349
> 
> 赞同：0
> 
> 时间：2012-07-03T18:55:54.430
> 
> 标签：php, javascript, jquery, forms, input

如果其他人包含文本，是否有办法（最好使用 jQuery）阻止文本输入？

我可以看到一直阻止输入字段的方法，但不是动态的，因为其他字段包含文本。

```
<input name="inputone" id="i_one" type="text" value="">
<input name="inputtwo" id="i_two" type="text" value="">
<input name="inputthree" id="i_three" type="text" value=""> 
```

这是一个真正简单的设置。我只需要“i_one”包含任何文本，阻止“i_two”和“i_three”接收任何输入。但是如果用户在提交表单之前删除了他们在“i_one”中输入的内容，则该块将被解除，因此用户可以使用不同的字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:59:40.853

这个样子怎么样？

```
$('input').on('keyup', function() {
  $(this).siblings().prop('disabled', this.value.length ? true : false)
}); 
```

当然，您可能希望通过向您要收听的元素添加一个特殊的类来对其进行调整，使其不作用于*所有输入元素。*

[JsFiddle](http://jsfiddle.net/eW6mr/)如果你想调整/玩它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:00:47.637

我很快就想到了这个。

```
$(document).ready(function() {
    $("input").on("input", function() {
        if ($(this).val() == "") {
            $("input").removeAttr("disabled");
        }
        else {
            $("input").attr("disabled", "disabled");
            $(this).removeAttr("disabled");
        }
    });
}); 
```

# php - 来自 MySQL 数据的折线图

> ID：11317350
> 
> 赞同：0
> 
> 时间：2012-07-03T18:55:56.170
> 
> 标签：php, mysql, linegraph

这是我的代码，我想在其中使用 MySQL 中的数据创建折线图。任何帮助都将不胜感激，就好像我给数组一个 fiext 值它会生成图形但现在使用查询它没有显示任何东西。

```
<?php
function linegraph ($arrval) 
{
$arrval;
$height = 260;
$width = 330;
$im = imagecreate($width,$height);
$white = imagecolorallocate($im,255,255,255);
$gray = imagecolorallocate($im,200,200,200);
$black = imagecolorallocate($im,0,0,0);
$red = imagecolorallocate($im,255,0,0);
$x = 21;
$y = 11;
$num = 0;
while(($x <= $width) && ($y <= $height))
{
    $prcnt = ((($height-50)-($y-1))/($height-60))*100;
    imageline($im, 21, $y, $width-10, $y, $gray);
    imageline($im, $x, 11, $x, $height-50, $gray);
    imagestring($im,2,1,$y-10,$prcnt.'%',$red);
    imagestring($im,2,$x-3,$height-40,$num,$red);
    $x += 30;
    $y += 20;
    $num++;
}
$tx = 20;
$ty = 210;
foreach($arrval as $values)
{
    $cx = $tx + 30;
    $cy = 200-$values;
    imageline($im,$tx,$ty,$cx,$cy,$red);    
    imagestring($im,5,$cx-3,$cy-13,'.',$red);
    $ty = $cy;
    $tx = $cx;
}
imageline($im, 20, 11, 20, $height-50, $black);
imageline($im, 20, $height-49, $width-10, $height-49, $black);
return imagepng($im);
}
include ('/dbcon.php');
$dataarray = array();
$qr = "SELECT * FROM indicator WHERE indicatorid = '83';";
$res = mysql_query($qr);
if($res)
{
    $Data = mysql_fetch_array($res);
    $topicid = $Data['topicid'];
    $indid = 83;
    $couid = 8;
    $year = 2011-10;
    for ($count=0; $count < 10; $count ++)
    {
        $qrdb = "SELECT value FROM databank WHERE topicid = '$topicid', indicatorid = '$indid', countryid = '$couid', yearid = '$year';";
        $result = mysql_query($result);
        if ($result)
        {
            $DDB = mysql_fetch_array($result);
            $dataarray[$count] = $DDB['value'];
        } else {
            echo "Data cannot be fetched form Databank";
        }
    }
}
else
{
    echo "MYSQL query Fail";
}
linegraph($dataarray);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:22:00.597

您的查询有误

```
SELECT value FROM databank 
WHERE topicid = '$topicid', 
indicatorid = '$indid', 
countryid = '$couid', 
yearid = '$year';" 
```

`,`制作 a时应该使用，制作 a`update`时`select`必须使用[逻辑连接器](http://dev.mysql.com/doc/refman/5.0/en/logical-operators.html)

试试这样：

```
SELECT value FROM databank 
WHERE topicid = '$topicid' and 
indicatorid = '$indid' and
countryid = '$couid'and 
yearid = '$year';" 
```

# api - Magento Enterprise 1.12 - 从 V2 API 访问客户自定义属性

> ID：11317357
> 
> 赞同：3
> 
> 时间：2012-07-03T18:56:45.970
> 
> 标签：api, magento, soap

我有一个客户想使用 Magento 的 Web 服务 API 来创建和更新客户。使用 API，我们可以使用 V1 或 V2 API 轻松操作系统定义的属性 - 名字、姓氏等。我们很高兴去那里。

这就是它变得棘手的地方 - 该站点使用 Magento Enterprise 1.12，我们添加了一些自定义客户属性，用于将 Magento 客户链接到外部系统上的 CRM 数据。使用 V1 API，我可以完全访问自定义属性。但是，V2 API 不会公开它们。由于调用者来自.NET，我相信他需要使用 V2 API。

使用调试器跟踪代码，我看到 V2 代码获取所有属性数据，然后在生成 Web 服务响应时丢弃所有自定义数据。我尝试将属性添加到客户（Mage/Customer/etc/）WSDL 和 WSI 文件中，但这并没有奏效。

谁能给我一个关于我应该做什么来公开客户属性的指针？

格雷格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:21:28.453

1.  创建一个新模块
2.  在`Your_Module/etc/wsdl.xml`与`wsi.xml`Mage_Customer 相同的节点中添加新属性`wsdl.xml`和`wsi.xml`
3.  Magento 将所有`wsdl.xml`和 `wsi.xml`文件合并在一起

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T13:14:27.883

这是我用来将 customer_number 添加到 API 的 wsdl.xml 文件的示例。

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns:typens="urn:{{var wsdl.name}}" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns="http://schemas.xmlsoap.org/wsdl/"
name="{{var wsdl.name}}" targetNamespace="urn:{{var wsdl.name}}">
    <types>
        <schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="urn:Magento">
          <complexType name="customerCustomerEntity">
             <all>
               <element name="customer_number" type="xsd:string" minOccurs="0" />
             </all>
          </complexType>
       </schema>
    </types>
</definitions> 
```

# currency - 货币套利和矩阵

> ID：11317360
> 
> 赞同：4
> 
> 时间：2012-07-03T18:56:48.047
> 
> 标签：currency

我对量化领域非常陌生，但我只是想知道是否可以使用矩阵来识别多货币转换中可用的套利机会。这将是在不同的其他问题集中使用的最短路径查找问题或最小成本算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:59:19.940

这本[算法书](https://rads.stackoverflow.com/amzn/click/com/0073523402)解释了（或提示，因为它是一个练习），如何使用对数然后是经典的最短路径来做到这一点。这是一个有趣的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-21T01:59:20.963

对于“矩阵对识别多币种兑换中的套利机会有用吗？”这个问题，答案是肯定的。您将使用矩阵将每个货币转换率存储`i`在`j`cell 中`(i,j)`。

对于“找到此类机会的算法是否类似于最短路径查找问题？”的问题，答案也是肯定的。给定问题的矩阵，您将应用仅类似于 Floyd-Warshall 算法的算法。

完整的解释请看[这里](http://ruslanledesma.com/2016/05/26/arbitrage.html)。

# css - CSS将通配符应用于伪类

> ID：11317363
> 
> 赞同：0
> 
> 时间：2012-07-03T18:57:07.210
> 
> 标签：css, wildcard, pseudo-class

希望这不是一个愚蠢的问题，但我似乎无法弄清楚如何做到这一点。您可以将通配符应用于锚点悬停/焦点，以便将样式应用于所有类吗？

就像是

```
a:hover * { color: #ff0000; } 
```

说我有

```
a { color: #DD0000; }
a.link { color: #ffffff; }
a.link2 { color: #000000; }
a.user { ...
a.anything { ... 
```

解释我正在寻找的最简单的方法是拥有一个全局 :hover 样式，但有多个 :link 样式。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:05:53.080

有多种方法可以做到这一点。正如其他人所提到的，您可以将相同的样式应用于多个类，如下所示：

```
div a.class1:hover, div a.class2:hover, div a.class3:hover { ... } 
```

您还可以为要应用的样式创建自定义类：

```
div a.customClass:hover { ... } 
```

您可以`*`像问题中提到的那样使用，但[将悬停应用于它](http://jsfiddle.net/2thEu/)：

```
div *:hover { ... } 
```

还有这个选项，您只需为 all 应用样式`a`，尽管您可能已经知道此选项：

```
a:hover { ... } 
```

**编辑：**如果您的样式被其他东西“覆盖”，一种快速简便的检查方法是使用浏览器的开发人员工具来检查元素。`:hover`您甚至可以使用 Chrome 和 Firefox 随附的开发人员工具应用伪类（即，即使您没有将鼠标悬停在元素上也应用伪类）（您可能需要下载 Firebug 才能使用 Firefox 执行此操作）。

另一种选择是`!important`用来增加选择器的特异性。例如：

```
a:hover { background: red !important; } 
```

[您可以在此处](http://css-tricks.com/specifics-on-css-specificity/)阅读有关如何计算特异性的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:02:28.550

如果您想为特定标签应用全局 css 规则，请编写（对于锚点）：

```
a:link{/*your styles go here*/}
a:hover{/*your styles go here*/}
a:active{/*your styles go here*/}
a:visited{/*your styles go here*/} 
```

如果您想要一个以不同方式设置样式的特殊链接（也许将其设为按钮），只需对其应用一个类并设置该类的样式：

```
a.customlink{/*your styles go here*/} 
```

编辑：如果您只想在悬停时更改链接的某些属性，这对于两个不同的链接将是相同的（假设一个是黄色的，而另一个是红色的背景，并且您希望它们都具有黑色背景），将另一个相同的类添加到两个链接，并对其进行样式化。

[JsFiddle 示例](http://jsfiddle.net/Cye4X/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:00:40.520

你可以用逗号分隔它们，比如`a:hover link, a:hover link2, a:hover etc { color: #ff0000; }`

`a:hover { color: #ff0000; }`不做你想做的事吗？

# php - Dreamweaver CS6 视图包括

> ID：11317375
> 
> 赞同：0
> 
> 时间：2012-07-03T18:57:45.470
> 
> 标签：php, javascript, css, dreamweaver

我最近从 CS4 切换到 Dreamweaver 版本 CS6。在 CS4 中有一个方便的功能，可以显示包含文件的选项卡。CSS PHP Javascript 等。它将在“代码、拆分、设计、实时”上方显示这些选项卡。CS6没有这个功能还是我只需要启用它？

如果是这样，在哪里以及如何？

哦耶。我正在使用 Design Compact dreamweaver 布局。

希望你们能帮帮我。我真的很需要那个功能^^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:20:00.133

非易失性。我终于找到了我必须改变的地方。在常规设置中，启用相关文件：on。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:37:40.730

它不仅存在，而且比以前工作得更好，因为它可以更深入地扫描 PHP 文件（我认为 CS5.5 改进了它以用于 Wordpress 之类的东西）。当您打开包含包含的文件时，它们应该在文件名旁边。尽管它更好，但它仍然不完美，因此如果您动态创建了包含，您可能仍然看不到它们。

# python - 如何在python中获取两个日期之间的所有日期（月、日和年）？

> ID：11317378
> 
> 赞同：10
> 
> 时间：2012-07-03T18:58:00.577
> 
> 标签：python, datetime, date

情况：我正在尝试构建一个简单的方法，它接受两个不同的整数，代表两个不同的日期。以 2012 年 5 月 25 日的 20120525 和 2012 年 6 月 26 日的 20120627 为例。我希望此方法返回这些整数类型的列表，这些整数类型表示两个日期参数之间的所有日期。

问题：我能否获得有关如何执行此操作以及如何处理每个月 28、29、30 或 31 天的任何建议。我想我可以通过除法/修改 10 的幂来将数字提取为整数，然后根据上述特定条件递增这些数字，但我觉得必须有一种更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-03T19:01:14.703

您不必重新发明轮子。只需将字符串解析为 datetime 对象，然后让 python 为您计算：

```
from dateutil import rrule
from datetime import datetime

a = '20120525'
b = '20120627'

for dt in rrule.rrule(rrule.DAILY,
                      dtstart=datetime.strptime(a, '%Y%m%d'),
                      until=datetime.strptime(b, '%Y%m%d')):
    print dt.strftime('%Y%m%d') 
```

印刷

```
20120525
20120526
20120527
…
20120625
20120626
20120627 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-11-28T10:48:07.417

不使用的替代解决方案`rrule`在这里：

```
import datetime

d1 = datetime.date(2015, 1, 1)
d2 = datetime.date(2015, 2, 6)
days = [d1 + datetime.timedelta(days=x) for x in range((d2-d1).days + 1)]

for day in days:
    print(day.strftime('%Y%m%d')) 
```

输出：

```
20150101
20150102
20150103
<snip>
20150205
20150206 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-02-14T09:39:43.930

你可以使用[`pandas.date_range`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.date_range.html)，

```
import pandas

pd.date_range('2012-05-25', '2012-06-27', freq='D') 
```

这会产生，

```
DatetimeIndex(['2012-05-25', '2012-05-26', '2012-05-27', '2012-05-28',
               '2012-05-29', '2012-05-30', '2012-05-31', '2012-06-01',
               ...
               '2012-06-22', '2012-06-23', '2012-06-24', '2012-06-25',
               '2012-06-26', '2012-06-27'],
               dtype='datetime64[ns]', freq='D') 
```

# c - 使用整数格式说明符而不是短整数：为什么代码会这样？

> ID：11317382
> 
> 赞同：0
> 
> 时间：2012-07-03T18:58:30.963
> 
> 标签：c, memory, short, integer-overflow, format-specifiers

当我为以下程序提供 4 个整数作为输入（比如 a = 10、b = 20、d = 30、e = 40）时，它会计算`c = a + b = 0`和`f = d + e = 70`。我知道这种不寻常的行为是因为我为 short int 使用了错误的格式说明符，但这里到底发生了什么？为什么最后两个输入的和是正确的，而前两个数字的和总是= 0？

```
#include<stdio.h>

void main()
{
    short int a, b, c, d, e, f;
    scanf("%d%d%d%d", &a, &b, &e, &d);
    c = a + b;
    f = d + e;
    printf("%d\n%d\n", c, f);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:12:58.760

`"%d"`是用于读取`int`. 如果`short`小于`int`,`"%hd"`是读取 a 的正确格式代码`short int`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T19:01:28.903

这是未定义的行为，因此如果不详细分析实现，就无法给出“为什么”。但最有可能的是，编译器选择的变量布局导致其中一些在读入其他变量时被破坏。

使用我的编译器，在添加一行打印出 的地址后`a, b, d, e`，我得到了输出

```
0
70
0x7fffa94d30ca
0x7fffa94d30c8
0x7fffa94d30c6
0x7fffa94d30c4 
```

所以发生的事情可能是¹

1.  扫描到`a`存储 10 的低位字节`0x7fffa94d30ca`，接下来的三个字节（小端机器）中的 0，覆盖了没有为任何变量分配的堆栈的两个字节，不幸的是没有致命的后果，
2.  扫描到`b`的字节中存储 20，在`0x7fffa94d30c8`接下来的三个字节中存储 0，覆盖分配给 的两个字节`a`，因此设置`a`为 0，
3.  扫描到`e`（巧妙地按照字母顺序和声明顺序完成）将 30 存储在字节中`0x7fffa94d30c4`，将 0 存储到接下来的三个字节中，其中最后两个`d`是分配的位置，但`d`之后被扫描，所以
4.  扫描到`d`的字节中存储 40，在`0x7fffa94d30c6`接下来的三个字节中存储`b`0，用 0 覆盖，
5.  加法`c = a + b`结果为 0，因为扫描到其他变量时两个变量都被覆盖，加法`f = d + e`结果为 70，因为扫描后两者都没有`d`被`e`覆盖。

强制`c`在堆栈上分配，而不是通过打印出它的地址来放置在寄存器中，这导致扫描到`d`覆盖`c`而不是，`b`相应地，加法`c = a + b`结果为 20。

¹ 由于使用格式说明符扫描到`short int`变量是未定义的行为`%d`，任何事情都可能发生，但如果编译器不竭尽全力利用 UB，简单的解释将是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T20:25:38.553

发生的事情是“%d”指示 scanf 从输入中读取和解析一个数字，将其转换为 int，并将该 int 存储在相应的地址。通常，一个 int 是 32 位（四个字节），一个短 int 是 16 位（两个字节），尽管这可能会有所不同。

尽管 scanf 为每个“%d”写入四个字节，但您只为 &a、&b、&e 和 &d 中的每一个传递了两个字节。所以两个字节到正确的地址，另外两个到 &a、&b、&e 和 &d 旁边的任何地方。其中一些彼此相邻并被杂散字节覆盖。

显然，这是非常糟糕的代码，永远不应该使用。您不能指望哪些变量将在内存中的其他变量旁边。

# c# - 目录不存在。参数名称：directoryVirtualPath

> ID：11317384
> 
> 赞同：120
> 
> 时间：2012-07-03T18:58:33.883
> 
> 标签：c#, asp.net-mvc, iis, asp.net-mvc-4

我刚刚在 Arvixe 上将我的项目发布到我的主机并收到此错误（本地工作正常）：

```
Server Error in '/' Application.

Directory does not exist.
Parameter name: directoryVirtualPath

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.ArgumentException: Directory does not exist.
Parameter name: directoryVirtualPath

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[ArgumentException: Directory does not exist.
Parameter name: directoryVirtualPath]
   System.Web.Optimization.Bundle.IncludeDirectory(String directoryVirtualPath, String searchPattern, Boolean searchSubdirectories) +357
   System.Web.Optimization.Bundle.Include(String[] virtualPaths) +287
   IconBench.BundleConfig.RegisterBundles(BundleCollection bundles) +75
   IconBench.MvcApplication.Application_Start() +128

[HttpException (0x80004005): Directory does not exist.
Parameter name: directoryVirtualPath]
   System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) +9160125
   System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +131
   System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +194
   System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +339
   System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +253

[HttpException (0x80004005): Directory does not exist.
Parameter name: directoryVirtualPath]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9079228
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +256

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.237 
```

这是什么意思 ？

* * *

## 回答 #1

> 赞同：237
> 
> 时间：2012-10-04T16:25:24.810

我遇到了同样的问题，发现我有一些包使用 {version} 和 * 通配符指向不存在的文件，例如

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
    "~/Scripts/jquery-{version}.js")); 
```

我删除了所有这些，错误就消失了。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-01-27T05:25:09.467

我有同样的问题，这不是代码问题。我使用的是发布选项（不是 FTP 选项），Visual Studio 没有将我的一些脚本/css 上传到 azure 服务器，因为它们没有“包含在我的项目中”。所以，在本地它工作得很好，因为文件在我的硬盘里。在我的情况下解决此问题的是“项目>显示所有文件...”并右键单击未包含的文件，将它们包含并再次发布

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-06-17T21:11:04.107

这是我写的一个快速课程，以使这更容易。

```
using System.Web.Hosting;
using System.Web.Optimization;

// a more fault-tolerant bundle that doesn't blow up if the file isn't there
public class BundleRelaxed : Bundle
{
    public BundleRelaxed(string virtualPath)
        : base(virtualPath)
    {
    }

    public new BundleRelaxed IncludeDirectory(string directoryVirtualPath, string searchPattern, bool searchSubdirectories)
    {
        var truePath = HostingEnvironment.MapPath(directoryVirtualPath);
        if (truePath == null) return this;

        var dir = new System.IO.DirectoryInfo(truePath);
        if (!dir.Exists || dir.GetFiles(searchPattern).Length < 1) return this;

        base.IncludeDirectory(directoryVirtualPath, searchPattern);
        return this;
    }

    public new BundleRelaxed IncludeDirectory(string directoryVirtualPath, string searchPattern)
    {
        return IncludeDirectory(directoryVirtualPath, searchPattern, false);
    }
} 
```

要使用它，只需在代码中将 ScriptBundle 替换为 BundleRelaxed，如下所示：

```
 bundles.Add(new BundleRelaxed("~/bundles/admin")
            .IncludeDirectory("~/Content/Admin", "*.js")
            .IncludeDirectory("~/Content/Admin/controllers", "*.js")
            .IncludeDirectory("~/Content/Admin/directives", "*.js")
            .IncludeDirectory("~/Content/Admin/services", "*.js")
            ); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-20T16:44:50.333

我今天遇到了同样的问题，实际上我发现 ~/Scripts 下的一些文件没有发布。在我发布丢失的文件后问题得到解决

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-17T09:11:35.033

由于我的 bundles.config 文件中不存在目录，我也遇到了这个错误。改变这个：

```
<?xml version="1.0"?>
<bundleConfig ignoreIfDebug="true" ignoreIfLocal="true">
    <cssBundles>
        <add bundlePath="~/css/shared">
            <directories>
                <add directoryPath="~/content/" searchPattern="*.css"></add>
            </directories>
        </add>
    </cssBundles>
    <jsBundles>
        <add bundlePath="~/js/shared">
            <directories>
                <add directoryPath="~/scripts/" searchPattern="*.js"></add>
            </directories>
            <!--
            <files>
                <add filePath="~/scripts/jscript1.js"></add>
                <add filePath="~/scripts/jscript2.js"></add>
            </files>
            -->
        </add>
    </jsBundles>
</bundleConfig> 
```

对此：

```
<?xml version="1.0"?>
<bundleConfig ignoreIfDebug="true" ignoreIfLocal="true">
    <cssBundles>
    </cssBundles>
    <jsBundles>
    </jsBundles>
</bundleConfig> 
```

为我解决问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-02-14T19:47:56.073

这也可能是由部署时的竞争条件引起的：

如果您使用 Visual Studio 的“发布”通过网络文件共享进行部署，请选中“发布前删除所有现有文件”。（我有时这样做是为了确保我们不会在不知不觉中仍然依赖于已从项目中删除但仍在服务器上的文件。）

如果有人在重新部署所有必需的 JS/CSS 文件之前访问了该站点，它将启动`Application_Start`并且`RegisterBundles`无法正确构建包并抛出此异常。

但是当你得到这个异常并去检查服务器时，所有必要的文件都在它们应该在的地方！

但是，应用程序很高兴地继续为站点提供服务，为任何捆绑请求生成 404，以及由此产生的无样式/无功能页面，并且即使在必要的 JS/CSS 文件现在可用之后，也不会尝试重新构建捆绑包。

使用“用本地副本替换匹配的文件”重新部署将触发应用程序重新启动并这次正确注册捆绑包。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-09-23T12:30:08.473

像@JerSchneid 一样，我的问题是空目录，但我的部署过程与 OP 不同。我在 Azure（使用 Kudu）上进行基于 git 的部署，但没有意识到 git 在 repo 中不包含空目录。见[https://stackoverflow.com/a/115992/1876622](https://stackoverflow.com/a/115992/1876622)

所以我的本地文件夹结构是：

> [项目根目录]/Content/jquery-plugins // 有文件
> 
> [项目根目录]/Scripts/jquery-plugins // 有文件
> 
> [项目根目录]/Scripts/misc-plugins // 空文件夹

而远程服务器上我的存储库的任何克隆/拉取都没有得到空目录：

> [项目根目录]/Content/jquery-plugins // 有文件
> 
> [项目根目录]/Scripts/jquery-plugins // 有文件

解决此问题的最佳方法是在空目录中创建一个 .keep 文件。请参阅此 SO 解决方案： [https ://stackoverflow.com/a/21422128/1876622](https://stackoverflow.com/a/21422128/1876622)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-10-05T19:32:56.360

我遇到过同样的问题。就我而言，问题在于包含所有 bootstrap/jqueries 脚本的脚本文件夹不在 wwwroot 文件夹中。一旦我将脚本的文件夹添加到 wwwroot，错误就消失了。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-01-07T04:11:30.640

这可能是一个老问题。我有类似的错误，在我的情况下，它是隐藏在我的模型文件夹中的脚本文件夹。堆栈跟踪清楚地说明了它缺少的目录，默认情况下所有 Java 脚本都应该在 Scripts 文件夹中。这可能不适用于以上用户。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-03-24T20:59:00.837

我创建了一个新`Angular`应用程序并编写了

```
bundles.Add(new ScriptBundle("~/bundles/app")
    .IncludeDirectory("~/Angular", "*.js")
    .IncludeDirectory("~/Angular/directives/shared", "*.js")
    .IncludeDirectory("~/Angular/directives/main", "*.js")
    .IncludeDirectory("~/Angular/services", "*.js")); 
```

但我创建了 no `services`，因此该`services`文件夹未在发布时部署，因为它是空的。不幸的是，您必须在任何空文件夹中放置一个虚拟文件才能发布

[https://blogs.msdn.microsoft.com/webdevelopertips/2010/04/29/tip-105-did-you-know-how-to-include-empty-directory-when-package-a-web-application/](https://blogs.msdn.microsoft.com/webdevelopertips/2010/04/29/tip-105-did-you-know-how-to-include-empty-directory-when-package-a-web-application/)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-09-04T05:55:42.377

我也面临同样的问题。浏览到 Script Folder 下的文件路径。复制了确切的文件名并在 bundle.cs 中进行了更改：

旧代码：//Bundle.cs

```
public class BundleConfig

{

    public static void RegisterBundles(BundleCollection bundles)

    {

        bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery-{version}.js"));

        bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                    "~/Scripts/jquery.validate*"));

        bundles.Add(new ScriptBundle("~/bundles/modernizr").Include(
                    "~/Scripts/modernizr-*"));

    }
} 
```

新代码：

```
public class BundleConfig

{

      public static void RegisterBundles(BundleCollection bundles)

      {

        bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery-1.10.2.js"));

        bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                    "~/Scripts/jquery.validate.js"));

        bundles.Add(new ScriptBundle("~/bundles/modernizr").Include(
                    "~/Scripts/modernizr-2.6.2.js"));
      }
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-08-11T14:46:46.797

当我在 VS2015 中打开一个 VS2017 项目，构建解决方案然后上传 DLL 时，我遇到了这个问题。

在 VS2017 中重建它并重新上传 DLL 解决了这个问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-04-25T15:55:16.120

我也有同样的问题！似乎与 IIS Express 有关。我更改了项目的 IIS Express 的 URL，例如：

```
"http://localhost:3555/" 
```

然后问题就消失了。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-07-29T20:52:57.763

我的问题是我的网站没有要捆绑的文件。但是，我使用包含 jQuery 脚本的 MVC 模板创建了该站点。bundle.config 引用了这些文件及其文件夹。不需要脚本，我删除了它们。编辑 bundle.config 后，一切都很好。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-03-27T18:26:05.853

一切正常，然后在进行不相关的更改时，在下一次构建时遇到了同样的问题。使用源代码管理与以前的版本进行比较，发现我的 ../Content/Scripts 文件夹被神秘地清空了！

**从备份中恢复 ../Content/Scripts/*.* 一切正常！**

ps：使用VS2012，MVC4，最近更新了一些NuGet包，所以这可能是问题的一部分，但更新后一段时间都运行良好，所以不确定。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-05-07T01:52:54.427

查看 BundleConfig.cs 文件中调用**IncludeDirectory()的行**

IE：

```
 bundles.Add(new Bundle("~/bundle_js_angularGrid").IncludeDirectory(
                       "~/Scripts/Grid", "*.js", true)); 
```

我的 Grid 目录不存在。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-07-08T21:36:56.550

当我将所有分离的捆绑包合并为一个捆绑包时，我也遇到了这个错误。

```
bundles.Add(new ScriptBundle("~/bundles/one").Include(
            "~/Scripts/one.js"));
bundles.Add(new ScriptBundle("~/bundles/two").Include(
            "~/Scripts/two.js")); 
```

变成

```
bundles.Add(new ScriptBundle("~/bundles/js").Include(
            "~/Scripts/one.js",
            "~/Scripts/two.js")); 
```

我必须**刷新**共享主机控制面板上的应用程序池才能解决此问题。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-01-18T08:27:44.700

从 bundleConfig.cs 类文件中删除这行代码解决了我的挑战：

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
"~/Scripts/jquery-{version}.js")); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-04-19T21:36:17.773

这些答案都没有帮助我，因为我`jsx`以一种奇怪的方式创建了我的文件。我的代码在本地主机模式下工作，但在生产中失败。

我的解决方法是进入`csproj`文件并将文件路径从更改`<None ...`为`<Content ...`

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-08-18T16:48:32.950

基本上堆栈跟踪为您提供了删除不存在资源所需的确切位置（如屏幕截图中突出显示的那样）。

[![显示堆栈跟踪的图像](../Images/1b2659f08a49e3a2354c811e6995a5b9.png)](https://i.stack.imgur.com/JmVHM.png)

# matlab - matlab - 交叉产品错误

> ID：11317387
> 
> 赞同：0
> 
> 时间：2012-07-03T18:58:42.780
> 
> 标签：matlab, cross-product

我遇到了叉积函数的问题。我需要对每个像素取两个向量的叉积，然后对所有像素的结果求和。

```
 i=1;     
 [h,w,d] = size(current_vec);
 for pxRow = 1:h % fixed pixel row
 for pxCol = 1:w % fixed pixel column
 for pxsize = 1:d 

 for r = 1:h % row of distant pixel
 for c = 1:w % column of distant pixel
 for dpth = 1:d

 bfield(c,r,dpth) = cross(current_vec(c,r,dpth),dist_vec(c,r,dpth));                               % pythagoras theorem to get distance to each pixel                                                                     % unit vector from x to s                     

 end
 end
 end
 Bfield(i) = {bfield}; % filling a cell array with results. read below
 i = i+1;
 end
 end
 end

??? Error using ==> cross at 37
A and B must have at least one dimension of length 3.

??? Error using ==> cross at 37
A and B must have at least one dimension of length 3.

Error in ==> MAC2 at 71
bfield(c,r,dpth) = cross(current_vec(c,r,dpth),dist_vec(c,r,dpth)); 
```

然而，有问题的向量 current_vec 和 dist_vec 如下：

```
>> size(current_vec)

ans =

    35    35     3

>> size(dist_vec)

ans =

    35    35     3 
```

就我而言，它们满足了在交叉产品中使用的标准。为什么不是这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:03:17.497

You need to use the vectorized form of `cross`:

```
bfield = cross(current_vec,dist_vec); 
```

`cross` will work on the first dimension with length of 3\. The way you were doing it with nested loops, you're accessing a single element (a scalar) by indexing. You can't cross a scalar with a scalar.

# qt - QTextEdit 显示宽度与文本宽度

> ID：11317388
> 
> 赞同：0
> 
> 时间：2012-07-03T18:58:45.633
> 
> 标签：qt, qtextedit, qfontmetrics

我正在 Qt 中创建一个“滚动文本”类，使用一个`QTextEdit`（只读，无滚动条，moveCursor）和一个`QTimer`- 简单且有效。

我的问题是发送给班级的文本比 QTextEdit-box 短（窄）。傻，我同意，但是，作为 Qt 的新手，我没有找到一种简单的方法来比较给定文本的宽度（取决于字体）和可以在其中显示的实际宽度`QTextEdit`（在计算 FrameStyle 之后， ETC。）。我想我需要计算像素。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:10:06.963

You can get the width of a text using `QFontMetrics`:

```
int textWidth = myTextEdit->fontMetrics().width(myTextEdit->text()); 
```

# macos - WebView 拒绝访问 Sandboxed Mac App 中的网页资源

> ID：11317393
> 
> 赞同：0
> 
> 时间：2012-07-03T18:59:10.347
> 
> 标签：macos, cocoa, webview, sandbox

我最近开始实现 Mac App Store 沙盒（呃），并注意到加载到 WebView 中的保存的 HTML 档案不会呈现引用的资源。例如，保存的网页 MyPage.html 可以引用对应的 MyPage_files 文件夹中的 styles.css、image.jpg 和 script.js（Google Chrome 的保存“Webpage, Complete”约定）：

*   我的页面.html
*   MyPage_files/styles.css
*   MyPage_files/image.jpg
*   MyPage_files/script.js

但是，在将 MyPage.html 文件加载到 WebView 后，Console.app 会报告如下错误：

```
sandboxd: deny file-read-data /Users/user/Desktop/MyPage_files/styles.css
sandboxd: deny file-read-data /Users/user/Desktop/MyPage_files/image.jpg
sandboxd: deny file-read-data /Users/user/Desktop/MyPage_files/script.js 
```

这应该被认为是一个错误，还是只是沙箱中 WebViews 的限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:13:54.770

这是原始沙盒设计的一个限制，但苹果已经（至少部分）修复了它。

Apple 工程师至少在两个地方讨论了新解决方案，但不幸的是，我认为它们都是“预发布”信息源，Apple 以外的任何人都不允许在这样的公共场所谈论这些信息。

如果您拥有付费的 Mac 开发人员计划会员资格，请访问[Application Sandboxing 论坛](https://devforums.apple.com/community/mac/pre/appsandbox)。

[我相信WWDC 2012 视频中的](https://developer.apple.com/videos/wwdc/2012/)“OS X App Sandbox”视频无需付费的 Mac 开发人员计划会员资格即可获得。

另外，请记住，您将需要某种回退，除非您愿意要求所有用户升级到新版本的 OS X。您绝对应该向 Apple 提交错误，解释您的需求，然后发布关于它在论坛上。您可以在非预发布论坛上发布有关它的信息，因为您在 Lion 上询问如何执行此操作，这不涉及任何机密信息。

最后一点：如果您自己创建档案，您可以保存它们，以便在其中有一个包含 .html 文件和 _files 子目录的 MyPage 包；然后，当用户选择您的捆绑包时，您将可以访问所有内容。但是，如果您尝试打开例如由 Safari 创建的档案，这当然是行不通的。

# wcf - Windows 身份验证是否提供不可否认性？

> ID：11317394
> 
> 赞同：1
> 
> 时间：2012-07-03T18:59:11.130
> 
> 标签：wcf, windows-authentication

我现在一直在寻找一些东西，但我找不到答案。 [WCF 安全最佳实践](https://www.owasp.org/index.php/WCF_Security_Best_Practices)说尽可能使用 Windows 身份验证。如果您需要签名，这能否提供不可否认性和数据完整性？

（这里最重要的问题是不可否认性。我正在使用 TLS，但试图确定我是否可以通过带有 TLS 或 MLS 的 Windows Auth 提供不可否认性。理论上，TLS 提供跳到跳数据完整性。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:13:08.460

是的，对于第一个问题。检查这个：

[第 4 章：WCF 安全基础知识](http://msdn.microsoft.com/en-us/library/ff650862.aspx)

Windows 身份验证不提供数据签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T06:03:37.957

最佳实践指南建议使用 Windows 身份验证，因为它内置于所有 Microsoft 机器中。它不喜欢需要大量基础设施设置的证书。如果您的计算机已加入 Active Directory 域，它应该可以正常工作。

Windows 身份验证使用[SPNEGO](https://www.rfc-editor.org/rfc/rfc4178)协商使用哪种身份验证方法，*Kerberos*或*NTLM*。只要有可能，客户端和服务器将首先尝试选择*Kerberos*。否则，将使用*NTLM 。*

要回答您关于消息是否可以签名的问题，*Kerberos*和*NTLM*都可用于对消息进行**签名**和**加密**。作为 WCF 程序员，它应该对您透明。您需要做的就是将[ProtectedLevel](http://msdn.microsoft.com/en-us/library/aa347692.aspx)设置为 EncryptAndSign。如果您不相信我，您可以在设置 Windows 身份验证后查看网络跟踪。您应该会看到消息已加密。

使用 Windows 身份验证时，WCF 会调用 SSPI 进行身份验证和消息加密。我不会介绍 SSPI 的细节。 [这](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375388(v=vs.85).aspx)是*NTLM*加密消息[的](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375385(v=vs.85).aspx)SSPI 调用和*Kerberos*加密消息的 SSPI 调用。您可以在 Windbg 中设置一个断点来证明这一点。

尽管在上述链接中没有明确说明，但[该链接](http://msdn.microsoft.com/en-us/library/ms995352.aspx)明确指出，上述 EncryptMessages 方法可以提供数据完整性（*签名*）和隐私（*加密*）。

回到您最初关于是否支持 Windows 身份验证的问题`non-repudiation`，这实际上是一个更大的问题。 *数据签名*是必要的，`non-repudiation`但还不够。WCF 还提供审计功能来记录操作或事务。这是为了保证用户不能拒绝执行操作或发起交易。因此，为了支持`non-repudiation`，您还应该将[SuppressAuditFailure](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.servicesecurityauditbehavior.suppressauditfailure(VS.85).aspx)设置为 false 以确保审核始终正常运行。

# c# - 跨平台最佳 MVC 模型到控制器消息传递方法（C#、Objective-C++）

> ID：11317405
> 
> 赞同：3
> 
> 时间：2012-07-03T19:00:10.623
> 
> 标签：c#, c++, model-view-controller, c++11, objective-c++

计划重写一个复杂的、UI 繁重的应用程序，使其模型尽可能合理地跨平台。我所做的研究/阅读在概念上是有意义的，但就模型以某种跨平台方法向控制器发送消息而言，我没有看到最佳实践方法需要什么。

例如，通过控制器调用模型的 API 来更改模型。但是模型随后负责通知客户端其数据发生了变化，因此它需要将其广播回控制器——控制器需要通知视图。

但是对于用 C# 或 Objective-C++ 编写的控制器，消息传递方法会有所不同，对吧？是否会使用信号连接到控制器，该控制器将使用特定于平台的消息与视图通信？

是否有标准的轻量级模板可以为独立于平台的模型操作设置这些最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:11:40.053

将统一控制器与本机（iOS、MFC、HTML、...）视图一起使用是相当困难的。

我个人为我的应用程序创建了一个完整且无头的 API。我公开了这个 API 来操作模型（内部）和视图（外部）。

这种方法利用集中统一的“主”控制器（我的 API）。这个组件不需要*严格*的 MVC。每个平台都有一个单独的（子）控制器，用于连接您的内部 API 和平台原生视图。

这是一种分层的方法。就消息传递机制而言，C++ 回调（Boost Function & Bind）对于简单的任务来说已经足够好了。@Rotsiser_Mho 推荐的 Boost Signals 更加稳健。

C++ 对于您的核心来说是一个不错的选择，因为它几乎可以与任何平台混合使用。甚至 Android 也允许您将本机代码与 NDK 链接。

如果视图太复杂（大量自定义可视化等），您可能需要使用跨平台 UI 工具包，例如 WX、QT、GTK、Cairo、OpenGL、Swing 等。如果您走这条路，您可以使用内置的原生信号系统和控制器设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T03:41:34.787

我正在尝试启动一个做同样事情的项目。我打算使用 boost::signals2 作为回调机制。它使用标准 C 函数进行回调，因此它几乎可以与任何语言一起使用。您可以用 C++ 编写所有模型，并通过信号2 回调通知控制器更改。

当然，这将您限制在与模型之间的 C 风格界面，但据我所知，如果您希望它跨平台工作，这是唯一的方法。

祝你好运！

# java - 为什么对象类不是抽象的？

> ID：11317406
> 
> 赞同：3
> 
> 时间：2012-07-03T19:00:11.067
> 
> 标签：java

> **可能重复：**
> [为什么 java.lang.Object 不是抽象的？](https://stackoverflow.com/questions/2117689/why-java-lang-object-is-not-abstract)

我从来不需要创建一个对象类的对象它认为很多程序员以前没有做过这件事。如果您需要创建 Object 类，请分享该条件，否则我想知道为什么 Object Class 不是抽象的，而我们从不创建 Object 类的对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T19:02:18.570

I do create objects of type `Object` which are very useful when using locks in multithreading applications. This perfectly answers the question, I need an object of any type that I can lock on and the first thing that comes to mind is `Object`

```
public class MultiThreadedClass{
     Object lock = new Object();
     // ...
     public void useSharedResource(){
          synchronized(lock){
              ...
          }
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T19:02:38.063

I have actually created a new Objects to use for synchronization & locking.

# objective-c - 从文本文件创建子字符串

> ID：11317418
> 
> 赞同：2
> 
> 时间：2012-07-03T19:00:51.913
> 
> 标签：objective-c, string, eof

我有一个包含两行数字的文本文件，我要做的就是将每一行变成一个字符串，然后将它添加到一个数组（称为字段）中。尝试查找 EOF 字符时出现了我的问题。我可以毫无问题地从文件中读取：我将其内容转换为 NSString，然后传递给此方法。

```
-(void)parseString:(NSString *)inputString{

NSLog(@"[parseString] *inputString: %@", inputString);

//the end of the previous line, this is also the start of the next lien
int endOfPreviousLine = 0;

//count of how many characters we've gone through
int charCount = 0;

//while we havent gone through every character
while(charCount <= [inputString length]){
    NSLog(@"[parseString] while loop count %i", charCount);

    //if its an end of line character or end of file
    if([inputString characterAtIndex:charCount] == '\n' || [inputString characterAtIndex:charCount] == '\0'){

        //add a substring into the array
        [fields addObject:[inputString substringWithRange:NSMakeRange(endOfPreviousLine, charCount)]];
        NSLog(@"[parseString] string added into array: %@", [inputString substringWithRange:NSMakeRange(endOfPreviousLine, charCount)]);

        //set the endOfPreviousLine to the current char count, this is where the next string will start from
        endOfPreviousLine = charCount+1;
    }

    charCount++;

}
NSLog(@"[parseString] exited while.  endOfPrevious: %i, charCount: %i", endOfPreviousLine, charCount); 
```

}

我的文本文件的内容如下所示：

```
123
456 
```

我可以得到第一个字符串（123）没问题。电话是：

```
[fields addObject:[inputString substringWithRange:NSMakeRange(0, 3)]]; 
```

接下来，我调用第二个字符串：

```
[fields addObject:[inputString substringWithRange:NSMakeRange(4, 7)]]; 
```

但是我得到一个错误，我认为这是因为我的索引超出了范围。由于索引从 0 开始，因此没有索引 7（我认为它应该是 EOF 字符），并且出现错误。

总结一下：当只有 6 个字符 + EOF 字符时，我不知道如何处理索引 7。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:06:30.007

您可以使用`componentsSeparatedByCharactersInSet:`来获得您正在寻找的效果：

```
-(NSArray*)parseString:(NSString *)inputString {
    return [inputString componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:14:49.913

简短的回答是使用 [inputString componentsSeparatedByString:@"\n"] 并获取数字数组。

示例：使用以下代码获取数组中的行

```
 NSString *path = [[NSBundle bundleForClass:[self class]] pathForResource:@"aaa" ofType:@"txt"];
NSString *str = [[NSString alloc] initWithContentsOfFile: path];
NSArray *lines = [str componentsSeparatedByString:@"\n"];
NSLog(@"str = %@", str);
NSLog(@"lines = %@", lines); 
```

上面的代码假设您的资源中有一个名为“aaa.txt”的文件，它是纯文本文件。

# ruby-on-rails-3 - Rails 3.2 HTML5 多文件上传，Carrierwave 和无 Javascript

> ID：11317419
> 
> 赞同：4
> 
> 时间：2012-07-03T19:00:52.257
> 
> 标签：ruby-on-rails-3, html, file-upload, carrierwave

目前使用 Rails 3.2 和 Carrierwave。

我有多个文件设置，但它需要多个文件字段，但我只需要一个文件字段。如果浏览器不支持 HTML5 多重属性，我会将其作为默认设置。

**控制器**

```
def new
   @ad = Ad.new
   5.times { @ad.images.build } // provides multiple file fields in the view.
end

def create
  ad = Ad.new(params[:ad])
  user = User.find(session[:user_id])
  if user.ads << ad
    flash[:notice] = "Ad successfully saved."
    redirect_to ad_listing_path(ad.id, ad.slug)
  else
    render :new, :alert => "Ad was not saved."
  end
end 
```

**看法**

```
<%= f.fields_for :images do |a| %>
  <% if a.object.new_record? %>
     <%= a.file_field :image, :multiple => true %><br>
  <% end %>
<% end %> 
```

如果`5.times { @ad.images.build }`提供我的多个字段，显示 1 个接受多个字段的文件字段的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-19T13:05:43.980

这似乎是一个没有好的答案的热门问题，所以我将在这里完全回答它。在开始之前，我会提到代码可在[https://github.com/mdchaney/multi](https://github.com/mdchaney/multi)获得，但请继续了解如何以最简单的方式执行此操作。

在我们开始之前，在 HTML 5 中，文件输入字段可以设置“多个”属性。如果已设置，则结果与具有多个同名文件输入的结果相同。在 Rails 中，为表单构建器构建的文件输入字段设置“multiple: true”将导致它作为文件数组上传。

```
<%= f.file_field :files, :multiple => true %> 
```

变成

```
<input id="model_files" multiple="multiple" name="model[files][]" type="file" /> 
```

其中“模型”是您的模型的名称。这个输入控件将（至少在 Chrome 中）具有“选择文件”而不是“选择文件”的标签。

CarrierWave 本身无法处理此问题。它使用单个文本字段来存储有关单个文件的信息，并使用一些内部逻辑来确定该文件（以及可能的派生文件）的存储位置。可以破解它以将多个文件的信息放在单个文本字段中，选择带有设置分隔符的编码。这需要对 CarrierWave 进行大量工作和破解。

不过，我不想破解 CarrierWave，所以问题变成了这样一个事实：将多个文件附加到一个项目实际上是一对多的关系，或者在 Rails 术语中是“has_many”。因此，可以使用简单的属性编写器将文件输入字段中的文件添加到多个附加记录。

有了这个，我提出了最简单的方法，即使用具有多个属性集的 HTML 5 文件输入字段。有很多方法可以使用 jQuery 和 flash 来实现，但我提出这个是为了专门展示如何使用直接的 HTML 5 来实现。

在我们的示例中，我们将有一个简单的“上传”模型，每个模型都有一个名称和任意数量的链接文件，这些文件将存储在另一个名为linked_files 的模型中（让它变得简单，对吗？）。linked_file 将保存原始文件名、提供的内容类型，当然还有 CarrierWave 用于存储其信息的字段。

让我们为上传创建脚手架，然后为linked_files创建模型：

```
rails g scaffold Upload name:string
rails g model LinkedFile upload:references filename:string mime_type:string file:string 
```

完成后，我们可以在字段上设置限制并添加“非空”约束：

```
class CreateUploads < ActiveRecord::Migration
  def change
    create_table :uploads do |t|
      t.string :name, limit: 100, null: false

      t.timestamps
    end
  end
end

class CreateLinkedFiles < ActiveRecord::Migration
  def change
    create_table :linked_files do |t|
      t.references :upload, null: false
      t.string :filename, limit: 255, null: false
      t.string :mime_type, limit: 255, null: false
      t.string :file, limit: 255, null: false

      t.timestamps
    end
    add_index :linked_files, :upload_id
  end
end 
```

现在，让我们通过添加一个名为“files”的新属性编写器来修复 Upload 模型：

```
class Upload < ActiveRecord::Base
  has_many :linked_files, inverse_of: :upload, dependent: :destroy
  accepts_nested_attributes_for :linked_files, reject_if: :all_blank, allow_destroy: true
  validates_associated :linked_files

  attr_accessible :name, :files, :linked_files_attributes

  def files=(raw_files)
    raw_files.each do |raw_file|
      self.linked_files.build({filename: raw_file.original_filename, mime_type: raw_file.content_type, file: raw_file})
    end
  end

  validates :name, presence: true, length: { maximum: 100 }
end 
```

其中大部分是 Rails 模型的正常声明。这里唯一真正添加的是“files=”方法，它采用数组中的一组上传文件并为每个文件创建一个“linked_file”。

我们需要一个 CarrierWave 上传器：

```
class FileUploader < CarrierWave::Uploader::Base

  storage :file

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{model.id}/#{mounted_as}"
  end

end 
```

这是最简单的上传器，您可能希望限制上传的文件类型或其他。现在，LinkedFile 模型：

```
class LinkedFile < ActiveRecord::Base
  mount_uploader :file, FileUploader

  belongs_to :upload, inverse_of: :linked_files

  attr_accessible :file, :filename, :mime_type, :file_cache, :remove_file

  validates :filename, presence: true, length: { maximum: 255 }
  validates :mime_type, presence: true, length: { maximum: 255 }
end 
```

这并没有什么特别之处，只是添加了 :file_cache 和 :remove_file 作为文件上传器的可访问属性。

除了视图，我们现在完成了。我们实际上只需要更改表单，但我们还将更改“显示”以允许访问上传的文件。这是 _form.html.erb 文件：

```
<%= form_for(@upload, { multipart: true }) do |f| %>
  <% if @upload.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@upload.errors.count, "error") %> prohibited this upload from being saved:</h2>

      <ul>
      <% @upload.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>

  <% if f.object.linked_files.size == 0 -%>

    <div class="field">
      <%= f.label :files %><br />
      <%= f.file_field :files, :multiple => true %>
    </div>

  <% else -%>

    <fieldset>
      <legend>Linked Files</legend>
      <%= f.fields_for :linked_files do |lff| -%>
        <div class="field">
          <%= lff.label :filename %><br />
          <%= lff.text_field :filename %>
        </div>
        <div class="field">
          <%= lff.label :mime_type %><br />
          <%= lff.text_field :mime_type %>
        </div>
        <div class="field">
          <%= lff.label :file, 'File (replaces current selection)' %><br />
          <%= lff.file_field :file %>
          <%= lff.hidden_field :file_cache %>
        </div>
        <div class="field">
          <%= lff.check_box :_destroy %>
          Remove this file
        </div>
        <hr />
      <% end -%>
    </fieldset>

  <% end -%>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

我添加了两段代码。如果@upload 对象没有与之关联的“linked_files”，我只显示多文件输入。否则，我会显示每个linked_file 及其所有信息。可以将“文件”方法添加到 Upload 并以这种方式处理它，但这样做会丢失跨请求的 mime 类型。

您可以轻松地对此进行测试，因为上传的“名称”是必填字段。启动服务器并`http://127.0.0.1:3000/uploads`查看应用程序。单击“新建”链接，选择一些文件并点击“创建上传”而不提供名称。下一页将显示您正在等待的所有文件。添加名称时，所有内容都会保存。让我们修改“show”操作以显示linked_files：

```
<p id="notice"><%= notice %></p>

<p>
  <b>Name:</b>
  <%= @upload.name %>
</p>

<p>
  <b>Files:</b><br />
</p>

<table>
  <thead><tr><th>Original Filename</th><th>Content Type</th><th>Link</th></tr></thead>
  <tbody>
    <% @upload.linked_files.each do |linked_file| -%>
      <tr>
        <td><%= linked_file.filename %></td>
        <td><%= linked_file.mime_type %></td>
        <td><%= link_to linked_file.file.url, linked_file.file.url %></td>
      </tr>
    <% end -%>
  </tbody>
</table>

<%= link_to 'Edit', edit_upload_path(@upload) %> |
<%= link_to 'Back', uploads_path %> 
```

在此，我只是为“文件”添加了一个标题和一个显示所有文件并提供查看链接的表格。没什么花哨的，但它确实有效。

如果我把它变成一个真正的应用程序，我可能还会在上传索引页面上提供一个文件列表或最少的文件计数。

就是这样了。同样，如果您想下载整个测试应用程序，可以在 github 上找到它，但我已将我的 Rails 生成语句和更改的全部内容放在这篇文章中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T07:33:37.527

HTML 并不真正支持一个文件字段的多次上传。您可以使用一些 JavaScript 插件来解决它。想到的两个：

1.  [上传](http://www.uploadify.com/)
2.  [jQuery 文件上传](http://blueimp.github.com/jQuery-File-Upload/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-22T14:44:27.173

不幸的是，CarrierWave 不支持 HTML5 多重属性（目前）。

[https://github.com/carrierwaveuploader/carrierwave/issues/984](https://github.com/carrierwaveuploader/carrierwave/issues/984)

# android - android从移动设备而不是模拟器连接到服务器而不是本地主机

> ID：11317423
> 
> 赞同：0
> 
> 时间：2012-07-03T19:01:04.623
> 
> 标签：android, networking, android-emulator

我已经使用模拟器构建了一个 Android 应用程序进行测试。它连接到`localhost`获取和发送运行良好的数据。现在我想在我的移动设备上试用该应用程序。我已阅读我必须：

1.  将我的计算机连接到我的路由器网络
2.  将我的手机连接到我的路由器网络
3.  转到代码并用`10.0.2.2`我的计算机的IP替换

我对吗？如果是这样，那台计算机的IP是将我的计算机连接到互联网的IP吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:08:25.003

如果您在 Eclipse 中进行开发，您所要做的就是：

1.  使用 USB 数据线将您的设备连接到计算机
2.  右键单击应用程序的根目录
3.  选择“运行方式”> Android 应用程序
4.  如果您的设备已连接，它应该会自动运行

*请注意*，有时您必须选择是在连接的设备上运行还是在模拟器上运行，但一个窗口会显示您的选项，您只需选择一个即可。

就那么简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:32:49.243

您是对的，当您简单地连接到本地路由器时，您可以通过将配置更改为指向：“http://10.0.2.2:8080”来访问您的本地主机

我发现其他方法非常乏味

[http://juristr.com/blog/2009/10/accessing-host-machine-from-your/](http://juristr.com/blog/2009/10/accessing-host-machine-from-your/) [http://developer.android.com/tools/devices/emulator.html#emulatornetworking](http://developer.android.com/tools/devices/emulator.html#emulatornetworking)

# playframework-2.0 - 迭代和并发策略

> ID：11317424
> 
> 赞同：1
> 
> 时间：2012-07-03T19:01:07.187
> 
> 标签：playframework-2.0

在评估不同的服务器解决方案时，我需要了解 Play2 在使用 Iteratees 时如何处理并发，尤其是在处理 Websockets 请求时。

如果您查看此代码，显示具有共享状态的简单 websocket 服务器（协作绘画应用程序）[https://github.com/gre/playpainter/blob/master/scala/app/controllers/Application.scala](https://github.com/gre/playpainter/blob/master/scala/app/controllers/Application.scala)

您将看到每个 websocket 请求都可能修改共享状态，例如画家映射或连接计数器。这个代码线程安全吗？如果是（作者确认） Play2 内部如何处理并发？在这一点上，不幸的是，我没有 Scala 水平来完全理解 play2 lib 代码。

我想知道他们如何以高性能（可以“同时”处理多个请求）来调和线程安全（一次只能由一个线程修改映射或计数器）。

我能想到的唯一可行的行为是将每个迭代块的处理包装在自己的线程事务中；最终会严重限制并发性（尽管简化了用户代码）并最终获得类似于 Node.js 或任何单线程服务器将提供的性能？我可以看到 Iteratee 编程模型在流式传输、文件处理等方面的好处，但对于每个请求都会触发非琐碎工作（服务器计算、数据库访问等）的 websocket 来说并没有那么多好处

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:19:23.567

我对我的应用程序的线程安全性有误，它有一个错误。

我刚刚使用 ConcurrentHashMap 修复它，请参阅更改[https://github.com/gre/playpainter/commit/5120de5b77627836fe26602546f82c99a28cdf1b](https://github.com/gre/playpainter/commit/5120de5b77627836fe26602546f82c99a28cdf1b)

谢谢你的报告。

# ios - 使用 NSXMLParser 只解析前十个帖子，然后分别解析下一批

> ID：11317425
> 
> 赞同：5
> 
> 时间：2012-07-03T19:01:08.907
> 
> 标签：ios, xcode, rss, nsxmlparser, nsxml

我正在使用 NSXmlParser 来解析 rss 提要。到目前为止一切都运行良好。

我预计 rss 提要最终将包含数十/数百个帖子。我目前的解决方案是阅读整个 rss 提要并显示结果。但是，我只想阅读前十篇文章（以防止它解析潜在的数百个项目）。然后在稍后的时间（比如当用户到达表格末尾时）解析接下来的十个帖子。

所以我的问题是我将如何解析前十个帖子，然后解析接下来的十个帖子，然后是接下来的十个帖子，依此类推......

这是我用来获取所有帖子的方法：

```
- (void)parseXMLFileAtURL:(NSString *)URL
{   
    myArray = [[NSMutableArray alloc] init];

    //convert the path to a proper NSURL or it won't work
    NSURL *xmlURL = [NSURL URLWithString:URL];

    rssParser = [[NSXMLParser alloc] initWithContentsOfURL:xmlURL];
    [rssParser setDelegate:self];
    [rssParser parse];

}

- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError {
    //error
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{            

    currentElement = [elementName copy];

    if ([elementName isEqualToString:@"item"]) {
        //clear out our story item caches...
        item = [[NSMutableDictionary alloc] init];

    }

}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{     

    if ([elementName isEqualToString:@"item"]) {
        // save values to an item, then store that item into the array...
    }

}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{

    // save the characters for the current item...

}

- (void)parserDidEndDocument:(NSXMLParser *)parser {

    [myTable reloadData];

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T02:09:40.363

我想以与其他人不同的方式回答，如果您的解析器花了这么长时间来解析 10 和 100 之间的差异是一个重要的人类可测量的量，那么您做错了什么。最好是：

1.  分析您的解析代码以查找减速（或查找性能更高的 XML 库）
2.  在后台线程上解析整个批次
3.  只向用户显示前 10 个，
4.  在他们去的时候显示记忆中的其余部分。

这是双赢的，因为一次解析所有内容可以使代码更简单，错误更少，并且一次“加载”（显示）一个 RSS“页面”将是闪电般的快速，您的用户会喜欢您（参见 Instagram 示例假装速度）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T21:59:45.007

绝对在你的类头中创建一个计数变量：

```
...
@private
  NSUInteger rssCounter;
...
@property (nonatomic, assign) NSUInteger rssCounter;
... 
```

在您的委托初始化方法中：

```
rssCounter = 0; 
```

然后只要你到达一个元素的末尾就简单地增加这个变量，然后如@Metalmi所述，在开始一个元素时在 if else 块中使用中止解析。

之后，创建一个方法，当您需要再加载 10 个时将变量重置为 0，当您需要再次触发整个过程时可以调用该方法。

就像是：

```
- (void)restartParsing:(NSString *)url
{
  rssCounter = 0
  [self parseXMLFileAtURL:url];
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T14:37:06.703

您可以调用`[rssParser abortParsing]`以停止解析。停止后，您需要手动剪切 xml 的第一部分。或者以某种方式告诉网络服务。NSXMLParser 不会让你跳转到那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T12:26:14.070

我同意@coneybeare，这似乎是在后台线程中解析xml并将结果存储在内存中的正确方法。

不过，如果您仍想“逐页”解析 xml，您可以使用`xmlParseChunk`from [libxml](http://xmlsoft.org/)来完成（例如，请参阅[XMLPerformance 示例](http://developer.apple.com/library/ios/#samplecode/XMLPerformance/Listings/Classes_LibXMLParser_h.html#//apple_ref/doc/uid/DTS40008094-Classes_LibXMLParser_h-DontLinkElementID_9)）。您将需要手动计算项目并将剩余部分存储在某处，但我想这是您可以开箱即用的最接近的功能。

另一种方法是采用任何 Objective-C 免费开源 xml 解析器（甚至可能是 DOM 解析器，例如[TBXML](https://github.com/71squared/TBXML)）并以适合您的方式打破其内部解析循环。

# php - 限制来自 mysql 查询的多个结果

> ID：11317427
> 
> 赞同：0
> 
> 时间：2012-07-03T19:01:13.593
> 
> 标签：php, mysql, limit

我们有一个 sql 查询将联系人推送到我们的邮件系统的队列中。我们意识到的一件事是我们的每个邮件 IP 都有自己的限制。*这意味着我们可以为每个 ip每个域*发送 2 或 3 封邮件，而不是每分钟为每个 ip 发送 2 或 3 封电子邮件到所有目标域。我们有一个有效的查询，可以交叉检查我们的黑名单以及我们的跟踪系统，因此我们不会向执行过操作的用户重新发送邮件。

```
$query = "SELECT `email`,`template`,`id` FROM `q_main` WHERE 
            `email` NOT IN (SELECT `email` FROM `c_blacklist` WHERE `email` = `q_main`.`email`) AND 
            `email` NOT IN (SELECT `s_log`.`email` FROM `s_log`,`t_analytics` WHERE `t_analytics`.`key` = `s_log`.`key` AND `q_main`.`template` = `t_analytics`.`campaign_id`) LIMIT ".$num_nodes.""; 
```

上面的查询完美无缺。它只是获取与查询结果匹配的下一组电子邮件，而不管目标域如何。限制是通过将每个 ip 的 ip 地址数量乘以每分钟的最大值来设置的（通常是每分钟 2 或 3 个）。

要收集队列中所有可用的目标域，我们可以运行下面的查询。这将获取队列中的所有目标域以及计数。

```
$query = "SELECT SUBSTRING_INDEX( email, '@', -1 ) AS dd, COUNT( * ) AS cc FROM q_main GROUP BY SUBSTRING_INDEX( email, '@', -1 ) ORDER BY cc DESC";
$result = mysql_query($query) or die(mysql_error());
    while($row = mysql_fetch_array($result)){
        $send_domains[] = $row['dd'];
    } 
```

下面是我们的测试查询，它基本上什么都不做。它查询与第一个查询相同的内容，只是现在它内爆了目标域数组。它没有做的是限制每个目标域的结果，这是我们试图完成的。

```
$query = "SELECT `email`,`template`,`id` FROM `q_main` WHERE 
            `email` NOT IN (SELECT `email` FROM `c_blacklist` WHERE `email` = `q_main`.`email`) AND 
            `email` NOT IN (SELECT `s_log`.`email` FROM `s_log`,`t_analytics` WHERE `t_analytics`.`key` = `s_log`.`key` AND `q_main`.`template` = `t_analytics`.`campaign_id`) AND 
            `email` LIKE '%".implode("' OR `email` LIKE '%",$send_domains)."' "; 
```

总而言之，我们要做的是根据每个目标域选择*和限制记录。*我们如何为每个目标域设置一个限制，而不像第一个示例中那样限制整体查询？我们确实尝试通过每个目标域循环查询，但它根本没有表现良好。

同样对于那些好奇的人，我们正在尝试这样做来为我们的邮件 IP 实施评分系统。这样，当软弹跳或负面反馈出现在特定 IP 上时，我们将能够限制或跳过目标域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:07:28.670

在单独的表中维护每个域的限制并将该表连接到您的查询，以便限制可用于每个域。然后，为每个域编号您的行。在 where 条件中，排除 rownumber > domain limit 的行。

也就是说，mysql没有行号功能。它是使用行变量完成的， [这里是示例](http://jimlife.wordpress.com/2008/09/09/displaying-row-number-rownum-in-mysql/)。

# php - jQuery点击事件在php列表中不起作用

> ID：11317435
> 
> 赞同：0
> 
> 时间：2012-07-03T19:01:43.120
> 
> 标签：php, javascript, jquery

我的网页上有一个故事上传系统，该系统将故事上传到指定文件夹中，并从中列出其内容到网页。我做了一个拆分，所以只显示了 300 个字符的文本，当用户单击它时，会显示其余的字符。

这是我的代码：

这一个列出它：

```
<?php foreach($dataArray as $data) { ?>
    <div class="visible">
        <?php echo $data[0]; ?>
    </div>
    <div class="hidden">
        <?php echo $data[1]; ?>
    </div>
<?php } ?> 
```

这是我的 jQuery：

```
$('.hidden').css('display', 'none');
$('.visible').click(function () {

    $('.hidden').css('display', 'inline');
}); 
```

此页面（'tortenetek.php'）被 ajaxed 到主页（'blog.php'）。我在 blog.php 中包含了 Jquery，如下所示：

```
<link href='http://fonts.googleapis.com/css?family=Niconne&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" type="text/css" href="../css/stilus.css"/>
        <script type="text/javascript" src="../js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="../js/tinybox.js"></script>
        <script type="text/javascript" src="../js/ajax.js"></script>
        <link href="../css/lightbox.css" rel="stylesheet" />
        <script src="../js/lightbox.js"></script>
                <script src="../js/story.js"></script> 
```

Story.js 是我正在使用的脚本文件。

谢谢各位！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T19:04:49.903

使用[`.on`](http://api.jquery.com/on/)方法将事件附加到动态添加的元素。
将其更改为

```
$('.visible').on('click',function () {
     $('.hidden').css('display', 'inline');
}); 
```

# c++ - 让 gcc 在 c 操作之间调用特定的函数

> ID：11317438
> 
> 赞同：0
> 
> 时间：2012-07-03T19:01:49.580
> 
> 标签：c++, c, gcc, assembly, compiler-construction

我正在尝试为单线程程序制作看门狗。问题是，我们运行了一些外来的 so/dll（代码可用），这意味着我们在那里传递了控制权。

我们的想法是通过一些回调来重新编译这些，以某种取消例程。

是否可以让 GCC 在此编译的外部代码中调用 C 事务或 asm 事务之间的一些回调函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:08:45.630

我要建议的内容不涉及编译器，但这听起来像一个问题，您可以在运行时使用 POSIX 信号或[`ptrace`](http://www.google.com/search?q=ptrace)...

使用信号可以中断当前上下文，类似于在内核模式下使用 IRQ 会发生的情况。您将不得不担心“信号安全”（例如：您的处理程序无法使用`malloc`，因为它可能会`malloc`在其数据结构处于不确定状态时自行中断。）

您可以像在`ptrace`调试器中一样单步执行另一个进程中的指令。

小心行事，因为这些机制很难正确使用，而且很容易击中自己的脚。

# wso2 - wso2 身份服务器 - 禁用用户注册

> ID：11317440
> 
> 赞同：0
> 
> 时间：2012-07-03T19:02:05.393
> 
> 标签：wso2, wso2is

我想禁用允许新用户自行注册的默认 wso2 身份服务器功能（[wso2is 用户指南说明](http://wso2.org/project/solutions/identity/3.2.3/docs/userguide.html#t1)）。

相反，我只希望管理员能够创建新用户。这可能吗？我该如何配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:43:40.780

可以禁止用户在 WSO2 身份服务器上注册自己。

可以在[此处找到禁用用户自行注册的步骤](https://stackoverflow.com/questions/11429196/wso2-identity-server-user-self-registration)

# c# - 为什么有些对象不能从不同的线程访问？

> ID：11317447
> 
> 赞同：14
> 
> 时间：2012-07-03T19:02:29.610
> 
> 标签：c#, multithreading

在 C# 中开发时，我多次遇到过这个问题。我会愉快地编码，在线程之间来回传递对象等等，然后突然之间我得到了这个熟悉的错误：

> “调用线程无法访问此对象，因为不同的线程拥有它。”

好吧，我以前处理过它，尤其是 GUI 线程上的对象。您只需要编写一些额外的代码来围绕该**特定**问题进行编程。但是每隔一段时间我就会遇到一个很普通的对象，但它不喜欢被不同的线程访问。

**编辑**我在原来的帖子中弄错了导致访问异常的对象。它不是**[IPAddress](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.address.aspx)**，而是它的**[System.Printing.PrintQueue。](http://msdn.microsoft.com/en-us/library/system.printing.printqueue.aspx)**我用来获取IP地址的。这是您无法从超过 1 个线程中评估的对象。

我写的所有课程都没有这个问题。我什至不知道我自己会如何实现它。您是否必须使用创建您的线程 ID 保留一个成员变量，然后在每个属性和方法访问时检查当前线程与该变量是否一致？这似乎很疯狂。为什么微软会决定......“好吧...... PrintQueue，绝对不能在线程之间共享。但是这些其他类......它们很好。”

**为什么某些对象被多线程访问阻止？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:15:47.683

我认为这可以很好地解释事情，我认为这与 COM 密切相关。

[http://msdn.microsoft.com/en-us/library/ms693344%28v=vs.85%29](http://msdn.microsoft.com/en-us/library/ms693344%28v=vs.85%29)

具体来说。

> 通常，查看 COM 线程体系结构的最简单方法是将进程中的所有 COM 对象视为划分为称为单元的组。一个 COM 对象恰好存在于一个单元中，从某种意义上说，它的方法只能由属于该单元的线程合法地直接调用。任何其他想要调用该对象的线程都必须通过代理。
> 
> 有两种类型的公寓：单线程公寓和多线程公寓。
> 
> 单线程单元只包含一个线程，因此所有存在于单线程单元中的 COM 对象只能从属于该单元的一个线程接收方法调用。对单线程单元中的 COM 对象的所有方法调用都与单线程单元线程的 Windows 消息队列同步。具有单个执行线程的进程只是该模型的一个特例。
> 
> 多线程单元由一个或多个线程组成，因此位于多线程单元中的所有 COM 对象都可以直接从属于多线程单元的任何线程接收方法调用。多线程单元中的线程使用称为自由线程的模型。对多线程单元中的 COM 对象的调用由对象本身同步。

# php - How create a Wordpress template through a HTML/CSS page?

> ID：11317451
> 
> 赞同：2
> 
> 时间：2012-07-03T19:02:45.187
> 
> 标签：php, html, css, wordpress

I would like to learn about wordpress.

Is possible to create a wordpress template through a HTML/CSS page ? I'm taking an easy HTML page to start, so I install the XAMPP and then the lastest Wordpress. Any help is very welcome.

Thank you very much. ps: I'm searching something in Google though.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T03:04:00.757

*   安装 WordPress
*   复制 /wp-content/themes 中的默认主题文件夹（二十一十一）
*   将文件夹重命名为您的主题
*   打开里面的style.css，修改头文件中的元信息
*   根据需要编辑 php/样式表以修改主题以匹配您的样式
*   header.php - 包含常见的标题代码，通常是导航等（编辑所有内容，但不要删除 wp_header。您需要该标签才能使 wordpress 工作，对于 footer.php 中的 wp_footer 也是如此）
*   index.php 是主要内容文件，sidebar.php 是侧边栏
*   但是你可以随意使用所有这些文件，它是普通的 php/mysql 的东西。
    *   这也非常有用 - [http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:42:59.467

我建议您学习一点 PHP，因为它确实有助于您处理 Wordpress 文件。即使您主要是编辑 HMTL/CSS，也能让生活变得更轻松。

# mysql - 查询文件路径的一部分

> ID：11317453
> 
> 赞同：0
> 
> 时间：2012-07-03T19:02:47.997
> 
> 标签：mysql, sql

我的 MySQL 数据库中有一个存储文件路径的列。我试图找出一个查询，它将在给定字符串（或根目录，不给定字符串）的情况下返回文件路径中的下一个文件夹。所以说我有以下内容：

```
/this/is/my/folder
/this/is/another/folder
/folder/one 
```

我的查询将返回“this”和“folder”。或者如果我给它字符串'/this/is/'，它会返回'my'和'another'。这在同一个查询中可能是不可能的，所以如果我需要两个查询，我可以添加代码逻辑。

我相信我可以在 mysql 中使用正则表达式来做到这一点，但我不确定在 mysql 中是否有另一种方法可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:22:03.237

您可以使用 MySQL 的[`SUBSTRING_INDEX()`](http://dev.mysql.com/doc/en/string-functions.html#function_substring-index)函数来提取您需要的部分：

```
SELECT DISTINCT SUBSTRING_INDEX(
         SUBSTRING_INDEX(
           Folder,
           @querystring,
           1 + CHAR_LENGTH(@querystring) - CHAR_LENGTH(
             REPLACE(@querystring, '/', '')
           )
         ),
         '/',
         -1
       )
FROM   mytable
WHERE  Folder LIKE CONCAT(@querystring, '%'); 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/5e1b0/1)上查看。

# asp.net-mvc - 升级到 mvc4 rc 后在控制器上发现了多个操作

> ID：11317454
> 
> 赞同：0
> 
> 时间：2012-07-03T19:02:49.417
> 
> 标签：asp.net-mvc, asp.net-web-api

我们一直在使用 mvc webapi beta 并正在尝试升级到 rc。

我们有以下路线（唯一的约束是验证 {id} 是一个整数）：

```
"Api Verb with SubAction"   api/{controller}/{id}/{action}
"Api Verb with Id"          api/{controller}/{id}
"Api Verb without Id"       api/{controller}
"Api Action with Id"        api/{controller}/{action}/{id}
"Api Action without Id"     api/{controller}/{action} 
```

以及以下控制器动作

```
public IList<PaymentMethodViewModel> GetList()
{}

public HttpResponseMessage Get(Guid id)
{}

[ActionName("Details")]
public IList<RecurrenceModel> GetDetails(Guid id)
{} 
```

api/mycontroller、api/mycontroller/1、api/mycontroller/1/details 都在 beta 中正确返回。但是，升级到 MVC4 RC api/mycontroller/1 后，api/mycontroller/1/details 返回“找到与请求匹配的多个操作：”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:00:38.690

是的，我遇到了类似的问题，但找不到合适的原因。这显然是由于对路由实现的更改，但它的代码非常庞大，我还没有时间仔细研究它。

鉴于它将继续以这种速度发展，最好仅将内置路由机制仅用于默认`{controller}/{id}`样式的路由，而将[AttributeRouting](https://github.com/mccalltd/AttributeRouting)用于其他任何东西。

# objective-c - 在 iCloud 通知中访问已删除的对象

> ID：11317455
> 
> 赞同：2
> 
> 时间：2012-07-03T19:02:59.163
> 
> 标签：objective-c, ios, core-data, icloud, nsmanagedobjectcontext

我有一个与 iCloudCoreDataRecipes 示例非常相似的应用程序设置（即，将 Core Data 与 iCloud 结合使用）。在应用程序委托中，我观察到

```
NSPersistentStoreDidImportUbiquitousContentChangesNotification 
```

当通知到达时，我打电话

```
[context mergeChangesFromContextDidSaveNotification:note]; 
```

当收到此通知时，我想做一些额外的处理，但在使用 NSDeletedObjectsKey 集中存在的 NSManagedObjectID 标识的对象时遇到问题。

```
NSSet *deletedObjects = [info objectForKey:NSDeletedObjectsKey];
for (NSManagedObjectID *oid in deletedObjects) {
    NSManagedObject *obj = [context objectWithID:oid];
} 
```

如果我访问*obj*上的任何属性，则为 nil。

然后我尝试在调用 mergeChangesFromContextDidSaveNotification 之前运行上述代码：

当我这样做时，*大部分时间*我都能够访问对象的属性。*在某些情况下，我会因为无法完成故障而*获得例外；该记录已从 Core Data 存储中删除。

我意识到，如果在通知到达之前某个时间已经将对象加载到上下文中（即，如果在应用程序中查看/访问了该对象），则访问已删除对象的属性将起作用。

我的问题是我想做一些与已删除对象相关的清理工作；我的 NSManagedObject 有一个我想读取的属性，然后用它来执行与该值相关的核心数据之外的一些工作。

我错过了什么？是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:43:14.997

你可能应该看看

```
- (void)prepareForDeletion; 
```

并在您的子类中覆盖它`NSManagedObject`。

# python - 通过numpy数组优化迭代

> ID：11317457
> 
> 赞同：4
> 
> 时间：2012-07-03T19:03:01.693
> 
> 标签：python, opencv, numpy, iteration, loops

我在 Python 中交换多维 numpy 数组的值。但是代码太慢了。另一个线程说：

> 通常，您会避免直接遍历它们。...很有可能很容易矢量化。

那么，你知道优化以下代码的方法吗？

```
import PIL.Image
import numpy

pil_image = PIL.Image.open('Image.jpg').convert('RGB')
cv_image = numpy.array(pil_image)
# Convert RGB to BGR
for y in range(len(cv_image)):
    for x in range(len(cv_image[y])):
        (cv_image[y][x][0], cv_image[y][x][2]) = (cv_image[y][x][2],
            cv_image[y][x][0]) 
```

对于 509x359 的图像，这持续超过一秒，这实在是太多了。它应该立即执行它的任务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T19:04:42.707

这个沿最后一个轴反转矩阵的单个操作怎么样？

```
cv_image = cv_image[:,:,::-1] 
```

# asp.net - 使用@Html.TextBox MVC3 ASP.Net 设置变量

> ID：11317458
> 
> 赞同：1
> 
> 时间：2012-07-03T19:03:01.787
> 
> 标签：asp.net, asp.net-mvc-3, variables, webgrid

我正在开发一个 MVC3 ASP.Net 应用程序。我试图弄清楚如何设置`Quantity`变量，所以当我将它传递给控制器​​时，`Html.ActionLink`它具有正确的数字。这是视图的代码

```
@model IEnumerable<GreatVideosTrainingApplication.Models.Candy> 
@{
     ViewBag.Title = "Great Videos";
     List<GreatVideosTrainingApplication.Models.Candy> candies = new List<GreatVideosTrainingApplication.Models.Candy>();
     foreach (var candy in Model)
     {
        candies.Add(candy);
     }
     var grid = new WebGrid(candies);
     var Quantity = 0;
}
<p>Welcome To Great Videos! The best source for your favorite DVDs and Blu-Rays</p>
<img src ="/Content/Images/dvd50.jpg" />
<p></p>
<img src="/Content/Images/bluray.jpg" />
<form method="post" action="/ShoppingCart/AddToCandyCart/"+item.CandyID >

 @grid.GetHtml(@columns: grid.Columns(
                                grid.Column("Name"),
                                grid.Column("Price"),
                                grid.Column("Quantity", format: (item) =>  @Html.TextBox("Quantity", @Quantity)),
                                grid.Column("AddToCart", format: (item) => Html.ActionLink("Add To Cart", "AddToCandyCart", "ShoppingCart", new { id = item.CandyID, quantity = @Quantity }, ""))
                    )
)

 </form> 
```

我正在尝试使用 设置数量的值，`Html.TextBox`但它不起作用。请记住，我不懂 javascript，而且我对 MVC3 非常陌生。任何和所有的帮助都非常感谢。

```
 public ActionResult AddToCandyCart(int id, FormCollection values)
    {
        // Add it to the shopping cart
        var quantity = values["Quantity"];
        var cart = ShoppingCart.GetCart(this.HttpContext);
        // Retrieve the video from the database
        var addedCandy = storeDB.Candies.Single(Candy => Candy.CandyID == id);
        cart.AddToCandyCart(addedCandy, int.Parse(quantity));
        // Go back to the main store page for more shopping
        return RedirectToAction("Index");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:51:49.367

包含文本框时，以下代码对我有用。我在使用 html 助手时遇到了问题，所以我直接为输入框编写了代码。我希望这有帮助。

```
grid.Column("Quantity", format: @<text><input name="Quantity" type="text" value="@item.Quantity"</text>)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:05:39.897

通过混合各种来源找出问题所在。想感谢大家。这是视图。

```
@model IEnumerable<GreatVideosTrainingApplication.Models.Candy> 
@{
    ViewBag.Title = "Great Videos";
    List<GreatVideosTrainingApplication.Models.Candy> candies = new List<GreatVideosTrainingApplication.Models.Candy>();
    foreach (var candy in Model)
    {
        candies.Add(candy);
    }
    var grid = new WebGrid(candies);
    var Quantity = 0;
}

<p>Welcome To Great Videos! The best source for your favorite DVDs and Blu-Rays</p>
<img src ="/Content/Images/dvd50.jpg" />
<p></p>
<img src="/Content/Images/bluray.jpg" />
<form method="post" action="../ShoppingCart/AddToCandyCart/" >
    @using (Html.BeginForm()) { 
        @grid.GetHtml(@columns: grid.Columns(
                                        grid.Column("Name"),
                                        grid.Column("Price"),
                                        grid.Column("Quantity", format: @<text><input name="Quantity" type="text" value="@Quantity"</text>),
                                        grid.Column("AddToCart", format: @<text><input type="submit" value="Add To Cart" name="submit" /></text>)
                            )
    )
}
</form> 
```

这是动作控制器

```
 [HttpPost]
 public ActionResult AddToCandyCart(FormCollection values)
 {
        int id = 1;
        string[] quantities = values["Quantity"].Split(','); 
        foreach (var item in quantities)
        {
            try
            {
                int quantity = int.Parse(item);
                if (quantity >= 1)
                {
                    // Add the candy to the shopping cart
                    var addedCandy = storeDB.Candies.Single(Candy => Candy.CandyID == id);
                    var cart = ShoppingCart.GetCart(this.HttpContext);
                    cart.AddToCandyCart(addedCandy, int.Parse(item));
                }
            }
            catch (Exception e)
            {
                return View("Failed");
            }

            id++;
        }
        // Go back to the main store page for more shopping
        return RedirectToAction("Index");
 } 
```

# kyotocabinet - 1亿条记录后，Kyoto TreeDB插入速度减慢

> ID：11317459
> 
> 赞同：1
> 
> 时间：2012-07-03T19:03:02.463
> 
> 标签：kyotocabinet

我在京都 TreeDB 中插入记录。键只是一个计数器，我递增并且值是固定的。

在 1 亿条记录之后，插入逐渐变慢。有没有人尝试在京都内阁插入更多记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:15:40.347

您可能会遇到哈希冲突。如果发生这种情况，它会将记录放入溢出区域。我相信这会退化为搜索列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:19:43.307

HashDB 比 TreeDB 更节省内存。由于您使用的是 TreeDB，您可能需要修改缓存选项以保持快速插入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T08:24:21.553

您是否相应地增加了 bnum 和 msiz ？

我的插入性能非常差，msiz 值太低。

# ios - 如何告诉静态单元格在 Xcode 中打开特定视图？

> ID：11317468
> 
> 赞同：2
> 
> 时间：2012-07-03T19:03:50.757
> 
> 标签：ios, xcode, uitableview

我有一个带有两个静态单元格的表格视图控制器。每一个，当点击时，应该打开一个预定的视图。每个单元格都应该像标签栏中的一个元素一样，如果这更容易理解的话。我尝试使用 push segue 将每个单元格连接到其视图，但看起来当我这样做时，情节提要正在为整个表格设置推送。

如何将每个单元格连接到打开的唯一视图？

（我愿意在常规视图控制器上使用 2 个按钮来实现这一点，而不是表。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T21:00:23.807

在你的类中采用 UITableViewDelegate 协议，并实现

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    if ((indexPath.section == customSection) && (indexPath.row == customRow))
    {
        // Your custom action here
    }
} 
```

# java - How do I update my .jsp files without restarting the whole JBoss server?

> ID：11317469
> 
> 赞同：3
> 
> 时间：2012-07-03T19:04:02.643
> 
> 标签：java, eclipse, jsp, jboss

How do I update minor, tiny changes I've just made in a .jsp file, without restarting the whole JBoss server? This is just a private server on my (pretty slow) PC. Up until now, I've been able to click this little icon that says "restart module". Now, this icon is grayed out.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T19:15:47.877

只需替换您的 .jsp 或 .war 文件即可。JBoss 在检测更新文件方面做得很好，并将重新部署和重新编译您的 jsps。

哦，请记住，您的浏览器可能已设置为缓存您的文件。在这种情况下，请确保点击刷新按钮或打开浏览器或选项卡的新实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-24T10:36:34.470

我发现它也有助于配置 JSP Servlet 以在任何更改时重新编译。这不是您在生产中想要的东西，但它确实加快了开发速度：

```
<servlet>
    <servlet-name>jsp</servlet-name>
    <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>
    <init-param>
        <param-name>checkInterval</param-name>
        <param-value>1</param-value>
    </init-param>
    <init-param>
        <param-name>modificationTestInterval</param-name>
        <param-value>1</param-value>
    </init-param>
</servlet> 
```

如[对“没有战争文件的 JSP 部署”的回答所示](https://stackoverflow.com/a/5786798/1023341)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T04:49:08.293

大多数 Web 服务器都支持`Hot deployment and dynamic reloading`. 它将提取服务器工作目录中的 WAR 文件。你可以`replace your Modified JSP there to get picket at runtime`。

可能重复。[看这里](https://stackoverflow.com/questions/10996977/jsp-deployment-without-war-file/10997149#10997149)

# c# - control dialogbox of an external application

> ID：11317471
> 
> 赞同：2
> 
> 时间：2012-07-03T19:04:08.170
> 
> 标签：c#, dialog

I'm writing a program in C# to automate another application. I use user32 api. When the external application needs user input, my C# program fills the boxes and presses the buttons. When a new window comes up, I can find it and it's controls using findwindow() and findwindowex() function but when this dialog comes up (in the picture) I cannot find the controls in it(the buttons). Even UI Spy cannot show them. I tried to send key events to this window but nothing happened. Can you give me some tips how to go on?

![enter image description here](../Images/0f96a79bbccc84d5c067cc2f1fb1611d.png)

# c - 计算参数数量的宏

> ID：11317474
> 
> 赞同：12
> 
> 时间：2012-07-03T19:04:16.217
> 
> 标签：c, macros, arguments, variadic

我有一个来自第三方 C 库的可变参数函数：

```
int func(int argc, ...); 
```

`argc`表示传递的可选参数的数量。[正如这里](https://groups.google.com/forum/?fromgroups#!topic/comp.std.c/d-6Mj5Lko_s)所建议的，我用一个计算参数数量的宏来包装它。为了阅读方便，这里是宏：

```
#define PP_ARG_N( \
          _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10, \
         _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, \
         _21, _22, _23, _24, _25, _26, _27, _28, _29, _30, \
         _31, _32, _33, _34, _35, _36, _37, _38, _39, _40, \
         _41, _42, _43, _44, _45, _46, _47, _48, _49, _50, \
         _51, _52, _53, _54, _55, _56, _57, _58, _59, _60, \
         _61, _62, _63, N, ...) N

#define PP_RSEQ_N()                                        \
         63, 62, 61, 60,                                   \
         59, 58, 57, 56, 55, 54, 53, 52, 51, 50,           \
         49, 48, 47, 46, 45, 44, 43, 42, 41, 40,           \
         39, 38, 37, 36, 35, 34, 33, 32, 31, 30,           \
         29, 28, 27, 26, 25, 24, 23, 22, 21, 20,           \
         19, 18, 17, 16, 15, 14, 13, 12, 11, 10,           \
          9,  8,  7,  6,  5,  4,  3,  2,  1,  0

#define PP_NARG_(...)    PP_ARG_N(__VA_ARGS__)    

#define PP_NARG(...)     PP_NARG_(__VA_ARGS__, PP_RSEQ_N()) 
```

我像这样包装它：

```
#define my_func(...)     func(PP_NARG(__VA_ARGS__), __VA_ARGS__) 
```

该`PP_NARG`宏适用于接受一个或多个参数的函数。例如，`PP_NARG("Hello", "World")`计算结果为`2`。

问题是，当没有传递参数时，`PP_NARG()`计算结果为`1`而不是`0`。
我了解[这个宏是如何工作](http://http://efesx.com/2010/07/17/variadic-macro-to-count-number-of-arguments/)的，但我想不出修改它的想法，以便它在这种情况下也能正确运行。

有任何想法吗？

* * *

**编辑**：
我找到了一种解决方法`PP_NARG`，并将其作为答案发布。
我仍然有包装可变参数函数的问题。当`__VA_ARGS__`为空时，`my_func`扩展为`func(0, )`触发编译错误。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-31T14:21:51.273

另一种既不使用`sizeof`也不使用 GCC 扩展的可能性是将以下内容添加到您的代码中

```
#define PP_COMMASEQ_N()                                    \
          1,  1,  1,  1,                                   \
          1,  1,  1,  1,  1,  1,  1,  1,  1,  1,           \
          1,  1,  1,  1,  1,  1,  1,  1,  1,  1,           \
          1,  1,  1,  1,  1,  1,  1,  1,  1,  1,           \
          1,  1,  1,  1,  1,  1,  1,  1,  1,  1,           \
          1,  1,  1,  1,  1,  1,  1,  1,  1,  1,           \
          1,  1,  1,  1,  1,  1,  1,  1,  0,  0

#define PP_COMMA(...)    ,

#define PP_HASCOMMA(...)                                   \
          PP_NARG_(__VA_ARGS__, PP_COMMASEQ_N())

#define PP_NARG(...)                                       \
          PP_NARG_HELPER1(                                 \
              PP_HASCOMMA(__VA_ARGS__),                    \
              PP_HASCOMMA(PP_COMMA __VA_ARGS__ ()),        \
              PP_NARG_(__VA_ARGS__, PP_RSEQ_N()))

#define PP_NARG_HELPER1(a, b, N)    PP_NARG_HELPER2(a, b, N)
#define PP_NARG_HELPER2(a, b, N)    PP_NARG_HELPER3_ ## a ## b(N)
#define PP_NARG_HELPER3_01(N)    0
#define PP_NARG_HELPER3_00(N)    1
#define PP_NARG_HELPER3_11(N)    N 
```

结果是

```
PP_NARG()       // expands to 0
PP_NARG(x)      // expands to 1
PP_NARG(x, 2)   // expands to 2 
```

### 解释：

这些宏中的技巧是，`PP_HASCOMMA(...)`当使用零个或一个参数调用时扩展为 0，当使用至少两个参数调用时扩展为 1。为了区分这两种情况，我使用`PP_COMMA __VA_ARGS__ ()`了 ，它在为空时返回逗号，在非空`__VA_ARGS__`时不返回任何内容。`__VA_ARGS__`

现在有三种可能的情况：

1.  `__VA_ARGS__`为空：`PP_HASCOMMA(__VA_ARGS__)`返回 0 并`PP_HASCOMMA(PP_COMMA __VA_ARGS__ ())`返回 1。

2.  `__VA_ARGS__`包含一个参数：`PP_HASCOMMA(__VA_ARGS__)`返回 0 并`PP_HASCOMMA(PP_COMMA __VA_ARGS__ ())`返回 0。

3.  `__VA_ARGS__`包含两个或多个参数：`PP_HASCOMMA(__VA_ARGS__)`返回 1 并`PP_HASCOMMA(PP_COMMA __VA_ARGS__ ())`返回 1。

`PP_NARG_HELPERx`只需要宏来解决这些情况。

### 编辑：

为了解决这个`func(0, )`问题，我们需要测试我们是否提供了零个或多个参数。宏在`PP_ISZERO`这里发挥作用。

```
#define PP_ISZERO(x)    PP_HASCOMMA(PP_ISZERO_HELPER_ ## x)
#define PP_ISZERO_HELPER_0    , 
```

现在让我们定义另一个宏，它将参数数量添加到参数列表中：

```
#define PP_PREPEND_NARG(...)                               \
          PP_PREPEND_NARG_HELPER1(PP_NARG(__VA_ARGS__), __VA_ARGS__)
#define PP_PREPEND_NARG_HELPER1(N, ...)                    \
          PP_PREPEND_NARG_HELPER2(PP_ISZERO(N), N, __VA_ARGS__)
#define PP_PREPEND_NARG_HELPER2(z, N, ...)                 \
          PP_PREPEND_NARG_HELPER3(z, N, __VA_ARGS__)
#define PP_PREPEND_NARG_HELPER3(z, N, ...)                 \
          PP_PREPEND_NARG_HELPER4_ ## z (N, __VA_ARGS__)
#define PP_PREPEND_NARG_HELPER4_1(N, ...)  0
#define PP_PREPEND_NARG_HELPER4_0(N, ...)  N, __VA_ARGS__ 
```

再次需要许多助手来将宏扩展为数值。最后测试一下：

```
#define my_func(...)  func(PP_PREPEND_NARG(__VA_ARGS__))

my_func()          // expands to func(0)
my_func(x)         // expands to func(1, x)
my_func(x, y)      // expands to func(2, x, y)
my_func(x, y, z)   // expands to func(3, x, y, z) 
```

### 在线示例：

[http://coliru.stacked-crooked.com/a/73b4b6d75d45a1c8](http://coliru.stacked-crooked.com/a/73b4b6d75d45a1c8)

### 也可以看看：

另请查看[P99](http://p99.gforge.inria.fr/p99-html/index.html)项目，它具有更高级的预处理器解决方案，[例如这些](http://p99.gforge.inria.fr/p99-html/p99__args_8h_source.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T22:35:07.397

可以在 GCC 中使用[## **VA_ARGS**](http://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html)扩展：

```
#define PP_ARG_N( \
          _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10, \
         _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, \
         _21, _22, _23, _24, _25, _26, _27, _28, _29, _30, \
         _31, _32, _33, _34, _35, _36, _37, _38, _39, _40, \
         _41, _42, _43, _44, _45, _46, _47, _48, _49, _50, \
         _51, _52, _53, _54, _55, _56, _57, _58, _59, _60, \
         _61, _62, _63, N, ...) N

/* Note 63 is removed */
#define PP_RSEQ_N()                                        \
         62, 61, 60,                                       \
         59, 58, 57, 56, 55, 54, 53, 52, 51, 50,           \
         49, 48, 47, 46, 45, 44, 43, 42, 41, 40,           \
         39, 38, 37, 36, 35, 34, 33, 32, 31, 30,           \
         29, 28, 27, 26, 25, 24, 23, 22, 21, 20,           \
         19, 18, 17, 16, 15, 14, 13, 12, 11, 10,           \
          9,  8,  7,  6,  5,  4,  3,  2,  1,  0

#define PP_NARG_(...)    PP_ARG_N(__VA_ARGS__)    

/* Note dummy first argument _ and ##__VA_ARGS__ instead of __VA_ARGS__ */
#define PP_NARG(...)     PP_NARG_(_, ##__VA_ARGS__, PP_RSEQ_N())

#define my_func(...)     func(PP_NARG(__VA_ARGS__), __VA_ARGS__) 
```

现在`PP_NARG(a, b, c)`给出 3 并`PP_NARG()`给出 0。

不幸的是，我没有看到一种让它普遍工作的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T08:28:33.520

我想出了以下解决方法`PP_NARG`：

```
#define PP_NARG(...)     (sizeof(#__VA_ARGS__) - 1 ?       \
    PP_NARG_(__VA_ARGS__, PP_RSEQ_N()) : 0) 
```

它字符串化`__VA_ARGS__`，所以如果它是空的，它的长度等于 1（因为`#__VA_ARGS__ == '\0'`）。
[它适用于`-std=c99 -pedantic`](http://ideone.com/39f0K).

我仍然有包装可变参数函数的问题。当`__VA_ARGS__`为空时，`my_func`扩展为`func(0, )`触发编译错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-04T00:07:53.003

不幸的是，关于 Mehrwolf 答案的完整示例不能在 VS2010 上编译，也不能在 VS2015 上编译（我也在[这个](http://webcompiler.cloudapp.net/)在线 VS 编译器上尝试过）。解决这个问题的另一种方法是使用在 MS 编译器中也可用的非标准扩展，就像我对类似问题的[回答一样，它允许生成在各种编译器上编译的跨平台代码。](https://stackoverflow.com/questions/26682812/argument-counting-macro-with-zero-arguments-for-visualstudio-2010/26685339#26685339)此外，与引用的答案不同的是，`PP_NARG((a, b, c))`使用扩展（在 MS 和 gcc/clang 编译器中）的结果是 1 而不是 0。

# border - Margins with LineBorders

> ID：11317478
> 
> 赞同：0
> 
> 时间：2012-07-03T19:04:30.230
> 
> 标签：border

I want to have a JTextArea with a LineBorder and leave a little padding between the text and the LineBorder.

Is this possible with the standard classes or do I need a custom "DoubleLine" border (one with the color and one with the margin)?

Some sample code is below...

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.Insets;

import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
import javax.swing.JTextArea;
import javax.swing.SwingConstants;
import javax.swing.SwingUtilities;
import javax.swing.border.Border;
import javax.swing.border.LineBorder;

public class TextAreaLineBorder extends JFrame
{
    private static final long   serialVersionUID    = 1L;

    private class MyPanel extends JPanel
    {

        private static final long   serialVersionUID    = 1L;

        public MyPanel()
        {
            setLayout(new FlowLayout());

            JTextArea ta = new JTextArea("Some text");
            ta.setSize(200, 50);

            boolean useDefaultBorder = false;

            if (useDefaultBorder)
            {
                // Setting the margin works fine, with the default border
                ta.setMargin(new Insets(12, 12, 12, 12));

                Border b = ta.getBorder();
                Insets defaultInsets = b.getBorderInsets(ta);
                System.out.println("Default Insets: "
                        + defaultInsets);

            }
            else
            {
                 // Try using a non-default LineBorder
                 LineBorder lb = (LineBorder) BorderFactory.createLineBorder(Color.YELLOW, 2);
                 ta.setBorder(lb);

                 // TODO: What should be done so that the LineBorder has Insets?
                 ta.setMargin(new Insets(12, 12, 12, 12));

                 Insets lineBorderInsets = lb.getBorderInsets(ta);
                 System.out.println("LineBorder Insets: " + lineBorderInsets);
            }
            add(ta);
        }
    }

    public TextAreaLineBorder()
    {
        setResizable(true);

        setName(getClass().getSimpleName());
        setTitle("My Frame");
        setSize(300, 300);

        JTabbedPane tabbedPane = new JTabbedPane(SwingConstants.TOP);

        // Add the panel
        tabbedPane.addTab("Button panel", new MyPanel());

        add(tabbedPane, BorderLayout.CENTER);

        getContentPane().add(tabbedPane);
    }

    private static void createAndShowGUI()
    {
        // Create and set up the window.
        TextAreaLineBorder frame = new TextAreaLineBorder();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }

    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                try
                {
                    createAndShowGUI();
                }
                catch (Exception e)
                {
                    e.printStackTrace();
                    System.exit(0);
                }
            }
        });
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-20T21:51:46.760

您可以将 JTextArea 添加到 JScrollPane 并在其周围放置边框。

```
JTextArea JTA = new JTextArea();
JScrollPane JSP = new JScrollPane(JTA);

JSP.setBorder(BorderFactory.createLineBorder(Color.blue)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T22:44:21.873

我创建了一个类来帮助我解决这个问题。相同的解决方案可能适用于所有 JTextComponents。

```
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Date;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.border.Border;
import javax.swing.border.CompoundBorder;
import javax.swing.border.EmptyBorder;
import javax.swing.border.LineBorder;

public class JTextAreaWithPaddedBorder extends JTextArea
{
    // **********************************************************************
    // To modify the sample program using GWT Designer, uncomment this code
    // **********************************************************************
    // public JTextAreaWithPaddedBorder()
    // {
    // }
    //
    // /**
    // * Bogus Constructor
    // *
    // * @wbp.parser.constructor (Use this method in the GWT Designer)
    // */
    //
    // public JTextAreaWithPaddedBorder(int ignore)
    // {
    // createAndShowGUI();
    // }
    // **********************************************************************
    // To modify the sample program using GWT Designer, uncomment this code
    // **********************************************************************

    public static void createAndShowGUI()
    {
        // Create and set up the frame
        JFrame frmTextareawithpaddedborder = new JFrame();
        frmTextareawithpaddedborder.setTitle("TextAreaWithPaddedBorder");
        frmTextareawithpaddedborder.setName("frmTextareawithpaddedborder");
        frmTextareawithpaddedborder.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frmTextareawithpaddedborder.setBounds(100, 100, 514, 495);
        frmTextareawithpaddedborder.setResizable(false);

        JPanel contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        frmTextareawithpaddedborder.setContentPane(contentPane);

        JScrollPane scrollPane = new JScrollPane();
        scrollPane.setBounds(5, 5, 490, 395);
        scrollPane.setName("scrollPane");
        contentPane.add(scrollPane);

        final JTextAreaWithPaddedBorder textArea = new JTextAreaWithPaddedBorder();

        textArea.setBorder(new LineBorder(new Color(0, 0, 0), 2));
        textArea.setName("textArea");
        textArea.setLineWrap(true);
        textArea.setWrapStyleWord(true);
        String text = "The iPhone is a line of smartphones designed and marketed by Apple Inc. The first iPhone was unveiled by Steve Jobs, then CEO of Apple, on January 9, 2007,[1] and released on June 29, 2007\. The 5th generation iPhone, the iPhone 4S, was announced on October 4, 2011, and released 10 days later.  An iPhone can function as a video camera (video recording was not a standard feature until the iPhone 3GS was released), a camera phone, a portable media player, and an Internet client with email and web browsing capabilities, can send texts and receive visual voicemail, and has both Wi-Fi and cellular data (2G and 3G) connectivity. The user interface is built around the device's multi-touch screen, including a virtual keyboard rather than a physical one.";
        textArea.setText(text);
        textArea.append("\n\nThis is the text within the TextArea.  As the border of the TextArea is changed, the text should display properly.");
        contentPane.setLayout(null);
        textArea.setBackground(Color.WHITE);
        scrollPane.setViewportView(textArea);

        btnChangeMargins = new JButton("Change Margins");
        btnChangeMargins.setBounds(13, 430, 152, 23);
        btnChangeMargins.setName("btnChangeMargins");
        btnChangeMargins.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e)
            {
                long t = (new Date()).getTime() % 100;
                int top = (int) (t * 18) % 15;
                int bottom = (int) (t * 34) % 15;
                int left = (int) (t * 52) % 15;
                int right = (int) (t * 52) % 15;
                Insets insets = new Insets(top, left, bottom, right);
                textArea.setMargin(insets);
            }
        });
        contentPane.add(btnChangeMargins);

        btnChangeBGColor = new JButton("Change BG Color");
        btnChangeBGColor.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e)
            {
                long t = (new Date()).getTime() % 100;
                int r = 100 + (int) (t * 18) % 100;
                int g = 100 + (int) (t * 34) % 100;
                int b = 100 + (int) (t * 52) % 100;
                Color c = new Color(r, g, b);
                textArea.setBackground(c);
            }
        });

        btnChangeBGColor.setBounds(178, 430, 152, 23);
        btnChangeBGColor.setName("btnChangeBGColor");
        contentPane.add(btnChangeBGColor);

        btnChangeBorder = new JButton("Change Border");
        btnChangeBorder.setBounds(343, 430, 152, 23);
        btnChangeBorder.setName("btnChangeBorder");
        btnChangeBorder.addActionListener(new ActionListener()
        {
            int last    = 0;

            @Override
            public void actionPerformed(ActionEvent e)
            {
                Border nextBorder;
                switch (last++ % 8)
                {
                    case 0:
                        nextBorder = BorderFactory.createLoweredBevelBorder();
                        break;

                    case 1:
                        nextBorder = BorderFactory.createEmptyBorder();
                        break;
                    case 2:
                        nextBorder = BorderFactory.createEtchedBorder();
                        break;
                    case 3:
                        nextBorder = BorderFactory.createLineBorder(Color.black, 2);
                        break;
                    case 4:
                        nextBorder = BorderFactory.createRaisedBevelBorder();
                        break;
                    case 5:
                        nextBorder = BorderFactory.createCompoundBorder(BorderFactory.createLineBorder(Color.red, 3), BorderFactory
                                .createLoweredBevelBorder());
                        break;
                    case 6:
                        nextBorder = BorderFactory.createMatteBorder(2, 15, 1, 15, new Color(255, 0, 0));
                        break;
                    case 7:
                        nextBorder = BorderFactory.createTitledBorder("Titled Border");
                        break;

                    default:
                        nextBorder = BorderFactory.createTitledBorder("Titled Border");

                }

                textArea.setBorder(nextBorder);
            }
        });
        contentPane.add(btnChangeBorder);
        frmTextareawithpaddedborder.setVisible(true);
    }

    private static final long   serialVersionUID    = 1L;
    private static JButton      btnChangeMargins;
    private static JButton      btnChangeBGColor;
    private static JButton      btnChangeBorder;

    @Override
    public void setBorder(Border border)
    {
        int paddingWidth = 0;

        Border currentBorder = getBorder();
        if (currentBorder != null)
        {
            // The padding width will be the minimum width specified in the insets
            Insets insets = getMargin();
            paddingWidth = Math.min(insets.bottom, insets.top);
            paddingWidth = Math.min(paddingWidth, insets.left);
            paddingWidth = Math.min(paddingWidth, insets.right);
        }
        /*
         * Use a LineBorder for the padding.
         * 
         * The color must be the same as the background color of the TextComponent
         */
        super.setBorder(new CompoundBorder(border, BorderFactory.createLineBorder(getBackground(), paddingWidth)));
    }

    @Override
    public void setBackground(Color c)
    {
        super.setBackground(c);
        Border b = getBorder();
        if (b != null)
        {
            setBorder(((CompoundBorder) b).getOutsideBorder());
        }
    }

    @Override
    public void setMargin(Insets m)
    {
        super.setMargin(m);
        Border b = getBorder();
        if (b != null)
        {
            setBorder(((CompoundBorder) b).getOutsideBorder());
        }
    }

    /**
     * Launch the application.
     */
    public static void main(String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                try
                {
                    createAndShowGUI();
                }
                catch (Exception e)
                {
                    e.printStackTrace();
                }
            }
        });
    }

} 
```

# c# - C# - How do I invoke a method on a different thread from a Timer's Elapsed event?

> ID：11317479
> 
> 赞同：0
> 
> 时间：2012-07-03T19:04:38.027
> 
> 标签：c#, timer, multithreading

I have a `System.Timers.Timer` object, and within its Elapsed method I want to call `myObject.TriggerEvent(...)`, but I want that invocation to happen on the thread `myObject` was created on. Is there an easy way to do this? And is this a bad idea for any reason? `myObject` is basically an event manager service, so I want it to trigger events on the thread it was created on. The reason I'm using the timer is because I have another that is polling a service for updates, which it notifies `myObject` of via the `TriggerEvent` method.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:13:34.597

您可以制作自己的[SynchronizationContext](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)实现并将其实例提供给`myObject.TriggerEvent`. 如果您`myObject`在 WPF、SL 或 WinForms 应用程序中使用，您可以使用它们现有的 SynchronizationContext 类实现并`myObject`在 GUI 线程上创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:05:20.853

我建议使用[Dispatcher](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.aspx)。它是在 WPF 的上下文中创建的，但没有理由不能在其他地方使用它。我已经用过几次了，但我总是有一个消息泵（Win32），但我相信它也可以在服务上下文中使用（IIS 等）——但是我还没有写过这样的代码，所以YMMV。[这是一篇从 WPF 角度看的好文章](http://msdn.microsoft.com/en-us/magazine/cc163328.aspx)。

埃里克

# eclipse - “打开下一个搜索结果”的键盘快捷键？

> ID：11317481
> 
> 赞同：6
> 
> 时间：2012-07-03T19:04:44.720
> 
> 标签：eclipse

Eclipse 具有在 Workspace(++)、项目、文件或工作集中搜索文本的`Ctrl`强大`Alt`功能`G`。

结果整齐地显示在搜索选项卡/视图中，当我*双击*（即**鼠标**）特定行时，文件（在其中找到搜索文本）在搜索文本所在的位置打开。

该双击是否有**键盘快捷键？**打开**下**一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T01:26:31.120

据我所知，没有一个键盘快捷键可以执行此操作，但其中有两个可以按顺序工作。

1.  转到窗口>首选项>键
2.  搜索“显示视图搜索”
3.  设置一些自定义的键盘快捷键，因为默认的快捷键太长，效率不高（我喜欢使用 Alt+Shift+S）
4.  执行搜索
5.  聚焦搜索视图，双击第一个结果
6.  当您准备好转到下一项时，使用键盘快捷键再次显示搜索视图（Alt+Shift+S 对我来说）
7.  然后按“Ctrl+。”
8.  此快捷方式将显示下一个结果并需要打开一个新文件。

因此，使用此序列，您可以使用两个键盘快捷键（Alt+Shift+S 然后 Ctrl+.）来执行您想要的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T01:34:09.127

[**在此处**](http://devcheatsheet.com/tag/eclipse/)查看 v2.1、v3.0 和 v3.1的**Eclipse 键盘快捷键PDF 列表**[](http://devcheatsheet.com/tag/eclipse/)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T14:39:28.727

@gamerson 有正确的答案，但对于未来，我想确保您知道两个关键的元键盘快捷键：

*   Ctrl-Shift-L（Mac 上的 Command-Shift-L）- 打开可用快捷键的可搜索列表。
*   Ctrl-3（Mac 上的 Command-3）-[快速访问](http://eclipsenuggets.blogspot.com/2007/05/quick-access-ctrl3-is-bliss-are-you-one.html)为您提供了一个可搜索的、按优先级排序的一堆东西的列表 - 命令、菜单项、窗口、选项卡等。它非常有用。**

# java - 为什么纬度和经度值转换为 1E6？

> ID：11317483
> 
> 赞同：3
> 
> 时间：2012-07-03T19:04:50.400
> 
> 标签：java, android, geolocation

我在我的 android 应用程序中使用纬度/经度。为什么人们将它们转换为 1E6？（即* 1000000）这似乎是一个不必要的步骤。有什么好处？值不能简单地存储为双精度或浮点数吗？请解释。谢谢 -

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T19:12:43.013

> 为什么人们将它们转换为 1E6？

因为 Google Maps 插件 API 需要它。

> 有什么好处？值不能简单地存储为双精度或浮点数吗？

您可能还太年轻，不记得台式电脑（更不用说笔记本电脑）何时可能没有浮点协处理器。您会选择购买 486SX 或 486DX CPU，SX 变体更便宜但缺少浮点协处理器。没有浮点协处理器的 CPU 仍然可以进行浮点计算，但*速度很慢*。英特尔在创建奔腾处理器时放弃了整个 SX/DX 拆分，因此对于大多数传统 PC 来说，这已经不是问题了一段时间了。

然而，作为前几代 Android 设备核心的 ARMv5 CPU 也缺少浮点协处理器。尝试在此类设备上进行 Java 浮点数学运算速度很慢，对于 Google 地图来说太慢了。因此，他们将单位从度数转换为微度数，以便他们可以在定点数学中进行所有计算，速度快得可以接受。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T19:13:49.100

前段时间我使用 GPS 设备，我曾经进行过这种转换，主要是出于以下原因：

1.  具有大于 1E6 的值并没有真正的意义，除非您拥有最新和最出色的军用 GPS 设备，而且精度很高
2.  `1E6`可以容纳`int`4 个字节的空间，如果您使用的是`double`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:07:56.190

根据 Google 的 API 选择，超过 1E6 的精度不够准确。它为各种地图点节省了空间，例如谷歌等复杂地图系统所需的地图点。

# jquery - $.ajax POST 在 Internet Explorer 中引发错误，但在其他浏览器中没有

> ID：11317484
> 
> 赞同：0
> 
> 时间：2012-07-03T19:04:52.713
> 
> 标签：jquery, ajax, json, asp.net-mvc-3

您好我正在尝试编写一种将信息发布到另一个域并获得简单响应的方法。我有这个功能在 Chrome 和 Firefox 中工作，但所有版本的 IE 都不能正常工作。这是我的代码：

```
function getCode(email, password, firstname, lastname){
    $.support.cors = true;
    $.ajax({
        type: "POST",
        cache: false,
        url: "http://localhost:61660/Account/TestMemberStatus",
        data: {email:  email, password: password, firstname: firstname, lastname: lastname },
        dataType: "json",
        success: function(result) {
            ContinuePart2(result, email, firstname, lastname);
        },
        error: function(result){
            ContinuePart2("error");
        }
    });
} 
```

我正在使用 jQuery 1.7.2，我在 IE 中收到的错误是“错误：访问被拒绝。\r\n”

后端是一个 .NET MVC3 站点，它具有一个返回 JSON 字符串的公开方法。我添加了以下标题：

```
filterContext.RequestContext.HttpContext.Response.AddHeader("Access-Control-Allow-Origin", "*");
filterContext.RequestContext.HttpContext.Response.AddHeader("Access-Control-Allow-Credentials", "true"); 
```

更新：这是一个跨域调用

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:39:27.487

Internet Explorer 仅部分支持 CORS。从 IE10 开始，您可能希望获得对 XHR 的完整 CORS 支持。例如，IE8通过专有的 XDomainRequest 对象[支持 CORS 。](http://msdn.microsoft.com/en-us/library/cc288060%28VS.85%29.aspx)

# ios - Handle tap gesture with an argument iphone / ipad

> ID：11317485
> 
> 赞同：3
> 
> 时间：2012-07-03T19:04:55.707
> 
> 标签：ios, uitapgesturerecognizer

My problem is similar to [this one](https://stackoverflow.com/questions/3160489/handle-tap-gesture-with-an-argument-iphone-ipad) with the only exception - my ImageView appears at the same place inside the window with different content in it. Content has unique identifier which I want to use to call content-specific actions.

To quickly recap, the guy is looking for a way to pass a parameter into the selector section of the initWithTarget method.

```
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self  action:@selector(handleTapGesture:itemSKU:)]; 
```

How can I pass an attribute to the handleTapGesture method or how do I read the unique value otherwise?

Any thoughts appreciated.

EDIT: The content is being pulled from a database and is different every time. The unique identifier is pretty much like an SSN - doesn't repeat.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T19:19:30.803

您可以`UIImageView`使用您的内容标识符设置标签属性，然后从选择器中读取该信息。

```
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self  action:@selector(handleTapGesture:)];

[imageView addGestureRecognizer:tapGesture];
imageView.tag = 0; 
```

接着：

```
- (void)handleTapGesture:(UITapGestureRecognizer *)sender
{
    if( ((UIImageView *) sender.view).tag == 0 ) // Check the identifier
    {
        // Your code here
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T00:18:02.737

尝试扩展`UIImageView`并添加您需要的任何值（作为属性）和方法。

```
@interface UIImageViewWithId: UIImageView

@property int imageId;

@end 
```

然后，如果您想变得更加出色，您可能希望将您的行为封装在这个“小部件”的实现中。这将使您保持`ViewController`整洁，并允许您跨多个控制器使用此小部件。

```
@implementation UIImageViewWithId

@synthesize imageId;

- (void)handleTapGesture:(UIGestureRecognizer *)gesture {
   NSLog("Hey look! It's Id #%d", imageId);
}

@end 
```

然后只需将水龙头委托给`UIImageViewWithId`个人

```
UIImageViewWithId *imageView = [[UIImageViewWithId ... ]]
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget: imageView  action:@selector(handleTapGesture:)]; 
```

# c++ - What does a variable to a struct contains?

> ID：11317486
> 
> 赞同：1
> 
> 时间：2012-07-03T19:05:07.557
> 
> 标签：c++, variables, types, struct

Say I have this simple program

```
#include <iostream>
using namespace std;

struct teststruct
{
   int n;
   long l;
   string str;
};

int main()
{
   teststruct wc;

   wc.n = 1;
   wc.l = 1.0;
   wc.str = "hello world";

   //cout << wc << endl; // what is wc by itself?
   cout << &wc;  // contains the memory address to the struct?
   return 0;
} 
```

I'm trying to understand what is in wc? When I declare a struct type with the variable name wc; what is wc? Is it a pointer to a memory address? I've tried to cout the contents, but the code gives me an error. Can you please clarify what is wc

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T19:15:20.260

> 什么是厕所？它是指向内存地址的指针吗？

不，它是一个大到足以容纳所有成员的存储块`teststruct`。

在这种情况下，它具有*自动存储*，这意味着它与包含它的代码块一样长 - 在这种情况下，直到`main()`. 它存储位置的详细信息是特定于实现的，但实际上它通常存储在线程堆栈的临时区域（*堆栈帧*）中，在函数开始时创建并在函数退出时销毁。

成员如何在该存储中定位的确切细节也是特定于实现的。

> 我试图找出内容，但代码给了我一个错误。

这仅适用于`<<`运算符重载的类型。标准库对所有基本类型和指针以及某些库类型（如`std::string`; 但是如果你想支持你自己的类型，那么你需要提供你自己的重载，例如：

```
std::ostream & operator<<(std::ostream & s, teststruct const & t) {
    return s << t.n << ',' << t.l << ',' << t.str;
}

cout << wc << endl; // prints "1,1,hello world" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T19:06:41.683

`wc``teststruct`是自动存储类型的实例。每个其他细节都是特定于实现的，但在大多数情况下，实现使用堆栈作为自动存储区域。

`&wc`是 type 的表达式`teststruct *`，导致`wc`'s 地址。

至于未问的问题（你为什么不问它？）：要输出结构的内容，你必须一一输出它的成员：

```
cout << wc.n << ", " << wc.l << ", " << wc.str << endl; 
```

但是，您的代码似乎存在误解；`1.0`是 type 的字面量`float`，也就是浮点数。您确定这是要存储在`long`变量中的内容吗？如果您想要`long`文字，请使用`1L`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:14:14.767

将 的实例`teststruct`视为一个连续的内存区域，用于包含其成员变量的值。打印时

```
 cout << &wc; 
```

您正在输出变量的*地址*，即存储变量的内存位置。这是一个简单的答案，可能充满了详细的技术错误，但您问题的性质和措辞表明它可能为您描绘了一幅有用的画面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T19:06:16.263

`wc``teststruct`是在堆栈上分配的类型的对象

# asp.net-mvc-3 - MVC3 自定义错误页面给出空白结果

> ID：11317487
> 
> 赞同：5
> 
> 时间：2012-07-03T19:05:10.807
> 
> 标签：asp.net-mvc-3, error-handling

[使用此处](https://stackoverflow.com/questions/5226791/custom-error-pages-on-asp-net-mvc3)发布的博客和[此处](http://blog.davebouwman.com/2011/04/21/custom-404-pages-for-asp-net-mvc-3/)的主题，我创建了一个控制器，该控制器应处理我的所有错误页面。

在我的 Global.asax.cs 中，我有以下代码：

```
protected void Application_Error()
        {
            var exception = Server.GetLastError();
            var httpException = exception as HttpException;
            var routeData = new RouteData();

            Response.Clear();
            Server.ClearError();

            routeData.Values["controller"] = "Error";
            routeData.Values["action"] = "General";
            routeData.Values["exception"] = exception;
            Response.StatusCode = 500;

            if (httpException != null)
            {
                Response.StatusCode = httpException.GetHttpCode();
                switch (Response.StatusCode)
                {
                    case 403:
                        routeData.Values["action"] = "Http403";
                        break;
                    case 404:
                        routeData.Values["action"] = "Http404";
                        break;
                }
            }

            // Avoid IIS7 getting in the middle
            Response.TrySkipIisCustomErrors = true;
            IController errorsController = new ErrorController();
            HttpContextWrapper wrapper = new HttpContextWrapper(Context);
            var rc = new RequestContext(wrapper, routeData);
            errorsController.Execute(rc);
        } 
```

我的 ErrorController 看起来像这样：

```
public class ErrorController : BaseController
    {
        /// <summary>
        /// Returns a default view for not having access.
        /// </summary>
        public ActionResult Unauthorized()
        {
            BaseModel viewModel = new BaseModel
                                      {
                                          LoginModel = new LogonModel(),
                                          ProfessionsTopX = GetTopXProfessions()
                                      };
            return View(viewModel);
        }

        public ActionResult General(Exception exception)
        {
            return View("Exception", exception);
        }

        public ActionResult Http404()
        {
            //This line works
            //return Content("Not found", "text/plain");

            //This line presents a blank page
            return View("404","_Layout");
        }

        public ActionResult Http403()
        {
            return View("403", "_Layout");
        }

    } 
```

而我的 Razor View 只包含下面的一段 html；

```
@{
    ViewBag.Title = "404";
}

<h2>404</h2>

This is a 404 page! 
```

当我使用返回内容时，我得到一个纯文本输出，告诉我我正在查看 404 页。但是，我希望 404 页面适合我的设计的其余部分，所以我想使用我自己的视图。但是，一旦我使用返回视图，我就会得到一个空白页。我希望遗漏一些非常明显的东西，但我没有看到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T05:57:44.847

我遇到了同样的问题，终于找到了适合我的解决方案。当我在该`errorsController.Execute(rc);`行上放置一个断点并使用'step into'直到我遇到这个异常时，突破就来了：

```
The view 'Detail' or its master was not found or no view engine supports the 
searched locations. The following locations were searched:
~/Views/Errors/Detail.aspx
~/Views/Errors/Detail.ascx
~/Views/Shared/Detail.aspx
~/Views/Shared/Detail.ascx
~/Views/Errors/Detail.cshtml
~/Views/Errors/Detail.vbhtml
~/Views/Shared/Detail.cshtml
~/Views/Shared/Detail.vbhtml 
```

异常被吞下，我认为是因为它发生在 Application_Error 方法中，并且因为我设置了`Response.TrySkipIisCustomErrors = true`.

看到这个错误后，我很快意识到我的问题只是名称不匹配：我的控制器实际上`ErrorController`没有命名为 's'，而不是`ErrorsController`. 对我来说问题是我设置了`routeData.Values["controller"] = "Errors";`，这是错误的。切换它以`routeData.Values["controller"] = "Error";`解决问题。

请注意，您不会立即发现错误，因为您直接实例化控制器，并且如果您拼写错误的那部分将无法编译。但是在控制器内部，调用 View() 将使用`RouteData`我们构造并传递给`RequestContext`对象的实例来查找视图。因此，如果控制器名称在那里拼写错误，MVC 不知道在哪里寻找视图，并且由于 IIS 自定义错误被跳过，它会静默失败。

长话短说：检查您的控制器并查看名称。我假设如果您的控制器名称正确，但视图的文件名不匹配，会发生类似的事情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T19:57:18.630

请看看[这个](http://blog.dantup.com/2009/04/aspnet-mvc-handleerror-attribute-custom.html)。这是在 mvc 中实现异常处理的最佳方式。

我已经实现了相同的异常处理，但我遇到了一些问题，但你仍然可以参考[这个](https://stackoverflow.com/questions/11309635/mvc3-exception-handling)。

# python - Python Subprocess Popen Stalling CGI Page

> ID：11317489
> 
> 赞同：3
> 
> 时间：2012-07-03T19:05:22.223
> 
> 标签：python, cgi, subprocess

I have a tool that I am working on and I need it to run a parser and also output another analysis log. Currently I have it so that it's through a web interface.

1.  User goes to the form and submits a filename for parsing (file already on system).
2.  Form submits information to Python CGI script
3.  Python CGI script runs and spawns a subprocess to run the parsing.
4.  Parser finds appropriate information for analysis and spawns subprocess also.

I am using

```
import subprocess
...
subprocess.Popen(["./program.py", input]) 
```

In my code and I assumed from documentation that we don't wait on the child process to terminate, we just keep running the script. My CGI script that starts all this does:

```
subprocess.Popen(["./program.py", input])
// HTML generation code
// Javascript to refresh after 1 second to a different page 
```

The HTML generation code is to output just a status that we've processed the request and then the javascript refreshes the page to the main homepage.

**The Problem**

The CGI page hangs until the subprocesses finish, which is not what I want. I thought Popen doesn't wait for the subprocesses to finish but whenever I run this tool, it stalls until it's complete. I want the script to finish and let the subprocesses run in the background and let the webpages still function properly without the user thinking everything is just stalled with the loading signals.

I can't seem to find any reason why Popen would do this because everywhere I read it says it does not wait, but it seems to.

Something odd also is that the apache logs show: "Request body read timeout" as well before the script completes. Is Apache actually stalling the script then?

Sorry I can't show complete code as it's "confidential" but hopefully the logic is there to be understood.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:27:30.013

Apache 可能会等待子进程完成。您可以尝试妖魔化孩子（双叉，setsid），或者最好将作业提交给本地服务，例如，通过写入预定义文件或使用一些消息代理或通过更高级别的接口（如 celery）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:40:07.153

不确定为什么会这样，但我遵循了这个线程中的答案： [如何在 Python 中运行另一个脚本而不等待它完成？](https://stackoverflow.com/questions/546017/how-do-i-run-another-script-in-python-without-waiting-for-it-to-finish)

去做：

```
p = subprocess.Popen([sys.executable, '/path/to/script.py'], 
                     stdout=subprocess.PIPE, 
                     stderr=subprocess.STDOUT) 
```

代替：

```
p = subprocess.Popen([sys.executable, '/path/to/script.py']) 
```

由于某种原因，现在 CGI 脚本将终止并且子进程继续运行。关于为什么存在差异的任何见解都会有所帮助？我不明白为什么必须定义其他两个参数会导致这样的停顿。

# database - 检查/考试问题/带有评分的答案的架构

> ID：11317491
> 
> 赞同：4
> 
> 时间：2012-07-03T19:05:36.717
> 
> 标签：database, database-design, schema, database-schema

我正在编写一个应用程序，它将为我们的位置生成检查。基本上，将它们视为健康检查表。每个“检查”都会有一系列的问题和答案。答案可以是数字（1,2,3,4,5 - 表示它们的点值），也可以是具有映射到点的多项选择（“是”，“否”）（1 表示是，0 表示否）和不会映射到点但可能能够被应用层用于平均的纯文本答案。因此，例如，我们可以有一个“酱汁温度”字段，它不带任何分数，但可以用于在路上报告。

问题可以在多个检查表上重复使用，但可以具有不同的分值。答案也可以。

我无法为此找出架构。我的直觉认为 EAV 将是一个很好的方法，但我越想它，我越想更多的数据仓库模型会更好。

特别是，我在找出将 min_points、max_points 和 no_points 映射到每个问题/答案的最佳方法时遇到了问题。这就是我认为我将不得不使用 EAV 的地方。实际上，我有点坚持。如果是调查或没有分数的东西，或者每个答案的分数相同，那将非常简单。问题表、答案表、输入类型的一些样板表等。但是由于每个问题都可能有一个分值，并且该分值可能会根据使用该问题的位置而改变，所以我不确定如何继续。

因此，示例问题如下

*   食物热吗 [是，否] 可能的分数 = 5（5 表示是，0 表示否）
*   食物好吃吗 [1,2,3,4,5] 可能的分数 = 5（1 分 1 分，2 分 2 分等）
*   经理是否值班 [是，否] 可能的分数 = 5（5 表示是，0 表示否）
*   建筑物是否干净 [1,2,3,4,5] 可能的分数 = 10（1 分 2 分，2 分 4 分，3 分 6 分等）
*   员工是否专业 [是，否] 可能的分数 = 5（5 表示是，0 表示否）
*   冷冻室温度 [数字文本输入]
*   值班经理[文字输入]

由于所有答案都可以具有不同的数据类型和点值，因此我不确定如何为它们构建数据库。

我在想（为简洁起见，省略或更改了其他表格、名称和其他小鬼细节）

```
CREATE TABLE IF NOT EXISTS inspection(
id mediumint(8) unsigned not null auto_increment PRIMARY KEY,
store_id mediumint(8) unsigned not null,
inspection_id mediumint(8) unsigned not null,
date_created datetime,
date_modified timestamp,
INDEX IDX_STORE(store_id),
INDEX IDX_inspection(inspection_id),
FOREIGN KEY (store_id) REFERENCES store (store_id)ON DELETE CASCADE,
FOREIGN KEY (inspection_id) REFERENCES inspection (inspection_id)ON DELETE CASCADE)

CREATE TABLE IF NOT EXISTS input_type(
input_type_id tinyint(4) unsigned not null auto_increment PRIMARY KEY,
input_type_name varchar(255),
date_created datetime,
date_modified timestamp)

CREATE TABLE IF NOT EXISTS inspection_question(
question_id mediumint(8) unsigned not null auto_increment PRIMARY KEY,
question text,
input_type_id mediumint(8),
date_created datetime,
date_modified timestamp)
CREATE TABLE IF NOT EXISTS inspection_option(
option_id,
value) 
```

但这就是我卡住的地方。我不确定如何构建问题答案表来说明分数、无分数和不同的数据类型。

另外，我知道我需要将商店映射到检查表等等，但我现在把这些都关掉了，因为这对这个问题并不重要。

那么，我是否应该为答案制作一个表格，其中所有可能的答案（从选项表构建或作为文本输入）都存储在该表中，然后是一个映射表以将“答案”映射到“问题”（对于任何特定的检查）并在那里存储点？

我只是想不对。我可以使用一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:00:53.133

这里没有正确或错误的答案，我只是抛出一些想法和讨论点。

我建议基本的“单元”不是问题，而是一对问题+答案*类型*（例如1-5、文本或其他）。在我看来，这`Was the food hot / range 1 to 5`是`Was the food hot / text description`非常不同的，你会发疯地试图将一个问题与两种（或更多）答案类型联系起来（更不用说这些答案的答案键了——暂时忽略这一点，我稍后再谈）。将该对称为 QnA 项目。您最终可能会得到很多相似的配对，但是，嘿，这是您必须使用的。

所以你有一个 QnA 项目的“池”。它们是如何选择使用的？特定表格（或问卷）是根据池中的项目构建的，还是每次填写问卷时随机选择的？表格是否与位置特别相关，或者可以在任何位置使用表格？他们在制作表格/问卷时有多挑剔？QnA 项目如何收集/相互关联和/或最终结果非常重要，除非您真的喜欢重写代码，否则您应该在开始编写代码之前将其全部解决。

给定一个已定义的 QnA 项目，您还应该有该项目的“答案键”——一种测量给定答案（基于项目的答案类型）的方法：零、值、值 * 2 等等。这显然会因使用而异（问卷到问卷？它是否根据问卷的呈现位置而有所不同？如果是，如何或为什么？）是否有标准化的答案关键算法（总是零，总是值 * 2，等）还是这些也是非常自由的形式？确定它们如何使用/与 QnA 项目相关联对于正确建模至关重要。

# asp.net - 通过 asp.net 网页进行 Web 服务器监控

> ID：11317498
> 
> 赞同：4
> 
> 时间：2012-07-03T19:06:03.610
> 
> 标签：asp.net, system, monitoring

我想在网页上监控以下内容：

*   总响应时间
*   总字节数
*   吞吐量（请求/秒）
*   使用的内存
*   硬盘空间和IO问题
*   服务器 CPU 开销
*   错误（按错误代码）
*   MSSQL 加载
*   IIS 错误

我托管了一个小型服务器集群用于网络托管。我需要在 ASP.NET 中创建一个硬件视图，以尽可能接近实时快照，了解正在发生的事情。

我听说过 Spiceworks 或其他完成此任务的方法。我同意这些都是很棒的工具，但我想编写代码并保持简单。

这是我想出/找到的一些现有代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebApplication1
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            string[] logicalDrives = System.Environment.GetLogicalDrives();
            //do stuff to put it in the view.
        }
        protected static string ToSizeString(double bytes)
        {
            var culture = CultureInfo.CurrentUICulture;
            const string format = "#,0.0";

            if (bytes < 1024)
                return bytes.ToString("#,0", culture);
            bytes /= 1024;
            if (bytes < 1024)
                return bytes.ToString(format, culture) + " KB";
            bytes /= 1024;
            if (bytes < 1024)
                return bytes.ToString(format, culture) + " MB";
            bytes /= 1024;
            if (bytes < 1024)
                return bytes.ToString(format, culture) + " GB";
            bytes /= 1024;
            return bytes.ToString(format, culture) + " TB";
        }
        public static string ToApproximateString(this TimeSpan time)
        {
            if (time.TotalDays > 14)
                return ((int)(time.TotalDays / 7)).ToString("#,0.0") + " weeks";
            if (14 - time.TotalDays < .75)
                return "two weeks";
            if (time.TotalDays > 1)
                return time.TotalDays.ToString("#,0.0") + " days";
            else if (time.TotalHours > 1)
                return time.TotalHours.ToString("#,0.0") + " hours";
            else if (time.TotalMinutes > 1)
                return time.TotalMinutes.ToString("#,0.0") + " minutes";
            else
                return time.TotalSeconds.ToString("#,0.0") + " seconds";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T03:29:18.163

性能计数器通过`System.Diagnostics.PerformanceCounter`类公开。 [以下](http://msdn.microsoft.com/en-us/library/fxk122b4.aspx)是 ASP.NET 的一些性能计数器。而且，另一个[方法](http://support.microsoft.com/kb/316365)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T01:17:01.733

与@Sumo 所说的类似，您需要使用`System.Diagnostics`命名空间中的 Windows 性能计数器 (PC)。

您的问题的部分问题是您对从 PC 的角度要测量的内容有点模糊。个人电脑非常具体且非常狭窄；他们测量一个非常详细的指标。您必须将您的要求转换为您想要的特定 Windows PC。

你说你想测量：

*   总响应时间
*   总字节数
*   吞吐量（请求/秒）
*   公羊使用
*   硬盘空间
*   IO 问题
*   服务器 CPU 开销
*   错误（按错误代码）
*   MSSQL 加载

您还应该参考[http://technet.microsoft.com/en-us/library/cc776490(WS.10).aspx](http://technet.microsoft.com/en-us/library/cc776490(WS.10).aspx)上的 Windows Technet 参考（它是 W2K3，但仍适用于 W2K8/R2）。这将为您提供您正在寻找的所有性能计数器的广泛概述和解释。

逐个运行：

*   总响应时间

据我所知，没有列出此内容的 ASP.NET PC。而且，无论如何，它可能对您没有意义，因为 ASP.NET 还将响应您可能不关心需要多长时间的各种请求（即任何以 .axd 结尾的请求）。我在我的项目中所做的是创建一个自定义 PC，但还有其他可用的技术（例如使用自定义跟踪侦听器）。

*   总字节数
*   吞吐量（请求/秒）

我相信这两种情况都有 PC，尽管我认为总字节数可能列在**Web 服务**类别下，而吞吐量可能是 ASP.NET 类别。

*   使用的内存

有一个**内存**类别，但您需要确定是否要查找工作集大小、使用的物理 RAM 等。

*   硬盘可用空间

检查**逻辑磁盘**类别

*   IO 问题

这是什么意思？再次，查看可用的 PC 以查看最相关的内容。

*   服务器 CPU 开销

您将在**处理器**类别下找到它

*   错误（按错误代码）

您可以获得抛出的错误总数或抛出异常的速率，但如果您想收集 EventLog 中的条目，则需要使用命名空间`EventLog`中的类`System.Diagnostics`。

*   MSSQL 加载

我没有找到 SQL Server PC 的参考概述，但 Brent Ozar 是一位专家，他有一个 PC 列表可供查看：[http ://www.brentozar.com/archive/2006/12/dba-101 -using-perfmon-for-sql-performance-tuning/](http://www.brentozar.com/archive/2006/12/dba-101-using-perfmon-for-sql-performance-tuning/)。对于 SQL Server 2008/R2，此列表可能没有太大变化。

**注意事项**：

*   您可能需要确保已将运行 Web 应用程序的应用程序池的标识添加到计算机的名为 Windows 性能监视器用户的用户组中。
*   您只需要打开您的柜台进行只读访问。
*   性能计数器是组件，因此实现`IDisposable`. 确保您`.Dispose()`使用它们（或者，更好的是，使用`using()`语句）。
*   使用该`.NextValue()`方法获取您的值；几乎从不需要使用`.RawValue`or `.NextSample()`。

我不会给你每个计数器的确切名称，因为你真正了解每个计数器测量什么以及它对你有多大用处是非常重要的，只有你才能回答这个问题。实验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T02:31:29.563

我建议使用诸如[New Relic](http://newrelic.com "新遗物")之类的分析服务。.Net 使用页面在这里[New Relic for .Net](https://newrelic.com/docs/dotnet/new-relic-for-net)。

# c++ - 设置参数的静态成员函数需要访问非静态数据成员

> ID：11317501
> 
> 赞同：0
> 
> 时间：2012-07-03T19:06:15.867
> 
> 标签：c++, class, static-functions

我有一个需要访问类的数据成员的静态函数。该函数可以是类的成员、非成员或友元函数，但它必须是静态的，并且不能接受任何参数。所以我不能将数据成员作为参数传递给它，也不能将对象本身传递给它。

```
#include "sundials.h"
#include "CVode.h"

class nBody
{
private:
   double masses[];
   double** paths;
   static int accelerator();
   //...
public:
   //...
   void runODE();
};

int nBody::accelerator()
{
    // code that needs to know the values stored in masses[]
}
void nBody::runODE()
{
   //...
  ODEsetAccelerator(accelerator);  //require accelerator to be static int 
                                   //with specific parameters
   // run the ODE
   //record trajectories in paths[][]
} 
```

`accelerator`被馈送到一个单独的 ODE 求解器，该求解器要求加速器是类型`static int`并采用指定的参数，所以我不能将质量传递给加速器，因为它将被 ODE 调用而不是`main`

有什么办法可以让加速器功能知道质量的价值吗？我不在乎它有多间接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:10:06.237

让我开始说**你的设计坏了**。`static`需要访问`static`类的非成员并且无法接收参数的方法？

除此之外，你当然可以。您可以从`static`方法内部访问全局对象，该对象设置为您尝试操作的当前对象：

```
extern nBody* currentBody;

//........
int nBody::accelerator()
{
    //access currentBody
    //since this is a member, you have access to other private members
}

//....
nBody someBody;
currentBody = &someBody;
nBody::accelerator(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:09:55.370

鉴于您的限制，一个可怕的解决方案是在类中拥有一个名为类似`currentNBody`类型的静态变量，`nBody *`并在运行 ODE 求解器之前将其设置为适当的实例。

您正确地将其标识为全局变量。当然，如果你正在做任何多线程的事情，这将完全失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:39:24.047

这就是我认为您在谈论的内容：某些处理正在创建具有质量的 nBody 对象。其他一些处理需要“加速”它们。您需要一种方法来通过“加速过程”“注册”nBody 对象。这可能是 AccelerationProcess 对象上的静态方法或通过 RMI 等的一些回调。加速器进程将 nBody 对象引用保持在其状态，因此没有理由在 nBody 上拥有静态方法。这是假设所有对象都存在于同一个内存空间中——否则事情会变得更加复杂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T21:35:23.833

如果这是在快速网络搜索中显示的“日晷”和“CVode”：

使用相关`nBody*`作为`user_data`参数。
它在用户函数的文档中进行了描述（第 55 页）。

如果不是，请忽略这个答案。

# php - 检索数组中的匹配元素

> ID：11317503
> 
> 赞同：0
> 
> 时间：2012-07-03T19:06:27.390
> 
> 标签：php, arrays

我有一个这样的数组

```
Array
(
    [35635d5ebdd938d6360e65a9e2484073] => Array
        (
            [rowid] => 35635d5ebdd938d6360e65a9e2484073
            [id] => MYU_SC3
            [qty] => 1
            [price] => 4800
            [name] => JAMB UTME Scratch Card
            [service_image] => assets/img/jamb.jpg
            [service_category] => cards
            [subtotal] => 4800
        )

    [d8df18561040f3d9bd9868f5c5aaa7c2] => Array
        (
            [rowid] => d8df18561040f3d9bd9868f5c5aaa7c2
            [id] => MYU_SC1
            [qty] => 1
            [price] => 1600
            [name] => WAEC Scratch Card
            [service_image] => assets/img/waec.jpg
            [service_category] => cards
            [subtotal] => 1600
        )

    [a4a751dd9a69824eb3abb6f49c7a7f61] => Array
        (
            [rowid] => a4a751dd9a69824eb3abb6f49c7a7f61
            [id] => MYU_SC2
            [qty] => 1
            [price] => 1600
            [name] => NECO Scratch Card
            [service_image] => assets/img/neco.jpg
            [service_category] => cards
            [subtotal] => 1600
        )

) 
```

我想检索与另一个数组中的元素匹配的子数组

```
$card_skus = array("MYU_SC1","MYU_SC2","MYU_SC3"); 
```

我正在循环主数组

```
foreach ($this->cart->contents() as $key => $item) {
      if(in_array($item['id'], $card_skus))
      {
       //Didn't know what to do at this point
      }
} 
```

这个怎么弄，谢谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:10:22.457

我猜@nickb 已经在评论中回答了，在写答案时没有看到。

试试这个

```
$subArray = array();
foreach ($this->cart->contents() as $key => $item) {
   if(in_array($item['id'], $card_skus))
   {
      //Didn't know what to do at this point
      $subArray[] = $item;
   }
} 
```

现在根据您的要求使用 $subArray

# c++ - 如何将 uint8_t 放入 char 数组中？

> ID：11317506
> 
> 赞同：0
> 
> 时间：2012-07-03T19:06:32.740
> 
> 标签：c++, types, casting, printf

我正在尝试使用串行通信向设备发送一些数据：

```
void VcpBridge::write_speed(char address, int spd) {
    uint8_t speed = (uint8_t)(127);
    ROS_ERROR("VCP BRIDGE: Sending %u to %u", speed, address);
    char msg[8];
    char command = 0x55, size = 0x02, csum;
    csum = speed + 0x64 + address;
    sprintf(msg, "%c%c%c%c%c%c", command, address, speed, size, 0x64, csum);
    ROS_ERROR(msg);
    write(fd_, msg, 6);
} 
```

`ROS_ERROR`这里与`printf`.

一切正常，除非值`speed`超过 127。然后它总是`?`在它的位置打印 a 并且设备没有接收到正确的信息。你知道有什么方法可以正确投射吗？我试过`%u`了，但是程序崩溃了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:45:15.863

`sprintf`在您的示例中没有充分的理由使用。试试这个：

```
void VcpBridge::write_speed(char address, int spd) {
    uint8_t speed = (uint8_t)(127);
    ROS_ERROR("VCP BRIDGE: Sending %u to %u", speed, address);
    char command = 0x55, size = 0x02, csum;
    csum = speed + 0x64 + address;
    ROS_ERROR(msg);
    char msg[] = { command, address, speed, size, 0x64, csum};
    write(fd_, msg, sizeof msg);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:01:06.027

感谢您的回答，我可以找出解决问题的方法。不使用 sprintf 和使用 unsigned int 是关键。这是最终代码：

```
void VcpBridge::write_speed(char address,int spd){
  uint8_t speed = (uint8_t)(200);
  unsigned char command = 0x55, size=0x02, csum;
  csum=speed+0x64+address;
  unsigned char msg[8]= { command, address, speed, size, 0x64, csum };
  write( fd_, msg, 6);
} 
```

# ios - 使用 Three20 TTTableViewController 时出现奇怪的表视图标题问题

> ID：11317507
> 
> 赞同：1
> 
> 时间：2012-07-03T19:06:39.593
> 
> 标签：ios, cocoa-touch, ios5, uikit, three20

我正在构建一个`TTTableViewController`基于 Three20 TTCalog 示例的子类。他们在那里定义了一个`TTTableViewController`具有搜索功能的子类，称为`SearchTextController`，并且它有一个搜索栏出现在表视图标题中。

这是他们的`loadView`方法的样子：

```
- (void)loadView {
  [super loadView];

  TTTableViewController* searchController = [[[TTTableViewController alloc] init] autorelease];
  searchController.dataSource = [[[MockSearchDataSource alloc] initWithDuration:1.5] autorelease];
  self.searchViewController = searchController;
  self.tableView.tableHeaderView = _searchController.searchBar;
} 
```

我试图在我自己的 TTTableView 子类中重新实现相同的功能。问题是我无法显示搜索栏。

`loadView`在TTCalog SearchTestController中运行这些（在最后一行之后）

```
 NSLog(@"_searchController.searchBar address %@",_searchController.searchBar.description);
 NSLog(@"self.tableView.tableHeaderView address %@",self.tableView.tableHeaderView.description); 
```

为层产生相同的内存地址（意味着视图设置正确）

```
2012-07-03 12:00:02.326 TTCatalog[53493:f803] _searchController.searchBar address <UISearchBar: 0x6a5c940; frame = (0 0; 320 44); layer = <CALayer: 0x6a5ca40>>
2012-07-03 12:00:02.327 TTCatalog[53493:f803] self.tableView.tableHeaderView address <UISearchBar: 0x6a5c940; frame = (0 0; 320 44); layer = <CALayer: 0x6a5ca40>> 
```

当我在我的应用程序中运行相同的 NSLogs 时，我得到了这个：

```
2012-07-03 11:41:54.900 myApp[51991:f803] _searchController.searchBar address <UISearchBar: 0x6a43c20; frame = (0 0; 320 44); layer = <CALayer: 0x6a43ce0>>
2012-07-03 11:41:54.901 myApp[51991:f803] self.tableView.tableHeaderView address <UISearchBar: 0x6a43c20; frame = (0 0; 320 44); layer = <CALayer: 0x6a43ce0>> 
```

这些图层在我的应用程序中也具有相同的内存地址，但搜索栏在表格视图标题中不可见。我在这里还缺少什么吗？

# html - 在没有不必要滚动的情况下将页脚推到屏幕底部

> ID：11317512
> 
> 赞同：2
> 
> 时间：2012-07-03T19:06:50.803
> 
> 标签：html, css, footer, sticky

好的，所以我已经习惯了与页脚共同的“推送”方法，以确保它停留在页面底部......但是，现在容器和页脚之间有一个不必要的间隙，这意味着总是有向下滚动，即使没有内容可以将其向下推。我希望如果没有内容，页脚会很好地贴在网站的底部。

有没有其他人发现这个并能够解决它？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T06:26:41.837

我用

```
#footer {
position: relative;
left: 0px;
bottom: 0px;
height: 150px; // whatever height you want
width: 100%;
} 
```

为我工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:46:56.453

这可以通过几行 CSS 来完成。假设您正在使用该`<footer>`元素，请应用以下样式属性：

```
footer {
 position: fixed;
 bottom: 0;
 left: 0;
 width: 100%;
} 
```

就是这样！

# android - 使用opencv的android角跟踪

> ID：11317513
> 
> 赞同：7
> 
> 时间：2012-07-03T19:06:52.237
> 
> 标签：android, opencv, tracking

当我相对于 Android 相机移动一张纸时，我试图跟踪其角的位置（您可以假设这张纸的颜色与背景完全不同）。我想在 android 屏幕上找到每个角的**x**、**y**坐标。我还希望能够改变纸张的角度，这样它就不一定总是完美的矩形。

我正在使用适用于 Android 的 opencv 2.4.1，但我找不到`cvgoodfeaturetotrack`或`cvfindcornersubpix`在包中。现在我正在考虑使用 CvCanny 算法来查找边缘，然后使用边缘`cvfindcontours`来查找线的主要交点以查找角。

任何建议或源代码将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T07:47:54.907

我建议你两个选择：

1-使用具有这些功能的其他 OpenCV 版本（您可以查看在线[文档](http://opencv.willowgarage.com/documentation/cpp/index.html)）

2- 使用 FAST 检测器和 SIFT 描述符。这是此类任务的一种广泛使用的方法，确实是最新的。它将找到多尺度、对光照条件稳健等的最佳特征。您必须训练标记（纸张）以使用 SIFT 提取特征。然后在相机场景中使用 FAST 检测器来检测和跟踪这些特征。

# trigger.io - Trigger.io + backbone.js + zepto.js ...动画？

> ID：11317522
> 
> 赞同：1
> 
> 时间：2012-07-03T19:07:24.757
> 
> 标签：trigger.io

是否有任何具有工具栏和简单动画的 Android 应用程序示例？滑动，淡入淡出等

我在 google play 中找到的那些在移动转换方面没有太多。

演示（酒盒）在我的低规格 android 上速度惊人，我想添加一个简单的过渡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:58:48.363

我们在这里写了一篇关于低开销基本转换的博客文章：http: [//trigger.io/cross-platform-application-development-blog/2012/09/05/simple-and-fast-css-page-transitions-in -您的混合移动应用程序/](http://trigger.io/cross-platform-application-development-blog/2012/09/05/simple-and-fast-css-page-transitions-in-your-hybrid-mobile-app/)

# jquery - jQuery：Shift+Tab onkeydown 的问题

> ID：11317524
> 
> 赞同：0
> 
> 时间：2012-07-03T19:07:29.820
> 
> 标签：jquery

场景：

我们有 3 个框可以接收任何字母或数字组合作为输入。第一个框最多可以有 3 个字符，第二个框必须正好是 7 个，最后一个框必须是 2 个。

我试图让一个 jQuery 函数到位，一旦用户输入 3 个字符，然后从第 2 个到第 7 个字符，然后从第 3 个到 2 后的按钮，将用户从第一个框带到第二个人物。我还希望这个函数相当通用，以便我可以从其他控件中使用它，所以我设置了以下内容：

```
function moveOn(e, objID, nextID, howLong) {
        if (!(e.keyCode == 9)) {
            if ($(objID).val().length >= (howLong)) {
                $(nextID).select();
            }
        }
    } 
```

导致我适应的是 Shift+Tab。我试图通过 if(keyCode == 9) 检查来捕捉它，但因为它是 keyup，所以 shift 键可能会在 Tab 之前出现一瞬间，在这种情况下，事件会在 Shift 键 (16) 而不是选项卡 (9)。我不能忽略所有 Shift 捕获，因为用户很可能会在至少一个字段中使用大写字母。

当他们输入第一个值然后意识到他们犯了错误所以他们想返回时，Shift+Tab 就开始发挥作用了。我们的员工非常受键盘驱动，因此他们几乎总是使用 Shift+Tab 来尝试返回并修复该问题。

我是否缺少一些技巧来流畅地完成这项工作？

TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:20:08.160

我认为忽略 shift (16) 的关键代码不会给您带来任何问题。当用户释放 shift 时，它会忽略它。然后它会为他们按下的任何其他键触发一个单独的 onkeydown 事件，无论 shift 是否仍然被按住。你可以在这里测试它：http: [//asquare.net/javascript/tests/KeyCode.html](http://asquare.net/javascript/tests/KeyCode.html)

# regex - matlab regexprep 替换第 n 次出现

> ID：11317525
> 
> 赞同：0
> 
> 时间：2012-07-03T19:07:38.103
> 
> 标签：regex, matlab

Matlab 文档指出，可以替换 regexprep 中第 N 次出现的模式。我没有看到如何实现它，谷歌没有返回任何有用的东西。

[http://www.weizmann.ac.il/matlab/techdoc/ref/regexprep.html](http://www.weizmann.ac.il/matlab/techdoc/ref/regexprep.html)

基本上我的字符串是 :,:,1 ，我想用任意数字替换第二次出现的 : 。根据文档：

```
regexprep(':,:,4',':','AnyNumber','N') 
```

我不明白应该如何使用 N 选项。我试过'N'，2或只是'2'。

请注意， : 的位置可以在任何地方。

我意识到除了 regexprep 之外还有其他方法可以做到这一点，但我不喜欢问题挥之不去。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:14:24.650

```
regexprep(':,:,4',':','AnyNumber',2) 
```

以上工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-06T20:09:14.080

根据 MA​​TLAB 文档，regexprep 的一般语法是：

```
newStr = regexprep(str,expression,replace,option1,...optionM); 
```

它在“str”中查找，找到匹配的“expression”，并将匹配的字符串替换为“replace”。有 9 个可用选项。其中八个是固定字符串，一个是整数。整数告诉要替换哪个匹配字符串。以下代码将所有参数设置为变量，查找匹配字符串的数量，并使用该信息仅替换最后一次出现。

```
str = ':,:,4'; 
expression= ':';
replace = num2str(floor(rand()*10)); 
                               % generate a single digit random number converted to string
idx = regexp(str, expression); % use regexp to find the number of matches
regexprep(str, expression, replace, length(idx)); % only replace the last one 
```

# c# - WCF 数据服务 GUI 性能和使用 ICollectionView 进行过滤

> ID：11317527
> 
> 赞同：1
> 
> 时间：2012-07-03T19:07:44.857
> 
> 标签：c#, wpf, mvvm, .net-4.0, wcf-data-services

我有简单的测试（WPF - MVVM）客户端（用于 WCF oData 服务）应用程序：

**视图模型**

```
public class MainViewModel : ViewModelBase
{
    private MyEntities context;

    public ICollectionView Collection { get; private set; }

    private string searchString = "";
    public string SearchString
    {
        get { return searchString; }
        set
        {
            searchString = value;
            Collection.Refresh();
        }
    }

    public MainViewModel()
    {
        context = new MyEntities(new Uri("http://localhost:3780/Live.svc"));

        Collection = new CollectionView(context.Clients);
        //Collection = new CollectionView(context.Clients.ToArray());

        Collection.Filter = (o) => (o as Client).FullName.ToString().StartsWith(SearchString);
    }
} 
```

和**查看**

```
<ListBox ItemsSource="{Binding Collection}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding FullName}" />
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox>

<TextBox Grid.Row="1" Text="{Binding SearchString, UpdateSourceTrigger=PropertyChanged}" /> 
```

我有两个问题：

1.  为什么 ListBox 滑块的移动会减慢 S_O___M_U_C_H（我的集合中只有 40 个客户端）？
2.  为什么，如果我改变这个

    ```
    Collection = new CollectionView(context.Clients); 
    ```

    对此

    ```
    Collection = new CollectionView(context.Clients.ToArray()); 
    ```

    所以要通过 IEnumerable shell 断开与上下文的“连接”（它有助于解决 UI 性能问题） - 停止工作过滤！我不明白为什么从数据上下文中断开集合会损坏过滤...

所以，我的最后一个问题是 - 是否有可能避免 GUI 性能问题并同时实现过滤？如果是这样，怎么办？

欢迎任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T06:09:00.890

好的，伙计们，我解决了我的问题。我应该只注意 VS**输出**窗口中的消息：

*不完全支持直接使用 CollectionView。基本功能工作，虽然效率低下，但高级功能可能会遇到已知的错误。考虑使用派生类来避免这些问题。*

## 解决方案很简单：

我改变了这个

```
Collection = new CollectionView(context.Clients); 
```

对此

```
Collection = new ListCollectionView(context.Clients.ToList()); 
```

然后没有 GUI 性能问题，过滤按预期工作！

## 结果代码是：

**视图模型：**

```
public class MainViewModel : ViewModelBase
{
    private MyEntities context;

    public ICollectionView Collection { get; private set; }

    private string searchString = "";
    public string SearchString
    {
        get { return searchString; }
        set
        {
            searchString = value;
            Collection.Refresh();
        }
    }

    public MainViewModel()
    {
        context = new MyEntities(new Uri("http://localhost:3780/Live.svc"));

        Collection = new ListCollectionView(context.Clients.ToList());

        Collection.Filter = (o) => (o as Client).FullName.ToString().StartsWith(SearchString);
    }
} 
```

和**查看：**

```
<Grid x:Name="LayoutRoot"> 
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <ListBox ItemsSource="{Binding Collection}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding FullName}" />
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>

    <TextBox Grid.Row="1" Text="{Binding SearchString, UpdateSourceTrigger=PropertyChanged}" />  
</Grid> 
```

**WCF 数据服务：**

```
public static void InitializeService(DataServiceConfiguration config)
{
    config.SetEntitySetAccessRule("*", EntitySetRights.All);
    config.SetServiceOperationAccessRule("*", ServiceOperationRights.All);
    config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V2;

    config.UseVerboseErrors = true; 
} 
```

# sql - 从另一列填充列

> ID：11317529
> 
> 赞同：0
> 
> 时间：2012-07-03T19:07:50.073
> 
> 标签：sql, sql-server, sql-server-2005

我将要导入数据，并且我有一个包含 2-4 位数字的字段。我需要将该数字更改为 x0001 或 x0200，具体取决于它是 1 还是 200。在 SQL Server 2005 中最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:20:44.617

这是一个选择 stmt，它将添加带有前导 0 的 x 和格式

```
select 'x' + RIGHT('000'+ CONVERT(VARCHAR,Num),4) from numbers 
```

# ios - CCRepeatForever 给我 EXC_BAD ACCESS

> ID：11317533
> 
> 赞同：0
> 
> 时间：2012-07-03T19:07:56.450
> 
> 标签：ios, cocos2d-iphone, exc-bad-access

所以我从主游戏类创建一个名为 Enemy 的对象，敌人对象在 ccmoveto 上调用 ccrepeatforever 我保留了移动并重复但仍然崩溃

这是一些代码

```
for (Enemy *iceLord in self.children) {
if ([iceLord isKindOfClass:[Enemy class]] && iceLord.isIceLord==YES) { <-----this is where     EXC_BAD_ACCESS is showing up

//DO Stuff
 }
} 
```

//在enemyClass里面我有这个方法我认为这是导致崩溃但我不明白为什么

```
 -(void)startWiggle{

int randomX = (arc4random()%30)+15;
int randomY = (arc4random()%40)+15;
int dieroll = arc4random()%2+1;
if (dieroll==1) {
randomY=randomY* -1;
}
if (self.position.y < winSize.height && self.position.y >0) {
id move = [CCMoveBy actionWithDuration:1 position:CGPointMake(-randomX, randomY)];

id forever = [CCRepeatForever actionWithAction:move];

 [self runAction:forever];
 [move retain];
 [forever retain];
 }

 } 
```

# javascript - 使用 ajax 和 php 的总价格变量限制为 2 位小数

> ID：11317534
> 
> 赞同：0
> 
> 时间：2012-07-03T19:08:04.163
> 
> 标签：javascript, ajax

我正在使用以下代码片段来计算总价。这很好用，除了 #totalPrice 在某些情况下会扩展到例如 $267.9999999999。我如何在此函数中重新格式化#totalPrice，以便按照处理价格的标准四舍五入到小数点后两位。

```
function getTotalCost(inventory) {
    if(inventory) {
        getTotalParts(inventory);
        getTotalMarkup(inventory);
    }

    var labor = $('#labor').val() * 1;
    var totals = 0;
    for(i in totalMarkup) {
        totals += totalMarkup[i];
    }
    totalCost = totals+labor;
    /*if(totals == 0) {
        totalCost = 0;
    }*/
    $('#totalPrice').html(totalCost);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:11:25.747

使用 javascript 时，浮点数总是很糟糕。你能做的最好的就是把它四舍五入。

但在这种情况下你可以做

```
(totalCost).toFixed(2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:20:26.250

你可以有：

```
$('#totalPrice').html(totalCost.toFixed(2)); 
```

看：

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toFixed](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toFixed)

请注意，该`toFixed`方法返回一个格式化的数字，因此将数字转换为字符串。这不是问题，因为`html`需要一个字符串，但请记住，当您期望数字总和时避免字符串连接。我相信你使用`$('#labor').val() * 1;`这个正是这个原因。但是，这不是必需的，最好使用[parseFloat](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseFloat)或[一元加运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Arithmetic_Operators#.2B_%28Unary_Plus%29)之类的方法：

```
var labor = +$('#labor').val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:11:42.820

你可以像这样在 JavaScript 中使用 Math.round 函数。

```
totalCost = Math.round(totalCost*100)/100;
$('#totalPrice').html(totalCost); 
```

# objective-c - 无法获取继承类的实例

> ID：11317535
> 
> 赞同：0
> 
> 时间：2012-07-03T19:08:04.893
> 
> 标签：objective-c, inheritance, casting

我正在使用 Cocos2D，并且我制作了一个非常简单的类，它继承自`CCSprite`. 我有以下类方法：

```
+(id)carWithFile:(NSString *)fileName{
Car *car= (Car*)[CCSprite spriteWithFile:fileName];
car.anchorPoint=ccp(0,0);
    NSLog(@"%@",[car class]);//Here I get CCSprite in the console
return car;
} 
```

`CCSprite`但令我惊讶的是，当我调用这个方法时，我仍然得到一个实例。即使我签入方法本身，新创建对象的类也不`CCSprite`是`Car`. 我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:11:19.183

如果它是 car 的子类，您可以使用

```
[Car spriteWithFile:fileName]; 
```

# c++ - std::map，自定义键类型，仅对一个变量进行排序

> ID：11317538
> 
> 赞同：1
> 
> 时间：2012-07-03T19:08:12.657
> 
> 标签：c++, map, operators, std

我有一个密钥类型：

```
struct KeyT {
    uint32_t timestamp;

    // example!
    uint32_t a;
    uint32_t b;
    uint32_t c;
    uint32_t d;
    uint32_t e;
    // ...

    bool operator== (const KeyT& key) const
    {
        if(timestamp == key.timestamp && a == key.a && b == key.b && d == key.d && c == key.c && e == key.e)
            return true;
        return false;

    }
    bool operator< (const KeyT& key) const
    {
        if(timestamp < key.timestamp)
            return true;
        else if(timestamp == key.timestamp && a < key.a && b < key.b && c < key.c && d < key.d && e < key.e)
            return true;
        else if(timestamp == key.timestamp && a == key.a && b < key.b && c < key.c && d < key.d && e < key.e)
            return true;
        else if(timestamp == key.timestamp && a == key.a && b == key.b && c < key.c && d < key.d && e < key.e)
            return true;
        else if(timestamp == key.timestamp && a == key.a && b == key.b && c == key.c && d < key.d && e < key.e)
            return true;
        else if(timestamp == key.timestamp && a == key.a && b == key.b && c == key.c && d == key.d && e < key.e)
            return true;
        // ..
        return false;
    }
}; 
```

现在，我并不真正关心成员变量 a、b、c、d、e 的排序，我唯一要确保的是地图按时间戳排序。我也刚刚意识到，如果我有两个 KeyT 实例一，二，除了“d”之外一切都相同，那么一 < 二和二 < 一都是错误的。解决这个问题的唯一方法是为所有成员变量的所有可能组合编写比较。我很确定我错过了一些明显的东西，那么在这种情况下最好的解决方案是什么？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T19:13:35.323

我认为这可以满足您的需求：

```
bool operator< (const KeyT& key) const
{
    if(timestamp != key.timestamp) return timestamp < key.timestamp;
    else if ( a != key.a ) return a < key.a;
    else if ( b != key.b ) return b < key.b;
    else if ( c != key.c ) return c < key.c;
    else if ( d != key.d ) return d < key.d;
    else return e < key.e;
} 
```

每当您有一个要在可比较的类中排序的变量的优先列表时，这是一个明智但丑陋的模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:15:55.850

首先，您应该只比较下一个尚未比较小于的当前键，并删除`else`after `return`，如下所示：

```
bool operator< (const KeyT& key) const
{
    if(timestamp < key.timestamp)
        return true;
    if(timestamp == key.timestamp && a < key.a)
        return true;
    if(timestamp == key.timestamp && a == key.a && b < key.b)
        return true;
    if(timestamp == key.timestamp && a == key.a && b == key.b && c < key.c)
        return true;
    if(timestamp == key.timestamp && a == key.a && b == key.b && c == key.c && d < key.d)
        return true;
    if(timestamp == key.timestamp && a == key.a && b == key.b && c == key.c && d == key.d && e < key.e)
        return true;
    // ..
    return false;
} 
```

如果您只需要比较时间戳，请保留第一个`if`，并删除其余的：

```
bool operator< (const KeyT& key) const
{
    return timestamp < key.timestamp;
} 
```

当您使用此运算符比较您的密钥时，具有相同时间戳的项目将不会被重新排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:32:34.027

如果您只关心时间戳，而其他属性无关紧要，则可以使用以下严格的弱排序。你永远不会知道相同时间戳的对象会出现什么顺序：

```
bool operator< (const KeyT& key) const
{
    return timestamp < key.timestamp;
} 
```

如果您需要订购我建议的所有属性`boost::tie`：

```
bool operator< (const KeyT& key) const
{
    return boost::tie(timestamp, a, b, c, d, e) < boost::tie(key.timestamp, key.a, key.b, key.c, key.d, e.key);
} 
```

# database - VBScript：对 Scripting.Dictionary 中的项目进行排序

> ID：11317541
> 
> 赞同：2
> 
> 时间：2012-07-03T19:08:21.650
> 
> 标签：database, sorting, asp-classic, vbscript, scripting.dictionary

我有下面的代码......它抓取这样的数据：

> 姓名1，姓名4，姓名2，姓名3

并像这样列出（[ ] 是一个复选框）：

> [ ] 名称 1 [ ] 名称 4 [ ] 名称 2 [ ] 名称 3

```
<%
    Set DicionarioMyData = CreateObject("Scripting.Dictionary")
    Set MyData= TarefasConexaoMSSQL.Execute("SELECT A FROM TABLE")
    If Not MyData.EOF Then

        Do While Not MyData.EOF
            ItensDoMyData = MyData("A")

            If Not IsNull(ItensDoMyData) Then
                ItensSeparadosDoMyData = Split(ItensDoMyData, ",")

                For i = 0 To UBound(ItensSeparadosDoMyData)
                    ItensDoMyData = Trim(ItensSeparadosDoMyData(i))

                    If Not DicionarioMyData.Exists(ItensDoMyData) Then
                        DicionarioMyData.Add ItensDoMyData, i
                        %>
                  <input name="itens" type="checkbox" value="<% Response.Write ItensDoMyData %>"><label><% Response.Write ItensDoMyData %></label>
                        <%
                    End If
                Next
            End If
         MyData.MoveNext
    End If
%> 
```

它正在工作，但我无法对其进行排序，所以正确的输出应该是：

> [ ] 名称 1 [ ] 名称 2 [ ] 名称 3 [ ] 名称 4

是否可以对这种输出进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:04:21.150

VBScript 不提供良好的排序选项，但是在任何远程现代的东西上，您都可以访问 .NET 提供的 COM Visible 类，其中之一就是`System.Collections.SortedList`类。

因此，您的代码看起来更像这样

```
Dim sl : Set sl = CreateObject("System.Collections.SortedList")

Dim rs : Set rs = conn.Execute("SELECT SomeField FROM SomeTable") 

If Not rs.EOF Then 

    Do While Not rs.EOF  
        If Not IsNull(rs("SomeField")) Then  
            AddStringListToSortedList rs("SomeField"), sl
        End If
    Loop

End If

rs.Close

For i = 0 To sl.Count - 1
    WriteCheckBox sl.GetKey(i)
Next

Sub AddStringListToSortedList(stringList, sortedList)

    Dim arr: arr = Split(stringList, ",")
    Dim i, item
    For i = 0 To UBound(arr)
        item = Trim(arr(i))
        If item <> "" Then
            If Not sortedList.Contains(item) Then
                sortedList.Add item, i
            End If
        End If
    Next

End Sub

Function WriteCheckbox(value)
%>
<input name="itens" type="checkbox" value="<%=Server.HTMLEncode(value)%>" /><label><%=Server.HTMLEncode(value) %></label>
<%
End Function 
```

# java - 是否可以使用 JAX-RS 设置 ETag 而无需使用 Response 对象？

> ID：11317543
> 
> 赞同：12
> 
> 时间：2012-07-03T19:08:28.577
> 
> 标签：java, caching, cxf, jax-rs, etag

在我发现的关于 JAX-RS 和缓存[的少数几个问题之一（有答案）中，生成 ETag（用于缓存）的答案是在 Response 对象上设置一些值。](https://stackoverflow.com/questions/2085411/how-to-use-cxf-jax-rs-and-http-caching)如下所示：

```
@GET
@Path("/person/{id}")
public Response getPerson(@PathParam("id") String name, @Context Request request){
  Person person = _dao.getPerson(name);

  if (person == null) {
    return Response.noContent().build();
  }

  EntityTag eTag = new EntityTag(person.getUUID() + "-" + person.getVersion());

  CacheControl cc = new CacheControl();
  cc.setMaxAge(600);

  ResponseBuilder builder = request.evaluatePreconditions(person.getUpdated(), eTag);

  if (builder == null) {
    builder = Response.ok(person);
  }

  return builder.cacheControl(cc).lastModified(person.getUpdated()).build();
} 
```

问题是这对我们不起作用，因为我们对 SOAP 和 REST 服务使用相同的方法，通过使用 @WebMethod (SOAP)、@GET（以及我们可能需要公开服务的任何其他内容）注释这些方法。以前的服务对我们来说是这样的（不包括创建标头）：

```
@WebMethod
@GET
@Path("/person/{id}")
public Person getPerson(@WebParam(name="id") @PathParam("id") String name){
  return _dao.getPerson(name);
} 
```

有什么方法 - 通过一些额外的配置 - 设置这些标题？这是我第一次发现使用 Response 对象实际上比仅自动转换有一些好处......

我们正在使用 Apache CXF。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T20:05:10.607

是的，如果您可以在创建响应对象后生成 E-tag，您可能可以使用拦截器来实现此目的。

```
public class MyInterceptor extends AbstractPhaseInterceptor<Message> {

    public MyInterceptor () {
        super(Phase.MARSHAL);
    }

    public final void handleMessage(Message message) {
        MultivaluedMap<String, Object> headers = (MetadataMap<String, Object>) message.get(Message.PROTOCOL_HEADERS);

        if (headers == null) {
            headers = new MetadataMap<String, Object>();
        }             

        //generate E-tag here
        String etag = getEtag();
        // 
        String cc = 600;

        headers.add("E-Tag", etag);
        headers.add("Cache-Control", cc);
        message.put(Message.PROTOCOL_HEADERS, headers);
    }
} 
```

如果这种方式不可行，我会使用您发布的原始解决方案，并将您的 Person 实体添加到构建器中：

```
Person p = _dao.getPerson(name);
return builder.entity(p).cacheControl(cc).lastModified(person.getUpdated()).build(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-14T19:59:14.673

或者它可以像发回“错误”代码一样简单......取决于你想要做什么。

```
@Path("/{id}")
@GET
@Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
public ProductSearchResultBean getProductById(@PathParam("id") Integer productId, @QueryParam("expand") List<String> expand, @Context HttpServletRequest request, @Context HttpServletResponse response) throws IOException {

    ProductSearchResultBean productDetail = loadProductDetail(productId, expand);

    EntityTag etag = new EntityTag(((Integer)(productDetail.toString().hashCode())).toString());
    String otherEtag = request.getHeader("ETag");
    if(etag.getValue().equals(otherEtag)){
        response.sendError(304, "not Modified");
    }

    response.addHeader("ETag", etag.getValue());

    return productDetail;
} 
```

无论如何，我就是这样解决这个问题的。祝你好运！（改用 Spring MVC ......有一个开箱即用的过滤器可以为你做一切......甚至制作一个好的 ETag :)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-24T12:12:28.467

您可能会考虑为此使用响应过滤器。我开发了一个气味库，完全符合您的要求：[https ://github.com/tobilarscheid/jaxrs-etag-filter](https://github.com/tobilarscheid/jaxrs-etag-filter)

# php - 在表单提交时重置 URL

> ID：11317546
> 
> 赞同：1
> 
> 时间：2012-07-03T19:08:43.563
> 
> 标签：php, html, url, url-rewriting

我有一个表单，可以作为库存列表的过滤器。该表单效果很好，但我一直在使用 get 以便用户翻阅页面，例如：

```
<a href="http://website.com/index.php?page_id=6&pos=<?php echo $i;?>&q=<?php echo $q;?>&srt=<?php echo $sort;?>">Next page</a>
 <?php } ?> 
```

我从 XML 中获取数据，这是我发现效果最好的方式。但是，要过滤的表单是 POST，如果用户单击下一页并随后尝试使用过滤器（一堆下拉框），那么它还使用已从链接传递给 URL 的获取参数。

有没有办法，不提交表单，它会重置所有参数？

```
http://www.website.com/used-cars/?pos=10&q=Model-Corolla%2C&srt=KMDfr 
```

那将是预制件提交，一旦提交了表单，它将如下所示：

```
http://www.website.com/used-cars/ 
```

并且页面将不再有 GET 变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:11:40.097

是的，在您完成处理后，请致电

```
header("Location: /used-cars/");
die(); 
```

它会将用户重定向到想要的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-10T23:23:51.663

首先，不要只使用默认值`header("Location...")`，因为这会发送一个`302 Found`（以前称为`Moved Temporarily`：）响应，这对实际行为有点“谎言”（因为它仍然意味着*“请求的资源暂时驻留在不同的 URI 下”*）。更糟糕的是：[根据 HTTP 1.1](https://www.rfc-editor.org/rfc/rfc2616#section-10.3.3)`POST`，如果表单使用（大多数都使用），则符合标准的浏览器甚至应该在重定向之前请求许可。

因此，**要使用 , 正确重置表单 URI ，请`GET`使用`303 See Other`**专门 为此目的[添加的 URI。](https://www.rfc-editor.org/rfc/rfc7231#section-6.4.4)

（很高兴将它与`201 Created`旨在[确认的响应结合起来。成功的表单提交](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/201)，因此将 a 添加 `header("HTTP/2.0 201 Created")`到*结果页面*是一个不错的选择。）

但是，为了解决您的旧评论*“我将在哪里添加此 php 代码？我不确定该放在哪里，表单提交会重新加载当前页面。”* （虽然你可能从那时起就明白了；））：

您不仅要处理两种，而且至少要处理三种，甚至四种情况（在条件分支中）：

1.  您发送用于显示+提交的表单。
2.  您收到表单数据，将其存储在某个地方（即“创建新资源”，背后的想法`201 Created`），然后重定向到一个干净的 URI。
3.  为了避免像什么都没发生一样再次重新显示表单（或永远重定向到同一页面），您必须检测您是否刚刚重定向到自己......但是，由于您现在已经从 URI 中删除了所有输入，您必须使用其他方式来跟踪状态。一些直接的方法：

a) 重定向到不同的 URI。

b) 使用 PHP 会话。

4.  最后，如果需要：重置并再次显示表单以获取新输入。

这是一个示例（为简单起见，使用 3/b 和一种“伪造的”4）：

```
session_start();

if (isset($_GET['some_input'])) // Case 2: We got data!
{
    file_put_contents("result", $_GET['some_input']);

    $_SESSION['redir'] = true;
    header("Location: /used-cars/", true, 303);
    exit;
}
else if (isset($_SESSION['redir'])) // Case 3: We have redirected!
{
    unset($_SESSION['redir']);

    http_response_code(201); // Acknowledge receiving the form data.

    echo "OK, we have happily processed the last submitted data: ",
        file_get_contents("result"), "<br>";
    echo "Reload the page to fill the form again!"; // Case 4: Reset...
}
else // Case 1: Send the form...
{
    echo <<<_
    <form>
    <input type="text" name="some_input">
    <input type="submit">
    </form>
_;
} 
```

# ruby-on-rails - 资产压缩导致 javascripts 无法工作

> ID：11317548
> 
> 赞同：0
> 
> 时间：2012-07-03T19:08:51.400
> 
> 标签：ruby-on-rails, asset-pipeline

当我将它们编译到 application.js 中时，我所有的 javascripts 都停止了在生产中的工作。我通过在生产中打开资产调试来解决这个问题，如下所示：

```
 config.serve_static_assets = false

  # Compress JavaScripts and CSS
  config.assets.compress = false

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = true

  # Generate digests for assets URLs
  config.assets.digest = true

  config.assets.debug = true 
```

我的问题是，除了人们能够看到我的 js 文件之外，在生产模式下保持资产调试是否有任何问题。是否有我缺少的设置可以让我压缩 JS 并且它仍然可以工作？我希望能够压缩它们，但是当我尝试它时，javascript 只是没有加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:35:45.647

有时压缩的 js 不起作用，可能是因为它的完成顺序，或者其他原因。

# sql - 根据其他表中的值连接表

> ID：11317551
> 
> 赞同：0
> 
> 时间：2012-07-03T19:09:09.383
> 
> 标签：sql, tsql

我有以下表格。我想运行一个查询，但我认为我的初学者 tsql 级别在这里无济于事。这也可能是我的数据库设计不佳的情况。

![表](../Images/f062b853583c03da40b15399947c97c4.png)

基本上我需要从`tblPhotoGalleries`. 我还需要创建一个名为`GalleryCategoryName`.

`GalleryCategoryName`字段将是`pCatName`in `tblPhotoGalleryCats`。

如果`pCatName`in `tblPhotoGalleryCats = '0'`，那么这意味着，`ConnectedNewsCatID`不是 0。在这种情况下；

`GalleryCategoryName`将是 CategoryName 字段，`tblNewsCategories`其中`CategoryID = ConnectedNewsCatID`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:15:57.390

尝试从这里开始：

```
select *,
  case when PGC.pCatName = '0' then NC.CategoryName else PGC.pCatName end as [CatName]
  from tblPhotoGalleries as PG inner join
    tblPhotoGalleryCats as PGC on PGC.pCatID = FK_pCatID left outer join
    tblNewsCategories as NC on NC.CategoryId = ConnectedNewsCatID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:17:31.483

在新闻类别表上使用左连接，并使用 case 表达式在名称之间进行选择：

```
select
  g.pgID, g.gName,
  GalleryCategoryName = case c.pCatName when '0' then n.CategoryName else c.pCatName end
from tblPhotoGalleries g
inner join tblPhotoGFalleryCats c on c.pCatID = g.FK_pCatID
left join tblNewsCategories n on n.CategoryOd = c.ConnectedNewsCatID 
```

# php - Magento 在 Navigation.php 中调用自定义类别属性

> ID：11317552
> 
> 赞同：0
> 
> 时间：2012-07-03T19:09:15.650
> 
> 标签：php, zend-framework, magento, magento-1.6

（Magento 1.6 版）

我正在尝试显示我创建的用于在 Navigation.php 中使用的自定义类别属性。如果我在 app/design/frontend/default/MYTEMPLATE/catalog/category/view.phtml 或 page.phtml 之类的地方使用该属性，它就可以正常工作。我也可以在后端进行更改而不会出汗。

我正在尝试在 app/code/core/Mage/Catalog/Block/Navigation.php 中显示这个新属性。我已将此文件复制到 app/code/local/Mage/Catalog/Block/Navigation.php 并正在对此文件进行编辑。

这是我尝试使用的代码：

```
// Add Class if Category is a CMS Page 
    if (($level == 0) && ($category->getData('cms_category') == 1)) {
        $classes[] = 'cms-page';
    } 
```

如果有人有更好的方法来解决这个问题，我不会接受这个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:16:49.600

您可能必须实例化一个类别模型。

```
$categoryComplete = Mage::getModel('catalog/category')->load($category->getId()); 
```

# sencha-touch-2 - Sencha Touch 2 在轮播下方添加导航栏

> ID：11317554
> 
> 赞同：0
> 
> 时间：2012-07-03T19:09:27.667
> 
> 标签：sencha-touch-2, carousel, navbar

我使用此链接开始使用 Sencha：[http ://www.sencha.com/learn/getting-started-with-sencha-touch-2/](http://www.sencha.com/learn/getting-started-with-sencha-touch-2/)

我的 Main.js 如下：

```
Ext.define("epiduo_ped.view.Main", 
{
    extend: 'Ext.Carousel',
    requires: 
    [
        'Ext.TitleBar',
        'Ext.Video'
    ],

    config: 
    {
        tabBarPosition: 'bottom',

        items: 
        [
           {
             xtype:   'homepanel'

           },
           {
             xtype:   'page1panel'
           }
        ]
    }
}); 
```

我修改了我的页面以扩展 Ext.Carousel 而不是 Ext.Panel。就允许滑动而言，这很有效，但是，现在我在底部没有导航栏，带有用于在页面之间切换的按钮，这是有道理的，因为我不再扩展 Ext.tab.panel。Sencha 中是否有内置的方式来同时拥有两者，或者这种自定义方式是我必须添加自己的 html 以在底部添加导航栏？无论哪种方式，我都不确定该怎么做。换句话说：我需要一个有 3 个页面的轮播，以便用户可以在它们之间滑动，同时添加用户使用 tabBar 上的按钮在轮播中的页面之间切换的能力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:35:41.750

只需保留您的`Ext.tab.Panel`并在其中添加轮播：

```
Ext.define("epiduo_ped.view.Main", 
{
    extend: 'Ext.tab.Panel',
    requires: 
    [
        'Ext.TitleBar',
        'Ext.Video'
    ],

    config: 
    {
        tabBarPosition: 'bottom',
        fullscreen: true,

        items: [{
            title: 'Home',
            iconCls: 'home',
            html: 'Home Screen'
        },{
            title: 'Contact',
            iconCls: 'user',
            xtype:'carousel',
            items: [{
                html : 'Item 1',
            },{
                html : 'Item 2',
            },{
                html : 'Item 3'
            }]
        }]
    }
}); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T20:26:10.797

好的，我想为其他正在努力完成这项任务的人发布答案。基本上它是一个带有停靠在底部的工具栏的轮播：

[http://www.sencha.com/forum/showthread.php?228733-Control-Carousel-with-Tabbar&s=3e485e109a9b06e351a1429469603273](http://www.sencha.com/forum/showthread.php?228733-Control-Carousel-with-Tabbar&p=850075#post850075)

您只需要使用 Sencha“主题”设置工具栏和图标的样式

[http://docs.sencha.com/touch/2-0/#!/guide/theming](http://docs.sencha.com/touch/2-0/#!/guide/theming)

# c# - SharedResourceDictionary：在 Blend 中编辑资源

> ID：11317556
> 
> 赞同：9
> 
> 时间：2012-07-03T19:09:48.060
> 
> 标签：c#, .net, wpf, performance, xaml

为了优化我的应用程序，我创建了一个 SharedResourceDictionary。有了这个，我在运行时节省了大约 250 mb 的内存，所以效果很好。

我的问题是在设计时，在 Blend 4 中，我无法再访问我的资源。要修改模板（witch 在我的资源文件中），我通常右键单击我的控件，然后选择 Edit Template --> Edit Current，如下图所示：

![在此处输入图像描述](../Images/0663ea602bad754eeb9c5213555bd494.png)

我需要以这种方式修改我的模板，它比进入我的资源文件并找到好的模板要快 100 倍......我有很多资源......

我的 SharedResourceDictionary 是这样实现的（在网上找到）：

```
public class SharedResourceDictionary : ResourceDictionary
{
    /// <summary>
    /// Internal cache of loaded dictionaries 
    /// </summary>
    public static Dictionary<Uri, ResourceDictionary> _sharedDictionaries =
        new Dictionary<Uri, ResourceDictionary>();

    /// <summary>
    /// Local member of the source uri
    /// </summary>
    private Uri _sourceUri;

    /// <summary>
    /// Gets or sets the uniform resource identifier (URI) to load resources from.
    /// </summary>
    public new Uri Source
    {
        get
        {
            if (IsInDesignMode)
                return base.Source;

            return _sourceUri;
        }
        set
        {
            _sourceUri = value;

            if (!_sharedDictionaries.ContainsKey(value))
            {
                // If the dictionary is not yet loaded, load it by setting
                // the source of the base class
                base.Source = value;

                // add it to the cache
                _sharedDictionaries.Add(value, this);
            }
            else
            {
                // If the dictionary is already loaded, get it from the cache
                MergedDictionaries.Add(_sharedDictionaries[value]);
            }
        }
    }

    /// <summary>
    /// Check if we are in Blend to prevent error
    /// </summary>
    public bool IsInDesignMode
    {
        get
        {
            return
            (bool)
            DependencyPropertyDescriptor.FromProperty(DesignerProperties.IsInDesignModeProperty,
            typeof(DependencyObject)).Metadata.DefaultValue;
        }
    }
} 
```

有人知道是否有解决方案？由于内存改进，我真的想保留这个共享字典，但我也想轻松修改我的资源......

任何线索将不胜感激。谢谢你。

编辑：

这样做（SharedResourceDictionary），我也有静态资源的问题：

```
Provide value on 'System.Windows.Markup.StaticResourceHolder' threw an exception. 
```

当我将它们更改为动态资源时，它可以工作，或者如果我通过简单的 ResourceDictionary 更改 SharedResourceDictionary 它也可以工作。该项目可以编译，但正如我所说，我无法在没有修改的情况下编辑资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:22:38.660

您正在为 .NET 4 进行编译吗？

您可能遇到了无法正确扫描 ResourceDictionaries 的错误。

有人说您必须在 App.xaml 级别（在 Application.Resources 中）添加您的 ResourceDictionaries，并添加一个虚拟的默认样式。

这可能对您不起作用，因为您似乎在控制中添加资源。

[http://blogs.windowsclient.net/rob_relyea/archive/2010/04/26/my-staticresource-reference-worked-differently-with-wpf-4-rc-than-it-does-with-wpf-4- rtm.aspx](http://blogs.windowsclient.net/rob_relyea/archive/2010/04/26/my-staticresource-reference-worked-differently-with-wpf-4-rc-than-it-does-with-wpf-4-rtm.aspx)

[将合并词典添加到合并词典](https://stackoverflow.com/questions/3419543/adding-a-merged-dictionary-to-a-merged-dictionary)

[引用包含合并字典的资源字典时遇到问题](https://stackoverflow.com/questions/1229395/trouble-referencing-a-resource-dictionary-that-contains-a-merged-dictionary)

[http://connect.microsoft.com/VisualStudio/feedback/details/553528/defaultstylekey-style-not-found-in-inner-mergeddictionaries](http://connect.microsoft.com/VisualStudio/feedback/details/553528/defaultstylekey-style-not-found-in-inner-mergeddictionaries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T02:57:29.790

实际上，使用此功能是有问题的。=(

也许将来事情会变得更好，不知道是否会有所帮助，但您可以尝试不同的实现： [WPF SharedResourceDictionary](https://stackoverflow.com/questions/8712228/wpf-sharedresourcedictionary/10451295#10451295) （但不保证它会起作用）

由于设计时出现问题，我放弃了使用 SharedResourceDictionary，只有当项目 100% 完成时，我才会重新使用。

# jquery - 在 ASP.Net MVC3 中使用 jQuery 动态填充下拉列表

> ID：11317566
> 
> 赞同：1
> 
> 时间：2012-07-03T19:10:35.143
> 
> 标签：jquery, asp.net, asp.net-mvc-3, drop-down-menu

我有两个模型：

```
public class ProfessorModels
{
    public string FullName { get; set; }
    public int ID { get; set; }
} 
```

和

```
public class ClassModels
{
    public int ID { get; set; }
    public string Professor { get; set; }
    public decimal Name { get; set; }
} 
```

在我的视图中有一个添加类的表单：

```
@model MvcApp.Models.ClassModels

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>ClassModels</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

我想在班级视图中添加一个下拉菜单，其中列出了所有可用的教授。教授在 db 中，我可以轻松地从控制器调用 db 并将所有教授加载到某个列表/数组中。**我需要有关如何使用jQuery**用教授填充下拉列表的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T01:58:57.873

在您的控制器中：

```
 [HttpGet]
    public virtual JsonResult LoadInfo()
    {
        var query = _repository.GetInformation(); //Here you return the data. 
        return Json(query, JsonRequestBehavior.AllowGet);
    } 
```

那么在你看来：

```
<select id="info"></select> 
```

然后使用 jQuery 加载下拉列表

```
function LoadInfo() {

    $.getJSON("@Url.Action(MVC.ControllerName.MethodName())", null,
        function (data) {

            $("#info").empty();

            $.each(data, function () {
                $("#info").append($("<option />").val(this.Id).text(this.Name));
            });

        });
} 
```

这假定 Id 和 Name 是您的对象的属性。您可以使用 ID 和 FullName，具体取决于您正在加载的下拉菜单。我还使用 T4MVC 来获取不同的方法名称。

希望这可以帮助，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T19:21:38.367

有一个`action`返回教授列表的方法

```
public ActionResult GetProfessors()
{
  var professorList=repo.GetProfessors(); //get list of professor object
  return Json(professorList,JsonRequestBehavior.AllowGet);
} 
```

现在在您的视图中，有一个下拉菜单

```
<select id="listProfessors"></select> 
```

使用 jQuery ajax 将数据加载到文档`ready`事件上的此元素。在您的视图中添加以下脚本。

```
<script type="text/javascript">
  $(function(){
    var items="";
    $.getJSON("@Url.Action("GetProfessors","YourControllerName")",function(data){

        $.each(data,function(index,item){
           items+="<option value='"+item.ID+"'>"+item.FullName+"</option>";
        });
        $("#listProfessors").html(items);
    });

  });    
</script> 
```

假设您的控制器名称是`YourController`并且您已将 jQuery 正确加载到此页面中。

# python - PyGTK：无法将文本文件拖放到我的应用程序中

> ID：11317570
> 
> 赞同：0
> 
> 时间：2012-07-03T19:10:59.850
> 
> 标签：python, drag-and-drop, gtk, pygtk

我正在尝试将我的文本文件查看器配置为通过将文件拖到文件上来打开文件。我查看了几个教程并尝试模仿它们，但我的小部件似乎从未收到“drag_data_received”信号。这里，self.topLevel 是一个 gtk.Window 小部件，是我的应用程序的根，这是设置它的代码的最后一点。我已经确认将文本文件拖到它上面根本不会调用 OnDrop。

```
def OnDrop(widget, context, x, y, sel, targetType, timestamp):
    print context.actions
    print context.targets
    return True

self.topLevel.connect("drag_data_received", OnDrop)
self.topLevel.drag_dest_set(gtk.DEST_DEFAULT_DROP |
                            gtk.DEST_DEFAULT_MOTION |
                            gtk.DEST_DEFAULT_HIGHLIGHT, [("text/*", 0, 0)], gtk.gdk.ACTION_COPY)

self.topLevel.show_all() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:29:04.303

我意识到我的应用程序正在接收信号，但是我将所有内容放到上面的 TextView 小部件（因为它占据了它的大部分窗口）正在吸收这些信号，而不是调用我的回调函数；将文件放到应用程序的任何其他部分修复它。我通过调用 TextView 的 drop_dest_unset 函数让它工作。

# c# - ASP.NET WebAPI + 肥皂

> ID：11317572
> 
> 赞同：30
> 
> 时间：2012-07-03T19:11:04.723
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

WebAPI 是否支持 SOAP？我正在尝试在 MVC4 中编写一个 SOAP 服务器，虽然我可以在 WCF 中做到这一点，但似乎 WebAPI 正在取代它，但我看不到在其中使用 SOAP 的方法，只是使用 REST 样式接口的 JSON / XML。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-03T19:15:12.880

引用 Scott Guthrie 的话：过去几年 Web API 的兴起——服务通过普通的 HTTP 而不是通过更正式的服务合同（如 SOAP 或 WS*）公开。

所以我会说不。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-14T16:11:09.477

您应该考虑查看[ServiceStack](https://servicestack.net/)，它允许您的相同服务支持 REST + SOAP API，尽管由于 SOAP 仅适用于[HTTP POST，因此它有一些限制](https://github.com/ServiceStack/ServiceStack/wiki/SOAP-support)

## [添加 ServiceStack 参考](https://github.com/ServiceStack/ServiceStack/wiki/Add-ServiceStack-Reference)

作为 SOAP 的替代方案，ServiceStack 提供了 WCF 的**Add Service Reference**的更好替代方案，它可以使用内置于[ServiceStackVS的](https://github.com/ServiceStack/ServiceStack/wiki/Creating-your-first-project)[Add ServiceStack Reference](https://github.com/ServiceStack/ServiceStack/wiki/Add-ServiceStack-Reference)功能从 URL 生成类型化 API 。

## 相对于 WCF 的优势

*   **Simple**使用一个小的 T4 模板来保存生成的 POCO 类型。更新就像重新运行 T4 模板一样简单
*   **Versatile** Clean DTO 适用于所有 JSON、XML、JSV、MsgPack 和 ProtoBuf[通用服务客户端](https://github.com/ServiceStack/ServiceStack/wiki/C%23-client#built-in-clients)
*   **可重用**生成的 DTO 不与任何端点或格式耦合。默认值既是部分的又是虚拟的，以最大限度地重复使用
*   **与 RPC 服务相比，基于弹性**消息传递的服务具有许多[优势](https://github.com/ServiceStack/ServiceStack/wiki/Advantages-of-message-based-web-services)
*   **灵活**的 DTO 生成是可定制的，服务器和客户端可以覆盖内置默认值
*   **在 DTO 上注释的**集成**丰富服务元数据，外部访问时排除[内部服务](https://github.com/ServiceStack/ServiceStack/wiki/Restricting-Services)**

 **## WebAPI 和 WCF 都促进 RPC 方法签名

有趣的是，尽管[WebAPI ApiController 方法在使用 C# RPC 方法创建和定义聊天 Web 服务时采用了](http://mono.servicestack.net/files/slide-34.png)[与 WCF](http://mono.servicestack.net/files/slide-35.png)相同的RPC 方法，但它们仍然无法支持同一公司制定的自己的 SOAP 标准。

### ServiceStack 支持具有相同服务的 REST、SOAP、HTML 和 MQ 端点

[这是对 ServiceStack 的基于消息的设计](https://github.com/ServiceStack/ServiceStack/wiki/What-is-a-message-based-web-service%3F)的证明，它提供[了许多优点，尽管](https://github.com/ServiceStack/ServiceStack/wiki/Advantages-of-message-based-web-services)**同一服务**能够支持多个端点和格式，包括 REST、SOAP 和 MQ 端点，以及[生成服务器端或客户端 HTML 网站](http://razor.servicestack.net/)，如果你需要它。这是一个丰富的[Northwind 数据库编辑器](http://northwind.mattjcowan.com/customers)的示例，因为它是使用 ServiceStack 构建的，它自动启用了一个类型化的 REST API，该 API 能够被丰富的本地桌面客户端、移动应用程序和单页应用程序调用。

### SOAP 对于远程服务来说仍然是一个糟糕的选择

尽管出于互操作性、可访问性和向后兼容性的原因支持 SOAP，但我们不建议将其用于构建 Web 服务平台，因为它不必要地复杂、脆弱、缓慢和冗长，并且有更好的替代方案可供使用。我[在 InfoQ 的采访中更详细地解释了这一点](http://www.infoq.com/articles/interview-servicestack)。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-07-03T19:36:08.900

WEB API 是微软对基于 REST 的 API 的回应。如果您想要 SOAP，请使用 WCF。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-10-18T09:32:50.073

WebApi 确实不支持开箱即用的 SOAP。但它是一个非常灵活的框架，您可以“调整”它来处理 SOAP：没有什么可以阻止您手动解析接收到的 SOAP 消息（它们毕竟是纯 XML）并手动将响应生成为 XML 字符串，然后将它们与适当的内容类型标头（您甚至可以为此[编写自己的内容格式化程序](http://www.asp.net/web-api/overview/formats-and-model-binding/media-formatters)）。

根据您的需求和您现有的代码库，这可能值得付出努力，或者您可能希望使用更符合 SOAP 的技术，例如 WCF 或已经提到的[ServiceStack](http://www.servicestack.net/)框架。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-14T15:10:03.607

您可能想查看[ServiceStack](http://www.servicestack.net/)，它应该在一个界面中同时支持 SOAP 和 REST，没有任何麻烦。它声称[比 WebAPI 更适合用于 Web 服务](https://github.com/ServiceStack/ServiceStack/wiki/Advantages-of-message-based-web-services)。

我不能声称知道所有关于差异的事情，但他们声称的问题是 Web API 方法固有的问题，我可以从经验中说*是*真实的 - API 演变（在实际项目中不可避免）在 Web api 中非常棘手。当然，web api 不支持 SOAP。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-01-05T03:12:16.830

它不像 Wed API 支持 SOAP，但由于 SOAP 只是一个使用 XML 的标准并且它传播 HTTP，您可以使用 Web API 公开 POST 服务来读取 XML 并使用 XPath 找到您需要的节点，然后反序列化节点到对象。

首先，您需要向 ConfigureServices 添加 XML 支持

```
public void ConfigureServices(IServiceCollection services)
    {

        services.AddMvc()
            .SetCompatibilityVersion(CompatibilityVersion.Version_2_1)
            .AddXmlSerializerFormatters();
    } 
```

然后在您的控制器中，您只需要添加一个接收 XMLDocument 的方法并使用 XPath 搜索您感兴趣的节点（基本上删除肥皂信封、标题、正文），然后您可以反序列化该对象。在我的例子中，我使用 WSDL 添加服务引用，然后反序列化对象。

```
[HttpPost("reservationxml")]
    public void CreateReservationFromTSW(XmlDocument soapCreateReservationRq)
    {
        XmlNamespaceManager nsmgr = new XmlNamespaceManager(soapCreateReservationRq.NameTable);
        nsmgr.AddNamespace("r", "http://soa.company.com/ReservationEnt");
        nsmgr.AddNamespace("s", "http://www.w3.org/2003/05/soap-envelope");

        XmlNodeList xmlNodeList = soapCreateReservationRq.SelectNodes("s:Envelope/s:Body/r:CreateReservationRq",nsmgr);
        XmlNode xmlnode = xmlNodeList[0];
        XmlSerializer serial = new XmlSerializer(typeof(ServiceReference1.CreateReservationRqType));
        ServiceReference1.CreateReservationRqType rq = (ServiceReference1.CreateReservationRqType)serial.Deserialize(new XmlNodeReader(xmlnode));

    } 
```

正如您在下图中看到的那样，尝试使用您的服务的服务使用带有 Accept-Encoding: gzip 的请求方法 POST。这就是为什么您可以公开可用于 SOAP 服务的 Web API。 [![在此处输入图像描述](../Images/66a3cce66e706ed4e8f5eb0d20a8b465.png)](https://i.stack.imgur.com/qkXjy.png)**

# javascript - 如何发出跨浏览器的窗口卸载请求？

> ID：11317573
> 
> 赞同：5
> 
> 时间：2012-07-03T19:11:08.617
> 
> 标签：javascript, jquery, flash, onbeforeunload

我有一个 Flash 游戏，我试图保存用户关闭浏览器选项卡时的状态。它使用以下 jquery 代码：

```
//Called from Flash when window closes
function sendRequest(url, params) {
    $.ajax({
      type: "POST",
      async: false,
      url: url,
      data: params
    })
}

$(window).unload(function() {
  //Make Flash attempt to save the game when the window closes.
  //Flash gets the necessary data and calls sendRequest()
  document["flashGame"].saveBeforeUnload();
}); 
```

*   火狐：正常工作
*   Chrome：**重新加载**时正常工作，但在**关闭选项卡**或**关闭浏览器时不能正常工作**
*   IE（所有版本）：根本不工作

我希望它在所有浏览器中都能正常工作，但最重要的是 Chrome（我们的用户中没有多少人拥有 IE）。

Flash 正确调用了 sendRequest （在所有浏览器中，通过警报测试），所以我不相信问题来自 Flash，但它可能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T08:47:52.990

简短的回答是你不能。

[onbeforeunload](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)事件最初是由 Microsoft 引入的，以允许标准的确认对话框。现在大多数浏览器都以原始形式支持它，并且在大多数情况下，允许执行一个简短的、非交互式的函数（例如，您可以在 localStorage 中记录您的状态）。但是，正如[跨浏览器 jQuery API 中所述](http://api.jquery.com/unload/)，这是不可靠的：

> 卸载事件的确切处理因浏览器版本而异。例如，某些版本的 Firefox 会在点击链接时触发该事件，但不会在窗口关闭时触发。在实际使用中，应该在所有支持的浏览器上测试行为，并与专有的 beforeunload 事件进行对比。

由于当用户要求结束页面（以及脚本）时，与执行任务相关的许多潜在的安全问题，这可能是不可靠的，直到（并且如果）进行认真的规范化工作以准确准确在`onbeforeunload`回调中完成。

对于可预见的未来，建议不要依赖`onbeforeunload`而是使用其他方案，例如持续后台保存或大的“保存”按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:20:59.430

试试`window.onbeforeunload`。我在[jQueryBug Tracker](http://bugs.jquery.com/ticket/10509)中发现这是一个可能的解决方案：

```
window.onbeforeunload = function() { return "text"; } 
```

# msbuild - 如果从 Jenkins 调用而不是 CMD，MSBuild 会在项目中抛出“名称太长”

> ID：11317575
> 
> 赞同：2
> 
> 时间：2012-07-03T19:11:15.987
> 
> 标签：msbuild, jenkins

如果我手动运行以下命令，一切都可以正常编译。

```
cd D:\Jenkins\[redacted]\Api>
C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe /property:Configuration=Release Api.sln 
```

如果我从 Jenkins MSBuild 运行相同的命令（复制/粘贴），我的一个项目会出现以下错误

```
"D:\Jenkins\[Redacted]\Logic\[Redacted].Api2.Logic.csproj" (default target) (26) ->
(GenerateSatelliteAssemblies target) -> 
  ALINK : error AL1061: Cannot set option 'description' because 'The file name is too long. ' 
```

为什么 MSBuild 在通过 CMD 而不是通过 Jenkins 运行时可以工作？它看起来不像是权限问题，而且在几个月的休息时间里没有触及的众多项目中只有一个。

甚至错误消息也有点奇怪 - assemblyinfo 中没有描述，并且有更长的文件名可以在解决方案中编译而没有问题。

这可能是什么原因造成的？我能找到的最好的是这个[http://connect.microsoft.com/VisualStudio/feedback/details/728795/error-al1061-when-building-satellite-assemblies-with-long-names](http://connect.microsoft.com/VisualStudio/feedback/details/728795/error-al1061-when-building-satellite-assemblies-with-long-names)没有用。

# python - Python中等效的表面曲率Matlab

> ID：11317579
> 
> 赞同：6
> 
> 时间：2012-07-03T19:11:26.657
> 
> 标签：python, matlab, numpy, scipy, curve-fitting

我试图计算由点数组（x，y，z）给出的曲面曲率。最初我试图拟合多项式方程 z=a + bx + cx^2 + dy + exy + fy^2) 然后计算高斯曲率

> $ K = \frac{F_{xx}\cdot F_{yy}-{F_{xy}}^2}{(1+{F_x}^2+{F_y}^2)^2} $

但是，如果表面复杂，问题就很合适。我发现这个 Matlab 代码可以数值计算曲率。我想知道如何在 Python 中做同样的事情。

```
function [K,H,Pmax,Pmin] = surfature(X,Y,Z),
% SURFATURE -  COMPUTE GAUSSIAN AND MEAN CURVATURES OF A SURFACE
%   [K,H] = SURFATURE(X,Y,Z), WHERE X,Y,Z ARE 2D ARRAYS OF POINTS ON THE
%   SURFACE.  K AND H ARE THE GAUSSIAN AND MEAN CURVATURES, RESPECTIVELY.
%   SURFATURE RETURNS 2 ADDITIONAL ARGUEMENTS,
%   [K,H,Pmax,Pmin] = SURFATURE(...), WHERE Pmax AND Pmin ARE THE MINIMUM
%   AND MAXIMUM CURVATURES AT EACH POINT, RESPECTIVELY.

% First Derivatives
[Xu,Xv] = gradient(X);
[Yu,Yv] = gradient(Y);
[Zu,Zv] = gradient(Z);

% Second Derivatives
[Xuu,Xuv] = gradient(Xu);
[Yuu,Yuv] = gradient(Yu);
[Zuu,Zuv] = gradient(Zu);

[Xuv,Xvv] = gradient(Xv);
[Yuv,Yvv] = gradient(Yv);
[Zuv,Zvv] = gradient(Zv);

% Reshape 2D Arrays into Vectors
Xu = Xu(:);   Yu = Yu(:);   Zu = Zu(:); 
Xv = Xv(:);   Yv = Yv(:);   Zv = Zv(:); 
Xuu = Xuu(:); Yuu = Yuu(:); Zuu = Zuu(:); 
Xuv = Xuv(:); Yuv = Yuv(:); Zuv = Zuv(:); 
Xvv = Xvv(:); Yvv = Yvv(:); Zvv = Zvv(:); 

Xu          =   [Xu Yu Zu];
Xv          =   [Xv Yv Zv];
Xuu         =   [Xuu Yuu Zuu];
Xuv         =   [Xuv Yuv Zuv];
Xvv         =   [Xvv Yvv Zvv];

% First fundamental Coeffecients of the surface (E,F,G)
E           =   dot(Xu,Xu,2);
F           =   dot(Xu,Xv,2);
G           =   dot(Xv,Xv,2);

m           =   cross(Xu,Xv,2);
p           =   sqrt(dot(m,m,2));
n           =   m./[p p p]; 

% Second fundamental Coeffecients of the surface (L,M,N)
L           =   dot(Xuu,n,2);
M           =   dot(Xuv,n,2);
N           =   dot(Xvv,n,2);

[s,t] = size(Z);

% Gaussian Curvature
K = (L.*N - M.^2)./(E.*G - F.^2);
K = reshape(K,s,t);

% Mean Curvature
H = (E.*N + G.*L - 2.*F.*M)./(2*(E.*G - F.^2));
H = reshape(H,s,t);

% Principal Curvatures
Pmax = H + sqrt(H.^2 - K);
Pmin = H - sqrt(H.^2 - K); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T20:27:02.950

我希望我来这里不会太晚。我处理完全相同的问题（我工作的公司的产品）。

您必须考虑的第一件事是这些点必须代表一个矩形网格。X 是二维数组，Y 是二维数组，Z 是二维数组。如果您有一个非结构化浊点，具有单个矩阵形状 Nx3（第一列是 X，第二列是 Y，第三列是 Z），那么您不能应用这个 matlab 函数。

我已经开发了这个 Matlab 脚本的 Python 等价物，我只计算 Z 矩阵的平均曲率（我想你可以从脚本中得到启发并调整它以获得所有你想要的曲率），通过假设忽略 X 和 Y网格是正方形的。我认为您可以“掌握”我在做什么和如何做，并根据您的需要进行调整：

注意：这假设您的数据点相隔 1 个单位。

```
def mean_curvature(Z):
    Zy, Zx  = numpy.gradient(Z)
    Zxy, Zxx = numpy.gradient(Zx)
    Zyy, _ = numpy.gradient(Zy)

    H = (Zx**2 + 1)*Zyy - 2*Zx*Zy*Zxy + (Zy**2 + 1)*Zxx
    H = -H/(2*(Zx**2 + Zy**2 + 1)**(1.5))

    return H 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-12T04:43:03.827

万一其他人偶然发现了这个问题，为了完整起见，我提供了以下受 heltonbiker 启发的代码。

这是一些用于计算高斯曲率的 python 代码，如“使用几何固有权重从距离图像计算表面曲率”*，T. Kurita 和 P. Boulanger，1992 中的等式 (3) 所述。

```
import numpy as np

def gaussian_curvature(Z):
    Zy, Zx = np.gradient(Z)                                                     
    Zxy, Zxx = np.gradient(Zx)                                                  
    Zyy, _ = np.gradient(Zy)                                                    
    K = (Zxx * Zyy - (Zxy ** 2)) /  (1 + (Zx ** 2) + (Zy **2)) ** 2             
    return K 
```

笔记：

1.  heltonbiker 的方法本质上是论文中的等式（4）
2.  heltonbiker 的方法在 Wikipedia 上的“Surfaces in 3D space, Mean Curvature”上也是一样的： [http](http://en.wikipedia.org/wiki/Mean_curvature) ://en.wikipedia.org/wiki/Mean_curvature ）
3.  如果您同时需要 K 和 H，则在 heltonbiker 代码中包含“K”（高斯曲率）的计算并返回 K 和 H。节省一点处理时间。
4.  我假设曲面被定义为两个坐标的函数，例如 z = Z(x, y)。在我的例子中 Z 是一个范围图像。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-09T22:46:02.427

虽然很晚，但发帖无妨。我修改了“surfature”函数以在 Python 中使用。免责声明：我不是作者原创的“surfature.m”代码。应得的学分。仅介绍 Python 实现。

```
def surfature(X,Y,Z):
    # where X, Y, Z matrices have a shape (lr+1,lb+1)

    #First Derivatives
    Xv,Xu=np.gradient(X)
    Yv,Yu=np.gradient(Y)
    Zv,Zu=np.gradient(Z)

    #Second Derivatives
    Xuv,Xuu=np.gradient(Xu)
    Yuv,Yuu=np.gradient(Yu)
    Zuv,Zuu=np.gradient(Zu)   

    Xvv,Xuv=np.gradient(Xv)
    Yvv,Yuv=np.gradient(Yv)
    Zvv,Zuv=np.gradient(Zv) 

    #Reshape to 1D vectors
    nrow=(lr+1)*(lb+1) #total number of rows after reshaping
    Xu=Xu.reshape(nrow,1)
    Yu=Yu.reshape(nrow,1)
    Zu=Zu.reshape(nrow,1)
    Xv=Xv.reshape(nrow,1)
    Yv=Yv.reshape(nrow,1)
    Zv=Zv.reshape(nrow,1)
    Xuu=Xuu.reshape(nrow,1)
    Yuu=Yuu.reshape(nrow,1)
    Zuu=Zuu.reshape(nrow,1)
    Xuv=Xuv.reshape(nrow,1)
    Yuv=Yuv.reshape(nrow,1)
    Zuv=Zuv.reshape(nrow,1)
    Xvv=Xvv.reshape(nrow,1)
    Yvv=Yvv.reshape(nrow,1)
    Zvv=Zvv.reshape(nrow,1)

    Xu=np.c_[Xu, Yu, Zu]
    Xv=np.c_[Xv, Yv, Zv]
    Xuu=np.c_[Xuu, Yuu, Zuu]
    Xuv=np.c_[Xuv, Yuv, Zuv]
    Xvv=np.c_[Xvv, Yvv, Zvv]

    #% First fundamental Coeffecients of the surface (E,F,G)
    E=np.einsum('ij,ij->i', Xu, Xu) 
    F=np.einsum('ij,ij->i', Xu, Xv) 
    G=np.einsum('ij,ij->i', Xv, Xv) 

    m=np.cross(Xu,Xv,axisa=1, axisb=1)
    p=sqrt(np.einsum('ij,ij->i', m, m))
    n=m/np.c_[p,p,p]

    #% Second fundamental Coeffecients of the surface (L,M,N)
    L= np.einsum('ij,ij->i', Xuu, n) 
    M= np.einsum('ij,ij->i', Xuv, n) 
    N= np.einsum('ij,ij->i', Xvv, n) 

    #% Gaussian Curvature
    K=(L*N-M**2)/(E*G-L**2)
    K=K.reshape(lr+1,lb+1)

    #% Mean Curvature
    H = (E*N + G*L - 2*F*M)/(2*(E*G - F**2))
    H = H.reshape(lr+1,lb+1)

    #% Principle Curvatures
    Pmax = H + sqrt(H**2 - K)
    Pmin = H - sqrt(H**2 - K)

    return Pmax,Pmin 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-29T21:01:46.107

heltonbiker 关于平均曲率的回答很好，但它假设二维数组中的数据点彼此相距 1 个单位。例如，如果您的数据点彼此相距 0.3 个单位，则您需要将答案中的每个数据点除以 0.3 平方 (0.09) 以解决此问题。

对于迈克尔回答中的高斯曲率，您需要将每个数据点乘以`(1/.3**2)**2`(123.45)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T14:29:05.633

可在以下位置找到 BSD 许可的用于表面拟合的 Python 源代码

[https://github.com/zunzun/pyeq2](https://github.com/zunzun/pyeq2)

（我是作者）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-07T13:47:06.733

我建议使用该`igl`软件包，请注意它仍处于测试阶段。以下是如何计算igl 上的主[曲率](https://libigl.github.io/libigl-python-bindings/tut-chapter1/)。

目前你必须通过 conda 安装，但以后会在 PyPi 上发布轮子。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-03T19:17:31.713

[Python中的点积](https://stackoverflow.com/questions/4093989/dot-product-in-python)

[Python中的派生词](https://stackoverflow.com/questions/9876290/how-do-i-compute-derivative-using-numpy)

[在 Python 中重塑](https://stackoverflow.com/questions/6627647/reshaping-a-numpy-array-in-python)

奇怪的是，所有这些都是 SO 问题。下次去看看，你可能会找到答案。另请注意，您需要使用 NumPy for Python 来执行此操作。使用起来相当直观。Matlibplot（或类似的东西）可能对你也有帮助！

# c# - 在 C# 中返回一个字符串方法

> ID：11317587
> 
> 赞同：0
> 
> 时间：2012-07-03T19:12:05.917
> 
> 标签：c#, string, class, methods, return

我试图从`SalesPerson`对象返回一个字符串`fullNameMethod`到主程序，但这不起作用。我究竟做错了什么？

```
class SalesPerson
{
    string firstName, lastName;
    public string FirstName { get { return firstName; } set { firstName = value; } }
    public string LastName { get { return lastName; } set { lastName = value; } }

    public SalesPerson(string fName, string lName)
    {
        firstName = fName;
        lastName = lName;
    }

    public string fullNameMethod()
    {
        string x = firstName + " " + lastName;
        return x;
    }
}

class Program
{
    static void Main(string[] args)
    {
        SalesPerson x = new SalesPerson("john", "Doe");
        Console.WriteLine("{0}", x.fullNameMethod);
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T19:13:23.910

您当前正在尝试访问属性之类的方法

```
Console.WriteLine("{0}",x.fullNameMethod); 
```

它应该是

```
Console.WriteLine("{0}",x.fullNameMethod()); 
```

或者，您可以使用

```
public string fullName
{
   get
   {
        string x = firstName + " " + lastName;
        return x;
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T19:28:01.723

你忘记了最后的（）。它不是一个变量，而是一个函数，当没有参数时，你仍然需要最后的 ()。

对于未来的编码实践，我强烈建议对代码进行一些修改，因为这可能会令人沮丧：

```
 public string LastName
 { get { return lastName; } set { lastName = value; } } 
```

如果这里发生了任何类型的处理（幸好这里没有发生），它会变得非常混乱。如果您要将代码传递给其他人，我建议：

```
public string LastName
{
  get
  {
     return lastName;
  }
  set
  {
     lastName = value;
  }
} 
```

它要长得多，但在浏览一大段代码时更容易阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T19:15:23.330

您不必为此提供方法。您可以改为创建这样的属性：

```
class SalesPerson
{
    string firstName, lastName;
    public string FirstName { get { return firstName; } set { firstName = value; } }
    public string LastName { get { return lastName; } set { lastName = value; } }
    public string FullName { get { return this.FirstName + " " + this.LastName; } }
} 
```

该类甚至可以缩短为：

```
class SalesPerson
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string FullName { 
       get { return this.FirstName + " " + this.LastName; } 
    }
} 
```

然后可以像访问任何其他属性一样访问该属性：

```
class Program
{
    static void Main(string[] args)
    {
        SalesPerson x = new SalesPerson("John", "Doe");
        Console.WriteLine(x.FullName); // Will print John Doe
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T19:13:24.683

用于`x.fullNameMethod()`调用方法。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-07-19T21:10:04.593

这些答案都太复杂了*！*

他写方法的方式很好。问题在于他调用该方法的位置。他没有在方法名后面加上括号，所以编译器认为他试图从变量而不是方法中获取值。

在 Visual Basic 和[Delphi](https://en.wikipedia.org/wiki/Embarcadero_Delphi)中，这些括号是可选的，但在 C# 中，它们是必需的。因此，要更正原始帖子的最后一行：

```
Console.WriteLine("{0}", x.fullNameMethod()); 
```

# python - 如何在python中为url_encode转义管道（|）符号

> ID：11317588
> 
> 赞同：14
> 
> 时间：2012-07-03T19:12:17.967
> 
> 标签：python

我在 python 中遇到了 urllib.url_encode 的问题。投注用一些代码解释：

```
>>> from urllib import urlencode
>>> params = {'p' : '1 2 3 4 5&6', 'l' : 'ab|cd|ef'}
>>> urlencode(params)
'p=1+2+3+4+5%266&l=ab%7Ccd%7Cef' 
```

我想将管道（'|'）保留在 l 参数中。你能告诉我怎么做吗？

结果应该是

```
'p=1+2+3+4+5%266&l=ab|cd|ef' 
```

PS：我不想手动将 URL 放在一起，而是使用 urlencode。

谢谢-帕特

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-03T19:17:51.667

> 将映射对象或二元素元组序列转换为“百分比编码”字符串[...]

[urlencode()](http://docs.python.org/library/urllib.html?highlight=urlencode#urllib.urlencode)方法按预期运行。如果要阻止编码，则可以先对整个对象进行编码，然后用管道替换编码的字符。

```
>>> u = urlencode(params)
>>> u.replace('%7C', '|')
'p=1+2+3+4+5%266&l=ab|cd|ef' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T02:15:18.343

在 Python 3 中更简单：

```
urllib.parse.urlencode(params, safe='|') 
```

# android - ADT 20 的 AVD 创建对话框没有设备选择下拉菜单？

> ID：11317589
> 
> 赞同：0
> 
> 时间：2012-07-03T19:12:21.820
> 
> 标签：android, android-emulator, adt, android-2.2-froyo, avd

在 android 开发者网站上发布的消息称，新的 ADT 20 将具有为市场上可用的实际设备（如 Asus Nexus 7、摩托罗拉 XOOM 等）创建 AVD 的功能。

但升级到 ADT 后，我仍然看到旧的 AVD 创建对话框，并且没有设备下拉菜单。它是发布了 ADT 20 还是他们仍在研究的东西？

谢谢阿赫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:24:32.330

Reviewing the release notes I do not see any indication that they added support for the specific platforms mentioned.

[http://developer.android.com/tools/sdk/tools-notes.html#notes](http://developer.android.com/tools/sdk/tools-notes.html#notes)

So I would guess that it was not included.

# google-app-engine - Hbase 和 GAE 数据存储兼容性

> ID：11317595
> 
> 赞同：1
> 
> 时间：2012-07-03T19:12:47.417
> 
> 标签：google-app-engine, nosql, google-cloud-datastore, hbase

Hbase 和 DataSore 在设计和 API 方面的兼容性如何。也就是说，如果我将我的 GAE 应用程序转换为完全在本地（非 GAE）设置中运行，那么将数据迁移到 Hbase 需要多少努力？是否有很多不合适的地方（例如，创建索引的方式等）。可以写一个小层来抽象出差异。

# c# - webclient 标头中的两个“Content-Type”

> ID：11317596
> 
> 赞同：0
> 
> 时间：2012-07-03T19:12:49.637
> 
> 标签：c#, header, webclient, content-type

```
 var uri = URL_BASE + myuri
                          string.Format("providers/{0}/items?feed={1}&id={2}&type=cf", provider, feed, zipFileNoPath);
                var webClient = new WebClient();
                webClient.Credentials = new NetworkCredential(email, password);
                webClient.Headers.Add("Accept", "*/*");
                webClient.Headers.Add("Content-Type", "application/octet-stream");
                webClient.UploadFileAsync(new Uri(uri), "POST", zipFile); 
```

对于上面的代码，当我从提琴手观看时，我在标题中看到了两个“Content-Type”，一个是 Content-Type: multipart/form-data; 边界=---------------------8cf27396e080e0a，另一个是Content-Type: application/octet-stream 为什么会这样？那谁生效呢，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:52:15.770

使用 UploadData 而不是 UploadFile

```
 var webClient = new WebClient();
            webClient.Credentials = new NetworkCredential(email, password);                                     
            webClient.UploadDataCompleted += webClient_UploadDataCompleted;
            byte[] fileBytes = File.ReadAllBytes(zipFile);
            webClient.UploadDataAsync(new Uri(uri), "POST", fileBytes); 
```

然后我只会看到一个 Content-Type

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:18:27.363

当二进制数据与其他值一起发布到服务器时，会添加“边界”参数。这是为了让服务器识别数据的边界——边界参数的值是随机的并且被挑选出来，这样字符串就不会出现在发布的数据中（因此可以服务器作为边界）。

我想那`webclient`会自动添加这个，如果是这样，你可以评论我们自己的添加这个标题的行。不幸的是，我不知道 HTTP 规范来判断重复标头是否有效。

# iphone - 如何开启定位服务

> ID：11317598
> 
> 赞同：0
> 
> 时间：2012-07-03T19:13:00.390
> 
> 标签：iphone, ios, service, location

当有人第一次拒绝时，如何从实际应用重新打开定位服务。我可以选择关闭或打开它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:20:07.273

您只能提示他们到屏幕上打开位置服务，如下所示：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString: @"prefs:root=LOCATION_SERVICES"]]; 
```

# php - 用 php 创建谷歌地图图块

> ID：11317602
> 
> 赞同：0
> 
> 时间：2012-07-03T19:13:11.600
> 
> 标签：php, google-maps, png

所以我正在寻找创建类似谷歌地图交通图层的东西

据我所知，他们在服务器上创建 .png 瓷砖，然后将它们覆盖在地图上。

这正是我想做的。创建 .png 瓷砖并将它们覆盖在地图上。我只是不知道我将如何进行编程（最好是 php）来创建那些 .png 瓷砖。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:17:49.450

这可能是学习如何以编程方式在 php 中创建 png 文件的良好第一步： [http ://www.thesitewizard.com/php/create-image.shtml](http://www.thesitewizard.com/php/create-image.shtml)

本质上，您将处理大量 PHP、GD 和图像函数： http: [//php.net/manual/en/ref.image.php](http://php.net/manual/en/ref.image.php)

祝你好运。

然后，您将希望使用 CSS 位置属性将它们放置在彼此之上。

# java - 使用状态模式设计在 Java 中实现通信协议

> ID：11317603
> 
> 赞同：2
> 
> 时间：2012-07-03T19:13:15.277
> 
> 标签：java, design-patterns, protocols, custom-protocol, state-pattern

如果在其他地方回答了这个问题，我们深表歉意；找不到足够的信息来说服自己最好的方法来做到这一点。我也意识到这是一个没有代码的冗长解释，但请告诉我是否应该编写一些示例代码来帮助演示我在做什么。

基本上：

*   使用 System.in/out 在 Java 中实现通信协议
*   当前的方法是实现一种状态模式，其中在上下文类中的 System.in 上实例化 Scanner
*   具体状态调用上下文方法从 Scanner 读取，然后根据 Scanner 返回的值适当地执行操作/转换状态

我使用状态模式的初衷是在从 System.in 解析这样的序列时简化代码（不要询问语法，这是我必须使用的东西）：

*   命令名称=X
*   标题
*   标题信息行
*   内容
*   命令内容行
*   结束内容
*   结束命令

我通常为我期望收到的每种类型的命令定义一个具体的状态。以上述序列为例，我将有一个类似于 {WAITING_FOR_COMMAND, COMMAND_RECEIVED, PARSING_HEADER, PARSING_CONTENTS, PARSING_DONE, COMMAND_PROCESSED} 的状态集。我最初会在 WAITING_FOR_COMMAND，然后当收到“COMMAND NAME=X”时，我会转换到 COMMAND_RECEIVED，然后当“HEADER”进来时，我会转换到 PARSING_HEADER，等等。这种设计使得遍历所有边缘情况协议更容易，并且还使代码在协议被调整时易于更新/维护。显然比大量的 switch 语句和重复的边界检查要好得多。

我遇到的问题是，当我充实我的具体状态行为时，我发现自己在上下文类中声明了越来越多的状态变量，并且知道这可能很糟糕，因为我正在创建非常暴露的接口和非常高的联系上下文和具体的状态类。该协议中的命令序列可以任意长，我需要保存命令序列中每个项目传递的信息，直到命令序列完成。

以上面的命令序列为例，在“COMMAND ID=X”之后，我想在收到“ENDCOMMAND”并完全处理命令后保存值X以备将来使用。在“HEADER”之后，我想在收到“ENDCOMMAND”后保存标题信息以备将来使用，以供实际处理命令时使用。等等等等。现在只需将 commandId 和标头状态变量添加到上下文类中就可以了，但对我来说似乎并不干净或封装得很好。

有没有人对他们如何解决这个问题有任何高层次的建议？有没有更好的使用状态设计模式呢？

只是要注意一些我一直在玩的想法：

*   为每种类型的命令序列定义状态上下文，并在从 System.in 接收到相关命令时调用适当的上下文；这看起来几乎就像拥有巨大的开关块一样混乱，并且似乎过度复杂化了设计
*   设计支持复合 FSM 的成熟 FSM 架构，其中每个命令序列在总体 FSM 中占据其自己的 FSM；这对我来说似乎有点矫枉过正
*   为每个命令序列类型创建具有各种子类的 ProtocolCommand 对象；我可以在转换时将这些传递到每个状态，并在我进行过程中逐渐建立它们……但这会使状态接口变得混乱，并迫使所有状态摄取一个他们不一定会使用的参数

非常感谢！抱歉，这太冗长了，如果我能澄清什么，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:16:58.697

我为这种解析风格使用了一个枚举，每个状态都有一个枚举。一个例子在这里 [http://vanillajava.blogspot.co.uk/2011/06/java-secret-using-enum-as-state-machine.html](http://vanillajava.blogspot.co.uk/2011/06/java-secret-using-enum-as-state-machine.html)

```
interface Context {
    ByteBuffer buffer();
    State state();
    void state(State state);
}
interface State {
    /**
       * @return true to keep processing, false to read more data.
     */
    boolean process(Context context);
}
enum States implements State {
    XML {
        public boolean process(Context context) {
            if (context.buffer().remaining() < 16) return false;
            // read header
            if(headerComplete)
                context.state(States.ROOT);
            return true;
        }
    }, ROOT {
        public boolean process(Context context) {
            if (context.buffer().remaining() < 8) return false;
            // read root tag
            if(rootComplete)
                context.state(States.IN_ROOT);
            return true;
        }
    }
}

public void process(Context context) {
    socket.read(context.buffer());
    while(context.state().process(context));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:06:05.003

我会首先考虑以下几点：

1.  您的状态组件（WAITING_FOR_COMMAND、COMMAND_RECEIVED 等）是应用程序逻辑的核心吗？也就是说，解析器处于什么状态以及转换到什么状态对于应用程序正常工作真的**很重要吗？**每个州将持有的价值观是什么？这些值在一个州与另一个州之间是否有很大差异？如果你的答案是肯定的，那么你可能有一个有效的状态模式案例。但我经常看到状态机被用在它只是矫枉过正的地方。

2.  您的用例似乎更需要命令模式和解释器模式（因为您似乎正在编写语法）。

# oracle11g - 安装 Oracle 表单和报告 11G 时出错

> ID：11317611
> 
> 赞同：-2
> 
> 时间：2012-07-03T19:13:47.603
> 
> 标签：oracle11g, oracleforms

```
]]
[2012-07-04T00:27:15.670+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] Executing a Jaxb workflow ...
[2012-07-04T00:27:15.671+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] Begining Oracle Fusion Middleware Configuration ...
[2012-07-04T00:27:15.671+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] ENTRY ASDomain.connectToAdminServer
[2012-07-04T00:27:15.671+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] ENTRY ASDomain._connectToAdminServer
[2012-07-04T00:27:15.671+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] ENTRY ASDomain._getAdminServer
[2012-07-04T00:27:15.671+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] RETURN: _getAdminServer
[2012-07-04T00:27:15.672+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] reportStartConfigAction: ENTRY........
[2012-07-04T00:27:15.672+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] reportStartConfigAction: eventStatus........oracle.as.provisioning.engine.ConfigEventStatus@fd59e
[2012-07-04T00:27:15.672+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] reportStartConfigAction: 2........
[2012-07-04T00:27:15.672+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] reportStartConfigAction: Set the Extion Id to START........
[2012-07-04T00:27:15.672+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] reportStartConfigAction: Did the assignment...
[2012-07-04T00:27:15.672+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] reportStartConfigAction: EXIT........
[2012-07-04T00:27:16.159+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] RETURN: _connectToAdminServer
[2012-07-04T00:27:16.160+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] RETURN: connectToAdminServer
[2012-07-04T00:27:16.160+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] The action type for asinstance is EXISTS
[2012-07-04T00:27:16.160+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] Instance asinst_1 already exists, continuing with component creation
[2012-07-04T00:27:16.160+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] ENTRY ASInstanceProv.createComponent
[2012-07-04T00:27:16.160+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] ENTRY ASInstanceProv._createComponent
[2012-07-04T00:27:16.161+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] reportStartConfigAction: ENTRY........
[2012-07-04T00:27:16.161+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] reportStartConfigAction: eventStatus........oracle.as.provisioning.engine.ConfigEventStatus@1411393
[2012-07-04T00:27:16.161+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] reportStartConfigAction: 2........
[2012-07-04T00:27:16.161+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] reportStartConfigAction: Set the Extion Id to START........
[2012-07-04T00:27:16.161+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] reportStartConfigAction: Did the assignment...
[2012-07-04T00:27:16.161+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] reportStartConfigAction: EXIT........
[2012-07-04T00:27:16.161+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] Start of create component
[2012-07-04T00:27:16.170+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] Action for the ReportsTools is CREATE
[2012-07-04T00:27:16.170+05:30] [as] [NOTIFICATION] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] Trying to create the component ReportsTools
[2012-07-04T00:27:16.173+05:30] [as] [TRACE:16] [] [oracle.as.config] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] [SRC_CLASS: oracle.as.config.impl.OracleASInstanceProvisioner] [SRC_METHOD: directoryIsPopulated] directoryIsPopulated found unexcluded file/dir: C:\oracle\Middleware\asinst_1\auditlogs
[2012-07-04T00:27:16.174+05:30] [as] [TRACE:32] [] [oracle.as.config] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] [SRC_CLASS: oracle.as.config.impl.OracleASInstanceProvisioner] [SRC_METHOD: calcDirectoryStatus] Oracle Instance directory status: INSTANCE
[2012-07-04T00:27:16.275+05:30] [as] [ERROR] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] [[
oracle.as.config.exception.LocationAlreadyUsedException: A directory for component ReportsTools already exists.  Delete this component first.
    at oracle.as.config.impl.OracleASComponentBaseImpl.validateNotExistOnDisk(OracleASComponentBaseImpl.java:541)
    at oracle.as.config.impl.OracleASComponentBaseImpl.create(OracleASComponentBaseImpl.java:94)
    at oracle.as.provisioning.fmwadmin.ASComponentProv.createComponent(ASComponentProv.java:144)
    at oracle.as.provisioning.fmwadmin.ASComponentProv.createComponent(ASComponentProv.java:73)
    at oracle.as.provisioning.fmwadmin.ASInstanceProv._createComponent(ASInstanceProv.java:401)
    at oracle.as.provisioning.fmwadmin.ASInstanceProv.createComponent(ASInstanceProv.java:358)
    at oracle.as.provisioning.fmwadmin.ASInstanceProv.createInstanceAndComponents(ASInstanceProv.java:136)
    at oracle.as.provisioning.engine.WorkFlowExecutor._createASInstancesAndComponents(WorkFlowExecutor.java:523)
    at oracle.as.provisioning.engine.WorkFlowExecutor.executeWLSWorkFlow(WorkFlowExecutor.java:439)
    at oracle.as.provisioning.engine.Config.executeConfigWorkflow_WLS(Config.java:866)
    at oracle.as.install.classic.ca.standard.StandardWorkFlowExecutor.execute(StandardWorkFlowExecutor.java:65)
    at oracle.as.install.classic.ca.standard.AbstractProvisioningTask.execute(AbstractProvisioningTask.java:26)
    at oracle.as.install.classic.ca.standard.StandardProvisionTaskList.execute(StandardProvisionTaskList.java:61)
    at oracle.as.install.classic.ca.ClassicConfigMain.doExecute(ClassicConfigMain.java:124)
    at oracle.as.install.engine.modules.configuration.client.ConfigAction.execute(ConfigAction.java:339)
    at oracle.as.install.engine.modules.configuration.action.TaskPerformer.run(TaskPerformer.java:87)
    at oracle.as.install.engine.modules.configuration.action.TaskPerformer.startConfigAction(TaskPerformer.java:104)
    at oracle.as.install.engine.modules.configuration.action.ActionRequest.perform(ActionRequest.java:15)
    at oracle.as.install.engine.modules.configuration.action.RequestQueue.perform(RequestQueue.java:63)
    at oracle.as.install.engine.modules.configuration.standard.StandardConfigActionManager.start(StandardConfigActionManager.java:158)
    at oracle.as.install.engine.modules.configuration.boot.ConfigurationExtension.kickstart(ConfigurationExtension.java:81)
    at oracle.as.install.engine.modules.configuration.ConfigurationModule.run(ConfigurationModule.java:83)
    at java.lang.Thread.run(Thread.java:662)

]]
[2012-07-04T00:27:16.275+05:30] [as] [ERROR] [] [oracle.as.provisioning] [tid: 13] [ecid: 0000JXDthrbFg4WFLzvH8A1FwmfA000004,0] [[
oracle.as.provisioning.engine.CfgWorkflowException
    at oracle.as.provisioning.engine.Engine.processEventResponse(Engine.java:596)
    at oracle.as.provisioning.fmwadmin.ASInstanceProv.createComponent(ASInstanceProv.java:368)
    at oracle.as.provisioning.fmwadmin.ASInstanceProv.createInstanceAndComponents(ASInstanceProv.java:136)
    at oracle.as.provisioning.engine.WorkFlowExecutor._createASInstancesAndComponents(WorkFlowExecutor.java:523)
    at oracle.as.provisioning.engine.WorkFlowExecutor.executeWLSWorkFlow(WorkFlowExecutor.java:439)
    at oracle.as.provisioning.engine.Config.executeConfigWorkflow_WLS(Config.java:866)
    at oracle.as.install.classic.ca.standard.StandardWorkFlowExecutor.execute(StandardWorkFlowExecutor.java:65)
    at oracle.as.install.classic.ca.standard.AbstractProvisioningTask.execute(AbstractProvisioningTask.java:26)
    at oracle.as.install.classic.ca.standard.StandardProvisionTaskList.execute(StandardProvisionTaskList.java:61)
    at oracle.as.install.classic.ca.ClassicConfigMain.doExecute(ClassicConfigMain.java:124)
    at oracle.as.install.engine.modules.configuration.client.ConfigAction.execute(ConfigAction.java:339)
    at oracle.as.install.engine.modules.configuration.action.TaskPerformer.run(TaskPerformer.java:87)
    at oracle.as.install.engine.modules.configuration.action.TaskPerformer.startConfigAction(TaskPerformer.java:104)
    at oracle.as.install.engine.modules.configuration.action.ActionRequest.perform(ActionRequest.java:15)
    at oracle.as.install.engine.modules.configuration.action.RequestQueue.perform(RequestQueue.java:63)
    at oracle.as.install.engine.modules.configuration.standard.StandardConfigActionManager.start(StandardConfigActionManager.java:158)
    at oracle.as.install.engine.modules.configuration.boot.ConfigurationExtension.kickstart(ConfigurationExtension.java:81)
    at oracle.as.install.engine.modules.configuration.ConfigurationModule.run(ConfigurationModule.java:83)
    at java.lang.Thread.run(Thread.java:662)
Caused by: oracle.as.provisioning.util.ConfigException: 
Error creating ASComponent ReportsTools.
Cause: 
An internal operation has failed: A directory for component ReportsTools already exists.  Delete this component first.
Action: 
See logs for more details.
    at oracle.as.provisioning.util.ConfigException.createConfigException(ConfigException.java:123)
    at oracle.as.provisioning.fmwadmin.ASInstanceProv._createComponent(ASInstanceProv.java:414)
    at oracle.as.provisioning.fmwadmin.ASInstanceProv.createComponent(ASInstanceProv.java:358)
    ... 17 more
Caused by: oracle.as.config.exception.LocationAlreadyUsedException: A directory for component ReportsTools already exists.  Delete this component first.
    at oracle.as.config.impl.OracleASComponentBaseImpl.validateNotExistOnDisk(OracleASComponentBaseImpl.java:541)
    at oracle.as.config.impl.OracleASComponentBaseImpl.create(OracleASComponentBaseImpl.java:94)
    at oracle.as.provisioning.fmwadmin.ASComponentProv.createComponent(ASComponentProv.java:144)
    at oracle.as.provisioning.fmwadmin.ASComponentProv.createComponent(ASComponentProv.java:73)
    at oracle.as.provisioning.fmwadmin.ASInstanceProv._createComponent(ASInstanceProv.java:401)
    ... 18 more

]] 
```

我已经成功安装了表格和报告11g。然后我正在配置表格。谁能帮我解决在配置 Oracle 表单和 Reports 11G 期间发生的这个错误？它在谈论哪个目录，它位于哪个目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:08:02.880

在此之前，您似乎有一些失败的配置尝试。我会卸载并重新开始。在安装之前，请确保删除 Windows 服务中正在运行的所有“Oracle Process Manager”服务。

当您的 IP 地址未映射到主机文件中的完全限定域和/或机器名称时，我也看到了这一点。

您要安装的 WLS 和 Forms 的确切版本号是多少？

# javascript - jQuery页面重定向在按钮单击时不起作用

> ID：11317615
> 
> 赞同：1
> 
> 时间：2012-07-03T19:13:59.713
> 
> 标签：javascript, jquery, window.location

所有，我有以下代码：

```
var site_url = 'http://localhost/website/';
jQuery("#cancel_song_choice").click(function(event){
    cancel_url = site_url + "event-form";
    window.location.href(cancel_url);
}); 
```

然后我有以下HTML：

```
<button id="cancel_song_choice">Cancel Search</button> 
```

当我单击按钮时，它只会将我重定向回我所在的页面，而不是转到我指定的取消 url。我提醒 cancel_url，它会告诉我正确的。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T19:15:52.423

`href`不是函数，而是属性。用途`window.location.href = cancel_url;`：：

```
var site_url = 'http://localhost/website/';
jQuery("#cancel_song_choice").click(function(event){
    window.location.href = site_url + "event-form";
}); 
```

[`window.location`在 MDN 上](https://developer.mozilla.org/en/DOM/window.location)查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:15:53.640

```
window.location.href=cancel_url; 
```

应该管用

# php - Git Post-Receive Hook 不一致地添加更改

> ID：11317623
> 
> 赞同：1
> 
> 时间：2012-07-03T19:14:32.053
> 
> 标签：php, git, branch, githooks, git-post-receive

我正在尝试编写一个接收后挂钩，它将拉入推送到 bitbucket 帐户的所有新分支。然后，如果推送这些更改的人是特定开发站点的指定用户，则应自动签出该分支。

这是代码：

 `````
$payload = stripslashes(($_POST['payload']) ? $_POST['payload'] : $_GET['payload']);
$obj = json_decode($payload);

$commits = $obj->commits;
$head_commit = $commits[0];

for ($i=0; $i<sizeof($commits); $i++) {
    $commit = $commits[$i];
    $head_date = strtotime($head_commit->timestamp);
    $comm_date = strtotime($commit->timestamp);

    if ($comm_date > $head_date) {
        $head_commit = $commit;
    }
}

$branch = $head_commit->branch;
$author = $head_commit->raw_author;

$msgs = array();                                
$ini = parse_ini_file('pull_settings.ini',true);
define ("CURRENT_SITE",$_SERVER["SERVER_NAME"]);

foreach ($ini as $server) {
    if (CURRENT_SITE==$server["site_name"]) {
        if ($server["type"]=="master") {
            $users = $server["users"];
            if (in_array($author,$users) && $branch == "master") {
                exec("git pull",$msgs);
            } else $users = array();
        }
        if ($server["type"]=="dev") {
            exec("git stash",$msgs);
            exec("git fetch --all",$msgs);
            $users = $server["users"];
            if (in_array($author,$users)) {
                exec("git checkout -f $branch",$msgs);
                exec("git merge origin/$branch",$msgs);
            } else $users = array();
        }
    }
} 
````  `问题是这样的：

它并不总是有效！有时即使应该签出分支，它也不会签出。此外，有时它在签出新分支时会留下文件。这导致 git 说一大堆文件被修改了，这些文件不在它所在的分支中。

请帮忙！很卡。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:14:40.020

git stash 将保存对跟踪文件所做的修改。如果您有新文件，它们将不会被保存。这不可能是你的问题之一吗？您有新的未跟踪文件，然后您的 git 合并将添加这些文件。``

# ios - 在 iPad 上的横向视图和纵向视图之间同步数据

> ID：11317626
> 
> 赞同：0
> 
> 时间：2012-07-03T19:14:42.547
> 
> 标签：ios, ipad

我是 iPad 开发的新手，所以请多多包涵。我有一个只有一个 XIB 文件的 iPad 应用程序。在 XIB 中，我有两个视图，一个是纵向的，一个是横向的。

我在两个视图上都有一个简单的按钮和文本字段。

我创建了一个将文本字段更新为 HelloWorld 的方法。

在我的纵向视图中，我已经连接了 FileOwner 中的文本字段和按钮。

当我在纵向视图中运行应用程序时，我可以点击按钮，HelloWorld 会出现在文本框中。

如果我在模拟器中旋转设备，则会出现新的横向视图，但文本框为空。

所以我对这种方法有几个问题：

1.  在为横向和纵向开发视图时，正确的方法是只创建一个 XIB 并在其中拥有两个视图，然后以编程方式切换到它们？
2.  如果这是正确的，当设备旋转时，如何在两个视图之间同步数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:53:11.287

我只看到使用了 2 个单独的 xib，分别称为 someviewportriat.xib 和 someviewlandscape.xib，但都使用相同的控制器进行了初始化。并不是说这是正确的方法，但这是我在少数应用程序中看到的。

至于在不同视图中具有相同数据的 2 个文本字段，您必须创建两个视图都可以访问的数据对象/模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:53:54.633

经过更多研究，我发现有三种方法可以处理这种情况：

1.  自动旋转和自动调整大小
2.  重构
3.  交换视图

由于我使用的是交换视图技术，您可以在 Interface Builder 中定义两个看起来完全符合您要求的视图，但这也意味着您需要跟踪每个视图的单独 IBOutlets。虽然视图中的元素当然可以调用相同的 IBAction，但它们不能共享相同的出口，因此您可能需要在单个视图控制器中跟踪两倍的 UI 小部件。

# php - 无法以用户身份在用户 Facebook 页面上发布消息

> ID：11317630
> 
> 赞同：0
> 
> 时间：2012-07-03T19:14:57.557
> 
> 标签：php, facebook, facebook-graph-api

我有与[此问题相反的问题](https://stackoverflow.com/questions/6239482/posting-to-a-facebook-page-as-the-page-not-a-person)（以及其他类似问题）

用户有一个测试页面，他是该页面的管理员。用户未选中“发布首选项”复选框（在页面编辑信息->您的设置中）以允许用户以用户或页面的身份在页面上发布消息。我的应用程序要求所有必要的权限将消息发布到用户页面（manage_pages、offline_access、publish_stream 等），然后将 access_token 存储到数据库中。

当我的应用程序尝试将消息作为页面发布到页面时 - 它工作正常但是当我的应用程序尝试将消息作为用户发布到页面时 - 它仍然作为页面发布 - 为什么会发生这种情况？我只提供用户 access_token 而不是他的页面 access_token 这是一个示例代码

`$facebook->setAccessToken($user_access_token);`

```
$facebook->api("/$page_id/feed", 'post', array(
                'access_token'  => "$user_access_token",//not necessarily
                'message'   => 'test'
                ); 
```

此代码适用于其他用户 - 他们可以通过我的应用程序以用户身份将消息发布到此页面

那么，这里有什么问题？也许这是 Graph API 中的错误？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:00:31.633

我认为这就是他们引入语音功能的原因，所以很快就会有 API 兼容性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-01T12:02:08.393

关于[这个答案](https://developers.facebook.com/x/bugs/408406055876958/?comment_id=596187607132950)“页面管理员目前无法通过 Graph API 以自己的身份发布到页面”:(

# ios - 单元测试时的链接器错误：ld：从 .../libavutil.a(imgutils.o) 中的 _av_image_check_size 到 ... 中的 cstring 的非法文本重定位

> ID：11317637
> 
> 赞同：5
> 
> 时间：2012-07-03T19:15:31.490
> 
> 标签：ios, unit-testing, xcode4.3, linker-errors, libav

在 Xcode 4.3.2 中，构建一个 iPad 应用程序，其中包括`libavutil.a`ffmpeg 发行版，它可以正确构建和运行，但是当我尝试运行单元测试（Cmd-U）时，我收到以下链接器错误：

> ld: 非法文本重定位到 /myPath/libavutil.a(imgutils.o) 中的 cstring 从 /myPath/libavutil.a(imgutils.o) 中的 _av_image_check_size 用于架构 armv7 clang: 错误：链接器命令失败，退出代码 1（使用-v 查看调用）

这是在设备上（我们目前无法在模拟器中运行它，因为我们没有包含所有库的胖二进制文件）。

为什么在运行单元测试时它会正常构建和运行但不能链接？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T23:05:36.613

答案，来自[这里](https://stackoverflow.com/questions/6650178/illegal-text-reloc-to-non-lazy-ptr-error-while-building-in-xcode-4-with-libav-l)。

是添加：

```
-read_only_relocs suppress 
```

到链接器标志。

另一个链接解释了原因。解决方案最初是在[这里](http://lists.apple.com/archives/unix-porting/2008/Jan/msg00027.html)找到的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-21T18:50:13.807

具体来说，专门用于修复与`ffmpeg`for `32bit OSX`link using类似的链接错误的行`xcode/c++11`是添加`-Wl,-read_only_relocs,suppress`到链接行。这种变化没有奏效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-12T16:27:41.173

我通过在 XCode 中的编译器和链接器设置中启用与位置无关的代码来解决此链接器错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-02T08:53:18.730

对于那些已阅读上述答案但没有帮助的人，请检查您的“产品 -> 方案 -> 编辑方案”。对于模拟器应该是“调试”，对于设备来说没关系。否则你会得到奇怪的错误，比如它看不到你项目的某些部分。

# c# - SQL Server CE 查询分析中的错误

> ID：11317648
> 
> 赞同：0
> 
> 时间：2012-07-03T19:15:58.260
> 
> 标签：c#, parsing, sql-server-ce

所以，我想将此查询插入到数据库文件中：

```
UPDATE contas 
SET nome = @nome, endereço = @endereco, serv_envio = @envio, 
    serv_recep = @recep, pass = @pass, user = @user, 
    tipo = @tipo, Seguro = @seguro 
WHERE id = @id 
```

但是，每次我尝试放置它时，都会收到此错误：

> 解析查询时出错。[Token line number = 1, Token line offset = 101, Token in error = user]

但是，经过一个小时试图找出可能是错误的，我仍然找不到错误。

这里还有数据库：

桌子：`Contas`

列：

*   ID（主整数自动增加）
*   名称（文字）
*   恩德雷索（文字）
*   Serv_Envio（文本）
*   Serv_Recep（文本）
*   用户（文本）
*   通过（文字）
*   Tipo（外整数）
*   Defeito（布尔值）
*   Seguro（布尔值）

这是参数化（C#）：

```
command.Parameters.AddWithValue("@nome", tb_nome.Text);
command.Parameters.AddWithValue("@endereco", tb_mail.Text);
command.Parameters.AddWithValue("@envio", tb_envio.Text);
command.Parameters.AddWithValue("@recep", tb_recep.Text);
command.Parameters.AddWithValue("@pass", tb_pass.Text);
command.Parameters.AddWithValue("@user", tb_user.Text);
command.Parameters.AddWithValue("@tipo", cb_tipo.SelectedIndex + 1);
command.Parameters.AddWithValue("@id", idconta);
command.Parameters.AddWithValue("@seguro", seguro); 
```

那么，有什么帮助吗？

提前致谢。

若昂·博雷戈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:18:08.460

`user`是保留字。尝试：

```
UPDATE contas SET nome=@nome, endereço=@endereco, serv_envio=@envio, 
  serv_recep=@recep, pass=@pass, [user]=@user, tipo=@tipo, Seguro=@seguro 
WHERE id=@id; 
```

或重命名该列。

# php - 形成数组复选框的数组

> ID：11317649
> 
> 赞同：1
> 
> 时间：2012-07-03T19:16:07.947
> 
> 标签：php, html, multidimensional-array

我想创建一个包含多个存储复选框结果的数组的数组。

```
category->subcategory->choice 
```

我不确定这是否可能，但我可能想要这样的东西：

```
<input type="hidden" name="category[]" />
<input type="checkbox" name="subcat1[]" value="something" />
<input type="checkbox" name="subcat1[]" value="somewhere" />
<input type="checkbox" name="subcat2[]" value="something" />
<input type="checkbox" name="subcat2[]" value="somewhere" /> 
```

我希望能够像这样使用 PHP 来遍历类别数组循环：

```
foreach($_POST['category'] as $sub){
    switch($sub){
        case 'subcat1':
            foreach($sub as $val){
                //prepare $val to insert into database X
            }
            break;
        case 'subcat2':
            foreach($sub as $val){
                //prepare $val to insert into database Y
            }
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:17:59.647

它比你想象的还要容易：

```
<input type="checkbox" name="category[subcat1][]" value="something" />
<input type="checkbox" name="category[subcat1][]" value="somewhere" />
<input type="checkbox" name="category[subcat2][]" value="something" />
<input type="checkbox" name="category[subcat2][]" value="somewhere" /> 
```

进而：

```
foreach($_POST['category'] as $subCategoryName) {
    foreach ($subCategoryName as $item) {
        // ...
    }
} 
```

如果您对不同子类别的预期处理不相似，那么将它们发布到不同的数组会更好。

# javascript - javascript中的Frames对象循环未定义

> ID：11317650
> 
> 赞同：1
> 
> 时间：2012-07-03T19:16:12.363
> 
> 标签：javascript, jquery, frames, browser-extension, crossrider

我用 crossrider.com 编写了一个浏览器扩展，需要使用 javascript 代码循环浏览页面上的框架，

HTML 代码。(Main.html)

```
<frameset rows="85,*, 35">
    <frame name="header" src="1.html"    scrolling="no"   frameborder="no" >
    <frame name="body"   src="2.html"    scrolling="auto" frameborder="no">
    <frame name="footer" src="3.html"    scrolling="no"   frameborder="no" >
</frameset> 
```

如果我在此页面（Main.html）上编写代码为

```
alert(self.frames.length); 
```

它给了我 3，如果我这样做

```
 for(var k = 0; k < self.frames.length ; k++)
    { 
      var obj = self.frames[k];
      // this obj is always object. 
      //and I could do further operation on this as obj.document ,
    } 
```

但是，如果您编写 crossrider 扩展并执行相同的操作

```
appAPI.ready(function($){

var framesLength = self.frames.length; //it also gives 3
//but if I do below

for(var k = 0; k < self.frames.length ; k++)
    { 
      var obj = self.frames[k];
      // **this obj is always undefined.**
    }

}); 
```

感谢您对解决方案的任何帮助或指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:23:46.963

我确实向crossrider团队提出了问题。 [Crossrider-支持框架-？](https://getsatisfaction.com/crossrider/topics/accessing_frames_using_crossrider_gives_undefined)

我从 CrossRider 的一位员工 (Shmueli Ahdut) 那里得到的快速回答是，CrossRider API 不支持框架，但令人惊讶的是

`self.frames.length` 给出了适当的警报。

我将研究他们对 IE 的 onRequest API 的支持。这样可以轻松监控帧/ ajax 请求的http。

# c++ - 如何创建低影响计时器

> ID：11317651
> 
> 赞同：2
> 
> 时间：2012-07-03T19:16:15.640
> 
> 标签：c++, python, c, shell, timer

我想创建一个计时器以在嵌入式系统上运行，并且影响尽可能小。我可以选择在 C、C++、bash 或 python 中实现计时器。计时器中的错误可能是 +/- 几秒钟。

我很想在 bash 脚本中创建一个循环，使用“sleep()”命令和“&”在后台启动它。但是，如果以这种方式实施，我担心/不太明白这是否会使系统保持活动/唤醒。

如果它使系统保持活动/唤醒，是否可以使用 C、C++、python 或使用 bash 脚本的其他方式创建一个不这样做的计时器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:24:41.287

You can do timers in a number of different ways.

The simplest is just something like

```
date "+%s" 
```

Which prints out the timestamp of the system. If the system clock is adequate, then getting two timestamps, one at the start and the second at the end, you can find the elapsed time by finding the difference in these two timestamps.

There are equivalent ways to do this on every language, C, C++, Python etc.

If you're timing a process that ends, you could do something like

```
TIC=$(date "+%s")
./some-script
TOC=$(date "+%s")
DELTA=$((TOC - TIC))
echo $DELTA 
```

Or [alternatively in Python](https://stackoverflow.com/questions/1465146/how-do-you-determine-a-processing-time-in-python).

In any case, I don't think your sleep idea is the best approach.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:00:34.190

如果您担心嵌入式系统中的系统资源或功耗问题，您绝对应该使用 RTC 来实现定时器。

请参考[http://linux.die.net/man/4/rtc](http://linux.die.net/man/4/rtc)

并且，检查您正在使用的操作系统的用户手册。也许有一些函数可以调用。

没有必要重新发明定时器相关的功能。

# android - Eclipse（Android）中的库项目VS参考库

> ID：11317654
> 
> 赞同：1
> 
> 时间：2012-07-03T19:16:19.313
> 
> 标签：android, eclipse, jar

在 Eclipse（Android 开发）中，您可以转到项目属性，然后：

1.  打开“Android”并在“库”部分按“添加”按钮添加库项目。
2.  打开“Java 构建路径”并添加同一项目的 JAR 文件。

在第一种情况下，您可以在“库项目”部分下看到 JAR 文件；在第二种情况下 - “引用库”下的同一个 jar。

这两种方法有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T19:20:31.203

如果一个项目是一个 Android 库项目并包含 Android 资源，则这些资源将提供给包含它作为库项目的应用程序。

如果 jar 作为引用的 jar 包含在内，则您无权访问资源。

# java - 如何获取高超音速表的列表

> ID：11317659
> 
> 赞同：1
> 
> 时间：2012-07-03T19:16:31.960
> 
> 标签：java, hibernate, hsqldb

我们在 DAO junit 测试中使用内存数据库中的超音速。

问题是在 Eclipse 下，每个 junit 测试都可以很好地删除并重新创建表，但是当我们在 ant 中构建时，表会停留更长时间并且测试会交叉污染。

解决方案是，在拆除我们所有的测试时，我们从我们在该测试中使用的所有表中删除所有记录。不幸的是，我们的开发人员对维护这些内容并不神圣，突然间构建中断，您必须继续搜索并销毁以删除违规记录。

如果我能找到一种方法从 hypersonic DB 中获取表列表，那么我可以遍历这些表并删除所有记录，然后我可以将此静态方法放入每个拆卸方法中，这样就可以完成。

我们正在使用休眠，所以使用它的方法也会很好。

任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:20:57.990

您可能想看看[java.sql.DatabaseMetaData.getTables](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getTables)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:30:33.750

如果要删除模式中的所有表，可以删除模式。默认架构称为 PUBLIC（您可以重命名）。如果您删除此架构，它会自动重新创建。因此，要删除公共模式中的所有表，请使用：

DROP SCHEMA 公共级联

# c# - 将 HTML 标记添加到 HTMLAgilityPack 节点

> ID：11317660
> 
> 赞同：0
> 
> 时间：2012-07-03T19:16:41.190
> 
> 标签：c#, visual-studio, html-agility-pack

我需要解析一个 CMS 生成的 HTML 页面，并在任何 HTMLAgiligyPack 节点周围添加列表项标签，​​其子节点的名称属性为“Example”。

**C# 代码**

```
HtmlDocument doc = new HtmlDocument();
doc.Load("test.htm");
foreach (HtmlNode docObjects in doc.DocumentNode.SelectNodes("//object[@type='text/sitemap']"))
{
  HtmlNodeCollection paramNodes = docObjects.ChildNodes;
  foreach (HtmlNode paramNode in paramNodes)
  {
    string paramName = paramNode.GetAttributeValue("name", null);
    string paramValue = paramNode.GetAttributeValue("value", null);
    HtmlNode findItem = paramNode.NextSibling;
    if (paramName == "Example")
    {
     //Add listitem (<li>) tags to the paramName node 
    }
  }
} 
```

**测试.htm**

```
<OBJECT type="text/sitemap">
    <param name="Example" value="Help.chm::\toc.hhc">
</OBJECT>
<OBJECT type="text/sitemap">
    <param name="Example" value="Help2.chm::\toc.hhc">
</OBJECT>
<OBJECT type="text/sitemap">
    <param name="Example" value="Help3.chm.chm::\toc.hhc">
</OBJECT> 
```

需要是

```
<li><OBJECT type="text/sitemap">
    <param name="Example" value="Help.chm::\testing.htm">
</OBJECT></li>
<li><OBJECT type="text/sitemap">
    <param name="Example" value="Help2.chm::\testing.htm">
</OBJECT></li>
<li><OBJECT type="text/sitemap">
    <param name="Example" value="Help3.chm::\testing.htm">
</OBJECT></li> 
```

您能提供的任何帮助将不胜感激。这是我正在从事的一个更大项目的一部分，将来可能会请求帮助。需要回到 C# 的速成课程 - 提前谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:47:21.703

这是一种方法（代码在您的`if`子句中）：

```
var objectNode = paramNode.ParentNode;
var li = doc.CreateElement("li");
objectNode.Remove();
li.AppendChild(objectNode);

doc.DocumentNode.AppendChild(li); 
```

# ruby-on-rails - Rails：在 where 语句中使用大于/小于

> ID：11317662
> 
> 赞同：185
> 
> 时间：2012-07-03T19:16:54.103
> 
> 标签：ruby-on-rails, syntax, where

我正在尝试查找 id 大于 200 的所有用户，但我在使用特定语法时遇到了一些问题。

```
User.where(:id > 200) 
```

和

```
User.where("? > 200", :id) 
```

都失败了。

有什么建议么？

* * *

## 回答 #1

> 赞同：316
> 
> 时间：2012-07-03T19:22:13.730

试试这个

```
User.where("id > ?", 200) 
```

* * *

## 回答 #2

> 赞同：175
> 
> 时间：2014-05-29T14:51:36.750

# 最先进的

Ruby 2.7 引入了[beginless 范围](https://ruby-doc.org/core-2.7.0/Range.html#class-Range-label-Beginless-2FEndless+Ranges)`>`，这使得指定`<`及其包含的表亲 (`>=`和`<=`) 变得更加容易。

```
User.where(id: 200..).to_sql
  => "SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" >= 200"
# There is no difference w/ a non-inclusive endless range (e.g. `200...`)

User.where(id: ..200).to_sql
  => "SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" <= 200"
User.where(id: ...200).to_sql
  => "SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" < 200" 
```

这也适用于时间戳！

```
User.where(created_at: 1.day.ago..).to_sql
  => "SELECT \"users\".* FROM \"users\" WHERE \"users\".\"created_at\" >= '2021-09-12 15:38:32.665061'"
User.where(created_at: ..1.day.ago).to_sql
  => "SELECT \"users\".* FROM \"users\" WHERE \"users\".\"created_at\" <= '2021-09-12 15:38:37.756870'" 
```

# 原始答案和更新

我只在 Rails 4 中对此进行了测试，但是有一种有趣的方法可以使用带有`where`哈希的范围来获得这种行为。

```
User.where(id: 201..Float::INFINITY) 
```

将生成 SQL

```
SELECT `users`.* FROM `users`  WHERE (`users`.`id` >= 201) 
```

也可以用少于 with 来做同样的事情`-Float::INFINITY`。

我刚刚发布了一个类似的问题，询问有关[在 SO 上](https://stackoverflow.com/questions/23936224/rails-where-for-less-than-queries-on-times)使用日期执行此操作的问题。

# `>=`对比`>`

为避免人们不得不深入了解并关注此处的评论对话，这里是重点。

上面的方法只生成一个`>=`查询，而**不是**一个`>`. 有很多方法可以处理这种替代方案。

**对于离散数字**

您可以使用`number_you_want + 1`上面我对用户感兴趣`id > 200`但实际上寻找`id >= 201`. 这适用于整数和数字，您可以增加一个感兴趣的单位。

如果您将数字提取到一个命名良好的常量中，这可能是最容易阅读和理解的。

**反转逻辑**

我们可以使用事实，`x > y == !(x <= y)`并使用 where not 链。

```
User.where.not(id: -Float::INFINITY..200) 
```

生成 SQL

```
SELECT `users`.* FROM `users` WHERE (NOT (`users`.`id` <= 200)) 
```

这需要额外的时间来阅读和推理，但适用于您无法使用该`+ 1`策略的非离散值或列。

**阿雷尔表**

如果你想变得花哨，你可以使用`Arel::Table`.

```
User.where(User.arel_table[:id].gt(200)) 
```

将生成 SQL

```
"SELECT `users`.* FROM `users` WHERE (`users`.`id` > 200)" 
```

具体如下：

```
User.arel_table              #=> an Arel::Table instance for the User model / users table
User.arel_table[:id]         #=> an Arel::Attributes::Attribute for the id column
User.arel_table[:id].gt(200) #=> an Arel::Nodes::GreaterThan which can be passed to `where` 
```

这种方法将为您提供您感兴趣的*确切SQL，但是没有多少人直接使用 Arel 表，并且会发现它很混乱和/或令人困惑。*您和您的团队将知道什么对您最有利。

# 奖金

从 Rails 5 开始，您也可以使用日期来执行此操作！

```
User.where(created_at: 3.days.ago..DateTime::Infinity.new) 
```

将生成 SQL

```
SELECT `users`.* FROM `users` WHERE (`users`.`created_at` >= '2018-07-07 17:00:51') 
```

# 双倍奖金

一旦 Ruby 2.6 发布（2018 年 12 月 25 日），您将能够使用新的无限范围语法！而不是`201..Float::INFINITY`你将能够只写`201..`. [此博客文章中的](https://medium.com/square-corner-blog/rubys-new-infinite-range-syntax-0-97777cf06270)更多信息。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2016-08-08T21:07:12.847

更好的用法是在用户模型中创建范围`where(arel_table[:id].gt(id))`

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2020-07-21T17:10:10.187

## 更新

Rails 核心团队决定暂时恢复此更改，以便更详细地讨论它。有关更多信息，请参阅[此评论](https://github.com/rails/rails/pull/39613#issuecomment-659553274)和[此 PR](https://github.com/rails/rails/pull/39863)。

我仅出于教育目的而留下我的答案。

* * *

## Rails 6.1 中用于比较的新“语法”（已还原）

Rails 6.1 为条件中的比较运算符添加了新的“语法” `where`，例如：

```
Post.where('id >': 9)
Post.where('id >=': 9)
Post.where('id <': 3)
Post.where('id <=': 3) 
```

所以你的查询可以重写如下：

```
User.where('id >': 200) 
```

这是[PR 的链接](https://github.com/rails/rails/pull/39613)，您可以在其中找到更多示例。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2018-03-20T20:55:59.170

Arel 是你的朋友：

```
User.where(User.arel_table[:id].gt(200)) 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-07-15T17:47:19.697

另一个奇特的可能性是……

```
User.where("id > :id", id: 100) 
```

如果您想在多个地方进行替换，此功能允许您创建更易于理解的查询，例如...

```
User.where("id > :id OR number > :number AND employee_id = :employee", id: 100, number: 102, employee: 1205) 
```

这比在查询上有很多意义`?`...

```
User.where("id > ? OR number > ? AND employee_id = ?", 100, 102, 1205) 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-09-03T08:55:36.270

如果您想要更直观的写作，它存在一个名为[squeel](https://github.com/activerecord-hackery/squeel)的 gem，它可以让您像这样编写指令：

```
User.where{id > 200} 
```

*请注意“大括号”字符 { } 并且`id`只是一个文本。*

您所要做的就是将 squeel 添加到您的 Gemfile 中：

```
gem "squeel" 
```

在 Ruby 中编写复杂的 SQL 语句时，这可能会让您的生活轻松很多。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-03-19T19:42:03.107

我经常在日期字段中遇到这个问题（比较运算符非常常见）。

进一步详细说明 Mihai 的答案，我认为这是一种可靠的方法。

您可以向模型添加如下范围：

```
scope :updated_at_less_than, -> (date_param) { 
  where(arel_table[:updated_at].lt(date_param)) } 
```

...然后在您的控制器中，或在您使用模型的任何地方：

```
result = MyModel.updated_at_less_than('01/01/2017') 
```

...一个更复杂的连接示例如下所示：

```
result = MyParentModel.joins(:my_model).
  merge(MyModel.updated_at_less_than('01/01/2017')) 
```

这种方法的一个巨大优势是（a）它允许您从不同的范围组合查询，并且（b）当您两次加入同一个表时避免别名冲突，因为 arel_table 将处理查询生成的那部分。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-24T13:05:09.690

对于 Ruby 2.6，可以接受以下范围：

```
# => 2.6
User.where(id: 201..)
# < 2.6
User.where(id: 201..Float::INFINITY) 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2017-02-09T00:48:42.500

更短：

```
User.where("id > 200") 
```

# java - Java - 交换页面

> ID：11317664
> 
> 赞同：1
> 
> 时间：2012-07-03T19:17:17.170
> 
> 标签：java

我已经使用两个数组构建了一个自定义哈希图。一个包含键另一个值。现在，我看到有时 JVM 无法为这些数组分配所需的内存并抛出异常。有没有办法使用页面交换或任何其他方法来解决这个问题？

代码：

```
public class Test1{
public static void main(String args[]){

    try {

   int arrays[]  = new int[50000000] ;
for ( int i = 0; i < 50000000 ; i++)
        {
        arrays[i] = i ;
        }

    }

catch(Exception e){
        System.out.println(e) ;
    }
}
} 
```

编辑：

```
 public void load() {
        try {
            FileChannel channel2 = new RandomAccessFile(str1, "r").getChannel();
            MappedByteBuffer mbb2 = channel2.map(FileChannel.MapMode.READ_ONLY, 0, channel2.size());
            mbb2.order(ByteOrder.nativeOrder());
            assert mbb2.remaining() == savenum * 8;
            for (int i = 0; i < savenum; i++) {
                long l = mbb2.getLong();
                keys[i] = l;
            }
            channel2.close();

            FileChannel channel3 = new RandomAccessFile(str2, "r").getChannel();
            MappedByteBuffer mbb3 = channel3.map(FileChannel.MapMode.READ_ONLY, 0, channel3.size());
            mbb3.order(ByteOrder.nativeOrder());
            assert mbb3.remaining() == savenum * 4;
            for (int i = 0; i < savenum; i++) {
                int l1 = mbb3.getInt();
                values[i] = l1;
            }
            channel3.close();
        } catch (Exception e) {
            System.out.println(e);
        }
    }

    public void save() {
        try {
            FileChannel channel = new RandomAccessFile(str1, "rw").getChannel();
            MappedByteBuffer mbb = channel.map(FileChannel.MapMode.READ_WRITE, 0, savenum * 8);
            mbb.order(ByteOrder.nativeOrder());

            for (int i = 0; i < savenum; i++) {
                mbb.putLong(keys[i]);
            }
            channel.close();

            FileChannel channel1 = new RandomAccessFile(str2, "rw").getChannel();
            MappedByteBuffer mbb1 = channel1.map(FileChannel.MapMode.READ_WRITE, 0, savenum * 4);
            mbb1.order(ByteOrder.nativeOrder());

            for (int i = 0; i < savenum; i++) {
                mbb1.putInt(values[i]);
            }
            channel1.close();
        } catch (Exception e) {
            System.out.println("IOException : " + e);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:22:26.443

修改代码以使用 IntBuffer 和 LongBuffer

```
class LongIntParallelHashMultimap {
    private static final int NULL = 0;
    private final FileChannel channel1, channel2;
    private final LongBuffer keys;
    private final IntBuffer values;
    private final int capacity;
    private int size;

    public LongIntParallelHashMultimap(int capacity, String basename) throws IOException {
        assert (capacity & (capacity - 1)) == 0 : "Capacity " + capacity + " must be a power of 2";
        this.capacity = capacity;
        channel1 = new RandomAccessFile(basename + ".keys", "rw").getChannel();
        keys = channel1.map(FileChannel.MapMode.READ_WRITE, 0, capacity * 8).order(ByteOrder.nativeOrder()).asLongBuffer();
        // load keys into memory
        for(int i=0;i<capacity;i+=512) keys.get(i);

        channel2 = new RandomAccessFile(basename + ".values", "rw").getChannel();
        values = channel2.map(FileChannel.MapMode.READ_WRITE, 0, capacity * 4).order(ByteOrder.nativeOrder()).asIntBuffer();
        for(int i=0;i<capacity;i+=1024) values.get(i);
    }

    public void put(long key, int value) {
        long key1 = key + 1;
        int index = indexFor(key1);
        while (keys.get(index) != NULL) {
            index = successor(index);
        }
        values.put(index, value);
        keys.put(index, key1);
        ++size;
    }

    /**
     * Uses a pre-allocated array and return the count of matches.
     */
    public int get(long key, int[] hits) {
        long key1 = key + 1;
        int index = indexFor(key1);
        int hitIndex = 0;

        while (keys.get(index) != NULL) {
            if (keys.get(index) == key1) {
                hits[hitIndex] = values.get(index);
                ++hitIndex;
            }
            index = successor(index);
        }

        return hitIndex;
    }

    private int indexFor(long key) {
        return Math.abs((int) ((key * 5700357409661598721L) & (capacity - 1)));
    }

    private int successor(int index) {
        return (index + 1) & (capacity - 1);
    }

    public int size() {
        return size;
    }

    public void close() {
        try {
            channel1.close();
            channel2.close();
        } catch (IOException ignored) {
        }
        try {
            ((DirectBuffer) keys).cleaner().clean();
            ((DirectBuffer) values).cleaner().clean();
        } catch (Throwable notSupportedOnThisPlatform) {
        }
    }
} 
```

* * *

要允许操作系统交换数据结构的页面，您需要使用堆外内存或内存映射文件。内存映射文件更易于管理，并且可以达到硬盘驱动器的大小。

```
long heap = Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory();
RandomAccessFile raf = new RandomAccessFile("array.dat", "rw");
IntBuffer map = raf.getChannel().map(FileChannel.MapMode.READ_WRITE, 0, 1 << 30).order(ByteOrder.nativeOrder()).asIntBuffer();
for (int i = 0; i < map.capacity(); i++)
    map.put(i, i);
long heap2 = Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory();
System.out.printf("Wrote %,d int values, heap used %,d bytes approx%n", map.capacity(), heap2 - heap); 
```

印刷

```
Wrote 268,435,456 int values, heap used 0 approx 
```

顺便说一句：您需要一个 64 位 JVM 来一次映射这些数据。如果您有 32 位 JVM，则需要移动映射（这很痛苦，因此请尽可能使用 64 位 JVM）

如果您有一个 200 MB 的数组，它应该适合 32 位 JVM。

# jquery - 使用 JQuery 获取 RSS

> ID：11317666
> 
> 赞同：0
> 
> 时间：2012-07-03T19:17:27.450
> 
> 标签：jquery, xml, ajax

我是 RSS 解析的新手，在使用 jQuery 访问提要时遇到了麻烦。我尝试（并且想）使用`$.get()`，但我得到的比这少。（这至少会触发错误。）我做错了什么？

```
function GetFedFeeds(){
    $.ajax({
        type: 'GET',
        url: 'http://www.federalreserve.gov/feed/press_enforcement.xml',
        dataType: 'xml',
        success: function(xml){
            $(xml).find('item').each( function(){
                var t = $(this).find('title').text();
                $('#content').append(t);
            });
        },
        error: function() { alert('RSS Error'); }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:33:46.647

用这个， `url`就是RSS提要源URL

```
$.ajax({
        url: document.location.protocol + '//ajax.googleapis.com/ajax/service/feed/load?v=1.0&num=10&callback=?&q=' + encodeURIComponent(url),
        dataType: 'json',
        success: function(data) {
            //YOUR DATA
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:20:29.803

看来您正在尝试跨域，这将无法正常工作。

JSONP 是跨域请求的方法。

# asp.net-mvc-3 - Facebook 应用程序页面发布到 MVC 应用程序

> ID：11317671
> 
> 赞同：0
> 
> 时间：2012-07-03T19:17:42.477
> 
> 标签：asp.net-mvc-3, facebook-c#-sdk

我正在使用 MVC3 开发 iframe 应用程序。现在，我正在访问链接[https://apps.facebook.com/cotizacionsed/](https://apps.facebook.com/cotizacionsed/)但是，如您所见，加载了此 html 的表单给出了第一篇文章：

```
<form action="/auto/ResultadoCotizacionAsyncFacebook?CodigoPostal=0&amp;Rastreo=False&amp;TieneGnc=False&amp;codIa=0&amp;valuacionIa=0&amp;AnioNum=0&amp;EsCeroKm=False" method="post"> 
```

但是，如果我访问 url，标签会像这样加载：

```
<form action="/cotizador-facebook" method="post"> 
```

你知道这是为什么吗？当我单独访问 url 时，我没有收到错误消息。

添加控制器：

```
 //
    // GET: /Seguros/Auto/ResultadoCotizacionAsyncFacebook
    public ActionResult ResultadoCotizacionAsyncFacebook(FormularioAuto solicitud)
    {
        if (!WebMisc.Validations.ValidationsMethods.IsEmailAddressValid(solicitud.Email))
            ModelState.AddModelError("Email", "El Email es inválido");

        if (ModelState.IsValid)
        {
            ResultadoAuto resultadoAuto = (new Sitio.Code.Companias()).GetResultadoCotizacionModel(solicitud, ViewBag);

            var auto = solicitud.Anio.Split(';');
            solicitud.Marca = auto[0];
            solicitud.Modelo = auto[1];
            solicitud.Anio = auto[2].StartsWith("0") ? DateTime.Now.Year.ToString() : auto[2];
            solicitud.EsCeroKm = auto[2].StartsWith("0");

            var zona = solicitud.Localidad.Split(';');
            solicitud.Provincia = zona[0];
            solicitud.Localidad = zona[1];
            solicitud.CodigoPostal = (new GrupoMono.CodigosPostales.Service()).GetCodigoPostal(solicitud.Provincia, solicitud.Localidad);
            solicitud.Departamento = (new GrupoMono.CodigosPostales.Service()).GetDepartamento(solicitud.CodigoPostal);

            resultadoAuto.Formulario = solicitud;

            var infoautoSvc = new GrupoMono.InfoAuto.Service();
            resultadoAuto.SumaAsegurada = (infoautoSvc.GetValuacion(solicitud.Marca, solicitud.Version, int.Parse(solicitud.Anio)) * 1000).ToString("N", Nfi());
            ViewBag.CodigoInfoAuto = infoautoSvc.GetCodigoInfoAuto(solicitud.Marca, solicitud.Version).ToString();
            Session["ResultadoAuto"] = resultadoAuto;

            try
            {
                using (var historico = new GrupoMono.HistoricoCotizaciones.Service())
                {
                    historico.SaveContactoAuto(solicitud.GetContactoAutoParaHistorico());
                }
            }
            catch (Exception ex)
            {
                new MailerController().ErrorLog("Histórico Tiró Error", ex).DeliverAsync();
                Log("Historico", "Ha ocurrido un error: " + ex.Message + "\n" + ex.StackTrace, null);
            }

            ViewBag.referrer = TempData["urlreferrer"] != null ? TempData["urlreferrer"].ToString() : "Acceso Directo";

            return View("ResultadosAsyncFacebook", resultadoAuto);
        }
        else if (solicitud.codIa == 0)
        {
            ViewData["Marcas"] = (new GrupoMono.InfoAuto.Service()).GetMarcas().Select(x => new SelectListItem { Text = x, Value = x });
            ViewData["Provincias"] = (new GrupoMono.CodigosPostales.Service()).GetProvincias().Select(x => new SelectListItem { Text = x, Value = x });
            return View("CotizarAsyncFacebook");
        }
        else
        {
            ViewData["Marcas"] = (new GrupoMono.InfoAuto.Service()).GetMarcas().Select(x => new SelectListItem { Text = x, Value = x });
            ViewData["Provincias"] = (new GrupoMono.CodigosPostales.Service()).GetProvincias().Select(x => new SelectListItem { Text = x, Value = x });
            if (!string.IsNullOrEmpty(solicitud.Modelo) && solicitud.Modelo.Contains(";")) solicitud.Modelo = solicitud.Modelo.Split(';')[1];
            if (!string.IsNullOrEmpty(solicitud.Anio) && solicitud.Anio.Contains(";")) solicitud.Anio = solicitud.Anio.Split(';')[2];
            return View("CotizarAsyncFacebook", solicitud);
        }
    }

    [HttpPost]
    public ActionResult CotizarAsyncFacebook(FormularioAuto solicitud)
    {
        if (Session["urlreferrer"] != null)
        {
            TempData.Add("urlreferrer", Session["seguimiento"].ToString());
        }

        if (solicitud.codIa == 0)
        {
            return View("CotizarAsyncFacebook");
        }

        return RedirectToAction("ResultadoCotizacionAsyncFacebook", solicitud);
    } 
```

谢谢，

# mysql - MySQL 错误 150（外键问题？）

> ID：11317675
> 
> 赞同：1
> 
> 时间：2012-07-03T19:17:59.467
> 
> 标签：mysql, foreign-keys

我正在尝试创建一系列具有多个外键关系的表。两个表中的第一个有一个两列的主键，一个由我们指定，另一个由制造商指定。尝试第三次查询时发生错误。我不太确定这里出了什么问题，所以任何帮助都将不胜感激。

SQL

```
CREATE TABLE rugs (
    id INTEGER NOT NULL AUTO_INCREMENT,
    manufacturer_id INTEGER NOT NULL,
    name VARCHAR(255),
    description TEXT,
    PRIMARY KEY (id, manufacturer_id)
);

CREATE TABLE carpets (
    id INTEGER NOT NULL AUTO_INCREMENT,
    manufacturer_id INTEGER NOT NULL,
    name VARCHAR(255),
    warranty TEXT,
    description TEXT,
    fiber_name VARCHAR(255),
    brand_name VARCHAR(255),
    texture_name VARCHAR(255),
    PRIMARY KEY (id, manufacturer_id)
);

CREATE TABLE carpet_styles (
    id INTEGER NOT NULL AUTO_INCREMENT,
    carpet_id INTEGER,
    style_name VARCHAR(255),
    PRIMARY KEY (id),
    FOREIGN KEY (carpet_id) REFERENCES carpets (manufacturer_id)
);

CREATE TABLE carpet_colors (
    id INTEGER NOT NULL AUTO_INCREMENT,
    carpet_id INTEGER,
    color_name VARCHAR(255),
    color_category VARCHAR(255),
    PRIMARY KEY (id),
    FOREIGN KEY (carpet_id) REFERENCES carpets (manufacturer_id)
);

CREATE TABLE carpet_custom_names (
    id INTEGER NOT NULL AUTO_INCREMENT,
    carpet_id INTEGER,
    custom_name VARCHAR(255),
    PRIMARY KEY (id),
    FOREIGN KEY (carpet_id) REFERENCES carpets (manufacturer_id)
);

CREATE TABLE rug_styles (
    id INTEGER NOT NULL AUTO_INCREMENT,
    rug_id INTEGER,
    style_name VARCHAR(255),
    PRIMARY KEY (id),
    FOREIGN KEY (rug_id) REFERENCES rugs (manufacturer_id)
);

CREATE TABLE rug_colors (
    id INTEGER NOT NULL AUTO_INCREMENT,
    rug_id INTEGER,
    color_name VARCHAR(255),
    color_category VARCHAR(255),
    PRIMARY KEY (id),
    FOREIGN KEY (rug_id) REFERENCES rugs (manufacturer_id)
);

CREATE TABLE rug_shapes (
    id INTEGER NOT NULL AUTO_INCREMENT,
    rug_id INTEGER,
    shape_name VARCHAR(255),
    shape_category VARCHAR(255),
    PRIMARY KEY (id),
    FOREIGN KEY (rug_id) REFERENCES rugs (manufacturer_id)
);

CREATE TABLE catalog_contents (
    id INTEGER NOT NULL AUTO_INCREMENT,
    catalog_id INTEGER,
    carpet_id INTEGER,
    rug_id INTEGER,
    PRIMARY KEY (id),
    FOREIGN KEY (rug_id) REFERENCES rugs (id),
    FOREIGN KEY (carpet_id) REFERENCES carpets (id),
    FOREIGN KEY (catalog_id) REFERENCES catalogs (id)
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:21:32.613

这似乎是因为虽然`carpets.manufacturer_id`它是复合键的一部分，但它没有自己的索引。您必须在其上独立于复合创建索引`PRIMARY KEY`。对于`rugs.manufacturer_id`

```
CREATE TABLE rugs (
    id INTEGER NOT NULL AUTO_INCREMENT,
    manufacturer_id INTEGER NOT NULL,
    name VARCHAR(255),
    description TEXT,
    /* manufacturer_id gets its own index */
    PRIMARY KEY (id, manufacturer_id),
    INDEX idx_rugs_manufacturer_id (manufacturer_id)
);

CREATE TABLE carpets (
    id INTEGER NOT NULL AUTO_INCREMENT,
    manufacturer_id INTEGER NOT NULL,
    name VARCHAR(255),
    warranty TEXT,
    description TEXT,
    fiber_name VARCHAR(255),
    brand_name VARCHAR(255),
    texture_name VARCHAR(255),
    PRIMARY KEY (id, manufacturer_id),
    /* manufacturer_id gets its own index */
    INDEX idx_manufacturer_id (manufacturer_id)
); 
```

# html - 在带有空格的文本下划线。是否可以通过html和css？

> ID：11317676
> 
> 赞同：7
> 
> 时间：2012-07-03T19:17:59.550
> 
> 标签：html, css

我在这上面花了几个小时。我试图描述附加图像上的问题。有必要用白线换行文本，行和文本之间有一些空格。

![在此处输入图像描述](../Images/b204ef5223668c6294fd9a7034f72690.png)

我想到的第一个解决方案 - 只是使用 smth line "margin-top:-20px;" 将文本放在线上 并给文本容器自定义背景（例如，灰色）。但这不是解决方案，因为容器的背景是透明的 :(

我想像这样制作（使用“float：left”）：

```
<div class="line"></div>
<div class="text">TEXT</div>
<div class="line"></div>
<div class="text">TEXT</div>
<div class="line"></div> 
```

但是如果我对所有元素使用 float:left ，则会出现另一个问题：白线应该在容器的右侧结束。

也许这个问题有一些css最佳实践，或者有人可以给出一些建议..？任何想法都会有所帮助:)！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T20:18:36.617

[http://jsfiddle.net/Q8yGu/5/](http://jsfiddle.net/Q8yGu/5/)

## HTML

```
<header><div><span class="spacer"></span><h1>Text</h1><span class="spacer"></span><h1>Text</h1><span class="spacer"></span></div></header>
<header><div><span class="spacer"></span><h1>100% Container Width</h1><span class="spacer"></span></div></header> 
```

## CSS

```
body {
    background:yellow;
}
header {
    display:table;
    width:100%;
    max-width:100%;
}
header div {
    display:table-row;
    line-height:1.5em;
    font-size:2em;
    white-space:nowrap;
}
header h1 {
    font-size:inherit; /* Change font-size in header */
    overflow:hidden;
    display:table-cell;
    vertical-align:middle;
    width:1px;
}
header span.spacer {
    display:table-cell;
}
header h1 {
    padding:0 10px;
}
header span.spacer:after {
    display:inline-block;
    width:100%;
    content:".";
    font-size:0;
    color:transparent;
    height:2px;
    background:#000;
    vertical-align:middle;
    position:relative;
    top:-1px;
}
header > a {
    font-size:.4em;
    vertical-align:middle;
    background:#25a2a4;
    color:#fff;
    text-transform:uppercase;
    font-family:monospace;
    border-radius:.5em;
    padding:.3em .5em;
    text-decoration:none;
} 
```

***注意：**要添加对 IE8 的支持，请使用除 html5shiv 之外的元素`header`或使用[html5shiv](http://code.google.com/p/html5shiv/)。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:11:43.727

要真正做你想做的事，让行穿插文本占据父容器的 100%，文本块均匀分布，很可能需要使用 javascript。可以为此目的创建一个 jQuery 插件。

这是一个极其粗略的代码版本，可能是这种解决方案的开始

[http://jsfiddle.net/jackwanders/XJNpz/](http://jsfiddle.net/jackwanders/XJNpz/)

但即使在这里，保持线条的适当宽度也不是理想的，因为快速缩小视口会导致一条线分解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:30:16.970

**HTML：**

```
<div class="line"></div>
<div class="text">TEXT</div>
<div class="line"></div> 
```

**CSS：**

```
.line {
    width: 100px;
    padding-top: 15px; /* font-size / 2  = (30/2=15) */
    border-bottom: solid 1px #000;
    float: left;
}
.text {
    font-size: 30px;
    font-weight: bold;
    color: #000;
    float: left; 
} 
```

> ![在此处输入图像描述](../Images/737e4f6802af52720cb998e37393a1a1.png)

**现场演示：[jsFiddle](http://jsfiddle.net/MUsnY/5/)**

* * *

## jQuery方法：

**HTML：**

```
<div id="container">
    <div class="line"></div>
    <div class="text">TEXT</div>
    <div class="line"></div>
</div> 
```

**CSS：**

```
#container
{
    width: 1000px; 
}
.line {
    padding-top: 15px; /* font-size / 2  = (30/2=15) */
    border-bottom: solid 1px #000;
    float: left; 
}
.text {
    font-size: 30px;
    font-weight: bold;
    color: #000;
    float: left; 
} 
```

**JavaScript：**

```
var text_width = parseInt($(".text").css("width"));
var container_width = parseInt($("#container").css("width"));
var line_width = (container_width - text_width) / 2;    
$("div").find(".line").css("width", line_width+"px"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T20:07:19.557

我昨天回答了同样的问题。在这里，看看 ->[如何在带有 CSS 的 html 标题中间有一条水平线？](https://stackoverflow.com/questions/11301380/how-to-have-a-horizontal-line-at-the-middle-of-a-html-heading-with-css/11301597#11301597)

它依赖于线性渐变。如果您不支持旧的 IE，它可以完美运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T20:22:49.083

检查这个：

```
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
</head>
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js"></script>
<script>
$(document).ready(function(){
    $(window).resize(function(){
        $('.line').width(($(window).width() - $('.text').width()*2) / 3 - 8);
    });
    $('.line').width(($(window).width() - $('.text').width()*2) / 3 - 8);
})
</script>
<style>

.line{
    margin-top:9px;
    border:1px solid silver;
    float:left;
}

.text{
    margin:auto;
    float:left;
}

</style>
<body>
<div class="line"></div>
<div class="text">text 1</div>
<div class="line"></div>
<div class="text">text 2</div>
<div class="line"></div>
</body>
</html> 
```

# java - 我怎样才能使多线程应用程序分布在java中？

> ID：11317678
> 
> 赞同：1
> 
> 时间：2012-07-03T19:17:59.960
> 
> 标签：java, multithreading, web-services, rest, distributed-computing

我正在使用 JAX-RS 和 jersey 在 java 中构建一个 RESTful Web 服务并将其部署在 Tomcat 7.0 中。在后端，有包装数据库对象的实体，用于操作数据库的 DAO，以及包含调度程序和线程以执行不同类型任务的处理包（目前，我有四个任务）。我想让项目分布式（例如在不同的机器上运行每个任务（线程）），如何做到这一点？我需要哪些技术和工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:25:55.257

> I want to make the project distributed (for example running each task (thread) on a different machine) how this can be done?

Threads run on a single process which lives in one single machine, splitting threads across several machines is not possible. You should have several processes instead. These processes can interact with each other via inter-process communication means such as RMI, Sockets... (have a look at [this](http://www.javaworld.com/javaqa/2000-03/03-qa-0324-ipc.html) article for more information)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:28:30.070

在 10 个字以内？这里有很多问题。也许让你开始 - 想想在每台机器上运行所有东西 - 任务是如何分配到不同的机器上的？是否有超级分销商向机器分发任务（通过一些机器间通信路径）？或者调度程序是否处理共享数据对象，即一些数据库数据 - 具有读取/写入共享数据的所有同步问题。这些任务的“输出”是什么？他们是否控制某事，或者他们是否有结果必须传输到一个共同的地方或两者兼而有之？

# javascript - Google Maps API v3 - 多点动画

> ID：11317679
> 
> 赞同：8
> 
> 时间：2012-07-03T19:18:00.893
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我正在建立一个成员目录，该目录以及按名称和与城镇或城市的距离的顺序列出成员，将使用 Google Maps API v3 显示在地图上。

我已经让它几乎按照我想要的方式工作，但我担心它有点慢。我已经在异步加载它，但是标记存在问题。

我希望地图加载，然后标记快速连续地出现在放置动画中。目前有一个延迟，它们都一起下降，有时它们出现在地图上然后下降，这看起来很奇怪。

我正在使用 PHP foreach 脚本（来自 MYSQL 数据库）为成员输出 javascript 数组 - 地图上可以有 10 到 400 个标记，但通常一次不超过 100 个。

为简洁起见，我在下面的示例中只包含了 4 个标记（正如我之前所说，它是从 PHP foreach 脚本输出的）：

```
<script>
var infowindow = null;
$(document).ready(function () { initialize();  });
function initialize() {
    var centerMap = new google.maps.LatLng(53.1,-2.2);
    var myOptions = {
        zoom: 9,
        center: centerMap,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        scrollwheel: false
    }

    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    setMarkers(map, sites);
    infowindow = new google.maps.InfoWindow({
            content: "loading..."
        });
}

 var sites = [
 ['Joe Bloggs',52.1022,-2.1070,1,"Member &nbsp;<a href=\"#\">Joe Bloggs</a>"],                              
 ['Peter Pan',52.2022,-2.2070,1,"Member &nbsp;<a href=\"#\">Peter Pan</a>"],                                
 ['Andrew Andrewson',52.0322,-2.0170,1,"Member &nbsp;<a href=\"#\">Andrew Andrewson</a>"],                              
 ['Peter Peterson',52.0022,-2.0070,1,"Member &nbsp;<a href=\"#\">Peter Peterson</a>"],  
 ];

function setMarkers(map, markers) {
    for (var i = 0; i < markers.length; i++) {
        var sites = markers[i];
        var siteLatLng = new google.maps.LatLng(sites[1], sites[2]);
        var marker = new google.maps.Marker({
            position: siteLatLng,
            map: map,
            title: sites[0],
            zIndex: sites[3],
            html: sites[4],
            animation: google.maps.Animation.DROP
        });

        var contentString = "Some content";
        google.maps.event.addListener(marker, "click", function () {
            infowindow.setContent(this.html);
            infowindow.open(map, this);
        });
    }
}

  function loadScript() {
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = 'https://maps.googleapis.com/maps/api/js?key=my-key-is-here&sensor=false&' +'callback=initialize';
    document.body.appendChild(script);
  }

  window.onload = loadScript;
</script> 
```

如何加快速度并使标记在页面加载后出现在拖放动画中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-07T19:24:34.523

TL，DR：[演示链接](http://jsfiddle.net/yV6xv/128/)

在我看来，您将不得不编写自定义动画函数来创建一些漂亮的东西。

我使用了开箱即用的 google.maps.Animation.DROP 和各种`setTimeout`设置，但无法找到令人满意的设置。最大的障碍似乎是同时发生的少量标记 DROP 会迅速降低动画的流畅度，从而导致丑陋、波涛汹涌、凌乱的标记雨。它甚至让我的 IE7 崩溃了 :(

换句话说，如果你想要一个好看的 DROP 序列，连续 DROP 之间的时间延迟需要比较大（100-200 毫秒），并且在 100 个标记处，这意味着要等待 10 到 20 秒，直到最后一个标记下降. 我认为让最终用户坐下来观看整个动画的时间太长了，但如果 DROP 延迟很短，地图的动画看起来并不好。这是动画质量和加载速度之间的平衡。

一种解决方法可能是向地图添加点击侦听器，以便在触发时立即显示剩余的未显示标记。我没有在我的演示中添加这个逻辑。

这是[**JSFiddle 上的演示**](http://jsfiddle.net/yV6xv/128/)。可以使用三个变量，一个控制标记的数量，另外两个控制标记 DROP 之间的延迟。您可以更改这些值，然后单击 `> Run` 查看更改。

一些注意事项：

1.  我对随机列表进行排序，以便标记从上到下下降。我认为它看起来比标记的零星雨更好。您还可以重写按距离排序的函数，以便靠近预定义中心的站点首先 DROP。

2.  有一个自动执行的匿名函数包装超时，以便为每个标记创建新的变量范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T17:01:30.893

如果您的页面加载时间很长，您可以选择使用 异步加载 Google Maps API `callback`，该参数可以定义为加载 Google Maps JavaScript 库的 URL 上的参数：

```
<script>
window.onload = loadGoogleMaps;

function loadGoogleMaps() {
   var script = document.createElement("script");
   script.type = "text/javascript";
   script.src =    
     "http://maps.googleapis.com/maps/api/jssensor=false&callback=initialize";
   document.body.appendChild(script);
} 
```

这将允许您保留现有`initialize`功能，该功能将在 Google Maps JavaScript 库完全加载后运行，但您需要删除`initialize()`当前在您的内部的调用，`$(document).ready`以便它不会运行两次。

`DROP`您不应该看到标记放置在地图上，然后是动画的两步过程。您可能还想查看`setMarkers`函数运行需要多长时间，因为如果运行时间过长，则可能是您所描述的根本原因。

## 根据后续评论进行编辑：

如果您想创建所有标记，则可以在 JavaScript 中使用一件事，但在每个标记创建之间添加延迟是 JavaScript`setTimeout( function, delayInMilliseconds`函数。您必须在调用期间跟踪您在标记数组中的位置，但它可以将工作划分为不同的工作单元。使用`setTimeout`，您应该能够在每个标记放置之间添加一个短暂的延迟，这应该会给您想要达到的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T12:47:06.440

要按时间间隔标记创建，您可以使用 window.setTimeout()，例如：

```
//UNTESTED!!
            function setMarkers(map, markers) {
                   while (markers.length) {
                    var markerData = markers.shift();
                    window.setTimeout(function(){doSetMarker(markerData,map)},10);// 10 miliseconds. (play with this value).
                    }
                }

                function doSetMarker(markerData,map) {
                    var sites = markerData;
                    var siteLatLng = new google.maps.LatLng(parseFloat(sites[1]), parseFloat(sites[2]));
                    var marker = new google.maps.Marker({
                        position: siteLatLng,
                        map: map,
                        title: sites[0],
                        zIndex: sites[3],
                        html: sites[4],
                        animation: google.maps.Animation.DROP
                    });
                        var contentString = "Some content";
                        google.maps.event.addListener(marker, "click", function () {
                            infowindow.setContent(this.html);
                            infowindow.open(map, this);
                        });

                } 
```

# visual-studio-2010 - 从 Visual Studio 进程调用时，托管 C++ dll 函数在返回时引发访问冲突

> ID：11317681
> 
> 赞同：0
> 
> 时间：2012-07-03T19:18:04.963
> 
> 标签：visual-studio-2010, debugging, access-violation, managed-c++

我有一个托管 C++ dll，它用作Visual Studio 调试器的[EEAddIn 。](http://msdn.microsoft.com/en-us/library/8fwk67y3%28v=vs.90%29.aspx)我的 dll 导出一个接受和返回非托管类型的函数。dll中函数的声明如下（DEBUGHELPER是一个普通的结构）：

```
extern "C" 
{
#pragma unmanaged
  __declspec(dllexport) HRESULT CvMatViewer(DWORD dwAddress, DEBUGHELPER *pHelper, 
    int nBase, BOOL bUniStrings, char *pResult, size_t max, DWORD reserved)
  {
    strcpy_s(pResult, max, "Value is processed");
    return S_OK;
  }
} 
```

我的 dll 的目的是处理来自 Visual Studio 调试器的变量，并在显示在 Watch Window 之前以任意方式格式化它们（EEAddIn 的用途，非常酷）。

我启动了两个 Visual Studio - 一个用于我的托管 dll，一个用于本机调试的 exe。我可以将我的 dll 附加到运行本机 exe 的 Visual Studio 进程并设置断点。当用户在 Watch 窗口中添加变量时，我的断点被命中。我可以看到所有参数都正确传递并且函数工作正常，直到到达 return 语句。

之后，我有一个`Unhandled exception at 0x51ea9de4 in devenv.exe: 0xC0000005: Access violation reading location 0x00000000`.

同样适用于非托管 dll。那么有人能猜出问题隐藏在哪里吗？

两个 Visual Studio 都是 2010 版本。

是的，我可以使用非托管 dll 接受此调用，然后将控制权传递给另一个托管 dll，但奥卡姆剃刀原则告诉我不要这样做。

**更新：** `pResult`不是NULL，即使我注释掉也会抛出异常`strcpy_s`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:55:48.143

看起来您必须`stdcall`明确设置此函数的调用约定，这应该会有所帮助。

```
__declspec(dllexport) HRESULT __stdcall CvMatViewer(DWORD dwAddress, DEBUGHELPER *pHelper, 
    int nBase, BOOL bUniStrings, char *pResult, size_t max, DWORD reserved); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:22:06.453

在将数据复制到其中之前，我会检查 pResult 实际上是否不是空指针。考虑到函数的大小，这很可能是你的问题。

# asp.net - .cs 文件中无法识别的工具箱对象

> ID：11317686
> 
> 赞同：0
> 
> 时间：2012-07-03T19:18:27.713
> 
> 标签：asp.net

我是asp新手。我已经使用asp建立了一个网站。我使用 Artisteer 构建模板。在我尝试创建登录页面之前，一切正常。我会给我的部分代码不要打扰

这是我的 Registration.aspx 页面的一部分

```
<@ Page Language="C#" MasterPageFile="~/design/MasterPage.master" AutoEventWireup="true"
 CodeFile="Registration.aspx.cs" Inherits="Registration" %>

<@ Import Namespace="Artisteer" %>

<@ Register TagPrefix="artisteer" Namespace="Artisteer" %>

<@ Register TagPrefix="art" TagName="DefaultMenu" Src="DefaultMenu.ascx" %> 

<@ Register TagPrefix="art" TagName="DefaultHeader" Src="DefaultHeader.ascx" %> 

<@ Register TagPrefix="art" TagName="DefaultSidebar1" Src="DefaultSidebar1.ascx" %>

asp:Content ID="PageTitle" ContentPlaceHolderID="TitleContentPlaceHolder" Runat="Server">Once Upon a Cake</asp:Content>

asp:Content ID="MenuContent" ContentPlaceHolderID="MenuContentPlaceHolder" Runat="Server">
    <art:DefaultMenu ID="DefaultMenuContent" runat="server" />
</asp:Content>

asp:Content ID="HeaderContent" ContentPlaceHolderID="HeaderContentPlaceHolder" Runat="Server">

art:DefaultHeader ID="DefaultHeader" runat="server" />
</asp:Content>

asp:Content ID="SideBar1" ContentPlaceHolderID="Sidebar1ContentPlaceHolder" Runat="Server">
art:DefaultSidebar1 ID="DefaultSidebar1Content" runat="server" />
</asp:Content>

<asp:Content ID="SheetContent" ContentPlaceHolderID="SheetContentPlaceHolder" Runat="Server">

    <artisteer:article ID="Article2" runat="server"><ContentTemplate>

       <br />

        <table class="art-article" border="0" cellspacing="0" cellpadding="0">
      <tbody>
        <tr>
          <td>Name</td>
          <td>User Name</td>
          <td><asp:TextBox ID="textBoxUser" runat="server" Width="240" MaxLength="15" ></asp:TextBox>
            </td>
          <td>
          <td> 
```

…………

Registration.aspx.cs 文件是

```
using System;

using System.Collections.Generic;

using System.Web;

using System.Web.UI;

using System.Web.UI.WebControls;

using System.Data.SqlClient;

using System.Configuration;

public partial class Registration : System.Web.UI.Page

{

    protected void Page_Load(object sender, EventArgs e)
    {

        if (IsPostBack)
        {

            SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["RegConnectionString"].ConnectionString);
            con.Open();
            string cmdStr = "Select coun (*) from Register where UserName='" + textBoxUser.Text + "'";
            SqlCommand userExist = new SqlCommand(cmdStr, con);
            int temp = Convert.ToInt32(userExist.ExecuteScalar().ToString());
            if (temp == 1)
            {
                Response.Write("User Name already Exist!!! </br> Choose another");
            }
        }

    } 
```

问题是 .cs 文件中无法识别 textBoxUser。有人有什么主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:43:56.283

请注意，文章（或块）是模板控件。因此，您不能直接从页面引用 ContentTemplate 中的控件。您应该在文章的上下文中找到此控件。

尝试将以下代码添加到 Article 类

```
public override Control FindControl(string id) 
{ 
EnsureChildControls(); 
if (null != _contentPlaceholder && _contentPlaceholder.Controls[0] is TemplateContainer) 
return _contentPlaceholder.Controls[0].FindControl(id); 

return null; 
} 
```

然后你可以像这样引用你的控件：

```
TextBox txt = Article2.FindControl("textBoxUser") as TextBox; 
```

参考：[艺人论坛](http://www.artisteer.com/?post_id=162424&p=forum_post)

# postgresql - 为 Heroku 重写 PostgreSQL 查询

> ID：11317687
> 
> 赞同：0
> 
> 时间：2012-07-03T19:18:28.917
> 
> 标签：postgresql, heroku, window-functions

请帮我重写它，以便它可以在 PostgreSQL (8.3.11) 不理解`over`关键字的 Heroku 上运行。

```
SELECT
    user_id,
    round(max(hspeed) * 2.238) as chs,
    percent_rank() over (partition by con_size_id ORDER BY MAX(hspeed))
FROM
    summaries ss
    INNER JOIN spaths s ON ss.spath_id = s.id
    INNER JOIN cons c ON c.id = s.con_id
    INNER JOIN users u ON c.user_id = u.id
WHERE
    con_size_id = 1
GROUP BY
    user_id,
    con_size_id; 
```

“user_id”和“con_size_id”来自“cons”表，“hspeed”来自“summaries”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:35:50.947

答案是升级到 8.4 或更高版本。如果没有大量复杂的用户定义函数来包装您的查询，则 8.3 及更低版本无法合理地支持所需的功能。

# javascript - 在javascript数组中查找最大值的键

> ID：11317688
> 
> 赞同：0
> 
> 时间：2012-07-03T19:18:29.677
> 
> 标签：javascript, arrays, key, max

我有一个空数组，我使用 javascript 将值推送到其中。我能够找到数组的最大值并使用以下方法将其设置为变量：

```
Array.max = function( array ){
    return Math.max.apply( Math, array );
};

var maxX = Array.max(xArray); 
```

如何找到与该值关联的键？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T19:20:40.110

假设这些值是唯一的，您可以使用[`Array.indexOf`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)：

```
var maxX = Array.max(xArray);
var index = xArray.indexOf(maxX); 
```

如果键不唯一，`index`将包含找到的第一个元素的键。如果该值根本不存在，则“键”将为`-1`.

# backbone.js - Backbone Marionette 在获取完成前显示

> ID：11317691
> 
> 赞同：3
> 
> 时间：2012-07-03T19:18:49.893
> 
> 标签：backbone.js, marionette

我知道我在做一些愚蠢的事情，但我的骨干木偶应用程序给了我没有意义的模板错误。它似乎在 fetch 事件发生之前呈现单个项目。

```
_.templateSettings = {
    interpolate: /\{\{(.+?)\}\}/g
};

MyApp = new Backbone.Marionette.Application();
MyApp.addRegions({
    TagsRegion: "#tagsHolder"
});

MyApp.NoItemsView = Backbone.Marionette.ItemView.extend({
    template: "#show-no-items-message-template"
});

MyApp.Tag = Backbone.Model.extend({

});
MyApp.TagCollection = Backbone.Collection.extend({
    model: MyApp.Tag,
    url: '/API/Tag'
});
MyApp.TagItemView = Backbone.Marionette.ItemView.extend({
    template: "#tag-template",
    tagName: 'li'
});

MyApp.TagCollectionView = Backbone.Marionette.CollectionView.extend({
    itemView: MyApp.TagItemView,
    emptyView: MyApp.NoItemsView,
    tagName: 'ul'
});

MyApp.addInitializer(function(options){
    var tagCollection = new MyApp.TagCollection({
    });
    var tagCollectionView = new MyApp.TagCollectionView({
        collection: tagCollection
    });

    tagCollection.fetch();
    MyApp.TagsRegion.show(tagCollectionView);
}); 
```

我的html页面是

```
<div id="TagsDiv">
    <h1>Tags</h1>
    <div id="tagsHolder"></div>
</div>    
<script type="text/template" id="show-no-items-message-template">
    No items found.
</script>

<script type="text/template" id="tag-template">
    {{ TagName }}
</script>

    <script type="text/javascript" src="/Scripts/Views/Home/Upload.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {

            MyApp.start();
        }); 
```

如果我从标签模板中删除胡须，它会显示 1：“TagName”，然后当提取完成时，它会显示正确的数字。

如果我把胡须放回去，我会得到“未定义标签名”

我觉得我的模式之一倒退了。我只是太近了，看不到它。

谢谢-马克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T02:29:33.650

问题是初始化程序中的这一行

```
var tagCollection = new MyApp.TagCollection({
    }); 
```

当您将空对象字面量传递给 Backbone.Collection 构造函数时，Backbone 在集合中创建一个空模型。要解决此问题，只需删除对象文字：

`var tagCollection = new MyApp.TagCollection()`

并且它不会再有空项目了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:09:53.263

尝试：

```
tagCollection.fetch({ wait: true }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T23:10:29.830

将模型修改为具有我想要模板化的任何内容的默认值。感觉 Klugy 但它给了我一个有效的应用程序。

```
MyApp.Tag = Backbone.Model.extend({
    defaults :
        {
            TagName : 'None'
        }
}); 
```

# c - 强制 FreeBSD 应用程序生成核心文件

> ID：11317694
> 
> 赞同：2
> 
> 时间：2012-07-03T19:19:12.800
> 
> 标签：c, unix, freebsd

当应用程序/线程具有 SIGSEGV==11 时，是否可以强制 FreeBSD 生成核心文件？

我有一个正在执行此操作的应用程序，但是，我认为它只是正在死亡的线程之一，并且可执行文件保持运行。

该可执行文件作为服务运行 - 文件在哪里？我可以强制核心文件显示在 /tmp 中吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:39:36.370

您要查找的联机帮助页是 core(5)。您可能希望将 kern.corefile 设置为您确定具有写入权限并且有足够空间的位置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:30:52.463

根据`man signal`，一个 SIGSEGV 应该总是生成一个核心文件。

附带条件是将在当前工作目录中生成一个核心文件，该目录通常是进程启动时的工作目录。我很确定你不能改变这种行为。请注意，某些程序是由 shell 脚本启动的，该脚本会在启动二进制文件之前更改工作目录，因此您可以通过修改 shell 脚本来影响事情。

根据[手册的调试部分](http://www.freebsd.org/doc/en/books/developers-handbook/debugging.html)，您还可以将 GDB 附加到正在运行的进程。

如果你想在一个中心位置收集核心文件`/tmp`，你可以在 cron 中运行这样的东西：

```
find ~ -name '*.core' -exec mv {} /tmp \; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T13:27:05.707

什么是

```
# sysctl kern.coredump 
```

输出？如果它是0，那么你应该把它设置为1，即，

```
# sysctl kern.coredump=1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T20:57:45.943

在 Linux 上，如果我遇到这个问题，我会检查是否设置了 ulimit -c unlimited。这可能也适用于 FreeBSD。请参阅：[如何在我的 Linux C++ 程序中启用核心转储](https://stackoverflow.com/questions/2919378/how-to-enable-core-dump-in-my-linux-c-program)

获取要杀死的进程的 pid：

ps -ef | grep 进程名称

这会给你这样的东西：

```
user    PID  TID  0 etc 
```

杀死 -6 PID

确保进程已死，再次运行它，它不应该像以前那样向您显示进程。

ps -ef | grep PID

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-22T06:54:27.643

是的，这是可能的。

```
#include <sys/resource.h>

// core dumps may be disallowed by parent of this process; change that
struct rlimit core_limits;
core_limits.rlim_cur = core_limits.rlim_max = RLIM_INFINITY;
setrlimit(RLIMIT_CORE, &core_limits); 
```

你也喜欢设置系统 coredump 文件夹

```
# FreeBSD
mkdir -p /var/coredumps
chmod 777 /var/coredumps                        # for "kern.sugid_coredump=1"
sysctl kern.corefile=/var/coredumps/%U/%N.core
sysctl kern.coredump=1                          # default 
```

有关更多信息，您可以阅读[core(5)](https://www.freebsd.org/cgi/man.cgi?query=core&sektion=5)和[setrlimit(2)](https://www.freebsd.org/cgi/man.cgi?query=setrlimit&sektion=2)

# cordova - PhoneGap 1.9 条码扫描器 iOS 问题

> ID：11317695
> 
> 赞同：1
> 
> 时间：2012-07-03T19:19:14.423
> 
> 标签：cordova, barcode

全部，

有没有人可以使用适用于 iOS 的条码扫描仪的工作示例？我已经下载了插件并将示例部署到我的 iphone 4 和 5.01ver 操作系统。它加载我点击“扫描某些东西”按钮，没有任何反应，没有错误只是没有。我知道这个版本是 Cordova 1.5。但是，我在 1.9 版本中遵循了插件中的示例和说明，它正在做同样的事情。我已经仔细检查了 plist，它都与示例的 plist 和说明相匹配。我确实在“扫描”功能的barcodescanner.js文件中放置了一个console.log，但它永远不会到达那里，或者至少它永远不会在输出窗口中显示它。有任何想法吗？我看到其他人为 1.8.1 发布了完全相同的问题，但没有人回答他...

谢谢

蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:02:23.850

[我刚刚安装在一个香草 1.9.0 上，其方向与它们出现在https://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner)上的方向完全相同，它会为我打开扫描仪。

目前我无法让它识别出它已经扫描了条形码。

在为扫描按钮注册点击事件之前，您的文档/设备就绪功能中是否存在崩溃？就像点击不在白名单中的网址或类似的东西。

除此之外，您可以编辑调用扫描功能的代码吗？

# android - MediaPlayer .setDataSource() 在android中导致异常

> ID：11317700
> 
> 赞同：0
> 
> 时间：2012-07-03T19:19:37.700
> 
> 标签：android, list, load, mp3, playback

我正在制作一个 android 应用程序，它将文件从 sdcard 上的目录加载到列表中。一旦一个项目被点击，它就会解析它的路径，并将其放入一个字符串中。我正在尝试使用 .SetDataSource() 方法将字符串加载到媒体播放器中，但它会强制关闭并导致异常。我怎样才能解决这个问题？请帮助我，谢谢！代码如下：

```
package com.mysoftwaremobileapps.Cross;

import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import android.app.ListActivity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListAdapter;
import android.widget.ListView;

public class MusicActivity extends ListActivity {
//Called when the activity is first created
List<String> myList = new ArrayList<String>();
EditText AddItemToListViewEditText;
  static final String[] COUNTRIES = new String[] {
      "Movies"
      };
  MediaPlayer mp1;
  String musicUri;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.musicscreen);

    //Setup ListView
    setListAdapter((ListAdapter) new ArrayAdapter<String>(this, R.layout.list_item, COUNTRIES));
    setListAdapter((ListAdapter) new ArrayAdapter<String>(this, R.layout.list_item, myList));

    ListView lv = getListView();
    lv.setTextFilterEnabled(true);

    File mFile = new File(Environment.getExternalStorageDirectory() + "/Music/");
    myList.addAll(Arrays.asList(mFile.list()));
    setListAdapter((ListAdapter) new ArrayAdapter<String>(this, R.layout.list_item, myList));

    lv.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> parent, View view,
          int position, long id) {
        //When an item is clicked, play it on a MediaPlayer
          try {
              musicUri = Environment.getExternalStorageDirectory() + "/Music/" + myList.get(position);
            mp1.setDataSource(musicUri);
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
  }
    });
}
} 
```

**日志猫：**

```
 07-03 21:25:42.031: D/ViewConsistency(5165): AbsListView android.widget.ListView@40588c48 enabled= true
07-03 21:25:42.051: D/ViewConsistency(5165): AbsListView android.widget.ListView@40588c48 enabled= true
07-03 21:25:43.691: D/AndroidRuntime(5165): Shutting down VM
07-03 21:25:43.691: W/dalvikvm(5165): threadid=1: thread exiting with uncaught exception (group=0x40015560)
07-03 21:25:43.721: E/AndroidRuntime(5165): FATAL EXCEPTION: main
07-03 21:25:43.721: E/AndroidRuntime(5165): java.lang.NullPointerException
07-03 21:25:43.721: E/AndroidRuntime(5165):     at com.mysoftwaremobileapps.Cross.MusicActivity$1.onItemClick(MusicActivity.java:52)
07-03 21:25:43.721: E/AndroidRuntime(5165):     at android.widget.AdapterView.performItemClick(AdapterView.java:284)
07-03 21:25:43.721: E/AndroidRuntime(5165):     at android.widget.ListView.performItemClick(ListView.java:3513)
07-03 21:25:43.721: E/AndroidRuntime(5165):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:1877)
07-03 21:25:43.721: E/AndroidRuntime(5165):     at android.os.Handler.handleCallback(Handler.java:587)
07-03 21:25:43.721: E/AndroidRuntime(5165):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-03 21:25:43.721: E/AndroidRuntime(5165):     at android.os.Looper.loop(Looper.java:130)
07-03 21:25:43.721: E/AndroidRuntime(5165):     at android.app.ActivityThread.main(ActivityThread.java:3835)
07-03 21:25:43.721: E/AndroidRuntime(5165):     at java.lang.reflect.Method.invokeNative(Native Method)
07-03 21:25:43.721: E/AndroidRuntime(5165):     at java.lang.reflect.Method.invoke(Method.java:507)
07-03 21:25:43.721: E/AndroidRuntime(5165):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
07-03 21:25:43.721: E/AndroidRuntime(5165):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
07-03 21:25:43.721: E/AndroidRuntime(5165):     at dalvik.system.NativeStart.main(Native Method)
07-03 21:25:45.171: I/Process(5165): Sending signal. PID: 5165 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:42:39.637

您从未实例化 MediaPlayer 对象，这正是抛出您得到的 NPE 的原因；你只留下它：MediaPlayer m1p

在设置数据源之前，您需要使用以下命令对其进行实例化：

```
 m1p = new MediaPlayer(); 
```

# ios - Apple推送通知不会自动更改图标徽章

> ID：11317701
> 
> 赞同：13
> 
> 时间：2012-07-03T19:19:37.760
> 
> 标签：ios, apple-push-notifications, badge

我已经看到我的 iPhone（4S，iOS 5.1）中的邮件应用程序会在新邮件到达时自动更新徽章计数，即使应用程序没有运行也是如此。所以也有可能在我的应用程序中实现这种行为，对吧？

我的应用程序成功注册了所有 3 种类型的推送通知 - 徽章、警报和声音。此应用程序的所有 3 种远程通知类型都设置为“电话设置”。

我的应用程序接收远程通知并显示警报、播放声音，但它**不会**更新徽章编号。如果我通过警报上的查看按钮启动应用程序，那么我的应用程序可以完美地读取徽章值，并且我可以从代码中更改/删除/设置图标徽章。

通知到达时iOS无法自动更改我的应用程序图标徽章的任何具体原因？我看过所有类似的帖子，他们都在讨论电话设置，或者它注册的通知类型，或者关于检查负载 JSON 是否包含徽章。

是否有任何其他原因可能导致此问题？

这是我的代码块：

每次启动应用程序时注册 APNs -

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge |UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeSound)]; 
```

设备令牌几乎立即收到。令牌已发送给提供商，我正在接收通知。警报和声音有效。但是在我启动应用程序并手动更改之前，徽章不会自动生效。请帮忙。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-26T19:52:07.533

我也有这个完全相同的问题。未引用徽章图标。在尝试调整 JSON 数小时后（在验证手机上的应用程序显示徽章、声音、警报之后） - 问题是我添加了*UIRemoteNotificationTypeNewsstandContentAvailability*作为我的应用程序注册的警报类型之一。（我疯了，什么都选）

所以，当`UIRemoteNotificationTypeNewsstandContentAvailability`它也在混合中时，它似乎覆盖了允许 aps/badge 数字更新应用程序图标的功能。（一定要更新报摊信息）

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-06T14:15:26.443

该问题现已修复。提供者服务器发送带引号的徽章编号（作为 JSON 字符串，即“9”）。奇怪的是 APNs/iOS 不将其识别为整数。现在引号已删除并且可以正常工作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-30T01:29:29.493

I had a similar problem, solved it by forcing integer in the badge number (using PHP with data coming from MySQL db):

```
$body['aps'] = array(
        'alert' => array(
        'action-loc-key'=> utf8_encode($r['button_action']),
        'body'          => utf8_encode($r['message']),
        'launch-image'  => ''
        ),
    'badge' => (int)$r['badge_number'],
    'sound' => 'default'
    ); 
```

Ps.: take a look at the `utf8_encode` command to avoid a `json_encode` error I faced earlier too.

# ruby-on-rails-3 - 关于结构应用示例的 Ruby on Rails

> ID：11317703
> 
> 赞同：0
> 
> 时间：2012-07-03T19:19:44.807
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1

我正在学习 Ruby on Rails，但我有一些问题，但没有找到答案，希望对我有所帮助，谢谢。

1 - 如果我构建一个电子商务商店，我为每个方面创建一个控制器示例：1 个控制器到管理员 1 个控制器到产品 1 个控制器到存储 1 个控制器到客户端

我的问题是，是否正确？每个控制器一个？

2 - 我分析了脚手架代码，我不想使用它，想编写我的应用程序，但我分析代码并查看不同的路线，例如，创建是发布，我如何定义这个动作，脚手架使用 New Show Create..and更多一些此类（操作）是默认的？或者生成的脚手架的控制器中的代码使我如何定义这是获取还是发布？

我希望你能回答这些问题，谢谢你的支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:17:50.960

> 1 - 如果我构建一个电子商务商店，我为每个方面创建一个控制器示例：1 个控制器到管理员 1 个控制器到产品 1 个控制器到存储 1 个控制器到客户端
> 
> 我的问题是，是否正确？每个控制器一个？

是的，每个控制器一个！

并且不要忘记：瘦控制器，胖模型！

# solr - SOLR 在amazon linux中的高CPU利用率

> ID：11317707
> 
> 赞同：1
> 
> 时间：2012-07-03T19:20:08.950
> 
> 标签：solr, amazon-ec2, cpu

我在**本地 Windows 框中**安装了 solr-3.6 ，它运行良好。

**我在 amazon ec2 linux 大型实例**中安装了 solr-4.0，cpu 使用率飙升至 100%。它保持在 80-90% 的平均 CPU 功率。

我以为可能是4.0的原因，所以我又在EC2中安装了3.6。但同样，CPU 使用率平均为 80-90%。

对于这两个版本，solr 都可以在 EC2 中使用。不知道为什么CPU使用率这么高。

在我的本地机器中安装了 java 1.7，在 EC2 中它是 1.6.0_24。我已将 solr 目录映射到 EBS 卷。

```
/dev/mapper/vg1-solr   8361916   1935928   6342128  24% /home/ec2-user/SOLR/solr/example/solr 
```

有什么已知问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:40:30.973

我们昨天遇到了这个问题 - 问题是因为 2012 年 6 月 30 日的闰秒。管理睡眠时间的 linux 内核组件没有更新到正确的时间，这导致 Java 进程的 CPU 使用率极高。[关于 serverfault 的相关问题](https://serverfault.com/questions/403732/anyone-else-experiencing-high-rates-of-linux-server-crashes-during-a-leap-second)以及我从中得出的修复（对于 Debian）：

（从命令行发出这些命令）

```
export LANG="en_EN"
date -s "`date`"

/etc/init.d/ntp stop
ntpdate pool.ntp.org
/etc/init.d/ntp start 
```

对于 Red Hat 派生系统，我相信你`ntp`用`ntpd`.

# android - 可编辑/方法调用抛出 java.lang.nullpointerexception？

> ID：11317708
> 
> 赞同：0
> 
> 时间：2012-07-03T19:20:11.743
> 
> 标签：android, nullpointerexception, android-edittext

首先，我只想说，stackoverflow 社区至少可以这么说。尝试构建我的前两个应用程序，目前已部署但试图在非洲淘汰几个课程。

所以，我正在制作一个非常基本的蛋白质跟踪应用程序。原谅我过多的评论，当我试图弄清楚这些东西时，它让我保持头脑清醒。

我已经查找并找到了很多以前问题的答案，但我不知道如何在这方面取得进展。

[如何在 Android 中计算 EditText 值？](https://stackoverflow.com/questions/6965063/how-to-calculate-edittext-value-in-android)

我从那个开始，它很棒（谢谢你 luvieere），但我认为我制作的可编辑部分有点吓人。我在 Eclipse 中的 logcat 正在调用该行以及我的计算方法。

这可能只是一些简单的事情，但据我所见，这是一个如此广泛的错误，你只需要查看这些可怕的代码行就可以知道我哪里出错了。再次感谢人们的帮助，这是我第一次提出问题，所以让我知道如何给你疯狂的代表。:D

一些代码：

```
public class anitasProteinTracker extends Activity implements OnClickListener {
    Button btnOverviewSnapshot, btnNomNoms, btnSettingsCalculate;
    EditText etSettingsProteinGoal, etWeight;

    <//random code here//>

    btnSettingsCalculate = (Button) findViewById(R.id.btnSettingsCalculate);
    btnSettingsCalculate.setOnClickListener(this);

    <//random code here//>

public void onClick(View v) {

    switch(v.getId()){

    <//random code here//>

    case R.id.btnSettingsCalculate:

        //clicking this will find the value and set it to the goal edittext
        calcProteinGoal();   <---This line showed up in logcat

        break;

    }
}

private void calcProteinGoal() {
    // TODO Auto-generated method stub
    Editable etWeightlbs;    <----this is the other error line in logcat
    double weightlbs = 0;
    double weightkgs = 0;
    double proteinMultiplier;
    double gProtein = 0;

    //get the weight from the user and ensure it's a number
    etWeightlbs = etWeight.getText();

        if (etWeightlbs != null)
            weightlbs = Double.parseDouble(etWeightlbs.toString());
            //convert lbs -> kgs
            weightkgs = weightlbs / 2.2;

    //get spinner value
    //don't know how to do that yet, going to set the variable
    proteinMultiplier = 0.8;

    //set up protein goal   
    gProtein = weightkgs * proteinMultiplier;

    etSettingsProteinGoal.setText(String.valueOf(gProtein)); 
```

一些logcat：

```
07-03 21:41:14.405: W/dalvikvm(1861): threadid=1: thread exiting with uncaught exception (group=0x4001d7e0)
07-03 21:41:14.429: E/AndroidRuntime(1861): FATAL EXCEPTION: main
07-03 21:41:14.429: E/AndroidRuntime(1861): java.lang.NullPointerException
07-03 21:41:14.429: E/AndroidRuntime(1861):     at com.joemac.anitasprotein.anitasProteinTracker.calcProteinGoal(anitasProteinTracker.java:119)
07-03 21:41:14.429: E/AndroidRuntime(1861):     at com.joemac.anitasprotein.anitasProteinTracker.onClick(anitasProteinTracker.java:102)
07-03 21:41:14.429: E/AndroidRuntime(1861):     at android.view.View.performClick(View.java:2408)
07-03 21:41:14.429: E/AndroidRuntime(1861):     at android.view.View$PerformClick.run(View.java:8816)
07-03 21:41:14.429: E/AndroidRuntime(1861):     at android.os.Handler.handleCallback(Handler.java:587)
07-03 21:41:14.429: E/AndroidRuntime(1861):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-03 21:41:14.429: E/AndroidRuntime(1861):     at android.os.Looper.loop(Looper.java:123)
07-03 21:41:14.429: E/AndroidRuntime(1861):     at android.app.ActivityThread.main(ActivityThread.java:4627)
07-03 21:41:14.429: E/AndroidRuntime(1861):     at java.lang.reflect.Method.invokeNative(Native Method)
07-03 21:41:14.429: E/AndroidRuntime(1861):     at java.lang.reflect.Method.invoke(Method.java:521)
07-03 21:41:14.429: E/AndroidRuntime(1861):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
07-03 21:41:14.429: E/AndroidRuntime(1861):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
07-03 21:41:14.429: E/AndroidRuntime(1861):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:44:05.043

只是因为我在那里看不到它......你也在为 EditText 做 findViewById 对吗？我所看到的只是按钮的绑定。

# php - PHP 灵活的访问控制

> ID：11317710
> 
> 赞同：2
> 
> 时间：2012-07-03T19:20:13.737
> 
> 标签：php, security, access-control

我需要在 PHP 中找到一个灵活的访问控制解决方案。在过去，我已经在页面和所需的最低访问级别之间创建了一个映射，并且在访问级别已经明确和分层的情况下效果很好。我现在正在做一个项目，我仍然需要访问控制，但没有清晰的分层访问级别。

基本上，我们有一个网站，我们希望允许我们的客户使用自定义模板将其作为自己的品牌。每个站点都将具有完全相同的页面，但各个站点可能具有 1 到 4 个访问级别，并且没有明确定义的页面可能适合的层次结构可用于定义权限。

我找到了一些名为[Flaxis](http://code.google.com/p/flaxis/)的库的文档，它看起来非常好，但不幸的是，该库本身似乎丢失了。

是否有人对可以满足我需求的库有任何经验，或者对我如何处理这些灵活的权限有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:14:38.690

事实证明，有时最好的解决方案就是自己构建它。我最终创建并开源了[PHP-Bouncer](https://code.google.com/p/php-bouncer/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:59:15.880

您可以将[Zend_Acl](http://framework.zend.com/manual/en/zend.acl.html/)用作独立组件，只需包含代码并使用它

# search - 在 Janus MacVim 中关闭搜索突出显示

> ID：11317714
> 
> 赞同：2
> 
> 时间：2012-07-03T19:20:26.727
> 
> 标签：search, syntax-highlighting, macvim

我不小心用 Janus 在 MacVim 中“搜索”（`:/u<Enter>`），现在我无法让突出显示消失。我真的不需要每个`u`突出显示。

我真的很*喜欢*这个功能，我只需要在完成后关闭突出显示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T15:31:58.953

要在搜索后关闭突出显示，请使用`:noh`. 下次您发出搜索时，突出显示将自动再次打开。

我已经在正常模式下映射了 RETURN 键来关闭搜索突出显示，如下所示：

```
 nnoremap <silent> <CR> :noh<CR> 
```

所以在我完成搜索后，我回到正常模式，点击 RETURN 然后没有更多亮点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:45:29.303

解决方法：搜索不存在的字符串，不会突出显示任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T16:07:54.657

来自 Janus 的文档：

> `<leader>hs`切换高亮搜索

来自[https://github.com/carlhuda/janus](https://github.com/carlhuda/janus)

# c++ - MFC CEdit 传递 pParentWnd

> ID：11317719
> 
> 赞同：0
> 
> 时间：2012-07-03T19:20:38.853
> 
> 标签：c++, mfc, cedit

我正在创建一个非常简单的电子表格类型的应用程序。它有一个绘制单元格的网格，用户可以指定单元格类型（文本、复选框、单选按钮）。

我正试图让文本工作。在主视图类中，我有：

```
void CSpreadView::OnInsertText()
{
    CEdit* pEdit = new CEdit;
    CWnd* pParentWnd = this;
    grid.CellType(pEdit, pParentWnd);
    Invalidate();   
    UpdateWindow();
} 
```

我正在传递父窗口，因为如果我在另一个班级，我不知道是否有办法找到父窗口。

所以接收它的函数：

```
void Grid::CellType(CEdit* pEdit, CWnd* pParentWnd)
{
    for (int a=0; a<(int) cells.size(); a++)
    {
        if(cells[a]->selected)
            cells[a]->Type(pEdit, pParentWnd);
    }
} 
```

最后，当绘制单元格时，它会：

```
if(type=="text")
    {
        CEdit* pEdit = new CEdit;
        pEdit->Create(ES_MULTILINE | WS_CHILD | WS_VISIBLE | WS_TABSTOP | WS_BORDER, CRect(x1+10, y1+10, x2-10, y2-10), pParentWnd, 1);
    } 
```

问题：它实际上绘制了框，但是，文本是不可见的。当我打字时它会闪烁，但当我停止时它会消失。有谁知道为什么会这样？

正如您所知，我希望单元格控制其类型并进行绘图，因为用户可以添加/删除行和列。这样我就不需要跟踪以前绘制的文本框。网格由以下方式绘制：

```
CBrush brush(RGB(color, color, color));
pDC->SelectObject(&brush);
pDC->Rectangle(x1, y1, x2, y2); 
```

这就是我所看到的： ![在此处输入图像描述](../Images/52006fbb1db43d0cf471e2d94ec6a51f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:09:35.147

我想如果这是一个家庭作业问题，那么值得重新发明轮子。OTOH，已经有像 Chris Maunder 在 codeproject.com 上的不错的网格。

如果您每次绘制单元格时都创建一个 CEdit 控件，那么您将遇到问题。您基本上只想为正在编辑的单元格设置一个编辑单元格，可能没有其他单元格。在（编辑控件的）父窗口中，您可能希望使用 WS_CLIPCHILDREN 创建或设置其样式，以便它不会在子编辑控件上绘制或擦除。您至少可以查看设置样式标志是否有任何效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:30:39.940

不要在 OnPaint() 上创建子窗口，这会带来灾难。您需要自己绘制，在*编辑*单个单元格时最多可以重复使用单个 CEdit。

我认为您正在尝试制作一个网格，其中每个单元格都是控件（窗口），例如，当您在网格中滚动时，它会移动。这总是会产生视觉伪影（抖动运动）并在显示半单元时引起问题。

您将不得不派生自己的单元格类型，他们自己进行绘图（可能使用 DrawFrameControl() API 来处理更复杂的类型）以及在编辑单元格内容时可能会弹出子窗口的人。这大致就是前面提到的 Maunder CGridCtrl 使用的设计。

# java - java - 如何使用当前时间戳作为Java中的盐来创建随机字符串？

> ID：11317720
> 
> 赞同：1
> 
> 时间：2012-07-03T19:20:39.463
> 
> 标签：java, random, timestamp

我想根据当前时间戳创建一个随机字符串（输出到控制台以进行调试）。

例如，控制台会输出：

```
Setting up browser [123456]...
Getting configuration [758493]...
Completed: [758493].
Completed: [123456]. 
```

这里`123456`and`758493`是我要生成的随机字符串。

这是我认为它如何工作的伪代码：

```
private String random(int len){
long ts = getCurrentTimestamp;
String value = createRandom(len, ts); 
    //len is the length of the randomString
    //and ts is the salt
return value;
} 
```

任何人都可以提供有关此细节的帮助（需要导入什么），和/或可能建议对此进行改进吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T19:22:29.197

好吧，这取决于您所说的“当前时间戳”是什么意思。您可以使用[`System.currentTimeMillis()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#currentTimeMillis%28%29)，但这不一定是*唯一的*- 如果您在短时间内多次调用它，您很可能会多次得到相同的结果。还有[`System.nanoTime()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#nanoTime%28%29)。

作为替代方案，您可以使用[`UUID.randomUUID()`](http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html#randomUUID%28%29)，使用所有位或某个子集。（如果您决定使用子集，则应谨慎选择它们。并非 UUID 中的所有位都是相等的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T19:34:45.937

MD5 怎么样`System.nanoTime()`？

```
MessageDigest instance = MessageDigest.getInstance("MD5");
byte[] messageDigest = instance.digest(String.valueOf(System.nanoTime()).getBytes());
StringBuilder hexString = new StringBuilder();
for (int i = 0; i < messageDigest.length; i++) {
    String hex = Integer.toHexString(0xFF & messageDigest[i]);
    if (hex.length() == 1) {
        // could use a for loop, but we're only dealing with a single
        // byte
        hexString.append('0');
    }
    hexString.append(hex);
}
return hexString.toString(); 
```

4 次调用的结果：

```
bbf9123ac9335581535350e863236800
67fef4376523ae683b2e1d54fd97df53
ef1e747dc916584baed73a0921410216
8c8bc839bf739210a3875966430879de

```

* * *

## 回答 #3

> 赞同：-8
> 
> 时间：2018-01-04T08:23:38.943

基于当前时间戳的键：

```
npm install random-key-generator 
```

# linux - bcp 格式文件和 -c 切换出去

> ID：11317723
> 
> 赞同：2
> 
> 时间：2012-07-03T19:20:44.113
> 
> 标签：linux, unix, sap-ase, bcp

我正在尝试使用`bcp`从 Sybase ASE 数据库中提取记录并将它们写入文件。我需要排除数据库中的两个字段，所以我尝试使用格式`.fmt`文件。

这是我的 bcp：

```
bcp Rdevdb..TBL_XFER out out1.txt -S$serv -U$user -P$pass -fbcp.fmt -c -t\| 
```

我需要 | char 作为分隔符。

1.  当我使用`-c`开关时，它似乎完全忽略了格式文件，这是真的吗？

2.  当我既不使用 the`-n`或`-c`开关（告诉它什么格式，本机或字符）时，它似乎使用本机格式创建文件，因为当我在我的文本编辑器中打开它时，它会强制它进入十六进制编辑器......这是案子？

3.  当我包含`-c`, 并在格式文件中删除两个我不想要的字段时，它会将所有 db 字段带入文件中，这就是为什么我认为它会忽略 .fmt 文件。

4.  如果我删除`-c`开关，并使用 .fmt 文件中未包含的两个字段运行它，我会收到以下错误：`Incorrect host-column number found in bcp format-file.`

5.  为了让我的`bcp`命令给我带来我想要的结果，我在 .fmt 文件中包含什么开关组合和什么？

这是`.fmt`文件的一部分。任何表字段名称中都没有空格（这不包括字段 1 或字段 2，因为这些是我不希望在文件中出现的那些）。

```
10.0
147
3   SYBCHAR 2   6   "|" 3   COVERAGE_CODE
4   SYBCHAR 2   6   "|" 4   DEPT
5   SYBCHAR 2   8   "|" 5   ORG
6   SYBCHAR 2   8   "|" 6   DIV
7   SYBCHAR 2   8   "|" 7   DISTRIBUTE
... 
```

表中有 147 个字段，但当我在 .fmt 文件中包含所有字段时，总共有 149 个字段，前两行指定版本和字段编号。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:04:14.223

或者，您可以创建仅包含您感兴趣的列（甚至行）的表视图，然后对视图使用 bcp。您似乎正在将数据传输到新存储库，因此您可能希望坚持使用 -c，因为字符 bcp 比本机文件更易于共享。

我没有使用 -f 标志，所以我真的不能说让它以这种方式工作。

# c# - 如何阻止动态 Web 控件触发 page_load？

> ID：11317724
> 
> 赞同：0
> 
> 时间：2012-07-03T19:20:44.513
> 
> 标签：c#, asp.net, html-lists

我积累了一个 ASP.NET 项目，该项目在一个页面上运行所有内容，没有回发功能。该站点的核心使用我们正在尝试处理的 Silverlight 应用程序。

我正在尝试使用以下代码动态创建列表项。

```
void AddLinkButton(string id, string text) {
        LinkButton link = new LinkButton();
        link.ID = id;
        link.Text = text;
        link.Click += new EventHandler(link_Click);
        HtmlGenericControl li = new HtmlGenericControl("li");
        li.Controls.Add(link);
        tabsNav.Controls.Add(link);
    } 
```

这一切都很好，花花公子。但是，当单击链接时，它会重新运行 page_load，然后运行 ​​click 事件。如何阻止 page_load 重新加载所有内容并仅更新我希望刷新的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:23:58.027

最常见的情况是，我们使用 !IsPostBack if 语句包装我们不想在页面加载中执行的内容。

IE

```
private void Page_Load()
{
    if (!IsPostBack)
    {
        //Do actual page load stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T19:25:39.787

`Page_Load``ASP.NET Page lifecycle`是回发和回调标准的一部分，您遇到的行为是预期的。

为了让您不在 Postback 上创建按钮，请使用类似于

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack && !IsCallback)
        AddLinkButton("abc", "abc");
} 
```

这仅在用户第一次请求页面时将 LinkBut​​ton 添加到页面控件，但随后不会。

# c# - AutoCompleteExtender 不显示结果

> ID：11317727
> 
> 赞同：0
> 
> 时间：2012-07-03T19:21:07.177
> 
> 标签：c#, asp.net, ajaxcontroltoolkit

我想使用 AjaxToolkit AutoCompleteExtender。我的 WebService 被触发，如果我在返回的值上放置一个断点，我可以看到有数据被返回。但是，AutoCompleteExtender 不显示结果。

我读过这个 stackoverflow 线程：[AutoCompleteExtender 正在触发，webservice 正在返回结果，但这些没有被显示](https://stackoverflow.com/questions/5513554/autocompleteextender-is-firing-webservice-is-returning-results-but-these-are-n)

但是，这个答案并不能解决我遇到的问题。

这是我的代码：

**ASPX**

```
<asp:ToolkitScriptManager ID="asm" runat="server" EnablePageMethods="true" EnablePartialRendering="true"></asp:ToolkitScriptManager>
<asp:UpdatePanel ID="upApprovedBy" runat="server">
    <ContentTemplate>
        <asp:TextBox id="txtApprovedBy" runat="server" AutoComplete="Off"></asp:TextBox>
        <asp:AutoCompleteExtender 
            runat="server" 
            ID="ac_txtApprovedBy"  
            CompletionInterval="500"
            TargetControlID="txtApprovedBy"
            ServiceMethod="SearchWinUsers"
            CompletionSetCount="20"                                                                                                                         
            MinimumPrefixLength="2" 
        >
        </asp:AutoCompleteExtender>
    </ContentTemplate>
</asp:UpdatePanel> 
```

**ASPX.CS**

```
[System.Web.Script.Services.ScriptMethod()]
[System.Web.Services.WebMethod]
public static string[] SearchWinUsers(string prefixText, int count)
{
    logic common = new logic();
    string[] SelectedApprovers = new string[0];
    try
    {
        DataTable dt = new DataTable();
        string sql = "SELECT TOP(" + count + ") FirstName + ' ' + LastName AS DisplayName FROM USERSTABLENAME WHERE (IsDeActivated = 0) AND ((FirstName LIKE '%" + prefixText + "%') OR (LastName LIKE '%" + prefixText + "%')) ORDER BY FirstName";
        dt = common.getDataTable(sql);
        SelectedApprovers = new string[dt.Rows.Count];
        int i = 0;
        foreach (DataRow dr in dt.Rows)
        {
            SelectedApprovers.SetValue(dr["DisplayName"].ToString(), i);
            i++;
        }
        dt.Dispose();
    }
    catch (Exception ex)
    {
        common.alert("Error in page.location.<br>ERROR=" + ex.Message);
    }

    return SelectedApprovers;
} 
```

任何建议，将不胜感激！

我应该提到，我的 ASPX 片段中的代码位于此层次结构中：Page > TabContainer > TabPanel > FormView > THIS CODE LIVES HERE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:04:56.667

Got it to work finally!!!

I moved the webservice out of the *.ASPX.CS to an *.ASMX

That resolved the issue I was having.

If you're having the same problem, checkout this tutorial. It got me going in the right direction!

[http://www.codeproject.com/Articles/201099/AutoComplete-With-DataBase-and-AjaxControlToolkit#](http://www.codeproject.com/Articles/201099/AutoComplete-With-DataBase-and-AjaxControlToolkit#)

# perl - 尝试使用退出代码的 Net SSH Perl 错误

> ID：11317728
> 
> 赞同：1
> 
> 时间：2012-07-03T19:21:23.087
> 
> 标签：perl, ssh

**代码**

```
#!/usr/bin/perl -w
use strict;
use warnings;
use Net::SSH::Perl;

my $ssh_to="10.1.1.9";
my @KEYFILE = ("/home/nagios/.ssh/id_dsa.pub");
my $local="10.1.1.5";
my $vip_ip="10.1.1.50:80";

my $remove  = "/usr/bin/sudo /sbin/ipvsadm -e -t $vip_ip -r $local -w 0";
my $ssh = Net::SSH::Perl->new($ssh_to, identity_files=>\@KEYFILE);
my ($stdout, $stderr, $exit) = $ssh->cmd($remove);
if ( $exit eq 0) { sleep(300); } 
```

**输出**

```
[root@host]# ./mytest.pl

在 ./mytest.pl 第 14 行，<GEN0> 第 1 行的字符串 eq 中使用未初始化的值
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:11:20.427

在 perl 中， eq 用于字符串， == 用于数字，仅供参考！

您收到错误消息，因为 $exit 未定义。

试试这个测试：

```
if ( defined( $exit) && ( $exit== 0 ) ) {
    sleep( 300 );
} 
```

这将忽略非错误（ $exit 是 undef ）并在 $exit = 0 时休眠

现在，您为什么要尝试捕获出口 0 以及为什么在它发生时您还在睡觉？

# jquery - Rails + jquery：如何将 json 从 jquery 传递到我的 rails 控制器

> ID：11317731
> 
> 赞同：0
> 
> 时间：2012-07-03T19:21:38.363
> 
> 标签：jquery, ruby-on-rails, ajax, json

看到许多类似的请求，但没有任何意义：我正在使用 Google API 地理编码器来获取地址的详细信息，而我从 API 得到的返回是 json 格式的数据。我正在尝试将此 json 数据传递给我的 rails 控制器以进行进一步处理。所以在我看来，我有以下jquery：

```
 $(document).ready(function() {
      $("#address").blur(function(){
        var address = $("#address").val();
        if(address != ""){
          processAddress(address, function(data, s){        
              $.ajax({
                type: "GET",
                contentType: 'application/json',
                url: "pages/process",
                data: data,
                success: function(msg) {
                  $(".processed-info").html(msg);
                }
              });        
          });
        }
      }); 
```

processAddress 返回一个 json 对象，我将其作为“数据”读入，我想将此数据传递给我想要接收它的 rails 控制器：

```
def process
  @address_json = ...
end 
```

我已经尝试了许多事物的组合，并且没有必要使问题变得混乱。有没有人试过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:32:37.380

您必须将 json 对象作为 URL 中的查询参数传递。您应该为您的 json 数据设置一个查询参数 =，而不是将直接的 JSON 传递回 rails。您希望您的 URL 以`pages/process?api_json=data`. 使用您目前拥有的方式，您会将 json 的每个属性传递到一个单独的查询参数中。

尝试这样的事情：

```
$(document).ready(function() {
  $("#address").blur(function(){
    var address = $("#address").val();
    if(address != ""){
      processAddress(address, function(data, s){        
          $.ajax({
            type: "GET",
            contentType: 'application/json',
            url: "pages/process",
            data: { google_json: data },
            success: function(msg) {
              $(".processed-info").html(msg);
            }
          });        
      });
    }
  }); 
```

从那里在您的控制器中，您将拥有：

```
def process
  @address_json = params[:google_json]
end 
```

# c# - 拖动后获取画布子元素的位置。

> ID：11317734
> 
> 赞同：2
> 
> 时间：2012-07-03T19:21:40.927
> 
> 标签：c#, wpf, drag-and-drop

我家有`Canvas`几个孩子，每个孩子都有一个`MouseDragElementBehavior`。像这样的东西：

```
MouseDragElementBehavior drag = new MouseDragElementBehavior();
drag.Attach(ellipse); 
```

我想拖动一个孩子并在拖动后获得该孩子的新位置，所以我做了这样的事情：

```
double left = Canvas.GetLeft(ellipse);
double top  = Canvas.GetTop(ellipse); 
```

问题是我总是在拖动后得到相同的顶部和左侧值，就好像元素从未被拖动过一样。如何获得元素的新位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:13:32.053

我找不到任何关于此行为实际如何工作的有用文档，但我猜它通过设置边距而不是 Canvas.Left/.Top 来“移动”控件。您是否检查了边距以查看它们是否正在更改？设置 Margin 会更有用，因为它会将兼容性扩展到 Canvas 以外的容器（例如 Grid 或 StackPanel）。

# mirth - javascript split 函数在 mirth 中是否有特殊含义？

> ID：11317735
> 
> 赞同：1
> 
> 时间：2012-07-03T19:21:46.903
> 
> 标签：mirth

我正在维护一个遗留的欢乐系统。我们收到一些带有重复 ZP1.36 段的传入 HL7 消息。据我所知，mirth 是通过 split 函数将这些重复段划分为重复段数组。

```
var repeat36 = msg['ZP1']['ZP1.36'].toString().split("</ZP1.36>"); //I think returns an array of ZP1.36 segments 
```

但是在原始数据中，我没有看到字符串 ZP1.36 ......

我习惯于在 VB/Java/C# 中使用拆分函数，将字符串分成围绕某个字符的标记，如下所示：

```
var myTokens = "hello^world".toString().Split("^"); //returns a 2 item array {"hello", "world"} 
```

Mirth 的 split 功能似乎不是这样工作的。它似乎正在根据 HL7 消息的假定结构解析消息。

这是怎么回事？我错过了什么吗？mirth 中拆分函数的规则是什么？

交叉发布在 mirth 社区[http://www.mirthcorp.com/community/forums/showthread.php?p=26203#post26203](http://www.mirthcorp.com/community/forums/showthread.php?p=26203#post26203)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T09:03:04.773

我知道您已经找到并接受了您的问题的充分答案（从 Mirth 论坛转发），但我认为在单独的答案中提供更多信息可能会有所帮助。

从本质上讲，Mirth 利用了一些预先存在的技术来处理 HL7 数据。

1.  [HAPI](http://hl7api.sourceforge.net/)（发音为“Happy”）：这是一个 Java 代码库，用于将管道分隔的 V2.x HL7 重新解释为 XML。V2.XML[格式](http://www.hl7.org/documentcenter/public_temp_7EFF0BE3-1C23-BA17-0CA300B47AC6877B/wg/xml/drafts/v2xml.html)本身也是官方的 HL7 规范（不要与原生 XML 的 V3 HL7 混淆）。产品名称“Mirth”显然被选为“快乐”的代名词。
2.  [E4X](http://wso2.org/project/mashup/0.2/docs/e4xquickstart.html)：这是用于处理 XML 的 JavaScript 标准。它未能作为标准的 Web 技术获得显着的吸引力，但是，由于它在[Rhino JavaScript](https://developer.mozilla.org/en-US/docs/Rhino)引擎中的可用性，它被 Mirth 所利用。

从 Dans 在 Mirth 论坛上为您提供的示例中：

此代码段采用 HL7 v.2x 的标准 XML 格式：

```
<ZP1.36>
    <ZP1.36.1>Hello</ZP1.36.1>
    <ZP1.36.2>World</ZP1.36.2>
<ZP1.36> 
```

此 JavaScript 代码使用[E4X](http://wso2.org/project/mashup/0.2/docs/e4xquickstart.html)表示法来解析和访问已重新解释为 E4X XML 和 XMLList 数据类型的 HL7 数据：

```
var zp1361 = msg['ZP1']['ZP1.36']['ZP1.36.1'].toString();
var zp1362 = msg['ZP1']['ZP1.36']['ZP1.36.2'].toString(); 
```

*   `msg`是包含 HL7 数据的 E4X XML 对象
*   `msg['ZP1']`生成一个包含 ZP1 段列表的 E4X XMLList 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T20:58:51.083

[Mirth 留言板上](http://www.mirthcorp.com/community/forums/showthread.php?p=26203#post26203)的 Mirth 员工 Dans解释说，拆分功能适用于传入消息的 xml 翻译。

所以基本上，您正在使用 xml 并且 ZP1.36 已经被拆分：

```
<ZP1.36>
   <ZP1.36.1>Hello</ZP1.36.1>
   <ZP1.36.2>World</ZP1.36.2>
<ZP1.36> 
```

如果要获取各种子元素，可以执行以下操作：

```
var zp1361 = msg['ZP1']['ZP1.36']['ZP1.36.1'].toString();
var zp1362 = msg['ZP1']['ZP1.36']['ZP1.36.2'].toString(); 
```

# php - 为什么 PHP 不替换字符串中的变量？

> ID：11317743
> 
> 赞同：-3
> 
> 时间：2012-07-03T19:22:15.467
> 
> 标签：php

我不明白为什么这个简单的代码行不起作用：

```
<?php
$someVariable = 0;
echo 'SomeVariable is $someVariable';
?> 
```

它打印出“SomeVariable is $someVariable”而不是数字 0。我是否缺少某些东西或我必须启用某些配置选项？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T19:23:12.643

那是因为您需要改用双引号。当用单引号括起来时，php不会将变量转换为它们的值

```
<?php
$someVariable = 0;
echo "SomeVariable is $someVariable";
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T19:24:07.567

PHP中不处理单引号，您必须在双引号中使用变量。

# matlab - 在Matlab中将经验分布转换为均匀分布的函数？

> ID：11317744
> 
> 赞同：0
> 
> 时间：2012-07-03T19:22:22.130
> 
> 标签：matlab, statistics, distribution, uniform, cdf

我知道使用 CDF 将一种分布转换为另一种分布的过程。但是，我想知道 Matlab 中是否存在可以执行此任务的函数？

我的另一个相关问题是，我`ecdf()`在 Matlab 中计算了我的经验使用函数的 CDF，用于具有`10,000`值的分布。但是，我从中获得的输出仅包含`9967`值。如何获得`10,000`CDF 的总值？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:37:14.380

正如您所说，您所需要的只是 CDF。[正态分布](http://en.wikipedia.org/wiki/Normal_distribution#Cumulative_distribution_function)的CDF可以用[`erf`](http://www.mathworks.co.uk/help/techdoc/ref/erf.html)Matlab 函数表示。

未经测试的例子：

```
C = @(x)(0.5 * (1 + erf(x/sqrt(2))));

x = randn(1,1000);  % Zero-mean, unit variance
y = C(x);           % Approximately uniform 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T22:57:14.260

```
for t=1:nT 
    [f_CDFTemp,x_CDFTemp]=ecdf(uncon_noise_columndata_all_nModels_diff_t(:,1,t)); % compute CDF of empirical distribution
    f_CDF(1:length(f_CDFTemp),t) = f_CDFTemp; % store the CDF of different distributions with unequal size in a new variable
    x_CDF(1:length(x_CDFTemp),t) = x_CDFTemp;
    b_unifdist=4*t;
    [Noise.N, Noise.X]=hist((a_unifdist+(b_unifdist-a_unifdist).*f_CDF(:,t)),100); % generate the uniform distribution by using the CDF of empirical distribution as the CDF of the uniform distribution
    generatedNoise(:,:,t)=emprand(Noise.X,nRows,nCol); % sample some random numbers from the uniform distribution generated above by using 'emrand' function
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:33:21.833

[这并不完全是您正在寻找的东西](http://www.mathworks.com/matlabcentral/answers/35281-transforming-uniform-variables-to-normal-variables)，但它显示了如何做相反的事情。逆转它应该没有那么糟糕。

# ruby-on-rails - Ruby on Rails 域/站点结构

> ID：11317748
> 
> 赞同：0
> 
> 时间：2012-07-03T19:22:32.770
> 
> 标签：ruby-on-rails, dns

在 Web 上构建 Rails 应用程序的最佳方式是什么？我知道现在有不少网站正在转移并将他们的 rails 应用程序放在 company.com 上，并将他们的官方网站放在 companyhq.com 或 companyapp.com 上。这是做事的好方法吗？

我希望拥有一个在 Rails 上运行的一体化 company.com，并且该应用程序还包含该网站。但我猜如果出现问题或进行维护，应用程序和网站都将不可用。

或者第三种选择是将网站放在 www.company.com 上，并在 manage.company.com 上运行应用程序。但是在子域上运行的 Rails 会以任何方式限制其功能吗？

为防止混淆——“网站”指的是基本的外部页面——主页、联系我们等，而“应用程序”是 Rails 生产应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:27:32.740

这与rails没有任何关系。由您的网络服务器来映射您的 url 结构（路径子域）。这可能是多个 rails 应用程序、rails 和其他东西（如 php 或您正在运行的任何东西）或静态站点的混合。

# jquery - JQuery通过ajax发布文件和文本

> ID：11317750
> 
> 赞同：0
> 
> 时间：2012-07-03T19:22:57.210
> 
> 标签：jquery, django, image

我有一个带有新闻源功能的 Django webapp。新闻源具有与之相关的标题、正文和图像。用户可以编辑和更新他们的新闻源，包括添加新图像。

目前我正在获取每个提要项目的所有数据，如下所示：

```
var newsfeeds = [];
$('.feed').each( function (index, element) {
    var feed_dict = {'title': $(this).children('#title').val(),
                     'id': $(this).children('#feed_' + index + '_id').val(),
                     'should_delete': $(this).children('#should_delete').val(),
                     'subtitle': $(this).children('#subtitle').val(),
                     'body': $(this).children('#body').val()};
    newsfeeds.push(feed_dict);
}); 
```

然后使用`$.ajax()`. 这很好用。

现在我正在处理图像的东西。每个提要都有一个`<input type="/>`与唯一 ID 相关联的关联，因此我应该能够获取每个文件。那么问题是如何发送它们，以便我可以获取 Django`request.POST`和`request.FILES`. 我试过`FormData`在 JS 中使用这样的对象：

```
var data = new FormData();
$('.image_input').each(function(index, element) {
    data.append('file_' + index, element.files);
}); 
```

但这给了我一个`NS_ERROR_CANNOT_CONVERT_DATA`Firebug。

在这一点上，我很迷茫。任何指针都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:00:01.480

实际上不可能通过 ajax 发送文件 - 如果您使用类似[jquery 表单插件](http://jquery.malsup.com/form/)的东西来“劫持”您的表单，它将在幕后将其提交到 iframe，而不是使用 XHR。

在任何情况下，你真的应该以这样一种方式编写你的表单，使它们在没有 javascript 的情况下工作，然后使用 jquery 表单来[逐步增强](http://en.wikipedia.org/wiki/Progressive_enhancement)它们。那么你甚至不需要担心这种事情。

# facebook - 当用户未登录 Facebook 时，我的网站应用程序如何在 Facebook 时间轴上发布？

> ID：11317752
> 
> 赞同：1
> 
> 时间：2012-07-03T19:23:15.273
> 
> 标签：facebook, facebook-opengraph, facebook-access-token, facebook-timeline

我想知道如果用户没有登录 facebook 是否有可能在 facebook 时间轴上发布我的操作，我的意思是通过 cron 作业，实际上我的用户有一个扩展令牌，但如果他们没有在 facebook 上连接，它不能在他们的时间线上发布任何东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:28:56.590

我相信您必须使用应用程序访问令牌。

> 如果您的应用代表其用户发布并需要没有过期时间的访问令牌，则应使用应用访问令牌。应用访问令牌是使用您的应用秘密签署的，并且不会过期；如果您重新键入/重置您的应用程序密码，它将失效。
> 
> [https://developers.facebook.com/docs/opengraph/using-app-tokens/](https://developers.facebook.com/docs/opengraph/using-app-tokens/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:01:33.667

> 如果用户未登录 facebook，我想知道是否有可能在 facebook 时间线上发布我的操作

无论如何，你为什么要这样做？

如果用户甚至没有登录到您的网站，他们正在执行的实际*操作在哪里？*

对我来说，这听起来像是对 Open Graph 操作的*滥用*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T20:57:05.100

我不认为它可能导致会话不退出，当您尝试时`$facebook->getAccessToken();`，如果没有会话退出，它将返回错误。

# excel - 在相对于其他单元格中的地址的位置查找单元格

> ID：11317753
> 
> 赞同：1
> 
> 时间：2012-07-03T19:23:15.507
> 
> 标签：excel

是否有一个函数可以放入单元格`A2`中，该函数将返回单元格下方的单元格中写入的单元格中的任何内容`A1`？

因此，例如，如果`A1`包含`=B35`then`A2`将返回单元格中包含的值`B36`，如果我更改`A1`为`=C17`then`A2`现在将包含`C18`?

我一直在尝试使用 , 和 的组合`indirect()`，`offset()`但`address()`无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:10:32.253

我不认为它可以像你想要的那样完成。我能想到的最接近的是将“目标”地址放在一个单元格中，例如，在这张图片中，A2 只包含字符串“b3”。然后，您可以指向间接函数。所以 D2 中的公式，对于 B3 下面的单元格的值，是：

`=OFFSET(INDIRECT(A2),1,0)`

![在此处输入图像描述](../Images/f4bb4d49c7cf5811af6d9db050d47988.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T22:13:23.133

假设您不想做任何比偏移单个单元格引用更复杂的事情，您可以混入一点 VBA。

在一个新模块中：

```
Public Function tFormula(ByVal Target As Range) As String
    tFormula = Mid(Target.FORMULA, 2)
End Function 
```

B1 = "=C1"

C2 =“你好”

A1 = "=Offset(tFormula(B1),1,0)"

偏移量（tFormula（B1），1,0）=“你好”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T07:10:00.423

我想我可能已经解决了这个问题。在 Excel 2013 中，我的问题与您的类似：

`E107`contains `=A100`，我想`E108`返回 cell 中包含的值`B100`，所以如果我更改`E107`为`=A101`then`E108`现在将包含`B101`.

我的解决方案：

```
=INDIRECT(CHAR(CODE(RIGHT(LEFT(FORMULATEXT(E107),2),1))+1)&RIGHT(FORMULATEXT(E107),LEN(FORMULATEXT(E107))-2)) 
```

我在单元格中获取公式的文本，`FORMULATEXT`并将 ASCII 运算与`CODE`和`CHAR`相加`A`，使其变为`B`，然后返回值`INDIRECT`。需要一些字符串操作，with`LEFT`和`RIGHT`函数。

# .net - Linq 表达式在使用“from”子句迭代时是否特别对待组？

> ID：11317760
> 
> 赞同：0
> 
> 时间：2012-07-03T19:23:45.423
> 
> 标签：.net, linq, linq-group

考虑以下查询，按学生姓氏的第一个字母对学生列表进行分组：

```
var query = from s in students
            group s by s.Last[0] into group1
            orderby group1.Key
            from g in group1
            select new { g.First, g.Last } 
```

现在，所说的部分`from g in group1`不是遍历 的键`group1`，而是遍历 中每个键的值`group1`。

这就是我希望它被处理的方式（生成一个平面列表），但这对我来说似乎违反直觉。

要回答我的问题，我只需要有人指出 MSDN 中解释这一点或解释为什么我是反直觉的部分；-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:29:04.267

当您`from`在查询表达式中引入辅助子句时，这将转换为对[`SelectMany`](http://msdn.microsoft.com/en-us/library/bb345618). 正如你所说，这基本上是一个展平操作。

将其转换为两个查询可能会更容易：

```
var groups = from s in students
             group s by s.Last[0];

var query = from grp in groups
            orderby grp.Key
            from item in grp
            select new { item.First, item.Last }; 
```

这与您得到的原始查询完全相同，但您*可能会*发现它更容易理解。

其他可能有帮助的资源...... [Edulinq](http://msmvps.com/blogs/jon_skeet/archive/tags/Edulinq/default.aspx)是我写的一系列博客文章，出于教育目的从头开始重新实现 LINQ to Objects。

*   [LINQ 查询表达式](http://msdn.microsoft.com/en-us/library/bb397676.aspx)(MSDN)
*   [Edulinq 第 9 部分 -`SelectMany`](http://msmvps.com/blogs/jon_skeet/archive/2010/12/27/reimplementing-linq-to-objects-part-9-selectmany.aspx)
*   [Edulinq 第 41 部分 - 查询表达式如何工作](http://msmvps.com/blogs/jon_skeet/archive/2011/01/28/reimplementing-linq-to-objects-part-41-how-query-expressions-work.aspx)

# java - 使用 MQ 的 Java 存储过程

> ID：11317761
> 
> 赞同：2
> 
> 时间：2012-07-03T19:23:49.657
> 
> 标签：java, oracle, jms, ibm-mq, procedure

我需要在 Oracle 中创建一个 Java 存储过程。我使用 IBM 的示例类从 Java EE 环境之外的简单类创建 MQ 消息。我已经自己测试了这个类并且它正在工作。

我的 Oracle 版本是 11i。

当我尝试添加简单应用程序中使用的 jar 以与我的简单类一起加载到 Oralce 时，我收到有关未找到类的错误，即使相同的 jar 与测试用例一起使用。我被这个问题困扰了一个多星期，并且非常希望有人能够帮助我。

我得到的错误种类是这样的，来自客户端上带有 loadjava 实用程序的*-v标志*

在第 326 / 327 行，您会看到：

> 创建：com/ibm/mq/jms/admin/AP 类加载：com/ibm/mq/jms/admin/AP 类

然后从第6224行开始到end，表示上面的类无法解析：

> com/ibm/mq/jms/admin/APRCXI：ORA-29534：引用的对象 xxxx.com/ibm/mq/jms/admin/AP 无法解析 com/ibm/mq/jms/admin/APDX：ORA-29534 ：引用的对象 xxxx.com/ibm/mq/jms/admin/AP 无法解决退出：错误解决类 com/ibm/mq/jms/admin/AP

我使用的命令是：

> c:\Oracle\product\11.2.0\client_1\bin\loadjava.bat -f -jarsasdbobjects -prependjarnames -stoponerror -u xxxx/yyyy@SID -v -resolve lib\jms.jar lib\com.ibm.mqjms。 jar lib\com.ibm.mq.jmqi.jar lib\dhbcore.jar lib\fscontext.jar src\com\test\javasp\mq\JmsProducer.java

我还尝试使用*-genmissing*选项和一些额外的 jars（我在[此处](http://ashraffouad.blogspot.com/2011/07/oracle-db-application-to-ibm-mq.html)找到的列表），但对于不同的类仍然会出现类似的错误。

我面临的其他问题是，如果我收到错误并尝试使用 Oracle 的 dropjava 命令，它也不起作用。

我也从[这个](https://stackoverflow.com/questions/7000003/oracle-java-stored-procedure-sending-jms-message)链接中看到，这个人是成功的，但不幸的是，他/她没有说明他们是如何使用 loadjava 加载 jar 的。

如果我可以提供任何其他信息，请告诉我。

如果有人对如何让 Java 存储过程使用 IBM MQ 与 Oracle 11i 一起工作有任何想法，我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-15T23:46:53.423

[在此](http://ashraffouad.blogspot.com/2011/07/oracle-db-application-to-ibm-mq.html)博客条目中找到了详细答案。我试过了，它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T17:34:13.697

在 Oracle 中没有 CLASSPATH 的概念，因此标准的 MQ 客户端安装是无用的。您只能在数据库架构中加载应用程序引用的 jars。加载该`-r`选项时会解析类。`-r -Resolver`您可以使用（模式）进一步指定您自己的解决方案。（查看 Oracle 文档以了解确切的格式）。所以实际上数据库模式变成了类路径。

使用 Java 的 Websphere MQ 类会带来许多问题，您必须确保 Oracle JDK 版本处于适当的支持级别才能连接到所选的 MQ 服务器版本。检查 websphere MQ Vx.x 的系统要求。您应该找到 IBM 的 Web 参考资料。检查对 MQ 为 java 分类的支持。

目前我在尝试使用 Oracle 10 和 JDK 1.4.2 连接到 Mq 时遇到这样的问题。我不得不使用 JDK 1.4.x 重新编译我的 Java 代码。这不起作用，我认为这是因为我连接到至少需要 JRE 1.7 的 MQ 7.0.1.7。

# ios - IOS：在imageview中设置图像的快速方法

> ID：11317764
> 
> 赞同：0
> 
> 时间：2012-07-03T19:23:53.890
> 
> 标签：ios, uiimageview, uiimage

如果我有一个 77x77 的图像视图并且我想在这个图像视图中调整一个 UIImage，这可能吗？在我想在这个imageview中设置一个大小为300x200的图像的例子中，有没有办法在这个imageview（77x77）中调整这个图像？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:25:27.570

是的，`myImageView.contentMode = UIViewContentModeScaleAspectFit;`

该属性继承自[UIView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html)。

UIViewContentMode

指定视图在大小更改时如何调整其内容。

```
typedef enum {
   UIViewContentModeScaleToFill,
   UIViewContentModeScaleAspectFit,
   UIViewContentModeScaleAspectFill,
   UIViewContentModeRedraw,
   UIViewContentModeCenter,
   UIViewContentModeTop,
   UIViewContentModeBottom,
   UIViewContentModeLeft,
   UIViewContentModeRight,
   UIViewContentModeTopLeft,
   UIViewContentModeTopRight,
   UIViewContentModeBottomLeft,
   UIViewContentModeBottomRight,
} UIViewContentMode; 
```

# bit-manipulation - Strange bitwise XOR behavior

> ID：11317767
> 
> 赞同：0
> 
> 时间：2012-07-03T19:24:14.053
> 
> 标签：bit-manipulation

Why would the following "swap" action fail at random times?

```
int i,p,a[11] = {0,1,2,3,4,5,6,7,8,9,10 };

srand(time(0));

for (i=0;i<11;i++)
{
    p = rand() % 11;
    a[i] = a[i] ^ a[p];
    a[p] = a[i] ^ a[p];
    a[i] = a[i] ^ a[p];
} 
```

It is not so different from the the logic in [this answer](https://stackoverflow.com/a/11316582/15161)
It will work for a 3/4 runs and then start to duplicate 0

Tried it in C and C++, same results

[edit]
Solved by initializing `p=0` and replacing the relevant line with `while (p==i) p = rand() % 11;`

**Update:** The [reason NOT to use](http://en.wikipedia.org/wiki/XOR_swap_algorithm#Reasons_for_avoidance_in_practice) `xor` (see [Mark Byers' answer](https://stackoverflow.com/a/11317796/15161) and comment)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T19:26:58.023

如果`p`恰好与 相同`i`，`a[i] ^ a[p]`则将为零，并且该函数的其余部分将失败。

从统计上看，您的代码实际上有 65% 的机会以这种方式失败。

确保在生成 时`p`，它与 不同`i`。例如：

```
p = rand() % 10;
if( p >= i) p++; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T19:26:48.127

当`i`等于`p`时`a[i] ^ a[p]` 变为零。您的“交换”操作已损坏。

要交换，您应该使用临时变量：

```
int temp = a[i];
a[i] = a[p];
a[p] = temp; 
```

不要使用 XOR hack。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T20:43:54.943

作为一种开发实践，不建议进行异或交换。但是，如果您使用逻辑来取乐，那么请使用这条线，这将确保 p 与 i 不同。

```
p = ((rand()%10)+(i+1))%11; 
```

或者

```
p = ((rand()%(count-1))+(i+1))%count; 
```

但是请注意，这个技巧对于性能来说并不好，因为它需要两个模块运算符和一个加法（或减法）。使用精确比较（这是最快的比较运算符），如果相同则加 1。

```
p = rand()%10;
if (p == i) p++; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T19:27:00.280

因为`p`随机等于`i`。在这种情况下，`a[i]`立即变为 0。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-03T19:27:49.843

如果`i == p`then`a[i]`将存储`0`.

# asp.net - ASP.net commandname won't fire

> ID：11317769
> 
> 赞同：1
> 
> 时间：2012-07-03T19:24:32.323
> 
> 标签：asp.net, events, button, command, arguments

I am having trouble when trying to fire a button in a GridView with the parameter CommandName = "x", I try to reach my "If" in the GridView1_RowCommand event but I just cant for some reason, if you could help me I'd be gratefull .

This is my .aspx part

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
 <ContentTemplate>
    <asp:GridView ID="GridView1" runat="server" CellPadding="4" 
            EnableModelValidation="True" ForeColor="#333333" GridLines="None" 
            Height="193px" Width="968px" AllowPaging="True" AllowSorting="True" 
            AutoGenerateColumns="False" DataKeyNames="ID" 
            DataSourceID="SOURCE1" onrowcommand="GridView1_RowCommand">
            <AlternatingRowStyle BackColor="White" />
            <Columns>
            <asp:TemplateField ShowHeader="False">
                <ItemTemplate>
                    <asp:Button Text = "Seleccionar" runat="server" CommandName="X" CommandArgument='<%# Container.DataItemIndex %>' />
                </ItemTemplate>
            </asp:TemplateField>
                <asp:BoundField DataField="ID" HeaderText="ID" InsertVisible="False" 
                    ReadOnly="True" SortExpression="ID" />
                <asp:BoundField DataField="IDEmpresa" HeaderText="IDEmpresa" 
                    SortExpression="IDEmpresa" />
            </Columns>
            <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
        </asp:GridView> 
   </ContentTemplate>
</asp:UpdatePanel> 
```

And this is my C# code:

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "X")
    {
        int index = Convert.ToInt32(e.CommandArgument);
        GridViewRow row = GridView1.Rows[index];
        Label1.Text = "WOW It reached out";
    }
} 
```

I followed the instructions of the ASP.net page, and im fairly new to .net (I dont know if the UpdatePanel has something to do with it)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:00:20.720

进行快速测试，您提供的代码有效，但我确实必须连接我自己的数据源。

您在这里缺少的是 Label1 在您的 UpdatePanel 之外，并且不会根据您在 UpdatePanel 中的本地化回发刷新。

GridViews 和 UpdatePanels/Buttons 的注意事项。确保您没有在 Page_Load 期间手动绑定/重新绑定，如果您有执行此操作的代码，请在`if(!IsPostBack) { }`语句中执行此操作。

# java - how to work with large csv file

> ID：11317772
> 
> 赞同：0
> 
> 时间：2012-07-03T19:24:42.293
> 
> 标签：java, csv

I have a very huge csv file and I have to use some select query, getting avg,... I can not do that normally by reading line by line, because of out of memory.

the following code work well on a short csv file but not for huge one. I will appreciate if you can edit this code to use for large csv file.

```
import java.io.File;

import java.io.FileNotFoundException;
import java.util.Scanner;

public class Mu {
    public void Computemu()
    {
        String filename="testdata.csv";
        File file=new File(filename);
        try {
            Scanner inputstream=new Scanner(file);//Scanner read only string 
            // String data=inputstream.next();//Ignore the first line(header)
            double sum=0;
            double numberOfRating=0;

            while (inputstream.hasNext())
            {                       
               String data=inputstream.next();//get a whole line
                String[] values= data.split(";");//values separate by;
                double rating=Double.parseDouble(values[2].replaceAll("\"", ""));//change value to string
                if(rating>0)//do not consider implicit ratings
                {
                    sum+=rating;
                    numberOfRating++;
                }
            }
            inputstream.close();
            System.out.println("Mu is"+ (sum/numberOfRating));
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:35:02.753

您没有调用[useDelimiter](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#useDelimiter)，因此`next()`如果没有空格（默认分隔符），这些方法必须将整个文件加载到字符串中。

这会导致 OutOfMemory 错误。

如果要使用 Scanner，请根据需要设置分隔符。

但是 CSV 库（如[csvfile](http://sourceforge.net/projects/csvfile/)可能会更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:29:58.870

对于这个用例，我建议使用 Apache Commons FileUtil。这可能不是您在问题中寻找的内容，但 FileUtil 的使用比重新实现它更可取。

具体请看[lineIterator](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#lineIterator%28java.io.File%29)方法。

# ruby-on-rails - Rails: spliting table between two forms

> ID：11317773
> 
> 赞同：0
> 
> 时间：2012-07-03T19:24:42.720
> 
> 标签：ruby-on-rails

The Rails application I'm working on, has two central pieces: users and groups. A user registers through a form, and is added to the users table.

The groups table has four primary columns: name, title, description, and membership.

Groups are handled in two steps.

1.  Step1: the admin creates the group (name, title, description).
2.  Step2: Membership is a JSON field. Admin needs to log in using a second form, and add/edit that JSON structure's fields: group owner, group admins, members, parse / re-parse into a JSON and update the groups table.

The user signup, and groups creation form are working fine. The problem is the second form: creating the group's membership. I am not really sure how to proceed.

What I did is create the link and routes to properly select from the groups, and produce a REST call with the correct params by adding additional routes and links on the Show page. I verified that the l ink is correct, when I hover over it, I see [http://myapp.com/groups/3/admin](http://myapp.com/groups/3/admin) (3 is the correct ID in the groups table).

The methods in my groups_controller.rb are similar to the following:

```
 def show
    @group = Group.find(params[:id])
    respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @group }
  end
end 
```

I created a groups_admin.html.erb and put it in the views/groups folder. It has in it the logic to construct a set of drop down boxes, allowing the admin to pick from the users list to fill the group membership (the functions are in the groups helper).

What I don't know is how to complete it with a form declaration, etc. in groups_admin.html.erb and what to add to the groups_controller.rb to cause an UPDATE to that particular row (after I turn the returned fields into a JSON). So far, here's what I have added to it

```
def admins
end 
```

Changing the groups table schema and creating additional groups_admins, groups_owners, groups_members tables is not an option. Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:30:32.697

您正在寻找关联。在这种情况下，您可能需要一个用户组`has_many`和一个用户`has_many`组。或者，如果您希望用户能够在多个组中，您正在寻找`has_and_belongs_to_many`关联。你可以在这里阅读：http: [//guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

# php - error calling member function of alleged non-object in Codeigniter controller

> ID：11317774
> 
> 赞同：0
> 
> 时间：2012-07-03T19:24:48.983
> 
> 标签：php, codeigniter-2

I get the error

```
Fatal error: Call to a member function retrieve_products() on a non-object 
```

The controller is:

```
<?php   
class Cart extends CI_Controller { // Our Cart class extends the Controller class  

   public function _construct()  
   {  
       parent::_construct(); // We define the the Controller class is the parent.  
       $this->load->model('Cart_model'); // Load our cart model for our entire class  
   }

   function index()  
   {  
      $data['products'] = $this->cart_model->retrieve_products(); // Retrieve an array with all products  
   }
} 
```

The model is:

```
<?php   
class Cart_model extends CI_Model {

    function retrieve_products(){  
        $query = $this->db->get('products'); // Select the table products  
        return $query->result_array(); // Return the results in a array.
    }             
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:10:26.050

我想说你的电话

```
$data['products'] = $this->cart_model->retrieve_products(); 
```

应该：

```
$data['products'] = $this->Cart_model->retrieve_products(); 
```

即：cart_model 中的大写“C”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:45:35.750

也许我们使用的是不同的版本（我有 1.7.2），但是要声明一个模型，`CI_`并没有出现。我的工作代码相当于：

```
class Cart_model extends Model 
```

此外，该类应大写：

```
$this->Cart_model->retrieve_products(); 
```

（代替）

```
$this->cart_model->retrieve_products(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:05:18.437

我认为这是您的拼写错误，您拼写了构造函数，`_construct`而不是`__construct`这就是为什么 codeigniter 将其视为函数而不是类构造函数，并且模型加载仅限于该函数。

# xcode - How do I make a textview auto aline to textview?

> ID：11317775
> 
> 赞同：0
> 
> 时间：2012-07-03T19:24:49.957
> 
> 标签：xcode, image, textview

How can I have a textview auto-align to an image?

What I mean is, when I change an image from a square to a triangle, how do I make the textview fit inside that triangle automatically?

Check out my "Quick Notes!!" app on the app store for reference. I am using Xcode 4.3.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:34:00.637

很有可能你将不得不做一些工作来做你想做的事。我猜您有一个从正方形变为三角形的背景图像，并且您希望文本框保留在形状内。由于托管图片的图像视图仍然是矩形，因此图像视图尺寸实际上并没有改变，因此您必须计算或知道三角形的大小并根据您是否显示的标志以编程方式缩放文本框三角形。

编辑：实际上这比我最初想象的要简单得多。只需将文本框放置在 .xib 文件中所需大小的位置并记录位置和大小。然后，您只需检查何时显示三角形图像并将文本框的位置和大小更改为您之前记录的内容。

# ios - SIGABRT when calling [MagicalRecord setupCoreDataStackWithStoreNamed]

> ID：11317777
> 
> 赞同：1
> 
> 时间：2012-07-03T19:25:18.213
> 
> 标签：ios, sigabrt, magicalrecord

I'm new to "Magical Record" and pretty new to iOS programming in general. I'm just trying to get things set up. I've followed the instructions in [http://yannickloriot.com/2012/03/magicalrecord-how-to-make-programming-with-core-data-pleasant/](http://yannickloriot.com/2012/03/magicalrecord-how-to-make-programming-with-core-data-pleasant/), but instead of:

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [MagicalRecordHelpers setupCoreDataStackWithStoreNamed:@"MyDatabase.sqlite"];
    // ...
    return YES;
} 
```

I think I'm using a newer version which changes the AppDelegate to:

```
@implementation LSAppDelegate
@synthesize window = _window;
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{
    [MagicalRecord setupCoreDataStackWithStoreNamed:@"MyDatabase.sqlite"];
    return YES;
}

- (void)applicationWillTerminate:(UIApplication *)application{
    [MagicalRecord cleanUp];
}
@end 
```

When running, I get a SIGABRT at:

```
+ (NSManagedObjectModel *) MR_mergedObjectModelFromMainBundle;
{
    return [self mergedModelFromBundles:nil];
} 
```

The stack trace looks like:

```
#0  0x00011f7e in +[NSManagedObjectModel(MagicalRecord) MR_mergedObjectModelFromMainBundle] at /Developer/projects/demo/MagicalRecord/Categories/NSManagedObjectModel+MagicalRecord.m:33
#1  0x00011eb4 in +[NSManagedObjectModel(MagicalRecord) MR_defaultManagedObjectModel] ()
#2  0x000147ca in +[NSPersistentStoreCoordinator(MagicalRecord) MR_coordinatorWithSqliteStoreNamed:withOptions:] ()
#3  0x000148fa in +[NSPersistentStoreCoordinator(MagicalRecord) MR_coordinatorWithSqliteStoreNamed:] ()
#4  0x00016546 in +[MagicalRecord(Setup) setupCoreDataStackWithStoreNamed:] ()
#5  0x000026eb in -[LSAppDelegate application:didFinishLaunchingWithOptions:] () 
```

I have no idea what I did wrong or what I can do to fix it. Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:56:05.860

听起来您在核心数据迁移方面遇到了问题。从模拟器中卸载应用程序将强制使用新的 SQLite 数据库，这在您在开发期间更改架构时很方便。

稍后，您可能希望切换到`-setupCoreDataStackWithAutoMigratingSqliteStoreNamed`，只要您创建托管对象模型的新版本，它就可以处理琐碎的迁移。有关如何创建这些版本的信息， 请参阅[模型文件格式和版本。](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/vmModelFormat.html#//apple_ref/doc/uid/TP40004399-CH3-SW1)

# c# - 如何将字符串转换为 int？

> ID：11317782
> 
> 赞同：-3
> 
> 时间：2012-07-03T19:25:48.283
> 
> 标签：c#

> **可能重复：**
> [如何将 String 转换为 Int？](https://stackoverflow.com/questions/1019793/how-can-i-convert-string-to-int)

```
public List<int> GetListIntKey(int keys)
{
        int j;
        List<int> t;
        t = new List<int>();
        int i;
        for (i = 0; ; i++)
        {
            j = GetKey((keys + i).ToString());
            if (j == null)
            {
                break;
            }
            else
            {
                t.Add(j);
            }
        }
        if (t.Count == 0)
            return null;
        else
            return t;
} 
```

问题就出在这条线上：

```
j = GetKey((keys + i).ToString()); 
```

我收到错误说：

> 无法将类型“string”隐式转换为“int”

现在`GetKey`函数是字符串类型：

```
public string GetKey(string key)
{
} 
```

我该怎么办 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T19:28:03.357

问题是“j”是一个 int，您将它分配给 GetKey 的返回值。要么将“j”设为字符串，要么将 GetKey 的返回类型更改为 int。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T19:27:55.370

试试这个：

```
j = Int32.Parse(GetKey((keys + i).ToString())); 
```

如果该值不是有效的整数，它将引发异常。

另一种方法是`TryParse`，如果转换不成功，它会返回一个布尔值：

```
j = 0;

Int32.TryParse(GetKey((keys + i).ToString()), out j);
// this returns false when the value is not a valid integer. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T19:32:19.790

您的 getkey 的结果类型是 string 并且 j 变量声明为 int

解决方案是：

```
j = Convert.ToInt32(GetKey((keys + i).ToString())); 
```

我希望这是您的问题的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T19:35:02.190

您收到错误是因为 GetKey 返回一个字符串，并且您试图将返回对象分配给声明为 int 的 j。您需要按照阿方索的建议将返回值转换为 int。您还可以使用：

```
j = Convert.ToInt32(GetKey((keys+i).ToString())); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-03T19:35:11.743

尝试改进你的代码，看看这个：

```
public List<int> GetListIntKey(int keys)
{
    var t = new List<int>();

    for (int i = 0; ; i++)
    {
        var j = GetKey((keys + i).ToString());
        int n;
        // check if it's possible to convert a number, because j is a string.
        if (int.TryParse(j, out n))
            // if it works, add on the list
            t.Add(n);
        else //otherwise it is not a number, null, empty, etc...
            break;
    }
    return t.Count == 0 ? null : t;
} 
```

我希望它对你有帮助！:)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-03T19:28:39.370

```
What should i do ? 
```

你全都错了。阅读值类型和引用类型。

**错误：**

1.  错误是`Cannot implicitly convert type 'string' to 'int'`。隐含的意思是它正在获取一个无法转换为 int 的字符串。GetKeys 正在返回您尝试分配给 integer 的字符串`j`。

2.  你的 j 是整数。如何用 null 进行检查。值类型何时可以为空？

用这个

```
public List<int> GetListIntKey(int keys)
{
    int j = 0;
    List<int> t = new List<int>();
    for (int i = 0; ; i++)
    {
        string s = GetKey((keys + i).ToString());

        if (Int.TryParse(s, out j))
            break;
        else
            t.Add(j);
    }

    if (t.Count == 0)
        return null;
    else
        return t;
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-03T19:29:52.473

您必须使用显式类型转换。

采用

```
int i = Convert.ToInt32(aString); 
```

转换。

# asp.net-mvc-3 - 检查 ViewBag 值是否存在于 javascript 中

> ID：11317784
> 
> 赞同：1
> 
> 时间：2012-07-03T19:26:02.207
> 
> 标签：asp.net-mvc-3, razor

我正在使用剃须刀模板，以下是场景

```
$(function(){
   //if (ViewBag.IsCallFunction){
      somefunction();
   //
  //do something else
}); 
```

如果存在 viewBag 变量，即不为 ​​null 并且设置为 true，那么我想调用一些 javascript 函数。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:33:51.223

```
@{if(ViewBage.somevalue!=null && ViewBage.somevalue=="true")
  {
   <script type="text/javascript">
   somefunction();
   </script>
  }
} 
```

但请记住，这将被称为渲染，根据 OP，你不能调用它，你可以渲染它，所以在加载文档时在 document.ready 中调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:31:18.753

```
<script type="text/javascript">
$(function() {
    @if (ViewData.ContainsKey("IsCallFunction") && ViewBag.IsCallFunction) 
    {
        <text>somefunction();</text>
    }
});
</script> 
```

但我建议您使用视图模型而不是 ViewBag，因为在这种情况下您的代码可以简化：

```
<script type="text/javascript">
$(function() {
    @if (Model.IsCallFunction) 
    {
        <text>somefunction();</text>
    }
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:32:15.600

您不会从 Razor 代码*调用*JavaScript 函数，因为 Razor 在服务器上运行，而 JavaScript 在客户端上运行。

相反，您可以向客户端发出 JavaScript 代码，然后在浏览器加载 Razor 生成的 HTML 代码后运行。

你可以做类似的事情

```
<script type="text/javascript">
@* The following line is Razor code, run on the Server *@
@if (ViewData.ContainsKey("IsCallFunction") && ViewBag.IsCallFunction) { 
@* The following lines will be emitted in the generated HTML if the above condition is true *@
$(function(){
      somefunction();
  //do something else
});

@} @* This is the closing brace for the Razor markup, executed on the Server *@
</script> 
```

# android - Static variables remain vaild after main process dies?

> ID：11317785
> 
> 赞同：1
> 
> 时间：2012-07-03T19:26:07.023
> 
> 标签：android, broadcastreceiver, sleep, alarmmanager

I have an android recurring service running in background, no Activity running in front of it. Each and every 15min the Service is invoked by an AlamManager (RTC_WAKEUP) using WakeLocks to perform some network action for a cupple of seconds and then it dies. The service uses a static variable storing a PendingIntent object each time it get called. Btw: I know about SharedPreferences or using persistent layout, thats not my question.

My real question is: How could it be that my static variables are still valid? Even I the meantime of 15 min inactivity (real device sleep, does it matter anyway?) my static variables seems valid after all. I thought and read, if no Activity or Service running in the main UI-Thread and/or another worker threads the whole process dies, and the static vaules are erased, too.

If and why android keeps my process still hanging arround, keeping all static variables. An does it correlate with my scheduled AlamManager event. I daresay android keeps my process memory valid!?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:32:05.003

> 我的静态变量怎么可能仍然有效？

Android 没有在警报之间终止您的进程。

> 我思考并阅读，如果在主 UI 线程和/或另一个工作线程中没有运行任何活动或服务，则整个进程都会终止，并且静态值也会被删除。

Android 可以随时终止您的进程。没有正在运行的组件（活动或服务）会增加 Android 在终止其他进程之前终止您的进程的可能性。但是，如果 Android 不需要 RAM，它将不理会您的进程。

但是，由于您不知道每次`AlarmManager`事件发生时您的进程是否会在附近，因此您需要处理需要初始化静态数据成员的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:31:58.823

由于您使用的是静态变量，因此垃圾收集器不会清除它们，直到拥有它们的类的类加载器也被清除。在“当且仅当垃圾收集器可以回收其定义的类加载器时，可以卸载类或接口”，请参阅[http://docs.oracle.com/javase/specs/jls/se5.0/html/execution。 html#12.7](http://docs.oracle.com/javase/specs/jls/se5.0/html/execution.html#12.7)了解更多详情

# oracle - PL/SQL：创建序列时出错

> ID：11317789
> 
> 赞同：5
> 
> 时间：2012-07-03T19:26:18.960
> 
> 标签：oracle, plsql, pls-00103

我对 PL/SQL*很*陌生，并且正在使用 Oracle SQL Developer 编写一个过程，该过程使用序列为一些现有数据生成主键，以写入另一个数据库。

有问题的代码在 NDA 下。基本上我有以下内容：

```
create or replace
PROCEDURE Generate_Data
(
   output IN VARCHAR2
) 
AS

-- Variables here --

CURSOR myCursor IS
SELECT data1, data2 
FROM table;

CREATE SEQUENCE mySequence      <-- error on this line
START WITH 0
INCREMENT BY 1;

BEGIN
LOOP
    -- snip -- 
```

它引发错误 PLS-00103，说它在预期以下内容时遇到符号 CREATE：开始、函数、包、编译指示、过程...

我一直在关注这个例子： [http ://www.techonthenet.com/oracle/sequences.php](http://www.techonthenet.com/oracle/sequences.php)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T19:44:25.083

您收到此错误的原因是您正在尝试执行[DDL](http://en.wikipedia.org/wiki/Data_Definition_Language)，在本例中是在 PL/SQL 中创建一个序列。可以这样做，但您*必须*使用[`execute immediate`](http://docs.oracle.com/cd/B14117_01/appdev.101/b10807/13_elems017.htm).

正如[Alex](https://stackoverflow.com/questions/11317789/pl-sql-error-when-creating-sequence/11317871#11317871)所说，您也无法在该`declare`部分中执行此操作。它看起来像这样：

```
begin

   execute immediate 'CREATE SEQUENCE mySequence
                          START WITH 0
                          INCREMENT BY 1';    
end; 
```

然而，正如[Padmarag](https://stackoverflow.com/a/11317838/458741)所说，您不太可能希望在 PL/SQL 中执行此操作。在外面创建一个序列然后再引用它会更正常。更一般地说，在 PL/SQL 块中执行 DDL 是个坏主意。你应该没有必要这样做。

您没有提及您使用的是哪个版本的 Oracle。从 11g 开始，您访问序列的方式得到了扩展。如果您使用的是 11g，那么您可以通过创建一个变量并将序列中的下一个值 分配给该变量来访问该序列`.nextval`：

```
declare    
   l_seq number;    
begin

   loop
      -- For each loop l_seq will be incremented.
      l_seq := mysequence.nextval;
   -- snip    
end; 
```

如果您在 11g 之前，则必须（在[DML](http://en.wikipedia.org/wiki/Data_Manipulation_Language)之外）使用 select 语句才能获得下一个值：

```
declare
   l_seq number;
begin

   loop
      -- For each loop l_seq will be incremented.
      select mysequence.nextval into l_seq from dual;
   -- snip    
end; 
```

请记住，序列是数据库中的持久对象。每次您想使用它时，无需删除并重新创建它。如果你要运行你的脚本，然后重新运行它，序列会很高兴地不断增加返回值。

### 延伸阅读

*   [关于序列](http://docs.oracle.com/cd/E11882_01/server.112/e25789/schemaob.htm#i5667)
*   [使用序列](http://docs.oracle.com/cd/E11882_01/server.112/e25494/views002.htm#ADMIN11796)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T19:31:37.287

您不能在 DECLARE 程序块中创建序列。在 BEGIN 之后移动它。不过，如果它有意义，这是有争议的。您可能首先需要在您的程序之外创建它。

* * *

更新

实际上，如果你真的想在 BEGIN/END 中使用它：

```
EXECUTE IMMEDIATE 'CREATE SEQUENCE mySequence  START WITH 0 INCREMENT BY 1'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:29:09.823

您需要在使用它之前创建序列。

并在 PL/SQL 代码中使用
`-- Variables here --1`
`v_seq_val number;`

`BEGIN`
`Select mySequence.nextval from dual into v_seq_val`

一般来说，SQL 用于 DDL（数据定义语言），PL/SQL 用于 DML（数据操作语言）和逻辑。

如果你愿意，你可以从 PL/SQL 创建，但我认为这不是你想要的。

# sql - Sql中的多个字段连接表，其中一个字段需要求和

> ID：11317790
> 
> 赞同：0
> 
> 时间：2012-07-03T19:26:29.443
> 
> 标签：sql

我有两张桌子：

## 表 GL

```
TRANS_NBR     BASE_AMOUNT    CTRL GRP
 120211282    -7200          77
 120211282    -300           77
 120211282    -10000         76 
```

## 表 AP

```
TRANS_NBR   BASE_AMOUNT    CODE
 120211282  7500           Wire
 120211282  10000          ACH 
```

我需要能够将代码列添加到 GL 表中，但需要先汇总金额。有谁知道如何做到这一点？谢谢

我从汤姆英格拉姆的回答中试过这个，

```
SELECT GLTRANS.REFERENCE, SUM(GLTRANS.BASE_AMOUNT) AS SUM_BASE_AMOUNT, CBCHECK.CODE 
FROM (      
SELECT GLTRANS.REFERENCE, GLTRANS.BASE_AMOUNT, CBCHECK.CODE         
FROM  LAWSON_PRODST.LAWSON.GLTRANS      
LEFT JOIN LAWSON_PRODTST.LAWSON.CBCHECK on CBCHECK.TRANS_NBR = GLTRANS.REFERENCE    
UNION       
SELECT GLTRANS.REFERENCE, GLTRANS.BASE_AMOUNT, CBCHECK.CODE         
FROM LAWSON_PRODTST.LAWSON.CBCHECK      
)       
GROUP BY GLTRANS.REFERENCE 
```

但是我得到一个“关键字“组附近的语法不正确”。任何人都可以发现这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:29:57.507

```
SELECT  TRANS_NBR,
        Base_Amount = SUM(Base_Amount),
        Code        = /*Your Logic Here */
  FROM  TABLE_GL
 GROUP BY TRANS_NBR 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:47:33.403

尝试这样的事情

```
select DTABLE.TRANS_MBR, DTABLE.SUM(BASE_AMOUNT) as DTABLE.SUM_BASE_AMOUNT, CODE
from (
    select TABLE_GL.TRANS_NBR, TABLE_GL.BASE_AMOUNT, TABLE_AP.CODE
    from TABLE_GL
    left join TABLE_AP on TABLE_AP.TRANS_NBR = TABLE_GL.TRANS_NBR
    union
    select TABLE_AP.TRANS_NBR, TABLE_AP.BASE_AMOUNT, TABLE_AP.CODE
    from TABLE_AP
) as DTABLE
group by TRANS_NBR 
```

# python - Python difference between print obj and print obj.__str__() [at least with Unicode?]

> ID：11317791
> 
> 赞同：9
> 
> 时间：2012-07-03T19:26:29.653
> 
> 标签：python, unicode

I was given to understand that calling `print obj` would call `obj.__str__()` which would in turn return a string to print to the console. Now I head a problem with Unicode where I could not print any non-ascii characters. I got the typical "ascii out of range" stuff.

While experimenting the following worked:

```
print obj.__str__()
print obj.__repr__() 
```

With both functions doing exactly the same (`__str__()` just returns `self.__repr__()`). What did not work:

```
print obj 
```

The problem occured only with using a character out of ascii range. The final solution was to to the following in `__str__()`:

```
return self.__repr__().encode(sys.stdout.encoding) 
```

Now it works for all parts. My question now is: Where is the difference? Why does it work now? I get if nothing worked, why this works now. But why does only the top part work, not the bottom.

OS is Windows 7 x64 with a default Windows command prompt. Also the encoding is reported to be `cp850`. This is more of a general question to understand python. My problem is already solved, but I am not 100% happy, mostly because now calling `str(obj)` will yield a string that is not encoded in the way I wanted it.

```
# -*- coding: utf-8 -*- 
class Sample(object):

    def __init__(self):
        self.name = u"üé"

    def __repr__(self):
        return self.name

    def __str__(self):
        return self.name

obj = Sample()
print obj.__str__(), obj.__repr__(), obj 
```

Remove the last `obj` and it works. Keep it and it crashes with

```
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-1: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T22:40:07.920

我的猜测是 print 对`obj`要打印的对象执行以下操作：

1.  检查是否`obj`为`unicode`. 如果是这样，将其编码`sys.stdout.encoding`并打印。
2.  检查是否`obj`为`str`. 如果有，直接打印。
3.  如果`obj`是其他任何东西，则调用`str(obj)`并打印它。

第 1 步是为什么`print obj.__str__()`适用于您的情况。

现在，`str(obj)`做的是：

1.  打电话`obj.__str__()`。
2.  如果结果是 a `str`，则返回它
3.  如果结果是 a `unicode`，则将其编码`"ascii"`并返回
4.  否则，东西大多没用。

直接调用`obj.__str__()`会跳过第 2-3 步，这就是为什么不会出现编码失败的原因。

问题不是由`print`工作方式引起的，而是由`str()`工作方式引起的。`str()`忽略`sys.stdout.encoding`。因为它不知道你想对结果字符串做什么，所以它使用的默认编码可以被认为是任意的；`ascii`与任何选择一样好或坏。

为防止出现此错误，请确保按照文档中的说明返回`str`from 。`__str__()`您可以用于 Python 2.x 的模式可能是：

```
class Foo():
    def __unicode__(self):
        return u'whatever'
    def __str__(self):
        return unicode(self).encode(sys.stdout.encoding) 
```

（如果您确定除了打印到控制台之外不需要`str()`任何表示。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:54:23.217

首先，如果您查看[在线文档](http://docs.python.org/reference/datamodel.html#object.__repr__)，`__str__`并且`__repr__`有不同的目的并且应该创建不同的输出。所以调用`__repr__`from`__str__`不是最好的解决方案。

其次，`print`会调用`__str__`并且不会期望接收非ASCII字符，因为，好吧，`print`无法猜测如何转换非ASCII字符。

最后，在 Python 2.x 的最新版本中，`__unicode__`它是为对象创建字符串表示的首选方法。[Python **str**与**unicode**](https://stackoverflow.com/a/1307210/191191)中有一个有趣的解释。

因此，要尝试真正回答问题，您可以执行以下操作：

```
class Sample(object):

    def __init__(self):
        self.name = u"\xfc\xe9"

    # No need to implement __repr__. Let Python create the object repr for you

    def __str__(self):
        return unicode(self).encode('utf-8')

    def __unicode__(self):
        return self.name 
```

# mysql - MySQL self-join takes too long—can I streamline this query?

> ID：11317792
> 
> 赞同：2
> 
> 时间：2012-07-03T19:26:32.267
> 
> 标签：mysql, performance, self-join

I'm hoping (and pretty sure that) someone out there is much better at MySQL queries than msyelf.

I have a query which checks a table that contains information on : - a search term - title and price results from various sites using this search term

For the sake of streamlining, I've inserted the data already converted to lowercase with spaces removed and the whole thing trimmed to 11 characters to help reduce the load on the MySQL server.

The query is designed to find the maximum cost and minimum cost of likely equal titles and determine a price difference if it exists.

Having read some similar questions here, I've also prepended EXPLAIN EXTENDED to the query to see if that would help and I'm including the results along with the query.

The query as is :

```
SELECT
  a.pricesrch11,
  b.pricesrch11,
  a.pricegroup11,
  b.pricegroup11,
  a.priceamt - b.priceamt AS pricediff
FROM      ebssavings a
LEFT JOIN ebssavings b ON ( a.pricesrch11 = b.pricesrch11 ) 
                      AND (a.pricegroup11 = a.pricesrch11)
                      AND (b.pricegroup11 = a.pricesrch11)
WHERE a.priceamt - b.priceamt >0
GROUP BY a.pricesrch11 
```

The results of the EXPLAIN :

```
 select_type | table | type | possible_keys            | key  | key_len | ref  | rows | Extra
1 | SIMPLE      | a     | ALL  | pricesrch11,pricegroup11 | NULL | NULL    | NULL | 8816 | Using where; Using temporary; Using filesort
1 | SIMPLE      | b     | ALL  | pricesrch11,pricegroup11 | NULL | NULL    | NULL | 6612 | Using where 
```

ADDENDUM :

I just ran this query and got the following result :

```
Showing rows 0 - 4 ( 5 total, Query took 66.8119 sec)

CREATE TABLE IF NOT EXISTS ebssavings 
( priceid int(44) NOT NULL auto_increment, 
  priceamt decimal(10,2) NOT NULL, 
  pricesrch11 varchar(11) character set utf8 collate utf8_unicode_ci NOT NULL, 
  pricegroup11 varchar(11) character set utf8 collate utf8_unicode_ci NOT NULL, 
  pricedate timestamp NOT NULL default CURRENT_TIMESTAMP, 
  PRIMARY KEY (priceid), 
  KEY priceamt (priceamt), 
  KEY pricesrch11 (pricesrch11), 
  KEY pricegroup11 (pricegroup11) ) 
ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=8817 
```

MORE INFO ON THE NEW INDEXES (removed pricegroup11, and made a composite index called srchandtitle from pricesrch11 and pricegroup11):

```
Edit     Drop   PRIMARY BTREE   Yes No  priceid 169 A       
Edit     Drop   priceamt    BTREE   No  No  priceamt    56  A       
Edit     Drop   pricesrch11 BTREE   No  No  pricesrch11 12  A       
Edit     Drop   srchandtitle    BTREE   No  No  pricesrch11 12  A       
                                                pricegroup11 169    A 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:38:09.903

创建两个索引：

1.  价格Srch11
2.  pricerch11,pricegroup11 上的聚集索引

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:56:07.633

删除 pricegroup11 上的键，并在 pricerch11,pricegroup11 上添加复合集群键。

还将表移动到 InnoDB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T21:43:55.023

似乎随着对表和索引的更改，事情现在已经加快了。

我已经清空了桌子，又开始了。

谢谢大家的帮助。

-一个

# c - pthread array of pointers

> ID：11317793
> 
> 赞同：0
> 
> 时间：2012-07-03T19:26:33.157
> 
> 标签：c, pointers, pthreads

I have a struck with an array of pthread pointers. Each thread is meant to read a different data stream

```
typedef struct {
  // ...other stuff
  pthread_t *threads[MAX_STREAM_COUNT];
} stream_manager; 
```

And when I want to start reading:

```
void start_reading(stream_manager *sm, int i) {
   // do some pre processing stuff
   pthread_create( (pthread*) &sm->threads[i], 
                              NULL, 
                              read_stream_cb, 
                      (void*) sm->streams[i]       );
} 
```

When I want to stop reading:

```
void stop_reading(stream_manager *sm, int i) {
   iret = pthread_join(*sm->threads[i], NULL);
   if(iret != 0) {
     perror("pthread_join returned with error:: ");
     printf( "pthread_join returned with error:: %s\n", strerror(iret) )
   }
} 
```

For now, my read_stream_cb function simply prints the name of the stream its reading from.

```
void* read_stream_cb(stream *strm) {
   stream *s = (stream*) strm;
   prinf("%s\n", s->name);
} 
```

In the main program, I initialize 2 streams with different names. I call run start_reading(), sleep(3) and stop_reading()). The program prints the stream names fine for 3 seconds, but the pthread_join does not return successfully. It returns `3` and prints out

```
pthread join error: Operation timed out
pthread_join returned with errer:: No such process 
```

I think this may be a pointer issue? I may just be confused with order of operations with these pointers in the join `pthread_join(*sm->streams[i], NULL);` . I'll look into that more.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:32:02.260

[`pthread_create()`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_create.html)以 a`pthread_t*`作为参数，这是通过 a `pthread_t**`：

```
pthread_create( (pthread*) &sm->threads[i], 
```

就像`sm->threads`一个数组一样`pthread_t*`。更改`stream_manager`为：

```
typedef struct {
  // ...other stuff
  pthread_t threads[MAX_STREAM_COUNT]; /* No longer array of pointers. */
} stream_manager; 
```

并从对`pthread_create()`.

[`pthread_join()`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_join.html)需要一个`pthread_t`：

```
pthread_join(sm->threads[i]); /* Not sm->streams[i]. */ 
```

# c++ - error C2995: 'getVector' : template function has already been defined

> ID：11317794
> 
> 赞同：0
> 
> 时间：2012-07-03T19:26:36.793
> 
> 标签：c++

I am using VC 6.0 and While compiling the code i am getting this error "error C2995: 'getVector' : template function has already been defined"

I have included the value of WIN32COMMON in the project Settings->C++ tab and in the category combo box as Preprocessor and in the preprocessordefinition text box as _WIN32COMMON and in the Addition include Libraries text box the complete path as "E:\app\user\product\11.1.0\db_1\OCI\include". in this include folder all the header files are present such as "occi.h".

I also tried with defining WIN32COMMON in my code Explicitly as follows

```
#include<iostream>
#define WIN32COMMON
#include <occi.h>
using namespace oracle::occi;
using namespace std; 
```

but then it started me giving 102 errors stating that 'DbManager undeclared identifier'.

i had also tried with including the addition libraries in the project settings->link tab-> and in category combobox i selected Input and in the Additional library path i gave the complete path for .lib files as "E:\app\user\product\11.1.0\db_1\OCI\lib\MSVC\vc8" but that also did'nt work. can somebody please guide me.Where iam lacking or i need to define some thing else in my code.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:47:47.650

MSVC++ 6.0 不支持函数模板的部分排序。尝试在您的代码中`getVector()`替换为。`getVectorOfRefs()`

Oracle 添加`getVectorOfRefs()`到 OCCI 以支持较旧的 Microsoft 编译器，例如 MSVC6，并建议使用它来代替`getVector()`.

# c# - 同一轴上的 Microsoft 报表编号和字符串格式日期

> ID：11317797
> 
> 赞同：1
> 
> 时间：2012-07-03T19:26:57.100
> 
> 标签：c#, .net, reporting-services, microsoft-reporting

我有一个在客户端 (rdlc) 上运行的 Microsoft 报告，我想在其上显示类别轴范围的年份和月份名称的混合。数据以数字格式来自我的数据库，如 2011、2012、1、2、3 等。我正在尝试以下表达式：

```
= IIF(Fields!Month.Value > 13, Fields!Month.Value, MonthName(Fields!Month.Value)) 
```

但是，它只显示月份名称并隐藏年份，而不是显示 2011、2012、1 月、2 月、3 月。

我怎样才能得到一切以显示我需要的方式？

谢谢！

# internet-explorer-9 - ie9 允许被屏蔽的内容有条件的评论

> ID：11317804
> 
> 赞同：0
> 
> 时间：2012-07-03T19:27:07.393
> 
> 标签：internet-explorer-9, conditional-comments, blocked

我在 IE9 中加载渐变时遇到问题。我使用 [colorzilla](http://www.colorzilla.com/gradient-editor/%22colorzilla%22)生成它，其中包含用于停用过滤器的 IE 条件注释，因此使用了 IE9 的 svg 组件。当我在 IE9 中打开页面时，它会正确呈现，直到我点击“允许阻止的内容”按钮。

我已经尝试过使用 meta 和 html 标签，并且还删除了脚本以查看其中一个是否存在干扰。没有骰子。

这是我的头部的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="EN" dir="ltr" xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>Tahoe Motion Picture Rentals</title>
<!--<meta http-equiv="content-type" content="text/xml; charset=utf-8" />-->
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 

<!--[if gte IE 9]>
<style type="text/css">
.gradient {
filter: none;
}
</style>
<![endif]-->

<link rel = "stylesheet" type = "text/css"href = "picturePage - Hor. Menu.css" />
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="js/buttonClick.js"></script>
<script type="text/javascript" src="js/jquery.color.js"></script>

</head> 
```

提前感谢您的任何帮助。它一直让我发疯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:53:57.257

尽管 colorzilla 仅使用“过滤器”输出代码，但显然需要“-ms-”前缀。有趣的是，我在另一个元素上使用了 filter/svg，它确实可以在没有“-ms-”前缀的情况下工作。我认为这可能与是否有多个色标有关。另外，我想我在某处读过，没有前缀，过滤器在 IE8 中根本不起作用。

# c# - WinRt C# HttpClient SendAsync 不返回

> ID：11317806
> 
> 赞同：1
> 
> 时间：2012-07-03T19:27:14.973
> 
> 标签：c#, microsoft-metro

我正在创建一个 Metro 应用程序，它向网络服务器发出 HTTP Post 请求以获取 JSON 数据。最初，我使用相同的代码登录到 Web 服务器，并且 HTTP Post 请求返回正常。只是后来我遇到了调用 SendAsync() 方法时代码挂起的问题。

我使用wireshark查看网络流量，我确实看到服务器返回响应。所以我不确定为什么通话没有完成。有人有想法么？

这是我正在使用的代码：

```
var httpHandler = new HttpClientHandler();
httpHandler.CookieContainer = __CookieJar;
var httpClient = new HttpClient(httpHandler);

UserAgentDetails userAgent = UserAgentDetails.GetInstance();
httpClient.DefaultRequestHeaders.UserAgent.ParseAdd(userAgent.UserAgentString);

foreach (string key in __colHeaders)
    httpClient.DefaultRequestHeaders.Add(key, __colHeaders[key]);

var content = new StringContent(postData);
if (contentType != null && contentType.Length > 0)
    content.Headers.ContentType = new System.Net.Http.Headers.MediaTypeHeaderValue(contentType);

var requestMsg = new HttpRequestMessage(HttpMethod.Post, new Uri(url));
requestMsg.Content = content;
requestMsg.Headers.TransferEncodingChunked = true;
var responseMsg = await httpClient.SendAsync(requestMsg);
// no return from method after logon 
```

# php - 使用 php 解析 .cfg 文件时遇到困难

> ID：11317808
> 
> 赞同：-1
> 
> 时间：2012-07-03T19:27:18.957
> 
> 标签：php, file, parsing, config

> **可能重复：**
> [将 ereg 表达式转换为 preg](https://stackoverflow.com/questions/6270004/converting-ereg-expressions-to-preg)

我对将 cfg 文件解析为 php 完全陌生。仍然试图搜索几个网站，我发现了这个例子。但它有一些错误。我不明白我该如何解决它们。
我有一个名为 .cfg 的文件`my_config.cfg`。它具有如下所示的信息。

```
# ATA/IDE/MFM/RLL support
#
CONFIG_IDE=y

#
# IDE, ATA and ATAPI Block devices
#
CONFIG_BLK_DEV_IDE=y
CONFIG_BLK_DEV_IDEDISK=y
CONFIG_BLK_DEV_IDECD=n 
```

我正在尝试用 php 解析它。

代码：

```
<?php
$config_file = "my_config.cfg";
$comment = "#";

$fp = fopen($config_file, "r");

while (!feof($fp)) {
$line = trim(fgets($fp));
if ($line && !ereg("^$comment", $line)) {
$pieces = explode("=", $line);
$option = trim($pieces[0]);
$value = trim($pieces[1]);
$config_values[$option] = $value;
}
}
fclose($fp);

if ($config_values['CONFIG_IDE'] == "y")
echo "CONFIG_IDE is set&lt;br /&gt;";
else
echo "CONFIG_IDE is not set&lt;br /&gt;";
?> 
```

但我收到错误：

```
Deprecated: Function ereg() is deprecated in C:\xampp\htdocs\test.php on line 9
CONFIG_IDE is set<br /> 
```

任何解决方案？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:33:32.870

该弃用警告表明您应该找到一个不同的功能来执行您需要的功能。[有关PHP 的 ereg 文档页面的](http://us2.php.net/ereg)更多信息。[preg_match()](http://us.php.net/preg_match)怎么样？

```
if ($line && !preg_match("/^$comment/", $line)) {
    ...
} 
```

但是，您可以不用使用正则表达式，而不必使用 using `substr()`，如下所示：

```
if ($line && substr($line, 0, 1) != $comment) {
    ...
} 
```

在循环的每次迭代中启动正则表达式匹配子系统是昂贵的，性能方面。 `substr()`便宜多了！

顺便说一句，`parse_ini_file()`在这里使用怎么样？在我对您的代码和示例 Linux 内核配置片段的测试中，它产生了相同的结果，但只有 1 行代码而不是 12 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:28:39.130

你有`&amp;&amp;`......应该是`&&`

```
if ($line && !ereg("^$comment", $line)) { 
```

自 PHP 5.3.0 起，[`ereg`](http://php.net/manual/en/function.ereg.php)已弃用。你应该[`preg_match`](http://php.net/manual/en/function.preg-match.php)改用。语法对你来说是一样的。

# c# - SignalR：代理集线器未正确生成

> ID：11317809
> 
> 赞同：1
> 
> 时间：2012-07-03T19:27:23.590
> 
> 标签：c#, signalr

我已经对我的“中心”进行了更新。具体来说，我添加了一些新方法。当我在 VS 2012 中调试时它工作正常。但是，当我将它发布到我的本地 IIS 时，信号器/集线器仍在生成旧的代理集线器。新方法未列出。

为了确保它不是旧版本的程序集，我通过 ILSpy 运行它，我可以看到新方法。

我尝试了一些小的操作，修改 HubName 属性以查看是否即使该更改也会反映在新的代理集线器中。它不是。

关于如何强制信号器/集线器 url 生成正确代理的任何想法？我尝试在末尾添加 ?120 等以查看它是否已缓存，但没有任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:46:16.853

如果您回收了应用程序池但仍然无法正常工作，

而不是更改 AssemblyInfo.cs 中的 AssemblyVersion 属性更改 AssemblyFileVersion，这将使您的程序集的所有加载保持不变，但让您可以选择查看 GAC 中部署的版本。

共享程序集的正常位置存储在 Global Assembley Cache 中。广汽。要添加或删除程序集，请使用 Visual Studio 或 Microsoft Net Gac 实用程序。GAC 操作的其他替代方法[GACView v1.11 - 全局程序集缓存 (GAC) 查看器](http://www.nirsoft.net/dot_net_tools/gac_viewer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:30:50.743

问题是该站点被部署为子应用程序。它上面还有另一个应用程序，因此我们从样本中复制的信号器/集线器的 url 对于我们的构建是错误的。我们需要它是相对的，所以将 ~ 添加到前面解决了这个问题。

# python - 在 python __init__ 字典参数默认为以前的类值

> ID：11317810
> 
> 赞同：2
> 
> 时间：2012-07-03T19:27:25.193
> 
> 标签：python, class, dictionary, python-2.7, instance-variables

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

我发现我的类的**init** () 函数的字典参数默认为我之前在以前的实例中设置的值。我真的不明白这种行为，列表或基本变量似乎不会发生这种情况。示例代码：

```
class TestClass:
  def __init__(
    self,
    adir={},
    alist=[],
    avar=None
  ):
    print("input adir: " + str(adir)) #for test2, shows test1.mydir
    self.mydir = adir
    self.mylist = alist
    self.myvar = avar

test1 = TestClass()   
test1.mydir['a'] = 'A'
test1.mylist = ['foo'] 
test1.myvar = 5

test2 = TestClass()
print(test2.mydir) #has same value of test1!
print(test2.mylist)
print(test2.myvar) 
```

输出如下所示： initializing test1 input adir: {} initializing test2 input adir: {'a': 'A'} {'a': 'A'} [] None 为什么 test2 的字典参数 (adir) 得到设置为 test1.mydir？特别是，为什么行为与其他可变类型（如列表）不同？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:34:03.743

正如 DSM 所说，不要修改可变的默认参数。改为这样做：

```
class TestClass:

  def __init__(self, adir=None, alist=None, avar=None):
    if alist is None:
      alist = []
    if adir is None:
      adir = {} 
```

# android - Android Phonegap - 尝试设置 WebViewClient 时出现超时错误

> ID：11317813
> 
> 赞同：6
> 
> 时间：2012-07-03T19:27:32.407
> 
> 标签：android, cordova

我正在使用 Android 和 Phonegap，目前我在一件简单的事情上遇到了麻烦。我需要为 PhoneGap webView 设置一个 webViewClient，以便捕获完成的页面的 URL 并使用它。

这是代码：

```
public class PhoneGapTest extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        super.setBooleanProperty("loadInWebView", true);
        super.clearCache();
        super.keepRunning = false; 
        super.loadUrl("file:///android_asset/www/index.html");

        super.appView.setWebViewClient(new WebViewClient(){

          @Override
          public void onPageStarted(WebView view, String url, Bitmap bitmap) {

            Log.i("TEST", "onPageStarted: " + url);

          }

          @Override
          public void onPageFinished(WebView view, String url) {

            Log.i("TEST", "onPageFinished: " + url);

          }

        });

    } 
```

该代码似乎不起作用，页面永远不会加载并且我得到一个超时错误，但是如果我删除“setWebViewClient”部分页面加载完美。

我看到有一个类 CordovaWebViewClient，我必须使用它而不是 WebViewClient 吗？我在网上找到了这种方法：

```
 this.appView.setWebViewClient(new CordovaWebViewClient(this){

          @Override
          public boolean shouldOverrideUrlLoading(final WebView view, String url) { 
            Log.i("BugTest", "shouldOverrideUrlLoading: " + url); 
            return true; 
          }

          @Override
          public void onPageStarted(WebView view, String url, Bitmap bitmap) {

            Log.i("TEST", "onPageStarted: " + url);

          }

          @Override
          public void onPageFinished(WebView view, String url) {

            Log.i("TEST", "onPageFinished: " + url);

          }

          @Override
          public void doUpdateVisitedHistory(WebView view, String url, boolean isReload){        
          }

        }); 
```

但是该代码也不起作用，我仍然遇到超时错误。我还看到已经有一个 webVieClient 成员，但如果我必须使用它以及如何使用它，我没有。

我正在使用 Phonegap 1.9.0 版

谢谢阅读

* * *

回复西蒙：

它以这种方式工作，谢谢！

```
public class MainActivity extends DroidGap {

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    super.init();
    super.appView.clearCache(true);
    super.appView.clearHistory();
    this.appView.setWebViewClient(new CustomCordovaWebViewClient(this));
    super.loadUrl("file:///android_asset/www/index.html");
}

public class CustomCordovaWebViewClient extends CordovaWebViewClient {

 public CustomCordovaWebViewClient(DroidGap ctx) {
   super(ctx);
 }

 @Override
 public void onPageStarted(WebView view, String url, Bitmap bitmap) {
   super.onPageStarted(view, url, bitmap);
   Log.i("TEST", "onPageStarted: " + url);
 }

 @Override
 public void onPageFinished(WebView view, String url) {
   super.onPageFinished(view, url);
   Log.i("TEST", "onPageFinished: " + url);
 }

 @Override
 public void doUpdateVisitedHistory(WebView view, String url, boolean isReload){  
     super.doUpdateVisitedHistory(view, url, isReload);  
 }

 @Override
 public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
     super.onReceivedError(view, errorCode, description, failingUrl);
 }

}

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T00:46:29.317

我想我已经在最新的 Cordova 版本（我使用的是 2.2）上发现了这一点。它失败了，`onPageStarted()`因为它期待一个为空的 appView。设置 appView 似乎可以修复它，例如

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.init();

    CordovaWebViewClient webViewClient = new CustomAcceptingWebViewClient(this);
    webViewClient.setWebView(this.appView);
    this.appView.setWebViewClient(webViewClient);

    super.loadUrl("file:///android_asset/www/index.html");

} 
```

请注意，`super.init()`也需要

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T01:56:17.930

为了完成您想做的事情，我将扩展 CordovaWebViewClient 类并覆盖您想要的方法，但不要忘记调用超级方法，否则 PhoneGap 将无法在没有 CordovaWebViewClient 的情况下工作，因为它是一个重要的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-14T16:14:48.863

你忘了打电话给 super ;)

```
 // Assign webclient.
    this.appView.setWebViewClient(new CordovaWebViewClient(me, this.appView) {
        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            super.onPageStarted(view, url, favicon);
        }

        @Override
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
            super.onReceivedError(view, errorCode, description, failingUrl);
        }
    }); 
```

# android - 有意图的 ListView

> ID：11317822
> 
> 赞同：1
> 
> 时间：2012-07-03T19:28:12.400
> 
> 标签：android, android-intent, android-listview

我有一个包含 3 个文本的列表视图。NV1 - NV2 - NV3。我的问题是当我触摸 NV1 时，意图显示 NV1 的布局。但是其他人什么都没有发生。它只是向我显示相同的 NV。

我创建了一个 2 方法来传递信息。

```
 private void adapter (PT1Activity a){
      this.a = a;
  }

private void showGame(int nivel){
    Intent intent = new Intent (PT1Activity.this, NV1.class);
    intent.putExtra("nivel2", nivel);
    startActivity(intent);
} 
```

还有一个：

私人 PT1Activity a；

适配器（这个）；

```
 ltNvs.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                long arg3) {

             a.showGame(position);
        }
    }); 
```

**我必须做什么？使用 Bundle 将信息传递给其他 NV2 Activity？或者类似的东西？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:04:02.743

老实说，我不完全确定你要的是什么。希望看到这个你可以得到一个想法。

```
private void showGame(int nivel){
    switch( nivel ) {
    case 1:
        Intent intent = new Intent (PT1Activity.this, NV1.class);
        intent.putExtra("nivel1", nivel);
        startActivity(intent);
        break;
    case 2:
        Intent intent = new Intent( PT1Activity.this, NV2.class );
        intent.putExtra( "nivel2", nivel );
        startActivity( intent );
        break;
    case 3:
        Intent intent = new Intent( PT1Activity.this, NV3.class );
        intent.putExtra( "nivel3", nivel );
        startActivity( intent );
        break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:05:07.390

你的 showgame 函数应该是这样的：

```
private void showGame(int nivel){
Intent intent;
switch (nivel){
    case 1:
      intent = new Intent (PT1Activity.this, NV1.class);
      intent.putExtra("nivel1", nivel);
      break;
    case 2:
      intent = new Intent (PT1Activity.this, NV2.class);
      intent.putExtra("nivel2", nivel);
      break;
    case 3:
      intent = new Intent (PT1Activity.this, NV3.class);
      intent.putExtra("nivel3", nivel);
      break;
    default:
      intent = new Intent();
   }

startActivity(intent);
} 
```

但是，这假设您的所有类都在同一个包中。如果你想在不同的包中启动一个活动，`Intent(this, yourclass.Class)`构造函数将不起作用。相反，尝试这样的事情：

```
Intent intent = new Intent();
intent.setComponent(ComponentName.unflattenFromString("your.other.package/your.other.package.your_other_class_name"));
startActivity(intent); 
```

注意：your_other_class_name 类似于`NV1`，而不是`NV1.class`。

# mingw - mingw“找不到工作的编译器”

> ID：11317825
> 
> 赞同：1
> 
> 时间：2012-07-03T19:28:30.377
> 
> 标签：mingw, libraries, gmp

我正在尝试编译第三方库以在 c++ (gmp) 中使用。我安装了 mingw 并设置了路径变量。现在我去编译库，所以我启动 mingw，导航到保存我的库文件的文件夹（这个文件夹中有一个配置文件），然后输入

> ./configure --prefix=${gmp_install}

期望这将编译库并创建一个make文件。但是经过几个步骤后，我得到了这个错误：

> 找不到工作的编译器，请参阅 config.log 了解详细信息

当然，我看了这个日志。几行字，但对我来说没有任何意义。

谁能帮我解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-06T19:58:31.963

所以我的问题的答案是我没有安装 gcc。由于我正在尝试处理 code::blocks，因此该视频正是我所需要的：

[http://www.youtube.com/watch?v=w2XLvEcSrgo&feature=related](http://www.youtube.com/watch?v=w2XLvEcSrgo&feature=related)

（仍然没有安装 gmp 库，但这是由于其他问题）。

# java - 运行旧的 Java 程序

> ID：11317827
> 
> 赞同：0
> 
> 时间：2012-07-03T19:28:37.250
> 
> 标签：java, swing, ide, compilation

几年前在大学里，我写了很多简单的 Java 小程序......我有一段时间没有使用它们了，我想回去重新修改它们。我相信我使用 Netbeans 作为我的 IDE（但我也可以使用 Eclipse ......不记得了）..

无论如何，长话短说......我不记得如何编译它们，我无法在我的任何 IDE 中将它们作为项目打开......

我试过使用`javac`然后`java`在命令行中运行一些，但是一个特别不会运行并给我这个错误：

`Exception in thread "main" java.lang.NoSuchMethodError: main`

`public static void main`我知道这是因为我在这个程序中没有方法。我不记得为什么我不记得了....但是理论上它应该如何工作....我有 3 个程序文件：

*   种族.java
*   自行车面板.java
*   控制面板.java

种族扩展`JApplet`并有一个方法`public void init()`....创建controlPanel类的一个实例......`controlPanel`类创建一个实例，`bicyclePanel` 依此类推......

我的问题是..我应该有一个`main`方法吗？如何将其重建到 IDE 中并运行？这么多年了，我不记得Java的所有来龙去脉了:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:31:00.907

启动 NetBeans 或 Eclipse 并使用现有源导入项目。它会做大部分事情。您可能需要调整损坏的参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:57:30.847

`main`是的，如果您打算将它作为独立的 Java 应用程序运行，您应该拥有该方法。在 Eclipse 中，您也可以使用 Applet 运行程序直接运行您的小程序。它的运行方式-> Java Applet。

# ruby-on-rails - Rails3 中的 Paypal Express 结帐

> ID：11317833
> 
> 赞同：2
> 
> 时间：2012-07-03T19:29:00.200
> 
> 标签：ruby-on-rails, ruby, paypal, activemerchant

**本期内容是：ActiveMerchant + PaypalExpressCheckout + Rails 3.2**

我一直在尝试在我的 Rails 3.2 应用程序上构建 Paypal Express Checkout。那里的大多数教程都已经过时了，所以我遵循了一些然后阅读了 Paypal Express Checkout 集成指南。我已经设置了我的 Sandobx 和我的贝宝信息。

当我尝试通过单击我的视图中的“立即购买”链接来处理付款时：

```
<%= link_to image_tag('http://img36.imageshack.us/img36/249/buttonpaypal.png'),
action: 'checkout', controller: 'orders'%> 
```

我收到以下错误：

```
This transaction is invalid. Please return to the recipient's website to complete
you transaction using their regular checkout flow.

Return to merchant
At this time, we are unable to process your request. Please return to and try
another option. 
```

--- 我的控制器：

```
class OrdersController < ApplicationController
  include ActiveMerchant::Billing 
  def checkout
   setup_response = ::GATEWAY.setup_purchase(2000,
        :ip                => request.remote_ip,
        :return_url        => url_for('confirm'),
        :cancel_return_url => url_for(root_path)
   ) 
  redirect_to ::GATEWAY.redirect_url_for(setup_response.token)
 end
end 
```

--- 我的初始化程序 ActiveMerchant.rb：

```
 ActiveMerchant::Billing::Base.mode = :test
  ::GATEWAY = ActiveMerchant::Billing::PaypalExpressGateway.new(
  :login => "I_PUT_MY_EMAIL_HERE",
  :password => "I_PUT_MY_PASS_HERE",
  :signature => "I_PUT_MY_SIGNATURE_HERE",
  :allow_guest_checkout => true
 ) 
```

--- 我的路线：routes.rb：

```
 resources :orders do
   # Im not sure why 'get :checkout' by itself doesn't work.
   get :checkout, :on => :new
   get :confirm
   get :complete
 end 
```

获取“页面/索引”

这是要点：[https ://gist.github.com/11be6cef6a97632343b9](https://gist.github.com/11be6cef6a97632343b9)

谁能给我指出一个“最近的”教程或帮我弄清楚我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T20:46:09.100

最简单的方法是执行以下操作：

1.) 您必须创建一个贝宝测试帐户。

2.) 创建购物车模型：

```
$ rails g model Cart purchased_at:datetime 
```

3.) 在您的购物车模型类型中：

```
class Cart < ActiveRecord::Base

  def paypal_url(return_url)

    values = {
      # get it form your http://sandbox.paypal.com account
      :business => 'ENTER_THE_SELLER_PAYPAL_EMAIL_ADDRESS',
      :cmd => '_cart',
      :upload => 1,
      :return => return_url,
      :invoice => id
    }
    # These values set up the details for the item on paypal.
       values.merge!({
        # The amount is in cents
        "amount_1" => ENTER_AN_AMOUNT_HERE,
        "item_name_1" => ENTER_THE_ITEM_NAME_HERE,
        "item_number_1" => 1,
        "quantity_1" => 1
      })

    "https://www.sandbox.paypal.com/cgi-bin/webscr?" + values.to_query

  end
end 
```

4.) 在 appllication_controller.rb 文件中添加这个

```
 def current_cart
     session[:cart_id] ||= Cart.create!.id
     @current_cart ||= Cart.find(session[:cart_id])
   end 
```

5.）在您想要结帐按钮的视图上添加以下内容：

```
# 'products_url' is just the url where you would like to redirect
# the user after the transaction
<%= link_to 'Buy with PAYPAL', @cart.paypal_url(products_url) %> 
```

6.）在控制器上显示您想要结帐的视图的操作，添加以下内容：

```
def show
  ...
  @cart = current_cart
end 
```

而已！这是一个没有“真实”购物车的 PaypalExpressCheckout，因为我在没有使用订单项的情况下构建了这个购物车。但是您可以按照 Railscast #141 Paypal Basics [http://railscasts.com/episodes/141-paypal-basics添加一个 Line Item](http://railscasts.com/episodes/141-paypal-basics)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T05:21:09.217

这里有一个最近的教程：http: [//spin.atomicobject.com/2011/10/24/integrating-paypal-express-with-rails-3-1-part-1/](http://spin.atomicobject.com/2011/10/24/integrating-paypal-express-with-rails-3-1-part-1/)。

# asp.net - 避免 ASP.NET MVC 路由错误的优雅方法

> ID：11317835
> 
> 赞同：1
> 
> 时间：2012-07-03T19:29:04.040
> 
> 标签：asp.net, asp.net-mvc

我有一条路线：

```
 routes.MapRoute("ResetPasswordConfirm", "reset-password-confirm", new { controller = "Membership", action = "ResetPasswordConfirm" }); 
```

和代码

```
 public ActionResult ResetPasswordConfirm(int userid, string key)
    {
        // ...
    } 
```

在我的应用程序中。所以我有 url 像这样执行：

```
http://localhost/reset-password-confirm?userid=1&key=bla_bla_something 
```

这绝对没问题，直到有人决定去

```
http://localhost/reset-password-confirm 
```

...看看会发生什么。ASP.NET 将产生可预测的错误：

> 参数字典包含不可为空类型“System.Int32”的参数“userid”的空条目...

它也可以通过搜索机器人尝试抓取所有可能的 url 来完成。没关系，但是在野外使用应用程序时会产生很多错误。我想避免这种情况，但是对于为此类错误的每种可能情况编写存根感到不舒服。

有什么优雅的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:51:50.113

另一种方法是处理全局错误，只需`<customErrors mode="On"></customErrors>`在您的视图文件夹上设置`web.config`并创建一个。MVC3 模板实际上包含该页面。`Error.cshtml``Shared`

另一方面，如果你想更具体，你应该尝试`Action Filters`，这是一种处理错误的好方法。

```
[HandleError(View = "YourErrorView", ExceptionType=typeof(NullReferenceException))]
public ActionResult ResetPasswordConfirm(int? userid, string key)
{
      if (!userid.HasValue)
         throw new NullReferenceException();
      // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:37:15.063

为您的参数使用可空值，即：

public ActionResult ResetPasswordConfirm( **int?** userid, string key)

# java - 以编程方式在 TableLayout 中的 ImageView 宽度和高度

> ID：11317842
> 
> 赞同：0
> 
> 时间：2012-07-03T19:29:37.980
> 
> 标签：java, android

Actullay 我想要的只是有问题的标题。我想在 TableLayout 中为 ImageView 设置固定宽度和高度。我该怎么做？

这是我的代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.buddy_list);

    TableLayout buddy_list_layout = (TableLayout)findViewById(R.id.buddy_list_layout);

    TableRow tableRow = new TableRow(this);
    tableRow.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

    ImageView imageView = new ImageView(this);
    imageView.setImageResource(R.drawable.troll_logo);
    //imageView.setLayoutParams(new TableLayout.LayoutParams(100, 100));

    tableRow.addView(imageView);
    buddy_list_layout.addView(tableRow);
} // end -> method -> onCreate 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:10:00.903

try as:

```
 ImageView imageView  = new ImageView(this);
    LinearLayout.LayoutParams vp = 
        new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, 
                        LayoutParams.WRAP_CONTENT);
    imageView.setLayoutParams(vp); 
    imageView.getLayoutParams().height = 20;
    imageView.getLayoutParams().width  = 20;
    imageView.setImageResource(R.drawable.troll_logo);
////....... 
```

# python - 使用 PIL 时释放内存

> ID：11317847
> 
> 赞同：7
> 
> 时间：2012-07-03T19:30:01.617
> 
> 标签：python, rotation, garbage-collection, python-imaging-library

我正在使用 PIL（Python 图像库）编辑图像。在每一步（转换、旋转、调整大小......）都会创建更多图像。（文档摘录：“返回旋转给定度数的图像副本......”）所以我想释放内存。

你知道下面的方法是否节省内存吗？

```
import PIL.Image

image = PIL.Image.open('Image.jpg')
garbage = image
image = image.convert('RGB')
del garbage 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T19:36:51.817

您不需要进行临时`garbage`参考。

当这条语句的右边被执行时：

```
image = image.convert('RGB') 
```

创建了一个新的 Python 对象。

通过将其分配回用于表示`image`的旧对象，`image`其引用计数减少到零，并被发送到垃圾收集器。

但是，与 Python 的工作方式无关，我看到了 PIL 问题，因为真正的错误导致内存泄漏已经形成。例如，这里讨论了使用 Draw 文本时的问题：

[PIL 绘制文本内存泄漏](http://mail.python.org/pipermail/image-sig/2002-March/001759.html)

我知道这是一个非常古老的讨论，但是当我使用 PIL 时，我*仍然*会看到它有时会出现！

# c# - 向图像添加行为

> ID：11317850
> 
> 赞同：2
> 
> 时间：2012-07-03T19:30:06.160
> 
> 标签：c#, wpf, xaml, animation

在我的程序中，我有一个 System.Controls.Image，我想从这里添加一个摇动行为[Animate Image in button to摇](https://stackoverflow.com/questions/11093302/how-to-animate-an-image-in-a-button-to-shake-every-30-seconds-in-wpf)

我将 ShakingBehavior 复制到我的项目到它自己的类中，并且我已经有了 Blend SDK。

现在我将 XAML 部分添加到我的图像中

```
<Image Source="myImage.png" Grid.Row="{Binding Path=Row}" Grid.Column="{Binding Path=Col}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0">

    <i:Interaction.Behaviors>
        <local:ShakeBehavior RepeatInterval="5" SpeedRatio="3.0"/>
    </i:Interaction.Behaviors>

</Image> 
```

现在我得到一个我无法摆脱的错误！

（由于我这里没有英文 VS，所以我尝试翻译消息）

> 交互类型没有可附加的行为属性

可能只是一个要添加的命名空间（i 别名），但我无法将其用于工作

**编辑** 更多信息：图像包含在一个按钮中，该按钮位于数据模板内。

并且（充其量）我想在单击视图中的另一个按钮时开始动画。（此行为将有助于找到按钮作为提示）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:26:19.710

由于 Mohib 不想，我将发布我错过的正确行：

这个应该没有那些可以在 Mohibs 答案中找到的神奇的未打印值。

xmlns:i="clr-命名空间:System.Windows.Interactivity;assembly=System.Windows.Interactivity"

# eclipse - windows>首选项中没有服务器

> ID：11317854
> 
> 赞同：35
> 
> 时间：2012-07-03T19:30:21.710
> 
> 标签：eclipse, eclipse-plugin, eclipse-juno

我正在尝试将 Apache 服务器添加到 Eclipse(Juno)。我已经安装了 Apache 服务器 7.0，但是当我尝试将它添加到 Eclipse 环境时，我在**windows>preferences**中看不到选项服务器。首选项中必须有一个名为 server 的选项才能添加 Tomcat 服务器。

请帮助我如何获得该选项？

我需要安装任何插件吗？如果是，请提供链接或名称。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2014-11-11T18:15:01.713

在 Eclipse 开普勒中，

1.  转到帮助，选择“安装新软件”</li>
2.  选择“Kepler- [http://download.eclipse.org/releases/kepler](http://download.eclipse.org/releases/kepler) ”站点或添加它（如果缺少）。
3.  展开“Web、XML 和 Java EE 开发”部分检查`JST Server Adapters`并`JST Server Adapters Extensions`安装它

Eclipse重启后，进入Window / Preferences / Server / Runtime Environments

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-07-03T20:16:50.713

您没有安装正确的 Eclipse 发行版。尝试安装标有“Java EE Developers 的 Eclipse IDE”的那个。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-04-02T02:31:11.847

我遇到过同样的问题。我使用的是 Eclipse 平台，而我的显示视图中缺少服务器。要解决此问题，请执行以下操作：

*   帮助>安装新软件

*   在使用中：选择：“Indigo Update Site - [http://download.eclipse.org/releases/indigo/](http://download.eclipse.org/releases/indigo/) ”，一旦选择，所有可用软件将显示在类型过滤器文本下的部分

*   展开“Web、XML 和 Java EE 开发”并选择“JST 服务器适配器扩展”

*   然后单击下一步并完成。服务器应显示在显示视图中

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-08T13:21:47.857

您还可以使用 Help -> Install new software... 安装所需的软件包

请参阅[http://www.eclipse.org/downloads/compare.php](http://www.eclipse.org/downloads/compare.php)了解您需要安装的软件包，以便为 java EE 开发人员安装 eclipse IDE

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-17T13:50:35.167

请按照以下步骤操作：

```
1.Goto Help -> Install new Software
2.Give address http://download.eclipse.org/releases/oxygen and name as your choice.
3.Search for Java EE and choose 1.Eclipse Java EE Developer Tools 
4.Search for JST and choose 2.JST Server Adapters 3.JST Server Adapters 
5.Click next and accept the license agreement. 
```

在窗口中找到服务器选项 - >首选项并根据需要添加服务器

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-18T02:23:18.227

如果上述答案对您不起作用，那么只需根据您的操作系统单击此链接[https://www.eclipse.org/downloads/packages/release/2020-06/r/eclipse-ide-enterprise-java-developers下载。](https://www.eclipse.org/downloads/packages/release/2020-06/r/eclipse-ide-enterprise-java-developers)下载并解压 ZIP 后，打开解压文件夹并单击 Eclipse 应用程序图标。 [![在此处输入图像描述](../Images/dd2c8d06c0f4df55e585e713e2dcf033.png)](https://i.stack.imgur.com/9V7BM.png)

然后只需进入您的工作区并开始使用。现在您将能够在 Window->Show View 中看到服务器选项，如下所示：

[![在此处输入图像描述](../Images/3efe361da4839360bf7ee4b001a70cac.png)](https://i.stack.imgur.com/tlBFq.png)

# symfony - 如何在 symfony2 项目中安装/更新 javascript 供应商？

> ID：11317855
> 
> 赞同：12
> 
> 时间：2012-07-03T19:30:23.430
> 
> 标签：symfony

在我的 Symfony2 项目中，我有许多 javascript 依赖项，最好将它们与 php 依赖项一起管理。现在我将它们与 php 依赖项一起添加到 deps 文件中，并创建一个指向 web 目录的符号链接，例如：

```
//deps
[knockout-js]
    git=git://github.com/SteveSanderson/knockout.git 
```

问题是javascript库（大部分）需要从几个文件编译成一个。所以在安装/更新供应商之后，我需要手动运行编译脚本。据我所知，bin/vendors 脚本不支持更新前/更新后挂钩，这将解决这个问题。

无论如何，您如何在项目中更新 javascript 供应商？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T19:55:14.910

可能有更好的方法......但我只是使用我的基本模板中的路径，如下所示：

```
{% javascripts
    filter='yui_js'

    '../vendor/twitter/bootstrap/js/bootstrap-tab.js'
    '../vendor/harvesthq/chosen/coffee/lib/select-parser.coffee'
    '../vendor/harvesthq/chosen/coffee/lib/abstract-chosen.coffee'
    '../vendor/harvesthq/chosen/coffee/chosen.jquery.coffee'

    '@SOTBCoreBundle/Resources/public/js/script.js'
%}
    <script src="{{ asset_url }}"></script>
{% endjavascripts %} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T10:53:53.847

Composer 也可用于管理 javascript 依赖项。默认情况下，composer 仅使用一个名为 Packagist 的存储库，该存储库仅用于 PHP 库。但是，正如[这里](https://github.com/composer/composer/issues/524#issuecomment-4912681)所建议的，您可以为 javascript（或任何其他）库添加自己的存储库。

这是我的 composer.json，它添加了一个自定义的 knockout-js 存储库：

```
{
    "require": {
        "php": ">=5.3.2",
        "symfony/symfony": ">=2.0.10,<2.1.0-dev",
        "doctrine/orm": ">=2.1.0,<2.2.0-dev",
        "twig/extensions": "*",

        "symfony/assetic-bundle": "2.0.*",
        "sensio/generator-bundle": "2.0.*",
        "sensio/framework-extra-bundle": "2.0.*",
        "sensio/distribution-bundle": "2.0.*",
        "jms/security-extra-bundle": "1.0.*",
        "knockout/knockout-js": "2.1.0"
    },

    "autoload": {
        "psr-0": {
            "Acme": "src/"
        }
    },

    "repositories": [
        {
            "type": "package",
            "package": {
                "name": "knockout/knockout-js",
                "version": "2.1.0",
                "source": {
                    "type": "git",
                    "url": "https://github.com/SteveSanderson/knockout.git",
                    "reference": "v2.1.0"
                }
            }
        },
        {
            "type": "package",
            "package": {
                "name": "knockout/knockout-js",
                "version": "2.0.0",
                "source": {
                    "type": "git",
                    "url": "https://github.com/SteveSanderson/knockout.git",
                    "reference": "v2.0.0"
                }
            }
        }
    ]

} 
```

存储库由包组成（它是库的源和版本的组合）。这里我有 2 个包（2.1.0、2.0.0），它们已经包含预构建的 knockout.js 源，因此您不必编译任何东西。

现在，有时您可能想要编译和使用最新的代码。为了自动化这个程序，我想，可以使用 git post-checkout hook。添加一个引用最新代码的新包：

```
 {
        "type": "package",
        "package": {
            "name": "knockout/knockout-js",
            "version": "master",
            "source": {
                "type": "git",
                "url": "https://github.com/SteveSanderson/knockout.git",
                "reference": "master"
            }
        }
    } 
```

在 require 部分引用这个包：

```
"knockout/knockout-js": "master" 
```

以及带有构建说明的结帐后挂钩。对于 knockout.js，这很简单：

```
// vendor/knockout/knockout-js/.git/hooks/post-checkout

#!/bin/sh

echo "Building knockout.js";
`cd build && ./build-linux`; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-10T17:49:48.373

如果由于某种原因您不想使用资产包，您可以设置您的部门（作曲家）以将 javascript 供应商加载到目录下的某个文件夹中`web`。

[这篇文章](http://codophony.blogspot.com/2012/11/symfony2-and-js-vendors.html)描述了如何使用`deps`文件来做到这一点。而[这篇文章](http://codophony.blogspot.com/2012/11/symfony2-1-x-and-js-vendors.html)- 如何通过作曲家做到这一点。

# linux - 如何在 bash 中确定空白 DVD 上的可用存储空间量？

> ID：11317859
> 
> 赞同：2
> 
> 时间：2012-07-03T19:30:48.623
> 
> 标签：linux, bash, iso, dvd, hp-ux

我想知道是否有一种方法可以使用 bash 命令确定空白可写 DVD 中的可用空间量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:43:06.717

也许使用 dvd+rw-tools 中的 dvd+rw-mediainfo 并解析其输出？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:02:25.243

如果您安装 DVD 并使用该`df`命令，这将显示所有设备的可用空间量。

如果您想要更易读的格式，也可以使用`df -h`.

# reporting-services - BIDS 2008 SSRS 项目显示感叹号

> ID：11317866
> 
> 赞同：1
> 
> 时间：2012-07-03T19:31:14.423
> 
> 标签：reporting-services, tfs, bids, rdl

我创建了一个包含多个 SSRS 报告项目的解决方案。每个项目都包含少量报告文件 (.RDL) 的定义。它们被分成多个项目，因为每个项目都与不同的部署目录协同工作。

我将解决方案签入 TFS 2010。我正在为开发人员准备有关如何获取解决方案的文档，因此我备份了它并将其从我的工作站中删除。我在 BIDS 2008 中执行了一个简单的“从源代码管理打开”命令。该项目是从源代码管理中提取的，并最终位于完全相同的位置，具有完全相同的文件夹结构和文件名。但是，每个项目中的每个 RDL 都有一个带有黄色图标感叹号的锁。我正在寻找显示此图标的原因，但根本看不到它。

我在互联网上研究过这个问题，但大多数情况下都是指在项目之间移动文件或缺少依赖项引用。我在这里没有这些问题。

谁能建议警告图标的原因是什么，或诊断方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:01:49.593

我有同样的问题。我所要做的就是关闭 BIDS exe，然后重新运行它。从“最近的项目”链接再次打开解决方案后，项目打开并且感叹号消失了！希望你现在也明白这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T15:05:10.357

首先，我为您将看到的用于解释发生了什么的大量 xml 代码表示歉意。

我们这里有同样的问题。我发现，无论出于何种原因，当一个新的报告文件添加到项目中时；无论名称如何，它都会将其放在解决方案资源管理器中列表的末尾。

此外，它会将其作为列表中的最后一个孩子。在提交到 TFS 并将其拉回 xml 节点时仍然是相同的方式，但在您的解决方案资源管理器中，文件以正确的 alpha 顺序显示。但是，由于项目 xml 和解决方案资源管理器不同步，您会看到感叹号。

我找到的卸载项目文件的解决方案进入并编辑 xml，以正确的 alpha 顺序放置元素。

例子

```
<Reports>
<ProjectItem>
  <Name>AccountGroupListing.rdl</Name>
  <FullPath>AccountGroupListing.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>ApprovalRouteListing.rdl</Name>
  <FullPath>ApprovalRouteListing.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>BalanceSheetWCodesReport.rdl</Name>
  <FullPath>BalanceSheetWCodesReport.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>BalanceSheetWOCodesReport.rdl</Name>
  <FullPath>BalanceSheetWOCodesReport.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>BankAccountListing.rdl</Name>
  <FullPath>BankAccountListing.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>BankReconDetail.rdl</Name>
  <FullPath>BankReconDetail.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>BankReconSummary.rdl</Name>
  <FullPath>BankReconSummary.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>BasicBudgetProof.rdl</Name>
  <FullPath>BasicBudgetProof.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>BillsToBeApproved.rdl</Name>
  <FullPath>BillsToBeApproved.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>ChartOfAccountsListing.rdl</Name>
  <FullPath>ChartOfAccountsListing.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>DoubleEntryGuideListing.rdl</Name>
  <FullPath>DoubleEntryGuideListing.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>DoubleEntryPaymentProcessing.rdl</Name>
  <FullPath>DoubleEntryPaymentProcessing.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>DoubleEntryReport.rdl</Name>
  <FullPath>DoubleEntryReport.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>DoubleEntryReportDetail.rdl</Name>
  <FullPath>DoubleEntryReportDetail.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>InvoiceForm.rdl</Name>
  <FullPath>InvoiceForm.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>InvoiceFormSelfSealer.rdl</Name>
  <FullPath>InvoiceFormSelfSealer.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>PaymentHistory.rdl</Name>
  <FullPath>PaymentHistory.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>PaymentRegisterDetailReport.rdl</Name>
  <FullPath>PaymentRegisterDetailReport.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>PaymentRegisterSummaryReport.rdl</Name>
  <FullPath>PaymentRegisterSummaryReport.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>POByAccountCode.rdl</Name>
  <FullPath>POByAccountCode.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>POPaperlessDistibutions.rdl</Name>
  <FullPath>POPaperlessDistibutions.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>PORequiresPayment.rdl</Name>
  <FullPath>PORequiresPayment.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>ProrationListing.rdl</Name>
  <FullPath>ProrationListing.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>PurchaseOrderForm.rdl</Name>
  <FullPath>PurchaseOrderForm.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>PurchaseOrderFormLineItems.rdl</Name>
  <FullPath>PurchaseOrderFormLineItems.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>ReceivablesReport.rdl</Name>
  <FullPath>ReceivablesReport.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>RequisitionApprovalAudit.rdl</Name>
  <FullPath>RequisitionApprovalAudit.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>RequisitionForm.rdl</Name>
  <FullPath>RequisitionForm.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>RequisitionProof.rdl</Name>
  <FullPath>RequisitionProof.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>RevenuesReport.rdl</Name>
  <FullPath>RevenuesReport.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>UnapprovedRequisitions.rdl</Name>
  <FullPath>UnapprovedRequisitions.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>VoidPayments.rdl</Name>
  <FullPath>VoidPayments.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>LoriTest.rdl</Name>
  <FullPath>LoriTest.rdl</FullPath>
</ProjectItem> 
```

请注意 LoriTest.rdl 是如何出现在 VoidPayments.rdl 文件之后的。如果您查看我的图像，该图标如何带有感叹号。

![解决方案资源管理器](../Images/d13a51f08d7a4aad95274d29c6344943.png)

我的同事添加了这个文件，提交了更改，然后我将它们拉下来。该文件以正确的顺序出现在解决方案资源管理器中，但不在实际项目 xml 中。如果我关闭 BIDS 并重新打开标记消失，但项目文件仍然混乱，直到我添加一个新文件。现在我的文件放在最后，并且 loritest.rdl 在列表中向上移动到正确的 alpha 顺序。

看我的第二张图。

![解决方案资源管理器 2](../Images/8f4a39fdcb3dd9d92dce4424b8f4260a.png)

现在看项目文件代码

```
<Reports>
<ProjectItem>
  <Name>AccountGroupListing.rdl</Name>
  <FullPath>AccountGroupListing.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>ApprovalRouteListing.rdl</Name>
  <FullPath>ApprovalRouteListing.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>BalanceSheetWCodesReport.rdl</Name>
  <FullPath>BalanceSheetWCodesReport.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>BalanceSheetWOCodesReport.rdl</Name>
  <FullPath>BalanceSheetWOCodesReport.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>BankAccountListing.rdl</Name>
  <FullPath>BankAccountListing.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>BankReconDetail.rdl</Name>
  <FullPath>BankReconDetail.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>BankReconSummary.rdl</Name>
  <FullPath>BankReconSummary.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>BasicBudgetProof.rdl</Name>
  <FullPath>BasicBudgetProof.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>BillsToBeApproved.rdl</Name>
  <FullPath>BillsToBeApproved.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>ChartOfAccountsListing.rdl</Name>
  <FullPath>ChartOfAccountsListing.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>DoubleEntryGuideListing.rdl</Name>
  <FullPath>DoubleEntryGuideListing.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>DoubleEntryPaymentProcessing.rdl</Name>
  <FullPath>DoubleEntryPaymentProcessing.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>DoubleEntryReport.rdl</Name>
  <FullPath>DoubleEntryReport.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>DoubleEntryReportDetail.rdl</Name>
  <FullPath>DoubleEntryReportDetail.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>InvoiceForm.rdl</Name>
  <FullPath>InvoiceForm.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>InvoiceFormSelfSealer.rdl</Name>
  <FullPath>InvoiceFormSelfSealer.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>LoriTest.rdl</Name>
  <FullPath>LoriTest.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>PaymentHistory.rdl</Name>
  <FullPath>PaymentHistory.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>PaymentRegisterDetailReport.rdl</Name>
  <FullPath>PaymentRegisterDetailReport.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>PaymentRegisterSummaryReport.rdl</Name>
  <FullPath>PaymentRegisterSummaryReport.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>POByAccountCode.rdl</Name>
  <FullPath>POByAccountCode.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>POPaperlessDistibutions.rdl</Name>
  <FullPath>POPaperlessDistibutions.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>PORequiresPayment.rdl</Name>
  <FullPath>PORequiresPayment.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>ProrationListing.rdl</Name>
  <FullPath>ProrationListing.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>PurchaseOrderForm.rdl</Name>
  <FullPath>PurchaseOrderForm.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>PurchaseOrderFormLineItems.rdl</Name>
  <FullPath>PurchaseOrderFormLineItems.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>ReceivablesReport.rdl</Name>
  <FullPath>ReceivablesReport.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>RequisitionApprovalAudit.rdl</Name>
  <FullPath>RequisitionApprovalAudit.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>RequisitionForm.rdl</Name>
  <FullPath>RequisitionForm.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>RequisitionProof.rdl</Name>
  <FullPath>RequisitionProof.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>RevenuesReport.rdl</Name>
  <FullPath>RevenuesReport.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>UnapprovedRequisitions.rdl</Name>
  <FullPath>UnapprovedRequisitions.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>VoidPayments.rdl</Name>
  <FullPath>VoidPayments.rdl</FullPath>
</ProjectItem>
<ProjectItem>
  <Name>DerekTest.rdl</Name>
  <FullPath>DerekTest.rdl</FullPath>
</ProjectItem> 
```

我发现你需要做的是在你之后，即添加新文件的人，需要做的是在他们添加新报告文件之后，卸载项目文件并直接编辑项目文件以将文件放在正确的顺序。您不必绝对这样做，但是如果您在提交之前不执行获取操作，那么当多个人正在添加报告时您可能会遇到问题，因为它们在项目文件中被覆盖，但是他们，报告, 存在于源代码管理中。

希望这有助于解释发生了什么。我还没有真正找到解决这个问题的所有解决方案。我的想法是创建一个脚本或 VS 插件来解决排序问题。你会认为微软会注意到 VS/BIDS 中的这个错误并有一个修补程序，但我还是没有找到它。

# winapi - 使用 Windows 用户界面 API 是否会导致不同版本的 Windows 之间不兼容？

> ID：11317869
> 
> 赞同：2
> 
> 时间：2012-07-03T19:31:28.687
> 
> 标签：winapi, ui-automation

我正在开发一个 C# Excel VSTO 加载项，该加载项利用 user32.dll 对 excel UI 进行一些黑魔法。我在使用 Win32 方面不是很有经验，我想知道：

我是否需要担心确保该应用程序可以在 XP 及更高版本的所有 Windows 版本上运行？或者假设我的 Win32 调用将在所有这些版本中始终如一地工作是否合理？

**编辑：**这是我正在使用的电话：

```
[DllImport("user32.dll", CharSet = CharSet.Auto)]
static public extern IntPtr FindWindowEx(IntPtr hWnd, IntPtr hChild, string strClassName, string strName);
[DllImport("user32.dll", CharSet = CharSet.Auto)]
static public extern bool IsWindowVisible(IntPtr hWnd);
[DllImport("user32.dll", CharSet = CharSet.Auto)]
static public extern bool IsWindowEnabled(IntPtr hWnd); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T20:25:16.817

好的，您正在使用的电话*不会*就这样消失，它们会一直存在。但是，特别是`FindWindowEx`具有非常特定的功能，因此您很可能试图在 Excel GUI 中找到一个子窗口，其名称和/或窗口类可以随时更改（包括通过次要更新），由 Microsoft 决定。

因此，回答您的问题：无需担心您正在使用的 API 函数，但是是的，您必须进行防御性编码，以确保您的代码不会在不符合预期的 Excel 版本上出现异常（关于特定子窗口的存在）在您的代码中。

# jquery - 使用jquery构造动态url

> ID：11317870
> 
> 赞同：-1
> 
> 时间：2012-07-03T19:31:28.893
> 
> 标签：jquery, anchor, href

我正在尝试构建一个锚标记 href，其中 url 将查询服务

编码：

```
var href  = $("#id").text();
$('<a href="#" id="testselect">button</a>').insertAfter("#searchtextselecttest");
$("#testselect").attr('href','http://something/ID='+ href); 
```

当我点击链接时，我只得到“something/ID=”并且没有附加 href 并且 #id 也是一个链接！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:38:41.773

尝试：

```
var href = encodeURI($("#id").text());
$('<a href="#" id="testselect">button</a>').insertAfter("#searchtextselecttest");
$("#testselect").attr('href','http://something/ID='+ href); 
```

# wcf - ? 与 Pivotviewer 自定义操作相关的代码功能是否应该是轻量级的？

> ID：11317874
> 
> 赞同：0
> 
> 时间：2012-07-03T19:31:46.960
> 
> 标签：wcf, performance, silverlight-4.0, custom-action, pivotviewer

全部：

我们的项目使用 Silverlight 4 和 Microsoft Pivot Viewer。

我正在使用 Silverlight 4，现在我想继续使用 Silverlight 4。

我们项目中的 PivotViewer 显示将使用自定义操作。我想出了一种在 PivotViewer 中的每个项目图像顶部添加自定义操作按钮的方法。

我的意图是在 PivotViewer 中的每个项目图像顶部都有“添加到购物车”和“删除”自定义操作按钮。

显然，“添加到购物车”自定义操作按钮最终会触发某种 Web 服务或 WCF 服务的方法，该方法会将商品图像添加到个人帐户购物车（即基本上我的应用程序将访问数据库）。

显然，“删除”自定义操作按钮最终将触发某种 Web 服务或 WCF 服务的方法，该方法会将项目图像删除到个人帐户购物车（即基本上我的应用程序将访问数据库）。

但是，我依稀记得有人在博客上发表评论说，与 Pivot Viewer 显示相关的自定义操作应该非常轻量级。

我只是担心在调用 PivotViewer 的自定义操作时调用 Web 服务方法是否会很重。

这是我应该关心的事情吗？

谢谢，

# java - 找到一个数字的真正大幂幂

> ID：11317875
> 
> 赞同：3
> 
> 时间：2012-07-03T19:31:49.737
> 
> 标签：java, math

我正在为学生创建一个小游戏，在一个地方，它必须显示2 ^(7830457) +1的值

如果数字不是那么大，我可以调用 BigInteger 的 pow() 方法。由于数量很大，这种方法是没有用的。我怎样才能找到这种数字的巨大力量？请帮忙！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T19:33:27.153

在二进制中，它只有`10000...01`7830456 个零。

在十进制中，将有大约 200 万位数字，即大约 2 兆字节的存储空间。这完全在`BigInteger`使用默认堆大小的可行性范围内。

在实践中，它甚至使用[平方](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)来快速计算它（尽管规范不保证）。但是，转换为 a`String`需要一些时间，因为它是线性时间操作。

```
import java.math.BigInteger;

public class BigPow {
    public static void main(String[] args) {
        BigInteger result = (new BigInteger("2")).pow(27830457).add(BigInteger.ONE);
        System.out.println(result);
    }
} 
```

这是一个会慢慢打印出数字的版本：

```
import java.math.BigInteger;

public class BigPow {
    public static void main(String[] args) {
        BigInteger result = (new BigInteger("2")).pow(27830457).add(BigInteger.ONE);
        BigInteger powten = BigInteger.TEN.pow(2357202);

        while(powten.compareTo(BigInteger.TEN) > 0) {
            BigInteger digit = result.divide(powten).mod(BigInteger.TEN);
            System.out.print(digit);
            powten = powten.divide(BigInteger.TEN);
        }
    }
} 
```

第一个数字是：

> 27337386390628313557307248857732033008168556429738078791761607160549944954510637855005417718646965163546351365984857761796847950377880836291434244529029919271706271982523405687134334692691344477538489450971091437463160940371624647030064741968436401566711255284353690448270545402444641547030399228243743315193608710148721648879085592699913299745785392609301774185427367430782834290629265859073814466687714408436025809860462926275610087354595992436000187216152954542774991509992374985538879880897902639600451627914923043483436514419544413306391278529303650112773297502090619459167888563274071587848623085880067091968911236296732119252937497152769541579516150659424997041968213122450568364121976474269097910635641227922923398092242409755554115985855831015459204780391470591543281267373716556272259386683864538263922398723602210173800151405332100275913619559563575829498369806957031526077258236305186254269056811134135133350936924294101345294335698866339561918857584229744277901180792029180156485000086528174400878657004645726892816943589969701053158760210512171516969813345080894134663207988962182426459128577282934948790911691329475034324656384238413230485050607666988301932660490870167246016897007835866691705399794247746213819662270451531049826029606671683482160663572103374

由[WolframAlpha](http://www.wolframalpha.com/input/?i=2%5E7830457%2b1)确认。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T19:35:34.943

我不知道你为什么认为`BigInteger`不符合这一点：

```
import java.math.BigInteger;

public class Test {
    public static void main(String[] args) throws Exception {
        BigInteger big = BigInteger.valueOf(2)
            .pow(7830457)
            .add(BigInteger.ONE);
        System.out.println(big);
    }
} 
```

这需要一点时间（尤其是最后的字符串转换），但这是完全合理的。

正如彼得所指出的，`ONE`向左移动 7830457 更整洁，请注意。我认为它不太清楚 - 当然它在字符串转换部分没有帮助。

编辑：几乎所有时间都花在字符串转换上。它最终在我的盒子上完成了。我再也看不到它的*开始*，但它的结尾是……

```
08570502260645006898157834607641626568029302766491883299164453304032280181734737
79366998940913082443120328458954436211937775477966920836932628607888755839700303
873 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T19:33:44.873

您应该能够使用 BigInteger 进行计算。

```
 System.out.println(BigInteger.ONE.shiftLeft(7830457).add(BigInteger.ONE)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T19:38:58.870

尝试这样的事情：

```
BigInteger mant = new BigInteger("2");
BigInteger result = mant.pow(7830457).add(BigInteger.ONE); 
```

# google-apps-script - 用于在 Google 网站上安排页面的 Google 脚本

> ID：11317879
> 
> 赞同：0
> 
> 时间：2012-07-03T19:32:04.690
> 
> 标签：google-apps-script, google-sites

我正在探索为我们的新 Intranet 使用 Google 协作平台的选项。我们需要能够在创建页面时安排页面在特定日期自动删除。

我知道此功能不是本机功能，我想知道是否可以在编辑器视图（而不是实时站点）中为调度小工具编写 Google 脚本。

非常欢迎建议。谢谢！杰西卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T17:29:46.117

如果我正在实现这个，我会编写一个带有两个独立触发函数的独立脚本，这两个函数每天都运行。

*   脚本 1 将清点站点中的页面。当新页面被识别时，它们的创建和预计删除日期将被记录下来。

*   脚本 2 将查看已知页面列表，并删除任何已达到其到期日期的页面。

拆分工作的原因有两个：以这种方式考虑它可以稍微简化问题，并减少遇到脚本超时失败的机会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:35:03.707

除非有这样做的本机方式，否则我会为 Google 网站创建一个 WatiN 界面来创建和删除页面

# javascript - 使用 swfobject 加载的跨域 Flash 电影不会在第一页加载时播放

> ID：11317885
> 
> 赞同：2
> 
> 时间：2012-07-03T19:32:28.130
> 
> 标签：javascript, flash, cross-domain, swfobject

我正在使用 SWFObject v2.2，并从不同的域 (Amazon S3) 加载 swf 以（理想情况下）在页面上播放。

这是我在域 A 上的页面：http: [//cssquirrel.com/testcases/swfobject/](http://cssquirrel.com/testcases/swfobject/)

相关部分：有一个 id 为“movie”的 div，demo.js（在页面中调用）执行以下操作：

```
swfobject.embedSWF("https://s3.amazonaws.com/media.anvilcorp.com/videos/safety.swf", "movie", "640", "480", "10.0.0"); 
```

我创建了跨域文件并将其放置在托管 SWF 文件的域 B 上。该文件如下：

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
<allow-access-from domain="cssquirrel.com" />
</cross-domain-policy> 
```

当我第一次加载页面时，我确认它加载了 swf 文件，但它从未开始播放。

在第二个页面加载时，文件开始播放（从缓存中）。清除缓存后重新加载，第一次加载时不会再次播放。

我尝试在页面加载后手动触发播放：

```
document.getElementById("movie").play(); 
```

但没有骰子。

关于如何让电影在第一页加载时播放的任何想法？

# .net - 在 .NET 类中实现 COM 接口时是否有任何“陷阱”？

> ID：11317886
> 
> 赞同：2
> 
> 时间：2012-07-03T19:32:33.127
> 
> 标签：.net, com, com-interop

众所周知，.NET 程序集/类可以使[COM 可见](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comvisibleattribute.aspx)，因此程序集中的类可以由 COM 感知客户端实例化为 COM 对象。

是否有任何“陷阱”需要注意？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:32:33.707

为什么是的，是的。

1) 需要这种互操作的特定情况是当您的类预计实现已经存在的 COM 接口时。例如，SharePoint 提供了一些插件架构，其中插件注册为实现一些自定义接口的 COM 类。

如果您没有该接口的[主互操作程序集](http://msdn.microsoft.com/en-us/library/aax7sdch.aspx)，则可能需要添加对 TLB 或包含 TLB 的 DLL 的引用。添加引用时，可以通过选择“浏览”在 Visual Studio 中添加引用。如果你没有 TLB，你应该有一个 IDL，你可以使用`midl.exe`. 一些文档等效地建议`tlbimp.exe`在 TLB 上运行并添加对生成程序集的引用。

然而...

*   很有可能，如果您尝试使用上述方法，客户端将成功创建您的类的 COM 对象实例，但在调用该类的任何方法时会崩溃。这是因为**上面的方法打乱了接口中方法的顺序**。因此客户端尝试调用需要一些参数的方法 A，但虚拟表中的条目（假设客户端是 C++）实际上调用方法 B！...并尝试将无效参数编组到其托管实现。
*   有时翻译后的参数类型不正确（例如， a`byte*`可能翻译为 a `ref byte`）。
*   有些接口只是翻译错误（特别是翻译后的 ILockBytes 包含`RemoteReadAt`and`RemoteWriteAt`方法，而不是`ReadAt`and `WriteAt`）。

因此，虽然您*可以*使用从 TLB 自动生成的程序集作为起点 - 您必须通过修改程序集或仅将生成的代码复制到源文件中然后进行所需的更改来修复以上所有问题。

2)按照[文档](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.classinterfacetype.aspx)`ClassInterfaceAttribute`中的建议，添加with`ClassInterfaceType.None`作为类型。

3）为`Any CPU`体系结构构建程序集，然后在您要注册它的任何机器上 -

*   如果要注册程序集以供 32 位进程使用 COM，请使用`C:\Windows\Microsoft .NET\Framework\<version>\regasm.exe`.
*   如果要注册程序集以供 64 位进程使用 COM，请使用`C:\Windows\Microsoft .NET\Framework64\<version>\regasm.exe`.

4）只是运行不会将.NET程序集添加到GAC中，因此如果您自己没有在GAC中安装程序集，请`regasm.exe`务必使用`/codebase`参数。`regasm.exe`

5) 即使 Visual Studio 以管理员权限运行，如果您在构建选项中选中“Register for COM Interop”复选框，程序集的注册也经常会失败。最好清除该复选框，而是添加`regasm.exe`为构建后事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:44:58.320

我遇到过的一对：

1.  COM 不支持泛型，因此通过 COM 访问的所有集合都需要无类型。
2.  虽然 COM 支持接口继承，但 .Net 实现不支持。由于 COM 只关心接口，因此您可以在类中使用继承，但您的接口必须同时包含派生类和基类成员。

# combinations - 向序列/字符串添加一位数字 (0-9) 会创建新的 4 位数字

> ID：11317890
> 
> 赞同：3
> 
> 时间：2012-07-03T19:32:38.937
> 
> 标签：combinations, puzzle, digits

我试图通过键入键 0-9 来找到一种“破坏保险箱”的算法。代码长度为 4 位。保险箱将打开，它将代码标识为输入的子字符串。意思是，如果密码是“3456”，那么下一次输入将打开保险箱：“123456”。（这只是意味着保险箱不会每输入 4 个键就重新启动一次）。

是否有一种算法，每次在序列中添加一个数字时，它都会创建新的 4 位数字（序列\字符串的最后 4 位数字的新组合）？

谢谢，公里。

编辑（我在几年前发布）：问题是如何确保每次我将输入（一位数字）设置到保险箱时，我都会生成一个以前没有生成的新的 4 位数字代码。例如，如果保险箱获得 3 位长的二进制代码，那么这应该是我的输入序列：

```
0001011100 
```

因为对于每个输入，我都会得到一个以前没有生成的新代码（3 位长）：

```
000 -> 000
1 -> 001
0 -> 010
1 -> 101
1 -> 011
1 -> 111
0 -> 110
0 -> 100 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:59:58.663

我发现您的问题有所减少：

让我们用以下方式定义有向图 G = (V,E)：

V = {所有可能的代码组合}。

E = {< u,v > | v 可以从 u 中通过添加 1 个数字（在末尾）得到，并删除第一个数字}。

|V| = 10^4。

每个顶点的 Din 和 Dout 等于 10 => |E| = 10^5。

您需要证明 G 中存在汉密尔顿循环 - 如果这样做，您可以证明存在解。

**编辑1：**

算法：

1.  如上所述构造有向图 G。

2.  计算哈密顿循环 - {v1,v2,..,vn-1,v1}。

3.  按 v1 中的每个数字。

4.  X <- v1。

5.  保险箱未打开时：

    5.1 X <- X 之后 Hamilton 路径中的下一个顶点。

    5.2 按 X 中的最后一个数字。

我们可以看到，因为我们使用了 Hamilton 循环，所以我们从不重复相同的子串。（最后 4 次按下）。

**编辑2：**

当然，汉密尔顿路径就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:39:52.663

总而言之，我认为您正在尝试解决的问题以及对我如何解决该问题的一些解释。[http://www.cs.swan.ac.uk/~charold/cpp/SPAEcpp.pdf](http://www.cs.swan.ac.uk/~csharold/cpp/SPAEcpp.pdf)

但是，您必须做一些技巧才能使其适合中国邮递员问题...想象一下解决二进制数字，三位数字字符串的问题。假设你有前两位数，然后问问你自己我有哪些选择？（关于下一个两位数的字符串？）你留下了一个有向图。

```
 /-\
/   V    
\-  00 ----> 01
      ^  /   ^|
       \/    ||
       /\    ||
      V  \   |V
 /-- 11 ---> 10 
 \   ^         
  \-/ 
```

解决中国邮递员，你将拥有所有组合并形成一个字符串现在的问题是，中国邮递员是否可以解决？有一些算法可以确定天气或 DAG 对于 CPP 是否可以解决，但我不知道这个特定的图表是否*一定*可以仅根据问题来解决。这将是一件好事来确定。但是，您确实知道您可以通过算法找出它是可以解决的，如果可以的话，您可以使用该论文（我认为）和在线提供的算法来解决它。

这里的每个顶点都有 2 条传入边和 2 条传出边。有 4 (2^2) 个顶点。

在全尺寸问题中有`19683( 3 ^ 9 )`顶点，每个顶点都有`512 ( 2 ^ 9 )`输出和输入顶点。总共会有

```
19683( 3 ^ 9 ) x 512 (2 ^ 9) = 10077696 edges in your graph. 
```

解决方法：

```
1.) Create list of all 3 digit numbers 000 to 999.
2.) Create edges for all numbers such that last two digits of first number match first
two digits of next number. 

ie 123 -> 238 (valid edge) 123 -> 128 (invalid edge)

3.) use Chinese Postman solving algorithmic approaches to discover if solvable and
solve 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T20:24:08.760

我将创建一个子序列数组，在插入新数字时需要对其进行更新。因此，在您的示例中，它将开始为：

```
array = {1} 
```

然后

```
array = {1,2,12} 
```

然后

```
array = {1,2,12,3,13,23,123} 
```

然后

```
array = {1,2,12,3,13,23,123,4,14,24,124,34,134,234,1234} 
```

并且当您有一个已经在 length=4 的序列时，您不需要继续连接，只需删除序列的第一个数字并在末尾插入新数字，例如，使用最后一个 item `1234`，当我们添加`5`它会变成`2345`如下：

```
array = {1,2,12,3,13,23,123,4,14,24,124,34,134,234,1234,5,15,25,125,35,135,235,1235,45,145,245,1245,345,1345,2345,2345} 
```

我相信这不是遍历给定序列的所有子序列的非常复杂的方法。

# css - CSS：如何限制边框底部 div 的长度？

> ID：11317895
> 
> 赞同：0
> 
> 时间：2012-07-03T19:33:06.553
> 
> 标签：css, html, border

下图有 2 个 div，1 个是登录表单的部分，另一个是 facebook 和 twitter 上的按钮所在的部分，然后我想要放置一个边框，但具有特定的长度，即红色框在哪里。

第一个div的宽度是：**850px**，第二个是：比第一个高**30% ！**

![长度边框 div](../Images/7adfd4022353a9bd3f9a2e81ac112c0a.png)

我希望我已经解释了！

**HTML**

```
<div id="top">
    <!--Productos de limpieza Master Clean <img src="media/user_icon.png"/><span><a href="#login" id="inicia">Inicia sesión</a> ó <a href="registro.php" id="registro">registrate!</b></span>-->
    <div id="loginform">
        <form id="loginuser" name="loginuser" action="php/processFunctions.php" method="post">
            <input id="userLog" class="required" name="userLog" type="text" placeholder="Usuario"/>
            <input id="passLog" class="required" name="passLog" type="password" placeholder="Contraseña"/>
            <a href="#login" id="dologin" name="dologin">Iniciar</a> ó
            <a href="registro.php" id="dosignup" name="dosignup">Registrarse</a>
            <span id="errorlogin"></span>
        </form>
    </div>
    <span id="currentUser"></span>

    <!--<h4>Búscanos en:</h4>-->
</div>
<div id="topsocial">
    <ul id="socialmedia">
        <li><a href="http://www.twitter.com"><img src="media/twitter.png" alt="Siguenos" title="Siguenos en Twitter"/></a></li>
        <li><a href="http://www.facebook.com"><img src="media/facebook.png" alt="Like" title="Like en Facebook"/></a></li>
    </ul>
</div> 
```

**CSS**

```
#top {
    height:50px;
    background:white;
    border-top-left-radius: 4px;
    border-bottom-left-radius: 4px;
    border-top-right-radius: 4px;
    -webkit-border-top-left-radius: 4px;
    -webkit-border-bottom-left: 4px;
    -webkit-border-top-right: 4px;
    -moz-border-radius-topleft: 4px;
    -moz-border-radius-bottomleft: 4px;
    -moz-border-radius-topright: 4px;
    -webkit-box-shadow: 0px 0px 18px rgba(50, 50, 50, 0.79);
    -moz-box-shadow:    0px 0px 18px rgba(50, 50, 50, 0.79);
    box-shadow:         0px 0px 18px rgba(50, 50, 50, 0.79);
    border: 5px solid black;
    border-bottom:none;
}
#topsocial{
    width:30%;
    padding: 5px;
    border-bottom-left-radius: 50% 75%;
    border-bottom-right-radius: 50% 75%;
    background:white;
    overflow:hidden;
    float:right;
    position: relative;
    -webkit-box-shadow: 0px 8px 16px rgba(50, 50, 50, 0.79);
    -moz-box-shadow:    0px 8px 16px rgba(50, 50, 50, 0.79);
    box-shadow:         0px 8px 16px rgba(50, 50, 50, 0.79);
    border: 5px solid black;
    border-top: none;
} 
```

我还有另一个问题，如何从顶部到第二个 div #topsocial 退出或删除 box-shadow？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:45:51.097

提供标记和 CSS 将有助于获得更有用的答案，但第一个建议是创建一个新的 <div>，它将包含登录表单和 850 像素环绕 <div> 内的圆角边框。然后在内部 <div> 上设置宽度，即 facebook 和 twitter 块的左侧，但稍微重叠边框。然后将 30% <div> 扩展到顶部。

更新：http: [//jsfiddle.net/zFa9n/](http://jsfiddle.net/zFa9n/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:47:24.387

您可以将第一个设置为`<div>`带边框的框的大小，第二个`<div>`可以放置在绝对位置并覆盖边框。

我制作了一个[jsFiddle](http://jsfiddle.net/Calou/NpxZN/)来向您展示如何做到这一点。我们没有您的 HTML，所以无论如何我希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T02:49:20.223

我只对您的**CSS**代码进行了一些更改，该代码适用于任何屏幕宽度，并为您提供所需的结果，希望您喜欢。

```
#top {
    height:50px;
    background:white;
    border: 5px solid black;
    border-top-left-radius: 4px;
    border-bottom-left-radius: 4px;
    border-top-right-radius: 4px;
    -webkit-border-top-left-radius: 4px;
    -webkit-border-bottom-left: 4px;
    -webkit-border-top-right: 4px;
    -moz-border-radius-topleft: 4px;
    -moz-border-radius-bottomleft: 4px;
    -moz-border-radius-topright: 4px;
    -webkit-box-shadow: 0px 0px 18px rgba(50, 50, 50, 0.79);
    -moz-box-shadow:    0px 0px 18px rgba(50, 50, 50, 0.79);
    box-shadow:         0px 0px 18px rgba(50, 50, 50, 0.79);
}

#topsocial{
    position: relative;
    top:-5px;
    width:30%;
    float:right;
    padding: 5px;
    border: 5px solid black;
    border-top: none;
    border-bottom-left-radius: 4px;
    border-bottom-right-radius: 4px;
    -moz-border-radius-bottomleft: 4px;
    -moz-border-radius-bottomright: 4px;
    background:white;
    overflow:hidden;
    -webkit-box-shadow: 0px 8px 16px rgba(50, 50, 50, 0.79);
    -moz-box-shadow:    0px 8px 16px rgba(50, 50, 50, 0.79);
    box-shadow:         0px 8px 16px rgba(50, 50, 50, 0.79);
} 
```

# lotus-notes - Domino 打印页边距

> ID：11317898
> 
> 赞同：1
> 
> 时间：2012-07-03T19:33:16.467
> 
> 标签：lotus-notes, lotus-domino

有什么办法可以调整上下打印边距？

我尝试过@Formula 和 Lotusscript，但没有成功。我希望有某种我还没有找到的技巧来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:27:03.010

不幸的是，没有可以让您指定边距的 Print 方法。您可以使用公式自动打开“打印”对话框`@Command( [FilePageSetup] )`。

过去，我向用户展示了一个对话框，向用户解释他们需要调整边距，然后使用 FilePageSetup 命令允许他们这样做。不理想，但它帮助了用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:31:04.403

表单是一个文档，因此文档中的相同方法应该可以工作。

选择文件-> 文档属性（或应用程序属性）。您可以在那里分配页眉和页脚。

您可以从信息中心获得更多详细信息。

[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.notes85.help.doc%2Fprt_create_header_footer_t.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.notes85.help.doc%2Fprt_create_header_footer_t.html)

# xml - 检查内部条件

> ID：11317899
> 
> 赞同：1
> 
> 时间：2012-07-03T19:33:16.623
> 
> 标签：xml, xslt, xslt-1.0, xslt-2.0

如果我定义的变量不等于特定字符串，我想取值。在这里，如果变量 'name' 、 'address' 和 'city' 分别不等于 'Tom' 、 'Street' 和 'CityStreet' ，我想取它们的值，用“-”分隔。那可能吗？

```
xsl:attribute name='person'>
        <xsl:value-of separator="-" select=
    "($name, $address,
     $city)" />
        </xsl:attribute> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:45:59.803

您可以对变量使用谓词：

```
<xsl:attribute name='person'>
    <xsl:value-of separator="-" select="($name[.!='Tom'], $address[.!='Street'],$city[.!='CityStreet'])"/>          
</xsl:attribute> 
```

或者如果您不想要一个空属性，则为：

```
<xsl:if test="$name != 'Tom' and 
    $address != 'Street' and 
    $city != 'CityStreet'">
    <xsl:attribute name="person">
        <xsl:value-of separator="-" select="($name[.!='Tom'], $address[.!='Street'],$city[.!='CityStreet'])"/>
    </xsl:attribute>
</xsl:if> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T01:50:20.457

**使用**：

```
<xsl:if test=
  "not($name eq 'Tom' and $address eq 'Street' and $city eq 'CityStreet')">
  <xsl:attribute name="person">
    <xsl:value-of separator="-" select=
      "($name[. ne 'Tom'], $address[. ne 'Street'], $city[. ne 'CityStreet'])"/>
  </xsl:attribute>
</xsl:if> 
```

# php - 需要帮助使用 PDO 插入 MySQL 数据库表

> ID：11317902
> 
> 赞同：1
> 
> 时间：2012-07-03T19:33:27.973
> 
> 标签：php, sql, pdo

数据库表仅包含查询尝试插入的四个字段。由于某种原因，我收到错误：查询失败：SQLSTATE [HY093]：无效的参数号：未定义参数。

我通过回显 foreach 循环的输出来解决问题，它总是返回四个项目，我不确定哪个参数没有定义。我还尝试在 $sql 字符串中包含字段名称以及不包含它们。无论哪种方式，结果都相同。如果可以的话请帮忙。

```
<?php
class DB {
        private $_conn;

        public function openDB() {
                $dsn = "mysql:host=localhost;dbname=news";
                $username = "root";
                $password = "password";

                try {
                        $this->_conn = new PDO( $dsn, $username, $password );
                        $this->_conn->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
                } catch ( PDOException $e ) {
                        echo "Connection failed: " . $e->getMessage();
                }
        }

        public function closeDB() {
                $this->_conn = null;
        }

        public function selectData( $myQuery ) {
                $rows = $this->_conn->query( $myQuery );

                foreach ( $rows as $row ) {
                        echo "Index: " . $row['id'] . "<br />";
                        echo "Title: " . $row['title'] . "<br />";
                }
        }

        public function insertData( $tableName ) {

                $q = $this->_conn->prepare("DESCRIBE " . $tableName);
                $q->execute();
                $getFields = $q->fetchAll(PDO::FETCH_COLUMN);

                $dbFieldCount = count( $getFields );
                $implodedFields = implode( ", :", $getFields );

                //$sql = "INSERT INTO " . $tableName . " ( " . implode( ", ", $getFields ) . " ) VALUES ( :" . $implodedFields . " )";
                $sql = "INSERT INTO " . $tableName . " VALUES ( :" . $implodedFields . " )";
                echo "$sql<br />";

                try {
                        $insert = $this->_conn->prepare( $sql );

                        foreach ( $getFields as $dbKey => $dbValue ) {
                                foreach( $_POST as $formKey => $formValue ) {
                                        if ( $dbValue == 'id' ) {
                                                $insert->bindValue( '\":' . $dbValue . '\"', null, PDO::PARAM_INT );
                                                echo "$dbValue<br />";
                                                break;
                                        } else if ( is_int( $formValue ) && $dbValue == $formKey ) {
                                                $insert->bindValue( '\":' . $dbValue . '\"', $formValue, PDO::PARAM_INT );
                                                echo "$formValue<br />";
                                                break;
                                        } else if ( is_string( $formValue ) && $dbValue == $formKey ) {
                                                $insert->bindValue( '\":' . $dbValue . '\"', $formValue, PDO::PARAM_STR );
                                                echo "$formValue<br />";
                                                break;
                                        }
                                }
                        }

                        $insert->execute();
                } catch ( PDOException $e ) {
                        echo "Query failed: " . $e->getMessage();
                }
        }

}
?>
<!DOCTYPE html>
<html>
        <head>
                <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
                <title></title>
        </head>
        <body>
                <?php

                if ($_POST) {
                        $conn = new DB();
                        $conn->openDB();
                        $conn->insertData( 'login' );
                        $conn->closeDB();
                }

                ?>

                <form action="#" method="POST" name="register">
                        <label for="username">Username</label><br />
                        <input type="text" id="username" name="username"><br />
                        <label for="password">Password</label><br />
                        <input type="password" id="password" name="password"><br />
                        <label for="email">Email Address</label><br />
                        <input type="text" id="email" name="email"><br />
                        <input type="submit" value="Submit" />
                </form>

        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:41:19.010

```
$sql = "INSERT INTO " . $tableName . " VALUES ( :" . $implodedFields . " )"; 
```

在这里，您将所有列添加到 SQL 语句中，但稍后您只添加在提交表单时发送的值。您的数据库中可能有不在表单中的列，因此您提出了如下语句：

```
INSERT INTO someTable VALUES (:id, :value1, :value2) 
```

然后你只绑​​定`:id`and `:value1`，让 MySQL 对应该是什么感到困惑`:value2`。

# knockout.js - 将 knockoutjs 模型视图与来自服务器 mvc 模型的数据绑定

> ID：11317903
> 
> 赞同：1
> 
> 时间：2012-07-03T19:33:28.963
> 
> 标签：knockout.js, asp.net-mvc-4, asp.net-web-api, knockout-2.0

让我们把下面作为我的 MVC 模型类：

```
public class Candidate
{
    public string FirstName { get; set; }
    public string LastName { get; set; }        
    public string Email { get; set; }
    public int Experience { get; set; }
    public List<Technology> Technologies { get; set; }
}

public class Technology
{
    public string Technology { get; set; }
    public int ExperinceInMonths { get; set; }
} 
```

现在，我有一个返回此模态数据的 web api 方法：

```
public class CandidateController : ApiController
{
    // GET api/Candidate
    public IEnumerable<Candidate> Get()
    {
        CandidateServiceClient client = new CandidateServiceClient();

        List<Candidate> candidateData = client.GetCandidateData();

        if (candidateData == null || candidateData.Count() == 0)
            throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.NoContent));

        return candidateData.AsEnumerable(); 
    }
     ... 
```

使用 Knockout 假设我有这样的 javascript：

```
 $.get(url, function (result) {
           candidateViewModel.candidates(result);
           ko.applyBindings(candidateViewModel); 
       }); 
    }); 
```

> ```
>  var candidateViewModel = { candidates:  ko.observableArray([])}; 
> ```

在此背景下，我的问题是如何构建具有嵌套集合的淘汰视图模型？（如本例中的技术集合。）

寻找类似的东西..

var myViewModel = { firstName: ko.observable(''), lastName: ko.observable(''), .. };

任何帮助是极大的赞赏...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T09:52:20.183

在我看来，你应该使用 ko.mapping.fromJS，以防模型变得非常复杂，你不需要改变你的视图模型。

参考： http: [//knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:53:02.853

这个输出非常混乱，但它说明了这个想法。这里的事情是在你的 javascript中拥有`Candidate`和模型，并用来调用它们的构造函数。这是[小提琴](http://fiddle.jshell.net/UaPUN/3/)。注意：如果您不打算更改模型的值，则模型不需要具有 observables 属性。`Technology``arrayMap`

楷模：

```
var Technology = function(name, monthsExperience){
    this.name = ko.observable(name);
    this.monthsExperience = ko.observable(monthsExperience);
};

var Candidate = function(data){

    this.firstName = ko.observable(data.FirstName || '');
    this.lastName = ko.observable(data.LastName || '');
    this.email = ko.observable(data.Email || '');
    this.experience = ko.observable(data.Experience || '');

    this.technologies = ko.observableArray(ko.utils.arrayMap(data.Technologies || [],
        function(i){
            return new Technology(i.Technology, i.ExperinceInMonths);
        }));
}; 
```

主视图模型：

```
var App = function(initialData){
    this.candidates = ko.observableArray(ko.utils.arrayMap(initialData|| [],
        function(i){
            return new Candidate(i);
        }));
}; 
```

# php - 需要帮助从 mysql_fetch_array() 订购数据

> ID：11317920
> 
> 赞同：3
> 
> 时间：2012-07-03T19:34:13.103
> 
> 标签：php, mysql, sql, database, arrays

我很难组织从 mysql_fetch_array() 获得的数据。

我有一个看起来像这样的数据库表：

```
+---------------------+------------------+---------------+--------+---------+
| date                | name             | indexed_pages | nameID | entryID |
+---------------------+------------------+---------------+--------+---------+
| 2012-06-15 21:18:06 | site1.com        |           200 |      1 |       1 |
| 2012-06-15 21:18:10 | site2.com        |            25 |      2 |       1 |
| 2012-06-15 21:18:13 | site3.com        |            12 |      3 |       1 |
| 2012-06-15 21:18:16 | site4.com        |             8 |      4 |       1 |
| 2012-06-15 21:18:19 | site5.com        |             2 |      5 |       1 |
| 2012-06-16 00:11:12 | site1.com        |           191 |      1 |       2 |
| 2012-06-16 00:11:21 | site2.com        |            25 |      2 |       2 |
| 2012-06-16 00:11:30 | site3.com        |            12 |      3 |       2 |
| 2012-06-16 00:11:44 | site4.com        |             8 |      4 |       2 |
| 2012-06-16 00:11:51 | site5.com        |             2 |      5 |       2 |
| 2012-06-18 10:20:47 | site1.com        |           191 |      1 |       3 |
| 2012-06-18 10:20:52 | site2.com        |            25 |      2 |       3 |
| 2012-06-18 10:20:56 | site3.com        |            12 |      3 |       3 |
| 2012-06-18 10:21:00 | site4.com        |             8 |      4 |       3 |
| 2012-06-18 10:21:04 | site5.com        |             2 |      5 |       3 |
+---------------------+------------------+---------------+--------+---------+ 
```

我需要按以下方式在 Google 折线图中对结果进行排序：

```
['date', 'site1_entryID=1', 'site2_entryID=2', 'site3_entryID=3', (...)],"; 
```

问题是我无法管理我生成的数组。我正在使用以下代码：

```
mysql_connect("host_here", "username_here", "pass_here") or die(mysql_error());
mysql_select_db("my_database") or die(mysql_error());
$query = "SELECT * FROM pages";
$result = mysql_query($query);
$row = mysql_fetch_array($result); 
```

在此之后，我需要为 entryID = 1 的每个站点回显 indexed_pa​​ges 的数量。

我不知道这个描述是否令人困惑，但我已经尝试了几乎所有方法，但无法从数组中组织数据来满足我需要做的事情。请帮忙！

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T19:36:27.153

不要使用`select *`，这很懒惰，而且您只能按照数据库决定生成它们的顺序来接受这些字段。

按照您想要的顺序指定您想要的字段：

```
SELECT date, name, indexed_pages, etc... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:03:53.480

我认为最简单的查询是：

```
$result= mysql_query("SELECT name, index_pages, entryID from table_name WHERE entryID =    
1");
while($row=mysql_fetch_array($result)){
    echo "$row[name]";
    echo "$row[index_pages]";
    echo "$row[entryID]";
} 
```

试试这个。可能会有一些错误。因为我开发得很快。并将 table_name 替换为您的。

或者您可以将其显示在表格中：

```
echo "<table>";
echo "<tr><td>Sit Name</td>";
echo "<td>Page Name</td>";
echo "<td>EntryID</td>";
echo "</tr>";
while($row=mysql_fetch_array($result)){
    echo "<tr>";
    echo "<td>$row[name]</td>";
    echo "<td>$row[index_pages]</td>";
    echo "<td>$row[entryID]</td>";
    echo "</tr>";
}
echo "</table>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:37:23.570

```
SELECT date, name, indexed_pages  
FROM pages 
where entryID=1 
order by date asc ,name asc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T19:46:25.187

不确定这是否有帮助

```
 mysql_connect("host_here", "username_here", "pass_here") or die(mysql_error());
mysql_select_db("my_database") or die(mysql_error());
$query = "SELECT * FROM pages";
$result = mysql_query($query);
$data[]='date';
while($row = mysql_fetch_assoc($result)){
   $name=substr($row['name'], -4);
   $data[]= $name."_entryID=".$row['entryID'];
} 
```

有点蛮力的方法。

# c++ - cvExtractSURF 抛出异常，cvCreateSeq 中输入数组 ( ) 的大小不正确

> ID：11317921
> 
> 赞同：1
> 
> 时间：2012-07-03T19:34:19.900
> 
> 标签：c++, objective-c, macos, opencv

我在 Mac 上将以下代码与 OpenCV 一起使用。以下函数从另一个函数接收图像文件的路径，并且工作正常。但是，cvExtractSURF 会抛出一个异常，说明：

> OpenCV 错误：cvCreateSeq 中输入数组 () 的大小不正确，文件 >/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_tarb>alls_ports_graphics_opencv/opencv/work/OpenCV-2.4.1/modules/core/src/ datastructs.cpp，第 372 行终止称为抛出异常

代码如下：

```
- (int)extractFromImagePath:(NSString*)pathToFile{
[self.statusText setStringValue:@"image received"];
NSLog(@"Path: %@",pathToFile);
// Path: /Users/loco/Desktop/testimage.png

const char * path = [pathToFile UTF8String];
IplImage* image = cvLoadImage(path, CV_LOAD_IMAGE_GRAYSCALE );
cv::Mat im = cv::imread(path,0);
if(im.data == NULL) 
{
    std::cout<<"Unable to read "<<path<<std::endl;
    return 0;
}    

/* extract the SURF keypoints/descriptors of an image */
// presumes a previously declared IplImage *image
CvSeq *keypoints = NULL;
CvSeq *descriptors = NULL;
CvMemStorage *storage = cvCreateMemStorage(0);
cvExtractSURF(image, NULL, &keypoints, &descriptors, storage, cvSURFParams(0, 600));
// OpenCV Error: Incorrect size of input array () in cvCreateSeq, file /opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_graphics_opencv/opencv/work/OpenCV-2.4.1/modules/core/src/datastructs.cpp, line 372
// terminate called throwing an exception

[self.statusText setStringValue:@"writing to files"];

/* build a path to save a file in the documents directoy */
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docs = [paths objectAtIndex:0];
NSString *xmlpath_kp = [docs stringByAppendingPathComponent:@"keypoints.xml"];
NSString *xmlpath_desc = [docs stringByAppendingPathComponent:@"descriptors.xml"];

/* serialize to xml and save to disc */
cvSave([xmlpath_kp UTF8String], keypoints);
cvSave([xmlpath_desc UTF8String], descriptors);

[self.statusText setStringValue:@"done"];
/* don't forget your cleanup ;) */
cvReleaseImage(&image);
cvClearMemStorage(storage);
return 1;
} 
```

有人知道发生了什么吗？任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:13:19.303

我测试了你的部分代码抛出错误。以下代码没有给出任何错误，只需检查一下。

```
IplImage* image = cvLoadImage("C:\\Koala.jpg",CV_LOAD_IMAGE_GRAYSCALE);
CvSeq* kp_pns;
CvSeq* desct;
CvSURFParams pams;
pams.hessianThreshold=10;
pams.nOctaveLayers=4;
pams.nOctaves=3;
pams.upright = true;
CvMemStorage *storage = cvCreateMemStorage(0);
cvExtractSURF(image,NULL,&kp_pns,&desct,storage,pams,0); 
```

我能够毫无错误地提取冲浪关键点。我希望错误会得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:24:47.193

调整 SURF 的 hessianThreshold；他们说来自OpenCV；

> **hessianThreshold**仅提取 hessian 大于该值的特征。好的默认值是~300-500（可能取决于图像的平均局部对比度和清晰度）。用户可以根据其 hessian 值和其他特征进一步过滤掉一些特征。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:11:02.390

正如 Andrey Kamaev 指出的，这是 2.4.0 和 2.4.1 中的一个错误。升级确实解决了它。

# silverlight - 在 Silverlight 中控制锚定

> ID：11317924
> 
> 赞同：1
> 
> 时间：2012-07-03T19:34:34.767
> 
> 标签：silverlight

这可能是一个有点愚蠢的问题，但我不确定还能尝试什么，所以想寻求一些帮助。我的问题是 Silverlight 中的锚定控件。

我有一个位于控件中的网格（C1FlexGrid）。该控件在页面中使用，我只是希望网格大小由浏览器窗口的大小确定。我想为它设置一个最小尺寸，但允许它在用户展开浏览器窗口时垂直和水平扩展。在 WinForms（这是我习惯的）中，这很容易。

然而，在 Silverlight 中，这让我很头疼。是否有可能让它按照我想要的方式行事？

我已将控件宽度和高度设置为自动，并指定了一些设计宽度/高度。然后将用户控件放置到页面上，并将控件和页面宽度/高度都设置为自动。

当网格加载它的数据时，几百行，它会根据事实自动调整网格的大小，因为它有 200 行，即变得很长。

编辑

这是来自一个简单示例的一些 XAML：

```
<navigation:Page 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:navigation="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Navigation"
    xmlns:c1="http://schemas.componentone.com/winfx/2006/xaml" x:Class="Optimize.Client.Presentation.AboutView"
    mc:Ignorable="d" d:DesignWidth="640" d:DesignHeight="480"
    Title="About" 
    x:Name="AboutPage"
    Style="{StaticResource PageStyle}">

    <Grid x:Name="LayoutRoot" Background="White" MinWidth="300" MinHeight="300">
        <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
                <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <c1:C1FlexGrid Margin="10" BorderBrush="Red" BorderThickness="1" Width="Auto" Height="Auto" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch">
            <c1:C1FlexGrid.Columns>
                <c1:Column Header="User Group" Width="*" /> 
            </c1:C1FlexGrid.Columns>
        </c1:C1FlexGrid>
    </Grid>

</navigation:Page> 
```

我想要的只是页面上的网格。该页面的最小尺寸为 300x300。当浏览器窗口展开时，我希望页面随之展开，网格也随之展开，这样网格的所有边框都是从上/下/左/右开始的 10。我尝试将 * 指定为布局网格的宽度/高度，但它仍然无法正常工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:10:11.727

`Auto`调整大小的意思是“请根据我的内容调整我的大小”。这不会限制您对父控件或浏览器的大小。

您想要`Star`（*）大小，这基本上意味着“在扣除任何固定或自动列/行之后，请根据星号大小的比率在任何星号大小的列/行之间分配剩余空间”。

您还希望您的容器指定 Horizo​​ntalAlignment="Stretch" 和 VerticalAlignment="Stretch" 以便可以确定分配给星型列/行的空间量（否则它将自行折叠）。

如果您可以发布您的 XAML，我可以更具体。

# wpf - 在没有连接传感器的情况下在 Kinect Studio 中播放

> ID：11317926
> 
> 赞同：5
> 
> 时间：2012-07-03T19:34:43.220
> 
> 标签：wpf, kinect

我想知道当 Kinect 传感器**未**连接到计算机时，是否有人设法播放来自 Kinect Studio 的录音（.XED 文件），或者是否有可能？连接传感器后，播放按预期工作。

快速的谷歌搜索并没有产生很多结果，我在[文档](http://msdn.microsoft.com/en-us/library/jj131036.aspx)中只能找到：

“Kinect Studio 必须与 Kinect for Windows 应用程序一起使用”。

对于那些想知道为什么的人：我要离开一周，因为我无法随身携带传感器，但我希望继续开发 - 我希望我可以制作一组录音来陪伴我度过这一周......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T02:37:20.843

请参阅此链接：http: [//msdn.microsoft.com/en-us/library/hh855396.aspx](http://msdn.microsoft.com/en-us/library/hh855396.aspx) 它说，

KinectStudio 工具可以处于四种状态：

断开连接，没有打开文件 - 空闲 断开连接，打开文件 - 在 Kinect Studio 中播放文件 连接，没有打开文件 - 在 Kinect Studio 中镜像支持 Kinect 的应用程序传感器输出并记录它 连接，打开文件 - 可以将文件播放到支持 Kinect 的应用程序。

我确实设法在没有 kinect 传感器的情况下通过 kinect studio 播放我记录的数据（.xed 文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-03T11:29:33.760

比赛迟到了，但我想我找到了解决办法。

转到设备管理器 -> 操作 -> 添加旧硬件 -> 手动选择 Kinect 设备并安装。

重新启动 Kinect Studio，您将能够连接到服务和播放，而无需物理连接到 Kinect。

# php - 如何在没有完整路径的情况下压缩文件夹

> ID：11317928
> 
> 赞同：7
> 
> 时间：2012-07-03T19:34:45.533
> 
> 标签：php, linux, zip, directory

首先，如果问题是针对其他堆栈站点的，我不知道哪个是发布此问题的正确 stackExchange 站点，请删除我的问题。

**现在让我们谈谈这个问题：**这种情况是我有一个文件位于：`/home/user/public_html/folder-one/folder-two/folder-three/file.php`并且该文件必须创建文件夹`/folder-one`的存档，其中包含`/folder-one`. 我使用系统函数（exec()、shell_exec() 或 system()）创建存档，它运行良好。我的代码是：

```
<?php
$output = 'zip -rq my-zip.zip /home/user/public_html/folder-one -x missthis/\*';
shell_exec($output);
?> 
```

但是当我下载并打开存档时，存档将子文件夹包含为`/home`; `/user`; `/public_html`但是这个文件夹完全不需要，我想知道如何在没有它们的情况下创建 zip。

当我尝试使用这样的东西`$output = 'zip -rq my-zip.zip ../../../folder-one -x missthis/\*';`但是当我打开存档（在基于 Windows 7 的操作系统上）时，文件夹的名称是`../folder-one`

**后记：如果有人给我更正** `$output` **基于 Windows 的托管计划的制作拉链会更好。**

最好的问候，乔治！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-03T20:08:45.520

默认情况下，zip 将存储相对于当前目录的完整路径。所以你必须在运行之前`cd`进入：`public_html``zip`

```
$output = 'cd /home/user/public_html; zip -rq my-zip.zip folder-one -x missthis/\*';
shell_exec($output); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-22T22:03:39.587

有一种更好的方法，无需执行`cd`. 如此处所述[，](https://stackoverflow.com/a/9710181/4501084)可以选择忽略完整路径。这是`-j`或`--junk-paths`。所以你可以这样做：

```
<?php
$output = 'zip -jrq my-zip.zip /home/user/public_html/folder-one -x missthis/\*';
shell_exec($output);
?> 
```

# php - 传递在一个 PHP 文件中收集的参数以在另一个 php 中作为电子邮件发送

> ID：11317930
> 
> 赞同：1
> 
> 时间：2012-07-03T19:34:52.227
> 
> 标签：php, forms

我正在使用“？”从注册 URL 中收集参数 像这样，

```
.../signup.php?id=6489 
```

现在我以这种方式在我的 php 中收集这个“id”，

```
<?php
    $id = $_GET['id'];
    // echo $id;
?> 
```

现在我想在另一个 PHP 文件中使用这个 $id - code_exec.php，其中有一个 mail() 函数，它通过电子邮件发送这个和从表单收集的其他参数。现在从表单收集的参数效果很好，它们都在电子邮件中正确显示。但是，此 ID 变量没有。我已经使用这个在 code_exec.php 中包含了 signup.php，

```
include 'signup.php'; 
```

但它似乎不起作用。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:40:37.600

从它的声音来看，你去`signup.php?id=6489`，填写一个提交给你的表格，`code_exec.php`你想得到 ID `code_exec.php`。

如果是这种情况，您可以使用该 ID 在注册页面中包含一个隐藏的表单字段。

```
<input type="hidden" name="id" value="<?php echo $_GET['id']; ?>" /> 
```

就像所有其他字段一样，它将与表单一起提交。确保清理您的输入！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:38:21.160

如果不显示 signup.php 中的内容以及您如何使用该 $id 值，我们将无能为力。但显而易见的一个：如果 signup.php 的东西在一个函数中工作，那么你必须遵守 PHP 的范围规则，并且必须创建`$id`一个全局的，例如。

```
$id = $_GET['id'];

function email() {
   global $id;
   blah blah blah
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:38:32.073

```
// foo.php
$id = '12345';
include 'bar.php';

// bar.php
echo $id; 
```

将输出 12345。包含/要求调用范围内的任何变量都将在包含的文件中可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T19:40:02.000

将隐藏的输入值添加到您的表单并为其分配传递的 id 值，如下所示：

```
<input type="hidden" id="id" name="id" value="<?php echo $id ?>" /> 
```

# java - 如何使用Java查找进程的程序和相关的dll？

> ID：11317940
> 
> 赞同：2
> 
> 时间：2012-07-03T19:35:25.497
> 
> 标签：java, dll, process

如何让所有进程及其各自的程序和 dll 在 Windows 中运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:05:06.840

There's no easy way to do that, as Java doesn't have an interface to Windows API. The easiest way I can think of is this:

```
 Process proc = Runtime.getRuntime().exec("tasklist /M");
    InputStream is = proc.getInputStream());
    // and now read and parse that long output, listing all processes and DLLs... 
```

This does require some work on the parsing, but it saves you from getting out of the Java world.

# c# - .NET 错误处理：try/catch VS 事件 VS 返回值/状态字段

> ID：11317943
> 
> 赞同：7
> 
> 时间：2012-07-03T19:35:39.203
> 
> 标签：c#, .net, visual-studio-2010, xamarin.android

我现在正处于跨平台移动应用程序开发的一个非常关键的十字路口，并且真的可以使用一些专业知识（比如哇）。

为了提供一些上下文（我希望这可能有助于回答），我正在使用 VS2010U（不是 MonoDevelop，但它是针对 IOS），基于方便的 MonoCross 框架在 .NET 中开发一个移动应用程序。第一个目标平台是 Android，然后是 IOS 和 Windows Phone 的“端口”（如果我做对了，就不是真的）。

现在我已经奠定了坚实的基础，包括业务逻辑、数据访问层、数据库、REST Web 服务等，我正在经历并尝试处理一些错误，但我不确定最好的方法是什么是。

有人告诉我，try-catch 块可能会影响性能（在这种情况下这很重要），
这是真的吗？我应该谨慎地使用它们，还是只是在可能引发异常的地方拍打它们（我有点想在我所有的 SQLite API 调用中使用它们，因为我不知道他们到底在做什么）。

使用事件回调对错误处理来说是一件坏事吗？出于性能原因，我被建议尽可能使用这些，而不是 try-catch，但我不想破坏任何设计原则和范式，最终导致到处都是草率的代码。

第三个选项是状态字段和返回值，它的开销最少，但处理起来非常烦人。

那么你们怎么看？我想我只是在寻找一些大体方向，也许是关于在哪里和何时使用它们的一些建议，以及我最有可能遗漏的任何其他技术。如果需要更多详细信息，请告诉我，因为我很乐意提供。

感谢您为此抽出一些时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T19:54:11.987

我认为让你的程序变得丑陋的原因是到处都在进行异常处理，尽管我们有很好的异常处理模式。

这些将在您的代码库中发生的功能称为横切关注点，例如日志记录、安全性、审计、异常处理和......

您可以在这里找到好的模式[http://msdn.microsoft.com/en-us/library/ee658105.aspx#ExceptionManagement](http://msdn.microsoft.com/en-us/library/ee658105.aspx#ExceptionManagement)。

值得一提的是，我不建议按照 Microsoft 文档中的建议使用 EntLib。

如果您寻找面向方面的编程（AOP），您会找到很好的资源。最后的提示是实现将使用依赖注入/IoC 框架来解决这些问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T20:18:37.457

> 我有点想在我所有的 SQLite API 调用中使用它们，因为我不知道他们到底在做什么。

如果你说你正在**使用**一个库来与 SQLite 交互，那么这个库 API 很可能已经在某些错误情况下抛出异常。当然，在这种情况下，您应该在这些调用周围使用 try/catch 并处理这些错误情况。

当您自己没有编写该代码时，当您使用其他人的库时，总是会出现这种情况。

如何处理这些错误是您的决定。

我的建议：

*   在大多数情况下，我**反对回调/事件**。当导致错误的 API 是异步的并且程序流程已经不言自明时，应该主要使用这些。
*   抛出异常确实比状态码/返回值慢，但它可以安全地用于当今任何移动平台上，在应用程序不是时间关键的任何情况下。**手机游戏使用异常抛出，它们是时间关键的**（有点）。
*   抛出异常提供了更好的代码可读性——在我看来，这是一个主观的事情——并且是在发生错误时跳出当前上下文的好方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T19:44:52.000

`try/catch`当你想*捕捉预期的异常*时使用incase 。通常通过异常确定工作流不是好的选择，但它可能是 IO 操作的唯一选择。例如，您写入某个突然失去连接的外部设备。在这种情况下，您的程序将收到异常，但必须像处理通常的错误一样处理它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T20:34:32.170

有时理论与特定的实现并不相符，但我想 Mono 的这些概念已经存在一段时间了。

适当的运行时总是有利于无异常情况下的性能。理想情况下，在没有抛出异常的情况下，try/catch 块应该像 try 块的内容自己执行一样执行，而 try/finally 块应该像 try 和 finally 块的内容一样执行按顺序执行。当使用 CIL 字节码解释器时，通常不可能像我在这里提到的那样在没有开销的情况下执行这些操作。然而，一个像样的 JIT 或 AOT 编译器（就像你使用 Mono 获得的那样）实际上生成的代码在无异常情况下运行的速度与省略 try/catch/finally 构造时一样快。¹

如果您改为选择错误代码策略，您的应用程序将最终执行部分错误处理代码，即使没有发生错误（将额外参数传递给方法，计算和测试返回代码等）。因此，您的目标是将异常处理的使用限制在真正的异常情况下。这种策略导致了一个健壮的应用程序（正确的错误处理），而不会降低性能关键成功案例的性能。

¹ 对于嵌入在数值计算循环主体中的 try/finally 块而言，这并不是 100% 准确的，但在正确用于处理异常情况时，它对性能产生明显影响的可能性在这一点上几乎为零。具体来说，与没有 try/finally 块的相同方法相比，为 X86 编译的 try/finally 块 JIT 将包含类似于 push/pop/jmp（本地分支）指令的代码。这比调用定义为的方法的开销要小：`public static void Foo() {}`

# vba - Word 文档中的 getElementByID

> ID：11317944
> 
> 赞同：2
> 
> 时间：2012-07-03T19:35:41.677
> 
> 标签：vba, ms-word

我正在编写一些操作 HTML 文档的 VBA 代码。文档以文本形式打开，以便可以处理 HTML。因此：

```
Dim oWordDoc As Word.Document
Set oWordDoc = Documents.Open(FileName:=strFolder & "\" & strFileName, _
    Format:=wdOpenFormatText) 
```

HTML 包含一些我希望能够通过 ID 访问的元标记。这是我试图尝试的代码：

```
Dim objHtmlDoc As HTMLDocument
Dim objMetaTag As HTMLMetaElement
Set objHtmlDoc = oWordDoc
Set objMetaTag = objHtmlDoc.getElementById("keywords") 
```

但是，我在该行收到类型不匹配错误：

```
Set objHtmlDoc = oWordDoc 
```

我尝试将 objHtmlDoc 设置为 oWordDoc.content，并得到相同的错误。无论如何，我可以将 Word.Document 对象转换为 HTMLDocument 对象，以便我可以将 HTMLDocument 设置为 Word.Document？还是我必须开发自己的 getElementbyID 函数来执行此操作？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:58:49.007

我建议的替代方案。

```
Sub Sample()
    Dim objHtmlDoc As HTMLDocument
    Dim objMetaTag As HTMLMetaElement
    Dim IE As Object

    Set IE = CreateObject("InternetExplorer.Application")
    IE.Visible = True

    IE.navigate "C:\Sample.Htm"

    Set objHtmlDoc = IE.Document
    Set objMetaTag = objHtmlDoc.getElementById("keywords")
End Sub 
```

# python - 使用 ffprobe '-show_format_entry' 选项

> ID：11317946
> 
> 赞同：2
> 
> 时间：2012-07-03T19:35:46.497
> 
> 标签：python, ffprobe

几天来，我一直在寻找如何将“-show_format_entry”合并到我的 Python 脚本中，该脚本使用 ffprobe 从目录中的所有音频和视频文件中提取元数据。但是，我不希望格式返回的所有内容。

我当前的脚本：

```
 #! usr/bin/python
import os, sys, subprocess, shlex, re, fnmatch
from subprocess import call

def probe_file(filename):
    cmnd = ['ffprobe', '-show_format', ,'-pretty', '-loglevel' filename]
    p = subprocess.Popen(cmnd, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    out, err =  p.communicate()
    print out

mp3box=[]
for root, dirs, files in os.walk('/home/username/Music'):
  for fname in files:
    name,ext=os.path.splitext(fname)
    if fname.lower().endswith('.mp3'):
        mp3box.append(fname)
        probe_file(fname) 
```

输出类似于：

```
[FORMAT]
filename=test.mp3
nb_streams=1
format_name=mp3
format_long_name=MPEG audio layer 2/3
start_time=0:00:00.000000
duration=0:03:32.943917
size=2.437 Mibyte
bit_rate=95.999 Kbit/s
TAG:album=compliments of grimriper2u@yahoo.com
TAG:artist=Charley Barnet, V=Trudy Richard
TAG:disc=sound changed and copyright for public Domain. not for resale.
TAG:genre=Jazz
TAG:TLEN=000000212342
TAG:title= Ill Wind 
TAG:date=1949
[/FORMAT]

[FORMAT]
filename=barnet.mp3
nb_streams=1
format_name=mp3
format_long_name=MPEG audio layer 2/3
start_time=0:00:00.000000
duration=0:03:32.943917
size=2.437 Mibyte
bit_rate=95.999 Kbit/s
TAG:album=compliments of grimriper2u@yahoo.com
TAG:artist=Charley Barnet, V=Trudy Richard
TAG:disc=sound changed and copyright for public Domain. not for resale.
TAG:genre=Jazz
TAG:TLEN=000000212342
TAG:title= Ill Wind 
TAG:date=1949
[/FORMAT] 
```

我想要的是能够使用通用 ffprobe 选项“-show_format_entry”并指定“-show_format_entry 文件名”、“-show_format_entry 持续时间”、“-show_format_entry 大小”以仅获取输出中的文件名、持续时间和大小.

我还在 cmnd 中的 'filename' 之后尝试了 grep|duration 以隔离输出中的这些值，但它不起作用。另外，如果可以的话，我想去掉输出中的 [FORMAT][/FORMAT] 标签，但这并不是完全必要的。非常感谢任何反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-31T13:32:58.590

要格式化输出，请使用该`-of`选项。其中有几个是可用的，INI 风格、平面、JSON。有关详细信息，请参阅[http://www.ffmpeg.org/ffprobe.html#Writers](http://www.ffmpeg.org/ffprobe.html#Writers)。

```
$ ffprobe -show_entries format=filename,size,duration -of json -i DSC_2309.MOV 2>/dev/null
{
    "format": {
        "filename": "DSC_2309.MOV",
        "duration": "14.139125",
        "size": "19488502",
        "tags": {

        }
    }
}

$ ffprobe -show_entries format=filename,size,duration -of flat -i DSC_2309.MOV 2>/dev/null
format.filename="DSC_2309.MOV"
format.duration="14.139125"
format.size="19488502"

$ ffprobe -show_entries format=filename,size,duration -of ini -i DSC_2309.MOV 2>/dev/null
# ffprobe output

[format]
filename=DSC_2309.MOV
duration=14.139125
size=19488502

[format.tags] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:00:20.587

这对我在 Windows 7 上使用 FFProbe 1.1.3 有效：

```
ffprobe -show_entries format=filename,size,duration -i d:\demos\demo1.mp3 2>NUL 
```

FFProbe 文档[http://ffmpeg.org/ffprobe.html](http://ffmpeg.org/ffprobe.html)声明 show_format_entry 选项已被弃用，而是使用 show_entries 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T20:53:46.147

这可能不是最优雅的解决方案，但您可以在打印之前过滤线条。代替

```
print out 
```

你可以有类似的东西

```
for line in out.split('\n'):
    line = line.strip()
    if (line.startswith('filename=') or
        line.startswith('duration=') or
        line.startswith('size=')):
        print line 
```

# jquery - 淡入淡出问题！一旦 div 不再超过元素，使 div 淡入

> ID：11317953
> 
> 赞同：1
> 
> 时间：2012-07-03T19:36:29.367
> 
> 标签：jquery, toggle

我目前有两个 div “#Header_Info”和“article”

文章是在页面上显示信息的静态 div，#Header_Info 是扩展以显示额外信息的 div，但是当 #Header_Info 扩展时它会覆盖文章，所以我在其他 div 扩展它之前使文章淡出，但问题是当您再次单击该按钮时，文章会在#Header_Info 折叠之前出现，我可以弄清楚我哪里出错了。

这是我的代码：

```
$('.address a').click(function () {
    $("article").fadeToggle("fast", function () {
        $('#Header_Info').slideToggle('slow', function () {
            $(".address a").text($(this).is(':visible') ? "Hide Information" : "Address & Opening Hours");
        });
    });
}); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:33:24.283

您可以尝试以相同的速度淡入淡出，同时淡入淡出

```
$('.address a').click(function () {
    $("article").fadeToggle("fast");
    $('#Header_Info').slideToggle('fast', function () {
        $(".address a").text($(this).is(':visible') ? "Hide Information" : "Address & Opening Hours");
    });
}); 
```

如果您可以提供一些相关的 html 标记，我可以创建一个用于测试的小提琴，因为此代码可能有一个错误或 2

像这样的[http://jsfiddle.net/e6wPa/](http://jsfiddle.net/e6wPa/) 最小 css

# javascript - 单击时更改拇指组的类别

> ID：11317954
> 
> 赞同：0
> 
> 时间：2012-07-03T19:36:36.643
> 
> 标签：javascript, jquery, html, css

我有一系列缩略图。默认情况下，应用了一个“p7_current”的活动类，它在该图像周围放置了一个边框。其他的都有一个“p7_inactive”类，它删除了边框。

如果在这组 6 个拇指中，最后一次单击的拇指具有“p7_current”类，其余的被分配为“p7_inactive”，我会喜欢它。

我怎么能用jquery解决这个问题？

```
<div class="p7_postcard_thumbs">
    <a href="#" target="p7_postcard_iframe"><img src="images/p7_pc1.jpg" class="p7_current" /></a>
    <a href="#" target="p7_postcard_iframe"><img src="images/p7_pc2.jpg" class="p7_inactive" /></a>
    <a href="#" target="p7_postcard_iframe"><img src="images/p7_pc3.jpg" class="p7_inactive" /></a>
    <a href="#" target="p7_postcard_iframe"><img src="images/p7_pc4.jpg" class="p7_inactive" /></a>
    <a href="#" target="p7_postcard_iframe"><img src="images/p7_pc5.jpg" class="p7_inactive" /></a>
    <a href="#" target="p7_postcard_iframe"><img src="images/p7_pc6.jpg" class="p7_inactive" /></a>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T19:39:02.083

```
$('.p7_postcard_thumbs img').click(function(e){
    $('.p7_postcard_thumbs img').removeClass('p7_current p7_inactive').not(this).addClass('p7_inactive');
    $(this).addClass('p7_current');
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/4jSCM/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:14:48.480

您实际上可以将它减少到一行，尽管它可能不那么容易阅读：

```
$('.p7_postcard_thumbs img').click(function(e){
    $(this).addClass('p7_current').closest('div').find('img').not(this).attr('class', 'p7_inactive');
}); 
```

​JSFiddle：http: [//jsfiddle.net/lucuma/4jSCM/3/](http://jsfiddle.net/lucuma/4jSCM/3/)

# php - postgres php没有给出结果集中的每一列

> ID：11317964
> 
> 赞同：3
> 
> 时间：2012-07-03T19:37:21.867
> 
> 标签：php, ajax, postgresql, pgadmin

我有一个产品主表和其他各种包含产品属性的表，查询：

```
select p.description, category.value, colour.value, wood.value, brand.value, type.value, fabric.value, model.value from product_master p, category, colour, wood, brand, type, fabric, model where p.category_code=category.category_code and p.colour_code = colour.colour_code and p.wood_code = wood.wood_code and p.brand_code = brand.brand_code and p.type_code = type.type_code and p.fabric_code = fabric.fabric_code and p.model_code = model.model_code 
```

在 pgAdmin 中工作正常，但在 php 中它只给出 2 列，我通过 AJAX 得到结果

我的 php 代码是

```
<?php
// Connecting, selecting database
$dbconn = pg_connect("host=***** dbname=*** user=*** password=***")
    or die('Could not connect: ' . pg_last_error());

// Performing SQL query
$query = ' select p.description, category.value, colour.value, wood.value, brand.value, type.value, fabric.value, model.value from product_master p, category, colour, wood, brand, type, fabric, model where p.category_code=category.category_code and p.colour_code = colour.colour_code and p.wood_code = wood.wood_code and p.brand_code = brand.brand_code and p.type_code = type.type_code and p.fabric_code = fabric.fabric_code and p.model_code = model.model_code ';
$result = pg_query($query) or die('Query failed: ' . pg_last_error());

echo pg_affected_rows($result) ;

echo "\n";

echo pg_num_fields($result);

// Printing results in HTML
echo "<table>\n";
while ($line = pg_fetch_array($result, null, PGSQL_ASSOC)) {
    echo "\t<tr>\n";
    foreach ($line as $col_value) {
        echo "\t\t<td>$col_value</td>\n";
    }
    echo "\t</tr>\n";
}
echo "</table>\n";

// Free resultset
pg_free_result($result);

// Closing connection
pg_close($dbconn);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:50:54.023

您错误地使用[了 pg_fetch_array()](http://www.php.net/manual/en/function.pg-fetch-array.php)。您不能将第二个参数作为 NULL 传递，因为它指示正在读取哪一行。

试试这个：

```
while ($line = pg_fetch_array($result)) {
    echo "\t<tr>\n";

    foreach ($line as $col_value) 
        echo "\t\t<td>$col_value</td>\n";

    echo "\t</tr>\n";
} 
```

# c# - 合并 3 个列表

> ID：11317966
> 
> 赞同：1
> 
> 时间：2012-07-03T19:37:28.963
> 
> 标签：c#

我有 3 个列表，其中包含 Book 类型的对象。

每本书都有一个名称和该书的总量。

有没有办法将所有 3 个列表合并为一个新列表，如果不同列表中有同名书籍，它们的总数将加在一起？

编辑：尝试使用 union 和 concat 但他们没有将总数加在一起

```
List<Book> completelist = booklist[0].Concat(booklist[1])
                                     .Concat(booklist[2]).ToList(); 
```

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T19:38:43.253

```
var merged = list1.Concat(list2).Concat(list3)
    .GroupBy(book => book.Name)
    .Select(g => new Book
    {
        Name = g.Key,
        Total = g.Sum(book => book.Total),
    })
    .ToList(); 
```

# php - 将每个子句添加到变量中

> ID：11317967
> 
> 赞同：0
> 
> 时间：2012-07-03T19:37:39.997
> 
> 标签：php

我有以下变量 $prod_list_contents 混合了 html 和 php 方法来显示我的数据库中的产品：

```
 $prod_list_contents .= '<div style="width:100%;">';
    $prod_list_contents .= '';

    while ($listing = tep_db_fetch_array($listing_query)) {
      $rows++;

            $prod_list_contents .= '
        <div class="cat_prod_box">
            <div class="image">
                <div class="cat_image_table">
                        <a href="' . tep_href_link(FILENAME_PRODUCT_INFO, ($cPath ? 'cPath=' . $cPath . '&' : '') . 'products_id=' . $listing['products_id']) . '">' . tep_image(DIR_WS_IMAGES_CAT . $listing['products_image'], $listing['products_name'], 255, 340, 'class="cat_image_round"') . '
                            <div class="hidden_thing">Click to View</div>
                        </a>
                </div>
            </div>
            <div class="cat_product_info" >';

            $prod_list_contents .= '<div class="span_style_num">Style: '. $listing['products_model'] . '</div>';

            $prod_list_contents .= '<div class="span_colors">Colors: red, blue</div>';
            $prod_list_contents .= '<div class="span_product_name"><a href="' . tep_href_link(FILENAME_PRODUCT_INFO, ($cPath ? 'cPath=' . $cPath . '&' : '') . 'products_id=' . $listing['products_id']) . '">' . $listing['products_name'] . '</div></a>';  

            $prod_list_contents .=  '<div class="span_price">CAD ' .$currencies->display_price($listing['products_price'], tep_get_tax_rate($listing['products_tax_class_id'])) .'</div>' ;  

            $prod_list_contents .= '</div></div>';
    }

    $prod_list_contents .= '    </div>' .
                           '  ' 
                          ;

    echo $prod_list_contents; 
```

我正在尝试将颜色表合并到通过同一变量显示的同一 div 中。我的颜色表是通过以下 php 得出的：

```
<div >
<?php
     $ctr = 0;
     $clr=1;
       foreach($products_options_array as $products_options_array2) { 
       $ctr++;
       //if it is a color image, or a color hex
           if($products_options_array2['color_image']!='')
           {
            $clr_sec = "style=\"background-image:url(images/pattern/".$products_options_array2['color_image'].") !important; height:28px; width:28px;\"" . "class=\"testy\"";
           }
           else {
               $clr_sec = "style=\"background-color:".$products_options_array2['color_code']." !important; height:28px; width:28px;float:left;\"" . "class=\"testy\"";
               }
           ?>
         <div <?php echo $clr_sec;?>> </div>
        <?php 
        $clr++;
        } ?>
    </div> 
```

我已经尝试将它添加到 prod_list_contents 变量中，但我认为我不能，因为这里的 php 不是 METHODS。并且需要分号等。还有其他方法可以解决这个问题吗？还是我可以添加它而我只是愚蠢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:55:03.557

如果我正确理解您的问题，您希望将 $clr_sec 添加到 $prod_list_contents。

只是改变

```
<div <?php echo $clr_sec;?>> </div> 
```

至

```
 $prod_list_contents.='<div '.$clr_sec.'</div>'; 
```

# javascript - 来自 Web 服务的意外令牌

> ID：11317969
> 
> 赞同：0
> 
> 时间：2012-07-03T19:37:42.037
> 
> 标签：javascript, jquery, ajax, web-services

我得到了这个小片段，我称之为战地 3 统计服务器。如果您访问我正在调用的这个 URL，我们将不会收到任何错误： [http ://api.bf3stats.com/pc/server/?output=json&id=534f7035-cef8-48aa-b233-8d44a0956e68](http://api.bf3stats.com/pc/server/?output=json&id=534f7035-cef8-48aa-b233-8d44a0956e68)

但是当我尝试通过 Ajax 调用获取统计信息时，我得到：
*Uncaught SyntaxError: Unexpected token ：*

...在我的控制台中，我可以看到响应正在到来，就像我访问 url 时一样，但是我无法通过 ajax 调用获取数据...我的代码有问题吗？？？

```
$.ajax({
        type: "GET",
        url: "http://api.bf3stats.com/pc/server/?output=json&id=534f7035-cef8-48aa-b233-8d44a0956e68",
        dataType: "jsonp",
        success: function(response) {
            console.log(response);
        }
    }); 
```

先感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:07:16.950

我不完全确定，但似乎该服务器在通过 ajax 获取它时报告了 500 Internal Server Error。我尝试了许多不同的方法，它们都返回了 500 Internal Server Error。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:15:18.507

该网站似乎在某些时候没有响应。有趣的是 JSONP 数据类型在 Firefox 中不起作用。我在此处的响应中添加了一个简单的检查。

```
$.ajax({
        type: "GET",
        url: "http://api.bf3stats.com/pc/server/?output=json&id=534f7035-cef8-48aa-b233-8d44a0956e68",
        dataType: "json",
        success: function(response) {
            if (response == null) {
                alert ("An error has occurred!");
            } else {
                console.log(response);
            }
        }
    });
} 
```

# javascript - 为什么使用多个选择字段删除空格会失败？

> ID：11317971
> 
> 赞同：0
> 
> 时间：2012-07-03T19:37:48.793
> 
> 标签：javascript, jquery

我有通用代码来删除字段值开头和结尾的空格：

```
var fieldValue = $('#'+fieldName).val().replace(/\s+$/g, ''); 
```

但是如果`<select multiple="multiple"`字段通过，它会失败。

我可以有通用代码来绕过这些字段吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:43:25.310

给定一个选择倍数，该`val()`方法将返回一个**数组**（除非没有选择任何项目，在这种情况下它将返回`null`），而不是一个字符串。

如果要从值中去除空格，则必须遍历数组（可能使用[`each`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)或 jQuery's [`map`](http://api.jquery.com/jQuery.map/)）并依次将正则表达式应用于每个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:43:59.040

[值](http://api.jquery.com/val/)

在元素的情况下，该`.val()`方法返回一个包含每个选定选项的数组；如果未选择任何选项，则返回 null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:47:05.327

`$('#'+fieldName).val()`返回`<select multiple>`数组

你可以使用

```
var value = $.map( $('#'+fieldName).val(), function (opt) {
  return $.trim(opt);
} ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T20:21:01.740

如果要更改所有选项的值和内部文本，无论它们是否被选中：

```
<select id="mySelect" multiple="multiple">
    <option name="1" value="Test 1 ">Test 1  </option>
    <option name="2" value=" Test 2">  Test 2</option>
    <option name="3" value=" Test 3 ">  Test 3  </option>
</select>

<script type="text/javascript">

    // Iterate through the individual option elements
    $("#mySelect option").each(function () {

        // "this" points to the option element encountered during the current iteration of .each()

        // Trim each text node (in between the <option> and </option> tags)
        // Using native JS String Object .trim()
        $(this).text( $(this).text().trim() );

        // Trim each value attribute
        $(this).val( $(this).val().trim()) });

    });

</script> 
```

脚本运行后，您将获得以下 HTML，确保在表单提交/Ajax 请求之前根据需要修剪所有数据（无论是否选中）：

```
<select id="mySelect" multiple="multiple">
    <option name="1" value="Test 1">Test 1</option>
    <option name="2" value="Test 2">Test 2</option>
    <option name="3" value="Test 3">Test 3</option>
</select> 
```

为了使这个通用，您可以添加一个检查以查看该元素是否是一个选择元素（然后执行上面的 .each() 方法）或默认为修剪单个元素的文本或值字段的更简单的方法。

```
function trimInputs(fieldId) {
    var el = $('#' + fieldId);

    if (el.prop('tagName') === 'SELECT') {
        $('#' + fieldId + ' option').each(function () {        
            $(this).val( $(this).val().trim()) });
            $(this).text( $(this).text().trim() );
        });
    } else {
        el.val( el.val().trim() );
        el.text( el.text().trim() );
   }
} 
```

# c# - 多线程和加速

> ID：11317972
> 
> 赞同：1
> 
> 时间：2012-07-03T19:38:00.350
> 
> 标签：c#, .net, multithreading

我有以下一段代码。我希望在多个线程上开始创建文件。目标是当我在多个线程上创建 10 个文件时将花费更少的时间。据我了解，我需要引入异步调用的元素来实现这一点。

我应该在这段代码中进行哪些更改？

```
using System;
using System.Text;
using System.Threading;
using System.IO;
using System.Diagnostics;

namespace MultiDemo
{
    class MultiDemo
    {
        public static void Main()
        {
            var stopWatch = new Stopwatch();
            stopWatch.Start();
            // Create an instance of the test class.
            var ad = new MultiDemo();

            //Should create 10 files in a loop.
            for (var x = 0; x < 10; x++)
            {
                var y = x;
                int threadId;
                var myThread = new Thread(() => TestMethod("outpFile", y, out threadId));
                myThread.Start();
                myThread.Join();
                //TestMethod("outpFile", y, out threadId);
            }
            stopWatch.Stop();
            Console.WriteLine("Seconds Taken:\t{0}",stopWatch.Elapsed.TotalMilliseconds);
        }

        public static void TestMethod(string fileName, int hifi, out int threadId)
        {
            fileName = fileName + hifi;
            var fs = new FileStream(fileName, FileMode.OpenOrCreate, FileAccess.ReadWrite);
            var sw = new StreamWriter(fs, Encoding.UTF8);
            for (int x = 0; x < 10000; x++)
                {
                    sw.WriteLine(DateTime.Now.ToString());
                }
            sw.Close();
           threadId = Thread.CurrentThread.ManagedThreadId;
            Console.WriteLine("{0}",threadId);
        }
    }
} 
```

现在，如果我注释代码的线程创建部分并在循环中调用 testMethod 10 次，它比线程创建尝试处理的多个线程要快。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T19:55:01.800

您的代码的线程版本正在做额外的工作，因此速度较慢也就不足为奇了。

当您执行以下操作时：

```
var myThread = new Thread(() => TestMethod("outpFile", y, out threadId));
myThread.Start();
myThread.Join(); 
```

...你正在创建一个线程，让它调用`TestMethod`，然后等待它完成。 **创建和启动线程的额外开销将使事情变得比`TestMethod`没有任何线程的调用要慢。**

如果您启动所有线程工作然后等待它们完成，您可能会看到更好的性能，例如：

```
var workers = new List<Thread>();
for (int i = 0; i < 10; ++i) 
{
   var y = x;
   int threadId;
   var myThread = new Thread(() => TestMethod("outpFile", y, out threadId));
   myThread.Start();
   workers.Add(myThread);
}
foreach (var worker in workers) worker.Join(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T19:55:24.247

你变慢的原因是你所做的只是启动一个新线程并等待它完成，所以它必须更慢，因为你的其他方法根本不做 3 个步骤。

试试这个（假设 .Net 4.0 因为 TPL）。在我的机器上，并行完成时始终快 100 毫秒。

```
[Test]
public void Y()
{
    var sw = Stopwatch.StartNew();
    Parallel.For(0, 10, n => TestMethod("parallel", n));

    sw.Stop();
    Console.WriteLine(sw.ElapsedMilliseconds);

    sw.Restart();

    for (int i = 0; i < 10; i++)
        TestMethod("forloop", i);

    sw.Stop();
    Console.WriteLine(sw.ElapsedMilliseconds);
}

private static void TestMethod(string fileName, int hifi)
{
    fileName = fileName + hifi;
    var fs = new FileStream(fileName, FileMode.OpenOrCreate, FileAccess.ReadWrite);
    var sw = new StreamWriter(fs, Encoding.UTF8);
    for (int x = 0; x < 10000; x++)
    {
        sw.WriteLine(DateTime.Now.ToString());
    }
    sw.Close();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T19:49:11.143

也许这并不能直接回答您的问题，但这是我对此事的看法。该代码的瓶颈不太可能是处理器。我敢打赌，磁盘 IO 会比 CPU 处理花费更多的时间*。*因此，我不相信创建新线程会有所帮助（所有线程都将尝试写入同一个磁盘）。我认为这是过早优化的情况。如果我是你，我会在一个线程上完成所有操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T20:07:02.450

在您的情况下，首先要观察的是[Amdahl 定律](http://en.wikipedia.org/wiki/Amdahl%27s_law)。您的算法大致相等地使用以下每种资源：

1.  处理器使用情况
2.  内存访问
3.  驱动器访问

其中，驱动器访问是*迄今为止*最慢的项目，因此要查看加速，您需要跨此资源并行化您的算法。换句话说，如果您通过将 10 个不同的文件写入 10 个不同的驱动器来并行化您的程序，那么与仅并行化文件内容的计算相比，您将看到显着的性能改进。事实上，如果您在 10 个不同的线程上创建文件，与驱动器访问相关的序列化实际上会降低程序的整体性能。

尽管两者都意味着多线程编程，但在 IO 的情况下，并行化不应*与*异步编程相同。虽然我不建议您并行使用文件系统，但使用异步方法读取/写入文件几乎总是有益的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T19:55:15.477

您正在否定多线程的好处，因为您`Join`每个线程都在等待它完成，然后再创建并启动下一个线程。

相反，在创建和启动线程时将它们添加到列表中，然后循环遍历线程列表，按顺序加入它们直到它们完成。

```
using System.Collections.Generic;
List<Thread> threads= new List<Thread>();
//Should create 10 files in a loop.
for (var x = 0; x < 10; x++)
{
    var y = x;
    int threadId;
    var myThread = new Thread(() => TestMethod("outpFile", y, out threadId));
    threads.Add(myThread);
    myThread.Start();
    //myThread.Join();
    //TestMethod("outpFile", y, out threadId);
}
foreach (var thread in threads) thread.Join(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T19:43:33.000

这是提高速度的错误方法，多线程并行工作，但不是加速

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-03T19:50:32.453

那么你为什么决定使用多线程呢？启动一个新线程的代价可能高于一个简单的循环。这不是您可以盲目决定的事情...如果您坚持使用线程，您还可以检查托管[ThreadPool](http://msdn.microsoft.com/en-us/library/0ka9477y.aspx) / [async delegates](http://msdn.microsoft.com/en-us/library/22t547yb%28v=vs.100%29.aspx)的使用情况，这可以通过重用现有线程来降低创建新线程的成本。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-03T20:21:09.873

尝试类似：

```
for (int i = 0; i < 10; ++i)  
{ 
   new Action(() => { TestMethod("outpFile"); }).BeginInvoke(null,null); 
}
Console.ReadLine(); 
```

如果它不会比串行调用更快，那么您的 IO 确实是一个瓶颈，您对此无能为力。

# algorithm - 字符串相似性：Bitap 究竟是如何工作的？

> ID：11317973
> 
> 赞同：21
> 
> 时间：2012-07-03T19:38:03.227
> 
> 标签：algorithm, bit-manipulation, similarity

我正在尝试围绕[Bitap](http://en.wikipedia.org/wiki/Bitap_algorithm)算法进行思考，但无法理解算法步骤背后的原因。

我了解算法的基本前提，即（如果我错了，请纠正我）：

```
Two strings:     PATTERN (the desired string)
                 TEXT (the String to be perused for the presence of PATTERN)

Two indices:     i (currently processing index in PATTERN), 1 <= i < PATTERN.SIZE
                 j (arbitrary index in TEXT)

Match state S(x): S(PATTERN(i)) = S(PATTERN(i-1)) && PATTERN[i] == TEXT[j], S(0) = 1 
```

在英文术语中，`PATTERN.substring(0,i)` 如果前一个子字符串`PATTERN.substring(0, i-1)`成功匹配并且字符 at 与字符 at`PATTERN[i]`相同，则匹配 TEXT 的子字符串`TEXT[j]`。

我不明白的是这个的位移实现。[详细介绍该算法的官方论文基本上已经列出](http://www.akira.ruc.dk/~keld/teaching/algoritmedesign_f08/Artikler/09/Baeza92.pdf)，但我似乎无法想象应该发生什么。 **算法规范只是论文的前 2 页**，但我会强调重要的部分：

这是该概念的位移版本：

![在此处输入图像描述](../Images/0c2eee695e64cc422d0820ab63361f97.png)

这是示例搜索字符串的 T[text]：

![在此处输入图像描述](../Images/7dab375cb97db65e65d9ccb8b5b5fabe.png)

这是算法的痕迹。

![在此处输入图像描述](../Images/530c1713b83a155503ef5320c76e1e56.png)

具体来说，我不明白 T 表的含义，以及`OR`使用当前状态在其中添加条目的原因。

如果有人能帮助我了解到底发生了什么，我将不胜感激

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-04T00:25:24.783

`T`有点令人困惑，因为您通常会从左到右对模式中的位置进行编号：

```
0 1 2 3 4
a b a b c 
```

...而位通常从右到左编号。

但是将模式向后写在位上方可以清楚地表明：

```
  *位：4 3 2 1 0*

       cb a b a 
T[a] = 1 1 0 1 0

       c b a b a
T[b] = 1 0 1 0 1

       巴巴_
T[c] = 0 1 1 1 1

       巴巴
T[d] = 1 1 1 1 1

```

位*n*的`T[x]`is`0`如果`x`出现在位置*n*中，或者`1`不出现。

等效地，您可以认为这是说，如果输入字符串中的当前字符是，并且您在 的位置*n*中`x`看到 a ，那么只有在匹配之前*n 个*字符开始时，您才可能匹配该模式。`0`*`T[x]`*

 *** * *

现在进入匹配程序。*状态的第n*`0`位中的A表示我们在*n 个*字符之前开始匹配模式（其中 0 是当前字符）。最初，没有任何匹配项。

 **```
 [start]
1 1 1 1 1 
```

当我们消耗试图匹配的字符时，状态向左移动（将零移到底部位，位 0）并与当前字符的表条目进行或运算。第一个字符是`a`; 左移和 OR-ing`T[a]`给出：

```
 a
1 1 1 1 0 
```

被移入的`0`位被保留，因为当前字符`a`可以开始匹配模式。对于任何其他字符，该位将被设置为 `1`.

状态的第 0 位现在`0`意味着我们开始匹配当前字符的模式；继续，我们得到：

```
 a b
1 1 1 0 1 
```

...因为该`0`位已向左移动 - 认为它是说我们开始匹配模式 1 字符之前 - 并且在同一位置`T[b]`有 a ，告诉我们如果我们开始匹配，在当前位置`0`看到 a是好的`b`1 个字符前。

```
 a b d
1 1 1 1 1 
```

`d`无法匹配任何地方；所有位都设置回`1`.

```
 a b d a
1 1 1 1 0 
```

和以前一样。

```
a b d a b
1 1 1 0 1 
```

和以前一样。

```
b d a b a
1 1 0 1 0 
```

`a`如果匹配在 2 个字符前或当前字符开始，则很好。

```
d a b a b
1 0 1 0 1 
```

`b`如果匹配在 1 或 3 个字符前开始，则很好。`0`in bit 3 意味着我们几乎匹配了整个模式......

```
a b a b a
1 1 0 1 0 
```

...但是下一个字符是`a`，如果匹配在 4 个字符前开始，那就不好了。但是，较短的匹配可能仍然是好的。

```
b a b a b
1 0 1 0 1 
```

看起来还是不错的。

```
a b a b c
0 1 1 1 1 
```

最后，如果匹配在 4 个字符之前开始，那就太好了`c` *。*a`0`已经达到最高位的事实意味着我们有一场比赛。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T00:17:40.100

很抱歉不允许其他人回答，但我很确定我现在已经想通了。

探索算法的基本概念是以二进制表示匹配状态（在原始帖子中定义）。原帖中的文章正式解释了它；我将尝试通俗地这样做：

Let's have `STR`，它是使用给定字母表中的字符创建的字符串。

让我们`STR`用一组二进制数字表示：`STR_BINARY`. 该算法要求这种表示是向后的（因此，第一个字母对应于最后一个数字，第二个字母对应于倒数第二个数字，等等）。

让我们假设`RANDOM`指的`STR`是创建来自相同字母的随机字符的字符串。

在`STR_BINARY`中，给定索引处的 0 表示`RANDOM`匹配`STR`from`STR[0]`到

`STR[(index of letter in STR that the 0 in STR_BINARY corresponds to)]`. 空格算作匹配。1 表示在这些相同边界内`RANDOM`不匹配`STR`。

一旦理解了这一点，算法就会变得更容易学习。****

# jsf-2 - Omnifaces - FullAjaxExceptionHandler - f:ajax onevent 状态为成功

> ID：11317977
> 
> 赞同：3
> 
> 时间：2012-07-03T19:38:15.147
> 
> 标签：jsf-2, omnifaces

我正在使用 Omnifaces FullAjaxExceptionHandler - 它工作得很好，但是当我进行 ajax 调用并有一个 onevent 函数检查状态 == 'success' 时，它仍然被调用，即使 FullAjaxExceptionHandler 呈现了一个错误页面。（我在 glassfish 3.1.1 上使用 JSF（Mojarra 2.1.3）

JSF 代码：

`<h:commandButton value="myButton"> <f:ajax listener="#{myBean.myBeanFunction()}" render="someDiv" onevent="myFunction"/> </h:commandButton>`

Javascript代码：

`function myFunction(e) { if (e.status == 'success') { alert("Success"); } }`

因此，如果 FullAjaxExceptionHandler 将我带到错误页面，我需要一些不执行 javascript 函数的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T03:08:06.040

`render="@all"`如果返回的 XML 响应未指示 a已执行（这将指示整个文档将被替换），您可以检查如下：

```
if (e.responseXML.getElementById('javax.faces.ViewRoot') == null) {
    // ...
} 
```

它与`oncomplete`PrimeFaces 命令组件一起使用是因为它不为此使用标准的 JSF ajax API，因此以不同的方式做事 - 更直观。

# php - 如何在 Symfony 和 Doctrine 中实现多对多和一对多？

> ID：11317979
> 
> 赞同：8
> 
> 时间：2012-07-03T19:38:23.737
> 
> 标签：php, symfony, doctrine, doctrine-orm

在解释实体之间关系的创建时，我发现文档非常差。所以，我不得不向我的 StackExchangers 同伴寻求帮助。所以，我正在尝试构建以下案例：

**情况1**

A`User`属于一个或多个`Group`，a`Group`可以有多个`Permission`。A`User`也可以有一个`Permission`.

**案例2**

A`Ticket`有 a `Category`、 multiple`Tag`和 multiple `Comment`。

提前致谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-03T21:10:25.237

肯定的事。首先要了解的是，没有“一种方法”可以做到这一点。Doctrine 在如何[定义关系](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/association-mapping.html)方面提供了很大的灵活性——即使多个定义产生完全相同的 DDL（理解这一点很重要——一些映射选择只影响 ORM 的对象端，而不影响模型-边）

这是您的用户/组/权限示例，实际上都是多对多关联（我排除了所有不相关但必需的代码，例如 PK 列定义）

```
<?php

namespace Your\Bundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * @ORM\Entity
 */
class User
{
  /**
   * Many-To-Many, Unidirectional
   *
   * @var ArrayCollection $groups
   *
   * @ORM\ManyToMany(targetEntity="Group")
   * @ORM\JoinTable(name="user_has_group",
   *      joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id")},
   *      inverseJoinColumns={@ORM\JoinColumn(name="group_id", referencedColumnName="id")}
   * )
   */
  protected $groups;

  /**
   * Many-To-Many, Unidirectional
   *
   * @var ArrayCollection $permissions
   *
   * @ORM\ManyToMany(targetEntity="Permission")
   * @ORM\JoinTable(name="user_has_permission",
   *      joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id")},
   *      inverseJoinColumns={@ORM\JoinColumn(name="permission_id", referencedColumnName="id")}
   * )
   */
  protected $permissions;

  public function __construct()
  {
    $this->groups = new ArrayCollection();
    $this->permissions = new ArrayCollection();
  }
}

/**
 * @ORM\Entity
 */
class Group
{
  /**
   * Many-To-Many, Unidirectional
   *
   * @var ArrayCollection $permissions
   *
   * @ORM\ManyToMany(targetEntity="Permission")
   * @ORM\JoinTable(name="group_has_permission",
   *      joinColumns={@ORM\JoinColumn(name="group_id", referencedColumnName="id")},
   *      inverseJoinColumns={@ORM\JoinColumn(name="permission_id", referencedColumnName="id")}
   * )
   */
  protected $permissions;

  public function __construct()
  {
    $this->permissions = new ArrayCollection();
  }
}

/**
 * @ORM\Entity
 */
class Permission {} 
```

如果您对这里发生的事情有任何疑问，请告诉我。

现在，到你的第二个例子

```
<?php

namespace Your\Bundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * @ORM\Entity
 */
class Ticket
{
  /**
   * Many-To-One, Unidirectional
   *
   * @var Category
   *
   * @ORM\ManyToOne(targetEntity="Category")
   * @ORM\JoinColumn(name="category_id", referencedColumnName="id")
   */
  protected $category;

  /**
   * Many-To-Many, Unidirectional
   *
   * @var ArrayCollection $permissions
   *
   * @ORM\ManyToMany(targetEntity="Tag")
   * @ORM\JoinTable(name="tickt_has_tag",
   *      joinColumns={@ORM\JoinColumn(name="ticket_id", referencedColumnName="id")},
   *      inverseJoinColumns={@ORM\JoinColumn(name="tag_id", referencedColumnName="id")}
   * )
   */
  protected $tags;

  /**
   * One-To-Many, Bidirectional
   *
   * @var ArrayCollection $comments
   *
   * @ORM\OneToMany(targetEntity="Comment", mappedBy="ticket")
   */
  protected $comments;

  public function __construct()
  {
    $this->tags = new ArrayCollection();
    $this->comments = new ArrayCollection();
  }
}

/**
 * @ORM\Entity
 */
class Comment
{
  /**
   * Many-To-One, Bidirectional
   *
   * @var Ticket $ticket
   *
   * @ORM\ManyToOne(targetEntity="Ticket")
   * @ORM\JoinColumn(name="ticket_id", referencedColumnName="id")
   */
  protected $ticket=null;
}

/**
 * @ORM\Entity
 */
class Tag {}

/**
 * @ORM\Entity
 */
class Category {} 
```

和以前一样，如果您想解释这些，请告诉我。

PS 这一切都没有经过实际测试，我只是在我的 IDE 中快速完成了它。可能有一两个错字;)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T19:48:38.417

试试这个：

```
Class User {  
 /**
  * @ORM\OneToMany(targetEntity="path\to\group", mappedBy="user", cascade={"persist", "remove"})
  */
  private $group; 
```

`User`您将在和`Group`..之间建立一对多关系。这`targetEntity`是您想要与之建立关系的实体的路径，`mappedBy`是来自实体的变量`Group`。 `cascade`意味着`User`可以添加`Group`和删除`Group`

班级组{

```
/**
 * @ORM\ManyToOne(targetEntity="path\to\user, inversedBy="group")
 * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 */
private $user; 
```

这是关系的保留方..`targetEntity`应该有返回父实体的路径，`User`在这种情况下。是来自实体`inversedBy`的变量。只是告诉 Doctrine 加入什么，如果你不自己设置它会自动完成。`User``JoinColumn`

# javascript - Aptana 中的 JavaScript 语法高亮显示

> ID：11317982
> 
> 赞同：1
> 
> 时间：2012-07-03T19:38:39.640
> 
> 标签：javascript, aptana, syntax-highlighting

我将 Aptana 用于我的 wen 开发项目。我想知道 Aptana 中是否有任何方法可以突出显示我的脚本文件中的相同语法（即变量名）。

例如：

```
function(storeItem, item) {

                var total = 0;
                store.each(function(rec) {
                    total += rec.get('data1');
                }) ;
                this.setTitle(storeItem.get('name') + ': ' + Math.round(storeItem.get('data1') / total * 100) + '%');

        } 
```

如果我选择`storeItem`变量，那么所有命名的变量`storeItem`都将突出显示。这在 Aptana 中可能吗？

或者您可以推荐另一个具有该功能的 IDE。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T16:29:13.103

我认为您需要选项 Window/Preferences/Pydev/Editor/Mark Occurrences。不是很明显。具有讽刺意味的是，我发现它正在寻找一种关闭它的方法。全面披露：我正在做python开发atm，所以我无法验证它是否适用于JS。

所有编辑器似乎都存在“标记出现次数”选项。只需转到首选项 >> Aptana Studios >> 编辑器 >> JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:41:42.230

[Sublime Text 2](http://www.sublimetext.com/2)将突出显示匹配的出现。它不是一个 IDE，但有一个健康的插件列表。

IIRC，[Notepad++](http://notepad-plus-plus.org/)也可以做到这一点，但不是你所说的 IDE。

# iphone - 为什么我不能使用 initwithnibname 覆盖对 XIB 的自定义

> ID：11317990
> 
> 赞同：0
> 
> 时间：2012-07-03T19:39:14.913
> 
> 标签：iphone, ios

如果我这样做，为什么 CheckBox 不加载任何图像？仅当我从 XiB 文件中设置它们时才有效。我可以从 Xib 做到这一点，但如果我确实需要更复杂的东西来定制，我不知道怎么做。

我在那里设置了一个断点，所以我知道这些东西被调用了。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

        [tcCheckBox setBackgroundImage:[UIImage imageNamed:@"checkbox-unchecked.png"] forState:UIControlStateNormal];

        [tcCheckBox setBackgroundImage:[UIImage imageNamed:@"checkbox-checked.png"] forState:UIControlStateSelected];

        [tcCheckBox setBackgroundImage:[UIImage imageNamed:@"checkbox-checked.png"]
forState:UIControlStateHighlighted];

        tcCheckBox.adjustsImageWhenHighlighted=YES;

        **// Custom initialization**
     }
    return self; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:43:53.190

这是因为`initWithNibName:bundle:`不会立即实例化 nib，而只是初始化视图控制器，所以`IBOutlets`此时您的所有内容仍然为零。重写`viewDidLoad`自定义 UI 初始化，当 nib 被实例化并且你的所有 IB 连接都被解析时，这个方法被调用。

# cutycapt - CutyCapt 不显示自定义 Web 字体

> ID：11317999
> 
> 赞同：0
> 
> 时间：2012-07-03T19:40:06.717
> 
> 标签：cutycapt

我正在尝试使用`cutycapt`iPhone 大小的网站截图来测试移动应用程序，而不是每次 CSS 更改时都必须手动截取屏幕截图。

我遇到的问题`cutycapt`是没有渲染或加载自定义网络字体，无论是从`fonts`目录提供还是由谷歌网络字体提供。

示例屏幕截图 - [Google Web 字体](http://stwrt.ca/HqOn)。

我在Ubuntu 服务器上`cutycapt`运行。`xvfb-run`我正在使用的命令是这样的：

```
xvfb-run --server-args="-screen 0, 1024x768x24" \
cutycapt --url={url} --out=/tmp/test2.png \
--min-width=640 --min-height=960 \ 
--user-agent="Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_0 like Mac OS X; en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8A293 Safari/6531.22.7" \
--delay=2000 --header=X_SCREEN_DIMENSIONS:640x960 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T05:17:13.220

我正在使用`xvfb-run`wkhtmltoimage 并且在图像输出中没有呈现自定义字体的相同问题。

为了解决这个问题，我按照这里的说明在我的服务器上安装了自定义字体：http: [//www.cangjie.info/public/howto/ubuntu_fonts/ubuntu_fonts.php](http://www.cangjie.info/public/howto/ubuntu_fonts/ubuntu_fonts.php)

我从 google web fonts 下载了 ttf 文件并将其放置在：

```
/usr/share/fonts/truetype/custom/customfont.ttf 
```

放置字体后，我刷新了字体缓存：`sudo fc-cache -fv`

如果在尝试刷新字体缓存时遇到“找不到命令”错误，请安装 fontconfig：

```
apt-get install fontconfig 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T11:43:01.590

我用它来解决同样的问题。但是下载所有字体需要一些时间。：

```
sudo apt-get install ttf-wqy-zenhei
sudo apt-get install xfs xfonts* -y 
```