# StackOverflow 问答 11152000-11152999

# javascript - JQuery 不是第一个子选择器

> ID：11152001
> 
> 赞同：36
> 
> 时间：2012-06-22T07:35:26.773
> 
> 标签：javascript, jquery, jquery-selectors

我有以下标记：

```
<div class="feed-item">
  <div class="date-header">2012-06-03</div>
</div>
<div class="feed-item">
  <div class="todo">Todo</div>
</div>
<div class="feed-item">
  <div class="meeting">meeting</div>
</div> 
```

我只想显示不同类名的 div，例如 class="todo" 并保持 "date-header" 可见。我有以下 javascript"

```
$('.feed-cluster,.feed-item-container').not('div:first.date-header').not(className).slideUp(speed, function(){
      $('.feed-cluster' + className + ',.feed-item-container' + className).slideDown(speed);
}); 
```

一切正常，除了我试图排除类名为 date-header 的第一个孩子：

```
.not('div:first.date-header') 
```

任何人都可以提出替代方案吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-22T07:37:43.847

```
$('div.date-header').slice(1); 
```

应该这样做。

[`slice`](http://api.jquery.com/slice/)是**最快**的功能！

> 因为 :first 是一个 jQuery 扩展而不是 CSS 规范的一部分，所以使用 :first 的查询不能利用原生 DOM querySelectorAll() 方法提供的性能提升。

替代方式，仍然使用该 `querySelectorAll`功能：

```
$('div.date-header').not(':first'); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-06-22T07:37:17.213

`.not('div:first.date-header')`应该`.not('.date-header:first')`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-01-02T11:37:37.357

正如@gdoron 指出的那样：`:first`不是规范的一部分，`css`而是。所有主流浏览器都[支持](https://caniuse.com/#feat=css-sel3)它。[`:not()`](https://www.w3.org/TR/css3-selectors/#negation)[`:first-child`](https://www.w3.org/TR/css3-selectors/#first-child-pseudo)

所以你也可以使用它来跳过使用`css`内部选择器的第一个孩子`jQuery`。

```
$(".child:not(:first-child)").css("background-color", "blue");
```

```
div.child {
  background-color: #212121;
  color: #fff;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="container">
  <div class="child">
    <p>Im a child of .container</p>
  </div>
  <div class="child">
    <p>Im a child of .container</p>
  </div>
  <div class="child">
    <p>Im a child of .container</p>
  </div>
</div>
```

* * *

## **旧版浏览器支持**

* * *

如果您需要支持旧版浏览器，或者您受到`:not()`选择器的阻碍。您可以使用`.child + .child`选择器。这也将起作用。

```
$(".child + .child").css("background-color", "blue");
```

```
div.child {
  background-color: #212121;
  color: #fff;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="container">
  <div class="child">
    <p>Im a child of .container</p>
  </div>
  <div class="child">
    <p>Im a child of .container</p>
  </div>
  <div class="child">
    <p>Im a child of .container</p>
  </div>
</div>
```

# vim - VIM 隐藏（不折叠！）行

> ID：11152002
> 
> 赞同：17
> 
> 时间：2012-06-22T07:35:46.500
> 
> 标签：vim

有没有办法完全隐藏某些行？我不想折叠，我一他们根本不可见。

示例：我用 php 编程；函数和类变量有 phpdocs，我讨厌有多少垂直空间线，除了`/**`和`*/`可以占用。因此，我不想展示它们（很可能还有其他一些东西）。虽然我怀疑这是可能的......

注意：我知道全局命令，但它们不会做我想做的事。您可以打印我想要的内容之一。但我想要隐藏在编辑区域中的线条。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T08:52:01.797

您可以使评论不可见：

```
:hi! Comment guifg=bg ctermfg=white 
```

或者

```
:hi! link Comment Ignore 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T07:49:34.397

我知道这不是您真正要求的，但是您是否尝试过使用带有空白的折叠`foldtext`？这样，折叠区域的线条看起来就像一条空线。为此，请设置

```
set foldmethod=marker
set foldmarker=\/**,*\/
set foldtext='\ ' 
```

我更喜欢一个 foldtext ，它表明那里有*东西*，可能通过使 is 看起来像一个注释行。`//`在这种情况下，用当前缩进级别的单个注释字符串替换第一个折叠行：

```
set foldtext=substitute(getline(v:foldstart),'\\/\\*\\*.*','\\/\\/','g' 
```

我觉得这不显眼，同时仍然提醒我有一些隐藏的文字。

希望这可以帮助。

# android - 从 DB Android 播放媒体

> ID：11152008
> 
> 赞同：2
> 
> 时间：2012-06-22T07:35:58.917
> 
> 标签：android, audio

当用户打开某个页面时，我的应用程序会发出声音。例如，我有 50 页，因此我在原始文件夹中保留了 50 个声音文件。数据库存储页码和为其播放的声音之间的关联：

```
==================
 page | sound
------+-----------
 1    | android
 2    | star
 3    | bluewater
 …    | … 
```

那么如何调用该声音并播放它呢？如果只有一个声音示例，我知道如何调用声音：

```
MediaPlayer.create(Splash.this, R.raw.splashsound); 
```

但我很困惑如何从数据库调用声音、命名文件并从原始资源播放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:44:02.490

我建议您使用光标从数据库中读取数据，然后您可以获得要播放的音频文件的路径，因此只需将其传递给 MediaPlayer。

如果你想知道如何从数据库中获取 recoeds，[这里是教程链接。](http://www.vogella.com/articles/AndroidSQLite/article.html)这个链接向你展示了如何使用数据库以及 ContentProvider。

希望这个解释对你有用..

# oracle - Oracle：允许每个模式控制一些 JOBS

> ID：11152010
> 
> 赞同：2
> 
> 时间：2012-06-22T07:36:03.057
> 
> 标签：oracle, jobs

从模式 A 登录时，我需要获取模式 B 的离线和离线 JOBS。

我可以使用一些赠款来达到这个目的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:34:47.733

如果您使用的是 DBMS_JOB，那么您的选择是有限的。根据[文档](http://docs.oracle.com/cd/B10500_01/appdev.920/a96612/d_job.htm#1002115)：

> “没有与作业相关的数据库权限。DBMS_JOB 不允许用户触摸除他们自己的作业之外的任何作业。”

有一个解决方法：DBMS_IJOB。这是无证的，因为它归 SYS 所有，不应该由真人使用。你要小心这个。由于它没有记录，我们依赖于非官方来源。Adam Donahue 在这个包上写了一篇有用的博客。 [在这里阅读](http://manageoracle.blogspot.co.uk/)。

或者，您可以构建自己的基础架构：模式 B 拥有一个手动包来管理他们的工作，并将该包上的 EXECUTE 授予模式 A。

DBMS_SCHEDULER（在 10g 中引入）提供了更多的灵活性。好吧，实际上更多的灵活性，读作“复杂性”。有多种方法可以通过计划的作业以及权限和角色矩阵来分割和分割职责。 [了解更多](https://docs.oracle.com/database/121/ADMIN/schedover.htm#ADMIN033)。

没有办法让模式 A 管理所有模式 B 的工作。有`ANY`与 DBMS_SCHEDULER 相关的各种级别的权限，但这些权限非常强大，并且不能仅限于单个模式的权限。在最粗略的级别 B 可以简单地做到这一点：

```
 grant alter on bjob1 to A;
 grant alter on bjob2 to A; 
```

等等。这将允许 A 对 B 的作业执行大多数操作，除了停止正在运行的作业。

# c#-3.0 - C# Image resize-质量损失

> ID：11152014
> 
> 赞同：0
> 
> 时间：2012-06-22T07:36:22.647
> 
> 标签：c#-3.0

我使用了 C# 方法来调整图像大小。我使用了以下链接中的几种方法。

[C# Simple Image Resize：文件大小不](https://stackoverflow.com/questions/1909523/c-sharp-simple-image-resize-file-size-not-) 缩小

[调整图像大小 C#](https://stackoverflow.com/questions/1922040/resize-an-image-c-sharp)

但是重新调整图像大小时质量缺失

请帮我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:40:26.963

您可以使用[WIC](http://en.wikipedia.org/wiki/Windows_Imaging_Component)（Windows 映像组件）而不是 GDI+。这是一个带有示例的[不错的博客文章。](http://keyvan.io/image-resizing-with-windows-imaging-component-in-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T07:44:42.753

首先将您的转换`Bitmap`为`Image`

```
Bitmap b = new Bitmap("asdf.jpg");
Image i = (Image)b; 
```

然后将图像传递给此方法以调整大小

```
public static Image ResizeImage(Image image, int width, int height, bool onlyResizeIfWider)
{
    using (image)
    {
        // Prevent using images internal thumbnail.
        image.RotateFlip(RotateFlipType.Rotate180FlipNone);
        image.RotateFlip(RotateFlipType.Rotate180FlipNone);

        if (onlyResizeIfWider == true)
            if (image.Width <= width)
                width = image.Width;

        // Resize with height instead?
        int newHeight = image.Height * width / image.Width;
        if (newHeight > height)
        {
            width = image.Width * height / image.Height;
            newHeight = height;
        }
        Image NewImage = image.GetThumbnailImage(width, newHeight, null, IntPtr.Zero);
        return NewImage;
    }
} 
```

我希望这有帮助。

# facebook - 适用于 iOS 的 Facebook、Foursquare 和 Twitter 登录按钮

> ID：11152017
> 
> 赞同：0
> 
> 时间：2012-06-22T07:36:38.053
> 
> 标签：facebook, twitter, foursquare

我在哪里可以找到分别为其社交网络设计的 facebook、twitter、foursquare 登录按钮。

例如，twitter 登录按钮的背景颜色为 twitter 标题，左侧有一只鸟

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:43:45.503

我不确定这个地方是否会有一个特定的按钮，但它会有正确的图标： http: [//www.iconfinder.com/](http://www.iconfinder.com/)

值得一试，因为您可以按许可证过滤。

# php - 无法使用php函数读取mysql数据库中写入的值，就在调用函数之后

> ID：11152025
> 
> 赞同：0
> 
> 时间：2012-06-22T07:37:22.230
> 
> 标签：php, mysql

在 php 函数中，我尝试在数据库表中插入一行

```
function abnc()
{

$link = conn to db;
$query = "insert into table( a,c ,v) values (1,2,3);"
$result = mysqli_query($link, $query);
if(mysqli_rows_affected($link) == 1){
close conn;
return true;}
else{
return false;
close conn;
} 
```

现在，在其他地方，我调用了这个函数，并尝试读取我插入的值

```
$done = abnc();
if($done)
{
$query = "select * from table where a=1 and c=2 and v=3";
$result = mysqli_query($link, $query);
echo "true";
echo mysqli_num_rows($result);
}
else
{
echo 'false';
} 
```

我得到的输出是true0；

我认为当函数执行时，脚本只是继续。我希望它等到函数执行完成。有什么解决办法？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:54:59.827

您在函数中关闭了数据库连接，尝试在函数外部打开它并在脚本结束时关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T07:43:26.807

脚本不会继续。当您调用 abnc() 时，该函数将被执行并返回一个您存储在变量 $done 中的值。由于您的输出为 true0，因此该值可能为 true。

在 abnc() 中插入一行。这意味着有一行受到影响并且函数返回 true。并且您关闭了数据库连接，这可能是您以后无法访问插入数据的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T07:45:33.490

尝试这个

```
$done = abnc();
$link = conn to db;

if ($done) {
    $query = "select * from table where a=1 and c=2 and v=3";
    $result = mysqli_query($link, $query);
    if (mysqli_num_rows($result) > 0) {
        do {
            $resultSet = array();
            if (($row = mysqli_store_result($link))) {
                while ($row = mysqli_fetch_assoc($row)) {
                    $resultSet[] = $row;
                }
                $return[] = $resultSet;
                @mysqli_free_result($row);
            }
        } while (@mysqli_next_result($link));
        return $return;
    }
} else {
    return false;
} 
```

# c++ - 二维字符数组的全局和局部声明

> ID：11152036
> 
> 赞同：1
> 
> 时间：2012-06-22T07:38:24.963
> 
> 标签：c++, c, arrays, data-structures, multidimensional-array

当我在 codechef 上提交练习问题时，我遇到了一个非常奇怪的问题。解决方案“具有全局声明 2D 字符数组”被接受，而具有“在主函数内声明”的解决方案被拒绝为错误答案。

以下是解决方案的链接。

1) 有全局声明： http: [//www.codechef.com/viewsolution/1138654](http://www.codechef.com/viewsolution/1138654)
2) 在 main() 中有声明：http: [//www.codechef.com/viewsolution/1138660](http://www.codechef.com/viewsolution/1138660)

PS1：我没有在 main 函数之外使用 2D char 数组。
PS2：我说的是数组“char boardString[1000][1000]”；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T07:39:55.827

因为您可能会用完堆栈空间。

当您全局声明一个数组时，它会在 data/Bss 段中分配（*注意这是实现细节*）
而当您在其中声明一个数组时，`main()`它会在堆栈上本地创建（*再次是实现细节*）

由于您分配的数组是巨大的（`1000 X 10000`），您可能会用完堆栈空间。
Codechef 足够聪明，可以检测到这个问题，因此它会拒绝包含数组的代码`main()`作为错误答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:16:10.940

正如 Als 正确指出的那样，问题很可能是由于堆栈空间限制。如果您更喜欢将变量封装在内部`main`而不是在堆栈上分配它，那么您只需在此处声明它`static`。

# c++ - gcc 优化

> ID：11152040
> 
> 赞同：3
> 
> 时间：2012-06-22T07:38:47.210
> 
> 标签：c++, c, gcc, g++

我想知道在启用任何类型的 gcc/g++ 优化的情况下，以下代码是否会在编译时引发错误或警告。

```
int a;
a = func();
if (a == 2) {
    assert(false);
} 
```

我认为以下代码可以在发布配置中引发警告“设置但未使用的变量”。

```
int a;
a = func();
assert(a != 2); 
```

但是上面的代码呢？（gcc**可以**删除 if 语句本身，因为在 if 语句或 if 块中（在发布版本中）不会做任何事情，然后抛出警告“未使用但设置变量”）

编辑：这绝对不是关于减少代码或 exe 大小的问题。我想知道在任何构建配置中都能成功的一段代码。

编辑：我们在发布模式下禁用断言

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T08:13:09.497

根据我的测试，以下代码会生成警告`-Wall -Wextra -O2 -DNDEBUG`：

```
int a = func(); // warning: unused variable ‘a’
assert(a != 2); 
```

但是下面的代码没有：

```
// no warnings
int a;
a = func();
assert(a != 2); 
```

但是，您始终可以通过强制转换为来抑制未使用的变量警告`void`。

```
int a = func();
(void) a; // suppresses "unused variable" warning
assert(a != 2); 
```

据我所知， line`a = func()`语句总是算作变量的使用`a`，而初始化*不算*作使用。

随着编译器的变化和诊断的改进，我不会尝试对冲未来*可能出现的*编译器警告，因为对冲有时会意外地抑制有效警告。

**断言是如何定义的？**

标准委员会和 C 实施者`assert`经过精心设计，不会产生虚假警告。请注意演员表的常见`void`程度...

*   如果没有`NDEBUG`，glibc`assert`大致按以下方式定义（除了 以外的东西`abort`）：

    ```
    #define assert(expr) ((expr) ? (void) 0 : abort()) 
    ```

*   使用`NDEBUG`，glibc 以这种方式定义它（按照 C 标准的要求）：

    ```
    #define assert(expr) ((void) 0) 
    ```

*   以下定义`assert`不符合要求，因为它没有扩展为表达式：

    ```
    #define assert(expr) { if (expr) { ... } } // wrong 
    ```

C++ 的定义也略有不同。所以你看，`assert`以正确的方式定义，所以它不会产生任何虚假的编译器警告，而且它在语法上确实表现得像函数调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:03:33.080

一般来说，不可能说一段代码*永远不会*从编译器收到任何警告，因为将来可能会添加新的警告，或者编译器错误可能会导致虚假警告。

我很确定 GCC 不会对`if`用大括号定义的空体发出警告，正是因为这很容易在有效代码中发生，例如这个（本质上与你的情况非常相似）：

```
int a = func();
if (a == 2)
{
#ifdef SOME_BUILD_SETTING
    launch_missiles();
#endif
} 
```

手册显示

> **-Wempty-body** 如果在, or语句
>   中出现空正文，则发出警告。此警告也由**-Wextra**启用。`if``else``do while`

 **这将适用于：

```
#ifdef SOME_BUILD_OPTION
# define LAUNCH_MISSILES launch_missiles()
#else
# define LAUNCH_MISSILES
#endif
if (a==2)
  LAUNCH_MISSILES; 
```

`-Wextra`然后在没有`SOME_BUILD_OPTION`定义的情况下编译。

但是使用大括号它不会发出警告，正如 Dietrich Epp 评论的那样，它不会发出警告，因为即使定义`assert`了它也不会扩展为空。`NDEBUG`

在您的代码`a`被初始化并使用它的值时，所以我会惊讶于它发出警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T08:24:07.593

如果您`assert`被预处理器删除，这可能会导致问题，如下所示：

```
#ifdef ENABLE_ASSERT
#define assert (CONDITION) {if (!(CONDITION)) abort ();}
#else
#define assert (CONDITION) /* Nothing */
#endif 
```

但是，如果你做得正确，那么就不会有问题：

```
#define assert (CONDITION) {if ((ENABLE_ASSERT) && !(CONDITION)) abort ();} 
```

在这种情况下，编译器仍会看到在`a`中使用的`CONDITION`，但在`ENABLE_ASSERT`为零时会对其进行优化。让编译器优化器删除代码通常比使用预处理器更好：它避免了这样的警告，并且通常会导致代码更具可读性，并且如果有一天它变成运行时测试，则不需要重写代码.

显然，`ENABLE_ASSERT`必须始终定义为零或非零。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T08:13:16.980

您可能知道`assert`宏是使用宏管理的`NDEBUG`。我认为使用 an 的东西`#ifdef NDEBUG`会更容易阅读并具有相同的效果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T08:14:19.443

是的，此代码可能会在未来某个时间点发出带有一些奇怪编译器设置的警告。

你的问题永远不会得到肯定的回答。不可能。未来是不可预测的。即使在目前，编译器标志的数量也代表着组合爆炸，很难完全分析。任何给你“是”答案的人都可能忽略了一些事情。

现在，我会说编译器通常（根据我的经验）只针对您的代码实际外观发出警告，而不是针对优化器完成后的外观发出警告。是的，如果您运行优化器，它可能能够进行更深入的分析并发现更微妙的问题。但它不会开始标记您现在多余的构造，因为优化器能够完全删除它。

所以，我认为你在这里基本上是安全的，这就像你从我这里得到的一样接近“是”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T07:41:21.670

两个代码块都可以，但我更喜欢：

```
int a = func();
assert(a != 2); 
```**

# java - Java 和 MongoDB 线程

> ID：11152041
> 
> 赞同：1
> 
> 时间：2012-06-22T07:38:57.490
> 
> 标签：java, multithreading, mongodb

我刚刚开始使用 MongoDB + Java，我正在研究查询、集合等。

由于我正在玩的数据库非常小，所以一切都在主线程上。但是，一般来说，将所有 mongo 查询等放在另一个线程上是个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:57:06.820

Java 驱动程序正式[是线程安全](http://www.mongodb.org/display/DOCS/Java+Driver+Concurrency)的。所以你不需要太担心线程。如果您需要高性能并且不太担心数据准确性（例如记录对网页的点击），您甚至可以启用[`WriteConcern.NONE`](http://api.mongodb.org/java/2.6/com/mongodb/WriteConcern.html)Java 进程甚至不会等待 Mongo 报告成功。

# java - 使用 JAXB 解组 XML

> ID：11152046
> 
> 赞同：5
> 
> 时间：2012-06-22T07:39:15.320
> 
> 标签：java, xml, jaxb

我在这里解决了与该主题相关的几乎所有问题。但未能得到适当的解决方案。

**我的问题如下：**

我创建了一个简单的程序来解组一个我有一个 xsd 的 xml 文件。我能够成功地做到这一点。但是，如果我得到一个没有 xsd 的 xml，我如何从中获取我的属性，如果 xml 看起来像这样：

```
<items>
  <item>
    <code>12000</code>
    <name>Samsung  620</name>
    <price>9999</price>
  </item>
  <item>
    <code>15000</code>
    <name>NOKIA</name>
    <price>19999</price>
  </item>
  <item>
    <code>18000</code>
    <name>HTC 620</name>
    <price>29999</price>
  </item>
</items> 
```

在这里，我没有 xsd 来生成我的课程。我该如何进行？请帮助我。

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T09:21:19.637

下面是一种可以将用例映射到[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现的方法：

**项目**

我们将使用以下类作为根对象并用`@XmlRootElement`. 注释告诉 JAXB ，`@XmlRootElement`如果要解组的文档中的根元素是，则应该实例化此类`items`，您还可以指定不同的名称`@XmlRootElement(name="foo")`。

```
package forum11152046;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
public class Items {

    private List<Item> items;

    @XmlElement(name="item")
    public List<Item> getItems() {
        return items;
    }

    public void setItems(List<Item> items) {
        this.items = items;
    }

} 
```

**物品**

在此示例中，我创建了一个类，其中所有属性名称直接对应于 XML 文档中的名称。这意味着不需要添加任何注释。如果您需要覆盖默认名称，您可以使用注释`@XmlElement`来执行此操作。我在属性的类中使用`@XmlElement`注释来执行此操作。`Items``items`

```
package forum11152046;

public class Item {

    private int code;
    private String name;
    private int price;

    public int getCode() {
        return code;
    }

    public void setCode(int code) {
        this.code = code;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getPrice() {
        return price;
    }

    public void setPrice(int price) {
        this.price = price;
    }

} 
```

**演示**

```
package forum11152046;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Items.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum11152046/input.xml");
        Items items = (Items) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(items, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<items>
    <item>
        <code>12000</code>
        <name>Samsung  620</name>
        <price>9999</price>
    </item>
    <item>
        <code>15000</code>
        <name>NOKIA</name>
        <price>19999</price>
    </item>
    <item>
        <code>18000</code>
        <name>HTC 620</name>
        <price>29999</price>
    </item>
</items> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T07:49:57.193

**如果你想坚持使用 JAXB**，你可以自己编写一个 XML Schema Document 来验证这样的 XML（它看起来很简单，但它只是一个实例，你需要事先找出这些文档中可能发生的变化）或创建一个 POJO使用与这些节点匹配的[JAXB 注释。](http://jaxb.java.net/tutorial/section_6_1-JAXB-Annotations.html#JAXB%20Annotations)恐怕没有别的办法了。您仍然必须清楚格式允许的内容。

# linux - 如何从 linux/fedora 中的 usr/bin 中删除文件夹或文件

> ID：11152057
> 
> 赞同：-1
> 
> 时间：2012-06-22T07:40:06.543
> 
> 标签：linux, fedora

我正在使用 Fedora，

不幸的是，我在 bin 文件夹中下载了一个包（例如“selenium”或“chrome”）。但我不希望 bin 文件夹中的那个包，我想从文件夹中删除它，我无法手动以及从终端执行此操作，所以任何人都可以让我知道如何从 bin 文件夹中删除一个包.

实际上我正在尝试从终端下载如下软件包

```
svn checkout http://selenium.googlecode.com/svn/trunk/ selenium- 
read-only 
```

但是我在下载 ie 时没有在终端中看到我的路径`usr/bin`，所以这个包现在已经下载到 bin 文件夹中了。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T07:55:12.453

/usr/bin 文件夹是一个受保护的文件夹，通常 root 用户可以完全访问它，所以如果你想对其进行更改，你应该有一个完全访问权限，可以通过“su”或“sudo”命令获得尝试这些命令在您的终端上

```
su
<type your root password>
cd /usr/bin
rm <your special file names you want to remove> 
```

你也可以通过 sudo 来完成

```
cd /usr/bin
sudo rm <your special file names you want to remove>
<type your root password> 
```

# javascript - 我的悬停效果在 Google Chrome 中加载图像之前显示灰色区域

> ID：11152059
> 
> 赞同：0
> 
> 时间：2012-06-22T07:40:18.763
> 
> 标签：javascript, html, css, cross-browser, dom-events

我是一名网络开发人员，很快就推出了一个网站，问题是，我在图像拇指上做了一个悬停效果，首先显示放大的小拇指，然后立即显示大拇指，两者大小相同，所以效果是首先你看到一个模糊的图像，然后是完整的图像。它在 IE、Opera 和 Firefox 中运行良好，但在 Google Chrome 上，不是放大的小拇指，而是显示灰色屏幕，让我发疯。我到处搜索，但无济于事。

这是我使用的 Javascript 函数：

```
function trailOn2(thumbimg,imgtitle,username,imgid,imgsize,credit,level,thw,thh,smallmedium,smallThumbPath){
var smallmedium = (smallmedium == null) ? 0 : smallmedium;
var isinstore = 0;
if (thumbimg.indexOf("storeimages/item") >= 0) {
    isinstore = 1;
}
switch(smallmedium)
{
    case 1:
        var thumbimgprev = thumbimg.replace('/thumbs/400x149', '/thumbs/142x52');
        break;
    case 0:
        var thumbimgprev = thumbimg.replace('/thumbs/400x149', '/thumbs/142x52');
        break;
    case 2:
        var thumbimgprev = thumbimg.replace(/thumbs/, "small");
        break;
}
thumbimgprev=smallThumbPath;
gettrailobj().left="-500px";
divthw = parseInt(thw) + 2;
smthw = parseInt(thw) + 2;
halfthh = 50;
halfthh = Math.ceil(parseInt(thh)/2);
topx = halfthh - 9;
smthh = parseInt(thh) + 2;
var static_adr = 'http://www.timelineimages.com/'

if (navigator.userAgent.indexOf("Opera")!=-1)
    htm2 = 'border-width:0px;margin:0px;z-index:53;layer-background-color: #F0F3F6;background-color:#F0F3F6;padding:3px;';
if (navigator.userAgent.indexOf("Firefox")!=-1 || navigator.userAgent.indexOf("Safari")!=-1)
    htm2 = 'border-width:0px;margin:0px;z-index:53;layer-background-color: #F0F3F6;background-color:#F0F3F6;padding:3px;';      
if (navigator.userAgent.indexOf("MSIE")!=-1){
    htm2='border-width:0px;margin:0px;z-index:53;layer-background-color: #F0F3F6;background-color:#F0F3F6;padding:3px;';
}else{
    htm2='border-width:0px;margin:0px;z-index:53;layer-background-color: #F0F3F6;background-color:#F0F3F6;padding:3px;';
}

html = '<div id="div_2" style="'+htm2+'">'+imgtitle+'<br>'+'</div></div><div style="visibility:hidden"><div style="height:'+thh+'px">&nbsp;</div>';

htm ='';
htm+='<div style="width:'+divthw+'px;height:100%;border: 1px none #ffffff; padding:10px;z-index:51 ">';
    htm+='<div style="width:'+thw+'px;background-color: #FFFFFF; layer-background-color: #FFFFFF;z-index:51">';
        htm+='<div style="border-width:0px;margin:0px;padding:0px;background-color: #ffffff; layer-background-color: #ffffff;z-index:51;position:absolute;width:'+thw+'px;height:'+smthh+'px">';

            htm+='<img  src="'+thumbimgprev+'" width="'+smthw+'" height="'+smthh+'" border="0">';
        htm+='</div>';
        htm+='<div style="border-width:0px;margin:0px;padding:0px;z-index:52;position:absolute;text-align: center;width:'+thw+'px;top:'+topx+'px;">';
        htm+='</div>';
        htm+='<div style="border-width:0px;margin:0px;padding:0px;z-index:51;position:absolute;width:'+thw+'px;">';
            htm+='<div style="border: 1px solid #ffffff;width:'+thw+'px;">';
                htm+='<img name="btcontainer" id="btcontainer" src="'+static_adr+'images/separator.gif" border="0" width="'+thw+'" height="'+thh+'" >';
        ///////////////////////
        htme='</div>';
    htme+='</div>';
htme+='</div>';
gettrailobject().innerHTML = htm+html+htme;
gettrailobject().style.zIndex=100;

if (document.getElementById)
    document.getElementById('btcontainer').src = thumbimg;
else if (document.all)
    document.all.btcontainer.src = thumbimg;
gettrailobj().visibility="visible";
divw = parseInt(thw)+25;
divh = parseInt(thh)+130;
mm_hoverThumb=1;
document.onmousemove=followmouse;
 }

function truebody()
 {

if(navigator.userAgent.toLowerCase().indexOf('chrome') > -1 || navigator.userAgent.toLowerCase().indexOf('safari') > -1)
{
    return document.body;
}

if (navigator.userAgent.toLowerCase().indexOf('opera') > -1 || navigator.userAgent.toLowerCase().indexOf('firefox') > -1  || navigator.userAgent.toLowerCase().indexOf('msie') > -1 )
{
    return document.documentElement;
}

 }
function followmouse(e)
{
    var docwidth=document.all? truebody().scrollLeft+truebody().clientWidth : pageXOffset+window.innerWidth-15
    var docheight=document.all? Math.min(truebody().scrollHeight, truebody().clientHeight) : Math.min(document.body.offsetHeight, window.innerHeight)
    if(typeof e != "undefined")
    {
    if(docwidth < 15+e.pageX+divw)
        xcoord = e.pageX-divw-5;
    else
        xcoord = 15+e.pageX;
    if(docheight < 15+e.pageY+divh)
        ycoord = 15+e.pageY-Math.max(0,(divh + e.pageY - docheight - truebody().scrollTop - 30));
    else
        ycoord = 15+e.pageY;
    }
    else if (typeof window.event != "undefined")
    {
    if(docwidth < 15+truebody().scrollLeft+event.clientX+divw)
        xcoord = truebody().scrollLeft-5+event.clientX-divw;
    else
        xcoord = truebody().scrollLeft+15+event.clientX;

    if(docheight < 15+truebody().scrollTop+event.clientY+divh)
        ycoord = 15+truebody().scrollTop+event.clientY-Math.max(0,(divh + event.clientY - docheight - 30));
    else
        ycoord = truebody().scrollTop+15+event.clientY;
    }
    gettrailobj().left=xcoord+"px"
    gettrailobj().top=ycoord+"px"
    }

    Array.prototype.in_array = function ( obj ) {
    var len = this.length;
    for ( var x = 0 ; x <= len ; x++ ) {
        if ( this[x] == obj ) return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:50:43.560

老实说，我没有意志力来查看您的代码。因此，这是一种适用于现代浏览器的替代方案。与 Chrome 一样，如果不支持以下方法（例如 Internet Explorer），您可能希望使用您的代码作为后备。

**演示**
[http://jsfiddle.net/LpVqD/](http://jsfiddle.net/LpVqD/)

**html示例**

```
<ul>
    <li><img src="http://lorempixel.com/200/200/sports/1" data-large="http://lorempixel.com/400/400/sports/1" /></li>
    <li><img src="http://lorempixel.com/200/200/sports/2" data-large="http://lorempixel.com/400/400/sports/2" /></li>
    <li><img src="http://lorempixel.com/200/200/sports/3" data-large="http://lorempixel.com/400/400/sports/3" /></li>
    <li><img src="http://lorempixel.com/200/200/sports/4" data-large="http://lorempixel.com/400/400/sports/4" /></li>
    <li><img src="http://lorempixel.com/200/200/sports/5" data-large="http://lorempixel.com/400/400/sports/5" /></li>
    <li><img src="http://lorempixel.com/200/200/sports/6" data-large="http://lorempixel.com/400/400/sports/6" /></li>
</ul>​ 
```

**CSS 示例**

```
ul {
    list-style: none;
    margin: 0;
    padding: 0;
}
li {
    display: block;
    float: left;
    position: relative;
    margin: 20px;
    width: 200px;
    height: 200px;
}
li img {
    height: 100%;
    width: 100%;
    position: absolute;
}
li:hover img {
    -moz-transform: scale(2);
    -webkit-transform: scale(2);
    -o-transform: scale(2);
    -ms-transform: scale(2);
    transform: scale(2);
    position: absolute;
    z-index: 1;
}
​ 
```

**javascript**

```
$('img').mouseenter(function() {
    $(this).attr('src', $(this).data('large'));
});
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:23:13.210

查看整个源代码功能后：

```
function trailOn2(thumbimg,imgtitle,username,imgid,imgsize,credit,level,thw,thh,smallmedium,smallThumbPath){
var smallmedium = (smallmedium == null) ? 0 : smallmedium;
var isinstore = 0;
if (thumbimg.indexOf("storeimages/item") >= 0) {
    isinstore = 1;
}
switch(smallmedium)
{
    case 1:
        var thumbimgprev = thumbimg.replace('/thumbs/400x149', '/thumbs/142x52');
        break;
    case 0:
        var thumbimgprev = thumbimg.replace('/thumbs/400x149', '/thumbs/142x52');
        break;
    case 2:
        var thumbimgprev = thumbimg.replace(/thumbs/, "small");
        break;
}
thumbimgprev=smallThumbPath;
gettrailobj().left="-500px";
divthw = parseInt(thw) + 2;
smthw = parseInt(thw) + 2;
halfthh = 50;
halfthh = Math.ceil(parseInt(thh)/2);
topx = halfthh - 9;
smthh = parseInt(thh) + 2;
var static_adr = 'http://www.timelineimages.com/'

if (navigator.userAgent.indexOf("Opera")!=-1)
    htm2 = 'border-width:0px;margin:0px;z-index:53;layer-background-color: #F0F3F6;background-color:#F0F3F6;padding:3px;';
if (navigator.userAgent.indexOf("Firefox")!=-1 || navigator.userAgent.indexOf("Safari")!=-1)
    htm2 = 'border-width:0px;margin:0px;z-index:53;layer-background-color: #F0F3F6;background-color:#F0F3F6;padding:3px;';      
if (navigator.userAgent.indexOf("MSIE")!=-1){
    htm2='border-width:0px;margin:0px;z-index:53;layer-background-color: #F0F3F6;background-color:#F0F3F6;padding:3px;';
}else{
    htm2='border-width:0px;margin:0px;z-index:53;layer-background-color: #F0F3F6;background-color:#F0F3F6;padding:3px;';
}

html = '<div id="div_2" style="'+htm2+'">'+imgtitle+'<br>'+'</div></div><div style="visibility:hidden"><div style="height:'+thh+'px">&nbsp;</div>';

htm ='';
htm+='<div style="width:'+divthw+'px;height:100%;border: 1px none #ffffff; padding:10px;z-index:51 ">';
    htm+='<div style="width:'+thw+'px;background-color: #FFFFFF; layer-background-color: #FFFFFF;z-index:51">';
        //here htm+='<div style="border-width:0px;margin:0px;padding:0px;background-color: #ffffff; layer-background-color: #ffffff;z-index:51;position:absolute;width:'+thw+'px;height:'+smthh+'px">';

         //and here    htm+='<img  src="'+thumbimgprev+'" width="'+smthw+'" height="'+smthh+'" border="0">';
    //and this one here     htm+='</div>';
        htm+='<div style="border-width:0px;margin:0px;padding:0px;z-index:52;position:absolute;text-align: center;width:'+thw+'px;top:'+topx+'px;">';
        htm+='</div>';
        htm+='<div style="border-width:0px;margin:0px;padding:0px;z-index:51;position:absolute;width:'+thw+'px;">';

            htm+='<div style="border: 1px solid #ffffff;width:'+thw+'px;">';
   /*and here changed the src with the small thumb*/              htm+='<img name="btcontainer" id="btcontainer" src="'+thumbimgprev+'" border="0" width="'+thw+'" height="'+thh+'" >';
            ///////////////////////
           htme='</div>';
    htme+='</div>';
htme+='</div>';
gettrailobject().innerHTML = htm+html+htme;
gettrailobject().style.zIndex=100;

if (document.getElementById)
    document.getElementById('btcontainer').src = thumbimg;
else if (document.all)
    document.all.btcontainer.src = thumbimg;
gettrailobj().visibility="visible";
divw = parseInt(thw)+25;
divh = parseInt(thh)+130;
mm_hoverThumb=1;
document.onmousemove=followmouse;
 } 
```

我已经删除了一个无用的整个 div 并更改了最后一个图像 src，寻找评论，需要加载的小拇指。

```
 //here htm+='<div style="border-width:0px;margin:0px;padding:0px;background-color: #ffffff; layer-background-color: #ffffff;z-index:51;position:absolute;width:'+thw+'px;height:'+smthh+'px">';

     //and here    htm+='<img  src="'+thumbimgprev+'" width="'+smthw+'" height="'+smthh+'" border="0">';
//and this one here     htm+='</div>'; 
```

如果元素已加载，我的函数将 src 替换为大元素。

```
 htm+='<img name="btcontainer" id="btcontainer" src="'+thumbimgprev+'" border="0" width="'+thw+'" height="'+thh+'" >'; 
```

感谢您的回答，在您的帮助下，我已经完成了一大块代码。不过，作为旁注，我会使用 jquery 来完成，但这是公司提供给我的，这就是我所做的。再次感谢！

# sql - 用数据填充 SQL 表以用于绘图目的

> ID：11152062
> 
> 赞同：1
> 
> 时间：2012-06-22T07:40:36.540
> 
> 标签：sql, tsql, sql-server-2005, function

**SQL 服务器 2005**

我有一个 SQL 函数 (ftn_GetExampleTable)，它返回一个包含多个结果行的表

```
EXAMPLE

ID    MemberID MemberGroupID   Result1    Result2 Result3 Year Week
1     1        1               High Risk  2       xx      2011 22
2     11       4               Low Risk   1       yy      2011 21 
3     12       5               Med Risk   3       zz      2011 25
etc. 
```

现在我在上面的表格上为结果 2 进行计数和分组，所以我得到

```
SELECT MemberGroupID, Result2, Count(*) AS ExampleCount, Year, Week 
FROM ftn_GetExampleTable 
GROUP BY MemberGroupID, Result2, Year, Week

MemberGroupID  Result2  ExampleCount Year Week
1              2        4            2011 22
4              1        2            2011 21
5              3        1            2011 25 
```

现在想象一下，当我在 2011 年第 20 周和第 23 周之间绘制这个新表时，您会看到它不会在这个示例中绘制 20 或 23 或某些组甚至某些结果，因为它们不在包含的数据中，所以我需要将“错误数据”插入此表中，该表具有所有可能性，因此即使计数为 0，它们至少会显示在图表上，这有意义吗？

我想知道最简单和最动态的方式，因为它可能是我想要绘制的 Result1 或 Result3（不同的列类型）。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:02:29.617

看起来您的维度是：`MemberGroupID`、`Result2`和周（`Year`、`Week`）。

解决此问题的一种方法是生成所有维度所需的所有值的列表，并生成它们的笛卡尔积。举个例子，

```
SELECT m.MemberGroupID, n.Result2, w.Year, w.Week
  FROM (SELECT MemberGroupID FROM ftn_GetExampleTable GROUP BY MemberGroupID) m
 CROSS
  JOIN (SELECT Result2       FROM ftn_GetExampleTable GROUP BY Result2      ) n
 CROSS
  JOIN (SELECT Year, Week FROM myCalendar WHERE ... ) w 
```

您不一定需要名为 myCalendar 的表。（这种方法似乎很流行。）您只需要一个行源，您可以从中派生一个 (Year, Week) 元组列表。（在 Stackoverflow 的其他地方有问题的答案，如何生成日期列表。）

MemberGroupID 和 Result2 值的列表不必来自 ftn_GetExampleTable 行源，您可以替换另一个查询。

有了这些维度的笛卡尔积，你就有了一个完整的“网格”。现在您可以 LEFT JOIN 您的原始结果集。

在“gappy”结果查询中没有匹配行的任何地方，都会返回 NULL。您可以保留 NULL，或将其替换为 0，如果它是您要返回的“计数”，这可能是您想要的。

```
SELECT d.MemberGroupID
     , d.Result2
     , d.Year
     , d.Week
     , IFNULL(r.ExampleCount,0) as ExampleCount
  FROM ( <dimension query from above> ) d
  LEFT
  JOIN ( <original ExampleCount query> ) r
    ON r.MemberGroupID  = d.MemberGroupID
    AND r.Result2       = d.Result2
    AND r.Year          = d.Year
    AND r.Week          = d.Week 
```

可以重构该查询以使用公用表表达式，这使查询更易于阅读，尤其是在您包含多个度量时。

```
; WITH d AS ( /* <dimension query with no gaps (example above)> */ 
       )
     , r AS ( /* <original query with gaps> */
              SELECT MemberGroupID, Result2, Count(*) AS ExampleCount, Year, Week
              FROM ftn_GetExampleTable
              GROUP BY MemberGroupID, Result2, Year, Week
       )
SELECT d.*
     , IFNULL(r.ExampleCount,0)
  FROM d
  LEFT 
  JOIN r 
    ON r.Year=d.Year AND r.Week=d.Week AND r.MemberGroupID = d.MemberGroupID
       AND r.Result2 = d.Result2 
```

这不是您问题的完整有效解决方案，但它概述了您可以使用的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:24:09.170

每当我需要在 SQL-Server 中生成序列时，我都会使用该`sys.all_objects`表和`ROW_NUMBER`函数，然后根据需要对其进行操作：

```
SELECT  ROW_NUMBER() OVER(ORDER BY Object_ID) AS Sequence
FROM    Sys.All_Objects 
```

因此，对于年份和周数列表，我将使用：

```
DECLARE @StartDate  DATETIME,
        @EndDate    DATETIME
SET @StartDate = '20110101'
SET @EndDate = '20120601'

SELECT  DATEPART(YEAR, Date) AS YEAR,
        DATEPART(WEEK, Date) AS WeekNum
FROM    (   SELECT  DATEADD(WEEK, ROW_NUMBER() OVER(ORDER BY Object_ID) - 1, @StartDate) AS Date
            FROM    Sys.All_Objects
        ) Dates
WHERE   Date < @endDate 
```

日期子查询在开始日期和结束日期之间以一周的间隔提供日期列表。

因此，在您的示例中，最终结果将类似于：

```
DECLARE @StartDate  DATETIME,
        @EndDate    DATETIME
SET @StartDate = '20110101'
SET @EndDate = '20120601'

;WITH Data AS
(   SELECT  MemberGroupID, 
            Result2, 
            Count(*) AS ExampleCount, 
            Year, 
            Week 
    FROM    ftn_GetExampleTable 
    GROUP BY MemberGroupID, Result2, Year, Week
), Dates AS
(   SELECT  DATEPART(YEAR, Date) AS YEAR,
            DATEPART(WEEK, Date) AS WeekNum
    FROM    (   SELECT  DATEADD(WEEK, ROW_NUMBER() OVER(ORDER BY Object_ID) - 1, @StartDate) AS Date
                FROM    Sys.All_Objects
            ) Dates
    WHERE   Date < @endDate
)
SELECT  YearNum, 
        WeeNum, 
        MemberID, 
        Result2, 
        COALESCE(ExampleCount, 0) AS ExampleCount
FROM    Dates
        LEFT JOIN Data
            ON YearNum = Data.Year
            AND WeekNum = Data.Week 
```

# android - android应用程序启动问题

> ID：11152063
> 
> 赞同：0
> 
> 时间：2012-06-22T07:40:36.617
> 
> 标签：android

我是安卓新手。我正在努力学习安卓。为此，我的意图是在模拟器中运行 hello world 应用程序。但是在运行应用程序期间，在控制台中我遇到了以下问题：

```
[2012-06-22 13:07:01 - hello] ------------------------------
[2012-06-22 13:07:01 - hello] Android Launch!
[2012-06-22 13:07:01 - hello] adb is running normally.
[2012-06-22 13:07:01 - hello] Could not find hello.apk! 
```

请帮助解决此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:44:20.613

有时没有创建 apk。试试这个方法。

转到您的 Eclipse 项目菜单，然后清除选项并选择项目，然后再次运行。它可以帮助你。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T07:50:32.523

APK 不是创建，请转到您的 Eclipse 菜单并单击单击选项，现在选择您的项目并单击确定按钮

或者

您也可以选择自动构建功能。

# .net - 如何使 msi 安装程序自动运行包含的 .exe 文件？

> ID：11152065
> 
> 赞同：1
> 
> 时间：2012-06-22T07:40:51.097
> 
> 标签：.net, visual-studio-2010, installation, windows-installer, post-build-event

我在我的 VS2010 安装项目中添加了一个外部 .exe 文件，我希望安装程序在安装结束时自动运行它。

我正在尝试使用 Post-build 事件，并将命令行放在那里，例如`$(OutDir)program.exe`. 但它似乎没有用。那么我在这里错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:35:23.263

通常，要启动由软件包安装的文件，会使用自定义操作。您也可以在 VS 中添加一个。在您的情况下，要尽可能晚地启动 EXE，您可以在 Commit 阶段添加它。

# java - 在java中运行pig而不嵌入pig脚本

> ID：11152068
> 
> 赞同：3
> 
> 时间：2012-06-22T07:41:15.757
> 
> 标签：java, apache-pig

我是 pig 脚本、Hadoop、Hbase 的新手。这是我需要知道的。我想运行一个 pig 脚本，我不想将 pig 脚本嵌入到我的 java 程序中，并且想通过传递必要的 pig 脚本和参数（可能是参数文件）的任何 Pig 执行方法来运行它。核心猪库或任何其他库是否提供执行猪脚本的方法。我已经尝试过使用 java 运行时 exec 方法，我用空格分隔的字符串传递了一些参数，所以我放弃了通过运行时 exec 方法调用 pig grunt 命令，因为它不是执行 pig 命令的正确方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T18:34:33.357

您可以使用 org.apache.pig.PigServer 从 Java 程序运行 pig 脚本。

```
PigServer pigServer = new PigServer(ExecType.MAPREDUCE);
pigServer.registerScript("scripts/test.pig"); 
```

在类路径上需要“pig.properties”。

```
fs.default.name=hdfs://<namenode-hostname>:<port>
mapred.job.tracker=<jobtracker-hostname>:<port> 
```

或者将 java.util.Properties 的实例传递给 PigServer 构造函数。

```
Properties props = new Properties();
props.setProperty("fs.default.name", "hdfs://<namenode-hostname>:<port>");
props.setProperty("mapred.job.tracker", "<jobtracker-hostname>:<port>");
PigServer pigServer = new PigServer(ExecType.MAPREDUCE, props); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:38:52.333

我不确定我是否理解您的要求。您想知道如何从 Java 程序运行 Pig 脚本吗？

如果是这样，我们将使用该类`org.apache.pig.PigRunner`。

```
PigStats pigStats = PigRunner.run(args, null); 
```

它的 Javadoc 指出：

> 帮助在 Java 程序中运行 PIG 脚本的实用程序。

然而，根据我的经验，Pig 并不是真的打算以这种方式使用（至少在 0.8 版中）。我们遇到了一些问题，例如打开的文件流和未删除的临时文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:05:31.957

由于其他人已经通过在 java 中嵌入相同的方式很好地解释了 pig 的执行，所以让我补充一下如何在没有 java 的情况下运行参数化的 pig。

在这种情况下，您所需要的只是将猪代码行保存为猪文件，例如`myFirstPigScript.pig`.

接下来需要的是内部参数。那么这是`myFirstPigScript.pig`使用三个输入参数运行您的方法。

```
pig -p in1=file1.txt -p in2=file2.txt -p outdirectory=outdirectory myFirstPigScript.pig 
```

你的猪脚本看起来像

```
A = load '$in1' USING PigStorage(',') AS (id_one:chararray,file1field1:chararray); 
B = load '$in2' USING PigStorage(',') AS (id_two:chararray,file2field1:chararray); 
C = join A by id_one, B by id_two;
store D into '$outdirectory' USING PigStorage(',') ; 
```

示例输入文件将是一个两列 csv 文件

输出“部分”文件将出现在目录中

# android - 如何均匀对齐两个微调器？(%50-%50)

> ID：11152070
> 
> 赞同：4
> 
> 时间：2012-06-22T07:41:19.183
> 
> 标签：android, android-layout

我的意思是我有一条线，我想在其中放 2 个水平微调器。我想把它们均匀放置。但我没有设置它。当我将它设置为 3,3 inc 屏幕时，其他屏幕有问题，因为我使用 dp 。我用什么？Lineerlayout 还是相对的？阿纳德 我如何设置它们？谢谢。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:orientation="horizontal" >

        <Spinner
            android:id="@+id/spinner1"
            android:layout_width="309dp"
            android:layout_height="wrap_content" />

    <Spinner
        android:id="@+id/spinner2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

这是 IMG 显示我的问题：http: //img4host.net/viewer.php?img= [220942354fe421eb92ec5](http://img4host.net/viewer.php?img=220942354fe421eb92ec5)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T07:44:25.023

在线性布局中使用权重总和.....

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="1" >

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".5" />

    <Spinner
        android:id="@+id/spinner2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".5" />

</LinearLayout> 
```

![在此处输入图像描述](../Images/cb01bb26341d86498dfb1aedc7c9e96f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T07:44:14.097

您可以使用下面的代码来动态获取独立于设备的宽度，

```
 DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);

metrics.heightPixels;
int width=metrics.widthPixels; 
```

现在将宽度分成两部分，`width=width/2;`并在 Activity 中动态设置微调器的宽度。

```
spinner.setLayoutParams(new LayoutParams(width,LayoutParams.WRAP_CONTENT)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T07:49:01.850

`android:layout_weight="float value here"`在您的旋转器内使用。这应该够了吧。

请参阅[此](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html#attr_android%3alayout_weight)进行解释。

# asp.net-mvc-3 - MultiSelectList 不会突出显示 selectedValues 列表中的项目

> ID：11152074
> 
> 赞同：1
> 
> 时间：2012-06-22T07:41:27.277
> 
> 标签：asp.net-mvc-3, razor, listbox, viewmodel

在 ASP.NET MVC (Razor) 项目中，我在编辑视图中使用带有多选选项的 ListBox，在使用 in 突出显示先前选择的项目时出现问题`selectedValues`，`MultiSelectList`所以我之前问了一个[关于 SO](https://stackoverflow.com/questions/11077032/multiselectlist-does-not-highlight-previously-selected-items)的问题。根据对该问题给出的答案，我决定使用 ViewModel（带有 AutoMapper）将数据传递给视图，而不使用`ViewBag`，但我仍然有同样的问题。它没有选择`selectedValues`列表中给出的项目

这是我的新代码

**楷模**

```
public class Post
{
    public int Id { get; set; }
    ...
    public string Tags { get; set; }

}

public class PostEditViewModel
{
    private DocLibraryContext db = new DocLibraryContext();

    public int Id { get; set; }
    ..
    public MultiSelectList TagsList { get; set; }

} 
```

**控制器**

```
public ActionResult Edit(int id)
    {

        Post post = db.Posts.Find(id);
        PostEditViewModel postEditViewModel = Mapper.Map<Post, PostEditViewModel>(post);

        var tagsQuery = from d in db.Tags
                        orderby d.Name
                        select d;
        postEditViewModel.TagsList = new MultiSelectList(tagsQuery, "Id", "Name", post.Tags.Split(','));

        return View(postEditViewModel);
    } 
```

**看法**

```
<div class="editor-field">
    @Html.ListBoxFor(model => model.Tags, Model.TagsList as MultiSelectList)
</div> 
```

我在这里做错了什么？请帮忙....

* * *

**更新 1：**

将控制器更改为

```
public ActionResult Edit(int id)
    {

        Post post = db.Posts.Find(id);
        PostEditViewModel postEditViewModel = Mapper.Map<Post, PostEditViewModel>(post);

        var tagsQuery = from d in db.Tags
                        orderby d.Name
                        select d;

        var selectedIds = post.Tags.Split(',').Select(n => tagsQuery.First(t => t.Name == n));
        postEditViewModel.TagsList = new MultiSelectList(tagsQuery, "Id", "Name", selectedIds);

        return View(postEditViewModel);
    } 
```

但我得到相同的结果。

* * *

**更新 2：**

我尝试更改代码（如[本](http://nerddinnerbook.s3.amazonaws.com/Part6.htm)教程中所述），它有效，但我需要使用以前的方法..

**楷模**

```
 public Post Post { get; set; }
    public MultiSelectList TagsList { get; set; }

    public PostEditViewModel(Post post)
    {
        Post = post;
        var tagsQuery = from d in db.Tags
                        orderby d.Name
                        select d;
        TagsList = new MultiSelectList(tagsQuery, "Name", "Name", post.Tags.Split(','));
    } 
```

**控制器**

```
public ActionResult Edit(int id)
    {

        Post post = db.Posts.Find(id);
        return View(new PostEditViewModel(post));
    } 
```

**看法**

```
<div class="editor-field">
    @Html.ListBox("Tags", Model.TagsList as MultiSelectList)
</div> 
```

有什么区别……？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T07:46:37.210

问题在于您的构造`MultiSelectList`：

```
new MultiSelectList(tagsQuery, "Id", "Name", post.Tags.Split(',')); 
```

您正在指定元素的值将从每个标记的`Id`属性中获取，但是对于实际选择的值，您将传递一个字符串数组，该数组可能对应于`Name`标记的 s。`Name`您也可以指定为从中确定显示文本的属性，这并不重要；`selectedValues`参数与值匹配，而不是显示文本。

要解决此问题，请将每个标签名称投影到其对应的`Id`：

```
var selectedIds = post.Tags.Split(',').Select(n => tagsQuery.First(t => t.Name == n).Id);
new MultiSelectList(tagsQuery, "Id", "Name", selectedIds); 
```

**更新：**

糟糕，上面的代码有错误。

我编辑了答案，`.Id`在初始化结束时添加了一个必需的`selectedIds`- 以前的版本是选择标签，而不是 ids（当然他们比较不相等，苹果和橙子）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:00:57.420

我有同样的问题，我使用自己的扩展方法生成html并解决了问题

```
 public static MvcHtmlString ListBoxMultiSelectFor<TModel, TProperty>(
        this HtmlHelper<TModel> helper,
        Expression<Func<TModel, TProperty>> expression,
        IEnumerable<SelectListItem> selectList,
        object htmlAttributes)
    {
        return ListBoxMultiSelectFor(helper, expression, selectList, new RouteValueDictionary(htmlAttributes));
    }

    public static MvcHtmlString ListBoxMultiSelectFor<TModel, TProperty>(
        this HtmlHelper<TModel> helper,
        Expression<Func<TModel, TProperty>> expression,
        IEnumerable<SelectListItem> selectList,
        IDictionary<string, object> htmlAttributes)
    {
        string name = ExpressionHelper.GetExpressionText(expression);

        TagBuilder selectTag = new TagBuilder("select");
        selectTag.MergeAttributes(htmlAttributes);
        selectTag.MergeAttribute("id", name, true);
        selectTag.MergeAttribute("name", name, true);
        foreach (SelectListItem item in selectList)
        {
            TagBuilder optionTag = new TagBuilder("option");
            optionTag.MergeAttribute("value", item.Value);
            if (item.Selected) optionTag.MergeAttribute("selected", "selected");
            optionTag.InnerHtml = item.Text;
            selectTag.InnerHtml += optionTag.ToString();
        }

        return  new MvcHtmlString(selectTag.ToString());
    } 
```

# wso2 - wso2 mashup 服务器与 wso2 gadget 服务器

> ID：11152075
> 
> 赞同：2
> 
> 时间：2012-06-22T07:41:29.243
> 
> 标签：wso2

我正在尝试决定如何在 WSO2 Gadget Server 和 WSO2 Mashup Server 之间进行选择。

它们的功能似乎有很多重叠之处。

您将何时以及如何在两台服务器之间进行选择？在某些情况下您可能需要两台服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:48:11.420

通过查阅各种文献，例如[小工具服务器数据表](http://wso2.com/wp-content/datasheets/GS.pdf)和[混搭服务器数据表](http://wso2.com/wp-content/datasheets/MS.pdf)，我的结论如下：

1) Mashup 服务器用于从组织内部或外部的各种不同来源（例如网页、RSS、数据服务、Web 服务）“拉取”内容，并以各种格式（例如网页、电子邮件）公开该内容，即时通讯，文件）。请参阅 Mashup Server 数据表第 2 页上的图表。

2) 小工具服务器用于创建可能在组织内部或外部的小工具的用户仪表板。可以创建小工具以公开内部应用程序服务。在这方面，Gadget 服务器就像一个轻量级的门户服务器。请参阅小工具服务器数据表第 2 页上的图表。

3) 混搭服务器可以将拉入的内容公开为可供小工具服务器使用的小工具。

# ruby-on-rails - Rails - 延迟作业完成

> ID：11152078
> 
> 赞同：2
> 
> 时间：2012-06-22T07:41:58.390
> 
> 标签：ruby-on-rails, ruby-on-rails-3, delayed-job

我有一个基于 ruby​​ on rails 的 Web 应用程序，它使用[了这个](https://github.com/collectiveidea/delayed_job)延迟的工作 gem。

我有一个触发延迟作业的功能，该功能又会触发其他几个延迟作业。有没有办法，嵌套案例是一个可以指示与父级相关的所有作业都已完成的事件？或者当我尝试检索文档时，我是否只需要处理可用的任何数据？

例子：

```
def create_vegetable
#..... creates some vegetable
end

def create_vegetable_asynchronously id
  Farm.delay(priority: 30, owner: User.where("authentication.auth_token" => token).first, class_name: "Farm", job_name:create "create_vegetable_asynchronously").create_vegetable(id)
end

def create_farm_asynchronously data
  data.each do |vegetable|
    create_vegetable_asynchronously vegetable.id
  end
end

handle_asynchronously :create_farm_asynchoronously 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:46:35.020

可能有点矫枉过正，但您可以明确地分层组织您的工作，并在挂钩之前使用将父工作 ID 传递给子任务。就像是：

```
class Job < Delayed::Job
  belongs_to :parent, class: 'Job' #also add db column for parent_id
end

class CreateVegetable 

   def initialize(id)
     @id = id
   end

   def perform
     Farm.create_vegetable(id)
   end

end

class CreateFarm 
   def initialize(vegetable_ids,owner_id)
     @vegetable_ids = vegetable_ids
     @owner_id = owner_id
   end

   def before(job)
     @job_id = job.id
   end

   def perform
     @vegetable_ids.each { |id| Job.enqueue CreateVegetable.new(id), priority: 30, owner_id = @owner_id, :parent_id = @job_id }
   end

end 
```

然后，当您启动创建农场时，以某种方式记住作业 ID。

```
def create_farm_asynchronously data
   owner_id = User.where("authentications.auth_token" => token).first.id
   @parent = Job.enqueue CreateFarm.new(data.map(&:id), owner_id)
end 
```

然后您可以通过以下方式检查子作业：

```
Job.where(parent_id: @parent.id) 
```

# iphone - IOS 如何用非数字拨打电话

> ID：11152081
> 
> 赞同：4
> 
> 时间：2012-06-22T07:42:02.133
> 
> 标签：iphone, objective-c, ios

> **可能重复：**
> [如何用“##”拨打电话号码？](https://stackoverflow.com/questions/10795457/how-to-dial-a-phone-number-with)

我无法用 * 和 # 拨打电话

例如：“** 002 ** 5555555555”

目前我正在使用 URL 方案，例如：*tel:+5555555555*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T07:47:16.780

我也想这样做。不可能。出于安全原因，Apple 明确禁止它：

> 为防止用户恶意重定向电话或更改电话或帐户的行为，电话应用程序支持`tel`方案中的大多数（但不是全部）特殊字符。具体来说，如果 URL 包含`*`或`#`字符，电话应用程序不会尝试拨打相应的电话号码。

来源：

*   [Apple URL 方案参考：电话链接](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/PhoneLinks.html)

# windows-phone-7 - App Hub 开发者注册

> ID：11152083
> 
> 赞同：0
> 
> 时间：2012-06-22T07:42:13.753
> 
> 标签：windows-phone-7

在过去的几周里，我决定进入 WinPhone 开发世界，因为我已经为 iPhone 开发了应用程序。

而对于 Apple，注册 / 支付 / 设备注册花了 30 分钟，而 App Hub 上的过程正在摧毁灵魂，而我闪亮的新 Lumina 是昂贵的装饰品。

当我进入 App Hub 时，右上角是带有登录链接的“Hi Visitor”。如果我点击“登录”，我会看到一个屏幕，右上角有我的电子邮件地址，屏幕标题为“添加信息”，询问出生日期和国家。我输入了这些，然后按了提交。条目清除，否则不会发生任何事情。

单击右上角的个人资料，没有与 App Hub 注册有关的信息的链接。

App Hub 论坛建议使用 SDK 附带的开发者注册程序 - 这里我收到一个错误，根据 App Hub 告诉我需要创建一个开发者帐户。我不能，因为登录不起作用。

我究竟做错了什么？这非常令人沮丧。

谢谢你的帮助

理查德

编辑屏幕图片链接：

[关联](http://bluefever.net/WinLive.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:49:33.443

尝试此链接并创建您的[APPHUB](https://users.create.msdn.com/Register)注册和付款流程。

请记住，您应该使用 hotmail 或 live mail 帐户进行此注册

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T07:58:21.050

我使用设备上的浏览器注册，没有任何问题。您可以考虑[联系](http://create.msdn.com/en-us/home/feedback)非常乐于助人且反应迅速的支持人员 - 他们甚至有专门的联系点来解决注册问题：apphub@microsoft.com

# android - 如果在任何活动中打开键盘 ID，Tabgroupactivity 的 OnBackpress 不起作用

> ID：11152085
> 
> 赞同：1
> 
> 时间：2012-06-22T07:42:18.527
> 
> 标签：android, tabs, android-activity

如果我`Tabgroupactivity`在我的应用程序中使用编辑框，我会在我的应用程序中使用。当我单击编辑框时键盘打开。在这种情况下，如果按下后退按钮，我的应用程序会退后两步。以下是我的 tabgroupactivity 代码。

```
public class TabGroupActivity extends ActivityGroup {

private ArrayList<String> mIdList;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);       
    if (mIdList == null) mIdList = new ArrayList<String>();
}

/**
 * This is called when a child activity of this one calls its finish method. 
 * This implementation calls {@link LocalActivityManager#destroyActivity} on the child activity
 * and starts the previous activity.
 * If the last child activity just called finish(),this activity (the parent),
 * calls finish to finish the entire group.
 */

//  public void finishFromChild(Activity child) {
//  
//      LocalActivityManager manager = getLocalActivityManager();
//      int index = mIdList.size()-1;
//      
//      if (index < 1) {
//          finish();
//          return;
//      }
//          
//      manager.destroyActivity(mIdList.get(index), true);
//      mIdList.remove(index); index--;
//      String lastId = mIdList.get(index);
//      Intent lastIntent = manager.getActivity(lastId).getIntent();
//      Window newWindow = manager.startActivity(lastId, lastIntent);
//      setContentView(newWindow.getDecorView());
//  }

@Override
public void finishFromChild(Activity child) 
{
    LocalActivityManager manager = getLocalActivityManager();
    int index = mIdList.size()-1; 
    if (index < 1)
    {
        finish(); 
        return;
    }
    destroy(mIdList.get(index), manager);

    mIdList.remove(index); 
    index--; 
    String lastId = mIdList.get(index); 
    Intent lastIntent = manager.getActivity(lastId).getIntent();
    Window newWindow = manager.startActivity(lastId, lastIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    //Window newWindow = manager.startActivity(lastId, lastIntent);
    setContentView(newWindow.getDecorView()); 
}

public boolean destroy(String id , LocalActivityManager manager) {

    if(manager != null){
        manager.destroyActivity(id, false);
        try {
            final Field mActivitiesField = LocalActivityManager.class.getDeclaredField("mActivities");
            if(mActivitiesField != null){
                mActivitiesField.setAccessible(true);
                @SuppressWarnings("unchecked")
                final Map<String, Object> mActivities = (Map<String, Object>)mActivitiesField.get(manager);
                if(mActivities != null){
                    mActivities.remove(id);
                }
                final Field mActivityArrayField = LocalActivityManager.class.getDeclaredField("mActivityArray");
                if(mActivityArrayField != null){
                    mActivityArrayField.setAccessible(true);
                    @SuppressWarnings("unchecked")
                    final ArrayList<Object> mActivityArray = (ArrayList<Object>)mActivityArrayField.get(manager);
                    if(mActivityArray != null){
                        for(Object record : mActivityArray){
                            final Field idField = record.getClass().getDeclaredField("id");
                            if(idField != null){
                                idField.setAccessible(true);
                                final String _id = (String)idField.get(record);
                                if(id.equals(_id)){
                                    mActivityArray.remove(record);
                                    break;
                                }
                            }
                        }
                    }
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        return true;
    }

    return false;
} 

/**
 * Starts an Activity as a child Activity to this.
 * @param Id Unique identifier of the activity to be started.
 * @param intent The Intent describing the activity to be started.
 * @throws android.content.ActivityNotFoundException.
 */
public void startChildActivity(String Id, Intent intent) { 
    Window window; 

    window = getLocalActivityManager().startActivity(Id,intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP )); 
    if (window != null) { 
        mIdList.add(Id); 
        setContentView(window.getDecorView()); 
    } 
}

/**
 * The primary purpose is to prevent systems before android.os.Build.VERSION_CODES.ECLAIR
 * from calling their default KeyEvent.KEYCODE_BACK during onKeyDown.
 */
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        //preventing default implementation previous to android.os.Build.VERSION_CODES.ECLAIR
        return true;
    }
    return super.onKeyDown(keyCode, event);
}

/**
 * Overrides the default implementation for KeyEvent.KEYCODE_BACK 
 * so that all systems call onBackPressed().
 */
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        onBackPressed();
        return true;
    }
    return super.onKeyUp(keyCode, event);
}

/**
 * If a Child Activity handles KeyEvent.KEYCODE_BACK.
 * Simply override and add this method.
 */
@Override
public void  onBackPressed  () {
    int length = mIdList.size();
    if ( length > 1) {
        Activity current = getLocalActivityManager().getActivity(mIdList.get(length-1));
        current.finish();
    }else{
        finish();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T07:49:47.713

尝试像这样向您的 EditText 添加关键侦听器，

```
 eidtText.setOnKeyListener(new OnKeyListener() {

        public boolean onKey(View arg0, int arg1, KeyEvent arg2) {
            if(arg2=KeyEvent.KEYCODE_BACK)
            {
                //handle back event here
                   onBackPressed();
                return true;
            }
            else
            {
                return false;
            }
        }
    }); 
```

# javascript - javascript 中的 $(this)

> ID：11152089
> 
> 赞同：3
> 
> 时间：2012-06-22T07:43:04.993
> 
> 标签：javascript, jquery, ruby-on-rails-3, raty

我在使用`this`js 时遇到问题。我有一个这样使用的函数`this`：

```
var refreshRequesterStar = function() {
    $(".rating").raty({
        score: function() { return $(this).attr('data-rating'); },
        readOnly: function() { return $(this).attr('data-readonly'); },
        halfShow: true
    });
}; 
```

评分 div 如下：

```
<div class="rating" data-readonly="false" data-rating="3.0" style="cursor: default; width: 100px;" title="not rated yet">
<div class="rating" data-readonly="false" data-rating="0.0" style="cursor: default; width: 100px;" title="not rated yet"> 
```

这是由这个函数调用的：

```
$("body").ajaxComplete(function(){
      refreshRequesterStar();
      $(".time_to_expire").each(function(){
            setCountDown(this);
      })
      $('select').chosen();
}); 
```

我能够设置得分值，但无法设置 readOnly 值。当我使用firebug进行调试时，我发现第一个this指向了div，而第二个this指向了window。我哪里错了？注意：我对 JavaScript 了解不多。

更多信息：我在 rails 上使用了 raty [http://www.wbotelhos.com/raty](http://www.wbotelhos.com/raty)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T07:53:34.717

文档和示例表明参数`score`和`readOnly`应该是数字和布尔值，而不是回调函数。你可能想重写你的代码：

```
$(".rating").each(function() {
    // inside the function, this refers to the .rating element being iterated
    $(this).raty({
        score:    parseFloat($(this).attr('data-rating')), // see note #1
        readOnly: $(this).attr('data-readonly') == "true", // see note #2
        halfShow: true
    });
}); 
```

1.  `.attr()`返回一个字符串；[`parseFloat()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseFloat)函数用于将字符串`"2.5"`转换为数字`2.5`
2.  `== "true"`如果属性值等于`"true"`;返回布尔值 true 在所有其他情况下返回 false

参考：

*   [jQuery.each()](http://api.jquery.com/jQuery.each/)
*   [jQuery.attr()](http://api.jquery.com/attr/)

# ios - 在 iOS 应用程序中使用 uiwebview 表单注册表单

> ID：11152090
> 
> 赞同：-4
> 
> 时间：2012-06-22T07:43:07.003
> 
> 标签：ios, iphone, app-store, native

在我的 iOS 应用程序中，我想用来`UIWebView`创建托管在我的应用程序服务器上的注册页面。

我已经实现了它并进行了实验。但是，我想知道，Apple 对从用户那里获取信息或注册`UIWebView`. 我的申请会被 Apple 拒绝吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:32:39.880

你会没事的。Apple 会同意您允许用户通过应用程序内的 UIWebView 内的网站登录。

# c# - 像 Windows 窗体一样使用 .designer.cs 生成代码

> ID：11152091
> 
> 赞同：1
> 
> 时间：2012-06-22T07:43:17.130
> 
> 标签：c#, visual-studio, visual-studio-2005, c#-2.0

我觉得我有一个大问题。

我有两个项目的解决方案。

第一个是 UI 项目。算法服务中的第二个。

我需要**在编译之前在 UI 部分****生成**（或覆盖）一个类（fileUI.cs）。

 **主要思想是，当您在 de Services 部分 (fileSA.cs) 中编辑一个类并在 UI 部分 (fileUI.cs) 中的类使用服务部分类信息 (fileSA.cs) 更新之前构建解决方案时)，然后编译。

我认为它与 VS 对每个表单的 .designer.cs 所做的类似（用户控件......）

不知道有没有可能...

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T07:49:58.347

你需要T4模板在这里

> [代码生成和 T4 文本模板](http://msdn.microsoft.com/en-us/library/bb126445.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T09:02:36.553

Visual Studio 有一种称为**单文件生成器**/**自定义工具**的机制，它正好针对这个用例：`fileUI.cs`在另一个文件发生更改时生成一个文件（在你的情况下）（`fileSA.cs`）。

请参阅 MSDN 文章[*实现单文件生成器*](http://msdn.microsoft.com/en-us/library/bb166817.aspx)以了解如何编写此类自定义文件生成器。

PS：虽然这将是适当的机制，但我认为它不会跨越项目边界。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T07:50:46.857

您可以在项目中添加自定义 msbuild 目标（右键单击项目 -> 编辑项目文件）。有关 msbuild 目标的更多信息，请参阅[msdn](http://msdn.microsoft.com/en-us/library/ms171462)。您可以将自定义任务作为此目标的一部分运行。生成代码的一种方法是使用 T4 模板。[有关在](http://www.olegsych.com/2010/04/understanding-t4-msbuild-integration/)构建过程中运行 t4 模板的更多信息。Oleg Sych 对 T4 有很多详细的解释，并且是这方面的权威，所以他的[网站](http://www.olegsych.com/2007/12/text-template-transformation-toolkit/)是一个很好的开始。**

# objective-c - 在循环中找到 CGFloat 中的最小值

> ID：11152096
> 
> 赞同：0
> 
> 时间：2012-06-22T07:43:41.190
> 
> 标签：objective-c, minimum, cgfloat, cgrectmake

我正在根据从循环变量事件中获得的参数在循环中绘制反应角，如下所示：

```
CGRectMake(cellWidth * event.xOffset,(cellHeight / MINUTES_IN_TWO_HOURS * [event minutesSinceEvent]), cellWidth,cellHeight / MINUTES_IN_TWO_HOURS * [event durationInMinutes]); 
```

在每个循环中，`minutesSinceEvent`and都会`durationInMinutes`发生变化，因此每次都会绘制不同的反应角。

我想获得循环中的最低 y 值和循环中的最大高度。简单地说，我想拥有最重要的矩形的 y 值。以及在所有下方延伸的矩形的高度。

请让我知道，如果需要任何其他信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:18:28.587

一个非常简单的方法是将所有矩形累积在一个联合矩形中：

```
CGRect unionRect = CGRectNull;
for (...) {
    CGRect currentRect = ...;
    unionRect = CGRectUnion(unionRect, currentRect);
}
NSLog(@"min Y : %f", CGRectGetMinY(unionRect));
NSLog(@"height: %f", CGRectGetHeight(unionRect)); 
```

这基本上是计算一个足够大的矩形，以包含在循环中创建的所有矩形（但不会更大）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T07:54:18.853

您可以做的是`CGRect`在循环之前声明另一个变量并跟踪其中的值：

```
CGRect maxRect = CGRectZero;
maxRect.origin.y = HUGE_VALF; //this is to set a very big number of y so the first one you compare to will be always lower - you can set a different number of course...
for(......)
{
    CGRect currentRect = CGRectMake(cellWidth * event.xOffset,(cellHeight / MINUTES_IN_TWO_HOURS * [event minutesSinceEvent]), cellWidth,cellHeight / MINUTES_IN_TWO_HOURS * [event durationInMinutes]);

   if(currentRect.origin.y < maxRect.origin.y)
       maxRect.origin.y = currentRect.origin.y;

   if(currentRect.size.height > maxRect.size.height)
       maxRect.size.height = currentRect.size.height;
}

//After the loop your maxRect.origin.y will be the lowest and your maxRect.size.height will be the greatest... 
```

# php - 如何在服务器上自动执行 php

> ID：11152101
> 
> 赞同：-2
> 
> 时间：2012-06-22T07:43:53.380
> 
> 标签：php, cron

我正在尝试每 15 分钟在服务器上自动运行一次 PHP。PHP 应该从数据库向某些联系人发送邮件。我已经创建了 PHP 并对其进行了测试，它已经准备好了。

现在我不知道如何将其设置为每 15 分钟运行一次。

我在这个网站上读了一些关于它的文章，我看到了一些关于 cronjob 的东西。我知道我存储我的 php 的服务器安装了运行 cronjobs 的东西，但老实说我不知道​​从哪里开始。我有一个 ftp，我在其中上传 phps 和一个 froxlor 管理面板。

我希望有人能用这个“下一个层次”的东西来启发我：D

非常感谢你，丹尼尔！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T07:47:01.183

键入`crontab -e`，然后添加以下行：

```
*/15 * * * * /path/to/your/php/script 
```

如果你没有给你的脚本添加执行权限，你需要添加php执行。

```
*/15 * * * * /path/to/php/executive /path/to/your/php/script 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T07:47:53.823

在管理面板中搜索“CronJobs”。那里应该有一个部分用于使用该界面添加 cron 作业。

创建 cron 作业时，您将看到有多种选项可用于定义重复任务的时间间隔。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T07:48:37.547

只是对 xdazz 所说的进行了一个小的更正：

```
*/15 * * * * php /path/to/your/php/script 
```

您需要在脚本前加上“php”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T08:00:01.583

**为 php 脚本添加一个 cronjob** 示例 cronjob 代码（在 directadmin 中）：

```
php /home/username/domains/domainaddress/public_html/phpfile.php 
```

php 脚本的示例 cronjob 代码（在 cpanel 中）：

```
php /home/username/public_html/phpfile.php 
```

# jquery - jquery Datatable 单个列过滤器

> ID：11152102
> 
> 赞同：2
> 
> 时间：2012-06-22T07:43:53.553
> 
> 标签：jquery, datatable

我尝试使用 jquery 数据表的 columnFilter 附加组件，但无法使其运行。我已经正确添加了插件，因为它没有引发任何错误，但它也没有在表上创建过滤器/搜索字段。

数据表行由服务器端创建，第一列包含复选框。你可以在下面找到我的 html 和 jquery。

可能是什么问题呢 ？

```
<table id="orderList">
                <thead>
                    <tr>
                        <th><input type=checkbox name='allSelect' class="allSelect"></th>
                        <th> h1 </th>
                        <th> h2 </th>
                        <th> h3 </th>
                        <th> h4 </th>
                        <th> h5 </th>
                    </tr>
                </thead>
            </table>

var oTable = $('#orderList').dataTable(
                {
                    "sScrollY": "350px",
                    "sScrollX": "100%",
                    "bJQueryUI": true,
                    "sPaginationType": "full_numbers",
                    "bProcessing": true,
                    "bServerSide": true,
                    "sAjaxSource": "/project/order_search_ajax/",
                    "aoColumnDefs": [
                      { 'bSortable': false, 'aTargets': [ 0 ] }
                   ]
                }
        ).columnFilter(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T07:50:08.103

行动。我必须按照文档中的说明添加页脚

```
<table id="orderList">
                <thead>
                    <tr>
                        <th><input type=checkbox name='allSelect' class="allSelect"></th>
                        <th> h1 </th>
                        <th> h2 </th>
                        <th> h3 </th>
                        <th> h4 </th>
                        <th> h5 </th>
                    </tr>
                </thead>
<tfoot>
        <tr>
            <th>Rendering engine</th>
            <th>Rendering engine</th>
            <th>Browser</th>
            <th>Platform(s)</th>
            <th>Engine version</th>
            <th>CSS grade</th>
        </tr>
    </tfoot>
            </table> 
```

# html - 在 iframe 中显示本地 htm 文件？

> ID：11152103
> 
> 赞同：2
> 
> 时间：2012-06-22T07:43:57.890
> 
> 标签：html, iframe, path, src, pageload

我正在使用 htm 格式的 MailBee.NET 对象在我的本地计算机上保存一些电子邮件。例如，使用服务器上的电子邮件 messageID 为每封电子邮件创建一个单独的文件夹

D:\电子邮件\GmailId1380ec660e0e656a\doc.htm

是从 gmail 下载的电子邮件。我还将上述路径保存在数据库中，以便以后使用。现在我试图在 iframe 中显示这个 htm 文件，但它不起作用。用户单击电子邮件，将他带到 read_email 页面，我在该页面上尝试将上述路径分配给 iframe，但 iframe 保持空白。

```
emailMessage.Attributes.Add("src",commandReader["email_message_path"].ToString()); 
```

emailMessage 是 iframe 的名称，commandReader 是普通的 SqlDataReader，我使用它来读取上述文件的路径，然后将该路径分配给 iframe 的 src 属性，我已将此代码放在 page_load 事件中。

但正如我所说，Iframe 仍然是空白的。请帮帮我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T07:57:49.600

`file`使用URI 方案引用本地文件。如果您的电子邮件路径只是`D:\Emails\...`，那么您必须在它前面加上`file://`：

```
file://D:\Emails\... 
```

请注意，大多数浏览器会阻止您包含来自**远程网站的****本地文件**！

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T07:59:09.023

您是否尝试过`file:///`在文件路径之前放置？像`file:///D:\Emails\GmailId1380ec660e0e656a\doc.htm`**

# github - 如何处理 GitHub 的依赖项

> ID：11152108
> 
> 赞同：2
> 
> 时间：2012-06-22T07:44:06.197
> 
> 标签：github

我问的原因是因为[他们建议](https://help.github.com/articles/what-is-my-disk-quota)不要对您的存储库提交依赖项。

我不想像他们建议的那样使用包管理器，有更好的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T23:31:03.090

如果您的依赖项是整个项目，Git 支持[子模块。](http://git-scm.com/book/en/Git-Tools-Submodules)否则，包管理器是最佳实践。

# ajax - ASP MVC3 和 Telerik DatePicker 控件阻止 Ajax 操作后的年/月选择

> ID：11152111
> 
> 赞同：1
> 
> 时间：2012-06-22T07:44:17.607
> 
> 标签：ajax, telerik, datepicker, asp.net-mvc

所以我在这里遇到了大麻烦。

```
<%: Html.Telerik().DatePicker().Name("dataWprowadzeniaOd").ShowButton(true)%> - 
<%:Html.Telerik().DatePicker().Name("dataWprowadzeniaDo").ShowButton(true) %> 
```

我有这两个不错的 DatePickers、一个列表和一些过滤选项，都在 Ajax 上。现在，当发生 Ajax 操作（如过滤、刷新表格、更改页面）时，这两个可爱的小东西会阻止用户在那里更改月份和年份。

这是表代码的开头：

```
Html.Telerik().Grid(Model)
.Name("Main")
.DataKeys(keys => keys.Add(p => p.DepozytID))
.Localizable("pl-PL")
.Pageable(paging => paging.Enabled(true).PageSize(20)) 
```

我试过把：

```
$('#dataWprowadzeniaOd').tDatePicker({ format: 'yyyy-MM-dd', minValue: new Date(1899, 11, 31), 
maxValue: new Date(2100, 0, 1) });
$('#dataWprowadzeniaDo').tDatePicker({ format: 'yyyy-MM-dd', minValue: new Date(1899, 11, 31), 
maxValue: new Date(2100, 0, 1) }); 
```

在每个回调/ajax 函数的末尾，但它会从日历中删除月/年栏，所以我无法检查它是否有效

试过这个：

```
$('#dataWprowadzeniaOd').attr('disabled', 'disabled');
$('#dataWprowadzeniaOd').attr('disabled', ''); 
```

也是，但是没有效果。

```
 function filtruj() {
        var newurl = '<%: Url.Content("~/RejestrDepozytow/ListaDepozytow") %>';
        var filtr = {};

        filtr.typStatusu = $("#typStatusu").val();
        filtr.rodzajDepozytuID = $("#rodzajDepozytuID").val();
        filtr.dataWprowadzeniaOd = $("#dataWprowadzeniaOd").val();
        filtr.dataWprowadzeniaDo = $("#dataWprowadzeniaDo").val();
        filtr.podmiotSkladajacyID = $("#podmiotSkladajacyID").val();
        filtr.podmiot = $("#podmiot").val();
        filtr.sygnaturaSprawy = $("#sygnaturaSprawy").val();
        filtr.barcode = $("#barcode").val();
        filtr.numerLp = $("#numerLp").val();
        filtr.numerRok = $("#numerRok").val();

        $.ajax({
            type: "POST",
            async: false,
            url: newurl,
            data: filtr,
            success: function (dane) {
                $("#gridDepozytow").html(dane);
            }
        });
    } 
```

这是在日期选择器被阻止之前使用的方法。

# github - Github推送错误

> ID：11152119
> 
> 赞同：2
> 
> 时间：2012-06-22T07:45:13.010
> 
> 标签：github

我想在 github 上创建一个新的存储库，并且在执行初始步骤之后，当我来到这一步时： `git push -u origin master`我收到以下错误：

```
error: The requested URL returned error: 403 while accessing https://github.com/sjs7007/wget-nptel-download-script.git/info/refs 
```

`fatal: HTTP request failed`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:11:32.550

HTTP 403 返回码意味着访问被禁止，通常是因为凭据[错误或 GIT 版本错误](https://help.github.com/articles/https-cloning-errors)。很有可能您输入了错误的密码。

为了防止这些错误，您可以使用 GIT 凭证助手，它将您的密码保存在内存中一段时间​​，并避免您每次通过 HTTP 提交某些内容时都输入它：

```
git config --global credential.helper 'cache --timeout=3600' 
```

您希望密码在`3600`内存中保留的秒数是多少。

提交到 github（以及一般的 GIT 存储库）的最佳（也是最安全）方式仍然是 SSH，您不必记住密码（除非您在 SSH 私钥上设置密码），并且您会自动通过身份验证GitHub 存储库，请参阅他们[关于 SSH 密钥的帮助页面](https://help.github.com/articles/generating-ssh-keys)。

# c# - SQL 中的时间格式

> ID：11152120
> 
> 赞同：0
> 
> 时间：2012-06-22T07:45:14.487
> 
> 标签：c#, asp.net, sql-server

我从日历扩展器存储日期时间并将其存储在数据库中。日期时间的格式是`Format="dddd, MMMM dd, yyyy"`. 然后我在网格视图中将此日期时间与其他字段一起显示，并将此字段命名为“日历日期”。目前，网格中的 CalendarDate 显示为`"6/29/2012 10:42:35 AM"`.

我希望日历日期将显示如下日期：-“6/29/2012 10:42 AM”。只会删除几秒钟。请告诉我我是如何做到的。

我现在使用的存储过程是这样的：-

```
Create procedure St_Proc_GetUserReportforCurrentDayTask 
@userID int 
as            
    Begin            
     set NoCount on;            
     DECLARE @TODAY DATE              
     SET @TODAY = CONVERT(VARCHAR(10), GETDATE(), 111)            
     select Production.CalendarDate as Date, 
            RegionAndProjectInfo.RegionProjectName as Region , 
            County.CountyName as County, 
            WorkType.WorkTypeName as WorkType, 
            Task.TaskName as Task,
            Production.VolumeProcessed as 'Volumes Processed', 
            Production.TimeSpent as 'Duration (HH:MM)' 
     from Production             
     inner join RegionAndProjectInfo            
     on            
     RegionAndProjectInfo.RegionProjectID=Production.RegionProjectID            
     inner join County            
     on             
     County.CountyID=Production.CountyID            
     inner join WorkType            
     on            
     WorkType.WorkTypeID=Production.WorkTypeID            
     inner join Task            
     on            
     Task.TaskID=Production.TaskID            
     where Production.UserID=@userID and CalendarDate >= @TODAY            
    End 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T07:50:52.333

`dataformatstring="{0:g}"`在 Datagridview 中用于此数据字段。

```
<asp:BoundField HeaderText="CalendarDate" DataField="MyDateColumn"  DataFormatString="{0:g}" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T07:53:50.567

我建议您在前端使用 DateTime.Tostring() [http://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm](http://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm)进行。SQL Server 应该主要用于存储数据。显示的格式应该留给您使用的 UI。这样您就可以更好地利用 SQL Server。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T07:50:29.877

通过取出日期部分，将它们转换为 varchar，然后将它们串在一起，进行自己的格式化，例如：

```
 select
convert(varchar(2), (select DATEPART(month, GETDATE())))
+ '/' +
convert(varchar(2), (select DATEPART(month, GETDATE())))
+ '/' +
convert(varchar(4), (select DATEPART(year, GETDATE()))) 
```

附带说明：通常您的 UI 负责格式化日期。为什么不返回一个 DateTime 对象并让 UI 处理呢？

# jquery-mobile - jQuery手机。在页面更改时加载消息

> ID：11152121
> 
> 赞同：3
> 
> 时间：2012-06-22T07:45:32.880
> 
> 标签：jquery-mobile, cordova, page-loading-message

我正在使用 Phonegap + JQM 构建离线应用程序。是否有可能在每个页面更改事件上全局设置显示加载消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:28:11.707

```
$(document).live('pagebeforehide', function(){
    $.mobile.showPageLoadingMsg();
    //More stuff to do
});

$(document).live('pageshow', function(){
    //More stuff to do
    $.mobile.hidePageLoadingMsg();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:26:22.087

Nirmal 的回答对我不起作用，但绑定到各个页面可以：

```
$("div[data-role='page']").live('pagebeforehide', function(){
    console.log("showing....");
    $.mobile.showPageLoadingMsg();
    //More stuff to do
});

$("div[data-role='page']").live('pageshow', function(){
    //More stuff to do
    console.log("hiding....");
    $.mobile.hidePageLoadingMsg();
}); 
```

[jsFiddle - 看日志，有时候看的太快了](http://jsfiddle.net/pajtai/J6F9j/)

# apache - 为什么每个 Firefox 请求的授权行都会改变？

> ID：11152123
> 
> 赞同：1
> 
> 时间：2012-06-22T07:45:39.540
> 
> 标签：apache, security, firefox, http-headers, kerberos

使用 Kerberos 票证运行时，我注意到每个 firefox 请求在 HTTP 标头中都有不同的授权行。我加载了一个简单的页面，然后多次点击重新加载按钮，但它从来都不一样。是什么导致了这种行为？我原以为授权行会在 Kerberos 凭证的持续时间内保持不变。（请注意，在启动 firefox 之前，我通过 kinit 命令获得了凭据。）

当身份验证方法为 Basic 时，firefox 每次都会继续发送相同的 base64 字符串 'user:password'。这是我所期望的行为。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:34:17.040

嗯，这很奇怪。您可以发布wireshark输出的片段的任何机会。一种可能是获得的Service Ticket没有被缓存，FF得到了Service Ticket。在某些实现中，客户端将获取服务但不缓存它，而是在每次需要时获取服务票证。有时是因为进程可能没有写权限，而且它是相对便宜的操作（单次往返和对称加密数据）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T10:26:25.890

这是由于 HTTP 和 Negotiate-Auth 工作方式的各种限制。

HTTP 最初被设计为无状态协议，HTTP 的身份验证系统采用该模型。它旨在在每个请求中进行完整的身份验证交换；例如，使用 Basic 时，它会将您的完整凭据包含在每个请求中。使用 Negotiate-Auth 和 SPNEGO，同样的事情也是如此：创建一个全新的 GSS-API 上下文，并对每个请求执行新的身份验证。

是的，这是非常浪费的。但是（目前）没有任何标准化的方式来验证一次、建立​​会话，然后将所有后续请求绑定到该会话（例如，IMAP、POP 或 ssh 的方式）。在这方面有一些 IETF 工作，但这是非常初步的。

票据被缓存；它每次都没有做*那么多工作。*但是服务器和客户端每次都要经历整个 GSS-API 会话舞蹈。

# java - 最大的素数程序需要 aaaages - Java

> ID：11152127
> 
> 赞同：3
> 
> 时间：2012-06-22T07:45:51.060
> 
> 标签：java, prime-factoring

所以这是 Euler 项目的问题 3。对于那些不知道的人，我必须找出600851475143的最大素数。我有以下代码：

```
import java.lang.Math;
// 600851475143
public class LargestPrimeFactor {
    public static void main(String[] stuff) {
        long num = getLong("What number do you want to analyse? ");
        long[] primes = primeGenerator(num);
        long result = 0;
        for(int i = 0; i < primes.length; i++) {
            boolean modulo2 = num % primes[i] == 0;
            if(modulo2) {
                result = primes[i];
            }
        }
        System.out.println(result);
    }
    public static long[] primeGenerator(long limit) {
        int aindex = 0;
        long[] ps = new long[primeCount(limit)];
        for(long i = 2; i < limit + 1; i++) {
            if(primeCheck(i)) {
                ps[aindex] = i;
                aindex++;
            }
        }
        return ps;
    }

    public static boolean primeCheck(long num) {
        boolean r = false;
        if(num == 2 || num == 3) {
            return true;
        }
        else if(num == 1) {
            return false;
        }
        for(long i = 2; i < Math.sqrt(num); i++) {
            boolean modulo = num % i == 0;
            if(modulo) {
                r = false;
                break;
            }
            else if(Math.sqrt(num) < i + 1 && !modulo) {
                r = true;
                break;
            }
        }
        return r;
    }
    public static int primeCount(long limit) {
        int count = 0;
        if(limit == 1 || limit == 2) {
            return 0;
        }
        for(long i = 2; i <= limit; i++) {
            if(primeCheck(i)) {
                count++;
            }
        }
        return count;
    }
public static long getLong(String prompt) {
    System.out.print(prompt + " ");
    long mrlong = input.nextLong();
    input.nextLine();
    return mrlong;
}
} 
```

但是当我用小于 600851475143 的东西（很多）测试程序时，比如 100000000，那么程序需要时间 - 事实上，100000000 到目前为止已经花费了 20 分钟并且仍在继续。我显然在这里采用了错误的方法（是的，该程序*确实*有效，我用较小的数字进行了尝试）。任何人都可以提出一个不那么详尽的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T07:58:40.007

试试这个 ..

```
public class LargestPrimeFactor{
public static int largestPrimeFactor(long number) {
    int i;
    for (i = 2; i <= number; i++) {
        if (number % i == 0) {
            number /= i;
            i--;
        }
    }
    return i;
}

/*  change according to ur requirement. 
public static long getLong(String prompt) {
    System.out.print(prompt + " ");
    long mrlong = input.nextLong();
    input.nextLine();
    return mrlong;
}
 */

public static void main(String[] args) {
    //long num = getLong("What number do you want to analyse? ");
    System.out.println(largestPrimeFactor(600851475143l));
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:01:14.120

```
public static void main(String[] args) {

    long number = 600851475143L;

    long highestPrime = -1;
    for (long i = 2; i <= number; ++i) {
        if (number % i == 0) {
            highestPrime = i;
            number /= i;
            --i;
        }
    }

    System.out.println(highestPrime);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-05T06:08:42.663

公共类 LargestPrimeFactor {

```
public static boolean isPrime(long num){
    int count = 0;
    for(long i = 1; i<=num/2 ; i++){
        if(num % i==0){
            count++;
        }
    }
    if(count==1){
        return true;
    }
    return false;
}

public static String largestPrimeFactor(long num){
    String factor = "none";
    for(long i = 2; i<= num/2 ; i++){
        if(num % i==0 && isPrime(i)){
           factor = Long.toString(i); 
        }
    }
    return factor;     
}
public static void main(String[] args) {
    System.out.println(largestPrimeFactor(13195));
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T07:49:47.263

我在 Project Euler 上完成了几十个挑战。有些问题可以通过蛮力解决（他们建议不要这样做），但其他问题需要“开箱即用”的思维。你不能用蛮力解决这个问题。

网络上有很多帮助可以引导您朝着正确的方向前进，例如： [http ://thetaoishere.blogspot.com.au/2008/05/largest-prime-factor-of-number.html](http://thetaoishere.blogspot.com.au/2008/05/largest-prime-factor-of-number.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-11T05:33:22.550

一个数可以拥有的素因数的数量总是小于该数的 sqrt，因此不需要遍历数 n 来找到它的最大素因数。

请参阅此代码。

```
 public class LargestPrimeFactor {
        public static void main(String[] args) {

            Scanner sc=new Scanner(System.in);
            long num=sc.nextLong();

            if(num>0 && num<=2)
            {
                System.out.println("largest prime is:-" + num);
                System.exit(0);
            }

            int i=((Double)Math.sqrt(num)).intValue();
            int j=3;
            int x=0;

            //used for looping through the j value which can also be a prime. for e.g in case of 100 we might get 9 as a divisor. we need to make sure divisor is also a prime number.
            int z=0;
//same function as j but for divisor
            int y=3;
            int max=2;
//divisor is divisible
            boolean flag=false;
//we found prime factors
            boolean found=false;

            while(x<=i)
            {
                y=3;
                flag=false;

                if(num % j ==0)
                {
                    if(j>max)
                    {
                        for(z=0;z<Math.sqrt(j);z++)
                        {
                            if(j!=y && j % y==0)
                            {
                                flag=true;
                            }
                            y+=2;
                        }
                        if(!flag)
                        {
                            found=true;
                            max=j;
                        }
                    }
                }
                j+=2;
                x++;
            }
            if(found){
                System.out.println("The maximum prime is :- " + max);
            }
            else
            {
                System.out.println("The maximum prime is :- " + num);   
            }
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-10T21:28:24.537

改变

`for(long i = 2; i <= limit; i++)`

到

```
// add the one for rounding errors in the sqrt function
new_limit = sqrt(limit) + 1;
// all even numbers are not prime 
for(long i = 3; i <= new_limit; i+=2)
{
...
} 
```

例如，考虑 1,000,000 而不是迭代 1,000,000 次，这件事只需要进行大约 500 次迭代。

# unit-testing - 如何在模型测试用例中创建模拟

> ID：11152128
> 
> 赞同：5
> 
> 时间：2012-06-22T07:45:56.057
> 
> 标签：unit-testing, cakephp, mocking, phpunit, cakephp-2.1

也许我做错了。

我想测试模型（抗体）的 beforeSave 方法。此方法的一部分调用关联模型（物种）上的方法。我想模拟 Species 模型，但找不到方法。

是否有可能或者我正在做一些违背 MVC 模式的事情，从而试图做一些我不应该做的事情？

```
class Antibody extends AppModel {
    public function beforeSave() {

        // some processing ...

        // retreive species_id based on the input 
        $this->data['Antibody']['species_id'] 
            = isset($this->data['Species']['name']) 
            ? $this->Species->getIdByName($this->data['Species']['name']) 
            : null;

        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T10:58:47.323

假设您的 Species 模型是由 cake 由于关系创建的，您可以简单地执行以下操作：

```
public function setUp()
{
    parent::setUp();

    $this->Antibody = ClassRegistry::init('Antibody');
    $this->Antibody->Species = $this->getMock('Species');

    // now you can set your expectations here
    $this->Antibody->Species->expects($this->any())
        ->method('getIdByName')
        ->will($this->returnValue(/*your value here*/));
}

public function testBeforeFilter()
{
    // or here
    $this->Antibody->Species->expects($this->once())
        ->method('getIdByName')
        ->will($this->returnValue(/*your value here*/));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:48:24.290

好吧，这取决于注入“物种”对象的方式。它是通过构造函数注入的吗？通过二传手？是遗传的吗？

这是一个构造函数注入对象的示例：

```
class Foo
{
    /** @var Bar */
    protected $bar;

    public function __construct($bar)
    {
        $this->bar = $bar;
    }

    public function foo() {

        if ($this->bar->isOk()) {
            return true;
        } else {
            return false;
        }
    }
} 
```

那么你的测试将是这样的：

```
public function test_foo()
{
    $barStub = $this->getMock('Overblog\CommonBundle\TestUtils\Bar');
    $barStub->expects($this->once())
        ->method('isOk')
        ->will($this->returnValue(false));

    $foo = new Foo($barStub);
    $this->assertFalse($foo->foo());
} 
```

该过程与 setter 注入对象完全相同：

```
public function test_foo()
{
    $barStub = $this->getMock('Overblog\CommonBundle\TestUtils\Bar');
    $barStub->expects($this->once())
        ->method('isOk')
        ->will($this->returnValue(false));

    $foo = new Foo();
    $foo->setBar($barStub);
    $this->assertFalse($foo->foo());
} 
```

# ios - 如何在 RestKit 中映射 JSON 数组

> ID：11152133
> 
> 赞同：5
> 
> 时间：2012-06-22T07:46:05.160
> 
> 标签：ios, mapping, restkit

我在将 JSON 数组映射到 RestKit 时遇到了一些麻烦。这是 JSON 文件的样子：

```
{"issuelist":[
    {
        "issue":[
            {
                "id":1,
                "beschreibung":"",
                "name":"Test1"
            },
            {
                "id":2,
                "beschreibung":"",
                "name":"Test2"
            }
        ]
    }
]} 
```

我对“问题”的数组感兴趣。这是我对单个问题的映射：

```
RKObjectMapping *objectMapping = [RKObjectMapping mappingForClass:[self class] usingBlock:^(RKObjectMapping *mapping) {
        [mapping mapAttributes:@"name", @"beschreibung", nil];
        [mapping mapKeyPathsToAttributes:
                @"id", @"identifier",
                nil];
    }]; 
```

这是我设置 ObjectMapping 的方式

```
RKObjectMappingProvider *omp = [RKObjectManager sharedManager].mappingProvider;

RKObjectMapping *issueMapping = [Issue mapping];
[omp addObjectMapping:issueMapping];

[omp setObjectMapping:issueMapping forKeyPath:@"issuelist.issue"]; 
```

不幸的是，这不起作用。我得到这样的日志输出：

```
    T restkit.object_mapping:RKObjectMappingOperation.m:152 在 keyPath 'name' 处找到可转换的值。从类型“__NSArrayI”转换为“NSString”
    W restkit.object_mapping:RKObjectMappingOperation.m:232 keyPath 'name' 处的值转换失败。没有从 '__NSArrayI' 转换为 'NSString' 的策略
    T restkit.object_mapping:RKObjectMappingOperation.m:339 跳过了从 keyPath 'name 到 keyPath 'name' 的属性值的映射——值不变（（null））
    T restkit.object_mapping:RKObjectMappingOperation.m:322 映射属性值 keyPath 'beschreibung' 到 'beschreibung'
    T restkit.object_mapping:RKObjectMappingOperation.m:152 在 keyPath 'beschreibung' 找到可转换的值。从类型“__NSArrayI”转换为“NSString”
    W restkit.object_mapping:RKObjectMappingOperation.m:232 keyPath 'beschreibung' 处的值转换失败。没有从 '__NSArrayI' 转换为 'NSString' 的策略
    T restkit.object_mapping:RKObjectMappingOperation.m:339 跳过了从 keyPath 'beschreibung 到 keyPath 'beschreibung' 的属性值的映射——值不变（（null））
    T restkit.object_mapping:RKObjectMappingOperation.m:322 映射属性值 keyPath 'id' 到 'identifier'
    T restkit.object_mapping:RKObjectMappingOperation.m:152 在 keyPath 'id' 找到可转换的值。从类型“__NSArrayI”转换为“NSString”
    W restkit.object_mapping:RKObjectMappingOperation.m:232 keyPath 'id' 处的值转换失败。没有从 '__NSArrayI' 转换为 'NSString' 的策略
    T restkit.object_mapping:RKObjectMappingOperation.m:339 跳过了从 keyPath 'id 到 keyPath 'identifier' 的属性值的映射——值不变（（null））
    D restkit.object_mapping:RKObjectMappingOperation.m:624 映射操作成功...

```

似乎 RestKit 试图将整个数组映射到一个问题中，而不是创建一系列问题。我需要如何更改我的映射以更正此问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T08:18:28.993

试试这个：

```
RKObjectMapping* issueMapping = [RKObjectMapping mappingForClass: [Issue class] usingBlock:^(RKObjectMapping *mapping) {
    [mapping mapAttributes:@"name", @"beschreibung", nil];
    [mapping mapKeyPathsToAttributes:
     @"id", @"identifier",
     nil];
}];
issueMapping.rootKeyPath = @"issue";
[omp setObjectMaping: issueMapping forKeyPath: @"issuelist"]; 
```

这就是说，当遇到问题列表键路径时，使用问题映射。然后它说对于每个根本问题，创建一个问题对象。

# asp.net - msdeploy 损坏连接字符串密码

> ID：11152140
> 
> 赞同：1
> 
> 时间：2012-06-22T07:46:58.213
> 
> 标签：asp.net, web-config, msdeploy

我有一个使用 msdeploy 部署的 Web 应用程序，但目前我们有一个烦人的部署后步骤 - 我们需要去修补 connectionStrings 部分中的密码。

在 IIS 管理器中输入的密码是“ABCD%ABCD” 但是，在 msdeploy 完成工作后，字符串的密码部分变为：ABCDÂ«CD

`%`显然，msdeploy对密码中的顺序感到困惑。

如果我输入带有 " 的密码，IIS 管理器会插入`&quot;`

现在 '%' 不是具有预定义 xml 实体定义的字符之一，那么，我该如何输入此密码以使 msdeploy 不会损坏它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:33:11.233

我认为问题在于百分比字符用于识别环境变量，请尝试使用双百分比来“转义”百分比。

例如“ABCD%%ABCD”

# php - 如何使用mysqli准备好的语句绑定N个参数？

> ID：11152141
> 
> 赞同：0
> 
> 时间：2012-06-22T07:46:59.357
> 
> 标签：php, mysqli

在旧的 mysql 代码中，我有一个查询，它运行良好，如下所示：

```
$questioncontent = (isset($_GET['questioncontent'])) ? $_GET['questioncontent'] : '';

$searchquestion = $questioncontent;
$terms = explode(" ", $searchquestion);

$questionquery = "
SELECT q.QuestionId, q.QuestionContent, o.OptionType, an.Answer, r.ReplyType, 
  FROM Answer an 
  INNER JOIN Question q ON q.AnswerId = an.AnswerId
  JOIN Reply r ON q.ReplyId = r.ReplyId 
  JOIN Option_Table o ON q.OptionId = o.OptionId 

                 WHERE ";

    foreach ($terms as $each) {     
        $i++;         

        if ($i == 1){         
            $questionquery .= "q.QuestionContent LIKE `%$each%` ";     
            } else {         
                $questionquery .= "OR q.QuestionContent LIKE `%$each%` ";    
                 } 
                 }  

                 $questionquery .= "GROUP BY q.QuestionId, q.SessionId ORDER BY "; $i = 0; foreach ($terms as $each) {     
                     $i++;      

        if ($i != 1)         
        $questionquery .= "+";     
        $questionquery .= "IF(q.QuestionContent LIKE `%$each%` ,1,0)"; 
        } 

        $questionquery .= " DESC "; 
```

但是由于旧的 mysql 正在逐渐消失，人们说要使用 PDO 或 mysqli（由于我目前拥有的 php 版本，不能使用 PDO），我尝试将我的代码更改为 mysqli，但这给我带来了问题。在下面的代码中，我省略了 bind_params 命令，我的问题是如何在下面的查询中绑定参数？它需要能够绑定多个`$each`，因为用户能够输入多个术语，并且每个`$each`都被归类为术语。

以下是同一查询的当前 mysqli 代码：

```
 $questioncontent = (isset($_GET['questioncontent'])) ? $_GET['questioncontent'] : '';

        $searchquestion = $questioncontent;
        $terms = explode(" ", $searchquestion);

        $questionquery = "
        SELECT q.QuestionId, q.QuestionContent, o.OptionType, an.Answer, r.ReplyType, 
          FROM Answer an 
          INNER JOIN Question q ON q.AnswerId = an.AnswerId
          JOIN Reply r ON q.ReplyId = r.ReplyId 
          JOIN Option_Table o ON q.OptionId = o.OptionId 

                         WHERE ";

    foreach ($terms as $each) {     
                $i++;         

                if ($i == 1){         
  $questionquery .= "q.QuestionContent LIKE ? ";     
                    } else {         
  $questionquery .= "OR q.QuestionContent LIKE ? ";    
                         } 
                         }  

 $questionquery .= "GROUP BY q.QuestionId, q.SessionId ORDER BY "; $i = 0; foreach ($terms as $each) {     
                             $i++;      

                if ($i != 1)         
                $questionquery .= "+";     
                $questionquery .= "IF(q.QuestionContent LIKE ? ,1,0)"; 
                } 

                $questionquery .= " DESC ";

            $stmt=$mysqli->prepare($questionquery);      
            $stmt->execute();
            $stmt->bind_result($dbQuestionId,$dbQuestionContent,$dbOptionType,$dbAnswer,$dbReplyType); 
            $questionnum = $stmt->num_rows(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T08:34:53.183

看看[这篇](http://uk3.php.net/call_user_func_array)关于[call_user_func_array](https://stackoverflow.com/questions/1913899/mysqli-binding-params-using-call-user-func-array)与.`bind_param()`

从[mysqli_stmt_bind_param 上的 PHP 文档中，](http://www.php.net/manual/en/mysqli-stmt.bind-param.php)它说以下...

> **笔记：**
> 
> 将 mysqli_stmt_bind_param() 与 call_user_func_array() 一起使用时必须小心。请注意，mysqli_stmt_bind_param() 需要通过引用传递参数，而 call_user_func_array() 可以接受可以表示引用或值的变量列表作为参数。

你会想要使用这样的东西

```
call_user_func_array(array($stmt, 'bind_param'), $terms); 
```

您可以确保`?`SQL 字符串中出现正确数量的字符`$stmt`。

**[编辑]**

这是一个工作示例

```
// user entered search strings
$user_terms = array("a", "b", "c");

// append your wildcard "%" to all elements. you must use "&" reference on &$value
foreach ($user_terms as &$value) {
    $value = '%'.$value.'%';
}

$types = "";
for($i = 0; $i<sizeof($user_terms); $i++) {
    $types .= "s";
}

$terms = array_merge( array($types), $user_terms);

// the array $terms now contains: { "sss", "%a%", "%b%", "%c%" }

$sql = "SELECT ... ?,?,?"    // edit your sql here

$stmt = $mysqli->prepare($sql)

call_user_func_array(array($stmt, 'bind_param'), $terms); 
```

# php - 后台像素码转换

> ID：11152151
> 
> 赞同：1
> 
> 时间：2012-06-22T07:47:44.407
> 
> 标签：php, curl, google-ads-api

我有几个系统（google adwords、tradedoubler），我必须跟踪它们的销售转化。问题是，我不想将转换通知作为用户看到的像素代码发送，而是在 IPN（即时付款通知）后台检查中发送。我试图做这样的事情：

```
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);

curl_exec($ch); 
```

其中 $url 将是 img 标签的 src 属性。不幸的是，没有记录转换。有人对此有经验吗？

我不确定我是否已经说清楚了，所以请随时提问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:55:19.743

这是一个可以处理服务器端跟踪的库：

[http://code.google.com/p/php-ga/](http://code.google.com/p/php-ga/)

但是，这不会进行转化跟踪。这是因为转换是使用在用户机器上设置并在他们请求像素时传递的 cookie 来衡量的。服务器端无权访问这些 cookie，因为它位于不同的域中。

可以将一些收集 Adwords cookie 并将其传递到您的服务器的 JavaScript 代码组合在一起，但您必须非常想要这个 :)

或者，使用一组不同的 PayPal API 进行调查，例如 Direct Payment 或 Payflow。

# emacs - 如何同时启动低级 lisp 和 swank

> ID：11152155
> 
> 赞同：1
> 
> 时间：2012-06-22T07:48:02.643
> 
> 标签：emacs, clojure, clojurescript, swank-clojure

我正在做 clojure 和 clojurescript 开发。我通常通过 clojure-jack-in 函数启动 clojure，并通过以下函数启动 clojurescript repl -

```
(defun clojurescript-repl ()
 (interactive)
 (run-lisp "lein2 trampoline cljsbuild repl-listen")) 
```

clojure-jack-in 开始 swank 而上面的函数开始了 lisp。但是，它们都具有相同的键绑定。如何更改键绑定以同时使用它们？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:00:18.277

简短的回答是没有很好的方法来做到这一点。

Clojurescript One wiki 有一些提示：

[https://github.com/brentonashworth/one/wiki/Emacs](https://github.com/brentonashworth/one/wiki/Emacs)

# c - 将结构初始化为 0

> ID：11152160
> 
> 赞同：142
> 
> 时间：2012-06-22T07:48:52.993
> 
> 标签：c, struct, initialization

如果我有这样的结构：

```
typedef struct
{
    unsigned char c1;
    unsigned char c2;
} myStruct; 
```

将此结构初始化为 0 的最简单方法是什么？以下就足够了吗？

```
myStruct _m1 = {0}; 
```

还是我需要将每个成员显式初始化为 0？

```
myStruct _m2 = {0,0}; 
```

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2012-06-22T07:51:25.030

第一个是最简单的（*涉及较少的打字*），并且可以保证工作，所有成员都将设置为`0`^([Ref 1])。
第二个更具可读性。

选择取决于用户偏好或您的编码标准要求的偏好。

^([参考 1]) **参考 C99 标准 6.7.8.21：**

> 如果大括号括起来的列表中的初始值设定项少于聚合的元素或成员，或者用于初始化已知大小数组的字符串文字中的字符少于数组中的元素，则聚合的其余部分应隐式初始化与具有静态存储持续时间的对象相同。

**好读：**
[C 和 C++：自动结构的部分初始化](https://stackoverflow.com/questions/10828294/c-and-c-partial-initialization-of-automatic-structure)

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-06-22T07:51:59.040

如果数据是静态或全局变量，默认填零，所以声明一下即可`myStruct _m;`

如果数据是局部变量或堆分配区域，请使用以下命令清除它`memset`：

```
memset(&m, 0, sizeof(myStruct)); 
```

当前的编译器（例如 的最新版本`gcc`）在实践中对此进行了很好的优化。这仅在所有零值（包括空指针和浮点零）都表示为全零位时才有效，这在我所知道的所有平台上都是正确的（但*C*标准允许实现为假；我不知道这样的实现） .

您也许可以编码`myStruct m = {};`或 `myStruct m = {0};`（即使第一个成员`myStruct`不是标量）。

我的感觉是使用`memset`本地结构是最好的，它更好地传达了这样一个事实，即在运行时，必须做一些事情（而通常，全局和静态数据可以理解为在编译时初始化，在运行时没有任何成本） .

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-06-22T07:54:53.890

参见§6.7.9 初始化：

> 21 如果大括号括起来的列表中的初始值设定项少于聚合的元素或成员，或者用于初始化已知大小数组的字符串文字中的字符少于数组中的元素，则聚合的剩余部分应隐式初始化与具有静态存储持续时间的对象相同。

所以，是的，它们都有效。请注意，在 C99 中也可以使用一种新的初始化方式，称为指定初始化：

```
myStruct _m1 = {.c2 = 0, .c1 = 1}; 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2020-11-18T02:18:26.713

我也认为这会起作用，但它具有误导性：

```
myStruct _m1 = {0}; 
```

当我尝试这个时：

```
myStruct _m1 = {0xff}; 
```

只有第一个字节设置为`0xff`，其余字节设置为`0`。所以我不会养成使用这个的习惯。

# google-apps-script - Google Apps 脚本：formPanel 和 doPost

> ID：11152161
> 
> 赞同：1
> 
> 时间：2012-06-22T07:48:59.403
> 
> 标签：google-apps-script

我有一个关于 GAS 效率和最佳实践的快速问题。我有一个嵌入网站的脚本。为了尝试让它更快，我从使用 doGet() 和附加到提交按钮和另一个 submit() 函数的 serverclickhandler 更改为使用 doGet() 和 submit 和 doPost。初始版本使用垂直面板，而第二个版本需要表单面板。我的垂直面板上有一个网格设置，我想尽可能多地保留现有代码。我的问题是：

我可以将网格直接放入 formPanel 而不减慢加载过程吗？我试过了，它似乎变慢了，但也许谷歌的服务器今天过得很糟糕。

我可以在不减慢速度的情况下将verticalPanel 添加到formPanel 吗？在这种情况下，最佳做法是什么？

我想切换到 doPost 的原因是当您单击提交按钮时它会显示另一个面板，因此用户知道提交已通过。以前我在清除 GUI 元素，这似乎是很多额外的代码，可能会减慢速度。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:05:02.437

关于帖子的最后一点，您不必清除所有内容，您可以在整个面板上用另一个空（或不）一个空（或不）遮盖整个面板...快速高效;-)

根据您创建 Ui 的方式，不同的方法是可能的：`setVisible(false)`对于包含所有小部件的父面板来说，最简单的方法之一是使用`setVisible(true)`一个大标签，上面写着“谢谢您回答...... bla bla bla”（这个可以是从一开始就在那里但不可见;-)并由处理程序在“提交”按钮上设置为可见（客户端或服务器......两者都能够完成这项工作））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:48:59.877

将面板放在其他面板中不应减慢 UI 的加载速度。

# mysql - 奇怪的 SQL 查询行为

> ID：11152163
> 
> 赞同：0
> 
> 时间：2012-06-22T07:49:03.440
> 
> 标签：mysql

我从日志`select content = 5%id%201=1 from pages`中有这个 SQL 查询，事情是它运行并返回一些值。我试图找到它的作用，但我遇到了死胡同。有人对此有一些解释吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T07:59:49.257

正在发生的事情是

`content = 5%id%201=1`

表示 [value of]`content`列等于 (((5 Modulo [value of] `id`) Modulo `201`) 等于 1)

可能需要重新排列括号顺序，但想法是它会在结果中显示 0 或 1。

[单击此处](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_mod)获取 MySQL 中 MODULO 函数的文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T07:59:56.170

在我看来毫无意义。它将返回`1`带有 and 的行`id = 4` *，* 或者带有and`content = '1'`的行，或者不能转换为整数的字符串；对于所有其他行。似乎太做作了，没有做任何有用的事情。`id != 4``content = '0'``0`

# android - 如何从接收方调用服务

> ID：11152166
> 
> 赞同：1
> 
> 时间：2012-06-22T07:49:11.567
> 
> 标签：android

在我的应用程序中，我想从 Receiver 调用服务。

这是我的 NotificationReceiver.java

```
 public class NotificationReceiver extends BroadcastReceiver {

    NotificationReceiver _this = this;
    private static Context _context;
    public static final String ACTION_REFRESH_SCHEDULE_ALARM = "com.example.receiver.ACTION_REFRESH_SCHEDULE_ALARM";
    String SERVER_URL = "http://192.168.1.7:8080";

    @Override
    public void onReceive(final Context context, Intent intent) {
        _context = context;
        initClient();
        SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(_context);

        if (settings.getString("userId",null) != null){

            gotNotification(new ClientListener(){
                @Override
                public void onSuccess(String response) {
                    try {
                        JSONObject object = new JSONObject(response);

                        System.out.println("Service object = "+ object);

                    } catch (JSONException e) {
                        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
                    }
                }
                @Override
                public void onFail(int error) {

                }
                @Override
                public void onCancel() {

                }

            },settings.getString("userId",null));
        }
    }

    private void initClient(){
        NotifierRestClient.init(SERVER_URL + "/api");
    }

    private void gotNotification (final ClientListener clientListener, final String uId) {
        new Thread() {
            @Override
            public void run() {
                try {
                    final String responseText = NotifierRestClient.getUserNotifications(uId,null);
                    if (clientListener != null) {
                        clientListener.onSuccess(responseText);
                    }
                } catch (final Exception e) {
                    e.printStackTrace();
                    if (clientListener != null) {
                        clientListener.onFail(505);
                    }
                }
            }
        }.start();
    }
} 
```

这是我的 NotifiactionService.java

```
public class NotificationService extends Service {

    private AlarmManager alarmManagerPositioning;
    private PendingIntent pendingIntent;

    @Override
    public void onCreate() {
        super.onCreate();

        alarmManagerPositioning = (AlarmManager) getSystemService(Context.ALARM_SERVICE);

        final Intent intentToNotificate = new Intent(NotificationReceiver.ACTION_REFRESH_SCHEDULE_ALARM);
        pendingIntent = PendingIntent.getBroadcast(this, 0, intentToNotificate, 0);
    }

    @Override
    public void onStart(Intent intent, int startId) {
        try {

            long notificationInterval = 5002;

            alarmManagerPositioning.setInexactRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime(), notificationInterval, pendingIntent);
        } catch (NumberFormatException e) {
            Toast.makeText(this, "error running services: " + e.getMessage(), Toast.LENGTH_SHORT).show();
        } catch (Exception e) {
            Toast.makeText(this, "error running services: " + e.getMessage(), Toast.LENGTH_SHORT).show();
        }
    }

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public void onDestroy() {

        this.alarmManagerPositioning.cancel(pendingIntent);

    }
} 
```

我的问题是如何在 NotificationReceiver 中调用 NotificationService 并更改间隔？任何帮助都会很有用谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T08:10:05.123

使用在您的接收器中启动服务

```
Intent in = new Intent(context,NotificationService.class);
in.putExtra("interval",5001);
context.startService(in); 
```

在您的服务代码中，

```
long notificationInterval = intent.getLongExtra("interval", defaultValue) 
```

要从您的接收器获取数据，请使用 `onStartCommand(Intent intent, int flags, int startId)`，onStart 已被弃用。

# c# - 为每个屏幕创建一个应用实例

> ID：11152168
> 
> 赞同：1
> 
> 时间：2012-06-22T07:49:18.890
> 
> 标签：c#, .net, winforms

我希望我的 WinForms 应用程序为每个屏幕创建一个自身的实例并在该屏幕上显示。我有以下代码：

主要形式：

```
class MainForm
{
    public MainForm()
    {        
        string[] args = Environment.GetCommandLineArgs();

        foreach (string arg in args)
        {
          if (arg == "TakeOverAllScreens") { TakeOverAllScreens(); }
          if (arg.StartsWith("Screen|"))
             {
               string[] s;
               s = arg.Split('|');
               int xPos , yPos, screenNum ;
               int.TryParse(s[1], out xPos);
               int.TryParse(s[2], out yPos);
               int.TryParse(s[3], out screenNum);
               Screen[] sc;
               sc = Screen.AllScreens;
               this.Left = sc[screenNum].Bounds.Width;
               this.Top = sc[screenNum].Bounds.Height;
               this.StartPosition = FormStartPosition.Manual;
             }
        }

        InitializeComponent();
    }

    private void MainForm_Load(object sender, EventArgs e)
    {
        this.TopMost = true;
        this.FormBorderStyle = FormBorderStyle.None;
        this.WindowState = FormWindowState.Maximized;
    }
} 
```

TakeOverAllScreens 表单：

```
private void TakeOverAllScreens()
{
    int i = 0;
    foreach (Screen s in Screen.AllScreens)
    {
        if (s != Screen.PrimaryScreen)
        {
            i++;
            Process.Start(Application.ExecutablePath, "Screen|" + s.Bounds.X + "|" + s.Bounds.Y+"|" + i);
        }
    }
} 
```

我的应用程序确实为每个屏幕创建了一个新实例，但是它只显示在我的主屏幕上，而不会显示在其他屏幕上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:06:21.410

这看起来很可疑：

```
int.TryParse(s[1], out xPos);
int.TryParse(s[2], out yPos);
int.TryParse(s[3], out screenNum);
Screen[] sc;
sc = Screen.AllScreens;
this.Left = sc[screenNum].Bounds.Width;
this.Top = sc[screenNum].Bounds.Height; 
```

您在命令行上传递`x`和值，然后忽略它们并使用屏幕的*宽度*和*高度*来设置您的 x/y 值。如果所有屏幕的分辨率相同，并且水平或垂直排列，则所有这些窗口很可能都位于屏幕任何可见部分的下方（或右侧）。`y`

 **I also can't find any *guarantee* that [`Screen.AllScreens`](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.allscreens.aspx) will always return the screens in the same order, so the `screenNum` value may be referencing a different screen.

* * *

I'd also prefer to see this code appearing *after* the call to `InitializeComponents` rather than before, so you know that any designer set properties will be overridden by your code, rather than vice versa.

* * *

So, my code is:

```
public MainForm()
{   
    InitializeComponent();

    string[] args = Environment.GetCommandLineArgs();

    foreach (string arg in args)
    {
        if (arg == "TakeOverAllScreens") { TakeOverAllScreens(); }
        if (arg.StartsWith("Screen|"))
        {
            string[] s;
            s = arg.Split('|');
            int xPos, yPos, screenNum;
            int.TryParse(s[1], out xPos);
            int.TryParse(s[2], out yPos);
            this.Left = xPos;
            this.Top = yPos;
            this.StartPosition = FormStartPosition.Manual;
        }
    }
} 
```

And:

```
private void TakeOverAllScreens()
{
    foreach (Screen s in Screen.AllScreens)
    {
        if (s != Screen.PrimaryScreen)
        {
            Process.Start(Application.ExecutablePath, "Screen|" + s.Bounds.X + "|" + s.Bounds.Y);
        }
    }
} 
```

Of course, the `TryParse` calls are pointless and can be replaced by `Parse`, if you're just going to ignore the return value.**

# php - 创建图像的缩略图，然后将其保存到数据库中

> ID：11152171
> 
> 赞同：0
> 
> 时间：2012-06-22T07:49:27.027
> 
> 标签：php, mysql

我正在创建图像的缩略图，然后将其保存到数据库中，但我不知道该怎么做。这是我的代码

```
 function createThumbs( $pathToImages, $pathToThumbs, $thumbWidth ) 
 {
        $pathToImages = "../uploads/images/";
        // open the directory
        $dir = opendir( $pathToImages );

        // loop through it, looking for any/all JPG files:
        while (false !== ($fname = readdir( $dir ))) {
          // parse path for the extension

          $info = pathinfo($pathToImages . $fname);
          // continue only if this is a JPEG image
          if ( strtolower($info['extension']) == 'jpg' ) 
          {

            $pathToThumbs = "../uploads/images/thumbs/";
        //echo "Creating thumbnail for {$fname} <br />";

        // load image and get image size
        $img = imagecreatefromjpeg( "{$pathToImages}{$fname}" );
        $width = imagesx( $img );
        $height = imagesy( $img );

        // calculate thumbnail size
        $new_width = $thumbWidth;
        $new_height = floor( $height * ( $thumbWidth / $width ) );

        // create a new temporary image
        $tmp_img = imagecreatetruecolor( $new_width, $new_height );

        // copy and resize old image into new image 
imagecopyresized( $tmp_img, $img, 0, 0, 0, 0, $new_width,$new_height, $width, $height );

        // save thumbnail into a file
        imagejpeg( $tmp_img, "{$pathToThumbs}{$fname}" );
         $thumbimage =  $fname;
          }
        }
        // close the directory
closedir( $dir );

 }
 createThumbs("/uploads/documents","/uploads/images/thumbs/",100); 
```

缩略图的创建很好，但现在我不知道如何将它保存在数据库中（缺乏技能）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:12:58.773

为什么不将结果保存在文件中？

我认为您必须在数据库字段中选择文本类型，然后将图像的内容保存在那里，

并在带有“Content-type: image/jpg”标头的不同 php 文件中读取数据。

例如：

```
$query = "SELECT image FROM youtablename WHERE id = 10";
$result = mysql_query($query) or die('Error, query failed');
$content=mysql_result($result,0,"image");
header("Content-type: image/jpg");
echo $content; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:20:31.317

您可以使用自动生成缩略图的 Dropbox API。我认为将二进制文件保存在数据库中是我们可能犯的最严重的错误。特别是对于性能和文件管理变得困难。

# forms - Grails 表单和 URL 映射

> ID：11152172
> 
> 赞同：1
> 
> 时间：2012-06-22T07:49:30.257
> 
> 标签：forms, grails, gsp

我正在编写一个 Grails 应用程序，我想在其中设置一个允许用户输入图像 ID 号的表单，该值将传递给从 S3 检索给定图像 ID 的图像的控制器/操作。

所需的 url 格式为 example.com/results/1234。我已经设置了以下 URL 映射：

```
class UrlMappings {

    static mappings = {
        "/$controller/$action?/$id?"{
            constraints {
                // apply constraints here
            }
        }

        "/results/$id?" {
            controller = "s3Image"
            action = "getS3Image"
        }

        "/"(view:"/index")
        "500"(view:'/error')
    }
} 
```

以下是我设置表单的方式：

```
<g:form  controller="results" method="get">
    <input type="text" name="id" class="input-xxlarge" placeholder="http://www.example.com">
      <button class="btn btn-inverse">Submit</button>
</g:form> 
```

但是，这似乎将表单提交给 example.com/results?id=12345。

我将如何更改我的表单或映射，以便在表单提交后生成所需的 url？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T10:07:32.513

```
<g:form  controller="results" method="get"> 
```

将生成一个 HTML 表单，其操作 URL 为`/results`（名为“results”的控制器的反向 URL 映射，没有操作或 id）。提交此表单时，*浏览器*将添加`?id=1234`到此 URL 的末尾，因为表单方法是 GET。这不是您可以在服务器端的 URL 映射中影响的东西。

相反，您应该将表单 POST 到重定向到该操作的不同控制器`getS3Image`操作。重定向将可以访问服务器端的 ID，因此可以为重定向生成友好的 URL。

网址映射：

```
"/results/$id?" {
    controller = "s3Image"
    action = "getS3Image"
}

"/findImage" {
    controller = "s3Image"
    action = "find"
} 
```

S3ImageController：

```
def find() {
    redirect(action:"getS3Image", id:params.id)
}

def getS3Image() {
    // as before
} 
```

普惠制：

```
<g:form  controller="s3Image" action="find" method="post">
    <input type="text" name="id" class="input-xxlarge" placeholder="http://www.example.com">
      <button class="btn btn-inverse">Submit</button>
</g:form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:33:51.410

德里克，

你所看到的是正确的行为。对于 GET 请求，您有两件事

1.  请求网址
2.  参数

使用 urlencode 将参数附加在 url 之后并用 & 分隔，因此，当您具有URL [http://mydomain.com/controller/action/的](http://mydomain.com/controller/action/)*表单*时，在此表单中您有两个字段：id、name，然后，在提交时，它们将像这样传递： http://mydomain.com/controller/action/?id=3&name= [someName](http://mydomain.com/controller/action/?id=3&name=someName)

URLMappings 仅映射其中的 URL 部分。因此，在您的示例中， UrlMapping 仅与 /results/ 匹配，并且未传递 id 。

但这没关系，因为您仍然可以访问控制器中的 id 参数，只需这样做（在 s3Image 控制器中）：

```
def getS3Image() {
     def id = params.id
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:06:48.833

在 UrlMapping 中尝试非常简单的更改：

```
"/results/$id?" {
    controller = "s3Image"
    action = "getS3Image"
    id = $id
} 
```

然后确保您可以通过以下方式在 s3Image 控制器中访问 id：

```
def id = params.id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T07:59:40.627

~~我认为你在这里有两个问题。首先，UrlMappings 规则按照出现的顺序从上到下进行匹配。grails 匹配的第一条规则是`"/$controller/$action?/$id?"`. 将您的规则移到`"/results/$id?"`上面，它应该优先。~~-*检查帖子下方的评论*。

您的第二个错误是表格声明。我想你的意思是：

```
<g:form controller="s3Image" method="getS3Image"> 
```

# java - ArrayList.remove() 导致滞后

> ID：11152182
> 
> 赞同：-2
> 
> 时间：2012-06-22T07:50:19.653
> 
> 标签：java, arrays, memory, arraylist, allocation

我有一个困扰我一段时间的问题。我有一个软件，可以在其中生成一定数量的物理世界中的对象，并将它们存储在 ArrayList 中。但是，当从 ArrayList 中删除对象时，此实现会产生滞后。

静态数组实现不会导致滞后，但不太实用，因为我不能使用“添加”和“删除”。

我假设 ArrayLists 的滞后是由于内存释放和重新分配造成的。由于我的 ArrayList 具有固定的最大大小，是否可以预先分配一定的内存以避免这些问题？或者有其他解决方案吗？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:02:11.787

这里的问题是 an`ArrayList`是内部实现的，正如名称所述，使用数组。这意味着如果不移动您正在使用的索引之后的元素，就不能自由地插入或删除集合的元素。

因此，如果您的集合有很多元素，例如，您删除了第 5 个，那么从第 6 个到列表末尾的所有元素都必须向左移动一个位置。这确实可能很昂贵，并导致*O(n)*复杂度。

为避免这些问题，您应该根据您将在其上使用的最常见操作选择合适的集合。`LinkedList`如果您需要迭代、删除（实际上删除需要找到元素，所以只要您已经在枚举它们就很好了）或插入元素，但每当您想要访问特定索引时，您都会遇到麻烦，A可能会很好。

您也可以寻找 a[`HashSet`](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)或 a [`TreeSet`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)，它们可能适合您的解决方案。

在这些情况下，了解最常见的数据结构如何工作以及哪些是好/坏对于做出适当的选择**总是有用的。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T07:56:41.520

我通常不会只是转发别人的答案，但这[似乎](https://stackoverflow.com/questions/322715/when-to-use-linkedlist-over-arraylist)很合适。

# spring - Spring MVC + Hibernate 验证器：如何覆盖/国际化默认错误消息？

> ID：11152184
> 
> 赞同：3
> 
> 时间：2012-06-22T07:50:27.807
> 
> 标签：spring, spring-mvc, bean-validation, hibernate-validator

我正在开发一个 Spring MVC 项目，在该项目中我使用 Hibernate Validator 来验证表单中的输入字段。由于我的项目是基于 Maven 的，我添加了这个依赖项：

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator-annotation-processor</artifactId>
        <version>4.1.0.Final</version>
    </dependency> 
```

表单验证过程工作正常，但现在，我想覆盖或国际化默认错误消息。

例如，默认情况下，使用 @NotEmpty 注释将产生“可能不是空的”消息。如何用我自己的消息替换此消息？我尝试了几种解决方案：

*   定义一个 id 为 "messageSource" 的 Spring bean 并设置它的 "basenames" 属性
*   在项目类路径中创建 ValidationMessages.properties 文件

但是仍然显示默认消息...

有什么提示吗？提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T08:17:23.640

是的，你可以这么做。您可以从属性文件加载错误消息。但是您需要有正确格式的密钥。喜欢`NotEmpty.ClassName.fieldName=fieldName Can not be empty`。

您只需要在属性文件中指定确切的类名和属性名。在你的情况下，其他一切看起来都很完美。

对于具有该注释的所有字段，您还可以为特定类型的验证注释提供常见错误消息。像`javax.validation.constraints.NotNull=Notnull erro happened!`

希望这对您有所帮助。干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-05T04:05:54.410

这是一个关于如何在给定或用于验证的每个注释后面找到确切属性名称的解释。请参阅下面提到的步骤。

```
@Size(min = 1, max = 50, message = "Email size should be between 1 and 50") 
```

现在从验证标签中删除 { message = "Email size should be between 1 and 50" }。

完成此操作后，您的注释将是这样的。

```
@Size(min = 1, max = 50) 
```

现在在控制器端调试提交表单时调用的方法。以下是我在用户点击提交时接收请求的方法。

```
public static ModelAndView processCustomerLoginRequest(IUserService userService,LoginForm loginForm, 
    HttpServletRequest request, HttpSession session, BindingResult result, String viewType, Map<String, LoginForm> model) 
```

现在在方法的第一行放置一个调试点并调试参数“结果”。

```
BindingResult result 
```

在调试时，您会在代码数组中找到这样的字符串。

```
Size.loginForm.loginId 
```

现在在您的属性文件中定义此字符串并针对该字符串定义一条消息。编译并执行。只要未验证该注释，就会显示该消息。

```
Size.loginForm.loginId=email shouldn't be empty. 
```

基本上，spring 将自己的字符串作为其属性文件消息的键。在上面的键

```
Size(@Size) = validation annotation name
loginForm = My Class Name
loginId = Property name in LoginForm class. 
```

这种方法的美妙之处在于它在您将使用 Spring 国际化时也运行良好。它会随着语言的变化自动切换消息文件。

# java - 由于缺少文件而无法编译

> ID：11152194
> 
> 赞同：0
> 
> 时间：2012-06-22T07:51:06.483
> 
> 标签：java, eclipse, macos

我收到以下消息：

> 由于“找不到文件：路径/.DS_Store。”，该项目未构建。
> 修复问题，然后尝试刷新此项目并构建它，因为它可能不一致

这是我以前从未见过的错误消息。我在带有 Lion 的 Mac OSX 上运行 Eclipse Indigo。据我了解消息`.DS_Store`是我的文件导致我无法编译，但该文件怎么会与我的代码混淆？！

也许有趣或不有趣：

我的文件结构如下：

```
com.packagename 
```

它说`File not found: bin/com/.DS_Store`。`.DS_Store`它在我的二进制输出文件夹中找不到文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:08:10.213

尝试在项目导航器中刷新项目（F5 或右键单击/刷新）。

这些错误消息很可能是由 Eclipse 之外的文件系统中的修改引起的（例如，使用了外部构建器或 vcs 工具），并且 Eclipse 在构建期间检测到文件已更改。

或者，如果您使用的是足够新的 Eclipse，您可以在首选项中尝试两种设置，这在这些情况下也可能有所帮助：检查*使用本机挂钩*刷新和在首选项对话框中的常规/工作区页面中*访问时刷新。*

# c# - 应用程序启动时使用有界数据库的方法的单元测试

> ID：11152201
> 
> 赞同：0
> 
> 时间：2012-06-22T07:51:38.690
> 
> 标签：c#, database, unit-testing, nunit

我使用 NUnit 进行单元测试。在我当前的项目中，我遇到了一个问题，我想测试的几乎所有功能都连接到数据库。同时，数据库在应用程序启动时是有界的。

我现在很困惑，我读过关于模拟单元测试的内容，但不知道如何处理这个问题。我这里有什么解决方案吗？

更难的是，这个数据库是静态的，而不是我的方法的参数......这让我很困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T07:55:06.223

您可能想要查看应用程序的体系结构。确保数据库层是松散耦合的，例如通过使用接口。这将使为您的数据库层编写存根或模拟成为可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:38:33.917

The normal solution to this is to keep your data layer in a separate class that implements a well-known interface. For instance:

```
public interface IDataLayer
{
    IEnumerable<Customer> GetAllCustomers();

    Order GetOrderById(int id);
} 
```

You will implement the interface as normal for your actual data access

```
public class SqlServerDataLayer : IDataLayer
{
    // implementation
} 
```

But in your tests, you can now use a mocking framework like Moq or RhinoMocks to set up a mock data layer that returns test data. This ensures you are only testing how your classes use the data, which is ideal.

```
[Test]
public void TestGettingCustomersRefreshesViewModel()
{
    //arrange
    var mockDb = new Mock<IDataLayer>();
    mockDb.Setup(db => db.GetAllCustomers()).Returns(new List<Customer>());
    underTest.DataRepository = mockDb.Object;

    //act
    underTest.GetCustomerCommand.Execute();

    //assert
    Assert.That(underTest.CustomerList != null);
} 
```

# c# - File.Exists 有什么问题？

> ID：11152202
> 
> 赞同：-2
> 
> 时间：2012-06-22T07:51:38.810
> 
> 标签：c#, file

我在这里坐了 2 个小时，为我的问题寻找解决方案。我想检查一个文件是否存在。

我有一个`ButtonCreate`类，在这个类中我创建了一个 Directory `newSFO`， Directory 的名称是*MUMO*。然后我想检查文件是否`newSFoZipName`存在，如果文件存在就不要创建它。但它不起作用。提前致谢！

```
newSFoZipName = MySubFName + MytbRevision + "__C8" + MyLastCh + ".zip";

if (LastCh == "M")
{
    Regex rgx = new Regex(@"M");
    tbRFolder = rgx.Replace(LastCh, "Mumo");
    newSFo = Path.Combine(newSubPath, tbRFolder);
    Directory.CreateDirectory(newSFo);
    newSFoZip = Path.Combine(newSFo, newSFoZipName);
   // File.Create(newSFoZipName).Close();

    //string path2 = newSFo + newSFoZip;
    File.Create(newSFoZipName).Close();

    if (Directory.Exists(newSFoZip))
    {
        if (!File.Exists(newSFoZipName))
        {
            MessageBox.Show("File exists");
        }
    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-22T07:52:58.290

你写

```
if (!File.Exists(newSFoZipName))
{
    MessageBox.Show("File exists");
} 
```

代替

```
if (File.Exists(newSFoZipName))
{
    MessageBox.Show("File exists");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T07:59:26.450

也可以这样写

```
 if (!File.Exists(newSFoZipName))
    {
        MessageBox.Show("File Not Exists"); //code to create file here
    }
else
    {
        MessageBox.Show("File Exists");
    } 
```

# ffmpeg - ffmpeg drawtext 在一个命令中叠加电影

> ID：11152205
> 
> 赞同：2
> 
> 时间：2012-06-22T07:51:54.827
> 
> 标签：ffmpeg

是否可以在一个 ffmpeg 命令中包含电影覆盖和绘制文本。

我尝试了命令，但它给出了错误

```
[drawtext @ 03B2BBC0] Key '"fontsize' not found.
[drawtext @ 03B14F20] Error parsing options string: '"fontsize=28:fontcolor=White:fontfile=/Windows/Fonts/arial.ttf:text=shotName:x=(w)/5:y=(h)/1"'Error initializing filter 'drawtext' with args '"fontsize=28:fontcolor=White:fontfile=/Windows/Fonts/arial.ttf:text=shotName:x=(w)/5:y=(h)/1"'
Error opening filters! 
```

命令 ：

`ffmpeg -i D:/imagesequence/background.jpg -vf "movie='D\:/imagesequence/dpx/thumbnail.jpg' [link1]; [in][link1]overlay=(main_w-overlay_w)/2:(main_h-overlay_h)/3 [int];[int][link1]drawtext=\"fontsize=28:fontcolor=White:fontfile='/Windows/Fonts/arial.ttf':text='shotName':x=(w)/5:y=(h)/1\"[out]" D:/imagesequence/dpx/final_with_text_mod_04.jpg`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:38:20.563

我尝试了以下它给出了预期的输出，非常感谢Ben

```
ffmpeg -i D:/imagesequence/background.jpg -vf "movie='D\:/imagesequence/dpx/thumbnail.jpg' [watermark]; [in][watermark] overlay=(main_w-overlay_w)/2:(main_h-overlay_h)/3[water];[water] drawtext=fontsize=18:fontcolor=Yellow:fontfile=/Windows/Fonts/arial.ttf:text='shotcam':x=(w)/2:y=(h)-25,drawtext=fontsize=18:fontcolor=Yellow:fontfile=/Windows/Fonts/arial.ttf:text='Frame \:':x=(w)/1.2:y=(h)-25[out]" D:/imagesequence/dpx/final_with_text_mod_04.jpg 
```

# javafx-2 - 包含 WebView 单元的 JavaFX 2.1 TableView

> ID：11152206
> 
> 赞同：1
> 
> 时间：2012-06-22T07:51:57.277
> 
> 标签：javafx-2

我想创建一个 JavaFX 表，在一列的单元格中，允许用户编辑 XHTML 文本。我只需要非常基本的格式化功能，比如粗体、斜体、罢工线。

我已经设法通过使用我自己的 TableCell 子类并为每个单元格使用 WebView 来实现这一点（HTMLEditor 当然是另一种选择，但我的猜测是，对于我的要求，WebView 应该就足够了）。

但是，为了让用户编辑舒适，我需要以下功能： 1\. 如果用户输入多行文本，则单元格高度需要调整大小。2\. 上下文菜单（或者，如果不可能，其他菜单或按钮）应该允许格式化单元格中的部分文本，如上所述（粗体、斜体..）

有没有人成功实施类似的东西？我在网上看到过一些建议，但它们很少包含代码示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:36:49.183

I have succedded doing something similar.
I figured I can share some of the basic clues that allowed me to achieve it.

1.  Resize the whole WebView. For that, the whole WebView must be an editable html page. You achive that by setting contenteditable to true:

    <body contenteditable='true' id='content'></body>

2.  You can have a context menu over a webview. But it is something tricky, as you must first disable the original context menu associated to it.

    WebView editView;

    ...

    EventDispatcher originalDispatcher = editView.getEventDispatcher(); editView.setEventDispatcher(new WebmenuEventDispatcher(originalDispatcher));

And this is the event dispatcher class:

```
 public class WebmenuEventDispatcher implements EventDispatcher {

        private EventDispatcher originalDispatcher;

        public WebmenuEventDispatcher(EventDispatcher originalDispatcher) {
            this.originalDispatcher = originalDispatcher;
        }

        @Override
        public Event dispatchEvent(Event event, EventDispatchChain tail) {
            if (event instanceof MouseEvent) {
                MouseEvent mouseEvent = (MouseEvent) event;
                if (MouseButton.SECONDARY == mouseEvent.getButton()) {
                    mouseEvent.consume();
                    // Show our own menu
                    cmEdit.show(editView.getScene().getWindow(), mouseEvent.getScreenX(), mouseEvent.getScreenY());
                }
            }
            return originalDispatcher.dispatchEvent(event, tail);
        }
    } 
```

Now, for setting the font from within that menu, you need a bidirectional Java<->javascript bridge and use some javascript in the webview side.

# ruby-on-rails - 扫描资产文件夹并将它们加载到 production.rb 有什么缺点吗？

> ID：11152211
> 
> 赞同：0
> 
> 时间：2012-06-22T07:52:03.583
> 
> 标签：ruby-on-rails, ruby, asset-pipeline

在我和我的同事身上发生过我们忘记在预编译文件列表中添加 a`.js`或 a的情况。`.css`我想更改`production.rb`文件以扫描 javascripts/stylesheets 文件夹，并将动态添加到`config.assets.precompile`变量中。代码看起来像这样：

```
def get_assets(folder,select_extensions,delete_from,remove_extensions)
  files     = Dir["#{folder}/**/*"].select {|e| select_extensions.include?(File.extname(e))}
  basenames = files.map {|e| e.sub(/.*#{delete_from}\//,"") }
  basenames.each do |bn|
    remove_extensions.each do |ext|
      bn.sub!(ext,"")
    end
  end
  basenames
end 
```

在production.rb中，我会有这样的东西：

```
config.assets.precompile = get_assets("#{Rails.root}/app/assets/javascripts",[".js",".coffee"],"javascripts",[".coffee"]) + get_assets("#{Rails.root}/app/assets/stylesheets",[".css",".scss"],"stylesheets",[".scss"]) 
```

你看到我的想法有什么缺点/陷阱吗？

# r - 用应用填充数据框

> ID：11152212
> 
> 赞同：1
> 
> 时间：2012-06-22T07:52:12.787
> 
> 标签：r, dataframe, apply

我想通过执行以下脚本来填充数据框：

```
for(i in 1:3000) {
    adress=grep(nomcusip[i,1],Name2C[,"LName"])
    if(length(adress)>0 && !is.na(length(adress))) {
        for(j in 1:length(adress)) {
            nomcusip[i,1+j]=adress[j]
        }
    }
} 
```

这是数据框：

```
 V1
1   2122united natural foods
2   238 telecom limited
3   24 hour fitness
4   24/7 real media 
5   247media
... 
```

我确信有一种方法可以使用 apply 函数更快地做到这一点，但我不知道该怎么做。

有人可以告诉我吗？

非常感谢，文森特

# java - 如何在java中逐行读取存储在GAE的blobstore中的文件？

> ID：11152216
> 
> 赞同：-1
> 
> 时间：2012-06-22T07:52:24.557
> 
> 标签：java, google-app-engine

我已使用以下链接中给出的代码将文件上传到 blobstore [https://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore](https://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:07:40.700

您发布的链接中给出的示例有什么问题？

```
 // Later, read from the file using the file API
      lock = false; // Let other people read at the same time
      FileReadChannel readChannel = fileService.openReadChannel(file, false);

  // Again, different standard Java ways of reading from the channel.
      BufferedReader reader = new BufferedReader(Channels.newReader(readChannel, "UTF8"));
      String line = reader.readLine();
  // line = "The woods are lovely dark and deep." 
```

# lua - 计算字符串出现的次数

> ID：11152220
> 
> 赞同：18
> 
> 时间：2012-06-22T07:52:39.400
> 
> 标签：lua

我正在尝试计算“--”在字符串中出现的次数。

因此，例如，它在这里出现两次 'a --b --c'

我尝试了以下方法，但它给了我 4 而不是 2，知道为什么吗？

```
argv='a --b --c'
count = 0
for i in string.gfind(argv, " --") do
   count = count + 1
end
print(count) 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-22T14:27:02.210

您实际上可以使用以下方法作为单线执行此操作`string.gsub`：

```
local _, count = string.gsub(argv, " %-%-", "")
print(count) 
```

无需循环！

不推荐用于大输入，因为该函数将处理后的输入返回给`_`变量，并将保留在内存中，直到变量被销毁。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-07-10T02:11:41.873

根据[Mike Corcoran的响应和](https://stackoverflow.com/users/1208078/mike-corcoran)[WD40](https://stackoverflow.com/users/3043033/wd40)的优化建议，此片段可能会有所帮助

```
function count(base, pattern)
    return select(2, string.gsub(base, pattern, ""))
end

print(count('Hello World', 'l')) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-22T07:59:38.040

该`-`字符在模式中具有特殊含义，用于非贪婪重复。

你需要逃避它，即使用模式`" %-%-"`。

# android - Android 兼容性 - micromax funbook

> ID：11152223
> 
> 赞同：3
> 
> 时间：2012-06-22T07:53:03.610
> 
> 标签：android, android-layout, android-compatibility

我是android开发的新手。而且我对 android 布局兼容性感到困惑。

我正在 android 4.0.3 中创建一个应用程序，但它的 UI 看起来像 android **2.2**相关的 UI。

我在应用程序中使用了所有默认控件，但它看起来不像**4.0.3**相关的 UI。

所以任何人都可以帮助我解决以下问题。

1.  如果我在 android 4.0.3 中创建应用程序，那么它在 android 2.2 中的外观如何，反之亦然？
2.  如何创建在所有具有标准 UI 的 android 版本中运行的应用程序？

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:05:34.880

您的应用将使用`theme`您指定的系统或您指定的自定义`styles`。如果您不创建自定义`themes`或`styles`您的应用程序将使用每个平台上的默认样式。所以在 4.0.3 上它将使用 ICS 主题，而在 2.2 上它将使用旧主题。

要创建一个可以在所有版本上运行的应用程序，您可能应该将目标 API 设置为 1.5，但是剩下 1.5 的设备很少，因此您可能会将 API 目标设置为 2.2，这将使您的应用程序在所有装有 Android 2.2+ 的设备。

# drupal - 如何在 Drupal 模块中抛出 404 错误？

> ID：11152227
> 
> 赞同：25
> 
> 时间：2012-06-22T07:53:28.700
> 
> 标签：drupal, drupal-7, drupal-8

我需要在模块中抛出 404 错误。或者是否有可能为菜单挂钩设置所需的选项？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-22T08:59:56.527

这很容易。这些应该负责看门狗、HTTP 404 响应代码和其他相关的事情。

**对于 Drupal 6 和 7**

在模块的页面回调中，执行：`return drupal_not_found();`

**对于 Drupal 8**

在定义中`class::method()`提到的`_controller`（即页面回调或负责为请求生成输出的方法）中，执行以下操作：

`throw new \Symfony\Component\HttpKernel\Exception\NotFoundHttpException();`

**参考**

*   [Drupal 6 的 drupal_not_found() 文档](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_not_found/6)。
*   [Drupal 7 的 drupal_not_found() 文档](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_not_found/7)。
*   [Drupal 8 的 NotFoundHttpException 文档](https://api.drupal.org/api/drupal/vendor%21symfony%21http-kernel%21Exception%21NotFoundHttpException.php/class/NotFoundHttpException/8.2.x)。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-05-07T00:36:50.357

对于 Drupal 8

```
use Symfony\Component\HttpKernel\Exception\NotFoundHttpException;
// then
throw new NotFoundHttpException(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-11-19T03:38:46.210

`MENU_NOT_FOUND`应该在页面回调函数中返回。

> 想要报告“找不到页面”消息的页面回调函数应该返回 MENU_NOT_FOUND 而不是调用 drupal_not_found()。— [http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_not_found/7](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_not_found/7)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-13T02:23:40.403

查看 drupal_add_http_header() 函数以使用 HTTP 标头属性。还要确保将其粘贴在模块代码的顶部，以确保它首先执行。此外，您可能会发现这很有帮助。[https://www.drupal.org/project/generate_errors](https://www.drupal.org/project/generate_errors)

# iphone - 如何更改键盘的完成按钮，iPhone

> ID：11152228
> 
> 赞同：4
> 
> 时间：2012-06-22T07:53:30.397
> 
> 标签：iphone, ipad

我有 2 个文本字段，用于登录 ID 和密码。当用户点击电子邮件 ID 时，他们的键盘类型是电子邮件，密码是默认值。他们完成了两个键盘的按钮，关闭了键盘。我想要做的是，一旦用户填写了 id 和密码，他们的 DONE 按钮应该更改为“LOGIN”，我可以对其执行选择器方法来登录。

这可行吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T08:10:05.623

如果您使用的是标准 iOS 键盘，那么唯一可用的返回键类型是

```
typedef enum {
    UIReturnKeyDefault,         // “Return”
    UIReturnKeyGo,              // “Go”
    UIReturnKeyGoogle,          // “Google”.
    UIReturnKeyJoin,            // “Join”.
    UIReturnKeyNext,            // “Next”.
    UIReturnKeyRoute,           // “Route”.
    UIReturnKeySearch,          // “Search”.
    UIReturnKeySend,            // “Send”.
    UIReturnKeyYahoo,           // “Yahoo”.
    UIReturnKeyDone,            // “Done”
    UIReturnKeyEmergencyCall,   // "Emergency Call”.
} UIReturnKeyType; 
```

要检测键盘上的 keychange，您可以注册 name:UITextFieldTextDidChangeNotification 。假设您的文本字段是 emailTextField 和 passwordTextField。

首先你注册通知，检测文本输入

```
// emailTextField
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(check)
                                             name:UITextFieldTextDidChangeNotification
                                           object:emailTextField];

// passwordTextField
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(check)
                                             name:UITextFieldTextDidChangeNotification
                                           object:passwordTextField];

- (void)check {
  if ([emailTextField.text length] > 0 && [passwordTextField.text length] > 0) {
     // Set the return key here, e.g:
     emailTextField.returnKeyType = UIReturnKeyGo;
     passwordTextField.returnKeyType = UIReturnKeyGo;
  }
  else {
     // Set the return key here, e.g: 
     emailTextField.returnKeyType = UIReturnKeyNext;
     passwordTextField.returnKeyType = UIReturnKeyNext;
  }
} 
```

当点击返回键时，它将调用文本字段委托。你可以这样做：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    // You can perform selector here, probably after checking if both of the textfields already filled   out. E.g:
    if ([emailTextField.text length] > 0 && [passwordTextField.text length] > 0) {
        [self performSelector:@selector(login)];
    }

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T08:03:51.030

`UITextInputTraits`协议定义如下`UIReturnKeyType`-

```
typedef enum {
    UIReturnKeyDefault,
    UIReturnKeyGo,
    UIReturnKeyGoogle,
    UIReturnKeyJoin,
    UIReturnKeyNext,
    UIReturnKeyRoute,
    UIReturnKeySearch,
    UIReturnKeySend,
    UIReturnKeyYahoo,
    UIReturnKeyDone,
    UIReturnKeyEmergencyCall,
} UIReturnKeyType; 
```

对于您的特定目的，您需要自定义按钮，您可以查看以下教程 - [http://mhasantanim.wordpress.com/tutorial/iphone/customize-done-button/](http://mhasantanim.wordpress.com/tutorial/iphone/customize-done-button/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T08:14:02.237

此外，如果您使用 InterfaceBuilder，您可以选择您的 UITextField 并在 Attributes Inspector 中更改“Return Key”下拉框的值。

# apache - 如何设置 xampp 打开 localhost:8080 而不仅仅是 localhost

> ID：11152231
> 
> 赞同：10
> 
> 时间：2012-06-22T07:53:43.703
> 
> 标签：apache, xampp, localhost, port

我使用 XAMPP 1.7.3。安装了 Apache 和 MySQL。没有其他的。

Apache 安装在默认端口 80 上。单击 Apache 旁边的 Admin 将打开`http://localhost/xampp/`。哪个按预期工作。

我导航到`xampp/apache/conf/httpd.conf`并编辑了它。设置`Listen 8080`。现在`http://localhost:8080/xampp/`可以按预期工作，但“管理”按钮仍会打开`http://localhost/xampp/`，但不会打开任何东西。这样做后我重新启动了计算机，但没有任何结果。

如何使 XAMPP apache 管理员打开`localhost:8080/xampp`？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-05-15T18:48:34.213

Admin 按钮引用的端口是可配置的。在 XAMPP 安装文件夹中有一个`xampp-control.ini`文件。更改下面的 Apache 条目`[ServicePorts]`将影响 Admin 按钮打开的 url。

```
[ServicePorts]
Apache=8080 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T07:56:52.150

我相信管理按钮将始终打开默认配置。它只包含一个链接`localhost/xampp`，它不读取服务器配置。

如果更改默认设置，您就知道更改了什么，您可以直接在浏览器中输入 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-12T15:15:58.480

您可以通过写作获得本地主机页面，`localhost/xampp`或者通过写作`http://127.0.0.1`您将获得本地主机页面。在启动可以来自 wamp、xamp 或 Lamp 的 apache 服务之后。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-04T14:00:18.417

使用 XAMPP GUI 的步骤：

第一步：点击**配置**按钮

[![在此处输入图像描述](../Images/da7089b4f330bc5009922498415cf24c.png)](https://i.stack.imgur.com/SREre.png)

第二步：点击**服务和端口设置**按钮

[![在此处输入图像描述](../Images/741656c85691e9d05c59004568de8b48.png)](https://i.stack.imgur.com/oZ8jP.png)

最后一步：更改您的**端口并保存**

[![在此处输入图像描述](../Images/f71126ac18a26f91f88b104f58a078ff.png)](https://i.stack.imgur.com/uuafX.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-13T18:03:53.807

我同意并在 xammp-control 下找到此文件，文件类型为配置。当我将其更改为 8080 时，它会自动运行！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-16T02:13:48.590

打开 XAMPP 查看 X 下方以关闭程序，有一个配置选项单击它，然后单击服务和端口设置，然后在 Apache 下将主端口更改为您在配置文件中更改的任何内容，然后单击保存，一切顺利。

# ruby-on-rails - 设计：使用两个可能的加密密码登录

> ID：11152234
> 
> 赞同：5
> 
> 时间：2012-06-22T07:53:56.093
> 
> 标签：ruby-on-rails, ruby, devise, md5, bcrypt

我的应用程序使用 Devise gem 进行身份验证，但我想自定义它以使用两个可能的加密密码登录，因为我以前的应用程序使用 MD5。我的用户表中有两个字段：**encrypted_pa​​ssword**和**encrypted_old_password**（我已经创建），我想检查是否存在值**encrypted_pa​​ssword**以及发送的密码是否与一组匹配，否则，检查它是否与 MD5 匹配，如果为真，然后替换值**encrypted_pa​​ssword**。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T07:53:48.330

我不知道我的答案是否花哨，但对我有用。我希望有人可以改进我所做的。

```
class SessionsController < Devise::SessionsController

  def create
    recover_old_password unless user_signed_in?

    resource = warden.authenticate! auth_options
    set_flash_message(:notice, :signed_in) if is_navigational_format?
    sign_in resource_name, resource

    respond_with resource, :location => after_sign_in_path_for(resource)
  end

  def recover_old_password

    email = params[:user]['email']
    pass  = Digest::MD5.hexdigest params[:user]['password']

    @user = User.find_by_email_and_encrypted_old_password(email, pass)

    if @user.blank?

      resource = warden.authenticate! auth_options
      respond_with resource, :location => after_sign_in_path_for(resource)

    elsif

      if !@user.encrypted_password.nil?
        @user.encrypted_password = BCrypt::Password.create params[:user]['password']
        @user.save
        create
      end  

    end

  end

end 
```

# iphone - 如何在iphone中使用一个参数从另一个全局函数调用全局函数？

> ID：11152235
> 
> 赞同：1
> 
> 时间：2012-06-22T07:53:58.337
> 
> 标签：iphone

您好我对 iphone 开发非常陌生。我是 java 背景开发人员。所以我的方法就像 java 。

这里我的要求是我想从每个视图控制器调用一个全局函数。从那里我将 self.navigationController 作为参数传递。在该功能中，我添加了一些按钮。当用户单击该按钮时，它应该再调用一个函数，并且它应该携带相同的对象作为参数。

请给我指导。我尝试如下，但它在编译时显示错误

实用程序.m

```
 +(void)setBacKButton:(UINavigationController *)navigationController
    {

        for(UIButton *btn in navigationController.navigationBar.subviews){
            if([btn isKindOfClass:[UIButton class]]){
                [btn removeFromSuperview];
            }
        }

        UIButton *btn2=[UIButton buttonWithType:UIButtonTypeCustom];
        btn2.frame=CGRectMake(708, 0, 50, 54);
        [btn2 setImage:[UIImage imageNamed:@"btn_back.png"] forState:0];
        [btn2 setImage:[UIImage imageNamed:@"btn_back_h.png"] forState:UIControlStateSelected];
        // here i need to call bellow function when click on this button
//[btn2 addTarget:self action:@selector() forControlEvents:UIControlEventTouchUpInside];
        [navigationController.navigationBar addSubview:btn2];  
    }
    +(void)gotoBack:(UINavigationController *)navigationController
    {
        [navigationController popViewControllerAnimated:YES];
    } 
```

我从我的视图控制器中调用该函数为

```
[Utilities setBacKButton:self.navigationController]; 
```

请告诉我我们如何实现这一目标

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T07:58:28.277

在您的应用程序委托中添加一个函数。并在您的所有视图控制器中调用该函数。使用 appdelegate 对象。然后在该函数中添加一个带有 id sender 的按钮，并在方法中执行您想要的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:29:30.467

你会想要创建一个 UINavigationBar 类别。

UINavigationBar+customBackButton.h

```
#import <UIKit/UIKit.h>

@interface UINavigationBar (customBackButton)
- (void)setCustomBackButton;
@end 
```

UINavigationBar+customBackButton.m

```
#import "UINavigationBar+customBackButton.h"

@implementation UINavigationBar (customBackButton)

- (void)setCustomBackButton
{
    for(UIButton *btn in self.subviews)
    {
        if([btn isKindOfClass:[UIButton class]])
        {
            [btn removeFromSuperview];
        }
    }

    UIButton *btn2=[UIButton buttonWithType:UIButtonTypeCustom];
    btn2.frame=CGRectMake(708, 0, 50, 54);
    [btn2 setImage:[UIImage imageNamed:@"btn_back.png"] forState:0];
    [btn2 setImage:[UIImage imageNamed:@"btn_back_h.png"] forState:UIControlStateSelected];
    // here i need to call bellow function when click on this button
    //[btn2 addTarget:self action:@selector() forControlEvents:UIControlEventTouchUpInside];
    [self addSubview:btn2];
}

@end 
```

然后在任何视图控制器中，您都可以像这样导入它

```
#import "UINavigationBar+customBackButton.h"

[self.navigationController.navigationBar setCustomBackButton]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T09:59:36.123

只需在您的应用程序中创建一个导航控制器 Delegate ...并使用此推送您的视图控制器..按照以下代码...

```
 //YourAppdelegate.h
   UINavigationController *navController; 
   @property(nonatomic,retain)UINavigationController *navController; 

  // your appdelegate.m

  navController = [UINavigationController alloc]initWithRootViewController:self.viewController];
  self.window.rootViewController = navController ; 
```

现在在这里（在 appdelegate.m 中）使您的全局函数像.......

```
 - (void)setBacKButton:(UINavigationController *)navigationController{
     // put your code here
  } 
```

现在从你需要这样的视图控制器调用它......

```
 // yourViewController.m 
```

# 导入“yourAppdelegate.h”

当您必须调用该函数时，只需编写这两行..

```
 YourAppdelegate    *appdelegate = (YourAppdelegate*)[[UIApplication sharedApplication]delegate];

  [appdelegate setBacKButton:self.navigationController]; 
```

这可能会帮助你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-23T12:17:55.557

根据上面@ewiinnnnn 的回复，我想出了一种使用自定义类别并让后退按钮按预期导航的方法：

```
// UIViewController+customBackButton.h

#import <UIKit/UIKit.h>

@interface UIViewController (customBackButton)
- (void)setCustomBackButton;
@end

// UIViewController+customBackButton.m

#import "UIViewController+customBackButton.h"

@implementation UIViewController (customBackButton)

// sets my custom back button
- (void)setCustomBackButton
{

    UINavigationItem *navItem = self.navigationItem;

    UIButton *customButton = [UIButton buttonWithType:UIButtonTypeCustom];
    UIImage *addButton = [UIImage imageNamed:@"backButton.png"];
    UIImage *addButtonSelected = [UIImage imageNamed:@"backButtonHighlighted.png"];

    [customButton setBackgroundImage:addButton  forState:UIControlStateNormal];
    [customButton setBackgroundImage:addButtonSelected  forState:UIControlStateHighlighted];
    customButton.frame=CGRectMake(0.0, 0.0, addButton.size.width, addButton.size.height);
    [customButton addTarget:self action:@selector(navigateBack) forControlEvents:UIControlEventTouchUpInside];
    UIBarButtonItem *barButtonItem = [[UIBarButtonItem alloc] initWithCustomView: customButton];

    navItem.leftBarButtonItem = barButtonItem;

}

// the action that is triggered when the back button is pressed
- (void)navigateBack {
    [self.navigationController popViewControllerAnimated:YES];
}

@end 
```

然后在 UIViewController 中：

```
// MyViewController.m

#import "UIViewController+customBackButton.h"

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    // add back button to navcontroller
    [self setCustomBackButton];

} 
```

# forms - 猫鼬的 express.js 表单模块

> ID：11152236
> 
> 赞同：3
> 
> 时间：2012-06-22T07:54:14.533
> 
> 标签：forms, node.js, express, mongoose

我正在寻找一个 node.js 兼容的表单处理程序、映射器、验证器、渲染器，它使用猫鼬模型来创建表单。

有人可以推荐我一个包裹吗？

我找到了这两个：

1.  [https://github.com/oJshua/mongoose-forms](https://github.com/oJshua/mongoose-forms)
2.  [https://github.com/GothAck/forms-mongoose](https://github.com/GothAck/forms-mongoose)

但是他们已经有一段时间没有更新了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T14:36:28.250

所以我检查了不同的表单模块。

首先，我使用了“表单”模块。然后我检查了[https://github.com/GothAck/forms-mongoose](https://github.com/GothAck/forms-mongoose)的 src 代码，发现它依赖于仅通过阅读猫鼬模型扩展的“表单”。因此，您不必为表单编写额外的架构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-15T19:23:56.653

我建议检查 Formage (npm:formage)

[https://github.com/Empeeric/formage](https://github.com/Empeeric/formage)

# ios - MKMapView - 将地图滚动限制为方形覆盖

> ID：11152244
> 
> 赞同：3
> 
> 时间：2012-06-22T07:54:41.817
> 
> 标签：ios, mkmapview, mapkit, mkoverlay

我有一个带有方形叠加层的 MKMapView，描述为：

```
 CLLocationCoordinate2D coordsBg[5]={
    CLLocationCoordinate2DMake(31.750865,35.180882),
    CLLocationCoordinate2DMake(31.740331,35.180882),
    CLLocationCoordinate2DMake(31.740331,35.165452),
    CLLocationCoordinate2DMake(31.750865,35.165452),
    CLLocationCoordinate2DMake(31.750865,35.180882)
};     

MKPolygon *bg=[MKPolygon polygonWithCoordinates:coordsBg count:5];
[map addOverlay:bg]; 
```

我希望限制用户滚动到覆盖层之外。

我可以为此限制 MKMapView 滚动视图吗？还是有其他方法？

谢谢

沙尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:06:08.683

经过几个小时的努力，我得到了这个对我来说非常有用的解决方案。

它混淆了：

这篇文章：[设置 mkmapview 的缩放级别](http://troybrant.net/blog/2010/01/set-the-zoom-level-of-an-mkmapview/)

这个链接：[限制 mkmapview](https://stackoverflow.com/questions/4119117/restrict-mkmapview-scrolling)从@Anna Karenina 滚动到我的问题。

这是我的代码：

```
- (void)mapView:(MKMapView *)mapView regionWillChangeAnimated:(BOOL)animated
{
    lastGoodMapRect = mapView.visibleMapRect;
    lastGoodRegion = mapView.region;
}

- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated
{

    if (manuallyChangingMapRect) {
        manuallyChangingMapRect=NO;
        return;
    }

    if( [mapView zoomLevel] > 16 )
    {
        [mapView setCenterCoordinate:lastGoodRegion.center zoomLevel:16 animated:YES];
    }

    MKMapRect visibleRect = mapView.visibleMapRect;
    MKMapRect OverlayRect = bg.boundingMapRect;
    MKMapRect intersectionRect = MKMapRectIntersection(visibleRect,OverlayRect);

    //you can change the min and max zoom off course
    if(!MKMapRectEqualToRect(visibleRect,intersectionRect)){
        if( [mapView zoomLevel] < 15){

            [mapView setCenterCoordinate:lastGoodRegion.center zoomLevel:15 animated:YES];
        }else if( [mapView zoomLevel] > 16 )
        {
            [mapView setCenterCoordinate:lastGoodRegion.center zoomLevel:16 animated:YES];
        }else{
            manuallyChangingMapRect=YES;
            [mapView setVisibleMapRect:lastGoodMapRect animated:YES];
        }
    }

} 
```

# c# - c#中如何对大数据进行分页和查询

> ID：11152260
> 
> 赞同：0
> 
> 时间：2012-06-22T07:56:37.087
> 
> 标签：c#, sql-server-2005, ado.net

`IDbDataReader`我需要通过 C# 和 ADO.NET（和`IDbCommand`API）从数据库中查询大量数据。我创建了如下查询：

```
WITH v as 

(SELECT myFields, Datefield 

ROW_NUMBER() OVER (ORDER BY Datefield ASC) AS CurrentRow 

FROM dbTable 

WHERE /**/ 

AND Datefield BETWEEN @pStart AND @pEnd 

// ... )

SELECT myFields, Datefield from v where CurrentRow 
BETWEEN @pRowStart AND @pRowEnd 
```

从结果来看，我必须使用将转换和生成新数据的 C# API，这就是为什么不能使用 SqlServer - only 解决方案的原因。

我想查询页面大小为 10000 的数据库，直到没有更多数据为止。就像是

```
while (true)
{
  // ... execute reader
  if (reader.HasRows) 
     break;
} 
```

将不起作用，因为我必须使用 IDbDataReader 接口。

在我的情况下我能做什么？

**编辑+解决方案** 我在while循环中遍历每个块并检查`HasRows`数据读取器的属性，因为我可以使用专门的类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:12:39.303

在 SQL Server 2012 上，您可以使用 OFFSET 和 FETCH 子句进行简单高效的分页，如[ORDER B](http://msdn.microsoft.com/en-us/library/ms188385.aspx) Y 子句示例所示：

```
SELECT DepartmentID, Name, GroupName
FROM HumanResources.Department
ORDER BY DepartmentID ASC 
    OFFSET @StartingRowNumber - 1 ROWS 
    FETCH NEXT @RowCountPerPage ROWS ONLY; 
```

在以前的版本中，您可以使用 CTE 和[ROW_NUMBER()](http://msdn.microsoft.com/en-us/library/ms186734.aspx)计算每行的数字并限制结果：

```
WITH OrdersRN AS
(
    SELECT ROW_NUMBER() OVER(ORDER BY OrderDate, OrderID) AS RowNum
      ,OrderID
      ,OrderDate
      ,CustomerID
      ,EmployeeID
    FROM dbo.Orders
)

SELECT * 
  FROM OrdersRN
  WHERE RowNum BETWEEN (@PageNum - 1) * @PageSize + 1 
              AND @PageNum * @PageSize
  ORDER BY OrderDate ,OrderID; 
```

# facebook-page - 重定向到粉丝页面上的应用程序

> ID：11152264
> 
> 赞同：0
> 
> 时间：2012-06-22T07:56:45.020
> 
> 标签：facebook-page, apprequests

首先，对不起我的英语不好。

我有一个安装在多个粉丝页面上的应用程序。

我想要这个应用程序中的应用请求对话框。当用户单击邀请按钮时，他会看到一个邀请朋友的请求对话框，但通知重定向到画布页面而不是粉丝页面上的应用程序。

我使用这段代码：

```
<head>
    <title>Request Example</title>
  </head>

  <body>
    <div id="fb-root"></div>
    <script src="http://connect.facebook.net/en_US/all.js"></script>
    <p>
    <input type="button"
      onclick="sendRequestViaMultiFriendSelector(); return false;"
      value="Send Request to Many Users with MFS"
    />
    </p>
    <script>
      FB.init({
        appId  : '123456789',
        status : true,
        cookie : true,
        oauth: true
      });

      function sendRequestViaMultiFriendSelector() {
        FB.ui({method: 'apprequests',
          message: 'Example message',
          show_error: true,
          redirect_uri: 'https://www.facebook.com/pages/PAGE_ID?sk=APP_ID'
        }, requestCallback);
      }

      function requestCallback(response) {
        // Handle callback here
      }
    </script>

  </body> 
```

我究竟做错了什么？画布页面的配置？重定向乌里？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:20:29.537

您没有做错任何事情，请求在被接受时总是“传递”到画布 URL。您需要在请求中包含一些数据，您的应用可以使用这些数据来决定重定向到哪个页面。

最简单的方法是使用`data`请求对话框的参数。

因此，在您的请求发送代码中：

```
function sendRequestViaMultiFriendSelector() {
        FB.ui({method: 'apprequests',
          message: 'Example message',
          show_error: true,
          data: "PAGE_ID_OR_SOME_OTHER_DATA_HERE",
          redirect_uri: 'https://www.facebook.com/pages/PAGE_ID?sk=APP_ID'
        }, requestCallback);
      } 
```

然后在应用程序的画布上处理接受的请求时，检查`data`请求对象的参数（将返回它的 GET 请求`/REQUEST_ID_HERE`）并根据该参数决定重定向到哪个页面

# php - 创建移动应用程序（iOS、Android、WP）

> ID：11152269
> 
> 赞同：0
> 
> 时间：2012-06-22T07:56:56.310
> 
> 标签：php, web-services, mobile

如果有任务为 iOS、Android 和 WP 创建移动应用程序。此应用程序需要访问运行 php 的网站已在使用的 mySQL 数据库。

同时我发现，我必须创建一个 php webservice 并使用这个 webservice 来访问 mySQL 数据库中的数据。

由于我没有找到任何明确的建议，哪种方式是最好的（JSON、XML、REST 等）——我只是想问你，有没有一种最佳实践，哪些技术应该用于 php web 服务？

另外，如果有人知道推荐技术的好教程，那对我来说会很棒。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:27:54.097

我来的有点晚，但这是我的答案：我相信目前更简单的方法是 PhoneGap 应用程序（使用 Sencha Touch 或 jQuery Mobile 作为 javascript 框架）通过简单的 PHP web 服务与服务器通信。PhoneGap 允许您使用相同的代码库构建 Android、iOS 和 WP 应用程序。

我们在我的公司中使用了这项技术，而且效果很好。

# c# - 输出类型为 Class Library 的项目无法直接启动

> ID：11152272
> 
> 赞同：30
> 
> 时间：2012-06-22T07:56:59.023
> 
> 标签：c#

我已经用 C# 下载了示例代码。但是当我运行时，我收到此错误消息：

> 无法直接启动具有输出类型的类库的项目为了调试此项目，请向此解决方案添加一个引用库项目的可执行项目。将可执行项目设置为启动项目。

请给我一个解决方案。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-22T07:59:14.887

当前选择的启动项目是一个类库。

您需要一个应用程序的入口点。您的解决方案是否包含多个项目？

您确定要“运行”类库吗？

![在此处输入图像描述](../Images/1f8a7c1da9bf06a24802f5edc84675ab.png)

您可能只下载了一个类库解决方案。在这种情况下，可能会有单元测试，您可以“调试”以逐步执行代码。

**更新** 响应您的评论，这些是运行类库的可能性：

*   创建一个控制台应用程序并引用类库。然后“使用”它的内容
*   调试单元测试项目
*   启动现有的客户项目

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-22T07:58:55.467

如果您有一个带有可执行文件的项目，请右键单击它并选择“设置为启动项目” - 如果没有，您必须编写一个来调试您的代码（或使用单元测试）。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-09-15T07:43:54.247

Visual Studio 开发环境的调试设置可能留空。请检查是否缺少以下突出显示的字段，如果缺少，请使用您的特定可执行文件填写。

![调试设置](../Images/f5e183717dd3cfc27404ddc814d6445d.png)

这些字段是让 VS 启动程序进行调试所必需的。在上图中，我正在开发一个 VSPackage，因此：

1.  外部程序是 devenv.exe
2.  命令行参数是 /rootsuffix Exp（用于启动实验实例）。

**注意**：我可以向您保证，这里提到的答案并没有帮助我解决问题，因为我的项目已经设置为启动项目，现在我遇到了一个[MSDN 博客](http://social.msdn.microsoft.com/Forums/en-US/86410d20-ff88-41eb-9b65-e39811ad4545/a-project-with-an-output-type-class-library-cannot-be-started-directly?forum=vsdebug)，它帮助了我并导致了这个答案。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-22T07:59:10.730

您需要检查您的启动项目设置是否正确。

如果解决方案中有多个项目，请在编译时右键单击应运行的项目，然后选择设置为启动项目

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-06T15:09:42.913

尝试关闭 Visual Studio 并通过打开您尝试从 Unity 调试的文件重新启动它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-20T23:02:29.247

我试图在 specFlow feature.cs 文件而不是 Step.cs 文件中运行带有断点的 Debug 测试。将断点放在 Step.cs 文件中，它按预期工作。谢谢！

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-04-25T15:25:14.710

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Debug|AnyCPU'">
    <StartAction>Program</StartAction>
    <StartProgram>C:\Program Files (x86)\Microsoft Office\Office14\excel.exe</StartProgram>
    <StartArguments></StartArguments>
    <StartWorkingDirectory></StartWorkingDirectory>
    <EnableUnmanagedDebugging>true</EnableUnmanagedDebugging>
  </PropertyGroup>
</Project> 
```

# css - 在绝对元素之后定位相对元素

> ID：11152274
> 
> 赞同：5
> 
> 时间：2012-06-22T07:57:31.750
> 
> 标签：css

我有一个带有绝对定位元素的网站，例如网站的顶部导航：

```
#topNav
{
  position:     absolute;
  top:          100px;
  left:         50%;
  height:       40px;
  width:        1000px;
  margin-left:  -500px;
} 
```

现在我在以下网站上创建了一个粘性页脚： [http ://ryanfait.com/resources/footer-stick-to-bottom-of-page/](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)

现在，问题是页脚将“重叠” topNav，因为 topNav 是绝对定位的，这意味着它“在元素的正常浮动之外”。相对位置不会“注意到”之前有 topNav。

在我开始为每个绝对定位元素创建额外的“推动器 div”之前，我最好问问是否有比“推动器 div”更好的做法，或者我什至不应该在我的元素上使用绝对定位？

**编辑：** 这里的 JsFiddle：http: [//jsfiddle.net/dkxUX/15/](http://jsfiddle.net/dkxUX/15/)

当您缩小浏览器窗口时，您会发现#footer 与它之前的所有元素重叠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:26:37.327

您可以只对 body 或其他容器元素应用 140 像素的上边距/填充，这将使 topNav 的高度和偏移量得到考虑。

更好的是，在这种情况下不要将位置设置为绝对 - 在我看来，你所做的只是水平居中 1000 像素宽的 div。

```
/*top-margin of 100px + center the element*/
#topNav {width:1000px; height:40px; margin:100px auto 0;} 
```

更新：我现在看到你的 jsfiddle。~~按照第一段中的建议设置边距/填充时，您可以考虑所有绝对定位的元素~~当可以依赖正常的文档流时，您正在使用绝对定位的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-15T18:39:53.327

给出答案有点太晚了，但它可能会在未来对某人有所帮助，我不久前就提出了这个问题，所以这是我的镜头，使用 jquery，因为我无法想出一个 CSS 解决方案没有删除 DOCTYPE 标签（无论如何，这不是你应该做的事情）。

所以就在这里。

```
$("#CONTAINERDIV").prepend("<div id='relativefix' style='position:relative;margin-top:"+($("#YOUR_ABSOLUTE_DIV").offset().top+$("#YOUR_ABSOLUTE_DIV").outerHeight()+30)+"px'></div>");

$(window).resize(function(){
$("#relativefix").css("margin-top",($("#YOUR_ABSOLUTE_DIV").offset().top+$("#YOUR_ABSOLUTE_DIV").outerHeight()+30)+"px");
            }); 
```

所以是的，这就是它的全部内容，您只需在硬放置在绝对 div 下的容器的开头动态添加另一个 div，这将强制所有后续的相对 div 放置在它之后，这就像一个明确的修复一个没有想法的人。

# android - android中有文件资源管理器服务吗？

> ID：11152279
> 
> 赞同：0
> 
> 时间：2012-06-22T07:58:04.343
> 
> 标签：android, browser, android-service

我希望它在单击浏览按钮时将所选路径作为字符串返回...

```
String cachePath = mContext.getExternalFilesDir("mnt/sdcard").getAbsolutePath() + "/" + file; 
```

我希望它在这里使用它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:59:45.790

看看这个答案，它有你正在寻找的意图：[https ://stackoverflow.com/a/5538300/354247](https://stackoverflow.com/a/5538300/354247)

# php - PHP中带小数的负数到正数

> ID：11152280
> 
> 赞同：0
> 
> 时间：2012-06-22T07:58:08.447
> 
> 标签：php, decimal

我正在创建基于 xml 的导入。从 XML 我得到一些值，它们是负数，例如 -316.65。

在将此值保存到数据库之前，我必须将它们转换为正数。我尝试了以下方法：

```
$amount = $inkoopfactuur->td[7] * -1; 
```

这行得通，但是小数点消失了。

有没有办法在不丢失小数的情况下进行转换？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T08:00:28.700

有一个更好的方法来做到这一点：

```
$amount = abs($inkoopfactuur->td[7]); 
```

但是，整数舍入可能是其他原因的结果——问题中没有足够的信息来确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:47:22.093

您可能有不同的语言环境。

检查[localeconv](http://www.php.net/manual/en/function.localeconv.php)

# javascript - 输入区域中没有文本时未禁用 Jquery 提交按钮

> ID：11152295
> 
> 赞同：2
> 
> 时间：2012-06-22T07:59:20.180
> 
> 标签：javascript, jquery, html

我在一个有字符限制的表单中有一个文本区域，如果超出字符限制*或*没有输入字符，我想禁用提交按钮。当用户输入了一些字符但随后又继续删除所有字符时，文本区域为空，尽管检查已到位，但发送按钮仍保持启用状态。其他一切都按我的预期工作。它一定很简单，但我就是看不到它......

HTML：

```
<textarea name="t" id="message-input-field" autofocus="autofocus" placeholder=""></textarea>
<input type="submit" value="Send" id="send-message-button" class="button"/>
<span id="counter"></span> 
```

jQuery：

```
// Disable by default
$('#send-message-button').prop('disabled', true);

// Do stuff when there is textarea activity
$('#message-input-field').on("propertychange input textInput", function () {
    var charLimit = 140;
    var remaining = charLimit - $(this).val().length;
    if(remaining == charLimit) {
        console.log("disabling");
        // No characters entered so disable the button
        $('#send-message-button').attr('disabled', true);
    } if (remaining < 0) {
        // remaining = 0; // Prevents the counter going into negative numbers
        $('#counter').addClass("over-char-limit").text(remaining);
        $('#send-message-button').attr('disabled', true);
    } else {
        $('#send-message-button').removeAttr('disabled');
        $('#counter').removeClass("over-char-limit").text(remaining);
    }
}); 
```

CSS

```
.over-char-limit {
    color: red;
} 
```

* * *

## 更新：

我已经确定了以下代码，它现在对我来说很好。这可能不是最有效/最优雅的方式，但在我看来，它非常清晰易读。感谢 @Tats_innit 和 @gdoron 帮助解决问题。

```
// Disable the send button by default. Enable only when text entered.
$('#send-message-button').prop('disabled', true);

// Character counter logic on the 'send message' text area. Rules are:
// 1\. Counter appears on any input of text (pasting or key strokes).
// 2\. Counter can go into negative numbers but changes to red when it does.
// 3\. 'Send' button disabled when limit exceeded or no characters entered. 
$('#message-input-field').on("propertychange input textInput", function() {

    var charLimit = 140;

    // Calculate how many characters remain (this could be a negative number)
    var remaining = charLimit - $(this).val().length;

    // Add the counter value to #counter
    $('#counter').text(remaining);

    if (remaining == charLimit) {
       // Disable the button as no characters entered
        $('#send-message-button').prop('disabled', true);
        $('#counter').removeClass("over-char-limit");
    } else if (remaining < 0) {
        // Disable the button as too many characters entered
        // remaining = 0; // Prevents the counter going into negative numbers
        $('#send-message-button').prop('disabled', true);
        $('#counter').addClass("over-char-limit");
    } else {
        // Happy case: characters have been entered but do not exceed limit
        $('#send-message-button').prop('disabled', false);
        $('#counter').removeClass("over-char-limit");
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:17:18.840

**工作演示** [http://jsfiddle.net/M3WgK/1/](http://jsfiddle.net/M3WgK/1/) **或** [http://jsfiddle.net/M3WgK/12/](http://jsfiddle.net/M3WgK/12/)（用 10 个字母表示完整的工作）:)

**带有计数器的进一步演示** [http://jsfiddle.net/M3WgK/15/](http://jsfiddle.net/M3WgK/15/)

使用 API：[http ://api.jquery.com/prop/](http://api.jquery.com/prop/)

另请注意，您有 2`if`个块，您可能只需要 2 个，因为您的逻辑是默认的，`===`或者`<`默认的。

希望这会有所帮助，@Gdorons 的解释是有效的，可以`.prop`在这里阅读：[.prop() vs .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)

**代码**

```
// Disable by default
$('#send-message-button').prop('disabled', true);

// Do stuff when there is textarea activity
$('#message-input-field').on("propertychange input textInput", function() {
    var charLimit = 140;
    var remaining = charLimit - $(this).val().length;

    if (remaining === charLimit) {
       // No characters entered so disable the button
        $('#send-message-button').prop('disabled', true);

    } else if (remaining < 0) {
        // remaining = 0; // Prevents the counter going into negative numbers
        $('#counter').addClass("over-char-limit").text(remaining);
        $('#send-message-button').prop('disabled', true);
    } else {
        $('#send-message-button').removeAttr('disabled');
        $('#counter').removeClass("over-char-limit").text(remaining);
    }
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T08:02:59.023

改变：

```
$('#send-message-button').removeAttr('disabled'); 
```

到：

```
$('#send-message-button').prop('disabled', false); 
```

你没有设置属性，你改变了`property`：

```
$('#send-message-button').prop('disabled', true); 
```

* * *

并改变：

```
$('#send-message-button').attr('disabled', true); 
```

到：

```
$('#send-message-button').prop('disabled', true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:20:01.930

为什么不是更简单的代码？

```
$("#message-input-field").keyup(function() {
    var c = $(this).val().length;
    var ok = (c>0 && c<140);
    var button = $("#send-message-button");
    ok ? button.removeAttr('disabled') : button.attr("disabled",true);
    $("#counter").toggleClass("over-char-limit", !ok); // toggles class, easy way
} );​​​​​​​​​​​​​​​​​​ 
```

旁注：您应该从已禁用的按钮开始（因为我们没有输入）。而且，您应该包含类更改和计数器的代码，但它应该是简单的。如果需要，请寻求帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T08:24:55.280

**您的代码没有任何问题，只是您在这里错过了这个::**

if(remaining == charLimit) {.......} ***else*** if (remaining < 0) {

就这样。

如果您不想使用 if，则可能需要向下移动

`if(remaining == charLimit) {}`

到 if else 语句的下部。

# php - 无法从数组中获取值

> ID：11152296
> 
> 赞同：0
> 
> 时间：2012-06-22T07:59:22.707
> 
> 标签：php, arrays

我似乎在检查数组中是否存在字符串时遇到问题。我的问题可能有一个非常明显的答案，请原谅我，但我是 PHP 新手。

无论如何，这是我的代码：

```
while($row = mysql_fetch_assoc($result))
{
    $result_array[] = $row;
}

if (in_array("496891", $result_array)) 
{
echo "true";
}
else
{
echo "false";
} 
```

数组如下所示：

```
Array ( [0] => Array ( [ID] => 496891 ) [1] => Array ( [ID] => 1177953 )) 
```

我的代码总是回显错误。有人知道我在做什么错吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:01:55.073

您有一个嵌套数组，并且必须像这样检查每个项目：

```
function in_multidimensional_array($val, $array) {
  foreach($array as $key => $value) {
     if (in_array($val, $array[$key])) {
        return true;
     }  
  }
  return false;
} 
```

现在您可以使用以下命令检查该值是否`496891`存在：

```
if(in_multidimensional_array('496891', $result_array)) {
   print 'true';
} else {
   print 'false';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T08:04:27.713

只有在 MySQL 循环中只有一行时，Krister 的解决方案才有效。这将检查所有结果。

```
while($row = mysql_fetch_assoc($result))
{
    $result_array[] = $row;
}

$found = false;
foreach ($result_array as $v) {
    if (in_array("496891", $v)) {
        $found = true;
    }
}

if ($found == true)
    echo 'true';
else
    echo 'false'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:02:08.540

您正在搜索一个字符串，但您的数组包含数值。您需要确保将其专门作为字符串插入以使其返回 true，或者在搜索之前将每个字段作为字符串插入。

# android - 如何通过编码（忽略输入）将 EditText 行限制为 1？

> ID：11152304
> 
> 赞同：0
> 
> 时间：2012-06-22T07:59:52.567
> 
> 标签：android, android-edittext

我试图忽略输入键，但我不想使用 onKeyDown() 函数。

在 xml 中有一种方法可以做到这一点： 1\. android:maxLines = "1" 2\. android:lines = "1" 3\. android:singleLine = "true"

我实际上想通过编码来完成最后一个。有谁知道这是怎么做到的吗？

```
for (int i=0; i<numClass; i++) {

        temp_ll = new LinearLayout(this);
        temp_ll.setOrientation(LinearLayout.HORIZONTAL);
        temp1 = new EditText(this);
        InputFilter[] FilterArray = new InputFilter[1];
        FilterArray[0] = new InputFilter.LengthFilter(12);
        temp1.setFilters(FilterArray);  // set edit text length to max 12
        temp1.setHint("  class name  ");
        temp1.setSingleLine(true);

        temp_ll.addView(temp1);
        frame.addView(temp_ll);
    }

    ll.addView(frame); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:17:46.347

这是我尝试过的：

```
public class Next extends Activity{
    LinearLayout lay;
    LinearLayout temp_ll;
    EditText temp1;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.next);
    lay=(LinearLayout)findViewById(R.id.lay);

         temp_ll = new LinearLayout(this);
        temp_ll.setOrientation(LinearLayout.HORIZONTAL);
        temp1 = new EditText(this);
        InputFilter[] FilterArray = new InputFilter[1];
        FilterArray[0] = new InputFilter.LengthFilter(12);
        temp1.setFilters(FilterArray);  // set edit text length to max 12
        temp1.setHint("  class name  ");
        temp1.setSingleLine(true);

        temp_ll.addView(temp1);

    lay.addView(temp_ll);

}
} 
```

xml是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/lay"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:18:14.120

尝试使用`setSingleLine`：

```
EditText editText=(EditText)findViewById(R.id.editv);

editText.setSingleLine(true); 
```

# android - Android OpenGL 从父布局中获取背景

> ID：11152308
> 
> 赞同：0
> 
> 时间：2012-06-22T08:00:22.260
> 
> 标签：android, layout, opengl-es, frame

我制作了一个应用程序，其中有一个实现 OpenGLSurfaceView 的 FrameLayout。我需要做的是让 SurfaceView 从其父布局（填满整个屏幕）中获取背景。我可以以某种方式使 SurfaceView 背景透明，这样我就可以从父布局中获得图片了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:07:55.547

以某种方式管理它，在 onDrawFrame(GL10 gl) 函数上我做了这个 gl.glColor4f(0.63671875f, 0.76953125f, 0.22265625f, 1.0f); 现在它可以工作了。首先，最后一个变量是 0.0f 并将其更改为 1.0f 使其工作：D 10x 很多

# .net - 我应该使用 WPF 转换器还是触发器？

> ID：11152313
> 
> 赞同：16
> 
> 时间：2012-06-22T08:01:03.323
> 
> 标签：.net, wpf, xaml, triggers, converter

我想知道您如何决定何时使用`converters`和何时使用`triggers`. 我更喜欢在 GUI 上使用触发器进行操作（例如显示/隐藏控件、更改它们的外观等）。

前段时间我`BooleanToVisibilityConverter`为此目的使用了 a，但现在，我只是不需要它，我做所有与`visibility`使用触发器相关的事情，我什至开始思考“ *MS 团队**创建 a 的目的是什么？” `BooleanToVisibilityConverter`.* 通常，如果可能，我会尝试使用声明性方式来编写代码 - 在本例中 - XAML。

你对此有何看法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-22T12:30:01.803

我同意你的看法，我也尝试在 XAML 中使用声明性代码，并且更喜欢`Triggers`而不是`Converters`.

在大多数情况下，触发器可以执行与任何转换器相同的工作，但`Converters`可以具有 pcajer 提到的自定义/业务逻辑。

一个限制`Triggers`是*您的 Setter`DataTriggers`只能更改您的 UI 元素的属性*；所以，**你不能用 triggers 更新你的 ViewModels 属性**，这就是`Converters`胜利，记住`ConvertBack`方法。

因此，**您可以使用控件将您的 VM 属性与控件绑定`Visibility`，`BooleanToVisibilityConverter`即使您的控件`visibility`被其他方式更改，您的 VM 属性也会得到更新**；通常不需要这就是为什么`BooleanToVisibilityConverter`被触发器取代的原因。

简而言之——

> *`Triggers`只能执行`OneWay`操作而`Converters`可以执行`TwoWay`操作*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T14:41:13.787

在我看来，你是从下往上看，你只需要自上而下看。

**触发器**- 当满足指定条件时，它“触发”执行

**转换器**- 在两种不兼容的类型之间转换。

当我们可以用整数做同样的功能时，为什么我们需要一个布尔数据类型？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T08:17:21.077

您可以通过触发器或转换器来实现该功能，但在我做出决定时可以考虑以下可能性

1.  如果您使用 TDD 方法进行开发，那么请使用转换器，因为您可以编写测试用例。
2.  如果有任何业务逻辑更好地对转换器中的代码和某些无法通过触发器实现的代码进行纠正。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T12:37:56.190

除了上面所说的，我只能补充：

*   触发器有时需要复制一些东西，例如，当您有多个触发器属性时，您需要指定每个属性的每个组合
*   有时您需要代码才能将类型 A 正确转换为 B，然后您必须使用转换器。如果值/属性已经以某种方式从 VM 公开，则触发器很好，您可以将其用于触发器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T14:28:40.997

您应该始终在 DomainModel 对象中进行与业务相关的操作，或者至少在 ViewModel 对象中进行。在转换器中进行一些业务并不是一个好的选择，因为转换器旨在将值从一种类型转换为另一种类型。

# sencha-touch - 在 Sencha Touch 2 中单击选项卡时更改视图？

> ID：11152314
> 
> 赞同：0
> 
> 时间：2012-06-22T08:01:05.997
> 
> 标签：sencha-touch, extjs, sencha-touch-2

是否可以有一个带有 tabBar 的视图，并连接选项卡以在点击时显示不同的视图？

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:52:13.847

事实证明这比我想象的要容易！

```
items: [
    {
         xtype: 'xtype of the view you want to link to'
    }] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:56:22.547

是的，SDK 中甚至内置了一个：[http ://docs.sencha.com/touch/2-0/#!/api/Ext.tab.Panel](http://docs.sencha.com/touch/2-0/#!/api/Ext.tab.Panel)

您希望在它们之间切换的视图只是选项卡面板视图的子视图：

```
Ext.create('Ext.TabPanel', {
    fullscreen: true,
    tabBarPosition: 'bottom',

    defaults: {
        styleHtmlContent: true
    },

    items: [
        {
            title: 'Home',
            iconCls: 'home',
            html: 'Home Screen'
        },
        {
            title: 'Contact',
            iconCls: 'user',
            html: 'Contact Screen'
        }
    ]
}); 
```

# jquery - 我可以将一个已经存在的 div 附加到另一个已经存在的 div 吗？

> ID：11152315
> 
> 赞同：15
> 
> 时间：2012-06-22T08:01:13.160
> 
> 标签：jquery, append

我在自己的 div 中有一个不透明度为 0 的联系表单，还有一个 div，其中的内容根据用户在菜单上单击的内容进行动态操作。在用户进入菜单的最后一个阶段后，我需要清除显示所有内容的 div 的内容，然后将表单 div “移动”到其中，这样的事情会起作用吗？

```
$('#menu_form').on('click', function() {
    $('#form_div').append('#display_div');
}); 
```

因此，回顾 2 个已经存在的 div，需要在单击时将其中一个放入另一个中。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-22T08:04:13.407

使用`.appendTo()`

```
$('#menu_form').on('click', function(){
   $('#form_div').appendTo('#display_div');  // appendTo -> selector
}); 
```

使用`.append()`

```
$('#menu_form').on('click', function(){
   $('#display_div').append( $('#form_div') ); // append -> object
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T08:08:51.250

检查[这个 jsFiddle](http://jsfiddle.net/richardneililagan/EWGY5/)以获得快速的 POC。显然是的。

诀窍是传递对象引用，而不仅仅是对象 id，如下所示：

```
$('#menu_form').on('click', function(){
    $('#form_div').append($('#display_div'));
}); 
```

您还可以使用以下方法传递当前对象`this`：

```
$('#menu_form').on('click', function(){
    $('#form_div').append(this);
}); 
```

# jquery - 淡出背景颜色 jquery a:hover

> ID：11152320
> 
> 赞同：0
> 
> 时间：2012-06-22T08:01:45.367
> 
> 标签：jquery, hyperlink, fade

这个功能很好用。但是我如何在我的导航中得到这个。回答：悬停我不想在鼠标悬停链接时用淡入淡出改变背景？我已经用 css 尝试过这个，但它在 Internet Explorer 中不起作用！

```
-----------------------
.boxes {
 background:#fff;
 border:1px solid #ccc;
 float:left;
 padding:10px;
 position:relative;
 width:510px;
}

-----------------------
<script type="text/javascript">
$(document).ready(function(){
    $(".boxes").hover(function() {
            $(this).stop().animate({ backgroundColor: "#a7bf51"}, 800);
            },function() {
            $(this).stop().animate({ backgroundColor: "#ffffff" }, 800);
            });
 });

</script>
----------------------------
   <div class="boxes">
    <div class="info">
    <h3>test</a> </h3>
    </div> </div>
     ------------------------- 
```

* * *

导航

```
<div id="mitte">
<ul class="nav">
<li><a href="#">About Us</a></li>
  <li><a href="#">Our Products</a></li>
  <li><a href="#">FAQs</a></li>
  <li><a href="#">Contact</a></li>
  <li><a href="#">Login</a></li>
 </ul>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:05:18.993

使用父 > 子选择器：

```
 $(".nav > a").hover(function() { 
            $('.nav').stop().animate({ backgroundColor: "#a7bf51"}, 800); 
            },function() { 
            $('.nav').stop().animate({ backgroundColor: "#ffffff" }, 800); 
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:09:21.517

为了您的导航：

```
$("#mitte ul li a").hover(function() ...); 
```

如果您必须在框中使用此 ALSO，只需定义：

```
$("#mitte ul li a").add(".boxes").hover(function() ...); 
```

# html - 在已标记的输入元素上使用“aria-labelledby”的目的？

> ID：11152323
> 
> 赞同：87
> 
> 时间：2012-06-22T08:01:59.133
> 
> 标签：html, label, accessibility, wai-aria

许多 ARIA 演示网站使用以下代码：

```
<label for="name" id="label-name">Your Name</label>
<input id="name" aria-labelledby="label-name" type="text"> 
```

但是`aria-labelledby`在这种情况下使用属性的目的是什么？该`input`元素已经被`label`使用`for`属性的元素标记了，不是吗？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-06-22T20:13:55.197

[在Mozilla 开发者页面](https://developer.mozilla.org/en/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-labelledby_attribute)上有一些很好的使用示例。也许他们最好的示例是用于将弹出菜单与父菜单项相关联 - 这是页面中的示例 7：

```
<div role="menubar">  
    <div role="menuitem" aria-haspopup="true" id="fileMenu">File</div>  
    <div role="menu" aria-labelledby="fileMenu">  
        <div role="menuitem">Open</div>  
        <div role="menuitem">Save</div>  
       <div role="menuitem">Save as ...</div>  
       ...  
    </div>  
    ... 
```

ARIA 属性往往在构建可访问的*富 Internet 应用程序*中最有用：只要您坚持使用标准语义 HTML - 使用带有标准标签的表单 - 您根本不需要它：所以没有理由使用它一个标签/输入对。但是，如果您是从头开始构建“丰富的 UI”（DIV 和其他带有 javascript 添加交互性的低级元素），那么让屏幕阅读器知道更高级别的意图是必不可少的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-13T15:40:36.983

任何新事物总是存在 UA 支持问题，这就是开发人员寻求渐进增强的原因。这种 ARIA 技术提供了取消“for”属性并允许其他元素成为丰富表单的一部分的能力。这些技术将成为普遍做法。

# jquery - 如何使html表格垂直滚动

> ID：11152327
> 
> 赞同：62
> 
> 时间：2012-06-22T08:02:08.600
> 
> 标签：jquery, html, css

[见 jsbin](http://jsbin.com/oguxek/edit#javascript,html,live)

我必须让我的 html 表格垂直滚动。
我在标签上使用了下面的代码，`tbody`但它对我不起作用

```
 <tbody style="height: 100px; overflow: auto"> 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-06-22T08:07:22.113

你为什么不把你的桌子放在一个div里？

```
<div style="height:100px;overflow:auto;">

 ... Your code goes here ...

</div> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-22T08:15:16.700

只需将 display:block 添加到 thead > tr 和 tbody。检查下面的例子

[http://www.imaputz.com/cssStuff/bigFourVersion.html](http://www.imaputz.com/cssStuff/bigFourVersion.html)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-06-22T08:15:40.977

试试这个..它正在工作......这里是[JSBIN](http://jsbin.com/iveroj/13/edit)

```
table tbody { height:300px; overflow-y:scroll; display:block; }
table thead { display:block; } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-22T08:07:34.410

做到这一点的最好方法是将您的表格严格分成两个不同的表格 - 标题和正文：

```
<div class="header">
  <table><tr><!-- th here --></tr></table>
</div>

<div class="body">
  <table><tr><!-- td here --></tr></table>
</div>

.body {
  height: 100px;
  overflow: auto
} 
```

如果您的表格宽度很大（大于屏幕宽度），那么您必须为水平滚动标题和正文同步添加滚动事件。

你不应该接触带有 CSS 属性**display**和**overflow**的表格标签（table、tbody、thead、tfoot、tr） 。处理 DIV 包装器更可取。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-22T08:06:42.730

jQuery 插件可能是最好的选择。[http://farinspace.com/jquery-scrollable-table-plugin/](http://farinspace.com/jquery-scrollable-table-plugin/)

要修复标题，您可以查看此帖子

[**修复 GridView 或 HtmlTable 的标题**](http://pranayamr.blogspot.ca/2010/03/fixing-header-of-gridview-or-htmltable.html)（可能存在仅适用于 IE 的问题）

用于修复标题的 CSS

```
div#gridPanel 
{
   width:900px;
   overflow:scroll;
   position:relative;
}

div#gridPanel th
{  
   top: expression(document.getElementById("gridPanel").scrollTop-2);
   left:expression(parentNode.parentNode.parentNode.parentNode.scrollLeft);
   position: relative;
   z-index: 20;
  }

<div height="200px" id="gridPanel" runat="server" scrollbars="Auto" width="100px">
table..
</div> 
```

或者

非常好的帖子在这里

[**如何使用 JavaScript 和 HTML 冻结列。**](http://www.massless.org/_tests/grid1/?s=1&r=40&c=40)

或者

不，这是不可能的，但您可以使用 div 并将表格放入 div

```
<div style="height: 100px; overflow: auto">
  <table style="height: 500px;">
   ...
  </table>
</div> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-22T08:06:37.600

嗨试试这个溢出-y：滚动。我希望它可以帮助你

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-12-03T15:59:49.653

这是我的解决方案（在 Spring 中使用 Thymeleaf 和 jQuery）：

html:

```
<!DOCTYPE html>
<html
    xmlns:th="http://www.thymeleaf.org"
    xmlns:tiles="http://www.thymeleaf.org">
    <body>
        <div id="objects" th:fragment="ObjectList">
            <br/>
            <div id='cap'>
                <span>Objects</span>
            </div>
            <div id="hdr">
                <div>
                    <div class="Cell">Name</div>
                        <div class="Cell">Type</div>
                </div>
            </div>
            <div id="bdy">
                <div th:each="object : ${objectlist}">
                        <div class="Cell" th:text="${object.name}">name</div>
                        <div class="Cell" th:text="${object.type}">type</div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

CSS：

```
@CHARSET "UTF-8";
#cap span {
    display: table-caption;
    border:2px solid;
    font-size: 200%;
    padding: 3px;
}
#hdr {
    display:block;
    padding:0px;
    margin-left:0;
    border:2px solid;
}
#bdy {
    display:block;
    padding:0px;
    margin-left:0;
    border:2px solid;
}
#objects #bdy {
    height:300px;
    overflow-y: auto;
}
#hdr div div{
    margin-left:-3px;
    margin-right:-3px;
    text-align: right;
}
#hdr div:first-child {
    text-align: left;
}
#bdy div div {
    margin-left:-3px;
    margin-right:-3px;
    text-align: right;
}
#bdy div div:first-child {
    text-align: left;
}
.Cell
{
    display: table-cell;
    border: solid;
    border-width: thin;
    padding-left: 5px;
    padding-right: 5px;
} 
```

javascript:

```
$(document).ready(function(){
    var divs = ['#objects'];
    divs.forEach(function(div)
    {
        if ($(div).length > 0)
        {
            var widths = [];
            var totalWidth = 0;
            $(div+' #hdr div div').each(function() {
                widths.push($(this).width())
            });
            $(div+' #bdy div div').each(function() {
                var col = $(this).index();
                if ( $(this).width() > widths[col] )
                {
                    widths[col] = $(this).width();
                }
            });
            $(div+' #hdr div div').each(function() {
                var newWidth = widths[$(this).index()]+5;
                $(this).css("width", newWidth);
                totalWidth += $(this).outerWidth();
            });
            $(div+' #bdy div div').each(function() {
                $(this).css("width", widths[$(this).index()]+5);
            });
            $(div+' #hdr').css("width", totalWidth);
            $(div+' #bdy').css("width", totalWidth+($(div+' #bdy').css('overflow-y')=='auto'?15:0));
        }
    })
}); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-22T08:10:10.490

这是一个解决方法。

[http://jsfiddle.net/JJV59/2/](http://jsfiddle.net/JJV59/2/)

**[编辑]**

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
<!--[if IE]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

</head>
<body>

<table cellspacing="1" width="100%" bgcolor="#cccccc">
    <thead>
        <tr>
            <td bgcolor="#ffffff" width="70px">
            </td>
            <td class="csstablelisttd" width="70px">
                <b>Time Slot&nbsp;</b>
            </td>
            <td class="csstablelisttd">
                <b>&nbsp;Patient Name</b>
            </td>
        </tr>
    </thead>
</table>
<!-- THIS GIVES THE SCROLLER -->
<div style="height: 500px; overflow-y: auto">
    <table id="tableAppointment" cellspacing="1" width="100%" bgcolor="#cccccc">
         <tbody>
            <tr>
                <td class="csstablelisttd" valign="top" width="70px">
                    8:00AM
                </td>
                <td class="csstablelisttd" width="70px">
                    0
                </td>
                <td class="csstablelisttd">
                    <span>Name 1</span>
                </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        15
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        30
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        45
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd" valign="top" width="90px">
                        9:00AM
                    </td>
                    <td class="csstablelisttd">
                        0
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        15
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        30
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        45
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd" valign="top" width="90px">
                        10:00AM
                    </td>
                    <td class="csstablelisttd">
                        0
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        15
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        30
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        45
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd" valign="top" width="90px">
                        11:00AM
                    </td>
                    <td class="csstablelisttd">
                        0
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        15
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        30
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        45
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd" valign="top" width="90px">
                        12:00PM
                    </td>
                    <td class="csstablelisttd">
                        0
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        15
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        30
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        45
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd" valign="top" width="90px">
                        01:00PM
                    </td>
                    <td class="csstablelisttd">
                        0
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        15
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        30
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        45
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd" valign="top" width="90px">
                        02:00PM
                    </td>
                    <td class="csstablelisttd">
                        0
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        15
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        30
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        45
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd" valign="top" width="90px">
                        03:00PM
                    </td>
                    <td class="csstablelisttd">
                        0
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        15
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        30
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        45
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd" valign="top" width="90px">
                        04:00PM
                    </td>
                    <td class="csstablelisttd">
                        0
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        15
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        30
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        45
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd" valign="top" width="90px">
                        05:00PM
                    </td>
                    <td class="csstablelisttd">
                        0
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        15
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        30
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        45
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd" valign="top" width="90px">
                        06:00PM
                    </td>
                    <td class="csstablelisttd">
                        0
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        15
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        30
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        45
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd" valign="top" width="90px">
                        07:00PM
                    </td>
                    <td class="csstablelisttd">
                        0
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        15
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        30
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd">
                    </td>
                    <td class="csstablelisttd">
                        45
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
                <tr>
                    <td class="csstablelisttd" valign="top" width="90px">
                        08:00PM
                    </td>
                    <td class="csstablelisttd">
                        0
                    </td>
                    <td class="csstablelisttd">
                        <span></span>
                    </td>
                </tr>
            </tbody>
        </table>    
    </div>

</body>
</html> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-11-30T12:48:50.390

我和这个打了一段时间。我的目标是创建一个带有标题的表格，其中每个标题列的宽度与相应的正文列相同，并且是适合数据所需的最小大小。正文数据也可以在标题下方滚动。

我通过使用 div 而不是表格解决了这个问题。每个“表”都是一个 div，标题是 div 的 div，主体是 div 的 div。我使用了上面@sushil 指示的样式。我添加了一些 javascript/jQuery 来平衡列。也许20-30行。

不幸的是，我丢失了代码，不得不重新构建它。我知道这有点老了，但也许它会帮助别人。

# javascript - 关于服务器配置的主干和推送状态

> ID：11152331
> 
> 赞同：1
> 
> 时间：2012-06-22T08:02:16.253
> 
> 标签：javascript, backbone.js, pushstate

我想就这个问题扩展我的[问题](https://stackoverflow.com/questions/7310230/backbone-routes-without-hashes)。我能够让 pushstate 在我的 Backbone 应用程序中正常工作。因此，当访问我的应用程序和导航链接时，我被重定向到 localhost:8000/page 而不是 localhost:8000/#page。现在我的问题在重新加载 localhost:8000/page 时变得很明显。显然我的服务器会抛出一个错误，因为它找不到指定的页面。与 localhost:8000/#page 相反，它将调用正确的路由。现在假设我的应用程序位于以下 localhost:8000/index.html。然后我是否必须请求将所有路由重定向到 localhost:8000/index.html。什么被认为是正确的方法？我找到了这个[要点](https://gist.github.com/1359650)基于 Backbone 和 pushstate 的 node.js 服务器配置。快速查看似乎所有请求都只是被重定向到应用程序文件（index.html）。这个对吗？IIS好运吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T23:27:52.357

基本上你需要在你的 Apache 或 Nginx 中重写一些规则。

阿帕奇虚拟主机：

```
<IfModule mod_rewrite.c>
   RewriteEngine On
   RewriteBase /
   RewriteRule ^index\.html$ - [L]
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteRule . /index.html [L]
</IfModule> 
```

Nginx：

```
 rewrite ^(.+)$ /index.html last; 
```

对于实际的 API 调用，我在子域上为它们提供服务，例如 api.site.com。为此，您可能需要启用 CORS。

我在此博客条目中更深入地讨论了它： [http ://readystate4.com/2012/05/17/nginx-and-apache-rewrite-to-support-html5-pushstate/](http://readystate4.com/2012/05/17/nginx-and-apache-rewrite-to-support-html5-pushstate/)

# python - python字符串连接混淆

> ID：11152333
> 
> 赞同：9
> 
> 时间：2012-06-22T08:02:27.003
> 
> 标签：python

我最近遇到了以下一段代码。由于三引号的单个实例，它看起来无效，但似乎工作正常。谁能解释这里发生了什么？

```
return ("Validation failed(%s): cannot calculate length "
        "of %s.""" % (self.name, value))` 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T08:05:19.100

首先连接所有字符串。

`""`是一个空字符串。

然后进行替换。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T08:11:35.507

这是 Python 的[字符串文字连接](http://docs.python.org/reference/lexical_analysis.html#string-literal-concatenation)——本质上，直接出现在彼此旁边的字符串文字被解析为单个字符串：

```
>>> 'foo' 'bar'
'foobar' 
```

在您的示例中，您连续有三个字符串文字（最后一个是`""`空字符串）以这种方式连接，而不是单个多行文字以三引号终止但不以三引号开头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T08:07:27.190

当您在多行上使用字符串时，您可以添加`"`以使单行输出作为字符串首先连接。您可以将这一行解读为：

```
return ("Validation failed(%s): cannot calculate length " //1st line
    "of %s." //2nd line
    "" % (self.name, value)) //3rd line (empty) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T08:11:01.100

如果您可以修改代码，请注意`%`格式化字符串的语法已经过时。`str.format()`如果您的 Python 版本支持，您应该使用：

```
return "Validation failed({0}): cannot calculate length of {1}.".format(self.name, value) 
```

如果它需要跨越多行，请使用：

```
return ("Validation failed({0}): " +
        "cannot calculate length of {1}.".format(self.name, value)) 
```

# java - java使用100%cpu

> ID：11152334
> 
> 赞同：6
> 
> 时间：2012-06-22T08:02:29.803
> 
> 标签：java, openjdk

我有一个在 CentOS 6.0 上运行的 java 应用程序。它总是通过 cron 在后台运行。有时这个应用程序在使用 100% cpu 时进入等待状态。

我的Java版本是：

```
java version "1.6.0_17"
OpenJDK Runtime Environment (IcedTea6 1.7.4) (rhel-1.21.b17.el6-x86_64)
OpenJDK 64-Bit Server VM (build 14.0-b16, mixed mode) 
```

其他症状是：

一种。该进程的一个线程似乎在循环中等待某事。使用 strace 跟踪时，它会连续显示以下 o/p：

> ```
> futex(0x7fb8000ac728, FUTEX_WAKE_PRIVATE, 1) = 0
> futex(0x7fb8000ac754, FUTEX_WAIT_BITSET_PRIVATE|FUTEX_CLOCK_REALTIME, 1, {1340347489,> 822867000}, ffffffff) = -1 ETIMEDOUT (Connection timed out) 
> ```

湾。查看正在使用的文件，该过程似乎已完成工作。只剩下几个文件。'ls /proc/pid/fd/ 的输出显示：

> ```
> lr-x------ 1 root root 64 Jun 22 13:13 0 -> pipe:[77107601]
> l-wx------ 1 root root 64 Jun 22 13:13 1 -> pipe:[77120162]
> l-wx------ 1 root root 64 Jun 22 13:13 2 -> /var/log/mithi/mcs/agent_account_mailstore_exceed_limit.sh.log
> lr-x------ 1 root root 64 Jun 22 13:13 3 -> /usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/lib/rt.jar 
> ```

有没有人遇到过类似的情况？任何线索或参考资料都会非常有帮助。

更具体地说，在 CentOS 6 的后台运行基于 openjdk 的 Java 进程是否存在任何已知问题？

现在我可以用一个非常简单的无限循环来模拟这个问题，如下所示

```
#!/bin/bash

while [ 1 ]
do
    /usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/bin/java -version &
    sleep 1s
done 
```

当此脚本运行大约 3 - 4 小时时，我发现一两个 java 进程挂起或处于无限循环中，具有相同的症状，即

```
futex(0x7fb8000ac754, FUTEX_WAIT_BITSET_PRIVATE|FUTEX_CLOCK_REALTIME, 1, {1340347489,> 822867000}, ffffffff) = -1 ETIMEDOUT (Connection timed out) 
```

这仅发生在多处理器系统上，而不是单处理器系统上。它也可以在 RHEL6 上模拟，而不仅仅是 CentOS6。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T08:11:51.930

有很多可能的原因。那些，我能想到的：

1.  您的进程的内存使用量非常接近最大堆大小，从而导致臭名昭著的 Full GC。使用选项启用 GC 日志，`-Xloggc:/path/to/logFile.log -XX:+PrintGCDetails`然后使用[GCViewer](http://www.tagtraum.com/gcviewer.html)或[HPJmeter](https://h20392.www2.hp.com/portal/swdepot/displayProductInfo.do?productNumber=HPJMETER)等工具对其进行分析。

2.  您的进程实际上正在做某事（如无限循环），您可以通过执行一些线程转储并分析它们来检查它。您可以使用[VisualVM](http://visualvm.java.net)和[Thread Dump Analyzer](http://java.net/projects/tda)来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T11:11:20.933

将内核升级到 kernel-2.6.32-220（即 CentOS 6.2 内核）后问题得到解决。

# git - git清理旧分支

> ID：11152339
> 
> 赞同：5
> 
> 时间：2012-06-22T08:03:12.557
> 
> 标签：git, git-bash

我想创建一个 git 命令，该命令将删除当前分支中包含所有提交的所有分支，例如

```
$ git branch
  groups
* master

$ git cleanup-branches
deleted groups # all commits are included in master

$ git branch
* master 
```

我将如何去创造这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T12:33:31.003

您可以`git branch -d`在这里利用，因为它不会删除任何尚未合并到您当前分支的分支：

```
git config --global alias.cleanup-branches \
'!git branch | grep -v "\*" | awk "{ print $1 }" | xargs git branch -d' 
```

刚刚在本地尝试过，它工作了，虽然看着它工作有点可怕。

# iphone - 带有 qr 码的名片链接到应用商店以下载 iPhone 应用

> ID：11152340
> 
> 赞同：1
> 
> 时间：2012-06-22T08:03:18.553
> 
> 标签：iphone, itunes, qr-code

我想打印一张带有二维码的名片，该二维码直接链接到 iPhone 上的应用商店以供下载

这很容易做到

问题是……当我们上传新版本的应用程序时……那个二维码还能用吗？因为我正在打印名片，所以我很担心。

让我知道xxx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:05:58.970

将您的二维码打印到静态链接，然后您可以控制它重定向到的位置。

二维码 -> [www.Your-Webpage.com/redirecttoapp.html] -> [您的网页重定向到应用商店]

然后，您可以在以后更改它以指向您想要的任何内容，而无需在需要时重新打印您的卡片。

编辑： [这](https://stackoverflow.com/questions/433907/how-to-link-to-apps-on-the-app-store)是 Apple AppStore 的 URL 架构。只是一个想法，但您也可以在重定向页面中构建一些浏览器检测。EG：如果 iphone 重定向到苹果 AppStore，如果 Android 重定向到 Market Place。如果您没有安卓应用程序，您可以重定向到您的企业网页。

# c# - 在 SubmitChanges() 之后选择不起作用

> ID：11152342
> 
> 赞同：1
> 
> 时间：2012-06-22T08:03:31.287
> 
> 标签：c#, .net, wpf, linq, linq-to-sql

我有一个 WPF4 应用程序，我有 1 个编辑数据的窗口：

```
main mn = db.mains.Single(p => p.ID == mID);
mn.Type = cbTypes.Text;
mn.Sum = Convert.ToDecimal(txtSum.Text);
mn.Datetime = datePicker1.SelectedDate.Value;
mn.Reason = txtReason.Text;
db.SubmitChanges();
this.DialogResult = true;
this.Close(); 
```

在这个关闭窗口之后，我有这个：

```
if (ed.DialogResult)
{
    var dat = (from d in db.mains select d).ToList();
    this.GetData();
} 
```

但 dat 没有填充更新的数据（尝试使用调试器）。我在编辑窗口中尝试了同样的事情并且它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:13:17.713

在再次拉下实体之前尝试[刷新实体：](http://msdn.microsoft.com/en-us/library/bb534217%28v=vs.95%29.aspx)

```
if (ed.DialogResult)
{
    db.Refresh(RefreshMode.OverwriteCurrentValues, db.mains);
    var dat = db.mains.ToList() // just use a lambda here, less code
    this.GetData();
} 
```

# html - 不能将 div 放在页面上的所有内容下方

> ID：11152343
> 
> 赞同：0
> 
> 时间：2012-06-22T08:03:31.833
> 
> 标签：html, css, position, footer

我的页脚不会到所有内容下方的底部。我不希望它固定在浏览器底部 [http://dl.dropbox.com/u/13722201/Dorset%20Designs/home.html](http://dl.dropbox.com/u/13722201/Dorset%20Designs/home.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:31:30.300

只需设置页脚：

```
position: absolute; 
```

这将显示在浏览器的底部。如果您想在#main 下方使用它，请提供页脚：

```
top: 1600px; 
```

# c# - 保存到数据库时字符串末尾的空格字符

> ID：11152345
> 
> 赞同：6
> 
> 时间：2012-06-22T08:03:35.010
> 
> 标签：c#, linq, sqldatatypes

我的表中有一个`nvarchar(50)`字段。`12 character Length`例如，当我使用 保存字符串时，它会使用`50 character length`. 实际上它在字符串的末尾添加了一个空格字符。我应该选择其他数据类型吗？

```
tmp_Person.NameFamily = txt_NameFamily.Text.Trim();
PersonKBBSHDataContext.PersonInfos.InsertOnSubmit(tmp_Person);
PersonKBBSHDataContext.SubmitChanges(); 
```

[当我在表的字段中直接（在SQL Server](http://en.wikipedia.org/wiki/Microsoft_SQL_Server)中）保存一个字符串时`NameFamily`，一切都很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-15T15:14:30.540

我有同样的问题。从 Mapping 类的 Nvarchar 属性中删除 .IsFixedLength() ，我的问题就解决了。

```
Me.Property(Function(t) t.Description).IsFixedLength().HasMaxLength(500) 
```

替换为

```
Me.Property(Function(t) t.Description).HasMaxLength(500) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:35:21.187

我发现了问题。我刚刚在`.dbml`文件中再次添加了我的表格，一切都很顺利。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T08:22:35.047

如果使用实体框架，请将`Fixed Length`属性设置为`true`NVarchar 字段。

您仍然可以使用`Trim`只是为了“修复”该`textBox.Text`值而与数据库无关。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-22T08:10:15.730

用这个`Trim(txt_NameFamily.Text)`

# json - 标记自定义和方向 API

> ID：11152357
> 
> 赞同：0
> 
> 时间：2012-06-22T08:04:34.490
> 
> 标签：json, web-services, google-maps, google-maps-api-3

我正在使用谷歌地图在我的应用程序中显示方向。我想自定义标记以显示比默认值更多的文本，默认值仅显示位置名称，即城市、州和其他邮政编码。我的想法是在标记气泡上添加自定义文本。这是我迄今为止尝试过的代码。注意：我尝试添加标记但没有工作。并且填充地图的数据也是使用 db 中的 json 获得的。我在代码之后发布了示例结果。

代码：

```
 var directionDisplay;
  var directionsService = new google.maps.DirectionsService();
  var map;

  function initialize() {
    directionsDisplay = new google.maps.DirectionsRenderer();
    var chicago = new google.maps.LatLng(41.850033, -87.6500523);
    var myOptions = {
      zoom:7,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: chicago
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    directionsDisplay.setMap(map);
  }

  function calcRoute() {
     // get route no
     var request='';
     var route_no=($(".route_no").attr('id')); 
     $.ajax({
         type: 'POST',
         url: base_url+"index.php/routes/getMapData",
         data: {
            route: route_no
         },
         success: function(data){
             //alert(JSON.stringify(data[0].waypoints))
             var datavalues='';
             datavalues=data[0];
             var wypt=[];

                    $.each(datavalues.waypoints,function(index,value){
                    {
                      wypt.push({location: value.location,stopover: value.stopover})

                    }
                });

             request={

                 origin:""+data[0].origin+"",
                 destination:""+data[0].destination+"",
                   waypoints:  wypt,
                 travelMode: google.maps.DirectionsTravelMode.DRIVING
             }
        //Add marker
        var mark=[]; 
                $.each(datavalues.title,function(index,value){
                    mark.push({location:value.location,title: value.company})
                });

               var marker= new google.maps.Marker( mark );
                marker.setMap(map);
    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    });
             return false;
         },
         dataType: 'json'         
     })

  } 
```

示例 JSON 结果：

```
[{"origin":"Mantachie MS 38855","destination":"Mantachie MS 38855","waypoints":[{"stopover":true,"location":"JACKSON TN 38305"},{"stopover":true,"location":"UPPER SANDUSKY ON 43351"}],"title":[{"company":"TBMS","location":"Mantachie MS 38855"},{"company":"ARJ MANUFACTURING","location":"JACKSON TN 38305"},{"company":"BRIDGESTONE","location":"UPPER SANDUSKY ON 43351"},{"company":"TBMS","location":"Mantachie MS 38855"}]}] 
```

我也想在城市和州旁边的标记上显示公司名称。

[这是 google 提供的示例地图](https://developers.google.com/maps/documentation/javascript/examples/directions-simple)，显示了方向 API 的工作原理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:50:33.117

这是一个自定义图标、信息窗口中的文本并向侧边栏添加条目的示例：[http ://www.geocodezip.com/v3_directions_custom_iconsC.html](http://www.geocodezip.com/v3_directions_custom_iconsC.html)

**代码片段：**

```
// this variable will collect the html which will eventually be placed in the side_bar 
      var side_bar_html = "";

      var gmarkers = [];
      var map = null;
      var startLocation = null;
      var endLocation = null;

      function initialize() {
        var center = new google.maps.LatLng(24.7756, 121.0062);

        map = new google.maps.Map(document.getElementById('map_canvas'), {
          center: center,
          zoom: 13,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });
        google.maps.event.addListener(map, 'click', function() {
          infowindow.close();
        });

        var directionsService = new google.maps.DirectionsService();
        var request = {
          origin: "532 Beacon St., Boston, MA",
          destination: "77 Massachusetts Ave, Cambridge, MA",
          travelMode: google.maps.DirectionsTravelMode.WALKING
        };

        var polyline = new google.maps.Polyline({
          path: [],
          strokeColor: '#FF0000',
          strokeWeight: 3
        });

        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            var bounds = new google.maps.LatLngBounds();
            var route = response.routes[0];
            var summaryPanel = document.getElementById("directions_panel");
            var detailsPanel = document.getElementById("direction_details");
            startLocation = new Object();
            endLocation = new Object();

            summaryPanel.innerHTML = "";
            detailsPanel.innerHTML = '<ul>';

            // For each route, display summary information.
            for (var i = 0; i < route.legs.length; i++) {
              var routeSegment = i + 1;
              summaryPanel.innerHTML += "<b>Route Segment: " + routeSegment + "</b><br />";
              summaryPanel.innerHTML += route.legs[i].start_address + " to ";
              summaryPanel.innerHTML += route.legs[i].end_address + "<br />";
              summaryPanel.innerHTML += route.legs[i].distance.text + "<br /><br />";
            }
            var path = response.routes[0].overview_path;
            var legs = response.routes[0].legs;
            for (i = 0; i < legs.length; i++) {
              if (i == 0) {
                startLocation.latlng = legs[i].start_location;
                startLocation.address = legs[i].start_address;
                createMarker(legs[i].start_location, "start", legs[i].start_address, "green");
              }
              endLocation.latlng = legs[i].end_location;
              endLocation.address = legs[i].end_address;
              var steps = legs[i].steps;
              for (j = 0; j < steps.length; j++) {
                var nextSegment = steps[j].path;
                detailsPanel.innerHTML += "<li>" + steps[j].instructions;
                var dist_dur = "";
                if (steps[j].distance && steps[j].distance.text) dist_dur += "&nbsp;" + steps[j].distance.text;
                if (steps[j].duration && steps[j].duration.text) dist_dur += "&nbsp;" + steps[j].duration.text;
                if (dist_dur != "") {
                  detailsPanel.innerHTML += "(" + dist_dur + ")<br /></li>";
                } else {
                  detailsPanel.innerHTML += "</li>";

                }
                for (k = 0; k < nextSegment.length; k++) {
                  polyline.getPath().push(nextSegment[k]);
                  bounds.extend(nextSegment[k]);

                }
              }
            }

            detailsPanel.innerHTML += "</ul>"
            polyline.setMap(map);
            map.fitBounds(bounds);
            createMarker(endLocation.latlng, "end", endLocation.address, "red");
            // == create the initial sidebar ==
            makeSidebar();

          }
        });
      }
      var icons = new Array();
      icons["red"] = {
        url: "http://maps.google.com/mapfiles/ms/micons/red.png",
        // This marker is 32 pixels wide by 32 pixels tall.
        size: new google.maps.Size(32, 32),
        // The origin for this image is 0,0.
        origin: new google.maps.Point(0, 0),
        // The anchor for this image is at 16,32.
        anchor: new google.maps.Point(16, 32)
      };

      function getMarkerImage(iconColor) {
          if ((typeof(iconColor) == "undefined") || (iconColor == null)) {
            iconColor = "red";
          }
          if (!icons[iconColor]) {
            icons[iconColor] = {
              url: "http://maps.google.com/mapfiles/ms/micons/" + iconColor + ".png",
              // This marker is 32 pixels wide by 32 pixels tall.
              size: new google.maps.Size(32, 32),
              // The origin for this image is 0,0.
              origin: new google.maps.Point(0, 0),
              // The anchor for this image is at 16,32.
              anchor: new google.maps.Point(16, 32)
            };
          }
          return icons[iconColor];

        }
        // Marker sizes are expressed as a Size of X,Y
        // where the origin of the image (0,0) is located
        // in the top left of the image.

       // Origins, anchor positions and coordinates of the marker
       // increase in the X direction to the right and in
       // the Y direction down.

      var iconImage = {
        url: 'http://maps.google.com/mapfiles/ms/micons/red.png',
        // This marker is 32 pixels wide by 32 pixels tall.
        size: new google.maps.Size(32, 32),
        // The origin for this image is 0,0.
        origin: new google.maps.Point(0, 0),
        // The anchor for this image is at 16,32.
        anchor: new google.maps.Point(16, 32)
      };
       // Shapes define the clickable region of the icon.
       // The type defines an HTML &lt;area&gt; element 'poly' which
       // traces out a polygon as a series of X,Y points. The final
       // coordinate closes the poly by connecting to the first
       // coordinate.
      var iconShape = {
        coord: [9, 0, 6, 1, 4, 2, 2, 4, 0, 8, 0, 12, 1, 14, 2, 16, 5, 19, 7, 23, 8, 26, 9, 30, 9, 34, 11, 34, 11, 30, 12, 26, 13, 24, 14, 21, 16, 18, 18, 16, 20, 12, 20, 8, 18, 4, 16, 2, 15, 1, 13, 0],
        type: 'poly'
      };
      var infowindow = new google.maps.InfoWindow({
        size: new google.maps.Size(150, 50)
      });

      function createMarker(latlng, label, html, color) {
        // alert("createMarker("+latlng+","+label+","+html+","+color+")");
        var contentString = '<b>' + label + '</b><br>' + html;
        var marker = new google.maps.Marker({
          position: latlng,
          map: map,
          icon: getMarkerImage(color),
          shape: iconShape,
          title: label,
          zIndex: Math.round(latlng.lat() * -100000) << 5
        });
        marker.myname = label;
        gmarkers.push(marker);

        google.maps.event.addListener(marker, 'click', function() {
          infowindow.setContent(contentString);
          infowindow.open(map, marker);
        });
      }

      function myclick(i) {
          google.maps.event.trigger(gmarkers[i], "click");
        }
        // == rebuilds the sidebar to match the markers currently displayed ==

      function makeSidebar() {
        var html = "";
        for (var i = 0; i < gmarkers.length; i++) {
          html += '<a href="javascript:myclick(' + i + ')">' + gmarkers[i].myname + '<\/a><br>';
        }
        document.getElementById("side_bar").innerHTML = html;
      }
      google.maps.event.addDomListener(window, 'load', initialize);
```

```
html {
  height: 100%
}
body {
  height: 100%;
  margin: 0px;
  padding: 0px
}
#map_canvas {
  height: 100%
}
```

```
<script src="https://maps.google.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="map_canvas" style="float:left;width:70%;height:100%;"></div>
<div id="control_panel" style="float:right;width:30%;text-align:left;padding-top:20px">
  <table border="1">
    <tr>
      <td>
        <div id="directions_panel" style="margin:20px;background-color:#FFEE77;"></div>
      </td>
    </tr>
    <tr>
      <td>
        <div id="direction_details" style="margin:20px;"></div>
      </td>
    </tr>
    <tr>
      <td>
        <div id="side_bar" style="margin:20px;"></div>
      </td>
    </tr>
  </table>
</div>
```

# c++ - 在哪里可以找到 IOCTL 常量值？

> ID：11152358
> 
> 赞同：5
> 
> 时间：2012-06-22T08:04:36.043
> 
> 标签：c++, .net, vb.net, msdn

我需要知道各种字符串的 IOCTL 常量（例如 IOCTL_ATA_PASS_THROUGH 常量的值）。在网上搜索我发现这些常量是在头文件 Ntddscsi.h 中定义的，但是这些常量是错误的。例如 IOCTL_ATA_PASS_THROUGH 的常量值应该是 4D02C 而在头文件中它是 40B

问题是：我在哪里可以找到包含所有正确值的列表？

谢谢

编辑：

我发现[http://www.ioctls.net/](http://www.ioctls.net/)列出了所有代码。无论如何，感谢您解释为什么 Ntddscsi.h 中的值不是“最终”值

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-22T08:27:13.167

它们位于 c:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Include\（在 64 位系统上）的 ntddscsi.h 中。它们被定义为：

```
#define IOCTL_ATA_PASS_THROUGH          CTL_CODE(IOCTL_SCSI_BASE, 0x040b, METHOD_BUFFERED, FILE_READ_ACCESS | FILE_WRITE_ACCESS) 
```

并且`IOCTL_SCSI_BASE`是

```
#define IOCTL_SCSI_BASE                 FILE_DEVICE_CONTROLLER 
```

来自同一个文件

这些来自 WinIoCtl.h

```
#define METHOD_BUFFERED                 0
#define FILE_DEVICE_CONTROLLER          0x00000004
#define FILE_READ_ACCESS          ( 0x0001 )    // file & pipe
#define FILE_WRITE_ACCESS         ( 0x0002 )    // file & pipe 
```

`CTL_CODE`来自 c:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Include\ 的WinIoCtl.h

```
#define CTL_CODE( DeviceType, Function, Method, Access ) (                 \
((DeviceType) << 16) | ((Access) << 14) | ((Function) << 2) | (Method) \ 
```

)

所以你的 IOCTL_ATA_PASS_THROUGH 的最终值将是：

```
(4 << 16 | (1 | 2) << 14 | 0x040b << 2 | 0) = 315436 = 4D02C 
```

:D

如果您将这些计算应用于其他 IO_.... 宏，您将找到这些值。另一方面，编写一个简短的应用程序只是将它们的值打印为十六进制要容易得多；）

# c# - 正确使用字典的方法

> ID：11152360
> 
> 赞同：1
> 
> 时间：2012-06-22T08:04:39.023
> 
> 标签：c#, dictionary

在这里，我有一段代码，展示了我想如何更新字典中的值的示例。我不认为这是最好的方法，因为我不确定它是线程安全的。

编辑：这只是 POC 代码，我的意思是将 Keys 复制到数组，然后在 Dictionary 上做一些事情。伙计们，我不能在这里发布我雇主的代码，所以我举了一个例子来说明问题。

当我获得 Keys to array 的副本时，我可能会在代码的其他部分中使用 Dictionary 引用，其中可能会添加一些键，然后此类函数不会更新所有键，因为我在某个时间点复制了这些键。我应该继承或包装字典并用锁对其进行操作，还是有更简单的方法？

我应该如何以正确的方式更新值？

```
 static void Main(string[] args)
    {
     Dictionary<string, int> dic = new Dictionary<string, int>();

     dic.Add("Kej1",0);
     dic.Add("Kej2",1);
     dic.Add("Kej3", 3);
     dic.Add("Kej4", 3);

     String[] arr = new string[dic.Count] ;
     dic.Keys.CopyTo(arr,0);

    foreach (var va in arr)
    {
        Console.WriteLine(dic[va] + " " + va);
        dic[va] = 10;
        Console.WriteLine(dic[va] + " " + va);
    }
    Console.ReadKey();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:07:56.457

如果您想要从 .NET 4 开始的线程安全字典，您可以使用[ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287191.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:17:03.343

您当前的实现很好。您的

```
 Dictionary<string, int> dic = new Dictionary<string, int>(); 
```

是一个局部变量，它只被你的主线程引用。您无需担心线程安全。

如果你*真的*想让它成为线程安全的，那么你可以这样锁定字典：

```
static void Main(string[] args) 
{ 
  Dictionary<string, int> dic = new Dictionary<string, int>(); 

  lock(dic)
  {
   dic.Add("Kej1",0); 
   dic.Add("Kej2",1); 
   dic.Add("Kej3", 3); 
   dic.Add("Kej4", 3); 

   String[] arr = new string[dic.Count] ; 
   dic.Keys.CopyTo(arr,0);

   foreach (var va in arr) 
   { 
     Console.WriteLine(dic[va] + " " + va); 
     dic[va] = 10; 
     Console.WriteLine(dic[va] + " " + va); 
   } 
  } 
  Console.ReadKey(); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:17:11.643

如果您实际使用多个线程，您只需要担心线程安全。大多数时候你不能在不知不觉中做到这一点。所以不要担心它并以任何你想要的方式访问你的字典。

如果您使用任何包含“异步”或“开始”一词的内容，您可能需要重新考虑这一点。

# java - 将具有不同日志记录级别的类别添加到 log4j 中的不同附加程序

> ID：11152367
> 
> 赞同：0
> 
> 时间：2012-06-22T08:05:10.760
> 
> 标签：java, log4j

我想以一种方式归档配置该日志类别“x”的记录器

*   记录器一在 INFO 级别记录“x”，在 DEBUG 级别记录其他内容
*   在调试级别记录两个日志“x”

我见过使用 Threshold 为不同 appender 中的同一类别实现不同日志记录级别的示例。在这种情况下，它似乎不是一个有效的解决方案，因为在两个附加程序中，我希望在 DEBUG 级别至少有一个类别。

我试图做类似的事情：

```
<appender name="FILE_ONE" class="org.jboss.logging.appender.DailyRollingFileAppender">
...
</appender>
<appender name="FILE_TWO" class="org.jboss.logging.appender.DailyRollingFileAppender">
...
</appender>

<category name="y">
    <priority value="DEBUG"/>
    <appender-ref ref="FILE_ONE"/>
</category>
<category name="x">
    <priority value="INFO"/>
    <appender-ref ref="FILE_ONE"/>
</category>
<category name="x">
    <priority value="DEBUG"/>
    <appender-ref ref="FILE_TWO"/>
</category> 
```

但第二类声明会覆盖第一个。

这甚至可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:17:31.473

`appender`试试这个.. 在标签下设置优先级`param name="Threshold"`。

```
<appender name="FILE_ONE" class="org.jboss.logging.appender.DailyRollingFileAppender">
 <param name="Threshold" value="INFO"/>

...
</appender>
<appender name="FILE_TWO" class="org.jboss.logging.appender.DailyRollingFileAppender">
 <param name="Threshold" value="DEBUG"/>
...
</appender> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T16:05:23.567

[与此解决方案](https://stackoverflow.com/questions/17076827/log4j-1-2-multi-level-filtering "log4j-1-2-多级过滤")类似，您可以使用自己的过滤器来完成工作。此过滤器应该允许给定的 specialCategory 记录在 specialCategoryLevel 级别，其他类别在 generalLevel 级别。

```
<appender name="FILE_ONE" class="org.jboss.logging.appender.DailyRollingFileAppender">
  <filter class="your.own.Filter">
      <param name="specialCategory" value="x" />
      <param name="specialCategoryLevel" value="DEBUG" />
      <param name="generalLevel" value="INFO" />
  </filter>
...
</appender>
<appender name="FILE_TWO" class="org.jboss.logging.appender.DailyRollingFileAppender">
  <param name="Threshold" value="DEBUG"/>
...
</appender>

<category name="y">
    <appender-ref ref="FILE_ONE"/>
</category>
<category name="x">
    <appender-ref ref="FILE_ONE"/>
    <appender-ref ref="FILE_TWO"/>
</category> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-23T12:43:04.713

对我们来说是这样的：

```
 <appender name="RAF_TIP_CommissionEnrich_v01_CC" class="org.apache.log4j.DailyRollingFileAppender">
            <param name="File" value="/opt/sag/99/IntegrationServer/instances/prodap2a/logs/TIP_CommissionEnrich_v01_CC_Trace.log"/>
            <param name="DatePattern" value="'.'yyyyMMdd"/>
            <layout class="org.apache.log4j.PatternLayout">
                    <param name="ConversionPattern" value="%d %-5p - %m%n"/>
            </layout>
    </appender>
          <category name="TIP_CommissionEnrich_v01_CC">
          <priority value="INFO"/>
    <appender-ref ref="RAF_TIP_CommissionEnrich_v01_CC"/>
    </category>
    <!-- root element - leave it on the bottom of file -->
    <appender name="applicationLog" class="org.apache.log4j.DailyRollingFileAppender">
            <param name="File" value="/opt/sag/99/IntegrationServer/instances/prodap2a/logs/application.log"/>
            <param name="DatePattern" value="'.'yyyyMMdd"/>
            <layout class="org.apache.log4j.PatternLayout">
                    <param name="ConversionPattern" value="%d %-5p - %m%n"/>
            </layout>
    </appender>
    <root>
            <level value="ERROR"/>
            <appender-ref ref="applicationLog"/>
    </root> 
```

然后你有 TIP_CommissionEnrich_v01_CC 的所有错误 + 信息

# sqlite - 如何在sqlite中使用where和group by来提高查询的性能

> ID：11152371
> 
> 赞同：3
> 
> 时间：2012-06-22T08:05:27.863
> 
> 标签：sqlite, indexing, group-by, where

现在一个名为 log 的表中有大约 200 万条记录。查询性能变得不可接受，但我不想在当前阶段将表拆分到不同的分区。因此，我尝试添加一些索引以提高查询性能。

```
CREATE TABLE log
           (
                id Integer primary key autoincrement,
                app_id text,
                __key__id INTEGER,

                secret text,
                trace_code text,
                url text,

                action text,

                facebook_id text,
                ip text,

                tw_time timestamp,
                time timestamp,

                tag text,
                to_url text,

                from_url text,
                referer text,

                weight integer,
                Unique(app_id, __key__id)
            );
CREATE INDEX key1 on log (action, url, tag); 
```

但是，看起来 sqlite 只是忽略了我的索引，而是扫描了整个表。我错过了什么吗？

```
sqlite> explain query plan select count(*) from log where action like 'content_%
';
0|0|0|SCAN TABLE log (~1182357 rows)

sqlite> explain query plan select count(*) from log where action like 'content_%
' group by url, tag;
0|0|0|SCAN TABLE log (~1182357 rows)
0|0|0|USE TEMP B-TREE FOR GROUP BY 
```

# 编辑1

@MaxSem 谢谢，当我将查询更改为：

```
sqlite> explain query plan select count(*) from log indexed by key1 where action
 in ('content_click','content_mouseover', 'content_display');
0|0|0|SEARCH TABLE log USING COVERING INDEX key1 (action=?) (~886770 rows)
0|0|0|EXECUTE LIST SUBQUERY 1 
```

但是，我无法解释 Sqlite 无法处理原始查询的原因。

# 编辑2

我应该改变我的问题。有没有办法加快sqlite中的这种查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T08:58:53.227

我相信 SQLite 不能对带有 LIKE 谓词的查询使用索引列，即使以LIKE 查询*开头也是如此。*但是你可以用不等式来模拟这种 LIKE 谓词：

```
sqlite> create table t (action text, url text, tag text);
sqlite> 插入 t 值 ('click', 'foo', 'bar');
sqlite> 插入 t 值（'clack'、'foo'、'bar'）；
sqlite> 插入 t 值 ('clock', 'foo', 'bar');
sqlite> 插入 t 值 ('cluck', 'foo', 'bar');
sqlite> 插入 t 值 ('cleck', 'foo', 'bar');
sqlite> 插入 t 值 ('clyck', 'foo', 'bar');
sqlite> 在 t (action, url, tag) 上创建索引 t_index;

```

以LIKE*开头*，你会得到一个完整的扫描：

```
sqlite> 解释查询计划 select count(*) from t where action like 'cl%';
0|0|0|SCAN TABLE t（~500000 行）

```

但是对于不等式，使用索引：

```
sqlite> 解释查询计划 select count(*) from t where action >= 'cl' and action <'cm';
0|0|0|搜索表 t 使用覆盖索引 t_index (action>? AND action<?) (~62500 行)

```

这种技术需要注意的是，在选择下限（此处为“cm”）时必须小心，以便字典顺序为您提供您所期望的，并且该技术不能轻松地对所有 LIKE 谓词进行建模。

当您使用带有标记的 IN 谓词来精确匹配时，当然会使用索引，因为您又回到了使用相等性：

```
sqlite> 解释查询计划 select count(*) from t where action in ('click', 'clack');
0|0|0|搜索表 t 使用覆盖索引 t_index (action=?) (~20 行)
0|0|0|执行列表子查询 1

```

如果您仍想使用 LIKE，您可以将您的表与您想要从子查询中预选的操作值列表连接起来：

```
sqlite> explain query plan select count(*) from t join (select distinct action from t where action like 'cl%') a where t.action = a.action;
1|0|0|SCAN TABLE t 使用覆盖索引 t_index（~500000 行）
0|0|1|SCAN SUBQUERY 1 AS a (~500000 行)
0|1|0|SEARCH TABLE t 使用 COVERING INDEX t_index (action=?) (~10 rows)

```

如果您愿意，这基本上为您提供了一个*动态*IN 谓词，而不是明确列出所有可能的值。

当然在这里，我正在从您的大表中提取与 LIKE 查询匹配的操作列表，因此这本身就是一个完整的扫描，否定了所有的好处，但是如果您将您的架构标准化为有一个单独的（小得多）操作带有一个小整数代理键的表，您将其用作日志表中的操作列，那么您将避免在日志表中多次存储重复字符串（由小整数替换），并且您可以轻松地加入他们的查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-28T06:07:48.990

你需要：

```
PRAGMA case_sensitive_like=ON; 
```

SQLite 的默认设置是使用不区分大小写的 LIKE 运算符。通常，不区分大小写和索引不能很好地相处。数据库可以使用不区分大小写的索引，但额外的复杂性和搜索是不值得的。

如果您打开 case_sensitive_like，那么 SQLite 应该为您的查询使用索引。

# android - 删除 android textPassword 的延迟

> ID：11152379
> 
> 赞同：3
> 
> 时间：2012-06-22T08:06:06.630
> 
> 标签：android, passwords, android-edittext

在 EditText 视图中输入密码时，正在显示字符，经过一些延迟后，它显示为 DOT，我想消除此延迟。它应该直接显示为 DOT。

我如何在 Android 上做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:08:56.747

这是 Android 中的用户设置，我不相信它可以通过代码控制。它旨在帮助用户输入正确的密码。

--编辑-- 除了提问者的评论，设置可以在以下位置找到：

设置 > 安全 > 使密码可见

以上涉及到Android ICS，设置应该和之前的版本差不多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:44:38.407

**强行**隐藏密码，

> android.provider.Settings.System.putInt(this.getContentResolver(),android.provider.Settings.System.TEXT_SHOW_PASSWORD, 0);

**注意**：它不会显示任何字符，直接 DOT 将在您的 View 中显示，没有任何延迟，并将**android:password**属性设置为**true**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:30:10.117

使用 AOSP *PasswordTransformationMethod.java*中的代码并修改它以满足您的需要。从中创建新类*MyPasswordTransformationMethod*并修改其中的*Visible*类。它还需要更改其余代码，因为它访问一些私有属性，但它们大多是常量，所以很容易。

```
private static class Visible
extends Handler
implements UpdateLayout, Runnable
{
    public Visible(Spannable sp, MyPasswordTransformationMethod ptm) {
        mText = sp;
        mTransformer = ptm;
        //postAtTime(this, SystemClock.uptimeMillis() + 1500); 
        //replaced with following line
        postAtFrontOfQueue(this);
    }

    public void run() {
        mText.removeSpan(this);
    }

    private Spannable mText;
    private MyPasswordTransformationMethod mTransformer;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-06-05T10:40:39.480

我知道这已经很老了，但这里有一个有用的提示！（这也可以）

如果您将焦点从当前的 EditText 移动到下一个，它将跳过延迟，因此如果您正在创建一个 PIN 屏幕，那么您只需立即将焦点移到下一个“pin”上，它就会跳过延迟并立即显示星号。

如果您只有 1 个 EditText，您可能还可以将 rootView 或容器设置为可聚焦并关注它。

# r - 计算向量中的正负运行次数

> ID：11152380
> 
> 赞同：7
> 
> 时间：2012-06-22T08:06:16.853
> 
> 标签：r

我需要计算（在 R 中）向量中正负运行的数量。例如，假设我有一个向量`x`：

```
x = c(-23 , -2 , 5 , 8, 9, 12, -2, -1, 3, 5, 7) 
```

比运行次数为四，因为我有：{-23,-2}、{5,8,9,12}、{-2,-1} 和 {3,5,7}。因此，基本上每次系列更改符号时，它都会在运行计数中计为 +1。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-22T08:14:53.360

如果您的向量在 中`x`，则`length(rle(sign(x))$lengths)`可以。

# android - Android - 在活动之间发送字符串

> ID：11152391
> 
> 赞同：0
> 
> 时间：2012-06-22T08:07:14.050
> 
> 标签：android, webview, android-activity

我无法从一个活动获取字符串（包含 URL）到另一个活动。我试过使用意图，但没有奏效。

我有一个主要活动来设置带有标签的标签主机。有 3 个选项卡，一个带有条形码扫描仪，一个带有搜索字段和 web 视图。

条形码扫描仪和搜索字段创建一个包含我希望 web 视图显示的 Url 的字符串。

有人可以告诉我我错过了什么或者我怎么能做得更好？

我的主要活动

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    setTabs() ;
}
private void setTabs()
{
    addTab("Home", R.drawable.tab_home, HomeActivity.class);
    addTab("Search", R.drawable.tab_search, SearchActivity.class);
    addTab("Play", R.drawable.tab_favorite, FavoriteActivity.class);
}

private void addTab(String labelId, int drawableId, Class<?> c)
{
    TabHost tabHost = getTabHost();
    Intent intent = new Intent(this, c);
    TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId); 

    View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);
    TextView title = (TextView) tabIndicator.findViewById(R.id.title);
    title.setText(labelId);
    ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
    icon.setImageResource(drawableId);

    spec.setIndicator(tabIndicator);
    spec.setContent(intent);
    tabHost.addTab(spec);
}

public void switchTab(int tab){
    TabHost tabHost1 = getTabHost();
    tabHost1.setCurrentTab(tab);
} 
```

网络视图选项卡

```
public class WebviewActivity extends Activity {
WebView webView;
String url;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.favoritepage);

    url = "http://www.google.nl";

    webView = (WebView)findViewById(R.id.webview);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.setWebChromeClient(new WebChromeClient());
    webView.setWebViewClient(new WebViewClient() {
        @Override
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)
        {
            // Handle the error
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url)
        {
            view.loadUrl(url);
            return true;
        }
    });
    webView.getSettings().setPluginState(WebSettings.PluginState.ON);
    webView.getSettings().setAllowFileAccess(true);
    webView.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR);
    webView.loadUrl(url);

    if (savedInstanceState != null)
        ((WebView)findViewById(R.id.webview)).restoreState(savedInstanceState);
}

protected void onSaveInstanceState(Bundle outState) {
    webView.saveState(outState);
 }
} 
```

和搜索标签

```
public class SearchActivity extends Activity implements OnClickListener {
Button searchButton;
TextView searchText;
TextView searchResultText;
String zoekopdracht, completeTrailerUrl, searchUrl;
String baseURL = "http://not_needed_here";
String endURL = "End_of_url";

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.searchpage);

    searchText=(TextView)findViewById(R.id.searchText);
    searchResultText=(TextView)findViewById(R.id.searchResultText);

    searchButton=(Button)findViewById(R.id.searchButton);
    searchButton.setOnClickListener(this);

}

@Override
public void onClick(View buttonId) {
    // TODO Auto-generated method stub
    switch (buttonId.getId()){
    case R.id.searchButton :
        zoekopdracht = searchText.getText().toString();

        StringBuilder completeURL = new StringBuilder(baseURL);
        completeURL.append(zoekopdracht + endURL);
        searchUrl = completeURL.toString();

        /**start de thread om de xml zoekopdracht te doen */
        new Thread(new Runnable() {
            public void run() {
                try {
                    URL website = new URL(searchUrl);

                    SAXParserFactory spf = SAXParserFactory.newInstance();
                    SAXParser sp = spf.newSAXParser();
                    XMLReader xr = sp.getXMLReader();

                    HandlingXMLStuff doingWork = new HandlingXMLStuff();
                    xr.setContentHandler(doingWork);
                    InputSource is=new InputSource(website.openStream());
                    xr.parse(is);

                    completeTrailerUrl = doingWork.getInformation();

                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
          }).start();
        searchResultText.setText(completeTrailerUrl);
        //I want completeTrailerUrl to be loaded in the webview
        break;
    }
}
} 
```

### 对桶的反应

我已经将接收类更改为这个，但我认为这是我出错的地方。

```
public class FavoriteActivity extends Activity {
WebView webView;
String url;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.favoritepage);

    // part submitted by Cool Compiler
    Intent t=getIntent();
    Bundle k = t.getExtras();
    url=k.getString("stringToPassOn");

    if (url != null){
        url = "http://www.google.nl";

    }

    webView = (WebView)findViewById(R.id.webview);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.setWebChromeClient(new WebChromeClient());
    webView.setWebViewClient(new WebViewClient() {
        @Override
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)
        {
            // Handle the error
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url)
        {
            view.loadUrl(url);
            return true;
        }
    });
    webView.getSettings().setPluginState(WebSettings.PluginState.ON);
    webView.getSettings().setAllowFileAccess(true);
    webView.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR);
    webView.loadUrl(url);

    if (savedInstanceState != null)
        ((WebView)findViewById(R.id.webview)).restoreState(savedInstanceState);
}

protected void onSaveInstanceState(Bundle outState) {
    webView.saveState(outState);
 }
} 
```

运行它时，webview 是全黑的，旋转时它会崩溃

```
06-22 13:32:45.380: W/dalvikvm(1630): threadid=1: thread exiting with uncaught exception (group=0x40a51228)
06-22 13:32:45.400: E/AndroidRuntime(1630): FATAL EXCEPTION: main
06-22 13:32:45.400: E/AndroidRuntime(1630): java.lang.RuntimeException: Unable to stop activity {com.georgekroon.player/com.georgekroon.player.TUplayerV2Activity}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.georgekroon.player/com.georgekroon.player.FavoriteActivity}: java.lang.NullPointerException
06-22 13:32:45.400: E/AndroidRuntime(1630):     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3505)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3585)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3783)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at android.app.ActivityThread.access$700(ActivityThread.java:139)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1266)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at android.os.Looper.loop(Looper.java:156)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at android.app.ActivityThread.main(ActivityThread.java:5005)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at java.lang.reflect.Method.invokeNative(Native Method)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at java.lang.reflect.Method.invoke(Method.java:511)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at dalvik.system.NativeStart.main(Native Method)
06-22 13:32:45.400: E/AndroidRuntime(1630): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.georgekroon.player/com.georgekroon.player.FavoriteActivity}: java.lang.NullPointerException
06-22 13:32:45.400: E/AndroidRuntime(1630):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2202)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1992)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at android.app.LocalActivityManager.dispatchStop(LocalActivityManager.java:579)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at android.app.ActivityGroup.onStop(ActivityGroup.java:82)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at android.app.Instrumentation.callActivityOnStop(Instrumentation.java:1266)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at android.app.Activity.performStop(Activity.java:4706)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3500)
06-22 13:32:45.400: E/AndroidRuntime(1630):     ... 12 more
06-22 13:32:45.400: E/AndroidRuntime(1630): Caused by: java.lang.NullPointerException
06-22 13:32:45.400: E/AndroidRuntime(1630):     at com.georgekroon.player.FavoriteActivity.onCreate(FavoriteActivity.java:25)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at android.app.Activity.performCreate(Activity.java:4543)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
06-22 13:32:45.400: E/AndroidRuntime(1630):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2158)
06-22 13:32:45.400: E/AndroidRuntime(1630):     ... 19 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:13:14.437

使用捆绑包。

在您的活动中添加类似

```
Bundle bundle = new Bundle ();
bundle.putSerializable("stringToPassOn", YOUR_STRING);

Intent xxx;
xxx.putExtras (bundle);
startActivityForResult (xxx, 0); 
```

稍后您可以通过以下方式检索信息：

```
Bundle bundle = this.getIntent().getExtras();
String myText = (String) bundle.getSerializable ("stringToPassOn"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:31:29.397

您需要使用捆绑包..然后它必须可以正常工作。例如。;

```
 s=new Intent(Format1.this, Format17.class);
                    d=new Bundle();
                    d.putString("userId", userId);
                    d.putString("surveyId", surveyId);
                    d.putInt("quesNo", ques_no);
                    s.putExtras(d);
                    startActivity(s); 
```

现在在下一堂课中，您可以检索这样的值

```
Intent t=getIntent();
    Bundle k=t.getExtras();
    surveyId=k.getString("surveyId");
    userId=k.getString("userId");
    ques_no=k.getInt("quesNo"); 
```

试试这个....

# c# - 访问 POST 表单数据并将其写入 xml 文件？

> ID：11152398
> 
> 赞同：2
> 
> 时间：2012-06-22T08:07:38.543
> 
> 标签：c#, asp.net, forms, post

所以我一直在到处寻找一个好的解决方案，但没有发现任何有用的东西。所以基本上我想要做的是在 .aspx Web 表单的代码隐藏中使用 C# 访问（发布）表单数据，然后将该数据写入 xml（当然还创建 xml）。

假设我有这样的事情：

```
<asp:Content runat="server" ContentPlaceHolderID="pageContent">

    <form id="form1" method="post" name="contact" action="contact.aspx">
       (...)
       <input type="button" value="Send" id="submit"
    </form>

</asp:Content> 
```

现在我想表格里面的内容并不重要。

我找到了这个 xml writer class --> [http://msdn.microsoft.com/de-de/library/system.xml.xmlwriter(v=VS.80).aspx](http://msdn.microsoft.com/de-de/library/system.xml.xmlwriter(v=VS.80).aspx)，但我真的不知道去哪里开始。

如果有人可以帮助我，或者这个问题之前已经在这里回答过，我只是忽略了它，所以你可以在那里链接我，我将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:28:11.013

您不能`<form>`在 ASP.NET WebForms 中使用该标记，因为已经有一个`<form runat="server">`并且 HTML 表单不能嵌套。所以在这里你有两个不同的任务要完成：

1.  将 POST 数据发送到 Contact.aspx
2.  使用 Contact.aspx 中的 POST 数据生成 XML 文件

因此，让我们从第一个任务开始处理这两个单独的任务。假设您有一个 Default.aspx Web 表单，用户将在其中输入一些输入数据：

```
<div>
    First name: <asp:TextBox ID="EdtFirstName" runat="server" />
</div>
<div>
    Last name: <asp:TextBox ID="EdtLastName" runat="server" />
</div>

<asp:LinkButton ID="BtnSubmit" runat="server" PostBackUrl="Contact.aspx" Text="Generate XML" /> 
```

并且在您后面的代码中将公开 2 个值：

```
public partial class _Default : System.Web.UI.Page
{
    public string FirstName
    {
        get { return EdtFirstName.Text; }
    }

    public string LastName
    {
        get { return EdtLastName.Text; }
    }
} 
```

现在我们可以继续执行在内部生成 XML 文件的第二个任务`Contact.aspx`：

```
public partial class Contact : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        var page = (Page.PreviousPage as _Default);
        if (page != null)
        {
            var xml = new XDocument(
                new XElement(
                    "user",
                    new XElement("firstName", page.FirstName),
                    new XElement("lastName", page.LastName)
                )    
            );
            var file = Server.MapPath("~/test.xml");
            xml.Save(file);
        }
    }
} 
```

# c# - 显式设置 WPF 绑定数据类型

> ID：11152401
> 
> 赞同：3
> 
> 时间：2012-06-22T08:07:47.733
> 
> 标签：c#, .net, wpf, binding, types

我想问一下 WPF 是否有任何功能，`binding`当绑定到“ `object`”类型的对象时，可以通过它在 a 上定义目标类型。我有一个类型为 " `object`" 的通用集合，它必须在其各个绑定点作为一种对象类型或另一种对象类型（即`DateTime`、`int`等）处理。

`Type_X`在处理绑定时，有什么方法可以任意强制.Net框架在编译时将未知类型的对象视为对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T08:34:50.597

当然，您可以使用[`DataTemplates`](http://msdn.microsoft.com/en-us/library/ms742521.aspx). 如果您在 App.xaml 中定义它们，它们将被全局应用：

```
<DataTemplate DataType="{x:Type local:YourType}">
    <TextBox Text="{Binding SomeProperty}" HorizontalAlignment="Stretch"/>
</DataTemplate> 
```

`YourType`现在，每当您在 UI 中的某处添加运行时类型的对象时，例如在 a`StackPanel`中，都会使用该模板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T11:01:38.287

不，[`Binding`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.aspx)类不提供任何此类功能；其实不需要，Binding 框架会自动将源对象转换为相关类型并使用绑定的属性值，否则如果找不到该属性会引发绑定错误。

所以如果我有一个`Object`类型的属性`ViewModel`

```
public object Dummy 
{ 
    get 
    { 
        return dummy; 
    } 
    set 
    { 
        dummy = value;
        NotifyPropertyChanged("Dummy");
    } 
} 
```

我把它绑定到`TextBox`这样的 -

```
<TextBox Text="{Binding Dummy.Name}" HorizontalAlignment="Stretch"/> 
```

然后将 Dummy 设置为这样的对象 -

```
Dummy = new MyCustomType(); 
```

此时，绑定将评估并尝试`Name`在源对象（`Dummy`）中找到该属性，如果`MyCustomType`定义了一个名为的公共属性`Name`，则绑定将执行，否则将发生绑定错误（没有例外，只是输出窗口中的错误消息）。

现在，如果我想将我的`Dummy`属性设置为两种不同类型的对象（一种具有`Name`，另一种具有`FirstName`），那么我有两个选择 -

1.  定义`DataTemplates`为建议的 Botz300
2.  使用 a `ValueConverter`（检查对象类型并返回相关属性值）。

using 的另一个变体`ValueConverter`是定义一个[`TypeConverter`](http://msdn.microsoft.com/en-us/library/system.componentmodel.typeconverter(VS.80).aspx)to do 转换并用 声明它[`TypeConverterAttribute`](http://msdn.microsoft.com/en-us/library/system.componentmodel.typeconverterattribute(v=VS.80).aspx)，然后在绑定中自动转换将完成。

同样适用于对象的集合。

**更新：**

是的，WPF 将隐式使用`DefaultType`转换器将您的类型转换为相关的显示值。如果您将`Object`直接绑定到属性（`Text`在上面的示例中），则 WPF 将使用该`TypeConverter`类型（如果可用）或使用该`ToString()`方法获取显示值。

但这一切都取决于您用于显示数据的控件以及您绑定的方式/内容。

> 注意：此技巧仅适用于可以具有简单文本表示的对象。在处理复杂的数据对象时，使用这种方便的技术可能没有意义。
> 
> 您可以阅读 MSDN 上的这篇文章，其中讨论了这个 - [使用数据绑定和 WPF 自定义数据显示](http://msdn.microsoft.com/en-us/magazine/cc700358.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-08T12:33:09.847

也许您可以使用 d:DataContext 设置设计时 DataContext - 如果您只想让您的 IDE 知道它需要什么样的数据。

```
<ContextMenu ItemsSource="{Binding Shapes}"
             DataContext="{Binding Data, Source={StaticResource BindingProxy}}"
             d:DataContext="{d:DesignInstance tree:DesktopViewModel}">
    [items...]
</ContextMenu> 
```

我有一个 ContextMenu，它从 BindingProxy （具有对象类型的数据属性）获取它的 DataContext。为了让 VS 和 Resharper 正常工作，他们必须知道 DataContext 的类型，所以我只需定义一个设计时 DataContext，现在他们知道它是一个`DesktopViewModel`.

这仅适用于 DataContext，不适用于任何绑定（因为没有 DesignTimeBinding 之类的东西），但也许您可以重写绑定以引用该 DataContext（或将控件包装在具有 DataContext 和 d:DataContext 的网格中） .

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-27T01:19:33.537

我不确定这是否正是您要查找的内容，但是您可以`Path`通过用括号括住属性名称并`<Type>.`在前面添加来指定绑定属性中的类型。

例子：

```
<ContextMenu Tag="{Binding Path=PlacementTarget.(FrameworkElement.Tag), RelativeSource={RelativeSource Self}}">
...
</ContextMenu> 
```

这指定该属性`Tag`是该`FrameworkElement`类型的成员并指示该属性属于`PlacementTarget`该类型。

# iphone - iOS 社交网络服务管理

> ID：11152403
> 
> 赞同：0
> 
> 时间：2012-06-22T08:07:57.607
> 
> 标签：iphone, objective-c, ios

最近，我正在开发一个与一些社交网络链接的新应用程序，例如，twitter，facebook，linkedIn...实际上，我以前做过类似的应用程序，但这次我想请教更多关于管理的意见他们。

这是我的练习。

塞纳里奥：

1.  启动应用程序
2.  强制社交网络登录（从给定选项中选择一项）
3.  使用此 SSO 身份验证用户并从我的 Web 服务中获取相关用户信息

问题：

1.  **如何让用户登录？**

    **a)**只是`setRootController:TabBar controller`，并添加一个覆盖的登录视图`tabBarView` （问题：某些控制器`tabBarCon`可能需要一些用户信息来初始化或显示内容。这种方法可能会花费大量工作来重新加载控制器）

    **b)** `addSubview:loginView`到窗口。登录后，创建`tabBarController`and `addSubview:tabBarCon.view` （我想知道是否有必要`setRootController`in `application:didFinishLaunchingWithOptions`，因为如果我没有，我会收到警告）

2.  **如何存储用户信息，如 facebook id 等。**

    a) 直接保存到userdefault

    b) 使用用户模型记录这些东西并将用户对象保存到 userdefault

这可能是一个愚蠢的问题。在这种情况下，我正在寻求更多意见。（问题1更重要:)）
欢迎提出其他建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:01:35.707

对问题 1。

它应该是一个视图控制器。我怎么知道？因为涉及到逻辑、Web 调用、数据模型等。从一开始就尽可能地遵循 MVC 范式。登录时不必重新加载视图控制器。通常会有一些事件（通知、委托、块）通知您的视图控制器，他们可以重新布局视图。这是正常的活动。将您的视图控制器设计为具有“登录”和“注销”界面 - 几乎总是如此。

对问题 2。

如果您将核心数据用于其他用途并且已经配置，请使用它。您可以在需要时将属性添加到数据模型中。否则，如果您想快速完成并且只处理一个用户，请尝试使用 NSUserDefaults。每种方法都是不同的，并且有不同的好处与失败。

编辑：

如果您计划向公众发布您的软件，请小心保存机密信息。即：密码，访问令牌等。这可能是一个非常昂贵的错误，具体取决于您的合法所在地。

# documentation - 记录数据包协议的好方法

> ID：11152405
> 
> 赞同：0
> 
> 时间：2012-06-22T08:08:08.430
> 
> 标签：documentation, packet

我已经构建了一个服务器和客户端，它们使用原始 tcp 套接字相互通信。记录数据包发送给彼此的好方法是什么？

目前我使用 wikia 并为每个数据包创建一个新表，但是具有循环和更复杂结构的数据包很难阅读，也很难维护 wikia。

那么是否有任何可用的软件可以使数据包更易于查看，或者更重要的是更易于维护。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:11:07.017

如果您使用[Protocol Buffers](https://code.google.com/p/protobuf/)之类的东西，那么您已经对二进制数据进行了高级描述。一般来说，一个好的方法是以某种方式维护结构的高级描述，然后编写生成序列化和反序列化函数的代码。

然后，相同的代码生成器也可以生成人类可读的文档。

# php - 无法使用 php 使用 php 函数读取插入 mysql 数据库中的行，就在调用该函数之后

> ID：11152414
> 
> 赞同：1
> 
> 时间：2012-06-22T08:09:00.887
> 
> 标签：php, mysql

调用一个函数，如：-

```
$setmessage = setlatestmessage($sessionid, $sendersuserid, $message1); 
```

该函数在文件functions.php中，我已将其包含在此文件中该函数是：-

```
function setlatestmessage($sessionid, $userid, $message, $status = 0) {
    $dbc = mysqli_connect(hostname, username, password, database)
            or die("Error connecting database");

    // there was no row, so just add a row
    $query2 = "insert into table(session_id, user_id, message, status) values ( $sessionid, $userid, '$message', $status)";
    mysqli_query($dbc, $query2);

    // if a row was affected, close connection and send true
    if (mysqli_affected_rows($dbc) == 1) {
        mysqli_close($dbc);
        return TRUE;
    }
    mysqli_close($dbc);
    return FALSE;
} 
```

现在，就在我调用这个函数之后，脚本就像

```
if (!$setmessage) {
                echo '<status>0</status>';
            } else {
                // fetch id of the row just inserted
                $query2 = "select id from game_messages where session_id = $sessionid and message = '$message1' and user_id = $sendersuserid order by datetime desc limit 1";
                $result2 = mysqli_query($dbc, $query2);

                if (mysqli_num_rows($result2) == 0) {
                    // if no row was returned
                    // case never should happen
                    echo '<status>10</status>';
                }
                else{echo'done';} 
```

我得到的输出是10。

但是，如果我只是在函数调用下放置一个 sleep(50)，或者我只是编写函数正在执行的操作，而不是函数调用，我会得到正确的输出。无法弄清楚为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:37:44.143

`setlatestmessage()`如果您在函数 using`mysqli_insert_id()`或错误时返回最后一个插入查询生成的 ID，将会更容易和更简单。然后，您只需检查：

```
$messageID = setlatestmessage($sessionid, $sendersuserid, $message1);

if ($messageID !== false)
{
    echo '<status>0</status>';
}
else
{
    echo '<status>10</status>';
} 
```

# dynamics-crm-2011 - 迁移的 MS CRM 2011 中的数据导入错误

> ID：11152416
> 
> 赞同：0
> 
> 时间：2012-06-22T08:09:04.937
> 
> 标签：dynamics-crm-2011, crm

我在迁移的（4.0 到 5.0）Microsoft CRM 2011 中遇到数据导入关联的情况

问题是 - 我通过部署管理器成功地从 Microsoft CRM 4.0 迁移了 Microsoft CRM 2011。导入后，所有实体都工作正常。然后我将一些数据（csv 文件，3 KB）导入潜在客户实体，但在导入后，导入向导窗口将出现在提交的消息上，没有任何成功消息或失败消息。

请给我你的想法和建议。

如下图所示：

![在此处输入图像描述](../Images/bd9f1c0436afbc0da62fc4b7298cdac3.png) 数据导入后，leader实体为空 ![在此处输入图像描述](../Images/fc6694efa44ad3b235883633ea80f613.png)

* * *

这不是视图或任何过滤器的问题，我已经检查过了。问题是：

我正在尝试使用数据管理部分中的导入工具将数据从 csv 文件导入迁移的动态 crm 2011。我已经创建了映射并上传了数据文件。看起来该作业尚未开始从 csv 文件上传数据，因为：
状态原因 = 已提交（未完成或其他任何内容）成功 = 0 错误 = 0 总计数 = 0
它在视图下显示导入作业“未开始进口”。

我只想知道如何启动该过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:40:52.243

这可能与您的看法有关。您可以执行高级查找（或使用 stunnware 工具）来查询潜在客户。确保您没有任何过滤器来验证数据，然后将检索到的字段与“所有潜在客户”视图进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T13:16:42.457

这通常发生在我身上。我所做的是重新启动 CRM 异步服务。大部分时间它都工作。如果它在生产中，你可能会遇到问题。

这是重启CRM异步服务的命令

**净停止 MSCRMAsyncService**

**网络启动 MSCRMAsyncService**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T04:03:01.177

我找到了上述问题的解决方案。当我重新安装和重新配置 CRM 数据库时，问题就解决了。

谢谢

普拉约什

# objective-c - 在 iOS 中对齐两个图像视图

> ID：11152417
> 
> 赞同：0
> 
> 时间：2012-06-22T08:09:19.687
> 
> 标签：objective-c, ios, uiimageview, uiimage

我的 xib 文件中有两个`UIImageView`。两者都从相同的原点开始，并且具有相同的维度。当我运行代码时，我希望它们彼此重叠，但似乎有一个不在。看截图。我在这里做错了什么？

![截屏](../Images/2ce23e08d33bb658acdcd31e0fe3f330.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:27:08.930

他们俩的观点是一样的吗？我的猜测是他们的观点不同。为什么？因为偏移量看起来与导航栏的高度相同。

请记住，原点是相对于视图，而不是屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:13:38.720

即使您为 imageview 提供了相同的尺寸，我也不知道您是怎么变成这样的，
所以请再次检查您的尺寸

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:54:18.877

从您的屏幕截图中，您似乎有两个`UIImageView`不同`autoresizingMask`的 s。

在 IB 中，依次选择每个图像视图，进入属性检查器并检查“视图 -> 模式”下是否有相同的设置。似乎顶部图像是“Aspect Fit”，而底部图像是“Scale To Fill”。

# mysql - 查询中的Mysql ORDER BY条件取决于日期

> ID：11152421
> 
> 赞同：3
> 
> 时间：2012-06-22T08:09:32.970
> 
> 标签：mysql, if-statement, sql-order-by, conditional, case

我有一个 mysql 查询，它获取设计列表中的行。在这个列表中，我们有“普通”行，它们按它们的 id 排序，还有“特殊”行，它们按“special_end”（这是日期，现在在所有行中为 NULL）参数排序。因此，结果中的“特殊”行应该高于“正常”。

现在查询：

```
SELECT d.*, DATE_FORMAT(_created, '%d.%m.%Y') as _created_human, count(dp.id) photos_cnt, u.id user_id, u.class_name user_class_name, u.full_name user_full_name
FROM designs d
LEFT JOIN design_photo dp ON d.id=dp.design_id 
LEFT JOIN cms_user u ON d.cms_user_id=u.id
WHERE 1=1  AND d.status_id=1 AND d.published=1 AND u.cms_user_status_id=1 
GROUP BY d.id
ORDER BY d.special_end DESC, id DESC 
LIMIT 20 OFFSET 0 
```

我需要在此查询中升级 ORDER BY 块以使用 special_end 参数和条件对行进行排序：

*   如果 d.special_end >= DATE(NOW() ) -> 按 d.special_end DESC 排序，
*   如果 d.special_end <= DATE(NOW() ) -> 按 id DESC 排序。

示例（id - row - special_end）：

```
515 design4 2012-07-21
514 design3 2012-06-30
526 design5 null
513 design2 2012-05-30 (this date is <= DATE( NOW() ))
512 design1 null
511 design0 null
.
.
. 
```

我已经尝试写类似的东西

```
ORDER BY CASE d.special_end WHEN d.special_end >= DATE( NOW() ) THEN d.special_end WHEN d.special_end <= DATE( NOW() ) THEN d.id END DESC 
```

或者

```
ORDER BY IF(d.special_end >= DATE( NOW() ), d.special_end, d.id) DESC 
```

但没有结果。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:22:54.973

按条件排序可能非常慢，我宁愿用它`UNION`来达到相同的结果：

```
SELECT t.* FROM (
    (
        SELECT d.*, DATE_FORMAT(_created, '%d.%m.%Y') as _created_human, count(dp.id) photos_cnt, u.id user_id, u.class_name user_class_name, u.full_name user_full_name
        FROM designs d
        LEFT JOIN design_photo dp ON d.id=dp.design_id 
        LEFT JOIN cms_user u ON d.cms_user_id=u.id
        WHERE d.special_end >= DATE(NOW()) AND d.status_id=1 AND d.published=1 AND u.cms_user_status_id=1 
        GROUP BY d.id
        ORDER BY d.special_end DESC
    ) UNION (
        SELECT d.*, DATE_FORMAT(_created, '%d.%m.%Y') as _created_human, count(dp.id) photos_cnt, u.id user_id, u.class_name user_class_name, u.full_name user_full_name
        FROM designs d
        LEFT JOIN design_photo dp ON d.id=dp.design_id 
        LEFT JOIN cms_user u ON d.cms_user_id=u.id
        WHERE (d.special_end < DATE(NOW()) OR d.special_end IS NULL) AND d.status_id=1 AND d.published=1 AND u.cms_user_status_id=1 
        GROUP BY d.id
        ORDER BY d.id DESC
    )
) t LIMIT 20 OFFSET 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T09:10:32.343

当有多个 Group by 或排序要求时，始终使用 UNION 拆分您的查询。只需使用 UNION 运算符拆分您的查询并进行排序。如下所示

```
Select * from Something where <condtion> order by 1 desc
UNION
Select * from Something where <condtion> order by 2 desc 
```

# java - log4J 的所有附加程序

> ID：11152423
> 
> 赞同：0
> 
> 时间：2012-06-22T08:09:42.857
> 
> 标签：java, log4j, appender

我尝试运行带有很多外部 jar 的中型程序，但我总是收到警告“log4j:WARN No appenders could be found for logger XYZ”。当然，我必须将特定的 Appender 添加到我的 log4j.properties 但如果我添加这个，下次运行会错过另一个。

那么，除了启动、添加appender、启动、添加appender ..等等，还有什么方法可以在外部jar中找到所有需要的appender，直到没有更多警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:14:41.807

您可以[配置](http://logging.apache.org/log4j/1.2/manual.html)作为所有其他记录器的父级的根记录器：

```
log4j.rootLogger=DEBUG, Appender 
```

或配置最常见的顶级记录器，如`com`,`org`和`net`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:14:50.813

`log4j.properties`您可以为根记录器设置文件。之后，所有其他记录器将“继承”这些属性，您将不会再收到任何消息。

# .htaccess - 无法访问托管在 GoDaddy 上的 Magento 主页

> ID：11152425
> 
> 赞同：1
> 
> 时间：2012-06-22T08:09:54.517
> 
> 标签：.htaccess, magento-1.5

我在 GoDaddy 的共享主机帐户上使用 Magento，我刚刚配置它并且能够看到主页，但看不到其他页面，可能是什么问题？里面有什么`.htaccess`吗？

当前的托管路径是

```
/home/content/42/9469242/html 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T10:14:07.010

来自[Magento 维基](http://www.magentocommerce.com/wiki/groups/227/error/no_input_file_specified)：

> **如果您由 GoDaddy 托管**，通常会出现一个常见错误，即no input file specified 错误。
> 
> 如果您的服务器根目录中没有 Magento 设置，请确保将以下内容添加到您的 .htaccess 文件中。
> 
> `RewriteBase /yourbasepath/`
> 
> 验证后，您可以采取一些措施来解决此问题，但我们将从通常有效的方法开始。
> 
> 在您的 Web 根目录中，应该有一个名为 php.ini 的文件。将其重命名为 php5.ini。
> 
> 如果没有 php5.ini 文件。创建文件并将其上传到您的根目录。
> 
> 如果这不起作用，请将以下内容添加到新重命名的 php5.ini 文件的末尾：
> 
> `cgi.fix_pathinfo = 1`
> 
> 如果您仍然收到错误，请将以下内容添加到 .htaccess 文件的顶部：
> 
> `Options -MultiViews`
> 
> 第一个通常可以解决问题。如果你在那里没有看到这个文件，那么创建一个空白的 php5.ini 文件添加第二个建议中列出的行。
> 
> 如果以上所有方法都不起作用，请保留您的更改，等待 24 小时。返回 youraddress.tld/downloader 并重试。您可能只是被缓存了，由于某种原因，它需要的时间比我习惯的要长一些。抬起你的下巴！
> 
> 如果上述方法均无效，请致电 GoDaddy 并让他们为您重命名，或确保您使用的是 PHP 5。

顺便说一句，这是谷歌上出现的“magento no input file specified”的第一个结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T19:43:56.880

如果您需要 PHP 5.3，GoDaddy 仅提供 FastCGI（截至目前），这就是导致此问题的原因（未指定输入文件）。要解决它并保持 PHP 5.3 的功能，请将以下三行放在`.htaccess`文件顶部：

```
addhandler x-httpd-php-cgi .php4
addhandler x-httpd-php5-cgi .php
addhandler x-httpd-php5-cgi .php5 
```

这基本上只处理 PHP-CGI 到 PHP（禁用 FastCGI）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-18T12:13:30.817

请将这行代码添加到根目录中 .htaccess 中 mod_rewrite 部分的底部。

```
RewriteRule ^index.php/(.*)$ [L] 
```

这解决了我与 Godaddy 服务器的问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-24T10:22:08.970

这是 Godaddy 托管帐户的常见问题。尝试这样做

1.  转到您的 godaddy 帐户并启动托管面板
2.  转到主机菜单 -> 更多 -> 文件扩展名管理
3.  编辑 .php5 和 .php 扩展名以在 php 5.2x 下运行

它应该可以解决问题。

# html - Box-Shadow :before, :after z-index 堆叠问题

> ID：11152428
> 
> 赞同：4
> 
> 时间：2012-06-22T08:10:06.933
> 
> 标签：html, z-index, css

所以我一直在玩两者的盒子阴影，我最近做了一些类似的事情并且效果很好。然后突然间它无缘无故停止工作！

我想做的是有一个简单的 div 框，下面有双阴影来产生折叠效果。

如果您在 jfiddle [http://jsfiddle.net/TJuDu/](http://jsfiddle.net/TJuDu/)上查看它，您可以看到我完成的所有代码。问题是 :before 和 :after 元素的堆叠，它的位置正确但堆叠错误，阴影在 .layout div 后面，而它们应该清楚地显示在 .box div 后面。如果我删除 z-index 值，我可以看到位于 .box div 上方的阴影。

问题是我在另一个页面上做了完全一样的事情并且它起作用了，然后突然它停止在那个页面上工作并且在我制作的这个例子中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T08:31:42.587

这个问题的第二个答案其实很好地解释了这个问题：[是否可以将伪元素的堆叠顺序设置在其父元素之下？](https://stackoverflow.com/questions/3032856/z-index-of-before-or-after-to-be-below-the-element-is-that-possibale)

您需要做的是`.box`像这样用作包装器：

```
<div class="box">
    <div class="pseudo-box">
        <h3>Awesome Box Title!</h3>
        <p class="box-text">This is a box!</p>
    </div>
</div> 
```

然后对于 CSS，将以下内容应用于`.box`：

```
position:relative;
z-index: 2; 
```

（或与 z-index 相关的任何内容），其余样式应应用于`.pseudo-box`，它应该有`position: relative;`但没有 z-index。

最后，`:before`并且`:after`应该与 相关联`.pseudo-box`，而不是`.box`

看到它在这里工作：http: [//jsfiddle.net/cchana/TJuDu/1/](http://jsfiddle.net/cchana/TJuDu/1/)

# android - 如何从适配器知道 ListView 的项目是否可见？

> ID：11152432
> 
> 赞同：14
> 
> 时间：2012-06-22T08:10:20.053
> 
> 标签：android, listview, adapter, baseadapter

我有一个连接到 ListView 的适配器，例如

```
mJournalAdapter = new JournalAdapter();
journalEntryList.setAdapter(mJournalAdapter); 
```

我想知道我的内部`JournalAdapter`是否有一些视图（ListView 的项目）是否可见，这可能吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-22T08:17:04.633

如果您知道该项目的位置，那么您可以使用

```
int last = listView1.getLastVisiblePosition();  

int first = listView1.getFirstVisiblePosition(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-23T21:13:21.720

你可以得到回调，覆盖`OnDetachedFromWindow()`；视图中的方法

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T08:18:07.667

您可以使用[`getFirstVisiblePosition()`](http://developer.android.com/reference/android/widget/AdapterView.html#getFirstVisiblePosition%28%29)将为您提供 ListView 中的第一个可见项目，因此您可以在您的情况下使用它。

# html - " " 锚标签在单击链接时不起作用

> ID：11152434
> 
> 赞同：0
> 
> 时间：2012-06-22T08:10:50.710
> 
> 标签：html, hyperlink, anchor

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:21:47.140

您的网页中有以下 jquery 代码，可防止单击加载新页面。

```
 $('#nav .thumb a').click(function(){
                       $('#changeImg').fadeTo(0.5,700);
                       $('#changeImg').attr('src',$(this).attr('href'));

                       return false;
               }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T09:03:36.900

我发现这是我的应用程序的一个 js 文件中的问题：

```
$('section [href^=#]').click(function (e) {
      e.preventDefault()
    }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-15T04:42:04.750

使用这个简单的代码（适用于谷歌浏览器，移动视图）

```
<a href="http://google.com/" onclick="location.replace('http://google.com/'),'_top'">Google</a> 
```

# jquery - 追加工作但删除在jQuery中不起作用

> ID：11152435
> 
> 赞同：0
> 
> 时间：2012-06-22T08:10:50.997
> 
> 标签：jquery, list, append

将列表 (anotherList) 附加到第二个列表 (id= myList-toggle) 的项目 (id -= l1) 所需的代码，但它应该在再次单击后将其删除。但是删除没有按预期工作。预计在这方面会有一些帮助。

```
 $('a#myList-toggle').click(function () {

                list.slice(0, counter()).slideToggle();

                 return false;

            });

            $('a#l1').click(function () {

                $('#l1').append($('#anotherList'));
               function () {
                   $('#al1').remove();
                };
                $('#anotherList').show();
                return false;

            });

        });

    </script>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
        <div>
        <a href="#" id="myList-toggle">GO Now!!!!!!!</a></div>
    <ul id="myList" style="margin-bottom: 0px">
        <li><a href="#" id="l1">item1</a></li>
        <li><a href="#" id="l4">item2</a></li>
        <li><a href="#" id="l5">item3</a></li>
        <li><a href="#" id="l6">item4</a></li>
        <li><a href="#" id="A1">item5</a></li>
        <li><a href="#" id="A2">item6</a></li>
        <li><a href="#" id="A3">item7</a></li>
        <li><a href="#" id="A4">item8</a></li>
    </ul>
    <ul id="anotherList">
        <li class="al1">Item</li>
        <li class="al1">Item</li>
        <li class="al1">Item</li>
        <li class="al1">Item</li>
    </ul>
</asp:Content> 
```

请告诉是否有任何其他简单的方法来附加和删除列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:21:05.870

您有一个没有名称的函数语句：

```
 function () {
               $('#al1').remove();
           }; 
```

这在 Javascript 中无效，并且您的代码可能会引发错误，从而停止您的脚本执行。

`id="al1"`您的 HTML 中没有元素，因此`$('#al1')`不选择任何内容。其他答案表明您需要`$('a#l1')`or `$('.al1')`，但尚不清楚您究竟要删除什么。

您似乎正在尝试切换`#anotherList`单击时的可见性`a#l1`。可能更好的方法是从头开始渲染`#anotherList`为元素的子`a#l1`元素，然后在`click`处理程序中执行`$('#anotherList').toggle()`。如果您希望它以隐藏状态开始，您可能需要将初始样式设置为`#anotherList`。`display: none`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:20:06.530

也许你输入了错误的东西？

```
$('a#l1').remove(); 
```

您键入`#al1`而不是`a#l1`

还是您想选择班级？

```
$('.al1').remove() 
```

**class**的选择器是`.`，**id**的选择器是`#`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:21:30.883

尝试更改`$('#al1').remove();`为`$('.al1').remove();`

另外，`function() {`之前删除是什么？

我认为没有必要。

编辑：

试试这个链接：http: [//jsfiddle.net/9dVXg/](http://jsfiddle.net/9dVXg/)

我认为这就是你想要发生的事情。

# java - 使用字符串作为开关参数

> ID：11152437
> 
> 赞同：0
> 
> 时间：2012-06-22T08:10:53.663
> 
> 标签：java, switch-statement

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:13:30.710

C 中的 Switch 语句不能接受字符串作为参数。

从 java 1.7 开始，java 中字符串的 switch 语句可用。他们不是以前的，因为这个块是从 c 功能建模的。java使用或不使用跳转表的事实取决于实现，结果也取决于值。

编辑：有关实施的详细信息，请参阅[Jon 提供的链接](https://stackoverflow.com/questions/338206/switch-statement-with-strings-in-java)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:54:14.270

Switch 语句可用于原始类型或枚举类型。Java 7 引入了另一种可以在 Switch 语句中使用的类型：String 类型。

公共无效过程（交易 t）{

```
 String status = t.getStatus();

        switch (status) {

        case NEW:

              newTrade(t);

              break;

        case EXECUTE:

              executeTrade(t);

              break;

        case PENDING:

              pendingTrade(t);

              break;

        default:

              break;

        }

  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:15:32.220

在 java 1.7 之前，您不能使用字符串作为开关参数。这是 java 1.7 中的一个特性，您也可以使用 String 作为 switch 参数。

# ssis - 删除 ssis 中额外的制表符行分隔符

> ID：11152439
> 
> 赞同：0
> 
> 时间：2012-06-22T08:11:05.450
> 
> 标签：ssis

我正在将数据从表加载到平面文件目标，其中我的平面文件目标是制表符分隔的。实际上，我的查询是 3 个查询的组合，我使用临时表将这 3 个查询合并为一个查询。

我附上了我的输出摘录。实际上对于数据部分 1、部分 2，我只有 7 列，而对于第 4 部分，我有 10 列。

现在，我想从第 1 节和第 2 节数据中删除额外的选项卡。

我还附加了所需的输出。我怎样才能删除额外的标签。

![我的输出文件](../Images/ac556e5395ee0ab6fd5af36ff488e6d7.png)

![所需格式](../Images/6e6397641dd3c80545d99ecf95229e3f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:42:44.237

想到了一对选择

1）在派生列转换中将所有字段连接到一个大字符串中，您的平面文件连接管理器现在会吐出一列宽数据

2）在数据流之后添加一个脚本任务，打开文件并使用正则表达式，可能是一个字符串。替换就足够了，去除尾随值

# javascript - 当 asp.net 树视图节点展开/折叠时，不应调用 onbeforeunload javascript 函数

> ID：11152440
> 
> 赞同：0
> 
> 时间：2012-06-22T08:11:06.107
> 
> 标签：javascript, jquery, asp.net, jquery-ui, javascript-events

对于未保存的更改，如果用户想要离开页面，则调用“onbeforeunload”事件以显示确认弹出窗口，但仅在 asp.net 树视图展开或折叠时调用此方法并显示弹出窗口。那么如何在树视图的展开或折叠时停止调用此方法。理想情况下，只有当我单击任何执行回发的节点时，才应为 asp.net treeview 调用它。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:17:00.997

在treeview body div中添加onClick，添加一个名为disableOnBeforeUnload的函数

```
<.... onClick="disableOnBeforeUnload();"> 
```

`

```
var OnBeforeUnloadDisabled = false;
function disableOnBeforeUnload()
{
  OnBeforeUnloadDisabled = true;
}

window.onbeforeunload = function() { 
  if(!OnBeforeUnloadDisabled)
  {
     //your onbeforeunload code.
  }
}; 
```

**注意：**未经测试的代码，我想你理解这个想法。

# ios - 从字符串转换日期的 NSDateformatter 问题

> ID：11152443
> 
> 赞同：0
> 
> 时间：2012-06-22T08:11:11.440
> 
> 标签：ios, nsdateformatter

我从服务器获取日期字符串为`2012-06-21 18:13:33 -04:00`

*   为 dateformatter 从字符串中检索日期设置的正确日期格式是什么。

*   我曾尝试使用格式`[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss z"];`
    ，但我得到了 nil 作为回报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:08:22.123

[文档](http://unicode.org/reports/tr35/tr35-10.html)说你可以使用 1..3 Z。那么这个怎么样：

```
@"yyyy-MM-dd HH:mm:ss ZZZ" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:12:48.907

Paul de Lange 建议的方法行不通。这就是原因： [iPhone NSDateFormatter Timezone Conversion](https://stackoverflow.com/questions/3094730/iphone-nsdateformatter-timezone-conversion)

简而言之，您将不得不更改源数据，因为这是一种非标准格式。

# bash - Bash mv 不是目录

> ID：11152444
> 
> 赞同：2
> 
> 时间：2012-06-22T08:11:12.097
> 
> 标签：bash, mv

我的脚本的一部分是这样的：

```
while read line  
do 
code=`echo ${line}  | awk  '{print $1}'`
awk -f ${supscript}/rearrange.sh < ${base}/${code}  
mv temp_output* "$code"temp_output* 
done < filelist 
```

脚本正在运行；唯一的问题是，当它尝试重命名文件时，我收到以下错误消息：

```
mv: target `pollcodetemp_output*' is not a directory 
```

也许它与IFS有关。我尝试在脚本的开头将其指定为：

```
IFS='
' 
```

但它不起作用。我使用的是 Windows 文本编辑器，但我已经删除了 CR。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T08:14:28.920

最有可能的是，您只需要：

```
mv temp_output* "$code" 
```

这会将`temp_output*`当前目录中命名的文件移动到变量中指定的目录`$code`。

但是，如果`$code`是文件，则需要查找`rename`命令（有几个版本，语法不同），或者需要使用内部循环：

```
for file in temp_output*
do mv "$file" "$code$file"
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T08:14:00.940

您正在尝试将多个文件移动到一个不是目录的名称，这是不可能的。发生这种情况是因为您似乎试图从通配符模式重命名为*通配符*模式，这也是不可能的。我不会猜测你到底想要完成什么，所以我不能给你任何额外的建议。

# c++ - char 类型的编译时间一致哈希

> ID：11152446
> 
> 赞同：4
> 
> 时间：2012-06-22T08:11:24.493
> 
> 标签：c++, hash, c++11, user-defined-literals

我想以`Symbol`与 ruby​​ 相同的方式实现。

为此，我创建了一个用户定义的文字，它返回对应`std::hash`的a `std::basic_string<T>`。

代码很棒，但是当我在[某处](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3333.html#fingerprinting)读到时，哈希函数在同一程序的多次执行中可能不一致。此外，我想在编译时进行此计算，这是 1) 不支持`std::hash`和 2) 如果`std::hash`返回值更改会破坏代码。

所以我写了下面的实现，基于[java.lang.String.hashCode](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#hashCode%28%29)实现。

```
typedef size_t symbol;

template<typename CharT>
constexpr size_t constant_hash(const CharT* p, size_t h = 0) noexcept
{
    return (*p == 0) ? h : constant_hash(p + 1, h * 31 + static_cast<size_t>(*p));
}

constexpr symbol operator "" _sym (const char* p, size_t n) noexcept
{
    return constant_hash(p);
} 
```

**我的问题是**：这个实现有什么问题吗？

我只能在 GCC 4.7.1 上对其进行测试，我想知道它是否符合标准并且也应该在其他编译器上工作。

我问这个是因为以前的实现是在 GCC 上工作的，但是如果二进制文件是用 clang++ 编译的，则会导致段错误（我认为增量运算符的未定义行为问题）。

提前致谢

**编辑**

使用 clang++（感谢 KennyTM）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:27:33.527

注意：n3333 是针对 C++17 的提议。虽然我不认为 C++11 要求哈希在多次运行时产生相同的结果，但实际上，我相信所有当前的实现都可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T08:53:00.837

没有 UB，只要字符串有`'\0'`终止符，它就可以正常工作。请注意，`constexpr`评估不能调用 UB；*在运行时导致 UB 的算术或指针操作需要在constant-expression*的上下文中产生编译错误。

请注意，这`static_cast`是不必要的；操作数将`char`提升为`size_t`.

此外，乍一看，哈希函数看起来不太好，因为`h * 31`它只是`( h << 5 ) - h`. 您可能会选择一个更大的数字，其中 1 随机分布在整个二进制值中。但另一方面，他们可能试图变得聪明，因为 ASCII 的低 5 位具有最大的熵，这消除了不同长度的短字符串之间发生冲突的可能性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T16:13:43.383

在当前活跃的 C++ 标准中，散列函数的定义通常以这种方式编写，以便为特定领域的实现提供更多可能性，而不是要求以特定方式执行散列。例如，它允许使用池化字符串并将池实例的内存位置用作哈希值（顺便说一句，这就是 ruby​​ 处理其字符串及其哈希的方式，这导致了一些[有趣的问题](https://bandcamptech.wordpress.com/2010/01/21/how-not-to-generate-a-crc/)）。如果您正在计算数据的散列，而不是参考，那么该值将是稳定的 - 除非您发现了某种形式的数学，而常量表达式不是。

基本上，在这种情况下，“可能不”是*允许*事物以特定方式运行，而不是说明可能发生的事情。

也就是说，如果您使用`std::hash`，则无法保证执行之间的值始终相同（并且将来，如果采用 n3333 ，则任何依赖于它的代码*都会中断*），因此最好定义自己的如果您需要稳定的哈希，请使用稳定的哈希函数。

# php - 使用值获取数组的键

> ID：11152452
> 
> 赞同：-1
> 
> 时间：2012-06-22T08:11:51.863
> 
> 标签：php, arrays

以下面的数组为例。

```
$example = array("India", "Canada", "America"); 
```

我手中有“印度”的价值。在这种情况下，我需要返回它的 0 键。那么我该怎么做呢？请帮帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T08:13:19.443

当然，你可以这样做：

```
$key = array_search('India', $example); 
echo $key; 
```

此外，您可以构建一个函数来查找数组中键的数字索引：

```
function array_key_index($arr, $key) {
    $i = 0;
    foreach(array_keys($arr) as $k) {
        if($k == $key) return $i;
        $i++;
    }
} 
```

有关更多信息，请查看[http://php.net/manual/function.array-search.php](http://php.net/manual/function.array-search.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T08:13:52.840

使用[`array_search`](http://php.net/array_search)：

```
$example = array("India", "Canada", "America");
$key = array_search('India', $example);
echo $key; // outputs 0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T08:14:01.533

你可以使用`array_search`

```
$key = array_search('India', $example); // returns 0 
```

有关详细信息，请参阅手册：[http ://www.php.net/manual/en/function.array-search.php](http://www.php.net/manual/en/function.array-search.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-22T08:13:34.603

正确查看[PHP 手册](http://php.net/manual/en/ref.array.php)会发现[`array_search`](http://php.net/array_search)...

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-22T08:13:39.367

array_search() 是你的朋友。

# objective-c - 在 Cocos2D 中连接 CCSprite

> ID：11152453
> 
> 赞同：0
> 
> 时间：2012-06-22T08:12:01.927
> 
> 标签：objective-c, ios, xcode, cocos2d-iphone

我目前正在研究 cocos2d 中的有趣示例。我有一个精灵，那是一条线，它只是在我的背景上移动（在 CCAction 的帮助下）。但这条线是 4000 像素宽。iOS 4.x 支持不超过 2048 x 2048 像素。所以我决定把这条线切成两段。所以，现在我有两张图像，1920 x 1920。现在我想做和以前一样的事情。这是非常简单的代码：

```
CCSprite *abstractFigureLine = [CCSprite spriteWithFile:@"Abstract Figures Line.png"];
    abstractFigureLine.position = CGPointMake(960.0f, 160.0f);
    [self addChild:abstractFigureLine z:1];
    CCAction *moveAbstractFigureLineAction = [CCMoveTo actionWithDuration:10.0f position:CGPointMake(-900.0f, 160.0f)];
    [abstractFigureLine runAction:moveAbstractFigureLineAction]; 
```

现在我需要插入另一个精灵的图像，也很简单，但是有没有办法将这两个精灵连接到一个精灵中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:32:21.313

为您的精灵创建一个基本节点，将您的精灵添加到此节点，并在此节点上运行操作：

```
CCSprite *abstractFigureLine1 = [CCSprite spriteWithFile:@"Abstract Figures Line.png"];
abstractFigureLine.position = CGPointMake(0, 0);

CGSize lineSize = [abstractFigureLine1 contensSize];
CCSprite *abstractFigureLine2 = [CCSprite spriteWithFile:@"Abstract Figures Line.png"];
abstractFigureLine.position = CGPointMake(lineSize.width, 0);

CCNode *base = [[CCNode alloc] init];
[base setPosition: CGPointMake(960.0f, 160.0f)];

[base addChild:abstractFigureLine1 z:1];
[base addChild:abstractFigureLine2 z:1];

[self addChild:base z:1];

CCAction *moveAbstractFigureLineAction = [CCMoveTo actionWithDuration:10.0f position:CGPointMake(-900.0f, 160.0f)];
[base runAction:moveAbstractFigureLineAction]; 
```

请注意，CCSprite 的位置 - 是它的中心，但 CCNode 的位置 - 是它的左下角。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:18:31.070

创建一个具有两个精灵的类，并在第一个精灵的动作结束时开始第二个恶意的动作。

# dynamic - 如何在 Powershell 中传递动态参数？

> ID：11152456
> 
> 赞同：12
> 
> 时间：2012-06-22T08:12:17.697
> 
> 标签：dynamic, powershell, parameters

我想用动态数量的参数调用现有的命令行开关。

因此，我不想这样做（以 write-host 为例），而是想以聪明的方式来做。

```
# these are the dynamic parameters which maybe get passed into my function or script
# they would be $null be default of course
$forecolor = 'Green'
$newline = $true

# now build the "dynamic" write-host...
if ($forecolor) {
    if ($newline) {
        write-host -fore $forecolor "Hello world"
    }
    else {
        write-host -fore $forecolor "Hello world" -nonewline
    }
}
else {
    if ($newline) {
        write-host "Hello world"
    }
    else {
        write-host "Hello world" -nonewline
    }
} 
```

**这当然是非常丑陋的。帮我把它变得更漂亮！**

我已经尝试设置`$forecolor = '-fore Green'`只输出*"-fore Green Hello world"*。我可以考虑将参数列表传递给函数，并为列表中的每个参数添加相应的参数 - 我只是不知道如何保存参数。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-22T08:18:50.967

您可以将变量作为参数传递给`Write-Host`：

```
Write-Host -Fore $forecolor -NoNewLine:(!$newline) 'Hello World' 
```

对于真正动态的方式，您可以使用哈希表：

```
$params = @{ NoNewLine = $true; ForegroundColor = 'Green' } 
```

然后使用 splat 运算符

```
Write-Host @params Hello World 
```

在以这种方式调用之前，您可以根据需要将参数及其值添加到哈希表中`Write-Host`。

# objective-c - 从 NSString 中删除所有重复的字符

> ID：11152459
> 
> 赞同：2
> 
> 时间：2012-06-22T08:12:25.817
> 
> 标签：objective-c, nsstring, duplicate-removal

如何使用标准方法（无需通过源字符串手动迭代）来做到这一点？

PS：最后我想得到源字符串的排序字符。我尝试使用`NSCharacterSet`，但找不到将字符集转换为字符串的方法（不迭代集合）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T08:34:44.950

对此没有内置方法，但很容易迭代字符串的字符并构建一个没有重复的新字符串：

```
NSString *input = @"addbcddaa";
NSMutableSet *seenCharacters = [NSMutableSet set];
NSMutableString *result = [NSMutableString string];
[input enumerateSubstringsInRange:NSMakeRange(0, input.length) options:NSStringEnumerationByComposedCharacterSequences usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {
    if (![seenCharacters containsObject:substring]) {
        [seenCharacters addObject:substring];
        [result appendString:substring];
    }
}];
NSLog(@"String with duplicate characters removed: %@", result);
NSLog(@"Sorted characters in input: %@", [seenCharacters.allObjects sortedArrayUsingSelector:@selector(compare:)]); 
```

这会产生字符串`"adbc"`（删除重复项）和唯一字符的排序数组`["a", "b", "c", "d"]`。

# android - Android TCP 快速启动配置

> ID：11152462
> 
> 赞同：1
> 
> 时间：2012-06-22T08:12:46.700
> 
> 标签：android, tcp, download

我目前正在开发一个为 Android 创建 Internet 下载管理器的项目。我打算通过将正常的 tcp 慢启动更改为 tcp 快速启动来加快下载速度。尽管我进行了研究，但我找不到如何更改 Android 中的 tcp 的解决方案。我仍然是 Android 编程的菜鸟。请帮助我找到如何实现它，提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-18T08:19:33.333

从 4.4 版开始，Android 不支持 TCP 快速启动。因此，这是不可能的:(

# apache - 如何在 apache 处理之前将 URL 参数从 arg-1 更改为 arg_1？使用.htaccess？

> ID：11152467
> 
> 赞同：0
> 
> 时间：2012-06-22T08:12:58.790
> 
> 标签：apache, mod-rewrite, url-rewriting

我有一个 CMS，它接受 url 参数以返回具有此结构的结果列表：

website.com/argument_1/argument_2。

为了让网站返回结果，参数必须有下划线。

但是，为 url 结构生成的代码是

website.com/argument-1/argument-2。我需要保留这个 url 结构，但是，当有人点击链接时，我需要通过 apache 将它传递给 PHP，并带有下划线。

我希望这是有道理的。这是通过 .htaccess 和重写规则完成的吗？我以前从未写过任何类似的东西，因此感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:36:20.617

您绝对应该在 PHP 中执行此操作。这是一个可行的解决方案，但需要为 URL 中的每个破折号通过 RewriteRule，所以我不推荐它。但不管：

```
RewriteEngine On
RewriteRule ^(.*)-(.*)$ $1_$2 [QSA] 
```

为了澄清这里会发生什么，如果请求是 for `http://www.example.com/argument-1/argument-2/argument-3`，`RewriteRule`则将运行多次，因为它每次只能替换一个破折号。所以 URL 将被转换成这样：

```
通过 1：http://www.example.com/argument-1/argument-2/argument_3
通过 2：http://www.example.com/argument-1/argument_2/argument_3
通过 3：http://www.example.com/argument_1/argument_2/argument_3

```

至于`$1`and `$2`，它们指的是正则表达式中带括号的组件。正则表达式 ,`^(.*)-(.*)$`分解如下：

*   `^`- 匹配 URI 的开头
*   `(.*)`- 匹配（并捕获）任意数量的字符，这将`$1`在替换中
*   `-`- 匹配破折号
*   `(.*)`- 匹配（并捕获）任意数量的字符，这将`$2`在替换中
*   `$`- 匹配 URI 的结尾

所以第一次通过, `$1`will be`/argument-1/argument-2/argument`和`$2`will be `3`。然后替换在它们两个之间放置一个下划线并创建一个新的 URI：

```
/argument-1/argument-2/argument_3 
```

然后它再次运行，因为正则表达式仍然匹配新的 URI（因为它有 a `-`）并且`$1`is`/argument-1/argument`和`$2`is `2/argument_3`。然后替换在它们两个之间放置一个下划线并创建一个新的 URI：

```
/argument-1/argument_2/argument_3 
```

然后它再次运行，因为正则表达式仍然匹配新的 URI（因为它有 a `-`）并且`$1`is`/argument`和`$2`is `1/argument_2/argument_3`。然后替换在它们两个之间放置一个下划线并创建一个新的 URI：

```
/argument_1/argument_2/argument_3 
```

然后 Apache 继续使用这个 URI，因为正则表达式不再匹配（因为没有更多的破折号）。

# jsf - 使 @ApplicationScoped JSF 托管 bean 可序列化是一种不好的做法？

> ID：11152477
> 
> 赞同：1
> 
> 时间：2012-06-22T08:13:30.753
> 
> 标签：jsf, jsf-2, scope

我们在基于 JSF 的 Java Web 应用程序中不断收到以下异常，谷歌搜索表明它可能是由应用程序范围的 jsf 托管 bean 可序列化引起的。

```
 java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: org.apache.catalina.session.StandardSessionFacade
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at org.apache.catalina.session.StandardSession.readObject(StandardSession.java:1509)
    at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:998)
    at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:394)
    at org.apache.catalina.session.StandardManager.load(StandardManager.java:321)
    at org.apache.catalina.session.StandardManager.start(StandardManager.java:648)
    at org.apache.catalina.core.ContainerBase.setManager(ContainerBase.java:446)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4631)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)
    at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:601)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.io.NotSerializableException: org.apache.catalina.session.StandardSessionFacade
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at org.apache.catalina.session.StandardSession.writeObject(StandardSession.java:1585)
    at org.apache.catalina.session.StandardSession.writeObjectData(StandardSession.java:1015)
    at org.apache.catalina.session.StandardManager.doUnload(StandardManager.java:528)
    at org.apache.catalina.session.StandardManager.unload(StandardManager.java:469)
    at org.apache.catalina.session.StandardManager.stop(StandardManager.java:678)
    at org.apache.catalina.core.StandardContext.stop(StandardContext.java:4882)
    at org.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:936)
    at org.apache.catalina.startup.HostConfig.undeployApps(HostConfig.java:1359)
    at org.apache.catalina.startup.HostConfig.stop(HostConfig.java:1330)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:326)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1098)
    at org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1110)
    at org.apache.catalina.core.StandardEngine.stop(StandardEngine.java:468)
    at org.apache.catalina.core.StandardService.stop(StandardService.java:604)
    at org.apache.catalina.core.StandardServer.stop(StandardServer.java:788)
    at org.apache.catalina.startup.Catalina.stopServer(Catalina.java:408)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.stopServer(Bootstrap.java:338)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:416) 
```

在某些情况下，使用 @ManagedProperty 注释将有问题的托管 bean 注入会话范围的 bean。

这是一种不好的做法，还是我没有得到的其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:50:11.970

嗯...据我了解，`@ApplicationScoped`只要部署了应用程序，托管 bean 就会存在。换句话说，我认为您不需要在需要时存储和恢复 bean。它应该一直在那里。

与其将`@ApplicationScoped`bean 作为bean 注入`@ManagedProperty`，`@SessionScoped`不如尝试将其注入`@RequestScoped`bean，然后将该`@RequestScoped`bean 注入`@SessionScoped`bean。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:08:45.230

这是因为 JSF 托管 bean 工具没有与 Java 序列化集成。如果aBean 依赖于anotherBean，则将anotherBean 的实例注入到aBean 中。由于序列化一个对象也会序列化它的字段，anotherBean 也会被序列化，这充其量是浪费内存，最坏的情况是很难实现（因为它可能具有不可序列化的依赖项......）。

像 CDI 或 Spring 这样的依赖注入容器将通过将委托给当前 anotherBean 的可序列化代理注入到 aBean 中来解决该问题。这就是为什么应该将支持 bean 保存在不同的 DI 容器中的原因之一。（在 JSF 中使用 CDI 或 Spring 管理的 bean 非常容易）。

编辑：我对被锁定在 Java EE 5 表示同情。在这种情况下，您可能会：

1.  不要将对应用程序范围的 bean 的引用保留为依赖项，而是在需要时按名称查找它。
2.  注入应用程序范围 bean 的可序列化代理（或使应用程序范围 bean 本身可序列化）。这将涉及挂钩到序列化机制以按名称序列化 bean，并在反序列化时通过查找重建它。
3.  将 bean 一分为二：一个对象用于依赖项（请求范围），另一个对象用于状态（会话范围）。就我个人而言，我发现这对于有意义的支持豆的封装来说既麻烦又令人望而却步，但这是一个口味问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T13:43:46.980

是 Tomcat的`org.apache.catalina.session.StandardSessionFacade`实现`HttpSession`。因此，此异常表明您在一个视图/会话范围的托管 bean 中具有以下属性：

```
private HttpSession session; 
```

这是完全错误的。你不应该那样做。同样的故事适用于`FacesContext`及其`ExternalContext`所有工件。它们永远不应该被声明为托管 bean 的属性，而总是在线程本地范围内声明（即在与您需要它们的地方完全相同的方法块内）。

# mysql - 通过 MYSQL 表循环的最佳性能方法

> ID：11152481
> 
> 赞同：0
> 
> 时间：2012-06-22T08:13:57.307
> 
> 标签：mysql

我正在寻找遍历 USERS 表，并且对于根据我的 where 子句选择的每个用户，在 LOOP 中执行一堆 mysql 查询，包括创建临时表、使用准备语句等

应该这样做，就性能而言，最好的方法是什么。使用 while、for each、for、repeat ?

eg.（伪代码）

```
foreach user_name in (select user_name from users where user_type = 'SP' and active = 'Y')
do
    set @l_query1 = concat("create temp_table_t1 select * from ...")
    PREPARE ..
    EXECUTE ...

    set @l_query2 = ... 
    ....
    .... etc .. 
done 
```

好的，我有一个表 users，其中 pK = user_name。

所以，这个查询将很快执行，我只需要循环通过这个结果集，并在循环中执行剩余的 mySQL 查询。我如何通过简单选择的结果集循环？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:25:06.870

*while*、*for-each*、*repeat*等在性能上没有区别。

如果您正在寻找性能提升，请考虑在哪里可以减少代码在数据库上执行的查询数量。例如，为所有用户运行一次查询而不是*为每个用户*运行一次查询将有很大帮助。

# matlab - 使用 textscan 从文件中读取数据并使用 plotyy 绘制直方图/ecdf

> ID：11152489
> 
> 赞同：0
> 
> 时间：2012-06-22T08:14:20.640
> 
> 标签：matlab, matlab-figure

我尝试将具有 20x20 数据的文本文件读入变量 C，并尝试在左侧 Y 轴上绘制直方图，在右侧 X 轴上绘制 ecdf/ksdensity。

使用 textscan 将数据读入 400x1 数组。但是，当我尝试调用 plotyy 来绘制直方图时，下面的代码返回

```
Error using plot
Vectors must be the same lengths. 

Error in pt (line 11)
axes = plotyy(x,C{1},x,C{1}); 
```

我想这是由于 C{1}。但不知道如何解决它。我是matlab新手，有人能指出执行上述操作的正确方法吗？

```
fid = fopen('t1_error.txt','r');
C = textscan(fid, '%.3f');            
fclose(fid);

disp(C{1});

x = -1:7;    % <-- change to x = length(C{1});  then histogram is plotted.
axes = plotyy(x,C{1},x,C{1});
hold on
hist(axes(1), C{1}, x);
ylim(axes(1),'auto');
set(axes(1),'mode','auto');
hold off 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:42:53.810

的长度`x`不等于 的长度`C{1}`。尝试`x = 1:length(C{1})`或`x = -1:8/length(C{1}):7`。

# wpf - 多触发条件不适用于数据网格？

> ID：11152504
> 
> 赞同：0
> 
> 时间：2012-06-22T08:14:54.763
> 
> 标签：wpf, wpfdatagrid, multidatatrigger

我有以下数据网格，如果网格设置为只读但不知道如何设置条件，我想为 cover = false 的行着色。问题似乎与第一个条件有关，其中cover = false，好像我删除了这个条件另一个正在工作

```
 <DataGrid ItemsSource="{Binding AvailableRows}" AlternatingRowBackground="Lavender" Grid.Row="1"
                  IsReadOnly="{Binding IsEditable, Converter={StaticResource InvertedBoolConverter}}" CanUserResizeColumns="True">
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding TabName}" Header="Tab Name" CanUserSort="False" Width="1.5*">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Binding="{Binding GroupSummaryTabRowDescription.Description}" Header="Benefit" CanUserSort="False" Width="2*" IsReadOnly="True">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridCheckBoxColumn Binding="{Binding Cover, Converter={StaticResource YNToBoolConverter}}" Header="Cover" CanUserSort="False" Width="1*"/>
                <DataGridTextColumn Binding="{Binding RuleDescription, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Header="Rule" CanUserSort="False" Width="3.5*">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Binding="{Binding AdditionalInfo, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Header="Additional Info" CanUserSort="False" Width="4*">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
            </DataGrid.Columns>
            <DataGrid.RowStyle>
                <Style TargetType="DataGridRow">
                    <Style.Triggers>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding Cover}" Value="False"/>
                                <Condition Binding="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=IsReadOnly}"  Value="True"/>
                            </MultiDataTrigger.Conditions>
                            <Setter  Property="Foreground" Value="Red" />
                        </MultiDataTrigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.RowStyle>
        </DataGrid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:34:13.910

我在上面注意到，当您将 Cover 绑定到复选框列时，您使用了转换器

```
Converter={StaticResource YNToBoolConverter}} 
```

暗示 Cover 属性不是布尔值。您是否在条件绑定上尝试过相同的转换器？

# javascript - 在 Javascript visualforce 页面中获取 [Object Object] 代替 String

> ID：11152505
> 
> 赞同：0
> 
> 时间：2012-06-22T08:15:06.107
> 
> 标签：javascript, salesforce, apex-code

这是我的控制器类：

```
global class MyJSController {
    public static String objj { get; set; }

    @RemoteAction
    public static String getObject_name(){
        return objj;
    }
    @RemoteAction
    public static void setObject_name(String s){
        objj=s;
    }

    public String accountName { get; set; }

    public static Account account { get; set; }

    public static List<Order__c> order{get;set;}

    public static List<Units__C>unit{get;set;}

    public static List<Widget__c> widget{get;set;}

    public MyJSController() { 
         setObject_name('Order');
    } // empty constructor

    @RemoteAction
    global static Account getAccount(String accountName) {
        account = [SELECT id, name, phone, type, numberofemployees
                   FROM Account WHERE name = :accountName];
        return account;
    }

    @RemoteAction
    global static Order__c[] getOrder(){
        return ([SELECT id,Name,Date__c,Inbound_Orders__c,Outbound_Orders__c from Order__c]);
    }

    @RemoteAction
    global static List<Units__c> getUnits(){
        unit=[SELECT id,Name,Date__c,Inbound_Units__c,Outbound_Units__c from Units__c];
        return unit;
    }

    @RemoteAction
    global static List<Widget__c> getWidget(){
        widget=[SELECT id,Name,Date__c,Inbound_Widgets__c,Outbound_Widgets__c from Widget__c];
        return widget;
    }
} 
```

这是我的visualforce页面：

```
<apex:page controller="MyJSController">
<apex:form >
<apex:selectList id="chooseColor" value="{!object_name}" size="1" onchange="initCharts()" >
<apex:selectOption itemValue="Order" itemLabel="Order"/>
<apex:selectOption itemValue="Unit" itemLabel="Unit"/>
<apex:selectOption itemValue="Widget" itemLabel="Widget"/>
</apex:selectList>
</apex:form>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">

        // Load the Visualization API and the piechart package.
        google.load('visualization', '1.0', {'packages':['corechart']});

        // Set a callback to run when the Google Visualization API is loaded.
        google.setOnLoadCallback(initCharts);

        function initCharts() {        
          // Following the usual Remoting syntax
          // [<namespace>.]<controller>.<method>([params...,] <callbackFunction>(result, event) {...}
          // namespace : abhinav
          // controller : GoogleChartsController
          // method : loadOpps

          MyJSController.getOrder(
                 function(result, event){ 
                     // load Column chart
                    var data = new google.visualization.DataTable();
        data.addColumn('string', 'Topping');
        data.addColumn('number', 'Slices');

         for(var i =0; i<result.length;i++){
                        var r = result[i];
                        data.addRow([r.Name,r.Inbound_Orders__c]); 
      }
      var data1=new google.visualization.DataTable();
      data1.addColumn('string','Topping');
      data1.addColumn('number','Slices');
      for(var i=0;i<result.length;i++)
      {
      var r=result[i];
      data1.addRow([r.Name,r.Inbound_Orders__c]);

      }

        // Set chart options
        var options = {'title':'How Much Pizza I Ate Last Night',
                       'width':400,
                       'height':300};

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
        var chart1= new google.visualization.AreaChart(document.getElementById('chart_hh'));
        chart.draw(data, options);
        chart1.draw(data1,options);   }, {escape:true});

          MyJSController.getObject_name(function(event,result){
         alert('Hello'+result);
        document.getElementById('dddd').innerHTML=String.ValueOf(result);  },{escape:true});

          }

</script>
<div id="chart_div" ></div>
<div id="chart_hh"></div>
<div id="dddd">Helloojjfs</div>
</apex:page> 
```

当我调用`MyJSController.getObject_name`脚本标签（脚本标签中的最后第四行）时，我得到`[Object Object]`. 但是我需要`String Order`在构造函数中初始化它。你能告诉我我错在哪里并纠正这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:32:44.787

I believe the issue is that your argument names are backwards. It should be:

```
MyJSController.getObject_name(function(result, event) 
```

So the alert you are getting of an object is actually the event object.

# c# - 如何将用户帐户关联到域用户

> ID：11152511
> 
> 赞同：1
> 
> 时间：2012-06-22T08:15:53.117
> 
> 标签：c#, asp.net-mvc, active-directory

我正在开发一个*Intranet 站点*项目（`ASP.NET MVC`项目）。如何将域中的用户与其帐户（`UserAccount`实体）相关联：

```
public class UserAccount {
    // normally inherited from an abstract entity
    public Guid Id { get; set; }
    public String FullName { get; set; }
    public String Password { get; set; }
    public Guid EmployeeId { get; set; }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:34:46.063

如果您询问如何查询 Active Directory 以获取域用户详细信息并填充 UserAccount 类，您可以使用以下内容：

```
public UserAccount GetUserAccount(string username)
{
    using (var context = new PrincipalContext(ContextType.Domain))
    using (var user = UserPrincipal.FindByIdentity(context, username))
    {
        return new UserAccount
        {
            Id = user.Guid,
            FullName = user.Name,
            Password = "FORGET ABOUT IT, YOU CAN'T RETRIEVE THE PASSWORD",
            EmployeeId = user.EmployeeId
        };
    }
} 
```

但是，如果您使用 Windows 身份验证，当然已经有一个可以使用的[ActiveDirectoryMembershipProvider 。](http://msdn.microsoft.com/en-us/library/system.web.security.activedirectorymembershipprovider.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:04:26.073

该`Guid`属性映射到`objectGuid`AD 中，在森林边界内的用户的生命周期内不会更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:36:21.423

我相信您应该使用[SAM-Account-Name](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679635%28v=vs.85%29.aspx)来引用 AD 中的用户对象。

# ruby-on-rails - 我的 rails 应用程序中的控制器和路由问题

> ID：11152513
> 
> 赞同：0
> 
> 时间：2012-06-22T08:16:00.677
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个应用程序，用户可以在其中创建课程，并且每门课程都有_one syllabus。我怎么能去配置我的课程和教学大纲（我知道它是教学大纲，但显然 Rails 没有）控制器和我的路线，所以在课程页面上有一个链接来创建或显示课程的教学大纲，以及一个返回的链接显示教学大纲页面中的课程？

在我的路线中，我有：

```
 resources :courses do
   resources :syllabuses
   member do
  put :enroll #this is so users can enroll in the course
 end
end 
```

目前，因此 course_id 将保存在我的课程控制器的教学大纲表中，我有：

```
def create_syllabus
   @course = Course.find(params[:id])
   @syllabus = @course.build_syllabus(params[:syllabus])
  if @syllabus.save
   redirect_to @syllabus, notice: "Successfully created syllabus."
  else
   render :new
  end
end 
```

然后在我的课程显示页面中，我有：

```
 <section>
  <% if (current_user.courses.includes(@course) || 
   current_user.coursegroups.find_by_course_id_and_role(@course.id, "admin")) %>
   <%= render 'create_syllabus' %>
   <% end %>
  </section> 
```

然后在我的 create_syllabus 表单中（在我的课程视图文件夹中），我尝试使用以下方法开始：

```
 # I have @course = Course.find(params[:id]) defined in show in the 
                                                    #courses_controller 
   <%= form_for @course.create_syllabus do |f| %>
   <%= form_for @course.syllabus.create_syllabus do |f| %>
   <%= form_for @course.syllabus.create do |f| %> 
```

我得到了每个未定义的方法错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:32:19.027

如果您想在特定的操作中创建一个新`syllabus`的，您可以将其添加到您的控制器和视图中：`show``course`

**course_controller.rb**

```
@course = Course.find(params[:id])

# Build a new @syllabus object, only if there is none for the current course
unless @course.syllabus
  @syllabus = @course.build_syllabus
end 
```

**意见/课程/show.html.erb**

```
# Show the syllabus name if there is one, or show the form to create a new one

<% if @course.syllabus.name %>
  <p>Syllabus: <%= @course.syllabus.name %></p>
<% else %>
  <p>Create Syllabus:</p>
  <%= form_for([@course, @syllabus]) do |f| %>
    <div class="field">
      <%= f.label :name %><br />
      <%= f.text_field :name %>
    </div>
    <div class="actions">
      <%= f.submit %>
    </div>
  <% end %>
<% end %> 
```

**教学大纲控制器.rb**

```
def create
  @course = Course.find(params[:course_id])

  # Build new syllabus object based on form input
  @syllabus = @course.build_syllabus(params[:syllabus])

  if @syllabus.save
    # redirect to /course/:id
    redirect_to @course, notice: 'Syllabus was successfully created.' }
  end
end 
```

**课程.rb**

```
class Course < ActiveRecord::Base
  attr_accessible :name
  has_one :syllabus
end 
```

**教学大纲.rb**

```
class Syllabus < ActiveRecord::Base
  belongs_to :course
  attr_accessible :name, :course_id
end 
```

我遗漏了一些内容，但您仍应包括：

*   验证
*   如果出现问题，重新渲染表单
*   把东西拉出来
*   修复错误的代码，例如`if @course.syllabus.name`
*   将`if/else`逻辑提取到助手中
*   …</li>

# css - 仅使用 CSS：在整个文档中选择第一次出现的类

> ID：11152526
> 
> 赞同：6
> 
> 时间：2012-06-22T08:17:01.753
> 
> 标签：css, css-selectors

我们有一个这样的 DOM：

```
<div class="outer">
    <div class="inner"> <!--// No "copyright" in this node //-->
        <div class="content">...</div>
    </div>
    <div class="inner">
        <div class="content">...</div>
        <div class="copyright">...</div> <!--// DISPLAY THIS ONE //-->
    </div>
    <div class="inner">
        <div class="content">...</div>
        <div class="content">...</div>
        <div class="content">...</div>
        <div class="copyright">...</div> <!--// Hide this one //-->
    </div>
    <div class="inner">
        <div class="content">...</div>
        <div class="content">...</div>
        <div class="copyright">...</div> <!--// Hide this one too, etc. //-->
    </div>
    <!--// etc. //-->
</div> 
```

必须隐藏所有具有“版权”类的元素，但第一个元素除外。

我们试图应用这种[方法](https://stackoverflow.com/questions/3615518/css-selector-to-select-first-element-of-a-given-class)，但不幸的是没有成功。它必须是唯一的 CSS 解决方案。任何想法？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T08:18:11.133

在这种情况下， each`.copyright`是 中的第一个也是唯一一个`.inner`，因此您需要改为 select by `.inner`。如果您不需要对第一个孩子应用任何特殊规则，则不需要使用我在另一个问题中描述的方法；只需使用它来隐藏其他元素：

```
.inner ~ .inner .copyright {
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:26:17.743

试试这个[JSfiddle](http://jsfiddle.net/egsSf/)

```
div.inner > .copyright { display:none; }
div.inner:first-child .copyright { display:block; background:#000; } 
```

​</p>

# java - 在 Java 中检查集合是否为空：哪种方法最好？

> ID：11152536
> 
> 赞同：89
> 
> 时间：2012-06-22T08:17:35.263
> 
> 标签：java, collections, is-empty

我有两种检查列表是否为空的方法

```
if (CollectionUtils.isNotEmpty(listName)) 
```

和

```
if (listName != null && listName.size() != 0) 
```

我的拱门告诉我前者比后者好。但我认为后者更好。

谁能澄清一下？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-06-22T08:23:55.837

你*绝对*应该使用`isEmpty()`. 计算`size()`任意列表的 可能很昂贵。当然，即使验证它是否有任何元素*也可能*很昂贵，但是没有任何优化也*不能*`size()`提高速度，反之则不然。*`isEmpty()`*

 **例如，假设您有一个没有*缓存大小`LinkedList<E>` *的*链表结构（而. 然后`size()`将成为 O(N) 操作，而`isEmpty()`仍然是`O(1)`.

此外，当然，使用`isEmpty()`更清楚地说明了您真正感兴趣的内容。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2012-06-22T08:21:14.430

`CollectionUtils.isNotEmpty`检查您的集合是否不为空且不为空。这比仔细检查更好，但前提是你的项目中有这个 Apache 库。如果你不那么使用：

```
if(list != null && !list.isEmpty()) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-22T08:21:12.017

除非您已经在使用 CollectionUtils，否则我会选择`List.isEmpty()`更少的依赖项。

性能方面的 CollectionUtils 会慢一点。因为它基本上遵循相同的逻辑，但有额外的开销。

所以这将是可读性与性能与依赖性。不过差别不大。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-07-06T09:05:43.337

`if (CollectionUtils.isNotEmpty(listName))`

是相同的：

`if(listName != null && !listName.isEmpty())`

在第一种方法`listName`中可以为空，并且不会抛出空指针异常。在第二种方法中，您必须手动检查 null 。第一种方法更好，因为它需要你做的工作更少。使用`.size() != 0`是完全没有必要的，我也了解到它比使用慢`.isEmpty()`

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-06-22T08:24:53.183

如果您的项目中有 Apache 常用实用程序，请使用第一个。因为它更短并且与后者完全相同。两种方法之间没有任何区别，但它在源代码中的外观如何。

也是一个空支票使用

```
listName.size() != 0 
```

不鼓励，因为所有集合实现都有

```
listName.isEmpty() 
```

功能完全相同。

总而言之，如果您的类路径中有 Apache 通用工具，请使用

```
if (CollectionUtils.isNotEmpty(listName)) 
```

在任何其他情况下使用

```
if(listName != null && listName.isEmpty()) 
```

您不会注意到任何性能差异。两条线的作用完全相同。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-10-13T20:37:56.763

Apache Commons 的 CollectionUtils.isNotEmpty(Collection) 是一个 NULL-SAFE 检查

返回 TRUE 是 Collection/List 不为空且不为 null 如果 Collection 为 Null，则返回 FALSE

例子：

```
List<String> properties = new ArrayList();
...
if (CollectionUtils.isNotEmpty(properties)) {
  // process the list
} else {
 // list is null or empty
} 
```

参考： [https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/CollectionUtils.html#isNotEmpty(java.util.Collection)](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/CollectionUtils.html#isNotEmpty(java.util.Collection))

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-22T08:19:35.603

```
isEmpty()

      Returns true if this list contains no elements. 
```

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-12-17T12:33:33.120

在实践中这很重要的一个很好的例子是JDK 中的[`ConcurrentSkipListSet`实现，它指出：](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentSkipListSet.html)

> 请注意，与大多数集合不同，size 方法不是恒定时间操作。

这是一个明显的例子，`isEmpty()`它比检查是否`size()==0`.

您可以直观地看到为什么在某些集合中可能会出现这种情况。如果是那种你必须遍历整个事物来计算元素的结构，那么如果你只想知道它是否为空，你可以在找到第一个后立即停止。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-07-11T11:09:25.397

使用**CollectionUtils.isEmpty(Collection coll)**

空安全检查指定的集合是否为空。空返回真。

**参数：** coll - 要检查的集合，可以为 null

**返回：** 如果为空或 null，则返回 true

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-22T08:19:41.427

我会用第一个。很明显可以立即看到它的作用。我认为这里不需要空检查。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-19T07:03:12.783

org.apache.commons.collections4.CollectionUtils isEmpty() 方法用于检查任何集合（List、Set 等）是否为空。它检查 null 以及集合的大小。CollectionUtils isEmpty() 是一个静态方法，它接受 Collection 作为参数。

* * *

## 回答 #12

> 赞同：-7
> 
> 时间：2016-02-03T04:42:39.470

要检查集合是否为空，您可以使用方法：.count()。例子：

```
DBCollection collection = mMongoOperation.getCollection("sequence");
    if(collection.count() == 0) {
        SequenceId sequenceId = new SequenceId("id", 0);
        mMongoOperation.save(sequenceId);
    } 
```*

# json - 使用 Knockout 映射显示嵌套的 JSON 数据

> ID：11152537
> 
> 赞同：3
> 
> 时间：2012-06-22T08:17:40.163
> 
> 标签：json, knockout.js, knockout-mapping-plugin, knockout-2.0

我正在尝试在嵌套的 JSON 对象上使用 Knockout 的映射插件，其中包含可变数据。但是，我不确定如何让它显示在我的 HTML 中。如何正确映射所有嵌套的 JSON 对象并将其显示为简单的字符串？这是我的代码：

JS

```
var ListModel = function(jsonData) {
  var self = this;
  self.master = ko.mapping.fromJS(jsonData);
}
var listModel = new ListModel(jsonData);
ko.applyBindings(listModel); 
```

HTML

```
<!-- ko foreach: master -->
  <div data-bind="text: $data"></div> 
<!-- /ko --> 
```

示例 JSON

```
{"Level 1a":"Hi","Level 1b":{
  "Level 2a":"Hello","Level 2b":{
    "Level 3":"Bye"}
  }
} 
```

样本输出

```
Hi
  Hello
    Bye 
```

我在这里要做的主要事情是打印出所有嵌套级别的值。嵌套级别的键值和数量是完全可变的（我在 SO 和在线找到的大多数嵌套 JSON 示例都是针对固定键的）。这可能吗？

更新：我找到了[jQuery 等价物](https://stackoverflow.com/questions/8553539/jquery-json-looping-through-nested-objects)，但我仍然需要可观察对象的 Knockout 实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T09:55:47.410

由于您的 JSON 对象具有可变键，因此您必须首先将其转换为固定的、可预测的结构，否则嵌套模板映射将不起作用（knockout 是声明性的，因此您需要事先知道键名）。

考虑以下自定义映射代码（不需要淘汰映射插件）：

```
var ListModel = function(jsonData) {
    var self = this;

    self.master = ko.observableArray([]);

    function nestedMapping(data, level) {
        var key, value, type;

        for (key in data) {
            if (data.hasOwnProperty(key)) {
                if (data[key] instanceof Object) {
                    type = "array";
                    value = ko.observableArray([]);
                    nestedMapping(data[key], value());
                } else {
                    type = "simple";
                    value = ko.observable(data[key]);
                }
                level.push({key: key, type: type, value: value});
            }
        }
    }

    nestedMapping(jsonData, self.master());
} 
```

该函数`nestedMapping()`转换您的数据结构：

```
{
    "Level 1a": "Hi",
    "Level 1b": {
        "Level 2a": "Hello",
        "Level 2b": {
            "Level 3": "Bye"
        }
    }
} 
```

进入：

```
[
    {
        "key": "Level 1a",
        "type": "simple",
        "value": "Hi"
    },
    {
        "key": "Level 1b",
        "type": "array",
        "value": [
            {
                "key": "Level 2a",
                "type": "simple",
                "value": "Hello"
            },
            {
                "key": "Level 2b",
                "type": "array",
                "value": [
                    {
                        "key": "Level 3",
                        "type": "simple",
                        "value": "Bye"
                    }
                ]
            }
        ]
    }
] 
```

现在您可以创建一个像这样的模板：

```
<script type="text/html" id="nestedTemplate">
  <!-- ko if: type == 'simple' -->
  <div class="name" data-bind="text: value, attr: {title: key}"></div>
  <!-- /ko -->
  <!-- ko if: type == 'array' -->
  <div class="container" data-bind="
    template: {
      name: 'nestedTemplate', 
      foreach: value
    }
  "></div>
  <!-- /ko -->
</script> 
```

看到它工作：http: [//jsfiddle.net/nwdhJ/2/](http://jsfiddle.net/nwdhJ/2/)

请注意关于`nestedMapping()`. 它创建嵌套的 observables/observableArrays。但它适用于本*机*数组实例（通过传递`self.master()`并`value()`进入递归）。

这样您就可以避免在对象构造过程中出现不必要的延迟。每次将值推送到 observableArray 时，它都会触发淘汰更改跟踪，但我们不需要这样做。使用本机阵列会快得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T08:45:59.360

将您的 JSON 数据更改为此（注意数组！）：

```
[
  {
    "Text": "Hi",
    "Children": [
      {
        "Text": "Hello",
        "Children": [
          {
            "Text": "Bye"
          }
        ]
      }
    ]
  }
] 
```

并使用自引用模板：

```
<script type="text/html" id="nestedTemplate">
  <div class="name" data-bind="text: Text"></div>
  <div class="container" data-bind="
    template: {
      name: 'nestedTemplate', 
      foreach: Children
    }
  "></div>
</script> 
```

你这样称呼：

```
<div class="container" data-bind="
  template: {
    name: 'nestedTemplate', 
    foreach: master
  }
"></div> 
```

然后您可以使用 CSS 来管理缩进：

```
/* indent from second level only */
div.container div.container {
  margin-left: 10px;
} 
```

在 jsFiddle 上查看：http: [//jsfiddle.net/nwdhJ/1/](http://jsfiddle.net/nwdhJ/1/)

# java - Class.forName 默认使用什么 ClassLoader？

> ID：11152539
> 
> 赞同：1
> 
> 时间：2012-06-22T08:17:46.243
> 
> 标签：java, classloader

我的印象是`Class.forName(String className)`使用`Thread.currentThread().getContextClassLoader()`来加载类，但显然情况并非如此。

因此我的问题是，**ClassLoader`Class.forName`默认使用什么？是`ClassLoader.getSystemClassLoader()`**吗？

`Thread.currentThread().getContextClassLoader()`和和有什么区别`ClassLoader.getSystemClassLoader()`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T08:19:18.070

它使用调用者的类加载器。从[文档中](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#forName%28java.lang.String%29)：

> 返回与具有给定字符串名称的类或接口关联的 Class 对象。调用此方法等效于：
> 
> ```
> Class.forName(className, true, currentLoader) 
> ```
> 
> 其中 currentLoader 表示当前类的定义类加载器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T08:41:00.493

它使用调用程序类加载器。forName() 的源代码：

```
public static Class<?> forName(String className) 
                throws ClassNotFoundException {
        return forName0(className, true, ClassLoader.getCallerClassLoader());
    } 
```

getCallerClassLoader() 是：

```
static ClassLoader getCallerClassLoader() {
        // NOTE use of more generic Reflection.getCallerClass()
        Class caller = Reflection.getCallerClass(3);
        // This can be null if the VM is requesting it
        if (caller == null) {
            return null;
        }
        // Circumvent security check since this is package-private
        return caller.getClassLoader0();
    } 
```

这种方法的描述是：

```
// Returns the invoker's class loader, or null if none. 
```

# sql - SQL Server 2008 显示不应显示的数据

> ID：11152546
> 
> 赞同：1
> 
> 时间：2012-06-22T08:18:26.810
> 
> 标签：sql, sql-server, sql-server-2008, sql-update, aspdotnetstorefront

我对 SQL Server 2008 有一个非常奇怪的问题。我们有一个电子商务购物车 ASPDOTNETSTOREFRONT，我们将产品类别设置为 UNPUBLISHED（通过购物车管理部分），并且在数据库中记录设置为 0，这是正确的。

我们刷新页面，该类别从网页中消失了。

昨天一整天都没有显示该类别，然后今天该类别*现在*显示在页面和管理部分和数据库中，其设置为未发布。从来没有什么逻辑意义！

服务器有一个 C:\ 是 25GB，只有 100MB 可用空间！操作系统使用 SQL Server 加载到它上面，但网站托管在 D:\ 上，它有 500GB 的可用空间。

我该怎么做才能进一步调查？（如果它在错误的堆栈网站中，请迁移它，但我认为程序员可能会遇到类似的事情，所以可能会有解决方案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:09:45.717

问题是因为 XML 包`entity.grid.xml.config`不包含以下内容：

```
<xsl:choose>                      
<xsl:when test="Published=1">
<xsl:call-template name="SubCatCell">
<xsl:with-param name="scName" select="$scName" />
</xsl:call-template>
</xsl:when> 
```

子类别现在正在检查其是否已发布，如果已发布，则显示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:27:28.867

产品的类别很可能消失了，因为您将这些产品设置为未发布。关于网站没有查看更新`real-time`，这是 ASP.Net 的奇怪之处，有时保存`web.config`文件而不对其进行任何更改，更新网站缓存并查看更改.. 我知道，这很奇怪。否则，您可能需要`reset cache`在店面管理员中按下按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:40:38.853

I would use SQL Profiler to check what sql queries are run by the ASP.Net application. If sql server is actually returning data that it should not, then investigate data in the tables. If SQL server is not returning the data, but it is displayed, then the problem is with cache somewhere: either with storefront or with your browser.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T10:09:11.793

这很可能是由于 IIS、服务器或浏览器中的缓存功能（如果它是 Web 应用程序）而发生的。基本上，您需要在严重的地方进行检查：

*   通过查询数据库，新记录的创建仍可能引用来自前端应用程序的值
*   在客户端和服务器端缓存
*   使用 SQL 分析器和 Fiddler 进行 Web 应用程序

# vb.net - 对流缓冲区感到困惑

> ID：11152552
> 
> 赞同：0
> 
> 时间：2012-06-22T08:18:41.753
> 
> 标签：vb.net, ftp, stream, buffer

我正在尝试熟悉网络编程，还有什么比设计 FTP 客户端代码库更好的起点呢？

到目前为止，我做得不是很好。我正在尝试创建一种将文件从远程服务器下载到本地文件路径的方法。为此，我能找到的所有示例都声明了一个用作数据缓冲区的字节数组。我完全理解这样做的意义，而不是每个字节读取和写入字节，但我就是无法让它工作。每当我设置大于 1 字节的缓冲区时，输出都会以某种方式损坏（不同的校验和，媒体文件无法播放等）。

有人可以指出我在这里做错了什么：

```
Public Function DownloadFile(source As Uri, output As Uri) As FtpStatusCode
    Dim request = FtpWebRequest.Create(source)
    request.Method = WebRequestMethods.Ftp.DownloadFile

    Using response As FtpWebResponse = CType(request.GetResponse, FtpWebResponse)
        Using outputStream = New FileStream(output.AbsolutePath, FileMode.Create)
            Do
                Dim buffer(8192) As Byte
                response.GetResponseStream.Read(buffer, 0, buffer.Length)
                outputStream.Write(buffer, 0, buffer.Length)
            Loop While outputStream.Position < response.ContentLength
        End Using
        Return response.StatusCode
    End Using
End Function 
```

因为当我将缓冲区大小设置为 1 时这段代码确实有效，所以我觉得字节顺序有问题。但是所有这些代码都是同步的，所以这怎么可能......

**编辑**

我现在可以使用它，所以这是供将来参考的代码解决方案（再次感谢@tcarvin）：

```
Public Function DownloadFile(source As Uri, output As Uri) As FtpStatusCode
    Dim request = FtpWebRequest.Create(source)
    request.Method = WebRequestMethods.Ftp.DownloadFile

    Using response As FtpWebResponse = CType(request.GetResponse, FtpWebResponse)
        Using inputStream = response.GetResponseStream
            Using outputStream = New FileStream(output.AbsolutePath, FileMode.Create)
                Do
                    Dim buffer(8192) As Byte
                    Dim buffered = inputStream.Read(buffer, 0, buffer.Length).Read(buffer, 0, buffer.Length)
                    outputStream.Write(buffer, 0, buffered)
                Loop While outputStream.Position < response.ContentLength
            End Using
        End Using
        Return response.StatusCode
    End Using
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:55:16.450

从流中读取时，您需要捕获方法的返回值。读取返回刚刚读取的字节数。这是您需要写入输出流的字节数。

# android - 如果列表视图在弹出窗口中打开，如何在列表项上单击上下文菜单

> ID：11152554
> 
> 赞同：0
> 
> 时间：2012-06-22T08:18:48.840
> 
> 标签：android

```
 LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
            View layout = inflater.inflate(R.layout.shopping_list_layout, null);

            Button cancel_btn = (Button) layout.findViewById(R.id.cancel_btn);
            Button clear_list_btn = (Button) layout.findViewById(R.id.clear_list);
            Button remind_me_btn = (Button) layout.findViewById(R.id.calender_btn);
            Button sent_mail_btn = (Button) layout.findViewById(R.id.mail_btn);
            Button all_addto_cart_btn = (Button) layout
                    .findViewById(R.id.add_to_cart);

            TextView oderable_no_of_products = (TextView) layout
                    .findViewById(R.id.orderable_product_no);
            TextView oderable_products_price = (TextView) layout
                    .findViewById(R.id.oderable_product_price);

            final TextView no_of_product = (TextView) layout
                    .findViewById(R.id.no_of_product_inshopping_list);
            final TextView total_price_in_shopinglist = (TextView) layout
                    .findViewById(R.id.total_sum);

            final ListView shopping_listview = (ListView) layout
                    .findViewById(R.id.shopping_listview);

            final PopupWindow pw = new PopupWindow(layout, 1105, 717, true);
            pw.showAtLocation(layout, Gravity.CENTER, 0, 0);

            LoadProductsForShoppingList shopping_list_obj = new LoadProductsForShoppingList(
                    DynamicTableActivity.this, pw, ac.getImageloder(),
                    shopping_listview, no_of_product, total_price_in_shopinglist,
                    oderable_no_of_products, oderable_products_price);
            shopping_list_obj.execute(Constant.shopping_list_query);

            cancel_btn.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    pw.dismiss();
                }

            });

            all_addto_cart_btn.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    // add all products list to cart
                    addAllProductsToCartFromShoppingList();
                }

            });

            clear_list_btn.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    // clear shopping list
                    clearShoopingList(shopping_listview, no_of_product,
                            total_price_in_shopinglist);
                }

            }); 
```

`如果列表视图在弹出窗口中打开，如何在列表项单击上打开上下文菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:22:03.147

您可以使用

```
shopping_listview.setOnItemLongClickListener(new OnItemLongClickListener() {

            @Override
            public boolean onItemLongClick(AdapterView<?> parent, View view,
                    int position, long id) { 
```

在长按显示带有列表的对话框.....

# python - 在 python dict 中获取和设置值的最佳习语

> ID：11152559
> 
> 赞同：12
> 
> 时间：2012-06-22T08:19:09.193
> 
> 标签：python

我使用 a`dict`作为短期缓存。我想从字典中获取一个值，如果字典还没有那个键，设置它，例如：

```
val = cache.get('the-key', calculate_value('the-key'))
cache['the-key'] = val 
```

在 where is `'the-key'`already in的情况下，`cache`不需要第二行。有没有更好、更短、更有表现力的成语？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-22T08:21:51.613

是的，使用：

```
val = cache.setdefault('the-key', calculate_value('the-key')) 
```

shell中的一个例子：

```
>>> cache = {'a': 1, 'b': 2}
>>> cache.setdefault('a', 0)
1
>>> cache.setdefault('b', 0)
2
>>> cache.setdefault('c', 0)
0
>>> cache
{'a': 1, 'c': 0, 'b': 2} 
```

请参阅：[http ://docs.python.org/release/2.5.2/lib/typesmapping.html](http://docs.python.org/release/2.5.2/lib/typesmapping.html)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-22T08:58:09.823

可读性很重要！

```
if 'the-key' not in cache:
    cache['the-key'] = calculate_value('the-key')
val = cache['the-key'] 
```

如果您真的更喜欢单线：

```
val = cache['the-key'] if 'the-key' in cache else cache.setdefault('the-key', calculate_value('the-key')) 
```

另一种选择是`__missing__`在缓存类中定义：

```
class Cache(dict):
    def __missing__(self, key):
        return self.setdefault(key, calculate_value(key)) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-22T08:22:02.477

看看 Python 装饰器库，更具体地说是作为缓存的[Memoize 。](http://wiki.python.org/moin/PythonDecoratorLibrary#Memoize)这样你就可以`calculate_value`用 Memoize 装饰器来装饰你的电话。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-22T08:35:45.620

接近

```
cache.setdefault('the-key',calculate_value('the-key')) 
```

如果`calculate_value`成本不高，那就太好了，因为每次都会对其进行评估。因此，如果您必须从 DB 中读取数据、打开文件或网络连接或做任何“昂贵”的事情，请使用以下结构：

```
try:
    val = cache['the-key']
except KeyError:
    val = calculate_value('the-key')
    cache['the-key'] = val 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-22T08:34:15.060

您可能想看看（整个页面）“像 Pythonista 一样的代码” [http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#dictionary-get-method](http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#dictionary-get-method)

它涵盖了上面描述的 setdefault() 技术，并且*defaultdict*技术对于制作集合或数组的字典也非常方便。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-22T08:46:11.407

你也可以使用*defaultdict*来做类似的事情：

```
>>> from collections import defaultdict
>>> d = defaultdict(int) # will default values to 0
>>> d["a"] = 1
>>> d["a"]
1
>>> d["b"]
0
>>> 
```

你可以通过提供你自己的*工厂*函数和 itertools.repeat 来分配你想要的任何默认值：

```
>>> from itertools import repeat
>>> def constant_factory(value):
...    return repeat(value).next
...
>>> default_value = "default"
>>> d = defaultdict(constant_factory(default_value))
>>> d["a"]
'default'
>>> d["b"] = 5
>>> d["b"]
5
>>> d.keys()
['a', 'b'] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-22T08:22:30.567

使用[`setdefault`](http://www.tutorialspoint.com/python/dictionary_setdefault.htm)方法，

如果键不存在，则使用第二个参数中提供`setdefault`的新键创建新键，`value`如果键已经存在，则返回该键的值。

```
val = cache.setdefault('the-key',value) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-14T11:57:06.503

使用[get](https://www.tutorialspoint.com/python/dictionary_get.htm)提取值或 get `None`。
结合`None`使用`or`将让您链接另一个操作（[setdefault](http://www.tutorialspoint.com/python/dictionary_setdefault.htm)）

```
def get_or_add(cache, key, value_factory):
    return cache.get(key) or cache.setdefault(key, value_factory()) 
```

用法：为了使它变得懒惰，该方法需要一个函数作为第三个参数

```
get_or_add(cache, 'the-key', lambda: calculate_value('the-key')) 
```

# c# - 为什么将 DateTime 传递给采用 Nullable DateTime 的方法时会丢失毫秒的时间？

> ID：11152560
> 
> 赞同：5
> 
> 时间：2012-06-22T08:19:10.440
> 
> 标签：c#, .net, datetime, nullable

我有一个类似的构造方法：

```
public class Foo
{
 public Foo (DateTime? startFrom)
        {
            _startFrom = startFrom;
        }
} 
```

我这样调用这个构造方法：

```
 var context = new Foo(new DateTime(2012, 7, 15, 11, 2, 10, 2)); // 2 miliseconds 
```

但是当我调试它时，我发现 002 毫秒在传递给默认构造函数（即 Nullable DateTime 参数）时被设置为 000。

当我将 DateTime 作为参数传递给采用 Nullable DateTime 的方法时，我丢失了 DateTime 的毫秒数是否正常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T08:21:51.203

不，这不正常 - 我强烈怀疑这是一个诊断问题。

当您通过代码进行调试时，我怀疑您正在使用一个监视窗口，该窗口恰好没有在其字符串表示中显示毫秒。展开变量本身，我相信您会看到毫秒组件被保留。

（如果*不是*这种情况，请提供一个简短但完整的程序来演示问题，而不仅仅是您显示的片段。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:24:42.407

我刚试过，我确实得到了毫秒。你如何验证这一点？

我在调试模式下运行它并检查了你的 context._startFrom.Millisecond 它的值为 2。

您是否依赖 ToString() 输出？默认情况下不显示毫秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:23:07.657

不，事实并非如此，调试窗口不显示毫秒，仅此而已。

打开一个新的VS2010解决方案，无法重现你所说的。查看毫秒部分时，值为 2 ！

# c - 静态常量

> ID：11152562
> 
> 赞同：4
> 
> 时间：2012-06-22T08:19:22.327
> 
> 标签：c, gcc

在*头*文件（）中`C99`写入`const int x = 1;`与写入时有什么区别吗？`static const int x = 1;`*`*.h`*

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:33:44.090

是的。首先，我不建议您将此类定义放在头文件中，但如果您这样做，则取决于包含头文件的位置。无论如何，`static`使变量成为当前程序单元的局部变量。这是一个例子：

mp1.c：

```
#include <stdio.h>

void myfunc(void);

const int x = 1;

int main (int argc, char *argv[])
{
    printf ("main: value of x: %d\n",x);
    myfunc();
    return 0;
} 
```

mp2.c：

```
#include <stdio.h>

extern int x;

void myfunc(void)
{
    printf ("myfunc: value of x: %d\n",x);
} 
```

汇编：

```
gcc -o mp mp1.c mp2.c 
```

工作正常。现在将 mp1.c 更改为使用`static const int x = 1;`，当我们编译时（实际上是链接错误），我们得到：

```
home/user1> gcc -o mp mp1.c mp2.c
/tmp/ccAeAmzp.o: In function `myfunc':
mp2.c:(.text+0x7): undefined reference to `x'
collect2: ld returned 1 exit status 
```

变量 x 在 mp1.c 之外不可见。

这同样适用于`static`函数的前缀。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T08:49:08.413

正如 cdarke 所说，它有所作为。

`const int x = 1;`为包括您的 h 文件在内的每个模块创建链接器可见符号。
然后链接器应该停止并出现错误，因为同一符号有多个（可见）定义。

`static const int x = 1;`为每个模块（包括您的 h 文件）创建一个变量但没有链接器符号。
链接器可以链接代码，但是当您创建多个同名变量实例时，不确定您的代码是否按预期工作。

顺便提一句。在 h 文件中定义变量绝对是个坏主意，标准方法是在 c 文件中定义它们，并且只在 h 文件中声明它们（如果你真的需要访问它们）。

当您`static`只想在一个模块中使用变量时使用，并且它应该对所有其他模块不可见。
`const ...`仅当您确实需要从另一个模块访问它时，但恕我直言，您通常应该避免使用*全局*可访问变量。

**我的文件.c**

```
#include "myFile.h"
const int x=1;
static const int y=2; 
```

**我的文件.h**

```
extern const int x; 
```*

# c++ - 预处理器宏自动生成窗口消息循环

> ID：11152567
> 
> 赞同：0
> 
> 时间：2012-06-22T08:19:44.980
> 
> 标签：c++, winapi, c-preprocessor

我的项目设置中有一个窗口的构造函数，它看起来像这样。我的项目中有很多窗口，我不断地添加或删除东西。

```
LRESULT CPicture::Msg(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
    switch(uMsg)
    { 
        HANDLE_MSG(hWnd, WM_CREATE, OnCreate);
        HANDLE_MSG(hWnd, WM_PAINT, OnPaint);
        HANDLE_MSG(hWnd, WM_SIZE, OnSize);
        HANDLE_MSG(hWnd, WM_CLOSE, OnDestroy);

        default:
            return (DefWindowProc(hWnd, uMsg, wParam, lParam));
    }
} 
```

这是所有有效事件的示例；

```
// Csx / Dsx
virtual BOOL OnCreate(HWND hWnd, LPCREATESTRUCT lpCreateStruct) {return FALSE;};
virtual void OnDestroy(HWND hWnd){};

// Painting
virtual void OnPaint(HWND hWnd){};
virtual BOOL OnEraseBkgnd(HWND hWnd, HDC hDC) {return FALSE;};

// Movement / Sizing
virtual void OnMove(HWND hWnd, int x, int y) {};
virtual void OnSize(HWND hWnd, UINT state, int nWidth, int nHeight){};
virtual void OnGetMinMaxInfo(HWND hWnd, LPMINMAXINFO lpMinMaxInfo){};

// Focus
virtual void OnSetFocus(HWND hWnd, HWND hWndOldFocus){};
virtual void OnKillFocus(HWND hWnd, HWND hWndNewFocus){}; 
```

……还有更多。是否可以使用预处理器宏来检测这些函数之一何时在子类中被覆盖并自动为它添加一个处理程序到消息循环中？

有人告诉我`Msg()`，即使未定义每条消息，对我来说处理每条消息也是一个非常糟糕的主意，因此我正在寻找一种简单的替代方案，该替代方案在不断添加/删除事件定义时不会对用户造成太大影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:04:44.880

使用标准预处理器不可能完全按照您的意愿进行操作，但是按照 Bo Persson 的评论，您可以执行以下操作：

```
class MessageHandler
{
public:
  virtual void Handle () = 0;
  static void Dispatch (int i) { m_messages [i]->Handle (); }
protected:
  MessageHandler (int i) { m_messages [i] = this; }
private:
  static map <int, MessageHandler *> m_messages;
};

map <int, MessageHandler *> MessageHandler::m_messages;

template <int i>
class MessageHandlerInstance : MessageHandler
{
protected:
  MessageHandlerInstance () : MessageHandler (i) { }
};

#define Handler(name,i) class name : public MessageHandlerInstance <i> { void Handle (); } name##Instance;

// these are the actual handlers for the messages
Handler (Msg1, 1);
void Msg1::Handle () { cout << "Msg1" << endl; }

Handler (Msg2, 2);
void Msg2::Handle () { cout << "Msg2" << endl; }

Handler (Msg3, 3);
void Msg3::Handle () { cout << "Msg3" << endl; }

int main ()
{
  // and this is how they're called
  MessageHandler::Dispatch (1);
  MessageHandler::Dispatch (2);
  MessageHandler::Dispatch (3);
} 
```

它需要一些错误检查 - 如果没有定义消息处理程序，则 Dispatch 调用将失败。此外，您可以将模板类移到#define 中，但这会使#define 更大。

# jquery - Jquery验证，提交处理程序不起作用

> ID：11152569
> 
> 赞同：6
> 
> 时间：2012-06-22T08:19:51.850
> 
> 标签：jquery

我正在尝试在提交表单之前对表单的某些字段进行一些额外的检查和格式化。因此我使用了 bassistance jquery 验证插件。它运行良好，因为它可以正确显示所有强制性错误消息，但是一旦我提供了必要的值，表单就会简单地提交。在这一点上，我什至不确定是否`submitHandler`被触发。有任何想法吗？

表格html：http: [//jsfiddle.net/7PAZU/](http://jsfiddle.net/7PAZU/)

```
$(function() {
    $("#commentForm").validate({
        rules: {
            bill_first_name: {
                required: true
            },
            bill_last_name: {
                required: true
            },
            email: {
                required: true,
                email: true
            },
            Phone: {
                required: true,
                number: true
            },

            bill_address_one: {
                required: true
            },
            bill_city: {
                required: true
            },
            bill_state_or_province: {
                required: true
            },
            charge_total: {
                required: true,
                float: true
            },
        },
        messages: {
            bill_first_name: {
                required: "Please put in First Name"
            },
            bill_last_name: {
                required: "Please put in last Name"
            },
            email: {
                required: "Please enter a valid email"
            },
            phone: {
                required: "Please enter a valid Phone Number"

            },

            bill_address_one: {
                required: "Please put in Address"
            },
            bill_city: {
                required: "Please put in  City"
            },
            bill_state_or_province: {
                required: "Please put in state"
            },
            charge_total: {
                required: "Please put Amount In Whole number such as 10.00",
                number: "Please put in Amount In Whole number such as 10.00"
            },
        },
        submitHandler: function(frm) {
            $("#charge_total").val(parseFloat($("#charge_total").val()).toFixed(2));
            alert("Dukhche Na");
            return false;
        }
    });
})​ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T08:46:16.417

您的代码失败，因为您使用的验证规则不存在。

```
charge_total: {
                required: true,
                float: true // there's no validator named `float`
            } // Comma removed here 
```

`float`但是该插件中没有命名验证器。删除它，它会正常工作。如果需要，您可以创建自定义`float`验证器。

[工作小提琴](http://jsfiddle.net/joycse06/7PAZU/1/)

在此处查看可用规则列表[http://docs.jquery.com/Plugins/Validation#Validator](http://docs.jquery.com/Plugins/Validation#Validator)

**我是怎么找到这个的？**

我检查了控制台，发现这个错误被抛出

```
Uncaught TypeError: Cannot call method 'call' of undefined 
```

从插件源文件中的以下行

```
var result = $.validator.methods[method]
      .call( this, element.value.replace(/\r/g, ""), element, rule.parameters ); 
```

含义`$.validator.methods[method]`未定义，这证明您正在使用不存在的验证器。

所以我检查了可用的验证方法列表，`your rules`发现您正在使用`float`不可用的规则。

所以 JS 抛出这个错误并停止执行，所以你`submit handler`没有被调用并且表单被提交（这是默认行为，除非你阻止使用`JS`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T08:22:50.223

IE 对额外的逗号特别挑剔......首先删除它们：

```
$(function() {
    $("#commentForm").validate({
        rules: {
            bill_first_name: {
                required: true
            },
            bill_last_name: {
                required: true
            },
            email: {
                required: true,
                email: true
            },
            Phone: {
                required: true,
                number: true
            },

            bill_address_one: {
                required: true
            },
            bill_city: {
                required: true
            },
            bill_state_or_province: {
                required: true
            },
            charge_total: {
                required: true,
                float: true
            } // Comma removed here
        },
        messages: {
            bill_first_name: {
                required: "Please put in First Name"
            },
            bill_last_name: {
                required: "Please put in last Name"
            },
            email: {
                required: "Please enter a valid email"
            },
            phone: {
                required: "Please enter a valid Phone Number"

            },

            bill_address_one: {
                required: "Please put in Address"
            },
            bill_city: {
                required: "Please put in  City"
            },
            bill_state_or_province: {
                required: "Please put in state"
            },
            charge_total: {
                required: "Please put Amount In Whole number such as 10.00",
                number: "Please put in Amount In Whole number such as 10.00"
            } // Comma removed here
        },
        submitHandler: function(frm) {
            $("#charge_total").val(parseFloat($("#charge_total").val()).toFixed(2));
            alert("Dukhche Na");
            return false;
        }
    });
})​ 
```

# asp.net-mvc - JQUERY ajax 将空值从 MVC 视图传递到控制器

> ID：11152571
> 
> 赞同：2
> 
> 时间：2012-06-22T08:20:01.090
> 
> 标签：asp.net-mvc, jquery

大家好，我正在使用 jquery ajax 将一些数据发布到控制器，但我在控制器中得到空值，

**jQuery代码是：**

```
$('#registerCompOff').click(function() {

    var compOff = [];
    $('div').each(function() {
        var curRow = {};
        curRow.Description = $(this).find('.reason').val();
        curRow.CompOffDate = $(this).find('.datefieldWithWeekends').val();
        if (curRow.Description != null && curRow.CompOffDate != null) {
            compOff.push(curRow);
        }
    });
    $.ajax({
        type: 'POST',
        url: this.href,
        dataType: 'json',
        data: compOff

    });

    return $('form').valid();

});​ 
```

`compOff`不为空我已经检查过...

**控制器是：**

```
 [HttpPost]
        public ActionResult RegisterCompOff(RegisterCompOff[] registerCompOff)
        {

            //return View();
        } 
```

你能告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:06:42.877

给定您的原始代码，更改*$.ajax* ->`data: JSON.stringify(compOff)`然后添加`contentType: "application/json; charset=utf-8"`并最后将控制器操作的参数名称更改为`public ActionResult RegisterCompOff(RegisterCompOff[] compOff)`.
模型绑定应该开始。它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:31:13.343

**编辑：**

尝试这个 ：

```
 $.ajax({
        type: 'POST',
        url: this.href,
        dataType: 'json',
        traditional: true,
        data: 
        {
             CompOffList: compOff 
        }
    }); 
```

并像这样更改您的控制器：

```
[HttpPost]
        public ActionResult RegisterCompOff(List<RegisterCompOff> CompOffList)
        {

            //return View();
        } 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:26:22.897

您的 r 将 javascript 对象作为数据传递，而 jquery ajax 方法需要一个键/值对列表。尝试这个

```
data:{Description:compOff.Description, CompOffDate:compOff.CompOffDate} 
```

# html - 在黑莓应用程序中集成 html5

> ID：11152578
> 
> 赞同：0
> 
> 时间：2012-06-22T08:20:35.093
> 
> 标签：html, blackberry

我是一名安卓开发者。我开发了一个 HTML5 应用程序，并通过 android 中的 webView 启动它。我是黑莓应用程序开发的新手。有什么我们可以使用的东西，比如 webview 来启动 html5。我也在使用 eclipse 进行黑莓开发。提前致谢..

# android - 如何使用自定义视图使我的布局可滚动？当我滚动查看我的根节点而不是 relativelayout 时，我的视图没有显示

> ID：11152579
> 
> 赞同：1
> 
> 时间：2012-06-22T08:20:36.207
> 
> 标签：android, view, scroll

不知何故，当我将滚动视图作为根节点时，我的视图就消失了。如何解决这个问题，我不知道为什么会发生这种情况。

这是我的 xml，这是带有滚动视图的。使用此滚动视图，我的自定义视图不会显示在屏幕上。当我删除它的滚动视图时。我真的不知道如何解决这个问题。。

```
 <?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content" android:layout_height="wrap_content">

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/dennisText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="hierstaatdanstrakseenstoerenewsfeedendatsoortshitditdatallesstoermooiboyvriendje"
        android:textColor="#00FF00"/>

    <TextView
        android:id="@+id/textView0"
        android:layout_below="@+id/dennisText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="TextView" />"

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/textView0"
        android:layout_marginLeft="20dp"
        android:layout_toRightOf="@+id/textView0"
        android:text="TextView" />

    <Spinner
        android:id="@+id/Spinner1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/textView1"
        android:layout_toRightOf="@+id/textView1"
        android:drawSelectorOnTop="true"
        android:prompt="@string/prompt2"
         />

    <Spinner
        android:id="@+id/Spinner2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/Spinner1"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/Spinner1"
        android:drawSelectorOnTop="true"
        android:prompt="@string/prompt2" />

    <View
        android:id="@+id/view1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/drawView2"
        android:layout_alignRight="@+id/drawView2" />

    <com.TerraMare.DrawView2
        android:id="@+id/drawView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/Spinner2"
        android:layout_marginBottom="38dp"
        android:layout_marginRight="40dp" />

    <Spinner
        android:id="@+id/Spinner3"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/drawView2"
        android:maxWidth="150dp" />

    <Button
        android:id="@+id/draw"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/Spinner3"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/Spinner3"
        android:onClick="drawgraph"
        android:text="Teken Grafiek" />

</RelativeLayout>
</ScrollView> 
```

# ios5 - iOS在导航栏中的搜索栏中显示带有tableview的弹出窗口

> ID：11152587
> 
> 赞同：1
> 
> 时间：2012-06-22T08:21:25.783
> 
> 标签：ios5, uisearchbar

我在导航栏中有一个搜索栏，并希望它的行为如下：

1）当用户开始在搜索栏中输入时，会出现一个弹出框，并根据在搜索栏中输入的字符串在弹出框的表格视图中显示产品列表。

2) 每输入一个新字母，就应该刷新这些数据。

3) 选择表格视图中的项目时调用方法

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:47:05.100

谢谢你的帮助，janusfidel。

我找到了一个很好的源代码示例来描述我需要什么：[ToolbarSearch](http://developer.apple.com/library/ios/#samplecode/ToolbarSearch/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009461)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:16:03.987

使用 UISearchBar，你可以做到这一点，它有监听文本变化的委托方法，你可以像下面的代码一样使用它

```
- (void)searchBar:(UISearchBar *)theSearchBar textDidChange:(NSString *)searchText{
    if([searchText length] > 0) {
      [searchResultArray removeAllObjects];
      searchResultArray = [self searchTableView:textFromSearchbar];
      [popOverView presentData:searchResultArray];
   }
}

-(NSMutableArray*)searchTableView:(NSString*)string{
     NSMutableArray* result;
     //do the searching now
     return result;
 } 
```

# php - 传递 zend 错误控制器额外参数

> ID：11152599
> 
> 赞同：0
> 
> 时间：2012-06-22T08:22:26.387
> 
> 标签：php, zend-framework

我正在尝试通过我的 Web 应用程序为某些错误提供用户友好的错误消息。我希望能够传递抛出异常调用和额外参数，例如“USER”，因此错误控制器将此参数提供给视图并显示不同样式的页面，可能具有更友好的颜色和有意义的消息，但我可以不知道如何传递额外的参数。这是当前的设置：

一些人签入其中一个控制器：

```
throw new Zend_Controller_Exception("User not found",403); 
```

错误控制器（ErrorController.php）：

```
class ErrorController
    extends Zend_Controller_Action
    {
        public function errorAction()
        {
        $errors = $this->_getParam('error_handler');
        switch ($errors->type) { 
```

等等

所以我希望能够这样做：

```
$this->view->type = $this->_getParam('type'); 
```

在控制器中，所以我可以在视图中执行此操作：

```
if($this->type == "USER") {
    some css stuff
    echo $this->exception; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T08:54:11.023

听起来你可以：

1.  创建一个`My_Exception_UserFriendly`接受其他参数的自定义异常类（或类似的）

2.  在控制器（或其他地方）中使用您的自定义参数抛出此异常，并且

3.  使用您的`instanceof`检查`ErrorController`来填充您的视图变量。

而且，正如您已经注意到的，请确保您的视图在尝试呈现之前检查是否存在该用户友好数据。

**更新**

实际上，仔细阅读，您似乎不需要异常来携带任何附加信息。简单地创建一个自定义类应该足以满足您的检测/渲染目的。

您可以在以下位置创建一个空 (!) 异常类`library/My/Exception/UserFiendly.php`：

```
class My_Exception_UserFriendly extends Exception
{
} 
```

然后，当您遇到希望以友好的方式向用户显示的错误时，只需抛出这种类型的异常：

```
if ($rainyDay){
    throw new My_Exception_UserFriendly('Seeing some inclement weather, I\'m afraid');
} 
```

然后在你的`ErrorController::errorAction()`：

```
$exception = $this->_getParam('error_handler')->exception;
if ($exception instanceof My_Exception_UserFriendly){
    $this->view->friendlyErrorMessage = $exception->getMessage();
} 
```

最后，在您的视图脚本中`error/error.phtml`：

```
<?php if ($this->friendlyErrorMessage): ?>
<h2>With Humble Apologies, Valued User</h2>
<p><?= $this->escape($this->friendlyErrorMessage) ?></p>
<?php endif; ?> 
```

事实上，有些人会争辩说，我们呈现的*具体信息纯粹是一种**观点考虑*。在这种情况下，您可以为您希望支持的*每条*友好消息创建一个自定义异常——也许扩展这个通用`UserFriendly`异常。然后在您的 中，检测特定的子类型并在标识该子类型的视图中设置一个键。然后，在视图中，呈现与给定键对应的特定友好消息。可能只是为了纯洁而矫枉过正，但为了那些重视这些考虑的人而把它扔在那里。*`ErrorController`*

# java - 更新基础行模型时防止表格单元格失去焦点

> ID：11152603
> 
> 赞同：1
> 
> 时间：2012-06-22T08:22:37.143
> 
> 标签：java, swing, jtable

我有一个可编辑的`JTable`. 如果在更新基础行模型时用户正在编辑单元格，则单元格编辑器将失去焦点。

对此最简单的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:11:30.420

正如@mKorbel 注意到的那样，最简单的解决方案是非常理论的问题:) 是：

1.  永远记住哪个单元格有焦点。
2.  听行变化。
3.  当在方法结束时更改底层行时，在更改完成后调用，将焦点返回到正确的单元格，例如使用`requestFocus()`此处[提供的示例。](https://stackoverflow.com/a/11033512/613495)

# sql - 在参数变量上使用 Like？

> ID：11152607
> 
> 赞同：0
> 
> 时间：2012-06-22T08:22:51.973
> 
> 标签：sql, sql-server-2008, tsql

```
Select Column1 From Table Where @Variable Like '%' + Column2 + '%' 
```

似乎不像我想象的那样工作。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T09:05:20.617

（模糊的问题）

您是否以错误的方式获得了 Category 和 @Variable：[sqlFiddle](http://sqlfiddle.com/#!3/630f5/3)

```
create table the_table 
(
  category varchar(10),
  [Date] datetime,
  Amount decimal(12, 2)
)

insert into the_table
values
( 'X', '2012-1-1', 10),
( 'X', '2012-1-3', 10),
( 'Y', '2012-1-3', 20),
( 'Y', '2012-1-5', 10)

declare @Variable varchar(10)
set @Variable = 'Y'

Select * 
From the_table 
--Where @Variable Like '%' + category + '%' 
Where category Like '%' + @Variable + '%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:33:16.387

如果您的列数有限，您可以使用`case`：

```
where  case 
       when @Variable = 'col1' then col1 
       when @Variable = 'col2' then col2
       when @Variable = 'col3' then col3 
       ...
       end like '%' + Column2 + '%' 
```

另一种选择是动态 SQL：

```
declare @sql nvarchar(max)
set @sql = 'Select Column1 From Table Where ' + @Variable + 
    ' Like ''%'' + Column2 + ''%'''
exec (@sql) 
```

# c# - 如何根据分辨率计算鼠标坐标c#

> ID：11152608
> 
> 赞同：0
> 
> 时间：2012-06-22T08:22:52.313
> 
> 标签：c#

我正在尝试使用 c# 开发远程桌面应用程序。所以我有几个关于基于图片框的鼠标坐标计算的问题

1.  假设我有图片框，当我将鼠标移动到 C# 中的图片框时，我想捕获鼠标坐标？

2.  如果我单击图片框上的位置 (200, 300)。那么我如何以
    编程方式确定图片框的分辨率并根据该分辨率转换（200,300）坐标。

3.  当我将（x，y）坐标发送到其他机器时，如果该电脑的分辨率为 1024x768，那么我需要使用什么逻辑根据该电脑分辨率转换（x，y）

如果可能的话，帮助我解决我的问题的小示例代码。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:40:51.367

这听起来像一个微不足道的问题，如果它与家庭作业相关，请添加标签`homework`。

```
int remote_x = local_x * remote_width / local_width;
int remote_y = local_y * remote_height / local_height; 
```

图片框 (`local_width`和`local_height`) 的尺寸可以通过使用`pictureBox.Width`和来确定`pictureBox.Height`。光标坐标，`local_x`并且`local_y`可以被请求或者是事件数据（例如`MouseMove`事件的）的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:18:16.740

简单，最简单的方法是将坐标转换为标准化形式（范围从 0 到 1）。然后您可以使用这些归一化坐标来计算另一个分辨率上的 mousePosition。这样设备就不需要知道其他设备的分辨率。

所以：

```
//First Normalize the clickPosition using the current resolution
//clickPos(200,300) and resolution(800,600) => normalized(0.25,0.5)
var normalized = clickPos/resolution;

//Now you can send this information to the other device
//The other device uses the normalized parameter to calculate the mouseClick with his  resolution
//normalized(0.25,0.5) and otherResolution(1280,720) => otherDeviceClickPos(320, 360)
var otherDeviceClickPos = normalized * otherResolution; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:43:47.253

如果您知道远程屏幕的分辨率并且您知道图片框的大小，那么它只是四舍五入到整数的比率。

# haskell - Haskell 诅咒

> ID：11152612
> 
> 赞同：5
> 
> 时间：2012-06-22T08:23:08.710
> 
> 标签：haskell, terminal, ncurses

```
main :: IO()
main = runCurses $ do 
  setEcho False
  w <- defaultWindow
  canvas <- newWindow 19 19 0 0
  panel <- newPanel canvas
  updateWindow canvas $ do 
    drawString "Hello world!"
  render
  waitFor w (\ev -> ev == EventCharacter 'q' || ev == EventCharacter 'Q')

waitFor :: Window -> (Event -> Bool) -> Curses ()
waitFor w p = loop where
    loop = do
        ev <- getEvent w Nothing
        case ev of
            Nothing -> loop
            Just ev' -> unless (p ev') loop 
```

你好。它是 ncurses 包的一些修改示例。问题是不显示任何内容。我记得在 C API 中，我必须独立刷新每个窗口。但 Haskell 只提供`render`. 我哪里错了？我想要一些可移动的小部件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T08:26:37.023

对不起愚蠢的问题。你只需要打电话`refreshPanels`。

# session - Magento 购物车/magento 外部的会话数据

> ID：11152613
> 
> 赞同：1
> 
> 时间：2012-06-22T08:23:12.773
> 
> 标签：session, magento, cart

这可能会有点令人困惑，因为我已经尝试了一切来完成这项工作。我想要的只是我的品牌网站（domain.com）中的一个链接，它显示了我的 magento 1.5.1 购物车（domain.com/shop）中的数量我很容易拉入产品数据和导航块，但无论我做什么，购物车数量始终为 0，来自 magento 外部。我尝试的主要方式只是在我的品牌网站上进行：

```
 require_once $_SERVER['DOCUMENT_ROOT'].'/shop/app/Mage.php';
    umask(0);
    Mage::app();        
    Mage::getSingleton('core/session', array('name'=>'frontend'));
    // trying everything 
    Mage::getSingleton('checkout/cart')->getItemsCount(); // returns 0
    Mage::helper('checkout/cart')->getItemsCount(); // returns 0
    Mage::getSingleton('customer/session')->isLoggedIn(); // returns blank
    Mage::helper('checkout/cart')->getCart()->getItemsCount(); // returns 0
    Mage::helper('checkout/cart')->getCart()->getQuote()->getItemsCount(); // returns blank 
```

然后，当这些都不起作用时，我在 Magento 中创建了一个模板，只是为了给我购物车数量作为一个块，它返回块很好，但在购物车中仍然为零！

```
 $block = $this->layout->createBlock('core/template');
    $block->setTemplate('page/html/cartForBrand.phtml');
    return $block->renderView(); 
```

magento 中的块很简单

```
 Mage::getSingleton('core/session', array('name'=>'frontend'));
    $cart = Mage::getModel('checkout/cart')->getQuote()->getData()['items_qty']; 
```

我见过很多人有类似的问题：[/ session_cookie_management](https://stackoverflow.com/questions/1098871/how-to-access-magento-users-session-from-outside-magento)，[.domain.com cookie_domain](https://stackoverflow.com/questions/9982210/how-to-access-magento-customers-session-from-outside-magento)（即使这是特定于子域​​的），我已经阅读并尝试了我能找到的所有内容 2 天。在禁用 magento 缓存的情况下不断删除会话和缓存目录并清除缓存和 cookie。

这是我使用了多年后在这个网站上发布的第一个问题，我已经被困在这个问题上 3 天了！拔我的头发！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T08:58:27.127

我复制了您的代码并在 Magento 1.5、1.6 和 1.7 上对其进行了测试。我将代码放在Magento 根目录中
名为*test.php的 PHP 文件中。*这是我使用的代码：

```
umask(0);
require_once 'app/Mage.php';
Mage::app();

Mage::getSingleton('core/session', array('name'=>'frontend'));

var_dump(array(
    "Mage::getSingleton('checkout/cart')->getItemsCount()" =>
    Mage::getSingleton('checkout/cart')->getItemsCount()
)); // returns number of items (w/o qty)
var_dump(array(
    "Mage::helper('checkout/cart')->getSummaryCount()" =>
        Mage::helper('checkout/cart')->getSummaryCount()
)); // returns number according to configuration
var_dump(array(
    "Mage::getSingleton('customer/session')->isLoggedIn()" =>
    Mage::getSingleton('customer/session')->isLoggedIn()
)); // returns bool true|false 
```

Magento 实例使用本地测试主机名 magento15.dev、magento16.dev 和 magento17.dev。

我请求了相应的 Magento 实例并将产品放入购物车（使用可配置的简单产品进行测试），然后更新购物车中产品的数量。

在每一步之间，我在浏览器中重新加载了*test.php*文件。
结果总是一样的：它按预期工作。每个调用都返回与 Magento 站点上相同的值。

所以这意味着您的代码是正确的，它可能是您的域和/或设置（当您请求测试脚本时浏览器是否发送 Magento 前端 cookie）？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-24T18:14:08.057

您的代码很好，但默认情况下 Magento 的“前端”cookie 在 Magento 之外无法访问（因此您无法访问会话数据）。您需要在 Admin > System > Configuration > Web > Session Cookie Management > Cookie Path 中更改 cookie 的路径。尝试将其设置为 /

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T04:26:13.713

如果你想要的只是数量，为什么要实例化 magento。只需设置一个客户端cookie（即cart_qty），然后在您的主站点标题上读取此cookie。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T04:52:40.530

以为你忘记了：

```
Mage::app()->setCurrentStore(1);  // replace 1 with your store id 
```

后

```
Mage::app() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-12T05:30:32.743

在您的代码中：而不是：

```
Mage::app(); 
```

利用

```
Mage::app()->loadArea('frontend'); 
```

&你会得到你的输出......

# android - 与 PCD/阅读器的安全元件通信

> ID：11152614
> 
> 赞同：2
> 
> 时间：2012-06-22T08:23:14.337
> 
> 标签：android, nfc, hce

我试图更好地了解 Android 手机上的安全元件如何与卡模拟模式下的读卡器交互。对以下问题的任何见解都会很有用。

理论上（基于硬件设计），与读者交流时是否一定要经过SE？如果我对发送私人数据不感兴趣，是否可以直接“收发”给读者？如果是，那将如何运作？

如果你必须通过 SE，从概念上讲，它是如何工作的？例如，假设一个阅读器发送了一个 SELECT AID 命令……大概，android 主机查询 SE 以获取 SELECT AID 命令。如果主机想要响应 SELECT AID 命令（假设是动态响应），主机是否通过 SE 将响应发回？我已经阅读了很多关于查询 SE 以获取信息的内容（例如 ISO 7816-4），但还没有理解这最后一点。你如何向读者发送回复？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:28:17.083

这是针对当前一代的 NFC 芯片，下一代更加灵活：

从 NFC 芯片来看，该芯片有两个不同的主机，即 Secure Element 和 Android 主机。

NFC 芯片还知道哪个主机在 NFC 芯片上打开了哪种操作模式（例如点对点、读卡器模式、卡仿真模式等）。

属于一种操作模式的请求和事件只会发送到已经打开该操作模式的主机。

对于安全元素，最常见的“移动支付”配置是 SE 在 NFC 芯片中打开卡仿真，而 android 主机打开读卡器模式和点对点。

如果 NFC 芯片检测到外部读取器，则所有通信将仅发送到 SE。Android 主机将看不到 SE 和外部阅读器之间交换的任何数据。然而，android 主机可能会看到在天线处检测到外部射频场，因此 android 知道发生了什么事。

在 SE 上运行的软件通常由一个小型操作系统组成，该操作系统管理多个应用程序，解析 SELECT AID 命令并将请求转发到与 AID 匹配的任何应用程序。

在 SE 上运行的应用程序可能会决定稍后将数据发送到 android 主机。这些事件称为事务事件，是一种单向通信。android 主机无法回复 SE 发送的事务事件。

android 主机也将无法通过 NFC 芯片向 SE 发送数据。如果它想直接与 SE 通信，例如安装一个新应用程序，它必须使用另一个物理连接，通常是 sim-card 引脚或 micro-sd 引脚。

为了完整起见：NFC芯片中还内置了嵌入式安全元件。它们没有任何物理连接，NFC芯片允许android主机和SE主机之间的双向通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:16:56.493

从理论上讲，与读者交流时没有必要“通过 SE”。如果 NFC 芯片能够生成卡的射频信号（某些 NFC 芯片可以），手机可以直接向读卡器发送响应。当然，您需要一个 API 才能从您的应用程序访问此功能。Android ICS 没有这样的 API（相比之下，BlackBerry OS 有）。

# sip - 如何从 JAIN SLEE B2BUA 服务器并行拨打电话？

> ID：11152615
> 
> 赞同：0
> 
> 时间：2012-06-22T08:23:18.053
> 
> 标签：sip, rhino, jain-slee

我是 JAIN SLEE + SIP 的新手，我的任务是在 Rhino SDK 上编写简单的 B2BUA 服务器。我有一个例子，客户可以注册并给其他客户打电话。我的任务是将此示例更改为：

*   客户端 A 向 B2BUA 服务器拨打电话到某个虚拟号码
*   B2BUA 服务器并行向注册到此虚拟号码的客户端拨打电话，以便他们的电话响铃。
*   当某个客户端拿起电话时，然后向B2BUA 服务器发送*+200 OK*
*   B2BUA 服务器自动将其重定向到客户端 A，因此这对客户端将通话
*   同时 B2BUA 向其他客户发送 CANCEL

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T09:22:35.410

好吧，您刚刚描述了您还需要做什么:)？

[https://www.rfc-editor.org/rfc/rfc3261](https://www.rfc-editor.org/rfc/rfc3261) -> 第 11-12 页

```
 atlanta.com  . . . biloxi.com
             .      proxy              proxy     .
           .                                       .
   Alice's  . . . . . . . . . . . . . . . . . . . .  Bob's
  softphone                                        SIP Phone
     |                |                |                |
     |    INVITE F1   |                |                |
     |--------------->|    INVITE F2   |                |
     |  100 Trying F3 |--------------->|    INVITE F4   |
     |<---------------|  100 Trying F5 |--------------->|
     |                |<-------------- | 180 Ringing F6 |
     |                | 180 Ringing F7 |<---------------|
     | 180 Ringing F8 |<---------------|     200 OK F9  |
     |<---------------|    200 OK F10  |<---------------|
     |    200 OK F11  |<---------------|                |
     |<---------------|                |                |
     |                       ACK F12                    |
     |------------------------------------------------->|
     |                   Media Session                  |
     |<================================================>|
     |                       BYE F13                    |
     |<-------------------------------------------------|
     |                     200 OK F14                   |
     |------------------------------------------------->|
     |                                                  | 
```

代理或多或少像 B2BUA 一样工作，非常简单的 B2B。

您需要在答案等之间复制 SDP。

# ruby-on-rails - 限制某些命名空间的 New Relic

> ID：11152619
> 
> 赞同：0
> 
> 时间：2012-06-22T08:23:39.290
> 
> 标签：ruby-on-rails, admin, restriction, newrelic

我想在 /admin 命名空间上禁用 New Relic，所以我只能从应用程序的用户部分获得报告？

我在 Rails 上使用 gem 和 heroku 配置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T04:11:39.070

`newrelic_ignore`您可以通过调用控制器类来阻止 New Relic 检测 Rails 控制器。您还可以通过传递`:only`和`:except`选项来阻止单个操作，例如使用 Rails 过滤器。

有关详细信息，请参阅[有关阻止检测的 Ruby 代理文档](https://newrelic.com/docs/ruby/blocking-controller-instrumentation)。

# html - 带有css的html页脚

> ID：11152620
> 
> 赞同：2
> 
> 时间：2012-06-22T08:23:42.787
> 
> 标签：html, css, css-float, footer

我有以下问题：

我想创建一个页脚。该页脚应如下所示：

```
text headline           link 1    |    link 2    |    link 3 
```

我的想法是使用 div 作为容器。在 html 中我仍然不知道该使用什么。通过使用 dl 或 ul 来实现这一点会更好吗？

所以我通过 dl 使用以下 html 完成了它：

```
<div id="footer">
      <dl>
        <dt>text headline</dt>
        <dd>link 1</dd>
        <dd>link 2</dd>
        <dd>link 3</dd>
      </dl>
  </div> 
```

对于 CSS：

```
#footer {
    height: 200px;
    font-size: 14px;
    width: 1200px;
}
#footer dl {
    text-align: center;
    display: inline-block;
}
#footer dl dd {
    list-style-type: none;
    float: left;
    width: 100px;
    position: relative;
} 
```

问题是我不知道如何添加连字符。另一个问题是标题位于链接之前。这是示例：

[http://jsfiddle.net/fFddz/2/](http://jsfiddle.net/fFddz/2/)

所以如果有人可以帮助我，我真的很感激。多谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:01:13.433

如果你真的想要连字符。这是我能做的最好的。 [http://jsfiddle.net/fFddz/9/](http://jsfiddle.net/fFddz/9/)

如果没有我你也能活下去，我会写下以下内容。

**HTML**

```
<div id="footer">
<ul>
    <li><a>...</a></li>
    <li><a>...</a></li>
    <li><a>...</a></li>
    ....
</ul>
</div> 
```

**CSS**

```
#footer div{
      /**what you already have***/
}

/**Makes the items appear in a line. But you can't define the width of an inline element.**/
#footer li{
    display:inline;
    float:left;
}

#footer a{
    display:block; /**Allows you to define a width.*//
    text-align:center;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:31:46.977

尝试使用

```
<div id="footer">
      <ul>
        <li>text headline</li>
        <li>link 1</li>
        <li>link 2</li>
        <li>link 3</li>
      </ul>
  </div> 
```

为了你的标记，和

```
footer {
    height: 200px;
    font-size: 14px;
    width: 400px;
}

#footer li {
    text-align: center;
    display: inline-block;
     list-style-type: none;
    float: left;
    width: 100px;
    position: relative;
} 
```

为你的 CSS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:32:07.337

您可以将 ul 用于以下工作示例：

[http://jsfiddle.net/fFddz/5/](http://jsfiddle.net/fFddz/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T08:37:39.173

您可以将边框与`:first-child`伪选择器结合使用，以将其限制为除第一个元素之外的所有元素。

```
#footer dl dd {
    list-style-type: none;
    float: left;
    width: 100px;
    position: relative;
    border-left: 1px solid #000000;
}

#footer dl dd:first-child {
    border-left: 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T09:16:19.847

我能想到的适用于几乎所有浏览器的最简单方法是使用以下样式：

```
#footer dl {
    display: inline-block;
}
#footer dt {
    float: left;
    display: block;
}
#footer dl dd {
    list-style-type: none;
    padding: 0;
    margin: 0;
    float: left;
    display: block;
    position: relative;
    width: 100px;
    text-align: center;
    border-right: solid 1px #000;
}
#footer dl dd.last {
    border: none;
} 
```

通过这些样式，您可以使用以下 HTML：

```
<div id="footer">
    <dl>
        <dt>text headline</dt>
        <dd>link 1</dd>
        <dd>link 2</dd>
        <dd class="last">link 3</dd>
    </dl>
</div> 
```

这是它的小提琴：http: [//jsfiddle.net/sarcastyx/Dbh9H/](http://jsfiddle.net/sarcastyx/Dbh9H/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T09:18:38.067

我想建议您将链接放在一个中，`<dd>`然后您将能够对第一个链接使用伪选择器`:first-child`来隐藏左边框

for`dt`并`dd`设置`float:left`为一行并`dl`设置`overflow: hidden`为清除浮动

html

```
 <div id="footer">
      <dl>
        <dt>text headline</dt>
        <dd>
            <a href="">link1</a>         
            <a href="">link2</a>         
            <a href="">link3</a>         
        </dd>
      </dl>
  </div> 
```

css

```
footer {
    height: 200px;
    font-size: 14px;
    width: 500px;
}
#footer dl {
    text-align: center;
    display: inline-block;
    overflow:hidden;            
}
#footer dt {
    float: left;
}
#footer dd {
    float: left;
}
#footer dd a {
    border-left: 1px solid #000;
    list-style-type: none;
    width: 100px;
    display:inline-block;
    *display: inline; zoom: 1;    
    position: relative;
}
#footer dd a:first-child {
    border-left: none;
} 
```

小提琴[http://jsfiddle.net/fFddz/11/](http://jsfiddle.net/fFddz/11/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-22T11:11:42.380

嘿，看看这个[http://jsfiddle.net/fFddz/13/](http://jsfiddle.net/fFddz/13/)

将 html 结构更改为 UL 并更改了 css。

# c# - C# 或 C++ - 创建假焦点？

> ID：11152622
> 
> 赞同：-1
> 
> 时间：2012-06-22T08:23:43.500
> 
> 标签：c#, c++, windows, winapi

我想知道是否有任何方法通过 C# 或 C++ 发送到伪造或以其他方式欺骗程序认为它有焦点？我在想你可以使用 SendMessage/PostMessage 向它发送一条消息，这会诱使它获得焦点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:37:47.007

没有保证的方法可以让它认为它有焦点，因为它可以通过多种方式检查它是否有焦点。例如，它可能正在检查`WM_SETFOCUS`，然后在收到`WM_KILLFOCUS`. 因此，在这种情况下，您可以通过`WM_KILLFOCUS`使用窗口挂钩发送拦截所有消息来欺骗它。

但是，它也可能通过调用来检查它是否具有焦点`GetFocus`。因此，要在这种情况下欺骗它，您需要绕道`GetFocus`并伪造返回值。您可以尝试这两种方法，它们可能有效，也可能无效，但我不希望它们可靠地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-23T07:45:07.653

我很想`WM_NCACTIVATE`让游戏知道它仍然是焦点。它在我工作的两场比赛中运行良好。

# windows-7 - ACE 可以在 Windows 7 上运行吗？

> ID：11152625
> 
> 赞同：0
> 
> 时间：2012-06-22T08:24:02.430
> 
> 标签：windows-7, ace

我正在寻找一个操作系统抽象库来用于我的下一个项目，我想知道 ACE（自适应通信环境）是否可以在 Windows 7 环境中使用。我检查了 ACE 站点 (www.cs.wustl.edu/~schmidt/ACE.html)，但支持的最后一个 Windows 版本是 XP。由于这似乎是一个大而有影响力的项目，这对我来说似乎很奇怪。

有没有人有关于 Windows 7 的 ACE 支持的具体信息或尝试在该系统上使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:37:33.843

Windows 7 将与 ACE 一起工作，我们会构建/测试它，但仅限于 XP 模式，不使用新的 Windows 7 API 功能

# c++ - 如何在不破坏（结构/对象）内部的指针的情况下删除指向（结构/对象）的指针？

> ID：11152629
> 
> 赞同：0
> 
> 时间：2012-06-22T08:24:09.653
> 
> 标签：c++, object, pointers, struct

如果我有一个指向结构/对象的指针，并且该结构/对象包含其他两个指向其他对象的指针，我想删除“包含两个指针的对象而不破坏它持有的指针” - 我该怎么做？

指向对象 A 的指针（包含指向对象 B 的指针，包含指向对象 C 的指针）。删除对象 A 指向对象 A 的指针被删除，指向对象 B/C 的指针仍然存在。

我需要做些什么来完成这项工作吗？

**更新**

这是一个游戏项目，我希望这能解释它。现在，即使将两个指向 B、C 的指针放在第一个 Struct (A) 中，我也遇到了一些“问题”

```
struct Player
{
    char * Name;
    Weapon* PlayerWeapon;
    Armor* PlayerArmor;
};

struct Weapon
{
    char * Name;
    int Damage;
};

struct Armor
{
    char * Name;
    int Resistance;
}; 
```

这在某种程度上是行不通的。

```
Player* CreatePlayer(char * Name, Weapon* weapon, Armor* armor)
{
    Player *pPlayer = new Player;

    pPlayer->Name = name;
    pPlayer->Weapon = weapon;
    pPlayer->Armor = armor;
}; 
```

之后当玩家“死亡”时，不应删除设备。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:28:56.467

包含在指针 (A) 中的指针 (B & C) 不会被删除，除非您通过析构函数明确执行此操作。但是一旦删除指针 A，就不能使用指针 A 访问 B & C。

注意：您的 A 类中应该有一个复制构造函数和 = 重载运算符，以避免浅拷贝。

如果您想为其他玩家使用相同的盔甲和武器，请确保您没有在玩家的析构函数中删除武器和盔甲。然后你可以像这样对另一个玩家使用相同的指针。

```
Weapon* weapon = CreateWeapon();
Armor* armor   = CreateArmor();

Player* player1 = CreatePlayer("Alpha", weapon, armor);
delete player1;

Player* player2 = CreatePlayer("Beta", weapon, armor);
delete player2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:27:50.743

> 指向对象 A 的指针（包含指向对象 B 的指针，包含指向对象 C 的指针）。删除对象 A 指向对象 A 的指针被删除，**指向对象 B/C 的指针是否仍然存在？**

**不**，它们处于**未定义状态**。任何事情都可能发生在他们身上。可能在您的系统中，您注意到它们的存在，但假设这只是一种幻觉，并不能保证每次都如此。

删除`A*`后，它的所有内容都可用于下一次动态分配。稍后它们可能会被分配给其他对象。某些系统，可能会`0`删除所有被删除的内容。再次，任何事情都可能发生！

> 我需要做些什么来完成这项工作吗？

在删除之前存储`B*`和指向其他指针。然后它完全没问题，因为对象是完整的并且你已经存储了它的地址。`C*``A*`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T08:25:37.233

```
struct Foo
{
   A *a;
   B *b;
}

Foo *foo = new Foo();
delete foo; //foo now points to garbage. you can't use it
foo = nullptr; //don't use foo! 
```

但你可以这样做：

```
Foo *foo new Foo();
//do some stuff with foo
A *a = foo->a;
B *b = foo->b;
delete foo;
foo = nullptr;
// if Foo does not destroy objects pointed by a,b in destructor you can still
//use them through a,b vars
a->doSomeStuff(); //ok
b->doSomeOtherStuff(); //ok 
```

**编辑**

在你的情况下，盔甲和武器不会被摧毁。您只是丢失了指向它们的指针（并导致内存泄漏）。我建议你把你所有的盔甲和武器放在一些容器里（比如`std::vector`）来保存指针

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T08:38:48.753

You should avoid using "naked" pointers. It's better to use a smart pointer class such as `shared_ptr` or `unique_ptr`. They take care of `new` and `delete`, which are very tricky to get completely right unassisted. These are found in Boost, and `shared_ptr` is also in the TR1 library (`std::tr1::`) that probably came with your compiler, or just in plain `std::` if your compiler is more recent.

Although you haven't said much about the program, if it's necessary to do something preserve the pointers, it sounds like the object `A` has the only copy of the pointers to B and C. That is a job for `unique_ptr`.

In C++11,

```
struct A_type {
    std::unique_ptr< B_type > B; // Object *owns* B and C
    std::unique_ptr< C_type > C;
};

std::unique_ptr< A_type > A( new A_type );

auto my_B = std::move( A->B ); // Acquire ownership away from object
auto my_C = std::move( A->B );
A.release(); // Delete object and anything it owns (at this point, nothing)

// my_B and my_C are guaranteed to be destroyed at some appropriate time 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T08:27:41.520

如果不先复制 a 和 b，我认为这是不可能的。

# jquery - PhoneGap - 使用 JQuery 的 Windows 身份验证请求

> ID：11152630
> 
> 赞同：3
> 
> 时间：2012-06-22T08:24:10.713
> 
> 标签：jquery, ios, web-services, cordova, windows-authentication

我正在尝试访问具有**Windows 身份验证**的网络服务。我基本上使用了[这个](http://blog.luksidadi.com/phonegap-cross-domain-ajax-call-basic-http-auth-to-restful-api/)页面上写的大部分内容：

```
$.ajax({
    url: url,
    method: 'GET',
    async: true,
    data: {},
    dataType: 'json',
    crossDomain: true,
    xhrFields: {
        withCredentials: true
    },
    beforeSend: function(xhr) {
        // set authorization header
        xhr.setRequestHeader("Authorization", "Basic " + Base64.encode(username + ":" + password));
    },
    success: function(data){
                // success
    },
    error: function(request, status, error) {
        // handle problem
    }
}); 
```

我还在 .plist 文件中定义了外部主机。我的问题是我总是出错。更糟糕的是，错误函数没有出现任何有用的信息（此输出来自 Firefox，为简化起见）：

```
Object { readyState=0, status=0, statusText="error"} 
```

我也在模拟器上试过，但不是立即给我错误，而是我认为它超时了。我所看到的以及我正在使用的是使用**Basic authentication**的请求。那么有没有办法使用**Windows 身份验证**来实际实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:02:14.013

最后我做了什么：

```
 $.ajax( {
                             url:webServiceLink,
                             method: "GET",
                             timeout:30000,
                             data: "{}",  
                             dataType: "xml",
                             beforeSend : function(req) {
                             req.setRequestHeader("Authorization", 
                                                  make_base_auth (username,password));                             
                             },
                             success: OnGetMemberSuccess,
                             error: OnGetMemberError
                             });
                      }); 
```

在我输入的外部主机中：*****。

* * *

**更新 1.0：**再次停止工作...

**更新 2.0**发现问题：

base 64 编码接受以下字符：

> _keyStr : "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",

如果您将登录名/密码与其他内容一起使用，则会遇到问题。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T07:39:26.033

可能你应该看看[Access-Control-Allow-Headers](https://stackoverflow.com/a/9570852/1478667)

# php - 如何打印使用 Jquery 或 PHp 关联的 div 内容和 css

> ID：11152631
> 
> 赞同：2
> 
> 时间：2012-06-22T08:24:10.973
> 
> 标签：php, jquery, html, printing

我有一个页面，如：

![我的页面](../Images/90c4e92c0fd1b0a92078f0b670d34629.png)

我需要将黄色div的内容打印到pdf（或直接物理打印机）。我需要像你看到的那样打印 div.. 也使用 css 样式.. 我该怎么做？我在其他帖子中看到他们只打印文本内容..

有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:55:23.753

您可以为不同的设备类型分配不同的 CSS 属性。例如：

```
<style type="text/css">
/* all devices */
@media all
{
  #content { display:block;}
}

/* printer specific CSS */
@media print
{
  #content { display:none;}
  #content div#yellow { display:block;}
}
</style> 
```

要打印页面，您可以使用 javascript`window.print()`方法：

```
<form>
<input type="button" value="Print this page" onClick="window.print()">
</form> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-15T09:44:26.213

使用以下代码：

```
<script type="text/javascript">
        function CallPrint(strid) {
            var prtContent = document.getElementById(strid);
            var WinPrint = window.open('', '', 'letf=0,top=0,width=400,height=400,toolbar=0,scrollbars=0,status=0');
            WinPrint.document.write(prtContent.innerHTML);
            WinPrint.document.close();
            WinPrint.focus();
            WinPrint.print();
            WinPrint.close();
        }
     </script>

<a href="#" onclick="javascript:CallPrint('divID')">Print</a> 
```

# .net - 我应该在 System.Timers.Timer 中使用线程池、线程还是后台工作程序？

> ID：11152634
> 
> 赞同：0
> 
> 时间：2012-06-22T08:24:18.727
> 
> 标签：.net, multithreading, backgroundworker, threadpool, task-parallel-library

```
public class JobRunner
{
    internal Timer Timer;
    internal readonly IEnumerable<YuartzJob> Jobs;

    public void Start()
    {
        this.Timer = new Timer(5000);
        this.Timer.Elapsed += Timer_Elapsed;
        this.Timer.Start();
    }

    public void Stop()
    {
        this.Timer.Stop();
    }

    internal void Timer_Elapsed(object sender, ElapsedEventArgs e)
    {
        foreach (var job in Jobs)
        {
            MyActivator.RunJob(job);
        }
    }
}

public class MyActivator
{
    public static void RunJob(YuartzJob job)
    {
        var objectHandle = Activator.CreateInstance(job.AssemblyName, job.ClassName).Unwrap();
        var currentJob = (IJob)objectHandle;
        currentJob.Run();
    }
} 
```

在我使用 MyActivator.RunJob(job) 的地方我应该怎么做：

1.  我应该使用 ThreadPool 调用 MyActivator.RunJob 吗？
2.  我应该使用 Threads 调用 MyActivator.RunJob 吗？
3.  我应该使用 BackgroundWorker 调用 MyActivator.RunJob 吗？
4.  它是否以这种方式工作而不做任何事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:46:24.450

如果您的目标是 .NET 4，最简单的方法是使用任务。任务使用 ThreadPool 中的线程执行方法。.NET 运行时（实际上是一个 TaskScheduler）确保线程池不会被太多任务耗尽：

```
 foreach (var job in Jobs)
    {
        Task.Factory.StartNew(()=>MyActivator.RunJob(job));
    } 
```

任务还允许轻松取消、异常处理和链接，这在使用 ThreadPool 或您自己的线程时是不可能的。

对于早期版本，您应该首先考虑 ThreadPool，并且仅在作业太多且运行时间长以至于它们有耗尽线程池的风险时才创建自​​己的线程：

```
 foreach (var job in Jobs)
    {
        ThreadPool.QueueUserWorkItem(o=>MyActivator.RunJob(job));
    } 
```

Backgroundworker 在 .NET 4+ 中被认为是过时的，并且无论如何只适用于非常粗粒度的并行性。在您的情况下，您必须为每个作业创建一个单独的工作人员，订阅其事件，运行它并在它之后进行清理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T09:38:50.757

如果您想有效地并行处理一组项目，我的首选将是专门为此目的而制作的：[`Parallel.ForEach()`](http://msdn.microsoft.com/en-us/library/dd992001.aspx).

在内部，它使用`Task`s，这意味着它将在`ThreadPool`. 它还尝试`Task`有效地使用 s，所以如果你有一个包含一百万个项目的集合，它不会创建一百万个`Task`s。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-22T08:46:14.420

.NET Framework 提供了四个计时器。其中两个是通用多线程定时器：

*   System.Threading.Timer
*   System.Timers.Timer

另外两个是专用的单线程定时器：

*   System.Windows.Forms.Timer（Windows 窗体计时器）
*   System.Windows.Threading.DispatcherTimer（WPF 计时器）

因此，如果您希望您的方法以多线程方式/并行执行，那么您必须选择前两个中的一个。

[在此处](http://msdn.microsoft.com/en-us/library/system.threading.timer)查找有关此内容的更多信息以及示例源代码

# c# - 取消订阅匿名委托的事件

> ID：11152635
> 
> 赞同：2
> 
> 时间：2012-06-22T08:24:19.460
> 
> 标签：c#, .net, events, delegates, closures

我想知道如何从事件中取消订阅匿名方法。

我已经[在 C# 中检查了 Unsubscribe 匿名方法，](https://stackoverflow.com/questions/183367/unsubscribe-anonymous-method-in-c-sharp)但我的情况略有不同。

我正在匿名方法中访问局部函数变量。

代码如下

```
 private static void Test(Object dependencyObject, DependencyPropertyChangedEventArgs dependencyPropertyChangedEventArgs)
    {
        if (dependencyPropertyChangedEventArgs.OldValue is ObservableCollection<object>)
        {
            (dependencyPropertyChangedEventArgs.OldValue as ObservableCollection<object>).CollectionChanged -=
                (s, e) => SelectedItemsChanged(dependencyObject, e); // TO FIX event unbsubscription via anonymous delegate
        }

        if (dependencyPropertyChangedEventArgs.NewValue is ObservableCollection<object>)
        {
            (dependencyPropertyChangedEventArgs.NewValue as ObservableCollection<object>).CollectionChanged +=
                (s, e) => SelectedItemsChanged(dependencyObject, e);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:27:44.877

你*不能*用匿名代表来做到这一点。为了能够*取消订阅*，您必须使用*通常的*代表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:32:53.383

**新答案，现在问题变了**

你不能，基本上。您的处理程序依赖于`dependencyObject`，它将在每次调用时被捕获在一个新对象中，因此您最终会得到不相等的委托。

您可以创建一个新类来保存依赖对象*并覆盖`Equals`以比较这些对象*而不是使用匿名函数，或者您可以只保存对先前订阅的处理程序的引用。

* * *

**旧答案，当委托不依赖于参数时**

奇怪的是，在这种特殊情况下，您似乎没有捕获任何局部变量。因此，如果您订阅该事件的*唯一地方是来自此方法，您**可能会逃脱：*

 *```
private static void Test(Object a, DependencyPropertyChangedEventArgs args)
{
    NotifyCollectionChangedEventHandler handler = 
        (s, e) => SelectedItemsChanged(dependencyObject, e);

    var oldObservable = args.OldValue as ObservableCollection<object>;
    if (oldObservable != null)
    {
        oldObservable.CollectionChanged -= handler;
    }
    var newObservable = args.NewValue as ObservableCollection<object>;
    if (newObservable != null)
    {
        newObservable.CollectionChanged += handler;
    }
} 
```

由于您现在只有*一个*lambda 表达式，我希望将其转换为单个静态方法，因此新创建的委托将等于原始委托。

但是，我不*建议*这样做。我只是自己创建方法，然后使用方法组转换。*

# ajax - base64 未在 ajax 中编码

> ID：11152643
> 
> 赞同：2
> 
> 时间：2012-06-22T08:24:55.090
> 
> 标签：ajax, html, base64, urlencode

我想通过 ajax 发送 base64 字符串我通过 JavaScript 函数转义对其进行编码

```
data =  escape"data:image/png;base64,iVBOR w0K+GgoAAAAN+SUhEUgAAAU oAA+ADmCAYAAAC+zgMwkAAAgAElEQ+VR4Xu1de3BVx3n"); 
```

它工作正常并将其编码为

```
data%3Aimage/png%3Bbase64%2CiVBOR%20w0K+GgoAAAAN+SUhEUgAAAU%20oAA+ADmCAYAAAC+zgMwkAAAgAElEQ+VR4Xu1de3BVx3n 
```

但是当我通过ajax发送它时

```
$.ajax({
url: 'http://fiveriverstech.com',
type: 'POST',
data: "data="+data,
success: function(response){
                console.log(response)
                }
            }); 
```

`+`它将白色空格的标志替换为`data:data:image/png;base64,iVBOR w0K GgoAAAAN SUhEUgAAAU oAA ADmCAYAAAC zgMwkAAAgAElEQ VR4Xu1de3BVx3n`

我怎样才能防止这样做

[JS小提琴](http://jsfiddle.net/ranasaani/hfkGL/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:29:41.703

您可能想使用`encodeURIComponent()`而不是`escape()`. `escape()`不适用于 URL 和表单数据。

更容易使用

```
data: { data: 'data:image/png;base64,...' } 
```

在您的`$.ajax()`选择中，无需费心对其进行编码；jQuery 会处理一切。

# tridion - 我们可以更换 SiteEdit 2012 中的标签（在 Tridion 2011 上）？

> ID：11152648
> 
> 赞同：11
> 
> 时间：2012-06-22T08:25:25.350
> 
> 标签：tridion, siteedit

现在我一直在实施用户界面 2012，经过一些障碍后它工作得很好。我一直在寻求优化任何 UI 可编辑字段的可用性，并遇到了相关的挑战。

在一个组件中，有几个字段不是强制性的，因此当它们为空时不应显示。一旦编辑器进入 UI 并选择包含所述字段的组件，就会出现几个标签，例如`<add text>`和`<add internal link to component media>`。

我希望将这些标签更改为更能描述其内容的内容，因为当字段不为空时，将向页面添加额外的 html。

例如（使用 Razor Mediator）：

```
@if(Component.Fields.location != null) {
  <span class="row">
    <strong>Where:</strong>
    <span>@RenderComponentField("location", 0)</span>
  </span>
} else {
  <tcdl:ComponentField name="location"></tcdl:ComponentField>
} 
```

当位置字段为空时，它只会显示`<add text>`。我想将其更改为`<Add location to event>`.

我尝试在 tcdl-tags 之间放置一些东西，但即使不在 UI2012 中编辑它们也会显示。我一直在搜索 SDL Live 内容站点，但找不到任何参考。有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:48:47.827

不支持自定义空字段的占位符文本的方式。但是您可以尝试编写一个扩展，它会覆盖以下方法：

```
Tridion.Web.UI.SiteEdit.ComponentField.prototype.setPlaceholderType 
```

此方法负责设置占位符文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T14:16:27.177

当我检查这个时，我一直在寻找相同的东西，但我认为这并不容易 AFAIK。我稍微深入了一下，发现标签是资源文件的一部分`Tridion.Web.UI.Editors.SiteEdit.Strings.resx` `EmptyTextField`。我没有寻求解决这个问题的选项，因为它不是受支持的方式，也不是记录在案的，最重要的是，我仍然没有为每个字段添加我自己的文本的灵活性。

回到你的问题，我提出了一个想法（不一定回答你的问题）并想在这里分享，以便专家提供一些有价值的建议。我没有尝试这个选项（我觉得工作量太大），这在我长长的待办事项列表中，并且可能也有一些缺点。

*   创建具有“默认值”的模式字段（例如，“将位置添加到事件”）。默认文本将显示在您的 UI 中。

*   如果 Schema 字段值与默认值相同，则以某种方式编写您的模板

```
@@if(Component.Fields.location.value == [Compare the schema field definition - default value of the field]) { 
    //--> Note: I could not find a straight API for this.. but I am assuming it should be there.
    @RenderComponentField("location", 0)
} else {
    <span class="row">
        <strong>Where:</strong>
        <span>@RenderComponentField("location", 0)</span>
    </span>
} 
```

*   根据启用的目标类型 UI 执行上述条件检查，因为我们不想显示实时目标等的默认文本。

此外，将 Tridion Idea 作为增强请求发布也会很棒。如果还没有的话，我会在接下来的几天内完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T16:20:00.073

我喜欢这种方法，因为它是一种在现场级别给出作者指示的快速方法。我们通常使用描述字段在 CME 中提供此类帮助。

对于内联编辑，**[内容类型](http://sdllivecontent.sdl.com/LiveContent/content/en-US/UIU4SDLT2011SP1/task_882FF93B152F4C879FFA7F8CAA21ED2D)**（SDL Live Content - 需要登录）是另一种选择，因为它们定义了架构（和*原型组件*）、模板、说明和“保存到”上下文。您可以提供作者替换的虚拟文本。

提示：

*   在原型组件中添加示例内容和/或说明（Lorem Ipsum）。
*   在内容类型描述中添加附加说明。
*   选择原型组件文件夹以外的存储位置。

让我们知道怎么回事。:-)

# iphone - NSDatePicker 显示错误的时间

> ID：11152651
> 
> 赞同：0
> 
> 时间：2012-06-22T08:25:37.503
> 
> 标签：iphone, objective-c, xcode

我正在使用 UIDatePicker，当它选择早上 7:00 时，它会在早上 6:00 显示在 UILableView 中。如何设置 UIDatePicker 以显示正确的时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T08:29:55.920

```
NSLocale *locale = [NSLocale currentLocale];
[dateFormatter setLocale:locale];

self.datePicker.locale = locale; 
```

在你的程序中设置这个

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T08:47:44.390

我认为您的日期选择器可能选择了正确的日期，但您的**标签**显示不正确。使用 an`NSDateFormatter`设置正确的区域设置并根据需要格式化日期。

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.locale = [NSLocale currentLocale]; 
formatter.dateStyle = NSDateFormatterMediumStyle; // e.g.
formatter.timeStyle = NSDateFormatterMediumStyle;

myLabel.text = [formatter stringFromDate:dateFromPicker]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:29:33.547

在里面设置你的标签文本值

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
   // You have the selected row, update the text field.
} 
```

# mysql - 临时表对每个其他表都有计数

> ID：11152654
> 
> 赞同：0
> 
> 时间：2012-06-22T08:25:44.300
> 
> 标签：mysql, sql

我正在尝试在我的 php 脚本中创建一个统计页面。为了从每个表中选择计数，我需要 30 多个这样的查询

```
SELECT COUNT(order_id) as `uncompleted_orders` FROM `orders` WHERE `order_status` != 0 
```

然后我需要像这样运行另一个查询：

```
SELECT COUNT(order_id) as `completed_orders` FROM `orders` WHERE `order_status` = 1 
```

我试过这种方法，但没有奏效：

```
SELECT COUNT(order_id) as `uncompleted_orders` FROM `sd_orders` WHERE `order_status` != 4;
SELECT COUNT(order_id) as `completed_orders` FROM `sd_orders` WHERE `order_status` = 4; 
```

有什么方法可以在 MySQL 中创建一个新的临时表，其中包含其他表的计数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T08:28:46.410

你可以尝试这样的事情：

```
SELECT 
(
   SELECT COUNT(order_id) FROM `sd_orders` WHERE `order_status` != 4
)  as `uncompleted_orders`,
(
   SELECT COUNT(order_id) FROM `sd_orders` WHERE `order_status` = 4
)  as `completed_orders` 
```

您将获得一个结果集，其中包含一行和每个计数的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:51:46.990

如果没有更多信息，就不可能一概而论，但这里有许多可以帮助您的结构。

首先，您的示例实际上来自一个表，而不是两个表。这意味着您可以执行以下操作...

```
SELECT
  COUNT(CASE WHEN order_status =  4 THEN order_id END) AS   complete_orders,
  COUNT(CASE WHEN order_status <> 4 THEN order_id END) AS incomplete_orders
FROM
  sd_orders 
```

这是有效的，因为`COUNT(<something>)`结果中不包含 NULL。如果不包含`ELSE`子句，任何不匹配的内容都会返回 NULL。人们实现相同结果的另一种方法是`SUM(CASE WHEN ? THEN 1 ELSE 0 END)`.

其次，您实际上有多个表，您可以通过几种不同的方式组合结果......

```
-- Where you want one value from each table...
--------------------------------------------------------------------------------
SELECT
  (SELECT COUNT(*) FROM table1 WHERE fieldx = ?)   AS value1,
  (SELECT COUNT(*) FROM table2 WHERE fieldy = ?)   AS value2 
```

```
-- Where you want one row of values from each table...
--------------------------------------------------------------------------------
SELECT
  table1_summary.value1 AS table1_value1,
  table1_summary.value2 AS table1_value2,
  table2_summary.value1 AS table2_value1,
  table2_summary.value2 AS table2_value2
FROM
(
  SELECT
    COUNT(CASE WHEN fieldx  = ? THEN id END) AS value1,
    COUNT(CASE WHEN fieldx <> ? THEN id END) AS value2
  FROM
    table1
)
  AS table1_summary
CROSS JOIN
(
  SELECT
    COUNT(CASE WHEN fieldy  = ? THEN id END) AS value1,
    COUNT(CASE WHEN fieldy <> ? THEN id END) AS value2
  FROM
    table2
)
  AS table2_summary 
```

```
-- Where you want many rows, but of the same fields, from each table...
--------------------------------------------------------------------------------
SELECT
  *
FROM
(
  SELECT
    'Table1'                                 AS source_table,
    fielda                                   AS some_grouping,
    COUNT(CASE WHEN fieldx  = ? THEN id END) AS value1,
    COUNT(CASE WHEN fieldx <> ? THEN id END) AS value2
  FROM
    table1
  GROUP BY
    fielda

  UNION ALL

  SELECT
    'Table2'                                 AS source_table,
    fieldb                                   AS some_grouping,
    COUNT(CASE WHEN fieldy  = ? THEN id END) AS value1,
    COUNT(CASE WHEN fieldy <> ? THEN id END) AS value2
  FROM
    table2
  GROUP BY
    fieldb
)
  AS summary
ORDER BY
  source_table,
  some_grouping,
  value1,
  value2 
```

如您所见，有*很多*方法可以做到这一点。*您*如何处理它完全取决于您的数据和您的需求。

# php - PHP & MySQL 用户名存储和 cookie

> ID：11152655
> 
> 赞同：1
> 
> 时间：2012-06-22T08:25:45.063
> 
> 标签：php, mysql, cookies, hash

如何将用户名安全地存储在数据库中，而不直接将它们添加到 cookie 值中？

> **示例：** 我想显示登录用户的用户名。如果他提前关闭了浏览器，唯一的方法是 $_COOKIE['cookie name'] ，其中 cookie 值与数据库中的用户名链接。所以我不需要散列用户名。

这样对吗？如果它是正确的，它是否安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:32:29.030

1.  您可以将用户名存储在 cookie 中，只要您不在那里保存密码，这是安全的。

2.  您还可以在那里保存 user **id**，然后它不会泄露任何身份验证详细信息，同时让您找到正确的用户。

3.  使用[`sessions`](http://php.net/sessions). 存储的数据存储在`$_SESSION`服务器上**，**而不是客户端上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T08:29:23.373

它是安全的。只是不要将密码存储在客户端（浏览器）上。也永远不要将密码发送到浏览器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T08:30:58.303

下面假设您正在谈论使用 cookie 的持久登录功能。为了记住用户名（但不自动登录），在 cookie 中包含用户名（可选编码）应该没问题。无论如何，密码永远不应该在 cookie 中。

* * *

cookie 不应直接识别，即用户 ID/名称不应出现在 cookie 中。相反，您应该为表中的用户分配足够长的随机数据字符串，并将其存储在 cookie 值中。使用后，您应该更新字符串并发出另一个 cookie。

例如：

```
john | ewojroj1234ojqewor
jack | ljqwelkn1k31n23k33 
```

第二列将放置在 cookie 中。稍后您将针对用户表查询该值，然后：

1.  获取用户数据并存储在会话中
2.  重新生成随机字符串
3.  发出另一个cookie

密码更改和注销也应导致用户令牌字符串发生更改。

为了进一步阅读，Barry Jaspan 写了一篇关于这种方法的[好文章。](http://jaspan.com/improved_persistent_login_cookie_best_practice)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T08:30:48.527

最好的方法是仅将用户表的 user_id（唯一标识主键）存储在 $_COOKIE 或 $_SESSION 变量中 - 可能在 $_COOKIE['user_id'] 中。

然后在每次页面加载时，您可以使用该 ID 从数据库中检索您希望的任何用户信息。例如（请注意，这只是概念/伪代码。您当然会首先清理/清理/验证/绑定 $_COOKIE 或 $_SESSION 数据参数）：

`SELECT * FROM user_table WHERE user_id = $_COOKIE['user_id']`

# startup - 埃启动流程 [beaglebone]

> ID：11152657
> 
> 赞同：5
> 
> 时间：2012-06-22T08:25:48.543
> 
> 标签：startup, beagleboard, angstrom-linux

我有一个 RFID 模块连接到我的 beaglebone 并使用 python 代码读取 ID 标签。现在，我希望我的 python 代码在没有任何命令的情况下登录我的 beaglebone 时直接在后台开始运行。就像在 windows 的启动程序中添加一个程序一样。当您登录 Windows 帐户时，这些程序会立即启动。你知道如何做到这一点吗？

问候

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-14T01:09:08.763

在 /lib/systemd/system/ 中创建一个新文件（在我的示例中为 rfidreader.service），其内容如下：

```
[Unit]
Description=Start Python RFID reader

[Service]
WorkingDirectory=/...Python script path.../
ExecStart=/usr/bin/python rfidreader.py
KillMode=process

[Install]
WantedBy=multi-user.target 
```

然后执行以下命令安装服务：

```
systemctl enable rfidreader.service 
```

要启动服务，您可以重新启动或执行：

```
systemctl start rfidreader.service 
```

要检查服务是否正在运行并从脚本获取最新输出：

```
systemctl status rfidreader.service 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:02:37.353

看看 nodejs 应用程序是如何在板的 3000 端口上运行的，你可以用同样的方式实现你的模块。我认为这是初始化过程的一部分。

[http://www.softprayog.in/tutorials/starting-linux-services-with-init-scripts](http://www.softprayog.in/tutorials/starting-linux-services-with-init-scripts) http://www.linuxquestions.org/questions/linux-general-1/how-do-i-automatically-start -a-program-at-start-up-102154/

# java - java日志/日志服务器

> ID：11152660
> 
> 赞同：0
> 
> 时间：2012-06-22T08:25:54.633
> 
> 标签：java, jakarta-ee, logging, client-server

假设我有只记录任何内容的 DemoServer 项目，并且我创建了另一个项目说 LogServer。所以这就是我想做的；我将同时运行这两个项目，因为 DemoServer 正在运行，它只会继续记录任何内容，并且在 LogServer 项目中，它应该能够访问 DemoServer 生成的日志并将其每 1 分钟保存到一个新的文本文件中。由于这是我第一次这样做，我发现很难弄清楚这两个项目将如何沟通？有人可以详细解释我如何实现这一目标吗？还请发布可能帮助我解决问题的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:36:41.517

我会选择一个本地套接字，它在 Java 中实现起来非常简单，以后也可以在 DemoServer 和 LogServer 位于不同的机器上时使用。

开发它应该很容易：

*   创建自己的`LogMessage`班级
*   通过使用 TCP 套接字创建一个简单的客户端/服务器基础设施，看看[这里](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)
*   `ObjectInputStream`通过使用和`ObjectOutputStream`能够使用[序列化](http://java.sun.com/developer/technicalArticles/Programming/serialization/)来包装套接字流
*   只需通过将日志封装在从一个进程到另一个进程的消息中来发送日志，就完成了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:34:32.563

我建议您深入[研究 oVirt](http://www.ovirt.org)源代码（您可以 git clone 源代码），看看我们如何处理日志收集器应用程序。
有许多选项可以解决您的问题 -
A. 让您的应用程序登录到共享存储（即 - nfs 共享）中 - 它和日志服务器都可以访问。一个 cron 作业将运行一个定期脚本，该脚本将把上次访问的文件（比方说 - 一个小时前）复制到日志服务器可以访问的文件夹中。
B. 使用 log4j 并编写您自己的 Appender，它将您希望日志服务器收集的内容也发送到日志服务器（通过 A 节中建议的文件，或通过任何其他方式） - 这样您就可以控制类别级别基于日志服务器实际可以读取的内容

# android - 如何将活动设置为要恢复的活动（通过多任务）

> ID：11152661
> 
> 赞同：3
> 
> 时间：2012-06-22T08:26:05.983
> 
> 标签：android, android-intent

我在Android上遇到了一点痛苦。我有两个活动，一个是启动屏幕，当您单击应用程序图标时启动，另一个可以在发生特定事件时唤醒（NFC 事件，但这不是问题）。

清单中有声明：

```
<activity android:label="@string/general.appName"    android:name=".activity.SplashActivity" android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>

            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
<activity android:excludeFromRecents="true" android:label="@string/general.appName" android:name=".EventReceiver" android:noHistory="true" android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.nfc.action.TRANSACTION_DETECTED">
            </action>

            <category android:name="android.intent.category.DEFAULT">
            </category>

            <data android:host="secure" android:path="/aXXXXX" android:port="0" android:scheme="nfc"/>
        </intent-filter>
    </activity> 
```

一切正常，这意味着 EventReceiver 在收到特定事件时启动，启动画面正常运行等......但是，当应用程序由事件启动时，首先启动的是 EventReceiver。如果我通过单击手机的主页按钮暂停应用程序，然后再次长按它，它会出现多任务表，其中包含所有最近打开的应用程序。在那里，如果我单击我的应用程序，它会在 EventReceiver 上恢复应用程序，就像发生事件一样。那么您知道一种仅在一个选定活动上恢复应用程序的方法（在我的例子中是 SplashScreen）。或者你知道一种方法来识别应用程序是由多任务功能恢复的吗？（如果我得到这个信息，我也可以在我的 EventReceiver 的 onCreate 上打开好的活动）。

目前，我找到的唯一解决方案是在我的 EventReceiver 活动上放置一个 android:excludeFromRecents="true" 标志。如果应用程序是由事件启动的，这将导致应用程序不会出现在多任务表中。但这有点棘手，我不太喜欢。

你有什么想法 ？

非常感谢您的回答！（对不起我的学者英语^^）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:52:27.300

如果您真的必须检测应用程序何时从“最近”启动，您可以使用意图标志。

```
 if (getIntent().getFlags() & Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY) {
     // Lauched from recent apps.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:32:04.247

不要使用闪屏。它只会减慢您的应用体验，并且没有任何价值。

此外... Android 应用程序是一组丢失的活动... 没有需要启动屏幕的具体入口点。

也就是说......应用程序切换器会将您返回到以前的活动活动。在您的情况下，.EventReceiver。您可以通过使用显示您的 ui 的第二个活动来更改您的结构，以便 EventReceiver 允许您转发。

如果我弄错了，请纠正我......但是你不能用接收器拦截 nfc 事件吗？从那里你应该打开你的 ui 活动。

# ruby-on-rails-3 - 在功能性 Rails 测试中为 authenticate_user 引发设计守望者错误

> ID：11152671
> 
> 赞同：7
> 
> 时间：2012-06-22T08:26:39.493
> 
> 标签：ruby-on-rails-3, devise, functional-testing, warden

我有一个资源，其中新操作需要用户登录才能查看。如果用户在未登录的情况下尝试创建新资源，他们将被重定向（302'd）到登录页面。我的功能测试如下所示：

```
 test "should not get new unless logged in" do
    get :new
    assert_response :redirect
  end 
```

堆栈跟踪看起来像这样：

```
ArgumentError: uncaught throw :warden
    /.../gems/warden-1.1.1/lib/warden/proxy.rb:114:in `throw'
    /.../gems/ruby-1.9.2-p318/gems/warden-1.1.1/lib/warden/proxy.rb:114:in `authenticate!'
    /.../gems/ruby-1.9.2-p318/gems/devise-2.0.4/lib/devise/controllers/helpers.rb:48:in `authenticate_user!' 
```

在新操作之前，我有一个 before_filter 来验证用户。

我明白为什么要进行身份验证用户！失败了，但我不明白为什么它会抛出错误。它不应该像在 webapp 中那样运行吗？将用户重定向到登录页面？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-23T22:34:33.223

按照[文档](https://github.com/plataformatec/devise#test-helpers)说的做：

```
class ActionController::TestCase
  include Devise::TestHelpers
end 
```

特别是，不要[`include Devise::TestHelpers`](https://github.com/plataformatec/devise/issues/1029#issuecomment-1052233)放入[`class`**ActiveSupport**`::TestCase`](http://shobhitic.tumblr.com/post/82973462163/getting-argumenterror-uncaught-throw-warden-with)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-22T02:05:31.060

当 Warden 和/或 Devise 内含物丢失或未添加到正确位置时，就会发生这种情况。将它们添加到 test_helper.rb 是很诱人的，因为这是助手通常会去的地方，但对于 Devise 来说不能正常工作。

有关更多详细信息，请参阅[https://github.com/plataformatec/devise/issues/1029](https://github.com/plataformatec/devise/issues/1029)。

要解决此问题，请在控制器的测试类中同时包含 Devise 助手和 Warden 助手，如下所示：

```
require 'test_helper'                                  
class UserControllerTest < ActionController::TestCase  
  include Devise::TestHelpers                          
  include Warden::Test::Helpers                        
  Warden.test_mode!                                    

  def teardown                                         
    Warden.test_reset!                                 
  end                                                  

  # test "the truth" do                               
  #   assert true
  # end
end 
```

这对于使用 Devise 身份验证的每个控制器都是必需的。

编辑：正如下面评论中提到的，`include Warden:TestHelpers`从 spec_helper.rb（或 test_helper.rb）移动到 rails_helper.rb 也可以。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-27T15:46:50.010

我收到了这个错误，但这是因为我把我`include Devise::TestHelpers`的类定义放在了外面。

```
require 'test_helper'
include Devise::TestHelpers

class Admin::ObservationsControllerTest < ActionController::TestCase
  setup do
  ... 
```

这为我的 7 个测试用例中的 3 个抛出了守望者错误。移动`include`类定义内部修复了一切。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-23T17:42:12.033

我知道这是一个老问题了，但我找到了 Devise wiki 的答案

[https://github.com/plataformatec/devise/wiki/How-To%3a-Test-with-Capybara](https://github.com/plataformatec/devise/wiki/How-To%3a-Test-with-Capybara)

这有一个分步指南，无法在此处重新创建，但第一步是包含 Warden 测试助手

```
include Warden::Test::Helpers
Warden.test_mode! 
```

希望这可以帮助

# linux - 如何在 Elastix 模块中包含 javascript

> ID：11152678
> 
> 赞同：1
> 
> 时间：2012-06-22T08:27:16.107
> 
> 标签：linux, module, datepicker, elastix

我真的需要帮助，包括来自 elastix 监控模块的日期选择器。

问题是我找不到如何添加到模块的头部。我想使用“监控”模块中现有的 js datepicker。

(var/www/html/libs/js/jscalendar/calendar.js)

我正在使用 elastix 2.3.0 ...

请帮忙，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:11:33.723

将它包含在 smarty 模板中，通常是所有报告模块的 filter.tpl。

# javascript - 在浏览器窗口中更改 d3 svg 框的位置

> ID：11152680
> 
> 赞同：3
> 
> 时间：2012-06-22T08:27:26.547
> 
> 标签：javascript, d3.js

我有一个表单，当单击提交时，使用 d3 生成一个 svg（在删除已经存在的旧 svg 之后）。如何使 svg 位于浏览器窗口的左上角，而不是在表单下方？这是删除然后在每次提交时生成一个新 svg 的代码。

```
//(form)
//(function call on form submit)

d3.select("#thesvg").remove();
var svg = d3.select("body")
    .append("svg:svg")
    .attr("width", w + m[1] + m[3])
    .attr("height", h + m[0] + m[2])
    .attr("id", "thesvg")
    .append("svg:g")
    .attr("transform", "translate(" + m[3] + "," + m[0] + ")"); 
```

w、h 和 m 分别是宽度、高度和边距。

我想我可能不得不使用某种样式标签，但我在 github 上的 d3 wiki 中找不到任何样式信息。更一般地说，是否有更多面向图形新手的 d3 信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T13:27:49.067

```
d3.select("body").append("svg:svg") 
```

这将选择正文并将 svg 附加到末尾，使其出现在内容的末尾。

如果您将“body”替换为 div 元素的 id，它会将 svg 附加到该 div。然后可以将 div 放置在您想要的位置。

```
d3.select("#id").append("svg:svg") 
```

# pattern-matching - 正则表达式如何打印匹配模式中的两个之一

> ID：11152683
> 
> 赞同：0
> 
> 时间：2012-06-22T08:27:37.803
> 
> 标签：pattern-matching, mt940

我有正则表达式的问题。我正在编写一个与 mt940 银行对帐单文件中的一行匹配的小程序。我有一个像这样的简单字符串：

```
:60F:C120613PLN245265,82 
```

和一个正则表达式：

```
([C|D]{1})|([0-9]{6})|([A-Z]{3})|([0-9]+(\,[0-9]{2})) 
```

那返回我

```
C
120613
PLN
143783 
4,82 
```

但是最后两行是分开的，我会收回不分开的最后两行，如下所示：

```
C
120613
PLN
1437834,82 
```

我认为，最后一行在“，”之前有 6 个数字，这与我的整个模式中的第二个模式匹配。

我能做些什么来恢复最后两个单词没有分开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:30:08.623

这种模式对我有用：

```
pattern "([C|D]{1})([0-9]{6})([A-Z]{3})([0-9]+,[0-9]{2})" 
```

我已经在**Python**中对其进行了测试：

```
re.findall(pattern, ":60F:C120613PLN245265,82") // [('C', '120613', 'PLN', '245265,82')] 
```

# jquery - 回调 jquery 函数无法正常工作

> ID：11152687
> 
> 赞同：1
> 
> 时间：2012-06-22T08:27:50.880
> 
> 标签：jquery

我希望 screenCheck 函数显示仅在`#contact_email`. 但就我而言，它在此之前运行。我该如何纠正？

```
<script>
function screenCheck() {
    var screenWidth = window.screen.width;
    if (screenWidth == '1024') {
        $('#textAreaMsg label.error').css('margin-left', '99px');
    }
}

$(document).ready(function() {
    $("#contact_email").validate(screenCkeck());​
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:28:36.947

尝试在没有的情况下通过你的回调`()`

```
$("#contact_email").validate(screenCheck); 
```

另请注意，您的函数被调用`screenCheck`而不是`screenCkeck`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:31:47.490

在@F旁边。Calderan 提到，我认为你的

```
$(document).ready(function() {
 $("#contact_email").validate(screenCkeck());​ 
```

需要一个`)};`像

```
$(document).ready(function() {
 $("#contact_email").validate(screenCheck);​
}); // need closing 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:40:10.347

Assuming you're using the [JQuery validator plugin](http://docs.jquery.com/Plugins/Validation/validate#options), you need to pass the callback as part of the options map. For example, to make your callback run after the form has been deemed invalid, you'd write it like this:

```
$("#contact_email").validate({
    invalidHandler: screenCheck
}); 
```

The same goes for the *submitHandler* and/or the *showErrors* handler. To handle all three, you'd write it like this:

```
$("#contact_email").validate({
    invalidHandler: screenCheck,
    submitHandler: submitCallback,
    showErrors: showErrorsCallback
}); 
```

# iphone - Interface Builder 文件中的未知类 Un

> ID：11152688
> 
> 赞同：0
> 
> 时间：2012-06-22T08:27:56.883
> 
> 标签：iphone, objective-c, ios, xcode

在执行示例应用程序期间出现此错误：

> 2012-06-22 10:31:19.720 Health Beat [20283:f803] Interface Builder 文件中的未知类 Un。

我不明白这个错误来自哪里。至于控制台：

```
2012-06-22 10:31:36.648 Health Beat[20283:f803] *** Terminating app due to uncaught
exception 'NSInvalidArgumentException', reason: 'Change kind value 111485392 not
recognized'
*** First throw call stack:
(0....
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:19:37.403

该应用程序正在加载一个包含对名为的类的引用的 nib，`Un`但您的项目中没有这样的类。

检查项目中的 xib 文件。您可能无意中将某个对象的类更改`Un`为 Identity Inspector 中的。

# itextsharp - 如何使用 iTextSharp 创建包含图像和表格的 pdf 文件

> ID：11152692
> 
> 赞同：0
> 
> 时间：2012-06-22T08:28:17.027
> 
> 标签：itextsharp

```
public void genreatePdf()
    {
        StringBuilder sb = new StringBuilder();
        sb.Append("<table>");
        sb.Append("<tr><td><img src='images/my.jpg'/></td></tr>");
        sb.Append("<tr><td>some text</td></tr>");
        sb.Append("</table>");

        string path = Server.MapPath("~/invoice/invoice.pdf");
        Document document = new Document(PageSize.A4);
        PdfWriter.GetInstance(document, new FileStream(path, FileMode.Create));
        document.Open();
        document.Add(new Paragraph(strMailMsg.ToString()));
        document.Close();
    } 
```

pdf文件的输出是

```
<table><tr><td><img src='images/my.jpg'/></td></tr><tr><td>some text</td></tr></table> 
```

qus：预期的格式就像一个包含图像和文本的表格。为什么没有以该格式创建 pdf 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:49:57.393

您需要创建一个表格并将其附加到 pdf 文件中。它不是通过附加 XHTML 来完成的，而是使用 C# 的内部表。

```
Table aTable = new Table(2, 2);    // 2 rows, 2 columns
theTable.AddCell("0.0");
theTable.AddCell("0.1");
theTable.AddCell("1.0");
theTable.AddCell("1.1");

//add the table to the document
document.Add(theTable); 
```

[这](http://www.codeproject.com/Articles/18040/Tutorials-on-creating-PDF-files-using-C-2-0)是一个使用 itextsharp 的简单教程。

# c++ - 将 Unicode UTF-8 和 UTF-16 数据写入 QByteArray

> ID：11152695
> 
> 赞同：1
> 
> 时间：2012-06-22T08:28:32.567
> 
> 标签：c++, qt, encoding, windows-xp, utf

我正在使用 Qt 为我的公司开发一个协议。需要查询 Window Registry 并将获得的值写入预先协商的套接字中。我已将注册表数据读入`QString`. 我必须使用 8 位 Unicode 字符和一些 16 位 Unicode 字符。我使用`QByteArray`在写入套接字之前存储所有数据`QTcpSocket::write()`。必须遵循 Little Endianness。

1.  如何以 Unicode 8 位格式获取数据`QString`（`QByteArray`规范说字符类型对应于`quint8`）？

2.  如何以 Unicode 16 位格式获取数据`QString`（`QByteArray`规范说字符类型对应于`quint16`）？

3.  如何在所有情况下都保持 Little Endianness？

（我没有处理 Unicode/可变字节编码数据的经验）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T09:18:56.413

查看文档是一个好的开始。

1.  [QString::toUtf8()](http://qt-project.org/doc/qt-4.8/qstring.html#toUtf8)
2.  [创建一个以BOM](http://en.wikipedia.org/wiki/Byte_Order_Mark#UTF-16)开头的新 QByteArray 。使用[QString::utf16()](http://qt-project.org/doc/qt-4.8/qstring.html#utf16)获取 ushort 值，将您想要的字节序的上半部分和下半部分屏蔽到 QByteArray 中。
3.  UTF-8 没有/不需要字节序。将 16 位值放入 8 位数组以实现小字节序所需的 ushort 掩码将`0x00FF`是`0xFF00`.
4.  今晚在家里阅读[每个软件开发人员绝对、绝对必须了解 Unicode 和字符集（没有借口！）的绝对最低要求。](http://www.joelonsoftware.com/articles/Unicode.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-28T16:32:13.990

对于您的问题 #2 - How to convert QString to UTF-16 QByteArray，有一个使用 QTextCodec::fromUnicode() 的解决方案，如以下代码示例所示：

```
#include <QCoreApplication>
#include <QTextCodec>
#include <QDebug>

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    // QString to QByteArray
    // =====================

    QString qstr_test = "test"; // from QString
    qDebug().noquote().nospace() << "qstr_test[" << qstr_test << "]";     // Should see: qstr_test[test]

    QTextCodec * pTextCodec = QTextCodec::codecForName("UTF-16");

    QByteArray qba_test = pTextCodec->fromUnicode(qstr_test); // to UTF-16 QByteArray
    qDebug() << "qba_test[";
    int test_size = qba_test.size();
    for(int i = 0; i < test_size; ++i) { // Should see each UTF-16 encoded character per line like this: ÿþt e s t
        qDebug() << qba_test.at(i);
    }
    qDebug() << "]";

    return a.exec();
} 
```

上面的代码已经使用 Qt 5.4 进行了测试。

# jquery - 使用 jQuery Validate 和 jQuery Placeholder Enhanced 验证失败后，占位符消失

> ID：11152696
> 
> 赞同：1
> 
> 时间：2012-06-22T08:28:33.033
> 
> 标签：jquery, forms, internet-explorer, validation, placeholder

我有一个包含多个输入字段的公式的站点。在所有这些输入字段中，我都有包含一些描述的占位符属性。但是我们都知道占位符属性在 IE 中不起作用，所以我也使用 jQuery Placeholder Enhanced 来使占位符在 IE 中显示。这行得通。

但同时我正在使用 jQuery validate 来验证我的表单。当我按下提交按钮并且验证失败时，所有占位符在 IE 中都消失了。

我的验证如下所示：

```
$(".myForm").validate({
    submitHandler: function (form) {
        $.post("/handlers/CustomHandler.ashx", $(".myForm").serialize(),
            function (data) {
                if (data.result.type == "message") {
                    $(".myForm").parent().html(data.result.data);
                }
                else if (data.result.type == "redirect") {
                    location.href = data.result.data;
                }
            }
        );
     }
}); 
```

我尝试使用 invalidHandler 选项并再次触发 placeholderEnhanced() 函数，如下所示：

```
$(".myForm").validate({
    submitHandler: function (form) {
        $.post("/handlers/CustomHandler.ashx", $(".myForm").serialize(),
            function (data) {
                if (data.result.type == "message") {
                    $(".myForm").parent().html(data.result.data);
                }
                else if (data.result.type == "redirect") {
                    location.href = data.result.data;
                }
            }
        );
     },
     invalidHandler: function () {
        if (!Modernizr.input.placeholder) {
            $('input[placeholder], textarea[placeholder]').placeholderEnhanced();
        }
     }
}); 
```

但不幸的是，它不起作用。如果我复制粘贴这一行：

> $('input[placeholder], textarea[placeholder]').placeholderEnhanced();

进入我的 IE 控制台并在验证发现一些错误后触发它，占位符再次显示。我也尝试过发出警报（“表单中有错误”）；在 if 语句中，当按下表单中的提交按钮时会显示。

任何人都有一些线索来说明可能出了什么问题，以及在按下提交按钮并且验证无效后如何使占位符在 IE 中不消失。

提前致谢！

/金

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:59:38.877

问题可能出在 jquery.placeholder.js 中的这段代码中：

```
 // Blank on submit -- prevents submitting with unintended value
    this.form && $( this.form ).submit( function() {
      // $input.trigger( 'focus' ); would be problematic
      // because it actually focuses $input, leading
      // to nasty behavior in mobile browsers
      if ( $input.hasClass('placeholder') ) {
        $input
       .val( '' )
        .removeClass( 'placeholder' );
       }
    }); 
```

在触发 jquery.validate 的 validate 方法后，jquery 会将提交处理传递给此代码。我注释掉了这段代码，占位符在 IE 中停止消失。我在服务器端检查占位符填充的字段。但是如果你想在提交之前清空这些值，你应该以某种方式阻止调用这个方法以防提交错误。如果我弄清楚确切的位置，我会在这里写一个评论。

# aem - 在 Adob e cq5 中运行 JUnitServllet 进行集成测试

> ID：11152703
> 
> 赞同：1
> 
> 时间：2012-06-22T08:28:55.707
> 
> 标签：aem

我的问题是关于在 Adob​​e cq5 中进行集成测试的 JUnitServlet。当它运行测试时，如果测试方法有错误，它只会显示来自他的错误消息。我们如何才能看到我们在测试方法断言中写入的消息。

例如：

如果我在测试方法中有几个“assertNotNull”并且如果测试失败，则 servlet 会向我显示这样的结果：

测试完成：（）：空

我试图深入输入：

测试选择器：RequestParser、testSelector [testClass]、methodName [testMethod]、extension [html]

但它又一次用 thests 运行整个班级。

我能否以某种方式从测试类中只运行一种测试方法并使用此 servlet 查看来自断言的消息？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:25:59.093

您可以尝试在 try/catch 块中构建您的断言——至少最初是这样——如果失败，您可以在其中打印出额外的信息。当我在单元测试输出中被掩盖的测试本身存在问题时，我发现这可以提供更多有用的信息。如果这是问题所在，那么您可能不需要在单个测试中缩小范围。

```
@Test
public void testYourTestName() throws Exception {
    try {
       //Code to prepare the object to be tested
        assertNull("This is my null test", objectToBeTested);
    } catch (Exception e) {
        String failureMessage = "\n" + e.toString() + "\n";
        for (StackTraceElement stackLine : e.getStackTrace()) {
            failureMessage += (stackLine.toString() + "\n");
        }
        fail("Error: " + failureMessage);
    }
} 
```

或者，您可以使用我发现显示更有用的 assertEquals 测试，例如：

```
assertEquals(null, objectToBeTested); 
```

如果上面的 assertEquals 失败，你会得到如下输出：

> testMyTestName(com.myCompany.myApp.myPath.myTests)：预期：<null> 但为：<java.lang.Object@5c9e4d73>

顺便说一句，我不知道如何只运行某个类中存在的一个测试，但是正如您所发现的，您可以缩小范围以运行特定类中的所有测试。要运行在 com.myCompany.myApp.myPath 命名空间中的 SomeTestClass 中找到的测试：

```
http://localhost:4502/system/sling/junit/com.myCompany.myApp.myPath.SomeTestClass.html 
```

# python - CSRF 令牌丢失或不正确，即使我有 {% csrf_token %} 但我使用 HttpResponse

> ID：11152717
> 
> 赞同：3
> 
> 时间：2012-06-22T08:29:57.460
> 
> 标签：python, django, django-csrf

表单.html

```
<form action='/login/' method = 'post'>
    {% csrf_token %}
    <label>Email: (*)</label><input type='text' name='email' value='' /><br />
    <label>Password: </label><input type='password' name='password' value='' /><br />
    <input type='submit' name='submit' value='Log in' />
</form> 
```

和 views.py 我使用 HttpResponse 而不是 render_to_response

```
def login(request):
    success = False
    message = ''

    try:
        emp = Employee.objects.get(email = request.POST['email'])
        if emp.password == md5.new(request.POST['password']).hexdigest() :
            emp.token = md5.new(request.POST['email'] + str(datetime.now().microsecond)).hexdigest()
            emp.save()
            info = serializers.serialize('json', Employee.objects.filter(email = request.POST['email']))
            success = True
            return HttpResponse(json.dumps({'success':str(success).lower(), 'info':info}))
        else:
            message = 'Password wrong!'
            return HttpResponse(json.dumps({'success':str(success).lower(), 'message':message}), status = 401)
    except:
        message = 'Email not found!'
        return HttpResponse(json.dumps({'success':str(success).lower(), 'message':message}), status = 401) 
```

如果使用 render_to_response，我只添加 RequestContext 但 HttpResponse，我不知道该怎么做。

我使用 Django 1.4
我的问题在哪里

==========================

当我更改呈现 HTML 的函数时，我的问题得到了解决：

```
def homepage(request):
    return render_to_response('index.html') 
```

到

```
def homepage(request):
    return render_to_response('index.html', context_instance=RequestContext(request)) 
```

这是一个愚蠢的错误...谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:37:01.307

如果您使用 ajax 发送表单并包含 jQuery，您有两种可能性：

1.  手动将 csrfmiddlewaretoken 数据添加到您的 POST 请求中
2.  通过修改 jQuery ajax 请求标头自动化 CSRF 令牌处理

## 1.手动添加csrfmiddlewaretoken

```
var data = {
    csrfmiddlewaretoken: $('#myForm input[name=csrfmiddlewaretoken]').val(),
    foo: 'bar',
};

$.ajax({
    type: 'POST',
    url: 'url/to/ajax/',
    data: data,
    dataType: 'json',
    success: function(result, textStatus, jqXHR) {
        // do something with result
    },
}); 
```

## 2\. 自动化 CSRF 令牌处理

```
jQuery(document).ajaxSend(function(event, xhr, settings) {
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie != '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) == (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    function sameOrigin(url) {
        // url could be relative or scheme relative or absolute
        var host = document.location.host; // host + port
        var protocol = document.location.protocol;
        var sr_origin = '//' + host;
        var origin = protocol + sr_origin;
        // Allow absolute or scheme relative URLs to same origin
        return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
            (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
            // or any other URL that isn't scheme relative or absolute i.e relative.
            !(/^(\/\/|http:|https:).*/.test(url));
    }
    function safeMethod(method) {
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

    if (!safeMethod(settings.type) && sameOrigin(settings.url)) {
        xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
    }
}); 
```

但是：据说修改ajax请求头是不好的做法。因此，我会选择第一个解决方案。

来源：[跨站请求伪造保护：AJAX](https://docs.djangoproject.com/en/1.3/ref/contrib/csrf/#ajax)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-22T09:04:16.953

Django 文档（[CSRF DOC LINK](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#module-django.middleware.csrf)）清楚地解释了如何启用它。

这应该是启用 csrf 令牌编写视图的基本方式。

```
from django.views.decorators.csrf import csrf_protect

@csrf_protect
def form(request):
    if request.method == 'GET':
            #your code
            context = {}
            return render (request, "page.html", context ) 
```

# php - 在调用动作之前从另一个控制器确定 Yii accessRules

> ID：11152718
> 
> 赞同：0
> 
> 时间：2012-06-22T08:29:57.730
> 
> 标签：php, yii, authorization

是否有一种明智的方法来确定当前用户是否可以根据该控制器的 accessRules 和 accessControl 过滤器访问不同控制器上的操作？

例如，我不想根据用户的角色和该控制器的 accessRules() 中定义的规则，显示指向用户无权访问的控制器操作的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:01:52.607

我相信由于 Yii 如何处理它的控制器，答案并没有什么不同。

唯一的方法是自己解析控制器并在代码中动态添加自己的规则作为控制器的一部分，然后评估是否允许用户通过 bizrule 调用访问特定功能。

但是评论中链接问题的答案是一个明智的答案，并且对于更复杂的基于角色的访问管理来说是首选。由于规则是在外部存储的，您只需使用控制器及其操作和 bam 调用检查功能，您就有了真假。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:10:26.430

绝对地：

```
 Yii::import('application.controllers.YourControllerName');
    $controller = new YourControllerName($this->id);
    echo '<pre>';
    var_dump($controller->accessRules());
    echo '</pre>'; 
```

您可以访问特定控制器的规则。此外，您可以确定当前用户是否可以看到特定控制器的特定操作 =)。

# java - 将 jasperreport 导出为 .pdf 时如何设置 jasperreport 字体

> ID：11152727
> 
> 赞同：0
> 
> 时间：2012-06-22T08:30:52.517
> 
> 标签：java, jasper-reports

在 java 应用程序中将 jasperreport 导出为 .pdf 时，我们如何设置它的字体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-24T11:35:59.243

I need to export cyrillic fonts into jasperreport fo generate pdf. Fonts must be included into jar. In jasperreport v5.6.1 I resolve this so:
Put "ttf" file into "default package".
Put jasperreport_extension.properties into "default package":
*net.sf.jasperreports.extension.registry.factory.ytrpaymentorderpdffonts=testpdf.YtrJasperFontExtensionFactory*
Put mine class "YtrJasperFontExtensionFactory" for font extension into package "testpdf":

```
package testpdf;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import net.sf.jasperreports.engine.DefaultJasperReportsContext;

import net.sf.jasperreports.engine.JRPropertiesMap;
import net.sf.jasperreports.engine.fonts.FontFamily;
import net.sf.jasperreports.engine.fonts.SimpleFontFace;
import net.sf.jasperreports.engine.fonts.SimpleFontFamily;
import net.sf.jasperreports.extensions.ExtensionsRegistry;
import net.sf.jasperreports.extensions.ExtensionsRegistryFactory;

public class YtrJasperFontExtensionFactory implements ExtensionsRegistryFactory, ExtensionsRegistry {
    private List <FontFamily> families;

    @Override
    public ExtensionsRegistry createRegistry(String string, JRPropertiesMap jrpm) {
        return new YtrJasperFontExtensionFactory();
    }

    @Override
    public List getExtensions(Class type) {
        if (type.equals(FontFamily.class)) {
            if (families == null) {
                families = new ArrayList<FontFamily>();
                loadFonts();
            }
            return new ArrayList<FontFamily>(families);
        } else {
            return Collections.emptyList();
        }
    }

    private void loadFonts() {                 
            DefaultJasperReportsContext dJRC = DefaultJasperReportsContext.getInstance();

                SimpleFontFamily family = new SimpleFontFamily();
                family.setName("Times New Roman");
                family.setPdfEmbedded(true); 

                SimpleFontFace sffNormal = new SimpleFontFace(dJRC);
                sffNormal.setTtf("Times_New_Roman.ttf");
                family.setNormalFace(sffNormal);

                family.setPdfEncoding("Cp1251");
                families.add(family);
    }
} 
```

And fonts loaded from stream(jar) now.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:25:01.867

您可以尝试将字体设置为参数。然后您可以传递要在运行时设置的字体名称。或者只是适应这个。[http://jasperforge.org/plugins/espforum/view.php?group_id=102&forumid=103&topicid=5860](http://jasperforge.org/plugins/espforum/view.php?group_id=102&forumid=103&topicid=5860)

# ruby-on-rails-3 - 我们可以使用refinerycms 进行用户身份验证吗

> ID：11152728
> 
> 赞同：4
> 
> 时间：2012-06-22T08:30:52.520
> 
> 标签：ruby-on-rails-3, refinerycms, authentication

正在开发一个网站，我必须为此做用户登录和注册表格以进行身份​​验证。我的问题是我们可以只使用refinerycms 来做到这一点，如果可能的话，请告诉我如何做到这一点。如果不可能，请告诉我哪种方法最好。我正在尝试使用refinerycms 实现用户身份验证。我是炼油厂的新手。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T09:26:49.937

炼油厂使用设计，因此您也可以使用它。您可以创建一个看起来像这样的模型：

```
module Refinery
  module Partners
    class Partner < Refinery::Core::BaseModel
      self.table_name = 'refinery_partners'      

      acts_as_indexed :fields => [:name]

      validates :email, :presence => true, :uniqueness => true

      #devise methods
      devise :database_authenticatable, :recoverable, :rememberable, :trackable,:validatable, :authentication_keys => [:email]

    end
  end
end 
```

不要忘记迁移：

```
class CreatePartnersPartners < ActiveRecord::Migration

  def up
    create_table :refinery_partners do |t|
      t.string :email
      t.string :name

      ## Database authenticatable
      t.string :encrypted_password, :null => false, :default => ""

      ## Recoverable
      t.string   :reset_password_token
      t.datetime :reset_password_sent_at

      ## Rememberable
      t.datetime :remember_created_at

      ## Trackable
      t.integer  :sign_in_count, :default => 0
      t.datetime :current_sign_in_at
      t.datetime :last_sign_in_at
      t.string   :current_sign_in_ip
      t.string   :last_sign_in_ip

      t.timestamps
    end

  end

  def down
    if defined?(::Refinery::UserPlugin)
      ::Refinery::UserPlugin.destroy_all({:name => "refinerycms-partners"})
    end

    if defined?(::Refinery::Page)
      ::Refinery::Page.delete_all({:link_url => "/partners/partners"})
    end

    drop_table :refinery_partners

  end

end 
```

这应该创建您可以使用的基本模型。最后，更改您的扩展中的 routes.rb 以添加设计路线：

```
 devise_for :partners, :class_name => "Refinery::Partners::Partner",
  :controllers => {:sessions => 'refinery/partners/sessions', :passwords => 'refinery/partners/passwords'} 
```

并覆盖炼油厂/合作伙伴/passwords_controller.rb

```
module Refinery
  module Partners
    class PasswordsController < Devise::PasswordsController
    end
  end
end 
```

和炼油厂/合作伙伴/sessions_controller.rb

```
module Refinery
  module Partners
    class SessionsController < Devise::SessionsController
    end
  end
end 
```

现在你应该拥有你需要的一切

# c# - Activator.CreateInstance 上的字典中不存在给定的键

> ID：11152732
> 
> 赞同：4
> 
> 时间：2012-06-22T08:31:16.793
> 
> 标签：c#

我希望你能帮我解决这个问题。它已经困扰了我很长一段时间了。而且我在网上找不到确凿的答案。我有一个简单的类层次结构：从它派生的带有 ClassA、ClassB 和 DefaultClass 的 BaseClass。它们都有一个像 ClassA(Input input) : base(input) ... 之类的构造函数，都非常简单。现在我有以下工厂

```
namespace mynamespace
{
    public class Factory
    {

        public static Dictionary<string, Type> Map = 
        new Dictionary<string, Type>
        {
            {"ClassA", typeof(ClassA)},
            {"ClassB", typeof(ClassB)}
        };
        public static BaseClass Create(Input input)
        {
            Type constructor;
            try
            {
                constructor = Map[input.ClassType];
            }
            catch (KeyNotFoundException)
            {
                constructor = typeof(DefaultClass);
            }
            return (BaseClass) Activator.CreateInstance(constructor, input);
        }
    }
} 
```

如您所见，输入对象的 .ClassType 成员决定了要实例化的类。这种类型的构造一直在为一个简单的调用工作，比如

```
var myClass = Factory.Create(input); 
```

在我的独立应用程序中。现在我必须让应用程序在服务器上运行，并且对 Create 方法的调用接收来自客户端的序列化输入对象。我会说这是有效的应用程序和不有效的应用程序之间的唯一区别。现在，输入是类似的东西

```
[DataContract]
public class Input
{
    [DataMember] public string ClassType;
    [DataMember] public string member1;
} 
```

而之前它没有这样的 DataContract 或 DataMember 注释。好吧，现在代码在 Activator.CreateInstance 行崩溃，出现异常“给定的键不在字典中”。你知道为什么会这样吗？唯一的区别是构造函数中的序列化对象。

非常感谢提前和问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T08:57:11.577

您提供的代码片段应该可以正常工作。查看对象的构造函数。我确信在他们的实现中的某个地方引发了异常。

And I fully agree that better to use Dictionary.TryGetValue() instead of catching exception. Here is useful link to learn exceptions: [Exception Handling](http://msdn.microsoft.com/en-us/library/ms229005.aspx).

# regex - 如果选择了页面上的另一个单选按钮，则仅对控件进行验证：仅允许更改正则表达式

> ID：11152733
> 
> 赞同：0
> 
> 时间：2012-06-22T08:31:18.380
> 
> 标签：regex, c#-4.0, validation

我有一个输入表单，其中的每个字段都附加了正则表达式。每个正则表达式都是可更新的。

我有一个当前具有正则表达式 test|tset 的字段，如果该字段包含其中一个单词，它将基本上返回 true。

现在，如果选择了页面上的特定单选按钮，我应该只做这个测试。

请注意，我需要在正则表达式中执行此操作。

在逻辑上-如果（选择了CorrectRadioButton）则验证应该进行测试| tset否则不进行验证

我选择的编程语言是 c#，但这个问题不需要代码隐藏解决方案。

谁能帮忙解决这个正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:50:56.173

C# 中的正则表达式无法检查外部条件：匹配结果仅取决于输入字符串。

如果您无法添加任何其他代码并且您只能更改使用的表达式，则无法完成。

# android - SQLite 错误代码 17

> ID：11152740
> 
> 赞同：6
> 
> 时间：2012-06-22T08:31:54.543
> 
> 标签：android, sqlite, android-sqlite

我的 SQLite 数据库中的一个表返回以下错误代码：

> sqlite 返回：错误代码 = 17，msg = 准备好的语句在 32 [sql 语句] 中止

据我所知，数据已成功插入。这是我应该关心的事情吗？或者它只是一个错误的错误？根据[这篇](http://www.sqlite.org/c3ref/c_abort.html)文章，它说：

> 数据库架构已更改

它到底是什么意思？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:37:58.897

尝试插入更多元素，这似乎是错误的错误，一旦您插入了您的数据库架构识别的值并停止给出此错误错误..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-15T01:10:46.977

我遇到了同样的错误。您是否要删除数据库然后重新填充它？当我清除数据库然后再次插入大约 200 行时，会出现此“警告”……但一切正常。真奇怪。[sqlite论坛](http://sqlite.1065341.n5.nabble.com/database-schema-has-changed-td210.html)中有一个关于此的主题。

# drag-and-drop - TYPO3 : 在浏览器之间复制记录

> ID：11152742
> 
> 赞同：1
> 
> 时间：2012-06-22T08:32:01.503
> 
> 标签：drag-and-drop, copy, typo3, user-experience, backend

是否有可能或计划提供在不同 TYPO3 安装之间处理记录的拖放方式？

我的意思是 HTML5 的[Draggables](http://draggables.com/)方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:40:12.407

No it's not possible, although idea is very nice. Most probably better place for this question is mailing list of the TYPO3 Core Team.

# maven - 删除码头本地主机后的应用程序名称

> ID：11152744
> 
> 赞同：1
> 
> 时间：2012-06-22T08:32:06.050
> 
> 标签：maven, jetty

我使用 maven 构建应用程序并使用 jetty 插件运行它。让应用程序的名称为 AAA，然后，我如何配置码头以通过 URL 进入我的应用程序，`http://localhost:PORT/`而不是`http://localhost:PORT/AAA/` 在使用 Tomcat 时看到答案，但我对码头很感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:27:29.590

您可以在[此处](http://docs.codehaus.org/display/JETTY/Maven+Jetty+Plugin)或[此处](http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin#Configuring_Your_WebApp)记录的插件配置中设置`<contextPath>`为（基于使用的插件版本。`/`

```
<contextPath>/</contextPath> 
```

# adobe-illustrator - 在illustrator中选择字体大小介于两种大小之间的所有对象？

> ID：11152749
> 
> 赞同：3
> 
> 时间：2012-06-22T08:32:27.757
> 
> 标签：adobe-illustrator

我需要选择大小介于两个值之间的所有文本对象，例如 12 和 14pt（包括 12.1、12.2 等）。这是可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T21:06:37.227

这似乎是脚本的候选者。试试这个：

```
function selectTextWhosePointSizeIs ( minPointSize, maxPointSize )
{
    var doc, tfs, i = 0, n = 0, selectionArray = [];

    if ( !app.documents.length ) { return; }

    doc = app.activeDocument;
    tfs = doc.textFrames;
    n = tfs.length;

    if ( !n ){ return; }

    if ( isNaN ( minPointSize ) )
    {
        alert(minPointSize + " is not a valid number" );
        return;
    }
    else if ( isNaN ( maxPointSize ) )
    {
        alert(maxPointSize + " is not a valid number" );
        return;
    }
    else if ( minPointSize > maxPointSize )
    {
        alert(minPointSize + " can't be greater than "+ maxPointSize);
        return;
    }

    for ( i = 0 ; i < n ; i++ )
    {
        if ( tfs[i].textRange.size >= minPointSize && tfs[i].textRange.size <= maxPointSize )
        {
            selectionArray [ selectionArray.length ] = tfs[i];
        }
    }

    if ( selectionArray.length )
    {
        app.selection = selectionArray;
    }
    else
    {
        alert("Nothing found in this range.");
    }
}

selectTextWhosePointSizeIs ( 12, 14 ); 
```

希望能帮助到你，

洛伊克

# android - 使用 repo 命令回滚？

> ID：11152752
> 
> 赞同：8
> 
> 时间：2012-06-22T08:32:37.853
> 
> 标签：android, git, repository

[使用repo 命令](http://source.android.com/source/using-repo.html)时如何进行回滚？

我对一些文件进行了一些更改，现在我想回滚到使用`repo sync`命令时下载的源。

我还没有提交更改。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T13:38:11.730

正确的命令是：

如果要恢复对工作副本所做的更改，请执行以下操作：
`repo forall -c "git checkout ."`

如果您想恢复对索引所做的更改（即您添加的），请执行以下操作：
`repo forall -c "git reset"`

如果要恢复已提交的更改，请执行以下操作：
`repo forall -c "git revert ..."`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:59:10.920

那就用`git reset`吧。

> Repo 并不是要取代 Git，只是为了让在 Android 环境中使用 Git 更容易。[通过](http://source.android.com/source/version-control.html)

根据[Repo 命令参考](http://source.android.com/source/using-repo.html)，没有等效的`git reset`命令（还没有？）

# kendo-ui - 使用实体框架将 KendoUI 绑定到 Sql 数据

> ID：11152753
> 
> 赞同：1
> 
> 时间：2012-06-22T08:32:38.243
> 
> 标签：kendo-ui, asp.net-mvc

我正在使用实体框架开发一个 Asp.net MVC3 应用程序。我使用 Knockoutjs 进行绑定，使用 KendoUI 作为视图的 UI 部分。我能够实现大部分 KendoUi 小部件，但现在我需要使用从 SQL 服务器获取数据的 KendoUI 网格控件。据我了解，网格小部件适用于 XML 或 JSON。

所以我有一个数据库上下文：

```
public DbSet<FranchiseInfoDto> Franchises { get; set; } 
```

我已经在本地 Sql 服务器的表中保存了一些数据，并从控制器中检索它并将其序列化为 Json，以便我可以以某种方式将其绑定到视图中的网格widjet：

```
private OmegaDB db = new OmegaDB();

        //
        // GET: /Franchise/

        public JsonNetResult Index()
        {
            JsonNetResult jsonNetResult = new JsonNetResult { Formatting = Formatting.Indented };
            var franchises = db.Franchises.ToList();
            jsonNetResult.Data = franchises;
            return jsonNetResult;
        } 
```

序列化的 json 数据格式如下：

```
[{ ParentId: 0, Title: "Deposit", Type: "link", Link: "http://www.abv.bg" }, { ParentId: 2, Title: "Cash", Type: "link", Link: "http://www.facebook.com"}]; 
```

我阅读了有关 KendoUI Grid 的文档，并能够将其绑定到一些本地数据，如下所示：

```
var menus = [{ ParentId: 0, Title: "Deposit", Type: "link", Link: "http://www.abv.bg" }, { ParentId: 2, Title: "Cash", Type: "link", Link: "http://www.facebook.com"}];

var dataSource = new kendo.data.DataSource({
            data: menus,
            schema: {
                model: {
                    fields: {
                        ParentId: { editable: true },
                        Title: { editable: true },
                        Type: { editable: true },
                        Link: { editable: true }
                    }
                }
            }
        });

        $("#grid").kendoGrid({
            toolbar: ["create", "save", "cancel"],
            columns: [
              {
                  field: "ParentId",
                  title: "Id",
                  width: 50
              },
              {
                  field: "Title",
                  title: "Label",
                  width: 100
              },
              {
                  field: "Type",
                  title: "Type",
                  width: 100
              },
              {
                  field: "Link",
                  title: "Link"

              }
              ],
            dataSource: dataSource,
            editable: true,
            groupable: true,
            scrollable: true,
            sortable: true,
            pageable: true
        });​ 
```

但是当我试图将它绑定到返回 Json 的 Index 控制器时，我没有成功。我试过这样的事情：

```
dataSource: {
                            type: "odata",
                            transport: {
                                read: "Franchise/Index" // this is my controller action //where I serialize the data coming from the local sql server to json
                            } 
```

我对编程比较陌生，我不确定这种方法是否正确。任何基于我的示例代码的示例建议将不胜感激。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:31:08.360

我设法用从数据库到 json 的序列化数据填充网格。这是返回 json 数据的控制器代码：

```
public ActionResult SampleData()
        {
            JsonNetResult jsonNetResult = new JsonNetResult { Formatting = Formatting.Indented };
            var f1 = new FranchiseInfoSampleData();
            f1.ParentId = 0;
            f1.Title = "Deposit";
            f1.Type = "functionality";
            f1.Link = "http://www.abv.bg";

            var f2 = new FranchiseInfoSampleData();
            f2.ParentId = 1;
            f2.Title = "Cash Out";
            f2.Type = "link";
            f2.Link = "www.abv.bg";

            List<FranchiseInfoSampleData> sampleData = new List<FranchiseInfoSampleData>();
            sampleData.Add(f1);
            sampleData.Add(f2);

            jsonNetResult.Data = sampleData;
            return jsonNetResult;
        } 
```

这是剑道网格代码：

```
$(document).ready(function () {
            $("#grid").kendoGrid({
                dataSource: {
                    transport: {
                        read: {
                            url: "Home/SampleData",
                            dataType: "json"
                        }
                    },
                    schema: {
                        model: {
                            fields: {
                                ParentId: { editable: true },
                                Title: { type: "string", editable: true },
                                Type: { type: "string", editable: true },
                                Link: { type: "string", editable: true }
                            }
                        }
                    },
                    pageSize: 10,
                    serverPaging: true,
                    serverFiltering: true,
                    serverSorting: true
                },
                height: 250,
                filterable: true,
                sortable: true,
                pageable: true,
                columns: [{
                    field: "ParentId",
                    filterable: false
                },
                            {
                                field: "Title",
                                width: 100
                            }, {
                                field: "Type",
                                width: 200
                            }, {
                                field: "Link"
                            }
                        ]
            });
        }); 
```

# entity-framework - 我可以使用 AutoMapper 将一个列表映射到另一个已经实例化的对象列表吗？

> ID：11152755
> 
> 赞同：3
> 
> 时间：2012-06-22T08:32:42.797
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1, automapper

我正在使用此代码将 DTO 列表映射到其 EF 对应项。我想消除循环，更不用说提取了。后者我可以通过将所有`Employee`对象缓存在字典中来完成，但我被困在循环中。

```
var gridEmps = (List<EmployeeDescriptor>) employeeDescriptorBindingSource.DataSource;
Mapper.CreateMap<EmployeeDescriptor, Employee>();
foreach (var newEmp in gridEmps)
{
    var oldEmp = context.Employees.Single(emp => emp.Id == newEmp.Id);
    Mapper.Map(newEmp,oldEmp);
} 
```

如上所述，AutoMapper 从我的 DTO 映射到一个已经实例化的实体对象，但是如果我要使用两个列表来尝试这个，就像这样，

```
var gridEmps = (List<EmployeeDescriptor>) employeeDescriptorBindingSource.DataSource;
var dbEmps = context.Employees.ToList();

Mapper.CreateMap<EmployeeDescriptor, Employee>();
Mapper.Map(gridEmps, dbEmps); 
```

AutoMapper 如何知道如何根据它们的关键属性将正确的对象从一个列表链接到另一个列表？我知道关键属性也被映射了，但这肯定会与 EF 更改跟踪混淆吗？

如何告诉 AutoMapper 通过它们的关键属性链接源对象和目标对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:30:45.403

我还没有找到如何在没有循环的情况下告诉自动映射器集合合并规则。我的解决方案如下：

1.  创建`TypeConvertor`：`List<EmployeeDescriptor> -> List<Employee>`

    ```
    Mapper
      .CreateMap<List<EmployeeDescriptor>, List<Employee>>()
      .ConvertUsing(new EmployeeListConverter()); 
    ```

2.  将您的循环放在 Convert 的方法中`EmployeeListConverter`

3.  采用`Mapper.Map(gridEmps, dbEmps);`

# class - 如何在 Lua 中将触摸事件监听器添加为类函数？

> ID：11152757
> 
> 赞同：0
> 
> 时间：2012-06-22T08:32:56.167
> 
> 标签：class, lua, coronasdk, addeventlistener

我正在尝试添加 eventlistener 并在类函数中使用它，但我无法成功。你能分析我的代码并帮助我吗？

我的 fish.lua 类：

```
 local class= {}

 function class.color(image)

 local color= display.newGroup();
 color=display.newImage(image)
 color:addEventListener("touch",class.listen)
 return color

end

function class.listen(event)
if(phase.event=="began") then
    print("hi")
 end
 end

return class 
```

我的 main.lua 类：

```
 local fishClass=require "fish" ;

 redfish="fish.small.red.png"
 local fish1=fishClass.color(redfish); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:56:52.960

```
if(phase.event=="began") then 
```

应该：

```
if(event.phase=="began") then 
```

# javascript - 当表单验证为假时，停留在当前页面

> ID：11152760
> 
> 赞同：1
> 
> 时间：2012-06-22T08:33:25.223
> 
> 标签：javascript, forms

如果“名称”输入字段为空，我想留在当前页面上。现在，它显示错误消息，当您单击确定时，它仍会转到下一页（contactcaptcha.php）。

```
function notEmpty(elem, helperMsg){
 if(elem.value.length == 0){
    alert(helperMsg);
    elem.focus();
    return false;

 }
 return true;
}

<form id="action" action="contactcaptcha.php" method="post">
    <fieldset>

      <textarea id="message" name="Message" placeholder="What's on your mind?"></textarea>

      <input id="Name" name="Name"  placeholder="Enter your full name" type="text">

      <input id="Email" name="Email" placeholder="Enter your email address" type="email">

      <input type="submit" onclick="notEmpty(document.getElementById('Name'), 'Please enter your name')" name="submit" value="Send your message">

    </fieldset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:35:08.830

像这样尝试，在元素的`submit`事件中返回你的函数`form`

```
<form id="action" action="contactcaptcha.php" method="post" 
 onsubmit="return notEmpty(document.getElementById('Name'), 'Please enter your name')">
    <fieldset>
     ...
     <input type="submit"  name="submit" value="Send your message">    
    </fieldset>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:36:46.027

缺少`return`关键字：

```
<input type="submit" 
onclick="return notEmpty(document.getElementById('Name'), 'Please enter your name')"   
name="submit" value="Send your message"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T08:45:54.760

当您使用 HTML5 时，您可能希望使用[required 属性](http://diveintohtml5.info/forms.html)：[http ://www.w3schools.com/html5/att_input_required.asp](http://www.w3schools.com/html5/att_input_required.asp)

```
<form>
  <input id="message" required>
  <input type="submit" value="Submit">
</form> 
```

# iphone - ViewController 作为子视图

> ID：11152761
> 
> 赞同：0
> 
> 时间：2012-06-22T08:33:25.540
> 
> 标签：iphone, ios, ipad, uiviewcontroller, uiwebview

我有一个`UIViewController`（DownloadManager）下载网页`UIWebView`并显示下载的内容（比如pdf文件）。我想将它用作可重用组件。

我有另一个`UIViewController`指向一个包含 4 个按钮的屏幕，每个按钮应该从网页下载并显示一个 pdf 文件。我想将下载的 pdf 作为嵌入式子视图显示到当前屏幕。基本上不想导航。

在这里，我尝试使用 DownloadManager 作为子视图并将 pdf 显示为子视图。它工作正常。

1.  我读为每屏幕一个视图控制器。但是我仍然可以使用这种方法吗？

2.  我必须从此屏幕发送电子邮件反馈。一旦我展示 MFMailComposeViewController 之前的下载管理器子视图就会消失 从技术上讲，这里发生了什么？

请在下面找到代码片段：

```
//************************************************
@implement MyViewController

- (void) initWebView
{
    downloadMgr = [[DownLoadViewController alloc] initWithNibName:@"DownLoadViewController" bundle:nil];

    downloadMgr.view.frame = CGRectMake(140, 20, 300, 200);
    downloadMgr.WebView.frame = CGRectMake(140, 20, 300, 200);

    downloadMgr.view.backgroundColor = [UIColor whiteColor];
    downloadMgr.WebView.backgroundColor = [UIColor whiteColor];
    [self.view addSubview:downloadMgr.view];
    [self.view addSubview:downloadMgr.WebView];
}

----
----

- (IBAction)onHomeClick:(UIButton *)sender 
{
    switch (sender.tag) 
    {
        case 101: 
            {
                [self stopWebViewResources];
                if (!downloadMgr) {
                    [self initWebView];
                }
                downloadMgr.NavigationURL = [[NSURL alloc] initWithString:@"https://xxx.yyyyyy.com/sites/pex/iPadFiles/abc.pdf"];        
                downloadMgr.title = @"ABC";
                [downloadMgr LoadURL];
            }
            break;

case 120:
        {
            //Send feedback via email
            if ([MFMailComposeViewController canSendMail]) 
            {
                MFMailComposeViewController *mail = [[MFMailComposeViewController alloc] init];
                mail.mailComposeDelegate = self;

                ----
                ----

                mail.modalPresentationStyle = UIModalPresentationFullScreen;
                [self presentModalViewController:mail animated:YES];
            }
        }
    }
}

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error 
{   
    [self dismissModalViewControllerAnimated:YES];
}

@end
//*****************************************************************

@interface DownLoadViewController : UIViewController <MyWebViewDelegate>{
    NSURL*                            NavigationURL;
    IBOutlet myWebView*              WebView;

    IBOutlet UIActivityIndicatorView* ProgressView;
        NSString*                         DownloadedFileName; 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T08:42:36.250

将下载功能和显示分成两个不同的类会更加健壮。

理想情况下，您应该有一个像“ **Downloader** ”或“ **Download Manager** ”这样的类，它是**`NSObject`**. 此类应进行下载并在完成后通知其**委托**。然后，您可以拥有任意数量的`UIViewController`s，以利用您的 Downloader 类。

# jquery - 选中复选框后更改视图

> ID：11152762
> 
> 赞同：0
> 
> 时间：2012-06-22T08:33:28.617
> 
> 标签：jquery, asp.net-mvc-3, checkbox

我有一个视图可以更改内容而不更改整体视图，（更改视图的一部分）这是我的代码：

**楷模：**

```
public class DisplayData
{
    public int ID { get; set; }
    public DisplayData(int ID)
    {
        this.ID = ID;
    }
} 
```

**控制器：**

```
 public ActionResult PartialDemo(string Data)
    {
        List<DisplayData> Display = new List<DisplayData>();

        if (Request.IsAjaxRequest())
        {
            if (Data == "1")
            {
                Display.Add(new DisplayData(3));
                Display.Add(new DisplayData(4));
            }
            else
            {
                Display.Add(new DisplayData(5));
                Display.Add(new DisplayData(6));
            }
            return PartialView("PartialDemoUC", Display);
        }
        else
        {
            Display.Add(new DisplayData(1));
            Display.Add(new DisplayData(2));
            return View("PartialDemo", Display);
        }
     } 
```

**部分演示UC.cshtml**

```
 @model IEnumerable<dynamic>

 @foreach(var items in Model)
 {
     @items.ID    
 } 
```

**部分演示.cshtml：**

```
 @model IEnumerable<AppTwitter.Models.DisplayData>
  @{
      ViewBag.Title = "PartialDemo";
   }

   <script src="../../Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"> </script>
    @Ajax.ActionLink("**Link_1**", "PartialDemo", "PartialDemo", new {Data= "1" }, new   AjaxOptions { UpdateTargetId = "rsvpmsg" })
    @Ajax.ActionLink("**Link_2**", "PartialDemo", "PartialDemo", new {Data= "2" }, new   AjaxOptions { UpdateTargetId = "rsvpmsg" })

    <div id="rsvpmsg">
    @{ Html.RenderPartial("PartialDemoUC", this.Model);}
    </div> 
```

我会改变`Link_1`，如果`Link_2`被选中，就像点击了链接我该怎么做？`checkbox:``chechbox`

我很抱歉我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:28:48.317

您可以使用标准复选框：

```
@model IEnumerable<AppTwitter.Models.DisplayData>
@{
    ViewBag.Title = "PartialDemo";
}

<div data-url="@Url.Action("PartialDemo", "PartialDemo")" id="checkboxes">
    @Html.CheckBox("Data1", new { data_value = "1" })
    @Html.CheckBox("Data2", new { data_value = "2" })
</div>

<div id="rsvpmsg">
    @{Html.RenderPartial("PartialDemoUC", this.Model);}
</div> 
```

然后在一个单独的 javascript 文件（您需要参考）中订阅[`.change()`](http://api.jquery.com/change/)这些复选框的事件并触发 AJAX 请求：

```
$(function () {
    $('#checkboxes :checkbox').change(function () {
        var value = $(this).data('value');
        var isChecked = $(this).is(':checked');
        var url = $('#checkboxes').data('url');
        $.ajax({
            url: url,
            type: 'POST',
            data: { data: value, isChecked: isChecked },
            success: function (result) {
                $('#rsvpmsg').html(result);
            }
        });
    });
}); 
```

现在，您的控制器操作可以采用 2 个参数，除了知道单击了哪个复选框之外，您还可以知道它的值是选中还是未选中，因为与链接相反，复选框可以有 2 种可能的状态：

```
public ActionResult PartialDemo(string data, bool isChecked)
{
    ...
} 
```

`jquery.unobtrusive-ajax.min.js`哦，如果您不再使用帮助程序，您将不再需要脚本`Ajax.*`。

# vb.net - 向多维数组添加值

> ID：11152763
> 
> 赞同：-1
> 
> 时间：2012-06-22T08:33:32.960
> 
> 标签：vb.net, multidimensional-array

我有一个多维数组，它将保存 3 位值，并且值将通过从 db 读取通过循环添加。当它出现这行代码时：

`*MenuAccess(.Fields("GROUPNO").Value, .Fields("ITEMNO").Value, .Fields("SUBITEMNO").Value) = OKNO*`

它遇到错误，*“对象引用未设置为对象的实例。”*

```
Public MenuAccess(100, 30, 50) As Boolean

Private Sub RtGetMenu_Access()
    Try
        Dim OKNO As Boolean

        Erase MenuAccess

        DBMgr = New cAdodb

        With DBMgr
            .openCnn(cnnSPR)
            .sql(rst1) = "Select * from BSMENU_ACCESS where LEVELCD = '" & Trim(UserTaskLevel) & "' Order by GROUPNO "
            .openRstRead(rst1)

            With .rst(rst1)
                Do While Not .EOF
                    If .Fields("GROUPNO").Value.ToString.Trim <> "" And .Fields("ITEMNO").Value.ToString.Trim <> "" And .Fields("SUBITEMNO").Value.ToString.Trim <> "" Then
                        If .Fields("LEVEL1").Value.ToString.Trim = "Y" Then OKNO = True Else OKNO = False

                        '=> ERROR: 'Object reference not set to an instance of an object.'
                        MenuAccess(.Fields("GROUPNO").Value, .Fields("ITEMNO").Value, .Fields("SUBITEMNO").Value) = OKNO

                    End If
                    .MoveNext()
                Loop
            End With

            .closeRst(rst1)
            .closeCnn(rst1)
        End With

        DBMgr = Nothing
    Catch ex As Exception
        If DBMgr.cnn(cnnSPR).State <> 0 Then
            DBMgr.closeCnn(cnnSPR)
            DBMgr = Nothing
        End If
    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:20:57.770

您缺少数组的初始化

```
Public MenuAccess(100, 30, 50) As Boolean   'Object not initialized in VB.NET 
```

试试这个

```
Public MenuAccess() As New Boolean(100,30,50) 
```

还将字段转换为整数`Integer.TryPrase()`

```
Dim i as Integer=-1, j as Integer=-1, k as Integer=-1
Integer.TryParse(.Fields("GROUPNO").Value.ToString(), i)
Integer.TryParse(.Fields("ITEMNO").Value.ToString(), j)
Integer.TryParse(.Fields("SUBITEMNO").Value.ToString(), k)

If i>=0 AndAlso j>=0 AndAlso k>=0 Then
    MenuAccess(i,j,k) = OkNo
End If 
```

# javascript - JS开关盒不工作

> ID：11152768
> 
> 赞同：18
> 
> 时间：2012-06-22T08:34:02.313
> 
> 标签：javascript, switch-statement

我有一个不起作用的 switch case 语句。我检查了输入，它是有效的。如果用户为 1，则默认。如果 user 是任意数字，则默认。这里有什么问题？我根本不了解javascript。

```
switch (user) {
case 1:
    // stuff
    break;
case 2:
    // more stuff
    break;
default:
    // this gets called
    break;
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-22T08:38:26.463

确保您没有混合字符串和整数。
尝试：

```
switch (user) {
    case "1":
        // stuff
        break;
    case "2":
        // more stuff
        break;
    default:
        // this gets called
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-22T08:37:55.267

问题是数据类型不匹配。将**用户**类型转换为整数。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-22T08:41:39.520

将用户变量的类型转换为整数

```
 switch (+user) {   
    case 1: .. //
 } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-22T08:42:03.967

Javascript 是类型感知的。所以'1'与1不同。在你的情况下，“用户”必须是数字，而不是字符串。您可以通过以下方式进行投射：

```
user = Number(user) 
```

# jquery - 粘贴一大块文本时，文本输入不会扩展

> ID：11152771
> 
> 赞同：1
> 
> 时间：2012-06-22T08:34:26.267
> 
> 标签：jquery

我有一个初始大小的文本输入，比如 2。我想要的是，当我输入它时，大小应该同时扩大（由于文本输入的边框而可见），并在用户按下退格/删除时同时减小删除字符。我正在尝试使用此代码：

```
$("input").live("mouseup mousedown keyup keydown",function() {
x = parseInt($(this).attr('size'));
y = $(this).val().length;
z = x > y ? y : x;
$(this).attr('size',z+2);
}); 
```

现在，当用户一次键入一个字符或按下一个字符键并保持按下时，此代码将按预期工作。当我从某个地方复制一大块文本，关注文本输入，然后通过 CTRL-V 或右键单击并选择“粘贴”选项粘贴到其中时，就会出现问题。我正在用一串 45 W 测试它。发生的情况是文本输入只扩展了一点并且保持这种状态（因此只显示几个 W）。直到我点击它，它才会扩大一点。2 或 3 次后续点击继续扩大它，然后它最终扩大到完整尺寸。另一个奇怪的事情是反过来不是真的，当我专注于输入时，按 CTRL-A 选择整个文本并按退格键，大小减小到原始大小，同时所有文本都消失了。谁能解释为什么会这样？当粘贴一大块文本时，如何同时自动扩展它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:41:19.147

您可以尝试使用 'editable' `div`，如下所示：

*CSS*：

```
div.input{
   display:inline-block; 
   border:1px solid; 
   background-color:white;
} 
```

​<em>标记：

```
<div class="input" contentEditable="true">Type here...</div>​ 
```

*演示->* [**在这里**](http://jsfiddle.net/Yb6KC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:43:17.450

而不是`.live("mouseup mousedown keyup keydown")`我会使用以`.change()`相同方式工作的事件，并且可能也会捕获 CTRL+V 更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:50:09.060

改用事件**`propertychange`**（IE）和**`input`**（其他）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T08:50:56.677

另一个技巧，也许更交叉兼容，是用计时器触发检查。

# python - websocket得到奇怪的字符

> ID：11152774
> 
> 赞同：2
> 
> 时间：2012-06-22T08:34:31.530
> 
> 标签：python, websocket

嗨，我一直在测试 websockets，到目前为止，我已经把它连接起来了。但是当我开始向服务器发送和数据时，我得到了一堆奇怪的字符。

（通过搜索获得这些代码）

这是服务器：

```
import socket
import re
from base64 import b64encode
from hashlib import sha1

websocket_answer = (
    'HTTP/1.1 101 Switching Protocols',
    'Upgrade: websocket',
    'Connection: Upgrade',
    'Sec-WebSocket-Accept: {key}\r\n\r\n',
)

GUID = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11"

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind(('127.0.0.1', 8999))
s.listen(1)

client, address = s.accept()
text = client.recv(1024)
print "RECV----------------------------------"
print text

key = (re.search('Sec-WebSocket-Key:\s+(.*?)[\n\r]+', text)
    .groups()[0]
    .strip())

response_key = b64encode(sha1(key + GUID).digest())
response = '\r\n'.join(websocket_answer).format(key=response_key)

print "SEND----------------------------------"
print response
client.send(response)

while 1:
    try :
        print "SEND----------------------------------"
        client.sendall('hello from server')
        print "RECV----------------------------------"
        print client.recv(1024)
    except :
        print "except"
        break 
```

这是客户端：

```
<!DOCTYPE html>
<html lang="en">
<head>
  <title>WebSocket Echo Client</title>
  <meta charset="UTF-8" />
  <script>
    "use strict";
    // Initialize everything when the window finishes loading
    window.addEventListener("load", function(event) {
      var status = document.getElementById("status");
      var url = document.getElementById("url");
      var open = document.getElementById("open");
      var close = document.getElementById("close");
      var send = document.getElementById("send");
      var text = document.getElementById("text");
      var message = document.getElementById("message");
      var socket;

      status.textContent = "Not Connected";
      url.value = "ws://localhost:8999";
      close.disabled = true;
      send.disabled = true;

      // Create a new connection when the Connect button is clicked
      open.addEventListener("click", function(event) {
        open.disabled = true;
        socket = new WebSocket(url.value, "echo-protocol");

        socket.addEventListener("open", function(event) {
          close.disabled = false;
          send.disabled = false;
          status.textContent = "Connected";
        });

        // Display messages received from the server
        socket.addEventListener("message", function(event) {
          message.textContent = "Server Says: " + event.data;
        });

        // Display any errors that occur
        socket.addEventListener("error", function(event) {
          message.textContent = "Error: " + event;
        });

        socket.addEventListener("close", function(event) {
          open.disabled = false;
          status.textContent = "Not Connected";
        });
      });

      // Close the connection when the Disconnect button is clicked
      close.addEventListener("click", function(event) {
        close.disabled = true;
        send.disabled = true;
        message.textContent = "";
        socket.close();
      });

      // Send text to the server when the Send button is clicked
      send.addEventListener("click", function(event) {
        socket.send(text.value);
        text.value = "";
      });
    });
  </script>
</head>
<body>
  Status: <span id="status"></span><br />
  URL: <input id="url" /><br />
  <input id="open" type="button" value="Connect" />&nbsp;
  <input id="close" type="button" value="Disconnect" /><br />
  <input id="send" type="button" value="Send" />&nbsp;
  <input id="text" /><br />
  <span id="message"></span>
</body>
</html> 
```

这是我点击连接按钮后得到的结果：

```
RECV----------------------------------
GET / HTTP/1.1
Upgrade: websocket
Connection: Upgrade
Host: localhost:8999
Origin: null
Sec-WebSocket-Protocol: echo-protocol
Sec-WebSocket-Key: v6Fu1rJURofc7iIPbeaw0Q==
Sec-WebSocket-Version: 13
Sec-WebSocket-Extensions: x-webkit-deflate-frame
Cookie: BG_PREFS=searches_includeapocrypha@no&fontsize@medium&language@en&default_version_display@all&default_version@SND&default_
version_overrides@no&quicksearch_search@&pslookup_language1@en&pslookup_language2@&pslookup_language3@&pslookup_language4@&pslooku
p_language5@&pslookup_showmoresearches@closed&pslookup_showversions@open&pslookup_showmoreversions@closed&pslookup_showoptions@ope
n&pslookup_showfootnotes@yes&pslookup_showxrefs@no&pslookup_showwoj@no&pslookup_showversenums@yes&pslookup_showheadings@yes&pslook
up_showindent@no&pslookup_multilayout@columns&pslookup_multisort@passage&pslookup_embed-versenum@true&pslookup_embed-xref@false&ps
lookup_embed-footnote@false&pslookup_embed-heading@false&keysearch_search@&keysearch_language1@en&keysearch_language@en&
SEND----------------------------------
HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Protocol: echo-protocol
Sec-WebSocket-Accept: qVkmFtRs1w8OUwZSe5nMpTWNxbI=

SEND----------------------------------
RECV----------------------------------
keysearch_bookset@&keysearch_spanbegin@1&keysearch_spanend@73&keysearch_limit@none&keysearch_startnumber@1&keysearch_searchtype@al
l&keysearch_showversions@open&keysearch_showmoreversions@closed&keysearch_showoptions@open&keysearch_displayas@long&keysearch_resu
ltspp@25&keysearch_sort@bookorder&keysearch_wholewordsonly@no&commentary_source@1&topindex_source@1&topindex_search@&topindex_sear
ch_type@any&topindex_resultspp@25&audio_source@3&audio_book@&audio_chapter@&dict_source@1&dict_search@&dict_search_type@any&pslook
up_search@>>>>&pslookup_version@NIV>>>>&undefined&keysearch_version@31>>>>; CoreID6=83844698672113373932637&ci=90320803; __atuvc=2
|20 
```

握手似乎很好，它已连接。然后当我从客户端发送文本“测试”时，我得到了这个。

```
üäQk╩¼%♫╣╪ 
```

这和字符编码有什么关系吗？我无法获取发送到服务器的“测试”字符串。而且我在客户端也没有得到任何东西。

注意：我在 Chrome 19 上测试了客户端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:37:20.933

根据 RFC，客户端不发送文本数据，而是发送[二进制帧](https://www.rfc-editor.org/rfc/rfc6455#section-5)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:44:42.237

WebSockets 是一个框架协议。它与原始套接字具有相似的延迟，但数据不是通过网络发送的原始数据：

*   **标头**：帧的开头有一个两字节的标头。如果有效负载分别长于 125 字节或 65535 字节，则这也可以是 4 字节或 10 字节标头。

*   **Binary or Text**：标头还指示数据是二进制还是文本。在您的情况下，数据是文本。要发送二进制数据，您必须从 Javascript 发送 ArrayBuffer 或 Blob。如果您发送一个字符串，那么数据将是文本。如果服务器发送二进制帧，则 onmessage 事件将接收 blob 或 arraybuffer，具体取决于 WebSocket.binaryType 字段的设置。

*   **屏蔽**：必须屏蔽从客户端（浏览器）到服务器的所有数据。这是为了解决行为不端的缓存中介的理论问题。从服务器到客户端的数据不能被屏蔽。标头有一个位指示有效负载是否被屏蔽。如果它被屏蔽，那么头后面的前四个字节就是屏蔽。这将作为有效负载数据的运行 XOR 应用，以取消屏蔽它。

在您的示例中，您发送了一个文本字符串“test”。服务器收到 10 个字节的数据：2 个字节的标头，4 个字节的掩码，4 个字节的掩码有效载荷。

请参阅[IETF 6455 WebSocket 协议规范](https://www.rfc-editor.org/rfc/rfc6455#section-5.2)的第 5.2 节，了解帧如何工作以及标头中字段的位级细分的图表。

# javascript - 如何禁用您确定要离开此页面吗？onbeforeunload 中的消息框

> ID：11152780
> 
> 赞同：1
> 
> 时间：2012-06-22T08:34:51.817
> 
> 标签：javascript, internet-explorer, onbeforeunload

当浏览器关闭时，我使用以下 onbeforeunload 进行调用。我得到了正确的警报，我也得到了**你确定要离开这个页面吗？**消息框由网络浏览器自动生成。但是当浏览器关闭时我不需要显示该消息框。如何禁用**您确定要离开此页面吗？**消息框？

```
window.onbeforeunload = function(event) 
{

           if($.browser.msie)
           {
               alert('Test');
               return false;
            }

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:36:27.727

不要返回值，即：

```
return; 
```

或者，由于条件是一个常数因子：

```
if($.browser.msie) {
    window.onload = function() {alert('Test');};
} else {
    window.onbeforeunload = function(event) {
        return 'Are you sure to quit?'; // <-- Message is displayed in *some* browsers
    }
} 
```

如果您正在尝试实现一种阻止用户导航的方法：**没有办法实现**. 无法离开页面将是一种可怕的体验。

# git - 如何从本地分支 (GIT) 中的所有提交生成补丁文件？

> ID：11152783
> 
> 赞同：3
> 
> 时间：2012-06-22T08:35:02.700
> 
> 标签：git, patch

我想生成一个包含来自本地分支的所有提交的补丁。不与大师相提并论。（因为部分提交已经与 master 合并。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:43:14.960

您可以使用`git diff srchash..HEAD > whatever.patch`with`srchash`作为基本提交的 SHA-1。如果当前未签出分支，请使用`branchname`代替`HEAD`

# ajax - 动态创建 PrimeFaces 对话框

> ID：11152789
> 
> 赞同：5
> 
> 时间：2012-06-22T08:35:32.403
> 
> 标签：ajax, jsf-2, dialog, primefaces

我正在使用 primefaces 3.3.1 和 JSF 2 (Mojarra 2.1.9)。

我有一个带有 DataTable 组件和 Dialog 的页面来显示 DataTable 条目的详细信息。当我有一个对话框时，这非常简单。我想要的是尝试允许用户同时打开两个或三个带有不同条目详细信息的 dailog。有人知道如何从服务器获取与 AJAX 的整个对话，而不仅仅是对话内容吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T10:25:00.047

是的，我做到了。为此，我在 backing bean 中以编程方式创建了必要的对话框。我知道这并不是真正的最佳实践，但在这一刻，我认为这只是可能的解决方案。首先，我添加了一个组面板，它是我的 JSF 页面上的对话框容器。然后在支持bean上我有一些这样的代码：

```
UIComponent panelGroup = facesContext.getViewRoot().findComponent("panel_id");
Dialog dialog = new Dialog();
dialog.setHeader("Sample");
dialog.setVisible(true);
dialog.setMinimizable(true);
...
panelGroup.getChildren().add(dialog);
...
RequestContext requestContext = RequestContext.getCurrentInstance();
requestContext.update("panel_id"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T08:40:44.250

对话 id 也可以是动态的，因此您可以创建一些 id 或其他值并将其提供给他。

```
<p:dialog header="Choose Delimiter Type" id="dialog"
    widgetVar="exportDialog#{p.Id}" resizable="false" > 
```

并通过按钮调用；

```
<p:commandButton id="id" value="xxx"
            actionListener="#{p.export2CSV}" ajax="false"
            onclick="exportDialog#{p.tabId}.show()">                
        </p:commandButton> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-21T11:14:30.387

@newuserua 您的代码不起作用 widgetVar 值仅在页面加载时设置一次

```
...
requestContext.update("panel_id"); 
```

上面的行更新了完整的面板，它刷新了所有现有的对话框及其内容。

# c# - 将表单发送到另一个域的页面

> ID：11152791
> 
> 赞同：0
> 
> 时间：2012-06-22T08:35:56.443
> 
> 标签：c#, asp.net, html, forms

我有一个包含大量数据的表格。

有一个`Submit`按钮。

单击它后，`asp:validators`将执行其`client validation`.

并且一两个`Server Validators`将`server validation`在服务器端进行。

如果一切正常`validated`，将显示感谢页面，将发送一封电子邮件并将数据存储到数据库中。

之后，将有另一台服务器需要相同的数据存储在另一个数据库中。

所以，我的问题是如何将数据传输到另一个域，另一个 URL。

有人写道，这可以通过使用 2 个`Submit`按钮来完成，一个执行验证和其他正常功能，然后单击第二个按钮。

第二个按钮将使用`PostBackURL`.

这是正确的方法还是有更好的方法来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:47:13.977

当您在服务器上验证了所有数据后，您可以[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)向最终 URL 发出 a。您不想为此依赖客户端。

# jquery-ui - 向 slickgrid 添加额外的复选框单元格：使用 jquery 对话框时复选框事件不起作用

> ID：11152792
> 
> 赞同：0
> 
> 时间：2012-06-22T08:36:00.313
> 
> 标签：jquery-ui, jquery-ui-dialog, slickgrid

我已经建立了一个带有两个复选框列的 slickgrid。我使用一个光滑的格式化程序来构建第二个复选框列：

```
(function ($) {
    // register namespace
    $.extend(true, window, {
       "Slick": {
         "Formatters": {
            "Checkbox": Checkbox
         }
       }
    });

    function Checkbox(row, cell, value, columnDef, dataContext) {
       return '<input type="checkbox" >';
    }
})(jQuery); 
```

这是 jsFiddle 示例：http: [//jsfiddle.net/9mb4T/10/](http://jsfiddle.net/9mb4T/10/)

**问题**是如果我点击 第二**个复选框，这个复选框不会被标记**。Slickgrid 可能隐藏了该事件。

任何的想法？

提前致谢！

**编辑**：这只发生在我在 Jquery 对话框中构建 Slickgrid 时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T22:22:49.307

这是一个 z-index 问题。包含复选框的单元格具有来自 SlickGrid 的显式 z-index 1，而 jQuery UI 对话框具有（动态计算的）1002 之一。因此，您的点击不会进入复选框。

您可以通过在引用的 slick.grid.css 或专门针对您的示例案例中调整 SlickGrid 样式来修复，如下所示：

```
#grid .slick-cell {

  z-index: auto;
}​ 
```

这是一个演示这种方法的分叉小提琴：http: [//jsfiddle.net/bargar/JPqpa/](http://jsfiddle.net/bargar/JPqpa/)

# c# - 为什么 Enumerable.OrderBy 方法在不使用 Comparer 时工作得更快

> ID：11152795
> 
> 赞同：4
> 
> 时间：2012-06-22T08:36:14.793
> 
> 标签：c#, linq, enumerable

我已经编写了排序方法的代码测试速度。它生成一个集合并使用不同的方法对其进行排序。

```
public void TestMethod1()
    {
        var unsortedCollection = GenerateCollection();

        var toSort = unsortedCollection.ToList();
        Console.WriteLine("OrderBy x.A: " + Measure(() => toSort.OrderBy(x => x.A).ToArray()) + "ms");
        toSort = unsortedCollection.ToList();
        Console.WriteLine("OrderBy x: " + Measure(() => toSort.OrderBy(x => x).ToArray()) + "ms");
        toSort = unsortedCollection.ToList();
        Console.WriteLine("OrderBy x using Comparer: " + Measure(() => toSort.OrderBy(x => x, new Comparer()).ToArray()) + "ms");
        toSort = unsortedCollection.ToList();
        Console.WriteLine("OrderBy x using Comparer<int>.Default: " + Measure(() => toSort.OrderBy(x => x.A, Comparer<int>.Default).ToArray()) + "ms");
        toSort = unsortedCollection.ToList();
        Console.WriteLine("OrderBy x using Comparer<SimpleObject>.Default: " + Measure(() => toSort.OrderBy(x => x, Comparer<SimpleObject>.Default).ToArray()) + "ms");

        toSort = unsortedCollection.ToList();
        Console.WriteLine("Sort: " + Measure(() =>
                                                 {
                                                     toSort.Sort();
                                                     toSort.ToArray();
                                                 }) + "ms"); 
        toSort = unsortedCollection.ToList();
        Console.WriteLine("Sort using Comparison: " + Measure(() =>
                                                                  {
                                                                      toSort.Sort((x, y) => x.A.CompareTo(y.A));
                                                                      toSort.ToArray();
                                                                  }) + "ms");
        toSort = unsortedCollection.ToList();
        Console.WriteLine("Sort using Comparer: " + Measure(() =>
                                                                {
                                                                    toSort.Sort(new Comparer());
                                                                    toSort.ToArray();
                                                                }) + "ms");

    }

   private List<SimpleObject> GenerateCollection()
   {
       int length = 10000000;
       var list = new List<SimpleObject>();
       for (int i=0; i<length; i++)
       {
           list.Add(new SimpleObject());
       }
       return list;
   }

    private long Measure(Action method)
    {
        Stopwatch sw = new Stopwatch();
        sw.Reset();
        sw.Start();
        method();
        sw.Stop();
        return sw.ElapsedMilliseconds;
    }

    public class Comparer: IComparer<SimpleObject>
    {
        public int Compare(SimpleObject x, SimpleObject y)
        {
            return x.A.CompareTo(y.A);
        }
    }
    public class SimpleObject: IComparable<SimpleObject>
    {
    public int A;
    private static Random rand = new Random();
    private const int maxValue = 1000000;

    public SimpleObject()
    {
        A = rand.Next(maxValue);
    }

    public int CompareTo(SimpleObject other)
    {
        return A.CompareTo(other.A);
    }
} 
```

以下是结果：

```
OrderBy x.A: 8732ms
OrderBy x: 19136ms
OrderBy x using Comparer: 17054ms
OrderBy x using Comparer<int>.Default: 8758ms
OrderBy x using Comparer<SimpleObject>.Default: 19817ms
Sort: 8000ms
Sort using Comparison: 9515ms
Sort using Comparer: 8990ms 
```

我想知道为什么 OrderBy 使用 Comparer 的工作时间比没有 Comparer 的时间长，为什么使用比较的 Sort 工作时间比使用 Comparer 的时间长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:21:51.590

这似乎是对象比较的问题。OrderBy 方法缓存键。int 键比较快，对象键比较长。

# android - 通过覆盖设备后退按钮避免显示以前的活动

> ID：11152800
> 
> 赞同：1
> 
> 时间：2012-06-22T08:36:40.283
> 
> 标签：android, activity-stack

我有一个 Activity_A ，它有一个注销选项。单击该按钮后，我调用了登录活动。因此，当我在登录活动中单击设备后退按钮时，它会将我带回具有注销选项的 Activity_A。我想要的是，当我在登录活动时单击设备后退按钮时，它必须将我带到设备主屏幕。诸如“关闭应用程序”或“清除活动堆栈”之类的东西。

我试过这个：

```
Intent intent = new Intent(Activity_A.this, LoginActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

但它没有用，我也尝试在上面的代码中使用finish（），然后它把我带到我在Activity_A之前调用的Activity（如预期的那样）。

我搜索了我的案例，但找不到完美的解决方案，有人可以帮我实现我想要的吗？

我有一个想法，在我的登录活动中覆盖设备后退按钮 onClick，以便它显示设备的主屏幕并清除所有活动堆栈......这可能吗？如果是，它安全吗？

这就是我在 LoginActivity 中所做的，就像我想要的那样工作

```
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();

    Intent startMain = new Intent(Intent.ACTION_MAIN);
    startMain.addCategory(Intent.CATEGORY_HOME);
    startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(startMain);
} 
```

但是有没有其他方法可以在不覆盖 onBackPressed() 的情况下实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:39:39.883

您需要覆盖`back`按钮事件并在那里执行所有所需的操作。

```
@Override

    public void onBackPressed() {
       //do whatever you desire
       return;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:47:43.907

尝试使用 startActivityForResult

在 Activity_A 中：

```
Intent intent = new Intent(Activity_A.this, LoginActivity.class);
startActivityForResult(intent,0);

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == 0) {
        this.finish();
    }
} 
```

在登录活动中：

```
LoginActivity.this.setResult(0); 
```

# c++ - 从资源加载 png 文件（没有 MFC、ATL）

> ID：11152804
> 
> 赞同：2
> 
> 时间：2012-06-22T08:36:56.463
> 
> 标签：c++, winapi, visual-c++, gdi+, gdi

我想从资源中加载 PNG 文件。有一种大致 MFC 方式（使用[CResourceStream](http://social.msdn.microsoft.com/Forums/sa/vcgeneral/thread/b958bfbd-5aee-4ff1-9088-53c8da0f0eb3)）：

```
CImage img;
CResourceStream str(0, MAKEINTRESOURCE(id), _T("PNG"));
img.Load(&str);
CBitmap *bmp(CBitmap::FromHandle(img.operator HBITMAP()); 
```

但是一个项目是 MFC-less 和 ATL-less。如何编写以非 MFC 样式加载 png？据我了解，这个目的可以通过 GDI+ 来实现

***编辑：***有一个适当的加载[实现](http://code.logos.com/blog/2008/09/displaying_a_splash_screen_with_c_part_i.html)`png`从[答案流](https://stackoverflow.com/a/4568205/148405)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T22:45:41.017

好吧，GDI+ 可以轻松地从 IStream 或文件中的 PNG 数据创建 HBITMAP，但是从资源到 IStream 需要一些工作。

如果你调用 CreateStreamOnHGlobal(NULL, TRUE, &stm)，其中 stm 是一个 IStream* 变量，它基本上会给你一个临时的内存流。您可以使用 FindResource、LoadResource、LockResource 和 SizeofResource 来获取指向资源数据及其大小的指针。一旦你拥有了这两个东西，你就可以使用 IStream::Write 将数据从你的资源复制到 IStream 中。

一旦你有一个包含 PNG 数据的 IStream，将 IStream 传递给 GDI+ [Bitmap 构造函数](http://msdn.microsoft.com/en-us/library/ms536319%28v=vs.85%29.aspx)，并使用[GetHBITMAP 方法](http://msdn.microsoft.com/en-us/library/ms536295%28v=vs.85%29.aspx)获取 HBITMAP。

# c# - 如何创建 POCO 类

> ID：11152806
> 
> 赞同：-2
> 
> 时间：2012-06-22T08:37:04.783
> 
> 标签：c#, poco

> **可能重复：**
> [“POCO”定义](https://stackoverflow.com/questions/250001/poco-definition)

我有一门简单的课，叫做书。它需要转换成 POCO 类。有什么变化。需要做吗？

```
class **BOOKS**
{
    private string authorName;
    public string *getName*
       {
          return authorName;
       }
    public string *setName*
       {
         authorName=value;
      }
} 
```

具有 2 个道具的非静态类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:42:14.167

没有变化 - 你已经***准备好***了:-D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:41:44.940

```
public class Book
{
    public string AuthorName { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:42:47.523

根据 biziclop 的链接，它可能已经是一个普通的旧 C# 对象。但为了更清楚，你可以这样写：

```
class BOOKS
{
    public string AuthorName { get; set; }
} 
```

此功能称为[Auto-Implemented properties](http://msdn.microsoft.com/en-us/library/bb384054.aspx)，并在 C# 3.0 中引入

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T09:06:56.730

如果您的课程在您的课程中不包含任何第三方属性。

请查看有关 POCO 的 MSDN 链接。

[http://msdn.microsoft.com/en-us/library/cc681329.aspx](http://msdn.microsoft.com/en-us/library/cc681329.aspx)

在上面的代码中，将这两个方法替换为一个属性。

```
private string _authorName;
public string AuthorName
{
    get
    {
        return _authorName;
    }
    set
    {
        _authorName=value;
    }
} 
```

# php - windows7上如何使用PHP访问MSSQL

> ID：11152809
> 
> 赞同：-1
> 
> 时间：2012-06-22T08:37:19.003
> 
> 标签：php, sql-server

最好的方法是：

1.  访问 MSSQL 数据库（在本地运行 2012，在 LAN 上运行 2005+2008）
2.  在胜利 7 64 位
3.  使用 PHP？

我想在 PHP 中使用 MSSQL 函数，例如 mssql_query 和 mssql_connect，而不是 ADODB.Connection 或 PDO。

这听起来很简单，但我遇到了一些麻烦......我认为 WAMP 是一个安全的选择，但显然较新的版本不包含 MSSQL 扩展。用 ntwdblib.dll 搞砸了一点无济于事。

有人运行所描述的设置，或者知道设置它的好教程吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:47:08.470

是的，我以前也遇到过这个问题。您会认为默认驱动程序从 php 到 mssql 都存在并且易于安装，但由于某些奇怪的原因，它们不是。

我的工作场所使用 FreeTDS 使其工作。尝试这些链接以获取更多信息：

*   [http://www.peceny.de/misc/freetds.html](http://www.peceny.de/misc/freetds.html)
*   [http://www.freetds.org/](http://www.freetds.org/)
*   [http://docs.moodle.org/22/en/Installing_MSSQL_for_PHP#Using_FreeTDS_on_Windows](http://docs.moodle.org/22/en/Installing_MSSQL_for_PHP#Using_FreeTDS_on_Windows)

希望有帮助。

# database - Prestashop 1.4.3 我需要获取数据库值并在 MailAlerts 模块中使用它

> ID：11152811
> 
> 赞同：1
> 
> 时间：2012-06-22T08:37:23.000
> 
> 标签：database, prestashop

我在 Prestashop 论坛上问过这个问题，但目前还没有回复。

我需要能够将 sagepay 代码添加到 mailalert 模块中使用的新订单电子邮件。

我所拥有的是；

```
// Filling-in vars for email
$template = 'new_order';
$subject = $this->l('New order');
$spvtxc = Db::getInstance()->ExecuteS("SELECT vendortxcode FROM `"._DB_PREFIX_."sagepay_transactions` WHERE id_cart = '$order->id_cart'");
...
$templateVars = array(
'{firstname}' => $customer->firstname,
'{lastname}' => $customer->lastname,
...
'{sagepay_no}' => $spvtxc,
...
 ); 
```

每次我测试交易时，$spvtxc 都会返回“ARRAY”。我努力了;

```
$spvtxc = '5'; 
```

正如预期的那样，这将返回 5 作为 sagepay 编号，因此我确信正在调用变量并将其添加到电子邮件中。我试过了；

```
$spvtxc = Db::getInstance()->ExecuteS("SELECT vendortxcode FROM `"._DB_PREFIX_."sagepay_transactions` WHERE id_cart = '2'"); 
```

所以这应该将 $spvtxc 设置为肯定存在的值（我手动将它添加到数据库中），但这仍然返回'ARRAY'。

如果有人能指出我错过了什么，那将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:36:26.973

因为我只需要返回一个值，所以我应该使用 getValue 函数而不是 ExecuteS。

```
$spvtxc = Db::getInstance()->getValue("SELECT vendortxcode FROM `"._DB_PREFIX_."sagepay_transactions` WHERE id_cart = '$order->id_cart'"); 
```

这返回了值。

# android - 从谷歌地图或任何地图库获取实时交通数据

> ID：11152816
> 
> 赞同：0
> 
> 时间：2012-06-22T08:37:48.100
> 
> 标签：android, google-maps, google-maps-api-3, android-mapview, android-maps

我需要从谷歌地图或yandex地图等中提取交通数据。

我的 Android 应用上有一张地图，用户可以选择旅行的起点和终点。然后我计算最小道路距离（不是像乌鸦飞的那样），一个算法在这个过程之后运行。该算法需要实时交通数据。

另一种选择是交通假设（在高峰时间，我可以给出交通费率）。如果找不到解决方法，我将使用此选项。

有没有可用的api来解决这个问题..

有任何想法吗？

提前致谢。

# c++ - QT 背景图片

> ID：11152817
> 
> 赞同：1
> 
> 时间：2012-06-22T08:37:49.970
> 
> 标签：c++, qt, background, designer, qwidget

我尝试通过在其样式表中添加 (background-image:url(images/background.png) 来在我的主 QWidget 上添加渐变背景，但我注意到性能大幅下降并且我还没有编写任何代码。

背景图像是渐变，16 位 1x800 像素 png。

所以我的问题是，如何在不减慢程序速度的情况下为我的 QWidgets / QFrames 添加一个漂亮的渐变？仅使用设计器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:29:51.487

尝试这个：

```
QPalette thePalette = this->palette();
QLinearGradient gradient(0, 0, 0, 50);
gradient.setColorAt(0, QColor(227,177,27));
gradient.setColorAt(0.25, QColor(170,177,167));

gradient.setColorAt(1, Qt::white);
QBrush brush(gradient);
thePalette.setBrush(QPalette::Window, brush);
setPalette(thePalette); 
```

并自由修改颜色和位置。虽然这是代码，但它可能很有用。

# jquery - Form submit, Jquery

> ID：11152823
> 
> 赞同：0
> 
> 时间：2012-06-22T08:38:09.547
> 
> 标签：jquery, forms, submit

If i submit form in such way:

***HTML***

```
<form id="form" name="form" action="test_url">
  <input type="text" name="test" value="">
  <input type="button" onclick="this.form.submit" value="submit">
</form> 
```

***jQuery***

```
$('#form').submit(function() {
  alert('ok');
  return false;
}); 
```

Can I prevent submission with jQuery?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:38:38.847

```
$('#form').submit(function(e) {
  e.preventDefault();
  alert('ok');
}); 
```

**[DEMO](http://jsfiddle.net/SKEPM/5/)**

passing event argument (here, `e`) to submit callback you can stop form submission using **[`.preventDefault()`](http://api.jquery.com/event.preventDefault/)** method.

From jQuery doc about `.preventDefault()`:

> If this method is called, the default action of the event will not be triggered.

### Note

Change

```
<input type="button" onclick="this.form.submit" value="submit"> 
```

to

```
<input type="submit" value="submit"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:38:46.723

yes, just passing the event along with the handler and using `preventDefault()` method

```
$('#form').submit(function(evt) {
   evt.preventDefault();
   alert('ok');
}); 
```

Reference: [http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

# plone - Copy/paste plone portlets

> ID：11152837
> 
> 赞同：2
> 
> 时间：2012-06-22T08:39:12.370
> 
> 标签：plone

Is there any existing add-on that allows user to copy and paste context portlets?

If not - are there any contraindications to implement it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:44:22.543

我不知道任何提供此功能的插件。

管理 portlet 屏幕的 UI 有点难以添加复制/剪切/粘贴按钮，所以我会说尝试通过在下拉菜单中移动所有操作。

对 portlet 的操作是：

*   向上/向下移动（显示条件）
*   删除
*   隐藏
*   编辑（点击标题）

我知道用户认为“x”是隐藏 portlet 的操作……这就是为什么我相信带有全文操作的下拉菜单会比更多图标更好。

```
--------------
portlet title

actions v
-------------- 
```

并且 portlet 标题不应该是链接。

# android - 为什么我的应用不在打开 txt 文件的应用列表中？

> ID：11152838
> 
> 赞同：10
> 
> 时间：2012-06-22T08:39:14.517
> 
> 标签：android, android-intent, broadcastreceiver

我有一个文本阅读器应用程序，旨在当我单击文本文件打开它时接收来自 Android 系统的意图。但我的应用不在系统弹出的列表中。以下是我的代码：

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.broadcastreceivertest1"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<application
android:icon="@drawable/ic_launcher"
android:label="@string/app_name" >
<activity
android:label="@string/app_name"
android:name=".BroadcastReceiverTest1Activity" >
<intent-filter >
<action android:name="android.intent.action.MAIN" />

<category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
</activity>

<receiver android:name="MyBroadcastReceiver"> 
<intent-filter> 
<action android:name="android.intent.action.ACTION_VIEW" /> 
<action android:name="android.intent.action.ACTION_EDIT" /> 
<action android:name="android.intent.action.ACTION_PICK" /> 
<data android:scheme="file" /> 
<data android:mimeType="*/*" /> 
<data android:pathPattern=".*\\.txt" />    
<data android:host="*" /> 
</intent-filter> 
</receiver> 

</application>

</manifest> 
```

我的扩展广播接收器

```
public final class MyBroadcastReceiver extends BroadcastReceiver {
private String TAG = "MyBroadcastReceiver";

@Override
public void onReceive(Context context, Intent intent) {
// TODO Auto-generated method stub
Intent i = new Intent(context, BroadcastReceiverTest1Activity.class);
i.putExtra("URI", intent.getData());
context.startActivity(i);
Log.d(TAG, "Leaving onReceived...");
}
} 
```

我的活动将由广播接收器打开

```
public class BroadcastReceiverTest1Activity extends Activity {

private String uri ="";
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
final Intent intent = getIntent();

final String action = intent.getAction();

if(Intent.ACTION_VIEW.equals(action)){
uri = intent.getStringExtra("URI");
TextView textView = (TextView)findViewById(R.id.textView);
textView.setText(uri);

}

}
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-22T09:12:56.160

您需要将您的应用与文件扩展名相关联。为此，请在意图过滤器中添加这两行，然后您就可以开始了

```
<data android:scheme="file" />
<data android:mimeType="*/*"/>
<data android:pathPattern=".*\\.pdf" /> 
```

你的清单看起来像这样

```
<activity name="com.your.activity">
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />
        <data android:scheme="file" />
        <data android:mimeType="*/*" />
        <data android:pathPattern=".*\\.txt" />
    </intent-filter>
</activity> 
```

`<data android:scheme="file" />`=> 这定义文件必须是本地的，而不是来自 http 或其他

`<data android:mimeType="*/*" />`=> 匹配任何 mime 类型

`<data android:pathPattern=".*\\.txt" />`=> 这是您指定要匹配的扩展名的地方

希望这有帮助

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-21T18:35:07.920

详细说明 HERO 的伪代码，这有效地工作：

改变`<manifest>`这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.broadcastreceivertest1"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="9" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:label="@string/app_name"
            android:name=".BroadcastReceiverTest1Activity" >
            <intent-filter >

                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />
                <data android:scheme="file" />
                <data android:mimeType="*/*" />
                <data android:pathPattern=".*\\.txt" />
            </intent-filter> 
        </activity>
    </application>
</manifest> 
```

**放下你的广播接收器**，因为它是不必要的。

更改您的 BroadcastReceiverTest1Activity 类（它**不需要是您的主要活动**，请参阅下面的奖励）：

```
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;
public class BroadcastReceiverTest1Activity extends Activity {
    private String TAG = "TagOpenTxt";
    private String uri ="";
    private Uri uri2;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);
        final Intent intent = getIntent();  
        final String action = intent.getAction();

        if(Intent.ACTION_VIEW.equals(action)){
            //uri = intent.getStringExtra("URI");
            uri2 = intent.getData();
            uri = uri2.getEncodedPath() + "  complete: " + uri2.toString();
            TextView textView = (TextView)findViewById(R.id.textView);
            textView.setText(uri);
            // now you call whatever function your app uses 
            // to consume the txt file whose location you now know 
        } else {
            Log.d(TAG, "intent was something else: "+action);
        }
    }
} 
```

您已经有效地**为 TXT 文件创建了一个意图侦听器**，如果用户决定使用它，它将调用您的应用程序（除非用户之前已将文件类型 TXT 关联到另一个应用程序......）

您的应用不需要**处于活动状态**即可捕获意图。安装后，系统会将其识别为您选择的特定 mime 类型和/或扩展（比通过 mime 类型关联更容易）的“goto 应用程序”之一。

奖励：您可以有一个单独的 MAIN 活动，当您的 BroadcastReceiver 被调用时，它将在与您的应用程序**相同的沙箱中执行**，而不会影响它（您必须在您的 MAIN 活动的`onResume`方法中实现它）。

您可以**将文本数据读**入**静态变量 [sloppy]**或者您可以将其放置在**永久且安全的****SQLite**数据库中，例如，无论应用程序和/或手机是否关闭。

 **您可以让活动自行终止，甚至永远不会启动布局/窗口 - 如果您的用户想要某种方式确认 txt 文件已正确且完全被应用程序使用，这有点奇怪。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-22T08:49:52.717

您必须使用过滤器属性注册一个 ACTIVITY 而不是广播接收器。**

# javascript - Disable JavaScript while reading with urllib2

> ID：11152839
> 
> 赞同：1
> 
> 时间：2012-06-22T08:39:21.590
> 
> 标签：javascript, python, urllib2

I'm trying to scrape a web page that contains 200+ `<li class="classToGet">` elements, which are loaded with AJAX as one scrolls down. When I read the site's source with `urllib2.urlopen(url).read()` I can only get the initial 100 `<li>`s.

When I turn JavaScript off in my browser and go to the page, all 200+ `<li>`s are displayed. How do I disable JavaScript for urllib2 as it loads the page?

Thanks for the help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T16:53:02.883

我认为您与 http 标头用户代理有关我做了一个从 Google 图片获取图片的小项目。一开始，我使用的头部如下：

```
Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/28.0.1500.71 Safari/537.36 
```

但是，我得到了在 Pinterest 中工作的页面，这不是我想要的。因为它必须获取页面。所以我将 User-Agent 值更改为另一个值：

```
Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5 (.NET CLR 3.5.30729) 
```

然后，它现在可以找到。它可以给我我想要的。

# error-handling - 如何处理 Primefaces 延迟加载中的错误？

> ID：11152840
> 
> 赞同：5
> 
> 时间：2012-06-22T08:39:26.833
> 
> 标签：error-handling, primefaces, lazy-loading, growl

我很难让用户知道[PrimeFaces](http://primefaces.org/) `LazyDataModel#load`方法中发生的异常。

我正在从数据库中加载数据，当出现异常时，我不知道如何通知用户。

我尝试添加`FacesMessage`到`FacesContext`，但 Growl 组件上未显示消息，即使 Growl 设置为`autoUpdate="true"`。

使用[PrimeFaces 3.3](http://primefaces.org/downloads.html)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T08:07:24.850

它不起作用，因为`load()`在 Render Response 阶段调用了方法（您可以通过打印检查这一点`FacesContext.getCurrentInstance().getCurrentPhaseId()`），此时所有消息都已被处理。

对我有用的唯一解决方法是在 DataTable 的*“页面”*事件侦听器中加载数据。

**html:**

```
<p:dataTable value="#{controller.model}" binding="#{controller.table}">
     <p:ajax event="page" listener="#{controller.onPagination}" />
</p:dataTable> 
```

**控制器：**

```
private List<DTO> listDTO;
private int rowCount;
private DataTable table;

private LazyDataModel<DTO> model = new LazyDataModel<DTO>() {
        @Override
        public List<DTO> load(int first, int pageSize, String sortField,
                SortOrder sortOrder, Map<String, String> filters) {
            setRowCount(rowCount);
            return listDTO;
        }
    };

public void onPagination(PageEvent event) {
    FacesContext ctx = FacesContext.getCurrentInstance();
    Map<String, String> params = ctx.getExternalContext()
            .getRequestParameterMap();

    // You cannot use DataTable.getRows() and DataTable.getFirst() here,
    // it seems that these fields are set during Render Response phase
    // and not during Update Model phase as one can expect.

    String clientId = table.getClientId();
    int first = Integer.parseInt(params.get(clientId + "_first"));
    int pageSize = Integer.parseInt(params.get(clientId + "_rows"));

    try {
        listDTO = DAO.query(first, pageSize);
        rowCount = DAO.getRowCount();
    } catch (SQLException e) {
        ctx.addMessage(null,
                new FacesMessage(FacesMessage.SEVERITY_ERROR,
                    "SQL error",
                    "SQL error"));
    }
} 
```

希望这可以帮助。

# android - UI Pattern for loading images from a background thread

> ID：11152841
> 
> 赞同：-1
> 
> 时间：2012-06-22T08:39:28.987
> 
> 标签：android, android-ui

I have code that reloads images via HTTP from the main thread and displays them, right after setting up the layout.

This is now deprecated since network access must no longer be done from the main thread.

At first, I changed it to load the images from a a background thread and then update the ImageViews. But, the user experience changed since the images now "pop out."

Is it possible to make the images load seamlessly? Or, should I display a progress bar or status message while the images reload.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:45:17.397

无缝加载需要延迟显示整个用户界面，这可能不是你想要的。加载图像后，您可以使用动画淡入图像。

# rest - How to design a Restful API with the resource hierarchy?

> ID：11152842
> 
> 赞同：0
> 
> 时间：2012-06-22T08:39:30.990
> 
> 标签：rest, uri, restful-url

There are products and reviews of products. So, I can get product list like this...

```
GET /products 
```

also I can fetch one product or reviews or the product like this...

```
GET /products/{productID}
GET /products/{productID}/reviews 
```

Those are clear. but the problem happens when I want to get all reviews I wrote. I could create uri like this..

```
1\. GET /products/reviews?author=myId 
```

or

```
2\. GET /reviews?author=myID 
```

However, the problem of first one comes from conflict between `{productID}` and reviews. the problem of next one comes from relation products and reviews because reviews should be under the products according to the hierarchy.

How can I get all reviews I wrote with `RESTful` API?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:16:15.283

要获得给定作者为**所有**产品撰写的所有评论，一种 RESTful 方式可以做到这一点

获取 /authors/{authorId}/reviews

如果您想获取给定作者为**单个**产品撰写的所有评论，那么您可以使用

(a) 获取 /authors/{authorId}/products/{productId}/reviews

我喜欢这种方法，而不是在查询字符串中指定 productId 或 authorId。作者包含产品，产品包含评论，所以这是一个不错的 RESTful URL。但是，如果您想使用查询字符串，则可以使用以下任一方法：

(b) 获取 /products/{productId}/reviews?authorId={authorId}

(c) 获取 /authors/{authorId}/reviews?productId={productId}

但我个人更喜欢选项（a）而不是选项（b）或（c）。我认为它以更简洁的方式描述了对象层次结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:45:57.150

通常路线是这样的

获取 /products/:product_id/reviews?author=myID

所以参数是 - product_id - author

这样，您将获得某个产品和作者的所有评论。

但是，如果您想要所有评论，那么这是正确的：

获取 /reviews?author=myID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-30T13:02:25.957

如果我是你，我会使用第二个，因为平面 URI 通常比分层 URI 短，而且较短的 URI 更容易路由：意外输入 URI 模板更难。

所以使用

*   `GET /reviews?author={myID}`
*   `GET /reviews?product={productID}`

也可以。（如果您有不同的评论类型，也许最好使用`product-reviews`而不是仅仅使用`reviews`。）

只是为了避免误解 REST 没有 URI 结构约束，这些是实现细节，因此您可以使用两个建议的 URI。您应该记录它们并应用 HATEOAS 约束。

# jquery - recursive/auto-executing functions in Jquery behaves differently in Firebug

> ID：11152845
> 
> 赞同：3
> 
> 时间：2012-06-22T08:39:54.323
> 
> 标签：jquery, recursion, firebug

I am trying to create a jQuery Gallery that lets the user flip (with previous, next buttons) through 'icons' which contain photos, movies, PDF documents.

My strategy is as follows:

*   keep jQuery ignorant of the actual contents of the icon,
*   the actual content comes from an Ajax callback, which returns an HTML string,
*   if my php-code so decides, a previous and/or next button maybe present in that HTML string,
*   if those buttons are present, bind a click event to them,
*   the click event makes a recursive call to mainLoop() which shows the new icon.

Here is the code:

```
function mainLoop() {
if (icons[newIndex] !== IFM_APPENDED ) { // tests whether this icon has already been loaded
    $.ajax({
        type: 'POST',
        url: '/callback/div_supply',
        data: {iconindex: newIndex},
        success: function(data) {
            $('#jquery-lightbox').append(data); // inserts new icon into the DOM
            icons[newIndex] = IFM_APPENDED; // registers that this icon has been loaded
            if ($('#icon'+newIndex+' .prev-button').length !== 0) { // test if the previous button is present
                $('#icon'+newIndex+' .prev-button').click(function () {
                oldIndex = newIndex;
                newIndex -= 1;
                mainLoop();
                }); // END $('#icon'+newIndex+' .prev-button').click()
            } // END if ($('#icon'+newIndex+' .prev-button').length !== 0) 
            if ($('#icon'+newIndex+' .next-button').length !== 0) { // test if the previous button is present
                $('#icon'+newIndex+' .next-button').click(function () {
                oldIndex = newIndex;
                newIndex += 1;
                mainLoop();
                }); // END $('#icon'+newIndex+' .prev-button').click()
            } // END if ($('#icon'+newIndex+' .prev-button').length !== 0) 
        } // END succes:
    }); // END $.ajax
} //  END if (icons[newIndex] !== IFM_APPENDED )
$('#icon'+oldIndex).hide(); // hide the old icon
$('#icon'+newIndex).show(); // hide the new icon
}

$(document).ready(function() {
// Hide some elements to avoid conflict with overlay in IE. These elements appear above the overlay.
$('embed, object, select').css({ 'visibility' : 'hidden' });
$("#gallery li").click(function() {
    _set_interface();
    mainLoop();
}); // END  $("#gallery a").click(function
}); // END $(document).ready(function() 
```

This code works fine when I step through mainLoop() in the Firebug debugger.

However, when I run it, the script just hangs. It also ends up hanging when I step though the $(document).ready(function(). There a no console.log() calls which could throw Firebug off.

I suspect there is something wrong with the way I have set up recursion.

What is going wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:19:14.850

好的，我（有点）发现了发生了什么。

问题是由回调 HTML 中明确声明**display:none引起的。**当我这样做时， .hide() 方法无法将其转换为**display: block**。

当您认为这在使用 Firebug 时确实有效时，情节会变厚。但是直接在 Firefox 中运行代码时会失败。

我仍然不确定到底是什么击中了我……

**编辑**

在我联系 Dreamhost 支持后，这个问题就消失了。所以，我认为我这边没有任何问题，但是服务器上的某些设置不正常。但是，我从来没有知道真正的问题是什么。

# python - python multi threading communication

> ID：11152846
> 
> 赞同：0
> 
> 时间：2012-06-22T08:39:56.130
> 
> 标签：python, multithreading

I use a thread pool and and I submit some tasks to be proccessed.

Sometimes a server that I ping or my internet connection could be down. This can be determined by any of the running threads.

In that case I would like the thread that detected the error to notify the others to pause their execution until the error is fixed.

Do you know how is this possible?

I add to the above. The ideal solution would be : when a threads detects the program to send a message to all other threads to wait. Also it should notify an external server and after receiving that everything is ok from the server to send again a signal to the other threads to continue the work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T12:51:32.197

我使用 threading.Event 找到了它

我只是有一个活动

```
event = Event() 
```

我使用

```
event.wait() 
```

一开始我

```
event.set() 
```

当一个线程检测到错误时

```
event.clear() 
```

并且线程正在等待直到

```
event.set() 
```

这似乎有效

# java - Subtracting and comparing Dates

> ID：11152851
> 
> 赞同：1
> 
> 时间：2012-06-22T08:40:21.803
> 
> 标签：java, android, date, calendar

I have found some similar Que's on *SO* but had not find the solution.

I have today's `Date` as following: (Let's say this as **Date1** and it's value as `2012-06-22`)

```
 Calendar cal = Calendar.getInstance();
    SimpleDateFormat dateformatter = new SimpleDateFormat("yyyy-MM-dd");
    Date start = cal.getTime();
    String currentDate=dateformatter.format(start); 
```

* * *

I'm retrieving 4 values from the user:

*   Particular Date (Assume `5`)
*   Particular Month (Assume `1`)
*   Particular Year (Assume `2012`)
*   No. of days (Assume `7`)

So this date, say **Date2** becomes `2012-01-05` (*yyyy-MM-dd*) along with **No. of days** set to `7`.

* * *

I want to compare **Date 1** and **Date 2-No. of days**.

I know that by using following snippet, particular no. of days can be subtracted from a calender instance.

```
Calendar calendar = Calendar.getInstance();
calendar.add(Calendar.DATE, -7); 
```

But since I'm having **Date2** in form of `String`, I'm not able to follow this approach.

Any help appreciated.

## Edit:

From your suggestions, I'll be able to convert `String` to `Date` by using `parse` method of `SimpleDateFormat`.

Now I've 2 `Date` Objects.

*   How do I find **Difference** between them in terms of `days`, `months`, and `years`?
*   How to **Subtract** particular no. of days, say `7`, from a particular date, say `2012-01-05`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:08:54.377

据我了解，您现在有两个日期，并且您想从日期中减去特定的天数。

首先，您可以使用`SimpleDateFormat`将日期转换为字符串和字符串转换为日期

现在减去天说7。你可以得到日期的时间并从中减去7 * 24 * 60 * 60 * 1000

```
 long daybeforeLong = 7 * 24 * 60 * 60 * 1000;
try {

Date todayDate = new Date();

long nowLong = todayDate.getTime();

Date beforeDate = new Date((nowLong - daybeforeLong));

    } 

catch (ParseException e) {
// TODO Auto-generated catch block
                                                e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T08:42:16.957

用于`SimpleDateFormat`将`String`（表示日期）转换为`Date`

例如 ：

```
Date parsedDate  = new SimpleDateFormat("yyyy-MM-dd").parse("2012-01-05"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T08:43:51.597

如果您可以*使用*Joda [Time](http://joda-time.sf.net)代替`Date`/ `Calendar`，请这样做。它会让你的生活更轻松。

如果不是，听起来您不想*格式化*当前日期 - 相反，您想从用户那里*解析* `Date2`：

```
Date date2 = dateFormatter.parse(text); 
```

然后您可以*创建*一个日历并减去特定的天数，或者（如果您正在谈论经过的时间 - 您需要考虑您在此处围绕 DST 转换和时区的行为）您可以只减去 7 * 24 * 60 * 60 * 1000 毫秒，从`date2.getTime()`.

从根本上说，您应该尽可能早地转换*出*字符串格式，并且仅在您真正需要时转换*为字符串格式 - 当然不是为了比较。*此数据的自然表示是`Date`或`Calendar`（假设您坚持使用 JDK），因此请努力将您的数据转换为该表示。

不过，您有几个真正的“业务”问题需要考虑：

*   您想将当前*日期*与用户给出的日期进行比较，还是将当前*日期和时间*与用户给出的日期进行比较？
*   您想为用户输入使用哪个时区？
*   您是在考虑经过的天数还是“逻辑”天数？因为由于 DST 转换，早于 1.30am 的 7 * 24 小时可能是 2.30am 或反之亦然

在尝试实现代码*之前*，您应该回答所有这些问题，因为它会影响您使用的表示。此外，在开始实施之前，为您能想到的所有内容编写单元测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T08:44:07.460

我认为您可以使用 java 提供的 Comparator 来比较和排序日期。这是[链接](http://www.roseindia.net/java/example/java/util/CompareDate.shtml)

希望你得到你想要的东西..

# continuous-integration - Get MSDeploy to skip specific folders and file types in folders as CCNet task

> ID：11152852
> 
> 赞同：4
> 
> 时间：2012-06-22T08:40:25.630
> 
> 标签：continuous-integration, cruisecontrol.net, msdeploy, ccnet-config

I want MSDeploy to [skip](http://technet.microsoft.com/en-us/library/dd569089%28WS.10%29.aspx) specific folders and file types within other folders when using sync. Currently I'm using CCNet to call MSDeploy with the sync verb to take websites from a build to a staging server. Because there are files on the destination that are created by the application / user uploaded files etc, I need to [exclude specific folders from being deleted on the destination](https://stackoverflow.com/questions/4088360/multiple-skips-in-msdeploy). Also there are manifest files created by the site that need to remain on the destination.

At the moment I've used `-enableRule:DoNotDeleteRule` but that leaves stale files on the destination.

```
<exec>
    <executable>$(MsDeploy)</executable>
    <baseDirectory>$(ProjectsDirectory)$(projectName)$(ProjectsWorkingDirectory)\Website\</baseDirectory>
    <buildArgs>-verb:sync 
        -source:iisApp="$(ProjectsDirectory)$(projectName)$(ProjectsWorkingDirectory)\Website\" 
        -dest:iisApp="$(website)/$(websiteFolder)"
        -enableRule:DoNotDeleteRule</buildArgs>
    <buildTimeoutSeconds>600</buildTimeoutSeconds>
    <successExitCodes>0,1,2</successExitCodes>
</exec> 
```

I have tried to use the skip operation but run into problems. Initially I dropped the DoNotDeleteRule and replaced it with (multiple) skip

```
<exec>
    <executable>$(MsDeploy)</executable
    <baseDirectory>$(ProjectsDirectory)$(projectName)$(ProjectsWorkingDirectory)\Website\</baseDirectory>
    <buildArgs>-verb:sync 
        -source:iisApp="$(ProjectsDirectory)$(projectName)$(ProjectsWorkingDirectory)\Website\" 
        -dest:iisApp="$(website)/$(websiteFolder)"
        -skip:objectName=dirPath,absolutePath="assets" 
        -skip:objectName=dirPath,absolutePath="survey" 
        -skip:objectName=dirPath,absolutePath="completion/custom/complete*.aspx" 
        -skip:objectName=dirPath,absolutePath="completion/custom/surveylist*.manifest" 
        -skip:objectName=dirPath,absolutePath="content/scorecardsupport" 
        -skip:objectName=dirPath,absolutePath="Desktop/docs" 
        -skip:objectName=dirPath,absolutePath="_TempImageFiles"</buildArgs>         
    <buildTimeoutSeconds>600</buildTimeoutSeconds>
    <successExitCodes>0,1,2</successExitCodes>
</exec> 
```

But this results in the following:

> Error: Source (iisApp) and destination (contentPath) are not compatible for the given operation.
> Error count: 1\.

So I changed from iisApp to contentPath and instead of dirPath,absolutePath just Directory like this:

```
<exec>
    <executable>$(MsDeploy)</executable
    <baseDirectory>$(ProjectsDirectory)$(projectName)$(ProjectsWorkingDirectory)\Website\</baseDirectory>
    <buildArgs>-verb:sync 
        -source:contentPath="$(ProjectsDirectory)$(projectName)$(ProjectsWorkingDirectory)\Website\" 
        -dest:contentPath="$(website)/$(websiteFolder)"
        -skip:Directory="assets" 
        -skip:Directory="survey" 
        -skip:Directory="content/scorecardsupport" 
        -skip:Directory="Desktop/docs" 
        -skip:Directory="_TempImageFiles"</buildArgs>           
    <buildTimeoutSeconds>600</buildTimeoutSeconds>
    <successExitCodes>0,1,2</successExitCodes>
</exec> 
```

and this gives me an error: Illegal characters in path:

> < buildresults>
> Info: Adding MSDeploy.contentPath (MSDeploy.contentPath).
> Info: Adding contentPath (C:\WWWRoot\MySite
> -skip:Directory=assets
> -skip:Directory=survey
> -skip:Directory=content/scorecardsupport
> -skip:Directory=Desktop/docs
> -skip:Directory=_TempImageFiles).
> Info: Adding dirPath (C:\WWWRoot\MySite
> -skip:Directory=assets
> -skip:Directory=survey
> -skip:Directory=content/scorecardsupport
> -skip:Directory=Desktop/docs
> -skip:Directory=_TempImageFiles).
> < /buildresults>
> 
> < buildresults>
> Error: Illegal characters in path.
> Error count: 1.
> < /buildresults>

So I need to know how to configure this task so the folders referenced do not have their contents deleted in a sync and that that *.manifest and *.aspx files in the completion/custom folders are also skipped.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T13:57:38.797

这个问题是......换行符！我将每个 -skip 指令拆分为导致路径中的非法字符*的新行。*内联运行所有跳过指令已经解决了这个问题：

```
<exec>
  <executable>$(MsDeploy)</executable>
  <baseDirectory>$(ProjectsDirectory)$(projectName)$(ProjectsWorkingDirectory)\Website\</baseDirectory>
  <buildArgs>-verb:sync 
            -source:contentPath="$(ProjectsDirectory)$(projectName)$(ProjectsWorkingDirectory)\Website\" 
            -dest:contentPath="C:\WWWRoot\$(websiteFolder)" -skip:Directory="assets" -skip:Directory="_TempImageFiles" -skip:objectName=dirPath,absolutePath="\\Desktop\\Docs"
  </buildArgs>          
  <buildTimeoutSeconds>600</buildTimeoutSeconds>
  <successExitCodes>0,1,2</successExitCodes>
</exec> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T03:10:13.403

请查看这篇题为[Web 部署：通过 Web 应用程序的项目文件排除文件和文件夹的](http://blogs.msdn.com/b/webdevtools/archive/2010/04/22/web-deployment-excluding-files-and-folders-via-the-web-application-s-project-file.aspx)MSDN 文章。特别是“排除特定文件/文件夹”部分。这将阻止目录、文件和文件/目录模式匹配作为内容包含在部署包中，以及在部署时在目标上被忽略。

但是，我会退后一步，首先询问为什么这些文件存在于您的 Web 项目中。我在 IIS 上处理用户上传内容的方式是向我的 Web 应用程序添加一个虚拟目录。在 web 部署包上进行同步时，将忽略虚拟目录的内容（以及 vdir 本身的配置）。这也为您提供了将客户端内容目录托管在您喜欢的任何地方的好处，这有很多优势（即更大的磁盘驱动器，防止试图用垃圾数据填充硬盘的不道德用户的拒绝服务等）

# python - Python : big csv file import

> ID：11152855
> 
> 赞同：-4
> 
> 时间：2012-06-22T08:40:41.400
> 
> 标签：python, csv, time-series, financial, spyder

I'm currently unsuccessfully trying to import a big csv dataset with Python. Basically, I've got a big csv file made of stocks quotations (one stock by column with for each stock another column which contains the dividends). I'm using the csv Module but the fact is that I can't get a np.array which columns are the stocks quotations.Python creates a np.array by rows and I would like a np.array by column. How can I do??

thanks for you help!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:55:30.727

我会推荐使用[Pandas](http://pandas.pydata.org/)库。它还使您能够按较小的块读取大的 csv 文件。这是文档中的一个示例：

数据：

```
year indiv zit xit
0 1977 A 1.2 0.60
1 1977 B 1.5 0.50
2 1977 C 1.7 0.80
3 1978 A 0.2 0.06
4 1978 B 0.7 0.20
5 1978 C 0.8 0.30
6 1978 D 0.9 0.50 
```

指定块大小（你得到一个可迭代的）：

```
reader = read_table(’tmp.sv’, sep=’|’, chunksize=4)

for chunk in reader:
.....: print chunk 
```

输出：

```
year indiv zit xit
0 1977 A 1.2 0.60
1 1977 B 1.5 0.50
2 1977 C 1.7 0.80
3 1978 A 0.2 0.06
year indiv zit xit
0 1978 B 0.7 0.2
1 1978 C 0.8 0.3
2 1978 D 0.9 0.5 
```

注意！如果您需要进一步处理您的股票数据，Pandas 是最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:00:46.343

我创建了一小块函数，它确实读取 csv 文件的路径并立即返回 dict 列表，然后你很容易循环遍历列表，

```
def read_csv_data(path):
    """
        Reads CSV from given path and Return list of dict with Mapping
    """
    data = csv.reader(open(path))
    # Read the column names from the first line of the file
    fields = data.next()
    data_lines = []
    for row in data:
        items = dict(zip(fields, row))
        data_lines.append(items)
    return data_lines 
```

可能这会帮助你

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:04:36.293

您正在寻找的是`ndarray.shape`和`ndarray.reshape`功能。

> [http://www.scipy.org/Tentative_NumPy_Tutorial](http://www.scipy.org/Tentative_NumPy_Tutorial)

否则，你可以简单地按你的方式阅读它，然后做一个转置

```
x = x.transpose() 
```

其中 x 是一个 ndarray。

```
http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.transpose.html 
```

所有这些小东西通常都在文档中。我建议先仔细阅读这些内容。

# qt - 如何识别 QGraphicsScene 中的某些 QGraphicItem

> ID：11152859
> 
> 赞同：0
> 
> 时间：2012-06-22T08:41:15.503
> 
> 标签：qt, qgraphicsview, qgraphicsscene

我有几个`QGraphicItems`在一个`QGraphicsScene`。`QGraphicsView`当包含的场景被调整大小时，我只想修改其中的一些。原因是我已经绘制了一个与视图相对应的网格。

那么如何识别构成网格的项目`QGraphivcsView::resizeEvent()`呢？

是否可以以给定区域（sceneRect）始终填充完整视图的方式调整场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:16:31.787

> 那么如何在 QGraphivcsView::resizeEvent() 中识别构成网格的项目？

一种方法是简单地使用`dynamic_cast`and `QGrahpicsScene::items()`：

```
foreach( QGraphicsItem *item, myScene->items() )
{
  GridItem *gridItem = dynamic_cast<GridItem*>( item );
  if( gridItem )
  {
    // Apply appropriate transformation here
  }
} 
```

执行上述操作的稍微“Qt”的方法是确保您的 QGraphicsItem 子类重新实现[QGraphicsItem::type()](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#type)

```
foreach( QGraphicsItem *item, myScene->items() )
{
  if( item->type() == GridItem::Type )
  {
    // Apply appropriate transformation here
  }
} 
```

> 是否可以以给定区域（sceneRect）始终填充完整视图的方式调整场景？

[QGraphicsView::fitInView()](http://qt-project.org/doc/qt-4.8/qgraphicsview.html#fitInView)应该可以解决问题

此外，虽然我不完全确定您要完成什么，但在我看来，您可能想查看`QGraphicsItem::ItemIgnoresTransformations`标志。

```
myItem->setFlag( QGraphicsItem::ItemIgnoresTransformations ) 
```

这使得具有给定标志的任何项目都不会受到缩放级别更改的影响。

# internet-explorer - Internet Explorer 中带有空格的 Content-Disposition 附件文件名

> ID：11152861
> 
> 赞同：3
> 
> 时间：2012-06-22T08:41:21.303
> 
> 标签：internet-explorer, asp-classic

```
string filename = Server.UrlPathEncode(Path.GetFileName(_Filename)));
Response.AddHeader("Content-Disposition", "attachment; filename=\"" + encodeURIComponent(filename) + "\""); 
```

我写了这样的代码..

它在所有浏览器中都可以正常工作，但在 Internet Explorer 中，当我单击另存为时它工作正常，但是当单击打开时，我会`%20`输入文件名..

有人可以让我知道如何克服这个问题

假设文件名是“New text Document.txt”。当我下载后打开文件时，我希望它具有相同的名称。我不想将其视为“New_text_Document.txt”。

有没有办法做到这一点？

它在其他浏览器中对我来说很好。我在 Internet Explorer 中只有这个问题。如果我默认不编码，我会得到文件名“New_text_Document.txt”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:48:28.490

如果您的文件名包含空格，它们将被 URL 编码。编码的空格字符实际上是 %20，我们可以在文件名中看到。

为避免这种情况，您可以简单地将空格替换为另一个字符，例如`_`.

```
Response.AddHeader("Content-Disposition", "attachment; filename=\"" + 
   encodeURIComponent(filename.Replace(" ", "_")) + 
"\""); 
```

# ruby-on-rails-3 - 如何区分 Rails 中相同命名的辅助方法？

> ID：11152865
> 
> 赞同：2
> 
> 时间：2012-06-22T08:41:40.067
> 
> 标签：ruby-on-rails-3

我在两个不同的助手中创建了助手函数（link_to_alert）

1.  应用程序/帮助者/posts_helper.rb
2.  应用程序/帮助者/students_helper.rb

现在`link_to_alert`从`app/views/student/index.html.haml`

问题是视图调用了相同的函数`app/helpers/posts_helper.rb`

如何`app/helpers/students_helper.rb`从我的 `app/views/student/index.html.haml`视图中调用存在的辅助函数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T12:37:30.077

由于默认情况下所有助手都包含在所有控制器中，因此最常见的方法是对函数进行不同的命名，例如`link_to_alert_posts`和`link_to_alert_students`。

第二种方法是禁用包括所有助手并在控制器中选择您需要的助手。

```
config.action_controller.include_all_helpers = false

class PostsController
  helper :posts
end

class StudentsController
  helper :students
end 
```

在这种情况下，所有由 Posts Controller 渲染的视图都将具有 Posts Helper 的功能，而对于 Students Controller - 来自 Students Helper。

第三种方法是使用 module_function 并在所有调用前加上辅助模块名称。不过，我从未见过这种方法特别适用于 Rails 助手。

```
module StudentsHelper
  module_function

  def link_to_alert
  end
end

StudentsHelper.link_to_alert 
```

另一种方法是使用演示者或装饰者，但这是一个完全不同的主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:14:27.470

为什么不把不同的名字`link_to_alert_posts`，，，`link_to_alert_students`？
顺便说一句，您可以通过输入模块名称和函数名称来调用它。

# javascript - MVC3 Javascript 警报和重定向

> ID：11152866
> 
> 赞同：0
> 
> 时间：2012-06-22T08:41:42.093
> 
> 标签：javascript, asp.net-mvc-3

如何在 MVC 3 中有一个 javascript 警报，以便在重定向到另一个页面之前我会收到一个警报。这是我的代码：

```
Content("<script language='javascript' type='text/javascript'>alert('Updated Successfully!');</script>");
return Redirect("ViewDataFiles?catid=" + catid); 
```

它不会发出警报，而是重定向到指定的页面。我怎样才能同时拥有 javascript 警报和 MVC 重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-19T10:46:02.813

这成功地工作：

```
return Content("<script language='javascript' type='text/javascript'>alert('Something going wrong!');window.location = '/Labels/ViewLabelTypeIndex';</script>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:48:22.457

你可能可以做这样的事情..
但这不是我推荐的。

```
JavaScriptResult("<script language='javascript' type='text/javascript'>alert('Updated Successfully!');
window.location = "YOUR_NEW_LOCATION";
</script>"); 
```

相反，您可能应该发送一个 ajax 请求并显示更新的消息并将用户带到下一页..

# c++ - 将指针数组写入文件

> ID：11152869
> 
> 赞同：-1
> 
> 时间：2012-06-22T08:41:48.660
> 
> 标签：c++

我想知道如何编写指针数组：

```
short* myArray 
```

和一个指针

```
short[] myArray 
```

到 C++ 中的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T03:51:59.337

例子：

```
char phrase[30]="whatever\n"; 
```

`phrase`已经是一个指针。为了让编译器访问字符串，它访问字符串开头的内存位置，因此：

`phrase[0]=*phrase`这是内存中的 w 字符，地址由指针短语给出（好吧，我们称它为字符串数组，但它确实是一个指针，当指定为时只有一个字符串数组 `phrase[30]`。所以如果短语是数组开头的内存地址 - character `w`then `(phrase+1)`是字符 h 的内存地址，由`*(phrase+1)`same as给出，`phrase[1]` 并且`(phrase+2)`是字符 a 的内存地址，由`*(phrase+2)`same as给出`phrase[2]` ......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:48:13.110

为此使用[ofstream](http://www.cplusplus.com/reference/iostream/ofstream/)类。[使用open()](http://www.cplusplus.com/reference/iostream/ofstream/open/)方法打开文件，然后遍历数组并使用`<<`运算符将​​每个 short 写入文件。

您可以通过执行获取数组 ( `short[] array`)的大小

```
int arraySize = sizeof(array) / sizeof(short); 
```

而对于指针 ( `short* array`)，您需要自己跟踪它指向的数组的大小。

# excel - 宏 - 打开文件夹中的所有文件

> ID：11152870
> 
> 赞同：19
> 
> 时间：2012-06-22T08:41:55.567
> 
> 标签：excel, excel-2010, vba

我想打开指定文件夹中的所有文件并具有以下代码

```
Sub OpenFiles()
Dim MyFolder As String
Dim MyFile As String
MyFolder = "\\ILAFILESERVER\Public\Documents\Renewable Energy\FiTs\1 Planning
           Department\Marks Tracker\Quality Control Reports"
MyFile = Dir(MyFolder & "\*.xlsx")
Do While MyFile <> ""
Workbooks.Open Filename:=MyFolder & "\" & MyFile
Loop
End Sub 
```

我遇到的问题是它只是不断尝试反复打开文件夹中的第一个文件并且不会继续。任何人都可以帮忙，我在 VBA 有点新手，真的可以做一些帮助。我正在尝试打开大约 30 个全部为 .xlsx 格式的报告。提前谢谢了。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-22T08:58:35.040

您必须在之前添加此行`loop`

```
 MyFile = Dir
Loop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-19T04:25:32.413

您可以`Len(StrFile) > 0`在循环检查语句中使用！

```
Sub openMyfile()

    Dim Source As String
    Dim StrFile As String

    'do not forget last backslash in source directory.
    Source = "E:\Planning\03\"
    StrFile = Dir(Source)

    Do While Len(StrFile) > 0                        
        Workbooks.Open Filename:=Source & StrFile
        StrFile = Dir()
    Loop
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T09:37:14.550

试试下面的代码：

```
Sub opendfiles()

Dim myfile As Variant
Dim counter As Integer
Dim path As String

myfolder = "D:\temp\"
ChDir myfolder
myfile = Application.GetOpenFilename(, , , , True)
counter = 1
If IsNumeric(myfile) = True Then
    MsgBox "No files selected"
End If
While counter <= UBound(myfile)
    path = myfile(counter)
    Workbooks.Open path
    counter = counter + 1
Wend

End Sub 
```

# gridview - 在浏览器中查看页面源不显示正确的 gridview 数据

> ID：11152871
> 
> 赞同：0
> 
> 时间：2012-06-22T08:41:55.707
> 
> 标签：gridview, view

我有一个gridview，JQuery 拖放方法用于重新排列行。当我使用“查看页面源代码”选项查看 HTML 部分的外观时，我可以看到以 HTML 表格格式（如 Table、TR 和 TD）排列的 gridview 行，并且与显示的数据顺序相同。但是，即使我从客户端重新排列了行（使用为 gridview 实现的拖动选项），当使用 "View Page Source" 检查时，元素的顺序仍然保持不变。

所以我的问题是显示的内容是否与浏览器的“页面来源”有直接关系，还是只显示页面加载过程中加载的内容的来源？

任何人都可以澄清这一点吗？

示例:: Gridview 包含 A B C D

源元素的顺序也相同。如果从客户端将行重新排列为 B、C、A、D，则页面源顺序保持不变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:50:47.740

我发现下面的问题有很多关于这个的信息......

基本上，浏览器会尝试给出页面的版本，但是该源代码的生成与您在浏览器窗口中看到的不同。

[生成网页源](https://stackoverflow.com/questions/1750865/best-way-to-view-generated-source-of-webpage)

他们还建议了一些技术来获得您想要的技术（请参阅 DOM 页面 javascript 建议）

# c# - 从 json 中检测添加或删除的元素

> ID：11152880
> 
> 赞同：0
> 
> 时间：2012-06-22T08:42:38.590
> 
> 标签：c#, json, json.net

我已经为 Json 反序列化创建了类，但我想获取在 json 中删除或添加的元素，这不在我的类中。我怎么能做到这一点，我的意思是想要最好的方法。

我正在从 Facebook 获取用户个人资料并反序列化，如果 facebook 添加或删除任何元素，那么我怎样才能得到这个。我正在使用 Json.net

用例子来理解

**前**

示例 Json

```
{
       "Name":"Rahul",
       "isverified" : true
} 
```

我创建了 c# 类

```
public class Profile
{
        public string Name { get; set; }
        public bool isverified { get; set; }
} 
```

**后**

示例 Json

```
{
       "Name":"Rahul",
       "isverified" : true,
       "emailid": "xyx@example.com"
} 
```

所以现在我可以检测到它`emailid`被添加到 json

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:46:52.687

您希望在属性更新时接收来自 Facebook 的回调。这与 JSON 无关，但 Facebook 提供了一个[实时更新 API](http://developers.facebook.com/docs/reference/api/realtime/)，可让您订阅某些数据以在更改时接收通知。这是图形 API 的一部分。

根据链接，设置它需要两个步骤：

> 1.  设置从 Facebook 接收 HTTP GET（用于订阅验证）和 POST（用于实际更改数据）请求的端点 URL。
> 2.  向图形 API url [https://graph.facebook.com/](https://graph.facebook.com/) /subscriptions 发送 POST 以进行订阅，并准备好处理验证请求。

您可以订阅与*用户*、*权限*（如用户授予您的应用程序的权限）和已安装您的应用程序的*页面相关的属性更改。*

**编辑**

如果您只想在运行时添加属性，您可以使用 IDictionary 或[ExpandoObject](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)。

```
var Profile = new ExpandoObject();
Profile.Name = "Rahul";
Profile.emailid = "xyz@example.com";
Profile.foo = "bar"; 
```

# java - 视图主体未在 Spring 3.2 中显示

> ID：11152886
> 
> 赞同：1
> 
> 时间：2012-06-22T08:43:04.223
> 
> 标签：java, spring, model-view-controller, servlets

我目前正在尝试更具体地在 Spring 中进入 Java Web 开发。

我已经按如下方式设置了我的项目 -

你好.jsp：

```
<html>
<head>
<title>Spring 3.0 MVC Series: Hello World - ViralPatel.net</title>
</head>
<body>
<p>ABC ${message}</p>
</body>
</html> 
```

HelloWorldController.java：

```
package controllers;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class HelloWorldController {
@RequestMapping("/hello")
    public ModelAndView helloWorld() {

        String message = "Hello World, Spring 3.0!";
        System.out.println(message);
        return new ModelAndView("hello", "message", message);
    }
} 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee     http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
version="2.5">
<display-name>Spring3MVC</display-name>
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>

<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>*.html</url-pattern>
</servlet-mapping>
</web-app> 
```

弹簧servlet.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans

http://www.springframework.org/schema/beans/spring-beans-3.0.xsd

http://www.springframework.org/schema/context

http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:component-scan
    base-package="controllers" />

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean>
</beans> 
```

我可以很好地启动服务器并导航到 hello.html，它由 servlet 解析给我 hello.jsp，.jsp 显示的标题（Spring 3.0 MVC 系列：等等），唉，身体没有。不是 JSTL 变量，也不是“ABC”。

我已经在我的 lib 文件夹中实现了 jstl-1.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:53:31.047

```
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

更改为上述此外，我的 viewResolver 与 yrs 不同：

```
<bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver"
        p:prefix="" p:suffix=".jsp" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:57:23.713

我认为问题出在您的 jsp 文件中。请尝试将以下行作为 hello.jsp 文件的第一行。

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%> 
```

**更新**

尝试在 viewResolver bean 中使用**InternalResourceViewResolver**类而不是**UrlBasedViewResolver**。

据我说应该可以解决你的问题。干杯。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-22T11:32:17.503

您是否在 jsp 标头中包含了 taglibs 作为

```
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%> 
```

# sharepoint - 如何在 SharePoint 中列出分类项目（SP 的新功能）

> ID：11152887
> 
> 赞同：0
> 
> 时间：2012-06-22T08:43:07.380
> 
> 标签：sharepoint

我是 Sharepoint 的初学者，我想在上面做一个小应用程序。

我有 3 个清单。

*   汽车功能
*   汽车
*   特征类型

这是我的数据结构

特征类型：

GearType、Speed、Color、CoolingSystem 是我的专栏。但这里我有更多的专栏叫 AirCond、Radiator。CoolingSystem 是这 2 列的父级。

在 CarFeatures 中：

Title 和 FeatureType 是我的专栏。我在这里使用 FeatureType 添加项目。

在车里 ：

carName 和查找的 FeaturesOfCar 是我的专栏。

因此，我想将项目添加到具有功能的 Car 中。您知道，在添加新项目时，会打开一个窗口并在那里列出您的选项。**在这个窗口中，我想要 2 个列表框。其中一个应该包含 FeturesType，当我选择其中一个时，它应该列出来自 CarFeatures 的 FeatureType 项目的子项目。**（一种分类选择）所以这样，我将拥有灵活的系统。因为我想在其他地方使用它。它必须是可编辑且易于使用的。

我希望我很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T06:54:13.593

我解决了无代码的问题。

在 infopath 中，我向第一个下拉列表添加了一个操作，将所选值保存到文本框。

其次，我将“过滤器数据”添加到第二个下拉列表中。此过滤器的第一个条件是“标题不是空白”，第二个条件是“所选项目的 parentId = featureTypeId”。我们已经在文本框中保存了 parentId。所以“所选项目的parentId = textBoxField”终于解决了。

# javascript - 在 macOS 上使用 JavaScript 写入文件

> ID：11152890
> 
> 赞同：-4
> 
> 时间：2012-06-22T08:43:25.870
> 
> 标签：javascript, macos, writetofile

我如何将简单的文本（例如“Hello world”）写入文件？我必须使用 JavaScript，并且代码必须在 Mac OS 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:53:43.137

安全限制不允许 javascript 通过浏览器访问本地文件系统。
但是您可以使用[Node.js](http://nodejs.org/)解释器来运行 javascript“服务器端”。
如果是这种情况，您的代码应该看起来[像这样。](https://stackoverflow.com/questions/2496710/nodejs-write-to-file)

# mysql - 如何有效地查询有向无环图

> ID：11152891
> 
> 赞同：8
> 
> 时间：2012-06-22T08:43:33.723
> 
> 标签：mysql, directed-acyclic-graphs

我在我的 Web 应用程序中使用 mysql。应用程序表包含一个主管表和一个员工表。员工表包含有关每个员工的信息。主管表包含如下两列。

```
supervisor_id -> which is employee id of the supervisor
subordinate_id -> which is the employee id of the subordinate. 
```

每个下属可以有多个主管，一个主管下属可以是其他员工的主管。所以表记录可以如下。

```
supervisor_id | subordinate_id
1             | 2
1             | 3
2             | 4
4             | 5
3             | 6
3             | 4 
```

在上面的示例中，有一个主管链。主管 1 的下属有 2、3、4、5 和 6。主管 2 有 4、5 为下属。并且它也可以有多个主管为一个下属。

当前，当我查询主管 2 的所有下属时，我使用如下查询。

```
public function getSubordinate($id) {
 $query = "SELECT * FROM supervisor WHERE subordinate_id = $id";
 // get results and return
} 
```

所以我目前所做的是首先将 id 发送为 2 以获取其直接下属。然后对于每个结果下属，我一次又一次地运行查询以获得完整的下属链。

这对于少量数据是可以的。但是这个主管表将有数千条数据，所以我必须进行数千次查询才能找到主管链，并且需要时间才能给出结果。

由于下属可以有多个主管，因此嵌套集不是这个问题的确切答案。

我也经历了这个解决方案。[http://www.codeproject.com/Articles/22824/A-Model-to-Represent-Directed-Acyclic-Graphs-DAG-o](http://www.codeproject.com/Articles/22824/A-Model-to-Represent-Directed-Acyclic-Graphs-DAG-o)

但是当我使用这种方法时，该表将拥有数百万条数据。而且效率低下。

我的问题是有什么有效的方法可以做到这一点。我的表结构是否有任何问题阻止我有效地进行这种查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-12T01:46:07.030

所有主要的数据库应用程序（包括 MySQL 和 MariaDB）现在都支持使用通用表表达式的递归查询。这是在 MySQL 8.0 版和 MariaDB 10.2.2 版中引入的。PostgreSQL 甚至更早就有支持。Oracle 有它，SQL Server 在 2005 版本中添加了它。事实上，快速搜索表明 Sqlite 也支持 Common Table Expressions。

因此，您可能正在寻找的答案是使用公用表表达式和递归查询。[与“在 SQL 数据库上表示有向无环图 (DAG) 的模型](https://www.codeproject.com/Articles/22824/A-Model-to-Represent-Directed-Acyclic-Graphs-DAG-o)”相比，这被认为是更好的解决方案的一些原因在这里解释：

在关系模型中编码和查询图
[https://drtom.ch/posts/2012/02/11/Encoding_and_Querying_Graphs_in_the_Relational_Model/](https://drtom.ch/posts/2012/02/11/Encoding_and_Querying_Graphs_in_the_Relational_Model/)

（您可以忽略他所说的部分，“它不会特别在 MySQL 或 sqlite3 上运行，它们根本不支持 CTE。”正如我所提到的，情况不再如此。）

正如您在问题中指出的那样，“当我使用这种方法时，该表将拥有数百万条数据。” 如果您要为效率而交易空间，仅此一项可能并没有那么糟糕，但正如汤姆博士的帖子在一个示例中所解释的那样：

> 删除或插入红色弧线的操作也需要在 θ(n^2) 上付出努力。

对于这些操作，这是 n 平方的努力；您可以获得查询效率，但代价是空间效率低下和插入/删除效率低下。他进一步指出，

> 实际上，所有大型现实世界网络都是稀疏的。它们的边缘比可能的要少得多，即 m«n^2。

公平地说，您链接的 Kemal Erdogan 的代码项目文章来自 2008 年；那时 CTE 还没有普及。此外，正如他在此解释的那样，埃尔多安在权衡取舍方面做出了明智的选择：

> 我拥有的解决方案[也是]基于递归。但是，我没有将递归推迟到查询时间，而是在插入时间进行递归，假设图形实际上被查询多于修改（这对于我迄今为止遇到的所有情况都是如此）。

如果在阅读了 Tom 博士的文章之后，您最终更喜欢 Erdogan 的权衡，您可以通过查看 Laravel 的实现来限制其他低效率：

laravel-dag-manager,Laravel 的基于 SQL 的有向无环图 (DAG) 解决方案,下载laravel-dag-manager的源码_GitHub_帮酷 [https://github.com/telkins/laravel-dag-manager](https://github.com/telkins/laravel-dag-manager)

特别是，查看 Max Hops 并在您自己的解决方案中实现类似的东西。

这是在 Laravel 配置文件中：

```
/*
|--------------------------------------------------------------------------
| Max Hops
|--------------------------------------------------------------------------
|
| This value represents the maximum number of hops that are allowed where
| hops "[i]ndicates how many vertex hops are necessary for the path; it is
| zero for direct edges".
|
| The more hops that are allowed (and used), then the more DAG edges will
| be created.  This will have an increasing impact on performance, space,
| and memory.  Whether or not it's negligible, noticeable, or impactful
| depends on a variety of factors.
*/

'max_hops' => 5, 
```

免责声明：我现在只是为自己研究这个。我还没有使用任何这些解决方案的经验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:09:51.400

你说的是无环图，所以也许我在这里很远 - 但同时听起来你需要一些东西来满足正常的主管和员工等级制度？那么可以用树结构来完成吗？

我不确定，但听起来你只需要一个树结构？？我认为找出谁超过一个人的最简单方法是将所有名称存储在一张表中，并使用两个字段来更新人与人之间的关系。字段将是左和右。

```
 _______  
                           1 | peter | 20
                              _______
             ______                        ______
          2 | paul | 17                18 | john | 19
             ______                        ______
    _____            _______
 3 |judas | 4      5 | maria | 16
    _____            _______

               _____             ________
            6 |seth  | 7      8 | abraham | 15
               _____             _______

                                ______          
                              9 |bill | 14
                                 _____

                          _____                _______
                      10 |kenny | 11      12 | moses | 13
                          _____                _______ 
```

摩西的老板是谁？每个拥有较高权利和左边情人的人都会给您 Bill、Abraham、Maria、Paul 和 Peter :-) 这完全不需要数据库中的时间来提取。如果这很有趣，我可以使用有关如何执行此操作的详细信息来更新此答案。

```
 table  left   right

 peter  1      20
 paul   2      7
 judas  3      4
 maria  5      16
 seth   6      7
 ... etc

 select * from people where left < 12 and right > 13 
```

结果：

```
 bill     9     14
 abraham  8     15
 maria    4     16
 paul     2     17
 peter    1     20 
```

# c - 如何在c中获取给定数据类型的最大值？

> ID：11152894
> 
> 赞同：0
> 
> 时间：2012-06-22T08:43:47.927
> 
> 标签：c

我是 C 的新手。

例如，说`int`最大值为 32767（但对于其他系统，此值可能不同），我的问题是如何使用 C 程序或函数为任何数据类型获取这些值。

因为`int`我正在尝试这种方法，但它返回`-1`

```
#include<stdio.h>
void main(void){

unsigned int x=1;
unsigned long count=0;

for(x=1;;x++){

    if(x==0){break;}
    count++; 

    }

printf("%ld",count);

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T08:47:04.293

`limits.h`定义了一些表示类型限制（或界限）的值。在您的情况下，`INT_MIN`这`INT_MAX`将是一种可移植的方式来找出`int`可以容纳的最小值和最大值。

[http://en.wikibooks.org/wiki/C_Programming/C_Reference/limits.h](http://en.wikibooks.org/wiki/C_Programming/C_Reference/limits.h)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T08:47:07.167

标头`limits.h`有一个常量`UINT_MAX`，这是您想要的值。

您看到的原因`-1`只是. 使用.`%ld``unsigned long``%lu`

C 并不是真正适合泛型编程，但最新的标准 C11 确实提供了根据参数类型（“类型泛型表达式”）执行不同操作的宏。

我从来没有使用过它们，但我希望你可以编写一个宏`NUMERIC_LIMITS_MAX`来隐藏映射`int -> INT_MAX`，`unsigned char -> UCHAR_MAX`等等。生成的代码（还）不会非常便携，因为 C11 的部分实现并不多，更不用说完整的了.

也就是说，对于无符号类型，您始终可以获得最大值`(unsigned long)(-1)`，依此类推。带符号的类型有点尴尬，因为标准让实现可以自由地做很多奇怪的事情。在实践中，`INT_MAX`等于`(((unsigned int)(-1)) / 2) + 1`。理论上，`int`允许有比 更多的填充位`unsigned int`，在这种情况下`INT_MAX`更小。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T08:49:21.950

检查[这个](http://www.cplusplus.com/reference/clibrary/climits/)。通常，当您对 C 或 C++ 有疑问时，请尝试首先在此站点上查找，这是一个很好的参考。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T08:48:56.290

你需要的是[`#include <limits.h>`](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/limits.h.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T09:18:35.563

在运行时间内获得最大 int 的解决方案：

```
int main ( )
{
    unsigned int y = (unsigned int)(~0)>>1;
    printf ("max of int is %u\r\n",y);
    return 1;
} 
```

**解释：**

`y = ~0`将 y 设置为二进制的相反值 0。如果我们的系统是 32 位，那么 0 将用 (0000...0)(32) 二进制表示，而二进制的相反值是 (1111...1)(32) .

`y>>1`将 y 移动 1 位，因此 y 的值将是 (0111..1)(31)，这是 int 的最大值

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T09:18:50.323

只需打印 -1

```
#include "stdint.h"

printf("Byte :%u, Short :%hu,  Int :%u, Long Long :%llu\n",
             (uint8_t)-1, (uint16_t)-1, (uint32_t)-1, (uint64_t)-1); 
```

输出是：

> 字节：255，短：65535，整数：4294967295，长长：18446744073709551615

我在linux...

# css - Opera：最大高度的列数

> ID：11152899
> 
> 赞同：4
> 
> 时间：2012-06-22T08:44:26.177
> 
> 标签：css, overflow, opera

尝试将列数与最大高度相结合时，我在 Opera 12 中遇到问题。问题是当存在一些固定高度时，Opera 生成的列数超过了列数中指定的列数，而不是添加滚动。

例如，尝试以下 html：

```
<div>
    <ul>
        <li>1</li> <li>2</li> <li>3</li>
        <li>4</li> <li>5</li> <li>6</li>
        <li>7</li> <li>8</li> <li>9</li>
        <li>11</li> <li>12</li> <li>13</li>
        <li>14</li> <li>15</li> <li>16</li>
        <li>17</li> <li>18</li> <li>19</li>
        <li>21</li> <li>22</li> <li>23</li>
        <li>24</li> <li>25</li> <li>26</li>
        <li>27</li> <li>28</li> <li>29</li>
    </ul>
</div> 
```

使用以下CSS：

```
div
{
    overflow-x: hidden;
    overflow-y: auto;
    column-count: 2; -moz-column-count: 2; -webkit-column-count: 2; 
    max-height: 100px;
} 
```

[您也可以在http://jsfiddle.net/bYhFg/4/](http://jsfiddle.net/bYhFg/5/)看到结果

它在 Firefox/Chrome 中运行良好，但在 Opera 中却不行。在 Opera 中，它生成的列数比指定的多，即多于两个。

我想要实现的是在需要时使用两列和垂直滚动制作固定高度的 div。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:13:34.013

试试[这个](http://jsfiddle.net/bYhFg/8/)：

```
div {
    overflow-x: hidden; 
    overflow-y: auto; 
    max-height: 100px; 
}
ul {
    column-count: 2; -moz-column-count: 2; -webkit-column-count: 2; 
} 
```

# iphone - 在 iphone 中弹出日文键盘

> ID：11152902
> 
> 赞同：0
> 
> 时间：2012-06-22T08:45:02.540
> 
> 标签：iphone, iphone-softkeyboard

我们可以通过编程将 iPhone 中的键盘语言从英语更改为日语吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:49:19.660

在 iOS 中以编程方式更改键盘是不可行的

类似的答案[更改键盘语言](https://stackoverflow.com/questions/5907642/change-language-of-keyboard)

# sql-server - 如何在链接服务器表中插入一行？

> ID：11152907
> 
> 赞同：13
> 
> 时间：2012-06-22T08:45:25.540
> 
> 标签：sql-server, insert, linked-server

我有一个我连接到的服务器 SourceServer，它有一个链接服务器 TargetServer。

插入语句应该如何（我需要引用链接服务器、数据库、命名空间、表）：

```
//Connected to [SourceServer]

USE [SourceDatabase]

DECLARE @HelloWorld NVARCHAR(255)

SELECT @HelloWorld = Name From dbo.Names where Id = 1

INSERT INTO [TargetServer].[TestDatabase].dbo.TestTable (Name)   VALUES (@HelloWorld) 
```

此语句执行时出现异常：

```
Too many prefixes. 
```

**更新：上面的语法工作正常，问题是用于连接到链接服务器的 sql 用户的密码过期:)**

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-22T09:00:38.303

```
INSERT INTO [TargetServer].[TestDatabase].[dbo].TestTable (Name)
SELECT Name From [SourceServer].[SourceDatabase].[dbo].[Names] where Id = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-03T18:26:58.663

```
select * into [TargetServer].[TestDatabase].[dbo].TestTable
 From [SourceServer].[SourceDatabase].[dbo].[Names] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-13T08:28:54.107

**如果 Target 中已经存在目标表架构，请使用以下代码**

```
INSERT INTO [TargetLinkedServerName].[TestDatabase].[dbo].[TargetTestTable] 
SELECT * From [SourceLinkedServerName].[SourceDatabase].[dbo].[SourceTestTable] 
```

**如果 Target 中已经没有目标表架构，请使用下面的代码（此代码将在 Target 中创建新表，就像源表一样）**

```
select * into [TargetLinkedServerName].[TestDatabase].[dbo].[TargetTestTable] 
 From [SourceLinkedServerName].[SourceDatabase].[dbo].[SourceTestTable] 
```

# android - Android - 创建项目后我应该在哪里添加我的文件（html 文件，如 index.html）

> ID：11152910
> 
> 赞同：0
> 
> 时间：2012-06-22T08:45:29.437
> 
> 标签：android

我正在使用命令行 (ant) 创建和构建 android 项目。
我使用创建项目

```
android create project --name YourTestProject --path /home/testfolder --target android-3 --package com.company.testproject --activity MainActivity 
```

上面的命令创建了一个项目目录“testfolder”并将所有必要的文件放在里面。现在，我应该在哪里将我的文件添加到 . 例如，如果我有“index.html”文件，我应该把它放在哪里。因此，当我在 Android 模拟器上打开我的应用程序时，该 index.html 文件应该是 exewcuted 。如有必要，将提供更多详细信息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:47:02.920

这些文件应该进入 assets 文件夹。它们由您的应用直接使用，不会被 android 框架触及

相比之下，您的应用程序的图像、样式、布局等属于 res 文件夹。它们由 android 处理和管理。

# java - Eclipse Indigo SR2 插件问题

> ID：11152911
> 
> 赞同：0
> 
> 时间：2012-06-22T08:45:31.593
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-indigo

我已经下载了最新的 Eclipse Indigo SR2（面向 Java EE 开发人员的 Eclipse）。我还包括了 JBoss Tools 3.3。对于 Eclipse Indigo SR2，并重新启动 Eclipse。我的问题是我看不到在哪里添加 JBoss 7 运行时服务器。

如何让 Eclipse 重新安装其下载的插件？另外，我知道 m2e 现在包含在`Eclipse for Java IDE developers`. 我去了 Eclipse Marketplace 并下载了 Maven。我在首选项的任何地方都看不到它。

我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:50:40.273

我已经弄清楚了，所以让我分享一下我的有效解决方案（在 Windows 中）：

首先，确保您的 Eclipse 3.7.2（Indigo，SR2）与 Java 6 虚拟机一起运行。这可以通过配置`eclipse.ini`文件并添加`-vm`参数来实现，如下所示：

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.100.v20110502
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
512M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
512m
--launcher.defaultAction
openFile
-vm
C:/Program Files/Java/jdk1.6.0_25/bin/javaw.exe
-vmargs
-Dosgi.requiredJavaVersion=1.6
-Xms256m
-Xmx2048m 
```

（**切勿将 javaw.exe 的完整路径放在引号中**）。现在，启动 Eclipse 并安装更新。

在不添加`-vm`参数的情况下，Eclipse 将使用`%SYSTEMROOOT%\system32\javaw.exe`来运行 Eclipse。即使安装了插件，它们也不会添加到`features`and`plugins`目录中。

这也解决了`Maven`在 Eclipse 中安装的问题。

# excel - excel同一轴上的两列

> ID：11152914
> 
> 赞同：0
> 
> 时间：2012-06-22T08:45:47.323
> 
> 标签：excel

我有以下要求。我有一张有 4 列的表。`ncpus`, `ndisks`, `f1`, `f2`. 我需要一个散点图来显示 和 的行为以及和`f1`的`f2`变化；即考虑以下数据：`ncpus``ndisks`

```
ncpus |  ndisks |    f1 |    f2
------+---------+-------+-------
   10 |     255 |  6.63 |  7.37
   50 |    1024 | 26.89 | 30.56
  100 |    1024 | 28.69 | 36.03 
```

等等。现在我需要的是一个散点图`ncpus`，它`ndisks`在 Y 轴和`f1`X`f2`轴上绘制。谁能告诉我这是如何在excel中完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:18:17.377

如果我对您的理解正确，那实际上是不可能的，您应该考虑曲面图或多个图。无论如何，散点图中可以有主轴和次轴，但**只能在一个轴上绘制系列**。当然，您可以在 ncpus 轴上绘制 f1 和 f2，然后在 f2 上绘制一个虚假系列。添加辅助y轴的过程由[MS描述](http://office.microsoft.com/en-us/excel-help/add-or-remove-a-secondary-axis-in-a-chart-HP001234165.aspx)

# java - 遍历 JAXB 中的元素

> ID：11152917
> 
> 赞同：4
> 
> 时间：2012-06-22T08:45:57.410
> 
> 标签：java

我创建了一种方法来解组我的 xml (item.xml) 文件。但是如果有多个元素，我如何遍历所有元素并显示它们？

我的代码如下：

```
 final JAXBContext jc = JAXBContext.newInstance("com.generated");

        final Unmarshaller u = jc.createUnmarshaller();

        final File f = new File("D:\\item.xml");

        final JAXBElement element = (JAXBElement) u.unmarshal(f);

        final Item item = (Item) element.getValue();

        // This will be helpful only if the xml contains one element
        System.out.println(item.getCode());
        System.out.println(item.getName());
        System.out.println(item.getPrice()); 
```

如果我的 xml 是

```
 <item>
         <item1>
            <code>12000</code>
            <name>Samsung Galaxy Tab 620</name>
            <price>9999</price>
         </item1>
         <item2>
            <code>15000</code>
            <name>NOKIA</name>
            <price>19999</price>
         </item2>
         <item3>
            <code>18000</code>
            <name>HTC 620</name>
            <price>29999</price>
         </item3>
       </item> 
```

我怎样才能得到所有显示的值？谁能帮我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T08:55:57.160

我在大学的一些项目中使用过 JAXB。据我记得，您应该返回一个对象，例如 an`ItemList`然后查询该对象以检索包含的元素。

所以，你的 xml 应该看起来像这样：

```
<itemlist>
   <item>
     <code>..</code>
     <name>..</name>
     <price>..</price>
   </item>
   <item>
     <code>..</code>
     <name>..</name>
     <price>..</price>
   </item>
   .
   .
</itemlist> 
```

此时，您的**Java**代码将是：

```
final Unmarshaller u = jc.createUnmarshaller();
final File f = new File("D:\\item.xml");
final JAXBElement element = (JAXBElement) u.unmarshal(f);
final ItemList itemList = (ItemList) element.getValue();

// This will be helpful if the xml contains more elements
for (Item item : itemList.getItems()) {
   System.out.println(item.getCode());
   System.out.println(item.getName());
   System.out.println(item.getPrice());
} 
```

# django - 卡在表单向导中的动态表单

> ID：11152918
> 
> 赞同：0
> 
> 时间：2012-06-22T08:45:59.347
> 
> 标签：django, django-formwizard

几天前我已经在 Django 邮件列表上问过这个问题，但不幸的是没有得到答复。所以我又来了：

在 Django 1.2.3 上，我试图让动态表单工作。在第一页上，用户必须提供他们的地址/客户 ID，在第二页上，客户可以订购餐饮服务。

要在第二页上动态添加表单，我使用 [http://code.google.com/p/django-dynamic-formset/](http://code.google.com/p/django-dynamic-formset/)

这是我的models.py：

```
class Catering(models.Model):
    customer_id = models.CharField(max_length=20)
    company = models.CharField(max_length=40)

class DishesForm(forms.Form):
    gerecht = fields.CharField(max_length=200)
    aantal = fields.IntegerField(required=False)

DishesFormset = formsets.formset_factory(DishesForm)

class TestWizard(FormWizard):
    def done(self, request, form_list):
        return render_to_response('testwizard', {
            'form_data': [form.cleaned_data for form in form_list],
                }) 
```

网址.py：

```
(r'^testwizard/$', TestWizard([CateringForm, DishesFormset])), 
```

我遇到的问题是，在模板中我只能用`{{form}}`. 为了让javascript正常工作，我需要单独调用这些字段

```
<td>{{form.gerecht}}
</td> 
```

当我在没有表单向导的情况下单独测试动态表单（DishesFormset）时，一切正常。

如何在表单向导中调用单独的表单域？

# android - 为什么 com.google.ad 不见了？

> ID：11152924
> 
> 赞同：0
> 
> 时间：2012-06-22T08:46:21.847
> 
> 标签：android, import

我根据以下内容将广告添加到我的测试应用程序中：

[Google 开发者：移动广告 SDK - Android 基础知识](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals)

我被困在了线上：

```
import com.google.ads.*; 
```

Eclipse 仅显示可用：

```
com.google.maps 
```

为什么，请帮忙。

我下载了这个：

[适用于 Android 的 Google 移动广告 SDK (zip)](http://dl.google.com/googleadmobadssdk/googleadmobadssdkandroid.zip)

从这里：

[Google Developer：移动广告 SDK 下载](https://developers.google.com/mobile-ads-sdk/download)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:34:35.927

这是因为直接将该`.zip`文件导入您的项目。所以试着这样做 -

提取文件并按照[此答案](https://stackoverflow.com/a/11084158/940096)`.zip`导入`.jar`从该文件中提取的文件`.zip`

希望这对您有所帮助。

# asp.net-mvc-3 - 重定向回主页导致错误

> ID：11152927
> 
> 赞同：0
> 
> 时间：2012-06-22T08:46:49.150
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我不知道下面代码背后的错误是什么，我只想返回主页，当单击“取消”按钮时，该主页显示应用程序详细信息页面中的事件列表。现在，当我从详细信息页面单击“取消”按钮时，URL 是 sampleurl:2988/Event/Index 而不是 sampleurl:2988/Event/330。对此的任何帮助都将受到高度赞赏。

主页网址：sampleurl:2988/Event/330

详情页面：sampleurl:2988/Event/EditEventDetails/3

这是路线设置。

```
routes.MapRoute(
                "Event", // Route name
                "Event/{id}", // URL with parameters
                new { controller = "Event", action = "Index", id = 0 } // Parameter defaults
            );

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Event", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            ); 
```

取消按钮用于返回主页面：

```
<input type="button" id="btnCancel" url="@Url.Action("Index", "Event", new { id = Model.EM_AID })" value="Cancel" class="button cancelbutton"/> 
```

jQuery代码：

```
$("#btnCancel").click(function () {
    window().location.href =  $(this).attr('url');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:53:57.507

您需要将`id=330`第一页中出现的内容传递到您的详细信息页面，以便您可以正确生成返回 url。您也可以使用 ActionLink，无需使用 javascript：

```
@Html.ActionLink(
    "Cancel",                               // linkText
    "Index",                                // action
    "Event",                                // controller
    new { id = Model.IdFromTheFirstPage },  // routeValues
    new { @class = "cancelbutton" }         // htmlAttributes
) 
```

所以这里的工作流程：

1.  用户访问`/Event/330`并单击详细信息链接以编辑给定事件的详细信息
2.  用户被重定向到`/Event/EditEventDetails/3?IdFromTheFirstPage=330`
3.  用户单击取消按钮并返回到原始页面

# c# - 如何将选中的项目从一个复选框添加到另一个复选框？

> ID：11152934
> 
> 赞同：0
> 
> 时间：2012-06-22T08:47:07.563
> 
> 标签：c#, windows-forms-designer, checklistbox, control-library

我需要将选中的项目从一个复选框添加到另一个。我不应该在第二个复选框中多次添加一个项目。该设计有两个复选框和以下按钮：>、>>、<、<< 我尝试了下面的代码但无法获得任何显示。请让我知道我哪里出错了：

```
namespace TwoListBox
{
    public partial class UserControl1 : UserControl
    {
        public UserControl1()
        {
            InitializeComponent();
        }

        public delegate void OneArrowForwardClickHandler();

        public event OneArrowForwardClickHandler OneArrowForward;

        private void button1_Click(object sender, EventArgs e)
        {
            OneArrowForward += new OneArrowForwardClickHandler(OneForward);
        }

        public void OneForward()
        {
            foreach (Object cs in checkedListBox1.CheckedItems)
            {
                if (!checkedListBox2.Items.Contains(cs))
                    checkedListBox2.Items.Add(cs.ToString());
                else
                {
                    MessageBox.Show("Item is already added");
                    continue;
                }
            }
        }

        public delegate void TwoArrowForwardClickHandler();

        public event TwoArrowForwardClickHandler TwoArrowForward;

        private void button2_Click(object sender, EventArgs e)
        {
            TwoArrowForward += new TwoArrowForwardClickHandler(TwoForward);
        }

        public void TwoForward()
        {
            foreach (Object cs in checkedListBox1.Items)
            {
                if (!checkedListBox2.Items.Contains(cs))
                    checkedListBox2.Items.Add(cs.ToString());
                else
                    MessageBox.Show("Items were already added");
            }
        }

        public delegate void OneArrowBackwardClickHandler();

        public event OneArrowBackwardClickHandler OneArrowBackward;

        private void button3_Click(object sender, EventArgs e)
        {
            OneArrowBackward += new OneArrowBackwardClickHandler(OneBackward);

        }

        public void OneBackward()
        {
            foreach (Object cs in checkedListBox1.CheckedItems)
            {
                checkedListBox2.Items.Remove(cs);
            }
        }

        public delegate void TwoArrowBackwardClickHandler();

        public event TwoArrowBackwardClickHandler TwoArrowBackward; 

        private void button4_Click(object sender, EventArgs e)
        {
            TwoArrowBackward +=new TwoArrowBackwardClickHandler(TwoBackward);
        }

        public void TwoBackward()
        {
            foreach (Object cs in checkedListBox1.Items)
            {
                checkedListBox2.Items.Remove(cs);
            }

        }

        private void button5_Click(object sender, EventArgs e)
        {
            string s = "The selected items are:";
            for (int i = 0; i < checkedListBox2.Items.Count - 1; i++)
            {
                s += checkedListBox2.CheckedItems[i].ToString() + "\n";
            }
            MessageBox.Show(s);
        }

    }
} 
```

注：> 表示添加选中项，>> 表示添加所有项，< 表示删除选中项，<< 表示删除所有项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:49:56.470

在您的按钮单击事件中，您只需将事件处理程序添加到事件中。您是否尝试过直接调用该函数？

无需创建事件处理程序，而是调用每个函数，类似于`OneForward()`从 button1 的 click 事件调用下面的方法：

```
 private void button1_Click(object sender, EventArgs e)
    {
        OneForward();
    } 
```

**对评论的回应**

如果您的意思是您想通知父母您的按钮已被单击并且 OneForward 已完成，您可以在 OneForward 函数末尾的以下行：

```
OneArrowForward(this, new EventArgs()); 
```

但是，如果您想从父级调用 OneForward，则必须将其公开，然后从父级调用：

```
myUserControlInstance.OneForward(); 
```

# html - 我的 div 的宽度是固定的，而内容仍然溢出

> ID：11152944
> 
> 赞同：1
> 
> 时间：2012-06-22T08:48:07.773
> 
> 标签：html, css

我只是想在这里询问我的 html 代码，我在调整 div 大小时遇到​​了一些问题。当我将div的宽度设置为70px时，内容仍然溢出div，我想要的是，当div的内容超过div的宽度时，div的高度会自动调整。

有什么帮助吗？这是我的代码。提前致谢

```
<div class = "center"> the quick brown fox jumps over the lazy dog.the quick brown fox jumps over the lazy dog.the quick brown fox jumps over the 
lazy dog.the quick brown fox jumps over the lazy dog.the quick brown fox jumps over the lazy dog.the quick brown fox jumps 
over the lazy dog.the quick brown fox jumps over the lazy dog.the quick brown fox jumps over the lazy dog.the quick brown 
fox jumps over the lazy dog.the quick brown fox jumps over the lazy dog.the quick brown fox jumps over the lazy dog.the 
quick brown fox jumps over the lazy dog.the quick brown fox jumps over the lazy dog.the quick brown fox jumps over the lazy 
dog.the quick brown fox jumps over the lazy dog. </div>

<style> .center{width:70px;} </style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:50:58.077

试试这个 CSS

```
.center
 {
    width:70px;
    word-wrap: break-word;
 } 
```

强制浏览器破坏否则会超出容器的单词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:52:22.277

您描述的所需行为是默认行为（[证明](http://jsfiddle.net/v4KbN/)） - 如果它不能以这种方式工作，那么有一些样式会干扰这种行为，请尝试消除它们。

另外，请注意，`<style>`标签需要放在头部，不允许放在正文中（嗯，准确地说 - 它在 HTML5 中具有属性`scoped`，但 atm 在浏览器中的支持非常非常差）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:51:06.570

将以下属性添加到您的 CSS 类

```
overflow: auto; 
```

# java - 如何将两个排序数组合并为一个排序数组但不使用第三个数组

> ID：11152952
> 
> 赞同：-2
> 
> 时间：2012-06-22T08:48:33.750
> 
> 标签：java

给定两个按升序排列的排序数组，其中一个保留额外空间以容纳两个数组的所有元素，合并两个排序数组，以便结果数组也按升序排序，而不创建第三个数组。

我几乎写了一个合并程序，但我使用了第三个数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:42:11.437

一种方法可以如下。

1.  从较小的数组中取出第一个元素，并在较大的数组中找到它的位置（比如第 n 个位置）。

2.  现在从较小的数组中取出第二个元素，而不是从头开始，而是从第 n 个位置开始，在较大的数组中找到它的位置。

3.  现在从较小的数组中取出第三个元素并重复此过程，直到您的较小数组用完为止。

**复杂性比较**

1.它的最佳情况复杂度与较小数组的大小一样低。虽然最坏的情况是较小数组的大小 * 较大数组的大小。

2.如果您使用 Collection API 中的实用排序方法，即 Collection.sort() 或 Arrays.sort()，它们的复杂度在每种情况下都是**O(nlogn)**，其中 n= 每个数组大小的总和。因为这些方法使用**归并排序**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:08:54.863

```
public static int[] merge(int[] a, int[] b) {    
    int a_size = a.size();
    for(int i=0; i<b.size();i++ ) {
        a[a_size]= b[i];
        a_size++;
    } 
    Arrays.sort(a);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:53:48.187

如果您没有效率问题，只需将一个数组添加到另一个数组的末尾即可。然后对这个串联的数组进行排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-30T15:50:27.710

尝试使用 3 个指针，比如说 i、j 和 k。“i”将指向第一个数组的最后一个元素，“j”将指向第二个数组的最后一个元素，“k”将指向第一个数组的最后一个空白空间。比较 i 和 j 处的元素，取较大者将其放入 k。然后递减 k 和 i 或 j（以较大的元素为准）。继续此操作直到 i 或 j 低于 0。如果 i 在 j 之前低于 0，则从开始将第二个数组的剩余元素添加到第一个数组中。

```
void mergeSortedArrays(int arr1[],int arr2[],int m,int n)
{
    int i,j,k;
    i=m-1;
    j=n-1;
    k=m+n-1;
    while(i>=0&&j>=0)
    {
        if(arr1[i]>arr2[j])
        arr1[k]=arr1[i--];
        else
        arr1[k]=arr2[j--];
        k--;
    }
    while(j>=0)
    arr1[k--]=arr2[j--];
} 
```

# css - 在 Rails 中向 <%= link_to_add_fields "Add A Present", f, :presents %> 添加一个按钮？

> ID：11152955
> 
> 赞同：0
> 
> 时间：2012-06-22T08:48:43.257
> 
> 标签：css, ruby-on-rails, forms, button

我不知道如何将按钮添加到 link_to_add_fields，如

```
<%= link_to_add_fields "Add A Present", f, :presents %> 
```

在我正在制作的 Rails 应用程序中。

我尝试`class: "btn btn-mini btn-info"`在任何地方添加，但我不断收到关于参数数量的错误。

例如，它适用于这一行：

```
<%= f.link_to_remove "Remove this present", class: "btn btn-mini btn-info" %> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T23:23:20.210

我假设您从 rails cast 剧集[http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)制作了这个助手。

在您的 application_helper.rb 中，您已经定义了 link_to_add_fields。大概是这样的。

`def link_to_add_fields(name, f, association)`

改成这个

`def link_to_add_fields(name, f, association, locals={})`

然后在return语句上。

`link_to_function(name, "add_fields(this, \"#{association}\", \"#{escape_javascript(fields)}\")", class: locals[:class])`

最后，像这样使用你的新方法

`<%= link_to_add_fields "Add A Present", f, :presents, class: "btn btn-mini btn-info" %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T17:59:24.967

根据@Aeisme 的回复，我不得不为 Rails 4.1 用户编写一个解决方案。

application_helper.rb

```
def link_to_add_fields(name, f, association, locals={}) 
```

link_to_add_fields 函数的返回值

```
link_to(name, '#', class: [locals[:class], "add_fields"], data: {id: id, fields: fields.gsub("\n", "")}) 
```

# android - 实现 PDF 阅读器的代码示例

> ID：11152956
> 
> 赞同：10
> 
> 时间：2012-06-22T08:48:48.380
> 
> 标签：android, pdf

我想在我正在做的应用程序中实现一个 PDF 阅读器，我找到了几个 API，但它们都不是开源的。

你们中有人知道一个好的免费替代品吗？

* * *

## OP 制作的[Dipak Keshariya 解决方案的](https://stackoverflow.com/a/11153601/505893)轻微改编

**头等舱**

```
package android.pdf.reader;

import java.io.File;
import java.io.FilenameFilter;

import net.sf.andpdf.pdfviewer.PdfViewerActivity;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class First extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        File images = Environment.getExternalStorageDirectory();
        File[] imagelist = images.listFiles(new FilenameFilter()
        {  
                public boolean accept(File dir, String name)  
                {  
                        return ((name.endsWith(".pdf")));
                }  
        }); 
        String[] pdflist = new String[imagelist.length]; 
        for(int i = 0;i<imagelist.length;i++)
        {
                pdflist[i] = imagelist[i].getName();
        }
        this.setListAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, pdflist));
    }

    protected void onListItemClick(ListView l, View v, int position, long id) 
    {
            super.onListItemClick(l, v, position, id);
            Object[] imagelist;
            String path = ((File) imagelist[(int)id]).getAbsolutePath();
            openPdfIntent(path);
    }

    private void openPdfIntent(String path) 
    {
        try
        {
          final Intent intent = new Intent(First.this, Second.class);
          intent.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME, path);
          startActivity(intent);
        }
        catch (Exception e) 
        {
          e.printStackTrace();
        }
    }

} 
```

**二等舱**

```
package android.pdf.reader;

import net.sf.andpdf.pdfviewer.PdfViewerActivity;
import android.os.Bundle;

public class Second extends PdfViewerActivity 
{

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
}

public int getPreviousPageImageResource() {
    return R.drawable.left_arrow;
}

public int getNextPageImageResource() {
    return R.drawable.right_arrow;
}

public int getZoomInImageResource() {
    return R.drawable.zoom_in;
}

public int getZoomOutImageResource() {
    return R.drawable.zoom_out;
}

public int getPdfPasswordLayoutResource() {
    return R.layout.pdf_file_password;
}

public int getPdfPageNumberResource() {
    return R.layout.dialog_pagenumber;
}

public int getPdfPasswordEditField() {
    return R.id.etPassword;
}

public int getPdfPasswordOkButton() {
    return R.id.btOK;
}

public int getPdfPasswordExitButton() {
    return R.id.btExit;
}

public int getPdfPageNumberEditField() {
    return R.id.pagenum_edit;
}
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-22T09:29:38.800

使用下面的代码。

第一个.java

```
public class First extends ListActivity {

    String[] pdflist;
    File[] imagelist;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.main);

        File images = Environment.getExternalStorageDirectory();
        imagelist = images.listFiles(new FilenameFilter() {
            public boolean accept(File dir, String name) {
                return ((name.endsWith(".pdf")));
            }
        });
        pdflist = new String[imagelist.length];
        for (int i = 0; i < imagelist.length; i++) {
            pdflist[i] = imagelist[i].getName();
        }
        this.setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, pdflist));
    }

    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        String path = imagelist[(int) id].getAbsolutePath();
        openPdfIntent(path);
    }

    private void openPdfIntent(String path) {
        try {
            final Intent intent = new Intent(First.this, Second.class);
            intent.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME, path);
            startActivity(intent);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

二.java

```
public class Second extends PdfViewerActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
    }

    public int getPreviousPageImageResource() {
        return R.drawable.left_arrow;
    }

    public int getNextPageImageResource() {
        return R.drawable.right_arrow;
    }

    public int getZoomInImageResource() {
        return R.drawable.zoom_in;
    }

    public int getZoomOutImageResource() {
        return R.drawable.zoom_out;
    }

    public int getPdfPasswordLayoutResource() {
        return R.layout.pdf_file_password;
    }

    public int getPdfPageNumberResource() {
        return R.layout.dialog_pagenumber;
    }

    public int getPdfPasswordEditField() {
        return R.id.etPassword;
    }

    public int getPdfPasswordOkButton() {
        return R.id.btOK;
    }

    public int getPdfPasswordExitButton() {
        return R.id.btExit;
    }

    public int getPdfPageNumberEditField() {
        return R.id.pagenum_edit;
    }
} 
```

并将这两个活动声明到您的清单文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T09:05:16.950

[在 SO 上有一篇很好的帖子](https://stackoverflow.com/questions/2456344/display-pdf-within-app-on-android)。特别是查看 Commons.Ware 给出的答案，它回答了您的问题。

根据您的评论，我在上面提到的 SO 帖子中添加了链接（您找不到的项目的来源）：

*   [Android-Pdf-Viewer-Library（托管在 Github）](https://github.com/jblough/Android-Pdf-Viewer-Library.)
*   [APV（托管在 Google 代码中，使用 Mercurial）](http://code.google.com/p/apv/source/checkout)
*   [Android PDF 查看器（托管在 Sourceforge，使用 SVN）](http://sourceforge.net/scm/?type=svn&group_id=265752)

因此，“签出”或将存储库克隆到本地文件系统以浏览代码。正如我在评论中提到的那样，在您进一步查看您是否可以和不能对代码做什么之前，请检查每个库的许可证。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-12T12:01:24.783

这个对我有用。

1) 将 PdfViewer.jar 添加到项目的构建路径中

2) 将以下可绘制资源从 PdfViewer/res/drawable 复制到 YourProject/res/drawable left_arrow.png right_arrow.png zoom_in.png zoom_out.png

3) 将以下布局资源从PdfViewer/res/layout 复制到YourProject/res/layout dialog_pagenumber.xml pdf_file_password.xml

4) 从 net.sf.andpdf.pdfviewer.PdfViewerActivity 导出您的 PDF 活动

5）使用默认的drawables和布局：

```
public int getPreviousPageImageResource() { return R.drawable.left_arrow; }

public int getNextPageImageResource() { return R.drawable.right_arrow; }

public int getZoomInImageResource() { return R.drawable.zoom_in; }

public int getZoomOutImageResource() { return R.drawable.zoom_out; }

public int getPdfPasswordLayoutResource() { return R.layout.pdf_file_password; }

public int getPdfPageNumberResource() { return R.layout.dialog_pagenumber; }

public int getPdfPasswordEditField() { return R.id.etPassword; }

public int getPdfPasswordOkButton() { return R.id.btOK; }

public int getPdfPasswordExitButton() { return R.id.btExit; }

public int getPdfPageNumberEditField() { return R.id.pagenum_edit; }
enter code here 
```

6) 使用以下代码调用派生的 PdfViewActivity：

```
Intent intent = new Intent(this, YourPdfViewerActivity.class);

intent.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME, "PATH TO PDF GOES HERE");

startActivity(intent); 
```

您可以从此链接下载源代码。[关联](https://app.box.com/shared/0639432f84e000f6f04f)

希望这可以帮助 ：）

# python - 在 Fedora 上安装 python selenium 绑定时出错

> ID：11152957
> 
> 赞同：2
> 
> 时间：2012-06-22T08:48:49.693
> 
> 标签：python, firefox, selenium, webdriver

我正在尝试通过查看[here来安装python-selenium绑定](http://code.google.com/p/selenium/wiki/PythonBindings)

当我尝试导入以下命令时，它在下面显示错误

```
from selenium.firefox.webdriver import WebDriver 
```

结果：

```
from selenium.firefox.webdriver import WebDriver
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named firefox.webdriver 
```

我搜索了很多来解决这个问题，但我没有得到正确的例子来做到这一点，谁能给我一个方法和一个例子来说明如何安装 python selenium 绑定以及为什么返回上述错误。

提前致谢..........

**编辑：** 我根据以下答案编辑我的代码，并尝试了以下，我得到了以下

```
>>> from selenium import webdriver
>>> driver = webdriver.Firefox()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/site-packages/selenium-2.21.3-py2.7.egg/selenium/webdriver/firefox/webdriver.py", line 51, in __init__
    self.binary, timeout),
  File "/usr/lib/python2.7/site-packages/selenium-2.21.3-py2.7.egg/selenium/webdriver/firefox/extension_connection.py", line 47, in __init__
    self.binary.launch_browser(self.profile)
  File "/usr/lib/python2.7/site-packages/selenium-2.21.3-py2.7.egg/selenium/webdriver/firefox/firefox_binary.py", line 44, in launch_browser
    self._wait_until_connectable()
  File "/usr/lib/python2.7/site-packages/selenium-2.21.3-py2.7.egg/selenium/webdriver/firefox/firefox_binary.py", line 81, in _wait_until_connectable
    self._get_firefox_output())
selenium.common.exceptions.WebDriverException: Message: 'The browser appears to have exited before we could connect. The output was: *** LOG addons.xpi: startup\n*** LOG addons.xpi: checkForChanges\n*** LOG addons.xpi: Opening database\n*** LOG addons.xpi: No changes found\nFailed to dlopen /usr/lib/libX11.so.6\ndlerror says: /usr/lib/libX11.so.6: wrong ELF class: ELFCLASS32\n' 
```

并且还说有`some crash in firefox 1.0....`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:55:37.380

如该页面所述，他们已经重新组织了包。使用我在此处发布的第二个代码清单。

> 在撰写本文时使用主干的一个优点是对包的重组。以前，要初始化您必须执行的浏览器，

```
from selenium.firefox.webdriver import WebDriver
driver = WebDriver() 
```

> 这已经改变了，所以现在只需要：

```
from selenium import webdriver
driver = webdriver.Firefox() 
```

编辑（对于新错误）：

你是从没有 X 显示器的 linux 服务器上运行它吗？Firefox 需要一个显示器来呈现自己。看一下[PyVirtualDisplay](http://pypi.python.org/pypi/PyVirtualDisplay)以运行“无头”（没有 X）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T03:18:34.793

我在 Fedora 17 64 位上遇到了同样的问题。selenium - 加载 x_ignore_nofocus.so 问题

Selenium 无法启动 Firefox，并出现以下错误：

'在我们连接之前，浏览器似乎已经退出。输出为： dlopen 失败 /usr/lib/libX11.so.6\ndlerror 说：/usr/lib/libX11.so.6: wrong ELF class: ELFCLASS32\n'

这是因为 x_ignore_nofocus 库尝试加载 32 位版本的 libX11 而不是 64 位。在我的系统中有以下版本的 libX11：

```
find / | grep libX11.so.6 | xargs file 
```

/usr/lib64/libX11.so.6：到 libX11.so.6.3.0 的符号链接 /usr/lib64/libX11.so.6.3.0：ELF 64 位 LSB 共享对象，x86-64，版本 1（SYSV )，动态链接，剥离 /usr/lib/libX11.so.6：符号链接到 `libX11.so.6.3.0' /usr/lib/libX11.so.6.3.0：ELF 32 位 LSB 共享对象， Intel 80386，版本 1 (SYSV)，动态链接，剥离

解决方案 更改符号链接 /usr/lib/libX11.so.6 以指向 64 位版本 /usr/lib64/libX11.so.6.3.0：

```
mv /usr/lib/libX11.so.6 /usr/lib/libX11.so.6.bak
ln -s /usr/lib64/libX11.so.6.3.0 /usr/lib/libX11.so.6 
```

之后硒开始工作。 [来源](http://sebgoo.blogspot.com/2012/02/selenium-problem-with-loading-x-ignore.html?showComment=1342840505275#c7321743917714208108)

# c++ - MSBuild ProjectReference 项文档

> ID：11152961
> 
> 赞同：20
> 
> 时间：2012-06-22T08:49:02.900
> 
> 标签：c++, visual-c++, msbuild

我在 MSBuild 项目中找不到有关`ProjectReference`标签的文档。我在哪里可以阅读它的详细说明？

**编辑：** 我有一个`.vcxproj`由其他人创建的。它包含`ProjectReference`项目。`ProjectReference`包含子标签：`Private`, `ReferenceOutputAssembly`, `CopyLocalSatelliteAssemblies`, `LinkLibraryDependencies`, `UseLibraryDependencyInputs`. 我在哪里可以阅读这些标签？它们可以包含哪些值？`ProjectReference`还可以包含哪些其他子标签？

我在 MSDN 和 Google 中搜索过，但没有找到文档页面，只有关于其他产品的讨论和文档，而不是 MSBuild。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-02-24T23:19:34.273

从 Jason Pyeron 在他的评论中提供的 MSBuild 源代码链接开始，我了解到，当 MSBuild 准备构建依赖项时，[它包括每个项目的所有项目元数据](https://github.com/Microsoft/msbuild/blob/e5bc7994348dba88d1f6fe2ebd6aa354355f0063/src/Tasks/AssemblyDependency/ReferenceTable.cs#L2758)（您称为子标签）`ProjectReference`。因此，下游任务和目标可以并且有时确实可以读取任意`ProjectReference`元数据。

有关 C++ 项目的问题的答案，您可以检查`Microsoft.CppBuild.targets`和`Microsoft.CppCommon.targets`（它们在 MSBuild 14 中的默认路径，与 Visual Studio 2015 一致，是`C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V140\`）。然而，正如以下示例所示，这样做并不简单：

1.  在`Microsoft.CppBuild.targets`中，Target动态`ResolvedXDCMake`创建`_ResolvedNativeProjectReferencePaths`Items。
2.  Target 从这些项目中动态`ComputeReferenceLinkInputs`创建`ProjectReferenceToLink`项目。
3.  对于每个没有`CopyLocal`元数据的项目，相同的目标会添加它，复制任何`Private`元数据值。
4.  对于每个具有不同路径的项目，相同的目标会`Link`动态创建一个项目。
5.  现在切换到`Microsoft.CppCommon.targets`，项目在目标中的任务参数`Link`中传递！虽然公平地说，它们的元数据在上一步中已被清除，因此在这种特殊情况下您不必深入研究Target 文档。`Sources``Link``Link``Link`

以下是与您的问题相关的其他部分：

**参数**

*   `Include`（属性）：项目文件的路径
*   `Project`（元数据）：项目 GUID，格式为 {00000000-0000-0000-0000-000000000000}
*   `ReferenceOutputAssembly`（元数据）：布尔值，指定是否应将所引用项目的输出传递给编译器。默认为真。
*   `SpecificVersion`（元数据）：是否应使用程序集的确切版本。
*   `Targets`（元数据）：应构建的引用项目中的目标的分号分隔列表。Default 是`$(ProjectReferenceBuildTargets)`其默认值为空的值，表示默认目标。
*   `OutputItemType`（元数据）：将目标输出发送到的项目类型。默认为空白。如果`ReferenceOutputAssembly`设置为“true”（默认），那么目标输出将成为编译器的引用。
*   `EmbedInteropTypes`（元数据）：可选布尔值。此引用中的类型是否需要嵌入到目标程序集中 - 仅限互操作程序集

**评论**

当使用`OutputItemType`参数时，附加参数（元数据）可能适用。例如，当`OutputItemType`设置为时`Content`，`CopyToOutputDirectory`可以使用：

*   CopyToOutputDirectory（元数据）：可选字符串。确定是否将文件复制到输出目录。值：`Never`, `Always`, `PreserveNewest`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-27T20:53:36.963

您会注意到 ProjectReference 元素是 ItemGroup 元素的子元素。

谢天谢地，ItemGroups 是一个完整记录的模式项。您会发现 ItemGroups 的子元素可以是任何东西。将其视为集合的名称。ItemGroup 中的那个项目可以有“元数据”值。

例如，

```
<ItemGroup>
    <WindowsFiles Include="C:\Windows\*">
       <IsSystem>true</IsSystem>
    </WindowsFiles>
</ItemGroup> 
```

这是定义一个名为 WindowsFiles 的项目组。它本质上变成了与 Include 属性匹配的文件的集合。所有项目组项目都有内置的元数据 - 例如文件名、扩展名、完整路径、目录等，但您可以添加自己的 - 在这种情况下 IsSystem 是附加的。

引用项目组通过以下两种方式之一完成：

```
<Message Text="%(WindowsFiles.FullPath)"/>

<Message Text="@(WindowsFiles->'%(FullPath)')"/> 
```

后者被称为更高级的变换。最好坚持前者，直到您了解 ItemGroups 或转换就不会进入。

您感兴趣的 ProjectReference 项目组将由某个目标文件处理。由于项目组的名称相当随意，因此从概念上讲，它们是变量，因此定义用途的目标文件如何处理它们。

沿着 Import 语句中提到的文件查找 ProjectReference 项组的使用位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-06T17:52:47.513

MSDN 上的这个网页似乎有一些很好的信息：

[https://docs.microsoft.com/en-us/visualstudio/msbuild/common-msbuild-project-items?view=vs-2017](https://docs.microsoft.com/en-us/visualstudio/msbuild/common-msbuild-project-items?view=vs-2017)

# java - 与 GridBagLayout 右对齐

> ID：11152974
> 
> 赞同：4
> 
> 时间：2012-06-22T08:50:11.997
> 
> 标签：java, swing, alignment, gridbaglayout

我正在使用 GridBagLayout 创建一个简单的 GUI，几乎一切正常，但有这样一个细节：有两列，左侧用于标签，右侧用于 JTextArea 等其他小部件，我希望第一列与右侧对齐.

所以我尝试将锚属性设置为 GridBagConstraints.NORTHEAST 或 .EAST，但它们都不起作用。

我的代码如下：

```
private void createDataPanel() {
        data = new JPanel();
        data.setLayout(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();
        data.setBorder(new TitledBorder("NOTAM proposal parameters"));

        c.gridx = 0;
        c.gridy = 0;
        c.insets = new Insets(5, 10, 5, 10);
        c.fill = GridBagConstraints.HORIZONTAL;
        data.add(new JLabel("Start time (DD-MM-YYYY HH:MM:SS):"), c);

        c.gridx++;
        long today = System.currentTimeMillis();
        startTimePicker = new JXDatePicker(new Date(today));
        startTimePicker.setFormats(dateFormatter);
        data.add(startTimePicker);

        c.gridx = 0;
        c.gridy++;
        c.anchor = GridBagConstraints.EAST;
        data.add(new JLabel("End time (DD-MM-YYYY HH:MM:SS):"), c);

        c.gridx++;
        c.anchor = GridBagConstraints.CENTER;
        long tomorrow = today + 86400000;
        endTimePicker = new JXDatePicker(new Date(tomorrow));
        endTimePicker.setFormats(dateFormatter);
        data.add(endTimePicker, c);

        c.gridx = 0;
        c.gridy++;
        c.anchor = GridBagConstraints.NORTHEAST;
        JPanel itemEPanel = new JPanel();
        itemEPanel.setLayout(new BoxLayout(itemEPanel, BoxLayout.Y_AXIS)); 
        itemEPanel.add(new JLabel("Item E:"));
        remainingChars = new JLabel(Integer.toString(availableChars) + " characters remaining");
        itemEPanel.add(remainingChars);
        data.add(itemEPanel, c);

        c.gridx++;
        c.anchor = GridBagConstraints.CENTER;
        itemEText = new JTextArea(8, 1);
        JScrollPane itemEScroll = new JScrollPane(itemEText);
        itemEText.setLineWrap(true);
        itemEText.setWrapStyleWord(true);
        itemEText.setBackground(Color.WHITE);
        itemEText.getDocument().addDocumentListener(new DocumentListener() {

            @Override
            public void removeUpdate(DocumentEvent e) {
                updateRemainingChars(e.getDocument());
            }

            @Override
            public void insertUpdate(DocumentEvent e) {
                updateRemainingChars(e.getDocument());
            }

            @Override
            public void changedUpdate(DocumentEvent e) {
                updateRemainingChars(e.getDocument());
            }

            public void updateRemainingChars(Document doc) {
                availableChars = maxItemECharacters - doc.getLength();
                if(availableChars>=0){
                    remainingChars.setText(Integer.toString(availableChars) + " characters remaining");
                    remainingChars.setForeground(Color.BLACK);
                    if(!okButton.isEnabled()) okButton.setEnabled(true);
                }
                else{
                    remainingChars.setText("Message too long: " + Integer.toString(availableChars));
                    remainingChars.setForeground(Color.RED);
                    if(okButton.isEnabled()) okButton.setEnabled(false);
                }
            }
        });
        data.add(itemEScroll, c);

        c.gridx = 0;
        c.gridy++;
        JPanel itemDPanel = new JPanel(new FlowLayout());
        applicable = new JCheckBox("Applicable");
        applicable.setSelected(true);
        applicable.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                itemDText.setEnabled(applicable.isSelected());
            }
        });
        itemDPanel.add(applicable);
        itemDPanel.add(new JLabel("Item D:"));
        data.add(itemDPanel, c);

        c.gridx++;
        itemDText = new JTextField();
        data.add(itemDText, c);
    } 
```

尽管如此，它目前看起来像这样： ![在此处输入图像描述](../Images/7e893484341b0647222c4881b673af75.png)

那它怎么能对齐呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T09:00:04.263

设置 GridBagConstraints.NORTHEAST 或 .EAST 但使用 fill=NONE

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T09:16:15.867

你的意思是你想让你`JLabel`的文字在右边。如果是，请尝试`JLabel`像这样初始化您的 s

```
JLabel someLabel = new JLabel("My Text will align towards RIGHT", JLabel.RIGHT); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T08:51:58.220

```
JLabel.setHorizontalTextPosition(JLabel.RIGHT); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T09:03:59.523

问题是你使用了这个约束：

```
c.fill = GridBagConstraints.HORIZONTAL; 
```

因此所有组件都水平拉伸，将对齐方式留给它们而不是 GridBagLayout。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-03T07:53:47.307

就我而言，它是

```
constraints.anchor = GridBagConstraints.NORTHEAST; 
```

而不是`.fill`属性

# google-maps - 谷歌地图 API 距离计算

> ID：11152976
> 
> 赞同：-1
> 
> 时间：2012-06-22T08:50:29.140
> 
> 标签：google-maps

在 Google maps api 中，我正在为出租车公司编写计算脚本。

每英里收费，我已经做到了。但是，如果目的地位于大伦敦地区，则价格从每英里 1.50 英镑上涨到 2.50 英镑。

有谁知道如何计算该区域内行驶的距离？

我知道我可以将该区域定义为多边形，但我不知道如何计算在该区域中行驶的距离。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:10:37.450

您能否使用[类似](https://stackoverflow.com/questions/2698112/how-to-add-markers-on-google-maps-polylines-based-on-distance-along-the-line)的方法计算折线的距离，然后确定折线是否通过您的多边形 - 使用[类似](https://stackoverflow.com/questions/9385523/does-this-polyline-pass-through-this-polygon)的方法- 以及它穿过的点/距离，然后确定要收取多少费用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-14T09:49:03.927

使用 locatio 类有一种方法可以为您提供两个地理点之间的距离。位置.距离（位置2）

# javascript - document.ready 中的全局 javascript 变量

> ID：11152977
> 
> 赞同：41
> 
> 时间：2012-06-22T08:50:30.373
> 
> 标签：javascript, jquery, global-variables, scope

声明全局 javascript 变量的正确方法是什么？我尝试的方式，不起作用

```
$(document).ready(function() {

    var intro;

    if ($('.intro_check').is(':checked')) {
        intro = true;
        $('.intro').wrap('<div class="disabled"></div>');
    };

    $('.intro_check').change(function(){
        if(this.checked) {
            intro = false;
            $('.enabled').removeClass('enabled').addClass('disabled');
        } else {
            intro = true;
            if($('.intro').exists()) {
                $('.disabled').removeClass('disabled').addClass('enabled'); 
            } else {
                $('.intro').wrap('<div class="disabled"></div>');
            }
        }
    });
});

console.log(intro); 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-06-22T08:53:29.643

如果你要声明一个全局变量，你可能想要使用某种命名空间。只需在外面声明命名空间，然后你可以将任何你想要的东西扔进去。像这样...

```
var MyProject = {};
$(document).ready(function() {
    MyProject.intro = "";

    MyProject.intro = "something";
});

console.log(MyProject.intro); // "something" 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-06-22T08:51:20.570

声明这个

```
var intro; 
```

`$(document).ready()`因为，会在`$(document).ready()`全局范围内隐藏您的变量。

**代码**

```
var intro;

$(document).ready(function() {
    if ($('.intro_check').is(':checked')) {
        intro = true;
        $('.intro').wrap('<div class="disabled"></div>');
    };
    $('.intro_check').change(function(){
        if(this.checked) {
            intro = false;
            $('.enabled').removeClass('enabled').addClass('disabled');
        } else {
            intro = true;
            if($('.intro').exists()) {
                $('.disabled').removeClass('disabled').addClass('enabled'); 
            } else {
                $('.intro').wrap('<div class="disabled"></div>');
            }
        }
    });
}); 
```

* * *

### 根据@Zakaria 评论

其他方式：

```
window.intro = undefined;

$(document).ready(function() {
    if ($('.intro_check').is(':checked')) {
        window.intro = true;
        $('.intro').wrap('<div class="disabled"></div>');
    };
    $('.intro_check').change(function(){
        if(this.checked) {
            window.intro = false;
            $('.enabled').removeClass('enabled').addClass('disabled');
        } else {
            window.intro = true;
            if($('.intro').exists()) {
                $('.disabled').removeClass('disabled').addClass('enabled'); 
            } else {
                $('.intro').wrap('<div class="disabled"></div>');
            }
        }
    });
}); 
```

* * *

## 笔记

```
console.log(intro); 
```

在 DOM 就绪函数之外（当前你已经）将记录`undefined`，但在 DOM 就绪函数中它会给你 true/false。

### 您在 DOM 就绪执行之前执行外部`console.log`执行，因为 DOM 就绪执行是在所有资源出现到 DOM 之后，即在 DOM 准备好之后，所以我认为您总是会得到荒谬的结果。

* * *

### 根据@W0rldart 的评论

> 我需要在 DOM 就绪功能之外使用它

您可以使用以下方法：

```
var intro = undefined;

$(document).ready(function() {
    if ($('.intro_check').is(':checked')) {
        intro = true;
        introCheck();
        $('.intro').wrap('<div class="disabled"></div>');
    };
    $('.intro_check').change(function() {
        if (this.checked) {
            intro = true;
        } else {
            intro = false;
        }
        introCheck();
    });

});

function introCheck() {
    console.log(intro);
} 
```

更改 的值后，`intro`我调用了一个函数，该函数将以 的新值触发`intro`。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-06-22T08:52:52.383

JavaScript 具有**函数级**变量范围，这意味着您必须在`$(document).ready()`函数外部声明变量。

或者，为了使您的变量具有**全局**范围，只需不要`var`在它之前使用关键字，如下所示。但是，通常这被认为是**不好的做法**，因为它会*污染*全局范围，但由您决定。

```
$(document).ready(function() {
   intro = null; // it is in global scope now 
```

* * *

要了解更多信息，请查看：

*   [解释 JavaScript 作用域和闭包](http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-22T08:53:03.227

`window.intro`在`$(document).ready()`. _

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-06-28T06:10:28.307

您可以在没有 var 的文档就绪函数中定义变量，使其成为全局变量。在 javascript 中，没有 var 声明的任何变量都会自动成为全局变量

```
$(document).ready(function() {
    intro =  "something";
}); 
```

虽然您不能立即使用该变量，但其他函数可以访问它

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-22T08:52:00.227

像这样：把`intro`你的文档放在外面准备好，在这里很好的讨论：http: [//forum.jquery.com/topic/how-do-i-declare-a-global-variable-in-jquery](http://forum.jquery.com/topic/how-do-i-declare-a-global-variable-in-jquery) @thecodeparadox 非常快：P ！

```
 var intro;

$(document).ready(function() {

    if ($('.intro_check').is(':checked')) {
        intro = true;
        $('.intro').wrap('<div class="disabled"></div>');
    };

    $('.intro_check').change(function(){
        if(this.checked) {
            intro = false;
            $('.enabled').removeClass('enabled').addClass('disabled');
        } else {
            intro = true;
            if($('.intro').exists()) {
                $('.disabled').removeClass('disabled').addClass('enabled'); 
            } else {
                $('.intro').wrap('<div class="disabled"></div>');
            }
        }
    });
}); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-22T08:59:46.703

与其他编程语言不同，在任何函数之外声明的任何变量都会自动变为全局变量，

```
<script>

//declare global variable
var __foo = '123';

function __test(){
 //__foo is global and visible here
 alert(__foo);
}

//so, it will alert '123'
__test();

</script> 
```

您的问题是您在`ready()`函数内部声明变量，这意味着它仅在`ready()`函数内部可见（在范围内），但在外部不可见，

解决方案：所以让它成为全球性的，即在外面声明这个`$(document).ready(function(){});`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-22T08:52:31.443

`window.intro = "value";`在 ready 函数内部使用。如果你想要它可能`"value"`是`void 0``undefined`

# android - 获取行车方向的android代码

> ID：11152981
> 
> 赞同：0
> 
> 时间：2012-06-22T08:50:54.613
> 
> 标签：android, google-maps, maps

我目前正在做一个需要获取行车路线的 android 应用程序。我有源点和目的地点的纬度和经度，我得到了两点之间的路径，但我无法获得行车路线。请帮帮我...路径的代码如下

```
 GeoPoint gp1;
        GeoPoint gp2 = startGP;

        for (int i = 1; i < pairs.length; i++) {
            lngLat = pairs[i].split(",");
            gp1 = gp2;
            // watch out! For GeoPoint, first:latitude, second:longitude
            gp2 = new GeoPoint((int) (Double.parseDouble(lngLat[1]) * 1E6),
                    (int) (Double.parseDouble(lngLat[0]) * 1E6));
            myMapView.getOverlays().add(new DirectionPathOverlay(gp1, gp2));
            Log.d("xxx", "pair:" + pairs[i]);
        }

        myMapView.getOverlays().add(new DirectionPathOverlay(gp2, gp2));

        myMapView.getController().animateTo(startGP);
        myMapView.setBuiltInZoomControls(true);
        myMapView.displayZoomControls(true);

}

 private String[] getDirectionData(String srcPlace, String destPlace) {

        String urlString = "http://maps.google.com/maps?f=d&hl=en&saddr="
                + srcPlace + "&daddr=" + destPlace
                + "&ie=UTF8&0&om=0&output=kml";
        Log.d("URL", urlString);
        Document doc = null;
        HttpURLConnection urlConnection = null;
        URL url = null;
        String pathConent = "";
        try {

            url = new URL(urlString.toString());
            urlConnection = (HttpURLConnection) url.openConnection();
            urlConnection.setRequestMethod("GET");
            urlConnection.setDoOutput(true);
            urlConnection.setDoInput(true);
            urlConnection.connect();
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            doc = db.parse(urlConnection.getInputStream());

        } catch (Exception e) {
        }

        NodeList nl = doc.getElementsByTagName("LineString");
        for (int s = 0; s < nl.getLength(); s++) {
            Node rootNode = nl.item(s);
            NodeList configItems = rootNode.getChildNodes();
            for (int x = 0; x < configItems.getLength(); x++) {
                Node lineStringNode = configItems.item(x);
                NodeList path = lineStringNode.getChildNodes();
                pathConent = path.item(0).getNodeValue();
            }
        }
        String[] tempContent = pathConent.split(" ");
        return tempContent;
    } 
```

方向路径覆盖.java

```
 public class DirectionPathOverlay extends Overlay {
private GeoPoint gp1;
private GeoPoint gp2;
public DirectionPathOverlay(GeoPoint gp1, GeoPoint gp2) {
    this.gp1 = gp1;
    this.gp2 = gp2;
}

@Override
public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
        long when) {
    // TODO Auto-generated method stub
    Projection projection = mapView.getProjection();
    if (shadow == false) {
        Paint paint = new Paint();
        paint.setAntiAlias(true);
        Point point = new Point();
        projection.toPixels(gp1, point);
        paint.setColor(Color.BLUE);
        Point point2 = new Point();
        projection.toPixels(gp2, point2);
        paint.setStrokeWidth(2);
        canvas.drawLine((float) point.x, (float) point.y, (float) point2.x,
                (float) point2.y, paint);
    }
    return super.draw(canvas, mapView, shadow, when);
}

@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    // TODO Auto-generated method stub

    super.draw(canvas, mapView, shadow);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:24:45.023

尝试使用此代码显示从您当前位置到某个地点的方向。

```
locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
    Criteria criteria = new Criteria();
    provider = locationManager.getBestProvider(criteria, false);
    Location location = locationManager.getLastKnownLocation(provider);

    if (location != null) {
        System.out.println("Provider " + provider + " has been selected.");
        lat = (double) (location.getLatitude());
        lng = (double) (location.getLongitude());

    } else {
        Log.d(TAG, "Cannot get the location");
    }

    final Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse("http://maps.google.com/maps?" + "saddr="+ lat + "," + lng + "&daddr="+hotelLat+","+hotelLng));
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(intent); 
```

# wpf - 选中时 WPF 更改 ListboxItem 突出显示颜色

> ID：11152982
> 
> 赞同：8
> 
> 时间：2012-06-22T08:50:55.883
> 
> 标签：wpf, background-color, listboxitem

我在 WPF 中设置`HighlightBrushKey`a `SelectedItem`of a时遇到问题。`Listbox`我的意图是根据给定的布尔值设置项目的颜色，位于代码中。

我尝试了以下步骤：

*   实现一个转换器，检查布尔值并返回正确的颜色。

    例子：

    ```
    <ribbon:RibbonWindow.Resources>
      <l:WindowControl x:Key="ListBoxItemBackgroundConverter" />
        <Style x:Key="listBoxStyle" TargetType="{x:Type ListBoxItem}">
          <Style.Resources>
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="{Binding Source={x:Static SystemColors.HighlightBrushKey}, Converter={StaticResource ListBoxItemBackgroundConverter}}"/>
            <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="{Binding Source={x:Static SystemColors.ControlBrushKey}, Converter={StaticResource ListBoxItemBackgroundConverter}}"/>
          </Style.Resources>
        </Style>
    </ribbon:RibbonWindow.Resources> 
    ```

    这里的问题是 Convert 方法只被调用了一次，但是我每次选择一个项目并检查布尔值时都需要调用 Converter。类似于触发器，但带有“ `HighlightBrushKey`”。

    转换器：

    ```
    public object Convert(object value, Type targetType,
                          object parameter, CultureInfo culture)
    {
       if(currentField == null)
          return Brushes.Yellow;
       if (currentField.Save)
          return Brushes.LightGreen;
       else
          return Brushes.Yellow;
    } 
    ```

*   我的下一个想法是将“ `HighlightBrushKey`”设置为“ ”并在代码中手动`Transparent`更改。`item.Background`这里的问题是我的物品变成了白色并且看不到背景颜色

    例子：

    ```
    <ListBox.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent" />
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="Black" />
        <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Transparent" />
    </ListBox.Resources> 
    ```

提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:59:43.287

```
<Style x:Key="listBoxStyle" TargetType="{x:Type ListBox}">
    <Style.Resources>
         <!-- Background of selected item when focussed -->
         <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Red" />
         <!-- Background of selected item when not focussed -->
         <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Green" />
    </Style.Resources>
</Style>

<ListBox Style="{StaticResource listBoxStyle}">
</ListBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-19T16:07:09.747

如果您希望在选择列表框项或鼠标悬停时禁用突出显示，您可以使用以下代码。

```
<Style TargetType="ListBoxItem" x:Key="ListBoxItemStyle">
    <Setter Property="IsSelected" Value="{Binding Content.IsSelected, Mode=TwoWay, RelativeSource={RelativeSource Self}}"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ListBoxItem">
                <ContentPresenter/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<ListBox ItemContainerStyle="{StaticResource ListBoxItemStyle}"/> 
```

# android - 禁止 GridView 一次加载所有视图

> ID：11152992
> 
> 赞同：0
> 
> 时间：2012-06-22T08:51:30.407
> 
> 标签：android, gridview, android-gridview

我有大约 700 个项目要显示在网格视图中。

在三星 Galaxy Tab 10.1 上，这不是问题：它有足够的内存。在 HTC Explorer 上，堆溢出。

所以我想动态加载关于当前滚动位置的数据（屏幕 N 行 + 5 行作为尾部）。我想显示一个滚动条，它代表总行中的位置。但我不想画我看不到的物品。

换句话说，我想`UITableView`在 iOS 中创建类似的东西。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:11:40.243

Android`Adapter`的工作方式与 iOS 类似`UITableViewDataSource`。你需要打电话

```
public void setAdapter (ListAdapter adapter) 
```

在您的适配器上`GridView`，然后该适配器将收到如下回调：

```
public int getCount ()
public View getView (int position, View convertView, ViewGroup parent) 
```

重用与出列 a 相同的`convertView`方式很重要`UITableViewCell`

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

如果您正确执行所有操作，它将永远不会尝试一次加载所有视图，而只会加载当前显示的视图，并且您应该不再有内存问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:55:43.217

您应该使用能够重用 View 对象的 ListView，这样您就不必实例化这么多对象。

# iphone - 从 3 行 UIPickerView 收集数据

> ID：11152994
> 
> 赞同：0
> 
> 时间：2012-06-22T08:51:32.780
> 
> 标签：iphone, ios5, xcode4.3

我有 3 行数据，`UIPickerView`即 timeHour、timeMinute、timeSecond。如何收集数据，在我从中选择后在我的 labelTime 显示它`UIPickerView`？我在下面使用此代码，但它只收集我的第一行数据（timeHour）。

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    labelTime.text = [timeHour objectAtIndex:[picker selectedRowInComponent:0]];
} 
```

我想在 labelTime 中显示的是这样的 -> hh : mm : ss （假设是 99 : 59 : 59）。以及我如何在每次启动 UIPickerView 后/每次将其重置为 00 : 00 : 00 时？

对不起，我是新来的。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:01:20.907

只需编写此代码。

```
[yourPickerView reloadAllComponents]; 
```

我想这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:08:11.493

实际上，我一直认为选择器中的项目是列：

每次有人在您的选择器中旋转不同的列之一时，都会调用您正在谈论的函数。

我希望您需要以下内容

```
NSString* hour = [timeHour objectAtIndex:[picker selectedRowInComponent:0]];
NSString* min = [timeMin objectAtIndex:[picker selectedRowInComponent:1]];
NSString* sec = [timeSec objectAtIndex:[picker selectedRowInComponent:2]];
labelTime.text = [hour stringByAppendingFormat:@":%@:%@", min, sec];  // don't forget to 0-pad if desired 
```

至于每次将视图重置为 00:00:00，正如 prasad 所述，在您拥有的委托代码之外，您可以调用 reloadAllComponents，然后在您的数据源中，将返回的初始值全为零。

# linq - LINQ groupby 和 count

> ID：11152995
> 
> 赞同：0
> 
> 时间：2012-06-22T08:51:34.277
> 
> 标签：linq, count, group-by

我有以下 LINQ 查询：

```
From metasect In DirectCast(Form.ChildDocBox.Tag, META_DOCUMENT).META_SECTIONS
From metaset In metasect.META_SETS
From metacell In metaset.META_CELLS
From lookup In metacell.CHILD_META_CELL_CELLS_LOOKUPS
Where lookup.PARENT_META_CELL_META_CELL.META_SET.META_SECTION.META_DOCUMENT.META_DOC_ID = docToDelete.META_DOC_ID
Select metasect.META_SECT_NAME + " gets from " + lookup.PARENT_META_CELL_META_CELL.META_SET.META_SECTION.META_SECT_NAME Distinct 
```

**Select**指令选择一个可以重复的表达式，因为在同一对父子元节有多个查找，*这*就是我添加 *Distinct*子句的**原因。**

现在，我想计算每个父母/子女夫妇有多少*查找。*

就像是

```
SELECT metasect.META_SECT_NAME + " gets from " + lookup.PARENT_META_CELL_META_CELL.META_SET.META_SECTION.META_SECT_NAME,
       COUNT(lookup)
FROM ...
WHERE ...
GROUP BY metasect.META_SECT_NAME + " gets from " + lookup.PARENT_META_CELL_META_CELL.META_SET.META_SECTION.META_SECT_NAME 
```

提前感谢您的任何建议:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:21:05.040

我用两步法解决了

```
Dim all = From metasect In DirectCast(Form.ChildDocBox.Tag, META_DOCUMENT).META_SECTIONS
          From metaset In metasect.META_SETS
          From metacell In metaset.META_CELLS
          From lookup In metacell.CHILD_META_CELL_CELLS_LOOKUPS
          Where lookup.PARENT_META_CELL_META_CELL.META_SET.META_SECTION.META_DOCUMENT.META_DOC_ID = docToDelete.META_DOC_ID
          Select lookup

For Each grp As IGrouping(Of String, ICELLS_LOOKUP) In
         all.GroupBy(Function(l) l.CHILD_META_CELL_META_CELL.META_SET.META_SECTION.META_SECT_NAME + " gets from " + l.PARENT_META_CELL_META_CELL.META_SET.META_SECTION.META_SECT_NAME)

    'do some stuff with grp.Key() & grp.Count()'

Next 
```

# perl - perl：Exporter 不适用于 `use` 语句中的路径元素

> ID：11152996
> 
> 赞同：9
> 
> 时间：2012-06-22T08:51:35.457
> 
> 标签：perl, exporter

我有一个 perl 问题：导入符号，具体取决于路径元素`@INC`和`use`语句。

如果我将完整路径放入`@INC`，则导入有效。如果路径的一部分在`use`语句中，则执行要导入的模块，但必须显式完成导入：

```
########################################
# @INC has: "D:/plu/lib/"

#------------------------------------------------
# Exporting file is here: "D:/plu/lib/impex/ex.pm"
#
use strict;
use warnings;
package ex;

use Exporter;
our @ISA = 'Exporter';
our @EXPORT = qw( fnQuark );

sub fnQuark { print "functional quark\n"; }

print "Executing module 'ex'\n";
1;

#------------------------------------------------
# Importing file, example 1, is here: "D:/plu/lib/impex/imp.pl"
#
use strict;
use warnings;
package imp;

use impex::ex;

ex->import( @ex::EXPORT );    # removing this line makes fnQuark unavailable!
                              # Why is this necessary, 'ex.pm' being an Exporter?
fnQuark();

#------------------------------------------------
#  Importing file, example 2, is here: "D:/plu/lib/impex/imp2.pl"
#
use strict;
use warnings;
package imp2;

use lib 'D:/plu/lib/impex';
use ex;

fnQuark();                    # works without explicit import
#------------------------------------------------- 
```

我的错误是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T09:16:20.387

当你说

```
use Foo; 
```

这相当于：

```
BEGIN { 
    require 'Foo.pm';
    Foo->import;
}; 
```

您已经在您的包中定义了`ex.pm`要命名的包`ex`，所以当您使用时`use impex::ex`，Perl 会执行一个隐含的`impex::ex->import`. 但是没有名为 的包`impex::ex`，因此您必须手动导入 from`ex`以获取符号。

正确的方法是将模块放在现有目录下，`@INC`并在相对于目录的完整路径名之后命名包`@INC`。所以你`impex/ex.pm`应该开始，`package impex::ex;`这就是你应该如何做的`use`。

如果您担心包名称又长又笨重，请查看[aliased](http://search.cpan.org/perldoc?aliased)。

# java - wsimport missing @WebMethod for single operation

> ID：11152997
> 
> 赞同：1
> 
> 时间：2012-06-22T08:51:41.203
> 
> 标签：java, web-services, cxf, axis, wsimport

I'm trying to generate a Java client for a webservice defined by [http://v3.core.com.productserve.com/ProductServeService.wsdl](http://v3.core.com.productserve.com/ProductServeService.wsdl)

I've tried Java's wsimport and wsdl2java from both CXF and Axis2.

e.g.

```
wsimport -p productserve -XadditionalHeaders  http://v3.core.com.productserve.com/ProductServeService.wsdl 
```

All three produce ApiPortType.java with the same problem. The return type for the getProductList method is void and has no @WebResult annotation. All other operations from the WSDL are mapped to java code fine.

I've looked through the WSDL in detail but can't spot what the problem might be and why all 3 tools fail to produce the correct return type for the operation.

Any ideas?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T09:37:07.367

This web service falls into the category of *document literal wrapped* web services. The following points are true:

*   Binding is document/literal
*   operation's (getProductList()) in/out messages contains one wsdl:part each
*   request part refers to XSD element with the same name as operation
*   response part refers to XSD element with the same name as operation + "Response"

So you have `void` return, but there are really 4 *results*:

*   `Holder<List<Product>> oProduct`
*   `Holder<Integer> iTotalCount`
*   `Holder<List<RefineByGroup>> oActiveRefineByGroup`
*   `Holder<List<RefineByGroup>> oRefineByGroup`

CXF (using `wsimport`) has generated `WRAPPED` style of operations. You can also generate `BARE` style using CXF's:

```
wsdl2java -bareMethods http://v3.core.com.productserve.com/ProductServeService.wsdl 
```

This way, instead of:

```
@WebMethod
@RequestWrapper(localName = "getProductList", targetNamespace = "http://v3.core.com.productserve.com/", className = "productserve.GetProductList")
@ResponseWrapper(localName = "getProductListResponse", targetNamespace = "http://v3.core.com.productserve.com/", className = "productserve.GetProductListResponse")
public void getProductList(
... 
```

you'll get:

```
@WebResult(name = "getProductListResponse", targetNamespace = "http://v3.core.com.productserve.com/", partName = "return")
@WebMethod
public GetProductListResponse getProductList(
    @WebParam(partName = "parameters", name = "getProductList", targetNamespace = "http://v3.core.com.productserve.com/")
    GetProductList parameters
) throws ApiException; 
```

# javascript - 在 prettyPhoto 中嵌入谷歌地图路线

> ID：11152999
> 
> 赞同：1
> 
> 时间：2012-06-22T08:51:57.747
> 
> 标签：javascript, jquery, maps, prettyphoto

我一直在寻找一种方法来显示从 - 到漂亮照片的路线，或者如果有人知道的话，没关系。

所以在prettyPhoto中，你只能插入你想显示的地方的纬度、纬度，但在我的情况下，我有一条从一个地方到另一个地方的路线，如何修改它？

```
<html>
        <head>
            <script src="http://www.google.com/jsapi" type="text/javascript"></script> 
            <script type="text/javascript" charset="utf-8"> 
                google.load("jquery", "1.4.2");
            </script>
            <link rel="stylesheet" href="css/prettyPhoto.css" type="text/css" media="screen" title="prettyPhoto main stylesheet" charset="utf-8" />
            <script src="js/jquery.prettyPhoto.js" type="text/javascript" charset="utf-8"></script>

            <!-- Google Maps Code -->
            <script type="text/javascript"
                src="http://maps.google.com/maps/api/js?sensor=true">
            </script>
            <script type="text/javascript">
              function initialize() {
                var latlng = new google.maps.LatLng(-34.397, 150.644);
                var myOptions = {
                  zoom: 8,
                  center: latlng,
                  mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                var map = new google.maps.Map(document.getElementById("map_canvas"),
                    myOptions);
              }

            </script>
            <!-- END Google Maps Code -->
        </head>
        <body>
            <p><a href="#?custom=true&width=260&height=270" rel="prettyPhoto">Open a Google Map</a></p>

            <script type="text/javascript" charset="utf-8">
            $(document).ready(function(){           
                $("a[rel^='prettyPhoto']").prettyPhoto({
                    custom_markup: '<div id="map_canvas" style="width:260px; height:265px"></div>',
                    changepicturecallback: function(){ initialize(); }
                });
            });
            </script>
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:35:34.497

回复有点晚，但我有类似的要求，并找到了这个解决方案：

[http://mysitemyway.com/support/topic/possible-to-use-built-in-prettyphoto-to-call-up-google-maps](http://mysitemyway.com/support/topic/possible-to-use-built-in-prettyphoto-to-call-up-google-maps)

基本上，只需将完整的谷歌地图 URL 添加到您的链接，不要忘记添加（在 URL 的末尾）`&output=embed?iframe=true&width=640&height=480`

效果很好，不需要其他黑客，只需像往常一样放置 preetyPhoto 代码。

为了清楚起见，此解决方案不需要指定 lat/lng，您只需将链接放置在您在谷歌地图中看到的完整 URL + 额外代码（告诉 preetyPhoto 将其显示为 iframe） ， 就是这样。