# StackOverflow 问答 11666000-11666999

# objective-c - Xcode 4.4 中自动@synthesized 属性

> ID：11666008
> 
> 赞同：29
> 
> 时间：2012-07-26T09:12:01.227
> 
> 标签：objective-c, xcode4.4

来自 Xcode 4.4 发行说明：

> 对于未实现的@properties，编译器默认自动调用@synthesize

新的默认合成器到底是什么样的？它是否创建了一个与属性同名的变量（或者它是否在它的前缀下划线，这似乎是一个很好的做法，但到​​目前为止需要额外的输入）？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-26T09:16:48.073

默认是`@synthesize propertyName = _propertyName`

# sql - 获取此输出的 SQL 服务器查询

> ID：11666009
> 
> 赞同：0
> 
> 时间：2012-07-26T09:12:08.397
> 
> 标签：sql, sql-server, database, sql-server-2008-r2

我有一个无法获得输出的查询。下面是要执行的查询

Q: 2\. 写一个查询来查找获得最大关联车辆数的城市名称、ID 和计数。

现在，Given 是应该在其上执行查询的一张表。

```
Vehicle_Detail_ID   City_ID
56                    242
57                    242
58                    242
59                    243
60                    241
61                    242
62                    245 
```

另一个有城市名称的表

```
City_ID City_Name
242          Bangalore
243          ChamarajNager
241          Bellary
245          Chitradurga 
```

预期输出：

```
City_ID No_Vehicles
242          4 
```

请告诉我如何编写获取正确输出的查询。

下面给出的是给出城市 ID 及其车辆数量的查询。试过：

```
SELECT c.city_id, COUNT(c.City_ID) AS NO_vehicles
  FROM city c, vehicle_details v 
 WHERE c.City_ID = v.City_ID
 GROUP BY c.City_ID 
```

实际输出

```
City_ID No_Vehicles
242             4
243             1
241             1
245             1 
```

请帮助我获得最大的这些，如预期输出中所示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:04:48.030

// 解决方案 1

```
Select top 1 v.cityID,count(*) as c 
from tblVehicle as v 
group by cityID
order by c desc 
```

// 使用 cityName 的解决方案 2

```
Select top 1 a.cityID,a.cityName,Count(*) as c 
from tblCity as a
inner join tblVehicle as b
    on a.cityID=b.cityID
group by a.cityID,a.cityName
order by c desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:22:44.150

尝试

```
select TOP 1 c.city_id,COUNT(c.City_ID) as NO_vehicles 
from city c,vehicle_details v 
where c.City_ID=v.City_ID 
group by c.City_ID. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:30:31.657

```
CREATE TABLE V_ddetails(Vehicle_Detail_ID int,City_ID int)
INSERT INTO V_ddetails 
VALUES(56,242),(57,242),(58,242),(59,243),(60, 241),(61,242),(62,245)

CREATE TABLE city(City_ID int, City_Name varchar(50))

INSERT INTO city
VALUES(242,'Bangalore'),(243,'ChamarajNager'),(241,'Bellary'),(245,'Chitradurga')

select top 1 v.City_ID,COUNT(*) as No_Vehicles from V_ddetails v inner join city c
on v.City_ID =c.City_ID 
group by v.City_ID 
order by No_Vehicles desc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T11:45:53.843

我认为使用分区函数和 CTE，您可以在[FIDDLE上执行此操作](http://sqlfiddle.com/#!3/ef8e6/2)

```
CREATE TABLE V_details(Vehicle_Detail_ID int,City_ID int) 
INSERT INTO V_details  
VALUES
(56,242),
(57,242),
(58,242),
(59,243),
(60, 241),
(60, 241),
(60, 241),
(60, 241),
(61,242),
(62,245)  

CREATE TABLE city(City_ID int, City_Name varchar(50))  
INSERT INTO city 
VALUES
(242,'Bangalore'),
(243,'ChamarajNager'),
(241,'Bellary'),
(245,'Chitradurga') 

   ;with initdata_cte as  
(     
  SELECT              
  c.city_id             
  , COUNT(c.City_ID) AS NO_vehicles                
  , RANK() over (order by c.city_id) rnk     
  FROM city c, V_details v        
  WHERE c.City_ID = v.City_ID       
  GROUP BY c.City_ID  
) 
, rnk_cte as 
(     
  SELECT              
  city_id             
  , NO_vehicles                
  , RANK() over (order by NO_vehicles desc) rnk     
  FROM initdata_cte     
) 
select * from rnk_cte where rnk =1 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-26T09:22:25.330

```
CREATE TABLE V_ddetails(Vehicle_Detail_ID int,City_ID int)
INSERT INTO V_ddetails 
VALUES(56,242),(57,242),(58,242),(59,243),(60, 241),(61,242),(62,245)

select City_ID,COUNT(*) as No_Vehicles  from V_ddetails 
where city_id=242
group by City_ID 
```

# ruby-on-rails-3 - 使用 config.active_record.mass_assignment_sanitizer = :strict 仅用于特定控制器

> ID：11666012
> 
> 赞同：0
> 
> 时间：2012-07-26T09:12:11.367
> 
> 标签：ruby-on-rails-3, mass-assignment

我想在生产环境中批量分配无效属性时引发异常，但仅限于特定控制器。

我想我应该添加`config.active_record.mass_assignment_sanitizer = :strict`到`production.rb`，但这会在应用程序范围内引发异常。

有没有办法只对特定控制器使用严格模式？

原因是在正常使用中我不希望用户成为服务器 500 错误，但是有一个关键（数据导入）部分我想从批量分配错误中解救并向用户提供信息.

我在 Rails 3.2 上运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:29:59.563

听起来您需要有一些[异常处理机制](http://spraints.github.com/blog/2012/06/25/rails-3-exception-handling/)。您可以在 application_controller 中捕获异常并在那里进行检查。

# objective-c - 为什么我们在 @synchronized 块中传递 self ？

> ID：11666014
> 
> 赞同：13
> 
> 时间：2012-07-26T09:12:14.193
> 
> 标签：objective-c, ios, macos, synchronization, block

我猜@synchronized 块不依赖于对象，而是依赖于线程......对吗？在那种情况下，我们为什么要通过 self？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-26T09:33:25.287

`@synchronized`是语言提供的用于创建同步作用域的构造。由于使用简单的全局共享互斥锁会非常低效，因此会序列化`@synchronized`应用程序中的每一个作用域，该语言允许我们指定一个同步点。

然后由开发人员决定哪些同步点适合该任务。

在实例方法上，使用 self 很常见：实例是同步点。`@synchronized(self)`范围可以在任意数量的实例上调用，但对于给定的实例只能调用一次。每个`@synchronized(self)`范围都将针对给定的实例进行序列化。

当然，如果您愿意，您可以随意使用另一个同步点。您可以使用类 ( `@synchronized(self.class)`) 或任何其他适合您需要的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-23T18:54:17.323

我质疑这种做法，因为它是[其他语言中已知的反模式](https://stackoverflow.com/questions/251391/why-is-lockthis-bad)。问题的关键是其他人也可能`synchronize`在您的对象上，如果您使用私有 NSObject 进行锁定，可能会导致死锁和其他问题。例如：

```
@implementation foo
-(void) bar
{
    @synchronized(self) {
        @synchronized(sharedLock) {
            //do something
        }
    }
}

Foo* foo = [[Foo alloc] init];
@synchronized(sharedLock) {
    @synchronized(foo) {
         //do something
    }
}

//in another thread
[foo bar]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-26T09:27:29.200

传入的对象用于区分哪些`@synchronized`块对应锁定。使用`self`通常很方便，但如果您只想同步更小、更具体的代码部分（例如，同步对特定 的所有访问`NSMutableDictionary`，而不是同步整个实例中的所有内容） ，有时使用其他对象是个好主意

我不确定您所说的“线程依赖”是什么意思。的目的`@synchronized`是用于可能在不同线程上运行的代码块，并且您需要确保任何时候只运行 1 个，而不会重叠。对于执行非线程安全的操作很重要（例如，改变集合）。

# c# - Telerik RadGrid - 以编程方式修改 FilterMenu 中的文本

> ID：11666022
> 
> 赞同：2
> 
> 时间：2012-07-26T09:12:54.283
> 
> 标签：c#, asp.net, telerik, radgrid

我需要通过替换一些文本来修改 radgrid 的 FilterMenu，例如“排序依据”、“包含”和“不包含”。

我尝试的解决方案是将事件处理程序添加到菜单的 ItemCreated 事件

```
grid.FilterMenu.ItemCreated += new RadMenuEventHandler(FilterMenu_ItemCreated); 
```

然后当 ItemCreated 事件被触发时，我的方法应该简单地通过 e.Item.Text 对象查找一些字符串，并替换它们。

```
void FilterMenu_ItemCreated(object sender, RadMenuEventArgs e)
        {
            if (e.Item.Text == "Group By") e.Item.Text = "Custom text";
        } 
```

但是 FilterMenu_ItemCreated 方法完全可以触发。我对为什么感到困惑，因为我之前在修改 HeaderContextMenu 中的文本时使用了相同的方法 - 而且效果很好。例子：

```
radgrid.HeaderContextMenu.ItemCreated += 
new RadMenuEventHandler(HeaderContextMenu_ItemCreated); 
```

...

```
 void HeaderContextMenu_ItemCreated(object sender, RadMenuEventArgs e)
        {
if (e.Item.Text == "Order By") e.Item.Text = "Custom text";
} 
```

所以这种方法适用于 HeaderContextMenu，但不适用于 FilterMenu。两个事件处理程序在代码中一个接一个地添加，但只有一个有效。任何想法为什么？难道 RadMenuEventHandler 不是 FilterMenu.ItemCreated 的正确类型的 EventHandler 吗？在 Telerik 的网站上找不到任何详细的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:36:40.673

请检查下面的代码片段。

```
 protected void Page_Load(object sender, EventArgs e)
{
    GridFilterMenu menu = RadGrid1.FilterMenu;
    foreach (RadMenuItem item in menu.Items)
    {   
        if (item.Text == "StartsWith")
        {
            item.Text = "Your new text";
        }
    }
} 
```

# c++ - ptr_vector 如何管理内存？

> ID：11666024
> 
> 赞同：5
> 
> 时间：2012-07-26T09:13:03.223
> 
> 标签：c++, memory-management, boost

我目前正在让自己进入 c++ 以使用 opengl 进行较低级别的编码。我来自一个沉重的 objc 背景，所以我对内存管理有一些了解，但我似乎无法理解“boost”库如何管理容器类型，如`ptr_vector`.

我认为我的问题与我不知道如何`ptr_vector`管理自身及其对象的破坏有关。

请看下面的代码：

```
// Header file
...
ptr_vector<IObject3D> objects;
...

// Implementation file
...
void ApplicationEngine::init()
{
    WavefrontObject3D *object = new WavefrontObject3D("Ninja.obj");
    objects.push_back(object); 
}
... 
```

**那么，对于实际的问题**：我是否通过“对象”变量在这里创建了泄漏？

我习惯于使用 objc 中的显式调用手动保留和释放我的对象：以前我必须`alloc init`将 WavefrontObject3D`object`添加到数组中，然后再添加`release`同一个对象以避免泄漏。

但是当我`delete object`在调用之后添加一个`push_back`WavefrontObject3D 的解构函数时`object`被调用。这给了我一个提示，即`ptr_vector`没有保留`object`变量。我的假设正确吗？

**附加但相关的问题：**假设我想销毁包含类`ApplicationEngine`，我是否必须在它管理的元素上调用某种解构器`ptr_vector`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T09:20:48.160

不，这不会造成泄漏。`ptr_*`当容器超出范围时，所有容器都会删除存储在其中的对象。

如果在将对象添加到容器后删除它，您将创建`undefined behavior`容器将尝试再次删除它。

附加问题：不，如果您存储`ptr_vector`按值，它的生命周期由周围类的范围管理。

让我们写一个简单的实现`ptr_vector`。它不支持间接迭代器和自定义删除器以及许多其他东西，但显示了使用的原则。

```
template <typename T>
class ptr_vector {
public:
  // assume control over it
  void push_back(T* x) 
  { if(x) c_.push_back(x); else throw bad_pointer(); }

  ~ptr_vector() { 
    // delete everything that is stored here
    for(auto x : c_)  delete x;
  }
private:
  std::vector<T*> c_;
};

// a user class
struct user_class {
  void addSomething() { x.push_back(new int(23)); }
  ptr_vector<int> x;
}; 
```

如果用户类超出范围，`ptr_vector`将调用析构函数并回收所有内存。看不到泄漏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T09:19:37.383

```
void push_back( T* x ); 
```

> 要求：x != 0 效果：将指针插入容器并获得它的所有权 抛出：bad_pointer if x == 0 异常安全：强有力的保证

```
template
    < 
        class T, 
        class CloneAllocator = heap_clone_allocator,
        class Allocator      = std::allocator<void*>
    >
    class ptr_vector : public ptr_sequence_adapter
                              <
                                  T,
                                  std::vector<void*,Allocator>,
                                  CloneAllocator
                              > 
```

所以你可以指定你自己的`CloneAllocator`而不是删除存储在 ptr_vector 中的元素，但是`heap_clone_allocator`（默认 par for `CloneAllocator`）删除析构函数中的所有存储元素。

[http://www.boost.org/doc/libs/1_50_0/libs/ptr_container/doc/reference.html#class-heap-clone-allocator](http://www.boost.org/doc/libs/1_50_0/libs/ptr_container/doc/reference.html#class-heap-clone-allocator)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:18:42.687

`ptr_vector`将释放其析构函数中的所有元素，因此您无需做任何已经做的事情，即创建对象，将它们添加到 中`ptr_vector`，然后将管理留给它。显式调用`delete`将使对象被销毁两次（一次是在您请求它时，一次是在`ptr_vector`完成时）。换句话说，`ptr_vector`不复制对象。

完成`ApplicationEngine`后，如果它有 的实例，`ptr_vector`则将调用该向量的析构函数，进而删除添加的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:24:08.867

ptr_containers[拥有您传递给它的指针所指向的内存。](http://www.boost.org/doc/libs/1_50_0/libs/ptr_container/doc/conventions.html#whenever-pointers-are-inserted-into-a-container-ownership-is-transferred-to-the-container) 阅读[文档](http://www.boost.org/doc/libs/1_50_0/libs/ptr_container/doc/conventions.html)以获取有关可克隆概念的更多信息。

# axis2 - AopConfigException：从axis2调用bean时无法生成CGLIB子类

> ID：11666026
> 
> 赞同：4
> 
> 时间：2012-07-26T09:13:05.140
> 
> 标签：axis2, aspectj, spring-aop

我在启动时加载我的 spring bean 文件。它包含以下内容：

```
<aop:config>
    <aop:aspect id="aspectLoggging" ref="logAspect">
        <!-- @Before -->
        <aop:pointcut id="pointCutBefore"
            expression="execution(* org.server.RequestProcessor.create(..))" />
        <aop:before method="advice" pointcut-ref="pointCutBefore" />
    </aop:aspect>
</aop:config>

<bean id="serviceImplementation" class="org.server.RequestProcessor">
    <constructor-arg>
        <ref bean="daoFactory"/>
    </constructor-arg>
    <property name="server">
        <ref bean="server"/>
    </property>
</bean> 
```

现在从 services.xml 中，我已将“serviceImplementation”bean 声明为 SpringBeanName。其内容如下：-

```
<parameter name="ServiceObjectSupplier">org.apache.axis2.extensions.spring.receivers.SpringServletContextObjectSupplier</parameter>
<parameter name="SpringBeanName">serviceImplementation</parameter>
<parameter name="ServiceClass" locked="false">org.server.RequestProcessor</parameter>  
<parameter name="LoadOnStartup">true</parameter>

<operation name="create">
        <messageReceiver class="org.apache.axis2.receivers.RawXMLINOutMessageReceiver"/>
        <actionMapping>http://www.example.com/ManagementServices/create</actionMapping>
</operation> 
```

因此，当“创建”操作将被调用时。方面类将尝试拦截 org.server.RequestProcessor.create(..)

但我无法实现这一点，我在服务器启动时收到以下错误：-

```
 2012-07-26 14:25:28,616 ERROR [ContextLoader] Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'serviceImplementation' defined in ServletContext resource [/WEB-INF/test-bean.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class org.server.RequestProcessor]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: Superclass has no null constructors but no arguments were given
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:480)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:221)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:429)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:729)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:381)
        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3795)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4252)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:760)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:740)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:544)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:634)
        at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:561)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:496)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1203)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:120)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1022)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:736)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1014)
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
        at org.apache.catalina.core.StandardService.start(StandardService.java:448)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:700)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:552)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:295)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:433)
Caused by: org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class org.server.RequestProcessor]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: Superclass has no null constructors but no arguments were given
        at org.springframework.aop.framework.Cglib2AopProxy.getProxy(Cglib2AopProxy.java:213)
        at org.springframework.aop.framework.ProxyFactory.getProxy(ProxyFactory.java:110)
        at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.createProxy(AbstractAutoProxyCreator.java:488)
        at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:363)
        at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:324)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:361)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1343)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)
        ... 38 more
Caused by: java.lang.IllegalArgumentException: Superclass has no null constructors but no arguments were given
        at net.sf.cglib.proxy.Enhancer.emitConstructors(Enhancer.java:721)
        at net.sf.cglib.proxy.Enhancer.generateClass(Enhancer.java:499)
        at net.sf.cglib.transform.TransformingClassGenerator.generateClass(TransformingClassGenerator.java:33)
        at net.sf.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)
        at net.sf.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)
        at net.sf.cglib.proxy.Enhancer.createHelper(Enhancer.java:377)
        at net.sf.cglib.proxy.Enhancer.create(Enhancer.java:285)
        at org.springframework.aop.framework.Cglib2AopProxy.getProxy(Cglib2AopProxy.java:201)
        ... 45 more 
```

我正在使用 spring-2.5.5。

# c# - 如何在 IValueConverter 中设置 DateTime 格式并返回字符串值？

> ID：11666028
> 
> 赞同：3
> 
> 时间：2012-07-26T09:13:15.720
> 
> 标签：c#, ivalueconverter

我想要一个特定的格式`IValueConverter`并返回一个字符串。比如`"MMMyyyy"`我怎样才能得到这个？

```
public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
    var item = (DateTime)value;
    if (item != null)
    {
        return item.ToString();
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:15:58.230

请在下面尝试

```
public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
     var item = (DateTime)value;
     if (item != null)
     {
         return item.ToString("MMMyyyy");
     }
     return null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T09:23:00.317

你真的需要`IValueConverter`这里吗？如果您希望此绑定以 WPF 中的特定格式显示数据`DateTime`绑定，您可以使用`StringFormat``Binding`

[文章关于`StringFormat`](http://blogs.msdn.com/b/llobo/archive/2008/05/19/wpf-3-5-sp1-feature-stringformat.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:16:26.250

您只需要添加格式 ToString 作为参数

```
 return item.ToString("MMyyyy"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:17:20.897

您可以`DateTime`对 ToString() - ToString( string format ) 使用 s 重载。因此 - 你可以写：

```
public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
    var item = (DateTime)value;
    if (item != null)
    {
        return item.ToString("MMMyyyy");
    }
    return null;
} 
```

有关更多信息，请查看此链接：

[http://msdn.microsoft.com/en-us/library/az4se3k1.aspx](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)

# coded-ui-tests - 如何使用编码的 UI 测试计算页面加载时间？

> ID：11666030
> 
> 赞同：1
> 
> 时间：2012-07-26T09:13:23.007
> 
> 标签：coded-ui-tests

我正在使用 coded`UI Testing`进行自动化测试。我想用这个计算准确的页面加载时间。可以计算这个吗？或者有没有其他方法来做这个计算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:06:16.237

您可以尝试监控浏览器的性能计数器。

对网页测试有用的性能计数器示例：http: [//geekswithblogs.net/joycsharp/archive/2009/02/19/top-10-favorite-performance-counters-in-web-site-load-testing.aspx](http://geekswithblogs.net/joycsharp/archive/2009/02/19/top-10-favorite-performance-counters-in-web-site-load-testing.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T16:45:04.310

这不一定是您会使用 Coded UI 测试进行测试的东西，Coded UI 测试用于测试按钮的功能等。

我相信负载测试将是您的解决方案。此页面有一些关于此的详细信息：http: [//msdn.microsoft.com/en-us/library/ms404705.aspx](http://msdn.microsoft.com/en-us/library/ms404705.aspx)

# objective-c - Objective-C 输出语法

> ID：11666033
> 
> 赞同：-1
> 
> 时间：2012-07-26T09:13:34.583
> 
> 标签：objective-c, syntax

我是编程新手，有人对这些东西有参考吗？

```
%1f %2f 
```

我知道 f 是指浮点数。为什么要在 f 前面加上“1”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T09:17:10.557

场宽

[http://www.cplusplus.com/reference/clibrary/cstdio/printf/](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:17:30.383

Google 是你的朋友：请参阅[Apple 开发人员文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)。另请查看通用[printf](http://pubs.opengroup.org/onlinepubs/009695399/functions/printf.html)规范。

# django - 将实例传递给 Django 表单集

> ID：11666035
> 
> 赞同：11
> 
> 时间：2012-07-26T09:13:43.157
> 
> 标签：django, django-models, django-forms, django-templates, django-views

如何将实例传递给 Django 表单集，场景是这样的。我已经使用表单集更新了多行，并且在稍后阶段我需要编辑我之前添加的那些值。（编辑）

```
q = PaymentLines.objects.filter(pay_lines=project)
formset = PayFormSet(prefix='payment', instance=q) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T09:24:59.723

```
AuthorFormSet(queryset=Author.objects.all()) 
```

[https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#sharing-the-queryset](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#changing-the-queryset)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T10:07:10.373

我按如下方式使用它，使用的表单集是[inlineformset_factory](https://docs.djangoproject.com/en/dev/ref/forms/models/#django.forms.models.inlineformset_factory)。

```
q = Projects.objects.get(pk=project)

formset = PayFormSet(prefix='payment',instance=q) 
```

然后将表单集传递给模板

# asp.net - 卡在 asp.net 中的客户端验证

> ID：11666037
> 
> 赞同：0
> 
> 时间：2012-07-26T09:13:46.590
> 
> 标签：asp.net, validation, devexpress, client-side

我有以下问题： 在我的应用程序中，我在 aspxCallbackPanel 中有两个文本框

```
<dx:ASPxTextBox ID="txtCognome" runat="server" Width="270px" ReadOnly="True">
   <ValidationSettings CausesValidation="True" ErrorText="Cognome can't be blank" 
        SetFocusOnError="True" ValidationGroup="group1">
        <RequiredField IsRequired="True" />
   </ValidationSettings>
</dx:ASPxTextBox>

<dx:ASPxTextBox ID="txtNome" ClientInstanceName="nome" runat="server" Width="270px" ReadOnly="True">
    <ValidationSettings CausesValidation="True" SetFocusOnError="True" 
         ValidationGroup="group1">
         <RequiredField IsRequired="True" />
    </ValidationSettings>
</dx:ASPxTextBox> 
```

如您所见，我只添加了一个RequiredFieldValidation。但是，在我进行回发之前的特定时刻，我想查看页面是否有效：

```
 var validated = Page_ClientValidate('group1');
    if (validated){
        DoPostBack('Save'); 
    } else {
        return alert('mamata si e ebalo');
    } 
```

然而什么也没有发生。当我尝试提醒已验证时，什么都没有出现...任何想法为什么，这是进行客户端验证的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:22:06.640

在javascript中，我们使用return false来停止这样的回发

```
var validated = Page_ClientValidate('group1');
if (validated){
    DoPostBack('Save'); 
} else {
    return alert('mamata si e ebalo');
    return false;
} 
```

编辑：

将其包装成这样的函数

```
function validate() //javascript function
{
  if (typeof(Page_ClientValidate) == 'function') 
  {
    var validated = Page_ClientValidate('group1');
    if (validated){
    DoPostBack('Save'); 
    } else {
    return alert('mamata si e ebalo');
    return false;
   }
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:34:33.267

```
if (ASPxClientEdit.ValidateGroup('group1')){
    DoPostBack('Save'); 
} else {
    return alert('oops');
} 
```

是解决我的问题的正确方法

# web-services - 如何使用 Ejscript 处理 Appweb 上传的文件

> ID：11666041
> 
> 赞同：0
> 
> 时间：2012-07-26T09:13:52.400
> 
> 标签：web-services, file-upload, upload, serverside-javascript, ejs

我的网络应用程序部署在嵌入式 linux 上，我使用 AppWeb 作为网络服务器。我使用 Appweb 3.3.2 和 Ejscript 1.1.2

现在，我想通过网络浏览器将文件上传到服务器。在 Ejscript 的文档（[http://www.ejscript.org/products/ejs/doc-1/api/ejscript/index.html](http://www.ejscript.org/products/ejs/doc-1/api/ejscript/index.html)）中，我可以使用 Request.files 来获取上传文件的缓冲区。

但是当我使用 Request.files 时，它有一个错误对象 NULL

有我的简单页面上传html：

```
<html>
    <head>
        <title>Time Attendance Web Control</title>
    </head>
    <body>
        <form method="post" enctype="multipart/form-data" action="upFile.ejs">
            Database to upload: <input type="file" name="upfile">
            <br>
            <input type="submit" value="Upload">
        </form>
    </body>
</html> 
```

以及要处理的ejscript页面：**upFile.ejs**

```
<%
    var rq = new Request();
    write(rq.files['upfile'].size);  // I just write simple code to debug
%> 
```

这是我得到的错误：

```
Error rendering: "upFile.ejs".

Object reference is null
Stack:
 [00] upFile.es, _Solo_upFileView.render, line 10 -> write(rq.files['upfile'].size);  // I just write simple code to debug
 [01] script, Controller.renderView, line 0 
```

任何人都可以帮助我，请...谁能给我一个示例ejscript页面来保存文件上传到服务器...

谢谢，

提达斯勒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T00:18:01.220

您不应该创建自己的 Request 对象。这是为您创建的，可以在“请求”变量中访问。

你可以做：

写（request.files.upfile.size）

我还建议您升级到 Appweb 4 和 Ejscript 2。更加灵活。

# ruby-on-rails - 设计路由错误edit_user_registration_path

> ID：11666044
> 
> 赞同：1
> 
> 时间：2012-07-26T09:14:07.063
> 
> 标签：ruby-on-rails, routing, devise

尝试访问 <%= link_to('Edit registration', edit_user_registration_path) %> 时出现以下错误。

```
Routing Error
No route matches {:action=>"edit", :controller=>"profiles"}
Try running rake routes for more information on available routes. 
```

路线.rb

```
xyz::Application.routes.draw do

root :to => "home#index"

resources :profiles 

devise_for :users

authenticated :user do
root :to => "home#index"
end
end 
```

我的路线如下：

```
root        /                              home#index
profiles GET    /profiles(.:format)            profiles#index
POST   /profiles(.:format)            profiles#create
new_profile GET    /profiles/new(.:format)        profiles#new
edit_profile GET    /profiles/:id/edit(.:format)   profiles#edit
profile GET    /profiles/:id(.:format)        profiles#show
PUT    /profiles/:id(.:format)        profiles#update
DELETE /profiles/:id(.:format)        profiles#destroy
new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
user_session POST   /users/sign_in(.:format)       devise/sessions#create
destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
user_password POST   /users/password(.:format)      devise/passwords#create
new_user_password GET    /users/password/new(.:format)  devise/passwords#new
edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
PUT    /users/password(.:format)      devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel
user_registration POST   /users(.:format)               devise/registrations#create
new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
PUT    /users(.:format)               devise/registrations#update
DELETE /users(.:format)               devise/registrations#destroy
root        /                              home#index 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T11:46:20.053

```
<%= link_to('Edit registration', edit_user_registration_path) %>. 
```

是不是被通过了

```
<%= link_to('Edit registration', edit_user_registration_path(@user)) %>. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:45:32.753

问题不在于编辑注册链接，原因在于您的路线：

```
edit_profile GET    /profiles/:id/edit(.:format)   profiles#edit 
```

以及个人资料页面的链接：

```
<%= link_to 'Edit Profile', edit_profile_path %> 
```

edit_profile_path 需要一个 id

您需要传入要在其上编辑配置文件的对象：

```
<%= link_to 'Edit Profile', edit_profile_path(@user) %> 
```

或者，如果您希望配置文件仅作用于当前用户，请在 routes.rb 中将其设置为单一资源：

```
resource :profile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-14T02:35:48.747

我遇到过同样的问题。通过编辑 routes.rb 解决了这个问题：

```
Rails.application.routes.draw do
  if Rails.env == 'production'
    default_url_options :host => "myserver.com"
  else
    default_url_options :host => "localhost:3000"
  end 
```

# c++ - 在不同项目中使用标头时出现 LINK2001 错误

> ID：11666047
> 
> 赞同：1
> 
> 时间：2012-07-26T09:14:31.663
> 
> 标签：c++, visual-studio, linker, projects

我在 C++ 和 VS 方面缺乏经验，我无法弄清楚我做错了什么，更重要的是如何解决它。

我正在研究一个包含多个项目的解决方案，现在我开始在另一个项目中使用一个项目中的类。但是，我收到此错误：

> tlibdecoder.lib(TDecCu.obj) : 错误 LNK2001: 无法解析的外部符号 "public: void __thiscall CURegister::registerCU(int,int,int)" (?registerCU@CURegister@@QAEXHHH@Z)

问题似乎是我在 TDecCu.cpp 中使用的函数，它来自文件 CURegister.h 和 CURegister.cpp。

在 CURegister.cpp 之上，我包含了 CURegister.h，因此定义了该函数（我可以通过导入 CURegister.h 在同一个项目中正常使用它），但是当我将标头包含到 TDecCu.cpp 中时（通过添加 #include “ CURegister.h”在顶部）似乎有问题。

有人可以告诉我如何解决这个问题吗？请记住，我没有经验，所以不要介意解释得很简单；）

提前致谢。乙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T09:44:41.700

“未解决的符号错误”是**链接器**错误，而不是**编译器**错误。链接是在像 Visual Studio 这样的 IDE 中似乎是单个“构建”事件的第二阶段。

这里的中心问题涉及[C++ 中](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)[*声明*](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)[和](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)[*定义*](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)[之间的区别](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)**。简而言之，*声明向**编译器*引入了一个符号（如函数），而*定义为**链接器*提供了该符号的实际实例化/实现。当考虑一个函数时，定义就是你可能听说过的原型。像这样的东西：**

 **```
void registerCu(int x, int y, int depth); 
```

请注意，它不提供函数的实现，因此它只是一个定义。这与提供完整实现的声明不同：

```
void registerCu(int x, int y, int depth)
{
    // do magic stuff here  
} 
```

如果这是一个单独的、自包含的项目，您可以假设链接器错误提醒您未能提供函数的*定义*。这可能意味着您在某处的标头中编写了一个原型，但实际上并未将函数的内容写入相应的 .cpp 文件中。

但是，由于您对 infact 答案的评论表明您确实在 .cpp 文件中提供了实现，并且问题表明您正在处理多个项目，因此*第二个*项目更有可能无法找到函数定义。您已经包含了第一个项目的标头，它为第二个项目提供了声明，因此编译器很高兴。但是当链接器开始实际尝试链接该函数调用的目标代码时，它会因为找不到定义而感到失望。

通过指示第二个项目的链接器在第一个项目的目标代码中查找它找不到的任何定义来解决此问题。您通常通过将包含第一个项目的构建输出的文件夹的路径添加到第二个项目的链接器设置来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:39:52.977

您应该将 CURegister.h 和 CURegister.cpp 添加到 TDecCu.cpp 所在的项目中。

.h 仅包含声明，而 .cpp 包含实现，当编译项目时，编译器将尝试从项目文件或项目引用的某些 lib 文件中找到所有需要的实现。

如果您只是在文件中包含 .h，则编译器无法找到其实现。**

# visual-studio-2010 - CUDA内核结果在发布模式下不同

> ID：11666049
> 
> 赞同：1
> 
> 时间：2012-07-26T09:14:42.220
> 
> 标签：visual-studio-2010, cuda, release-mode

我正在 CUDA 中测试一些代码（我是 CUDA 新手，这是我的第一个应用程序）。到目前为止，我已经在 CUDA 中取得了与在 CPU 上串行运行代码所获得的结果相同的结果。我正在使用 Visual Studio 2010 并且构建配置是调试。但是，一旦我将构建配置更改为“发布”，我就会开始得到错误的结果。我无法使用 Nvidia 论坛，因为它们目前处于关闭状态。有CUDA经验的人可以指出这个问题。代码如下

```
__global__ void MyKernel(int *Nptr,int *deltaptr, double *gravityptr, double *separationptr, double *fconptr, double *xForce, double *yForce, double *zForce,
double *xPos, double *yPos, double *zPos )
{
int N = *Nptr;
int delta= *deltaptr;
double gravity= *gravityptr;
double separation = *separationptr;
double fcon = *fconptr;

double len=0.0;
double r12X =0.0;
double r12Y =0.0;
double r12Z =0.0;
double PE=0.0;

int nx = blockDim.x * blockIdx.x + threadIdx.x;//use this place of nx
//int ny = blockDim.x * blockIdx.x + threadIdx.y;//use this place of ny
int ny = blockDim.y * blockIdx.y + threadIdx.y;
//printf("nx:%d ny:%d\n", nx,ny);

if(!(nx< N && ny <N))
    return;
//printf("nx:%d ny:%d\n", nx,ny);

xForce[nx*N+ny] = 0.0;
yForce[nx*N+ny] = -gravity;
zForce[nx*N+ny] = 0.0;

int lowerValuedx = maxOnDevice(nx-delta,0);
int upperValuedx=minOnDevice(nx+delta+1,N);
for(int dx=lowerValuedx; dx<upperValuedx;dx++)
{
    int lowerValuedy=maxOnDevice(ny-delta,0);
    int upperValuedy=minOnDevice(ny+delta+1,N);
    for(int dy=lowerValuedy; dy<upperValuedy;dy++)
    {
        len=sqrt((double)((nx-dx)*(nx-dx)+(ny-dy)*(ny-dy)) ) *separation;
        bool condition = ny!=dy;
        bool condition1 = nx!=dx;

        //if (nx!=dx || ny!=dy)
        if (condition || condition1)
        {
            r12X = xPos[dx*N+dy] - xPos[nx*N+ny];
            r12Y = yPos[dx*N+dy] - yPos[nx*N+ny];
            r12Z = zPos[dx*N+dy] - zPos[nx*N+ny];
            xForce[nx*N+ny] = xForce[nx*N+ny] +fcon*normxOnDevice(r12X,r12Y,r12Z)*(magOnDevice(r12X,r12Y,r12Z)-len);
            yForce[nx*N+ny]= yForce[nx*N+ny] +fcon*normyOnDevice(r12X,r12Y,r12Z)*(magOnDevice(r12X,r12Y,r12Z)-len);
            zForce[nx*N+ny]= zForce[nx*N+ny] +fcon*normzOnDevice(r12X,r12Y,r12Z)*(magOnDevice(r12X,r12Y,r12Z)-len);

        }
    }
} 
```

}

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T02:21:48.127

CPU 和 GPU 结果之间以及 GPU 上的调试和发布版本之间存在数值差异并不罕见。这并不意味着任何一组结果都不正确，但其中一组结果可能比另一组更准确。请参阅 NVIDIA 的以下白皮书，其中讨论了可能导致数值差异的各种机制：

[http://developer.download.nvidia.com/assets/cuda/files/NVIDIA-CUDA-Floating-Point.pdf](http://developer.download.nvidia.com/assets/cuda/files/NVIDIA-CUDA-Floating-Point.pdf)

您可以检查 nvcc 标志 -fmad=false 是否消除了您所看到的差异，这表明这些差异是由于 FMA/FMAD 合并造成的，因此可能是无害的。

GPU 提供 FMAD 和 FMA（融合乘加）操作，将浮点乘法与从属浮点加法组合到单个操作中。这有助于提高性能，因为组合操作通常花费与其每个组成部分相似的时间。但是，任一组合运算的舍入行为与使用两个单独舍入运算不同：

单精度 FMAD（计算能力 < 2.0）截断乘法的结果，然后根据 IEEE-754 舍入到最近或偶数舍入最终加法的结果。相比之下，FMA（计算能力的单精度 >= 2.0 和双精度）计算未舍入的双倍宽乘积，将第三个操作数添加到其中，并根据 IEEE-754 舍入到最近或舍入最终总和-甚至。由于这种单一的舍入，FMA 提供的平均精度优于使用两个单独的舍入操作。FMA 操作在 2008 版 IEEE-754 浮点标准中指定。

默认情况下，对于发布版本，CUDA 编译器会积极生成合并操作（FMAD、FMA）以实现最佳性能。换句话说，编译器默认值为 -fmad=true，它允许编译器合并浮点乘法和加法。通过指定 -fmad=false，将禁止合并乘法和加法，这通常提供与 CPU 结果更高的一致性，因为大多数 CPU 不提供 FMA 操作。显然，禁用合并操作会对性能产生负面影响，因此 -fmad=false 主要用作健全性检查。

Where accuracy issues are suspected, I generally recommend comparison with a higher-precision reference implementation (e.g. one based on quad precision or double-double techniques) to accurately assess the error on both CPU and GPU, rather than using the CPU version as a reference (as the CPU results are also affected by round-off error).

# c# - 防火墙在 wcf 服务中不起作用。

> ID：11666050
> 
> 赞同：1
> 
> 时间：2012-07-26T09:14:49.617
> 
> 标签：c#, wcf, port, firewall, wsdualhttpbinding

我正在使用 WCF`WSDualHttpBinding`服务。服务托管在服务器上

`http://...:8731/Design_Time_Addresses/MyService/`

当防火墙在客户端和服务器上关闭时，它可以正常工作。

我将端口 8731 添加到允许规则，但仍然无法正常工作。我应该打开哪个端口来启用与服务的通信和回调到客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:00:38.990

根据评论，我终于找到了解决方案。

绑定配置中缺少字段`clientBaseAddress="http://ip:port"`。在那里我可以定义端口，并添加到防火墙规则

# css - CSS 和正则表达式 (?)

> ID：11666051
> 
> 赞同：3
> 
> 时间：2012-07-26T09:14:50.943
> 
> 标签：css, css-selectors

我想知道有没有办法在 css 文件中做类似正则表达式替换的事情？

例如：我有很多这样的选择器：

```
 #div_23
 #div_45
 #div_8 
```

假设我不能使用类来添加样式，有没有办法在 CSS 文件中做这样的事情：

```
 #div_[0-9] {background:#000000} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T09:23:26.853

您可以部分匹配属性（[css2.1 doc](http://www.w3.org/TR/CSS2/selector.html#matching-attrs) / [css3 doc](http://www.w3.org/TR/css3-selectors/#attribute-selectors)） - 但请注意，这些规则相当慢。特别是在您的情况下，您必须使用超慢属性选择器来匹配在使用`#`.

我更喜欢使用带连字符的 ID 和类，我发现它们更具可读性，这样您就可以使用以下匹配器：

```
[att|=val] 
```

适用于您的案例：

```
#div-23
#div-45
#div-8
#div 
```

都会匹配

```
[id|=div]{background:#000000} 
```

但是，CSS3 提供了以下属性选择器（所有主流浏览器都支持），它非常适合您的情况：

```
[att^=val] 
```

所以你可以写：

```
[id^=div_]{background:#000000} 
```

匹配

```
#div_23
#div_45
#div_8
/* and */
#div_ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T09:15:57.887

试试`[id^=div_]`这个应该有帮助

# jquery - 隐藏 div 会重置 IE 中的页面位置

> ID：11666053
> 
> 赞同：0
> 
> 时间：2012-07-26T09:15:02.790
> 
> 标签：jquery, internet-explorer

我有一个网页，它是一个长文档，左侧有一个导航窗格。HTML基本上是

```
<body style="display:block;">
    <div id="nav-pane" style="width:340px; height:100%; position:absolute;">
         ....
    </div>
    <div id="main-page" style="left:371px; height:100%; position:fixed;">
         ....
    </div>
</body> 
```

我有一个 javascript 函数来隐藏导航窗格以在较小的屏幕上查看文档，但是当我在 IE 8/9 中调用 $("#nav-pane").hide() 时，页面视图被带回顶部的页面。其他浏览器工作正常

编辑：页面中的样式链接很好

触发器是

```
<div id="close-button" onclick="hideMenu()">
    <img src="/wp-content/uploads/images/original/close-button.png">
</div> 
```

和javascript函数是

```
function hideMenu()
{
    $("#nav-pane").hide();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:19:03.327

在没有进一步信息的情况下，有几个猜测：

### 猜一猜

您的真实代码是否也缺少两个 div`"`的属性末尾的？`style`

```
<body style="display:block;">
    <!--                                                     here -------v -->
    <div id="nav-pane" style="width:340px; height:100%; position:absolute;>
         ....
    </div>
    <!--                                              and here -------v -->
    <div id="main-page" style="left:371px; height:100%; position:fixed;>
         ....
    </div>
</body> 
```

这可能会导致在解析标记时发生各种奇怪的事情。

### 猜猜 2

您说“其他浏览器工作正常”的说法令人惊讶，但是：

您还没有显示您的代码或您如何触发它的标记，但我猜您有：

```
<a href="#">the link</a> 
```

...以及它的处理程序：

```
$("selector for the link").click(function() {
    $("#nav-pane").hide();
}); 
```

您需要阻止用于隐藏 div 的链接的默认操作。在 jQuery 中，您可以通过调用`preventDefault`它传递给您的处理程序的事件对象或`return false;`从处理程序（这将阻止默认值并停止传播）来做到这一点。例如：

```
$("selector for the link").click(function() {
    $("#nav-pane").hide();
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:42:38.593

[T.J. Crowder's answer](https://stackoverflow.com/a/11666132/206614) should solve your issue. However, I have experienced a similar problem with IE. When changing the `display` or `overflow` properties of a parent element the browser would redraw the document and reset the scroll position to 0.

Most probably there is a problem with your markup - as I mentioned in my case it was a parent element (`body` or `html`).

Anyway, to solve this you can record the window scroll position before the hide action and then scroll the window to the recorded position afterwards:

```
var scrollPosition = $(window).scrollTop();
// your hide action here, and then:
if ($(window).scrollTop() !== scrollPosition) {
    $(window).scrollTop(scrollPosition);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T12:34:51.587

看来我的标记有问题。只需在控制台中将 div 设置为 display:none 就足以重置窗口。我目前有一个解决方法，方法是将 div 的宽度设置为 0，并将可见性设置为隐藏，同时我可以确定是否是 Aspose 在转换 word 文件或我的程序时创建了问题，从而使来自 Apsose 的页面实际上看起来不错并且可以工作适当地。

多谢你们

# mysql - 面对 NativeException: java.sql.SQLException: Connection com.mysql.jdbc.JDBC4Connection@38054ba0 is closed

> ID：11666056
> 
> 赞同：0
> 
> 时间：2012-07-26T09:15:10.523
> 
> 标签：mysql, tomcat, jruby, jndi, sequel

我的代码是用 jRuby 编写的，我使用 Warbler 部署在 Tomcat 中。我正在使用 Sequel 来查询 MySQL 数据库。我正在使用两层数据库连接池。一种是原生 Sequel 池，另一种是 Tomcat 级别的 JNDI 池。连接字符串是：

```
DB = Sequel.connect("jdbc:jndi:java:comp/env/test", :logger => $db_log, :max_connections => 10) 
```

此连接字符串在 app.rb 中定义，仅在有新部署或重新启动 Tomcat 时才会加载。这将创建一个 Sequel 连接池，并且所有线程共享该池。我的 JNDI 配置`$CATALINA_OME/conf/context.xml`是：

```
<Resource
name="test"
auth="Container"
type="javax.sql.DataSource"
maxActive="10"
maxIdle="5"
maxWait="9000"
username="test_db"
password="test_db"
driverClassName="com.mysql.jdbc.Driver"
testOnBorrow="true"
testWhileIdle="true"
validationQuery="SELECT 1" testOnReturn="true"
timeBetweenEvictionRunsMillis="300000" removeAbandonedTimeout="60"
removeAbandoned="true"
logAbandoned="true"
url="jdbc:mysql://IP:3306/test"
/> 
```

我`DB.disconnect`用于将连接返回到 JNDI 池，以确保没有线程使用以前使用过的连接。我这样做是为了确保`wait_timeout`错误。`auto_reconnect=true`似乎无法`wait_timeout`正确解决问题。一切正常，直到几天前我开始遇到以下错误：

```
W, [2012-07-26T05:10:30.999000 #29456]  WARN -- : 134325951259087 == NativeException: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
D, [2012-07-26T05:10:31.001000 #29456] DEBUG -- : 134325951259087 == ["sun.reflect.GeneratedConstructorAccessor23:-1:in `newInstance'", "sun/reflect/DelegatingConstructorAccessorImpl.java:27:in `newInstance'", "java/lang/reflect/Constructor.java:513:in `newInstance'", "com/mysql/jdbc/Util.java:409:in `handleNewInstance'", "com/mysql/jdbc/SQLError.java:1118:in `createCommunicationsException'", "com/mysql/jdbc/MysqlIO.java:343:in `<init>'", "com/mysql/jdbc/ConnectionImpl.java:2308:in `connectOneTryOnly'", "com/mysql/jdbc/ConnectionImpl.java:2122:in `createNewIO'", "com/mysql/jdbc/ConnectionImpl.java:774:in `<init>'", "com/mysql/jdbc/JDBC4Connection.java:49:in `<init>'", "sun.reflect.GeneratedConstructorAccessor25:-1:in `newInstance'", "sun/reflect/DelegatingConstructorAccessorImpl.java:27:in `newInstance'", "java/lang/reflect/Constructor.java:513:in `newInstance'", "com/mysql/jdbc/Util.java:409:in `handleNewInstance'" 
```

和

```
W, [2012-07-26T10:19:14.029000 #1572]  WARN -- : 134327815053548 == NativeException: java.sql.SQLException: Connection com.mysql.jdbc.JDBC4Connection@5a0655d is closed.
D, [2012-07-26T10:19:14.030000 #1572] DEBUG -- : 134327815053548 == ["org/apache/tomcat/dbcp/dbcp/DelegatingConnection.java:398:in `checkOpen'", "org/apache/tomcat/dbcp/dbcp/DelegatingConnection.java:255:in `createStatement'", "file:/usr/local/tomcat-instance/test/webapps/service/WEB-INF/lib/santa-gems.jar!/gems/sequel-3.34.0/lib/sequel/adapters/jdbc.rb:523:in `statement'", "file:/usr/local/tomcat-instance/test/webapps/service/WEB-INF/lib/santa-gems.jar!/gems/sequel-3.34.0/lib/sequel/adapters/jdbc.rb:233:in `execute'", "file:/usr/local/tomcat-instance/test/webapps/service/WEB-INF/lib/santa-gems.jar!/gems/sequel-3.34.0/lib/sequel/connection_pool/threaded.rb:88:in `hold'", "file:/usr/local/tomcat-instance/test/webapps/service/WEB-INF/lib/santa-gems.jar!/gems/sequel-3.34.0/lib/sequel/database/connecting.rb:234:in `synchronize'", "file:/usr/local/tomcat-instance/testv/webapps/service/WEB-INF/lib/santa-gems.jar!/gems/sequel-3.34.0/lib/sequel/adapters/jdbc.rb:232:in `execute'", "file:/usr/local/tomcat-instance/test/webapps/service/WEB-INF/lib/santa-gems.jar!/gems/sequel-3.34.0/lib/sequel/dataset/actions.rb:744:in `execute'", "file:/usr/local/tomcat-instance/test/webapps/service/WEB-INF/l 
```

这些错误发生得太频繁，不容忽视。

唯一发生的变化是数据库主机，但我确保超时变量保持不变。这些值为：

```
interactive_timeout=300
connect_timeout=300
wait_timeout=10 
```

还有什么可以产生差异的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:58:07.620

“通信链接失败”通常意味着您的程序根本无法连接到*数据库*。典型的问题是不正确的主机名和端口号（很容易再次检查）或者在您的程序和数据库之间存在一个或多个防火墙，包括软件和硬件。

最好（如果可以的话）使用命令行`mysql`实用程序来验证您是否可以从运行应用程序的机器连接到数据库服务器。如果可行，那么您需要检查您的`<Resource>`配置。如果它不起作用，那么您将需要查看防火墙的存在。

请注意，最新版本的 Microsoft Windows（例如）默认启用防火墙，这可能不允许您的程序通过无法识别的端口 (3306) 进行外部连接。因此，首先检查您的本地（即在运行 webapp 的机器上）防火墙配置，然后与您的网络管理员联系，看看是否有其他防火墙挡住了路，如果事情不工作。

# html - 在 span 周围环绕文本 - chrome 问题

> ID：11666063
> 
> 赞同：0
> 
> 时间：2012-07-26T09:15:24.390
> 
> 标签：html, css, google-chrome

在 Chrome 和 Firefox（或 IE9、Opera）中打开这个[小提琴](http://jsfiddle.net/5tN73/1/)并查看差异。

或见图片：

![在此处输入图像描述](../Images/72796472ae16274df84d328be3220d4d.png)

chrome可以像firefox一样表现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:28:55.510

只需将样式 'float:left' 赋予 div

```
<html>
<head>

</head>
<body style="margin:0px; padding: 0px;">

<span style="width: 100px; background:red; float: left; clear: left; height: 4px;" ></span>
<span style="width: 220px; background:red; float: left; clear: left; height: 4px;" ></span>

<div style="float:left">
<span>Test </span>
</div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:24:37.683

我相信不，它不能。最好的办法是在 Chrome 上以您想要的方式编写此代码，并在检测到用户使用的是 Chrome 还是其他浏览器时使用该版本。有关更多详细信息，请参阅[此](https://stackoverflow.com/questions/1706196/different-css-files-for-different-browsers)内容。

或者

您可以使用在所有当前浏览器中看起来相同或相似的代码。对于您的示例，您需要添加：

```
<span style="float:left">Test </span> 
```

到你的文字。

另一个解决方案是：

```
<html>
<head>
    <style type="text/css">
        #test{
            position: relative;
            left: 120px;
        }
    </style>

</head>
<body style="margin:0px; padding: 0px;">

<span style="width: 100px; background:red; float: left; clear: left; height: 4px;" ></span> 
<span style="width: 220px; background:red; float: left; clear: left; height: 4px;" ></span> 

<div id = "test">
<span>Test </span>
</div>

</body>
</html>​​​ 
```

# actionscript-3 - 在 as3 中创建剪切复制粘贴

> ID：11666068
> 
> 赞同：-1
> 
> 时间：2012-07-26T09:15:31.583
> 
> 标签：actionscript-3

正如我之前告诉你的那样，我正在为打印工具开发 graffiti paint api，用户可以在其中绘制编辑和更新矢量图形。根据我的要求，我需要在我的工具中添加剪切复制和粘贴功能，以便看起来更有活力，任何人都可以帮助我克服这个障碍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:01:34.110

可能有很多方法。尝试这个：

保留一个数组以跟踪所选项目。我假设你有一个选择方法。

在临时物品所在的位置保留另一个数组（例如剪贴板）。

*   **复制**：将所选数组的每个项目添加到剪贴板数组中。

*   **剪切**：将所选数组的每个项目添加到剪贴板数组并从舞台中删除`removeChild()`。

*   **Cut**：将剪贴板数组的每个项目添加到舞台上`addChild()`

如果您注意到剪贴板和选定的数组可能只是一个并且可能不需要**Copy**方法。

# linux - smbclient put 期间的进度条

> ID：11666070
> 
> 赞同：6
> 
> 时间：2012-07-26T09:15:42.653
> 
> 标签：linux, bash

我正在尝试使用 smbclient put 在远程复制期间显示进度条，可能使用**pv**或**dialog**或任何其他选项。

smbclient-put 命令工作正常：

```
smbclient //usbrouter/backup --user=myusername mypassword -c "put /media/DOC/BackupAuto/work_backup.tar.gz work_backup.tar.gz" 
```

但我找不到任何方式来显示副本的进度。有人有解决方案/替代方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T09:47:21.740

当我想检查不支持进度条或忘记以进度条模式启动它的文件传输操作时，我会这样做。

计算出本地文件副本的总大小 ( ) ，`work_backup.tar.gz`例如使用或。然后转到目标文件的位置（与或仅在同一台机器上）。问题`ls``stat``du``ssh``cd`

```
watch -- du -h work_backup.tar.gz 
```

这有点 hacky，但即使在开始相应的复制工作后它仍然有效，而且它几乎适用于我能想象的每一种复制机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-12T22:09:05.247

正如您所提到`pv`的，非常适合这项工作：

```
file="work_backup.tar.gz"
pv "/media/DOC/BackupAuto/${file}" \
  | smbclient \
    --user=myusername%mypassword \
    --command "put - '${file}'" \
    //usbrouter/backup 
```

或者反过来，随着进度拉动：

```
file="work_backup.tar.gz"
size="$( \
  smbclient \
    --user=myusername%mypassword \
    --command "ls '${file}'" \
    //usbrouter/backup \
    2> /dev/null \
    | grep "${file}" \
    | awk '{print $3}')"

smbclient \
  --stderr \
  --user=myusername%mypassword \
  --command "get '${file}' /dev/stdout" \
  //usbrouter/backup \
  | pv -s "${size}" \
  > "/media/DOC/BackupAuto/${file}" 
```

*强制性旁注：您不应该像这样指定密码，`--authentication-file`而是使用其他选项之一*

# javascript - 如何在获取时删除项目视图？

> ID：11666074
> 
> 赞同：0
> 
> 时间：2012-07-26T09:15:49.113
> 
> 标签：javascript, events, backbone.js

我有一个由用户视图（列表）处理的用户集合。单个元素，模型，作为 UserView 处理。

当我现在获取一个新的 UserCollection（其他 url）而不是集合对象本身更新（包含新的用户模型）时，但 html 列表仍然存在。

列表显示：

```
 var ContactsView = Backbone.View.extend({
        tagName: "ul",
        className: "contacts unstyled",
        events: {

        },
        initialize: function() {
            this.collection = new UserCollection();
            this.collection.bind('add', this.addContact, this);
            this.collection.bind('remove', this.removeContact, this); // not getting called
            this.collection.bind('reset', this.listContacts, this);
            this.collection.fetch();
        },
        render: function() {
            this.$el.html();

            return this;
        },
        listContacts: function(contacts) {
            contacts.each(function(contact) {
                this.$el.append(new ContactView({ model: contact }).render().el);
            }.bind(this));
        },
        addContact: function(contact) {
            this.$el.append(new ContactView({ model: contact }).render().el);
        },
        // this is not getting executed
        removeContact: function(contact) {
            console.log(["removeContact fired"]);
            contact.unset();
        }
    }); 
```

项目视图

```
 var ContactView = Backbone.View.extend({
        tagName: "li",
        className: "contact",
        template: _.template(ContactTemplate),
        events: {
            "mouseenter li.contact": "expandOptions"
            , "mouseleave li.contact": "collapseOptions"
            , "click": "removeContact"
        },
        initialize: function() {
            this.model.bind('change', this.render, this);
            this.model.bind('remove', this.remove, this);
            this.model.bind('destroy', this.remove, this);
            this.model.bind('unset', this.remove, this);
        },
        render: function() {
            this.$el.html(this.template(this.model.toJSON()));

            return this;
        },
        expandOptions: function() {

        },
        collapseOptions: function() {

        },
        removeContact: function(e) {
            this.model.destroy();
        }
    }); 
```

那么当 Backbone.Collection 在内部删除项目（例如 fetch）时会触发哪个事件，我该如何收听呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:21:28.207

当*获取**Collection*并且[模型数据从服务器返回时，](http://backbonejs.org/#Collection-fetch) Collection调用并触发事件。*`reset()``reset`*

 *在您的`reset`绑定中，您必须*清空（）*您的 DOM 元素也是如此。在你的情况下，在你的`listContacts()`.*

# mysql - 使用 php 脚本恢复备份时出现错误 150

> ID：11666080
> 
> 赞同：0
> 
> 时间：2012-07-26T09:16:00.117
> 
> 标签：mysql

我使用[这个脚本](http://davidwalsh.name/backup-mysql-database-php)进行mysql备份（有变化——`$result`如果它是空的，在检查后添加“继续”——这意味着当一个表没有数据时跳过它——没什么重要的）

但是当我恢复时我得到了这个错误（似乎备份forms.grab_fields时没有备份）

> #1005 - 无法创建表 'forms.grab_fields' (errno: 150)

但是当我使用 phpMyAdmin 备份时，它可以工作

我使用 Myisam 引擎（我更改为 innodb 但没有更改）

# macos - 在 MacOS 上的 Safari 中安装 NPAPI 插件

> ID：11666085
> 
> 赞同：0
> 
> 时间：2012-07-26T09:16:14.437
> 
> 标签：macos, safari, npapi, browser-plugin

我有一个 NPAPI 插件，它与芯片驱动器通信以签署数据。它不显示任何内容。该插件支持 NPAPI 接口。我可以将它安装在 Firefox 中，打包为 XPI 文件。我可以使用 CRX 文件在 Chrome 中安装它。我有一个用于 IE 的 CAB。也适用于 Chrome 和 Firefox 的 MacOS。目前唯一不受支持的浏览器是 Safari 浏览器。（和歌剧，但没人关心）。

我必须如何打包可以安装在 MacOS 上的 safari 中的插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:10:46.393

[您可以按照 Apple 的安装说明](https://developer.apple.com/library/mac/#documentation/InternetWeb/Conceptual/WebKit_PluginProgTopic/Concepts/AboutPlugins.html#//apple_ref/doc/uid/30001248-BAJGJJAH)`.pkg`为所有浏览器提供一个安装程序（等） 。

# r - 在命令行下运行 R 脚本时输出错误/警告日志（txt 文件）

> ID：11666086
> 
> 赞同：21
> 
> 时间：2012-07-26T09:16:14.610
> 
> 标签：r, command-line, error-handling

如果我在命令行下运行 R 脚本（实际上是通过在 VBA 中调用来运行它），我如何将任何错误/警告消息输出到 txt 文件？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-26T10:11:29.733

您可以使用`sink()`将消息和警告转移到文件中。诀窍是设置参数`type="message"`：

这是一个改编自帮助的示例`?sink`：

```
setwd(tempdir())

## capture messages and errors to a file.
zz <- file("all.Rout", open="wt")
sink(zz, type="message")

try(log("a"))

## reset message sink and close the file connection
sink(type="message")
close(zz)

## Display the log file
readLines("all.Rout")
[1] "Error in log(\"a\") : Non-numeric argument to mathematical function" 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-06-24T16:22:02.960

要关闭与日志文件的连接，您必须使用`sink(type="message")`而不是`sink()`then `close(zz)`。

# gcc - Eclipse 无法识别 stdint.h 中用于 ARM Windows GCC 工具链的类型

> ID：11666094
> 
> 赞同：8
> 
> 时间：2012-07-26T09:16:28.433
> 
> 标签：gcc, eclipse-cdt

[我为 C/C++ 开发人员安装了 Eclipse Juno 以及来自http://sourceforge.net/projects/gnuarmeclipse](http://sourceforge.net/projects/gnuarmeclipse)的 GNU ARM C/C++ 开发支持插件。

`uint_32t`在我的项目中，我使用的类型`int16_t`比`uint8_t`通常来自`stdint.h`. 虽然我通过直接指向目录所在的目录来强制 Eclipse 查看我的编译器的标准头文件`include`，但提到的类型没有被解析。这给了我很多关于未解析符号的红色标记，并且在使用这些类型声明的函数的代码完成方面出现了一些问题。

同样的问题出现在像**GNUC**这样的标准宏定义上——通常 CDT 会看到这些用于 GNU C 或 GNU C++，但将工具链设置为 ARM Windows GCC 则不会。奇怪的。

我能做些什么来解决这个问题并恢复 Eclipse 在生产力方面的主要提升？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T11:06:56.660

我想我找到了解决问题的方法。问题是**CDT GCC 内置编译器设置**提供程序，它试图运行`gcc`而不是`arm-elf-gcc`. 我在字段 ¹ 中添加了前缀，以`Command to get compiler specs:`通过其正确名称调用编译器。

瞧，所有未解决的符号都消失了。

*不幸的是，我通过更改工具链破坏了我的项目（如果您安装了 GNU ARM Eclipse 插件，则永远不要这样做！）但这是另一回事。*

* * *

^(¹ - 它位于: `Project Properties > C/C++ General > Preprocessor Include Paths, Macros etc.`, 选项卡下`Providers`; `Share settings entries between projects (global provider)`必须禁用才能编辑该字段。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T12:01:14.030

请注意，[GNU ARM Eclipse](http://gnuarmeclipse.livius.net/blog/)插件于 2013 年 10 月更新，新版本对路径发现的支持更好，因此出现此问题的可能性较小。

更改工具链也已修复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-24T10:09:18.643

如果您使用外部 Makefile，Eclipse 无法知道您的目标平台标准库的位置。我发现的解决方案是将库包含路径添加到

`Project->Preferences->C++ General->Paths and symbols`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-16T21:50:46.023

在`Project > Properties > C/C++ General > Preprocessor Include Paths > Providers`：

*   启用`CDT GCC Built-in Compiler Settings Cross ARM`.

*   设置`Command to get compiler specs`为：

    ```
    arm-none-eabi-g++ ${FLAGS} ${cross_toolchain_flags} -E -P -v -dD "${INPUTS}".C 
    ```

    *   重要的部分是`.C`最后。这通常根据语言设置。small`.c`用于 C 代码，而 big C 用于 C++。但是在使用外部 makefile 或`no toolchain`选项集时没有指定语言。
*   此外，检查`Allocate console in the Console View`命令是否正常运行以及变量是否被正确替换。

*   启用`CDT GCC Build Output Parser`并更改编译器命令模式`(gcc)|([gc]\+\+)|(clang)`，`(.*g++)|(.*gcc)|(.*[gc]\+\+)`然后应用更改。使用`Move up/down`按钮将其移动到 上方`CDT GCC Built-in Compiler Settings Cross ARM`。

* * *

您还需要设置`Project > Properties > C/C++ General > Preprocessor Include Paths > Entries > CDT User Settings Entries`以下内容：

[![cdt 用户设置条目](../Images/b45e4f1227987a289a62eab986f4d33d.png)](https://i.stack.imgur.com/B6cYy.png)

在`Preferences > String Substitutions`您将需要创建一个`gnu-arm-path`指向您的工具链主页的 var。

理想情况下，这些应该在 中找到`CDT GCC Built-in Compiler Settings Cross ARM`，但在我的情况下它们不是。我认为这与在托管项目中这些条目与每种语言相关联的事实有关。但是对于外部 makefile，语言列表框只会显示`[Unspecified]`.

* * *

Eclipse 扫描程序提供程序系统似乎是围绕 CDT 管理的项目设计的，这使得在使用外部 makefile 时开始工作有点棘手。

您可以使用外部 makefile 创建一个新的托管项目，并查看扫描仪发现控制台以了解它应该如何工作。这就是我所做的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-29T09:14:49.023

我遇到了同样的问题，[这个页面](https://devzone.nordicsemi.com/tutorials/7/development-with-gcc-and-eclipse/)的解决方案帮助解决了这个问题：

*   进入项目属性->C/C++->Preprocessor Include Paths,etc.->Providers
*   单击 CDT GCC Build Output Parser 并将编译器命令模式从更改`(gcc)|([gc]++)|(clang)`为`(arm-none-eabi-gcc)|([gc]++)|(clang)`
*   单击应用按钮
*   点击 CDT Built-in Compiler Settings Cross ARM 并替换`${COMMAND}`为`arm-none-eabi-gcc`.
*   单击应用按钮。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-02T12:37:46.223

我遇到了一个完全不同的解决方案来解决这个（不）著名问题的版本。在我的情况下，搜索路径不是问题，因为编译器工作正常。尽管如此，编辑还是到处抱怨无法解析的 cstdint 类型：非常烦人。使用错误消息字符串在谷歌上搜索解决方案没有成果，而且非常令人沮丧。

我偶然在以下线程的答案中找到了这个问题的解决方案（“现在有一种新方法可以在没有 GXX_EXPERIMENTAL hack 的情况下解决这个问题”）：

[Eclipse CDT C++11/C++0x 支持](https://stackoverflow.com/questions/9131763/eclipse-cdt-c11-c0x-support/13549029#13549029)

干杯

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-15T05:52:37.067

就我而言，问题在于它`PATH`没有直接指向编译器。所以我添加`C:\Program Files (x86)\GNU Tools ARM Embedded\7 2017-q4-major\bin`到变量中并且它起作用了。澄清一下：我们有一个约定，我们使用变量指向编译器`GCCPATH`。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-07-25T17:13:16.200

查看 Project -> C/C++ Index -> Freshen All Files 是否有帮助。

# ruby-on-rails - 无法管理关联模型的功能

> ID：11666098
> 
> 赞同：0
> 
> 时间：2012-07-26T09:16:46.790
> 
> 标签：ruby-on-rails, view, controllers

我正在考虑解决我的问题，需要一些帮助。

我需要向用户付费，所以我有页面，管理员可以在其中查看所有用户并可以为每个用户付费。

我有网站模型，属于用户。取决于网站模型的某些属性我应该支付给用户，但是用户有很多网站，我不清楚如何组织这个。

我可以通过调用获取所有用户的网站

```
 user.websites 
```

**编辑：我不知道如何为每个网站生成单独的链接，因为我不需要汇总所有付款 - 我需要每个网站的单独链接**

这是我的支付功能（只留下相关代码）：

```
 def pay
     ...
    user = User.find(params[:user_id])
    @params_id = params[:user_id]
    @websites = user.websites
       data = {"actionType" => "PAY",
               "receiverList.receiver(0).email"=> user.email,
              "receiverList.receiver(0).amount" => website.amount,         
    ...

   end 
```

或者我应该在我看来添加网站。就像是：

```
 <% @users.each do |user| %>
      <%@websites.each do |website|%>
     <li>
     <%= user.email %>
      <%= link_to "Pay", pay_path(user.id, website.amount)%>
    </li>
    <%end%>
 <% end %> 
```

您可以向我推荐什么，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:35:18.630

我不确定我是否正确理解您的问题，但我认为这可以帮助您

```
<% users.each do |user| %>
  <% user.websites.each do |website| %>
    <span id="user-email"><%= user.email %></span>
    <span id="payment"><%= link_to "Pay #{number_to_currency(website.amount)}", pay_path(user.id, website.id), remote: true, confirm: "Are you sure you want to pay?" %></span>
  <% end %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:37:09.687

据我了解您的问题，根据网站的属性，用户会为他们的网站付费。我将其结构如下：

*   在网站模型中创建一个方法来计算这个特定网站的“价值”
*   在用户中创建一个方法，总结 user.website 中所有网站的值，例如

    总计 = user.websites.inject{ |sum,website| 总和+website.value }

*   使用最后一种方法来获取控制器操作中的金额。它不应该在控制器中计算，更不用说根据 MVC 模式在视图中计算了。

说到这一点，我会考虑为 pay 操作创建一个特殊的 Controller（而不是将其塞入 StaticPagesController，它毕竟不是静态页面），甚至可能是一个没有 Persistence 的模型来处理我认为不属于的 compute_payment 方法用户.rb。

# objective-c - UIButton 文本颜色和状态

> ID：11666109
> 
> 赞同：0
> 
> 时间：2012-07-26T09:17:12.577
> 
> 标签：objective-c, ios, cocoa-touch, uibutton

我有一个带有按钮的视图，其中文本颜色在属性文件中定义。

为了通过我的视图控制器设置这些按钮的文本颜色，我将它们从我的笔尖绑定到我的视图控制器中的“IBOutletCollection（UIButton）NSArray”。

所以我尝试了两件事来设置按钮的颜色：

1/

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [myButtons setValue:[UIColor redColor] forKeyPath:@"titleLabel.textColor"];
} 
```

2/

```
- (void)viewDidLoad {
    [super viewDidLoad];
    for(UIButton *b in myButtons) {
        [b setTitleColor:[UIColor redColor] forState:(UIControlStateNormal | UIControlStateSelected | UIControlStateApplication | UIControlStateReserved | UIControlStateHighlighted)];
    }
} 
```

事情是这样的：

1/当我的视图被加载时，我的按钮文本颜色是红色的，但是当我触摸一个时，它会变成默认颜色。

2/ 按钮保持默认颜色。

我希望他们保持我定义的颜色。我这样做有什么问题吗？

# android - 在 Android 本机代码中使用 cvBlobsLib 库时出错

> ID：11666110
> 
> 赞同：0
> 
> 时间：2012-07-26T09:17:18.220
> 
> 标签：android, opencv, makefile, android-ndk

我需要在 Android 本机代码中使用 cvBlobsLib 库 ( [cvblobslib_opencv_v8_3 )。](http://opencv.willowgarage.com/wiki/cvBlobsLib/#Build_intructions)问题是当我运行 Android.mk 文件时，出现错误：

> 致命错误：OpenCV/opencv/cxcore.h：没有这样的文件或目录

这是我的制作文件：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

OPENCV_CAMERA_MODULES:=on
OPENCV_INSTALL_MODULES:=on

OPENCV_LIB_TYPE:=STATIC
include ../OpenCV-4.2/sdk/native/jni/OpenCV.mk

LOCAL_MINE_SRC_FILES := \
    micr/cvblobslib_opencv_v8_3/blob.cpp \
    micr/cvblobslib_opencv_v8_3/BlobContour.cpp \
    micr/cvblobslib_opencv_v8_3/BlobOperators.cpp \
    micr/cvblobslib_opencv_v8_3/BlobProperties.cpp \
    micr/cvblobslib_opencv_v8_3/BlobResult.cpp \
    micr/cvblobslib_opencv_v8_3/ComponentLabeling.cpp \

#####
LOCAL_SRC_FILES := $(LOCAL_MINE_SRC_FILES)
LOCAL_C_INCLUDES +=  \
    $(LOCAL_PATH) \
    $(LOCAL_PATH)/native/ \
    $(LOCAL_PATH)/native/cvblobslib_opencv_v8_3 \

LOCAL_LDLIBS +=  -llog -ldl

LOCAL_MODULE     := native
LOCAL_SHARED_LIBRARIES := native

include $(BUILD_SHARED_LIBRARY) 
```

在 OpenCV.mk 中有一个包含该标题的文件夹：

> OPENCV_LOCAL_C_INCLUDES:="$(LOCAL_PATH)/$(OPENCV_THIS_DIR)/include/opencv" "$(LOCAL_PATH)/$(OPENCV_THIS_DIR)/include"

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:54:04.653

我必须修复标题以包含而不是导入“opencv/cxcore.h”:)

# java - 如何防止从jar加载类

> ID：11666113
> 
> 赞同：1
> 
> 时间：2012-07-26T09:17:20.757
> 
> 标签：java, jar, classpath, classloader, contextclassloader

我正在为某些应用程序编写插件。让我们假设 libA-1.0 的 Application hava 库依赖项和我的插件具有 libA-2.0 的类似依赖项。版本不同，互不兼容（即它们有不同的api方法签名）。

如何防止我的插件从 libA-1.0 加载类（或如何强制它使用来自 libA.2.0 的类）？

有没有办法做到这一点，而不是编写自定义类加载器，也不使用 forName、loadClassDefinition 调用？

当您将一些库放到 *.war 存档中并且由于 Web 容器在类路径上有“相同”的库时，它们不会加载，也会出现类似的问题。

谢谢你的帮助。

问候， 帕维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:31:37.910

[OSGI](http://www.osgi.org)开箱即用地提供了此功能。我确信还有一些其他插件框架提供类似的功能。

有一个[URLClassLoader](http://docs.oracle.com/javase/7/docs/api/index.html?java/lang/ClassLoader.html)应该能够提供很多从不同 jar 加载类的功能。您必须付出一些努力来更改正在执行工作的线程的类加载器。手头没有示例，如果您需要具体示例，则必须编写一个（除非您可以通过搜索引擎找到一个）

# vba - 使用 VBA 创建后删除 Word 中的文本和表格

> ID：11666114
> 
> 赞同：2
> 
> 时间：2012-07-26T09:17:26.350
> 
> 标签：vba, ms-word, mailmerge

我在编写邮件合并时遇到了一些问题，因为我的代码创建的每个内容都必须被删除，以免在合并过程中妨碍下一个字母。

所以我写了一个测试宏只是为了创建一些表并删除它们。

这是我的进度 - 它可以在一个新的空 Word 文件中运行，该文件带有一个名为“test”的书签

```
Sub TabsNText()

    Const k As Integer = 2

    Dim doc As Document
    Dim rng As Range
    Dim tab_rngs(k) As Range
    Dim txt_rngs(k) As Range
    Dim tbl As Table

    Set doc = Word.ActiveDocument
    Set rng = doc.Bookmarks("test").Range

    Dim i As Integer

    For i = 1 To k
        Set txt_rngs(i) = rng
        rng.Text = "Title " & i

        rng.Collapse Direction:=wdCollapseEnd
        rng.InsertParagraphAfter
        rng.Collapse Direction:=wdCollapseEnd

        Set tab_rngs(i) = rng

        Set tbl = doc.Tables.Add(rng, 3, 3)
        tbl.Cell(1, 1).Range.Text = "Table" & i
        tbl.Borders.Enable = True

        Set rng = tbl.Range

        rng.Collapse Direction:=wdCollapseEnd
        rng.InsertParagraphAfter
        rng.Collapse Direction:=wdCollapseEnd
    Next i

    rng.Select

    MsgBox ("Now, let's delete that!")

    For i = 1 To k
        txt_rngs(i).Text=""
        tab_rngs(i).Tables(1).Delete
        doc.Bookmarks.Add Name:="test", Range:=rng
    Next i

End Sub 
```

你看。表格将被正确删除。但是文本和段落呢？有没有一种方法可以从起点到终点进行选择并删除其所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:04:39.437

好的 - 我找到了一个简单的解决方案，它可以定义从起点到其他范围终点的范围。但是由于 Ranges 的位置非常不稳定（尤其是在混合文本和表格时），因此可以使用辅助书签来定义起点。

```
Sub TabsNText()

    Const k As Integer = 2

    Dim doc As Document
    Dim rng As Range
    Dim tbl As Table
    Const startbkm As String = "test_start"
    Const insertbkm As String = "test"

    Set doc = Word.ActiveDocument
    Set rng = doc.Bookmarks(insertbkm).Range

    doc.Bookmarks.Add Name:=startbkm, Range:=rng

    Dim i As Integer

    For i = 1 To k
        rng.Text = "Title " & i

        rng.Collapse Direction:=wdCollapseEnd
        rng.InsertParagraphAfter
        rng.Collapse Direction:=wdCollapseEnd

        Set tbl = doc.Tables.Add(rng, 3, 3)
        tbl.Cell(1, 1).Range.Text = "Table" & i
        tbl.Borders.Enable = True

        Set rng = tbl.Range

        rng.Collapse Direction:=wdCollapseEnd
        rng.InsertParagraphAfter
        rng.Collapse Direction:=wdCollapseEnd
    Next i

    MsgBox ("Now, let's delete that!")

    doc.Range(doc.Bookmarks(startbkm).Range.start, _
              rng.End).Delete

    doc.Bookmarks.Add Name:=insertbkm, Range:=rng
    doc.Bookmarks(startbkm).Delete

End Sub 
```

# css - 按钮的填充太大

> ID：11666117
> 
> 赞同：1
> 
> 时间：2012-07-26T09:17:31.347
> 
> 标签：css, button, navigation, padding

我一直在尝试更改我的 CSS 中的所有属性，以解决我当前的导航栏按钮问题，但徒劳无功。

当悬停在上面时，按钮超出了导航栏背景的高度，这是不应该的。

[http://www.mohrdevelopment.com](http://www.mohrdevelopment.com)

我的 HTML：

```
 <ul class="navigation">
                <li class="current"><a href="index.html"><em class="home"/>Home</b></a></li>
                <li><a href="second.html"><em class="photos"/><b>Photos</b></a></li>
                <li><a href="projects.html"><em class="projects"/><b>Projects</b></a></li>
                <li><a href="about.html"><em class="about"/><b>About</b></a></li>
                <li><a href="contact.html"><em class="contact"/><b>Contact</b></a></li>
            </ul> 
```

我的 CSS：

```
body {
        font-family:sans-serif;
        background: url(images/background3.png);
    }

    .navigation {
        background:#1841c8 url(Navigation/Navigation/nav_background.png);
        height:40px;
        margin-bottom:0px;
        font-size: 0; /*remove whitespace*/
        display:block;
        min-width:625px;
    }

    .navigation li{
        display:inline-block;
        line-height: 40px;
        font-size:16px;
            }

    .navigation li a{
        display:block;
        color:#FFFFFF;
        padding: 11px 5px 15px;
    }

    .navigation li a em{
        height:32px;
        display:inline-block;
        padding: 0 5px 6px 50px;
        font-weight:bold;
        vertical-align: middle;
        background-position: 0 50%;
        font-size:16px;
    }

    .navigation li a:hover{
        color:#00CCFF;
        background: url(Navigation/Navigation/nav_hover.png);
        text-decoration:none;
        padding: 11px 5px 10px;
    }

    .navigation .current a {
        color:#FFFFFF;
        background:url(Navigation/Navigation/nav_hover.png);
        padding-bottom:11px;
    }

    /*Navigation bar icons*/
    .navigation li a em.home {
        background-image: url(Navigation/Icon_images/home.png);
        background-repeat: no-repeat;

    }

    .navigation li a em.photos{
        background-image: url(Navigation/Icon_images/Photo.png);
        background-repeat: no-repeat;
    }

    .navigation li a em.projects{
        background-image: url(Navigation/Icon_images/projects.png);
        background-repeat: no-repeat;
    }

    .navigation li a em.about{
        background-image: url(Navigation/Icon_images/about.png);
        background-repeat: no-repeat;
    }

    .navigation li a em.contact{
        background-image: url(Navigation/Icon_images/Contact.png);
        background-repeat: no-repeat;
    }

    a {
      Color:blue;
      Text-decoration:none;
    }

    h1 {
        background: url(images/Header.png);
        text-indent:-9999px;
        width:1092px;
        height:132px;
        margin:auto;

    }

    .content, aside {
        height:600px;
    }

    .wrap {
          margin:auto;
          width:80%;
          background:yellow;
        }

    .content {
        background:teal;
        float:left;
        width:80%;
        height:auto;
        min-width:500px;
        display:inline;

    }

    aside {
        background:lightblue;
        float:left;
        width:20%;
        min-width:125px;
        display:inline;
    }

    aside ul {
        padding-left:1px;
        list-style:none;
    }

    ul a {
        text-decoration:none;
        color: #666;
    }

    ul a:hover {
        text-decoration:underline;
        color:black;
    }

    .sidebarli {
    }

    li {
        list-style:none;
        margin-bottom:20px;}

    label {
        display: block;
        cursor: pointer;
        color: #292929;
        font-family:sans-serif;
        padding-bottom:8px;
    }

    form ul {padding-left:0px;
    }

    textarea {
        width:400px;
        height:220px;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:28:00.963

您可以调整 A 元素上的填充：

```
.navigation li a {
  padding: 2px 5px;
} 
```

此外，您的“em”标签应该关闭。您有打开的“em”标签，但没有关闭的“/em”标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:38:08.610

我认为问题在于 Navigation/Navigation/nav_hover.png 图像。您正在对背景图像应用重复。

请用

```
.navigation li a:hover 
{
    background: url("Navigation/Navigation/nav_hover.png") **no-repeat** scroll 0 0 transparent;
    color: #00CCFF;
    padding: 11px 5px 10px;
    text-decoration: none;
} 
```

在 style.css 中。

让我知道这是否解决了问题。

# graphics - 使用 WebGL 而不是桌面 OpenGL

> ID：11666122
> 
> 赞同：2
> 
> 时间：2012-07-26T09:18:02.787
> 
> 标签：graphics, opengl-es, webgl

我必须做一个基本的计算机图形分配，我必须在屏幕上显示一个基本模型，并让用户控制移动模型组件的位置/方向。我有一些背景，`OpenGL`但我正在考虑做这个任务`WebGL`。所以我想知道的是在功能方面是否有任何限制`WebGL`？我会继续努力，`Windows`所以我可以选择学习`DirectX`，但学习曲线陡峭并且受平台限制。另外，我在工作时应该准备哪些可能的问题`WebGL`？假设我有一张最新的显卡。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T01:11:21.403

在 WebGL IMO 中这样做有很大的优势

*   你有所有的 HTML5 来帮助你。
    *   你可以免费加载图片
    *   自由鼠标输入
    *   自由键盘输入
    *   免费跨平台音频
    *   免费的跨平台字体和文本
    *   用于生成纹理或处理图像的免费 2d 库
*   你是开箱即用的跨平台
    *   一个朋友有一台mac，另一台Linux，它可以正常工作
    *   您几乎可以从任何地方访问它。
    *   将您的代码放在 github 上，发布它，您就可以在任何地方运行和编辑。忘了你的机器？只需使用众多直接 github 编辑器之一在线编辑（或使用保管箱）
    *   需要帮忙？给某人发一个链接。即使他们有不同的机器，他们也可以运行、检查和帮助您。无需兼容的 C++ 编译器或大量库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:49:56.497

基本上，您可以在 OpenGL 中完成的大多数事情，都可以在 WebGL 中完成。不过，有一些警告：

*   与 C++/Java/.Net 相比，即使对于最近的引擎，javascript 的性能也很糟糕
*   您的代码是公开的，它不是二进制文件
*   你缺少很多开发工具：像 glm 这样的少数库；模型进口商；g调试器；ETC
*   您主要受限于 3D 图形：尝试运行一些以“物理”为特色的演示并查看性能。在其他语言中，您拥有所有标准物理引擎（PhysX、Havoc、Bullet 等）
*   你不会得到 OpenGL 的所有闪亮的新扩展。事实上，你甚至没有获得 OpenGL 3。

从好的方面来说，它比所有其他方式都更容易设置：只需剪切并粘贴教程的 html 代码，就可以开始了。没有包含路径，没有依赖等。如果你的任务真的只是简单地绘制一个简单的模型并用鼠标旋转它，那么 WelGL 可能是要走的路。

# java - 我编写了一个 Java 应用程序，它做了一些 CRUD 工作，但它没有退出，为什么？

> ID：11666128
> 
> 赞同：-4
> 
> 时间：2012-07-26T09:18:35.733
> 
> 标签：java, debugging

我编写了一个连接到数据库的 Java 应用程序并执行一些数据库 CRUD 工作，但是该应用程序总是在 main 结束时停止并且不退出！

有没有人遇到过类似的问题，您使用什么工具来调试此类问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:43:37.770

您是否尝试更改设置？

我认为您正在使用 Eclipse 进行调试。如果设置错误，如果抛出未捕获的异常，eclipse 会在 main 结束时停止。

**Eclipse\Window\Preferences\Java\Debug\ - 挂起未捕获的异常**

# c++ - 提升图中的颜色映射breadth_first_visit

> ID：11666131
> 
> 赞同：6
> 
> 时间：2012-07-26T09:18:48.037
> 
> 标签：c++, boost, properties, graph

我想使用 boosts`breadth_first_visit`方法，我想为它提供我自己的“外部”颜色图。我将图表定义如下

```
typedef boost::adjacency_list<boost::setS, boost::listS, boost::undirectedS, 
  boost::property<boost::vertex_index_t, int, 
  boost::property<boost::vertex_color_t, boost::default_color_type, 
  Node_t>>>  GraphType; 
```

where`Node_t`是一个结构，定义顶点的属性。但是，我不知道如何为 BFS 提供我自己的颜色图。我想将顶点颜色存储在向量中，所以我的定义看起来像

```
std::vector<boost::default_color_type> colors; 
```

但我不知道如何将其用于 bfs。

两者都不

```
boost::breadth_first_search(g, *boost::vertices(g).first, 
  boost::color_map(colors)); 
```

也不

```
boost::breadth_first_search(g, *boost::vertices(g).first, 
  boost::color_map(&colors[0])); 
```

正在工作中。虽然第一个给了我一堆不同的编译器错误（例如，不支持 default-int，“boost::color_traits”使用类类型需要类型参数列表）第二个编译中止，只有 C2664：“boost::put”不能将参数 2 从“void*”转换为“ptrdiff_t”。

所以问题是：我如何使用我自己的颜色映射结构。另一个问题是：如何获取特定顶点描述符的颜色值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T11:00:23.380

好的，我使用了另一种方法，但解决了我的问题。对于那些和我一样对 boost 中的颜色图感到困惑的人或感兴趣的人：

bfs 使用的颜色图的类型是：

```
typedef boost::property_map<GraphType, boost::vertex_color_t>::type color_map_t;
color_map_t colorMap; //Create a color map 
```

这映射`vertex_descriptor`到（在我的情况下）`default_color_type`。对 boost 的 bfs 的适当调用是

```
boost::breadth_first_visit(g, *boost::vertices(g).first, boost::color_map(colorMap)); 
```

给定一个映射颜色编号的 color_names 结构，例如

```
const char* color_names[] = {"white", "gray", "green", "red", "black"}; 
```

可以通过遍历图中的所有顶点并使用当前顶点的 vertex_descriptor 作为颜色图中 [] 运算符的参数来遍历颜色：

```
GraphType::vertex_iterator it, itEnd;
for (boost::tie(it, itEnd) = boost::vertices(g); it != itEnd; it++)
{
  std::cout << "Color of node " << *it << " is " << color_names[colorMap[*it]] << std::endl;
} 
```

# xml - 支持 XML Schema 1.1 的 XML 编辑器

> ID：11666136
> 
> 赞同：6
> 
> 时间：2012-07-26T09:19:11.010
> 
> 标签：xml, eclipse, xsd, xsd-1.1

有人可以建议一个支持**xml-schema-1.1**规范的开源**XML 编辑器/eclipse 插件。**基本上，我需要它来根据 XSD *on-the-fly*验证 XML ，就像在 Eclipse 中一样。

 **** * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-26T09:22:09.930

Eclipse 没有对此的内置支持吗？如果你不想要eclipse，试试sublime text editor，或者notepad++***

# java - 从 servlet 调用 Web 服务会导致 ClassCastException

> ID：11666138
> 
> 赞同：1
> 
> 时间：2012-07-26T09:19:19.400
> 
> 标签：java, servlets, jboss, jax-ws

我创建了 JBoss 登录模块，它运行良好。下面的示例：

```
public class UserLoginModule extends UsernamePasswordLoginModule {
   private static UserService userService;

   @Override
   public void initialize(Subject subject, CallbackHandler callbackHandler,
                      Map<String, ?> sharedState, Map<String, ?> options) {
   super.initialize(subject, callbackHandler, sharedState, options);
   String wsdlUrl = (String) options.get("wsdlURL");
   UserService.initialize(wsdlUrl);
   userService = new UserService();
}

@Override
protected boolean validatePassword(String inputPassword, 
                                  String expectedPassword) {
    boolean result = false;

    try {
       String response =
       userService.getUserPort().checkOperator(getUsername(), inputPassword);

       if(RESULT_OK.equals(response)) {
          result = true;
       } else {
             result = false;
       }
    } catch(Exception e) {
        log.error("Error when invoking UserService!", e);
    }
        return result;
   }
} 
```

该模块部署在 JBoss 的 common/lib 目录中。当系统尝试对用户进行身份验证并调用 validatePassword 方法时，一切都很好。

现在，当我尝试从 Web 应用程序（使用自定义登录模块的相同）中的 servlet 调用 UserService 时，会引发异常：

```
java.lang.ClassCastException: com.sun.xml.bind.v2.runtime.JAXBContextImpl cannot be cast to com.sun.xml.internal.bind.api.JAXBRIContext
    com.sun.xml.internal.ws.fault.SOAPFaultBuilder.<clinit>(SOAPFaultBuilder.java:533)
    com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:107)
    com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78)
    com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:107)
    $Proxy173.unblockOperator(Unknown Source)
    pl.servlet.UserServlet.doPost(UserServlet.java:93)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96) 
```

servlet 如下所示：

```
public class UserServlet extends HttpServlet {
    private static Logger logger = Logger.getLogger(UserServlet.class.getName());
    private static UserService userService;

    @Override
    public void init() throws ServletException {
        super.init();
        userService = new UserService();
    }

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) 
    throws  ServletException, IOException {
        doPost(req, resp);
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) 
    throws ServletException, IOException {
        String result = null;
        String login = req.getParameter("login");
        result = userService.getUserPort().unblockOperator(login);
    }
} 
```

我正在使用 JBoss 5.1 EAP。任何想法如何解决这个问题？我的 Web 应用程序（包含 servlet）的 WEB-INF 目录是空的 - 那里没有 jar。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T04:49:10.007

您可以尝试设置系统属性

**javax.xml.bind.JAXBContext=com.sun.xml.internal.bind.v2.ContextFactor**

这将获取 jre 提供的默认 contextfactory

# php - 用新值 PHP 替换查询字符串中的值

> ID：11666139
> 
> 赞同：0
> 
> 时间：2012-07-26T09:19:21.740
> 
> 标签：php, function

我有一个 URL，如果它们存在我想替换值，但如果它们不存在则添加。

例如，我的 URL 是：`http://www.example.com/online/admin/users?p=Name&sort=user&dir=desc`我想编写一个脚本，如果 URL 已经存在，它将再次写出 URL 中的查询，如果不存在，则添加它。我想将其写入“a”标签，但我为排序和目录选择了不同的值

我在一个名为[Add Querystring Variable的网站上找到了一些代码](http://www.addedbytes.com/code/php-querystring-functions/)

```
function add_querystring_var($url, $key, $value) {
    $url = preg_replace('/(.*)(?|&)' . $key . '=[^&]+?(&)(.*)/i', '$1$2$4', $url . '&');
    $url = substr($url, 0, -1);
    if (strpos($url, '?') === false) {
        return ($url . '?' . $key . '=' . $value);
    } else {
        return ($url . '&' . $key . '=' . $value);
    }
} 
```

我唯一的问题是我不确定如何使用它来做我想做的事。

这是我到目前为止的代码

```
add_querystring_var("http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'],"sort","lvl");
add_querystring_var("http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'],"dir","asc"); 
```

但我不知道从这里开始做什么，因为这并没有为我写出任何东西。

我知道这很简单，但我是 PHP 领域的新手。:D

**编辑**

到目前为止的代码

```
$url='http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
function add_querystring_var($url, $key, $value) {
    $urlarray = parse_url($url);
    parse_str($urlarray['query'],$queryarray);
    $queryarray[$key]=$value;
    $queryarray = http_build_query($queryarray);
    return http_build_url($url,array('query'=>$queryarray),HTTP_URL_JOIN_QUERY);
}
$url_id=add_querystring_var($url,"sort","lvl");
$url_id=add_querystring_var($url,"dir",$dir);

<?php echo '<a href="'.$url.'">New Anchor</a>'; ?> 
```

但这返回空白。还有什么想法吗？感谢到目前为止所有的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:29:19.613

我建议使用[parse_url](http://php.net/manual/en/function.parse-url.php)和[parse_str](http://www.php.net/manual/en/function.parse-str.php)

```
function add_querystring_var($url, $key, $value) {
    $urlarray = explode('?',$url);
    $query = '';
    if(isset($urlarray[1]))
        $query = $urlarray[1];
    parse_str($query,$queryarray);
    $queryarray[$key]=$value;
    $queryarray = http_build_query($queryarray);

    return $urlarray[0].'?'.$queryarray;
} 
```

像这样打电话

```
add_querystring_var("http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'],'sort','id'); 
```

或针对您的具体情况

```
<?php 
$url='http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
$url=add_querystring_var($url,"sort","lvl");
$url=add_querystring_var($url,"dir", $dir);
echo '<a href="'.$url.'">New Anchor</a>'; 
?> 
```

经过测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:46:18.710

使用你到目前为止所拥有的，你可能想像这样修改它：

```
$url='http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
//your add_querystring_var() returns the new url, it doesn't echo it to the screen
$url=add_querystring_var($url,"sort","lvl");
$url=add_querystring_var($url,"dir","asc");

echo '<a href="'.$url.'">New Anchor</a>'; 
```

# java - 如何在 Dom 解析器中修改 XML 数据

> ID：11666140
> 
> 赞同：1
> 
> 时间：2012-07-26T09:19:22.350
> 
> 标签：java, xml-parsing, domparser

我是 Java 和 XML DOM 解析器的新手。我有一个要求，比如读取 xml 数据并将其存储为列和行类型的通知。示例：sample.xml 文件

```
<staff>
        <firstname>Swetha</firstname>
        <lastname>EUnis</lastname>
        <nickname>Swetha</nickname>
        <salary>10000</salary>
    </staff>
    <staff>
        <firstname>John</firstname>
        <lastname>MAdiv</lastname>
        <nickname>Jo</nickname>
        <salary>200000</salary>
    </staff> 
```

我需要阅读此 XML 文件并将其以上述格式存储：

```
firstName,lastName,nickName,Salary
swetha,Eunis,swetha,10000
john,MAdiv,Jo,200000 
```

Java 代码：

```
NodeList nl= doc.getElementsByTagName("*");

        for(int i=0;i< nl.getLength();i++)
        {
            Element section = (Element) nl.item(i);

             Node title = section.getFirstChild();
              while (title != null && title.getNodeType() != Node.ELEMENT_NODE)
              {
                   title = title.getNextSibling();
                if (title != null)
              {
                String first=title.getFirstChild().getNodeValue().trim();
                    if(first!=null)
                    {
                        title = title.getNextSibling();
                    }
                System.out.print(first + ",");
               } }
              System.out.println("");
        }//for 
```

我做了上面的代码，但我无法找到以上述列和行格式获取数据的方法。任何人都可以请帮我解决我的问题，我从过去很多天都在调查它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:36:12.073

由于这看起来像家庭作业，我会给你一些提示：

*   很有可能您的讲师已经为您提供了一些关于处理 XML DOM 的讲义和/或示例。再读一遍。

*   该`getElementsByTagName`方法将元素名称作为参数。 `"*"`不是有效的元素名称，因此调用不会返回任何内容。

*   您的代码需要镜像 XML 的结构。本例中的 XML 结构由 N 个`staff`元素组成，每个元素都包含名为`firstname`、`lastname`和`nickname`的元素`salary`。

* * *

您的讲师也可能希望您使用 XSLT 或 XML 绑定机制之类的东西来简化这一点。（或者这可能*是*XMI 而不是 XML ......其中还有其他方法来处理这个......）

* * *

> 我保留了 getElementsByTagName 方法参数“*”，因为要动态读取数据。

好吧，**它不起作用**！DOM`getElementsByTagName`方法不接受任何类型的模式。

如果你想让你的代码通用，你不能使用`getElementsByTagName`. 您需要从顶部开始遍历树，从 DOM 的根节点开始。

> 你能给我提供样本数据吗？

不，你的讲师不会同意我给你复制代码。但是，我要指出，网络上有很多 XML DOM 教程，它们应该可以帮助您弄清楚您需要做什么。最好的事情是你自己做这项工作。这样你会学到更多……这就是你作业的重点！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:27:47.770

**1.**将`DOM Parser`解析整个`XML file`以创建`DOM object`.

**2.**当请求在 web 服务上触发时，您将始终需要了解输出的类型和返回的 xml 结构。

**3.**它不是从Webservice返回的回复的XML结构，它将是动态的，但`child elements`值和属性可以是动态的。

**4.**您需要使用`try/catch block`...处理这种动态行为

有关 DOM PARSER 的更多详细信息，请参阅此站点...

[http://tutorials.jenkov.com/java-xml/dom.html](http://tutorials.jenkov.com/java-xml/dom.html)

# json - RESTful JBoss7 POST JSon gson

> ID：11666143
> 
> 赞同：1
> 
> 时间：2012-07-26T09:19:34.283
> 
> 标签：json, rest, post, gson, jboss7.x

我正在使用 JBoss7.1.1。我必须编写一个接收 json 文件的 RESTful Web 服务。我想使用 gson 库来反序列化数据，在 JBoss7.1.1 中可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:31:33.917

绝对是的。
但是由于您使用的是 Restful web 服务，您可以简单地使用 RestEasy 注释（resteasy 带有 Jboss 7.1.1）

```
@Consumes(MediaType.APPLICATION_JSON) 
```

Resteasy 将处理您在方法参数中提到的对象类型的转换

**要使用 Gson**
，您只需将 Gson 库添加到类路径中即可在您的代码中使用它

```
Gson gson=new gson();
Class reference=gson.toJson(yourJsonString,ClassName.class); 
```

如果您使用的是 maven：它更容易，只需在 pom.xml 中添加 Gson 依赖项

```
 <dependency>
            <groupId>com.google.code.gson</groupId>
            <artifactId>gson</artifactId>
            <version>2.0</version>
        </dependency> 
```

# ruby-on-rails - Rails 3 - 没有路线匹配错误

> ID：11666144
> 
> 赞同：0
> 
> 时间：2012-07-26T09:19:34.793
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

这是我对stackoverflow的第一个问题，我觉得自己无法修复这个错误有点愚蠢，但这里就可以了。

我正在尝试将页面索引上的链接连接到编辑操作，但出现以下错误：

```
No route matches {:action=>"edit", :controller=>"pages"} 
```

所以很明显我首先检查了控制器 - 那里肯定有一个编辑操作！

这是我的相关 rake 路由输出：

```
 pages GET    /pages(.:format)          pages#index
            POST   /pages(.:format)          pages#create
   new_page GET    /pages/new(.:format)      pages#new
  edit_page GET    /pages/:id/edit(.:format) pages#edit
       page GET    /pages/:id(.:format)      pages#show
            PUT    /pages/:id(.:format)      pages#update
            DELETE /pages/:id(.:format)      pages#destroy 
```

还有我的 config/routes.rb：

```
 Portfolio::Application.routes.draw do
  resources :pages
  resources :sessions, only: [:new, :create, :destroy]
  resources :users

  root to: 'pages#home'

  match '/signup',   to: 'users#new'
  match '/signin',   to: 'sessions#new'
  match '/signout',  to: 'sessions#destroy', via: :delete
  match '/admin',    to: 'admin#index'
  match '/new',      to: 'pages#new'
  match '/edit',     to: 'pages#edit'

  match '*path', :controller => 'redirect', :action => 'index' 
```

和控制器动作，以防万一。

```
 def edit
    @page = Page.find(params[:id])
  end 
```

我想我也会给出视图，路径被称为：

```
 <% Page.where("parent_id IS NULL").each do |page| %>
   <li>
     <%= link_to page.title, page %>
     <%= link_to "Edit", page, edit_page_path  %>
     <%= link_to "Delete", page, method: :delete,
                                 data: { confirm: "You sure?" } %>
   </li>
 <% end %> 
```

我确实有一个糟糕的习惯，就是看不到我的拼写错误，所以如果我犯了一个愚蠢的错误，它会解释为什么我无法修复这个错误。

任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:22:02.080

尝试：

```
 <%= link_to "Edit", edit_page_path(page)  %> 
```

如果您仔细查看路线输出：

```
edit_page GET    /pages/:id/edit(.:format) pages#edit 
```

路线 edit_page 需要一个 :id 传递给。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:31:23.717

应该像这样生成编辑链接

```
<%= link_to "Edit", edit_page_path(page) %> 
```

正如 Erez 指出的，`:id`is required 是从`page`.

检查[link_to](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to/)签名以了解传递参数的可能方式。第一个/第二个参数是 for `url`or`url_options`而第三个参数是 for `html_options`。

# solr - 无法在 Solr 4.0 中使 langid 工作

> ID：11666149
> 
> 赞同：5
> 
> 时间：2012-07-26T09:19:51.740
> 
> 标签：solr

我刚刚安装了 Solr，我现在正在尝试学习如何使用它。我想使用[Solr Cell](http://wiki.apache.org/solr/ExtractingRequestHandler)和[langid](http://wiki.apache.org/solr/LanguageDetection)功能，所以我按照链接的教程进行操作。Solr Cell 可以工作，但我什么也做不了。

在`solrconfig.xml`，我有这个：

```
<updateRequestProcessorChain name="langid">
  <processor class="org.apache.solr.update.processor.LangDetectLanguageIdentifierUpdateProcessorFactory">
    <str name="langid.fl">text,title,subject,description</str>
    <str name="langid.langField">language_s</str>
    <str name="langid.fallback">en</str>
    <bool name="langid.map">true</bool>
  </processor>
  <processor class="solr.LogUpdateProcessorFactory" />
  <processor class="solr.RunUpdateProcessorFactory" />
</updateRequestProcessorChain> 
```

（我也尝试过 Tika），我使用

```
curl "http://localhost:8983/solr/update/extract?literal.id=test&commit=true" -F "myfile=@test.xml" 
```

但是当我查询时，`text:[* TO *]`把我的文件还给我，但`text_en:[* TO *]`没有；`language_s`，即使我声明它是已存储的，也顽固地不存在；`*:word`即使有也没有找到任何东西，`"words"`所以它没有被阻止；我在日志中找不到任何东西。我最好的猜测是，langid 没有运行，我不知道为什么。

**编辑**：找到答案：[阅读更多文档](http://wiki.apache.org/solr/UpdateRequestProcessor#Selecting_the_UpdateChain_for_Your_Request)：p

由于 langid 被配置为更新请求处理器链，它需要被选中（它不是自动的）。所以，这有效：

```
curl "http://localhost:8983/solr/update/extract?literal.id=test&commit=true&update.chain=langid" -F "myfile=@test.xml" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-15T16:43:18.120

找到答案：[阅读更多文档](http://wiki.apache.org/solr/UpdateRequestProcessor#Selecting_the_UpdateChain_for_Your_Request)：p

由于 langid 被配置为更新请求处理器链，它需要被选中（它不是自动的）。所以，这有效：

```
curl "http://localhost:8983/solr/update/extract?literal.id=test&commit=true&update.chain=langid" -F "myfile=@test.xml" 
```

# android - 强制在 android opengl es 2 上重绘超过 60 fps

> ID：11666151
> 
> 赞同：1
> 
> 时间：2012-07-26T09:20:12.567
> 
> 标签：android, android-ndk, java-native-interface, opengl-es-2.0

我目前正在对 android 设备进行一些 opengl es 2 基准测试，为了超过 60 fps，我想要 android 相当于

```
glutPostRedisplay(); 
```

对于 java 代码，我使用的是 hello-gl2 示例的略微修改版本，它通过 android ndk 使用我的 C++ 代码，我一直无法弄清楚我应该如何以及在哪里，如果它真的是我需要，使用

```
GLSurfaceView.requestRender(); 
```

我只是想重绘或步骤？我的应用程序和我的问题是，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:08:09.030

一个我忘记的老问题。

无论如何，每部 Android 手机都有一个 vsync 限制，据我所知，这是无法绕过的。奇怪的是，Kindle Fire 似乎有大约 56 fps 的限制，而 Wildfire S 有大约 78 fps 的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T02:33:34.837

GLSurfaceView使用线程循环渲染，可以试试

1.  不要在 onDrawFrame 中进行任何睡眠以获得完整的渲染 fps

2.  将 GLSurfaceView.java 复制到您的项目并更改您想要的源。注意：注释行使用“SystemProperties”

# iphone - 如何知道哪个xib文件使用了图像？

> ID：11666152
> 
> 赞同：13
> 
> 时间：2012-07-26T09:20:11.870
> 
> 标签：iphone, ios, ipad, xcode4.3

在运行我的项目时，我收到了此错误消息。

```
Could not load the "bs_back_light.png" image referenced from a nib in the bundle with identifier "com.xxxxxxx.new" 
```

我不再使用图像文件，所以我想删除 xib 文件中引用的图像。但是，该项目有很多 xib 文件，并且很难找到引用该图像的 xib 文件。如果它是源文件，我会使用**在工作区中查找**（Shift + Command + F），但它不会搜索 xib 文件。

如何从 xib(nib) 文件中搜索引用的图像？

我正在使用 Xcode 版本 4.3.3 (4E3002)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-26T09:32:31.920

我有同样的问题，我用一些控制台命令解决了。在 Mac 上打开终端并运行以下命令：

grep -i -r --include=*.xib "bs_back_light.png" /your/project/path

它将在路径“/your/project/path”中搜索，并将打印使用图像“bs_back_light.png”的所有文件 xib 的完整路径。

希望对你有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T00:05:50.833

我根据 Marco 的回答编写了一个 bash 函数，因此我不必一直参考这篇文章。只需将它放入您的 bash 配置文件中，您就可以从项目目录中的命令行运行它，例如“grep_xib UIButton”，它将搜索所有 *.xib 文件以查找“UIButton”实例。只是想我会分享以防其他人需要这个。

```
function grep_xib {
    grep -i -r --include=*.xib "$1" .
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-07T14:07:39.337

您现在可以在 6.x 及更高版本中使用 xCode Find **in** **Workspace(Shift + Command + F)**，它现在可以搜索 xib 和故事板文件。[请参阅Xcode 6.0 发行](https://developer.apple.com/library/ios/releasenotes/DeveloperTools/RN-Xcode/Chapters/xc6_release_notes.html#//apple_ref/doc/uid/TP40001051-CH4-SW92)说明中的​​ Interface Builder 部分。

 **感谢 Anna在类似问题中的[评论](https://stackoverflow.com/questions/3963378/text-search-though-all-xib-files-in-xcode#comment49056465_3963445)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:26:26.353

在您的 AppTarget 中查找它：构建阶段 - 编译源。如果你找到了 - 删除它:)**

# php - 生成唯一的升序 ID

> ID：11666153
> 
> 赞同：0
> 
> 时间：2012-07-26T09:20:15.513
> 
> 标签：php, mysql

我正在寻找一种关于生成像 Google+ 或 facebook 这样的唯一大 ID 的良好做法。
现有的问题是关于生成唯一 ID 而不是上升的 ID（`uniqid()`这是继续下去的好方法）。
当用户注册时，我们可能会依赖一些基本上升的东西，例如 Timestamp`time()`或 User table 的 ID `$id`，也许：

*   `ID = time() - 123456789 + $id`.

*   或者只是用户表的 ID，比如`$id + 123456789`
    如果我们总是添加相同的常量整数，我们就不会发生冲突。

我们不能用它`uniqid()`来生成一个上升的 ID。
并且使数据库的自动增量步长超过 1 并不足以在所有情况下都有一个大整数。 **你有什么建议？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:25:52.097

您可能想查看这个解释如何在 PHP 中生成 v4 UUID 的答案，[或者](https://stackoverflow.com/questions/2040240/php-function-to-generate-v4-uuid)查看这篇文章，其中介绍了[在 PHP 中创建唯一 ID 的](http://phpgoogle.blogspot.co.uk/2007/08/four-ways-to-generate-unique-id-by-php.html)4 种方法（尽管其中一些涉及 uniqid()）

# sybase - 将存储过程从 Sybase 转换为 HSQL

> ID：11666157
> 
> 赞同：0
> 
> 时间：2012-07-26T09:20:29.153
> 
> 标签：sybase, hsqldb

目前我遇到了一个关于将存储过程从Sybase自动转换为HSQL的问题，至少我希望它会成功。据我探索，我发现其中两个之间有以下几个区别：

1.  Group by，sybase 支持允许group by 子句中的列名与select 子句中的列名不同的语法，这在hsql 中是禁止的。
2.  Have 子句与 group by 子句相同。
3.  return 语句只允许在 hsql 函数中使用，但在 sybase 存储过程中允许使用。
4.  sybase 提供了一些不同于 hsql 的系统过程。
5.  sybase 允许“在“创建过程”中使用重新编译”，但我找不到任何替换它的选项。
6.  ...还有很多其他的差异。

* * *

所以在这里我想知道是否可以自动实现这种转换？各位大侠有没有这方面的经验。

期待您的回复。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:57:05.077

HSQDB 允许您在 SELECT 列表（或 HAVING 子句）中仅使用 GROUP BY 的某些列。

您可以分配给过程的 OUT 或 INOUT 参数，而不是 RETURN。

您可以忽略“使用重新编译”

# c#-4.0 - C#.Net 中的嵌套 TreeView

> ID：11666163
> 
> 赞同：0
> 
> 时间：2012-07-26T09:20:52.677
> 
> 标签：c#-4.0

我在 C#.Net 中的 TreeView 概念中工作。我的场景是这样的..我将有一个根名。如果我扩展它，我将有两个名字。如果我扩展一个名称，我将在其中有两个子名称。

```
 foreach (DataRow masterRow in ds.Tables[0].Rows)
            {
                TreeNode masterNode = new TreeNode((string)masterRow["NAME"], Convert.ToString(masterRow["PARENT_ID"]));
                TreeView1.Nodes.Add(masterNode);

                foreach (DataRow childRow in masterRow.GetChildRows("Children"))
                {
                    TreeNode childNode = new TreeNode((string)childRow["NAME"], Convert.ToString(childRow["PARENT_ID"]));
                    masterNode.ChildNodes.Add(childNode);
                    childNode.Value = Convert.ToString(childRow["PARENT_ID"]);

                    foreach (DataRow masterRow1 in ds1.Tables[0].Rows)
                    {
                        TreeNode masterNode1 = new TreeNode((string)masterRow1["NAME"], Convert.ToString(masterRow1["PARENT_ID"]));
                        TreeView1.Nodes.Add(masterNode1);
                        {
                            foreach (DataRow childRow2 in masterRow1.GetChildRows("Children1"))
                            {
                                TreeNode childNode2 = new TreeNode((string)childRow2["NAME"], Convert.ToString(childRow2["PARENT_ID"]));
                                masterNode1.ChildNodes.Add(childNode2);
                                childNode2.Value = Convert.ToString(childRow2["PARENT_ID"]);
                            }
                        }
                    }
                }
            } 
```

但它不能正常工作。我不知道我哪里出错了..请指导我..

# facebook-graph-api - 公共终端上的扩展访问令牌和用户

> ID：11666164
> 
> 赞同：0
> 
> 时间：2012-07-26T09:20:53.377
> 
> 标签：facebook-graph-api, offline, access-token

我对已替换offline_access 权限的新扩展访问令牌有一些问题...

1.  如果用户在使用公共计算机时授予您扩展访问令牌，然后随后从该计算机注销，据我所知，应该工作 60 天的访问令牌停止工作
2.  如果，使用扩展访问令牌，您请求页面访问令牌（使用 /me/accounts），选择并保存您希望使用的页面的令牌......然后，稍后，想要获得一个访问令牌同一用户的不同页面，请求新的访问令牌（使用/me/accounts）似乎会使您之前保存的那个无效，这意味着任何时候您想要添加作为不同页面交互的能力，您必须更新所有先前存储的访问令牌

我想知道是否有人找到解决这些问题的方法？

我在这里遗漏了什么，还是这个新解决方案似乎完全无法使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:46:30.170

广告 1.) - 不，那不是真的。仅注销 Facebook 不会使长期访问令牌失效。

广告 2.) - 我无法使用 Graph API Explorer 和调试工具重现该测试。我获得了我的一个网站的页面访问令牌，然后我退出 FB 并重新登录。这在 Graph API Explorer 中为我提供了不同的用户访问令牌，并且与以前一样为同一站点显示的页面访问令牌是不同的。尽管如此，调试工具仍然显示我之前获得的页面访问令牌仍然有效约 2 个月。

# javascript - 在浏览器中加密/解密二进制数据

> ID：11666165
> 
> 赞同：2
> 
> 时间：2012-07-26T09:20:54.167
> 
> 标签：javascript, browser, binary-data

我正在开发一个需要客户端解密从服务器接收到的二进制数据的项目。该场景是服务器具有压缩和加密形式的二进制数据。浏览器需要接收这些数据（文件），解密和解压缩它们，然后将它们下载到本地机器上用户指定的位置。我了解在浏览器中执行此操作有几个限制 -

1.  Javascript 是否可以访问本地存储。我可以将多个文件写入/流式传输到硬盘上用户指定的位置吗？如果是这样，要寻找哪些 API。

2.  可以在浏览器中使用 Javascript（或任何其他技术）在浏览器中解密（AES-256）和解压缩此数据流吗？

使用HTML5 的[FileAPI](http://www.w3.org/TR/FileAPI/)可以解决这些问题吗？

**编辑：**
用 AES 替换 SHA2。我们使用 SHA2 进行完整性检查，而不是用于加密。这是一个错字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:25:22.163

1.  您不能直接访问用户的文件系统。不过，[HTML5 文件系统 API](https://stackoverflow.com/tags/html5-filesystem/info)可用于将数据保存在虚拟的沙盒文件系统中。
2.  CryptoJS 有一个SHA-2的[实现](http://code.google.com/p/crypto-js/#SHA-2)

要从服务器接收数据，我建议使用`XMLHttpRequest`with [`responseType = "arraybuffer"`](http://www.w3.org/TR/XMLHttpRequest2/#the-responsetype-attribute)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:25:34.643

我建议你使用一个 javascript 密码库，这里是一个：[http ://code.google.com/p/crypto-js/](http://code.google.com/p/crypto-js/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:32:46.647

SHA-2 不是加密或解密数据的手段，它是一种哈希算法，用于确定数据是否被篡改。加密算法有：DES、3-DES、AES等。

我怀疑您需要对您拥有的数据生成一个哈希值并与您收到的哈希值进行比较。

# c++ - 静态成员的两个实例，怎么可能？

> ID：11666166
> 
> 赞同：6
> 
> 时间：2012-07-26T09:21:00.980
> 
> 标签：c++, multithreading, shared-libraries, static-members

我有一个多线程应用程序。我在共享库中声明了一个带有静态成员的类。

从不同库的不同线程打印成员的地址会显示不同的结果。

//宣言

```
template <class OBJECT>
struct Container
{
   static int m_member;
};

template <class OBJECT>
int Container<OBJECT>::m_member; 
```

// 印刷

```
cout << (void*) &Container<int>::m_member << endl; 
```

怎么可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T09:27:05.573

如果您有不同的库（我猜是不同的动态库），那么您可能会有一些代码和静态变量的重复。

确切的细节将取决于您使用的特定动态库技术。我会说，例如，在 Windows DLL 中，您将拥有重复的代码和变量，但在 Linux SO 中则不会。

无论如何，您应该提供有关操作系统和项目布局的更多详细信息。

**更新**：啊，但你的课程是一个模板！共享库中的模板实例化是一头奇怪的野兽！为确保在所有过程中只使用您的类的一个副本，您必须显式实例化模板并确保在 SO 中导出此实例化，并且从客户端代码中使用它。详细信息因编译器而异，但您可以检查它`std::string`是如何完成的，例如：

在头文件中：

```
namespace std
{
    extern template class basic_string<wchar_t>;
} 
```

在库的源代码中：

```
namespace std
{
    template class basic_string<wchar_t>;
} 
```

当然，您需要提前知道您的模板需要哪些实例化。显然，SO 不能导出使用它一无所知的类型的实例化。

**更新**：啊，但是您有两个不同的库来实例化模板……那么如果两个库都将显式实例化定义为`extern`共享的 ELF 魔术，则应该将两个实例化合并为一个。

**另一个更新**：在使用模板和共享对象之后，它通常可以正常工作。我现在的猜测是您正在使用`-fvisibility=hidden`或类似的方式编译库。如果是这种情况，只需编写以下代码就足够了：

```
template <class OBJECT>
struct __attribute__((visibility("default"))) Container
{
   static int m_member;
}; 
```

使模板的特化进入动态符号表，从而避免重复。

# syntax-highlighting - Persistent :set 给定文件类型的语法？

> ID：11666170
> 
> 赞同：127
> 
> 时间：2012-07-26T09:21:15.387
> 
> 标签：syntax-highlighting, vim, twig, macvim

我正在开发一个使用 Twig 的 Symfony2 项目，文件类型为`myfile.html.twig`. Vim 不会自动检测语法高亮，因此不应用。我可以`:set syntax=HTML`在打开文件后使用，但是在文件之间跳转时会很痛苦。

有没有办法在 vim 中为特定文件类型持久设置语法突出显示？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-07-26T09:25:22.407

您可以使用`autocmd`来实现这一点，即：

```
augroup twig_ft
  au!
  autocmd BufNewFile,BufRead *.html.twig   set syntax=html
augroup END 
```

应该管用。

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2015-01-23T19:30:49.857

将以下段落之一添加到您的`.vimrc`:

```
" Set the filetype based on the file's extension, overriding any
" 'filetype' that has already been set
au BufRead,BufNewFile *.html.twig set filetype=html 
```

或者

```
" Set the filetype based on the file's extension, but only if
" 'filetype' has not already been set
au BufRead,BufNewFile *.html.twig setfiletype html 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-07-26T09:25:44.943

```
au BufNewFile,BufRead,BufReadPost *.twig set syntax=HTML 
```

并添加此行以`~/.vimrc`使设置持久化。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-27T14:27:39.377

我知道这并不能直接回答问题，但是这回答了问题的意图，即使用 Twig / Symfony 2 突出显示语法

我建议您查看[https://github.com/beyondwords/vim-twig](https://github.com/beyondwords/vim-twig)（不是我的），它提供：

*   *.html.twig 的语法高亮文件，
*   相同的文件类型检测，以及
*   文件类型插件，允许您在编辑 *.html.twig 文件时根据需要修改各种设置

我希望这有帮助

# r - 计算数据框中两列日期之间的天数

> ID：11666172
> 
> 赞同：56
> 
> 时间：2012-07-26T09:21:24.550
> 
> 标签：r, date

我有一个数据框，它有两列格式为 yyyy/mm/dd 的日期。我正在尝试为数据框中的每个观察值计算这两个日期之间的天数（并创建一个包含此天数的新变量）。

到目前为止，我已经尝试使用这里给出的答案：

[计算R中2个日期之间的工作日数](https://stackoverflow.com/questions/5046708/calculate-the-number-of-weekdays-between-2-dates-in-r)

但编辑代码，使其计算总天数而不仅仅是工作日数。这只是想出了错误说：

```
Error in del/by : non-numeric argument to binary operator
In addition: Warning message:
In Ops.factor(to, from) : - not meaningful for factors 
```

我也尝试使用此代码：

```
finish <- as.Date(survey$date, format="%yyyy/%mm/%dd")
start <- as.Date(survey$tx_start, format="%yyyy/%mm/%dd")
date_diff<-as.data.frame(finish-start) 
```

计划使用“cbind”或等效的东西将数据框“days”与我的数据框“survey”组合在一起，其中包含数据。

尽管这没有给我任何错误，但“完成”和“开始”对象中的观察结果都是“NA_real_”，因此 date_diff 数据框将所有观察结果列为 NA。

如果有人能指出我正确的方向，那就太好了！我发现的所有其他问题似乎都不是处理变量中的日期，而是处理单个日期，并且将这些技术应用于变量并没有为我工作。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-07-26T09:40:17.373

如果您没有看到您的数据（您可以使用 的输出`dput(head(survey))`向我们展示），这是在黑暗中拍摄的：

```
survey <- data.frame(date=c("2012/07/26","2012/07/25"),tx_start=c("2012/01/01","2012/01/01"))

survey$date_diff <- as.Date(as.character(survey$date), format="%Y/%m/%d")-
                  as.Date(as.character(survey$tx_start), format="%Y/%m/%d")
survey
       date   tx_start date_diff
1 2012/07/26 2012/01/01  207 days
2 2012/07/25 2012/01/01  206 days 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2015-04-06T19:32:08.497

您可以使用以下函数找到数据框中列中日期之间的差异`difftime`：

```
df$diff_in_days<- difftime(df$datevar1 ,df$datevar2 , units = c("days")) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T09:40:37.610

您需要正确使用 as.Date 格式。

例如。

```
x = '2012/07/25'
xd = as.Date(x,'%Y/%m/%d')
xd    # Prints "2012-07-25" 
```

R 日期格式类似于 *nix 日期格式。

执行 typeof(xd) 将其显示为双精度即。自 1970 年以来的日子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-06T20:12:55.583

在 Ronald 的示例中，如果日期格式不同（如下所示），则修改`format`参数

```
survey <- data.frame(date=c("2012-07-26","2012-07-25"),tx_start=c("2012-01-01","2012-01-01"))

survey$date_diff <- as.Date(as.character(survey$date), format="%Y-%m-%d")-
              as.Date(as.character(survey$tx_start), format="%Y-%m-%d") 
```

民意调查：

```
 date      tx_start     date_diff
1 2012-07-26     2012-01-01    207 days
2 2012-07-25     2012-01-01    206 days 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-11T15:49:41.013

在罗纳德示例之后，我想补充一点，应该考虑是否必须在两个日期之间的天数中包含起始日期和结束日期。我遇到了同样的问题，最终使用了第三个选项 apply。这可能是内存效率低下，但有助于理解问题：

```
 survey <- data.frame(date=c("2012/07/26","2012/07/25"),tx_start=c("2012/01/01","2012/01/01"))

survey$diff_1 <- as.numeric(
  as.Date(as.character(survey$date), format="%Y/%m/%d")-
    as.Date(as.character(survey$tx_start), format="%Y/%m/%d")
)

survey$diff_2<- as.numeric(
  difftime(survey$date ,survey$tx_start , units = c("days"))
)

survey$diff_3 <- apply(X = survey[,c("date", "tx_start")],
                       MARGIN = 1,
                       FUN = function(x)
                         length(
                           seq.Date(
                             from = as.Date(x[2]),
                             to = as.Date(x[1]),
                             by = "day")
                           )
                       ) 
```

这给出了以下日期差异：

```
 date   tx_start diff_1   diff_2 diff_3
1 2012/07/26 2012/01/01    207 206.9583    208
2 2012/07/25 2012/01/01    206 205.9583    207 
```

# java - PCMU 到 WAV 的转换

> ID：11666174
> 
> 赞同：1
> 
> 时间：2012-07-26T09:21:28.850
> 
> 标签：java, c, audio, wav, pcm

我有一个带麦克风的 IP 摄像机。我正在使用开放的 rtsp 库捕获声音，但它以 PCMU 格式保存。有人知道将其转换为 WAV 的库（C 或 JAVA）吗？我找不到任何..如果没有那么我怎么能执行这样的转换

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:02:46.483

本文档[（增强多媒体系统中数字音频兼容性的推荐做法）](http://www.cs.columbia.edu/~hgs/audio/dvi/IMA_ADPCM.pdf)包含将 CCITT（又名 PCMU）转换为纯 PCM WAV 的伪代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:32:38.920

好的，我已经设法使用 sox [http://sox.sourceforge.net](http://sox.sourceforge.net)来做到这一点，我可以从 java 调用它，就像我可以从命令行调用它一样。

# c# - 我们可以在使用 SqlReader 读取数据表行时删除它吗

> ID：11666178
> 
> 赞同：0
> 
> 时间：2012-07-26T09:21:44.690
> 
> 标签：c#, sql-server-2005, stored-procedures

我创建了两个存储过程，一个用于读取数据行，一个用于删除，但我想知道是否可以在读取记录时删除记录，以及它是否是最佳实践？

例如

```
while (rdr.Read())
{
    If(rdr[abc].ToString() != Null)
    {Maybe delete it ?}
} 
```

**我的问题是，我可以在阅读时删除一行吗？:)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:35:24.013

基本上，sql server 不允许您同时执行两个存储过程。我想你可以参考链接[如何并行运行存储过程](https://stackoverflow.com/questions/277900/how-can-i-run-sql-server-stored-procedures-in-parallel)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:37:01.763

这就是你可以用 c# 做的事情

```
DataTable table = GetTable(); // Get the data table.
    foreach (DataRow row in table.Rows) // Loop over the rows.
    {

        string getvalue= row[1].ToString();
        If( getvalue == your condition || getvalue == DBNull.Value)
            {
                table.Row.Remove(row[1]);
            }
}   } 
```

你试过这个

```
 SqlCommand cmd = new SqlCommand("select * from yourtable", con);
        con.Open();
        SqlDataReader dr = cmd.ExecuteReader();
        while (dr.Read())
        { 
            string value=dr[0].ToString();
            if (value == "yourcondition")
            {              
                SqlCommand cmd2 = new SqlCommand("delete from yourtable where columnname ='"+value+"'", con2);
                con2.Open();
                cmd2.ExecuteNonQuery();
                con2.Close();
            }
        } dr.Close();
        con.Close(); 
```

# crystal-reports - 更改水晶中的数据源位置

> ID：11666179
> 
> 赞同：1
> 
> 时间：2012-07-26T09:21:51.583
> 
> 标签：crystal-reports

我想使用下面的代码在运行时更改数据源位置；我有一个关于使用此代码的问题：此代码是否更改报表子报表的所有数据源位置？肿瘤坏死因子；

```
ReportDocument doc = new ReportDocument();
doc.Load(@"C:\ReportName.rpt");

ConnectionInfo crConnection = new ConnectionInfo();
crConnection.UserID = userID;
crConnection.ServerName = datasource;
crConnection.DatabaseName = "";
crConnection.Password = password;

AssignConnectionInfo(doc,crConnection);

CrystalReportViewer1.ReportSource = doc; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:49:51.017

循环遍历所有子报表并为每个子报表分配新连接。

# android - 是否有适用于三星 Galaxy Tab 10.1 的在线测试模拟器？

> ID：11666180
> 
> 赞同：1
> 
> 时间：2012-07-26T09:21:51.940
> 
> 标签：android, android-emulator, eclipse-plugin

我想在 3.1 OS 版本的三星 Galaxy Tab 10.1 中专门测试应用程序。那么，有没有可用的在线测试选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T09:29:37.290

您可以查看[DeviceAnyWhere](http://www.keynotedeviceanywhere.com/)提供的解决方案。它们为您提供可以安装和测试本机应用程序的设备。所有其他可用的在线模拟器让您只测试基于 Web 的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-15T03:59:52.437

可用于在线测试的所有三星设备的 belove 链接。

[http://developer.samsung.com/remotetestlab/rtlDeviceList.action](http://developer.samsung.com/remotetestlab/rtlDeviceList.action)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T09:25:16.457

您的问题的答案是否定的......即使它们存在，也允许您测试您的移动 Web 应用程序，而不是您的 Android 原生应用程序。

要在任何设备上测试 Android Native 应用程序，您可以定义 ADV。

在 Eclipse 中，单击工具栏中的 Run，然后单击 Run Configurations。选择您的应用程序并单击目标标签。然后，您可以选择要使用的 AVD 或将其设置为手动，以便每次运行应用程序时都会询问您，这样您就可以定义任何设备配置...

![在此处输入图像描述](../Images/ec83e23a99ab6ef5e3ebc5a865f6e468.png)从 Eclipse查看和选择设备![在此处输入图像描述](../Images/d664dc7d8d5a3057f280c7feed8dd2c8.png)

希望这可以帮助

# java - 带有状态页面的表单提交后的wicket 1.5 url

> ID：11666184
> 
> 赞同：0
> 
> 时间：2012-07-26T09:22:05.413
> 
> 标签：java, url, wicket, wicket-1.5

我知道这个（另一个）网站上有很多类似的问题，但没有一个能帮助我解决我的问题。我有 2 个检票口状态页面。页面安装如下：

```
mountPage(firstPath, firstPage.class);
mountPage(secondPath, secondPage.class); 
```

第一次加载页面 firstPage 时，它​​会使用默认构造函数加载，并且 url 看起来像所需的那样。一旦 firstPage 中的表单被提交，我将转发到有状态页面 secondPage，如下所示：

```
Page secondPage = new secondPage(arg1, arg2);
RequestCycle().setResponsePage(secondPage); 
```

尽管安装了第二个页面，但生成的页面 (secondPage) 使用以下 url 呈现：

```
context?21-1.IFormSubmitListener-componentName-childComponentName-childComponentName-someForm 
```

我想要的是使用我定义的安装路径呈现的 secondPage。我知道这是一个有状态的页面，为了让 wicket 加载它的确切实例，url 必须是有状态的。我不介意在 url 中有页面版本和 id，我只是不想在 url 中有这么长的丑陋组件路径。另外，我不明白为什么我需要从 secondPage 的 url 中的 firstPage 到表单的路径。

据我了解，wicket 1.4 HybridUrlCodingStrategy 可以做类似的事情，但我在 wicket 1.5 中找不到任何方法。这甚至可能与检票口有关吗？

任何帮助将不胜感激，因为这真的阻碍了我，而且我已经花了太多时间试图解决它，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:27:05.773

尝试更换：

```
Page secondPage = new secondPage(arg1, arg2);
RequestCycle().setResponsePage(secondPage); 
```

和：

```
RequestCycle().setResponsePage(secondPage.class); 
```

应该在我的头顶上工作......

**编辑：** 刚刚注意到您正在传递参数，在这种情况下，您需要将 secondPage 更改为：

```
class secondPage extends WebPage
{
    public secondPage(PageParameters params) //Instead of secondPage(Type1 arg1, Type2 arg2)
    {
        arg1Type arg1 = params.get(0).to*{arg1Type}*();
        arg2Type arg2 = params.get(1).to*{arg2Type}*();
    }
} 
```

然后调用：

```
PageParameters params = new PageParameters();
params.set(0, arg1);
params.set(1, arg1);
RequestCycle().setResponsePage(secondPage.class, params); 
```

# akka - 如何使用 scala 2.9.x 运行 akka 2.1-snapshots？

> ID：11666186
> 
> 赞同：1
> 
> 时间：2012-07-26T09:22:06.880
> 
> 标签：akka

当将akka从1.2升级到akka 2.0.2时，我无法实现camel，因为akka 2.0.2不支持akka-camel，我尝试使用akka 2.1-snapshots但它需要scala 2.10，我如何运行akka 2.1-snapshots斯卡拉2.9.x？

当我编译 testkit 时总是有这个错误：

> TestKitBase 所需的类文件丢失。[错误] 包 concurrent 的参考值 util 指的是不存在的符号。[错误] 发现一个错误

如果我将 scala-reflect-2.10.0-M5.jar 、 scala-library-2.10-M5.jar、 scalatest-2.10-M5.jar 复制到我的库文件夹中，则会出现其他错误：

> 加载包时出错，包所需的类文件丢失。[错误] 不推荐使用的对象的参考值 $default$2 指的是不存在的符号。

我正在使用 sbt 0.11.3 & 这里是我的 build.sbt 文件：

名称：=“akka-2.1-test”

> 版本：=“1.0.0”
> 
> scalaVersion := "2.9.1"
> 
> 解析器+=“类型安全存储库”在“http://repo.akka.io/snapshots”
> 
> unmanagedBase <<= baseDirectory { base => base / "custom_lib" }

我不想升级到 scala 2.10，因为我的 liftweb 仍然使用 scala 2.9.1

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:14:59.787

我怀疑 Akka 2.1 是否会针对 Scala 2.9.x 发布，因为它使用了 Scala 2.10 的许多新特性。

# javascript - 导航菜单动画不正确

> ID：11666193
> 
> 赞同：2
> 
> 时间：2012-07-26T09:22:22.113
> 
> 标签：javascript, jquery, html, css

我正在尝试整理一个固定在屏幕右侧的垂直导航栏，目前它显示正常，但我想要的是当用户单击其中一个选项时，菜单会向左展开. 目前它确实展开了，但效果不佳，下面的所有其他菜单选项都关闭了，新菜单展开在所选选项下方展开，它应该在顶部展开，希望你能明白我的意思我创建的这个jsfiddle。我的版本使用图像而不是颜色，但希望这两种方式都一样

[**jsFiddle**](http://jsfiddle.net/EfbvA/6/)

只是为了让您知道这不仅仅是扩展菜单选项的情况，滑过的位是一个新图像，所以我认为它需要是一个新的 div 等。

无论如何，非常感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:46:44.380

除了 AK 的回答之外，我还为您快速模拟了这一点。它并不完全符合您的需要，因为我正在工作，但它向您展示了这可以通过纯 CSS3 来完成。

[http://jsfiddle.net/NDqdt/2/](http://jsfiddle.net/NDqdt/2/)

编辑：好的，我很无聊，你在这里 - 功能齐全：http: [//jsfiddle.net/NDqdt/4/](http://jsfiddle.net/NDqdt/4/)

# r - 在R中的地图上创建颜色网格

> ID：11666197
> 
> 赞同：0
> 
> 时间：2012-07-26T09:22:28.697
> 
> 标签：r, spatial-interpolation

我一直在尝试在我的世界地图上创建一个网格，如下所示 [的网格地图示例](https://stackoverflow.com/questions/11164974/r-plot-filled-longitude-latitude-grid-cells-on-map)

我希望能够根据文件中的 rate2 列为网格着色。我得到的大多数解决方案仅根据国家/地区为世界着色。请问我该怎么做。我附上了我的csv。

[热图.csv](http://sdrv.ms/QabLMv)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:47:03.707

看看 R 中的一些空间插值包，R 的[空间任务视图](http://cran.r-project.org/web/views/Spatial.html)提供了一个很好的列表，例如 automap、gstat、Fields、geoR 等。要获得地图，您需要：

*   定义预测网格
*   如果需要，拟合数据的一些数学属性，例如克里金法中的变异函数。
*   将值预测到这个新网格上。

我认为对于这些数据，您的第一个最佳选择是一些反距离加权或基于样条的插值（例如字段中的 Tps）。

一些注意事项：

*   您的数据仅在陆地上，我建议仅在陆地上定义预测网格。
*   您在同一空间位置有多个观测值。我确信 automap/gstat 中的克里金法实现不会像这样。要么扔掉，要么聚合（例如平均）重复的观察。有一些方法可以使用副本来估计测量不确定性，并在插值过程中考虑到这一点，但这并非易事。

另请参阅我之前关于该主题的两篇文章以获取更多信息：

*   [在地图上绘制插值数据](https://stackoverflow.com/questions/10047870/plotting-interpolated-data-on-map/10058844#10058844)
*   [点数据集到网格数据集的平均值](https://stackoverflow.com/questions/8563334/average-values-of-a-point-dataset-to-a-grid-dataset/8563683#8563683)

# c# - 打开 Excel 工作表时无法将数据添加和保存到 Excel

> ID：11666198
> 
> 赞同：0
> 
> 时间：2012-07-26T09:22:28.577
> 
> 标签：c#, excel, interop

我想使用 C# 程序将数据添加到 Excel 工作表。只有当我向程序提供输入的 Excel 工作表关闭时，我才能添加和保存数据。

但是，如果我在执行程序之前打开了我正在向程序输入的 excel 表，我添加的数据不会被保存。

我使用的代码是

工作簿 = appExl.Workbooks.Open(Excel_file, 0,false, 5, "", "", false, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "", true, false, 0, true, false, false );

添加数据后，我正在使用 workbook.Save(); 方法。

任何人都可以帮助我如何保存数据，即使打开了 Excel 工作表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:30:42.423

我认为你已经锁定了进程，所以你不能保存，你首先会手动删除你的进程。

然后添加这些代码行以获得您的资源。

```
 workbook.Save();
        applicationClass.Quit();
        while (Marshal.ReleaseComObject(usedRange) > 0) 
        {}
        while (Marshal.ReleaseComObject(worksheet) > 0) 
        {}
        while (Marshal.ReleaseComObject(workbook) > 0) 
        {}
        while (Marshal.ReleaseComObject(applicationClass) > 0) 
        {} 
```

你重新测试了

# android - NDK 错误....关于进行 ndk-build

> ID：11666200
> 
> 赞同：1
> 
> 时间：2012-07-26T09:22:32.627
> 
> 标签：android, c++, c, android-ndk, freeimage

尝试执行 NDK 构建时出现以下错误...有人可以帮助我吗？

```
lmImf/ImfHuf.cpp:133: undefined reference to `__cxa_throw'
    ./obj/local/armeabi-v7a/libfreeimage.a(ImfHuf.o): In function `Imf::(anonymous namespace)::invalidTableEntry()':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:141: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:141: undefined reference to `__cxa_throw'
    ./obj/local/armeabi-v7a/libfreeimage.a(ImfHuf.o): In function `Imf::(anonymous namespace)::tooMuchData()':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:93: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:93: undefined reference to `__cxa_throw'
    ./obj/local/armeabi-v7a/libfreeimage.a(ImfHuf.o): In function `Imf::(anonymous namespace)::invalidCode()':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:109: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:109: undefined reference to `__cxa_throw'
    ./obj/local/armeabi-v7a/libfreeimage.a(ImfHuf.o): In function `invalidTableSize':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:117: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:117: undefined reference to `__cxa_throw'
    ./obj/local/armeabi-v7a/libfreeimage.a(ImfHuf.o): In function `invalidNBits':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:85: undefined reference to `__cxa_allocate_exception'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:85: undefined reference to `__cxa_throw'
    ./obj/local/armeabi-v7a/libfreeimage.a(ImfHuf.o): In function `~AutoArray':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfAutoArray.h:61: undefined reference to `__cxa_end_cleanup'
    ./obj/local/armeabi-v7a/libfreeimage.a(ImfHuf.o): In function `Imf::hufUncompress(char const*, int, unsigned short*, int)':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:1076: undefined reference to `__cxa_begin_catch'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:1079: undefined reference to `__cxa_rethrow'
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/./IlmImf/ImfHuf.cpp:1076: undefined reference to `__cxa_end_catch'
    ./obj/local/armeabi-v7a/libfreeimage.a(ImfHuf.o):(.ARM.extab.text._ZN3Imf13hufUncompressEPKciPti+0x0): undefined reference to `__gxx_personality_v0'
    ./obj/local/armeabi-v7a/libfreeimage.a(ImfHuf.o): In function `~AutoArray':
    D:\Projects.CPP\Engine5\svn\trunk\Dependencies\FreeImage/D:/Projects.CPP/Engine5/svn/trunk/Dependencies/FreeImage/jni/../Source/OpenEXR/IlmImf/ImfAutoArray.h:61: undefined reference to `__cxa_end_cleanup'
    ./obj/local/armeabi-v7a/libfreeimage.a(ImfHuf.o):(.ARM.extab.text._ZN3Imf11hufCompressEPKtiPc+0x0): undefined reference to `__gxx_personality_v0'
    /home/flock/ANDROID/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.4.3/libgcc.a(unwind-arm.o): In function `__gnu_unwind_pr_common':
    /i/ndk-andrewhsieh/src.1-with-cherrypicks//build/../gcc/gcc-4.4.3/libgcc/../gcc/config/arm/unwind-arm.c:1237: undefined reference to `__cxa_call_unexpected'
    collect2: ld returned 1 exit status 
```

我的应用程序.mk

```
APP_OPTIM := release
APP_PLATFORM := android-8
APP_STL := gnustl_static
APP_CPPFLAGS += -frtti 
APP_CPPFLAGS += -fexceptions
APP_CPPFLAGS += -DANDROID
APP_ABI := armeabi-v7a 
```

还有我的 android.mk

```
 LOCAL_PATH := $(call my-dir)
    include $(CLEAR_VARS)
    LOCAL_MODULE:= freeimage
    LOCAL_SRC_FILES :=libfreeimage.a
    APP_STL := gnustl_static
    include $(PREBUILT_STATIC_LIBRARY)

    include $(CLEAR_VARS)
    LOCAL_MODULE:= imageprocessing
    LOCAL_SRC_FILES:= imageprocessing.c
    LOCAL_STATIC_LIBRARIES = freeimage
    LOCAL_EXPORT_C_INCLUDES := freeimage.h
    LOCAL_LDLIBS:= -lm -llog -ljnigraphics
    APP_STL := gnustl_static
    include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:26:16.757

将此添加到您的`Application.mk`：

```
APP_STL := gnustl_static
APP_CPPFLAGS += -frtti 
APP_CPPFLAGS += -fexceptions 
```

您的 FreeImage 似乎是使用与您的应用程序不同的运行时构建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T14:45:48.597

你确定你不想要 APP_STL : = stlport_static 吗？如果我为“__cxa_end_catch” grep，我会在 $(NDK_ROOT)/sources/cxx-stl/gabi++/... ） 顺便提一句）

# svn - 如何将项目的本地版本与最新的存储库版本进行比较？

> ID：11666202
> 
> 赞同：0
> 
> 时间：2012-07-26T09:22:43.250
> 
> 标签：svn, intellij-idea

IDE：IntelliJ IDEA 10.5

VCS：颠覆

我可以进行更新和提交，但比较功能不活跃。

![在此处输入图像描述](../Images/a2e4ca3cf2e42a70306e19f1387716e7.png)

# php - 如何克服这个错误？“未定义的索引：第 118 行 C:\Program Files\EasyPHP-12.0\www\ipetlin\signup.php 中的名称”

> ID：11666203
> 
> 赞同：0
> 
> 时间：2012-07-26T09:22:51.570
> 
> 标签：php, mysql

我只是在我的项目中使用easyphp。如果我打开页面，屏幕上会出现“未定义索引：C:\Program Files\EasyPHP-12.0\www\ipetlin\signup.php 中的名称在第 118 行”之类的错误。但是，填写完所有字段后，错误消失了。如何解决这个问题呢。我去了一些论坛，他们说，通过添加最后一个代码，错误就会消失。请帮我。谢谢你。

```
// Get values from form 
$name=$_REQUEST['name'];
$email=$_REQUEST['email'];
$password=$_REQUEST['password'];
$gender=$_REQUEST['gender'];
$ic=$_REQUEST['ic'];
$addr=$_REQUEST['addr'];
$dept=$_REQUEST['dept'];
$kod=$_REQUEST['kod'];
error_reporting(E_ALL ^ E_NOTICE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:24:11.680

您可以使用一些函数 - 例如`isset()`和`empty()`变量，以确保在尝试使用它们之前定义索引。

```
if(isset($_REQUEST['name']) // and or any other checking
{
    $name=$_REQUEST['name'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:58:19.737

作为单行解决方案：

```
$name= isset($_REQUEST['name']) ? $_REQUEST['name'] : ''; 
```

除此之外，您应该使用 $_POST 或 $_GET。$_REQUEST 包含来自 $_GET、$_POST 和 $_COOKIE 的所有内容。所以可能很危险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:39:52.077

它是

```
error_reporting(0); 
```

不是

```
error_reporting(E_ALL ^ E_NOTICE); 
```

虽然我不建议`error_reporting(0);`在开发阶段使用，因为它可以帮助您调试代码。

# cakephp - 保存 belongsTo 模型

> ID：11666205
> 
> 赞同：1
> 
> 时间：2012-07-26T09:22:54.347
> 
> 标签：cakephp

我有 2 个模型：**Photo**和**Score**。每一个`Photo`，都应该有一个`Score`。所以我设置`Photo`属于`Score`：

```
class Photo extends AppModel {
    public $actsAs = array('Containable');
    public $belongsTo = array('Score');
} 
```

该`scores`表有一`photo_id`列。（为其`photo`标识）

但是，有一个问题......如何保存`photo`和`score`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:45:50.567

正如您在问题中所问的那样：“每个`Photo`, 应该有一个`Score`”。所以你必须改变你的照片模型。这看起来像：

```
class Photo extends AppModel {
      public $actsAs = array('Containable');
      public $hasOne = array('Score');
} 
```

您将不得不使用该模型来调用需要首先保存的 saveAll() 方法。以便其他关联模型可以将新插入的记录的值作为外键处理。

```
$this->Photo->saveAll($this->request->data, array('deep' => true)); 
```

您的请求数组（`$this->request->data`）应如下所示：

```
Array(
    [Photo] => Array(
                      [img_name] = abc.jpg
                      [image_group] = cricket
                              ... other fields ...
                    )
    [Score] => Array(
                      [score_gain] => 10
                                  ... other fields ....
                    )
    ) 
```

[此链接](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveall-array-data-null-array-options-array)将为您提供帮助。如何保存关联数据。您还可以使用[saveAssociated()](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveassociated-array-data-null-array-options-array)方法。

我希望它对你有用。

# java - 是否可以在 PhaseListener 中捕获 ViewExpriedException？

> ID：11666210
> 
> 赞同：0
> 
> 时间：2012-07-26T09:23:06.297
> 
> 标签：java, jsf, richfaces, session-timeout, jsf-1.2

出于日志记录的目的，我有兴趣检测我的 JSF 应用程序中何时发生会话超时。

我已经实现了一个 PhaseListener 来检查用户是否登录并且他们的会话是否已经激活。我对*afterPhase*方法的实现是：

*   var **url_accepted**（在代码中使用）包含用户应该有权访问以提供登录表单的公共页面列表。

    ```
    public void afterPhase(PhaseEvent event) {
        FacesContext context = event.getFacesContext();
        HttpSession session = (HttpSession) context.getExternalContext().getSession(true);

        AuthenticationBean sessionBean = (AuthenticationBean) session.getAttribute("sessionBean");

        String url_req = context.getViewRoot().getViewId();

        //1\. Check if user has a session and is logged in:
        if(((sessionBean == null) || (sessionBean != null && !sessionBean.isLoggedIn())) && !url_accepted.contains(url_req)){
            context.getApplication().getNavigationHandler().handleNavigation(context,null,"auth_error");
            return;
        }

    //2\. Code continues in order to check if a logged user has permissions to access the requested page(not relevant):        
    } 
    ```

当用户由于会话超时而断开连接时，PhaseListener 无法从**ExternalContext**检索我的 sessionBean并将**null**分配给 sessionBean 属性。此时我无法区分用户是之前没有登录过还是因超时而断开连接。

我读过可以使用 errorPages 来检测**ViewExpiredException**异常并将视图重定向到特定页面。但我不知道是否可以在我的源代码中管理此异常。

我的问题是：我可以在 PhaseListener 实现中捕获这个**ViewExpiredException**以处理会话超时吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:10:45.970

我在 JSF 项目中遇到过同样的情况。解决方案是使用过滤器来捕获会话过期。BalusC（JSF 专家）解释了这个问题并展示了一个很好的例子：

*   [用户会话过滤器](http://balusc.blogspot.com/2007/03/user-session-filter.html)

另外，不要忘记[`session.invalidate()`](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSession.html#invalidate%28%29)在您的注销方法和会话超时处理程序中添加。

# php - 如何在php中合并2个数组并且没有重复值

> ID：11666212
> 
> 赞同：0
> 
> 时间：2012-07-26T09:23:11.523
> 
> 标签：php, arrays

我有两张这样的桌子：

```
$array1 = (2, 7, 9, 15);
$array2 = (3, 7, 10, 15); 
```

我想混合两张桌子。结果必须是这样的：

```
$result = (2, 7, 9, 15, 3, 10); 
```

没有任何重复值。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:25:23.170

你为什么不试试这个：

```
$result = array_unique(array_merge($arra1, $array2)); 
```

另见文档：

[http://php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)

[http://php.net/manual/en/function.array-unique.php](http://php.net/manual/en/function.array-unique.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:24:48.230

```
//First merge the two arrays
$c = array_merge($array1,$array2);

//Then use the following function to return unique values only
$unique = array_unique($c); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:25:53.190

您可以遍历第二个数组并检查第一个数组中是否存在每个值：

```
foreach($array2 as $v) {
    if(!in_array($v, $array1)) {
        $array1[] = $v;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:27:23.437

执行以下操作：

```
$array1 = array(2, 7, 9, 15);
$array2 = array(3, 7, 10, 15);

$array3 = array_merge($array1, $array2);
$array3 = array_unique($array3); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T10:24:53.830

您可以像这样以编程方式执行此操作：

```
 <pre>
 <?php 
$array1 = array(2,7,9,15);
$array2 = array(3,7,10,15);
function array_merge_func($array1,$array2)
{
    foreach($array1 as $v)
    {
        if(!in_array($v,$array2))
        {
            array_push($array2,$v);
        }
    }
    return $array2;
}

$array3 = array_merge_func($array1,$array2);
print_r($array3);
?>
</pre> 
```

检查 array1 中的值是否存在于 array2 中。如果不存在，则将值推送到 array2 中。

# php - 修复 SESSION_REGISTER , SESSION_UNREGISTER 已弃用 PHP 5.3

> ID：11666214
> 
> 赞同：1
> 
> 时间：2012-07-26T09:23:18.310
> 
> 标签：php, php-5.3

我将更新代码更改为 PHP 5.3 。为了解决这个问题，我`SESSION_REGISTER()`从我的代码中删除并更改`SESSION_UNREGISTER()`为`unset()`；这对我有用。这是真的吗？这是一个确定的方法吗？PHP 手册（[SESSION_REGISTER](http://php.net/manual/en/function.session-register.php)和[SESSION_UNREGISTER](http://php.net/manual/en/function.session-unregister.php)）

旧代码（SESSION_REGISTER）：

```
SESSION_REGISTER("UID");$_SESSION[UID]=$res->fields[uid];
SESSION_REGISTER("EMAIL");$_SESSION[EMAIL]=$res->fields[email];
SESSION_REGISTER("USERNAME");$_SESSION[USERNAME]=$res->fields[username];
SESSION_REGISTER("IS_ACTIVE");$_SESSION[IS_ACTIVE]=$res->fields[is_active]; 
```

至

```
$_SESSION[UID]=$res->fields[uid];
$_SESSION[EMAIL]=$res->fields[email];
$_SESSION[USERNAME]=$res->fields[username];
$_SESSION[IS_ACTIVE]=$res->fields[is_active]; 
```

旧代码（SESSION_UNREGISTER）：

```
$_SESSION["UID"]    = ''; session_unregister("UID");
$_SESSION["EMAIL"]  = ''; session_unregister("EMAIL");
$_SESSION["USERNAME"]   = ''; session_unregister("USERNAME"); 
```

至

```
unset($_SESSION["UID"]);
unset($_SESSION["EMAIL"]);
unset($_SESSION["USERNAME"]);
session_destroy(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:08:06.740

这可以正常工作，只需确保引用了数组键：

```
$_SESSION['UID']=$res->fields['uid'];
$_SESSION['EMAIL']=$res->fields['email'];
$_SESSION['USERNAME']=$res->fields['username'];
$_SESSION['IS_ACTIVE']=$res->fields['is_active']; 
```

# javascript - jQuery 的类型是 javascript 对象、函数还是方法？

> ID：11666217
> 
> 赞同：3
> 
> 时间：2012-07-26T09:23:39.663
> 
> 标签：javascript, jquery

我使用 jQuery 已经有一段时间了，并且了解了选择器和链的基础知识。我现在准备深入研究高级 javascript 概念。现在我对 jQuery 的多角色感到困惑。

例如，

```
jQuery.add(...) 
```

在我看来，jQuery 是一个我们可以向其发送消息的 javascript 对象。

```
jQuery(function() {...}) or jQuery(...selector...) 
```

这一次，jQuery 好像是一个可以带一些参数的 javascript Function。

究竟是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:26:30.977

`console.log(typeof jQuery);`输出'>函数':)

也试试这个：

```
var some_name = function() { return 42; };
some_name.some_property = 84;
some_name.some_method = function() { return 63; };

typeof some_name; // outputs "function"

// but... 
some_name.some_method(); // ...is also possible :) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:33:30.127

很难比它已经描述的方式更深入地解释：

> jQuery 是一个快速而简洁的 JavaScript 库，它简化了 HTML 文档遍历、事件处理、动画和 Ajax 交互，以实现快速的 Web 开发。jQuery 旨在改变您编写 JavaScript 的方式。

[来源：jQuery.com](http://jquery.com/)

我一直认为它是另一种利用 javascript 来简化编码的语言。它充当在一行编码而不是 20+ 行代码中执行操作的函数，这是一个将 50+ 个字符缩短为 10+ 个字符的选择器，而且它的功能更多。

如果你真的想深入编码，可以下载jQuery的开发版。

[jQuery：开发版本](http://code.jquery.com/jquery-1.7.2.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T10:16:29.823

首先，请记住 jQuery 是这样编写的：

```
jquery(...); 
```

相当于：

```
new jQuery(...); 
```

更多细节**[在这里](http://ejohn.org/blog/simple-class-instantiation/)**

其次，`$`是 的同义词`jQuery`。

第三，了解 javascript 允许调用函数而不分配返回的任何内容也很重要。`var foo = bar(auguments);`并且`bar(auguments);`都是法律声明。

最后，javascript 函数是一流的对象。它们可以传递给其他函数，由其他函数返回，通过赋值别名，并成为其他对象的属性。

有了这种理解，应该更容易理解语句是如何以及为什么喜欢`$(selector);`和`$(function(){...});`工作的。

# vba - VBA中单个对象的多种条件格式

> ID：11666218
> 
> 赞同：1
> 
> 时间：2012-07-26T09:23:41.537
> 
> 标签：vba, object, if-statement, conditional-formatting

我有一个对象（即包含文本的 ractangle 形状），我希望根据 cel 中的文本（从下拉列表中）改变形状的颜色（状态）。

我目前正在使用“If”函数来格式化形状，我觉得这是最好的方法；但是我不确定如何在 VBA 中运行多个“IF”公式。

我已经运行了一个成功的“如果”公式进行格式化，但这只能在 2 种颜色之间改变。这是我的单一“如果”公式。

```
If Range("I2") = "Deviation" Then
    Worksheets("M2").Shapes("Rect1").Fill.ForeColor.RGB = RGB(79, 79, 79)
Else
    Worksheets("M2").Shapes("Rect1").Fill.ForeColor.RGB = RGB(0, 102, 204)
End If 
```

当我向脚本添加其他条件/“如果”公式时，它无法更改对象颜色。我得到的最接近的是'If'和'end If'公式来涵盖所有可能性。这是我最接近的提取物（根据我的经验）。

```
If Range("I2") = "Yes" Then
    Worksheets("M2").Shapes("Rect1").Fill.ForeColor.RGB = RGB(0, 128, 0)
End If

If Range("I2") = "No" Then
    Worksheets("M2").Shapes("Rect1").Fill.ForeColor.RGB = RGB(218, 9, 4)
End If

If Range("I2") = "In Progress" Then
    Worksheets("M2").Shapes("Rect1").Fill.ForeColor.RGB = RGB(201, 129, 13)
End If

If Range("I2") = "Deviation" Then
    Worksheets("M2").Shapes("Rect1").Fill.ForeColor.RGB = RGB(79, 79, 79)
Else  
    Worksheets("M2").Shapes("Rect1").Fill.ForeColor.RGB = RGB(0, 102, 204)
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:24:32.987

ElseIf 将是一个改进，但最干净的方法是像这样使用 select：

```
Select Case Range("I2").Value
    Case "Yes"
        ActiveSheet.Shapes("Rect1").Fill.ForeColor.RGB = RGB(0, 128, 0)
    Case "No"
        ActiveSheet.Shapes("Rect1").Fill.ForeColor.RGB = RGB(218, 9, 4)
    Case "In Progress"
        ActiveSheet.Shapes("Rect1").Fill.ForeColor.RGB = RGB(201, 129, 13)
    Case "Deviation"
        ActiveSheet.Shapes("Rect1").Fill.ForeColor.RGB = RGB(79, 79, 79)
    Case Else
        ActiveSheet.Shapes("Rect1").Fill.ForeColor.RGB = RGB(0, 102, 204)
End Select 
```

这段代码已经过测试，可以在我的电脑上运行。

编辑：为了完整起见，这里是使用 if/elseif/else 的相同代码：

```
If Range("I2") = "Yes" Then
    ActiveSheet.Shapes("Rect1").Fill.ForeColor.RGB = RGB(0, 128, 0)
ElseIf Range("I2") = "No" Then
    ActiveSheet.Shapes("Rect1").Fill.ForeColor.RGB = RGB(218, 9, 4)
ElseIf Range("I2") = "In Progress" Then
    ActiveSheet.Shapes("Rect1").Fill.ForeColor.RGB = RGB(201, 129, 13)
ElseIf Range("I2") = "Deviation" Then
    ActiveSheet.Shapes("Rect1").Fill.ForeColor.RGB = RGB(79, 79, 79)
Else
    ActiveSheet.Shapes("Rect1").Fill.ForeColor.RGB = RGB(0, 102, 204)
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T16:04:27.590

要添加到 Alexandre 的答案（不要忘记接受它！），您可以进行一些重构以避免重复：

```
Dim clr As Long

Select Case Range("I2").Value
    Case "Yes": clr = RGB(0, 128, 0)
    Case "No": clr = RGB(218, 9, 4)
    Case "In Progress": clr = RGB(201, 129, 13)
    Case "Deviation": clr = RGB(79, 79, 79)
    Case Else: clr = RGB(0, 102, 204)
End Select

ActiveSheet.Shapes("Rect1").Fill.ForeColor.RGB = clr 
```

# vb.net - 在 vb.net 应用程序中嵌入 lua 作为脚本方法

> ID：11666221
> 
> 赞同：0
> 
> 时间：2012-07-26T09:23:49.023
> 
> 标签：vb.net, lua, embed

有人可以指出包含多行 texbot 的步骤，我可以在我的应用程序中使用 lua 作为脚本功能，我需要导入什么以及如何做，有一些关于 c# 的教程，几乎没有关于 vb 的内容。净我试图包括它，但我不能将lua导入vb.net，或者我做得不好，如果有人能帮助我的话。提前致谢

问题：如何在我的程序中嵌入 lua 以使其能够使用 vb.net 运行 lua 脚本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:24:41.053

**您可以使用一个名为“LuaInterface”的库** [http://luaforge.net/projects/luainterface/](http://luaforge.net/projects/luainterface/)

**这是 LuaInterface 手册 (PDF)：** [https ://warcraftaddonstudio.svn.codeplex.com/svn/trunk/src/References/LuaInterface/src/luainterface/doc/guide.pdf](https://warcraftaddonstudio.svn.codeplex.com/svn/trunk/src/References/LuaInterface/src/luainterface/doc/guide.pdf)

*“LuaInterface 是 Lua 语言和 Microsoft .NET 平台的公共语言运行时 (CLR) 之间集成的库。Lua 脚本可以使用它来实例化 CLR 对象、访问属性、调用方法，甚至使用 Lua 函数处理事件。”*

考虑到这个库，我们可以看看另一个人提出的与您的问题非常相似的问题。 [Visual Basic.net 中的 Lua](https://stackoverflow.com/questions/3737416/lua-in-visual-basic-net)

您可以参考此链接获取 LuaInterface 教程： [http ://penlight.luaforge.net/project-pages/penlight/packages/LuaInterface/](http://penlight.luaforge.net/project-pages/penlight/packages/LuaInterface/)

话虽如此，之前提出与您类似的问题的用户发布了一些代码，这些代码可以方便地理解在 VB.NET 表单中执行 LUA 必须遵循的过程。它似乎是直截了当的，并且很可能足以满足您希望完成的任务。

**这是用户提供的代码：** [bubby4j](https://stackoverflow.com/users/270483/bubby4j)在他的原始问题中。

```
Imports LuaInterface
Public Class Form1 

Public luascripting As New Lua()

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click 

luascripting.RegisterFunction("DisplayText", Me,Me.GetType().GetMethod("DisplayText"))

luascripting.DoFile("script.lua") 

End Sub 

End Class 
```

我希望这可以帮助您完成您的想法！祝你好运。达扬 D.

# c# - 登录表单后的 .NET WebBrowser 下载文件

> ID：11666223
> 
> 赞同：0
> 
> 时间：2012-07-26T09:23:52.660
> 
> 标签：c#, .net, browser

我会咨询一个我必须为客户解决的问题。我们需要在登录表单后从提供程序捕获数据，并且我们必须下载由脚本生成的文本文件，如果未在登录表单之前传递，该脚本将无法访问……为此，我们需要使用 WebBrowser 控件。放电必须自动进行，不显示下载对话框控件，但我们无法控制它。我们一直在尝试修复它，但找到了解决方法。

我们正在使用 fw 2。非常感谢您提前。

PS：如果有人提出替代方案，将受到欢迎......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:31:33.100

为什么使用`WebBrowser`? 看一下这个[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest%28v=vs.100%29.aspx)类，尤其是它的[`CookieContainer`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.cookiecontainer.aspx)属性，它允许您使用 cookie 登录到大多数应用程序以进行识别。如果它使用另一种登录方式，请查看该[`Credentials`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.credentials.aspx)属性。

# dependency-injection - 如何让自托管与 IoC 一起进行 Web-Api 集成测试？

> ID：11666230
> 
> 赞同：4
> 
> 时间：2012-07-26T09:24:16.603
> 
> 标签：dependency-injection, inversion-of-control, asp.net-web-api, autofac, self-hosting

我[从这里得到了提示，](http://cromwellhaus.com/2012/02/asp-net-web-api-integration-tests-with-self-hosting/)为我的新 Web Api 项目提出了这个集成测试。我正在尝试构建一个 REST Web 服务，并且我有一个助手客户端，我计划发布给 API 消费者。那是`ExampleClientHelper`那里的类型。哦，顺便说一句，这一切都`ValuesController`与 MVC4 Web Api Visual Studio 项目的项目模板一起提供的内容有关——我在搞清楚这一点时会保持简单。

`ExampleClientHelper`替换上述参考示例中的所有请求/响应。它在内部使用[RestSharp](http://restsharp.org/)。

```
[Test]
[Ignore]
public void ValuesHelper_ShouldReturn_value1_And_value2_AsTypedObject()
{
    // IoC prep
    var builder = new ContainerBuilder();
    var container = builder.Build();

    // web server prep
    var baseUri = new Uri("http://localhost:8080");
    var config = new HttpSelfHostConfiguration(baseUri);
    config.DependencyResolver = new AutofacWebApiDependencyResolver(container);

    // yes, the routing needs to be copied over. it's not compatible with the MVC routes
    config.Routes.MapHttpRoute("Api", "api/{controller}/{id}",
        new { id = RouteParameter.Optional, namespaces = new[] { typeof(ValuesController).Namespace } });

    // start the server and make a request
    new HttpSelfHostServer(config)
        .OpenAsync()
        .ContinueWith(task =>
            {
                var client = new ExampleClientHelper(baseUri);
                var values = client.GetValues();

                // then test the response
                Assert.AreEqual("value1", values.ElementAt(0));
                Assert.AreEqual("value2", values.ElementAt(1));
            })
        .Wait();
} 
```

只要您不修改`ValuesController`. IE。它仍然有一个隐式的无参数构造函数。

`ValuesController`我遇到的问题是，当我将其修改为需要依赖项时，自托管服务器似乎无法实例化我的。问题是，无论我是否连接[Autofac DependencyResolver](http://nuget.org/packages/Autofac.WebApi) ，我都会从我的助手客户端的响应中得到相同的异常。这是响应内容中返回的内容，由于 RestSharp，它被很好地格式化为 JSON：

> {"ExceptionType":"System.ArgumentException","Message":"Type 'Embed.ECSApi.RestServer.Controllers.ValuesController' 没有默认构造函数","StackTrace":" 在 System.Linq.Expressions.Expression。新建（类型类型）\r\n 在 System.Web.Http.Internal.TypeActivator.Create[TBase]（类型 instanceType）\r\n 在 System.Web.Http.Dispatcher.DefaultHttpControllerActivator.Create（HttpRequestMessage 请求，HttpControllerDescriptor controllerDescriptor , 类型控制器类型)"}

很明显，自托管服务器正在尝试创建`ValuesController`，但它不能。为什么？我以为我正确连接了 DependencyResolver。我希望得到一个 Autofac 异常，而不是抱怨我没有配置的依赖项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:59:39.277

您似乎忘记向容器注册控制器，而 Web API 正在尝试为您创建实例。

```
var builder = new ContainerBuilder();

// Register API controllers using assembly scanning.
builder.RegisterApiControllers(typeof(ValuesController).Assembly);

var container = builder.Build(); 
```

如果需要，您还可以注册单个控制器。

# filter - 用记事本++过滤掉单词？

> ID：11666232
> 
> 赞同：0
> 
> 时间：2012-07-26T09:24:20.867
> 
> 标签：filter, notepad++

假设我有一个包含 100,000 个单词的文本文件（文本文件 A）和一个包含 500 个单词的文本文件（文本文件 B）。我将如何过滤文本文件 A 中的文本文件 B 中的单词

例如，如果该词同时在 A 和 B 中，则从 A 中删除该词

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:27:59.877

你*必须*使用记事本++吗？如果没有，您可以使用 Cygwin/Unix 实用程序并执行以下操作：

```
grep -v -f text_file_b text_file_a 
```

这匹配来自`text_file_b`（**-f**）的单词`text_file_a`并打印那些*不*匹配的单词（**-v**）

我很欣赏这不使用 Notepad++，但我会提倡使用正确的工具来完成正确的工作，而且我不确定交互式编辑器是否是您想要的。

# iphone - 在tabbarbutton中点击uiactionsheet后如何调用segue

> ID：11666233
> 
> 赞同：0
> 
> 时间：2012-07-26T09:24:32.897
> 
> 标签：iphone, ios, xcode, uitabbarcontroller, uiactionsheet

我想知道在 tabbarbutton 中显示操作表后如何调用 segue。

如果 appdelegate 不是一个好地方，我在应用程序委托中完成了所有这些操作。我应该在哪里添加这些代码行？

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController {

    NSInteger choice = 1; // --> index of the view controller that should "act as button"
    if (viewController == [tabBarController.viewControllers objectAtIndex:choice])

        { 
            UIActionSheet *sheet = [[UIActionSheet alloc] initWithTitle:nil 
                                                               delegate:self
                                                      cancelButtonTitle:@"Cancel" 
                                                 destructiveButtonTitle:Nil 
                                                      otherButtonTitles:@"000", @"Car Accident",@"Home",@"Property", nil];
            sheet.tag = 0;
            sheet.title=@"test";
            NSLog(@"tab tab");
                [sheet showInView:self.window];
                return NO;

    }

    NSLog(@"YES YES");
    return YES;
}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
     if(actionSheet.tag == 0)
    {

            if (buttonIndex == 0)
            {
                UIDevice *device = [UIDevice currentDevice];

                if ([[device model] isEqualToString:@"iPhone"])
                {
                    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"telprompt:000"]];

                } else
                {
                    UIAlertView *Notpermitted=[[UIAlertView alloc] initWithTitle:@"Alert" message:@"Your device doesn't support this feature." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
                    [Notpermitted show];
                }

            }
            else if (buttonIndex == 1)
            {
              NSLog(@"Car Accident");
                //tried to call a segue here.

            }
            else if (buttonIndex == 2)
            {

               NSLog(@"YES YES"); 
            }
            else if (buttonIndex == 3)
            {
               NSLog(@"YES YES"); 

            }
        }
} 
```

感谢阅读和评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:47:32.117

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    // Do any additional setup after loading the view.
    UITabBarController *tabController = (UITabBarController *)appDelegate.window.rootViewController;
    tabController.selectedIndex = 0;
    tabController.delegate = self;
}

- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController {

    NSInteger choice = 1; // --> index of the view controller that should "act as button"
    if (viewController == [tabBarController.viewControllers objectAtIndex:choice])

    {
        UIActionSheet *sheet = [[UIActionSheet alloc] initWithTitle:nil
                                                           delegate:self
                                                  cancelButtonTitle:@"Cancel"
                                             destructiveButtonTitle:Nil
                                                  otherButtonTitles:@"000", @"Car Accident",@"Home",@"Property", nil];
        sheet.tag = 0;
        sheet.title=@"Emergency";
        NSLog(@"tab tab");

        [sheet showInView:[self.view superview]];
        return NO;

    }

    NSLog(@"YES YES");
    return YES;
}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    if(actionSheet.tag == 0)
    {

        if (buttonIndex == 0)
        {
            UIDevice *device = [UIDevice currentDevice];

            if ([[device model] isEqualToString:@"iPhone"])
            {
                [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"telprompt:000"]];

            } else
            {
                UIAlertView *Notpermitted=[[UIAlertView alloc] initWithTitle:@"Alert" message:@"Your device doesn't support this feature." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
                [Notpermitted show];
            }

        }
        else if (buttonIndex == 1)
        {
            NSLog(@"Car Accident");
            [self performSegueWithIdentifier:@"pushToCarView" sender:self];

        }
        else if (buttonIndex == 2)
        {

            NSLog(@"YES YES");
        }
        else if (buttonIndex == 3)
        {
            NSLog(@"YES YES");

        }
    }
} 
```

# mysql - 加入两个没有重复和标记的表

> ID：11666236
> 
> 赞同：2
> 
> 时间：2012-07-26T09:24:39.270
> 
> 标签：mysql, join

我得到的是这两张桌子： ![表](../Images/21323558ca835601b2d54b32e206f8a3.png)

一个前缀可以被无限数量的链接使用。我收到了一个列表 if `id`'s from `click_links`table 作为参数。

现在我的目标是选择一个前缀列表并标记那些被该列表中的链接使用的前缀。

我尝试过的：我最好的尝试是这样的：

```
select p.id, p.contents, c.id,
    case
    when (c.id in (544,545...))
        then 1
        else 0
    end as isused
from prefixes p 
join click_links c on c.prefix_id = p.id 
```

但这不是很好，因为`prefix`如果它被许多链接使用，就会有重复。

我怎样才能得到一个没有重复的前缀列表，并带有一个标记（如果你愿意，可以标记）显示它是否被列表中的至少一个链接所使用？

**编辑** 以这个查询结束：

```
SELECT distinct(p.id), p.contents,
       IF(c.id IS NOT NULL, 1, 0) AS isused
FROM prefixes p
     LEFT JOIN (SELECT DISTINCT (prefix_id), id
                FROM click_links WHERE id IN(544, 545...)
               )c
      ON c.prefix_id = p.id; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:31:25.700

我想这就是你要找的，试试吧：

```
SELECT p.id, p.contents, c.id,
       IF(c.id IS NOT NULL, 1, 0) AS isused
FROM prefixes p
     LEFT JOIN (SELECT DISTINCT id
                FROM click_links WHERE id IN(544,545...)
               )c
      ON c.prefix_id = p.id; 
```

# java - GWT CellTable CheckboxCell 在 IE8 中不起作用

> ID：11666240
> 
> 赞同：1
> 
> 时间：2012-07-26T09:24:55.707
> 
> 标签：java, internet-explorer, gwt, internet-explorer-8, celltable

我有一个带有 CheckboxCell 的 CellTable。

我已向其中添加了以下处理程序：

```
private static Column<AIDataRecord, Boolean> m_checkColumn = 
    new Column<AIDataRecord, Boolean>(new CheckboxCell(true, false)) 
    {
        @Override
        public Boolean getValue(AIDataRecord object) 
        {
            // Get the value from the selection model.
            return object.isSelected();
        }   
        @Override
        public void onBrowserEvent(Context context, Element elem, AIDataRecord object, NativeEvent event) 
        {
            System.out.println("Browser Event Called");
            super.onBrowserEvent(context, elem, object, event); 
            String eventType = event.getType();
            if ("change".equals(eventType)) 
            {
                System.out.println("Value changed");
                object.toggleSelection();
                System.out.println("Nw : "+object.isSelected());
            }
        }
    }; 
```

where`object.toggleSelection()` 是一种反转布尔字段的方法，即 true 到 false 和 false 到 true。

我正在使用此代码查找是否选中了任何复选框来识别任何行。

这件事在除 IE 8 之外的所有主要浏览器中都运行良好。

在 IE 8 中，我得到 object.isSelected() true 但是当我单击该面板上的按钮删除行时，它显示同一行的 isSelected() false。

任何机构都可以帮我解决我应该在哪里找到问题吗？为什么 IE 的行为不同？

任何 Java/GWT 专家都可以帮助我吗...

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:11:22.640

为什么不将 FieldUpdater 分配给您的列？它要简单得多。例如：

```
m_checkColumn.setFieldUpdater(

    new FieldUpdater<AIDataRecord, Boolean>() {
         @Override
         public void update(int index, AIDataRecord object, Boolean value) {
            object.toggleSelection();
            Window.alert("Nw : " + object.isSelected());
         }
    }

); 
```

# python - 为什么在输出管道时（在 Python2.x 中）sys.stdout.encoding 会有所不同？

> ID：11666251
> 
> 赞同：4
> 
> 时间：2012-07-26T09:25:28.443
> 
> 标签：python, python-2.x

当我使用不同的管道运行相同的代码时，为什么输出不同？

```
% python2.7  -c 'import sys; print sys.stdout.encoding'
UTF-8
% python2.7  -c 'import sys; print sys.stdout.encoding' | cat
None 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T09:29:05.300

因为当您使用`cat`（或任何管道）时，您会从终端取消绑定进程。Python 从终端设置中获取有关编码的信息。

您可以使用 enironment 变量强制编码：

```
export PYTHONIOENCODING=utf-8 
```

# mysql - 如何使用 MySQL 获取特定元素之前的 X 元素和之后的 X 元素？

> ID：11666253
> 
> 赞同：0
> 
> 时间：2012-07-26T09:25:30.980
> 
> 标签：mysql

我正在尝试生成元素列表：

*   红色的
*   绿色
*   **橙**
*   蓝色的
*   黄色+

在这种情况下，**橙色**被选中，并且我有之前的两个元素和之后的两个元素。

如何从 MySQL 查询中获取此列表？

表格示例：

5 - 一个

* * *

1 - 乙

* * *

4 - C

* * *

8-D

* * *

7 - 乙

* * *

9 - F

* * *

3 - 克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:49:58.140

它应该工作：

```
SELECT id, color FROM colors WHERE id = (SELECT @i:=(id - 2) 
                                         FROM colors 
                                         WHERE color = 'orange')
UNION ALL
SELECT id, color FROM colors WHERE id = @i + 1
UNION ALL
SELECT id, color FROM colors WHERE id = @i + 3
UNION ALL
SELECT id, color FROM colors WHERE id = @i + 4; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:40:52.840

我终于用应用程序代码做到了：

```
def get_list_queryset(self):
    STEP = 5
    LIST_SIZE = 2*STEP+1
    current_object = self.get_object()
    query_set = list(self.model.objects.order_by(*self.model._meta.ordering))
    index = query_set.index(current_object)

    # Index too close to start
    if index < STEP:
        start_ind = 0
        end_ind = LIST_SIZE # We don't care if it's too big.
    # Index too close to end
    elif index+STEP >= len(query_set):
        end_ind = len(query_set)
        start_ind = end_ind>=LIST_SIZE and end_ind-LIST_SIZE or 0
    else:
        start_ind = index-STEP
        end_ind = start_ind+LIST_SIZE

    return query_set[start_ind:end_ind] 
```

答案是 MySQL 不好处理，所以在应用程序中更灵活。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:35:06.393

如果您的基础中的每个元素都有一个 ID，则可以执行以下操作：

```
SELECT element FROM table 
WHERE id BETWEEN (select (id - 2) from table where element = "orange") AND (select (id + 2) from table where element = "orange") 
```

# c++ - 运算符 == 在 std::vector 中不存在？

> ID：11666262
> 
> 赞同：0
> 
> 时间：2012-07-26T09:25:56.517
> 
> 标签：c++, vector, operators

```
class Map {
private:
    std::vector<std::string> key;
    std::vector<std::string> storage;
    int i;
public:
    Map();
    Map* set(std::string, std::string);
    std::string get(std::string);
};

Map::Map() {}
Map* Map::set(std::string k, std::string v) {
    key.push_back(k);
    storage.push_back(v);
    i++;
    return (this);
}
std::string Map::get(std::string k) {
    for (int k = 0; k < i; i++)
        if (key[i] == k)
            return storage[i];
} 
```

这次我还在玩 C++ 和类。我还没有“研究”地图和矢量，只是阅读一些文档。这个课程没有任何目的，只是尝试一下，所以：是的，我知道类似于我在这里想要实现的东西已经存在。

为什么，编译这段代码，我得到：

> main.cpp:32: 错误：'((Map*)this)->Map::key 中的'operator==' 不匹配。std::vector<_Tp, _Alloc>::operator[] [with _Tp = std::basic_string, std::allocator >, _Alloc = std::allocator, std::allocator >](((long unsigned int) ((Map*)this)->Map::i)) == k'

我的意思是，向量中真的不存在 == 运算符吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T09:27:37.180

您正在将字符串值`std::vector<string> key`与`int`. 这是不可能的。

（附带说明， a`map`通常实现为排序二叉树）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T09:31:38.863

原因是阴影。您的 int k 会影响您的参数 std::string k，因此编译器会看到 string == int 并且没有这样的比较器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T09:29:47.337

在您的-loop 中，您使用 name和 type`for`声明循环计数器，它隐藏了 type 参数的名称。`k``int``std::string`

# css - 如何修复导航内容？

> ID：11666264
> 
> 赞同：0
> 
> 时间：2012-07-26T09:26:02.287
> 
> 标签：css

我的网页上有搜索输入框和导航标题上的按钮放置的问题。当我最小化浏览器输入框和按钮移动时。我只是希望它们根据页面大小固定和重新调整大小。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:04:26.877

确实需要查看一些代码，但我猜我会说您需要添加相对于外部容器的位置，然后将绝对位置添加到保存搜索字段的容器中。

# android - 将图像从 android 上传到 cakephp 服务器

> ID：11666265
> 
> 赞同：2
> 
> 时间：2012-07-26T09:26:07.680
> 
> 标签：android, cakephp, http-post

目前我正在为网络服务构建一个应用程序版本，所以我尝试通过应用程序从我的 android 手机内部将图像上传到我的 cakephp 网络服务器。

//安卓代码

```
HttpURLConnection conn = null;
        DataOutputStream dos = null;
        DataInputStream inStream = null;
        String existingFileName = Environment.getExternalStorageDirectory().getAbsolutePath() + "/New Folder/rsz_passportphoto.jpg";
        String lineEnd = "\r\n";
        String twoHyphens = "--";
        String boundary =  "*****";
        int bytesRead, bytesAvailable, bufferSize;
        byte[] buffer;
        int maxBufferSize = 1*1024*1024;
        String responseFromServer = "";
        String urlString = "http://msm.icas.edu.sg/FANS/FANSweb/app/controllers/pagesext_controller.php";
        try
        {
         //------------------ CLIENT REQUEST
        FileInputStream fileInputStream = new FileInputStream(new File(existingFileName) );
         // open a URL connection to the Servlet
         URL url = new URL(urlString);
         // Open a HTTP connection to the URL
         conn = (HttpURLConnection) url.openConnection();
         System.out.println("Connected");
         // Allow Inputs
         conn.setDoInput(true);
         // Allow Outputs
         conn.setDoOutput(true);
         // Don't use a cached copy.
         conn.setUseCaches(false);
         // Use a post method.
         conn.setRequestMethod("POST");
         conn.setRequestProperty("Connection", "Keep-Alive");
         conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);
         dos = new DataOutputStream( conn.getOutputStream() );
         dos.writeBytes(twoHyphens + boundary + lineEnd);
         dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + existingFileName + "\"" + lineEnd);
         dos.writeBytes(lineEnd);
         // create a buffer of maximum size
         bytesAvailable = fileInputStream.available();
         bufferSize = Math.min(bytesAvailable, maxBufferSize);
         buffer = new byte[bufferSize];
         // read file and write it into form...
         bytesRead = fileInputStream.read(buffer, 0, bufferSize);
         while (bytesRead > 0)
         {
          dos.write(buffer, 0, bufferSize);
          bytesAvailable = fileInputStream.available();
          bufferSize = Math.min(bytesAvailable, maxBufferSize);
          bytesRead = fileInputStream.read(buffer, 0, bufferSize);
         }
         // send multipart form data necesssary after file data...
         dos.writeBytes(lineEnd);
         dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
         // close streams
         Log.e("Debug","File is written");
         fileInputStream.close();
         Log.e("Debug","file input close");
         dos.flush();
         Log.e("Debug","flushed");
         dos.close();
         Log.e("Debug","closed");
        }
        catch (MalformedURLException ex)
        {
             Log.e("Debug", "error 1 : " + ex.getMessage(), ex);
        }
        catch (IOException ioe)
        {
             Log.e("Debug", "error 2: " + ioe.getMessage(), ioe);
        }
        //------------------ read the SERVER RESPONSE
        try {
              inStream = new DataInputStream ( conn.getInputStream() );
              String str;

              while (( str = inStream.readLine()) != null)
              {
                   Log.e("Debug","Server Response "+str);
              }
              inStream.close();

        }
        catch (IOException ioex){
             Log.e("Debug", "error: " + ioex.getMessage(), ioex);
        }
      } 
```

它总是出现 07-26 09:13:34.112: E/Debug(810): error: [http://msm.icas.edu.sg/FANS/FANSweb/app/controllers/pagesext_controller.php](http://msm.icas.edu.sg/FANS/FANSweb/app/controllers/pagesext_controller.php) 07-26 09: 13:34.112: E/Debug(810): java.io.FileNotFoundException: [http://msm.icas.edu.sg/FANS/FANSweb/app/controllers/pagesext_controller.php](http://msm.icas.edu.sg/FANS/FANSweb/app/controllers/pagesext_controller.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:33:27.927

阅读更多： http: [//getablogger.blogspot.com/2008/01/android-how-to-post-file-to-php-server.html#ixzz21qi0MF72](http://getablogger.blogspot.com/2008/01/android-how-to-post-file-to-php-server.html#ixzz21qi0MF72)

或试试这个

//php代码

```
<?php

$target_path = "uploads/";

$target_path = $target_path . basename( $_FILES['uploadedfile']['name']);

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
echo "The file ". basename( $_FILES['uploadedfile']['name']).
" has been uploaded";
} else{
echo "There was an error uploading the file, please try again!";
}

?> 
```

///android代码放在这里

```
import java.io.BufferedInputStream;
import java.io.DataOutputStream;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;

import org.apache.commons.codec.binary.Base64;
import org.apache.http.util.ByteArrayBuffer;

import android.util.Log;

public class HttpFileUploader implements Runnable{

URL connectURL;
String params;
String responseString;
InterfaceHttpUtil ifPostBack;
String fileName;
byte[] dataToServer;

HttpFileUploader(String urlString, String params, String fileName ){
try{
connectURL = new URL(urlString);
}catch(Exception ex){
Log.i("URL FORMATION","MALFORMATED URL");
}
this.params = params+"=";
this.fileName = fileName;

}

void doStart(FileInputStream stream){
fileInputStream = stream;
thirdTry();
}

FileInputStream fileInputStream = null;
void thirdTry(){
String exsistingFileName = "asdf.png";

String lineEnd = "\r\n";
String twoHyphens = "--";
String boundary = "*****";
String Tag="3rd";
try
{
//------------------ CLIENT REQUEST

Log.e(Tag,"Starting to bad things");
// Open a HTTP connection to the URL

HttpURLConnection conn = (HttpURLConnection) connectURL.openConnection();

// Allow Inputs
conn.setDoInput(true);

// Allow Outputs
conn.setDoOutput(true);

// Don't use a cached copy.
conn.setUseCaches(false);

// Use a post method.
conn.setRequestMethod("POST");

conn.setRequestProperty("Connection", "Keep-Alive");

conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

DataOutputStream dos = new DataOutputStream( conn.getOutputStream() );

dos.writeBytes(twoHyphens + boundary + lineEnd);
dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + exsistingFileName +"\"" + lineEnd);
dos.writeBytes(lineEnd);

Log.e(Tag,"Headers are written");

// create a buffer of maximum size

int bytesAvailable = fileInputStream.available();
int maxBufferSize = 1024;
int bufferSize = Math.min(bytesAvailable, maxBufferSize);
byte[] buffer = new byte[bufferSize];

// read file and write it into form...

int bytesRead = fileInputStream.read(buffer, 0, bufferSize);

while (bytesRead > 0)
{
dos.write(buffer, 0, bufferSize);
bytesAvailable = fileInputStream.available();
bufferSize = Math.min(bytesAvailable, maxBufferSize);
bytesRead = fileInputStream.read(buffer, 0, bufferSize);
}

// send multipart form data necesssary after file data...

dos.writeBytes(lineEnd);
dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

// close streams
Log.e(Tag,"File is written");
fileInputStream.close();
dos.flush();

InputStream is = conn.getInputStream();
// retrieve the response from server
int ch;

StringBuffer b =new StringBuffer();
while( ( ch = is.read() ) != -1 ){
b.append( (char)ch );
}
String s=b.toString();
Log.i("Response",s);
dos.close();

}
catch (MalformedURLException ex)
{
Log.e(Tag, "error: " + ex.getMessage(), ex);
}

catch (IOException ioe)
{
Log.e(Tag, "error: " + ioe.getMessage(), ioe);
}
}

}

Many of the headers included in the above file is not required, i was trying and failing :).

Now to upload file here is the java code from my activity class

public void uploadFile(){

try {
FileInputStream fis =this.openFileInput(NAME_OF_FILE);
HttpFileUploader htfu = new HttpFileUploader("http://11.0.6.23/test2.php","noparamshere", NAME_OF_FILE);
htfu.doStart(fis);
} catch (FileNotFoundException e) {
// TODO Auto-generated catch block
e.printStackTrace();
}
} 
```

# java - JVM内存中的java char big endian吗？

> ID：11666266
> 
> 赞同：2
> 
> 时间：2012-07-26T09:26:10.963
> 
> 标签：java, jvm, endianness

JVM 内存 [stack/heap] 中的 java char big endian 吗？那是 UTF-16 LE 还是 UTF-16 BE？

我认为这真的不应该那么重要，这取决于 JVM 实现并保持本机芯片顺序以获得性能。原因。那是英特尔等的LE。对吗？

或者它是在 Java 规范中指定的。本身？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T00:28:06.327

类文件格式指定所有项目必须是大端。 [http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html)

我还没有检查过，但我怀疑 JNI 规范也谈到了字节序，我怀疑它是大字节序的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T09:29:49.113

Java 是一种与字节序无关的语言。（JVM 实现可能使用硬件字节序。）

但是，将字符转换为字节序列的不同方法具有固定的字节顺序，例如[`DataOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/DataOutputStream.html#writeChar%28int%29).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:29:02.393

它不是由 VM 规范指定的，取决于 VM 如何处理它。

而且由于没有直接的方法可以重新解释`char`为两个`byte`值，您甚至看不到 Java 程序的决定结果（任何 Java 应用程序在符合标准的 VM 上的行为完全相同，与 VM 的字节序无关） .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:29:47.460

根据处理器的硬件，单个 char 是 little-endian 或 big-endian。大多数 Intel/AMD/ARM 处理器使用 little-endian，Sparc/Alpha 使用 big-endian。

UTF-16 编码是 Java 在字符串中存储代码点（最多 0x1FFFF 的字符）的方式。UTF-16LE 编码是指如何将这样的字符串写入文件。

# c# - 使用 Z3 C# API 时出现 BadImageFormatException

> ID：11666272
> 
> 赞同：1
> 
> 时间：2012-07-26T09:26:29.827
> 
> 标签：c#, z3

当我使用 Z3 C# API 时，我遇到一个异常说“BadImageFormatException unhandled”。实际上我已经添加了“Microsoft.Z3.dll”的引用并且我使用.NET framework 4.0。详细信息是

> 无法加载文件或程序集 'Microsoft.Z3, Version=4.0.0.0, Culture=neutral, PublicKeyToken=9c8d792caae602a2' 或其依赖项之一。试图加载格式不正确的程序。

所以有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:41:58.457

See the answers to this question: [An error appears when running Z3 in C#](https://stackoverflow.com/questions/11136324/an-error-appears-when-running-z3-in-c-sharp)

It's probably related to the Platform target you've selected in your project properties: x86, x64 or AnyCPU. Reference the 32-bit or 64-bit version of Microsoft.Z3 as appropriate.

Lots of other suggestions at the above link too.

# c# - 打印双重时如何强制.net使用某些分隔符？

> ID：11666274
> 
> 赞同：0
> 
> 时间：2012-07-26T09:26:29.947
> 
> 标签：c#

我以这种方式将双精度转换为字符串：`myDouble.ToString("0.0000000000000000")`我注意到在某些机器`.`上用作分隔符，而在另一台机器`,`上使用。我想这取决于 Windows 中的区域设置。

我在另一个程序中使用我的输出，该程序总是期望`,`作为分隔符（无论当前的区域设置如何）。所以我希望 c# 强制始终使用`,`忽略区域设置。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T09:33:33.323

您可以使用自定义`NumberFormatInfo`：

```
var nfi = new NumberFormatInfo();
nfi.NumberDecimalSeparator = ",";
var myDouble = 10.156d;
Console.WriteLine(myDouble.ToString("0.0000000000000000", nfi)); 
```

当这样创建时，您将扩展“不变”格式信息。

上面的代码将输出`10,1560000000000000`到控制台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T09:29:29.303

传入合适的 CultureInfo 作为第二个参数。

例如与

```
myDouble.ToString("0.0000000000000000", new CultureInfo("de-DE")) 
```

你总是会用“，”来打印它（德国就是这样）。

使用文化信息参数，您可以声明您想要的区域设置。对于数据存储和机器输出，您应该始终使用 CultureInfo.InvariantCulture。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:32:23.797

您可以尝试设置`Thread.CurrentThread.CurrentUICulture`和/或 .CurrentCulture 为`CultureInfo("de-DE")`.

# java - java : 从连接在局域网但不在 Internet 中的服务器发送电子邮件

> ID：11666276
> 
> 赞同：1
> 
> 时间：2012-07-26T09:26:34.047
> 
> 标签：java, email

我在 Jboss 服务器 6.1 中运行我的 java Web 应用程序，它在系统“ **A** ”上运行。Apache HTTPD 服务器在系统“ **B** ”上运行，充当代理服务器。系统' **A** '没有暴露于互联网，但B 暴露于互联网。用户可以通过代理 (B) 访问 Web 应用程序 URL (A)。

**问题**：我的 Web 应用程序 (A) 生成电子邮件，应该发送给用户。如何将电子邮件转发/发送给最终用户，因为 A 没有暴露在互联网上。我们可以使用 Apache James 转发邮件吗？如果系统**A**与 Internet 连接，则应用程序可以发送邮件。我正在使用 Java 邮件 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:36:53.857

javamail 声明它不能与 Web 代理服务器一起使用，但提供了 SOCKS 的替代方案。请参阅下面的链接：-

[http://www.oracle.com/technetwork/java/faq-135477.html#proxy](http://www.oracle.com/technetwork/java/faq-135477.html#proxy)

# sql - 如何向 sql server 用户授予 sendmail 权限？

> ID：11666277
> 
> 赞同：10
> 
> 时间：2012-07-26T09:26:38.553
> 
> 标签：sql, sql-server, sql-server-2008

我有一个数据库用户，它是数据库的所有者。应用要求是使用sql server的数据库邮件发送邮件。

有什么方法可以添加仅向该用户发送邮件的权限？

我有一个名为 testuser 的用户具有**公共**服务器角色，并且是1 个数据库的**db_owner**。请告诉我我不需要向该用户提供系统管理员服务器角色的方式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-26T09:43:36.847

请尝试以下 2 个选项。

```
USE msdb;
--add our user
CREATE USER  ClarkKent FOR LOGIN  ClarkKent; 
--give this user rights to use dbmail
exec sp_addrolemember 'DatabaseMailUserRole', 'ClarkKent' 
```

现在，如果我们知道 ClarkKent 正在从一个 windows 组获得他的授权，那么您将该 windows 组添加为用户，并将该组添加到相同的角色；

```
USE msdb;
--add our user via a group we know he is in 
CREATE USER 'mydomain\BusinessGroup' FOR LOGIN   'mydomain\BusinessGroup'; 
--give this GROUP rights to use dbmail
exec sp_addrolemember 'DatabaseMailUserRole', 'mydomain\BusinessGroup' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-15T13:55:11.720

将登录名（或角色）添加到数据库邮件角色后，您需要将登录名（或角色）分配给邮件配置文件。对于下面的脚本，可能需要设置默认值 1，而不是 0。

```
use msdb
exec sp_addrolemember 'DatabaseMailUserRole', 'sqlUser'

EXECUTE msdb.dbo.sysmail_add_principalprofile_sp  
@principal_name = 'sqlUser',  
@profile_name = 'sqlMailProfileName',
@is_default = 0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-22T20:12:13.867

[![在此处输入图像描述](../Images/62983204d7e11341e76b71947ff303a1.png)](https://i.stack.imgur.com/d7z0i.png)

您需要将 MSDB 数据库的“DatabasemailUserRole”添加到用户

# asp.net - 将多个文本框值插入 sql 数据库

> ID：11666279
> 
> 赞同：0
> 
> 时间：2012-07-26T09:26:49.820
> 
> 标签：asp.net

我有 3 个文本框来添加技能，它们进入一个名为“SkillName”的列。但是，我收到了这个错误。

```
'System.Web.UI.Control' does not contain a definition for 'Text' and no extension method 'Text' accepting a first argument of type 'System.Web.UI.Control' could be found (are you missing a using directive or an assembly reference?) 
```

但是我使用了 System.Web.UI.WebControls 的程序集；

这是我添加文本框的代码-

```
 public void InsertSkillInfo()
        {

            String str = @"Data Source=USER-PC\SQLEXPRESS;Initial Catalog=DBNAME;Integrated Security=True";
            SqlConnection conn = new SqlConnection(str);

            try
            {

                for (int i = 1; i <= 3; i++)
                {
                    conn.Open();
                    **string skill = (Page.FindControl("TextBox" + i.ToString())).Text;**
                    const string sqlStatement = "INSERT INTO Cert (SkillName) VALUES (@SkillName)";
                    SqlCommand cmd = new SqlCommand(sqlStatement, conn);
                    cmd.CommandType = CommandType.Text;
                    cmd.Parameters["@SkillName"].Value = skill;
                    cmd.ExecuteNonQuery();
                }
            }

            catch (System.Data.SqlClient.SqlException ex)
            {
                string msg = "Insert Error:";
                msg += ex.Message;
                throw new Exception(msg);
            }

            finally
            {
                conn.Close();
            }

         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:31:09.380

`Page.FindControl`将返回一个`Control`，但你想要一个文本框。如果您确定它找到的控件始终是文本框，则将其转换为文本框。

任何一个：

```
string skill = (TextBox)((Page.FindControl("TextBox" + i.ToString()))).Text; 
```

或者

```
var skill = "";
var control = Page.FindControl("TextBox" + i.ToString()) as TextBox;
if(control != null {
    skill = control.Text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:30:14.410

您需要将控件强制转换为 TexBox 所以它应该是这个

```
string skill = ((TextBox) Page.FindControl("TextBox" + i.ToString())).Text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:30:25.550

您可以像这样简单地尝试

```
string skill = ((TextBox)(Page.FindControl("TextBox" + i.ToString()))).Text; 
```

# munin - 如何在 munin 中配置特定图表以每天而不是每 5 分钟更新一次？

> ID：11666280
> 
> 赞同：5
> 
> 时间：2012-07-26T09:26:49.927
> 
> 标签：munin

Munin 中的默认更新间隔是 5 分钟，这对于大多数用途来说是可以的。

在某些情况下，尽管 5 分钟过于频繁、无用，而且有时会增加被监视服务器的负载。例如，我想每天绘制一次数据库大小图表，并且为此编写了插件。但就性能而言，每 5 分钟采样一次可能代价高昂。

那么，是否可以**为特定图表**配置 Munin，使其每天或每小时更新一次，而不是每 5 分钟更新一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T18:30:32.697

您可以更改所有图表的间隔，请参阅[munin FAQ](http://munin-monitoring.org/wiki/faq#Q:CanIrunmuninatdifferenttimeintervalsthanthedefault)

> 默认情况下，Munin 在 debian 系统上每隔五分钟 (*/5) 运行一次。是否可以将此间隔更改为任意值？
> 
> 只需编辑 /etc/cron.d/munin。
> 
> 但是，这不会改变 Munin（或者更确切地说是 RRD）的粒度；所有 RRD 文件的构造都是为了创建 5 分钟的平均值，无论您多久更新一次 RRD 文件，输出都不会（太大）不同。

但我想你不想吗？:)

我认为您可以优化您的脚本，您可以将结果存储在一个文件中，并且对于每次调用，您都可以验证文件修改日期是否与当前日期相同。如果没有，只需调用数据库以检索数据库大小以及返回内容文件的所有其他时间。它应该消耗更少的资源。

# python - 从 C 扩展代码中释放 python 列表

> ID：11666283
> 
> 赞同：2
> 
> 时间：2012-07-26T09:26:59.180
> 
> 标签：python, c, list, free, python-extensions

我们有一些代码创建一个 python 列表，然后将数据项附加到它。我们担心的是，如果其中一个数据项结果为 NULL，那么我们认为整个列表（即任何先前添加的项）都毫无价值，我们想释放列表和它的内存。我需要做什么来确保垃圾收集器释放所有内存？

当前代码是：

```
PyObject* retval = PyList_New(0);

QList<QVariant> varList = value.toList();
foreach(QVariant var, varList)
{
    // variantToPython(var) returns either NULL
    // or a valid object whose reference count is 1
    PyObject *pyVar = variantToPython(var);
    if (pyVar)
    {
        PyList_Append(retval, pyVar);
        Py_DECREF(pyVar);
    }
}

return retval; 
```

但我们想做这样的事情：

```
PyObject* retval = PyList_New(0);

QList<QVariant> varList = value.toList();
foreach(QVariant var, varList)
{
    // variantToPython(var) returns either NULL
    // or a valid object whose reference count is 1
    PyObject *pyVar = variantToPython(var);
    if (pyVar)
    {
        PyList_Append(retval, pyVar);
        Py_DECREF(pyVar);
    }
    else
    {
        Py_DECREF(retval);
        retval = 0;
        break;
    }
}

return retval; 
```

那么列表对象上的 DECREF 是否足以确保 GC 释放所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:31:05.183

是的，因为`PyList_New()`创建了一个引用计数为 1 的对象。您应该在返回之前设置适当的异常。

# git - Git-跟踪远程分支

> ID：11666286
> 
> 赞同：7
> 
> 时间：2012-07-26T09:27:07.217
> 
> 标签：git, branch

我是 Mercurial 用户，我对远程分支的行为感到困惑。我有一个远程分支`origin/dev`，我想在本地分支上复制它`dev`。我想要的是：

*   每当我`git pull`，更改`origin/dev`合并到`dev`
*   每当我`git push`，更改`dev`合并到`origin/dev`

所以我创建了一个跟踪分支

```
git branch --track dev origin/dev 
```

据我所知，它应该完全符合我的需要。

尽管如此，我仍在开发一个功能分支并发布了一个`git pull`. 当我后来发布时`git checkout dev`，我收到了令人费解的消息

> 您的分支落后于 'origin/master_dev' 2 次提交，并且可以快进。

所以看来我的本地分支毕竟没有更新。每当我拉动并且我目前不在该分支中时，有没有办法将分支更新为远程分支？如果不是，我是否纠正了`git merge`分支 dev 上的（没有任何论据）足以恢复这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T09:50:15.487

该命令`git pull`从所有远程分支获取更新（即更新所有远程跟踪分支）。但只合并当前分支。`git pull`这是未传递参数时的默认行为。

当您在 diff 分支上时`git pull`，它只是更新了远程跟踪分支`dev`。现在`git merge`足以更新您的本地分支`dev`。

# c# - 数组超出数组错误的范围

> ID：11666287
> 
> 赞同：1
> 
> 时间：2012-07-26T09:27:08.153
> 
> 标签：c#

大家好，这段代码给了我数组超出了数组错误的范围，并指向这里“if (!objReader.IsDBNull(i))”。此脚本旨在以 txt 格式打印出来。任何帮助将不胜感激 ：）

```
namespace test
    {
        public partial class frmSales : Form
        {
            public frmSales()
            {
                InitializeComponent();
            }

            private void dtpFrom_ValueChanged(object sender, EventArgs e)
            {

            }

            private void btnExtract_Click(object sender, EventArgs e)
            {

                SqlConnection objConn = new SqlConnection("Data Source=asdasd;Initial Catalog=Medprac;Persist Security Info=True;User ID=sa;Password=");

                    objConn.Open();

                    SqlCommand objCmd = new SqlCommand("SELECT CONVERT(char(80), inv.[InvDate],3) AS InvDate,inv.[InvoiceNo],inv.[TaxAmount] + inv.[SubTotal] AS Amount, '' AS Payment FROM [Invoice] inv LEFT JOIN [PatientDetails] tab ON inv.[MedicalRecordID] = tab.[MedicalRecordID] WHERE (inv.[InvDate] >= CONVERT(datetime, '" + dtpFrom.Text + "', 105 )) AND (inv.[InvDate] <= CONVERT(datetime, '" + dtpTo.Text + "', 105))", objConn);

                SqlDataReader objReader;
                objReader = objCmd.ExecuteReader();

                System.IO.FileStream fs = new System.IO.FileStream("C:\\CMSExportedData\\Sales-" + DateTime.Now.ToString("dd-MM-yyyy") + ".txt", System.IO.FileMode.Create);
                System.IO.StreamWriter sw = new System.IO.StreamWriter(fs, System.Text.Encoding.Default);

                int count = 0;
                while (objReader.Read())
                {

                    for (int i = 0; i < 5; i++)
                    {
                        if (!objReader.IsDBNull(i))
                        {
                            string s;
                            s = objReader.GetDataTypeName(i);
                            //MessageBox.Show(s);
                            if (objReader.GetDataTypeName(i) == "char")
                            {
                                sw.Write(objReader.GetString(i));
                            }
                            else if (objReader.GetDataTypeName(i) == "money")

                            {
                                sw.Write(objReader.GetSqlMoney(i).ToString());
                            }
                            else if (objReader.GetDataTypeName(i) == "nvarchar")
                            {
                                sw.Write(objReader.GetString(i));
                            }
                        }
                        if (i < 4)
                        {
                            sw.Write("\t");
                        }

                    }
                    count = count + 1;
                    sw.WriteLine();

                }
                sw.Flush();
                fs.Close();
                objReader.Close();
                objConn.Close();
                MessageBox.Show(count + " records exported successfully.");
                this.Close();
            }

            private void groupBox1_Enter(object sender, EventArgs e)
            {

            }

            private void dtpTo_ValueChanged(object sender, EventArgs e)
            {

            }

            private void frmSales_Load(object sender, EventArgs e)
            {

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:30:28.200

您的 select 语句查询 4 ​​列，但您的 for 循环涵盖列 0、1、2、3、4：这是五列，因此`i = 4`超出范围。

尝试`for (int i = 0; i < 4; i++)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:32:45.710

您的 SqlCommand 具有以下 SQL 语句

```
SELECT 
    CONVERT(char(80), inv.[InvDate],3) AS InvDate,
    inv.[InvoiceNo],
    inv.[TaxAmount] + inv.[SubTotal] AS Amount, 
    '' AS Payment
FROM 
    ... 
```

它返回 4 个值（索引 0 到**3**），但你的 for 循环从索引 0 到**4**

# jquery-ui - Jquery Date Picker文化问题

> ID：11666289
> 
> 赞同：2
> 
> 时间：2012-07-26T09:27:11.660
> 
> 标签：jquery-ui

我在 Windows 7 上的 asp.net mvc3 中使用 jquery.ui.datepicker。我将系统日期格式更改为

*   **月/日/年**

    至

*   **yyyy-mm-dd**

    然后我的项目日历格式也发生了变化，默认日期即将到来。有时日期选择器日历没有显示。

谁能告诉我如何解决这个问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T09:57:12.163

Sangar82 的答案是最完整和最正确的（我因此而赞成），但在不创建/下载本地化文件的情况下设置格式的更快方法是：

```
$(".dateinput").datepicker({dateFormat: 'dd/mm/yy'}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T09:49:49.283

尝试使用 Datepicker 本地化

> 日期选择器旨在允许轻松创建和使用本地化。许多本地化版本已经可用，欢迎添加更多本地化版本。
> 
> 日期选择器插件维护一个管理器对象 $.datepicker，它可以让您注册新的本地化。此对象维护一组按语言索引的本地化设置，其中 '' 访问默认（英语）版本：$.datepicker.regional['fr']。
> 
> 应在名为 ui.datepicker-.js 的单独 JavaScript 文件中创建新的本地化。在 document.ready 事件中，它应该在 $.datepicker.regional 数组中添加一个新条目，由语言代码索引。
> 
> [http://docs.jquery.com/UI/Datepicker/Localization](http://docs.jquery.com/UI/Datepicker/Localization)

代码：

```
$('selector').datepicker($.datepicker.regional['<language>']); 
```

例子

```
$('.myinput').datepicker($.datepicker.regional['fr']); 
```

当您下载 Jquery UI 时，您可以在以下文件夹中找到 datepicker 多种语言的翻译（69 种翻译）

```
 development-bundle/ui/bundle/i18n 
```

使用示例：

```
<script type="text/javascript" src="js/ui/development-bundle/ui/bundle/i18n/ui.datepicker-fr.js"></script>

<script type="text/javascript">
    $(function() {
        $.datepicker.setDefaults($.datepicker.regional['fr']);
        $("#StartDate").datepicker();
    }); 
 </script> 
```

# iphone - CIFilter filterWithName:keysAndValues: 从 NSDictionary 设置 keysAndValues

> ID：11666291
> 
> 赞同：0
> 
> 时间：2012-07-26T09:27:20.207
> 
> 标签：iphone, objective-c, ios, core-image, cifilter

嗨，我正在尝试做这样的事情：

```
NSMutableDictionary *param1 = [NSMutableDictionary dictionaryWithObjectsAndKeys:@"inputIntensity", [NSNumber numberWithFloat:0.8], nil];
[param1 setObject:file forKey:kCIInputImageKey];
CIFilter *filter = [CIFilter filterWithName:@"CISepiaTone" keysAndValues:param1]; 
```

显然它不起作用，那么，如何从已经存在的字典中填充 keysAndValues 呢？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:40:52.947

`[filter setValue:value forKey:key]`您应该使用最简单的构造方法 (filterWithName:) 并通过迭代现有字典的键来填充值。它只需要几行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:54:12.577

你可以像这样使用字典：

```
 NSMutableDictionary *param = [NSMutableDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithFloat:0.8],@"inputIntensity",imageView.image,@"inputImage",nil]

 CIFilter *filter = [CIFilter filterWithName:@"CISepiaTone" keysAndValues:@"inputImage",[param objectForKey:@"inputImage"],@"inputIntensity",[param objectForKey:@"inputIntensity",nil]]; 
```

# sql - 将结果中的值替换为特定值

> ID：11666295
> 
> 赞同：2
> 
> 时间：2012-07-26T09:27:31.650
> 
> 标签：sql

我需要进行查询以通过 SQL 从数据库中收集一些数据。在此数据中，有 1 个值用作收集值。这是所提供课程的 ID。有时可以提供有关 fe Office 的课程。但是人们可以在那里为word，excel，powerpoint开设课程......但这都是由1位导师在1门课程中提供的。仍然是统计数据，我需要知道他们是否参加过 Word、Excel、Powerpoint 的课程......

是否可以替换结果集中的值？我的意思是这样的：

if value = courseValue ==> 用特定 courseValue 替换值（我可以通过子查询获取值）

我希望这能让我的问题变得清晰，并感谢所有的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T09:40:07.333

您可以在您的选择中使用 case 语句来返回除该行中的课程 ID 之外的其他内容。例如：

```
SELECT 
    field1 AS 'Name',
    CASE 
        WHEN field2 = 'Foo' 
            THEN 'Bar' 
        WHEN field2 = 'Lorem'
            THEN 'Ipsum'
        ELSE 'Some Value'
    END
    AS 'Type',
    field3 AS 'Description'
FROM table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:42:08.953

如果我对您的理解正确，您将需要以下内容：

*   *创建一个包含“courseID”和“replacementID”列的新表，为*有替换的情况填写
*   在您的查询中，通过 courseID 字段与该表进行外部联接，并返回“replacementID”，如果没有替换，则可以为 null
*   如果replacementID 不为null，则使用replacementID 或courseID

# jquery - Datatables 表格工具设计有什么变化？

> ID：11666296
> 
> 赞同：0
> 
> 时间：2012-07-26T09:27:31.723
> 
> 标签：jquery

我正在使用数据表表格工具插件导出到 csv 文件..通常显示在数据表顶部的按钮...但我想在表格下方显示如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:44:35.773

发布您的代码

您需要编辑“sDom”参数来定位它。

看看这个例子，它被添加到顶部和底部[http://datatables.net/release-datatables/extras/TableTools/multi_instance.html](http://datatables.net/release-datatables/extras/TableTools/multi_instance.html)

# javascript - 对象没有“应用”方法

> ID：11666301
> 
> 赞同：4
> 
> 时间：2012-07-26T09:27:47.280
> 
> 标签：javascript, jquery

我正在动态创建一些 DOM 元素，例如，

```
var anchorElement = jQuery('<a />',{text:property.text});
var liElement = jQuery('<li />',{"class":"navlink_"+i,id:"navlink_"+i});
anchorElement.on('click',property.fnctn);
liElement.append(anchorElement);
parentID.append(liElement); 
```

`property`JSON 对象 在哪里。`property.text`是我要放入锚元素的文本。（工作正常）

我想将单击事件处理程序附加到该锚元素。需要绑定到该元素的函数在 JSON 中指定，我们可以像这样访问它

```
property.fnctn 
```

以下行应将事件处理程序绑定到锚元素。

```
anchorElement.on('click',property.fnctn); 
```

这不起作用，所以我尝试将其转换为字符串，例如，

```
anchorElement.on('click',property.fnctn.toString()); 
```

没有成功...

当我单击此链接时，错误会记录在控制台中

该对象没有“应用”方法。是什么原因...？？？

我可以通过一些轻微的工作来让它工作，比如

```
anchorElement.attr('onclick',property.fnctn+"()"); 
```

上面的语句有效，但我想知道为什么`.on()`API 不起作用。

谢谢:) AÐitya。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T09:30:03.357

**更新**：

你说过那`property.actfn`是一个字符串，`"paySomeoneClick"`. 最好不要将字符串用于事件处理程序，而是使用*函数*。如果您希望调用`paySomeoneClick`在字符串中定义的函数，并且如果该函数是全局的，则可以执行以下操作：

```
anchorElement.on('click',function(event) {
    return window[property.fnctn](event);
}); 
```

之所以有效，是因为全局函数是全局对象的属性，可以通过`window`浏览器使用，并且因为下面描述的括号符号。

如果该函数位于您引用的对象上，则：

```
anchorElement.on('click',function(event) {
    return theObject[property.fnctn](event);
}); 
```

之所以有效，是因为在 JavaScript 中，您可以通过两种方式访问​​对象的属性：带有文字属性名称的点表示法（`foo.bar`访问`bar`属性 on `foo`）和带有字符串属性名称的括号表示法（`foo["bar"]`）。它们是等价的，当然除了括号中的符号，字符串可以是表达式的结果，包括来自像`property.fnctn`.

但我建议退后一步并进行一些重构，这样您就不会在字符串中传递函数名称。*有时*这是正确的答案，但根据我的经验，并不经常。:-)

**原始答案**：

*（这假设这`property.fnctn`是一个函数，而不是字符串。但可能对某人有用......）*

编码

```
anchorElement.on('click',property.fnctn); 
```

会将函数附加到事件，但在调用函数期间，`this`将引用 DOM 元素，*而不是*您的`property`对象。

要解决这个问题，请使用 jQuery 的[`$.proxy`](http://api.jquery.com/jQuery.proxy/)：

```
anchorElement.on('click',$.proxy(property.fnctn, property)); 
```

...或 ES5 的[`Function#bind`](http://ecma-international.org/ecma-262/5.1/#sec-15.3.4.5)：

```
anchorElement.on('click',property.fnctn.bind(property)); 
```

...或关闭：

```
anchorElement.on('click',function(event) {
    return property.fnctn(event);
}); 
```

更多阅读（在我的博客上）：

*   [*神话方法*](http://blog.niftysnippets.org/2008/03/mythical-methods.html)
*   [*你必须记住`this`*](http://blog.niftysnippets.org/2008/04/you-must-remember-this.html)
*   [*闭包并不复杂*](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)

# .net - P2P发现功能

> ID：11666307
> 
> 赞同：0
> 
> 时间：2012-07-26T09:28:07.070
> 
> 标签：.net, networking, udp, p2p, lan

我想知道如何在 LAN P2P 网络中实现发现功能。我不想使用.NET 3.5 P2P库，我想自己设计。当用户按下连接按钮的那一刻，他在局域网中发送一条广播消息，通知其他同行他可用。接收线程上的其他对等方识别该消息，并根据他们的意愿建立连接。例如：IP 为 192.168.0.101 的机器 1 按下连接并在“255.255.255.255”发送消息“Command.Connect”用于广播 IP 为 192.168.0.102 的机器 2 在线程上等待 Udp 消息并识别 IP 为 192.168 的对等点.0.102 当用户按下断开连接时，另一个命令“Command.Disconnect”以相同的方式发送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T01:05:14.110

如果您只为简单的 LAN 设计它，那么您还可以考虑使用 IP 多播而不是 UDP 广播。使用 IP 多播，您的新对等方只会向感兴趣的对等方发送消息，但在广播的情况下，您的消息将被发送到所有计算机，即使它们没有运行您的聊天程序。然而，这两种选择各有利弊，具体取决于您的要求和应用程序的未来计划。

其次，如果您可以在系统中拥有一台服务器，那么它可以进行更精细的调整。您可以将聊天消息保持在对等模型上，但是当某个对等点上线时，它可以向专用服务器注册并要求服务器提供其他已注册对等点的列表，然后您可以直接与其他对等点交互。如果您打算添加身份验证等功能，这也将很有帮助。

# c# - 从 SqlCommand 对象返回列表 - 我怎样才能让数据库尽可能少地工作？

> ID：11666309
> 
> 赞同：2
> 
> 时间：2012-07-26T09:28:09.600
> 
> 标签：c#, .net, sql, sql-server, sql-server-2008

我正在为我的班级编写一个私有方法。我将一个整数列表作为参数传递给这个整数列表，表示我的 SQL Server 2008 表中一行的 ID。

我希望在传入的整数之一等于 a 的所有行上返回 (a 列)`List<string>`的a 。所以如果我通过.`"Name"``"ID"``List<int> {1, 2, 3 }`

我想基本上运行命令`(SELECT Name FROM Table WHERE ID = 1 OR ID = 2 OR ID = 3).ToList<string>()`。

我正在使用的数据库非常繁忙，因此尽可能优化我的解决方案非常重要。考虑到这一点，我想知道使用 .dbml 文件创建指向该数据库的链接并使用 Linq to SQL 查询数据库是否是更好的做法？

或者只是创建一个 SQLCommand 对象，执行一次，遍历阅读器并将其保存在列表中？执行此操作的最佳方法是什么？创建一个 .dbml 文件来代表一个非常繁忙的数据库是不好的做法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T09:43:56.553

创建 .dbml 对服务器端性能影响不大；这会改变调用端的工具 - 但服务器不会真正注意到来自 .dbml 的命令与手动编码的命令之间的区别，至少：不是这样简单的事情（我应该注意，对于复杂的查询，手动编码查询通常可以胜过机器生成的查询）。

在调用者的表现方面；.dbml 只是所有常用命令/阅读器/等的包装**器**- 它不能让事情变得更快。在某些情况下，如果它不能很好地解析表达式，或者没有缓存解析的结果（就 TSQL 而言），它可能会使其*变慢。*

不过，我要说的是，[dapper](http://nuget.org/packages/Dapper)*会*为你很好地处理这个问题：

```
var ids = new List<int>{1,2,3};
var names = conn.Select<string>("select Name from Table where ID in @ids",
      new {ids}).ToList(); 
```

dapper 将发现`in @ids`用法，并将其扩展为参数，执行：

```
select Name from Table where ID in (@p__0, @p__1, @p__2) 
```

（或类似的东西） - 将 1、2 和 3 作为这些值传递。

这给了你：

*   方便来电者
*   调用者的性能（dapper 被高度优化）
*   全参数化
    *   允许在服务器上优化查询计划重用

更*一般地说*，dapper 也将愉快地处理一般实体映射，例如：

```
int id = 12345;
var customer = conn.Select<Customer>("select * from Custom where Id = @id",
    new { id }).Single(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T09:50:06.117

我会做的几件事：

A. 使用表值参数

```
CREATE TYPE LocationTableType AS TABLE 
( ID INT);
GO 
```

B. 使用存储过程（与您的 TVP）

```
CREATE PROCEDURE dbo. usp_GetLocationNames
    @TVP LocationTableType READONLY
    AS 
    SET NOCOUNT ON;
    SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

    SELECT Name
    FROM dbo.Location l
    JOIN @TVP t ON l.ID = t.ID 
```

C. 允许脏读——SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED；

D. 不计算行数 - SET NOCOUNT ON；

E. 将结果集缓存一段时间

由于我对您的应用程序或您的情况知之甚少，因此这些项目“通常”是我对大多数 proc 会做的事情。显然，如果您在分发现金之前检查某人的银行账户余额，您将不允许脏读，也不会缓存结果集。但在大多数情况下，这些都是可以接受的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:50:11.210

如果您按数字 ID 选择，那么动态形成 WHERE 子句是安全的（即 WHERE ID IN (1,2,3,...)

更高级的方法是使用 XML 参数创建 SP。示例代码片段：

```
DECLARE @xmlIds AS XML
SET @xmlIds = '<Ids><ID>1</ID><ID>2</ID></Ids>'

SELECT Name FROM Table
WHERE ID IN (
    SELECT
        Data.row.value('.', 'INT')
        FROM
        @XmlIds.nodes('/Ids/ID') As Data(row)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:31:21.593

为了限制流量最好减少到数据库的往返次数，如果您只发出一个命令，也许使用 IN 子句而不是多个 or 并参数化您的查询，那么更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T09:53:56.527

您可以使用本机 C# 和 Sql 2008 在本机完成所有这些操作。在 Sql 2008 中，它引入了[用户定义的表类型](http://msdn.microsoft.com/en-us/library/bb522526%28v=sql.105%29.aspx)和存储过程[的表值参数](http://msdn.microsoft.com/en-us/library/bb675163.aspx)。

因此，以下内容将为您提供您想要的，

```
CREATE TYPE UdtId AS TABLE
(
    [ID] INT NOT NULL
    PRIMARY KEY NONCLUSTERED ([ID] ASC)
)

CREATE PROCEDURE spGetCustomerByIds
    @IDS UdtId READONLY
AS
BEGIN
    SELECT
        C.*
    FROM Customer C
    INNER JOIN UdtId I ON
        C.ID = I.ID
END 
```

希望它背后的 C# 代码是显而易见的，但它看起来像，

```
public foo GetCustomerDataByIds(IEnumerable<int> ids)
{
    using (var command = new SqlCommand())
    using (var adatper = new SqlAdapter())
    using (var dataSet = new DataSet())
    {
        command.Text = "spGetCustomerByIds";
        command.CommandType = CommandType.StoredProcedure;
        command.Parameters.AddWithValue("@IDS", GetDataTableOfIds(ids));
        // execute and return the stuff you're after
    }
}

private DataTable GetDataTableOfIds(IEnumerable<int> ids)
{
    var table = new DataTable();
    table.Columns.Add(new DataColumns("ID", typeof(int));
    foreach (var id in ids)
    {
        table.Rows.Add(id);
    }
    return table;
} 
```

# ios - ios 块示例。如何创建块objective-c

> ID：11666310
> 
> 赞同：2
> 
> 时间：2012-07-26T09:28:27.680
> 
> 标签：ios, objective-c-blocks

我有两个`UIViewController`：

*   主VC
*   选择器VC

在主视图控制器中，我有 IBAction 方法： - showPickerView

在这种方法中，我需要创建将呈现 PickerVC 视图的块，并在我在 PickerVC 视图上选择一些值并按下完成按钮时等待我。

在这个块中，我需要实现回调，它会在我按下按钮 Done 后调用 MainVC 中的方法。

所以，我以前用过block，但我不知道如何自己实现它。

我认为第一部分将如下所示：

```
- (IBAction)showPickerView {
   __block PickerVC *pickerVC = [[PickerVC alloc] init];
   [pickerVC setFinishBlock:^{
      // Do something after user press on Done button
   }];
   [pickerVC setFailedBlock:^{
      // Do something if something wrong (but this method optional)
   }];
   [pickerVC showPicker];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T09:54:45.123

在 PickerVC 的 header 中添加两个 typedef

```
typedef void (^FinishBlock)();
typedef void (^FailedBlock)(); 
```

并且您的 setFinishedBlock 声明采用 FinishBlock

```
- (void)setFinishBlock:(FinishBlock)finishBlock;
- (void)setFailedBlock:(FailedBlock)failedBlock; 
```

为每个块制作一个 iVar

```
@interface PickerVC : UIViewController
{
  FinishBlock _finishBlock;
  FailedBlock _failedBlock;
} 
```

在您定义`setFinishedBlock:`并将`setFailedBlock:`参数设置为 iVars

一旦 PickerVC 失败或完成调用`_failedBlock`或`_finishedBlock`.

该`__block`语句用于变量在块中使用时留在内存中。所以在上面的代码中你不需要它

# java - 为什么选择全球环境基金？在什么时候我必须使用 GEF

> ID：11666311
> 
> 赞同：2
> 
> 时间：2012-07-26T09:28:32.160
> 
> 标签：java, eclipse-plugin, eclipse-emf, eclipse-gef

我正在开始开发用于工作流绘图的 eclipse 插件。现在我必须了解 eclipse 插件的架构。我想知道 GEF、EMF 和 GMF 之间的差异/关系到目前为止，最新的技术是什么？我在哪里可以获得理解材料？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T20:46:35.057

1.  EMF - Eclipse 建模框架 - 为您提供帮助您创建模型的工具。基本思想是您使用 ecore 定义域模型，然后您可以使用该模型为该模型生成大量代码：域中每个实体的 java 类，具有 getter/setter、侦听功能和许多其他好东西.
2.  GEF - 图形编辑框架 - 是一个使用 MVC 模式在 eclipse 中创建可视化编辑器的框架。它建立在 draw2d 之上，draw2d 是 SWT 之上的“轻量级”绘图框架。GEF**不需要**使用 EMF 作为其模型，您可以使用任何您喜欢的模型，但是由于 EMF 生成了您通常需要执行 MVC 的代码，因此非常有用。
3.  GMF - 图形建模框架 - 是建立在 EMF 和 GEF 之上的框架。基本上，您创建域模型和视图模型，GMF 生成编辑器的所有代码。

我在 GEF 和 EMF 工作了一年，取得了很好的成果。几个星期以来，我尝试使用 GMF，但无法理解那里的工作原理——学习曲线非常陡峭。我在 GEF 上写了一组[教程](http://www.vainolo.com/tutorials/gef-tutorials/)，并邀请您查看它们。

# windows-installer - 我一直在使用 exe 安装程序进行安装，并想更改为 Wix

> ID：11666318
> 
> 赞同：0
> 
> 时间：2012-07-26T09:28:56.743
> 
> 标签：windows-installer

我一直在使用 exe 安装程序进行安装，并想更改为 Wix。这意味着用户已经安装了许多应用程序实例，但没有一个使用 Windows Installer。

更改为 Windows Installer 时是否需要注意任何问题？例如，在安装/升级在 WI 之前安装的应用程序时，WI 会做什么？我需要担心吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:42:54.453

您需要检测用户是否有以前的安装，然后触发卸载过程，或阻止应用程序安装。当我以前不得不这样做时，我只是使用启动条件来检测以前的安装，并显示一条消息，要求用户在继续之前通过控制面板卸载旧版本 - 这不是最好的用户体验，但它是最可靠的解决方案。

# php - PHP 电子邮件到垃圾邮件

> ID：11666323
> 
> 赞同：0
> 
> 时间：2012-07-26T09:29:02.330
> 
> 标签：php, email, header, spam

我正在尝试向新注册用户发送电子邮件以进行电子邮件验证（PHP），但我不明白，为什么会向垃圾邮件发送电子邮件，我已经检查了类似的问题，所有答案都是关于标题的，

让我知道这些标题似乎有点复杂，它们是如何
通过发件人网站验证的？假设我以 user@google.com 的身份发送，实际的服务器域是 domain.com，它怎么知道？它是垃圾邮件的主要原因之一吗？
我正在使用VPS，它与它有什么关系？
我只是想了解为什么将电子邮件检查为垃圾邮件

以及如果我从服务器 IP 而不是域本身发送的明确/简单原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:37:58.363

大多数邮件服务器都会进行[反向 DNS 查找](http://en.wikipedia.org/wiki/Reverse_DNS_lookup)，以防止来自 domain.com 的人假装来自 otherdomain.com。它将检查发送电子邮件的 IP 地址是否解析为与电子邮件发件人相同的域名。雅虎等大公司也会使用[DKIM](http://en.wikipedia.org/wiki/DomainKeys_Identified_Mail)来验证你。

如果您的邮件内容不多，或者您向一台服务器发送了很多相同的内容，您的邮件通常会以批量/垃圾邮件告终。

这是一篇很好的文章，介绍[了 Web 开发人员应该了解的有关发送电子邮件](http://www.diaryofaninja.com/blog/2011/09/27/what-all-good-web-developers-should-know-about-sending-email/)的知识，这可能有助于您理解该主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:37:31.483

1）检查标题。您可以使用任何电子邮件发送库，例如 PHPMailer (http://code.google.com/a/apache-extras.org/p/phpmailer/wiki/PHPMailer#Documentation_and_Resources)

2) 检查托管服务器。如果您使用的是共享主机，那么很可能它已被电子邮件域列入黑名单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:53:51.063

**在您的域**上配置一个电子邮件地址，用您在**您的域**`me@mydomain.com`上新创建的电子邮件地址和以下脚本中的 Hotmail/Gmail id 替换。**`id@hotmailOrgmail.com`**

 **`Your Name`还要在以下脚本中替换为您的姓名并在您的服务器上进行测试：

```
<?php

    $myName = "Your Name";
    $myEmailAddressonDomain = "me@mydomain.com";
    $myPreferredEmailAddresson  = "id@hotmailOrgmail.com";
    $mail = $_POST['email_field'];
    $clientName = $_POST['name_field'];
    $subject = $_POST['subject_field'];
    $text = $_POST['message_field'];

    $headers = 'From: "$name" <$yourEmailAddressonDomain>'.PHP_EOL.'Reply-To: '.$_POST['mail'].PHP_EOL;
    $to = '"$yourname" <$myPreferredEmailAddresson>';
    $message = $text.PHP_EOL.PHP_EOL."---".PHP_EOL."From: ".$name." <".$mail.">";

    /* Server-side form validations */
    $err = "Error with ";

    if (!checkLen($name)) {
        $err.='Name';
    } else if (!checkLen($mail) && !checkEmail($mail)) {
        $err.='Email';
    } else if (!checkLen($subject)) {
        $err.='Subject';
    } else if (!checkLen($text)) {
        $err.='Message';
    }

    if (strlen($err)>11) {
        echo $err.' field';
        exit;
    }
    /* end validations */

    elseif (mail($to, $subject,$message, $headers)) {
        echo "<span style='color: #336600'>Your message has been sent.</span>";
    } else {
        echo "An error occurred, please try again.";
    }

    function checkLen($str,$len=1)
    {
        return isset($str) && mb_strlen(strip_tags($str),"utf-8") > $len;
    }

    function checkEmail($str)
    {
        return preg_match("/^[\.A-z0-9_\-\+]+[@][A-z0-9_\-]+([.][A-z0-9_\-]+)+[A-z]{1,4}$/", $str);
    }

?> 
```

**该电子邮件将通过您域的电子邮件地址**到达您的 Hotmail/Gmail 收件箱（或任何非垃圾邮件）文件夹。

**注意：在收到的电子邮件中** *单击**回复**将显示客户的电子邮件地址（正如我们在`Reply-To`上面的标题中设置的那样）*

进行适当的更改，您就可以开始了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T12:42:16.173

当您使用 VPS 时，您可以考虑在您的服务器上设置[DKIM](http://www.dkim.org/)和[SPF](http://www.openspf.org/)，它们会被 Gmail 等邮件服务用来将您的服务器归类为合法服务器。**

# javascript - 如何在jqgrid中将一个单元格分成2个？

> ID：11666326
> 
> 赞同：4
> 
> 时间：2012-07-26T09:29:08.827
> 
> 标签：javascript, jquery, jqgrid

有可能通过jqgrid得到这样的设计吗

```
 ------------------------------- ----------
   | S.N0 | order ID   |   Date  |   Amount |
            ---------    -------
   |      | Location   |   Status|          |
    ------------------------------ ---------
   |   1  |  45        |  1/1/11 |  100     |
            ---------    -------- 
   |      |  E123      |   Done  |          |
    ------------------------------ ---------- 
```

在 2X2（第二列，第二行）中，我需要显示订单 ID 和位置。位置值应显示在订单 ID 下。有可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T12:39:29.217

对于该列，您可以定义一个自定义格式化程序，您将能够对其应用任何您喜欢的样式。在该格式化程序中，您可以访问该行中所有对象的值。因此，对于您的订单/位置格式化程序，您可以像这样将两者结合起来：

```
function orderFmatter( cellvalue, options, rowObject )
{
    return "<div>" + cellvalue + "</div><hr /><div>" 
               + rowObject.Location + "</div>";
} 
```

您可能希望向这些 div 添加类，以便您可以更好地设置样式以满足您的需求。至于您的列定义，您需要在其中一列上声明 customFormatter （*注意：声明它的那一列将是上面函数中的变量 cellvalue*），然后需要隐藏另一列需要作为 rowObject 的一部分。前任。

```
{
    name: 'OrderID',
    index: 'OrderID',
    width: 90,
    formatter:orderFmatter},
{
    name: 'Location',
    index: 'Location',
    hidden: true}, 
```

这是我的全部示例：

```
$("#grid").jqGrid({
    datatype: "local",
    height: 250,
    colNames: ["SNO", "OrderID", "Location", "Date", "Status", "Amount"],
    colModel: [{
        name: 'SNO',
        index: 'SNO',
        width: 60},
    {
        name: 'OrderID',
        index: 'OrderID',
        width: 90,
        formatter:orderFmatter},
    {
        name: 'Location',
        index: 'Location',
        hidden: true},
    {
        name: 'Date',
        index: 'Date',
        width: 80,
        formatter:dateStatusFmatter},
    {
        name: 'Status',
        index: 'Status',
        width: 80,
        hidden: true},
    {
        name: 'Amount',
        index: 'Amount',
        width: 80}
    ],
    caption: "Stack Overflow Example",
});

function orderFmatter( cellvalue, options, rowObject )
{
    return "<div>" + cellvalue + "</div><hr /><div>" + rowObject.Location + "</div>";
}

function dateStatusFmatter( cellvalue, options, rowObject )
{
    return "<div>" + cellvalue + "</div><hr /><div>" + rowObject.Status+ "</div>";
} 
```

小提琴也可以[在这里找到](http://jsfiddle.net/fbfcn/5yqRn/1/)。

这只会留下你的标题，这有点困难并且可能会变得丑陋。我建议不要在标题上进行拆分级别并执行类似`Order Id/Location`. 可以通过这样做来设置：

```
jQuery("#grid").jqGrid('setLabel', 'OrderID', 'Order Id/Location'); 
```

就像在这个[小提琴](http://jsfiddle.net/fbfcn/5yqRn/2/)中一样。

If you absolutely have to set the header like in your example, I can see what I can figure out, but this should get you started.

# android - 安卓按钮绿色

> ID：11666329
> 
> 赞同：4
> 
> 时间：2012-07-26T09:29:27.983
> 
> 标签：android, button, android-button

我想要默认按钮，但不是灰色的。

我需要改变颜色绿色/蓝色/红色。

我想通过 xml 和代码来做到这一点。

我需要一个绿色按钮来改变所有其他按钮的颜色。

这就是为什么我需要从 xml 和代码更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:03:22.450

在颜色资源中定义颜色，以便更容易通过代码或 xml 应用所需的颜色。

# paging - Google 文档提要中的分页

> ID：11666331
> 
> 赞同：0
> 
> 时间：2012-07-26T09:29:35.203
> 
> 标签：paging, google-docs-api

嗨，我正在使用 google doc list api 3.0 版。我正在尝试获取 20 个文档块中的文档列表，即带有 20 条记录的分页。但我没有找到办法做到这一点。有没有办法做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:59:24.630

您可以使用`max-results`来限制要为每个请求检索的结果数量：

[https://developers.google.com/google-apps/documents-list/#getting_a_list_of_documents_and_files](https://developers.google.com/google-apps/documents-list/#getting_a_list_of_documents_and_files)

# r - R：在 addtable2plot{plottrix} 中抑制轴

> ID：11666335
> 
> 赞同：0
> 
> 时间：2012-07-26T09:29:42.970
> 
> 标签：r

我正在尝试将表格添加到带有`addtable2plot()`. 但我遇到了一个特殊的问题，即。它覆盖了`plot()`. 如果我做：

```
plot(seq(1:10), axes=F) 
```

不打印轴标签、刻度等。但是，如果我再添加：

```
addtable2plot(x=.8*max(axis(1)), y=.7*max(axis(2)), data.frame(matrix(1:9, nrow=3))) 
```

轴等自动打印。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:36:07.160

那是因为你打电话给`axis()`. 改为使用`axTicks(1)`。

# rss - drupal 7中的RSS提要

> ID：11666336
> 
> 赞同：0
> 
> 时间：2012-07-26T09:29:45.417
> 
> 标签：rss, drupal-7

我的观点中有 RSS 提要。但是为什么 rss 没有显示我选择的所有字段。Feed 仅显示标题。这是 rss.xml 的代码

```
<?xml version="1.0" encoding="utf-8" ?> <rss version="2.0" xml:base="http://localhost/plasma/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:yandex="http://news.yandex.ru" xmlns:media="http://search.yahoo.com/mrss/"> <channel> <title>Репортажи</title>
 <link>http://localhost/plasma/</link>
 <atom:link rel="self" href="http://localhost/plasma/reports/rss.xml" />
 <item> <title>&lt;a href=&quot;/plasma/node/40&quot;&gt;Lorem ipsum dolor sit amet&lt;/a&gt;</title>
 <source url="http://localhost/plasma/reports/rss.xml">Репортажи</source>
 <yandex:full-text>&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum&lt;/p&gt;
</yandex:full-text>
 <yandex:genre> &amp;nbsp;&lt;a href=&quot;/plasma/taxonomy/term/3&quot; typeof=&quot;skos:Concept&quot; property=&quot;rdfs:label skos:prefLabel&quot;&gt;tag1&lt;/a&gt;, &lt;a href=&quot;/plasma/taxonomy/term/4&quot; typeof=&quot;skos:Concept&quot; property=&quot;rdfs:label skos:prefLabel&quot;&gt;tag2&lt;/a&gt;, &lt;a href=&quot;/plasma/taxonomy/term/5&quot; typeof=&quot;skos:Concept&quot; property=&quot;rdfs:label skos:prefLabel&quot;&gt;tag3&lt;/a&gt;</yandex:genre>
</item>
 <item> <title>&lt;a href=&quot;/plasma/node/39&quot;&gt;Lorem ipsum dolor sit amet&lt;/a&gt;</title>
 <source url="http://localhost/plasma/reports/rss.xml">Репортажи</source>
 <yandex:full-text>&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.&lt;/p&gt;
</yandex:full-text>
 <yandex:genre> &amp;nbsp;</yandex:genre>
</item>
</channel>
</rss> 
```

有什么想法有什么问题吗？

Ps 我使用 Yandex 元素，以适应 yandex 对 RSS 的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:51:59.413

也许饲料被chached？你试过清除缓存吗？

# javascript - jQuery 脚本无法在 IE 上正确运行

> ID：11666342
> 
> 赞同：0
> 
> 时间：2012-07-26T09:29:50.737
> 
> 标签：javascript, jquery, internet-explorer, cross-browser

我对 Internet Explorer 有一个奇怪的问题，我编写了一个导航代码，它在 Chrome 和 FF 上运行良好，它在 IE 中运行了一半（不知道如何）。所以这是我的问题

当我将鼠标悬停在链接上时，会打开一个大型菜单并删除当前锚点和前一个锚点的右边框。（见下图）

![http://s11.postimage.org/7vwtigsxv/nav.png](../Images/c0a77c56bdf9dd9cbf36932e2b040770.png)

这就是我将鼠标悬停在链接上时的样子（我设法让它在所有浏览器上工作：Chrome、FF、Safari 和 IE 6-9

![http://s11.postimage.org/9c8c0lvur/nav_hover.png](../Images/0bdda7766681d519e8d7860b801021e3.png)

当我将鼠标悬停在链接之外时，问题就出现了，如果我将鼠标悬停在上面，边框将毫无问题地返回，但是当我向下悬停时，上一个链接的右边框不会返回（见下图）

我将在评论中包含第三张图片，因为我不能发布超过 2 个链接。

这是我在 jQuery 中编写的代码

```
$(".menu li").hover(
  function () {
    var result = $(this).index();           
    var item = $('a.mainnav')[result - 1];

    $(this).addClass("hover");
    $(this).find('a.mainnav').css('border-right','none');
    $(this).parent().find(item).css('border-right','none');
  },
  function () {
    var result = $(this).index();           
    var item = $('a.mainnav')[result - 1];

    $(this).removeClass("hover");
    $(this).find('a.mainnav').css('border-right','1px solid #000');
    $(this).parent().find(item).css('border-right','1px solid #000');
  }
); 
```

有谁知道为什么会发生这个问题？

ps对不起，我不能直接发布图片，因为我是新人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:54:45.357

我对您的代码进行了一些重构。离开悬停状态时；`a.mainnav`您可以从所有元素中删除右边框样式吗？他们会回到你的 CSS 定义。

```
$(".menu li").hover(
  function () {         
    var item = $('a.mainnav')[$(this).index() - 1];

    $(this).addClass("hover");
    $(this).find('a.mainnav').css('border-right','none');
    item.css('border-right','none');
  },
  function () {    
    $(this).removeClass("hover");
    $(item).find('a.mainnav').css('border-right','');
  }
); 
```

# perl - 如何按天拆分 Dancer 错误日志？

> ID：11666346
> 
> 赞同：3
> 
> 时间：2012-07-26T09:29:55.077
> 
> 标签：perl, logging, dancer

我正在尝试为我的网站使用 dancer 和 starman。我成功地将错误日志设置到文件中。当然，我可以每天运行一个脚本来移动错误日志。但我只想知道是退出方法还是cpan模块来解决问题。谢谢~

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T09:36:47.257

不要重新发明轮子，你会重复过去已经修复的错误。

使用[logrotate](http://linuxcommand.org/man_pages/logrotate8.html)。它是专门用于此类任务的 unix 工具。

要轮换您的日志，您通常会在`/etc/logrotate.d/`.

例如，每天轮换并将日志保存 14 天：

```
# /etc/logrotate.d/dancer-error-log

/path/to/my/dancer-error.log {
    daily
    rotate 14
    create 0660 mydanceruser mydancergroup
} 
```

# gstreamer - gstreamer mp3 解复用器

> ID：11666347
> 
> 赞同：2
> 
> 时间：2012-07-26T09:29:59.783
> 
> 标签：gstreamer

任何想法应该为 mp3 使用什么解复用器？我试图实现用于播放 mp3 的[hello world](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/manual/html/chapter-helloworld.html)程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:13:25.623

mp3 流通常不被混合。您将使用比特流解析器（例如 mp3parse），然后使用 mp3decoder（例如 mad）。

# android - 如何防止我的观点被重绘

> ID：11666348
> 
> 赞同：0
> 
> 时间：2012-07-26T09:30:01.673
> 
> 标签：android

我有一个简单的应用程序。当方向改变时，我更希望视图保持原样。我怎样才能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:31:05.167

添加`android:configChanges="keyboardHidden|orientation"`到清单文件中的活动..

```
 <activity
        android:name="..." android:configChanges="keyboardHidden|orientation">
</activity> 
```

并阅读[处理运行时更改](http://developer.android.com/guide/topics/resources/runtime-changes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:33:46.117

除了@Nunu 的回答，您可能希望覆盖`onConfigurationChanged(...)`以对您的视图进行任何必要的更改。

您还可以在清单中将活动锁定为纵向或横向。

编辑

要锁定纵向，请在清单中声明您的活动，如下所示：

```
<activity
    android:name="com.yourpackage.YourActivity"
    android:screenOrientation="portrait" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:38:41.997

您应该在您的 android-sdk-windows /samples 目录中检查“Multiresolution”的示例应用程序

# spring-mvc - Spring MVC 3.1.1 和 JBoss 7.1 无法让静态内容工作

> ID：11666350
> 
> 赞同：1
> 
> 时间：2012-07-26T09:30:05.410
> 
> 标签：spring-mvc, jboss, static-content

我正在使用安装了 JBoss 支持的 Eclipse，并将 JBoss 7.1 设置为我选择的服务器。

在我的 Spring MVC 应用程序中，我具有以下结构

```
 main/webapp/resources/static/{css,img,js}
    main/webapp/WEB-INF/classes/messages_XX.properties
    main/webapp/WEB-INF/jsp/<name>.jsp 
```

我的 dispatcher-context.xml 包含以下内容

```
 <mvc:annotation-driven />
    <context:component-scan base-package="com.springmvc.test" />
    <mvc:resources mapping="/resources/**" location="/resources" /> 
```

它不起作用

我尝试过使用不同的路径到达内容：

```
 <ip>:8080/test/resources/static/img/logo.png
    <ip>:8080/resources/static/img/logo.png
    <ip>:8080/test/static/img/logo.png 
```

但它总是返回 404，例如

```
 HTTP Status 404 - /resources/static/img/logo.png
    type Status report
    message /resources/static/img/logo.png
    description The requested resource (/resources/static/img/logo.png) is not available.
    JBoss Web/7.0.13.Final 
```

我已经环顾四周并尝试了不同人提到的不同选项，但没有一个有效。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:07:21.383

已修复，令人惊讶的是，它在再次从头开始重新创建上下文 xml 后起作用（并且可能修复了拼写错误）

变化：

调度程序-servlet.xml

```
 <mvc:resources mapping="/resources/**" location="/resources" />
    to
    <mvc:resources mapping="/resources/**" location="/resources/" /> 
```

*.jsp 使用 jstl "c" 而不是 spring

```
 <c:url value="/resources/static/css/bootstrap.min.css" />
    instead of
    <spring:url value="/resources/static/css/bootstrap.min.css" /> 
```

但是我认为这是使它起作用的第一个更改。

# android - 用于输入数字的小部件（附截图）

> ID：11666352
> 
> 赞同：0
> 
> 时间：2012-07-26T09:30:10.403
> 
> 标签：android, android-widget

我喜欢 Libra 的 UI（这是一个用于跟踪体重的应用程序）。

我很想使用类似的小部件来输入数字。我一直找不到任何看起来像它的东西。它是为这个应用程序定制的还是来自一些 UI 工具包？

![用于在 Libra 中输入数字的小部件](../Images/48aecb45d569e5a6c4a8e7594432207a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:22:06.467

没有人回答，所以我自己回答。

在做了一些研究之后，我看到图像中的小部件是使用[Gallery](http://developer.android.com/reference/android/widget/Gallery.html)实现的。由于不应再使用 Gallery，我认为可以改用[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)。

# asp.net - 检查 URL 是否存在或在 asp.net 中抛出找不到页面的消息

> ID：11666353
> 
> 赞同：1
> 
> 时间：2012-07-26T09:30:13.630
> 
> 标签：asp.net, validation, http, url, web

我想验证一个 url，它是否存在或抛出页面未找到错误。任何人都可以帮助我如何在 asp.net 中做到这一点。例如，我的网址可能是类似的`http://www.stackoverflow.com`，`www.google.com`即它可能包含`http://`也可能不包含。当我检查时，它应该返回网页有效（如果存在）或页面未找到（如果不存在）

我尝试`HttpWebRequest`了方法，但它需要“ `http://`”在网址中。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T09:49:34.777

```
protected bool CheckUrlExists(string url)
    {
        // If the url does not contain Http. Add it.
        if (!url.Contains("http://"))
        {
            url = "http://" + url;
        }
        try
        {
            var request = WebRequest.Create(url) as HttpWebRequest;
            request.Method = "HEAD";
            using (var response = (HttpWebResponse)request.GetResponse())
            {
                return response.StatusCode == HttpStatusCode.OK;
            }
        }
        catch 
        {
            return false;
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T09:38:12.700

尝试这个

```
using System.Net;
////// Checks the file exists or not.

bool FileExists(string url)
{
   try
   {
        //Creating the HttpWebRequest
        HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;

        //Setting the Request method HEAD, you can also use GET too.
        request.Method = "HEAD";

        //Getting the Web Response.
        HttpWebResponse response = request.GetResponse() as HttpWebResponse;

        //Returns TURE if it Exist
       return (response.StatusCode == HttpStatusCode.OK);
    }
  catch
   {
        //Any exception will returns false. So the URL is Not Exist
        return false;
   }
} 
```

希望我有所帮助

# java - 如何执行 java -Xmx512m -jar a.jar yourfile.txt。来自eclipse的命令

> ID：11666355
> 
> 赞同：1
> 
> 时间：2012-07-26T09:30:14.247
> 
> 标签：java, eclipse

1.>如何执行java -Xmx512m -jar a.jar yourfile.txt。来自日食@junit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:44:57.613

您需要使用`java -jar`命令运行它。为了做到这一点：

前往`Run`> `External Tools`>`External tools Configurations`

```
Create new item under "Program" 
```

填写以下内容。

```
Location: <JAVA_HOME>/bin/java 

Working directory: The working directory for your jar program (might be it's location)

Arguments: -Xmx512m -jar a.jar yourfile.txt. 
```

# java - 如何获取正则表达式匹配的组值

> ID：11666356
> 
> 赞同：58
> 
> 时间：2012-07-26T09:30:14.980
> 
> 标签：java, regex

我有以下代码行

```
String time = "14:35:59.99";
String timeRegex = "(([01][0-9])|(2[0-3])):([0-5][0-9]):([0-5][0-9])(.([0-9]{1,3}))?";
String hours, minutes, seconds, milliSeconds;
Pattern pattern = Pattern.compile(timeRegex);
Matcher matcher = pattern.matcher(time);
if (matcher.matches()) {
    hours = matcher.replaceAll("$1");
    minutes = matcher.replaceAll("$4");
    seconds = matcher.replaceAll("$5");
    milliSeconds = matcher.replaceAll("$7");
} 
```

我使用`matcher.replace`正则表达式组的方法和反向引用来获取小时、分钟、秒和毫秒。有没有更好的方法来获得正则表达式组的价值。我试过了

```
hours = matcher.group(1); 
```

但它会引发以下异常：

```
java.lang.IllegalStateException: No match found
    at java.util.regex.Matcher.group(Matcher.java:477)
    at com.abnamro.cil.test.TimeRegex.main(TimeRegex.java:70) 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-07-26T09:34:49.997

如果您避免调用`matcher.replaceAll`. 当您调用`replaceAll`它时，它会忘记任何以前的匹配项。

```
String time = "14:35:59.99";
String timeRegex = "([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])(?:\\.([0-9]{1,3}))?";
Pattern pattern = Pattern.compile(timeRegex);
Matcher matcher = pattern.matcher(time);
if (matcher.matches()) {
    String hours = matcher.group(1);
    String minutes = matcher.group(2);
    String seconds = matcher.group(3);
    String miliSeconds = matcher.group(4);
    System.out.println(hours + ", " + minutes  + ", " + seconds + ", " + miliSeconds);
} 
```

请注意，我还对您的正则表达式进行了一些改进：

*   `(?: ... )`对于您对捕获不感兴趣的组，我使用了非捕获组。
*   我已经更改了与仅匹配点的`.`任何字符`\\.`匹配的字符。

在线查看它：[ideone](http://ideone.com/YeL7Z#view_edit_box)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-26T09:38:03.853

如果您`matcher.find()`在调用组函数之前使用它，它会起作用。

# javascript - 为双方的文本提供相等的边距

> ID：11666357
> 
> 赞同：1
> 
> 时间：2012-07-26T09:30:17.193
> 
> 标签：javascript, jquery, html, css

当我在 div 中写一些内容时，它显示为![在此处输入图像描述](../Images/4699e188e0312d435db70e5763bda037.png)

但我希望它从右边以相等的边距显示![在此处输入图像描述](../Images/d37ed5ecd556a66ebec00f6c5802a626.png)

我尝试了边距、填充和所有解决方案，但没有任何效果。那么如何实现这一点以使网页看起来不错？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T09:31:01.027

你有没有尝试过：

`text-align: justify`

```
HTML:

<p class="info">
This is a long piece of text that doesn't make sense 
yet you are still reading it up to this point and even up 
to now and more.
</p>

CSS:

p.info { text-align: justify } 
```

# c# - 用户离开页面时如何将会话中的变量设置为空

> ID：11666361
> 
> 赞同：0
> 
> 时间：2012-07-26T09:30:24.137
> 
> 标签：c#, asp.net, session

我想将会话中的一个变量设置为空

```
Session["my_variable"] = null; 
```

我尝试过这样的 OnUnload

```
protected override void OnUnload(EventArgs e)
    {
        base.OnUnload(e);

       Session["my_variable"] = null;
    } 
```

但它不能正常工作，它会在用户在页面上时设置变量，但我想将其设置为 null whet is leave page

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:03:36.340

一旦将页面提供给客户端，您的函数/事件就会被触发，因为它是服务器端事件。您可能会使用 Viewstate，但它仍然无法实现，因为导航不会向服务器发送任何事件，而客户端脚本可以提供帮助。

此功能可以通过 java 脚本 on-unload 事件来实现。您必须向服务器发送请求以在特定会话值中删除或放置 null （因为会话是键值对象）。
您的问题在[Asp 论坛上得到了最好的解释](http://forums.asp.net/t/1202732.aspx)

但小心点。此事件可能仅在某些浏览器导航时触发。你可能需要做一些代码工作来实现你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:34:35.690

为什么不使用 ViewState 代替会话变量。

离开页面后，viewstate 变量会自动被删除

这是如何使用它的示例

```
protected DataSet MyDataSet
{
    get
    {
        if(ViewState["MyDataSet"] == null)
        {
            return null;
        }
        else
        {
            return (DataSet)ViewState["MyDataSet"];
        }
    }
    set
    {
        ViewState["MyDataSet"] = value;
    }
} 
```

# clojure - Clojure 编译问题

> ID：11666364
> 
> 赞同：2
> 
> 时间：2012-07-26T09:30:30.940
> 
> 标签：clojure

为什么下面的代码编译不通过？

```
(defn testit [asym] (var asym)) 
```

错误是：

```
CompilerException java.lang.RuntimeException: Unable to resolve var: asym in this context, compiling:(NO_SOURCE_PATH:1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:35:48.597

`asym`没有 a `var`，它是本地的；在这种情况下，您定义为`testit`var 值的函数的唯一参数。

如果你想`asym`从那个函数返回：

```
(defn testit [asym] asym) 
```

如果`asym`是一个符号，它命名一个你想返回的 var，然后使用`resolve`：

```
(defn testit [asym] (resolve asym)) 
```

总注：是对应读者语法`(var x)`的扩展[特殊形式](http://clojure.org/special_forms#var)`#'x`。

# visual-studio-2010 - 带有实体框架 5/Visual Studio 2010 的 EDMX 中的表值函数

> ID：11666371
> 
> 赞同：2
> 
> 时间：2012-07-26T09:31:03.857
> 
> 标签：visual-studio-2010, .net-4.0, visual-studio-2012, .net-4.5, entity-framework-5

是否可以在带有 Entity Framework 5 RC / Visual Studio 2010 的 EDMX 中使用表值函数？

我在 EDMX 设计器中看不到该选项，我感觉设计器在 .net 4.5 中？我的怀疑正确吗？或者也许在 Visual Studio 11 中？

我还不能将我们的项目升级到 .net 4.5，还有另一种使用表值函数的方法（也许手动修改 edmx？）。

附加信息：

msdn 上的这篇[博文有助于确认不兼容性：](http://blogs.msdn.com/b/adonet/archive/2012/05/15/ef5-release-candidate-available-on-nuget.aspx)

> 某些功能仅在编写面向 .NET 4.5 的应用程序时可用。这包括枚举支持、空间数据类型、表值函数和性能改进。如果您的目标是 .NET 4.0，您仍然可以获得所有错误修复和其他小的改进。

然而有趣的是，[本教程](http://blogs.msdn.com/b/efdesign/archive/2011/01/21/table-valued-function-support.aspx)讨论了直接修改 EDMX 以添加对 TVF 的支持，但它似乎是针对旧的测试版。XML 智能感知也没有找到教程中讨论的元素，但这可能是因为它使用了不同的模式。**不幸的是，我已经没有时间尝试将本教程应用于新的 EF5 候选版本，但我很想知道是否有人运气好。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T10:31:03.273

不幸的是，表值函数支持目前依赖于 .NET 4.5 和 VS 2012。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:29:49.413

我一直在使用[这种方法](http://www.codeproject.com/Articles/96457/Defining-Custom-Functions-in-Entity-Framework)来使用 EF 4 中的表值函数。基本上它包括手动编辑 EDMX 文件。这种方法的缺点是每次更新模型时都需要手动编辑文件。

# scala - Scala 外部 => 语法

> ID：11666374
> 
> 赞同：5
> 
> 时间：2012-07-26T09:31:08.663
> 
> 标签：scala

> **可能重复：**
> [“外部=>”的真正含义是什么？](https://stackoverflow.com/questions/4353915/what-does-outer-really-mean)

我可以在哪里找到有关信息

```
trait After extends Context { outer => xxx
//...
} 
```

**外部 =>**是什么意思？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T09:50:27.257

这是一种自我类型。您还可以添加类型注释以强制将您的特征扩展为某种类型的类。但是没有类型它只是一个引用`this`（并且被称为自引用），所以你可以在内部类等中使用它。例如：

```
class MyOuter { outer =>
  // this == outer
  class MyInner {
    // this != outer
    def creator = outer
  }
} 
```

例如，我提到的其他用法可用于向现有类添加特殊行为：

```
class MyClass {
  val foo = "foo"
}

trait MyClassExtension { this: MyClass =>
  def fooExtended(s: String) = foo + s
}

scala> val x = new MyClass with MyClassExtension
x: MyClass with MyClassExtension = $anon$1@5243618

scala> x.fooExtended("bar")
res3: java.lang.String = foobar 
```

这里的`this: MyClass =>`意思是，`MyClassExtension`只能混入`MyClass`.

```
scala> class OtherClass
defined class OtherClass

scala> val x = new OtherClass with MyClassExtension
<console>:11: error: illegal inheritance;
 self-type OtherClass with MyClassExtension does not conform to MyClassExtension's selftype MyClassExtension with MyClass
       val x = new OtherClass with MyClassExtension 
```

# xcode - Xcode：升级到 Xcode 4.4 后如何恢复 4.3 模拟器？

> ID：11666375
> 
> 赞同：4
> 
> 时间：2012-07-26T09:31:08.063
> 
> 标签：xcode, ios-simulator

> **可能重复：**
> [如何在 Mountain Lion 上将 Simulator SDK 4.3 安装到 Xcode 4.4](https://stackoverflow.com/questions/11651773/how-to-install-simulator-sdk-4-3-to-xcode-4-4-on-mountain-lion)

我刚刚升级到 OSX 10.8 和 Xcode 4.4，然后我发现 4.3 模拟器消失了，很可能苹果没有提供安装它的链接。有什么技巧可以让 4.3 模拟器恢复正常吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T16:31:01.023

**更新**：此解决方案不再适用于 Mountain Lion。如果您必须支持 4.x，我建议您不要升级到 ML 并坚持使用 Lion 和 Xcode 4.3.3。但是，我想现在为时已晚，因为您已经在这里并正在阅读此内容。
Xcode 4.3.3 在 Mountain Lion 中不起作用。

~~如果您希望 4.x 模拟器回到 Xcode 4.4，您必须执行以下操作：~~

~~*   从[https://developer.apple.com/downloads/](https://developer.apple.com/downloads/)下载**Xcode 3.2.6 和 iOS SDK 4.3**（您必须是 Apple 开发人员才能访问该区域）*   挂载 .dmg 文件*   在磁盘内部应该有一个不可见的“Packages”文件夹。要打开它，请使用 shift + cmd + G（转到文件夹）并输入“/Volumes/Xcode and iOS SDK/Packages/”*   在临时文件夹中安装 iPhoneSimulatorSDK4_x.pkg*   安装后转到您的临时文件夹，您会找到一个 iPhoneSimulator4.x.sdk 文件*   打开一个新的 Finder 窗口并导航到“/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform”（您可以使用与上述相同的命令执行此操作，shift + cmd + G）*   将 iPhoneSimulator4.x.sdk 从临时文件夹拖到 Xcode 包的 SDKs 文件夹中。~~
*   ~~重启 Xcode 并删除你的临时文件夹~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T16:28:45.123

Xcode 4.4 通过策略放弃了模拟器 4.3。它不再在下载中。它确实提供了 iOS 3.0-3.2.2 和 iOS 4.0-4.1 的调试

# android - 在Android中同时播放多个视频和声音

> ID：11666380
> 
> 赞同：1
> 
> 时间：2012-07-26T09:31:23.880
> 
> 标签：android, video-streaming

安卓可以同时播放多个视频吗？其中一个视频可能更大，而其他视频在缩略图中但仍在播放内容，然后选择缩略图视频会放大该视频，同时将主要播放视频缩小为缩略图。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:46:52.763

有可能做到这一点。我认为您必须自己玩多个 SurfaceViews（视频渲染）和 AudioTracks（音频渲染）。

# jquery - 使用 jquery 选择文档根目录

> ID：11666385
> 
> 赞同：22
> 
> 时间：2012-07-26T09:31:27.290
> 
> 标签：jquery, html, jquery-selectors, document-root

我可以使用选择文档的正文和 html 部分

```
$('body') 
```

和

```
$('html') 
```

分别，但是如何选择文档根目录？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-26T09:33:45.290

不知道你的意思，但要选择你做的文件

```
$(document); 
```

要获取文档的内容，我猜您需要 documentElement，它与`<html>`大多数环境中的标签相同。

```
$(document.documentElement); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-25T10:17:46.113

DOM 的根始终是`html`元素。
您可以使用`$('html')`或获取它`$(':root')`。

以下断言应始终为真：

```
$('html')[0] === $(':root')[0]
$(':root')[0] === document.documentElement 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T09:57:18.147

Document 接口继承自 Node，表示整个文档，例如 HTML 页面。尽管 Document 节点在概念上是文档的根，但它实际上并不是根 - 根节点是 Document 中的第一个 Element 节点，并由其 documentElement 属性表示。

您可以使用以下代码选择 documentElement：

```
var root = document.documentElement; 
```

或者

```
$(document.documentElement); 
```

# coffeescript - 让 emberjs 入门套件与 coffeescript 一起工作

> ID：11666390
> 
> 赞同：4
> 
> 时间：2012-07-26T09:31:42.117
> 
> 标签：coffeescript, ember.js

我正在尝试让 ember.js 的入门套件示例直接与用 coffeescript 编写的应用程序一起工作（使用[http://coffeescript.org/extras/coffee-script.js](http://coffeescript.org/extras/coffee-script.js)）。我想在开发环境中使用它，而无需先将 coffescript 转换为 javascript（手动或使用 jitter 等工具）。

基本上我只是换了行

```
<script src="js/app.js"></script> 
```

用线条

```
<script src="js/libs/coffee-script-1.3.3.min.js"></script>
<script type="text/coffeescript" src="coffee/app.coffee"></script> 
```

在 index.html 中

我所做的所有更改都可以在我的 github 上的 fork 中找到，网址为[https://github.com/GordonSchmidt/starter-kit](https://github.com/GordonSchmidt/starter-kit)

coffescript 本身似乎很好，因为当我首先将它转换为 javascript 时，starter-kit 应用程序可以使用这个 javascript。但是当我直接使用coffeescript时，它会在ember-0.9.8.1.js的第45行抛出错误“断言失败：无法在路径'App.MyView'中找到视图”。coffee-script.js 本身似乎也能正常工作（参见 demo.html）。所以必须是ember.js和coffee-script.js之间的冲突。

但我找不到这个错误。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T09:49:57.567

来自咖啡脚本.org

> 关于 CoffeeScript 的常见警告适用——您的内联脚本将在闭包包装器中运行，因此如果您想公开全局变量或函数，请将它们附加到 window 对象。

你的咖啡脚本应该是这样的：

```
<script type="text/coffeescript">
    window.App = App = Em.Application.create()

    App.MyView = Em.View.extend(
      mouseDown: -> window.alert "hello world!"
    )​
</script> 
```

看[这里](http://jsfiddle.net/kcjzw/253/)的小提琴

# iphone - performSegueWithIdentifier 不起作用

> ID：11666391
> 
> 赞同：0
> 
> 时间：2012-07-26T09:31:48.593
> 
> 标签：iphone, ios, user-interface, segue

当我点击一个按钮时，我运行了这段代码：

```
[self performSegueWithIdentifier:@"services" sender:self];
NSLog(@"ButtonClicked"); 
```

每次按下按钮时，我都会看到日志消息出现，但**segue 没有激活**。

在我的故事板文件中，我有一个名为*services*的 segue，这就是我要激活的 segue。

知道我哪里出错了吗？

* * *

**编辑** 按钮位于标签栏控制器内，这会影响事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:03:12.050

对于推送，您需要将源视图控制器嵌入导航控制器中。您可以按如下方式执行此操作：

> 选择您的源视图控制器，转到编辑器并选择嵌入 -> 导航控制器。

# macvim - MacVim + 山狮，添加字体间距

> ID：11666394
> 
> 赞同：2
> 
> 时间：2012-07-26T09:32:08.723
> 
> 标签：macvim, osx-mountain-lion

自从升级到 Mountain Lion 后，我的 MacVim 为我的字体添加了一些间距。我在 MacVim 和终端中都使用 Monaco:h12。

我创建了一个显示差异的图像，但我不知道为什么字体会这样显示。

![在此处输入图像描述](../Images/78270ed07aff4b647ea48b96020e6274.png)

大版本： [http ://dl.dropbox.com/u/404783/macvim-vim.png](http://dl.dropbox.com/u/404783/macvim-vim.png)

有任何想法吗？

# css - 如何防止 CSS 渐变色带？

> ID：11666395
> 
> 赞同：47
> 
> 时间：2012-07-26T09:32:20.953
> 
> 标签：css, gradient, linear-gradients

我开始使用 CSS 渐变，而不是实际的图像，原因有两个：首先，CSS 渐变的加载速度肯定比图像快，其次，它们不应该像许多光栅图形那样显示条带。我最近开始在各种屏幕上测试我的网站，在较大的屏幕（24 英寸以上）上，构成我网站背景的 CSS 线性渐变显示非常明显的条纹。作为临时修复，我用一个小的、重复的、透明`PNG`的噪声图像覆盖了渐变，这有点帮助。有没有其他方法可以解决此条带问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-26T10:17:57.513

我知道你不会喜欢这样的声音，但在这种情况下，目前唯一**真正**获得一致的跨浏览器美学的方法是使用重复图像。

如果是简单的线性渐变，那么只需要1px宽，和渐变一样高，然后将页面的背景色作为渐变的最终颜色，这样就可以流畅的运行了。这将保持文件大小很小。

如果您想减少图像中的渐变带，请使用 PNG（不是透明度），因为我发现这些比 JPG 更适合此目的。

在 Adob​​e Fireworks 中，我会将其导出为 PNG-24。

祝你好运。

[http://codepen.io/anon/pen/JdEjWm](http://codepen.io/anon/pen/JdEjWm)

```
#gradient {
  position: absolute;
  width: 100%;
  height: 100%;
  background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(black), to(white));
  background: -webkit-linear-gradient(top, black, white);
  background: -moz-linear-gradient(top, black, white);
  background: -ms-linear-gradient(top, black, white);
  background: -o-linear-gradient(top, black, white);
  background: linear-gradient(top, black, white);
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-05T17:08:58.167

`background-color`您可以通过使渐变从第一种颜色变为透明，并在下方为第二种颜色提供更好的结果。我还建议使用`background-size`在屏幕上延伸的大渐变，这样渐变实际上不会填满整个屏幕。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-23T13:30:42.790

我制作了一个“scatter.png”来放置我的渐变。像这样：

1.  打开 gimp
2.  100x100 图像
3.  添加 Alpha 通道
4.  过滤器 -> 噪音 -> 投掷...接受默认值
5.  将不透明度设置为 5%
6.  保存，然后添加到渐变。

    ```
    background: url('/img/scatter.png'), linear-gradient(50deg,#d00 0,#300 100%); 
    ```

这是对微妙效果的微妙影响。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-09-01T14:33:11.057

对于纯 CSS 答案，您可以使用模糊过滤器为 css 渐变添加模糊并减轻条带。这可能意味着对层次结构进行一些重建以不模糊内容，并且您需要隐藏溢出以获得清晰的边缘。在条带问题可能特别可怕的动画背景上工作得非常好。

```
.blur{
  overflow:hidden;
  filter: blur(8px);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-15T04:18:24.333

我知道这个问题早就解决了，但是对于其他遇到条带并正在寻找解决方案的人来说，对我来说一个非常简单的解决方法就是简化我在渐变中包含的颜色。例如：

**这个梯度产生条带：**

```
background-image: linear-gradient(-155deg, #202020 0%, #1D1D1D 20%,
#1A1A1A 40%, #171717 60%, #141414 80%, #101010 100%); 
```

**这个渐变没有，而且看起来很相似：**

```
background-image: linear-gradient(-155deg, #202020 0%, #101010 100%); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-07-26T19:30:18.117

我知道这有点晚了，但我发现了一个有效的技巧。对于任何在颜色交汇点处具有粗糙边缘的人。这将其删除。

```
.gradient {
  background: linear-gradient(
    173deg,
    rgba(0, 132, 255, 1) 50%,
    rgba(255, 255, 255, 1) 50.5%
  );
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-26T09:35:56.830

实际上没有任何方法可以去除条带。CSS 渐变受浏览器各种渲染引擎的支配。有些浏览器只是比其他浏览器渲染得更好。您可以做的最好的事情是覆盖较短的区域和较大的颜色范围以增加渐变步骤......然后等待浏览器渲染改善。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-14T15:17:11.383

添加最小高度。

```
#gradient {
  min-height: 100vh;
  background: linear-gradient(black, white);
} 
```

您还可以将 background-repeat 设置为 no-repeat，但这不是必需的。

```
#gradient {
  min-height: 100vh;
  background: linear-gradient(black, white);
  background-repeat: no-repeat;
} 
```

# html - HTML5：应该只将标题包含在标题中吗？

> ID：11666399
> 
> 赞同：0
> 
> 时间：2012-07-26T09:32:37.663
> 
> 标签：html

如果标题部分仅包含标题（例如 h1、h2..），而没有其他信息。是否仍应将其包装在标题标签中？或者如果它的内容不仅仅是标题，应该使用标题标签？

例如，应该使用这个吗？

```
<section>
    <h2> .... </h2>
    <div>
        ...
    </div>
</section> 
```

或这个？

```
<section>
    <header>
        <h2>...</h2>
    </header>
    <div>
        ...
    </div>
</section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:03:30.283

这是 HTML5 医生文章：

[避免常见的 HTML5 错误](http://html5doctor.com/avoiding-common-html5-mistakes/)

...[由@simoncereska 链接](https://stackoverflow.com/a/11669505/922323)。

为了节省人们一些时间，这里是相关的报价：

> **如果您的`<header>`元素仅包含一个标题元素，请省略`<header>`.** （`<article>`例如）确保标题将显示在文档大纲中，并且由于`<header>`不包含多个元素（如定义所述），为什么在不需要时编写代码？只需使用这个：
> 
> ```
> <article>  
>     <h1>My best blog post</h1>
>     <!-- Article content -->
> </article> 
> ```

这篇文章绝对值得一读，但如果您正在寻找一个快速的答案，那么请查看上面引用中的粗体文本。:)

# ios - JS 代码不在 iOS Web 应用程序模式下执行，但在 iOS Safari 中运行良好

> ID：11666409
> 
> 赞同：2
> 
> 时间：2012-07-26T09:33:12.170
> 
> 标签：ios, ipad, web-applications, mobile-safari

我有一个问题，即在 iPad 的 iOS Safari 中运行良好的网络应用程序在从 iPad 主屏幕作为网络应用程序启动时工作不一样。代码完全相同，缓存等已被刷新，但由于某种原因，加载某些内容的一些 JS 并没有在 web-app 模式下执行，但在 Safari 中运行良好！

有什么可能导致这种情况吗？非常感谢

更新：我正在做的是加载一个 jquery 时间线库，在页脚中使用以下初始化代码：

```
function checkTimeline() {
        if ($('.flag-content').length > 0) {
            timelineLoaded();
        } else {
            window.setTimeout(checkTimeline, 100);
        }
    }

    checkTimeline(); 
```

在 iOS Safari 中，这可以正常工作并在附加事件之前检查时间线是否已加载（通过 timelineLoaded() 函数），但在我认为只是有效的全屏 safari 模式的 web 应用程序模式下，checkTimeline 函数永远不会满足第一个健康）状况。莫名其妙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:15:50.670

如果您使用的是单独的 JS 文件，请检查是否在 Build Phases -> Copy Bundle Resources 中添加了 Js 文件。如果不手动添加它，然后再试一次它是否正常工作。

# qt - Qt gui 应用程序中的 OpenCV 窗口

> ID：11666416
> 
> 赞同：2
> 
> 时间：2012-07-26T09:33:30.720
> 
> 标签：qt, opencv

我有使用 OpenCV 的 Qt gui 应用程序。

有时在程序工作期间使用 OpenCV imshow() 显示图像（用于调试）会很好。我只是简单地使用：

```
cv::imshow("roi",roiImg); 
```

在 Qt 应用程序中。

在 Windows 7 中一切正常。只有在 QtCreator 中调试时，我才会在尝试显示 OpenCV 窗口时遇到段错误。

但我的问题是，在 WindowsXP 中，即使运行应用程序 exe 都编译为调试版和发布版程序崩溃。

有没有人有类似的问题？什么是最好的解决方案？例如，在用 Qt 编写的应用程序中，您使用什么解决方案作为调试图像输出？

# boost-python - 在嵌入应用程序中，C++ 未检测到/知道 Python 模块

> ID：11666419
> 
> 赞同：1
> 
> 时间：2012-07-26T09:33:33.460
> 
> 标签：boost-python

我正在编写一个嵌入到 C++ 应用程序中的 python。我声明需要嵌入的python（用户自定义）模块的相关代码片段如下：

```
boost::python::object main_module = boost::python::import("__main__");
boost::python::object main_namespace = main_module.attr("__dict__");
boost::python::exec("import python_module", main_namespace); //This line is the culprit 
```

但是，当我收到以下错误时，我被卡住了：

```
terminate called after throwing an instance of 'boost::python::error_already_set' 
```

我的用户定义的 python 模块与我的 C++ 代码位于同一目录中。当我尝试使用`numpy`它时，问题是只有我的用户定义的，它没有。为了调试它可以做些什么？

编辑：

在 try/catch 块中包含代码后，我得到以下编译错误：

```
ImportError: No module named python_module 
```

我也尝试添加这个：

```
boost::python::exec("import sys; sys.path.append('/path/to/python_module.py');",  main_namespace);

boost::python::exec("import python_module", main_namespace); 
```

但还没有工作。

现在的问题是如何让我的 C++ 代码知道它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:31:51.447

你可以尝试几件事：

1.  在您的 C++ 应用程序中：`boost::python::exec("import sys; sys.path.append('/path/to'); import python_module; del sys"), main_namespace);`，或

2.  在你的外壳中：`cd /path/to; call-your-c++-app`. 然后，在 C++ 中，您只需要`boost::python::exec("import python_module");`, 或

3.  将您的环境变量设置为`export PYTHONPATH=/path/to:${PYTHONPATH}`并执行您的程序。在这种情况下，您的 C++ 只需要`boost::python::exec("import python_module");`与上述解决方案一样。

问题：您需要将通向模块的路径附加到`sys.path`而**不是**模块文件本身的路径。

另一个提示：默认情况下，Python 将从当前目录加载模块。如果您`cd`在那里并从该目录执行您的应用程序，它应该在当前目录中找到该模块。

# php - 未捕获的异常“Zend_Acl_Exception”和消息“找不到资源”

> ID：11666420
> 
> 赞同：0
> 
> 时间：2012-07-26T09:33:34.633
> 
> 标签：php, zend-framework

我是 Zend Framework 的新手，我正在尝试使用它构建一个小型网站。因此，为了构建 CMS，我在作者[Forrest Lyman](http://www.apress.com/9781430218791)的 Apress 网站上找到了一个源代码。我还从当地市场买了这本书。

我想单独拥有管理模块，所以我创建了管理模块，但我遇到了问题，因为我无法访问 IndexController 以外的控制器。当我尝试访问管理模块中的其他控制器时，出现此错误：

> 致命错误：在 C:\Server\Zend\ZendServer\share\ZendFramework\library\Zend\Acl.php:365 中未捕获的异常 'Zend_Acl_Exception' 和消息 'Resource 'category' not found' 堆栈跟踪：#0 C:\Server \Zend\ZendServer\share\ZendFramework\library\Zend\Acl.php(846): Zend_Acl->get('category') #1 C:\Server\Zend\Apache2\htdocs\cms\library\CMS\Controller\ Plugin\Acl.php(52): Zend_Acl->isAllowed('administrator', 'category', 'index') #2 C:\Server\Zend\ZendServer\share\ZendFramework\library\Zend\Controller\Plugin\Broker .php(309): CMS_Controller_Plugin_Acl->preDispatch(Object(Zend_Controller_Request_Http)) #3 C:\Server\Zend\ZendServer\share\ZendFramework\library\Zend\Controller\Front.php(941): Zend_Controller_Plugin_Broker->preDispatch(Object (Zend_Controller_Request_Http)) #4 C:\Server\Zend\ZendServer\share\ZendFramework\library\Zend\Application\Bootstrap\Bootstrap.php(97): Zend_Controller_Front->dispatch() #5 C:\Server\Zend\ZendServer\share\ZendFramework\library\Zend \Application.php(366): Zend_Application_Bootstrap_Bootstrap->run() #6 in C:\Server\Zend\ZendServer\share\ZendFramework\library\Zend\Controller\Plugin\Broker.php 第 312 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:55:56.463

我找到了解决方案..

制作控制器后，我必须在位于 (library/CMS/Controller/Plugin/) 的 Acl.php 文件中添加资源。只需将其添加到添加资源部分

```
 $acl->add(new Zend_Acl_Resource('category')); 
```

然后你就可以访问它了。

谢谢。

# jquery - jQuery：Chrome 中的 Ajax 请求中止

> ID：11666421
> 
> 赞同：1
> 
> 时间：2012-07-26T09:33:43.950
> 
> 标签：jquery, ajax, google-chrome

我在 Chrome 中有以下问题：如果我在 ajax 请求期间单击页面上的锚点（将我重定向到其他页面），则会调用错误处理程序。我想确定它是否是真正的错误。

*   未调用中止处理程序
*   错误为空
*   xhr.status 为 0
*   xhr.statusText 是“错误”

代码：

```
$.ajaxSetup({
    error: function (xhr, status, error) {
        ...
    },
    abort: function () {
        ...
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:01:17.550

Use [onbeforeunload](https://developer.mozilla.org/en/DOM/window.onbeforeunload) event to abort all request before page is unloaded. This way you will get `status = 'abort'` instead of `status = 'error'` in `error: function(xhr, status, error){}`.

```
var request;

window.onbeforeunload = function() {
    if(request !== undefined) {
        request.abort();
    }
}

request = $.ajax({ ... }); 
```

Example I've tested this solution on:

[http://jsfiddle.net/vLrYm/7/](http://jsfiddle.net/vLrYm/7/)

# windows-phone-7 - 有什么方法可以检测 windows phone 7 SDK 中的电话呼叫

> ID：11666425
> 
> 赞同：1
> 
> 时间：2012-07-26T09:33:48.613
> 
> 标签：windows-phone-7, windows-phone-7.1, listener, windows-phone

我是 Windows 手机开发新手。[这](http://developer.android.com/reference/android/telephony/PhoneStateListener.html)是它的 android 等价物。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:00:47.890

不，您无法检测到呼叫。此外，假设您正在考虑将在后台运行并侦听呼叫的应用程序，然后在 Windows Phone 中执行某些操作，应用程序不会在后台“运行”。当您启动另一个应用程序、返回开始屏幕或关闭手机时，该应用程序将被停用或被墓碑化，具体取决于是否加载了其他将其从内存中撞出的东西。

这是一个了解应用程序生命周期的链接：http: [//www.developer.nokia.com/Community/Wiki/Application_Life_Cycle_-_Windows_Phone_7_Mango](http://www.developer.nokia.com/Community/Wiki/Application_Life_Cycle_-_Windows_Phone_7_Mango)

您**可以**拥有后台任务，但这些任务只是偶尔运行，并且没有设定的时间表。手机有时会运行后台任务，因为它可以最有效地使用手机中的无线电，因为启动无线电是一项相当密集的任务。通常，不要期望任务具有比大约每小时更准确的任何可预测的运行模式。它可能更频繁，但我不会指望它，或者你正在为自己设置问题。

这是有关后台任务的链接：http: [//msdn.microsoft.com/en-us/library/hh202942](http://msdn.microsoft.com/en-us/library/hh202942(v=vs.92) (v=vs.92 )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:34:30.987

不，当前的 Windows Phone 7.x SDK 不允许您检测呼叫。

# grails - 如何将 javassist 实例转换为特定域的实例

> ID：11666426
> 
> 赞同：2
> 
> 时间：2012-07-26T09:33:49.937
> 
> 标签：grails, grails-orm

我想使用 grails 1.3.7 将两个特定域类的实例列表相交。

问题是，一个列表的实例是由 javasisst 创建的，因此交集的结果始终是一个空列表。

这是我的域名：

```
class User {
    ...
    static hasMany = [foos : Foo]
    ...
} 

class Foo {
    ...
    static hasMany = [bars : Bar]
    ...
}

class Bar {
    ...
    static hasMany = [localizedTitles : LocalizedTitle]
    ...
} 
```

我得到这样的用户所有`Bar`实例的列表：

```
def allBarsOfUser = userInstance.foos.bars.flatten() 
```

并尝试与另一个`Bar`实例列表相交：

```
def intersectedBars = bars.intersect(allBarsOfUser) 
```

问题是，`allBarsOfUser`ist的元素类型和元素的`Bar_$$_javassist_139`类型`bars`总是`Bar`如此。`intersectedBars``[]`

我通过执行以下操作解决了我的问题 - 但我不喜欢该解决方案：

```
def allBarsOfUser = userInstance.foos.bars.flatten().collect{Bar.get(it.id)} 
```

什么是更好的解决方案？

我怎么能`Bar_$$_javassist_139`这样`Bar`才能`intersect()`正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:04:52.960

这取决于你实际上想要做什么。该`intersect`方法最终依赖于`equals`，因此，如果您实施`equals`and `hashCode`，`Bar`那么它将执行您想要的操作。但是您通常不应该`equals`根据对象 ID 来实现，因为仅在保存对象时才分配 ID，因此您无法将新创建的对象与以前保存的对象进行比较。Hibernate 建议您[基于业务密钥](http://docs.jboss.org/hibernate/core/4.0/manual/en-US/html/persistent-classes.html#persistent-classes-equalshashcode)（不是生成的 ID，但在对象的整个生命周期内稳定且不太可能更改）来实现它

```
class UserAccount {
  String username
  String realname

  public boolean equals(that) {
    return ((that instanceof UserAccount)
        && (this.username == that.username))
  }

  public int hashCode() {
    username.hashCode()
  }
} 
```

因此，如果您确实想要进行 ID 比较，那么明确地进行比较会更清楚。

```
def userBarIds = allBarsOfUser*.id
def intersectedBars = bars.findAll { it.id in userBarIds } 
```

# eclipse - 从命令行安装 Eclipse 功能期间找不到捆绑包

> ID：11666429
> 
> 赞同：0
> 
> 时间：2012-07-26T09:34:09.140
> 
> 标签：eclipse, maven, eclipse-plugin, eclipse-rcp, tycho

我用了

> eclipsec.exe
> 
> ```
>  -application org.eclipse.equinox.p2.director
>    -repository file:///d:/updatesite/target
>    -installIU myPlugin.feature.feature.group
>    -destination d:/eclipse/
>    -profile SDKProfile 
> ```

但我收到此错误：需要'bundle org.eclipse.core.runtime 3.7.0'但找不到

注意：我使用 maven tycho 构建了该功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:32:00.327

当我将 indigo 更新站点添加到当前存储库时，它对我有用

```
 -repository file:///d:/updatesite/target,http://download.eclipse.org/releases/indigo/ 
```

# postgresql - JPA BIT(n) 映射

> ID：11666434
> 
> 赞同：0
> 
> 时间：2012-07-26T09:34:23.463
> 
> 标签：postgresql, jpa

我有一个 Postgres 表，其中有一`BIT(4)`列。在创建相应的实体类时，NetBeans`Boolean`为列生成了一个字段，这当然是无效的，因为我无法在其中存储所有 4 位值。

该列的正确映射是什么？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:52:29.097

*从我的评论中重新发布以使其成为答案*

我自己不知道这个问题，但是[http://forum.hibernate.org/viewtopic.php?f=1&t=985798](http://forum.hibernate.org/viewtopic.php?f=1&t=985798)在大量代码和解决方案中遇到了类似的问题。也许这就是你正在寻找的......

# android - How to add data retrieved from remote MySql DB to a MatrixCursor

> ID：11666436
> 
> 赞同：0
> 
> 时间：2012-07-26T09:34:37.867
> 
> 标签：android, json, parsing, cursor

Hi i would like to ask for assistance on how to populate my ListView i retrieve data from a remote database and add it to a matrix cursor however it only adds the final record that was retrieved therefore my list only has one record i don't know whether its my loop or how I'm adding data to the cursor please help

here is my current code

> ```
>  try{
>               JSONArray jArray = new JSONArray(result);
> 
>               for(i=0;i<jArray.length();i++){
>                       json_data = jArray.getJSONObject(i);
> 
>                          _id = json_data.getInt("_id");
>                          rec_words = json_data.getString("words");
>                          rec_word = json_data.getString("word");
>                          rec_word2 = json_data.getString("word2");
>                          rec_description = json_data.getString("definition");
> 
>                            //   cursor.addRow(items);    
>                         // System.out.println(mld.query);
> 
>                       //  items.add(_id);
>                        // items.add(rec_word);
>                         //items.add(rec_word2);
>                         //items.add(rec_words);
>                         //items.add(rec_description);
>                         //System.out.println(items);
>                       final String[] matrix  = { "_id","words","word", "word2","definition"};
>                          cursor = new MatrixCursor(matrix);
> 
>                      //cursor.addRow(new Object[] {json_data.getInt("_id"),json_data.getString("words"),json_data.getString("word"),json_data.getString("word2"),json_data.getString("definition")});
> 
>                        cursor.addRow(new Object[] {_id,rec_words,rec_word,rec_word2,rec_description});
> 
>                        // cursor.addRow(items);
>                       Log.i("log_tag","_id: "+json_data.getInt("_id")+
>                               ", word: "+json_data.getString("word")+
>                               ", word2: "+json_data.getString("word2")+
>                               ", definition: "+json_data.getString("definition")
>                       );                    
> 
>                       //Get an output to the screen
> 
>                 returnString += "\n\t" + jArray.getJSONObject(i);
>                 //System.out.println(returnString);
> 
>               }
>       }catch(JSONException e){
>               Log.e("log_tag", "Error parsing data "+e.toString());
>       } 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:36:16.237

~~Use this code to loop through your cursor:~~

 ~~```
if (myCursor.moveToFirst()) {
    do {
        //get cursor data
    } while (myCursor.moveToNext());
} 
```~~  ~~**EDIT:** Remove the line `cursor = new MatrixCursor(matrix);`~~

# java - ExecutorService 没有做好它的工作？

> ID：11666441
> 
> 赞同：1
> 
> 时间：2012-07-26T09:34:53.587
> 
> 标签：java, multithreading

这个主要给 ExecutorService 1000 个可运行对象（测试人员），他们所做的只是睡眠 10 毫秒，然后将 1 添加到静态计数器，主要是假设要等到所有执行完成，但计数器会上升到 970 左右处决……为什么？

```
public class Testit {
    public static void main (String arg[]) {
        int n=1000;
        ExecutorService e1 =  Executors.newFixedThreadPool(20);
        for (int i=0 ;i <n ;i++) {
            e1.execute(new Tester());
        }
        e1.shutdown();
        try {
            e1.awaitTermination(1, TimeUnit.DAYS);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println("Executed "+Tester.tester()+" Tasks.");
    }
} 
```

和测试员类：

```
public class Tester implements Runnable {
    public static long tester=0;
    @Override
    public void run() {
        try {
            Thread.sleep(10);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        finally { tester++; }
    }
    public static long tester() {
        long temp=tester;
        tester=0;
        return temp;
    }
} 
```

**编辑**

问题解决：

```
finally { synchronized (lock) {tester++;} } 
```

感谢 JB 尼泽特！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T09:39:18.423

因为您不同步对计数器的访问，并且由于写入 long 不是原子的，`++`也不是原子的，所以增加计数器的两个并发线程可能导致完全不一致的结果，或者只增加一个而不是 2。

改用 an `AtomicLong`，然后调用`incrementAndGet()`this `AtomicLong`。

# java - 如何使有状态的 JBehave 步骤对多线程执行安全

> ID：11666442
> 
> 赞同：4
> 
> 时间：2012-07-26T09:34:57.037
> 
> 标签：java, multithreading, spring, jbehave

目前，我正在使用 Spring 将步骤类注入到 JUnit 测试中：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration...
class MyTest extends JUnitStories {
    @Autowired private MySteps mySteps;

    public List<CandidateSteps> candidateSteps() {
        return new InstanceStepsFactory(configuration(), mySteps).createCandidateSteps();
    }

    ...
} 
```

我想[用多个线程运行 JBehave](http://jbehave.org/reference/stable/multi-threading.html)，所以我不能再注入单例 MySteps bean。

我已阅读[http://jira.codehaus.org/browse/JBEHAVE-492](http://jira.codehaus.org/browse/JBEHAVE-492)但仍然看不到如何解决我的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T09:12:42.617

很久以前就有人问过这个问题，但答案是：只在[ThreadLocal](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html)变量中保持状态，或者更好地将 ThreadLocal 变量包装在您自己的一个类中。例如，拿这个代码

**州级**

```
public class State {
   private ThreadLocal<String> state;

   public void setState(String state) {
      this.state.set(state);
   }

   public String getState() {
      return this.state.get();
   }
} 
```

**还有步骤**

```
public class Steps {
   private State state;

   public Steps(State state) {
      this.state = state;
   }

   @Given("the following happens: $string")
   public void somethingHappens(String string) {
      state.setState(string);
   }

   @When("who knows")
   public void whoKnows() {
      String stat = state.getState();
   }

   @BeforeScenario
   public void cleanup() {
      state.setState(null);
   }
} 
```

我建议你在场景清除变量之前有一些东西，以防止不同场景之间的任何类型的泄漏。

# c# - 如何读取文本文件并计算相同的名称

> ID：11666446
> 
> 赞同：0
> 
> 时间：2012-07-26T09:35:14.607
> 
> 标签：c#, file

我想创建每行包含一个名称的文本文件。计算任何名称出现的次数。为文件中的每个名称输出一行，并在每一行打印出现的次数，后跟名称。

我可以使用此代码打开文件

```
private void button1_Click(object sender, EventArgs e)
{
    using (OpenFileDialog dlgOpen = new OpenFileDialog())
    {
        try
        {
            // Available file extensions
            openFileDialog1.Filter = "All files(*.*)|*.*";
            // Initial directory
            openFileDialog1.InitialDirectory = "D:";
            // OpenFileDialog title
            openFileDialog1.Title = "Open";
            // Show OpenFileDialog box
            if (openFileDialog1.ShowDialog() == DialogResult.OK)
            {
                // Create new StreamReader
                StreamReader sr = new StreamReader(openFileDialog1.FileName, Encoding.Default);
                // Get all text from the file
                string str = sr.ReadToEnd();
                // Close the StreamReader
                sr.Close();
                // Show the text in the rich textbox rtbMain

            }
        }
        catch (Exception errorMsg)
        {
            MessageBox.Show(errorMsg.Message);
        }
    }
} 
```

但我想要的是使用相同的按钮来阅读并在 groupbox 中显示它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T09:48:11.617

由于这是家庭作业，我不会给你代码，但希望有足够的信息为你指明正确的方向。

我建议您使用 File.ReadAllLines 将文件读入字符串数组，数组中的每一项都是文件中的一行。这意味着您不必自己拆分文件内容。然后您可以遍历字符串数组，并将每一行添加到字典中，其中键是从文件中读取的行，值是出现次数。您需要检查键是否已经在字典中 - 如果没有添加它，计数为 1，否则更新现有计数 (+1)。在该循环之后，有第二个循环遍历字典内容，使用名称及其计数更新您的文本框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:43:18.983

*（假设这是一个家庭作业）*我使用`File.ReadAllLine`和[`Dictionary<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)：

```
var nameCount = new Dictionary<string, int>();

foreach (String s in File.ReadAllLines("filename"))
{
    if (nameCount.ContainsKey(s))
    {
        nameCount[s] = nameCount[s] + 1;
    }
    else
    {
        nameCount.Add(s, 1);
    }
}

// and printing
foreach (var pair in nameCount)
{
    Console.WriteLine("{0} count:{1}", pair.Key, pair.Value);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T10:04:49.917

您可以使用 Linq 做到这一点，而无需增加`int`变量。最后有一个包含名称和计数的字典

```
string names = sr.ReadAllLines();
Dictionary<string, int> namesAndCount = new Dictionary<string, int>();

foreach(var name in names)
{
    if(namesAndCount.ContainsKey(name))
        continue;

    var count = (from n in names
                where n == name
                select n).Count();

    namesAndCount.Add(name, count);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:48:48.007

好的，这样的函数将为您构建具有计数的不同名称。

```
private static IDictionary<string, int> ParseNameFile(string filename)
{
    var names = new Dictionary<string, int>();
    using (var reader = new StreamReader(filename))
    {
        var line = reader.ReadLine();
        while (line != null)
        {
            if (names.ContainsKey(line))
            {
                names[line]++;
            }
            else
            {
                names.Add(line, 1);
            }
            line = reader.ReadLine(); 
        }
    }
} 
```

或者你可以用 linq 和 readAllLines 做一些事情。

```
private static IDictionary<string, int> ParseNameFile(string filename)
{
    return File.ReadAllLines(filename)
        .OrderBy(n => n)
        .GroupBy(n => n)
        .ToDictionary(g => g.Key, g => g.Count);
} 
```

第一个选项确实具有不将整个文件加载到内存中的优点。

至于输出信息，

```
var output = new StringBuilder();
foreach (valuePair in ParseNameFile(openFileDialog1.FileName))
{
    output.AppendFormat("{0} {1}\n", valuePair.Key, valuePair.Value); 
} 
```

然后你`ToString()`在输出上把数据放在你想要的任何地方。如果会有很多行，`StreamWriter`则首选方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T09:41:21.840

Similar question has been asked before: [A method to count occurrences in a list](https://stackoverflow.com/questions/1139181/c-a-method-to-count-occurrences-in-a-list)

In my opinion using LINQ query is a good option.

```
string[] file = File.ReadAllLines(openFileDialog1.FileName, Encoding.Default);

IEnumerable<string> groupQuery =
    from name in file
    group name by name into g
    orderby g.Key
    select g;

foreach (var g in groupQuery)
{
    MessageBox.Show(g.Count() + " " + g.Key);
} 
```

# google-chrome-extension - 如何使用 Chrome 扩展更改网站内容？（例子）

> ID：11666449
> 
> 赞同：-2
> 
> 时间：2012-07-26T09:35:19.270
> 
> 标签：google-chrome-extension

我需要一个页面操作或浏览操作，其中包含更改网站中元素的文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:38:10.047

看看这个：[http ://code.google.com/chrome/extensions/content_scripts.html](http://code.google.com/chrome/extensions/content_scripts.html)

您可以将 javascript 脚本和 css 样式表添加到页面以更改内容。

祝你好运！

更改 www.google.com 的背景的示例：您创建一个 .css 文件：

```
body{
  background-color:black;
  } 
```

当您创建 .css 文件时，将其添加到 manifest.json：

```
"content_scripts": [
  {
    "matches": ["http://www.google.com/*"],
    "css": ["[name].css"]
  }
], 
```

匹配意味着它将被添加到任何以[http://www.google.com/](http://www.google.com/)开头的网站，因为“*”。

# iphone - 有时间敲响警报吗？（使用完整的警报应用程序）

> ID：11666451
> 
> 赞同：0
> 
> 时间：2012-07-26T09:35:29.517
> 
> 标签：iphone, objective-c, ios

如果您想留出时间敲响警报。然后你可以使用这个方法，第二天你可以设置 day =day+1; 根据你。它将返回当前时间和设置的闹钟时间之间的差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:35:29.517

```
+(NSString*)getDifference:(NSString*)setTime
{
 NSDateComponents *components = [[NSCalendar currentCalendar] components:NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit | NSWeekdayCalendarUnit fromDate:[NSDate date]];

 int day=[components day];
 int month=[components month];
 int year=[components year];

 //day=day+1;

 NSDateFormatter *formatter;
 NSString *CurrentdateString;

 formatter = [[NSDateFormatter alloc] init];
 [formatter setDateFormat:@"dd-MM-yyyy hh:mm a"];

 CurrentdateString = [formatter stringFromDate:[NSDate date]];

 //settime=@"2:40 PM";

 NSDate *currentDate=[formatter dateFromString:CurrentdateString];
 NSDate *setDate=[formatter dateFromString:[NSString stringWithFormat:@"%i-%i-%i %@",day,month,year,setTime]]; 

 NSLog(@"current date is %@",[formatter stringFromDate:currentDate]);
 NSLog(@"setted date string is %@",[formatter stringFromDate:setDate]);

 NSTimeInterval interval=[setDate timeIntervalSinceDate:currentDate];

 int totalmin=(int)(interval/60);

 int hour=(int)(totalmin/60);
 int min=(int)fmod(totalmin,60);

 [formatter release]; 

 if (hour<0 || min<0) {

  totalmin=hour*60+min;
  totalmin=(24*60)+totalmin;

  hour=totalmin/60;
  min=fmod(totalmin, 60);
 }

 NSString *returnString=[[NSString alloc] init];
 returnString=[NSString stringWithFormat:@"%i hr. %i min.",hour,min];

 NSLog(@"date string is %i:%i",hour,min);
return returnString;
} 
```

# android - .txt 文件中的文件创建和写入内容

> ID：11666453
> 
> 赞同：1
> 
> 时间：2012-07-26T09:35:31.407
> 
> 标签：android

我正在使用 getFilesDir() + 文件名创建一个文件，我得到的是 filesfileName.txt，你能告诉我为什么我得到这个文件名而不是 fileName.txt.. 谢谢你的关心。

* * *

```
File file = new File(mContext.getFilesDir() + fileName+ ".txt");
            if (!file.exists()) {

                file.createNewFile();
                FileWriter f;
                try {

                    f = new FileWriter(mContext.getFilesDir() + fileName
                            + ".txt");
                    f.write(fbFriendList);
                    f.flush();
                    f.close();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:53:19.507

您应该对文件使用重载的构造函数，而不是使用`+`来连接文件路径，这将为您添加路径分隔符`/`。您也可以将`File`作为参数传递给 Filewriter 构造函数，而不是用字符串重复自己：

```
File file = new File(mContext.getFilesDir(), fileName+ ".txt");

FileWriter f;

try {
    f = new FileWriter(file);
    f.write(fbFriendList);
    f.flush();
    f.close();
} catch (IOException e1) {
    e1.printStackTrace();
} 
```

更多信息请参考[File](http://developer.android.com/reference/java/io/File.html)和[FileWriter的官方 API 文档](http://developer.android.com/reference/java/io/FileWriter.html#FileWriter%28java.io.File%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:38:58.580

更好地使用 Path.Combine 创建 FullPath-Strings：

```
File file = new File(Path.Combine(mContext.getFilesDir(), fileName+ ".txt")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:39:43.637

您必须添加`"/"`.

```
File file = new File(mContext.getFilesDir() + "/" + fileName+ ".txt"); 
```

我建议使用[openFileOutput(String name, int mode](http://developer.android.com/reference/android/content/Context.html#openFileOutput%28java.lang.String,%20int%29) ) 方法 - 创建私有文件并将其写入内部存储。

```
Writer out
   = new BufferedWriter(
           new OutputStreamWriter(openFileOutput(FILENAME, Context.MODE_PRIVATE))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:41:55.007

Do this way

```
File file = new File(podcastFolder + File.separator + fileName + ".txt"); 
```

# android - 按下按钮时如何更改默认橙色颜色有人告诉我

> ID：11666457
> 
> 赞同：0
> 
> 时间：2012-07-26T09:35:52.233
> 
> 标签：android

在edittext字段中键入文本时如何更改默认颜色橙色或按下按钮该颜色将如何更改？有什么帮助吗？？这是我下面的 xml，当我运行此代码时，默认橙色出现在 edittext 的边框上以及按下按钮时

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:orientation="vertical" 
 android:background="#ffffff">

<TextView
    android:id="@+id/txtEnterPinForTransaction"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="" />
<TextView
    android:id="@+id/lblPinno"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="" />

<EditText
    android:id="@+id/txtPinno"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="textPassword" />

<Button
    android:id="@+id/btnsubmit"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="80dp"
    android:layout_height="wrap_content"
    android:text="Submit" />

<Button
    android:id="@+id/clearButton"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="80dp"
    android:layout_height="wrap_content"
    android:text="Clear" />

<Button
    android:id="@+id/btngoback"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="80dp"
    android:layout_height="wrap_content"
    android:text="Go Back" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:40:05.507

您可以创建一个 stateListdrawable，它为按钮的不同状态定义不同的颜色或可绘制对象，并且可以将此 xml 可绘制对象设置为按钮的背景。

例如对于按钮，您可以使用以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:drawable="@drawable/button_pressed" /> <!-- pressed -->
    <item android:state_focused="true"
          android:drawable="@drawable/button_focused" /> <!-- focused -->
    <item android:state_hovered="true"
          android:drawable="@drawable/button_focused" /> <!-- hovered -->
    <item android:drawable="@drawable/button_normal" /> <!-- default -->
</selector> 
```

使用 btn_selector.xml 将此 xml 保存到 Res-> drawable 文件夹中，现在将其设置为按钮的背景：

```
<Button
    android:id="@+id/btnsubmit"
    android:background="@+drawable/btn_selector"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="80dp"
    android:layout_height="wrap_content"
    android:text="Submit" /> 
```

如果还有不清楚的地方，请参考

[http://developer.android.com/guide/topics/resources/drawable-resource.html](http://developer.android.com/guide/topics/resources/drawable-resource.html)

# sql-server - RANK() Over Partition BY 不工作

> ID：11666458
> 
> 赞同：0
> 
> 时间：2012-07-26T09:35:54.010
> 
> 标签：sql-server, tsql, partitioning

**当我运行下面的代码时，ROWID 始终为 1。对于具有相同Credit Value**的每个项目，我需要 ID 从 1 开始。

```
;WITH CTETotal AS (SELECT
     TranRegion
    ,TranCustomer
    ,TranDocNo
    ,SUM(TranSale) 'CreditValue'
FROM dbo.Transactions

LEFT JOIN customers AS C 
      ON custregion = tranregion 
      AND custnumber = trancustomer
LEFT JOIN products AS P
      ON prodcode = tranprodcode

GROUP BY
TranRegion
,TranCustomer
,TranDocNo)

SELECT
       r.RegionDesc
      ,suppcodedesc
      ,t.tranreason as [Reason]
      ,t.trandocno as [Document Number]
      ,sum(tranqty) as Qty
      ,sum(tranmass) as Mass
      ,sum(transale) as Sale
      ,cte.CreditValue AS 'Credit Value'
      ,RANK() OVER (PARTITION BY cte.CreditValue ORDER BY cte.CreditValue)AS ROWID

FROM transactions t

LEFT JOIN dbo.Regions AS r    
      ON r.RegionCode = TranRegion  

LEFT JOIN CTETotal AS cte
      ON cte.TranRegion = t.TranRegion
      AND cte.TranCustomer = t.TranCustomer
      AND cte.TranDocNo = t.TranDocNo

GROUP BY 
       r.RegionDesc
      ,suppcodedesc
      ,t.tranreason
      ,t.trandocno
      ,cte.CreditValue

ORDER BY CreditValue ASC 
```

**编辑**

所有 400 的信用值必须将 ROWID 设置为 1。所有 200 的信用值必须将 ROWID 设置为 2。依此类推。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T10:11:40.873

你需要这样的东西吗？

```
with cte (item,CreditValue)
as
(
select 'a',8 as CreditValue union all
select 'b',18 union all
select 'a',8 union all
select 'b',18 union all
select 'a',8 
) 
select CreditValue,dense_rank() OVER (ORDER BY item)AS ROWID from cte 
```

结果

```
CreditValue ROWID
----------- --------------------
8           1
8           1
8           1
18          2
18          2 
```

在您的代码中替换

```
,RANK() OVER (PARTITION BY cte.CreditValue ORDER BY cte.CreditValue)AS ROWID 
```

经过

```
,DENSE_RANK() OVER (ORDER BY cte.CreditValue)AS ROWID 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T10:07:30.880

您不必使用`PARTITION`，只需`DENSE_RANK() OVER (ORDER BY cte.CreditValue)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:41:04.177

我认为问题出在 RANK() OVER (PARTITION BY 子句

您必须按项目而不是 CreditValue 对其进行分区

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:50:40.033

试试这个

RANK() OVER (PARTITION BY cte.CreditValue ORDER BY cte.RegionDesc)AS ROWID

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-28T17:20:17.107

# 编辑：这里的问题实际上不是子查询的嵌套，它可能基于`partition by`拥有真正使每一行唯一（或 1）的列

而不是像这样在您的复杂查询中排名

```
select 
   rank() over(partition by...),
   *
from
   data_source
join table1
join table2
join table3
join table4
order by
   some_column 
```

尝试`rank()`或`row_number()`在结果数据集上，而不是在其中。

例如，使用上面的查询，以`rank()`这种方式删除并实现它：

```
select
   rank() over(partition by...),
   results.*
from (
    select 
       *
    from
       data_source
    join table1
    join table2
    join table3
    join table4
    order by
       some_column
) as results 
```

# php - php - 将 switch 转换为 .csv 文件读取方法

> ID：11666464
> 
> 赞同：0
> 
> 时间：2012-07-26T09:36:18.287
> 
> 标签：php, csv, switch-statement

有人可以指点我正确的方向，将我的开关代码从当前列出的如下所示转换为从 CSV 文件中提取：

```
 $video = (isset($_GET['video']) ? $_GET['video'] : null);

if($video) {
    switch($video) {
        case "apple":
                    $Heading ='Apple Heading';
            $Videonum ='1';
            $Content ='<h2>Apple Sub Heading</h2>
                               <p>Apple content</p>';
            $SideContent ='Apple side content';
break; 
```

我最终会处理很多案例，并且从 .csv 文件管理起来会更容易 - 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:49:08.847

我认为您需要一个二维数组，其中标识符 ('apple', ...) 作为内部数组的键。通过解析 CSV 文件，您将获得一个包含多行的数组，但您需要搜索包含所需数据的行。也许您还可以保存包含必要数据数组的 PHP 文件，甚至使用数据库（这可能是这种情况下最常见的）。

我会使用它的目标数组：

```
$data = array(
    'apple' => array(
        'heading' => 'Apple Heading',
        'video_num' => 1,
        'content' => '<h2>Apple Sub Heading</h2>
                      <p>Apple content</p>',
        'side_content' => 'Apple side content',
    ),
    /* more manufacturer sub-arrays */
); 
```

在第一种情况下，您只需从数组中读取即可访问整个数据：

```
if( !empty( $_GET['video'] ) && isset( $data[$_GET['video']] ) )
{
    var_dump(
        $data[$_GET['video']]['heading'],
        $data[$_GET['video']]['content']
    );
}
else
{
    echo '<p class="error">No video specified or "' . $_GET['video'] . '" is not available.</p>';
} 
```

供参考; 从 CSV 文件中检索的数组：

```
$data = array(
    1 => array(
        'manufacturer' => 'Apple',
        'heading' => 'Apple Heading',
        'video_num' => 1,
        'content' => '<h2>Apple Sub Heading</h2>
                      <p>Apple content</p>',
        'side_content' => 'Apple side content',
    ),
    /* more rows */
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:52:59.210

阅读您的 csv 文件

```
$data = array();
$fp = fopen('manufacturer.csv', 'r');
while (!feof($fp)) {
    $line = explode(';',fgets($fp));
    $data[$line[0]]['heading'] = $line[1];
    $data[$line[0]]['video'] = $line[2];
    $data[$line[0]]['content'] = $line[3];
    $data[$line[0]]['side'] = $line[4];
}
fclose($fp); 
```

你的 csv 看起来像

```
apple;Apple Heading;1;<h2>Apple Sub Heading</h2><p>Apple content</p>;Apple side content
microsoft;MS Heading;1;<h2>MS Sub Heading</h2><p>MS content</p>;MS side content
... 
```

然后使用制造商名称访问您的内容

```
if(isset($data[$_GET['video']] && !empty($_GET['video']))){
    $Heading = $data[$_GET['video']]['heading'];
    $Videonum = $data[$_GET['video']]['video'];
    $Content = $data[$_GET['video']]['content'];
    $SideContent = $data[$_GET['video']]['side'];
} 
```

# continuous-integration - 一定数量的签入后 Teamcity 构建触发器

> ID：11666466
> 
> 赞同：1
> 
> 时间：2012-07-26T09:36:22.873
> 
> 标签：continuous-integration, teamcity

有没有办法仅在一定数量的签入后触发团队城市构建。我尝试在 teamcity 中检查构建触发，但找不到任何可以在我想触发构建之后指定签入次数的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:38:34.853

我认为没有内置的解决方案，但是您可以做一些事情。

*   [按照文档](http://confluence.jetbrains.net/display/TCD7/Custom+Build+Trigger)中的说明构建您自己的构建触发器插件
*   您可以通过在 VCS 触发器中设置较长的静默期来模拟您想要的内容。
*   使用计划的触发器每小时或更长时间运行一次，并将其设置为仅在检测到更改时才运行构建

只有第一个选项会在特定数量的签入时触发，但其他两个可以减少您一天执行的构建数量。

您还可以查看[工件清理规则](http://confluence.jetbrains.net/display/TCD7/Clean-Up)以减少保留的工件数量。另一种选择是使用[固定构建](http://confluence.jetbrains.net/display/TCD7/Pinned+Build)每天固定一个构建（例如），该构建不会被工件清理过程清理。

# hibernate - 在休眠中搜索集合非常慢

> ID：11666470
> 
> 赞同：0
> 
> 时间：2012-07-26T09:36:42.260
> 
> 标签：hibernate, search

我的课程有一些领域，其中之一是孩子的集合。问题是孩子使班级独一无二，我必须按孩子搜索重复项（从一开始班级就没有任何ID）。

所以我这样写：

```
SELECT c
FROM Class c, IN(c.children) c1, IN(c.children) c2, IN(c.children) c3
WHERE c.project='project' AND c1.name='name1' AND c2.name='name2' AND c3.name='name3' 
```

当您或多或少拥有独特的 c.project 时，它可以正常工作。但在某些情况下，我必须使用相同的项目（或 null）导入大量数据，然后在 3-4 个孩子的 200-300 c 上搜索可能需要 5-6 秒。

我想我错过了一些大事，但不知道到底是什么。你能帮我么。

更新：这个查询可以给我线索，如果我已经在数据库中有这样的对象并且不需要再添加一个（正如我所说的 - 从一开始就没有 ID）。我的意思是 - 如果数据库中存在具有相同项目（项目！= ID）和相同子集的对象，我不需要再添加一个，否则我需要创建新记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:46:38.430

假设您不能为给定的父母有两个同名的孩子，您可以执行以下操作：

```
select count(child.id) from Parent p inner join p.children child
where p.project = 'project' and child.name in ('name1', 'name2', 'name3') 
```

如果它返回 3 或更多，则具有这些孩子的父母已经存在。

# java - 将自定义对象传递给 Arrays.asList

> ID：11666472
> 
> 赞同：8
> 
> 时间：2012-07-26T09:36:44.337
> 
> 标签：java, arrays

假设我有一个 Person 类，我正在尝试创建一个列表；

```
Person p1 = new Person("first", "id1");         
Person p2 = new Person("dummy", "id1"); 
Person p3 = new Person("second", "id2");         
Person p4 = new Person("third", "id1");         
List<Person> asList = Arrays.asList(p1, p2, p3, p4); 
```

现在我的问题是不要将个人 Person 对象传递给 Arrays.asList()

我可以通过一个组合列表，比如

```
List<Person> asList = Arrays.asList(combinedPersonObjs); 
```

我已经尝试了很多东西，但我遇到了铸造错误。

请帮忙

**注意：** Person 对象的数量是动态的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T09:38:39.377

当然，你可以做到

```
Person[] combinedPersonObjs = { p1, p2, p3, p4 };
List<Person> asList = Arrays.asList(combinePersonObjs); 
```

如果您事先不知道`Person`对象的数量，那么大概您没有每个对象的一个​​变量标识符。我建议你简单地做类似的事情

```
List<Person> asList = new ArrayList<Person>();
for (int i = 0; i < numberOfPersons; i++)
    asList.add(new Person(ithName(i), "id" + i)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T09:38:46.413

将所有对象放入一个数组中并将该数组传递给 Arrays.asList()

你可以在这里找到文档.. [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T09:40:53.807

您可以完全绕过数组（我不太明白您为什么要使用它）并创建一个从 list 派生的匿名类，因此：

```
List<Person> persons = new ArrayList<Person>(){{
   add(new Person("first", "id1"));
   add(new Person("second", "id2"));
   // etc..
}}; 
```

请注意，这使用静态块中的初始化并创建一个内部类（如果您不期望它可能会引起一些混乱）。请注意，内部块可以循环并添加动态数量的对象（正如您在问题编辑中所指出的那样）。

但为什么不这样做：

```
List<Person> persons = new ArrayList<Person>();
persons.add(new Person(...)); 
```

ETC。？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:43:00.483

一个**List** Object 可以包含多种类型的**Objects**。因此，在**列表**中，您可以保存一个**人员对象**以及一个这样的人员**列表**

```
List<Person> myList = new List<Person>();
Person p1 = new Person();
Person p2 = new Person();
myList.add(p1);
myList.add(p2);
Person p3 = new Person();
List<Object> globalList= new List<Object>();
globalList.add(myList );
globalList.add(p3); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T09:43:04.767

只是不要创建本地引用，您可以这样做：

```
List<Person> list = new ArrayList<Person>();
for( /* add here gardian */ ) {
    list.add(new Person("first", "id1"));
} 
```

# active-directory - Active Directory 和 XServe 之间的同步时间

> ID：11666477
> 
> 赞同：0
> 
> 时间：2012-07-26T09:37:00.030
> 
> 标签：active-directory, osx-server

我正在寻找可以让我在 Active Directory 2003 服务器和 Snow Leopard XServe 服务器之间同步时间的建议或脚本。我遇到的问题是 xserve 无法绑定到活动目录，因为时钟超过 5 分钟。

有谁知道是否可以在两台机器之间发送脚本或任何可以保持时钟同步的解决方案？

提前谢谢了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:22:02.203

如果您使用的是 Active Directory，那么域控制器应该充当 NTP 服务器，[您的 OS X 机器可以使用](http://labs.hoffmanlabs.com/node/1660)它来同步其时间。

# objective-c - 分段控制

> ID：11666480
> 
> 赞同：1
> 
> 时间：2012-07-26T09:37:15.053
> 
> 标签：objective-c, ios, uisegmentedcontrol

我想知道如何将 uiview 添加到标注右键，并且我已经为切换地图的段控制进行了编码，我不断收到一个断点，上面写着 MKMapView 选择段索引）无法识别的选择器。

你能帮忙吗？

代码：

```
- (IBAction)setMap:(id)sender{

    switch (((UISegmentedControl *)sender).selectedSegmentIndex) {
        case 0:
            map.mapType = MKMapTypeStandard;
            break;

        case 1:
            map.mapType = MKMapTypeSatellite;
            break;

        case 2:
            map.mapType = MKMapTypeHybrid;
            break;

        default:
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:44:34.300

这表明`sender`不是`UISegmentedControl`. 添加以下内容以查看它是什么：

```
NSLog(@"Sender=%@", NSStringFromClass([sender class])); 
```

# email - 如何在 linux 下从命令行发送电子邮件并包含 SMTP 服务器名称？

> ID：11666484
> 
> 赞同：1
> 
> 时间：2012-07-26T09:37:30.030
> 
> 标签：email, smtp, debian

我正在寻找一种适用于 linux 的单行电子邮件通知解决方案，但它不会假设机器邮件代理已经正确配置。

我想从命令中指定 SMTP 服务器。

最好，该解决方案应该在 Debian 上运行，而无需安装新工具。

# opengl - OpenGL中环境反射的SphericalMapping和CubeMapping的区别？

> ID：11666486
> 
> 赞同：1
> 
> 时间：2012-07-26T09:37:41.517
> 
> 标签：opengl, geometry, glsl, shader

我正在使用 OpenGL+GLSL 中的环境反射。

我想以最准确的方式反映物体周围的环境。

我发现基本上有两种方法可以做到这一点，一种称为 SphericalMapping，另一种是 CubeMapping。

它们在着色器代码上有所不同，但真的不明白它们之间有什么区别。

显然，对于立方体贴图着色器，我在一个立方体上打印了 6 张图像，片段着色器需要这些图像才能看到正确的像素，而对于我的球面贴图着色器，我有一张使用照片修饰软件扭曲或通过拍照获得的图像镜面反射球体。

球面映射的缺点似乎是相机（以及持有它的人）总是显示在图像中并且采样不均匀。这个最新的声明是什么意思？球面映射中的“黑洞”效应是什么意思？

我想找到这两种方法的差异和缺点的交互式演示，看起来立方体贴图是最好的，但不知道为什么。

在您看来，两者中哪一个最好，尤其是对于带有头部跟踪的实时模拟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:01:40.247

Spheremaps 通常用于小型、低质量的东西。

> 球面映射的缺点似乎是相机（以及持有它的人）总是显示在图像中

我们在这里谈论计算机图形；没有真正的相机，也没有真正的人。尝试使用图像谷歌搜索“spheremap”，您不会在图片中看到任何人。

> 抽样不均匀

这意味着球体贴图的中心对于相对较小的区域有很多像素，而在边界附近，对于相对较大的区域，您只有很少的像素。

立方体贴图几乎总是更好：您可以在运行时轻松生成它们，对硬件进行采样更快，即使您有 6 个纹理而不是 1 个，您也可以使用较低的分辨率并仍然获得相同的质量。

# c# - 将 BCD 转换代码从 Java 迁移到 .Net

> ID：11666488
> 
> 赞同：1
> 
> 时间：2012-07-26T09:37:46.020
> 
> 标签：c#, java, .net

我正在转换一个将 BCD 数据转换为 ASCII 的 Java 类

我正在将其转换为 .Net BCD 转换器

以下是从 java 转换的，但它给出了错误的转换值，例如 123456789 它给出了 123456153153

```
 public static string GetStringFromBcd(int[] b)
 {
   StringBuilder buffer = new StringBuilder();
   foreach (var t in b)
   {
     if ((t & 0x0000000F) == 0x0000000F && ((t >> 4) & 0x0000000F) == 0x0000000F)
     {
         break;
     }
     buffer.Append((t & 0x0000000F) + "");
     if ((t & 0x000000F0) != 0x000000F0)
     {
         buffer.Append(((t >> 4) & 0x0000000F) + "");
     }
   }
} 
```

可能是什么问题呢？

编辑： 答案：

我得到了数据已被 BCD 编码的源程序。我发现该逻辑没有任何问题，然后我发现了数据从网络流转换为字符串并随后转换为字节/整数数组的函数的来源。以下是代码

```
 int bytesRead = tcpClient.Receive(message);//, 0, bytetoReadSize);
 if (bytesRead == 0)
 {
     break;
     //the client has disconnected from the server
 }

 //message has successfully been received
 data += new ASCIIEncoding().GetString(message, 0, bytesRead); 
```

这是问题 ASCIIEncoding 不转换许多编码字符并给出 '?'63 而不是那些字符，当将 63 放入 BCD 转换逻辑时，它给出 153。

为了解决这个错误，我修改了最后一行，而不是解码，我只是将接收到的字节转换为字符。

```
 foreach (byte b in message)
 {
     data += ((char) b);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:33:34.807

如果你想坚持类似的东西

```
 public static String GetStringFromBcd(byte[] zoneBytes)
    {
        StringBuilder buffer = new StringBuilder();

        int b1 = (zoneBytes[zoneBytes.Length - 1] & 0xf0) >> 4;
        if ( (b1 == 13) || (b1 == 11) ) buffer.Append("-");

        for (int i = 0; i < zoneBytes.Length; i++)
        {
            buffer.Append((zoneBytes[i] & 0x0f));
        }

        return buffer.ToString();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:44:01.797

这是一个类似的[问题](https://stackoverflow.com/questions/2858202/how-to-convert-from-ebcdic-to-ascii-in-c-net)，它有几种不同的方式。

这是一个[网站](http://www.simotime.com/datazd01.htm)，它对您所面对的事物进行了极好的详细描述。

它不应该那么难，但是将它们处理为 int 会更加困难。

Zoned Decimal (BCD) 的转换非常简单，但是如果您从大型机中获取文件，这些文件已经通过 ASCII 传输进行了转换，则必须小心。它仍然可以转换，但是由于 FTP 期间 ebcdic 到 ascii 的转换，字节值会发生变化。

如果您处理二进制文件，则处理起来要容易得多。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace TestZoned
{
  class Program
  {
    public static String zoneToString(byte[] zoneBytes)
    {
        Encoding ascii = Encoding.ASCII;
        Encoding ebcdic = Encoding.GetEncoding("IBM037");
        byte[] asciiBytes = null;
        String str = null;

        int zoneLen = zoneBytes.Length;
        int i = zoneLen - 1;
        int b1 = zoneBytes[i];
        b1 = (b1 & 0xf0) >> 4;

        switch (b1)
        {
            case 13:
            case 11:
                zoneBytes[i] = (byte)(zoneBytes[i] | 0xf0);
                asciiBytes = Encoding.Convert(ebcdic, ascii, zoneBytes);

                str = "-" + ASCIIEncoding.ASCII.GetString(asciiBytes);
                break;

            default:
                zoneBytes[i] = (byte)(zoneBytes[i] | 0xf0);
                asciiBytes = Encoding.Convert(ebcdic, ascii, zoneBytes);

                str = ASCIIEncoding.ASCII.GetString(asciiBytes);
                break;
        }

        return (str);
    }

    static void Main(string[] args)
    {
        byte[] array =  { 0xf0, 0xf0, 0xf1 }; // 001
        byte[] pos = { 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7, 0xf8, 0xf9 }; // 123456789
        byte[] neg = { 0xf1, 0xf2, 0xf3, 0xf4, 0xf5, 0xf6, 0xf7, 0xf8, 0xd9 }; // -123456789

        Console.WriteLine("Converted: {0}", zoneToString(array));
        Console.WriteLine("Converted: {0}", zoneToString(pos));
        Console.WriteLine("Converted: {0}", zoneToString(neg));
    }
} 
```

}

# java - 在标签按下时将焦点从 Jtable 中的一个单元格转移到另一个单元格

> ID：11666489
> 
> 赞同：2
> 
> 时间：2012-07-26T09:37:50.530
> 
> 标签：java, swing, jtable

**概括：**

在我的桌面应用程序中，我加载了一个 Jtable，并且在编辑模式下，如果我按下 Tab，我需要将单元格的焦点放在下一个单元格上。

**问题：** 当我编辑单元格的值，然后当我按 Tab 时，焦点丢失。我在网上进行了一些搜索，我发现它发生是因为在每个 Tab 按下 Jtable 都会自行重新加载。

**可能的解决** 方案 我正在考虑的一个解决方案是获取我正在工作的单元格的索引，在全局变量中相同，然后按 Tab 键我可以获得下一个单元格的索引并将焦点设置在该单元格上。不知何故，它没有用。

请建议。

提前致谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T10:22:32.553

在我的脑海中，我认为我们通过`keystroke`在 tabes `InputMap`&中的自定义实现克服了这个问题`ActionMap`。

我们使用的实现允许我们执行“连续”编辑，即当用户按下回车键或 Tab 键时，我们移动到下一个可编辑单元格并开始编辑

```
InputMap im = table.getInputMap(JTable.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
ActionMap am = table.getActionMap();

KeyStroke tabKey = KeyStroke.getKeyStroke(KeyEvent.VK_TAB, 0);

Action moveNextCellAction = am.get(im.get(tabKey));

ContinousEditAction continousEditAction = new ContinousEditAction(table, moveNextCellAction);

im.put(tabKey, "Action.tab");

am.put("Action.tab", continousEditAction); 
```

`ContinousEditAction`负责查找下一个可编辑单元格。基本上，当动作被触发时，您通过`JTable.getEditingRow`&`JTable.getEditingColumn`方法来评估当前单元格（您还想通过 来检查表格是否处于编辑模式`JTable.isEditing`，否则您需要使用`JTable.getSelectedRow`& `JTable.getSelectedColumn`- 实际上您可能会侥幸完成此操作，但是这就是我解决问题的方式）。

从那里，您想要遍历单元格，直到找到可编辑的单元格。

基本上，您要检查到当前行的末尾，然后移动到下一行，直到不再存在行，这取决于您要执行的操作，您可以选择循环回到表格的开头（单元格 0x0）然后一直走，直到你到达你现在的位置。

小心，如果你不小心，你可能会陷入连续循环：P。

`JTable.setRowSelectionInterval`如果您没有找到任何可编辑的单元格，您可能只想使用&选择下一个可用的单元格，否则`JTable.setRowSelectionInterval`您可以调用`JTable.editCellAt(nextRow, nextCol)`

但这一切都归结为您想要实现的目标。

此外，您可以将相同的想法应用于回车键；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T06:04:52.523

通常tab一旦获得焦点就在jTable中工作。如果你想通过按下Tab键编辑下一个单元格，在jTable的按键释放事件中给出以下代码。

```
 if (evt.getKeyCode() == 9) {
            jTable1.editCellAt(nextRowIndex, nextColumnIndex);
    } 
```

# jquery - 自动聚焦到登录页面

> ID：11666496
> 
> 赞同：0
> 
> 时间：2012-07-26T09:38:26.413
> 
> 标签：jquery

我有一个带有用户名的登录表单，带有提交的密码，重置按钮。每当我启动我的应用程序时，我希望光标默认指向用户名。谁能告诉我怎么做。我们正在使用 jquery 来做到这一点.我是 jquery 的新手。

```
<div class="form-row">
                <div class="label" style="width: 130px;">Username:</div>
                <div class="input-field">
                    <input type='text' name='j_username' id='j_username' autocomplete="off" class="input-field-style"/>
                </div>
            </div> 
```

这是我用于用户名的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:40:08.593

在同一页面上的脚本中：

```
$(function() {
    $('#j_username').focus();
}); 
```

lg,

弗洛

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:43:10.013

尝试这个

```
<input type="text" 'text' name='j_username' id='j_username' autocomplete="off" class="input-field-style" autofocus="autofocus"/> 
```

帮助链接：http://www.w3schools.com/html5/att_input_autofocus.asp

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:40:22.433

你可以通过一点js来做到这一点

```
<body onload="focus()"> 
```

和

```
<script type="text/javascript">
function focus() {
     document.getElementById("#j_username").focus();
}
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:42:43.163

You don't have to use JS for this. HTML5 elements now has an `autofocus` attribute:

```
<input type="text" name="j_username" autofocus="autofocus" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T09:43:40.247

作为迄今为止收到的答案的替代方案，存在并且可以使用“自动对焦”属性，但不幸的是，这在 IE 中不起作用：

```
<input type='text' name='j_username' id='j_username' autofocus autocomplete="off" class="input-field-style"/> 
```

# html - 如何将对象对齐到页面中心？

> ID：11666498
> 
> 赞同：4
> 
> 时间：2012-07-26T09:38:34.287
> 
> 标签：html, css, alignment

我尝试将网页中的对象与以下 CSS 对齐，但[对象未位于中心](https://dl.dropbox.com/s/4892yp0se30z5g7/Capture.PNG?dl=1)。我应该怎么办？

```
left:50%;
margin-left:-25%; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T09:48:35.860

你能试试这个吗？它工作正常

适用于：Internet Explorer - Google Chrome - Safari - Mozilla

```
<!-- Div content -->
<div style="margin:0 auto;text-align:center">

      <!-- Div align in the middle -->
      <div style="margin-left:auto;margin-right:auto;text-align:center">
            <p>Hello my text is in the middle :-) </p>
      </div>

</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T09:44:19.260

对象的父元素（它们的容器）必须设置为 position:relative

对象本身应设置为 position:absolute, left:50%, margin-left 负值（以像素为单位），即对象值的一半。

或者，您也可以尝试简单地将父元素设置为 text-align:center 并将对象本身设置为“margin:0 auto;”

# android - Android：使用 GSON 库解析 JSON 数组时出错

> ID：11666500
> 
> 赞同：3
> 
> 时间：2012-07-26T09:38:36.710
> 
> 标签：android, json, gson, android-parser

> **可能重复：**
> [GSON 抛出“预期 BEGIN_OBJECT 但为 BEGIN_ARRAY”？](https://stackoverflow.com/questions/9598707/gson-throwing-expected-begin-object-but-was-begin-array)

**场景：**我正在使用 GSON 库解析一个 JSON 格式的 API。这是我正在解析的 JSON 文件：

```
{
  "questions": [
    {
      "question_1": "Question 1",
      "options": [
        "option_1 : option1",
        "option_2 : option2",
        "option_3 : option 3",
        "option_4 : option 4"
      ]
    },
    {
      "question_2": "Question 2",
      "options": [
        "option_1 : option 1",
        "option_2 : option 2",
        "option_3 : option 3"
      ]
    }
  ]
} 
```

**我的对象类看起来像这样：**

```
public class Practise_Question_Object {

    public List<Questions> questions;

    public class Questions {

        @SerializedName("question")
        public String Question;

        public List<Options> options;

        public class Options {

            public String Option_1;

            public String Option_2;

            public String Option_3;

            public String Option_4;
        }

    } 
```

**问题** 我的问题是，每当我尝试解析值时，它都会显示错误`java.lang.IllegalStateException: Expected BEGIN_OBJECT but was BEGIN_ARRAY at line 1 column 53`

如果我将“选项”从数组更改为对象，那么我可以轻松解析。但是在我的项目中（从 PHP 端）我不能使用 Object.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:51:46.643

如果你改变这一行怎么办：

```
public List<Options> options; 
```

到：

```
public Options[] options; 
```

看起来您的 JSON 包含一个`Options`对象数组。

* * *

否则我可以建议发布您在 Web 服务中使用的实际代码，以确认您使用的是 GSOM DOM 样式的自动解析。

# php - 保存 cookie 数据，字符串语言不是英文

> ID：11666503
> 
> 赞同：0
> 
> 时间：2012-07-26T09:38:41.480
> 
> 标签：php, javascript

我发现如果我通过 JS 函数保存 cookie，如下所示：（w3c 学校示例）

```
 function setCookie(c_name,value,exdays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString()+"; path=/project/");
document.cookie = c_name + "=" + c_value;
} 
```

我使用 setCookie("hello","你好",30) 来保存 cookie 并使用 php 代码来回显它：

```
<?php
echo $_COOKIE['hello'];
?> 
```

它将输出“%u4F60%u597D”。不是“你好”。</p>

所以我在 setCookie 函数中交换编码方式，如下所示：

```
function encode_setCookie(c_name,value,exdays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
//use encodeURIComponent encode string and decodeURIComponent decode it.
var c_value=encodeURIComponent(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString()+"; path=/project/");
document.cookie = c_name + "=" + c_value;
} 
```

并再次使用 php echo 。它会输出“你好”，因为我想从 cookie 中读取。

我尝试通过 PHP 代码保存 cookie 并通过 JS 读取它。它也很好用。

或者 encodeURIComponent/decodeURIComponent 足以在 PHP 和 JS 中保存和读取 cookie。

这是关于保存在 cookie 中的字符串不是英文的问题，谢谢。

有更多更好的解决方案吗？

我找到了解决方案。

[jQuery 饼干](https://github.com/carhartl/jquery-cookie/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:54:07.487

这是一个编码问题。阅读此页面以了解 unicode： [http ://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

# ruby-on-rails-3.2 - 用户和个人关联

> ID：11666506
> 
> 赞同：1
> 
> 时间：2012-07-26T09:38:50.510
> 
> 标签：ruby-on-rails-3.2

我正在为一个应用程序设计数据模型，其中我有不同类型的用户，如学生、员工、父母等。让我们说他们每个人都称为一个人。对于每个包含实体特定信息的实体，我都有单独的表。我有一个用户表，其中包含用户特定信息，如登录 ID、密码等。我在用户表上的两列的帮助下建立了用户和个人之间的关系：1\. person_id 整数 2\. person_type 整数

以下是类定义：

```
class User < ActiveRecord :: Base
  belongs_to :person, :polymorphic =>true, :dependent => :destory
end

class Student < ActiveRecord :: Base
  has_one :user, :as => :person
end

class Parent < ActiveRecord :: Base
  has_one :user, :as => :person
end

class Employee < ActiveRecord :: Base
  has_one :user, :as => :person
end 
```

我希望您对此设计提出宝贵意见。没问题还是需要任何更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T09:31:46.837

这一切都取决于您的应用程序的业务逻辑。从我目前所了解的情况来看。我会保持简单，并调用一个模型/表`User`并有一个 column `category`，它可以区分用户的类型。

否则，您还可以有布尔列：`student`, `parent`, `employee`. 然后你可以做类似的事情：

```
If @user.student
  ... do something here
elsif @user.parent
  ... etc etc 
```

# php - 在不循环的情况下找到数组中的最小值？(PHP)

> ID：11666509
> 
> 赞同：1
> 
> 时间：2012-07-26T09:38:58.347
> 
> 标签：php, arrays

我有这个数组：

```
$myArray = array("0x40x40" => 64, "0x50x40" => 65, "0x60x40" => 66); 
```

现在我想找到最小的值，在本例中是 64（第一个键/值对）。除了循环遍历数组并比较值之外，还有其他方法吗？最小值并不总是第一个，并且这些值也不是按顺序排序的。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T09:41:05.833

You can use the [min()](http://php.net/manual/en/function.min.php) function to get your answer nicely.

`echo min(2, 3, 1, 6, 7); // 1`

or

```
$myArray=array(2, 3, 1, 6, 7);
echo min($myArray); // 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T09:41:16.007

Using min:

```
$myArray = array(
    "0x40x40" => 64, "0x50x40" => 65, "0x60x40" => 66, "0x70x40" => 67, "0x80x40" => 68, "0x90x40" => 70, "0x100x40" => 71, "0x110x40" => 74, "0x120x40" => 76);

echo min($myArray); 
```

[http://codepad.org/NXhfZpBm](http://codepad.org/NXhfZpBm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T09:42:45.400

Use below statement in your code and you are done.

```
min($myArray); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:50:54.247

如果您只需要最低或最高值

```
$myArray = array( "0x40x40" => 64, "0x50x40" => 65, "0x60x40" => 66 ); 
asort ( $myArray );
$item = current( $myArray ); 
```

这是从最低到最高，相反 U 需要 arsort() 函数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T09:45:07.000

将返回 #array('0x40x40')

```
$myArray = array(
        "0x40x40" => 64, 
        "0x50x40" => 65, 
        "0x60x40" => 66, 
        );
    array_keys($myArray, min($myArray)); 
```

# java - 这需要 JAR 文件吗？

> ID：11666511
> 
> 赞同：2
> 
> 时间：2012-07-26T09:39:04.990
> 
> 标签：java, logging

当我尝试使用 TextPad 进行复制、粘贴和编译时出现此错误：

```
C:\Documents and Settings\Jon\Desktop\DesHelper.java:10: error: package org.slf4j does not exist
    private static org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(DesHelper.class);
                            ^
C:\Documents and Settings\Jon\Desktop\DesHelper.java:10: error: package org.slf4j does not exist
    private static org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(DesHelper.class);
                                                   ^
2 errors 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:44:02.243

杰普 您可以注释代码中的所有日志语句（请不要）或将 slf4j.jar 添加到类路径中。从这里获取：[http ://www.slf4j.org/download.html](http://www.slf4j.org/download.html)

另一种方法（如果仍然使用您的代码）是使用作为 JDK 一部分的日志记录。slf4j 是多个日志框架（commons-logging，log4j，...）的日志外观

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:11:11.297

您的类路径中缺少 slf4j 库。要解决此问题：

[1) 从http://www.slf4j.org/download.html](http://www.slf4j.org/download.html)下载 slf4j.jar

2) 放入`C:\Documents and Settings\Jon\Desktop\`

3) 运行`javac -cp slf4j.jar DesHelper.java`。（jar 的名称可能会根据版本而变化）

# jquery - 加载jQuery循环中的所有幻灯片后调用函数

> ID：11666512
> 
> 赞同：1
> 
> 时间：2012-07-26T09:39:08.987
> 
> 标签：jquery, slideshow, jquery-cycle

在加载 jquery 循环滑块中的**所有幻灯片**后，我试图调用一个函数。在插件网站[http://jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)的选项页面上，我发现了一个名为**after**的选项，可用于在加载每张幻灯片后调用一个函数。**但我希望在加载所有**幻灯片而**不是每张**幻灯片时调用一个函数。

*我在 onAfter() 中添加了 alert("hello")，每次寻呼机点击后我都会看到 alert hello。我真的不想要。*

我使用以下循环初始化。

```
 $('#lb_main-slide').cycle({ 
            fx:     'fade',
            speed:  '100', 
            timeout: 0, 
            startingSlide: index,
            pager:  '#lb-slidethumbs', 
            pagerAnchorBuilder: imagepager2,
            after: onAfter,
            requeueOnImageNotLoaded: true
            }); 
```

成功加载所有幻灯片后，是否有任何可能的方法可以调用单个函数？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:14:18.023

为了解决这个问题，我在核心 jquery.cycle.all.js 文件中调用了我的函数，在

```
function buildPager(els, opts) 
```

后

```
opts.updateActivePagerLink(opts.pager, opts.startingSlide, opts.activePagerClass); 
```

所以我在构建循环的寻呼机后调用了我的函数。它对我很有效。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T02:09:38.920

我遇到了同样的问题。但我读到 JavaScript 中有不同类型的函数。我意识到我试图将对全局函数的引用传递给 'after' 属性。那没有用。

尝试做这样的事情：

```
 $('#images').cycle({
         timeout: 5000,
         fx:'fade',
         after: (function() {
             MyClass.performNow();
         })
    }); 
```

# php - 在 kohana 框架上添加额外的页面

> ID：11666518
> 
> 赞同：0
> 
> 时间：2012-07-26T09:39:28.690
> 
> 标签：php, html, frameworks, kohana

我已经开始阅读 kohana 文档，但并没有真正理解，我需要在控制器中定义的索引页面，`public $template = "index";`但是如何将其他`html, php`文件添加为链接？因为如果我只是将它们放在视图的文件夹中，它就找不到它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:19:50.190

如果您需要先创建一个新页面，则需要在控制器中创建一个函数。您还需要在该函数中分配视图文件。例如，这里我将在用户控制器中创建一个用户登录页面。

```
<?php
Class Controller_User extends Controller_Welcome
{
   /**For get User Login page**/
    public function action_login()
    {
        $view= View::factory('login');
        echo $view;     
    }
}
?> 
```

login.php 文件放在 application/views/login.php

现在您的登录页面在 URL 中调用，例如[http://mysite.com/user/login/](http://mysite.com/user/login/)

如果要调用普通模板文件中的页面，首先需要指定模板文件。然后您可以轻松地调用模板文件中的页面。

例如，

```
user.php controller:

    <?php
    Class Controller_User extends Controller_Welcome
    {
       /**For get User Login page**/
        public function action_login()
        {
        $this->template='template.php';
            $view= View::factory('login');
        $this->template->content = $view;
        }
    }
    ?>

template.php view file:

        -- your html datas here --
        <?php  
            echo new View("header");
         ?>
        -- your html datas here --
        <?php  
                echo $content; ?>

        -- your html datas here --
        <?php  
                echo new View("footer");
         ?>
        -- your html datas here -- 
```

这里页眉是 header.php，页脚是 footer.php。所有这些文件都放在应用程序/视图/文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:00:04.590

`public $template = "index"`表示`Controller_Template`该类将从`views/index.php`文件加载视图。您可以将所需链接直接添加到此文件或动态添加 - 使用模板变量或子模板。

这个维基可能会有所帮助： http: [//kerkness.ca/kowiki/doku.php](http://kerkness.ca/kowiki/doku.php)

# html - 如何在html中创建多行标签

> ID：11666519
> 
> 赞同：0
> 
> 时间：2012-07-26T09:39:34.770
> 
> 标签：html, asp.net-mvc-3

我也坚持在 html 和 MVC3 中创建多行标签（使用剃刀引擎）。如果你有，请给出想法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:12:29.700

我使用下面的代码并解决了问题：

```
word-wrap: break-word; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-26T18:43:07.507

您可以使用**Label** MVC Helper 方法来呈现标签，并使用**white-space** CSS 属性使其成为多行：

```
<div style="white-space:pre-wrap">@Html.Label("", Model.MyMultiLineText)</div> 
```

# android - 销售队伍与 Android？

> ID：11666525
> 
> 赞同：1
> 
> 时间：2012-07-26T09:39:58.640
> 
> 标签：android, salesforce

我想从我的 Android 程序中连接销售队伍请建议哪一种是正确的方法来实现这一点我是销售队伍的新手我在 Android 应用程序开发方面有一些知识。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T16:37:11.350

您肯定希望将 REST API 用于移动应用程序。SOAP API 真的很重，更适合服务器到服务器的集成。开始为 Salesforce.com 构建 Android 应用程序的最佳方法是查看适用于 Android 的 Salesforce 移动 SDK：

[http://wiki.developerforce.com/page/Mobile_SDK](http://wiki.developerforce.com/page/Mobile_SDK)

该页面上有一个非常有用的入门 PDF 链接。

但是，SDK 主要用于启动新应用程序，因此在将其集成到现有应用程序之前，您需要做一些工作。您需要的主要内容是 oAuth 2.0 用户代理登录和 REST 包装器。

您可能还会发现这个应用程序很有用——我将它放在一起用于 Dreamforce '11 的演示，那是在 Android 移动 SDK 出现之前不久，所以我自己编写了 oAuth 和 REST 的东西。对您来说可能是一个更简单的起点。

[https://github.com/tomgersic/DreamforcengerHunt](https://github.com/tomgersic/DreamforcengerHunt)

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:54:19.347

您可以使用 RESTful 接口或 SOAP Web 服务。后者更容易处理恕我直言。在 salesforce 中[的设置下，下载合作伙伴或企业 WSDL](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_partner.htm)（[合作伙伴 = 通用，企业 = 特定于您的 SF 实例](https://stackoverflow.com/questions/7197197/salesforce-different-wsdl-files-and-when-to-use)）。现在使用[wsdl2java](http://sourceforge.net/projects/wsdl2javawizard/)，您可以为这些 wsdl 条目创建存根。将它们导入您的 android 应用程序并使用它们。有关Salesforce.com 的 Java 示例，请参见[此处。](http://wiki.developerforce.com/page/Java_Partner_WSDL_Samples_10.0)

确保您的用户具有“做 API”的权限。如果您想制作“生产”/商业应用程序，您可能需要研究 SSO。此外，要登录，请记住使用正确的密码，您可能需要添加 API 密钥（使用 SF 中的设置选项卡生成）。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T16:48:44.243

[尝试查看开发人员布道者添加到forcedotcom github](https://github.com/forcedotcom)的一些开源 SDK 项目

不同平台上有很多很好的示例，包括[带有 phonegap/html5](https://github.com/forcedotcom/callback-android)的 android 和用于 android（iOS 和 Android）的[原生 SDK，](https://github.com/forcedotcom/SalesforceMobileSDK-Android)以帮助您通过身份验证并构建您的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-03T07:50:35.423

Salesforce 提供用于在移动设备上开发的移动 SDK，这里是 android SDK 的链接： [http ://wiki.developerforce.com/page/Getting_Started_with_the_Mobile_SDK_for_Android](http://wiki.developerforce.com/page/Getting_Started_with_the_Mobile_SDK_for_Android)

你需要：

1.  下载 SDK。
2.  添加包含在 SDK 的 native/SampleApps 文件夹中的示例项目（确保在导入项目时检查包含到工作区）。
3.  获取您的远程访问表单销售人员并在您的应用程序中进行更新。

    --这应该让您开始使用 salsforce 的示例应用程序。

在此之后，您需要将现有代码修改为您自己的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-11T14:29:02.020

您可以前往 trailhead 并开始浏览它，在使用您自己的应用程序时，您将不得不学习很多有关 smartStore 和 smartSync 的知识，

我确实使用salesforce作为数据库提供者实现了一个smartStore应用程序，如果你想要我可以上传它来驱动并分享一个链接给你，如果你对使用或理解流程有任何疑问，请随意询问..

# ember.js - Ember 路由器和控制器逻辑

> ID：11666526
> 
> 赞同：7
> 
> 时间：2012-07-26T09:40:00.347
> 
> 标签：ember.js, ember-old-router

我很想知道关于新的 ember 路由和控制器，哪一层的逻辑是什么：

如果我们以下面的路线为例：

```
step1: Ember.Route.extend
  route: '/step1'
    connectOutlets: (router, event) ->
      exercise = WZ.Exercise.createRecord()
      router.get('exercisesNewStep1Controller').set 'groups', WZ.store.find(WZ.Group)
      router.get('exercisesNewController').connectOutlet 'step', 'exercisesNewStep1', exercise 
```

我的 ExercisesNewStep1Controller 目前是无逻辑的：

```
WZ.ExercisesNewStep1Controller = Em.Controller.extend() 
```

建议的建议似乎是让路由只负责将正确的插座分配给正确的控制器，并使用控制器中的任何其他逻辑。

我应该将我的控制器重构为如下所示：

```
WZ.ExercisesNewStep1Controller = Em.Controller.extend
  createGroup: ->
    @set 'groups', WZ.store.find(WZ.Group) 
```

这是一个非常简单的例子，但我认为逻辑成立。

我有点困惑所有图层的位置。我认为必须创建所有这些 xxxController、xxxView 文件并在它们之间进行耦合会产生少量开销。

我喜欢 ember，但我只想提出这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T13:24:33.833

我与 Tilde 团队进行了几次交流，Tom Dale 教我们遵循[hvgotcodes](https://stackoverflow.com/a/11668923/90741)提出的方式。

但在与 Peter Wagenet 讨论后出现了改进：作为对我的[询问](https://twitter.com/wagenet/status/226349117524295680)的答复，Peter & Yehuda[减轻](https://twitter.com/wagenet/status/226553125484503041)了我们对 Tom 解释的立场。

所以我会总结整个画面说：

*   行为应该在路由的事件处理程序中进行高级编码，
*   但是分解的低级原语可能*（/应该？）*在控制器中本地化。

原因是任何处理都应该在给定的路由范围内，以确保整个应用程序的一致行为，而不是向应用程序的任何部分开放所有可能的处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T12:05:54.600

在 Sproutcore 中（如果这不适用于从 Sproutcore 派生的 Ember，有人会说出来），控制器应该几乎总是只是愚蠢的代理。他们什么都不做。

假设这适用于 Ember，我不会将逻辑移到那里。

> 推荐的建议似乎是让路由只负责将正确的插座分配给正确的控制器，并使用控制器中的任何其他逻辑。

我认为这是正确的。从我在网上看到的例子来看，路由只是状态。转到[github，这个链接](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/route.js)，你会看到 Routes 扩展了 State。所以应用程序级别的事件应该在你的路由（即状态）中处理。在这里您可以获得相关对象并将它们放入适用的控制器中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T10:21:43.723

[https://speakerdeck.com/u/tomdale/p/emberjs-more-than-meets-the-eye](https://speakerdeck.com/u/tomdale/p/emberjs-more-than-meets-the-eye)幻灯片 55。

事实上，我不知道它是否与当前的良好实践保持同步，但模型管理（创建/编辑/删除）似乎没有在任何地方表示。在我看来，它必须响应视图事件以及在 connectedOutlets 方法中完成。所以你的第一个例子对我来说看起来不错。此外，在这张幻灯片中，控制器应该包含非常少的逻辑……但什么是真正的“非常少的逻辑”？

您的问题对我来说非常重要，因为我们没有任何其他建议，尤其是来自经验丰富的 ember 用户。

# php - 平均 dateInterval php

> ID：11666531
> 
> 赞同：7
> 
> 时间：2012-07-26T09:40:09.747
> 
> 标签：php, datetime, date, diff, dateinterval

您好，我需要计算一些 DateInterval 之间的平均时间。

实际上我有一些像这样的 Dateinterval ：

```
for ($i = 0 ; $i < count($startDate) ; $i++)
    {
          $diffTable[] = date_diff($finishDate[$i], $startDate[$i]);
          echo $diffTable[$i]->format("%Y-%M-%d %H:%i:%s");
    } 
```

这是输出：

```
00-00-0 00:13:17
00-00-0 00:7:47
00-00-0 00:7:14
00-00-0 00:10:39 
```

我需要计算这个间隔之间的平均时间。这里只有分钟和秒，但可以是月或年。

我找不到容易计算的好方法。我可以简单地添加每个 dateInterval 与这样的转换：

`sec + 60xmin + 3600xHour ...`

他们使用模数 (%)。

但我希望有另一种方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:08:16.883

好吧，如果我发现某事更好，我就写这个：

```
function dateIntervalToSecond($interval)
    {
        return $interval->y     * 31556926 
                + $interval->m  * 2629743
                + $interval->d  * 6400
                + $interval->h  * 3600
                + $interval->i  * 60
                + $interval->s;
    } 
```

它并不完美，但总比没有好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:43:09.657

您应该将分钟乘以 60，将小时乘以 3600，等等，直到只剩下几秒钟。从那里很容易计算平均值。

# python - Python 和 Gdata：将联系人添加到组不起作用

> ID：11666537
> 
> 赞同：3
> 
> 时间：2012-07-26T09:40:41.280
> 
> 标签：python, contacts, gdata-api

我正在尝试通过 python 使用联系人 api，以便将联系人添加到 Gmail 中的组。[这是我的小组用这个](https://developers.google.com/google-apps/contacts/v3/#retrieving_all_contact_groups)检索

```
Atom Id: http://www.google.com/m8/feeds/groups/user%40gmail.com/base/6d1fccc00a474e6c
Group Name: Newsletter
Last Updated: 2012-04-17T14:04:51.565Z
Extended Properties: Self
Link: https://www.google.com/m8/feeds/groups/user%40gmail.com/full/6d1fccc00a474e6c
Edit Link: https://www.google.com/m8/feeds/groups/user%40gmail.com/full/6d1fccc00a474e6c
ETag: "QHs9fTVSLit7I2A9WhVXFkoLQw0." 
```

所以我正在尝试使用此代码来[更改组成员身份](https://developers.google.com/google-apps/contacts/v3/#changing_group_membership)

```
def add_group_membership(gd_client, contact_url, group_atom_id):
  contact = gd_client.GetContact(contact_url)
  contact.group_membership_info.append(gdata.contacts.data.GroupMembershipInfo(href=group_atom_id))
  try:
    updated_contact = gd_client.Update(contact)
    return updated_contact
  except gdata.client.RequestError, e:
    if e.status == 412:
      # Etags mismatch: handle the exception.
      pass
  return None 
```

但

```
add_group_membership(gd_client, contact_url, 'http://www.google.com/m8/feeds/groups/user%40gmail.com/base/6d1fccc00a474e6c') 
```

回应

```
gdata.client.RequestError: Server responded with: 404, Group not found. 
```

我的联系人 = gd_client.GetContact(contact_url) 是对的

```
<ns0:entry xmlns:ns0="http://www.w3.org/2005/Atom" xmlns:ns1="http://schemas.google.com/g/2005" xmlns:ns2="http://www.w3.org/2007/app" ns1:etag="&quot;Rn04fTVSLyt7I2A9WhJQEkQKRwI.&quot;">[...]<ns2:edited>2012-07-26T08:07:47.335Z</ns2:edited></ns0:entry> 
```

怎么了？

# java - 这个java程序是如何工作的？

> ID：11666538
> 
> 赞同：1
> 
> 时间：2012-07-26T09:40:48.080
> 
> 标签：java, enums

在学习 java 时，我在 SO 周围闲逛，发现问题[116574](https://stackoverflow.com/questions/116574/java-get-file-size-efficiently)。**接受**的答案包含一些我不理解的 java 代码。

编辑：代码基本上是这样的：

```
public enum SomeEnum {

    FUN0 {
        @Override
        public void function() {
              System.out.println("0 0 0 0 0");
        }
    },
    FUN1 {
        @Override
        public void function() {
              System.out.println("1 1 1 1 1");
        }
    };

    public abstract void function();

    public static void main(String[] args) throws Exception {

            for (SomeEnum test : values()) {
                    test.function();
            }
    }
} 
```

由于代码的组织，它看起来很先进，我对此很好奇。如果 SO 适合问这种问题：有人愿意解释一下这段代码吗？

枚举是如何包含 main 的？它不应该是一个类吗？（Eclipse 对此不太满意，而是在询问“选择 Java 应用程序”后运行 main 函数）这个 FUN0、FUN1 的构造是什么？

指向一些解释该主题的教程文本的指针已经让我很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:43:01.187

这是一个`enum`每个实例都覆盖该方法的`getResult`方法。

您应该记住的是，an`enum`或多或少只是一个普通课程。

> ***为什么 FileSizeBench 是一个枚举而不是一个类？***

因为它是使用`enum`关键字而不是`class`. 使用An`enum`是因为`SomeEnum`具有预定义（在编译时知道）数量的实例。

# windows-phone-7 - Windows Phone - 带模板的选框

> ID：11666542
> 
> 赞同：1
> 
> 时间：2012-07-26T09:40:56.033
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone

在 Windows 手机中，我可以轻松地选取文本块。但是是否有任何解决方案来选择我可以定义模板并将其绑定到项目列表的项目列表。

谢谢 Gokoulane Ravi

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:28:16.053

Although it's not a WP style...

1.  Add storyboard to page resources:

    ```
    <phone:PhoneApplicationPage.Resources>  
        <Storyboard x:Name="Scroll" RepeatBehavior="Forever">  
           <DoubleAnimation From="480" To="-480" Storyboard.TargetName="translate" Storyboard.TargetProperty="X" Duration="0:0:5" />  
        </Storyboard>  
    </phone:PhoneApplicationPage.Resources> 
    ```

2.  Add ScrollViewer, add StackPanel inside and TextBlock inside:

    ```
     <ScrollViewer x:Name="LongScrollViewer" VerticalScrollBarVisibility="Disabled" HorizontalScrollBarVisibility="Hidden" Margin="0,212,0,339" IsEnabled="False" >
                <StackPanel Margin="0" Height="58">
                    <TextBlock x:Name="LongTextBlock" Text="Very long, real long, it's a long text." Margin="0" Style="{StaticResource PhoneTextLargeStyle}" VerticalAlignment="Top" 
                        HorizontalAlignment="Center" TextAlignment="Center" TextTrimming="None" TextWrapping="NoWrap">
                        <TextBlock.RenderTransform>
                            <TranslateTransform x:Name="translate" />
                        </TextBlock.RenderTransform>
                    </TextBlock>
                </StackPanel>
            </ScrollViewer> 
    ```

3.  In page's Loaded method make sure TextBlock's text is long enough for scrolling:

    ```
     Size size = new Size(double.PositiveInfinity, double.PositiveInfinity);
        this.LongTextBlock.Measure(size);
        size = this.LongTextBlock.DesiredSize;

        if (size.Width > this.ActualWidth)
        {
            this.Scroll.Begin();
        } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:20:46.687

你可以这样做。但是，您需要编写自定义 XAML 来实现此功能。Blend 可以在这里帮助您创建自定义动画并作为选取框运行。

# c# - 比较和交换多个值的编程建议

> ID：11666543
> 
> 赞同：1
> 
> 时间：2012-07-26T09:41:00.947
> 
> 标签：c#, database, performance, algorithm, switch-statement

一个国家被发送到该方法，然后我希望该方法返回该大陆。我设置它的当前方式是类似于此的 switch 语句。这个方法可以调用几千次。

```
 private string changeCountry(string country)
 {   
     switch (country)
     {
        case "Ireland":  return "Europe";
        case "England":  return "Europe";
        case "France":   return "Europe";      
        case "Brazil":   return "America";
        case "Chile":    return "America";
     }
 } 
```

问题是我需要能够动态添加和删除国家和大陆，这种方法意味着当我添加国家或大陆时我必须重新编译代码。

我正在考虑的解决方案是有一个包含 2 列、国家和大陆的数据库表，我可以轻松地添加它们，然后有这样的东西，它会被调用几千次。

```
 private string changeCountry(string country)
 {   
     // open db connection
     // Select continent where country = 'country'
     // close db connection
     return continent;
 } 
```

这是一个好方法还是任何人都可以提出更好的方法。我不太担心处理时间，但我也不希望这个过程花费大量时间。我更想知道我是否忽略了更好的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:55:31.877

分 3 步：

1）有你谈到的表：国家和大陆，具有外键约束（国家必须在大陆中）。

2) 第一次需要该数据时，将所有数据加载到 a`Dictionary<string, List<string>>`中，键是大陆名称，值是与其关联的国家/地区列表。
随后的调用不会再次加载它，它们会重用该字典。

`Con`3）当你想要一个特定国家的大陆时，`Cou`你可以这样做：

```
string Con = myDictOfCountriesToContinent.FirstOrDefault(kv => kv.Value.Contains(Cou)); 
```

然后，您可以在 DB 中添加任意数量的国家和大洲，您的代码将从这些信息中受益。

请注意，如果您要求的国家/地区在 DB 中不存在，则 3) 中的查询将返回 null。相应地检查。

性能方面，字典非常好，几千次不是问题。
昂贵的是往返DB，最多只能赚1。

为了提高速度，如果单个大陆没有重复的国家/地区，您可以将`List<string>`替换为 。`HashSet<string>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:50:43.637

如果内容是动态的，那么您不能对数据进行硬编码。我认为查询数据库数千次不会影响性能。

但是这几千个请求的频率是多少？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:50:43.527

从维护的角度来看，我建议您在数据库中创建一个查找表并使用它来获取结果。

另一种解决方案是在配置文件中为每个国家/地区声明密钥，并为大陆创建一个枚举，因为大陆是固定的。使用这些数据来获取国家/地区的大陆。如果要添加新国家/地区，只需将其添加到配置中即可，无需重新编译。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:55:41.260

数据库可以正常工作 - 除非您想四处看看是否有人将其作为 Web 服务提供。

如果您担心由于多次选择而导致速度变慢，您可以：

1.  从数据库中下载所有内容一次 - 将其放入内存（作为列表、字典或其他内容）并每隔一段时间更新一次所有内容。

2.  如果您使用的是 mysql - 以上但将其放入 MEMORY 表中。这样你仍然可以使用 sql 代码，性能也不会差很多。

（补充：澄清2-不要将永久数据放在该表中。复制它并将其用作缓存。当数据库关闭时，内存表内容会丢失）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-26T09:48:21.460

使用字典：

```
Dictionary countryContinents = new Dictionary<string,string>();

//add items
countryContinents.Add("Ireland","Europe");

//retrieving
string continent = countryContinents["Ireland"];
//continent equals Europe 
```

可能是该项目不存在，您可以检查一下：

```
string continent;
if (countryContinents.TryGetValue("Ireland", out continent))
{
    //continent equals Europe
} 
```

对于“不重新编译”要求，您可以将此字典写入文件并在运行时（应用程序启动时）读取它。并在您更改 Dictionary 或退出应用程序时将其写入文件。

[http://blogs.msdn.com/b/adam/archive/2010/09/10/how-to-serialize-a-dictionary-or-hashtable-in-c.aspx](http://blogs.msdn.com/b/adam/archive/2010/09/10/how-to-serialize-a-dictionary-or-hashtable-in-c.aspx)

# android - Trying to get TabHost to work with a Progress Dialog

> ID：11666552
> 
> 赞同：1
> 
> 时间：2012-07-26T09:41:17.363
> 
> 标签：android, android-intent, tabs, progressdialog

Hello i am trying to get my TabHosts to work with Progress Dialog but i keep getting these errors for loading a ListView in the respective activities but i keep getting these errors.

code:

```
public class AndroidTabLayoutActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //final ProgressDialog dialog = ProgressDialog.show(getParent(), "Please wait..", "Doing stuff..", true);
        final ProgressDialog pd = new ProgressDialog(this);
        pd.setMessage("Please wait...");
        pd.show();
        Runnable myRun = new Runnable(){
        public void run(){
            Looper.myLooper().prepare();
            //DO EVERYTHING YOU WANT!
            TabHost tabHost = getTabHost();

            // Tab for All
            TabSpec allspec = tabHost.newTabSpec("All");
            allspec.setIndicator("All", getResources().getDrawable(R.drawable.icon_photos_tab));
            Intent allIntent = new Intent(AndroidTabLayoutActivity.this, AllApplicationsActivity.class);           
            allspec.setContent(allIntent);

            // Tab for Installed Application
            TabSpec systemspec = tabHost.newTabSpec("Installed Applications");
            // setting Title and Icon for the Tab
            systemspec.setIndicator("Applications", getResources().getDrawable(R.drawable.icon_videos_tab));
            Intent systemIntent = new Intent(AndroidTabLayoutActivity.this, SystemApplicationsActivity.class);
            systemspec.setContent(systemIntent);

            // Adding all TabSpec to TabHost
            tabHost.addTab(allspec); 
            tabHost.addTab(systemspec); 

            //Finally
            runOnUiThread(new Runnable() {
            public void run() {

            pd.dismiss();
            }
            });
        }
        };

        Thread T = new Thread(myRun);
        T.start();

    }

} 
```

EDIT: now im getting an error when i launch the program

```
07-26 17:55:05.637: E/AndroidRuntime(25603): FATAL EXCEPTION: Thread-974
07-26 17:55:05.637: E/AndroidRuntime(25603): android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
07-26 17:55:05.637: E/AndroidRuntime(25603):    at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4286)
07-26 17:55:05.637: E/AndroidRuntime(25603):    at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:885)
07-26 17:55:05.637: E/AndroidRuntime(25603):    at android.view.View.requestLayout(View.java:12881)
07-26 17:55:05.637: E/AndroidRuntime(25603):    at android.view.View.requestLayout(View.java:12881)
07-26 17:55:05.637: E/AndroidRuntime(25603):    at android.view.View.requestLayout(View.java:12881)
07-26 17:55:05.637: E/AndroidRuntime(25603):    at android.view.View.requestLayout(View.java:12881)
07-26 17:55:05.637: E/AndroidRuntime(25603):    at android.view.View.requestLayout(View.java:12881)
07-26 17:55:05.637: E/AndroidRuntime(25603):    at android.view.View.requestLayout(View.java:12881)
07-26 17:55:05.637: E/AndroidRuntime(25603):    at android.view.ViewGroup.addView(ViewGroup.java:3211)
07-26 17:55:05.637: E/AndroidRuntime(25603):    at android.view.ViewGroup.addView(ViewGroup.java:3193)
07-26 17:55:05.637: E/AndroidRuntime(25603):    at android.widget.TabHost.setCurrentTab(TabHost.java:349)
07-26 17:55:05.637: E/AndroidRuntime(25603):    at android.widget.TabHost.addTab(TabHost.java:236)
07-26 17:55:05.637: E/AndroidRuntime(25603):    at com.example.androidtablayout.AndroidTabLayoutActivity$1.run(AndroidTabLayoutActivity.java:43)
07-26 17:55:05.637: E/AndroidRuntime(25603):    at java.lang.Thread.run(Thread.java:856)
07-26 17:55:05.927: D/OpenGLRenderer(25603): Flushing caches (mode 0)
07-26 17:55:05.967: D/OpenGLRenderer(25603): Flushing caches (mode 0)
07-26 17:55:29.132: D/OpenGLRenderer(25603): Flushing caches (mode 2)
07-26 17:55:29.372: D/AndroidRuntime(25603): Shutting down VM 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:43:04.667

代替：

```
Intent allIntent = new Intent(this, AllApplicationsActivity.class);            
Intent systemIntent = new Intent(this, SystemApplicationsActivity.class); 
```

和：

```
Intent allIntent = new Intent(AndroidTabLayoutActivity.this, AllApplicationsActivity.class);           
Intent systemIntent = new Intent(AndroidTabLayoutActivity.this, SystemApplicationsActivity.class); 
```

**更新第二次崩溃**

您的首字母缩写`ProgressDialog`不正确。

```
ProgressDialog pd = new ProgressDialog(getContext());
pd.setMessage(...);
pd.show(); 
```

# sql - 超时已过。操作完成前超时时间已过或服务器无响应

> ID：11666556
> 
> 赞同：2
> 
> 时间：2012-07-26T09:41:37.983
> 
> 标签：sql, wpf, sql-server-2008, stored-procedures

我正在使用存储过程来检索记录并将其显示在网格中。

第一次，它会抛出一个异常：

> 超时已过。在操作完成之前超时时间已过或服务器没有响应。
> 
> 堆栈跟踪
> 
> 在 System.Data.SqlClient.SqlConnection.OnError(SqlException 异常，Boolean breakConnection)
> 在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException 异常，Boolean breakConnection)
> 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
> 在 System.Data .SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
> 在 System.Data.SqlClient.SqlDataReader.ConsumeMetaData()
> 在 System.Data.SqlClient.SqlDataReader.get_MetaData()
> 在 System.Data .SqlClient.SqlCommand.FinishExecuteReader（SqlDataReader ds，RunBehavior runBehavior，字符串 resetOptionsString）
> 在 System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
> 在 System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String 方法, DbAsyncResult 结果)
> 在System.Data.SqlClient.SqlCommand.ExecuteReader（
> CommandBehavior 行为，String 方法）的 System.Data.SqlClient.SqlCommand.ExecuteReader（CommandBehavior 行为，String 方法）的System.Data.SqlClient.SqlCommand.RunExecuteReader（CommandBehavior cmdBehavior，RunBehavior runBehavior，布尔 returnStream，String 方法）
> （ )

我用了

```
SELECT * 
FROM sys.dm_tran_session_transactions 
```

检查我的数据库中当前有多少活动事务，但我没有找到。

第二次以后这个存储过程完美运行（不会抛出超时异常）。这种行为的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:55:49.863

如果您的存储过程很复杂，或者您的数据库设计很差（例如缺少索引），那么 SQL Server 可能无法提出最佳执行计划，并且可能无法评估所有选项，因此它会评估多达它可以并且会选择一些东西。花费的时间可能会超过您的超时限制。

第二次，您正在执行相同的存储过程，因此 SQL Server 可以保留它第一次所做的所有工作，并且能够完成评估其选项并在您再次超时之前将数据返回给您。

我有一个像这样的过程。如果重新启动我的服务器，我第一次运行 proc 我总是会超时，但第二次它总是有效。

# iphone - Vertical Slider Using touch only iPhone

> ID：11666557
> 
> 赞同：-1
> 
> 时间：2012-07-26T09:41:47.877
> 
> 标签：iphone, ipad

I am developing an app in which I need to use vertical slider which is having particular range i.e it slide between 0 to 100 values etc.

I have tried but not getting proper solution

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:02:59.850

更改**滑块的****变换**属性。

 **基本上第**一个参数**是滑块的**现有变换矩阵，****第二个**参数是您要旋转滑块的 n**度数（以弧度为单位） *。*

```
 IBOutlet UISlider *slider;

slider.transform = CGAffineTransformRotate(slider.transform, 270.0/180*M_PI); 
```**

# iphone - Set background for 320 * 70 EAGLView

> ID：11666559
> 
> 赞同：1
> 
> 时间：2012-07-26T09:41:57.410
> 
> 标签：iphone, objective-c, opengl-es, eaglview

I want to set the background image for 320 * 70 EAGLView (using openGL). I set

```
glOrthof(0, backingWidth, 0, backingHeight, -1.0f, 1.0f); 
```

where `backingWidth = 320; backingHeight = 70;`

Sorry if my issue is obvious or some of the points are incorrect. The question is how to make the coordinates in a vertices array to set background properly. I'm new to openGL, but as far as I know these coordinates should be having degrees of 2\. How should I set these coordinates to 320 and 70. I've investigated Apple's sample code of GLImageProcessing and they have 512 * 512 vertex array that covered 320 * 480 of the view. How can I relate 512 * 512 vertex array of ImageCoordinate on the screen to real coordinates?

This is my code, and now part of image is now shown:

```
// Clear the view
    glClear(GL_COLOR_BUFFER_BIT);

    glBlendFunc(GL_SRC_ALPHA, GL_ONE);

    glColor4f(1., 1., 1., 1.);

    glPushMatrix();

    glEnable(GL_TEXTURE_2D);
    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);

    {
        // Draw our background oscilloscope screen
        const GLfloat vertices[] = {
            0., 0.,
            512., 0., 
            0.,  256.,
            512.,  256.,
        };
        const GLshort texCoords[] = {
            0, 0,
            1, 0,
            0, 1,
            1, 1,
        };

        glBindTexture(GL_TEXTURE_2D, bgTexture);

        glVertexPointer(2, GL_FLOAT, 0, vertices);
        glTexCoordPointer(2, GL_SHORT, 0, texCoords);

        glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);
    } 
```

# javascript - How to resolve this conflict with jQuery

> ID：11666562
> 
> 赞同：1
> 
> 时间：2012-07-26T09:42:04.813
> 
> 标签：javascript, jquery

Can anyone please help me resolve this conflict with my javascript validation?

The form does not submit. But if I remove `onsubmit="return btnSubmitPD_OnClick()` it redirect the form correctly. But of course I need that function.

Here's my code:

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Testing</title>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
$('#Submit').click(function() {
    var emailVal = $('#email').val();
    $.post('checkemail.php', {'email' : emailVal}, function(data) {
        if(data=='exist') {
            alert('in'); return false;
        }else{
            $('#form1').submit();
        }

    });
});});
</script>
<script type="text/javascript"> 
function appIsEmail(str){
    var at="@";
    var dot=".";
    var lat=str.indexOf(at);
    var lstr=str.length;
    var ldot=str.indexOf(dot);
    if (str.indexOf(at)==-1) return false; 

    if (str.indexOf(at)==-1 || str.indexOf(at)==0 || str.indexOf(at)==lstr) return false;
    if (str.indexOf(dot)==-1 || str.indexOf(dot)==0 || str.indexOf(dot)==lstr) return false;
    if (str.indexOf(at,(lat+1))!=-1) return false;
    if (str.substring(lat-1,lat)==dot || str.substring(lat+1,lat+2)==dot) return false;
    if (str.indexOf(dot,(lat+2))==-1) return false;
    if (str.indexOf(" ")!=-1) return false;

     return true;
}

function btnSubmitPD_OnClick(){
    frmReg = document.getElementById("form1");

    if (!appIsEmail(frmReg.email.value)){
        alert("Please enter a valid email address!");
        frmReg.email.focus();
        return false;        
    }

    return true;
}
</script>
</head>
<body>
<form id="form1" name="form1" method="post" action="view.php" onsubmit="return btnSubmitPD_OnClick()">
  <p>
    <input type="text" name="email" id="email" />
  </p>
  <p>
    <input type="button" name="Submit" id="Submit" value="Submit" />
  </p>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:46:18.923

几件事：

最好将提交事件绑定到您的表单，而不是提交按钮上的单击事件，这是为了满足用户在电子邮件文本字段上按 Enter 的情况：

```
$('#form1').submit(function() { // change from $('#Submit').click 
```

然后在新的`submit`处理程序中，调用电子邮件验证方法：

```
var emailVal = $('#email').val();
if(btnSubmitPD_OnClick() === false) return false; 
```

然后，为避免无限`submit`循环，您需要更改：

```
else{
            $('#form1').submit();
        } 
```

至

```
else{
            $('#form1')[0].submit(); // native submit on form element
        } 
```

或者正如 mplungjan 在他的评论中指出的那样，只需更改您的

```
<input type="button" name="Submit" id="Submit" value="Submit" /> 
```

使用`type="submit"`

```
<input type="submit" name="Submit" id="Submit" value="Submit" /> 
```

并添加

```
if(btnSubmitPD_OnClick() === false) return false; 
```

在您致电之前`$.post`

# java - Java - 反序列化一个扁平化的 XML 文件。（XStream、JAXB、MOXy 等等……）

> ID：11666565
> 
> 赞同：3
> 
> 时间：2012-07-26T09:42:12.147
> 
> 标签：java, jaxb, xml-parsing, marshalling, xstream

我目前正在使用 XStream 来解析 XML 文件，但无法让它完成我需要它做的事情。如有必要，我将更改为另一个库，任何可以解决此问题的方法！

基本上，我正在尝试解析类似于以下内容的 XML 提要：

```
<product>
  <title>Transformers Best of Grimlock</title>
  <author1>Bob Budiansky</author1>
  <author2>Simon Furman</author2>
</product> 
```

我试图解析成这样的模型：

```
public class Product extends Model {

  public String title;

  public List<String> authors;

} 
```

标题效果很好，但我很难解析作者。不幸的是，不能以这样的“更明智”的格式获取 XML 提要：

```
...
<authors>
  <author>Bob Budiansky</author>
  <author>Simon Furman</author>
</authors>
... 
```

我能做些什么来将“author1”、“author2”等解析成一个列表吗？

请记住，我对 XStream 非常陌生（并且根本没有使用过 JAXB！），因此如果我必须编写任何自定义活页夹或其他任何东西，我将需要关于从哪里开始的指针。

感谢您的阅读，我期待任何可以挽救我理智的潜在解决方案！:)

* * *

**编辑：**我更新了帖子以显示我没有绑定到 XStream。真的很难找到答案 - 也许我只是不知道要搜索什么......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:24:04.513

以下方法应该适用于任何可以从 StAX 解组的 XML 绑定库`XMLStreamReader`。我将在下面使用标准 JAXB (JSR-222) API 进行演示。（注意：我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人）。

**产品**

我们将注释模型，就好像`authors`属性映射到`author`元素一样。

```
package forum11666565;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Product extends Model {

    public String title;

    @XmlElement(name = "author")
    public List<String> authors;

} 
```

**演示**

我们将使用`XMLStreamReader`. 在此基础上，`XMLStreamReader`我们将创建一个`StreamReaderDelegate`报告任何以元素开头`author`的元素，称为`author`.

```
package forum11666565;

import java.io.FileInputStream;
import javax.xml.bind.*;
import javax.xml.stream.*;
import javax.xml.stream.util.StreamReaderDelegate;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Product.class);

        XMLInputFactory xif = XMLInputFactory.newFactory();
        XMLStreamReader xsr = xif.createXMLStreamReader(new FileInputStream("src/forum11666565/input.xml"));
        xsr = new StreamReaderDelegate(xsr) {

            @Override
            public String getLocalName() {
                String localName = super.getLocalName();
                if(localName.startsWith("author")) {
                    return "author";
                } else {
                    return localName;
                }
            }

        };

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Product product = (Product) unmarshaller.unmarshal(xsr);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(product, System.out);
    }

} 
```

**输入.xml**

```
<product>
  <title>Transformers: Best of Grimlock</title>
  <author1>Bob Budiansky</author1>
  <author2>Simon Furman</author2>
</product> 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<product>
    <title>Transformers: Best of Grimlock</title>
    <author>Bob Budiansky</author>
    <author>Simon Furman</author>
</product> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T14:56:12.297

在使用 XStream 解析之前，您可以通过 XSLT 转换初始 XML：

XSLT 样式表会根据需要转换 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="product">
        <xsl:element name="product">
            <xsl:for-each select="*[not(starts-with(name(.), 'author'))]">
                <xsl:copy-of select="." />
            </xsl:for-each>
            <xsl:element name="authors">
                <xsl:for-each select="*[starts-with(name(.), 'author')]">
                    <xsl:element name="author">
                        <xsl:value-of select="."/>
                    </xsl:element>
                </xsl:for-each>
            </xsl:element>
        </xsl:element>
    </xsl:template>

    <xsl:template match="*">
        <xsl:copy select=".">
            <xsl:apply-templates/>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

# python - Python LoggerAdapter 正在向 STDOUT 制作重复的日志条目

> ID：11666566
> 
> 赞同：4
> 
> 时间：2012-07-26T09:42:13.270
> 
> 标签：python, logging

我正在尝试将上下文信息添加到我的 python 脚本的日志输出中。本质上，我使用 SocketServer 类来处理传入的网络连接，当客户端向服务器发送消息时，我想在 STDOUT 和一个包含时间、日志级别、客户端 IP 和收到消息。

我已经尝试使用过滤器（我无法工作，但我愿意接受建议）和 LoggerAdapter 来实现这个：http: [//pastebin.com/peT0rjA7](http://pastebin.com/peT0rjA7)

```
class ConnInfo:
    def __getitem__(self, name):
        if name == "ip":
            result = tlocal.ip
        if name == "cmd":
            result = tlocal.msg
        return result
    def __iter__(self):
        keys = ['ip', 'cmd']
        keys.extend(self.__dict__.keys())
        return keys.__iter__()

logging.basicConfig(level=logging.DEBUG,
                    format="%(asctime)s %(name)-12s %(levelname)-8s %(message)s",
                    datefmt="%d-%m %H:%M:%S",
                    filename="distpovadmin.log",
                    filemode="w")
console = logging.StreamHandler()
console.setLevel(logging.INFO)
formatter = logging.Formatter('%(name)-12s: %(levelname)-8s %(message)s')
nodeCommsConFormatter = logging.Formatter('%(name)-12s: %(levelname)-8s %(ip)-4s %(cmd)-8s %(message)s')
console.setFormatter(formatter)

#nodeCommsConLogging = logging.LoggerAdapter(logging.getLogger('NodeCommsConnection').addHandler(console.setFormatter(nodeCommsConFormatter())), ConnInfo())
CommsConConsole = logging.StreamHandler()
CommsConConsole.setLevel(logging.INFO)
CommsConConsole.setFormatter(nodeCommsConFormatter)
nodeCommsConLogging = logging.LoggerAdapter(logging.getLogger('NodeCommsConnection'), ConnInfo())
logging.getLogger('NodeCommsConnection').removeHandler(console)
logging.getLogger('NodeCommsConnection').addHandler(CommsConConsole)

logging.getLogger('').addHandler(console) 
```

当我像这样调用 nodeCommsConLogging 时：

```
nodeCommsConLogging.info("Message Received") 
```

我在 STDOUT 日志中得到重复的条目

```
NodeCommsConnection: INFO     192.168.1.8 REQ;     Message Received
NodeCommsConnection: INFO     Message Received 
```

提前感谢您的任何帮助和建议！

编辑：添加代码示例

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T09:59:01.723

记录器是分层的。所以你有一个根记录器（名为`''`，即空白）。每个其他记录器都是根记录器的子级 - 最终。

在您的情况下，您具有以下层次结构：

```
 root
   +-- NodeCommsConnection 
```

如果您在子节点上记录某些内容，它将尝试处理它，然后将日志消息传递给父记录器**，除非**您设置`propagate`为`False`.

由于您将附加程序添加到`NodeCommsConnection`，它将使用此附加程序记录其消息，然后调用 root 将使用其附加程序进行记录 -> 控制台上的两个输出。

因此，要么将附加程序添加到根记录器（并删除默认控制台记录器），要么设置`propagate`为`False`：

```
logging.getLogger('NodeCommsConnection').propagate = False 
```

# ios - UIView that is shaped like a UIBezierPath?

> ID：11666567
> 
> 赞同：3
> 
> 时间：2012-07-26T09:42:21.683
> 
> 标签：ios, uiview, calayer, uibezierpath

Is it possible on iOS to make a regular UIView in some CGRect and add subviews to it and then tell that container UIView something like this:

```
containerView.layer.path = someClosedUIBezierPath 
```

?

And will then all of the subviews also be curved according to it's parent container view?

I know that every UIView has it's own CALayer and that would be the starting point for me.

I saw examples with animations but I don't see nothing like above (maybe because it isn't there :))

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T18:30:22.793

这有点晚了，但也许它会帮助某人：

`CAShapeLayer`您可以使用 a和视图的图层`mask`属性将视图剪辑到贝塞尔路径：

```
CAShapeLayer shapeMask = [[CAShapeLayer alloc] initWithFrame:containerView.bounds];
shapeMask.path = someClosedUIBezierPath.CGPath;
containerView.layer.mask = shapeMask;
[shapeMask release]; 
```

# javascript - Setting Transperancy To iFrame Inside Modal Popup

> ID：11666568
> 
> 赞同：0
> 
> 时间：2012-07-26T09:42:27.410
> 
> 标签：javascript, jquery, asp.net, css

I am showing a pdf in the background and a Popup over the top which contains an iFrame I want to set the transparency to the popup. It works perfectly in Chrome browser and the rest of the browser it doesn't work :( Here is the Fiddler Link : [Click Here](http://jsfiddle.net/kBqqF/8/)

Please Tell Me What should i do to work in all the browsers.

![enter image description here](../Images/2ad36c6b895d187fe966c307b38f26cc.png)![enter image description here](../Images/b661ff062cda98d3d746cd0c60d5a2af.png)

![enter image description here](../Images/d3c8bbe2e4e5667c54c0fa59a5062553.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-06T09:28:57.893

使用一点 javascript 和 CSS 这应该没什么大不了的，尽管 iframe 需要被包裹在一个 div 中，或者类似的东西：

```
<div id="iframeContainer">
    <iframe src="http://example.com"></iframe>
</div> 
```

然后在你的javascript中：

```
// Set the css opacity of the div NOT the iframe:
iframeContainer.style.opacity = 0.5; // the closer to 1 the less transparent
iframeContainer.style.MozOpacity=0.5; // the closer to 1 the less transparent
iframeContainer.style.filters.alpha.opacity=50; // the closer to 100 the less transparent 
```

# windows-phone-7 - 如果我在 Metro Apps 中使用 BlankApp(xaml) 模板并开发我想要的 UI，它是否也可以在 Windows phone 中相应地工作？

> ID：11666569
> 
> 赞同：1
> 
> 时间：2012-07-26T09:42:27.737
> 
> 标签：windows-phone-7, microsoft-metro, windows-runtime

1) 我的理解是，如果你开发一个 Metro 风格的应用程序，它可以在台式机、平板电脑和手机上运行？

2) 我可以理解，如果我使用像网格模板这样的标准模板来开发我的 Metro 风格应用程序，那么由于视觉状态转换，网格视图将被转换为列表视图，并且可以在 Windows 手机中使用。但我的疑问是，如果我们使用空白应用程序模板并根据客户要求开发我开发的任何 UI，它是否能够在 Windows Phone 中呈现或显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:22:33.923

1.  WinRT 应用程序（我假设这就是您所说的 Metro）将在台式机/平板电脑上运行，理论上是 Windows Phone 8 设备，无需更改代码。首先，请注意我们讨论的是 Windows Phone 8（不是当前的 Windows Phone 7）并且它运行，而不是 UI 布局完全正确。

2.  您可以根据自己的喜好设计应用程序，无论它符合 Metro 设计还是其他外观。如果它是在 WinRT 上开发的，它也应该与手机的代码兼容。

# iphone - 尝试下载应用程序数据时 XCode 4.4“权限被拒绝”

> ID：11666570
> 
> 赞同：6
> 
> 时间：2012-07-26T09:42:30.187
> 
> 标签：iphone, xcode4.4

将我的 XCode 更新到 4.4 版后，似乎无法从我的设备中检索应用程序数据。

在 Xcode 4.3（和所有以前的版本）中，我通过管理器（组织器 -> 设备 -> “设备” -> 应用程序 -> “应用程序” -> 下载）下载了我的应用程序数据（如我创建的 SQLite 数据库和文件）。

在 Xcode 4.4 中，当我尝试从沙箱下载文档时出现错误（“Permission Denied”）。

有什么新东西（也许是新设置？）我必须更改才能再次从我的设备获取应用程序数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T02:56:32.993

临时修复是使用 iTunes 从文档文件夹中获取文件。

在您的 .plist -> 信息属性列表 -> 添加：

`UIFileSharingEnabled`（是的）

重建并转到iTunes并从文件夹中获取文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T13:14:55.110

我遇到了同样的问题，将提供更多信息：

尽管 Xcode 给出了“Permission Denied”错误，但它确实将两个文件导出到 xcappdata 文件中，甚至不导出“Documents”文件夹。

```
AppDataInfo.plist
com.apple.PeoplePicker.plist 
```

然后我删除了该应用程序和设备上的所有数据，并使用 Xcode 重新安装了它。我在运行应用程序并生成日志后导出了数据（日志保存到文档文件夹中）。这个新的日志文件已正确导出到“Doc​​uments”文件夹中，但 Xcode 仍然生成“Permission Denied”错误。

在进一步运行应用程序并生成日志后，尝试导出新数据导致与重新安装后的第一次导出相同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T21:58:57.260

此错误似乎已在 Xcode 4.4.1 中修复

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T00:06:14.710

我一直在从磁盘映像临时安装 Xcode 4.3.3 并在那里使用 Organizer。不是最好的解决方案，但似乎是一个“好的”解决方法。

**更新：**似乎已在 Xcode 4.4.1 中修复

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T20:39:37.540

我在 Xcode 4.4 中也看到了这个问题，使用 iExplorer 来获取文件，其他人说 PhoneView 也应该可以工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T10:23:36.760

抱歉，这个问题的回复晚了。如果有人遇到这种情况，我认为值得提出。获取数据的最佳方法是使用名为“iPhone Explorer”或“iExplorer”的应用程序直接访问应用程序文件夹，两者都是免费的，可以让您直接访问 iOS 设备文件结构，并且可以从中复制 Documents 文件夹。

希望能帮助到你。谢谢 ：）

# javascript - 如何在获取 JSON 响应时使用 javascript 中的组合框在选定索引处获取关联的字段值

> ID：11666574
> 
> 赞同：0
> 
> 时间：2012-07-26T09:42:42.350
> 
> 标签：javascript, html, cordova, combobox, html-select

您好，我正在开发一个电话间隙应用程序并从 WCF 服务获取数据，该服务返回给我 JSON 响应。我需要在组合框中显示 DesignName 并传递相关的 designId……知道该怎么做吗？

这是json响应..

```
{
    "DesignResult":
    "{\"DesignId\":\"1\",\"DesignName\":\"Bedroom\"}     
     {\"DesignId\":\"2\",\"DesignName\":\"Dining\"}
     {\"DesignId\":\"5\",\"DesignName\":\"Entertainment\"}
     {\"DesignId\":\"4\",\"DesignName\":\"Occasional Tables\"}
     {\"DesignId\":\"6\",\"DesignName\":\"Office\"}
     {\"DesignId\":\"3\",\"DesignName\":\"Upholstery\"}"
} 
```

这是我可以在选定位置获取文本的功能

```
var combo1 = document.getElementById("designBox");
var val = combo1.options[combo1.selectedIndex].text; 
```

但这会给我 DesignName 因为我需要在框中显示 DesignName 但我需要获取关联的 DesignId ..

使用以下代码，我正在动态添加选项

```
for (var i = 0; i < jsonData.Design.length; i++) 
{
opt = document.createElement("option");  
opt.text= jsonData.Design[i].DesignName;
sel = document.getElementById("designBox");  
sel.add(opt); 
} 
```

修改代码如下，但为 DesignId 获取“Null”

```
var optElement = document.createElement("option");
optElement.setAttribute('value',jsonData.Design[i].DesignId);
optElement.innerHTML = jsonData.Design[i].DesignName; 
```

检索：

```
var combo1 = document.getElementById("designBox");
var test = combo1.getAttribute('value');
alert("test value is...."+test); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:04:08.930

问题出在 JSON 中。它的语法不正确。我已经为你解决了。

[在此处](http://www.json.org/js.html)彻底阅读和研究 JSON 。

```
var jsonData = '{
    "DesignResult": [
        {
            "DesignId": "1",
            "DesignName": "Bedroom"
        },
        {
            "DesignId": "2",
            "DesignName": "Dining"
        },
        {
            "DesignId": "5",
            "DesignName": "Entertainment"
        },
        {
            "DesignId": "4",
            "DesignName": "OccasionalTables"
        },
        {
            "DesignId": "6",
            "DesignName": "Office"
        },
        {
            "DesignId": "3",
            "DesignName": "Upholstery"
        }
    ]
}'; 
```

这是从服务器返回的字符串。现在使用`eval()`函数将其转换为 javascript JSON 对象。像，

```
jsonData = eval('(' + jsonData + ')'); 
```

现在您可以使用循环和所有方法来迭代这个 JSON 对象。要访问您需要的数据，您必须像这样实现它，

试试这个

```
var len = jsonData.DesignResult.length;

for(var i=0;i<len;i++){
alert("Name - "+jsonData.DesignResult[i].DesignName+" || ID - "+jsonData.DesignResult.DesignId);
} 
```

要修复您的代码，

```
var len = jsonData.DesignResult.length;
    for (var i = 0; i < len; i++) 
        {
        opt = document.createElement("option");  
        opt.text= jsonData.DesignResult[i].DesignName;
        opt.value = jsonData.DesignResult[i].DesignId;
        //better way is
        //opt.setAttribute('value',jsonData.DesignResult[i].DesignId);
        sel = document.getElementById("designBox");  
        sel.add(opt); 
        } 
```

我会推荐用 jQuery 来做，比如

假设您想将该“ComboBox”附加到 ID =“myCombo”的 Div（根据您的需要进行更新）

```
var selectElement = jQuery("<select />",{id:"mySel"});

for(var i=0;i<len;i++){
var optElement = jQuery("<option />",{value:jsonData.DesignResult[i].DesignId,text:jsonData.DesignResult[i].DesignName);
selectElement.append(optElement);
}

$("#myCombo").append(selectElement); 
```

要访问所选元素的名称和 ID，请使用

```
var Name = $("#mySel").html();
var ID = $("#mySel").attr('value'); 
```

* * *

删除旧代码

* * *

通过组合框，您是指 HTML 中的 SELECT 标记吗？

我发现很难理解你到底想做什么？

动态生成下拉菜单？或者是其他东西 ？

请让我们更深入地了解您想要做什么。:)

# zend-framework - Zend Framework：表单装饰器需要帮助

> ID：11666576
> 
> 赞同：0
> 
> 时间：2012-07-26T09:42:45.580
> 
> 标签：zend-framework, zend-form, zend-decorators

我是 Zend Framework 开发的新手。我对表单装饰器进行了一些研究，但我想要一些特定的东西。

这就是我要的：

```
<table>
<tr>
    <td colspan="2">
        <ul class="errors">
            <li>error</li>
        </ul>
     </td>
</tr>
<tr>
   <td>Label :</td>
   <td>input field</td>
</tr>
<tr>
   <td></td>
   <td>Submit Button</td>
</tr>
</table> 
```

我所拥有的是：

```
 $this->setElementDecorators(array(
        'ViewHelper',
        array(array('data' => 'HtmlTag'), array('tag' => 'td', 'class' => 'element')),
        array('Label', array('tag' => 'td')),
        array(array('row' => 'HtmlTag'), array('tag' => 'tr'))
    ));

    $submit->setDecorators(array('ViewHelper',
        array(array('data' => 'HtmlTag'), array('tag' => 'td', 'class' => 'element')),
        array(array('emptyrow' => 'HtmlTag'), array('tag' => 'td', 'class' => 'element', 'placement' => 'PREPEND')),
        array(array('row' => 'HtmlTag'), array('tag' => 'tr'))
    ));

    $this->setDecorators(array(
        'FormElements',
        'Errors'
        array('HtmlTag', array('tag' => 'table')),
        'Form'
    )); 
```

但它带有一个 htmlspecialchar 警告，并且 ul 是空的。

有没有可能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:53:28.617

验证错误与单个输入相关，而不是与表单相关，因此我相信您可能很难仅使用装饰器来使其工作。

我将简单地在视图脚本中单独呈现单个表单元素以及验证错误。您需要自己准备错误以显示并完全摆脱装饰器，只使用 ViewHelper。然后你可以这样做：

```
<form method="post">
  <table>
  <tr>
    <td colspan="2"><?php echo $this->errors; ?></td>
  </tr>
  <tr>
    <td><?php echo $this->form->foo->getLabel(); ?></td>
    <td><?php echo $this->form->foo; ?></dt>
  </tr>
  </table>
</form> 
```

# javascript - JQuery on MouseOver

> ID：11666578
> 
> 赞同：3
> 
> 时间：2012-07-26T09:42:53.833
> 
> 标签：javascript, jquery

I have an image of a product, with a "new product" image on top. When i throw the mouse on top of that, it takes it as if the mouse left the product picture.

Also, when i mouseover, the div that appears should not disappear because the mouse enters that.

Here is the current example: [http://jsfiddle.net/euhcc/8/](http://jsfiddle.net/euhcc/8/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T09:45:00.647

[http://jsfiddle.net/euhcc/9/](http://jsfiddle.net/euhcc/9/)

我认为您正在寻找的是`mouseleave`而不是`mouseout`.

检查更新的小提琴，看看这是否是你要找的。

在 jQuery 中，`mouseleave`检查更多被元素及其后代覆盖的“区域”，而不是元素本身。`$(this)`这意味着如果您有一个元素呈现在该元素上（在上下文`$(this)`中`$(this)`：尽管有元素），然后使用`mouseleave`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:48:39.713

如果您只针对现代浏览器 - 指针事件：无；

[http://jsfiddle.net/euhcc/10/](http://jsfiddle.net/euhcc/10/)

```
 <div style="position:absolute; width: 180px; pointer-events:none;"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:49:42.597

```
 $(document).ready(function(){
    $('.retslet').hide();

        $('.billede_wrap').hover(function(){
           $('.retslet').slideDown("fast");
        },function(){
           $('.retslet').slideUp("fast");
        });
    });
​ 
```

# google-maps-api-3 - How to make sure a large polyline doesn't go off-road?

> ID：11666581
> 
> 赞同：0
> 
> 时间：2012-07-26T09:42:57.203
> 
> 标签：google-maps-api-3, polyline, directions

I have an iOS app that uploads coordinates to a server. These coordinates can then be viewed in a map, through Google Maps. This is shown as a simple polyline. However, due to the GPS not being very precise, the polyline is often off-road.

![Screenshot](../Images/8022a7009d49d1c36e9082bc8c0b7336.png)

I tried using Google's direction service, but it has a limit on how many requests you can send (and there can be a few thousand points on the polyline).

I have no idea how I can solve this problem. Could anybody help me?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:51:08.057

我怀疑这样做的唯一方法是手动干预。我能想到以编程方式执行此操作的唯一方法将涉及对方向服务的大量查询（以获得“快速到路”功能），并且可能仍然需要有人检查它是否正确（或至少需要包括一些代码来寻找额外的循环来转弯或绕到没有意义的小路上）。

然而，如果有人从头到尾获得方向，然后拖动它们以匹配轨道，那么获得遵循道路的轨道版本将非常简单。

[此线程](https://groups.google.com/group/google-maps-js-api-v3/browse_frm/thread/97b05af2412881fd#)中讨论的论文可能会给您一些想法

# r - Combine two data.frames in R with differing rows

> ID：11666582
> 
> 赞同：3
> 
> 时间：2012-07-26T09:42:58.907
> 
> 标签：r, merge

I have two tables one with more rows than the other. I would like to filter the rows out that both tables share. I tried the solutions proposed [here](https://stackoverflow.com/questions/3171426/compare-two-data-frames-to-find-the-rows-in-data-frame-1-that-are-not-present-in).

The problem, however, is that it is a large data-set and computation takes quite a while. Is there any simple solution? I know how to extract the shared rows of both tables using:

```
rownames(x1)->k
rownames(x)->l
which(rownames(x1)%in%l)->o 
```

Here x1 and x are my data frames. But this only provides me with the shared rows. How can I get the unique rows of each table to then exclude them respectively? So that I can just cbind both tables together?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:04:26.383

*（我编辑了整个答案）* 您可以将 df 与`merge()`（来自 Andrie 的评论）合并。还要检查`?merge`以了解您可以作为`by`参数输入的所有选项，`0 = row.names`.

下面的代码显示了一个示例，其中可能是您​​的数据框（不同的行数和列数）

```
x = data.frame(a1 = c(1,1,1,1,1), a2 = c(0,1,1,0,0), a3 = c(1,0,2,0,0), row.names = c('y1','y2','y3','y4','y5'))
x1 = data.frame(a4 = c(1,1,1,1), a5 = c(0,1,0,0), row.names = c('y1','y3','y4','y5')) 
```

假设行名可以用作标识符，那么我们将它们作为新列按列合并：

```
x$id <- row.names(x)
x1$id <- row.names(x1)

# merge by column names
merge(x, x1, by = intersect(names(x), names(x1)))

# result
#   id a1 a2 a3 a4 a5
# 1 y1  1  0  1  1  0
# 2 y3  1  1  2  1  1
# 3 y4  1  0  0  1  0
# 4 y5  1  0  0  1  0 
```

我希望这能解决问题。

**编辑：**好的，现在我觉得很傻。如果所有列在两个数据框中都有不同的名称，那么您不需要将行名称作为另一列。只需使用：

```
merge(x,x1, by=0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:42:38.367

如果您只想要每个数据集中不重复的行：

```
rownames(x1)->k
rownames(x)->l
which(k%in%l) -> o
x1.uniq <- x1[k[k != o],];
x.uniq <- x[l[l != o],]; 
```

然后你可以用 rbind 加入他们：

```
x2 <- rbind(x1.uniq,x.uniq); 
```

如果您还想要重复的行，您可以添加它们：

```
x.repeated <- x1[o];
x2 <- rbind(x2,x.repeated); 
```

# iphone - Get Values form text Fields in UITableView Custom Cell

> ID：11666588
> 
> 赞同：10
> 
> 时间：2012-07-26T09:43:03.817
> 
> 标签：iphone, objective-c, ios5, xcode4.2

I have Created a custom `UITableViewCell`, the cell has multiple text fields, now i want to access the strings or data in these `UITextFields`. I know i can get the cell on `didSelectRowAtIndexPath`, but i need to get the text on a "Save" method.

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-26T09:56:53.047

Suppose you have four text fields with tags 100 and so on to 104. You will you Counter that shows how many cells you have in tableview.

```
for (int i=0; iLessThanCounter; i++) {

     NSIndexPath *indexPath = [NSIndexPath indexPathForRow: i inSection: 0];

     UITableViewCell *cell = [mytableview cellForRowAtIndexPath:indexPath];

     for (UIView *view in  cell.contentView.subviews){                

           if ([view isKindOfClass:[UITextField class]]){

                  UITextField* txtField = (UITextField *)view;

                  if (txtField.tag == 100) {
                         NSLog(@"TextField.tag:%u and Data %@", txtField.tag, txtField.text);
                  }
                  if (txtField.tag == 101) {
                        NSLog(@"TextField.tag:%u and Data %@", txtField.tag, txtField.text);
                  }
                  if (txtField.tag == 102) {
                        NSLog(@"TextField.tag:%u and Data %@", txtField.tag, txtField.text);
                  }
                  if (txtField.tag == 103) {
                       NSLog(@"TextField.tag:%u and Data %@", txtField.tag, txtField.text);
                  }
                  if (txtField.tag == 104) {
                       NSLog(@"TextField.tag:%u and Data %@", txtField.tag, txtField.text);

                  } // End of isKindofClass 
              } // End of Cell Sub View
         }// Counter Loop
    } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-27T08:59:26.103

You can simply use `viewWithTag` to get your desired views. Suppose you have one imageview with tag 100 and one text view with tag 200.

```
UITableViewCell *cell = [mytableview cellForRowAtIndexPath:indexPath];

UIImageView *getImageView = (UIImageView*)[cell.contentView viewWithTag:100];
UITextField *getTextView = (UITextField*)[cell.contentView viewWithTag:200]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T09:51:34.733

you need to create instance for each textField in your header file. Look at this sample demo

[http://windrealm.org/tutorials/uitableview_uitextfield_form.php](http://windrealm.org/tutorials/uitableview_uitextfield_form.php)

You can access textfield's text property for getting the text value for a particular textfield

# java - 如何处理调用空返回方法的方法中的空值？

> ID：11666590
> 
> 赞同：0
> 
> 时间：2012-07-26T09:43:06.237
> 
> 标签：java, null

这是示例代码片

```
public OperationResult beforeEverything(BDDObject savingObject) {

  String checkAssetRole = doCheckAssetRole(savingObject);

  if (checkAssetRole != null && !checkAssetRole.equals("MissingAssetRole")) {
    return new OperationResult(new OperationExecutionError("SIP-37006",
                               new String[] {"Duplicate asset roles have been defined: " + checkAssetRole},
                               getLocalizationGate()));
  }
  ArrayList<String> warnings = new ArrayList<String>();
  boolean showWarning = false;

  if (checkAssetRole != null && checkAssetRole.equals("MissingAssetRole")) {
    mLogger.debug("Warning  of Asset role");
    warnings.add(new String(
                "Asset role is missing. Do you want to save the record?"));
    showWarning = true;
  }
  return OperationResult.OK;
} 
```

问题是`doCheckAssetRole`方法返回`null`。那么我该如何在`beforeEverything()`方法中处理它。是否需要进行一些异常处理？如果是这样，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:50:09.453

放置一个`null`检查，然后抛出一个`RuntimeException`with `message`。

```
 if(checkAssetRole==null)
      throw new RuntimeException ("AssetRole value is NULL."); 
```

你的代码看起来像这样。

```
String checkAssetRole = doCheckAssetRole(savingObject);

if(checkAssetRole==null)
      throw new RuntimeException ("AssetRole value is NULL.");

if (checkAssetRole != null && !checkAssetRole.equals("MissingAssetRole")) {
return new OperationResult(new OperationExecutionError("SIP-37006",
                           new String[] {"Duplicate asset roles have been defined: " + checkAssetRole},
                           getLocalizationGate()));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:57:33.870

如果 doCheckAssetRole 为空，这取决于您想要的是您的业务逻辑：

*   它对应于一个有效的业务用例，所以你有一个对应的 OperationResult 对象来返回这个案例，所以你会做类似的事情

    ```
    if (checkAssetRole == null)
      return new NoAssetRoleOperationResult(); 
    ```

    调用代码将处理这种结果。

*   它永远不应该发生，除非用户犯了错误，然后你抛出一个检查异常。

    ```
    if (checkAssetRole == null)
      throw new NoAssetRoleException(yourMessage); 
    ```

    然后你做你的方法声明`throws NoAssetRoleExeption`。然后调用代码负责将此错误转发回用户。

*   它由于环境错误（远程服务器已关闭）而失败，您抛出一个未经检查的异常，例如`RuntimeException`，顶级代码将捕获它以指示存在环境故障。

*   它因为开发错误而失败（理论上这段代码不应该返回 null），然后你断言：

    ```
    assert checkAssetRole != null : "assetRole should not be null" 
    ```

选择你的案例:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:56:30.293

这取决于返回 null 时您想要做什么。如果你想在 doCheckAssetRole 返回 null 时返回一个值 NotOK，那么你可以使用这个片段。

```
public OperationResult beforeEverything(BDDObject savingObject) {

  String checkAssetRole = doCheckAssetRole(savingObject);

  if (checkAssetRole == null) {
    return OperationResult.NotOK; // Or something else that indicates to the calling method what happened.
  else {
    if (!checkAssetRole.equals("MissingAssetRole")) {
      return new OperationResult(new OperationExecutionError("SIP-37006",
                                 new String[] {"Duplicate asset roles have been defined: " + checkAssetRole},
                                 getLocalizationGate()));
    }
    ArrayList<String> warnings = new ArrayList<String>();
    boolean showWarning = false;

    if (checkAssetRole.equals("MissingAssetRole")) {
      mLogger.debug("Warning  of Asset role");
      warnings.add(new String(
                   "Asset role is missing. Do you want to save the record?"));
      showWarning = true;
    }
    return OperationResult.OK;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:53:00.243

从方法返回`null`是正常的做法。调用者需要检查它。在您的情况下，您可以进行检查并采取相应措施。如果你想抛出异常，那么你可以这样做。

```
 public OperationResult beforeEverything(BDDObject savingObject) {

     String checkAssetRole = doCheckAssetRole(savingObject);

     if (checkAssetRole == null) {
         // DO SOMETHING HERE. eg. throw new RuntimeException("Asset Role should not be null");
         //   or simply return null;

     } 
```

# sql - 为什么人们在 T-SQL 中使用 RaiseError 而不是 Print

> ID：11666593
> 
> 赞同：4
> 
> 时间：2012-07-26T09:43:10.793
> 
> 标签：sql, tsql, sql-server-2008-r2

我已经尝试了以下两个查询，它们同时执行。但是我仍然看到在许多存储过程中使用 RaiseError 而不是打印。

**查询一：**

```
BEGIN
    WAITFOR DELAY '00:00:03.00'

    PRINT 'DELAY 1 HAS ENDED'

    WAITFOR DELAY '00:00:03.00'

    PRINT 'DELAY 2 HAS ENDED'
END 
```

**查询 2：**

```
BEGIN
    WAITFOR DELAY '00:00:03.00'

    RAISERROR ('DELAY 1 HAS ENDED', 10,1) WITH NOWAIT

    WAITFOR DELAY '00:00:03.00'

    RAISERROR ('DELAY 2 HAS ENDED', 10,1) WITH NOWAIT

END 
```

两者都只在 6 秒后给出所需的输出（我在 SQL Server 2008 R2 中检查过）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T09:38:10.193

`RAISERROR`over的优点`PRINT`是您可以在消息中嵌入变量值，而无需使用`CAST`and `CONVERT`。例如：

```
 BEGIN
     DECLARE @m INT = 0

     WAITFOR DELAY '00:00:01.00'
     SET @m += 1;
     RAISERROR ('DELAY %d HAS ENDED', 10, 1, @m)

     WAITFOR DELAY '00:00:01.00'     
     SET @m += 1;
     RAISERROR ('DELAY %d HAS ENDED', 10, 1, @m)

 END 
```

这将在上面的两个示例中产生相同的输出，除了它将变量的值插入到消息中。`PRINT`你必须这样做：

```
PRINT 'DELAY ' + CONVERT(VARCHAR(5), @m) + ' HAS ENDED' 
```

...这是可能的，但很麻烦...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T09:46:56.553

我有和你一样的服务器版本，查询 2 在 3 秒后打印第一个结果（如预期的那样）。您必须在 Microsoft SQL Server Management Studio 中自行切换到“消息”选项卡才能看到该消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-20T23:01:37.573

我们使用 RAISERROR 来更轻松地跟踪实际错误。这很方便，因为您可以设置项目的严重性，并且您可以立即在“消息”部分看到结果。

PRINT 用于多步骤过程中非常便宜/快速的调试器，它显示了当我实际上并不期望立即获得反馈时我们实际获得了多远。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-06T04:25:01.047

有一个返回语句缓冲区导致 PRINT 语句仅在满时刷新（或 SQL Server 设计这样做）。RAISERROR(x, y, z) WITH NOWAIT 要么不使用该缓冲区，要么在添加其消息后似乎强制刷新该缓冲区。

除了这个和 Philippe 在他的回答中提到的嵌入式变量行为之外，低严重性 RAISERROR 和 PRINT 之间似乎没有真正的功能差异。

这是 Louis Davidson (@drsql) 的 2018 年简短帖子，其中包含更多代码示例和其他帖子的链接，其中包含更多详细信息：[https ://www.red-gate.com/simple-talk/blogs/outputting-status- t-sql-代码/](https://www.red-gate.com/simple-talk/blogs/outputting-status-t-sql-code/)。

至于我，在等待 PRINT 语句通过后，我现在对批处理脚本进度输出使用“RAISERROR(@msg, 0, 42) WITH NOWAIT”。

# css - 使用 CSS 定位工具提示

> ID：11666599
> 
> 赞同：0
> 
> 时间：2012-07-26T09:43:20.670
> 
> 标签：css, positioning, tooltip, window-resize

我的问题涉及工具提示定位。

我改编的脚本使用绝对定位将工具提示放置在链接中的几个 em 中。这对大屏幕来说效果很好。

但是，当屏幕缩小时，有时文本会出现在浏览器边缘附近，而工具提示只是挂在那里，在边缘上方。

为了解决这个问题，我想出了我自己的 hack-ey 解决方案：只需包含较小屏幕宽度的相对定位规则，以及我不完全理解的 @media 屏幕和 (max-width: 480px) 东西。这可行，但远非优雅。

理想情况下，当屏幕边缘进入时，工具提示会被屏幕边缘“推动”。不过，我不知道如何实现这一点。

希望这是有道理的。

无论如何，[这里是我使用过的页面的链接](http://huttj.com/about/)（工具提示文本有虚线下划线），[这里是它背后的 CSS](http://pastie.org/4335468)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:58:35.980

不要使用 em，而是使用百分比，但您必须记住，百分比将始终是工具提示大小的父级的百分比。

# jquery - 如何通过jQuery中的类获取特定html元素的innerHTML？

> ID：11666605
> 
> 赞同：9
> 
> 时间：2012-07-26T09:43:41.137
> 
> 标签：jquery, html, innerhtml

我有这样的 HTML 代码：

```
<div class="a">html value 1</div>

<div class="a">html value 2</div> 
```

如何访问`html value 1`和`html value 2`使用 jquery？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T09:48:18.543

分别地：

```
$('div.a:eq(0)').html(); // $('div.a:eq(0)').text();
$('div.a:eq(1)').html(); // $('div.a:eq(1)').text(); 
```

使用循环：

```
$('div.a').each(function() {
   console.log( $(this).html() ); //or $(this).text();
}); 
```

使用`.html()`

```
​$('div.a').html(function(i, oldHtml) {
  console.log( oldHtml )
})​​; 
```

**[演示](http://jsfiddle.net/2HpN7/)**

使用`.text()`

```
$('div.a').text(function(i, oldtext) {
  console.log( oldtext )
})​; 
```

**[演示](http://jsfiddle.net/2HpN7/1/)**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-26T09:55:45.053

```
$('.a')[0].innerHTML;
$('.a')[1].innerHTML; 
```

[小提琴](http://jsfiddle.net/zE2eM/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:58:43.313

试试这个：

```
var a = document.getElementsByClassName('a');
for (var i = 0; i < a.length; i++) {
    alert(a[i].innerHTML)
} 
```

[演示](http://jsfiddle.net/5QsAt/1/)

# c# - 从另一个 userControl c# 访问 userControl 上的对象

> ID：11666607
> 
> 赞同：1
> 
> 时间：2012-07-26T09:43:50.390
> 
> 标签：c#, object, static

我有这个`userControl`包含`ListBox`. 我想`ListBox`从另一个访问它`userControl`。

例如：

```
UserControl1.ListBox1.Items.Count; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T09:45:24.863

在您的用户控件中添加公共属性 ItemsCount

```
public int ItemsCount 
{
    get { return ListBox1.Items.Count; }
}

or

public ListBox MyListBox 
{
    get { return ListBox1; }
} 
```

访问整个列表框

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T09:49:00.860

`ListBox`在你的第一个属性中`usercontrol`获得它

```
public ListBox lstBox
{
  get { return this.listBox1;}
} 
```

现在像这样从其他用户控件访问 ListBox

```
usercontrol1 obj = new usercontrol1();
int itemCount =  obj.lstBox.Items.Count ; 
```

# c++ - 如何在互斥锁中优先考虑特权线程？

> ID：11666610
> 
> 赞同：36
> 
> 时间：2012-07-26T09:43:59.040
> 
> 标签：c++, multithreading, c++11, mutex

首先：我完全是互斥锁/多线程编程的新手，很抱歉提前出现任何错误......

我有一个运行多个线程的程序。线程（通常每个 cpu 核心一个）进行大量计算和“思考”，然后有时他们决定调用特定（共享）方法来更新一些统计信息。统计更新的并发性是通过使用互斥锁来管理的：

```
stats_mutex.lock();
common_area->update_thread_stats( ... );
stats_mutex.unlock(); 
```

现在来解决问题。在所有这些线程中，有一个特定的线程需要几乎
实时的优先级，因为它是唯一实际运行的线程。

我的意思是“几乎实时优先”：

假设线程 t0 是“特权线程”，而 t1....t15 是正常线程。现在发生的是：

*   线程 t1 获得锁。
*   线程 t2, t3, t0 调用 lock() 方法并等待它成功。
*   线程 t1 调用 unlock()
*   线程 t2、t3、t0 中的一个（据我所知是随机的）成功获取锁，而其他线程继续等待。

我需要的是：

*   线程 t1 获取锁。
*   线程 t2, t3, t0 调用 lock() 方法并等待它成功。
*   线程 t1 调用 unlock()
*   线程 t0 获得锁，因为它有特权

那么，做这件事最好的（可能是最简单的）方法是什么？

我在想的是有一个名为“privileged_needs_lock”的布尔变量。

但我认为我需要另一个互斥锁来管理对这个变量的访问......我不知道这是否是正确的方法......

附加信息：

*   我的线程使用 C++11（从 gcc 4.6.3 开始）
*   代码需要在 Linux 和 Windows 上运行（但目前仅在 Linux 上测试）。
*   锁定机制的性能不是问题（我的性能问题是内部线程计算，线程数总是很低，每个 cpu 核心最多一到两个）

任何想法都值得赞赏。谢谢

* * *

以下解决方案有效（三种互斥方式）：

```
#include <thread>
#include <iostream>
#include <mutex>
#include "unistd.h"

std::mutex M;
std::mutex N;
std::mutex L;

void lowpriolock(){
  L.lock();
  N.lock();
  M.lock();
  N.unlock();
}

void lowpriounlock(){
  M.unlock();
  L.unlock();
}

void highpriolock(){
  N.lock();
  M.lock();
  N.unlock();
}

void highpriounlock(){
  M.unlock();
}

void hpt(const char* s){
  using namespace std;
  //cout << "hpt trying to get lock here" << endl;
  highpriolock();
  cout << s << endl;
  sleep(2);
  highpriounlock();
}

void lpt(const char* s){
  using namespace std;
  //cout << "lpt trying to get lock here" << endl;
  lowpriolock();
  cout << s << endl;
  sleep(2);
  lowpriounlock();
}

int main(){
std::thread t0(lpt,"low prio t0 working here");
std::thread t1(lpt,"low prio t1 working here");
std::thread t2(hpt,"high prio t2 working here");
std::thread t3(lpt,"low prio t3 working here");
std::thread t4(lpt,"low prio t4 working here");
std::thread t5(lpt,"low prio t5 working here");
std::thread t6(lpt,"low prio t6 working here");
std::thread t7(lpt,"low prio t7 working here");
//std::cout << "All threads created" << std::endl;
t0.join();
t1.join();
t2.join();
t3.join();
t4.join();
t5.join();
t6.join();
t7.join();
return 0;
} 
```

* * *

按照建议尝试了以下解决方案，但它**不起作用**（使用“ g++ -std=c++0x -o test test.cpp -lpthread”编译）：

```
#include <thread>
#include <mutex>

#include "time.h"
#include "pthread.h"

std::mutex l;

void waiter(){
  l.lock();
  printf("Here i am, waiter starts\n");
  sleep(2);
  printf("Here i am, waiter ends\n");
  l.unlock();
}

void privileged(int id){
  usleep(200000);
  l.lock();
  usleep(200000);
  printf("Here i am, privileged (%d)\n",id);
  l.unlock();  
}

void normal(int id){
  usleep(200000);
  l.lock();
  usleep(200000);
  printf("Here i am, normal (%d)\n",id);
  l.unlock();    
}

int main(){
  std::thread tw(waiter);
  std::thread t1(normal,1);
  std::thread t0(privileged,0);
  std::thread t2(normal,2);

  sched_param sch;
  int policy; 

  pthread_getschedparam(t0.native_handle(), &policy, &sch);
  sch.sched_priority = -19;
  pthread_setschedparam(t0.native_handle(), SCHED_FIFO, &sch);

  pthread_getschedparam(t1.native_handle(), &policy, &sch);
  sch.sched_priority = 18;
  pthread_setschedparam(t1.native_handle(), SCHED_FIFO, &sch);

  pthread_getschedparam(t2.native_handle(), &policy, &sch);
  sch.sched_priority = 18;
  pthread_setschedparam(t2.native_handle(), SCHED_FIFO, &sch);

  tw.join();
  t1.join();
  t0.join();
  t2.join();

  return 0;  
} 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-26T16:15:54.163

我可以想到三种仅使用线程原语的方法：

## 三重互斥锁

三个互斥锁可以在这里工作：

*   数据互斥锁 ('M')
*   下一个访问互斥锁 ('N')，以及
*   低优先级访问互斥锁 ('L')

访问模式是：

*   低优先级线程：lock L, lock N, lock M, unlock N, { do stuff }, unlock M, unlock L
*   高优先级线程：lock N, lock M, unlock N, { do stuff }, unlock M

这样就可以保护对数据的访问，并且高优先级线程可以在访问数据方面领先于低优先级线程。

## 互斥体、条件变量、原子标志

执行此操作的原始方法是使用条件变量和原子：

*   互斥体 M；
*   康德瓦 C;
*   原子布尔 hpt_waiting;

数据访问模式：

*   低优先级线程：lock M, while (hpt_waiting) wait C on M, { do stuff }, 广播 C, unlock M
*   高优先级线程： hpt_waiting := true, lock M, hpt_waiting := false, { do stuff }, 广播 C, unlock M

## 互斥体、条件变量、两个非原子标志

或者，您可以将两个非原子布尔值与 condvar 一起使用；在这种技术中，mutex/condvar 保护标志，并且数据不是由互斥锁而是由标志保护的：

*   互斥体 M；

*   康德瓦 C;

*   bool data_held, hpt_waiting;

*   低优先级线程：lock M, while (hpt_waiting or data_held) wait C on M, data_held := true, unlock M, { do stuff }, lock M, data_held := false, broadcast C, unlock M

*   高优先级线程：lock M, hpt_waiting := true, while (data_held) wait C on M, data_held := true, unlock M, { do stuff }, lock M, data_held := false, hpt_waiting := false, 广播 C , 解锁 M

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-26T11:04:30.677

将请求线程放在“优先队列”上。特权线程可以在空闲时首先获取数据。

一种方法是使用 ConcurrentQueues[privilegeLevel] 数组、一个锁和一些事件。

任何想要获取数据的线程都会进入锁。如果数据是空闲的，（布尔值），它会获取数据对象并退出锁。如果数据正在被另一个线程使用，请求线程会根据其特权级别将事件推送到并发队列中，退出锁并等待事件。

当一个线程想要释放它对数据对象的所有权时，它会获得锁并从最高权限的一端向下迭代 ConcurrentQueues 数组，寻找一个事件（即队列计数>0）。如果它找到一个，它发出信号并退出锁，如果没有，它设置'dataFree'布尔值并退出锁。

当等待事件以访问数据的线程准备就绪时，它可以访问数据对象。

我认为这应该可行。请其他开发人员检查此设计，看看您是否可以想到任何种族等？在去 CZ 之后，我仍然有些“热情好客”的痛苦。

编辑 - 可能甚至不需要并发队列，因为它们之间的显式锁定。任何旧队列都可以。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T02:00:06.523

```
#include <thread>
#include <mutex>
#include <condition_variable>
#include <cassert>

class priority_mutex {
  std::condition_variable cv_;
  std::mutex gate_;
  bool locked_;
  std::thread::id pr_tid_; // priority thread
public:
  priority_mutex() : locked_(false) {}
  ~priority_mutex() { assert(!locked_); }
  priority_mutex(priority_mutex&) = delete;
  priority_mutex operator=(priority_mutex&) = delete;

  void lock(bool privileged = false) {
    const std::thread::id tid = std::this_thread::get_id();
    std::unique_lock<decltype(gate_)> lk(gate_);
    if (privileged)
      pr_tid_ = tid;
    cv_.wait(lk, [&]{
      return !locked_ && (pr_tid_ == std::thread::id() || pr_tid_ == tid);
    });
    locked_ = true;
  }

  void unlock() {
    std::lock_guard<decltype(gate_)> lk(gate_);
    if (pr_tid_ == std::this_thread::get_id())
      pr_tid_ = std::thread::id();
    locked_ = false;
    cv_.notify_all();
  }
}; 
```

**注意：**这`priority_mutex`提供了不公平的线程调度。如果特权线程频繁获取锁，其他非特权线程可能几乎不会被调度。

使用示例：

```
#include <mutex>
priority_mutex mtx;

void privileged_thread()
{
  //...
  {
    mtx.lock(true);  // acquire 'priority lock'
    std::unique_lock<decltype(mtx)> lk(mtx, std::adopt_lock);
    // update shared state, etc.
  }
  //...
}

void normal_thread()
{
  //...
  {
    std::unique_lock<decltype(mtx)> lk(mtx);  // acquire 'normal lock'
    // do something
  }
  //...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-26T14:35:39.063

pthreads 具有线程优先级：

```
pthread_setschedprio( (pthread_t*)(&mThreadId), wpri ); 
```

如果多个线程在一个锁中休眠等待，调度程序将首先唤醒最高优先级的线程。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-26T09:48:04.153

在 linux 上，您可以查看这个人：pthread_setschedparam 和 man sched_setscheduler

pthread_setschedparam(pthread_t thread, int policy, const struct sched_pa​​ram *param);

也检查一下 c++2011：http: [//msdn.microsoft.com/en-us/library/system.threading.thread.priority.aspx#Y78](http://msdn.microsoft.com/en-us/library/system.threading.thread.priority.aspx#Y78)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-26T14:21:23.717

尝试类似以下的操作。你可以让这个类成为一个线程安全的单例，你甚至可以让它成为一个仿函数。

```
#include <pthread.h>
#include <semaphore.h>
#include <map>

class ThreadPrioFun
{
    typedef std::multimap<int, sem_t*> priomap_t;
public:
    ThreadPrioFun()
    {
        pthread_mutex_init(&mtx, NULL);
    }
    ~ThreadPrioFun()
    {
        pthread_mutex_destroy(&mtx);
    }
    void fun(int prio, sem_t* pSem)
    {
        pthread_mutex_lock(&mtx);
        bool bWait = !(pm.empty());
        priomap_t::iterator it = pm.insert(std::pair<int, sem_t*>(prio, pSem) );
        pthread_mutex_unlock(&mtx);

        if( bWait ) sem_wait(pSem);

        // do the actual job
        // ....
        //

        pthread_mutex_lock(&mtx);
        // done, remove yourself
        pm.erase(it);
        if( ! pm.empty() )
        {
             // let next guy run:
            sem_post((pm.begin()->second));
        }
        pthread_mutex_unlock(&mtx);
    }
private:
    pthread_mutex_t mtx;
    priomap_t pm;
}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-27T00:59:21.680

稍微修改了**ecatmur**答案，添加了第四个互斥锁来同时处理多个高优先级线程（请注意，这在我的原始问题**中不是必需的）：**

```
#include <thread>
#include <iostream>
#include "unistd.h"

std::mutex M; //data access mutex
std::mutex N; // 'next to access' mutex
std::mutex L; //low priority access mutex
std::mutex H; //hptwaiting int access mutex

int hptwaiting=0;

void lowpriolock(){
  L.lock();
  while(hptwaiting>0){
    N.lock();
    N.unlock();
  }
  N.lock();
  M.lock();
  N.unlock();
}

void lowpriounlock(){
  M.unlock();
  L.unlock();
}

void highpriolock(){
  H.lock();
  hptwaiting++;
  H.unlock();
  N.lock();
  M.lock();
  N.unlock();
}

void highpriounlock(){
  M.unlock();
  H.lock();
  hptwaiting--;
  H.unlock();
}

void hpt(const char* s){
  using namespace std;
  //cout << "hpt trying to get lock here" << endl;
  highpriolock();
  cout << s << endl;
  usleep(30000);
  highpriounlock();
}

void lpt(const char* s){
  using namespace std;
  //cout << "lpt trying to get lock here" << endl;
  lowpriolock();
  cout << s << endl;
  usleep(30000);
  lowpriounlock();
}

int main(){
std::thread t0(lpt,"low  prio t0  working here");
std::thread t1(lpt,"low  prio t1  working here");
std::thread t2(hpt,"high prio t2  working here");
std::thread t3(lpt,"low  prio t3  working here");
std::thread t4(lpt,"low  prio t4  working here");
std::thread t5(lpt,"low  prio t5  working here");
std::thread t6(hpt,"high prio t6  working here");
std::thread t7(lpt,"low  prio t7  working here");
std::thread t8(hpt,"high prio t8  working here");
std::thread t9(lpt,"low  prio t9  working here");
std::thread t10(lpt,"low  prio t10 working here");
std::thread t11(lpt,"low  prio t11 working here");
std::thread t12(hpt,"high prio t12 working here");
std::thread t13(lpt,"low  prio t13 working here");
//std::cout << "All threads created" << std::endl;
t0.join();
t1.join();
t2.join();
t3.join();
t4.join();
t5.join();
t6.join();
t7.join();
t8.join();
t9.join();
t10.join();
t11.join();
t12.join();
t13.join();
return 0;
} 
```

* * *

你怎么看？可以吗？确实，信号量可以更好地处理这种事情，但对我来说互斥锁更容易管理。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-26T15:11:33.350

由于线程优先级不适合您：

创建 2 个互斥锁，一个常规锁和一个优先级锁。

普通线程必须先锁普通锁，然后再锁优先级锁。优先级线程只需锁定优先级锁：

```
Mutex mLock;
Mutex mPriLock;

doNormal()
{
   mLock.lock();
   pthread_yield();
   doPriority();
   mLock.unlock();
}

doPriority()
{
   mPriLock.lock();
   doStuff();
   mPriLock.unlock();
} 
```

# .net - vb6 字体字符集 oracle

> ID：11666612
> 
> 赞同：0
> 
> 时间：2012-07-26T09:44:06.680
> 
> 标签：.net, oracle, vb6, character-encoding, fonts

情况如下：

我有 string1 使用 charset 186 (BALTIC_CHARSET)。我有使用 charset 204 (RUSSIAN_CHARSET) 的 string2。我可以将这些字符串保存到 oracle 数据库中。只有当我更改为特定的字符集时，我才能看到这些字符串。那没问题。问题是如何将 string2 保存到 .text 文件并按原样查看。现在，当我保存它时，我会胡说八道。

我是所有 unicode 或 ansi 或其他的新手。我可以使用 vb.net 得到我想要的吗？那我该怎么做呢？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:32:05.623

文本文件本身没有代码页，因此在您查看它时它将显示为选定的代码页（与数据库中的值相同）。

处理此问题的正确方法是使用 VB 内部使用的 unicode，但（默认情况下）在显示或保存到文件时将与当前本地代码页相互转换。

您可以[将此文件保存为 UTF-8](https://stackoverflow.com/a/10454360/588306)或 UCS-2，方法是在开头附加 BOM 字符，然后使用以下内容从内存中写出字符串数据：

```
Dim Content() As Byte
Content = ChrW(&HFEFF) & StringVariable
FileNum = FreeFile()
Open FileName For Binary As #FileNum
Put #filenum, Content
Close #FileNum 
```

（未经测试的空气代码）

# node.js - 今天在 node.js 连接中的 mongodb

> ID：11666614
> 
> 赞同：1
> 
> 时间：2012-07-26T09:44:16.767
> 
> 标签：node.js, mongodb

当为节点使用本机 mongo.db 驱动程序时，我应该为每个应用程序、每个页面“服务”打开 1 个连接，还是在需要时打开和关闭它？

我看过一些[较旧的答案](https://github.com/mongodb/node-mongodb-native/issues/84)，但我知道该项目一直在发展，所以我想知道它今天的状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T00:54:03.580

这种情况不会改变。打开与服务器的新连接的性能将低于使用已建立的连接。

*注意：*这是服务器应用程序的一般情况，并不特定于 MongoDB。

典型的开销包括：

*   将服务器名称解析为 IP
*   建立与服务器的网络连接
*   服务器上分配的每个连接内存

特别是对于 MongoDB：

*   打开新连接意味着服务器上的新套接字连接和线程
*   每个连接（从 MongoDB 2.0 开始）在服务器上分配 1Mb 的 RAM（另请参阅：[检查内存使用情况](http://www.mongodb.org/display/DOCS/Checking+Server+Memory+Usage)）
*   打开文件/连接有每个进程的限制（另请参阅：[打开的文件过多](http://www.mongodb.org/display/DOCS/Too+Many+Open+Files)）

[对于 MongoDB Node.js 驱动程序，您可以通过在构造函数中设置poolSize](http://mongodb.github.com/node-mongodb-native/api-generated/server.html)来利用连接池。一篇博客文章，其中包含使用此示例的示例：[Node.js：连接池和 MongoDB](http://technosophos.com/2011/10/26/nodejs-connection-pools-and-mongodb.html)。

# javascript - jQuery 在 .find() 之后使用选择器

> ID：11666616
> 
> 赞同：1
> 
> 时间：2012-07-26T09:44:22.087
> 
> 标签：javascript, jquery

我有一些代码，我想查看表格中的每一行并查找具有特定类的特定类。

```
$("tr").each(function() {
    $(this).find("td").find(".group_name").css("background-color", "red");
}); 
```

这样所有具有“group_name”类的 td 都变为红色。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T09:46:56.470

实际上这应该足够了：

```
$("tr td.group_name").css("background-color", "red"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T09:46:26.583

用这个

```
$('tr').find('td.group_name').css('background-color', 'red'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:49:31.140

为什么这么复杂？这更容易

```
$('tr td.group_name').css('background-color', 'red'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T09:57:15.340

你不需要迭代它......

当你这样做 `$("tr td.group_name")`时，它将选择 tr 中所有具有 class = "group_name" 的 td 元素

所以

```
$("tr td.group_name").css("background-color", "red"); 
```

会绰绰有余:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T09:59:22.097

jQuery 在这里真的是矫枉过正，因为您的最终目标是为`<td>`元素内的任何具有`group_name`类的元素添加红色背景色`<tr>`（什么时候不是？）。为此，您可以只使用 CSS 声明：

```
td.group_name {
    background-color: red !important;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-26T09:47:09.947

那是你要的吗 ：

```
 $("tr").each(function() {
         $(this).find("td .group_name").css("background-color", "red");
     }); 
```

# ios - 一个对两个完成块

> ID：11666622
> 
> 赞同：4
> 
> 时间：2012-07-26T09:44:37.863
> 
> 标签：ios, macos, objective-c-blocks, nserror

我正在使用使用该方法的[网络工具包](https://github.com/MugunthKumar/MKNetworkKit)`twoBlock`，但我更喜欢`oneBlock`在我自己的代码中使用。`twoBlock`如果方法更好，这让我感到困惑。不知怎的，我看不到它。

有没有一种方法比另一种方法更好？

* * *

**一体式方法**

1个结合数据和错误的块：

```
-(void)oneBlock {
    [self startWithCompletionBlock:^(id obj, NSError* error) {
        if(error) {
            NSLog(@"error: %@", error);
        } else {
            NSLog(@"success: %@", obj);
        }
    }];
} 
```

* * *

**两块方法**

2 个专门用于处理数据和错误的块：

```
-(void)twoBlocks {
    [self startWithCompletionBlock:^(id obj) {
        NSLog(@"success: %@", obj);
    } errorBlock:^(NSError* error) {
        NSLog(@"error: %@", error);
    }];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T10:02:30.333

我不认为你可以说哪一个更好。只是利弊的平衡不同。

两个块方法的主要优点是您可以更好地分离“快乐”路径的代码和错误管理的代码。（这种分离听起来类似于使用异常所提供的优点之一，但又是​​另一种野兽；实际上，catch 块允许在一个地方收集所有代码，即在您的“功能”块之外，管理一个在“功能”块中可能出现的一堆可能的错误条件，其管理通常会分散在整个块中；在上面的 2 块示例中，没有这些，因为管理错误条件的代码仍然混合在一起与您的函数的其余代码）。

另一方面，很可能在两种情况下，即成功和失败，你都想采取一些共同的行动。想想，例如，序列化一堆网络操作：当一个操作完成时，你执行下一个操作，无论是前一个操作成功还是失败完成。如果使用 2-block 方法，这显然是一种代码复制的情况。

总的来说，我不认为有很大的不同，因为您可以轻松地使用这两种方法完成您需要做的事情，但在特定情况下，一种方法比另一种更适合您的工作流程。

只是我的2美分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:59:11.280

我发现 2 块方法“更干净”。您不需要 if/else 块，因此可以更好地分离错误处理。它也少了 1 行。总体上差别不大，但它有助于保持代码更整洁、更易于阅读，仅此而已。

我认为使 2-block 更好的另一件事是错误处理会自动推到最后。我更喜欢代码采用“做所有这些事情，除非出现问题”的形式，而不是“假设出现问题！它没有？哦，继续。” 风格。也许我是个乐观主义者。无论哪种方式，我宁愿看到顶部的重要内容，以及错误处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T10:25:04.910

我更喜欢#1。我认为应该由客户端代码根据发送回的 NSError 实例来决定实际错误是什么以及它在当前上下文中的含义。

在选项 #2 中，如果完成块包含的代码不只几行，例如在视图控制器中使用时很可能，那么您很有可能希望在两者中执行很多相同的完成代码无论是否发生错误（更新 UI、恢复某些状态等），都会阻塞。这将导致不必要的代码重复。

此外，如果您碰巧不关心错误情况，选项#1 的代码更少。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T13:55:07.580

我已经确定了两块方法。优点是：

*   它允许在需要时返回一个对象和一个错误
*   没有订购问题，也没有一个或两个都可以调用的问题
*   如果您将第三个变量添加到另一个回调中，事情就不会那么混乱了

在我看来，应该为多个顺序回调保留多个块。想想 UIView 动画的工作方式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T20:14:42.957

由于@sergio 提到的原因，我认为 oneBlock 方法更干净。它为调用者提供了更大的灵活性来管理代码路径。使用这样的回调 API，无论是否成功，都必须在回调结束时经常调用清理（或下一步）代码：

```
-(void)oneBlock {
    [self startWithCompletionBlock:^(id obj, NSError* error) {
        if (error) {
            NSLog(@"error: %@", error);
        } else {
            NSLog(@"success: %@", obj);
        }
        self.connection = nil;
        dispatch_async(dispatch_get_main_queue(), ^{
            [self updateUI];
        });
    }];
} 
```

此外，如果成功块很长，则 twoBlocks 的读取效果很差：

```
-(void)twoBlocks {
    [self startWithCompletionBlock:^(id obj) {
        [self doSomething];
        [self doSomethingElse];

        [self setUpSomeOtherRequestWithCompletionBlock:^(id obj) {
            [self doSomething];
            [self doSomethingElse];

            NSLog(@"inside request succeeded");
        } errorBlock:^(NSError* error) {
            NSLog(@"error: %@", error);
        }];

        dispatch_async(dispatch_get_main_queue(), ^{
            [self updateUI];
        });
    } errorBlock:^(NSError* error) {
        NSLog(@"error: %@", error);
    }];
} 
```

# html - 您可以为每个单元格设置不同的边框间距吗？

> ID：11666625
> 
> 赞同：1
> 
> 时间：2012-07-26T09:44:43.150
> 
> 标签：html, css, border, border-spacing

我有一张看起来像[这样的桌子](http://jsfiddle.net/64qA7/)

![在此处输入图像描述](../Images/6170e0c7ee0b6284ca95022539cd9cfe.png)

我想删除每组“上一个”和“当前”单元格之间的间距，但在行和其他列之间保留它。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:51:44.487

没有那个标记，[border-spacing](http://www.w3.org/TR/CSS21/tables.html#separated-borders)和[border-collapse](http://www.w3.org/TR/CSS21/tables.html#borders)都适用于*'table' 和'inline-table' 元素*——即整个表，而不是它们的一部分。

您可以通过合并单元格并使用其他结构将数据块并排放置来伪造它，但这会失去一些语义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T10:12:36.073

用填充单元格伪造它，并在单元格内设置其他样式的 div。

看[这里](http://jsfiddle.net/c67Vp/)

![在此处输入图像描述](../Images/5504ebf0e765e5d3080ed324ff066561.png)

注意：您在单元格上的填充使渐变看起来很难看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:52:06.427

您可以在表格中使用表格。不是最整洁的解决方案，但它有效（我只将它应用于第一个单元格）

[小提琴](http://jsfiddle.net/64qA7/7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T10:02:38.660

我会添加额外的单元格来稍微伪造填充，然后把它们弄乱。检查[小提琴](http://jsfiddle.net/64qA7/32/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T10:32:12.277

我使用了一些 div 并为 div 添加了一些新样式。下面是完整的代码。我只做了 2 行。您可以根据需要执行任意多行。

```
<html>
<head>

<style>
   .dash-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 10px;
}

.dash-table td,
.dash-table th {
    font-size: 16px;
    padding: 10px;
    line-height: normal;
    text-align: center;
    font-weight: bold;
}

.dash-prev {
    border-radius: 10px 0px 0px 10px;
    width: 25%;
}

.dash-curr {
    border-radius: 0px 10px 10px 0px;
}

.dash-actual {
    font-size: 14px;
}

.dash-blue,
.dash-green,
.dash-amber,
.dash-red {
    color: #ffffff;
      text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
      border-top: 10px solid #fff;
}

.dash-blue {
  background-color: #0074cc;
  *background-color: #0055cc;
  background-image: -ms-linear-gradient(top, #0088cc, #0055cc);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#0088cc), to(#0055cc));
  background-image: -webkit-linear-gradient(top, #0088cc, #0055cc);
  background-image: -o-linear-gradient(top, #0088cc, #0055cc);
  background-image: -moz-linear-gradient(top, #0088cc, #0055cc);
  background-image: linear-gradient(top, #0088cc, #0055cc);
  background-repeat: repeat-x;
  border-color: #0055cc #0055cc #003580;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  filter: progid:dximagetransform.microsoft.gradient(startColorstr='#0088cc', endColorstr='#0055cc', GradientType=0);
  filter: progid:dximagetransform.microsoft.gradient(enabled=false);
}

.dash-green {
  background-color: #5bb75b;
  *background-color: #51a351;
  background-image: -ms-linear-gradient(top, #62c462, #51a351);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#62c462), to(#51a351));
  background-image: -webkit-linear-gradient(top, #62c462, #51a351);
  background-image: -o-linear-gradient(top, #62c462, #51a351);
  background-image: -moz-linear-gradient(top, #62c462, #51a351);
  background-image: linear-gradient(top, #62c462, #51a351);
  background-repeat: repeat-x;
  border-color: #51a351 #51a351 #387038;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  filter: progid:dximagetransform.microsoft.gradient(startColorstr='#62c462', endColorstr='#51a351', GradientType=0);
  filter: progid:dximagetransform.microsoft.gradient(enabled=false);
}

.dash-amber {
  background-color: #faa732;
  *background-color: #f89406;
  background-image: -ms-linear-gradient(top, #fbb450, #f89406);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#fbb450), to(#f89406));
  background-image: -webkit-linear-gradient(top, #fbb450, #f89406);
  background-image: -o-linear-gradient(top, #fbb450, #f89406);
  background-image: -moz-linear-gradient(top, #fbb450, #f89406);
  background-image: linear-gradient(top, #fbb450, #f89406);
  background-repeat: repeat-x;
  border-color: #f89406 #f89406 #ad6704;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  filter: progid:dximagetransform.microsoft.gradient(startColorstr='#fbb450', endColorstr='#f89406', GradientType=0);
  filter: progid:dximagetransform.microsoft.gradient(enabled=false);
}

.dash-red {
  background-color: #da4f49;
  *background-color: #bd362f;
  background-image: -ms-linear-gradient(top, #ee5f5b, #bd362f);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ee5f5b), to(#bd362f));
  background-image: -webkit-linear-gradient(top, #ee5f5b, #bd362f);
  background-image: -o-linear-gradient(top, #ee5f5b, #bd362f);
  background-image: -moz-linear-gradient(top, #ee5f5b, #bd362f);
  background-image: linear-gradient(top, #ee5f5b, #bd362f);
  background-repeat: repeat-x;
  border-color: #bd362f #bd362f #802420;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  filter: progid:dximagetransform.microsoft.gradient(startColorstr='#ee5f5b', endColorstr='#bd362f', GradientType=0);
  filter: progid:dximagetransform.microsoft.gradient(enabled=false);
}
div
{
    float:left;
    width: 50%;
}

.divLeft
{
    padding-top: 14%;
}
</style>
</head>
<body>
    <table class="dash-table">
  <thead>
    <tr>
      <th></th>
      <th colspan="2">Global</th>
      <th colspan="2">GB</th>
      <th colspan="2">US</th>
      <th colspan="2">RW</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><h2>#</h2></td>
      <td class="dash-prev dash-blue">
        <div class="divLeft">
        Previous hour<br><h2>#</h2>
        </div>
        <div>
        Current hour (projected): <h2>#</h2><br>
        <span class="dash-actual">Actual: #</span>
        </div>
      </td>
      <td class="dash-prev dash-green">
        <div class="divLeft">
        Previous hour<br><h2>#</h2>
        </div>
        <div>
        Current hour (projected): <h2>#</h2><br>
        <span class="dash-actual">Actual: #</span>
        </div>
      </td>
      <td class="dash-prev dash-amber">
        <div class="divLeft">
        Previous hour<br><h2>#</h2>
        </div>
        <div>
        Current hour (projected): <h2>#</h2><br>
        <span class="dash-actual">Actual: #</span>
        </div>
      </td>
      <td class="dash-prev dash-red">
        <div class="divLeft">
        Previous hour<br><h2>#</h2>
        </div>
        <div>
        Current hour (projected): <h2>#</h2><br>
        <span class="dash-actual">Actual: #</span>
        </div>
      </td>
    </tr>

    <tr>
      <td><h2>#</h2></td>
      <td class="dash-prev dash-blue">
        <div class="divLeft">
        Previous hour<br><h2>#</h2>
        </div>
        <div>
        Current hour (projected): <h2>#</h2><br>
        <span class="dash-actual">Actual: #</span>
        </div>
      </td>
      <td class="dash-prev dash-green">
        <div class="divLeft">
        Previous hour<br><h2>#</h2>
        </div>
        <div>
        Current hour (projected): <h2>#</h2><br>
        <span class="dash-actual">Actual: #</span>
      </td>
      <td class="dash-prev dash-amber">
        <div class="divLeft">
        Previous hour<br><h2>#</h2>
        </div>
        <div>
        Current hour (projected): <h2>#</h2><br>
        <span class="dash-actual">Actual: #</span>
        </div>
      </td>
      <td class="dash-prev dash-red">
        <div class="divLeft">
        Previous hour<br><h2>#</h2>
        </div>
        <div>
        Current hour (projected): <h2>#</h2><br>
        <span class="dash-actual">Actual: #</span>
        </div>
      </td>
    </tr>

  </tbody>
</table>?

</body>
</html> 
```

检查下面的结果![在此处输入图像描述](../Images/e3aba093cdfff8332591e3e953ad4426.png)

让我知道这是否有任何问题。

# c# - 本地到 GMT 日期时间转换

> ID：11666630
> 
> 赞同：0
> 
> 时间：2012-07-26T09:44:58.253
> 
> 标签：c#, datetime, .net-4.0

我正在使用亚马逊 API。我需要将本地时间 (EDT) 转换为符合亚马逊以下文档的 DateTime：

```
您可以指定带或不带时区信息的 FulfillmentDate：

2006-12-11T09:50:00 - 本地时区适用
2006-12-11T09:50:00+02:00 - GMT 时区适用

对于受夏令时影响的地区，如有必要，请调整信息。
不会自动考虑夏令时。
```

我以为我需要做一些类似于[此 SO 线程](https://stackoverflow.com/questions/2961848/how-to-use-timezoneinfo-to-get-local-time-during-daylight-savings-time)中所示的事情，但显然是错误的，因为当我使用该方法上传日期时，亚马逊将其显示为前一天。我可以通过使用[这个在线转换器工具](http://www.timeanddate.com/worldclock/converter.html)来确认这一点。

**例如：**

*   我的当地时间是“2012 年 7 月 25 日 00:00:00”（美国东部时间）。

*   使用上述 SO 方法，并格式化，现在是“2012-07-25T01:00:00-04:00”。

*   但它会转换为 24 日，特别是“2012 年 7 月 24 日星期二 21:00:00”。

显然我在这里做错了什么 - 如果有人能启发我，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:10:38.220

我建议使用：

```
String xmlDateString = XmlConvert.ToString(DateTime.UtcNow,XmlDateTimeSerializationMode.Local); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:05:26.850

显然，亚马逊将您的本地时间信息转换回 UTC 时间（这是基于您在 4 小时前输入的时间：2012 年 7 月 24 日星期二 21:00:00，因此是正确的）。

你期待的结果是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:55:42.640

我想我可以介绍一个由 Jon Skeet 编写的“joda time”项目。可以参考[joda time的链接利弊](https://stackoverflow.com/questions/375544/are-there-any-cons-to-using-jodatime)

# mysql - 如何在 MySQL 中使用 LIMIT 选择最大两个值？

> ID：11666633
> 
> 赞同：2
> 
> 时间：2012-07-26T09:45:15.987
> 
> 标签：mysql

我有这样的`MySQL` 数据库

```
id employee_id  salary
1    1          10000
2    2          20000
3    3          10000
4    4          40000
5    5          30000 
```

我想选择`maximum two salary by using LIMIT`。那么如何选择呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T09:46:12.267

只需按薪水的降序对结果进行排序，并根据需要限制结果集：

```
SELECT * FROM mytable ORDER BY salary DESC LIMIT 2 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/ca8b9/1/0)上查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:50:00.297

```
SELECT 
  employee_id,
  salary 
From
  employee 
order by salary desc 
limit 2 ; 
```

# java - jpcap.packet.Packet 不能转换为 jpcap.packet.TCPPacket

> ID：11666634
> 
> 赞同：0
> 
> 时间：2012-07-26T09:45:23.693
> 
> 标签：java, networking, jpcap

```
 Packet packet = new Packet();

        while(packet != null )
        {

           packet = jpcap.getPacket();

           TCPPacket tcp = (TCPPacket)jpcap.getPacket();
           IPPacket ipp = (IPPacket)packet;
           UDPPacket udp = (UDPPacket)jpcap.getPacket();
           ipp = (IPPacket)tcp;
         } 
```

TCPPacket tcp = (TCPPacket)jpcap.getPacket(); 此行出现错误 jpcap.packet.Packet 无法转换为 jpcap.packet.TCPPacket 为什么？请帮助解决它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:43:13.600

你的代码没有任何意义。您不可能知道接下来收到的两个数据包将是一个 TCP 数据包，然后是一个 UDP 数据包。显然，您收到了一个不是 TCP 数据包的数据包，您只是基于希望而不是经验将其转换为 TCPPacket。在开始进行类型转换之前，您必须查看数据包以了解其内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:54:27.520

如果（我怀疑）您正在尝试处理一个数据包并将其转换为各种类型，您应该阅读一次然后再转换它。

从文档中我了解到连续调用将读取连续包： http: [//netresearch.ics.uci.edu/kfujii/Jpcap/doc/javadoc/jpcap/JpcapCaptor.html#getPacket%28%29](http://netresearch.ics.uci.edu/kfujii/Jpcap/doc/javadoc/jpcap/JpcapCaptor.html#getPacket%28%29)

# actionscript-3 - 如何通过滚动 HScrollBar 来滚动水平平铺列表？

> ID：11666649
> 
> 赞同：0
> 
> 时间：2012-07-26T09:46:38.577
> 
> 标签：actionscript-3, apache-flex, flex3

我有一个包含用户图像列表的 Tile 列表，还有一个 HScrollBar 组件。现在，如果我滚动 Hscroll 栏，`i want to also scroll the tile list`. 而且我还希望 HScrollBar 的拇指根据平铺列表的数据提供者中的元素数量自动调整其宽度。我该怎么做？

这就是我的代码

```
 <components:ExtendedTileList id="lstExpert" horizontalScrollBarStyleName="horizontalScroll" verticalScrollPolicy="off" horizontalScrollPolicy="off"
                                                         dataProvider="{expertsOnline}" height="80" width="100%" direction="vertical" maxRows="1"
                                                         itemRenderer="ExpertItemRenderer">
   </components:ExtendedTileList>
    <mx:HScrollBar id="customScrollExpert" styleName="horizontalScroll"  minScrollPosition="0"                                  lineScrollSize="20" pageScrollSize="20" y="68"
                                           scroll="hscrollbar1_scrollHandler(event)" visible="true" width="110%" height="5"/> 
```

我的滚动事件处理程序是

```
protected function hscrollbar1_scrollHandler(event:ScrollEvent):void
        {

            lstExpert.horizontalScrollPosition=event.target.scrollPosition ;

        } 
```

# android - 滑动抽屉打开时背景不活动

> ID：11666662
> 
> 赞同：0
> 
> 时间：2012-07-26T09:47:26.003
> 
> 标签：android, slidingdrawer

我正在使用slidingdrawer，并且能够在我的应用程序中的所有活动上显示slidingdrawer。

我面临的问题是我仍然可以点击背景（活动中的视图）。有没有办法在滑动抽屉打开时禁用背景。

问候

编辑 1

```
<?xml version="1.0" encoding="utf-8"?>
<SlidingDrawer xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/slidingDrawer1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:content="@+id/content"
    android:handle="@+id/handle" >

    <Button
        android:id="@+id/handle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Handle" />

    <LinearLayout
        android:id="@+id/content"
        style="@style/roundrectbox_white_layout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/slider_round_rect_border"
        android:orientation="vertical"
        android:padding="15dp" >

        <ListView
            android:id="@+id/listView1"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:cacheColorHint="@android:color/transparent"
            android:divider="@android:color/transparent"
            android:listSelector="@android:color/transparent" />
    </LinearLayout>

</SlidingDrawer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:14:39.170

尝试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:text="@string/hello"/>

    <SlidingDrawer
        android:id="@+id/drawer"
        android:layout_width="320dp"
        android:layout_height="440dp"
        android:content="@+id/content"
        android:handle="@+id/handle"
        android:orientation="vertical" >

        <Button
            android:id="@+id/handle"
            android:layout_width="fill_parent"
            android:layout_height="20dp"
            android:background="@drawable/wood" />

        <RelativeLayout
            android:id="@+id/content"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
             >

                <ListView 
                    android:id="@+id/list"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"></ListView>
        </RelativeLayout>
    </SlidingDrawer>

</RelativeLayout> 
```

在活动中：

```
ListView listView=(ListView) findViewById(R.id.list);
        ArrayAdapter<String>  adapter=new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1,array);
        listView.setAdapter(adapter); 
```

其中数组是：

```
String[] array={"1","2","3","4"}; 
```

# asp.net-mvc-3 - MVC 3 和 EF 4 数据库首先，模型没有正确链接到表名？

> ID：11666664
> 
> 赞同：1
> 
> 时间：2012-07-26T09:47:33.040
> 
> 标签：asp.net-mvc-3, entity-framework-4, ef-database-first

忙着学习MVC 3和EF...

我有一个现有的数据库，然后创建与我的数据库表（代理）对齐的模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;
using System.ComponentModel.DataAnnotations;

namespace Dataset_Test.Models
{
    public class Agency
    {

        public int AgencyID { get; set; }
        [Required(ErrorMessage="Give me a name.")]
        [StringLength(5)]
        [MinLength(2)]
        public string AgencyName { get; set; }

    }

} 
```

我的 DAL 课程：

```
public class DBContext: DbContext
    {
        public DbSet<Person> Persons { get; set; }
        public DbSet<Agency> Agency { get; set; }
    } 
```

使用控制器生成器弹出窗口创建控制器和视图然后运行代码后：

```
private DBContext db = new DBContext();

        //
        // GET: /Agency/

        public ViewResult Index()
        {
            return View(db.Agency.ToList());
        } 
```

我收到一个错误，它根本无法找到表，因为 EF 正在自动查找表（dbo.Agencies）但我已将我的模型类声明为代理，我的问题是如何以及在哪里设置模型的表名称引用应该链接到，即它应该寻找 dbo.Agency 而不是 dbo.Agencies？

布局： ![在此处输入图像描述](../Images/deb996af11e6b5941cc196078c9ff2ea.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:14:16.600

您需要添加一个

```
[Table("Agency")] 
```

归因于您的代理类

# java - heapdump 大小与 hprof 大小

> ID：11666667
> 
> 赞同：4
> 
> 时间：2012-07-26T09:47:53.997
> 
> 标签：java, visualvm, heap-dump, hprof, yourkit

当我的 jboss 服务器运行 xms 为 4096m 和 xmx 为 4096m 以及 permsize 为 512m 时，我最近以 hprof 格式进行了 heapdump。

生成的 hprof 文件超过 5gb。当我在 visualvm、mat 分析器或 yourkit 中加载堆转储时，我只看到大约 1gb 的总字节。我已尝试更改 yourkit 中的可达性范围，但它显示的大小不超过 1 GB。

知道文件大小与显示的堆转储大小的巨大差异会导致什么吗？

ps：我用的是jdk1.6.0_23

不幸的是，我不允许在这里提交屏幕截图。

在文件系统上，hprof 大小为 5.227.659 kb，在 yourkit 中它指出：

对象：9.738.282 / 浅层大小 740 mb / 保留大小：740 mb 其中可到达的字符串：6.652.515 (68%) / 浅层大小：381 mb (51%) / 保留大小：381 MB (51%)

最大保留大小是 206.810.176 的 byte[]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:22:12.023

您使用哪个命令生成堆转储？

```
$JAVA_HOME/bin/jmap -dump:live,format=b,file=c:/tmp/heap_dump.bin PID 
```

根据规范，也许您需要通过实时选项

```
 -dump:<dump-options> to dump java heap in hprof binary format
                   dump-options:
                     live         dump only live objects; if not specified,
                                  all objects in the heap are dumped. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T07:45:19.760

您是否尝试过“无法访问的对象直方图”（您可以从“概述”页面顶部找到链接）？在我的一个大小为 1509MB 的堆转储中，mat 仅显示 454MB，但其余部分本质上是垃圾，果然，无法访问对象直方图中的“浅堆”总和为 966MB。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-20T22:02:55.593

这只是意味着您的堆转储很可能包含大量无法访问的对象，如果要运行 GC，这些对象将被垃圾收集。现在这并不意味着您仍然没有泄漏，它只是意味着在您的 5 GB Hprof 中，4 GB 的对象无法访问，因此不是有趣的泄漏源。

在 Java 中，只有当垃圾收集无法清除对象时才会发生内存泄漏，因为某些东西持有对它的引用（出乎意料）。因此，您的泄漏（如果有）将在您的 hprof 中保留的 1 GB 对象中找到。

# sdk - 安装“不支持的蓝牙功能”驱动程序后，Windows Mobile 设备中心停止工作

> ID：11666669
> 
> 赞同：0
> 
> 时间：2012-07-26T09:48:03.263
> 
> 标签：sdk, windows-mobile, driver

我运行 drvupdate-64 安装程序，该安装程序一直运行到它关闭，我在托盘图标中收到一条通知，提示“不支持的蓝牙功能”已成功安装为驱动程序。

我发现这有点奇怪，之后安装程序没有任何反应，它只是消散并且不会回来。

在任务管理器中，我可以看到它以“driver_setup.exe”的形式运行，并带有“windows 移动设备中心设置”的描述，但仅此而已，似乎没有其他任何事情发生。

任何想法出了什么问题以及如何解决这个问题？我需要它来安装 windows mobile sdk。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T01:44:27.380

我必须导航到 WMDC 驱动程序更新的安装目录并找到安装程序以继续该过程，安装程序对我进行了窃听，并且由于某种原因没有进行下一步...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-08T10:54:37.767

在戴尔笔记本电脑型号 7480、7280 上安装时，我遇到了类似的问题。我曾尝试根据[Microsoft Answers](https://answers.microsoft.com/en-us/windows/forum/windows_7-hardware/windows-mobile-device-center-installation-issue/97ae5162-72a4-4467-9e5d-e1c7ce2d0afa?auth=1)更新删除设备驱动程序，但没有成功。

遇到上述情况后，我确实按照 tweetypi 评论继续安装过程，但仍有问题。我能够按照以下步骤安装并使其正常工作：

运行 WMDC 安装程序后，我可以在任务管理器中看到安装过程“driver_setup.exe”仍在运行。

根据 tweetypi 的回答，我然后导航到 WMDC 驱动程序更新的安装目录以找到安装程序并继续该过程：C:\Windows\WindowsMo​​bile

我依次打开每个驱动程序文件夹（蓝牙、RNDIS、串行）并运行“wmupdate”安装程序。

Windows Mobile 设备中心随后列在我的程序列表中，但不会启动。

然后我从控制面板打开设备管理器。更改视图以显示隐藏的设备。这显示了“蓝牙虚拟设备”>“不支持的蓝牙功能”。

然后我卸载了这个驱动程序并检查了删除这个设备的驱动程序软件

在此之后，我结束了任务管理器中的“driver_setup.exe”进程。然后再次运行“driver_setup.exe”安装文件。然后安装过程能够完成，Windows Mobile 设备中心现在正在启动。

我需要连接的设备是用于 USB 的，删除虚拟设备后我不确定蓝牙的功能。

# android - ContactsContract.PhoneLookup.CONTENT_FILTER_URI 加载程序出错

> ID：11666678
> 
> 赞同：2
> 
> 时间：2012-07-26T09:48:31.713
> 
> 标签：android, android-widget

嗨，我正在使用 Loader 来获取一些数据。代码如下。

```
 @Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {

    return new CursorLoader(this, ContactsContract.PhoneLookup.CONTENT_FILTER_URI,
            new String[] { PhoneLookup.TYPE, PhoneLookup.NUMBER,
                    PhoneLookup.DISPLAY_NAME, PhoneLookup._ID,
                    PhoneLookup.PHOTO_ID }, null, null, null);

} 
```

我遇到了一个例外。有人能帮我吗

```
droidRuntime( 2047): java.lang.RuntimeException: An error occured while executing doInBackground()
    E/AndroidRuntime( 2047):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
    E/AndroidRuntime( 2047):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
    E/AndroidRuntime( 2047):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
    E/AndroidRuntime( 2047):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
    E/AndroidRuntime( 2047):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
    E/AndroidRuntime( 2047):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
    E/AndroidRuntime( 2047):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
    E/AndroidRuntime( 2047):    at java.lang.Thread.run(Thread.java:856)
    E/AndroidRuntime( 2047): Caused by: java.lang.IllegalArgumentException: Invalid column data1
    E/AndroidRuntime( 2047):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:166)
    E/AndroidRuntime( 2047):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:136)
    E/AndroidRuntime( 2047):    at android.content.ContentProviderProxy.query(ContentProviderNative.java:358)
    E/AndroidRuntime( 2047):    at android.content.ContentResolver.query(ContentResolver.java:311)
    E/AndroidRuntime( 2047):    at android.content.CursorLoader.loadInBackground(CursorLoader.java:56)
    E/AndroidRuntime( 2047):    at android.content.CursorLoader.loadInBackground(CursorLoader.java:42)
    E/AndroidRuntime( 2047):    at android.content.AsyncTaskLoader.onLoadInBackground(AsyncTaskLoader.java:255)
    E/AndroidRuntime( 2047):    at android.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:66)
    E/AndroidRuntime( 2047):    at android.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:55)
    E/AndroidRuntime( 2047):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
    E/AndroidRuntime( 2047):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
    E/AndroidRuntime( 2047):    ... 4 more 
```

当我使用下面的代码时它工作正常

```
 @Override
public Loader<Cursor> onCreateLoader(int id, Bundle args)
{

    return new CursorLoader(this, ContactsContract.Contacts.CONTENT_URI,
            new String[]
            { ContactsContract.Contacts._ID,
                    ContactsContract.Contacts.DISPLAY_NAME,
                    ContactsContract.Contacts.LAST_TIME_CONTACTED }, null,
            null, null);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:13:50.263

您可以使用以下代码从电话簿中检索联系人。

```
 public ArrayList<String> ColletContact()
{ 
    stringName = new ArrayList<String>();
    stringPhoneNo = new ArrayList<String>();

    ContentResolver cr = getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
            null, null, null, null);
    if (cur.getCount() > 0) {
    while (cur.moveToNext()) {
        String id = cur.getString(
                    cur.getColumnIndex(ContactsContract.Contacts._ID));
    String name = cur.getString(
                    cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
    if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
        //Query phone here.  Covered next

        Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", 
                new String[]{id}, null);
                while (pCur.moveToNext()) {
                // Do something with phones
                    String phoneNo = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                    stringName.add(name);
                                    stringPhoneNo.add(phoneNo):

                } 
                pCur.close();                     
        }
     }

   }      
    return stringName;      
} 
```

# oracle-adf - ADF 生命周期阶段差异

> ID：11666681
> 
> 赞同：2
> 
> 时间：2012-07-26T09:48:38.113
> 
> 标签：oracle-adf

ADF initContext 和 prepareModel 之间的区别，因为两者都通过执行业务服务来准备数据，使其通过绑定容器（即 Map 对象）可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T11:53:36.327

ADF 模型生命周期阶段：

*   **initContext**设置生命周期，确定要加载的 PageDefs。
*   **prepareModel**创建绑定对象并将其添加到 HTTP 请求中。此时也会评估参数。
*   **applyInputValues**处理从页面发布的值，并建立一个内部绑定列表以更新和根据需要执行的方法。
*   **validateInputValues**将客户端验证器应用于由 applyInputValues 阶段提供的更新列表。这些验证器被定义为输入组件内的嵌套 f:validator 和 af:convertNumber 组件。
*   **processUpdateModel**将已验证的对绑定对象的更改发送到模型层。
*   **validateModelUpdates**管理来自模型层的验证错误。
*   **processComponentEvents**处理从 applyInputValues 阶段排队的任何侦听器和操作事件。
*   **metadataCommit**管理框架的部分运行时定制功能。如果用户以某种方式定制了页面，例如在屏幕上移动组件或通过 WebCenter 添加任务流，那么屏幕上的这些个性化将保存到元数据存储库中(MDS) 在这一点上。
*   **prepareRender**是在页面显示之前执行的最后一个阶段。

请注意，在某些情况下（例如模式对话框），以下代码不一定会在页面呈现后触发：

```
 public void afterPhase(PagePhaseEvent pagePhaseEvent) {
    if (pagePhaseEvent.getPhaseId() == Lifecycle.PREPARE_RENDER_ID) {
      injectRedirect();
    }
  } 
```

这可以防止服务器代码在文档呈现后立即检查 af:document。例如，以下将失败，因为没有可用的文档：

```
 return context.getViewRoot().getChildren().get(0).getClientId().equals("doc0"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T06:09:38.807

> ADF initContext 和 prepareModel，因为两者都是通过执行业务服务来准备数据

这并不完全正确。`initContext`设置 BindingContext，确保`DataBindings.cpx`初始化内容并准备页面的绑定容器。这`prepareModel`是数据查询的执行点。

[正如Timo 的回答](https://stackoverflow.com/a/11668722/59087)所示，另一个执行点是`PrepareRender`. 但建议保留迭代器默认设置，即“延迟”，在这种情况下，只有那些具有 UI 依赖性的迭代器会被刷新和查询。

# objective-c - 如何在IOS中写入文件

> ID：11666690
> 
> 赞同：1
> 
> 时间：2012-07-26T09:49:06.023
> 
> 标签：objective-c, ios, xcode

我是IOS编程的新手。我想将一些数据写入文件。我已成功打开文档路径中的文件。但是 fwrite 它没有按预期工作。如果我打开文件它是空的。它是我正在使用的代码。我做错了什么。

```
 typedef struct test {
        int a;
  } TEST_OBJ;

    TEST_OBJ test_obj1;
    test_obj1.a = 5;
    TEST_OBJ *data_ptr = &test_obj1;

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *appFile = [documentsDirectory stringByAppendingPathComponent:@"MyFile1.txt"];

    //This is working fine.
   // [data writeToFile:appFile atomically:YES];

    NSFileManager *fileManager = [[NSFileManager alloc]init];
    char const *path = [fileManager fileSystemRepresentationWithPath:appFile];

   FILE *fp = fopen(path, "w+b");

    // This write is not working. File is empty.
    int cnt = fwrite (data_ptr , 1 , sizeof(test_obj1) , fp );
    fclose(fp);
    fp = NULL; 
```

任何人请告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T09:52:05.450

我建议您使用[`NSData`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html)而不是 C 函数。

```
NSData *myData = [[NSData alloc] initWithBytes:bytes length:length];
[myData writeToFile:path atomically:YES]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T11:24:16.893

你可以使用 NSData,NSArray,NSDictionary，它们有 [writeToFile: atomically:] 方法，它可以将数据写入文件。

如果你必须C来读写文件流，你可以使用我下面的方法，它可以将arrayString添加到文件中。

```
- (void)putArrayString:(NSString *)arrayString toFilePath:(NSString *)filePath
{
    FILE *fileStream = fopen([filePath UTF8String], "a+");

    if(fileStream == NULL)
    {
        fclose(fileStream);
        fileStream = fopen([filePath UTF8String], "w+");
        fputs([arrayString UTF8String], fileStream);
    }
    else
    {
        fputs([arrayString UTF8String], fileStream);
    }
    fclose(fileStream);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T15:33:53.440

我现在已经改变了打开a+它的写作和阅读的模式。感谢你的帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-26T10:14:20.590

看看你是否可以使用这个代码：

[https://github.com/RIKSOF/three20/blob/master/src/extThree20RemoteObject/Source/TTObjectModel.m](https://github.com/RIKSOF/three20/blob/master/src/extThree20RemoteObject/Source/TTObjectModel.m)

从 encodeToDocument 方法开始读取。它将对象的所有属性写入 JSON 或 XML 文件。

此类具有任何属性的任何子类都被正确写回。

# c# - 使用 NHibernate 性能问题获取大块数据

> ID：11666692
> 
> 赞同：4
> 
> 时间：2012-07-26T09:49:14.947
> 
> 标签：c#, sql-server, nhibernate

我有一个 50k 数据块。我使用 NHibernate 来检索所有（检索所有是必要的）。但是由于拥有通过加入 5-7 个表 NHibernate 创建的大型数据集大约需要一分钟。缓慢获取的主要原因可能是连接了 NHibernate 为每个表中的每一行创建查询的表。我知道这是必要的，因为 NHibernate 需要将每一行映射到一个对象，但必须消除这种开销。

有没有办法在 BLOCK 中获取数据，然后使用 NHibernate 创建对象。我包括我的映射文件以及代码 -

**应用程序配置**

```
 <?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <section name="hibernate-configuration" type="NHibernate.Cfg.ConfigurationSectionHandler, NHibernate" />
    </configSections>
    <hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">

        <bytecode-provider type="lcg"/>
        <reflection-optimizer use="true"/>
        <session-factory>
            <property name="connection.provider" >
                NHibernate.Connection.DriverConnectionProvider
            </property>
            <property name="connection.driver_class">
                NHibernate.Driver.SqlClientDriver
            </property>
            <property name="connection.connection_string">
                Data Source=dewashish-pc\sqlexpress;Initial Catalog=NHibernateTest;Integrated Security=True;
            </property>
            <property name="dialect">
                NHibernate.Dialect.MsSql2005Dialect
            </property>
            <property name="show_sql">
                false
            </property>
            <property name='proxyfactory.factory_class'>NHibernate.ByteCode.Castle.ProxyFactoryFactory, NHibernate.ByteCode.Castle</property>

        </session-factory>
    </hibernate-configuration>
</configuration> 
```

**分支.hbm.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="NHibernateSample" namespace="NHibernateSample">
<class name="Branch" table="Branch">
  <id name="BranchCode"/>
  <property name="BranchCode"/>
  <property name="BranchName"/>
  <bag name="EmployeeList" cascade="all-delete-orphan" inverse="false"  fetch="join" lazy="false">
      <key column="BranchCode"/>
      <one-to-many class="Employee" />
  </bag>
</class>

</hibernate-mapping> 
```

**员工.hbm.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="NHibernateSample" namespace="NHibernateSample">
  <class name="Employee" table="Employee">
      <id name="EmployeeId"/>
      <property name="EmployeeId"/>
      <property name="FirstName"/>
      <property name="LastName"/>
      <property name="BranchCode"/>
  </class>
</hibernate-mapping> 
```

**银行.cs**

```
 using System.Collections.Generic; 
using System.Text; 
using System; 

namespace NHibernateSample 
{
    [Serializable]
    public class Branch
    {
        private String branchCode;
        private String branchName;
        private IList<Employee> employeeList = new List<Employee>();

        public virtual IList<Employee> EmployeeList
        {
            get { return employeeList; }
            set { employeeList = value; }
        }
        public virtual String BranchCode
        {
            get { return branchCode; }
            set { branchCode = value; }
        }

        public virtual String BranchName
        {
            get { return branchName; }
            set { branchName = value; }
        }

        public Branch() { }
    }
} 
```

**员工.cs**

```
 using System;
using System.Collections.Generic;
using System.Text;

namespace NHibernateSample
{
    public class Employee
    {
        String employeeId;
        String firstName;
        String lastName;
        String branchCode;

        public virtual String EmployeeId
        {
            get { return employeeId; }
            set { employeeId = value; }
        }

        public virtual String FirstName
        {
            get { return firstName; }
            set { firstName = value; }
        }

        public virtual String LastName
        {
            get { return lastName; }
            set { lastName = value; }
        }

        public virtual String BranchCode
        {
            get { return branchCode; }
            set { branchCode = value; }
        }

        public Employee()
        { }
    }
} 
```

**Form1.cs**

```
 using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using NHibernate;
using NHibernate.Cfg;
using System.Reflection;
using System.Collections;

namespace NHibernateSample
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            ConfigureNHibernate();
            LoadData();
        }

        static ISessionFactory SessionFactory;
        System.Diagnostics.Stopwatch sw = new System.Diagnostics.Stopwatch();

        private void LoadData()
        {
            sw.Start();

            using (ISession session = SessionFactory.OpenSession())
            {
                long b = sw.ElapsedMilliseconds;
                try
                {

                    if (session.IsConnected)
                    { 
                        // as br order by br.BranchCode asc
                        IQuery query = session.CreateQuery("from Branch");
                        IList<Branch> iList = query.List<Branch>();
                        dvData.DataSource = iList;
                        int a = 0;
                        foreach (Branch br in iList)
                        {
                            a++;
                        }
                        MessageBox.Show(((sw.ElapsedMilliseconds - b)) + " - MilliSeconds to fetch " + System.Environment.NewLine + a.ToString() + " - Rows");
                    }

                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);

                }
            }
        }

        private void ConfigureNHibernate()
        {
            try
            {
                Configuration cfg = new Configuration();
                cfg.Configure();

                Assembly allocationAssembly = typeof(Branch).Assembly;
                cfg.AddAssembly(allocationAssembly);

                SessionFactory = cfg.BuildSessionFactory();
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }

    }
} 
```

我无法发布 SQL-Profiler 的图像，因为我没有足够的声誉，但会按需提供。谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:10:01.833

另一种方法是使用轻量级的微 ORM，例如[Dapper](http://code.google.com/p/dapper-dot-net/)，用于与 DB 进行任何大数据/高频通信。

它将显着提高您的表现。

# wix - 如何检查现有用户帐户是否在管理员组下？

> ID：11666695
> 
> 赞同：1
> 
> 时间：2012-07-26T09:49:30.830
> 
> 标签：wix, custom-action

我正在使用 wix 安装程序使用现有用户帐户（窗口服务的登录用户帐户）安装 Windows 服务。我有一个 customUI 对话框，它将获取用户名和密码，一旦在单击下一步按钮时提供凭据，安装程序应验证给定用户是否是内置管理员组的一部分。我应该使用自定义操作还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:08:49.713

这必须是自定义操作。[WiXUtilExtension](http://wix.sourceforge.net/manual-wix3/util_xsd_index.htm)为您提供了将新用户或现有用户添加到组的选项（请参阅[User](http://wix.sourceforge.net/manual-wix3/util_xsd_user.htm) / [Group](http://wix.sourceforge.net/manual-wix3/util_xsd_group.htm) / [GroupRef](http://wix.sourceforge.net/manual-wix3/util_xsd_groupref.htm)元素），但这可能不是您想要的 - 它可能非常危险。

顺便说一句，您可以利用[MSI Extensions 项目](https://github.com/dblock/msiext)- 看看[这个](http://dblock.github.com/msiext/docs/1.3/_check_membership_8h.html#a5f1f584a1700dc5f7c2c2f51688a2101)，它似乎正是您所需要的。

# iphone - 谷歌搜索 API 的 GData.xcodepro

> ID：11666699
> 
> 赞同：1
> 
> 时间：2012-07-26T09:49:38.723
> 
> 标签：iphone, ios, ipad, google-maps-api-3, google-api

我是新的 iPhone 开发人员，我正在尝试创建一个 iphone 应用程序。我需要该应用程序的 Gdata。我找到 GData.xcodeproj 但我无法下载它。我在此链接上获得此代码：- [http://code.google.com/p/gdata-objectivec-client/source/browse/#svn%2Ftrunk%2FSource%2FGData.xcodeproj](http://code.google.com/p/gdata-objectivec-client/source/browse/#svn%2Ftrunk%2FSource%2FGData.xcodeproj)任何人都可以帮助我..??

# java - Java 代码更改分析工具 - 例如告诉我方法签名是否已更改，方法实现

> ID：11666701
> 
> 赞同：2
> 
> 时间：2012-07-26T09:49:39.987
> 
> 标签：java, maven, build-automation, build-dependencies

是否有专门针对 Java 的**差异**工具，它不仅突出文件中的差异，而且更复杂？

更复杂的意思是它需要 2 个输入文件，不同版本的相同类文件，并告诉我以下内容：

*   字段名称已更改
*   添加了新方法
*   删除的方法
*   签名已更改的方法
*   实现已更改的方法（对更多细节不感兴趣）

做了一些谷歌搜索，找不到类似的东西......我认为它可能有助于确定对依赖项的更改是否需要重新构建特定模块。

提前致谢

**编辑：**

我想我应该澄清一下：

我不关心该工具的 GUI，它会是我感兴趣的以*编程方式调用*的东西。

至于我的推理：

*   如果我需要重建某些模块/组件，如果它们的依赖关系发生了变化（这可以为每个组件节省大约 1 小时），进行锻炼......更详细的解释，但我并不认为它很重要。
*   为了用于分析对我们试图锁定并依赖于更稳定的某些组件所做的更改，我们试图确保在特定组件中方法签名很少发生更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T00:45:59.883

您在上面说过[Clirr](http://clirr.sourceforge.net/)是您正在寻找的东西。

但是对于其他需求略有不同的人，我想推荐[JDiff](http://javadiff.sourceforge.net/)。两者各有利弊，但出于我的需要，我最终使用了 JDiff。我认为它不会满足您的最后一个要点，并且很难以编程方式调用。它所做的是为 API 差异生成有用的报告。

# jquery - 如何使用 jQuery 销毁 ActiveRecord？

> ID：11666705
> 
> 赞同：0
> 
> 时间：2012-07-26T09:49:46.320
> 
> 标签：jquery, ruby-on-rails, ajax

我想要做的是从 jQuery 中销毁一个特定的 ActiveRecord，它位于一个 .html.erb 文件中，该文件具有我想要作为实例变量（@connection）销毁的记录。我用 jQuery.ajax 尝试了各种尝试，但没有任何效果。任何帮助深表感谢。

我认为修复工作，但它没有。我得到了这个，如果我在 javascript 控制台中运行它，它会起作用：

```
$.ajax({
  type:"DELETE",
  url:"<%= connection_path(@connection) %>",
  success: function(msg){
    alert("disconnected");
  }
}); 
```

但是当它应该在我的javascript中运行时它不会。我很混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:07:34.500

您需要`destroy`在连接控制器中创建操作，该操作将接收连接 ID。`@connection.id`然后在您的视图中使用作为参数调用该操作。

**编辑**

对于 JQuery 部分，您可以使用如下内容：

```
$.post(<%= destroy_connection_path(@connection) %>, {_method:'delete'}, null, "script"); 
```

# mysql - MySQL Where Not Exists 根据 3 个值插入记录

> ID：11666707
> 
> 赞同：0
> 
> 时间：2012-07-26T09:49:48.513
> 
> 标签：mysql, insert

我需要在目标表中不存在记录的情况下插入 MySQL

我的查询

```
INSERT INTO comment (`mid`, `pid`, `comment_text`, `comment_date`, `comment_type`) 
 VALUES (180, 2, NULL, '2012-07-26 10:19:00', 'tag')  WHERE NOT EXISTS ( SELECT * FROM `comment` WHERE `mid`=180 AND `pid`=2 AND `comment_type`='tag') 
```

但是，当它运行时，我收到此错误

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 'WHERE NOT EXISTS ( SELECT * FROM `comment`WHERE `mid`=180 AND 'pid'附近使用正确的语法

任何想法本质上我都想在与值匹配时停止将重复的行添加到此表中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:55:57.433

尝试：

```
INSERT IGNORE INTO comment
(
 `mid`, `pid`, `comment_text`, `comment_date`, `comment_type`
)
(
    SELECT 180, 2, NULL, '2012-07-26 10:19:00', 'tag'
    FROM comment
    WHERE `mid`=180 AND
          `pid`=2 AND
          `comment_type`='tag'
    LIMIT 1
); 
```

编辑：更好的方法：

要从表中删除重复项，[请参见此处](https://stackoverflow.com/questions/11557757/cleaning-up-db-of-redundant-data/11557812#11557812)

```
ALTER IGNORE TABLE comment ADD UNIQUE KEY ix1(mid, pid, comment_type);

INSERT IGNORE INTO comment
(
 `mid`, `pid`, `comment_text`, `comment_date`, `comment_type`
)
VALUES 
(
 SELECT 180, 2, NULL, '2012-07-26 10:19:00', 'tag'
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:52:26.243

添加一个`ignore`

```
INSERT IGNORE INTO comment ... 
```

以防止重复插入。您不能`where`在`insert`.

> 如果使用 IGNORE 关键字，则执行 INSERT 语句时发生的错误将被视为警告。例如，如果没有 IGNORE，复制表中现有 UNIQUE 索引或 PRIMARY KEY 值的行会导致重复键错误并且语句被中止。使用 IGNORE，行仍然没有插入，但不会发出错误。

取自[MySQL INSERT 文档](http://dev.mysql.com/doc/refman/5.1/en/insert.html)

这意味着您应该向您的表添加一个唯一键（如果您还没有），以使数据库自行检查重复项。如果数据库发现重复，则不会`INSERT`。

如果你想`UPDATE`在重复的情况下进行，那也是可能的。看[这里](http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:57:58.003

为什么不只创建由 mid、pid 和 comment_type 列组成的唯一索引？

# c# - 将对象数组转换为字节数组

> ID：11666709
> 
> 赞同：3
> 
> 时间：2012-07-26T09:49:50.487
> 
> 标签：c#

我有一个对象数组，其中包含不同类型的数组，该数组在编译时未知，但结果是`int[]`等`double[]`。

我想将这些数组保存到磁盘，我真的不需要在线处理它们的内容，所以我寻找一种方法将它们`object[]`转换为`byte[]`然后我可以写入磁盘的方法。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:09:41.093

您可以对[Serializable](http://msdn.microsoft.com/en-us/library/ms233843.aspx)类型使用二进制[序列化和反序列化。](http://msdn.microsoft.com/en-us/library/b85344hz.aspx)

```
using System.Runtime.Serialization.Formatters.Binary;

BinaryFormatter binary = BinaryFormatter();
using (FileStream fs = File.Create(file))
{
    bs.Serialize(fs, objectArray);
} 
```

编辑：如果数组的所有这些元素都是简单类型，则使用 BitConverter。

```
object[] arr = { 10.20, 1, 1.2f, 1.4, 10L, 12 };
using (MemoryStream ms = new MemoryStream())
{
    foreach (dynamic t in arr)
    {
        byte[] bytes = BitConverter.GetBytes(t);
        ms.Write(bytes, 0, bytes.Length);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T11:03:58.753

你可以用老式的方法来做。

```
static void Main()
{
  object [] arrayToConvert = new object[] {1.0,10.0,3.0,4.0, 1.0, 12313.2342};

  if (arrayToConvert.Length > 0) {
     byte [] dataAsBytes;
     unsafe {
        if (arrayToConvert[0] is int) {
           dataAsBytes = new byte[sizeof(int) * arrayToConvert.Length];
           fixed (byte * dataP = &dataAsBytes[0]) 
              // CLR Arrays are always aligned
              for(int i = 0; i < arrayToConvert.Length; ++i) 
                 *((int*)dataP + i) = (int)arrayToConvert[i];
        } else if (arrayToConvert[0] is double) {
           dataAsBytes = new byte[sizeof(double) * arrayToConvert.Length];
           fixed (byte * dataP = &dataAsBytes[0]) {
              // CLR Arrays are always aligned
              for(int i = 0; i < arrayToConvert.Length; ++i) {
                 double current = (double)arrayToConvert[i];
                 *((long*)dataP + i) = *(long*)&current;        
              }
           }
        } else {
           throw new ArgumentException("Wrong array type.");
        }
     }

     Console.WriteLine(dataAsBytes);
  }
} 
```

但是，我建议您重新审视您的设计。您可能应该使用泛型，而不是对象数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T10:01:36.717

从[这里](https://stackoverflow.com/questions/10578310/convert-arraylist-object-to-byte)：

```
List<object> list = ...
byte[] obj = (byte[])list.ToArray(typeof(byte)); 
```

或者如果您的列表是复杂类型：

```
list.CopyTo(obj); 
```

# java - 无法解析类型“jint”，以及 JNIEnv、jclass

> ID：11666711
> 
> 赞同：17
> 
> 时间：2012-07-26T09:49:54.883
> 
> 标签：java, android, eclipse, android-ndk

尝试使用 jni c 代码构建一个简单的 helloWorld android/java 应用程序。我在 Windows 7 上使用 Eclipse Indigo。在非空格路径中安装了 ndk r8，最终使用 ndk-build.cmd 构建了 c 库。但是javah生成的头文件有未解决的错误，

*   类型“jint”无法解析
*   无法解析类型“JNIEnv”
*   类型“jclass”无法解析

昨天没有看到 jni.h 包含，但是今天早上重新启动后，该错误消失了。我也有一个未解决的 JNIEXPORT 和 JNICALL 错误，但#defining 它们似乎已经解决了这个问题。卡在上面的最后3个。已经在 google 和 Stack Overflow 上搜索了答案，但是一旦有人找到解决方案，他们就不会说那个解决方案是什么:(

我已经在项目属性中检查了包含在 java 和 c/c++ 透视图中的内容。它似乎包括我想要的 jni.h 目录，我将 android-14 用于 arm 平台。目标是 4.0.3 IceCream Sanwich（令人困惑的是 API 15？！）。我打算尝试使用 AVD 进行测试。我试过关闭/重新打开项目，从 Eclipse 中删除并重新导入，但这些都没有奏效。

我错过了一些包括吗？我应该在哪里设置它们？非常感谢一些帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-08-05T12:37:44.920

右键单击项目并转到属性属性。

转到**C/C++ General->Paths and Symbols**。

在**Includes->GNU C**中添加等效项：

`%ndkroot%\platforms\android-8\arch-arm\usr\include`

您可能想指向其他平台版本的 NDK，只需更改路径的 android-8 部分即可。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-24T15:50:42.107

最近我遇到了同样的问题。就我而言，问题是我将 Eclipse 项目转换为 C++ 项目，但我使用了 C 类型。所以为了解决这个问题，我只是从项目目录的文件中删除了这一`<nature>org.eclipse.cdt.core.ccnature</nature>`行`.project`：

```
<natures>
 <nature>com.android.ide.eclipse.adt.AndroidNature</nature>
 <nature>org.eclipse.jdt.core.javanature</nature>
 <nature>org.eclipse.cdt.core.cnature</nature>
 <nature>org.eclipse.cdt.core.ccnature</nature>
 <nature>org.eclipse.cdt.managedbuilder.core.managedBuildNature</nature>
 <nature>org.eclipse.cdt.managedbuilder.core.ScannerConfigNature</nature>
 <nature>edu.umd.cs.findbugs.plugin.eclipse.findbugsNature</nature>
</natures> 
```

然后重新启动 Eclipse。有关更多信息，您可以阅读[此](http://zyrikby.blogspot.it/2012/09/eclipse-ndk-error-type-jnicall-could.html)内容。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-25T12:52:07.627

尝试在指令`#undef __cplusplus`之前添加一个，如下所示：`#include`

```
#undef __cplusplus
#include <string.h>
#include <jni.h> 
```

这将迫使 Eclipse 考虑`non-c++`NDK 对象的定义。

# python - HLS - 如果我有 ts 文件（Ubuntu），如何创建 m3u8 清单？

> ID：11666717
> 
> 赞同：2
> 
> 时间：2012-07-26T09:50:05.103
> 
> 标签：python, video, ffmpeg, video-streaming, http-live-streaming

所以我发现我可以使用这个 ffmpeg 命令创建电影的 ts 片段：

```
ffmpeg -i foo.mp4 -codec copy -vbsf h264_mp4toannexb -map 0 -f segment -segment_list out.list -segment_time 10 out%03d.ts 
```

但现在我不知道如何从 ts 文件创建 m3u8 清单文件。Ubuntu中是否有一些开源库或命令可以为我做到这一点？

如果不是，用 Python 或其他语言创建 m3u8 文件有多难？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T15:41:00.207

FFmpeg 可以创建 m3u8 文件。只需使用参数“segment_list”作为播放列表名称，使用“segment_list_type m3u8”创建 m3u8 类型播放列表。只要确保您使用的是最新的 ffmpeg 版本。

有关更多信息，请查看[文档](http://ffmpeg.org/ffmpeg.html#segment_002c-stream_005fsegment_002c-ssegment)中的此部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T17:45:22.373

如果您在使用 -segment_list 参数时为输出文件指定 m3u8 扩展名，则从 git 提取的最新版本的 ffmpeg（使用 ffmpeg 版本 git-2013-08-15-165b657 测试）将生成 m3u8 格式的片段播放列表文件。

```
ffmpeg -i foo.mp4 -codec copy -vbsf h264_mp4toannexb -map 0 -f segment -segment_list out.m3u8 -segment_time 10 out%03d.ts 
```

[ffmpeg 流分段器参考](https://ffmpeg.org/ffmpeg-formats.html#segment_002c-stream_005fsegment_002c-ssegment)

# c++ - C++ 成员函数中的 PTHREAD_MUTEX_INITIALIZER 无法编译？

> ID：11666718
> 
> 赞同：6
> 
> 时间：2012-07-26T09:50:07.723
> 
> 标签：c++, pthreads

```
class A {
    public:
        A();
    private:
        pthread_mutex_t mu;
};

A::A()
{
    mu = PTHREAD_MUTEX_INITIALIZER;  //cannot compile
} 
```

我不能`pthread_mutex_t`在类成员函数中初始化吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T10:03:34.160

而不是这个：

```
A::A()
{
    mu = PTHREAD_MUTEX_INITIALIZER;  //cannot compile
} 
```

尝试这个：

```
A::A()
{
pthread_mutex_init( &(mu), NULL);
} 
```

PTHREAD_MUTEX_INITIALIZER 是一个宏，是一个用于 {0,0,0,0,0{0}} 之类的 C 结构初始化程序，只能在定义点使用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-26T09:53:20.517

在这种情况下使用[`pthread_mutex_init`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_mutex_init.html)，因为常量用于编译时初始化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T10:04:58.193

即使我们将其更改为在构造函数中使用初始化列表，它仍然会失败：

```
#include <pthread.h>

struct foo {
  pthread_mutex_t test;
  foo() : test(PTHREAD_MUTEX_INITIALIZER) {}
};

int main() {
  foo f;
} 
```

我们可以通过查看预处理器的输出来了解它*为什么失败并且仅用于在少数情况下进行初始化：*

```
struct foo {
  pthread_mutex_t test;
  foo() : test({ { 0, 0, 0, 0, 0, { 0 } } }) {}
}; 
```

在 C++03 中使用嵌套大括号进行初始化是不合法的，但更有趣的是 C++11 使这种语法和用法完全合法。

在您的原始代码中，我们可以看到更多内容：

```
A::A()
{
    const pthread_mutex_t test = PTHREAD_MUTEX_INITIALIZER; //  initialization - fine
    mu = test; // assignment - fine
    mu = PTHREAD_MUTEX_INITIALIZER;  // assignment - C++11 only
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-09T09:16:57.713

我喜欢@askmish 和@Diego 的答案。我也喜欢@Flexo 解释的内容。

但作为一种选择，如果您打算使用`PTHREAD_MUTEX_INITIALIZER`宏进行初始化，您可以做的是，在类定义中进行互斥体声明，`static`如下所示：

```
class A {
    public:
        A();
    private:
        static pthread_mutex_t mu;
}; 
```

然后您可以在源文件中初始化此静态互斥锁，但在任何成员函数之外，如下所示：

```
class A {
    public:
        A();
    private:
        static pthread_mutex_t mu;
};

pthread_mutex_t A::mu = PTHREAD_MUTEX_INITIALIZER;

A::A()
{
} 
```

**您的选择：**

*   因此，要么保持宏并保持静态（如此处所示）。或者，
*   您保持互斥锁的声明相同（非静态），但在`pthread_mutex_init()`成员函数中使用该函数（如其他人所指出的）。

# c# - 无法将其作为 .exe 文件 C# 的 ZipFile 读取

> ID：11666726
> 
> 赞同：2
> 
> 时间：2012-07-26T09:50:35.353
> 
> 标签：c#, extract, unzip

我正在使用 SevenZIP 库文件解压缩/提取 .exe 文件。当我尝试这个方法时，我得到一个错误 `Cannot read that as a ZipFile`& `zip exception was unhanded`。我不想在我的项目中使用任何 7zip.exe 控制台应用程序，并且我更喜欢在我的项目中使用 .dll 文件。

有没有其他方法可以提取 .exe 文件？

```
 private void MyExtract()
    {
        if(x86)
            ExtractZip(@"D:\22.1.2.702\64\953-win_x86.exe", ".");
        else
            ExtractZip(@"D:\22.1.2.702\64\.702-win_x64.exe", ".");
    }

    private void ExtractZip(string zipFile, string directory)
    {
        using (var zip1 = ZipFile.Read(zipFile))
        {
            // here, we extract every entry, but we could extract conditionally
            // based on entry name, size, date, checkbox status, etc.  
            foreach (var e in zip1)
            {
            e.Extract(directory, ExtractExistingFileAction.OverwriteSilently);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:55:47.560

代码示例看起来您使用的是[DotNetZip](http://dotnetzip.codeplex.com)而不是[SevenZipLib](http://sevenziplib.codeplex.com/)。DotNetZip 只能提取`.zip`文件，不能提取 7-zip 或`.exe`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:54:42.640

不要使用 SevenZip lib，而是在控制台中尝试 7zip.exe。使用 Process 类执行 7zip.exe。它工作完美。

# objective-c - 我想在 Mac OS X 上删除我自己创建的 KeyChain 中的所有项目

> ID：11666727
> 
> 赞同：1
> 
> 时间：2012-07-26T09:50:39.660
> 
> 标签：objective-c, macos, cocoa, keychain, core-foundation

我正在编写一个小工具来同步密码。为此，我正在使用我自己的 KeyChain。在保存之前，我想清除这个 KeyChain。但是，我似乎不明白如何使用 SecItemDelete 函数。

```
NSMutableDictionary *deleteQuery = [[NSMutableDictionary alloc] initWithObjectsAndKeys:
                                            kSecClassGenericPassword, kSecClass,
                                            kSecMatchLimit, kSecMatchLimitAll, nil];

    OSStatus status = SecItemDelete((__bridge CFDictionaryRef)deleteQuery);
    NSLog(@"%@", SecCopyErrorMessageString(status, NULL)); 
```

这是我到目前为止所写的，但不幸的是，我的项目（称为 Root.Foo 和 Root.Bar）仍保留在 KeyChain 中。另外我想知道，这个函数是如何知道应该搜索哪个 KeyChain 的？我喜欢的大多数示例都是关于 iOS 的，默认情况下，每个应用程序都有自己的 KeyChain。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T11:48:18.877

解决了它：

我错过了传递一系列要寻找的钥匙串！似乎在 iOS 上，始终使用应用程序的默认 KeyChain，但在 Mac OS 上，您需要将 KeyChain 指定为包含 SecKeychainRefs 的数组：

```
NSMutableDictionary *q = [NSMutableDictionary dictionary];
    [q setObject:kSecClassGenericPassword forKey:kSecClass];
    [q setObject:[NSArray arrayWithObject:(__bridge id)keyChain] forKey:kSecMatchSearchList];
    [q setObject:kSecMatchLimitAll forKey:kSecMatchLimit];
    SecItemDelete((__bridge CFDictionaryRef)q); 
```

这段代码完美运行。

# php - while循环创建一个无限循环

> ID：11666729
> 
> 赞同：-2
> 
> 时间：2012-07-26T09:50:42.527
> 
> 标签：php, wordpress

我编写了这个 PHP 代码来放置一个 wordpress 页面模板：

```
<?php 
query_posts('showposts=10&cat=7'); 
while (have_posts()) : the_post(); 
?> 

<li class="img-slider"> 
    <?php the_content(); ?> 
</li> 
<?php endwhile; ?> 
```

当我查看页面时，我没有看到任何结果，并且浏览器的右侧栏继续缩小。我知道代码会创建一个无限循环。我哪里错了？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:59:43.560

**首先**，你不应该使用`query_posts`. 它对于简单的循环来说太具有侵入性了，并且会与整个 WP_Query 混为一谈。也`showposts`应该是`posts_per_page`。

**其次**，如果没有更多的上下文，很难判断这个问题是什么。也许粘贴您的整个页面，并将其编辑到您的问题中。我的猜测是一个循环中的一个循环，应该停止在 100 个帖子上。（10 X 10）但如果它在其他任何地方重置，如果它很可能会变得无限！

请改用此代码来创建循环：

```
$custom_query = new WP_Query( 'posts_per_page=10' );

if($custom_query->have_posts()) :

    while ( $custom_query->have_posts() ) : $custom_query->the_post();

        //global $post; // for stuff like $post->post_name

        // Post stuff here
        // the_title();

    endwhile;

endif;
// Reset Post Data
wp_reset_postdata(); 
```

查看 WordPress 法典以获取更多详细信息。[http://codex.wordpress.org/Class_Reference/WP_Query#Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Parameters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:56:23.403

如果没有进一步的信息，我会说在`while`语句的每个循环中，函数都返回第一行数据？因此，每次执行 while 循环时，您都会再次调用该函数，该函数一遍又一遍地返回同一行，而实际上并未遍历结果集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:55:28.010

`if`您应该在循环中使用语句：

```
<?php 
query_posts('showposts=10&cat=7'); 
if ( have_posts() ): while ( have_posts() ) : the_post(); 
?> 

<li class="img-slider"> 
    <?php the_content(); ?> 
</li> 
<?php endwhile; endif; ?> 
```

# android - 复合按钮（开关）上的 NullPointer 异常

> ID：11666733
> 
> 赞同：2
> 
> 时间：2012-07-26T09:50:45.827
> 
> 标签：android, android-widget, switch-statement

**我正在尝试做的事情**

* * *

我正在尝试创建一个承载开关按钮的 PreferenceActivity，如果我可以启用或禁用 gps。布局和一切工作完美，在我添加了 Switch 执行某些操作的代码后，我得到了一个 NullPointerException，它不应该存在于我的眼中。

**问题**

* * *

你能给我一个 awnser 为什么这个 Nullpointer 在那里 =) 一些代码片段会很有帮助。

**代码**

* * *

PrefsActivity：

```
private Switch enable_gps;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.prefs);

        enable_gps = (Switch) findViewById(R.id.switch1);

        ActionBar actionBar = this.getActionBar();
        // So kann android.R.id.home benützt werden
        actionBar.setDisplayHomeAsUpEnabled(true);

        if (getPref() == false) {  <--- Here I get a Nullpointer
            // enable_gps.setEnabled(false);
            enable_gps.setChecked(false);
        } else {
            enable_gps.setChecked(true);
        }

        enable_gps.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                if (getPref() == false) {

                    GPSService.actionStart(getApplicationContext());
                    setPref(true);

                } else if (getPref() == true) {

                    GPSService.actionStop(getApplicationContext());
                    setPref(false);

                }
            }
        });

    } 
```

getPref 和 setPref

```
//Um zu prüfen ob on oder off
    private boolean getPref() {
        boolean isStarted;
        // SharedPreferences instanzieren
        SharedPreferences mPrefs = this.getSharedPreferences(LOG_TAG, 0);
        return isStarted = mPrefs.getBoolean(PREF_STARTED, false);
    }

    //Um zu setzen ob on oder off
    private void setPref(boolean started) {
        SharedPreferences settings = this.getSharedPreferences(LOG_TAG, 0);
        SharedPreferences.Editor editor = settings.edit();
        editor.putBoolean(PREF_STARTED, started);
        editor.commit();
    } 
```

日志猫：

```
07-26 09:47:02.991: E/AndroidRuntime(21729): FATAL EXCEPTION: main
07-26 09:47:02.991: E/AndroidRuntime(21729): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.ivocore/de.ivocore.preferences.PrefsActivity}: java.lang.NullPointerException
07-26 09:47:02.991: E/AndroidRuntime(21729):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
07-26 09:47:02.991: E/AndroidRuntime(21729):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
07-26 09:47:02.991: E/AndroidRuntime(21729):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
07-26 09:47:02.991: E/AndroidRuntime(21729):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
07-26 09:47:02.991: E/AndroidRuntime(21729):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-26 09:47:02.991: E/AndroidRuntime(21729):    at android.os.Looper.loop(Looper.java:137)
07-26 09:47:02.991: E/AndroidRuntime(21729):    at android.app.ActivityThread.main(ActivityThread.java:4745)
07-26 09:47:02.991: E/AndroidRuntime(21729):    at java.lang.reflect.Method.invokeNative(Native Method)
07-26 09:47:02.991: E/AndroidRuntime(21729):    at java.lang.reflect.Method.invoke(Method.java:511)
07-26 09:47:02.991: E/AndroidRuntime(21729):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-26 09:47:02.991: E/AndroidRuntime(21729):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-26 09:47:02.991: E/AndroidRuntime(21729):    at dalvik.system.NativeStart.main(Native Method)
07-26 09:47:02.991: E/AndroidRuntime(21729): Caused by: java.lang.NullPointerException
07-26 09:47:02.991: E/AndroidRuntime(21729):    at de.ivocore.preferences.PrefsActivity.onCreate(PrefsActivity.java:35)
07-26 09:47:02.991: E/AndroidRuntime(21729):    at android.app.Activity.performCreate(Activity.java:5008)
07-26 09:47:02.991: E/AndroidRuntime(21729):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
07-26 09:47:02.991: E/AndroidRuntime(21729):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
07-26 09:47:02.991: E/AndroidRuntime(21729):    ... 11 more 
```

* * *

提前感谢您的帮助

最好的祝福

苹果浏览器

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T09:54:56.793

添加此语句

```
setContentView(R.layout.main); <----- 
```

// main 是一个 xml 层，您在其中声明**了 R.id.switch1**

```
enable_gps = (Switch) findViewById(R.id.switch1);
                                   ^^^^^^^^^^^^

private boolean getPref() {
        boolean isStarted=false;<------
        // SharedPreferences instanzieren
        SharedPreferences mPrefs = this.getSharedPreferences(LOG_TAG, 0);
        return isStarted = mPrefs.getBoolean(PREF_STARTED, false);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T09:54:58.520

您正在访问此视图`enable_gps = (Switch) findViewById(R.id.switch1);`而不调用`setContentView();`所以这里 enable_gps 是`null`，并且您正在尝试调用`enable_gps.setChecked(false);`因此它导致`NPE`..

# sql-server - 将文件名传递给 SSIS 中的执行 SQL 任务

> ID：11666735
> 
> 赞同：1
> 
> 时间：2012-07-26T09:50:56.000
> 
> 标签：sql-server, ssis

我正忙于设置一个 SSIS 包，该包采用平面文件并将其内容加载到临时表中。从那里它需要获取该文件的文件名并将其与其中一行数据一起保存到另一个表的字段中。我通过使用执行存储过程的执行 SQL 任务来加载数据。此过程将文件名作为输入参数（只是为了将其写入该表）...我在执行 SQL 任务之前添加了一个脚本任务，该任务执行以下操作：

```
public void Main()
        {
            string inputFolder;
            string fileName;

            inputFolder = Dts.Variables["SourceFolder"].Value.ToString();
           // MessageBox.Show(inputFolder);

            string[] foundFiles = null;
            foundFiles = System.IO.Directory.GetFiles(inputFolder);

            if (foundFiles.Length > 0)
            {
                fileName = foundFiles[0];

                Dts.Variables["ProcessedFileName"].Value = System.IO.Path.GetFileName(fileName);
//                MessageBox.Show(fileName);

               // MessageBox.Show(System.IO.Path.GetFileName(fileName));

            }

            Dts.TaskResult = (int)ScriptResults.Success;
        } 
```

“ProcessedFileName”变量是 SSIS 包中的全局变量，也是“SourceFolder”变量。

我使用直接输入执行设置的执行 SQL 任务：

```
DECLARE @StoredProcedure varchar(100) = ?;
DECLARE @ProcessedFileName varchar(100) = ?;

EXEC ? ?; 
```

参数映射到变量 StoredProcedure 和 ProcessedFileName。

问题是当我运行它时它告诉我“没有为一个或多个必需参数提供值”。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:23:36.333

您不能使用参数动态更改执行 SQL 任务中的存储过程名称。这就是`EXEC ? ?;`正在做的事情。

如果您需要在运行时更改过程名称，那么您需要通过表达式使用字符串连接来构建我们的查询。

从更大的角度来看，您似乎正在使用一个脚本任务，其中[For Each (file) Enumerator](http://msdn.microsoft.com/en-us/library/ms141724.aspx)任务就足够了。有理由在 foreach 上使用脚本任务（例如，如果您需要按顺序处理等），但读起来不像您正在这样做。

可能对如何完成表达式和 foreach 枚举器有所帮助的各种答案

*   [SSIS：从文件夹中获取任何平面文件源并将名称缓存为超级全局变量](https://stackoverflow.com/questions/6229597/ssis-get-any-flat-file-source-from-folder-and-cache-the-name-as-a-super-global/6229982#6229982)

*   [使用 xp_cmdshell 通过 DTEXEC 传递变量 (SQL Server 2008)](https://stackoverflow.com/questions/10982780/passing-a-variable-through-dtexec-with-xp-cmdshell-sql-server-2008/10984198#10984198)

*   [将最新的 csv 文件导入 ssis 中的 sql server](https://stackoverflow.com/questions/8831060/import-most-recent-csv-file-to-sql-server-in-ssis/8838029#8838029)

*   [从多个文件中获取数据并将其加载到 ssis 中的原始文件目标（原始文件应该是动态的）](https://stackoverflow.com/questions/8923064/fetching-data-from-multiple-file-and-loading-it-into-raw-file-destinationraw-fi/8929658#8929658)

# mysql - Rails 3.2.6 和通过迁移创建数据库视图

> ID：11666736
> 
> 赞同：14
> 
> 时间：2012-07-26T09:50:58.987
> 
> 标签：mysql, ruby-on-rails-3.2, rails-migrations

我正在使用 rails 3.2.6，我需要创建一个数据库视图。像往常一样，我创建了一个迁移，并尝试使用 execute 方法实现目标。

不幸的是，迁移会生成一个表，而不是一个视图。为什么？

非常感谢，毛罗

更新：

我想要以下内容：

```
class CreateMyView < ActiveRecord::Migration
  def self.up
    execute <<-SQL
      CREATE VIEW my_view AS SELECT ...
    SQL
  end
  def self.down
    execute <<-SQL
      DROP VIEW my_view
    SQL
  end
end 
```

不幸的是，此迁移创建了一个表...

更新：以前的代码有效！我正在执行 rake db:reset 而不是 rake db:migrate:reset （我的错误）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-29T23:56:31.680

看起来您已经回答了自己的问题，但我会提出相关建议。试试[rails_sql_views gem](https://github.com/activewarehouse/rails_sql_views)。该链接指向 GitHub 上的原始存储库。不过，看起来它不再被维护了。值得查看[网络图](https://github.com/activewarehouse/rails_sql_views/network)并尝试其中一个分支。我不确定*任何*分支都支持 Rails 3.2.6，但我建议仔细查看它们。大约三年前， Christian Eichhorn[添加了对 mysql2 适配器的支持。](https://github.com/webhoernchen/rails_sql_views/commit/e7c2afeea20c369784b59d4e572fbc4ca499c666)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-27T03:25:53.547

我制作了一个名为[rails_db_views](https://github.com/anykeyh/rails_db_views)的 gem ，它与 Rails 4 兼容，并且仍然得到维护。

问候，

亚辛。

# objective-c - Objective-C 代码错误

> ID：11666737
> 
> 赞同：0
> 
> 时间：2012-07-26T09:51:00.073
> 
> 标签：objective-c, xcode

```
#import <Foundation/Foundation.h>
#import "Calculator.h"
#import "ctype.h"
int main(int argc, const char * argv[])
{
    double value1,value2;
    char operator;
    Calculator *myCal =[[Calculator alloc]init ];

    NSLog(@"Type in your expression");
    scanf("%1f %c %1f",&value1,&operator,&value2);

    [myCal setAccumulator:value1];
    if (operator =='+')
        [myCal add:value2];

    else if (operator == '-')
         [myCal subtract:value2];

     else if (operator == '*')
         [myCal multiply:value2];

     else if (operator == '/')
             [myCal divide:value2];

     NSLog(@"%.2f",[myCal accumulator]);

    }
    return 0;
} 
```

我找不到关于此代码的任何错误，我从书中键入代码，代码与书中的代码相同。但是xcode告诉我他们有两个错误，第一个是'预期的标识符或'（'第二个是'预期的外部声明'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:53:24.860

您在语句之前有一个虚假的括号`return`：

```
}  <--- remove this
return 0; 
```

**编辑**：改为使用此`sscanf()`语句，以便您可以输入正确的浮点数：

```
scanf("%f %c %f", &value1, &operator, &value2); 
```

# php - 移植正则表达式代码

> ID：11666746
> 
> 赞同：1
> 
> 时间：2012-07-26T09:51:29.307
> 
> 标签：php, regex, asp-classic, porting

我有一些最初用 PHP 编写的正则表达式代码，我需要将其移植到 ASP。这是原始的PHP代码：

```
$contents = file_get_contents("http://localhost/source.txt");
$title =  'My Title';
preg_match("/<b>$title.*?(<p.*?)<\/td/smi",$contents,$matches);
print_r($matches); 
```

这是 ASP 移植版本：

```
contents = File_Get_Contents("http://localhost/source.txt")
response.write contents
title = "My Title"
regex = "<b>" + title + ".*?(<p.*?)</td"
Set objRE2 = New RegExp
With objRE2
    .Pattern    = regex
    .IgnoreCase = True
    .Global     = True
    .MultiLine  = True
End With

Set myMatches = objRE2.Execute(contents)
'myMatches - Count is 0

Function File_Get_Contents(strFile)
    ' Remote File
    If Left(strFile, 7) = "http://" Or Left(strFile, 8) = "https://" Then
        'Set objXML = Server.CreateObject("Microsoft.XMLHTTP")
        ' Use this line if above errors
        Set objXML = Server.CreateObject("MSXML2.ServerXMLHTTP")
        objXML.Open "GET", strFile, False
        objXML.Send()
        File_Get_Contents = objXML.ResponseText
        Set objXML = Nothing
    ' Local File
    Else
        Set objFSO = Server.CreateObject("Scripting.FileSystemObject")
        Set objFile = objFSO.OpenTextFile(strFile, 1)
        File_Get_Contents = objFile.ReadAll()
        Set objFile = Nothing
        Set objFSO = Nothing
    End If
End Function 
```

来源.txt：

```
<td>
<b>My Title</b><br>
<p>My Content</p></td> 
```

如果我用两种语言写出实际的正则表达式模式，除了在 PHP 版本中转义正斜杠字符外，它是相同的。（我也测试过添加这个，效果相同）。

我缺少的正则表达式是否存在一些细微的差异，或者是我看不到的一些愚蠢的错误？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:29:30.327

.NET 和 PHP 正则表达式之间存在许多差异。¹ . 然而，ASP-Classic 对正则表达式的使用要早得多，而且文档较少。

假设这篇*Scripting Clinic*文章[*Microsoft Beefs Up VBScript with Regular Expressions*](http://msdn.microsoft.com/en-us/library/ms974570.aspx)是正确的，那么您将需要重新编写您的表达式。

首先，不支持`*?`,`??`和的“最小匹配” `+?`。

* * *

¹比较*掌握正则表达式*（第 3^版）的表 9-1 和 10-1。

# tcl - 如何标记文件中的行？

> ID：11666754
> 
> 赞同：1
> 
> 时间：2012-07-26T09:51:58.337
> 
> 标签：tcl

我有一个文件 test1 ：

```
Par1  
Par2  
Par3  
Par4  
Par1  
Par5  
Par5 
```

我制作了这个 Tcl 来过滤它：

```
set thefile [open test1 "r"]
set is_Par1 0
set is_Par3 0
while {![eof $thefile]} {
    set line [gets $thefile]
    if { [regexp {Par1} $line] } {
            set thefile2 [open test2 "w"]
            set is_Par1 1
    }
    if { [regexp {Par3} $line] } {
            set is_Par3 1
            set is_Par1 0
    }
    if { $is_Par1 && !$is_Par3 } {
            puts $thefile2 $line
    }
    if { [regexp {Par4} $line] } {
            set is_Par3 0
            close $thefile2
    }
}
close $thefile 
```

让我们假设文件和模式更复杂（我已经简化了）

我有这个结果：

```
Par1
Par5
Par5 
```

但我想得到这个结果：

```
Par1
Par2 
```

我没看到是我的错！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:05:04.440

问题是您的代码`test2`在第一次看到文件时打开文件`Par1`，写了一些行，在看到时关闭它`Par4`，然后在下次看到时*再次*`Par1`打开它，使其在进一步添加之前将文件截断为零线。（当然，当您的脚本终止时，该文件会自动关闭。）

当你找到你的 first 时，要么停止处理来自`test1`（通过外部循环）的行，要么以附加模式打开，这样至少第一批有趣的行不会丢失：`break``Par4`

```
set thefile2 [open test2 "a"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:43:34.173

你不想控制你的while循环`eof`： http: [//phaseit.net/claird/comp.lang.tcl/fmm.html#eof](http://phaseit.net/claird/comp.lang.tcl/fmm.html#eof)

假设您要在第一条 Par1 行开始打印并在 Par4 处停止并排除所有 Par3 行：

```
set f_in [open test1 r]
set f_out [open test2 w]
set started false
while {[gets $f_in line] != -1} {
    if {[string first Par1 $line] != -1} {set started true}
    if {!$started} continue
    if {[string first Par3 $line] != -1} continue
    if {[string first Par4 $line] != -1} break
    puts $f_out $line
}
close $f_in
close $f_out 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T09:59:52.880

当您`Par1`在输入中遇到第一个时打开输出文件，然后在读取第一个时关闭它`Par4`。到目前为止，一切都很好。但是当你到达第二个时，你只需继续阅读并重新打开输出文件`Par1`。这会覆盖输出文件！

所以我的猜测是你想在找到第一个之后停止阅读输入`Par4`，对吧？

# asp.net - 远程客户端上显示 iis7.5 windows 身份验证提示

> ID：11666758
> 
> 赞同：0
> 
> 时间：2012-07-26T09:52:08.887
> 
> 标签：asp.net, iis, login, ldap

我目前正在搭建一个内网系统，客户一直坚持自动登录。

我已将系统设置为通过 Windows 身份验证在 IIS 7.5 中对当前登录的（到 Windows）域用户进行身份验证。系统然后使用用户的用户名通过 LDAP 从 AD 中拖动详细信息。

这在本地完美运行，但是如果远程客户端（假设我有一台备用电脑作为测试平台）在同一个域上，并以备用测试用户身份登录，它将通过标准提示询问登录详细信息.

用户完成此操作后，系统工作正常，从 AD 等中拖动详细信息等，但下次会再次询问登录详细信息。

所以问题是：为什么会这样？以及如何停止提示？

它与IIS用户有关吗？我在 web.config 中有身份验证模式 =“Windows”，但我没有启用模拟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:00:50.457

很可能您所要做的就是将该站点添加到 IE 中的本地 Intranet 区域。

[http://netpl.blogspot.com/2012/06/iis-75-integrated-security-with-no.html](http://netpl.blogspot.com/2012/06/iis-75-integrated-security-with-no.html)

# ruby-on-rails - Salesforce 出现 ROR 错误：请求的资源不存在

> ID：11666759
> 
> 赞同：0
> 
> 时间：2012-07-26T09:52:11.747
> 
> 标签：ruby-on-rails, rubygems, salesforce, databasedotcom-gem

我正在使用 Ruby Gem“databascdotcom”将 Salesforce 集成到 Rails 应用程序中，一切正常。

但在第一次致电 salesforce 时出现以下错误：

`**The requested resource does not exist**`

如果我再次刷新（Ctrl + F5）页面，它可以正常工作而没有任何错误。

这是我的代码：

```
def SalesForceFeed
  @oppID = params[:oppid]

  client = Databasedotcom::Client.new client.client_id #=> foo client.client_secret #=> bar
  client.authenticate :username => "foo@bar.com", :password => "ThePasswordTheSecurityToken" #=> "the-oauth-token"
  client.materialize("Opportunity")
  begin
      @client=SalesForce::Connection.new.client
      @opp = Opportunity.find_by_Id(@oppID)
  rescue Exception=>e
    if(e.message == "The requested resource does not exist")
      return redirect_to :action => 'SalesForceFeed', :oppid => @oppID
    end
  end 
```

在第一次调用“SalesForceFeed”时，它返回错误“请求的资源不存在”，所以我添加了一个异常检查并再次调用“SalesForceFeed”，但我知道这不是正确的方法。

请建议我一个更好的方法来解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:47:35.200

最后我得到了这个问题。在物化中添加了错误的对象。我删除了它，它是固定的。

# powershell - AppFabric Cmdlet - 无法连接到本地集群

> ID：11666760
> 
> 赞同：0
> 
> 时间：2012-07-26T09:52:14.813
> 
> 标签：powershell, appfabric, cmdlets

我一直在尝试编写一个简单的小 Cmdlet 来允许我设置/获取/删除缓存项。我遇到的问题是我无法弄清楚如何连接到本地缓存集群。

我尝试添加通常的 app.config 内容，但似乎没有被采纳...

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="dataCacheClient" type="Microsoft.ApplicationServer.Caching.DataCacheClientSection, Microsoft.ApplicationServer.Caching.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" allowLocation="true" allowDefinition="Everywhere" />
  </configSections>
  <dataCacheClient>
    <hosts>
      <host name="localhost" cachePort="22233" />
    </hosts>
  </dataCacheClient>
</configuration> 
```

我宁愿根本没有那个配置。所以我真正要问的是以下powershell的等效C#代码是什么......

```
Use-CacheCluster 
```

`Use-CacheCluster`如果没有提供参数，我可以收集到的连接到本地集群

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:09:04.420

我刚刚使用 Reflector 对 AppFabric Powershell 代码进行了一些深入研究，以了解它在幕后是如何工作的。如果您`Use-CacheCluster`在没有参数的情况下调用，例如本地集群，代码会从 Registry key 中读取连接字符串和提供者名称`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\AppFabric\V1.0\Configuration`。不幸的是，它随后使用这些值来构建一系列都标记为内部的类（`ClusterConfigElement`和`CacheAdmin`）`ClusterHandler`，因此您不能使用它们来获取 Powershell 正在工作的当前集群上下文（因为需要更好的词）和。

那么，为了使您的 Cmdlet 工作，我认为您需要传入一个主机名（这将是集群中的服务器之一，也许您可​​以将其默认为本地机器名称）和端口号（您可以默认到 22233），并使用这些值来构建一个`DataCacheServerEndpoint`传递给您的`DataCacheFactory`例如

```
[Cmdlet(VerbsCommon.Set,"Value")]
public class SetValueCommand : Cmdlet
{
    [Parameter]
    public string Hostname { get; set; }
    [Parameter]
    public int PortNumber { get; set; }
    [Parameter(Mandatory = true)]
    public string CacheName { get; set; }

    protected override void ProcessRecord()
    {
        base.ProcessRecord();

        // Read the incoming parameters and default to the local machine and port 22233
        string host = string.IsNullOrWhiteSpace(Hostname) ? Environment.MachineName : Hostname;
        int port = PortNumber == 0 ? 22233 : PortNumber;

        // Create an endpoint based on the parameters
        DataCacheServerEndpoint endpoint = new DataCacheServerEndpoint(host, port);

        // Create a config using the endpoint
        DataCacheFactoryConfiguration config = new DataCacheFactoryConfiguration();
        config.Servers = new List<DataCacheServerEndpoint> { endpoint };

        // Create a factory using the config
        DataCacheFactory factory = new DataCacheFactory(config);

        // Get a reference to the cache so we can now start doing useful work...
        DataCache cache = factory.GetCache(CacheName);
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T05:09:00.267

问题是调用： DataCacheFactoryConfiguration config = new DataCacheFactoryConfiguration();

在 Cmdlet 方法内部会产生一个听起来像“无法初始化 DataCacheFactoryConfiguration”的错误。

# php - PHP preg_replace：限制替换

> ID：11666762
> 
> 赞同：0
> 
> 时间：2012-07-26T09:52:19.023
> 
> 标签：php, replace

我使用这段代码：

```
<?php $newstring = preg_replace("/[\n\r]/", "<br />" , $googlemapsbox_text); echo $newstring; ?> 
```

替换 \n 的。我想要实现的目标：限制`<br />`每行的数量，因此当 preg_replace 发现每行超过 1 \n 时，它们都应该替换为 ONE `<br />`。

我希望我的问题对你来说很清楚，对不起奇怪的英语

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:54:06.930

这应该有效：

```
preg_replace("/[\n\r]+/", "<br />", // rest of your code
=====================^ add a + there on your regex 
```

# c# - 从另一个函数间接绘制到面板

> ID：11666763
> 
> 赞同：0
> 
> 时间：2012-07-26T09:52:19.703
> 
> 标签：c#, winforms, graphics, panel

我正在用 C# 创建康威的生命游戏，一切正常，除了刷新面板以显示下一代。我可以在面板上绘制以建立单元格的网格线，使用放置和破坏“生命” `simWindow_Paint`，`simWindow_MouseClick`但目前我无法更新它。

```
private void updateGame(){

    int living = 0;
    int dead = 0;

    for(int i = 1; i < gameHeight; i++)
        for (int j = 1; j < gameWidth; j++){

            //set cell location and size
            Rectangle cell = new Rectangle();
            cell.Height = cell.Width = 9;
            int X = j - 1;
            int Y = i - 1;
            cell.X = Convert.ToInt32(X * 10 + 1);
            cell.Y = Convert.ToInt32(Y * 10 + 1);

            using (Graphics g = this.simWindow.CreateGraphics()){
                if (gameArray[i, j] == true){
                    Brush brush = new SolidBrush(Color.Red);
                    g.FillRectangle(brush, cell);
                   ++living;
                } else {
                    Brush brush = new SolidBrush(Color.White);
                    g.FillRectangle(brush, cell);
                    ++dead;
                }
            }
        }
    } 
```

我不确定我在 C# 中尝试做的事情是否可行，我已经在 Pascal 中做过，但我不确定 C# 是否以同样的方式工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:11:38.307

很难说出您向我们展示的内容，但我怀疑问题可能出在您的 simWindow_Paint 方法中。这是（可能）响应面板的绘制事件，我怀疑您正在做的是覆盖（或过度绘制）您在 updateGame() 方法中所做的所有绘图。

所有绘图都应在您的油漆处理程序中完成。因此，您绘制处理程序应该知道游戏的状态并相应地绘制它。您的 updateGame() 方法应该只更新游戏状态，然后使面板无效（强制重绘）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:06:59.650

我建议您查看以下有关 WinForms 中自定义绘画的文档：http: [//msdn.microsoft.com/en-us/library/kxys6ytf.aspx](http://msdn.microsoft.com/en-us/library/kxys6ytf.aspx)

# java - 在 Java 中读取和编辑 .wav（或 flac）详细信息

> ID：11666767
> 
> 赞同：0
> 
> 时间：2012-07-26T09:52:39.133
> 
> 标签：java, audio, wav

我有大量翻录的 .wav 文件（如果更容易的话，我已经准备好将它们转换为 flac），我想将这些详细信息插入 MySQL 数据库。当我在 Windows 资源管理器（不是浏览器）中右键单击 .wav 文件并选择属性 -> 详细信息时，我可以看到有关歌曲的一些详细信息。例如艺术家、流派和持续时间。如何在 Java 中阅读和编辑这些详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:28:44.977

要获取持续时间信息，请参阅此链接：[Java - 读取、操作和编写 WAV 文件](https://stackoverflow.com/questions/3297749/java-reading-manipulating-and-writing-wav-files)

本质上，WAV 文件被分解成块，这些块要么包含音频数据，要么以某种方式描述音频数据，或者提供有关它的信息。如果读者不理解其中一个块，它可以跳过它，这允许在文件中放置许多不同类型的信息。其中一个块包含采样率、通道数和采样帧总数等信息，您可以从中计算长度。

对于艺术家、流派等等......好吧，没有标准的块，所以如果它真的在文件中，而不是在某个地方的 windows db 中，它*可能*存储在嵌入在 WAV 中的 ID3 标签中。我不确定 ID3 的 chunkID 是什么，但它可能是“id3”或“ID3”（包括空格）。您可以通过在文件中搜索长度为 4 或更长的字符串来解决这个问题——通常数据块在开头，音频在结尾。（在 unix/macos 上，我会使用“strings”命令，可能会使用“head”）ID3 标签是 MP3 的标准标签，您可以通过谷歌搜索了解如何解析它们。要了解它们，您首先需要了解 WAV 文件，至少足以知道什么是块、块 ID、如何跳过您不知道的块

我不知道有一个库可以在 Java 中读取 WAV 文件中的 ID3 标签，因此您要么必须编写一个，要么将一个用另一种语言编写的包装。我怀疑 libsndfile 会工作，但它没有 MP3 阅读器，所以可能没有。您也可以尝试 SOX。您还可以查看我从未使用过的[http://javamusictag.sourceforge.net/ ，但它是在搜索中出现的。](http://javamusictag.sourceforge.net/)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:52:41.530

我最终将它们转换为 flac 文件并使用 JAudiotagger。感谢您的回复，这次我以这种方式结束了。

[http://www.jthink.net/jaudiotagger/](http://www.jthink.net/jaudiotagger/)

# jquery - 没有 URL 的 Ajax 调用

> ID：11666769
> 
> 赞同：-1
> 
> 时间：2012-07-26T09:52:43.637
> 
> 标签：jquery, ajax

当用户单击单选按钮时，我想隐藏一个下拉列表。为此，我将使用 AJAX 而不是 JS。在这里，我的代码：

```
<script type="text/javascript">
function loadXMLDoc()
{
   var xmlhttp;
   if (window.XMLHttpRequest)
   {
      xmlhttp=new XMLHttpRequest();
   }
   else
   {
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }
   xmlhttp.onreadystatechange=function()
   {
     if (xmlhttp.readyState==4 && xmlhttp.status==200)
     {
        var element = document.getElementById("myDiv");
        element.style.display = "";
        **element.innerHTML=xmlhttp.responseText;**
     }
   }
   xmlhttp.open("POST","**URL**",true);
   xmlhttp.send();
}    
</script> 
```

以上 element.innerHTML=xmlhttp.responseText & URL 我应该使用吗？没有理由将 ajax 调用传递给其他页面。我在这里完成了我的工作。没有 URL 脚本不起作用。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:11:13.353

他的呢，

```
function loadXMLDoc()   // your suitable method name
{

        var element = document.getElementById("myDiv");
        element.style.display = "";
} 
```

您不需要 ajax 调用；）

# sql-server - 比较 SQL Server 数据库架构和数据（同时）并生成脚本

> ID：11666770
> 
> 赞同：3
> 
> 时间：2012-07-26T09:52:44.017
> 
> 标签：sql-server, sql-server-2008-r2, compare

我有一个相当大/复杂的数据库，我需要在现场从版本 1 升级到版本 2。架构和重要的数据之间有很多变化。

是的，我知道这应该是版本控制的阿拉： http:
[//www.codinghorror.com/blog/2008/02/get-your-database-under-version-control.html](http://www.codinghorror.com/blog/2008/02/get-your-database-under-version-control.html) 但它不是 - 它将是当我完成时。

所以，当前的问题，我面临的选择是要么通过所有提交，要么尝试在两个版本的 db 之间进行差异。到目前为止，我已经尝试过：http:
[//opendbiff.codeplex.com/](http://opendbiff.codeplex.com/)
[http://www.sqldelta.com/](http://www.sqldelta.com/)
[http://www.red-gate.com/](http://www.red-gate.com/)

但是，它们似乎都无法成功生成模式升级脚本，因为它们不会同时处理数据。当向表添加新键时，这会导致外键违规，因为它引用的表是新的，并且虽然已创建表的架构，但它包含的数据尚未创建。可能是这样，但这需要我使用工具的不同部分，然后将两个脚本混合在一起。

我知道这可能看起来像以下内容的副本：
[比较两个 SQL Server 数据库（架构和数据）的最佳工具是什么？](https://stackoverflow.com/questions/685053/what-is-best-tool-to-compare-two-sql-server-databases-schema-and-data) 这是我找到我尝试过的大多数现有工具的地方，但到目前为止，我还没有设法让其中任何一个生成一个工作模式迁移脚本（我真的对数据不太在意，但我做到了需要外键所需的数据-这就是我部署旧版本和新版本时的全部区别）。

我期待太多了吗？我应该放弃并开始手动拼接我拥有的东西吗？还是我要完成所有提交并手动创建升级脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:00:39.733

I can't think of more powerful tools available than the ones you seem to have tried. If those fail, my [homegrown versioning system](http://code.google.com/p/bsn-modulestore/) probably won't help you much either.

However, you should be able to generate an update script and then manually edit it to add the data transformations to it.

And/or you could [disable the foreign key constraints](http://weblogs.sqlteam.com/joew/archive/2008/10/01/60719.aspx) for the time that the update script runs.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T16:00:42.100

没有“同时”做模式和数据这样的事情。即使您将它们放在一个大脚本中，您仍然会先做模式，然后再做数据。如果架构脚本创建了一个新表并向其添加了一个约束，那么您没有理由会收到参照完整性违规错误，因为这些表中没有行。

在任何情况下，您都应该尝试一下我们的[xSQL 模式比较](http://www.xsql.com/products/sql_server_schema_compare/)和[数据比较](http://www.xsql.com/products/sql_server_data_compare/)工具，您会对所获得的性能和控制水平印象深刻。

# iphone - OpenGL实现问题

> ID：11666771
> 
> 赞同：0
> 
> 时间：2012-07-26T09:52:45.810
> 
> 标签：iphone, xcode, opengl-es

> glCheckError: 0501 在 /Users/mac/Documents/PhotoFrameApp/PhotoFrameApp/Debug.c:177 捕获

知道这个错误可能是什么吗？

这是一个调试错误，我尝试使用 Apple 的 GLImageProcessing 示例实现 OpenGL 以增加、降低 UIImage 的亮度、对比度等。该应用程序不会崩溃，但它也不起作用。

View 有一个 UITabbar 包含不同的效果，如亮度、对比度、色调等，以及一个用于增加或减少它们的 UISlider。

实现的代码是： -

```
int b, i;
tabBar.selectedItem = [tabBar.items objectAtIndex:0];
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef context = CGBitmapContextCreate(nil, 30, 30, 8, 0, colorSpace, kCGImageAlphaPremultipliedFirst);
CGImageRef theCGImage = imageCollage.image.CGImage;

// Draw with white round strokes
CGContextSetLineCap(context, kCGLineCapRound);
CGContextSetRGBStrokeColor(context, 1.0, 1.0, 1.0, 1.0);
CGContextSetRGBFillColor(context, 1.0, 1.0, 1.0, 1.0);
CGContextSetLineWidth(context, 2.0);

for (b = 0; b < NUM_BUTTONS; b++)
{
    CGContextClearRect(context, CGRectMake(0, 0, 30, 30));

    switch(b)
    {
        case BUTTON_BRIGHTNESS:
        {
            const CGFloat line[8*4] = {
                15.0, 6.0, 15.0, 4.0,
                15.0,24.0, 15.0,26.0,
                6.0,15.0,  4.0,15.0,
                24.0,15.0, 26.0,15.0,
                21.5,21.5, 23.0,23.0,
                8.5, 8.5,  7.0, 7.0,
                21.5, 8.5, 23.0, 7.0,
                8.5,21.5,  7.0,23.0,                    
            };

            // A circle with eight rays around it
            CGContextStrokeEllipseInRect(context, CGRectMake(10.5, 10.5, 9.0, 9.0));
            for (i = 0; i < 8; i++)
            {
                CGContextMoveToPoint(context, line[i*4+0], line[i*4+1]);
                CGContextAddLineToPoint(context, line[i*4+2], line[i*4+3]);
                CGContextStrokePath(context);                   
            }
            break;
        }
- (void)sliderAction:(id)sender{
// Redraw the view with the new settings
obj = [[EAGLView alloc]init];
[obj drawView];}

- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item{
// Recenter the slider (this application does not accumulate multiple filters)
//slider setValue:1.0 animated:YES];
// Redraw the view with the new settings
[obj drawView];} 
```

# apache - htaccess 重写麻烦

> ID：11666783
> 
> 赞同：3
> 
> 时间：2012-07-26T09:53:31.093
> 
> 标签：apache, .htaccess, codeigniter, mod-rewrite

我完全被 htaccess 重写无法在我的服务器上运行。这是 Codeigniter 的基本 index.php 重写，在我的 Mac 上开发时工作正常，但在我的服务器上失败（CentOS、Apache 2、WHM）

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|css|js|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

尝试加载 /about/ 将显示 index.php 页面。/index.php/about 将显示正确的页面。我已经尝试了所有我能想到的选项组合，但都无济于事。我的 rewrite.log 示例如下。

```
[dev.tirius.co.uk/sid#5d65288][rid#5e37c00/initial] (3) [per-dir /home/tirius/subdomains/dev/public_html/] add path info postfix: /home/tirius/subdomains/dev/public_html/about -> /home/tirius/subdomains/dev/public_html/about/
[dev.tirius.co.uk/sid#5d65288][rid#5e37c00/initial] (3) [per-dir /home/tirius/subdomains/dev/public_html/] strip per-dir prefix: /home/tirius/subdomains/dev/public_html/about/ -> about/
[dev.tirius.co.uk/sid#5d65288][rid#5e37c00/initial] (3) [per-dir /home/tirius/subdomains/dev/public_html/] applying pattern '^(.*)$' to uri 'about/'
[dev.tirius.co.uk/sid#5d65288][rid#5e37c00/initial] (2) [per-dir /home/tirius/subdomains/dev/public_html/] rewrite about/ -> /index.php/about/
[dev.tirius.co.uk/sid#5d65288][rid#5e37c00/initial] (1) [per-dir /home/tirius/subdomains/dev/public_html/] internal redirect with /index.php/about/ [INTERNAL REDIRECT]
[dev.tirius.co.uk/sid#5d65288][rid#5e3f7c8/initial/redir#1] (3) [per-dir /home/tirius/subdomains/dev/public_html/] add path info postfix: /home/tirius/subdomains/dev/public_html/index.php -> /home/tirius/subdomains/dev/public_html/index.php/about/
[dev.tirius.co.uk/sid#5d65288][rid#5e3f7c8/initial/redir#1] (3) [per-dir /home/tirius/subdomains/dev/public_html/] strip per-dir prefix: /home/tirius/subdomains/dev/public_html/index.php/about/ -> index.php/about/
[dev.tirius.co.uk/sid#5d65288][rid#5e3f7c8/initial/redir#1] (3) [per-dir /home/tirius/subdomains/dev/public_html/] applying pattern '^(.*)$' to uri 'index.php/about/'
[dev.tirius.co.uk/sid#5d65288][rid#5e3f7c8/initial/redir#1] (1) [per-dir /home/tirius/subdomains/dev/public_html/] pass through /home/tirius/subdomains/dev/public_html/index.php 
```

如您所见，htaccess 已被拾取并且 mod_rewrite 已启用并正在工作，但似乎没有任何内容被附加到 index.php

这一定是一个 Apache 配置问题，但我真的不知道它可能是什么。

来自 httpd.conf 的示例

```
<Directory "/">
    Options ExecCGI FollowSymLinks IncludesNOEXEC Indexes MultiViews SymLinksIfOwnerMatch
    AllowOverride All
</Directory> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:46:22.710

这是我在 CentOS 上的 .htaccess：

```
RewriteCond $1 !^(index\.php|images|robots\.txt|favicon\.ico)
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

注意正斜杠前的问号。

我认为这与将 PHP 作为 FastCGI 运行有关。我相信问号使前面的字符可选（即它也将匹配 index.ph）。我已经尝试对此进行更多研究，但找不到明确的原因。我想我只是尝试了我在寻找时可以找到的重写规则的所有变体，并没有费心问它为什么有效。

很高兴有帮助。

# magento - 获取具有相同 id magento 的块数组

> ID：11666784
> 
> 赞同：0
> 
> 时间：2012-07-26T09:53:31.780
> 
> 标签：magento

```
$id = 'unique_id_block';
    $cmsBlockModel = Mage::getResourceModel('cms/block');
    $block = Mage::getModel('cms/block');

    $cmsBlockModel->load($block, $id); 
```

我有上面的代码来返回一个名为 unique_id_block 的块对象。

这怎么可能返回一个块数组，因为我可能有多个具有相同 ID 但具有不同商店视图的块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:30:09.957

您可以使用集合获取具有相同标识符的所有块...

```
$id = 'unique_id_block';
$blockCollection = Mage::getModel('cms/block')->getCollection()
    ->addFieldToFilter('identifier', $id); 
```

然后，您可以像执行数组一样遍历此集合：

```
foreach ($blockCollection as $block) {
  //...
} 
```

由于您的问题要求将这些作为数组，您还可以将集合转换为数组并获取其项目，如下所示：

```
$id = 'unique_id_block';
$blockCollection = Mage::getModel('cms/block')->getCollection()
    ->addFieldToFilter('identifier', $id)
    ->toArray();

$blocks = $blockCollection['items']; 
```

但除非有充分的理由，否则我会坚持第一个例子。

# windows - 如何安装在非默认端口上运行的 OpenLDAP 服务？

> ID：11666788
> 
> 赞同：0
> 
> 时间：2012-07-26T09:53:42.073
> 
> 标签：windows, service, installation, openldap

我有一个在 389 上运行的生产 LDAP 服务器，我想在端口 10389 上安装另一个 OpenLDAP 以进行测试。

我想知道如何将 OpenLDAP 守护程序安装为将在 389 以外的另一个端口上运行的 Windows 服务。

注意：我无法使用，`slapd install`因为我已经安装了此服务...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:34:33.577

好吧，我安装了可以将任何类型的可执行文件作为服务运行的[NSSM 。](http://nssm.cc/)

我创建了一个具有相应选项的批处理文件，现在我在非默认端口上运行了作为服务的打开LDAP。

# java - 装饰器设计模式 VS 继承，运行时 VS 编译时

> ID：11666790
> 
> 赞同：2
> 
> 时间：2012-07-26T09:53:51.423
> 
> 标签：java, inheritance, runtime, decorator, compile-time

[我在这个页面](http://www.javaworld.com/javaworld/jw-12-2001/jw-1214-designpatterns.html?page=3)上看到了下面的评论。我不明白为什么“装饰器关系可以在运行时改变”以及为什么“继承关系在编译时是固定的”。

> 装饰器被证明比继承更灵活，因为装饰器和它们装饰的对象之间的关系可以在运行时改变，但是基类和它们的扩展之间的关系在编译时是固定的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T10:05:25.480

如果你有三个类，A、B 和 C，那么无论你如何继承，你都有一个静态关系，例如 A:B 和 B:C。

另一方面，如果这三个都是装饰器，那么您可以在同一进程中以任意顺序装饰它们，例如 A(B(C)) 或 C(A(B))。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T10:05:41.493

您可以随时装饰对象。假设你有一个，你可以在运行时`FileInputStream`用它来装饰它。`BufferedInputStream`如果这是由类继承设计的，您将无法将您的类型转换/转换`FileInputStream`为任何其他类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T10:04:57.740

使用装饰器，您只需编写一个将对象作为输入并返回某种包装器的方法。装饰器可以任意智能，可以针对不同的输入进行专门的实现，等等。

使用继承，您必须在编译时显式声明子类及其所有细节，然后实现固定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-28T16:29:41.633

我认为这些例子没有说明的是装饰器有一个对装饰类的引用，即它使用一个接口，假设你想在有人访问“列表”的最后一个元素时打印出“结束”，你可以子类化所有实现 List 并具有 'MyArrayList、MyLinkedList、MyCopyOnWriteArrayList 等的类并覆盖 get() 方法，（我相信你会同意）或者你可以使用装饰器并传入实现（即实际列表）在运行时，它被它的接口引用，所以你只有一个新的 get 方法的实现。考虑这个人为的例子（如下），重点是我可以将 List 的任何实现传递给 ListDecorator 并且它会起作用，想象一下通过继承来做到这一点，我相信你

```
package decorator;

import java.util.ArrayList;
import java.util.List;

public class ListDecorator {

    List realList;
    public static void main(String[] args) {

            // Here we are decorating an ArrayList but it could be anything
            // that implements the List interface.
        ListDecorator ld = new ListDecorator( new ArrayList() );
        for(int i=0; i<10; i++)
            ld.add( i );

        for(int j=0; j<10; j++)
            System.out.println("[j]="+ld.get(j) );
    }
    ListDecorator(List realList){
        this.realList = realList;
    }
    public void add(Object o){
        realList.add( o );
    }
    public Object get(int i){
        if(i == realList.size() -1)
            System.out.println("The end");

        return realList.get(i);
    }
} 
```

# android - 加载图像时，带有背景的 ImageView 会留下边距

> ID：11666792
> 
> 赞同：3
> 
> 时间：2012-07-26T09:53:52.237
> 
> 标签：android, android-layout, android-imageview

我的 imageview 声明如下：

```
<ImageView
        android:id="@+id/category_image_top"
        android:layout_width="match_parent"
        android:layout_height="170dp"
        android:maxHeight="170dp"
        android:adjustViewBounds="true"
        android:scaleType="centerCrop"
        android:background="@drawable/image_placeholder"
        /> 
```

这就是我在 asynctask 中设置 category_image_top 的方式（在 onPostExecute 上）

```
imageView.setImageBitmap(image); 
```

设置图像后，imageview 突然获得 4px 的边距。但是当我从 XML 中删除 android:background="@drawable/image_placeholder" 一切都很好？！

顺便说一句：image_placeholder 是一个 9-patch 图像，如果这有什么不同的话。

任何想法为什么会发生这种情况？

更新：我尝试将背景设置为纯色，然后在加载图像时没有出现边距。我还尝试放置另一个 9-patch 图像，当我这样做时，边距再次出现。所以它必须是有背景的东西作为图像

UPDATE2：也许这是一个像这个人指出的安卓错误？[https://stackoverflow.com/a/8340745/581531](https://stackoverflow.com/a/8340745/581531)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:59:48.463

好的。找到了解决方案，也许它不是最漂亮的，但是嘿，它工作！:)

在我看来，我刚刚添加了一个任意视图，它是我的图像的持有者。最重要的是我有我的 ImageView，所以当加载图像时占位符（视图）被覆盖。这是我的观点（或至少部分重要）：

```
<FrameLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
         >

        <View 
            android:layout_width="match_parent"
            android:layout_height="210dp"
            android:background="@drawable/image_placeholder"
            />

        <ImageView
            android:id="@+id/article_image"
            android:layout_width="match_parent"
            android:layout_height="210dp"
            android:adjustViewBounds="true" 
            android:layout_gravity="center"
            android:scaleType="centerCrop"
            />
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:54:56.027

我可以猜到 image_placeholder 有 4px 透明边距

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:55:23.733

~~包含图像视图的元素可能有边距，你检查过吗？~~

更改`android:background="@drawable/image_placeholder"`为`android:src="@drawable/image_placeholder"`

还添加以下内容：`android:scaleType="centerCrop"`

如果 centerCrop 不起作用，请尝试[此处](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)列出的其他方法。

# jquery-mobile - 下拉选择不适用于 iScroll.js

> ID：11666794
> 
> 赞同：1
> 
> 时间：2012-07-26T09:54:00.677
> 
> 标签：jquery-mobile, iscroll4

我有一个 JSON 字符串。有了它，我必须填写下拉菜单。[GroupBy 在 JavaScript 中对 JSON 数据进行分组并填充 optgroup](https://stackoverflow.com/questions/8578814/groupby-in-javascript-to-group-json-data-and-populate-on-optgroup)我研究了这个问题并尝试了它。

```
 <!DOCTYPE HTML>
    <html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0 ,maximum-scale=1.0  ,minimum-scale=1 ,user-scalable=0" />
           <!--jQuery Mobile CSS-->
        <link rel="stylesheet" href="common/style/jquery/jquery.mobile-1.1.0.min.css" />
        <link type="text/css" href="common/style/jquery/jquery.mobile.fixedToolbar.polyfill.css" rel="stylesheet" />
        <link type="text/css" href="common/style/jquery/jquery.mobile.datebox.min.css" rel="stylesheet" /> 
        <link type="text/css" href="common/style/jquery/jquery.mobile.simpledialog.min.css" rel="stylesheet" /> 
        <link type="text/css" href="common/style/jquery/prettify.css" rel="stylesheet" />

        <!--Custom CSS-->
            <link rel="stylesheet" href="common/style/commonLayout.css"/>
        <link rel="stylesheet" href="common/style/mc-lib/mclib.css"/>
        <link rel="stylesheet" href="common/style/custom/custom.css"/>

        <!--jQuery Mobile JS-->
        <script type="text/javascript" src="common/js/jquery/jquery-1.7.2.js"></script>
        <script type="text/javascript" src="common/js/jquery/jquery.mobile-1.1.0.min.js"></script>
        <script type="text/javascript" src="common/js/jquery/jquery.mobile.fixedToolbar.polyfill.js"></script>
        <script type="text/javascript" src="common/js/jquery/jquery.mousewheel.min.js"></script>
        <script type="text/javascript" src="common/js/jquery/jquery.mobile.datebox.min.js"></script>
        <script type="text/javascript" src="common/js/jquery/jquery.mobile.simpledialog.min.js"></script>
        <script type="text/javascript" src="common/js/jquery/prettify.js"></script>

        <!--Custom JS-->
        <script type="text/javascript" src="common/js/Lib/spin.js"></script>
        <script type="text/javascript" src="common/js/Lib/iscroll.js"></script>
        <script type="text/javascript" src="common/js/Lib/MCLib.js"></script>

        <!--Hy5 JS-->
        <script type="text/javascript" src="common/js/hy5/hy5.js"></script>

        <script type="text/javascript" src="js/sample.js"></script> 

        </head>
    <body>
    <div data-role="page" data-theme="b" id="LoginScreen"  data-overlay-theme="c">  

        <div id="wrapper">
        <div id="scroller">

        <div data-role="content">

        <fieldset class="l1c1Panel"  data-role="controlgroup">
            <label for="product">Product</label>
            <select name="products" class="product" id="product">
            </select>

        </fieldset>

        </div>  
        </div>
        </div>  
    </div>
    </body>
    <script type='text/javascript'>

        var data = {
        "Category 1":[
            {"id": "210","name": "Name 1"},
            {"id": "187","name": "Name 2"},
            {"id": "186","name": "Name 3"},
            {"id": "185","name": "Name 4"},
            {"id": "184","name": "Name 5"},
            {"id": "183","name": "Name 6"},
            {"id": "182","name": "Name 7"}
        ],
        "Category 2":[
            { "id": "181","name": "Name 8"},
            {"id": "178","name": "Name 10"}
        ],
        "Category 3": [
            {"id": "180","name": "Name 9"}
        ]
    };

    var product = $('#product');
    $.each(data, function (key, cat) {
        var group = $('<optgroup>',{label:key});
        $.each(cat,function(i,item) {
            $("<option/>",{value:item.id,text:item.name})
                .appendTo(group);
        });
        group.appendTo( product );
    });

var pageScroller;
    $(document).on("pagebeforeshow",'#LoginScreen',function(event){
        pageScroller.refresh();

    });

    function makeScroll(){
        pageScroller=new iScroll('wrapper');
    }

    $(document).on("pagebeforecreate",'#LoginScreen',function(event){
        makeScroll();

    });        
    </script>
    </html> 
```

如果我删除 iScroll 相关代码，下拉菜单工作正常。我无法找到问题所在。请帮我解决这个问题

# jquery - click() 事件不需要完整的类名？

> ID：11666795
> 
> 赞同：1
> 
> 时间：2012-07-26T09:54:03.737
> 
> 标签：jquery

我有这些输入对象如下，

```
 <input type='radio' class="but option" value='Yesterday'>
<input type='radio' class="but option" value='Last Week'>  
<input type='radio' class="but option" value='Last Month'>
<input type='radio' class="but option" value='All Time'> 
```

我有一个 jquery click 事件处理程序，它说`$(".but").click(function() {`

这些输入对象被此事件处理程序捕获，我想知道为什么当它们的类名不是“但是”时

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T09:55:21.590

如果您在属性中有空格，`class`那么您正在分配*多个*类，而不是一个名称中带有空格的类。所以你的输入有两个类：“但是”和“选项”。

当您匹配类名时（例如使用 jQuery），它将匹配具有该类的任何元素，即使该元素也具有其他类。这就是为什么您的所有输入（都有一个“但是”类以及另一个类）都匹配的原因。

您可以在 W3 或[MDN的相关](https://developer.mozilla.org/en/HTML/Global_attributes)[html4](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)和[html5](http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#classes)文档中阅读更多相关信息。

# eclipse - eclipse maven和ant如何协同工作？

> ID：11666799
> 
> 赞同：1
> 
> 时间：2012-07-26T09:54:15.900
> 
> 标签：eclipse, maven, ant

我制作了简单的 maven 项目，并用 Eclipse 打开它。我已经为 Eclipse 安装了 Maven 插件。我对以下感兴趣：

*   当我点击保存源代码时 Eclipse 如何编译代码（它是否使用来自 ant 或 maven 或其他东西的配置）？
*   当我从 Eclipse 的 JUnit 插件运行测试时，那些 Eclipse 调用*mvn test*（我想不是，但究竟发生了什么）？
*   maven 是否有可能成功构建但 Eclipse 显示代码错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:18:02.820

Eclipse的[Maven 集成](http://www.eclipse.org/m2e/)使编辑 POM 文件变得更加容易，允许您从 Eclipse 中执行 Maven 构建并帮助进行依赖管理。它实际上并不编译您的代码（当然，除非您从 Eclipse 中执行 maven 构建）。主要帮助是依赖管理和在 Eclipse 中编写项目的*.classpath*文件。

尝试回答您的问题：

1.  Eclipse 使用其标准机制来编译代码。使用[适用于 Java 开发人员的标准 Eclipse，](http://www.eclipse.org/downloads/moreinfo/jee.php)您的项目将具有*Java 项目性质*，然后 Eclipse 将使用[Java 开发工具 - JDT](http://www.eclipse.org/jdt/)来编译代码。（在内部这使用增量构建器来构建代码[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2FresAdv_builders.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2FresAdv_builders.htm)）。它将编译哪些源文件以及将结果`.class`文件放置在您项目的 Java 构建路径中的位置（我猜 maven 插件可能会为您配置）

2.  JUnit 支持也是 Java 开发工具的一部分。

3.  maven 可能会在 Eclipse 之外成功构建项目，但同一项目将在 Eclipse 中显示错误。这通常归结为类路径错误（在项目的 POM 中定义的依赖项未添加到 Eclipse 中的类路径中）。如果您在 Eclipse 中使用 maven 插件，这可能不应该发生。如果您没有在 eclipse 中使用 maven 插件，您可以执行`maven eclipse:eclipse`让 maven 更新项目的 Eclipse *.classpath*文件，这应该可以解决任何这些问题。

# c# - MDI 应用程序中的单例对象

> ID：11666800
> 
> 赞同：0
> 
> 时间：2012-07-26T09:54:16.320
> 
> 标签：c#, winforms, singleton

我有一个基于选项卡的多文档界面应用程序，并且我有一个表单，这个表单的对象是仅针对该特定选项卡的单例。对于其他选项卡，我需要另一个单一形式的对象，它是仅用于该选项卡的单例对象。

我已经实现了单例模式，但所有选项卡都使用了相同的对象。

编辑：每个 TAB 负责监视与一个客户的活动，SingleForm 托管所有控件。当用户移动到正在监视另一个客户的其他 TAB 时，我的 singleForm 会显示以前的客户详细信息。

任何解决方案。请分享。

谢谢你，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:56:53.593

您不能在此处使用单例模式。单例模式确保只有*一个*对象，对您的应用程序是全局的。

（如果您详细说明一下，例如，*为什么*首先使用单例，您可能会得到更详细的答案。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T10:08:05.963

看起来是个糟糕的设计。但是，如果您*真的*必须这样做，请尝试以下操作：

```
 public class GlobalSingletoneLocator
    {
      private static Dictionary<int,TabOnlyObject> _collection = new Dictionary<int, TabOnlyObject>();
     //Do all singleton initialization
     // ....

      public TabOnlyObject GetServiceByTabID(uint id)
      {
        //initialize and return the new instance of class you tried to use
        if(!_collection.ContainsKey(id))
        {
          var service = new TabOnlyObject();
          _collection.Add(id, service);
         }
        return _collection[id];
       }
} 
```

在你的标签中你可以做

```
var service = GlobalSingletoneLocator.Instance.GetServiceByTabID(this.Id); 
```

代替

```
var service = SingletonService.Instance; 
```

# android - Netmera Android SDK 分页

> ID：11666804
> 
> 赞同：3
> 
> 时间：2012-07-26T09:54:23.653
> 
> 标签：android, pagination, netmera

[Netmera Android SDK](http://netmera.com)中 NetmeraService 的 setPage() 函数的用途是什么？例如，当我们搜索为 setPage(3) 和 setMax(10) 时，它是否会创建一个针对 30 个结果的查询并以 10 个页面作为响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:28:32.517

`setPage()`和`setMax()`方法用于在搜索过程中进行分页，但它们没有像您描述的那样使用。

`setMax()`方法用于定义从搜索返回的结果总数。默认值为`setMax()`10。例如，如果您设置，`setMax(15)`则每次调用将返回 15 个结果作为搜索结果。

`setPage()`用于检索给定页面的内容。默认值为`setPage()`0 。如果您设置`setPage(1)`，那么它将跳过`page*max`内容并检索其他`max`内容。

例如，如果设置`setPage(1)`然后`setMax(20)`，它将跳过 1*20 的内容并检索 21-41 之间的内容。

# iphone - 使用许多对象对核心数据进行单元测试

> ID：11666806
> 
> 赞同：3
> 
> 时间：2012-07-26T09:54:25.983
> 
> 标签：iphone, ios, unit-testing, core-data

我想对我的 Core Data 应用程序进行单元测试（带有许多记录的压力测试）。一切都是为单元和应用程序测试而设置的，并且工作正常。

我想创建**许多核心数据对象**，然后看看我的图形视图控制器是否仍然有效。我该怎么做？

如果我在我的`MyAppApplicationTest.m`测试类中创建一个测试方法，**测试将在测试后终止应用程序**，我无法与图形视图控制器进行交互。

我是否坚持必须在我的代码中创建许多记录`AppDelegate`并稍后删除该代码？或者有没有办法使用单元测试框架？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:13:00.970

UI 测试有多种选择。但是，在这种情况下，我建议建立一个巨大的数据库，并保留它以进行各种测试。您可以选择通过在命令行、环境中或仅在用户默认值中设置值来使用它。

来示例代码来检查用户默认值，然后是环境设置...

```
static NSString * findOption(NSString *name) {
    NSString *result = nil;
    NSDictionary *options  = [NSUserDefaults standardUserDefaults];
    if ((result = [options objectForKey:name]) != nil) return result;
    options = [[NSProcessInfo processInfo] environment];
    if ((result = [options objectForKey:name]) != nil) return result;
    return nil;
} 
```

注意，如果你只想检查命令行参数，而不是用户默认的所有域，你可以使用这个...

```
NSDictionary *options  = [[NSUserDefaults standardUserDefaults] volatileDomainForName:NSArgumentDomain]; 
```

然后，在创建持久存储的代码中，您可以查看是否设置了该选项...

```
if ((value = findOption(@"MundiLargeData")) && value.boolValue) {
    // Create the persistent store with the pre-generated big database
    // If creation failed, can continue with normal database as failsafe
} 
```

另外，请注意，如果您使用 SenTest 进行测试，它使用命令行参数：

```
NSString *value = findOption(@"SenTest");
if (value) {
    NSLog(@"Using SenTest: %@", value);
} 
```

您可以保留代码，或#ifdef 将其保留。离开那里很安全。

**编辑**

道歉 - 我打算立即添加这个，但被叫走了......

对于那个很抱歉。我从来没有暗示你会发布你的测试代码。你当然不想那样做。我以为您只是在寻找一种在运行应用程序时加载大型数据库的方法，这样您就可以在设备上进行手动 UI 测试，而无需编译不同的版本。

如果你想做这样的事情，那么你有很多选择。您可以将测试编写为要测试的类的类别，然后将该文件从发布版本中排除。如果你给你的测试一个一致的命名方案，比如前缀为“test”或“runtimeTest”，那么你可以有一个这样的方法......

```
- (void)runAllMethodsThatBeginWith:(NSString*)prefix {
    Class aClass = [self class];
    Method *methods;
    unsigned methodCount;
    if ((methods = class_copyMethodList(aClass, &methodCount)))
    {
        // For this example, we only want methods that take no arguments and return void
        char const *desiredEncoding = method_getTypeEncoding(class_getClassMethod([NSObject class], @selector(load)));

        for (unsigned i = 0; i < methodCount; ++i) {
            SEL selector = method_getName(methods[i]);
            NSString *name = NSStringFromSelector(selector);
            char const * typeEncoding = method_getTypeEncoding(methods[i]);
            NSLog(@"%@: %s %s", name, typeEncoding, desiredEncoding);
            NSRange range = [name rangeOfString:prefix];
            if (range.location == 0 && range.length == prefix.length && strcmp(desiredEncoding, typeEncoding) == 0) {
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Warc-performSelector-leaks"
                [self performSelector:selector];
#pragma clang diagnostic pop
            }
        }

        // Don't forget to free the allocated methods array
        free(methods);
    }
} 
```

它会在你的类中找到所有以某个名称开头并返回 void 且不带参数的方法。您可以进行其他参数处理，但随后您将不得不处理与 ARC 相关的问题（因为编译器不确定该做什么——它至少会给您一个警告）。无论如何，这只是为了让您入门...您可以添加类型编码作为参数，并使其更通用...

现在，在您的运行时代码中，您只需调用...

```
[self runAllMethodsThatBeginWith:@"runtimeTest"]; 
```

它将运行所有看起来像...的方法

```
- (void)runtimeTestFoo {
} 
```

如果没有，那么它只会默默地什么都不做。

您可以从发布版本中排除具有这些实现的整个文件，或者仅使用宏 ifdef 排除它们。

现在您的任何测试都没有编译到版本中，但它们用于其他东西，您可以随时调用您的测试。如果您知道特定的测试，那么您当然可以只使用 respondsToSelector: 并有条件地运行该特定的测试方法。

**编辑**

嗯。我以为您正在寻找某种方法来动态决定要做什么。如果这就是你想要的，那么只需提供一个创建数据库的 AppDelegate 的子类......

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    // Create your mondo database
    return [super application:application didFinishLaunchingWithOptions:launchOptions];
} 
```

现在，您有多种选择。在 main.o 中，您告诉它要使用哪个应用程序委托类。您可以使用选项（#ifdef DEBUG）、环境变量或其他方式来告诉它使用哪个应用程序委托类...

```
#import "AppDelegate.h"
#define APP_DELEGATE AppDelegate

#ifdef USE_MY_SPECIAL_RUNTIME_TEST_DELEGATE
#import "RuntimeTestDelegate.h"
#undef APP_DELEGATE
#define APP_DELEGATE RuntimeTestDelegate
#endif

int main(int argc, char *argv[])
{
    @autoreleasepool
    {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([APP_DELEGATE class]));
    }
} 
```

或者，它可以只调用 NSClassFromString(@"MyTestingAppDelegate") 来查看它是否被链接到调用它......

或者，如果您想要完全分离，只需创建另一个目标。在那里有应用程序委托子类，并在 main.m 中为该目标使用它。链接到所有其他文件。

现在您有了一个完全独立的可执行文件，它与“生产”相同，只是它有一个特殊的应用程序委托，可以在启动应用程序之前构建数据库。

测试很难。你必须确切地知道你想要什么和不想要什么。没有涵盖所有情况的正确答案。

还有许多其他选项，例如在资源包中提供配置文件，包括应用程序 plist 中的额外内容，为应用程序提供“大师”模式，您可以在执行期间向其发送特殊命令（比如拥有它打开一个套接字并读取特殊命令并发送回响应——这样你就可以为你想要的任何场景编写脚本，在你的 Mac 上运行它们并远程控制应用程序——也有用于此的工具）。

希望其中一种方法适合您的需求。

# eclipse - 为什么我在 Eclipse 中使用 Cover As 而不是在 Junit 中时收到错误？

> ID：11666809
> 
> 赞同：1
> 
> 时间：2012-07-26T09:54:29.943
> 
> 标签：eclipse, junit, cobertura

我使用 Eclipse 和 eCobertura 我有一个带有控制器（SpringMVC）的小项目。我创建了一个测试（JUnit）。

当我从 JUnit（在 Eclipse IDE 中）运行测试时，一切正常，但是当我运行命令（从菜单）时，我收到一个错误

我的控制器：

```
package ec.europa.eu.nwi.web.controller;

import javax.servlet.http.HttpServletRequest;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

/**
 * @author LEBRUJA
 */
@Controller
public class AvailibilityController {
/**
 * @param request 
 * @return mav
 */
@RequestMapping(value = "/available")
public final ModelAndView available(final HttpServletRequest request) {
    final ModelAndView mav = new ModelAndView("available", "sample", 
            new String("availability on 0.0.1"));
    return mav;
}
} 
```

我的测试：

```
package ec.europa.eu.nwi.web.controller.test;

import static org.mockito.Mockito.mock;
import static org.mockito.Mockito.when;
import junit.framework.Assert;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.mock.web.MockHttpServletRequest;
import org.springframework.mock.web.MockHttpServletResponse;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.web.ModelAndViewAssert;
import org.springframework.validation.BindingResult;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter;
import org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping;

import ec.europa.eu.nwi.web.controller.AvailibilityController;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:spring-servlet.xml"})
public final class AvalibilityControllerTest {

private transient MockHttpServletRequest request;
private transient MockHttpServletResponse response;

@Autowired
private RequestMappingHandlerAdapter handlerAdapter;

@Autowired
private RequestMappingHandlerMapping handlerMapping;

private static final Logger LOGGER = LoggerFactory.getLogger(AvalibilityControllerTest.class);

@Before
public void setUp() throws Exception {              
    request = new MockHttpServletRequest();
    response = new MockHttpServletResponse();
}

@After
public void tearDown() throws Exception {
    LOGGER.debug("TearDown");
}

@Test
public void testAvailable() {
    LOGGER.debug("Start testAvailable1");
    LOGGER.debug("Test only availibility of the apps");
    final AvailibilityController avc = new AvailibilityController();
    final Object mav = avc.available(request);
    Assert.assertEquals(200, response.getStatus());
    Assert.assertTrue(mav instanceof ModelAndView);
    ModelAndViewAssert.assertAndReturnModelAttributeOfType((ModelAndView)mav, "sample", String.class);
    ModelAndViewAssert.assertModelAttributeAvailable((ModelAndView)mav, "sample");
    ModelAndViewAssert.assertModelAttributeValue((ModelAndView)mav, "sample", "availability on 0.0.1");
    ModelAndViewAssert.assertViewName((ModelAndView)mav, "available");        
    final BindingResult result = mock(BindingResult.class);
    when(result.hasErrors()).thenReturn(true);        
    LOGGER.debug("End testAvailable1");
}

@Test
public void testAvailable1() throws Exception {
    LOGGER.debug("Start testAvailable");
    LOGGER.debug("Test only availibility of the apps");
    request.setMethod("GET");
    request.setRequestURI("/available.html"); 

    Object handler = handlerMapping.getHandler(request).getHandler();
    LOGGER.debug("Get the Model and View");
    ModelAndView modelAndView = handlerAdapter.handle(request, response,handler);        
    Assert.assertEquals("availability on 0.0.1", modelAndView.getModel().get("sample"));
    Assert.assertTrue(modelAndView.getModel().containsKey("sample"));
    LOGGER.debug("End testAvailable");
}
} 
```

如果我使用 JUnit (Run As Junit) 运行，一切正常，但是当我运行 Cover As .. JUnit 时，我收到错误消息。

错误 ：

![在此处输入图像描述](../Images/85c7fff83e0c0a25ff5d8753e8077a81.png)

我过滤了这个类（来自 Eclipse Coverage Configuration 中的排除配置）。如果我删除了过滤器，junit 代码标记为红色

![在此处输入图像描述](../Images/fd271a9918a50e593d10fe2942410ae6.png)

我不明白这个错误。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:31:52.487

我有

```
<aop:aspectj-autoproxy proxy-target-class="true" /> 
```

在我的 applicationContext.xml 中，它现在运行良好

非常感谢

# objective-c - 将 NSPredicate 中的子查询与 valueForKeyPath 组合时出错

> ID：11666811
> 
> 赞同：0
> 
> 时间：2012-07-26T09:54:38.413
> 
> 标签：objective-c, ios, core-data, nspredicate

我将时间段存储在 Core Data 中。每个时间段都有一个`DateTime`名为 EndDate 的属性。我正在尝试获取最大结束日期，即在 ( `<`) 指定日期之前。

![财务期](../Images/37044e372d3a39ea87e7125e97b75a4f.png)

这就是我使用子查询和 ValueForKeyPath 编码的方式：

```
NSString *keyPath = [NSString stringWithFormat:@"SUBQUERY(SELF, $x, $x.EndDate < %@).@max.EndDate", date];
IBFinPeriod *periodBeforeCurrentDate = [self.finperiod valueForKeyPath:keyPath]; 
```

但是，在运行此代码时，出现运行时错误：`the entity IBFinPeriod is not key value coding-compliant for the key "SUBQUERY(SELF, $x, $x".'`

我的代码有什么问题？我需要以不同的方式指定子查询吗？

感谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:03:01.970

您可以使用`fetchLimit`设置为 1 和降序排序描述符的 fetch 请求。

如果您坚持`valueForKeyPath:`I 将首先过滤结果`filteredArrayUsingPredicate:`（使用直接谓词选择日期在您之前的记录`date`），然后简单地`@"@max.EndDate"`用作关键路径。

如果您需要整个对象而不仅仅是日期，只需对您的集合进行排序：

```
NSSet *periodsBeforeCurrentDate = [self.finperiod 
    filteredSetUsingPredicate:[NSPredicate predicateWithFormat:
       @"EndDate < %@", date]];
if (periodsBeforeCurrentDate.count) {
    *sort = [NSSortDescriptor sortDescriptorWithKey:@"EndDate" ascending:NO];
   NSArray *sortDescriptors = [NSArray arrayWithObject:sort];
   IBFinPeriod *lastPeriodBeforeCurrentDate =[[periodsBeforeCurrentDate 
       sortedArrayUsingDescriptors:sortDescriptors] objectAtIndex:0];
} 
```

在我看来，只是获取会更容易。

# java - Hibernate 和类继承。如何覆盖集合？

> ID：11666820
> 
> 赞同：3
> 
> 时间：2012-07-26T09:54:57.790
> 
> 标签：java, hibernate, orm

我有以下类结构：

```
@MappedSuperclass
public abstract class MyAbstract implements Cloneable {

    @ElementCollection(fetch = FetchType.EAGER)
    @OrderColumn(name = "index_in_list")
    @NotFound(action = NotFoundAction.IGNORE)
    protected List<ListElement> list = null;
}

@Entity
@Table(name = "entity_1")
@AssociationOverrides({
    @AssociationOverride(name = "list", joinColumns = @JoinColumn(name = "id_entity_1", nullable = false))
})
public class Entity1 extends MyAbstract {
}

@Entity
@Table(name = "entity_2")
@AssociationOverrides({
    @AssociationOverride(name = "list", joinColumns = @JoinColumn(name = "id_entity_2", nullable = false))
})
public class Entity2 extends MyAbstract {
} 
```

如您所见，我有两个具有相同字段（列表）的类。我想将这些类映射到它自己的表。关系是单向的。ListElement 的表有两个字段：id_entity_1 和 id_entity_2。无论如何，我收到以下错误：

```
org.hibernate.AnnotationException: Illegal attempt to define a @JoinColumn with a mappedBy association: list 
```

我决定在抽象类的字段中添加@JoinColumn 注释：

```
@ElementCollection(fetch = FetchType.EAGER)
@JoinColumn
@OrderColumn(name = "index_in_list")
@NotFound(action = NotFoundAction.IGNORE)
protected List<ListElement> list = null; 
```

但我得到了：

```
org.hibernate.MappingException: Duplicate property mapping of _listBackref found in ListElement 
```

我曾经在 XML 文件中进行映射，但最近我决定改用注释。使用 XML 一切正常。XML 结构是：

```
<class name="Entity1" table="entity_1">
    <list name="list" cascade="all-delete-orphan">
        <key column="id_entity_1" not-null="false"/>
        <index column="index_in_list"/>
        <one-to-many class="ListElement" not-found="ignore"/>
    </list>
</class>

<class name="Entity2" table="entity_2">
    <list name="list" cascade="all-delete-orphan">
        <key column="id_entity_2"/>
        <index column="index_in_list"/>
        <one-to-many class="ListElement" not-found="ignore"/>
    </list>
</class> 
```

所以，我的问题是：如何通过注释映射这种继承？

**编辑 1：**列表元素

定义的摘录是：

```
@Entity
@Table(name = "elements")
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "discriminator", discriminatorType = DiscriminatorType.INTEGER)
public abstract class AbstractElement implements Cloneable {
    @Id
    @Column(name = "id_element")
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    protected Long id = null;

    @Column(name = "name", nullable = false, length = 255)
    protected String name = null;

    ...and more simple properties
}

@Entity
@DiscriminatorValue("0")
public class ListElement extends AbstractElement {

    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.EAGER)
    @JoinColumn(name = "id_parent", nullable  = false)
    @MapKeyColumn(name = "key_in_map", nullable = false)
    @OrderColumn(name = "id_xxx")
    private Map<String, Xxx> xxx = null;

    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.EAGER)
    @JoinColumn(name = "id_parent", nullable  = false)
    @MapKeyColumn(name = "key_in_map", nullable = false)
    @OrderColumn(name = "id_yyy")
    private Map<String, Yyy> yyy = null;

    ...and methods
} 
```

**编辑 2：**一对多

我已经用@OneToMany 替换了@ElementCollection：

```
@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.EAGER)
@JoinColumn
@OrderColumn(name = "index_in_list")
protected List<ListElement> list = null; 
```

我得到了：

```
org.hibernate.MappingException: Duplicate property mapping of _listBackref found in ListElement 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:28:23.990

`ListElement`是一个实体。所以你不能在其中使用它`@ElementCollection`，正如它的 javadoc 所示，

> **定义基本**类型或**可嵌入**类的实例集合

（强调我的）

你想要的是`@OneToMany`，因为你有两个实体之间的关联。

在`@NotFound`toMany 关联上也没有任何意义。当您有一个由不引用任何现有行的“外键”映射的 toOne 关联时使用它。

# java - 对象数组（二维数组）JNI

> ID：11666821
> 
> 赞同：2
> 
> 时间：2012-07-26T09:54:59.213
> 
> 标签：java, arrays, java-native-interface

我正在努力创建我的自定义对象类型 ShareStruct 的二维数组：

```
jobjectArray ret ;
jobjectArray ins ;
jobjectArray outs;

jclass myClass = (*env)->FindClass(env,"org/apache/s4/core/ShareStruct");
if (myClass==NULL) fprintf(stderr, "Class ShareStruct not found");

jclass myClassArray = (*env)->FindClass(env, "[Lorg/apache/s4/core/ShareStruct");
if (myClassArray==NULL) fprintf(stderr, "Class ShareStruct[] not found");

ins = (*env)->NewObjectArray(env, in, myClass, NULL);
outs = (*env)->NewObjectArray(env, out, myClass, NULL);
ret = (*env)->NewObjectArray(env, 2, myClassArray, NULL); 
```

第一个类加载工作（ShareStruct 很好），但另一个（尝试加载 ShareStruct[] 类）没有。我已经尝试过使用和不使用 L 但没有运气。有任何想法吗？我是 JNI 的新手。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T07:07:34.863

这`jclass myClassArray = (*env)->FindClass(env, "[Lorg/apache/s4/core/ShareStruct");`是错误的。要创建数组，请执行以下操作

```
 ret = (*env)->NewObjectArray(env,sizeOfArray,myClass,NULL);  
(*env)->SetObjectArrayElement( env, ret,index, sharedStructObj); 
```

这里 sharedStructObj 必须由 newObject 创建。[JNI程序员指南的](http://java.sun.com/docs/books/jni/download/jni.pdf)
第3.3.5节有一个很好的相关示例

这也很好[从本机代码（JNI/NDK）创建、填充和返回二维字符串数组](https://stackoverflow.com/questions/6070679/create-populate-and-return-2d-string-array-from-native-code-jni-ndk)

**根据评论编辑**

```
in = (*env)->NewObjectArray(env,sizeOfArray,myClass,NULL);
out = (*env)->NewObjectArray(env,sizeOfArray,myClass,NULL);
ret= (*env)->NewObjectArray(env,sizeOfArray,myClass,NULL);
(*env)->SetObjectArrayElement( env, ret,0, in); 
(*env)->SetObjectArrayElement( env, ret,1, out); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T14:28:57.580

您必须为外部数组使用对象数组：

`jclass myClassArray = (*env)->FindClass(env, "[Ljava/lang/Object;");`

在类似的情况下，二维字符串数组对我有用。还请识别字符串中的尾随分号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-21T15:17:03.713

我不知道这个问题是否仍然相关，但我认为您只是忘记了数组类规范末尾的分号：

```
jclass myClassArray = (*env)->FindClass(env, "[Lorg/apache/s4/core/ShareStruct;"); 
```

# java - 如何使用 hadoop mapreduce 打印 WordCount 中的键和值

> ID：11666823
> 
> 赞同：3
> 
> 时间：2012-07-26T09:55:02.343
> 
> 标签：java, hadoop, mapreduce

任何人都可以帮助我了解如何打印下面的减速器代码中使用的键和值

我尝试通过 Logger 和 System.out 打印出值，但我们无法在记录器和控制台中看到输出。

```
 public static class IntSumReducer
       extends Reducer<Text,IntWritable,Text,IntWritable> {
    private IntWritable result = new IntWritable();
    //private static final Log LOG = LogFactory.getLog(WordCount.class);
    public void reduce(Text key, Iterable<IntWritable> values,
                       Context context
                       ) throws IOException, InterruptedException {
      int sum = 0;

      for (IntWritable val : values) {
        sum += val.get();
      //LOG.info("val = " + val.get());
      //System.out.println("val = " + val.get());
      }
      //System.out.println("sum = " + sum + " key = " + key);
      //LOG.info("sum = " + sum + " key = " + key);
      result.set(sum);
      context.write(key, result);
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:35:35.037

System.out 和 LOG.info 应该都可以工作 - 但你必须去寻找减少尝试的日志。

您可以在 Job Tracker Web UI (http://jobtracker:50030) 中找到这些 - 在正在运行、已完成、失败或已停用的作业列表中找到您的作业，然后单击超链接的作业 ID。这将带您进入作业运行的视图。从这里您应该能够单击减速器任务（将有一个用于挂起、运行、完成、失败和终止的数字 - 最好单击其中一个数字以完成。

现在您将获得已完成的 reduce 任务列表 - 单击特定任务应列出该任务的尝试，表格右侧将是日志的链接（前 4k，后 4，全部），其中您应该能够找到您的输出消息（假设您删除了上面代码前面的注释并在允许执行 System.out 或 LOG.info 的情况下运行您的作业）

# ios - OpenGL ES 1.1 - alpha 蒙版

> ID：11666825
> 
> 赞同：0
> 
> 时间：2012-07-26T09:55:08.070
> 
> 标签：ios, opengl-es, openframeworks

我正在使用 OpenFrameworks 和 OpenGL ES 1.1 开发 iPad 应用程序。我需要显示带有 alpha 通道的视频。为了模拟它，我有一个 RGB 视频（没有任何 alpha 通道）和另一个仅包含 alpha 通道的视频（在每个 RGB 通道上，因此白色部分对应于可见部分，黑色对应于不可见部分）。每个视频都是一个 OpenGL 纹理。

在 OpenGL ES 1.1 中没有着色器，所以我找到了这个解决方案（这里：[OpenGL - mask with multiple textures](https://stackoverflow.com/questions/5097145/opengl-mask-with-multiple-textures)）：

```
glEnable(GL_BLEND);
// Use a simple blendfunc for drawing the background
glBlendFunc(GL_ONE, GL_ZERO);
// Draw entire background without masking
drawQuad(backgroundTexture);
// Next, we want a blendfunc that doesn't change the color of any pixels,
// but rather replaces the framebuffer alpha values with values based
// on the whiteness of the mask. In other words, if a pixel is white in the mask,
// then the corresponding framebuffer pixel's alpha will be set to 1.
glBlendFuncSeparate(GL_ZERO, GL_ONE, GL_SRC_COLOR, GL_ZERO);
// Now "draw" the mask (again, this doesn't produce a visible result, it just
// changes the alpha values in the framebuffer)
drawQuad(maskTexture);
// Finally, we want a blendfunc that makes the foreground visible only in
// areas with high alpha.
glBlendFunc(GL_DST_ALPHA, GL_ONE_MINUS_DST_ALPHA);
drawQuad(foregroundTexture); 
```

这正是我想要做的，但 glBlendFuncSeparate() 在 OpenGL ES 1.1（或 iOS）中不存在。我正在尝试用 glColorMask 来做，我发现了这个：[Can't get masking to normal work with OpenGL](https://stackoverflow.com/questions/10400651/cant-get-masking-to-work-correctly-with-opengl)

但它也不好用，我猜是因为他的蒙版纹理文件包含一个“真正的”阿尔法通道，而不是我的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:09:18.837

我强烈建议您改为计算单个 RGBA 纹理。

这将更容易，更快（因为您每帧发送 2 个 RGBA 纹理 - 是的，您的 RGB 纹理实际上是由硬件以 RGBA 编码的，而 A 被忽略）

glColorMask 不会帮助你，因为它只是说“完全打开或关闭这个通道”。

如果你有 glBlendFuncSeparate 可以帮助你，但同样，它不是一个好的解决方案：你通过发送两倍于所需的数据来破坏你的（非常有限的）iphone带宽。

更新 ：

由于您使用的是 OpenFrameworks，并根据其源代码（[https://github.com/openframeworks/openFrameworks/blob/master/libs/openFrameworks/gl/ofTexture.cpp](https://github.com/openframeworks/openFrameworks/blob/master/libs/openFrameworks/gl/ofTexture.cpp)和[https://github.com/openframeworks/ openFrameworks/blob/master/libs/openFrameworks/video/ofVideoPlayer.cpp](https://github.com/openframeworks/openFrameworks/blob/master/libs/openFrameworks/video/ofVideoPlayer.cpp)）：

*   使用 ofVideoPlayer::setUseTexture(false) 使 ofVideoPlayer::update 不会将数据上传到显存；
*   使用 ofVideoPlayer::getPixels 获取视频数据
*   在 RGBA 纹理中交错结果（您可以使用 GL_RGBA ofTexture 和 ofTexture::loadData）
*   使用 ofTexture::Draw 绘制（这就是 ofVideoPlayer 所做的）

# android - 如何读取 dhcp 服务器的数据？

> ID：11666832
> 
> 赞同：-1
> 
> 时间：2012-07-26T09:55:28.507
> 
> 标签：android, linux, networking, wifi, dhcp

我想知道连接到 dhcp 服务器的所有设备。我有设备的 IP，它可能是安卓手机或打印机，但我认为 dhcp 拥有这些设备的信息。

我在 dhcp 协议栈中得到了类似“**供应商信息”的信息。**

我的疑问是我必须至少识别出网络上的安卓手机，这是否可能。或者如何识别安卓手机是网络之一。我也有安卓的 IP，但我没有得到任何信息从任何方面。

我得到了类似**nmap**的东西，但是这个工具没有给出手机的具体细节。nmap提供的信息**令人**困惑我无法确定它是手机还是linux系统，因为这两个系统都有linux作为操作系统.

然后我得到了这个 dhcp -vendor 信息：但我不知道如何读取这些数据..

请提出任何建议.....我的项目需要。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:01:38.520

The problem you will have is that modern day switches will stop you sniffing traffic destined for specific MAC addresses so if its hard-wired then you are going to run into trouble. If on the other-hand its a unsecured WiFi connection, or a network with hubs (rare now!) rather than switches then you may have a chance.

You'd need to switch the ethernet controller into promiscuous mode and listen for the DHCP REQUEST and DHCP OFFER commands, inspect the contents and see whats going on.

Another method would be to listen for ARP and RARP requests on the network and use a hardware lookup table for the MAC id to determine who makes the chip-sets, its not going to give you awesome accuracy since a lot of chips are re-used on different devices but it may give you a little bit more info.

In terms of the DHCPd server, unless you have access to that physical machine I'm afraid your probably out of luck, DHCP is a designed as a offering protocol, not a querying protocol.

# php - PHP 启动程序 - PHPEd

> ID：11666834
> 
> 赞同：0
> 
> 时间：2012-07-26T09:55:32.927
> 
> 标签：php, command-line, protocols, phped

我正在为（本地）开发人员开发一个门户，并希望通过在硬盘上传递他们的名称，直接从 PHPEd 中的浏览器打开 PHP 文件。

我找到了两种解决方案，但无法使它们起作用：

*   解决方案1：创建一个新协议（phped_protocol）并使用“ `phped_protocol://[file]`”作为URI
*   解决方案 2：执行打开 PHPEd 的批处理脚本

有人可以帮助我解决这些解决方案之一吗？我想知道如何通过 PHP/浏览器使用 PHPEd 打开 PHP 文件。

== 编辑 ==

**解决方案 1**

测试注册

```
REGEDIT4

[HKEY_CLASSES_ROOT\phped_protocol] 
@="URL:phpedProtocol" 
"URL Protocol"="" 

[HKEY_CLASSES_ROOT\phped_protocol\shell] 

[HKEY_CLASSES_ROOT\phped_protocol\shell\open] 

[HKEY_CLASSES_ROOT\phped_protocol\shell\open\command] 
@="\"C:\\phped_protocol.bat\" \"%1\"" 
```

测试.html

```
<a href="phped_protocol://[file]">Open file</a> 
```

**解决方案 2**

phped_protocol.bat

```
START "test" "C:\Program Files (x86)\NuSphere\PhpED\7.0\phped.exe"
EXIT 
```

测试.php

```
system('CMD /C C:\phped_protocol.bat'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:35:23.123

我们当前的解决方案是一个监听器和一个数据库。PHP 在数据库中插入一条记录。当侦听器找到它时，它将打开该文件。

# replication - Lotus Notes：代理和用户同时在文档上运行引起的复制冲突

> ID：11666837
> 
> 赞同：0
> 
> 时间：2012-07-26T09:55:42.907
> 
> 标签：replication, lotus-notes, lotus-domino, lotus

在其中一个 lotus notes 数据库中，由于计划代理和同时处理文档的任何用户，导致复制/保存冲突过于频繁。

有什么办法可以避免这种情况。

谢谢，惠普

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T16:51:38.660

除了合并冲突之外的几个选项：

**更改计划**避免这种情况的最佳方法是让您的计划代理在用户不太可能访问系统的时间运行。如果客户端文档上的 LastContact 字段在检查所有联系人文档时由代理每小时更新一次，那么代理可能应该在夜间运行。

**在用户操作时运行代理**也可能是代理不应该按计划运行，但应该在用户执行某些操作时运行。例如，当用户保存支持的联系人文档时，运行代理来更新客户端文档。

**将表单分解成更小**的部分 要考虑的第三件事是重新设计表单，以便并非每条数据都位于主表单上。例如，如果对最近与客户联系的评论当前保存在客户文档的某个字段中，您可以更改设计以使用单独的 ClientMeeting 表单，从该表单中，会议评论显示在嵌入视图或计算文本中（或使用 Xpages 设计）。

尽管我是一名开发人员，但我认为代表/保存更多是设计决策的结果，而不是其他任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T22:25:57.553

如果这是一个关键任务应用程序，请考虑创建一个带有锁定文档的数据库。这意味着，每次用户打开文档时，都会创建一个单独的锁定文档。

然后对代理进行编码以查看代理想要修改的每个文档是否存在锁定文档。如果是，请跳过该文档。

文档关闭应该删除文档锁。

lock-doc 应该在文档打开时创建，而不仅仅是读取。这样，当用户以阅读模式打开文档时，代理也将无法修改。这是为了禁止用户在之后更改为编辑模式并进行更改。

如果代理的修改时间很长，它也应该创建锁定文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T10:40:46.367

您可以在相关表单上使用“冲突处理”选项并选择“合并冲突”或“合并/无冲突”，以便让 Notes 处理编辑冲突的合并。

从帮助数据库：

```
At the "Conflict Handling" section of the Form Info tab, choose one of the following options for the form:
Create Conflicts -- Creates conflicts so that a replication conflict appears as a response document to the main document. The main document is selected based on the time and date of the changes and an internal document sequence number.
Merge Conflicts -- If a replication conflict occurs, saves the edits to each field in a single document. However, if two users edit the same field in the same document, Notes saves one document as a main document and the other document as a response document marked as a replication conflict. The main document is selected based on the criteria listed in the bullet above.
Merge/No Conflicts -- If replication occurs, saves the edits to each field in a single document.  If two users edit the same field in the same document, Notes selects the field from the main document, based on time and date, and an internal document sequence number. No conflict document is generated, instead conflicting documents are merged into a single document at the field level.
Do Not Create Conflicts -- No merge occurs. IBM® Lotus® Domino(TM) simply chooses one document over another. The other document is lost. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T15:43:06.003

恕我直言，解决用户和代理之间冲突的最佳方法是确保他们在不同的文档上进行操作。即，有两个文档具有共同的密钥。如果可以方便地在视图中以这种方式显示他们，他们可以是父母和孩子，但他们不一定是。出于讨论的目的，只需将它们称为 DocA 和 DocB。

DocA 由用户阅读和更新。当用户查看 DocA 时，计算域公式可以通过 DbLookup 或 GetDocField 从 DocB 中提取信息。用户从不更新 DocB。

另一方面，DocB 由代理读取和更新，但代理只读取 DocA。他们从不更新它们。

如果您以任何其他方式设计应用程序，那么您要么必须使用锁定 - 这可能会导致无法在需要时更新某些内容，或者接受冲突可能偶尔发生并且需要解决的事实.

请注意，即使使用此策略，如果您有多个数据库副本，您仍然可能会发生冲突。根据@Per Henrik Lausten 的回答，您可以使用表单属性的“冲突处理”部分来帮助最小化复制冲突，但是由于您正在谈论现有的，请参阅我对他的回答的评论，以获取有关您会做什么的更多信息必须做才能使用此功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T11:08:00.900

在以后的 Notes 版本中，有文档锁定的概念，正确使用可以防止冲突（但也会增加复杂性）。

通常可以通过计划在用户不在系统上的深夜运行代理来避免大多数冲突。如果这不是一个选项，那么锁定可能是最好的解决方案。如果冲突不是太多，您可能会受益于添加过滤视图以仅显示冲突，这将使查找和解决它们更容易。

# jquery - jQuery停止子元素在父元素悬停时动画

> ID：11666839
> 
> 赞同：0
> 
> 时间：2012-07-26T09:55:45.540
> 
> 标签：jquery

我正在尝试为#jam 列表中的 div 设置动画。

li 有一个背景图像，当悬停时会显示框类。

我遇到的问题是，当我将框类 div 悬停时，它们也会触发悬停。

我怎样才能只让 li 背景图像悬停而不是其中的元素？

```
/*Services Pyrimid*/
$('ul#jam li').hover(function() {
    $(this).find('div:first').animate({opacity: 1.0, left:190}, 500);
},function(){
    $(this).find('div:first').animate({opacity: 0, left:-400}, 500);        
});

<ul id="jam">
 <li id="spot-a">
  <div class="box">
   text
  </div>
 </li>
 <li id="spot-b">
  <div class="box">
   text
  </div>
 </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:03:00.187

尝试添加：

```
$(".box").on('mouseenter mouseleave', function(e) {
    e.stopPropagation();
}); 
```

或做：

```
$('ul#jam li').not('.box').hover(function() {... 
```

# scala - 没有 scala UI 模板的 Play 框架

> ID：11666842
> 
> 赞同：0
> 
> 时间：2012-07-26T09:55:54.103
> 
> 标签：scala, playframework, playframework-2.0

我来自 Java EE 世界。Scala 和 Play 的新手。查看一些示例应用程序。我在 html 文件中看到了 scala 代码。我能够理解框架，但无法获取 scala.html 文件。我是否需要学习 scala 才能使用 Play 框架。任何解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:02:08.813

You can use [Java version of Play!](https://github.com/playframework/Play20/wiki/JavaHome) without any scala skills. If you don't want to use scala.html templates you can get some module providing Java templates for Play20\. Modules list can be found [here](https://github.com/playframework/Play20/wiki/Modules).

Some examples with samples:

*   [Groovy Template Engine for Play Framework 2.0](https://github.com/mbknor/gt-engine-play2)
*   [A full feaured Java-based template engine for Play2](https://github.com/branaway/japid42)

# xcode - 使用适用于 iOS 6 的 xcode beta 3 进行开发，我可以将我的应用程序发送到 App Store 吗？

> ID：11666845
> 
> 赞同：1
> 
> 时间：2012-07-26T09:56:00.893
> 
> 标签：xcode, appstore-approval, beta, ios6

现在我正在开发一个带有 xcode beta 3 的 iphone 应用程序。当我完成应用程序后，我可以将它发送给苹果吗？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:04:55.947

当您说“xcode beta 3”时，您的意思是“Xcode 4.5 DP3”，对吧？

答案是否定的，您不能提交使用 Xcode 预览版开发的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T10:52:30.003

不，但是当 XCode 4.5 在 mac 应用商店发布时，是否可以将其发送给苹果。您现在可以在测试版中开发它并稍后发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T23:49:21.530

现在 Mountain Lion 已发布，您可以使用 Xcode 4.4 提交到应用商店。在 iOS 6 正式发布之前，您将无法使用 Xcode 4.5。

这意味着如果您已将手机更新到 iOS 6 测试版，您将无法使用 Xcode 4.4 对其进行调试（因为它没有 iOS 6 SDK）。但是您仍然可以使用 Xcode 4.4 构建，如果需要运行它，可以使用 iTunes 或 Xcode 4.5 将 4.4 构建的 IPA 加载到您的手机上。（您仍然只能在您的 iOS 6 beta 设备上从 Xcode 4.5 构建和部署时对其进行调试）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T18:07:40.473

现在可以发送了，使用通用版

# security - 我可以从桌面应用程序访问 Chrome 网络历史记录吗？

> ID：11666847
> 
> 赞同：1
> 
> 时间：2012-07-26T09:56:01.707
> 
> 标签：security, google-chrome, permissions, google-chrome-extension, desktop-application

独立桌面应用程序是否可以访问 Chrome/Firefox/IE 中的浏览历史记录？

或者那是不可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:53:00.107

在尝试搜索从“历史记录”选项卡中找不到的内容时，我曾多次浏览 Chrome 历史记录。这是一个教程：[Google Chrome 取证](http://computer-forensics.sans.org/blog/2010/01/21/google-chrome-forensics/)。一些注意事项：

*   SQLite3 数据库在 Chrome 运行时被“锁定”，因此您可能必须关闭 Chrome 或将数据库复制到单独的文件中，然后才能读取它们。
*   在历史数据库中，`visit_time`即使您在 Mac 或 Linux 上，自 1601-01-01（Windows 文件时间的 1/10）以来也是 μs，因此要将其转换为 Unix 时间（自 1970-01-01 以来的 s），您有缩放和减去`11644473600 = new Date(1970, 0, 1)/1000 - new Date(1601, 0, 1)/1000`。
*   例如，查找我访问的最后 10 个 URL：`select urls.url, datetime(visit_time/1000000 - 11644473600, 'unixepoch', 'localtime') from visits left join urls on visits.url = urls.id order by visit_time desc limit 10;`
*   这`visits.transition&255`是在[page_transition_types.h](http://src.chromium.org/viewvc/chrome/trunk/src/content/public/common/page_transition_types.h?view=markup)中找到的枚举。[请参阅历史扩展文档中](http://code.google.com/chrome/extensions/history.html)的描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:47:50.183

你确实可以。

Chrome 和 Firefox 将浏览器历史记录存储在 sql-lite 文件中。

chrome历史文件的位置是：

```
Linux: /home/$USER/.config/google-chrome/
Linux: /home/$USER/.config/chromium/
Windows Vista (and Win 7): C:\Users\[USERNAME]\AppData\Local\Google\Chrome\
Windows XP: C:\Documents and Settings\[USERNAME]\Local Settings\Application Data\Google\Chrome\ 
```

如果您正在开发有问题的应用程序。我过去使用过Java。您必须阅读 SQLlite 数据库的结构，但您可以使用 SQL 查询访问表（实际上与 groovy 一起使用非常好）。它以完全相同的方式适用于 Firefox。

我对IE历史没有经验。

# c#-4.0 - 在运行时创建我的 .mdf DB 文件的备份

> ID：11666850
> 
> 赞同：2
> 
> 时间：2012-07-26T09:56:07.620
> 
> 标签：c#-4.0

当我尝试使用此代码创建数据库备份时，会发生此错误吗？

```
 Microsoft.Win32.SaveFileDialog dlg = new Microsoft.Win32.SaveFileDialog();
        dlg.ShowDialog();
        File.Copy(@"C:\Program Files\Microsoft SQLServer\MSSQL10.MSSQLSERVER\MSSQL\DATA\MyDB.mdf", dlg.FileName ); 
```

该进程无法访问文件“C:\Program Files\Microsoft SQL Server\MSSQL10.MSSQLSERVER\MSSQL\DATA\MyDB.mdf”，因为它正被另一个进程使用。

# windows-phone-7 - 如何在 Bing 地图控件中添加信息框？

> ID：11666851
> 
> 赞同：0
> 
> 时间：2012-07-26T09:56:12.203
> 
> 标签：windows-phone-7

我的表单上有一个 Bing 地图控件，这个 bing 地图包含很多图钉。

当我当时点击图钉时，我想显示一个信息框。

那么如何添加这个信息框呢？

请看下面的图片。我必须重新查询这种类型的信息框。![在此处输入图像描述](../Images/d60caeed3e771e8e7407b379fca3efbc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:01:20.873

这是一个示例代码。您所要做的就是将 Tap 事件附加到图钉

```
public partial class MainPage : PhoneApplicationPage
{
    public MainPage()
    {
        InitializeComponent();
        InitPage();
    }

    private void InitPage()
    {
        testMap.Center = new GeoCoordinate(42,42);
        testMap.ZoomLevel = 10;

        MapLayer pushPinLayer = new MapLayer();
        testMap.Children.Add(pushPinLayer);

        Pushpin pushpin = new Pushpin();

        pushpin.Tap += new EventHandler<GestureEventArgs>(pushpin_Tap);

        pushpin.Content = "SAMPLE";
        pushPinLayer.AddChild(pushpin, new GeoCoordinate(42, 42));

    }

    void pushpin_Tap(object sender, GestureEventArgs e)
    {
        MessageBox.Show("You Clicked here");
    }
} 
```

![在此处输入图像描述](../Images/2e8a6b3c3537bdfc4d721907260b42b4.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T06:14:10.820

是的，我明白你在说什么，你只需将图像按钮放在所有地理坐标上，当按下任何按钮时，你替换图钉代替图像按钮，并在每个点动态更改图钉的内容

# android - Android：为什么 PhoneCallListener 在活动完成后仍然存在？

> ID：11666853
> 
> 赞同：3
> 
> 时间：2012-07-26T09:56:23.400
> 
> 标签：android, phone-call, telephonymanager, phone-state-listener

我在我的活动中使用电话监听器，但在完成我的活动后，用户拨打电话后，我的电话监听器没有死，并再次启动活动！请帮我。

```
phoneListener = new PhoneCallListener();
telephonyManager = (TelephonyManager) 
            TransferActivity.this.getSystemService(Context.TELEPHONY_SERVICE);
telephonyManager.listen(phoneListener,  PhoneStateListener.LISTEN_CALL_STATE); 
```

PhoneCallListener 类：

```
private class PhoneCallListener extends PhoneStateListener {
    boolean isPhoneCalling = false;
    @Override
    public void onCallStateChanged(int state, String incomingNumber) {

        if (TelephonyManager.CALL_STATE_RINGING == state) {
        }
        if (TelephonyManager.CALL_STATE_OFFHOOK == state) {
            isPhoneCalling = true;
        }
        if (TelephonyManager.CALL_STATE_IDLE == state) {
            if (isPhoneCalling) {
                isPhoneCalling = false;
                    Intent intent = getIntent();
                    startActivity(intent);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T10:24:01.097

您是否尝试将侦听器设置为 null 为，

```
telephonyManager.listen(null,  PhoneStateListener.LISTEN_NONE); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-26T10:50:34.940

文档说：

> 要取消注册侦听器，请传递侦听器对象并将事件参数设置为 PhoneStateListener#LISTEN_NONE (0)

这是[文档](http://developer.android.com/reference/android/telephony/TelephonyManager.html#listen%28android.telephony.PhoneStateListener,%20int%29)的链接。

# glassfish - 用于在 sql server 上保存低优先级信息的 JMS Queue 的配置

> ID：11666854
> 
> 赞同：0
> 
> 时间：2012-07-26T09:56:23.517
> 
> 标签：glassfish, jms, glassfish-3, message-queue

我想在 Glassfish v3 服务器上设置一个 JMS 队列，以便在 sql 服务器上保存一些协议信息。

我的第一次尝试在 sql server 上出现了很多死锁。

我的第一个问题是：队列中的消息是依次处理还是并行处理。它如何设置它来处理彼此之后的消息。时间不起作用。我只想给 sql server 带来最小的负载。

第二个：我在哪里可以看到有多少消息在队列中等待处理？我查看了 glassfish 的监控以及

`http://server:adminport/__asadmin/get?monitor=true&pattern=server.applications.ear.test.war.TestMessageDrivenBean.*`

但我看不到“待处理”值或类似的值。

非常感谢，

哈桑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:01:06.513

您绑定到队列的侦听器将在消息到达时对其进行处理。它响应 onMessage 事件。你不必设置任何东西。

您确实必须担心如果由于侦听器无法跟上而导致队列备份会发生什么。

您还应该配置一个错误队列，将无法处理的消息放入其中。

您是否考虑过使队列和数据库操作具有事务性？这样，如果数据库 INSERT 失败，消息就会被放回队列中。您需要一个 XA JDBC 驱动程序和一个事务管理器来完成它。

# c# - 按日期和时间过滤 C#

> ID：11666857
> 
> 赞同：0
> 
> 时间：2012-07-26T09:56:43.890
> 
> 标签：c#, asp.net

我在 C# ASP.Net 中创建报告，在报告中我可以过滤在两个不同日期（例如开始日期：7 月 15 日和结束日期：7 月 17 日）之间创建的数据，但是在过滤特定日期创建的数据时（例如开始日期：7 月 15 日和结束日期：7 月 15 日）查询没有检索到任何内容...

```
//Code from OutletDistributor.aspx.cs
ReportManager master = ObjectFactory.GetInstance<ReportManager>();
ReportResponse responce = new ReportResponse();
if (ddDistributor == Guid.Empty)
  responce = master.GetAllOutletDistributor(sDate, EDate);
else
  responce = master.GetOutletDistributor(sDate, EDate, ddDistributor);
ReportViewer1.Reset();
ReportViewer1.LocalReport.DataSources.Clear();
ReportViewer1.ProcessingMode = ProcessingMode.Local;
var stream = Assembly.GetAssembly(typeof(SampleReport)).GetManifestResourceStream(responce.ReportResource);
ReportDataSource reportDataSource = new ReportDataSource(responce.ReportDataSet, responce.ReportDataSource);
stream = RdlcReportHelper.TranslateReport(stream);
ReportViewer1.LocalReport.DataSources.Add(reportDataSource);
ReportViewer1.LocalReport.LoadReportDefinition(stream);
ReportViewer1.LocalReport.DisplayName = ResourceHelper.GetText(null, "hq.rpt.outletdist.heading");
ReportViewer1.LocalReport.Refresh();

//Code from ReportManager.cs
//Filter All Outlet Distributor
public ReportResponse GetAllOutletDistributor(DateTime StartDate, DateTime EndDate) {
  ReportResponse report = new ReportResponse();
  report.ReportResource = "Distributr.HQ.Lib.Reports.RcdlFiles.OutletDistributor.rdlc";
  List<OutletReportItem> Report = _outletReport.GetAllOutlets()
    .Where(p => p.CreationDate >= StartDate && p.CreationDate <= EndDate).ToList();
  Report.ForEach(n => report.ReportDataSource.Add(n));
  report.ReportDataSet = "dsOutletDistributor";
  return report;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:58:30.937

我假设`StartDate`两者`EndDate`都包含时间组件。`Date`使用属性删除它：

```
StartDate = StartDate.Date;
EndDate = EndDate.Date;

// your query goes here... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:02:43.997

In this condition where your date is same use "=" (instead of difference) in your query

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T10:09:19.553

实际上，您的代码`List<OutletReportItem> Report = _outletReport.GetAllOutlets().Where(p => p.CreationDate >= StartDate && p.CreationDate <= EndDate).ToList()`在初始化对象 DateTime 时，日期的默认值是小时、分钟和秒，它们是“00”。所以我认为你可以使用 DateTime.Compare()

# string - perl 字符串转义

> ID：11666858
> 
> 赞同：-1
> 
> 时间：2012-07-26T09:56:46.213
> 
> 标签：string, perl, escaping

我希望在 Perl 字符串中转义特殊字符，例如引号和空格。

我想避免使用正则表达式和安装额外的模块。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T09:59:14.383

使用[`quotemeta`](http://p3rl.org/quotemeta)可能会对您有所帮助。

```
my $escaped = quotemeta $string_with_quotes_and_spaces; 
```

它将以反斜杠转义任何不是字母数字或下划线的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:31:32.643

如果您收到字符串，那么 Borodin 的 quotemeta 解决方案将起作用。

如果是声明字符串，可以使用qq开关声明自己的字符串分隔符。例如使用 # 而不是 ' 或 "：

```
my $string = qq#Didn't know I could do this!"how" amazing#; 
```

这将转义通常的字符串分隔符。

# asp.net - AppFabric DataCacheSessionStoreProvider：一些反馈？

> ID：11666861
> 
> 赞同：0
> 
> 时间：2012-07-26T09:56:56.743
> 
> 标签：asp.net, session-state, appfabric

有没有人对 AppFabric 中包含的 DataCacheSessionStoreProvider 有一些反馈？（性能、最佳实践、设计指南……）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:30:49.720

如果您想使用 AppFabric 作为您的缓存系统，这是一个很好的开箱即用解决方案。在我们的性能测试中，AppFabric 会话缓存性能约为每秒 2000 个请求（AppFabric 1.0？只有一台没有二级缓存的服务器）。看来这个 WCF 服务的性能限制了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T11:09:16.877

虽然我从未将它与 AppFabric 一起使用，但我使用过 NCache 会话 Store Provider.NCache 可让您将常规 ASP.NET 会话转换为分布式会话，而无需更改任何代码。您只需几个简单的步骤，您现有的 ASP.NET 应用程序就可以立即从强大的分布式会话中受益。请检查[这个链接](http://www.alachisoft.com/resources/ncache-performance-benchmarks.html)，它可能会帮助你。

# sql-server-2008 - SQL Server：一列上的多个自动增量

> ID：11666862
> 
> 赞同：0
> 
> 时间：2012-07-26T09:56:59.557
> 
> 标签：sql-server-2008, auto-increment

有一个表如下：

```
Id   ||  ParentId ||  Other Columns ... 
=======================================
1    ||  1        || ...
2    ||  1        || ...
3    ||  1        || ...
1    ||  2        || ...
2    ||  2        || ...
3    ||  2        || ...
1    ||  3        || ...
2    ||  3        || ... 
```

列`[Id]`必须具有基于`[ParentId]`（自己的编号）的自动增量值。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:23:24.997

试试这个

```
select ROW_NUMBER() over(partition by parentId order by <any other column>) ID,
ParentId,<other columns>  
from  yourtable 
```

编辑1：

如果您希望在 where 子句中使用 id

```
with cte as(                                
select ROW_NUMBER() over(partition by parentId order by <any other column>) ID,
ParentId,<other columns>  
from  yourtable)
select * from cte where ID=(some value) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:10:36.723

演示

[http://sqlfiddle.com/#!3/32645/6](http://sqlfiddle.com/#!3/32645/6)

更新了[http://sqlfiddle.com/#!3/32645/13](http://sqlfiddle.com/#!3/32645/13)

```
create table dummy(parentId int)

insert into dummy values(1)
insert into dummy values(1)
insert into dummy values(2)
insert into dummy values(1)
insert into dummy values(4)
insert into dummy values(4)
insert into dummy values(5)
insert into dummy values(1)

select row_number() over (order by parentID) as ID,parentID from dummy 
```

# android - Android 模拟器无法启动

> ID：11666865
> 
> 赞同：1
> 
> 时间：2012-07-26T09:57:10.410
> 
> 标签：android, eclipse

当试图运行一个 android 模拟器（无论是从 eclipse 还是 cmd 行）它只是启动一个标题为 0 的空黑框：（显然替换为 avd 的名称！）。它从不启动 - 甚至没有进入启动动画。

Logcat 显示绝对没有输出，设备显示为 emulator:5554 - 离线

无论我从哪个 avd 开始，都会发生这种情况——而且它们以前都工作过。

我在linux上运行所有这些。

编辑：有趣的是，它现在也无法识别插入启用调试的实际手机......在我修复这个问题之前，Android dev 现在在这台机器上实际上是不可能的......

编辑#2：如果我创建一个新的模拟器和/或编辑一个现有的模拟器（即使我实际上没有改变任何东西），它可以启动。这显然使我能够继续前进，但显然 adb 仍然存在问题（实际设备仍然无法连接），我仍然需要修复它。

编辑＃3：从最后一次编辑开始 - 它似乎短暂工作，但不再......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:06:18.893

模拟器是一个非常慢的垃圾。十分钟或更长时间的启动时间并非闻所未闻。您最好通过 USB 连接实际的 Android 设备。如果您坚持使用模拟器，请在调试会话之间保持其运行以保持其状态（和您的理智）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T02:55:05.493

在 Eclipse 中遇到了这个问题——在我的 XML 文件中出现错误——结果我的 R 变量无法解析。在创建新的 Android Application 项目时，还会创建另一个 appcompat_v7 项目。这两个项目是相关联的。当我保持我的主项目打开，但关闭了我的 appcompat_v7 项目时，问题出现了。当两者同时打开时，问题就消失了。

很简单，但它就在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T10:00:08.210

```
 Do adb reset in eclipse ddms devices view 
```

然后去 adb 试试这个

```
 adb shell stop
   adb shell start 
```

# xpages - DbLookup 关键字

> ID：11666872
> 
> 赞同：1
> 
> 时间：2012-07-26T09:57:30.050
> 
> 标签：xpages

@DbLookup 语句中的关键字参数是否有可用关键字列表？

这些关键字是否也有可用的解释？

谢谢马里奥

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T10:34:08.663

在 Lotus Domino Designer 帮助数据库中查找 @DbLookup 的帮助主题，该数据库是 Notes 客户端安装的一部分（也是 Domino 服务器安装的一部分）。以下内容来自有关关键字参数的文档：

```
Keyword. Optional. Keywords can be concatenated.
[FAILSILENT] returns "" (null string) instead of an error if the key cannot be found.
[PARTIALMATCH] returns a match if the key matches the beginning characters of the column value.
[RETURNDOCUMENTUNIQUEID] returns the UNID of the document instead of a field or column value. 
```

您还可以在信息中心在线找到文档：http: [//publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_DBLOOKUP_NOTES_DATABASES.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_DBLOOKUP_NOTES_DATABASES.html)

# image - OpenCV 无法加载图像

> ID：11666873
> 
> 赞同：2
> 
> 时间：2012-07-26T09:57:30.333
> 
> 标签：image, opencv, angstrom-linux

当我在做一个项目时，我注意到我无法加载图像。这是我用来检查的简单代码：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/objdetect/objdetect.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <iostream>

using namespace cv;
using namespace std; 

int main( int argc, char** argv )
{ 
    if( argc != 2) 
    {
     cout <<" Usage: display_image ImageToLoadAndDisplay" << endl;
     return -1;
    } 

    Mat image;
    image = imread(argv[1], CV_LOAD_IMAGE_COLOR);   // Read the file

    if(! image.data )                              // Check for invalid input
    {
        cout <<  "Could not open or find the image" << std::endl ;
        return -1;
    }

    Mat gray_image;
    cv::cvtColor(image, gray_image, CV_RGB2GRAY);

    imwrite("Gray_Image.jpg",gray_image);

    return 0;
} 
```

这是我执行它时的输出：

```
root@beaglebone:~# ./tryit lena.jpg 
Could not open or find the image 
```

我尝试直接使用图像的地址（“/home/root/lena.jpg”）而不是 argv[1] 但没有任何改变。

可能是什么问题？

ps：我正在交叉编译这个 OpenCV 程序，然后在我的 BeagleBone 上运行它，该 BeagleBone 上安装了 Angstrom Linux。这个问题能和它有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:16:28.183

我通过删除我的埃图像上现有的 OpenCV 库并将它们替换为工作库来解决我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T01:57:59.437

尝试使用 png 扩展名保存图像，然后打开它。出于某种原因，具有 png 扩展名的文件比 jpg/gif 等其他扩展名更好。

# php - 联合查询以获取 SUM 值

> ID：11666880
> 
> 赞同：0
> 
> 时间：2012-07-26T09:58:03.170
> 
> 标签：php, mysql

总共 12 个 db 表（一些表重复）。我必须从特定日期的每个表中获取 SUM（值）。我使用了 UNION 查询，但它返回查询中使用的第一个表的值。剩下的桌子什么也没返回。任何人都可以帮助我。这是我的代码。

```
$sel = mysql_query("
SELECT 
    SUM(collection_amount) AS cash_total 
FROM 
    collection_entry 
WHERE 
    date='$entered_date' 
    AND collection_type='DC' 
UNION 
SELECT 
    SUM(amt) AS cheque_redeposit_total 
FROM 
    cheque_redeposit 
WHERE 
    redeposited_on1 
    OR redeposited_on2='$entered_date' 
UNION 
SELECT 
    SUM(collection_amount) AS not_cleared_total 
FROM 
    collection_entry 
WHERE 
    cheque_status='not cleared' 
    AND date='$entered_date' 
UNION 
SELECT 
    SUM(collection_amt) AS route_collection_total 
FROM 
    route_collection 
WHERE 
    entered_date='$entered_date' 
UNION 
SELECT 
    SUM(amt) AS return_total 
FROM 
    cheque_return 
WHERE 
    return_date1 OR return_date2 OR return_date3='$entered_date' 
UNION 
SELECT 
    SUM(collection_amount) AS cheque_total 
FROM 
    collection_entry 
WHERE 
    collection_type='CC' 
    AND date='$entered_date' 
UNION 
SELECT 
    SUM(debit2) AS voucher_receipt_total 
FROM 
    voucher_posting 
WHERE 
    receipt_type='R' 
    AND date='$entered_date' 
UNION 
SELECT 
    SUM(credit2) AS voucher_payment_total 
FROM 
    voucher_posting 
WHERE 
    receipt_type='P' 
    AND date='$entered_date' 
UNION 
SELECT 
    SUM(amt) AS others_total 
FROM 
    others_remittance 
WHERE 
    entered_date='$entered_date' 
UNION 
SELECT 
    SUM(amt) AS short_total 
FROM 
    short_remittance 
WHERE 
    entered_date='$entered_date' 
UNION 
SELECT 
    SUM(amount) AS more_paid 
FROM 
    difference 
WHERE 
    entered_date='$entered_date' 
    and paid_type='more' 
UNION 
SELECT 
    SUM(amount) AS unpaid 
FROM 
    difference 
WHERE 
    entered_date='$entered_date' 
    and paid_type='unpaid'");
 while($row=mysql_fetch_array($sel)) 
 {
  $cash_total=$row['cash_total'];
  $cheque_redeposit_total=$row['cheque_redeposit_total'];
  $not_cleared_total=$row['not_cleared_total'];
  $route_collection_total=$row['route_collection_total'];
  $return_total=$row['return_total'];
  $cheque_total=$row['cheque_total'];
  $voucher_receipt_total=$row['voucher_receipt_total'];
  $voucher_payment_total=$row['voucher_payment_total'];
  $others_total=$row['others_total'];
  $short_total=$row['short_total'];
  $more_paid=$row['more_paid'];
  $unpaid=$row['unpaid'];
  $net_total = (($cash_total + $route_collection_total) - $return_total);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:01:56.170

`UNION` just appends rows to one another. So in your case you just get a list of your sums in a row-wise fashion.

*   `[value for cash_total]`
*   `[value for cheque_redeposit_total]`
*   `[value for not_cleared_total]`
*   ...

If you really have to get all the data in one row, you can use something like this:

```
SELECT * FROM
(SELECT SUM(collection_amount) AS cash_total FROM collection_entry WHERE date='$entered_date' AND collection_type='DC') as t1,
(SELECT SUM(amt) AS cheque_redeposit_total FROM cheque_redeposit WHERE redeposited_on1 OR redeposited_on2='$entered_date') AS t2,
(SELECT SUM(collection_amount) AS not_cleared_total FROM collection_entry WHERE cheque_status='not cleared' AND date='$entered_date') AS t3,
(SELECT SUM(collection_amt) AS route_collection_total FROM route_collection WHERE entered_date='$entered_date') AS t4,
... 
```

# c++ - 单例线程安全类

> ID：11666887
> 
> 赞同：2
> 
> 时间：2012-07-26T09:58:26.607
> 
> 标签：c++, thread-safety, singleton

我在多线程环境中做的工作很少。所以，我需要知道下面类的 getInstance 函数是否是线程安全的。这是单例类：

```
//Singleton class
class S {
  // intentionally avoided pointer
  static S singleObject;

   // Private constructor   
   s ();
   s (S &);
   s& operator= (const s&);
public:
  // return reference of static object
  s& getInstance ()
  {
    return singleObject;
  }

  /* Normally with static pointer instance, getInstnace look like as
   s& getInstace ()
   {
      // trying to avoid multiple copies of singleObject
      lock_mutex ()

       if (singleObject == null)
          singleObjecct = new S();

      unlock_mutex ();

      return *singleObject;
    }
  */
};

S S::singleObject; 
```

在 getInstance 函数（未注释）中，返回静态对象的引用。它需要线程安全机制吗？

在第二个 getInstance（已注释）中，如果 singleObject 为空，我们将创建对象。所以，它需要一个锁定机制并且需要同步，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:44:14.897

在 C++11 中，您可以将静态实例放在静态函数中：

```
class S
{
    private:
        S();
        S(S const&);
        S& operator=(S const&);

    public:
        static S& getInstance ()
        {
            static S singleObject;
            return singleObject;
        }
}; 
```

根据标准第 6.7.4 段：

> 具有静态存储持续时间 (3.7.1) 或线程存储持续时间 (3.7.2) 的所有块范围变量的零初始化 (8.5) 在任何其他初始化发生之前执行。如果适用，具有静态存储持续时间的块范围实体的常量初始化（3.6.2）在其块首次进入之前执行。允许实现在与允许实现在命名空间范围（3.6.2）中静态初始化具有静态或线程存储持续时间的变量相同的条件下，对具有静态或线程存储持续时间的其他块范围变量执行早期初始化。否则，此类变量在控件第一次通过其声明时被初始化；这样的变量在其初始化完成时被认为已初始化。**如果在变量初始化时控制同时进入声明，则并发执行将等待初始化完成。**如果在初始化变量时控件以递归方式重新进入声明，则行为未定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T11:15:42.053

> 在 getInstance 函数（未注释）中，返回静态对象的引用。它需要线程安全机制吗？

只要您不在`main`函数的生命周期之外访问它，或者在其他线程可能具有非同步访问时修改它，那么从任何线程访问都是安全的。

如果您在`main`开始之前或结束之后进行访问（例如，从另一个静态对象的构造函数或析构函数），那么此时它可能没有被初始化，或者已经被销毁。这就是“延迟初始化”的动机，例如您的第二个版本。

> 在第二个 getInstance（已注释）中，如果 singleObject 为空，我们将创建对象。所以，它需要一个锁定机制并且需要同步，对吧？

是的，这需要一个锁定机制。对于支持 C++11（或类似）线程模型的编译器，获得像这样的延迟初始化的更简单方法是使用函数静态变量，它将在第一次进入时以线程安全的方式初始化范围：

```
S& getInstance ()
{
    static S singleObject;
    return singleObject;
} 
```

这也将避免您的版本的内存泄漏，但引入了它可能在其他静态对象之前被破坏的危险；因此，从静态对象的析构函数访问是不安全的。

通常，C++ 中的静态对象是此类死亡陷阱的雷区（无论您是否尝试将它们包装在某种单例反模式中）并且最好避免。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T11:59:27.200

除非您将 getInstance 声明为静态，否则您将无法调用它。这个错误已经传播到几乎所有的回复中。除此之外，我无法为所有答案添加更好的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T10:27:19.960

IIRC 这比这个更好。在调用 getInstance 之前，它不会初始化（线程安全）。

-edit- 我现在记得一些原因。除非调用该方法，否则您无法访问。您可以在其他类构造函数中调用它，并且无需担心 S 是否已初始化。就像在另一个类中一样，可以先构造，在这种情况下会发生崩溃或未定义的行为。

```
//Singleton class
class S {
  // intentionally avoided pointer

   // Private constructor   
   s ();
   s (S &);
   s& operator= (const s&);
public:
  // return reference of static object
  s& getInstance ()
  {
    static S singleObject;
    return singleObject;
  }
}; 
```

# scroll - libGDX：如何让相机指向移动的精灵？

> ID：11666890
> 
> 赞同：5
> 
> 时间：2012-07-26T09:58:35.403
> 
> 标签：scroll, libgdx, orthographic

我是 libGDX 和 android 游戏开发的新手。我想实现这一点：我有一个`Screen`和在其中，一个沿 X 轴移动的球精灵。现在我想在精灵移动时将视口居中。就像在愤怒的小鸟中一样，相机跟随小鸟飞过天空。

我怎样才能在我的游戏中使用`OrthographicCamera`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-24T13:29:18.577

这花了我一段时间的谷歌搜索和测试，但我刚刚发现了一些东西，我认为其他人可能会欣赏它。

要移动相机（如果您使用的是 spriteBatch），请确保调用 setProjectionMatrix。

前任：

```
camera.position.y += 5;  // or whatever you want to change y by...
camera.position.x += 5;
camera.update();    
spriteBatch.setProjectionMatrix(camera.combined); 
```

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T20:28:53.300

如果您还没有弄清楚这一点，您需要使用将球位置转换为相机位置

```
camera.unproject(ballPosition) 
```

这会将屏幕坐标转换为世界坐标。然后打电话

```
camera.position(ballPosition) 
```

将相机位置设置为您的球在世界上的位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T11:19:58.300

这

```
camera.translate(...); 
```

函数通过给定的数据转换所有涉及的相机属性。操作后您需要调用

```
camera.update(); 
```

计算相机的新矩阵。这会将相机推向您想要的方向。

# tridion - 编辑出版物的元数据需要系统管理权限吗？

> ID：11666893
> 
> 赞同：9
> 
> 时间：2012-07-26T09:58:52.050
> 
> 标签：tridion, tridion-2011

我正在使用 SDL Tridion 2011 SP1，文档指出：“具有系统管理权限的用户可以创建出版物。” 但这是否也意味着要更改出版物上的元数据，您需要具有系统管理权限？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T10:06:17.427

不，您有一个 Publication Manager 组，其范围设置为所有出版物，并且已启用 Publication Management 权限。

因此，当您将用户分配到该组时，他或她能够管理出版物的元数据。但是，此组的默认权限非常广泛，因此您可能会考虑将其缩减 - 或为用户或组设置特定权限。

# php - php中的日期差异

> ID：11666902
> 
> 赞同：1
> 
> 时间：2012-07-26T09:59:16.203
> 
> 标签：php, mysql

我有一个函数来计算两个日期之间的差异。

```
function getDateDifference($to, $from, $in) {
$diff = abs($to - $from);

$years = floor($diff / (365 * 60 * 60 * 24));
$months = floor(($diff - $years * 365 * 60 * 60 * 24) / (30 * 60 * 60 * 24));
$days = floor(($diff - $years * 365 * 60 * 60 * 24 - $months * 30 * 60 * 60 * 24) / (60 * 60 * 24));
if ($in == "days") {
    return $days;
} else if ($in == "months") {
    return $months;
} else if ($in == "years") {
    return $years;
} 
```

}

对于参数，我首先将两个日期转换为秒，如下所示，

```
checkin = '2012-07-26';
checkout = '2012-07-27';
check_in_date = strtotime(checkin);
check_out_date = strtotime(checkout); 
```

当涉及不到一个月的差异时，我得到了正确的差异。但是如果差值超过一个月，我总是把差值设为 1。有人能告诉我问题出在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:05:25.570

目前，一个月总是`30 * 60 * 60 * 24`秒，也就是 30 天。

你的问题是我们在七月，有31天，而不是30天。你必须注意每个月的天数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T10:19:15.267

您可以使用 DateTime 类。 [http://php.net/manual/en/datetime.diff.php](http://php.net/manual/en/datetime.diff.php)

```
 $checkin = new DateTime("2012-07-23");
 $checkout = new DateTime("2012-07-27");
 $difference = $checkin->diff($checkout);
 echo "differrence = " . $difference->format('%R%a days'); 
```

# ravendb - RavenDB 方面需要很长的查询时间

> ID：11666904
> 
> 赞同：0
> 
> 时间：2012-07-26T09:59:24.227
> 
> 标签：ravendb

我是 ravendb 的新手，正在尝试看看它是否可以为我工作的公司完成这项工作。

我将 10K 记录的数据更新到服务器。每个数据如下所示：

```
{
  "ModelID": 371300,
  "Name": "6310I",
  "Image": "0/7/4/9/28599470c",
  "MinPrice": 200.0,
  "MaxPrice": 400.0,
  "StoreAmounts": 4,
  "AuctionAmounts": 0,
  "Popolarity": 16,
  "ViewScore": 0.0,
  "ReviewAmount": 4,
  "ReviewScore": 40,
  "Cat": "E-Cellphone",
  "CatID": 1100,
  "IsModel": true,
  "ParamsList": [
    {
      "ModelID": 371300,
      "Pid": 188396,
      "IntVal": 188402,
      "Param": "Nokia",
      "Name": "Manufacturer",
      "Unit": "",
      "UnitDir": "left",
      "PrOrder": 0,
      "IsModelPage": true
    },
    {
       "ModelID": 371305,
       "Pid": 398331,
       "IntVal": 1559552,
       "Param": "1.6",
       "Name": "Screen size",
       "Unit": "inch",
       "UnitDir": "left",
       "PrOrder": 1,
       "IsModelPage": false
},..... 
```

其中 ParamsList 是单个产品的所有属性的数组。

建立索引后：

```
from doc in docs.FastModels
from docParamsListItem in ((IEnumerable<dynamic>)doc.ParamsList).DefaultIfEmpty()
select new { Param = docParamsListItem.IntVal, Cat = doc.Cat } 
```

和一个方面

```
 var facetSetupDoc = new FacetSetup
       {
           Id = "facets/Params2Facets",
           Facets = new List<Facet> { new Facet { Name = "Param" } }
       }; 
```

像这样搜索

```
 var facetResults = session.Query<FastModel>("ParamNewIndex")
               .Where(x => x.Cat == "e-cellphone")
               .ToFacets("facets/Params2Facets"); 
```

查询需要一秒钟多的时间，而且只需要 10K 的数据。我们公司在数据库中拥有超过 100 万种产品。

难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:33:32.877

为了生成构面，您必须检查`docParamsListItem.IntVal`. 如果你有很多，那可能需要一些时间。一般来说，你不应该有很多方面，因为这没有意义，它对用户没有帮助。对于整数，您通常使用范围，而不是实际值。例如，一定范围内的价格。您仅将字段用于制造商或 MegaPixels 计数，其中您有批号或项目（大约十几个或两个）

您没有提及您使用的是哪个版本，但我们最近在那里进行了一些重大改进。

# c# - 如何创建一个可以使用两个命名空间之一的类？

> ID：11666905
> 
> 赞同：0
> 
> 时间：2012-07-26T09:59:25.773
> 
> 标签：c#, graph, using

我有一个项目，其中包含一个在图表上绘制的类。该课程如下所示：-

```
using System.Web.UI.DataVisualization.Charting;

namespace MyNameSpace
{
    public static class Utilities
    {
        public static void DrawOnGraph (Chart ourChart,
                                        // ...more parameters...
                                        )
        {
            ChartArea our_area = new ChartArea("Main");
            // Draw things
        }
    }
} 
```

这是由同一解决方案中另一个项目中包含的 Web 应用程序驱动的。我现在需要创建一个表单应用程序，该应用程序将使用完全相同的输入到 Web 表单上绘制完全相同的图形。我希望将项目包含在第二个解决方案中。但是课程需要看起来像这样：-

```
using System.Windows.Forms.DataVisualization.Charting;

namespace MyNameSpace
{
    public static class Utilities
    {
        public static void DrawOnGraph (Chart ourChart,
                                        // ...more parameters...
                                        )
        {
            ChartArea our_area = new ChartArea("Main");
            // Draw things
        }
    }
} 
```

我想知道是否可以对两者使用相同的项目/类/代码，因为我自然不想将代码剪切'n'粘贴到两个不同的地方，唯一的区别是`using`指令。

我看不到如何使用泛型，因为（替代）命名空间中的对象函数内部有声明，例如上面显示的 ChartArea。我看不到使用条件编译的方法，因为需要哪一行取决于项目所在的解决方案，而不是项目本身，并且它不能引用调用者项目，因为这会创建循环引用。我也不能将 web 图表转换为 windows 图表。

我能做到的最好的办法是提供两个`using`指令，但根据我目前正在研究的解决方案将其中一个注释掉。但这对我来说似乎不是很满意。有没有更好的办法？还是我不应该这么闲着把代码写两遍？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:12:47.907

我能想到的最好的方法是为类创建包装接口，既`System.Web.UI.DataVisualization.Charting`提供`System.Windows.Forms.DataVisualization.Charting`/要求。然后提供接口的两种实现：一种用于Forms，一种用于UI。有了它，您`Utilities`可以在不知道确切实现的情况下调用接口方法，并为 UI 和表单共享代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T10:12:03.447

您可以在绘图逻辑之上创建自己的抽象，并使用包装器模式来封装这两个图表。然后，您将针对您的抽象进行编码，并提供每个表单和 Web 项目的实现。我假设绘图逻辑足够复杂以证明这种方法的合理性。如果您实现这一点，它将允许您在一个地方引入图形更改，它将影响两个应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-02T21:48:04.787

如果您的代码调用 Web.UI 和 Windows.Forms Charting 的相应 API 的“相同”部分，包括 Series、ChartArea 等操作，则可以使用***条件编译。***

只需将代码编译两次：一次***使用***Web.UI Charting，另一次***使用***Windows.Forms Charting。使用条件编译来启用/禁用程序集引用，以便一个程序集以基于 WinForms 的应用程序和其他 WebUI 图表应用程序为目标。

或者，在一些简单粗暴的情况下，您可以只使用 Windows.Forms Charting API，并且每当需要 html 时，例如***img***元素的***src***属性，只需使用***Chart.SaveImage*** (..)，等等上。但这有缺点。

 **这两种选择都有局限性，因为 Web.UI 和 Windows.Forms Charting 各自的 API 和功能没有足够的重叠。并且 SaveImage() 还受到限制，因为您不希望您的 Web 应用程序受到 Windows.Forms 程序集和无关操作的负担。

尽管如此，即使 Web 和表单程序集存在差异，条件编译方法也将起作用。您将能够维护共享代码（但有条件地为 Web 或表单编译），但每个库都会积累特定于其 Web 或表单目标的新代码。这种方法最适用于构建配置的好方法。如果您有一种构建配置的好方法，我认为它比其他方法更容易维护和扩展。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T10:10:55.880

一种用于网络

```
using System.Web.UI.DataVisualization.Charting; 
```

另一个用于窗户

```
using System.Windows.Forms.DataVisualization.Charting; 
```

问题是他们将使用与他们的平台相关的类，所以我认为你能够实现它

我的建议是将常用功能分离到一个不依赖于 Web 或 Windows 的库中，并将其用于两种不同的解决方案，一个用于 Web，另一个用于 Windows，这样您就可以减少两次代码重复

**更新 ：**

另一种选择是将其编写为 Windows 控件库，然后将其作为 DLL 在 Web 应用程序中使用。请看这个例子[http://www.beansoftware.com/ASP.NET-Tutorials/Place-Windows-Control-To-Web-Form.aspx](http://www.beansoftware.com/ASP.NET-Tutorials/Place-Windows-Control-To-Web-Form.aspx)**

# windows - P2 自配置 RCP 与 Windows UAC

> ID：11666907
> 
> 赞同：1
> 
> 时间：2012-07-26T09:59:38.037
> 
> 标签：windows, eclipse, uac, p2

我们曾经享受过 Windows XP 上的自我更新 Eclipse RCP 应用程序的乐趣（它是一个公司唯一的内部文档管理系统）。现在，在切换到 Windows7 后，只有当应用程序以管理员身份运行时才会执行更新，这当然会消除自更新应用程序的乐趣。

自我配置或多或少是从[本文复制/粘贴](http://wiki.eclipse.org/Equinox/p2/Adding_Self-Update_to_an_RCP_Application#Headless_Updating_on_Startup)

由于安装文件夹绑定到 C:\Program Files（公司策略...），因此应用程序可能不再写入此文件夹，除非作为提升的进程启动。p2 所做的（至少我认为在史诗般的调试会话之后）是从 p2 存储库下载 artifact.xml 和 content.xml 以在本地进行比较并构建更新计划。不幸的是，如果它无法存储下载的文件，它只会显示“无需更新”。

我已经尝试尝试使用共享安装/捆绑池，其中使用具有以下属性的 p2 导向器应用程序将捆绑包安装到用户目录：

```
-metadataRepository http://someserver/updatesite
-artifactRepository http://someserver/updatesite
-installIUs my.application.id
-roaming
-destination "C:\Program Files\MyApplication"
-bundlepool C:\Users\me\MyApplication
-profile DefaultProfile
-profileProperties org.eclipse.update.install.features=true
-p2.os win32
-p2.ws win32
-p2.arch x86_64

-Declipse.p2.data.area=C:\Users\me\.p2 
```

安装程序运行良好，应用程序可能会启动（在告诉她启动器在我的用户目录中之后）。但不幸的是，自我配置仍然不能以这种方式工作。以管理员身份运行将导致在 -destination 位置而不是 -bundlepool 位置下载更新的包和功能 - 这是我所期望的。

我错过了什么开关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:58:06.860

我们在这里遇到了类似的问题。原因之一可能是正在安装的 IU 仍然尝试通过 p2.inf 接触点指令在“C:\Program Files\MyApplication”中写入内容。解决方案是部署一个简约的启动器“C:\Program Files\MyApplicationLauncher”，它：

1.  执行捆绑池更新 (dir = "C:\ProgramData\MyBundlePool")
2.  并实际在 %tmp% (dir = "C:\Users\username\AppData\Local\Temp\MyApplication") 中安装和启动应用程序

# php - foreach 获取子数组

> ID：11666910
> 
> 赞同：1
> 
> 时间：2012-07-26T09:59:43.917
> 
> 标签：php, mongodb, foreach

我对下面的以下代码有疑问。

```
if ($cursor->count() > 0)
        {
            $test = array();
            // iterate through the results
            while( $cursor->hasNext() ) {   
            $test[] = ($cursor->getNext());
            }
            //print_r($test);
            foreach($test as $d) {
                print_r($d);    
                $current_name = $d[0]['personal']['name'];
           }
        } 
```

但是当我在我的 mongodb 中时

```
array("personal"=>array("name"=>"rusty")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:10:05.373

修改为：

```
 foreach($test as $d) 
 {
            print_r($d);    
            $current_name = $d['personal']['name'];
 } 
```

# matlab - 如何从绘图中获取点之间的值？

> ID：11666913
> 
> 赞同：3
> 
> 时间：2012-07-26T09:59:52.233
> 
> 标签：matlab

考虑到我有以下几组值，

```
Y = [1  23  4  67  89  23  5   12 ]
X = [0  2   4  6   10  14  18  22 ] 
```

我可以使用基本绘图功能绘制绘图。现在，从这个图中，我想知道 X=5 的 Y 值是多少。我怎样才能得到这些数据？

你可以看到，它不是我的情节点的一部分，而是我要从图中提取的东西。

有什么想法吗？对此没有内置功能，我感到有些惊讶。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T10:20:44.287

由于绘图使用线性插值，因此您也应该使用它。

```
 y = interp1(X,Y,5); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T10:20:54.553

您正在寻找的功能是[`interp1`](http://www.mathworks.de/help/techdoc/ref/interp1.html)

对于您的示例，代码将是

```
 y = interp1(X, Y, 5, 'linear'); 
```

# javascript - 如何从一个商店传递 id 以在 Sencha touch 2 中用于另一家商店

> ID：11666915
> 
> 赞同：0
> 
> 时间：2012-07-26T09:59:55.543
> 
> 标签：javascript, sencha-touch-2

我有 2 个商店，一个用于事件，一个用于为该事件捕获的数据。我正在尝试从事件存储中获取 id 并在数据存储中使用它。我的数据模型中有以下字段：

> {名称：'eventId'，类型：'int'}，

我的控制器获取表单数据并对其进行验证，然后我的代码失败了。我正在尝试以下方法从第一家商店获取 id，然后将其设置在第二家商店中

```
var idStore = Ext.getStore('Details');
var id = idStore.findRecord('id');

currentData.set('eventId', newValues.id); 
```

我的控制台返回`null`for `var id`，这让我相信我的代码是错误的，有人可以帮我解释一下我如何获取 id 并使用它吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:16:18.797

我想通了，文档[文档](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Store-method-findRecord)说要在字段之后指定值。我所要做的就是在“id”字段之后添加“1”。

不过，这确实提出了一些问题，我必须确保我的 id 始终以“1”开头，有人知道更好的方法吗？

# objective-c - 在可可中使用绑定时未反映在视图中的更改

> ID：11666917
> 
> 赞同：1
> 
> 时间：2012-07-26T10:00:01.403
> 
> 标签：objective-c, cocoa, binding, controller, nsview

我正在创建一些示例应用程序来了解可可中的视图导航、绑定等概念。这是场景：我有一个窗口，在 MainMenu.Xib 中有一个选项卡视图（2 个选项卡）。我在第一个选项卡中有一个文本字段，在第二个选项卡中有一个标签。我希望它们都反映相同的值，并且我想使用绑定来做到这一点。此外，我不想将提供给我的视图与选项卡视图一起使用。

这些是我已经完成的步骤。

每个选项卡视图项的视图在 applicationDidFinishLaunching: 方法中单独设置，使用以下代码：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
// Insert code here to initialize your application

    //initialize view controllers 
    view1=[[ViewTab1 alloc] initWithNibName:@"ViewTab1" bundle:nil];
    view2=[[ViewTab2 alloc] initWithNibName:@"ViewTab2" bundle:nil];

   //set views
    [[[myTabView tabViewItems] objectAtIndex:0]setView:view1.view];
    [[[myTabView tabViewItems] objectAtIndex:1]setView:view2.view];    

} 
```

*   myTabView 是 AppDelegate 中 MainMenu.xib 的选项卡视图的出口引用。
*   ViewTab1 是第一个视图控制器（和 xib）的名称。
*   ViewTab2 是第二个视图控制器（和 xib）的名称。

ViewTab1 有一个单一的文本字段（和一个关联的标签）。我已将此绑定到 AppDelegate 中声明的变量（名称）。ViewTab2 有一个标签。我也将它绑定到 AppDelegate 中的同一个变量。

变量“name”在 AppDelegate 的 init 方法中初始化。

AppDelegate.h

```
....
NSString *name;
....
@property(strong) ViewTab1 *view1;
@property(strong) ViewTab2 *view2;
@property (assign) IBOutlet NSTabView *myTabView;

@property (strong) NSString *name;
.... 
```

AppDelegate.m

```
....
@synthesize myTabView;
@synthesize view1,view2;
@synthesize name;
....
- (id)init {
self = [super init];
if (self) {
    name=@"dummy";
}
return self;
.... 
```

除此之外，我没有在我的程序中进行任何编码。

在 ViewTab1.xib 中，我得到一个对象并将其设为 AppDelegate 的实例，然后将 Application 对象（NSApplication）的委托引用连接到同一对象。（我希望这是获取 AppDelegate 对象的正确方法。）

我在 ViewTab2.xib 中做了同样的事情

然后我将 ViewTab1 中的文本字段和 ViewTab2 中的标签绑定到 AppDelegate 中的这个变量。

当我运行程序时，文本字段和标签都显示“虚拟”。但是当我更改文本字段中的值时，它不会反映在第二个选项卡（即 ViewTab2）的标签中。

请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T23:00:10.543

**如何从任何加载的 Nib 建立到同一个 App 委托对象的绑定？**

是的，我知道所描述的这种令人沮丧的情况......经过数周和数百页的 KVO 文档 - 通知 - 绑定后，我认为有一个非常简单的解决方案。

正如我们在一些信息源中发现的那样，nib 加载过程会产生新的成员实例......我们需要使用绑定连接到旧实例。

*请注意，在 InterfaceBuilder 中进行的绑定在加载 nib 后会自动重定向到这些新实例*

**为什么不将 App 委托的指针重定向到旧实例？**

在加载 nib 的方法中，您可以在 nib 加载之前和之后测试哪个对象是应用程序委托。如果新的与前一个不同，您可以根据需要重定向它。

这个简单的示例适用于我在 10.5.8 下的 Xcode3 中，目标为 OSX10.5 / i386：

```
// ***** SOMEWHERE IN DEFAULT APP-DELEGATE.m IMPLEMENTATION

- (IBAction) createOtherWindowFromNib: (id)sender
{
    // ensure that app delegate is set as you want...
    [NSApp setDelegate:self];
    NSLog(@"APP-DELEGAT **** CREATE-TEST-WINDOW ***** WHO IS APP-DELEGATE BEFORE NIB LOAD: %@ ", [[NSApp delegate] description]);

    // we can bind members of the nib to this controller over proxy object named "File’s Owner"
    NSWindowController *otherWinCapo = [[NSWindowController alloc] initWithWindowNibName: @"OtherTestWindow"];

    NSLog(@"APP-DELEGAT **** CREATE-TEST-WINDOW ***** WHO IS APP-DELEGATE AFTER NIB LOAD: %@ ", [[NSApp delegate] description]);

    // make some test for delegates before/after here if you need ...
    // usually your bindings made inside "OtherTestWindow.xib" by IB doesn’t works in this moment

    // ... and some redirection if needed
    [NSApp setDelegate:self];

    // afer that the bind made in IB inside "OtherTestWindow.xib" 
    // referred to (proxy object) "Application.delegate.myBOOL" (Bind to:Application, Model Key Path:delegate.myBOOL)
    // react to changes of myBOOL placed in default app delegate object as expected 
    // simultaneously in every open instance of "OtherTestWindow.xib"

    [otherWinCapo showWindow: otherWinCapo.window]; // we need populate the window instance on screen to see it
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:28:44.217

您是否在`NSTextField`控件中打开了“持续更新值”？

请参阅[此示例](http://www.bdunagan.com/2010/02/19/cocoa-tip-continuous-updates-and-bindings/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T01:14:52.877

我认为问题在于您设置为应用程序委托类的 xib 中的对象创建了应用程序委托的 2 个不同实例，因此更改文本字段的值会在一个实例中更改 name 的值，但不会在另一个实例中更改。那就是你做错了，不幸的是，我现在想不出解决方案。

# r - General questions about Principal Component Analysis (PCA) in R

> ID：11666922
> 
> 赞同：1
> 
> 时间：2012-07-26T10:00:27.000
> 
> 标签：r, pca

I would like to produce some nice PCA plots in R. As usual, in R, there are several ways to perform a principal component analysis. I found so far 3 different ways of how to calculate your components and 3 ways of plotting them. I was wondering whether people who are familiar with these functions can give me some advise on the best combination of functions to produce the following plots:

*   Scores Plot
*   Loadings Plot
*   Histogram / Bar chart of the variances explained by each principal component

My research on functions and plots used for PCA in R resulted in:

Functions:

*   pca.xzy()
*   prcomp()
*   princomp()
*   dudi.pca()

Plot:

*   plot.pca (this one seems to belong to the function pca.xzy())
*   ggplot2
*   plot
*   biplot

I also found the following webpage:

[http://pbil.univ-lyon1.fr/ade4/ade4-html/dudi.pca.html](http://pbil.univ-lyon1.fr/ade4/ade4-html/dudi.pca.html)

And I was wondering if you can draw those circles and lines starting from each of the circle centers with one of the other functions mentioned above as the function dudi.pca from the ade4 package seems to be the most complicated one.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:55:10.557

请一题一题！有`psych`William Revelle 的包，看[这个](http://www.statmethods.net/advstats/factor.html)和[这个](http://www.personality-project.org/r/r.guide.html#factoranal)。[这里](http://gettinggeneticsdone.blogspot.com/2010/05/tutorial-principle-components-analysis.html)也有一个很好的教程。反正...

*   分数/负荷图见`pairs`
*   直方图：见`hist`

所以再一次，你的问题是什么？=)

# jquery - jquery text | on mouse hover

> ID：11666924
> 
> 赞同：-4
> 
> 时间：2012-07-26T10:00:33.583
> 
> 标签：jquery, css

Can anyone tell me how this animation is working "centered one".See [a link](http://www.stern.nyu.edu/).I don't know where to start with

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:04:09.627

将文本拆分为 span

```
<spans class="highlightOnHover"> 
```

然后使用一些 jQuery 来突出显示

```
$(".highlghtOnHover").hover(
  function () {
    $(this).addClass("hover");
  },
  function () {
    $(this).removeClass("hover");
  }
); 
```

# json - Can Hibernate automatically map a HashMap to a string column?

> ID：11666929
> 
> 赞同：1
> 
> 时间：2012-07-26T10:00:49.007
> 
> 标签：json, hibernate

I have a HashMap which was populated from form elements of an HTML page, and when I save it I need Hibernate to convert it automatically to a JSON string and also persist it as a JSON string. Is this doable in Hibernate? Or, can you tell Hibernate in the mapping file (or maybe, as an annotation) to call a Java method that converts HashMap to JSON, and persist the return value of that method, and vice-versa? (read JSON string and convert automatically to a HashMap).

Thanks for all the help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:21:15.283

当然，您可以创建自定义用户类型：

[http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/types.html#types-custom](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/types.html#types-custom)

然后 Hibernate 将使用它来将数据持久化到数据库中，并将其作为对象读回。

# ios5 - 获取 UIImage 参考

> ID：11666938
> 
> 赞同：0
> 
> 时间：2012-07-26T10:01:37.667
> 
> 标签：ios5, uiimage

我有点卡在 UIImage 上。

在我的应用程序目录中，我有 3 张不同标志的图片（red.png、yellow.png、green.png），它们代表警报的不同严重性级别。我创建了一个类“Alerte”，其中一个参数是从这些标志之一中挑选的 UIImage。所以我参考这样的图像：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"jaune" ofType:@"png"];
UIImage *img = [[UIImage alloc] initWithContentsOfFile:filePath]; 
```

当我使用 NSLog 打印图像时，调试区域显示：

```
2012-07-26 11:46:28.546 ApplicationFormulaire[1031:fb03] <UIImage: 0x8144e20> 
```

但是我怎么知道指出了 3 个标志中的哪一个？如果是黄红还是绿？是否存在获取此资源名称的方法？

如果有人可以帮助处理它，我将不胜感激：D 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:11:43.993

我不确定，但我认为 UIImage 不会保留有关其路径的信息。

作为允许您访问正确图像的替代方法，将它们存储在 NSDictionary 中。然后，您可以使用 [myDict objectForKey:key] 访问每一个以获取红色、黄色或绿色图像。

# visual-studio-2010 - VisualStudio 2010：一种无需离开键盘即可显示提案的方法？

> ID：11666941
> 
> 赞同：0
> 
> 时间：2012-07-26T10:01:49.673
> 
> 标签：visual-studio-2010, visual-studio, smart-tags

有没有办法摆脱这种状态：

![在此处输入图像描述](../Images/d2a247b453cce8cf7eb7c707a79a0447.png)

对此：

![在此处输入图像描述](../Images/a244c71a566a0e7ac25e5fd0f38acff4.png)

不离开键盘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:07:27.257

在 Visual Studio 中展开智能标记的键盘快捷键是`Ctrl`+ `.`（句点）。

# javascript - 无法使用 document.body.appendChild 附加 javascript

> ID：11666942
> 
> 赞同：0
> 
> 时间：2012-07-26T10:01:55.863
> 
> 标签：javascript, chromium

我正在尝试通过以下方式将 javascript 附加到加载的页面：

```
var sc = document.createElement('script');
sc.content = "<script>alert('aa')</script>";
document.body.appendChild (sc); 
```

但这在铬中不起作用：

![在此处输入图像描述](../Images/92c958912c4447ad2e5e6d55d433221a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:06:18.953

你不要把元素的*内容*`<script>...</script>`放在里面。但更重要的是，我认为他们没有财产（例如，我[在这里没有看到](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-81598695)财产）。*`script``content`*

 *如果我没记错的话，`script`在运行时将内容放入元素中的最可靠方法是通过[`createTextNode`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1975348127)and [`appendChild`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-184E7107)，例如：[Live example](http://jsbin.com/igasil) | [来源](http://jsbin.com/igasil/edit)

```
var sc = document.createElement('script');
sc.appendChild(document.createTextNode("alert('aa')"));
document.body.appendChild(sc); 
```

...但我不会惊讶地发现一些较旧的浏览器需要您设置`innerText`或其他东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:34:21.317

```
var script = document.createElement('script');
script.appendChild(document.createTextNode("alert('http://jsfiddle.net/UpWhX/')"));
document.body.appendChild(script); 
```

试试这个[测试这里](http://jsfiddle.net/UpWhX/2/) `http://jsfiddle.net/UpWhX/2/`*

# mysql - SELECT 上的 MySQL 更新

> ID：11666944
> 
> 赞同：4
> 
> 时间：2012-07-26T10:01:56.383
> 
> 标签：mysql, sql

在 MySQL 中，是否可以更新同一查询中的选定记录？

例如，如果查询

```
 SELECT * 
   FROM `table`
  WHERE field = "value"
  LIMIT 0,2 
```

返回两行，然后在同一个查询中，我需要将表的`count`字段增加 1。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T10:05:40.847

是的，您可以将`UPDATE`查询编写为：

```
UPDATE my_table
SET count = count + 1
WHERE field = "value"
LIMIT 2; 
```

或用于`LIMIT`偏移尝试：

```
UPDATE my_table a
       INNER JOIN (SELECT id FROM my_table WHERE field = "value" LIMIT 0, 2) b
             ON a.id = b.id
SET count = count + 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:20:33.220

这是不可能的。动词`SELECT`只检索数据（不修改它）；动词`UPDATE`只修改数据（不检索它）。没有 MySQL 动词可以执行这两种操作。您将不得不使用两个单独的语句。

但是，这两个语句可以封装在事务中（如果您的存储引擎支持），以确保它们以原子方式执行和/或可以从存储过程中调用以简化必须由客户端发出的命令。将两者结合起来将具有：

```
DELIMITER ;;

CREATE PROCEDURE select_and_update(value TEXT)
BEGIN
  START TRANSACTION;
    SELECT * FROM `table` WHERE field = value LIMIT 0,2;
    UPDATE `table` SET count = count + 1 WHERE ...;
  COMMIT;
END;;

DELIMITER ; 
```

然后你的客户只需要做：

```
CALL select_and_update('value'); 
```

# jdbc - JDBC Requests High CPU at JMeter Client

> ID：11666946
> 
> 赞同：0
> 
> 时间：2012-07-26T10:02:01.203
> 
> 标签：jdbc, jmeter

I was implemented a JDBC test plan with my database on a web-server (I built a web server by myself). When I start a simple request from JMeter Client (Ex: `SELECT * From link d WHERE d.`link`LIKE '%com%'`), then the CPU of JMeter would high usage (90-100%) for a long time (~5 mins, but I set my test plan in 6s :(. And on server side, CPU high very short time - 5-7seconds (I think this time for the query to database). I tried to change the HEAP in jmeter.bat to more than 1024m, but is wasn't successful.

Can you help me to solve this problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:04:13.297

我会在那个 SQL 查询上运行 EXPLAIN PLAN。由于您编写 WHERE 子句的方式，您可能会看到 TABLE SCAN。这需要很多时间，随着表的增长，需要更多时间，因为它需要您检查每条记录。

# php - preg_replace remove every char from ! until a single space is found

> ID：11666953
> 
> 赞同：0
> 
> 时间：2012-07-26T10:02:23.127
> 
> 标签：php

I'm trying to delete specific words.

```
$data = str_replace( $wordsToRemove, '!', $data ); 
```

But this leaves certain chars off words. So for example if **test** is a word to remove, **testing** is now **!ing**, and **tests** becomes **!s**

So I'm trying to get rid of these likes this:

```
$data = preg_replace("/!anyAmountofCharsRemovedUntilSingleSpace /", ' ', $data); 
```

Is this the right way to do it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:12:16.520

尝试这个：

```
<?php
$words = 'Hello there this is some sample text';
$replaced =  preg_replace('/th.*? /','',$words);
echo $replaced;
?> 
```

输出：

> 你好是一些示例文本

**编辑**

```
<?php
$words = 'Hello there this is some sample text';
$chars = array(
    'the',
    'so',
    'sa'
);

for($i = 0; $i < count($chars); $i++)
    $words =  preg_replace('/'.$chars[$i].'.*? /','',$words);

echo $words;
?> 
```

输出：

> 你好这是文字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:07:33.207

如果要删除单词，为什么要用“！”替换它们？

你可以简单地写

```
$data = str_replace( $wordsToRemove, '', $data ); 
```

它将用null替换单词。

# c - 使用 malloc、struct 和 char 的堆损坏 *

> ID：11666954
> 
> 赞同：1
> 
> 时间：2012-07-26T10:02:25.810
> 
> 标签：c, memory, malloc, heap-memory, heap-corruption

我的 C 程序中似乎有内存损坏。我曾经找到问题陈述，它在它之前`_ASSERTE( _CrtCheckMemory( ) );`的一行上中断。`scep_conf->engine_str = NULL;`所以如果我理解正确的话，之前的 malloc 会破坏一些东西，对吧？

所以这是导致问题的代码部分：

```
scep_conf = (SCEP_CONF *) malloc(sizeof(scep_conf));
scep_conf->engine = (struct scep_engine_conf_st *) malloc(sizeof(struct scep_engine_conf_st));
scep_conf->engine_str = NULL; 
```

标题中的定义：

```
typedef struct {
    struct scep_engine_conf_st *engine;
    char *engine_str;
} SCEP_CONF;

struct scep_engine_conf_st{
    char *engine_id;
    char *new_key_location;
    int storelocation; 
    char *dynamic_path;
    char *module_path; 
    int engine_usage;
};

SCEP_CONF *scep_conf; 
```

基本上我不明白为什么它会破坏我的记忆。我是 C 的新手，所以可能有一些我没有看到的明显的东西。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T10:05:27.557

这是不正确的：

```
scep_conf = (SCEP_CONF *) malloc(sizeof(scep_conf)); 
```

因为它只为 a 分配足够的内存`SCEP_CONF*`，而不是 a `SCEP_CONF`。它应该是：

```
scep_conf = malloc(sizeof(*scep_conf)); /* cast unnecessary. */ 
```

值得一读[我会转换 malloc 的结果吗？](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)

# c++ - How to get cpp files from different directories compiled into one folder?

> ID：11666955
> 
> 赞同：6
> 
> 时间：2012-07-26T10:02:25.620
> 
> 标签：c++, windows, makefile, gnu-make

I have a number of C++ files distributed in several folders.

```
a_library/
    file1.cpp
    file2.cpp
    category1/
        file3.cpp
        file4.cpp 
```

They are guaruanteed to be uniquely named. I want to compile all those C++ files to seperate Object-files in the `obj/` directory.

I have a list of all source-files with relative path, and their corresponding destination-names.

```
a_library/file1.cpp
a_library/file2.cpp
a_library/category1/file3.cpp
a_library/category1/file4.cpp

obj/file1.obj
obj/file2.obj
obj/file3.obj
obj/file4.obj 
```

How can I make a rule that will convert a C++ file from the first list to a object-file from the second one?

These attempts do *not* work:

```
obj/%.obj: %:cpp
    # ...

%.obj: %.cpp
    # ...

.cpp.obj:
    # ... 
```

I would like to not write rules like this:

```
obj/%.obj: a_library/%.cpp
    # ...

obj/%.obj: a_library/category1/%.cpp
    # ... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T10:50:07.617

尝试设置`VPATH`：

```
VPATH = a_library:a_library/category1
obj/%.o: %.cpp
    $(CXX) -c $(CPPFLAGS) $(CFLAGS) $(CXXFLAGS) -o $@ $< 
```

并添加完整的文件列表（我建议您明确列出文件，不要使用`$(wildcard ...)`函数）和应用程序的链接：

```
files := main.cpp $(wildcard a_library/*.cpp) a_library/category1/file.cpp

obj/application: $(patsubst %.cpp,obj/%.o,$(notdir $(files)))
    $(CXX) $(CFLAGS) $(CXXFLAGS) $(LDFLAGS) -o $@ $+ 
```

有一种讨厌的`$(wildcard)`倾向，即在目录中获取任何内容，例如一次性测试文件或临时文件（如果它们碰巧有一个合适的名称：）`~file.cpp`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T10:09:21.990

我能想到的一种解决方案：只需使用简单的规则就地构建它们，然后进行“收集阶段”，将“.o”文件移动到单个文件夹。

制作一个取决于您的 $(OBJS) 的“collect_objs”目标，然后您的“主要”目标必须取决于“collect_objs”。

遍历可以使用shell完成

```
dirs := $(shell find ./ -type d)
collect_objs: $(dirs)
      for d in $+; do \
          mv *.o YourDestDir/*.o
      done 
```

当然，这意味着使用 UnxUtils 包（带有“find”和“mv”）或 Cygwin，因为您在 Windows 上。

另一种选择是使用某些工具显式地为每个 .c/.cpp 文件生成目标。抓取 python，遍历源目录并为每个 .c/.cpp 文件写入

```
obj/file_name.o:
       gcc -c path/fo/file_name.c -o obj/file_name.o 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T10:14:07.300

使用[cmake](http://www.cmake.org/)为您进行构建配置。

前段时间我在[github](https://github.com/moooeeeep/cmake_sample)上搭建了一个简单的示例项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T12:07:18.350

标准方法是`Makefile`在每个文件夹中都有一个并递归调用`include`

这是我在 10^100 上的前两次点击：

[http://owen.sj.ca.us/~rk/howto/slides/make/slides/makerecurs.html](http://owen.sj.ca.us/~rk/howto/slides/make/slides/makerecurs.html)

[http://www.gnu.org/savannah-checkouts/gnu/make/manual/html_node/Recursion.html](http://www.gnu.org/savannah-checkouts/gnu/make/manual/html_node/Recursion.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-25T22:02:23.103

与这个问题没有严格相关，因为它与 Make 无关，尽管我想展示我现在如何编译我的项目，3 年后。[Craftr](https://github.com/craftr-build/craftr)是一个基于 Python 的元构建系统，它鼓励间接的树外构建（例如`build`工作树中的 a）。构建目标文件和创建静态库就像

```
# craftr_module(my_project)
from craftr import *
from craftr.ext.platform import cxx, ar
objects = cxx.compile(
  sources = path.platform('**/*.cpp'),
)
lib = ar.staticlib(
  output = 'myproj',
  inputs = [objects],
) 
```

运行`craftr -eb`将产生以下构建产品结构

```
Craftfile
file1.c
file2.c
category1/
  file3.c
  file4.c
build/
  my_project/
    obj/
      file1.o
      file2.o
      category1/
        file3.o
        file4.o
    libmyproj.a 
```

# windows-phone-7 - Windows Phone MVVM Login Page design pattern?

> ID：11666959
> 
> 赞同：0
> 
> 时间：2012-07-26T10:02:34.920
> 
> 标签：windows-phone-7

I want to create a login page where the users enters username/password then a web service authenticates and saves an authentication token retrieved from the server.

I want the page view to be notified when the authentication is done successfully.

my question is: how to implement this in MVVM pattern ? I created a class for the model, a class for the model view and a class for the calling and parsing of the web service.

I can't set my **ModelView** as a **DataContext** for the page cause there are no controls that bind to the Model's data.

is this pattern an overkill or it can be implemented in another way ? please suggest.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:30:19.207

我有一个按照[此处所述](http://www.visuallylocated.com/post/2012/06/18/Using-a-custom-UriMapper-to-navigate-to-a-login-screen.aspx)实现的登录页面。登录页面本身没有视图模型，但它确实使用了我编写的服务，其中包含登录完成时的回调。该服务还包含有关用户的其他有用信息。我认为 MVVM 在这里会有点矫枉过正。

```
 private void LoginButton_Click(object sender, EventArgs e)
    {
        if (string.IsNullOrEmpty(EmailTextBox.Text)) return;
        if (string.IsNullOrEmpty(PasswordTextBox.Password)) return;

        Login();
    }

    private void Login()
    {
        if (DeviceNetworkInformation.IsNetworkAvailable == false)
        {
            MessageBox.Show("I'm having trouble connecting to the internet." + Environment.NewLine + "Make sure you have cell service or are connected to WiFi then try again");
        }
        else
        {
            LoginButton.Focus(); // Removes the keyboard
            UserProfile.Name = EmailTextBox.Text;
            UserProfile.Password = PasswordTextBox.Password;

            UserProfile.Current.Login(result =>
                {
                    // callback could be on another thread
                    Dispatcher.BeginInvoke(() =>
                        {
                            // Did the login succeed?
                            if (result.Result)
                            {
                                NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.Relative));
                            }
                            else
                            {
                                string message = "Sorry, but I was not able to log in that user. Please make sure the name and password were entered correctly.";
                                MessageBox.Show(message, "Login failed");
                            }
                        });
                });
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T10:10:37.417

您需要`ICommand`在 ViewModel 中放置 s 来指向执行调用您的 Web 服务的方法，并且您的 View 中的元素应该绑定到这些命令以执行操作。

而且您的视图模型中还需要一个布尔属性：IsLoggedIn，当对您的 Web 服务的登录调用返回成功时，您将其设置为 true。

然后在您看来，您可以绑定到 IsLoggedIn 以向您的用户提供反馈。

注意：不要忘记在其设置器中为 IsLoggedIn 提高 PropertyChanged。

# android - File is not being transferred in smack API

> ID：11666963
> 
> 赞同：1
> 
> 时间：2012-07-26T10:02:39.350
> 
> 标签：android, file-transfer, smack

I am developing a chat application in which i need to give support of file transfer. For this i am using Smack API. But my file is not being transferred and i am getting the `File status Error` and `progress 0.0`
i have googled on net but they all are used the same way to send the file. but i am getting the error.
I know there is a couple of question regarding this issue but proper solution is not given.

so is there anyone who have idea about this? How to solve this problem?

**Edit:**

I have try with change the **127.0.0.1** to **10.0.2.2**, and now i got the status is Negotiating but after some tries i got the status Error.

Here is my code for file transfer:

```
ServiceDiscoveryManager sdm = ServiceDiscoveryManager
                        .getInstanceFor(connection);
                if (sdm == null)
                    sdm = new ServiceDiscoveryManager(connection);
                sdm.addFeature("http://jabber.org/protocol/disco#info");
                sdm.addFeature("http://jabber.org/protocol/disco#item");
                sdm.addFeature("jabber:iq:privacy");
                Log.i("send file", "send file");
                FileTransferManager manager = new FileTransferManager(
                        connection);
                FileTransferNegotiator.setServiceEnabled(
                        connection, true);
                OutgoingFileTransfer transfer = manager
                        .createOutgoingFileTransfer("919974740823@127.0.0.1/Smack");
                Log.i("transfer file",
                        "outgoingfiletransfer is created");
                try {
                    OutgoingFileTransfer.setResponseTimeout(30000);
                    transfer.sendFile(
                            new File(path_file+"/"+"andr.jpeg"),
                            "Description");
                    Log.i("transfer file", "sending file");

                    Log.i("transfer file","the path is :"+path_file+"/"+"andr.jpeg");
                    while (!transfer.isDone()) {
                        try {
                            Thread.sleep(1000);
                            Log.i("transfer file",
                                    "sending file status :- "
                                            + transfer.getStatus()
                                            + " "
                                            + "progress:-"
                                            + transfer
                                                    .getProgress());
                            if (transfer.getStatus() == org.jivesoftware.smackx.filetransfer.FileTransfer.Status.error) {
                                transfer.cancel();
                                Log.e("", "ERROR");
                                break;
                            }
                        } catch (InterruptedException e) {
                            // TODO Auto-generated catch block
                            Log.e("catch", "catch" + e);
                            e.printStackTrace();
                        }
                    }
                } catch (XMPPException e) {
                    // TODO Auto-generated catch block
                    Log.e("catch", "catch" + e);
                    e.printStackTrace();
                }
                Log.i("transfer file", "--------");
            } 
```

Any help and suggestion will be appreciated.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-28T13:12:35.810

我也有同样的问题，但在添加这一行之后

```
SmackConfiguration.setDefaultPacketReplyTimeout(15000); 
```

它工作正常。

# javascript - Scroll to Fieldset When Link is clicked

> ID：11666966
> 
> 赞同：0
> 
> 时间：2012-07-26T10:02:47.423
> 
> 标签：javascript, jquery, html

so I have an example of what I have so far [here](http://jsfiddle.net/RGMLP/1/)

obvious this is not working because the PHP, let alone the jQuery. its just to show what I am doing.

I want to be able to click on the `href`, and this will scroll to the `fieldset` with the appropriate title.

Can anyone help, seems simple but cant get it to work ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:06:25.523

将 id 应用于每个字段集并使用以下代码：

```
 function scrollForMe(top){
    $("html,body").animate({
        scrollTop: top.offset().top
    }, 1000, "easeOutExpo");
} 
```

像这样使用它：

```
$(".link").click(function(){
    scrollForMe($("#fieldesetname1"));
    return false;
}); 
```

# amazon-s3 - Bigquery s3 集成

> ID：11666967
> 
> 赞同：4
> 
> 时间：2012-07-26T10:02:52.087
> 
> 标签：amazon-s3, google-bigquery

BigQuery 是否具有从 s3 导入数据的功能？如果不是，那么您可以建议的最佳替代路径是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T19:33:06.080

BigQuery 不支持直接从 S3 存储桶提取数据。但是，使用 gsutil 命令行工具可以轻松地将数据从 S3 存储桶移动到 Google Cloud Storage。我建议将数据移动到 Cloud Storage，然后从那里提取到 BigQuery。

[https://developers.google.com/storage/docs/gsutil](https://developers.google.com/storage/docs/gsutil)

# c# - C# 选择图像并在面板中绘制它

> ID：11666973
> 
> 赞同：0
> 
> 时间：2012-07-26T10:03:06.243
> 
> 标签：c#, .net

我在列表框中有一个简单的（支持的）图像文件名列表。当我选择文件名时，我希望在面板中绘制图像（如预览）。

如何访问面板以实际加载图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:08:29.460

将此添加到列表框的 SelectedIndexChanged 事件处理程序。您可以通过单击列表框、查看属性窗格、单击闪电并双击旁边的空白区域来找到它`SelectedIndexChanged`：

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    var currentImageLocation = listBox1.SelectedItem.ToString();
    Image myImage = Image.FromFile(currentImageLocation);
    panel1.BackgroundImage = myImage;
} 
```

您显然需要将上面的通用名称更新为列表框和面板的 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:05:19.863

只需在列表框的项目选择中获取文件的位置，并将面板的背景图像属性设置为该位置。

# linux - TIdMBCSEncoding.Create('ASCII') 在 Linux 上返回 MaxCharSize = 0

> ID：11666976
> 
> 赞同：1
> 
> 时间：2012-07-26T10:03:21.503
> 
> 标签：linux, delphi, indy, freepascal, iconv

我的环境是 i386 上的 Ubuntu 12.04 Linux。我可以看到只安装了 UTF-8 语言环境（在 中`/var/lib/locales/supported.d/local`）：

```
de_DE.UTF-8 UTF-8
en_US.UTF-8 UTF-8
~ 
```

现在的问题：

TIdIOHandler.InitComponent 调用 TIdTextEncoding.Default ，后者又调用**TIdMBCSEncoding.Create('ASCII')**。

在那里，这条线

```
FMaxCharSize := GetByteCount(PWideChar(@cValue[0]), 2); 
```

执行，并且 GetByteCount 返回零 - 这不应该发生（预期值为 1，因为 ASCII 是单字节编码）。

返回零值的地方是 IdGlobal 中的第 2288 行：

```
if iconv(FFromUTF16, @LCharsPtr, @LCharCount, @LBytesPtr, {$IFNDEF KYLIX}@{$ENDIF}LByteCount) = size_t(-1) then
begin
  Result := 0;
  Exit;
end; 
```

这可能是由于缺少 UTF-16 语言环境造成的吗？（我在第一次尝试时没有成功安装 UTF-16 支持，也许 Linux 上的其他 Indy 用户也看到了这个问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:07:12.413

Indy 目前没有对`iconv()`错误进行充分的处理，因为`iconv()`依赖于平台特定的`errno`变量，这些变量很难在 Indy 中跨多个平台实现（如果`iconv()`已实现直接返回其自己的错误代码，这将不是问题）。并不是所有`iconv()`的错误都是真正的失败，但是 Indy 还不知道，所以它把所有的错误都当作失败（至于为什么`GetByteCount()`失败时返回 0 而不是引发异常，这是因为`TIdTextEncoding`是仿照 Embarcadero 的`SysUtils.TEncoding`类，因此必须是 API - 与它兼容。这将在 Indy 11 中改变）。

ICONV 应该在本地实现其字符集，因此操作系统中安装的位置无关紧要。在这种情况下，我怀疑`iconv()`无法将代码点`$10FFFD`从 UTF-16 转换为 ASCII，`TIdMBCSEncoding.Create()`因为它超出了 ASCII 范围，这是 Indy 需要查看`errno`以区分失败和部分转换的情况之一，但是目前没有这样做。

作为一种解决方法，您可以编辑 IdGlobal.pas 让`TIdTextEncoding.Default`属性 getter 使用`TIdASCIIEncoding`类而不是`TIdMBCSEncoding`类，因为 Indy 有自己的不依赖于 ICONV 的 ASCII 实现。

```
{$IFDEF HAS_CLASSPROPERTIES}
class function TIdTextEncoding.GetDefault: TIdTextEncoding;
{$ELSE}
class function TIdTextEncoding.Default: TIdTextEncoding;
{$ENDIF}
var
  LEncoding: TIdTextEncoding;
begin
  if GIdDefaultEncoding = nil then
  begin
    {$IFDEF USE_ICONV}
    //LEncoding := TIdMBCSEncoding.Create('ASCII');
    LEncoding := TIdASCIIEncoding.Create;
    {$ELSE}
    ... 
```

# javascript - 猫鼬查询/插入混乱错误？

> ID：11666979
> 
> 赞同：0
> 
> 时间：2012-07-26T10:03:28.690
> 
> 标签：javascript, node.js, mongodb, mongoose, mocha.js

我正在编写一个数据库测试（由 Mocha 运行），在保存文档后调用 findOne 并发现一个奇怪的行为：

这里的伪代码：...

```
test1
A.save(check('A',done));

test2
B.save(check('B',done));

test3
C.save(check('C',done));
...

check = function(name, done) {
   theModel.findOne({name:name}, function(err,result) {
       assert.notEqual(result,null);
       result.remove(done);
   });
} 
```

然后，A 测试通过但 B 测试没有通过。我检查了日志，发现了一件奇怪的事情：首先它执行了插入，查询之后，删除之后（对于第一次测试，这就是预期的行为）。在第一次测试之后，当我看到在插入之前执行查询时我感到震惊（因此测试失败并且没有任何内容被删除）。第三个等等行为相同！在插入之前执行查询:(

因此，唯一通过的测试是第一个测试（如果我将 A 更改为 B，则 B 通过并且 A 不通过）。如果我查看 mongodb 集合，我可以看到在查询之后执行的其他插入（并且由于断言失败，它们没有被删除）

我正在使用 mongoose 2.7.2，（但我使用的是以前的版本，刚刚更新以查看它是否是已解决的错误）。帮助 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:27:28.323

我错了...

没有注意到我在调用 save 之前实际上是在调用 check （因为我在 save 方法中调用了函数......我很愚蠢并且对 javascript 很陌生）。

好的，所以我应该以其他方式执行检查：

```
A.save(function(err, result) { check('A', done);}) 
```

我道歉！

# doctrine - “联系人”上的未知记录属性/相关组件“onwer”

> ID：11666980
> 
> 赞同：0
> 
> 时间：2012-07-26T10:03:30.763
> 
> 标签：doctrine, symfony-1.4

当我尝试执行 php`symfony doctrine:data-load`时，出现此消息：

> “联系人”上的未知记录属性/相关组件“所有者”

这是我的 schema.yml ：

```
Contact:
  connection: doctrine
  tableName: contact
  columns:
    id_contact:
      type: integer(2)

      fixed: false
      unsigned: false
      primary: true
      autoincrement: true
    nom:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    fonction_organisme:
      type: string(1000)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    categorie:
      type: string(300)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    region:
      type: string(1000)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    province:
      type: string(500)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    adresse:
      type: string(1000)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    tel1:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    tel2:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    tel3:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    tel4:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    email:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    fax:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    ville:
      type: string(50)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    journal:
      type: string(2000)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    commentaire:
      type: string(2000)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    fix:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    image:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    owner:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
  relations:
    Evenement:
      local: id_contact
      foreign: id_contact_event
      type: many
    users : 
      class : user
      refclass : operation_contact
      foreignAlias : contacts
Courrier:
  connection: doctrine
  tableName: courrier
  columns:
    num_serie:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: false
    annee:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: false
    num_c:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    exp:
      type: string(500)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    dest:
      type: string(500)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    state:
      type: string(10)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    objet:
      type: string(1000)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    image_c:
      type: string(500)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    date_recep:
      type: date(25)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    date_env:
      type: date(25)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    owner_c:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    user_c:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    relations :
     users : 
      class : user
      refclass : operation_c
      foreignAlias : courriers
Evenement:
  connection: doctrine
  tableName: evenement
  columns:
    id_event:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: true
    date:
      type: date(25)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    action:
      type: string(2000)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    id_contact_event:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
  relations:
    Contact:
      local: id_contact_event
      foreign: id_contact
      type: one
OperationC:
  connection: doctrine
  tableName: operation_c
  columns:
    id_user:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: false
    num_serie:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: false
    operation_c:
      type: string(2000)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    date_op_c:
      type: date(25)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    relations : 
      user : { onDelete : CASCADE}
      courrier : { onDelete : CASCADE }
OperationContact:
  connection: doctrine
  tableName: operation_contact
  columns:
    id_contact:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: false
    id_user:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: false
    operation:
      type: string(2000)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    date_op:
      type: date(25)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    relations : 
      user : { onDelete : CASCADE}
      contact : { onDelete : CASCADE }
User:
  connection: doctrine
  tableName: user
  columns:
    id_user:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: true
    nom_user:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    prenom_user:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    adresse_user:
      type: string(2000)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    tel_user:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    login:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    password:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false 
```

这是我的夹具文件中的一个示例：

```
 contact :
    jihane:
       nom : jihane bahadi
       fonction_organisme : directrice
       categorie : autre
       region : meknes
       adresse : route de fes
       tel1 : 0654789632
       email : jihane.bahadi@gmail.com
       fix : 05698743255
       ville : meknes
       ouwner : user 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:18:27.867

好吧，我不确定，但我认为这是因为您使用所有者作为字段名称！（它将 mySQL 与所有者保留的 wrod 混淆了！）我记得有一次我将词组**用于**我的一个字段或模型，并且它造成了很多问题。但是当我改变这个名字时，一切都很好。只需更改模型架构中的**所有者**，然后构建模型、表单等并重新创建表并修复固定装置。我希望这能解决问题！

# cakephp - 每次数据库操作之前的 cakephp 回调

> ID：11666983
> 
> 赞同：0
> 
> 时间：2012-07-26T10:03:34.810
> 
> 标签：cakephp, logging

最近我的记录开始从我的应用程序的数据库中消失，所以我想记录 cakephp 进行的每个数据库操作。我应该把日志记录命令放在哪里？

PS：这不是 cakephp 第一次对我这样做。有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:09:57.643

您在模型中有一个函数 beforeSave()。

```
public function beforeSave(){
// code for logging
} 
```

你可以把它放在 AppModel.php 中。在保存到数据库之前调用它。

编辑：

好吧，我找到了一些东西，希望对您有所帮助：http: [//bakery.cakephp.org/articles/rainchen/2009/03/09/how-to-debug-as-in-rails](http://bakery.cakephp.org/articles/rainchen/2009/03/09/how-to-debug-as-in-rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:10:36.380

你必须自己制作[`DatabaseLoggerClass`](http://blog.jandorsman.com/2011/05/database-logging-in-cakephp/). 或者 [这篇文章](http://bakery.cakephp.org/articles/alkemann/2008/10/21/logablebehavior)将帮助你实现你所需要的。

[该文档页面](http://book.cakephp.org/2.0/en/core-libraries/logging.html#logging)还可以帮助您保存每个数据库操作的日志。

# javascript - JavaScript 流体布局

> ID：11666986
> 
> 赞同：0
> 
> 时间：2012-07-26T10:03:40.457
> 
> 标签：javascript, css, html

我已经在我的布局中使用了带有 jQ​​uery 的流体布局，但是遇到了一些我想问的问题。

现在布局看起来像这样：

![在此处输入图像描述](../Images/ee1c544dc611633274e973974a64356c.png)

我希望它看起来像这样：

![在此处输入图像描述](../Images/740d23e970de587bb4ab4e4622fc5e2b.png)

同时保持它的流动性。我怎样才能实现这一目标？

我在这里上传了代码：http: [//jsfiddle.net/methuselah/V44Jw/3/](http://jsfiddle.net/methuselah/V44Jw/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:14:09.393

这一切都可以通过 CSS 实现，而根本不需要 JavaScript。您不应该使用 JavaScript 来创建流畅的布局。

你已经用你的 CSS 做了一些很好的工作。一种简单的方法是对元素使用绝对定位，并使用相对大小。在每个 div 内部，`position: relative;`您可以随意进行绝对定位。

一个好的做法是将大小计算留给浏览器。如果你看看这个例子：

```
#someDiv {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 80%;
} 
```

`0`由于从顶部和底部的偏移，此 div 将具有其父元素的 100% 高度。试着改进你的小提琴，它可能会解决你所有的问题。再问你是否挣扎。

# sql - 列表中的 JPA 命名查询搜索

> ID：11666988
> 
> 赞同：0
> 
> 时间：2012-07-26T10:03:54.450
> 
> 标签：sql, jpa, jpa-2.0

我有一个与用户有一对多关系的组。（一个组可以有 0 个或 1 个以上的用户）

我要编写一个 jpa 查询，如果它没有附加用户或者如果它确实有用户，则返回一个组，该 id 与我的 id 匹配。

例如，如果我的组 1 包含用户 1 和用户 2。组 2 不包含任何用户。

如果我是用户 3，我只想返回组 2。

如果我是用户 2，那么我想返回组 1 和组 2

我可以在 JPA 中执行此操作吗？我知道 JPQL 的 IS EMPTY 部分，因此无论用户如何，我都可以返回第 2 组。我的问题是如何在列表中查询。

任何指针都会很好。

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:24:52.287

我想我有。答案是左加入列表。

例如

```
SELECT g FROM Groups g left join fetch g.users u where (g.users IS EMPTY OR (u.id = :id)) 
```

组是我的实体，其中包含用户列表

# c++ - 从函数返回局部变量的引用不会出错

> ID：11666994
> 
> 赞同：0
> 
> 时间：2012-07-26T10:04:12.017
> 
> 标签：c++, variables, reference, return

```
#include<iostream>
#include<conio.h>

using namespace std;

 /* test class: created the reference of 
    abc class locally in function getRef() 
    and returned the reference.*/

class abc {
    int var;

    public:
        abc():var(5) {}
        abc(int v):var(v) {}
        abc & getRef() {
            abc myref(9);
            return myref;
        }
        void disp() {
            cout<<var<<endl;
        }       
};

int main() {
    abc a;
    abc b=a.getRef(); 
    b.disp();  /* this statement executed perfectly. 
               I think compiler should throw error here. */
    getch();
    return 0;
} 
```

编译器应该抛出编译错误。请解释 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:12:14.897

编译器不应将其标记`b.disp();`为错误，因为这不是错误所在。错误发生在`return myref;`，这不是硬错误的原因是，通常很难确定对象的生命周期是否会在`return`. 在这种情况下，这很容易，并且一些编译器确实会尝试警告它。检查您的警告级别。

编辑：顺便说一句，使用gcc，警告默认启用，看起来像“警告：对局部变量'...'的引用返回”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:14:37.443

G++ 会适当地*警告*你，但它不应该出错，当然也不会出现在 at `b.disp();`，因为你实际上并没有在该行上使用返回值，而是在上面的行上*复制*了它。

```
: In member function ‘abc& abc::getRef()’:
:17: warning: reference to local variable ‘myref’ returned 
```

如果您的编译器没有对此发出警告，[请检查您的警告级别](http://msdn.microsoft.com/en-us/library/thxezb7y%28v=vs.90%29.aspx)。

还：

```
#include<conio.h> 
```

[这不适用于可移植代码。](http://en.wikipedia.org/wiki/Conio.h)