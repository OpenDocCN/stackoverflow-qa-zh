# StackOverflow 问答 10173000-10173999

# documentation - 减少 doxygen 文档中的文件数量

> ID：10173003
> 
> 赞同：3
> 
> 时间：2012-04-16T11:09:20.113
> 
> 标签：documentation, doxygen

有什么方法可以减少 doxygen 生成的文件数量（可能是通过组合其中一些）对于我的项目（启用类层次结构图的 c++ 项目），文档包含超过 86,000 个文件，这是文件系统 POV 的噩梦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:53:10.860

为避免文件系统问题，我建议在配置文件中设置`CREATE_SUBDIRS`为。`YES`这将使 doxygen 将输出文件均匀分布在 4096 个子目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:16:10.183

在不减少文档内容的情况下，我认为没有解决方案。你可以做什么：

*   禁用索引 (ALPHABETICAL_INDEX)
*   禁用所有 graphviz 生成的图（类图、文件依赖图）。这些会生成大量图像，但也会生成大量地图文件。

在我当前的一个项目中（比你的小......），“完整”的 doxygen 配置生成了 873 个文件（19.8 MB），而“减少的”配置生成了 873 个文件（19.8 MB）。生成 278 个文件 (3.4 MB)。这给了你一个想法。

哦，还有另一个想法：生成 pdf（通过 Latex）而不是 html。您将减少到 1 个文件；-)

# jdbc - jdbc 驱动程序 - 命名约定不可理解

> ID：10173004
> 
> 赞同：1
> 
> 时间：2012-04-16T11:09:31.767
> 
> 标签：jdbc

当我浏览链接时，我对 [http://en.wikipedia.org/wiki/JDBC_driver#Type_3_Driver_-_Network-Protocol_Driver的东西有了很好的了解](http://en.wikipedia.org/wiki/JDBC_driver#Type_3_Driver_-_Network-Protocol_Driver)

但看不懂粗体字：
Type 2 Driver - **Native-API** Driver 或者也叫 Partial Java Driver
Type 3 Driver - **Network-Protocol** Driver
Type 4 Driver - **Native-Protocol** Driver

请帮助我理解这些粗体字，它们向驱动程序指定的内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T11:19:04.453

这在[JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/gettingstarted.html#step3)中有很好的解释：

> JDBC 驱动程序有许多可能的实现。这些实现分类如下：
> 
> *   类型 1：将 JDBC API 实现为到另一个数据访问 API 的映射的驱动程序，例如 ODBC（开放式数据库连接）。这种类型的驱动程序通常依赖于本地库，这限制了它们的可移植性。JDBC-ODBC 桥是类型 1 驱动程序的一个示例。
> 
> 注意：JDBC-ODBC 桥应被视为一种过渡解决方案。Oracle 不支持它。仅当您的 DBMS 不提供纯 Java JDBC 驱动程序时才考虑使用它。
> 
> *   类型 2：部分使用 Java 编程语言和部分使用本机代码编写的驱动程序。这些驱动程序使用特定于它们连接到的数据源的本机客户端库。同样，由于本机代码，它们的可移植性受到限制。Oracle 的 OCI（Oracle 调用接口）客户端驱动程序是类型 2 驱动程序的一个示例。
>     
>     
> *   类型 3：使用纯 Java 客户端并使用独立于数据库的协议与中间件服务器通信的驱动程序。然后，中间件服务器将客户端的请求传递给数据源。
>     
>     
> *   类型 4：纯 Java 驱动程序并为特定数据源实现网络协议。客户端直接连接到数据源。

# objective-c - APNS 在收到通知时停止通知

> ID：10173008
> 
> 赞同：0
> 
> 时间：2012-04-16T11:09:36.727
> 
> 标签：objective-c, apple-push-notifications

我正在使用 APNS 开发聊天。

我的问题是是否可以拦截通知并停止它以便由应用程序中的应用程序处理：didReceiveRemoteNotification: 方法但不会在设备中引发任何弹出窗口？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:27:25.087

不，您不能，除非在特殊情况下（例如，推送通知用于 Newsstand 应用程序以通知他们新问题，但不显示弹出窗口）。

# c# - 在 C# 中将 DataSource 绑定到 DataGrid 后的表结构不正确

> ID：10173012
> 
> 赞同：0
> 
> 时间：2012-04-16T11:09:55.567
> 
> 标签：c#, asp.net, sql-server

当我在浏览器中看到生成的源时，我正在使用 .NET Studio 2003 和 Framework 1.1 将数据源绑定到任何 DataGrid 之后。它显示为这样

```
<table>
 <tr>
   <td>Abc</td>
   <td>Def</td>
   <td>Ghi</td>
 </tr>
 <tr>
   <td>Abc</td>
   <td>Def</td>
   <td>Ghi</td>
 </tr>
</table> 
```

但不是得到这个我想生成这样的代码（下）

```
<table>
 <thead> 
  <tr>
   <td>Abc</td>
   <td>Def</td>
   <td>Ghi</td>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>Abc</td>
   <td>Def</td>
   <td>Ghi</td>
  </tr>
 </tbody>
 </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:47:46.720

对于获得纯html结构的repeater是最好的选择。您可以使用如下转发器作为您的代码。

```
<asp:Repeater runat="server" ID="rptData">
    <HeaderTemplate>
        <table>
            <thead>
                <tr>
                    <td>
                        Abc
                    </td>
                    <td>
                        Def
                    </td>
                    <td>
                        Ghi
                    </td>
                </tr>
            </thead>

    </HeaderTemplate>
    <ItemTemplate>
        <tr>
            <td>
                Abc
            </td>
            <td>
                Def
            </td>
            <td>
                Ghi
            </td>
        </tr>
    </ItemTemplate>
    <FooterTemplate>
         </table>
    </FooterTemplate>
</asp:Repeater> 
```

希望这会帮助你......快乐的编码......

# android - 在 NativeActivity 恢复时重新初始化 OpenGL ES 2 窗口

> ID：10173013
> 
> 赞同：3
> 
> 时间：2012-04-16T11:10:04.980
> 
> 标签：android, android-ndk, opengl-es-2.0, android-ndk-r7

解决了！请参阅下面的更新。

我们正在将一个大型 C++ 应用程序移植到 Android，并且在暂停和恢复应用程序之前一切都运行良好。我们监听 APP_CMD_INIT_WINDOW 命令，当它出现时，我们重新初始化所有 egl 命令以获取表面、上下文和显示。在此之后屏幕是黑色的。但是，如果我们在它正常工作之后设置一个 glClearColor，这意味着我们至少有窗口并且可以绘制它。这使我们相信可能还有其他东西没有重新初始化。

我的问题是是否有缓冲区、着色器程序或其他缓存的东西需要在恢复后（或暂停前）清除和重新加载，以及测试的合适方法。我们怀疑这可能与我们的应用程序使用旧 EGL 上下文引用旧缓冲区有关，但我们无法知道。该应用程序使用大量纹理和屏幕外缓冲区。

* * *

更新：像往常一样，经过一周尝试不同的事情后，我们终于在创建帖子后解决了它。这是解决方案：

所有缓存的纹理、缓冲区和着色器都连接到 EGL 创建的上下文句柄。为了创建 GL 上下文，初始化了几件事，窗口表面就是其中之一。这是唯一依赖于 ANativeWindow 对象的对象，该对象在暂停和恢复应用程序时被销毁和重新创建。因此，这是唯一需要重新创建的。

简而言之：

在以新窗口对象作为参数的恢复之后再次运行 eglCreateWindowSurface。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T13:16:23.430

所有缓存的纹理、缓冲区和着色器都连接到 EGL 创建的上下文句柄。为了创建 GL 上下文，初始化了几件事，窗口表面就是其中之一。这是唯一依赖于 ANativeWindow 对象的对象，该对象在暂停和恢复应用程序时被销毁和重新创建。因此，这是唯一需要重新创建的。

简而言之：

在以新窗口对象作为参数的恢复之后再次运行 eglCreateWindowSurface。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-09T12:45:25.667

我必须同时调用 eglCreateWindowSurface 和 eglMakeCurrent，同时重用其他所有内容，并且它有效（android 4.2）

# tomcat - 在 solr 中声明多个实体时出错

> ID：10173016
> 
> 赞同：0
> 
> 时间：2012-04-16T11:10:09.917
> 
> 标签：tomcat, solr

我刚开始学习solr。我已经安装了 apache tomcat 服务器和 solr 3.5。我已成功配置 solr 以从 oracle 数据库中搜索一个实体的数据。当我在 data-config.xml 中添加两个实体并在 solr schema.xml 中添加字段时遇到问题。我像这样配置了我的 data-config.xml...

```
<dataConfig>
    <dataSource name="JdbcDataSource" 
        driver="oracle.jdbc.driver.OracleDriver"
        url="jdbc:oracle:thin:@//192.168.1.3:1521/orcl" 
        user="SSOHANI" 
        password="Ssohani123"/>

    <document name="doc">
        <entity name="PROJECTS" 
                query="select PROJECTS.ID, PROJECTS.BATCH_ID, PROJECTS.OPERATION, PROJECTS.NAME,
                PROJECTS.DESCRIPTION, PROJECTS.ESTIMATED_COST, PROJECTS.GRANTOR_AGENCY_ID,
                PROJECTS.GRANTEE_AGENCY_ID, PROJECTS.PROJECT_STATUS_ID,
                PROJECTS.PROJECT_TYPE_ID, PROJECTS.START_DATE, PROJECTS.END_DATE,
                NVL(PROJECTS.TRACS_PARENT_PROJECT_ID,0) TRACS_PARENT_PROJECT_ID,
                NVL(PROJECTS.STATE_PARENT_PROJECT_ID,0) STATE_PARENT_PROJECT_ID,
                NVL(PROJECTS.PLAN_ID,0) PLAN_ID,
                NVL(PROJECTS.PLAN_ID_TYPE,0) PLAN_ID_TYPE,
                NVL(PROJECTS.TRACS_ID,0) TRACS_ID,
                NVL(PROJECTS.STATE_ID,0) STATE_ID,
                PROJECTS.VALID, PROJECTS.APPLIED,
                NVL(PROJECTS.COMMENTS,'NULL') COMMENTS,
                PROJECTS.GENERATED_PLAN_ID, PROJECTS.TRACS_PROJECT_ID,
                PROJECTS.STATE_PLAN_ID from SSOHANI.PROJECTS" >

        <field column="ID" name="projects_id" />
        <field column="BATCH_ID" name="projects_batch_id" />
        <field column="OPERATION" name="projects_operation" />
        <field column="NAME" name="projects_name" />
        <field column="DESCRIPTION" name="projects_description" />
        <field column="ESTIMATED_COST" name="projects_estimated_cost" />
        <field column="GRANTOR_AGENCY_ID" name="projects_grantor_agency_id" />
        <field column="GRANTEE_AGENCY_ID" name="projects_grantee_agency_id" />
        <field column="PROJECT_STATUS_ID" name="projects_project_status_id" />
        <field column="PROJECT_TYPE_ID" name="projects_project_type_id" />
        <field column="START_DATE" name="projects_start_date" />
        <field column="END_DATE" name="projects_end_date" />
        <field column="TRACS_PARENT_PROJECT_ID" name="projects_tracs_parent_project_id" />
        <field column="STATE_PARENT_PROJECT_ID" name="projects_state_parent_project_id" />
        <field column="PLAN_ID" name="projects_plan_id" />
        <field column="PLAN_ID_TYPE" name="projects_plan_id_type" />
        <field column="TRACS_ID" name="projects_tracs_id" />
        <field column="STATE_ID" name="projects_state_id" />
        <field column="VALID" name="projects_valid" />
        <field column="APPLIED" name="projects_applied" />
        <field column="COMMENTS" name="projects_comments" />
        <field column="GENERATED_PLAN_ID" name="projects_generated_plan_id" />
        <field column="TRACS_PROJECT_ID" name="projects_tracs_project_id" />
        <field column="STATE_PLAN_ID" name="projects_state_plan_id" />

        </entity>

    <entity name="PLANS" 
          query="select PLANS.ID, PLANS.BATCH_ID, PLANS.OPERATION, PLANS.NAME, PLANS.DESCRIPTION,
               PLANS.CONTACT_ID, PLANS.PLAN_TYPE_ID, PLANS.AGENCY_ID, PLANS.START_DATE,
               NVL(PLANS.END_DATE,0) END_DATE,
               NVL(PLANS.TRACS_PARENT_PLAN_ID,0) TRACS_PARENT_PLAN_ID,
               NVL(PLANS.STATE_PARENT_PLAN_ID,0) STATE_PARENT_PLAN_ID,
               NVL(PLANS.TRACS_ID,0) TRACS_ID,
               NVL(PLANS.STATE_ID,0) STATE_ID,          
               PLANS.VALID, PLANS.APPLIED,
               NVL(PLANS.COMMENTS,'NULL') COMMENTS from SSOHANI.PLANS" >

        <field column="ID" name="plans_id" />
        <field column="BATCH_ID" name="plans_batch_id" />
        <field column="OPERATION" name="plans_operation" />
        <field column="NAME" name="plans_name" />
        <field column="DESCRIPTION" name="plans_description" />
        <field column="CONTACT_ID" name="plans_contact_id" />
        <field column="PLAN_TYPE_ID" name="plans_plan_type_id" />       
        <field column="AGENCY_ID" name="plans_agency_id" />
        <field column="START_DATE" name="plans_start_date" />
        <field column="END_DATE" name="plans_end_date" />
        <field column="TRACS_PARENT_PLAN_ID" name="plans_tracs_parent_plan_id" />
        <field column="STATE_PARENT_PLAN_ID" name="plans_state_parent_plan_id" />
        <field column="TRACS_ID" name="plans_tracs_id" />
        <field column="STATE_ID" name="plans_state_id" />
        <field column="VALID" name="plans_valid" />
        <field column="APPLIED" name="plans_applied" />
        <field column="COMMENTS" name="plans_comments" />       
    </entity>

</document>   
</dataConfig> 
```

我像这样配置了我的 schema.xml ......

```
<schema>
<fields>

        <field name="projects_id" type="long" indexed="true" stored="true" required="true"/>
        <field name="projects_batch_id" type="long" indexed="true" stored="true" required="true"/>
        <field name="projects_operation" type="string" indexed="true" stored="true" required="true"/>
        <field name="projects_name" type="string" indexed="true" stored="true" required="true"/>
        <field name="projects_description" type="string" indexed="true" stored="true" required="true"/>
        <field name="projects_estimated_cost" type="long" indexed="true" stored="true" required="true"/>
        <field name="projects_grantor_agency_id" type="long" indexed="true" stored="true" required="true"/>
        <field name="projects_grantee_agency_id" type="long" indexed="true" stored="true" required="true"/>
        <field name="projects_project_status_id" type="long" indexed="true" stored="true" required="true"/>
        <field name="projects_project_type_id" type="long" indexed="true" stored="true" required="true"/>
        <field name="projects_start_date" type="date" indexed="true" stored="true" required="true"/>
        <field name="projects_end_date" type="date" indexed="true" stored="true" required="true"/>      
        <field name="projects_tracs_parent_project_id" type="long" indexed="true" stored="true" required="true"/>       
        <field name="projects_state_parent_project_id" type="long" indexed="true" stored="true" required="true"/>
        <field name="projects_plan_id" type="long" indexed="true" stored="true" required="true"/>
        <field name="projects_plan_id_type" type="long" indexed="true" stored="true" required="true"/>
        <field name="projects_tracs_id" type="long" indexed="true" stored="true" required="true"/>
        <field name="projects_state_id" type="long" indexed="true" stored="true" required="true"/>      
        <field name="projects_valid" type="string" indexed="true" stored="true" required="true"/>
        <field name="projects_applied" type="string" indexed="true" stored="true" required="true"/>
        <field name="projects_comments" type="string" indexed="true" stored="true" required="true"/>
        <field name="projects_generated_plan_id" type="long" indexed="true" stored="true" required="true"/>
        <field name="projects_tracs_project_id" type="long" indexed="true" stored="true" required="true"/>
        <field name="projects_state_plan_id" type="long" indexed="true" stored="true" required="true"/>

                <!--         fields for plan enity -->

        <field name="plans_id" type="long" indexed="true" stored="true" required="true"/>
        <field name="plans_batch_id" type="long" indexed="true" stored="true" required="true"/>
        <field name="plans_operation" type="string" indexed="true" stored="true" required="true"/>
        <field name="plans_name" type="string" indexed="true" stored="true" required="true"/>
        <field name="plans_description" type="string" indexed="true" stored="true" required="true"/>
        <field name="plans_contact_id" type="long" indexed="true" stored="true" required="true"/>
        <field name="plans_plan_type_id" type="long" indexed="true" stored="true" required="true"/>
        <field name="plans_agency_id" type="long" indexed="true" stored="true" required="true"/>
        <field name="plans_start_date" type="date" indexed="true" stored="true" required="true"/>
        <field name="plans_end_date" type="date" indexed="true" stored="true" required="true"/>
        <field name="plans_tracs_parent_plan_id" type="long" indexed="true" stored="true" required="true"/>
        <field name="plans_state_parent_plan_id" type="string" indexed="true" stored="true" required="true"/>       
        <field name="plans_tracs_id" type="long" indexed="true" stored="true" required="true"/>     
        <field name="plans_state_id" type="long" indexed="true" stored="true" required="true"/>
        <field name="plans_valid" type="string" indexed="true" stored="true" required="true"/>
        <field name="plans_applied" type="string" indexed="true" stored="true" required="true"/>
        <field name="plans_comments" type="string" indexed="true" stored="true" required="true"/>

    </fields>

    <uniqueKey>projects_id</uniqueKey>
    <uniqueKey>plans_id</uniqueKey>
    <defaultSearchField>projects_id</defaultSearchField>
</schema> 
```

我的 solrconfig.xml 是...

```
<requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
      <lst name="defaults">
          <str name="config">/opt/solr/core0/conf/data-config.xml</str>
      </lst>
  </requestHandler> 
```

现在，当我运行完全导入命令时，出现以下错误..

```
Apr 16, 2012 4:11:46 PM org.apache.solr.handler.dataimport.SolrWriter upload
WARNING: Error creating document : SolrInputDocument[{projects_tracs_id=projects_tracs_id(1.0)={0}, projects_name=projects_name(1.0)={Minnesota Firearms Safety Training Program}, projects_description=projects_description(1.0)={To train 17,500 students and 425 new instructors at 45 recruiting workshops. Hold one statwide training academy. Award 2,650 recognition awards for length of service.}, projects_comments=projects_comments(1.0)={NULL}, projects_plan_id=projects_plan_id(1.0)={0}, projects_end_date=projects_end_date(1.0)={2002-12-31 00:00:00.0}, projects_tracs_parent_project_id=projects_tracs_parent_project_id(1.0)={0}, projects_plan_id_type=projects_plan_id_type(1.0)={0}, projects_project_status_id=projects_project_status_id(1.0)={4}, projects_state_plan_id=projects_state_plan_id(1.0)={1126}, projects_estimated_cost=projects_estimated_cost(1.0)={600000}, projects_valid=projects_valid(1.0)={N}, projects_grantor_agency_id=projects_grantor_agency_id(1.0)={1154}, projects_start_date=projects_start_date(1.0)={2001-12-31 00:00:00.0}, projects_applied=projects_applied(1.0)={N}, projects_state_id=projects_state_id(1.0)={0}, projects_batch_id=projects_batch_id(1.0)={1433468017}, projects_generated_plan_id=projects_generated_plan_id(1.0)={2050667163}, projects_id=projects_id(1.0)={2009553709}, projects_operation=projects_operation(1.0)={INSERT}, projects_state_parent_project_id=projects_state_parent_project_id(1.0)={0}, projects_grantee_agency_id=projects_grantee_agency_id(1.0)={1235}, projects_tracs_project_id=projects_tracs_project_id(1.0)={1123}, projects_project_type_id=projects_project_type_id(1.0)={3}}]
org.apache.solr.common.SolrException: [doc=2009553709] missing required field: plans_applied
    at org.apache.solr.update.DocumentBuilder.toDocument(DocumentBuilder.java:346)
    at org.apache.solr.update.processor.RunUpdateProcessor.processAdd(RunUpdateProcessorFactory.java:60)
    at org.apache.solr.update.processor.LogUpdateProcessor.processAdd(LogUpdateProcessorFactory.java:115)
    at org.apache.solr.handler.dataimport.SolrWriter.upload(SolrWriter.java:73)
    at org.apache.solr.handler.dataimport.DataImportHandler$1.upload(DataImportHandler.java:293)
    at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:636)
    at org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:268)
    at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:187)
    at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:359)
    at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:427)
    at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:408) 
```

solr 无法读取第二个实体的任何字段。谁能帮我解决这个问题..？请告诉我在配置 data-config.xml 或 schema.xml 或这两个文件时我犯了什么错误..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:00:08.750

尽管从堆栈跟踪看起来您的一个计划文档在必需的计划应用字段中缺少值，但我认为您需要注意的第一件事是数据不应该在 Solr 中进行规范化。它应该在进入索引之前被展平。

因此，您应该在这两个表之间创建一个连接（直接在 data-config.xml 中，而不是您的查询），而不是将这两个表作为单独的实体进行索引，以便每个结果（连接的）表行成为一个 Solr 文档。

这样，当您想要获取有关单个项目的所有数据时，它们都将位于一个文档中 - 这种用例无需连接。

在 Solr 中，您应该接受冗余，而不是关系和约束。

说得通？

# c# - JSON RPC 格式化

> ID：10173027
> 
> 赞同：0
> 
> 时间：2012-04-16T11:10:47.080
> 
> 标签：c#, json, json-rpc

在我的项目中，我必须向 oracle 服务器发送一个非常具体的 JSON 请求以接收响应；目前我正在发送 json 字符串：

`{\"id\":\"1\",\"method\":\"getOverviewInfo\",\"Params\":{\"overviewID\":\"0000004297\",\"overviewType\":\"Stock Items\",\"AORParams\":null,\"arrOptions\":{\"columnInfo\":\"1;100;1;1#\",\"orderInfo\":\"1;0;0#\"}}}"` 来自这个班级：

```
public class SendOverview    {              

public string id   { get; set;}
                public string method { get; set;}
                public SendOV Params {get; set;}
    }

 public class SendOV    {               

public string overviewID { get; set; }
        public string overviewType { get; set; }
        public string AORParams { get; set; }
        public SentDatas arrOptions { get; set; }

    }   

public class SentDatas    {       

public string columnInfo { get; set; }
        public string orderInfo { get; set; }
    } 
```

现在我的问题是，我是否可以调整请求字符串以从 Params 数组中删除成员名称，而不是 "overviewID" = "xxxx","overviewType" = "xxxx".......

它应该是“xxxx”、“xxxx”

编辑格式：

```
{
    "id": "1",
    "method": "getOverviewInfo",
    "Params": {
        "0000004297",
        "Stock Items",
        null,
        {
            "columnInfo": "1;100;1;1#",
            "orderInfo": "1;0;0#"
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:44:43.773

是的，你可以做类似的事情，如果你这样做，你需要用数组 [] 替换对象 {} 作为参数的值。

喜欢：

```
{
    "id": "1",
    "method": "getOverviewInfo",
    "Params": [
        "0000004297",
        "Stock Items",
        null,
        {
            "columnInfo": "1;100;1;1#",
            "orderInfo": "1;0;0#"
        }
    ]
} 
```

我假设您想要这样做的原因是传输大小。您发送到的端点仍然需要知道如何读取该请求，如果它支持上述位置参数，您将需要确保它们以正确的顺序定位并保持不变。

# android - 最省电的位置跟踪实施？Intent/BroadcastReceiver/LocationListener/Service/IntentService/AlarmManager？

> ID：10173029
> 
> 赞同：3
> 
> 时间：2012-04-16T11:10:52.523
> 
> 标签：android, android-intent, alarmmanager, intentservice, locationlistener

我已经通过解决方案，发现有很多方法可以实现位置跟踪逻辑。

1.  Intent+BroadcastReceiver+LocationListener
2.  Intent+IntentService+AlarmManager
3.  位置监听器
4.  其他技术或上述的不同组合......

我正在尝试找出实现相同目标的最佳实践（最省电的方式）...

我有一个库类 MyLocationClass.java，它有两种方法 1\. startTracking() - 在 T 时间之后开始发送用户位置，并且仅当用户移动了 X 距离 2\. stopTracking() - 停止发送位置更新。

一个简单的答案似乎是 LocationListener，因为它内置的 Time Passed/Distance Moved 功能提供了更好的用户体验，但随后......

我不希望 GPS 一直处于开启状态？事实上，它应该只在 T 和 X 交叉时打开。使用 Service/IntentService 和/或/与警报管理器 Timer 会是更好的解决方案吗？带有 LocationListeners 的广播接收器能否被证明是更好的解决方案？

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:23:26.170

我认为，您可以使用在服务中实现的位置侦听器。服务启动时开始监听 GPS，服务停止时移除 GPS 监听器。当您想收听 GPS 时启动此服务。

另请查看“requestLocationUpdates”方法。该函数的 minTime 和 minDistance 字段解释如下：

minTime 通知的最小时间间隔，以毫秒为单位。此字段仅用作节省电量的提示，位置更新之间的实际时间可能大于或小于此值。

minDistance 通知的最小距离间隔，以米为单位

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:22:09.130

```
 > Most power efficient location tracking implementation? 
```

最省电（且不准确）的解决方案是**根本不使用 gps**，因为 gps 接收器（至少在我的三星智能手机上）会显着增加功耗。

如果您的 android 应用程序在登录到其手机提供商的手机上运行，​​则会有**手机 cellid-broadcasts**告诉手机手机位置已更改。您的应用程序可以接收这些。也。

手机接收器已经在运行，手机必须唤醒以保持连接，因此能量开销最小。

但是，您必须找到一种方法将 cell-id 转换回某个位置。

android 应用程序[llama](https://market.android.com/details?id=com.kebab.Llama)使用这个 cellid-broadcast 来触发基于位置的操作。它有一个学习模式，我可以说：“现在我在工作 7 个小时。在后台它收集所有 cellid-s 并将这些标记为“工作”。

# android - 在android中获取自己的手机号码

> ID：10173030
> 
> 赞同：1
> 
> 时间：2012-04-16T11:10:52.907
> 
> 标签：android

假设我的电话号码是 9-112-345-678，我尝试给定代码

```
TelephonyManager mTelephonyMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
String phoneNo = mTelephonyMgr.getLine1Number(); 
```

但是当我在 samsung fit 2.2.1 OS 中安装相同的应用程序时它没有给出任何输出

我也给予了必要的许可

```
uses-permission android:name="android.permission.READ_PHONE_STATE" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:13:35.990

这取决于 SIM 卡。如果您的 SIM 卡包含它，则**getLine1Number**将返回您，否则为*空*。您可以通过以下方式验证这一点：

> 设置->关于手机->状态->我的电话号码

另一方面，拿起任何旧的诺基亚/索尼爱立信手机，将您的 SIM 卡放入其中，然后浏览到插入/编辑您的 SIM 卡号码的选项。我知道，我必须这样做才能用我的电话号码解决这个问题。

# c# - setup部署：如何授予C：目录应用程序文件夹数据库的权限？

> ID：10173035
> 
> 赞同：0
> 
> 时间：2012-04-16T11:11:13.083
> 
> 标签：c#, database, visual-studio-2010, permissions, setup-deployment

我在 C# .Net 中做了一个小应用程序，它使用 Access 数据库。该应用程序已完成，但是当我尝试通过 install Shield 安装它时遇到了一个小问题。我做了一些研究，问题似乎是权限。数据库很短，位于 app 文件夹（C:Programs/app 文件夹）中。在我的电脑上，我安装并成功运行它，因为我是系统的管理员，但是当我在其他电脑上安装它时，应用程序可以读取数据库中的数据，但它不能插入数据。

我的问题是：我如何授予在数据库上写入数据库的权限，将数据库保存在应用程序目录中？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:16:13.470

使用`cacls`or`xcacls`工具授予对 mdb 文件的写入权限并在目录上创建文件。

# drupal - Drupal 7 - 搜索自

> ID：10173040
> 
> 赞同：0
> 
> 时间：2012-04-16T11:11:30.160
> 
> 标签：drupal, drupal-7, drupal-views, recipe

我在我的 Drupal 7 站点中使用配方模块。每个食谱都包含成分列表。现在我知道如何创建一个视图来搜索包含配料的食谱。我通过在 Drupal 视图中使用过滤器来做到这一点。同样，我需要从结果中省略一些成分。我的意思是从搜索结果中排除列出的成分。这可以在drupal视图中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:14:11.330

如果成分是词汇表中的术语，您可以确定可以在暴露的过滤器中搜索的成分列表。

# php - 基于消息 UID 的 PHP imap_search

> ID：10173041
> 
> 赞同：2
> 
> 时间：2012-04-16T11:11:35.410
> 
> 标签：php, email, imap

有没有办法使用 imap_search 函数在 IMAP 服务器上搜索邮件。根据 php 手册，imap_search 只允许有限数量的搜索选项，并且通过 UID 搜索不在它们之间： [http ://us.php.net/manual/en/function.imap-search.php](http://us.php.net/manual/en/function.imap-search.php)

那么，有没有办法根据 UID（高于提供的 UID）获取消息。自 IMAP4 协议修订版（我认为自 2003 年以来）以来，这应该得到支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:34:59.063

我相信你已经经过广泛的搜索，最终来到了这里。让我们面对它，这是不可能的；但该功能可能有解决方法。

也许你可以使用类似这样的代码：

```
$imap_stream = imap_open($mailbox, $username, $password);
$msg_no = 1212; //lets say momentarily
while(imap_fetchheader($imap_stream, $msg_no)){
    //do some processing
    $msg_no++;
}// loop will continue till there is no more of newer messages 
```

请注意，这可能会导致最大执行时间，因此您可以使用 for 循环来执行具有特定迭代次数的工作。

```
$imap_stream = imap_open($mailbox, $username, $password);
$msg_no = 1212; //lets say
for($i=0;$i<=50;$i++){
if(imap_fetchheader($imap_stream, $msg_no)){
    //do some processing
}
$msg_no++;
} // this will go for 50 times 
```

# facebook - 按更新时间过滤 Facebook 用户个人资料提要

> ID：10173044
> 
> 赞同：1
> 
> 时间：2012-04-16T11:11:53.263
> 
> 标签：facebook, facebook-graph-api

再会！

我正在使用 Facebook 图形 API 来检索 Facebook 用户个人资料提要（墙）信息。我的查询将是： [https](https://graph.facebook.com/USER_ID/feed?access_token=ACCESS_TOKEN_OF_MY_FB_APPLICATION) ://graph.facebook.com/USER_ID/feed?access_token= ACCESS_TOKEN_OF_MY_FB_APPLICATION 通过这个，我能够使用 created_time 和 updated_time 检索用户墙信息。

我从[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)发现，我们可以通过 created_time 使用**since**和**until**参数过滤信息。

有什么方法可以通过updated_time过滤用户个人资料信息？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:11:46.897

可以使用[FQL](https://developers.facebook.com/docs/reference/fql/)。

例如，修改Facebook Developers 网站上[的示例](https://developers.facebook.com/docs/reference/fql/stream/)，您可以检索当前用户在 2009 年 12 月 30 日之前更新的她的墙/提要中的帖子，如下所示：

```
SELECT post_id, actor_id, target_id, message FROM stream WHERE source_id = me() 
AND updated_time < 1262196000 LIMIT 50 
```

据我所知，您无法使用 Graph API 按 updated_time 进行过滤。

# php - MySQL 如何在没有 PHP 循环的情况下显示人们的后代

> ID：10173050
> 
> 赞同：2
> 
> 时间：2012-04-16T11:12:34.797
> 
> 标签：php, mysql, loops

我有一个这样的 MySQL 表：

```
mysql> SELECT ID, Username, Parent, LeftNum, RightNum FROM usercopy;

+----+------------+----------+---------+----------+
| ID | Username   | Parent   | LeftNum | RightNum |
+----+------------+----------+---------+----------+
|  1 | root       |          |       1 |       92 |
|  2 | robson     | perta    |      62 |       89 |
|  3 | budi       | root     |       2 |       35 |
|  4 | bejo       | root     |      36 |       47 |
|  5 | ben        | puff     |      13 |       24 |
|  6 | boll       | root     |      48 |       91 |
|  7 | charlie    | robson   |      63 |       80 |
|  8 | charles    | robson   |      81 |       88 |
|  9 | doni       | budi     |       3 |       28 |
| 10 | dono       | budi     |      29 |       34 |
| 11 | donatello  | bejo     |      37 |       38 |
| 12 | donat      | bejo     |      39 |       42 |
| 13 | tello      | bejo     |      43 |       46 |
| 14 | pras       | ben      |      14 |       15 |
| 15 | prasetyo   | ben      |      16 |       21 |
| 16 | pram       | ben      |      22 |       23 |
| 17 | jeni       | boll     |      49 |       58 |
| 18 | cocala     | boll     |      59 |       60 |
| 19 | perta      | boll     |      61 |       90 |
| 20 | joko       | charlie  |      64 |       65 |
| 21 | aditya     | charlie  |      66 |       79 |
| 22 | mogot      | aditya   |      67 |       70 |
| 23 | arya       | aditya   |      71 |       78 |
| 24 | saiful     | mogot    |      68 |       69 |
| 25 | nur        | arya     |      72 |       77 |
| 26 | herlambang | nur      |      73 |       74 |
| 27 | barney     | nur      |      75 |       76 |
| 28 | conan      | charles  |      82 |       85 |
| 29 | john       | charles  |      86 |       87 |
| 30 | mark       | conan    |      83 |       84 |
| 31 | mike       | doni     |       4 |       11 |
| 32 | puff       | doni     |      12 |       25 |
| 33 | karti      | doni     |      26 |       27 |
| 34 | sukarto    | mike     |       5 |        6 |
| 35 | harto      | mike     |       7 |        8 |
| 36 | tien       | mike     |       9 |       10 |
| 37 | tono       | dono     |      30 |       31 |
| 38 | thomas     | dono     |      32 |       33 |
| 39 | dunkin     | donat    |      40 |       41 |
| 40 | jentol     | tello    |      44 |       45 |
| 41 | henri      | prasetyo |      17 |       18 |
| 42 | yani       | prasetyo |      19 |       20 |
| 43 | juli       | jeni     |      50 |       51 |
| 44 | rio        | jeni     |      52 |       53 |
| 45 | luke       | jeni     |      54 |       55 |
| 46 | harry      | jeni     |      56 |       57 |
+----+------------+----------+---------+----------+ 
```

一组 46 行（0.00 秒）

我现在正在做的是根据他/她的父母使用 PHP LOOP 向小组成员展示，我非常讨厌它。但是，我不知道如何加入/组合这个 MySQL 表，以便通过单个 SQL 命令创建输出。

这是我使用 PHP 所做的，例如我的用户名是 'robson' ：

```
1\. `SHOW any users with parent name = robson` 

mysql> SELECT ID, Username, Parent, LeftNum, RightNum FROM usercopy WHERE Parent = 'robson';

+----+----------+--------+---------+----------+
| ID | Username | Parent | LeftNum | RightNum |
+----+----------+--------+---------+----------+
|  7 | charlie  | robson |      63 |       80 |
|  8 | charles  | robson |      81 |       88 |
+----+----------+--------+---------+----------+ 
```

2 行（0.00 秒）

```
 2\. `SHOW Charlie's descendent` 

mysql> select ID, Username, Parent, LeftNum, RightNum from usercopy where LeftNum BETWEEN 63 AND 80;

+----+------------+---------+---------+----------+
| ID | Username   | Parent  | LeftNum | RightNum |
+----+------------+---------+---------+----------+
|  7 | charlie    | robson  |      63 |       80 |
| 20 | joko       | charlie |      64 |       65 |
| 21 | aditya     | charlie |      66 |       79 |
| 22 | mogot      | aditya  |      67 |       70 |
| 23 | arya       | aditya  |      71 |       78 |
| 24 | saiful     | mogot   |      68 |       69 |
| 25 | nur        | arya    |      72 |       77 |
| 26 | herlambang | nur     |      73 |       74 |
| 27 | barney     | nur     |      75 |       76 |
+----+------------+---------+---------+----------+ 
```

一组 9 行（0.00 秒）

```
3\. LOOP Step 2 to SHOW Charles's descendent

mysql> select ID, Username, Parent, LeftNum, RightNum from usercopy where LeftNum BETWEEN 81 AND 88;

+----+----------+---------+---------+----------+
| ID | Username | Parent  | LeftNum | RightNum |
+----+----------+---------+---------+----------+
|  8 | charles  | robson  |      81 |       88 |
| 28 | conan    | charles |      82 |       85 |
| 29 | john     | charles |      86 |       87 |
| 30 | mark     | conan   |      83 |       84 |
+----+----------+---------+---------+----------+ 
```

4 行一组（0.00 秒）

现在的问题是如何使用单个 SQL 命令执行 STEP 2、STEP 3、...、STEP X（基于步骤 1 的多少后代）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:17:49.417

我认为你需要一个递归查询，mysql 不支持。解决方法是使用不同的结构来存储层次结构或模拟您在 php 中所做的事情的存储过程。

[Bill Karwin 在他关于MySQL 反模式](http://www.slideshare.net/billkarwin/sql-antipatterns-strike-back)的演讲中谈到了这种结构，这对于进一步研究来说非常有趣。

# eclipse - 如何检测对 Eclipse 类路径容器内容的更改？

> ID：10173053
> 
> 赞同：1
> 
> 时间：2012-04-16T11:13:28.550
> 
> 标签：eclipse, eclipse-plugin

我正在开发一个 Eclipse 插件，该插件需要响应项目类路径中的更改（使缓存条目无效）。特别是，我正在寻找一种方法来检测类路径容器中包含的资源的更改，例如 m2eclipse 容器中的 jar 在“Maven -> Update Dependencies”操作之后发生更改。

像这样的更改似乎不会引发任何事件（我正在监听 ElementChangedEvent 和 ResourceEvent）。当从容器中添加/删除元素时，我会看到事件，但不会在底层资源发生变化时看到。

有谁知道是否有可能检测到这种变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-02T20:44:13.540

康斯坦丁的回答基本正确，但不完整。这是一个更完整的答案。

1) 您注册一个 IJavaElementChangeListene 并监听“POST_CHANGE_EVENTS”。（见康斯坦丁的例子）。

2) 当您收到更改事件时，您将增量向下移动到 IJavaProject 级别并查找设置了标志 IJavaElementDelta.F_CLASSPATH_CHANGED 或 IJavaElementDelta.F_RESOLVED_CLASSPATH_CHANGED 的事件。如在此代码段中：

```
class MyListener implements IElementChangedListener {

    @Override
    public void elementChanged(ElementChangedEvent event) {
        visit(event.getDelta());
    }

    private void visit(IJavaElementDelta delta) {
        IJavaElement el = delta.getElement();
        switch (el.getElementType()) {
        case IJavaElement.JAVA_MODEL:
            visitChildren(delta);
            break;
        case IJavaElement.JAVA_PROJECT:
            if (isClasspathChanged(delta.getFlags())) {
                notifyClasspathChanged((IJavaProject)el);
            }
            break;
        default:
            break;
        }
    }

    private boolean isClasspathChanged(int flags) {
        return 0!= (flags & (
                IJavaElementDelta.F_CLASSPATH_CHANGED | 
                IJavaElementDelta.F_RESOLVED_CLASSPATH_CHANGED
        ));
    }

    public void visitChildren(IJavaElementDelta delta) {
        for (IJavaElementDelta c : delta.getAffectedChildren()) {
            visit(c);
        }
    }
} 
```

摘录此摘录的完整代码在[这里](https://github.com/spring-projects/spring-ide/blob/6ddd5faa9259bdf0098adb7b1c79dcae6efc21a0/plugins/org.springframework.ide.eclipse.properties.editor/src/org/springframework/ide/eclipse/propertiesfileeditor/util/ClasspathListenerManager.java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T17:17:23.520

您要做的是监听 Java 模型的变化。您将看到所有事件。然后就是过滤掉你不想做出反应的事情。这样的事情应该让你开始......

```
IElementChangedListener listener = new IElementChangedListener()
{
    public void elementChanged( final ElementChangedEvent event )
    {
        ...
    }
};

JavaCore.addElementChangedListener( listener, ElementChangedEvent.POST_CHANGE ); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T11:53:34.633

项目的类路径在项目中保存为简单的`IFile`-- `.classpath`。因此，您*应该*通过侦听此资源上的更改事件来获取更改。它始终存在于基于 Java 的项目中。

# image - 在 WP 中查找图像的属性

> ID：10173054
> 
> 赞同：0
> 
> 时间：2012-04-16T11:13:32.043
> 
> 标签：image, wordpress, post

当通过媒体上传器将图像插入到 wordpress 帖子中时，有没有办法知道该图像的所有属性，就像 wp`global $post`显示它所在帖子的所有属性一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:30:21.040

不确定这是否是您的意思，但 WP 附件（无论是图像还是任何其他类型的上传媒体）都被视为帖子。因此，您可以运行`get_posts`以获取与您的条件匹配的附件对象数组。然后使用`foreach`循环显示这些对象所需的任何数据，例如：

```
$args = array(
    'post_type' => 'attachment',
);
$attachments = get_posts($args);
if ($attachments) {
    foreach ($attachments as $attachment) {
         echo apply_filters('the_title', $attachment->post_title);
         the_attachment_link($attachment->ID, false);
    }
} 
```

您还可以使用 WP_Query 类的任何其他参数在 get_posts 中构建您的查询并缩小您所追求的附件 - 您需要将附件指定为帖子类型

您要查看的资源：

[http://codex.wordpress.org/Template_Tags/get_posts](http://codex.wordpress.org/Template_Tags/get_posts)

[http://codex.wordpress.org/Function_Reference/the_attachment_link](http://codex.wordpress.org/Function_Reference/the_attachment_link)（也可以看看底部的相关函数）

# sql - 从 id 的 ruby 的查询数组中获取值

> ID：10173057
> 
> 赞同：0
> 
> 时间：2012-04-16T11:13:39.570
> 
> 标签：sql, ruby-on-rails, arrays, iteration

我一直在搜寻，寻找答案，并迅速杀死了 3 个小时。

我正在查询以从数据库中获取某些 user_id。（我这样做是为了将结果保存在一个变量中，以便稍后在请求中使用）

```
sql = <<-SQL
    SELECT users.id FROM users WHERE users.active = 't' and (users.created_by = #{user_id} OR users.id = #{user_id})
SQL
connection.execute(sql) 
```

然后我有一个ID数组。所以我现在尝试迭代这些以查看特定 ID 是否在此数组中。

变量

```
raise @editable_users_list.to_yaml 
```

结果

```
- !binary "aWQ=": 7
  0: 7
- !binary "aWQ=": 8
  0: 8
- !binary "aWQ=": 10
  0: 10 
```

我绝望地尝试提取正确的结果

```
def can_edit_user?
      if logged_in?
        @editable_users_list.each do |user|
          raise user.to_s
          if user[:id].to_s == current_user[:id].to_s
            return true
          end
        end
      end
      return false
    end 
```

上面的 raise 异常表明我的查询实际上是一个数组数组

```
{"id"=>7, 0=>7} 
```

现在我一直在玩[这里](http://www.ruby-doc.org/core-1.9.3/Enumerable.html)提到的很多东西，然后就放弃了。

对此的任何和所有帮助......非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:42:20.313

答案如下，这是因为 SQL 返回了一个哈希值。完全不知道为什么。如果有人愿意告诉我上述查询，我​​的和 Vik 的都返回这个，那将是巨大的 :)。虽然我跑题了。

它的工作原理是像这样循环遍历两个哈希

```
def can_edit_user?(user_id)
  if logged_in?
    @editable_users_list.each do |user|
      user.each do |id,value|
        if value == user_id
          return true
        end
      end
    end
  end
  return false
end 
```

我不确定这是否应该这样做，或者这是否是“SQL 连接”问题的解决方法。

无论如何，上面的代码做了我想做的事情，只是不是最优的（地狱，也许整个代码都不是最优的......）

再次为 Vik 抽出时间干杯，您对上述内容的想法仍然很棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:19:48.710

如果您只想获取用户的 id，那么只需执行以下操作：

```
@editable_users_list.map!(&:id) 
```

并检查它：

```
return @editable_users_list.include? @editable_users_list 
```

**编辑**：

```
sql = <<-SQL
    SELECT users.id FROM users WHERE users.active = 't' and (users.created_by = #{user_id} OR users.id = #{user_id})
SQL
@editable_users_list = connection.execute(sql)

@editable_users_list = @editable_users_list.map!(&:id) 
```

# msbuild - 运行时创建的目录中的 MSBuild 输出与我的构建标签版本号相同

> ID：10173059
> 
> 赞同：0
> 
> 时间：2012-04-16T11:13:47.007
> 
> 标签：msbuild, cruisecontrol

我正在使用 Cruisecontrol 进行持续集成。

我从 TFS 获取代码，并使用内置标签器“assemblyversionlabeller”的 CruiseControl，然后使用 msbuild 构建代码。

现在我的要求是我想将构建输出带到与我的构建标签相同的运行时创建目录。我的贴标机如下：

```
<major>1</major>
<minor>0</minor>
<build></build>
<revison><revision> 
```

输出目录应该是这样的；

f:\Builds[版本号]\Debug（此文件夹包含调试版本）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:06:20.213

那这个呢？

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <Major>1</Major>
        <Minor>0</Minor>
        <Build></Build>
        <Revision></Revision>
    </PropertyGroup>           
    <Target Name="CreateDirectories">
        <MakeDir Directories="f:\builds$(Major).$(Minor).$(Build).$(Revision)\Debug"/>
    </Target>

</Project> 
```

# javascript - javascript：移动图像

> ID：10173060
> 
> 赞同：1
> 
> 时间：2012-04-16T11:13:52.800
> 
> 标签：javascript

**为将来想阅读此内容的人编辑此页面：P**

似乎我在这里要求太多了..但是非常感谢那些帮助我解决这个问题的人！其实我想接受你所有的答案，但似乎我只能接受一个..>。>

**问题 1：**
我想移动图像，但是当我尝试获取图像位置（使用）时，当我将其转换为整数时`document.getElementById().style.left`，它会显示一个*NaN 值。*我想知道如何解决这个问题：/

这是我的代码：

```
<script type="text/javascript">

    function playit()
    {
        alert(parseInt(document.getElementById('ball').style.left)); <!-- shows a NaN value -->
    }
</script> 
```

我将图像放入表格并使用 onclick 函数调用它；`<td id="frame" colspan="5" onclick="playit()">`确切地说，我像这样声明了图像：`<img src="play/ball.png" id="ball" name="ball"/>`

这是我的图片CSS：

```
#ball
{
    position:absolute;
    top:500px;
    left:500px; 
} 
```

**解决方案（由[VIPIN JAIN](https://stackoverflow.com/users/1128293/vipin-jain)给出）：**使用`.offsetLeft`而不是`element.style.left`

**问题2：**
**编辑：** 我修复了它，`.offsetLeft`它工作得很好。现在，当我试图移动图像时，我又遇到了另一个错误。据说我使用*了太多递归*。我知道这是因为我正在使用递归，但我想知道，使用递归有什么问题？

这是我的代码：

```
<script type="text/javascript">

    <script type="text/javascript">

    var lball = document.getElementById('ball').offsetLeft;
    var speed = 500;

    function moveleft()
    {
        if(document.getElementById('ball').offsetLeft >0)
        {
            document.getElementById('ball').offsetLeft-=1;

            setTimeout(moveleft(), speed);
        }
        else gameover();
    }
    function playit()
    {
        score = 0;
        setTimeout(moveleft(), speed);
    }
</script> 
```

有人可以帮我弄这个吗？谢谢 :)

**解决方案（由[Teemu](https://stackoverflow.com/users/1169519/teemu)提供）：** *请参阅以下[Teemu](https://stackoverflow.com/a/10173310/1334588)关于“**编辑 II** ”部分的评论。*

**问题 3（实际上我在评论中问它：P）**
当我尝试使用 设置图像位置时`document.getElementById('ball').offsetLeft-=1;`，它显示一个*未定义的值*。

**解决方案（由[Kemal Fadillah](https://stackoverflow.com/users/732470/kemal-fadillah)给出）：** “那是因为你不能设置`offsetLeft`元素的值。你必须将新的位置值设置为`.style.left`。像这样的东西：`element.style.left = new_value + "px";`”

**问题 4（再次，我在评论中问它：P）**
似乎*图像不会顺利移动*（看起来它突然“扭曲”到另一个地方）。我已经提高了`speed`价值，但它仍然无法正常工作。我错过了什么吗？我想知道.. :/

**SOLUTION（由[Kemal Fadillah](https://stackoverflow.com/users/732470/kemal-fadillah)给出）：** “设置`speed`为 10 或 20。这应该使动画足够平滑。为了使图像移动得更快，而不是将左侧偏移减少 1，尝试将其减少3."

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:17:00.230

你应该使用 jQuery，它更容易。尝试类似的东西

```
$(function(){
$("img#ball").offset({top: 10px, left: 500px});
}); 
```

更多信息可以在这里找到：

[http://api.jquery.com/offset/](http://api.jquery.com/offset/)

可以在此处找到有关 jQuery 的一般信息：

[http://jquery.com/](http://jquery.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:17:09.667

这个要求`offsetLeft`和`offsetTop`值请参考链接

[这个帖子](https://stackoverflow.com/a/288708/1128293)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T11:34:12.533

`document.getElementById('ball').style.left`返回`''`（或`undefined`），如果您在检索之前没有设置属性。这就是为什么你`NaN`从`parseInt()`.

**编辑：**

似乎你的风格定义是好的（在你编辑你的帖子之后）。您可以尝试使用以下基数`parseInt()`：

```
alert(parseInt(document.getElementById('ball').style.left,10)); 
```

这被记录为不是倾斜的，但有时使用它会有所帮助。

**编辑二**

发生这种情况，因为您执行 all `setTimeout`s 两次，而您没有清除它们。试试这种方式：

```
var delay;

function moveLeft(){
  :
  if(delay){ // Add this if before all of your setTimeout() calls and in gameover() too
    clearTimeout(delay);
  }
  delay=setTimeout(moveLeft, speed);
  :
} 
```

通过设置像这样的超时立即`setTimeout(doFunction(),delaytime);`执行`doFunction`，因为`()`，然后再次`delaytime`，这真的是太多的递归......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T11:42:38.090

`element.style`如果在外部样式表中声明，则无法通过 using 获得 CSS样式。来自 MDN 文档：

> 但是，一般来说，它对于了解元素的样式并没有什么用处，因为它只表示在元素的内联样式属性中设置的 CSS 声明，而不是来自其他地方的样式规则的那些声明，例如部分中的样式规则或外部样式床单。

[https://developer.mozilla.org/en/DOM/element.style](https://developer.mozilla.org/en/DOM/element.style)

相反，您必须使用[`window.getComputedStyle()`](https://developer.mozilla.org/en/DOM/window.getComputedStyle)来获取属性。

```
window.getComputedStyle(document.getElementById('ball')).left; // returns 500px 
```

# delphi - 如何在 Delphi 7 的资源文件中使用皮肤文件 (.asz) 文件

> ID：10173067
> 
> 赞同：1
> 
> 时间：2012-04-16T11:14:20.927
> 
> 标签：delphi

我目前正在使用`Alpha lite`演示为我的 delphi 7 应用程序提供各种外观。我怀疑如何包含他们的皮肤文件（.asz 扩展名），这样我就可以在不丢失外观的情况下移植我的 Delphi 应用程序。我知道我必须将其包含在 .RES 文件中。怎么做 ？
我做了一个小函数来加载资源：

```
Function LoadResourceFromFile() : Boolean;
Var
  hFind , hRes : THandle;
Begin
  hFind := FindResource(HInstance,'SkinsVista',RT_RCDATA);
  If hFind <> 0 Then
  Begin
    hRes := LoadResource(HInstance,hFind);
    If hRes <> 0 Then
    Begin
      // what to do now ?
    End;
  End;
End; 
```

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T11:35:22.057

尝试使用以下代码。我未经测试，但基于[`this post`](http://www.alphaskins.com/forum/index.php?showtopic=3122)供应商支持，所以我希望它应该是正确的方法：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  ResStream: TResourceStream;
const
  SkinName = 'MySkin';
begin
  ResStream := TResourceStream.Create(HInstance, 'SkinsVista', RT_RCDATA);
  try
    sSkinManager1.InternalSkins.Add;
    sSkinManager1.InternalSkins[sSkinManager1.InternalSkins.Count - 1].Name := SkinName;
    sSkinManager1.InternalSkins[sSkinManager1.InternalSkins.Count - 1].PackedData.LoadFromStream(ResStream);
    sSkinManager1.SkinName := SkinName;
    sSkinManager1.Active := True;
  finally
    ResStream.Free;
  end;
end; 
```

# android - 我的应用没有使用冰淇淋三明治在市场上展示

> ID：10173068
> 
> 赞同：2
> 
> 时间：2012-04-16T11:14:26.283
> 
> 标签：android, google-play

我在市场上有超过 5 个月的应用程序，我买了带有冰淇淋操作系统的平板电脑，所以当我发现我的应用程序没有显示冰淇淋操作系统时，我惊呆了，所以我试图修复它

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="15"/>

<compatible-screens>
    <screen android:screenSize="small" />
    <screen android:screenSize="normal" />
    <screen android:screenSize="large" />
    <screen android:screenSize="xlarge" />
</compatible-screens> 
```

但是应用程序仍然没有出现，有什么有用的提示吗？

* * *

**更新**

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" >
</uses-permission>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" >
</uses-permission> 
```

我的平板电脑没有 GPS，但包含“Google 位置服务”

* * *

**更新**

我的清单文件：

```
<supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="true" />

<uses-feature android:name="android.permission.INTERNET" android:required="true"/>
<uses-feature android:name="android.permission.ACCESS_NETWORK_STATE" android:required="false"/>
<uses-feature android:name="android.permission.WRITE_EXTERNAL_STORAGE" android:required="true"/>
<uses-feature android:name="android.permission.ACCESS_COARSE_LOCATION" android:required="false"/> 
```

仍然没有出现在市场上的应用程序！

* * *

**更新**

**屏幕布局**: SMALL NORMAL LARGE XLARGE

**所需的设备功能**

android.hardware.screen.portrait

android.hardware.touchscreen

android.permission.INTERNET

android.permission.WRITE_EXTERNAL_STORAGE

**此应用程序适用于 0 多个设备。**

* * *

**问题解决了，最终Manifest：**

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" />

<supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="true" />

<uses-feature
    android:name="android.hardware.location"
    android:required="false" />
<uses-feature
    android:name="android.hardware.location.network"
    android:required="false" />
<uses-feature
    android:name="android.hardware.location.gps"
    android:required="false" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

**现在该应用程序出现在冰淇淋的搜索列表中:)**

**谢谢你们的帮助:)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T11:44:18.437

如果你研究这个页面：[uses feature 元素](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions)，你会发现 manifest中的*uses-permission元素可能***暗示****需要**某个硬件特性。

ACCESS_FINE_LOCATION 是这些权限之一，因此它只会显示为可用于具有 GPS 的设备

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T11:23:08.717

使用`<supports-screens>`代替`<compatible-screens>`

有关[分发到特定屏幕的更多信息](http://developer.android.com/guide/practices/screens-distribution.html)

# wcf - WCF：在这个场景中，每次通话或每次会话都更好？

> ID：10173071
> 
> 赞同：0
> 
> 时间：2012-04-16T11:14:36.970
> 
> 标签：wcf, instance

我想要一个双工服务，并且我想知道客户端是否正确输入了她的用户名和密码，因为我只想让用户在之前正确发送她的用户名和密码的情况下使用该服务的方法。

对于双工，对于这篇[文章](https://stackoverflow.com/questions/10164949/entity-framework-4-1-how-to-work-with-per-call-life-time-data-context)，我知道我可以在每次调用时使用双工服务，使用静态列表来存储调用之间的回调。但我怀疑如何使用 per call 方法进行用户控制。

在这种情况下，我在想：

1.- 用户调用方法 login() 并发送用户名和密码。在这种情况下是正确的。

2.- 用户现在可以调用服务的其余方法。例如方法 1()。在这里我有一个问题。每次调用如何，在每个方法调用中创建一个新实例，但是，来自同一个客户端，每个回调都有不同的代码还是相同的？如果相同，当客户端有不同的回调时，它何时重新启动应用程序？

如果每次调用的回调都不一样，我怎么知道客户端之前是否发送了她的用户名和密码？我需要将日志和密码作为方法参数发送吗？

如果回调相同，是否可以知道客户端何时关闭连接以从我的静态列表中删除回调？也许这将是连接控制？

谢谢。

编辑：我做了一些探测，我看到回调，客户端的 ID，对于每次调用方法都是相同的，所以可以创建一个类来保存所需的信息，例如用户名，如果该用户在此回调中输入了登录名和密码...等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:11:40.653

如果您使用 PerCall，您仍然可以拥有`SessionMode = SessionMode.Required`. 然后你可以简单地装饰你的登录方法操作契约属性，它 `IsInitiating = true`告诉 wcf 操作开始一个会话。所有其他操作都应设置为 `IsInitiating = false`。如果客户端调用的方法在调用 login 之前没有启动会话，则会抛出异常。

IE

```
 [ServiceContract(Namespace = "Services", SessionMode = SessionMode.Required, CallbackContract =          typeof(SVIMyCallback))]

 [OperationContract(Name = "login", IsInitiating = true)]
 [OperationContract(Name = "doSomething", IsInitiating = false)] 
```

# iis - 在 umbraco 下提供静态内容（通过 IIS）

> ID：10173074
> 
> 赞同：5
> 
> 时间：2012-04-16T11:14:47.547
> 
> 标签：iis, umbraco, virtual-directory

我在根目录上有一个 Umbraco 站点。它工作正常。

我需要能够提供来自 IIS 的静态（不是 ASP.NET）内容，例如 /foo。（/foo 映射到与主应用程序不同的文件夹结构，例如：

```
www.example.com     -> d:\sites\example.com
www.example.com/foo -> d:\sites\static\foo
www.example.com/bar -> d:\sites\static\bar 
```

*   我可以设置一个 IIS 应用程序，但是我继承了父应用程序 web.config，因为这是静态内容，它没有所需的 dll 等（也不应该有它们！）

*   我可以设置一个 IIS 虚拟目录，并将各种位添加到 web.config 中，以告诉 Umbraco 不要使用该文件夹（umbracoReservedUrls、umbracoReservedPaths）。这行得通，但是它仍然作为主要的 ASP.NET 应用程序运行，我更希望它只是静态的（即，不允许 .NET 运行时）

两者都不理想，因为我们可能有其中一些，因此需要编写所有创建脚本。编辑 4 个 web.config 文件（在 Web 集群中）并不理想。

我想要的是：

*   创建一个指向正确位置的虚拟目录（或应用程序）。告诉 IIS 将其作为静态内容提供。如果我必须将 web.config 放到文件夹 (/foo) 中，告诉它根本不加载任何东西，那很好（然后我可以使用非 .NET 应用程序池）

我搜索的所有内容都带有“不，无法完成”。我错过了什么？

### [编辑]

澄清一下，我不需要 CDN — 我们有一个。我只想让 /foo 成为它自己的文件夹，其中包含一堆 html/css/images（例如 /foo/index.html、/foo/images/logo.png），它们由用户提供，但是不是通过 umbraco — 只是通过 IIS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:40:04.007

关于问题中的第二个建议，您*可以*告诉 IIS 禁止脚本访问。

我只需要做一些与此类似的事情，作为在工作中需要 SSL 托管几天的快速修复，所以我做了：

1.  将代码放在 Umbraco 站点内自己的文件夹中。

2.  使文件夹成为自己的应用程序：

    [![如何在 IIS6 中创建应用程序](../Images/f901dc3d985d8a7be6656f21f742f65b.png)](https://i.stack.imgur.com/tWHhl.jpg)
    [（来源：[serverintellect.com](http://www.serverintellect.com/support/images/IIS6_VirDirApp_2.jpg)）]

3.  （如果我愿意的话，我可以在这里禁用执行权限，从上面屏幕截图中“仅限脚本”的下拉框中，但我实际上需要执行权限才能进行快速修复。）

4.  添加了一个最小的 Web.config 来覆盖我不想要的 Umbraco Web.config 的位：

    ```
    <configuration>
       <system.web>
          <httpModules>
             <clear/>
          </httpModules>
          <httpHandlers>
             <clear/>
             <add path="*.aspx" verb="*"
               type="System.Web.UI.PageHandlerFactory" validate="true"/>
             <add path="*" verb="GET,HEAD,POST"
               type="System.Web.DefaultHttpHandler" validate="true"/>
             <add path="*" verb="*"
               type="System.Web.HttpMethodNotAllowedHandler" validate="true"/>
          </httpHandlers>
       </system.web>
    </configuration> 
    ```

    （这些处理程序是直接从`C:\​Windows\​Microsoft.NET\​Framework64\​v4.0.30319\​Config\​web.config`我的笔记本电脑上复制的）

5.  没有第五步。

快速——而且*很脏*——但它有效；o)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T13:54:40.277

也许有点难看，但你能在你的 umbraco 根文件夹中创建一个符号链接，然后像普通文件夹一样提供它吗？（也许还会在 web.config 中添加 umbracoReservedPaths 设置的路径）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:41:49.863

我从来没有找到一个好的解决方案，所以我们最终只是把它放在一个单独的域上，并使用 UrlRewriting 将用户重定向到另一个服务器。

不完美，但它确实有效。

# google-places-api - Google Places API - 如何仅检索通过我的应用添加的地点？

> ID：10173078
> 
> 赞同：4
> 
> 时间：2012-04-16T11:15:43.210
> 
> 标签：google-places-api

我目前正在为我的 Android 应用程序探索 Google Places API。我基本上想做的是将一堆特定地点添加到 Google Places，然后能够通过 API检索它们，并且*只有它们。*

换句话说，我不希望搜索查询返回存在于我的应用程序之外的地点，因为它们在 99% 的情况下都不相关。

我没有看到一个简单的方法来做到这一点，除了在地名中添加一个特定的关键字，然后寻找有这个词的地方——但这听起来有点俗气。

任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T23:26:02.267

您可以将添加的地点保存在私人数据库中。然后将这些作为“宇宙”提供。您不能使用 Google 地方 api。

# ms-access - 如何清除从 ms access 2007 中的组合框中选择值的过滤？

> ID：10173080
> 
> 赞同：0
> 
> 时间：2012-04-16T11:15:47.213
> 
> 标签：ms-access, ms-access-2007, filtering, vba

我有一个组合框，用于在 afterupdate 事件中过滤表单上的数据。以下是我一直试图用来过滤数据的查询。此代码有效地过滤数据，但我面临的问题是，当我从组合框中选择“”时，没有显示任何数据。可能出了什么问题？我该如何显示关于选择“”的表格的所有数据

```
Dim strCriteria As String
strCriteria = "[Jobno]='" & cboPMNO & "'"
Set rst = Me.RecordsetClone
If strCriteria = "<ALL>" Then
Me.FilterOn = False
ElseIf rst.NoMatch Then
MsgBox "No entry found"
Else
Me.FilterOn = False
Me.Filter = strCriteria
Me.FilterOn = True
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:42:14.900

尝试这个：

```
Dim strCriteria As String
strCriteria = "[Jobno]='" & Nz(cboPMNO, "<ALL>") & "'"
Set rst = Me.RecordsetClone
If strCriteria = "<ALL>" or strCriteria = "" Then
    Me.Filter = ""
    Me.FilterOn = False
ElseIf rst.NoMatch Then
    MsgBox "No entry found"
Else
    Me.Filter = strCriteria
    If Me.FilterOn = False Then Me.FilterOn = True
End If 
```

以下是我通常会如何编写这种过滤器。我非常不喜欢消息框，除非它们是绝对必要的。在我看来，如果没有匹配项，最好只显示一个空白表单或列表框。

```
Dim strCriteria as String
If Nz(Me.cboPMNO, "<ALL>") <> "<ALL>" Then
    strCriteria = "[Jobno] = '" & Me.cboPMNO & "'"
End If
If strCriteria <> "" Then
    Me.Filter = strCriteria
    If Me.FilterOn = False Then Me.FilterOn = True
Else
    Me.Filter = ""
    Me.FilterOn = False
End If 
```

# c# - WP7 中的视频缩略图

> ID：10173085
> 
> 赞同：2
> 
> 时间：2012-04-16T11:16:20.707
> 
> 标签：c#, .net, windows-phone-7

我目前正在开发一个使用摄像机功能的 WP7 应用程序。录制后，我希望能够显示视频内容的临时缩略图。

我如何在 WP7 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:25:18.510

您可能会发现以下一个很好的起点“如何在 Windows Phone 7 上保存 VideoCamera/PhotoCamera 内容”：-

[http://dotnet.dzone.com/articles/how-videocameracamera-content](http://dotnet.dzone.com/articles/how-videocameracamera-content)

# java - Hibernate 的重复密钥问题

> ID：10173088
> 
> 赞同：4
> 
> 时间：2012-04-16T11:16:41.380
> 
> 标签：java, hibernate

使用 Hibernate 4.0 我有三个休眠实体：

歌曲，封面艺术，封面图片

Songs 代表音乐文件，CoverImage 代表一张图片，CoverArt 用于将 CoverImages 与 Songs 关联起来，一首歌曲可以包含多个封面图片。

Song 和 CoverArt 有一个由 Hibernate 自动生成的主键。但是 Cover Image 主键是手动完成的，构造为图像数据的 MessageDigest。我这样做是因为同一张图片可以被很多歌曲使用，我不想在数据库中多次存储同一张图片的单独实例，也因为可以从数据中构造密钥我可以在数据库中检查文件是否已经如果存在，则检索它而不是构造一个新的 CoverImage。

问题是我的应用程序是多线程的，Hibernate 实际上并没有立即将内容提交到数据库，因此线程 1 可能会检查封面图像是否已经在数据库中，发现它不存在并构造一个新的 Song、CoverArt 和 CoverImage 对象。但是当数据被提交到数据库时，一个单独的线程可能已经添加了一个 CoverImage，所以我得到一个异常，因为我的新 CoverImage 具有与现有的相同的键

我正在使用

```
session.merge(coverImage); 
```

所以我认为这可以解决这个问题，但它似乎没有帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T13:16:39.033

除了重试失败的事务外，没有可靠的方法来处理这种情况。

因此，如果由于主键上的约束违反而导致事务回滚，则`CoverImage`应该假设该事务`CoverImage`已经存在重试该事务。请注意，您需要一个 new`Session`来执行此操作，因为 Hibernate 异常是不可恢复的。

`merge()`无法处理这个问题，因为它的原因更深，在事务隔离语义中。在现代基于[MVCC](http://en.wikipedia.org/wiki/Multiversion_concurrency_control)的 DBMS 中，每个事务都会看到自己的数据库快照。因此，并发事务可以对其快照进行冲突更改（尽管它们不能对同一记录进行更改，因此这些更改必须是不相交的），并且这种冲突只能在提交期间被 DBMS 检测到，并且只有当它引起约束时违反，如您的情况（没有约束冲突将不会被注意到，请参阅[write skew anomaly](http://en.wikipedia.org/wiki/Snapshot_isolation)）。

由于`merge()`在事务内部工作，它无法看到其他事务在其快照中做了什么，因此无法克服这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:24:07.660

另一种选择是对coverImages 使用包装器。例如。封面图像包装。CoverImageWrapper 有自己的密钥 - 基于 uuId，而不是 messageDigest。此类与 CoverImage 一对一链接。

在存储到数据库时，此 CoverImageWrapper 键始终由应用程序生成，因此您拥有所有三个键（Song、CoverArt 和 CoverImageWrapper） - 由应用程序生成，并且在所有线程中都是唯一的。因此，这种方式可以避免重复键异常。

# javascript - 以相同的方式随机化两个数组，javascript

> ID：10173089
> 
> 赞同：0
> 
> 时间：2012-04-16T11:16:49.523
> 
> 标签：javascript

我正在使用 javascript 并尝试同步两个数组，以便两个数组具有相同的索引位置。

```
 var array1 = ["word1","word2","word3","word4","word5"];
    var array2 = [1,2,3,4,5];

    array2.sort(function(){ return Math.random() -.5}); 
```

这会将 array2 打乱为 [2,3,1,5,4]

现在我需要 array1 来获得相同的顺序：`["word2", "word3", "word1", "word 5", "word4"]`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:20:28.460

你会更好地使用不同的结构。IE

```
[{k: 1, v:'word1'}, {k: 2, v:'word2'}] 
```

并对其进行排序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:19:18.603

使用关联数组。然后随机播放键（最终作为第三个数组）并相应地重新排列前两个数组。

编辑：对不起，我把它读成 PHP 而不是 javascript。我的错。也许使用对象而不是数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:19:46.750

这样的事情应该是一种非常简单的方法：

```
//assume array1 is like in your example and 
//array2 is the result of the randomization
var result = [];
for(var i = 0; i < array2.length; i++) {
    result[i] = array1[array2[i]];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T11:26:21.087

您需要将两个数组中的值链接在一起。简单的方法是将它们放在第三个数组中 so `pairs[index] = [ array1[index], array2[index] ]`。就像你做的那样对这个对数组进行排序，然后将对拆分回你的原始数组。

# sockets - 代理服务器如何与 tcp/http 连接一起工作？

> ID：10173096
> 
> 赞同：6
> 
> 时间：2012-04-16T11:17:07.760
> 
> 标签：sockets, networking, proxy, websocket

由于我是互联网/网络领域的初学者，所以我在编程时总是把这些疑问弄得一团糟；）..我的疑问是，

1.  在代理后面工作时，我的请求和响应如何工作？这是否意味着我的请求标头和数据将首先到达代理服务器->然后代理服务器将其（相同的标头和数据）发送到相应的服务器。服务器使用响应标头和正文向代理服务器进行响应->然后代理服务器将其发送到我的计算机。正确的？

2.  在使用 websockets 时，我们正在将我们的 HTTP 连接升级到 TCP。此时代理服务器上发生了什么？代理服务器是否也将其连接升级到纯 TCP？

3.  打开此类 TCP 连接后，代理服务器是否能够跟踪/记录这些套接字消息？

4.  最重要的是，代理服务器是透明的还是像客户端前面的原始服务器一样？

提前感谢您提供任何答案或有用的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T22:25:55.627

1.  正确的。

2.  没有“将 HTTP 升级到 TCP”之类的东西。HTTP 连接已经是 TCP 连接。因此这个问题毫无意义。

3.  它能够跟踪连接，并且可以看到双向交换的所有数据。

4.  我不确定这意味着什么。在处理完 CONNECT 命令后，代理只在两个方向上复制字节。就您的问题而言，这可能是“透明的”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:27:26.447

1.  是的，这差不多。

2.  如果您在谈论 html5 websockets，那么需要提到几件事。首先，要使用 websockets，您需要一个处理此类连接的服务器，而且我不知道有任何服务器可以开箱即用地支持它。有实现该功能的 apache 模块，也有执行此功能的 perl 和 python 独立应用程序。底线是，除非您的服务器可以处理 websocket，否则什么都不会发生。同样适用于 websockets 代理，它的工作原理类似，我没有阅读 websockets 协议规范，但服务器会读取数据包的目标地址并将它们中继到服务器，然后中继服务器返回的内容。我实际上没有听说过 websockets 代理服务器，也不知道如何去写它，我不知道 还不相信有这样的事；请记住，该协议仍未完全标准化。

3.  在所有数据包都通过代理传输之后，我会这样认为，除非您通过 SSL 对其进行加密。

抱歉，我无法为您提供更多信息，但我最近才开始使用 websockets，而且它还不是很普及的技术。

另外，我会向您指出以下资源，它们似乎为您的问题提供了一些答案：

[http://www.infoq.com/articles/Web-Sockets-Proxy-Servers](http://www.infoq.com/articles/Web-Sockets-Proxy-Servers) [http://stackoverflow.com/questions/2201317/why-dont-current-websocket-client-implementations-support-proxies](http://en.wikipedia.org/wiki/WebSocket#Proxy_traversal)

[http://en.wikipedia.org/wiki/WebSocket#Proxy_traversal](http://en.wikipedia.org/wiki/WebSocket#Proxy_traversal)

# ruby - Rails - RSpec - “让”和“让！”之间的区别

> ID：10173097
> 
> 赞同：45
> 
> 时间：2012-04-16T11:17:08.233
> 
> 标签：ruby, rspec, rspec2

我已经阅读了[RSpec 手册](https://www.relishapp.com/rspec/rspec-core/v/2-9/docs/helper-methods/let-and-let)中关于差异的内容，但有些事情仍然令人困惑。包括“The RSpec Book”在内的所有其他来源都只解释了“let”，而“The Rails 3 Way”与手册一样令人困惑。

我知道“let”仅在调用时进行评估，并在范围内保持相同的值。因此，在[手册](https://www.relishapp.com/rspec/rspec-core/v/2-9/docs/helper-methods/let-and-let)的第一个示例中，第一个测试通过，因为“let”仅被调用一次，第二个测试通过，因为它添加到第一个测试的值（在第一个测试中被评估一次），这是有道理的并且值为 1)。

之后，因为“让！” 在定义时评估，并在调用时再次评估，测试是否应该失败，因为“count.should eq(1)”应该是“count.should eq(2)”？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2014-06-30T18:23:44.500

我通过一个非常简单的例子理解了`let`和之间的区别。`let!`让我先阅读文档句子，然后动手展示输出。

[关于让](https://relishapp.com/rspec/rspec-core/v/3-0/docs/helper-methods/let-and-let)医生说：-

> ...`let`是*惰性求值的*：直到它定义的方法第一次被调用时才求值。

我了解以下示例的区别：-

```
$count = 0
describe "let" do
  let(:count) { $count += 1 }

  it "returns 1" do
    expect($count).to eq(1)
  end
end 
```

现在让我们运行它：-

```
arup@linux-wzza:~/Ruby> rspec spec/test_spec.rb
F

Failures:

  1) let is not cached across examples
     Failure/Error: expect($count).to eq(1)

       expected: 1
            got: 0

       (compared using ==)
     # ./spec/test_spec.rb:8:in `block (2 levels) in <top (required)>'

Finished in 0.00138 seconds (files took 0.13618 seconds to load)
1 example, 1 failure

Failed examples:

rspec ./spec/test_spec.rb:7 # let is not cached across examples
arup@linux-wzza:~/Ruby> 
```

为什么是*错误*？因为，正如 doc 所说，**在第一次调用它定义的方法之前**`let`，它不会被评估。在*示例*中，我们没有调用，因此仍然是，没有增加。***`count``$count``0``1`***

 ***现在来到这个部分`let!`。医生说

> ....您可以使用让！在每个示例之前强制调用方法。这意味着即使您没有在*示例中调用**辅助*方法，它仍然会在您的示例运行之前被调用。

 *让我们也测试一下：-

这是修改后的代码

```
$count = 0
describe "let!" do
  let!(:count) { $count += 1 }

  it "returns 1" do
    expect($count).to eq(1)
  end
end 
```

让我们运行这段代码：-

```
arup@linux-wzza:~/Ruby> rspec spec/test_spec.rb
.

Finished in 0.00145 seconds (files took 0.13458 seconds to load)
1 example, 0 failures 
```

看，现在`$count`返回`1`，因此测试通过了。它发生在我使用的时候`let!`，它在示例运行之前运行，尽管我们没有`count`在示例中调用。

这就是彼此的方式`let`和不同之处。`let!`

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-04-16T15:25:54.270

[您可以在此处](https://www.relishapp.com/rspec/rspec-core/docs/helper-methods/let-and-let)阅读有关此内容的更多信息，但基本上是这样。`(:let)`被懒惰地评估并且如果你不调用它永远不会被实例化，而`(:let!)`在每个方法调用之前被强制评估。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-04-16T15:29:52.253

它不是在定义时调用，而是在每个示例之前调用（然后它被记忆并且不再被示例调用）。这样，count 的值为 1。

无论如何，如果您有另一个示例，则再次调用 before 挂钩 - 以下所有测试都通过：

```
$count = 0
describe "let!" do
  invocation_order = []

  let!(:count) do
    invocation_order << :let!
    $count += 1
  end

  it "calls the helper method in a before hook" do
    invocation_order << :example
    invocation_order.should == [:let!, :example]
    count.should eq(1)
  end

  it "calls the helper method again" do
    count.should eq(2)
  end
end 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-04T22:25:52.983

我也认为这很令人困惑，但我认为 The Rails 3 Way 中的示例很好。
let 类似于 before 块中的实例变量，而 let! 立即被记住

从 Rails 3 方式

```
describe BlogPost do
  let(:blog_post) { BlogPost.create :title => 'Hello' }
  let!(:comment) { blog_post.comments.create :text => 'first post' }

  describe "#comment" do
    before do
     blog_post.comment("finally got a first post")
    end

    it "adds the comment" do
      blog_post.comments.count.should == 2
    end
  end
end 
```

> “由于如果您使用 let 定义，第一个断言将永远不会执行注释块，因此即使实现可能正在运行，也只会在此规范中添加一个注释。通过使用 let！我们确保创建了初始注释现在规范将通过。”

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-28T03:44:37.270

我也对 and 感到困惑`let`，`let!`所以我从[这里](https://www.relishapp.com/rspec/rspec-core/docs/helper-methods/let-and-let)获取了文档代码并使用它： [https ://gist.github.com/3489451](https://gist.github.com/3489451)

希望能帮助到你！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-31T21:43:26.117

这是一种让您的规格保持可预测的方法。

你几乎应该总是使用`let`. `let!`除非您有意跨示例缓存值，否则不应使用。这就是为什么：

```
describe '#method' do
  # this user persists in the db across all sub contexts
  let!(:user) { create :user }

  context 'scenario 1' do
    context 'sub scenario' do
      # ...
      # 1000 lines long
      # ...
    end

    context 'sub scenario' do
      # you need to test user with a certain trait
      # and you forgot someone else (or yourself) already has a user created
      # with `let!` all the way on the top
      let(:user) { create :user, :trait }

      it 'fails even though you think it should pass' do
        # this might not be the best example but I found this pattern
        # pretty common in different code bases
        # And your spec failed, and you scratch your head until you realize
        # there are more users in the db than you like
        # and you are just testing against a wrong user
        expect(User.first.trait).to eq xxx
      end
    end
  end
end 
```****

# php - 为什么 jQuery ajax（post 方法）在浏览器中显示编码的 URL？

> ID：10173108
> 
> 赞同：0
> 
> 时间：2012-04-16T11:18:15.313
> 
> 标签：php, jquery, ajax, post

我的印象是post方法在后台将数据发送到.php页面，只有GET方法在浏览器的地址行中显示了编码的url。

我问是因为我关心在浏览器地址栏中显示用户的电子邮件地址（编码与否）。我是连接网络服务器的网络开发新手，只是想知道这是否是一个有效的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:24:05.203

POST 方法不会在 URL 中显示参数，而 GET 方法会！如果没有，您必须再次检查您实际使用的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:20:24.763

您所说的是正确的 POST 应该只是在您所说的“幕后”发布，但有经验的用户仍然可以看到此信息。

但是它不应该出现在地址栏中！

你可以发布你的显示 url 的 jQuery 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:22:32.213

老实说，如果您使用 GET 方法（将显示在 url 地址中），我认为这不是问题，但是如果您的网站需要某种安全性，我建议对其进行编码并使用 POST 传递它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T11:23:04.263

`POST`永远不会在地址栏中显示有关正在发送的数据的任何信息。（但是是的，有经验的用户（所谓的黑客：P）总是可以看到发送的编码后的数据。

# jpa - 使用 joinColumns 创建表？

> ID：10173115
> 
> 赞同：0
> 
> 时间：2012-04-16T11:18:59.260
> 
> 标签：jpa, join

我正在尝试使用 JPA 构建一些简单的表，但我无法让它们正常工作。我总共有 4 个表：*lookup*、*group*、*keyword*和*groupkw*。

*查找*表有一个 Id 字段。这个*lookup.id*字段在其他表中用作外键。

在表*group*中，一个*id*列作为主键加入了*lookupid列；*在*关键字*表中，一个*id*列也作为主键加入了*lookupid列。*

最后一个表是*groupkw*表，它有三列：*kwid*、*groupid*和*lookupid*。*kwid*和*lookupid*映射到 表*Keyword*中的列*id*和*lookupid*；*groupid*和*lookupid*映射到表*group*中的列“id”和“lookupid” 。

 ***对于*group*和*keyword*，我编写了带注释的 java 类来表示它们，并且根据单元测试，它们工作正常。但是对于表*groupkw*，我无法获得正确的注释类。

我为表*groupkw*编写了一些代码：

```
@NotNull
@ManyToOne
@JoinColumns({
@JoinColumn(name="kwid", referencedColumnName = "id", nullable = false),
@JoinColumn(name="lookupid", referencedColumnName = "lookupid", nullable = false)
})
public Keyword getKeyword() {
  return keyword;
}

@NotNull
@ManyToOne
@JoinColumns({
@JoinColumn(name="groupid", referencedColumnName = "id", nullable = false),
@JoinColumn(name="lookupid", referencedColumnName = "lookupid",
nullable = false, insertable=false, updatable=false)
})
public Group getgroup() {
  return group;
} 
```

但似乎不起作用，EntityManagerFactory 无法创建*groupkw*表。请让我知道这是实现此表的正确方法还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:28:28.403

您不能将列映射两次，您的`lookupid`列就是这种情况。你让它变得比必要的更难。

如果我理解正确，您有以下关联：

*   查找 - 一对多 - 组
*   查找 - OneToMany - 关键字
*   组 - 多对多 - 关键字

如果是这样，您不需要将 groupkw 表映射为实体：它是一个连接表，可以由 JPA 处理。

您只需 ：

*   查找（ID PK）
*   组（id PK，lookupId FK）
*   关键字（id PK，lookupId FK）
*   GroupKeyWord (groupId FK, keywordId FK), the PK of this table being the tuple (groupId, keywordId).***

# ios - ios kmlviewer 加载远程 url 而不是本地文件

> ID：10173124
> 
> 赞同：0
> 
> 时间：2012-04-16T11:19:36.920
> 
> 标签：ios, nsstring, mkmapview

我正在使用 Apple 的 kmlviewer 示例，但它从本地目录中获取 kml 文件。我想要做的是使用 url 远程调用该文件。

这是来自 Apple 的原始代码：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"KML_Sample" ofType:@"kml"];
NSURL *url = [NSURL fileURLWithPath:path];
kmlParser = [[KMLParser alloc] initWithURL:url];
[kmlParser parseKML]; 
```

如何将 url 中的远程文件称为：[http://www.domain.com/route.kml](http://www.domain.com/route.kml)？

最好的祝福。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:17:49.293

我在 KMLParser 中添加了一个 Initializer 来使用 NSData：

在 KMLParser.h 文件中，添加：

```
-(id) initWithData: (NSData *) data; 
```

在 KMLParser.m 文件中添加：

```
-(id) initWithData: (NSData *)data
{
    if (self = [super init]) {
        _styles = [[NSMutableDictionary alloc] init];
        _placemarks = [[NSMutableArray alloc] init];
        _xmlParser = [[NSXMLParser alloc] initWithData:data];

        [_xmlParser setDelegate:self];
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:38:55.367

我会下载文件并将其保存在本地文档或临时目录中。基本步骤是：

*   使用您想要的 URL 创建一个 NSURLRequest
*   使用该 NSURLRequest 创建一个 NSURLConnection
*   创建一个 NSMutableData 成员变量来存储从 NSURLConnection 接收到的数据。
*   实现 NSURLConnection 委托的方法：
    *   连接：didReceiveResponse（确保成功，即 http 200）
    *   连接：didReceiveData（将接收到的数据附加到您的 NSMutableData 变量）
    *   连接：didFailWithError（处理错误）
    *   connectionDidFinishLoading（现在收到所有数据，将其写入本地文件）

请参阅 Apple 提供的这个非常有用的示例项目，其中展示了如何按照我上面概述的步骤下载文件并将其保存在本地：http: [//developer.apple.com/library/ios/#samplecode/URLCache/Introduction/介绍.html](http://developer.apple.com/library/ios/#samplecode/URLCache/Introduction/Intro.html)

在 Apple 的文档中也有一个很好的分步指南： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)

然后，一旦您在本地拥有该文件，使用 KMLParser 使用指向您将文件保存到的任何位置的 URL 打开将是微不足道的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T23:03:13.797

**MapViewController.h**：

```
 .....
    NSMutableData   *webData;
    KMLParser       *kml;
    .....
    @property (nonatomic, retain) NSMutableData   *webData; 
```

**MapViewController.m**：

```
- (IBAction)showKmlData:(id)sender  //Let's say you want to download kml data with a button tap, you create a method for that (you may not act like this, but the content is the same):
{
    NSURL *path = [NSURL URLWithString:@"http://www.domain.com/route.kml"];
    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:path];
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

    [connection release];
    [request release];
}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
   self.webData =[NSMutableData data];
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{   
    [webData appendData:data];
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSString *fileName = [[[NSURL URLWithString:kmlStr] path] lastPathComponent];
    //NSString *fileName = @"route.kml"; 
    NSArray *pathArr = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *folder = [pathArr objectAtIndex:0];

    NSString *filePath = [folder stringByAppendingPathComponent:fileName];
    NSURL *fileURL = [NSURL fileURLWithPath:filePath];  
    NSError *writeError = nil;

    [webData writeToURL: fileURL options:0 error:&writeError];

    if( writeError) {
        NSLog(@" Error in writing file %@' : \n %@ ", filePath , writeError );
        return;
    }

    kml = [[KMLParser parseKMLAtPath:filePath] retain];

    NSArray *annotations = [kml points];

    if ([[mapview overlays] count] == 0) {
        [mapview addAnnotations:annotations];

        NSArray *overlays = [kml overlays];
        [mapview addOverlays:overlays];
        MKMapRect flyTo = MKMapRectNull;

        for (id <MKOverlay> overlay in overlays) {
            if (MKMapRectIsNull(flyTo)) {
                flyTo = [overlay boundingMapRect];
            } else {
                flyTo = MKMapRectUnion(flyTo, [overlay boundingMapRect]);
            }
        }

        for (id <MKAnnotation> annotation in annotations) {
            MKMapPoint annotationPoint = MKMapPointForCoordinate(annotation.coordinate);
            MKMapRect pointRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, 0, 0);
            if (MKMapRectIsNull(flyTo)) {
                flyTo = pointRect;
            } else {
                flyTo = MKMapRectUnion(flyTo, pointRect);
            }
        }

        mapview.visibleMapRect = flyTo;
    }

    [mapview addAnnotations:annotations];
    NSArray *overlays = [kml overlays];
    [mapview addOverlays:overlays];
}

-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error!" message:@"An error has occured." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T19:11:58.720

没有`NSURLRequest`，`NSURLConnection`它很简单：

```
NSURL *url = [NSURL URLWithString:@"http://www.domain.com/route.kml"];
kmlParser = [[KMLParser parseKMLAsURL:url] retain];

NSArray *overlays = [kmlParser overlays];
[mapView addOverlays:overlays]; 
```

等用于注释。

至于`parseKMLAtURL`，它在 Apple SDK 的 KMLViewer 的另一个版本（1.1）中实现为：

```
+ (KMLParser)parseKMLAtURL:(NSURL *)url
{
    NSXMLParser *xml = [[NSXMLParser alloc] initWithContentsOfURL:url];
    KMLParser *parser = [[KMLParser alloc] init];
    [xmlParser setDelegate:parser];
    [xml parse];
    [parser _assignStyles];
    return [parser autorelease];
} 
```

# c# - 在句柄上创建一个表单（来自另一个非托管进程）

> ID：10173125
> 
> 赞同：0
> 
> 时间：2012-04-16T11:19:38.837
> 
> 标签：c#, winforms

我有一个随机窗口的句柄。
有什么办法可以`System.Windows.Forms.Form`在这个句柄上创建一个？（它不一定属于 .NET 应用程序）
如果有办法，怎么办？

# jsf-2 - javax.faces.FacesException：加载 JSF 页面时解码资源数据时出错

> ID：10173128
> 
> 赞同：8
> 
> 时间：2012-04-16T11:19:51.130
> 
> 标签：jsf-2, jboss, richfaces

我在加载 JSF 页面时遇到了下面提到的错误。页面加载成功，页面上所需的操作也已完成，但出现此错误。

jsf 页面包含选项卡面板，单击每个选项卡面板都会出现错误。我还发现，如果我将页面的某个部分保留为 render=false 则错误不会出现，但该部分再次不会重新呈现。

我将 JSF2.0 与 JSP 一起使用。和 RF3.3

```
ERROR [[Faces Servlet]] Servlet.service() for servlet Faces Servlet threw exception
javax.faces.FacesException: Error decode resource data
at org.ajax4jsf.resource.ResourceBuilderImpl.decrypt(ResourceBuilderImpl.java:627)
at org.ajax4jsf.resource.ResourceBuilderImpl.getResourceDataForKey(ResourceBuilderImpl.java:371)
at org.ajax4jsf.resource.InternetResourceService.serviceResource(InternetResourceService.java:156)
at org.ajax4jsf.resource.InternetResourceService.serviceResource(InternetResourceService.java:141)
at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:508)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
at org.apache.catalina.core.StandardContextValve.__invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java)
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:601)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
at java.lang.Thread.run(Thread.java:662)
Caused by: java.util.zip.DataFormatException: incorrect data check
at java.util.zip.Inflater.inflateBytes(Native Method)
at java.util.zip.Inflater.inflate(Inflater.java:238)
at java.util.zip.Inflater.inflate(Inflater.java:256)
at org.ajax4jsf.resource.ResourceBuilderImpl.decrypt(ResourceBuilderImpl.java:621)
    ... 25 more 
```

jsf页面和组件的代码片段，当bean中的render=false时不会抛出上述错误。

```
<rich:tab ignoreDupResponses="true" id="tabModify"
    style="overflow:auto" styleClass="richTab" label="#{}"
    eventsQueue="queueForTab" actionListener="#{}">
    <rich:layout>
        <rich:layoutPanel position="right" id="pnlmodfy">
            <h:form id="frmModify">
                <h:panelGrid>
                    <h:outputLabel value="#{} * :" escape="false" styleClass="intro" />
                    <h:outputText value=" : " styleClass="intro" />
                    <rich:comboBox id="Mdfy" value="#{Bean.str}"
                        suggestionValues="#{Bean.arraylist}">
                        <a4j:support id="id"
                            actionListener="#{Bean.actionListener}"
                            ajaxSingle="true" event="onchange" reRender="modify">
                        </a4j:support>
                    </rich:comboBox>
                </h:panelGrid>
                <a4j:outputPanel id="modify" ajaxRendered="true">
                    <h:panelGrid columns="3" id="modify">
                        <h:outputText value="Description *" styleClass="intro"/>
                        <h:outputText value=" : " styleClass="intro" />
                        <h:inputTextarea id="Desc" required="true"
                            styleClass="textBox" label="Description"
                            value="#{Bean.strDesc}">
                        </h:inputTextarea> 
```

如果 outputPanel 绑定到支持 bean 以进行渲染，并且最初将值设置为 false，则不会出现错误。然而，在重新渲染 outputPanel 时，outputPanel 永远不会出现。

问题基本上出现在包含组件上。我在页面中有 4 个标签。在两个选项卡上，我使用 listshuttle（每个选项卡上有 2 个组件）。在两个选项卡上，绑定到 listshuttle 的源和目标的数组列表是相同的。

是不是因为这个原因，我将同一个列表绑定到两个航天飞机。但是，另一个选项卡中的相同代码绝对可以正常工作......

ListShuttle 代码：-

```
<h:outputText value="Select" styleClass="intro" rendered="#{!empty Bean.lstAvailable}"/>
<h:outputText value=" : " styleClass="intro" />
<rich:listShuttle id="listShuttleN" sourceValue="#{Bean.lstAvailable}" targetValue="#{KPIManagement.lstSelected}"  var="items" listsHeight="100" sourceListWidth="100" targetListWidth="100" sourceCaptionLabel="Available" targetCaptionLabel="Selected" rendered="#{!empty Bean.lstAvailable}">       
<rich:column>
<h:outputLabel value="#{items}"></h:outputLabel>
</rich:column>
</rich:listShuttle> 
```

数组列表代码：-

```
ArrayList<String> lstAvailable=new ArrayList<String>(); 
```

里面的一些功能

```
lstAvailable=class.function(Some variable))
this.setLstAvailable(lstAvailable); 
```

* * *

观察到这篇文章的可能答案是我正面临某种浏览器问题。

当从另一台机器访问相同的应用程序时，绝对没有例外......这很奇怪，因为我使用的是 Firefox 11.0 而另一台机器有 Firefox 4.0

这真的是浏览器的问题吗？？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T09:37:41.333

该问题现在在所有 Firefox 升级>10.0 上都非常突出。 Firefox 浏览器脚本中有一些更改，不允许正确读取树。

请在您的项目中添加以下内容以消除所有与 Firefox 浏览器相关的问题：-

```
import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.net.URLDecoder;

import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletRequestWrapper;

public class RichFacesFirefox11Filter implements Filter {

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        chain.doFilter(new HttpServletRequestWrapper((HttpServletRequest) request) {
            @Override
            public String getRequestURI() {
                try {
                    return URLDecoder.decode(super.getRequestURI(), "UTF-8");
                } catch (UnsupportedEncodingException e) {

                    throw new IllegalStateException("Cannot decode request URI.", e);
                }
            }
        }, response);
    }

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        // do nothing
    }

    @Override
    public void destroy() {
        // do nothing
    }

} 
```

并且请在您的 web.xml 文件中也输入此过滤器。

```
<filter>
    <filter-name>RichFacesFirefox11Filter</filter-name>
    <filter-class>Packagename.RichFacesFirefox11Filter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>RichFacesFirefox11Filter</filter-name>
    <url-pattern>/a4j/*</url-pattern>
  </filter-mapping> 
```

这肯定会消除您与 Firefox 浏览器和 RichFaces 组件相关的所有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-09T05:20:21.063

我毫不怀疑 AnglesAndDemons 的回答在这里是正确的，但由于某种原因，我无法让它发挥作用。我正在使用 Richfaces 3.3.3 Final，并且起作用的是从 JIRA 问题[https://issues.jboss.org/browse/RF-12062下载修补的richfaces-impl.jar](https://issues.jboss.org/browse/RF-12062)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:45:21.483

首先，[`<rich:tabPanel>`](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/rich_tabPanel.html)包装 each`<rich:tab>`必须在 a 内`form`（检查文档中的注释），因此选项卡内的表单不是必需的。此外，如果您想在单击某个选项卡时调用服务器操作，则应`switchType`使用`server`值进行检查。

还有一件事，也许你的 XHTML 代码`<a4j:outputPanel>`包含错误，如果你用完整或更多的代码更新你的帖子会更好。

# xslt - 在结果文档中生成空/空白命名空间声明

> ID：10173139
> 
> 赞同：4
> 
> 时间：2012-04-16T11:20:29.193
> 
> 标签：xslt, namespaces

我编写了一个用于将 XML 转换为 ePub 的包。一切正常，除了某些情况下，空白命名空间 ( `xmlns=""`) 节点被写入结果文档。在转换之前，我准备了用于保存主段（即，等）的临时变量，`meta`最后`body`将节点（使用`xsl:copy-of[@copy-namespaces='no']`指令）复制到结果文档。我也在元素内使用过`@exclude-result-prefixes='ns_list_sep_by_space'`，`xsl:transform`但仍然无法获得预期的结果。

oXygen IDE 在弹出窗口中显示一条消息：

> 当使用 xsl:copy-of 时，新元素还将具有从原始元素节点复制的命名空间节点，除非通过指定 copy-namespaces="no" 将它们排除在外。如果此属性被省略，或者取值为 yes，则原始元素的所有命名空间节点都将复制到新元素。如果它的值为 no，则不会复制任何命名空间节点：但是，命名空间节点仍将根据命名空间修复过程的要求在结果树中创建。

* * *

这是我的问题的更多详细信息：

主要样式表：
`main.xsl:main caller`

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:xd="http://www.oxygenxml.com/ns/doc/xsl"
    xmlns:cylian="local-ns-for-extension-functions"
    exclude-result-prefixes="xs xd cylian"
    version="2.0">

    <xsl:import href="modules/core.xsl"/>

    <xsl:variable name="base" select="base-uri()" as="xs:anyURI"/>

    <xsl:template match="/">
        <xsl:call-template name="procA"/>
    </xsl:template>

</xsl:transform> 
```

主要样式表：
`core.xsl: core processing unit`

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:xs="http://www.w3.org/2001/XMLSchema"
        xmlns:xd="http://www.oxygenxml.com/ns/doc/xsl"
        xmlns:cylian="local-ns-for-extension-functions"
        exclude-result-prefixes="xs xd cylian"
        version="2.0">

      <xsl:import href="sub1.xsl"/>  
      <xsl:import href="sub2.xsl"/>  
      <!--and more-->  

      <!-- variable to hold intermediate results for stage1 -->
      <xsl:variable name="stage1">
          <cylianz>
              <xsl:copy-of select="$a" copy-namespaces="no"/>
              <xsl:copy-of select="$b" copy-namespaces="no"/>
              <!--and more-->
          </cylianz>
      </xsl:variable>

      <!-- variable to hold intermediate results for stage2 -->
      <xsl:variable name="stage2">
          <cylianz>
            <xsl:for-each select="$stage1//cylian">
                <xsl:sort select="@pos"/>
                <xsl:sequence select="."/>
            </xsl:for-each>
          </cylianz>
      </xsl:variable>
      <xsl:template name="procA">
          <xsl:for-each select="$stage2//cylian">
              <xsl:result-document href="{concat($outdir,@href)}" format="general">
                  <xsl:call-template name="procB">
                        <xsl:with-param name="context" select="."/>
                        <xsl:with-param name="title">
                            <xsl:value-of select="$book_title"/>
                        </xsl:with-param>
                   </xsl:call-template>
              </xsl:result-document>
          </xsl:for-each>
      </xsl:template>
     <xsl:template name="procB">
         <xsl:param name="context"/>
         <xsl:param name="title"/>
         <html xmlns="http://www.w3.org/1999/xhtml">
         <head>
              <xsl:call-template name="header">
                  <xsl:with-param name="title" select="$title"/>
               </xsl:call-template>
         </head>
         <body>
              <div id="root">
                  <xsl:apply-templates select="."/>
              </div>
         </body>
    </html>
</xsl:template>

<!--
 1/ other rules are shortened for clarity
 2/ declaration «xmlns:cylian='local-ns-for-extension-functions'» has to retain, some parts of transformation uses some extension functions from that namespace
-->

</xsl:transform> 
```

这是输出： `a.html`

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta xmlns="" http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
      <title xmlns="">BookTitle</title>
          <!--
              2012.04.16 - 18:27:36 [XSLT processor: SAXON 9.1.0.5 from Saxonica]
          -->
      <link xmlns="" href="isbn.css" type="text/css" rel="stylesheet"/>
   </head>
   <body>
      <div id="root">
         <div xmlns="" id="a1">
            <!--...-->
         </div>
      </div>
   </body>
</html> 
```

我希望它会更容易理解发生了什么问题。欢迎所有建议。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T11:47:35.163

好吧，我们需要确定您的代码，但我怀疑您有例如

```
<xsl:template match="/">
  <foo xmlns="http://example.com/ns">
    <xsl:apply-templates/>
  </foo>
</xsl:template>

<xsl:template match="whatever">
  <bar/>
</xsl:template> 
```

然后你得到

```
<foo xmlns="http://example.com/ns">
  <bar xmlns=""/>
</foo> 
```

当你想要的时候

```
<foo xmlns="http://example.com/ns">
  <bar/>
</foo> 
```

要解决这个问题，请确保您在 xsl:stylesheet 元素上移动默认命名空间声明，例如

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns="http://example.com/ns">
  version="1.0">

    <xsl:template match="/">
      <foo>
        <xsl:apply-templates/>
      </foo>
    </xsl:template>

    <xsl:template match="whatever">
      <bar/>
    </xsl:template>

</xsl:stylesheet> 
```

这样，它适用于在不同模板中创建的所有结果元素。

[编辑]根据您现在提供的示例，我认为我的建议是正确的，只有几个文件您需要确保您已将所有样式表模块放在`xmlns="http://www.w3.org/1999/xhtml"`相应的`xsl:stylesheet`元素上`xsl:transform`，以便所有结果元素最终都位于 XHTML 命名空间中。

[第二次编辑]我想你想要

```
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns="http://www.w3.org/1999/xhtml"
        xmlns:xs="http://www.w3.org/2001/XMLSchema"
        xmlns:xd="http://www.oxygenxml.com/ns/doc/xsl"
        xmlns:cylian="local-ns-for-extension-functions"
        exclude-result-prefixes="xs xd cylian"
        version="2.0">

      <xsl:import href="sub1.xsl"/>  
      <xsl:import href="sub2.xsl"/>  
      <!--and more-->  

      <!-- variable to hold intermediate results for stage1 -->
      <xsl:variable name="stage1" xmlns="">
          <cylianz>
              <xsl:copy-of select="$a" copy-namespaces="no"/>
              <xsl:copy-of select="$b" copy-namespaces="no"/>
              <!--and more-->
          </cylianz>
      </xsl:variable>

      <!-- variable to hold intermediate results for stage2 -->
      <xsl:variable name="stage2" xmlns="">
          <cylianz>
            <xsl:for-each select="$stage1//cylian">
                <xsl:sort select="@pos"/>
                <xsl:sequence select="."/>
            </xsl:for-each>
          </cylianz>
      </xsl:variable>
      <xsl:template name="procA">
          <xsl:for-each select="$stage2//cylian">
              <xsl:result-document href="{concat($outdir,@href)}" format="general">
                  <xsl:call-template name="procB">
                        <xsl:with-param name="context" select="."/>
                        <xsl:with-param name="title">
                            <xsl:value-of select="$book_title"/>
                        </xsl:with-param>
                   </xsl:call-template>
              </xsl:result-document>
          </xsl:for-each>
      </xsl:template>
     <xsl:template name="procB">
         <xsl:param name="context"/>
         <xsl:param name="title"/>
         <html >
         <head>
              <xsl:call-template name="header">
                  <xsl:with-param name="title" select="$title"/>
               </xsl:call-template>
         </head>
         <body>
              <div id="root">
                  <xsl:apply-templates select="."/>
              </div>
         </body>
    </html>
</xsl:template>

</xsl:transform> 
```

然后，如果您有任何额外的模块应该生成 XHTML 元素，请确保您放置`xmlns="http://www.w3.org/1999/xhtml"`在模块的根元素上，或者如果您需要在其他名称空间中创建元素以及任何应该输出 XHTML 的模板。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T11:59:02.297

输出中可能会出现两种“不需要的”命名空间声明：不需要的声明，因为它们是多余的噪音（它们声明了未使用的命名空间前缀），以及不需要的声明，因为它们将元素放在与预期的命名空间不同。

在第一种情况下，XSLT 提供了诸如 exclude-result-prefixes 和 copy-namespaces='no' 之类的特性来消除噪音。

在第二种情况下（我认为你是这样的），命名空间声明是样式表作者首先在错误的命名空间中创建元素这一事实的症状，解决方案是查看创建的代码元素，并修复它。例如`<foo>`，当您打算`<foo xmlns="something"/>`在其他命名空间中创建元素时，您可能编写了一个文字结果元素，该元素在非命名空间中创建元素。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T12:53:37.967

**让我们拥有这个 XML 文档**：

```
<x:t xmlns:x="some:x">
 <a/>
 <b/>
</x:t> 
```

**这是可能与您的代码相似的代码**：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

    <xsl:template match="/*">
      <t xmlns="some:x">
        <xsl:copy-of select="*" copy-namespaces="no"/>
      </t>
    </xsl:template>
</xsl:stylesheet> 
```

**它会产生这种不需要的结果**：

```
<t xmlns="some:x">
   <a xmlns=""/>
   <b xmlns=""/>
</t> 
```

**为什么会产生这个结果？**

因为您使用`<xsl:copy-of>`的节点是“按原样”复制的，所以元素不会更改它们所在的命名空间。该属性`copy-namespaces="no"`仅指定属于该元素的命名空间节点将被跳过复制——而不是该元素将改变自己的命名空间。

**解决方案**：

当我们想要更改元素所在的命名空间时（在本例中从“no namespace”更改为“some:x”，我们不应该复制此元素节点。

相反，我们必须从这个元素中创建一个新元素，并指定新元素应该位于的新命名空间：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

    <xsl:template match="/*">
      <t xmlns="some:x">
        <xsl:apply-templates select="*"/>
      </t>
    </xsl:template>

    <xsl:template match="*">
      <xsl:element name="{local-name()}" namespace="some:x">
        <xsl:apply-templates select="node() | @*"/>
      </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，会产生所需的正确结果**：

```
<t xmlns="some:x">
   <a/>
   <b/>
</t> 
```

# javascript - 查找用户计算机的语言（网络）

> ID：10173142
> 
> 赞同：1
> 
> 时间：2012-04-16T11:20:50.430
> 
> 标签：javascript, html, localization

> **可能重复：**
> [用于检测浏览器语言偏好的 JavaScript](https://stackoverflow.com/questions/1043339/javascript-for-detecting-browser-language-preference)

是否可以从网络应用程序中找到用户计算机/浏览器的语言？我正在使用html5和js。我不是在搜索 ipdatabases 解决方案，您可能可以找到国家语言，但找不到计算机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T11:23:25.823

也许您正在寻找[window.navigator.language](https://developer.mozilla.org/en/Document_Object_Model_%28DOM%29/window.navigator.language)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:23:24.810

试试这个：

```
<script type="text/javascript">  
    var userLang = (navigator.language) ?     
    navigator.language : navigator.userLanguage;   alert ("The language is: " + 
        userLang);  
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T11:26:12.610

要从服务器端执行此操作，您可以查看[“Accept-Language”标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4)。这为用户提供了在浏览器中设置的语言偏好。

其他 JS 版本不可靠。

# android - android 4突出显示WebView中的选定按钮

> ID：10173144
> 
> 赞同：0
> 
> 时间：2012-04-16T11:21:04.967
> 
> 标签：android, android-webview, android-4.0-ice-cream-sandwich

我编写了一个简单的 WebView 应用程序并在 android 2.3 上对其进行了测试。当我按下向上/向下箭头键时，所选按钮以橙色框突出显示。我已经在带有 android 4 的模拟器中测试了这个应用程序，并且没有突出显示。我仍然可以使用键盘导航并按下按钮，但没有选择指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:28:07.233

我找到了答案：我的项目有一个旧的 api 版本：（8，适用于 Android 2.2）。用15替换它解决了这个问题。

# ruby-on-rails - Rails 3 中的 ActionView::MissingTemplate

> ID：10173146
> 
> 赞同：0
> 
> 时间：2012-04-16T11:21:09.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是 Rails 新手，我想在我的 Rails 应用程序中按照[http://railscasts.com/episodes/260-messaging-with-faye](http://railscasts.com/episodes/260-messaging-with-faye)实现聊天，但我无法渲染

控制器 ：

```
def index @messages = Chat.all // all available chats 
```

我收到以下错误：

```
Missing partial chats/chat with {:handlers=>[:builder, :erb, :coffee], :formats=>[:html], :locale=>[:en, :en]}. Searched in:
  * "/home/swagata/Desktop/swagata_new/swagata/app/views"
  * "/home/swagata/.rvm/gems/ruby-1.8.7-p160@swagata/gems/devise-2.0.4/app/views" 
```

我尝试创建一个部分名称 _chat.js.erb，但没有运气。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:28:56.290

Rails 正在尝试呈现 HTML 片段，但您提供的唯一部分被标记为 Javascript 片段。

您可能需要一个名为 _chat.html.erb 的 HTML-erb 部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:27:47.760

如果您想使用 json 调用来呈现消息；在你的控制器中

```
def index
  @messages = Chat.all
  respond_to do |format|
   format.js { render "chat" }
  end 
end 
```

在您的视图文件中，应该有一个没有下划线的 chat.js.erb 文件。您的 chat.js.erb 可能包含例如；

`$('#chat').html("<%=j render '/messages' ");` 在 id 为 "chat" 的 div 处呈现消息的行。

并且在同一目录中应该有一个 _messages.html.erb 文件来呈现@messages。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:26:32.270

创建 chat.erb 并检查它是否正常工作

# c# - 更改字体和字体大小的最简单方法

> ID：10173147
> 
> 赞同：68
> 
> 时间：2012-04-16T11:21:29.133
> 
> 标签：c#, winforms, fonts

这是使用 C# 更改字体大小的最简单方法。

使用 java，这一切都可以通过调用带有必要参数的 Font 构造函数来轻松完成。

```
JLabel lab  = new JLabel("Font Bold at 24");
lab.setFont(new Font("Serif", Font.BOLD, 24)); 
```

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-04-16T11:25:10.177

也许是这样的：

```
yourformName.YourLabel.Font = new Font("Arial", 24,FontStyle.Bold); 
```

或者，如果您与表单在同一个班级，那么只需执行以下操作：

```
YourLabel.Font = new Font("Arial", 24,FontStyle.Bold); 
```

构造函数采用不同的参数（所以选择你的毒药）。像这样：

```
Font(Font, FontStyle)   
Font(FontFamily, Single)
Font(String, Single)
Font(FontFamily, Single, FontStyle)
Font(FontFamily, Single, GraphicsUnit)
Font(String, Single, FontStyle)
Font(String, Single, GraphicsUnit)
Font(FontFamily, Single, FontStyle, GraphicsUnit)
Font(String, Single, FontStyle, GraphicsUnit)
Font(FontFamily, Single, FontStyle, GraphicsUnit, Byte)
Font(String, Single, FontStyle, GraphicsUnit, Byte)
Font(FontFamily, Single, FontStyle, GraphicsUnit, Byte, Boolean)
Font(String, Single, FontStyle, GraphicsUnit, Byte, Boolean) 
```

参考[这里](http://msdn.microsoft.com/en-us/library/system.drawing.font.aspx)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-09-10T08:32:29.477

Use this one to change only font size not the name of the font

```
label1.Font = new System.Drawing.Font(label1.Font.Name, 24F); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-16T11:33:17.190

使用[Font Class](http://msdn.microsoft.com/en-us/library/system.drawing.font.aspx)设置控件的字体和样式。

尝试[字体构造器（字符串，单）](http://msdn.microsoft.com/en-us/library/164w6x6z.aspx)

```
Label lab  = new Label();
lab.Text ="Font Bold at 24";
lab.Font = new Font("Arial", 20); 
```

或者

```
lab.Font = new Font(FontFamily.GenericSansSerif,
            12.0F, FontStyle.Bold); 
```

要获得安装的字体，请参阅 - [.NET System.Drawing.Font - Get Available Sizes and Styles](https://stackoverflow.com/questions/8661181/net-system-drawing-font-get-available-sizes-and-styles)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-16T11:30:30.423

这应该这样做（也加粗）；

```
label1.Font = new Font("Serif", 24,FontStyle.Bold); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-09-15T20:17:17.413

您还可以创建一个变量，然后将其分配给文本。这很酷，因为您可以为其分配两个或更多文本。

**要分配变量，请执行此操作**

```
public partial class Sayfa1 : Form

   Font Normal = new Font("Segoe UI", 9, FontStyle.Bold);

    public Sayfa1() 
```

该变量尚未分配给任何文本。为此，请编写文本的名称（查看比例->（名称）），然后编写“.Font”，然后调用您的字体变量的名称。

```
lupusToolStripMenuItem.Font = Normal; 
```

现在您有一个分配给 Normal 字体的文本。我希望我能有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-23T12:59:42.553

您可以使用属性面板中的标签属性更改它。 [此屏幕截图是示例](https://i.stack.imgur.com/03kyY.png)

# c# - 有没有办法让 XmlDocument 解析不那么严格

> ID：10173148
> 
> 赞同：1
> 
> 时间：2012-04-16T11:21:29.323
> 
> 标签：c#, xml, xmldocument

我正在制作一个将其数据存储在 XML 文件中的程序。当人们编写 XML 时，他们可能会犯一些细微的错误，例如以“`-`看起来像”来结束注释或在属性中`<!-- comment --->`添加一个。`</>`当然，XML 仍然可以正常读取，但是尝试将此文本输入到 XmlDocument 中会出现语法错误（并且不会被解析）。

有没有办法让 XmlDocument 不那么严格，并使其忽略不使文档无法解析的标准违规行为？例如，很明显它`<!-- comment --->`仍然是一个注释，即使它`-`在末尾包含违反标准规范）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T11:26:06.173

不，这是一件好事。

XML 是一种严格的格式，这里的解决方案是正确（更正）输入。

所有 XML 工具在设计上都非常挑剔。使用 XMLReeader 并修复或拒绝错误元素可能会有一些运气。

但是使用合适的工具创建 XML 要好得多。其中不少被命名为[XmlPad](https://www.google.nl/search?q=xmlpad&ie=utf-8&oe=utf-8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:32:46.377

不，XML 解析器应该拒绝不是有效 XML 的输入。

您可以尝试通过[Tidy](http://tidynet.sourceforge.net/)预处理无效文件，但最好确保输入有效。

这是一个示例用法。Tidy 会修复您的评论并进行一些转义，但额外的开头 < 往往会破坏事情 - 在这种情况下猜测实在是太难了。

```
Tidy tidy = new Tidy();
tidy.Options.FixComments = true;
tidy.Options.XmlTags = true;
tidy.Options.XmlOut = true;

string invalid = "<root>< <!--comment--->></root>";
MemoryStream input = new MemoryStream(Encoding.UTF8.GetBytes(invalid));
MemoryStream output = new MemoryStream();
tidy.Parse(input, output, new TidyMessageCollection());
// TODO check the messages

string repaired = Encoding.UTF8.GetString(output.ToArray()); 
```

# javascript - 将脚本标记放在等效于 jQuery 的 document.ready 方法的标记之前

> ID：10173149
> 
> 赞同：6
> 
> 时间：2012-04-16T11:21:35.047
> 
> 标签：javascript, jquery

如果我们在关闭正文之前的脚本标签中调用 javascript 方法`myMethod()`，是否等同于`myMethod()`在 jQuery 的 document.ready 函数内部调用？如果不是，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T11:25:15.983

从[这里](http://encosia.com/document-ready-and-pageload-are-not-the-same/)：

> 底层：$(document).ready() 正如您对 John Resig 所期望的那样，jQuery 确定 DOM 何时准备就绪的方法使用了各种优化。例如，如果浏览器支持 DOMContentLoaded 事件（正如许多非 IE 浏览器所做的那样），那么它将触发该事件。但是，在文档的 readyState 达到“完成”之前，IE 不能安全地触发，这通常是稍后。如果这些优化都不可用，window.onload 将触发事件。

这些事件独立于 HTML 标记中的位置，因为即使在呈现时其他事件仍在进行`</body>`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T11:22:49.743

不，它不一样，您将`<script>`标签放在结束`</body>`标签之前以避免阻塞旧浏览器上的 html 呈现，AFAIK，但您不能保证 DOM 已“准备好”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:47:17.100

不完全是。对在加载 DOM 并且浏览器知道页面上的所有元素（而不是内容本身）后立即触发`$(document).ready();`的所谓事件做出反应。`DOMContentLoaded`

通常将代码放在这些块中的主要原因与防止并行加载阻塞无关，而是确保在页面加载期间要操作的元素实际加载并存在于 DOM 树中。操作浏览器不知道的元素没有多大意义，对吧？

将 JavaScript 内容（或任何其他内容）放在页面底部实际上与`onload`页面完成加载后触发的事件更密切相关，包括内容本身。无论哪种方式，几乎可以肯定`$(document).ready()`块内的内容将在页面底部的内容之前执行，但是如果您加载`ready()`块内的代码所依赖的外部库，则不能将它们放在页面底部。

一般来说，如果您的代码不依赖于外部库并且成功加载 DOM，您可以安全地将其放在页面底部。但是，如果您有需要在 DOM 加载后立即执行的内容，您肯定希望该代码`$(document).ready()`块中，但请记住，您可以将该块放置在任何您想要的位置，即使在页面中间（有时这可能是一个不错的技巧）。

# linux - 在 Linux 中检查 Tomcat 服务器的状态

> ID：10173151
> 
> 赞同：4
> 
> 时间：2012-04-16T11:21:39.287
> 
> 标签：linux, apache, tomcat, tomcat7

我需要知道 Tomcat 7.0.2.3 是否开启。

我收到显示此消息的错误页面：

```
HTTP Status 404 - /cas/login

type Status report

 message /cas/login

description The requested resource (/cas/login) is not available.
 Apache Tomcat/7.0.23 
```

我需要检查状态并在 Linux 中启动 Tomcat 的服务。我努力了：

```
#/bin/startup.sh
#rctomcat7 start 
```

但所有这些都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:27:12.840

就像其他人指出的那样，如果您收到[404 的 HTTP 标准响应代码，](https://en.wikipedia.org/wiki/HTTP_404)则表示 Tomcat 已启动。

但是要回答您的问题，您可以尝试

```
#rctomcat7 状态
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T13:21:58.140

我用过下面的脚本。此脚本检查 tomcat post 和进程是否正在运行，如果没有，则启动 tomcat。

Tomcat 启动脚本

```
if netstat -tulpen | grep 18880 && ps -ef | grep tomcat | grep java

then

    echo "Tomcat Running"

else

    echo "Tomcat Stopped"

    /bin/sh /tomcat/bin/startup.sh

fi 
```

# blackberry - deviceReady 每次我在 Blackberry 中执行 changePage() 时调用

> ID：10173155
> 
> 赞同：3
> 
> 时间：2012-04-16T11:22:31.070
> 
> 标签：blackberry, jquery-mobile, cordova

我有一个使用 phonegap 1.6.0 和 JQM 1.1.0 在 iOS 和 Android 上开发的应用程序。

现在我对黑莓使用了相同的代码。我在一个 HTML 中有很多页面。我只是不断地改变页面。但我面临的问题是，每次我执行 changePage() 时都会触发设备就绪。这在 iOS 和 Android 中不会发生……为什么会发生？

下面是我的代码

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" id="viewport" content="width=device-width,height=device- height,initial-scale=1.0,user-scalable=no">
<script src="cordova-1.6.0.js" type="text/javascript"></script> 
<script type="text/javascript" src="jquery/jquery-1.7.1.min.js"></script>
<link rel="stylesheet" href="jquerymobile/jquery.mobile-1.1.0.min.css" />
<script type="text/javascript" src="jquerymobile/jquery.mobile-1.1.0.min.js"></script>
<script type="text/javascript">

    //---------------------------------------------------------------------
    // Cordova event listeners
    //---------------------------------------------------------------------

   function onDeviceReady() {
    alert("Inside Device Ready");
    }

    // register Cordova event listeners when DOM content loaded
    function init() {
        console.log('init()');
        document.addEventListener("deviceready", onDeviceReady, true); 
    }

</script>
<title>Cordova API Sample</title>
</head>
<body onload="init()">

   <div data-role="page" id="home">
<div data-role="header">
<h1>Here is the index page.</h1>
</div>

<div data-role="content">
<p><center>Below you may transition to our other pages.</center></p>

<a href="#about" data-ajax="false" data-role="button" data-inline="true">About  Me</a>
</div>
</div>

<div data-role="page" id="about">
<div data-role="header">
<h1>About Us</h1>
</div>

<div data-role="content">
<a href="#home" data-ajax="false" data-role="button" data-inline="true">Back Home</a>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T04:54:20.347

在此，您必须为准备好的设备再创建一个 js 文件。要将您的函数调用到此文件中以获取下面的新 js 文件代码。

```
//---------------------------------------------------------------------
// Cordova event listeners
//---------------------------------------------------------------------

function onDeviceReady() {
    alert("Inside Device Ready");
    }

// register Cordova event listeners when DOM content loaded
function init() {
    console.log('init()');
    document.addEventListener("deviceready", onDeviceReady, true); 
} 
```

需要时调用此脚本。像这样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:15:52.693

我的 9800 模拟器中有一个错误。我重新安装了它，它工作。

# android - Eclipse 在更改属性时挂起

> ID：10173157
> 
> 赞同：1
> 
> 时间：2012-04-16T11:22:38.427
> 
> 标签：android, eclipse, adt

我遇到了 eclipse 的问题，之后我在 eclipse 中创建了新的 Android 项目，当我尝试更改 android 项目属性时，当我选择 Android 选项卡时，eclipse 会挂起很长时间，然后加载 android 包。每次我都会发生这种情况转到项目属性。请帮我解决这个问题。

# android - Android自定义主题：横向和纵向模式不同的主题

> ID：10173158
> 
> 赞同：10
> 
> 时间：2012-04-16T11:22:41.690
> 
> 标签：android, android-layout, actionbarsherlock, android-theme

我将自定义主题应用于我的活动：`<activity android:theme="@style/MyTheme">`，我在其中定义了我在此活动中使用的 ActionBarSherlock 的大小。像这样的东西：

```
<style name="MyTheme" parent="@style/Theme.Sherlock.Light.DarkActionBar">
    <item name="actionBarSize">45dp</item>                             
    <item name="android:actionBarSize">45dp</item>     
</style> 
```

虽然这个尺寸适合纵向模式，但我发现它在横向模式下太大了。如何在横向模式下应用不同的主题，或者当用户在横向使用应用程序时如何更改操作栏大小？有什么建议么？谢谢你。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-16T20:22:40.940

创建两个不同的styles.xml。将一个放入 res/values-port，另一个放入 res/values-land

# javascript - iOS Webkit 只读输入可选？

> ID：10173161
> 
> 赞同：1
> 
> 时间：2012-04-16T11:22:55.247
> 
> 标签：javascript, jquery, html, ios, webkit

我有一个使用只读输入的网站。在桌面上，我使用 js 在第一次单击时选择输入字段。

```
<input readonly="readonly" type="text" class="select" value="Value to select">

$('.select').click(function(){
    $(this).select();
}); 
```

但在 iOS 版 Safari 中，我根本无法选择输入文本（长按文本）。有没有办法使文本可选？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:27:12.350

你试过这样的事情吗？有时焦点解决了问题，也许浏览器不知道 select() 应该触发事件？：

```
$(this).focus().trigger('select'); 
```

# css - CSS 居中文本

> ID：10173162
> 
> 赞同：0
> 
> 时间：2012-04-16T11:23:03.373
> 
> 标签：css

黄色条是`width:100%`标题

无论侧面文字的长度如何，我都想实现**MAIN TEXT**始终**居中。**

文本之间的边距为 100px

图片：

![在此处输入图像描述](../Images/f1b5aa6e3d64a23b538ac5bd6de61a6b.png)

提前致谢

编辑：到目前为止的 HTML 和 CSS：

HTML：

```
 <html>
    <head>
    </head>
    <body>
    <center>
    <div id="top"></div>
    Text Logo
    <span id="mainText"> Menu Links </span>
    Username: <?php echo $uname; ?>
    </center>
    </body>
    </html> 
```

CSS：

```
 #mainText {

    margin-right:100px;
    margin-left:100px;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:36:16.030

如果我理解可能是你想要的。

**CSS**

```
.left{
    float:left;
    background:yellow;
}
.right{
    float:right;
    background:green;
}
.middle{
    display:inline-block;
    *display:inline/*For IE7*/
    *zoom:1;
    vertical-align:top;
    background:red;
    margin:0 100px;
}
.parent{
    text-align:center;
}
.parent div{
    text-align:left;
} 
```

**HTML**

```
<div class="parent">
 <p class="left">L side Text</p>
 <p class="middle">Center side Text</p>
 <p class="right">R side Text</p>
</div> 
```

检查这个[http://jsfiddle.net/XhMtK/3/](http://jsfiddle.net/XhMtK/3/)

**更新**

愿这就是你想要的

检查这个[http://jsfiddle.net/XhMtK/4/](http://jsfiddle.net/XhMtK/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:36:32.907

嗨，你可以像这样使用浮点数

**CSS**

```
.one{
width:90%;
    margin:0 auto;
    overflow:hidden;
    background:green;
    text-align:center;
}

.left{
    float:left;
    background:yellow;
    width:20%;

}

.center{
    margin:0 auto;
    background:pink;
    width:50%;

}

.right{
    float:right;
    background:red;
    width:20%;

} 
```

**HTML**

```
<div class="one">
    <div class="left">Left</div>
    <div class="right">right</div>
    <div class="center">center</div>
</div> 
```

现场演示[http://jsfiddle.net/rohitazad/JNxsZ/2/](http://jsfiddle.net/rohitazad/JNxsZ/2/) ​</p>

# php - PHP - 如何在某些条件下附加数组

> ID：10173163
> 
> 赞同：-1
> 
> 时间：2012-04-16T11:23:03.577
> 
> 标签：php, arrays

```
$list = array(
               [0]=> array(
                            [name]=>'James' 
                            [group]=>''
                          )
               [1]=> array(
                            [name]=>'Bobby' 
                            [group]=>''
                          )
             ) 
```

我正在寻找更新名称为“Bobby”的项目“组”。我正在寻找以下两种格式的解决方案。预先感谢您的回复。干杯。马克。

```
array_push($list, ???) 
```

和

```
$list[] ??? = someting 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:28:20.520

据我所知，没有办法用给定的语法之一更新你的数组。

我能做的唯一类似的事情是使用 array_walk 循环数组 ... [http://www.php.net/manual/en/function.array-walk.php](http://www.php.net/manual/en/function.array-walk.php)

例子：

```
array_walk($list, function($val, $key) use(&$list){
    if ($val['name'] == 'Bobby') {
        // If you'd use $val['group'] here you'd just editing a copy :)
        $list[$key]['group'] = "someting";
    }
}); 
```

**编辑：**示例是使用匿名函数，这只能从 PHP 5.3 开始。文档还提供了使用旧 PHP 版本的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:38:24.593

此代码可以帮助您：

```
$listSize = count($list);

for( $i = 0; $i < $listSize; ++$i ) {
    if( $list[$i]['name'] == 'Bobby' ) {
        $list[$i]['group'] = 'Hai';
    }
} 
```

`array_push()`与更新值无关，它只是将另一个值添加到数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:34:09.613

您不可能有适合这两种格式的解决方案。隐式数组推送`$var[]`是一种语法结构，你不能发明新的 - 当然不是在 PHP 中，也不是大多数（所有？）其他语言。

除此之外，您所做的*不是*将项目推到阵列上。一方面，推送项目意味着一个索引数组（你的是关联的），另一方面，推送意味着向数组添加一个键（你要更新的键已经存在）。

您可以编写一个函数来执行此操作，如下所示：

```
function array_update(&$array, $newData, $where = array(), $strict = FALSE) {
  // Check input vars are arrays
  if (!is_array($array) || !is_array($newData) || !is_array($where)) return FALSE;
  $updated = 0;
  foreach ($array as &$item) { // Loop main array
    foreach ($where as $key => $val) { // Loop condition array and compare with current item
      if (!isset($item[$key]) || (!$strict && $item[$key] != $val) || ($strict && $item[$key] !== $val)) {
        continue 2; // if item is not a match, skip to the next one
      }
    }
    // If we get this far, item should be updated
    $item = array_merge($item, $newData);
    $updated++;
  }
  return $updated;
}

// Usage
$newData = array(
  'group' => '???'
);
$where = array(
  'name' => 'Bobby'
);

array_update($list, $newData, $where);

// Input $array and $newData array are required, $where array can be omitted to
// update all items in $array. Supply TRUE to the forth argument to force strict
// typed comparisons when looking for item(s) to update. Multiple keys can be
// supplied in $where to match more than one condition.

// Returns the number of items in the input array that were modified, or FALSE on error. 
```

# fireworks - 如何动画棒臂

> ID：10173167
> 
> 赞同：-1
> 
> 时间：2012-04-16T11:23:16.933
> 
> 标签：fireworks

我知道这是一个非常基本的问题，但我已经被这个网络开发任务深深地投入了，我已经设法在 firewowkrs 上创建了 2 个非常好的图像，但我不知道如何为它们制作动画。我有玩了一些控件，例如状态和东西，但我仍然不明白，我尝试了组合路径，但这似乎对我不起作用。我想简单地为他们的双臂制作动画，以显示他们正在上下挥动。它由棍臂组成，然后手臂也有四个棍指，如果这有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T02:36:25.483

本教程可能会帮助您掌握 firworks 中动画的基础知识，它对我有用

[http://www.adobe.com/devnet/fireworks/articles/animated_logos.html](http://www.adobe.com/devnet/fireworks/articles/animated_logos.html)

或者您可以在 adobe 网站上阅读一些基础知识：

[烟花 CS4 基础知识](http://help.adobe.com/en_US/Fireworks/10.0_Using/WS4c25cfbb1410b0021e63e3d1152b00d51f-7ffe.html)

或者

[烟花 CS5 基础知识](http://help.adobe.com/en_US/fireworks/cs/using/WS4c25cfbb1410b0021e63e3d1152b00d51f-7ffe.html)

希望这可以帮助

# php - ZF2 依赖注入别名和多个实例

> ID：10173171
> 
> 赞同：3
> 
> 时间：2012-04-16T11:23:32.270
> 
> 标签：php, dependency-injection, zend-framework2

我们目前正在 Zend Framework 2 中编写一个模块。

我在查找这方面的文档时遇到了一些麻烦，但我知道这是可能的。

我想通过依赖注入来设置层次结构中的 3 个类。让我们称这些类；A 类、B 类和 C 类。

ClassA 包含一个 ClassB 实例数组，ClassB 包含一个 ClassC 实例数组。ClassB 的每个实例都应该使用不同的参数进行实例化。这同样适用于 C 类。所有 3 个类的参数都通过构造函数传入（如果需要，也可以使用 setter 处理。）。

```
<?php
class ClassA {
    protected $arrClassBInstances = array();

    public function __construct( $arrClassBInstances ) {
         $this->arrClassBInstances = $arrClassBInstances;
    }
}

class ClassB {
    protected $arrClassCInstances = array();
    protected $someOtherParam = "";

    public function __construct( $arrClassCInstances, $someOtherParam ) {
         $this->arrClassBInstances = $arrClassCInstances;
         $this->someOtherParam = $someOtherParam;

    }
}

class ClassC {
    protected $someParam = "";

    public function __construct( $someParam ) {
         $this->someParam = $someParam;
    }
} 
```

所以他们是我问题的两个部分。首先，如何配置注入不同参数的同一类的多个实例？例如，ClassB 的多个实例，每个实例都有自己的 ClassC 实例子集。ZF2 DiC 中必须有某种别名。

其次，我如何将一组重新配置依赖项注入到一个类中。例如，如何将 ClassB 实例数组注入 ClassA？

如果可能，请在 module.config.php 的 DI 部分中提供直接使用 DiC 的示例以及实现此目的的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T03:32:34.817

这是如何使用 DI 配置文件执行此操作的两个示例。看：

[https://github.com/ralphschindler/Zend_DI-Examples/blob/master/example-08.php](https://github.com/ralphschindler/Zend_DI-Examples/blob/master/example-08.php)

[https://github.com/ralphschindler/Zend_DI-Examples/blob/master/example-15.php](https://github.com/ralphschindler/Zend_DI-Examples/blob/master/example-15.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T21:55:24.033

我刚刚写了一篇关于这个主题的帖子。我个人没有使用 Di 类或 DiC，但希望您会发现这些概念可以直接应用于您的问题，尤其是在第 2 部分中，无论您选择使用什么作为 IoCC。 [http://zendblog.shinymayhem.com/2012/09/using-servicemanager-as-inversion-of.html](http://zendblog.shinymayhem.com/2012/09/using-servicemanager-as-inversion-of.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T05:04:41.810

从[文档](http://packages.zendframework.com/docs/latest/manual/en/learning.di.simplest-usage-case-2-classes-one-consumes-the-other.html)中，我认为这应该有效：

```
// $event instance of \Zend\Mvc\MvcEvent
$di = $event->getTarget()->getLocator();
$paramsForA = array(
    $di->get('qualified_namespaces_or_di_alias_for_b', array('arrClassCInstances'=>array(
        $di->get('qualified_namespaces_or_di_alias_for_c', array('someParam'=>1)),
        $di->get('qualified_namespaces_or_di_alias_for_c', array('someParam'=>2)),
    ))),
    $di->get('qualified_namespaces_or_di_alias_for_b', array('arrClassCInstances'=>array(
        $di->get('qualified_namespaces_or_di_alias_for_c', array('someParam'=>3)),
        $di->get('qualified_namespaces_or_di_alias_for_c', array('someParam'=>4)),
    ))),
);
$classA = $di->get('qualified_namespaces_or_di_alias_for_a', array('arrClassBInstances'=>$paramsForA)); 
```

您可以使用`DI alias`或`full qualified namespace`作为第一个参数`$di->get()`

# asp.net - Orchard CMS - Settings.txt 排除 webdeploy

> ID：10173175
> 
> 赞同：3
> 
> 时间：2012-04-16T11:23:54.547
> 
> 标签：asp.net, asp.net-mvc-3, visual-studio-2010, orchardcms, microsoft-web-deploy

如何从 Orchard CMS 的 webdeploy 中排除 \App_Data\orchard\App_Data\Sites\Default\Settings.txt（从源代码编译）

已经尝试了很多不同的文件路径，直接设置.txt。它总是再次上传。

![在此处输入图像描述](../Images/2f7ab244b4bcef2b6d9c2231669f0efb.png)

设置

![在此处输入图像描述](../Images/9d63ad228730f17c9ed4ca153931cc4d.png)

所有作品

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
<DebugType>pdbonly</DebugType>
<Optimize>true</Optimize>
<OutputPath>bin\</OutputPath>
<DefineConstants>TRACE</DefineConstants>
<ErrorReport>prompt</ErrorReport>
<WarningLevel>4</WarningLevel>
<CodeAnalysisRuleSet>AllRules.ruleset</CodeAnalysisRuleSet>
<PlatformTarget>AnyCPU</PlatformTarget>
<ExcludeApp_Data>false</ExcludeApp_Data>
<FilesToIncludeForPublish>OnlyFilesToRunTheApp</FilesToIncludeForPublish>
<ExcludeFilesFromDeployment>orchard\App_Data\Sites\Default\Settings.txt</ExcludeFilesFromDeployment> 
```

这不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T02:16:02.587

您是否尝试过在第一个屏幕上检查“从 App_Data 文件夹中排除文件”？实际上，在进行站点更新时，您根本不需要从本地计算机复制此文件夹。

除了 Settings.txt，App_Data 文件夹还包含日志和依赖程序集（由 Orchard 动态发现）。你也不想用你的本地副本覆盖那些，所以排除整个 App_Data 是一种方法。或者，也许您有特定的理由不这样做？

# facebook - 在页面中渲染 facebook 打开图形预览

> ID：10173176
> 
> 赞同：3
> 
> 时间：2012-04-16T11:23:54.967
> 
> 标签：facebook, facebook-javascript-sdk, facebook-opengraph

使用 javascript sdk 时，应用程序会打开一个带有链接的对话框，facebook 将根据其中的 og 标签获取该链接的某种显示，并将其放入 id 为“UIStoryAttachment”的元素中。

有没有办法以某种方式在我选择的容器元素内产生相同的*UIStoryAttachment显示？*例如，类似于：

```
<div id="storyContainer">
    <div class="fb-story" data-url="MY_PAGE_URL"></div>
</div> 
```

接着：

```
FB.XFBML.parse(document.getElementById("storyContainer")); 
```

这当然不存在，但是有什么类似的吗？

谢谢。

# java - 使用 maven 在 java 项目中运行时的 NoClassDefFoundError

> ID：10173177
> 
> 赞同：2
> 
> 时间：2012-04-16T11:23:57.540
> 
> 标签：java, maven, m2eclipse

我有一个 maven java 项目（比如 X 和 Y），我已将 Y 添加到项目 X（pom 文件）的依赖项列表中，并将 Y 导入到 X 中的类...并且 jar 安装到 m2 repositorhy 和 maven build在编译时成功且没有错误，但在运行时它为 Y 中的类抛出 NoClassDefFoundError ......我是这个 maven 的新手，请帮我解决这个问题..

java.lang.NoClassDefFoundError: ../nw_diagnosis/SocketExceptionHandler

谢谢斯里坎特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:51:19.833

您的 X 项目是“jar”项目还是“战争”项目？

如果你构建一个 jar，你的 Y 项目（我假设这个是一个 jar）不包含在你的 X 项目的类路径中，这是正常行为。

如果是这样，您必须在类路径中使用 Y.jar 运行您的 X 项目，或者将您的 X 项目构建为“jar-with-dependencies”，见下文：

[http://www.springone2gx.com/blog/scott_leberknight/2008/06/creating_executable_jars_using_the_maven_assembly_plugin](http://www.springone2gx.com/blog/scott_leberknight/2008/06/creating_executable_jars_using_the_maven_assembly_plugin)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:42:11.823

我怀疑这是您的应用程序所依赖的工件之一中的可选依赖项的问题。

无论如何，解决这个问题的一般方法是：

*   根据异常消息找出缺少的类，
*   找出 JAR 文件包含或应该包含缺少的类，
*   找出 maven group/artifact/version 对应于缺少的 JAR，以及
*   将相应的依赖项添加到项目的 POM 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:37:16.807

您是在命令行上构建，然后尝试在 Eclipse 中运行吗？M2e 不喜欢这样。从 Eclipse 中清理并重建所有项目，然后尝试运行。

# android - Webview 奇怪的行为

> ID：10173179
> 
> 赞同：0
> 
> 时间：2012-04-16T11:24:11.137
> 
> 标签：android, webview

我正在开发一个android应用程序，在这里我有点困惑，首先，我在webview中加载了一个html表单数据。然后从我第一页的链接导航到不同的其他页面。现在回到第一页，我在“onBackPressed()”方法中使用了以下代码。但它在第一页上显示了空的网页视图。为了避免我添加了另一个下面写的 if 条件，但结果仍然相同，

```
if(webview.canGoBack() == true)
{
    webview.goBack();
    if(!webview.canGoBack())
        webview.loadDataWithBaseURL("http://xyz.com/feed/", data, "text/html", "utf-8", null);
}
// if now on fist page then do the following
else if(activityno==2) {
    Intent fav = new Intent(Views.this, FavroiteShow.class);
    startActivity(fav);
}
//on first page and activity no is not 2 then do the following
else
   finish();
} 
```

就像，如果 webview 可以返回，只需返回并且什么都不做。否则，如果 webview 无法返回，则检查活动号并查找其中的代码，否则完成。我想添加一件事，如果 webview 已经来到第一页。然后加载我的数据，无论活动是什么。

我哪里错了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:02:03.863

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    if ((keyCode == KeyEvent.KEYCODE_BACK) && webview.canGoBack()) {
        webview.goBack();
        return true;
    } else if (!webview.canGoBack()) {
        webview.loadDataWithBaseURL("http://xyz.com/feed/", data,
                "text/html", "utf-8", null);
        // if now on fist page then do the following
        if (activityno == 2) {
            Intent fav = new Intent(Views.this, FavroiteShow.class);
            startActivity(fav);
        }
        else {
            finish();
        }
    }

    return super.onKeyDown(keyCode, event);
} 
```

我使用了覆盖的 Class `onKeyDown`。并在此处检查 KeyEvent。

希望这对你有用..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:26:48.567

现在试试..

```
 if(webview.canGoBack() == true)
           webview.goBack();
   else  //if there is no history available
         webview.loadDataWithBaseURL("http://xyz.com/feed/", data, "text/html", "utf-8", null); 
```

# php - mysql UNIX_TIMESTAMP 返回不正确的值

> ID：10173184
> 
> 赞同：1
> 
> 时间：2012-04-16T11:24:55.607
> 
> 标签：php, mysql

我在 mysql 中有以下日期存储在 DATETIME 字段中：

```
2012-04-16 16:21:54 
```

比我这样选择它：

```
SELECT UNIX_TIMESTAMP(date) .... 
```

但是如果我使用 php date 函数打印小时，我会得到一小时的差异：

```
echo date("H:i:s", $row->date) 
```

会打印：

```
17:21:54 
```

如果没有第二个参数，日期函数将返回正确的值。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:38:20.787

根据mysql手册 -

`UNIX_TIMESTAMP()`,`UNIX_TIMESTAMP(date)`

如果不带参数调用，则返回 Unix 时间戳（自 '1970-01-01 00:00:00' UTC 以来的秒数）作为无符号整数。如果`UNIX_TIMESTAMP()`使用日期参数调用，则返回参数的值作为自 '1970-01-01 00:00:00' UTC 以来的秒数。date 可以是 DATE 字符串、DATETIME 字符串、TIMESTAMP 或格式为 YYMMDD 或 YYYYMMDD 的数字。服务器***将 date 解释为当前时区中的值，并将其转换为 UTC 中的内部值***。客户端可以设置他们的时区，如第 10.6 节，“MySQL 服务器时区支持”中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:28:05.603

通过添加“e”，您可以获得该时间戳的时区。

它可能与不同的时区有关。尝试使用[http://www.php.net/manual/en/function.date-timezone-set.php](http://www.php.net/manual/en/function.date-timezone-set.php)。

如果这不起作用，请探索日期函数的其余部分：http: [//php.net/manual/en/book.datetime.php](http://php.net/manual/en/book.datetime.php)

# c# - 嵌入式操作系统中不释放弱引用

> ID：10173185
> 
> 赞同：11
> 
> 时间：2012-04-16T11:25:02.457
> 
> 标签：c#, memory-leaks, weak-references

我在这里有一个奇怪的行为：我在生产中运行 WPF 应用程序时出现大量内存泄漏，该应用程序在 DLOG 终端（Windows Embedded Standard SP1）上运行，如果我在普通桌面上本地运行它，它的行为非常好（Win7 prof .)

在多次尝试发现任何问题均未成功后，我将其中一个直接放在显示器旁边，安装了 ANTs MemoryProfiler，并在终端和我的开发 PC 上模拟用户操作进行了一小时的测试运行。

结果是，由于一些奇怪的原因，嵌入式系统堆积了大量的 WeakReference 和 EffectiveValueEntry[] 对象。

以下是一些图片：

开发（PC）： ![在此处输入图像描述](../Images/5b124d76738c6bba42ff850694fff111.png)

![在此处输入图像描述](../Images/a76efe8ad34647dda13dc0ee5ad03c75.png)

和终端： ![在此处输入图像描述](../Images/3571878cc51d4cfe62b96df438b9ed6c.png)

看看班级名单... ![在此处输入图像描述](../Images/66b6e3d520ea27db9f86e1edf5082b45.png)

有没有人见过这样的事情，有没有已知的解决方案？我在哪里可以获得帮助？

（PS 安装了为 .net4 准备的图像的终端）

PPS：对于近距离投票者：我认为问题很明确：我该如何解决这个问题。您可能会争论这是 IT/OS 问题还是编程问题，但我认为如果我在**Server Fault**中发布此内容，它很快就会离题...

更新：我能够找到问题的很大一部分——但它感觉有点像 C++：我使用类似 ViewModel 的 Items 类来提供（除其他外）一个 ICommand（RelayCommand 模式）的 WPF-List。在视图的 ViewModel-Property 的 getter 中动态创建的项目，似乎应用程序/GC 从未释放那些未使用的命令 - 或对其 CanExecuteChanged 的​​订阅 - 内存分析器将这些显示为“由弱参考”。我更改了我的代码以重用这些项目视图模型并将 Dispose/set 设置为 null 他们的 Dispose 中的每个使用的属性，并将其也用作清理 - 正如我所说：在那些旧的 C++ 时代感觉就像“删除”。最重要的是，我每 30 分钟使用一次强制 GC.Collect（是的，我知道 - 你永远不应该 - 但到目前为止我没有其他解决方案）。

我不明白为什么那些 WeakReferences 没有像在我的台式机上那样被声明...

对此有什么想法吗？请！

更新：我仍然无法确定这个问题，但我看到一个奇怪的行为：如果我使用 PC-Anywhere 观察我的软件在其中一个终端上的操作，问题就会消失！即使在运行 8 小时后。软件直接运行 - 它甚至会释放内存（我在主屏幕上放了一个小内存计数器显示 - 假设我连接到终端并看到内存不足 - 等待几分钟后内存被回收)

所以我认为德文（下面的一个答案）在正确的方向上领先——远程控制软件中的某些东西可以解除对终结器线程或任何阻塞 GC 的阻塞——无论是模拟键盘/鼠标还是其他什么。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T22:32:27.743

我们在平板电脑上运行我的应用程序时遇到了（有点）类似的问题。在桌面上运行时内存会被回收，但在平板电脑或其他使用 PC 输入面板的设备上运行时不会。问题是完成队列被卡住了。COM 对象终结器正在等待在没有消息循环的主线程上运行某些东西。

解决方案是找到足够的时间来调用`Application.DoEvents()`. 我们有一个会被间歇性调用的方法，我们每 10 次调用就调用它一次。我不知道这是否与您遇到的问题相同，但也许它可以提供一些启示。

编辑：我确实需要说清楚，总的来说，打电话`DoEvents()`是个坏主意。它在这种情况下有效，因为该线程上没有任何 UI 或这些事件可能干扰的任何其他事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T16:00:33.483

从屏幕截图中有趣的是，LOH 在增长的同时使用的空间并没有增长太多。LOH 处的可用空间增长很多，这表明由于固定对象导致内存碎片。这看起来像一个卡住的终结器线程，它确实阻止了托管对象的清理。您应该获得内存转储并检查终结器线程被卡住的方法。您可以使用 Windbg 轻松完成此操作。

# java - 如何在邮件服务器上测试安全的 SMTP 邮件服务

> ID：10173187
> 
> 赞同：2
> 
> 时间：2012-04-16T11:25:10.667
> 
> 标签：java, sockets, email, smtp, network-protocols

我正在开发一个项目，以在 Java 中自动配置用户的电子邮件服务器设置。我正在从他的电子邮件地址中提取邮件服务器，并`DirContext`使用`com.sun.jndi.dns.DnsContextFactory`.

然后我打开`Socket`每个服务器并使用`HELO`命令测试它们并检查响应。

我的问题是，这仅在我使用不安全的 SMTP 端口 25 进行测试时才有效。如何将它与安全端口 465 一起使用？

我尝试通过使用安全套接字

```
SSLSocketFactory sslsocketfactory = (SSLSocketFactory)SSLSocketFactory.getDefault();
SSLSocket socket = (SSLSocket)sslsocketfactory.createSocket(mailserver, STANDARD_SMTP_PORT); 
```

但是所有连接都会出现超时异常，如下所示

```
alt1.gmail-smtp-in.l.google.com. java.net.ConnectException: Operation timed out 
```

请帮忙。

更多信息：我没有创建邮件客户端。这是为了简化现有邮件客户端的邮件服务器设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:18:23.680

SMTP-SSL（端口 465）afaik 已被弃用，因此与其尝试连接到 ssl 套接字，不如在端口 25（或 587 用于 smtp auth 连接）上实际连接“纯文本”，但发送**EHLO**而不是*HELO*并查看是否服务器支持 STARTTLS，它取代了已弃用的 SMTP-SSL。客户端发送 STARTTLS 命令后，连接被加密，因此，端口 25 本身并不是“不安全的”

```
telnet alt1.gmail-smtp-in.l.google.com 25
Trying 173.194.71.26...
Connected to alt1.gmail-smtp-in.l.google.com.
Escape character is '^]'.
220 mx.google.com ESMTP i7si4620651lbb.76
EHLO myserver.com
250-mx.google.com at your service, [x.x.x.x]
250-SIZE 35882577
250-8BITMIME
250-STARTTLS                  <<--------- this is what you're looking for
250 ENHANCEDSTATUSCODES
STARTTLS      <<--- client command to actually start encrypting the traffic
220 2.0.0 Ready to start TLS 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:31:50.610

在与服务器建立连接之前，您是否对程序进行了身份验证。每个远程邮件服务器都需要对尝试建立套接字连接的机器进行身份验证。例如，如果您使用 javaMail 库，您将获得添加用户名和密码的选项。在 java 中使用简单套接字时，您需要找到一种解决方法

# cordova - 将 PhoneGap 事件（如后退按钮）绑定到 ember.js 中的视图的最佳方法是什么

> ID：10173188
> 
> 赞同：1
> 
> 时间：2012-04-16T11:25:14.787
> 
> 标签：cordova, ember.js

我正在使用 PhoneGap 和 emberjs（尝试构建基于 ember.js 的“概念验证”移动/HTML5 应用程序）。

Ember.js 本身工作正常，但我还没有找到任何将 PhoneGap 事件“绑定”到视图的好方法。

例如，我想处理后退按钮事件并删除它的视图。在视图类中定义行为并在添加视图实例时调用 document.addEventListener 并在删除视图实例时调用 document.removeEventListener 会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:52:41.230

我在 SC2.0 [gist](https://gist.github.com/1376360)上做了类似的事情。

查看[事件调度](https://github.com/emberjs/ember.js/blob/master/packages/ember-views/lib/system/event_dispatcher.js) 程序以了解如何在视图上添加自定义委托事件。

在应用程序启动例程中注入它应该不难。

我希望它对你有帮助。

# gtk - GTK+ (2.0) - 在 GtkEntry 上发出“点击”信号？

> ID：10173190
> 
> 赞同：5
> 
> 时间：2012-04-16T11:25:28.023
> 
> 标签：gtk, signals, gtk2, click, gtkentry

我正在用 GTK+ 2.0 测试一些信号。我正在寻找一种在单击 GtkEntry 时发出信号的方法。

```
if (widgets_info[i].action & IG_INPUT)
    {
      widget->frame[i] = gtk_entry_new_with_max_length(MAX_INPUT_LENGTH);
      gtk_entry_set_text(widget->frame[i], widgets_info[i].text);
      catch_signal(widget->frame[i], MY_SIGNAL, &change_entry, widget);
    } 
```

我的条目 ( `widgets_info[i].text`) 中有一个预先选择的文本，如果用户单击我的 GtkEntry，我希望该文本消失。

有人知道这个信号是什么吗？

*（对不起我的英语不好）*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T12:32:42.407

尝试[focus-in-event](http://developer.gnome.org/gtk3/stable/GtkWidget.html#GtkWidget-focus-in-event)，请注意您必须按照文档中的说明启用焦点跟踪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:28:07.347

button-press-event 信号应该做你需要的：http: [//developer.gnome.org/gtk3/stable/GtkWidget.html#GtkWidget-button-press-event](http://developer.gnome.org/gtk3/stable/GtkWidget.html#GtkWidget-button-press-event)

但是，在 GTK+ 3 中，GtkEntry 现在支持占位符文本的这种想法，因此您不需要自己实现它：http: [//developer.gnome.org/gtk3/stable/GtkEntry.html#gtk-entry-set-占位符文本](http://developer.gnome.org/gtk3/stable/GtkEntry.html#gtk-entry-set-placeholder-text)

# android - 一段时间后，BroadCast Receiver 调用意图 android

> ID：10173191
> 
> 赞同：1
> 
> 时间：2012-04-16T11:25:31.877
> 
> 标签：android

```
public class myReceiver extends BroadcastReceiver {
    public static boolean wasScreenOn = true;

    @Override
    public void onReceive(final Context context, Intent recievedIntent) {

        if (recievedIntent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
            wasScreenOn = false;

            Intent intent = new Intent(context,
                    myActivity.class);
            intent.setAction(Intent.ACTION_MAIN);
            intent.setFlags(Intent.FLAG_ACTIVITY_NO_USER_ACTION);
            intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
            intent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
            intent.setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
            context.startActivity(intent
                    .addFlags(Intent.FLAG_ACTIVITY_NEW_TASK));

        } else if (recievedIntent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
            wasScreenOn = true;
        }
    }
} 
```

调用操作屏幕后的活动显示。

我的活动.class

使用 KeyguardManager 禁用Keyguard 并启动服务。在服务中注册接收器。现在当用户关闭设备然后调用 ACTION_SCREEN_OFF 并且当点击主页按钮然后调用 ACTION_SCREEN_ON 但是当我多次按下主页按钮时会出现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T12:38:32.580

在接收者标签的清单中添加一行

接收器 android:name=".MyBoardCast" android:enabled="true"

# html - 如何在固定大小的 div 中水平居中按钮？

> ID：10173196
> 
> 赞同：8
> 
> 时间：2012-04-16T11:25:53.237
> 
> 标签：html, css

下面是代码，一个 div 中有两个按钮。

```
<div style="position:relative; width: 300px; height: 30px; border: 1px solid;">
<input type="button" value="ok" style="position:relative; width: 70px; height: 30px;">
<input type="button" value="ok" style="position:relative; width: 70px; height: 30px;">
</div> 
```

如何以固定大小水平居中按钮？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-16T11:29:04.620

将`text-align:center;`CSS 添加到`<div>`将使按钮居中。您还应该考虑将*样式*与*内容*分开，这主要[是](http://en.wikipedia.org/wiki/Separation_of_presentation_and_content)为了减少重复。例如

### CSS

```
div {
    position:relative;
    width:300px;
    height:30px;
    border:1px solid;
    text-align:center;
}

input {
    position:relative;
    width:70px;
    height:30px;
} 
```

### HTML

```
<div>
    <input type="button" value="ok"/>
    <input type="button" value="ok"/>
</div> 
```

**编辑：**国家的[官方定义`text-align`](http://www.w3.org/wiki/CSS/Properties/text-align)：

> text-align 属性描述块容器的行内级内容如何对齐

因此它将*所有*内联级别元素居中并且[`<input>`](http://www.w3.org/TR/html401/interact/forms.html#h-17.4)是内联元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:28:54.373

尝试这个：

```
<div style="position:relative; width: 300px; height: 30px; border: 1px solid; text-align:center;">
<input type="button" value="ok" style="position:relative; width: 70px; height: 30px;">
<input type="button" value="ok" style="position:relative; width: 70px; height: 30px;">
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:04:47.747

给**文本对齐：中心；**到您的主 div 并且不需要使用内联 css 我们应该通过外部**CSS**文件定义 css 类，在这里我们不需要任何类型的定位，我们可以通过简单的**CSS轻松完成**

```
**CSS**

  div {
  width: 300px; 
  height: 30px; 
  border: 1px solid; 
  text-align:center;
  }
  .button {
   width: 70px; 
   height: 30px;
  } 
```

**HTML**

```
<div>
<input type="button" value="ok" class="button">
<input type="button" value="ok" class="button">
</div> 
```

演示：- [http://jsbin.com/evomik/10/edit](http://jsbin.com/evomik/10/edit)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-16T11:28:43.697

```
<div style="position:relative; width: 300px; height: 30px; border: 1px solid;">
<div id="button_container" style="margin-left:auto; margin-right:auto;">
<input type="button" value="ok" style="position:relative; width: 70px; height: 30px;">
<input type="button" value="ok" style="position:relative; width: 70px; height: 30px;">
</div>
</div> 
```

# java - 如何使用 Lucene 和 Java 计算 tf-idf 的余弦相似度

> ID：10173202
> 
> 赞同：2
> 
> 时间：2012-04-16T11:26:18.800
> 
> 标签：java, lucene, tf-idf, cosine-similarity

我有一个查询和一组文件。我需要根据与 tf-idf 的余弦相似度对这些文档进行排名。有人可以告诉我可以从 Lucene 获得什么支持来计算它吗？我可以直接从 Lucene 计算哪些参数（我可以通过 lucene 中的某种方法直接获得 tf、idf 吗？）以及如何计算与 Lucene 的余弦相似度（如果我传递查询的两个向量和文件？）

提前感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T11:45:01.167

Lucene 已经使用了余弦相似度的拉皮条版本，因此如果您需要原始 CS 本身，它可能是可行的。我推荐讨论 Lucene 评分的[官方页面](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/scoring.html)。

如果您想自己提取该信息，这将是*tf*步骤的概述：

1.  索引语料库；
2.  打开一个`IndexReader`；
3.  遍历所有文档 ID，从 0 到`maxDoc()`;
4.  `getTermFreqVector(doc, fieldName);`
5.  遍历并行数组`tfv.getTerms()`和`tfv.getTermFrequencies()`.

至于*docFreq*，使用`IndexReader.terms()`和迭代这个调用`termEnum.docFreq()`。

# c# - 无法使用 ActiveDocument.Path 获得正确的文件路径

> ID：10173209
> 
> 赞同：0
> 
> 时间：2012-04-16T11:26:44.370
> 
> 标签：c#, ms-word

我有一个 Word 插件，在一个地方我正在使用 ActiveDocument.Path 检索活动文档的完整路径。

从 Lotus Notes 打开一个 word 文件，我得到的路径是“C:/DOCUME~1/GEN127~1/LOCALS~1/Temp/notes80BDBD/some-file”。

为什么我得到那些“`”标志，对于从桌面或本地打开的普通文件，它显示正确的路径。

出了什么问题？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:30:49.487

它显示的是短路径而不是长路径。
这可能是因为 Office 使用旧的 DOS 样式路径。

这是一篇关于如何将其转换为普通长路径的简短文章：http:
[//csharparticles.blogspot.com/2005/07/long-and-short-file-name-conversion-in.html](http://csharparticles.blogspot.com/2005/07/long-and-short-file-name-conversion-in.html)

# excel - excel文件中的matlab列数

> ID：10173210
> 
> 赞同：0
> 
> 时间：2012-04-16T11:26:44.893
> 
> 标签：excel, matlab

是否有Matlab的命令来获取excel文件中写入的列数？

这是我的excel文件： ![在此处输入图像描述](../Images/c905aa890cddfc8bb64a31f1709d14e7.png)

这是我的代码：

```
e = actxserver ('Excel.Application'); %# open Activex server
filename = fullfile(pwd,'example2.xlsx'); %# full path required
ewb = e.Workbooks.Open(filename); %# open the file
esh = ewb.ActiveSheet; 
```

我试过了：

```
intCol = Range('IV1').End(xlLeft).Col; 
```

谢谢你 ：]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:07:08.580

关于什么：

```
[num, txt, raw] = xlsread('example2.xlsx');
intCol = size(raw, 2); 
```

# c++ - 关于名称隐藏和虚函数的混淆

> ID：10173211
> 
> 赞同：7
> 
> 时间：2012-04-16T11:26:45.340
> 
> 标签：c++, virtual, overriding, name-hiding

参考另一个[so问题](https://stackoverflow.com/questions/1628768/why-does-an-overridden-function-in-the-derived-class-hide-other-overloads-of-the)

考虑代码：

```
class Base {
public: 
    virtual void gogo(int a){
        printf(" Base :: gogo (int) \n");
    };

    virtual void gogo(int* a){
        printf(" Base :: gogo (int*) \n");
    };
};

class Derived : public Base{
public:
    virtual void gogo(int* a){
        printf(" Derived :: gogo (int*) \n");
    };
};

int main(){

    // 1)       
    Derived * obj = new Derived ; 
    obj->gogo(7);  // this is illegal because of name hiding

    // 2)      
    Base* obj = new Derived ;
    obj->gogo(7); // this is legal
} 
```

对于案例 2)

调用`obj->gogo(7)`在运行时解决。

既然`obj->gogo(7)`是合法的。这似乎暗示 vtable of包含应该隐藏的`Derived`ptr 。`virtual void gogo(int a)`

我的困惑是，由于名称隐藏导致案例 1) 是非法的，那么如何在运行时解决 2) 中的调用

a) Derived 的 vtable 是否包含指向 gogo(int) 的指针。

b) 如果 a) 不为真，对虚函数的调用解析是否继续到基类的 vtable。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T11:48:25.727

您正在混淆虚拟函数调用和重载解析。

所有派生类都有包含所有虚函数的 vtable，来自基类和任何其他自己的虚函数。这用于在**运行时**解析调用，例如您的案例 2）。

**在情况 1) 中，您在编译时**从重载解析中得到一个错误。由于名称隐藏，类`Derived`只有一个可调用函数。您唯一的选择是使用`int*`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T13:03:54.823

您想覆盖重载函数，但隐藏规则不能这样工作。

“隐藏规则说，内部范围内的实体将具有相同名称的事物隐藏在外部范围内。”

请注意，它具有不同的签名是无关紧要的，`gogo(int* a)`即将从基础隐藏所有`gogo(whatever)`功能。仅当您的函数具有相同的名称、相同的签名和虚拟时才会发生覆盖（因此，只会`gogo(int* a)`被覆盖）。

C++FAQ 书建议使用“调用非重载虚拟的非虚拟重载”。（第 29.05 章）。基本上，您在基类中创建非虚拟重载函数：

`gogo(int a) and gogo(int* a)`

它将分别调用虚函数：

> 虚拟 gogo_i(int a) 和虚拟 gogo_pi(int* a)

并在派生类中覆盖这个虚拟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T12:13:25.407

基本上，函数重载只有在同名函数定义在同一个范围内时才会发生。现在，基类有自己的范围，派生类有自己的范围。

因此，当您不在派生类中重新定义函数并调用该函数时，编译器会检查派生的范围，发现其中没有定义这样的函数。然后它检查基类的范围，发现函数并相应地将函数调用绑定到这个特定的定义。

但是，当您重新定义具有不同签名的函数时，编译器会将调用与该函数匹配，看到不一致并简单地抱怨。

您可以通过在派生类定义中添加“using Base::gogo;”来更改此行为。我希望这能解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T11:35:47.717

由于您将第二个声明`obj`为 a `Base*`，因此 vtable 为其提供了`Base`. 虽然对于被 覆盖的虚方法，被覆盖的`Derived`版本被调用，但其他方法（或方法重载）仍然是在 中声明的那些`Base`。

但是，如果您将指针声明为`Derived*`，则 vtable 将为它提供 的方法`Derived`，将具有相同名称的方法隐藏在`Base`. 因此，`obj->gogo(7);`将不起作用。同样，这也是非法的：

```
Base* obj = new Derived();

// legal, since obj is a pointer to Base, it contains the gogo(int) method.
obj->gogo(7); 

// illegal, it has been cast into a pointer to Derived. gogo(int) is hidden.
(reinterpret_cast<Derived*>(obj))->gogo(7); 
```

这是合法的：

```
Derived* obj = new Derived ;
obj->Base::gogo(7); // legal. 
```

见[这里](http://ideone.com/CA9DM)。

# windows-phone-7 - 改变 wp7 全景控制中的重叠

> ID：10173212
> 
> 赞同：1
> 
> 时间：2012-04-16T11:26:46.830
> 
> 标签：windows-phone-7, panorama-control

默认情况下，wp7 全景图中的下一个项目会渗入当前选定的全景项目几个像素，我想显示更多的下一个项目。

有没有办法控制像素的数量？我尝试设置边距和填充并尝试编辑 controlTemplate，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:19:24.773

Ok, the way to do this is to wrap the content of the panoramaItem into a WrapPanel and set the orientation of the panoramaItem to horizontal.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:19:41.120

如果您这样做，您是否会违反 Panorama 控件的设计准则，因此该控件不再是 Panorama 控件，从而使您的应用程序与使用未修改版本的控件的其他应用程序不一致？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:37:34.167

您可以给全景项目负边距：

边距="-24,0,0,0"

# eclipse - MyEclipse 7.5 SVN 插件安装不起作用

> ID：10173215
> 
> 赞同：0
> 
> 时间：2012-04-16T11:27:03.270
> 
> 标签：eclipse, svn, eclipse-plugin, myeclipse

```
I have myeclipse 7.5 and i want to install svn plugin.

When i enter  Name: Subclipse URL:  http://subclipse.tigris.org/update_1.6.x in the add site it give this error 

 This profile can not be resolved because required software could not be located.
  Could not locate installable unit:   org.tigris.subversion.clientadapter.feature.feature.group 0.0.0
  Could not locate installable unit: org.tigris.subversion.subclipse.graph.feature.feature.group 0.0.0
  Could not locate installable unit: org.tigris.subversion.clientadapter.javahl.feature.feature.group 0.0.0
  Could not locate installable unit: com.collabnet.subversion.merge.feature.feature.group 0.0.0
  Could not locate installable unit: org.tigris.subversion.clientadapter.svnkit.feature.feature.group 0.0.0
  Could not locate installable unit: org.tigris.subversion.subclipse.feature.group 0.0.0
  Could not load update site: http://download.eclipse.org/eclipse/updates/3.4
  Could not load update site: http://download.eclipse.org/releases/ganymede
  Checked update site http://downloads.myeclipseide.com/downloads/products/eworkbench/7.0/updates and found 816 installable units.
  Checked update site http://downloads.myeclipseide.com/downloads/products/eworkbench/7.0/updates/supporting and found 21 installable units.
  Checked update site http://downloads.myeclipseide.com/downloads/products/eworkbench/jdks and found 6 installable units.
  Checked update site http://downloads.poweredbypulse.com/downloads/products/pulse/client and found 116 installable units.
  Checked update site http://downloads.poweredbypulse.com/downloads/products/pulse/ganymede and found 104 installable units.
  Checked update site http://eclipse.poweredbypulse.com/downloads/aux/eclipse-mirror/eclipse/updates/3.4 and found 1809 installable units.
  Checked update site http://eclipse.poweredbypulse.com/downloads/aux/eclipse-mirror/releases/ganymede and found 2420 installable units.
  Checked update site http://eclipse.poweredbypulse.com/downloads/products/pulse/client and found 116 installable units.
  Checked update site http://eclipse.poweredbypulse.com/downloads/products/pulse/eclipse34 and found 1 installable units.
  Could not load update site: http://subclipse.tigris.org/update_1.6.x
  Checked update site http://www.poweredbypulse.com/pulse/download/live and found 1 installable units. 
```

当我搜索 Subclipse 以搜索添加时，它仍然无法安装。请帮我 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:15:36.250

在 MyEclipse 中，您应该使用配置中心来安装插件。`Help`-> `MyEclipse Configuration Center`。

# javascript - 如何制作一个 Javascript 库？

> ID：10173218
> 
> 赞同：-3
> 
> 时间：2012-04-16T11:27:24.893
> 
> 标签：javascript, lotus-notes, dom-events, javascript-framework

我想知道我们如何在**Javascript 库**中编写以下代码片段：

```
<SCRIPT FOR="eventlib" EVENT="MyEvent(strTest)">
alert("Uploading files...please wait");
    </SCRIPT> 
```

以及下面的代码片段：

```
 <SCRIPT LANGUAGE="JScript">
        function ctrl::ClickEvent(a,b)
        {
            alert("MyWindowControl_ClickEvent");
        }
      </SCRIPT> 
```

当我尝试在**Javascript LIBRARY**中编写上述代码段时出现语法错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:38:17.747

插入 Lotus Notes javascript 库时不能包含脚本标记。只有功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:02:15.583

我们可以编写一个 Javascript 函数，而不是编写 Script 块。我们可以从事件处理程序中调用它。

# jquery - 没有'px'的固定元素上'right'的jQuery值

> ID：10173230
> 
> 赞同：6
> 
> 时间：2012-04-16T11:27:44.193
> 
> 标签：jquery, css, css-position

有一些类似的标题（例如，[here](https://stackoverflow.com/questions/3043102/how-to-get-right-offset-of-an-element-jquery)、[here](https://stackoverflow.com/questions/8690463/get-a-number-for-a-style-value-without-the-px-suffix)和[here](https://stackoverflow.com/questions/4652546/jquery-getting-px-position-of-an-element-in-integer-format)），但我拒绝相信它看起来像它们所暗示的那样复杂。下面给出了值“20px”。我怎样才能让它只返回'20'？

```
var base=$('#id').css('right'); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-16T11:30:01.383

`parseInt()`返回解析的整数。

```
var cssValue = $('#id').css('right'); //returns 20px
var parsedCssValue = parseInt(cssValue); //returns 20 
```

# javascript - E4x删除节点中的某物等于某物的节点

> ID：10173231
> 
> 赞同：0
> 
> 时间：2012-04-16T11:27:45.447
> 
> 标签：javascript, xml, e4x

所以我有一些xml....

```
<parentnode>
 <childnode>
  <babynode id="1">
    <parameter>goes here</parameter>
  <babynode />
 <childnode />
<parentnode />
<parentnode>
 <childnode>
  <babynode id="2">
    <parameter>goes here</parameter>
  <babynode />
 <childnode />
<parentnode /> 
```

...并且，使用e4x，我想删除以删除babynode id等于某物的父节点。例如，婴儿节点 id 为 2，我想删除从 . 开始的整个节点`<parentnode>`。

我知道我可以执行 var xml = the xml 然后删除 xml.parentnode 但我不确定如何指定要删除的父节点。

我敢肯定这可能很简单，而且我可能很傻，但是有人能指出我正确的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T02:38:19.563

首先，如果您的环境是浏览器甚至是 Firefox 扩展，我建议您不要继续使用 E4X，因为他们已弃用它。

话虽这么说，在尝试做你想做的事情时，这是我在测试什么有效（很少）和什么无效时可以找到的。

尽管它很有用，而且它似乎适合过滤器/访问器语法，但删除父级（或在您的情况下为祖父级）似乎不起作用（至少当我尝试使用 Mozilla 的 E4X 引擎时） --btw，我记得，`function::`下面使用的可能只在 Spidermonkey 中支持）。

```
var a = <a>
  <b>
  <c/>
  </b>
  </a>;
delete a.b.c.parent(); // Removing parent() will delete <c/>

alert(a); // <b/> is not deleted 
```

因此，自然而然地，以您为例：

```
var xml = <><parentnode>
 <childnode>
  <babynode id="1">
    <parameter>goes here</parameter>
  </babynode>
 </childnode>
</parentnode>
<parentnode>
 <childnode>
  <babynode id="2">
    <parameter>goes here</parameter>
  </babynode>
 </childnode>
</parentnode></>; 
```

...而这（使用`..`后代选择器）：

```
alert(xml..*.(function::attribute('id') == "2")[0].parent().parent()); // I'm also not sure why the formatting of the attribute cannot be obtained by `xml..*.(@id == "2")` without giving an error since id is not a reserved word, but anyways... 
```

...确实得到了`<parentnode>`你想要的，像下面这样删除它是行不通的：

```
delete xml..*.(function::attribute('id') == "2")[0].parent().parent(); 
```

...即使这样：

```
delete xml..*.(function::attribute('id') == "2")[0]; 
```

...至少会删除`<babynode>`您要删除的部分。

从理论上讲，我认为以下（即，没有`*`选择后代的过滤元素而不是仅仅过滤祖先的标记）应该可以工作（或者至少如果这样做会很好！）：

```
delete xml..(function::attribute('id') == "2")[0]; 
```

...但事实并非如此。

即使以这种方式访问​​元素（不获取后代）似乎也不起作用：

```
alert(xml..(function::attribute('id') == "2")[0]); 
```

即使我们避免使用 XMLList（`<></>`如果您不熟悉它，就是上面使用的简写语法）并将 XML 包装在某个命名元素中，例如`<container>`，删除或访问仍然不起作用：

```
delete xml.container..(function::attribute('id') == "2")[0]; 
```

你可以看看[http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-357.pdf](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-357.pdf)看看你的阅读是否应该允许这样做，但无论如何它都不起作用，在至少我试过了。

因此，据我所知，唯一的解决方案是遍历元素并手动跟踪您的位置，而不是使用过滤器。

# php - PHP for 循环未在 HTML 电子邮件中完全迭代

> ID：10173232
> 
> 赞同：1
> 
> 时间：2012-04-16T11:27:52.240
> 
> 标签：php, html, for-loop

我有一个 PHP 脚本，我通过它发送 HTML 电子邮件。我正在使用“for”循环来收集数据并将其存储在变量中。循环被指示运行 25 次。问题是它只循环了 19 次。我检查了语法中是否有任何未编码的标签或拼写错误，但没有找到。我发布了 for 循环部分，以防你们中的任何人发现我看不到的东西。这真的令人沮丧，因为我认为解决方案非常简单，但我无法发现问题。

我的“mail()”函数的标题很好。他们在这里以防万一

```
$headers = "From: $from \r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n"; 
```

这是我的 for 循环：

```
$abc ="<table width='600'>";
        $abc .= "<tr>
                        <td bgcolor='#d6bf86'><span style='color:#9c2a00'>Number of Products</span></td>
                        <td align='center' bgcolor='#fde4d0'>$pagess</td>
                        <td align='center' bgcolor='#c3deb9'>$pagese</td>
                        <td align='center' bgcolor='#bee7f8'>$pagesu</td>
                    </tr>";

        for($i=1; $i<=25; $i++)
        {
            $abc .="<tr>";
            if($i % 2 == 0)     //  EVEN ROW
            {       
                    $abc .= "<td bgcolor='#d6bf86' width='260'><span style='color:#9c2a00'>".${f.$i}."</span></td>";
            }
            else                //  ODD ROW
            {
                    $abc .= "<td bgcolor='#fffbd0' width='260'><span style='color:#9c2a00'>".${f.$i}."</span></td>";
            }

                    if(isset(${s.$i}))      
                    {
                        $abc .= "<td bgcolor='#fde4d0' align='center'>Yes</td>";
                        ${s.$i} = "Yes";
                    }
                    else
                    {
                        $abc .= "<td bgcolor='#fde4d0' align='center'>No</td>";
                        ${s.$i} = "No";
                    }
                    if(isset(${e.$i}))
                    {
                        $abc .= "<td bgcolor='#c3deb9' align='center'>No</td>";
                        ${e.$i} = "Yes";
                    }
                    else
                    {
                        $abc .= "<td bgcolor='#c3deb9' align='center'>Yes</td>";
                        ${e.$i} = "No";
                    }
                    if(isset(${u.$i}))
                    {
                        $abc .= "<td bgcolor='#bee7f8' align='center'>No</td>";
                        ${u.$i} = "Yes";
                    }
                    else
                    {
                        $abc .= "<td bgcolor='#bee7f8' align='center'>Yes</td>";
                        ${u.$i} = "No";
                    }
            $abc .="</tr>";
        }

        if(isset($_POST['dscs']))   //  DISCOUNT HAS BEEN APPLIED
        {

            $abc .= "<tr>
                            <td>Base Price</td>
                            <td align='center'>$sums</td>
                            <td align='center'>$sume</td>
                            <td align='center'>$sumu</td>
                        </tr>";
            $abc .= "<tr>
                            <td>Discount Offered</td>
                            <td align='center'>$discount% </td>
                            <td align='center'>$discount% </td>
                            <td align='center'>$discount% </td>
                        </tr>";
            $abc .= "<tr>
                            <td>Effective Price</td>
                            <td align='center'>$dscs</td>
                            <td align='center'>$dsce</td>
                            <td align='center'>$dscu</td>
                      </tr>";
        }
        else
        {
            $dscs = $sums;
            $dsce = $sume;
            $dscu = $sumu;
            $abc .= "<tr>
                            <td>Total Price</td>
                            <td align='center'>$sums</td>
                            <td align='center'>$sume</td>
                            <td align='center'>$sumu</td>
                        </tr>";
        }

        $abc .="</table>"; 
```

我可以附上正在发送的电子邮件的屏幕截图，以了解代码是如何破坏的。如果你也想要截图，请告诉我。

PS：我将此代码复制粘贴到一个单独的文件中并运行它，它工作正常。循环迭代了 25 次。这让我相信将其放入 HTML 电子邮件中存在问题。

如果有帮助，还可以添加电子邮件脚本：

```
$to = $clem;
$subject = "Something goes here";
$message = "<html>
<head></head>
<body style='background-color:#ffffff; font-family:Lucida Sans Unicode, Lucida Grande, sans-serif;'>
    <table width='600'>
        <tr>
            <td>$abc</td>
        </tr>
    </table>
</body>
</html>";

$from = "$logged_user";
$headers = "From: $from \r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
$res=mail($to,$subject,$message,$headers); 
```

在此先感谢，尼萨尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:11:24.180

没关系，我发现了问题所在。这里适用于有类似问题的人。

`I learnt that html emails have a 990 character limit per line. That was the reason why my code was breaking`

# vb.net - 如何展平字典并使用 LINQ 对内部字典的值求和？

> ID：10173233
> 
> 赞同：0
> 
> 时间：2012-04-16T11:27:55.120
> 
> 标签：vb.net, linq

我有以下对象：

```
countDictionary As Dictionary(of Category, Dictionary(of Date, Integer)) 
```

有`Class`一个枚举属性。出于演示的目的，我将其称为`MasterCategory`.

我一直在尝试取出一个如下所示的对象：

```
groupedCountDictionary As Dictionary(of MasterCategory, Dictionary(of Date, Integer) 
```

我能得到的最好结果是：

```
Lookup(of MasterCategory, Dictionary(of Date, Integer)) 
```

从：

```
countDictionary.ToLookup(Function(o) o.Key.MasterCategory, Function(o) o.Value) 
```

这导致`IEnumerable (Of Dictionary(of Date, Integer))`每个`MasterCategory`值都有一个。

但是，我需要将字典的 IEnumerable 展**平为一个字典，其中每个日期的所有整数相加**（总计数）。

然后我尝试使用各种`select`s 和`group by`s （来自许多 stackoverflow 帖子）来“扁平化”它，但我的努力没有成功。

谁能建议一种方法来做到这一点？如果可能的话，寻找*VB.Net*的答案。

**编辑：**

**当前代码**

```
[Category Class]
-    MasterCategory As Enum
-    Name As String etc

[countDictionary As Dictionary(of Category Objects, Dictionary(of Date, Integer))]
-    length 8
-    Children of 8 Categories:
        3 with MasterCategory A, 1097 int's by date
        4 with MasterCategory B, 1097 int's by date
        1 with MasterCategory C, 1097 int's by date 
```

**最大的努力**

```
[Lookup(of MasterCategory, Dictionary(of Date, Integer)]
-    length 3
-    Children of 3 Master Categories:
     1 of IEnumerable(of Dictionary(of Date, Integer)) and length 3
         3 x Dictionary length 1097 int's by date

     1 of IEnumerable(of Dictionary(of Date, Integer)) and length 4
         3 x Dictionary length 1097 int's by date

     1 of IEnumerable(of Dictionary(of Date, Integer)) and length 1
         3 x Dictionary length 1097 int's by date 
```

**必需的**

```
[Dictionary(MasterCategory, Dictionary(of Date, Integer))]
-    length 3
-    Children of 3 Master Categories:
     3 of Dictionary(of Date, Integer) with summed total int's 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:47:01.933

你在追求`SelectMany`吗？如果是这样，这可能会满足您的需求：

C＃

```
test.SelectMany(x => x.Key.MasterCategory).Sum(x => x.ThePropertyToSum) 
```

在VB中，我认为是：

```
test.SelectMany(Function(x) x.Key.MasterCategory).Sum(Function(x) x.ThePropertyToSum) 
```

# javascript - HTML5 Canvas 动画中的循环

> ID：10173234
> 
> 赞同：0
> 
> 时间：2012-04-16T11:27:58.210
> 
> 标签：javascript, html5-canvas, html5-animation

我正在使用 Javascript 为 HTML5 Canvas 动画编写代码。我正在使用`requestAnimFrame`它。动画效果很好。`requestAnimFrame`但是当我在使用or的函数中添加一个循环（for 或 while）时`setTimeout`，动画不起作用。添加循环对我来说很重要。任何建议使这成为可能？

```
function animate(lastTime) {
            var date = new Date();
            var time = date.getTime();
            var timeDiff = time - lastTime;
            var linearSpeed = 100;
            var linearDistEachFrame = linearSpeed * timeDiff / 1000;
            var currentX = LINE.x;              
            var currentY = LINE.y;
                var newY = currentY + linearDistEachFrame;
                var newX = currentX + linearDistEachFrame;
                context.beginPath();
                context.moveTo(LINE.x, LINE.y);
                lastTime = time;

                var Xindex=LINE.arrayX.indexOf(newX);

                //here am getting error..if i replace this with 'if' its working fine..and even if there is not a single LOC it doesnt work
                 while(Xindex!=-1) {
                                        //processes the loop
                 }

                context.lineTo(LINE.x, LINE.y);
                context.fillStyle = "red";
                context.fill();
                context.lineWidth = LINE.borderWidth;
                context.strokeStyle = "red";
                context.stroke();
            // request new frame

            requestAnimFrame(function() {
                animate(lastTime);
            });
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:59:24.950

尝试`break`在循环中添加一条语句，看看是否可以修复它。如果是，则说明条件已经满足，代码会永远卡在循环中，除非你跳出来，或者把Xindex改成-1。

您需要准确缩小代码失败的位置。一种方法是在代码的关键部分打印调试语句，这样您就可以确定它们已被执行，以及重要变量的值是什么。

例如，您可以使用`console.log("test");`写入 Chrome 的 JavaScript 控制台、Firebug 或类似内容。

对于一个工作动画程序的调试输出，您将面临的一个问题是输出的冗长。您可能只想在某些有趣的情况下登录，否则您将被淹没在溪流中。数据的。

# javascript - window.innerHeight ie8 替代方案

> ID：10173236
> 
> 赞同：26
> 
> 时间：2012-04-16T11:28:05.750
> 
> 标签：javascript, jquery, internet-explorer-8

我有一些计算依赖于`window.innerHeight`. 但是我发现这在 IE9 之前的任何 IE 中都不可用。我看过的所有其他选项甚至都没有接近我使用`window.innerHeight`.

有人有工作吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-16T11:35:32.570

您可能想尝试：

```
document.documentElement.clientHeight; 
```

或者可以使用[jQuery的`.height()`](http://api.jquery.com/height/)方法：

```
$(window).height(); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-08-08T21:05:00.670

我为 IE8 和其他人做了一个简单的垫片：

*   `window.innerWidth`
*   `window.innerHeight`
*   `window.scrollX`
*   `window.scrollY`
*   `document.width`
*   `document.height`

**559 字节**

```
(function(d,b){var c=b.documentElement;var a=b.body;var e=function(g,h,f){if(typeof g[h]==="undefined"){Object.defineProperty(g,h,{get:f})}};e(d,"innerWidth",function(){return c.clientWidth});e(d,"innerHeight",function(){return c.clientHeight});e(d,"scrollX",function(){return d.pageXOffset||c.scrollLeft});e(d,"scrollY",function(){return d.pageYOffset||c.scrollTop});e(b,"width",function(){return Math.max(a.scrollWidth,c.scrollWidth,a.offsetWidth,c.offsetWidth,a.clientWidth,c.clientWidth)});e(b,"height",function(){return Math.max(a.scrollHeight,c.scrollHeight,a.offsetHeight,c.offsetHeight,a.clientHeight,c.clientHeight)});return e}(window,document)); 
```

有关更新，请查看以下要点：[yckart/9128d824c7bdbab2832e](https://gist.github.com/yckart/9128d824c7bdbab2832e)

```
(function (window, document) {

  var html = document.documentElement;
  var body = document.body;

  var define = function (object, property, getter) {
    if (typeof object[property] === 'undefined') {
      Object.defineProperty(object, property, { get: getter });
    }
  };

  define(window, 'innerWidth', function () { return html.clientWidth });
  define(window, 'innerHeight', function () { return html.clientHeight });

  define(window, 'scrollX', function () { return window.pageXOffset || html.scrollLeft });
  define(window, 'scrollY', function () { return window.pageYOffset || html.scrollTop });

  define(document, 'width', function () { return Math.max(body.scrollWidth, html.scrollWidth, body.offsetWidth, html.offsetWidth, body.clientWidth, html.clientWidth) });
  define(document, 'height', function () { return Math.max(body.scrollHeight, html.scrollHeight, body.offsetHeight, html.offsetHeight, body.clientHeight, html.clientHeight) });

  return define;

}(window, document)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-09T13:09:30.273

`document.ready`在您的和明确定义中使用以下`innerHeight`内容。

```
window.innerHeight = window.innerHeight || document.documentElement.clientHeight 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-08T21:35:14.947

**获取完整窗口高度的Javascript方法..：**

```
window.outerHeight; 
```

**获取完整文档高度的 Javascript 方法..：**

```
document.body.clientHeight; 
```

或者

```
document.body.offsetHeight; 
```

**获取可见文档区域高度的 Javascript 方法..：**

这是没有栏的窗口的高度。

```
window.innerHeight; 
```

**获取可见文档区域高度和窗口的 jQuery 方法也没有条形区域高度..：**

```
$(window).height(); 
```

或者

```
$(window).outerHeight(); 
```

**获取完整文档高度的jQuery方法..：**

```
$(document).height(); 
```

或者

```
$(document).outerHeight(); 
```

就这些了，希望对你有帮助：）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-04T05:25:38.743

我搜索是因为这里发布的功能似乎都不起作用，我总是得到 windowviewheight 而不是文档的全高......

这适用于我测试过的所有浏览器......还有iexplore 8：

```
var D = document;
var myHeight = Math.max(
    D.body.scrollHeight, D.documentElement.scrollHeight,
    D.body.offsetHeight, D.documentElement.offsetHeight,
    D.body.clientHeight, D.documentElement.clientHeight
);

alert(myHeight); 
```

# handlebars.js - Meteor Handlebars.js 模板中的“>”运算符是什么？

> ID：10173242
> 
> 赞同：2
> 
> 时间：2012-04-16T11:28:27.630
> 
> 标签：handlebars.js, meteor

我查看了 Meteor 和 Handlebars.js 的源代码，但找不到什么`>`。是帮手吗？例如在Meteor ( [git ) 的](https://github.com/meteor/meteor/blob/master/examples/todos/client/todos.html)[todos 示例中](http://www.meteor.com/examples/todos)：

```
<div id="lists">
    {{#each lists}}
        {{> list_item}}
    {{/each}}
</div> 
```

* * *

*跟进*：handlebars.js Meteor 包解析模板并在找到`{{> some_partial}}`时放置`some_partial`模板。看看[packages/handlebars/parse.js](https://github.com/meteor/meteor/blob/master/packages/handlebars/parse.js)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T11:32:45.007

我是部分电话

[https://github.com/janl/mustache.js](https://github.com/janl/mustache.js)

```
Whereas in ERB you may have this:

<%= partial :next_more, :start => start, :size => size %>

Mustache requires only this:

{{> next_more}} 
```

# powershell - 带有 powershell 的 gpg - 密码安全

> ID：10173244
> 
> 赞同：3
> 
> 时间：2012-04-16T11:28:42.043
> 
> 标签：powershell, gnupg

我正在使用 gnupg 通过 powershell 脚本加密和解密数据，问题是我在代码中有密码。这可能不是最好的解决方案。为脚本提供密码的最佳和安全方式是什么？谢谢你。

```
C:\"Program Files"\GNU\GnuPG\gpg2.exe --passphrase mypassphrase --batch --output C:\Z\$decrypted_file.xls --decrypt C:\_Zo\$encrypted_file 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T12:00:14.593

您可以加密磁盘上的密码或密码。

以下解决方案使用*计算机作为用户*。

以下两个脚本编写了 securot 框架 .NET 程序集。

对于服务器计算机，可以通过计算机身份来保护机密。此代码使用的事实是，任何可以在计算机上运行代码的人都可以访问密码。所以密码文件可以跨网络共享，只能由服务器自己解码。您可以将 ACL 添加到密码文件中，使其只能由某些用户组读取。

**加密（必须在服务器计算机上完成）：**

```
# Mandatory Framework .NET Assembly 
Add-Type -assembly System.Security

# String to Crypt
$passwordASCII = Read-Host -Prompt "Entrer le mot de passe"

# String to INT Array
$enc = [system.text.encoding]::Unicode
$clearPWD_ByteArray = $enc.GetBytes( $passwordASCII.tochararray())

# Crypting
$secLevel = [System.Security.Cryptography.DataProtectionScope]::LocalMachine
$bakCryptedPWD_ByteArray = [System.Security.Cryptography.ProtectedData]::Protect($clearPWD_ByteArray, $null, $secLevel)

# Store in Base 64 form
$B64PWD_ByteArray = [Convert]::ToBase64String($bakCryptedPWD_ByteArray)
Set-Content -LiteralPath c:\Temp\pass.txt -Value $B64PWD_ByteArray 
```

**解码：**

```
# Mandatory Framework .NET Assembly
Add-Type -assembly System.Security

# Getting from Base 64 storage
$resCryptedPWD_ByteArray = [Convert]::FromBase64String((Get-Content -LiteralPath c:\Temp\pass.txt))

# Decoding
$secLevel = [System.Security.Cryptography.DataProtectionScope]::LocalMachine
$clearPWD_ByteArray = [System.Security.Cryptography.ProtectedData]::Unprotect( $resCryptedPWD_ByteArray, $null, $secLevel )

# Dtring from int Array
$enc = [system.text.encoding]::Unicode
$enc.GetString($clearPWD_ByteArray) 
```

# jquery - jQuery $(document).ready 一半工作（我认为）

> ID：10173245
> 
> 赞同：1
> 
> 时间：2012-04-16T11:28:43.360
> 
> 标签：jquery, three.js, document-ready

我正在使用此代码

```
 jQuery(document).ready(function () {
    console.log('loaded');
    show();
}); 
```

因此，当我页面上的所有内容加载一个函数时，就会启动项目。但是，我将其与 Three.JS 一起使用，其中我加载了几 mb 的模型。

该脚本在几毫秒后返回“已加载”，但模型并未完全加载。此外，Chrome 控制台告诉我模型需要几秒钟才能完全加载：/

这是绕过它的错误方法吗？对不起，我对它很陌生！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:20:44.200

此页面：[http://lightmap.staticloud.com/](http://lightmap.staticloud.com/)等到两个纹理被加载，然后显示渲染按钮。

如果认为该示例页面的源代码可能会对您有所帮助。

```
var loadCount = 0;

function loadTexture(url) {
    var image = new Image();
    var texture = new THREE.Texture(image);
    image.onload = function() {
        texture.needsUpdate = true;
        console.log("texture " + url + " loaded");
        loadCount++;
        // Enable Render button when both images loaded
        if (loadCount == 2)
            document.getElementById("renderButton").disabled = false;
    };
    image.src = url;
    return texture;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T06:29:38.617

上面 Thdk 给出的 loadTexture 函数与 Three.js 中包含的**[ImageUtils 源码](https://github.com/mrdoob/three.js/blob/master/src/extras/ImageUtils.js)**中给出的函数基本相同。

如果您查看 THREE.ImageUtils.loadTexture 函数的源代码，您会发现它与上面的函数相同，除了一些小的更改。我们还有额外的纹理映射参数和回调。回调被放置在 Image 对象的 onload 事件中。这意味着我们可以利用它来推迟创建对象，直到我们拥有它们的纹理并确保在我们制作动画之前所有它们都已加载。

```
loadTexture: function ( path, mapping, callback ) {

        var image = new Image(), texture = new THREE.Texture( image, mapping );

        image.onload = function () { texture.needsUpdate = true; if ( callback ) callback( this ); };
        image.crossOrigin = this.crossOrigin;
        image.src = path;

        return texture;

    }, 
```

使用回调，您可以通过以下方式利用它来实现您想要的：

```
THREE.ImageUtils.loadTexture(path1, null, function () {
THREE.ImageUtils.loadTexture(path2, null, function () {
THREE.ImageUtils.loadTexture(path3, null, function () { renderingEnabled = true; }) }) }); 
```

然后在调用动画逻辑和渲染调用时加上`if(renderingEnabled)`. 或者，如果您正确设置了所有内容，您可以简单地从最后一个回调中调用动画循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:32:14.743

文件已加载。

three.js 生成不属于初始文档的模型。它们在生成时由 ThreeJS 插入，如项目页面所示：[https ://github.com/mrdoob/three.js/](https://github.com/mrdoob/three.js/)

注意这一行：

```
document.body.appendChild( renderer.domElement ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T11:32:29.037

jQuery 就绪事件将在 DOM 加载后触发。在其他所有内容（即图像等）加载之后，窗口 onload 事件将稍后出现。

# ios - 在ios中按顺序播放图像

> ID：10173247
> 
> 赞同：1
> 
> 时间：2012-04-16T11:28:47.700
> 
> 标签：ios, video

假设我有来自视频的多个帧。我想在电影播放器​​中播放这些帧。这些帧可以随时更改。所以它应该像一个回调，它应该请求每个帧并且程序将帧提供给播放器作为对回调的响应。

IOS可以吗？

请指导我正确的方向以实现这一目标。

提前致谢

米娅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T00:00:22.870

您将无法使用内置电影播放器​​实现这种方法。但是，如果您只是要遍历存储在目录中 PNG 文件中的视频帧，那么实现起来并不难。您可以查看此代码作为起点。此源代码完全免费，可以满足您的需求。

[PNGAnimatorDemo.zip](http://www.modejong.com/iOS/#ex2)

如果您想做一些更高级的事情，请查看 AVAnimator 中的 AVImageFrameDecoder 类（谷歌它以了解更多信息）。

# python - 如何使用 Python 创建文本变量标签 (ttk)

> ID：10173250
> 
> 赞同：0
> 
> 时间：2012-04-16T11:28:54.440
> 
> 标签：python, label, ttk

我正在尝试创建一个`Label`with `ttk`。

我的目标是创建一个出现单词点的小部件。我创建了一个条目，我想显示这个词的价值。

这是我的代码：

这是创建的函数`Label`：

```
def create_variabletext_label2(root, col, row, val):
    val1 = IntVar()
    val1.set(m.comptabilisation_points(val.get()))

    # Here val is the value of the word input onto the entry widget
    # and m.comptabilisation_point() is a function that counts the
    # points of the word.
    label = Label(root, textvariable=val1)
    label.grid(column=col, row=row)
    return val1, label 
```

这是创建条目的函数：

```
def create_entry_string(root, width, col, row, columnspan, rowspan):
    val=StringVar()
    entry=ttk.Entry(root, width=width, textvariable=val)
    entry.grid(column=col, row=row, columnspan=columnspan, rowspan=rowspan)
    return val, entry 
```

然后我调用这些函数：

```
val_entry_mot, entry_mot = create_entry_string(root, 15, 1, 1, 1, 1)
val_points, label_points = create_variabletext_label2(root, 1, 2, val_entry_mot) 
```

我的问题是`Label`一直显示`0`。标签不会根据单词的点而改变。

谢谢你的帮助。MFF

抱歉含糊其辞。

附加信息：

我正在尝试创建一个拼字游戏。实际上，我的问题是我不知道如何显示这个词的价值。即使条目的值改变，标签也不会改变。

起初我认为 的价值`val_entry_mot`没有改变。所以我试图只显示通过改变这个函数输入的单词`create_variable_text2()`：

```
def create_variabletext_label2(root, col, row, val):
        label = Label(root, textvariable=val)
        label.grid(column=col, row=row)
        return val, label 
```

有效。每次我更改条目中的单词时，标签都会显示该单词。

然后，我认为应该计算单词点的代码有缺陷。这里是：

```
def comptabilisation_points(word):
    dico_values=values_scrabble()
    points=0
    for i in word.upper():
        points+=dico_values[i]
    return points 
```

`values_scrabble()`是一个打开文件并将其转换为字典的函数 =`{'A': 1, 'C': 3, 'B': 3, 'E': 1, 'D': 2, 'G': 2, 'F': 4, 'I': 1, 'H': 4, 'K': 10, 'J': 8, 'M': 2, 'L': 1, 'O': 1, 'N': 1, 'Q': 8, 'P': 3, 'S': 1, 'R': 1, 'U': 1, 'T': 1, 'W': 10, 'V': 4, 'Y': 10, 'X': 10, 'Z': 10}`

当我试图计算一个单词的分数时，它确实有效。所以我想我的问题不在这里。

这是游戏的屏幕截图。它是法语，但您必须知道的是，`Entry`顶部的第一个是您输入单词的位置，而正下方应该显示单词的点。

![游戏画面截图](../Images/51352212f3aed906bf6a648033779f99.png)

我希望我已经清楚了。谢谢你。

MFF

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:10:59.040

`val_entry_mot`未设置并返回`''`，这解释了您的问题：

```
In [1]: val_entry_mot.get()
Out[1]: '' 
```

因此，`val1.set()`无法正常运行。

如果您直接将其设置为某个值，您的代码将起作用，例如：

```
val1.set(123) # This properly renders "123" as Label text 
```

# c# - 如何从具有未知类型和 id 的会话中获取对象？

> ID：10173254
> 
> 赞同：1
> 
> 时间：2012-04-16T11:29:10.613
> 
> 标签：c#, .net, nhibernate

我想做的是从会话中获取对象数据。

下面的代码应该清楚所有：

```
//Type of object which i need to get in runtime
Type someUnknownType = typeof(someObject);
int id = 1; // for example
// here i got error cannot resolved someUnknownType
ISession.Get<someUnknownType>(id); 
```

我怎样才能做到这一点？

**编辑：** `someObject`是实例变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T11:38:27.313

首先，你有一个错误：

*   if`someObject`是一个实例变量，你不能调用`typeof(someObject)`. 你只能打电话`someObject.GetType()`
*   如果它是一种类型，您仍然使用通用版本。

* * *

您是否尝试过使用[非通用版本](https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/ISession.cs#L849)：

```
object x = ISession.Get(someObject.GetType(), id); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T11:36:12.087

您需要使用此 Get 方法：

```
ISession.Get(Type, Object); 
```

这是[NHibernate 文档](http://www.nhforge.org/doc/nh/en/index.html#manipulatingdata-loading)中的一个示例：

```
Cat cat = (Cat) sess.Get(catInstance.GetType(), id); 
```

# html - 缩放 HTML 元素的最佳方法

> ID：10173262
> 
> 赞同：0
> 
> 时间：2012-04-16T11:30:09.730
> 
> 标签：html, css, svg, widget, scale

我正在寻找一些关于缩放一些 HTML 元素以在大屏幕（如信息亭）上使用的选项。我目前正在使用 CSS3 scale() 来获得相对跨浏览器的比例（感谢 cssplease），但看看是否有其他人有更好的建议。

首先，我正在研究大规模渲染小部件（HTML、js 和图像）（例如，从 400x200px 到 800x500）。虽然我可以为更大的规模重写每个小部件，但我想我会检查我的选项。

SVG 或画布有什么可以做的吗？CSS3 scale() 没问题，但是图片需要替换成高分辨率版本。文本间距似乎也略有偏差。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:56:24.153

CSS3 变换仍然是我想要的最佳选择，尤其是浏览器性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:47:16.593

不确定您的理解是否正确，但如果您需要您的网站、图像、视频等在任何屏幕（任何分辨率）上看起来都不错，您可以尝试进行响应式设计。您可以选择使用 css 媒体查询来调整网站以适应不同的屏幕分辨率，它还将保持原始图像质量等。

[http://webdesignerwall.com/tutorials/responsive-design-in-3-steps](http://webdesignerwall.com/tutorials/responsive-design-in-3-steps)

[http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

[http://coding.smashingmagazine.com/2012/03/22/device-agnostic-approach-to-responsive-web-design/](http://coding.smashingmagazine.com/2012/03/22/device-agnostic-approach-to-responsive-web-design/)

我发现它们非常有帮助，一旦你开始使用它，你就可以轻松地构建可扩展的网站；））

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T16:17:21.177

这可能是一个广泛的改造，但您可以使用 ems 定义元素的尺寸，然后使用媒体查询来增加不同屏幕尺寸的基本字体大小。因此，如果您的基本字体大小为 16 像素，则您的主列可能是 47 em，侧边栏 12 em，大约为 1000 像素的网站宽度。然后，您可以使用媒体查询来检测更大的浏览器，您需要做的就是将基本字体大小增加到 20 像素，并且您的网站现在扩大了 25%。

# tomcat - 在单个 tomcat 实例中使用多个 SSL 证书

> ID：10173265
> 
> 赞同：5
> 
> 时间：2012-04-16T11:30:21.553
> 
> 标签：tomcat, ssl

我知道tomcat可以通过设置多个监听不同IP的连接器来处理多个SSL证书，但是可以在同一个IP上设置它吗？

情况是我们有多个 Web 应用程序在单个 tomcat 实例中运行。我们的服务器只有 1 个静态 IP。Tomcat 设置为具有虚拟服务器，因此根据域的不同，它服务于不同的应用程序。但是，如果我们希望在其中一个以上的应用程序中使用 SSL，我预测我们可能会遇到麻烦。

有没有人在这个领域有更多的经验？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T11:44:34.473

为了能够在同一个 IP 地址和端口上使用多个证书，您需要服务器名称指示支持。不幸的是，[这是在 Java 7 中引入的，仅在客户端](http://docs.oracle.com/javase/7/docs/technotes/guides/security/enhancements7.html)。

（客户端的 SNI 支持仍然存在问题，最明显的原因是 Win XP、Java 6 及更低版本以及某些移动浏览器上的任何版本的 IE 都缺乏支持。）

解决方法是使用支持多个主机名的单个证书。执行此操作的首选方法是拥有一个包含多个主题备用名称 (SAN) 条目的证书。否则，如果名称有模式，通配符证书可能是合适的（例如`*.example.com`，对于`www.example.com`and `secure.example.com`）。

[Apache Httpd 支持 SNI](http://wiki.apache.org/httpd/NameBasedSSLVHostsWithSNI)，因此您可以通过`VirtualHost`对要服务的每个主机名使用不同的 s 并为每个主机使用不同 Tomcat 配置的反向代理来解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:20:16.233

我不相信你会用 1 个 IP 地址逃脱，但你可以使用多个端口

```
<Connector
       port="9001" maxThreads="200"
       scheme="https" secure="true" SSLEnabled="true"
       keystoreFile="${user.home}/.keystore" keystorePass="changeit"
       clientAuth="false" sslProtocol="TLS"/>
--> 
```

then https:9001//myurl

for your connections I would personally front it off to an apache httpd reverse proxy server though as it gives you way more flexibility and not a little security when properly configured

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T07:25:48.307

I am not sure, here if "SNI" is really relevant.

But in your case, the typical solution would be so called ssloffloading or ssl Termination: i.e. put your tomcat behinde an apache, which configured to use multiple vhosts / domain names on the same ip. You could configure for each vhost in apache to use its own SSL certificate.

There is a step by step guide for this topic here:

[http://milestonenext.blogspot.de/2012/09/ssl-offloading-with-modjk-part-1.html](http://milestonenext.blogspot.de/2012/09/ssl-offloading-with-modjk-part-1.html)

# javascript - 当文本框处于活动状态时，“Enter”键调用 javascript 函数

> ID：10173266
> 
> 赞同：1
> 
> 时间：2012-04-16T11:30:24.493
> 
> 标签：javascript, jquery, html

我有一个文本框和一个按钮

```
<div class="TextField Large">
    <input type="text" name="q" id="SearchBox" />
</div>
<div style="height: 40px; text-align: right; position: absolute; top: 0px; right: 0px;">
    <input type="button" value="Search" class="Button" onclick="Search()" />
</div> 
```

基本上你在文本框中输入一个文本，当你点击搜索按钮时，一个 JavaScript 函数`Search()`被调用。

如何添加当用户输入文本并在键盘上按“Enter”时执行搜索的可能性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:32:46.643

首先：添加一个表单（无论 JavaScript 做什么，它都应该有一个服务器端的后备）。

第二：将按钮更改为提交按钮。

第三：将 JavaScript 移动到表单的提交事件而不是按钮的客户端事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:40:43.950

```
<!DOCTYPE HTML>
<html>
<head>
<script type="text/javascript">
function Search(){
    alert("search!");
    //search logic
    return false;
}
</script>
</head>
<body>
    <form onsubmit="return Search()">
        <input type="text" name="q" />
        <input type="submit" value="Search" />
    </form>
</body>
</html> 
```

就这样

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T11:33:36.030

当您的输入在表单中时，输入应自动提交表单，

否则：

```
$('your form').keyup(function(e) {
  if(e.which == 13) $(this).submit();
}); 
```

我建议您将按钮更改为 type="submit" 以使输入功能自动工作，然后在提交事件处理程序中执行 Search() 代码

```
$('your form').submit(function() {
  // your search code
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-18T17:13:14.107

```
$('#textbox').keypress(function(event){
   var keycode = (event.keyCode ? event.keyCode : event.which);
   if(keycode == '13'){
      alert('You pressed a "enter" key in textbox');    
   }
}); 
```

希望这会帮助你..

# c# - 如何在javascript中访问转发器标签值

> ID：10173267
> 
> 赞同：-1
> 
> 时间：2012-04-16T11:30:24.410
> 
> 标签：c#, javascript, asp.net

这是我的 javascript

```
 function btnEditClick() {
    alert(document.getElementById('<%=LblRefPhyID.ClientID %>').value);          
  } 
```

```
<asp:Repeater ID="repeaterRefPhysicianList" runat="server">
  <ItemTemplate>
    <tr onclick="selectRow(this);">
      <td class="csstablelisttd" style="display: none;">
        <asp:Label ID="LblRefPhyID" runat="server" Text='<%#Eval("Ref_Phy_ID")%>'></asp:Label>  
      </td> 
```

在编辑按钮的clientclick上，我必须将RefphyId传递到另一个页面我该怎么做..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:13:55.543

尝试设置 css 类而不是 id 并按类名绑定元素单击事件。我为此使用jquery：

```
$(document).ready(function(){
  //bind click event on our label class
  $('.lblRef').live('click', function(){
    alert($(this).text());
   });
}); 
```

这在asp.net页面代码中：

```
<asp:Label CssClass="lblRef" runat="server" Text='<%#Eval("Ref_Phy_ID")%>'></asp:Label> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:23:29.183

这是一个中继器。这意味着`ItemTemplate`将对数据绑定集合中的每个项目**重复**。

这有一个警告：ID 应该是唯一的。因此，当您说您`asp:Label`的 ID 为 时`LblRefPhyID`，ASP.NET 会自动为您生成唯一 ID 的转发器的每个实例，最终进入您生成的 HTML。这些生成的 ID 将基于您的原始值`LblRefPhyID`，但不会完全如此，因此中继器`document.getElementById()` **之外**的普通 ID 将不起作用。

有很多方法可以解决这个问题，您需要做的第一步是实际编写一些将自动生成的 ID 考虑在内的代码。也许写一些 Javascript 来缓存 ID `LblRefPhyID.ClientID`，也许是动态`onclick`的，无论如何。

### 编辑

而且，哦，是的，@Pointy 完全正确地指出`label`元素没有值，只有它们的内部 HTML。我不明白为什么他因为给出正确的回答而被否决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:35:35.557

最好的方法是检查客户端的转发器生成的 id 模式是什么，然后您可以使用该 id 来使用 innerHTML 获取标签的值。例如，在您的情况下，生成的 id 可能是： `repeaterRefPhysicianList_LblRefPhyID_01`直到源中的行数。

因此，您可以将此信息与 innerHTML 一起使用来获取标签的值。总而言之，只需检查您的 html 页面，您就会知道下一步该做什么：)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T11:41:42.920

HTML`<label>`元素没有“值”。他们确实有内容：

```
alert(document.getElementById('<%=LblRefPhyID.ClientID %>').innerHTML); 
```

# android - 关闭一个活动

> ID：10173270
> 
> 赞同：0
> 
> 时间：2012-04-16T11:30:38.190
> 
> 标签：android, android-intent

如何关闭和活动按钮单击？

```
ok.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // ******I WANT THE CODE HERE ???? **********

    }
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T11:31:49.827

只需调用`finish();`按钮的**onClick**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T11:32:34.190

只需添加`finish();`到您的听众。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:35:56.757

用这个

```
ok.setOnClickListener(new OnClickListener() {

    @Override
        public void onClick(View v) {
            // ******I WANT THE CODE HERE ???? **********
           YourActivity.this.finish(); 
        }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T11:36:12.190

```
ok.setOnClickListener(new OnClickListener() {
   @Override
   public void onClick(View v) {
      finish();
   }
}); 
```

# iphone - 使用谓词过滤数组

> ID：10173272
> 
> 赞同：0
> 
> 时间：2012-04-16T11:30:48.533
> 
> 标签：iphone, objective-c

我需要过滤**状态**等于**“U”**的以下数组，并且我使用了以下数组。

```
 NSArray *result = [alertModified.senders filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"(subscriptions.status = %@)",@"U"]]; 
```

但是我得到了空数组。

请帮我过滤一下？

数组字符串：

```
(senderCode =  CPFB, senderName = CPFB, forSenderLevel = 0, subscriptions = (
"correspondenceListId = 102,status = S,senderCode = AA,subject = Letter,retentionPeriod = 0, uniqueBillIdentifier = (null),senderResponseStatus = (null),subscriptionDate = ,effectiveDate = ",
"correspondenceListId = 103,status = U,senderCode = BB,subject = Nomination Letters,retentionPeriod = 0, uniqueBillIdentifier = (null),senderResponseStatus = (null),subscriptionDate = ,effectiveDate = ",
"correspondenceListId = 104,status = U,senderCode = AA,subject = Yearly statements,retentionPeriod = 0, uniqueBillIdentifier = (null),senderResponseStatus = (null),subscriptionDate = ,effectiveDate = ",
"correspondenceListId = 105,status = U,senderCode = BB,subject = All Future Letters,retentionPeriod = 0, uniqueBillIdentifier = (null),senderResponseStatus = (null),subscriptionDate = ,effectiveDate = ")) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:04:30.673

在您的示例中，您应该过滤订阅列表本身，而不是整个发件人。您必须将过滤器应用于每个发件人。尝试将您的过滤器行更改为此并检查它是否为您提供结果：

```
 NSArray *result = [[alertModified.senders objectAtIndex:0].subscriptions filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"(status = %@)",@"U"]]; 
```

# objective-c - 类似于 facebook iPhone 应用程序中的地址栏？

> ID：10173274
> 
> 赞同：0
> 
> 时间：2012-04-16T11:31:02.383
> 
> 标签：objective-c

我需要一个类似于 facebook 正在使用的地址栏的组件： - 一个带有刷新/取消图标的地址字段 - 一个显示已加载多少的进度条 是否有任何现成的组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:51:21.940

我想说你最好的选择是查看 facebook 应用程序使用的库 - Three20 库（链接[在这里](http://three20.info/)）。

# wxwidgets - wxlistctrl 标题中的 wxWidgets 多行

> ID：10173275
> 
> 赞同：1
> 
> 时间：2012-04-16T11:31:10.557
> 
> 标签：wxwidgets

我正在尝试在 Ms Windows 下的 wxlistctrl 标题中插入多行文本。

wxWidgets 库本身不支持多行文本，所以我尝试使用 istrunction，例如：

HWND listView = (HWND)(m_listCtrl->GetHWND()); HWND 标头 = ListView_GetHeader(listView);

以某种方式访问​​标题，但我不知道如何更改标题高度。

有人能帮我吗 ？

在此先感谢弗朗西斯科。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:47:11.337

据我记得，没有办法做到这一点。您可以查看[wxAdvTable](http://wxcode.sourceforge.net/components/advtable/) - 它是一个网格，允许为网格创建多行和多级标题。

# php - 访问和存储日志的类图

> ID：10173278
> 
> 赞同：1
> 
> 时间：2012-04-16T11:31:42.583
> 
> 标签：php, uml, design-patterns

我需要记录搜索参数，然后想要访问它们。

![在此处输入图像描述](../Images/7f4a6497a0582e773ffb6696146b5d94.png)

1.  搜索类：将根据 searchParams 类进行搜索（具有搜索参数）

2.  searchLogger ：执行搜索日志记录，其中之一将由用户执行搜索。

3.  searchParam ：用于从用户搜索或记录器中设置搜索参数的类。

**DOUBTS：** 搜索记录器应该只是记录。但我也在访问它（根据 id 检索日志）。我应该如何处理这个？我应该再开一堂课吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:48:00.203

您还访问记录器是什么意思？

如果您的意思是访问记录器对象以执行日志操作，那很好。

您不应该重新发明轮子而只使用：

*   现有的日志框架，如[log4NET](http://logging.apache.org/log4net/)或[nlog](http://nlog-project.org/)等。
*   并且可能围绕您决定使用的日志框架编写一个包装类

希望这可以帮助。

# iphone - xcode在选择之前加载tabContent

> ID：10173284
> 
> 赞同：0
> 
> 时间：2012-04-16T11:32:13.497
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我有一个主 tabController 有两个选项卡，第一个被选为默认选项。按下 tab2 时，文件会加载到 webview 上，但您必须等待几秒钟。在选择 tab2 之前如何加载内容？I tried to call carrega (containing working ViewDidLoad code) function once tabController was set and is executed properly, however when tab2 is selected, content is blank... Thank you.

来自代表，

```
 viewControllers = [NSArray arrayWithObjects:firstVC, secondVC, nil];
    [tabBarController setViewControllers:viewControllers animated:NO];

    [self.window makeKeyAndVisible];

    [firstVC carrega];
    [secondVC carrega];

//now few seconds later, tab2 will be pressed and should have content already loaded! 
```

第二个视图控制器，

```
-(void)carrega{
//here my loading content code that if is on ViewDidLoad works great but with loading timeout
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:37:45.483

尝试

```
viewControllers = [NSArray arrayWithObjects:firstVC, secondVC, nil];
[tabBarController setViewControllers:viewControllers animated:NO];

[self.window makeKeyAndVisible];

[secondVC view]; 
```

强制加载第二个视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:04:24.717

如果这个 webview 和 url 请求可以在整个 APP 中不断使用，你可以在全局范围内创建这两个对象，并在第一个 viewController 中初始化它们，甚至在 AppDelegate 中初始化它们。加载第二个视图后，您可以简单地将 IBOutlet webview 指向全局 webview 引用。这可以显着加快第二个视图。

# c# - asp.net c# 是否选中了复选框？

> ID：10173290
> 
> 赞同：2
> 
> 时间：2012-04-16T11:32:30.400
> 
> 标签：c#, asp.net

如何确定复选框是选中还是未选中？非常困惑为什么这不起作用 - 它是如此简单！

在我的网络表单上：

```
<asp:CheckBox ID="DraftCheckBox" runat="server" Text="Save as Draft?" />
<asp:Button ID="PublishButton" runat="server" Text="Save" CssClass="publish" /> 
```

在我的保存按钮的单击事件中运行的代码：

```
 void PublishButton_Click(object sender, EventArgs e)
{
    if (DraftCheckBox.Checked)
            {
                newsItem.IsDraft = 1;
            }
} 
```

调试时，当我在浏览器中选中复选框时，它永远不会进入 If 语句。想法？！

**我认为可能还有其他一些代码会影响到这一点，如下所示......**

在 Page_load 我有以下内容：

```
PublishButton.Click += new EventHandler(PublishButton_Click);

if (newsItem.IsDraft == 1)
    {
        DraftCheckBox.Checked = true;
    }
    else
    {
        DraftCheckBox.Checked = false;
    } 
```

newsItem 是我的数据对象，我需要相应地设置复选框选中状态。当点击保存按钮时，我需要根据复选框的选中状态更新 IsDraft 属性：

```
void PublishButton_Click(object sender, EventArgs e)
{
    if (IsValid)
    {
        newsItem.Title = TitleTextBox.Text.Trim();
        newsItem.Content = ContentTextBox.Text.Trim();
        if (DraftCheckBox.Checked)
        {
            newsItem.IsDraft = 1;
        }
        else
        {
            newsItem.IsDraft = 0;
        }

        dataContext.SubmitChanges();
    }
} 
```

因此，isDraft = 1 应该等于选中了复选框，否则应该取消选中复选框。目前，它没有显示这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:39:07.860

指定按钮单击事件

```
<asp:Button ID="PublishButton" runat="server" Text="Save" onclick="PublishButton_Click" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:39:40.490

`OnClick`我可以看到你的按钮上没有一个。所以像这样：

```
<asp:CheckBox ID="DraftCheckBox" runat="server" Text="Save as Draft?" />
<asp:Button ID="PublishButton" runat="server" OnClick="PublishButton_Click" 
Text="Save" CssClass="publish" /> 
```

然后该功能应该像这样工作：

```
protected void PublishButton_Click(object sender, EventArgs e)
{
    if (DraftCheckBox.Checked)
            {
                newsItem.IsDraft = 1;
            }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:42:35.213

对我来说，最终最好的解决方案是创建 2 个单独的页面：1 个用于编辑新闻文章，1 个用于新的新闻文章。因此，当页面重新加载时，我永远不会处于正在创建的新新闻数据对象的位置。

当按下保存按钮时，两个页面都返回到文章索引列表页面，这似乎可以保存草稿复选框的状态，然后在编辑页面上显示状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T11:48:35.300

尝试`onclick="PublishButton_Click"`在表单上的按钮字段中添加。而且我不知道它是否有所作为，但是生成的事件处理程序是受保护的无效的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T12:35:38.090

**请将代码替换为以下代码..**

```
void PublishButton_Click(object sender, EventArgs e)
    {
        if (DraftCheckBox.Checked==True)
                {
                    newsItem.IsDraft = 1;
                }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-01T12:15:33.007

checkbox.checked 未在您希望的上下文中使用（这是一个布尔值，如果为真，将使复选框看起来已选中）。

您可以做的是使用复选框列表。然后您可以执行以下操作：

```
foreach(Listitem li in CheckBoxList1.Items)
{
  if (li.Selected)
  {
    NewsItem.Isdraft = 1;
  }
} 
```

# ruby - Ruby：将哈希拆分为文件夹名称

> ID：10173297
> 
> 赞同：-2
> 
> 时间：2012-04-16T11:33:04.960
> 
> 标签：ruby

如何从

```
f6f6c3408e67bf6473d65de172f0e5da.jpg 
```

文件名

`f6/f6/c3/40/8e/67/bf/64/73/d6/5d/e1/72/f0/e5/da.jpg`避免文件系统过载的文件夹结构

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:53:04.737

这应该这样做：

```
'f6f6c3408e67bf6473d65de172f0e5da.jpg'.sub /(.*)(\..*)/ do 
    filename, extension = $1, $2
    filename.scan(/../).join('/') + extension
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:46:50.740

你为什么不按照系统喜欢`git`做的事情，只提取前两个字符来创建一个目录并将文件放入其中。为此创建这么多目录似乎毫无意义（并且可能也会影响性能），如果它适用于`git`避免文件系统效率低下的系统，它也应该适用于您。当然，如果你遵循这种方法，实现也将非常简单。

```
directory,filename = filename[0..1],filename[2..-1] 
```

# php - 在php中查找有效和非重复条目的算法

> ID：10173299
> 
> 赞同：0
> 
> 时间：2012-04-16T11:33:07.983
> 
> 标签：php, algorithm

我目前正在使用 php 来帮助我找到有效且不重复的条目，

我需要的

1.  有效且不重复的列表
2.  输入无效输入列表（唯一）
3.  重复输入列表

我的方法是首先创建 5 个数组 2 为原始数组，1 为正确（空），1 为有效（空），1 为重复（空）

首先使用原始数组之一，对于每个元素：检查有效并检查重复，如果无效，放入无效数组，并使用 inarray 检查重复

毕竟，我得到一个无效和重复的数组，然后使用原始数组，检查哪个元素不在这两个数组中。并完成了工作。

我的问题是，它似乎效率很低，我该如何改进它？（如果使用一些著名的算法，最好）

谢谢你。

```
 // get all duplicate input and store in an array
    for ($row = 1; $row <= $highestRow; $row++) {
    for ($y = 0; $y < $highestColumn; $y++) {
        $val = $sheet->getCellByColumnAndRow($y, $row)->getValue();

//use reg exp to check whether it is valid
        if ($y == $mailColumn && !preg_match($pattern,$val))
        {$invaild[]=$row;}
//if valid, test whether it is duplicate
        elseif ($y == $mailColumn && in_array($val,$email))
        {$duplicate[]=$val;
        $duplicate[]=$row;}

        if ($y == $mailColumn)
        {$email[]=$val;
        $email=array_unique($email);}

      }
    }

// unique invalid array since i just need  invalid  inputs, not the invalid + duplicate input 
$invaild=array_unique($invaild); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:56:45.157

1）您似乎只对电子邮件列感兴趣，所以我认为迭代所有其他列是没有意义的（所以内部循环基本上是多余的）。

2）您可以使用关联数组将电子邮件存储为索引，然后通过检查数组中是否存在索引/电子邮件来有效地查找重复项。

这是一个例子：

```
$valid   = array();
$invalid = array();
$dups    = array();

for ( $row = 0; $row < $highestRow; $row++ )
{
    $email = $sheet->getCellByColumnAndRow( $mailColumn, $row )->getValue();
    if ( !preg_match( $pattern, $email ) )
    {
        $invalid[] = $row;
    }
    else if ( isset( $dups[ $email ] ) )
    {
        $dups[ $email ][] = $row;
    }
    else
    {
        $dups[ $email ] = array();
        $valid[] = $row
    }
} 
```

最后，$invalid 将保存所有无效行的列表，$dups 将保存一个数组数组，每个表示当前电子邮件作为索引的行，其值是一个列出行的数组分享这封电子邮件。如果某个索引处的数组为空，则电子邮件不重复。$valid 将保存有效行数。现在花哨的算法，对不起...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:02:04.373

试试这个：

```
<?php     
echo "<pre>";    

$array1 = array("a@b.com","c","c","d@e.com","test1","","test3","test2","test3");    

$array_no_mistake = array_filter($array1,function($subject){if(trim($subject)=="") return true;});    

$array_uniq = array_diff(array_unique($array1),$array_no_mistake);    

$array_dups = array_diff_assoc(array_diff($array1,$array_no_mistake),$array_uniq);    

$array_valid = array_filter($array_uniq,function($subject){    
    if (preg_match('/\A(?:[a-z0-9!#$%&\'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?)\Z/i', $subject)) {    
    return true;    
} else {    
    return false;    
}    
});    

$array_invalid = array_diff_assoc($array_uniq,$array_valid);    

print_r($array1);    

print_r($array_no_mistake);    

print_r($array_uniq);    

print_r($array_dups);    

print_r($array_valid);    

print_r($array_invalid);    

?> 
```

# c# - WPF Dispatchertimer 延迟反应/冻结

> ID：10173300
> 
> 赞同：3
> 
> 时间：2012-04-16T11:33:10.207
> 
> 标签：c#, .net, wpf

在我的 WPF 应用程序中，我使用 3 个不同的 DispatcherTimers。

*   一种是显示当前时间
*   一种是每 5 秒运行一次数据库查询
*   第三个每 1 秒刷新一次自定义按钮的值

当我的程序运行时，会有很多延迟/冻结。例如，时间开始正确计时，但值突然冻结，冻结后时间例如增加 +3 秒。

我在整个应用程序中都得到了这种行为。用几个计时器解决这个问题的正确方法是什么？

编辑：

我在用 System.Timers 命名空间中的 Timer 替换 DispatcherTimer 时遇到问题。

```
//new code with timer
timerW = new Timer();
        timerW.Elapsed += new ElapsedEventHandler(timerWegingen_Tick);
        timerW.Interval = 5000; 
        timerW.Start();

        //OLD Working Code
        timerW = new DispatcherTimer();
        timerW.Tick += new EventHandler(timerWegingen_Tick);
        timerW.Interval = new TimeSpan(0, 0,5);
        timerW.Start(); 
```

*错误：“调用线程必须是 STA，因为许多 UI 组件都需要这个。”*

最好的祝福。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T11:36:52.663

DispatcherTimer 在 UI 线程上执行。因此，如果 UI 线程忙碌超过该时间间隔，它将在 UI 线程空闲时执行。如果你需要更精确的调度，你应该去一段时间而不是在后台运行（System.Threading.Timer、System.Timers.Timer）。但是不要忘记编组。

hth，马丁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:35:36.393

我想这是因为它们都在同一个线程上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:26:03.883

使用 System.Threading.Timer 并在更新 UI 时使用 SyncronizationContext.Syncronize 来运行更新代码。

不要忘记从 UI 线程上的 SyncronizationContext.Current 获取上下文。

# php - 确认弹出并将php值传递给js，输入图像作为提交

> ID：10173304
> 
> 赞同：0
> 
> 时间：2012-04-16T11:33:35.477
> 
> 标签：php, javascript

基本上，当用户点击删除按钮时，脚本必须确认用户是否要删除。我想传递一行的id。我正在使用 input type="image" 并且 onclick 会显示该框。如何将 $row_id['id] 传递给 js 脚本。

```
<script type="text/javascript">
function show_confirm()
{
var r=confirm("Do you want to delete");
if (r==true)
  {
    window.location = "delete.php";
  //alert("You pressed OK!");
  }
else
  {

  }
}
</script>

<input type="image" src='../images/delete.jpg' width='30px' height='30px' style="position:relative; top:0px;" onclick="show_confirm()"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T11:39:36.613

```
 <input type="image" src='../images/delete.jpg' 
      width='30px' height='30px' style="position:relative; top:0px;" 
      onclick="show_confirm(<?php echo $row_id["id"]; ?>)" />​ 
```

并在 javascript 函数中获取 id，

```
function show_confirm(id)
{
if (confirm("Do you want to delete image-"+id))
  {
    window.location = "delete.php";
  //alert("You pressed OK!");
  }
else
  {

  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:40:07.083

为您的图像提供一个 id，例如`<img id="myId" src="...">`并从 javascript 中读取特定的 id，如下所示：`id = document.getElementById("myId").id;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:48:20.860

只是为了建立@ocanal 所说的内容，您现在将拥有 id，您可以将其附加到 url 的末尾以让您的 php 脚本删除图像：

```
window.location = "delete.php?imageId=" + id; 
```

这会将图像的 id 传递给要删除的脚本。

# c++ - 智能指针是否支持通过指针调用成员函数？

> ID：10173312
> 
> 赞同：3
> 
> 时间：2012-04-16T11:34:19.190
> 
> 标签：c++

```
#include <iostream>
#include <boost/shared_ptr.hpp>
#include <boost/make_shared.hpp>

class BASE
{
public:
    int fun1(int i){return i * 1;}
};

int main(){
    int (BASE::*pf2)(int);
    boost::shared_ptr<BASE> pB = boost::make_shared<BASE>();
    pf2 = &BASE::fun1;
    std::cout << (pB->*pf2)(3) << std::endl; // compile wrong: error: no match for 'operator->*' in 'pB ->* pf2'|
} 
```

这是否意味着 Boost 库没有实现 '->*' 运算符来支持使用它来调用成员函数指针？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T11:37:46.580

你应该写：

```
std::cout << ((*pB).*pf2)(3) << std::endl; 
```

正如我所检查的，Boost 没有`->*`为任何指针定义运算符，尽管这是可能的（参见 C++ 标准，第 5.5 和 13.5 节）。

此外，C++11 标准没有为 C++11 智能指针定义此运算符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T11:38:54.333

我猜你应该这样做：

```
std::cout << ((*pB).*pf2)(3) << std::endl; 
```

虽然它没有经过测试。

# tfs - TFS 2010 Build Logging 如何将数据发送到数据仓库

> ID：10173313
> 
> 赞同：0
> 
> 时间：2012-04-16T11:34:22.303
> 
> 标签：tfs, tfsbuild, tfs-2010, tfs-warehouse

我的问题是 TFS 2010 如何将其日志发送到 TFS 数据仓库？

build.log 的所有内容是否都发送到 TFS 数据仓库？以什么方式，是通过网络服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:55:11.503

构建日志的内容（无论如何都在 TFS 2010 中）存储在 Tfs_Collection 数据库中。

看看下表：

```
select * from [tbl_Build] b
 join [dbo].[tbl_BuildDefinition] d on b.DefinitionId = d.DefinitionId
 join [dbo].[tbl_BuildInformation] bi on bi.BuildId = b.BuildId
 join [dbo].[tbl_BuildInformationField] bif on bif.NodeId = bi.NodeId 
```

鉴于数据在 TFS_Collection 数据库中，它只是通过 TFS 的 SQL 分析服务器设置复制，其余数据复制到仓库中的方式相同。

# android - 上传视频时显示进度条

> ID：10173314
> 
> 赞同：1
> 
> 时间：2012-04-16T11:34:23.817
> 
> 标签：android

我想在将视频从我的应用程序上传到 php 服务器时显示进度条。下面将正确地将文件上传到服务器。但我不知道如何显示进度条。如果有人知道请帮助我。

这是我的代码：

```
 private void doFileUpload(){
            HttpURLConnection conn = null;
            DataOutputStream dos = null;
            DataInputStream inStream = null;
            String lineEnd = "\r\n";
            String twoHyphens = "--";
            String boundary =  "*****";
            int bytesRead, bytesAvailable, bufferSize;
            byte[] buffer;
            int maxBufferSize = 8*1024*1024;
            Cursor c = (MainscreenActivity.JEEMAHWDroidDB).query((MainscreenActivity.TABLE_Name), new String[] {
                     (MainscreenActivity.COL_HwdXml)}, null, null, null, null,
                              null);
             if(c.getCount()!=0){
             c.moveToLast();
             for(int i=c.getCount()-1; i>=0; i--) {
                  value=c.getString(0);           
             }
             }
            String urlString = value+"/upload_file.php";
            try
            {
             //------------------ CLIENT REQUEST
                UUID uniqueKey = UUID.randomUUID();
                fname = uniqueKey.toString();
                Log.e("UNIQUE NAME",fname);

            FileInputStream fileInputStream = new FileInputStream(new File(selectedPath) );
            URL url = new URL(urlString);
            conn = (HttpURLConnection) url.openConnection();
            conn.setDoInput(true);
            conn.setDoOutput(true);
            conn.setUseCaches(false);
            conn.setRequestMethod("POST");
            conn.setRequestProperty("Connection", "Keep-Alive");
            conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);
            dos = new DataOutputStream( conn.getOutputStream() );
             dos.writeBytes(twoHyphens + boundary + lineEnd);
             dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + fname + "."+extension+"" + lineEnd);
             dos.writeBytes(lineEnd);
             bytesAvailable = fileInputStream.available();
             System.out.println("BYTES:--------->"+bytesAvailable);
             bufferSize = Math.min(bytesAvailable, maxBufferSize);
             System.out.println("BUFFER SIZE:--------->"+bufferSize);
             buffer = new byte[bufferSize];
             System.out.println("BUFFER:--------->"+buffer);
             bytesRead = fileInputStream.read(buffer,0,bufferSize);
             System.out.println("BYTES READ:--------->"+bytesRead);
             while (bytesRead > 0)
             {
              dos.write(buffer, 0, bufferSize);
              bytesAvailable = fileInputStream.available();
              bufferSize = Math.min(bytesAvailable, maxBufferSize);
              bytesRead = fileInputStream.read(buffer, 0, bufferSize);
              System.out.println("RETURNED");
             }
             dos.writeBytes(lineEnd);
             dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

             Log.e("Debug","File is written");
             fileInputStream.close();
             dos.flush();
             dos.close();

            }
            catch (MalformedURLException ex)
            {
                 Log.e("Debug", "error: " + ex.getMessage(), ex);
            }
            catch (IOException ioe)
            {
                 Log.e("Debug", "error: " + ioe.getMessage(), ioe);
            }
            //------------------ read the SERVER RESPONSE
            try {
                  inStream = new DataInputStream ( conn.getInputStream() );
                  String str;

                  while (( str = inStream.readLine()) != null)
                  {
                       Log.e("Debug","Server Response "+str);
                  }
                  inStream.close();

            }
            catch (IOException ioex){
             Log.e("Debug", "error: " + ioex.getMessage(), ioex);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:51:03.490

随时随地拨打`new loadVideo().execute();`您的电话。并添加以下类来进行视频加载。

```
public class loadVideo extends AsyncTask<Void, Void, Void>
    {

        private final ProgressDialog dialog = new ProgressDialog(
                YourActivity.this);
        protected void onPreExecute() {
            this.dialog.setMessage("Loading...");
            this.dialog.setCancelable(false);
            this.dialog.show();
        }
        protected void onPostExecute(Void result) {

            if (this.dialog.isShowing()) {
                this.dialog.dismiss();
            }

                }
            });

        }

        @Override
        protected Void doInBackground(Void... params) {
 HttpURLConnection conn = null;
            DataOutputStream dos = null;
            DataInputStream inStream = null;
            String lineEnd = "\r\n";
            String twoHyphens = "--";
            String boundary =  "*****";
            int bytesRead, bytesAvailable, bufferSize;
            byte[] buffer;
            int maxBufferSize = 8*1024*1024;
            Cursor c = (MainscreenActivity.JEEMAHWDroidDB).query((MainscreenActivity.TABLE_Name), new String[] {
                     (MainscreenActivity.COL_HwdXml)}, null, null, null, null,
                              null);
             if(c.getCount()!=0){
             c.moveToLast();
             for(int i=c.getCount()-1; i>=0; i--) {
                  value=c.getString(0);           
             }
             }
            String urlString = value+"/upload_file.php";
            try
            {
             //------------------ CLIENT REQUEST
                UUID uniqueKey = UUID.randomUUID();
                fname = uniqueKey.toString();
                Log.e("UNIQUE NAME",fname);

            FileInputStream fileInputStream = new FileInputStream(new File(selectedPath) );
            URL url = new URL(urlString);
            conn = (HttpURLConnection) url.openConnection();
            conn.setDoInput(true);
            conn.setDoOutput(true);
            conn.setUseCaches(false);
            conn.setRequestMethod("POST");
            conn.setRequestProperty("Connection", "Keep-Alive");
            conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);
            dos = new DataOutputStream( conn.getOutputStream() );
             dos.writeBytes(twoHyphens + boundary + lineEnd);
             dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + fname + "."+extension+"" + lineEnd);
             dos.writeBytes(lineEnd);
             bytesAvailable = fileInputStream.available();
             System.out.println("BYTES:--------->"+bytesAvailable);
             bufferSize = Math.min(bytesAvailable, maxBufferSize);
             System.out.println("BUFFER SIZE:--------->"+bufferSize);
             buffer = new byte[bufferSize];
             System.out.println("BUFFER:--------->"+buffer);
             bytesRead = fileInputStream.read(buffer,0,bufferSize);
             System.out.println("BYTES READ:--------->"+bytesRead);
             while (bytesRead > 0)
             {
              dos.write(buffer, 0, bufferSize);
              bytesAvailable = fileInputStream.available();
              bufferSize = Math.min(bytesAvailable, maxBufferSize);
              bytesRead = fileInputStream.read(buffer, 0, bufferSize);
              System.out.println("RETURNED");
             }
             dos.writeBytes(lineEnd);
             dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

             Log.e("Debug","File is written");
             fileInputStream.close();
             dos.flush();
             dos.close();

            }
            catch (MalformedURLException ex)
            {
                 Log.e("Debug", "error: " + ex.getMessage(), ex);
            }
            catch (IOException ioe)
            {
                 Log.e("Debug", "error: " + ioe.getMessage(), ioe);
            }
            //------------------ read the SERVER RESPONSE
            try {
                  inStream = new DataInputStream ( conn.getInputStream() );
                  String str;

                  while (( str = inStream.readLine()) != null)
                  {
                       Log.e("Debug","Server Response "+str);
                  }
                  inStream.close();

            }
            catch (IOException ioex){
             Log.e("Debug", "error: " + ioex.getMessage(), ioex);
            }

            return null;
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:38:37.247

在开始网络通信之前拨打此电话...

```
ProgressDialog dialog = ProgressDialog.show(this, "", "Loading"); 
```

完成后拨打以下电话..

```
dialog.dismiss(); 
```

...

最好使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)进行网络通信

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:40:24.490

[这个](https://stackoverflow.com/questions/5103377/upload-progress-bar-in-android)问题可能会对你有所帮助。基本上你需要制作一个`ProgressDialog`in`onPreExecute()`方法`AsyncTask`并在`onPostExecute()`. 上传
代码将以`doInBackGround()`.`AsyncTask`

# mercurial - 如何仅捆绑一系列变更集？

> ID：10173316
> 
> 赞同：6
> 
> 时间：2012-04-16T11:34:36.427
> 
> 标签：mercurial, bundle

我对我的工作存储库进行了一些更改，并添加了一些小的（2kb-10kb）python 文件。然后我捆绑了我的更改：

```
hg bundle --base 100:120 nameofbundle.hg 
```

我的捆绑包似乎是 20MB。当我运行时：

```
hg diff -r 100:120 
```

我可以看到我在 python 文件中所做的所有更改，但它仍然不能解释 20MB 的大小。我可能有可能添加了另一个文件从而导致这个奇怪的大小，有没有办法查看这个文件或正在跟踪的文件（从 r100-120）？

我希望我已经说清楚了，我还是 mercurial 的新手。

* * *

编辑

当我跑

```
hg bundle --base 119:120 nameofbundle.hg
hg bundle --base 118:120 nameofbundle.hg 
```

当我刚刚在 python 文件中为两个更改集编辑了 8 行时，我找到了 439 个更改集。我不明白这些变化没有显示在差异中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:59:53.873

您可以使用以下[命令查看捆绑包](http://mercurial.selenic.com/wiki/LookingIntoBundles)

```
hg in nameofbundle.hg 
```

它将显示给定包文件中的变更集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-25T20:06:42.537

[如 OP 所述]

* * *

命令应该是

```
hg bundle -r 120 --base 100 nameofbundle.hg 
```

这仅捆绑了 20 个变更集，并将大小减少到仅 16k。

# vb.net - 文件导入提示

> ID：10173322
> 
> 赞同：0
> 
> 时间：2012-04-16T11:35:02.560
> 
> 标签：vb.net, oracle

下面的代码应该使用导入的行来更新 oracle 中的表。但它似乎只使用从 CSV 文件导入的第一列更新表中的所有列。我认为它是需要操纵/更改的“ReadFields”属性。请给我任何建议，它很紧急。

```
 MsgBox("Saving...")

    Dim parser As New FileIO.TextFieldParser("C:\Documents and Settings\test\Desktop\test.csv")

    parser.Delimiters = New String() {","} ' fields are separated by comma
    parser.HasFieldsEnclosedInQuotes = True
    parser.TrimWhiteSpace = True

    Dim i As Integer

    For i = 0 To DataGridView1.ColumnCount - 1

        **Dim CurrentField = parser.ReadFields()**

        Dim sConnectionString As String = "Data Source=TEST;User ID=TEST;Password=TEST;"

        Dim strSql As String = "INSERT INTO SHOP_MATERIAL_ALLOCT(ORDER_NO, LINE_ITEM_NO, CONTRACT, PART_NO, QTY_REQUIRED, QTY_PER_ASSEMBLY) VALUES (:ORDER_NO,:LINE_ITEM_NO,:CONTRACT,:PART_NO,:QTY_REQUIRED,:QTY_PER_ASSEMBLY)"

        Using conn As New OracleClient.OracleConnection(sConnectionString)
            Using cmd As New OracleClient.OracleCommand()

                Dim adapter As New OracleDataAdapter
                conn.Open()
                cmd.Connection = conn
                cmd.CommandText = strSql
                cmd.Parameters.AddWithValue("ORDER_NO", CurrentField(i))
                cmd.Parameters.AddWithValue("LINE_ITEM_NO", CurrentField(i))
                cmd.Parameters.AddWithValue("CONTRACT", CurrentField(i))
                cmd.Parameters.AddWithValue("PART_NO", CurrentField(i))
                cmd.Parameters.AddWithValue("QTY_REQUIRED", CurrentField(i))
                cmd.Parameters.AddWithValue("QTY_PER_ASSEMBLY", CurrentField(i))

                cmd.CommandText = strSql
                adapter.InsertCommand = New OracleCommand(strSql, conn)
                adapter.UpdateCommand = cmd
                'adapter.Update(table)
                cmd.ExecuteNonQuery()
                cmd.Connection.Close()

                DataGridView1.DataSource = Nothing
            End Using
        End Using
    Next

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:47:06.467

FileIO.TextFieldParser.ReadFields 方法解析输入字符串中的所有字段并将它们存储在一个数组中。在上述情况下，您应该遍历返回数组中的各个值，但您始终使用 CurrentField(i)。尝试使用以下内容替换上面的相关行：

```
cmd.Parameters.AddWithValue("ORDER_NO", CurrentField(0))
cmd.Parameters.AddWithValue("LINE_ITEM_NO", CurrentField(1))
cmd.Parameters.AddWithValue("CONTRACT", CurrentField(2))
cmd.Parameters.AddWithValue("PART_NO", CurrentField(3))
cmd.Parameters.AddWithValue("QTY_REQUIRED", CurrentField(4))
cmd.Parameters.AddWithValue("QTY_PER_ASSEMBLY", CurrentField(5)) 
```

分享和享受。

# java - JavaHelp 视频查看器

> ID：10173324
> 
> 赞同：0
> 
> 时间：2012-04-16T11:35:09.570
> 
> 标签：java, html, video, applet, javahelp

我已将 JavaHelp 添加到我的 Web 应用程序中，但现在我需要在内容 (html) 文件中包含视频。据我[在这里](http://docs.oracle.com/cd/E19253-01/819-0913/overview/jcomp.html)阅读，我需要实现一个轻量级组件，并且我可以使用 Java 2 平台中包含的视频查看器，但我不知道该怎么做。

这里的任何人都可以指导我完成实施此操作所需的步骤吗？

据我所知，我需要

1.  包括一个使用标签的小程序。
2.  编写小程序，基于 Java 2 视频查看器
3.  打包小程序？？

我希望你们中的一个人有这方面的经验。

# css - 从 Google Chrome 打印 Web 字体时显示垃圾字符

> ID：10173328
> 
> 赞同：5
> 
> 时间：2012-04-16T11:35:15.193
> 
> 标签：css, google-chrome, webfonts

我在从 Google chrome v 18 打印网络字体时遇到问题，但它在 IE 和 Firefox 上运行良好，我使用 CSS 文件来传递网络字体，它的代码如下。

```
@font-face {

font-family: 'C39P24DmTtNormal';
src: url('WebFonts/v100025_-webfont.eot');
src: url('WebFonts/v100025_-webfont.eot?#iefix') format('embedded-opentype'),
     url('WebFonts/v100025_-webfont.woff') format('woff'),
     url('WebFonts/v100025_-webfont.ttf') format('truetype'),
     url('WebFonts/v100025_-webfont.svg#C39P24DmTtNormal') format('svg');

font-weight: normal;
font-style: normal;
} 
```

问题截图：

![在此处输入图像描述](../Images/ce14fed551cc98557aba43c302c28ad8.png)

图片描述：

在上面的屏幕截图中，所有标记为红色的都是 CSS 文件中 Web 字体提供的条形码，但打印时如上所示。

我试图在谷歌上搜索，但这似乎是 Chrome 的一个[可能的错误](http://code.google.com/p/chromium/issues/detail?id=98011)，他们正试图尽快修复它。

是否有任何解决方法可以帮助我，因为我不希望我的客户在他们用来浏览我的 Web 应用程序的每台计算机上安装字体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:52:04.797

放在`.svg`源代码的开头并尝试使用不同的格式，`.svg`例如`truetype`：

```
@font-face {
    font-family: 'EnzoOT-Medi';
    src: url('font.eot');
    src: url('font.svg') format('truetype'),
         url('font.eot?#iefix') format('embedded-opentype'),
      url('font.woff') format('woff'),
      url('font.ttf') format('truetype'),
      url('font.svg') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:36:31.347

我也有同样的问题，从设置中禁用打印预览，但谷歌浏览器中的问题。它不允许在打印之前加载网络字体，因此只需将其重新启用即可。

如果您正在使用`Windows.print`on`body.onLoad`然后删除它作为问题的真正原因。这仅受 Internet Explorer 支持，Google Chrome 不支持。

例子：

```
<body onload="window.print();"> 
```

删除`onload`，我希望它能解决问题。如果你试过这个，我很抱歉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T19:36:18.923

就我而言，这是由于在 vw 中使用了相对字体大小。我在@media print {} 中设置了一条大小为 pt 的规则，并且效果很好。有趣的是，它只发生在 Chrome 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-13T15:40:40.640

此问题的真正解决方法是不在预格式化的打印页面上异步加载 webfonts。这样做您仍然可以使用`window.onload = window.print()`强制打印对话框而不会出现任何问题。

```
<script>
  WebFontConfig = {
    typekit: { id: 'xxxxxx' }
  };

  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
              '://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'false';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })();
</script>
```

# java - 使用来自多个表的信息记录交付的通用或特定 DAO？

> ID：10173331
> 
> 赞同：1
> 
> 时间：2012-04-16T11:35:29.890
> 
> 标签：java, spring, hibernate, dao, hibernate-generic-dao

我正在创建一个 Web 应用程序，它允许用户使用 spring 和 hibernate 通过 GUI 存储和检索数据库中的信息。

在创建 DAO 和服务层时，我陷入了困境。我想创建一个可以添加新交付的方法。在我的交付表中，我有*产品 ID*和*客户 ID*，它们都映射到自己的表，分别包含*产品名称、产品类型*和*客户名称、客户国家*。

我遇到的问题是我希望最终用户通过输入*产品类型、产品名称、客户名称、客户国家和日期*来记录交货。难道我，

(1) 使用添加包含这些对象的新交付的方法创建一个 DAO

或者

(2) 创建一个只将一般对象持久化到数据库的 DAO，然后使用服务方法为每个单独的对象实现 DAO？

感谢您的帮助！

/D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:41:57.400

这是我的通用 dao 的片段，我将其注入到每个服务层类中。

```
@Component("Dao")
public class Dao implements IDao  {
    @Resource(name = "sessionFactory")
    private SessionFactory sessionFactory;

    @Override
    public <T> T save(final T o){
        return (T) sessionFactory.getCurrentSession().save(o);
    }

    @Override
    public void delete(final Object object) {
        sessionFactory.getCurrentSession().delete(object);
    }

    @Override
    public <T> T get(final Class<T> type, final Long id) {
        return (T) sessionFactory.getCurrentSession().get(type, id);
    }

    @Override
    public <T> List<T> getFieldsEq(final Class<T> type, final Map<String, Object> restrictions) {
        final Session session = sessionFactory.getCurrentSession();
        final Criteria crit = session.createCriteria(type);
        for (Map.Entry<String, Object> entry : restrictions.entrySet()) {
            crit.add(Restrictions.eq(entry.getKey(), entry.getValue()));
        }

        return crit.list();
    }
} 
```

可以像这样在您的服务层中使用它：

```
@Transactional(readOnly = true)
public List<City> getCities() {
  return dao.getAll(City.class);
} 
```

当然，您可以为特定的复杂查询扩展 dao。拥有一个通用的 dao 遵循*单点责任原则**DRY*，并使其更易于测试。事务应该在服务层并且直接与工作单元相关。

# c# - 无法清除行内容

> ID：10173339
> 
> 赞同：0
> 
> 时间：2012-04-16T11:36:00.460
> 
> 标签：c#, windows-phone-7

在我的应用程序中，我有一个带有 2 个文本块和一个按钮的网格，按钮标签具有 appSettings 的键，单击方法应该从 appSettings 中删除此键，这部分工作正常，但是当我尝试更新时出现问题屏幕上的数据，我可以删除该行，但我找不到专门从该行删除 textBlocks 和按钮的方法。

有什么建议么？

# synchronization - 覆盖同步方法

> ID：10173345
> 
> 赞同：5
> 
> 时间：2012-04-16T11:36:13.837
> 
> 标签：synchronization, overriding

当超类中的方法被同步时会发生什么，但是您在子类中重写了该方法并且不同步它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T06:51:49.883

如果超类中的方法是同步的，但是您在子类中覆盖了该方法并且不同步它，那么**如果在子类上调用该方法就不再同步**。

# performance - 如何在 Qt 中滚动时避免感知闪烁？

> ID：10173348
> 
> 赞同：1
> 
> 时间：2012-04-16T11:36:16.783
> 
> 标签：performance, qt, drawing, flicker, qpainter

我正在尝试使用 Qt 框架（4.7.4）来演示滑动显示，其中新的像素数据被添加到屏幕的第一行，并且之前的像素在每次刷新时滚动到下方一个像素。

它每秒刷新 20 次，每次刷新时，都会在黑色背景上绘制随机的绿点（像素）。

问题是; 每次刷新都有非常明显的闪烁。我已经通过网络进行了研究并尽可能优化了我的代码。我尝试将光栅渲染与 QPainter（在 QWidget 上）和 QGraphicsScene（在 QGraphicsView 上）一起使用，甚至我尝试在 QGLWidget 上使用 OpenGL 渲染。但是，最后我仍然有同样的闪烁问题。

什么可能导致这种闪烁？我开始怀疑我的 LCD 显示器无法刷新显示以实现黑色到绿色的过渡。我还注意到，如果我选择灰色背景而不是黑色，则不会发生闪烁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T17:24:44.947

你看到的效果纯粹是心理视觉的。这是人为缺陷，不是软件缺陷。我是认真的。您可以通过固定值来验证`x`- 您仍将在窗口上重新绘制整个像素图，不会有任何闪烁 - 因为本身没有闪烁。

当滚动速率与实时的流逝无关时，就会发生心理视觉闪烁。当偶尔更新之间的时间因 CPU 负载或系统计时器不准确而发生变化时，我们的视觉系统会集成两个图像，并且看起来好像整体亮度发生了变化。

您已经正确地注意到，当您通过将背景设置为灰色来降低图像的对比度时，感知到的闪烁会减少。这是一个额外的线索，表明效果是心理视觉的。

下面是一种防止这种影响的方法。注意滚动距离与时间的关系（这里：1ms = 1pixel）。

```
#include <QElapsedTimer>
#include <QPaintEvent>
#include <QBasicTimer>
#include <QApplication>
#include <QPainter>
#include <QPixmap>
#include <QWidget>
#include <QDebug>

static inline int rand(int range) { return (double(qrand()) * range) / RAND_MAX; }

class Widget : public QWidget
{
    float fps;
    qint64 lastTime;
    QPixmap pixmap;
    QBasicTimer timer;
    QElapsedTimer elapsed;
    void timerEvent(QTimerEvent * ev) {
        if (ev->timerId() == timer.timerId()) update();
    }
    void paintEvent(QPaintEvent * ev) {
        qint64 time = elapsed.elapsed();
        qint64 delta = time - lastTime;
        lastTime = time;
        if (delta > 0) {
            const float weight(0.05);
            fps = (1.0-weight)*fps + weight*(1E3/delta);

            if (pixmap.size() != size()) {
                pixmap = QPixmap(size());
                pixmap.fill(Qt::black);
            }
            int dy = qMin((int)delta, pixmap.height());
            pixmap.scroll(0, dy, pixmap.rect());
            QPainter pp(&pixmap);
            pp.fillRect(0, 0, pixmap.width(), dy, Qt::black);
            for(int i = 0; i < 30; ++i){
                int x = rand(pixmap.width());
                pp.fillRect(x, 0, 3, dy, Qt::green);
            }
        }
        QPainter p(this);
        p.drawPixmap(ev->rect(), pixmap, ev->rect());
        p.setPen(Qt::yellow);
        p.fillRect(0, 0, 100, 50, Qt::black);
        p.drawText(rect(), QString("FPS: %1").arg(fps, 0, 'f', 0));
    }

public:
    explicit Widget(QWidget *parent = 0) : QWidget(parent), fps(0), lastTime(0), pixmap(size())
    {
        timer.start(1000/60, this);
        elapsed.start();
        setAttribute(Qt::WA_OpaquePaintEvent);
    }
};

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    Widget w;
    w.show();
    return a.exec();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T11:55:23.843

我建议您不要在原地滚动像素图，而是创建第二个像素图并使用`drawPixmap()`将除一行之外的所有内容从像素图 1 复制到像素图 2（带有滚动偏移）。然后继续在像素图 2 上绘制。帧之后，交换对两个像素图的引用，然后重新开始。

基本原理是从一个内存区域复制到另一个内存区域可以比就地修改一个内存区域更容易优化。

# android - 存储游戏数据的合适方式是什么？

> ID：10173353
> 
> 赞同：2
> 
> 时间：2012-04-16T11:36:54.620
> 
> 标签：android, save

我正在用自己的引擎编写游戏。我想在我的游戏中创建一个商店。它将为硬币游戏添加一些新功能。

如何存储硬币数量、新角色（已购买或未购买）等游戏数据？SQlite 或任何其他方式来做到这一点？专业人士是如何做到的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T11:46:18.010

请查看 Android Dev Guide 中的[数据存储](http://developer.android.com/guide/topics/data/data-storage.html)主题。

另请查看[SQLite](http://developer.android.com/reference/android/database/sqlite/package-summary.html)，这是上面发布的指南的一个子部分。

有关如何在 SQLite 数据库中加密数据的信息：
[Android SQLCipher](https://guardianproject.info/code/sqlcipher/)
[PBKDF2](http://rtner.de/software/PBKDF2.html)

希望这可以帮助！

# eclipse - Intellij IDEA：将某些小部件包装在 XML 文件中的容器中

> ID：10173354
> 
> 赞同：0
> 
> 时间：2012-04-16T11:36:55.700
> 
> 标签：eclipse, intellij-idea, code-generation

有没有这样的工具，比如重构菜单中的eclipse？它生成容器并将选定的文本包装在其中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:27:37.750

检查使用语言结构帮助部分的[周围代码块。](http://www.jetbrains.com/idea/webhelp/surrounding-blocks-of-code-with-language-constructs.html)

# codeigniter - 分页第一个链接禁用codeigniter

> ID：10173355
> 
> 赞同：0
> 
> 时间：2012-04-16T11:36:58.627
> 
> 标签：codeigniter

我正在使用 codeigniter 分页。第一个链接被禁用，其余链接正常工作。即使在转到第二和第三个链接之后，第一个链接仍然被禁用。

控制器

```
$this->load->library('pagination');
$config['base_url'] = base_url().'/le0wallt1esadmin/specialoffer/viewsp/';
$config['total_rows'] = $this->db->count_all('home');
$config['per_page'] =5;
$config['use_page_numbers'] = TRUE;
$config['uri_segment'] = 4;  
    $this->pagination->initialize($config); 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:37:20.560

它是 codeigniter 分页库的当前分页行为。要覆盖它，您可以指定

```
$config["cur_tag_open"] = "<a href='" + current_url() + "'>";
$config["cur_tag_close"] = "</a>"; 
```

然后您将获得当前页面链接。

# ios - 在这个 PDF 中出现错误的 CropBox rect 我会像 (-396,-306,792,612)？

> ID：10173359
> 
> 赞同：0
> 
> 时间：2012-04-16T11:37:14.897
> 
> 标签：ios

这个pdf有问题吗？怎么做才能摆脱这个？

这是我的示例代码

```
 CGContextConcatCTM(context, CGPDFPageGetDrawingTransform(drawPDFPageRef, kCGPDFCropBox, self.bounds, angle, true));
    appdel.widthScale=scale;
    CGContextSetInterpolationQuality(context, kCGInterpolationHigh); 
    CGContextSetRenderingIntent(context, kCGRenderingIntentDefault); 

    CGContextSetRGBFillColor(context, 1.0f, 1.0f, 1.0f, 1.0f);
    CGContextFillRect(context, cropBoxRect);
    //CGContextClipToRect(context, cropBoxRect);

    CGContextDrawPDFPage(context, drawPDFPageRef); 
```

Pdf 名称是 Xoom Pad 4.pdf

[http://www.motorola.com/staticfiles/Support/US-EN/TABLETS/XOOM-with-Wi-Fi/Documents/StaticFiles/XOOM_wifi_GSG_US_68016036001A.pdf](http://www.motorola.com/staticfiles/Support/US-EN/TABLETS/XOOM-with-Wi-Fi/Documents/StaticFiles/XOOM_wifi_GSG_US_68016036001A.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:20:03.297

好吧，cropbox肯定有可能在pdf坐标空间中具有负值。

# iphone - 旋转动画

> ID：10173364
> 
> 赞同：1
> 
> 时间：2012-04-16T11:38:07.333
> 
> 标签：iphone, objective-c, animation, rotation

我正在将箭头旋转 45 度。当动画结束时，箭头会返回其原始状态（0 度）。我需要箭头不会返回到原始状态，并且在动画结束时它将旋转 45 度。

```
CABasicAnimation *fullRotationShort = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
fullRotationShort.fromValue = [NSNumber numberWithFloat:0];
fullRotationShort.toValue = [NSNumber numberWithFloat:M_PI/28*4.7];
fullRotationShort.duration = 1.0f;
fullRotationShort.repeatCount = 1;
[imgViewArrowShort.layer addAnimation:fullRotationShort forKey:nil]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T11:43:34.050

假设您的箭头是`UIImageView`命名的`arrow`。
你真的不需要这么复杂的 CAAnimations。

```
[UIView animateWithDuration:1.0 animations:^{ 
    arrow.transform = CGAffineTransformMakeRotation(0.25 * M_PI);
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:46:38.010

设置属性：

```
fullRotationShort.fillMode = kCAFillModeForwards;
fullRotationShort.cumulative = YES;
   fullRotationShort.removedOnCompletion=NO; 
```

# php - 带有codeigniter的jQuery post调用失败

> ID：10173371
> 
> 赞同：0
> 
> 时间：2012-04-16T11:38:32.970
> 
> 标签：php, jquery, codeigniter

我正在尝试使用 post jquery 请求删除元素：

```
$(function(){
    //The element
   // <a data-id="39" data-toggle="modal" href="#delete"><i class="icon-trash"></i> 

Delete</a>

   $('.delete').on('click',function(){
       var id= $(this).attr('data-id');

  $.post('task/delete',  { id: id }, function(data) {
        alert('Task deleted!');
    })
    .success(function(){  alert('Task deleted!'); })          
     .complete(function(){  alert('Task completed!'); })
     .error(function(){   alert('Error was found!'); });
   })

}); 
```

我的控制器称为任务，其中的函数称为删除。

```
 class Task extends CI_Controller {

        public function delete()
    {
        $this->load->model('tasks_model','task_delete');
        $this->task_delete-> deleteTask($_POST['id']);

    }
     } 
```

该模型非常简单..它只是删除记录。

```
 public function deleteTask($task_id)
    {
        $task_id = mysql_real_escape_string($task_id);
        $this->db->query("DELETE FROM tasks WHERE task_id = ?", array($task_id));

    } 
```

我收到两条消息..一条是错误，一条是删除...我要避免的另一件事是将 id 发布到控制器任务..这将自动删除记录，有没有办法避免这个也是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:47:35.477

您还没有在控制器中使用函数名称，它应该是：

```
$this->task_delete->deleteTask($id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:50:55.020

为避免有人发布所有 ID 并删除所有任务，您应该只删除属于该用户的任务。

我猜你保存每个任务，所以它属于一个特定的用户，对吧？因此，在您的删除查询中，您可以运行 DELETE WHERE task_id={task_id} AND user_id={user_id}。user_id 是您将保存在会话中的内容。

附带说明一下，在运行数据库查询时，您可以绑定参数，这意味着 CI 负责使参数安全。因此，您可以将上面的查询修改为：

```
$this->db->query("DELETE FROM tasks WHERE task_id = ?", array($task_id)); 
```

您可以在此处阅读更多信息：底部的[http://codeigniter.com/user_guide/database/queries.html （查询绑定部分）。](http://codeigniter.com/user_guide/database/queries.html)

至于您同时收到错误和成功消息的错误，可能会有一些不同的事情出错。我不确定复制代码时是否出现问题，但您的 PHP 代码中有错误：

```
$this->load->model('tasks_model','task_delete');
$this->task_delete($id); 
```

应该：

```
$id = $this->input->post('id'); // the data is posted, it won't be passed in as an argument to the controller function
$this->load->model('tasks_model','task_delete');
$this->task_delete->deleteTask($id); 
```

而且您的查询似乎也有错误，因此最好按照我上面提到的方式进行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T11:53:26.883

您的控制器方法应如下所示

```
public function delete()
{
   // Do user validation here
  $this->load->model('tasks_model');
  $this->tasks_model->task_delete($this->input->post('id'));
  return "task deleted";
} 
```

你模拟这样的方法

```
public function task_delete($task_id)
{
  $this->db->where('task_id', $task_id);
  $this->db->delete('tasks');
} 
```

正如我建议在评论中说明您应该验证用户的那样，并使用 CI 的活动记录库，您可以在其中增加对不同数据库的可移植性。

**编辑**

显示 PHP 错误（如果它们打开，可能还有 MySQL 错误）。

```
error_reporting(E_ALL); 
```

要确保删除任务，请执行此操作（效率不高）。

```
public function task_delete($task_id)
{
  $this->db->where('task_id', $task_id);
  $this->db->delete('tasks');

  $this->db->from('tasks');
  $this->db->where('task_id', $task_id);

  $query = $this->db->get();

  if ( $query->num_rows() > 0 )
  {
    return FALSE;
  } 
  else return TRUE;
} 
```

然后对控制器中返回的布尔值做一些事情。

# android - 如何在android中的键盘上方添加保存和取消按钮

> ID：10173373
> 
> 赞同：2
> 
> 时间：2012-04-16T11:38:37.027
> 
> 标签：android, android-softkeyboard

请看这个链接，这个链接有图片 [http://groups.google.com/group/android-developers/attach/089583d2b50b1676/original_softKeyboard.jpg?part=4](http://groups.google.com/group/android-developers/attach/089583d2b50b1676/original_softKeyboard.jpg?part=4)

有可能吗？如果是，请帮助我！

或任何替代解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:20:30.390

您的问题可能重复：

[如何在通讯录中获得保存和取消按钮？](https://stackoverflow.com/questions/8982947/how-to-get-save-cancel-button-like-in-contacts/8983036#8983036)

这是一个页脚视图：你需要做这样的事情：

```
 <?xml version="1.0" encoding="utf-8"?>

    <LinearLayout android:id="@+id/linearLayout1"
        android:layout_width="fill_parent" android:layout_height="fill_parent"
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical" android:background="#ffffff">
        <RelativeLayout 
            android:layout_width="fill_parent" android:layout_height="50dp">
            <Button "></Button>
        </RelativeLayout>

        <ScrollView android:layout_width="fill_parent"
            android:layout_height="wrap_content" android:layout_weight="1">
            <LinearLayout android:id="@+id/linearLayout1"
                android:layout_width="fill_parent" android:layout_height="wrap_content"
                android:orientation="vertical" android:background="#ffffff">
                 <RelativeLayout android:gravity="bottom"
                    android:paddingTop="40dp" android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_alignParentBottom="true"
                    android:layout_alignParentLeft="true" android:background="#ffffff"
                    android:paddingBottom="55dp">

                    <Button ></Button>

                    <Button ></Button>

                    <Button></Button>

                    <Button></Button>

                </RelativeLayout>
            </LinearLayout>

        </ScrollView>
<!--for bottom bar -->
        <RelativeLayout android:layout_height="50dp"
            android:gravity="center" android:layout_width="match_parent"
            android:id="@+id/linearLayout2" android:background="#ffffff">
            <Button ></Button>
            <Button ></Button>
            <Button ></Button>
        </RelativeLayout>

</LinearLayout> 
```

# java - Hashmap 是否使用随机访问？

> ID：10173375
> 
> 赞同：-3
> 
> 时间：2012-04-16T11:39:03.693
> 
> 标签：java, hashmap

在 java 的 HashMap 中，我了解到**哈希值存储在桶**中，这有助于更快地搜索。
在检索时，它会检查哈希码并相应地找到桶号。

如果有从 1 到 10 的桶号，并且从哈希码中找到的桶号是桶号 5
。
**控制权如何转移到 5 号桶？它是遍历存储桶 1 到存储桶 4 并到达 5 还是使用任何其他机制？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T11:42:03.290

它是直接数组访问。没有迭代/遍历。但随后它必须遍历桶内的对象**并**与 比较`equals`。也许这让你感到困惑。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T11:42:17.313

哈希表被实现为一个桶数组，因此它使用数组的[随机访问](http://en.wikipedia.org/wiki/Random_access)索引来获取给定哈希的正确桶。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T11:46:53.160

**哈希函数用于定位桶。**

如果有 10 个桶，例如，对于一组字符串，将字符值相加并散列到 10 个桶

让我们编写一个简单的哈希函数将字符串映射到 10 个桶中，

```
 For any non empty String, 

             hash function f = sum of (index of characters) % 10 
```

示例：abc = 1+2+3 %10 = 6。所以“abc”最终出现在第 6 个桶中。xyz = 24+25+25 %10 = 7.5~ 8 。所以“xyz”最终出现在第 8 个桶中，依此类推

所以当你搜索 "xyz" 时，哈希函数直接找到这里的桶。

[哈希函数](http://en.wikipedia.org/wiki/Hash_function)是哈希映射工作的核心。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T11:46:26.350

摘自 java.util.HashMap 代码

```
 /**
          * Adds a new entry with the specified key, value and hash code to
          * the specified bucket.  It is the responsibility of this
          * method to resize the table if appropriate.
          *
          * Subclass overrides this to alter the behavior of put method.
          */
         void addEntry(int hash, K key, V value, int bucketIndex) {
             Entry<K,V> e = table[bucketIndex];
             table[bucketIndex] = new Entry<>(hash, key, value, e);
             if (size++ >= threshold)
                 resize(2 * table.length);
         } 
```

所以它是从一个数组中随机访问的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T11:57:25.043

在添加和检索值时有几种策略，其中一些是直接转换，开放寻址等基于这些，它存储和获取值的方式会改变。例如，在直接链接中，桶数组的每个空间都是指向链表的指针它包含散列到相同位置的键值对。因此，当您搜索该值时，它会使用给定值扫描整个列表。

# ruby-on-rails - 如何在 ruby on rails 中设置 db 的默认值

> ID：10173377
> 
> 赞同：2
> 
> 时间：2012-04-16T11:39:12.830
> 
> 标签：ruby-on-rails, database, model

当我们为模型键入命令时，我想设置默认值，即

rails g 模型管理员用户：字符串密码：字符串

我如何为用户设置默认值并传递“管理员”

就像是。

rails g 模型管理员用户：字符串默认值：“admin”密码：字符串默认值：“admin”

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T12:03:54.790

在您的迁移文件中，例如

```
t.decimal :bounties, :precision => 8, :scale => 2, :default => 0 
```

或设置回调

```
before_create :set_admin

def set_admin
  self.role = "admin"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:46:34.400

嗨，一种方法是在迁移文件中通过提供默认哈希设置默认值，然后迁移。或者您可以覆盖新方法，或者如果您想为应用程序创建一个管理员用户，您可以将其放入种子数据中。

# sql - 查找具有相同 some_attribute 但 user_id 的两个不同值的行

> ID：10173378
> 
> 赞同：0
> 
> 时间：2012-04-16T11:39:20.497
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3.2, arel

这些是我的课程和关系

```
class User
  has_many :conversation_participants
  has_many :conversations, :through => :conversation_participants
end

class ConversationParticipant
  belongs_to :user
  belongs_to :conversation
end

class Conversation
  has_many :messages
  has_many :conversation_participants
  has_many :users, :through => :conversation_participants
end 
```

因此，当我想在 user_ids 12 和 15 之间创建对话时，我首先要检查这两者之间的对话是否已经存在。所以我需要找到的是：

> ConversationParticipants where user_id IN (12, 15) AND “两个 conversationparticipant 行具有相同的对话 id”

我缺乏适当的词语来解释这个查询，但我想每个人都会明白我的意思。“这两个用户之间的对话是否已经存在？”。我既不知道如何在 SQL 和 Rails 中做到这一点，所以任何答案都值得赞赏。

**编辑** 对话的 id 是未知的。我需要找出这两个 user_id 之间**是否**存在对话。

谢谢——埃米尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:15:36.017

```
class User
  has_many :conversations
  has_many :conversation_participants
  has_many :joined_conversations, :through => :conversation_participants, :source => :conversation
end

class ConversationParticipant
  belongs_to :user
  belongs_to :conversation
end

class Conversation
  belongs_to :user
  has_many :conversation_participants
  has_many :speakers, :through => :conversation_participants, :source => :user
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:14:16.470

你可以试试这个

```
 @result = ConversationParticipants.where("user_id in ? AND conversation_id=?",[1,2,3,4],2) 
```

# php - PHP嵌套三元问题

> ID：10173383
> 
> 赞同：0
> 
> 时间：2012-04-16T11:39:52.393
> 
> 标签：php, ternary

我的代码中有嵌套的三元运算符，如下所示：

```
$error = $fault_all ? "ALL" : $fault_twothirds ? "TWOTHIRDS" : $fault_onethird ? "ONETHIRD" : "UNKNOWN";
        echo 'STATEERROR: ' . $error . ';'; 
```

它们按我的偏好从左到右的顺序列出，所以如果 $fault_all 和 $fault_twothirds 为真，我希望将“ALL”分配给 $error; 如果它们都为真，则相同。如果全部为假，则应将“未知”分配给错误。

但是，如果其中任何一个为真，则仅返回“ONETHIRD”，如果返回所有假“UNKNOWN”。如何让“ALL”和“TWOTHIRDS”被退回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:45:51.200

我建议您使用`(`and`)`将不同的三元组彼此分开，或者使用 if/else 子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:56:09.050

就能够调试和管理状态列表而言，我建议停止使用不可读的三元组，并使用 switch、if-elseif 语句，或者，如果您预计列表很长，则使用如下方法如下：

```
<?php
function state( $states ) {
    foreach( $states as $state => $current ) {
        if( $current ) {
            return $state;
        }
    }
    return 'UNKNOWN';
}

$states = array(
    'ALL' => $fault_all,
    'TWOTHIRDS' => $fault_twothirds,
    'ONETHIRD' => $fault_onethird
);

var_dump( state( $states ) ); 
```

也就是说，这应该有效，我认为：

```
<?php
$error = ( $fault_all ? "ALL" : ( $fault_twothirds ? "TWOTHIRDS" : ( $fault_onethird ? "ONETHIRD"  : "UNKNOWN" ) ) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T15:08:16.067

> 这是一个已知的问题。——[维坤](http://me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design/)

以下面的嵌套三元为例...

```
<?php 
$arg = 'T';
$vehicle = ( ( $arg == 'B' ) ? 'bus' :
           ( $arg == 'A' ) ? 'airplane' :
           ( $arg == 'T' ) ? 'train' :
           ( $arg == 'C' ) ? 'car' :
           ( $arg == 'H' ) ? 'horse' :
           'feet' );
echo $vehicle; 
```

印刷`'horse'`

正如@berry-langerak 所说，使用控制流功能......

使用对象 {array, structure} 更可靠... IE

```
$vehicle = (empty( $vehicle) ?

    array(

    'B' => 'Bus',
    'A' => 'Airplane',
    'T' => 'Train',
    'C' => 'Car',
    'H' => 'Horse',

    ):

    NULL
 );

 $arg = 'T';

 $vehicle = (! empty($arg) ? $vehicle[$arg] : "You have to define a vehicle type");

 echo($vehicle); 
```

# jquery - jQuery .change() 不起作用

> ID：10173384
> 
> 赞同：2
> 
> 时间：2012-04-16T11:39:52.867
> 
> 标签：jquery, onchange

我有 <select> 输入，这是其`change`事件的代码：

```
$(document).on("change", "select[id $= 'Type']", function(){ 
    var id = $(this).attr('id');
    id = id.replace("Question", "");
    id = id.replace("Type", "");
    id = id.replace("Option", "###");
    var split = id.split("###");
    var qno = split[0];
    var ono = split[1];
    setOptionContentInput($(this).val(), qno, ono);
}); 
```

这完美地工作。

但是当我在`$(document).ready()`函数内部调用下面的代码时，它不起作用，我不知道为什么。

```
$(document).ready(function() {
  $("select[id $= 'Type']").change();
}); 
```

这是`setOptionContentInput()`功能：

```
function setOptionContentInput(type, qno, ono){
  switch(type) {
    case "<?php echo TEXT_OPTION; ?>":
      $(".image_option_" + qno + "_" + ono).attr('disabled', 'disabled');
      $(".image_option_" + qno + "_" + ono).hide();
      $(".sound_option_" + qno + "_" + ono).attr('disabled', 'disabled');
      $(".sound_option_" + qno + "_" + ono).hide();
      $(".text_option_"  + qno + "_" + ono).removeAttr('disabled');
      $(".text_option_"  + qno + "_" + ono).show(500);
      $(".text_option_"  + qno + "_" + ono).siblings("label").show(500);
      break;

    case "<?php echo IMAGE_OPTION; ?>":
      $(".text_option_"  + qno + "_" + ono).attr('disabled', 'disabled');
      $(".text_option_"  + qno + "_" + ono).hide();
      $(".text_option_"  + qno + "_" + ono).siblings("label").hide();
      $(".sound_option_"  + qno + "_" + ono).attr('disabled', 'disabled');
      $(".sound_option_"  + qno + "_" + ono).hide();
      $(".image_option_"  + qno + "_" + ono).removeAttr('disabled');
      $(".image_option_"  + qno + "_" + ono).show(500);
      break;

    case "<?php echo SOUND_OPTION; ?>":
      $(".text_option_"  + qno + "_" + ono).attr('disabled', 'disabled');
      $(".text_option_"  + qno + "_" + ono).hide();
      $(".text_option_"  + qno + "_" + ono).siblings("label").hide();
      $(".image_option_"  + qno + "_" + ono).attr('disabled', 'disabled');
      $(".image_option_"  + qno + "_" + ono).hide();
      $(".sound_option_"  + qno + "_" + ono).removeAttr('disabled');
      $(".sound_option_"  + qno + "_" + ono).show(500);
      break;

    default:
  }
} 
```

有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:50:31.060

尝试如下调用它

```
$(document).ready(function() {

    $("select[id $= 'Type']").change(function(){
        // call the function you want with necessary parameters
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:08:27.247

如果`$(document).ready();`不起作用，但`$(window).load();`确实如此，那么您之前的 DOM 中可能有（有...）一个错误。

当您使用多个`$(document).ready();`. 如果第一个发生错误，它可能会互相阻塞。这就是为什么您仍然可以使用`$(window).load();`.

对于接下来会遇到此问题的人：检查您的 JS 控制台（通过 Webkit 开发工具或 Firebug 等）并查找此类错误，修复它，然后重试；）

# extjs - 如何模拟鼠标文本选择？

> ID：10173389
> 
> 赞同：0
> 
> 时间：2012-04-16T11:40:15.097
> 
> 标签：extjs, gxt

我正在使用 GWT/GXT。我正在使用可编辑网格。它有 3 列。如果用户使用 TAB 从第一列导航到另一列，则该列中的文本应选择如下（蓝色背景的单元格仅用于文本而不是整个单元格），以便我可以使用 Delete 或退格轻松删除单元格的文本没有再次选择文本的按钮。这里我的问题是如何模拟鼠标文本选择？

![在此处输入图像描述](../Images/952a941465aa4978fa52e1675beade1d.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:04:16.020

```
final TextField<String> text = new TextField<String>();
text.setSelectOnFocus(true);
column.setEditor(new CellEditor(text));
configs.add(column); //ColumnConfig 
```

# c# - 如何迭代字典 在 C# 中以相反的顺序（从最后一个到第一个）？

> ID：10173390
> 
> 赞同：11
> 
> 时间：2012-04-16T11:40:20.510
> 
> 标签：c#, c#-4.0

我有一本字典，并在上面添加了一些元素。例如，

```
Dictionary<string, string> d = new Dictionary<string, string>();

d.Add("Content","Level0");
d.Add("gdlh","Level1");
d.Add("shows","Level2");
d.Add("ytye","Level0"); 
```

在 C# 中，Dictionary 使元素保持自然顺序。但我现在想从最后一个到第一个迭代这些值（即，反向顺序）。我的意思是，

首先我想阅读 ytye，然后是节目、gdlh，最后是内容。

请指导我摆脱这个问题......

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-16T11:42:09.043

只需使用 Linq 扩展方法[Reverse](http://msdn.microsoft.com/en-us/library/bb358497.aspx)

例如

```
foreach( var item in d.Reverse())
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-16T11:42:56.063

使用 LINQ Reverse，但请注意不会*在原地反转*：

```
var reversed = d.Reverse(); 
```

但请注意，这不是*SortedDictionary*，因此不一定首先保证顺序。也许你想要`OrderByDescending`呢？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-16T11:45:45.417

也许`OrderByDescending`在关键。像这样：

```
d.OrderByDescending (x =>x.Key) 
```

`Foreach`像这样：

```
foreach (var element in d.OrderByDescending (x =>x.Key))
{

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T11:43:08.287

它在 Linq 中可用：`d.Reverse()`

# java - 内容辅助在 Eclipse 中的工作原理以及如何为我的应用程序模拟该功能

> ID：10173397
> 
> 赞同：-1
> 
> 时间：2012-04-16T11:40:37.063
> 
> 标签：java, eclipse

有人可以帮助我了解内容辅助在 Eclipse 中的工作原理以及我如何为我的桌面 Java 应用程序模仿该功能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:47:30.370

Eclipse 建立在 SWT 和 JFace 之上，换句话说，它是 Eclipse 界面所基于的 UI 工具包的一部分。由于您有一个普通的桌面应用程序，我假设您的程序的 GUI 是 Swing 并且我不知道 Swing 工具包中的内容建议。

Eclipse 平台上的一些链接（<- SWT、JFace、更通用的插件开发等技术的总称）：

*   [Eclipse 维基：JFace](http://wiki.eclipse.org/JFace)
*   [Eclipse Wiki：JFace UI 框架 -> 现场辅助](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fjface.htm)

# php - 页面选项卡内的 oauth facebook

> ID：10173403
> 
> 赞同：0
> 
> 时间：2012-04-16T11:40:54.537
> 
> 标签：php, facebook, oauth

我已按照 facebook 开发人员教程进行操作，但无济于事。

基本上我需要用户从页面选项卡中授权我的应用程序。

我已经使用他们推荐的 javascript 在页面加载时重定向用户，以将他们重定向到 oauth 弹出窗口，但是当应用程序加载时，我只是得到可怕的“抱歉发生错误”

生成的 URL 是“https://www.facebook.com/dialog/oauth/?client_id=247274355370447&redirect_uri=https%3A%2F%2Fwww.facebook.com%2Fpages%2Fnull%2F286793781401206%2F247274355370447&scope=email,user_about_me”所以我可以看到我的 page_id 和 app_id 的变量都被传入了。

这是我完整的 JS 代码

```
<script>
var oauth_url = 'https://www.facebook.com/dialog/oauth/';
oauth_url += '?client_id=<? echo $app_id;?>';
oauth_url += '&redirect_uri=' +     encodeURIComponent('https://www.facebook.com/pages/null/<?php echo $page_id;?>/<?php echo $app_id;?>');
oauth_url += '&scope=email,user_about_me'
window.top.location = oauth_url;
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:46:45.770

我有相同的问题。

你应该能够做到这一点。

> 用户单击对话框中的按钮后要重定向到的 URL。您指定的 URL 必须是与您的应用程序设置中指定的具有相同基本域的 URL、hxxps://apps.facebook.com/YOUR_APP_NAMESPACE 形式的 Canvas URL 或 hxxps:// 形式的页面选项卡 URL www.facebook.com/PAGE_USERNAME/app_YOUR_APP_ID

这对我不起作用。我仍然收到错误消息说 redirect_uri 不属于用户。

我宁愿不必在我的网站上添加一个页面来将它们重定向回该网站，但它似乎正确的方法不起作用。

我目前发现的最简单的解决方法是将 redirect_uri 设置回我域上的页面。加载 page_tab 内容的域相同。

例如，我的页面选项卡加载 hxxp://example.com/ 所以将 redirect_uri 设置为 hxxp://example.com/redirect.php

在redirect.php 中使用以下代码

```
 <script>
window.top.location = "{YOUR_FACEBOOK_PAGE_TAB_URL}";
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T15:40:01.877

如果您希望用户在授权后留在您的 Page Tab App 上，我建议使用 FB.login() 函数。您可以使用以下代码执行此操作：

```
FB.login(function(response) {
    if (response.authResponse) {
        // do something with newly authorized user
    } else {
        console.log('User cancelled login or did not fully authorize.');
    }
 }, {scope:'PERMISSION_1', 'PERMISSION_2'}); 
```

它将在 iframe 中打开对话框，并在他们提交或取消授权后触发回调。

此解决方案使用 javascript SDK。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:16:38.337

我认为这可能是因为您试图将它们重定向回 facebook.com，因此它不会将其视为您的应用程序的有效 url。您需要重定向到您自己网站上的页面，然后如果需要将它们从那里重定向回实际的 facebook 页面应用程序选项卡

# eclipse - 在 Eclipse Indigo 中构建 EAR

> ID：10173419
> 
> 赞同：1
> 
> 时间：2012-04-16T11:42:23.743
> 
> 标签：eclipse, eclipse-indigo

我在 Eclipse Indigo 中创建了一个 EAR-Application 并通过“在服务器上运行”进行编译。一切正常，但我没有在控制台中看到编译错误。我怎样才能让它可见？有什么方法可以在不运行 AS 的情况下编译耳朵？

谢谢BJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:10:52.477

您的代码是在后台编译的，而不是在您调用“在服务器上运行”时编译的。要查看编​​译问题，您需要查看问题视图而不是控制台。如果问题视图在当前透视图中不可见，请使用“窗口 -> 显示视图”菜单找到它。

要创建 .ear 文件，您可以使用“文件 -> 导出 -> Java EE -> EAR 文件”向导。

# c - 类似于旧 glibc 版本上的 getifaddrs

> ID：10173420
> 
> 赞同：0
> 
> 时间：2012-04-16T11:42:27.283
> 
> 标签：c, linux, unix, networking, glibc

有一个非常有用的函数调用`getifaddrs`可以检索所有机器网络地址。问题是我使用的是没有此功能的旧 glibc 版本。有替代品吗？我正在寻找并发现`getipnodebyname`，但是当地址未映射到 /etc/hosts 文件中时它是无用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:18:36.620

执行等效操作的传统方法是使用`SIOCGIFCONF`to 操作`ioctl`。任何套接字都可以用于操作。不过，它不像单个函数调用那么容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T20:03:12.867

要添加到先前的答案，这里是 - 方法的示例`SIOCGIFCONF`。你必须做这样的事情：

```
#include <stdio.h>
#include <unistd.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/ioctl.h>
#include <netinet/in.h>
#include <net/if.h>
#include <arpa/inet.h>

int fd;

int get_iface_list(struct ifconf *ifconf)
{
    int rval;
    if((rval = ioctl(fd, SIOCGIFCONF , (char*) ifconf  )) < 0 )
        perror("ioctl(SIOGIFCONF)");

    return rval;
}

int main()
{
    static struct ifreq ifreqs[100];
    static struct ifconf ifc;
    char *ptr;

    fd = socket(AF_INET, SOCK_DGRAM, 0);
    if (fd < 0)
        return 1;

    ifc.ifc_buf = (char*) (ifreqs);
    ifc.ifc_len = sizeof(ifreqs);

    if(get_iface_list(&ifc) < 0) return -1;

    /* Go through the list of interfaces */
    for (ptr = ifc.ifc_buf; ptr < ifc.ifc_buf + ifc.ifc_len;)
    {
        struct ifreq *ifr = (struct ifreq*)ptr;
        int len = (sizeof(struct sockaddr) > ifr->ifr_addr.sa_len) ?
                sizeof(struct sockaddr) : ifr->ifr_addr.sa_len;

        ptr += sizeof(ifr->ifr_name) + len;

            /* Do what you need with the ifr-structure.
             * ifr->ifr_addr contains either sockaddr_dl,
             * sockaddr_in or sockaddr_in6 depending on
             * what addresses and L2 protocols the interface
             * has associated in it.
             */
    }

    close(fd);
    return 0;
} 
```

当然，也有一些陷阱。根据 Unix Network Programming 第 17.6 章`ioctl(fd, SIOCGIFCONF, array)`，如果参数中指向的数组太小，在某些平台上可能不会返回错误。然后将连接数据。解决此问题的唯一方法是`ioctl()`在循环中调用，直到您获得相同的结果长度两次，同时增加数组的大小。当然，由于这是 2012 年，我不确定这是否相关。

在这种情况下，数组的大小`ifreqs`纯粹是猜测。请记住，该数组将为`struct ifreq`与接口关联的每个 L2 和 L3 地址包含一个。例如，假设您还有 IPv6 地址，对于 lo-interface，您将获得三个条目：以太网、IPv4 和 IPv6。因此保留足够的空间或应用kludge。

要获取广播地址和其他附加信息，您需要`ioctl()`在循环中进行附加调用。当然，所有可能的选项都取决于您的操作系统提供的内容。

有关更多信息，我建议阅读 W. Richard Stevens 的 Unix Network Programming。这是关于这个主题的最全面的书。

# c# - Stringbuilder 在 URL 末尾添加 %

> ID：10173421
> 
> 赞同：1
> 
> 时间：2012-04-16T11:42:28.077
> 
> 标签：c#, asp.net, stringbuilder

我的代码中构建了一个字符串有一个小问题。当我调试我的页面时，网址不正确。例如，当点击我页面上的链接时，Google 的 url 就是这个。[http://www.google.co.uk%22%22/](http://www.google.co.uk%22%22/)

请参阅下面的代码。

```
sb.Append(@"<a href=" + r["Url"].ToString() + "\"" + @""" target=""blank"">");
sb.Append(@"<img src=""../ShowImage.ashx?id=" + r["Image_id"] + "\" title=\"" + r["Title"].ToString() + "\"  alt=\"" + r["Alt_text"].ToString() + "\"  >");
sb.Append("</a>"); 
```

我如何构建我的字符串有错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:46:53.877

您将用`\`( `"\""`) 转义的引号与用 " ( `@"""`) 转义的引号混合在一起，并且有一个太多。试试这个：

```
sb.Append(@"<a href=""" + r["Url"].ToString() + @""" target=""blank"">"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:46:40.210

`%22`是字符串编码的版本`"`

尝试：

```
sb.Append(@"<a href=" + r["Url"].ToString() + "\ + @""" target=""blank"">"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:03:01.283

那是因为 URL 前面没有引号，但后面有两个引号。省略引号是可以的（对于没有空格的值），但是你必须省略它们。当您省略起始引号时，末尾的引号（或在本例中为标记）成为值的一部分。

另外，当你有一个 StringBuilder 时，你为什么要连接字符串？直接使用该`Append`方法，而不是先连接字符串，然后附加结果。

```
sb
  .Append("<a href=\"").Append(r["Url"].ToString()).Append("\" target=\"blank\">")
  .Append("<img src=\"../ShowImage.ashx?id=").Append(r["Image_id"]).Append("\" title=\"").Append(r["Title"].ToString()).Append("\"  alt=\"").Append(r["Alt_text"].ToString()).Append("\">")
  .Append("</a>"); 
```

# objective-c - 检查osx菜单栏是否半透明？

> ID：10173422
> 
> 赞同：1
> 
> 时间：2012-04-16T11:42:29.577
> 
> 标签：objective-c, macos, cocoa

我们可以从系统偏好设置 -> 桌面设置更改设置半透明菜单栏。

有没有办法从某些 API 或 plist 文件中读取此设置，并在用户从半透明菜单栏设置切换时得到通知？

如果我们这样做，

```
[[NSDistributedNotificationCenter defaultCenter]
 addObserver:self
 selector:@selector(dockChanges:)
 name:@"com.apple.dock.prefchanged"
 object:nil]; 
```

我们可以收到系统偏好更改的通知。我正在寻找相同的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:53:07.890

这就是我们如何获得有关菜单透明度的信息。

```
NSDictionary *oldGlobalPreferences = [NSDictionary dictionaryWithContentsOfFile: 
                                              [@"~/Library/Preferences/.GlobalPreferences.plist" 
                                               stringByExpandingTildeInPath]];

bool bIsTransparencyEnabled = [[oldGlobalPreferences objectForKey:@"AppleEnableMenuBarTransparency"] boolValue]; 
```

# c - Macosx、C 和嵌入式 lua

> ID：10173423
> 
> 赞同：1
> 
> 时间：2012-04-16T11:42:30.627
> 
> 标签：c, lua, osx-leopard

好的，我们有什么：

用 C 语言编写的程序，在 Linux 和 MacOSX（豹）中编译和运行没有问题。我今天嵌入了lua代码。Linux：从源代码编译 lua 5.1。一切正常并编译没有任何问题。Macos：编译相同的 lua 5.1 包。

与 --llua 链接。

开始编译，报错：

CC=gcc-4.0 使

> ld：警告：在 /usr/local/lib/liblua.a 中，文件不是必需的体系结构

还尝试从 macports 重新安装、完成删除和安装。相同。

那么有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:55:45.383

该错误`"file is not of required architecture"`暗示您正在尝试混合架构这一事实。

检查架构`/usr/local/lib/liblua.a`并确保它与您尝试构建的架构或对象相匹配。

例如

我们有一个 i386 对象：

```
==== cat fun.c ==== 
#include <stdio.h>
void fun()
{
    printf("%s", "foobar\n");
}
gcc -arch i386 -c fun.c -o fun.o 
```

如果我们在编译 x86_64 对象（Mac OS X 中的默认架构）时尝试使用它：

```
===== cat test.c ==
extern void fun();
int main()
{
    fun();
} 
```

我们得到：

```
$ gcc test.c fun.o
ld: warning: ignoring file fun.o, file was built for i386 which is not the architecture being linked (x86_64)
Undefined symbols for architecture x86_64:
  "_fun", referenced from:
      _main in ccXVCQhG.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

# jquery - 使用 PhoneGap 和 jQuery 的跨域请求不起作用

> ID：10173427
> 
> 赞同：19
> 
> 时间：2012-04-16T11:42:43.310
> 
> 标签：jquery, ajax, cordova, cross-domain

我正在为 Android 创建一个 PhoneGap 应用程序。为了从（远程）服务器获取数据，我使用 jQuery 的 $.ajax() 函数进行了 REST 调用。有几件事你必须知道：

*   调用类型必须是 POST
*   服务器需要 JSON 数据（至少用户名和密码）
*   服务器发回 JSON 数据

编码：

```
function makeCall(){
    var url = "http://remote/server/rest/call";

    var jsonData ='{"username":"'+$('#username').val()+'","password":"'+$('#password').val()+'"}';

    $.ajax({
            headers: {"Content-Type":"application/json; charset=UTF-8"},
            type: "POST",
            url: url,
            data: jsonData,
            dataType: "json",
            success: succesFunction,
            error: errorFunction
    });
} 
```

但是，这行不通。当我使用 Firebug 查看服务器响应时，什么也没有。使用 TcpTrace 我可以看到请求的标头。代替预期的 POST 方法，有一个 OPTIONS 方法，添加了一些奇怪的标题。

```
OPTIONS /remote/server/rest/call HTTP/1.1
Host: localhost:8081
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:11.0) Gecko/20100101 Firefox/11.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: nl,en-us;q=0.7,en;q=0.3
Accept-Encoding: gzip, deflate
Connection: keep-alive
Origin: null
Access-Control-Request-Method: POST
Access-Control-Request-Headers: content-type
Pragma: no-cache
Cache-Control: no-cache 
```

我知道这与做跨域请求有关，但我不知道如何解决这个问题。我尝试了一些方法来修复它，但没有结果：

*   使用“jsonp”代替“json”
*   尝试使用[跨域资源共享 (CORS)](http://www.html5rocks.com/en/tutorials/cors/)

该问题也与同源策略有关，但这不适用于PhoneGap 用于加载本地html 文件的file:// 协议。

在我的 AndroidManifest.xml 文件中，选项

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

已设置。

我正在尝试修复此问题 2 天，但直到现在还没有结果。这甚至可能吗？你有什么建议可以让我继续前进吗？

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T15:49:47.740

您需要将您的外部域列入白名单。只需在 xcode 中转到您的 phonegap / cordova plist 文件并添加一个新条目，它的值为 * 并且您可以访问那里的任何网站。

也知道这不会在浏览器中工作。浏览器有跨域问题，而不是 phonegap 或移动设备。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-17T10:41:30.757

我自己解决了这个问题。问题出在 url 中，我必须在其中添加域。我变了

`var url = "http://remote/server/rest/call";`

到

`var url = "http://remote.mydomain.com/server/rest/call";`

它有效！

我认为第一个 url 应该可以工作，因为它可以在具有完全相同 url 和设置的 iphone 应用程序上工作。它也与我关闭 Windows 防火墙的双重防火墙（Windows 和 ESET 防火墙）有关。

无论如何，谢谢你的回答！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-20T20:57:15.000

将此添加到 config.xml 救了我

```
<gap:plugin name="com.indigoway.cordova.whitelist.whitelistplugin" version="1.1.1" />
<access origin="*" />
<allow-navigation href="*" />
<allow-intent href="*" /> 
```

我很困惑为什么没有加载任何外部资源，甚至是谷歌地图和我的远程调试工具。这救了我！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T13:11:27.410

尝试设置`dataType:jsonp`和设置`crossDomain:true` 对于跨域 ajax 请求，您可以使用 jsonp。 [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

或者你可以附加回调=？到您的网址。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-03T06:29:26.583

jQuery设置：$.support.cors = true;

# ais - 使用 AIS 对船舶数据进行编码

> ID：10173430
> 
> 赞同：0
> 
> 时间：2012-04-16T11:43:04.707
> 
> 标签：ais

如何使用 AIS（自动信息系统）AIVDM/AIVDO 语句对船舶数据（位置、航向、速度等）进行编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-19T00:47:52.713

您可以在我的仓库中找到用于编码的 php 版本[- phpais](https://github.com/ais-one/phpais)

如果您了解 AIS 字符串的组成方式，则应该很容易理解代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:14:19.657

这是一个非常模糊的问题，取决于您要发送哪个 AIS 消息？（有关不同的味精，请参阅第二个链接。）

正如您可能看到的，这是一项相当复杂的任务，但基本上您必须按照相反的顺序执行[it-digin.com中的操作。](http://www.it-digin.com/blog/?p=20)但是有几种不同的消息类型，您可以在此处阅读有关标准的更多信息[美国海岸警卫队](http://www.navcen.uscg.gov/?pageName=AISMessagesA)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-05T10:00:31.933

你试过 ais2csv 吗？它适用于 NMEA 句子 [https://github.com/dma-ais/AisLib/tree/master/ais-lib-cli/launch4j/ais2csv](https://github.com/dma-ais/AisLib/tree/master/ais-lib-cli/launch4j/ais2csv)

# gcc - cross-gcc 不在路径中搜索目标 as 和 ld？

> ID：10173431
> 
> 赞同：1
> 
> 时间：2012-04-16T11:43:05.643
> 
> 标签：gcc, cross-compiling

我已经成功构建了几个跨 gcc 编译器，它们托管在 OSX Lion 上，并针对 i386-pc-solaris2.10 和 x86_64-linux-gnu。对于那些安装在我的路径中的 $BINUTILSROOT 和 $BINUTILSROOT/bin 下的目标，我有 2.22 binutils。阅读[http://gcc.gnu.org/install/configure.html](http://gcc.gnu.org/install/configure.html)，特别是

> --with-as=pathname 指定编译器应该使用pathname指向的汇编器，而不是通过标准规则找到的那个来寻找汇编器，它们是：
> 
> *   除非使用交叉编译器构建 GCC，否则请检查 libexec/gcc/target/version 目录。libexec 默认为 exec-prefix/libexec；exec-prefix 默认为前缀，默认为 /usr/local，除非被上述 --prefix=pathname 开关覆盖。target 是目标系统三元组，例如 `sparc-sun-solaris2.7'，version 表示 GCC 版本，例如 3.0。
> *   如果目标系统与您构建的目标系统相同，请检查操作系统特定的目录（例如 Sun Solaris 2 上的 /usr/ccs/bin）。
> *   在 PATH 中检查名称以目标系统三元组为前缀的工具。
> *   如果主机和目标系统三元组相同（换句话说，如果主机工具也可用于目标，我们将使用主机工具）。

我以为我的 -gcc （配置了*--with-gnu-as --with-gnu-ld*）会分别拾取 i386-pc-solaris2.10-as 和 x86_64-linux-gnu-as （以及相应的 -ld ) 因为它们位于 PATH 中的 $BINUTILSROOT/bin 中，因此上面列表中的第三个项目符号应该适用。但这似乎不起作用，我已经用 dtrace 确认 -gcc 不会在 PATH 中搜索 -as 和 -ld。我发现唯一可行的解​​决方案是同时完全指定 as 和 ld 添加

> --with-as=$BINUTILSROOT/bin/-as --with-ld=$BINUTILSROOT/bin/-ld

配置 gcc 时。

我是否误解了 gcc 文档，或者这是使交叉编译工作的唯一方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:47:32.243

通常你会在与你的 cross-binutils 相同的目录中安装一个交叉编译器。如果你这样做，它会正常工作。

如果您没有将编译器安装到同一目录中，因为您想“暂存”它以构建包，那么您应该配置`--prefix`最终安装位置（binutils 应该已经存在），然后安装和

```
make DESTDIR=/path/to/staging/dir install 
```

覆盖前缀设置。然后，您可以在使用这些文件之前将它们复制到真正的前缀中（可能是软件包安装的一部分）。

如果您出于其他原因不想安装在同一目录中，那么您必须指定您发现的路径。还有其他方法可以使其工作，但 --with-as 是预期的解决方案。如果您真的不喜欢该解决方案，那么您可以这样做

```
make configure-gcc
ln -s $BINUTILSROOT/bin/as gcc/as
ln -s $BINUTILSROOT/bin/ld gcc/ld 
```

这将使构建工作（IIRC），但最终安装的编译器仍将在标准位置查找。事实上，这是可行的，因为仅在构建期间，gcc 目录*是*标准位置之一。

这一切的原因是它不使用“x86_64-linux-gnu-as”：它实际上使用“prefix/x86_64-linux-gnu/bin/as”，如果不存在，它会在另一个中查找“as”的标准位置，并且通常会找到运行不佳的主机“/usr/bin/as”（并导致非常混乱的错误消息）。

# ms-access - 用于通过 lan 访问数据库的连接字符串中的说明

> ID：10173438
> 
> 赞同：1
> 
> 时间：2012-04-16T11:43:38.053
> 
> 标签：ms-access, c#-4.0

谁能告诉我以下连接字符串中指定的用户 ID 和密码是指用于访问服务器或访问 ms-access 数据库文件的凭据。

```
 Provider=Microsoft.Jet.OLEDB.4.0;Data Source=\\serverName\shareName\folder\myDatabase.mdb;User Id=admin;Password=; 
```

我有一个访问数据库，它存储在需要凭据才能访问它的服务器上，但我的数据库文件没有任何凭据。

我在访问数据库时遇到问题。请帮忙

编辑：感谢您的澄清。

有人可以告诉我通过 C# 编码提供服务器访问凭据的方法吗？我正在使用 OLADB 连接字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:56:54.507

它适用于 MS Access，仅指数据库密码，而不是用户级别的安全性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:59:58.530

省略用户凭据，但请确保您的应用程序有权访问网络位置（应用程序帐户或应用程序用户，取决于使用的安全模型）

# javascript - 在 Jquery UI Datepicker 中突出显示特定日期

> ID：10173440
> 
> 赞同：5
> 
> 时间：2012-04-16T11:43:59.500
> 
> 标签：javascript, jquery, jquery-ui, date, jquery-ui-datepicker

我在这里读过其他类似的问题，但没有一个完全符合我的要求。

我想在两个日期之间的所有日子里添加一个课程。日期将在变量中设置。

有什么想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-16T11:51:22.987

您需要为 datepicker 实现[beforeShowDay 事件](http://api.jqueryui.com/datepicker/#option-beforeShowDay)：

> 该函数将日期作为参数，并且必须返回一个数组，其中 [0] 等于 true/false 指示此日期是否可选，[1] 等于 CSS 类名称或默认表示为 '' , 和 [2] 此日期的可选弹出工具提示。在显示之前，它会在日期选择器中的每一天被调用。

因此，您需要执行以下操作：

```
$("#datepicker").datepicker({
    beforeShowDay: function(d) {
        var a = new Date(2012, 3, 10); // April 10, 2012
        var b = new Date(2012, 3, 20); // April 20, 2012
        return [true, a <= d && d <= b ? "my-class" : ""];
    }
}); 
```

演示：

```
$(function() {
  $("#datepicker").datepicker({
    beforeShowDay: function(d) {
      // a and b are set to today ± 5 days for demonstration
      var a = new Date();
      var b = new Date();
      a.setDate(a.getDate() - 5);
      b.setDate(b.getDate() + 5);
      return [true, a <= d && d <= b ? "my-class" : ""];
    }
  });
});
```

```
@import url("https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/blitzer/jquery-ui.min.css");

.my-class a {
  background: #FC0 !important;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>

<input id="datepicker">
```

[另一个演示在这里](http://salman-w.blogspot.com/2013/01/jquery-ui-datepicker-examples.html#example-4)

# ios - 使用模态视图控制器修改 UINavigationController 堆栈

> ID：10173442
> 
> 赞同：4
> 
> 时间：2012-04-16T11:44:08.453
> 
> 标签：ios, uinavigationcontroller, modalviewcontroller, presentmodalviewcontroller

我有以下环境：

*   根视图控制器是 UINavigationController
*   许多自定义 UIViewController 可能会被推送到导航堆栈上
*   每个自定义控制器可能会或可能不会呈现模态视图控制器
*   我需要能够以编程方式管理导航堆栈（例如 - 从导航堆栈中删除除根控制器之外的所有控制器，以响应某些外部事件，如推送通知传递）

`[navigationController setViewControllers:newControllers animated:animated];`如果堆栈中的任何旧控制器都提供了模态视图控制器，那么幼稚的实现显然会失败：

1.  此模态控制器保持可见
2.  如果委托模式用于父<->模态控制器通信（父是呈现的模态视图控制器的委托），模态视图控制器中的任何操作都会导致崩溃，因为委托已经释放

所以一般的问题是模态控制器生命周期没有绑定到父控制器。我的问题是：

1.  是否有管理这种层次结构和安全导航堆栈更改的标准方法？
2.  如果不是，那么最好的自定义实现是什么？我看到了两种通用方法 - 一种是在更改导航堆栈的代码中显式关闭/取消链接所有模态控制器，另一种是向父视图控制器添加逻辑以直接管理模态控制器生命周期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:52:03.867

没有标准方法，因为[HIG](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/)不鼓励这种行为。即使在推送通知的情况下，您也不应该修改现有堆栈，除非通过推送、弹出和弹出到根目录。但是，您要问的是完全可能的。

您有多种选择，但最好的可能是通知。在您的应用程序委托中使用`NSNotificationCenter`以让任何感兴趣的视图控制器知道您*即将*弹出到您的根视图控制器。在您的每个模态视图控制器中，注册此通知名称并在收到通知时关闭您自己。关闭模式后，您可以使用`popToRootViewController`并避免修改堆栈的混乱。

看看 TweetBot，看看他们如何处理推送通知。我相信他们做得很好，他们只是提出了一个新的模态视图控制器。您可以做到这一点（嵌套模式演示），因此请四处试验，看看您可以做什么而不影响用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:53:06.440

检查此方法： http: [//developer.apple.com/library/ios/documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/occ/instm/UINavigationController/popToRootViewControllerAnimated](http://developer.apple.com/library/ios/documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/occ/instm/UINavigationController/popToRootViewControllerAnimated)：

此外，模态控制器是模态的有一个很好的理由 - 将用户的注意力吸引到一项任务或工作单元或您的应用程序所做的任何事情上。所以，如果你想以编程方式隐藏它并返回导航堆栈中的其他控制器，很明显你需要首先处理模态控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:18:20.487

调用 [self dismissModalViewControllerAnimated:YES]; 来自视图控制器的 -(void)viewDidUnload 方法。

# java - 如何编写 JNI dll 桥接器

> ID：10173448
> 
> 赞同：0
> 
> 时间：2012-04-16T11:44:47.487
> 
> 标签：java, dll, java-native-interface, jna

我有一个 dll 驱动程序可以在我的 Java 应用程序中使用。我读到我需要为 JNI 创建一个 dll 桥接器。首先，我想知道是否存在一些实用程序来自动创建这座桥。

我有DLL的源代码，我也知道如何创建我的桥头文件（javah），但我不明白如何放入桥实现，因为我只需要调用驱动程序方法......你能帮忙吗我？

例如，这是我的驱动程序的标题：

```
BOOL CALLINGCONV IsInitialized();
int  CALLINGCONV Initialize(int Slot);
int  CALLINGCONV Finalize();
int  CALLINGCONV FinalizeML(int nSlot); 
```

我还阅读了有关 JNA 的信息，它似乎更容易，但可能不是很快，是真的吗？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:19:52.180

我可以向您推荐 2 个不同的库，它们可以更轻松地使用 JNI

*   [痛饮](http://www.swig.org/tutorial.html)
*   [杰斯](http://code.google.com/p/jace/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:27:34.097

[JavaCPP](http://code.google.com/p/javacpp/)与 JNA 一样简单，但与原始 JNI 一样快。例如，假设头文件和库文件分别命名为“Driver.h”和“Driver.lib”，这个 Java 类可以让 Java 中的这四个函数高效访问：

```
import com.googlecode.javacpp.*;
import com.googlecode.javacpp.annotation.*;

@Platform(include="Driver.h",link="Driver")
public class Driver {
    static { Loader.load(); }
    public static native @Cast("BOOL") boolean IsInitialized();
    public static native int Initialize(int Slot);
    public static native int Finalize();
    public static native int FinalizeML(int nSlot);
} 
```

# sharepoint - Azure WCF 服务 + Sharepoint 2010 沙盒可视 Web 部件 = 错误

> ID：10173449
> 
> 赞同：0
> 
> 时间：2012-04-16T11:44:52.337
> 
> 标签：sharepoint

我在从沙盒 Visual Web Part Sharepoint 2010 调用 Azure WCF 服务时遇到问题。所有本地计算机都安装了 Windows 7 64 Ultimate - Sharepoint Foundation 2010 以使用 Azure SDK 开发 Web 部件和 Visual Studio 2010。在本地 Azure 模拟器中启动的 Web 服务，本地计算机中的 Web 部件。当我使用标准主“添加服务引用”到 Web 部件时，生成 app.config，然后抛出错误：

```
 ServiceReference1.Service1Client serv = new ServiceReference1.Service1Client();
 Label1.Text = serv.GetData(9); 
```

*在 ServiceModel 客户端配置部分中找不到引用合同“ServiceReference1.IService1”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素。*

当我以编程方式创建连接时 -

```
 EndpointAddress adr = new EndpointAddress(new Uri("http://127.0.0.1:81/Service1.svc"));
 BasicHttpBinding basic = new BasicHttpBinding();
 ChannelFactory<ServiceReference1.IService1Channel> fact = new ChannelFactory<ServiceReference1.IService1Channel>(basic, adr);
 Label1.Text = fact.CreateChannel().GetData(8); 
```

抛出错误：

*请求“System.Net.WebPermission, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”类型的权限。*

app.config 网页部分：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IService1" />
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://127.0.0.1:81/Service1.svc" binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_IService1" contract="ServiceReference1.IService1"
                name="BasicHttpBinding_IService1" />
        </client>
    </system.serviceModel>
</configuration> 
```

web.config Azure WCF 服务：

```
<?xml version="1.0"?>
<configuration>
  <configSections>
  </configSections>
  <!--  To collect diagnostic traces, uncomment the section below or merge with existing system.diagnostics section.
        To persist the traces to storage, update the DiagnosticsConnectionString setting with your storage credentials.
        To avoid performance degradation, remember to disable tracing on production deployments.
  <system.diagnostics>     
    <sharedListeners>
      <add name="AzureLocalStorage" type="WCFServiceWebRole1.AzureLocalStorageTraceListener, WCFServiceWebRole1"/>
    </sharedListeners>
    <sources>
      <source name="System.ServiceModel" switchValue="Verbose, ActivityTracing">
        <listeners>
          <add name="AzureLocalStorage"/>
        </listeners>
      </source>
      <source name="System.ServiceModel.MessageLogging" switchValue="Verbose">
        <listeners>
          <add name="AzureLocalStorage"/>
        </listeners>
      </source>
    </sources> 
   </system.diagnostics> -->
  <system.diagnostics>
    <trace>
      <listeners>
        <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
          name="AzureDiagnostics">
          <filter type="" />
        </add>
      </listeners>
    </trace>
  </system.diagnostics>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

PS 当所有移动到工作部署 - Azure и Sharepoint Online - 再次出错。我以编程方式创建连接，因为读取，在沙盒解决方案 app.config 中未使用 Web 部件部署，我们必须在 web.config Sharepoint 2010 中复制他的代码 - 但在 Sharepoint Online 中，此文件已向开发人员关闭！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:20:10.827

您从 SharePoint *请求中收到“System.Net.WebPermission, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”类型权限的正确错误。* 这是因为沙盒限制。[您可以从这篇](http://msdn.microsoft.com/en-us/library/gg615454%28v=office.14%29.aspx)MSDN 文章中查看沙盒代码被拒绝的所有权限。和 WebPermission 以及 SocketPermission 一起用于沙盒解决方案中的代码。

如果你想访问外部服务，不管是使用 TCP 还是 HTTP 协议，你都应该转向完全信任的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:39:38.837

我首先验证了您确实可以使用 SharePoint Designer 2010 创建一个外部内容类型，该内容类型使用 SQL Server 并将数据写入 SQL Server、Windows Communication Foundation (WCF) 服务或 .NET 类型。

Next SharePoint BCS 支持 SOAP 和 OData，但 WCF 数据服务支持 OData 服务，因此要使用 WCF 数据服务，您需要 OData 基础连接。数据视图 Web 部件可以发出适用于 OData 源的 GET 请求。

SharePoint Online Office 365 支持沙盒解决方案，这意味着可以使用 .Net/C# 代码和解决方案部署 Web 部件，但是我不确定是否可以按照您描述的方式连接 SP Web 部件，因为沙盒解决方案不支持进行出站 Web 调用.

你验证了最后一部分吗？

# jquery - 只显示 div 的一部分

> ID：10173453
> 
> 赞同：8
> 
> 时间：2012-04-16T11:45:32.590
> 
> 标签：jquery, css

我想要一个 div，它只显示它的顶部（如 50px 哦高度），而 div 的其他（底部如 100px）部分应该由 jquery.show() 或其他东西显示。有谁知道该怎么做？

![这是帮助解释的图像](../Images/375ea2b3ec08ea3701ddf20525715932.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T11:47:37.083

您可以将 div 高度固定为 50 像素，单击时您可以根据 javascript/jQuery 将高度更改为自动，或将其从自动恢复为 50 像素。

CSS：

```
.mydiv{
  height:50px;
  min-height:50px;
  overflow:hidden;
} 
```

jQuery：

```
$("document").ready(function(){
  $(".mydiv").click(function(){
    if($(".mydiv").css("height")!="50px"){
      $(".mydiv").slideDown();
    }
    else{
      $(".mydiv").slideUp();
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:49:24.360

我会将内容嵌入到`<div id="foo" style="height: 50px; overflow:hidden">`. 然后用 JQuery 控制这个元素的高度：

```
$("#foo").css("height", whatever); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T11:51:29.253

HTML：

```
<div id='example'>some content here</div> 
```

CSS：

```
#example {height: 50px; overflow:hidden;} 
```

jQuery：

```
$('#example').click(function(){
    $(this).animate({ height: 500px; }, 250);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T11:48:17.737

您可以将 div 的高度设置为您希望它从开始（50px）到 CSS 的高度。设置`overflow: hidden;`为隐藏其余内容。

之后，您可以执行以下操作来显示整个元素：

```
$("#id-of-element-to-click-to-show-entire-div").click(function(){
   $(this).slideDown("fast");
}); 
```

# google-maps - 奇怪的 Google Maps V2 标记问题

> ID：10173457
> 
> 赞同：0
> 
> 时间：2012-04-16T11:45:50.297
> 
> 标签：google-maps

得到了这个代码，它只在警报（markers.length）时有效；未注释。

当此 javascript 警报未显示时，我没有得到任何标记.. 真的很奇怪！

在我的身体标签中`<body onload="load()" onunload="GUnload()">`

Previoslly 调用 load() 函数和其他函数：

```
 function showAddress(address) {
           if (geocoder) {//+', '+init_street
    geocoder.getLatLng(address,
        function(point) {
                if (!point) {
                  document.getElementById("place").value="not found";
                  //alert(address + " not found");
                } else {
                //  document.getElementById("place").value=point.y.toFixed(4) + "," + point.x.toFixed(4);
                    map.setCenter(point, 16);
                    marker.setPoint(point);
                    //marker.openInfoWindowHtml(address);
                }
            }
    );
}
           }

         //from a point returns and address!
      function showPointAddress(response) {
  if (!response || response.Status.code != 200) {//not found
    //alert("Status Code:" + response.Status.code);
      document.getElementById("place").value="not found";
  } 
  else {//found
        map.setCenter(marker.getPoint(), 16);
        place = response.Placemark[0];
        document.getElementById("place").value=place.address;
        //document.getElementById("place").value=marker.getPoint().toUrlValue();
  }
         }

            // Creates a marker at the given point with the given number icon and text
          function createMarker(p,text) {
var marker = new GMarker(p);
if (text!=""){
    GEvent.addListener(marker, "click", function() {
        marker.openInfoWindowHtml(text);});
      }
return marker;
      }

          ` var geocoder = null;`
          ` var map = null;`

      function load() {//loading the map
  if (GBrowserIsCompatible()) {
        map = new GMap2(document.getElementById("map"));
        map.enableScrollWheelZoom();
        geocoder = new GClientGeocoder();

        if (init_street!=""){
            geocoder.getLatLng(init_street,function(point) {//set center point in map
                if (point){
                    map.setCenter(point, zoom);
                    map.addOverlay(createMarker(point,init_street));
                    map.openInfoWindow(point,init_street);
                }
            });
        }

        map.addControl(new GLargeMapControl());
        map.setMapType(G_NORMAL_MAP);           
  }
}`

function(data, responseCode) {
  if(responseCode == 200) {
        var texts = [];
        var addresses = [];       
        var xml = GXml.parse(data);
        var markers = xml.documentElement.getElementsByTagName("item");
        alert (markers.length);
        for (var i = 0; i < markers.length; i++) {  
            var address=markers[i].getElementsByTagName('address').item(0).childNodes.item(0).nodeValue;
            if (address!=null){
                //alert (address);
                var title=markers[i].getElementsByTagName('title').item(0).childNodes.item(0).nodeValue;
                var link=markers[i].getElementsByTagName('link').item(0).childNodes.item(0).nodeValue;
                var desc=markers[i].getElementsByTagName('description').item(0).childNodes.item(0).nodeValue;
                desc=desc.substr(0,220);//limit
                addresses.push(address);
                texts.push("<div style='width: 200px'><a target='_blank' href='" +link+"'>"+title+"</a><br />"+desc+"</div>");
            }//if
         }//for

        for (var i = 0; i < addresses.length; i++) { 
            geocoder.getLatLng(addresses[i], function (current) { 
                return function(point) { 
                    if (point) map.addOverlay(createMarker(point,texts[current]));    
                } 
            }(i)); 
        }

  }//if }); 
```

我了解需要回调函数来加载标记的问题，但我迷路了..

任何帮助表示赞赏！;)

谢谢先进！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:04:39.313

这通常发生在使用 Ajax 或类似方法获取数据时。基本上，当您获取数据时，您需要使用回调函数来等待数据。如果您不这样做，则没有要执行的数据。但是，如果您使用 alert() 暂停执行，则数据将在后台获取。

将其视为在页面上执行 Javascript 之前等待 DOM 加载。

我无法给您更好的答案，因为您没有包含调用您包含的函数的代码。

# qt - 控制 QTextEdit 中的键盘位置

> ID：10173459
> 
> 赞同：0
> 
> 时间：2012-04-16T11:45:52.933
> 
> 标签：qt

有什么方法可以控制 QTextEdit 中的键盘光标吗？例如，将光标向上移动一排，或向后移动两个位置。我看过 QCursor 类，但这仅适用于鼠标光标吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T11:53:02.347

```
QTextCursor:: **movePosition** ( **MoveOperation**操作, **MoveMode** mode=MoveAnchor, int n=1)
```

此方法允许您以[**多种方式**](http://qt-project.org/doc/qt-5.0/qtgui/qtextcursor.html#MoveOperation-enum)移动光标，例如向右移动一个单词或向上移动一行。

你可以像这样使用它：

```
QTextCursor c = textEdit->textCursor();
c.movePosition(QTextCursor::Up);
textEdit->setTextCursor(c); 
```

如果您需要选择一些文本，而不仅仅是移动光标，请将其指定[**`MoveMode`**](http://qt-project.org/doc/qt-5.0/qtgui/qtextcursor.html#MoveMode-enum)为 KeepAnchor。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:53:17.490

就在这里：

[http://doc.qt.nokia.com/4.7-snapshot/qtextedit.html#moveCursor](http://doc.qt.nokia.com/4.7-snapshot/qtextedit.html#moveCursor)

# java - 正则表达式包含和排除特殊字符

> ID：10173460
> 
> 赞同：23
> 
> 时间：2012-04-16T11:46:02.620
> 
> 标签：java, regex

我正在找到一个符合以下规则的正则表达式。

允许的字符

字母：az / AZ
数字：0-9
特殊字符：~ @ # $ ^ & * ( ) - _ + = [ ] { } | \ , . ? ：（
应该允许空格）

不允许

特殊字符 : < > '" / ; ` %

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-16T11:49:30.890

对于允许的字符，您可以使用

```
^[a-zA-Z0-9~@#$^*()_+=[\]{}|\\,.?: -]*$ 
```

验证应仅包含允许的字符的完整字符串。请注意，`-`它位于末尾（因为否则它将是一个范围）并且一些字符被转义。

对于无效字符，您可以使用

```
[<>'"/;`%] 
```

检查他们。

要将两者组合成一个正则表达式，您可以使用

```
^(?=[a-zA-Z0-9~@#$^*()_+=[\]{}|\\,.?: -]*$)(?!.*[<>'"/;`%]) 
```

但是您需要一个允许前瞻的正则表达式引擎。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-16T11:49:53.777

你实际上没有问过问题，但假设你有一个问题，这可能是你的答案......

假设所有字符，除了“特殊字符”，你可以写

```
String regex = "^[^<>'\"/;`%]*$"; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-16T11:51:06.130

```
[a-zA-Z0-9~@#\^\$&\*\(\)-_\+=\[\]\{\}\|\\,\.\?\s]* 
```

如果您只想允许将其包装在 ^$ 或您认为合适的任何其他分隔符中，这将进行匹配，如果您这样做，则不需要特定的禁止逻辑。

# android - Android KeyedVector.h 文件中的错误

> ID：10173477
> 
> 赞同：0
> 
> 时间：2012-04-16T11:47:18.050
> 
> 标签：android, android-emulator

> **可能重复：**
> [构建android源代码](https://stackoverflow.com/questions/10171897/building-android-source-code)

在 OS X 10.7.3 上构建 Android 源代码时出现以下错误：

> frameworks/base/include/utils/KeyedVector.h:193:17: 错误：使用未声明的标识符 'indexOfKey'
> ssize_t i = indexOfKey(key);

这是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T04:52:33.450

我终于弄清楚了问题所在。

某些成员函数需要范围解析运算符“this->”才能在带有 xcode 4.3.x 的 MAC OS X Lion 上构建 android 源代码，没有范围解析运算符编译器将无法识别该函数的存在

# android - 更改图像按钮上的图像单击android

> ID：10173479
> 
> 赞同：0
> 
> 时间：2012-04-16T11:47:26.937
> 
> 标签：android

我正在显示用于显示页数的页面布局控件的动态图像，现在我将默认焦点放在第一个图像按钮上，现在当我单击下一个图像按钮时，我想用简单的图像按钮替换第一个图像按钮以及带有可聚焦图像按钮的单击按钮，我也使用了 invalidate() 方法，但尚未解决，请帮忙。

```
if(i==0){
    Drawable dr = getResources().getDrawable(R.drawable.bullet_2);
    Bitmap bitmap = ((BitmapDrawable) dr).getBitmap();
    Drawable d = new BitmapDrawable(Bitmap.createScaledBitmap(bitmap, 10, 10, true));
    b1.setImageDrawable(d);
    flag = false;
}
else {
    Drawable dr = getResources().getDrawable(R.drawable.bullet_1);
    Bitmap bitmap = ((BitmapDrawable) dr).getBitmap();
    // Scale it to 50 x 50
    Drawable d = new BitmapDrawable(Bitmap.createScaledBitmap(bitmap, 10, 10, true));
    // Set your new, scaled drawable "d"
    b1.setImageDrawable(d);
}
b1.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        //Object id = b1.getTag();
        Object tag = b1.getTag();
        System.out.println("value of id:::" +tag.toString());
        Global.tagvalue = tag.toString();

        flag = true;

        if(flag == true){
            Drawable dr = getResources().getDrawable(R.drawable.bullet_2);
            Bitmap bitmap = ((BitmapDrawable) dr).getBitmap();
            // Scale it to 50 x 50
            Drawable d = new BitmapDrawable(Bitmap.createScaledBitmap(bitmap, 10, 10, true));
            // Set your new, scaled drawable "d"
            b1.setImageDrawable(d);
            b1.invalidate();
            WindowManager w = getWindowManager(); 
            Display dis = w.getDefaultDisplay(); 
            int width = dis.getWidth(); 
            int height = dis.getHeight(); 
            System.out.println("value of width of screen::" +width);

            horlist.mNextX = width*Integer.parseInt(tag.toString());
        }
        else {
            Drawable dr = getResources().getDrawable(R.drawable.bullet_1);
            Bitmap bitmap = ((BitmapDrawable) dr).getBitmap();
            // Scale it to 50 x 50
            Drawable d = new BitmapDrawable(Bitmap.createScaledBitmap(bitmap, 10, 10, true));
            // Set your new, scaled drawable "d"
            b1.setImageDrawable(d);
            b1.invalidate();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:50:54.220

您可以将图像设置为空

imgBtn.setImageBitmap(null);

b1.setImageDrawable(0);

# php - 请求 stream_tag 表

> ID：10173488
> 
> 赞同：4
> 
> 时间：2012-04-16T11:47:48.503
> 
> 标签：php, facebook, facebook-fql

我正在尝试使用 php api 为应用程序请求 stream_tag facebook 表

```
SELECT post_id,actor_id, target_id
FROM stream_tag 
WHERE target_id= me() 
```

它只给我10个结果。我怎样才能得到真正的**所有**结果？

我得到了所有这些许可：

```
email
user_about_me
user_birthday
user_hometown
user_location
user_status
friends_about_me
friends_status

read_stream
read_insights 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:17:27.753

**FQL 解决方案**

在无法访问实际数据的情况下，我能想到的问题有两个可能的原因：

第一个原因：您需要添加权限。具体来说：

```
friends_photo_video_tags
user_photo_video_tags 
```

您可能还需要对帖子内标记的对象的权限。“读取流”权限授予对墙帖标签的访问权限，但从文档中不清楚它是否授予对帖子作为字段保存的对象的标签的访问权限，例如帖子中照片中的标签。

除了 Post 对象之外，以下对象可以有标签：

签到。所需权限：

```
user_checkins
friends_checkins 
```

照片。所需权限：

```
user_photos
friends_photos 
```

视频。需要权限

```
user_videos
friends_videos 
```

第二个原因：您在 stream_tag 表中遇到错误/不一致。根据开发人员运行的测试，Facebook 开发人员页面中报告的此表存在不一致之处。这些包括：

*   对于来自具有标记用户的同一用户的两次状态更新，stream_tag 表会正确返回一次更新的标记信息，但不返回第二次更新的信息。

*   stream_tag 表不包括来自注释和链接评论的标签。

[这](http://fbdevwiki.com/wiki/FQL%3astream_tag)是关于 stream_tag 表的已报告问题的 FBDevWiki 摘要，位于“Notes/Bugs/Gotchas”标题下。

**图 API 解决方案**

如果添加上述权限对 FQL 查询没有帮助，您可以改为调用 Graph API 'tagged' 连接，如下所示：

```
https://graph.facebook.com/USER_ID/tagged 
```

它为用户返回帖子、照片和视频中的标签。

# c# - TeeChart ScrollPager 工具在 WPF 项目中不起作用

> ID：10173492
> 
> 赞同：1
> 
> 时间：2012-04-16T11:48:06.460
> 
> 标签：c#, .net, charts, teechart

我想在我的 WPF 项目中使用 TeeChart (http://www.teechart.net/) ScrollPager 工具，但它不起作用。（TeeChart.WPF.dll 版本 4.1.2012.2287）

[http://img190.imageshack.us/img190/4900/scrwpf.png](http://img190.imageshack.us/img190/4900/scrwpf.png)

```
namespace TeeChart
{
    using Steema.TeeChart.WPF.Themes;
    using Steema.TeeChart.WPF.Tools;
    using Steema.TeeChart.WPF.Styles;
    using Steema.TeeChart.WPF.Drawing;

    public partial class MainWindow
    {
        private Line _series;
        private ScrollPager _tool;
        BlackIsBackTheme _black; 

        public MainWindow()
        {
            InitializeComponent();

            _series = new Line();
            tChart1.Series.Add(_series);
            tChart1.Chart.Aspect.View3D = false;
            tChart1.Header.Visible = false;
            tChart1.Legend.Visible = false;

            _series.FillSampleValues(500);

            _black = new BlackIsBackTheme(tChart1.Chart);
            _black.Apply();

            _tool = new ScrollPager();
            tChart1.Tools.Add(_tool);

            _tool.Series = _series;
            _black = new BlackIsBackTheme(_tool.SubChartTChart.Chart);
            _black.Apply();

            _tool.SubChartTChart.Panel.Pen.Visible = false;
            _tool.SubChartTChart.Panel.Bevel.Inner = BevelStyles.None;
            _tool.SubChartTChart.Panel.Bevel.Outer = BevelStyles.None;
        }
    }
} 
```

在 WinForms 项目中它工作正常。
[http://img692.imageshack.us/img692/4527/scrwinforms.png](http://img692.imageshack.us/img692/4527/scrwinforms.png)

```
namespace TeeChartWinForms
{
    using System.Windows.Forms;
    using Steema.TeeChart.Drawing;
    using Steema.TeeChart.Styles;
    using Steema.TeeChart.Themes;
    using Steema.TeeChart.Tools;

    public partial class Form1 : Form
    {
        private Line _series;
        private ScrollPager _tool;
        BlackIsBackTheme _black; 

        public Form1()
        {
            InitializeComponent();

            _series = new Line();
            tChart1.Series.Add(_series);
            tChart1.Chart.Aspect.View3D = false;
            tChart1.Header.Visible = false;
            tChart1.Legend.Visible = false;

            _series.FillSampleValues(500);

            _black = new BlackIsBackTheme(tChart1.Chart);
            _black.Apply();

            _tool = new ScrollPager();
            tChart1.Tools.Add(_tool);

            _tool.Series = _series;
            _black = new BlackIsBackTheme(_tool.SubChartTChart.Chart);
            _black.Apply();

            _tool.SubChartTChart.Panel.Pen.Visible = false;
            _tool.SubChartTChart.Panel.Bevel.Inner = BevelStyles.None;
            _tool.SubChartTChart.Panel.Bevel.Outer = BevelStyles.None;
        }
    }
} 
```

谢谢，
亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:23:18.817

使用下一个代码似乎没有出现您的问题：

**代码c#：**

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Windows;
    using System.Windows.Controls;
    using System.Windows.Data;
    using System.Windows.Documents;
    using System.Windows.Input;
    using System.Windows.Media;
    using System.Windows.Media.Imaging;
    using System.Windows.Navigation;
    using System.Windows.Shapes;
    using Steema.TeeChart.WPF;
    using Steema.TeeChart.WPF.Styles;
    using System.IO;
    using System.Windows.Markup;
    using Steema.TeeChart.WPF.Tools;
    using Steema.TeeChart.WPF.Drawing;
    using Steema.TeeChart.WPF.Themes;
    namespace WpfApplication1
    {
        public partial class MainWindow : Window
        {
            private Steema.TeeChart.WPF.Styles.Line series;
            private ScrollPager tool;
            BlackIsBackTheme black; 

            public MainWindow()
            {
                InitializeComponent();

                series = new Steema.TeeChart.WPF.Styles.Line();
                tChart1.Series.Add(series);
                tChart1.Chart.Aspect.View3D = false;
                tChart1.Header.Visible = false;
                tChart1.Legend.Visible = false;

                series.FillSampleValues(500);

                black = new BlackIsBackTheme(tChart1.Chart);
                black.Apply();

                tool = new ScrollPager(tChart1.Chart);

                tool.Series = series;
                black = new BlackIsBackTheme(tool.SubChartTChart.Chart);
                black.Apply();

                tool.SubChartTChart.Panel.Pen.Visible = false;
                tool.SubChartTChart.Panel.Bevel.Inner = BevelStyles.None;
                tool.SubChartTChart.Panel.Bevel.Outer = BevelStyles.None;
            }
}
} 
```

**代码 xml:**

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:tc="clr-namespace:Steema.TeeChart.WPF;assembly=TeeChart.WPF"
        Title="MainWindow" SizeToContent="WidthAndHeight" mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" d:DesignHeight="516" d:DesignWidth="492">
    <Grid >
        <AdornerDecorator Margin="25,12,27,65">
            <tc:TChart Name="tChart1" Height="226" Width="412" />
        </AdornerDecorator>

    </Grid>

</Window> 
```

我得到与winforms相同的结果。如果使用我的代码解决了您的问题或仍然出现，请重试。如果您的问题没有解决，您能否发送一个简单的示例项目，我们可以在[steema.net/upload](http://www.steema.net/upload/)上“按原样”运行以重现问题？

谢谢，

此致

桑德拉

# linux - 如何告诉 Qt Network 更改传出网络接口？

> ID：10173493
> 
> 赞同：0
> 
> 时间：2012-04-16T11:48:08.167
> 
> 标签：linux, qt, routing, qtnetwork

> **可能重复：**
> [如何选择使用哪个网络接口？](https://stackoverflow.com/questions/2725352/how-to-choose-which-network-interface-to-use)

我的机器连接到以太网和无线局域网。

有没有办法告诉 Qt 使用指定的网络作为传出接口？

linux中是否有任何c库函数可以做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:01:08.590

使用 QNetworkAccessManager::setConfiguration 作为 QNetworkAccessManager 的实例。

文档：[QNetworkAccessManager](http://doc.qt.nokia.com/4.7-snapshot/qnetworkaccessmanager.html#setConfiguration)

# ruby-on-rails - 限制 will_paginate 中的页数

> ID：10173495
> 
> 赞同：6
> 
> 时间：2012-04-16T11:48:12.537
> 
> 标签：ruby-on-rails, ruby, pagination, will-paginate

因此，在使用 Sphinx 时，搜索限制为 1000 个结果。但是，如果生成的结果分页链接超过 1000 个，`will_paginate`请不要考虑这一点，并提供指向`1000/per_page`. *设置最大页面*或类似内容的明显方法是什么？

干杯。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-30T14:48:19.850

我认为最好将参数提交`:total_entries`给方法`paginate`：

```
@posts = Post.paginate(:page => params[:page], :per_page => 30, 
                       :total_entries => 1000) 
```

will_paginate 将仅为显示 1000 个结果所需的页面数生成链接。

您还可以验证请求的页面是否属于该区间：

```
if params[:page].to_i * 30 <= 1000
  @posts = Post.paginate(:page => params[:page], :per_page => 30, 
                         :total_entries => 1000)
end 
```

此外，通过提交参数`:total_entries`，您可以避免 will_paginate 通常运行以检索条目总数的 sql COUNT 查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T12:08:27.003

```
if params[:page].to_i * 30 <= 1000
  @posts = Post.paginate(:page => params[:page], :per_page => 30)
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T08:54:32.457

我发现最好的解决方案是这样做：

```
@results = Model.search(...)
if @results.total_pages >= (1000/Model.per_page)
  class << @results; def total_pages; 1000/Model.per_page; end end
end 
```

其中 1000 最好不要硬编码:)。这可以让您免费获得 will_paginate 视图助手的正确行为，

# jquery - jquery点击功能和“新页面”

> ID：10173496
> 
> 赞同：0
> 
> 时间：2012-04-16T11:48:13.917
> 
> 标签：jquery

我使用jQuery“点击”功能。如果使用简单的点击 img 就可以了，但是当这张图片上带有标签 'target="_blank"' 的链接或用户点击右键，然后'在新窗口中打开'，这个功能不起作用。

当用户在新窗口中打开链接时，该点击功能如何发挥作用？

我的代码：

```
$('.button_img').live('click', function(){
    alert('new');
    //do something
});

<a href="http://www.google.com" target="_blank">
<img class="button_img" src="img.png" />
</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:09:29.880

你不能阻止用户打开一个新标签，我唯一能想到的就是不使用`<a></a>`标签，所以他们甚至不会得到这个选项，但它仍然看起来像这样的可点击元素：

JS

```
$('.button_img').live('click', function(){
    alert('new');
    //do something

    //If you want to redirect to, for example, google in some case you do:
    //window.location = "http://www.google.com";
}); 
```

HTML

```
<div class="fakeLink">
     <img class="button_img" src="img.png" />
</div> 
```

CSS

```
 .fakeLink {
        cursor:pointer;
        /*     styles     */
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:10:32.870

只需添加“return false;” 在您的点击功能结束时：

```
$('.button_img').live('click', function(){
    alert('new');
    //do something
   return false;
}); 
```

这将防止单击鼠标左键后打开新窗口。并且请不要使用鼠标右键单击来做任何事情——这是用户的业务，做或不做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:58:13.877

我认为这应该可行

```
$('.button_img').live('click', function(){
   $(this).attr('target','_blank');
    //do something
}); 
```

或者你可以试试这个

```
$('.button_img').live('click', function(){
   window.open(this.href);
   e.preventDefault(); //or return false;
}); 
```

请参阅[此](https://stackoverflow.com/questions/2606282/open-link-in-new-window-with-jquery)以获取更多信息

# c# - 使用 HtmlAgilityPack 获取元素

> ID：10173501
> 
> 赞同：0
> 
> 时间：2012-04-16T11:48:27.903
> 
> 标签：c#, winforms, html-agility-pack

我想从我的 html 文档中获取一个没有 id 或名称但具有唯一样式标签的 div。

这是我尝试过的：

```
 foreach (HtmlNode node in myDocument.DocumentNode.DescendantNodes())
        {
            if (node.OuterHtml.Contains("div"))
            {
                HtmlAttribute att = node.Attributes["style"];

                if (att != null)
                {

                    if (att.ToString() == "font-size:16px;padding:4px 8px 0")
                    {
                        targetDiv = node;
                    }
                }
            }
           } 
```

首先，我得到了文档中的所有节点，然后我尝试使用以下方法仅过滤掉 div：

```
if (node.OuterHtml.Contains("div")) 
```

但是，这实际上并没有过滤掉 div，而是选择其中包含`div`的任何标签。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:03:09.877

试试 XPath：

```
var nodes = myDocument.DocumentNode.SelectNodes("//div[@style='font-size:16px;padding:4px 8px 0']") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:06:20.847

而不是

```
if (node.OuterHtml.Contains("div")) 
```

尝试使用 teh`Name`属性：

```
if (node.Name == "div") 
```

我对 HtmlAgilityPack 不熟悉，但是经过一些阅读之后，您可能会发现[这个站点](http://www.4guysfromrolla.com/articles/011211-1.aspx)很有帮助。

# sql - SQL 查询需要出现空值

> ID：10173502
> 
> 赞同：3
> 
> 时间：2012-04-16T11:48:31.327
> 
> 标签：sql, tsql, null

我正在使用 SQL Server 管理器 2008。

我有一个查询如下：

```
SELECT dbo.iLines.Part,
   dbo.iLines.Pg,
   SUM(dbo.iLines.Qty) as sales6months,
   dbo.iLines.Prefix       
FROM 
   Autopart.dbo.iLines
RIGHT JOIN
   dbo.product  
ON
   dbo.product.keycode = dbo.ilines.part                 

where  prefix = 'i'
   and ([datetime] > dateadd(month, -6, getdate()))
   and dbo.ilines.part = 'BK939'

group by 
   dbo.ilines.pg,
   dbo.ilines.part,
   dbo.ilines.prefix

order by sales6months desc 
```

所以解释一下，我想获得产品表中所有产品的最近 6 个月的销售额。

问题是某些产品不会有任何销售。我仍然需要他们展示。所以我要求的是显示所有产品最近 6 个月的销售额，包括 0 销售额。

“iLines”是导致问题的表，因为零件号仅在有销售时才存在。

我知道可能有一种方法可以进行多个查询等。但我只需要在 1 个查询中完成所有操作。

我尝试让 null 通过，但什么也没做，而且使用 null 真的很可怕，呵呵。

添加到此查询的任何代码片段都会非常棒！

非常感谢！

另外，如果您需要更多信息，请询问！

更新！是的，抱歉 Datetime 仅存在于 Ilines 中。

Ilines = 销售表 Product = 只是我们所有产品的表格

这是主要查询，它的意思是拉出过去 6 个月内销量最高的“n”个零件。除了我说它不显示未售出的零件外，它可以正常工作。

```
ALTER PROCEDURE [dbo].[MyPareto]
@pgParam varchar(255)
AS
SELECT
   i.pg,
   dbo.OldParetoAnalysis.Pareto,
   i.part,
   i.sales6months,
   a.LostSales6Months,
   dbo.NewParetoAnalysis.Pareto

FROM
OPENQUERY(SACBAUTO, 'SELECT dbo.iLines.Part,
                            dbo.iLines.Pg,
                            SUM(dbo.iLines.Qty) as   sales6months,
                            dbo.iLines.Prefix 
                     FROM Autopart.dbo.iLines 
                     where prefix = ''i''
                     and [datetime] > dateadd(month, -6,    getdate())
                     group by 
                     dbo.ilines.pg,
                     dbo.ilines.part,
                     dbo.ilines.prefix
                     order by sales6months desc') i
RIGHT JOIN
dbo.OldParetoAnalysis
on
i.part collate SQL_Latin1_General_CP1_CI_AS = dbo.OldParetoAnalysis.Part
INNER JOIN
dbo.NewParetoAnalysis
ON
dbo.OldParetoAnalysis.Part collate SQL_Latin1_General_CP1_CI_AS =     dbo.NewParetoAnalysis.Part
LEFT JOIN
OPENQUERY(SACBAUTO, 'SELECT dbo.aLines.Part,
                            dbo.aLines.Pg,
                            SUM(dbo.aLines.Qty) as LostSales6Months,
                            dbo.aLines.Prefix 
                     FROM Autopart.dbo.aLines 
                     where prefix = ''d''
                     and [datetime] > dateadd(month, -6, getdate())
                     group by 
                     dbo.alines.pg,
                     dbo.alines.part,
                     dbo.alines.prefix
                     order by LostSales6Months desc') a
ON
dbo.NewParetoAnalysis.Part collate SQL_Latin1_General_CP1_CI_AS = a.part
WHERE
    i.pg = @pgParam
GROUP BY
   i.pg,
   dbo.OldParetoAnalysis.Pareto,
   i.part,
   i.sales6months,
   a.LostSales6Months,
   dbo.NewParetoAnalysis.Pareto
ORDER BY
dbo.OldParetoAnalysis.Pareto asc 
```

将帕累托视为最佳部分的联盟。希望这会有所帮助，我尽量避免添加它，因为它可能会让一些人不发表评论。

好的新更新，这个开放查询有效！！！

```
SELECT                      
                        dbo.product.Keycode,
                        dbo.iLines.Pg,
                        SUM(COALESCE(dbo.iLines.Qty, 0)) as sales6months,
                        dbo.iLines.Prefix 
                     FROM 
                        Autopart.dbo.product
                     LEFT OUTER JOIN
                        Autopart.dbo.ilines
                     ON
                        dbo.product.keycode = dbo.ilines.part
                        AND ([datetime] > dateadd(month, -6, getdate()) OR [datetime] is null )
                     WHERE
                        (dbo.iLines.Prefix = 'i' OR dbo.iLines.Prefix is null)
                        AND dbo.product.keycode = 'BK939'
                     group by 
                        dbo.ilines.pg,
                        dbo.product.keycode,
                        dbo.ilines.prefix
                     order by sales6months desc# 
```

但是当我加入我的帕累托表时，如下所示：

```
SELECT
   i.pg,
   dbo.OldParetoAnalysis.Pareto,
   i.keycode,
   i.sales6months

FROM
OPENQUERY(SACBAUTO, 'SELECT                     
                        dbo.product.Keycode,
                        dbo.iLines.Pg,
                        SUM(COALESCE(dbo.iLines.Qty, 0)) as sales6months,
                        dbo.iLines.Prefix 
                     FROM 
                        Autopart.dbo.product
                     LEFT OUTER JOIN
                        Autopart.dbo.ilines
                     ON
                        dbo.product.keycode = dbo.ilines.part
                        AND ([datetime] > dateadd(month, -6, getdate()) OR [datetime] is null )/* must be this*/
                     WHERE
                        (dbo.iLines.Prefix = ''i'' OR dbo.iLines.Prefix is null)
                     group by 
                        dbo.ilines.pg,
                        dbo.product.keycode,
                        dbo.ilines.prefix
                     order by sales6months desc') i
LEFT JOIN
dbo.OldParetoAnalysis
on
i.keycode collate SQL_Latin1_General_CP1_CI_AS = dbo.OldParetoAnalysis.Part
WHERE i.pg = '40' AND i.keycode = 'BK939' 
```

结果返回相同，所以这意味着问题是当我去加入时，但旧的帕累托确实包含零件号，我也尝试过更改加入....我希望这缩小了对问题的搜索范围我希望有人知道为什么会这样！

最终更新！哇，这很长，但最后我发现了问题，我不得不使用产品表 PG 字段重新检查！！！！！！因为它不会为空！！这是代码！

```
ALTER PROCEDURE [dbo].[MyPareto32TEST]
@pgParam varchar(255)

AS
SELECT
   i.pg,
   dbo.OldParetoAnalysis.Pareto,
   i.keycode,
   i.sales6months,
   a.LostSales6Months,
   dbo.NewParetoAnalysis.Pareto

FROM
OPENQUERY(SACBAUTO, 'SELECT                      
                    dbo.product.Keycode,
                    dbo.iLines.Pg,
                    dbo.product.pg as ppg,
                    SUM(COALESCE(dbo.iLines.Qty, 0)) as sales6months,
                    dbo.iLines.Prefix 
                 FROM 
                    Autopart.dbo.product
                 LEFT OUTER JOIN
                    Autopart.dbo.ilines
                 ON
                    dbo.product.keycode = dbo.ilines.part
                    AND ([datetime] > dateadd(month, -6, getdate()) OR [datetime] is null )
                 WHERE
                    (dbo.iLines.Prefix = ''i'' OR dbo.iLines.Prefix is null)
                 group by 
                    dbo.ilines.pg,
                    dbo.product.keycode,
                    dbo.ilines.prefix,
                    dbo.product.pg
                 order by sales6months desc') i
RIGHT JOIN
dbo.OldParetoAnalysis
on
i.keycode collate SQL_Latin1_General_CP1_CI_AS = dbo.OldParetoAnalysis.Part
AND (i.pg = @pgParam or (i.pg is null AND i.ppg  = @pgParam))
INNER JOIN
dbo.NewParetoAnalysis
ON
dbo.OldParetoAnalysis.Part collate SQL_Latin1_General_CP1_CI_AS =   dbo.NewParetoAnalysis.Part

LEFT JOIN
OPENQUERY(SACBAUTO, 'SELECT                      
                    dbo.product.Keycode,
                    dbo.aLines.Pg,
                    SUM(COALESCE(dbo.aLines.Qty, 0)) as lostsales6months,
                    dbo.aLines.Prefix 
                 FROM 
                    Autopart.dbo.product
                 LEFT OUTER JOIN
                    Autopart.dbo.alines
                 ON
                    dbo.product.keycode = dbo.alines.part
                    AND ([datetime] > dateadd(month, -6, getdate()) OR [datetime] is null )
                 WHERE
                    (dbo.aLines.Prefix = ''d'' OR dbo.aLines.Prefix is null)
                 group by 
                    dbo.alines.pg,
                    dbo.product.keycode,
                    dbo.alines.prefix
                 order by lostsales6months desc') a
ON
dbo.NewParetoAnalysis.Part collate SQL_Latin1_General_CP1_CI_AS = a.keycode
WHERE(i.pg = @pgParam or (i.pg is null AND i.ppg  = @pgParam) AND dbo.NewParetoAnalysis.Pareto is not null)
GROUP BY
   i.pg,
   dbo.OldParetoAnalysis.Pareto,
   i.keycode,
   i.sales6months,
   a.LostSales6Months,
   dbo.NewParetoAnalysis.Pareto
ORDER BY
dbo.OldParetoAnalysis.Pareto asc 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T11:56:14.123

以下条件过滤掉任何`right join`失败的行：

```
dbo.ilines.part = 'BK939' 
```

要修复它，请将条件移至联接：

```
RIGHT JOIN
   dbo.product  
ON
   dbo.product.keycode = dbo.ilines.part                 
   and dbo.ilines.prefix = 'i'
   and dbo.ilines.part = 'BK939'
where  
   ([datetime] > dateadd(month, -6, getdate())) 
```

假设`[datetime]`是 的一列`product`，您可以将其留在`where`子句中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T11:58:13.407

我会从你想要的桌子和我自己做的工作开始`joins`。你说你想要`product`。为什么不从那张桌子开始，然后拿一张`LEFT JOIN`去呢`iLines`？

也许是这样的：

```
SELECT 
    dbo.product.keycode AS part,
    dbo.iLines.Pg,
    SUM(dbo.iLines.Qty) as sales6months,
    dbo.iLines.Prefix       
FROM 
   dbo.product 
LEFT JOIN dbo.ilines  
    ON dbo.product.keycode = dbo.ilines.part
    AND dbo.ilines.prefix = 'i'
    and dbo.ilines.part = 'BK939'                 

where
    ([datetime] > dateadd(month, -6, getdate()))

group by 
   dbo.ilines.pg,
   dbo.product.keycode,
   dbo.ilines.prefix

order by sales6months desc 
```

我不知道该`[datetime]`列是来自`product`表还是来自`ilines`表。如果它来自`product`表格，那么上面的可能会适用。如果没有，那么也将其放入`LEFT JOIN`。像这样：

```
LEFT JOIN dbo.ilines  
        ON dbo.product.keycode = dbo.ilines.part
        AND dbo.ilines.prefix = 'i'
        and dbo.ilines.part = 'BK939' 
        AND ([datetime] > dateadd(month, -6, getdate())) 
```

**编辑**

根据您的描述，您想要一个`FULL OUTER JOIN`. 所以这个连接将是：

```
LEFT JOIN
dbo.OldParetoAnalysis
on
i.keycode collate SQL_Latin1_General_CP1_CI_AS = dbo.OldParetoAnalysis.Part 
```

像这样：

```
FULL OUTER JOIN
dbo.OldParetoAnalysis
on
i.keycode collate SQL_Latin1_General_CP1_CI_AS = dbo.OldParetoAnalysis.Part 
```

在 msdn 上它说：

> 要通过在连接结果中包含不匹配行来保留不匹配信息，请使用完全外连接。SQL Server 提供完全外连接运算符FULL OUTER JOIN，它包括两个表中的所有行，而不管另一个表是否具有匹配值。

参考[这里](http://msdn.microsoft.com/en-us/library/ms187518.aspx)

**编辑2**

您是否尝试过对 dbo.OldParetoAnalysis 进行 RIGHT JOIN？像这样：

```
RIGHT JOIN
dbo.OldParetoAnalysis
on
i.keycode collate SQL_Latin1_General_CP1_CI_AS = dbo.OldParetoAnalysis.Part 
```

**编辑3**

您可以尝试的另一件事是创建一个临时表。这不是最整洁的解决方案。但也许是这样的：

```
CREATE TABLE #tmp 
(
    Keycode VARCHAR(100),
    Pg VARCHAR(100),
    sales6months INT,
    Prefix VARCHAR(100)
) 
```

然后从`OPENQUERY`

```
INSERT INTO #tmp(Keycode,Pg,sales6months,Prefix)
SELECT
    i.Keycode,
    i.pg,
    i.sales6months
    i.Prefix,
FROM
    OPENQUERY(SACBAUTO, 'SELECT                     
                        dbo.product.Keycode,
                        dbo.iLines.Pg,
                        SUM(COALESCE(dbo.iLines.Qty, 0)) as sales6months,
                        dbo.iLines.Prefix 
                     FROM 
                        Autopart.dbo.product
                     LEFT OUTER JOIN
                        Autopart.dbo.ilines
                     ON
                        dbo.product.keycode = dbo.ilines.part
                        AND ([datetime] > dateadd(month, -6, getdate()) OR [datetime] is null )/* must be this*/
                     WHERE
                        (dbo.iLines.Prefix = ''i'' OR dbo.iLines.Prefix is null)
                     group by 
                        dbo.ilines.pg,
                        dbo.product.keycode,
                        dbo.ilines.prefix
                     order by sales6months desc') i 
```

然后我们在连接中的临时表。像这样：

```
SELECT
    *
FROM
    #tmp AS i
    LEFT JOIN dbo.OldParetoAnalysis
    on
    i.keycode collate SQL_Latin1_General_CP1_CI_AS = dbo.OldParetoAnalysis.Part
    WHERE i.pg = '40' AND i.keycode = 'BK939' 
```

完成后记得删除临时表。像这样：

```
DROP TABLE #tmp 
```

**编辑4**

如果您有原始存储过程，那么代码应该并且您将使用临时表解决方案，那么这可能会有所帮助：

```
ALTER PROCEDURE [dbo].[MyPareto]
@pgParam varchar(255)
AS

CREATE TABLE #tmp
(
    Keycode VARCHAR(100),--The type I don't know
    Pg VARCHAR(100),--The type I don't know
    sales6months INT,--The type I don't know
    Prefix VARCHAR(100)--The type I don't know
)
INSERT INTO #tmp(Keycode,Pg,sales6months,Prefix)
SELECT
    i.Keycode,
    i.pg,
    i.sales6months,
    i.Prefix
FROM
    OPENQUERY(SACBAUTO, 'SELECT                     
                        dbo.product.Keycode,
                        dbo.iLines.Pg,
                        SUM(COALESCE(dbo.iLines.Qty, 0)) as sales6months,
                        dbo.iLines.Prefix 
                     FROM 
                        Autopart.dbo.product
                     LEFT OUTER JOIN
                        Autopart.dbo.ilines
                     ON
                        dbo.product.keycode = dbo.ilines.part
                        AND ([datetime] > dateadd(month, -6, getdate()) OR [datetime] is null )/* must be this*/
                     WHERE
                        (dbo.iLines.Prefix = ''i'' OR dbo.iLines.Prefix is null)
                     group by 
                        dbo.ilines.pg,
                        dbo.product.keycode,
                        dbo.ilines.prefix
                     order by sales6months desc') i

SELECT
   i.pg,
   dbo.OldParetoAnalysis.Pareto,
   i.part,
   i.sales6months,
   a.LostSales6Months,
   dbo.NewParetoAnalysis.Pareto

FROM
#tmp i
RIGHT JOIN dbo.OldParetoAnalysis 
    on i.part collate SQL_Latin1_General_CP1_CI_AS = dbo.OldParetoAnalysis.Part
INNER JOIN dbo.NewParetoAnalysis 
    ON dbo.OldParetoAnalysis.Part collate SQL_Latin1_General_CP1_CI_AS =     dbo.NewParetoAnalysis.Part
LEFT JOIN #tmp a 
    ON dbo.NewParetoAnalysis.Part collate SQL_Latin1_General_CP1_CI_AS = a.part
WHERE
    i.pg = @pgParam
GROUP BY
   i.pg,
   dbo.OldParetoAnalysis.Pareto,
   i.part,
   i.sales6months,
   a.LostSales6Months,
   dbo.NewParetoAnalysis.Pareto
ORDER BY
    dbo.OldParetoAnalysis.Pareto asc

DROP TABLE #tmp 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T11:59:50.443

问题的根源：怀疑 where 子句标准限制了由于右连接而可能存在的数据。

可能的解决方案

1.  在 where 子句条件上使用 or & Null
2.  将 where 子句移动到另一个示例中已经完成的连接条件）
3.  使用联合

这是在 where 子句上使用 null 。（修订）我们似乎都错过了从 PARTS 中提取的选择需要！不是 ilines。

```
SELECT dbo.product.keycode as PART,
   dbo.iLines.Pg,
   SUM(coalesce(dbo.iLines.Qty,0)) as sales6months,
   dbo.iLines.Prefix       
FROM 
   Autopart.dbo.iLines
RIGHT JOIN
   dbo.product  
ON
   dbo.product.keycode = dbo.ilines.part                 

where  (prefix = 'i' or prefix is null)
   and (([datetime] > dateadd(month, -6, getdate())) OR [datetime] is null)
   and (dbo.ilines.part = 'BK939' or dbo.ilines.part is null)

group by 
   dbo.ilines.pg,
   dbo.product.keycode,
   dbo.ilines.prefix

order by sales6months desc 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T11:56:43.940

你需要一个外部连接——像这样：

```
SELECT dbo.product.keycode, 
  dbo.iLines.Pg, 
  SUM(dbo.iLines.Qty) as sales6months, 
  dbo.iLines.Prefix        
FROM  
  dbo.product
  LEFT OUTER JOIN Autopart.dbo.iLines ON dbo.product.keycode = dbo.ilines.part 
```

在您的查询中，您仅选择带有 的销售`prefix='i'`，这将自动排除没有销售的产品，因此我不确定您要如何处理。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-19T21:26:53.233

您仍在过滤外部连接中可能为 NULL 的内容。在 where 子句中加入 Pareto 表后：

```
WHERE i.pg = '40' 
```

该列的来源（在您的 OPENQUERY 语句中）是 dbo.ILines，它是外部连接到产品的，因此如果产品未出现在 ILines 集中，它将为 NULL。您可能想尝试：

```
WHERE ISNULL(i.pg, '40') = '40' 
```

当然，如果 i.pg 可以为 NULL，即使 dbo.ILines 表中存在记录，那么您可能需要在原始查询中包含 ILines 中的键并执行以下操作：

```
WHERE ( i.pg = '40'
        OR i.<ILinesKeyField> IS NULL
      ) 
```

这确保即使您在 dbo.ILines.Pg 中有一个 NULL 并且 NULL 字段不是由于外部连接，仍然会过滤不需要的行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-16T11:56:19.320

为什么不从产品表中选择所有并在 Autopart.dbo.iLines 上左连接？这将为您提供所有产品，然后在它们匹配和不匹配的位置加入 iLines 表。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-23T11:03:58.107

这是代码，只需要从产品表和 ilines 中检查 PG！

```
ALTER PROCEDURE [dbo].[MyPareto32TEST]
@pgParam varchar(255)

AS
SELECT
   i.pg,
   dbo.OldParetoAnalysis.Pareto,
   i.keycode,
   i.sales6months,
   a.LostSales6Months,
   dbo.NewParetoAnalysis.Pareto

FROM
OPENQUERY(SACBAUTO, 'SELECT                      
                    dbo.product.Keycode,
                    dbo.iLines.Pg,
                    dbo.product.pg as ppg,
                    SUM(COALESCE(dbo.iLines.Qty, 0)) as sales6months,
                    dbo.iLines.Prefix 
                 FROM 
                    Autopart.dbo.product
                 LEFT OUTER JOIN
                    Autopart.dbo.ilines
                 ON
                    dbo.product.keycode = dbo.ilines.part
                    AND ([datetime] > dateadd(month, -6, getdate()) OR [datetime] is null )
                 WHERE
                    (dbo.iLines.Prefix = ''i'' OR dbo.iLines.Prefix is null)
                 group by 
                    dbo.ilines.pg,
                    dbo.product.keycode,
                    dbo.ilines.prefix,
                    dbo.product.pg
                 order by sales6months desc') i
RIGHT JOIN
dbo.OldParetoAnalysis
on
i.keycode collate SQL_Latin1_General_CP1_CI_AS = dbo.OldParetoAnalysis.Part
AND (i.pg = @pgParam or (i.pg is null AND i.ppg  = @pgParam))
INNER JOIN
dbo.NewParetoAnalysis
ON
dbo.OldParetoAnalysis.Part collate SQL_Latin1_General_CP1_CI_AS = dbo.NewParetoAnalysis.Part

LEFT JOIN
OPENQUERY(SACBAUTO, 'SELECT                      
                    dbo.product.Keycode,
                    dbo.aLines.Pg,
                    SUM(COALESCE(dbo.aLines.Qty, 0)) as lostsales6months,
                    dbo.aLines.Prefix 
                 FROM 
                    Autopart.dbo.product
                 LEFT OUTER JOIN
                    Autopart.dbo.alines
                 ON
                    dbo.product.keycode = dbo.alines.part
                    AND ([datetime] > dateadd(month, -6, getdate()) OR [datetime] is null )
                 WHERE
                    (dbo.aLines.Prefix = ''d'' OR dbo.aLines.Prefix is null)
                 group by 
                    dbo.alines.pg,
                    dbo.product.keycode,
                    dbo.alines.prefix
                 order by lostsales6months desc') a
ON
dbo.NewParetoAnalysis.Part collate SQL_Latin1_General_CP1_CI_AS = a.keycode
WHERE(i.pg = @pgParam or (i.pg is null AND i.ppg  = @pgParam) AND dbo.NewParetoAnalysis.Pareto is not null)
GROUP BY
   i.pg,
   dbo.OldParetoAnalysis.Pareto,
   i.keycode,
   i.sales6months,
   a.LostSales6Months,
   dbo.NewParetoAnalysis.Pareto
ORDER BY
dbo.OldParetoAnalysis.Pareto asc 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-04-16T11:56:22.747

```
SELECT
    dbo.iLines.Part,
    dbo.iLines.Pg,
    SUM(dbo.iLines.Qty) as sales6months,
    dbo.iLines.Prefix       
FROM Autopart.dbo.iLines
RIGHT JOIN dbo.product  
ON dbo.product.keycode = dbo.ilines.part
where  prefix = 'i'
and ([datetime] > dateadd(month, -6, getdate()))
and dbo.ilines.part = 'BK939'

group by 
    dbo.ilines.pg,
    dbo.ilines.part,
    dbo.ilines.prefix
union
SELECT
    dbo.iLines.Part,
    dbo.iLines.Pg,
    0 as sales6months,
    dbo.iLines.Prefix       
FROM Autopart.dbo.iLines
RIGHT JOIN dbo.product  
ON dbo.product.keycode = dbo.ilines.part
where  prefix = 'i'
and max([datetime]) < dateadd(month, -6, getdate())
and dbo.ilines.part = 'BK939'

group by 
    dbo.ilines.pg,
    dbo.ilines.part,
    dbo.ilines.prefix    
order by sales6months desc 
```

# unit-testing - 如何在 CakePHP2.0 上测试 Add 函数

> ID：10173506
> 
> 赞同：3
> 
> 时间：2012-04-16T11:48:44.367
> 
> 标签：unit-testing, cakephp, testing, cakephp-2.0, add

有人告诉我，我们还必须测试 Cake 创建的功能，例如添加/删除...

如果我有这样的功能，如果它没有任何返回、重定向甚至视图，我该如何测试它？（我使用ajax来执行它）

```
public function add() {
        if ($this->request->is('post')) {
            $this->Comment->create();
            if ($this->Comment->save($this->request->data)) {
                $this->Session->setFlash(__('The comment has been saved'));
            } else {                
                $this->Session->setFlash(__('The comment could not be saved. Please, try again.'));
            }
        }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:42:47.597

这是一种测试它的通用方法。

```
function testAdd() {
  $Posts = $this->generate('Posts', array(
    'components' => array(
      'Session',
      'RequestHandler' => array(
        'isAjax'
      )
    )
  ));
  // simulate ajax (if you can't mock the magic method, mock `is` instead
  $Posts->RequestHandler
    ->expects($this->any())
    ->method('isAjax')
    ->will($this->returnValue(true));
  // expect that it gets within the `->is('post')` block
  $Posts->Session
    ->expects($this->once())
    ->method('setFlash');

  $this->testAction('/posts/add', array(
    'data' => array(
      'Post' => array('name' => 'New Post')
    )
  ));
  // check for no redirect
  $this->assertFalse(isset($this->headers['Location']));
  // check for the ajax layout (you'll need to change 
  // this to check for something in your ajax layout)
  $this->assertPattern('/<html/', $this->contents);
  // check for empty view (I've never had an empty view but try it out)
  $this->assertEqual('', $this->view);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:49:03.747

```
public function add() {
        $this->autoRender = false;
        if ($this->request->is('post')) {
            $this->Comment->create();
            if ($this->Comment->save($this->request->data)) {
                echo json_encode(array('status' => 'ok'));
            } else {  
                echo json_encode(array('status' => 'fail'));              
            }
        }
    } 
```

# javascript - X 上的 Dojo 对话框关闭事件（右上角）

> ID：10173508
> 
> 赞同：12
> 
> 时间：2012-04-16T11:49:09.080
> 
> 标签：javascript, button, dojo, dialog

我使用 Dojo 创建一个简单的对话框来在系统中创建用户。问题是我收到错误：

```
Tried to register widget with `id==user_submit` but that `id` is already registered 
```

`user_submit`, 是一个 Dojo 按钮，我必须在对话框中完成表单。当我通过单击关闭对话框并提交表单时，再次打开对话框没有问题（在按钮上的单击事件中，我有这行代码：

```
dijit.byId("user_submit").destroy(); 
```

但是如果我通过右上角的 [x]-link / 按钮关闭对话框，我不会破坏该按钮，然后在不重新加载页面的情况下无法再次打开对话框。

如何让 Dojo 销毁按钮或如何重载 [X]-link / 按钮上的点击事件，以便我可以为按钮编写销毁命令？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-04-02T11:54:55.873

`"Developer shouldn't override or connect to this method"`对于“onCancel”，请参阅[文档](https://dojotoolkit.org/api/1.6/dijit/_DialogMixin.html#onCancel)。更好的解决方案是：

```
var myDialog = new Dialog({
   id: "myDialogId1",
   onHide: function() {
      myDialog.destroy()
   }
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-19T13:09:03.857

找到了解决方案。通过使用 dojo.connect()。

```
myDialog.connect(myDialog, "hide", function(e){
    dijit.byId("user_submit").destroy(); 
}); 
```

在我发布问题后不久就会发布这个，但我没有足够的分数，所以这里又是答案，只是有点晚了:-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T20:18:15.517

IIRC，`onClose`当您单击 X 事物时会调用扩展事件，因此您可以尝试将清理代码放在那里。

* * *

你也可以考虑完全回避这个问题。也许您不需要销毁小部件，而是可以重复使用相同的小部件？您还可以在再次创建它之前进行小部件存在测试，如果旧版本仍然存在，则将其销毁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-03T07:34:01.943

您可以覆盖`onCancel()`上述方法，也可以将事件附加到 `dijit.dialog.closeButtonNode`domElement。 `dijit.dialog.closeButtonNode`是`data-dojo-attach-point`关闭按钮的属性名称。

经验：

```
dojo.on(dijit.Dialog.closeButtonNode, "click", function(evt){
      //add your logic here
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-03-11T09:54:45.203

当按下对话框顶部的 X 时，会触发“onCancel”事件。

在那里处理元素。

# c# - BlurEffect 在应用效果之前有很长的延迟

> ID：10173509
> 
> 赞同：2
> 
> 时间：2012-04-16T11:49:09.253
> 
> 标签：c#, .net, wpf, blur

我正在尝试在另一个窗口上使用弹出窗口。使用 showDialog 方法调用弹出窗口，其中弹出窗口本身只是另一个设计为弹出窗口的窗口。

我想让后窗模糊，以便将焦点设置到弹出窗口。我尝试使用：

```
 BlurEffect objBlur = new BlurEffect();
 objBlur.Radius = 30;
 this.Effect = objBlur;
 popup.showDialog();
 this.Effefct = null; 
```

问题是程序有点“卡住”了一段时间，弹出窗口需要很长时间才能看到。

如果没有模糊效果，弹出窗口当然会立即显示。当半径较低时，延迟时间会较短，但如果半径非常低，为 5，则需要太多时间。

问题是什么？我可以解决这个问题吗？如果没有，有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T12:02:32.047

尝试将[BlurEffect.KernelType](http://msdn.microsoft.com/en-us/library/system.windows.media.effects.blureffect.kerneltype.aspx)更改为[Box](http://msdn.microsoft.com/en-us/library/system.windows.media.effects.kerneltype.aspx)值。高斯内核会创建更高质量的模糊，但如果考虑性能，请使用 Box 内核，因为它使用较少的计算。还要确保[RenderingBias](http://msdn.microsoft.com/en-us/library/system.windows.media.effects.blureffect.renderingbias.aspx)是 Performance（默认）。

# python - 如何从 Mac 应用程序向 Django 服务器发送 HTTP 请求？

> ID：10173510
> 
> 赞同：0
> 
> 时间：2012-04-16T11:49:13.210
> 
> 标签：python, django, http

我想发送一个 HTTP 请求，例如：

```
"http://.../mydjangosite?var1=value1&var2=value2&var3=value3" 
```

到我的 Django 服务器，并希望最后一个发送带有布尔值的响应，`"1"`如果`value1,2,3`等于我的数据库中的值，`"0"`如果不是。

这是我第一次使用 Django 开发，所以如果有人给我提示，我将不胜感激。

抱歉英语不好，如果有人不明白我的问题，请随时告诉我。

亲切的问候。

编辑 ：

首先感谢您的快速回答！！

你说得对，我太笼统了，我会更准确地解释。我正在做一个我们有一些mac应用程序的项目。我们希望创建一个“平台”，让这些应用程序的客户能够获得这些鞋楦的最新版本。然后目的是首先创建一个 django 服务器，我们在其中存储有关软件版本的信息..等。然后，当软件的用户执行它时，它会自动向服务器发送一个http请求，以“检查”是否存在新版本。如果是，我们邀请他下载新版本，如果不是，则继续。

从现在开始，我一直在 django 服务器上工作，我从 django 网站上的教程开始。我创建了我的 models.py 示例：

```
class Version(models.Model):
    name = models.CharField(max_length = 200)
    description = models.TextField()
    id_version = models.IntegerField()
    date_version = models.DateTimeField('Version published')
    def was_published_today(self):
            return self.date_version.date() == datetime.date.today()
    def get_number_version(self):
            return "%d" % (self.id_version)
    def save(self):
            top = Version.objects.order_by('-id_version')[0]
            self.id_version = top.id_version + 1
            super(Version, self).save() 
```

我像这样更改了 urls.py ：

```
urlpatterns = patterns('',
# Examples:

# Uncomment the next line to enable the admin:
url(r'^admin/', include(admin.site.urls)),
url(r'^versionsupdate/version/$','versionsupdate.views.version'), 
```

所以，我想要的是从一个mac应用程序，向服务器django发送一个http请求，比如“http://.../versionsupdate/version?version=1...”，然后，在我的服务器中捕获请求，获取“=”之后的值，将其与“id_version”的值进行比较，然后返回一个布尔值，具体取决于它是否相等。

我希望这很清楚，我不确定^^，请告诉我从现在开始我所做的是否好，我是 django/python 的新手，所以我肯定会朝着好的方向发展。

再次感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:57:41.393

第一的。从 Django 端，您需要特定的数据类型响应（render_to_response 标头）。例如，它可以是 json。

第二。从客户端的 python 脚本中，您可以使用 urllib 或 urllib2 获取 url。

```
import urllib
import urllib2

url = 'http://www.acme.com/users/details'
params = urllib.urlencode({
  'firstName': 'John',
  'lastName': 'Doe'
})
response = urllib2.urlopen(url, params).read() 
```

然后只分析响应。

# c++ - 使用 C++ 测量网络上 2 个应用程序之间的数据传输率（带宽），如何获得公正和准确的结果？

> ID：10173517
> 
> 赞同：4
> 
> 时间：2012-04-16T11:49:39.190
> 
> 标签：c++, performance, sockets, network-programming, bandwidth

我正在尝试测量 2 个模拟应用程序（用 C++ 编写）之间的 IO 数据传输率（带宽）。我创建了一个非常简单的 perfclient 和 perfserver 程序，只是为了在实际应用程序中实现这种计算方法之前验证我计算网络带宽的方法是否正确。所以在这种情况下，我需要以编程方式进行（不使用 Iperf）。

我尝试在各种域（本地主机、连接到以太网的计算机和连接到无线连接的计算机）上运行我的 perfclient 和 perfserver 程序。然而，我总是在这些不同的主机上得到相似的带宽，大约 1900 Mbps（使用 1472 字节的数据大小进行测试）。这是一个合理的结果，还是我可以获得更好、更准确的带宽？

我应该使用 1472（这是以太网 MTU，不包括标头）作为每个 send() 和 recv() 的最大数据大小，为什么/为什么不呢？我还尝试使用不同的数据大小，这是我得到的平均带宽（使用以太网连接测试），这对我来说没有意义，因为这个数字超过了 1Gbps 并达到了 28 Gbps。

```
SIZE    BANDWIDTH
1KB     1396 Mbps
2KB     2689 Mbps
4KB     5044 Mbps
8KB     9146 Mbps
16KB    16815 Mbps
32KB    22486 Mbps
64KB    28560 Mbps 
```

**这是我目前的方法：**
我做了一个基本的乒乓时尚循环，客户端不断地向服务器程序发送数据流字节。服务器将读取这些数据，并将数据反射（发送）回客户端程序。然后客户端将读取这些反射数据（2 路传输）。上述操作重复1000次，然后我将时间除以1000得到平均延迟时间。接下来，我将平均延迟时间除以 2，得到 1 路传输时间。带宽可以计算如下：

```
bandwidth = total bytes sent / average 1-way transmission time 
```

我的方法有什么问题吗？如何确保我的结果没有偏见？一旦我做对了，我将需要在我的原始应用程序（而不是这个简单的测试应用程序）中测试这种方法，并且我想把这个性能测试结果放在一篇科学论文中。

**编辑：** ***我已经解决了这个问题。查看我在下面发布的答案。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:55:02.673

除非您需要重新发明轮子，否则[iperf](http://en.wikipedia.org/wiki/Iperf)就是为了解决这个问题。

> Iperf 由 NLNR/DAST 开发，作为测量最大 TCP 和 UDP 带宽性能的现代替代方案。Iperf 允许调整各种参数和 UDP 特性。Iperf 报告带宽、延迟抖动、数据报丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:36:45.480

我终于能够弄清楚并解决这个问题:-)
正如我在问题中提到的，无论我使用什么网络架构（本地主机、1Gbps 以太网卡、无线连接等），我实现的带宽都扩大到了 28Gbps . 我尝试将服务器IP地址绑定到几个不同的IP地址，如下：

```
127.0.0.1  
IP address given by my LAN connection  
IP address given by my wireless connection 
```

所以我认为这应该给我正确的结果，事实上它没有。这主要是因为我在同一台计算机上同时运行客户端和服务器程序（不同的终端窗口，即使客户端和服务器都绑定到不同的 IP 地址）。我的猜测是这是由内部环回引起的。这是结果如此偏颇且不准确的主要原因。

无论如何，所以我尝试在一个工​​作站上运行客户端，在另一个工作站上运行服务器，我使用不同的网络连接测试它们，它按预期工作:-)
在 1Gbps 连接上，我得到大约 9800 Mbps (0.96 Gbps），在 10Gbps 连接上，我得到了大约 10100 Mbps（9.86 Gbps）。所以这项工作完全符合我的预期。所以我的做法是正确的。完美的 ！！

# windows - 如何开始使用 SoftHSM

> ID：10173518
> 
> 赞同：7
> 
> 时间：2012-04-16T11:49:46.070
> 
> 标签：windows, security, softhsm

我目前正在尝试运行 SoftHSM（在 Windows 平台上）。目标是在客户端和 HSM 服务器之间建立通信通道，以便可以在服务器端对某些数据进行加密并发送回调用客户端。

我从这个站点下载了一个：[https ://www.opendnssec.org/download/](https://www.opendnssec.org/download/)

此外，我按照本页所述的文档进行操作：[https](https://wiki.opendnssec.org/display/SoftHSMDOCS/SoftHSM+Documentation+Home) ://wiki.opendnssec.org/display/SoftHSMDOCS/SoftHSM+Documentation+Home - 但除了创建几个插槽之外，我还没有成功.

我运行以下命令来创建插槽：

```
softhsm --init-token --slot 0 --label "My token 1" 
```

我不知道如何从这里开始，我找不到有关该主题的任何有用信息/教程。我想我应该从小处着手，尝试创建一个与 SoftHSM 通信的服务器应用程序……我为所有 n00b 问题道歉！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T19:53:12.893

如果安装成功，`/usr/local/bin/softshm`应该有这个文件`libsofthsm.so`。

该文件包含`crytoki api`- 的实现，您可以像使用它一样使用它`pkcs#11`

# ruby-on-rails - 如何避免在 Windows 中安装 gem？

> ID：10173519
> 
> 赞同：2
> 
> 时间：2012-04-16T11:49:51.857
> 
> 标签：ruby-on-rails, bundler

在我的 Gemfile 中，我有以下行：

```
gem "thin", :group => [:staging, :production] 
```

当我在开发中运行 bundle install 时，它实际上安装了瘦，这在寡妇框中是一个问题，因为瘦依赖于无法编译的 eventmachine。有没有办法避免在 Windows 中一起安装这些 gem？

我们实际上尝试运行运行：

```
bundle install --without staging production 
```

无论如何它都试图安装薄。

解决此问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:52:19.483

我这样做。丑陋但有效

```
if RUBY_PLATFORM != "i386-mingw32" # if Windows
  gem "thin"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:55:51.050

一个黑客会做：

```
gem "thin", :group => [:staging, :production], :platforms => :ruby 
```

[http://gembundler.com/man/gemfile.5.html#PLATFORMS-platforms-](http://gembundler.com/man/gemfile.5.html#PLATFORMS-platforms-)

> 有许多 Gemfile 平台：
> 
> 红宝石
> 
> C Ruby (MRI) 或 Rubinius，但不是 Windows

# liferay-6 - 对默认登陆页面的理解/关注本网站的困惑

> ID：10173523
> 
> 赞同：0
> 
> 时间：2012-04-16T11:50:10.567
> 
> 标签：liferay-6

我在理解/实施此页面时感到困惑。

嗨，我正在尝试关注这个网站，以便在用户登录后显示默认登录页面。

请通过这个来理解这个问题。

[http://liferaydemystified.blogspot.in/2011/04/liferay-default-landing-page.html](http://liferaydemystified.blogspot.in/2011/04/liferay-default-landing-page.html)

我对此有一些疑问。

在 portal-ext.properties 文件中输入这些内容后

```
login.events.post=com.liferay.portal.events.LoginPostAction,
com..defaultlandingpage.CustomLandingPageAction
auth.forward.by.last.path=true
default.landing.page.path= 
```

我想使用与作者在网站中定义的相同的 CustomLandingPageAction 。

LoginMVCPortlet 是我的 java 文件，它将从 UI 接收参数（用户名和密码）。

```
public class MyLoginPortlet extends MVCPortlet {

public void checkLogin(ActionRequest actionRequest,
ActionResponse actionResponse) throws IOException, PortletException {
String name = actionRequest.getParameter("name");
String password = actionRequest.getParameter("password");

// Contact the DB for validation .

} 
```

**我的问题是，这个 CustomLandingPageAction 和我的 LoginMVCPortlet 类实际上是如何相关的。**

这种方法是正确的，还是我遗漏了什么？

这个怎么做？我正在使用 Liferay 6.1 进行开发。

如果您需要任何信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:17:18.540

将重定向放入 portlet processAction 方法：

```
@Override
public void processAction(ActionRequest actionRequest, ActionResponse actionResponse) throws IOException, PortletException {
    //defaultLandingPage = ...
    actionResponse.sendRedirect(defaultLandingPage);
}; 
```

# ssh - (EC2) 通过命令行以编程方式启动 Windows 实例

> ID：10173524
> 
> 赞同：0
> 
> 时间：2012-04-16T11:50:17.433
> 
> 标签：ssh, automation, amazon-ec2, amazon-web-services

我想以编程方式启动 Windows 2008（64 位，基本安装）实例，有点像单击**启动实例**链接并遵循“创建新实例”向导。

我阅读了有关此命令**ec2-run-instances 的**信息，我尝试使用以下语法在 putty 上运行它：

> **/opt/aws/bin/ec2-run-instances** ami_id ami-e5784391 -n 1 --availability-zone eu-west-1a --region eu-west-1 --instance-type m1.small --private-key /full/path/MyPrivateKey.pem --group MyRDP

但它总是抱怨：

```
Required option '-C, --cert CERT' missing (-h for usage) 
```

根据文档，此选项不是必需的！

**有人可以告诉我有什么问题吗？**我只是想以编程方式启动一个全新的 Windows 安装，在云上运行一些测试并在此之后将其关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:56:29.593

错误消息是正确的（只需尝试添加`--cert`；）-您在这里指的是什么文档？

[Microsoft Windows Guide](http://docs.amazonwebservices.com/AWSEC2/latest/WindowsGuide/Welcome.html?r=8691) for [Amazon EC2](http://aws.amazon.com/ec2/)中明确概述了该要求，特别是在[任务 4：设置 EC2_PRIVATE_KEY 和 EC2_CERT 环境变量中](http://docs.amazonwebservices.com/AWSEC2/latest/WindowsGuide/InstallEC2CommandLineTools.html#set-aws-credentials)：

> 命令行工具**需要访问与您的帐户关联的 X.509 证书和相应的私钥**。[...]
> 
> 您可以在每次发出命令时使用 --private-key 和 --cert 参数指定您的凭据，也可以创建指向本地系统上的凭据文件的环境变量。**如果环境变量配置正确，您可以在发出命令时省略参数**。
> 
> *[强调我的]*

也许使用环境变量的选项在某些地方会产生误导？

## 选择

[请注意，您可以通过使用覆盖相同领域的替代脚本环境，特别是出色的boto](https://github.com/boto/boto)，它*是一个提供 Amazon Web Services 接口的 Python 包，可以*大大简化和加快使用 EC2 的工作。

Boto 使用现在更常见的仅基于访问密钥的身份验证方案，而不是 X.509 证书（例如 AWS_ACCESS_KEY_ID / AWS_SECRET_ACCESS_KEY 对），此外可以（并且应该）通过[AWS Identity and Access Management (IAM)](http://aws.amazon.com/iam/)进行管理以避免风险首先公开您的主要 AWS 账户凭证。[请参阅我对如何使用 IAM 用户账户下载 EC2 X.509 证书的](https://stackoverflow.com/a/8995926)回答？有关这方面的更多详细信息。

祝你好运！

# java - 使用 Proguard (Spring) 混淆后如何避免反射错误

> ID：10173526
> 
> 赞同：4
> 
> 时间：2012-04-16T11:50:21.090
> 
> 标签：java, spring, proguard

我混淆了我的类并手动更新了我的 spring 配置 xml，但问题是，proguard 更改了我的 setter 方法的名称并将它们变成了类似的东西

```
public void d(a a){
b= a;
} 
```

因此，当 spring 尝试通过反射调用 setB("something") 时，它会崩溃。混淆时避免反射错误的好方法是什么？有什么想法吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T12:10:56.597

您必须避免混淆这些类。使用[-keep](http://proguard.sourceforge.net/index.html#manual/usage.html)选项排除它们。另一种方法是使用[Spring JavaConfig](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-java)而不是 XML；这样配置也将被混淆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T12:29:04.350

根据[spring bean 模式](http://www.springframework.org/schema/beans/spring-beans-3.1.xsd)，属性名称定义为

> 属性的名称，遵循 JavaBean 命名约定。

根据[JavaBean 规范](http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html)，setter 应该以`set`. 你可以通过提供一个*className*`BeanInfo`类来指定一个替代设置器来解决这个问题，但我猜 Proguard 也会混淆这个名称......

# c# - c#程序运行时按钮的流程图

> ID：10173529
> 
> 赞同：1
> 
> 时间：2012-04-16T11:50:37.223
> 
> 标签：c#, string, button, charts

我需要在运行从 textbox1 获得的字符串输入流程图时创建。表单大小为 700*450，并且允许滚动。每个字母之间（输入字符串中的字符）必须是（在输出中）一个箭头（显示在按钮上）**整个图表必须在按钮 ** 例如，对于这个输入字符串：'ABZAZAZA' 每个字母都有一个合适的颜色，按钮的背景应该被着色。

程序应该是“打印”：A --> B --> Z --> A --> Z --> A --> Z --> A -->

箭头按钮尺寸：34*23 字母按钮尺寸：34*29

***我的代码的问题，没有显示流程图***

继承人的代码：

```
 public void DrawingSystem(string st)
    {
        shura_acid = 12;
        tur_acid = 185;

        for (int i = 1; i <= st.Length; i++)
        {
            if ((i % 7) == 0)
            {
                OpenNewLine();
            }
            CreateAcid(st[i - 1], i);
            shura_acid = shura_acid + 24 + 68;
        }
    }

    public void OpenNewLine()
    {
        tur_acid = tur_acid + 29 + 12;//34 because the size of button,12 because space between lines
        shura_acid = 12;
    }

    public void CreateAcid(char letter, int i)
    {
        //create acid
        Button acid = new Button();
        acid.Location = new System.Drawing.Point(shura_acid, tur_acid);
        acid.Name = "acid" + i;
        acid.Size = new System.Drawing.Size(34, 29);
        acid.TabIndex = 100 + i;
        acid.Text = Convert.ToString(letter);
        switch (letter)
        {
            case 'A': acid.BackColor = System.Drawing.Color.Fuchsia; break;
            case 'C': acid.BackColor = System.Drawing.Color.Pink; break;
            case 'D': acid.BackColor = System.Drawing.Color.Gray; break;
            case 'F': acid.BackColor = System.Drawing.Color.Azure; break;
            case 'G': acid.BackColor = System.Drawing.Color.Red; break;
            case 'H': acid.BackColor = System.Drawing.Color.Aqua; break;
            case 'I': acid.BackColor = System.Drawing.Color.Lime; break;
            case 'K': acid.BackColor = System.Drawing.Color.Yellow; break;
            case 'L': acid.BackColor = System.Drawing.Color.Olive; break;
            case 'M': acid.BackColor = System.Drawing.Color.Coral; break;
            case 'N': acid.BackColor = System.Drawing.Color.SaddleBrown; break;
            case 'P': acid.BackColor = System.Drawing.Color.Teal; break;
            case 'Q': acid.BackColor = System.Drawing.Color.Blue; break;
            case 'R': acid.BackColor = System.Drawing.Color.Orange; break;
            case 'S': acid.BackColor = System.Drawing.Color.Green; break;
            case 'T': acid.BackColor = System.Drawing.Color.SteelBlue; break;
            case 'V': acid.BackColor = System.Drawing.Color.DarkViolet; break;
            case 'W': acid.BackColor = System.Drawing.Color.Crimson; break;
            case 'X': acid.BackColor = System.Drawing.Color.MediumAquamarine; break;
            default: acid.BackColor = System.Drawing.Color.Gold; break;
        }

        //create arrow
        Button arrow = new System.Windows.Forms.Button();
        arrow.Location = new System.Drawing.Point(shura_acid + 34 + 12, tur_acid);
        arrow.Name = "acid" + i;
        arrow.Size = new System.Drawing.Size(34, 23);
        arrow.TabIndex = 100 + i;
        arrow.Text = "-->";
        arrow.UseVisualStyleBackColor = false;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:22:50.407

我会试一试。在您的代码中，我没有看到您实际上将`acid`or`arrow`按钮添加到容器中。

你需要这样的东西：

```
this.Controls.Add(acid); 
```

和

```
this.Controls.Add(arrow); 
```

更改`this.Controls`为您希望它们出现的容器。

# android - 常见的android sdk平台

> ID：10173531
> 
> 赞同：0
> 
> 时间：2012-04-16T11:50:38.737
> 
> 标签：android, android-emulator, android-2.2-froyo

只是对使用哪个平台或哪个是最常用的 sdk 平台进行开发有疑问？

我正在准备一个应用程序，它有一个使用谷歌地图的位置查找器，客户端的主要目标是让它在大多数安卓手机上运行。我正在考虑使用 google api 2.2 平台 8，这样会好吗？

# 编辑 - 1

感谢您提供的信息，但是当在这里查看 android 平台分发页面时：http: [//developer.android.com/resources/dashboard/platform-versions.html](http://developer.android.com/resources/dashboard/platform-versions.html) 我觉得我为什么不应该选择 2.3.3？对此有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:52:17.873

您可以在此处找到当前的[Android 平台版本分布](http://developer.android.com/resources/dashboard/platform-versions.html)。
这是一个实时更新的文档/页面，因此请在一段时间内密切关注它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:53:53.930

是的，您可以将该平台用作 google api 2.2。由于部署的应用程序将与所有更高版本兼容。

市场份额如下：[Android OS 市场份额](http://developer.android.com/resources/dashboard/platform-versions.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:56:27.327

最好使用 2.2，因为从 2.2 开始，只有 android 正在接受......而且它还满足您的要求......

# c++ - 模板功能搞砸了

> ID：10173533
> 
> 赞同：0
> 
> 时间：2012-04-16T11:50:43.973
> 
> 标签：c++, function, templates, typeid, typeinfo

所以我的 ResourceManager 类对于我正在使用 c++ 进行的游戏有一些问题。所以我试图从我的常规 addImage 函数中创建一个模板函数，这样它也会添加声音，但是我遇到了一些我无法真正处理的错误，你们能帮帮我吗？:D

.hpp

```
#ifndef RESOURCE_MANAGER_HPP
#define RESOURCE_MANAGER_HPP

#include "Image.cpp"
#include "SoundBuffer.cpp"
#include <SFML/Graphics.hpp>
#include <SFML/Audio.hpp>

typedef std::map<std::string, sz::Image*> ImagesContainer;
typedef std::map<std::string, sz::Image*>::iterator ImagesContainerIt;
typedef std::map<std::string, sz::SoundBuffer*> SoundsContainer;
typedef std::map<std::string, sz::SoundBuffer*>::iterator SoundsContainerIt;
typedef std::map<std::string, sf::Music*> MusicContainer;
typedef std::map<std::string, sf::Music*>::iterator MusicContainerIt;

namespace sz
{
        //      meanwhile this class is only for images, need to edit later for
        //      it to be also able to load sounds, etc...
        class ResourceManager{
                private:
                ResourceManager() {};
                ResourceManager(ResourceManager const&) {};
                static ResourceManager *rm;
                // add functions and variables here
                ImagesContainer imagesContainer;
                SoundsContainer soundsContainer;
                MusicContainer  musicContainer;
                template <class type>
                void AddNew(std::string imagePath);

                public:
                static ResourceManager *Instance();
                // add functions here
                template <class type>
                type *Get(std::string imagePath);
        };
}

#endif 
```

.cpp

```
#include "ResourceManager.hpp"
#include <typeinfo>

namespace sz
{
        ResourceManager *ResourceManager::rm = NULL;  

        ResourceManager *ResourceManager::Instance()
        {
           if (!rm)
                  rm = new ResourceManager;

           return rm;
        }

        template <class type>
        void ResourceManager::AddNew(std::string filePath)
        {
                type *item = new type(filePath);
                if(typeid(type) == typeid(sz::Image))
                        imagesContainer[filePath] = item;
                else if(typeid(type) == typeid(sz::SoundBuffer))
                        soundsContainer[filePath] = item;
                else
                        return;
        }

        template <class type>
        type *ResourceManager::Get(std::string filePath)
        {
                if(typeid(type) == typeid(sz::Image))
                {
                        ImagesContainerIt it = imagesContainer.find(filePath);
                        if(it == imagesContainer.end())
                        {
                                AddNew<type>(filePath);
                        }
                        it = imagesContainer.find(filePath);
                        return it->second;
                }

                else if(typeid(type) == typeid(sz::SoundBuffer))
                {
                        SoundsContainerIt it = soundsContainer.find(filePath);
                        if(it == soundsContainer.end())
                        {
                                AddNew<type>(filePath);
                        }
                        it = soundsContainer.find(filePath);
                        return it->second;
                }

                else
                        return NULL;
        }
} 
```

错误@_@

```
g++ -Wall -c "Sprite.cpp" (in directory: /home/gannash/Desktop/Open Heroes/Engine)
In file included from Sprite.cpp:2:0:
ResourceManager.cpp: In member function ‘type* sz::ResourceManager::Get(std::string) [with type = sz::Image, std::string = std::basic_string<char>]’:
Sprite.cpp:10:65:   instantiated from here
ResourceManager.cpp:50:15: error: cannot convert ‘sz::SoundBuffer*’ to ‘sz::Image*’ in return
ResourceManager.cpp: In member function ‘void sz::ResourceManager::AddNew(std::string) [with type = sz::Image, std::string = std::basic_string<char>]’:
ResourceManager.cpp:36:5:   instantiated from ‘type* sz::ResourceManager::Get(std::string) [with type = sz::Image, std::string = std::basic_string<char>]’
Sprite.cpp:10:65:   instantiated from here
ResourceManager.cpp:23:4: error: cannot convert ‘sz::Image*’ to ‘std::map<std::basic_string<char>, sz::SoundBuffer*>::mapped_type {aka sz::SoundBuffer*}’ in assignment
ResourceManager.cpp: In member function ‘type* sz::ResourceManager::Get(std::string) [with type = sz::Image, std::string = std::basic_string<char>]’:
ResourceManager.cpp:55:2: warning: control reaches end of non-void function [-Wreturn-type]
Compilation failed. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:06:32.043

好的，这是我查看代码和错误消息后的想法。

你不能像这样从同一个函数返回图像和声音。它们是个体类型。您必须指定要返回的类型。当您将 if/else 放入模板中时，它仍然会检查它是否可以返回所有这些类型，这将失败。

您必须返回 Image 和 Sound 都继承自的 BaseClass*（或任何您想调用的名称）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:56:53.220

“编译时 if”是通过模板部分特化完成的。但在这里它甚至不需要：

```
template<typename type> struct Container {
  static std::map<std::string, type*> container;
};
std::map<std::string, sz::Image*>& ImagesContainer = Container<sz::Image>::container;
// etc...
template <class type>
void ResourceManager::AddNew(std::string filePath)
{
  type *item = new type(filePath);
  Container<type>::container[filePath] = item;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:56:59.613

必须为编译器完全定义模板化函数才能使用它们。这意味着您必须将这些函数的主体从源文件移动到头文件。

**编辑：**

您必须检查如何使用模板类。例如，请参阅此错误消息：

> ResourceManager.cpp:50:15：错误：无法将 'sz::SoundBuffer*' 转换为 'sz::Image*' 作为回报

除非`sz::SoundBuffer`继承自`sz::Image`您，否则类型之间不匹配。

# javascript - 如何使用 page-mod 修改 JavaScript 加载的元素

> ID：10173534
> 
> 赞同：1
> 
> 时间：2012-04-16T11:50:45.077
> 
> 标签：javascript, firefox-addon

我正在创建 Firefox 插件以将 onclick 事件添加到特定按钮。（“输入”元素）

该按钮位于[http://example.com/welcome#_pg=compose](http://example.com/welcome#_pg=compose) 但是当我打开页面时，出现以下错误：

类型错误：document.querySelector("#send_top") 为空

#send_top 是我要修改的按钮的 ID。因此，找不到该按钮。

发生此错误是因为[http://example.com/welcome](http://example.com/welcome)和[http://example.com/welcome#_pg=compose](http://example.com/welcome#_pg=compose)是完全不同的页面。在这种情况下，插件似乎正在加载[http://example.com/welcome](http://example.com/welcome)，但没有“#send_top”ID 的按钮。添加 #_pg=compose 锚点时，按钮由 JavaScript 加载。

如何加载[http://example.com/welcome#_pg=compose](http://example.com/welcome#_pg=compose)来修改按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T19:36:25.520

三个想法可以帮助您调试：

1.  要正确匹配 url，您应该考虑使用正则表达式而不是页面匹配语法 - 这可能允许您以更可预测的方式对锚做出反应

2.  我发现，在对 JS 大量修改的页面使用内容脚本时，可能会遇到时间问题。一个 hacky 解决方法可能是查找您想要的元素，如果它不存在，请执行 setTimeout 100 毫秒左右，然后重新检查。丑陋，是的，但它适用于我在新的 twitter UI 中使用的一些示例代码，例如。

3.  您可以`unsafeWindow`在内容脚本中使用该变量直接访问页面的窗口对象——该对象将包含 JS 对页面所做的任何更改，并且不会被代理。但是，您应该`unsafeWindow`非常谨慎地使用它，因为它的使用可能存在安全问题。特别是，您永远不应该相信来自 的任何数据`unsafeWindow`。

# c# - 错误：对象引用未设置为对象企业架构师和 Visual Studio 的实例

> ID：10173536
> 
> 赞同：0
> 
> 时间：2012-04-16T11:50:51.100
> 
> 标签：c#

当我尝试使用 Visual Studio 和 Enterprise Architect 编译我的程序时出现此错误。

我正在为 Enterprise Architect 编写一个工具，我必须制作一个图表，并且我继续收到此错误，我不知道该怎么办。

我有问题的代码是：

```
 public Graph(EA.Repository repository)
    {

        EA.Diagram maindiagram;
        this.modelRepository = repository;
        maindiagram = repository.GetCurrentDiagram(); //recupero del diagramma
        this.diagramId = maindiagram.DiagramID; //identificativo del diagramma

        //inizializzazione nodi
        Collection nodeCollection = maindiagram.DiagramObjects;
        nodeList = new ArrayList();

        foreach (DiagramObject diagram in maindiagram.DiagramObjects)
        {
            diagramList.Add(diagram);
            foreach (Element element in diagramList)
            {
                if (element.Type == "Class"|| element.Type == "Component"||element.Type == "Package")
                { nodeList.Add(new Node(diagram, ref repository)); }

            }                

        }

        //inizializzazione archi 
        Collection linkCollection = maindiagram.DiagramLinks;
        linkList = new ArrayList();

        foreach (DiagramLink edge in maindiagram.DiagramLinks)
        {
            edgeList.Add(edge);
            foreach(Connector connector in edgeList)
                if (connector.Type == "Association" || connector.Type == "Aggregation" || connector.Type == "Compose" || connector.Type == "Dependency" 
                    || connector.Type == "Generalization" || connector.Type == "Realization")
                { linkList.Add(new Link (edge, ref repository));}
        } 
```

如果你知道怎么做，请帮忙。

十分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:18:13.923

`repository`可能是`null`- 您应该对参数参数进行空检查以确定您是否可以继续；也`maindiagram`可能是`null`（据我们所知，如果`repository`是某事，那么`GetCurrentDiagram`可能会返回`null`.

以可能导致您的问题的方式访问这两件事。

`diagramList`不存在于方法的范围内，因此假设它具有更自由的范围：这也可能什么都不是，但是您调用`Add`它。您还可以将其视为某物进行迭代，并且在不检查是否存在的情况下`element`尝试`null`访问*其*属性。

简而言之，您发布的代码中有很多地方可能会出现这种情况。您应该更具体地了解错误实际发生的位置，但是，答案将是相同的：[*something is nothing*](https://stackoverflow.com/questions/4660142/what-is-a-nullreferenceexception-in-net/4660186#4660186)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:54:42.973

仅通过提供的消息无法理解此代码中发生了什么。

*   查看异常消息提供的行号，然后转到该行

*   或[在 Visual Studio 中启用第一次机会异常，](http://florianreischl.blogspot.it/2010/01/how-to-enable-first-chance-exceptions.html)在异常情况下，代码将*完全*在产生问题的行上中断。

# asp.net - 部分配置部分的外部配置文件

> ID：10173543
> 
> 赞同：3
> 
> 时间：2012-04-16T11:51:16.330
> 
> 标签：asp.net, iis-7, web-config

我正在尝试使用外部配置文件在我的 web.config 文件`location`的根`<configuration>`部分中定义多个元素。这可能吗？

我了解如何为单个部分（例如`connectionStrings`）执行此操作，但是可以为配置元素中的多个元素执行此操作吗？ `<configuration>`; 本身不允许该`configSource`属性。是否可以创建一个虚拟元素并在中定义它`configSections`，如果可以，我应该给它什么类型？

背景信息：我想这样做以便我可以定义永久重定向，可能有数百个，所以理想情况下我不想在 web.config 本身中定义它。IE

```
<configuration>
  <!-- rest of web.config here -->
  <!-- i need mutiple location elements so want these in an external file-->
  <location path="oldpage">
    <system.webServer>
      <httpRedirect enabled="true" destination="/uk/business" httpResponseStatus="Permanent" />
    </system.webServer>
  </location>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:24:59.590

以为我会在这方面添加更多细节。正如 CodeMonkey 提到的那样，URL 重写模块是要走的路，有关重写模块的更多详细信息[http://www.iis.net/download/URLRewrite](http://www.iis.net/download/URLRewrite)。

这些是我对 web.config 定义规则和引用外部文件所做的更改（在`system.webServer`）

```
<rewrite>
  <rewriteMaps configSource="RewriteMaps.config" />                
  <rules>
      <rule name="Rewrite rule1 for StaticRewrites">
          <match url=".*" />
          <conditions>
              <add input="{StaticRewrites:{REQUEST_URI}}" pattern="(.+)" />
          </conditions>
          <action type="Redirect" url="{C:1}" redirectType="Permanent" appendQueryString="false" />
      </rule>
  </rules>        
</rewrite> 
```

注意：还需要更新 VS XML Schema 以停止它的抱怨 [http://ruslany.net/2010/04/visual-studio-xml-intellisense-for-url-rewrite-2-0/](http://ruslany.net/2010/04/visual-studio-xml-intellisense-for-url-rewrite-2-0/) （确保你请参阅此博客上的评论重新更新 vs2010 的 js）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:27:13.857

要执行您的要求，您只需要这样做：

```
<rewrite>
  <rules configSource="rewrites.config" />
</rewrite> 
```

任何文件名都应该足够了。

您将`configSource`在要外化的元素上设置属性。

# android - 全屏自定义对话框？

> ID：10173544
> 
> 赞同：46
> 
> 时间：2012-04-16T11:51:18.940
> 
> 标签：android, dialog, fullscreen

有没有办法让我的对话框视图全屏，即对话框占据整个屏幕（如活动）。我尝试使用 LayoutParams 和样式， `<item name="android:windowFullscreen">true</item>`但似乎没有任何效果。

我找到了摆脱标题栏的方法，但找不到将对话框全屏显示的方法。所以任何人都可以建议我一种方法来做到这一点。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="MyTheme" parent="@android:style/Theme.Dialog">
    <item name="android:windowFullscreen">true</item>
    <item name="android:windowFrame">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowBackground">@color/dialog_background</item>
</style>
</resources> 
```

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-04-16T11:53:28.477

给它的构造函数一个非对话框主题，例如**android.R.style.Theme**或**android.R.style.Theme_Light**。

@Bob 编写的代码。

```
Dialog dialog = new Dialog(context, android.R.style.Theme_Light); 
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE); 
dialog.setContentView(R.layout.MyCustomDialogLayout); 
dialog.show(); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-04-16T12:05:56.700

以下代码适用于我的情况：

```
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE); 
dialog.setContentView(R.layout.mydialog2);
dialog.getWindow().setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.MATCH_PARENT); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-04-27T06:47:43.360

尝试这个

```
dialog = new Dialog(context,android.R.style.Theme_Translucent_NoTitleBar_Fullscreen); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-03-29T04:10:56.700

1.自定义您的对话框样式

```
 <style name = "MyDialog" >
        <item name="android:windowNoTitle">true</item>
        <item name="android:windowFullscreen">true</item>
        <item name="android:windowIsTranslucent">true</item>
        <item name = "android:windowContentOverlay" >@null</item >
        <item name = "android:colorBackgroundCacheHint" >@null</item >
        <item name = "android:backgroundDimEnabled">true</item>
        <item name = "android:windowBackground" >@android:color/transparent</item >
    </style >
```

2：自定义你的对话框

```
WindowManager wm = (WindowManager) this.getSystemService(Context.WINDOW_SERVICE);
            int width = wm.getDefaultDisplay().getWidth();
            int height = wm.getDefaultDisplay().getHeight();
            final Dialog dialog = new Dialog(this, R.style.MyDialog);
            View view = LayoutInflater.from(this).inflate(R.layout.layout_dialog, null);

            WindowManager.LayoutParams params = dialog.getWindow().getAttributes();
            params.width = WindowManager.LayoutParams.MATCH_PARENT;
            params.height = WindowManager.LayoutParams.WRAP_CONTENT;

            dialog.setContentView(view);
            dialog.getWindow().setGravity(Gravity.BOTTOM);
            dialog.getWindow().setWindowAnimations(R.style.mydialog_Style);
            dialog.show();
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-23T07:43:57.560

尝试将您的包装`dialog_custom_layout.xml`成`RelativeLayout`. 这对我有用。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-08-05T02:19:22.477

答案对我不起作用（sdk 21，三星银河 s5）。经过搜索和测试，我发现设置全屏对话框的关键点是`<item name="android:windowIsFloating">false</item>`在你的对话框样式中。sdk 中大多数样式的 Dialog 都设置为 true！将其设置为 false 并在样式中使用

```
AlertDialog.Builder = new AlertDialog.Builder(getActivity(), R.style.YourStyle); 
```

你的风格可能看起来像

```
<style name="YourStyle">
    <item name="android:windowIsFloating">false</item>
    ...
</style> 
```

设置为false后，它应该是全屏的。还有更多，你可以使用

```
dialog.getWindow.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT); 
```

将其高度设置为 wrap_content。希望能帮助到某人。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-06-26T11:12:39.867

对于全屏对话框，您应该扩展`DialogFragment`它将提供`Fragment`生命周期方法，这是 Android 开发人员文档中推荐的方式，您可以简单地使用`Dialog`，`AlertDialog`也可以使用。

当您创建对话框实例时，只需使用`android.R.style.Theme_Black_NoTitleBar_Fullscreen`带有上下文的主题，如下所示：

```
Dialog dialog = new Dialog(getActivity(), android.R.style.Theme_Black_NoTitleBar_Fullscreen); 
```

或者

```
AlertDialog.Builder builder = new AlertDialog.Builder(getActivity(), android.R.style.Theme_Black_NoTitleBar_Fullscreen); 
```

这将全屏显示对话框。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-16T11:58:11.483

试试这个代码

```
protected void openDialog() {
        Dialog dialog = new Dialog(this);
        dialog.addContentView(new View(this), (new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT)));
        dialog.show();
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-01-23T13:05:27.763

将您的自定义对话框创建为

```
Dialog dialog = new Dialog(context, android.R.style.Theme_Translucent_NoTitleBar_Fullscreen); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-05-25T15:37:19.777

我正在使用带有对话框主题的活动。在这种情况下，全屏以这种方式工作：

```
int mUIFlag = View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY
            | View.SYSTEM_UI_FLAG_FULLSCREEN
            | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION;

@Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getWindow().getDecorView().setSystemUiVisibility(mUIFlag);

        getWindow().setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.MATCH_PARENT);
        setContentView(R.layout.lockscreen_activity);
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-02-24T04:18:18.587

以下是如何创建具有自定义布局的全屏对话框的步骤，该布局占据整个屏幕，每个站点都没有任何填充。

**第 1 步：**定义您的自定义对话框布局，命名为`layout_fullscreen_dialog.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@color/colorPrimary">

    <!-- Your dialog content here -->

</LinearLayout> 
```

**第 2 步：**`styles.xml`在命名中定义新样式`FullScreenDialog`

```
<style name="FullScreenDialog" parent="Theme.AppCompat.Dialog">
    <item name="android:windowBackground">@android:color/transparent</item>
</style> 
```

**第 3 步：**编写一个创建并显示对话框的方法

```
public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        createAndShowDialog(this);
    }

    // This method used to create and show a full screen dialog with custom layout.
    public void createAndShowDialog(Context context) {
        Dialog dialog = new Dialog(context, R.style.FullScreenDialog);
        dialog.setContentView(R.layout.layout_fullscreen_dialog);

        WindowManager.LayoutParams layoutParams = dialog.getWindow().getAttributes();
        dialog.getWindow().setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.MATCH_PARENT);
        dialog.getWindow().setAttributes(layoutParams);
        dialog.show();
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-09-13T13:22:14.747

**带有数据绑定的全屏对话框**

```
 fun showUserQrCode(
    mContext: Activity,
    showAddMore: Boolean,
    message: String?,
    skipClick: View.OnClickListener?,
    addMoreClick: View.OnClickListener?
) {

    val dialog = Dialog(mContext, android.R.style.Theme_Black_NoTitleBar_Fullscreen)
    val discountBinding: PopupUserQrCodeBinding = DataBindingUtil.inflate(
        LayoutInflater.from(mContext),
        R.layout.popup_user_qr_code,
        null,
        false
    )
    discountBinding.btnSkip.setOnClickListener(skipClick)

    dialog.setContentView(discountBinding.root)
    dialog.show()
} 
```

**无绑定**

```
 val dialog = Dialog(mContext, android.R.style.Theme_Black_NoTitleBar_Fullscreen)
    dialog.setContentView(R.layout.slider_layout)
    dialog.show() 
```

# asp.net - 如何使用 ASP.NET 将 Facebook 新闻提要拉到网站上

> ID：10173550
> 
> 赞同：0
> 
> 时间：2012-04-16T11:51:44.760
> 
> 标签：asp.net, facebook

似乎有各种使用 PHP 的例子，但需要一个具体的例子来说明如何使用 .NET 来做到这一点。

Facebook 似乎很痛苦，并且没有像 Twitter 那样简单的方法，您可以在其中使用小部件，它会为您创建代码以集成到您的 HTML 中。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:54:22.203

如果您乐于使用小部件，例如[Twitter 小部件](http://twitter.com/about/resources/widgets)，您可以在此处访问 facebook 小部件：

[http://developers.facebook.com/docs/plugins/](http://developers.facebook.com/docs/plugins/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T04:01:23.117

Facebook 为它提供了 api。请参考[这里](https://developers.facebook.com/docs/graph-api/reference/v2.3/user/feed)

[https://graph.facebook.com/me/feed?access_token=your_access_token](https://graph.facebook.com/me/feed?access_token=your_access_token)

# javascript - 选择孙子 onclick 事件

> ID：10173553
> 
> 赞同：0
> 
> 时间：2012-04-16T11:51:51.983
> 
> 标签：javascript, jquery

我已经编写了一些 jquery 代码来选择 div，该 div 是另一个具有 id pageContainer2 的 div 的孙子，用户单击该 div 并显示带有索引值的警报消息。但是代码完全是节点工作，所以请看看我写的代码是错误的还是他们的任何其他问题。

以下是我的带有 jquery 脚本的 html 页面代码：

```
<script>
$("div#pageContainer2 div.textLayer div").click(function () {
  // this is the dom element clicked
    var index = $("div").index(this);
    alert("index of div is = " + index);
});
</script>

<div id="pageContainer2" >
<canvas id="page2" width="741" height="959"></canvas>
<div class="textLayer">
<div>......some text here....</div>
<div>......some text here....</div>
<div>......some text here....</div>
</div>
</div>

<div id="pageContainer3" >
<canvas id="page3" width="741" height="959"></canvas>
<div class="textLayer">
<div>......some text here....</div>
<div>......some text here....</div>
<div>......some text here....</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:00:18.943

有几个问题。

1.  您似乎没有使用`$(document).ready()`事件，因此该事件未绑定到任何元素，因为它们尚未在 DOM 中。
2.  您正在尝试查找不存在的`div`of （您有.`id="textLayer"``class="textLayer"`
3.  您正在将一个选择器传递给该`index()`方法，该选择器应该定义您想要在其中找到该特定对象的位置的元素。只有*一个* `this`元素（甚至 jQuery 的`each()`方法一次只使用*一个*元素，从第一个到最后一个......）。所以删除那个特定的选择器。

所以，更正的代码：

```
$(document).ready(
    function(){
    $("div#pageContainer2 div.textLayer div").click(function () {
      // this is the dom element clicked
        var index = $("div").index();
        alert("index of div is = " + index);
    });
}); 
```

[JS Fiddle 演示](http://jsfiddle.net/davidThomas/dYz35/)。​</p>

参考：

*   [`$(document).ready()`](http://docs.jquery.com/Tutorials%3aIntroducing_%24%28document%29.ready%28%29).
*   [jQuery 选择器](http://api.jquery.com/category/selectors/)、[CSS（2 级）选择器](http://www.w3.org/TR/CSS2/selector.html)和[CSS（3 级）选择器](http://www.w3.org/TR/selectors/)。
*   [`index()`](http://api.jquery.com/index/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:58:26.167

好吧，`click`事件根本没有绑定，因为`textLayer`它是`class`not `id`，但您选择 by `id`。

将选择器更改为：

```
$("div#pageContainer2 div.textLayer div") 
```

也不清楚您不想显示哪个索引，因为您当前使用的将返回`div`整个文档中特定标签的索引。如果您想在父级中使用索引，则最好使用以下内容：

```
var el = $(this);

var index = $('div', el.parent()).index(this);
// Or
var index = el.prevAll().length; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T12:08:35.717

将您的代码放入`$(document).ready`并更改`#textLayer`为`.textLayer` hiteshtr 它正在按照您的意愿工作，只需检查这个即可。

```
$(document).ready(function () {
    $("#pageContainer2 > .textLayer > div").click(function () {
        // this is the dom element clicked
        var index = $("#pageContainer2 > .textLayer > div").index(this);
        alert("index of div is = " + index);
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T12:17:13.753

```
<script type="text/javascript">
    $(function() {
        $(".textLayer > div", "#pageContainer2").click(function () {
            var index = $(this).index();
            alert("index of div is = " + index);
        });
    });
</script>

<div id="pageContainer2" >
    <canvas id="page2" width="741" height="959"></canvas>
    <div class="textLayer">
        <div>......some text here....</div>
        <div>......some text here....</div>
        <div>......some text here....</div>
    </div>
</div>

<div id="pageContainer3" >
    <canvas id="page3" width="741" height="959"></canvas>
    <div class="textLayer">
        <div>......some text here....</div>
        <div>......some text here....</div>
        <div>......some text here....</div>
    </div>
</div>​ 
```

[小提琴](http://jsfiddle.net/adeneo/cEQ9V/)

# java - 需要帮助计算数组列表中的字符

> ID：10173554
> 
> 赞同：1
> 
> 时间：2012-04-16T11:51:54.307
> 
> 标签：java, arraylist

```
import java.io.* ;
import java.util.ArrayList ;
public class WordSearchPuzzle;
{
    private char[][] puzzle ;
    private ArrayList<String> puzzleWords ;
    private int letterCount = 0 ;
    private int gridDimensions;

    public WordSearchPuzzle(ArrayList<String> userSpecifiedWords)
    {
        this.puzzleWords = userSpecifiedWords ;

    }
    private void createPuzzleGrid()
    {
      int i;
        for(i = 0; i < puzzleWords.size(i).length ; i++){
          letterCount = puzzleWords + letterCount ;
            }
        }
        gridDimensions = letterCount * 1.5;
        puzzle[gridDimensions][gridDimensions];
    }

    public WordSearchPuzzle(String wordFile, int wordCount,
    int shortest, int longest)
    {
        // puzzle generation using words from a file
        // The user supplies the filename. In the file 
        // the words should appear one per line.
        // The wordCount specifies the number of words
        // to (randomly) select from the file for use in
        // the puzzle.
        // shortest and longest specify the shortest
        // word length to be used and longest specifies
        // the longest word length to be used.
        // SO, using the words in the file randomly select
        // wordCount words with lengths between shortest
        // and longest.

    }

    private ArrayList<String> loadWordsFromFile(String filename, int shortest, int longest)
    {
        // BasicEnglish.txt - the 850 words of Basic English
        // BNCwords.txt - "the 6,318 words with more than 800 occurrences in
        //the whole 100M-word BNC"
        try {
            FileReader aFileReader = new FileReader(filename);
            BufferedReader aBufferReader = new BufferedReader(aFileReader);
            String lineFromFile;
            int len ;
            ArrayList<String> words = new ArrayList<String>();
            lineFromFile = aBufferReader.readLine() ;
            while (lineFromFile != null) {  
                len = lineFromFile.length() ;
                if(len >= shortest && len <= longest) {
                    words.add(lineFromFile.toUpperCase());
                }
                lineFromFile = aBufferReader.readLine() ;
            }
            aBufferReader.close();
            aFileReader.close();
            return words ;
        }
        catch(IOException x)
        {
            return null ;
        }
    }

    // The dimensions of the puzzle grid should be set
    // by summing the lengths of the words being used in the
    // puzzle and multiplying the sum by 1.5 or 1.75
    // or some other (appropriate) scaling factor to
    // ensure that the grid will have enough additional
    // characters to obscure the puzzle words. Once
    // you have calculated how many characters you are
    // going to have in the grid you can calculate the
    // grid dimensions by getting the square root (rounded up)
    // of the character total.
} 
```

嗨，我上大学时必须在这里做的小型 Java 项目。这是我到目前为止所拥有的。我不明白为什么它不编译。我编写了用于生成网格的代码；网格尺寸由输入词设置（所有输入词的字母总和 * 1.5）。我不确定将数组列表的所有元素加在一起的部分。

这是怎么回事？提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:05:29.673

我可以看到多个问题：

在类声明行中不应有分号。

```
public class WordSearchPuzzle 
```

正如 Nettogrof 所示，您的方法中有太多 } `createPuzzleGrid`。

其中的循环`createPuzzleGrid`使用不存在的方法。没有`size`为数组列表提供参数的方法。它也没有找到那个点的字符串长度你的循环`createPuzzleGrid`应该是：

```
for (int i = 0; i < puzzleWords.size; i++) {
    String item = puzzleWords.get(i);
    int itemLength = item.length();
    letterCount = letterCount + itemLength;
} 
```

作为额外说明，该方法的最后一行访问`puzzle`数组但不执行任何操作，因此可以删除此行。事实上，没有任何方法使用该`puzzle`变量，因此可以将其完全删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T11:58:36.277

去掉这里的分号.... `public class WordSearchPuzzle;`

这不是一个声明。 `puzzle[gridDimensions][gridDimensions];`

`puzzleWords.size(i).length`在 for 循环中给出了问题。如果您想要列表中的元素数量，`puzzleWords.size()`它将起作用。然后 `letterCount = puzzleWords + letterCount ;` ，你有不兼容的类型，ArrayList + int，你是要使用`puzzleWords.size()`而不是puzzleWords吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T11:55:56.327

在您的 createPuzzleGrid 中，您的 For 循环中有两个 }

正确的版本：

```
private void createPuzzleGrid()
{
  int i;
    for(i = 0; i < puzzleWords.size(i).length ; i++){
      letterCount = puzzleWords + letterCount ;
    }
    gridDimensions = letterCount * 1.5;
    puzzle[gridDimensions][gridDimensions];
} 
```

# java - 在 JCreator 中创建程序

> ID：10173560
> 
> 赞同：0
> 
> 时间：2012-04-16T11:52:15.540
> 
> 标签：java, jcreator

有谁知道怎么做这个程序，看下面的描述

“编写一个程序，让银行客户登录并查看他们的详细信息、取款、存款和更改 PIN。有数组存储姓名、密码、账户余额和透支。当用户存款或取款时，必须更新数组钱或更改 PIN。PIN 不能是已在使用的 PIN。如果用户透支，则只能提取比其帐户中更多的钱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:37:03.877

我不会告诉你怎么做，但我可以给你一些建议。您可能会想要创建一个`BankAccount`类，其中包含用于详细信息的实例字段以及用于查看详细信息、提取资金等的方法。坦率地说，使用静态数组是一种愚蠢的做法。如果您的老师允许，只需制作一个`BankAccount`s 的静态数组并直接访问这些字段：

```
 BankAccount[] accounts = new BankAccount[20]; //as big as you need
    //initialize it here
    //to access the PINs, do something like this:
    int i = BankAccount[i].getPIN(); 
```

最后，为了确保 PIN 永远不会重复，在构造函数内部搜索匹配的 PIN 并在必要时处理匹配。信息量很大，而且我感觉您是 Java 新手。有问题尽管问我。

# django - 干草堆文档中缺少解释

> ID：10173573
> 
> 赞同：0
> 
> 时间：2012-04-16T11:53:24.147
> 
> 标签：django, solr, indexing, django-haystack

我是整个搜索的新手，很难学习干草堆。（solr 作为后端）

**这是我对 haystack/solr 的理解。**
如果我的理解有误，请评论。

**Solr**
solr 是文档搜索引擎。（与 RDBMS 相对）
它允许用户快速搜索给定术语的文档。（可以使用倒排索引）
solr 还允许在文档结构良好的情况下进行分面搜索。（如在 xml 中）

**Haystack**
对于某些应用程序（例如电子商务网站），将产品数据存储在 RDBMS 中是个好主意。（好吧，xml 也可以工作，但我只是猜测 RDBMS 比 xml 更擅长更新）
如果我们存储产品数据在 RDBMS 中，我们可以编写查询来获取用户查询的相关数据，但这很麻烦。
Haystack 可以将 RDBMS 中的数据转换为文档，以便 solr 可以对其进行索引。solr 索引数据后，大部分搜索可以委托给 solr。

问题来了。

1.  我可以根据需要创建数据库模式并仍然使用 haystack/solr 吗？

2.  假设我有如下数据库模型，我的 search_indexes.py 会是什么样子来启用任何类别的分面搜索？

...

```
class Category(models.Model):   
    name = models.CharField(max_length=200)  
    parentCategory = models.ForeignKey('self', null=True, blank=True)

class Item(models.Model):   
    name = models.CharField(max_length=200)  
    categorys = models.ManyToManyField(Category)  
    details = models.CharField(max_length=1024) 
```

注意，类别可以嵌套（类别可以有一个父类别）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:06:57.400

正如其简介所说，Haystack*用于 Django 的模块化搜索*。它专注于简化构建站点搜索和维护索引的方式，并且做得很好。将它与通用 Django ORM 进行比较是没有意义的，尽管它们的搜索功能在一定程度上重叠。
对于您的模型，由于 Item() 属于多个类别，您可以尝试`FacetMultiValueField`：

```
# in models.py
class Category(models.Model):
    # add __unicode__ method
    def __unicode__(self):
        return self.name

# in search_indexes.py
from haystack.indexes import *
class ItemIndex(SearchIndex):
    text = CharField(document=True, use_template=True)
    name = CharField(model_attr='name')
    categories = FacetMultiValueField() # or MultiValueField w/ facet=True

    def prepare_categories(self, obj):
        return obj.categories.all() 
```

并按照[http://django-haystack.readthedocs.org/en/latest/faceting.html](http://django-haystack.readthedocs.org/en/latest/faceting.html)在视图中操作SearchQuerySet。

# powershell - 告诉 MoveIT 一个 powershell 任务成功了

> ID：10173581
> 
> 赞同：0
> 
> 时间：2012-04-16T11:54:07.680
> 
> 标签：powershell, batch-file

如果我让 MoveIT 执行一个批处理文件，然后执行一个 powershell 文件。powershell 有没有办法告诉 moveIT 整个 powershell 脚本是成功的，而无需创建另一个文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:04:39.207

我不知道这个 MoveIT 是什么，但 Powershell 脚本应该能够执行 a `exit 0`（为了成功完成）并且批处理文件可以执行 a`exit %errorlevel%`来传达成功或失败。使用退出代码是执行脚本时传达成功或失败的标准方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T01:53:10.890

听起来 MOVEit Central “命令行应用程序”脚本正在用于启动 bat 文件。如果 bat 什么都不做，考虑直接启动 ps 脚本，或者更好地将 ps 脚本移植到 VB 并作为自定义脚本导入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-23T07:35:12.787

您可以做的是当 power shell 完成工作时，在文件夹中创建一个确认并在 moveit 上设置附加条件以观察确认文件的创建。我希望 MOVEit Central Advance 任务创建应该更合适。

# bash - Arduino 返回的响应多于已发送的查询

> ID：10173583
> 
> 赞同：1
> 
> 时间：2012-04-16T11:54:10.533
> 
> 标签：bash, serial-port, arduino, stty

使用 Arduino 将数据发布到 Pachube 时出现问题。Arduino 配置为在您发送“t”时返回温度的 JSON 数据，并在发送“l”时返回光照级别的 JSON 数据。这可以通过 Arduino 串行监视器完美运行。然后我创建了两个 bash 脚本。定期向 Arduino 发送“t”和“l”命令，并在每个请求之间等待 10 秒。

```
while true; do
    echo -n t > /dev/ttyACM0
    echo "$(date): Queried Arduino for temperature."
    sleep 10
    echo -n l > /dev/ttyACM0
    echo "$(date): Queried Arduino for light."
    sleep 10
done 
```

这工作正常。我每 10 秒收到一条回显消息。另一个脚本从串口读取生成的 JSON（我基本上是从某个网页复制的）。

```
ARDUINO_PORT=/dev/ttyACM0
ARDUINO_SPEED=9600
API_KEY='MY_PACHUBE_KEY'
FEED_ID='MY_FEED_ID'

# Set speed for usb
stty -F $ARDUINO_PORT ispeed $ARDUINO_SPEED ospeed $ARDUINO_SPEED raw
exec 6<$ARDUINO_PORT

# Read data from Arduino
while read -u 6 f ;do
    # Remove trailing carriage return character added
    # by println to satisfy stupid MS-DOS Computers
    f=${f:0:${#f} - 1}

    curl --request PUT --header "X-PachubeApiKey: $API_KEY" --data-binary "{ \"version\":\"1.0.0\", \"datastreams\":[ $f ] }" "http://api.pachube.com/v2/feeds/MY_FEED_ID"
    echo "$(date) $f was read."
done 
```

不幸的是，这个脚本发疯了，回显消息每 10 秒告诉我几次它向 Pachube 发布数据，尽管它应该每 10 秒执行一次（当第一个脚本告诉 Arduino 创建 JSON 消息时）。我认为这可能是 Arduino 上缓冲消息的问题，但即使将其关闭再打开，问题仍然存在。有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:47:27.080

我完全不熟悉 Arduino 和你在这里做的其他一些事情，但这里有一些我看到的一般事情：

*   Bash 几乎完全无法可靠地处理二进制数据。无法在 Bash 字符串中存储 NUL 字节。看起来您正在尝试使用一些技巧来使任意数据可读-希望您只将字符数据发送到`read`，否则这不太可能起作用。

*   `read``-d`读取换行符分隔的输入（或者如果您的 bash 足够新，则为给定值）。我不知道 while 循环正在读取的格式，但它必须是换行符分隔的字符串。

*   `read -r`除非您想要解释转义序列，否则请使用。（你几乎总是想要`-r`. `read`）

*   无条件地从每个字符串的末尾剥离一个字符并不是最好的。我会使用: ，它从 f 的末尾`f=${f%+($'\r')}`删除 1 个或多个相邻的 's。如果这不是默认设置，`\r`请记住在脚本的顶部。`shopt -s extglob`

*   这实际上不应该引起问题，但`exec`除非确实需要，否则我不喜欢使用 - 它不在这里。只需 put`done <$ARDUINO_PORT`终止`while`循环并从中删除`-u 6`参数`read`（除非循环内的某些内容专门从标准输入读取并且不能冲突，但情况似乎并非如此）。打开的FD在退出循环时会自动关闭。

*   不要在脚本中创建自己的全大写变量名，因为它们是保留的并且可能与环境中的变量冲突。至少使用一个小写字母。如果这些变量是由系统中的某些东西设置的并且您只是使用或修改它们，这当然不适用。

# c# - 如何在客户端应用程序中使用 Soap 扩展

> ID：10173586
> 
> 赞同：0
> 
> 时间：2012-04-16T11:54:24.507
> 
> 标签：c#, .net, web-services, soap

我用c#创建了一个webservice。为了加密响应，使用本文中指定的dll

[http://highcoding.blogspot.in/](http://highcoding.blogspot.in/)

网络方法

```
[WebMethod]
[EncryptionExtension(Decrypt = DecryptMode.None, Encrypt = EncryptMode.Response, Target = Target.Body)]
[TracingExtension(TracingMode = TracingMode.Response, MethodName = "HelloWorld")]
public string HelloWorld() {
    return "Hello World";
} 
```

我使用 c# windows 应用程序创建了一个 web 服务客户端。

```
 ServiceReference1.ServiceSoapClient ob = new WindowsFormsApplication2.ServiceReference1.ServiceSoapClient();
        string st = ob.HelloWorld(); 
```

在这里我收到一个错误“预期来自命名空间'http://schemas.xmlsoap.org/soap/envelope/'的结束元素'Body'”

加密正在工作。但我尝试并无法找到在客户端解密数据的方法。有人知道如何在客户端处理这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:06:31.850

在您的代理客户端代码中，将“EncryptionExtension”属性添加到 HelloWorld 方法

```
[EncryptionExtension(Decrypt = DecryptMode.Response, Encrypt = EncryptMode.None, Target = Target.Body)]
public string HelloWorld()
{
    object[] results = this.Invoke("HelloWorld", new object[] { });
    return ((string)(results[0]));
} 
```

请注意，此代理是自动生成的代码。每次您对 Web 服务进行更改时，它都会重新生成，而您的更改将会丢失。

处理这种情况的最佳方法是通过配置进行配置肥皂扩展。请按照此链接了解如何操作。

[http://fluentbytes.com/applying-soap-extension-client-proxy-without-altering-generated-proxy-code/](http://fluentbytes.com/applying-soap-extension-client-proxy-without-altering-generated-proxy-code/)

# javascript - IE7、JQuery UI 对话框

> ID：10173587
> 
> 赞同：1
> 
> 时间：2012-04-16T11:54:32.697
> 
> 标签：javascript, jquery, asp.net, jquery-ui

我正在使用 JQuery UI 对话框。在这种形式中，我验证了一些东西。我调用了这个函数；

```
MessageBox('this is message', 'Error', OpenDialog()); 
```

在 Chrome、Firefox、IE8、IE9 中；它工作正常，但在 IE7 中，只有对话框的标题显示如下。当我单击“Okey”按钮时，它只显示标题 ![在此处输入图像描述](../Images/928caa3a9169973aeb022e0b58be3c58.png) 如何解决这个问题？

消息框功能

```
function MessageBox(text, title,Func) {

var dv = document.createElement('div');

$(function () {

    dv.id = 'Dialog';
    dv.innerHTML = '<table style="font-family:Calibri;"><tr><td>' + text + '</td></tr></table>';       
    document.forms[0].appendChild(dv);
    var dlg = $('#Dialog').dialog({
        autoOpen: false,
        width: 400,
        title: title,
        modal: true,
        resizable: false,

        buttons: [
        {
            text: "Okey",
            width: 80,
            click: function () {
                DialogClose_('Dialog');

            }
        }],
        open: function () {
            $('.ui-dialog-buttonpane').find('button:contains("Okey")').addClass('ButtonDefault');
        },

        close: Func,
        beforeClose: function () {
            var dv2 = document.getElementById("Dialog");
            dv2.parentNode.removeChild(dv2);
        }
    });
    dlg.parent().appendTo(jQuery('form:first'));
    $('#Dialog').dialog("option", "minWidth", 400);
    $('#Dialog').dialog('option', 'position', 'center');
    $('#Dialog').dialog('open');
});
return; 
```

}

像这样的 OpenDialog 函数；

```
 function OpenDialog() {
        $(document).ready(function () {
            $("#dialog").dialog("open");
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:08:51.143

环顾四周，IE7 中对话框的高度似乎存在不少问题。

你可以尝试指定一个高度，但这会带走你得到的很好的自动高度功能。

或者，您可以在将“dlg”变量设置为 IE7 之后设置浏览器的高度：

```
if ($.browser.msie && parseInt($.browser.version, 10) == 7) {
    $('#Dialog').dialog("option", "height", 100);
} 
```

您可以用您的想法替换“100”。如果您的对话框中有一个容器元素，您可以随时使用它来设置高度，例如：

```
$("#container").height(); 
```

[StackOverflow](https://stackoverflow.com/questions/630984/jquery-ui-dialog-issue-with-ie)上也有更多建议。

希望有帮助。

# asp.net - 如何在asp.net中构建短代码

> ID：10173588
> 
> 赞同：-3
> 
> 时间：2012-04-16T11:54:40.130
> 
> 标签：asp.net, c#-4.0

我想构建一个库函数，以便当我的文本来自数据库时，该函数过滤该文本。

例如：字符串消息=“你好，世界”；

所以我的一个函数会将文本 hello 更改为 hi，另一个函数会将世界更改为 global。

此过滤器仅在我的班级中有任何功能时才有效。

我需要在 asp.net c# 中执行此操作。有没有人知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:17:10.083

它不太清楚你想要达到什么目的。但我认为你想做这样的事情......

```
var s = YOUR STRING
string[] wordslist = s.Split(' ');
foreach (var word in wordslist )
{
      switch (word )
      {
            case "Hello":
                word= word.replace(word,'Hi');
            case "World":
                 etc.....
      }     
} 
```

我认为如果您可以创建包含一对值的数据库表会容易得多。例如

```
tblReplace
OldValue       NewValue
Hello          Hi
World          global 
```

因此，您可以针对该字段搜索每个字符，`OldValue`如果找到，您可以用新值替换该单词。

希望这可以帮助

# android - 如何更改 Switch Widget 的大小

> ID：10173590
> 
> 赞同：68
> 
> 时间：2012-04-16T11:54:52.900
> 
> 标签：android, android-switch

在冰淇淋三明治中引入了一个[开关](http://developer.android.com/reference/android/widget/Switch.html)小部件，它显示了一个开关滑块。

我添加了这样的开关：

```
<Switch 
    android:layout_width="fill_parent"
    android:layout_height="48dp"
    android:textStyle="bold"
    android:thumb="@drawable/switch_thumb_selector"
    android:track="@drawable/switch_bg_selector" /> 
```

轨道和拇指可绘制对象是九个补丁图像，应该缩放到所有可能的大小。我希望 Switch 可以缩放到给定范围内的最大尺寸，但似乎可绘制对象只是在提供的空间内居中。

是否可以增加 Switch 的尺寸以使其看起来更大？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2016-09-22T04:52:28.813

使用 scale 属性更改大小对我有用。

将这些行添加到`<switch/>`xml 文件中的标记。

```
android:scaleX="2"
android:scaleY="2" 
```

您可以根据需要更改比例值。这里的值 2 使它的大小加倍，同样的值 0.5 使它的大小减半。

例子：

```
 <Switch
            android:id="@+id/switchOnOff"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:scaleX="2"
            android:scaleY="2"/> 
```

* * *

## 回答 #2

> 赞同：106
> 
> 时间：2013-11-22T22:02:30.610

我想我终于想通了：

1.  切换字幕大小由`<switch android:textSize=""... />`
2.  切换拇指文本大小由 控制`<switch android:switchTextAppearance="".../>`。打造属于自己的风格。这种样式很重要，因为它控制拇指的整体宽度（稍后会详细介绍）。
3.  总开关高度由 控制。您使用了九个补丁，我怀疑这就是您遇到问题的原因。我用了一个并且成功了。`<switch android:**track**="@drawable/shape_mythumb".../>``<shape android:shape="rectangle"...></shape>`
4.  拇指可绘制的高度`<switch android:thumb="".../>`被调整以匹配轨道的高度。拇指可绘制对象的高度仅对拇指的形状很重要。它不影响开关的高度。

所以这就是我发现的：

1.  `<shape>...</shape>`为切换拇指和切换轨道使用可绘制对象。
2.  两个可绘制对象的宽度无关紧要。我将我的设置为“0dp”
3.  **轨道的高度决定了开关的整体高度。**
4.  最长的字符串`android:textOff`或`android:textOn`将决定拇指的宽度。这决定了整个开关的宽度。开关宽度始终是拇指宽度的两倍。
5.  如果缩略图文本宽度小于轨道的高度，则缩略图形状将按比例缩小。这会扭曲拇指的形状。如果发生这种情况，请添加空格以增加“关闭”或“打开”文本的宽度，直到它至少与轨道高度一样宽。

这是足够的信息，至少可以开始将开关设计为您想要的尺寸和形状。让我知道你是否知道其他任何事情。

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2014-07-13T18:22:52.687

上面的答案是对的。这是一个小例子，如何使用可绘制的形状更改开关宽度，希望对某些人有所帮助..

1）使用你的拇指颜色（color_thumb.xml）

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
    <size android:height="40dp"  />
    <gradient android:height="40dp" android:startColor="#FF569BDA" android:endColor="#FF569BDA"/>
</shape> 
```

2) 轨道灰色 (gray_track.xml)

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
    <size android:height="40dp"  />
    <gradient android:height="40dp" android:startColor="#dadadada" android:endColor="#dadadada"/>
</shape> 
```

3) 拇指选择器 (thumb.xml)

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_enabled="false" android:drawable="@drawable/gray_track" />
    <item android:state_pressed="true"  android:drawable="@drawable/color_thumb" />
    <item android:state_checked="true"  android:drawable="@drawable/color_thumb" />
    <item                               android:drawable="@drawable/gray_track" />
</selector> 
```

4) 轨道选择器 (track.xml)

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true"  android:drawable="@drawable/color_thumb" />
     <item                               android:drawable="@drawable/gray_track" />
</selector> 
```

最后在 switch

利用

```
android:switchMinWidth="56dp"
android:thumb="@drawable/thumb"
android:track="@drawable/track" 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-09-25T16:19:15.920

我今天处理了一个类似的问题，我发现从 Jelly Bean 开始，您可以使用它`setSwitchMinWidth(width);`来设置完整开关的最小宽度。但是，我还认为，如果您的文本太大，则小部件会在左侧被切断。更改拇指上的默认文本填充在这里可能会派上用场， `setThumbTextPadding(num);`您可以对其进行修改。

唯一的问题——这实际上是一个障碍——到目前为止我偶然发现的是，当然应该根据父容器的大小来扩展开关。为此，我将开关包装在自定义线性布局中（它还为 API <= 15 提供了后备）并尝试了以下操作：

```
@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
    if (android.os.Build.VERSION.SDK_INT >= 16) {
        adaptSwitchWidth(w);
    }
}

@TargetApi(16)
private void adaptSwitchWidth(int containerWidth) {
    Switch sw = (Switch) compoundButton;
    sw.setSwitchMinWidth(containerWidth);
} 
```

不幸的是 - 无论出于何种愚蠢的原因 - 开关小部件对此没有反应。我试图在`OnLayoutChangeListener`没有成功的情况下做到这一点。理想情况下，在该状态下也应该知道开关的当前大小，我想将可用空间“分配”到填充，如下所示：

```
int textPadding = Math.max(0, (sw.getWidth() - containerWidth) / 4);
sw.setThumbTextPadding(textPadding); 
```

但`sw.getWidth()`仍然返回 0 in `onSizeChanged()`，可能是因为它仍然没有正确布局。是的，我们快到了……如果你偶然发现了什么，请告诉我:)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-06-26T18:15:00.433

轨道的高度不必从视觉上确定拇指/开关的整体高度。我在我的轨道可绘制形状中添加了一个透明笔触，这会导致轨道周围有一个填充：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">
    <solid android:color="@color/track_color"/>
    <size android:height="@dimen/track_height"  />
    <size android:width="@dimen/track_width"  />

    <!-- results in the track looking smaller than the thumb -->
    <stroke
        android:width="6dp"
        android:color="#00ffffff"/>
</shape> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-09-01T13:32:38.470

还有一个选项可以使用以下方法提供最小宽度`app:switchMinWidth`：

```
 <androidx.appcompat.widget.SwitchCompat
        android:id="@+id/nav_header_available_switch"
        style="@style/Widget.AppCompat.CompoundButton.Switch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:switchMinWidth="80dp"
        android:scaleY="1.3"
        tools:checked="true" /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-07T12:04:15.777

使用 SwitchCompat 代替 Switch 和 scaleX、sxaleY、padding 效果更好

```
<androidx.appcompat.widget.SwitchCompat
                android:id="@+id/switch_transport"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="15dp"
                android:scaleX="1.5"
                android:scaleY="1.5"/> 
```

# java - 删除文本末尾的空行

> ID：10173591
> 
> 赞同：0
> 
> 时间：2012-04-16T11:54:58.140
> 
> 标签：java, regex

我正在尝试创建一个方法，该方法删除字符串末尾的空行：

```
public static String deleteBlankLinesAtEnd(String input)
{
    input = trimToEmptyString(input);
    return input.replaceFirst("\\n{2,}\\z", "");
} 
```

但是，它似乎也删除了输入开头的空行。

我有一个小单元测试：

```
@Test
public void testDeleteBlankLinesAtEnd()
{
    assertEquals("hej", TextUtils.deleteBlankLinesAtEnd("hej\n\n"));
    assertEquals("hej\nhej", TextUtils.deleteBlankLinesAtEnd("hej\nhej\n\n"));
    assertEquals("hej\n\nhej", TextUtils.deleteBlankLinesAtEnd("hej\n\nhej\n\n"));
    assertEquals("\n\nhej\n\nhej", TextUtils.deleteBlankLinesAtEnd("\n\nhej\n\nhej\n\n"));
} 
```

3个第一个运行良好，最后一个失败。

**更新：**当然，trimToEmptyString() 是我的问题，因为它也会修剪开头..

```
public static String trimToEmptyString(String input)
{
    if (input == null)
    {
        return "";
    }
    return input.trim();
} 
```

因此，使用正则表达式的所有内容都运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:03:08.777

如何替换所有空白行，包括充满空格的行。

```
input.replaceFirst("\\n\\s+$", "\n") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:25:33.727

正则表达式看起来不错；我怀疑有问题`trimToEmptyString()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T11:58:13.513

你可以这样做：

```
public static String deleteBlankLinesAtEnd(String input)
{
    input = trimToEmptyString(input);
    return input.replaceFirst("\\n{2,}\\z$", "");
} 
```

`$`应该指示正则表达式匹配字符串末尾之前的任何内容。在这种情况下，它应该匹配字符串末尾之前的任何新行。

# mysql - 使用嵌套选择 MySQL 语句的错误

> ID：10173592
> 
> 赞同：0
> 
> 时间：2012-04-16T11:54:59.650
> 
> 标签：mysql

我目前正在尝试使用嵌套选择语句，但我的子查询正在生成`NULL`值。我究竟做错了什么？

```
SELECT filmid,datetime,title,description,
       (
          SELECT name 
          FROM fec_client 
          WHERE filmid = 'fec_film.filmid'
       ),
       (
          SELECT rating_motivation 
          FROM fec_rating_report 
          WHERE filmid = 'fec_film.filmid'
       ) 
FROM fec_film 
ORDER BY datetime DESC 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T11:58:40.547

删除引号，否则您不是在与 SQL 中的值进行比较，而是与字符串进行比较

```
SELECT filmid, datetime, title, description, 
    ( SELECT name FROM fec_client WHERE filmid = fec_film.filmid ) AS name,
    ( SELECT rating_motivation FROM fec_rating_report WHERE filmid = fec_film.filmid ) AS rating   
FROM fec_film ORDER BY datetime DESC 
```

ps 你也可以使用'AS'关键字来命名这些列

# c# - 将类型化数组传递给泛型函数？

> ID：10173594
> 
> 赞同：0
> 
> 时间：2012-04-16T11:55:23.207
> 
> 标签：c#, generics, collections

我有一个集合`IQueryable<Car>`，我想将它传递给一个作为参数接收的通用函数，`IQueryable<T>`比如（它位于基类中）。

```
public abstract class  BaseController<T> : ControllerBase  where T : BaseObj, new()
{
    public IQueryable<T> FilterEntities(IQueryable<T> entities)
    {
    }
} 
```

传递这个的正确方法是什么？投掷？安全演员？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:58:13.960

```
public IQueryable<TQueryable> FilterEntities<TQueryable>(
    IQueryable<TQueryable> entities)
{
} 
```

您需要使该方法成为泛型方法（括号之前的函数名称后的**<T>**告诉编译器该方法是泛型的）。

方法的类型参数`TQueryable`与类类型不同。如果您不希望它对您的方法签名应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T12:04:19.767

你的问题是你的方法不是通用的，类是。请注意，在此之后没有`<T>`方法名称，这意味着您必须传入一个 IQueryable，该 IQueryable 是您为该类的类型参数使用过的内容。

例如，如果对象是这样实例化的：

```
new BaseController<BaseObject>(..) //ignoring that BaseController is abstract 
```

`IQueryable<BaseObject>`在您希望传入`IQueryable<Car>`控制器类型需要从中派生的情况下，您需要传递一个so`BaseController<Car>`

另一方面，如果您希望该方法是通用的，则将该方法的签名更改为

```
public IQueryable<TElement> FilterEntities<TElement>
            (IQueryable<TElement> entities) 
```

不包括您在类的类型参数上对 T 的类型约束。如果应该对通用方法强制执行此操作，则签名需要：

```
public IQueryable<TElement> FilterEntities<TElement>(IQueryable<TElement> entities) 
            where TElement : BaseObj, new() 
```

**编辑** 如果您希望有一个简单地使用 T 作为类型参数的“默认”方法，您必须将其实现为非泛型方法，就像您在代码中使用的那样，因此该类将是：

```
 public abstract class  BaseController<T> : ControllerBase  
                where T : BaseObj, new()
  {

     public IQueryable<T> FilterEntities(IQueryable<T> entities)
     {
            return FilterEntities<T>(entities);
     }

     public IQueryable<TElement> FilterEntities<TElement>(IQueryable<TElement> entities) 
                where TElement : BaseObj, new()
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:02:35.417

定义 FilterEntities 如下

```
public IQueryable<T> FilterEntities<T>(IQueryable<T> entities)
{
} 
```

现在你可以通过 IQueryable 如下

```
 IQueryable<Car> x = null; //Initialize it
    FilterEntities<Car>(x); 
```

# java - xhtml调用servlet不返回响应，不调用servlet

> ID：10173598
> 
> 赞同：-1
> 
> 时间：2012-04-16T11:55:32.270
> 
> 标签：java, servlets, xhtml

我正在尝试从表单中调用 servlet。我在调用 servlet 的 Web 应用程序中有 xhtml，但未显示来自 servlet 的响应。按下提交按钮后会显示原始的 xhtml。我为 servlet 响应尝试了不同的替代方案，但每次都得到相同的结果。

xhtml:

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
xmlns:f="http://java.sun.com/jsf/core" 
xmlns:h="http://java.sun.com/jsf/html"
xmlns:c="http://java.sun.com/jsp/jstl/core"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:ejstreegrid="https://unfccc.int/nais/ejstreegrid"
xmlns:grid="http://java.sun.com/jsf/composite/gridcomp"
xmlns:nais="http://java.sun.com/jsf/composite/naiscomp">
<body>
<ui:composition template="/templateForm.xhtml">
<ui:define name="title">Some title</ui:define>
<ui:param name="currentPage" value="somepage.xhtml" />
<ui:define name="body">
<h2>the name to be added</h2><br/><br/>
<form action="someServlet" method="post">
<input type="text" name="someName" />
<input type="submit" />
</form>
</ui:define>
</ui:composition>
</body> 
</html> 
```

Web 应用程序中的 servlet 被调用：

```
package netgui.servlet;

import java.io.IOException;
import java.util.Enumeration;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class someServlet extends HttpServlet {
private static final long serialVersionUID = 1L;

public someServlet() {
super();
}

protected void doGet(HttpServletRequest request,
HttpServletResponse response) throws ServletException, IOException   {
processRequest(request, response);
}

protected void doPost(HttpServletRequest request,
HttpServletResponse response) throws ServletException, IOException {
processRequest(request, response);
}

private void processRequest(HttpServletRequest request,
HttpServletResponse response) throws IOException {

try {
response.getWriter().write("some response");
} catch (Exception e) {
logger.error(e.getMessage());
e.printStackTrace();
response.getWriter().println("Error: " + e.getMessage());
}}} 
```

我还有一个 menu.xhtml 正在调用 xhtml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:c="http://java.sun.com/jsp/jstl/core"
xmlns:ui="http://java.sun.com/jsf/facelets">

<body>
<script type="text/javascript">
$(document).ready(function() {
$("#btn").click(function() {
$("#upload").click(); 
return false; 
}); 
});
</script>   
<ui:composition>
<div id="navigation_bar">
<ul id="topbarleft">
<c:choose>                  
<c:when test="${currentPage=='somepage.xhtml'}">
<li><b>Other (Please Specify) Two</b></li>
</c:when>
<c:otherwise>
<li><h:outputLink value="somepage.jsf">
<h:outputText value="some page" />
</h:outputLink></li>
</c:otherwise>
</c:choose>
</ul>
</div>
</ui:composition>
</body>
</html> 
```

有什么想法可能是错的吗？jsf中是否有一些特殊的格式可以将表单提交给servlet？带小脸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:50:20.513

问题是我在 facelets 中使用模板，同时还使用表单调用 servlet。

```
xmlns:ui="http://java.sun.com/jsf/facelets"

<ui:composition template="/templateForm.xhtml">

<form action="someServlet" method="post"> 
```

模板有它自己的 h:form 标签，所以当我添加另一个表单来调用 servlet 时，我最终会得到一个不允许的表单中的表单。这就是为什么我的 servlet 没有被调用的原因。我通过从模板中删除 h:form 标记来修复它，现在我的 servlet 正在被调用。

# jmeter - 我的 JMeter 脚本在 while 循环后停止执行

> ID：10173599
> 
> 赞同：1
> 
> 时间：2012-04-16T11:55:43.943
> 
> 标签：jmeter

我的 jmeter 脚本在执行 while 循环后停止执行，进一步的操作被中止并且脚本被暂停。我使用 ${lineNo} 作为 while 的条件，${lineNo} 是 .csv 文件中第一列的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:13:57.273

您可能在 CSV 配置中将 EOF 上的停止线程设置为 true，将其更改为 false。

# javascript - jQuery - 检查正确的时间格式

> ID：10173614
> 
> 赞同：3
> 
> 时间：2012-04-16T11:56:28.587
> 
> 标签：javascript, jquery

我有一个输入字段，用户在其中输入格式 mm:hh 的时间。格式在字段内指定（默认值 09:00），但我仍想执行客户端检查以查看格式是否正确。

由于现有的客户端验证在 jQuery 中，我也想在 jQuery 中保留它。

我主要是一名 PHP 程序员，所以我需要一些帮助以最佳方式编写这个。

我知道我可以检查每个单独的字符（前两个 = 数字，第三个 = ':'，最后两个 = 数字）但是有没有办法更优雅地做到这一点，同时检查小时数不大于 23 和分钟计数不大于 59？

在 PHP 中我会使用正则表达式，我假设 jQuery 有类似的东西？

这样的事情对我来说很有意义：

```
([01]?[0-9]|2[0-3]):[0-5][0-9] 
```

但我对 jQuery 语法不太熟悉，所以我不确定如何处理它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T11:59:59.123

你也可以在 JavaScript 中使用正则表达式：

[http://www.w3schools.com/jsref/jsref_obj_string.asp](http://www.w3schools.com/jsref/jsref_obj_string.asp)

使用 .search() - [http://www.w3schools.com/jsref/jsref_search.asp](http://www.w3schools.com/jsref/jsref_search.asp)

或 .match() - [http://www.w3schools.com/jsref/jsref_match.asp](http://www.w3schools.com/jsref/jsref_match.asp)

或 .replace() - [http://www.w3schools.com/jsref/jsref_replace.asp](http://www.w3schools.com/jsref/jsref_replace.asp)

**编辑：**

```
<script>
    var regexp = /([01][0-9]|[02][0-3]):[0-5][0-9]/;
    var correct = ($('input').val().search(regexp) >= 0) ? true : false;
</script> 
```

**编辑2：**

这里是 javascript 中 regexpobject 的文档：

[http://www.w3schools.com/jsref/jsref_obj_regexp.asp](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)

```
<script>
    var regexp = /([01][0-9]|[02][0-3]):[0-5][0-9]/;
    var correct = regexp.test($('input').val());
</script> 
```

**编辑3：**

修复了正则表达式

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T12:03:00.327

在 JavaScript 中，正则表达式由 . 分隔`/`。所以你会做...

```
var isValidTime = /([01]?[0-9]|2[0-3]):[0-5][0-9]/.test(inputString); 
```

您的正则表达式似乎对以 HH:mm 格式验证任何 24H 时间有意义。但是，正如我在 Andreas 的回答下的评论中所说的那样 - 如果字符串的*任何部分*匹配，这将返回 true。要使其验证整个字符串，请使用锚点来匹配字符串的开头和结尾，例如...

```
var isValidTime = /^([01]?[0-9]|2[0-3]):[0-5][0-9]$/.test(inputString); 
```

要实际拉取匹配项，您需要使用[`string.match`](http://www.regular-expressions.info/javascript.html)JS 函数。

哦 - 请注意 jQuery*是*Javascript - 它只是一个非常有用的库！但是，此示例不包含对 jQuery 库的引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T12:00:34.620

在 JavaScript 中，您可以使用[`yourstring.match(regexp)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)正则表达式匹配字符串。

我的正则表达式经验非常有限，所以我无法帮助你解决这个问题，但如果你有那一套`.match()`，就足够了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-02T21:20:28.357

一种不同的方法，但使用额外的 javascript 库而不是正则表达式：

```
var valid = moment(timeStr, "HH:mm", true).isValid(); 
```

我想如果你已经在你的项目中使用[了 moment.js](http://momentjs.com/)，那就没有缺点了。

而且由于您没有专门使用正则表达式请求答案，我认为值得一提。

# ext4 - 哪个linux文件系统更适合服务于视频文件流？

> ID：10173616
> 
> 赞同：1
> 
> 时间：2012-04-16T11:56:34.623
> 
> 标签：ext4, xfs

目前我在 XFS、ReiserFS 和 ext4 中进行选择，不确定哪个会更好。

我的应用程序是一个视频点播服务，有数千个视频文件。

有什么建议么？

# css - 将此 CSS 样式应用于 gridview

> ID：10173620
> 
> 赞同：0
> 
> 时间：2012-04-16T11:56:59.117
> 
> 标签：css, asp.net, .net, gridview, html-table

我有这个手动创建的表，我想使用 gridview 生成数据而不是使用表，该表的四个角都有圆角。

```
<table border="0"  id="rounded-corner">
<thead>
<tr>

<th scope="col" class="rounded-company">#</th>
<th>RegNum</th>
<th class="rounded-q4">Actions</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="rounded-foot-left">Summary</td>
<td>10</td>
<td  class="rounded-foot-right">some text</td>
</tr>
</tfoot> 
```

是否可以使用 gridview 并仍然获得我想要的表格外观？

编辑

这是表格的 CSS：

```
/* table */
#rounded-corner
{
    font-family: "Lucida Sans Unicode", "Lucida Grande", Sans-Serif;
    font-size: 12px;    margin: 10px;   width: 571px;
    text-align: left;   border-collapse: collapse;
}
#rounded-corner thead th.rounded-company
{
    background: #b9c9fe url('images/left.png') left -1px no-repeat;
}
#rounded-corner thead th.rounded-q4
{
    background: #b9c9fe url('images/right.png') right -1px no-repeat;
}
#rounded-corner th
{
    padding: 8px;   font-weight: normal;
    font-size: 13px;    color: #039;
    background: #b9c9fe;
}
#rounded-corner td
{
    padding: 8px;   background: #e8edff;
    border-top: 1px solid #fff;     color: #669;
}
#rounded-corner tfoot td.rounded-foot-left
{
    background: #e8edff url('images/botleft.png') left bottom no-repeat;
}
#rounded-corner tfoot td.rounded-foot-right
{
    background: #e8edff url('images/botright.png') right bottom no-repeat;
}
#rounded-corner tbody tr:hover td 
{
    background: #d0dafd;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:05:55.313

使用中继器

```
<table border="0"  id="rounded-corner">
<thead>
<tr>
<th scope="col" class="rounded-company">#</th>
<th>RegNum</th>
<th class="rounded-q4">Actions</th>
</tr>
</thead>

<tbody>
    <asp:Repeater runat="server" id="rpt_table1">
    <ItemTemplate>
    <tr>
        <td><%# Eval("foo1")%></td>
        <td><%# Eval("foo2")%></td>
        <td><%# Eval("foo3")%></td>
        <td><asp:Button CommandArgument='<%# Eval("id") %>' OnCommand="btnedit_command" ID="btnedit" Text="Edit" /></td>
    </tr>
    </ItemTemplate>
    </asp:Repeater>
</tbody>

<tfoot>
<tr>
<td class="rounded-foot-left">Summary</td>
<td>10</td>
<td  class="rounded-foot-right">some text</td>
</tr>
</tfoot>

</table> 
```

关于 .cs 后面的代码

```
 protected void btnedit_command(object sender, CommandEventArgs e)
    {
        // this is command argument value (ID) --> e.CommandArgument
    } 
```

# c++ - 覆盖现有类的运算符

> ID：10173623
> 
> 赞同：4
> 
> 时间：2012-04-16T11:57:07.183
> 
> 标签：c++, oop

我追求两件事。我首先想将`vector`类键入更有意义的东西，例如`List`. 我尝试了以下方法，但它给了我一个编译错误：

```
template <typename T>
typedef vector<T> List<T> 
```

其次，我想覆盖类的`<<`运算符`vector`，但我不知道如果不创建新类我将如何去做。

这可能看起来适得其反，但我的最终目标是让非程序员（或以前没有使用过 c++ 的人）可以阅读具有语义意义的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T12:57:12.370

如果这样做，非程序员仍然无法阅读，更不用说更改代码了。但是，C++ 程序员在阅读代码时也会遇到很多麻烦。

如果他们不会编码，并且需要 C++ 程序员为他们编写代码，那么他们将需要 C++ 程序员来理解、维护和扩展第一个 C++ 程序员编写的代码。

如果，OTOH，他们需要用 C++ 编写代码，那么——*惊喜！*— 他们将不得不学习编写和阅读 C++ 代码。

两者之间真的没有什么。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T12:08:47.333

C++中没有 template `typedef`，但你可以`using`在 C++11 中使用。

```
template<class T>
using List = std::vector<T>;
// ...
List<int> foo; // aka std::vector<int> foo; 
```

* * *

可以在不修改类的情况下完成运算符重载。

```
template<class T>
std::vector<T>& operator<<(std::vector<T>& vec, const T& value) {
  vec.push_back(value); // or whatever you want to do.
  return vec;
} 
```

只要把它放在某个地方，它就应该可以工作，即使在`std::vector`.

# java - 丰富的服务器端侦听器：dataScroller (RF 4.1)

> ID：10173624
> 
> 赞同：0
> 
> 时间：2012-04-16T11:57:08.113
> 
> 标签：java, jsf-2, richfaces

我使用的是`extendedDataTable`因为我需要多选。表格可能会变得非常大，所以我使用的`dataScroller`是分页。

我想要实现的是，切换到另一个页面时会清除选择。选择存储在支持 bean 中，我有一个`clearTableSelection`清除选择的方法。

现在我的问题是，如何`clearTableSelection`在切换页面时调用该方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:00:42.750

我找到了一个简单的解决方案：

```
...
<rich:extendedDataTable>
    ...
    <f:facet name="footer">
        <rich:dataScroller 
            onbegin="document.getElementById('form:hiddenButton').click()" />
    </f:facet>
</rich:extendedDataTable>
<a4j:commandButton 
    id="hiddenButton" action="#{backingBean.clearTableSelection}"
    value="HiddenButton" execute="@this" style="display: none;" />
... 
```

# c# - 硬件特性的哪些使用来生成软件锁？

> ID：10173627
> 
> 赞同：1
> 
> 时间：2012-04-16T11:57:28.633
> 
> 标签：c#, java, wmi

我想在 Windows 中用 wmi 创建一个软件锁。我检查了非常硬件字符，例如：processorId，SerialNumber(HDisk)，MaxClockSpeed，...

但是有些这个字符在不同的系统上是没用的。

在所有系统上运行软件锁定的硬件字符的哪些用途？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:13:14.793

简短的回答：没有。

用户总是可以让软件在虚拟机中运行，从而伪造整个硬件。另一方面，合法用户可能会升级他们的机器（例如更换主板或硬盘），这可能会导致任何硬件参数的变化，这会导致愤怒的客户，因为他们必须联系你以获得他们的合法版本再次进入运行状态。

如果您确实需要某种难以破解的锁定，请使用 USB 加密狗，但如果客户要求丢失加密狗，请考虑一种策略。

# google-chrome-extension - 在弹出窗口中显示特定的源代码行

> ID：10173628
> 
> 赞同：1
> 
> 时间：2012-04-16T11:57:33.610
> 
> 标签：google-chrome-extension

我对整个 chrome 扩展世界非常陌生。

我已通读教程“hello world”页面，并试图了解 content_scripts 和 background.html - 但我可能服用过量，似乎无法找到答案，我确信这是一项简单的任务。

在选项卡中，站点包含以下隐藏的 HTML：

```
<div class="XYZ">
<input id="form_ID" type="hidden" value="REF_CODE#Product_CODE#Product Name#">
</div> 
```

我想弄清楚的是如何显示

*   参考代码
*   产品代码
*   产品名称

在 popup.html 中

我不是在考虑编辑 html 或以任何方式操作它。它只是在一个易于阅读的弹出窗口中显示隐藏的 HTML。

希望这是有道理的..

提前致谢。

**更新：**

弹出窗口.html

```
<html>
<head>
<script>
function readIds() {
    console.log('Send request to content script');
    document.getElementById("response").innerText = "Requesting...";
    chrome.tabs.getSelected(null,function(tab){
       chrome.tabs.sendRequest(tab.id, {cmd: "readIds"}, function(response){
        console.log('Response from page is:' + response);
        document.getElementById("response").innerText = JSON.stringify(response);
        });
    });
}
</script>
</head>
<body style="width:400px;">
<a href="javascript:readIds();return false;">Click to read ids</a>
<pre id="response"></pre>
</body>
</html> 
```

内容脚本.js

```
// add a listener to get messages from background, popup
chrome.extension.onRequest.addListener(function (request, sender, sendResponse) {
        switch (request.cmd) {
            case "readIds":
                console.log("readIds", request);
                document.getElementById("productID");
                sendResponse({refCode:1, productCode: 2, productName: 3});
                break;
        }
}); 
```

清单.json

```
{
  // Required
  "name": "WP Debug",
  "version": "0.0.1",

  // Recommended
  "description": "A plain text description",
  "icons": { "48": "icon.png" },
  //"default_locale": "en",

  // Pick one (or none)
  "browser_action": {
    "default_icon": "icon.png", // optional
    "default_title": "WP Debug",      // optional; shown in tooltip
    "popup": "popup.html"
    },

  "permissions": [ "http://*/", "https://*/", "tabs" ],

  "content_scripts": [
    {
      "matches": ["http://*/*", "https://*/*"],
      "js": ["content_script.js" ],
      "run_at": "document_idle"
    }
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:54:55.547

您的弹出窗口需要向您的内容脚本发送一条消息，然后收集隐藏字段信息并将响应发送回弹出窗口。

这是一个例子：

popup.html

```
<html>
<head>
<script>
function readIds() {
    console.log('Send request to content script');
    document.getElementById("response").innerText = "Requesting...";
    chrome.tabs.getSelected(null,function(tab){
        chrome.tabs.sendRequest(tab.id, {cmd: "readIds"}, function(response){
            console.log('Response from page is:' + response);
            document.getElementById("response").innerText = JSON.stringify(response);
        });
    });
}
</script>
</head>
<body style="width:400px;">
<a href="javascript:readIds();return false;">Click to read ids</a>
<pre id="response"></pre>
</body>
</html> 
```

content_script.js

```
// add a listener to get messages from background, popup
chrome.extension.onRequest.addListener(function (request, sender, sendResponse) {
        switch (request.cmd) {
            case "readIds":
                console.log("readIds", request);
                //TODO: Get real values to send from page
                //e.g. document.getElementById("someid") etc
                sendResponse({refCode:1, productCode: 2, productName: 3});
                break;
        }
}); 
```

mainfest.json

```
{
  // Required
  "name": "Foo Extension",
  "version": "0.0.1",

  // Recommended
  "description": "A plain text description",
  "icons": { "48": "foo.png" },
  //"default_locale": "en",

  // Pick one (or none)
  "browser_action": {
    "default_icon": "Foo.png", // optional
    "default_title": "Foo Extension",      // optional; shown in tooltip
    "popup": "popup.html"
    },

  "permissions": [ "http://*/", "https://*/", "tabs" ],

  "content_scripts": [
    {
      "matches": ["http://*/*", "https://*/*"],
      "js": ["content_script.js" ],
      "run_at": "document_idle"
    }
    ]
} 
```

请参阅文档：[http ://code.google.com/chrome/extensions/messaging.html](http://code.google.com/chrome/extensions/messaging.html)

# c++ - 类模板，预期的构造函数，析构函数

> ID：10173630
> 
> 赞同：1
> 
> 时间：2012-04-16T11:57:43.983
> 
> 标签：c++, class, templates, constructor

好的，这是我的头文件（或至少部分）：

```
template<class T>

class List
{
public:
.
:
List& operator= (const List& other);
.
:
private:
.
:
}; 
```

这是我的 .cc 文件：

```
template <class T>
List& List<T>::operator= (const List& other)
{
    if(this != &other)
    {
        List_Node * n = List::copy(other.head_);
        delete [] head_;
        head_ = n;
    }
    return *this;
} 
```

在线`List& List<T>::operator= (const List& other)`我得到编译错误“预期的构造函数、析构函数或在'&'标记之前的类型转换”。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:03:51.703

`List&`没有模板参数就不能使用返回类型。它需要是`List<T>&`。

```
template <class T>
List<T>& List<T>::operator= (const List& other)
{
   ...
} 
```

但是请注意，即使您修复了这个语法错误，您也会遇到链接器问题，因为模板函数定义需要放在头文件中。请参阅[为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)了解更多信息。

# php - 如何将输入值从一个php页面传递到另一个php页面

> ID：10173631
> 
> 赞同：1
> 
> 时间：2012-04-16T11:58:00.673
> 
> 标签：php, mysql, html, css

我必须将一些输入值存储在数据库（mysql）中。
比如名字，姓氏，电话号码，手机号码等。

使用选择查询，我可以从数据库中获取所有记录并显示在一个网页中。
在网页中使用鼠标单击一组记录并（在 href 链接的帮助下）打开另一个网页并显示选定（单击）记录集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:00:08.447

您可以跨 URL 使用 $_GET 函数。否则，您可以创建会话或 cookie 并存储有关用户的信息。

$_GET 使用来自 URL 的数据。您首先使用问号定义它，然后是变量名，后跟等号，然后是值。您可以添加由“和”符号分隔的多个变量。您可以使用它跨页面传输数据。例如，您可以创建需要链接的变量列表，然后创建 URL 结构：

```
$firstname = "Jane";
$lastname = "Doe";
$phone = "0123456789";
$mobile = "9876543210";
$URL = "secondpage.php?firstname=".$firstname."&lastname=".$lastname."&phone=".$phone."&mobile=".$mobile; 
```

这意味着，在这些情况下，$URL 将回显为“secondpage.php?firstname=Jane&lastname=Doe&phone=0123456789&mobile=9876543210”。您可以链接到此 URL，然后在 secondpage.php 上您可以获取如下变量：

```
$firstname = $_GET['firstname'];
$lastname = $_GET['lastname'];
$phone = $_GET['phone'];
$mobile = $_GET['mobile']; 
```

但是，有些人可能认为这很混乱，或者您可能不希望您的用户能够编辑这些值。如果他们编辑 URL，他们可能能够更改页面的运行方式或注入恶意代码。要解决这个问题，您可以改用 $_SESSION 函数，此数据存储在服务器上并且无法更改。

为此，您需要在两个页面上使用以下功能开始会话：

```
session_start(); 
```

然后，您可以像这样在第一页上定义变量：

```
$_SESSION['firstname'] = "Jane";
$_SESSION['lastname'] = "Doe";
$_SESSION['phone'] = "0123456789";
$_SESSION['mobile'] = "9876543210"; 
```

然后您就可以在整个站点中调用这些变量。唯一的问题是会话可能会用完并且可能需要重新定义。您可以像使用任何其他变量一样使用公共变量，唯一的区别是它们对服务器是全局的。

```
echo "Welcome back, ".$_SESSION['firstname']."!"; //echos as "Welcome back Jane!" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T12:00:20.633

您可以使用内置数组，如`$_SESSION`or`$_GET`或`$_REQUEST`

[看一看](http://php.net/manual/en/reserved.variables.request.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T12:04:49.797

第一页使用普通表单元素

```
<form action="page2.php" method="post">
     <input type="text" name="name" value="">
     <input type="password" name="password" value="">
     <input type="submit" value="save"> 
</form> 
```

在 page2.php

```
echo $_POST['name'];
echo $_POST['password']; 
```

这样你就可以将值从一个页面传递到另一个页面

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T12:03:43.027

使用 $_GET 但如果您想根据用户在许多页面中使用相同的内容，请使用 $_SESSION

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T12:07:14.337

所以你想说的是，

1.  您想要一个母版集页面；这将列出 Person 的所有记录（我想）
2.  然后你需要一个母版页上的链接；诸如“查看详细信息”之类的内容将链接到另一个页面，尤其是其详细信息集，它将显示单击的特定人员的详细信息。

只需列出母版页中的所有人员；为详细信息页面制作动态链接，例如，

```
<a href='view_details.php?person_id=<?=$person_id?>'>Vew Details</a> 
```

因此，在 view_details.php 中添加代码，将利用这个 $_GET 变量 'person_id' 通过查询从数据库中访问它的信息；你会像 $_GET['person_id']... 那样访问它。我假设 person_id 作为主键。当然，您正在开始使用 PHP。祝你好运！检查[一下](http://www.nebulex.com/index.php?option=com_content&view=article&id=31&Itemid=67)，我猜他们也在提供源代码。

# php - Facebook 使用 facebook 登录按钮插件与网站集成并将用户凭据存储到数据库

> ID：10173633
> 
> 赞同：0
> 
> 时间：2012-04-16T11:58:06.060
> 
> 标签：php, facebook

我正在使用 Facebook[登录](http://developers.facebook.com/docs/reference/plugins/login/)按钮在我的网站中与 facebook 集成。但是，我不知道如何在通过 facebook 登录时将用户名等（facebook 上的用户数据）从 facebook 保存到我的数据库中。如何做到这一点？

目前，当点击facebook登录按钮时，会打开一个窗口，我们可以输入facebook用户名和密码，它就会被连接。

如何在登录时进入 php 部分以在 facebook 上存储用户数据，如果已经存在登录到站点而不存储任何数据？

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=987654321";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

   // facebook login button

<div class="fb-login-button" data-show-faces="false" data-width="200" data-max-rows="1" ></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:24:07.830

请下载 facebook php sdk。

以下是连接到 facebook 的示例。

```
<?php session_start();
require 'src/facebook.php';
$facebook = new Facebook(array(
  'appId'  => 'YOUR_APP_ID',
  'secret' => 'YOUR_APP_SECRET',
));

// See if there is a user from a cookie
$user = $facebook->getUser();
//$session = $facebook->getSession();
if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    //echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>';
    $user = null;
  }
}
?>

<!DOCTYPE html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
  <body>
    <?php if ($user) { 
    foreach($user_profile as $skey => $sval)
    {
        $_SESSION["$skey"]=$sval;   
    }   
    $_SESSION['fb_name']=$user_profile['name']; //get facebook username and set it in session
    $_SESSION['fb_id']=$user_profile['id']; //get facebook id and set it in session
    $logoutUrl = $facebook->getLogoutUrl();
    $_SESSION['fb_logout']= $logoutUrl;

     ?>
      <pre>            
        <?php //print htmlspecialchars(print_r($user_profile, true)) ?>
      </pre> 
    <?php } else { ?>
      <fb:login-button></fb:login-button>
    <?php } ?>
    <div id="fb-root"></div>
    <script>               
      window.fbAsyncInit = function() {
        FB.init({
          appId: '<?php echo $facebook->getAppID() ?>', 
          cookie: true, 
          xfbml: true,
          oauth: true
        });
        FB.Event.subscribe('auth.login', function(response) {
    window.location.href="index.php";
          //window.location.reload();
        });
        FB.Event.subscribe('auth.logout', function(response) {
          window.location.reload();
        });
      };
      (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
          '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
      }());
    </script>
  </body>
</html> 
```

在登录部分检查这样

```
if(isset($_SESSION['fb_id'])) {
//check whether the entry for this fb_id already exists in db
//if not exists insert id and name into db, else get username from db for this fb_id
} 
```

# jquery - .render 不是一个函数，在 jquery 中使用模板

> ID：10173642
> 
> 赞同：1
> 
> 时间：2012-04-16T11:58:35.837
> 
> 标签：jquery, templates, render, tmp

我在 masterPage 中有我的模板，然后我有一个带有 userControl.ascx 的 webpart，我假装通过这个 userControl 通知模板的不同字段。

这是我在 masterPage.master 中的模板：

```
<script id="GroupDiscussionsTemplate" type="text/x-jquery-tmpl">

        <div id="discussion-with-comments-wrapper_{{=_DiscussionId}}">

            <div class="subsection theme-header">
                <div class="wrapper">
                    <div class="gray-arrow"></div>
                    <div class="avatar clearfix">
                        <div class="thumbnail-wrapper">
                            <a href="{{=AdminProfileUrl}}"><img class="thumbnail" src="{{=AdminImage}}"/></a>
                        </div>
                    </div>

                    <div class="theme-content">
                        <p class="title"><a href="{{=url}}">{{=Name}}</a>
                            {{#if _Active !== true}}
                                <asp:Literal runat="server" Text="<%$Resources:ADNResource,NoActiveGroup%>"/> 
                            {{/if}}
                        </p>
                        <p>{{=CreatedDate}}</p>

                        <p><a class="name" href="{{=AdminProfileUrl}}">{{=AdminName}}</a> | {{=AdminLocation}} | Rnk: {{=AdminPoints}}</p>

                        <p>
                            {{=Description}}
                        </p>
                        <div class="recommend">                                                                       
                            <iframe src="//www.facebook.com/plugins/like.php?href={{=UniqueUrl}}&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:21px;" allowTransparency="true"></iframe>
                        </div>
                        <div id=inapropiatedCmnt_{{=_DiscussionId}} class="commentinapropiate discussionInapropiate">
                            <div class="icon-sprite icon-alert"></div>
                            <asp:Literal runat="server" Text=" <%$Resources:ADNResource,InapropiatedComment%>"/> 
                        </div> 
                        {{#if _IsCurrentUserOwner}}
                            {{#if _Active eq='true'}}
                                <div id="deleteDiscussion_{{=_DiscussionId}}" class="delete-link button-secondary-L-S"><asp:Literal runat="server" Text=" <%$Resources:ADNResource,Delete%>"/> </div>
                            {{/if}}
                        {{/if}}  

                   </div>                 
                </div>
            </div>

            <div id="AddCommentBox" class="AddCommentBox subsection theme" style="display:none;">
                <div class="wrapper">
                    <textarea class="txtComment" id="txtComment_{{=_DiscussionId}}" rows="3" cols="65" />
                    <div class="button-L-S btnComment" id="btnComment_{{=_DiscussionId}}">
                        <asp:Literal runat="server" Text="<%$Resources:ADNResource,Comment%>"/> 
                    </div>
                </div>
            </div>

            <div class="commentsWrapper" id="Comments_{{=_DiscussionId}}">            
                {{#if Activities}}                                                               
                    {{#each Activities}}  
                        <div class="comment subsection theme">                                 
                            <div class="wrapper">
                                {{#if titleHeader}}
                                    <p class="title">{{=titleHeader}}</p>
                                {{/if}}

                                <div class="avatar clearfix">
                                    <div class="thumbnail-wrapper">
                                        <img class="thumbnail" src="{{=UserImage}}" />
                                    </div>
                                </div>

                                <div class="theme-content">
                                    <a class="name" href="{{=UserProfileUrl}}">{{=UserName}}</a>

                                    <p>{{=Comment}}</p>

                                    <div class="recommend"> 
                                        <iframe src="//www.facebook.com/plugins/like.php?href={{=UniqueUrl}}&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:21px;" allowTransparency="true"></iframe>
                                    </div>

                                    <div id=inapropiatedCmnt_{{=_Id}} class="commentinapropiate">
                                        <div class="icon-sprite icon-alert"></div>
                                        <asp:Literal runat="server" Text=" <%$Resources:ADNResource,InapropiatedComment%>"/> 
                                    </div>

                                    {{#if _IsCurrentUserOwner}}
                                        <div id="deleteComment_{{=_Id}}" class="delete-link button-secondary-L-S"><asp:Literal runat="server" Text=" <%$Resources:ADNResource,Delete%>"/> </div>
                                    {{/if}}

                                </div>    
                            </div>                 
                        </div>
                    {{/each}}
                {{else}}
                            <div class="comment subsection theme">
                                <div class="wrapper">
                                    <asp:Literal runat="server" Text=" <%$Resources:ADNResource,NoCommentsYet%>"/> 
                                </div>
                            </div>
                {{/if}}
            </div>

        </div>

</script>

<script id="GroupDiscussionsComentsTemplate" type="text/x-jquery-tmpl">            
    <div class="comment subsection theme" id="comment_{{=_Id}}" style="display:none;">                                 
        <div class="wrapper">
            {{#if titleHeader}}
                <p class="title">{{=titleHeader}}</p>
            {{/if}}

            <div class="avatar clearfix">
                <div class="thumbnail-wrapper">
                    <img class="thumbnail" src="{{=UserImage}}" />
                </div>
            </div>

            <div class="theme-content">
                <a class="name" href="{{=UserProfileUrl}}">{{=UserName}}</a>

                <p>{{=Comment}}</p>

                <div class="recommend">   
                    <iframe src="//www.facebook.com/plugins/like.php?href={{=UniqueUrl}}&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:21px;" allowTransparency="true"></iframe>
                </div>

                <div id=inapropiatedCmnt_{{=_Id}} class="commentinapropiate">
                    <div class="icon-sprite icon-alert"></div>
                    <asp:Literal runat="server" Text=" <%$Resources:ADNResource,InapropiatedComment%>"/> 
                </div>

                {{#if _IsCurrentUserOwner}}
                    <div id="deleteComment_{{=_Id}}" class="delete-link button-secondary-L-S"><asp:Literal runat="server" Text=" <%$Resources:ADNResource,Delete%>"/> </div>
                {{/if}}

            </div>    
        </div>
    </div>
</script>

<script id="GroupDiscussionsTemplateNoResults" type="text/x-jquery-tmpl">
    <div class="subsection">
        <div class="wrapper">
            <asp:Literal runat="server" Text="<%$Resources:ADNResource,NoDiscussionsForThisGroup%>"/>
        </div>
    </div>        
</script> 
```

我使用函数 .render 通过以下代码通知此模板的某些字段：

```
function displayGroupDiscussions(param_group, maxDiscussions) {
        iDiscussions = 0;

        showLoading();
        $.getJSON("/_layouts/getDiscussions.ashx",
            {
                groupId: param_group,
                startIndexDiscussions: iDiscussions,
                numberOfDiscussions: maxDiscussions
            },
                function (data) {
                    if(data.CallOk) {
                        if (data.Data != null) {
                            if (data.Data.length > 0) {
                                $('#groupDiscussionsBox').html(
                                    $('#GroupDiscussionsTemplate').render(data.Data)
                                );
                            } else {
                                $('#groupDiscussionsBox').html(
                                    $("#GroupDiscussionsTemplateNoResults").render()
                                );
                                $('div#more').remove();
                            }
                        } else {
                            $('#groupDiscussionsBox').html(
                                $("#GroupDiscussionsTemplateNoResults").render()
                            );
                            $('div#more').remove();
                        }
                    } else { 
                        $('#groupDiscussionsBox').html(data.Message);
                    }
                }
            ).complete(
                function () {
                    hideLoading();

                    if(<%= ParentWebPart.CanAddComments.ToString().ToLower() %>){
                        $('.AddCommentBox').show();

                        $('.btnComment').click( function() { 
                            var discId = this.id.split("_")[1];
                            var commentText = $('textarea#txtComment_' + discId).val();
                            addCommentToDiscussion(discId, commentText);
                        });
                    }

                    $('.discussionInapropiate').click( function() { 
                        var discId = this.id.split("_")[1];
                        reportInapropiate(discId, "Discussion");
                        $('#' + this.id).hide('slow');
                    });
                    $('.commentinapropiate').click( function() { 
                        var discId = this.id.split("_")[1];
                        reportInapropiate(discId, "DiscussionComment");
                        $('#' + this.id).hide('slow');
                    });

                    $('.delete-link').click( function() {                         
                        deleteDiscussionItem(this.id);
                    });
                }
            );
    } 
```

它在 Mozilla 中报告以下错误：

```
$("#GroupDiscussionsTemplate").render is not a function
http://testpcir.powerslide.cir/Pages/foro.aspx
Line 758 
```

在这个错误中我发现了这个--->`clone(a=readystatechange , e=undefined)`

有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T04:50:42.907

我的场景解释如下：-我在 jquery 中调用渲染函数，但由于未定义不是函数而引发错误。我已经放置了脚本文件并且在我的代码中没有错误，但它仍然会引发错误。

之后我意识到在加载渲染脚本之前我正在调用出现问题的渲染函数

解决方案L：-

我在 document.ready 函数中调用了渲染函数，以便在加载所有元素后调用渲染函数。现在它工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T23:48:59.837

`GroupDiscussionsTemplate`没有render方法，所以可能的原因有很多：

*   包含`displayGroupDiscussions`的`GroupDiscussionsTemplate`脚本在源顺序中位于脚本之前
*   `GroupDiscussionsTemplate`按调用方式创建`getDiscussions.ashx`，因此它`data`不是 DOM的一部分
*   不正确地使用[.render](http://msdn.microsoft.com/en-us/magazine/hh882454.aspx)而不是[.tmpl](https://blogs.msdn.microsoft.com/sharepointdev/2011/06/30/using-jquery-templates-with-sharepoint-list-data/)

# facebook - Facebook 访问令牌过期

> ID：10173646
> 
> 赞同：1
> 
> 时间：2012-04-16T11:58:44.777
> 
> 标签：facebook

我对计算访问令牌过期的时间有点困惑。

我正在使用服务器身份验证（http://developers.facebook.com/docs/authentication/server-side/）。

当我从 Facebook 向我的重定向 URL 的请求中获取身份验证代码时，我将身份验证请求发送回 Facebook，并获得访问令牌以及“过期”参数，最近我可以看到过期是一个长值，代表令牌过期前的时间（以秒为单位）。出于某种原因，我认为它曾经是以毫秒为单位的时间。

我可以假设过期时间现在 + expires（以秒为单位） - 在我看来太长了（大约 ~5109691 秒） - 这有意义吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T13:05:54.327

服务器认证的访问令牌有效期为两个月。您收到的值是正确的。

编辑： [https ://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

阅读“服务器端 OAuth 开发人员”部分。

# tomcat - 在 Windows 7 上安装 Tomcat 7

> ID：10173647
> 
> 赞同：1
> 
> 时间：2012-04-16T11:58:57.037
> 
> 标签：tomcat

我在 Windows 7 上安装了一个 tomcat 7。为此：

*   我解压缩了从官方网站获得的程序文件文件夹中的存档。
*   我安装了jre 7。
*   我设置`JAVA_HOME`和`CATALINA_HOME`环境变量
*   我从 bin 目录运行 startup.bat：命令行窗口告诉我`"org.apache.catalina.startup.Catalina start"`
*   当我打开浏览器并键入时，`localhost:8080`我得到一个`HTTP 500 error`.

我的安装有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:10:57.190

问题是您没有设置`JAVA_HOME`环境变量。

设置步骤`JAVA_HOME`。

1.  去 oracle 网站，下载**jdk 6 或 7**。安装它。
2.  右键单击桌面或程序菜单中的“我的电脑”图标。
3.  点击**“高级系统设置”**。选择**“高级”**选项卡，单击**“环境变量”**按钮。
4.  *在系统变量下*，单击**“新建...”**按钮。对于变量名称文本框，输入`JAVA_HOME`。对于变量值框，输入您的 jre 的安装路径，例如`C:\Program Files\Java\jdk1.6.0_11` 就是这样

# android - 适用于 Android 的 Google 文档 API

> ID：10173649
> 
> 赞同：5
> 
> 时间：2012-04-16T11:59:02.867
> 
> 标签：android, google-docs-api

有谁知道如何通过 Android 应用程序在 Google Docs 上共享文档。任何人都可以提供完整的示例代码来在 Google Docs 上共享文档吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T04:29:07.530

请阅读手册。这是官方的[Google Drive API 文档](https://developers.google.com/google-apps/documents-list/)。这是以前支持的 GData API的[GitHub 存储库，现在已停止使用更新的基于 JSON 的 API。](https://github.com/google/gdata-java-client)

# notepad++ - 纯文本文件的批量替换

> ID：10173650
> 
> 赞同：0
> 
> 时间：2012-04-16T11:59:06.540
> 
> 标签：notepad++, replace

我的数据如下所示：

**7DigitNumbers** (tabspace) **IRRELEVANTSTUFF123** (tabspace) **30**

例子：

```
2712061    really irrelevant words and numbers     30 
```

我想要得到的是：

**7DigitNumbers** (tabspace) **30**

在同一个例子中：

```
2712061     30 
```

我已经通过 find&replace 功能在 notepad++ 上尝试了几种组合，但无法弄清楚。你可以帮帮我吗？

在此先感谢，麻省理工学院

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T21:50:07.860

看起来 Don Ho 在 Notepad++ 原生替换中添加了 RegEx 回溯。[从此处](http://notepad-plus-plus.org/download/v6.1.1.html)
下载记事本 6.1.1 安装记事本 6.1.1，然后转到搜索->替换

```
Find what:    ^([0-9]{7})(\t).*([0-9]{2})$  
Replace with: \1\2\3 
```

单击全部替换按钮

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:59:07.087

获取 Windows 的 awk 副本，例如：[gawk](http://gnuwin32.sourceforge.net/packages/gawk.htm)并使用以下命令：`awk "{print $1,$NF}"`. 这将打印第一列和最后一列（NF 是字段数）。

将数据复制到文件中并在某些单词之间添加一些选项卡的快速测试会产生：

```
C:\temp>awk "{print $1 \"\t\" $NF}" z.dat
2712061 32
2712062 31
2712063 30 
```

awk print 语句连接它的所有参数 - 因此这将使用单个制表符分隔第一列和最后一列的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T17:16:18.263

使用[PythonScript](http://npppythonscript.sourceforge.net/) Notepad++ 插件进行 Python 正则表达式搜索和替换。功能
见[这里](http://npppythonscript.sourceforge.net/docs/latest/scintilla.html#Editor.pyreplace)

```
Editor.pyreplace(search, replace[, count[, flags[, startLine[, endLine]]]]) 
```

和

```
Editor.pymlreplace(search, replace[, count[, flags[, startPosition[, endPosition]]]]) 
```

这是一个使用 python 正则表达式搜索和替换函数 editor.pyreplace() 的简单程序，
我在其中留下了很多调试代码，因此您可以查看函数运行过程中发生的情况。

```
# $Revision: 1.3 $
# $Author: dot $
# $Date: 2012/04/19 00:03:26 $

from Npp import *
import re, string

expression = notepad.prompt(
                 "Enter the search string on the first line, followed by Ctrl+Enter, \n" +
                 "followed by the replace string on second line",
                 "RegEx and Search/Replace" ,
                 "")

debug = True
#debug = False

if debug:
    bufferID = notepad.getCurrentBufferID()

if debug:
    # Show console for debugging
    console.clear()
    console.show()

if expression != None:
    expressionList = re.split(r"[\n\r]+", expression)

    if debug:
        console.write( expression + "\n" )

    if len(expressionList) == 2:
        if debug:
            console.write( "'" + expressionList[0] + "', '" + expressionList[1] + "'\n" )

        # First we'll start an undo action, then Ctrl-Z will undo the actions of the whole script
        editor.beginUndoAction()

        if debug:
            console.write( 'editor.pyreplace( r"%s" % expressionList[0], r"%s" % expressionList[1], 0, re.IGNORECASE)\n' )

        editor.pyreplace( r"%s" % expressionList[0], r"%s" % expressionList[1], 0, re.IGNORECASE)

        # End the undo action, so Ctrl-Z will undo the above two actions
        editor.endUndoAction()

# Debug
if debug:
    notepad.activateBufferID(bufferID) 
```

将此脚本链接到 Notepad++ 快捷方式（即 Ctrl+r）后，搜索

```
^([0-9]{7})(\t).*([0-9]{2})$ 
```

并替换为

```
\1\2\3 
```

将此脚本映射到 Notepad++ 快捷方式`Ctrl+<ChooseALetter>`并运行它。
我已经测试了这个脚本，效果很好！

# android - 使用 as3 在 Twitter 上发送推文而不导航到 url

> ID：10173652
> 
> 赞同：0
> 
> 时间：2012-04-16T11:59:15.020
> 
> 标签：android, iphone, actionscript-3, twitter

我需要在 Twitter 上发布一些特定的消息。我需要使用 as3 为 iphone 和 andorid 执行此操作。在搜索时，我得到了一个 navigationToUrl 的解决方案（到 url 'http://twitter.com/home?status=message'）并发布，它的工作，但它仍然是用户的帐户。我也搜索了一些 api，但没有找到从 as3 flash 应用程序发送推文的任何有用方法。谁能帮帮我吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:02:35.170

您可以在使用 oAuth 登录后使用 URLRequests 访问 twitter API 来执行此操作。您还可以使用几个库来执行此操作。

[http://wiki.swfjunkie.com/tweetr](http://wiki.swfjunkie.com/tweetr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:21:08.553

您可以将 ExternalInterface 与 javascript 一起使用来发送推文。

[看这里。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html) [和这里。](https://stackoverflow.com/questions/4723257/publish-to-twitter-using-javascript)

# jquery - Access-Control-Allow-Origin 不允许获取 -> Origin *

> ID：10173653
> 
> 赞同：1
> 
> 时间：2012-04-16T11:59:21.453
> 
> 标签：jquery, google-chrome-extension

我正在制作一个非常简单的 Chrome 扩展程序，它将 http 协议上的页面重定向到 https 协议（如果存在）。我正在调试，我发现了 facebook，它同时具有 http 和 https。

代码在这里：

```
function redirect() {    
    chrome.tabs.query({active: true}, function(tabArray) {  
        var currentURL = tabArray[0].url;               //http://facebook.com
        var httpsURL = generateSSL(currentURL);         //https://facebook.com
        if(httpsURL == currentURL){
            console.log(currentURL+" is already on HTTPS");
            chrome.browserAction.setIcon({path:"../images/padlock_green.png"});
        } else if(checkSSL(httpsURL)){                      
            chrome.tabs.update(tabArray[0].id, {url: httpsURL});
            chrome.browserAction.setIcon({path:"../images/padlock_green.png"});
            chrome.browserAction.setBadgeText({text:"SSL"});
            console.log("SSL found,"+currentURL+" redirected to"+httpsURL);
        } else {
            //donothing
            console.log(currentURL+" has no SSL");
            chrome.browserAction.setIcon({path:"../images/padlock_red.png"});
        }
    });
} 
```

**阿贾克斯调用：**

```
function checkSSL(url){
    $.support.ajax = true;
    $.ajax({
        url: url,
        type:'HEAD',
        error: function()
        {
            return false;
        },
        success: function()
        {
            return true;
        }
    });
} 
```

问题是，我在控制台中收到以下错误消息：

```
XMLHttpRequest cannot load https://www.facebook.com/. Origin chrome-extension://pgidanbjmliilmmohlphbagcapafjjpg is not allowed by Access-Control-Allow-Origin. 
```

我不知道可能是什么问题:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:17:24.547

您的代码有几个小问题：

*   您的清单文件仅请求 的权限`http://*/*`，*而不是* `https://*/*`，因此您对 HTTPS 站点的请求失败。您需要获得许可，因此您可以*通过所有协议***`*://*/*`**获取所有域上的所有页面，而不仅仅是通过 HTTP。

**   第二个问题是您希望您的`$.ajax`调用返回一个布尔值，但事实并非如此。该`$.ajax`调用有两个*回调*，每个回调都返回一个布尔值，但`checkSSL`在 Ajax 调用完成之前终止，这意味着`checkSSL`总是返回`undefined`。* 

 *你想要做的是提供`checkSSL`一个回调函数作为参数：

```
function checkSSL(url, callback){
    $.ajax({
        url: url,
        type:'HEAD',
        error: function() { callback(false); },
        success: function() { callback(true); }
    });
} 
```

然后，在调用后使用该回调运行调用代码`checkSSL`：

```
function redirect() {    
    chrome.tabs.query({active: true}, function(tabArray) {  
        var currentURL = tabArray[0].url;               //http://facebook.com
        var httpsURL = generateSSL(currentURL);         //https://facebook.com
        if(httpsURL == currentURL){
            console.log(currentURL+" is already on HTTPS");
            chrome.browserAction.setIcon({path:"../images/padlock_green.png"});
        } else {
            // call checkSSL and take action in an anonymous callback function!
            checkSSL(httpsURL, function(urlDoesExist) { 
                if(urlDoesExist) {                 
                    chrome.tabs.update(tabArray[0].id, {url: httpsURL});
                    chrome.browserAction.setIcon({path:"../images/padlock_green.png"});
                    chrome.browserAction.setBadgeText({text:"SSL"});
                    console.log("SSL found,"+currentURL+" redirected to"+httpsURL);
                } else {
                    //donothing
                    console.log(currentURL+" has no SSL");
                    chrome.browserAction.setIcon({path:"../images/padlock_red.png"});
                }
            });
        }
    });
} 
```

Notice the changes to the code below the first `else`. We can't decide what to do until the Ajax call has resolved, so we have the Ajax `success` and `error` functions fire a callback with a boolean argument. That callback function then takes action based on the value of the boolean.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:24:33.093

如果您打包您的扩展，您可以进行跨域请求，但如果您将其创建为托管应用程序/扩展，则不允许，请参阅：

[Chrome 扩展跨域请求](https://stackoverflow.com/questions/10089310/chrome-extension-cross-domain-request/10089368#10089368)*

# c# - 泛化 LINQ 模型

> ID：10173657
> 
> 赞同：2
> 
> 时间：2012-04-16T11:59:33.527
> 
> 标签：c#, linq, linq-to-sql

我在 MVC 模式中的模型设计存在问题，并且我被 C# 的静态类型所困扰。

我想做的只是创建一组执行所有数据库插入、更新、删除操作的类。该组由从数据库中的每个表映射的类的子组和访问表类的表模型类的子组组成。

我正在使用 LINQ 映射来创建表类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

using System.Data.Linq.Mapping;
using Iris.Libraries;

namespace Iris.Models.Tables
{
    [Table]
    public class Users
    {
        [Column(IsPrimaryKey = true)]
        public string User_Id;

        [Column]
        public string Name;

        [Column]
        public string Password;

        [Column]
        public int Userlevel_Id;

        public Users()
        {
        }
    }
} 
```

然后模型类访问的表：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

using System.Data.Linq;
using Iris.Models.Tables;
using Iris.Models.DataContexts;

namespace Iris.Models
{
    public class UserModel
    {
        private UserDataContext dataContext;
        private Table<Users> users;

        public UserModel()
        {
            this.dataContext = new UserDataContext(Config.CONNECTION_STRING);

            this.users = this.dataContext.GetTable<Users>();
        }

        public List<Users> Select()
        {
            var data = from user in this.users select user;

            return data.ToList<Users>();
        }

        public Users Select(object id)
        {
            var data = from user in this.users where user.User_Id.ToString() == id.ToString() select user;

            return data.ToList<Users>()[0];
        }

        public void Insert (Users user)
        {
            this.dataContext.Users.InsertOnSubmit(user);

            this.dataContext.SubmitChanges();
        }

        public void Update(Users user)
        {
            var queryableData = from row in this.dataContext.Users where row.User_Id == user.User_Id select row;

            var editedData = queryableData.Single<Users>();

            editedData.User_Id = user.User_Id;
            editedData.Name = user.Name;
            editedData.Password = user.Password;
            editedData.Userlevel_Id = user.Userlevel_Id;

            this.dataContext.SubmitChanges();
        }

        public void Delete(Users user)
        {
            var queryableData = from row in this.dataContext.Users where row.User_Id == user.User_Id select row;

            var deletedData = queryableData.Single<Users>();

            this.dataContext.Users.DeleteOnSubmit(deletedData);

            this.dataContext.SubmitChanges();
        }
    }
} 
```

上面的一对代码可以正常工作，没有任何问题，但我想避免一次又一次地为模型类编写“几乎相同”的代码，因为数据库中有很多表。为了达到这个目的，我尝试制作一个通用的模型类，并从它扩展每个表模型。

```
public class Users : Model {} 
```

问题来自

```
private Table<Users> users; 
```

Table<> 中的哪个类对于每个表总是不同的。我一直在寻找几天，并没有找到解决这个问题的任何答案。

像我上面那样概括表格模型真的不可能吗？还是有其他方法可以避免重复编写相同的代码？任何人，请帮助我.. :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:05:49.270

使用以下通用方法：

```
System.Data.Linq.Table<T> GetTable
{
        get { return _db.GetTable<T>(); }
} 
```

您可以使用[Repository Pattern](http://martinfowler.com/eaaCatalog/repository.html)，首先创建一个通用接口：

```
public interface IRepository<T> where T : class
{
    void Add(T entity);
    void Delete(T entity);
    void Update(T entity);
    IEnumerable<T> GetAll(Func<T,bool> exp);
    ....
} 
```

然后您的通用存储库模型应如下所示：

```
public class Repository<T> : IRepository<T>
    where T : class, IEntity
{
    DataContext _db;
    public Repository()
    {
        _db = new DataContext("Database Connectionstring");
        _db.DeferredLoadingEnabled = false;
    }
    System.Data.Linq.Table<T> GetTable
    {
        get { return _db.GetTable<T>(); }
    }
    public IEnumerable<T> GetAll(Func<T, bool> exp)
    {
        return GetTable.Where<T>(exp);
    }
    ...
    .
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:16:21.923

这种情况在我们公司发生过一次。

我们选择了为每个表编写非常相似的代码的“最差”方法，而没有尝试概括模型（基本上，我们采用了您想要避免的方法）。

这种方法看起来和闻起来都非常糟糕，但由于方法和属性的严重划分，它与以往一样易于调试。它的扩展速度也非常快，您需要做的就是复制、粘贴和调整差异。

编辑：这个选择背后的主要原因是“这是我们自己设计的数据库，在可预见的未来不会有太大变化”

# java - 无法获得本机 oracle 连接

> ID：10173658
> 
> 赞同：1
> 
> 时间：2012-04-16T11:59:33.760
> 
> 标签：java, oracle, tomcat, geotools

在 gis.stackexchange 中询问：[https ://gis.stackexchange.com/questions/23412/could-not-obtain-native-oracle-connection](https://gis.stackexchange.com/questions/23412/could-not-obtain-native-oracle-connection)

任何人都知道原因以及如何解决“无法获得本机 oracle 连接”错误？

我在 Tomcat 6 上使用 GeoTools 2.7.4、oracle 11g DB、ojdbc14.jar 和一个简单的 java 代码，如下所示：

```
Map map = new HashMap();
map.put( "dbtype", "oracle");
map.put( "jndiReferenceName", "java:comp/env/jdbc/GisDS");

OracleNGJNDIDataStoreFactory factory = new OracleNGJNDIDataStoreFactory();
log.info("Can process? "+ factory.canProcess(map));
store = factory.createDataStore(map);

SimpleFeatureSource featureSource = store.getFeatureSource(viewName);
log.info(featureSource.getFeatures().getBounds().toString()); 
```

还有我的 context.xml：

```
<Resource name="jdbc/GisDS" auth="Container" type="javax.sql.DataSource" 
    driverClassName="oracle.jdbc.driver.OracleDriver"
    accessToUnderlyingConnectionAllowed="true" 
    username="***" password="***"
    url="***"
    maxActive="25" maxIdle="8" maxWait="10000" 
    removeAbandoned="true" removeAbandonedTimeout="60" logAbandoned="true" 
    poolPreparedStatements="true" maxOpenPreparedStatements="100"
    validationQuery="SELECT SYSDATE FROM DUAL"/> 
```

而且我总是收到“无法获得本机 oracle 连接”错误：

```
java.lang.RuntimeException: java.io.IOException: Error occured calculating bounds
        at org.geotools.jdbc.JDBCFeatureSource.getBoundsInternal(JDBCFeatureSource.java:485)
        at org.geotools.jdbc.JDBCFeatureStore.getBoundsInternal(JDBCFeatureStore.java:179)
        at org.geotools.data.store.ContentFeatureSource.getBounds(ContentFeatureSource.java:370)
        at org.geotools.data.store.ContentFeatureCollection.getBounds(ContentFeatureCollection.java:274)
        at ***.GisServlet.doGet(GisServlet.java:82)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.io.IOException: Error occured calculating bounds
        at org.geotools.jdbc.JDBCDataStore.getBounds(JDBCDataStore.java:1137)
        at org.geotools.jdbc.JDBCFeatureSource.getBoundsInternal(JDBCFeatureSource.java:478)
        ... 19 more
Caused by: java.sql.SQLException: Could not obtain native oracle connection for class org.apache.tomcat.dbcp.dbcp.PoolingDataSource$PoolGuardConnectionWrapper
        at org.geotools.data.oracle.OracleDialect.unwrapConnection(OracleDialect.java:490)
        at org.geotools.data.oracle.OracleDialect.readGeometry(OracleDialect.java:434)
        at org.geotools.data.oracle.OracleDialect.readGeometry(OracleDialect.java:424)
        at org.geotools.data.oracle.OracleDialect.decodeGeometryEnvelope(OracleDialect.java:371)
        at org.geotools.jdbc.JDBCDataStore.getBounds(JDBCDataStore.java:1123)
        ... 20 more 
```

我尝试连接到 10g 数据库，尝试使用 ojdbc6，但我总是以相同的结果结束。

奇怪的是，如果我用它替换`getBounds()`它就`size()`可以了。

# php - 查找和替换字符串中的特殊字符

> ID：10173659
> 
> 赞同：1
> 
> 时间：2012-04-16T11:59:50.067
> 
> 标签：php, string

我必须拆分每个单词并将其与内置的本地词典进行比较，然后将其替换为另一种语言中的等效单词。当我使用特殊字符（**例如：* * of！）拆分单词时，即使它也不会与词典匹配他们是一样的。

现在我需要用空字符串替换那些特殊字符。

```
$opis="of!";
$a=preg_replace('!"#$%&/()=?*+'-.,;:_', '', $opis);
print_r($a); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:05:38.753

您可以使用`str_replace`或`preg_replace`

示例`preg_replace` [http://php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)

```
 $str = preg_replace("/\W+/", '', $str);
  var_dump($str); 
```

示例`str_replace` [http://php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)

```
$search =  '!"#$%&/()=?*+\'-.,;:_' ;
$search = str_split($search);
$str = "OF!" ;

var_dump(str_replace($search, "", $str)); 
```

输出

```
string 'OF' (length=2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:20:32.333

每个人都在这里发布有关正则表达式的问题有什么问题？：/

好的，您当前解决方案遇到的问题在于您如何编写正则表达式。

第 1 步：转义所有正则表达式的内部特殊字符`\`（以及您在字符串中留下的额外单引号......）

结果：

```
'!"#\$%&/\(\)=\?\*\+\'-\.,;:_' 
```

第 2 步：将结果封装在一个字符类中，否则 RegEx 只会尝试替换所有出现的字符串`!"#$%&/()=?*+'-.,;:_`

这显然不是你想要发生的。

封装后：

```
'[!"#\$%&/\(\)=\?\*\+\'-\.,;:_]' 
```

最后，您需要用一些东西来分隔正则表达式（PHP 需要这样来定义正则表达式），我们还将添加贪婪的“+”符号以匹配尽可能多的连续符号。

最终的：

```
'~[!"#\$%&/\(\)=\?\*\+\'-\.,;:_]+~' 
```

现在你应该很高兴：

```
$opis="of!";
$opis = preg_replace('[!"#\$%&/\(\)=\?\*\+\'-\.,;:_]+', '', $opis);
print_r($opis) 
```

享受。下次[在这里咨询正则表达式信息的最佳位置](http://www.regular-expressions.info)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:03:10.847

是你要找的吗？

[http://php.net/manual/fr/function.str-replace.php](http://php.net/manual/fr/function.str-replace.php)

```
$result = str_replace($search, $replace, $subject); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T12:04:45.277

对上述内容使用此正则表达式

```
$a=preg_replace("/[^A-Za-z0-9]/", '', $opis); 
```

经过测试

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T12:05:24.820

使用正则表达式时遇到的问题是您需要转义字符串中的几个字符，因为正则表达式使用大量特殊字符。可以在此处找到列表：[http ://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

使用 str_replace 之类的函数将是一个更简单的解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T12:06:01.350

[str_replace();](http://php.net/manual/en/function.str-replace.php) 是你需要的。

来自php官方文档：

```
// Provides: Hll Wrld f PHP
$vowels = array("a", "e", "i", "o", "u", "A", "E", "I", "O", "U");
$onlyconsonants = str_replace($vowels, "", "Hello World of PHP"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-16T12:07:16.293

使用 str_replace 怎么样！它对性能的影响较小

```
$chars= array("!", "\"", "#", "$", "%", "&", "/", "(", ")", "?", "*", "+", "'", "-", ".", ",", ";", ":", "_");
$cleanstring = str_replace($chars, "", $yourstring); 
```

# android - 构建本地应用程序以唯一地识别、跟踪和锁定智能手机

> ID：10173662
> 
> 赞同：1
> 
> 时间：2012-04-16T11:59:57.353
> 
> 标签：android, iphone, blackberry, tracking, uniqueidentifier

我目前正在对我的项目进行一些研究，一个智能手机跟踪本机应用程序，我有四个问题。非常感谢我可以阅读的任何材料的链接，并且将接受最有用/最全面的回复。

主要目标智能手机是安卓、黑莓和 iPhone 机型。

对于初学者来说，我在这里找到了[唯一识别 Android 手机](https://stackoverflow.com/questions/3679120/uniquely-identify-an-android-handset)，IMEI 可用于唯一识别 Android，但我想我曾经读过它可以被伪造。我不知道 iPhone 和黑莓。

1.  唯一识别智能手机设备（如果有）的最可靠方法是什么？MAC地址可以工作还是可以欺骗？IMEI 真的可以伪造吗？
2.  一旦设备被报告为被盗，是否可以通过设备的唯一标识远程使用自定义错误消息“锁定”设备？即使与网络断开连接，此锁定状态也会保留在手机上，直到重新连接到网络并再次远程解锁。
3.  假设这样的远程电话锁是可能的，那么小偷可以逆转吗？本机应用程序将以隐身模式运行，因此无法卸载。
4.  在这种情况下，跨平台解决方案可以工作吗，还是我必须为每个平台开发各种原生应用程序？

编辑：更多的上下文。正如 Till 所说，Apple 的“查找我的手机”已经做到了这一点（我只是在了解它，但它看起来已经很完美了）。选择安装应用程序的用户会被告知，如果他们安装了应用程序，手机将被唯一标识。至于锁定设备，“查找我的手机”可以做到（我收集）。现在我需要知道这在其他两个平台上是如何实现的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:10:10.583

关于iPhone方面的事情：

1.  不允许您像这样唯一标识 iPhone。除非您先获得用户的许可，否则 Apple 刚刚禁止它。因此，如果他们拒绝您的许可，您的应用程序将无法运行，您需要找到其他方法。
2.  不，你不能那样做。
3.  请参阅 2。您也不能在“隐身模式”下运行应用程序
4.  见 2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:13:59.410

只有网络运营商可以在 IMEI 级别上与手机通话。IMEI 号码是*GSM 网络的 MAC 地址*。但是，除非您可以控制网络，否则您无法访问它。当然，您可以从用户那里获得 IMEI，但您不能使用它来定位手机。在 CDMA 网络上，此地址称为 MEID 号码。

但还有其他方法：

在用户许可的情况下，您*可以*在任一平台上获取位置数据。这是您应该考虑开发应用程序的方式。一旦用户在手机上下载并安装了您的应用程序，您就需要为其分配一个 UUID。然后，您可以让电话每隔一段时间向服务器报告一次（心跳）。只要手机开机并连接到网络，用户就可以定位手机。

您还可以获取网络上的电话 IP 地址，以及其他信息 - 例如联系人、消息、文件、缓存数据等。

在 Android 上，将这种功能实现为*服务*非常容易，该服务只能在包页面上可见。此外，如果你有 root 访问权限，你可以编写任何你想要的 rootkit，这样它就会对系统隐藏起来。与越狱的 iPhone 相同。不过，我对 iPhone 服务并不了解。

无论哪种方式，您可以利用的唯一跨平台兼容性可能是从服务器发送和接收数据的方式。您可以使用诸如 JSON 之类的标准来发送和接收数据（因此使用同一台服务器）。尽管这两个平台都有 JSON 和 Apache 库，但应用程序或服务本身的其他部分需要为每个平台完全且独立地开发（UI、内部内容处理、系统调用、权限等）。

您可以使用安全和设备管理 Android 系统界面远程锁定、擦除、恢复出厂设置等 Android 设备。这仍然需要用户授予权限，并且它会询问他们一种更.. 令人讨厌的.. 方式，以便他们在授予应用程序设备管理权限时知道他们到底同意了什么。如果您曾经将交换服务器用于企业或学校，您很可能会遇到这种情况。

我不确定在入狱系统上的远程 iPhone 设备管理。

如果您真的想要一些无法删除的东西，以免您进行出厂重置，那么您需要了解一两件事关于 Unix 编程，以及他们各自的 SDK 不了解的操作系统（并且可能应该了解） 't）告诉你。如果需要，您将需要熟悉源代码甚至逆向工程。如果你仍然感兴趣，你会想在为 iPhone 和 Android（和黑莓）开发定制手机固件和软件的圈子里闲逛。我会从安卓开始。这可能是最简单的，因为 AOSP 的资源很容易合法获得。

# java - 从Java文件中读取大量BitSet对象

> ID：10173669
> 
> 赞同：1
> 
> 时间：2012-04-16T12:00:14.263
> 
> 标签：java, file-io, bitset

`BitSet`我想从一个文件（12MB）中读取大量对象。我使用了以下代码，但只从文件中读取第一个对象并重复它。谢谢

```
public static void main(String[] args) {
    // TODO code application logic here

    ObjectInputStream Input = null;
    FileInputStream Database = null;
    Object Buffer = null;
    BitSet H = null;

    try
    {
        Database = new FileInputStream("BloomFilters.txt");
        Input = new ObjectInputStream(Database);

        while((Buffer =  Input.readObject()) != null)
        {
            H = (BitSet)Buffer;
            System.out.println(H);
            System.out.println("Yes" );
        }
    }
    catch(Exception e)
    {
        System.out.println("Exp = " + e.getMessage());
    } 
```

和下面的代码创建一个 BitSet 对象的文件，我想从这个文件中读取对象

```
public class Main {

public static void main(String[] args) {
    BloomFilter Set = new BloomFilter(512, 100);
    ObjectOutputStream Output = null;
    DataInputStream Input = null;
    FileOutputStream DBOut = null;
    FileInputStream DBIn = null;
    String Sequence = "";

    try
    {
        DBOut = new FileOutputStream("Bloomfilters.txt");
        Output = new ObjectOutputStream(DBOut);
        DBIn = new FileInputStream("DB.txt");
        Input = new DataInputStream(DBIn);

        while((Sequence = (String) Input.readLine()) != null)
        {
            Set.clear();
            for(int i = 0; i < Sequence.length() - 1; i++)
                Set.add((Sequence.substring(i, i + 2)));
            BitSet buffer = Set.getBitSet();

            Output.writeObject(buffer);
        }

        Input.close();
        Output.close();
    }
    catch(Exception e)
    {
         System.out.println(e.getMessage());
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T06:23:58.173

我认为您需要一个 Scanner 查看此代码[Java Bitset error with large index](https://stackoverflow.com/questions/17513351/java-bitset-error-with-large-index)。这是一个不同的问题，但第一个循环是将带有数字的大文件读入位集中，

# windows-phone-7 - 在 Windows Phone 中发送附件

> ID：10173675
> 
> 赞同：0
> 
> 时间：2012-04-16T12:00:27.977
> 
> 标签：windows-phone-7, email-attachments

我一直在阅读论坛，无法通过 Windows phone 中的电子邮件发送附件。这是准确的吗？创建网络服务是我唯一的选择吗？

有什么建议么？

谢谢杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:10:32.413

不幸的是，当前的 SDK (7.1.1) 不允许我们发送带有附件的电子邮件；您只能发送文本！

唯一的方法是获取您要发送的文件内容（字节数组），将其编码为 Base64，然后将消息文本设置为此编码内容...

# asp.net - 实体框架无法连接数据库

> ID：10173681
> 
> 赞同：0
> 
> 时间：2012-04-16T12:01:16.930
> 
> 标签：asp.net, mysql, entity-framework-4, web-config

我在外部服务器上创建并托管了一个 ASP.NET 4，它可以正常运行，但实体框架无法访问 MySQL 数据库。例如，我可以使用 PHP 访问 mysql [只是检查登录名和密码以及数据库名称是否正确]，但不能使用 EF。

我的 web.config

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>

  <configSections></configSections>
  <appSettings />
  <!--

  <connectionStrings>
    <add name="ImmoEntities" connectionString="metadata=res://*/Model.ImmoModel.csdl|res://*/Model.ImmoModel.ssdl|res://*/Model.ImmoModel.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;server=*****.info;Password=*****;User Id=*****;database=*****&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>

  <system.web>

    <globalization culture="auto:fr-FR" uiCulture="auto:fr-FR" />
    <siteMap defaultProvider="XmlSiteMapProvider" enabled="true">
      <providers>
        <clear />
        <add name="XmlSiteMapProvider" type="System.Web.XmlSiteMapProvider" siteMapFile="Web1.siteMap" />
        <add name="web1" type="System.Web.XmlSiteMapProvider" siteMapFile="/Web1.sitemap" />
        <add name="web" type="System.Web.XmlSiteMapProvider" siteMapFile="/Web.sitemap" />
        <add name="web3" type="System.Web.XmlSiteMapProvider" siteMapFile="/Web3.sitemap" />
        <add name="web4" type="System.Web.XmlSiteMapProvider" siteMapFile="/Web4.sitemap" />
      </providers>
    </siteMap>

    <!-- Web.Config Configuration File -->

    <!-- 
            Set compilation debug="true" to insert debugging 
            symbols into the compiled page. Because this 
            affects performance, set this value to true only 
            during development.
        -->

<!----- if i uncommented this section my application cannot run -> 500 internal server error

    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <add assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Web.DynamicData, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.ComponentModel.DataAnnotations, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Web.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
      </assemblies>
    </compilation>
-->

    <!--
            The <authentication> section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
        -->

    <authentication mode="Windows" />
    <httpHandlers>
      <add path="CaptchaImage.axd" verb="GET" type="MSCaptcha.CaptchaImageHandler, MSCaptcha" />
    </httpHandlers>

    <!--
            The <customErrors> section enables configuration 
            of what to do if/when an unhandled error occurs 
            during the execution of a request. Specifically, 
            it enables developers to configure html error pages 
            to be displayed in place of a error stack trace.

        <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
            <error statusCode="403" redirect="NoAccess.htm" />
            <error statusCode="404" redirect="FileNotFound.htm" />
        </customErrors>
        -->

    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID">
      <controls>
        <add assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagPrefix="ajaxToolkit"/>

        <add tagPrefix="cc1" assembly="MSCaptcha" namespace="MSCaptcha" />

      </controls>
    </pages>

  </system.web>

  <!-- 
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0\.  It is not necessary for previous version of IIS.
    -->

  <system.webServer>
    <httpErrors errorMode="Detailed" />
    <asp scriptErrorSentToBrowser="true"/>
    <validation validateIntegratedModeConfiguration="false" />
  </system.webServer>
  <system.web>
    <customErrors mode="Off"/>
    <compilation debug="true"/>
  </system.web>

  <system.data>
    <DbProviderFactories>
      <remove invariant="MySql.Data.MySqlClient" />
      <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL" type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.3.6.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
    </DbProviderFactories>
  </system.data>

</configuration> 
```

我的 Bin 文件夹包含：

```
AjaxControlToolkit.dll
FredCK.FCKeditorV2.dll
MSCaptcha.dll
MyApp.dll
MyApp.pdb
MySql.Data.dll
MySql.Data.Entity.dll
MySql.Web.dll
System.ComponentModel.DataAnnotations.dll
System.Core.dll
System.Data.Entity.dll
System.Data.Linq.dll
System.Design.dll
System.Web.DynamicData.dll
System.Web.Entity.dll
System.Web.Extensions.Design.dll
System.Web.Extensions.dll
System.Windows.Forms.dll
System.Xml.Linq.dll 
```

有没有关于如何解决这个问题的建议？

# matlab - 在两个单独执行的 MATLAB m 文件之间共享变量

> ID：10173683
> 
> 赞同：2
> 
> 时间：2012-04-16T12:01:24.097
> 
> 标签：matlab, parallel-processing, share, workspace, job-scheduling

我想知道MATLAB中是否有类似指针的东西。我有两个同时执行的 matlab 例程（即它们一起午餐并在同一台机器上运行，因此在时间戳方面是同步的）。第一个例程 A 有一个 parfor 循环，其中不断更新数据向量。第二个例程 B 需要访问（例程 A）向量的特定（但随时间变化）行并进行进一步计算。我的第一个猜测是在 txt 文件中打印例程 A 的更新行，然后在必要时在 B 中访问它。然而，这将导致大量的时间浪费。我知道这可能与并行作业和调度程序有关，但我不知道如何实现它。感谢您提供任何帮助、猜测或解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:47:43.787

如果我正确地解决了您的问题，这段[代码可能会对您有所帮助。](http://smlv.cc.gatech.edu/2010/08/27/shared-memory-in-matlab/)我正在等待进一步的评论。最好的祝愿！

# c# - wpf中的静态数据放在哪里？

> ID：10173684
> 
> 赞同：2
> 
> 时间：2012-04-16T12:01:33.983
> 
> 标签：c#, wpf, mvvm

我是 WPF 的新手。我正在尝试编写一个利用 MVVM 设计模式的程序。

我的程序有一个在启动时从数据库中获取的国家列表，之后是静态的。放这些的地方在哪里？目前，我让它们位于 ViewModel 类层次结构的顶层：

```
abstract class AbstractViewModel
{
    static Jurisdiction[] jurisdictionOptions;
    public Jurisdiction[] JurisdictionOptions
    {
        get {
            if (jurisdictionOptions == null)
            {
                using (var db = new DatabaseContext())
                {
                    jurisdictionOptions = db.Jurisdictions.ToArray();
                }
            }
            return jurisdictionOptions;
        }
    }
} 
```

然后我可以将`ItemSource`UIElements 设置为`JurisdictionOptions`.

这是实现这一点的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T12:06:59.630

如果你正在实现 MVVM 模式，你还应该有一个模型类。

通常，您应该将数据库代码放在模型中。

# .htaccess - 使用 htaccess 将一堆文件捆绑成一个文件

> ID：10173685
> 
> 赞同：0
> 
> 时间：2012-04-16T12:01:38.717
> 
> 标签：.htaccess, caching, url-rewriting, static-files

假设您有一个 css 文件加载器`style.php`：

```
 <?php 
           header('Content-type: text/css'); 
           foreach(array('style1.css', 'style2.css', 'style3.css') as $f)
                 echo file_get_contents($f)
     ?> 
```

style1.css 12KB，style2.css 400kgs，红角肥胖的style3.css 800LBs 是静态资源带宽消耗世界冠军！

我`style.php`用来组合这三个文件并将它们发送给客户端。我也在使用类似的 php 文件来组合发送 JS 资源。

是否有一些 htaccess 规则可以告诉我将几个静态资源组合成一个大资源，然后即时发送？

**/编辑：**

这种类型的工作可以由 htaccess 处理我确定我在某处读过有关包含的服务器文件或类似的东西，但我不记得在哪里。而且我还看到了免费托管服务，无论您在那里托管什么文件，它们都会放置自定义标题或横幅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:34:03.247

那么这种类型的工作（组合css文件）不能由.htaccess处理。您最多可以使用 mod_deflate 来压缩 css 文件的内容。

但是在 PHP 代码中，您可以组合和压缩各种 CSS 文件。看看[http://www.catswhocode.com/blog/3-ways-to-compress-css-files-using-php中的第三种方法](http://www.catswhocode.com/blog/3-ways-to-compress-css-files-using-php)

最后看看这里的缩小：http: [//www.minifycss.com/minify-tools/minify-css-tools.php](http://www.minifycss.com/minify-tools/minify-css-tools.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:49:26.240

终于找到了我要找的东西。这个东西被称为[服务器端包含（SSI）](http://en.wikipedia.org/wiki/Server_Side_Includes)。

# design-patterns - 设计一个方法/类以支持具有可变数量参数的可配置数量的查询

> ID：10173687
> 
> 赞同：0
> 
> 时间：2012-04-16T12:01:48.180
> 
> 标签：design-patterns, variadic-functions

我必须触发一组查询（比如 N，这是在运行时从 DB 决定的）。

每个查询 Qi 都会有一些变量（比如 V1、V2...Vj）。输入将以 Key,Value 对的形式提供。

这些查询的结果将是我必须返回的键值对。

前任。

```
select * from t where a="ME"; 
```

PS：这只是一个例子。我没有触发数据库查询。

我计划将查询作为字符串参数传递，其中包含一些变量的占位符，并传递用于替换的 KEY-VALUE 对的映射（KEY 名称将用于标识占位符）。

输入上述前的查询。

```
String query = select * from VRIABLE_FROM_TABLE where a=VARIABLE_WHERE_1; 
```

查询字符串也将从数据库中获取。

输入映射将是：

```
FROM_TABLE->t
WHERE_1->"ME" 
```

我错过了什么吗？任何面向对象的问题？

设计这个的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:00:07.163

您可以尝试实现[命令模式](http://en.wikipedia.org/wiki/Command_pattern)：为您的命令定义一个通用接口，并让命令执行器负责调用命令。

这样做时，您可以拥有任意数量的命令，因为命令执行器可以接收实现命令接口的类的集合；此外，执行器与命令的内容分离，可以使用所需数量的参数单独实例化。

# python-3.x - 在pygame中移动椭圆

> ID：10173688
> 
> 赞同：0
> 
> 时间：2012-04-16T12:01:53.060
> 
> 标签：python-3.x, pygame

我是pygame的新手。当玩家按下 UP、DOWN、RIGHT 或 LEFT 键时，我试图在窗口内移动多边形。但我不知道该怎么做。任何人都可以指导我解决这个问题吗？

```
import random, pygame, sys 
from pygame.locals import *
import time

BLACK = (0,0,0)
WHITE = (255,255,255)
RED = (255,0,0)

windowSurface = pygame.display.set_mode((700,700),0,32)
windowSurface.fill(WHITE)

def main():
    pygame.init()
    worm = pygame.draw.polygon( windowSurface, RED, ( (210,350),(220,360),(230,350),(240,360),(250,350),(260,360),(270,350),(280,360),(290,350),(300,360),(300,355),(290,345),(280,355),(270,345)  
                                                                    ,(260,355),(250,345),(240,355),(230,345),(220,355),(210,350) ))

    pygame.display.update()
    time.sleep(25)

    return 0

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:04:26.400

您每次将其绘制在不同的位置，这取决于它应该绘制的位置，这取决于用户是否按下了某个键。

# c++ - 如何在程序运行时生成和编译 C++ 代码？

> ID：10173694
> 
> 赞同：1
> 
> 时间：2012-04-16T12:02:10.407
> 
> 标签：c++, compilation

所以基本上我需要的不是一个特定的代码（当然那会很棒），而只是一个关于如何实现我的目标的想法和方法。

1）我必须用 C++ 创建一个程序，它会生成一个 C++ 代码的小例子，每次都有点不同。（这对我来说没有问题，我将使用模板并随机化代码中的一些变量，这将使其每次都是唯一的。）

2) 我将显示生成的代码，用户必须输入他认为代码打印出来的内容。

**这就是问题开始的地方**：

3）我必须获取生成的代码并以某种方式对其进行编译，以获取带有程序将打印出的文本的字符串。

4）然后将字符串与用户输入的内容进行比较。

所以步骤 3) 是我停下来的地方，没有帮助就无法弄清楚......我想在 .cpp 文件的函数中编写生成的代码，然后调用该函数，但我无法得到它工作，所以我开始想，我应该请教专家，也许还有其他一些方法或想法如何实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:22:15.003

1.  编写 .cpp 文件
2.  调用编译器（或 make 或等效的构建系统）
3.  如果编译失败，大概会显示错误？
4.  如果编译成功，运行生成的程序并显示输出

`system`将 2/3/4 包装到脚本中并使用or调用它可能是最简单的`popen`。该脚本可以确保文件名是唯一的，将 stderr 折叠到 stdout 等。

您正在运行的程序并没有真正与编译的代码进行交互，只是读取输出，因此将其作为一个单独的进程保存可能是最简单的。该脚本可以添加一些标记来帮助您将编译器输出/错误与程序输出区分开来。

* * *

我已经很多年没有编写批处理文件了，但是一旦你知道如何从命令行 ( [ref](http://msdn.microsoft.com/en-us/library/f35ctcxw%28v=vs.71%29.aspx) ) 运行编译器，你就可以编写一个脚本来：

1.  编译一个`.cpp`文件
2.  执行结果`.exe`
3.  将其输出重定向到文件

然后，在 C++ 中，您只需将代码保存到`.cpp`脚本期望的文件中，执行类似 的脚本`system("myScript.bat")`，然后读取输出文件。

如果您不想编写单独的批处理脚本，您可以调用`system`一次来调用编译器，然后再次执行生成的`.exe`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:11:51.963

我认为您正在寻找一种编写 C++ 脚本的方法。看看[http://www.softintegration.com/](http://www.softintegration.com/)或这个 stackoverflow 问题[任何将 Clang 作为脚本解释器嵌入 C++ 代码的教程？](https://stackoverflow.com/questions/3224485/any-tutorial-for-embedding-clang-as-script-interpreter-into-c-code).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:24:14.427

我没有使用过它，但它是免费的，也不会编译而是解释。非常适合你的问题，值得一试...

[http://root.cern.ch/drupal/content/cint](http://root.cern.ch/drupal/content/cint)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T12:26:30.183

为什么不使用 system() 调用独立编译生成的代码？system("g++ temp.cpp -o temp.exe); -- 这类东西，然后根据返回值你可以像 system("temp.exe"); 一样再次运行 temp.exe；当然你可以打印输出从 temp.exe 到一个文件并读取该文件以获取 temp.exe 的输出到您当前的程序..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T12:42:07.777

像[Geordi](http://weegen.home.xs4all.nl/eelis/geordi/)这样的东西会起作用吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T14:37:00.213

您可以像调用任何外部工具一样调用 c++ 编译器。例如`system("g++ test.cpp")`，或使用 popen 或您的平台提供的任何其他内容。

您还可以考虑将实现编译器的库集成到您的程序中。为此，您可能需要研究 clang 和 llvm。

# delphi - dspack、pushsource怎么用呢？

> ID：10173695
> 
> 赞同：5
> 
> 时间：2012-04-16T12:02:18.627
> 
> 标签：delphi, filter, directshow, dspack

我看到了一些主题，例如[如何使用/安装自定义 Directshow 过滤器](https://stackoverflow.com/questions/3560855/how-to-use-install-custom-directshow-filter)来注册过滤器，但没有代码如何使用它。任何人都可以展示如何实际使用该过滤器（pushsource、pushdesktop）保存到 AVI 中的示例吗？

# c# - 使用 iTextSharp htmlparser 错误

> ID：10173697
> 
> 赞同：1
> 
> 时间：2012-04-16T12:02:20.750
> 
> 标签：c#, asp.net, itext

我正在使用`itextsharp`生成 PDF 文件。我收到了这个错误：

> “指定的路径、文件名或两者都太长。完全限定文件名必须小于 260 个字符，目录名必须小于 248 个字符。”

代码：

```
protected void ExportHTMLtoPDF()
{
    Response.ContentType = "application/pdf";
    Response.AddHeader("content-disposition", "attachment;filename=" + HttpContext.Current.Session["StudentID"].ToString() + ".pdf");
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    StringWriter sw = new StringWriter();
    HtmlTextWriter hw = new HtmlTextWriter(sw);
    frmPrint.RenderControl(hw);
    StringReader sr = new StringReader(sw.ToString());
    Document pdfDoc = new Document(PageSize.A3, 0f, 0f, 0f, 0f);
    HTMLWorker htmlparser = new HTMLWorker(pdfDoc);
    PdfWriter writer;
    PdfWriter.GetInstance(pdfDoc, Response.OutputStream);
    pdfDoc.Open();
    pdfDoc.Close();
    Response.Write(pdfDoc);
    Response.End();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:06:24.393

这与您的代码无关 - 这是 Windows 的最大文件名长度。Chris Haas 观察到您的代码显然没有写入任何文件，因此很可能正在创建一个临时文件 - 我猜 HTMLWorker 或 PDFWriter 中的某些内容正在创建一个要写入的临时文件。

您可以使用[ProcessMon](http://technet.microsoft.com/en-us/sysinternals/bb896653)来查找您的应用程序试图打开的文件，并查看导致它抱怨的文件名，这可能会为您提供有关问题出处的指示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T18:53:19.237

问题是 iTextSharp 使用 System.IO。System.IO 依赖于具有此路径长度限制的 win32。因此，唯一的解决方法是尝试集成长文件名黑客或其他解决此问题的库，例如 Alphaleonis。

# iphone - 使用 xib 将 TTViewController 映射为 root

> ID：10173699
> 
> 赞同：0
> 
> 时间：2012-04-16T12:02:30.203
> 
> 标签：iphone, three20

我正在尝试使用three20 创建应用程序，但在为TTnavigator 设置根视图控制器时遇到问题。

这是映射代码

```
 TTURLMap* map = navigator.URLMap;
[map from:@"*" toViewController:[TTWebController class]];
[map from:@"tt://root/(loadFromNib:)/(withClass:)" toViewController:[MainViewController class]]; 
```

显然我做错了什么

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:28:47.697

我终于想通了

这是我的解决方案

```
 -(void)applicationDidFinishLaunching:(UIApplication *)application
{
    TTNavigator * navigator = [TTNavigator navigator];
    navigator.persistenceMode = TTNavigatorPersistenceModeAll;
    navigator.window = self.window;

    TTURLMap* map = navigator.URLMap;
    [map from:@"*" toViewController:[TTWebController class]];
    [map from:@"tt://root/(loadFromNib:)/(withClass:)" toSharedViewController:self];

    if (![navigator restoreViewControllers]) {
        [navigator openURLAction:[TTURLAction actionWithURLPath:@"tt://root/MainViewController/MainViewController"]];
    }

}
/**
 * Loads the given viewcontroller from the nib
 */
- (UIViewController*)loadFromNib:(NSString *)nibName withClass:className {
    UIViewController* newController = [[NSClassFromString(className) alloc]
                                       initWithNibName:nibName bundle:nil];
    [newController autorelease];

    return newController;
}

///////////////////////////////////////////////////////////////////////////////////////////////////
/**
 * Loads the given viewcontroller from the the nib with the same name as the
 * class
 */
- (UIViewController*)loadFromNib:(NSString*)className {
    return [self loadFromNib:className withClass:className];
}

///////////////////////////////////////////////////////////////////////////////////////////////////
/**
 * Loads the given viewcontroller by name
 */
- (UIViewController *)loadFromVC:(NSString *)className {
    UIViewController * newController = [[ NSClassFromString(className) alloc] init];
    [newController autorelease];

    return newController;
}

- (BOOL)application:(UIApplication*)application handleOpenURL:(NSURL*)URL {
    [[TTNavigator navigator] openURLAction:[TTURLAction actionWithURLPath:URL.absoluteString]];
    return YES;
} 
```

# ruby - 与 JSON 的嵌套对象的 ActiveRecord 关系

> ID：10173713
> 
> 赞同：1
> 
> 时间：2012-04-16T12:03:17.007
> 
> 标签：ruby, json, activerecord

我将 ActiveRecord 与 Sinatra 一起使用。我有 AR 关系`Post has_many Comments`。

我需要在 JSON 中创建返回所有帖子及其评论的响应。它应该如下所示：

```
[
    { 
        "id":1,
        "title:"Title_1",
        "comments":[
            { "content":"lorem ipsum", "post_id":1 },
            { "content":"foo bar",     "post_id":1 },
        ]
    },

    { 
        "id":2,
        "title:"Title_2",
        "comments":[
            { "content":"lorem ipsum", "post_id":2 },
            { "content":"foo bar",     "post_id":2 },
        ]
    }
] 
```

我认为创建这样的响应是常见的任务，所以我希望应该有一些好的方法来做到这一点。

我的临时解决方案（下面的代码）工作正常，但它太长且不可读：

```
Post.all.map{|x| x.as_json(include: [:comments]).values[0] }.to_json 
```

这是我发现的另一个解决方案：

```
Post.all.as_json(include: [:comments]).to_json 
```

可悲的是，返回的结构看起来不同，它将每个帖子包装到附加节点`"post: {}"`中。我想避免它。

```
[ 
     { 
          "post":{ 
              "id":1,
              "title:"Title_1",
              "comments":[
                  { "content":"lorem ipsum", "post_id":1 },
                  { "content":"foo bar",     "post_id":1 },
              ]
          }
     },

     { 
          "post":{ 
              "id":1,
              "title:"Title_2",
              "comments":[
                  { "content":"lorem ipsum", "post_id":2 },
                  { "content":"foo bar",     "post_id":2 },
              ]
          }
     }
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T22:38:40.433

尝试：

`ActiveRecord::Base.include_root_in_json = false`

[http://apidock.com/rails/ActiveRecord/Serialization/to_json](http://apidock.com/rails/ActiveRecord/Serialization/to_json)

# ios - textToSpeech 时如何在段落后暂停

> ID：10173715
> 
> 赞同：0
> 
> 时间：2012-04-16T12:03:20.560
> 
> 标签：ios, text-to-speech, ssml

我有一个用于 textToSpeech 的文本。
我想**暂停**从适用于 iPhone 的 Dragon 移动 SDK 读取的文本。文本没有 SSML。只有空白文本。

我可以使用什么样的字符来暂停？我知道在一个“.”之后是一个暂停，我试着做两个。像 ”。 。” 但不起作用。

我怎样才能在***段落*之后暂停？**

例子：

```
Lorem ipsum dolor sit amet, consectetuer adipiscing elit.
//Do here a long pause from 3 seconds
Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:21:05.293

我找到了。没有办法使用 SSML。并且 SSML 令人难以置信 :)
必须在 SSML 中使用 break 标签，请参见此处：[http ://www.w3.org/TR/speech-synthesis/#S3.2.3](http://www.w3.org/TR/speech-synthesis/#S3.2.3)

# c# - 使用 linq 进行数据转换

> ID：10173719
> 
> 赞同：-3
> 
> 时间：2012-04-16T12:03:35.730
> 
> 标签：c#, linq, pivot, pivot-without-aggregate

请我需要将数据表输入 1 中的数据排列到输出表 1

```
 Module  | date(year) |  xrate |  yrate  |  cumrate
----------+------------+--------+---------+---------
 No2_gft       2013        50      65         458
 No2_gft       2014        59      69         458
 No2_gft       2015        59      69         458

 No2_gft       2016        59      65         458

 No3_gft       2013        50      65         458
 No3_gft       2014        59      69         458
 No3_gft       2015        59      69         458

 No4_gft       2016        59      65         458
 No4_gft       2013        50      65         458
 No4_gft       2014        59      69         458
 No4_gft       2015        59      69         458
 No3_gft       2016        59      69         458 
```

至

模块 ; 值类型 ; y2013 ; 2014; 2015；2016 年

No2_gft ; ; 速率；50; 65; 458

No2_gft 年率 65 69

就像转置一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:24:35.080

目前尚不清楚您想如何聚合或排列数据，但如果您想通过以下方式聚合它们，`year`您可以这样做：

```
var query = modules.GroupBy( m => m.date)
                   .Select( g => 
                                 new 
                                 { 
                                     y = g.Key, 
                                     xrate = g.FirstOrDefault( x=> x.xrate),
                                     yrate = g.FirstOrDefault( x => x.yrate)
                                 }); 
```

`FirstOrDefault()`这将为您提供具有聚合函数的分组年份列表：

```
 Year  |   xrate  |  yrate
-------+----------+--------
 2013       50        65
 2014       59        69 
```

或者您可以按匿名类型分组：

```
.GroupBy( m => 
          new
          {
              m.date,
              m.xrate,
              m.yrate
          }) 
```

而不是 only `m.date`，因为您的`date`,`xrate`和`yrate`对于所有行都是相同的。

**编辑：**好吧，为了旋转这个模块列表，我找不到比这更短更容易的东西：

```
var query = Modules.GroupBy(m => m.ModuleValue)
    .Select(g => new { ModuleValue = g.Key, Values = g });
Func<Module, bool> matchy2013 = m => m.Year == 2013;
Func<Module, bool> matchy2014 = m => m.Year == 2014;
Func<Module, bool> matchy2015 = m => m.Year == 2015;
Func<Module, bool> matchy2016 = m => m.Year == 2016;

IList<NewModule> PivotedModules = new List<NewModule>();

foreach (var item in query)
{
    var xrateRow = new NewModule
    {
        ModuleValue = item.ModuleValue,
         ValueType = "xrate",
         y2013 = item.Values.Where(matchy2013).FirstOrDefault().xrate,
         y2014 = item.Values.Where(matchy2014).FirstOrDefault().xrate,
         y2015 = item.Values.Where(matchy2015).FirstOrDefault().xrate,
         y2016 = item.Values.Where(matchy2016).FirstOrDefault().xrate
     };

     var yrateRow = new NewModule
     {
         ModuleValue = item.ModuleValue,
         ValueType = "yrate",
         y2013 = item.Values.Where(matchy2013).FirstOrDefault().yrate,
         y2014 = item.Values.Where(matchy2014).FirstOrDefault().yrate,
         y2015 = item.Values.Where(matchy2015).FirstOrDefault().yrate,
         y2016 = item.Values.Where(matchy2016).FirstOrDefault().yrate
      };

      var cumrateRow = new NewModule
      {
          ModuleValue = item.ModuleValue,
          ValueType = "cumrate",
          y2013 = item.Values.Where(matchy2013).FirstOrDefault().cumrate,
          y2014 = item.Values.Where(matchy2014).FirstOrDefault().cumrate,
          y2015 = item.Values.Where(matchy2015).FirstOrDefault().cumrate,
          y2016 = item.Values.Where(matchy2016).FirstOrDefault().cumrate
       };
       PivotedModules.Add(xrateRow);
       PivotedModules.Add(yrateRow);
       PivotedModules.Add(cumrateRow);
} 
```

给它一个托盘。您应该添加一个新类：

```
public class NewModule
{
    public string ModuleValue { get; set; }
    public string ValueType { get; set; }
    public int y2013 { get; set; }
    public int y2014 { get; set; }
    public int y2015 { get; set; }
    public int y2016 { get; set; }
} 
```

`PivotedModules`应该包含以下数据：

```
 Module  |  ValueType |  2013  |  2014  |  2015  | 2016
         ---------+------------+--------+--------+--------+------
         No2_gft       xrate       50       59       59      59
         No2_gft       yrate       65       69       69      65
         No2_gft      cumrate     458       458     458     458

         No3_gft       xrate       50       59       59      59
         No3_gft       yrate       65       69       69      69
         No3_gft      cumrate     458       458     458     458

         No4_gft       xrate       50       59       59      59
         No4_gft       yrate       65       69       69      65
         No4_gft      cumrate     458       458     458     458 
```

# android - android：sqlite 上的 onUpgrade 对我不起作用

> ID：10173723
> 
> 赞同：0
> 
> 时间：2012-04-16T12:03:50.813
> 
> 标签：android

我在我的数据库上添加了新列（我在这个数据库上有数据）

我有这个代码：

```
@Override 
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    if (newVersion > oldVersion) {
        db.execSQL("ALTER TABLE MEN ADD COLUMN New_Pulse INTEGER DEFAULT 0");
    }
} 
```

但它不会工作，我从哪里得到 oldVersion 和 newVersion ？

现在我这样做了：

```
try{
    db.execSQL("ALTER TABLE MEN ADD COLUMN New_Pulse INTEGER DEFAULT 0");
}
catch (Exception e) {
    // TODO: handle exception
} 
```

它对我有用 - 但我知道它的丑陋解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:19:33.363

您不必自己进行检查；SQLiteOpenHelper 会自动执行此操作！当您输入比以前更高的版本号时，助手会调用`onUpgrade()`方法，您应该在其中处理升级时要执行的操作。

```
....
....
mySqlHelper = new mySqlHelper (context, DATABASE_NAME, null, DATABASE_VERSION);

private static class MySQLHelper extends SQLiteOpenHelper {

    public MySqlHelper(Context context, String name, CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // upgrade code.. 
        // drop tables
        onCreate(db);
    }
} 
```

# c# - ComboBox 需要很长时间才能打开（COMException 错误）

> ID：10173726
> 
> 赞同：3
> 
> 时间：2012-04-16T12:04:11.237
> 
> 标签：c#, combobox, contextswitchdeadlock

这是我的问题的情况：
我有`ListBox`两个类型的项目`MyClass`。
`MyClass`有一个`List<Column>`集合。
在同一个窗口的其他地方，我有一个`ComboBox`选择`MyClass.ColumnCollection`为 ItemsSource 的列。

这是麻烦开始的地方：
我第一次打开 ComboBox 的弹出窗口时一切正常。
当我在 ListBox 中选择其他项目（以及更改 ComboBox 源）时，打开弹出窗口需要超过 10 秒的时间。如果花费的时间超过 60 秒，我会收到以下错误：

```
The CLR has been unable to transition from COM context 0xf13d90 to COM context 0xf13fe0 for 60 seconds. The thread that owns the destination context/apartment is most likely either doing a non pumping wait or processing a very long running operation without pumping Windows messages. This situation generally has a negative performance impact and may even lead to the application becoming non responsive or memory usage accumulating continually over time. To avoid this problem, all single threaded apartment (STA) threads should use pumping wait primitives (such as CoWaitForMultipleHandles) and routinely pump messages during long running operations. 
```

我用谷歌搜索了这个错误，无论我走到哪里，都建议禁用 ContextSwitchDeadlocks 的抛出，这根本不是解决方案！

我对此进行了进一步研究，发现了以下 COMException：

```
An event was unable to invoke any of the subscribers (Exception from HRESULT: 0x80040201) 
```

我不使用线程/任务或其他任何东西，只是在`ComboBox`.
我尝试在选择另一个项目时刷新 ItemsSource，但它没有任何区别，因为它已经正确设置。

我试图用谷歌搜索这个错误，但似乎没有解决这个问题的方法。
微软为此提供了一个[修补程序](http://support.microsoft.com/kb/926997)，但没有下载。

列表框的代码：

```
 <ListBox Margin="468,30,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" Height="420" Width="410"
                            ItemsSource="{Binding ElementName=Window, Path=MyClassItems}"
                            SelectedItem="{Binding ElementName=Window, Path=MyClassItem}"
                            DisplayMemberPath="Name" /> 
```

组合框的代码：

```
 <ComboBox Margin="580,490,0,0" Width="300"
                            VerticalAlignment="Top" HorizontalAlignment="Left" DisplayMemberPath="Name"
                            ItemsSource="{Binding ElementName=Window, Path=MyClassItem.Columns}"
                            SelectedItem="{Binding ElementName=Window, Path=MyClassItem.Column, Mode=OneWay}" SelectionChanged="SelectedColumn_SelectionChanged" /> 
```

SelectionChanged 事件：

```
MyClassItem.Column = (sender as Combobox).SelectedValue as Column; 
```

**问题：**
有人知道如何防止 COMException 吗？

更新 1：
添加了一些 Xaml 代码示例

更新 2：
简化问题

更新 3：
我发现真正的错误是 COM 异常。
用新信息更新了我的问题。

更新 4：
ListBox 中的所有对象都是完整的并且存在于内存中，因此没有查询。此外，无论组合框是 1 还是 100 项，都会出现等待时间。（我测试了两者）。

# html - 打印一个 html 表格

> ID：10173727
> 
> 赞同：2
> 
> 时间：2012-04-16T12:04:15.803
> 
> 标签：html, css

例如，我有下表，如何将打印功能添加到表中？还有一个按钮，点击后，下表将通过打印机打印

```
<table border="1">
<tr>
<th>Header 1</th>
<th>Header 2</th>
</tr>
<tr>
<td>row 1, cell 1</td>
<td>row 1, cell 2</td>
</tr>
<tr>
<td>row 2, cell 1</td>
<td>row 2, cell 2</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T12:07:39.023

您需要创建新样式表 print.css 并设置 CSS media=print

例如 ：

```
<style media="screen">
  .noPrint{ display: block; }
  .yesPrint{ display: block !important; }
</style>

<style media="print">
  .noPrint{ display: none; }
  .yesPrint{ display: block !important; }
</style> 
```

并将类添加到“yesPrint”到您要打印的部分

```
<div class= "yesPrint">
 <table border="1">
 <tr>
 <th>Header 1</th>
 <th>Header 2</th>
 </tr>
 <tr>
 <td>row 1, cell 1</td>
 <td>row 1, cell 2</td>
 </tr>
 <tr>
 <td>row 2, cell 1</td>
 <td>row 2, cell 2</td>
 </tr>
 </table>
 </div> 
```

现在添加一个按钮

```
<input TYPE="button" onClick="window.print()"> 
```

更多细节：http: [//www.codeproject.com/KB/HTML/Printing_with_CSS.aspx](http://www.codeproject.com/KB/HTML/Printing_with_CSS.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T12:08:33.070

我使用这个功能：

```
<script type="text/javascript">
function PrintElem(elem)
    {
        Popup($(elem).html());
    }

    function Popup(data)
    {
        var mywindow = window.open('', 'my div', 'height=400,width=600');
        mywindow.document.write('<html><head><title></title>');
        /*optional stylesheet*/ //mywindow.document.write('<link rel="stylesheet" href="main.css" type="text/css" />');
        mywindow.document.write('</head><body style="direction:rtl;"><pre>');
        mywindow.document.write(data);
        mywindow.document.write('</pre></body></html>');
        mywindow.document.close();
        mywindow.print();
        return true;
    }
</script> 
```

您可以根据需要对其进行修改。
事实上，它会打开一个包含该元素的新窗口并打印它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-20T04:29:50.163

一种方法是在新页面中打开表。您可以通过将表单的 javascript 提交到新页面来执行此操作，并传递构建表所需的所有变量。

```
<form name = "theform" .... >
<input type = "hidden" name = "something" value = "importantdata">
  ... stuff
</form>

<script type = "text/javascript">
submit('theform')
</script> 
```

然后将代码与您的按钮一起放在新页面上生成表格。如果您不想要一个按钮，您仍然可以通过简单地在您的 html 代码中引用您的 javascript 函数来调用打印函数：

```
<script type = "text/javascript">
printit()
</script> 
```

您还可以使用 javascript window.open() 方法在新页面中打开表格。如果您没有太多变量要传递到新窗口，这是一个很好的方法。您可以通过 url 变量传递一些小东西，您可以在 javascript 函数中进行设置。

我还使用了一种方法，让我停留在同一页面上，用户可以单击某些内容来删除除表格之外的所有内容的显示。这是通过将可移动的东西包装在 div 中来完成的

```
<div id= "remove">
   stuff
</div> 
```

当用户单击时，触发的 javascript 函数将该 ID 的显示设置为“无”。

```
document.getElementById('remove').style.display = 'none'; 
```

第二次单击可恢复显示。点击不必在按钮上。我已经在报告标题上使用了它，因此除了报告本身之外，所有内容都会消失。你可以把它放在你的一个表格单元格上。

无论如何，window.print() 方法只会为打印机打开一个窗口；然后，用户可以根据自己的意愿设置打印作业，确保打印机已打开等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T12:06:07.120

`js`方式：（你不能只打印表格）

```
<FORM>
<INPUT TYPE="button" onClick="window.print()">
</FORM> 
```

`c#`方式 ：

您应该打开一个带有样式或水晶报表的新页面或容器 - 并使用 c# 命令进行打印。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T12:12:50.723

实际上你只能打印表格。[它需要一些 JavaScript 魔法（受此页面](http://www.808.dk/?code-javascript-print)启发）。这个想法是我们打开一个新页面（JS-window 元素），将表格插入该页面并打印它。不同的浏览器可能存在一些可移植性问题。此外，一些浏览器可能会抱怨弹出窗口，但是是的..理论上它应该可以工作。:-)

代码可能看起来像这样；

```
<script type="text/javascript">
  var win = window.open(); // We create the window

  win.document.open(); // We open the window (popup-warning!)
  win.document.write("<h1>Hello world</h1>"); // Insert table here <--

  win.print(); // Print the content
  win.close(); // Close down the page
</script> 
```

# iphone - 移动网站图库。使用捏合退出全屏

> ID：10173733
> 
> 赞同：-1
> 
> 时间：2012-04-16T12:04:25.507
> 
> 标签：iphone, ios, photoswipe

我有一个客户在他的移动网站上请求了一项功能。捏以退出全屏图像模式。据我了解，您可以通过这种方式退出 iPad 上的图像查看器。

这可能吗？我目前正在使用 photoswipe 在移动设备上显示图库。

网站是：[gothage.com](http://gothage.com)

非常感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:59:52.257

SO中的iOS标签通常专门用于为iOS操作系统编写Objective C程序，所以你可能把这个问题引错了地方。我建议在[PhotoSwipe 问题](https://github.com/codecomputerlove/PhotoSwipe/issues)论坛上提问。典型的 iOS 解决方案（例如[Gesture Recognizers](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html)）不适用于网站。

# python - 对 2^30 个 32 位整数进行排序。最佳解决方案

> ID：10173740
> 
> 赞同：1
> 
> 时间：2012-04-16T12:05:06.413
> 
> 标签：python, algorithm, sorting, computer-science

我有一个包含 2^30 个无符号 32 位整数值的文件，我需要对它们进行排序，所以我想用最快的算法来完成它。需要使用所有可用的处理器并且使用不超过 256MB 的内存。

我现在的想法：最大 int 值（对于 32 位整数）Sm= 2^32，最低 = 0。可用内存为 M=2^28。

*   为

    Sm*(sizeof int)/M = 2^32*2^5/2^28 = 2^9 份；每个零件尺寸 2^32/2^9 = 2^23。

首先，编写一个简单的阅读器，从输入文件中读取 int 值，检查它位于哪个范围内，并将该范围内的整数放入 tempfile。之后我将有 2^9 个文件：

```
1 file= Integers from 0:2^23
2 file = 2^23:2^24
3 file = 2^24:(2^24+2^23),
and etc... 
```

*   使用 qsort 或金字塔排序等标准算法进行排序（对此算法有什么建议吗？）

我可以在这里使用 Python.multiprocessing 之类的东西进行并行排序，但它需要在每个进程开始之前安全地计算可用内存

您如何看待这种方法？可能存在更干净和更容易的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:10:31.450

1.  一次读取任何适合您内存的内容（我们称其为块），对其进行排序并将其写回磁盘（即对 256 MB 的块进行排序）
2.  同时打开所有块，从每个块中读取前 n 个条目并构建一个[堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)（其中 n 是这样的，您可以填充 256 MBytes）
3.  从堆中获取最小元素（注意它来自哪个块），将其写入目标文件
4.  从同一输入块中读取下一个元素并将其添加到堆中并重复上一步，直到处理完所有数据

256 MBytes 是 2^28 字节或 2^26（四字节）整数，因此您只需要对 2^4 = 16 个块进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T12:19:12.693

“无符号 32 位整数值”是这里的关键点。您可以使用[radix sort 对其进行排序](http://en.wikipedia.org/wiki/Radix_sort)。Wiki 页面提供[了 Python 中的完整示例](http://en.wikipedia.org/wiki/Radix_sort#Example_in_Python)。

由于您没有足够的内存一次对所有内容进行排序，因此您必须将工作分成适合内存的部分，对每个部分进行排序，将结果保存到磁盘，然后以类似于[merge sort](http://en.wikipedia.org/wiki/Merge_sort)的 merge pass 的方式合并结果。合并不需要将整个内容加载到内存中，您所要做的就是从部分读取，同时写入最终结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T09:10:54.350

1）。将整数分成几部分

```
a. [0, 2^20 - 1], [2^20, 2^21 - 1].... 
```

2）。对于每个部分，您可以计算每个整数的计数（类似于基数排序），每个部分的时间复杂度是该部分的长度。并且空间复杂度也是零件的长度。

```
// for each part
int start = 0;      // the starting point of the part
int end = 2^20 - 1; // the ending point of the part
int *hash = new int[end - start + 1];
for (int i = start; i <= end; ++i) {
    // read a integer val
    ++hash[val];
}
for (int i = start; i <= end; ++i) {
    if (hash[i] > 0) {
        for (int j = 0; j < hash[i]; ++j) {
            // print i
        }
     }
} 
```

3）。因为你有 256MB = 256 * 2^20 = 64 * 2^20(int)，所以你可以并行处理 64 个部分。如果需要，您可以将 2^20 设置为其他值。

4）。无论如何，这个算法的总时间复杂度应该是O(n) + O(2 ^ 32)，n表示整数的个数。当 n 非常大，接近 2^32 时，该算法效果很好。此外，该算法可以并行处理。

5）。该算法不需要合并过程，因为部分已排序。

6）。上面提到的堆解决方案似乎不是并行处理的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T12:22:22.543

考虑使用合并排序。可以在此处找到简短描述：[http ://en.wikipedia.org/wiki/Merge_sort](http://en.wikipedia.org/wiki/Merge_sort)

合并排序非常适合并行实现和内存限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T17:50:47.760

基数排序通常被称为 O(n)，但实际上是 O(nlogn)，因为它需要的时间与最大数的位数 * 数的个数成正比，并且位数会趋于为log(n)。

我建议使用 3 级复合排序：

1.  对于长度约为 32 或 64 的小型子列表的插入排序 - 找到最佳的基准 - timsort 为您涵盖了这一点。
2.  大型子列表的 timsort 或合并排序，直到您的最大物理内存量。timsort 被 Python 和 Java 用于他们的排序方法，并且速度非常快，但它是一种比合并排序更复杂的算法，如果你在 C 之类的东西中工作，这很重要 - 所以如果你只需要一些工作得很好并且是很简单，使用mergesort。
3.  在大文件中，使用合并排序来合并包含已排序大子列表的已排序文件。

Python 的多处理模块允许您将标量类型（如整数）的数组存储在共享内存中。'只是要记住的事情。

绝对让每个核心对一个大的子列表进行排序 - 这对具有多个核心的系统有很大帮助。有时对#3 使用 minheap 是很好的，有时你最好只使用一个数组（对于较小数量的大型子列表）。

# uml - 使用 Rational 工具从 UML 模型生成文档？

> ID：10173741
> 
> 赞同：-1
> 
> 时间：2012-04-16T12:05:07.697
> 
> 标签：uml, rational-rsa, rup

有谁知道是否有一个可用的工具可以从理性工具集中的 UML 模型生成 RUP 样式的工件（即 Rational Software Architect、App Developer 等）？

具体来说，我需要能够从类（以及可能的序列）图中提取信息并创建软件设计文档，最好使用 Word（或者可能是 PDF）。

我已经尝试过 BIRT，但它只是不可用。还有其他东西吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:43:54.230

几年没有使用它，但[SoDA](http://publib.boulder.ibm.com/infocenter/rsdvhelp/v6r0m1/index.jsp?topic=/com.ibm.xtools.soda.doc/topics/t_generate_sodaword.html)曾经是使用 Rational 工具生成文档的主要方式。那时候不免费，现在不知道。

这是我所知道的唯一“开箱即用”的文档生成器。但是，您应该能够通过将模型信息提取到某种中间格式然后生成文档来使用一些/大部分[Eclipse 建模工具来滚动您自己的建模工具。](http://www.eclipse.org/modeling/)因此，例如，您可以：

*   使用[xtend2](http://www.eclipse.org/xtend/)提取模型信息并写入重组文本文件
*   使用[sphinx](http://sphinx.pocoo.org/)从 .rst 文件生成 html 或 pdf。

hth。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:43:42.697

有[Rational Publishing Engine](http://www-01.ibm.com/software/awdtools/pubengine/)。

我不确定这与 BIRT 或 SoDA 的相似程度，无论是重新散列还是从头开始实现还是什么，但这是 IBM 目前支持的。

我没有第一手的经验，但我有一个同事，他似乎喜欢它。

# c# - 在 wp7 中重置应用程序设置

> ID：10173742
> 
> 赞同：2
> 
> 时间：2012-04-16T12:05:11.983
> 
> 标签：c#, windows-phone-7

我创建了一个应用程序，它最初创建一个数据库并在其中保存一些数据。现在我想在用户单击重置按钮时删除此数据库及其文件，但我收到错误消息 - “这是在另一个进程中使用”。我希望它在单击重置按钮时删除并重新创建数据库。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T02:44:01.830

最常见的原因是与 Windows Phone 上的隔离存储交互的线程*不安全性质。*无论您如何实现数据库（无论是在一个文件中，还是在一系列文件中），您都在某种程度上与隔离存储进行交互。

我强烈建议您阅读，并确保您了解[隔离存储的概述，](http://msdn.microsoft.com/en-us/library/ff402541(v=vs.92).aspx)然后再走得太远。

你说：

> 这是在另一个进程中使用

让我觉得你正在使用第三方库来做你的数据库工作。当库本身无法访问隔离存储时，将引发此异常/错误。在不确切知道您是如何实现数据库的情况下，很难准确地说明您的情况。

您永远不会“重新创建独立存储”，独立存储是用于定义应用程序可以访问的磁盘空间集合的术语。与文件夹非常相似，此磁盘空间有一个根目录，并且仅包含您创建的文件。

为了避免在访问独立存储时出现线程异常，请确保在 C# 中[使用 using](http://msdn.microsoft.com/en-us/library/yh598w02(v=vs.80).aspx)关键字，如下所示：

```
namespace IsolatedStorageExample
{
    public class ISOAccess
    {
        // This example method will read a file inside your Isolated Storage.
        public static String ReadFile(string filename)
        {
            string fileContents = "";
            // Ideally, you should enclose this entire next section in a try/catch block since
            // if there is anything wrong with below, it will crash your app.
            // 
            // This line returns the "handle" to your Isolated Storage. The phone considers the
            // entire isolated storage folder as a single "file", which is why it can be a 
            // little bit of a confusing name.
            using(IsolatedStorageFile file = IsolatedStorageFile.GetUserStoreForAppliaction())
            {   
                // If the file does not exist, return an empty string
                if(file.Exists(filename))
                {
                    // Obtain a stream to the file
                    using(IsolatedStorageFileStream stream = File.OpenFile(filename, FileMode.Open)
                    {
                        // Open a stream reader to actually read the file.
                        using(StreamReader reader = new StreamReader(stream))
                        {
                            fileContents = reader.ReadToEnd();
                        }
                    }
                }   
            }

            return fileContents;
        }
    }
} 
```

这应该有助于解决线程安全问题。为了对您想要做的事情更有帮助，请查看以下方法（您可以将其添加到上面的类中）：

```
// BE VERY CAREFUL, running this method will delete *all* the files in isolated storage... ALL OF THEM
public static void ClearAllIsolatedStorage()
{
    // get the handle to isolated storage
    using(IsolatedStorageFile file = IsolatedStorageFile.GetUserStoreForApplication())
    {
        // Get a list of all the folders in the root directory
        Queue<String> rootFolders = new Queue<String>(file.GetDirectoryNames());

        // For each folder...
        while(0 != rootFolders.Count)
        {
            string folderName = rootFolders.Dequeue();

            // First, recursively delete all the files and folders inside the given folder.
            // This is required, because you cannot delete a non-empty directory
            DeleteFilesInFolderRecursively(file, folderName);

            // Now that all of it's contents have been deleted, you can delete the directory
            // itsself.
            file.DeleteDirectory(rootFolders.Dequeue());
        }

        // And now we delete all the files in the root directory
        Queue<String> rootFiles = new Queue<String>(file.GetFileNames());
        while(0 != rootFiles.Count)
            file.DeleteFile(rootFiles.Dequeue());
    }
}

private static void DeleteFilesInFolderRecursively(IsolatedStorageFile iso, string directory)
{
    // get the folders that are inside this folder
    Queue<string> enclosedDirectories = new Queue<string>(iso.GetDirectoryNames(directory));

    // loop through all the folders inside this folder, and recurse on all of them
    while(0 != enclosedDirectories.Count)
    {
        string nextFolderPath = Path.Combine(directory, enclosedDirectories.Dequeue());
        DeleteFilesInFolderRecursively(nextFolderPath);
    }

    // This string will allow you to see all the files in this folder.
    string fileSearch = Path.Combine(directory, "*");

    // Getting the files in this folder
    Queue<string> filesInDirectory = iso.GetFileNames(fileSearch);

    // Finally, deleting all the files in this folder
    while(0 != filesInDirectory.Count)
    {
        iso.DeleteFile(filesInDirectory.Dequeue());
    }
} 
```

我强烈推荐的另一件事是使用此处描述的“多线程单例模式”实现访问独立存储的类[。](http://msdn.microsoft.com/en-us/library/ff650316.aspx)

希望这会有所帮助。代码是“按原样”提供的，我没有编译它，但一般概念都在那里，所以如果有什么不对劲，请阅读 MSDN 文档，看看我哪里出错了。但我向你保证，其中大部分内容都是从我的功能代码中复制而来的，因此它应该可以正常工作，并且很少有任何煽动性。

# sftp - 如何在 Mule ESB CE 中暂停 SFTP 连接器

> ID：10173747
> 
> 赞同：0
> 
> 时间：2012-04-16T12:05:44.403
> 
> 标签：sftp, polling, mule, connector

在 Mule ESB CE 3.2.1 中，我需要暂停 SFTP 连接器的轮询，然后在指定的时间间隔后重新启动它。

您知道是否有可能，必要时使用 Mule 的 API？

而且，如果可能的话，我如何断开并重新连接 SFTP 客户端？

提前致谢，

加布里埃尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:19:47.963

我建议您首先尝试通过[JMX](http://www.mulesoft.org/documentation/display/MULE3USER/JMX+Management)练习暂停/停止/启动，以确定您想要与哪个 Mule 组件进行交互（SFTP 连接器？使用连接器的流程？只是 SFTP 入站端点？）。

当您确切地决定了要做什么时，您可以这样做：

*   通过直接在 Mule MBean 上的 JVM 中的 JMX 调用，
*   通过 Mule API 调用，首先在[注册表](http://www.mulesoft.org/docs/site/current3/apidocs/index.html?org/mule/api/registry/Registry.html)中定位目标组件。

# caching - Varnish 如何知道每个响应缓存多长时间？

> ID：10173749
> 
> 赞同：8
> 
> 时间：2012-04-16T12:05:51.663
> 
> 标签：caching, reverse-proxy, varnish

Varnish 是否只是跟随`Cache-Control`源服务器的标头？

还有其他方法可以控制它缓存响应的时间吗？例如，您是否可以告诉 Varnish“无限期地”缓存响应（即“直到另行通知”），然后当您知道基础数据已更改时，明确指示它从缓存中删除该对象？

（请注意：我从未使用过 Varnish；我只是想弄清楚它是否适合即将到来的项目。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T22:50:27.963

这些都是非常基本的问题。我认为您应该从阅读[https://www.varnish-cache.org/docs/上的优秀文档开始](https://www.varnish-cache.org/docs/)

回答您的问题：这取决于您如何配置清漆。

您可以保留默认值，以便它使用 expires；

您可以将其设置为每个域/后端/文件类型/cookie 具有不同的 TTL（生存时间）...

如果你用 ie 设置它。1 年缓存 TTL，您可以通过“清除”特定地址/url 或整个域将其从缓存中删除。

您可以通过两种方式做到这一点：

1.  如果您在 vcl 文件中配置了 PURGE HTTP 方法
2.  通过在 varnishadm/varnish 控制台中使用清除命令

[https://www.varnish-cache.org/docs/2.1/tutorial/purging.html](https://www.varnish-cache.org/docs/2.1/tutorial/purging.html)

# python - Python中方程的复数根

> ID：10173750
> 
> 赞同：-5
> 
> 时间：2012-04-16T12:05:54.637
> 
> 标签：python, math, scipy, sympy

我正在尝试解决以下等式，

```
def f(u1, u2, u3, u4, a11, a16, a12, a66, a26, a22):
    return a11*u4-2*a16*u3+(2*a12+a66)*u2-2*a26*u1+a22 
```

`u1`to`u4`是我想要根的复杂变量，`f() = 0`to是`a11`需要传递给函数`a66`的 arguments( )。`floats`我已经看过`scipy.optimize.fsolve()`但`sympy`无法让任何一种方法正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T20:18:11.000

您有四个变量的一个线性方程，因此您没有唯一的解决方案。C^4 中解的超平面中的任何点都会使您的函数为零。

如果您没有任何其他约束，您唯一可以做的就是将其中一个 U 变量表示为其余变量的明显线性函数。

sympy.solve 将完全做到这一点：

```
In [1]: solve('a11*u4-2*a16*u3+(2*a12+a66)*u2-2*a26*u1+a22', 'u1')
Out[1]: 

⎡a₁₁⋅u₄ + 2⋅a₁₂⋅u₂ - 2⋅a₁₆⋅u₃ + a₂₂ + a₆₆⋅u₂⎤
⎢───────────────────────────────────────────⎥
⎣                   2⋅a₂₆                   ⎦ 
```

来自 scipy 的数值例程不会收敛，因为解决方案形成了一个超平面。

# php - 运行 PHP 程序后对变量值的混淆

> ID：10173755
> 
> 赞同：2
> 
> 时间：2012-04-16T11:56:19.703
> 
> 标签：php, variables, post-increment

我正在为我的期末考试而学习，我遇到了这个问题：

> 考虑以下 PHP 代码，执行后编写输出
> 
> ```
> <?php
>  $a=3;
>  $b=$a++;
>  IF($a>$b)
>  {
>    echo "a>$b";
>  }
>  else if ($a == $b)
>  {
>    echo "a=$b";
>  }
>  else
>  {
>    echo "a < $b";
>  }
>  ?> 
> ```

当我在我的文本编辑器中输出它时，我得到了`a < 3`，但我不明白为什么？

我认为 a 分配给 3 并且 b 也分配给 a++ 3 和 3==3 所以应该打印出 a==3 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T12:09:20.810

不，您在`$a`. 因此，`$b`将被分配一个值 3，然后，当执行该语句时，`$a`它会自增 1，并变为 4。所以，您现在将比较`$a as 4`和`$b as 3`。

因此你得到结果`a > 3`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T12:10:16.517

`$a++`递增发生在表达式被评估之后，而*发生*`++$a`在*之前*。

所以在你的情况下，`$b`首先设置为 3，然后`$a`增加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T12:07:51.783

`$a++`明确告诉变量`$a`增加，无论您是否分配给另一个变量！`if ($a++ > 10) { // ...`这提供了执行诸如循环之类的 事情的可能性。

对于您的情况，您必须采取`$b = $a + 1;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T12:15:27.837

我测试了你的代码，我得到：

```
a>3 
```

这是有道理的

$a 是 3，但是当你做 $a++ 时增加到 4

$b 只是 $a 在 ++ 动作之前，所以它保持 3

想想那`$a++`是`$a = $a + 1`有道理的

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T12:10:34.943

```
<?php
 $a=3;
 $b=$a++;
// $b = 3 and $a = 4 now
 IF($a>$b)
 {
   echo "a>$b";
 }
 else if ($a == $b)
 {
   echo "a=$b";
 }
 else
 {
   echo "a < $b";
 }
 ?> 
```

# vim - Vim 正则表达式替换标签

> ID：10173761
> 
> 赞同：0
> 
> 时间：2012-04-16T08:50:55.787
> 
> 标签：vim, regex

我正在寻找一个正则表达式来从文本文件中删除电子邮件地址。

输入文件：

```
Hannah Churchman <xxxx@xxxxxxxx.com>; Julie Drew <xxxx@xxxxxxxxx.com>; 
```

输出文件：

```
Hannah Churchman; Julie Drew; 
```

我认为像 s/<(.*?)>//g 这样的通用正则表达式将是一个很好的起点，但我无法找到使用 Vim 的正确表达式？

就像是

```
:%s/ <\(.*?\)>//g 
```

不起作用。错误是“E486：找不到模式：”。

```
:%s#[^ <]*>##g   almost works but it leaves  the space and < behind.
:%s# <##g  to remove the " <" remaining stuff. 
```

有关如何更好地制作此命令的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:26:14.953

我在您的样本上尝试了这个正则表达式，它似乎有效：`:s/\s<[^\>]*>//g`

# php - 通过 LDAP 获取域控制器的“highestCommittedUSN”属性

> ID：10173770
> 
> 赞同：1
> 
> 时间：2012-04-16T12:06:36.590
> 
> 标签：php, active-directory

我目前正在编写一个 PHP 脚本，该脚本将通过 LDAP 轮询 Active Directory 以挑选出修改过的对象（人/用户）。

`uSNChanged`当我有值时，我可以过滤，如下所示：

```
$previousUsn = '1234';
$ldapCon = ldap_connect('ldap-host');
$ldapBind = ldap_bind($ldapCon, 'ldap-user', 'ldap-password');
$sr = ldap_search($ldapCon, "ou=Users,dc=foo", "uSNChanged >= $previousUsn"); 
```

据此[，](http://msdn.microsoft.com/en-us/library/ms676895.aspx)我应该能够检索`highestCommittedUSN`可用于脚本初始运行的属性。我一直在寻找如何使用 PHP 和 LDAP 来完成这项工作，但无济于事。

或者，随意提出完全不同的检索 AD 变化的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:47:13.250

`ldap_read(...)`似乎可以解决问题：

```
function getHighestCommittedUsn() {
    ldap_bind(...);
    $sr = ldap_read($ldapCon, null, "(highestcommittedusn=*)", array("highestcommittedusn"));
    $rs = ldap_get_entries($ldapCon, $sr);

    return $rs[0]["highestcommittedusn"][0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:46:39.810

尝试在 ldap_search 调用中将搜索库（第二个参数）设置为`""`. 该属性位于名为 的伪对象上`RootDSE`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T00:02:09.983

也许如果没有正确初始化 biffins 函数？嗯尝试更改 c_willygham 的变量类型

# core-data - 消息应用程序 - 对话 lastMessage

> ID：10173779
> 
> 赞同：1
> 
> 时间：2012-04-16T12:07:35.200
> 
> 标签：core-data

这必须是一个常见问题，我在 SO 中发现了很多相关问题，但没有一个解决方案。

我有这两个核心数据模型：

```
@class Message;
@interface Conversation : NSManagedObject
@property (nonatomic, retain) NSString * number;
@property (nonatomic, retain) NSSet *messages;
@property (nonatomic, retain) Message *lastMessage; 
```

和

```
@class Conversation;
@interface Message : NSManagedObject
@property (nonatomic, retain) NSString * account;
@property (nonatomic, retain) NSDate * date;
@property (nonatomic, retain) NSString * message;
@property (nonatomic, retain) NSNumber * sentFlag;
@property (nonatomic, retain) NSString * status;
@property (nonatomic, retain) Conversation *conversation; 
```

在我的`ConversationListViewController`我获取所有由`lastMessage.date`.
然后`ConversationViewController`接收 a`Conversation`并列出它的`messages`。

现在我正在`lastMessage`手动处理，所以每次添加新消息时，在 ConversationViewController 中，我也会更新`conversation.lastMessage`.
有更好的方法吗？
因为现在，我只有一个地方可以插入/更新一条新消息，但是如果有类似插入/更新触发器之类的东西听起来会更好..

我知道我可以获取所有对话，然后使用 sortdescriptor 对它们进行排序，`messages.@max.date`但这对于大量消息/对话来说并不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:18:29.333

我真的认为没有比设置更优雅或更好的方法了`newMessage.conversation.lastMessage = newMessage`。Core Data 每次添加或更改实体时都会发布通知，但我不认为观察它们会更容易，然后在每次创建新消息时添加这行代码。

# windows-server-2008 - windows 2008 server R2 - 最近更新后远程桌面崩溃

> ID：10173782
> 
> 赞同：1
> 
> 时间：2012-04-16T12:07:43.180
> 
> 标签：windows-server-2008, rpc, remote-desktop, rdp

我最近更新了服务器（仅从 windows 服务器推荐的安全更新），安装后我不得不重新启动 windows 服务器，但是在重新启动服务器后，所有端口都关闭了，我无法访问 RDP（无法访问sql server 数据库，无法访问 tfs ...) 。目前我只能通过 ssl 访问服务器，并且只能访问服务器上的 cmd 领事。任何人都可以帮忙吗？（服务器在 ISP 中，它是专用服务器）。

**原因：** 先安装kb2667402再安装Sp 1更新

**影响：**

1.  没有可用的 RDP
2.  Windows 阻止用户权限并且无权启动服务

***ex*** TFS 服务使用 TFSSERVICE USER，但是 win2008r2 阻止该用户并说该用户不存在！我们所做的：

1.  卸载kb2667402
    后卸载kb2667402，我已经导出了已安装的更新，证明已成功删除更新。
2.  删除并复制system32中旧版本的rdpcorekmts.dll

3.  重新配置 RDP 并为防火墙添加新端口和规则

4.  重置防火墙并添加新规则（我们做了备份）

5.  添加带有修复密码的Teamviewer便携式版本，但我们无法访问电视，“身份验证被拒绝”

6.  安装了RAdmin-->无法访问：用户名或密码错误！
7.  尝试使用计算机管理从我的电脑连接到服务器并收到错误：RPC 服务器不可用
8.  我已经停止了防火墙，并且可以从我的 pc 事件查看器访问远程服务器，并且可以跟踪服务器上的错误。

**报告的问题**

[http://support.microsoft.com/kb/2667402](http://support.microsoft.com/kb/2667402)

[http://tmkilla.com/2012/04/windows-server-2008-r2-rdp-connection-error-sp1-kb2667402/](http://tmkilla.com/2012/04/windows-server-2008-r2-rdp-connection-error-sp1-kb2667402/)

我已经尝试了所有的东西，但没有解决问题。一个想法如何解决这个问题？

# jakarta-ee - Cookie 值不变。每次获取上一个值

> ID：10173788
> 
> 赞同：1
> 
> 时间：2012-04-16T12:08:04.307
> 
> 标签：jakarta-ee, jsf-2

我正在使用 cookie。当您第一次打开页面时，我像这样设置 cookie

```
public class SessionTimeoutFilter implements Filter {

    public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain)
        throws IOException, ServletException {

        Object isRegistered = session.getAttribute("logedin");
         if (isRegistered != null) {
             String isRegisteredUser = isRegistered.toString();
             if (isRegisteredUser.equalsIgnoreCase(("1"))) {
                 sessionID = UUID.randomUUID().toString();               
                 session.setMaxInactiveInterval(240);   //4min
                 Cookie userCookie = getCookie(httpServletRequest, "userCookie");
                 if (userCookie != null) {

                      //Value not setting here
                      Cookie loginUserCookie = new Cookie("userCookie", "loginUser");
                      httpServletResponse.addCookie(loginUserCookie);
                 }
                 filterChain.doFilter(httpServletRequest, httpServletResponse);
             }
         } else {
             sessionID = httpServletRequest.getRequestedSessionId();
             sessionValid = httpServletRequest.isRequestedSessionIdValid();

            //User open his browser
            if (sessionID == null && !sessionValid) {
                sessionID = UUID.randomUUID().toString();
                Cookie browserCookie = new Cookie("browserCookie", sessionID);
                httpServletResponse.addCookie(browserCookie); 
                Cookie userCookie = new Cookie("userCookie", "normal");
                httpServletResponse.addCookie(userCookie);

                session.setAttribute("logedin", "0");
                filterChain.doFilter(httpServletRequest, httpServletResponse);

            //Session expires. Each time user close the tab and session expires automatically
            } else if(sessionID != null && !sessionValid) { 
                if (httpServletRequest.isRequestedSessionIdFromCookie()) {
                    Cookie userCookie = getCookie(httpServletRequest, "userCookie");
                    String value = userCookie.getValue();

                    //Each time getting normal
                    if (value.equalsIgnoreCase("normal")) {
                        session.setAttribute("logedin", "0");
                        filterChain.doFilter(httpServletRequest, httpServletResponse);
                    } else if (value.equalsIgnoreCase("loginUser")) {

                    }
                } //end of if (httpServletRequest.isRequestedSessionIdFromCookie())
            }
         }
   } //end of dofilter()
} //end of class SessionTimeoutFilter 
```

当您第一次打开页面时，条件`if (sessionID == null && !sessionValid)`变为 true，并且 userCookie 设置为正常值。现在，如果您关闭浏览器选项卡，则再次打开页面。cookie 值正常。好的。

但是现在，当您登录时，就会出现 condition `if (isRegisteredUser.equalsIgnoreCase(("1")))`。在这里我试图替换 userCookie 值，比如

```
Cookie userCookie = getCookie(httpServletRequest, "userCookie");

            if (userCookie != null) {

                String value = userCookie.getValue();

                //delete the cokie
                //userCookie.setValue("loginUser");
                //userCookie.setMaxAge(0);

                Cookie loginUserCookie = new Cookie("userCookie", "loginUser");
                httpServletResponse.addCookie(loginUserCookie);

            } 
```

但是这两种方法都不起作用。现在，如果我关闭浏览器，然后再次打开页面，然后在条件下

```
if (value.equalsIgnoreCase("normal")) {

    session.setAttribute("logedin", "0");
    filterChain.doFilter(httpServletRequest, httpServletResponse);

} else if (value.equalsIgnoreCase("loginUser")) {

} 
```

作为 userCookie 值，我再次变得正常。这次它应该让我获得值“loginUser”，因为我已将 userCookie 的值更改为 loginUser。但是我在这里变得正常了。为什么我得到以前的值。我做错了什么？请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T09:07:01.090

设置cookie路径，解决类似问题

```
Cookie userCookie = new Cookie("userCookie", "loginUser");
userCookie.setPath("/");
httpServletResponse.addCookie(userCookie); 
```

设置cookie路径后，值被替换。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:17:58.917

如果您的 cookie 没有定义过期或最长期限 - 它被视为会话 cookie，当用户关闭浏览器时将自动删除。见[http://en.wikipedia.org/wiki/HTTP_cookie#Expires_and_Max-Age](http://en.wikipedia.org/wiki/HTTP_cookie#Expires_and_Max-Age)

您必须为您的 cookie 设置一个到期日期。请参阅：[http://docs.oracle.com/javaee/1.4/api/javax/servlet/http/Cookie.html#setMaxAge(int)](http://docs.oracle.com/javaee/1.4/api/javax/servlet/http/Cookie.html#setMaxAge(int))

```
 Cookie loginUserCookie = new Cookie("userCookie", "loginUser");
            loginUserCookie.setMaxAge(3600); // cookie expires in an hour 
            httpServletResponse.addCookie(loginUserCookie); 
```

# jquery - jQuery ajax 请求中的错误和成功回调

> ID：10173799
> 
> 赞同：0
> 
> 时间：2012-04-16T12:08:44.370
> 
> 标签：jquery, ajax

随着闲置的ajax调用。

```
$.ajax({
    url: url,
    data: data,
    type: 'POST',
    error: error,
    success: success
)} 
```

是否有可能没有错误，成功将被称为。如果是，在什么样的情况下会发生？

我问是因为从服务器日志中怀疑错误未调用某种错误（连接问题？也许），但我无法在本地重现这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:15:23.100

显然，如果 JSONP 请求失败，`success`也`error`不会调用。从[文档](http://api.jquery.com/jQuery.ajax/)中：

> **`error(jqXHR, textStatus, errorThrown)`**
> 注意：跨域脚本和 JSONP 请求不调用此处理程序。

但是由于您的电话似乎不是这种性质，我会说每次都有一个电话。

# ios - 如何在 Lion 上测试 iPhone 3G/3GS 和 iOS 3/4 的 iOS 应用兼容性？

> ID：10173803
> 
> 赞同：1
> 
> 时间：2012-04-16T12:08:55.113
> 
> 标签：ios, testing, osx-lion, compatibility, backwards-compatibility

当我在 Snow Leopard (Mac OS X 10.6) 上进行开发时，Xcode 有一个很好的列表，列出了以前的 iOS 版本和 iPhone/iPad 代用于兼容性测试。

现在我“升级”到了 Lion（因为 Xcode 4.3/iOS SDK 5.1 需要它），所有这些模拟器版本突然消失了，只剩下 iOS 5.1 来测试。Xcode 4.2 不能在 Lion 上运行，即使它也不想被卸载。

所以，问题是，我如何在 Lion OS 上的旧版本固件和硬件上测试我的应用程序，而无需实际拥有所有这些设备？我能以某种方式让 Xcode 4.2 附带的模拟器在 Lion 上运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:26:11.620

在您选择模拟器的地方转到xCode，然后点击更多模拟器

![在此处输入图像描述](../Images/a0fdfe99f690958925488715008e8bdc.png)

您将通过可以安装任何旧版本的模拟器获得以下屏幕。

![在此处输入图像描述](../Images/0a1b031c2068f677418933dad755f78a.png)

祝你好运。

# asp.net-mvc-3 - 主机 MVC3 上的应用程序之间的身份验证

> ID：10173804
> 
> 赞同：0
> 
> 时间：2012-04-16T12:08:55.863
> 
> 标签：asp.net-mvc-3, forms-authentication

请帮我这样做，
我有 2 个带有表单身份验证的 MVC3 应用程序。像这样的 URL
[http://localhost/app1](http://localhost/app1)
[http://localhost/app2](http://localhost/app2)
当我使用相同的用户信息登录/注销其中一个应用程序时，另一个应用程序具有相同的 cookie 和登录会话。但我不希望那样。我想在 2 个应用程序之间分离登录信息。
请帮忙。
非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:24:02.033

在**app1**中编辑您的 web.config。为身份验证标签提供唯一的“名称”属性。

```
<forms name="App1"> 
```

...并在**app2**中做同样的事情。

```
<forms name="App2"> 
```

MSDN 有一些关于跨应用程序共享票证的相关信息[[链接]](http://msdn.microsoft.com/en-us/library/eb0zx8fc.aspx)。

# java - 优化android上的堆大小

> ID：10173809
> 
> 赞同：0
> 
> 时间：2012-04-16T12:09:37.597
> 
> 标签：java, android, android-intent

我遇到了一个 android 应用程序运行到 outOfMemory 的问题。

在挖掘和搜索内存泄漏之后，我发现 - 我认为 - 问题在于：

*   我的初始堆大小为 11 MB（已使用 98%）。
*   调用 CAMERA 意图后，堆大小增加到 34 MB，已使用 99.5%（很少崩溃导致 outOfMemory）。
*   旋转屏幕或拍摄另一张照片后，我的应用程序运行 - 有时堆大小为 52 MB（使用 70%）并且经常因 OutOfMemory 崩溃。

我读了很多线程，有人想增加初始堆大小，但我也读到应该很快弃用它，这不是一个好主意，即使你不需要它也会增加内存使用量。此外，我怎么知道我的应用程序需要多少堆内存？我仍然应该监控工作并以分钟的时间增加时间。步？

我的问题是：**处理堆大小和避免这种 outOfMemory 异常的最佳方法是什么？**

我尝试了许多版本的代码，并且样本只用相机拍照，它总是一样的。仅供参考，这是发布的代码

[用安卓相机拍照（意图）内存不足错误](https://stackoverflow.com/questions/10163071/take-picture-with-android-camera-intent-out-of-memory-error)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:00:22.720

您只需要浏览官方 android 开发者网站上发布的新文章[Displaying](http://developer.android.com/training/displaying-bitmaps/index.html) Bitmaps ..他们几天前刚刚发布了这篇文章。

那篇文章肯定会帮助你解决你的问题。

# java - 关于 GWT 和其他“Web 应用程序框架”的问题

> ID：10173810
> 
> 赞同：0
> 
> 时间：2012-04-16T12:09:46.217
> 
> 标签：java, gwt, comparison

我必须开发一个带有数据库连接的 Web 应用程序。所以我查了维基百科的[“Web应用程序比较”](http://en.wikipedia.org/wiki/Comparison_of_web_application_frameworks#ASP.NET)

在这里，我主要是在寻找基于 Java 的框架。第一个让我感兴趣的是**“GWT”**。但是有些地方我并不清楚。

1.  该页面不包含有关 GWT 是否使用**MVC-pattern**的任何信息。可以？

2.  此外，它没有说明**推送或拉取**功能。那么 GWT 有什么用呢？

3.  在**“数据库迁移框架”**上，它说**“通过 java”**。这是否意味着我可以使用任何可以与 Java 连接的数据库？

4.  **选择 GWT 来实现在公司网络**中使用的带有数据库连接的基于 Web 的应用程序是一个合理的决定吗？或者是否有任何论据可以让我考虑任何其他框架？

5.  我最初是一名 .Net (C#) 开发人员，我还听说过 .NET **“StockTrader”**示例应用程序。与 GWT的**优缺点**是什么？还是这两种不同的东西？

正如你所看到的，**我对这**件事完全陌生，如果这个问题没有得到解决，我将非常感激，因为它是关于形成一种观点。我对其他框架的任何意见或建议持开放态度。

问候，BC++

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T12:18:48.607

GWT 主要关注 Web 应用程序的 UI 层，这使得创建和调试 HTML/Javascript 层变得容易，因为您使用 Java 对其进行编码并使用所有现有的 Java 工具。

GWT 本身并不是一个解决方案。您将需要添加其他框架来构建完整的应用程序。例如，您可以考虑将它与 Guice 和 JPA/Hibernate 一起使用。您也可以将 Spring 与它一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T12:21:35.547

首先，澄清一下：GWT 主要是一个 UI 库——也就是说，你用 Java 编写你的界面，它将它翻译成 JavaScript，你可以在浏览器中运行它。那说：

1.  您使用的模式独立于库。如果您使用 GWT eclipse 的项目创建器，它会将您的项目拆分为三个包（客户端、服务器和共享）......您可以从那里获取它。

2.  GWT 通常使用池化模型，客户端向服务器请求数据。[但是，您可以尝试一些 push](http://code.google.com/p/google-web-toolkit-incubator/wiki/ServerPushFAQ)。

3.  服务器端代码只是 Java，不涉及 GWT。您可以在服务器上执行任何“java”操作，然后将其发送到您的客户端代码。

4.  如果您在公司 Intranet 上使用它，您可能需要考虑像[SmartGWT](http://code.google.com/p/smartgwt/)这样的完整框架，而不是纯 GWT 实现。考虑到您遵循预期的模型，这些为您提供了更多工具和更快的开发。

作为旁注，值得一提的是，您可能希望像往常一样使用纯 HTML/CSS 开发界面，然后只使用 GWT 添加动态小部件或 Ajax 调用。在 GWT 中构建整个界面（从头开始）通常是一个坏主意，从性能角度来看……您可能会遇到很多问题，以您真正想要的方式定位事物。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T00:45:51.217

我想补充其他答案，因为 GWT 主要是客户端库。您可以通过 GWT-RPC 或 REST 与服务器通信。就 MVC 而言，许多 GWT 库中都有这些。

提到的一个是 Smart GWT，但是，我自己不会推荐这个。这样做的原因是 Smart GWT 是 Javascript 对象的瘦包装器，因此 GWT 编译器不会做很多优化工作，这通常意味着您的代码下载量比使用 java 编写的库要大并编译下来。

如果您正在寻找 GWT 之上的库，我建议您查看[Ext GWT](http://www.sencha.com/products/extgwt/)。Ext GWT 有一个丰富的小部件库，其中支持 MVC，并且是纯 java 的。我已经使用过它，虽然我遇到了问题，但我发现它比 SmartGWT 更容易处理。如果您正在寻找接近纯 GWT 的体验，我可以建议将 Spring Roo 作为起点。

在 UI 开发方面，您有几个选择，您可以在 GWT 中使用纯 JAVA 开发，使用 GWT 的 UI Binder 功能，或者创建 HTML 并添加 GWT 组件。从性能或可维护性来看，我不确定上述任何一项是否真的是“最佳”方式。

在数据库支持方面，GWT 客户端不支持远程 RDBMS，因为这通常在服务器端完成，您可以使用服务器端代码可以支持的任何数据库。您可以使用 GWT 的 HTML5 存储 API 的实验性实现，当然前提是您计划在 HTML 5 浏览器中运行。

I think the whole thing comes down to what you want to do. I would not necessarily use GWT just to use it, but it definitely helps solve certain problems because you can develop in a strongly typed language and handle such data types.

# firefox - 如何在 firefox 扩展中使用 nsISocketTransportService 连接到远程服务器？

> ID：10173811
> 
> 赞同：4
> 
> 时间：2012-04-16T12:09:55.653
> 
> 标签：firefox, firefox-addon

我需要在我的 Firefox 扩展中连接到远程服务器（侦听端口 9442）。我正在使用`nsISocketTransportService`，我的问题是如何收听`dataAvailable`事件？我搜索了 mozilla 文档，但可以找到任何有用的东西。我的问题是当我使用连接到远程服务器时如何收听数据`nsISocketTransportService.createTransport()`？有没有其他方法可以连接到远程 TCP 服务器？

```
var socket = Components.classes["@mozilla.org/network/socket-transport-service;1"]
                          .getService(Components.interfaces.nsISocketTransportService)
                          .createTransport(null, 0, host, port, null);

var poolOutputStream = socket.openOutputStream(0, 0, 0);

var helloMessage = JSON.stringify({type: 'hello', clientID: currentClientID});
    poolOutputStream.write(helloMessage, helloMessage.length);

var poolRawInputStream = socket.openInputStream(0, 0, 0);
var poolInputStream = Components.classes ["@mozilla.org/scriptableinputstream;1"]
                        .createInstance(Components.interfaces.nsIScriptableInputStream)
                        .init(poolRawInputStream); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:43:10.560

您可以使用该[`NetUtil`模块](https://developer.mozilla.org/en/JavaScript_code_modules/NetUtil.jsm)：

```
Components.utils.import("resource://gre/modules/NetUtil.jsm");

NetUtil.asyncFetch(poolRawInputStream, function(stream, result)
{
  if (!Components.isSuccessCode(result))
  {
    // Error handling here
  }

  var data = NetUtil.readInputStreamToString(stream, inputStream.available());
  ...
}); 
```

这种方法的缺点：`NetUtil`会首先将所有数据读入内存，直到流关闭后才会调用您的回调。如果要获取传入的数据，则必须`nsIInputStreamPump`直接使用：

```
Components.utils.import("resource://gre/modules/NetUtil.jsm");

var pump = Components.classes["@mozilla.org/network/input-stream-pump;1"]
                     .createInstance(Components.interfaces.nsIInputStreamPump);
pump.init(poolRawInputStream, -1, -1, 0, 0, true);

var listener = {
  onStartRequest: function(request, context) {},
  onDataAvailable: function(request, context, stream, offset, count)
  {
    var data = NetUtil.readInputStreamToString(stream, count);
    ...
  },
  onStopRequest: function(request, context, result)
  {
    if (!Components.isSuccessCode(result))
    {
      // Error handling here
    }
  }
};

pump.asyncRead(listener, null); 
```

# c# - 如何调用父类方法而不创建它的对象

> ID：10173827
> 
> 赞同：1
> 
> 时间：2012-04-16T12:11:03.110
> 
> 标签：c#, .net, oop

我可以使用 base.virtualParentMethod() 调用父类方法。但是在以下场景中，如何在不创建它的对象的情况下调用父父类中的方法。

```
 class A
    {
        public virtual void virtualParentMethod()
        {
            Console.WriteLine("A");
        }
    }
    class B : A
    {
        public override void virtualParentMethod()
        {
            Console.WriteLine("B");
        }
    }
    class C : B
    {
        public override void virtualParentMethod()
        {
            //base.virtualParentMethod();
            //This is where I want to invoke the method of A
            //So that out Will be : A
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T12:18:20.773

如果您需要一些父功能而不是父的直接子功能，那么您应该将该功能移至单独的方法：

```
class A
{
    public virtual void VirtualParentMethod()
    {
        Foo();
    }

    protected void Foo()
    {
        Console.WriteLine("A");
    }
}
class B : A
{
    public override void VirtualParentMethod()
    {
        Console.WriteLine("B");
    }
}
class C : B
{
    public override void VirtualParentMethod()
    {        
        Foo();
    }
} 
```

更新

还要考虑：

*   直接继承`C`自`A`
*   改变继承顺序，即`B`从`C`
*   将此行为提取到其他对象

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T12:14:26.197

您无法使用`base`语法选择要运行的派生方法的版本。运行特定方法的唯一方法是实例化可用于该方法的`A`inside版本（基本上是 的*真实*实例）。`C`*`A`*

 *但是我个人不会这样做。这表明您的继承链存在设计问题。

如果您需要确保`C`运行`A`，为什么不`A`从`C`- 继承`C : A`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T23:51:07.530

您已经通过创建 C 的实例（如 C : B, B : A）创建了 A 的实例，因此有一种方法可以通过稍作修改来完成此操作。现在，没有说明这是否是一个好主意；

如果您在派生方法实现上使用“new”关键字而不是覆盖，那么您可以直接调用方法的基本实现，绕过中间类实现，通过将对象转换为您想要使用的实现类型，例如所以;

```
class A
{
    public virtual void virtualParentMethod()
    {
        Console.WriteLine("A");
    }
}
class B : A
{
    public new void virtualParentMethod()
    {
        Console.WriteLine("B");
    }
}
class C : B
{
    public new void virtualParentMethod()
    {
        // casting this to A will allow you to call the base class implementation
        ((A)this).virtualParentMethod();
    }
} 
```

请注意，如果您进行此更改，则您已经为方法的任何调用者引入了行为更改，具体取决于它们引用对象的方式。如果您尝试在现有的 C.virtualParentMethod 实现中以这种方式进行转换（声明为“覆盖”），您实际上只是在调用该方法本身并将进入无限循环。

或者，您可以重新考虑您的课程设计。:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T12:15:03.377

您根本不能，因为这是[Virtual Method Table](http://en.wikipedia.org/wiki/Virtual_method_table)的本质，所以`virtual`关键字及其覆盖。调用方法的地址将从对应*的实*型虚拟方法表中查找。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T12:17:48.373

你不能。使用 base.MethodName 将始终调用层次结构中最接近的实现，如果不明确声明可以调用的方法，就无法通过它

还值得注意的是，如果您发现自己处于希望这样做的情况，那么您就有设计缺陷。*

# binary - 从 1Mbyte 转换为十六进制

> ID：10173828
> 
> 赞同：2
> 
> 时间：2012-04-16T12:11:03.797
> 
> 标签：binary, size, microprocessors

我在理解以下文本时遇到问题，

> `8088`支持`1`Mbyte的外部存储器。从软件的角度来看，该存储空间被组织为存储在地址范围内的连续地址中的单个数据`00000`字节`FFFFF`。

现在我不明白作者是如何从 1 MB 转换为 FFFFF 的。谁能帮帮我？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T12:15:26.030

1 兆字节是`2^20`. 这意味着您需要 20 位来表示它。该范围`00000-FFFFF`包含所有可能的 20 位值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T12:13:41.963

在描述[8086](http://en.wikipedia.org/wiki/8086)的页面中有很好的解释（8088 具有相同的指令集架构，但引脚略有不同）。

基本上，段寄存器给出了一个（16 位）基地址乘以 16，然后添加了一个 16 位偏移量。

并且`0xfffff`是 2 ^(20) -1，即 1048575

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-21T03:20:08.227

请区分容量和地址。容量计数从 1 开始，但在内存中寻址从 0 开始（地址 0 计入 1）。

一个比喻。如果我们有 10 个容量，并且我们从 0 开始寻址，那么它将是从 0 到 9。

所以寻址的诀窍是 Last Address = Capacity - 1。

对于容量 1MB（十进制），十六进制 = 10.0000h 对于寻址，最后一个地址是 10.0000 - 1 = F FFFF 因此，1MB 容量的寻址是从 0 到 F FFFF。（记住地址0，算1）。

# javascript - 用于 Internet Explorer 的拖放文件上传库

> ID：10173830
> 
> 赞同：13
> 
> 时间：2012-04-16T12:11:17.380
> 
> 标签：javascript, internet-explorer

我发现了一个很棒的库，叫做[JQuery File Upload](https://github.com/blueimp/jQuery-File-Upload)，用于在现代浏览器中进行拖放文件上传。不幸的是，拖放在 Internet Explorer 中不起作用。

IE中的拖放文件上传是项目的要求，所以我想针对这种特定情况找到解决方案。我的想法是最终得到两个版本的上传页面，一个用于 IE，另一个用于世界其他地方。

有谁知道在 IE 中进行此类上传的好 activex 库，不需要任何安装？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T01:49:38.117

我认为最好的方法是使用新的 HTML5 Drag and Drop API 和新的 File API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-30T09:08:11.020

[FiledropJS 2](http://filedropjs.org/)是一个拖放文件上传库，它也具有在旧版 IE 中工作的[基础回退。](http://filedropjs.org/#sif)该页面中有一个演示。看起来很有希望，看看吧。 [`<Iframe>`](http://filedropjs.org/#sif)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-01T03:35:54.007

你可以试试[dropZone](https://github.com/enyo/dropzone)，支持 IE 10+

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-18T03:32:25.447

我编写了一个 javascript 模块来执行通用的拖放事件，包括：

*   文件丢弃，
*   在浏览器窗口中拖放，
*   在两个不同的浏览器窗口之间拖放，
*   从浏览器窗口拖放到外部应用程序，以及
*   从外部应用程序拖放到浏览器窗口

它抽象了一堆关于 html5 拖放 api 的奇怪的东西，否则这些东西会浪费你的时间。这是一个示例用法：

```
dd.drag(myDomNode, {
    dragImage: true, // default drag image
    start: function(setData, e) {
        setData('myCustomData', JSON.stringify({a:1, b:"NOT THE BEES"})) // camel case types are allowed!*
    }
})
dd.drop(myDropzone, {
    drop: function(data, pointer, e) {
        myDropzone.innerHTML = data.myCustomData
    }
}) 
```

它也适用于 IE（带有通常的 IE 警告）。在此处查看完整文档：[https ://github.com/fresheneesz/drip-drop](https://github.com/fresheneesz/drip-drop)

# php - 从 csv 插入数据

> ID：10173831
> 
> 赞同：0
> 
> 时间：2012-04-16T12:11:19.380
> 
> 标签：php, mysql

```
Parts No    Mfg     Cond    LowPrice    AvgPrice    HighPrice  Weighted TotalQty
002805-00   3COM    NEW     25          25          25         N/A      1
0231A085    3COM    NEW     133.75      133.75      133.75     N/A      3
0231A61N    3COM    NEW     253.58      253.58      253.58     N/A      2
0231A61P    3COM    NEW     467.25      467.25      467.25     N/A      1 
```

我只希望将此 csv 格式的 partno 、 mfg 和 price 添加到具有不同字段名称的表中，如第一行中定义的那样，但表中还包含一些其他字段。

这是正确的插入方式？？？？？？建议。

```
 if (($handle = fopen("sample.csv", "r")) !== FALSE) {
              while (($data = fgetcsv($handle, 10000, ",")) !== FALSE) {

                $i=0;
                if ($scount == 0) {  
                        foreach ($data as $key=>$value){
                         $item[$i++] = $value; 
                         if($value == 'Parts No') $c1 = $key;
                         if($value == 'Mfg') $c2 = $key;if($value == 'Cond') $c3 = $key;

                         if($value == 'AvgPrice') $c4 = $key;

                        }

                }else{
                if($data[$c3] == "NEW" || $data[$c3] == "new"){
                mysql_query("insert into  vable (partno,brand,price)
                    values('".$data[$c1]."','".$data[$c2]."','".$data[$c4]."') ",);}
                }

                $scount++; 

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:27:02.800

使用此函数从 csv 文件中获取键值对，其中键位于 csv 文件的第一行

```
function get_data_csv_assoc($file){
    $full_data = array();
    if (($handle = fopen($file, "r")) !== FALSE) {
        if(($keys = fgetcsv($handle, 1000, ",")) !== FALSE) {

        }
        while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
            $array = array();
            foreach($keys as $key => $val){
                $array[$val] = $data[$key];
            }
            array_push($full_data,$array);
        }
        fclose($handle);
    }
    return $full_data;
} 
```

经测试..

然后使用键值对进行数据插入。

```
$return_array = get_data_csv_assoc('filename');
foreach($return_array as $data){
mysql_query("insert into  vable (partno,brand,price)
                    values('".$data["Parts No"]."','".$data['Mfg']."','".$data['LowPrice']."') ",);}
                }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:14:25.860

尝试

```
$sql = "INSERT INTO table (partno,brand,price) VALUES ('%s','%s','%s') ";
if (($handle = fopen ( "sample.csv", "r" )) !== FALSE) {
    $x = 0;
    while ( ($data = fgetcsv ( $handle, 10000, "," )) !== FALSE ) {

        if ($x == 0) {
            continue; // Remove headers
        }
        mysql_query ( sprintf ( $sql, mysql_real_escape_string ( $data [0] ), mysql_real_escape_string ( $data [4] ), mysql_real_escape_string ( $data [2] ) ) );
        $x ++;
    }

    fclose ( $handle );
} 
```

# eclipse - 在本地主机启动tomcat7有错误

> ID：10173832
> 
> 赞同：0
> 
> 时间：2012-04-16T12:11:28.457
> 
> 标签：eclipse, tomcat7

我一直在尝试使用 Eclipse Helios 安装 Apache Tomcat 7 来尝试 Web 应用程序。但我无法运行`webcontents`。它在 Eclipse 中给出以下消息：

```
Several ports ( 8090, 8009) required by Tomcat v7.0 Server at localhost are already in use. The server may already be running in another process, or a system process may be using the port. To start this server you will need to stop the other process or change the port number(s). 
```

我尝试更改端口号并重新安装 Tomcat，但问题仍未解决。我可以在浏览器中看到 Apache Tomcat/7.0.27。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:58:41.287

错误消息表明 Tomcat*已经*在 Eclipse 之外运行。显然，您已经从 Eclipse 外部启动了它和/或您已经将它下载并安装为“Windows 服务”。

在使用集成在 Eclipse 中的 Tomcat 实例之前，您应该停止所有正在运行的 Tomcat 实例。当您打算使用 Eclipse/Tomcat 进行开发时，您不需要“Windows 服务”（以 EXE 文件的形式提供）。您应该改用核心引擎（以 ZIP 文件的形式提供）。停止/卸载 Windows 服务。下载并解压 ZIP 文件，然后将其集成到 Eclipse 中。您需要通过双击 Eclipse 中的 Tomcat 条目来更改端口，而不是通过`server.xml`外部编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:27:36.720

解决此问题的一种方法是单独保留其他进程使用的端口，并将您的 tomcat 实例配置为使用不同的端口号。我相信这就像在某处编辑配置文件一样简单。所有 Web 服务器都可以轻松地重新配置以使用不同的端口号。试试看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:23:21.733

网络统计-aon | 找到str“8080”

使用此命令查找 pid，然后使用任务管理器 sto 此进程，然后尝试运行它可能会有所帮助

# ruby-on-rails - 设计/Omniauth 失败：如何调试它？

> ID：10173833
> 
> 赞同：13
> 
> 时间：2012-04-16T12:11:34.907
> 
> 标签：ruby-on-rails, ruby, devise, omniauth

尝试“使用 Google 登录”后，我在日志中看到此错误：

```
Processing by Users::OmniauthCallbacksController#failure as HTML 
```

我可以看到来自谷歌的所有数据都通过 URL（在日志中）发送，包括用户电子邮件和姓名。那么会出现什么问题呢？我的回调甚至没有被执行。我只会被重定向到我网站的登录页面。

而且我很确定一切都配置正确，因为这在几周前运行良好。我不认为我改变了什么。Facebook 登录仍然可以正常工作。

关于如何调试此故障的任何想法？除了那些充满参数和值的长 URL 之外，日志中没有其他内容。只有 INFO 消息。上面发布的那篇文章是唯一提到失败的一篇文章。

**更新**

我向控制器添加了一个“失败”方法

```
def failure
  render :text => params.inspect
end 
```

哪个停止了重定向，并打印了这个：

```
{} 
```

网址是这样的：

```
/users/auth/google/callback?_method=post&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&openid.mode=id_res&openid.op_endpoint=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fud&openid.response_nonce=2012-04-16T12%3A25%3A49Z_v1fNngSQJaHBQ&openid.return_to=http%3A%2F%2Fdev.myapp.me%3A3000%2Fusers%2Fauth%2Fgoogle%2Fcallback%3F_method%3Dpost&openid.assoc_handle=AMlYA9Urw_lYamPphTSdQ9a6DU0Ez0y5RaDDM78qPL7Xgm77nMpJiB85&openid.signed=op_endpoint%2Cclaimed_id%2Cidentity%2Creturn_to%2Cresponse_nonce%2Cassoc_handle%2Cns.ext1%2Cext1.mode%2Cext1.type.ext5%2Cext1.value.ext5%2Cext1.type.ext8%2Cext1.value.ext8%2Cext1.type.ext2%2Cext1.value.ext2&openid.sig=2FPjo7U1e%2Fde248XpUgjQLduNAM%3D&openid.identity=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid%3Fid%3DAItOawk1F5U6x_-kJnydjoww5haU41tquh1Zl2c&openid.claimed_id=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid%3Fid%3DAItOawk1F5U6x_-kJnydjoww5haU41tquh1Zl2c&openid.ns.ext1=http%3A%2F%2Fopenid.net%2Fsrv%2Fax%2F1.0&openid.ext1.mode=fetch_response&openid.ext1.type.ext5=http%3A%2F%2Faxschema.org%2FnamePerson%2Ffirst&openid.ext1.value.ext5=Some_User&openid.ext1.type.ext8=http%3A%2F%2Faxschema.org%2Fcontact%2Femail&openid.ext1.value.ext8=some_email%40gmail.com&openid.ext1.type.ext2=http%3A%2F%2Faxschema.org%2FnamePerson%2Flast&openid.ext1.value.ext2=Some_User 
```

所以问题是我需要的所有数据都在 URL 中，但是 devise/omniauth 没有抓住它（显然这就是它调用“失败”方法而不是我的回调的原因）。我不知道它是否应该可以通过 'params' 数组访问，或者什么。

我也对这`?_method=post`部分很感兴趣，因为对我网站的所有请求都是 GET 请求。也许这只是意味着omniauth对google的请求是POST。

有什么想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-06-22T08:16:01.087

要回答有关如何调试 Omniauth 的原始问题，以下是如何为 Omniauth 启用日志记录。`config/initializers/devise.rb`在定义 Omniauth 策略之后添加这一行：

```
OmniAuth.config.logger = Rails.logger if Rails.env.development? 
```

（如果您不使用设计，只使用 Omniauth，然后将代码添加到`config/initializers/omniauth.rb`）

您将在日志文件中从 Omniauth 获得更多信息 - 包括来自回调阶段的完整响应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-27T12:40:18.420

我意识到这是一个老问题，最初提出这个问题的人要么解决了它，要么转向了其他解决方案，但是，我遇到了同样的问题，我对解决方案的追求把我带到了这里。

我设法解决了它，所以这里是为下一个寻找它的人准备的。

结果是微不足道的。这就是我所拥有的：

```
# config/initializers/omniauth.rb
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :github, ENV['github_key'], ENV['github_secret']
end

# config/initializers/devise.rb
Devise.setup do |config|
  # ... devise config not related to omniauth ...
  config.omniauth :github, ENV['github_key'], ENV['github_secret']
end 
```

因此，我在两个地方配置了omniauth 提供程序，并且发生了冲突。

在我从 omniauth.rb 中删除配置后，来自 github 的重定向请求`/auth/github/callback`开始被处理，`Users::OmniauthCallbacksController#github`而不是`#failure`更改之前的情况。

如此愚蠢的错误和如此少的信息可以使用......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-02T10:05:20.840

我知道这是一个老问题，但我有同样的问题，我在网上找到的没有任何帮助。原来这个问题是由我使用 Puma 的方式引起的（从 Thin 带来的实践）。我在同一台机器上启动了多个 Puma 进程（Apache 反向代理），看起来来自 Github 的回调将转到与原始身份验证请求不同的 Puma 进程。 **我将 Puma 进程减少到一个并且不再有条件**（切换到使用 Puma workers: `puma -w 5`，这反过来使用由 Puma 管理的进程而不是 Apache 循环）。这也是为什么我在开发中从未偶然发现这个问题的原因，因为我没有在那个环境中运行进程集群。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T04:08:55.337

你最近升级了你的宝石吗？如果是这样，将omniauth 和devise 版本与以前的gem 版本进行比较可能会很有用。它也可能是改变了的omniauth/devise 依赖。

我不确定在这种特定情况下问题出在哪里，但是如果您想深入研究代码，请安装 pry-debug gem。它为您提供了带有 step 和 next 调试命令的 pry 界面。添加`pry.binding`您的代码，它将停止在服务器中执行并打开 pry 界面。例如：

```
def failure
  binding.pry
  render :text => params.inspect
end 
```

# java - java rmi -Djava.rmi.server.hostname=localhost 仍然打开一个监听 0.0.0.0 的套接字

> ID：10173834
> 
> 赞同：11
> 
> 时间：2012-04-16T12:11:34.630
> 
> 标签：java, rmi

我使用**-Djava.rmi.server.hostname=localhost**选项使 rmi 仅在 localhost 上侦听，但 netstat 显示套接字正在侦听*0.0.0.0*。

奇怪的是，RMI RenewClean 线程显示它使用 localhost。例如 RMI RenewClean-[localhost:59357]

我假设如果我设置**-Djava.rmi.server.hostname=localhost**它应该只监听 127.0.0.1

我是否误解了 java.rmi.server.hostname 控制的内容？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-16T12:31:30.897

> 我假设如果我设置 -Djava.rmi.server.hostname=localhost 它应该只监听 127.0.0.1

不。

> 我是否误解了 java.rmi.server.hostname 控制的内容？

是的。`java.rmi.server.hostname`与远程对象侦听的 IP 地址无关。这是由`RMIServerSocketFactory.`

在另一个答案中纠正我书中的错误引用（随后被删除）：

> `java.rmi.server.hostname:`主机名字符串；默认值是“dotted-quad”格式的本地主机的 IP 地址......当远程对象被导出时，它嵌入到由这个 JVM 创建的远程存根中。这可以用来控制多宿主主机导出的RMI服务器的有效IP地址。此属性在 JVM 的生命周期中仅被读取一次。[1]

为了进一步扩展，它还可用于控制 NAT 设备后面的主机导出的 RMI 服务器的有效 IP 地址（如客户端所见）。它不一定与本地主机有任何关系，例如在 NAT 情况下，它可以是主机名、点分四组 IPv4 地址或 IPv6 地址。

[1] Pitt & McNiff，*java.rmi，远程方法调用指南，* Addison Wesley 2001，p.258。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-20T10:47:44.967

由于 Java 8u102 -Dcom.sun.management.jmxremote.host 绑定到特殊的 IP 地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-18T18:18:34.840

我自己遇到了这个问题，我想提供一个不同的上下文来向那些熟悉 HTTP 工作原理的人解释这个值是什么。当您最初连接到 com.sun.management.jmxremote.port 指定的端口时，响应的效果与 HTTP 重定向到由以下组成的名称相同：java.rmi.server.hostname:com.sun.management.jmxremote .rmi.port。这意味着主机名必须 a) 可由 JMX 客户端解析，并且 b) 允许通过路由和防火墙连接。但是，该端口也可以与提供重定向的初始端口重叠。

现在，问题是：你能阻止重定向吗？据我所知，没有。我尝试将主机名设置为各种值，例如 0.0.0.0、255.255.255.255、''（空）。我也将端口设置为“0”，看看这是否会影响行为。没有。尽管您可以连接到同一个端口以进行查找和协议的 RMI 部分，但它不允许您只建立到同一个解析 IP 的连接。

我假设这种行为是为了允许一个进程充当多个进程或集群的许多节点的 RMI 端口的中央索引，但是对于 NAT，它只是协议设计中过去几天令人恼火的遗留物。

# wpf - 如何从绑定 ObervableCollection 到 TabControl 更改为 ContentControl

> ID：10173837
> 
> 赞同：1
> 
> 时间：2012-04-16T12:12:03.790
> 
> 标签：wpf

我对 WPF 很陌生，正在使用这个示例作为起点编写一个应用程序 [http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090025](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090025)

我在任何时候都只能看到一个工作区，所以我想摆脱 TabControl 并使用一些简单的东西 - 可能是一个 ContentControl，我真的不确定，但它需要做的就是包含内容并可以关闭. 所以我试图替换这个：

```
<DataTemplate x:Key="WorkspacesTemplate"><TabControl 
  IsSynchronizedWithCurrentItem="True" 
  ItemsSource="{Binding}" 
  ItemTemplate="{StaticResource ClosableTabItemTemplate}"
  Margin="4"
  /> 
```

和：

```
<DataTemplate x:Key="WorkspacesTemplate">
    <ContentControl Content="{Binding ??}" ContentTemplate="{StaticResource ClosableTabItemTemplate}"/>
</DataTemplate> 
```

但我不知道要绑定什么。示例中的代码似乎使用 CollectionViewSource 来设置活动工作区 - 这是我感兴趣的活动工作区，但我不明白 TabControl 正在做什么，除了它与 IsSynchronizedWithCurrentItem="True" 有关

从这里调用模板（Workspaces 是 ViewModels 的 ObservableCollection）：

```
<HeaderedContentControl Content="{Binding Path=Workspaces}" ContentTemplate="{StaticResource   WorkspacesTemplate}" Header="Workspaces" Style="{StaticResource MainHCCStyle}"/> 
```

这是 ClosableItem 模板：

```
 <DataTemplate x:Key="ClosableTabItemTemplate">
    <DockPanel Width="120">
        <Button 
    Command="{Binding Path=CloseCommand}"
    Content="X"
    Cursor="Hand"
    DockPanel.Dock="Right"
    Focusable="False"
    FontFamily="Courier" 
    FontSize="9"
    FontWeight="Bold"  
    Margin="0,1,0,0"
    Padding="0"
    VerticalContentAlignment="Bottom"
    Width="16" Height="16" 
    />
        <ContentPresenter 
    Content="{Binding Path=DisplayName}" 
    VerticalAlignment="Center" 
    />
    </DockPanel>
</DataTemplate> 
```

请问有人可以解释我需要做什么吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:32:54.507

`WorkspacesTemplate`告诉 WPF 如何显示属性`Workspaces`，正如您所说，它是`ObservableCollection`ViewModels 的一个。

因此，`WorkspacesTemplate`上面说，在选项卡控件中显示所有这些 ViewModel，并且对于每个 ViewModel，使用`ClosableTabItemTemplate`来在选项卡中显示 ViewModel。

由于您一次只希望一个工作区可见，因此您不需要从 ViewModel 公开一组工作区，也不需要选项卡控件来显示它们。您只需从 ViewModel 中公开一个当前工作区并提供一些 XAML 来显示它。

如果您仍然想使用模板来包装 ViewModel，那么可以，您可以使用 a`ContentControl`来调用模板：

```
<DataTemplate x:Key="MySingleWorkspaceTemplate">
    <TextBlock Text={Binding Blah} />
    <!-- etc -->
</DataTemplate> 
```

并调用模板

```
<ContentControl Content="{Binding CurrentWorkspace}" ContentTemplate="{StaticResource MySingleWorkspaceTemplate}"/> 
```

但是，如果这是唯一要使用 XAML 的地方，您不妨忘记模板，直接声明 XAML。例如，（而不是 ContentControl）

```
<TextBlock Text={Binding CurrentWorkspace.Blah} />
<!-- etc --> 
```

**编辑添加：**

我认为您可能会感到困惑，因为目前 ViewModel 没有“选定工作区”的概念，它只是公开了一个集合。为了完整性（但不要担心所有这些），选择是由 引入的，`TabControl`它间接使用集合的默认值，并`CollectionView`具有选定项的概念。这一切尽在眼前。`Workspaces``CollectionView`

我现在不用担心这些，只需从您的 ViewModel 中自己公开一个工作区。

**编辑2：**

出现关闭按钮是因为您`ContentTemplate`在`HeaderedContentControl`. 无论`Content`.

要使模板仅在 中有数据时出现`Content`，请改为隐式模板。如果将 a 添加`DataType`到模板定义（并删除键），则告诉 WPF 始终使用此模板来显示该数据类型的对象。

```
<DataTemplate DataType="{x:Type vm:WorkspaceViewModel}">
    <!-- Blah -->
</DataTemplate> 
```

然后，您可以从`HeaderedContentControl`. 简单的设置`Content`就足够调用模板了，如果没有Content，就没有模板。

```
<HeaderedContentControl Content="{Binding Path=CurrentWorkspace}" /> 
```

（ps。如果你不使用的标题`HeaderedContentControl`，你还不如只使用一个沼泽标准`ContentControl`）

# android - 如何连接两个配对的蓝牙设备

> ID：10173838
> 
> 赞同：-1
> 
> 时间：2012-04-16T12:12:05.857
> 
> 标签：android

如何使用android编程连接两个配对的蓝牙设备。假设两个设备已经配对，但没有连接。那么我应该如何获得配对设备的mac地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:18:04.450

您知道SDK 附带的[蓝牙聊天示例吗？](http://developer.android.com/resources/samples/BluetoothChat/index.html)

# javascript - 延续传递风格与管道有什么不同吗？

> ID：10173839
> 
> 赞同：17
> 
> 时间：2012-04-16T12:12:19.040
> 
> 标签：javascript, pipe, continuation-passing

我一直在学习[继续传递样式](http://en.wikipedia.org/wiki/Continuation-passing_style)，特别是在 javascript 中实现的[异步版本](https://stackoverflow.com/questions/10027032/memoize-continuation-passing-style-function)，其中一个函数将另一个函数作为最终参数并创建对其的异步调用，将返回值传递给第二个函数。

但是，我不太明白延续传递除了重新创建管道（如在 unix 命令行管道中）或流之外还有什么作用：

```
replace('somestring','somepattern', filter(str, console.log)); 
```

对比

```
echo 'somestring' | replace 'somepattern' | filter | console.log 
```

除了管道要干净得多。使用管道，很明显数据被传递，同时执行被传递给接收程序。事实上，对于管道，我希望数据流能够继续通过管道，而在 CPS 中，我希望是一个串行过程。

可以想象，如果通信对象和更新方法与数据一起传递，而不是完整的切换和返回，CPS 可以扩展到连续管道。

我错过了什么吗？CPS 是否在某些重要方面有所不同（更好？）？

明确地说，我的意思是继续传递，其中一个函数将执行传递给另一个函数，而不仅仅是简单的回调。CPS 似乎暗示将一个函数的返回值传递给另一个函数，然后退出。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-11-07T12:33:22.707

# UNIX 管道与异步 javascript

unix 管道的行为方式与您链接到的异步 CPS 代码之间存在很大的根本区别。

主要是**管道阻塞执行，直到整个链完成**，而您的异步 CPS 示例将在第一次异步调用后立即返回，并且仅在完成时执行您的回调。（在您的示例中，当超时等待完成时。）

看看这个例子。我将使用[Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)和 Promises 来演示异步行为，而不是使用 setTimeout 来使其更真实。想象一下，第一个函数`f1()`负责调用一些 web 服务并将结果解析为 json。这是“管道”进入`f2()`处理结果的。

*CPS 风格*：

```
function f2(json){
    //do some parsing
}

function f1(param, next) {
   return fetch(param).then(response => response.json()).then(json => next(json));
}

// you call it like this:
f1("https://service.url", f2); 
```

如果将 f2 的调用移出 f1，则可以编写语法上*看起来像管道的*东西，但这将与上面完全相同：

```
function f1(param) {
   return fetch(param).then(response => response.json());
}

// you call it like this:
f1("https://service.url").then(f2); 
```

**但这仍然不会阻塞。**你不能在 javascript 中使用阻塞机制来完成这个任务，根本没有机制来阻塞 Promise。（在这种情况下，您可以使用同步 XMLHttpRequest，但这不是重点。）

# CPS 与管道

上述两种方法的区别在于，**谁来决定是否调用下一步**以及使用什么参数，调用者（后面的例子）或被调用函数（CPS）。

**CPS 非常方便的一个很好的例子是中间件**。例如在处理管道中考虑一个缓存中间件。简化示例：

```
function cachingMiddleware(request, next){
     if(someCache.containsKey(request.url)){
         return someCache[request.url];
     }
     return next(request);
} 
```

中间件执行一些逻辑，检查缓存是否仍然有效：

*   如果不是，则`next`调用 then ，然后继续处理管道。

*   如果有效，则返回缓存值，跳过下一次执行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-11-13T18:35:54.440

## 应用程序级别的继续传递风格

不是在表达式/功能块级别进行比较，而是在应用程序级别考虑延续传递样式可以通过其“延续”函数*（也称为回调函数）*提供流控制优势的途径。让我们以[Express.js](https://expressjs.com/)为例：

每个[express 中间件](https://expressjs.com/en/guide/writing-middleware.html)都采用非常相似的 CPS 函数签名：

```
 const middleware = (req, res, next) => {
     /* middleware's logic */
     next();
 }

 const customErrorHandler = (error, req, res, next) => {
     /* custom error handling logic*/
 }; 
```

~~`next`是 express 的原生回调函数。~~

> 更正： next() 函数不是 Node.js 或 Express API 的一部分，而是传递给中间件函数的第三个参数。next() 函数可以任意命名，但按照惯例，它总是命名为“next”</p>

`req`并且`res`分别是 HTTP 请求和 HTTP 响应的命名约定。

Express.JS 中的路由处理程序将由一个或多个中间件函数组成。Express.js 会将它们中的每一个传递 给下一个中间件所做更改 的`req`,对象，以及一个相同的回调。`res``next`

```
app.get('/get', middlware1, middlware2, /*...*/ , middlewareN, customErrorHandler) 
```

`next`回调函数用于：

1.  作为中间件的*延续*：

    *   调用`next()`将执行流程传递给下一个中间件函数。在这种情况下，它履行了作为*continuation*的角色。
2.  也作为路由*拦截器*：

    *   调用`next('Custom error message')` 绕过所有后续中间件，并将执行控制传递`customErrorHandler`给错误处理。这使得在路线中间“取消”成为可能！
    *   调用`next('route')`绕过后续的中间件并将控制权传递给下一个匹配的路由，例如。/获取/部分。

## 在 JS 中模仿管道

[pipe](https://github.com/tc39/proposal-pipeline-operator)有一个 TC39 提案，但在它被接受之前，我们必须手动模仿 pipe 的行为。嵌套 CPS 函数可能会导致回调地狱，所以这是我尝试更简洁的代码：

假设我们想通过替换起始字符串的部分来计算一个句子*“狐狸跳过月球”*`props` （例如）

```
const props = "     The [ANIMAL] [ACTION] over the [OBJECT] " 
```

替换字符串不同部分的每个函数都使用数组排序

```
const insertFox = s => s.replace(/\[ANIMAL\]/g, 'fox')
const insertJump = s => s.replace(/\[ACTION\]/g, 'jumps')
const insertMoon = s => s.replace(/\[OBJECT\]/g, 'moon')
const trim = s => s.trim()
const modifiers = [insertFox, insertJump, insertMoon, trim] 
```

我们可以使用`reduce`.

```
const pipeJS = (chain, callBack) => seed => 
    callBack(chain.reduce((acc, next) => next(acc), seed))
const callback = o => console.log(o)

pipeJS(modifiers, callback)(props) //-> 'The fox jumps over the moon' 
```

这是`pipeJS`;的异步版本

```
const pipeJSAsync = chain => async seed =>
    await chain.reduce((acc, next) => next(acc), seed)
const callbackAsync = o => console.log(o)

pipeJSAsync(modifiers)(props).then(callbackAsync) //-> 'The fox jumps over the moon' 
```

希望这可以帮助！

# javascript - alert() 方法不会导致 window.focus 在现代浏览器上

> ID：10173843
> 
> 赞同：1
> 
> 时间：2012-04-16T12:12:41.633
> 
> 标签：javascript

每当我过去调用 javascript alert 方法时，它都会自动聚焦到调用它的窗口，但在 Firefox 11 等现代浏览器中并非如此。如何使用现代浏览器实现自动 window.focus，因为警报在我的应用程序中非常重要，因为它是股票警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:17:09.243

恐怕如果不突破几乎不可能的沙箱，这将是不可能的。你受制于网络浏览器和操作系统。

有一些针对 HTML5 的通知 API，但目前尚未实现。

# batch-file - 如何检查cmd文件中的空值？

> ID：10173844
> 
> 赞同：8
> 
> 时间：2012-04-16T12:12:49.797
> 
> 标签：batch-file, cmd

我有下面的命令行文件。我需要检查变量的空值。我没有提供任何命令行参数。

```
@echo off
@set PASSWORD=
@set PORT=9001
@set command=START
if %PASSWORD% NEQ () GOTO MyLabel

:MyLabel
@set command=%command% -p%PASSWORD%

@set command=%command% -i%PORT%
@echo %command% 
```

我尝试了几个选项，例如与空括号 ( `()`)、空字符串 ( `""`) 进行比较，但似乎没有任何效果。它运行时给我以下输出：

> () 在这个时候是出乎意料的。

我正在使用 Windows 7 x32。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T12:32:24.147

以下应该做到这一点：

```
if [%PASSWORD%] NEQ [] GOTO MyLabel 
```

有关详细信息，请参阅[ss64.com](http://ss64.com/nt/if.html)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-09T11:54:47.543

在变量周围不使用`IF DEFINED variable`百分号。

在 XP（32 位）和 Win7 x64 中测试：

```
SET PASSWORD=
IF DEFINED PASSWORD (echo PASSWORD = %PASSWORD%) ELSE (echo PASSWORD is empty or undefined)
IF DEFINED USERNAME (echo USERNAME = %USERNAME%) ELSE (echo USERNAME is empty or undefined) 
```

# django - 如何使用随机排序的元素测试查询集的正确设置？

> ID：10173850
> 
> 赞同：1
> 
> 时间：2012-04-16T12:13:20.887
> 
> 标签：django, django-testing

假设我有以下功能：

```
def select_queryset(value_to_decide_upon):
    """ this function returns either any of some querysets or nothing """

    if value_to_decide_upon == 1:
        return User._default_manager.all()
    elif value_to_decide_upon == 2:
        return User._default_manager.filter(pk__in=[some_more_values])

    elif value_to_decide_upon == n-1:
        return User._default_manager.all().order_by('?')
    elif value_to_decide_upon == n:
        return None 
```

现在问题来了：这个函数有一个随机排序的查询集作为返回值：

```
queryset = User._default_manager.all().order_by('?') 
```

现在关于该函数唯一重要的是：它必须返回正确的查询集。有没有办法以我可以的方式访问查询集，即。做这样的事情：

```
class TestQuerysetSelection(TestCase):

    def test_return_value(self):
        # this, of course, will always fail:
        self.assertEqual(select_queryset(n-1),
                         User._default_manager.all().order_by('?') )

        # and this is not working as well
        self.assertEqual( templatetag.queryset.order_by, '?' ) 
```

那么我如何测试函数是否返回正确的查询集，而不是与所有其他查询集进行比较？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T12:48:03.357

我认为最简单的方法是比较集合（无序的）。

```
self.assertEqual(
    set(select_queryset(n-1)),
    set(User._default_manager.all())
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:21:52.793

您可以覆盖 order by 并按 pk 排序，因此您的查询集中将有顺序，而不是随机顺序。我不确定比较查询集的最佳方法是什么。

```
class TestQuerysetSelection(TestCase):
    def test_return_value(self):
        # Add `order_by('id')` to sort by id
        self.assertEqual(select_queryset(n-1).order_by('id'),
                         User._default_manager.all().order_by('id') ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T12:22:14.270

尝试

```
qs1.query.sql_with_params() == qs2.query.sql_with_params()
# or simply
str(qs1.query) == str(qs2.query) 
# for your code
self.assertEqual(select_queryset(n-1).query.sql_with_params(),
                 User._default_manager.all().order_by('?').query.sql_with_params()) 
```

此外，我认为您需要一个更简洁的函数来返回这些查询集。

# javascript - 简单数据图网站高流量解决方案

> ID：10173862
> 
> 赞同：2
> 
> 时间：2012-04-16T12:14:28.933
> 
> 标签：javascript, ruby, xml, sinatra, highcharts

我正在构建一个单页网站，该网站将通过图表向其用户显示动态数据（每秒更新一次）。我希望这个页面会收到大量的流量。

我的数据存储在[REDIS](http://redis.io/)中，我正在使用[Highcharts](http://www.highcharts.com/)显示图表。我使用 ruby​​ / Sinatra 作为我的应用层。

我的问题是我应该如何最好地构建数据存储和 JavaScript 图形解决方案之间的链接？

我考虑过直接连接到 REDIS，但这似乎效率最低。我想知道 ruby​​ 每秒构建一个 XML 文件然后 Highcharts 从那里提取数据的 XML 解决方案是否是最好的，因为压力只在于点击那个 XML 文件。

但我想看看这里是否有人可能以前解决过这个问题或有更好的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:37:35.017

如果数据不是特定于用户的，则应将其缓存到客户端易于读取的表示形式中。对于 Web 浏览器，**JSON**可能是[更好的选择](https://stackoverflow.com/questions/2636245/choosing-between-json-and-xml)。

您可以使用 Redis 本身缓存它。（[Memcached](http://memcached.org/)，[Varnish](https://www.varnish-cache.org/)是其他选项）您应该在每次数据到达时对其进行缓存，并且必须避免在每次请求时转换数据。请求必须简单地从缓存中提供预先计算的信息（就像使用静态信息一样）

为了在客户端获得更好的体验，您应该尽量减少从服务器下载的数据量。JSON 比 XML 更适合此目的。

# asp.net-mvc - 在 FormsAuthentification 中获取当前用户

> ID：10173863
> 
> 赞同：0
> 
> 时间：2012-04-16T12:14:30.103
> 
> 标签：asp.net-mvc

这是我在登录功能中使用的代码：

> FormsAuthentication.SetAuthCookie(Model.IDUser, false);

我想知道如何阅读“IDuser”（当前用户已连接）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:15:29.867

```
HttpContext.Current.User.Identity.Name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:54:57.023

您还可以通过以下方式获取当前用户

```
var current = Membership.GetUser(); 
```

它所做的不仅仅是返回当前用户，因为它更新了数据库数据存储中的 LastActivity 列 [http://msdn.microsoft.com/en-us/library/system.web.security.membership.getuser .aspx](http://msdn.microsoft.com/en-us/library/system.web.security.membership.getuser.aspx)

# c# - 将一个数组与另一个数组匹配

> ID：10173865
> 
> 赞同：2
> 
> 时间：2012-04-16T12:14:47.233
> 
> 标签：c#

我正在寻找一种数组匹配方法。

这里我有两个数组，如代码所示

```
char[] normalText = new char[26] {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'};
char[] parsedText = new char[26] {'b', 'c', 'd', 'e', 'f', 'g', ...}; 
```

而且，我想匹配它们，如果我在程序中写“abc”，它将变成“bcd”，并且我制作了一个这样的文本解析器方法：

```
 parsing = input.ToCharArray();
        foreach (char c in parsing)
        {
            throw new NotImplementedException();
        } 
```

但是，我不知道在 foreach 语句之后我应该做什么样的查询来匹配它们。如果您知道如何在代码中匹配此内容，请在此处发布，非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:27:39.647

我会使用这样的东西：

```
var input = "abc";
var parsing = input.ToCharArray();
var result = new StringBuilder();
var offset = (int)'a';
foreach (var c in parsing) {
    var x = c - offset;
    result.Append(parsedText[x]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:39:10.553

看起来您想使用这些来进行 1:1 翻译。

最好的（即：最可扩展的）方法可能是使用字典：

```
Dictionary<char, char> dictionary = new Dictionary<char, char>();
dictionary.Add('a', 'b');
dictionary.Add('b', 'c');
dictionary.Add('c', 'd');
//... etc (can do this programmatically, also 
```

然后 ：

```
char newValue = dictionary['a'];
Console.WriteLine(newValue.ToString()); // "b" 
```

等等。使用字典，您还可以获得列表的所有功能，这取决于您正在做什么，这可能非常方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:53:11.507

像这样的东西，现在将其格式化为最适合您的方式。

```
char[] normalText = new char[26] {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'};
char[] dictionary = new char[26] {'z', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y' };    

parsing = input.ToCharArray();  
foreach (char c in parsing)
        {
           if(index(c,normalText)<= dictionary.Length) 
               Console.WriteLine(dictionary[index(c,normalText)]);
        }

int index(char lookFor, char[] lookIn) 
    {
        for (int i = 0; i < lookIn.Length; i++)
            {
                if (lookIn[i] == lookFor)
                    return i;
            }
        return -1;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T12:24:10.303

这就是你想要的。您可以使用`Array.IndexOf(oldText, s)`获取旧数组中字符的索引，然后通过该索引获取新数组中的值。

```
string input="abc";
char[] oldText = new char[26] {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'};
char[] newText = new char[26] { 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z','a'};

char[] array = input.ToCharArray();
StringBuilder output= new StringBuilder();
foreach(char s in array)
{
  output.Append(newText[Array.IndexOf(oldText, s)]);
}

Console.WriteLine(output.ToString()); // "bcd" 
```

# iphone - 如何在iOS上确定哪些应用程序是后台，哪些应用程序是前台

> ID：10173866
> 
> 赞同：1
> 
> 时间：2012-04-16T12:14:50.947
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我的应用程序是后台应用程序，即它始终在后台运行，我如何通过应用程序 id 在 iOS 上确定哪些应用程序是后台的，哪些应用程序是前台的

任何人对此有任何想法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:23:47.800

无法通过 App Store 应用程序完成。

# asp.net - asp.net 比较验证器

> ID：10173868
> 
> 赞同：0
> 
> 时间：2012-04-16T12:14:57.400
> 
> 标签：asp.net, validation

在 ASP.net 中，以 Password Reset 之类的形式，当我们比较新密码和确认密码时，如果两者都不匹配，我们会显示错误消息，例如，

```
ErrorMessage="*Password not matched" 
```

通过使用错误消息属性，可以在 UI 部分本身中显示成功消息，就像`"Password Matched"`从新密码文本框失去焦点后一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:20:07.677

验证失败时通常会出现错误消息。因此，它会阻止表单提交。我会避免改变这种行为，而是通过标签、弹出窗口等提供反馈......

# algorithm - 检测在线英文昵称的随机性

> ID：10173869
> 
> 赞同：0
> 
> 时间：2012-04-16T12:15:01.750
> 
> 标签：algorithm, random

> **可能重复：**
> [如何检查字符串是否看起来是随机的，或者是人为生成的和发音的？](https://stackoverflow.com/questions/1164186/how-to-check-if-a-string-looks-randomized-or-human-generated-and-pronouncable)
> [有没有办法检测像 putjbtghguhjjjanika 这样的字符串？](https://stackoverflow.com/questions/6297991/is-there-any-way-to-detect-strings-like-putjbtghguhjjjanika)

是否有任何算法能够检测在线昵称的随机性？在许多情况下它会派上用场。

给定任何字母数字名称，算法应该能够给它一个“随机”值。如果随机值太高，则应用程序可能会强制用户选择另一个名称。
例如，“Mikel”将通过测试并被允许使用，而“Agslj”则不会并被迫选择其他名称

如果没有可用的算法，我将如何为此创建算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:23:38.450

您可能想查看英文字母的使用模式/频率，[Letter Frequency Analysis](http://library.thinkquest.org/28005/flashed/thelab/cryptograms/frequency.shtml)是一个很好的基础知识网站。
[此页面](http://www.cryptograms.org/letter-frequencies.php)还将帮助您进行狩猎。

基本上你想要做的是使用与密码学家在尝试破解代码时使用的类似的技术。
如果输入到文本框中的工作在丢失阈值内与已知的使用模式匹配，那么您可以允许它，而如果输入与任何频率/使用模式不匹配，甚至一点点，那么您可以安全地丢弃它。

我强烈建议您在尝试任何此类算法之前研究此类技术。

但是，在如此短的输入中，我无法保证您的准确性...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T12:25:44.177

实现这样的算法似乎很难，但你可以尝试一下：

如果您检查基于英语的单词（或任何源自拉丁语的语言），则没有超过 3 个连续辅音的单词。元音也是一样。

此外，您可以计算存在多少个数字，在哪个位置等。

# ios - 关闭操作表时 ShareKit 失去焦点

> ID：10173871
> 
> 赞同：1
> 
> 时间：2012-04-16T12:15:14.363
> 
> 标签：ios, view, focus, sharekit

我正在尝试将 ShareKit 集成到我的 ios 游戏中。

一切正常，并且显示了操作表，我可以与之交互，但是当 sharekit 操作完成时（通过关闭操作表或完成任何操作），我无法将焦点返回到我的应用程序。

我已经尝试了几种方法，但任何一种都对我有用。发生了什么？我不是专业的程序员，所以我希望我错过了一些东西。

我是

这是我的.h

```
#import <UIKit/UIKit.h>
#import "SHK.h"
#import "SHKConfiguration.h"

@interface SocialWrapper: UIViewController{
}

- (id) init;
- (void) open;
- (void) dealloc;

@end 
```

和.m

```
#import "SocializeWrapper.h"

@implementation SocialWrapper

- (id) init {
    self=[super init];

    DefaultSHKConfigurator *configurator = [[DefaultSHKConfigurator alloc] init];
    [SHKConfiguration sharedInstanceWithConfigurator:configurator];

    [SHK flushOfflineQueue];
    return self;
}

- (void) open
{  
    NSString *someText = @"Hello Earth!";
    SHKItem *item = [SHKItem text:someText];

    // Get the ShareKit action sheet
    SHKActionSheet *actionSheet = [SHKActionSheet actionSheetForItem:item];

    UIWindow *window = [UIApplication sharedApplication].keyWindow;
    [window addSubview:self.view];

    [SHK setRootViewController:self];
    [actionSheet showInView:self.view];
}

- (void) dealloc {
     NSLog(@"SHK dealloc");
    [self release];
    [super dealloc];
}

@end 
```

我通过使用这个包装器来调用它

```
#import "SocializeWrapper.h"

SocialWrapper *socialize;

void SHKinit(void) {
    NSLog(@"SHK Init");    
    socialize = [[SocialWrapper alloc] init];  
}

void SHKopenWeb(void){
    NSLog(@"SHK Open actionsheet"); 
    [socialize open];
} 
```

我正在使用 ios 5、xcode 4.3.2 和 git 的最后一个 sharekit 版本。

我认为一旦关闭操作表，我就必须关闭我的 SocialWrapper，但我不知道如何捕获该事件，或者即使这是正确的。我被困住了。

任何帮助将不胜感激。

## 更新

正如评论建议的那样，现在控制器位于一个类别上，使用操作表委托，单击取消的操作表按钮时可以重新获得焦点。当操作完成或取消时，问题仍然存在。不知道如何捕获该事件。

这是我的类别代码：

```
#import "SocialWrapper.h"

@implementation UIViewController (SocialController)

-(void) loadconfig
{
    DefaultSHKConfigurator *configurator = [[DefaultSHKConfigurator alloc] init];
    [SHKConfiguration sharedInstanceWithConfigurator:configurator];

    [SHK flushOfflineQueue];
}

- (void) open
{  
    NSLog(@"Opening social button");  

    NSString *someText = @"Monkey Armada rules!";
    SHKItem *item = [SHKItem text:someText];

    // Get the ShareKit action sheet
    SHKActionSheet *actionSheet = [SHKActionSheet actionSheetForItem:item];

    UIWindow *window = [UIApplication sharedApplication].keyWindow;
    [window addSubview:self.view];

    [actionSheet setDelegate:self];

    [SHK setRootViewController:self];
    [actionSheet showInView:self.view];
}

- (void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex
{
      NSLog(@"SHK actionsheet dissmiss with button %d", buttonIndex); 
     if(buttonIndex == 4)
     {
        NSLog(@"SHK close actionsheet");
        [self dismissViewControllerAnimated:YES completion:nil];
        [self.view removeFromSuperview];
     }
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:37:15.680

好吧，因为 SHKActionSheet 是 UIActionSheet 的子类，您可以将该类的委托设置为 self 以了解解雇何时发生。

还有，[自我释放]；在 dealloc 中完全误解了 release 的作用，如果你在 dealloc 中，那么释放 self 不会做任何事情！学习内存管理规则。

我还应该警告您 [window addSubview:self.view] 已被弃用，您根本不应该这样做。事实上，我认为没有理由包装共享工具包，每个视图控制器都应该能够轻松编写该代码。更糟糕的是，如果您不想每次都重写代码，您可以将该代码放在 UIViewController 上的一个类别中。

# linux - TXT 文件中的 Google 搜索结果

> ID：10173873
> 
> 赞同：0
> 
> 时间：2012-04-16T12:15:20.197
> 
> 标签：linux, web-crawler, search-engine

我想编写一个程序或脚本（用于 Linux），它可以将 google.com 的搜索结果复制到 TXT 文件中。

我只需要搜索结果的域名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:25:25.823

您可以尝试Google 提供的 [GwebResult 。](https://developers.google.com/web-search/docs/reference#_class_GwebResult)

这里还有一个指向 Google 的 Web Search [Developer Guide](https://developers.google.com/web-search/docs/#The_Hello_World_of_Google_Search)的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:27:42.883

我在 stackoverflow 上找到了这个脚本，我相信这就是你要找的，以你想要的方式使用它：

```
#!/bin/bash

clear
echo ""
echo ".=========================================================."
echo "|                                                         |"
echo "|  COMMAND LINE GOOGLE SEARCH                             |"
echo "|  ---------------------------------------------------    |"
echo "|                                                         |"
echo "|  Version: 1.0                                           |"
echo "|  Developed by: Rishi Narang                             |"
echo "|  Blog: www.wtfuzz.com                                   |"
echo "|                                                         |"
echo "|  Usage: ./gocmd.sh <search strings>                     |"
echo "|  Example: ./gocmd.sh example and test                   |"
echo "|                                                         |"
echo ".=========================================================."
echo ""

if [ -z $1 ]
then
 echo "ERROR: No search string supplied."
 echo "USAGE: ./gocmd.sh <search srting>"
 echo ""
 echo -n "Anyways for now, supply the search string here: "
 read SEARCH
else
 SEARCH=$@
fi

URL="http://google.com/search?hl=en&safe=off&q="
STRING=`echo $SEARCH | sed 's/ /%20/g'`
URI="$URL%22$STRING%22"

lynx -dump $URI > gone.tmp
sed 's/http/\^http/g' gone.tmp | tr -s "^" "\n" | grep http| sed 's/\ .*//g' > gtwo.tmp
rm gone.tmp
sed '/google.com/d' gtwo.tmp > urls
rm gtwo.tmp

echo "SUCCESS: Extracted `wc -l urls` and listed them in '`pwd`/urls' file for reference."
echo ""
cat urls
echo ""

#EOF 
```

使其可执行并尝试运行它

```
./gocmd searchstring 
```

# entity-framework - 没有公钥的 EF 实体

> ID：10173878
> 
> 赞同：3
> 
> 时间：2012-04-16T12:15:35.627
> 
> 标签：entity-framework, primary-key

我想在没有公钥的情况下在 EF 中创建一个实体。后备表有一个非唯一的聚集键，但表中的数据在概念上没有它可以使用的唯一主键。

看来EF真的不喜欢这个。有什么方法可以让 EF 接受该表没有主键并让它与它一起工作，而不会影响性能？我不在乎结果是否是只读的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:54:08.490

据我了解，由于实体框架基于实体的域驱动设计概念，因此根据定义，每个实体都必须具有唯一的标识符。如果您的表中的数据所代表的概念在概念上没有唯一标识符，那么它就不是框架预期的实体。

考虑到这一点，我将定义一个存储过程，[通过我的对象上下文](http://msdn.microsoft.com/en-us/data/gg699321)使其可用，然后通过延迟加载数据的类使封装此数据的对象可用，手动将其映射到您正在使用的对象中并呈现它以只读方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:58:55.767

您还可以通过公开视图然后将实体映射到视图来完成此操作。

# ios - 从 XIB 加载 ECSlidingViewController

> ID：10173881
> 
> 赞同：1
> 
> 时间：2012-04-16T12:15:38.297
> 
> 标签：ios, loading, xib

我想在我的项目中使用这个[ECSlidingViewController](https://github.com/edgecase/ECSlidingViewController)。链接中的示例应用程序使用情节提要，但我想从 xibs 加载所有内容。我必须在 application:didFinishLaunchingWithOptions: 中实现什么来做到这一点？

来自示例应用程序的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  ECSlidingViewController *slidingViewController = (ECSlidingViewController *)self.window.rootViewController;
  UIStoryboard *storyboard;

  if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
    storyboard = [UIStoryboard storyboardWithName:@"iPhone" bundle:nil];
  } else if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    storyboard = [UIStoryboard storyboardWithName:@"iPad" bundle:nil];
  }

  slidingViewController.topViewController = [storyboard instantiateViewControllerWithIdentifier:@"FirstTop"];

  return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:53:57.590

您可以从 nib 实例化它，而不是使用故事板来获取 UIViewController 的实例：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  ECSlidingViewController *slidingViewController = [[ECSlidingViewController alloc] init];

  FirstTopViewController *firstTop = [[FirstTopViewController alloc] initWithNibName:@"FirstTop" bundle:nil];
  slidingViewController.topViewController = firstTop;

  self.window.rootViewController = slidingViewController

  return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T22:17:17.077

试试这个适用于我的环境。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
  self.initialViewController = [[InitialViewController alloc] initWithNibName:@"InitialViewController" bundle:nil];
  self.window.rootViewController = self.initialViewController;

  ECSlidingViewController *slidingViewController = (ECSlidingViewController *)self.window.rootViewController;   
  FirstViewController *firstController = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
  slidingViewController.topViewController = firstController;

  [self.window makeKeyAndVisible];
  return YES;    
} 
```

并且不要忘记添加

```
 [self.slidingViewController setAnchorRightRevealAmount:280.0f]; 
```

进入你的 firstviewcontroller 的 viewWillAppear 方法。

祝你好运

# http - 哪些浏览器支持“//”而不是“http://”和“https://”？

> ID：10173882
> 
> 赞同：11
> 
> 时间：2012-04-16T12:15:40.020
> 
> 标签：http, https

> **可能重复：**
> [在 <script src=“...”> 中用 // 替换是否有效？](https://stackoverflow.com/questions/550038/is-it-valid-to-replace-http-with-in-a-script-src-http)
> [省略协议（方案）以保留当前页面之一的绝对 URL](https://stackoverflow.com/questions/4978235/absolute-urls-omitting-the-protocol-scheme-in-order-to-preserve-the-one-of-the)

我在 Google 中找不到任何关于此的信息 - 很难找到有关“//”的信息 :)

无论如何请告诉，哪些浏览器支持“//”而不是“http://”和“https://”？我想用它来包含图像、脚本、样式等。但它安全吗？是否有不支持此功能的浏览器，我需要提供协议？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-16T12:25:55.863

所有浏览器都支持它，它是安全的 - [RFC 3986 第 4.2 节](https://www.rfc-editor.org/rfc/rfc3986#section-4.2)（或查看RFC3986 的[txt 版本](http://www.ietf.org/rfc/rfc3986.txt)并转到 4.2）指定使用[协议相对 url](http://paulirish.com/2010/the-protocol-relative-url/)，并在[HTML5 样板](http://html5boilerplate.com/)中使用，该技术没有报告问题。如果在使用这个跨浏览器时出现问题，社区现在应该已经接受了。

编辑：即使是[维基媒体也](http://blog.wikimedia.org/2011/09/27/protocol-relative-urls-enabled-on-all-wikimedia-foundation-wikis/)使用它

# php - 通过 PHP 的 MySql 源

> ID：10173883
> 
> 赞同：0
> 
> 时间：2012-04-16T12:15:44.827
> 
> 标签：php, mysql, sql

如何在 PHP 中为此 MySql 行调用等效行：

```
mysql> source [path-of-file].sql 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:19:45.453

SOURCE 不是本机 mySQL 命令，而是特定于命令行客户端的命令。

在 PHP 中，您可以尝试以下操作：

```
<?php
shell( "mysql --user=$user --password=$password $database < $file" );
?> 
```

# ios - iOS - 应用程序委托 - 使用 CLLocationManager 调用 didBecomeActive

> ID：10173885
> 
> 赞同：1
> 
> 时间：2012-04-16T12:15:50.290
> 
> 标签：ios, uiapplicationdelegate

我有一个典型的问题。在我的应用程序中，我正在处理应用程序委托方法

```
- (void)applicationDidBecomeActive:(UIApplication *)application 
```

刷新用户界面。

由于我的应用程序不会终止并在后台运行，因此当应用程序进入活动状态时，会调用此方法并正常工作。
但是在我的一个视图控制器中，我正在创建 CLLocationManager 对象

```
self.locationManager = [[CLLocationManager alloc] init];
self.locationManager.delegate = self; // send loc updates to myself 
```

问题是，当这个位置管理器对象被创建时，应用程序委托的“applicationDidBecomeActive”也被调用，这对我来说不是必须处理的。初始化位置管理器对象时，我应该如何忽略调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:31:43.953

发生这样的调用很奇怪，但是如果没有办法阻止它，只需在您的默认设置中创建一个标志，smth **lke callAfterSettingDelegate**，然后`DidBcomeActive`检查它是否在此之后被调用，忽略此调用并将该标志设置为 nil .

# reference - 动态 DNS 引用

> ID：10173888
> 
> 赞同：3
> 
> 时间：2012-04-16T12:16:16.140
> 
> 标签：reference, dns, dyndns

您能否引用参考资料/书籍以获取有关动态 DNS 的更多详细信息？我已经为所有翻白眼的人尝试了 Wikipedia、IEEE 论文和 RFC。所以请，欢迎任何意见。我需要在项目中实施它的帮助，并且很想了解更多有关它的信息。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:20:16.593

动态 DNS 是一种动态更新 DNS 记录的概念，与普通（静态）DNS 不同，后者在 DNS 记录中的更改需要手动干预。

动态 DNS 意味着您有一些 DNS 服务器，您可以通过编程方式更新其上的记录。这可以通过不同的方式实现：

1.  [RFC 2136](https://www.rfc-editor.org/rfc/rfc2136)动态 DNS。它是对良好的 ol' DNS 协议的扩展，它允许不*获取*DNS 记录，而是*更新*它们。目前大多数 DNS 服务器（例如 BIND9 和 PowerDNS）都支持此协议。文档来源：[RFC 2136](https://www.rfc-editor.org/rfc/rfc2136)定义了协议。`nsupdate`是支持这个协议的命令行工具，read [`man nsupdate`](http://linux.die.net/man/8/nsupdate). 有关如何配置 BIND9 进行动态更新的详细信息，请参阅[BIND9 ARM](http://www.isc.org/software/bind/documentation)。大多数语言都存在允许使用此协议进行动态 DNS 更新的库。例如，对于 PHP，它是[Net_DNS2](http://pear.php.net/package/Net_DNS2)。它没有很好的文档记录，但网站有很好的例子，很容易让我使用它。

2.  一些 DNS 服务器（尤其是 PowerDNS）可以从数据库后端读取它们的 DNS 记录。因此，可以将新的 DNS 记录写入普通 SQL 数据库，服务器只需从那里获取它们。文档来源：如果您选择这种方式，我非常建议使用 PowerDNS，请在[PowerDNS 站点](http://powerdns.com/)上查找文档。

3.  如果更新不频繁，也可以更新 DNS 服务器上的文本区域文件，然后请求服务器重新读取更新的区域文件。虽然这可能不是一个方便的方式。所有主要的 DNS 服务器都支持相同的区域文件格式，我发现[Rocket Scientists 的 DNS](http://www.zytrax.com/books/dns/)非常好。

现在，动态 DNS 完全不同的一面是动态 DNS*服务*，例如[no-ip.com](http://www.no-ip.com/)、我自己的[net-me.net](https://www.net-me.net/)和许多其他服务。它们都公开了一些基于 HTTP 的 API（通常非常简单）来更新 DNS 记录，并且通常提供一个 GUI 客户端软件来实际更新它们。您可以在[此处](https://www.net-me.net/client)快速了解更新协议、客户端和整个过程。由于不存在标准，每个提供商都使用自己的协议变体，通常它们看起来都非常相似。（所有这些动态 DNS 提供商在内部使用某种 1.2.3。如上所述。）

最后但同样重要的是 - 有一本**很棒的**Oreilly 书籍 - [DNS 和 BIND 第 5 版](http://shop.oreilly.com/product/9780596100575.do)，它涵盖了 DNS 的所有可能方面。

# php - 多步骤表单上的jQuery ajax

> ID：10173890
> 
> 赞同：0
> 
> 时间：2012-04-16T12:16:19.993
> 
> 标签：php, jquery

大家好，我正在尝试将 jQuery AJAX 合并到我的多步骤表单中，以便它将某个 div 更新为 process.php 页面上的某个 div，但它会不断在新页面上加载结果。如何在不刷新页面的情况下更新 div？

这是我正在使用的 jQuery 代码：

```
$.ajax({
    url: 'process.php',
    data: $('form[name="booking"]').serialize(),
    dataType: 'html',
    type: 'POST',
    success: function(data) {

        // this is the bit that needs to update the div

        $('#last-step').fadeOut(300, function() { $('#result').html(data).fadeIn(300);
    },
    complete: function (data) {
        // your code here
    },
    error: function (url, XMLHttpRequest, textStatus, errorThrown) {
        alert("Error: " + errorThrown);
    }
}); 
```

这是我的多步表单的代码：http: [//jsfiddle.net/xSkgH/47/](http://jsfiddle.net/xSkgH/47/)。

非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:22:25.820

我没有`result`在您的标记中看到一个 div 调用。所以可能你需要在你显示的最后一个 div 中显示你的结果。你也失踪了`})`。下面的代码应该可以工作，

```
$.ajax({
    url: 'process.php',
    data: $('form[name="booking"]').serialize(),
    dataType: 'html',
    type: 'POST',
    success: function(data) {

        // this is the bit that needs to update the div

        $('#last-step').fadeOut(300, function() { 
              $('#last-step').html(data).fadeIn(300);
        });
    },
    complete: function (data) {
        // your code here
    },
    error: function (url, XMLHttpRequest, textStatus, errorThrown) {
        alert("Error: " + errorThrown);
    }
}); 
```

# android - 如何使用phonegap在Android手机上显示相机

> ID：10173892
> 
> 赞同：1
> 
> 时间：2012-04-16T12:16:32.383
> 
> 标签：android, cordova, camera

我想在 Android 手机上使用 phonegap 来捕捉图像。我尝试发布在 Phonegap 页面上的代码，但相机没有出现。任何帮助表示赞赏。非常感谢。

这是我手机上的显示

![这是我手机上的显示，没有摄像头](../Images/18411dd3a00b5ac9eb6e3a95eea1a3eb.png)

```
<!DOCTYPE html>
<html>
  <head>
    <title>Capture Photo</title>

    <script type="text/javascript" charset="utf-8" src="cordova-1.6.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    var pictureSource;   // picture source
    var destinationType; // sets the format of returned value 

    // Wait for Cordova to connect with the device
    //
    document.addEventListener("deviceready",onDeviceReady,false);

    // Cordova is ready to be used!
    //
    function onDeviceReady() {
        pictureSource=navigator.camera.PictureSourceType;
        destinationType=navigator.camera.DestinationType;
    }

    // Called when a photo is successfully retrieved
    //
    function onPhotoDataSuccess(imageData) {
      // Uncomment to view the base64 encoded image data
      // console.log(imageData);

      // Get image handle
      //
      var smallImage = document.getElementById('smallImage');

      // Unhide image elements
      //
      smallImage.style.display = 'block';

      // Show the captured photo
      // The inline CSS rules are used to resize the image
      //
      smallImage.src = "data:image/jpeg;base64," + imageData;
    }

    // Called when a photo is successfully retrieved
    //
    function onPhotoURISuccess(imageURI) {
      // Uncomment to view the image file URI 
      // console.log(imageURI);

      // Get image handle
      //
      var largeImage = document.getElementById('largeImage');

      // Unhide image elements
      //
      largeImage.style.display = 'block';

      // Show the captured photo
      // The inline CSS rules are used to resize the image
      //
      largeImage.src = imageURI;
    }

    // A button will call this function
    //
    function capturePhoto() {
      // Take picture using device camera and retrieve image as base64-encoded string
      navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50,
        destinationType.DATA_URL });
    }

    // A button will call this function
    //
    function capturePhotoEdit() {
      // Take picture using device camera, allow edit, and retrieve image as base64-encoded string  
      navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 20, allowEdit: true,
        destinationType.DATA_URL });
    }

    // A button will call this function
    //
    function getPhoto(source) {
      // Retrieve image file location from specified source
      navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, 
        destinationType: destinationType.FILE_URI,
        sourceType: source });
    }

    // Called if something bad happens.
    // 
    function onFail(message) {
      alert('Failed because: ' + message);
    }

    </script>
  </head>
  <body>
    <button onclick="capturePhoto();">Capture Photo</button> <br>
    <button onclick="capturePhotoEdit();">Capture Editable Photo</button> <br>
    <button onclick="getPhoto(pictureSource.PHOTOLIBRARY);">From Photo Library</button><br>
    <button onclick="getPhoto(pictureSource.SAVEDPHOTOALBUM);">From Photo Album</button><br>
    <img style="display:none;width:60px;height:60px;" id="smallImage" src="" />
    <img style="display:none;" id="largeImage" src="" />
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T19:23:08.727

你的`capturePhoto()`和`capturePhotoEdit()`函数都需要`destinationType`更新。

```
navigator.camera.getPicture(
    onPhotoDataSuccess,
    onFail,
    {
        quality: 50,
        destinationType.DATA_URL
    }
); 
```

应该是这样的

```
navigator.camera.getPicture(
    onPhotoDataSuccess,
    onFail,
    {
        quality: 50,
        destinationType: destinationType.DATA_URL
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T09:58:46.707

我遇到了同样的问题，我现在可以使用 getPhoto() 函数，但仍然无法让 cameraPhoto() 或 cameraPhotoEdit() 函数正常工作。我已经完成了这篇文章中的几乎所有内容以及更多内容。

哦，您可以尝试这里列出的一些解决方案：

[Phonegap Camera API 无法读取未定义的属性数据 url](https://stackoverflow.com/questions/22834145/phonegap-camera-api-cannot-read-property-data-url-of-undefined)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T06:04:37.480

您是否在 AndroidMenifest 文件中添加了权限和相机功能？如果您没有添加，请再试一次。

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T13:39:19.233

在您的代码中更改科尔多瓦版本。现在你有了“cordova-1.6.0.js”，你应该把它改成“cordova-2.5.0.js”，我认为它会在那之后工作。像这样

```
<script type="text/javascript" charset="utf-8" src="cordova-2.5.0.js"></script> 
```

# python - 正则表达式解析词结构

> ID：10173896
> 
> 赞同：1
> 
> 时间：2012-04-16T12:16:56.513
> 
> 标签：python, regex, unicode, pattern-matching

我正在尝试构建我的第一个重要的正则表达式（用于 Python），但正在苦苦挣扎。

让我们假设语言 X（不是英语）中的一个单词是一系列最小“结构”。每个“结构”可以是：

```
An independent vowel (basically one letter of the alphabet)
A consonant (one letter of the alphabet)
A consonant followed by a right-attaching vowel
A left-attaching vowel followed by a consonant
(Certain left-attaching vowels) followed by a consonant followed by (certain right-attaching vowels) 
```

例如这个 3 个字符的单词：

```
<a consonant><a left-attaching vowel><an independent vowel> 
```

不是一个有效的单词，并且**不**应该匹配正则表达式，因为左连接元音的右侧没有辅音。

我知道所有的 Unicode 范围——辅音、独立元音、左连接元音等的 Unicode 范围。

这是我到目前为止所拥有的：

```
WordPattern = (
ur'('
ur'[\u0985-\u0994]|'
ur'[\u0995-\u09B9]|'
ur'[\u0995-\u09B9(\u09BE|[\u09C0-\u09C4])]|'
ur'[(\u09BF|\u09C7|\u09C8)\u0995-\u09B9]|'
ur'[(\u09BF|\u09C7|\u09C8)\u0995-\u09B9(\u09BE|[\u09C0-\u09C4])]'
ur')+'
) 
```

它不工作。除了让它工作之外，我还有三个具体问题：

*   我需要将正则表达式拆分为多行，否则代码会看起来很糟糕。我该怎么做呢？
*   我想使用某种字符串替换/模板来“命名”Unicode范围，以提高代码可读性并防止多次输入Unicode范围。
*   （这似乎很困难）允许的最小“结构”列表将不得不在以后扩展。有没有办法在正则表达式中设置一种“循环”机制，以便它适用于列表中所有允许的结构？

任何帮助，将不胜感激。这对初学者来说似乎很复杂！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T13:55:17.127

对具有非平凡形态的语言进行形态分析的合适工具是“有限状态转换器”。您可以跟踪和使用一些健壮的实现（一个由 Xerox Parc 提供）。有一个具有 python 绑定（用作外部库）。去谷歌上查询。

FST 基于有限状态自动机，例如（纯）正则表达式，但它们绝不是替代品。它是复杂的机器，所以如果您的目标很简单（例如，为了连字而进行音节化），您可能想要寻找更简单的东西。例如，有一些机器学习算法可以“学习”连字符。如果您确实对形态分析感兴趣，*则必须*努力研究 FST。

现在对于您的算法，如果您真的只需要一个简单的实现：由于任何元音或辅音都可以是独立的，因此您的规则是模棱两可的：它们允许将“ab”解析为“ab”。这种模糊性意味着正则表达式方法可能永远不会起作用，但如果您将较长的正则表达式放在首位，您可能会得到更好的结果，因此当两者都适用时，它们会优先使用较短的正则表达式。但实际上您需要构建一个解析器（手动或使用模块）并逐步尝试不同的事情。它与您想象的相反：设置一个使用不同正则表达式的循环，并逐步“使用”字符串。

但是，在我看来，您所描述的本质上是音节化。音节化的近乎普遍的规则是这样的：一个音节由一个核心元音，加上语言规则允许的尽可能多的前面（“起始”）辅音，加上后面的任何不能属于下一个音节的辅音。该规则称为“最大化起始”，它的结果是更容易向后解析音节（从单词的末尾）。试试看。

PS。您可能知道这一点，但是如果您将以下内容作为脚本的第二行，您可以将孟加拉语嵌入到您的正则表达式中：

```
# -*- coding: utf-8 -*- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:40:32.060

*   我需要将正则表达式拆分为多行，否则代码会看起来很糟糕。我该怎么做呢？

编译正则表达式时使用该[`re.VERBOSE`](http://docs.python.org/library/re.html#re.VERBOSE)标志。

```
pattern = re.compile(r"""(
                            [\u0985-\u0994]  # comment to explain what this is
                          | [\u0995-\u09B9]
                          # etc.
                         )
                      """, re.VERBOSE) 
```

*   我想使用某种字符串替换/模板来“命名”Unicode范围

你可以从普通的 Python 字符串构造一个 RE：

```
>>> subpatterns = {"vowel": "[aeiou]", "consonant": "[^aeiou]"}
>>> "{consonant}{vowel}+{consonant}*".format(**subpatterns)
'[^aeiou][aeiou]+[^aeiou]*' 
```

*   允许的最小“结构”列表将在以后扩展。有没有办法在正则表达式中设置一种“循环”机制，以便它适用于列表中所有允许的结构？

我不确定我是否明白你的意思，但是......假设你有一个（未编译的）RE列表，比如，`patterns`那么你可以计算它们的联合

```
re.compile("(%s)" % "|".join(patterns)) 
```

以这种方式构造 RE 时要小心特殊字符，并[`re.escape`](http://docs.python.org/library/re.html#re.escape)在必要时使用。

# asp.net - 无法获取查询字符串

> ID：10173903
> 
> 赞同：1
> 
> 时间：2012-04-16T12:17:32.040
> 
> 标签：asp.net

我正在使用以下代码在当前 http 上下文中设置 URL

```
public HttpContext SetNewHttpContext(string uRL)
    {
        var httpRequest = new HttpRequest("", uRL, "");
        var httpResponse = new HttpResponse(new StringWriter());         
        return new HttpContext(httpRequest, httpResponse);
    } 
```

如下调用它

```
HttpContext.Current = SetNewHttpContext("http://root/test.aspx?userid=319279549&name=xyz");

var val =  HttpContext.Current.Request.QueryString["userid"]; 
```

但我无法获得查询字符串的值（此处为用户 ID）并获得空值。

为什么？

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:21:23.643

```
 Uri tempUri = new Uri("http://root/test.aspx?userid=319279549&name=xyz"); 
   string sQuery = tempUri.Query;

   NameValueCollection queryString =
                System.Web.HttpUtility.ParseQueryString(sQuery ,Encoding.UTF8); 
```

# iphone - iPad 上的 AdBannerView 在动画解雇时将视图滚动到屏幕外

> ID：10173904
> 
> 赞同：0
> 
> 时间：2012-04-16T12:17:36.163
> 
> 标签：iphone, ios, ipad, iad, adbannerview

我在我的应用程序的视图控制器上实现了 AdBannerView。它在 iPhone 上运行良好，但在 iPad 上测试时出现问题。广告显示得很好，但是当我关闭 wifi 以测试解雇时，广告会将窗口内的所有元素都拿下，并将背景和标签栏留在原处。这只发生在 iPad 上。

这是我的广告视图动画代码：

```
- (void)fixupAdView:(UIInterfaceOrientation)toInterfaceOrientation {
int adY = 432;
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
    adY = 955;
}
if (_adBannerView != nil) {        
    if (UIInterfaceOrientationIsLandscape(toInterfaceOrientation)) {
        [_adBannerView setCurrentContentSizeIdentifier:
         ADBannerContentSizeIdentifierLandscape];
    } else {
        [_adBannerView setCurrentContentSizeIdentifier:
         ADBannerContentSizeIdentifierPortrait];
    }          
    [UIView beginAnimations:@"fixupViews" context:nil];
    if (_adBannerViewIsVisible) {
        NSLog(@"Visible");
        CGRect adBannerViewFrame = [_adBannerView frame];
        adBannerViewFrame.origin.x = 0;
        adBannerViewFrame.origin.y = adY -
        [self getBannerHeight:toInterfaceOrientation];

        [_adBannerView setFrame:adBannerViewFrame];
        CGRect contentViewFrame = _contentView.frame;

        contentViewFrame.origin.y = adY +
        [self getBannerHeight:toInterfaceOrientation];

        contentViewFrame.size.height = self.view.frame.size.height - 
        [self getBannerHeight:toInterfaceOrientation];

        _contentView.frame = contentViewFrame;

    } else {
        NSLog(@"Not Visible");
        CGRect adBannerViewFrame = [_adBannerView frame];
        adBannerViewFrame.origin.x = 0;
        adBannerViewFrame.origin.y = adY;

        [_adBannerView setFrame:adBannerViewFrame];
        CGRect contentViewFrame = _contentView.frame;

        contentViewFrame.origin.y = adY
        + [self getBannerHeight:toInterfaceOrientation];

        contentViewFrame.size.height = self.view.frame.size.height;

        _contentView.frame = contentViewFrame;            
    }
    [UIView commitAnimations];
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:07:43.477

我的广告视图的偏移框架位于错误的位置。它恰好适合 iPhone 框架，因为创建了 adview 就足以将广告推送到正确的位置。到了 iPad 的时间，计算出的偏移量将视图推离了窗口，但还不足以回到视图中。

# php - PHP xDebug 图解读

> ID：10173906
> 
> 赞同：12
> 
> 时间：2012-04-16T12:17:47.700
> 
> 标签：php, zend-framework, xdebug, kcachegrind

我正在分析一个 PHP 应用程序（基于 Zend 框架构建）。在附件中，您可以找到 KCacheGrind 从 xDebug 输出生成的主调用图的屏幕截图。

有两点我不明白：

1）为什么`{main}` *“分叉”*成2个电话？它们应该以某种方式平行还是一个接一个地发生？

2) 左边的箭头`{main}`有一个带文字的小蓝条`2x`；这是否意味着呼叫`Zend_Application->bootstrap`发生了两次？

![PHP xDebug 图](../Images/365c86391fd11796ec6e69ddb9e3b373.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-16T14:26:29.267

1.  电话（当然）一个接一个地发生。由于前两个函数中的每一个都由 main()*调用，因此该图分裂了。*该图显示调用，而不是执行顺序。

2.  是的，这正是它的意思。main() 调用 Zend_Application->bootstrap 两次并 ->run 一次。

# android - 如何在android中添加滑动抽屉控制器

> ID：10173912
> 
> 赞同：0
> 
> 时间：2012-04-16T12:18:16.890
> 
> 标签：android, android-layout

当用户单击该按钮时，我想要一个按钮，滑块打开到屏幕的一半，只有滑块有三个按钮添加，更新和删除。当用户按下此按钮时，滑块已关闭如何操作提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:14:16.033

这是一个简单的例子来证明这一点：

[Android 滑动抽屉演示](http://www.coderzheaven.com/2011/12/01/slidingdrawer-in-android-a-simple-example/)

# c# - 将 iList 绑定到 DataGridView，DGV 不更新

> ID：10173915
> 
> 赞同：1
> 
> 时间：2012-04-16T12:18:20.680
> 
> 标签：c#, datagridview, ilist

我有一个简单的测试类：

```
public partial class TEST_CLASS
{
    public string IP { get; set; }
    public int PORT { get; set; }
}

iList<TEST_CLASS> MY_CLASS = new List<TEST_CLASS>(); 
```

我有以下代码将类绑定到 DGV：

```
 TEST_CLASS n = new TEST_CLASS();
        MY_CLASS.Add(n);

        grid_nodes.DataSource = MY_CLASS;

        Thread t = new Thread(set1);
        t.Start();

        Thread t2 = new Thread(set2);
        t2.Start(); 
```

以及将类更新为随机值以进行测试的线程：

```
 public void set1()
    {
        while (true)
        {
            Random r = new Random();
            MY_CLASS[0].IP = r.Next(999900);
            Thread.Sleep(100);
        }
    }

    public void set2()
    {
        while (true)
        {
            Random r = new Random();
            MY_CLASS[0].PORT = r.Next(999900);
            Thread.Sleep(100);
        }
    } 
```

问题是 DGV 没有正确更新。每次单击单元格时，我只会看到更新。

我将有数千行和单独的线程更新 MY_CLASS，我需要在 DGV 上“实时”显示更改。

据我了解，每次更新课程时都需要调用 DGV.Update() 吗？这样做的最佳方法是什么，因为我将有成千上万的线程不断更新类？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:56:48.677

好的，所以我只是在计时器中添加了以下代码，并使其在某些条件下触发，效果很好：

```
 grid.DataSource = null;
            grid.DataSource = MY_LIST;
            grid.Invalidate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T00:50:31.960

If you use [BindingList](http://msdn.microsoft.com/en-us/library/ms132679.aspx) instead of List, and make your TEST_CLASS implement [INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/System.ComponentModel.INotifyPropertyChanged.aspx), then the grid will update itself. However you will need to ensure that only happens on the UI thread by some form of marshalling (like [SynchronizationContext](http://msdn.microsoft.com/en-us/library/wx31754f.aspx) or grid.[Invoke](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)()).

# jquery - SimpleModal 在 IE7 中不起作用

> ID：10173921
> 
> 赞同：0
> 
> 时间：2012-04-16T12:18:51.117
> 
> 标签：jquery, internet-explorer, modal-dialog, simplemodal

所以，除了在 IE7 中，我已经让 SimpleModal 像我想要的那样工作。

有什么问题？它根本没有出现。

我有两种类型的模态。

第一：

```
$('.calendar-button').click(function (e) {
        $('.calendar-container').modal({
            overlayClose: true,
        });
        return false;
    }); 
```

第二个：

```
$('.tv-list li a').click(function (e) {
    e.preventDefault();
    $('#info-' + this.id).modal(
        {onOpen: function (dialog) {
            dialog.overlay.fadeIn('fast', function () {
                dialog.container.slideDown('fast', function () {
                    dialog.data.fadeIn('fast');
                });
            });
        },
        overlayClose: true,
    });
    return false;
}); 
```

这些似乎都不起作用。对于应该弹出的两个窗口，我具有相同的基本样式

```
display:none; 
```

但是，这些都不适用于 IE7。有什么想法吗？所有这些都在文档中准备好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:21:36.870

`,`是你的问题。IE7 不喜欢对象中的尾随逗号。尝试更改`overlayClose: true,`为`overlayClose: true`

最终代码如下所示：

```
$('.calendar-button').click(function (e) {
    $('.calendar-container').modal({
        overlayClose: true
    });
    return false;
}); 
```

# javascript - 如何使 InfoWindow 指针始终指向标记并且窗口永远不会离开屏幕？

> ID：10173923
> 
> 赞同：0
> 
> 时间：2012-04-16T12:18:54.627
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在创建一个地图应用程序，我需要让我的信息框始终显示在可见视口中（不要移动地图来打开信息窗口）。

并且还使该指针（如果您愿意，可以提示）始终指向标记（类似于 qtip2 ）。

有没有一个框架？我不认为我是这个星球上唯一需要这个的人......

谢谢 ！

像这个网站这样的东西用他们的 InfoBox 或 InfoWindow ( [http://www.estately.com/map](http://www.estately.com/map) )

顺便说一句：我正在使用信息框！

# php - 在 PHP 中自动删除 Session 文件

> ID：10173925
> 
> 赞同：2
> 
> 时间：2012-04-16T12:18:58.623
> 
> 标签：php, file, session, delete-file

我想在 PHP 中自动删除会话文件。

我知道我必须在 PHP.ini 中更改以下配置

*   session.gc_probability
*   session.gc_divisor
*   session.gc_maxlifetime

但我不确定这些属性要改变什么值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:26:37.523

可能这个例子会对你有所帮助

```
 <?php 
 // you have to open the session to be able to modify or remove it 
 session_start(); 

 // to change a variable, just overwrite it 
 $_SESSION['variable_name']='variable_value'; 

 //you can remove a single variable in the session 
 unset($_SESSION['variable_name']); 

 // or this would remove all the variables in the session, but not the session itself 
 session_unset(); 

 // this would destroy the session variables 
 session_destroy(); 
 ?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-08T15:09:03.307

使用`session_destroy();`功能，创建的会话文件自动删除。

# rdf - RDF 文件中的属性

> ID：10173928
> 
> 赞同：3
> 
> 时间：2012-04-16T12:19:07.807
> 
> 标签：rdf

让我们看看这个例子：[http ://dbpedia.org/page/Berlin](http://dbpedia.org/page/Berlin)

“owl:sameAs”和“is owl:sameAs of”有什么区别

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:21:47.313

`owl:sameAs`是一个对称属性，所以`A owl:sameAs B`和`B owl:sameAs A`意思是一样的。给定一个等价，另一个也是微不足道的。

# html - Perl 编码 - 将文件保存为 UTF8

> ID：10173930
> 
> 赞同：2
> 
> 时间：2012-04-16T12:19:13.420
> 
> 标签：html, perl, encoding, utf-8, character-encoding

我有一个将下载 www 页面的脚本，我想提取文本并将其存储在统一编码中（UTF8 就可以了）。下载（UserAgent）、解析（TreeBuilder）和文本提取看起来不错，但我不确定我是否正确保存它们。

在例如 notepad++ 中打开输出文件时，他们不会查看；原始 HTML 视图可在文本编辑器中找到。

HTML 文件通常具有 charset=windows-1256 或 charset=UTF-8

所以我想如果我能让 UTF8 工作，那么这只是一个重新编码的问题。这是我尝试过的一些方法，假设我有一个 HTML 文件保存到磁盘。

```
my $tree = HTML::TreeBuilder->new;
$tree->parse_file("$inhtml");
$tree->dump; 
```

只有在文本编辑器中将编码切换为 utf8 后，才能在 .txt 文件中正确查看 STDOUT 的转储输出...</p>

```
$formatter = HTML::FormatText->new(leftmargin => 0, rightmargin => 50);
if (utf8::is_utf8($formatter->format($tree))) {
    print "   Is UTF8\n";
}
else {
    print "   Not UTF8\n";
} 
```

结果 当内容表明是 UTF8 时显示此 IS UTF8，否则显示 Not UTF8。

我累了

```
opening an file with ">" and ">:utf8"
binmode(MYFILE, ":utf8");
encode("utf8", $string); (where string is the output of formatter->format(tree)) 
```

但似乎没有任何工作正常。

那里的任何专家都知道我错过了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:29:06.457

这个例子可以帮助你找到你需要的东西：

```
use strict;
use warnings;
use feature qw(say);
use HTML::TreeBuilder qw( );
use Object::Destroyer qw( );

open(my $fh_in,  "<:encoding(cp1252)", $ARGV[0]) or die $!;
open(my $fh_out, ">:encoding(UTF-8)",  $ARGV[1]) or die $!;

my $tree = Object::Destroyer->new(HTML::TreeBuilder->new(), 'delete');
$tree->parse_file($fh_in);

my $h1Element = $tree->look_down("_tag", "h1");
my $h1TrimmedText = $h1Element->as_trimmed_text();
say($fh_out $h1TrimmedText); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-16T12:37:38.487

我真的很喜欢这个模块[`utf8::all`](http://search.cpan.org/perldoc?utf8%3a%3aall)（不幸的是不是核心）。

当您只`use utf8::all`使用 UTF-8 文件时，您无需担心 IO。

# asp.net-web-api - Web API 并发性和可扩展性

> ID：10173933
> 
> 赞同：12
> 
> 时间：2012-04-16T12:19:28.370
> 
> 标签：asp.net-web-api, wcf-web-api

我们面临着将基于自定义代码的 REST 服务转换为 Web API 的任务。该服务有大量请求并对可能需要一些时间才能加载的数据进行操作，但一旦加载，它就可以被缓存并用于为所有传入请求提供服务。该服务的先前版本将有一个线程负责加载数据并将其放入缓存中。为了防止 IIS 用尽工作线程，客户端将获得“稍后再回来”响应，直到缓存准备好。

我对 Web API 的理解是，它通过对任务进行操作来内置异步行为，因此请求的数量与所持有的物理线程的数量没有直接关系。

在服务的新实现中，我计划让请求等到缓存准备好，然后做出有效回复。我做了一个非常粗略的代码草图来说明：

```
public class ContactsController : ApiController
{
    private readonly IContactRepository _contactRepository;

    public ContactsController(IContactRepository contactRepository)
    {
        if (contactRepository == null) 
            throw new ArgumentNullException("contactRepository");
        _contactRepository = contactRepository;
    }

    public IEnumerable<Contact> Get()
    {
        return _contactRepository.Get();
    }
}

public class ContactRepository : IContactRepository
{
    private readonly Lazy<IEnumerable<Contact>> _contactsLazy;

    public ContactRepository()
    {
        _contactsLazy = new Lazy<IEnumerable<Contact>>(LoadFromDatabase, 
            LazyThreadSafetyMode.ExecutionAndPublication);
    }

    public IEnumerable<Contact> Get()
    {
        return _contactsLazy.Value;
    }

    private IEnumerable<Contact> LoadFromDatabase()
    {
        // This method could be take a long time to execute.
        throw new NotImplementedException();
    }
} 
```

请不要在代码设计中投入太多价值——它只是为了说明问题而构建的，并不是我们在实际解决方案中是如何做到的。IContactRepository 在 IoC 容器中注册为单例，并注入到控制器中。Lazy 与 LazyThreadSafetyMode.ExecutionAndPublication 确保只有第一个线程/请求正在运行初始化代码，随后的 rquest 被阻塞，直到初始化完成。

Web API 是否能够处理等待初始化完成的 1000 个请求，而其他未命中此 Lazy 的请求正在被服务并且 IIS 不会耗尽工作线程？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T12:46:42.647

从操作返回`Task<T>`将允许代码在后台线程 (ThreadPool) 上运行并释放 IIS 线程。所以在这种情况下，我会改变

```
public IEnumerable<Contact> Get() 
```

至

```
public Task<IEnumerable<Contact>> Get() 
```

记住要返回一个已**启动**的任务，否则线程只会坐在那里什么都不做。

延迟实现虽然很有用，但与 Web API 的行为几乎没有关系。所以我不会对此发表评论。无论有没有惰性，基于任务的返回类型都是长时间运行的操作的方式。

我有两篇关于这方面的博文，可能对你有用：[这里](http://byterot.blogspot.co.uk/2012/03/aspnet-web-api-series-part-2-async.html)和[这里](http://byterot.blogspot.co.uk/2012/04/aspnet-web-api-series-part-3-async-deep.html)。

# cmd - 复制/a和复制/b的区别

> ID：10173941
> 
> 赞同：2
> 
> 时间：2012-04-16T12:20:02.407
> 
> 标签：cmd

我知道 a 用于 ASC2 文件，B 用于二进制文件。但我不确定为什么以及如何使用它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:39:00.903

/A - 用于复制 ASCII 文件。适用于它前面的文件名和所有后面的文件名。文件将被复制，直到在被复制的文件中遇到文件结束标记。如果在文件中遇到文件结束标记，则不会复制文件的其余部分。DOS 将在复制文件的末尾附加一个文件结束标记。

/B - 用于复制二进制文件。适用于它前面的文件名和所有后面的文件名。复制的文件将按大小读取（根据文件目录列表中指示的字节数）。文件结束标记不会放置在复制文件的末尾。

# java - 不使用 Javascript 或 VB 脚本的客户端验证

> ID：10173942
> 
> 赞同：3
> 
> 时间：2012-04-16T12:20:04.057
> 
> 标签：java, validation, client-side

我有一个 servlet 应用程序，该页面是一个 html 表单。我想添加一些客户端代码来验证数据。我想避免使用 java 脚本或任何基于 Microsoft 或 flash 的技术。是否可以使用java技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:11:45.423

1.  使用 Java 小程序

    *   在这里你可以使用很多布局来定位你的元素。
2.  如果你说在编码方面不使用 JS，你可以使用 GWT 编码，这是一种普通的 java 类编码，但它是一个 JS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:41:46.163

当您不想使用 Javascript（不知道为什么）时，您将有一个非常有限的选择。您将验证作为**非常有限**`maxlength`的字段属性（例如在输入字段上）。客户端验证始终与服务器端验证一起完成。他们互相恭维。

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T13:43:03.010

您可以使用 Java 小程序，并使用它而不是 HTML 表单来呈现您的用户输入控件。

…但是这种方式很疯狂，构建会很耗时，加载时间比 HTML + JS 长得多，并且需要浏览器插件。

你真的应该为此使用 JavaScript，它是唯一可以与 HTML 表单交互的广泛支持的技术（不使用 JS 作为中介）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T13:39:14.963

对于简单的验证，您可以使用标准的 HTML 属性进行输入，例如 `<input type='text' maxlength=10>`- 不允许输入超过 X 的符号； `<input type="email">`-不允许在基于 WebKit 的浏览器中键入非电子邮件模式。等查看 w3c 文档以获取更多信息。但是您应该始终记住，客户端验证应该只最小化服务器上​​的容量，并且**数据也应该始终在服务器端进行验证**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T12:22:15.440

您可以将 HTML 表单的参数传递给 Servlet 并验证表单数据，例如：

```
String uName= request.getParameter("userName");
String pwd= request.getParameter("password");
PrintWriter out= response.getWriter();

if(uName.equals("username") && pwd.equals("password")){

out.println("Valid User");

}

else
out.println("Invalid User"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T12:25:54.653

您可以使用 formcheck :- mootools 验证.. 简单易用..

```
http://mootools.floor.ch/en/demos/formcheck/ 
```**

# google-chrome - 在 Chrome 中循环播放 html5 视频？

> ID：10173943
> 
> 赞同：0
> 
> 时间：2012-04-16T12:20:04.597
> 
> 标签：google-chrome, video

根据这个演示，应该可以在 Chrome 中循环播放视频

[http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_video_loop](http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_video_loop)

但是当我简单地申请时，我似乎无法让它工作

```
loop="loop" 
```

到我的视频标签。

有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:31:03.253

我已经看到这篇文章相当陈旧或可能会得到解决。如果你只是想知道让我指出一个不同的威胁。

我认为您无法在 Chrome 中循环播放视频的原因是，对于 chrome，视频仅在由理解部分内容请求的服务器提供时才会循环播放。

更多信息：[HTML5 视频不会循环播放](https://stackoverflow.com/questions/8088364/html5-video-will-not-loop)

我认为这可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-10T20:28:45.563

在 html5 中，'loop' 属性是一个布尔值，所以你应该写：

```
loop='true' 
```

# windows - 尝试在 firefox 上运行 js - 它在 linux 上运行良好，但在 windows 上却不行

> ID：10173945
> 
> 赞同：0
> 
> 时间：2012-04-16T12:20:10.937
> 
> 标签：windows, linux, firefox, extjs

我用ext写了一个js。

我尝试检查这个脚本。

当检查小数据时，我在 Firefox Windows 和 Firefox Linux 上收到相同的结果。但是当我在大规模数据上尝试它时，Firefox Linux 运行完美，但对于 Firefox Windows，我得到了例外 -

```
Component returned failure code: 0x8007000e (NS_ERROR_OUT_OF_MEMORY)    
[nsIDOMHTMLCanvasElement.width] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T19:26:56.237

我认为您收到此错误是因为您尝试使用 Canvas 显示对 FF 来说太大的东西。您能否在此处发布您的任何代码或描述您要检查的数据？我还听说这可能是基于操作系统的问题，如果您正在运行 Win7 64 位（最常见的是看到此错误），请尝试从 32 位 Windows 机器上运行。

# asp.net-mvc - ASP.NET MVC 为每个操作命中输出缓存

> ID：10173946
> 
> 赞同：7
> 
> 时间：2012-04-16T12:20:15.143
> 
> 标签：asp.net-mvc, outputcache

我们正在运行一个使用 ASP.NET MVC 3 和 AppFabric 作为分布式缓存解决方案的大型站点构建。我们已经实现了一个自定义 OutputCacheAdapter 来使用我们的 AppFabric 集群。

我们看到 ASP.NET 为每个操作调用 OutputCacheProvider.Get() 方法，即使该操作没有使用 @OutputCacheAttribute 修饰。

如果您使用默认的 outputcacheprovider，这不是什么大问题，但是当您运行位于不同机器上的 outputcacheprovider 时，这不是什么大问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T13:58:58.810

根据设计，首先检查输出缓存是否有页面的缓存副本。如果有缓存副本，则将其返回，并且不再执行任何操作。特别是，没有控制器和控制器动作被派生、检查或执行。仅当页面未缓存时才会发生这种情况。

您将需要更改您的缓存提供程序，以便它可以快速确定是否可以缓存页面。只有当它是一个可缓存页面时，它才应该去检查分布式缓存。此检查不能基于，`OutputCacheAttribute`因为它们在请求处理的这一部分期间不可用。相反，必须使用 URL、cookie 和其他 HTML 标头信息进行快速检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-14T04:15:26.253

您可以使用 Donut Cache outputcache 属性，该属性允许您为输出缓存键定义前缀。因此，如果缓存键以您自己的前缀开头，则在您的自定义提供程序中只需获取/设置缓存。

# regex - 正则表达式= tabspace+STRING+tabspace

> ID：10173949
> 
> 赞同：0
> 
> 时间：2012-04-16T12:20:27.043
> 
> 标签：regex, notepad++

我怎样才能把它写成正则表达式？

> 制表空间STRING制表空间

我的数据如下所示：

```
12345   adsadasdasdasd  30
34562   adsadasdasdasd  asdadaads<adasdad   30
12313   adsadasdasdasd  asdadas dsaads  313123<font="TNR">adsada    30
1232131 adsadasdasdasd  asdadaads<adasdad"asdja <div>asdjaıda   30 
```

我想得到

```
12345   30
34562   30
12313   30
1232131 30 
```

`\t*\t`不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:22:10.907

尝试以下正则表达式

```
\t.+\t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T20:28:28.123

如果您不确定要查找的字符串，除了它们由制表符分隔之外，这是一种将此类字符串描述为除制表符之外的所有内容的好方法： (^\t*)

```
[^\t]*\t([^\t]*)\t[^\t]* 
```

您可以在[regexpad.com](http://regexpad.com/?r=%5B%5E%5Ct%5D%2a%5Ct%28%5B%5E%5Ct%5D%2a%29%5Ct%5B%5E%5Ct%5D%2a&f=&m0=12345%09adsadasdasdasd%0930#p-javascript)上对其进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:24:56.543

您的字符串中允许使用哪些字符？

```
\t\w+\t 
```

`\w`将允许字母、数字和下划线（取决于您的正则表达式引擎 ASCII 或 Unicode）

[在 Regexr 上](http://regexr.com?30lfu)查看它，这是一个测试正则表达式的好平台。

您的“正则表达式”`\t*\t`将匹配 0 个或多个选项卡，然后匹配一个选项卡。`*`是一个量词，意思是 0 或更多，指的是之前的字符或组（这里指你的`\t`）

如果你的空格不是制表符，试试这个

```
\s+.+\s+30 
```

`\s`是一个空白字符（空格、制表符、换行符（对 Notepad++ 不重要））。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T12:25:33.507

问题在于您对字符串的定义...

如果你使用上面建议的东西，它会匹配

制表空间STRING制表空间制表空间

你得到图片。这可能是可以接受的，如果不是，您需要限制您的“STRING”定义，例如：

```
\t\w+\t 
```

或者：

```
\t[a-zA-Z]+\t 
```

# php - foreach() 不是数组 PHP 中的“for eaching”项

> ID：10173955
> 
> 赞同：2
> 
> 时间：2012-04-16T12:21:00.250
> 
> 标签：php, mysql, arrays

如果我这样做，它会起作用：

```
$data_array2 = mysql_query("SELECT pic_loc FROM pictures WHERE user_id = '".$id."'");
$cell_pictures = mysql_fetch_array($data_array2);
foreach($cell_pictures as $pics_being_deleted) 
{
unlink($pics_being_deleted);
} 
```

问题是上面的代码是嵌套的，这意味着它每次运行 unlink 函数时都会运行一个新的 MySQL 查询，所以我制作了下面的代码以使其不这样做：

```
$the_pics_raw_2 = array();
$data_array2 = mysql_query("SELECT pic_loc FROM pictures WHERE user_id = '".$id."'");
while($cell_pictures = mysql_fetch_array($data_array2))
{
$the_pics_raw = $cell_pictures['pic_loc'];
$the_pics_raw_2[] = $the_pics_raw;
}

$the_pics_raw_3 .= " \"../../". implode("\" , \"../../" ,$the_pics_raw_2)."\"";
$the_pics = array($the_pics_raw_3);

foreach($the_pics as $pics_being_deleted) 
{
unlink($pics_being_deleted);
} 
```

我得到这个错误作为回报：

```
Warning: unlink( "../../users/biondizzle/photos/pic_3387677.png" , "../../users/biondizzle/photos/pic_1581185.png") [function.unlink]: No such file or directory 
```

它显然不会找到该`"../../users/biondizzle/photos/pic_3387677.png" , "../../users/biondizzle/photos/pic_1581185.png"`目录，因为这是同时运行的 2 个单独的目录，因此`foreach()`不是“foreaching”。

有什么方法可以让`unlink()`我在数组中列出的每个目录单独运行，我想我可以通过添加逗号和引号来让它工作`implode()`？非常感谢，希望我解释得足够好-迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:26:39.760

我认为这是你想要做的：

```
while($cell_pictures = mysql_fetch_array($data_array2)) {
    $the_pics_raw = $cell_pictures['pic_loc'];
    $the_pics[] = "../../" . $the_pics_raw;
}

foreach($the_pics as $pics_being_deleted) {
    unlink($pics_being_deleted);
} 
```

您会注意到我已经删除了该`$the_pics_raw_3 .= " \"../../". implode("\" , \"../../" ,$the_pics_raw_2)."\"";`行，因为它正在将数组转换为字符串，这使得它无法`foreach`结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:40:01.843

使用此代码：

```
$the_pics_raw = array();
$data_array2 = mysql_query("SELECT pic_loc FROM pictures WHERE user_id = '".$id."'");
while($cell_pictures = mysql_fetch_array($data_array2))
{
array_push($the_pics_raw,"../../".$cell_pictures['pic_loc']);
}

foreach($the_pics as $the_pics_raw) 
{
unlink($pics_being_deleted);
} 
```

# javascript - 如何在 Javascript 中使用数组作为键？

> ID：10173956
> 
> 赞同：23
> 
> 时间：2012-04-16T12:21:02.740
> 
> 标签：javascript

我在 python 上有一个简单的例子：

```
programs = {}
if not programs.has_key(( program, time )):
     programs[( program, time )] = 0
programs[( program, time )] = programs[( program, time )] + 1 
```

如何在 Javascript 中使用数组作为键？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-16T12:29:05.357

这将“工作”。（但我不推荐）

```
var a = {};
var b = [1,2,3];    
a[b] = 'hello';

// a[b] evaluates to 'hello'
// a[[1,2,3]] evaluates to 'hello'
// a['1,2,3'] evaluates to 'hello' 
```

它之所以有效，是因为当您将数组 [1,2,3] 作为散列（映射/关联数组）键传递时，在执行散列查找之前将被转换为字符串 '1,2,3'。只要您不需要两个具有相同值的不同数组来映射到不同的哈希值，它就应该满足您的需求。

```
var c = [1,2,3]
// a[c] evaluates to 'hello' even though we never executed a[c] = 'hello'
// but b == c evaluates to false
// b & c are two separate objects with the same values, so when they
// get converted to a string for hashing, they return the same value from the hash 
```

如前所述，如果您想使用对象引用作为键，您需要的不仅仅是标准的 JavaScript 哈希。

# 更新

根据@speedplane 的评论：

我怀疑`toString()`当您将数组传递给哈希键时，JS 会调用它。因此，您可以轻松测试您实际将获得的密钥：

```
 ["x", "y", "z"].toString();                // 'x,y,z'
 ["x,y,z"].toString();                    // 'x,y,z'
 [1,2,3].toString();                      // '1,2,3'
 [1,2,'3'].toString();                    // '1,2,3'
 [[1],[2],[3]].toString();                // '1,2,3'
 [["x",1], ["y",2], ["z",3]].toString();  // 'x,1,y,2,z,3' 
```

因此，我再次建议您不要这样做，除非您*真的*了解正在发生的事情。即使那样，我也不会这样做。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-16T12:23:09.697

JavaScript 键是字符串。

您需要一个[`WeakMap`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/WeakMap), 或一个自定义方法来将数组映射到其他对象。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-04-08T07:48:09.367

我编写了一个名为[array-keyed-map](https://github.com/anko/array-keyed-map)的库，用于在现代 JavaScript 中稳健地执行此操作。与迄今为止发布的其他答案不同，它不依赖于将值序列化为字符串，而是使用 ES2015`Map`对象，它可以接受任意值作为键。

我将引用[我对实现概述的不同问题的回答](https://stackoverflow.com/a/55568321/777586)，因此如果库由于某种原因消失，或者您想自己实现它，该方法将被保留下来：

> 维护`Map`对象树。每棵树存储：
> 
> *   在内部声明的`Symbol`键下：树中该点的值（如果有）。保证唯一性，因此`Symbol`没有用户提供的值可以覆盖此键。
>     
>     
> *   在它的所有其他键上：到目前为止所有其他从这棵树设置的下一个树。
>     
>     
> 
> 例如，在 上`akmap.set(['a', 'b'], true)`，内部的树形结构就像——</p>
> 
> ```
> 'a':
>   [value]: undefined
>   'b':
>     [value]: true 
> ```
> 
> 在那之后做`akmap.set(['a'], 'okay')`只会改变路径的值`'a'`：
> 
> ```
> 'a':
>   [value]: 'okay'
>   'b':
>     [value]: true 
> ```
> 
> 要获取数组的值，请在从树中读取相应键的同时遍历数组。`undefined`如果任何点的树都不存在，则返回。`[value]`最后，从你得到的树上读取内部声明的 符号。
> 
> 要删除数组的值，请执行相同操作，但删除`[value]`-symbol-key 下的所有值，并在递归步骤后删除任何以 a`size`为 0 的子树。
> 
> * * *
> 
> 为什么是树？因为当多个数组具有相同的前缀时它非常有效，这在实际使用中非常典型，用于处理例如文件路径。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-16T12:28:44.817

这对你有用吗？

[jsfiddle](http://jsfiddle.net/ryanwfiorini/D49eR/)

```
<script>
var ary = {person1:'valerie', person2:'alex'};
for (key in ary) {
    document.write(key, '<br>')
}

document.write(ary['person2'], '<br>')
</script> 
```

# sql-server-2005 - 使用 C# 运行 Sql Agent 作业的最佳方法是什么？

> ID：10173957
> 
> 赞同：0
> 
> 时间：2012-04-16T12:21:08.667
> 
> 标签：sql-server-2005, sql-agent-job

我正在使用 Sql server 2005 并为 UI 使用 C#/Asp.Net 4.0。我想从网页中的用户操作触发 sql 作业。我需要在运行时继续检查作业的状态。在这个问题上有几个旧线程可以获取作业的状态（[如何在 C# 中监视 SQL Server 代理作业信息](https://stackoverflow.com/questions/3757335/how-to-monitor-sql-server-agent-job-info-in-c-sharp)），但我需要我的程序应该能够运行、停止、启用、禁用作业

我的 UI 中需要以下功能。

1.  检查 sql 作业的状态

2.  运行指定作业

3.  停止工作

4.  禁用/启用作业

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:30:23.050

您可以使用以下系统存储过程：

[sp_start_job](http://msdn.microsoft.com/en-us/library/ms186757%28v=sql.90%29.aspx) - 启动代理作业
[sp_stop_job](http://msdn.microsoft.com/en-us/library/ms182793%28v=sql.90%29.aspx) - 停止代理作业
[sp_update_job](http://msdn.microsoft.com/en-us/library/ms188745%28v=sql.90%29.aspx) - 启用/禁用代理作业

**更新：** 如果你真的想改用 SMO，最好的地方是[这个 MSDN 参考](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.agent.job_members%28v=sql.90%29.aspx)。Job 类允许你做这一切。

# php - 激活 PHP 函数的提交按钮

> ID：10173958
> 
> 赞同：0
> 
> 时间：2012-04-16T12:21:18.437
> 
> 标签：php, javascript, ajax, wordpress, onclick

好的，我正在网站上创建一个挑战系统。我将在每个步骤中列出到达提交按钮所在的位置会发生什么，希望这有助于使其更容易理解..

网站页面的每个用户旁边都列出了一个挑战按钮。

当您单击挑战按钮时，会弹出一个模式窗口，显示每个用户角色。模式窗口中列出的每个角色在角色详细信息下方都有自己的挑战按钮，每个角色的左侧是一个列出您的角色的下拉菜单。（正在查看页面的当前登录用户）

现在我想要的是登录用户必须在挑战按钮激活服务器端代码/功能/它需要的任何内容之前从下拉列表中选择他们的一个字符。

一旦登录的用户从下拉菜单中选择了他们的角色之一。他们可以单击挑战按钮，它将激活我已经创建的一个函数，该函数将创建一个 custom_post_type，然后上传一个通用特色图像，该特色图像将显示在主页滑块上。

之后，屏幕上会出现另一个弹出窗口，显示挑战成功与否。请记住，这已经在 MODAL 窗口中，因此可以说它是弹出窗口之上的弹出窗口。

我几乎知道关于 javascript 的 zip，我希望这可以严格使用 PHP 来完成。我读过使用 isset 可以做到这一点，但我还没有弄清楚如何成功地做到这一点。

就像是....

```
if(isset($_POST['challenge']))
{

  all of the code that happens after successful click goes here.

} 
```

我当前的按钮代码是这个......

```
<div class="challenge_button">                           
    <form action="<?php $_SERVER['PHP_SELF'];?>" method="post">                                         
        <input type="button" name="challenge" value="Challenge">        
    </form>                                                   
</div> 
```

下拉示例代码：

选择你的冠军

```
<select name="contender">                                                            
   <option value="0"> ----- </option>                                                        
   <option value="1">1</option>                                                            
   <option value="2">2</option>         
   <option value="3">3</option>                                                      
   <option value="4">4</option>                                         
   <option value="5">5</option>                                             
   <option value="6">6</option>                                             
   <option value="7">7</option>                                             
   <option value="8">8</option>                                         
</select> 
```

现在，如果可能的话，我将如何将所有这些联系在一起？

就像是..............

```
<div class="challenge_button">  
    <?php                        
        if (((((drop-down is set return true & grab which option was set and save as variable)))))
        {
            <form action="<?php $_SERVER['PHP_SELF'];?>" method="post">                                         
                <input type="button" name="challenge" value="Challenge">        
            </form>
        }
        else
        {
            echo 'You must setup a champion before you can challenge someone.';
            echo 'div class="setup">';
            echo 'You can setup your champion <a href="#">here<a>';
            echo '</div>';
        }
    ?>
</div> 
```

然后................

如果代码成功运行，则会在模式窗口上弹出一个弹出窗口。我不希望页面刷新或转到另一个页面。如果不满足某些变量，则会弹出一个提示挑战成功或不成功的窗口。

选择了一个不那么酷的替代解决方案。即使在这种方法中，颜色框也不起作用。

的JavaScript：

```
<script language="JavaScript">
    function loadPage(list) 
    {
        location.href=list.options[list.selectedIndex].value  
    }
</script> 
```

变量：

```
 $cuser  =   wp_get_current_user();
                                            $v1     =   get_cimyFieldValue($cuser->ID, 'character_name');
                                            $v2     =   get_cimyFieldValue($cuser->ID, 'character_name2');
                                            $v3     =   get_cimyFieldValue($cuser->ID, 'character_name3');
                                            $v4     =   get_cimyFieldValue($cuser->ID, 'character_name4');
                                            $v5     =   get_cimyFieldValue($cuser->ID, 'character_name5');
                                            $v6     =   get_cimyFieldValue($cuser->ID, 'character_name6');
                                            $v7     =   get_cimyFieldValue($cuser->ID, 'character_name7');
                                            $v8     =   get_cimyFieldValue($cuser->ID, 'character_name8');
                                            $add    =   'http://conspirators.websitedesignbyneo.com/wp-content/themes/conspirators/single-challenge.php?';
                                            $metak  =   'class="zoom cboxelement"';
$challenged =   $v['toon_name']; 
```

表格：

```
 <form>
                                                        Choose Your Champion:
                                                        <select name="contender"
                                                            size="1"
                                                            onchange="loadPage(this.form.elements[0])"
                                                            target="_parent._top"
                                                            onmouseclick="this.focus()">
                                                                <option value="0"></option>
                                                                <?php if ($v1){echo '<option value="'.$add.'challenged='.$challenged.'&challenger='.$v1.'"'.$metak.'>'.$v1.'</option>';}?>
                                                                <?php if ($v2){echo '<option value="'.$add.'challenged='.$challenged.'&challenger='.$v2.'"'.$metak.'>'.$v2.'</option>';}?>
                                                                <?php if ($v3){echo '<option value="'.$add.'challenged='.$challenged.'&challenger='.$v3.'"'.$metak.'>'.$v3.'</option>';}?>
                                                                <?php if ($v4){echo '<option value="'.$add.'challenged='.$challenged.'&challenger='.$v4.'"'.$metak.'>'.$v4.'</option>';}?>
                                                                <?php if ($v5){echo '<option value="'.$add.'challenged='.$challenged.'&challenger='.$v5.'"'.$metak.'>'.$v5.'</option>';}?>
                                                                <?php if ($v6){echo '<option value="'.$add.'challenged='.$challenged.'&challenger='.$v6.'"'.$metak.'>'.$v6.'</option>';}?>
                                                                <?php if ($v7){echo '<option value="'.$add.'challenged='.$challenged.'&challenger='.$v7.'"'.$metak.'>'.$v7.'</option>';}?>
                                                                <?php if ($v8){echo '<option value="'.$add.'challenged='.$challenged.'&challenger='.$v8.'"'.$metak.'>'.$v8.'</option>';}?>
                                                        </select>
                                                    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:34:43.763

如果您希望它只是没有 Javascript 的 PHP，您将不得不牺牲“不得刷新”约束，因为提交表单的唯一方法是按下按钮并提交内容。

但是，通过一点 Javascript，您可以使用 AJAX 之类的东西使挑战按钮工作。工作流程可能是这样的：

页面加载，MODAL(?) 弹出窗口打开，用户点击“挑战”，表单提交到服务器（使用 XMLHTTPRequest 或其他类似 AJAX 的机制），

同时：页面定期检查服务器的质询请求（再次AJAX），并相应地显示消息。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:59:12.440

首先，您的代码中有一个错误，如下所示：`<form action="<?php $_SERVER['PHP_SELF'];?>" method="post">`将始终返回`<form action="" method="post">`，就像`$_SERVER`必须回显的数组一样：使用此`<?php echo $_SERVER['PHP_SELF'];?>`

然后，作为您的 php 的代码，它运行良好：它从 POST 接收两个变量，如果`contender`（即选择）包含一个不同于 0 的值，它将把它放在`$contender`变量中。此时，您可以在函数中使用此变量。

```
<?php if(!isset($_GET['challenge'])): ?>
<form action="<?php echo $_SERVER['PHP_SELF'];?>" method="post">
Choose Your Champion:

<select name="contender">                                                            
   <option value="0"> ----- </option>                                                        
   <option value="1">1</option>                                                            
   <option value="2">2</option>         
   <option value="3">3</option>                                                      
   <option value="4">4</option>                                         
   <option value="5">5</option>                                             
   <option value="6">6</option>                                             
   <option value="7">7</option>                                             
   <option value="8">8</option>                                         
</select>
<div class="challenge_button">                           
        <input type="submit" name="challenge" value="Challenge">                                                  
</div>
    </form>
<div id="result">
</div><?php endif; ?>
<?php

if ($_POST['contender']!=="0" &&        // So, the select has to be selected
    isset($_POST['challenge'])) {       // And so does the button (however you can drop this condition)
    // |    This variable contains the user's choice (from 1 to 8)
    // v
    $contender = $_POST['contender'];
    // Here goes your code or function...
} 
```

*现在，如果您希望它在不重新加载页面*的情况下返回 OK 或错误，**则必须**使用 AJAX。例如，您可以使用这样的 JS 函数：

```
<script type="text/javascript">
function loadXMLDoc(btn, contender) {
var ajax;

// Code for IE7+, Firefox, Chrome, Opera, Safari
if (window.XMLHttpRequest) {
    ajax=new XMLHttpRequest();
} else { // code for IE6, IE5
    ajax=new ActiveXObject("Microsoft.XMLHTTP");
}

ajax.onreadystatechange=function() {
if (ajax.readyState==4 && ajax.status==200) {
    document.getElementById("result").innerHTML=ajax.responseText;
}
}
ajax.open("GET","<?php echo $_SERVER['PHP_SELF'];?>?challenge=" + btn + "&contender=" + contender, true);
ajax.send();

}
</script> 
```

连同此按钮：

```
<input type="button" id="challenge" name="challenge" value="Challenge" onclick="loadXMLDoc(document.getElementById('challenge').value, document.getElementById('contender').options[document.getElementById('contender').selectedIndex].value)"> 
```

它所做的是获取 select 和 input 的当前值（这是为了彻底，您可以将其删除），并将它们传递给`loadXMLDoc()`函数，该函数将使用 GET 方法将它们直接传递给 PHP（没有理由使用 POST）。PHP 将对选择值做任何你想做的事情，并最终返回一个 OK 或一个错误。例如：

```
<?php    
if ($_GET['contender']!=="0" && isset($_GET['challenge'])) {
    $contender = $_GET['contender'];
    // Here goes your code...
    echo "All done.";
} else
    echo "Something went wrong."; 
```

您可以将该输出定向到您的灯箱/弹出窗口以创建您的第二个模式窗口。

另外，我建议使用 jQuery 制作所有 AJAX 内容，这样会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:30:05.713

我想你想要这样的东西

```
<script>
$("#challenge").click(function(){
$.post("page",{"name":"value"},function(response){})
});
</script>
<div class="challenge_button">                                                       
        <input type="button" id="challenge" name="challenge" value="Challenge">                                                         
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T12:32:12.553

你不能那样使用 PHP，如果你想做那样的事情，你必须使用 PHP Ajax。在这里，您可以找到帮助您了解 Ajax 的链接。

[http://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)

# c# - 如何隐藏有关缺少列详细信息的行的 TreeListView 错误消息？

> ID：10173960
> 
> 赞同：1
> 
> 时间：2012-04-16T12:21:23.353
> 
> 标签：c#, .net, listview, objectlistview, treelistview

我有一个包含 2 列的 TreeListView 组件：“a”和“b”。

在我的列表中，有时我同时有“a”和“b”，但有时只有“a”。

如何删除“b”列中的以下消息（在不包含“b”的行中）？

**“'b' 不是无参数的方法、属性或类型的字段......”**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-25T23:32:54.650

当前版本的TreeListView（2.8.1，不确定何时添加）的解决方案是设置：

```
BrightIdeasSoftware.TreeListView.IgnoreMissingAspects = true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T22:44:45.230

我猜你说的`TreeListView`是`ObjectListView`项目中的一个。

如果是这样，您将必须`AspectGetter`在“b”列上安装一个。当没有“b”属性时，让那个方面的 getter 返回 null。

```
this.olvColumnB.AspectGetter = delegate(object x) {
    ModelWithPropertyB model = x as ModelWithPropertyB;
    return model == null ? null : model.B;
} 
```

# android - GLES20Canvas.clipPath 中的 UnsupportedOperationException 在视图中禁用了硬件加速

> ID：10173968
> 
> 赞同：8
> 
> 时间：2012-04-16T12:21:56.157
> 
> 标签：android, hardware-acceleration

我在我的应用程序中启用了硬件加速，但我为我的一个视图禁用了它，因为我遇到了笔画上限和其他问题。

现在我在 Google Play Crash Errors 控制台中得到了这个堆栈跟踪：

```
java.lang.UnsupportedOperationException
at android.view.GLES20Canvas.clipPath(GLES20Canvas.java:287)
at com.myapp.MyCustomView.onDraw(SourceFile:288)
at android.view.View.draw(View.java:9310)
at android.view.View.getDisplayList(View.java:8773)
at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2298)
...
at android.view.HardwareRenderer$GlRenderer.draw(HardwareRenderer.java:609)
at android.view.ViewRoot.draw(ViewRoot.java:1634)
at android.view.ViewRoot.performTraversals(ViewRoot.java:1450)
at android.view.ViewRoot.handleMessage(ViewRoot.java:2094)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:132)
at android.app.ActivityThread.main(ActivityThread.java:4123)
... 
```

我已`android:hardwareAccelerated="true"`在 AndroidManifest.xml 中指定。但是我在自定义视图的构造函数中专门禁用了硬件加速：

```
 public MyCustomView(Context context, AttributeSet attrs, int defStyle) {
            super(context, attrs, defStyle);

            // ... code omitted

            // disable acceleration because Paint.setStrokeCap(Cap.ROUND) is not working otherwise
            Compatibility.disableHardwareAcceleration(this);
    } 
```

兼容性是这样的：

```
public class Compatibility {
        // View.setLayerType() was introduced in Honeycomb
        private static Method setLayerTypeMethod = getMethod(View.class, "setLayerType", int.class,
                        Paint.class);

        private static Method getMethod(Class<?> clazz, String name, Class<?>... parameterTypes) {
                try {
                        return clazz.getMethod(name, parameterTypes);
                }
                catch (NoSuchMethodException e) {
                        return null;
                }
        }

        private Compatibility() {
        }

        public static void disableHardwareAcceleration(View view) {
                try {
                        if (setLayerTypeMethod != null) {
                                int layerType = 1; // View.LAYER_TYPE_SOFTWARE
                                setLayerTypeMethod.invoke(view, layerType, null);
                        }
                }
                catch (Exception ignored) {
                }
        }
} 
```

不幸的是，崩溃错误控制台不会显示有关 Android 操作系统版本或设备的信息。

任何想法可能会发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T12:36:55.287

存在一个已知问题，即即使设置了 LAYER_TYPE_SOFTWARE，仍然使用硬件加速绘制视图。详情在[这里](http://code.google.com/p/android/issues/detail?id=20474)

作为一种解决方法，您可以做两件事

1.  使用[Canvas.isHardwareAccelerated()](http://developer.android.com/reference/android/graphics/Canvas.html#isHardwareAccelerated%28%29)跳过有问题的代码。
2.  将有问题的东西绘制到位图中，然后使用 canvas.drawBitmap() 将其绘制到硬件加速视图上。

# xcode - Xcode 应用程序沙箱文件夹不显示

> ID：10173970
> 
> 赞同：0
> 
> 时间：2012-04-16T12:22:10.017
> 
> 标签：xcode

我有 Mac OS 10.7.3 和 Xcode 4.3 ，我无法在 MACINTOSH HD 驱动器上的 Application Support 文件夹中看到 iPhone 模拟器文件夹。

MACINTOSH HD/库/应用程序支持/

用户目录中也没有库文件夹。请帮助让我知道解决方案。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T07:03:48.907

模拟器存储在`~/Library/Application Support/iPhone Simulator`

要查看用户目录中的 Library 文件夹，您需要在 finder 中选择 Go 菜单，然后按住键盘上的选项键，然后选择 Library，因为 Apple 已将其隐藏在 Lion 中。

您也可以转到 Finder 并使用键盘快捷键`⌘</kbd>-`Shift`-`G`. Paste ~/Library/Application Support/iPhone Simulator into the dialog box and click Go.`

# c# - 协变、委托和泛型类型约束

> ID：10173977
> 
> 赞同：5
> 
> 时间：2012-04-16T12:22:17.427
> 
> 标签：c#, generics, delegates, covariance

```
public void Foo<T>(Func<T> bar)
 where T: IMyInterface
{
   Func<IMyInterface> func = bar;
} 
```

***自从我理解协方差以来已经有一段时间了，但这不应该编译吗？***

任何`bar`可以返回的东西也是一个`IMyInterface`。似乎是什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T12:24:50.233

[这是 C# 4 中的协方差错误吗？](https://stackoverflow.com/questions/2783233/is-this-a-covariance-bug-in-c-sharp-4)

正确的代码是：

```
public void Foo<T>(Func<T> bar)
 where T: class, IMyInterface
{
   Func<IMyInterface> func = bar;
} 
```

# c# - 从委托中读取返回值

> ID：10173978
> 
> 赞同：8
> 
> 时间：2012-04-16T12:22:21.317
> 
> 标签：c#, delegates

我不确定我是否正确理解了委托的用法，但我想阅读发布者类中的委托返回值。示例如下所示。

```
//Publisher class
    public class ValidateAbuse
    {

    public delegate List<String> GetAbuseList();
    public static GetAbuseList Callback;

    public void Ip(string ip)
    {
    //   I would like to read GetAbuseList value (List<String>) here. How to do that?
    }

    }

//Subscriber class
    class Server
    {

        public static void Start()
        {
            ValidateAbuse.Callback = GetIpAbuseList;
            ValidateAbuse.Ip(MyIp);
        }

        private static List<string> GetIpAbuseList()
        {
            //return List<String> to ValidateAbuse class and use return value in public void Ip(string ip) method 
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T12:27:19.060

```
public void Ip(string ip)
{
  if (Callback != null)
  {
    List<String> valueReturnedByCallback = Callback();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:32:49.580

这是一个不`static`用于 ValidateAbuse 并使用内置`Func<T>`委托的版本。

```
public class ValidateAbuse
{
    private Func<List<string>> callback;

    public ValidateAbuse(Func<List<string>> callback)
    {
        this.callback = callback;
    }

    public void Ip(string ip)
    {
        var result = callback();
    }
}

public class Server
{
    public static void Start()
    {
        var validateAbuse = new ValidateAbuse(GetIpAbuseList);
        validateAbuse.Ip(MyIp);
    }

    private static List<string> GetIpAbuseList()
    {
        //return List<string> to ValidateAbuse class and use return value in public void Ip(string ip) method 
    }
} 
```

我建议你避免`static`，因为这会给你一个全局状态，这可能会给你带来耦合问题，也让你很难进行单元测试。

到目前为止给出的其他答案有一个保护子句，检查回调是否为空。除非这是预期的行为（回调为空），否则我会避免这种情况。尽早崩溃总比以后难以调试错误要好。

我也会尝试使服务器非静态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:28:11.400

它应该很简单：

```
// Ip in your code sample is missing static
public static void Ip(string ip)
{
    List<string> abuseList;
    if (Callback != null)
        abuseList = Callback()
} 
```

但是，您可以避免使用 a 一起创建委托`Func`：

```
public static Func<List<string>> Callback; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-19T10:09:40.907

**试试这个：**从这里阅读更多[http://msdn.microsoft.com/en-us/library/bb534960%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/bb534960%28v=vs.110%29.aspx)

```
internal delegate int PowerOfTwo();
void Main(){
    PowerOfTwo ch = new PowerOfTwo(CheckPower);
    Console.WriteLine(ch());
    }
int CheckPower(){
    return 2*2;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-17T04:15:47.683

@Torbjörn Kalin 的回答很好，但前提是您只有 1 个代表您想从中获取返回值。如果您想检索多个委托的返回值，您可以这样做：

```
//Publisher class
public class ValidateAbuse
{        
    public delegate List<String> GetAbuseList();
    public static GetAbuseList Callback;

    public void Ip(string ip)
    {        
        foreach (GetAbuseList gal in Callback.GetInvocationList())
        {                
            List<string> result = gal.Invoke(/*any arguments to the parameters go here*/);
            //Do any processing on the result here
        }
    }            
}

//Subscriber class
class Server
{

        public static void Start()
        {
            //Use += to add to the delegate list
            ValidateAbuse.Callback += GetIpAbuseList;
            ValidateAbuse.Ip(MyIp);
        }

        private static List<string> GetIpAbuseList()
        {
            //return code goes here
            return new List<String>();
} 
```

这将一个接一个地调用每个委托，您可以分别处理每个委托的输出。

这里的关键是使用`+=`运算符（而不是`=`运算符）并遍历通过调用检索到的列表，`GetInvocationList()`然后调用`Invoke()`检索到的每个委托。

我在阅读此页面后发现了这一点： [https](https://www.safaribooksonline.com/library/view/c-cookbook/0596003390/ch07s02.html) ://www.safaribooksonline.com/library/view/c-cookbook/0596003390/ch07s02.html（尽管部分原因是我已经知道该怎么做，但我没有不要开始免费试用以阅读其余内容）

希望这可以帮助！

# url-rewriting - 在 Yii 中重写 URL

> ID：10173982
> 
> 赞同：1
> 
> 时间：2012-04-16T12:22:26.963
> 
> 标签：url-rewriting, yii

我想使用这个 url 在 Yii 中访问一个 url `www.example.com/detail/post`。

我应该能够处理此 url 以`detail`使用具有 value 的参数的`post`操作或具有命名参数`detail`和 value的某些操作`post`。

我阅读了有关 Yii 的文档，`createUrl`但无法理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:26:46.100

我认为这就是您要寻找的：

将 main.php 更新为以下内容（将控制器/详细信息部分中的控制器更改为您的控制器名称）

```
'urlManager' => array(
    'urlFormat' => 'path',
    'showScriptName' => false,
    'rules' => array(
            'detail/<post:\d+>'=>'controller/detail',
            '<controller:\w+>/<id:\d+>' => '<controller>/view',
            '<controller:\w+>/<action:\w+>/<id:\d+>' => '<controller>/<action>',
            '<controller:\w+>/<action:\w+>' => '<controller>/<action>',
     ),
), 
```

所以基本上你是在告诉 Yii，任何格式为 detail/number 的请求都将发送到你的控制器并使用动作“detail”，然后传递一个名为“post”的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T20:44:35.983

如果您启用了 mod rewrite 并希望将以下内容放在您的 htaccess 文件中

```
php_value upload_max_filesize 1M
DirectoryIndex index.php

Options +FollowSymlinks
RewriteEngine on

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php 
```

并将以下内容添加到 config/main.php 文件中的 'urlManager' 数组中：

```
'showScriptName'=>false, 
```

将从您的 url 中删除 index.php 并确保仅以 domain.com/controller/action 的形式显示 url

# django - 将数据发布到表单向导（django）中的模型表单中

> ID：10173983
> 
> 赞同：0
> 
> 时间：2012-04-16T12:22:39.697
> 
> 标签：django, django-forms

我有一个预订模型。该模型分为4个模型形式。我需要将一些数据发布到第一个表单，所以它会被初始化。那可能吗？如果是这样，怎么做？

以下是forms.py中的相关表格：

```
class ServiceChoiceForm(forms.ModelForm):
    class Meta:
        model = Booking
        fields = ('service', 'object_id', )

class ShuttleBookingForm(forms.ModelForm):
    class Meta:
        model = Booking
        fields = ('vehicle', 'date', 'time', 'arriving_by', 'flight_number', 'notes', )

class PersonalInfoBookingForm(forms.ModelForm):
    class Meta:
        model = Booking
        fields = ('first_name', 'last_name', 'phone', 'email', )

class GeneralBookingInfoForm(forms.ModelForm):
    class Meta:
        model = Booking
        fields = ('adults', 'children', 'gadgets', 'accommodation', ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:50:32.943

你的意思是你需要填充一些[初始值吗？](https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values)如果没有，你能描述一下你开始时需要做什么吗？

# ruby - Rails 3 如何从数组中获取 ActiveRecord::Relation？

> ID：10173993
> 
> 赞同：0
> 
> 时间：2012-04-16T12:23:16.667
> 
> 标签：ruby, ruby-on-rails-3, activerecord, pagination

我在模型类上有一个类方法，它根据不属于架构的属性（但从其属性派生）过滤记录：

```
def filter(records, some_param)
  records.select { |rec| rec.param > some_param } # param is a derived attribute
end 
```

我从控制器调用它。问题是我需要对这个过滤的结果进行分页，而我的项目使用“kaminari”插件，它只对 ActiveRecord::Relation 输出进行分页。如何从数组中获取 ActiveRecord::Relation？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:33:27.780

如果您的意思是[kaminari](https://github.com/amatsuda/kaminari)，那么：

```
Kaminari.paginate_array(my_array_object).page(params[:page]).per(10) 
```

# java - Content Observer onChange 方法在 1 次光标更改后调用两次

> ID：10173996
> 
> 赞同：17
> 
> 时间：2012-04-16T12:23:26.863
> 
> 标签：java, android, android-contentprovider

我有一个应用程序，我希望将 android 联系人列表中的详细信息发送到远程服务器，以便用户可以在线查看他的联系人。为此，我想将手机上对联系人列表所做的任何更改通知远程服务器。

我在“ContactsContract.Contacts.CONTENT_URI”上设置了一个 ContentObserver，该服务在手机启动时启动。

我有很多问题，前两个是偶然的，第三个是我主要关心的问题。

1：一旦我设置了在我的光标上注册 ContentObserver 的服务，该观察者是否只存在于服务中？我的意思是，如果服务被杀死，contentObserver 是否继续观察？

2：我怀疑答案是否定的，但我还是会问。是否知道正在更新的联系人正在触发我的 contentObserver 的 onchange 方法？目前我必须编译手机上所有联系人的列表并将它们发送到我的远程服务器，发送正在更新的联系人的详细信息会容易得多。

3：这是我的主要问题，当我对联系人列表进行更改时，onChange 方法会快速连续触发两次。1 次更改，2 次调用。有没有办法管理这个？

```
 public class ContactService extends Service {

    JSONArray contactList;

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public void onCreate() {
        Log.i("C2DM","content observers initialised");
        super.onCreate();

        //Call Log Content Provider observer

        MyContentContactsObserver contactsObserver = new MyContentContactsObserver();
        ContactService.this.getContentResolver().registerContentObserver (ContactsContract.Contacts.CONTENT_URI, true, contactsObserver);   

    }

    private class MyContentContactsObserver extends ContentObserver {

        public MyContentContactsObserver() {
            super(null);
        }

        @Override
        public void onChange(boolean selfChange) {
            super.onChange(selfChange);    
            Log.i("LOG","detected change in contacts: "+selfChange);
        }
    }
} 
```

在我的 logCat 中有 2 行快速生成：

```
 detected change in contacts: false 
 detected change in contacts: false 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-25T10:25:42.150

我做了一个类似的实现，并设置了一个`ContentObserver`日历事件`URI`。我面临着所有的问题，你现在面临着。所以你对我的解决方案/建议的问题在这里......

> 1）一旦我设置了在我的光标上注册 ContentObserver 的服务，该观察者是否只存在于服务中？我的意思是，如果服务被杀死，contentObserver 是否继续观察？

不，它不会通过 URI 观察您的内容。但有解决办法。您可以创建一个始终运行的服务。由于某些内存问题或其他意外解除，该服务将在被解除后立即重新创建。除非明确解除，否则它将始终继续运行。在您的服务类中创建此类服务覆盖`OnStartCommand(Intent intent, int flags, final int startId)`并返回`START_STICKY`。看看下面的代码。

```
public int onStartCommand(Intent intent, int flags, final int startId) {

    String authenticationKey = ((MainApplication) getApplicationContext()).getDbConnector().getUserAuthDefault() ;
    // if user is not registered yet, stop this service, it may be called from boot reciever.
    if(authenticationKey == null){
        stopSelf();
    }

    // restart, if we get killed.
    return START_STICKY;
} 
```

.

> 2：我怀疑答案是否定的，但我还是会问。是否知道正在更新的联系人正在触发我的 contentObserver 的 onchange 方法？目前我必须编译手机上所有联系人的列表并将它们发送到我的远程服务器，发送正在更新的联系人的详细信息会容易得多。

你又猜对了。:)。答案是
否定的。没有办法知道具体更新了哪个联系人。ContentObserver 只是提供一个事件，让您知道 uri 指向的数据发生了一些变化。但是我认为您处理这种情况的效率很低，因为您正在编译所有联系人的列表并将它们发送回服务器。
我建议您在本地存储中维护一个成功发送到服务器的联系人列表。下次当您在fetch all from`onChange()`方法中接到电话时，将它们与先前存储的列表进行比较，并仅将更新的联系人发送到服务器。 `contentObserver``contacts``content_URI`

> 3：这是我的主要问题，当我对联系人列表进行更改时，onChange 方法会快速连续触发两次。1 次更改，2 次调用。有没有办法管理这个？

是的，这会发生，但我想你的印象是错误的。就我而言，它曾经随机发射两次或三次甚至更多次。所以我设置了一个 threshold_time 间隔。如果`ContentObserver`再次触发的时间间隔，那么我不会处理它。我做了这样的事情..

```
long lastTimeofCall = 0L;
long lastTimeofUpdate = 0L;
long threshold_time = 10000;

    /* (non-Javadoc)
     * @see android.database.ContentObserver#onChange(boolean)
     */
    @Override
    public void onChange(boolean selfChange) {
        super.onChange(selfChange);

        Log.d("content service", "on change called");

        lastTimeofCall = System.currentTimeMillis();

        if(lastTimeofCall - lastTimeofUpdate > threshold_time){

         //write your code to find updated contacts here

          lastTimeofUpdate = System.currentTimeMillis();
        }

    } 
```

希望这些建议/解决方案会有所帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-26T15:23:50.760

考虑如何注册观察者。的第二个参数`registerContentObserver`是`boolean notifyForDescendents`，您已将其设置为`true`。因此，当 ContactsContract.Contacts.CONTENT_URI 或其任何 descandants uris 发生更改时，您将收到通知。与给定 id 联系的某些操作可能会触发特定联系人 uri 和全局联系人 uri 的通知 - 第二个参数是`true`您的观察者同时观察两者。

另一件事是您可以为特定的联系人 id uri - 注册内容观察者`ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, contactId)`。然而，这与您的问题无关，但为每个联系人注册单独的观察者看起来相当难看；）

另一个建议：也许将观察者保留为最终字段，而不是在 onCreate 中重新创建它（但只在那里注册）。

```
public class ContactService extends Service {

    private final ContentObserver contactsObserver = new ContentObserver(null) {

        @Override
        public void onChange(boolean selfChange) {
            super.onChange(selfChange);    
            Log.i("LOG","detected change in contacts: "+selfChange);

            //your code here
        }
    };

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public void onCreate() {

        super.onCreate();

        getContentResolver().registerContentObserver(
                ContactsContract.Contacts.CONTENT_URI, true, contactsObserver);   
    }

    @Override
    public void onDestroy() {

        getContentResolver().unregisterContentObserver(contactsObserver);

        super.onDestroy();
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-16T13:32:56.337

来找你的nr。3：两次调用观察者之间的时间间隔是多少？我认为您的观察者会因为联系人同步而被调用两次，这也会更新数据库。IE。第一次是您的实际更新，第二次是同步完成并将其同步值注册在同一联系人行中。

你能关闭同步，看看它是否仍然被调用两次？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-11T01:07:38.190

您可能有两个或多个 ContactService 实例，它们都注册了相同的 ContactsContract.Contacts.CONTENT_URI。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-11-12T14:02:52.237

在我自己的代码中遇到了同样的问题，发现我调用了 registerContentObserver() 两次。虽然它是针对完全相同的 URI 并且在同一个类中，但结果我的 onChange(boolean selfChange) 方法被调用了两次。

# javascript - 为什么 CURL JS 不加载我的 CSS 文件？

> ID：10173997
> 
> 赞同：3
> 
> 时间：2012-04-16T12:23:28.347
> 
> 标签：javascript, asp.net, curljs

美好的一天，我正在尝试使用[**CurlJS**](https://github.com/cujojs/curl/wiki)，并且在大多数项目上都取得了成功。但是，由于某种原因，我仍然无法使用[**CurlJS**](https://github.com/cujojs/curl/wiki)加载 CSS 文件。

Firebug（网络选项卡）显示他们的`css.js`插件正在加载：我假设它用于加载 CSS 文件。Firebug（控制台选项卡）显示来自`curl.js`文件内的“a.load 不是函数”。

**版本号**为`define.amd.curl`：**“0.6.2”**

**我的问题是：**为什么没有加载 CSS 文件？

**我的代码看起来像：**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title></title>

    <script type="text/javascript">
        curl =
        {
            baseUrl: '.',
            paths:
                {
                    curl: 'Scripts/Curl'
                    //,'css!':'Style' //<-- I even tried this with no success
                },
            pluginPath: 'Scripts/Curl/curl/plugin'
        };
    </script>

    <script src="Scripts/Curl/curl.js" type="text/javascript"></script>

    <script type="text/javascript">
        curl(['css!Style/Test.css'])
            .then(
            function (css) {
                if (css)
                    alert("It Works!");
            },
            function (error) {
                alert("It failed!");
            });
    </script>

</head>
<body>
    <form id="form1" runat="server">
        <div class="test" style="border: 1px solid black; text-align: center; width: 400px;">
            If the CSS loads this text will be RED.
        </div>
    </form>
</body>
</html> 
```

**控制台标签：**
![这是 Firebugs 控制台的屏幕截图](../Images/4a4f6713d98de06aef460934ae57bef3.png)

**网络标签：**
![这是 Firebugs Net 的截图](../Images/8a1f454e6475fe65971a4c44b396aac1.png)

**更新：**
我“可以”使用以下 JavaScript 加载给定模块的 CSS 依赖项，但我更愿意使用 Curls 原生功能。

```
var head = document.getElementsByTagName('head')[0];
var files = ['/Style/Test.css']; //<-- my list of files
for (var i = 0, l = files.length; i < l; i++) {
    var link = document.createElement('link');
    link.href = files[i];
    link.rel = "stylesheet";
    link.type = "text/css";
    head.appendChild(link);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:41:56.763

我发现您的代码段存在一些问题：

1.  成功回调的签名有两个参数（$，css），但您只需要一个模块“Test.css”。
2.  不要尝试通过脚本元素加载模块。那是行不通的。

鉴于显示的代码片段，我无法解释“a.load 不是函数”消息。一定有其他我看不到的事情正在发生。

**[更新您发布屏幕截图后：]** Firebug 屏幕截图中显示的一小段代码看起来像是 css.js 文件已被最小化/压缩。它并不是要单独最小化。使用 curl 的 make 实用程序来构建带有 css 的 curl 版本！插件烘焙，或者在 curl/dist 中获取已经烘焙到 css 中的版本！插件模块。那应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:41:16.920

我不熟悉 CurlJS，但它可能与 CSS 文件的相对路径有关。

尝试更换：

```
curl(['css!Style/Test.css']) 
```

与：

```
curl(['css!./Style/Test.css']) 
```

或者：

```
curl(['css!../../Style/Test.css']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T20:05:27.850

使用另一个 curl.js 文件... kitchen-sink 版本包含插件，其他版本不包含。

[https://github.com/cujojs/curl/tree/master/dist/curl-kitchen-sink](https://github.com/cujojs/curl/tree/master/dist/curl-kitchen-sink)