# StackOverflow 问答 10122000-10122999

# javascript - JQuery droppable 具有带有附加参数的句柄删除功能

> ID：10122003
> 
> 赞同：1
> 
> 时间：2012-04-12T10:44:31.837
> 
> 标签：javascript, jquery, droppable

所以我明白这就是我们通常所说的jquery droppable：

```
$( ".selector" ).droppable({
   drop: function(event, ui) { ... }
}) 
```

我可以写这样的东西吗：

```
$( ".selector" ).droppable({
   drop: function(event, ui, additionalParameter) { return function(){....} }(myParameter)
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:53:05.103

只要该值是函数引用，您就可以为所欲为。所以是的！

您可能想要捕获事件和`ui`对象，因此它们需要成为*返回*函数中的参数。所以你的代码是：

```
$( ".selector" ).droppable({
   drop: function(additionalParam){ return function(event, ui){...}; }(myParam)
}); 
```

# ruby-on-rails-3 - redirect_to 从“销毁”到“索引”

> ID：10122006
> 
> 赞同：13
> 
> 时间：2012-04-12T10:44:35.213
> 
> 标签：ruby-on-rails-3

当我想以“ajaxized”方式从分页表中删除元素时出现问题。我的任务控制器调用它的*destroy*方法来响应`[DELETE] /tasks/1234`，但最后我想重定向到*索引*以自动刷新列表。

不幸的是，`redirect_to tasks_url`此时做的是`[DELETE] /tasks`请求。

*从destroy*内部重定向时，有什么方法可以强制 GET 请求而不是 DELETE ？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-09-22T23:14:31.833

使用状态为 303 的 redirect_to

```
def destroy
  @task = Task.find(params[:id])
  @task.destroy
  redirect_to :action => :index, status: 303     
end 
```

redirect_to 文档说：

[http://api.rubyonrails.org/classes/ActionController/Redirecting.html](http://api.rubyonrails.org/classes/ActionController/Redirecting.html)

如果您使用 GET 或 POST 以外的 XHR 请求并在请求之后进行重定向，则某些浏览器将使用原始请求方法跟随重定向。这可能会导致不良行为，例如双重删除。要解决此问题，您可以返回 303 See Other 状态代码，随后将使用 GET 请求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T03:33:22.263

不要使用重定向。使用渲染。抽象将表数据获取到库模块中的功能，然后从索引和删除方法调用它，然后添加渲染调用，然后将渲染调用添加到删除方法，以便索引视图作为响应返回.

```
require 'myLibrary'
include myModule

def index
    getTableData
end

def destroy
    flash.now[:notice] = "Delete operation failed" unless Task.destroy(params[:id])
    getTableData
    render 'myController/index'
end 
```

在 lib/myLibrary 中

```
module myModule
    def getTableData
        # Table Foo here
    end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:45:04.433

为什么不使用 :action 参数？

```
def destroy
  @task = Task.find(params[:id])
  @task.destroy
  redirect_to :action => :index    
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T19:43:05.487

使用 ajax 时，您可能不想执行标准的 rails 重定向。这篇[博客文章](http://paydrotalks.com/posts/45-standard-json-response-for-rails-and-jquery)对问题和解决方案有一些很好的见解。请注意，这是来自1 月份的一个[类似问题，由](https://stackoverflow.com/questions/8798371/rails-3-how-to-implement-redirect-response-with-an-ajax-request)[DGM回答](https://stackoverflow.com/users/14253/dgm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T10:58:30.030

好的，总结一下这个问题。我发现解决问题的最简单方法是在 routes.rb 中添加：并直接在控制器中的销毁操作中`"tasks" => "tasks#index", :via => :get`使用（在我的情况下）。`redirect_to tasks_url`

这也将解决 kaminari 寻呼机的问题（在某些情况下会呈现奇怪的链接）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T11:37:47.563

我认为您应该在客户端重新排列代码：

1.  记忆当前页面
2.  触发`destroy`动作，等待真或假
3.  `index`使用 ajax 调用在记忆页面上请求。

# c# - 如何更快地将元素/对象添加到列表中？

> ID：10122007
> 
> 赞同：2
> 
> 时间：2012-04-12T10:44:43.007
> 
> 标签：c#, .net, list

可以说我有这样的事情：

```
MySomething element1 = new MySomething(stuff);
MySomething element2 = new MySomething(stuff);
MySomething element3 = new MySomething(stuff);
MySomething element4 = new MySomething(stuff);
MySomething element5 = new MySomething(stuff);
//and so on... 
```

现在假设我有一个列表或某处的东西，我想将所有元素添加到列表中。他们我必须做的：

```
myList.add(element1);
myList.add(element2);
//and so on... 
```

那将需要很长时间。如果我有 100 多个元素，那么它需要永远 ^^ 有没有更快的方法将这么多创建的“元素”添加到列表中？我知道

```
myList.add(new MySomething(stuff)); 
```

但是可以说，元素已经像示例中一样创建了。如何在 c# 中更快地将它们添加到列表中？谢谢 ：）

编辑：好的，我不得不说，名称并不总是 element1-100，有时是 element23、element454 等等。元素后面的数字并不总是连续的。是的，它们都是同一类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:49:33.400

如果它们都是相同的类型，并且您知道需要多少个，则最初只需使用循环来创建数组：

```
MySomething[] items = new MySomething[N];
for(int i = 0; i < N; i++)
{
    items[i] = new MySomething(stuff);
} 
```

稍后，将所有项目添加到列表中：

```
list.AddRange(items); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T10:47:46.803

您可以使用`AddRange(<T>)` [http://msdn.microsoft.com/en-us/library/z883w3dc.aspx](http://msdn.microsoft.com/en-us/library/z883w3dc.aspx)

但我很确定内部实现只是遍历集合并一一添加每个元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T10:52:05.207

如果您提前知道要添加到列表中的元素数量，则可以在构造函数中设置列表的大小 - 这样可以避免列表在填满时动态调整大小，例如

```
MySomething element1 = new MySomething(stuff);
....
MySomething element100 = new Something(stuff);

List<MySomething> myList = new List<MySomething>(100); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T11:14:15.683

您可以创建一个方法来返回您在内部创建的每个对象：http: [//msdn.microsoft.com/en-us/library/9k7k7cf0 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/9k7k7cf0(v=vs.80).aspx)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-12T10:52:50.387

```
var list = Enumerable
  .Range(1,100)
  .Select(i =>  new MySomething(stuff))
  .ToList(); 
```

# progress-4gl - 浏览器中的值更改事件？

> ID：10122009
> 
> 赞同：0
> 
> 时间：2012-04-12T10:44:46.393
> 
> 标签：progress-4gl, openedge

```
define variable hOrderQuery     as handle no-undo.
define variable browseOrder-hdl as handle no-undo.
define variable browse-hdl      as handle  no-undo.
define variable CNumber         as integer no-undo.

CREATE QUERY hQuery.
hQuery:SET-BUFFERS(BUFFER Customer:HANDLE).
hQuery:QUERY-PREPARE("FOR EACH Customer").
hQuery:QUERY-OPEN().

CREATE BROWSE browse-hdl
ASSIGN
TITLE     = "Customer Browser"
FRAME     = FRAME MyFrame:HANDLE
QUERY     = hQuery
X         = 2
Y         = 2
WIDTH     = 74
DOWN      = 10
VISIBLE   = YES
SENSITIVE = TRUE
READ-ONLY = yes.
browse-hdl:ADD-COLUMNS-FROM(BUFFER Customer:HANDLE,"SalesRep,email,fax,comments,address,City,State,PostalCode").

on value-changed of browse-hdl
do:

FIND CURRENT Customer.
cNumber = Customer.CustNum.

CREATE QUERY hOrderQuery.
hOrderQuery:SET-BUFFERS(BUFFER Order:HANDLE).
hOrderQuery:QUERY-PREPARE("FOR EACH Order where Order.CustNum = " + string(cNumber)) no-    error.
hOrderQuery:QUERY-OPEN().

CREATE BROWSE browseOrder-hdl
ASSIGN
TITLE     = "Order Browser"
FRAME     = FRAME MyFrame:HANDLE
QUERY     = hOrderQuery
X         = 2
Y         = 240
WIDTH     = 74
DOWN      = 10
VISIBLE   = YES
SENSITIVE = TRUE
READ-ONLY = yes.
browseOrder-hdl:ADD-COLUMNS-FROM(BUFFER Order:HANDLE,"warehousenum,CustNum").

end.

on value-changed of browseOrder-hdl
do:
message "hai" view-as alert-box.
end. 
```

这是我的问题。我有 3 个浏览器。现在我只创建了两个。当我点击第一个客户浏览器的一行时，它应该选择当前客户并应该在第二个浏览器订单浏览器中显示他的订单。当我点击订单浏览器值时，它应该在第三个订单浏览器（我现在没有创建）中显示相应的订单表值。

因此，当我尝试使用 browseOrder-hdl 创建第二个值更改事件时，它显示它已被删除。如何克服这个问题？请回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:36:49.700

```
DEFINE FRAME MyFrame
  WITH 1 DOWN NO-BOX KEEP-TAB-ORDER OVERLAY 
  SIDE-LABELS NO-UNDERLINE THREE-D 
  AT COL 1 ROW 1
  SIZE 80 BY 16.

define variable hOrderQuery     as handle  no-undo.
define variable browseOrder-hdl as handle  no-undo.
define variable browse-hdl      as handle  no-undo.
define variable CNumber         as integer no-undo.
DEFINE VARIABLE hQuery          AS HANDLE  NO-UNDO.

CREATE QUERY hQuery.
hQuery:SET-BUFFERS(BUFFER Customer:HANDLE).
hQuery:QUERY-PREPARE("FOR EACH Customer").
hQuery:QUERY-OPEN().

CREATE BROWSE browse-hdl
  ASSIGN
  TITLE     = "Customer Browser"
  FRAME     = FRAME MyFrame:HANDLE
  QUERY     = hQuery
  X         = 2
  Y         = 2
  WIDTH     = 74
  DOWN      = 10
  VISIBLE   = TRUE
  SENSITIVE = TRUE
  READ-ONLY = TRUE
  TRIGGERS:
    ON VALUE-CHANGED DO:
      RUN ShowOrderBrowser.
    END.  
  END.  

  browse-hdl:ADD-COLUMNS-FROM(BUFFER Customer:HANDLE,"SalesRep,email,fax,comments,address,City,State,PostalCode").

WAIT-FOR CLOSE OF THIS-PROCEDURE.

/* **********************  Internal Procedures  *********************** */

PROCEDURE ShowOrderBrowser:
  /*------------------------------------------------------------------------------
      Purpose:                                                                        
      Notes:                                                                      
  ------------------------------------------------------------------------------*/
  FIND CURRENT Customer.
  cNumber = Customer.CustNum.

  CREATE QUERY hOrderQuery.
  hOrderQuery:SET-BUFFERS(BUFFER Order:HANDLE).
  hOrderQuery:QUERY-PREPARE("FOR EACH Order WHERE Order.CustNum = " + STRING(cNumber)).
  hOrderQuery:QUERY-OPEN().

  CREATE BROWSE browseOrder-hdl
    ASSIGN
    TITLE     = "Order Browser"
    FRAME     = FRAME MyFrame:HANDLE
    QUERY     = hOrderQuery
    X         = 2
    Y         = 240 
    WIDTH     = 74
    DOWN      = 10
    VISIBLE   = TRUE
    SENSITIVE = TRUE
    READ-ONLY = TRUE    
    TRIGGERS:
      ON VALUE-CHANGED DO:
        MESSAGE "hai"
        VIEW-AS ALERT-BOX.
      END.
    END.

  browseOrder-hdl:ADD-COLUMNS-FROM(BUFFER Order:HANDLE,"warehousenum,CustNum").  

  WAIT-FOR VALUE-CHANGED OF browseOrder-hdl.

END PROCEDURE. 
```

# linux - Linux内核操作系统寄存器

> ID：10122011
> 
> 赞同：0
> 
> 时间：2012-04-12T10:44:50.627
> 
> 标签：linux, cpu-registers

寄存器（如 eax、ebx、ecx、edx、esp、ebp 等）是否在处理器中物理可用，或者从编程的角度来看它们是虚拟内存位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T10:47:50.570

您指定的寄存器在英特尔处理器上都是物理可用的，而不是虚拟内存。虚拟内存的概念在这里并不适用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T10:47:57.783

它们在处理器中可用。根据处理器的不同，您可能有额外的寄存器或少于您指定的寄存器。

[维基百科“处理器注册”](http://en.wikipedia.org/wiki/Processor_registers)：

> 在计算机体系结构中，处理器寄存器是作为 CPU 或其他数字处理器的一部分可用的少量存储。此类寄存器（通常）由主存储器以外的机制寻址，并且可以更快地访问。几乎所有的计算机，无论是否加载存储架构，都将数据从更大的内存加载到寄存器中，并通过某些机器指令用于算术、操作或测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T10:48:26.677

寄存器是指定的硬件平台。Eax、ebx 或其他任何类似 rax、rbx 的东西都是 x86 寄存器它们确实存在于我们的计算机中，并且物理上可用 在 x86 中，寄存器不会映射到内存中

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T12:10:47.227

寄存器是物理的，它们是机器架构的一部分，而不是操作系统或任何其他软件的一部分。由于[寄存器重命名](http://en.wikipedia.org/wiki/Register_renaming)，它们可能在芯片上没有一个对应的硅片，但从任何软件（包括操作系统）的角度来看，它们是硬件的一部分，与内存地址不同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T10:47:10.390

它们非常实际地存在于英特尔 CPU 中。Linux 在这些 CPU 之上运行。

# security - X509Data 元素在签名中出现两次

> ID：10122014
> 
> 赞同：0
> 
> 时间：2012-04-12T10:45:10.403
> 
> 标签：security, email, x509certificate

我正在尝试解密（然后加密）电子邮件（ebXML）。该消息包含一个 Signature 元素，该元素包含用于指定 SignedInfo、SignatureValue 和 KeyInfo 的子元素。此外，该邮件还包含一个加密附件。

KeyInfo 元素包含两个 X509Data 元素。每个都指定一个 X509Certificate。为什么有两个证书？是邮件本身的一份证书和附件的一份证书吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:59:15.653

很可能它是一个最终实体证书，它是 CA 证书。您可以通过获取这些证书并比较它们的颁发者和主题属性来检查这一点。

# ruby-on-rails - Rails 唯一的路由名称

> ID：10122025
> 
> 赞同：0
> 
> 时间：2012-04-12T10:45:50.420
> 
> 标签：ruby-on-rails, url, routing, controllers

我正忙于一个涉及许多子域和不同级别身份验证的项目，我想根据您的访问权限更改 URL 的外观，我们有可以访问所有的超级用户（仅限程序员） ，然后是几个不同的管理权限。每个人都可以访问不同的东西，具体取决于他们处理的内容，门户管理员可以访问名为 data_report 的功能，只有他和超级用户才能获得访问权限，它的路由方式仅供超级用户访问，因此 URL 显示[http： //toolkit.dev/portal_data/21](http://toolkit.dev/portal_data/21)21 是门户管理员来自的帐户，但他不需要看到这一点，因为他无法访问任何其他帐户，作为超级用户可以并且愿意，有没有办法在该 URL 中隐藏 21 和仍然将它传递到同一个地方。所以超级用户可以看到帐号，如果是portal_administrator，那么他不会？

我的路线如下所示：

```
map.resources :portal_data, :only => [:show, :create]
map.show_account_portal_datum '/portal_data/:id/account/:account_id/', :controller => 'portal_data', :action => 'show_account' 
```

它所指的控制器有一个方法

```
def show_account
  @account = @portal.accounts.find(params[:account_id])
end 
```

对不起，如果这是一个简单的问题，这是我第一次处理路线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:42:18.387

我认为在这种情况下，门户管理员也不需要索引页面。如果当前登录的用户是门户管理员，那么仅在 index 操作中检查这一点，并呈现（不重定向）与 show 操作相同的视图怎么样？

只是一个快速的想法，不知道它是否符合您的需求。

# c# - 如何更改 app.config 中的连接字符串

> ID：10122029
> 
> 赞同：0
> 
> 时间：2012-04-12T10:46:03.727
> 
> 标签：c#, sql, winforms, connection-string, app-config

我有一个程序使用 TableAdapters 创建的 DataTables 生成报告。现在我的客户有一个新数据库，他希望能够在新数据库和旧数据库之间切换。我发现我可以通过更改 app.config 中的连接字符串来做到这一点，但我不知道如何在运行时做到这一点。你能给我一个方法吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T10:48:34.383

> 我不知道如何在运行时做到这一点

不。您可以在 中包含*多个*连接字符串，`app.config`并在需要时访问每个字符串。

配置：

```
<connectionStrings>
  <add name="conn1" providerName="System.Data.SqlClient"
       connectionString="..." />
  <add name="conn2" providerName="System.Data.SqlClient"
       connectionString="..." />
</connectionStrings> 
```

在代码中：

```
var conn1 = ConfigurationManager.ConnectionStrings["conn1"];
var conn2 = ConfigurationManager.ConnectionStrings["conn2"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T10:50:31.747

您可以像这样定义多个连接字符串：

```
<add name="Conn" connectionString="Data Source=PC\SQLEXPRESS;Initial Catalog=NHIB;Integrated Security=True" providerName="System.Data.SqlClient"/>-->
<add name="Conn1" connectionString="Data Source=WINSERVER;Initial Catalog=NHIB1;Integrated Security=True;" providerName="System.Data.SqlClient"/> 
```

之后，您可以根据您的要求使用 conn 或 conn1 ..例如：

```
SqlConnection con;
con = new SqlConnection(ConfigurationManager.AppSettings.Get("Conn"));  Or
con = new SqlConnection(ConfigurationManager.AppSettings.Get("Conn1")); 
```

您可以在它们之间切换，如下所示：

```
string connectionString = HttpContext.Current.Request.IsLocal ? 
ConfigurationManager.ConnectionStrings["Conn"].ConnectionString :
ConfigurationManager.ConnectionStrings["Conn1"].ConnectionString;
yourDataContext = new YourApplicationDataContext(connectionString); 
```

# javascript - 显示数组中的图像

> ID：10122032
> 
> 赞同：2
> 
> 时间：2012-04-12T10:46:23.210
> 
> 标签：javascript, image

我正在尝试显示 javascript 数组中的六个图像。运行下面的代码我没有得到任何结果，它似乎根本不起作用。我不知道我的错在哪里。

**这是javascript代码：**

```
var backgroundImage = new Array(); 
backgroundImage[0] = "images/colors-wallpaper.jpg";
backgroundImage[1] = "images/florida-birds.jpg";
backgroundImage[2] = "images/focus-on-life.jpg";
backgroundImage[3] = "images/set-into-life.jpg";
backgroundImage[4] = "images/dandelion.jpg";
backgroundImage[5] = "images/flowers.jpg";
backgroundImage[5] = "images/flowers.jpg";

function displayAllImages() {
// Here has to be some error!!! //
 for (i=0;i<backgroundImage.length;i++) {
    document.write("<li><img src='" + backgroundImage[i] + "' width="160" height="120"/><span>" + backgroundImage[i] + "</span></li>");
}
} 
```

**那是我的html代码：**

```
<html>
<head>
    <script type="text/javaScript" src="changebackground.js"></script>
</head>
<body>

<div id="container">

    <div class="backgoundImage">
    <ul>
        <script>displayAllImages();</script>
    </ul>
    </div>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T10:53:12.387

改变

```
width="160" height="120" 
```

至

```
width='160' height='120' 
```

在

```
document.write("<li><img src='" + backgroundImage[i] + "' width="160" height="120"/><span>" + backgroundImage[i] + "</span></li>"); 
```

您使用了错误的引号

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T10:54:01.603

您的最后一个数组项键应该是 6（我也认为相同的值是复制/粘贴错误），我强烈建议不要将 document.write 用于此类事情。检查链接以查看我认为您想要实现的目标，但以更简洁的方式完成（使用 jQuery 的演示仅用于 dom 就绪处理）

[http://jsfiddle.net/UnFUB/](http://jsfiddle.net/UnFUB/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T10:54:19.467

您需要转义双引号，见下文：

```
document.write("<li><img src='" + backgroundImage[i] + "' width=\"160\" height=\"120\"/><span>" + backgroundImage[i] + "</span></li>"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-12T10:55:50.980

```
document.write("<li><img src='" + backgroundImage[i] + "' width='160' height='120'/><span>" + backgroundImage[i] + "</span></li>"); 
```

你的引号有误。但最好不要使用 document.write 的 beeter 方式是在内存中创建一个元素，然后放到这个块中。[它在jQuery](http://jsfiddle.net/yRbpD/)上的外观

# project-management - 如何更改 JIRA 中的解决时间计算？

> ID：10122033
> 
> 赞同：1
> 
> 时间：2012-04-12T10:46:28.657
> 
> 标签：project-management, jira, kanban

是否可以将解决时间计算更改为不是从问题创建时间开始，而是从问题转移到特定状态的时间开始？

用例如下 - 我们使用看板式的开发方法，在这种方法中，我们预先在积压工作中创建大多数问题/功能/故事；因此，这会扼杀解决时间小工具的用处。在我们的案例中，应该使用将问题拉到选定问题的时间来计算领先/解决时间。

由于此计算是多个小工具的基础，也许可以针对每个小工具进行更改，以避免其他小工具出现不可预见的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:29:52.987

有一个服务级别管理工具 SLAdiator (http://sladiator.com)，它根据工单在特定状态（或多个状态）中花费的持续时间计算解决/反应时间。您可以在线查看这些票证并获取报告。

# asp.net - 与使用表单身份验证“slidingExpiration”相关的缺点

> ID：10122035
> 
> 赞同：3
> 
> 时间：2012-04-12T10:46:46.100
> 
> 标签：asp.net, forms-authentication

假设我在 web.config 中使用了类似的东西

```
<authentication mode="Forms">
<forms

      loginUrl ="~/HomeLogin.aspx"
      cookieless= "AutoDetect" 
      slidingExpiration="true"
      timeout="10"
       protection ="All"

/>
</authentication> 
```

如果slidingExpiration 设置为true（默认值），则每次FormsAuthenticationModule 对用户进行身份验证时，它都会更新票证的到期时间。如果设置为 false，则不会在每个请求上更新过期时间，从而导致票证在第一次创建票证时的超时分钟数后过期。

**笔记：** 身份验证票证中存储的到期时间是绝对日期和时间值，例如 2008 年 8 月 2 日上午 11:34。此外，日期和时间是相对于 Web 服务器的本地时间的。这个设计决策可能会对夏令时 (DST) 产生一些有趣的副作用，即美国的时钟提前一小时（假设 Web 服务器托管在观察夏令时的区域设置）。考虑在 DST 开始时间（即凌晨 2:00）附近有 30 分钟到期的 ASP.NET 网站会发生什么。想象一下，一位访问者在 2008 年 3 月 11 日凌晨 1:55 登录网站。这将生成一个表单身份验证票证，该票证将于 2008 年 3 月 11 日凌晨 2:25（未来 30 分钟）到期。但是，一旦凌晨 2:00 滚动，由于 DST，时钟会跳到凌晨 3:00。

这是一个可能导致问题的实例。任何人都可以指出这种方法的任何缺点。我有兴趣了解它。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T11:08:41.177

FormsAuthentication 使用 UTC 时间进行计算。您需要转到源代码（或反射器）才能看到这一点，所有使用 UTC 日期的属性/方法都是内部的。

根据[RFC 6265 第 5.1.1 节，](https://www.rfc-editor.org/rfc/rfc6265#section-5.1.1) Cookie 使用 UTC 时间作为到期日期。

> “让 parsed-cookie-date 为日期，其月日、月、年、小时、分钟和秒（以 UTC 为单位）为月日值、月值、年-值、小时值、分钟值和秒值。”

这意味着 DST 不会成为问题。

只要用户处于活动状态，滑动到期将允许无限期登录。这意味着第三方可以在同样无限期的时间内获取 cookie 并以用户身份进行身份验证。

绝对过期不会阻止这种情况，但需要定期重新验证，从而限制第三方可以使用 cookie 的时间窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T07:14:33.480

表单身份验证交易始终采用 UTC。

# apache-flex - Flex 多个远程对象调用

> ID：10122036
> 
> 赞同：1
> 
> 时间：2012-04-12T10:46:56.567
> 
> 标签：apache-flex, flex4, flex4.5, blazeds, flex-mobile

我有多个远程对象调用的问题。因此，首先我必须从服务器检索雇主 ID（使用 BlazeDS btw），其次我必须根据雇主 ID 为每个雇主请求并检索每个雇主的其他详细信息（每个雇主 ID 的另外 2 个远程对象调用）。因此，正如您所理解的，第三个远程对象调用将第二个的响应作为其参数，第二个将第一个的响应作为参数。

我的问题是，当我遍历第一个请求的响应时，它仅针对其最后一个元素而不是每个元素调用第二个远程对象。

这是我的视图代码：

```
<fx:Declarations>
    <parsley:FastInject property="karBUS" type="{KarBUS}"/>
        <s:CallResponder id="hastalariGetirResponder" result="hastalariGetirResponder_resultHandler(event)"/>
        <s:CallResponder id="yatakOdaGetirResponder" result="yatakOdaGetirResponder_resultHandler(event)" fault="yatakOdaGetirResponder_faultHandler(event)"/>
        <s:CallResponder id="hastaKartlariGetirResponder" result="hastaKartlariGetirResponder_resultHandler(event)"/>
        <s:CallResponder id="hastaResimGetirResponder" result="hastaResimGetirResponder_resultHandler(event)"/>
        <parsley:Configure  />
    </fx:Declarations>

<fx:Script>
        <![CDATA[

[Inject(id="karBUS")]
public var karBUS:KarBUS;

            protected function view1_creationCompleteHandler(event:FlexEvent):void
            {

                trace("Hastalarim View: persID:"+SessionClientData.prsnl.personelId+",servisID: " + SessionClientData.servisId);
                hastalariGetirResponder.token = karBUS.getHastalarim(SessionClientData.prsnl.personelId,SessionClientData.servisId);

            }

protected function hastalariGetirResponder_resultHandler(event:ResultEvent):void
            {
                hastalarim = hastalariGetirResponder.lastResult;

                if(hastalarim.length == 0) {
                    this.addElement(txt_empty);
                    this.removeElement(busy_ind);
                }

                for(var i:int=0;i<hastalarim.length;i++){

                    kt = hastalarim.getItemAt(i) as Object;

                    vizitID = kt[6];
                    hastaTC = kt[3];

                    yatakOdaGetirResponder.token = karBUS.getYatakOdaNo(vizitID);
                }

            }

protected function yatakOdaGetirResponder_resultHandler(event:ResultEvent):void
            {
                yatakOda = yatakOdaGetirResponder.lastResult as Object;

                hastaKartlariGetirResponder.token = karBUS.getHastaKarti(vizitID);

            }

            protected function hastaKartlariGetirResponder_resultHandler(event:ResultEvent):void
            {
                hastaTuru = hastaKartlariGetirResponder.lastResult as String;

                hastaResimGetirResponder.token = karBUS.getHastaResim(hastaTC);
            }

            protected function hastaResimGetirResponder_resultHandler(event:ResultEvent):void
            {
                resim = hastaResimGetirResponder.lastResult as ByteArray;

                dp=new ArrayCollection();

                var yatak:String;
                var oda:String;
                var kat:String;

                if(yatakOda == null){
                    yatak = "";
                    oda = "";
                    kat = "";
                }else{
                    yatak = yatakOda[2];
                    oda = yatakOda[1];
                    kat = yatakOda[0];
                }

                for(var i:int=0;i<hastalarim.length;i++){

                    kt = hastalarim.getItemAt(i) as Object;

                    var dt:Date = kt[5] as Date;
                    var vizitT:String = dt.date + "-" + (dt.month+1) + "-" + dt.fullYear;

                    dp.addItem({hastaId:kt[0], adi:kt[1],soyadi:kt[2],tcKimlikNo:kt[3], resim: resim,
                        yasi:kt[4],katNo:kat,odaNo:oda,yatakNo:yatak,
                        vizitTarihi:vizitT,vizitId:kt[6],cinsiyeti:kt[7], hastaTuru:hastaTuru});

                    trace("OdaNO - Yatak NO: "+ oda + ", " + yatak);

                }

            }

    ]]>
    </fx:Script> 
```

如何让弹性线程等到前一个返回响应？任何线程处理方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:41:36.763

我认为问题在于您每次都在覆盖令牌

```
for(var i:int=0;i<hastalarim.length;i++){
   ...    
   yatakOdaGetirResponder.token = karBUS2.getYatakOdaNo(vizitID);
} 
```

所以只处理最后一个请求的响应。

您不应该使用静态响应者，而是为每个请求`yatakOdaGetirResponder`创建一个新对象。`CallResponder`

```
for(var i:int=0;i<hastalarim.length;i++){
    ...    
    var responder: CallResponder = new CallResponder();
    responder.addEventListener(ResultEvent.RESULT,  yatakOdaGetirResponder_resultHandler);
    responder.token = karBUS2.getYatakOdaNo(vizitID);
} 
```

# wso2 - 基于 OpenID 的 SSO 和 WSO2 身份服务器

> ID：10122044
> 
> 赞同：2
> 
> 时间：2012-04-12T10:47:34.540
> 
> 标签：wso2, wso2is

无法使用 WSO2 身份服务器获取基于 OpenID 的 SSO。我关注了 Suresh Aththanayaka 给出的博客文章，但在输入`https://localhost:9443/openid/admin`为您的 OpenID 标识符之后。它不会重定向到 Identity Server 页面。它显示一个空白页。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T03:10:32.237

我认为您的客户端应用程序存在问题。我在 WSO2 身份服务器 4.6.0 [1] 中尝试过它对我来说效果很好。请在此处找到最新示例[2]

[1] [http://wso2.com/products/identity-server/](http://wso2.com/products/identity-server/) [2] [https://svn.wso2.org/repos/wso2/carbon/platform/branches/turing/products/is/4.6.0/模块/样本/openid/](https://svn.wso2.org/repos/wso2/carbon/platform/branches/turing/products/is/4.6.0/modules/samples/openid/)

# php - 选择框的onchange事件

> ID：10122047
> 
> 赞同：1
> 
> 时间：2012-04-12T10:47:41.337
> 
> 标签：php, javascript, html

我正在使用选择框来显示数据库中的“企业”列表。但是 onchange 事件没有触发。但是当我手动输入查询字符串的值时，它就会开始工作。我不明白为什么会这样。

我是 javascript 和 php 的新手，请建议我解决这个问题。

```
<select id="enterprisebox" onchange="javascript:valueselect()" >
    <option value="-">-</option>

    <?php foreach($enterprise as $val) { ?>
    <option value="<?php echo $val['customer_id'];?>"><?php echo $val['customer_name']?>
    </option>
    <? } ?>

</select> 
```

我的 javascript 是——

```
function valueselect()
{
    var i = document.getElementById('enterprisebox');
    var p = i.options[i.selectedIndex].value;
    //alert(p);
    window.location.href = "channelinformation.html?selected="+p;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T10:51:52.433

`onchange="javascript:valueselect()"`用。。。来代替`onchange="valueselect(this.value);"`

```
function valueselect(myval)
{
      window.location.href = "channelinformation.html?selected="+myaval;
} 
```

可以直接使用

```
onchange="window.location='channelinformation.html?selected='+myaval" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T10:53:17.580

让生活更轻松并使用 jQuery：

```
$(document).ready(function () {  
    $('#enterprisebox').change(function () {
       window.location.href = "channelinformation.html?selected="+ $(this).val();
    });    

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T11:25:32.193

尝试这个，

```
<select id="enterprisebox" onchange="javascript:valueselect(this)" >
    <option value="-">-</option>

    <?php foreach($enterprise as $val) { ?>
    <option value="<?php echo $val['customer_id'];?>"><?php echo $val['customer_name']?>
    </option>
    <? } ?>

</select>

<script>
   function valueselect(sel) {
      var value = sel.options[sel.selectedIndex].value;
      window.location.href = "channelinformation.html?selected="+value;
   }
</script> 
```

# sql - EXECUTE AS 和 OPENROWSET 批量加载

> ID：10122053
> 
> 赞同：0
> 
> 时间：2012-04-12T10:47:57.683
> 
> 标签：sql, sql-server, sql-server-2008

我已经创建了一个存储过程作为具有管理员权限的用户并包括

```
WITH EXECUTE AS SELF 
```

然后我试图用一个没有权限的用户执行存储过程，试图冒充管理员用户。

但它错误地返回说用户没有使用批量加载的权限。

反正围绕这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:52:36.957

您可以使用此查询来查找过程的“自我”主体的 ID：

```
select  execute_as_principal_id 
from    sys.sql_modules 
where   object_id = object_id('YourProcedureName') 
```

对我来说，这是`null`大多数时候，这似乎不应该工作。试试这个：

```
WITH EXECUTE AS 'UserWhoHasAdminRights' 
```

或作为 DBO 执行：

```
WITH EXECUTE AS OWNER 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T10:56:06.843

我想管理员用户可以执行 proc，对吧？

你能展示你是如何打电话的吗？

因为 EXECUTE AS SELF 意味着以用户调用 proc 的身份执行，所以你必须`EXECUTE AS USER = 'user_with_permission'`在调用 proc 之前做一些事情

# android - 从距离计算经度

> ID：10122055
> 
> 赞同：0
> 
> 时间：2012-04-12T10:48:00.683
> 
> 标签：android, gps, distance, latitude-longitude

找到了很多关于如何按纬度/经度计算距离的问题的答案，而对于“反向”问题却一无所获。

我在 X 和 Y 上有一个位移和一个 GPS 点（纬度/经度），但需要计算一个新点的坐标。

使用公式：

```
double deltaLat = dy / EARTH_RADIUS; 
double deltaLon = dx / EARTH_RADIUS;
double lat = locLat + Math.signum(dy) * Math.toDegrees(deltaLat); // formula correct
double lon = locLon + Math.signum(dx) * Math.toDegrees(deltaLon); 
```

计算纬度是准确的，但对于经度，我得到大约 10-15% 的误差。有没有人有同样的问题？通过位移计算经度的任何可能的公式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:14:21.250

经度出现 10-15% 误差的原因是，对于经度，您不能使用地球的半径来计算位移。相反，您需要使用相应纬度的“圆”的半径。因此，使用您的公式，您的经度计算应该更像

```
double deltaLon = dx / (EARTH_RADIUS * cos(locLat)) 
```

但是，这可能会给您在极点周围带来不希望的结果，因为它`cos(locLat)`会接近 0，因此您可能希望对极点（甚至在它们周围）有一些特殊情况。从逻辑上讲，如果你想一想，如果你在极点，沿着 x 轴移动任何距离都不会让你到达任何地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:34:46.417

最简单但不是最好的解决方案是：

```
double deltaLat = dy / EARTH_RADIUS; // up-down
double deltaLon = dx / EARTH_RADIUS ; // left-right
double lat = locLat + Math.signum(dy) * Math.toDegrees(deltaLat); // formula correct
double lon = locLon + Math.signum(dx) * Math.toDegrees(deltaLon * 1.195); 
```

# html - 网站 - 如何为图像制作信息按钮

> ID：10122056
> 
> 赞同：0
> 
> 时间：2012-04-12T10:48:03.057
> 
> 标签：html, image, web, minecraft

我想知道您如何在网站上为图像制作信息按钮。就像单击信息按钮后，鼠标旁边会出现一个框，告诉您鼠标悬停在哪个图像上。这将适用于该网站：`http://108.171.192.123:8123/`。我想（点击一个按钮）告诉你什么是什么块。

注意： - 这几张图片不能做成位图 - 任何可能有用的代码片段都是有用的 - 我会接受的任何网站语言（例如，如果需要，我可以学习它）。- 非常感谢那些回答的人。- 该网站是我的Minecraft服务器的地图（它将是空白的ATM）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:04:22.923

动态鼠标悬停效果是通过使用 JavaScript 实现的。我建议学习[jQuery](http://jquery.com/ "jQuery")，这是一个使用 widley 的 JavaScript 库，它允许为您的静态 html 设置动画。

# php - 字符串剪切，在第一个空格字符处修剪

> ID：10122060
> 
> 赞同：0
> 
> 时间：2012-04-12T10:48:13.137
> 
> 标签：php, string

我正在尝试从数据库中选择值并将每个值放在单独的**文本输入字段中**。我的代码工作正常，但是，当我尝试在文本字段上显示字符串时，字符串在其第一个**空格字符处被****剪切**或修剪。例如：

 **```
value #1: "my-picture.jpg"

value #2: "my name" 
```

如果我将上面的两个值放入文本字​​段中，输出将是这样的：

```
value #1: my-picture.jpg
value #2: my 
```

这是我正在处理的代码：

```
<?php 
$counter = 0;
while ($newArray = mysqli_fetch_array($res, MYSQLI_ASSOC)) {
echo "
<input type='text' value=".$newArray['my_picture'].">
<input type='text' value=".$newArray['my_name'].">
";
?> 
```

怎么了？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T10:50:31.467

您需要在 HTML 表单中引用您的值：

```
echo '
<input type="text" value="'.$newArray['my_picture'].'">
<input type="text" value="'.$newArray['my_name'].'">
'; 
```

[`htmlentities()`](http://php.net/htmlentities)同样，为了更好地衡量，使用或[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)在变量中的值上对特殊字符进行编码是个好主意：

```
echo '<input type="text" value="' . htmlentities($newArray['my_picture']) . '">
      <input type="text" value="' . htmlentities($newArray['my_name']) . '">'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T10:51:26.663

尝试查看源代码.. 那说：

```
<input type='text' value=the content of your variable> 
```

自然，“变量的内容”需要用引号括起来。所以; 将其更改为：

```
<?php 
$counter = 0;
while ($newArray = mysqli_fetch_array($res, MYSQLI_ASSOC)) {
    echo '<input type="text" value="' . $newArray['my_picture'] . '">';
    echo '<input type="text" value="' . $newArray['my_name'] . '">';
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T10:51:01.457

你需要用引号包围你的价值。就像是

```
echo "
  <input type='text' value='".$newArray['my_picture']."'>
  <input type='text' value='".$newArray['my_name']."'>
"; 
```**

# sql - 在 sql server 中使用批处理方式插入问题

> ID：10122062
> 
> 赞同：0
> 
> 时间：2012-04-12T10:48:19.593
> 
> 标签：sql, tsql, sql-server-2005

```
 CREATE  TABLE  #Tempcard
          (
          Clubcard BIGINT NULL,
         DateTime DATETIME NULL 
          ) 

    WHILE 1=1
BEGIN
       WITH EventsTop1000 
       AS
       (
       SELECT  top 200 Clubcard,DateTime 
       FROM  Clubcard 
       WHERE(DATEDIFF(DAY ,Clubcard.DateTime ,getdate())>120))
       DELETE EventsTop200
        OUTPUT DELETED.* 
        INTO #Tempcard;
        IF (@@ROWCOUNT = 0)
        BREAK;
END 
```

在这里，我正在做批量插入。一旦我将记录插入到`#Tempcard`表中，我不想从表中删除数据`Clubcard`，但我需要从中获取下一组数据，`Clubcard`然后再次将数据插入到`#Tempcard`。

如果我的记录是 1020，我可以看到只有 1000 条记录被插入，其余 20 条没有被插入。

请让我知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:58:18.263

如果我理解正确，您希望将行数四舍五入为 200：

```
insert into #Tempcard
select top (select count(*) / 200 * 200 from Clubcard)
       Clubcard,
       DateTime 
FROM  Clubcard 
WHERE DATEDIFF(DAY, Clubcard.DateTime, getdate()) > 120 
```

您可能会考虑使用 order by 来保持一致。

如果您说您无法将 Clubcard 中的所有记录插入#tempcard，我已经尝试过了，它可以正常工作。#tempcard 有 1020 条记录。我不得不将 CTE 名称更改为 EventsTop200。

**更新：**问题澄清。

如果 Clubcard 可以有空值，则将真正的主键添加到临时表 #Tempcard。使用 t-sql 代码批量复制表：

```
CREATE  TABLE  #Tempcard
(
    Clubcard BIGINT NOT NULL PRIMARY KEY,
    DateTime DATETIME NULL 
)

declare @StartClubCard bigint
set @StartClubCard = 0

WHILE 1 = 1
BEGIN
   INSERT INTO #Tempcard
   SELECT TOP 200 Clubcard, DateTime
     FROM Clubcard 
    WHERE DATEDIFF(DAY, Clubcard.DateTime, getdate()) > 120
      AND Clubcard > @StartClubCard
    ORDER BY Clubcard

   IF @@ROWCOUNT = 0
      BREAK;
   select @StartClubCard = max (Clubcard)
     from #Tempcard
END 
```

可能有问题。#Tempcard 可能会丢失在程序批量复制其位置后插入的记录，或者可能在复制后删除记录。

# clojure - 无法根据嵌套字段在 clojure 中对 MAP 进行排序

> ID：10122065
> 
> 赞同：2
> 
> 时间：2012-04-12T10:48:31.560
> 
> 标签：clojure

我正在尝试根据“col_nm”字段对下面的地图（Clojure）进行排序，但无法这样做。

```
{:Mawb {:user_val "3", :col_nm "1"}, 
 :HawbDate {:user_val "", :col_nm "3"}, 
 :EtlBatchID {:user_val "1", :col_nm "2"}} 
```

输出应该是：

```
{:Mawb {:user_val "3", :col_nm "1"}, 
 :EtlBatchID {:user_val "1", :col_nm "2"}, 
 :HawbDate {:user_val "", :col_nm "3"} } 
```

任何人都可以帮助我，提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T10:57:28.493

试试这个：

```
(def m {:Mawb {:user_val "3", :col_nm "1"},
        :HawbDate {:user_val "", :col_nm "3"},
        :EtlBatchID {:user_val "1", :col_nm "2"}})

(sort-by (comp :col_nm second) m)
=> ([:Mawb {:user_val "3", :col_nm "1"}]
    [:EtlBatchID {:user_val "1", :col_nm "2"}]
    [:HawbDate {:user_val "", :col_nm "3"}]) 
```

# android - 如何将“Android”手机屏幕捕获为视频并将其存储在 SD 卡中。不想截图

> ID：10122071
> 
> 赞同：2
> 
> 时间：2012-04-12T10:48:53.370
> 
> 标签：android, video, screen, video-encoding

这是我在这个网站上的第一个问题..！我猜相当艰难..！

实际上我想在一段时间内捕获手机屏幕（不是模拟器），比如 15 分钟并将其保存在 SD 卡中。我用谷歌搜索并了解了 Rooting。Rooting 对我来说不是一个限制。我要截屏 我不知道该怎么做

我只需要您的宝贵建议：

*   我如何确定手机是否具有来自我的应用程序的 root 访问权限..？
*   我怎样才能读取每一帧并记录它..？

    ```
     - Share your suggestions please..! 
    ```

谢谢 - 莫汉库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:23:42.790

[在这里](http://www.pocketmagic.net/?p=1473)，您将找到直接从帧缓冲区读取的示例代码。您仍然需要将屏幕截图转换为视频。您可以[在此处](https://stackoverflow.com/questions/2645041/ffmpeg-for-a-android-using-tutorial-ffmpeg-and-android-mk)查找如何执行此操作的指针。

# delphi - dbExpress/未指定密钥

> ID：10122073
> 
> 赞同：6
> 
> 时间：2012-04-12T10:49:02.340
> 
> 标签：delphi, delphi-7, firebird, dbexpress

我正在使用 dbExpress 组件（Delphi 7）开发一个数据库程序。通过以下组件从数据库中检索数据：TSQLDataSet -> TDataSetProvider -> TClientDataSet -> TDatasource -> TDBEdit。到目前为止，该表单已正常工作。TSQLDataset 中的查询是

```
select id, name, byteken, timeflag from scales where id = :p1 
```

我在数据库表中添加了一个大的（2048）varchar 字段；当我将此字段添加到上述查询（并将 TDBMemo 或 TDBRichEdit）连接到 TDatasource）时，当我尝试编辑新文本字段中的值时收到以下消息

```
Unable to find record. No key specified. 
```

当表单上没有 TDBMemo 时（但查询中有 varchar 字段），我得到了同样的错误。一旦我从查询中删除 varchar 字段，一切都会再次正常工作。

这个问题的原因可能是什么？

==== 更多信息 ====

我现在已经在表单中定义了持久字段。保存表键的字段将其提供者标志设置为 [pfInUpdate,pfInWhere,pfInKey]，而所有其他字段的标志设置为 [pfInUpdate,pfInWhere]。这并不能解决问题。

持久字段是在客户端数据集上定义的。当我在 TSQLDataSet 上定义它们时，不会出现有关“未指定键”的错误消息。该程序仍然会发出此错误消息（我之前忽略了）：

```
EDatabase error: arithmetic exception, numeric overflow or string truncation 
```

大字符串字段在“displaywidth”和“size”中具有正确的值。

==== 更多信息 ====

我重写了表单以使用非数据感知组件。一个查询从数据库中检索数据（使用与我在 TSQLDataSet 中使用的完全相同的查询字符串）；然后将数据传输到控件。在用户按下表单上的 OK 按钮后，数据将通过另一个执行更新或插入的查询传递回数据库。由于这可以正常工作，我看不出数据感知组件有什么问题。

==== 又一个信息片段 ====

我在 Stack Overflow 上发现[了这个问题](https://stackoverflow.com/questions/3356560/string-truncation-on-transfer-to-clientdataset)，似乎解决了类似的问题。我将查询更改为

```
select id, name, name, byteken, timeflag, 
cast (constext as varchar (2048)) as fconstext
from scales
where id = :p1 
```

并将 dbMemo 的数据字段设置为“fconstext”。向 dbMemo 添加文本后，“applyupdates”调用现在失败并显示以下消息

```
column unknown 'fconstext' 
```

尽管有一个使用该名称创建的持久字段。

我不知道这是否有助于或只是使水浑浊。

==== 更多信息，4 月 23 日 ====

我从数据库表中删除了该字段，然后将其添加回来。只要输入到有问题的数据字段中的字符串少于大约 260 个字符，所编写的程序就可以正常工作。我一次添加了十个字符几次都没有问题，直到字符串长度为 256。然后我添加了更多字符（不计算），尝试保存 - 并得到了错误。从这一点开始，尝试再添加**一个字符**会导致错误消息（出现在 clientdataset 的“applyupdates”方法中）。

最初，该字段包含 832 个字符，因此我可以成功存储的字符数没有硬性限制。但是一旦出现错误信息，它总是出现，好像数据库记得有错误一样。

==== 更多信息，4 月 24 日 ====

再一次，我从数据库中删除了该字段，然后将其添加回来；字符集是 WIN1251，原因我现在还不清楚（我不需要西里尔字符）。无论字段本身是如何定义的，我可以使用**数据感知控件**输入的最大字符数似乎约为 280。

此后，我开始在发生此问题的实际程序中使用**非数据感知控件**，并且我可以向您保证，那里不存在此限制。因此，我相当确定问题不是由于字符大小不匹配造成的，正如所建议的那样。不要忘记我使用的是 Delphi 7，它没有 unicode 字符串。我认为其中一个组件存在错误，但由于我使用的是旧版本，我想问题已经解决，但不是在我使用的版本中。

==== 希望最终编辑，25/04/12 ====

按照蚊子的建议，我创建了一个默认字符集为 WIN1252 的新数据库（UTF-8 没有作为选项出现，而且无论如何我的程序不是 unicode）。在这个干净的数据库中，我定义了一个表，其中“constext”字符串的字符集也被定义为 WIN1252。我运行了有问题表单的数据感知版本，并且能够毫无问题地输入文本（目前超过 1700 个字符）。

因此，问题似乎是由为数据库定义一个字符集和为字段定义一个字符集造成的。我不知道如何回顾数据库的默认字符集被定义为什么，所以我无法确认这一点。

我现在有定义一个新数据库（有 50 多个表）并从原始数据库复制数据的小问题。由于这个数据库是为客户的旗舰产品服务的，所以我对这样做有些谨慎......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:36:34.970

检查`UpdateMode`提供者的财产。如果它设置为`upWhereChanged`或者`upWhereKeyOnly`您需要数据库表中的一个键才能正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T08:31:04.177

**找不到记录。未指定密钥。**

从 id = :p1 的尺度中设置选择 id、name、byteken、timeflag

到

从 id = 245 的尺度中选择 id、name、byteken、timeflag

设计时的现有 id。

* * *

**to casts** cast (consttext as varchar (2048))..... 如果更改列的定义，则该列类型的现有 CAST 可能会变得无效

**算术异常、数值溢出或字符串截断**

1.  **字符串截断** 当连接的字符串不适合底层 CHAR 或 VARCHAR 数据类型大小时会发生这种情况。如果结果进入表列，则可能是一个有效错误。或者，也许您真的需要**增加**列大小。类似的情况也适用于**存储在存储过程或触发器变量中的中间值**。

2.  **字符转写失败** 当您将数据库中的数据存储在一个字符集中，但转写为所需字符集失败时，会发生这种情况。字符集音译发生的地方有很多。有一个自动的：您从数据库中检索的每条数据（通过 SELECT 或其他方式）都从**数据库**表列的字符集音译为**连接字符集**。如果字符集差异太大，将有两种翻译：首先从列字符集到 Unicode，然后从 Unicode 到连接字符集。此外，您可以通过将列转换为另一个字符集来手动请求音译，例如：CAST(column_name AS varchar(100) character set WIN1251)。 **原因**音译可能失败的原因是某些字符集中不存在某些字符。例如，WIN1252 不包含任何西里尔字符，因此如果您使用连接字符集 WIN1252 并尝试从带有西里尔字符的列中选择，您可能会收到此类错误。在现代，最好在您的应用程序中使用 Unicode 或 UTF8 以及 UTF8 连接字符。并确保您至少使用**Firebird 2.0**，支持 UTF8。

3.  **使用 DotNetFirebird 时的参数顺序错误 使用 DotNetFirebird 时** 将参数添加到 FbCommand 的顺序可能会导致 -303 异常，并提示“算术异常、数字溢出或字符串截断”。参数的顺序必须符合存储过程中参数的顺序 - 否则将引发异常。示例（.NET、C#、DotNetFirebird（使用 FirebirdSql.Data.FirebirdClient；））

    FbCommand CMD = new FbCommand("TBLTEXT_ADDTEXT", cnn); CMD.Parameters.Add("TEXT1", FbDbType.VarChar, 600).Value = strText1; CMD.Parameters.Add("TEXT2", FbDbType.VarChar, 600).Value = strText2; CMD.CommandType = CommandType.StoredProcedure; CMD.ExecuteNonQuery(); 如果“TBLTEXT_ADDTEXT”过程中的参数顺序与您将参数添加到 FbCommand-Object 的顺序不同，您将收到 -303 错误。

4.

> ***No'am Newman 说***但是一旦出现错误信息，它总是出现，好像数据库记得有错误一样。

不记得了；数据库损坏了！！！

* * *

只要您无法更改数据库字符集并且总是尝试在损坏的表中删除和添加字段，就很难解决问题。1\. 对于每个新测试，必须创建一个新数据库（提示：创建一个并复制 x 次）。2\. 以**纯文本设置的字段，而不是**原始字段中存储的西里尔字符；你看不到它们，但它们就在那里。3.设置varchar(8191)和数据库PAGE_SIZE为8192。实际使用UTF8的VARCHAR最大长度为8191

**创建数据库语句：**

```
CREATE DATABASE localhost:mybase
  USER SYSDBA
  PASSWORD masterkey
  PAGE_SIZE 8192
  DEFAULT CHARACTER SET UTF8;
  SET NAMES ISO8859_1;

CREATE TABLE scales (
  ID ...,      
  byteken VARCHAR(8191) COLLATE DE_DE,
  .... 
```

**排序规则**

没有默认排序规则。因此，您应该为要用于排序 (ORDER BY) 或比较 (UPPER) 的每个字段定义一个排序规则：

您还可以使用 ORDER BY 子句指定排序规则：

```
ORDER BY LASTNAME COLLATE FR_CA, FIRSTNAME COLLATE FR_CA 
```

或使用 WHERE 子句：

```
WHERE LASTNAME COLLATE FR_CA = :lastnametosearch 
```

**统一码**

火鸟 2.0。以上。现在有了新的 UTF8 字符集，可以正确处理 UTF-8 格式的 Unicode 字符串。Unicode 排序算法已经实现，所以现在您可以使用 UPPER() 和新的 LOWER() 函数**，而无需指定排序规则。**

# android - android从服务注册到内容观察者

> ID：10122077
> 
> 赞同：3
> 
> 时间：2012-04-12T10:49:20.213
> 
> 标签：android, service, android-contentprovider

我只是想了解 android 服务和内容观察者。

因此，我尝试了一个程序，在该程序中，我的活动启动了一项服务，并在服务中注册到 CONTACTS URI，以便在联系人数据库更改时得到通知。

我朗读我的程序，我可以看到这个服务出现在应用程序 -> 运行服务下。现在我尝试添加一个联系人，我的观察者收到通知。如果我再次编辑联系人，它不会收到通知。如果我编辑联系人，这只是在运行我的程序后第一次，内容观察者会收到通知请在下面查看我的代码详细信息

启动服务的主要活动：

```
public class ContactChangeOberverServiceActivity extends Activity {
    /** Called when the activity is first created. */
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Log.i("Start","Service");
        startService(new Intent(this, MyService.class));
    }
} 
```

服务 ：

```
public class MyService extends Service {

    private static final String TAG = "MyService";

    @Override
    public void onCreate() {
        Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onCreate");
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.d(TAG, "onStart");
        ContactObserverActivity observer = new ContactObserverActivity(new Handler());
        observer.register(getApplicationContext());
        return  super.onStartCommand(intent, flags, startId);
    }

    public boolean deliverSelfNotifications() {
        return true;
    }
} 
```

观察者是：

```
@Override
public void onChange(boolean selfChange) {
    // TODO Auto-generated method stub
    // super.onChange(selfChange);
    Log.e(TAG, "Onchange Called");
    //MainActivity.takeContactBackup();
    Intent intent = new Intent (ctx,ContactsExtractorActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    ctx.startActivity(intent);
}

/ TODO Auto-generated constructor stub
}

public void register(Context ctx) {
    Log.e(TAG, "Registering");
    this.ctx = ctx;
    curval = ctx.getContentResolver().query(
            ContactsContract.Contacts.CONTENT_URI, projection, null, null,
            null);
    curval.registerContentObserver(new ContactObserverActivity(
            new Handler()));
    Log.e(TAG, "Registered");
} 
```

请帮助我了解此行为及其修复方法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T13:27:33.050

使用这个 URI：

> ContactsContract.CommonDataKinds.Phone.CONTENT_URI

为我工作！

# excel - 在每个单元格数据的开头和末尾添加“”

> ID：10122079
> 
> 赞同：1
> 
> 时间：2012-04-12T10:49:30.747
> 
> 标签：excel

我有一个相当大的 Excel csv 文件，我需要将其添加`"`到`"`每个单元格的开头和结尾。

单元格包含混合文本，无论是

*   数字
*   文本
*   链接

等等，所有这些我都需要在每个单元格的开头和结尾添加引号。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:05:48.990

用手：

*   将第一个单元格值更改为 `=""""&A1&""""`
*   将此单元格格式拖动到整页

或通过 vb 宏

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:11:31.177

我已经从[Excel 中改编了这段代码，在公式栏中显示前导零](https://stackoverflow.com/questions/9644789/excel-show-leading-zero-in-formula-bar/9644880#9644880)

它使用变体数组来提高速度，只更新`UsedRange`电子表格的一部分

*   同时按 Alt 和 F11 进入 VBE
*   插入模块
*   复制并粘贴下面的代码
*   同时按 Alt 和 F11 返回 Excel
*   从开发人员选项卡运行宏

如果您愿意，它可以适应忽略空白单元格 - 让我知道

```
Sub AddStrings()
Dim rng1 As Range
Dim rngArea As Range
Dim strRep1 As String
Dim strRep2 As String
Dim lngRow As Long
Dim lngCol As Long
Dim lngCalc As Long
Dim X()

strRep1 = """"
strRep2 = """"

ActiveSheet.UsedRange
Set rng1 = ActiveSheet.UsedRange

'Speed up the code by turning off screenupdating and setting calculation to manual
'Disable any code events that may occur when writing to cells
With Application
    lngCalc = .Calculation
    .ScreenUpdating = False
    .Calculation = xlCalculationManual
    .EnableEvents = False
End With

'Test each area in the user selected range

'Non contiguous range areas are common when using SpecialCells to define specific cell types to work on
For Each rngArea In rng1.Areas
    'The most common outcome is used for the True outcome to optimise code speed
    If rngArea.Cells.Count > 1 Then
        'If there is more than once cell then set the variant array to the dimensions of the range area
        'Using Value2 provides a useful speed improvement over Value. On my testing it was 2% on blank cells, up to 10% on non-blanks
        X = rngArea.Value2
        For lngRow = 1 To rngArea.Rows.Count
            For lngCol = 1 To rngArea.Columns.Count
                'replace the leading zeroes
                X(lngRow, lngCol) = strRep1 & X(lngRow, lngCol) & strRep2
            Next lngCol
        Next lngRow
        'Dump the updated array sans leading zeroes back over the initial range
        rngArea.Value2 = X
    Else
        'caters for a single cell range area. No variant array required
        rngArea.Value = strRep1 & rngArea.Value2 & strRep2
    End If
Next rngArea

'cleanup the Application settings
With Application
    .ScreenUpdating = True
    .Calculation = lngCalc
    .EnableEvents = True
End With

End Sub 
```

# ruby-on-rails - rails 3.1 每当 gem 在开发中工作但不在生产中时。为什么？

> ID：10122083
> 
> 赞同：2
> 
> 时间：2012-04-12T10:49:46.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, whenever, rails-3.1

Rails 3.1 + 每当宝石。我在任何时候安排了 2 个工作。然而，显然什么也没有发生。我已经通过 Heroku 控制台尝试了这些方法，并且它们有效。所以我认为他们在任何时候都不会被解雇。我错过了什么吗？

配置/schulde.rb

```
every 1.day, :at => '03:30' do
 runner "Alarm.proba"
end

every 1.day, :at=> '3:32 am' do
 runner "Alarm.proba2"
end 
```

报警型号

```
def self.proba
 @event = Event.find(10)
 @user =User.find(12)
 EventNotifier.alarm(@event, @user).deliver
end

def self.proba2
 @event = Event.find(10)
 @user =User.find(13)
 EventNotifier.alarm(@event, @user).deliver
end 
```

$ crontab -l

```
# Begin Whenever generated tasks for: quasi
5 4 * * * /bin/bash -l -c 'cd /Users/sergioabendivar/railsProjects/Tutos/quasi && script/rails runner -e production '\''Alarm.proba'\'''

5 4 * * * /bin/bash -l -c 'cd /Users/sergioabendivar/railsProjects/Tutos/quasi && script/rails runner -e production '\''Alarm.proba2'\''' 
```

我认为它正在开发中，因为我的控制台现在显示“你有一封电子邮件”。实际上，如果我检查电子邮件，我会收到很多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T19:13:56.970

改用 Heroku 调度程序：[https ://devcenter.heroku.com/articles/scheduler](https://devcenter.heroku.com/articles/scheduler)

# php - Wordpress 高级摘录 - 在“阅读更多”链接中使用图像，使用获取 bloginfo

> ID：10122085
> 
> 赞同：0
> 
> 时间：2012-04-12T10:49:48.470
> 
> 标签：php, wordpress

我正在尝试在我的摘录“阅读更多”链接中输出自定义图像。

像这样...

![在此处输入图像描述](../Images/e0be3149bc99e9b133389cdcf4551f9b.png)

我正在使用高级 exceprt 插件，因为它可以根据我的需要进行定制。

这就是我尝试在阅读更多链接中输出带有图像的摘录的方式...

```
<?php the_advanced_excerpt('length=120&use_words=0&no_custom=0&ellipsis=%26hellip;&read_more=read more <img src"' . get_bloginfo('template_url') . '"/images/readmore-arrow.png" alt="" />&add_link=1'); ?> 
```

但奇怪的是它输出了这个阅读更多链接......

![在此处输入图像描述](../Images/3d696fad55a1999bebee8f9e3d53e5a2.png)

我似乎分解了图像位置的 URL 并像这样输出它......

```
<img alt="" readmore-arrow.png"="" images="" my-theme-name"="" themes="" wp-content="" wp="" mywebsitename.co.uk="" src"http:=""> 
```

谁能帮我解决这个问题？

谢谢

* * *

工作代码...

```
<?php the_advanced_excerpt('length=120&use_words=0&no_custom=0&ellipsis=%26hellip;&rea‌​d_more=read more <img src="' . get_bloginfo('template_url') . '/images/readmore-arrow.png" alt="" />&add_link=1'); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:16:17.943

我不确定这是否会为您解决问题，因为我没有使用该插件，但您缺少一个`=`for`src`属性。我在这里添加了它：

```
<?php the_advanced_excerpt('length=120&use_words=0&no_custom=0&ellipsis=%26hellip;&read_more=read more <img src="' . get_bloginfo('template_url') . '"/images/readmore-arrow.png" alt="" />&add_link=1'); ?> 
```

# c# - 如何在 C# 中将参数传递给 Windows 服务？

> ID：10122086
> 
> 赞同：3
> 
> 时间：2012-04-12T10:49:53.430
> 
> 标签：c#, windows-services

我只想知道如何将参数传递给 Windows 服务。问题是，我开发了一个 Windows 应用程序，然后从 Onstart() 方法调用它。现在，我想从另一个项目中调用特定的函数。

```
 protected override void OnStart(string[] args)
        {

            Process.Start("C:\\Program Files\\macro.exe");

        } 
```

我想在 macro.exe 项目中使用 arguments 调用一个函数。有什么建议么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T10:59:27.237

如果要使用传递给服务的参数，可以尝试：

```
Process.Start(@"C:\Program Files\macro.exe", String.Join(" ", args)) 
```

请注意，使用@Tudor 答案，您可以更好地控制已启动的进程、重定向输入/输出/错误、显示/隐藏窗口和许多其他好东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:25:53.633

我想知道你是否可以在另一个EXE中调用一个函数。也许您可以制作一个通用 DLL 并在 macro.exe 和您自己的应用程序中引用它。如果那不是一个选择，那么您可以使用套接字或文件系统与 EXE 进行通信。例如。您传递您的 EXE 2 命令行参数“MyFunction”，“Hello”，如上面之前的评论所示，Exe 获取这些参数推断它需要使用参数 Hello 调用 MyFunction 并取回 EXE 将其写入预定义的结果路径，您从文件中读取它。

如果 Exe 正在运行并且您无法将命令行传递给它，那么可能是 Exe 不断扫描输入文件以从外部资源（如您的应用程序）获取命令。或者更好的是，它侦听您向其发送命令的端口。

我不确定是否还有其他更直观的解决方案。

# ios - 将 .otf 字体添加到 iphone 应用程序

> ID：10122087
> 
> 赞同：10
> 
> 时间：2012-04-12T10:50:02.370
> 
> 标签：ios, fonts, truetype

我正在尝试在我的应用程序中使用自定义 .otf 字体，但不起作用，我尝试了 .ttf 字体并且可以工作，但 .otf 没有，任何人都可以帮助我吗？有没有办法添加.ot​​f 字体？我阅读了很多添加字体的指南，但是对于 .otf 不起作用，这是字体：

[http://www.fontsquirrel.com/fonts/Lobster](http://www.fontsquirrel.com/fonts/Lobster)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-01T23:21:49.923

您需要确保使用正确的字体名称。这很棘手。尝试在 mac 中使用 fontbook 打开字体，或者在 windows 中使用等效的字体。在 Mac 上，当您在 fontbook 中打开字体时，您应该能够在“PostScript 名称”下看到确切的名称：

![字体册中的 OTF 字体示例](../Images/a29e05896b44f1aaff9f21a7340e7797.png)

然后，假设您已将[字体正确添加到项目](http://richardwarrender.com/2010/08/custom-fonts-on-ipad-and-iphone/)中，您应该尝试使用它。例如，如果你有一个`*myTextField`指向a 的指针`UITextField`，并且你想使用 DIN-Medium 13pt，你可以像这样设置你的自定义字体：

```
myTextField.font = [UIFont fontWithName:@"DIN-Medium" size:13.0f]; 
```

# algorithm - 500px.com 排名算法

> ID：10122088
> 
> 赞同：4
> 
> 时间：2012-04-12T10:50:06.810
> 
> 标签：algorithm, comments, ranking, rating-system, social-media-like

我最近想知道[http://500px.com](http://500px.com)如何计算他们的“Pulse”评级。“Pulse”是根据照片的受欢迎程度从 1..100 开始的分数。

我认为它可能会使用以下一些标准：

*   点赞数
*   “收藏夹”数量
*   评论数
*   总浏览
*   可能是照片上传后的时间
*   可能还有其他一些*不明显*的标准，例如用户的关注者数量、用户排名、相机型号或类似的

我将如何实现这样的某种算法？

任何有关如何使用此标准（可能还有一些代码）实现算法的建议也将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T11:24:47.893

我对该网站了解不多，但像这样的系统通常以相同的方式工作。标准化一组加权值以产生单个可比较值。

定义您的规则列表，根据重要性对它们进行加权，然后将它们一起运行以获得最终值。

在这种情况下，它会是这样的。

1.  总访问次数 = 10%
2.  点赞总数 = 10%
3.  访问次数/点赞数 = 40%（人气 = 点赞的访问者百分比）
4.  过去 30 天的点赞数 = 20%（当前受欢迎程度）
5.  作者评分 = 20%

现在我们需要标准化这些规则的值。根据您的数据是什么、数字的比例等，这对于每个规则都会有所不同，因此我们需要一个可行的值，比如 1 到 100 之间。

上述规范化示例：

1.  = 50,000 次访问中访问者的百分比（良好的访问次数）

    `(vists / 50000 ) * 100`

2.  = 10,000 个喜欢中的喜欢百分比（喜欢的好数量）

    `(likes / 10000) * 100`

3.  = 喜欢它的访问者的百分比

    `(likes / vists) * 100`

4.  = 1,000 次喜欢中过去 30 天的喜欢百分比（30 天内的喜欢数量不错）

    `(likesIn30Days / 1000) * 100`

5.  =作者的任意评级

确保所有这些都具有 100 的最大值（如果超过了，则将其降低）。然后我们需要根据它们的权重将所有这些组合起来：

**人气**=`(1 * 0.1) + (2 * 0.1) + (3 * 0.4) + (4 * 0.2) + (5 * 0.2)`

这一切都在我的脑海中，而且很粗糙。显然还有更有效的方法，因为您不需要在每个阶段都标准化为百分比，但我希望它可以帮助您了解要点。

**更新**

我真的没有任何参考资料或额外阅读。我从来没有真正将它作为一个更大的概念来使用，只是在小型实现中。

我认为您阅读的大部分内容将是一般的方法排名系统和理论。因为根据你的规则和数据格式，你的实现会有很大的不同。这似乎是一个巨大的概念，实际上它可能会归结为大约 10 行代码，不包括聚合数据。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T16:41:19.160

您可能还想参考以下内容

*   [Reddit 排名算法的工作原理](http://amix.dk/blog/post/19588)
*   [黑客新闻排名算法的工作原理](http://amix.dk/blog/post/19574)
*   [如何建立一个你可以引以为豪的流行度算法](http://blog.linkibol.com/2010/05/07/how-to-build-a-popularity-algorithm-you-can-be-proud-of/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-13T20:44:35.947

500px 在他们的博客中解释了他们的（同时过时的）脉冲排名算法： [https ://500px.com/blog/52/how-rating-works-and-why-there-sa-lot-more-to -a-rating-than-just-a-数字](https://500px.com/blog/52/how-rating-works-and-why-there-s-a-lot-more-to-a-rating-than-just-a-number)

非常有趣，并且与到目前为止 SO 上的解决方案所建议的不同。

# objective-c - MPMoviePlayerViewController 在后台退出后

> ID：10122097
> 
> 赞同：1
> 
> 时间：2012-04-12T10:50:47.277
> 
> 标签：objective-c, ios, mpmovieplayercontroller

当我的应用程序进入后台并返回时，模式视图会关闭。为什么会这样？我尝试打开和关闭暂停。我启用了 ARC，如果它是有用的信息。

```
MPMoviePlayerViewController * player = [[MPMoviePlayerViewController alloc] initWithContentURL:targetURL];
[player.moviePlayer prepareToPlay];
[self presentMoviePlayerViewControllerAnimated:player]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-16T21:55:28.817

万一其他人偶然发现了这一点（就像我在找到自己的解决方案之前所做的那样），我可以`MPMoviePlayerViewController`通过将其子类化并将其作为以下观察者删除来防止在应用程序背景时退出`UIApplicationDidEnterBackgroundNotification`：

```
- (id)initWithContentURL:(NSURL *)contentURL {

    self = [super initWithContentURL:contentURL];

    if (self){

        [[NSNotificationCenter defaultCenter] removeObserver:self name:UIApplicationDidEnterBackgroundNotification object:nil]; 

    }

    return self;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-18T22:32:33.830

您不需要子类化`MPMoviePlayerViewController`- 只需在创建`MPMoviePlayerViewController`实例后执行以下操作。

```
[[NSNotificationCenter defaultCenter] removeObserver:self.moviePlayerViewController name:UIApplicationDidEnterBackgroundNotification object:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:43:00.297

这是可以帮助您的完整代码

```
// Call this to start initialization and play movie
-(void)prepareMoviePlayer:(NSURL *)moviePath
{
    moviePlayerViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:moviePath];

    if ([[moviePlayerViewController moviePlayer] respondsToSelector:@selector(loadState)])
    {
        [[moviePlayerViewController moviePlayer] setControlStyle:MPMovieControlStyleNone];
        [[moviePlayerViewController moviePlayer] setFullscreen:YES];
        [[moviePlayerViewController moviePlayer] prepareToPlay];
        [[NSNotificationCenter defaultCenter] addObserver:self
                                              selector:@selector(moviePlayerLoadStateDidChange:)
                                              name:MPMoviePlayerLoadStateDidChangeNotification
                                              object:nil];
    }
}

- (void) addPlayer
{
    [[[moviePlayerViewController moviePlayer] view] setFrame:self.view.bounds];
    [[self view] addSubview:[[moviePlayerViewController moviePlayer] view]];
}

static NSTimeInterval t;
// Call this on applicationWillResignActive
-(void) pauseMovieInBackGround
{
    [[moviePlayerViewController moviePlayer] pause];
    t = [[moviePlayerViewController moviePlayer] currentPlaybackTime];
    [moviePlayerViewController.view removeFromSuperview];
}

// Call this on applicationWillEnterForeground
-(void) resumeMovieInFrontGround
{
    [self addPlayer];

    [[moviePlayerViewController moviePlayer] stop];
    [[moviePlayerViewController moviePlayer] setInitialPlaybackTime:t];
    [[moviePlayerViewController moviePlayer] play];
}

-(void)moviePlayerLoadStateDidChange:(NSNotification *)notification
{
    if([[moviePlayerViewController moviePlayer] loadState] != MPMovieLoadStateUnknown)
    {

        [[NSNotificationCenter defaultCenter] removeObserver:self
                                              name:MPMoviePlayerLoadStateDidChangeNotification
                                              object:nil];

        [self addPlayer];
        [[moviePlayerViewController moviePlayer] play];
    }
}

-(void)videoPlayBackDidFinish:(NSNotification*)notification
{
    [self dismissMoviePlayerViewControllerAnimated];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-10T02:08:19.517

我遇到了这个问题。
我已经尝试过 ChrisH 的答案，但是直到我将 removeObserver 放入 viewDidLoad() 而不是 init() 之前它对我不起作用。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
 // Do any additional setup after loading the view.
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIApplicationDidEnterBackgroundNotification object:nil];

} 
```

然后它工作。好好享受。

# python - 如何组合迭代器？

> ID：10122101
> 
> 赞同：4
> 
> 时间：2012-04-12T10:50:58.783
> 
> 标签：python, function, functional-programming, iterator, generator

我有一个节点网络，在它们之间传递结构化数据。对于我的子问题，我们有这个分支 - 节点的线性序列：

```
nodes = [source, n1, n2, n3, n4] 
```

第一个节点是一个生成器，每个其他节点从输入节点获取值并提供输出值。当前的实现是简单的 get() 从管道和 put() 到管道，每个节点都有单独的线程（这是有原因的）。我想将其更改为`yield`-ing 迭代器。

我想以以下方式评估（如果我们认为节点是可调用的）：

```
for result in n4(n3(n2(n1(source()))):
    print result 
```

我想像这样构建评估上下文：

```
context = src
for node in nodes[1:]:
    context = pipe(context, node)

for result in context:
    print result 
```

**限制：**

我仍然希望能够单独使用节点 - 不是嵌套的，通过其他方式管道数据，因为节点可能位于单独的线程中。示例：`[source, n1,n2]`在一个线程中（可能是嵌套的），在另一个线程中（可能是嵌套的），数据在和`[n3, n4]`之间通过管道传输。案例：可能有一个非线性节点图，我想以这种方式对分支进行分组。`n2``n3`

`node`必须是一个类来保存计算状态

`context`the和 the `pipe(context, node)`might的执行情况如何？或者如果它可以用不同的方式解决，你有什么提示吗？

`yield from`Python 3.3 [(PEP380)](http://www.python.org/dev/peps/pep-0380/)能以任何方式帮助我的案例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:32:01.033

如果您只想组合任意数量的函数（或可调用对象），请使用模块文档中的[`compose_mult`配方。](http://oakwinter.com/code/functional/documentation/cookbook.html)`functional`

一个使用它的解决方案：

```
from functional import compose, foldr, partial
from itertools  import imap
compose_mult = partial(reduce, compose) 
chain_nodes = lambda nodes: imap(compose_mult(nodes[1:]), nodes[0])
chain_gen_nodes = lambda nodes: imap(compose_mult((g.send for g in nodes[1:])), nodes[0])

# equivalent not as a one-liner
#def chain_nodes(nodes):
#    source = nodes[0]
#    composed_nodes = compose_mult(nodes[1:])
#    return (composed_nodes(x) for x in source) 
```

如果节点是接受输入（通过`send`）的生成器，则使用`chain_gen_nodes`提取它们的发送函数。

但是请注意，不允许`send`使用刚启动的生成器（因为它必须位于 a 点`yield`才能接收值）。这是您必须自己处理的事情，例如让您的生成器`yield`在第一次迭代时具有一个虚拟值，并在将它们发送到`chain_nodes`. 或者您可以将节点保留为普通的可调用对象。

如果您确实需要将迭代器推进一步：`next(izip(*nodes[1:]))`

# c - tsearch 和 tfind

> ID：10122106
> 
> 赞同：3
> 
> 时间：2012-04-12T10:51:19.500
> 
> 标签：c, binary-tree, glibc

给定 sizeof(void*) >= sizeof(int)，在树中收集整数是否安全

```
void *map=0; 
tsearch(42, &map, int_cmp); 
```

?

我得到了段错误，除了不常用的用法之外，我没有看到代码中的任何缺陷。

编辑：当然，我不是取消引用指针，只是转换回 int。想法是 int 可以适合 void* 变量，所以我不需要堆分配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T10:57:21.587

[tsearch](http://www.thinkage.ca/english/gcos/expl/c/lib/tsearc.html)的第一个参数必须是一个指针。在这种情况下，数字 42 被解释为指针，因此是段错误。尝试：

```
void *map=0;
int key = 42;  
tsearch(&key, &map, int_cmp); 
```

# sql - 将字符串变量传递给过程并将其添加到查询中

> ID：10122107
> 
> 赞同：0
> 
> 时间：2012-04-12T10:51:25.663
> 
> 标签：sql, sql-server-2008, stored-procedures, concatenation

我有一个用 C# 编写的应用程序，它连接到数据库并分析其数据，数据库存储有关执行自动化测试的信息，我想做的是检索那些满足上述给定条件的测试。但是我们有不同的项目，并且支持的项目越来越多，所以我不想为每个项目构建不同的过程，而是传递名称 - 第二个参数 deploy 作为参数，这样查询将取决于项目并将数据返回到申请，然后我会在报告中发送。

暂时看起来是这样的：

```
CREATE PROCEDURE [dbo].[SuspectsForFalsePositive](@build_id INT, @deploy VARCHAR(25)) 
AS
BEGIN

    SET NOCOUNT ON;

    DECLARE @i int, @build int, @deployname varchar(25), @SQL varchar(max)
    DECLARE @result table (tc int, fp float)
    SET @i = 0
    SET @build = @build_id
    SET @deployname = @deploy

    SET @SQL = 'insert '+@result+'select testcase_id, fail_percentage FROM [BuildTestResults].[dbo].['+@deployname+'TestCaseExecution]
                   where build_id = @build and fail_percentage >= 70'

--INSERT @result select testcase_id, fail_percentage FROM [BuildTestResults]
--.[dbo].[ABCTestCaseExecution]
--where build_id = @build and fail_percentage >= 70
--commented works
    EXEC(@SQL)
    WHILE (@@rowcount = 0)
    BEGIN
    SET @build = @build - 1
    EXEC(@SQL)
--INSERT @result select testcase_id, fail_percentage FROM [BuildTestResults].[dbo]. --[ABCTestCaseExecution]
--where build_id = @build and fail_percentage >= 70
--commented works
    END
    select * from @result order by fp DESC
END
GO 
```

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:54:14.833

在你的字符串中`@build`- 这被解释为一个字符串。在您执行时，`@SQL`它不包含这样的变量，因此您会失败。

您需要直接连接该*值*：

```
SET @SQL = 'insert '+@result+'select testcase_id, fail_percentage FROM [BuildTestResults].[dbo].['+@deployname+'TestCaseExecution]
                   where build_id = '+@build+' and fail_percentage >= 70' 
```

您也需要在执行之间执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:38:36.607

您的示例存在一些问题。然而，这是一个总体考虑。

变量（表和/或标量）仅在定义它们的 StoredProcedure 中可见。调用`EXEC(@SQL)`是调用存储的。这意味着您的@result 表和其他参数都对您正在执行的动态SQL 不可见。

就表而言，您可以通过创建临时表来解决这个问题。对于标量变量，您可以在使用时传递它们`SP_EXECUTESQL`而不是`EXEC`.

我目前无法访问 sql server，但也许像这样的东西可以让你开始......

```
CREATE PROCEDURE [dbo].[SuspectsForFalsePositive](@build_id INT, @deploy VARCHAR(25)) 
AS
BEGIN

  SET NOCOUNT ON;

  DECLARE
    @i          int,
    @build      int,
    @deployname varchar(25),
    @SQL        varchar(max)

  CREATE TABLE #result (
    tc int,
    fp float
  )

  SELECT
    @i          = 0,
    @build      = @build_id,
    @deployname = @deploy

  SET @sql = ''
  SET @sql = @sql + ' INSERT INTO #result'
  SET @sql = @sql + ' SELECT testcase_id, fail_percentage'
  SET @sql = @sql + '   FROM [BuildTestResults].[dbo].['+@deployname+'TestCaseExecution]'
  SET @sql = @sql + '  WHERE build_id = @build and fail_percentage >= 70'

  SP_EXECUTESQL
     @SQL,
     '@build INT',
     @build

  WHILE (@@rowcount = 0)
  BEGIN
    SET @build = @build - 1
     SP_EXECUTESQL
       @SQL,
       '@build INT',
       @build
  END

  SELECT * FROM #result ORDER BY fp DESC

END
GO 
```

我还发现@@rowcount 现在可能会看到行中的进程`SP_EXECUTESQL`。在这种情况下，您可能需要重新安排一些事情（使用输出参数，或将循环嵌入@SQL 等）。

总体感觉有点笨拙。有了有关您的架构等的更多信息，就有可能避免使用动态 SQL。这将有几个好处，但特别是一个：
- 现在您对@deploy 参数的 SQL 注入攻击持开放态度

任何可以执行此 SP 和/或控制 @deploy 参数中的值的人都可能对您的数据库造成严重破坏。

例如……你能把所有的 TestCaseExecutions 存储在同一个表中吗？但是有一个额外的字段： `TestCaseID`*（甚至`TestCaseName`）？

这样您就不需要构建动态 SQL 来控制您正在处理的数据集。相反，您只需添加`WHERE TestCaseID = @TestCaseID`到您的查询中......

# python - 当您在 python 中不需要索引时，如何制作 For 循环？

> ID：10122109
> 
> 赞同：9
> 
> 时间：2012-04-12T10:51:37.267
> 
> 标签：python, coding-style, pylint, dummy-data

如果我需要`for`Python 中的循环：

```
for i in range(1,42):
    print "spam" 
```

但不要使用`i`任何东西，pylint 抱怨未使用的变量。我该如何处理？我知道你可以这样做：

```
for dummy_index in range(1,42):
    print "spam" 
```

但这样做对我来说似乎很奇怪。有没有更好的办法？

我对 Python 很陌生，所以如果我遗漏了一些明显的东西，请原谅我。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-12T10:52:24.037

```
for _ in range(1,42):
    print "spam" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-12T14:52:14.120

在 Python 中没有计数器变量的情况下没有“自然”的方式来循环*n*次，并且您不应该仅仅为了使代码分析器静音而诉诸丑陋的黑客攻击。

在你的情况下，我会建议以下之一：

*   只需忽略 PyLint 警告（或过滤单字符变量的报告警告）
*   将 PyLint 配置为忽略名为 的变量`i`，这些变量通常只在`for`循环中使用。
*   使用前缀标记未使用的变量，可能使用默认值`_`（它比 分散注意力`dummy`）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-12T10:57:08.167

根据[`pylint`文件](http://linux.die.net/man/1/pylint)：

```
--dummy-variables-rgx=
          匹配用于虚拟变量的名称的正则表达式（即
          不曾用过）。[当前：_|虚拟]

```

换句话说，如果变量的名称以下划线或字母开头`dummy`，则`pylint`不会抱怨该变量未被使用：

```
for dummy in range(1, 42):
    print "spam" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T10:57:15.307

通常你可以解决它，就像你的情况一样：

```
>>> print "spam\n"*len(range(1,42)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-30T23:24:42.150

**3个简单的原因**

1.  如果不在循环中使用计数器变量，就无法循环通过您的程序`for`。
2.  但是您可以创建一个程序，`index[1]`只需`index[2]`添加`if index[1]`完成即可。`return index[]+1`.
3.  不幸的是，您需要创建一个额外的程序，它不如`for`循环高效，并且在长程序中效率不高。

# android - 如何在微调器中显示来自 json 的字符串响应？

> ID：10122122
> 
> 赞同：0
> 
> 时间：2012-04-12T10:52:44.253
> 
> 标签：android, json, spinner

我是 android 的新手。我有一个字符串响应，我需要在 spinner 中显示。我已经发送了响应..

```
04-12 16:15:44.567: I/System.out(9569): Json obj length:: 58
04-12 16:15:44.577: I/System.out(9569): Alabama
04-12 16:15:44.577: I/System.out(9569): Alaska
04-12 16:15:44.577: I/System.out(9569): Alberta
04-12 16:15:44.577: I/System.out(9569): Arizona
04-12 16:15:44.597: I/System.out(9569): Arkansas
04-12 16:15:44.597: I/System.out(9569): British Colombia
04-12 16:15:44.597: I/System.out(9569): California
04-12 16:15:44.597: I/System.out(9569): Colorado
04-12 16:15:44.597: I/System.out(9569): Connecticut
04-12 16:15:44.597: I/System.out(9569): Delaware
04-12 16:15:44.597: I/System.out(9569): District Of Columbia
04-12 16:15:44.597: I/System.out(9569): Florida
04-12 16:15:44.597: I/System.out(9569): Georgia
04-12 16:15:44.597: I/System.out(9569): Hawaii
04-12 16:15:44.597: I/System.out(9569): Idaho
04-12 16:15:44.597: I/System.out(9569): Illinois
04-12 16:15:44.597: I/System.out(9569): Indiana
04-12 16:15:44.607: I/System.out(9569): Iowa
04-12 16:15:44.607: I/System.out(9569): Kansas
04-12 16:15:44.607: I/System.out(9569): Kentucky
04-12 16:15:44.607: I/System.out(9569): London
04-12 16:15:44.607: I/System.out(9569): Louisiana
04-12 16:15:44.607: I/System.out(9569): Maine
04-12 16:15:44.607: I/System.out(9569): Maryland
04-12 16:15:44.607: I/System.out(9569): Massachusetts
04-12 16:15:44.607: I/System.out(9569): Michigan
04-12 16:15:44.607: I/System.out(9569): Minnesota
04-12 16:15:44.618: I/System.out(9569): Mississippi
04-12 16:15:44.618: I/System.out(9569): Missouri
04-12 16:15:44.618: I/System.out(9569): Montana
04-12 16:15:44.618: I/System.out(9569): Nebraska
04-12 16:15:44.618: I/System.out(9569): Nevada
04-12 16:15:44.618: I/System.out(9569): New Hampshire
04-12 16:15:44.618: I/System.out(9569): New Jersey
04-12 16:15:44.618: I/System.out(9569): New Mexico
04-12 16:15:44.618: I/System.out(9569): New York
04-12 16:15:44.618: I/System.out(9569): North Carolina
04-12 16:15:44.628: I/System.out(9569): North Dakota
04-12 16:15:44.628: I/System.out(9569): Ohio
04-12 16:15:44.628: I/System.out(9569): Oklahoma
04-12 16:15:44.628: I/System.out(9569): Ontario
04-12 16:15:44.628: I/System.out(9569): Oregon
04-12 16:15:44.628: I/System.out(9569): Pennsylvania
04-12 16:15:44.628: I/System.out(9569): Puerto Rico
04-12 16:15:44.628: I/System.out(9569): Quebec
04-12 16:15:44.638: I/System.out(9569): Rhode Island
04-12 16:15:44.648: I/System.out(9569): South Carolina
04-12 16:15:44.648: I/System.out(9569): South Dakota
04-12 16:15:44.648: I/System.out(9569): Tennessee
04-12 16:15:44.648: I/System.out(9569): Texas
04-12 16:15:44.648: I/System.out(9569): Utah
04-12 16:15:44.648: I/System.out(9569): Vermont
04-12 16:15:44.648: I/System.out(9569): Virgin Island
04-12 16:15:44.658: I/System.out(9569): Virginia
04-12 16:15:44.658: I/System.out(9569): Washington
04-12 16:15:44.658: I/System.out(9569): West Virginia
04-12 16:15:44.658: I/System.out(9569): Wisconsin
04-12 16:15:44.658: I/System.out(9569): Wyoming 
```

我的代码是

```
public  ArrayList<TourScheduleInfo> GetCustomerState(String stateName) {

        SoapObject soap_request = new SoapObject(DataMemeber.NAMESPACE, DataMemeber.CUSTOMER_STATE_METHOD_NAME);

        SoapSerializationEnvelope envelope_order = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope_order.dotNet = true;
        envelope_order.setOutputSoapObject(soap_request);
        HttpTransportSE androidHttpTransports = new HttpTransportSE(DataMemeber.URL);
        try 
        {
            String SOAP_ACT = DataMemeber.NAMESPACE + DataMemeber.CUSTOMER_STATE_METHOD_NAME;
            System.out.println("SOAP_ACT IN OrderNo:: " + SOAP_ACT);

            androidHttpTransports.call(SOAP_ACT, envelope_order);
            Object response = envelope_order.getResponse();
            System.out.println("Input String :: " + envelope_order.bodyOut);
            Log.i("Output: ", response.toString());

           JSONArray jsonobj = new JSONArray(response.toString());
            System.out.println("Json obj length:: " + jsonobj.length());
             for(int i=0; i<jsonobj.length(); i++)
            {
                TourScheduleInfo tourInfo = new TourScheduleInfo();

                JSONObject jobj = jsonobj.getJSONObject(i);
                stateName = jobj.getString("StateName");

                tourInfo.setStateName(stateName);

                System.out.println(stateName);

                StatenameList.add(tourInfo);
                tourInfo.getStateName();

          }

             System.out.println(StatenameList);
        } 
        catch (Exception e) {
            e.printStackTrace();
            System.out.println("Exception :: " + e.toString());
        }

        return StatenameList;
    } 
```

我必须在另一个类中设置微调器值。所以我必须获取数组值并传递给另一个类中的微调器。我尝试了很多方法，但没有得到帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:56:32.763

将响应字符串放入数组

```
ArrayList<String> mArrayList = new ArrayList<String>();

        ............
        androidHttpTransports.call(SOAP_ACT, envelope_order);
        Object response = envelope_order.getResponse();
        System.out.println("Input String :: " + envelope_order.bodyOut);
        Log.i("Output: ", response.toString());

        mArrayList.add( response.toString());   //here you put your data to array
       ....... 
```

并执行以下操作..

```
Spinner s = (Spinner) findViewById(R.id.spin);  //Spinner its id is spin
 ArrayAdapter adapter = new ArrayAdapter(this,
 android.R.layout.simple_spinner_item, mArrayList );
 s.setAdapter(adapter); 
```

# asp.net - 如何启用ClientInstanceName点后的功能将显示我们在js文件中编写的功能而不使用强制转换

> ID：10122125
> 
> 赞同：1
> 
> 时间：2012-04-12T10:53:02.673
> 
> 标签：asp.net

```
ASPxClientSpinEdit.prototype.NewMethod = function () { alert("MyMethod"); }
var a = ASPxClientSpinEdit.Cast(s);
           a.NewMethod(); 
```

如果我不想使用怎么办`ASPxClientSpinEdit.Cast();`

# ruby-on-rails - 如何从字符串生成文本文件以在 Ruby on Rails 中下载

> ID：10122130
> 
> 赞同：8
> 
> 时间：2012-04-12T10:53:28.707
> 
> 标签：ruby-on-rails, carrierwave

我正在使用 Rails 构建一个网站，并且我在 MySQL 数据库中有一个带有一些文本类型值存储的模型，我需要为我的用户提供一个下载链接，以下载一个包含这些文本的“* .txt”文件。

我试过的是使用`render :text => my_text` ，但它有点难看，浏览器无法开始下载。

不是我试图使用 CarrierWave 并将 output_file 挂载到我的模型，我想构建一个方法来从其文本值生成文件。任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-12T11:06:05.260

```
send_data 'text to send', :filename => 'some.txt' 
```

[文档在这里](http://api.rubyonrails.org/classes/ActionController/DataStreaming.html#method-i-send_data)

# c# - 使用 C# 在 Active Directory 中获取用户的父 OU

> ID：10122139
> 
> 赞同：15
> 
> 时间：2012-04-12T10:53:55.007
> 
> 标签：c#, active-directory

我想检查用户是否在特定的父 OU 中。

我怎样才能做到这一点？

检查下面的代码，以清楚地了解我在寻找什么。

```
using System.DirectoryServices.AccountManagement;

public bool IsUserInOU(string samAccountName, string OUName){

    using (var context = new PrincipalContext(ContextType.Domain))
        {
            using (var user = UserPrincipal.FindByIdentity(context, IdentityType.SamAccountName, samAccountName))
            {                    
                //Check if the user is in the OU specified in OUName
                //Something like:
                //return user.IsInOU(OUName);
            }
         }
}

public void TestIt_1(){
  //The parent OU of this user is "AwesomeOU"
  string samAccountName = "Joe";
  string OUName = "AwesomeOU";
  bool expected = true;
  bool actual = IsUserInOU(samAccountName, OUName);
  Assert.AreEqual(expected, actual);
}

public void TestIt_2(){
  //The parent OU of this user is "WhateverOU"
  string samAccountName = "Mike";
  string OUName = "AwesomeOU";
  bool expected = false;
  bool actual = IsUserInOU(samAccountName, OUName);
  Assert.AreEqual(expected, actual);
} 
```

域名：

*   国家OU
    *   厉害了欧
        *   乔
    *   不管你
        *   麦克风

# empi回答后的解决方案1

根据 empi 提供的信息，我编写了以下方法来提取 DistinguishedName 中的第一个 OU。完成之后，剩下的就是轻而易举了。

```
public static string GetOUForUser(string samAccountName)
    {
        using (var context = new PrincipalContext(ContextType.Domain))
        {
            using (var user = UserPrincipal.FindByIdentity(context, IdentityType.SamAccountName, samAccountName))
            {
                //System.Console.WriteLine(user.DistinguishedName);
                int startIndex = user.DistinguishedName.IndexOf("OU=", 1) + 3; //+3 for  length of "OU="
                int endIndex = user.DistinguishedName.IndexOf(",", startIndex);
                var group = user.DistinguishedName.Substring((startIndex), (endIndex - startIndex));
                return group;
            }
        }
    } 
```

# JPBlanc回答后的解决方案2

```
public static string GetOUForUser(string samAccountName)
    {
        using (var context = new PrincipalContext(ContextType.Domain))
        {
            using (var user = UserPrincipal.FindByIdentity(context, IdentityType.SamAccountName, samAccountName))
            {
                using (DirectoryEntry deUser = user.GetUnderlyingObject() as DirectoryEntry)
                {
                    using (DirectoryEntry deUserContainer = deUser.Parent)
                    {
                        return deUserContainer.Properties["Name"].Value.ToString();
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-13T07:09:28.130

好的@Empi 解决方案正在工作，但`UserPrincipal`它是建立在`DirectoryEntry`提供一个`parent`或`container`属性的对象上的，这些属性只为您提供您正在寻找的对象，而不使用字符串方式。

```
/* Retreiving a principal context
 */
PrincipalContext domainContext = new PrincipalContext(ContextType.Domain, "WM2008R2ENT:389", "dc=dom,dc=fr", "dom\\jpb", "MyPwd");

/* Retreive a user
 */
UserPrincipal user = UserPrincipal.FindByIdentity(domainContext, "user1");

/* Retreive the container
 */
DirectoryEntry deUser = user.GetUnderlyingObject() as DirectoryEntry;
DirectoryEntry deUserContainer = deUser.Parent;
Console.WriteLine (deUserContainer.Properties["distinguishedName"].Value); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T11:04:02.080

此信息位于[UserPrincipal.DistinguishedName](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.principal.distinguishedname.aspx)中。您应该检查 DistinguishedName 是否以 "," + ou 专有名称结尾（不区分大小写）。但是，您必须知道您正在检查的 ou 的专有名称。

例如，如果 dn 为: `CN=Jeff Smith,OU=Sales,DC=Fabrikam,DC=COM`，则表示用户在`OU=Sales,DC=Fabrikam,DC=COM`ou 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-16T15:50:28.530

这就是我如何获得特定 AD 用户的专有名称，希望它有所帮助:-)

```
private static string GetDNOfUser(string user)
{
    var ctx = new PrincipalContext(ContextType.Domain, Environmentals.Domain, Environmentals.OUPath);

    //Creating object for search filter
    UserPrincipal userPrin = new UserPrincipal(ctx)
    {
        //Only getting users with the same name as the input
        Name = user
    };

    var searcher = new PrincipalSearcher
    {
        //Applying filter to query
        QueryFilter = userPrin
    };

    //Finding the user
    var results = searcher.FindOne();
    searcher.Dispose();

    //Return the distinguishedname
    return results.DistinguishedName;
} 
```

# android - Android Scroller 弹到固定位置

> ID：10122144
> 
> 赞同：5
> 
> 时间：2012-04-12T10:54:38.317
> 
> 标签：android, scroller

我正在尝试使用 Scroller 来固定位置。我的问题是：它最终处于正确的位置，但它要么只运行一次并立即设置结束位置，要么首先滚动非常缓慢然后跳到最后。

**编辑：**问题似乎是a）我的速度有时为零（这是其他地方的问题:)）并且我必须使用`scroller.extendDuration()`. 但是我不确定持续时间应该是多少。我找不到有关某个速度的实际含义的信息。是每秒像素吗？

这是我的代码：

```
private class Flinger implements Runnable {

    private final Scroller scroller;

    private int lastX = 0;

    public Flinger() {
        scroller = new Scroller(getContext());
    }

    void startFling(int initialVelocity, int offsetX) {
        Log.d("test", "finalX = " + offsetX);
        if (offsetX > 0) {
            scroller.fling(0, 0, initialVelocity, 0, 0, Integer.MAX_VALUE, 0, 0);
            scroller.setFinalX(offsetX);
            lastX = 0;
        } else {
            scroller.fling(getWidth(), 0, initialVelocity, 0, 0, Integer.MAX_VALUE, 0, 0);
            scroller.setFinalX(getWidth() + offsetX);
            lastX = getWidth();
        }
        post(this);
    }

    @Override
    public void run() {
        if (scroller.isFinished()) {
            Log.d("test", "scroller finished");
            return;
        }

        boolean more = scroller.computeScrollOffset();
        int x = scroller.getCurrX();
        int diff = lastX - x;
        Log.d("test", "isFlinging, x=" + x + ", diff=" + diff + ", leftOffset=" + getLeftOffset() + ", isDone=" + !more);
        if (diff != 0) {
            setLeftOffset(getLeftOffset() - diff);
            lastX = x;
        }

        if (more) {
            post(this);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:50:59.173

好的，我明白了。事实上，我不得不延长我的持续时间（但是文档有点误导 - 它不是添加到当前计算持续时间的值，而是实际的新持续时间）。

在阅读了更多文档之后，我意识到所需的速度确实是每秒像素数，并且我实际上已经定义了 VelocityTracker 来使用这个单位。

所以这是缺少的行：

> scroller.extendDuration((int) (Math.abs(offsetX) / (float) Math.max(1000, Math.abs(initialVelocity)) * 1000));

# php - 用户上传的图像具有可预测的文件名是不是一个坏主意？还是应该随机生成？

> ID：10122145
> 
> 赞同：1
> 
> 时间：2012-04-12T10:54:40.980
> 
> 标签：php, image, security, upload

我想让用户上传图片，我的计划是在他们的用户名之后命名图片文件以便于参考。但我突然想到，大多数允许上传图片的网站通常会生成一个随机的数字字符串作为文件名。这样做有什么（安全）优势吗？或者这只是开发商的一个不相关的决定？

对我来说，使用用户名的好处是我不需要为每个用户在数据库中存储一串数字，并且可以单独通过用户名引用图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:14:36.273

主要的安全问题是“信息泄露”。例如，如果您的用户可以选择不公开显示，那么猜测您的命名约定的攻击者可以检索“隐藏”用户的照片；这可能不是用户想要的。

使用数字文件名 - 从“1.jpg”开始并递增 - 会泄露其他信息；任何人都可以通过增量请求文件并查看他们何时收到 404 错误来了解您拥有多少用户。

从软件设计的角度来看，在许多情况下，您不希望将用户名用作主键 - 例如，用户名可能会更改（尤其是如果您使用电子邮件地址作为用户名）。您的数据库主键应该是一些不可变的、唯一的东西，例如 (G)(U)UID。这很可能是您在查看其他网站的用户照片时看到的文件名。

当然，如果您允许用户上传多张照片，则使用主键也不起作用-因此您必须在“约定”之间进行选择-例如，为每个用户设置一个照片文件夹，并通过某种方式找出该文件夹中有多少图像，或者通过将这些图像路径显式存储在数据库中。在这两种情况下，对用户使用主键可能是不够的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T10:58:46.907

我相信这主要是一个命名空间问题。

随机化 URL 的主机（我知道）允许在没有用户帐户的情况下上传 - 所以你的方法不起作用。使用随机文件夹/文件命名可以最大限度地减少人们两次上传相同文件名的冲突。

如果您永远不需要接受匿名上传，我会说这取决于您如何组织用户文件并避免命名空间冲突......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T11:03:10.367

我会建议 - 去寻找给你独特性的东西。例如 - 如果我要上传我的个人资料图片，我可能会将其命名为，下次登录时，我希望我的照片从屏幕上看我，图片的名称与我*作为用户*`me.jpg`无关

 *所以如果你把它重命名为`Pavel_Janicek_me.jpg`or`dflw00axxwe.jpg`真的没关系。只要你展示我自己的照片。

如果您允许用户上传多张图片，请考虑一些编号。重命名应该可以解决这些错误：

*   两个不同的用户上传同名图片
*   一位用户上传了两张同名的不同图片*

# php - 如何设置 PHP 以使用邮件或类似的 hMailServer？

> ID：10122148
> 
> 赞同：0
> 
> 时间：2012-04-12T10:55:06.540
> 
> 标签：php, email, send, mail-server

我的环境如下：
-Windows IIS7 + Windows DNS 服务器（我可以完全访问所有 DNS 记录和 IIS7 设置）。
-hMailServer 与 SMTP 监听 25。

我想就是这样，我的实际意图如下：
我想将 WordPress 用于我指向服务器的域之一，但目前它无法发送电子邮件（例如密码提醒）。

对于这样的事情，我的知识并不完全令人惊讶，所以请温柔地解释。:>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:21:37.140

您必须在文件中配置您的 SMTP 设置`php.ini`（位于 php 目录中）。如果您不使用 smtpauth/ssl，这可以解决问题。

```
[mail function]
; For Win32 only.
SMTP = 192.168.1.10

; For Win32 only.
sendmail_from = john@example.com 
```

但是，标准的 php 邮件功能**既不支持 smtpauth 也不支持 ssl**。看看[规格](http://www.php.net/manual/en/mail.configuration.php "眼镜")。

当您运行 Windows 时，您可以使用伪造的 sendmail。这支持身份验证和 ssl。阅读本[指南](http://wiki.uniformserver.com/index.php/Installing_Fake_Sendmail_for_Windows)，它应该可以工作。

# mysql - 插入后触发sql

> ID：10122149
> 
> 赞同：2
> 
> 时间：2012-04-12T10:55:08.827
> 
> 标签：mysql, sql, triggers, insert

我试图创建一个触发器，在插入表后，将数据插入到不同的表中。但是显示语法错误，我不知道错误在哪里：

```
CREATE TRIGGER insertDumpData ON users
FOR INSERT
AS 
BEGIN
    INSERT INTO attachments ("1", "sds", "hi");
END; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T10:58:18.650

哦，我看到您正在 mySQL 上尝试 SQL Server 语法。试试这个：

```
delimiter |

CREATE TRIGGER insertDumpData BEFORE INSERT ON users
  FOR EACH ROW BEGIN
      INSERT INTO attachments values ('1', 'sds', 'hi');
  END;
| 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T10:57:24.720

不要忘记在过程周围添加分隔符

```
delimiter |
CREATE TRIGGER insertDumpData ON users
    ...
    INSERT INTO attachments select "1", "sds", "hi";
    ...
| 
```

正如迭戈在他的回答中提到的那样：更正您的插入语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T11:07:07.463

缺少“价值”

```
CREATE TRIGGER insertDumpData ON users
FOR INSERT
AS 
BEGIN
    INSERT INTO attachments values ("1", "sds", "hi");
END; 
```

# python - Python：避免 NumPy 的 unittest.py 与本地 unittest.py 的冲突

> ID：10122151
> 
> 赞同：2
> 
> 时间：2012-04-12T10:55:18.340
> 
> 标签：python, numpy

有没有其他人遇到过将代码的单元测试写入一个名为 unittest.py 的文件，并发现它与 NumPy 的 unittest.py 模块冲突的情况？换句话说，如果我将其写入本地目录中的 unittest.py ：

```
if __name__ == "__main__":
    print "pre-import"
    #import numpy
    print "post-import" 
```

然后（这里没有惊喜）：

```
% python unittest.py
pre-import
post-import 
```

但如果我这样做：

```
if __name__ == "__main__":
    print "pre-import"
    import numpy
    print "post-import" 
```

我得到：

```
% python unittest.py
pre-import
Traceback (most recent call last):
  File "unittest.py", line 3, in <module>
    import numpy
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/numpy/__init__.py", line 137, in <module>
    import add_newdocs
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/numpy/add_newdocs.py", line 9, in <module>
    from numpy.lib import add_newdoc
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/numpy/lib/__init__.py", line 4, in <module>
    from type_check import *
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/numpy/lib/type_check.py", line 8, in <module>
    import numpy.core.numeric as _nx
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/numpy/core/__init__.py", line 40, in <module>
    from numpy.testing import Tester
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/numpy/testing/__init__.py", line 8, in <module>
    from unittest import TestCase
ImportError: cannot import name TestCase 
```

随后，iPython 无法加载：

```
% ipython
WARNING: IPython History requires SQLite, your history will not be saved
Traceback (most recent call last):
  File "/home/jbbrown/local_bin/python/bin/ipython", line 7, in <module>
    launch_new_instance()
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/IPython/frontend/terminal/ipapp.py", line 402, in launch_new_instance
    app.initialize()
  File "<string>", line 2, in initialize
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/IPython/config/application.py", line 84, in catch_config_error
    return method(app, *args, **kwargs)
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/IPython/frontend/terminal/ipapp.py", line 312, in initialize
    self.init_shell()
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/IPython/frontend/terminal/ipapp.py", line 332, in init_shell
    ipython_dir=self.ipython_dir)
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/IPython/config/configurable.py", line 318, in instance
    inst = cls(*args, **kwargs)
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/IPython/frontend/terminal/interactiveshell.py", line 183, in __init__
    user_module=user_module, custom_exceptions=custom_exceptions
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/IPython/core/interactiveshell.py", line 478, in __init__
    self.init_reload_doctest()
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/IPython/core/interactiveshell.py", line 662, in init_reload_doctest
    doctest_reload()
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/IPython/utils/doctestreload.py", line 72, in doctest_reload
    import doctest
  File "/home/jbbrown/local_bin/python/lib/python2.7/doctest.py", line 2118, in <module>
    class DocTestCase(unittest.TestCase):
AttributeError: 'module' object has no attribute 'TestCase'

If you suspect this is an IPython bug, please report it at:
    https://github.com/ipython/ipython/issues
or send an email to the mailing list at ipython-dev@scipy.org

You can print a more detailed traceback right now with "%tb", or use "%debug"
to interactively debug it.

Extra-detailed tracebacks for bug-reporting purposes can be enabled via:
    c.Application.verbose_crash=True 
```

有趣的是，如果我将导入语句移到`"if __name__"`套件之外，例如，

```
print "pre-import"
import numpy
print "post-import"
if __name__ == "__main__":
    pass 
```

我得到：

```
% python unittest.py
pre-import
pre-import
post-import
Traceback (most recent call last):
  File "unittest.py", line 2, in <module>
    import numpy
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/numpy/__init__.py", line 137, in <module>
    import add_newdocs
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/numpy/add_newdocs.py", line 9, in <module>
    from numpy.lib import add_newdoc
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/numpy/lib/__init__.py", line 4, in <module>
    from type_check import *
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/numpy/lib/type_check.py", line 8, in <module>
    import numpy.core.numeric as _nx
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/numpy/core/__init__.py", line 40, in <module>
    from numpy.testing import Tester
  File "/home/jbbrown/local_bin/python/lib/python2.7/site-packages/numpy/testing/__init__.py", line 8, in <module>
    from unittest import TestCase
ImportError: cannot import name TestCase 
```

当然，更改包含我的单元测试的文件的名称并避免这种情况是微不足道的，但我想知道是否有其他人遇到过这种情况并想到了一个不包括重命名他们的单元测试文件的优雅解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:08:31.753

默认情况下，您可以在高于 2.7 的 Python 版本上切换到[绝对导入：](http://docs.python.org/whatsnew/2.5.html#pep-328-absolute-and-relative-imports)

```
from __future__ import absolute_import

if __name__ == "__main__":
    print "pre-import"
    import numpy
    print "post-import" 
```

# json - 我如何以 UNIX 时间格式将 Json DateTime 发布到实体框架 4 的 ASP.NET MVC 4 WEBAPI 操作

> ID：10122153
> 
> 赞同：1
> 
> 时间：2012-04-12T10:55:35.930
> 
> 标签：json, datetime, asp.net-mvc-4, asp.net-web-api, entity-framework-4.3

我正在尝试通过 POST 或 PUT 以 UNIX 时间格式发送一个简单的 DateTime 属性：

```
{ ... "Created": "/Date(1307871513107+0700)/" ... } 
```

到我的 ASP.NET MVC 4 WEBAPI 操作：

```
...
// PUT /api/<controller>/<action>
public HttpResponseMessage PutUser(UserInfo userInfo)
{
... 
```

UserInfo 是一个常用的模型

```
...
public DateTime Created { get; set; }
... 
```

用于 EF4 DbContext

```
...
public class DgDbContext : DbContext
  {
public DbSet<UserInfo> UserInfo { get; set; }
... 
```

在调试和让我的模型在控制器的操作中，我有我的 DateTime 道具，但格式错误：

```
{01.01.0001 0:00:00} 
```

我的错误在哪里，我该如何解决？

所有其他字段都正确。像 "dd.MM.yyyy hh:mm:ss" 这样的字符串运行良好。我试图发送：

*   {“创建”：“日期（1307871513107）”}
*   {“创建”：“/日期（1307871513107）/”}
*   {“创建”：“/日期（1307871513107）/”}
*   {“创建”：“\日期（1307871513107）\”}
*   等等

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:50:54.977

基本上你有**三个**选择：

*   将数据作为 ViewModel 接收，日期为字符串，然后像[这样解析它](https://stackoverflow.com/questions/206384/how-to-format-a-json-date)
*   在模型上定义两个属性，一个被 EF 忽略（作为字符串），另一个在 AJAX 中为空（作为日期）。在控制器中收到日期后解析值
*   创建自定义模型绑定器

选择一个对你来说更容易的，我想是第二个。

# php - PHP登录代码未设置永久Cookie（通过浏览器关闭）

> ID：10122154
> 
> 赞同：1
> 
> 时间：2012-04-12T10:55:44.240
> 
> 标签：php, mysql, login

我正在使用 PHP/MySQL 登录代码，我希望它永久存储 cookie（通过浏览器关闭），但是它不起作用。它可以正常登录，并且会记住浏览器关闭，但之后会忘记它。我怎样才能解决这个问题？

*这是我认为的所有重要代码；*

```
<?php
define('INCLUDE_CHECK',true);

require 'connect.php';
require 'functions.php';

// Those two files can be included only if INCLUDE_CHECK is defined

session_name('tzLogin');
// Starting the session

session_set_cookie_params(1000000*7*24*60*60);

session_start();

if($_SESSION['id'] && !isset($_COOKIE['tzRemember']) && !$_SESSION['rememberMe'])
{
    // If you are logged in, but you don't have the tzRemember cookie (browser restart)
    // and you have not checked the rememberMe checkbox:

    $_SESSION = array();
    session_destroy();

    // Destroy the session
}

if(isset($_GET['logoff']))
{
    $_SESSION = array();
    session_destroy();
    header("Location: index.php");
    exit;
}

if($_POST['submit']=='Login')
{
    // Checking whether the Login form has been submitted

    $err = array();
    // Will hold our errors

    if(!$_POST['username'] || !$_POST['password'])
        $err[] = 'All the fields must be filled in!';

    if(!count($err))
    {
        $_POST['username'] = mysql_real_escape_string($_POST['username']);
        $_POST['password'] = mysql_real_escape_string($_POST['password']);
        $_POST['rememberMe'] = (int)$_POST['rememberMe'];

        // Escaping all input data

        $row = mysql_fetch_assoc(mysql_query("SELECT id,usr FROM tz_members WHERE usr='{$_POST['username']}' AND pass='".md5($_POST['password'])."'"));

        if($row['usr'])
        {
            // If everything is OK login

            $_SESSION['usr']=$row['usr'];
            $_SESSION['id'] = $row['id'];
            $_SESSION['rememberMe'] = $_POST['rememberMe'];

            // Store some data in the session

            setcookie('tzRemember',$_POST['rememberMe']);
            // We create the tzRemember cookie
        }
        else $err[]='Wrong username and/or password!';
    }

    if($err)
        $_SESSION['msg']['login-err'] = implode('<br />',$err);
        // Save the error messages in the session

    header("Location: nowloggedin.php");
    exit;
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:02:05.783

您需要为 cookie 设置过期时间：

```
setcookie('tzRemember',$_POST['rememberMe'], time()+3600); 
```

例如，这将使其持续一小时。如果您不设置时间，会话结束时它将过期。

我刚刚注意到您正在使用 session_set_cookie_params 设置生命周期 - 正如其他人所说，您将这种方式设置为未来太远了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:04:40.223

今年最好保持在以下...

```
2038 
```

否则会出现问题，您的浏览器不会存储它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T11:06:20.103

您将 cookie 设置为：

```
session_set_cookie_params(1000000*7*24*60*60); 
```

这将 cookie 设置为在 1000000*7*24*60*60 = 7*1000000/365 = 19000+ 年后过期。据我所知，UNIX 时间戳没有设置这么长的持续时间。

# mysql - 如何定义在 mysql 中返回值的存储过程

> ID：10122157
> 
> 赞同：0
> 
> 时间：2012-04-12T10:55:56.313
> 
> 标签：mysql, stored-procedures

我想在 MySQL 中定义一个函数作为存储过程。

我尝试了如下程序：

```
DELIMITER //
CREATE PROCEDURE getGroupUsers(IN groupId int) return curser

BEGIN
 Declare services_curs cursor for SELECT `service_id`,`service_name`,`service_type_value`,`service_label`,`parent`,`service_group` from services;

open services_curs;

return services_curs;

END //

DELIMITER ; 
```

但发生错误：

```
#1313 - RETURN is only allowed in a FUNCTION 
```

我知道这是一个可怕的语法错误。什么是正确的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:20:58.403

在程序上，您可以使用`OUT`变量，这些变量被填充并且在程序之外可用。如上所述，MySQL 过程不返回值。你需要`stored function`实现这一目标。

`OUT`可以[在文档](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)中找到有关如何使用变量的小示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:17:38.393

`select`在过程中用于返回值，否则使用哪些`function`值`returns`。

# iphone - 没有完成按钮的 UIKeyboardTypeNumberPad 在 iOS5 中解决了吗？

> ID：10122161
> 
> 赞同：1
> 
> 时间：2012-04-12T10:56:06.500
> 
> 标签：iphone, ipad, ios5

我环顾四周，我不确定这个问题是否在 iOS 5 中得到解决。我找到了这篇文章

[iOS 5 中的返回或完成按钮](https://stackoverflow.com/questions/7767061/uikeyboardtypenumberpad-return-or-done-button-in-ios-5)

下面有一些代码，但我不确定我应该把它放在哪里？

```
if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 3.2) {
    if([[keyboard description] hasPrefix:@"<UIPeripheralHost"] == YES)
        [keyboard addSubview:doneButton];
} else {
    if([[keyboard description] hasPrefix:@"<UIKeyboard"] == YES)
        [keyboard addSubview:doneButton];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:51:03.597

首先像这样为 UIKeyboardDidShowNotification 添加观察者：

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(keyboardDidShow:) 
                                                 name:UIKeyboardDidShowNotification 
                                               object:nil]; 
```

并在keyboardDidShow：编写此代码以添加完成按钮

# javascript - blueimp jquery 文件上传-“完成”、“完成”回调不适用于 IE 9

> ID：10122165
> 
> 赞同：14
> 
> 时间：2012-04-12T10:56:31.583
> 
> 标签：javascript, jquery, file-upload, asyncfileupload, blueimp

我正在使用[Blueimp Jquery File Upload](https://github.com/blueimp/jQuery-File-Upload/)插件来异步上传文件。它在大多数其他浏览器中运行良好（有一些小问题） - 在 IE 上，我看到“完成”、“停止”、“始终”、“完成”和其他一些事件回调没有被调用的问题。

在调试时，我在“done”、“fail”、“always”中添加了 console.logs，并在 _onSend 函数（在 jquery.fileupload.js 中）中向 ajax 请求添加了“complete”方法 - 但没有一个似乎在 IE 中被调用。

```
_onSend: function (e, data) {
        var that = this,
            jqXHR,
            slot,
            pipe,
            options = that._getAJAXSettings(data),
            send = function (resolve, args) {
                that._sending += 1;
                jqXHR = jqXHR || (
                    (resolve !== false &&
                    that._trigger('send', e, options) !== false &&
                    (that._chunkedUpload(options) || $.ajax(options))) ||
                    that._getXHRPromise(false, options.context, args)
                ).complete(function (result, textStatus, jqXHR) {
                    console.log("complete"); 
                }).done(function (result, textStatus, jqXHR) {
                    console.log("done", result); 
                }).fail(function (jqXHR, textStatus, errorThrown) {
                    console.log("fail", result); 
                }).always(function (a1, a2, a3) {
                    console.log("done", result); 

                   }
                });
                return jqXHR;
            }; 
```

[为了可读性而修剪的插件代码]

我知道在 IE 9 中，jquery.iframe-transport.js 用于文件上传（因为 IE 不支持 XHR 文件上传）。

我不确定我应该如何修复/调试这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-27T09:09:44.913

当从服务器返回 json 时，如果响应的内容类型设置为“text/html”或“text/plain”（而不是 application/json），则会触发 done 事件。这仅适用于不支持 XHR 文件上传的浏览器（例如 IE9）以及 blueimp 插件使用 IFrame 传输的浏览器。

插件文档中“内容协商”下的相关信息： [https ://github.com/blueimp/jQuery-File-Upload/wiki/Setup](https://github.com/blueimp/jQuery-File-Upload/wiki/Setup)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-08T14:00:37.793

作为记录，我在直接上传到 S3 时遇到了这个问题，因为他们的 CORS 功能允许这样做。

解决方案是将success_action_status 设置为'200'，然后正确触发Done 事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-05T15:21:36.363

如果有人在直接上传到 S3 时仍然遇到此问题，解决方案是添加值为“201”的**success_action_status字段。**确保您也将其作为策略数据的一部分包含在内，因为它们必须匹配。

显然，当接收来自 IE9 S3 的上传时，将返回一个空字符串。要让它返回文件上传器需要的 XML，您必须告诉它返回状态 201。

# php - php 中的 $_REQUEST (或) $_GET 函数

> ID：10122167
> 
> 赞同：-6
> 
> 时间：2012-04-12T10:56:36.103
> 
> 标签：php, undefined-index

我最近正在安装 xampp

我将在 php 中编写一个函数

```
$value=$_GET['value']; 
```

但它显示错误“未定义的索引”

我也会尝试 $_REQUEST 功能

请帮助我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T10:59:01.367

它显示未定义的索引，因为您没有设置 GET 参数`value`。如果您不总是设置它，请执行以下操作：

```
$value = (isset($_GET['value'])) ? $_GET['value'] : 'default_value'; 
```

...或者...

```
if (isset($_GET['value'])) {
  $value = $_GET['value'];
} 
```

本质上，您需要在尝试使用变量之前验证是否设置了变量，否则会产生警告。

# ruby-on-rails - Ruby on Rails 3 中的模型继承

> ID：10122170
> 
> 赞同：0
> 
> 时间：2012-04-12T10:56:45.813
> 
> 标签：ruby-on-rails, ruby-on-rails-3

请帮助新手选择在 RoR3 中实现继承的最佳方式。我有：

```
-Person（地址字段、生日等）
   -Player，继承自 Person（位置、鞋码等）
      -Goalkeeper，继承自 Player（与此角色相关的其他特定字段）

```

我认为单表继承是一个不好的解决方案，因为创建的表中会有很多空字段。做这个的最好方式是什么？使用多态关联（使用 has_one？）？使用belongs_to/has_one（但是如何在Player视图中显示Person的字段呢？）？不实现继承？其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:29:18.483

虽然我认为 STI 可能是我会使用的方法，但如果您想避免大量`NULL`属性，另一种可能性是在您的 Person 模型中添加一个列`other_attributes`来存储一个`Hash`属性。为此，请`text`向表中添加一列`people`：

```
def self.up
  add_column :people, :other_attributes, :text
end 
```

然后确保该属性在模型中被序列化。您可能需要编写一个包装器以确保`Hash`在使用它时将其初始化为空：

```
class Person < ActiveRecord::Base
  serialize :other_attributes

  ...

  def other_attributes
    write_attribute(:other_attributes, {}) unless read_attribute(:other_attributes)
    read_attribute(:other_attributes)
  end
end 
```

然后您可以按如下方式使用该属性：

```
p = Person.new(...)
p.other_attributes                          #=> {}
pl = Player.new(...)
pl.other_attributes["position"] = "forward"
pl.other_attributes                         #=> {"position" => "forward"} 
```

这种方法的一个警告是，在从 中检索数据时，您应该使用字符串作为键，因为从数据库中检索`other_attributes`时，键将始终是字符串。`Hash`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:19:03.767

我建议性病。另一种解决方案是使用像 mongodb 这样的文档存储，或者使用 activerecord 存储[http://api.rubyonrails.org/classes/ActiveRecord/Store.html](http://api.rubyonrails.org/classes/ActiveRecord/Store.html)。如果您有一个 postgress 数据库，请查看他的 HStore 专栏[http://rubygems.org/gems/activerecord-postgres-hstore](http://rubygems.org/gems/activerecord-postgres-hstore)。

另一种选择是 PostgreSQL 表继承。[http://www.postgresql.org/docs/8.1/static/ddl-inherit.html](http://www.postgresql.org/docs/8.1/static/ddl-inherit.html)

# javascript - 仅向 HTML 元素父元素 onclick 添加 jQuery 效果

> ID：10122171
> 
> 赞同：1
> 
> 时间：2012-04-12T10:56:55.460
> 
> 标签：javascript, jquery, onclick

我想将 jquery 效果“flash”应用于“simpleCart_shelfItem”，即 html 元素“item_add”的父级。这是为了表明用户已将商品添加到购物车。我通过引用父级来做到这一点，因为有很多“simpleCart_shelfItem”实例，我希望效果只发生在被点击的那个上。我一直在阅读`this`我收集的内容，我不能将`onClick`事件内联，因为`this`它将是全局的，而不是引用函数中的元素。这就是我所拥有的：

Javascript

```
$(".item_add").onclick = highlight;

function highlight(){

  $(".item_add").parent().effect("highlight", {}, 750);
}; 
```

HTML

```
<div class="simpleCart_shelfItem">
                <div class="image"><img src="css/graphics/jpeg/saw.jpg" alt="Hacksaw" height="75" width="75" /></div>
                <h2 class="item_name">Hacksaw</h2>
                <span class="item"><img src="css/graphics/jpeg/cart.jpg" alt="Shopping Cart" height="20" width="19" />
            Items in Cart: <b class="simpleCart_quantity"></b></span> 
                <div class="description"><p>Quality metal hacksaw and 24 tooth blade.</p><p class="p_height">Your going to need some way of cutting that pipe. Good for the toolbox.</p></div>
                <a class="add_products" href="cart.html">Go to Cart</a>
                <a class="add_products" href="products.html" title="Add Items">Add More Items</a>
                <span class="gst">(Inc. GST)</span>
                <span class="item_price">$24.95</span>
                <input class="item_quantity" value="1" type="text">
                **<a href="javascript:;" class="item_add" onclick="highlight();">Add</a>**
            </div><!--end of simpleCart_shelfItem--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:00:02.750

```
$(".item_add").click(function() {
    $(this).parent().effect("highlight", {}, 750);
}); 
```

在上面的例子`this`中指的是被点击的元素。我不知道你的确切意思`this`是全局，但你错了:-)（或者我误解了你）。

来自[http://www.quirksmode.org/js/this.html](http://www.quirksmode.org/js/this.html)：

> 在 JavaScript 中，this 总是指我们正在执行的函数的“所有者”，或者更确切地说，指的是函数作为方法的对象。

查看[演示](http://jsfiddle.net/uCcYw/)

# windows - Windows 注册表文件卷影副本

> ID：10122184
> 
> 赞同：1
> 
> 时间：2012-04-12T10:57:31.353
> 
> 标签：windows, file, search, registry

我需要找到磁盘上的所有 Windows 注册表文件，包括来自 Windows 卷影副本的备份注册表数据。问题是我不知道这些文件的位置。

在互联网上我找到了这个命令 `vssadmin list shadowstorage` ，但它返回给我这个

`For volume: (C:)\\?\Volume{ba406d28-f092-11dc-b3d7-806e6f6e6963}\`

`Shadow Copy Storage volume: (C:)\\?\Volume{ba406d28-f092-11dc-b3d7-806e6f6e6963}\`

这是什么？这些文件的真正位置在哪里？我怎样才能访问它们？如果我扫描硬盘驱动器以查找开头带有“regf”幻数的二进制文件，是否足以找到所有注册表数据？

**添加**

我从文件夹属性（以前的版本）在一个备份文件夹上创建了快捷方式这是快捷方式指向的内容

`\\localhost\C$\@GMT-2012.04.12-00.13.21\Windows\System32\config`

看起来它包含备份文件，但是否可以将其作为普通目录访问？如何在硬盘上找到这些目录？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:46:54.460

运行`vssadmin list shadows`（**不是**影子存储）

您将收到卷影副本列表以及其他信息的路径。路径如下所示：

```
\\?\GLOBALROOT\Device\HarddiskVolumeShadowCopy1 
```

使用该路径作为卷字母的替换，如下所示：

```
 CreateFileW(L"\\\\?\\GLOBALROOT\\Device\\HarddiskVolumeShadowCopy1\\Windows\\System32\\config\\SYSTEM", GENERIC_READ, 
FILE_SHARE_READ | FILE_SHARE_WRITE | FILE_SHARE_DELETE, NULL, OPEN_EXISTING, 0, NULL); 
```

# java - Java抽象方法和接口

> ID：10122188
> 
> 赞同：0
> 
> 时间：2012-04-12T10:57:47.853
> 
> 标签：java, generics

我有一个界面`HTTPSequence`。我还有一个抽象类`AbstractHTTPFactory`，它又具有一个返回的抽象方法`ArrayList<HTTPSequence>`。在派生的类中，`AbstractHTTPFactory`我想重写这些方法以返回`ArrayList<[Class implementing HTTPSequence]>`。

可能吗 ？现在编译器给了我一个错误，建议我将覆盖的方法签名更改为`HTTPSequence`.

```
// abstract class with abstract method returning ArrayList of objects implementing interface
abstract public class AbstractHTTPFactory {
    abstract ArrayList<HTTPSequence> make();
}
// Specific class that returns ArrayList of objects of the class implementing HTTPSequence
public class RecipesHTTPFactory extends AbstractHTTPFactory{
    public ArrayList<Recipe> make() {
    }
}
// interface
public interface HTTPSequence {
}
// one of the classes implementing the above interface
public class Recipe implements HTTPSequence {
} 
```

Eclipse 给我的信息是：

> 此行有多个标记 - 返回类型与 AbstractHTTPFactory.make() 不兼容 - 实现 ....ider.AbstractHTTPFactory.make

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T11:02:05.187

您可以编写您的 AbstractClass 方法以返回`ArrayList<? extends Interface>`，然后您不必更改派生类方法签名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:11:03.343

以下设计将允许您避免返回通配符泛型类型，这[对调用者的使用有限](https://stackoverflow.com/questions/3716920/cant-add-value-to-the-java-collection-with-wildcard-generic-type)：

```
abstract public class AbstractHTTPFactory<T extends HTTPSequence> {
    abstract ArrayList<T> make();
}

public class RecipesHTTPFactory extends AbstractHTTPFactory<Recipe> {
    public ArrayList<Recipe> make() { ... }
} 
```

现在您可以调用`new RecipesHTTPFactory().make()`并取回 an`ArrayList<Recipe>`而不是`ArrayList<? extends HTTPSequence>`.

另请注意，除非调用者特别期望 a `ArrayList`，[否则最好](https://stackoverflow.com/a/1992479/697449)返回`make()`a `List<T>`。

# jquery - 缓存许多 AJAX 数据库写入？

> ID：10122189
> 
> 赞同：0
> 
> 时间：2012-04-12T10:57:50.867
> 
> 标签：jquery, ajax, database, zend-framework

我正在构建一个基于网络的照片和文本编辑器。我遇到的问题最好用一个例子来说明：

用户可以为其文本选择颜色。颜色是通过拖动滑块来选择的，因此每秒变化 100 次。文本的颜色必须在数据库中更新。我不是每秒执行 100 次写入，而是像这样构建它：在 3 秒**不**滑动后，更新数据库。

用户还可以查看他们的“页面”示例。该示例纯粹由从数据库中读取的 html 和 css 生成。但是如果用户尝试在更改文本颜色后的**3 秒内查看他的示例，他会在示例中看到错误的颜色。**

有没有人有处理这样的问题的好主意？我正在考虑以某种方式进行缓存，但我对此没有太多经验，也无法想象解决方案。

我正在使用 Zend 框架和 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:10:45.857

3 秒在 UI 设计中是相当长的时间，所以也许你应该在这里重新考虑你的架构。

滑块是 JQuery UI 吗？如果是，您可以将数据库调用绑定到滑块的“slidechange”事件，以确保用户已停止滑动。

[http://jqueryui.com/demos/slider/#events](http://jqueryui.com/demos/slider/#events)

也许您还应该考虑基于输入表单中的值而不是数据库中的值来构建示例页面。即使您进行数据库调用，它也可能（理论上）在加载示例页面之前尚未完成更新数据库中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:07:07.053

您可以更改它，以便在以下情况下更改事物会引发排队发送到服务器的“持久性”事件：

*   用户点击保存按钮
*   用户去预览他的更改
*   x 秒后。

因此，如果用户快速进行 1,2 或 22 次更改，他们将排队，然后一次全部发送（后端也可以足够聪明地忽略 4 个 reudant “更改颜色”事件中的 3 个，并且只保留最新的一个） .

# java - 如何在 Java 中使用 JiBX 解析 spdx 文件

> ID：10122190
> 
> 赞同：1
> 
> 时间：2012-04-12T10:57:58.400
> 
> 标签：java, parsing, jibx

我正在尝试使用 Java 中的 JiBX 解析 spdx 文件。我只想解析一些元素，而不是文件中的所有元素，而不是按顺序解析，并且某些元素重复。我要解析的一些元素是：<creator>、<packageDownloadLocation> 或<checksumValue>。我遇到的问题是，解析后对象的属性为null。对象本身不为空。

你能帮我么？

绑定 XML 文件是：

```
<binding>
    <mapping name="RDF" class="com.transfer.SpdxTransferObject" ordered="false" flexible="true">
        <namespace uri="http://www.w3.org/1999/02/22-rdf-syntax-ns#" prefix="rdf" default="all"/>
        <namespace uri="http://usefulinc.com/ns/doap#" prefix="j.0" />
        <namespace uri ="http://www.w3.org/2000/01/rdf-schema#" prefix="rdfs" />
        <namespace uri="http://spdx.org/rdf/terms#" prefix="noPrefix"/>
            <value name="creator" field="mCreator" get-method="getCreator"  set-method="setCreator" default="none"/>
</mapping> 
```

SpdxTransferObject 是一个带有 setter 和 getter 的简单 Java bean：

```
public class SpdxTO implements Serializable
{

    /** Default serial version ID */
    private static final long serialVersionUID = 1L;

    private String mCreator;

    private String mPackageDownloadLocation;

    private String mChecksumValue>;

    /* getters and setters */
    ......
} 
```

Java代码是：

```
public class ParseSpdxFile
{
    /** Our logger */
    private static Log sLog = LoggerFactory.create();

    public static SpdxTransferObject parseFromFile(final File pFile) throws ValidationException
    {
        sLog.debug("Parsing the Spdx file");
        SpdxTO data = null;
        JiBXFileHandler handler;
        try
        {
            handler = new JiBXFileHandler(BindingDirectory.getFactory(SpdxTransferObject.class));
            data = (SpdxTransferObject) handler.loadFromXML(pFile);
        }
        catch (JiBXException e)
        {
            throw new ValidationException(e);
        }
        catch (Exception e)
        {
            throw new ValidationException(e);
        }
        return data;
    }
}

public class JiBXFileHandler
{
    private final IBindingFactory mBfact;

    public JiBXFileHandler(final IBindingFactory pBfact)
    {
        mBfact = pBfact;
    }

    public Object loadFromXML(final File pFile) throws Exception
    {

        FileInputStream in = null;
        try
        {
            IUnmarshallingContext uctx = mBfact.createUnmarshallingContext();
            in = new FileInputStream(pFile);
            return uctx.unmarshalDocument(in, null);
        }
        finally
        {
            IOUtils.closeQuietly(in);
        }
    }
} 
```

spdx 文件如下：

```
<rdf:RDF
  xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  xmlns:j.0="http://usefulinc.com/ns/doap#"
  xmlns="http://spdx.org/rdf/terms#"
  xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#">
  <SpdxDocument rdf:about="http://www.spdx.org/tools#SPDXANALYSIS">
    <reviewed>
      <Review>
        <rdfs:comment>This is just an example.</rdfs:comment>
        <reviewDate>2010-02-10T00:00:00Z</reviewDate>
        <reviewer>Person: Joe Reviewer</reviewer>
      </Review>
    </reviewed>
    <hasExtractedLicensingInfo>
      <ExtractedLicensingInfo rdf:nodeID="A0">
        <licenseText>license text</licenseText>
        <licenseId>LicenseRef-3</licenseId>
      </ExtractedLicensingInfo>
    </hasExtractedLicensingInfo>
    <specVersion>SPDX-0.8</specVersion>
    <describesPackage>
      <Package rdf:about="http://www.spdx.org/tools#SPDXANALYSIS?package">
        <licenseDeclared>
          <ConjunctiveLicenseSet>
            <member>
              <License rdf:about="http://spdx.org/licenses/MPL-1.1">
                <licenseId>MPL-1.1</licenseId>
              </License>
            </member>
            <member rdf:nodeID="A0"/>
            <member>
              <ExtractedLicensingInfo rdf:nodeID="A1">
                <licenseText>License text 2</licenseText>
                <licenseId>LicenseRef-2</licenseId>
              </ExtractedLicensingInfo>
            </member>
            <member>
              <ExtractedLicensingInfo rdf:nodeID="A2">
                <licenseText>license text 3</licenseText>
                <licenseId>LicenseRef-4</licenseId>
              </ExtractedLicensingInfo>
            </member>
            <member>
              <ExtractedLicensingInfo rdf:nodeID="A3">
                <licenseText>licence text 4</licenseText>
                <licenseId>LicenseRef-1</licenseId>
              </ExtractedLicensingInfo>
            </member>
            <member>
              <License rdf:about="http://spdx.org/licenses/Apache-2">
                <licenseId>Apache-2</licenseId>
              </License>
            </member>
          </ConjunctiveLicenseSet>
        </licenseDeclared>
        <packageDownloadLocation>http://www.spdx.org/tools</packageDownloadLocation>
        <hasFile>
          <File>
            <copyrightText>Copyright 2010, 2011</copyrightText>
            <licenseComments></licenseComments>
            <licenseInfoInFile rdf:resource="http://spdx.org/licenses/Apache-2"/>
            <licenseConcluded rdf:resource="http://spdx.org/licenses/Apache-2"/>
            <fileType>SOURCE</fileType>
            <checksum>
              <Checksum>
                <checksumValue>2fd4e1c67a2d28fced849ee1bb76e7391b93eb12</checksumValue>
                <algorithm>SHA1</algorithm>
              </Checksum>
            </checksum>
            <fileName>src/org/spdx/parser/Project.java</fileName>
          </File>
        </hasFile>
        <licenseInfoFromFiles rdf:nodeID="A3"/>
        <checksum>
          <Checksum>
            <checksumValue>2fd4e1c67a2d28fced849ee1bb76e7391b93eb12</checksumValue>
            <algorithm>SHA1</algorithm>
          </Checksum>
        </checksum>
        <sourceInfo>Version 1.0 of the SPDX Translator application</sourceInfo>
        <packageVerificationCode>
          <PackageVerificationCode>
            <packageVerificationCodeValue>4e3211c67a2d28fced849ee1bb76e7391b93feba</packageVerificationCodeValue>
            <packageVerificationCodeExcludedFile>SpdxTranslatorSpdx.txt</packageVerificationCodeExcludedFile>
            <packageVerificationCodeExcludedFile>SpdxTranslatorSpdx.rdf</packageVerificationCodeExcludedFile>
          </PackageVerificationCode>
        </packageVerificationCode>
        <packageFileName>spdxtranslator-1.0.zip</packageFileName>
        <description>This utility..</description>
        <licenseInfoFromFiles rdf:nodeID="A0"/>
        <hasFile>
          <File>
            <artifactOf>
              <j.0:Project>
                <j.0:homepage>http://www.openjena.org/</j.0:homepage>
                <j.0:name>Jena</j.0:name>
              </j.0:Project>
            </artifactOf>
            <copyrightText>(c) Copyright 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009 jena</copyrightText>
            <licenseComments></licenseComments>
            <licenseInfoInFile rdf:nodeID="A3"/>
            <licenseConcluded rdf:nodeID="A3"/>
            <fileType>ARCHIVE</fileType>
            <checksum>
              <Checksum>
                <checksumValue>76e739c67a2d28fced849ee1bb76e7391b93eb12</checksumValue>
                <algorithm>SHA1</algorithm>
              </Checksum>
            </checksum>
            <fileName>Jenna-2.6.3/jena-2.6.3-sources.jar</fileName>
          </File>
        </hasFile>
        <name>SPDX Translator</name>
        <licenseInfoFromFiles rdf:nodeID="A1"/>
        <licenseInfoFromFiles rdf:nodeID="A2"/>
        <hasFile>
          <File>
            <artifactOf>
              <j.0:Project rdf:about="http://svn.apache.org/repos/asf/commons/proper/lang/trunk/doap_lang.rdf">
                <j.0:homepage>http://commons.apache.org/lang/</j.0:homepage>
                <j.0:name>Apache Commons Lang</j.0:name>
              </j.0:Project>
            </artifactOf>
            <copyrightText>Copyright 2001-2007</copyrightText>
            <licenseComments></licenseComments>
            <licenseInfoInFile rdf:resource="http://spdx.org/licenses/Apache-2"/>
            <licenseConcluded rdf:resource="http://spdx.org/licenses/Apache-2"/>
            <fileType>ARCHIVE</fileType>
            <checksum>
              <Checksum>
                <checksumValue>76e739c67a2d28fced849ee1bb76e7391b93eb12</checksumValue>
                <algorithm>SHA1</algorithm>
              </Checksum>
            </checksum>
            <fileName>lib/commons-lang-2.3.zip</fileName>
          </File>
        </hasFile>
        <copyrightText> Copyright 2010, 2011 Source </copyrightText>
        <licenseComments>The declared license</licenseComments>
        <licenseInfoFromFiles>
          <License rdf:about="http://spdx.org/licenses/Apache-1">
            <licenseId>Apache-1</licenseId>
          </License>
        </licenseInfoFromFiles>
        <summary>SPDX Translator utility</summary>
        <licenseInfoFromFiles rdf:resource="http://spdx.org/licenses/MPL-1.1"/>
        <licenseInfoFromFiles rdf:resource="http://spdx.org/licenses/Apache-2"/>
        <licenseConcluded>
          <ConjunctiveLicenseSet>
            <member rdf:resource="http://spdx.org/licenses/MPL-1.1"/>
            <member rdf:nodeID="A1"/>
            <member rdf:nodeID="A3"/>
            <member rdf:nodeID="A2"/>
            <member rdf:resource="http://spdx.org/licenses/Apache-2"/>
            <member rdf:nodeID="A0"/>
            <member rdf:resource="http://spdx.org/licenses/Apache-1"/>
          </ConjunctiveLicenseSet>
        </licenseConcluded>
      </Package>
    </describesPackage>
    <hasExtractedLicensingInfo rdf:nodeID="A1"/>
    <hasExtractedLicensingInfo rdf:nodeID="A3"/>
    <creationInfo>
      <CreationInfo>
        <created>2010-02-03T00:00:00Z</created>
        <rdfs:comment>This is an example of an SPDX spreadsheet format</rdfs:comment>
        <creator>Person: Steven O'Neall</creator>
        <creator>Company: Source Code Company</creator>
        <creator>Tool: SourceCode-V1.2</creator>
      </CreationInfo>
    </creationInfo>
    <hasExtractedLicensingInfo rdf:nodeID="A2"/>
    <reviewed>
      <Review>
        <rdfs:comment>Another example reviewer.</rdfs:comment>
        <reviewDate>2011-03-13T00:00:00Z</reviewDate>
        <reviewer>Person: John Reviewer</reviewer>
      </Review>
    </reviewed>
  </SpdxDocument>
</rdf:RDF> 
```

# c# - 静态常量类在添加静态只读属性时导致错误

> ID：10122191
> 
> 赞同：0
> 
> 时间：2012-04-12T10:58:04.390
> 
> 标签：c#, static, windows-services, constants, readonly

```
public static class Constants
{

    public const string Fields_Fax = "FAX";
    public const string Fields_DataProtectionPost = "DATAPROTECTIONPOST";
    public const string Fields_DataProtectionTel = "DATAPROTECTIONMOBILE";        
    public const int AddressBookID = 595204;

    public static readonly XName PersonXName = "Person"; 
```

此类在窗口服务解决方案中。该服务已在本地安装并使用上述值运行。

我接手了这个项目，并向这个类添加了一些我自己的静态只读 XName 类型。现在，当我使用该类中的任何属性时，出现错误“'This.App' 的类型初始化程序引发异常”。

只有 1 个项目，我重新编译了解决方案并重新安装了窗口服务。知道问题是什么吗？

例外是：

```
"The type initializer for 'Constants' threw an exception" 
```

...内部例外是：

```
"The ' ' character, hexadecimal value 0x20, cannot be included in a name." 
```

...我注释掉了我的更改，它读取正确，没有错误。所以我只添加了 1 行，它看起来类似于“Person”常量但导致它失败：

```
public static readonly XName cor_Tel_GeneralXName = "Tel General"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:27:15.470

`XName`用作 XML 节点，因此受到命名 XML 节点的通常限制。XML 节点的名称中不能有空格。

# c# - c# WPF 中不用于 shift 键的修饰键

> ID：10122194
> 
> 赞同：0
> 
> 时间：2012-04-12T10:58:06.280
> 
> 标签：c#, wpf

我正在触发换档按下事件，如下所示：

```
KeyEventArgs x = new KeyEventArgs(Keyboard.PrimaryDevice, Keyboard.PrimaryDevice.ActiveSource,0,Key.LeftShift);

Form1_Window_KeyDown(sender, x); 
```

在 Form1_Window_KeyDown() 函数中，我正在检查按下的键是否为修饰符类型，即 Shift，

```
Keyboard.Modifiers.ToString(); 
```

但它没有显示在修饰符列表中。

请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:39:31.900

另一种检查键是否被按下的方法：

```
if (Keyboard.IsKeyDown(Key.LeftShift)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:03:41.320

你可以检查它

```
(mask & Keyboard.Modifiers.Shift) == Keyboard.Modifiers.Shift 
```

`mask`从系统获得的价值在哪里。

# ios - 如何使用不同形状的 UIButton

> ID：10122198
> 
> 赞同：1
> 
> 时间：2012-04-12T10:58:19.153
> 
> 标签：ios, uibutton

我有下面的 UIButton 背景图像的图像。但是 UIbutton 的形状默认是圆形的。所以 touch up inside event 将只在圆形矩形区域起作用。那么我如何支持以下形状（整个区域）的事件内部修饰。

![在此处输入图像描述](../Images/b1b7aaf95e31ef1273511402d9f2e57a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:00:55.357

您可以使用 UIButtonTypeCustom 并给出正确的框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:02:32.880

[希望这个链接有帮助。](http://iphonedevelopment.blogspot.in/2010/03/irregularly-shaped-uibuttons.html)

要创建不规则形状的按钮，您需要创建自定义按钮并执行 hitTest 以检查是否按下了按钮或按下了空白空间。

# iphone - iPhone：截图

> ID：10122212
> 
> 赞同：2
> 
> 时间：2012-04-12T10:59:23.207
> 
> 标签：iphone

当用户制作屏幕截图（按住主页按钮+电源）时，是否有任何方法可以在应用程序中调用？？？或者可以调用哪些方法？像 applicationDidBecomeActive 还是别的什么？谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T11:20:29.603

[您可以使用此答案](https://stackoverflow.com/questions/8867496/get-last-image-from-photos-app)中的代码定期检查库中的最新照片。

然后检查一些属性，看看它是否来自相机或其他来源：

*   格式应该是PNG
*   尺寸应与屏幕尺寸相匹配
*   一些额外的元数据，也许

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:08:18.337

在 iOS 4.0 中，有一个通知已触发`PictureWasTakenNotification`，但在 iOS 5.0 或更高版本中不再存在。

# css - 删除 :hover 在 :after 元素上

> ID：10122213
> 
> 赞同：3
> 
> 时间：2012-04-12T10:59:26.407
> 
> 标签：css

我正在尝试删除链接的伪选择器中的`:hover`行为`:after`。但我认为这是不可能的。

```
a {
  font-family: Georgia, "Times New Roman", Times, serif;
  font-style: italic;
  font-size: 12px;
  color: #666;
  text-decoration: none
}

a:after {
  content: "·";
  margin: 0 2px 0 6px
}

a:hover {
  text-decoration: underline
}

a:hover:after {
  text-decoration: none
}
```

```
<a href="#">test</a>
<a href="#">test</a>
<a href="#">test</a>
```

签出[JsFiddle](http://jsfiddle.net/3N9vs/)。

可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T11:28:57.517

处理这个问题的最简单方法是`span`在每个链接的文本周围加上 a：

```
<a href="#"><span>test</span></a> 
```

`:hover`仅`span`给出`text-decoration: underline`：_

```
a:hover span {text-decoration: underline} 
```

**见：http:** [//jsfiddle.net/thirtydot/3N9vs/27/](http://jsfiddle.net/thirtydot/3N9vs/27/)

一个类似的老问题：[Cannot undo text-decoration for child-elements](https://stackoverflow.com/questions/5434819/cannot-undo-text-decoration-for-child-elements)
同样相关：[CSS text-decoration property cannot be overridden by child element](https://stackoverflow.com/questions/4481318/css-text-decoration-property-cannot-be-overridden-by-child-element/4481356#4481356)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T11:13:38.463

您需要赋予`:after`伪元素`position:absolute;`并赋予它`margin`来转移它。锚点还需要内容`display:inline-block;`才能`:after`正确显示。

见：http: [//jsfiddle.net/ECFBR/](http://jsfiddle.net/ECFBR/)

# iphone - 如何将 NSMutableArray 的数据转换为 NSData

> ID：10122216
> 
> 赞同：1
> 
> 时间：2012-04-12T10:59:29.327
> 
> 标签：iphone, objective-c

我想将 NSMutableArray 的内容转换为 NSData，然后将其转换为 pdf。我正在使用以下代码来转换 NSdata 但它给出了错误。我搜索了很多文章但没有得到任何东西

```
 myArray=[[NSMutableArray alloc]init];

  [myArray addObject:@"Jamshed"];
  [myArray addObject:@"Imran"];
  [myArray addObject:@"Ali"];
  [myArray addObject:@"Hussain"];
  [myArray addObject:@"Faisal"];

 for (int i=0; i<[myArray count]; i++)
 {
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:[myArray objectAtIndex:i]];
NSLog(@"data %@",data);
//create code for pdf file for write b4 read and concatenate readed string with data to write in pdf file.  
 }

   - (NSData*) pdfDataWithSomeText;
   {
// For more on generating PDFs, see http://developer.apple.com/library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/GeneratingPDF/GeneratingPDF.html
// The PDF content will be accumulated into this data object.
 NSMutableData *pdfData = [NSMutableData data];

// Use the system default font.
 UIFont *font = [UIFont systemFontOfSize:[UIFont systemFontSize]];

// Use the default page size of 612*792.
 CGRect pageRect = CGRectMake(0, 0, 612, 792);

// Use the defaults for the document, and no metadata.
 UIGraphicsBeginPDFContextToData(pdfData, CGRectZero, nil);

// Create a page.
 UIGraphicsBeginPDFPageWithInfo(pageRect, nil);

// Store some placeholder text.
 NSString *topLine = @"PDF Sample from";
 NSString *bottomLine = @"http://stackoverflow.com/q/10122216/1318452";

// Draw that placeholder text, starting from the top left.
 CGPoint topLeft = CGPointZero;
 CGSize lineSize = [topLine sizeWithFont:font];
 [topLine drawAtPoint:topLeft withFont:font];
// Move down by the size of the first line before drawing the second.
 topLeft.y += lineSize.height;
 [bottomLine drawAtPoint:topLeft withFont:font];

// Close the PDF context.
 UIGraphicsEndPDFContext();  

// The pdfData object has now had a complete PDF file written to it.
 return pdfData;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:07:39.583

将字符串写入 PDF 并不像从这些字符串生成 NSData 那样简单。查看[iOS 的绘图和打印指南 - 生成 PDF 内容](http://developer.apple.com/library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/GeneratingPDF/GeneratingPDF.html)。是的，这是一个很大的文件。阅读。尝试其中的示例。尝试将您自己的字符串添加到他们的示例中。然后，如果您有几乎可以使用的东西，请回到这里询问。

## 生成 PDF

所以这里是来自上面链接的代码，通过使用 NSString 而不是 Core Text 绘制变得更加简单。它绘制输入数组，但可能需要一些更好的算术。你能让它以更结构化的方式绘制吗？

```
- (NSData*) pdfDataWithStrings:(NSArray*) strings;
{
    // For more on generating PDFs, see http://developer.apple.com/library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/GeneratingPDF/GeneratingPDF.html
    strings = [strings arrayByAddingObject:@"https://stackoverflow.com/q/10122216/1318452"];
    // The PDF content will be accumulated into this data object.
    NSMutableData *pdfData = [NSMutableData data];

    // Use the system default font.
    UIFont *font = [UIFont systemFontOfSize:[UIFont systemFontSize]];

    // Use the default page size of 612*792.
    CGRect pageRect = CGRectMake(0, 0, 612, 792);

    // Use the defaults for the document, and no metadata.
    UIGraphicsBeginPDFContextToData(pdfData, CGRectZero, nil);

    // Create a page.
    UIGraphicsBeginPDFPageWithInfo(pageRect, nil);

    // Add the strings within the space of the pageRect.
    // If you want to draw the strings in a column or row, in order, you will need to change this bit.
    for (NSString *line in strings)
    {
        // Hint: you will still need to know the lineSize.
        CGSize lineSize = [line sizeWithFont:font];
        CGFloat x = pageRect.origin.x + (arc4random_uniform(RAND_MAX)/(CGFloat) RAND_MAX*(pageRect.size.width-lineSize.width));
        CGFloat y = pageRect.origin.y + (arc4random_uniform(RAND_MAX)/(CGFloat) RAND_MAX*(pageRect.size.height-lineSize.height));
        CGPoint lineTopLeft = CGPointMake(x, y);

        // Having worked out coordinates, draw the line.
        [line drawAtPoint:lineTopLeft withFont:font];
    }

    // Close the PDF context.
    UIGraphicsEndPDFContext();  

    // The pdfData object has now had a complete PDF file written to it.
    return pdfData;
} 
```

## 保存到文档目录

要保存文档，您需要找到保存用户文档的路径：

```
NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsPath = [paths objectAtIndex:0]; 
```

您将在该路径中保存一个文件。对于您的最终应用，让用户选择自己的名称。对于此示例，名称将被构建到程序中。

```
NSString *pdfFilename = @"StackOverflow.pdf"; 
```

NSString 有一些优秀的路径操作方法，可以很容易地构造你将要写入的路径。

```
NSString *pdfPath = [documentsPath stringByAppendingPathComponent:pdfFilename]; 
```

然后获取您将写入该路径的数据。这里我将调用上面声明的方法。

```
NSData *pdfData = [self pdfDataWithStrings:myArray]; 
```

将这些数据写入路径。对于更好的应用程序，您可能在某些时候想要调用 [pdfData writeToFile:options:error:] 以便您可以显示任何出错的内容。

```
[pdfData writeToFile:pdfPath atomically:NO]; 
```

你怎么知道这是否有效？在模拟器上，您可以记录您写入的路径。在 Finder 中打开此路径，查看它是否包含您期望的 PDF。

```
NSLog(@"Wrote PDF to %@", pdfPath); 
```

在实际设备上，您可以启用 iTunes 文件共享。请参阅[如何为我的应用启用文件共享？](https://stackoverflow.com/q/6029916/1318452)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:02:59.723

在做之前

```
NSData *data = [NSKeyedArchiver archivedDataWithRootObject: myArray]; 
```

您首先将数组转换为 json 字符串

```
NSString *jsonString = [myArray JSONRepresentation]; 
```

您必须先导入 json.h api

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T11:19:19.920

你可以使用转换成 json

```
 NSData *jsonData        =   [NSJSONSerialization dataWithJSONObject:finalDict options:NSJSONWritingPrettyPrinted error:nil]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-12T11:53:39.577

```
myArray=[[NSMutableArray alloc]init];

[myArray addObject:@"Jamshed"];
[myArray addObject:@"Imran"];
[myArray addObject:@"Ali"];
[myArray addObject:@"Hussain"];
[myArray addObject:@"Faisal"];

for (int i=0; i<[myArray count]; i++)
{
    NSData *data = [NSKeyedArchiver archivedDataWithRootObject:[myArray objectAtIndex:i]];
    NSLog(@"data %@",data);
    //create code for pdf file for write b4 read and concatenate readed string with data to write in pdf file.  
} 
```

# c++ - QGraphicsItem 中出现奇怪的“不完整类型”错误

> ID：10122219
> 
> 赞同：2
> 
> 时间：2012-04-12T10:59:38.713
> 
> 标签：c++, qt, qgraphicsitem, incomplete-type

> **可能重复：**
> [是什么导致类型不完整？（QGraphicsItem：源或目标的类型不完整）](https://stackoverflow.com/questions/10108720/what-leads-to-incomplete-types-qgraphicsitem-source-or-target-has-incomplete)

我从这个问题开始：[是什么导致类型不完整？（QGraphicsItem：源或目标的类型不完整）](https://stackoverflow.com/questions/10108720/what-leads-to-incomplete-types-qgraphicsitem-source-or-target-has-incomplete)

如那里所述，我收到以下错误（部分是我自己的翻译）：

> C664：无法将参数 1 从“Qt::CursorShape”转换为“const QCursor &”。源或目标的类型不完整。

在试图找出该项目可能不完整的原因时，我将其剥离为仍然显示错误的最小测试用例。奇怪的是：它绝对*是*最小的......

标题：

```
#include <QGraphicsPixmapItem>

class PhotoItem : public QGraphicsPixmapItem
{
public:
    PhotoItem();
    void someMethod();

protected:
}; 
```

执行：

```
#include "photoitem.h"

PhotoItem::PhotoItem() : QGraphicsPixmapItem()
{
    QPixmap pxm(80, 80);
    pxm.fill(Qt::cyan);
    setPixmap( pxm );
}

void PhotoItem::someMethod()
{
    setCursor(Qt::OpenHandCursor);
} 
```

它不编译，给出如上的错误。但是，在 main 方法中设置光标`item->setCursor(Qt::OpenHandCursor);`就可以了。该错误似乎在其他 QGraphicsItems 中持续存在（至少我测试了 QGraphicsRectItem）。

我完全糊涂了，不知道接下来要检查什么。上面的代码是否适用于其他机器/设置？我还可以测试什么来获取更多信息？

谢谢，路易丝

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T11:04:35.047

在您的 cpp 上，包括以下行：

```
#include <QCursor> 
```

问题是您正在使用的某个类前向声明​​ QCursor（进行前向声明，它是......呃，说“前向声明”是否正确？）。`Qt::OpenHandCursor`有这种类型，但是编译器不知道 QCursor 类是在哪里定义的。在 cpp 中包含进行定义的文件就可以了。

它在您的主要功能中起作用的原因可能是因为您在其中`<QtGui>`包含 QCursor 或其他一些包含 QCursor 的标题，而您却不知道它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:30:28.997

QGraphicsItems::setCursor 期望引用 QCursor 类型的对象，但您尝试传递 Qt::OpenHandCursor ，它是一个枚举元素，即可以用来构造特定 QCursor 实例的常数。

我假设

```
setCursor(QCursor(Qt::OpenHandCursor)); 
```

会做你想做的。

知道您提到的“项目”是如何被声明为工作的会很有趣。

# c# - 弹出式日历

> ID：10122222
> 
> 赞同：0
> 
> 时间：2012-04-12T10:59:49.290
> 
> 标签：c#, asp.net

如何更改 asp.net 中弹出日历的格式。目前显示：MM-dd-yyyy，但我想要 dd-MM-yyyy。我听说 webconfig 文件有一些变化，但它对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:03:25.730

相应地更改`Format`：

```
<ajaxToolkit:Calendar runat="server"
    TargetControlID="Date1"
    CssClass="ClassName"
    Format="dd-MM-yyyy"
    PopupButtonID="Image1" /> 
```

*   [标准日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/bb79761a-ca08-44ee-b142-b06b3e2fc22b.aspx)
*   [Ajax 控制工具包日历](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)

# sencha-touch - 在 NestedList-Sencha Touch 2 中的文本附近添加图像

> ID：10122223
> 
> 赞同：1
> 
> 时间：2012-04-12T10:59:58.707
> 
> 标签：sencha-touch, extjs, sencha-touch-2, nested-lists

我是一个新的煎茶学习者，我想做的是将图像添加到嵌套列表文本中。

我试图修改 kithcensink 示例代码，这是我的嵌套列表

```
 Ext.require('Ext.data.TreeStore', function() {
Ext.define('Kitchensink.view.NestedList', {
    requires: ['Kitchensink.view.EditorPanel', 'Kitchensink.model.Kategori'],
    extend: 'Ext.Container',
    config: {
        layout: 'fit',
        items: [{
            xtype: 'nestedlist',
            store: {
                type: 'tree',
                id: 'NestedListStore',
                model: 'Kitchensink.model.Kategori',
                root: {},
                proxy: {
                    type: 'ajax',
                    url: 'altkategoriler.json'
                }
            },  

            displayField: 'text',

            listeners: {
                leafitemtap: function(me, list, index, item) {
                    var editorPanel = Ext.getCmp('editorPanel') || new Kitchensink.view.EditorPanel();
                    editorPanel.setRecord(list.getStore().getAt(index));
                    if (!editorPanel.getParent()) {
                        Ext.Viewport.add(editorPanel);
                    }
                    editorPanel.show();
                }
            }
        }]
    }
}); 
```

});

我修改了商店文件

```
 var root = {
        id: 'root',
        text: 'Lezzet Dünyası',
        items: [
            {
                text: 'Ana Menü',
                id: 'ui',
                cls: 'launchscreen',
                items: [
                    {
                        text: 'Et Yemekleri',
                        leaf: true,
                        view:'NestedList3',
                        id: 'nestedlist3'
                    },
                    {
                        text: 'Makarnalar',
                        leaf: true,
                        view: 'NestedList2',
                        id: 'nestedlist2'
                    },
                    {
                        text: 'Tatlılar',
                        leaf: true,
                        view: 'NestedList4',
                        id: 'nestedlist4'
                    },
                    {
                        text: 'Çorbalar',
                        view: 'NestedList',
                        leaf: true,
                        id: 'nestedlist'
                    }
                ]
            }
        ]
    }; 
```

我应该如何编辑代码以在嵌套列表文本附近添加图像？

例如，在[这个](http://sencha-nested-list.heroku.com/)站点中你可以看到一个嵌套列表示例，我需要一个靠近 Blues、Jazz、Pop、Rock 的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:29:57.517

通常，您可以通过自定义`getItemTextTpl`（将其放入您的`Ext.NestedList`定义中，例如：

```
getItemTextTpl: function(node) {
  return '<span><img src="image_url" alt="alternative_text">{text}</span>';
} 
```

通过该返回字符串定义您喜欢的任何模板。

# php - PHP 处理档案中的文件

> ID：10122231
> 
> 赞同：0
> 
> 时间：2012-04-12T11:00:44.183
> 
> 标签：php, file, archive

是否有一种 PHP 支持的方式来处理文件存档（.zip、.tar 或任何其他存档），就像我们处理文件夹一样？

例如，如果在我们的根“/www/”目录中有一个包含 .php 文件的存档“/www/catalog.zip”，是否可以将这个存档包含在 PHP 中，以便 PHP 知道存档中的内容如果需要包含一个文件（例如catalog.zip中的test.php），我们可以在不提取“catalog.zip”存档的情况下这样做吗？

不确定是否存在这样的事情（当然可以构建一个应用程序来做这样的事情，但如果使用 PHP 使用提取读取/删除来完成，这将是资源）

或者也许有类似的东西可以使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:03:55.623

也许像`ZipArchive::getStream`with`stream_get_contents`这样的东西会给你文件内容，但我不确定你会如何包含它 - 不要认为 php 可以`include`来自 stdin

# javascript - 使用 JS 和 Twitter API 显示多条推文的问题

> ID：10122233
> 
> 赞同：2
> 
> 时间：2012-04-12T11:00:56.983
> 
> 标签：javascript, api, twitter

我正在尝试使用 js 和 Twitter API 在网站上使用自定义 Twitter 状态列表。但是，显示的推文数量似乎出现了问题（由后缀控制`&count=x`）。虽然它在结束时显示一条推文就好了`&count=1`，并且当从代码中完全删除时会很高兴地显示十条推文，`&count=10`甚至是所有推文`&count=x`，但由于某种原因，它拒绝显示两条、三条或四条推文。有谁知道为什么会这样？

非常感谢。我正在使用的代码如下。

[http://twitter.com/statuses/user_timeline/twitter_username.json?callback=twitterCallback2&count=3](http://twitter.com/statuses/user_timeline/twitter_username.json?callback=twitterCallback2&count=3)

# sql - 使用 SQL_BIG_SELECTS = 1 后从 phpMyAdmin 导出 CSV

> ID：10122235
> 
> 赞同：1
> 
> 时间：2012-04-12T11:00:59.573
> 
> 标签：sql, phpmyadmin

我有以下查询，需要`SET SQL_BIG_SELECTS = 1;`在它之前运行。

```
SET SQL_BIG_SELECTS = 1;
SELECT uc_products.nid, uc_products.model, uc_products.sell_price
FROM uc_products, node
WHERE node.status = 1
GROUP BY nid 
```

这正是我在 phpMyAdmin 中所需要的。我需要将其导出为 CSV 文件，但是当我去导出时，它会丢失`SET SQL_BIG_SELECTS = 1;`查询的一部分并且无法将其重新添加。这意味着在 CSV 文件中，我收到一条错误消息告诉我用于`SET SQL_BIG_SELECTS = 1;`正确运行查询。

有没有人遇到过这个问题或知道如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:32:01.823

您可以在配置文件或服务器启动时设置 SQL_BIG_SELECTS。也可以使用“SET SESSION SQL_BIG_SELECTS=1”在会话的基础上进行设置。

# qt - 在 Qt 中使用 DDE 服务器

> ID：10122238
> 
> 赞同：1
> 
> 时间：2012-04-12T11:01:27.373
> 
> 标签：qt, dde

我到处搜索了一个允许我连接到 DDE 服务器的类。虽然我知道 DDE 已经过时并且存在更好的方法，但它们不适用于我想要连接的内容。

我发现[这](http://web.archive.org/web/20140811042756/http://permalink.gmane.org/gmane.comp.lib.qt.general/91)显然适用于 QT 3，不幸的是我缺乏将其更新到 QT 4 的差异知识。

有人有更新版本、更新时间或其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-22T18:12:55.280

我知道这很古老，但是对于到达这里的人，您需要对该代码进行一些小的更改：

```
void DDEComm::ddeDisconnect()
{
 DdeDisconnect(hConv);
 DdeUninitialize(pidInst);
 connStatus = false;
} 
```

应该成为

```
void DDEComm::ddeDisconnect()
{
 DdeDisconnect(hConv);
 DdeUninitialize(pidInst);
 connStatus = false;
 pidInst = 0;
} 
```

# php - 未定义索引：在第 4 行输入 C:\wamp\www\submit.php

> ID：10122239
> 
> 赞同：1
> 
> 时间：2012-04-12T11:01:58.390
> 
> 标签：php, undefined

嗨，我有未定义索引的问题。在 google chrome 和 mozilla 中，它显示了通知，但在资源管理器中一切正常，它不起作用。我的 PHP 版本是 5.3.5。

代码：HTML文件

```
<div id="stylized" class="myform">
    <form action="submit.php" method="post" id="Form">
        <ol>
            <label for="number">number:</label>
            <input name="number" class="text" type="text" size="28"/>
            <div id="butt">
                <input type="hidden" style="width: 150px; border: 1px solid gray" value="addd" name="type" />
                <input type="submit" class="formbutton" value="add" />
            </div>
            <div id="error">&nbsp;</div>
        </ol>
        <div class="spacer"></div>
    </form>
</div> 
```

提交文件 submit.php

```
switch ($_POST['type']){
    case "register":
        register();
        break;
    case "login":
        login();
        break;
    default:
        die(msg(0, "error"));
} 
```

错误：

```
Notice: Undefined index: type in C:\wamp\www\submit.php on line 4 
```

我已经尝试过：

```
if (isset($_POST['type']))
 $type = $_POST['type']; 
```

以及在其他主题上找到的许多其他建议，但在这种情况下似乎没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:07:22.097

您没有名为“类型”的输入吗？尝试将 $_POST['type'] 更改为 $_POST['number']，如果这是您需要的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:08:11.207

我猜你最终会`submit.php`通过其他途径而不是提交上述表格。

尝试这个：

```
switch (isset($_POST['type']) ? $_POST['type'] : NULL) { 
```

或者另一种通常可以避免但可能还可以的方法：

```
switch (@$_POST['type']) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T11:09:09.023

```
$_REQUEST['type'] = ( isset($_REQUEST['type']) ? $_REQUEST['type'] : '' ) 
```

检查变量是否已设置 - 如果没有，请将其设置为空白，尽管我会检查您的表单以了解未设置帖子字段的原因

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-03T14:10:21.760

你可以用这一行跳过这个错误

```
`ini_set("display_errors", "off");` 
```

当您使用会话或数组时返回此错误，但尚未解释索引，要解决此问题，您需要添加空值或您喜欢的任何值（如果尚未使用此索引）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-12T11:04:18.240

您的

```
<input type="hidden" style="width: 150px; border: 1px solid gray" value="addd" name="type"/> 
```

应该也`id="type"`。

**编辑：**

顺便说一句，刚才提到，这`input`是`hidden`. 也许您`switch`应该基于另一个变量，例如`$_POST['number']`或其他文本字段？

# mercurial - 在 TortoiseHg 中，我如何“将本地与选定内容合并”？

> ID：10122240
> 
> 赞同：2
> 
> 时间：2012-04-12T11:02:04.907
> 
> 标签：mercurial, merge, tortoisehg

实际上，我想做与“与本地合并”相反的事情

澄清一下：我们有一个*发布*分支和一个*默认*分支。在发布分支上进行错误修复时，这是例程：

1.  更新到*发布*分支
2.  实施错误修复并提交
3.  更新到*默认*分支
4.  右键单击*发布*分支中的错误修复提交，然后选择“与本地合并...”

*由于在发布*分支上做了很多工作，因此一直在分支之间进行更新变得很乏味。在以前版本的 TortoiseHg 中，我可以在合并之前选择分支，实际上是在执行“合并本地与选定”。这将消除上面的步骤 1 和 3。

这在 TortoiseHg 中是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T15:03:03.600

三向合并基本上是对称的：您将代码的两个不同版本（两个分支）合并为一个版本（合并提交）。`default`更新到和与 合并`release`，或者以相反的方式进行，在技术上没有区别。特别是，合并冲突完全相同。

在 Mercurial 中，由于命名的分支名称有一个额外的变化：默认情况下，合并提交将继承其*第一个*父分支的名称。如果您在合并之前不更新到`default`，那么第一个父级将是`release`. 但是您可以在提交之前**更改分支名称。**

在命令行上它只是：

```
$ hg update release
$ hg merge default
$ hg branch default
$ hg commit -m 'Merged release into default' 
```

在 TortoiseHg 的 2.0 之前的版本中，您会看到这个对话框来提交合并：

![hgtk 提交对话框](../Images/2d818fb25a0433f87c68958b2993f2e8.png)

提交消息上方的“分支：发布”按钮可用于更改下一个提交的分支 - 合并提交。在 TortoiseHg 2.x 中，对话框如下所示：

![thg 提交对话框](../Images/e4e93e6a5d9f7d3749789f599825ae3f.png)

并且不再有更改分支的按钮。

也许您可以要求 TortoiseHg 开发人员再次添加该按钮，或者您可以使用[Henrik Stuart 的 TortoiseHg](https://bitbucket.org/hstuart/hgtk)，如果您想要一个与现代版本的 Mercurial 兼容的 pre-2.0 TortoiseHg。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:21:35.857

我还没有找到办法，即使命令行合并总是与本地。我只是为每个分支保留一个克隆并在克隆之间切换而不是更新单个克隆。对于大型项目，这可以防止在更改分支时通常耗时的“全部重建”。添加额外的拉动步骤，但总体上节省时间：

1.  在*发布*克隆中，实现错误修复和提交。
2.  在*默认克隆中，从**发布*中拉取并与本地合并。

# node.js - 捕获 node.js 崩溃原因

> ID：10122245
> 
> 赞同：9
> 
> 时间：2012-04-12T11:02:38.557
> 
> 标签：node.js

我有一个用 node.js 编写的脚本，它使用“net”库并通过 tcp 与远程服务通信。该脚本使用“node script.js >> log.txt”命令启动，该脚本中使用 console.log() 函数记录的所有内容都被写入 log.txt，但有时脚本会死掉，我找不到原因，什么也没有在脚本崩溃时登录 log.txt。

如何捕获崩溃原因？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T13:01:04.150

你不能听[`uncaughtException`事件](http://nodejs.org/api/process.html#process_event_uncaughtexception)吗？类似于 => 的东西

```
process.on('uncaughtException', function (err) {
  console.log('Caught exception: ' + err);
}); 
```

PS：之后建议您根据[Felix Geisendörfer 的这篇文章重新启动流程](http://debuggable.com/posts/node-js-dealing-with-uncaught-exceptions:4c933d54-1428-443c-928d-4e1ecbdd56cb)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-13T17:25:44.517

`stdout`通过拆分和捕获异常要容易得多`stderr`。像这样：

```
node script.js 1> log.out 2> err.out 
```

默认情况下，节点将正常输出记录到标准输出，我相信您正在使用`>>`.

如评论中所述，分段错误是 shell 向 stderr 发出的信号，不一定是您的程序。有关其他选项，请参阅此[unix.stackexchange](https://unix.stackexchange.com/questions/53289/does-segmentation-fault-message-come-under-stderr)答案。

# prolog - 关系序言中的关系

> ID：10122246
> 
> 赞同：1
> 
> 时间：2012-04-12T11:02:38.353
> 
> 标签：prolog

我们可以在序言中定义的关系中建立关系吗？

就像我有一个定义如下的关系：

```
relation(CctypeInt,[0-{2,3,4}, 1-{2,3,4}, 2-{2}],Ru1),!. 
```

现在还有一个依赖于 CctypeInt 和 Ru1 的变量

所以我在想类似的东西

```
relation(cctypeint,relation(ru1,...,ru2)) 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:24:16.380

关系由 Prolog 中的谓词定义。没有内置的（但您可以通过使用术语扩展来做到这一点）语法方式来定义程序文本中谓词内的谓词，而且似乎没有理由这样做。您可以简单地编写单独的谓词并引用它们。您当然*可以*有嵌套术语，即术语作为其他术语的子术语。

你是什​​么意思

```
relation(CctypeInt,[0-{2,3,4}, 1-{2,3,4}, 2-{2}],Ru1),!. 
```

? 这是一个陈述谓词 (,)/2 的子句，我怀疑它的意图。另一方面，您当然可以构建和使用 Prolog 术语，例如

```
relation(cctypeint,relation(ru_1,...,ru_n)) 
```

在您的程序中代表您的数据。

# umbraco - 无法为此节点生成 URL，因为它所在的分支要求分配主机名

> ID：10122250
> 
> 赞同：0
> 
> 时间：2012-04-12T11:03:03.440
> 
> 标签：umbraco

我已经安装了 Umbraco 5 并配置了一个站点。然后我在设置部分添加了一个文档类型。一旦我在内容部分添加页面，它就会显示错误“无法为此节点生成 URL，因为它包含的分支需要分配主机名”。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:01:17.317

听起来您有不止一个根级页面。在不添加主机名的情况下，目录下只能有一个根级页面`Content`——这代表您网站的主页，所有其他页面都应在其下方分层添加。

# tomcat - 更新一个关于Tomcat启动的战争

> ID：10122256
> 
> 赞同：0
> 
> 时间：2012-04-12T11:03:39.340
> 
> 标签：tomcat, deployment

我想为在 Tomcat 上运行的应用程序设置更新过程。托管tomcat的服务器只在工作时间开放（它是一个小公司的内部应用程序）。我在想我可以将新战争上传到服务器并设置“某些东西”以在下一次服务器启动时运行。这可能是一个 bat 文件，它将在服务器启动但在 Tomcat 服务启动之前执行，它将删除旧的战争及其分解的文件夹。当我手动更新战争时，我还删除了 Tomcat 的工作文件夹（只是为了确定）。我知道热部署，但我不认为它是一种选择，因为我不太确定它可能对用户当前工作会话产生的影响。

有没有办法在 Tomcat 启动之前运行这样的 bat 文件或另一种方法来进行此更新？Tomcat 版本不是问题。现在正在运行 Tomcat 6，但如果需要，我可以升级到版本 7。

我也在[serverfault](https://serverfault.com/questions/378807/update-a-war-on-tomcat-start-up)上发布了这个，但我在这里发布，如果你认为这违反了条款，我很抱歉，我会删除它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:52:47.520

您可以创建一个批处理文件来执行更新，然后启动 Tomcat。

使用 srvany.exe 或 FireDaemon 使您的脚本成为将在机器启动时启动的 Windows 服务。

因为我更喜欢 Java 而不是 bat 脚本，所以我宁愿使用[Java Service Wrapper](http://wrapper.tanukisoftware.com/doc/english/download.jsp)来对我的 Tomcat 更新和启动进行编程，并使其成为 Windows 服务。

# objective-c - 'assign' 和 'weak' 是互斥的

> ID：10122258
> 
> 赞同：3
> 
> 时间：2012-04-12T11:03:46.827
> 
> 标签：objective-c, ios4, twitter

我正在尝试 TwitPic 使用 GSTwitPicEngine 类在 Twitter 上发布带有文本的图像，该类使用 YAJLiOS，

所以我在我的项目中添加了 YAJLiOS 框架，并且在 YAJLiOS 框架中的文件“YAJLParser.h”中出现了这个（'assign' 和 'weak' 是互斥的）错误。在以下行中显示错误 -

```
@property (assign, nonatomic) __weak id <YAJLParserDelegate> delegate; 
```

当我删除 __weak 时，它变成 Apple Mach-O Linker (Id) Error。

Please help.How to handle this kinda errors.I am not getting the reason.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:01:08.610

可能您现在已经弄清楚了，无论如何，这就是我摆脱此错误的方法：

```
@property (assign) __unsafe_unretained id<YAJLParserDelegate> delegate; 
```

确保`delegate`您的 .h 代码（如果有）中的所有其他声明都`__unsafe_unretained`在以下`@private`部分中：

```
__unsafe_unretained id<YAJLParserDelegate> delegate; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T02:36:37.567

傻我...

尝试

```
@property (unsafe_unretained, nonatomic) id <YAJLParserDelegate> delegate; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:27:10.420

正如您可能已经知道的那样，**assign**和**weak**不是一回事......在功能上它们非常接近，但是weak 更加复杂，并且巧妙地消除了对已处置对象的引用以避免崩溃（除其他事项外，还有保留周期） .

无论如何——怎么办？我最好的猜测是尝试退出 ARC 的向后兼容旧版修复程序......将**_ *weak****替换为*****_unsafe_unretained**看看情况如何。**

# ehcache - spring ehcache 与自填充缓存范围的集成

> ID：10122267
> 
> 赞同：3
> 
> 时间：2012-04-12T11:04:20.143
> 
> 标签：ehcache

我必须整合spring和ehcache，并尝试用**blockingCache**模式来实现它

```
<ehcache:annotation-driven/> 
```

**共享（默认）和方法**的**自填充缓存范围**有一个选项。你能解释一下有什么区别吗？

 **还有带有**selfPopulating**标志的注释**@Cacheable**

 **根据我在一些帖子上读到的

[http://groups.google.com/group/ehcache-spring-annotations/browse_thread/thread/7dbc71ce34f6ee19/b057610167dfb815?lnk=raot](http://groups.google.com/group/ehcache-spring-annotations/browse_thread/thread/7dbc71ce34f6ee19/b057610167dfb815?lnk=raot)

它说当使用**shared**时**只创建一个实例，**并且每次使用相同的缓存名称时都使用相同的实例，所以如果我将**selfPopulating**标志用作一种方法，

> 所有试图访问使用 @Cacheable 注释且 **selfPopulating 标志设置为 true的****其他方法**的所有线程都将暂停，这是我不想要的

 **```
<ehcache:annotation-driven/> 
```

另一方面，当**self-populating-cache-scope = method为所有使用 @Cacheable 注释的方法创建****单独的实例**时，selfPopulating 标志设置为 true，因此不会产生问题。

但是在这种情况下，当我尝试使用**@TriggerRemove**删除一个元素并给出 @Cacheable 中使用的缓存名称时，它会在每个单独的实例中搜索以找到该值吗？这不是开销吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:13:23.517

由 Eric 在上面的 ehcache google 组中回答

> 在所有情况下，都有一个底层 Ehcache 实例。当您设置 selfPopulating=true 时会发生什么是创建了一个 SelfPopulatingCache 包装器。
> 
> 如果 cache-scope=shared 则所有使用该命名缓存的注解将使用相同的 SelfPopulatingCache 包装器 如果 cache-scope=method 则每个方法创建一个包装器
> 
> 请注意，在这两种情况下，SelfPopulatingCache 都是包装器，仍然只有一个实际缓存支持包装器
> 
> 至于阻塞，如果您阅读 SelfPopulatingCache 和 BlockingCache 的文档，您会注意到 ehcache 通过密钥条带化在缓存级别锁定和每个密钥锁定之间做出折衷。 [http://ehcache.org/apidocs/net/sf/ehcache/constructs/blocking/BlockingCache.html](http://ehcache.org/apidocs/net/sf/ehcache/constructs/blocking/BlockingCache.html)******

# android - Android onClick 只工作一次

> ID：10122271
> 
> 赞同：1
> 
> 时间：2012-04-12T11:04:26.483
> 
> 标签：android, button, view, onclick, ontouchlistener

所以我真的很困惑我有一个包含自定义视图（画布）的视图（R.layout.main）

此视图包含一个覆盖在画布上的按钮，但是当我单击该按钮时，OnClicklistener 会触发该事件，但是在单击该按钮之后，该按钮什么也不做

活动 ：

```
public class RunActivity extends Activity implements OnTouchListener, OnClickListener {

    static int width;
    static int height;

    static boolean reset=false;

    //draw d;
    View d;

    Button jump_button;

    //jump
    float last_touchpos=0;
    static boolean jump=false;

    private static Context mContext;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

       //d = new draw(this);
        d = getLayoutInflater().inflate(R.layout.main, null);
        d.setOnTouchListener(this);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        mContext = this;

        //get screen size
        WindowManager wm = (WindowManager) this.getContext().getSystemService(Context.WINDOW_SERVICE);
        Display display = wm.getDefaultDisplay();

        width = display.getWidth();  // deprecated
        height = display.getHeight();  // deprecated

        setContentView(d);

        jump_button = (Button) findViewById(R.id.jump);
        jump_button.setOnClickListener(this);
    }
    public static Context getContext(){
        return mContext;
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        Log.d("touch","touched");

        if (draw.end == true)
        {
            reset=true;
        }
        else
        {
            if(last_touchpos != 0)
            {
                if(last_touchpos < event.getY())
                {
                    jump = true;
                    last_touchpos = 0;
                }
            }
            else
            {
                last_touchpos = event.getY();
            }
        }

        return false;
    }
    @Override
    public void onClick(View arg0) {
        jump = true;
    }
} 
```

布局 ：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <run.alexander.fuchs.draw
        android:id="@+id/canvasview"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <Button
        android:id="@+id/jump"
        android:layout_width="100dp"
        android:layout_height="50dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Jump" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:09:21.737

```
static boolean jump=false; 
```

从此语句中删除**静态**

```
boolean jump=false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:10:16.620

你怎么能确定你的 onClick 被调用一次。在 onClick 方法中使用日志打印消息以确保它被调用一次。您的代码没问题，我希望您的 onClick 工作正常并检查您的其余代码。

# php - 如何垂直拆分pdf文档并按顺序显示页面

> ID：10122275
> 
> 赞同：1
> 
> 时间：2012-04-12T11:04:39.723
> 
> 标签：php, javascript, zend-framework, pdf, pdf-generation

我有一个 pdf 文档，每页有 2 页我想垂直拆分页面并按顺序显示页面（例如，100 页 pfd 文档将转换为 200 页文档）

我想将其编码为 php/javascript（是否可能）。我想将任何 pdf 文档上传到我的网站，然后将其垂直拆分，然后按顺序显示页面

请告诉我如何做到这一点，我已经尝试谷歌但我找不到解决方案

谢谢

编辑：

我正在尝试使用 clipRectangel() 方法：

```
<?php
require_once 'Zend/Pdf.php'; 
$pdf = Zend_Pdf::load('pages.pdf');
$page = $pdf->pages[0]; 
$page->clipRectangle(10, 10, 30, 30); 
$pdf->save('new.pdf'); 
?> 
```

我正在尝试使用 clipRectangle 垂直拆分，但我没有在“new.pdf”中得到任何修改过的 pdf 我也想订购页面，请建议任何更好的使用 zend 的方法。如果您能给我几行代码，那将会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:13:29.040

这是一个相当高的要求。

您最好的选择是使用 Zend_Pdf，它允许在 php 中[加载和更改（未受保护的）PDF 文件。](http://framework.zend.com/manual/en/zend.pdf.create.html)Javascript 无法做到这一点。

这当然不是在任何情况下都适用于任何 PDF 的东西。由于整个过程不像 HTML 文本，因此您可能会截断文本（一页上一半，另一页上一半）。

将 PDF 转换为 HTML 完全是另一回事。

**更新：**我将您的代码仅用于说明。尚未对此进行测试，但如果您遇到错误，您应该能够很快找到解决方案。

```
require_once 'Zend/Pdf.php'; 

$pdf = Zend_Pdf::load('pages.pdf');
$pdfnew = new Zend_Pdf();

foreach ($pdf->pages as $page) {
    $curpage = $page;

    // Clipping for first part, enter your own numbers..
    $curpage->clipRectangle(10, 10, 30, 30);
    $pdfnew->pages[] = $curpage;

    $curpage = $page;

    // Clipping for second part, enter your own numbers..
    $curpage->clipRectangle(10, 10, 30, 30);
    $pdfnew->pages[] = $curpage;
}

$pdfnew->save('new.pdf'); 
```

# ios - 仅使用 iTunes id 删除或取消应用程序

> ID：10122276
> 
> 赞同：-2
> 
> 时间：2012-04-12T11:04:39.837
> 
> 标签：ios, xcode

1.  我可以创建用户在没有 iTunes id 或密码的情况下无法删除的应用程序吗？
2.  我可以创建用户无法在没有 iTunes id 或密码的情况下使用主页按钮取消到后台的应用程序吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:13:30.867

不，不。哲学是用户应该始终感觉可以控制他们的应用程序。您只能逐个设备阻止应用删除（使用设备设置）。

# c++ - RapidXml：无法从 XML 文件中获取子级

> ID：10122278
> 
> 赞同：1
> 
> 时间：2012-04-12T11:04:42.860
> 
> 标签：c++, xml, rapidxml

使用以下 C++ 代码，使用 RapidXml 库，我只能获取顶层的 XML 元素，而不能获取子元素：

```
char *text = ... // XML file shown below
using namespace rapidxml;
xml_document<> doc;
doc.parse<0>(text);
xml_node<> *node = doc.first_node();
while(node != 0) {
    cout << node->name() << " " << node->value() << endl;
    node = node->next_sibling();    // <-- ???
} 
```

XML 文件：

```
<parent>
   <child>123</child>
</parent>
<parent>
   <child>456</child>
</parent> 
```

实际结果：

```
parent
parent 
```

预期结果：

```
parent
child 123
parent
child 456 
```

我怎样才能得到孩子？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:33:32.803

第二个`parent`是第一个的兄弟姐妹（“兄弟姐妹”处于同一级别 - 就像现实生活中的兄弟姐妹一样）。

`node->first_node()`将是 的第一个孩子`node`。

以下（未编译和未经测试的）代码应产生您所追求的输出：

```
xml_node<> *node = doc.first_node();
while(node != 0) {
    cout << node->name() << endl;
    xml_node<> *child = node->first_node();
    while (child != 0)
    {
        cout << child->name() << " " << child->value() << endl;
        child = child->next_sibling(); 
    }
    node = node->next_sibling();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-16T11:45:22.760

首先您可以将 XML 数据保存到文件中，例如“1.xml”

```
<parent>
   <child>123</child>
</parent>
<parent>
   <child>456</child>
</parent> 
```

那我觉得你可以这样做：</p>

```
void Parse(std::string strFilePath)
{
    rapidxml::file<> docFile(strFilePath.c_str());
    rapidxml::xml_document<> doc;
    doc.parse<0>(docFile.data());

    rapidxml::xml_node<> *pNode = doc.first_node();
    for (; pNode != NULL; pNode = pNode->next_sibling())
    {
        std::cout << pNode->name() << std::endl;
        for (rapidxml::xml_node<> *pChildNode = pNode->first_node(); pChildNode != NULL; pChildNode = pChildNode->next_sibling())
        {
            std::cout << " " << pChildNode->name() << " " << pChildNode->value() << std::endl;
        }
    }
} 
```

# javascript - 应用 jquery 函数时需要 Id 吗？

> ID：10122281
> 
> 赞同：0
> 
> 时间：2012-04-12T11:04:52.583
> 
> 标签：javascript, jquery

假设我`p`在文档中有两个标签。当**onMouseOver**事件发生时，我想使用**jQuery调用两种不同的效果。**是否有必要为这两个标签指定 ID。如果不给这些标签提供 ID，就不能实现吗？**`p`**

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T11:06:32.923

您不必**提供**任何东西`id`，但它是唯一标识元素的最佳方式。

您可以改为按类识别：

```
$(".myClass") 
```

按属性：

```
$("[src='image.jpg']") 
```

按父级中的位置：

```
$("p:eq(2)") 
```

[文档](http://api.jquery.com/category/selectors/)中提供了完整的选择器列表

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T11:08:45.620

```
$('p:first'); // first p tag
$('p:last'); // last p tag
$('p').eq(1); // exactly the second p tag 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T11:08:07.743

有几种方法可以选择一个元素/元素：

```
$('.classname')

$('#id')

$('tagname')

$('[attr="value"]') 
```

ETC

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-12T11:15:17.693

虽然 jQuery 可以让你编写更快更简单的脚本，但不幸的是它让你永远无法理解真正的 JavaScript。

```
$("*") //selects all elements.

$(":animated") //selects all elements that are currently animated.

$(":button") //selects all button elements and input elements with type="button".

$(":odd") //selects even elements.

$(":odd") //selects odd elements.$("p") selects all <p> elements.

$("p.intro") //selects all <p> elements with class="intro".

$("p#intro") //selects the first <p> elements with id="intro".

$(this)     //Current HTML element
$("p#intro:first")  //The first <p> element with id="intro"
$("p:eq(2)")        // The third <p> element in the DOM
$(".intro")     //All elements with class="intro"
$("#intro")     //The first element with id="intro"
$("ul li:first")    //The first <li> element of the first <ul>
$("ul li:first-child")  //The first <li> element of every <ul>
$("[href]")     //All elements with an href attribute
$("[href$='.jpg']")     //All elements with an href attribute that ends with ".jpg"
$("[href='#']")     //All elements with an href value equal to "#"
$("[href!='#']")    //All elements with an href value NOT equal to "#"
$("div#intro .head")    //All elements with class="head" inside a <div> element with id="intro" 
```

jQuery – 选择元素[备忘单](http://comp345.awardspace.com/select_element_cheatsheet.pdf)**

# c++ - 将仿函数的实例传递给另一个仿函数

> ID：10122285
> 
> 赞同：1
> 
> 时间：2012-04-12T11:05:08.443
> 
> 标签：c++, functor

出于结构原因，我希望能够将仿函数的实例传递给另一个仿函数。目前，我通过将指向函数的指针传递给我的仿函数来实现等效的操作。

我试图将这个想法封装在下面的一些最小代码中：

```
class A
{
private:
    double _x, _y, _z;

public:
    A (double x, double y, double z) : _x(x), _y(y), _z(z) {};

    void operator() (double t) const
    {
        // Some stuff in here that uses _x, _y, _z, and t.
    }
};

class B
{
private:
    // What is the type of the functor instance?
    ??? A ???

public:
    // How do I pass the instance of A into B at initialisation?
    B (??? A ???) :  ??? : {};

    void operator() (double tau) const
    {
        // Something that uses an instance of A and tau.
    }
};

int main(void)
{
    // I want to do something like this:
    A Ainst(1.1, 2.2, 3.3); // Instance of A.
    B Binst(Ainst);         // Instance of B using instance of A.

    Binst(1.0);             // Use the instance of B.

    return 0
} 
```

本质上，我希望能够链接仿函数。如上所述，我目前通过将函数指针与变量 x、y 和 z 一起传递给 B 来做到这一点。在我的代码中，B 是模板化的，目标是编写一次，以后无需任何修改即可重用它，这意味着将 x、y 和 z 交给 B 并不理想。另一方面，将为我编写的每个程序定制 A。我不介意 B 很乱，但我希望 A 干净整洁，因为这是要暴露的部分。

对于那些了解一些量子力学的人来说，B 是薛定谔方程（或主方程），A 是时间相关的哈密顿量。变量 x、y 和 z 用于构造哈密顿量，t 是时间，允许我使用[odeint](http://headmyshoulder.github.com/odeint-v2/)库（所以我使用 ublas 和其他一些 Boost 位）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:08:26.793

使用参考？

```
class A { /* ... */ };

class B
{
    A &a;

public:
    B(const A &my_a)
        : a(my_a)
    { }

    // ...
}; 
```

# python - 当您移动/拖动窗口时，为什么 pygame 会在 pygame.event.get() 处冻结？

> ID：10122289
> 
> 赞同：6
> 
> 时间：2012-04-12T11:05:19.683
> 
> 标签：python, pygame

基本上我有一个循环（tick、set_caption、screen_fill、event.get()、send_frame_event、flip、repeat）

当我在 Windows 7 上拖动窗口时，循环停止循环，我最终卡在 pygame.event.get() 中，我试图为 get 定义某些事件，例如 get([pygame.QUIT]) 无济于事.

拖动/移动窗口时，只需调用 pygame.event.clear() 即可获得相同的冻结效果。

有解决方法吗？

不是完整的代码，但应该足够了：

```
def start(self):
    self.running = True
    Clock = pygame.time.Clock()
    while self.running:
        self.p += 25
        tickFPS = Clock.tick(self.fps)
        pygame.display.set_caption("Press Esc to quit. FPS: %.2f" % (Clock.get_fps()))
        self.screen.fill([self.p&0xFF,(255-self.p)&0xFF,255])
        self.handleEvents()
        self.raiseEvent("updateFrame")
        pygame.display.flip()
def handleEvents(self):
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            self.running = False
        elif event.type == pygame.KEYDOWN:
            if event.key == pygame.K_ESCAPE:
                self.running = False 
```

完整代码在： http: [//pastie.org/private/wm5vqq3f7xe0xlffy1fq](http://pastie.org/private/wm5vqq3f7xe0xlffy1fq)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:26:54.630

尝试在`pygame.event.pump()`主循环（或 handleEvents 函数）中调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:26:49.627

不知道这是否有帮助：

我意识到问题在于移动窗口窗口，而不是重新调整窗口大小。也许移动和重新调整大小之间有一些相似之处？

我在重新调整大小的文档中发现了这一点：

然后设置显示模式，将几个事件放在pygame事件队列中。当用户请求程序关闭时发送 pygame.QUIT。当显示器获得和失去输入焦点时，窗口将接收 pygame.ACTIVEEVENT 事件。如果显示设置了 pygame.RESIZABLE 标志，则在用户调整窗口尺寸时将发送 pygame.VIDEORESIZE 事件。当必须重新绘制窗口的某些部分时，直接绘制到屏幕的硬件显示将获得 pygame.VIDEOEXPOSE 事件。

和：

请注意，当用户调整游戏窗口大小时，**pygame 不会自动更新其内部屏幕表面**。每次发送 VIDEORESIZE 时都必须调用 set_mode()。这在文档中确实应该更清楚。

也许在移动游戏窗口时，会发生类似的事情？

# shell - bash 编程，将参数插入 bash 别名

> ID：10122290
> 
> 赞同：1
> 
> 时间：2012-04-12T11:05:22.347
> 
> 标签：shell, bash

> **可能重复：**
> [Shell 脚本：如何将命令行参数传递给 UNIX 别名？](https://stackoverflow.com/questions/941338/shell-script-how-to-pass-command-line-arguments-to-an-unix-alias)

如何将参数插入 bash 别名？

例如，每当我创建一个新目录时，我`cd`大部分时间都会进入它，但为此我必须运行两个命令。

```
$ mkdir directory
$ cd directory 
```

所以，我想知道是否可以创建一个新目录并在单个命令中切换到它。试图在我的 .bashrc 文件中添加以下别名：

```
alias mkdir="mkdir $@ && cd $@" 
```

所以，我可以正常调用它`mkdir directory`&它会创建&然后切换到那个目录。但是没有骰子，它没有用！

关于如何将参数插入别名的任何指示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T11:11:49.960

考虑将其定义为一个函数。

```
function mkdir2 {
  mkdir $@
  cd $@
} 
```

您将无法以这种方式将其别名为 mkdir，但它会按照您的预期进行。

# javascript - 使用 requirejs 加载 mustache

> ID：10122291
> 
> 赞同：12
> 
> 时间：2012-04-12T11:05:24.827
> 
> 标签：javascript, requirejs, mustache

我想通过 requirejs 加载和使用 mustache。

也许这个问题已经问过了：
[AMD Module Loading Error with Mustache using RequireJS](https://stackoverflow.com/questions/9439261/amd-module-loading-error-with-mustache-using-requirejs)

无论如何，我想弄清楚如何修复我的代码：

* * *

**main.js**

```
require.config({
    paths: {
        jquery: 'libs/jquery/jquery',
        underscore: 'libs/underscore/underscore-min',
        backbone: 'libs/backbone/backbone-optamd3-min',
        mustache: "libs/mustache/mustache"
    }
});

require([
    'views/app'
    ], function(AppView){
        var app_view = new AppView;
 }); 
```

* * *

**应用程序.js**

```
define([
    'jquery',
    'underscore', 
    'backbone',
    "mustache"
    ], function($, _, Backbone, Mustache) {
        console.log($, _, Backbone, Mustache); // <-- *** Mustache is null ***
        // ......
       }
); 
```

* * *

正如您在`app.js`文件评论中看到的那样，`Mustache is null`......
我应该使用另一个 Mustache 库吗？这是我使用的[Mustache](https://github.com/janl/mustache.js/blob/master/mustache.js)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-12T18:59:50.440

截至 12 年 7 月， Mustache 似乎[支持 AMD 模块](https://github.com/janl/mustache.js/commit/33920ad674126483414b8e879c57558352a382ed)。因此，它现在应该可以使用诸如 require.js 之类的加载器开箱即用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-12T11:10:14.513

你应该在你的 mustache 目录中创建一个新文件 mustache-wrap.js，如下所示：

```
 define(['libs/mustache/mustache'], function(Mustache){
    // Tell Require.js that this module returns a reference to Mustache
    return Mustache;
 }); 
```

然后你的主要将是：

```
 mustache: "libs/mustache/mustache-wrap" 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-26T23:17:27.413

在发布这个问题（和答案）时不确定`RequireJS`2.1.0 是否已经发布，但现在处理这个问题的首选方法是使用`shim`config 元素（[有关项目文档页面的](http://requirejs.org/docs/api.html#config-shim)更多信息）。

您的 main.js 将变为：

```
require.config({
    paths: {
        jquery: 'libs/jquery/jquery',
        underscore: 'libs/underscore/underscore-min',
        backbone: 'libs/backbone/backbone-optamd3-min',
        mustache: "libs/mustache/mustache"
    },
    shim: {
        'mustache': {
            exports: 'Mustache'
        }
    }
});
(...) 
```

这*实际上*与包装器建议的@AntoJs 相同，但没有样板代码。

...但是，由于 Mustache 支持 AMD，因此无需首先包装/填充！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T06:20:18.173

您也可以在使用 mustache 的代码中或在“main.js”中的某处进行内联命名定义（省去创建 *-wrap 文件的麻烦）

```
define('mustache', ['libs/mustache/mustache'], function(){
    // Tell Require.js that this module returns a reference to Mustache
    return Mustache; // from global
});
require(
    ['jquery','underscore','backbone','mustache']
    , function($, _, BB, Mustache){
        // use them
    }
) 
```

# objective-c - 如何在 iPad 应用程序中管理方向

> ID：10122292
> 
> 赞同：1
> 
> 时间：2012-04-12T11:05:28.353
> 
> 标签：objective-c, ipad

我在 appdelagte 类的 navigationcontroller 上添加了一个图像。并设置为

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    loginViewController = [[LoginViewController alloc]initWithNibName:@"LoginViewController" bundle:nil];

    [self.window addSubview:_navController.view];

    _navController.navigationBarHidden = NO;
    navimage = [[UIImageView alloc] init];
    navimage.frame = CGRectMake(300, 18, 177, 47);

    navimage.image = [UIImage imageNamed: @"logo.png"];  

    [_navController.view addSubview:navimage];
    [self.window makeKeyAndVisible];
    return YES;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
return YES;
} 
```

但导航图像位置没有改变。框架在两种模式下都保持不变。

请告诉我在导航控制器图像的情况下如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:19:58.250

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
    return YES;
} 
```

上面的代码应该写在`UIViewController`类中（`LoginViewController`在你的情况下），而不是`AppDelegate`.

如果你只需要纵向，使用这个：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
    return UIInterfaceOrientationIsPortrait(toInterfaceOrientation);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:24:52.023

您应该将此添加到您的控制器 viewDidLoad 方法中，并在您的控制器中添加 shouldAutorotateToInterfaceOrientation 。

```
-(void)viewDidLoad{
 navimage = [[UIImageView alloc] init];
 navimage.frame = CGRectMake(300, 18, 177, 47);

 navimage.image = [UIImage imageNamed: @"logo.png"];  

 [_navController.view addSubview:navimage];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
 return UIInterfaceOrientationIsPortrait(toInterfaceOrientation);
} 
```

# c++ - 在二维向量的特定位置插入

> ID：10122293
> 
> 赞同：0
> 
> 时间：2012-04-12T11:05:28.977
> 
> 标签：c++, vector

我有一个代表二维网格的二维向量；例如`grid[0][2]`。我需要“插入”-*这里可能不是正确的词。*一个特定位置的向量说`grid[3][2]`肯定会有一个`grid[0][0]`，但是当我需要*插入*时，`grid[3][2]`它之前可能没有任何东西，除了`grid[0][0]`以后需要在两者之间留出空间。有没有办法做到这一点？

谢谢您的帮助。

*ps：我应该注意向量的大小是未知的（它们会随着时间的推移而增长）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:24:59.960

我不确定我是否正确理解了您的要求，但是：

```
std::vector<std::vector<int>> grid(4);  // 4 rows

grid[3].resize(3)  // resize 4th row

grid[3][2] = 42; 
```

然后，您的 2D 网格将“看起来”像这样：

```
 |
 - 
 |
 -                  <---  3 empty rows
 |
 --------------
 | 0 | 0 | 42 |
 -------------- 
```

您可以稍后自由调整行的大小。请注意，有第 0 行，但还没有 [0][0] 元素，您必须自己添加它。

# c++ - C++中的模棱两可的函数

> ID：10122294
> 
> 赞同：5
> 
> 时间：2012-04-12T11:05:36.057
> 
> 标签：c++, overloading

我想知道为什么这些声明不起作用（不兼容）

```
void f(int); //p1
void f(const int);//p2
void f(int &);//p3
void f(const int &);//p4 
```

如果我理解得很好，编译器不会发现 (int &) 和 (const int &) 之间的区别，如果我写 f(12) 它将无法在两个第一个声明之间进行选择。我是对的?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T11:08:05.760

p3 和 p4 是完全明确和可区分的，p1 和 p2 不是。（当然 p1/p2 可以与 p3 和 p4 区分开来。）

原因是 value 参数的顶层`const`是不可检测的，实际上在声明中是无用的。例如，您可以执行以下操作：

```
void foo(int x); // declaration
// ...
void foo(const int x){
  // definition/implementation
} 
```

这`const`是一个对调用者来说并不重要的实现细节，因为无论如何你都要复制。那个副本也是它与 just 无法区分的原因`int`，从调用方来看它是*完全相同的*。

请注意，`const int& r`它没有顶级`const`，它是引用常量整数的引用（引用始终是常量）。对于指针，如果未声明可能会更改`const`，另请参阅[this question](https://stackoverflow.com/q/1143262/500104) for where to put `const`。

# c# - 如何决定我应该为 WCF 服务使用哪种协议？

> ID：10122295
> 
> 赞同：0
> 
> 时间：2012-04-12T11:05:36.340
> 
> 标签：c#, wcf, protocols

我几乎完成了一个服务器客户端（套接字）应用程序：

*   发送/接收文件（大尺寸）*   发送/接收命令（聊天、文件资源管理器、任务管理器、重新启动/关闭、锁定鼠标/键盘等）
    然后在我阅读了 WCF 之后，它看起来更适合`Commands`使用而不是 Sockets。

    所以现在我开始逐步使用 WCF，但我对哪种协议最适合我的应用程序感到困惑。在 [.Net 4.0] 中它们太多了，
    您建议我选择哪一个以及为什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:10:53.483

这对你有帮助吗......

[选择交通工具](http://msdn.microsoft.com/en-us/library/ms733769.aspx)

# css - 使网页跨浏览器兼容

> ID：10122296
> 
> 赞同：-2
> 
> 时间：2012-04-12T11:05:41.457
> 
> 标签：css, internet-explorer

我想在所有浏览器版本中显示我的网页...我的代码在 mozilla 和 chrome 中运行良好，但在 Internet Explorer 中无法正常运行。这是似乎与 IE 不兼容的 css 代码....

**编辑**

在过去的 2 个月中，努力为跨浏览器和多分辨率支持创建网页，因为我的设计在分辨率和浏览器支持方面存在多个问题。我是这个设计的新手，我不知道如何去做。我看到一篇关于多分辨率支持的文章，其中指出我们必须使用所有分辨率下所有浏览器都支持的常规 css 代码。另外我听说我们必须将我们的法线`<div></div>`放在一个容器中，这样设计就不会发生冲突当在较低分辨率下查看时相互查看。下面是我的 css 代码，它将在 1680X1050 下工作，并且仅在 Mozilla 中工作。目前我正在使用在所有情况下都可以正常工作的模板。给我一些完美设计的示例，以便我会学会自己设计

```
#image img
{
padding:6px;
border-top:0px solid #ddd;
border-left:0px solid #ddd;
border-bottom:0px solid #c0c0c0;
border-right:0px solid #c0c0c0;
display:inline;
position:relative;
top:-210px;
margin-left:auto;
margin-right:auto; 
}
#hori
{
width: 70em;
margin-left:350px;
position:absolute;
}

#hori ul li
{
display:inline;
float:left;
list-style:none;
}

#hori ul
{
padding:0;
margin-top:-620px; 
}

#hori li
{
display: inline;   
padding:0;
text-align:center;
width:7em; 
float:left;
list-style:none;
height:25px;
margin-left:15px;
background:#38ACEC;
-moz-border-radius: 70px;
border-radius: 70px;
}

#verti 
{
float:bottom;
width:200px;
margin-top:50px;
position:relative;
display: inline;
}

#verti ul li
{
list-style:none;
text-decoration:none; 
}

#verti ul
{
padding:0;
margin:0;
}

#verti li
{
width:150px;
background:#38ACEC;
margin-bottom:9px;
position:relative;
top:170px;
-moz-border-radius:80px;
border-radius:80px;
text-align:center;
}

#slideshow 
{
position:relative;
height:500px;
right:-570px;
top:-280px
}

#slideshow img
{
position:absolute;
top:0;
left:0;
z-index:8;
}

#slideshow img.active
{
z-index:10;
}

#slideshow img.last-active
{
z-index:9;
}
table,th,td
{
border:1px solid black;
width:650px;
position:relative;
right:-480px;
margin-top:-35%;
}
th
{
background-color:#38ACEC;
color:white;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:24:15.593

既然你没有问任何问题，我可以假设问题是：我应该如何使这个 css 在 IE 浏览器中兼容？

实际上有几种方法可以做到这一点：

*   找出在 IE 中哪些 css 属性运行不正确 检查此站点是否有一些常见的 CSS 错误[http://www.webcredible.co.uk/user-friendly-resources/css/internet-explorer.shtml](http://www.webcredible.co.uk/user-friendly-resources/css/internet-explorer.shtml)

*   添加一个内联过滤器以在使用 IE 时呈现不同的 css，如果您想`!`在条件之前添加这个负数，则使用与 IE 兼容的 css。

*   使用相同的过滤器制作 2 个不同的 css 文件，它们包含在您的 html 页面顶部

`<!--[if lt IE #version]>`

```
<link rel="stylesheet" type="text/css" href="styleIE.css" /> 
```

希望这可以帮助你。

# delphi - 如何在 delphi 中使用这个连字符库？

> ID：10122297
> 
> 赞同：0
> 
> 时间：2012-04-12T11:05:48.307
> 
> 标签：delphi, hyphenation

这是[Synopse delphi 开源](http://synopse.info/forum/viewtopic.php?id=74)的连字符库。

该演示是一个控制台应用程序。我不知道如何在 GUI 应用程序中使用它。

以下是我的测试，但不起作用。它不显示带有连字符（或分隔符）的单词。该库可以在[这里下载：](http://synopse.info/files/hyphen.zip)

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, hyphen, StdCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    procedure testhyphenator;
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

{ TForm1 }

procedure TForm1.testhyphenator;
var
  h: THyphen;
  s: string;
  F, L: Integer;
begin
  s := 'hyph_en_US.txt'; //this is from the folder, is that correct to call?
  if FileExists(s) then 
  begin
    F := FileOpen(s, fmOpenRead);
    L := FileSeek(F, 0, soFromEnd);
    if L > 0 then 
    begin
      SetLength(s, L);
      FileSeek(F, 0, soFromBeginning);
      FileRead(F, s[1], L);    
    end;
    FileClose(F);
  end;
  h := THyphen.Create(s);
  h.Execute('pronunciation'); //is this correct?
  ShowMessage(h.filllist); //not display hyphenated word
end; 
```

它不显示带连字符的单词。在演示中，我也对构造函数感到困惑：

```
H := THyphen.create('ISO8859-1'#10'f1f'#10'if3fa/ff=f,2,2'#10'tenerif5fa');
 writeln('"',H.Execute('SchiffahrT'),'"'); writeln(H.FillList);
 ... 
```

作者还附上了obj文件。如果我想将它编译成单个exe，该怎么做？

你能帮我理解如何正确使用它吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:43:09.570

*免责声明*：我使用了一个不是最近发布的连字符，它可能与[最新版本](http://synopse.info/files/hyphen.zip)不同步。

以下是我的观点：

分发的编译

*   我在Delphi 7下编译过，没**问题**。

连字符.rc 文件

*   发行版中没有**hyph_en_EN.dic**文件。如果您要重建 hyphen.res，您可能需要使用以下方法修复**hyphen.rc ：**

连字符文本 HYPH_EN_US.dic

*   我没有检查`hyphen.res`发行版中的文件是否包含`hyph_en_EN.dic`和/或`hyph_en_US.dic`.

*.dic 文件在我的发行版中可用

*   hyph_it_IT.dic
*   hyph_es_ES.dic
*   hyph_fr_FR.dic
*   hyp_en_US.dic
*   hyp_de_DE.dic

对片段中评论的回答

```
s := 'hyph_en_US.txt'; //this is from the folder, is that correct to call? 
```

不！正确的文件扩展名是`.dic`. 你应该改写：

```
s := 'hyph_en_US.dic; 
```

下面就ok了（可以参考THyphen类的定义）：

```
Execute('pronunciation'); // is this correct? 
```

以下是好的（但它不起作用，因为`h`作为一个`THyphen`实例没有正确初始化）：

```
ShowMessage(h.filllist); //not display hyphenated word 
```

你对构造函数的关心

```
H := THyphen.create('ISO8859-1'#10'f1f'#10'if3fa/ff=f,2,2'#10'tenerif5fa'); 
```

这只是设置的正确方法之一`THyphen`（再次参考`THyphen`类的定义等）。

例如：

```
H := THyphen.create('EN'); 
```

使用 Delphi 2007 在 GUI 应用程序中利用连字符

*   我可以说只要`THyphen`实例构造正确就可以了（不要忘记包含`hyphen.res`资源文件`{$R hyphen.res}`，该`hyphen.obj`文件已经在`hyphen.pas`单元中链接）。

最后但是同样重要的

*   请随时与Synopse背后的伟人[Arnaud](https://stackoverflow.com/users/458259/arnaud-bouchez) [Bouchez 取得联系](http://synopse.info/)。他是 Stackoverflow 的成员，并且随时准备提供帮助，而且他还是顶级的[delphi](/questions/tagged/delphi "显示标记为“delphi”的问题")用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:23:46.583

我没有方便地安装我的 Delphi，所以请理解您可能需要稍微调整一下。

查看连字符代码后，我相信您使用它不正确。构造函数的参数是语言或字符集。

```
h := THyphen.Create('UTF-8'); 
```

或（根据您的文件名，我认为您需要下一个）

```
h := THyphen.Create('EN'); 
```

然后“Execute”用于生成传入字符串的连字符版本。“Execute”是一个返回新字符串的函数。您正在调用它，但没有对结果做任何事情。

```
NewStr := h.Execute('correct'); 
```

“NewStr”现在应该等于“正确”。

如果我正确阅读了代码，“FillList”函数和过程会返回一个列表，其中列出了执行的最后一个单词的所有可能的断字可能性。

# iphone - iOS 应用程序中的 Flickr 集成

> ID：10122299
> 
> 赞同：0
> 
> 时间：2012-04-12T11:05:55.963
> 
> 标签：iphone, objective-c, ios

我在 iOS 应用程序中集成 flickr 时遇到问题。当我点击授权按钮时，它会显示警告消息，因为地址无效，Safari 无法打开网页。如果有人知道，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:00:51.340

我最好的猜测是您的项目 plist 中缺少 URL SCHEME。下面的屏幕截图显示了我从 github 下载的 flickr sdk 的当前示例，并且为 URL 方案处理完成了设置。

当 SAFARI 完成验证凭据并希望返回到应用程序时，它称为 oAuth 处理它返回的 URL 可以由 plist 中提到的应用程序处理，我们将使用以下函数从应用程序委托处理因此您需要提供您的 URL 标识符如果您在 flickr api 中注册，您可以获得项目的 URL Scheme。

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
} 
```

![在此处输入图像描述](../Images/3b64c67ddcb75bdddfe19553f72a27c9.png)

# combobox - LWUIT 中的组合框选择突出显示

> ID：10122300
> 
> 赞同：2
> 
> 时间：2012-04-12T11:06:04.170
> 
> 标签：combobox, lwuit

我在 LWUIT 中有一个组合框，当我使用上下箭头时，我看不到选择了哪个项目，所以如何更改 LWUIT 中选择的组合框项目的背景颜色

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:14:17.563

使用`ComboBox`UIID ComboBoxFocus Selected 样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T14:30:07.433

最后我找到了答案，我使用 Cell Renderer 能够更改 ComboBox 项目的样式，并且我使用 Look and Feel 能够更改箭头图标并将其替换为我的图标

```
genderCB.setListCellRenderer(my defined cell renderer); 
```

> 块引用

```
 LookAndFeel lf = UIManager.getInstance().getLookAndFeel();
        try {
            ((DefaultLookAndFeel) lf).setComboBoxImage(Image.createImage(image));

        } catch (Exception ex) {
            ex.printStackTrace();
        } 
```

# java - 时钟缓存算法

> ID：10122304
> 
> 赞同：2
> 
> 时间：2012-04-12T11:06:24.013
> 
> 标签：java, caching, clock, browser-cache

我想了解时钟缓存替换策略的原理。

当它开始工作时会发生什么？例如，缓存大小 = 5。因此，首先我们将 5 个随机对象添加到缓存中。当我认为所有这些对象一开始都具有clockbit = 0时，我是真的吗？那么当第六个对象来的时候，我们必须为它找到一个地方。我们是否应该尝试在没有时钟指针的情况下在缓存中找到相同的对象（仅 ifInCache(comingObject)）？如果缓存中没有这样的对象会发生什么？时钟指针的起始位置在哪里？

我阅读了很多文章，只是想了解有关时钟的主要问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T11:22:10.617

> 当我认为所有这些对象一开始都具有clockbit = 0时，我是真的吗？

如果它们没有被引用，那么是的。

> 我们是否应该尝试在没有时钟指针的情况下在缓存中找到相同的对象（仅 ifInCache(comingObject)）？

是的，您必须检查对象是否已经在缓存中。如果是这样，参考位 (clockbit) 将设置为 1。

> 如果缓存中没有这样的对象会发生什么？时钟指针的起始位置在哪里？

如果对象尚未在缓存中，请在时钟指针处检查对象。如果手的位置尚未满，则手的位置将是缓存中的最后一个位置，否则在两次缓存查找之间保持不变（它将由查找本身递增）。

示例（缓存大小 = 5）：

*   添加`A`-> 手在 0 之前和 1 之后
*   添加`B`-> 手在 1 之前和 2 之后
*   add `C`-> hand at 2 before and at 3 after
*   add `D`-> hand at 3 before and at 4 after
*   添加`E`-> 手在 4 之前和 0 之后
*   add `F`-> hand at 0，检查 的引用位`A`，如果是 0，则替换并增加 hand，否则只增加 hand -> 然后 hand 在 1

请注意，如果所有对象的引用位设置为 1，则手头的对象将被替换，因为在检查对象后，其引用位设置为 0，因此第二次检查对象时该位将为 0。

*编辑*：

这是@PeterLawrey 代码的扩展/调整版本：

```
private final Object[] objects= new Object[5]; 
private final boolean[] referenced = new boolean[5]; //boolean for simplicity
private int clock = 0;

public Object getOrCache(Object obj) {
   for(int i = 0; i < objects.length; ++i) {
     if (obj.equals(objects[i])) {
       referenced[i] = true; //object has been referenced, note that this is for simplicity and could be optimized
       return obj;
     }
   }

   //loop over the entries until there is a non-referenced one
   //reference flags are removed in the process
   while( referenced[clock] ) {
     referenced[clock] = false;
     clock = (clock + 1) % objects.length; //for clarity
   }

   //replace the object at the current clock position and increment clock
   objects[clock] = obj;
   referenced[clock] = true;
   clock = (clock + 1) % objects.length; //for clarity

   return obj;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T11:12:35.663

我认为你自己让事情变得复杂。人们使用这种方法的原因是它非常简单。

这避免了替换最近使用的条目。

```
private final Object[] objects = new Object[5];
private final boolean[] referenced = new boolean[objects.length];
private int clock = 0;

public Object getOrCache(Object obj) {
    for (int i = 0, objectsLength = objects.length; i < objectsLength; i++) {
        Object o = objects[i];
        if (obj.equals(o)) {
            referenced[i] = true;
            return obj;
        }
    }
    while(referenced[clock]) {
        referenced[clock] = false;
        incrClock();
    }
    objects[clock] = obj;
    incrClock();
    return obj;
}

private void incrClock() {
    if (++clock >= objects.length)
        clock = 0;
} 
```

* * *

这不麻烦。

```
private final Object[] objects= new Object[5];
private int clock = 0;

public Object getOrCache(Object obj) {
   for(Object o: objects) 
       if (obj.equals(o))
           return obj;
   objects[clock++ % objects.length] = obj;
   return obj;
} 
```

# iphone - iphone连接本地sql服务器的方法

> ID：10122306
> 
> 赞同：-2
> 
> 时间：2012-04-12T11:06:31.550
> 
> 标签：iphone, objective-c, sql-server-2005

谁能提供一些信息，例如如何将我的 iPhone 应用程序连接到本地 sql server 2005。我尝试在 google 中搜索，但找不到解决方案，任何 url 或链接都会非常有用。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:33:16.257

一件事你不能直接将你的 iPhone 应用程序连接到任何数据库，除了 sqlite 之外的其他数据库你必须创建一个 web 服务，并且可以与数据库进行通信，希望这有帮助

# android - 如何让玩家更难破解游戏关卡数据？

> ID：10122309
> 
> 赞同：3
> 
> 时间：2012-04-12T11:06:46.027
> 
> 标签：android, sql, algorithm, security, encryption

**注意：**这是与 android 相关的，但最好的答案可能不是特定于平台的，因此是其他标签。

考虑一个类似于愤怒的小鸟的游戏：你有很多关卡。每次你完成一个关卡，下一个关卡都可以玩，但之前不行。如何让玩家更难破解我的游戏文件并解锁不应该可用的关卡？假设进度数据存储在本地。

**我的想法：**

在 android 上，所有应用程序文件都存储在一个文件夹中，用户只有在具有 root 访问权限时才能访问该文件夹（默认情况下，他们从不这样做，但只要你谷歌一点，通常很容易获得）。现在，我正在使用一个看起来像这样的 sqlite 数据库：

```
LevelId = pk | UnlockStatus = int, 0 = locked, 1 = unlocked, 2 = completed with 1 star, ... 
```

只要用户没有 root 权限或根本不熟悉应用程序文件的存储位置，这很好。但是，如果他们有 root，则此文件很容易编辑。

据我所知，愤怒的小鸟将其关卡数据存储在一个`.lua`文件中，至少根据其名称。我找不到包含级别信息的文本文件或数据库文件。在文本编辑器中打开它`.lua`只会显示乱码。我还没有尝试过十六进制编辑器。

使用 sql 表非常方便。有没有一种简单的方法可以将进度数据存储在 sql 表中，这样用户会更难理解它？理想情况下，实施起来也不应该太耗时。作为一款离线游戏，我不在乎玩家是否破解它，所以我正在寻找最好的质量 - 实施时间权衡。然而，理论上的答案可以产生更多的实施时间以获得更高的质量，但也值得赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T11:13:21.453

你最好的选择是使用某种加密来保存数据。在 android 中，SQLite 不提供数据库级别的加密。但是，您可以加密表中的值（记录）并在查询后对其进行解密。

另一种方法是将您的数据作为键/值对保存在内部或外部存储器中的某种文本文件（愤怒的小鸟中的 .lua 示例）中，并对文件内容执行加密。另一方面，在运行时解密它并读取您的键/值对。

太棒了！问题解决了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:17:38.720

一个简单的方法：**为每个玩家存储不同的级别数据。**

*代码少于 5 行：*

```
//encrypt code:
save_level = "level_txt" + "#"+ md5("gamename" + "playername" + level_txt)

//decrypt code:
level_plaintxt, md5_level = save_level.split("#")
if (md5_level == md5("gamename" + "playername" + level_plaintxt))
  return level_plaintxt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T11:34:16.763

入侵存储在设备本地（或最终远程）上的数据（游戏二进制文件/关卡数据/高分表等）总是可以被真正想要并知道如何做的人访问（和解码）。

您添加的每一层安全性只会使黑客更加困难（并且需要更长的时间）。有时，即使添加额外的安全层也需要更多的时间来实施，而不是让黑客理解它。（计算史上有著名的例子，一个是 XBox IIRC）。

*默默无闻的安全*性是您在加密案例中的数据时尝试做的事情。从长远来看，这还不够。尤其是当您的项目遇到大量观众时。

# javascript - 如何在 ASP.NET 中对图像源 URL 进行哈希处理

> ID：10122310
> 
> 赞同：0
> 
> 时间：2012-04-12T11:06:47.230
> 
> 标签：javascript, asp.net, url, hash

嗨，我想发送带有图像源哈希的 url。怎么做？

代码 ：

```
Image img_ = new Image();          
img_.ImageUrl = "ShowImageInRuntime.aspx?FileName=C://Images//Image.jpg"; 
```

我不想在页面中看到我的本地路径。谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:09:50.363

您需要在发送之前执行路径加密和 base 64 编码，并在处理程序中执行相反的操作。

其他选项是维护一个映射 XML，其中 XML 将包含路径和相应的标识符。在您的应用程序中获取带有路径的节点并选择 id 并将其发送到 url。在处理程序中执行相反的操作以获取路径。

**更新**：添加示例代码

以 GUID 作为 ID 和相应文件名的 XML 文件。通过使用 guid，人们无法轻易猜出随机 id。

```
<?xml version="1.0" encoding="utf-8" ?>
<mappings>
  <map id="485D9075B9CA4d8d9DBA1AD9CD09FC13" fileName="c:\images\image1.jpg"/>
  <map id="475D4A22B1FA4eda8234007BD327D7B9" fileName="c:\images\image2.jpg"/>
  <map id="77623BF3094440c49AC65CEF76D1B824" fileName="c:\images\image3.jpg"/>
</mappings> 
```

使用 LINQ to XML

```
public class ImageMapper
{
    private XDocument Document { get; set; }

    public ImageMapManager()
    {
        Document = XDocument.Load("Map.xml");
    }

    public string GetFileNameFromId(string id)
    {
        var result = from node in Document.Descendants("map")
                     where node.Attribute("id").Value.Equals(id, StringComparison.InvariantCultureIgnoreCase)
                     select node.Attribute("fileName").Value;
        return (result == null || result.Count() == 0) ? null : result.ElementAt(0);
    }
    public string GetIdFromFileName(string fileName)
    {
        var result = from node in Document.Descendants("map")
                     where node.Attribute("fileName").Value.Equals(fileName, StringComparison.InvariantCultureIgnoreCase)
                     select node.Attribute("id").Value;
        return (result == null || result.Count() == 0) ? null : result.ElementAt(0);

    }
} 
```

# .htaccess - htaccess 文件标签中的多个文件

> ID：10122311
> 
> 赞同：11
> 
> 时间：2012-04-12T11:06:47.980
> 
> 标签：.htaccess

如何在 htaccess 文件标签中添加多个文件？下面的代码适用于一个文件。

```
<Files wp-login.php>
Order Deny,Allow
Allow from 191.211.9.1
Deny from all
</Files> 
```

我最终使用这个：

```
<filesMatch "^(wp-login|wp-file)\.php$">
Order Deny,Allow
Allow from 190.190.0.1
Deny from all
</filesMatch> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T11:13:56.930

尝试这样的事情（*未经测试，但应该可以*）：

```
<Files ~ "^(admin|wp-login|one-more-file)\.php$"> 
```

或这个：

```
<FilesMatch "^(admin|wp-login|one-more-file)\.php$"> 
```

# asp.net-mvc - MVC 应用运行后的 url 是 Home/Index。如何改变它？

> ID：10122312
> 
> 赞同：0
> 
> 时间：2012-04-12T11:06:53.577
> 
> 标签：asp.net-mvc

在我运行 MVC 中的程序后，它的 url 是 Home/Index。在哪里改变这个？我想检查用户是否已登录，以重定向其他页面。如果他没有登录，那么 url 可以是 Home/Index。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:10:23.233

如果您使用的是 MVC，您应该查看使用[授权操作过滤器](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)

如果您使用表单身份验证，则在 web.config 中设置未通过身份验证时访问的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:11:59.803

对于您问题的第一部分（路线），请查看默认路线，它通常设置为

```
 routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

哪个在 Web 应用程序的 Global.asax 文件中，这就是为什么你会看到你所看到的。

你真的需要阅读 ASP.Net Routing - [http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T11:13:26.697

你有点问两件事。

因此，您的应用程序会自动转到，`Home/Index`如果您双击`Global.asax`文件，您将找到以下代码。

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
     new { controller = "Home", action = "Index", id = UrlParameter.Optional } 
     );
} 
```

更改自定义默认值的*“Home”*和*“Index”*字符串。

现在，对于您的登录要求，您可以保留默认路由并执行以下操作：

```
public class HomeController
{
 public ActionResult Index()
 {
   if(!Request.IsAuthenticated)//if NOT authenticated
   {//go somewhere else
    return RedirectToAction(actioName, controllertName); 
   } 
   //for logged in users
   return View();
 }
} 
```

# ruby-on-rails - 如何使用 YouTube SUP API 检索某些预定义用户最近上传的内容？

> ID：10122313
> 
> 赞同：2
> 
> 时间：2012-04-12T11:06:56.980
> 
> 标签：ruby-on-rails, ruby-on-rails-3, youtube, youtube-api

我希望能够在一次调用 YouTube API 时检查一组用户（最多 200 个左右）的最新视频（近乎实时或最多几分钟），然后存储在我自己的数据库中上传视频。我认为唯一的解决方案是 YouTube SUP API，但我并不完全清楚它是如何工作的，并且想知道是否有人可以解释一下。我已经阅读了关于它的整个 API 文档，但仍然不完全清楚。

我假设可以调用 SUP URL ( `http://gdata.youtube.com/sup`) 并检查用户哈希最近是否有任何活动，如果有，然后用它做一些事情。我的问题是我不明白您如何解释`["b305e88","afd4"]`SUP 提要中的活动，有没有办法指定用户子集，或者您必须搜索整个提要？加载 SUP 提要似乎需要几秒钟的时间。

在[SUP API](https://developers.google.com/youtube/2.0/developers_guide_protocol_sup#Retrieving_SUP_Feed)页面上，它还声明您可以访问一个 URL，例如`https://gdata.youtube.com/feeds/api/users/bbc/events?v=2`获取用户提要的哈希键，但是您可以看到，如果您尝试访问它，链接似乎已损坏。我还能如何获得哈希？

我目前想在使用[youtube_it](https://github.com/kylejginavan/youtube_it) gem 时在 Rails 项目中执行此操作，但我不相信这支持它。如我错了请纠正我。

**编辑**

我的错。需要开发者密钥来获取用户的事件，例如`https://gdata.youtube.com/feeds/api/users/bbc/events?v=2&key=YOUR_DEVELOPER_KEY`

尽管我可能正在考虑使用频道并自动订阅每个用户，但 SUP 方法仍然没有进展。然后，我每分钟都会轮询用户的新视频列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:12:20.760

我建议使用 PubSubHubbub：[http ://apiblog.youtube.com/2010/10/pubsubhubbub-for-youtube-activities.html](http://apiblog.youtube.com/2010/10/pubsubhubbub-for-youtube-activities.html)

每当您正在观看的提要之一更新时，您的 Web 应用程序中的处理程序将自动接收 POST，而 POST 的内容将是更新后的提要本身，从而省去了获取它的麻烦。

除了该博客文章之外，没有太多特定于使用 PuSH 和 YouTube API 的文档，但一般的 PuSH 文档都适用：[https ://pubsubhubbub.appspot.com/](https://pubsubhubbub.appspot.com/)

如果不这样做，SUP 应该仍然可以工作，因此如果您愿意使用它，我们可以尝试进一步调试它。

# c# - 如何直接调用从 DLL 导出的本机函数？

> ID：10122314
> 
> 赞同：-1
> 
> 时间：2012-04-12T11:07:07.433
> 
> 标签：c#

如何直接调用从 DLL 导出的本机函数？有人可以给我一个小例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:10:38.710

取决于你到底想要什么......我的代码中有这样的东西，但这使用了 Win32 API dll

```
[DllImport("user32.dll")]
static extern IntPtr GetForegroundWindow(); 
```

然后打电话

```
 GetForegroundWindow() 
```

好像在类中定义

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T11:09:09.257

这是[微软的例子](http://msdn.microsoft.com/en-us/library/aa288468(v=vs.71).aspx)：

```
class PlatformInvokeTest
{
    [DllImport("msvcrt.dll")]
    public static extern int puts(string c);
    [DllImport("msvcrt.dll")]
    internal static extern int _flushall();

    public static void Main() 
    {
        puts("Test");
        _flushall();
    }
} 
```

如果您需要从本机 dll 生成 C# DLLImport 声明，请观看这​​篇文章：[从本机 dll 生成 C# DLLImport 声明](https://stackoverflow.com/questions/3771648/generate-c-sharp-dllimport-declarations-from-a-native-dll)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T11:09:26.993

`DllImport`下面是该属性的一个简单示例：

```
using System.Runtime.InteropServices;
class C
{
    [DllImport("user32.dll")]
    public static extern int MessageBoxA(int h, string m, string c, int type);
    public static int Main()
    {
        return MessageBoxA(0, "Hello World!", "Caption", 0);
    }
} 
```

此示例显示了声明在本机 DLL 中实现的 C# 方法的最低要求。该方法`C.MessageBoxA()`使用 static 和 external 修饰符声明，并具有使用默认名称*MessageBoxA*`DllImport`告诉编译器实现来自*user32.dll*的属性。

 *参考[这个链接](http://www.techpreparation.com/computer-interview-questions/c-sharp-interview-questions-answers2.htm)*

# .net - 如何检测 RichTextBox 中的多行粘贴

> ID：10122320
> 
> 赞同：1
> 
> 时间：2012-04-12T11:07:35.543
> 
> 标签：.net, vb.net, richtextbox, syntax-highlighting, paste

目前我正在研究一个简单的语法荧光笔，我有几个问题。你能帮帮我吗？

我有一个包含组件类的类库。一切都在 VB.NET 中。它只有一个文件，因此您可以在此处查看[https://gist.github.com/2366507](https://gist.github.com/2366507)。在第 92 行，有 OnTextChanged Sub。我正在考虑将 ProcessAllLines() （如第 128 行）添加到该 Sub 的末尾，并且它起作用了。但是，当我在每次文本更改后向 RichTextBox（我使用的源代码在这里[https://gist.github.com/2366526](https://gist.github.com/2366526)）输入代码时，它正在检查和处理所有行。所以我删除了 OnTextChanged Sub 中的 ProcessAllLines()。

当用户将某些内容粘贴到 SyntaksRichTextBox 时，我正在考虑运行 ProcessAllLines()。但是我不知道该怎么做。我知道它应该是这样的：

```
If [CTRL Pressed] And [V Pressed] Then
ProcessAllLines()
End If 
```

我还希望它在类库中，而不是在应用程序中（Syntaks Demo）。你能帮帮我吗？谢谢。

拉法尔奇米尔，@RafalChmiel

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:34:22.027

## 幼稚检测

您可能想到的第一个解决方案是检测`WM_PASTE`覆盖的消息，`WndProc`但不幸的是，控件在执行粘贴操作时不会将该消息发送给自身。

检测键盘事件（您必须覆盖该`OnKeyDown`功能）并检查组合键（CTRL+V 和 SHIFT+INS）是否是粘贴文本的方式，您可以解决此问题。

```
Protected Sub OnKeyDown(ByVal e As KeyEventArgs)
    Dim ctrlV As Boolean = e.Modifiers = Keys.Control && e.KeyCode = Keys.V
    Dim shiftIns As Boolean = e.Modifiers = Keys.Shift && e.KeyCode = Keys.Insert

    If ctrlV Or shiftIns Then
        ProcessAllLines
    End If
End Sub 
```

它运行*良好*，但您无法捕捉使用鼠标进行的粘贴操作（右键单击以打开上下文菜单）和通过拖放进行的粘贴操作。如果您不需要它们，您可以使用此解决方案（至少它简单明了）。

## 更好的检测

假设：当用户在里面输入时，`RichTextBox`他每次插入一个字符。你怎么能用这个？好吧，当您检测到更大的更改时，您检测到了粘贴操作，因为用户每次不能输入超过一次的字符（由于 Unicode 代理项，这并不总是正确的，但在这种情况下这不是问题）。

它不适用于每个 IME（例如，我没有尝试使用远东语言）和 Unicode 代理，但对于西方语言来说没关系（无论如何，即使它不起作用，您也只需重新处理所有行） . 另请阅读[这篇文章](https://stackoverflow.com/a/23370462/1207195)和[这篇文章](https://stackoverflow.com/a/27229590/1207195)，了解有关 Unicode 和C# 版本的[这个](https://stackoverflow.com/a/10122762/1207195)（双）答案的更多详细信息。

```
Dim _previousLength As Int32 = 0

Protected Sub richTextBox_TextChanged(ByVal sender As Object, ByVal e As EventArgs)
   Dim currentLength As Int32 = richTextBox.Text.Length
   If Math.Abs(currentLength - _previousLength) > 1 Then
      ProcessAllLines
   End If

   _previousLength = currentLength
End Sub 
```

## 完美解决方案

完美的解决方案当然存在（在 Windows 8 或更高版本上），原生富编辑控件发送`EN_CLIPFORMAT`通知消息。它旨在通知 Rich Edit 控件的父窗口发生了特定剪贴板格式的粘贴。然后，您可以覆盖`WndProc`其父级以检测`WM_NOTIFY`此通知的消息。无论如何，这不是几行代码，有关详细信息，请查看 MSDN 上的此链接：http: [//msdn.microsoft.com/en-us/library/windows/desktop/hh768385](http://msdn.microsoft.com/en-us/library/windows/desktop/hh768385(v=vs.85).aspx) (v=vs.85).aspx 。

# java - 基于java中参数的HTTP Get方法

> ID：10122332
> 
> 赞同：2
> 
> 时间：2012-04-12T11:08:20.990
> 
> 标签：java, android

我正在尝试实现一个通过我的网络服务从 mysql 获取数据的类。我以前使用http post从表中获取信息，但这次我打算让用户在editText中输入一个字符串，按搜索和textview来显示查询。例如，假设mysql表有两列: 名字和姓氏；我希望能够通过搜索名字来获取姓氏（在 EditText 中输入名字并显示该人的姓氏）。我已经开发了 PHP 脚本，但是否可以根据输入使用 HTTP get 方法细绳？如何？我只看到直接指向 php 链接的教程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:41:02.310

这是一个示例，您可以如何使用 NameValuePairs 来执行此操作，您可以使用 post 请求将其传递给 php 文件。

```
private void sendData(ArrayList<NameValuePair> data)
{
     // 1) Connect via HTTP. 2) Encode data. 3) Send data.
    try
    {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new      
        HttpPost("http://www.blah.com/AddAccelerationData.php");
        httppost.setEntity(new UrlEncodedFormEntity(data));
        HttpResponse response = httpclient.execute(httppost);
        Log.i("postData", response.getStatusLine().toString());
            //Could do something better with response.
    }
    catch(Exception e)
    {
        Log.e("log_tag", "Error:  "+e.toString());
    }  
} 
```

现在假设您想使用此方法将信息（即您的参数传递给 php 文件。

```
 //Add data to be send.
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
    nameValuePairs.add(new BasicNameValuePair("parameter",editTextValue));
    this.sendData(nameValuePairs); 
```

现在在 php 方面，您可以通过调用以下方法获取此参数值：

```
 //Retrieve the data.
 $parameter = $_POST['parameter'];
 //Now call on your query or function or w/e it is using this parameter. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:45:58.587

要使用 GET，只需将值编码到您的 URL 中，例如

```
String url = "http://myserver.net/script.php?first=" + URLEncoder.encode(first) +
             "&last=" + URLEncoder.encode(last); 
```

然后将 HttpGet 对象与您的 HttpClient 一起使用：

```
HttpClient client = new DefaultHttpClient();
HttpResponse response = client.execute(new HttpGet(url)); 
```

处理响应就像您发布它一样。

# string - Delphi 7，字符串问题

> ID：10122338
> 
> 赞同：4
> 
> 时间：2012-04-12T11:08:52.753
> 
> 标签：string, delphi, assembly, delphi-7

在我的项目中，我遇到了字符串“内存不足异常”的问题，没有使用 MM。问题显示当字符串的长度达到 2 300,000 个符号时。尽管有足够的内存并且在同一部分代码中，我可以创建一个包含 100,000,000 个字符的字符串。

谷歌没有帮助，我无法反汇编它（没有技能），所以我决定创建一个最小的测试示例，我可以在少于 2 000 000 000 个符号的字符串上出现内存不足异常。我无法创建这样的示例，但我创建了一些奇怪的东西：

```
program Project2;
{$APPTYPE CONSOLE}
uses
   SysUtils;

var s : string;
    k : integer;

function b : string;
begin
 result := 'f';
end;

procedure c;
var ss : string;
begin
  s := s + '{' +  b + '}';
  ss :=  'a';

  if k mod 100001 = 0 then
  begin
     // ss[1] := 'd';    // uncoment me
     write(k mod 10);
  end;

  inc(k);
end;

begin
  while true do c;
end. 
```

这段代码工作正常。它只是通过一些额外的操作向全局字符串添加一些内容。问题是，如果您取消注释标记的字符串，它会显着减慢（无论是否优化）。考虑到这个赋值在 100,001 次迭代中一次，它一定不会慢下来。

问题：

1.  Delphi 中的默认字符串是如何工作的？

2.  如何避免减速？

3.  如何避免内存不足？

PS 如果我将 FastMM 包含到主项目中，则错误消失 pps 未注释字符串的示例在 3 分钟内（从用户模式）将我的 Windows 7 发送到 BSOD。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T11:13:14.967

通过做分配字符串

```
s := s + '{' +  b + '}'; 
```

在长时间运行的循环中只会分散你的记忆。您可能对字符串有足够的内存，但这还不够。您需要内存是连续的，但您的分配模式会使这变得困难。

通过调用将字符串预分配到最终所需的长度来解决问题`SetLength`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T13:34:05.437

**1\. Delphi 中的默认字符串是如何工作的？**

`string`每次受影响时都会分配一个新的（通过 a `:=`）。

那是，

```
s := s + '{' +  b + '}'; 
```

将分配一个`string`for `s + '{' + b + '}';`，然后将其复制到 variable `s`。

每次运行此行时，都会分配一次内存，释放一次内存。这可能很慢，即使使用*FastMM4 也是如此*。但是对于年长的MM，它可能会很*慢*。

**2.如何避免减速？**

如果您在旧的 Delphi 中，使用“Borland”内存管理器，分配和重新分配非常慢。而且它会使内存碎片化很多。

由于内存碎片，这`ss[1] := 'd'`当然非常慢，而且 Borland 内存管理器必须对这一行的内存分配进行一些缓慢的清理。

使用以下命令更改行：

```
var ss: string[1]; 
```

而且它不会再慢下来，因为`shortstring`将在堆栈上分配，并且不会使用堆。

所以为了避免减速：

*   使用现代内存管理器，例如*FastMM4*；
*   使用类似`TStringBuilder`的类，或者`TMemoryStream`在其中附加数据的旧类：您将拥有更少的内存重新分配，因此速度会*更快*。

**3.如何避免内存不足？**

内存不足错误来自内存碎片。

所以上一个问题的两个解决方案将解决这个问题。

# android - 从相机上传图片和视频

> ID：10122341
> 
> 赞同：4
> 
> 时间：2012-04-12T11:08:55.790
> 
> 标签：android

如何将照片和视频从相机或画廊上传到 android 中的 fb 帐户？你能给我建议来解决这个问题吗？我可以使用以下代码在 fb 帐户中发布状态..

```
AsyncFacebookRunner mAsyncFbRunner = new AsyncFacebookRunner(mFacebook);
        Bundle params = new Bundle();
        params.putString("message", review);        
        params.putString("picture", "http://twitpic.com/show/thumb/6hqd44");
        mAsyncFbRunner.request("me/feed", params, "POST",
                new WallPostListener()); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:53:46.163

试试看 -

上传图片，

```
 Bundle params = new Bundle();

 params.putByteArray("picture", <image in bytes>);
 params.putString("message", "Have fun");

 mAsyncRunner.request("me/photos", params, "POST", new SampleUploadListener()); 
```

上传视频，

```
Bundle params = new Bundle();

param.putString("filename", <dataName>);
param.putByteArray("video", <data in bytes>);

 mAsyncRunner.request("me/videos", param, "POST", new SampleUploadListener()); 
```

# ruby-on-rails - 如何在 Rails 中将 Nokogiri 对象转换为 xml 文件

> ID：10122342
> 
> 赞同：0
> 
> 时间：2012-04-12T11:08:56.403
> 
> 标签：ruby-on-rails

这是我得到的输出，如何将其转换为 xml 文件。我什至想知道结果是什么。请帮我解决这个问题，因为我是 Rails 的新手。

```
[#<LinkedIn::Position::Resource:0x4a63e80 @position=#<Nokogiri::XML::Element:0x2531fa0 name="position" children=[#<Nokogiri::XML::Text:0x2531c
34 "\n      ">, #<Nokogiri::XML::Element:0x2531bf8 name="id" children=[#<Nokogiri::XML::Text:0x2531850 "252416522">]>, #<Nokogiri::XML::Text:0
x253155c "\n      ">, #<Nokogiri::XML::Element:0x253152c name="title" children=[#<Nokogiri::XML::Text:0x253122c "Senior Software Engineer">]>,
 #<Nokogiri::XML::Text:0x2531094 "\n      ">, #<Nokogiri::XML::Element:0x2530f8c name="summary" children=[#<Nokogiri::XML::Text:0x253089c "Wor
king on Ruby on Rails">]>, #<Nokogiri::XML::Text:0x2530308 "\n      ">, #<Nokogiri::XML::Element:0x252ff6c name="start-date" children=[#<Nokog
iri::XML::Text:0x252fb58 "\n        ">, #<Nokogiri::XML::Element:0x252fb28 name="year" children=[#<Nokogiri::XML::Text:0x252f960 "2012">]>, #<
Nokogiri::XML::Text:0x252f888 "\n        ">, #<Nokogiri::XML::Element:0x252f84c name="month" children=[#<Nokogiri::XML::Text:0x252f684 "1">]>,
 #<Nokogiri::XML::Text:0x252f5ac "\n      ">]>, #<Nokogiri::XML::Text:0x252f4d4 "\n      ">, #<Nokogiri::XML::Element:0x252f4a4 name="is-curre
nt" children=[#<Nokogiri::XML::Text:0x252efb8 "true">]>, #<Nokogiri::XML::Text:0x252ed6c "\n      ">, #<Nokogiri::XML::Element:0x252ed3c name=
"company" children=[#<Nokogiri::XML::Text:0x252e694 "\n        ">, #<Nokogiri::XML::Element:0x252e5ec name="id" children=[#<Nokogiri::XML::Tex
t:0x252e364 "203940">]>, #<Nokogiri::XML::Text:0x252e28c "\n        ">, #<Nokogiri::XML::Element:0x252e25c name="name" children=[#<Nokogiri::X
ML::Text:0x252e094 "AB Innovative Software Pvt. Ltd">]>, #<Nokogiri::XML::Text:0x252dfa4 "\n        ">, #<Nokogiri::XML::Element:0x252df68 nam
e="size" children=[#<Nokogiri::XML::Text:0x252dd40 "51-200 employees">]>, #<Nokogiri::XML::Text:0x252dc50 "\n        ">, #<Nokogiri::XML::Elem
ent:0x252dc20 name="type" children=[#<Nokogiri::XML::Text:0x252d9f8 "Privately Held">]>, #<Nokogiri::XML::Text:0x252d908 "\n        ">, #<Noko
giri::XML::Element:0x252d8d8 name="industry" children=[#<Nokogiri::XML::Text:0x252d6e0 "Computer Software">]>, #<Nokogiri::XML::Text:0x252d4d0
 "\n      ">]>, #<Nokogiri::XML::Text:0x252d2f0 "\n    ">]>>, #<LinkedIn::Position::Resource:0x4a63b80 @position=#<Nokogiri::XML::Element:0x25
31f1c name="position" children=[#<Nokogiri::XML::Text:0x252c588 "\n      ">, #<Nokogiri::XML::Element:0x252c444 name="id" children=[#<Nokogiri
::XML::Text:0x252bce8 "127229045">]>, #<Nokogiri::XML::Text:0x252bb80 "\n      ">, #<Nokogiri::XML::Element:0x252bb50 name="title" children=[#
<Nokogiri::XML::Text:0x252b1d8 "Software Engineer">]>, #<Nokogiri::XML::Text:0x252ac08 "\n      ">, #<Nokogiri::XML::Element:0x252ab48 name="s
ummary" children=[#<Nokogiri::XML::Text:0x2529c9c "Software Engineer">]>, #<Nokogiri::XML::Text:0x2529900 "\n      ">, #<Nokogiri::XML::Elemen
t:0x2529858 name="start-date" children=[#<Nokogiri::XML::Text:0x252930c "\n        ">, #<Nokogiri::XML::Element:0x25292dc name="year" children
=[#<Nokogiri::XML::Text:0x25287f0 "2011">]>, #<Nokogiri::XML::Text:0x2528664 "\n        ">, #<Nokogiri::XML::Element:0x25285e0 name="month" ch
ildren=[#<Nokogiri::XML::Text:0x2527cc8 "4">]>, #<Nokogiri::XML::Text:0x2527530 "\n      ">]>, #<Nokogiri::XML::Text:0x2527440 "\n      ">, #<
Nokogiri::XML::Element:0x2527410 name="end-date" children=[#<Nokogiri::XML::Text:0x2527248 "\n        ">, #<Nokogiri::XML::Element:0x2527218 n
ame="year" children=[#<Nokogiri::XML::Text:0x2527050 "2012">]>, #<Nokogiri::XML::Text:0x2526f78 "\n        ">, #<Nokogiri::XML::Element:0x2526
f3c name="month" children=[#<Nokogiri::XML::Text:0x2526d74 "1">]>, #<Nokogiri::XML::Text:0x2526a20 "\n      ">]>, #<Nokogiri::XML::Text:0x2526
948 "\n      ">, #<Nokogiri::XML::Element:0x2526918 name="is-current" children=[#<Nokogiri::XML::Text:0x2526738 "false">]>, #<Nokogiri::XML::T
ext:0x2526654 "\n      ">, #<Nokogiri::XML::Element:0x2526624 name="company" children=[#<Nokogiri::XML::Text:0x2526138 "\n        ">, #<Nokogi
ri::XML::Element:0x252609c name="id" children=[#<Nokogiri::XML::Text:0x2525a60 "11498">]>, #<Nokogiri::XML::Text:0x2525898 "\n        ">, #<No
kogiri::XML::Element:0x2525868 name="name" children=[#<Nokogiri::XML::Text:0x25256a0 "Onward Technologies">]>, #<Nokogiri::XML::Text:0x25255c8
 "\n        ">, #<Nokogiri::XML::Element:0x2525598 name="type" children=[#<Nokogiri::XML::Text:0x25253ac "Public Company">]>, #<Nokogiri::XML:
:Text:0x2525184 "\n        ">, #<Nokogiri::XML::Element:0x2525118 name="industry" children=[#<Nokogiri::XML::Text:0x2524f2c "Information Techn
ology and Services">]>, #<Nokogiri::XML::Text:0x2524e54 "\n        ">, #<Nokogiri::XML::Element:0x2524e24 name="ticker" children=[#<Nokogiri::
XML::Text:0x2524b48 "ONWARD">]>, #<Nokogiri::XML::Text:0x25247f4 "\n      ">]>, #<Nokogiri::XML::Text:0x2524110 "\n    ">]>>] 
```

**client.inspect 输出是**

```
#<LinkedIn::Client:0x4a1a908 @csecret=\"jKf6ZYgf8JhMoIJ4\", @access_token=#<OAuth::AccessToken:0x4a1a2c0 @token=\"177ba9cd-3b8e-4776-a7f7-db3f60d6df68\", @response=#<Net::HTTPOK 200 OK readbody=true>, @secret=\"d4641509-703a-42ad-a42a-2bf9ac2a8d48\", @consumer=#<OAuth::Consumer:0x4a1a1d0 @secret=\"jKf6ZYgf8JhMoIJ4\", @key=\"cus7tde3g4pe\", @uri=#<URI::HTTPS:0x4a19450 URL:https://api.linkedin.com>, @options={:authorize_path=>\"/uas/oauth/authorize\", :scheme=>:header, :http_method=>:post, :proxy=>nil, :site=>\"https://api.linkedin.com\", :request_token_path=>\"/uas/oauth/requestToken\", :oauth_version=>\"1.0\", :signature_method=>\"HMAC-SHA1\", :access_token_path=>\"/uas/oauth/accessToken\"}, @http=#<Net::HTTP api.linkedin.com:443 open=false>>, @params={}>, @ctoken=\"cus7tde3g4pe\", @consumer=#<OAuth::Consumer:0x4a1a1d0 @secret=\"jKf6ZYgf8JhMoIJ4\", @key=\"cus7tde3g4pe\", @uri=#<URI::HTTPS:0x4a19450 URL:https://api.linkedin.com>, @options={:authorize_path=>\"/uas/oauth/authorize\", :scheme=>:header, :http_method=>:post, :proxy=>nil, :site=>\"https://api.linkedin.com\", :request_token_path=>\"/uas/oauth/requestToken\", :oauth_version=>\"1.0\", :signature_method=>\"HMAC-SHA1\", :access_token_path=>\"/uas/oauth/accessToken\"}, @http=#<Net::HTTP api.linkedin.com:443 open=false>>, @asecret=\"d4641509-703a-42ad-a42a-2bf9ac2a8d48\", @consumer_options={:authorize_path=>\"/uas/oauth/authorize\", :request_token_path=>\"/uas/oauth/requestToken\", :access_token_path=>\"/uas/oauth/accessToken\"}, @atoken=\"177ba9cd-3b8e-4776-a7f7-db3f60d6df68\">" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:30:45.277

啊，好吧，现在我明白了……试试这个：

```
data = Hash.from_xml(client.profile.to_s) 
```

高频...

# java - 使用 Datanucleus JDO 的 Servlet 找不到 MySQL 驱动程序

> ID：10122344
> 
> 赞同：0
> 
> 时间：2012-04-12T11:09:08.210
> 
> 标签：java, mysql, jdo, datanucleus

我试图让 JDO 在 Servlet 中工作；只是一个简单的基本 Servlet。我知道 Servlet 可以连接到我的数据库，因为非 JDO servlet 可以很好地完成它，并从数据库中打印出数据（以下是简单 Servlet 的开头）：

```
 StringBuilder sb = new StringBuilder();
 Connection conn = null;
 try {
         String userName = "jdo";
         String password = "jdo";
         String url = "jdbc:mysql://192.168.2.203:3306/jdo";
         Class.forName( "com.mysql.jdbc.Driver" ).newInstance();
         conn = DriverManager.getConnection( url, userName, password );
         sb.append( "Database connection established" );

         Statement s = conn.createStatement();
         s.executeQuery( "select id, make, model from car limit 1" );
         ResultSet rs = s.getResultSet();
         while ( rs.next() ) {
                 int id = rs.getInt( "id" );
                 String make = rs.getString( "make" );
                 String model = rs.getString( "model" );
                 sb.append( "id = " + id + ", make = " + make + ", model = " + model + "\n" );
         }
         rs.close();
         s.close();

 } 
```

没关系，StringBuilder 从附加的数据库中获取数据没有问题。但是，以下是行不通的*。*它会在最后一行（第 28 行）抛出一个堆栈跟踪，我将在此处粘贴（此代码也是一个简单 Servlet 的开头，只是与包含先前代码的 Servlet 不同）：

```
 Properties p = new Properties();
 p.setProperty( "javax.jdo.option.ConnectionDriverName", "com.mysql.jdbc.Driver" );
 p.setProperty( "javax.jdo.option.ConnectionURL", "jdbc:mysql://192.168.2.203:3306/jdo" );
 p.setProperty( "javax.jdo.option.ConnectionUserName", "jdo" );
 p.setProperty( "javax.jdo.option.ConnectionPassword", "jdo" );
 PersistenceManagerFactory pmf = JDOHelper.getPersistenceManagerFactory( p );  // this is line 28 
```

堆栈跟踪在这篇文章的底部，因为它相当长。

这两个 Servlet 存在于同一个 war 文件中，其中是 MySQL Connector/J jar 文件：

```
mkns@squeeze:~/workspace/JdoServlet$ jar tf dist/jdoservlet.war  | grep mysql
WEB-INF/lib/mysql-connector-java-5.1.6.jar 
```

我很困惑为什么 DataNucleus 库找不到 MySQL 连接器/J 驱动程序 jar 文件？我可能在这里遗漏了明显的东西，但是我已经尽可能多地剥离了我的 Servlet，以查看问题出在哪里（如上所述），但我不知道我哪里出错了。谁能指出我犯的错误？

我正在使用最新版本的 DataNucleus，3.0.9。

--- 8< ---

现在是堆栈跟踪；这是从 Tomcat6 catalina 日志文件中获取的完整堆栈跟踪。请注意，我的应用程序中的行位于 com.xxxxxxxxxx.jdoservlet.* 的屏蔽包名称中，因此如果您查找它，您可以确定我的应用程序引发异常的位置。

```
12-Apr-2012 18:48:47 org.datanucleus.store.rdbms.RDBMSStoreManager <init>
SEVERE: Failed initialising database.
No suitable driver found for jdbc:mysql://192.168.2.203:3306/jdo
org.datanucleus.exceptions.NucleusDataStoreException: No suitable driver found for jdbc:mysql://192.168.2.203:3306/jdo
        at org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl.getConnection(ConnectionFactoryImpl.java:459)
        at org.datanucleus.store.rdbms.RDBMSStoreManager.<init>(RDBMSStoreManager.java:264)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at org.datanucleus.plugin.NonManagedPluginRegistry.createExecutableExtension(NonManagedPluginRegistry.java:681)
        at org.datanucleus.plugin.PluginManager.createExecutableExtension(PluginManager.java:290)
        at org.datanucleus.NucleusContext.createStoreManagerForProperties(NucleusContext.java:468)
        at org.datanucleus.NucleusContext.initialise(NucleusContext.java:280)
        at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.freezeConfiguration(JDOPersistenceManagerFactory.java:591)
        at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.createPersistenceManagerFactory(JDOPersistenceManagerFactory.java:326)
        at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.getPersistenceManagerFactory(JDOPersistenceManagerFactory.java:195)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at javax.jdo.JDOHelper$16.run(JDOHelper.java:1956)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.jdo.JDOHelper.invoke(JDOHelper.java:1951)
        at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1159)
        at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:839)
        at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:698)
        at com.xxxxxxxxxx.jdoservlet.Test.process(Test.java:28)
        at com.xxxxxxxxxx.jdoservlet.AbstractServlet.doPost(AbstractServlet.java:35)
        at com.xxxxxxxxxx.jdoservlet.AbstractServlet.doGet(AbstractServlet.java:27)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.sql.SQLException: No suitable driver found for jdbc:mysql://192.168.2.203:3306/jdo
        at java.sql.DriverManager.getConnection(DriverManager.java:602)
        at java.sql.DriverManager.getConnection(DriverManager.java:154)
        at org.apache.commons.dbcp.DriverManagerConnectionFactory.createConnection(DriverManagerConnectionFactory.java:78)
        at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582)
        at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1148)
        at org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:106)
        at org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl.getConnection(ConnectionFactoryImpl.java:444)
        ... 39 more
Nested Throwables StackTrace:
java.sql.SQLException: No suitable driver found for jdbc:mysql://192.168.2.203:3306/jdo
        at java.sql.DriverManager.getConnection(DriverManager.java:602)
        at java.sql.DriverManager.getConnection(DriverManager.java:154)
        at org.apache.commons.dbcp.DriverManagerConnectionFactory.createConnection(DriverManagerConnectionFactory.java:78)
        at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582)
        at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1148)
        at org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:106)
        at org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl.getConnection(ConnectionFactoryImpl.java:444)
        at org.datanucleus.store.rdbms.RDBMSStoreManager.<init>(RDBMSStoreManager.java:264)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at org.datanucleus.plugin.NonManagedPluginRegistry.createExecutableExtension(NonManagedPluginRegistry.java:681)
        at org.datanucleus.plugin.PluginManager.createExecutableExtension(PluginManager.java:290)
        at org.datanucleus.NucleusContext.createStoreManagerForProperties(NucleusContext.java:468)
        at org.datanucleus.NucleusContext.initialise(NucleusContext.java:280)
        at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.freezeConfiguration(JDOPersistenceManagerFactory.java:591)
        at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.createPersistenceManagerFactory(JDOPersistenceManagerFactory.java:326)
        at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.getPersistenceManagerFactory(JDOPersistenceManagerFactory.java:195)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at javax.jdo.JDOHelper$16.run(JDOHelper.java:1956)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.jdo.JDOHelper.invoke(JDOHelper.java:1951)
        at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1159)
        at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:839)
        at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:698)
        at com.xxxxxxxxxx.jdoservlet.Test.process(Test.java:28)
        at com.xxxxxxxxxx.jdoservlet.AbstractServlet.doPost(AbstractServlet.java:35)
        at com.xxxxxxxxxx.jdoservlet.AbstractServlet.doGet(AbstractServlet.java:27)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-23T05:42:59.000

我遇到了完全相同的错误，除了它是针对运行 ubuntu 12.04 的机器上的 tomcat7 上的 postgres jdbc 驱动程序。我最终将 jdbc 驱动程序从 war 文件中取出并放入 /usr/share/tomcat7/lib/ 中。这是tomcat查找jar文件的文件夹。

这个解决方案可能并不适合所有人，因为 jdbc 驱动程序现在可以被所有 tomcat 容器中的所有 servlet 访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:47:34.130

第一件事：您通常在调用加载数据库驱动程序`newInstance`之后省略调用。`Class.forName`

第二：DataNucleus 有时更喜欢自己的配置。您是否尝试根据 DataNucleus 网站设置以下属性？

> datanucleus.ConnectionDriverName=com.mysql.jdbc.Driver datanucleus.ConnectionURL=jdbc:mysql://'host':'port'/'db-name' datanucleus.ConnectionUserName='user-name'
> datanucleus.ConnectionPassword='password'

[http://www.datanucleus.org/products/datanucleus/rdbms/support.html](http://www.datanucleus.org/products/datanucleus/rdbms/support.html)

此外，检查驱动程序是否已成功部署。

将 jar 放在[此问题](https://stackoverflow.com/questions/267953/managing-libraries-in-tomcat)中指定的目录中是否有帮助？

# java - 在 FMJ 中找不到捕获设备

> ID：10122347
> 
> 赞同：2
> 
> 时间：2012-04-12T11:09:14.433
> 
> 标签：java, jmf, fmj

以前我在使用 JMF，但是需要安装 JMF，但我不想增加这个开销。这就是为什么我想搬到FMJ。FMJ 是开源的。:)

FMJ 源提供了一些示例示例。还有一个 FMJStudio，我可以在其中运行和传输从麦克风捕获的 RTP 音频。

但是当我想传输 RTP 时，使用下面的源，它找不到任何捕获设备。

完整的源代码可以在以下位置找到：[FMJ](http://fmj-sf.net)中的**fmj-20070928-0938_2.zip** 这个源类的类名是**SimpleVoiceTransmiter**。

 **```
 //final String urlStr = URLUtils.createUrlStr(new File("samplemedia/gulp2.wav"));//"file://samplemedia/gulp2.wav";
    Format format;

    format = new AudioFormat(AudioFormat.ULAW_RTP, 8000, 8, 1);
    //format = new AudioFormat(AudioFormat.ULAW_RTP, 8000.0, 8, 1, AudioFormat.LITTLE_ENDIAN, AudioFormat.SIGNED);
    //format = new AudioFormat(BonusAudioFormatEncodings.ALAW_RTP, 8000, 8, 1);
    //format = new AudioFormat(BonusAudioFormatEncodings.SPEEX_RTP, 8000, 8, 1, -1, AudioFormat.SIGNED);
    //format = new AudioFormat(BonusAudioFormatEncodings.ILBC_RTP, 8000.0, 16, 1, AudioFormat.LITTLE_ENDIAN, AudioFormat.SIGNED);

    CaptureDeviceInfo di = null;
            //Set to true if you want to transmit audio from capture device, like microphone.
    if (true)
    {
        // First find a capture device that will capture linear audio
        // data at 8bit 8Khz
        AudioFormat captureFormat = new AudioFormat(AudioFormat.LINEAR, 8000, 8, 1);

        Vector devices = CaptureDeviceManager.getDeviceList(captureFormat);

        if (devices.size() > 0)
        {
            di = (CaptureDeviceInfo) devices.elementAt(0);
        } else
        {
            System.err.println("No capture devices");
            // exit if we could not find the relevant capturedevice.
            System.exit(-1);

        }
    }

    // Create a processor for this capturedevice & exit if we
    // cannot create it
    Processor processor = null;
    try
    {
        //processor = Manager.createProcessor(new MediaLocator(urlStr));
                    processor = Manager.createProcessor(di.getLocator());
    } catch (IOException e)
    {
        e.printStackTrace();
        System.exit(-1);
    } catch (NoProcessorException e)
    {
        e.printStackTrace();
        System.exit(-1);
    }

    // configure the processor
    processor.configure();

    while (processor.getState() != Processor.Configured)
    {
        try
        {
            Thread.sleep(10);
        } catch (InterruptedException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    processor.setContentDescriptor(new ContentDescriptor(ContentDescriptor.RAW_RTP));

    TrackControl track[] = processor.getTrackControls();

    boolean encodingOk = false;

    // Go through the tracks and try to program one of them to
    // output g.711 data.

    for (int i = 0; i < track.length; i++)
    {
        if (!encodingOk && track[i] instanceof FormatControl)
        {
            if (((FormatControl) track[i]).setFormat(format) == null)
            {

                track[i].setEnabled(false);
            } else
            {
                encodingOk = true;
            }
        } else
        {
            // we could not set this track to g.711, so disable it
            track[i].setEnabled(false);
        }
    }

    // At this point, we have determined where we can send out
    // g.711 data or not.
    // realize the processor
    if (encodingOk)
    {
        if (!new net.sf.fmj.ejmf.toolkit.util.StateWaiter(processor).blockingRealize())
        {
            System.err.println("Failed to realize");
            return;
        }

        // get the output datasource of the processor and exit
        // if we fail
        DataSource ds = null;

        try
        {
            ds = processor.getDataOutput();
        } catch (NotRealizedError e)
        {
            e.printStackTrace();
            System.exit(-1);
        }

        // hand this datasource to manager for creating an RTP
        // datasink our RTP datasink will multicast the audio
        try
        {
            String url = "rtp://192.168.1.99:49150/audio/1";

            MediaLocator m = new MediaLocator(url);

            DataSink d = Manager.createDataSink(ds, m);
            d.open();
            d.start();

            System.out.println("Starting processor");
            processor.start();
            Thread.sleep(30000);
        } catch (Exception e)
        {
            e.printStackTrace();
            System.exit(-1);
        }
    } 
```

当我运行这个源时，输出是：**没有捕获设备**

可能是什么问题？:-(

编辑：我从系统中卸载了**JMF**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:54:02.617

好的，经过两天半的时间，我陷入了困境，我自己指出了问题。

问题是，当我卸载**JMF**时，它并没有从**CLASSPATH**用户变量中删除。有类似的东西：

```
 "C:\PROGRA~1\JMF21~1.1E\lib\sound.jar;C:\PROGRA~1\JMF21~1.1E\lib\jmf.jar;C:\PROGRA~1\JMF21~1.1E\lib;" 
```

当我删除它们并重新启动计算机时。然后宾果。代码运行没有任何问题。:)**

# c# - 如何在 MVC 3 中使用模型优先方法验证搜索字符串？

> ID：10122355
> 
> 赞同：1
> 
> 时间：2012-04-12T11:09:46.947
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, validation, controller

我正在尝试使用 C# 验证 MVC 3 中的搜索框，以便当用户不输入任何内容时，ViewBag 中会出现一条消息，说“请输入搜索查询”。任何帮助将不胜感激。

```
public ViewResult Index(string sortOrder, String searchString)
{
   ViewBag.NamesSortParm = String.IsNullOrEmpty(sortOrder) ? "Name desc" : "";
   ViewBag.UserSortParm = sortOrder == "UserID" ? "Name" : "Song";
   var User = from s in db.User select s;

   if (!String.IsNullOrEmpty(searchString))
   {
      User = Users.Where(s => s.Name.ToUpper().Contains(searchString.ToUpper())
                           || s.Songs.ToUpper().Contains(searchString.ToUpper()));
   }
   switch (sortOrder)
   {
      case "Name":
        Users = Users.OrderByDescending(s => s.Name);
        break;
      case "Songs":
        Users = Users.OrderByDescending(s => s.Song);
        break;
      default:
        Users = Users.OrderBy(s => s.Name);
        break;
   }

   // ...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T11:13:12.733

你为什么不为你的视图创建一个简单的模型

```
public class UserSearch
{
    [Required]
    public string SearchString {get;set;}
    [Required]
    public string SortOrder {get;set;}    
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T13:26:17.127

正如本所说，您应该尝试创建简单的视图。但更重要的是为您的课程添加一些元数据属性（然后您可以在您的课程上工作）。它应该如下所示：

```
namespace Models
{
    [MetadataType(typeof(UserSearchMetadata))]
    public partial class UserSearch
    {
        //some class
    }

    public class UserSearchMetadata
    {
        [Required] //required attribute
        public string SearchString {get;set;}
    }
} 
```

然后，当您制作一些强类型视图时，当用户没有在 SearchString 中写入任何内容时，将出现验证消息:)

# android - 如何同时使用 GPS 和网络提供商在 Android 中获取当前位置的纬度和经度值

> ID：10122358
> 
> 赞同：9
> 
> 时间：2012-04-12T11:09:53.530
> 
> 标签：android, networking, gps, location-provider

在我的 Android 应用程序中，我想同时使用 GPS 提供程序和网络提供程序进行位置更新 5 秒。首先，我想使用 GPS 提供者（因为它给出了准确的结果），如果 GPS 提供者返回纬度和经度为 0.0 和 0.0，那么我想使用网络提供者，但我不想同时使用这两个提供者同时地。有什么建议么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T11:18:58.410

```
package loca.loca;

import java.util.Timer;
import java.util.TimerTask;
import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.widget.Toast;

public class LocationActivity extends Activity {

    double x,y;

    Timer timer;
    LocationManager lm;
    boolean gps_enabled = false;
    boolean network_enabled = false;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

            lm = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

            gps_enabled = lm.isProviderEnabled(LocationManager.GPS_PROVIDER);
            network_enabled = lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (!gps_enabled && !network_enabled) {  Context context = getApplicationContext();
            int duration = Toast.LENGTH_SHORT;
            Toast toast = Toast.makeText(context, "nothing is enabled", duration);
            toast.show();

        }

        if (gps_enabled)
            lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
                    locationListenerGps);
        if (network_enabled)
            lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0,
                    locationListenerNetwork);
         timer=new Timer();
         timer.schedule(new GetLastLocation(), 20000);

    }

    LocationListener locationListenerGps = new LocationListener() {
        public void onLocationChanged(Location location) {
            timer.cancel();
            x =location.getLatitude();
            y = location.getLongitude();
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerNetwork);

            Context context = getApplicationContext();
            int duration = Toast.LENGTH_SHORT;
            Toast toast = Toast.makeText(context, "gps enabled "+x + "\n" + y, duration);
            toast.show();
        }

        public void onProviderDisabled(String provider) {
        }

        public void onProviderEnabled(String provider) {
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    };

    LocationListener locationListenerNetwork = new LocationListener() {
        public void onLocationChanged(Location location) {
            timer.cancel();
            x = location.getLatitude();
            y = location.getLongitude();
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerGps);

            Context context = getApplicationContext();
            int duration = Toast.LENGTH_SHORT;
            Toast toast = Toast.makeText(context, "network enabled"+x + "\n" + y, duration);
            toast.show();
        }

        public void onProviderDisabled(String provider) {
        }

        public void onProviderEnabled(String provider) {
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    };

    class GetLastLocation extends TimerTask {
        @Override
        public void run() {
             lm.removeUpdates(locationListenerGps);
             lm.removeUpdates(locationListenerNetwork);

             Location net_loc=null, gps_loc=null;
             if(gps_enabled)
                 gps_loc=lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
             if(network_enabled)
                 net_loc=lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

             //if there are both values use the latest one
             if(gps_loc!=null && net_loc!=null){
                 if(gps_loc.getTime()>net_loc.getTime())
                {x = gps_loc.getLatitude();
                y = gps_loc.getLongitude();
                  Context context = getApplicationContext();
                    int duration = Toast.LENGTH_SHORT;
                    Toast toast = Toast.makeText(context, "gps lastknown "+x + "\n" + y, duration);
                    toast.show();
                }
                 else
                {x = net_loc.getLatitude();
                y = net_loc.getLongitude();
                Context context = getApplicationContext();
                int duration = Toast.LENGTH_SHORT;
                Toast toast = Toast.makeText(context, "network lastknown "+x + "\n" + y, duration);
                toast.show();

                }

             }

             if(gps_loc!=null){
                  {x = gps_loc.getLatitude();
                y = gps_loc.getLongitude();
                  Context context = getApplicationContext();
                    int duration = Toast.LENGTH_SHORT;
                    Toast toast = Toast.makeText(context, "gps lastknown "+x + "\n" + y, duration);
                    toast.show();
                  }

             }
             if(net_loc!=null){
                {x = net_loc.getLatitude();
                y = net_loc.getLongitude();
              Context context = getApplicationContext();
              int duration = Toast.LENGTH_SHORT;
              Toast toast = Toast.makeText(context, "network lastknown "+x + "\n" + y, duration);
                toast.show();

                }
             }
            Context context = getApplicationContext();
            int duration = Toast.LENGTH_SHORT;
            Toast toast = Toast.makeText(context, "no last know avilable", duration);
            toast.show();

}
}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:20:40.227

```
 public class MyLocation {
    Timer timer1;
    LocationManager lm;
    LocationResult locationResult;
    boolean gps_enabled=false;
    boolean network_enabled=false;`

    public boolean getLocation(Context context, LocationResult result)
    {
        //I use LocationResult callback class to pass location value from MyLocation to user code.
        locationResult=result;
        if(lm==null)
            lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

        //exceptions will be thrown if provider is not permitted.
        try{gps_enabled=lm.isProviderEnabled(LocationManager.GPS_PROVIDER);}catch(Exception ex){}
        try{network_enabled=lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);}catch(Exception ex){}

        //don't start listeners if no provider is enabled
        if(!gps_enabled && !network_enabled)
            return false;
        try{
            if(gps_enabled)
                lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListenerGps);
            if(network_enabled)
                lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListenerNetwork);
            timer1=new Timer();
            timer1.schedule(new GetLastLocation(), 30000);
        }catch(Exception x){
            return false;
        }
        return true;
    }

    LocationListener locationListenerGps = new LocationListener() {
        public void onLocationChanged(Location location) {
            timer1.cancel();
            locationResult.gotLocation(location);
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerNetwork);
        }
        public void onProviderDisabled(String provider) {}
        public void onProviderEnabled(String provider) {}
        public void onStatusChanged(String provider, int status, Bundle extras) {}
    };

    LocationListener locationListenerNetwork = new LocationListener() {
        public void onLocationChanged(Location location) {
            timer1.cancel();
            locationResult.gotLocation(location);
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerGps);
        }
        public void onProviderDisabled(String provider) {}
        public void onProviderEnabled(String provider) {}
        public void onStatusChanged(String provider, int status, Bundle extras) {}
    };

    class GetLastLocation extends TimerTask {
        @Override
        public void run() {
            lm.removeUpdates(locationListenerGps);
            lm.removeUpdates(locationListenerNetwork);

            Location net_loc=null, gps_loc=null;
            if(gps_enabled)
                gps_loc=lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
            if(network_enabled)
                net_loc=lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

            //if there are both values use the latest one
            if(gps_loc!=null && net_loc!=null){
                if(gps_loc.getTime()>net_loc.getTime())
                    locationResult.gotLocation(gps_loc);
                else
                    locationResult.gotLocation(net_loc);
                return;
            }

            if(gps_loc!=null){
                locationResult.gotLocation(gps_loc);
                return;
            }
            if(net_loc!=null){
                locationResult.gotLocation(net_loc);
                return;
            }
            locationResult.gotLocation(null);
        }
    }

    public static abstract class LocationResult{
        public abstract void gotLocation(Location location);
    }
} 
```

**然后在您的活动中使用这些：**

```
final MyLocation myLocation = new MyLocation();

                Handler mHandler = new Handler(Looper.getMainLooper());
                mHandler.post(new Runnable() {
                    public void run() {
                        locationResult = new LocationResult(){
                            @Override
                            public void gotLocation(final Location location){
                                //Got the location!
                                try{
                                    Methods.savePre(context, ""+location.getLatitude(), "LATITUDE");
                                    Methods.savePre(context, ""+location.getLongitude(), "LONGITUDE");
                                }catch(Exception x){
                                    x.getMessage();
                                }
                                Got_loc= true;
                                //                              String geoAddress  = "geo:" + location.getLatitude() + ","+ location.getLongitude() + "?z=15";
                                //                              Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(geoAddress));
                                //                              context.startActivity(intent);
                            }
                        };
                        myLocation.getLocation(context, locationResult);
                    }
                });
                while(!Got_loc){
                    Thread.sleep(150);
                }

                Loc = Methods.getPref(context, "LATITUDE") + "%%" + Methods.getPref 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-21T07:26:11.327

最简单的方法是为 gps 和网络创建两个不同`LocationListener`的两个请求位置。

# jquery - 使用模型渲染部分视图时如何关闭 JQuery UI 对话框

> ID：10122359
> 
> 赞同：2
> 
> 时间：2012-04-12T11:09:53.843
> 
> 标签：jquery, asp.net, asp.net-mvc-3, jquery-ui, razor

我在 JQuery UI 对话框中呈现部分视图。示例取自[Loading a partial view in jquery.dialog](https://stackoverflow.com/questions/4802378/loading-a-partial-view-in-jquery-dialog/4802423#comment12822906_4802423)。当您将局部视图传递给模型时，关闭按钮不起作用......有没有人有解决方案让它关闭对话框？（当没有模型传递给局部视图时，它工作正常）。另外，任何人都可以解释为什么在传递视图模型时它不起作用？

看法：

```
<script type="text/javascript">
    $(function () {      
        $('#dialog').dialog({            
            width: 400,            
            resizable: false,
            title: 'hi there',
            modal: true,
            open: function(event, ui) {
                //Load the CreateAlbumPartial action which will return 
                // the partial view _CreateAlbumPartial
                $(this).load("@Url.Action("CreateAlbumPartial")");
            },
            buttons: {
                "Close": function () {
                    $(this).dialog("close");
                }
            }
        });                 
    });
</script>

<div id="dialog" title="Create Album" style="overflow: hidden;"></div> 
```

行动：

```
 public ActionResult CreateAlbumPartial()
        {                
        var applications = new List<string>{"bob", "john", "andrew"};          
        var selectList = applications.Select(x => new SelectListItem{Text = x,Value = x}).ToList();
        var model = new TestModel{Applications = selectList};
        return View("_CreateAlbumPartial", model);
        } 
```

视图模型：

```
public class TestModel
    {      
        public int SelectedApplicationId;
        public IEnumerable<SelectListItem> Applications;  
    } 
```

局部视图：

```
@model MvcApplication1.Models.TestModel

<div>

 @Html.DropDownListFor(
        x => x.SelectedApplicationId, 
        new SelectList(Model.Applications, "Value", "Text"),
        "-- Select Application --",
             new
             {
                 id = "ApplicationsDropdownList",
                 data_url = Url.Action("ViewRolesForApplication", "Index")
             }
    )   
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:18:28.323

首先加载内容然后创建对话框

```
 $(function () {      
         $.ajax({
             url: "@Url.Action("CreateAlbumPartial")",
             success:function(data){
                  $('#dialog').html(data).dialog({            
                      width: 400,            
                      resizable: false,
                      title: 'hi there',
                      modal: true,
                      buttons: {
                           "Close": function () {
                             $(this).dialog("close");
                           }
                      }
                  });   
             }
         });

    }); 
```

# javascript - 如何在成功提交 ajax 表单后获取评论类，然后在不刷新页面的情况下显示它？

> ID：10122363
> 
> 赞同：0
> 
> 时间：2012-04-12T11:10:13.533
> 
> 标签：javascript, ruby-on-rails, jquery, ruby-on-rails-3.2

我想为刚刚发布的帖子获取“.comment_container”并将其放在最后一条评论之后。

每个评论及其相关内容都存储在“.comment_container”类中。

下面的代码可以满足我的需要，但不是 100%。我不想附加 TEST 这个词，而是想附加新的 comment_contaner 来保存刚刚发布的评论。

我整天都在努力解决这个问题，这就是我已经走了多远。如果可能的话，我将不胜感激一些带有示例的解决方案。

**查询：**

```
$('#new_comment').on('ajax:success', function(){
  $(this).parent('.post_content').find('.comment_container:last').after("TEST");
});

<% sleep 1 %> 
```

**HTML：**

```
 <div class="postHolder">
        <nav class="micropostOptions">
         <ul class="postMenu">
           <li class="deletePost"><%= link_to content_tag(:span, "Delete post"), m, :method => :delete, :confirm => "Are you sure?", :title => m.content, :class => "message_delete" %>
           </li>
           <li class="disableCommenting"><%= link_to content_tag(:span, "Pause commenting"), "2" %></li>
           <li class="blockCommenter"><%= link_to content_tag(:span, "Block commenter"), "3" %></li>
           <li class="openInNewWindow"><%= link_to content_tag(:span, "Open in new window"), "4" %></li>
           <li class="reportAbuse"><%= link_to content_tag(:span, "Report abuse"), "5" %></li>
         </ul>  
       </nav>

                <%= link_to image_tag(default_photo_for_current_user, :class => "poster_photo"), current_users_username %>

<div class="post_content">
    <div class="post_container">

                        <div class="userNameFontStyle"><%= link_to current_users_username.capitalize, current_users_username %> -
                        <div class="post_time"> <%= time_ago_in_words(m.created_at) %> ago.</div> </div>  
                  <%=  simple_format h(m.content) %> </div>

                        <% if m.comments.any? %>
                   <% comments(m.id).each do |comment| %>

                    <div class="comment_container">
                        <%= link_to image_tag(default_photo_for_commenter(comment), :class => "commenter_photo"), commenter(comment.user_id).username %>

                        <div class="commenter_content"> <div class="userNameFontStyle"><%= link_to commenter(comment.user_id).username.capitalize, commenter(comment.user_id).username %> - <%=  simple_format h(comment.content) %> </div>
                    </div><div class="comment_post_time"> <%= time_ago_in_words(comment.created_at) %> ago. </div>

                   </div>

                        <% end %>
                    <% end %>

                <% if logged_in? %>
                <%= form_for @comment, :remote => true, :html => {:class => "new_comment} do |f| %>
                <%= f.hidden_field :user_id, :value => current_user.id %>
                <%= f.hidden_field :micropost_id, :value => m.id %>
                <%= f.text_area :content, :placeholder => 'Post a comment...', :class => "comment_box", :rows => 0, :columns => 0 %>

        <div class="commentButtons">         
          <%= f.submit 'Post it', :class => "commentButton" %>
           <div class="cancelButton"> Cancel </div>
        </div>   
                <% end %>

                <% end %>
    </div>

</div> 
```

**评论控制器：**

```
class CommentsController < ApplicationController

    def create

         @comment = Micropost.find(params[:comment][:micropost_id]).comments.build(params[:comment])
           respond_to do |format|
                 if @comment.save

                    unless params[:comment][:recipient].blank? # this will be blank when current user is commenting/replying on their own wall
                    recipient = User.find(params[:comment][:recipient])
                    UserMailer.new_wall_post_comment_notification(recipient, current_user).deliver if recipient.email_notification == 1 
                    end
                    format.js   { render :post_comment }
                    else
                    format.js   { render :form_errors }
                    end
           end
    end

end 
```

**部分评论：**

```
<div class="comment_container">

        <%= link_to image_tag(default_photo_for_commenter(@comment), :class => "commenter_photo"), commenter(@comment.user_id).username %>
     <div class="commenter_content"> 

        <div class="userNameFontStyle"><%= link_to commenter(@comment.user_id).username.capitalize, commenter(@comment.user_id).username %> - <%=  simple_format h(@comment.content) %> 
        </div>

    </div>

    <div class="comment_post_time"> 
        <%= time_ago_in_words(@comment.created_at) %> ago. 
    </div>

</div> 
```

似乎除了 1 个小问题外还在工作。假设我发表了 4 条评论... 1 条。第一条评论 1、第二条 2、第三条 3 和第四条 4.. 例如 1、2、3 和 4 我得到的结果是这样的：

![发布 1, 2 , 3 4](../Images/7fb7c7f2ddee86afb777e9c81fbd026e.png)

我有一种感觉，这与在留下每条评论后需要进行某种重置有关。刷新后评论按预期显示。1、2、3和4。有什么想法吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:20:58.313

你应该制作部分来渲染你`Comment`的 s （我想它应该是`/views/comments/_comment.html.erb`）。

然后只需替换：

```
.after("TEST"); 
```

和：

```
.after("<%= j render @comment %>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:55:01.840

这与 jdoe 的建议一起解决了我的问题

```
$('.new_comment').off().on('ajax:success', function(e){
 e.preventDefault();
    $(this).parent('.post_content').find('.comment_container:last').after("<%= j render 'comments/partials/comment' %>");
    $('#comment_content').removeClass("comment_box_focused").addClass("comment_box");
    $(".commentButtons").removeClass("displayButtons");
    $('#comment_content').val("");
    <% sleep 1 %>

}); 
```

# iphone - 从 Windows 与 iOS 对话？

> ID：10122369
> 
> 赞同：3
> 
> 时间：2012-04-12T11:10:25.150
> 
> 标签：iphone, ios, windows, mobile, usb

我必须在 Windows 上与 iOS 设备通信。我正在寻找类似于 libimobiledevice 的东西，它允许 iTunes 默认提供的系统服务，例如访问音乐、照片等。这样做的最佳做法或库是什么？依赖项（例如 iTunes 和必须与程序一起提供的外部库）呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:56:50.930

libimobiledevice 的非官方端口可能是一个答案，但它不会定期更新：http: [//www.bingtech.net/wordpress/2011/03/189/](http://www.bingtech.net/wordpress/2011/03/189/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:53:55.623

查看卓悦：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/NetServices/Articles/about.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/NetServices/Articles/about.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-16T21:30:11.933

您可以在此处找到 imobiledevice 的 Windows 版本：http: [//quamotion.mobi/iMobileDevice/](http://quamotion.mobi/iMobileDevice/)

希望能帮助到你，

弗雷德里克。

# nginx - 从 Windows 主机连接到 nginx（VirtualBox、Fedora）

> ID：10122374
> 
> 赞同：1
> 
> 时间：2012-04-12T11:10:49.507
> 
> 标签：nginx, virtualbox

运行 django 开发服务器（绑定到 0.0.0.0:8000）和 nginx（监听端口 90）的 VirtualBox 中的 Fedora

我为 VM 和端口转发设置了 NAT 连接 8000 -> 8000、8001 -> 90

我可以看到 django 为 127.0.0.1:8000 但 127.0.0.1:8001 没有响应

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:28:41.073

愚蠢的问题：Fedora 来宾可以正常连接到本地运行的 nginx 吗？

不是那么愚蠢的问题：您是否使用过 tcpdump/wireshark/smartsniff 或类似工具来查看流量是否完全通过主机->访客？也许 Fedora 防火墙阻止了到端口 90 的非本地连接？

另外，为什么不给 Fedora 来宾添加一个“仅限主机”的第二个网络适配器，而忘记摆弄 NAT 设置呢？

# asp.net - 将所有页面的标签包装在表单标签内是否在语义上有效 - ASP.net

> ID：10122375
> 
> 赞同：3
> 
> 时间：2012-04-12T11:10:51.283
> 
> 标签：asp.net, semantics, semantic-markup, runatserver

我对 ASP.net 并不陌生。实际上，我什至没有学习它。但是，我最近正在评估一些网站，发现它`<form runat="server" ..>`包含了整个页面并包含所有其他标签。问题：那是有效的 HTML 吗？现在是 2012 年，关于语义 Web、可访问 Web 等的讨论很热。你怎么看呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T11:16:43.560

它是语法上有效的 HTML。但我同意它有点“过时”的表单和一些隐藏字段等作为 ViewState。此外，当您想在页面上使用更多表单时（使用 JQuery fi），工作起来也很麻烦。

看看 ASP.Net MVC，它解决了这个问题。您可以完全控制 HTML，并且不需要页面周围的表单标签。它不使用 asp.net 服务器控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:17:47.497

[HTML5 规范](http://www.w3.org/TR/html5/the-form-element.html#the-form-element)并不太严格，允许大多数元素嵌套在表单中，但确实声明了

> form 元素表示表单相关元素的集合，其中一些可以表示可提交给服务器进行处理的可编辑值。

所以在我看来，如果元素不是与表单相关的，它就不应该真的存在。

# android - 是否可以通过 Air 原生扩展加载原生相机？

> ID：10122377
> 
> 赞同：0
> 
> 时间：2012-04-12T11:10:53.310
> 
> 标签：android, flash, android-camera, android-activity, air-native-extension

真的如题...

是否可以通过 Air 原生扩展加载原生相机？

我们已经创建了一个原生扩展（iOS 和 Android）并且 iOS 部分工作正常（加载原生相机控件）但是在 Android 上实现相同的功能时，我们无法让相机出现在舞台上，没有错误，只是没有什么！所以这让我想知道这真的可能吗？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:35:20.413

你想达到什么相机类还没有给你？“本机”相机可以这样连接到舞台：

```
var camera:Camera;
var display:Video;

camera = Camera.getCamera("0");
display = new Vide(stage.fullScreenWidth, stage.fullScreenHeight);
display.attachCamera(camera);
addChild(display); 
```

您可以根据需要在相机对象上设置质量/模式等。如果您想访问设备上的相机应用程序，则需要使用 CameraUI，这为您提供了更多的最终用户控制权，但限制了您可以对捕获的数据执行的操作。

# huffman-code - 无损预测编码

> ID：10122378
> 
> 赞同：1
> 
> 时间：2012-04-12T11:10:56.057
> 
> 标签：huffman-code

嗨，我在执行以下操作时遇到问题：

```
DPCM----> Entropy Coding
My DPCM predictor is 

AB
CX
X=0.75A-0.5B+0.75C

public static int[][] predictor(int[][] copy, int wt, int ht)
{

    int[][] error=new int[ht][wt];
    //error[0][0]=copy[0][0];
  for(int i=0;i<ht;i++)
  {
      for(int j=0;j<wt;j++)
      {
          if(j==0&&i==0)
          error[i][j]=copy[0][0];  
          else if (j==0&&i!=0)
              error[i][j]=copy[i][j]-copy[i-1][j];
          else if(i==0&&j!=0)
              error[i][j]=copy[i][j]-copy[i][j-1];
          else
              error[i][j]=copy[i][j]-(int)(0.75*copy[i][j-1]-0.5*copy[i-1]                 [j]+0.75*copy[i-1][j-1]);

      }
  } 
```

我已经实现了这一点，并将错误存储在二维数组中。

在此之后，我需要进行修改后的霍夫曼编码（代码簿大小为 128）所以我没有得到修改后的霍夫曼编码是否要对错误值进行？这也可以是负数 代码簿大小实际上是什么意思？您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:21:09.573

改进的霍夫曼编码在传真机上用于将黑色图像编码为白色。您将有两个霍夫曼表，一个用于黑色运行，一个用于白色运行，这与均方误差无关。即使它可能与之相关，使用 MSE 的目的是消除负值，因此使用简单的错误减法等度量将不起作用。您可能已经注意到，黑色运行的比特率较低，而白色运行的比特率较高。码字长度是指每个码向量的大小，另一方面，码本大小是指拓扑中向量的数量。

# memcached - LRU 会删除一段时间未使用的条目吗？

> ID：10122384
> 
> 赞同：13
> 
> 时间：2012-04-12T11:11:39.350
> 
> 标签：memcached, lru

当 memcache 中的可用内存已满时，memcache 使用 LRU（最近一次使用）算法来释放内存。我的问题是 LRU 算法是否会更愿意删除一段时间未使用的条目（最近一次使用）而不是过期的项目？即将到期的条目不会在那个确切时刻被删除，而是在下次有人尝试访问它时（AFAIR）。那么 LRU 算法（也）会考虑密钥的到期吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-13T10:43:52.840

要了解 memcached 如何进行 LRU，您必须更深入地了解 memcached 如何存储项目。项目的存储取决于它们的大小，只需将所有 100k 的项目存储在同一个平板中，而其他 200k 的项目存储在不同的平板中。

当内存已满并且您尝试存储 100k 项时，memcached 将在该平板上应用 LRU。如果 200k 平板中有过期或未使用的密钥，它们将保留在那里，而如果 100k 平板只有热键，则基于算法的其中一个将被驱逐。

回到您的问题，当内存已满并且您尝试存储项目时，memcached 将首先在您尝试写入的平板中查找过期项目，然后查找最少使用的项目。所以是的，它确实考虑了密钥的过期，或者更好的是，过期的密钥在 LRU 之前首先出现。

此外，当您尝试获取已过期的项目时，该项目将被驱逐并回收内存。

更多详细信息（谷歌上有很多关于 memcached 内存分配的内容，它也解释了 LRU，所以有很多值得阅读的内容）：

[http://returnfoo.com/2012/02/memcached-memory-allocation-and-optimization-2/](http://returnfoo.com/2012/02/memcached-memory-allocation-and-optimization-2/)

[http://www.adayinthelifeof.nl/2011/02/06/memcache-internals/](http://www.adayinthelifeof.nl/2011/02/06/memcache-internals/)

还有一个非常好的工具，我在每个 memcached 主题上都推荐它：

[http://code.google.com/p/phpmemcacheadmin/](http://code.google.com/p/phpmemcacheadmin/)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T13:35:49.643

据我所知，这种说法是不正确的。

> “回到您的问题，当内存已满并且您尝试存储项目时，memcached 将首先在您尝试写入的平板中查找过期项目，然后查找最少使用的项目。所以是的，它确实考虑到记下密钥的过期时间，或者更好的是，过期的密钥在 LRU 之前首先出现。”

Memcache 将根据 LRU 驱逐项目（它是否有任何过期项目都没有关系，只要它们比另一个键最近使用（甚至有效））。

不久前在 Memcache 1.4.4 上测试过。

# java - ActionBarSherlock 4 滚动文本视图

> ID：10122385
> 
> 赞同：0
> 
> 时间：2012-04-12T11:11:40.097
> 
> 标签：java, android, android-xml, actionbarsherlock, android-actionbar

我最近将我的项目从 ABS 3.5 升级到了 ABS 4，但我遇到了一个问题，这让我已经把头发拉了几天了。主要活动包含三个带有文本的选项卡。在 3.5 中，文本将在各自的选项卡中水平滚动，因为文本太长而无法随时放入选项卡中。由于我升级到 ABS 4，文本不再滚动，而是缩短了单词，例如“Messa...”。

我可以看到 ScrollingTextView 类已从 com.actionbarsherlock.internal.widget 中删除。我可以看到 ScrollingTabContainerView 已添加到此包中，但我不知道这是否作为替代提供。

我试过设置`android:ellipsize`to`marquee`和设置`marqueeRepeatLimit`to`marquee_forever`但它似乎对我不起作用。

有谁知道如何让这个功能重新运行，因为我认为它仍然是可能的。

顺便说一句，我的意思是文本应该自动滚动，用户不需要点击并拖动标签来滚动。只是要清楚:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:02:41.957

好的，据我所知，此功能已在 ABS 4 中完全删除，并已替换为滚动选项卡。这有点令人失望，因为它为标签提供了很好的效果以使文本滚动。

# delphi - 兰德种子不工作？

> ID：10122386
> 
> 赞同：3
> 
> 时间：2012-04-12T11:11:49.380
> 
> 标签：delphi

```
procedure RandSeed();
var datum: TDateTime;
var hodina,minuta,sekunda,milisekunda: Word;
begin
  DecodeTime(datum,hodina,minuta,sekunda,milisekunda);
  RandSeed := milisekunda;
end; 
```

此代码不起作用。当我尝试编译它时，它说“无法分配左侧”。有谁知道为什么？谢谢。

编辑：我已经根据您的提示更改了我的代码，现在它可以工作了，非常感谢！

```
procedure RandSeed();
var hodina,minuta,sekunda,milisekunda: Word;
begin
  DecodeTime(now,hodina,minuta,sekunda,milisekunda);
  System.RandSeed := milisekunda;
end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T11:16:01.130

要为[`RandSeed`](http://docwiki.embarcadero.com/VCL/XE2/en/System.RandSeed)变量赋值，您必须像这样指定完整的限定名称，`System.RandSeed`以避免与您自己的过程发生冲突名称，`RandSeed`或者只是重命名您的过程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T11:22:29.517

两个问题：首先，正如 RRUZ 所提到的，您与预定义的`System.RandSeed`. 冲突是由于您试图从*过程*中返回值而引起的。（见下文。）

第二个原因是，正如我所说，您试图从过程中返回一个值。你需要一个函数。

```
function RandSeed: Word;
var 
  datum: TDateTime;
var 
  hodina,minuta,sekunda,milisekunda: Word;
begin
  DecodeTime(datum,hodina,minuta,sekunda,milisekunda);
  RandSeed := milisekunda;
  // Better (and more modern) would be
  // Result := milisekunda;
end; 
```

如果您的意图是`RandSeed`用您自己的函数替换内部变量，这将起作用。如果您的意图只是使用您的函数为现有`RandSeed`变量赋值，请将您的过程更改为包含：

```
System.RandSeed := millisekunda; 
```

# c - sigtimedwait 和检测信号

> ID：10122391
> 
> 赞同：0
> 
> 时间：2012-04-12T11:12:07.823
> 
> 标签：c, pthreads, signals

我应该实现一个信号处理程序，它在第一次调用某个信号时停止程序中的所有线程，如果它们已经停止，则恢复它们。我使用以下代码实现了一个在后台运行的恶魔线程：

```
void *handle_sig(void *arg)
{
    sigset_t set;
    //set set...

    struct timespec to;
    to.tv_sec = 1;
    to.tv_nsec = 0;

    while (_keepListening) {

        int ret = sigtimedwait(&set, NULL, &to);

        if (ret < 0)
            if (errno == EAGAIN) {
                continue; /* no signal sent*/
            } else {
                fprintf(stderr, "Failed...\n");
                exit(1);
            }

        if (_state == PAUSE_STATE) { /* was blocked*/
            //do something
        } else {
`                       //do something else
        }

    }
    return NULL;
} 
```

问题在于，如果发送并检测到一个信号，然后在再次进入 while 循环之前发送另一个信号 - 第二个信号将被忽略，这会使程序永远暂停。有没有一种方法可以检测自上次调用 sigtimedwait 以来是否发送了信号？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:51:13.460

您可能会考虑使您的处理异步。

例如，通过为“做某事”或“做其他事情”启动一个线程。

# python - Exec 语句不会正确定义名称

> ID：10122395
> 
> 赞同：-2
> 
> 时间：2012-04-12T11:12:29.550
> 
> 标签：python, python-2.7

> **可能重复：**
> [在python中声明一个全局动态变量](https://stackoverflow.com/questions/4277056/declaring-a-global-dynamic-variable-in-python)

```
>>> def f():
        global cat
        exec 'cat'+'="meow"'
        return
>>> f()
>>> cat
Traceback (most recent call last):
  File "<pyshell#23>", line 1, in <module>
    cat
NameError: name 'cat' is not defined 
```

这只是我遇到的问题的一个精简示例。在我的实际脚本中，我需要创建和命名一个类的各种实例，因此需要 exec 语句。

只是打电话

```
exec 'cat'+'="meow"' 
```

直接在 shell 中工作正常，但是一旦它被打包到一个函数中，它似乎就不再工作了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:22:09.780

我仍然不明白你为什么要使用 exec，它是一个糟糕的设计选择，替代方案通常更容易，例如而不是全局，然后你可以简单地这样做

```
ns = {}

def f():
    ns["cat"] = "miow"

print ns 
```

现在不是更干净了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:23:35.840

看起来 exec 忽略了全局，文档有点模糊。但这有效：

```
>>> def f():
...         global cat
...         exec 'global cat; cat'+'="meow"'
... 
>>> 
>>> f()
>>> cat
'meow' 
```

# android - 一次退出整个应用程序

> ID：10122399
> 
> 赞同：4
> 
> 时间：2012-04-12T11:12:44.217
> 
> 标签：android, application-lifecycle

[我在我的应用程序中使用了此处](http://blog.donnfelker.com/2011/02/17/android-a-simple-eula-for-your-android-apps/)的代码，当我单击“取消”选项时，应用程序只是最小化，当我长按主页按钮并选择应用程序时。它显示相同的屏幕，而不是启动画面或通常的方式该应用程序启动 - 所以我假设它只是将我带到主屏幕。我正在寻找一种可以完全关闭主要活动的方法。

我尝试了以下方法，每次都崩溃：

1.  `finish();`
2.  `mainactivity.class.finish();`
3.  打开一个意图`systemexit()`
4.  `setresult()`在另一个活动中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T11:34:47.637

不推荐，但您仍然可以使用它。如果您需要退出应用程序，最好使用此解决方案。

根据我的说法，最好的解决方案是完成您应用中的所有活动，如下所示。

step1）在mainactivity中维护一个静态变量说。

```
 public static boolean isQuit = false; 
```

step2）在按钮的单击事件中将此变量设置为true。

```
 mainactivity.isQuit = true;
   finish(); 
```

step3）并且在您的应用程序的每个活动中都有如下的onrestart方法..

```
 @Override
      protected void onRestart() {
         // TODO Auto-generated method stub
         super.onRestart();
        if(mainactivity.isQuit)
            finish();
    } 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-12T11:32:12.367

您可以使用以下方法杀死每个正在运行的活动的所有线程异步任务：

```
System.exit(0); 
```

# facebook - 一个奇怪的、空荡荡的广场起源于 facebook

> ID：10122404
> 
> 赞同：0
> 
> 时间：2012-04-12T11:13:18.573
> 
> 标签：facebook, api, frame

我希望我能在这个论坛上找到我的问题的答案。我们运行一个 Joomla 站点 (v1.5.23) 并在站点上集成了 facebook 评论、推荐等。

不久前，我们的网站上出现了一个奇怪的方形框架。如果我检查框架代码，我可以看到它来自 Facebook（例如，有对 s-static.ak.fbcdn.net 的引用）。

我不知道为什么会这样显示。我试图在 Joomla 中取消发布 facebook-plugins，但它仍然存在。

有人知道这可能是什么以及我如何摆脱它吗？

这是一个实时页面，搜索“Det är förmiddag, lätt nattfrost, ett svagt ljus” - 在该段落中，您将看到框架：

[http://www.tidningenkulturen.se/artiklar/ess-mainmenu-57/riga-mainmenu-130/11840-mjaellare-aen-aelfvenben](http://www.tidningenkulturen.se/artiklar/ess-mainmenu-57/riga-mainmenu-130/11840-mjaellare-aen-aelfvenben)

或者这里是它的图像：http: [//my.jetscreenshot.com/5366/20120412-kw0j-300kb](http://my.jetscreenshot.com/5366/20120412-kw0j-300kb)

亲切的问候， - 约翰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:38:46.253

欢迎来到stackoverflow！

将以下内容添加到您的 CSS 样式表中，它将消失。完成后，只需检查它是否隐藏了您不想隐藏的任何内容。

```
iframe#fb_xdm_frame_http {display:none;}
iframe#fb_xdm_frame_https {display:none;} 
```

如果这对您有帮助，请考虑支持[http://area51.stackexchange.com/proposals/34294/joomla-answers](http://area51.stackexchange.com/proposals/34294/joomla-answers)

干杯!

# jquery - 使用 jquery 验证文本框数字

> ID：10122405
> 
> 赞同：2
> 
> 时间：2012-04-12T11:13:19.553
> 
> 标签：jquery, validation, jquery-validate

表中有一个字段是浮点数，我只需要在其中插入浮点值，但在提交时我使用了将数据插入表中的函数，我希望使用 jquery 在客户端进行此数字验证

任何人都可以建议我的线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:14:46.387

尝试此代码并根据您的适当要求对其进行一些修改

```
<script type="text/javascript">
$(document).ready(function () {
$('input[numeric]').keyup(function () {
var d = $(this).attr('numeric');
var val = $(this).val();
var orignalValue = val;
val = val.replace(/[0-9]*/g, "");
var msg = "Only Integer Values allowed.";
if (val != '') {
orignalValue = orignalValue.replace(/([^0-9].*)/g, "")
$(this).val(orignalValue);
alert(msg);
}
});
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:16:19.877

jQuery 已经有一个[isnumeric()](http://api.jquery.com/jQuery.isNumeric/)函数，所以你可以用它来做检查！以下是如何将其用作客户端验证的一部分的示例：

```
if(!$.isNumeric($('#elementId').val())) {
    // show an error
} 
```

# windows-phone-7 - Windows Phone Pivot 中的 Bing 地图旋转

> ID：10122411
> 
> 赞同：0
> 
> 时间：2012-04-12T11:13:40.877
> 
> 标签：windows-phone-7, xaml

尝试旋转 MapBase 时遇到问题。至于我没有找到一种方法来旋转地图内的内容（我的意思是瓷砖）。我对地图本身进行了旋转变换，并将其放在正方形中以模拟矩形视口。问题是地图角在旋转时会流过正方形的角，最糟糕的是它会在枢轴项目标题上移动，我不知道如何将它带到底部。有什么解决方法吗？或者可能是其他方式来旋转地图内容？

更新 XAML 代码这是我的代码

```
 <Grid x:Name="LayoutRoot" Background="Transparent">
    <!--Pivot Control-->
    <controls:Pivot Title="MY APPLICATION">
        <!--Pivot item one-->
        <controls:PivotItem Header="first">
            <Grid d:LayoutOverrides="Height" Margin="-44,-30,44,30">
                <Microsoft_Phone_Controls_Maps:Map Margin="-18,-72,2,76" RenderTransformOrigin="0.5,0.5" UseLayoutRounding="False" d:LayoutRounding="Auto">
                    <Microsoft_Phone_Controls_Maps:Map.RenderTransform>
                        <CompositeTransform Rotation="36.01"/>
                    </Microsoft_Phone_Controls_Maps:Map.RenderTransform>
                </Microsoft_Phone_Controls_Maps:Map>
                <Rectangle Fill="#FFF4F4F5" Height="54" Margin="-14,-42,0,0" Stroke="Black" VerticalAlignment="Top"/>

            </Grid>
        </controls:PivotItem>

        <!--Pivot item two-->
        <controls:PivotItem Header="second">

        </controls:PivotItem>
    </controls:Pivot>
</Grid> 
```

在示例中位于地图顶部，但地图位于 Pivot 标题的顶部，甚至应用程序标题位于地图角落的背面......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:33:54.770

如果您在旋转手机时在“Paysage Orientation”中加载另一个页面？（这可能是一个临时解决方案......）但您想重新加载具有良好尺寸的地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:40:45.617

如果启用了手势交互，则在 Pivot 中使用 Map Control 不是一个好主意。

> 不要在 Pivot 控件中使用 Slider、ToggleButton 或 Map 控件。不要使用可以在 Pivot 控件内平移或滚动的控件。例如，如果您将 Map 控件放在 Pivot 控件中，则可能难以使用 Pivot 控件。手势输入变得混乱。解决方案是导航到包含需要手势输入的控件的子页面。只要地图未启用手势交互，您就可以将地图放置在数据透视页面中。您可以覆盖一个可以激活地图的按钮。按下按钮实际上会导航到一个单独的页面，其中只有 Map 控件。然后用户可以按下返回按钮返回到 Pivot 控件。

[http://msdn.microsoft.com/en-us/library/windowsphone/design/hh202919%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/design/hh202919%28v=vs.105%29.aspx)

# java - 码头、JNDI、Postgresql：找不到类

> ID：10122415
> 
> 赞同：4
> 
> 时间：2012-04-12T11:13:46.387
> 
> 标签：java, postgresql, jetty, jndi, postgresql-9.1

我正在尝试在 Jetty 中设置 JNDI 数据源。在 start.ini 文件中，我添加了 jetty-plus.xml 文件，选项如下所示：

```
OPTIONS=Server,resources,websocket,ext,plus,annotations 
```

然后我在我的上下文文件中添加资源：

```
<New id="Traildevils" class="org.eclipse.jetty.plus.jndi.Resource">
    <Arg/>
    <Arg>jdbc/Traildevils</Arg>
    <Arg>
        <New class="org.postgresql.ds.PGConnectionPoolDataSource">
            <Set name="User">recom</Set>
            <Set name="Password">recom</Set>
            <Set name="DatabaseName">Traildevils</Set>
            <Set name="ServerName">localhost</Set>
            <Set name="PortNumber">5432</Set>
        </New>
    </Arg>
</New> 
```

postgresql-9.1-901.jdbc4.jar 文件位于我的 war 文件的 WEB-INF/lib 中。

当我现在尝试启动码头时，出现以下错误：

```
2012-04-12 12:58:09.723:WARN:oejx.XmlConfiguration:Config error at 
<New id="Traildevils" class="org.eclipse.jetty.plus.jndi.Resource"><Arg/>
<Arg>jdbc/Traildevils</Arg>
<Arg>|???<New class="org.postgresql.ds.PGConnectionPoolDataSource">
<Set name="User">recom</Set>
<Set name="Password">recom</Set>
<Set name="DatabaseName">Traildevils</Set>
<Set name="ServerName">localhost</Set><Set name="PortNumber">5432</Set></New>|??</Arg></New> 
java.lang.ClassNotFoundException: org.postgresql.ds.PGConnectionPoolDataSource 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T11:22:53.580

您需要将 postgresql-9.1-901.jdbc4.jar 添加到`$JETTY_HOME/lib/ext`.

这是因为码头在从您的 WAR 加载类之前初始化了 JNDI 上下文。

# javascript - Javascript只显示偶数

> ID：10122417
> 
> 赞同：1
> 
> 时间：2012-04-12T11:13:59.087
> 
> 标签：javascript, math

我有这个项目，我必须生成随机数学总和......它们都是“除以”总和，所以我想让所有数字均匀。谁能帮我这个？只是问我是否不够清楚=）

```
<script>
   $(function() {
      var number = document.getElementById("breuken"),
      i = 1;

      for (; i <= 10; i++) {

         var sRandom = Math.floor(Math.random()*10 + 1),
         fRandom = Math.floor(sRandom + Math.random()*(20-sRandom )),
         calc = Math.abs(fRandom / sRandom),
         textInput = document.createElement('input'),
         span = document.createElement('span'),
         p = document.createElement('p');

         textInput._calc = calc;

         textInput.onchange = (function(p) {
            return function(ev) {
               var self = ev.target;
               if (self.value == self._calc) {
                  p.style.color = 'green';                    
               };
            };
         })(p);

         span.innerHTML = fRandom + " : " + sRandom + " = ";

         p.appendChild(span);
         p.appendChild(textInput);

         number.appendChild(p);

      };
   });
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T11:18:22.450

要获得偶数随机数：

将你的范围减半并乘以 2

```
var range = 100;
var number = Math.floor( Math.random() * range / 2 ) * 2; 
```

或继续获得随机数，直到获得偶数

```
 var number;
 do {
      number = Math.floor(Math.random()*10 + 1)
 } while( number % 2 == 1 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T11:18:47.050

获取一个超过 1/2 范围的随机整数并将其加倍。

# wpf - WPF 中类似画笔的纹理笔触

> ID：10122420
> 
> 赞同：0
> 
> 时间：2012-04-12T11:14:05.600
> 
> 标签：wpf, textures, lines, brushes

我需要一种在 WPF 中绘制具有粗糙、纹理或仿旧效果的线条的方法，就好像它们是由真正的画笔或笔触绘制的一样。我可以通过某种方式使用图形元素来做我想做的事，但这种方法不能很好地扩展。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:10:58.257

我认为你可以通过使用for循环处理位图中的像素来完成它从画笔位图中获取像素并启动另一个for循环来设置目标位图上的像素

我已经做过一次，但这真的很难

# java - AsynchronousFileChannel 写操作，有时会阻塞？

> ID：10122422
> 
> 赞同：1
> 
> 时间：2012-04-12T11:14:14.043
> 
> 标签：java

我最近开始在我的一个项目中使用 Java AsynchronousFileChannel，我想尽可能快地写入文件。当我来测试我的项目时，我意识到也许读写操作对我来说并不是真正的异步！我制作了一个非常简单的测试程序，通过将字节写入 2 个文件（每个磁盘一个）来查看写入和读取方法是否阻塞。

```
ByteBuffer bufferc=ByteBuffer.allocate(75000000);//~75MB
ByteBuffer bufferd=ByteBuffer.allocate(75000000);
for (int i=0; i<75000000; i++)
{   bufferc.put((byte)1);   bufferd.put((byte)1); }

bufferc.flip(); bufferd.flip();

ExecutorService executor = Executors.newFixedThreadPool(10);
AsynchronousFileChannel channelc =AsynchronousFileChannel.open(Paths.get("C:\\ppp"), getReadWriteOptions(),executor, new FileAttribute<?>[0]);
AsynchronousFileChannel channeld =AsynchronousFileChannel.open(Paths.get("D:\\ppp"), getReadWriteOptions(), executor, new FileAttribute<?>[0]);

long  start = System.currentTimeMillis();   
System.out.println("start");
Future futurec=channelc.write(bufferc, 0);
System.out.println(futurec.isDone());
Future futured=channeld.write(bufferd, 0);
System.out.println(futured.isDone());
long elapsedTimec = System.currentTimeMillis()- start; 

channelc.close();
channeld.close();
System.out.println("time="+elapsedTimec); 
```

所以，我将两个缓冲区写入两个不同的文件。因为每个缓冲区大约 75 MB，我想每个缓冲区不能立即写入我的磁盘，所以我希望我的输出类似于

```
false false time= 
```

这对我来说意味着写操作被“赋予”给 executorService，并且程序继续运行。在这个程序的多次运行中，这确实发生在我身上，但并非总是如此。我的意思是，我得到像这样的输出

```
start true true time=2621 
```

或者

```
start false true time=3039 
```

或者如果我很幸运

```
start false false time=235 
```

时代真的不同，我什至不明白为什么我会得到前两个输出！我希望有人向我解释影响此输出的因素，和/或我将如何仅获得上述输出中的第三个！

# jsp - 在 JSP 中将变量放入查询字符串中的格式是什么？

> ID：10122436
> 
> 赞同：0
> 
> 时间：2012-04-12T11:14:59.427
> 
> 标签：jsp, query-string

这个问题就像一个链接：

```
 <a href="http://www.sample.com/sample.jsp?name=nameVariable">Visit W3Schools</a> 
```

如果 nameVariable 是一个变量，我应该在上面的行中使用什么格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:19:28.143

如果变量来自一个参数，那么`${param.nameVariable}`

```
<a href="http://www.sample.com/sample.jsp?name=${param.nameVariable}">Visit W3fools.com</a> 
```

如果变量是一个普通的 JSP 变量，那么`${nameVariable}`

```
<a href="http://www.sample.com/sample.jsp?name=${nameVariable}">Visit W3fools.com</a> 
```

# unicode - RTF 错误代码的含义

> ID：10122437
> 
> 赞同：4
> 
> 时间：2012-04-12T11:15:13.330
> 
> 标签：unicode, encoding, controls, rtf

我正在处理由其他人在未知平台上制作的 RTF 文件，并且所有内容都被正确解释，除了一些字符，无论我在 openoffice 中打开它们的任何字符集。这是经过解释的纯文本：

> “Même taille que la Terre，même masse，même âgec Vénus a souvent été qualifiée de sœur de la Terre。”

这是原始的ANSI段落：

> "M\u234\'3fme taille que la Terre, m\u234\'3fme masse, m\u234\'3fme \u226\'3fge\uc2 \u61825\'ff\'81\uc1 c V\u233\'3fnus a souvent \u233\'3ft\u233\'3f qualifi\u233\'3fe de s\u339\'3fur de la Terre。”

放大：

> “âgec Vénus”变为“\u226\'3fge\uc2 \u61825\'ff\'81\uc1 c V\u233\'3fnus”

最后，我们想出什么：

> "\uc2 \u61825\'ff\'81\uc1 c"

这里是说我们在 4 字节`\uc2`和`\uc1`2 字节 Unicode 编码之间来回切换。

`\u61825`是一个未知的 Unicode 字符。事实上，根据 RTF 规范，任何大于 2^15 的 UTF 字符都应该写成否定形式；带有 ANSI 字符的否定形式应该使记事本可以看到“-”（减号）符号，对吗？所以在这里我已经有了一些我不明白的东西，首先制作 rtf 文件的人使用的 RTF 编写器是如何做到的。也许我错过了规范中的某些内容，具体版本，字符集，我不知道。如果按原样，61825 将对应于 F181，它位于 Unicode 表的私有区域中。

然后，`\'ff\'81`将使用整个“特定字符”组（其结构通常为`\uN\'XX`）的 ANSI 等效字段来编码 4 字节长的内容。又在这里，我找不到：

*   引用的代码页（Windows-1252、ISO-8859-1、其他？）是什么（就像文件中出现`\uN\'XX`序列的所有其他位置一样，`XX`始终`3F`是“？”的 Windows-1252 代码，所以它没有给我太多信息）

*   （看起来`\'FF`像转义序列中的一些控制字符！）代表什么，然后为什么`\'81`...实际上，`\u61825`到十六进制的翻译是`F181`，而不是`FF81`...我在这里迷路了！

最后，翻译文本（法语）让我们期待的是“：”（分号）：“与地球相同大小，相同质量，相同年龄：金星经常被称为地球的姐妹”。这是有道理的。但是哪个 rtf 的作者能想象出如此复杂的分号代码呢？

所以再一次，经过1小时的搜索，我向你们提出问题：有人认识这个吗，可以告诉我使用了什么控制字编码，61825是否有大端/小端/2的补码混乱，与 相同`\'ff\'81`，它将组装为`FF81`而不是`F181`，它本身并不意味着什么......这里我的问题只是想知道是否有办法从奇怪的 RTF 编码中找到完整的原始文本！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T11:48:43.223

> 翻译后的文本（法语）会让我们期待的是“：”（分号

Nearly：应该是省略号。[您可以在此处](http://www.linternaute.com/science/espace/dossiers/06/venus/1.shtml)查看源文本。

省略号通常应该简单地写成三个句点，但传统上，为了更好地控制它们的间距，在存在可以进行自动字形替换的复杂文本布局算法之前，有一个单独的字符表示省略号。因此，存在一个 Unicode 兼容字符 U+2026 HORIZONTAL ELLIPSIS 以允许往返到旧编码，例如 Windows 代码页 1252，它是字节 133。

但是，这不是您的 RTF 文档中编码的内容。那太简单了。

> 61825 是一个未知的 Unicode 字符。

这是一个私人使用区域字符，这意味着它可以代表任何东西。Word 已将某些常见的符号字体导出为 PUA 字符 - 请参阅[此帖子](http://blogs.msdn.com/b/murrays/archive/2008/01/24/weird-f020-f0ff-characters-in-word-s-rtf.aspx)了解背景。

所以有人可能在某个时候使用了符号字体，其中代码单元 129（U+F181 中的 0x81，61825）映射到看起来像省略号的东西。那个字体是什么，我不知道！它似乎不是常见的嫌疑人之一（Symbol、Wingdings、Webdings）。您现在可能只需要手动将 U+F181 替换为 U+2026 ，除非您可以找到有关源的更多信息。

# windows - MSysGit 和 ssh 配置。失踪

> ID：10122439
> 
> 赞同：11
> 
> 时间：2012-04-12T11:15:18.270
> 
> 标签：windows, git, ssh, msysgit

1) 运行 Git Bash (C:\Program Files (x86)\Git\bin\sh.exe --login)

```
$ ssh -v git@github.com
OpenSSH_4.6p1, OpenSSL 0.9.8e 23 Feb 2007
debug1: Reading configuration data /c/Users/Alexander Fedorov/.ssh/config
debug1: Applying options for github.com
debug1: Connecting to github.com [207.97.227.239] port 22.
debug1: Connection established.
...
Hi xpoft! You've successfully authenticated, but GitHub does not provide shell access.
... 
```

好的！ssh 配置读取良好。

2) 从 cmd.exe 运行

```
C:\Users\Alexander Fedorov>ssh.exe -v git@github.com
OpenSSH_4.6p1, OpenSSL 0.9.8e 23 Feb 2007
debug1: Connecting to github.com [207.97.227.239] port 22.
...
debug1: No more authentication methods to try.
Permission denied (publickey). 
```

不。ssh 配置文件丢失...

如何...如何从 ssh.exe 读取配置？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T11:43:28.850

可能缺少的是用户环境变量`HOME`。

如果你从`git-cmd.bat`msysgit 打包的脚本启动你的 DOS 会话，它应该被定义，你应该看到`%HOME%\.ssh\id_rsa(.pub)`

但是在任何其他 DOS 窗口中，`HOME`默认情况下都没有定义（`HOMEPATH`或者`USERPROFILE`是）。
另请参阅“ [Fix msysGit Portable $HOME location](https://stackoverflow.com/questions/3454774/fix-msysgit-portable-home-location/3455231#3455231)`git-cmd.bat` ”作为说明（但对于最新版本的 msysgit 及其脚本，您不需要该解决方法 ）

# coldfusion - 多语言网站，如何处理？

> ID：10122441
> 
> 赞同：4
> 
> 时间：2012-04-12T11:15:20.087
> 
> 标签：coldfusion, web, multilingual

我有一个网站（Coldfusion），我想在该网站上提供多语言，但不知道最好的方法是什么。

我有两个计划：

1：

当然，所有内容（文本）都在数据库中。

如果用户想要不同的语言，用户将单击链接/标志，这会将请求的语言放入会话变量中，例如： session.language = "es"

在数据库中，我将有 2 列（每种语言都有 1 列），然后选择属于“es”的文本

然后每个页面都会向数据库发出请求以获取属于 session.language 的文本。

优点：实现起来相对简单

缺点： SEO 明智的我认为这不是很好。http://www.domain.com/page.cfm 会给出英文文本或西班牙文文本（或其他语言）。Google 不会添加重复的网址

2：

对英语使用 http://www.domain.com/en/page.cfm，对英语使用 http://www.domain.com/es/page.cfm。

使用 URL 重写规则，URL http://www.domain.com/en/page.cfm 中的语言值实际上是一个页面 http://www.domain.com/page.cfm?language=en

然后 url.language 变量将从数据库中选择正确的语言。

优点：每种语言的唯一 URL。适合 SEO 和 Google 索引。

缺点：实施起来有点困难。（我认为）

或者有没有人有其他/更好的想法？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:16:21.627

[http://i18n.riaforge.org/](http://i18n.riaforge.org/)有 i18n 的下载。它可用于确保所有字符串标签匹配。这样一来，如果有人想将“保存”更改为“更新”，就可以在一处完成。

考虑翻译人员的技术背景也很重要。与更新数据库相比，让翻译团队在记事本中编辑文件通常更容易。文本文件适用于版本控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T15:00:04.327

为了有效地创建一个多语言站点，您需要为自己设置一个规则，即任何**文本**都不会以硬编码的形式放入源代码中。它要么需要来自数据库和/或资源包。

**来自数据库的文本**

您需要确保存储数据的列是 unicode，否则您将遇到重音字符问题。也没有每种语言的列，因为这是不可扩展的，请按照@jan 的建议进行操作，并有一个翻译表，其中项目在参考和语言上键入。

**资源包**

您不会希望从数据库中获取每一个文本，因此您可以使用资源包。诚然，这是一个来自 Paul Hastings 博客的关于资源包的一些解决方案的链接[http://www.sustainablegis.com/blog/cfg11n/index.cfm?mode=entry&entry=FD48909C-50FC-543B-1FE177C1B97E8CC1 。](http://www.sustainablegis.com/blog/cfg11n/index.cfm?mode=entry&entry=FD48909C-50FC-543B-1FE177C1B97E8CC1)老实说，他的博客是关于这个主题的极好资源。

关于您如何处理 URL，请不要执行选项 1，因为您非常正确地确定您将导致页面的 SEO 排名出现问题，这意味着用户无法正确共享或返回页面。

两种方法是在 URL 中使用您在选项 1 中确定的语言代码。

**优点**

*   配置更简单

**缺点**

*   您有一个应用程序，这意味着当您添加更多语言时，您会增加该应用程序的内存的复杂性和权重

或者您可以为每个应用程序设置不同的子域或域，例如 es.yourdomain.com 或 yourdomain.es 它们都可以是相同的代码库

**优点**

*   每种语言都是一个独立的应用程序，这意味着它有自己的内存

**缺点**

*   更努力地配置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T11:32:34.140

我会选择选项 2。每个翻译都应该有自己的 url。指向您网站的链接已经在预期的翻译中。

要将翻译存储在数据库中，我不会将每个翻译放在单独的列中，而是将它们放在单独的表中：

表帖子：
- id
- title_id
- ...

表翻译：
- label_id
- value
- country_code
- language_code

title_id 与 label_id 匹配的位置

这样您就不必在添加新翻译时更改表结构。这使您可以对任何标签或文本进行无限翻译。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T11:30:44.427

您应该始终首先检查浏览器标题“Accept-Language”的默认语言（正确的标准方法），并提供链接（直观看似正确的方法）仅作为替代。

在数据库中执行此操作似乎不是很标准。假设您想使用 MVC 架构（模型-视图-控制器）。大多数软件在表示层（视图）（例如 html）中使用键，并且与表示层一起，您有语言文件（在 Java 中，这通常是属性文件），它们仅通过文件名映射，并且可以通过以下方式修改普通用户，没有任何特殊技能，例如没有计算机技能的专业翻译。当然你可以把它放在一个数据库中，但它只是做更多的工作，并将信息移出表示层。

有各种库可以做到这一点。您应该为您的应用程序找到一个正常的。请编辑您的问题以包括您用于开发应用程序的内容。（例如 JSP、Tapestry、Wicket、ASP、PHP 等）例如，如果您想使用 JSP，那么我建议您使用 JSTL 标记库的语言支持。或者，如果您使用的是 Tapestry，我会指向[http://tapestry.apache.org/localization.html](http://tapestry.apache.org/localization.html)或[http://tapestry.apache.org/tapestry4.1/UsersGuide/localization.html](http://tapestry.apache.org/tapestry4.1/UsersGuide/localization.html)

要查找它，您可以查找术语“国际化”又名“i18n”或“本地化”。（这些术语的含义不同，但很少有人正确使用它们，所以两者都有效[。http://www.w3.org/International/questions/qa-i18n](http://www.w3.org/International/questions/qa-i18n)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-15T21:59:14.653

我发现最好的方法是使用一个 XML 来保存那些页面语言的东西，一个 xml 来覆盖每个页面，然后你可以改变它的语言。当页面加载时，只需从数据库或文件中加载不同的 XML……有很多方法可以做到这一点。我尝试过的所有其他方法都有它们的问题，至少这个方法允许您使用一种语言 XML，将其交给将要复制它的人，然后更改框……您将其放入数据库中以提供服务。

也可以对文本执行此操作，并让 DB 通过使用要包含在页面 XML 中的项目列表为该页面的文本生成 XML。

一旦你明白了，剩下的就变得很容易了......并且给出了用点符号访问这些数据的 CF 方法，对我们来说很容易

说你有“加载图像”

```
in english xml it may be <LoadIMGS>Load Images</LoadIMGS> 
in chinese it may be <LoadIMGS>加载图像</LoadIMGS>
or <LoadIMGS>Jiā zǎi túxiàng</LoadIMGS> 
```

无论如何，在您的 CFM 代码中，您只需将 #variablename.LoadIMGS# 放在适当的位置...我还建议在 loadimages 标记中放入字体大小（如果不是正常大小）应调整到的大小。这样，当翻译太大时，你可以缩小那个字体……等等。

请享用！！！

# php - 如何从 Symfony2 的库中获取控制器/i18n 对象？

> ID：10122447
> 
> 赞同：1
> 
> 时间：2012-04-12T11:15:34.767
> 
> 标签：php, symfony1, symfony

在**Symfony1 中**，我使用：

```
sfContext::getInstance()->getController()->...
sfContext::getInstance()->getI18N()->... 
```

如何在**Symfony2**中得到这个？

**更新**：在 Symfony2 中这是不可能的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:54:09.153

在您的控制器中，您可以执行`$this->get('translator')`. 更多信息[在这里](http://symfony.com/doc/current/book/translation.html)。虽然不了解控制器部分。

**编辑：**

示例服务实现将是，

在你的课上

```
namespace Your\Class\Namespace;
use Symfony\Component\Translation\TranslatorInterFace;
use Symfony\Component\HttpFoundation\Request;

class YourClass
{

    private $translator;
    private $request;

    public function __construct(TranslatorInterFace $translator, Request $request)
    {
        $this->translator = $translator;
        $this->request = $request;
    }

    public function aMethod(){
        $translator->trans('key');
        $session = $this->request->getSession();
    }
    //.....
} 
```

在中添加以下行`services.yml`

```
 my_service:
  scope: request
  class: FQCN\Of\YourClass
  arguments: [@translator, @request] 
```

然后你的控制器可以使用访问类，

```
$this->get('my_service'); 
```

# java - 在 tomcat 上运行查询密码，Scala 库出错

> ID：10122448
> 
> 赞同：1
> 
> 时间：2012-04-12T11:15:42.450
> 
> 标签：java, scala, tomcat7, neo4j

我正在尝试在带有 tomcat 的 Web 应用程序（REST）中使用 cypher 运行查询。此代码在普通的 java 应用程序中正常工作，但如果我使用 tomcat 在 web 应用程序上运行它，它会返回此错误：

```
java.lang.NoClassDefFoundError: scala/ScalaObject 
```

如果我在 tomcat 上部署时将 scala-library.jar 添加到项目中，则会返回错误“OutOfMemory”。在网上搜索，我将我的 JAVA_OPTS 从 512M 增加到 2048M 但没有。

这是我执行查询的代码：

```
ExecutionEngine engine = new ExecutionEngine( graphDb );  
ExecutionResult result = engine.execute( query ); 
```

看起来 ExecuteEngine 使用了 Scala 库，并且该库与 tomcat 冲突。有什么建议么？

编辑：

（全栈OOME）

```
16-apr-2012 16.25.10 org.apache.catalina.core.ContainerBase startInternal
GRAVE: A child container failed during start
java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Java heap space
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
    at java.util.concurrent.FutureTask.get(FutureTask.java:83)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
  Caused by: java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOfRange(Arrays.java:3209)
    at java.lang.String.<init>(String.java:215)
    at java.io.DataInputStream.readUTF(DataInputStream.java:644)
    at java.io.DataInputStream.readUTF(DataInputStream.java:547)
    at org.apache.tomcat.util.bcel.classfile.ConstantUtf8.<init>(ConstantUtf8.java:48)
    at org.apache.tomcat.util.bcel.classfile.Constant.readConstant(Constant.java:129)
    at org.apache.tomcat.util.bcel.classfile.ConstantPool.<init>(ConstantPool.java:60)
    at org.apache.tomcat.util.bcel.classfile.ClassParser.readConstantPool(ClassParser.java:209)
    at org.apache.tomcat.util.bcel.classfile.ClassParser.parse(ClassParser.java:119)
    at org.apache.catalina.startup.ContextConfig.populateJavaClassCache(ContextConfig.java:2156)
    at org.apache.catalina.startup.ContextConfig.populateJavaClassCache(ContextConfig.java:2139)
    at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:2077)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:2034)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1923)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1891)
    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1877)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1270)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:855)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:345)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
    ... 8 more
16-apr-2012 16.25.11 org.apache.catalina.core.ContainerBase startInternal
GRAVE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
    at java.util.concurrent.FutureTask.get(FutureTask.java:83)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
16-apr-2012 16.25.11 org.apache.catalina.startup.Catalina start
GRAVE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more
16-apr-2012 16.25.11 org.apache.catalina.startup.Catalina start
INFO: Server startup in 13147 ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:29:37.557

noclassdeffound 是由于缺少 Scala 库，因此将其添加到 web-inf/lib 是正确的。但是，将库添加到类路径不会导致内存不足错误，因此它似乎与您的应用程序有关。

什么是执行引擎类？堆栈跟踪是什么（尽管不一定有帮助）。你确定你的 web 应用程序和你的 java 应用程序一样没有问题吗？你如何测试你的 web 应用程序？难道仅仅是因为许多并发线程（请求）导致OOME，但一个线程工作正常（就像普通的Java应用程序）？

# android - Phonegap Android应用程序重新启动而不是恢复，尽管它没有被操作系统杀死

> ID：10122449
> 
> 赞同：10
> 
> 时间：2012-04-12T11:15:46.103
> 
> 标签：android, cordova

我创建了一个 Phonegap 1.5/Android 应用程序。

我的客户报告说，当他使用主页按钮离开应用程序，然后使用应用程序图标重新启动它时，应用程序从头重新启动而不是恢复。但是，当他按住主页按钮时，应用程序会出现在最近的应用程序中，当他通过此菜单访问应用程序时，应用程序会以预期的方式恢复。

我认为这可能与由于内存不足而被操作系统自动关闭的应用程序相关联，但如果是这种情况，则在最近的应用程序中单击时应用程序不应恢复。

我无法在我的索尼爱立信 XPERIA 上使用 Android 2.3.4 重现该错误，客户端在摩托罗拉 Defy 和另一部手机上遇到了这种行为（我将在我添加另一部手机和操作系统版本的参考后立即抓住他们）。

应用程序的初始化过程是这样声明的：

```
window.addEventListener('load', function(){
      document.addEventListener('deviceready', _onDeviceReady, false);
}, false); 
```

可以通过将流程附加到其他事件来解决这个问题（尽管我对此表示怀疑，该应用程序似乎真的从一开始就重新启动了）？

Android Manifest 中是否有声明以防止这种行为？

这是我的 AndroidManifest.xml 中的活动签名

```
 <application android:debuggable="true" android:icon="@drawable/appicon"
    android:label="@string/app_name" >
    <activity android:configChanges="orientation|keyboardHidden" android:name=".MyAppActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
 <activity android:name="com.phonegap.DroidGap" android:label="@string/app_name" 
           android:configChanges="orientation|keyboardHidden">
     <intent-filter>
     </intent-filter>
    </activity>
</application> 
```

这是某些 Android 手机/版本中的已知错误吗？

**编辑**：按住主页按钮不会显示当前正在运行的应用程序，而是显示最近的应用程序。为什么该菜单中的行为与主图标不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-09T13:19:30.463

您希望将以下内容添加到 AndroidManifest.xml 中的活动标记中：

```
android:launchMode="singleTask" 
```

所以它应该是这样的：

```
<activity android:name="MyApp" android:label="@string/app_name"
    android:theme="@android:style/Theme.Black.NoTitleBar"
    android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale"
    android:launchMode="singleTask"> 
```

查看此页面以获取有关启动模式的更多信息：http: [//www.intridea.com/blog/2011/6/16/android-understanding-activity-launchmode](http://www.intridea.com/blog/2011/6/16/android-understanding-activity-launchmode)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T14:31:16.053

嘿，卢卡斯，你有：

```
android:configChanges="orientation|keyboardHidden" 
```

在您的 AndroidManifest.xml 中的活动标签中。

正如您所说，可能发生的另一件事是您客户的手机内存不足，操作系统正在杀死您的应用程序以释放内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T11:24:46.093

这实际上是 Android 设计的，操作系统控制应用程序的生命周期。您可以[在此处找到更多信息](http://www.androidjavadoc.com/1.0_r1_src/android/app/Activity.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-08T05:45:40.550

试试看...

在清单文件的活动标记中使用 android:launchMode="singleInstance"。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-06T20:57:24.023

我有一个三星 Galaxy Note II，我遇到了同样的问题。因此，我修改了 AndroidManifest.xml，现在它可以在三星和 HTC Thunderbolt 上运行。

以下是修改：

```
<uses-feature android:name="android.hardware.camera" android:required="false"/>

<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="10"/>

<activity  android:configChanges="orientation|keyboardHidden" /> 
```

# javascript - 如何使图像地图在移动 safari 上可点击？

> ID：10122451
> 
> 赞同：1
> 
> 时间：2012-04-12T11:15:49.657
> 
> 标签：javascript, jquery, mobile-safari, imagemap, qtip2

我正在使用[jQuery](http://jquery.com)和[qTip2](http://craigsworks.com/projects/qtip2)使图像地图上的地理信息可见。您可以[在 JSFiddle](http://jsfiddle.net/3L2aQ/) |上查看演示。[小提琴屏幕结果](http://jsfiddle.net/3L2aQ/embedded/result/)

在桌面浏览器上一切正常。**悬停**时您会看到**工具提示**，**单击**时您会转到标签定义的**URL 。****`href`**

但在移动 safari (ipad/iphone) 上，无法获取到 URL 的链接。每次单击地图时，就像您将鼠标悬停在电脑上一样，但绝不会单击。

该图像是使用标准 html 创建的：

```
<img src="http://i.stack.imgur.com/6z2Z9.png" usemap="mapname">​ 
```

该地图也是使用标准 html 创建的，但带有附加属性工具提示^((1))：

```
<map name="mapname">
<area shape="poly"  href="?content=meteo&abm=ALL" tooltip="ABM Alland"   coords="664,243, 662,240, 664,237, 667,235, 669,232, 671,229, 671,225, 669,222, 669,214, 672,213, 673,227, 676,228, 679,231, 685,231, 692,232, 695,231, 697,228, 700,227, 703,228, 704,234, 705,241, 703,244, 700,246, 697,247, 694,249, 691,251, 688,253, 683,254, 680,253, 677,252, 672,249, 669,247, 664,243"></map> 
```

^(带有(2))的 jQuery 非常小：

```
$(document).ready(function() {
    $('area').each(function() {
        $(this).qtip({
            content: { text: $(this).attr('tooltip') },
            position: {
                my: 'bottom left',
                target: 'mouse',
                viewport: $(window)
            },
            hide: { fixed: true },
            style: { classes: 'ui-tooltip-tipsy ui-tooltip-shadow'}
        });
    });
});​ 
```

**那么我该如何解决这个问题呢？**

* * *

*^((1))我知道这个属性应该是 data-tooltip。这将很快改变。*

*^((2))基于[imagemap demo](http://craigsworks.com/projects/qtip2/demos/#imagemap)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:55:24.963

这是合乎逻辑的。曾经尝试过悬停在触摸屏上吗？:-D

由于移动设备缺乏悬停功能，因此您需要调整呈现数据的方式，以完全支持它们。

1.  对于移动设备用户，您需要绝对清楚`:hover`桌面浏览器上的操作将在何处发生。让这些地方“从地图中弹出”，这样他们就不用悬停就知道在哪里检索信息。
2.  您需要`:hover`用适当的触摸屏操作替换每个操作。例如，在点击时提供工具提示并将链接放在工具提示内以补偿缺少的悬停动作。
3.  作为回报，您可以使用“仅触摸屏”交互来补偿。

可以[在 Apples Developer Library](https://developer.apple.com/library/safari/#technotes/tn2010/tn2262/_index.html)中找到有关如何为移动设备调整 Web 内容的起点。（特别是本文的第 5 节）。

# symfony - 修改父实体时删除子实体

> ID：10122459
> 
> 赞同：0
> 
> 时间：2012-04-12T11:16:20.477
> 
> 标签：symfony, doctrine-orm

我正在我的控制器中修改文件操作。子实体（StrOrigin）与文件实体有以下关系：

```
/**
* @ORM\ManyToOne(targetEntity="File" )
* @ORM\JoinColumn(name="STOR_FILE", referencedColumnName="id", onDelete="CASCADE")
*/ 
```

现在在控制器中的修改操作中，我获取要修改的文件，设置表单并进行一些测试，然后上传文件，保存文件实体并用新修改的文​​件覆盖 StrOrigin（这是文件中的许多字符串）。我被困在如何覆盖 StrOrigin。在提交和保存新文件时，我尝试删除旧文件：

```
 $this_file_STROR=$em->getRepository('File')->find(array('id'=>$idfile));
                    $em->remove($this_file_STROR);
                    $em->flush(); 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:26:51.087

我找到了另一个可能更快的解决方案：

[此处](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/working-with-associations.html#orphan-removal)对其进行了描述，称为孤儿删除。这个想法是简单地删除关联并告诉学说不再引用的相关实体将被删除。在您的情况下，您将执行以下操作：

```
/** 
* @ORM\ManyToOne(targetEntity="File" ) 
* @ORM\JoinColumn(name="STOR_FILE", referencedColumnName="id", orphanRemoval=true) 
*/

public function deleteStrOrigins(){
        $this->strOrigins = new ArrayCollection(); // you can also try to use = null. I'm using ArrayCollections, so this is my way and I never tried the null approach.
} 
```

现在调用您的代码

```
$this_file_STROR=$em->getRepository('File')->find($idfile);
$this_file_STROR->deleteStrOrigins();
$em->flush(); 
```

应该删除所有相关的 StrOrigins，只要它们在其他任何地方都不相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:08:07.180

跟进评论：

您不想删除您的实际文件。你误解了`onDelete="CASCADE"`！这意味着当您删除文件时，所有 StrOrigin 也将被删除。它与您想要实现的目标无关。

你想要的是以下内容：

```
$this_file_STROR=$em->getRepository('File')->find($idfile);
foreach($this_file_STROR->getStrOrigins() AS $strOrigin){
  $em->remove($strOrigin);
}
// now $this_file_STROR as no StrOrigins anymore
$em->flush(); 
```

另请注意，此时您不需要冲洗。刷新只是将您当前的对象持久化到数据库中。只要您使用对象，就无需刷新。通常你可以在你的脚本结束之前刷新，例如在你调用你的控制器中的渲染之前。如果您多次刷新，您的应用程序可能会由于与数据库的交互而变慢。

# java - 如何在 Struts 迭代器中访问 ValueStack 对象？

> ID：10122460
> 
> 赞同：7
> 
> 时间：2012-04-12T11:16:21.140
> 
> 标签：java, struts2, ognl, valuestack

我有以下代码：

```
<s:iterator value="reviews">

    <img src="<s:property value="#request.restaurant.portalImage.url"  />" />

    <s:property value="user.firstName" />
    <s:property value="user.lastName" />
    <s:property value="rating" />
    <s:property value="review" />

</s:iterator> 
```

评论是评论对象的列表，其中包含评论的详细信息，例如评分和用户名。

我的问题是我无法访问循环内 ValueStack 上存在的任何对象。

循环外`<s:property value="#request.restaurant.portalImage.url" />`正常工作。但在循环内它打印空。

AFAIK 迭代器将其集合推送到 ValueStack 上，以便所有 OGNL 表达式都针对它进行解析。但是我使用了 # 这意味着我明确指定了要解析的根对象。

为什么它仍然不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T22:27:20.803

我整个下午都在与一个类似的问题作斗争。在我的情况下，问题是我的迭代器变量（在你的情况下`reviews`）有一个与外部变量同名的字段。

无论我多么努力地尝试突破迭代器的本地堆栈，它都不会访问外部变量。

如果您的**评论**迭代器有一个名为*restaurant*的字段，无论您多么努力，它都会覆盖外部**餐厅变量：(**

我找到的解决方案是简单地重命名外部变量。（例如：**餐厅**）

一旦我重命名它，它就不再与内部变量发生冲突，并且我能够从迭代器中访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:24:48.700

你应该像下面这样改变它：

```
 <s:iterator value="reviews" var="varrequest">

   <img src="<s:property value="#varrequest.restaurant.portalImage.url"  />" />

   <s:property value="#varrequest.user.firstName" />
   <s:property value="#varrequest.user.lastName" />
   <s:property value="#varrequest.rating" />
   <s:property value="#varrequest.review" />

 </s:iterator> 
```

使用迭代器引用变量来获取唯一索引对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T11:35:49.120

我不确定您在迭代器中使用的集合中包含什么对象。根据迭代器，当您使用 S2 迭代器标记迭代集合时，它会将对象推送到值堆栈的顶部，这意味着，假设您有您正在迭代的用户对象的集合

```
<s:iterator value="userCollection">

</s:iterator> 
```

所以当 this 进行迭代时，S2 迭代器会将`user`对象推入值堆栈顶部，如果我们想引用对象的`name`属性`user`，我们只需要引用 name 属性

```
<s:property name="userName"/> 
```

因为 OGNL 将尝试`userName`在值堆栈中解析，并且我们已经将用户对象作为值堆栈中的顶级对象。我建议阅读 Iterator 标签文档以及它如何推送值

*   [S2 迭代器标签](http://struts.apache.org/2.3.1/docs/iterator.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T12:57:56.723

**我认为它可以解决您的问题**

```
s:iterator value="reviews" status="position">
   <img src="<s:property value="#request.restaurant.portalImage.url"/>"/>
   <s:property value="#position.user.firstName"/>
   <s:property value="#position.user.lastName"/>
   <s:property value="#position.rating"/>
   <s:property value="#position.review"/>
 </s:iterator> 
```

**你的要求有点混乱**

# c# - 从 DbContext 获取所有跟踪的实体？

> ID：10122461
> 
> 赞同：19
> 
> 时间：2012-04-12T11:16:22.853
> 
> 标签：c#, entity-framework

我数据库中的许多表都需要有一个“DateCreated”和“DateModified”列。我想在`SaveChanges()`调用时更新这些列。

我所有的模型对象都继承自一个类`AbstractModel`以允许这种行为。该类如下所示：

```
public abstract class AbstractModel {
    public virtual void UpdateDates() { }
} 
```

然后，我计划在具有他们需要维护的字段的`UpdateDates()`任何子类中进行覆盖。`DateCreated``DateModified`

要使用它，我需要能够获取`DbContext`正在跟踪的所有实体的列表，并`UpdateDates()`在对象被标记为 is`Added`或时调用它们`Modified`。

我似乎无法访问`DbContext`存储此信息的任何位置。我可以`dbContext.Entry(object).State`获取`EntityState`单个实体的，但我不知道如何获取所有跟踪实体的列表。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-12T11:28:08.780

我认为您可以为此使用[ChangeTracker](http://msdn.microsoft.com/en-us/library/system.data.entity.infrastructure.dbchangetracker%28v=vs.103%29.aspx)：

```
public class MyContext : DbContext
{
    //...

    public override int SaveChanges()
    {
        foreach (var dbEntityEntry in ChangeTracker.Entries<AbstractModel>())
        {
            dbEntityEntry.Entity.UpdateDates();
        }
        return base.SaveChanges();

    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-05-30T09:46:55.820

[这里](https://stackoverflow.com/questions/17904631/how-can-i-log-all-entities-change-during-savechanges-using-ef-code-first)接受的解决方案对于上述 EF4 比 ObjectContext 建议更好 - 我们遇到了问题，例如我们在测试上下文中使用的内存数据库不能很好地与上述解决方案配合使用（在继承场景中为一些修改的条目获取分离状态） . 此解决方案使用 DbContext 本机方式来检索跟踪的实体：

```
context.ChangeTracker.Entries()
        .Where (t => t.State == EntityState.Modified) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T20:54:34.400

这在我们的项目中运行良好，因此我们不必记住每次添加具有标准 LastUpdatedDateTime 属性的新实体时都覆盖某些内容。使用 EF4；对于 EF5 DbContext，我认为 ((IObjectContextAdapter)_dbContext).ObjectContext.ObjectStateManager 将为您提供对象状态管理器：

```
// In our SaveChanges wrapper:
        var entries = context.ObjectStateManager.GetObjectStateEntries(EntityState.Added | EntityState.Modified | EntityState.Deleted);

        private static void PopulateDate(IEnumerable<ObjectStateEntry> entries)
                {
                    foreach (var entry in entries)
                    {
                        if (entry.State != EntityState.Deleted)
                        {
                            if ((entry.Entity != null) && (entry.Entity.GetType().GetProperty("LastUpdatedDateTime") != null))
                            {
                                ((dynamic)entry.Entity).LastUpdatedDateTime = DateTime.UtcNow;
                            }
                        }
                    }
                } 
```

反射调用不是问题：对于具有 25 个属性（很多）的对象，一百万个反射查询平均需要约 210 毫秒。

# android - OSX 分段错误 11 - Android

> ID：10122464
> 
> 赞同：10
> 
> 时间：2012-04-12T11:16:34.260
> 
> 标签：android, macos, segmentation-fault, unity3d

尝试在 OSX 中运行 Android SDK 管理器时，出现以下错误：

> 分段错误：11

这一直工作到今天。我可以加载 Android SDK 管理器的唯一方法是使用 sudo。我尝试更改文件夹的权限，但这没有帮助。

有人可以指出我正确的方向来解决这个问题吗？我还运行了 DiskUtility 并修复了 HDD 上的权限。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-14T10:06:18.957

如果您有外接显示器，请尝试断开连接。在断开外接显示器之前，我遇到了同样的问题。模拟器运行后，您可以重新连接它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:08:32.557

启动时的段错误可能是因为 SDK 管理器脚本找不到工作的 Java 运行时。请注意，最近的 Mac OS X Java 更新可能已禁用您的 Java 运行时。打开 /Applications/Utilities/Java Preferences 并确保启用了运行时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-18T14:09:08.447

我也遇到了这个问题-懒惰的人的另一种选择是简单地编辑该`emulator-user.ini`avd 中存储的窗口位置并将其设置为正值，如下所示：

```
window.x = 1
window.y = 1
uuid = 1337313377559 
```

你可以在下面找到这个文件`~/.android/avd/your_avd_name/emulator-user.ini`

# linux - 在运行 Fedora 11 的嵌入式系统中存储序列号的位置

> ID：10122466
> 
> 赞同：0
> 
> 时间：2012-04-12T11:16:44.603
> 
> 标签：linux, embedded, embedded-linux

我的任务是接受 Json 格式的序列号并使用 C++ 对其进行验证并存储它，并且不允许用户更改它。只有生产团队需要改变它。现在我的问题是我将在哪里保存或存储序列号。该产品是嵌入式系统，通过紧凑型闪存卡运行。

该产品是在 Fedora 系统上运行的嵌入式系统，不是试用版。用户将购买整个产品，并且只允许生产团队为单个产品分配序列号。在软件崩溃或升级的情况下，我们不想丢失序列号。

谢谢和问候，山姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:36:50.900

我不知道您正在使用的系统架构；它的内存映射，您可用的任何受保护的闪存资源。

存储序列号类型信息时，我通常确保以下内容：

1.  要存储的项目保存在其自己的闪存扇区中。
2.  该扇区对任何正常的闪存擦除代码均不可见
3.  在写入值之前，序列号扇区必须为空白（之前没有分配给单元的序列号）。尝试重写数据被拒绝。
4.  将 CRC 添加到序列号数据以进行验证。

我使用的所有处理器都有少量配置或信息闪存，可用于校准值等。我使用其中的一些内存作为一次写入序列号存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:26:35.860

假设用户无法访问您的系统（或至少不能以 root 身份），/etc/ 中的一个简单文件可能会这样做。这也假设您在（如果？）升级软件时不会覆盖整个闪存。

# ios - iOS 4.2 - 调用 ViewDidLoad 的dismissModalViewControllerAnimated 方法

> ID：10122468
> 
> 赞同：1
> 
> 时间：2012-04-12T11:17:00.930
> 
> 标签：ios, modalviewcontroller, viewdidload

我在我的应用程序中使用相机。以下是我工作的步骤。

1) 在 MyViewController 中，我正在打开一个 ActionSheet。2）使用以下代码在该操作表打开相机中点击一个按钮

```
 UIImagePickerController * picker = [[UIImagePickerController alloc] init];
 picker.allowsEditing = YES;
 picker.delegate = self;
 picker.sourceType = UIImagePickerControllerSourceTypeCamera;
 [self presentModalViewController:picker animated:YES]; 
```

3) 拍照并点击 USE 后执行以下代码

```
 // I use the caputred photo
 [ self  dismissModalViewControllerAnimated:YES]; 
```

在此语句之后，它调用 MyViewController 的“ViewDidLoad”，这实际上是在刷新我的屏幕，我不想要这种行为。

仅在 iOS 4.2 上观察到此问题我正在使用 ARC

如果有人已经遇到过这个问题，请帮助我...

# android - 查找活动是否存在于android中的方法

> ID：10122470
> 
> 赞同：2
> 
> 时间：2012-04-12T11:17:06.030
> 
> 标签：android, android-activity

我想测试应用程序中是否存在名为“test”的活动。可能在调用 startActivity 之前或在其 catch 块中使用 Manifest 文件以执行以下操作：

[使用 Intent 和 SetClassName 启动 Activity](https://stackoverflow.com/questions/10120655/starting-an-activity-with-intent-and-setclassname)

所以说：

```
if(test.exists){  
    Activity is registered and start it    
}  
else{  
    create Activity and add it in manifset programmatically, as this would be a dynamic Activity    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:58:19.467

即使您从 JSON 响应中获取活动，我们也无法以编程方式在清单文件中添加活动。

如果您正在启动本机 Activity，我们通常根本不会将它们添加到清单文件中，但对于某些事情，我们需要添加在我们的应用程序中使用它们的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:15:50.347

改用 forName ..

像这样的东西..

```
 try {
        Class<?> act = Class.forName("TestActivity");
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
//      do what you wish if not exist
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T12:22:04.243

清单和apk中存在的其他xml不能被修改。所以你可能不得不重新使用你的组件，你可以为此使用片段（如果我正确理解你的要求）。或者只是重用一个活动，

检查 Activity 的存在可以很容易地完成。

# android - 以布局为背景的自定义操作栏

> ID：10122474
> 
> 赞同：0
> 
> 时间：2012-04-12T11:17:26.100
> 
> 标签：android

我有一个要求，我需要在栏的左侧显示带有主页按钮图标的操作栏，在栏的中间显示带有应用程序徽标的活动标题..

所以我设计了一个具有这些要求的布局......

我想将此布局设置为我的元素，以便可以将其设置为主题..

但我无法将我的布局添加到我的元素..

下面是代码..

```
 <style name="Theme.MySherlockCustom" parent="@style/Theme.Sherlock.Light">
    <item name="actionBarSize">100dp</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:textSize">11sp</item>

</style> 
```

请帮助实现我的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:12:10.040

```
Try this code...

  <style name="Theme.Main" parent="android:Theme.Holo">
    <item name="android:actionBarStyle">@style/Widget.ActionBar</item>

</style>

<style name="Widget.ActionBar" parent="android:Widget.Holo.Light.ActionBar">

    <item name="android:customNavigationLayout">@layout/YOUR LAYOUT</item>
</style> 
```

# keyboard-shortcuts - 通过快捷方式为所选单词添加引号

> ID：10122475
> 
> 赞同：3
> 
> 时间：2012-04-12T11:17:31.123
> 
> 标签：keyboard-shortcuts, kate

是否有任何方法（插件、脚本）通过 Kate 编辑器中的键盘快捷键在所选文本的开头和结尾添加引号（或方括号或括号）？

我想到了选择一个单词然后按 Ctrl-U （这会将所选单词大写）。引号有类似的东西吗？

“配置快捷方式”菜单不提供此选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:28:53.263

这应该可以通过使用 Kate 的 Javascript 插件系统来实现：http: [//docs.kde.org/stable/en/kde-baseapps/kate/advanced-editing-tools-scripting.html](http://docs.kde.org/stable/en/kde-baseapps/kate/advanced-editing-tools-scripting.html)。

通过在当前光标位置找到单词并在前后插入文本，您可以创建“带引号的包围”功能。

有关 Kate 脚本的示例，请参见此处： http: [//kucrut.org/move-cursor-to-next-prev-paragraph-in-kate/](http://kucrut.org/move-cursor-to-next-prev-paragraph-in-kate/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T20:04:11.903

一种解决方案如下：

*   去`Settings > Configure Kate > Editing`
*   激活`Auto brackets`选项

现在您可以用括号括住选定的文本。

虽然有一个缺点。自动括号选项是“始终打开”，这意味着一旦您键入“（”，相应的“）”也会出现。

# java - Java - 根据从串口接收到的数据动态更改 jLabel 文本

> ID：10122476
> 
> 赞同：1
> 
> 时间：2012-04-12T11:17:32.900
> 
> 标签：java, multithreading, swing, serial-port, event-dispatch-thread

我正在开发仓库管理软件（用于存放衣服）。仓库中的所有物品内部都有 rfid，唯一的 id 存储为字符串。
我正在尝试制作允许用户通过天线从项目中读取 rfid 并自动在其中一个 GUI 中显示接收到的 ID 的模块`jLabels`。天线通过 与 PC 连接`rs232`。
我设法让课程从天线读取数据，它工作正常。它打开通信端口，设置属性并在可用时读取数据（通过`SerialPortEvent.DATA_AVAILABLE event`）。
但是后来我遇到了问题：
我希望该类的实例在不同的线程中运行，因此天线将等待扫描，并且每次扫描后 jLabel 都会根据项目的 ID 进行更改（稍后我将对与我的数据库连接的这个 ID 进行更复杂的操作，但现在我只是希望它显示在某个地方）。
我正在开始我的 Java 冒险，但我不知道如何处理多线程。
在这种情况下，我想从我的 Netbeans GUI 开始扫描`jFrame`，当扫描正在进行时，应该根据最后扫描`jFrame`的项目动态刷新值。场景：用户按下按钮开始扫描，扫描一定数量的项目，每个扫描项目的 ID 转到`jLabel`

`jLabel (jReadLabel)`对于扫描之间的时间，以及扫描完成时用户按下按钮停止，因此应用程序知道何时停止线程。
我在我的 ReadCOM 类 ( `getChipID()`) 中创建了 getter 方法，但我不知道每次发生事件时如何将数据传递给 jFrame。这是我到目前为止所做的：

```
import java.io.*;
import java.util.*;
import javax.comm.*;

public class ReadCOM implements Runnable, SerialPortEventListener {

static CommPortIdentifier portId;
static CommPortIdentifier saveportId;
static Enumeration portList;
InputStream inputStream;
SerialPort serialPort;
public static Thread readThread;
static OutputStream outputStream;
static boolean outputBufferEmptyFlag = false;
public String defaultPort;
boolean isRunning = true;
private String chip_id="";

public CzytajCOM(CommPortIdentifier portId, String defaultPort) {

    this.defaultPort = defaultPort;
    try {
        serialPort = (SerialPort) portId.open("Magazyn", 2000);
    } catch (PortInUseException e) {
        System.out.println("Connection Error. Port in use.");
    }

    try {
        inputStream = serialPort.getInputStream();
    } catch (IOException e) {
    }

    try {
        serialPort.addEventListener(this);
    } catch (TooManyListenersException e) {
    }
    serialPort.notifyOnDataAvailable(true);
    try {
        serialPort.setSerialPortParams(9600, SerialPort.DATABITS_8,
                SerialPort.STOPBITS_1,
                SerialPort.PARITY_NONE);
    } catch (UnsupportedCommOperationException e) {
    }
    readThread = new Thread(this);
    readThread.start();       
}

public void initwritetoport() {

    try {
        outputStream = serialPort.getOutputStream();
    } catch (IOException e) {
    }

    try {
        serialPort.notifyOnOutputEmpty(true);
    } catch (Exception e) {
        System.exit(-1);
    }

}

public void writetoport() {
}

public void run() {

    while (isRunning) {
        try {
            while (isRunning) {
                Thread.sleep(100);
            }
        } catch (Exception e) {
            isRunning = false;
        }
    }
}

public void serialEvent(SerialPortEvent event) {
    switch (event.getEventType()) {
        case SerialPortEvent.BI:
        case SerialPortEvent.OE:
        case SerialPortEvent.FE:
        case SerialPortEvent.CD:
        case SerialPortEvent.CTS:
        case SerialPortEvent.DSR:
        case SerialPortEvent.RI:
            break;

        case SerialPortEvent.OUTPUT_BUFFER_EMPTY:
            break;

        case SerialPortEvent.DATA_AVAILABLE:

            Object obj = event.getSource();
            if (obj instanceof javax.comm.SerialPort) {
                serialPort = (SerialPort) obj;
                try {
                    BufferedReader bufferedReader = new BufferedReader(
                    new InputStreamReader(serialPort.getInputStream()));
                    chip_id = bufferedReader.readLine();
                    //System.out.println("Data: "+chip_id);
                    bufferedReader.close();
                } catch (Exception ex) {
                    System.out.println("Reading from device failed!");
                }
            }
            break;
    }
}

public boolean isRunning() {
    return isRunning;
}

public String getChipId() {
    return chip_id;
}

public void setIsRunning(boolean isRunning) {
    this.isRunning = isRunning;
} 
```

在我的 jFrame 文件中，这里是 ButtonActionPerformed 的代码（开始和停止读取的按钮，我丢失的部分......）：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
     if(isRead==false) {
          jStatus.setText("Reading in progress...");
          jLabel1.setText("Press the button to stop reading.");
          isRead=true;
          try {
        portId1=CommPortIdentifier.getPortIdentifier("COM4");
        ReadCOM reader=new ReadCOM(portId1, portId1.getName());
        reader.setIsRunning(true); //
        jReadLabel.setText(reader.getChipId());
              }
    catch (Exception ex){
                    System.out.println("Error in button pressed method.");
                   }
     }
               else {

        jStatus.setText("Reading stopped.");
        jLabel1.setText("Press the button to start reading.");
        isRead=false;
    }
}//GEN-LAST:event_jButton1ActionPerformed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:22:04.337

从您的串行端口读取线程执行以下操作：

```
SwingUtilities.invokeLater(new Runnable() { public void run() {
  // code that updates the label's contents
}}); 
```

所以这是一种推送方法：您不拉 rfid，而是将其推送到 GUI 中，特别注意此类代码在事件调度线程 (EDT) 上执行。这`invokeLater`就是为了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:40:58.727

1) 方法`setText()`被声明为线程安全的，但在当前线程未被冻结之前一直有效`Thread.sleep(int)`，

2) 方法`setText()`工作包在`invokeLater()`from `Runnable#run()`or`util.Timer#run()`中，但您`Thread.sleep(int)`在这些 API 之外，然后可能会将事件锁定到`EventDispatchThread`

3）您`CommPort`从 开始`ActionListener`，然后 Swing GUI 被冻结或不负责任，直到所有事件`ActionListener`结束，什么都不能显示`JLabel`

4）您必须移动（从 CommPort 读取值）到后台任务

*   `CommPort`从`Runnable.Thread`或从调用`util.Timer`（然后不需要通过 using 暂停循环`Thread.sleep()`）

但最好的，我建议使用

*   调用 from `SwingWorker`，然后您可以在方法内部使用`Thread.sleep()`or并从方法输出，或者可以在上调用事件`util.Timer``doInBackground()``publish()``process()``EDT`

# c# - C# 对象和字符串转换

> ID：10122480
> 
> 赞同：0
> 
> 时间：2012-04-12T11:17:55.853
> 
> 标签：c#

我的程序中有以下代码部分：

```
 object val;
 val = arr[1].Trim(); // in my case i am getting value here is 1.00 
```

现在，当我为数据行赋值时，出现错误

> 预期的 int64 值。

```
datarow[Convert.ToString(drow["col"]).Trim().ToUpper()] = val; 
```

在获得 1.00 以外的价值时，我没有遇到任何问题。

确切的问题可能是什么？我该如何解决？

欢迎提出建议和解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:20:58.953

如果您的数据表中的该列`Int64`需要您将`val`（这是一个字符串）转换为 Int64：

```
var val = arr[1].Trim(); // String at this point
long longVal = 0;
if(!long.TryParse(val,out longVal){
    throw new InvalidOperationException("value wasnt an Int64!");
}
datarow[Convert.ToString(drow["col"]).Trim().ToUpper()] = longVal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:28:32.363

arr[1] 似乎是字符串，应用 .Trim() 将其保留为字符串，即使它是“1.00”。如果你需要一个整数，你需要解析它。但是，它不能解析为整数，因为它实际上是双精度数。

作为我是否正确的证明，您可以尝试 (Int64)double.Parse(val) 并且应该可以。但是，由您决定这是否对您的程序来说不是问题。有两个可能的问题：

1.  val 可能无法解析加倍，在这种情况下你会得到一个异常
2.  val 可能是双精度，但不能表示为 int（太大，或失去精度，例如“1.8”将变为 1）

希望这可以帮助

# unit-testing - 测试不工作 CakePHP2.0

> ID：10122481
> 
> 赞同：0
> 
> 时间：2012-04-12T11:17:59.267
> 
> 标签：unit-testing, cakephp, testing, phpunit, cakephp-2.0

`bake`我已经使用 Cake命令为控制器创建了一个测试。

现在，我想测试控制器的功能“索引”，为此我这样做：

```
public function testIndex() {

   echo "printed";

   $result = $this->testAction("/comments/1");

   echo "not printed";

} 
```

1 是参数，评论所在的帖子的 id。无论如何，控制器工作得很好，没有问题。

如您所见，调用 testAction 方法后测试崩溃。（它不打印第二个回声）

我已经看到，如果在控制器上调用的操作对其模型有任何调用，则 testAction 调用将不起作用。但是，如果要测试的操作没有调用任何模型，那么它可以完美运行。

这里发生了什么事？顺便说一句，default 和 test 两个数据库中都有数据，所以这也不是数据库的问题。

谢谢。

更新：这里有 Cake bake 命令生成的 testController 的其余部分：

```
<?php
/* Comments Test cases generated on: 2012-04-12 11:49:17 : 1334224157*/
App::uses('CommentsController', 'Controller');

/**
 * TestCommentsController *
 */
class TestCommentsController extends CommentsController {
/**
 * Auto render
 *
 * @var boolean
 */
    public $autoRender = false;

/**
 * Redirect action
 *
 * @param mixed $url
 * @param mixed $status
 * @param boolean $exit
 * @return void
 */
    public function redirect($url, $status = null, $exit = true) {
        $this->redirectUrl = $url;
    }
}

/**
 * CommentsController Test Case
 *
 */
class CommentsControllerTestCase extends CakeTestCase {
/**
 * Fixtures
 *
 * @var array
 */
    public $fixtures = array('app.comment');

/**
 * setUp method
 *
 * @return void
 */
    public function setUp() {
        parent::setUp();

        $this->Comments = new TestCommentsController();
        $this->Comments->constructClasses();

    }

/**
 * tearDown method
 *
 * @return void
 */
    public function tearDown() {
        unset($this->Comments);

        parent::tearDown();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:13:27.090

当您测试控制器时，请确保扩展测试用例类`ControllerTestCase`以利用该`testAction()`方法。

# eclipse - M2e 找不到丢失的存储库 - m2e eclipse 插件

> ID：10122483
> 
> 赞同：2
> 
> 时间：2012-04-12T11:18:00.513
> 
> 标签：eclipse, maven, m2e

当我将鼠标悬停在 Eclipse 中找不到的包上并单击“搜索存储库”时，找不到我正在搜索的依赖项。官方 maven 存储库中存在依赖项：[http ://search.maven.org/remotecontent?filepath=javax/portlet/portlet-api/2.0-r12/portlet-api-2.0-r12.pom](http://search.maven.org/remotecontent?filepath=javax/portlet/portlet-api/2.0-r12/portlet-api-2.0-r12.pom)

我需要配置 m2e 来搜索 maven 存储库吗？

![在此处输入图像描述](../Images/a895827b0eb2acc80869026f17b765cd.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T21:00:30.197

尝试在 Maven 存储库视图中更新您的存储库索引。

1.  打开视图：`Windows -> Show View -> Others -> Maven -> Maven Repositories View`
2.  启动`Rebuild Index`和/或`update Index`从中央存储库的上下文菜单

这个（长时间运行的）任务通常在启动时完成（Windows -> 首选项 -> Maven -> 启动时下载存储库索引更新），但可能会禁用它以获得更好的 eclipse 启动性能。

# android - 缩放和拖动imageview android的图像时的x和y坐标

> ID：10122484
> 
> 赞同：1
> 
> 时间：2012-04-12T11:18:06.273
> 
> 标签：android, coordinates, motion-detection, zooming

嗨，这是我用于缩放和拖动图像的代码。现在我想在触摸缩放图像时添加图像，但我***没有得到准确的 x 和 y 坐标***。

请帮助我的代码中缺少什么。

```
View.OnTouchListener mTouchListener = new OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {

    ImageView view = (ImageView) v;
    switch (event.getAction() & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:

            savedMatrix.set(matrix);
            start.set(event.getX(), event.getY());
            Log.d(TAG, "mode=DRAG");
            mode = DRAG;

            if (flag) {     
//When mark button click then flag is true means add another image to display image when touch

                mImageView.setImageBitmap(combineImages(mSave, mIcon, event.getX(),
                        event.getY()));
                mSave = combineImages(mSave, mIcon, event.getX(), event.getY());
            }
            break;
        case MotionEvent.ACTION_POINTER_DOWN:

            oldDist = spacing(event);
            if (oldDist > 10f) {
                savedMatrix.set(matrix);
                midPoint(mid, event);
                mode = ZOOM;
                Log.d(TAG, "mode=ZOOM");
            }
            break;
        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_POINTER_UP:
            mode = NONE;
            Log.d(TAG, "mode=NONE");
            break;
        case MotionEvent.ACTION_MOVE:
            if (mode == DRAG) {
                matrix.set(savedMatrix);
                matrix.postTranslate(event.getX() - start.x, event.getY()
                        - start.y);

            } else if (mode == ZOOM) {

                float newDist = spacing(event);
                if (newDist > 10f) {
                    matrix.set(savedMatrix);
                    scale = newDist / oldDist;
                    matrix.postScale(scale, scale, mid.x, mid.y);
                }
            }
            break;
        }
        view.setImageMatrix(matrix);
        return true;
    }
}; 
```

我也参考[了这个链接](https://stackoverflow.com/questions/6951887/how-to-get-x-and-y-coordinate-of-bitmap-image-in-image-control)，但不能理解更多..

请给我建议我做错了什么。

# ruby-on-rails - 通过 Ruby Gem 共享 CSS

> ID：10122485
> 
> 赞同：4
> 
> 时间：2012-04-12T11:18:09.540
> 
> 标签：ruby-on-rails

我们的组织中有大多数项目使用的通用 CSS 样式。这些资产（css、图像等）包含在每个项目的源代码中。

我想要一个可以托管这些资产的 gem，并且使用这个 gem 的项目可以直接使用它们。目前，我只能找到使用生成器并将资产“安装”到项目中的方法，而不是从 gem 本身使用它们。

主要要求是，如果对资产进行了错误修复/改进，只需更新 gem 就可以让我在所有使用升级后的 gem 的项目中获得最新信息。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:37:51.950

如果您将 gem 设置为 rails 引擎，则可以在 rails 3.1+ 中轻松完成此操作。除此之外，如果您将资产添加到引擎，那么您可以从应用程序的清单文件等中获取这些 CSS 文件。

[这里](http://prioritized.net/blog/gemify-assets-for-rails/)有一个关于如何做到这一点的演练，还有很多包装 js/CSS 包的 gem，其确切目的是能够升级使用的资产，而无需运行生成器或任何东西。例如 jquery-rails gem 为 jquery 做这个。一个更复杂的例子是 jquery-ui-rails，它捆绑了所有的 jquery ui js、CSS、图像等，让你只加载你实际需要的 jquery ui 组件。

# objective-c - NSFileManager：将文件移动到 NTFS 硬盘

> ID：10122487
> 
> 赞同：1
> 
> 时间：2012-04-12T11:18:10.680
> 
> 标签：objective-c, macos, osx-lion, ntfs, nsfilemanager

我正在尝试将一些文件从本地高清（当然是日志记录）复制到使用 NTFS 分区的 USB 硬盘上。

我只是在使用

```
[fileManager copyItemAtPath:src toPath:dest error:&err] 
```

效果很好。

但是，对于某些文件（我不了解这些文件之间的关系），当我尝试从 NTFS 驱动器中删除它们时，会出现 Finder 错误

> 操作无法完成。
> 发生意外错误（错误代码 -50）。

我试图在网上搜索，我读到它可能是名称中非法字符的问题`? / " | > *`，但这些字符都不是给我错误的文件的名称（我没有检查给我的*每个*文件那个错误，也是因为我有数百个文件，但每次都给出该错误的一个是`asdf.txt`，因此我认为它与文件名无关......）。

此外（我不知道它是否相关），当出现错误的弹出窗口时，如您所知，我有两个选择。即使我取消操作，文件也会被删除。

关于如何解决的任何建议？（当然，除了不使用 NTFS 驱动器）
我使用的是 MacOSX 10.7.2 和 Xcode 4.2.1。

# javascript - 使用 knockout.validation 向 observableArray 项添加验证

> ID：10122488
> 
> 赞同：3
> 
> 时间：2012-04-12T11:18:12.240
> 
> 标签：javascript, forms, validation, knockout.js

我正在尝试使用 knockout.validation 验证以下表单结构中的字段。

```
form body:
  static fields (observables) 
  field_container:(observableArray)
     n dynamic fields (observables) 
```

这是 jsfiddle 的一个简单实现。[http://jsfiddle.net/D6Ltg/4/](http://jsfiddle.net/D6Ltg/4/) 我可以在调用errors.showAllMessages 时验证静态字段，但不验证动态字段。如何验证 observableArray 中的 observables？

编辑：RTFM：[https](https://github.com/ericmbarnard/Knockout-Validation/wiki/Configuration) ://github.com/ericmbarnard/Knockout-Validation/wiki/Configuration 将分组：{deep: true} 添加到配置使所有嵌套结构也可验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T12:15:33.947

我找到的解决方案是遍历 observablearray 元素，手动验证每个元素。我已经相应地修改了 jsfiddle 代码。[http://jsfiddle.net/D6Ltg/7/](http://jsfiddle.net/D6Ltg/7/)

# .htaccess - 覆盖 $_GET 变量的 url 重写

> ID：10122494
> 
> 赞同：0
> 
> 时间：2012-04-12T11:18:30.170
> 
> 标签：.htaccess, mod-rewrite, get

我的管理系统中有一个页面，路径如下：

> [http://192.168.1.253/xxxxxx/admin/view/news-items/issue/3](http://192.168.1.253/xxxxxx/admin/view/news-items/issue/3)

我正在尝试重写它，以便它指向：

> [http://192.168.1.253/xxxxxx/admin/view/news-items.php?issue=3](http://192.168.1.253/xxxxxx/admin/view/news-items.php?issue=3)

但是我似乎无法让它工作，因为页面显示但 php 无法检测到 $_GET 变量。我有 2 个 .htaccess 文件，一个在 xxxxxx 目录中，一个在 admin 目录中。他们来了：

xxxxxx:

```
RewriteEngine On    # Turn on the rewriting engine

RewriteRule  ^([^/.]+)/delete/(1-9)/?$ $1.php?delete=$2 [L]
RewriteRule  ^([^/.]+)/?$ $1.php [L] # rewrite without query string parameters
RewriteRule  ^([^/.]+)/([^/.]+)/?$ $1.php\#$2 [L] # one name string parameter 
```

行政：

```
RewriteEngine On    # Turn on the rewriting engine

RewriteRule  ^([^/.]+)/?$ $1.php [L] # rewrite without query string parameters
RewriteRule  ^([^/.]+)/(\d+)/?$ $1.php?id=$2 [L] # one id parameter
RewriteRule  ^([^/.]+)/([^/.]+)/([^/.]+)/([^/.]+)/issue/(\d+)/?$ $1.php?issue=$2 [L] # one issue parameter
RewriteRule  ^([^/.]+)/(\d+)/(\d+)/?$ $1.php?id=$2&file_id=$3 [L] # two parameters 
```

**编辑**

这是新代码：

xxxxxx:

```
RewriteEngine On    # Turn on the rewriting engine

#RewriteRule  ^([^/.]+)/delete/(\d+)/?$ $1.php?delete=$2 [L,QSA]
RewriteRule  ^([^/.]+)/?$ $1.php [L,QSA] # rewrite without query string parameters
RewriteRule  ^([^/.]+)/([^/.]+)/?$ $1.php\#$2 [L,QSA] # one name string parameter 
```

行政：

```
RewriteEngine On    # Turn on the rewriting engine

#RewriteRule  ^([^/.]+)/?$ $1.php [L,QSA] # rewrite without query string parameters
#RewriteRule  ^([^/.]+)/(\d+)/?$ $1.php?id=$2 [L,QSA] # one id parameter
RewriteRule  ^([^/.]+)/([^/.]+)/([^/.]+)/([^/.]+)/issue/(\d+)/?$ $1.php?issue=$2 [L,QSA] # one issue parameter
RewriteRule  ^([^/.]+)/(\d+)/(\d+)/?$ $1.php?id=$2&file_id=$3 [L,QSA] # two parameters 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:20:08.753

您需要`[QSA]`在重写规则中包含该标志：

```
RewriteRule  ^([^/.]+)/delete/(1-9)/?$ $1.php?delete=$2 [L,QSA]
RewriteRule  ^([^/.]+)/?$ $1.php [L,QSA] # rewrite without query string parameters
# etc. 
```

从[文档](https://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)中：

> **修改查询字符串**
> 
> 默认情况下，查询字符串会原封不动地传递。但是，您可以在包含查询字符串部分的替换字符串中创建 URL。只需在替换字符串中使用问号来指示应将以下文本重新注入到查询字符串中。当您想删除现有的查询字符串时，只用问号结束替换字符串。要组合新旧查询字符串，请使用`[QSA]`标志。

# javascript - JavaScript 从内部函数返回值

> ID：10122496
> 
> 赞同：4
> 
> 时间：2012-04-12T11:18:43.790
> 
> 标签：javascript, web-sql

我正在尝试从内部函数中获取值。为什么域总是返回未定义？我认为这是因为 webSQL 是异步执行的。在我可以继续之前，我需要在程序中的这一点上获取 domain 的值。我认为这是一个关闭问题，但也许我的方法是错误的？

```
var domain = selectDomain();

function selectDomain()
{
    var sql,
        i;

    sql = "SELECT * FROM Domain";

    database.open();
    database.query(sql, [], function(tx, result) 
    {
        for (i = 0; i < result.rows.length; i++)
        {
            var domain = result.rows.item(i);   
            return domain.Domain;
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:33:02.647

你说得对，查询是异步执行的，这里的 return 语句不起作用。相反，在查询的回调函数中，调用另一个将结果作为参数传递的函数，然后从那里继续您的程序。

**编辑：**我刚刚注意到你循环遍历结果，这意味着`domain`将被每一行连续覆盖，并且总是以最后一项的值结束。

```
var domain;
selectDomain();

function selectDomain() {
  ...

  database.query(sql, [], function(tx, result) 
  {
    for (i = 0; i < result.rows.length; i++)
    {
      handleResult(result.rows.item(i));
    }
  });
}

function handleResult(result) {
    domain = result.Domain;
    // Continue
} 
```

# php - Yii 不是自动的，包括 jquery

> ID：10122502
> 
> 赞同：8
> 
> 时间：2012-04-12T11:19:24.207
> 
> 标签：php, jquery, yii

我对 Yii & Jquery 有一个奇怪的问题：

当我在 localhost Yii 上打开一个使用 ajax/jquery 的页面时，Yii 会自动将资产包含调用添加到页面：

```
<link rel="stylesheet" type="text/css" href="/PATH/assets/f72b359d/style.css" />
<script type="text/javascript" src="/PATH/assets/2e442e1a/jquery.js"></script>
<script type="text/javascript" src="/PATH/assets/2e442e1a/jquery.cookie.js"></script> 
```

但是，当我在服务器上运行相同的代码时，Yii 并没有这样做，因此没有可用的 Jquery。

如果有人可以指导解决它的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-12T15:29:56.537

看来您没有以正确的方式注册 jQuery。您必须在标签`/protected/views/layout/main.php`之前添加以下行：**`</head>`**

```
<?php Yii::app()->clientScript->registerCoreScript('jquery'); ?> 
```

它将自动加载 jQuery。请记住，如果**YII_DEBUG**标志打开，它将加载非缩小版本，当停用（在生产中）时，它将加载缩小版本。希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T15:35:49.630

如果一切都在您的本地计算机上运行，​​则可能是权限问题

您是否检查过 /assets 在您的服务器上是可写的？

Yii 在这个目录中发布它运行时需要的资产

# db2 - 使用列名从 db2 导出数据

> ID：10122505
> 
> 赞同：3
> 
> 时间：2012-04-12T11:19:29.187
> 
> 标签：db2, export-to-excel

我想将 db2 表中的数据导出为 csv 格式。我还需要第一行应该是所有列名。

我使用以下命令收效甚微

```
EXPORT TO "TEST.csv" 
OF DEL 
MODIFIED BY NOCHARDEL coldel: ,
SELECT col1,'COL1',x'0A',col2,'COL2',x'0A' 
FROM TEST_TABLE; 
```

但是有了这个我得到像

```
Row1 Value:COL1:
Row1 Value:COL2:
Row2 Value:COL1:
Row2 Value:COL2: 
```

等等

我还尝试了以下查询

```
EXPORT TO "TEST.csv" 
OF DEL 
MODIFIED BY NOCHARDEL 
SELECT 'COL1',col1,'COL2',col2 
FROM ADMIN_EXPORT; 
```

但这会在使用 excel 打开时列出每行数据的列名。

有没有办法我可以获取以下格式的数据

```
COL1   COL2
value  value
value  value 
```

在excel中打开时。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-24T19:45:21.993

经过几天的搜索，我以这种方式解决了这个问题：

```
 EXPORT TO ...
 SELECT 1 as id, 'COL1', 'COL2', 'COL3' FROM sysibm.sysdummy1
 UNION ALL
 (SELECT 2 as id, COL1, COL2, COL3 FROM myTable)
 ORDER BY id 
```

在 db2 中无法从无中选择常量字符串，因此必须从 sysibm.sysdummy1 中进行选择。要在第一行中手动添加列，您必须添加一个伪 ID 并按该 ID 对 UNION 结果进行排序。否则，标题可能位于结果文件的底部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-21T05:10:17.430

相当老的问题，但我最近遇到了一个类似的问题，意识到这可以在具有`EXTERNAL TABLE`功能的 11.5 版本中更容易实现，请在此处查看答案： [https ://stackoverflow.com/a/57584730/11946299](https://stackoverflow.com/a/57584730/11946299)

例子：

```
$ db2 "create external table '/home/db2v115/staff.csv' 
using (delimiter ',' includeheader on) as select * from staff"
DB20000I  The SQL command completed successfully.
$ head /home/db2v115/staff.csv | column -t -s ',' 
ID  NAME      DEPT  JOB    YEARS  SALARY    COMM
10  Sanders   20    Mgr    7      98357.50  
20  Pernal    20    Sales  8      78171.25  612.45
30  Marenghi  38    Mgr    5      77506.75  
40  O'Brien   38    Sales  6      78006.00  846.55
50  Hanes     15    Mgr    10     80659.80  
60  Quigley   38    Sales         66808.30  650.25
70  Rothman   15    Sales  7      76502.83  1152.00
80  James     20    Clerk         43504.60  128.20
90  Koonitz   42    Sales  6      38001.75  1386.70 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T21:17:22.430

将列名作为表中的第一行插入。

使用 order by 确保具有列名的行首先出现。

# python - 使用 try-except-finally 和上下文管理器增加覆盖率

> ID：10122506
> 
> 赞同：2
> 
> 时间：2012-04-12T11:19:29.187
> 
> 标签：python, unit-testing, code-coverage

这是我的程序中的流程

```
277: try:
278:    with open(r"c:\afile.txt", "w") as aFile:
...:        pass # write data, other exceptions/errors can occur here that have to be handled by the caller
329: except IOError as ex:
...:    print ex
332: finally:
333:    if os.path.exists(r"c:\afile.txt"):
334:        shutil.copy(r"c:\afile.txt", r"c:\dest.txt") 
```

除了从第 278 行到第 333 行之外，我已经覆盖了所有路径

*   我得到了正常的快乐流。
*   `__builtin__.open`当使用所述文件名调用 open 时，我存根引发 IOError

但是我如何从 278 到 333。这甚至可能吗？

* * *

附加信息：-使用[coverage.py 3.4](http://pypi.python.org/pypi/coverage)（我们不能升级到3.5）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:11:09.227

Daan，这可能代表了coverage.py中的一个错误。我从您的描述中假设您正在使用分支覆盖，并且coverage.py 声称缺少 278-333。如果您可以将其缩减为可重现的测试用例，我将为它创建一张票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:25:41.213

通常以以下方式处理流程

```
try:
    with open(r"C:\file.txt", "w") as aFile:
        a.File.write("!")
    if os.path.exists(r"C:\file.txt"):
        shutil.copy(r"C:\file.txt", r"C:\dest.txt")
except IOError as ex:
    print ex 
```

# iphone - Objective C 中的属性到底是什么？属性和实例变量有什么区别？

> ID：10122507
> 
> 赞同：3
> 
> 时间：2012-04-12T11:19:38.020
> 
> 标签：iphone, objective-c

我对实例变量和属性感到非常困惑。我已经阅读了许多关于此的帖子，但我仍然不清楚。我来自 JAVA 背景，我从客观 C 文档中推断出一个*属性*类似于 JAVA BEAN CLASS（具有实例变量的 getter 和 setter）。*属性*可以通过其 getter 和 setter 方法从其他类访问，而实例*变量*是私有的，不能从其他类访问。

我在这个方向上的想法是对的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T11:24:43.817

与Java的并行非常好。唯一的区别是，Objective C 提供了一种访问属性的方法，就像它是一个变量一样，而 Java 没有。另一个区别是，在 Objective C 中您可以*合成*属性，而在 Java 中您需要手动编写 getter 和 setter。

属性是 getter 方法或一对 getter 和 setter 方法的“语法糖”。属性通常（但不总是）*由*实例变量支持，但它们可以以任何可以实现无参数实例方法的方式实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T11:29:48.460

好的，实例变量和属性相距甚远。实例变量是对象的状态，属性是该状态（实例变量）的 assecor 方法（getter/setter）。

因此，每当您在头文件中创建属性时。编译器将这些属性转换为访问器方法。假设您声明了属性-`@property(nonatomic, assign, readwrite) NSString *name;` 因此编译器会将其转换为

```
-(NSString *)name;
-(void)setName:(NSString *)name; 
```

然后对于访问器方法的定义有两种方法。

1.  手动 - 在实现文件（.m）中使用动态，然后通过这样做给出访问器方法的定义，您不会收到任何警告。

2.  让编译器完成这项工作 - 这可以通过综合属性来完成，例如`synthesize name;`. 所以现在编译器将为您生成访问器方法的定义。

希望能帮助到你 ;）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T13:53:03.483

我知道这个主题在这里已经被打死了......但有些人似乎专注于技术细节，而我想提到一些大图的东西......

将属性视为一流的 ivars。属性和 ivars 都可以对对象的属性进行建模……但是如果您继续将其设置为属性，则 ivar 会受到特别关注。基本上，如果您觉得它需要 getter / setter 方法，则应该将属性作为属性（而不是 ivar）。点符号使代码非常易读。这可能有助于决定何时将变量声明为属性，而不是简单地使用常规 ivar。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T11:26:05.767

目标 c 中的属性实际上是 setter 和 getter 方法，它们可以从外部访问类中的属性。所以当你声明例如

```
@interface example:NSObject{
    NSString *variable;
}
@property(readwrite, assign) NSString *variable;
@end

@implementation
@synthesize variable;
@end 
```

您实际上是在声明方法

```
-(NSString *)getVariable;
-(void)setVariable(NSString *)value; 
```

然后您可以使用点符号和属性名称进行访问，例如

```
instance.variable = something;
something = instance.variable; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T11:33:00.820

**实例变量**和**属性**的主要区别在于，对于属性，编译器会自动生成一个 getter/setter 方法对。例如：

```
@property (nonatomic) int value; 
```

将产生：

```
-(void)setValue:(int)i
{
    value = i;
}
-(int)value
{
    return self->value;
} 
```

给定`@synthesize`d。

如果您阅读有关 Objective-C 1.0 的书，您会注意到该功能不可用。这是 2.0 中的一个新特性，也称为点语法。引入它主要是因为复杂的 getter/setter 语法。

此功能的好处是，即使您让编译器自动为您声明了这对，您仍然可以设法覆盖它。例如，您仍然可以将其`-(void)setValue:(int)i`声明为类的方法，并覆盖该行为。这在验证场景中很有用，例如您想限制`value`.

就 Java 而言，Objective-C 实际上确实有`@public`实例变量语法，但不使用它是一种习惯。这有点类似于 Java 通过 getter/setter 保护私有变量的概念。但它的主要目标-c 是覆盖 getter/setter 并最小化语法。

现在这只是一个预览，如果您想了解更多信息，请参阅[http://cocoacast.com/?q=node/103或一些 Objective-c 2.0 书籍。](http://cocoacast.com/?q=node/103)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-12T13:07:11.557

好吧，也许不清楚属性是否需要实例变量。您可以根据对实例变量或范围内任何其他变量的任何计算来定义只读属性。这里的问题是您必须手动编写 getter 代码。

```
@interface person:NSObject{
    NSDate *birthDate;
}
@property(readonly) int age;
@end

@implementation

-(int) age{
 // return calculated age based on birthDate and today;
}
@end 
```

属性的名称不需要与实例变量相同。

```
@synthesize myProperty = myVar; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-13T06:54:35.293

我发现了这个惊人的线程，它清楚地解释了关于属性的每一个细节。

[http://www.iphonedevsdk.com/forum/iphone-sdk-tutorials/7295-getters-setters-properties-newbie.html](http://www.iphonedevsdk.com/forum/iphone-sdk-tutorials/7295-getters-setters-properties-newbie.html)

谢谢大家的回复。

# jquery - JQuery Grid PostData 没有将值传递给控制器 操作方法 - MVC3

> ID：10122508
> 
> 赞同：0
> 
> 时间：2012-04-12T11:19:52.200
> 
> 标签：jquery, asp.net-mvc-3

我正在使用 JQuery 网格在页面上显示一些数据。我有一个复选框列表，用于将过滤器应用于我需要传递给控制器​​操作方法的网格。我的问题是，即使在将帖子数据传递给它之前正确检索了所选复选框的值，它也没有显示在控制器中。有趣的是，如果我正在加载选中复选框的页面，在这种情况下，值就会被传递。我很困惑为什么会这样。我会非常感激任何帮助。请参阅下面我用于绑定网格的代码：

```
 function BindGrid() {

        var selectedPriority = [];
        $('#priority input:checked').each(function () {
            selectedPriority.push($(this).val());
        });
        var selectedState = [];
        $('#state input:checked').each(function () {
            selectedState.push($(this).val());
        });
        var selectedAckState = [];
        $('#ackState input:checked').each(function () {
            selectedAckState.push($(this).val());
        });

        var x = convertIntArrayToString(selectedPriority);
        var y = convertIntArrayToString(selectedState);
        var z = convertIntArrayToString(selectedAckState);

        jqDataUrl = "Alarm/LoadjqData";
        // Set up the jquery grid
        //$("#jqTable").jqGrid('clearGridData');
        $("#jqTable").jqGrid({
            url: jqDataUrl,
            datatype: "json",
            mtype: "POST",
            postData: {
                sp: x,
                ss: y,
                sak: z
            },
            cache: false,
            // Specify the column names
            colNames: ["Id", "PointRef", "Value", "AlarmStateName", "AckStateName", "Priority", "AlarmDate"],

            // Configure the columns
            colModel: [
                { name: "AlarmId", index: "AlarmId", width: 70, align: "left" },
                { name: "PointRef", index: "PointRef", width: 200, align: "left" },
                { name: "Value", index: "Value", width: 200, align: "left" },
                { name: "AlarmStateName", index: "AlarmStateName", width: 150, align: "left" },
                { name: "AcknowledgementStateName", index: "AcknowledgementStateName", width: 170, align: "left" },
                { name: "Priority", index: "Priority", width: 100, align: "left" },
                { name: "AlarmDate", index: "AlarmDate", width: 250, align: "left" }
                ],

            // Grid total width and height
            width: 700,
            height: 250,

            // Paging
            toppager: true,
            pager: $("#jqTablePager"),
            rowNum: 10,
            rowList: [5, 10, 20],
            viewrecords: true, // Specify if "total number of records" is displayed

            // Default sorting
            sortname: "AlarmId",
            sortorder: "desc",

            // Grid caption
            caption: "Telemetry Alarms"
        }).navGrid("#jqTablePager",
                { refresh: true, add: false, edit: false, del: false },
                    {}, // settings for edit
                    {}, // settings for add
                    {}, // settings for delete
                    {sopt: ["cn"]} // Search options. Some options can be set on column level
             )
        //.trigger('reloadGrid', [{ page: 1}]); 
             .trigger('reloadGrid');

    }

    function convertIntArrayToString(data) {
        var x='';
        //alert(data.length);
         for(var i=0;i<data.length;i++) {
          x = x + data[i] + ",";
      }
      if (x != '') {
          x = x.substr(0, x.length - 1);
          //alert(x);
      }
      return x.toString();
    }

//Controller action method

 [HttpPost]
        public ActionResult LoadjqData(string sidx, string sord, int page, int rows, bool _search, string searchField, string searchOper,
            string searchString, string sp, string ss, string sak)
        {

            //code ommited.
            return Json(jsonData);
        } 
```

sp、ss 和 sak 参数的值未出现在控制器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:58:30.203

这篇文章解决了我的问题：

[jqgrid在重新加载时不更新数据](https://stackoverflow.com/questions/2826478/jqgrid-not-updating-data-on-reload)

我不得不将用于读取复选框值的代码移动到一个单独的函数中，并在 PostData 中访问该函数，它就像一个魅力。没有这个，它每次都发送相同的数据。

更新的代码如下：

```
function BindGrid() {
    var jqDataUrl = null;
    jqDataUrl = "Alarm/LoadjqData" //+ x;
    $("#jqTable").jqGrid({
        url: jqDataUrl,
        cache: false,
        datatype: "json",
        mtype: "POST",
        postData: {
            sp: function () { return getPriority(); }
        },
        // Specify the column names
        colNames: ["Id", "PointRef", "Value", "AlarmStateName", "AckStateName", "Priority", "AlarmDate"],

        // Configure the columns
        colModel: [
            { name: "AlarmId", index: "AlarmId", width: 70, align: "left" },
            { name: "PointRef", index: "PointRef", width: 200, align: "left" },
            { name: "Value", index: "Value", width: 200, align: "left" },
            { name: "AlarmStateName", index: "AlarmStateName", width: 150, align: "left" },
            { name: "AcknowledgementStateName", index: "AcknowledgementStateName", width: 170, align: "left" },
            { name: "Priority", index: "Priority", width: 100, align: "left" },
            { name: "AlarmDate", index: "AlarmDate", width: 250, align: "left" }
            ],

        // Grid total width and height
        width: 700,
        height: 250,

        // Paging
        toppager: true,
        pager: $("#jqTablePager"),
        rowNum: 10,
        rowList: [5, 10, 20],
        viewrecords: true, // Specify if "total number of records" is displayed

        // Default sorting
        sortname: "AlarmId",
        sortorder: "desc",

        // Grid caption
        caption: "Telemetry Alarms"
    }).navGrid("#jqTablePager",
            { refresh: true, add: false, edit: false, del: false },
                {}, // settings for edit
                {}, // settings for add
                {}, // settings for delete
                {sopt: ["cn"]} // Search options. Some options can be set on column level
         )
         .trigger('reloadGrid');

}

function convertIntArrayToString(data) {
    var x = '';
    //alert(data.length);
    for (var i = 0; i < data.length; i++) {
        x = x + data[i] + ",";
    }
    if (x != '') {
        x = x.substr(0, x.length - 1);
        //alert(x);
    }
    return x.toString();
}

function getPriority()
{
 var selectedPriority = [];
    $('#priority input:checked').each(function () {
        selectedPriority.push($(this).val());
    });
    return convertIntArrayToString(selectedPriority);

} 
```

# refactoring - 分解包含按位运算符 AND 和 SHIFT 的逻辑表达式

> ID：10122510
> 
> 赞同：1
> 
> 时间：2012-04-12T11:19:58.313
> 
> 标签：refactoring, operators, logic, bitwise-operators

我有一个这样的逻辑表达式： (A << k) & (A << l) 其中 A 是一个变量，k, l 是整数。我想分解这个表达式，以便一个部分只包含 A，而另一部分是没有 A 的任何东西。换句话说：

(A << k) & (A << l) = A op1（任何不包含 A 的东西）

谁能告诉什么是运算符 op1 和“（任何不包含 A）”？或者这是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:44:17.477

我认为这是不可能的，我能做的最好的就是移动其中一个班次

```
assuming k > l (otherwise switch them)

A & ( A << (k-l) ) << l 
```

但这显然不是你想要的

# c# - 在 IE 中打开 HTA 文件，而在 C# 中没有保存/打开/取消提示

> ID：10122515
> 
> 赞同：0
> 
> 时间：2012-04-12T11:20:44.363
> 
> 标签：c#, .net, winforms, hta

有没有办法我可以在 IE 中打开 HTA 文件而不会提示使用 C# 和 WindowsForms 保存/打开/取消？我是这样做的，提示出现：

```
Process.Start("iexplore", Path.Combine(Application.StartupPath, "file.hta")); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:40:03.760

HTA 由 explorer.exe 运行，而不是由浏览器 (iexplore.exe) 运行，因此您可以尝试以下操作：

```
Process.Start("explorer.exe", Path.Combine(Application.StartupPath, "file.hta")); 
```

或者：

```
Process.Start("mshta.exe", Path.Combine(Application.StartupPath, "file.hta")); 
```

# c# - 如何从 IIS 内部使用 NServiceBus 性能计数器？

> ID：10122519
> 
> 赞同：1
> 
> 时间：2012-04-12T11:21:03.457
> 
> 标签：c#, iis, nservicebus

有没有办法从 IIS 托管的进程写入 NServiceBus 性能计数器，**而不是**NServiceBus 通用主机？或者，一般来说，除了运行指定配置文件的 GenericHost 之外，还有**其他方法可以使用 NServiceBus 性能计数器吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:08:49.503

您可以通过调用自托管时启用性能计数器

配置.With() ...

.EnablePerformanceCounters()

[https://github.com/NServiceBus/NServiceBus/blob/master/src/unicast/NServiceBus.Unicast.Monitoring/Config/MonitoringConfig.cs#L36](https://github.com/NServiceBus/NServiceBus/blob/master/src/unicast/NServiceBus.Unicast.Monitoring/Config/MonitoringConfig.cs#L36)

这假设您使用的是 3.0 版本的 NServiceBus

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:01:05.730

您可以使用[`PerformanceCounter`](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.aspx)该类打开现有的性能计数器并更新计数器的值。如果计数器已实例化，您还可以创建新实例。您将不得不使用各种构造函数，具体取决于您打算如何使用性能计数器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:34:42.003

您可以自行接入传输层以插入一些计数器。查看自定义计数器上的[这篇文章](http://adamfyles.blogspot.com/2010/10/getting-started-with-nservicebus-part-7.html)。

# windows - 从操作系统/应用程序分析 CPU 缓存/内存？

> ID：10122520
> 
> 赞同：8
> 
> 时间：2012-04-12T11:21:10.047
> 
> 标签：windows, linux, caching, cpu

我希望编写可以从本质上分析 CPU 缓存（L2、L3，可能是 L1）和内存的软件，以分析性能。

我是否认为这是不可行的，因为软件无法访问缓存内容？

我问的另一种措辞：有什么方法可以从操作系统/应用程序级别知道哪些数据已加载到缓存/内存中？

编辑：操作系统 Windows 或 Linux 和 CPU Intel Desktop/Xeon

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T13:03:16.517

您可能想查看 Intel 的 PMU，即性能监控单元。一些处理器有一个。它是一堆特殊用途的寄存器（英特尔称它们为模型特定寄存器，或 MSR），您可以使用`RDMSR`和`WRMSR`指令对它们进行编程以计数事件，例如缓存未命中。

这是[关于 i7 和 Xeon 5500 的性能分析](http://software.intel.com/sites/products/collateral/hpc/vtune/performance_analysis_guide.pdf)的文档。

您可能想查看 Intel 的**[Performance Counter Monitor](http://software.intel.com/en-us/articles/intel-performance-counter-monitor/)**，它基本上是一些抽象 PMU 的例程，您可以在 C++ 应用程序中使用它来实时测量多个性能指标，包括缓存未命中。它还有一些用于独立使用的 GUI/命令行工具。

显然，[Linux 内核具有操纵 MSR 的工具](http://www.kernel.org/doc/man-pages/online/pages/man4/msr.4.html)。

还有其他实用程序/API 也使用 PMU：[perf](https://perf.wiki.kernel.org/)、[PAPI](http://icl.cs.utk.edu/papi/index.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T11:47:15.627

缓存性能通常以命中率和未命中率来衡量。

有很多工具可以为您做到这一点。检查[Valgrind 如何进行缓存分析](http://tldp.org/HOWTO/Valgrind-HOWTO/deeper.html)。

此外***，缓存性能通常以每个程序为基础进行测量***。写得好的程序将导致更少的缓存未命中和更好的缓存性能，反之亦然，写得不好的代码。

测量**实际缓存速度**是硬件制造商最头疼的问题，您可以参考他们的手册来了解这个值。

[Callgrind](http://valgrind.org/docs/manual/cl-manual.html) / [Cachegrind](http://wwwpub.zih.tu-dresden.de/~mlieber/practical_performance/04_callgrind.pdf)组合可以帮助您跟踪缓存命中/未命中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-20T09:58:06.883

[这](https://stackoverflow.com/questions/10082517/simplest-tool-to-measure-c-program-cache-hit-miss-and-cpu-time-in-linux)有一些例子。TAU，一个使用 PAPI 工作的开源分析器也可以使用。

但是，如果您想编写代码来测量缓存统计信息，您可以使用 PAPI 编写程序。PAPI 允许用户在无需了解系统架构的情况下访问硬件计数器。PMU 使用模型特定寄存器，因此您必须了解要使用的寄存器。

Perf 允许测量 L1 和 LLC（即 L2），Cachegrind 另一方面允许用户测量 L1 和 LLC（可以是 L2 或 L3，以最高级别的缓存为准）。仅当您不需要更快的结果时才使用 Cachegrind，因为 Cachegrind 运行程序的速度大约慢了 10 倍。

# svn - 如何将存储库更新到以前的版本？

> ID：10122521
> 
> 赞同：2
> 
> 时间：2012-04-12T11:21:10.480
> 
> 标签：svn, tortoisesvn

我可以通过以下方式将我的存储库更新为一个版本

```
svn update -r1234 
```

但是我怎样才能将我的本地副本恢复到以前的版本呢？例如修订号是这样的：

```
1234 - 12 april 2012 - Some update message
1158 - 8 april 2012 - Some more update message
1120 - 4 april 2012 - Old changes 
```

*   如何通过命令行签出到一个早期版本？
*   如何通过命令行签出 4 天前的修订版？

我们也可以使用“svn log”命令并​​用 Python 等编写解析器来获取修订号。但是我们想从 bat 文件中获取它们。有没有简单的方法可以找到修订号？（注：我们也使用乌龟svn）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:32:57.627

获取当前版本之前的版本（通常是 HEAD）可以通过使用： `svn up -r PREV`

在当前版本之前获得 2 次修订，只需调用 'svn up -r PREV' 两次。

可以使用以下方法提前 4 天获得修订： `svn up -r {2012-04-08}`

我不知道如何在 4 天前获得修订版。如果没有一些编程，我不确定这是可能的。

# c# - CLR 用户定义的聚合函数，用于获取序列的第一个元素

> ID：10122522
> 
> 赞同：3
> 
> 时间：2012-04-12T11:21:14.003
> 
> 标签：c#, sql-server, sql-server-2008-r2, aggregate-functions, sqlclr

我需要一个返回序列的第一个元素的 FIRST 聚合函数，我将把它与 HAVING 子句一起使用。

这是一个可以看作是我之前的问题的延续：[FIRST aggregate function which I can use with HAVING 子句](https://stackoverflow.com/questions/10120145/first-aggregate-function-which-i-can-use-with-having-clause)的问题。

事实证明，只有聚合函数才能解决我的问题，所以我尝试创建一个：

```
[Serializable]
[SqlUserDefinedAggregate(
    Format.UserDefined, //use clr serialization to serialize the intermediate result
    IsInvariantToNulls = true, //optimizer property
    IsInvariantToDuplicates = false, //optimizer property
    IsInvariantToOrder = false, //optimizer property
    MaxByteSize = 8000) //maximum size in bytes of persisted value
]
public struct GetFirst : IBinarySerialize {

    private string allValues;

    public void Init() {
        allValues = string.Empty;
    }

    private void incrementAndAdd(SqlInt32 value) {

        allValues += (value.Value.ToString() + ",");
    }

    public void Accumulate(SqlInt32 Value) {

        incrementAndAdd(Value);
    }

    public void Merge(GetFirst Group) {

    }

    public SqlInt32 Terminate() {
        // Put your code here
        return new SqlInt32(int.Parse(allValues.Split(',')[0]));
    }

    // This is a place-holder member field
    private SqlInt32 var1;

    public void Read(System.IO.BinaryReader r) {

        allValues = r.ReadString();
    }

    public void Write(System.IO.BinaryWriter w) {

        w.Write(this.allValues);
    }
} 
```

这就是我使用它的方式：

```
DECLARE @fooTable AS TABLE(
    ID INT,
    CategoryName NVARCHAR(100),
    Name NVARCHAR(100),
    MinAllow INT,
    Price DECIMAL(18,2)
);

INSERT INTO @fooTable  VALUES(1, 'Cat1', 'Product1', 3, 112.2);
INSERT INTO @fooTable  VALUES(2, 'Cat2', 'Product2', 4, 12.34);
INSERT INTO @fooTable  VALUES(3, 'Cat1', 'Product3', 5, 233.32);
INSERT INTO @fooTable  VALUES(4, 'Cat3', 'Product4', 4, 12.43);
INSERT INTO @fooTable  VALUES(5, 'Cat3', 'Product5', 1, 13.00);
INSERT INTO @fooTable  VALUES(7, 'Cat4', 'Product7', 1, 15.00);
INSERT INTO @fooTable  VALUES(6, 'Cat4', 'Product6', 3, 13.00);

DECLARE @minAllowParam AS INT = 3;

SELECT ft.CategoryName, SUM(ft.Price), dbo.GetFirst(ft.MinAllow) FROM @fooTable ft
GROUP BY ft.CategoryName
HAVING dbo.GetFirst(ft.MinAllow) >= @minAllowParam; 
```

它有时会返回正确的结果，有时不会，我不确定我是否正确实施了它。考虑到我的要求，如果我做对了，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:44:31.157

我认为您的问题是[IsInvariantToOrder](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.server.sqluserdefinedaggregateattribute.isinvarianttoorder.aspx)尚未实现。

> 保留供将来使用。查询处理器当前未使用此属性：当前无法保证顺序。

所以不能保证你的函数会以正确的顺序被调用，甚至在运行之间也不能保证相同的顺序。

我不太了解 C#，但我认为你的函数可以有两个参数，第二个是你想要排序的字段。将这些对保存在列表中并在返回第一个值之前对第二个字段进行排序。

**更新：**

我不使用 C#，因此这里可能存在许多我看不到的错误错误做法。但看起来它在我所做的测试中工作得很好。

```
using System;
using System.Data;
using Microsoft.SqlServer.Server;
using System.Data.SqlTypes;
using System.IO;
using System.Text;

[Serializable]
[SqlUserDefinedAggregate(
    Format.UserDefined, //use clr serialization to serialize the intermediate result
    IsInvariantToNulls = true, //optimizer property
    IsInvariantToDuplicates = false, //optimizer property
    IsInvariantToOrder = false, //optimizer property
    MaxByteSize = 8000) //maximum size in bytes of persisted value
]

public class GetFirst : IBinarySerialize
{
    private int Value;
    private int OrderBy;

[SqlFunctionAttribute(IsDeterministic = true)]
    public void Init()
    {
      Value = 0;
      OrderBy = int.MaxValue;
    }

[SqlFunctionAttribute(IsDeterministic = true)]
    public void Accumulate(SqlInt32 SValue, SqlInt32 SOrderBy)
    {
        if (SValue.IsNull)
        {
            return;
        }

        if (SOrderBy.IsNull)
        {
            return;
        }

        if (SOrderBy.Value < OrderBy)
        {
            Value = SValue.Value;
            OrderBy = SOrderBy.Value;
        }
    }

[SqlFunctionAttribute(IsDeterministic = true)]
    public void Merge(GetFirst other)
    {
        if (other.OrderBy < OrderBy)
        {
            Value = other.Value;
            OrderBy = other.OrderBy;
        }
    }

[SqlFunctionAttribute(IsDeterministic = true)]
    public SqlInt32 Terminate()
    {
      return new SqlInt32(Value);
    }

[SqlFunctionAttribute(IsDeterministic = true)]
    public void Read(BinaryReader r)
    {
        Value = r.ReadInt32();
        OrderBy = r.ReadInt32();
    }

[SqlFunctionAttribute(IsDeterministic = true)]
    public void Write(BinaryWriter w)
    {
        w.Write(Value);
        w.Write(OrderBy);
    }
} 
```

安装：

```
CREATE ASSEMBLY GetFirstAsm FROM 'First.dll'
GO
CREATE AGGREGATE GetFirst (@Value int, @OrderBy int) RETURNS int
EXTERNAL NAME GetFirstAsm.GetFirst 
```

像这样使用：

```
declare @T table
(
  ID1 int,
  ID2 int,
  Val int,
  Grp int
)

insert into @T values
(1, 5, '1', 1),
(2, 4, '2', 1),
(3, 3, '3', 1),
(4, 2, '4', 2),
(5, 1, '5', 2)

select Grp, dbo.GetFirst(Val, ID1) as Val
from @T
group by Grp

select Grp, dbo.GetFirst(Val, ID2) as Val
from @T
group by Grp 
```

结果：

```
(5 row(s) affected)
Grp         Val
----------- -----------
1           1
2           4

(2 row(s) affected)

Grp         Val
----------- -----------
1           3
2           5

(2 row(s) affected) 
```

# excel - 如何使用 QlikView 脚本为 excel 中的列设置 if 条件

> ID：10122523
> 
> 赞同：0
> 
> 时间：2012-04-12T11:21:23.493
> 
> 标签：excel, qlikview

这是目标，我正在将 EXCEL 文件加载到 QlikView，但我不知道它们的特定结构，我只需要它们是否有名为“日期”的列。我怎样才能为此制定“如果条件”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:55:13.343

您可以使用 FieldNumber('field ' ,'TableName') ，请参阅[英文 QlikView Reference V11](http://community.qlikview.com/docs/DOC-1794)，p。337\. 唉，如果该字段不存在，引用并没有说明将给出哪个值 - 因此我尝试了它，它是 0。下一点是获取 TableName - 只需将您的 excel 命名为“TestTable”作为示例。

```
if FieldNumber('Date','TestTable') > 0 then
  let echo = 'Date present';
ELSE
  let echo = 'Date not present'; 
```

# php - Magento 产品视图文件

> ID：10122524
> 
> 赞同：0
> 
> 时间：2012-04-12T11:21:25.773
> 
> 标签：php, magento

在 magento 产品`template/catalog/product/view.phtml`中，我有

```
getchildhtml('container1','',true, true);
getchildhtml('container2','',true,true); 
```

通过这个我得到自定义选项下拉。

它们在哪里渲染`container1`以及`container2`从哪里渲染？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:38:19.613

该`getChildHTML()`函数包含在[http://svn.magentocommerce.com/source/branches/1.2/app/code/core/Mage/Core/Block/Abstract.php](http://svn.magentocommerce.com/source/branches/1.2/app/code/core/Mage/Core/Block/Abstract.php)

通过查看源代码，它正在寻找以前分配为“container1”或“container2”的东西。看起来这是使用`setChild()`同一文件中包含的函数设置的。

现在就动词“container1”和“container2”的来源而言，我认为它来自布局，如以下来源所示：[http ://svn.magentocommerce.com/source/branches/1.4/app /design/frontend/default/modern/layout/catalog.xml](http://svn.magentocommerce.com/source/branches/1.4/app/design/frontend/default/modern/layout/catalog.xml)

```
<block type="core/template_facade" name="product.info.container1" as="container1">
   <action method="setDataByKey"><key>alias_in_layout</key><value>container1</value></action>
   <action method="setDataByKeyFromRegistry"><key>options_container</key><key_in_registry>product</key_in_registry></action>
   <action method="append"><block>product.info.options.wrapper</block></action>
   <action method="append"><block>product.info.options.wrapper.bottom</block></action>
</block> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:39:29.980

查看design>frontend>base>default>layout>catalog.xml中的catalog.xml文件你会看到container1和container2的定义。

```
<block type="core/template_facade" name="product.info.container1" as="container1">
                    <action method="setDataByKey"><key>alias_in_layout</key><value>container1</value></action>
                    <action method="setDataByKeyFromRegistry"><key>options_container</key><key_in_registry>product</key_in_registry></action>
                    <action method="append"><block>product.info.options.wrapper</block></action>
                    <action method="append"><block>product.info.options.wrapper.bottom</block></action>
                </block>
                <block type="core/template_facade" name="product.info.container2" as="container2">
                    <action method="setDataByKey"><key>alias_in_layout</key><value>container2</value></action>
                    <action method="setDataByKeyFromRegistry"><key>options_container</key><key_in_registry>product</key_in_registry></action>
                    <action method="append"><block>product.info.options.wrapper</block></action>
                    <action method="append"><block>product.info.options.wrapper.bottom</block></action>
                </block> 
```

块类型“core/template_facade”是类 Mage_Core_Block_Template_Facade

您还可以在 Admin 中打开模板提示。请查看此信息以获取如何执行此操作的信息：[如何跟踪 Magento 从何处调用模板？](https://stackoverflow.com/questions/4177874/how-to-trace-where-magento-is-calling-templates-from)

# vbscript - 防止mshtml加载外部资源

> ID：10122527
> 
> 赞同：2
> 
> 时间：2012-04-12T11:21:40.087
> 
> 标签：vbscript, mshtml

当我将 html 文件加载到 mshtml 中时，它似乎加载了外部资源，例如 .js 和 .css。如何阻止 mshtml 加载外部资源？IE的注册表中有设置吗？

```
Dim mshtml: Set mshtml = CreateObject("htmlfile") 
mshtml.write "<html>...</html>" 
```

我想要一个 IE 6+ 的解决方案（尽管任何会有帮助！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T04:26:28.407

我自己正在浏览[Geoff Chappell](http://www.geoffchappell.com/studies/windows/ie/mshtml/index.htm?tx=36)的网站，试图找到这个问题的答案。如果您在我之前找到了一些东西，请在此处发布。

# java - 如何从 java.sql.Time 创建一个 joda 持续时间？

> ID：10122529
> 
> 赞同：1
> 
> 时间：2012-04-12T11:21:53.210
> 
> 标签：java, time, jodatime, sql-types

您好，我有这段代码摘录：

```
end = new DateTime(mergeToDateTime(this.endDate, this.empEndTime));

Duration extraTime = new Duration(this.preTime.getTime()); //add the first 30 mins
extraTime = extraTime.plus(new Duration(this.postTime.getTime())); //add the second 30 mins
end = end.plus(extraTime); // extraTime = -3600? 
```

当我查看调试器时，我的持续时间总是为负数。我不知道为什么会这样，即使根据[API](http://www.joda.org/joda-time/apidocs/index.html?org/joda/time/Duration.html)，可以从*long*类型创建持续时间，因此***getTime()***。（**preTime**和**postTime**是**java.sql.Time**类型）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:45:30.677

我猜您的实例的`java.sql.Time`创建方式是它们的毫秒值包括时区偏移量。

例如，不推荐使用`java.sql.Time(int hour, int minute, int second)`的构造函数会考虑当前时区的偏移量：

```
System.out.println(new Time(1, 0, 0).getTime()); // Prints -7200000 in UTC+3 timezone 
```

看起来时区偏移量是由 JDBC 驱动程序引入的，可以通过转换`java.sql.Time`为`LocalTime`（[反之亦然](https://stackoverflow.com/questions/9422753/converting-joda-localtime-to-sql-time)）轻松补偿：

```
LocalTime lt = new LocalTime(time); 
```

然后您可以转换`LocalTime`为持续时间：

```
Duration d = new Duration(lt.getMillisOfDay()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T11:27:50.167

当您使用瞬间作为持续时间时，您是否开始错了？您使用的构造函数签名是`Duration(long duration)`，而不是`Duration(long startInstant)`- 实际上没有这样的构造函数。

# .htaccess - 如何停止 htaccess 重写规则携带查询字符串

> ID：10122530
> 
> 赞同：1
> 
> 时间：2012-04-12T11:21:58.813
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite, http-status-code-301

我正在设置一些重定向。我想重定向以下网址：

```
/cms/index.php?cat_id=2 
```

到以下网址：

```
/flash-chromatography 
```

我目前的规则如下：

```
RewriteCond %{QUERY_STRING} ^cat_id=2$ [NC]
RewriteRule ^cms/index\.php$ /flash-chromatography [L,R=301] 
```

除了将 URL 重定向到以下内容之外，此规则几乎是完美的：

```
/flash-chromatography?cat_id=2 
```

所以你看到我的问题是它保留了`?cat_id=2`我不想要的部分。

我如何阻止它保持这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T11:25:00.623

只需`?`在重写 URL 的末尾添加：

```
RewriteCond %{QUERY_STRING} ^cat_id=2$ [NC]
RewriteRule ^cms/index\.php$ /flash-chromatography? [L,R=301] 
```

# iphone - JSONValue ARC 问题

> ID：10122534
> 
> 赞同：5
> 
> 时间：2012-04-12T11:22:05.477
> 
> 标签：iphone, objective-c, ios5

我尝试在 iOS5 中使用内置的 JSON 框架，但在尝试编译此代码时遇到 ARC 问题：

```
NSDictionary *results = [jsonString JSONValue]; 
```

在 iOS5 中是否有类似的方法可以做到这一点，不会引发 ARC 问题？

ARC 问题是：**“NSString”没有可见的@interface 声明选择器“JSONValue”**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T11:30:03.397

你得到的消息意味着'没有`JSONValue`在'中声明方法`NSString`（这是绝对正确的）。为了使用内置的 JSON 序列化器，试试这个：

```
NSError *error;
NSData *jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
NSDictionary *results = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:&error]; 
```

Ps 有关选项，请参阅[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)类的文档。另请注意，结果也可以是`NSArray`。

# sql-server - 使用 SSIS 包将多个 Excel 文件导入 SQL Server 2008 R2？

> ID：10122538
> 
> 赞同：5
> 
> 时间：2012-04-12T11:22:18.563
> 
> 标签：sql-server, excel, ssis, sql-server-2008-r2

我必须使用 SSIS 包将数据从两个不同的 Excel 表中插入到两个表中。

那么，请有人告诉我如何使用 SSIS 包将多个 Excel 文件导入 SQL Server 2008 R2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:03:14.380

使用 Foreach 循环容器 --> Foreach 文件枚举器。然后将您的数据流放入 Foreach 循环容器中。每个 Excel 文件中的表结构和工作表名称必须相同。

这是很好的教程： [http ://bi-polar23.blogspot.com/2007/08/loading-multiple-excel-files-with-ssis.html](http://bi-polar23.blogspot.com/2007/08/loading-multiple-excel-files-with-ssis.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:36:42.503

因为您只有 2 个 excel 文件和两个表，所以我不明白为什么要使用 foreach 循环。只需点击[此](http://www.techrepublic.com/blog/datacenter/how-to-import-an-excel-file-into-sql-server-2005-using-integration-services/205)链接并直接进行

如果您需要从两个 excel 文件插入两个数据库，您可以使用多播组件来创建数据集的副本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-07T06:15:44.003

您可以创建和使用变量来保存 Excel 文件路径，然后在 for-each-loop 容器中实现包，以循环遍历文件夹中的每个 excel 文件。确保文件具有相似的数据格式和相同的扩展名。在 Visual Studio 中创建集成服务项目并按照以下步骤操作：

1.  右键单击画布并添加变量说“FilePath”并将类型设置为字符串

2.  将 for-each 循环拖到画布上

[![在此处输入图像描述](../Images/5228998a37fd275476823f5e886c99d1.png)](https://i.stack.imgur.com/ON3JZ.png)

3.  右键单击 for-each-loop 并选择“编辑”并添加路径和文件扩展名，然后从“变量映射”选项卡中选择变量，如图所示：

[![在此处输入图像描述](../Images/c1451e2e5c233db7ed8ad653ef0744b6.png)](https://i.stack.imgur.com/1SUto.png)

[![在此处输入图像描述](../Images/40e05cb6edc3755ee870ed6e67b8d546.png)](https://i.stack.imgur.com/9jRnn.png)

4.  在循环中添加一个数据流任务并双击打开它。

[![在此处输入图像描述](../Images/6de9c9d53bbbb4470ddb534776c36c17.png)](https://i.stack.imgur.com/8UzcT.png)

5.  添加 Excel 源和 OLEDB 目标（如果目标是 SQL Server）。通过右键单击这些控件并选择“编辑”，您可以为 Excel 及其数据表选择适当的文件夹，并在目标中指定 SQL 服务器数据库凭据。使用蓝色箭头连接源和目标。如果需要，检查和修改列之间的映射。

[![在此处输入图像描述](../Images/8af029365d89425f384f96412976d3dc.png)](https://i.stack.imgur.com/uUN7g.png)

[![在此处输入图像描述](../Images/056e3cffe74394393b267ea82a196095.png)](https://i.stack.imgur.com/3VzO8.png)

[![在此处输入图像描述](../Images/90e25e363a450b764c5315d644b64131.png)](https://i.stack.imgur.com/sB4vO.png)

7.  创建一个表达式以将每个文件读取到变量中。这可以通过选择创建的“ExcelConnectionManager”并选择其“Expression”属性并展开以将变量设置为“ExcelFilePath”来完成

[![在此处输入图像描述](../Images/1156a605a3edd8033749ebc11fde847f.png)](https://i.stack.imgur.com/uI658.png)

[![在此处输入图像描述](../Images/56224a97baf24908daa6cb3130cbd884.png)](https://i.stack.imgur.com/woMxj.png)

8.  就是这样。您已准备好通过进入控制流选项卡并选择“开始”来执行包。 [![在此处输入图像描述](../Images/f07ffa20d39bf0a71a0825fae3459054.png)](https://i.stack.imgur.com/8Qpyt.png)

参考：[https ://www.encorebusiness.com/blog/import-data-from-multiple-excel-files-sql-ssis/](https://www.encorebusiness.com/blog/import-data-from-multiple-excel-files-sql-ssis/)

# jquery - 模态窗口打不开

> ID：10122539
> 
> 赞同：0
> 
> 时间：2012-04-12T11:22:25.833
> 
> 标签：jquery, html, jquery-templates

我正在尝试向我的网页添加模式窗口选项。这是一个搜索页面，当单击每个搜索结果时，链接将在模式窗口中打开。因此，我使用了页面[http://www.queness.com/post/77/simple-jquery-modal-window-tutorial](http://www.queness.com/post/77/simple-jquery-modal-window-tutorial)中的代码，除了 jquery 模板部分之外，模式窗口在页面中的任何地方都可以使用。我的模板编码是这样的

```
<script id="srch1" type="text/x-jquery-tmpl"> 
        <tr><td><div id="title"><a href="#dialog" name="modal" style="text-decoration:none; color:#333333;"><b>${_source.Title}</b></a></div></td></tr>
        <tr><td><div id="date">${_source.fetchTimeStamp}&nbsp;|&nbsp; ${_source.SourceName}</div></td></tr>
        <tr><td><div id="content">${_source.Content}</div></td></tr>
</script> 
```

因此，当我们单击标题链接时，页面不会在模式窗口中打开，而是返回到顶部，并且“#dialog”出现在 webapge 地址旁边。Hw cn 这被修复了吗？

Javascript/jQuery 编码是这样的

$(文档).ready(函数() {

```
//select all the a tag with name equal to modal
$('a[name=modal]').click(function(e) {
    //Cancel the link behavior
    e.preventDefault();

    //Get the A tag
    var id = $(this).attr('href');

    //Get the screen height and width
    var maskHeight = $(document).height();
    var maskWidth = $(window).width();

    //Set heigth and width to mask to fill up the whole screen
    $('#mask').css({'width':maskWidth,'height':maskHeight});

    //transition effect     
    $('#mask').fadeIn(1000);    
    $('#mask').fadeTo("slow",0.8);  

    //Get the window height and width
    var winH = $(window).height();
    var winW = $(window).width();

    //Set the popup window to center
    $(id).css('top',  winH/2-$(id).height()/2);
    $(id).css('left', winW/2-$(id).width()/2);

    //transition effect
    $(id).fadeIn(2000); 

});

//if close button is clicked
$('.window .close').click(function (e) {
    //Cancel the link behavior
    e.preventDefault();

    $('#mask').hide();
    $('.window').hide();
});     

//if mask is clicked
$('#mask').click(function () {
    $(this).hide();
    $('.window').hide();
});         

$(window).resize(function () {

    var box = $('#boxes .window');

    //Get the screen height and width
    var maskHeight = $(document).height();
    var maskWidth = $(window).width();

    //Set height and width to mask to fill up the whole screen
    $('#mask').css({'width':maskWidth,'height':maskHeight});

    //Get the window height and width
    var winH = $(window).height();
    var winW = $(window).width();

    //Set the popup window to center
    box.css('top',  winH/2 - box.height()/2);
    box.css('left', winW/2 - box.width()/2);

}); 
```

});

和纯 HTML 部分

```
<div id="boxes">
<div id="dialog" class="window">
Simple Modal Window | 
<a href="#" class="close"/>Close it</a>
</div>
 <div id="mask"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:54:30.560

你的代码看起来不错，我把它粘贴到 JsFiddle 中，它的行为应该是这样的：http: [//jsfiddle.net/3Dqen/](http://jsfiddle.net/3Dqen/)

你能试着看看你是否得到任何 JS 错误吗？

* * *

可能是在加载dom之后插入了链接，因此没有列出。尝试使用 LIVE 功能。

```
$('a[name=modal]').live("click", function(){
    //Cancel the link behavior
    e.preventDefault();

    //Get the A tag
    var id = $(this).attr('href');

    //Get the screen height and width
    var maskHeight = $(document).height();
    var maskWidth = $(window).width();

    //Set heigth and width to mask to fill up the whole screen
    $('#mask').css({'width':maskWidth,'height':maskHeight});

    //transition effect     
    $('#mask').fadeIn(1000);    
    $('#mask').fadeTo("slow",0.8);  

    //Get the window height and width
    var winH = $(window).height();
    var winW = $(window).width();

    //Set the popup window to center
    $(id).css('top',  winH/2-$(id).height()/2);
    $(id).css('left', winW/2-$(id).width()/2);

    //transition effect
    $(id).fadeIn(2000); 
}); 
```

# android - 如何在清单中不使用“com.google.android.maps”的情况下运行地图应用程序

> ID：10122541
> 
> 赞同：0
> 
> 时间：2012-04-12T11:22:31.663
> 
> 标签：android, google-maps, kindle-fire

我已经开发了地图应用程序。在清单中，`XML`我添加`<uses-library android:name="com.google.android.maps" />` 了它，它在移动设备和模拟器中运行良好。

但是在kindle fire设备中它不工作，当我`<uses-library android:name="com.google.android.maps" />`从清单中删除它在kindle fire中工作正常。

有没有办法通过`<uses-library android:name="com.google.android.maps" />`从清单文件中删除来使用谷歌地图。

如何使用此库参考而不用编写清单 XML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:39:30.693

`uses-library`有一个未充分使用的`required`属性。

[使用库文档](http://developer.android.com/guide/topics/manifest/uses-library-element.html)

因此：

```
 <uses-library
        android:name="com.google.android.maps"
        android:required="false" /> 
```

如果您将此设置为 false，您的应用程序将在 Kindle Fire 上正常安装，但地图 API 调用仍然会失败，因为实际上地图库并不存在。为了解决这个问题，您需要保护您的代码在 API 不存在时不调用它。我自己使用这样的代码：

```
 protected boolean mapsAvailable() {
            try {
                    Class.forName("com.google.android.maps.MapView");

                    return true;
            } catch (ClassNotFoundException exception) {
                    return false;
            }
    } 
```

如果 mapsAvailable 返回 false，请不要使用 MapView 进行任何活动，不要调用任何 Maps API 类等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:28:58.047

只需输入此代码

```
String geoAddress  = "geo:" + ll[0] + ","+ ll[1] + "?z=15";
                Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(geoAddress));
                context.startActivity(intent); 
```

并在清单中添加权限

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T11:29:08.367

要使用 Maps API，您必须提供对其库的引用，否则`NoClassDefFoundError`将引发异常。读[这个](https://stackoverflow.com/a/3666627/966550)。

# objective-c - 自动释放池说明

> ID：10122542
> 
> 赞同：1
> 
> 时间：2012-04-12T11:22:31.850
> 
> 标签：objective-c, xcode

在我的代码中，当我有一个每秒被调用多次的回调函数时，我正在使用音频缓冲区。此回调在处理音频的类中，而不是在 app 的主类中。

一开始，我收到了在回调期间多次记录的警告：

```
Object 0x93cd5e0 of class __NSCFNumber autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() 
```

然后我被告知将这一行放在回调函数中：

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init]; 
```

然后这个错误消失了。但我不明白我怎么可能在 1 秒内多次分配池 - 也许我有内存问题。我看到我必须把它放在最后：

```
[pool drain]; 
```

所以我有这个：

```
OSStatus status;
    status = AudioUnitRender(audioUnit, 
                             ioActionFlags, 
                             inTimeStamp, 
                             inBusNumber, 
                             inNumberFrames, 
                             &bufferList); 

    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];  // that line added

    //run on evert sample
    int16_t *q = (int16_t *)(&bufferList)->mBuffers[0].mData;
    for(int i=0; i < inNumberFrames; i++)
    {
    static int stateMachineSelector=1;
    static int sampelsCounter=0;

   // CODE TO HANDLE THE SAMPLES ...
    }
   [pool drain];  // issue here 
```

我到底在这里做了什么？这是为什么 ？从记忆方面来说可以吗？

多谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:33:56.913

当启动一个自动释放池时，`[[NSAutoreleasePool alloc] init]`所有其他对象都接收自动释放或使用便利分配器创建（例如`NSArray *ary = [NSArray array];`，或`UIView *view = [[[UIView alloc] init] autorelease];`在该池中。

所以：

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
NSArray *ary = [NSArray array];
[pool release]; // this will also release and dealoc the *ary from memory 
```

如果你有一个回调运行不是没有主线程，你**应该**做一个新的池。如果没有，你的对象可能会趋于涅槃。:)

如果您使用自动释放对象处理大量数据并且想要释放内存，则创建一个池，处理，释放该池。

# plone - 在不同的 Python 版本下构建和创建 virtualenv

> ID：10122546
> 
> 赞同：1
> 
> 时间：2012-04-12T11:22:39.650
> 
> 标签：plone, virtualenv, zope, buildout

我正在寻找将 Python 3 工具/脚本集成到 Plone 的 buildout.cfg（针对 Python 2.6）的选项。不同构建配方之间的鸡蛋如何共享？因为即为 Python 3 的鸡蛋运行 setup.py 会导致 Python 2 环境中的语法错误。

*   我可以为像 zc.recipe.egg 这样的构建配方指定 Python 3 解释器（以可移植方式）吗

*   构建的其余部分是否会使用特定的 Python 解释器愉快地吃掉这个配方下的鸡蛋，还是会与主机环境发生冲突

*   ...或者是否必须在 buildout 内部创建一个 virtualenv 才能安装 Python 3 的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:05:19.863

您可以指定许多配方要使用的可执行文件，包括`zc.recipe.egg`：

```
[python3.3]
executable = /usr/local/bin/python3.3

[py3script]
recipe = zc.recipe.egg:scripts
python = python3.3
eggs = py3script 
```

那应该`py3script`使用 python 3.3 安装脚本。这里的关键是`python`key，它指向一个应该有一个`executable`选项的部分，它是你要使用的python可执行文件的路径。

然后`easy_install`内部模块使用可执行密钥`zc.buildout`来运行`setup.py`脚本并安装egg。

# javascript - 是否可以使用 new option() 将 ondblclick 添加到选项字段？

> ID：10122548
> 
> 赞同：1
> 
> 时间：2012-04-12T11:22:53.253
> 
> 标签：javascript, select, option

我的代码

```
var row2 =<?php echo json_encode($_SESSION['row2']) ?>;
for (var i = 0; i < row2.length; i++) {
   if(row2[i][0] == x) {
      var select = document.getElementById("mTask");
      select.options[select.options.length] = new Option(row2[i][2], row2[i][1]);
   }
} 
```

它在 html 中生成它

```
<select id="mTask" size="12">
  <option value="0">Rätt eller fel!</option>
  <option value="1">A Valles Verktygsaffär</option>
  <option value="2">A Stina för dagbok</option>
  <option value="3">A Dagbok för cykelverkstad</option>
  <option value="4">A Dagbok för elfirma</option>
  <option value="5">A Dagbok för innebandyklubb</option>
</select> 
```

我想要这样的外观，可以吗？

```
<option ondblclick="mainLink(270)">Rätt eller fel!</option> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T11:37:29.633

我现在明白了。感谢您的澄清。您可以传入`this`将引用所选选项的函数。我只为第二个选择添加了它。

这是一个更好的解决方案。将单个函数绑定到选择列表，然后使用 data-attribute 存储 270 数字。

[http://jsfiddle.net/sUqVV/1/](http://jsfiddle.net/sUqVV/1/)

```
<select id="mTask" size="12" ondblclick="mainLink2(this);">
    <option data-id="270" value="0">Rätt eller fel!</option>
    <option data-id="271" value="1">A Valles Verktygsaffär</option>
    <option data-id="272" value="2">A Stina för dagbok</option>
    <option data-id="273" value="3">A Dagbok för cykelverkstad</option>
    <option data-id="274" value="4">A Dagbok för elfirma</option>
    <option data-id="275" value="5">A Dagbok för innebandyklubb</option>
</select>
<script>
    function mainLink2(select) {
        var selectedValue = select.options[select.selectedIndex].value;
        var dataAttrib = select.options[select.selectedIndex].getAttribute('data-id');
        alert( selectedValue + ':' + dataAttrib);
    }
</script>
​ 
```

旧 [http://jsfiddle.net/sUqVV/](http://jsfiddle.net/sUqVV/)

```
<select id="mTask" size="12" ondblclick="mainLink2(this);">
    <option value="0">Rätt eller fel!</option>
    <option ondblclick="mainLink(270, this);" value="1">A Valles Verktygsaffär</option>
    <option value="2">A Stina för dagbok</option>
    <option value="3">A Dagbok för cykelverkstad</option>
    <option value="4">A Dagbok för elfirma</option>
    <option value="5">A Dagbok för innebandyklubb</option>
</select>
<script>
    function mainLink(id, option) {
        alert(id + ':' + option.value);
    }
</script> 
```

​</p>

# algorithm - graph - 即使在最坏的情况下，如何在线性时间内构建三角形条带图？

> ID：10122552
> 
> 赞同：4
> 
> 时间：2012-04-12T11:23:15.080
> 
> 标签：algorithm, data-structures, graph, gl-triangle-strip

在 Graph 中，存在一个[三角带](http://en.wikipedia.org/wiki/Triangle_strip)问题。基本上，我们有一组相邻的三角形，我们希望将每个三角形视为一个新顶点，如果两个新顶点后面的两个三角形有一条共同的边，那么它们之间就会有一条边。

我的问题是关于读取每个三角形并为它们构建新的条形图。

例如，我们有这些三角形（A、B 和 C）：

A - 0, 1, 3

B - 1、2、3

C - 2、3、4

所以 A 和 B 有一个共同的边缘，B 和 C 也是如此。新的条带从 A 到 B，然后到 C。

好的。我认为这里的关键之一是，每次阅读一个新三角形时，我们都想知道哪些三角形与新三角形有共同边。

**一个愚蠢的方法**是我们只扫描所有旧三角形并将它们的三个顶点与新的顶点进行比较，如果两个顶点匹配，则存在邻接。

**一种更好的方法**（在 The [Algorithm Design Manual](http://www.algorist.com/)中描述）是每次我们为每个三角形顶点创建一个列表时。该列表包含通过顶点的所有三角形。比如上面的三角形，顶点0有{A}的列表，顶点1有{A,B}的列表等等。所以当一个新的三角形来的时候，我们只需要检查3个顶点并尝试找到哪些旧三角形与新三角形有两个共同顶点。

**这里有一些问题：**

1.  更好的方式是线性的吗？如何定义这种阅读和构建图的“线性”？例如，以更好的方式，一个新三角形需要遍历 3 个旧三角形列表。这足够线性吗？我认为它是线性的，因为它最多只能读取所有旧三角形。但是如果我的想法是真的，那么愚蠢的方式也是线性的，对吧？所以我想我可能错了，但很困惑。

2.  会有更好的方法吗？[算法设计手册](http://www.algorist.com/)要求这是一种消费税，即使在最坏的情况下，消费税也要求纯线性算法。

我对更好方法的解决方案是，我不是为每个顶点构建一个列表，而是为每个边构建一个列表。一个顶点可以有许多三角形通过，但是如果有一条边，则最多有两个三角形通过，假设所有三角形的边不相互交叉并且最多合并（共同）。

然后每条边都有一个最多包含两个项目的列表。而对于一个新出现的三角形，它最多需要检查 3 个边。我认为这比上面*更好的方法更好*。

**我对吗？还是我更好的方法是纯粹的最佳线性解决方案？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:51:44.597

> 更好的方式是线性的吗？

不它不是。正如您所说，是的，将有三个列表要检查，哪个比整个旧三角形的空间小得多，就像**Stupid Way**所做的那样，但是这些列表的长度正在增长，同样随着检查的三角形数量的增长呈线性增长。*在最坏的情况下，更好的方法与愚蠢的多项式*方法具有相同的复杂性（所有三角形共享一个顶点的情况）

A - 0, 1, 2

B - 0、2、3

C - 0、3、4

D - 0、4、5

...

关于您对这个问题的解决方案，您是对的，您的解决方案是线性的，假设从先前创建的边缘获取边缘是在恒定时间内完成的（需要类似哈希表的结构，而不是列表）。

此外，您可以改进您的方法，只记住一次添加到列表（哈希表？）的边，并删除两次遇到的边（因为假设一条边只能在两个三角形之间共享）

# javascript - 使用 HTML5 Canvas 为绘画应用创建逼真的铅笔工具

> ID：10122553
> 
> 赞同：5
> 
> 时间：2012-04-12T11:23:23.087
> 
> 标签：javascript, image-processing, canvas, html5-canvas

首先我想说我做了很多研究并尝试了自己，但没有任何成功。

我正在使用 Canvas 开发一个类似 MSPaint 的应用程序，**我想创建一个铅笔工具，它看起来像手工绘图一样逼真**……这是下面链接中使用默认工具的示例： [http://www.onemotion .com/flash/sketch-paint/](http://www.onemotion.com/flash/sketch-paint/)

我尝试使用 mousespeed 和 linewidth 属性，但效果不佳（当我移动鼠标时，整条线会放大和缩小）。我不知道对像素原始数据起作用的算法。

你知道现有的东西或适合应用的算法吗？非常感谢您的帮助

**编辑**

我决定添加我选择的解决方案，因为它似乎引起了很多人的兴趣。所以，到目前为止我发现的最好的事情是使用这里解释的技术在画布上绘制图像：http: [//css.dzone.com/articles/sketching-html5-canvas-and](http://css.dzone.com/articles/sketching-html5-canvas-and)。它就像一个魅力，结果非常令人信服，这很容易实现。在这里试试：http: [//tricedesigns.com/portfolio/sketch/brush.html#](http://tricedesigns.com/portfolio/sketch/brush.html#)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-12T19:49:56.700

您可以尝试以下演示

**[现场演示](http://jsfiddle.net/loktar/dQppK/23/)**

您最有可能使用`moveTo`和`lineTo`创建路径，如果您这样做，则属性将为路径共享，直到您关闭路径。因此，每次您更改厚度时，您都需要`closePath`再次调用`beginPath`。

在我的示例中，我使用[Bresenham 的线算法](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)来绘制点。基本上 onmousedown 它开始绘画。然后 onmousemove 它将当前坐标与最后一个坐标进行比较，并绘制它们之间的所有点。它也`fillRect`用于绘画。根据你移动的速度有多快，这条线会变粗或变细。

这是绘图功能的代码

```
var canvas = document.getElementById("canvas"),
    ctx = canvas.getContext("2d"),
    painting = false,
    lastX = 0,
    lastY = 0,
    lineThickness = 1;

canvas.width = canvas.height = 600;
ctx.fillRect(0, 0, 600, 600);

canvas.onmousedown = function(e) {
    painting = true;
    ctx.fillStyle = "#ffffff";
    lastX = e.pageX - this.offsetLeft;
    lastY = e.pageY - this.offsetTop;
};

canvas.onmouseup = function(e){
    painting = false;
}

canvas.onmousemove = function(e) {
    if (painting) {
        mouseX = e.pageX - this.offsetLeft;
        mouseY = e.pageY - this.offsetTop;

        // find all points between        
        var x1 = mouseX,
            x2 = lastX,
            y1 = mouseY,
            y2 = lastY;

        var steep = (Math.abs(y2 - y1) > Math.abs(x2 - x1));
        if (steep){
            var x = x1;
            x1 = y1;
            y1 = x;

            var y = y2;
            y2 = x2;
            x2 = y;
        }
        if (x1 > x2) {
            var x = x1;
            x1 = x2;
            x2 = x;

            var y = y1;
            y1 = y2;
            y2 = y;
        }

        var dx = x2 - x1,
            dy = Math.abs(y2 - y1),
            error = 0,
            de = dy / dx,
            yStep = -1,
            y = y1;

        if (y1 < y2) {
            yStep = 1;
        }

        lineThickness = 5 - Math.sqrt((x2 - x1) *(x2-x1) + (y2 - y1) * (y2-y1))/10;
        if(lineThickness < 1){
            lineThickness = 1;   
        }

        for (var x = x1; x < x2; x++) {
            if (steep) {
                ctx.fillRect(y, x, lineThickness , lineThickness );
            } else {
                ctx.fillRect(x, y, lineThickness , lineThickness );
            }

            error += de;
            if (error >= 0.5) {
                y += yStep;
                error -= 1.0;
            }
        }

        lastX = mouseX;
        lastY = mouseY;

    }
} 
```

​</p>

# javascript - 使用 2 个函数在 body onload 中加载 javascript

> ID：10122555
> 
> 赞同：14
> 
> 时间：2012-04-12T11:23:24.283
> 
> 标签：javascript, html, events, client-server

我正在尝试在正文 onload 中加载 2 个 javascript 事件/函数，如下所示：-

```
<body onLoad="getSubs(document.form1.HotelID.options[document.form1.HotelID.selectedIndex].value);getTags(document.form1.HotelID.options[document.form1.HotelID.selectedIndex].value);"> 
```

每当我使用 2 个函数加载时，第一个函数会中止 - 但如果我只加载一个它工作正常 - 我做错了什么，是否不可能将 2 个函数放入 onload 中？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-12T11:37:41.417

尝试这个：

```
<html>
<head>
<script language="javascript">
function func1(){
    //the code for your first onload here
    alert("func1");
}
function func2(){
    //the code for your second onload here
    alert("func2");
}
function func3(){
    //the code for your third onload here
    alert("func3");
}
function start(){
    func1();
    func2();
    func3();
}
</script>
</head>
<body onload="start()">
</body>
</html> 
```

[多重加载](http://www.physicsforums.com/showthread.php?t=116488)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-12T11:33:39.947

只需从 java 脚本中执行此操作，共享到评论中的链接之一很好地解释了为什么最好使用这种方法而不是内联属性。

```
<head>
<script>
document.body.onload = function() {
getSubs(...);
getTags(...);
};
</script>
</head>
<body>
...
</body> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-30T08:18:02.763

**我会不惜一切代价避免拥有`inline javascript`**，这就是您在问题代码中所做的：在 HTML 属性中添加 javascript。

* * *

最佳做法是将您的 javascript 添加到一个单独的文件中，请参阅有关此原则的相关问题[What is Unobtrusive Javascript in layman terms？](https://stackoverflow.com/questions/4478795/what-is-unobtrusive-javascript-in-layman-terms)

因此，您将有一个名为“myjsfile.js”的其他文件，然后您从 HTML 页面中引用它

```
<script src="./path/to/your/myjsfile.js"></script> 
```

以下是放置此参考的答案：[在 HTML 文件中放置 Javascript 的位置？](https://stackoverflow.com/questions/196702/where-to-place-javascript-in-a-html-file)

您的“myjsfile.js”文件将简单地具有：

```
window.onload =  function(){
    getSubs(...);
    getTags(...);
}; 
```

* * *

另一件要避免的事情：在同一个 HTML 文件中添加 javascript。原因也是基于同样的原理`unobstrusive javascript`。[外行术语中的 Unobtrusive Javascript 是什么？](https://stackoverflow.com/questions/4478795/what-is-unobtrusive-javascript-in-layman-terms)

但我想在某些极端情况下你可能想要这样做。

如果你真的需要，不要使用`window.onload`inline javascript `onload="..."`，看看为什么在这里[window.onload vs <body onload=""/>](https://stackoverflow.com/questions/191157/window-onload-vs-body-onload)

只需将以下内容添加到您的 HTML 文件中：

```
<script type="text/javascript">
    window.onload =  function(){
        getSubs(...);
        getTags(...);
    };
</script> 
```

以下是放置此代码的位置的答案：[在 HTML 文件中放置 Javascript 的位置？](https://stackoverflow.com/questions/196702/where-to-place-javascript-in-a-html-file)

注意：是的，与您将引用放置到外部 javascript 文件的位置相同

* * *

另一件事：我不知道你的`getSubs()`和`getTags()`功能是在哪里定义的。但是如果你想让你的代码工作，它需要在定义它们的文件（或javascript的一部分）被加载之后调用这些函数。

简而言之：确保包含 和 定义的 javascript 文件`getSubs()`在您的代码**之前**`getTags()`被引用。

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T11:33:10.990

您可以做的一件事是创建一个新的 JS 函数，该函数接受 document.form1.HotelID.options[document.form1.HotelID.selectedIndex].value 参数并在新创建的函数中调用这两个函数。

我尝试使用下面的代码调用两个函数，它对我来说效果很好。

```
<html>
    <body onload="callStart();callAgain();">
        <script type="text/javascript">
            function callStart() {
                alert('First');
            }
            function callAgain() {
                alert('Again');
            }
        </script>
    </body>
</html> 
```**

# asp.net - 互联网不可用时的离线缓存导航

> ID：10122557
> 
> 赞同：1
> 
> 时间：2012-04-12T11:23:32.620
> 
> 标签：asp.net, html, asp.net-mvc, asp.net-mvc-3, razor

我正在使用 ASP.NET MVC 3 创建一个 Web 应用程序，并且我想仅在 Internet 不可用时启用对 WebPage 的脱机访问。

我有个问题：

1.  我在 ASP.NET MVC3 中找到了很多缓存教程（例如[Official Site](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs)），但是如果网络连接可用，我如何使缓存内容无效并相应地更新缓存内容？因此，如果互联网连接正常，我希望用户能够浏览在线网站，如果互联网连接不可用，则可以浏览网站的缓存版本。PS。我不确定缓存是否是此类问题的合适解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:03:13.787

萨拉米斯，

我一直在[寻找类似问题的解决方案](https://stackoverflow.com/questions/7906221/http-caching-how-to-cache-resources-and-use-it-only-when-offline)。到目前为止，我可以想到下面的设计来实现你所需要的。我不确定这是否值得痛苦。您的应用程序所需的所有资源都需要通过客户端的资源管理器。给定资源 id 的资源管理器将在联机时从服务器获取内容并将其存储在 localStorage 中，而在脱机时将使用从 localStorage 获取的最后一个数据。这些对于图像来说很容易，因为可以将其存储为 Data-Uri，但没有考虑其他资源。

可能是为脚本提供支持，这些脚本应该由应用程序清单缓存，而要通过服务调用检索的数据和图像可以通过资源管理器。但我还没有真正找到执行上述操作的任何库/框架:(

# android - 将可点击图标（图像）添加到 Android GridView

> ID：10122560
> 
> 赞同：2
> 
> 时间：2012-04-12T11:23:42.760
> 
> 标签：android, gridview, mobile, user-interface

所以我想知道如何在[Android GridView 文档](https://i.stack.imgur.com/7mbUA.png)中引用的图像上添加可点击的图标。单击后，图像会从灰色变为彩色。像这样：

![Gridview-星星](../Images/c122e206e1207d18edcef7a8d993f802.png)

这是代码：

```
 <?xml version="1.0" encoding="utf-8"?>
    <GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:columnWidth="90dp"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:stretchMode="columnWidth"
    android:gravity="center"
    /> 
```

**HelloGrid.java**

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this));

    gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            Toast.makeText(HelloGridView.this, "" + position, Toast.LENGTH_SHORT).show();
        }
    });
} 
```

**图像适配器**

```
 public class ImageAdapter extends BaseAdapter {
    private Context mContext;

    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return mThumbIds.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    }

    // references to our images
    private Integer[] mThumbIds = {
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7,
            R.drawable.sample_0, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7,
            R.drawable.sample_0, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7
     };
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:47:23.073

在 getView 中使用 imageView.setOnclickListener 并在其中编写合适的操作。

# jquery - 结合 jQuery document.ready 函数

> ID：10122564
> 
> 赞同：0
> 
> 时间：2012-04-12T11:23:54.727
> 
> 标签：jquery, document-ready

我有一个旧的和凌乱的网站，正在尝试开始整理一些 jQuery 代码以使其更易于维护，并希望将我的所有 document.ready 函数都放在一个调用中。问题是每个页面都有一组不同的包含，其中一些有自己的 .ready 函数。

我想做的就是把它放在主页上：

```
var documentReadyFunction = function() {
    //do something
}; 
```

并在我的头文件/脚本文件中有这个：

```
jQuery(document).ready(function() {
    if (typeof documentReadyFunction != 'undefined') {
        documentReadyFunction();
    }
}); 
```

如果我能够知道一个地方需要的所有准备就绪的功能，那么这很好用，但我想要做的是添加更多脚本以在两个调用之间的文件中运行 .ready - 任何建议关于我如何实现这一点，或者它是否是一个好主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:36:02.393

不确定您是否知道这一点，但我很确定允许多次调用 $(document).ready(fn) 并且它们不会覆盖原始函数，但也会调用它。

有关详细信息，请参阅[http://www.learningjquery.com/2006/09/multiple-document-ready](http://www.learningjquery.com/2006/09/multiple-document-ready)。请注意，如果其中一个有错误，以下函数将不会执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:30:57.297

你可以试试这个方法；

```
<script type="text/javascript" >
 $(function(){
    init();
 });

 function init(){
   someFunction();
   //other init stuff
 }

 function someFunction(){
   }
</script> 
```

（或者）如果你想拥有多个 document.ready 你可以这样做：

从这里： http: [//www.learningjquery.com/2006/09/multiple-document-ready](http://www.learningjquery.com/2006/09/multiple-document-ready)

```
$(document).ready(function() {
  // some code here
});
$(document).ready(function() {
  // other code here
}); 
```

# java - 如何使用基于 WSDL 的 Web 服务通知客户端（Java、C#）

> ID：10122565
> 
> 赞同：1
> 
> 时间：2012-04-12T11:23:54.720
> 
> 标签：java, web-services, cxf, long-polling

我必须实现一个 Web 服务，供使用多种语言（例如 Java、C#）和框架编写的不同客户端使用。

正因为如此，我决定使用 JAX-WS 和 Apache CXF 框架来创建 WSDL 第一个 Web 服务。

现在我的问题是，每当用户对其中一个客户端执行某些操作（例如向数据库添加元素）时，网络服务都必须通知所有客户端。

经过一些研究，我发现长轮询技术可能会帮助我完成这项任务。但是我不确定这是最好的解决方案，并且这个解决方案是否适用于所有目标平台。

长轮询技术是否适合 Web 服务 (WSDL) 上下文，或者是否有另一种广泛使用和支持的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:37:33.797

长轮询或[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)技术最适用于这种情况，Web 服务是无状态的，不支持在不对托管服务（即 IIS、Apache 等）进行大量修改的情况下将数据推送到客户端。

# spring - 哪个视图将在下面提到的应用程序上下文中获得第一优先权......？

> ID：10122566
> 
> 赞同：1
> 
> 时间：2012-04-12T11:23:59.353
> 
> 标签：spring, spring-mvc

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" 
    p:prefix="/WEB-INF/jsp/" p:suffix=".jsp"  />

<bean class="org.springframework.web.servlet.view.XmlViewResolver"
        p:location="/WEB-INF/jasper-views.xml"   /> 
```

哪个视图将在上面的应用程序上下文中获得第一优先权....请解释一下。if 方法将 ABC 作为视图返回，并且 abc.jsp 和 abc 也存在于碧玉视图中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:01:41.153

这两个类都实现了[Ordered](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/core/Ordered.html)接口，因此您可以通过设置`order`属性值来控制 get 调用的顺序，即：

```
<bean id="jspViewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver" 
    p:prefix="/WEB-INF/jsp/"
    p:suffix=".jsp"
    p:order="1" />

<bean id="jasperViewResolver"
    class="org.springframework.web.servlet.view.XmlViewResolver"
    p:location="/WEB-INF/jasper-views.xml"
    p:order="2" /> 
```

默认情况下（没有`order`设置值）我假设它们被调用的顺序与它们在 XML 中声明的顺序相同。

# jquery - 隐藏孩子中的第n个孩子

> ID：10122568
> 
> 赞同：0
> 
> 时间：2012-04-12T11:24:15.707
> 
> 标签：jquery, jquery-selectors

我有许多元素（兄弟姐妹）可能隐藏也可能不隐藏（应用“隐藏”类）。

我想根据其索引选择元素之一，因此使用 :nth-child 伪类。

但是，我想选择第 n 个*可见*子元素，而不是所有元素的第 n 个子元素。所以我尝试了类似的东西：

```
$('.product-cell'):not('is-hidden'):nth-child(2); 
```

但这不起作用，是我弄乱了语法还是不可能像这样堆叠伪类？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:33:40.417

> 但这不起作用，是我弄乱了语法还是不可能像这样堆叠伪类？我该如何解决这个问题？

实际上，两者都是。

如果您使用冒号语法，则需要将所有选择器放在一个字符串中。如果要使用多个方法调用，则使用句`.`点而不是冒号`:`。

此外，`:nth-child()`总是选择一个元素，它是其父元素的第 n 个子元素，无论它是隐藏的还是具有某个类等。所以你需要使用`:eq()`而不是`:nth-child()`，像这样：

```
// :eq() is zero-indexed so :eq(1) selects the second match
$('.product-cell:not(.is-hidden):eq(1)') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:30:20.373

首先，您在`not`语句中缺少类选择器，但是 jQuery 中的`not()`and`nth-child()`选择器被设计为您的初始选择器的一部分。

```
$('.product-cell:not(.is-hidden):nth-child(2)') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T11:57:15.340

如果我的理解是正确的，

您正在寻找`nth child`没有名为的类，它只是非类`.is-hidden`的最后一个孩子`.is-hidden`。

假设您的 HTML 如下所示：-

```
<ul class='product-cell'> 
    <li>Glen</li> 
    <li class='is-hidden'>Tane</li> 
    <li>Ralph</li>
    <li class='is-hidden'>David</li>
    <li class='is-hidden'>David111</li>
    <li>David22</li>
</ul> 
```

要获得最后一个孩子，下面是 JQuery

```
$('.product-cell li[not(.is-hidden)]:last-child').text() 
```

# 结果：

```
David22 
```

# android - 以编程方式替换片段

> ID：10122570
> 
> 赞同：21
> 
> 时间：2012-04-12T11:24:20.433
> 
> 标签：android, replace, fragment

我有三个片段，如下图所示。我已经使用 .xml 文件在 LinearLayout 中添加了所有这三个片段，当我的启动器活动启动时，我使用 setContentView 加载该 .xml 布局。

我对 fragment2 有一些控制。单击任何一个，使用 FragmentTransaction 和 commit 方法以编程方式加载 fragment4。此片段已添加到屏幕，但问题是按语法添加的片段 4 占据了整个屏幕区域。可能是什么问题？

注意：在任何项目上单击 f2 我只想用新片段 f4 替换 f2。请记住，我已经通过 xml 布局文件添加了 f1、f2、f3，并以编程方式添加了新的片段 f4。

![在此处输入图像描述](../Images/47c4aee9ed77d3bc9a1e46c9fcd85fe9.png)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-12T11:49:10.657

您应该始终以编程方式添加、删除和替换您的片段。因此，我建议您将 F-1、F-2 和 F-3 片段替换为 FrameLayout 等容器。

基本上，不是将`<fragment/>`元素作为 F-1，而是将其作为`<FrameLayout/>`元素。然后在 FragmentActivity 的 onCreate 中执行片段事务：

```
Fragment1 f1 = new Fragment1();
FragmentTransaction ft = getFragmentManager().beginTransaction();
ft.replace(R.id.f1_container, f1); // f1_container is your FrameLayout container
ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
ft.addToBackStack(null);
ft.commit(); 
```

现在，假设您为 F-1、F-2 和 F-3 完成了此操作。然后，通过在您的 中再次执行相同的操作，将 f2 替换为 f4 `OnClickListener`：

```
public void onClick(View v) {
    Fragment4 f4 = new Fragment4();
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.replace(R.id.f2_container, f4); // f2_container is your FrameLayout container
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    ft.addToBackStack(null);
    ft.commit();   
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T11:29:23.283

仅保留 FrameLayout 作为 XML 中片段的占位符。在 OnCreate 中加载框架布局中的片段。片段的 OnClick，将特定 FrameLayout 的 id 指定为 Fragment4 替换。

# web-services - Rest API Web 服务 - iOS

> ID：10122574
> 
> 赞同：1
> 
> 时间：2012-04-12T11:24:42.163
> 
> 标签：web-services, rest

这是我第一次在 iOS 中使用 Web 服务。REST 是我的第一选择，我使用代码点火器来形成它。

我有我的控制器：

```
require APPPATH.'/libraries/REST_Controller.php';

class Sample extends REST_Controller
{

    function example_get()
    {
        $this->load->helper('arh');
        $this->load->model('users');

        $users_array = array();
        $users = $this->users->get_all_users();

        foreach($users as $user){
            $new_array = array( 
                                'id'=>$user->id , 
                                'name'=>$user->name,
                                'age'=>$user->age,
                              );
            array_push( $users_array, $new_array);
        }

        $data['users'] = $users_array;      
        if($data)
        {
            $this->response($data, 200);
        }
    }

    function user_put()
    {  
        $this->load->model('users');
        $this->users->insertAUser();

        $message = array('message' => 'ADDED!');
        $this->response($message, 200);

    } 

} 
```

，使用我的网络浏览器，访问该 URL`http://localhost:8888/restApi/index.php/sample/example/format/json`确实可以正常工作并给出以下输出：

```
{"users":[{"id":"1","name":"Porcopio","age":"99"},{"id":"2","name":"Name1","age":"24"},{"id":"3","name":"Porcopio","age":"99"},{"id":"4","name":"Porcopio","age":"99"},{"id":"5","name":"Luna","age":"99"}]} 
```

，这给了我在我的应用程序中使用 RestKit 的 RKRequest 的出色输出。

问题出在 put 方法上。这个网址：

```
http://localhost:8888/restApi/index.php/sample/user 
```

总是给我这样的错误：

此 XML 文件似乎没有任何与之关联的样式信息。文档树如下所示。

```
<xml>
<status/>
<error>Unknown method.</error> 
```

这是我的用户模型

```
<?php

    class Users extends CI_Model {
        function __construct()
        {
            parent::__construct();
        }

        function get_all_users()
        {
            $this->load->database();
            $query = $this->db->get('users');
            return $query->result();
        }

        function insertAUser(){
            $this->load->database();
            $data = array('name'=> "Sample Name", 'age'=>"99");
            $this->db->insert('users', $data);
        }
    }
?> 
```

我的 _put 方法的解决方法是什么，为什么我不插入任何东西？谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:29:57.233

除非您将方法设置为`PUT`or `POST`，否则您的 Web 服务器不会这样对待它。当您在浏览器栏中输入 URL 时，几乎总是一个 GET 请求。您可以尝试使用`curl`like

```
curl -X POST -d @filename http://your.url.path/whatever 
```

另一个链接是：[https ://superuser.com/questions/149329/what-is-the-curl-command-line-syntax-to-do-a-post-request](https://superuser.com/questions/149329/what-is-the-curl-command-line-syntax-to-do-a-post-request)

因此，您应该能够类似地执行 PUT（也许没有数据）。不太确定这是否应该被iOS标记:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T04:33:56.003

我在rest Client中使用Firefox插件遇到了这个问题。我只需要指出标题和正文即可使 put 和 post 工作。

# vb.net - 如何在 VB.net 的 RTF 控件中显示 Bmp

> ID：10122581
> 
> 赞同：0
> 
> 时间：2012-04-12T11:24:49.760
> 
> 标签：vb.net, rtf, bmp

我从这个[C# 问题开始](https://stackoverflow.com/questions/1490734/programatically-adding-images-to-rtf-document)

我正在尝试在我正在制作的 Bot 程序的 rtf 框中显示 bmp 图像。此函数应该将位图转换为 rtf 代码，然后将其插入到另一个带有附加文本的 rtf 格式化程序 srtring。有点像在聊天程序中使用的表情符号。

由于某种原因，此函数的输出被 RTF 框拒绝并完全消失。我不确定它是否是我将 bmp 转换为二进制字符串的方式，或者它是否与标题标签相关联

lb.SelectedRtf = FormatText(build.ToString, newColor)

```
 'returns the RTF string representation of our picture
    Public Shared Function PictureToRTF(ByVal Bmp As Bitmap) As String

    'Create a new bitmap
    Dim BmpNew As New Bitmap(Bmp.Width, Bmp.Height, Imaging.PixelFormat.Format24bppRgb)
    Dim gr = Graphics.FromImage(BmpNew)
    gr.DrawimageUnscaled(Bmp, 0, 0)
    gr.dispose()

    Dim stream As New MemoryStream()
    BmpNew.Save(stream, System.Drawing.Imaging.ImageFormat.Bmp)

        Dim bytes As Byte() = stream.ToArray()

        Dim str As String = BitConverter.ToString(bytes, 0).Replace("-", String.Empty)

        'header to string we want to insert
        Using g As Graphics = Main.CreateGraphics()
            xDpi = g.DpiX
            yDpi = g.DpiY
        End Using

        Dim _rtf As New StringBuilder()

        ' Calculate the current width of the image in (0.01)mm
        Dim picw As Integer = CInt(Math.Round((Bmp.Width / xDpi) * HMM_PER_INCH))

        ' Calculate the current height of the image in (0.01)mm
        Dim pich As Integer = CInt(Math.Round((Bmp.Height / yDpi) * HMM_PER_INCH))

        ' Calculate the target width of the image in twips
        Dim picwgoal As Integer = CInt(Math.Round((Bmp.Width / xDpi) * TWIPS_PER_INCH))

        ' Calculate the target height of the image in twips
        Dim pichgoal As Integer = CInt(Math.Round((Bmp.Height / yDpi) * TWIPS_PER_INCH))

        ' Append values to RTF string
        _rtf.Append("{\pict\wbitmap0")
        _rtf.Append("\picw")
        _rtf.Append(Bmp.Width.ToString)
        '  _rtf.Append(picw.ToString)
        _rtf.Append("\pich")
        _rtf.Append(Bmp.Height.ToString)
        ' _rtf.Append(pich.ToString)
        _rtf.Append("\wbmbitspixel24\wbmplanes1")
        _rtf.Append("\wbmwidthbytes40")
        _rtf.Append("\picwgoal")
        _rtf.Append(picwgoal.ToString)
        _rtf.Append("\pichgoal")
        _rtf.Append(pichgoal.ToString)
        _rtf.Append("\bin ")

        _rtf.Append(str.ToLower & "}")
        Return _rtf.ToString
    End Function

Public Function FormatText(ByVal data As String, ByVal newColor As fColorEnum) As String
    data = System.Net.WebUtility.HtmlDecode(data)
    data = data.Replace("|", " ")
    Dim reg As New Regex("\$(.[0-9]+)\$")
    If reg.IsMatch(data) Then
        Dim meep As String = Regex.Match(data, "\$(.[0-9]+)\$").Groups(1).ToString
        Dim idx As Integer = Convert.ToInt32(meep)
        Dim img As String = Fox2RTF(idx)

        If img IsNot Nothing Then data = Regex.Replace(data, "\$(.[0-9]+)\$", img)
    End If
    Dim myColor As System.Drawing.Color = fColor(newColor)
    Dim ColorString = "{\colortbl ;"
    ColorString += "\red" & myColor.R & "\green" & myColor.G & "\blue" & myColor.B & ";}"
    Dim FontSize As Integer = cMain.ApFont.Size
    Dim FontFace As String = cMain.ApFont.Name
    FontSize *= 2
    Dim test As String = "{\rtf1\ansi\ansicpg1252\deff0\deflang1033" & ColorString & "{\fonttbl{\f0\fcharset0 " & FontFace & ";}}\viewkind4\uc1\fs" & FontSize.ToString & data & "\par}"
    Return "{\rtf1\ansi\ansicpg1252\deff0\deflang1033" & ColorString & "{\fonttbl{\f0\fcharset0 " & FontFace & ";}}\viewkind4\uc1\fs" & FontSize.ToString & data & "\cf0 \par}"
End Function
Private Function Fox2RTF(ByRef Img As Integer) As String
    Dim shape As New FurcadiaShapes(Paths.GetDefaultPatchPath() & "system.fsh")
    Dim anims As Bitmap() = Helper.ToBitmapArray(shape)
    ' pic.Image = anims(Img)

    Return PictureToRTF.PictureToRTF(anims(Img))

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:42:52.597

从来没有找到我希望的灵魂。但我确实找到了一个解决[http://www.codeproject.com/Articles/30902/RichText-Builder-StringBuilder-for-RTF的工作](http://www.codeproject.com/Articles/30902/RichText-Builder-StringBuilder-for-RTF)

# tridion - 从 Tridion Broker Service (2009 SP1) 加载 CustomMeta 时出现异常

> ID：10122587
> 
> 赞同：3
> 
> 时间：2012-04-12T11:25:09.433
> 
> 标签：tridion

我正在尝试从发布到 Tridion Broker 的组件中加载一些自定义元。

这是 2009 SP1

我可以通过如下查询在 Custom_Meta 表中看到该组件：

```
SELECT * FROM [Tridion_Broker].[dbo].[CUSTOM_META] WHERE ITEM_ID = 204221 
```

但是，使用下面的代码，我在执行 GetMeta 的行上得到一个 Java 运行时异常。我注意到，如果我的 queryStringId 是正确的 TCM ID，那么它会抛出异常，但如果我只是输入项目 ID，它将返回 null。

```
string queryStringId = HttpUtility.UrlDecode(Request.QueryString["component_uri"]);

string pageId = ((BasePage) Page).PageTcmId;
int publicationId = int.Parse(pageId.Split(':')[1].Split('-')[0]);
using (var cmf = new ComponentMetaFactory(publicationId))
{
    IComponentMeta cm = cmf.GetMeta(queryStringId);
    if(cm != null)
    {
        VideoId = cm.CustomMeta.GetValue("video_url").ToString();
    }
    else
    {
        litMessage.Visible = true;
    }
} 
```

堆栈跟踪：

```
[RuntimeException]
   Codemesh.JuggerNET.NTypeValue.Throw(Int64 inst) +351
   Codemesh.JuggerNET.JavaClass.ThrowTypedException(Int64 inst) +1278
   Codemesh.JuggerNET.JavaMethod.CallObject(JavaProxy jpo, JavaMethodArguments args) +551
   Codemesh.JuggerNET.JavaMethod.CallObject(JavaProxy jpo, Type declaredType, Boolean bLeaf, JavaMethodArguments jargs) +50
   Com.Tridion.Meta.ComponentMetaFactory.GetMeta(Int32 componentId) +118
   Tridion.ContentDelivery.Meta.ComponentMetaFactory.GetMeta(Int32 componentId) +16
   ASP._controls_video_ascx.Page_Load(Object sender, EventArgs args) in c:\Inetpub\wwwroot\borland\us\_controls\Video.ascx:18
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +99
   System.Web.UI.Control.LoadRecursive() +50
   System.Web.UI.Control.LoadRecursive() +141
   System.Web.UI.Control.LoadRecursive() +141
   System.Web.UI.Control.LoadRecursive() +141
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +627 
```

**更新** 我查看了在“信息”级别启用日志的代理日志，但在“启用 Tridion 代理”后什么也没看到。这是配置问题还是 DLL 问题？看起来 CD 根本没有调用该服务？

**更新 2** 我已经尝试了很多东西，但仍然没有帮助。就像代码无法与 JVM 通信，但是我可以在事件日志中看到 JVM 正在启动。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T17:08:49.830

您使用的是 Java 1.6 吗？我认为您可能正在使用适用于 Java 1.5 的 JDBC 驱动程序，如果是，请从[此处下载最新的驱动程序](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=21599)

还要仔细检查代理配置中的所有绑定！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T15:23:31.297

通常，当我遇到这种错误时，是因为以下原因之一：

*   Java 运行时未安装或可用于 Web 应用程序（从以前的评论中，我发现您不是这种情况）。您是否检查过事件查看器（Tridion 或 Tridion Content Manager）是否有错误？诸如“无法找到 JVM”之类的东西...

*   缺少 JAR - 您的类路径中缺少 Tridion 或 3rd 方 JAR（可能在您的`webroot/bin/lib`.

*   配置错误（Tridion 配置错误，在某处`webroot/bin/config`）；

*   缺少许可证文件（检查`webroot/bin/config/cd_licenses.xml`或者您的配置文件可能指向另一个`cd_licenses.xml`，Web 应用程序应用程序池用户可能无法使用或访问）。丢失的许可证可能是最棘手的。您在日志中看到的只是一个微妙的提及，指出由于许可证丢失/过期，代理已恢复为“文件系统”。这意味着不会与 CD DB 进行通信——对于自定义元，这是不行的；

最后 3 个错误将在日志文件中出现。因此，请确保您启用了日志级别调试并在 cd_core 和 cd_broker 日志中查找任何堆栈跟踪。

最后但同样重要的是，确保您的网站应用程序池对于 Tridion 网站是唯一的（不要在其他网站中重复使用）。检查使用的 .net 版本（推荐 4.0）并检查运行它的用户（推荐网络服务）。

# algorithm - DAG 中的路径积总和

> ID：10122597
> 
> 赞同：2
> 
> 时间：2012-04-12T11:26:09.367
> 
> 标签：algorithm, graph, sum, product, directed-acyclic-graphs

假设我们有一个边用数字标记的 DAG。将路径的值定义为标签的乘积。对于每个（源，汇）对，我想找到从源到汇的所有路径的值的总和。您可以使用动态规划在多项式时间内完成此操作，但在如何分解问题方面仍然可以做出一些选择。就我而言，我有一个 DAG，必须用不同的标签反复评估。我的问题是：对于给定的 DAG，我们如何预先计算一个好的策略来重复计算不同标签的这些值？如果有一种算法可以找到最佳方法，例如最小化乘法次数的方法，那就太好了。但也许这问得太多了，我会对一个能很好分解的算法感到非常满意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:30:58.600

令 S 为源集，V 为 DAG 的顶点集，E 为边集，n = |V|，m = |S|，W 为存储边权重的 nxn 矩阵，C 为一个 mxn 矩阵，使得 C[i,j] 在算法结束时保持从 i 到 j 的所有路径的值的总和。为了简化算法的解释和正确性证明，我假设图的顶点从 1 到 n 是拓扑排序的，其中节点 1 到 m 是源。这将 O(|E|+|V|) 添加到我们算法的运行时间：

下面是算法的伪代码：

```
1: set C[i,j] to 1 if i=j and i is a source node, and to 0 otherwise.
2: sort the DAG topologically
3: for k=1 to n (vertex traversal in the topological order)
4:   foreach predecessor k' of vertex k
5:     foreach i in S
6:       C[i,k] += C[i,k']*W[k',k] 
```

两个外部循环总共有 O(|E|+|V|) 次迭代。因此，假设加法和乘法需要恒定时间，算法的运行时间为 O((|V|+|E|).m)。这包括拓扑排序的时间。

**正确性**证明：我们通过归纳证明，在完成最外层循环的第 k 次迭代后，C[i,k] 是 S 中每个 i 从 i 到 k 的所有路径的值之和。
*基本情况*： k = 1 很明显（因为第一个元素没有任何前任）
*归纳*: 假设 C[i,j] 对于所有 j < k 都是正确计算的。从任何源 i 到 k 的所有路径都必须经过 k 的前一个 k'。由于我们以拓扑顺序迭代 k' 必须小于 k，并且根据我们的归纳假设 C[i,k'] 是从 i 到 k' 的路径值的总和。此外，通过特定前驱k'的从i到k的路径值之和等于从i到k'的路径值之和，即C[i,k']乘以W[k '，k]。因此，从 i 到 k 的所有路径的值的总和是 C[i,k']*W[k',k] 对 k 的所有前任 k' 的总和。

*相同的图结构，不同的 W 矩阵*：如果我们需要为具有相同结构但不同 W 的不同图计算矩阵 C，我们可以执行以下操作：令 C' 是一个矩阵，其元素是 3 元组列表。将上面的第 6 行替换为

```
C'[i,k].append((i,k',k)) 
```

然后通过以拓扑顺序遍历顶点并遍历 C'[i,k] 中的元组，您可以在不查看图结构的情况下计算 C[i,k]。这是因为元组隐含地表示图结构。就复杂性而言，这并没有好坏之分。

# mongodb - 可以在 MongoDB 的同一字段中混合 NumberLong 和普通整数吗？

> ID：10122598
> 
> 赞同：1
> 
> 时间：2012-04-12T11:26:11.447
> 
> 标签：mongodb

我一直在使用 Morphia 从 Java 中持久化对象。我也一直在从控制台运行一些批处理。我刚刚意识到一些值现在存储为 NumberLong 和数字作为纯 Javascript 数字。

我在这个领域有一个索引。一切似乎都很好 - 如果我查询：`{f: 100}` 从控制台它仍然返回对象，即使它实际上包含`{f: NumberLong(100)}`

所有司机都是这样吗？避免 NumberLong 的最佳做法是我可以将值放入 32 位吗？如果将所有 NumberLong 转换为基本数字，是否会节省大量数据和索引空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:39:39.743

纯 JavaScript 数字是 64 位浮点数（双精度）并占用 8 个字节，因此节省空间不是这样做的理由。您的值保持一致可能很有价值，并且在不同的数字类型之间存在权衡。如果您想要 32 位整数，则在 shell 中有一个类型 (NumberInt)。驱动程序通常会尝试将事物映射到驱动程序的语言中，但驱动程序之间的功能会尽可能匹配。

# javascript - 使用 jquery anmate() scrollLeft 将轮播项目滚动到轮播的中间

> ID：10122599
> 
> 赞同：0
> 
> 时间：2012-04-12T11:26:30.573
> 
> 标签：javascript, jquery, css

我到处寻找，但找不到正确的答案（也许我错过了）。在我的轮播中，当一个项目被点击时，它应该通过滑动移动到轮播的中间。我正在使用`animate({scrollLeft: value }, speed);`，但它不做任何动画，但如果我这样做`scrollTop`的话（当然是通过调整 css ......）。为什么`scrollTop: value`工作和`scrollLeft: value`不工作，在`animate()`？

请检查我的 jsFiddle：http: [//jsfiddle.net/rKAHV/](http://jsfiddle.net/rKAHV/)

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:46:05.527

它不起作用，因为不需要滚动，您的容器与所有元素一样宽。只有在有滚动条的情况下才能滚动（浏览器会添加一些）

如果打算只移动一个元素，您可以尝试根据它们的左侧位置为它们设置动画。

```
animate({left: value}, speed); 
```

# java - ITextPdf：从右到左打印阿拉伯字符串 (RTL)

> ID：10122610
> 
> 赞同：4
> 
> 时间：2012-04-12T11:27:43.063
> 
> 标签：java, itext, pdf-generation, arabic, right-to-left

我在 java 上使用 iTextpdf 来生成加盖戳的 PDF，有时生成的 PDF 是阿拉伯语，我遇到了一个有趣的问题。为了让阿拉伯语页面从右到左（RTL）创建，我使用具有属性的表格和单元格`PdfPCell.setRunDirection(PdfWriter.RUN_DIRECTION_RTL)`。当我使用此属性时，阿拉伯语根本不显示，如果我避免对该属性的调用正确显示阿拉伯语字符串，这意味着我不应该遇到字体问题，而且我真的不知道这是否是 iText 的问题或者我只是错过了一些东西。

这里有一小段代码正确显示了一个阿拉伯字符串：

```
BaseFont bf = BaseFont.createFont(Application.getBASEPATH() + "fonts/arabic.ttf",BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
Font trebuchetSmaller = new Font(bf, 10, 0);

PdfPTable tbl = new PdfPTable(1); 
PdfPCell cell = new PdfPCell();
Paragraph paragraph = new Paragraph();
paragraph.add(new Phrase("ربط صفحة على شبكة الإنترنت"), trebuchetSmaller));
cell.addElement(paragraph);
tbl.addCell(cell); 
```

这里需要更改使阿拉伯字符串消失：

```
BaseFont bf = BaseFont.createFont(Application.getBASEPATH() + "fonts/arabic.ttf",BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
Font trebuchetSmaller = new Font(bf, 10, 0);

PdfPTable tbl = new PdfPTable(1); 
PdfPCell cell = new PdfPCell();
cell.setRunDirection(PdfWriter.RUN_DIRECTION_RTL);
Paragraph paragraph = new Paragraph();
paragraph.add(new Phrase("ربط صفحة على شبكة الإنترنت"), trebuchetSmaller));
cell.addElement(paragraph);
tbl.addCell(cell); 
```

如果我使用`PdfWriter.RUN_DIRECTION_RTL`英文字符串，它会以应有的格式正确显示。如果我使用混合了英文和阿拉伯字符的字符串，只会显示英文字符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T19:50:08.103

更改您的代码以包含注册的字体：

```
new Phrase("آزمايش", font) 
```

您也可以直接添加短语：

```
PdfPCell pdfCell = new PdfPCell(new Phrase("آزمايش", font));  
pdfCell.setRunDirection(PdfWriter.RUN_DIRECTION_RTL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T15:14:52.457

非常感谢。实际上问题是在 RTL 中切换时使用的字体表现不佳。我在这个地址找到了很多非常有趣的 unicode 阿拉伯字体：[http](http://cooltext.com/Fonts-Unicode-Arabic) ://cooltext.com/Fonts-Unicode-Arabic供感兴趣的人使用。

# java - 非常轻量级的 Eclipse-Maven 集成 - 仅依赖管理？

> ID：10122614
> 
> 赞同：2
> 
> 时间：2012-04-12T11:27:58.060
> 
> 标签：java, eclipse, maven, dependency-management, maven-eclipse-plugin

根据我的经验，Maven 在小型/实验性应用程序中通常是一种过度杀伤力。但是依赖管理是 Maven 非常有用的特性，实际上是唯一对上述类型的应用程序真正有用的特性。

我想知道我是否可以有一个**非常最小和轻量级**的 Eclipse-Maven 集成，**它只**提供以最简单的方式将 Maven 依赖项添加到 Eclipse 项目类路径。

特别是我不想：

*   适用于任何 Maven 约定（包括项目布局约定）
*   安装和使用任何特定的 Eclipse 插件（Eclipse 根本不应该知道它是“Maven 项目”并以任何特殊方式对待它）
*   以任何其他方式依赖/绑定到 Maven，而不是将其用作轻量级 jars/库下载器

我的第一个（也是唯一一个）想法是从命令行使用[Eclipse Maven 插件来管理项目类路径。](http://maven.apache.org/plugins/maven-eclipse-plugin/index.html)但默认情况下，这个插件做的比它更多（设置默认的 maven 项目布局，管理构建器）。我可以限制这个插件只做我想做的事吗？

或者我可以通过其他方式达到我描述的目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:39:04.263

我找到了一个非常适合我所描述的需求/用例的解决方案：

1\. 我在 Eclipse 项目根目录中创建了非常小的 pom 文件：

```
<project>
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.sobczyk.piotr</groupId>
    <artifactId>mvn-eclipse-test</artifactId>
    <version>1.0.0</version>

    <build>
        <sourceDirectory>src</sourceDirectory>
        <outputDirectory>bin</outputDirectory>
    </build>

    <dependencies>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>
    </dependencies>
</project> 
```

这个 .pom 文件由三部分组成：

*   所需的 Maven 东西，即。模型版本和 GAV
*   `build`Maven默认源和输出目录并被覆盖以模仿Eclipse环境的部分（这是关于限制maven-eclipse-plugin行为的部分问题的答案，其他一些eclipse：eclipse目标选项`buildcommands`可能在一些更复杂的情况下有用）
*   `dependencies`部分列出了我需要在项目类路径上拥有的依赖项

2\. 从命令行我调用了以下命令：

```
mvn eclipse:configure-workspace -Declipse.workspace=C:/myworkspace
cd C:/myworkspace/myproject
mvn eclipse:eclipse 
```

3\. 每次我想从 Maven 文件更新 Eclipse 项目类路径时，我可以做以下两件事之一：

*   从命令行调用最后两行
*   将 mvn eclipse:eclipse 绑定到 Eclipse[外部工具配置](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-exttools-running.htm)并单击调用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:49:31.483

对不起，没有。正如你在这里看到的：

[http://maven.apache.org/plugins/maven-eclipse-plugin/eclipse-mojo.html](http://maven.apache.org/plugins/maven-eclipse-plugin/eclipse-mojo.html)

插件的配置允许添加一些额外的 classppath 项、facelets 等，但您不能跳过默认项。

# php - 确定 ORDER BY 语句中的顺序

> ID：10122619
> 
> 赞同：2
> 
> 时间：2012-04-12T11:28:13.520
> 
> 标签：php, mysql

我有一个选择语句：

```
$search = "SELECT Scene, Divinite, Attestation
    FROM SceneDivList
    WHERE BINARY Divinite = '$target'
    ORDER BY FIELD( Scene);
$result = mysql_query($search, $con); 
```

在这种情况下，结果将根据“场景”字段按字母顺序排列。

是否可以不按字母顺序而是基于以下“字母”对结果进行排序：

```
$alphabet = array( 1 => '-' , 2 => ',' , 3 => '.' , 4 => "A",
                   5 => "j", 6 => "a", 7 => "w", 8 => "b", 
                   9 => "p", 10 => "f", 11 => "m", 12 => "n", 
                   13 => "r", 14 => "h", 15 => "H", 16 => "x", 
                   17 => "X", 18 => "s", 19 => "S", 20 => "q", 
                   21 => "k", 22 => "g", 23 => "t", 24 => "T", 
                   25 => "d", 26 => "D"); 
```

结果应该是：

```
SCENE            ATTESTATION
jnD-Hr-m-nms,t  DI.80,11
jrp             DI.26,12
jrT,t           DI.116,17
aAb,t           DI.138,8
anx             DI.12,5
antjw           DI.148,10
wADw-msdm,t     DI.144,11
bHsw            DI.115,9
pr-n-nb=f           DI.17,7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:36:00.660

最干净的解决方案是[定义您自己的自定义排序规则](http://dev.mysql.com/doc/refman/5.0/en/adding-collation.html)并指定`Scene`列应该使用它。如果您这样做，查询将简单地读取`ORDER BY Scene`，仅此而已（顺便说一句，`ORDER BY FIELD(Scene)`没有意义——您检查过什么[`FIELD`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_field)吗？）。

除此之外，您可以基于`STR_REPLACE`使*数据*适应排序规则而不是相反，但我不会去那里。

当然，您可以回避所有这些并在 PHP 中进行排序，这样会更方便，但是这种方法不适用于连接必须自行排序的子查询的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:06:07.990

乔恩的回答是最好的解决方案。但是这里有一个残酷的 php 解决方案给你

```
$alphabet = array( 1 => '-' , 2 => ',' , 3 => '.' , 4 => "A",
               5 => "j", 6 => "a", 7 => "w", 8 => "b", 
               9 => "p", 10 => "f", 11 => "m", 12 => "n", 
               13 => "r", 14 => "h", 15 => "H", 16 => "x", 
               17 => "X", 18 => "s", 19 => "S", 20 => "q", 
               21 => "k", 22 => "g", 23 => "t", 24 => "T", 
               25 => "d", 26 => "D");

$replace_engine = 'Scene';                   
foreach($alphabet as $k=>$char) {
    $charint = sprintf("%03s",   $k);
    $replace_engine = "REPLACE(".$replace_engine.",'$char','$charint')";
}

$query = "SELECT $replace_engine as myalphabet, Scene FROM SceneDivList ORDER BY myalphabet"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T11:44:19.203

虽然 Jon 的回答是正确的方法，但您可能想通过设置一个表 (ID, C) 来尝试快速而肮脏的版本，其中 ID 是（自动增量）整数，C 是 VARCHAR(1)。

通过连接，可以将排序达到所需的任何级别。

```
$search = "SELECT s.Scene, s.Divinite, s.Attestation
FROM SceneDivList s
INNER JOIN CustomOrder o1 ON o1.C = SUBSTRING(s.Scene,0,1)
INNER JOIN CustomOrder o2 ON o2.C = SUBSTRING(s.Scene,1,1)
INNER JOIN CustomOrder o3 ON o3.C = SUBSTRING(s.Scene,2,1)
WHERE BINARY s.Divinite = '$target'
ORDER BY o1.ID, o2.ID, o3.ID, SUBSTRING(s.Scene,4);
$result = mysql_query($search, $con); 
```

注意：虽然这可以快速而肮脏地完成，但查询本身会比以前慢得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T11:38:06.440

有两种解决方案：1）直接在代码中查询后排序。缺点是您总是需要收集所有结果，因此您可能会遇到性能问题。2) 使用基于数组索引的排序值向表中添加一列。

也许你可以创建一个 mysql 函数来订购......但我对自定义 mysql 函数知之甚少

...乔恩提出的解决方案在我之前 2 分钟提出：D

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T12:20:35.760

如果你想用暴力字符串替换一个字段并按它排序，你需要 PHP 中的递归函数来生成字符串：

```
function replace( $fields ) {
    if( empty( $fields ) ) return( "`Scene`" );

    $t = each( $fields );
    $pop = array_shift( $fields );

    return( sprintf(
        "replace(%s, '%s', '%s')",
        replace($fields),
        $t['key'],
        str_pad($t['value'], 3, '0', STR_PAD_LEFT )
    ));
}

$alphabet  = array( 1 => '-' , 2 => ',' , 3 => '.' , 4 => "A",
                   5 => "j", 6 => "a", 7 => "w", 8 => "b", 
                   9 => "p", 10 => "f", 11 => "m", 12 => "n", 
                   13 => "r", 14 => "h", 15 => "H", 16 => "x", 
                   17 => "X", 18 => "s", 19 => "S", 20 => "q", 
                   21 => "k", 22 => "g", 23 => "t", 24 => "T", 
                   25 => "d", 26 => "D");

$sql = sprintf(
"SELECT Scene, Divinite, Attestation, %s as `neworder`
FROM SceneDivList
WHERE BINARY Divinite = '%s'
ORDER BY `neworder`", 
    replace(array_flip( $alphabet  )),
    "target <- whatever that is"
);

echo $sql; 
```

此时 $sql 将包含以下查询：

```
SELECT Scene, Divinite, Attestation, 
replace(replace(replace(replace(replace(
replace(replace(replace(replace(replace(
replace(replace(replace(replace(replace(
replace(replace(replace(replace(replace(
replace(replace(replace(replace(replace(replace(
`Scene`, 'D', '026'), 'd', '025'), 'T', '024'
), 't', '023'), 'g', '022'), 'k', '021'), 'q', '020'
), 'S', '019'), 's', '018'), 'X', '017'), 'x', '016'
), 'H', '015'), 'h', '014'), 'r', '013'), 'n', '012'
), 'm', '011'), 'f', '010'), 'p', '009'), 'b', '008'
), 'w', '007'), 'a', '006'), 'j', '005'), 'A', '004'
), '.', '003'), ',', '002'), '-', '001'
) as `neworder`
FROM SceneDivList
WHERE BINARY Divinite = 'target <- whatever that is'
ORDER BY `neworder` 
```

# c - C循环依赖

> ID：10122621
> 
> 赞同：6
> 
> 时间：2012-04-12T11:28:19.917
> 
> 标签：c, include, c-preprocessor, circular-dependency

我在**C**中遇到了循环依赖的问题，我查看了有关此主题的其他问题，但确实找不到答案。

我有第一个名为 vertex 的结构：

```
#ifndef MapTest_vertex_h
#define MapTest_vertex_h

#include "edgelist.h" //includes edgelist because it's needed

typedef struct 
{
    char* name;
    float x, y;
    edgelist* edges;
} vertex;

#endif 
```

第二个结构是由顶点包含的边缘列表。

```
#ifndef edgelist_h
#define edgelist_h

#include "edge.h" //include edge, because its needed

typedef struct _edgelist
{
    edge** edges; 
    int capacity, size;
} edgelist;

//...

#endif 
```

然后是最后一个结构，即问题出现的结构，边缘结构被上面的边缘列表包含。

```
#ifndef MapTest_edge_h
#define MapTest_edge_h

#include "vertex.h" //needs to be included because it will be unkown otherwise

typedef struct 
{
    float weight;
    vertex* destination;
    int found; 
} edge;

#endif 
```

我尽我所能，转发声明，使用`#ifndef`等，`#define`但找不到答案。

如何解决这个循环依赖问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T11:31:54.827

似乎您不需要在任何文件中包含任何内容。相关类型的前向声明就足够了：

```
#ifndef MapTest_vertex_h
#define MapTest_vertex_h

struct edgelist;

typedef struct
{
    char* name;
    float x, y;
    edgelist* edges;    // C++ only - not C
} vertex;

#endif 
```

等等。在 C 编码中，您必须编写：

```
struct edgelist;

typedef struct
{
    char* name;
    float x, y;
    struct edgelist* edges;
} vertex; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T11:52:00.937

*使用前向声明*可以打破这种依赖关系。除了包含具有结构完整定义的文件之外，还有两种选择：

1.

```
typedef struct 
{
    char* name;
    float x, y;
    struct _edgelist* edges; /* add "struct" here (elaborated type specifier) */
} vertex; 
```

2.

```
struct __edgelist; /* better form: forward declaration */

typedef struct 
{
    char* name;
    float x, y;
    struct _edgelist* edges; /* still need to add "struct" here */
} vertex; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T11:40:40.817

我假设一个顶点需要知道哪些边连接到它，而一条边需要知道它连接到哪些顶点。

如果由我决定，我会创建单独的数据类型来关联顶点和边：

```
struct vertex {
  char *name;
  float x, y;
};

// edgelist as before

struct edge {
  float weight;
  int found;
};

// New struct to map edges and vertices

struct vertexEdge { // you can probably come up with a better name
  struct vertex *v;
  struct edgelist *edges;
};

// New struct to map vertices and edges

struct edgeVertext {
{
  struct edge *e;
  struct vertex *vertices;
}; 
```

我这周的睡眠时间比我晚了大约 10-12 小时，所以我很确定有更好的方法来设计映射类型（可能不需要超过一种类型），但这是我会采取的一般方法。

# iphone - 如何开始为 iOS 开发配件？

> ID：10122622
> 
> 赞同：0
> 
> 时间：2012-04-12T11:28:23.890
> 
> 标签：iphone, ios, ipad, iokit, eaaccessory

我们希望开发可插入 30 针基座连接器的 iOS 配件。对于初学者来说，是否有一个很好的起点来讨论 EAAccessory 框架可以做什么和不能做什么？

Apress 在 2010 年 6 月发布了一本关于 EAAccessory 框架的书。这仍然相关吗，还是从那时起 Apple 引入了许多新的 API？是否有其他可用资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:51:50.340

我刚刚在 Apple Developer 网站上遇到了一个您可能感兴趣的程序： [https](https://developer.apple.com/programs/mfi/) ://developer.apple.com/programs/mfi/ 可能值得一试。

# python - 如何以内存有效的方式使用泡沫？

> ID：10122625
> 
> 赞同：2
> 
> 时间：2012-04-12T11:28:41.460
> 
> 标签：python, memory-management, suds, gevent

我有一个很大的 wsdl 文件，用 suds 初始化需要 30MB。我使用 gevent 生成了 100 个 greenlets，我将它们用作外部服务的工作人员。如何在 suds 客户端上使用单个实例但仍获得 100 个并行连接？初始化所有这些 suds 客户端是一个巨大的内存浪费。我真正需要的是 100 次传输和一个单一的 suds 客户端实例来翻译进出 xml 消息。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T14:05:41.133

尝试`client.clone()`或`client(..., cache=DocumentCache())`

# java - 将 JPanel 大小设置为以很小的边距填充父级

> ID：10122626
> 
> 赞同：1
> 
> 时间：2012-04-12T11:28:44.083
> 
> 标签：java, swing, jpanel, dynamic-sizing

我有两个 Jpanel（**JpanelLeft**和**JpanelLeftContent**）我怎样才能使 JpanelLeftContent 填充父大小，并在左侧和右侧留出一点边距。我尝试了不同的布局并尝试修改 hgap 和 vgap 值，但它们都没有给我一个好的结果。

```
 JPanel JpanelLeft = new JPanel();
  JPanel JpanelLeftContent = new JPanel();
  JpanelLeft.add(JpanelLeftContent); 
```

如果可能的话，我怎样才能使 JpanelLeftContent 看起来像一个圆角矩形，如图所示。

![在此处输入图像描述](../Images/abb86ab75c43e6350ff5ae2b88045087.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T12:10:39.580

> ..我怎样才能使 JpanelLeftContent 看起来像一个圆角矩形，如图所示。

见[`TextBubbleBorder`](https://stackoverflow.com/a/8463742/418556)一开始。

![](../Images/49a61ca3ed27f9b299bb7d4cc2f5135a.png)

显然，您需要删除底部的小`v`部分，并将底部边框进一步向下推。该代码没有经过全面测试，需要进一步的调整和修复。'不包括电池'。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T11:55:00.257

看看`Border`s 是如何工作的。尤其
[`BorderFactory.createEmptyBorder(int top, int left, int bottom, int right)`](http://docs.oracle.com/javase/6/docs/api/javax/swing/BorderFactory.html#createEmptyBorder%28int,%20int,%20int,%20int%29)可能会有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T14:19:08.510

试试这个代码示例：

```
import java.awt.*;
import javax.swing.*;

public class InsetTesting extends JFrame
{
    private void createAndDisplayGUI()
    {
        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        setLocationByPlatform(true);

        JPanel contentPane = new JPanel();
        contentPane.setOpaque(true);
        contentPane.setBorder(BorderFactory.createLineBorder(
                                    Color.DARK_GRAY.darker(), 5, true));
        contentPane.setBackground(Color.WHITE);

        add(contentPane, BorderLayout.CENTER);
        pack();
        setVisible(true);
    }

    public Insets getInsets()
    {
        return (new Insets(30, 20, 10, 20));
    }

    public Dimension getPreferredSize()
    {
        return (new Dimension(200, 400));
    }

    public static void main(String\u005B\u005D args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new InsetTesting().createAndDisplayGUI();
            }
        });
    }
} 
```

这是相同的输出：

![插图](../Images/82e6cea2defab513bc38c06776c7a2d5.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T11:43:56.983

要使 JPanel 看起来是圆形的，您需要创建自己的扩展 JPanel 的类，覆盖paintComponent 并将面板绘制为椭圆[Javadoc 这里](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/Ellipse2D.html)这将创建一个自定义对象，它是一个 JPanel。

当您指定椭圆的大小时，您希望从父面板获取 Y 和 X 值（因为您将在另一个面板上添加椭圆），然后从 X 轴减去所需的像素数。这可以通过将这些值传递给“椭圆面板”构造函数来实现。

# objective-c - 使用 OpenCV，如何在执行 OCR 之前检测文本方向？

> ID：10122635
> 
> 赞同：4
> 
> 时间：2012-04-12T11:29:01.287
> 
> 标签：objective-c, ios, opencv

我在 iOS 应用程序中使用 OpenCV。我想对某些文本执行 OCR，但我首先需要确定它的方向。

我如何在 OpenCV 中做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T11:38:37.690

我不确定是否可以在不提供 Objective-C 中的 OCR 的情况下回答这个问题——如果不使用 OCR 库，这很难在几行文本中完成。

好吧，20 年前，我编写了一个 OCR 系统（不使用任何 OCR 库）来实时读取银行支票。顺便说一句，它还在验证手写签名。

检查方向的问题很严重，因为支票可以（由人工操作员）随机插入小型电动银行支票扫描仪中。

由于所有银行都使用不同的页面布局和装饰，不依赖磁性墨水（扫描仪未检测到）来查找方向的唯一方法是实际尝试对“页面”顶部的第一个字符进行 OCR 识别'。

有些字符像“O”一样模棱两可，但大多数其他字符会告诉您图片是倒置还是镜像，因此只需阅读前 3-5 个字符即可完成工作（除非您有重复）。

祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T14:22:24.950

**此答案已更新**。

*   如果需要检测文字的旋转角度，可以看[这篇文章](http://felix.abecassis.me/2011/09/opencv-detect-skew-angle/)（分享源码）：

![](../Images/faf1a72090f8f8e96376ae7ff8d41674.png) ![](../Images/e0be0ba34b762f257dc3d8c2a13e313d.png)

*   在对文本进行纠偏后，可以执行 OCR 程序并将其结果与字典进行比较。如果匹配率很高，您就知道文本已正确旋转并且方向现在可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T14:03:41.587

[霍夫变换](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_lines/hough_lines.html)可能会对[您有所帮助](http://galfar.vevb.net/wp/2011/deskewing-scanned-documents/)。霍夫投票地图上的最大值（准确地说是占主导地位的集群，但为此您需要k=1 的[k-means](http://opencv.willowgarage.com/documentation/cpp/core_clustering.html)）将为您提供所需的角度。

![在此处输入图像描述](../Images/28c97c3144a6d3cf0eb04411cd6266b7.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T12:30:28.627

几周前我遇到了类似的问题，只是在我分心之前才开始研究它。无论如何，您可以使用离散傅立叶变换（在一定程度上）实现您想要的。模糊或腐蚀图像，使单个单词/行中的所有小白色间隙都填充为实心黑线（这有助于消除图像中的大量高频噪声），对图像进行 DFT，应用低-通过或带通滤波器（频率根据相对于图像大小的所需字体大小），并分析生成的幅度图。您将需要进行一些研究，否则其他人将需要详细说明，但这绝对是我找到的最佳解决方案。

我现在正在做另一个项目，但我会在一周左右的时间内回到这个项目，如果其他人还没有这样做的话，我会让你知道更多细节。当然，这个帖子现在有点老了，所以我什至可能没有得到回应哈哈，但无论如何它对其他人来说都是一个很好的参考。

# sql - 如何使用 aqua 数据工作室计算日期行

> ID：10122636
> 
> 赞同：0
> 
> 时间：2012-04-12T11:29:06.217
> 
> 标签：sql, sql-server-2005

我想问一下，当数据为空时如何使用 aqua 数据工作室计算日期行。

例如

```
select 
convert(varchar(10),dateclosed,103)
from customer
where dateclosed = '(null)'

no.  dateclosed    count(dateclosed)
1     1/1/2001         2
2\.    1/1/2001
3\.    2/1/2001         1
4\.    3/1/2001         1
5\.    (null)           4      
6\.    (null)         
8\.    (null)
9\.    (null)
10\.    5/1/2001         3
11\.    5/1/2001
12\.    5/1/2001
13\.    6/1/2001         1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:30:22.897

聚合函数（除了`COUNT(*)`）忽略 NULL 值，因此您需要：

*   使用`COUNT(*)`（而不是`COUNT(expression)`）
    **或**
*   将所有 NULL 值转换为某个特征日期：

    ```
    SELECT ISNULL(dateclosed, '1900-01-01'), count(ISNULL(dateclosed, '1900-01-01'))
    FROM customer
    GROUP BY ISNULL(dateclosed, '1900-01-01') 
    ```

# ruby-on-rails - 局部视图中的实例变量

> ID：10122639
> 
> 赞同：2
> 
> 时间：2012-04-12T11:29:13.843
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有两个控制器**Player**和**Teams**

我想从属于`Players_controller`. 我的问题是我无法从`Players_controller`.

我是否需要在我的 ? 中再次定义这些变量`Team_controller`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T11:35:33.680

看看[这个链接](http://guides.rubyonrails.org/layouts_and_rendering.html)。我认为您正在寻找的是

```
<%= render :partial => "customer", :object => @new_customer %> 
```

或类似的东西

```
<%= render :partial => "form", :locals => { :zone => @zone } %> 
```

# nginx - Nginx 重写规则/try_files 不能一起工作

> ID：10122640
> 
> 赞同：3
> 
> 时间：2012-04-12T11:29:20.277
> 
> 标签：nginx, rewrite

我有一个网站需要从 Apache 服务器转移到 Nginx 服务器。

本网站的.htaccess文件如下

```
RewriteEngine on
RewriteRule ^([^/\.]+)/?$ $1.php [L] 
```

这会将 www.example.com/hello 重定向到 www.example.com/hello.php 保留原始链接，但从 url 末尾省略 .php。

我试图在我的 Nginx 服务器块中复制它..

```
location / {
# Check if a file exists, or route it to index.php.
        try_files $uri $uri/ /index.php;
}

rewrite ^/([a-z]+)$ /$1.php last; 
```

重写规则有效，将所有链接重定向到 .php 文件，但如果文件不存在，则会破坏 Nginx try_files 规则以在目录内搜索。

下面的管理示例链接是一个文件夹，里面有一个 index.php 文件。

www.example.com/admin

try_files 应该将其重定向到..

www.example.com/admin/

由于没有名为 admin.php 的文件。相反，我收到“未指定输入文件”消息。

当我删除重写时，try_files 工作正常。但是，如果没有此重写规则，站点的其余部分将无法工作。

有谁知道我怎样才能让 try_files 和 rewrite 一起工作？

谢谢

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-29T11:29:36.813

我知道这可能无济于事，但是我查看了您的用例，我想知道您如何知道对 /admin 的请求应该转到 /admin/ 而不是 /admin.php？

我的意思是您的重写规则明确指出，如果您收到对 /[az]+ 的请求，则应将其重写为 /[az]+.php

然而，您希望 try_files 将 /admin 推送到 /admin/ 吗？

查看您的 apache 规则：

```
RewriteRule ^([^/\.]+)/?$ $1.php [L] 
```

我在这里看到您试图限制发送到 x.php 的内容。我在您的 nginx 重写中没有看到任何此类限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-05T17:18:07.873

您可以在 location 指令或服务器中将索引设置为 index.php

```
index index.php index.html; 
```

例如，去往 /admin/index.php 的请求将显示为 /admin/

或者让 try_files 尝试将 .php 放在请求的末尾

```
location / {
    try_files $uri $uri.php =404;
} 
```

在这种情况下，您的 /admin 不会是文件夹，而是 admin.php 但如果您还有一个名为 /admin/ 的文件夹，它会变得很棘手，因为它会尝试 /admin.php 和 /admin/index.php

# css - 如何为字体（CSS）添加渐变？

> ID：10122647
> 
> 赞同：4
> 
> 时间：2012-04-12T11:29:34.470
> 
> 标签：css, fonts, font-face, gradient

我正在寻找一种将渐变添加到大粗体字母的方法，如下所示：![http://gyazo.com/b127f359e01e12db0fb0d03d31f66f48.png?1334229785](../Images/326310f59f8e8e8a9f05b4e459d0dc14.png)

单词可以有一行或两行，字体高度取决于视口高度。

此示例适用于 Chrome，但不适用于 FF：[http ://dabblet.com/gist/1695257](http://dabblet.com/gist/1695257)

您会推荐任何可行的纯 CSS 解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T13:51:32.153

*在非 webkit*浏览器中使用纯 css**完全**不可能做到这一点。您的示例是在 webkit 中执行此操作的正确方法，但我会进行 webkit 检测媒体查询，以确保 Firefox 永远不会尝试在没有文本剪辑的情况下使用渐变（读取[CSS 前缀正在成为威胁 - 但 Webkit 真的怪罪？](http://c.nath.is/FmLH)） 喜欢[这样](http://dabblet.com/gist/2367442)。我可以提醒你，这*是非规范的*东西，你真的不应该使用它。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-25T18:42:59.427

我同意 Nathaniel 上面所说的，但如果你仍然想尝试，那么你可以这样做：

[示例代码@Codepen](http://codepen.io/LeftOverCoder/pen/FiegE)

```
<style>
h1 {
font-size: 60px;
text-align: center;
margin: 40px;
color: #000;
}

h1.methodA {
background: -webkit-linear-gradient(top, #1965a9, #000);
background: linear-gradient(top, #1965a9, #000);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
}

h1.methodB {
-webkit-mask-image: -webkit-linear-gradient(top, rgba(0,0,0,1), rgba(0,0,0,.3) 50%, rgba(0,0,0,1));
-webkit-mask-image: linear-gradient(top, rgba(0,0,0,1), rgba(0,0,0,.3) 50%, rgba(0,0,0,1));
}
</style>

<h1 class="methodA">Awesome Gradient Text Method A</h1>

<h1 class="methodB">Awesome Gradient Text Method B</h1> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-12T11:32:27.333

关键是这个功能不太容易与不同的浏览器兼容，但是我花时间为你搜索了一下，发现： [http ://robertnyman.com/2010/02/15/css-gradients-for-all-不使用图像的网络浏览器/](http://robertnyman.com/2010/02/15/css-gradients-for-all-web-browsers-without-using-images/)

希望它可以帮助你。

编辑：评论中的人让我意识到这不适用于文本，因此我发现另一篇文章为您提供了答案： [http ://webdesignerwall.com/tutorials/css-gradient-text-影响](http://webdesignerwall.com/tutorials/css-gradient-text-effect)**

# ruby-on-rails - Accepts_nested_attributes_for 适用于编辑/更新，而不适用于新建/创建

> ID：10122648
> 
> 赞同：1
> 
> 时间：2012-04-12T11:29:38.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在“timesheet”和“timesheetlines”之间有“accepts_nested_attributes_for”关系。这在编辑（编辑/更新）时间表时效果很好，但是在添加新时间表（新建/创建）时，它会返回以下错误：

```
tms timesheetlines tms timesheet can't be empty 
```

似乎它不知道新时间表属于哪个时间表。这是时间表中的关系：

```
has_many :tms_timesheetlines, :dependent => :destroy, :order=>"daynr ASC"
accepts_nested_attributes_for :tms_timesheetlines, :reject_if => lambda { |a| a[:daynr].blank? }, :allow_destroy => true 
```

在“新”动作中，时间表线是建立的：

```
@timesheet = TmsTimesheet.new
month_lines = Time.days_in_month(@current_period.period_nr).to_i
month_lines.times { @timesheet.tms_timesheetlines.build } 
```

任何想法为什么它在编辑时没有任何问题，但在创建时却没有？谢谢！

**更新：**

当我在每个时间表行中添加此隐藏字段时，当它是新时间表时，保存新的和编辑的时间表都有效：

```
<%= tl.hidden_field :tms_timesheet_id, :value => timesheet %> 
```

当它是一个编辑时：

```
<%= tl.hidden_field :tms_timesheet_id, :value => timesheet.id %> 
```

为什么使两者都起作用的区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T20:01:40.773

检查您的验证`:tms_timesheetlines`。我的猜测是它正在验证它的存在`timesheet`和失败。

如果是这种情况，那么它在创建时失败但传递更新的原因是因为使用嵌套表单，在验证子项（时间表）期间将不知道（存在）父项的 id，但在您更新时会存在记录。

# google-maps - 引脚标记图像 Corona SDK

> ID：10122649
> 
> 赞同：0
> 
> 时间：2012-04-12T11:29:43.523
> 
> 标签：google-maps, google-maps-markers, coronasdk

我可以在 Google 地图中插入另一张图片作为图钉吗？该项目是使用 Corona SDK (Lua) 创建的。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:03:21.190

是的，我会给你一些开始的链接

[http://blog.mridey.com/2010/03/using-markerimage-in-maps-javascript.html](http://blog.mridey.com/2010/03/using-markerimage-in-maps-javascript.html)

精灵图像中的一些标准标记：

[http://maps.gstatic.com/intl/de_ALL/mapfiles/ms2/iconm.png](http://maps.gstatic.com/intl/de_ALL/mapfiles/ms2/iconm.png)

我喜欢动态图片

[http://code.google.com/apis/chart/infographics/docs/dynamic_icons.html](http://code.google.com/apis/chart/infographics/docs/dynamic_icons.html)

# php - PHP XML 失败

> ID：10122650
> 
> 赞同：-1
> 
> 时间：2012-04-12T11:29:46.190
> 
> 标签：php, xml, url, html-table

我知道我的代码很乱，我对此很陌生，并且正在学习。

我的网站是这样的：http: [//itsalllegit.com](http://itsalllegit.com)（目前在我的家用电脑上运行并使用 tvdb api，所以有时它有点慢）。

大部分似乎都有效，目前唯一无效的是 NCIS，如下所示：http: [//itsalllegit.com/season.php](http://itsalllegit.com/season.php?sid=72108&season=1) ?sid=72108&season=1 。

我知道它很糟糕而且很长，但这是我的代码......我一直在努力解决这个问题，非常感谢您的帮助（一般来说，任何关于使它变得更好的提示也是如此）。

顺便说一句...如果我`echo $url3`想出`"(*#YR&(^#R(@$#%$&^@#%$*@#%$&^@$#&"`等等。

```
 <html>
    <head>
        <title>Saars - Homepage</title>
            <link rel="stylesheet" type="text/css" href="default.css" />
    </head> 
        <body>
            <?php

                $series_id = $_GET["sid"];
                $season_number = $_GET["season"];
                $local_path = "images/Banner/".$series_id."-Banner.jpg";
                $url1 = file_get_contents("http://thetvdb.com/api/E676DF9578EF38D7/series/".urlencode($series_id));
                $xml = simplexml_load_string($url1);
                $series_name = $xml->Series[0]->SeriesName;
                $series_rating = $xml->Series[0]->Rating;
                $series_network = $xml->Series[0]->Network;
                $series_status = $xml->Series[0]->Status;
                    echo '<img src="'.$local_path.'"><br />';
                    echo "Name: ".$series_name."<br />";
                    echo "Rating: ".$series_rating."<br />";
                    echo "Network: ".$series_network."<br />";
                    echo "Status: ".$series_status."<br />";
                    echo "<hr />";
                        echo '<table bgcolor="#000000">';
                            echo '<tr>';
                                echo '<td width="30">';
                                    echo '<font color="white">#</font>';
                                echo '</td>';
                                echo '<td width="500">';
                                    echo '<font color="white">Episode Name</font>';
                                echo "</td>\n";
                                echo '<td width="100">';
                                    echo '<font color="white">First Aired</font>';
                                echo "</td>\n";
                            echo "</tr>\n";
                        echo "</table>";
                for ($episode_number = 1; $episode_number <= 200; $episode_number++) {
                    $url2 = "http://thetvdb.com/api/E676DF9578EF38D7/series/".$series_id."/default/".urlencode($season_number)."/".urlencode($episode_number)."/en.xml";
                    $handle = @fopen($url2, 'r');
                    if ($handle === false) {
                        return;
                    } else {
                        $url3 = file_get_contents("http://thetvdb.com/api/E676DF9578EF38D7/series/".$series_id."/default/".urlencode($season_number)."/".urlencode($episode_number)."/en.xml");
                        $xml = simplexml_load_string($url3);
                        $episode_name = $xml->Episode[0]->EpisodeName;
                        $episode_rating = $xml->Episode[0]->Rating;
                        $episode_firstaired = $xml->Episode[0]->FirstAired;
                        $episode_overview = $xml->Episode[0]->Overview;
                        $column1 = '<a href="episode.php?sid='.$series_id.'&season='.$season_number.'&episode='.$episode_number.'">'.$episode_number.'</a>';
                        $column2 = '<a href="episode.php?sid='.$series_id.'&season='.$season_number.'&episode='.$episode_number.'">'.$episode_name.'</a>';
                        $column3 = '<a href="episode.php?sid='.$series_id.'&season='.$season_number.'&episode='.$episode_number.'">'.$episode_firstaired.'</a>';
                            echo '<table>';
                                echo "<tr>\n";
                                    echo '<td width="30">';
                                        echo $column1;
                                    echo "</td>\n";
                                    echo '<td width="500">';
                                        echo $column2;
                                    echo "</td>\n";
                                    echo '<td width="100">';
                                        echo $column3;
                                    echo "</td>\n";
                                echo "</tr>\n";
                            echo "</table>";
                    fclose($handle);
                    }
                }
                ?>
        </Body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:49:30.440

您打开每个 URL 两次，但只读取一次数据。服务器可能会拒绝这种行为作为猛击并在一段时间后拒绝第二个连接。尝试将循环的内容更改为：

```
// Define the URL
$url2 = "http://thetvdb.com/api/E676DF9578EF38D7/series/$series_id/default/".urlencode($season_number)."/".urlencode($episode_number)."/en.xml";

// Try and fetch the XML
// You are returning a value - are you in a function? Should you maybe break; instead?
if (!$xmlStr = file_get_contents($url2)) return FALSE;
if (!$xml = simplexml_load_string($xmlStr)) return FALSE;

// Get data
$episode_name = $xml->Episode[0]->EpisodeName;
$episode_rating = $xml->Episode[0]->Rating;
$episode_firstaired = $xml->Episode[0]->FirstAired;
$episode_overview = $xml->Episode[0]->Overview;

// Output HTML
// A single-row table per record? Maybe you should have one table with multiple rows?
$epURL = htmlspecialchars("episode.php?sid=$series_id&season=$season_number&episode=$episode_number");
echo "
<table>
  <tr>
    <td width='30'><a href='$epURL'>$episode_number</a></td>
    <td width='500'><a href='$epURL'>$episode_name</a></td>
    <td width='100'><a href='$epURL'>$episode_firstaired</a></td>
  </tr>
</table>"; 
```

如果它仍然不起作用，请尝试`$url2`在循环中回显，以查看出现错误时包含的内容。

# php - 根据另一列的值在记录集中查找列值

> ID：10122656
> 
> 赞同：0
> 
> 时间：2012-04-12T11:30:11.213
> 
> 标签：php, mysql, wordpress, lookup, recordset

我有一个 MySQL`SELECT`查询（使用`wpdb_custom->get_results()`），它返回两`UNSIGNED` `TINYINT`列`Col_1`和`Col_2`任意数量的行。在给定值为 的情况下，在 PHP 中`Col_2`从**记录**集中查找 的值的成本最低的方法是`Col_1`什么？

```
Emp_ID  Col_1    Col_2
120         3       11
120         5       17
120         6        8
120         8       13
120        11       10 
```

例如，伪代码查找函数`lookup(6, $recordset)`将产生`8`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:19:12.280

取决于你打算做什么，更重要的是多久做一次。

您可以在同一张表上使用 MySQL-JOIN 来完成。或者您创建一个哈希并比较数据集。或者你使用 array_search()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:58:44.450

假设您的数组记录集看起来像这样：

```
Array
(
    [0] => Array
        (
            [Emp_ID] => 120
            [Col_1] => 3
            [Col_2] => 11
        )

    [1] => Array
        (
            [Emp_ID] => 120
            [Col_1] => 5
            [Col_2] => 17
        )

    [2] => Array
        (
            [Emp_ID] => 120
            [Col_1] => 6
            [Col_2] => 8
        )
    ....
) 
```

现在为每页创建一次搜索数组。

```
$search_array =array();
foreach( $recordSet as $key=>$data ){

        $search_array[$data['Col_1']]=$data['Col_2'];   
} 
```

然后每次您需要从 Col_1 中找到 Col_2 的值时，只需使用：

```
echo $search_array[6]; // will return 8 
```

对于使用相同搜索数组的其他方式，请使用 array_search()

```
echo  array_search("8",$search_array); // will return 6 
```

# search - Facebook Graph API 用户搜索

> ID：10122658
> 
> 赞同：4
> 
> 时间：2012-04-12T11:30:13.953
> 
> 标签：search, facebook-graph-api

在搜索 API 中，我需要获取 facebook.com 等用户详细信息。如果我使用[Graph API](http://en.wikipedia.org/wiki/Facebook_Platform#Graph_API)获取搜索详细信息，则详细信息完全不同。

例如，在我的朋友列表中搜索一个人时，他/她的详细信息将首先显示。但是使用 Graph API，我得到了那些无序的细节。

示例网址：[https ://graph.facebook.com/search?q=SEARCHNAME&type=user](https://graph.facebook.com/search?q=SEARCHNAME&type=user)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:04:49.480

差异的原因是因为 Facebook 正在为您定制结果，并且当您通过您的帐户进行搜索时，它更喜欢您的朋友而不是陌生人。当您搜索未识别的 Facebook 图形 API 时，它不能做同样的事情。

# php - CodeIgniter 扩展文件导致 http 500

> ID：10122662
> 
> 赞同：0
> 
> 时间：2012-04-12T11:30:32.680
> 
> 标签：php, apache, codeigniter

如果我在文件下面扩展**或者**只是在 autoload.php 中自动加载它，我得到的只是 http 500，有时是空输出。MYControllerInterface.php 位于 application/libraries 下。

我已经将整个目录（递归）修改为 0777。我在根目录中创建了一个带有 RewriteEngine On 和 Off 的 .htaccess。

我已经在 MYcontrollerInterface 中注释掉了从 { 到 } 的所有内容...

我试过去掉结尾？>

我已经检查了在 php 配置中启用了 mod_rewrite ......这太神秘了！

```
<?php 
class MYcontrollerInterface extends CI_Controller {
    public function __construct() {
        parent::__construct();
        //$this->load->helper('url');
    }   

    function build_page($main_content_view, $data) {
        /*
        $this->load->view('header', $data);    
        //$this->load->view('content', $data);      
        //$this->load->view($main_content_view, $data, true);
        $this->load->view('footer', $data);   
        */      
        echo 'apa';
    }   
}

/* End of file MycontrollerInterface.php */
/* Location: ./application/controllers/MYcontrollerInterface.php */
?> 
```

应用程序/日志/log-2012-04-12.php：

```
DEBUG - 2012-04-12 13:21:22 --> Config Class Initialized
DEBUG - 2012-04-12 13:21:22 --> Hooks Class Initialized
DEBUG - 2012-04-12 13:21:22 --> Utf8 Class Initialized
DEBUG - 2012-04-12 13:21:22 --> UTF-8 Support Enabled
DEBUG - 2012-04-12 13:21:22 --> URI Class Initialized
DEBUG - 2012-04-12 13:21:22 --> Router Class Initialized
DEBUG - 2012-04-12 13:21:22 --> Output Class Initialized
DEBUG - 2012-04-12 13:21:22 --> Security Class Initialized
DEBUG - 2012-04-12 13:21:22 --> Input Class Initialized 
```

下面不断重复：

```
DEBUG - 2012-04-12 13:21:22 --> Global POST and COOKIE data sanitized
DEBUG - 2012-04-12 13:21:22 --> Language Class Initialized
DEBUG - 2012-04-12 13:21:22 --> Loader Class Initialized
DEBUG - 2012-04-12 13:21:22 --> Controller Class Initialized
DEBUG - 2012-04-12 13:21:22 --> Final output sent to browser
DEBUG - 2012-04-12 13:21:22 --> Total execution time: 0.0320
DEBUG - 2012-04-12 13:21:38 --> Config Class Initialized
DEBUG - 2012-04-12 13:21:38 --> Hooks Class Initialized
DEBUG - 2012-04-12 13:21:38 --> Utf8 Class Initialized
DEBUG - 2012-04-12 13:21:38 --> UTF-8 Support Enabled
DEBUG - 2012-04-12 13:21:38 --> URI Class Initialized
DEBUG - 2012-04-12 13:21:38 --> Router Class Initialized
DEBUG - 2012-04-12 13:21:38 --> Output Class Initialized
DEBUG - 2012-04-12 13:21:38 --> Security Class Initialized
DEBUG - 2012-04-12 13:21:38 --> Input Class Initialized 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:43:08.310

如果你要扩展一个控制器（它是一个核心类），它需要进入 /application/core.

还要检查你的前缀，CI2 标准是 MY_ （检查你的 $config['subclass_prefix'] 在第 109 行）。

***更新***扩展控制器必须称为 MY_Controller （根据加载程序类）。

然后你会像...一样使用它

```
class foo extends MY_Controller {
    function __construct() {
        parent::construct();
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-12T11:38:26.880

您可以将此文件放在文件`system/libraries`夹中并尝试扩展它。

# c# - Foreach 等待任务完成

> ID：10122669
> 
> 赞同：0
> 
> 时间：2012-04-12T11:30:51.320
> 
> 标签：c#, foreach, task-parallel-library

我有这样的情况：

```
 foreach (var item in listBoxFileNames.SelectedItems)
        {
            MessageBox.Show("I am not waiting");
            CancellationTokenSource tokenSourcve = new CancellationTokenSource();
            CancellationToken token = tokenSourcve.Token;

            Task task1 = new Task(() =>
                {
                    ProcessDatas(); // method
                }
                , token);

            task1.Start();
        } 
```

我想让 foreach 等待任务完成。但它不是在等待。它在每个messagBox 之后立即向我显示MessageBox。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T11:34:04.853

是的，您正在*启动*任务，然后将在后台执行。如果您希望循环完全同步地运行，则`ProcessDatas()`根本不在任务中调用。您*可以*启动它，然后等待它完成 - 但尚不清楚这会给您带来什么好处。

如果您想并行*启动*所有任务，但之后等待它们，您可以创建一个`List<Task>`然后调用[`Task.WaitAll`](http://msdn.microsoft.com/en-us/library/dd235659.aspx)- 或者只是使用`Parallel.ForEach`开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:38:18.537

你不能做一个 Bool ，一旦任务完成就变成真的，然后把剩下的放在一个 if (bool) 循环中吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T11:33:29.913

Afaik 你可以调用[Task.Wait()](http://msdn.microsoft.com/en-us/library/dd235606.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T11:33:36.990

尝试使用此代码

```
task1.Wait(); 
```

并阅读此[任务](http://msdn.microsoft.com/en-en/library/system.threading.tasks.task.aspx)

# cmis - 用于文件的 Nuxeo Http 链接

> ID：10122672
> 
> 赞同：1
> 
> 时间：2012-04-12T11:31:00.643
> 
> 标签：cmis, apache-chemistry, nuxeo, dam

我想知道在 nuxeo 或任何其他 CMIS 兼容存储库中是否有一种方法，通过它我可以获得存储在其上的文件的直接 URL，例如，如果我有一个名为 a.jpg 的文件存储在 nuxeo 服务器上，我怎样才能获得该文件的直接 URL，我可以使用该 URL 从网站链接到该文件或直接通过 Internet 访问而无需身份验证或类似的东西。我只是想拥有一个指向存储在存储库中的文件的 URL。

也许我不知道是否可以通过CMIS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:41:55.850

我找不到直接的 http 链接，但我执行了以下操作，我实现了一个使用 Apache Chemistry 的文档方法 getContentStream 的 servlet，并将该输入流写入 servlet 的响应。

# sql - 在一个 sql 查询中区分、计数和排序

> ID：10122674
> 
> 赞同：5
> 
> 时间：2012-04-12T11:31:18.437
> 
> 标签：sql, postgresql, sql-order-by, aggregate-functions

这是我关于stackoverflow的第一个问题，欢迎大家。

我有一张桌子：

```
id   fk_user
1      1
2      1
3      3
4      2
5      3 
```

我想准备一个 SQL 查询女巫返回`fk_user`按该表中出现的次数排序。例如：

`fk_user 1`出现 3 次，所以它将是第一个。
`fk_user 2`发生一次，所以它将是最后一次。
`fk_user 3`发生两次，所以它将是第二次。

该查询的结果应该是：

```
fk_user
1
3
2 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T11:33:31.477

```
select fk_user from 
xxx
group by fk_user
order by count(*) desc 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T11:34:37.457

试试这个

```
SELECT fk_user FROM your_table
GROUP BY fk_user 
ORDER BY COUNT(*) DESC 
```

# file-sharing - 带有命令行客户端的免费文件共享服务（Windows、Linux）

> ID：10122677
> 
> 赞同：0
> 
> 时间：2012-04-12T11:31:28.817
> 
> 标签：file-sharing

我需要一个免费的文件共享服务，它提供：

1.  命令行驱动的客户端实用程序，用于上传/下载/同步文件。
2.  Windows 和 Linux 客户端。
3.  未授权用户的只读访问，即对部分/所有文件的免费公共访问。
4.  每个上传的文件都应该有自己的链接，并且可以通过这个链接通过 HTTP 访问。
5.  （可选）支持文件版本控制。
6.  1Gb 或更多空间。

你知道任何？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-15T13:16:45.200

kliplink.com

您可以使用 Linux 实用程序发布：

./kl post -f

这会给你一个别名，然后得到它：

./kl 得到 -a

文件限制为每天 5 个，每个最多 10MB。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-17T23:39:44.543

你应该使用[https://github.com/](https://github.com/)

# c# - 为什么 AppFabric 中恢复暂停的工作流会出错？

> ID：10122679
> 
> 赞同：1
> 
> 时间：2012-04-12T11:31:41.697
> 
> 标签：c#, workflow-foundation-4, appfabric

我正在使用 Windows Server AppFabric 运行几个 WF 4 服务。有时，工作流中发生未处理的异常并被放弃（如果对未处理异常的操作设置为“放弃”）或暂停（如果操作设置为“放弃并暂停”）。

在“放弃”的情况下，工作流在异常发生后仍处于“运行（活动）”状态，我希望 AppFabric WorkflowManagementService 能够从其最后一个持久点自动继续工作流。

在“放弃和暂停”的情况下，我希望能够通过 AppFabric 仪表板手动恢复工作流程。

在任何一种情况下，这都不会发生，但我在 AppFabric 仪表板和 Windows 事件查看器（Windows -> 应用程序服务器-系统服务 -> 管理员）中收到各种错误和警告消息：

错误：

> 无法在“net.pipe://jon-hp/Afis.Workflow/ServiceManagement.svc”调用服务管理端点以激活服务“/Afis.Workflow/ATP.xamlx”。\rException: '打开操作未完成在 00:01:00 分配的超时时间内。分配给此操作的时间可能是较长超时的一部分。

错误：

> 无法通过控制端点 net.pipe://jon-hp/Afis.Workflow/ATP.xamlx/System.ServiceModel.Activities_IWorkflowInstanceManagement 恢复实例 d626005a-63bd-4ab1-8192-62616755015c。\rException: System.TimeoutException: 打开操作未在分配的 00:01:00 超时时间内完成。分配给此操作的时间可能是较长超时的一部分。内部异常：System.TimeoutException：管道连接被中止，因为从管道的异步读取未在分配的超时 00:00:59.9989999 内完成。分配给此操作的时间可能是较长超时的一部分。内部异常：System.IO.PipeException：操作无法完成，因为管道已关闭。这可能是由于管道另一端的应用程序退出造成的。

警告（每 20 分钟一次）

> WMS 无法激活任何主机 - 退出。存储名称“defaultSqlPersistenceStore”（“根”）。

Net.pipe 已为我的网站和应用程序启用，我可以看到 IIS 管理器 -> 端点 -> 删除过滤器 (System.ServiceModel.Activities.IWorkflowInstanceManagement) 中列出的管理端点。

我的应用程序端点正在运行带有传输安全性和 Windows 身份验证的 net.tcp。

这个线程似乎是相关的，但我没有设法解决我的问题： [http ://social.msdn.microsoft.com/Forums/en/dublin/thread/e1705e89-34cc-4526-b11e-9d67d66c403d](http://social.msdn.microsoft.com/Forums/en/dublin/thread/e1705e89-34cc-4526-b11e-9d67d66c403d)

编辑 1：我的场景涉及客户端调用工作流 A，它进行一些处理，然后持续并返回。然后工作流 A 调用工作流 B，工作流 B 立即抛出异常。工作流 A 没有捕捉到这一点，并被放弃，但仍从其最后一个持久点运行（活动）。工作流 B 也被放弃但尚未持久化，因此状态为 Running (Idle)，等待来自工作流 A 的消息。

然后我希望工作流 A 自动恢复并再次调用工作流 B，但这不会发生。

编辑 2：我在事件日志中得到的错误类型似乎不一致。在期间，我没有收到任何错误，但我也看到了以下错误（除了上述错误）：

`Failed to Resume instance 032274d1-b6e6-4163-a33a-73bffc8da2cc via control endpoint net.pipe://jon-hp/Afis.Workflow/ATP.xamlx/System.ServiceModel.Activities_IWorkflowInstanceManagement.\rException: System.ServiceModel.FaultException: The execution of an InstancePersistenceCommand was interrupted because the instance '032274d1-b6e6-4163-a33a-73bffc8da2cc' has not yet been persisted to the instance store..`

`Failed to Resume instance d2b19a41-985e-4dc4-8fd1-955df2cde243 via control endpoint net.pipe://jon-hp/Afis.Workflow/Import.xamlx/System.ServiceModel.Activities_IWorkflowInstanceManagement.\rException: System.ServiceModel.FaultException: The execution of the InstancePersistenceCommand named {urn:schemas-microsoft-com:System.Activities.Persistence/command}LoadWorkflow was interrupted by an error..`

`Failed to invoke service management endpoint at 'net.pipe://jon-hp/Afis.Workflow/ServiceManagement.svc' to activate service '/Afis.Workflow/ATP.xamlx'.\rException: 'There was an error reading from the pipe: Unrecognized error 109 (0x6d).'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:48:13.677

您是否通过任何更改对工作流定义进行了更改？如果是这样 WF4 无法处理，则该功能将添加到 WF4.5。

此外，我会在服务器上启用 WCF 跟踪，以查看您是否获得更多详细信息。很多时候，真正的原始异常会被记录下来，但不会传播到客户端。

# c# - Writing to xml using datasets without overwriting existing data

> ID：10122681
> 
> 赞同：0
> 
> 时间：2012-04-12T11:31:47.437
> 
> 标签：c#, xml, dataset

I'm using a DataSet to represent the settings I have in my project. More or less the code is as follows:

```
if (!ValidateSettings(SettingsPath)) //returns false if the settingsfile doesn't consist with the DataSet
{
  dsSettings defaultSettings = new dsSettings();
  defaultSettings.ReadXml("settingsTemplate.xml", IgnoreSchema);
  dsSettings.WriteXml(SettingsFilePath);
} 
```

If I run this code it will copy all values in the template file and write those to the SettingsFilePath file (overwriting the content in that file).

However, in the future, let's say that I add a setting to the DataSet. Then I want the old settings (maybe edited by the user) to remain and only add the missing setting in the xml file from the template file.

Can this be done with some option or something to the WriteXml function or anything as simple as that. Or will I have to read the existing settings file and save each value, write the xml and the overwrite with those saved values?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:47:51.937

Every time you call WriteXML the XML created in one block of Valid XML data. In the sense it will contain one root element. So another call means another XML block, if we keep both together we get an invalid XML document since there won't be a root node. That is why you can not acheive what you want that very simply.

Having said that you can try a workaround:

1.  Save as many files as you want in a designated folder. Then read them all into datatables and merge them together into one datatable.

2.  Create your own single XML file. To do this, use WriteXML method to write the XML to a StringWriter. Merge such XML blocks into one XML Block by creating your own root level node then write them to disk. Similarly while readig first read the file extract the XML Blocks from within the root node and then use ReadXML to read from stream.

# cakephp - 引导程序中的 Cakephp ClassRegistry::init

> ID：10122682
> 
> 赞同：6
> 
> 时间：2012-04-12T11:31:53.210
> 
> 标签：cakephp, cakephp-2.1, bootstrapping

我可以使用 bootstrap.php 中的模型从数据库中获取带有 find() 的数组吗？

像这样 ：

```
$Setting = ClassRegistry::init('Setting');
$Settings = $Setting->find('all'); 
```

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T12:36:54.627

如果你真的必须这么早使用核心内部的东西，那么你需要手动加载使用过的类。

尝试

```
App::uses('ClassRegistry', 'Utility'); 
```

在您实际使用 ClassRegistry 之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-27T06:07:26.960

写入 bootstrap.php

```
App::uses('ClassRegistry', 'Utility');
$Setting = ClassRegistry::init('ModelName'); 
```

# c# - C# 使航空玻璃形成 MDI 导致奇怪的背景颜色

> ID：10122687
> 
> 赞同：1
> 
> 时间：2012-04-12T11:32:07.013
> 
> 标签：c#, background-color, mdi, aero, aero-glass

我有一个启用航空玻璃的全屏表单，它工作正常，直到我将“IsMdiContainer”设置为“true”。表格仍然具有航空效果，但其背后的一切都以疯狂的亮度显示。

这是一张用于澄清的图片，下图禁用了“IsMdiContainer”，启用了上图：http: [//img521.imageshack.us/img521/4981/aeroproblem.jpg](http://img521.imageshack.us/img521/4981/aeroproblem.jpg)

为什么会发生这种情况，我该怎么办？

# javascript - tagit : 通过 ajax 将标签创建限制在给定的列表中

> ID：10122692
> 
> 赞同：5
> 
> 时间：2012-04-12T11:32:18.357
> 
> 标签：javascript, jquery, jquery-ui, tag-it

我正在使用 jquery ui 插件进行标记：

[https://github.com/aehlke/tag-it](https://github.com/aehlke/tag-it)

我有几个问题：

1.  当用户从列表中选择时，我想保存该标签的 id 和值。

2.  仅从 AJAX 调用返回的列表中创建标签

    ```
    $(function() {
      $('#tags').tagit({tagSource:function( request, response ) {
    $.ajax({
    type:"GET",
    url: "http://some_link",
    dataType: "jsonp",
    data:{
        term:request.term,
        }, 
        success: function( data ) {
            response( $.map( data, function( item ) {
                return {
                    label: item.label,
                    value: item.value,
                    id:item.id
                };  
            }));
        }   
        });
    }
    , triggerKeys: ['enter', 'comma', 'tab']});
    }); 
    ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T10:40:53.063

在回答您的第二个问题时，Chris Leishman 的 Tag-It 存储库分支包含一个新属性`requireAutocomplete` ，该属性仅允许将自动完成列表中的项目用作标签。

你可以在这里找到他的拉取请求：[https ://github.com/aehlke/tag-it/pull/37](https://github.com/aehlke/tag-it/pull/37)

从以下网址下载此版本的 JS 文件：[https ://github.com/chrisleishman/tag-it](https://github.com/chrisleishman/tag-it)

并像使用普通属性一样使用它：

```
$(selector).tagit({
        requireAutocomplete: true,
        tagSource: [...]
}); 
```

至于您的第一个问题，我自己正在解决这个问题，所以当我找到解决方案时，我会更新我的答案。

我在第 271 行对我自己的本地 TagIt.js 进行了修改：

```
var tag = that.createTag(ui.item.value); 
```

到

```
var tag = that.createTag(ui.item.label); 
```

它解决了在从自动完成列表中选择一个选项后显示项目 ID 而不是标签的问题。

**更新**

以下是有关如何保存每个标签的 ID 的一些信息。

我做的第一件事是覆盖该`createTag`方法以包含一个 labelName 参数（如果需要，您可以修改原始的，我只是更喜欢覆盖它）。

```
$.ui.tagit.prototype.createTag = function (labelName, value, additionalClass) {
 // The origional code from createTag here
} 
```

以与修剪当前值参数相同的方式修剪 labelName：

```
value = $.trim(value);
labelName = $.trim(labelName) 
```

更改标签变量以使用新的标签名称：

```
 var label = $(this.options.onTagClicked ? 
      '<a class="tagit-label"></a>' :
      '<span class="tagit-label"></span>').text(labelName); 
```

在原始源代码的自动完成部分中，我更改了对 createTag 的调用以包含新标签：

```
var tag = that.createTag(ui.item.label, ui.item.value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:08:36.807

此解决方案用于处理多个值和问题的答案：

当用户从列表中选择时，我想保存该标签的 id 和值。

它受到上述解决方案的启发（因此您需要阅读 :- )）：

```
var tag = that.createTag(ui.item); // since ui.item will have everything, label, value, id and other things 
```

然后在 createTag 函数中

```
var item = value;
value = item.value;
...
 var tag = $('<li></li>')
            .data('tag_item_data',item)// add this line
            .addClass('tagit-choice ui-widget-content ui-state-default ui-corner-all')
            .addClass(additionalClass)
            .append(label); 
```

现在要检索标签，只需创建一个函数

```
 assignedTagsData : function(){
         // Only to be used when singleField option is not seletced
        var tags = [];

         this.tagList.children('.tagit-choice').each(function() {
                tags.push($(this).data('tag_item_data') );
            });
         return tags;

    } 
```

# mysql - 使用带有 MySQL 链接服务器的 openquery 宽 varchar 字段导致“不支持请求的转换”错误

> ID：10122693
> 
> 赞同：2
> 
> 时间：2012-04-12T11:32:21.213
> 
> 标签：mysql, sql, sql-server, odbc, openquery

我正在尝试使用将表从 MySql 迁移到 MSSQL，`openquery`但我不断收到以下错误消息：

```
OLE DB provider "MSDASQL" for linked server "MYSQL" returned message "Requested conversion is not supported.".
Msg 7341, Level 16, State 2, Line 1
Cannot get the current row value of column "[MSDASQL].description" from OLE DB provider "MSDASQL" for linked server "MYSQL". 
```

我试图运行的 SQL 查询：

```
insert into dbo.tickets (id, description, createdAt)
select * from openquery(MYSQL, 'select * from mydb.tickets') 
```

我`openquery`已经复制了几张桌子，但这一张欺骗了我。

在数据库的两侧，该`description`字段是`varchar(8000)`. 在 MySql 中没有描述为空的行，最长的描述只有 5031 个字符。

我尝试在 MySql 中创建一个具有相同数据结构的新视图，但得到了相同的错误。我无法确定哪一行的描述字段无效，因为该表包含超过 65000 行。

我还尝试将数据转储到 SQL 文件中，但我进入`OutOfMemoryException`了 Management Studio。转储的 sql 文件本身约为 60 MB。

迁移此数据的任何建议或其他方式？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-06T14:38:21.297

在我的测试中，我发现添加`CAST(field as char(4000))`也解决了这个问题。

我在 MySQL 5.1 数据库中创建了以下内容：

```
create table tmp_patrick (summary_text varchar(4096));
insert into tmp_patrick values ('foo'); 
```

当我在 SQL Server 2008 R2 SP1 (10.50.2500) 上执行以下操作时，使用 MySQL ODBC 驱动程序 64 位，版本 5.1 或 5.2w：

```
select * from openquery(MYSQL, 'select summary_text from scratch.tmp_patrick') 
```

它会产生错误：

```
OLE DB provider "MSDASQL" for linked server "MYSQL" returned message "Requested conversion is not supported.".
Msg 7341, Level 16, State 2, Line 1
Cannot get the current row value of column "[MSDASQL].summary_text" from OLE DB provider "MSDASQL" for linked server "MYSQL". 
```

但如果我添加`CAST`：

```
select * from openquery(MYSQL, 'select CAST(summary_text as char(4000)) from scratch.tmp_patrick') 
```

然后它工作。转换为 char(4001) 将失败。

我不清楚 4000 个字符的限制来自哪里。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T12:13:59.243

我设法通过将数据类型更改为`TEXT`MySql 和 MSSQL 端来解决此问题。

# asp.net - 下拉列表重置 SelectedValue

> ID：10122696
> 
> 赞同：6
> 
> 时间：2012-04-12T11:32:34.363
> 
> 标签：asp.net, drop-down-menu, selectedvalue

我有一个连接到 ObjectDataSource 的 DropDownList。在我的页面加载中，我根据情况将 selectedvalue 设置为特定值。如何在我的方法 selectedindexchanged 中“重置” selectedvalue 以便您仍然可以从其他选项中进行选择？还是我不应该使用 selectedvalue 来设置下拉列表的默认值？

```
 <asp:DropDownList ID="DropDownList" runat="server" DataSourceID="ObjectDataSource" DataTextField="Type" DataValueField="TypeId" 
    AutoPostBack="true" onselectedindexchanged="DropDownList_SelectedIndexChanged" >
            </asp:DropDownList>

protected void Page_Load(object sender, EventArgs e)
{
        int default = category.TypeId;
        DropDownList.SelectedIndex = default;

}

protected void DropDownList_SelectedIndexChanged(object sender, EventArgs e)
{

    int id = int.Parse(DropDownList.SelectedValue);
    Session["id"] = id;
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-12T12:20:44.630

您可以对下拉列表使用 ClearSelection 方法

```
DropDownList.ClearSelection(); 
```

谢谢

迪普

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T11:36:57.160

`DataBind`您应该只`DropDownList`设置其默认值`if(!IsPostBack)`：

```
protected void Page_Load(Object sender, EventArgs e)
{
    if(!IsPostBack)
    {
        int default = category.TypeId;
        DropDownList.SelectedValue = default.ToString();
    }
} 
```

[`Page.IsPostBack`财产](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T12:06:47.557

将 SelectedValue 属性设置为空字符串：

```
DropDownList.SelectedValue = string.Empty; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-26T13:22:45.873

您可以将 SelectedIndex 设置为 -1

```
DropDownList.SelectedIndex = -1; 
```

# .htaccess - 301 htaccess 重定向除现有页面之外的所有内容

> ID：10122698
> 
> 赞同：0
> 
> 时间：2012-04-12T11:32:42.037
> 
> 标签：.htaccess, redirect, forward

我想在同一台服务器上从 http 移动到 https。所有页面、文件等都需要转发到 https，除了使用 iFrame 嵌入多个网站的四个页面外，所有页面都需要转发到 https。由于 https 不能包含在 a 中`iframe`，我想保留这些但添加其他所有内容。

我现在正在玩 htaccess 一个多小时，但没有成功。最新试用版如下。但在这个例子中，我需要自己写下文件。我想将`http`服务器上不再存在的所有内容转发到`https`服务器，其余部分保持原样。

```
RewriteCond %{HTTPS} = off
RewriteCond $1 !^(inschrijven-frame|inschrijven-frame2)\.php$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ https://www.url.nl/$1 [R=301,L] 
```

需要做的是：

1.  如果文件在 http 打开它。
2.  如果文件不在 http 上，则转到 https，因此[http://www.url.com/test.php](http://www.url.com/test.php)自动变为[https://www.urlcom/test.php](https://www.urlcom/test.php)
3.  在 2 上找不到的页面，应在 https 上转发到主域

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:30:58.023

我想我解决了。这个可以吗？

```
RewriteEngine on
RewriteBase /

RewriteCond %{SERVER_PORT} 443
RewriteRule ^(page1|page2|test1|test2)\.php$1 [R,L]

RewriteCond %{SERVER_PORT} 80
RewriteCond %{REQUEST_URI} !^/ipage
RewriteCond %{REQUEST_URI} !^/test
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

@LazyOne 如果您发布答案，我可以接受。

# .net - 级联删除以哪种方式进行一对多关系？

> ID：10122699
> 
> 赞同：13
> 
> 时间：2012-04-12T11:32:43.403
> 
> 标签：.net, entity-framework, cascading-deletes

使用实体框架代码优先方法。

假设我有两个实体类：

```
[Table("Objects")]
public class DbObject : IValidatableObject
{
    public long Id { get; set; }

    public string Name { get; set; }
    public string Description { get; set; }

    public virtual ICollection<DbObjectProperty> Properties { get; set; }
}

[Table("ObjectProperties")]
public class DbObjectProperty
{
    public long Id { get; set; }

    public string Name { get; set; }
    public string Value { get; set; }

    [Display(Name = "Object"), UIHint("Object")]
    public long ObjectId { get; set; }
    public virtual DbObject Object { get; set; }
} 
```

这里要注意的点：

*   `DbObject`只有一个导航属性，但没有带有外键的列
*   `DbObjectProperty`有一个导航属性*和*一个带有外键的对应列
*   很明显，如果我删除一个对象，我希望它的属性随之而来，但如果我删除一个属性，我不希望整个对象消失。

在`OnModelCreating`DB 上下文的方法中，到目前为止，我有以下定义关系：

```
modelBuilder.Entity<DbObjectProperty>()
    .HasRequired(op => op.Object)
    .WithMany(obj => obj.Properties)
    .HasForeignKey(op => op.ObjectId)
    .WillCascadeOnDelete(false); 
```

当然，这意味着不会发生级联删除。我的问题是：如果我将其更改为`true`，那是否符合我的要求？请记住，如果我删除一个对象，我希望它的属性随之而来，但如果我删除一个属性，我不希望整个对象消失。

此更改的自动生成的迁移代码（从`false`到`true`）是这样的：

```
DropForeignKey("ObjectProperties", "ObjectId", "Objects");
DropIndex("ObjectProperties", new[] { "ObjectId" });
AddForeignKey("ObjectProperties", "ObjectId", "Objects", "Id", cascadeDelete: true);
CreateIndex("ObjectProperties", "ObjectId"); 
```

我担心这似乎意味着删除一个属性会删除它的关联对象。会吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T12:59:15.790

数据库中关系的级联删除方向由该关系的主体（主/唯一键的表）和从属（外键的表）定义。

然后，如果您删除主体，所有具有与该主体的主/唯一键值相对应的外键值的依赖项也会被删除。从依赖到主体的方向没有级联删除。

在您的情况下，主体是`DbObject`，依赖是`DbObjectProperty`因为它是具有外键的实体/表。

反过来进行级联删除几乎没有意义 - 特别是在 x 对多关系中：如果删除依赖项 ( `DbObjectProperty`) 并且主体 ( `DbObject`) 将被自动删除，如果存在外键约束将被违反是指将要删除的主体的任何其他依赖项。

你不必担心。

# matlab - 将具有 inf 值的单元格替换为 1

> ID：10122700
> 
> 赞同：0
> 
> 时间：2012-04-12T11:32:57.997
> 
> 标签：matlab

鉴于以下

第 1 至 17 列

```
 0.3108    0.7273       Inf    0.2878   -0.0947    0.1286   -0.3108    0.5634    0.2822    0.2362   -0.2628    0.0960   -0.1675   -0.0934   -0.1710   -0.3077   -0.2726

Columns 18 through 20

   -0.0630   -0.5097    0.1823 
```

如何将 inf 值替换为 1。我知道如何使用循环来做到这一点，但有没有办法做到这一点？

如果想用另一个名称保存它怎么办？即数据保持不变 data1=data 除了 inf 被替换为 1？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T11:35:09.120

使用[isinf](http://www.mathworks.co.uk/help/techdoc/ref/isinf.html)检测 Inf，并将输出用作数组的[逻辑索引：](http://blogs.mathworks.com/steve/2008/01/28/logical-indexing)

```
data(isinf(data)) = 1; 
```

# delphi - 如何获取使用 CCR EXIF 拍摄图像的日期/时间？

> ID：10122707
> 
> 赞同：4
> 
> 时间：2012-04-12T11:33:19.187
> 
> 标签：delphi, exif

使用 CCR EXIF [http://delphihaven.wordpress.com/ccr-exif/](http://delphihaven.wordpress.com/ccr-exif/) 如何获取拍摄图像的时间？

（我愿意使用其他东西，只要我可以使用 Delphi，但每个人都说 CCR EXIF 是最好的；我只是在稀疏文档中找不到这个）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T11:50:41.437

尝试使用它（请注意，我没有对此进行测试，只是[`DateTimeOriginal`](http://www.awaresystems.be/imaging/tiff/tifftags/privateifd/exif/datetimeoriginal.html)根据返回属性的内容验证了标签`DateTimeOriginal`并且它们匹配）。

```
uses
  CCR.Exif;

procedure ShowDateTimeOriginal(const FileName: string);
var
  ExifData: TExifData;
begin
  ExifData := TExifData.Create;
  try
    ExifData.LoadFromGraphic(FileName);
    ShowMessage(DateTimeToStr(ExifData.DateTimeOriginal));
  finally
    ExifData.Free;
  end;
end; 
```

# osgi - iPOJO 和服务阻尼

> ID：10122708
> 
> 赞同：0
> 
> 时间：2012-04-12T11:33:23.317
> 
> 标签：osgi, ipojo, blueprint-osgi

[iPOJO 的比较表显示](http://felix.apache.org/site/ipojo-faq.html#iPOJOFAQ-HowdoesiPOJOcomparetoDeclarativeServicesorBlueprint%253F)它支持服务阻尼，就像 Blueprint 一样。这是否只是指[时间依赖关系](http://felix.apache.org/site/temporal-service-dependency.html)或其他服务依赖关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:28:52.837

目前，只有时间依赖项支持阻尼。但是，时间依赖关系只是常规（可选）依赖关系，因此它不会发生太大变化。

此外，计划将“时间”方面直接集成到核心中。

# android - 流媒体长度

> ID：10122712
> 
> 赞同：0
> 
> 时间：2012-04-12T11:33:30.750
> 
> 标签：android, media-player, android-mediaplayer, live-streaming

我想从 url 播放媒体文件 (mp3)。而且我想得到那个mp3文件的长度。我成功播放文件，但我也想显示 SeekBar。为此，我需要知道媒体文件的长度（以秒为单位）。

我怎样才能做到这一点？

我找到了一种方法，但使用它我认为它不会在几秒钟内给我长度。

```
 URLConnection cn = new URL(mediaUrl).openConnection();
 cn.connect();
 int length =  cn.getContentLength(); 
```

我认为它返回字节。那么我可以将其转换为秒吗？或者任何人知道其他方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:59:49.903

您发布的代码是从 URL 中提取任何数据所需要的。

实际上，您可能正在从中提取 MP3 文件，`url`但`getContentLength()`您正在调用的是对该`URLConnection`对象的操作 - 它返回的是您正在下载的文件的**大小**（字节、千字节、兆字节）。

如果您想检查 MP3 的播放时间，您将不得不将数据压缩到一个有效的媒体对象中，然后该对象应该有它自己的访问器，例如`getDuration()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:50:54.107

查看 getHeaderFields() 方法，然后检查是否有包含长度的响应标头。如果没有，您可以获取内容，从流中读取 mp3 元数据并计算 kbps。一旦你有了它，你可以使用以字节为单位的长度来获取时间长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T11:58:35.193

媒体流开始后，您可以使用`mediaplayer.getDuration`获取媒体文件的总持续时间。然后可以在可运行文件中使用此值来定期更新您的搜索栏。

# mono - 使用自定义 Mono 安装前缀安装 MonoDevelop

> ID：10122714
> 
> 赞同：1
> 
> 时间：2012-04-12T11:33:33.103
> 
> 标签：mono, makefile, monodevelop, automake

我已经从源代码编译了单声道并安装了`--prefix=/opt/mono-2.8.2`.

现在我想用这个当前的单声道安装单声道开发。我见过`./configure --help`monodevelop。但是没有找到任何可以设置单声道安装路径的开关。

我的问题是安装mono时如何安装monodevelop`/opt/mono-2.8.2`

**更新1：**

在检查了一些`./configure`命令文档后，我认为我必须将`PKG_CONFIG_PATH`全局变量更改为路径，以便它包含我的自定义单声道安装目录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T17:20:18.473

每当我用单声道构建任何东西时，我都会设置 PATH LD_LIBRARY_PATH 和 PKG_CONFIG_PATH。

```
export PATH=/opt/mono-2.8.2/bin:$PATH
export LD_LIBRARY_PATH=/opt/mono-2.8.2/lib:$LD_LIBRARY_PATH
export PKG_CONFIG_PATH=/opt/mono-2.8.2/lib/pkgconfig:$PKG_CONFIG_PATH

./configure --prefix=/opt/mono-2.8.2
make
make install 
```

# java - Java 创建损坏的 ZIP 文件

> ID：10122716
> 
> 赞同：3
> 
> 时间：2012-04-12T11:33:37.473
> 
> 标签：java, file, zip

我正在使用[zt-zip](https://github.com/zeroturnaround/zt-zip) by zeroturnaround，当我压缩它并尝试打开它时，它说它已损坏。有任何想法吗？ `ZipUtil.pack(new File("C:\\Users\\David"), new File(zipName));` [http://pastie.org/3773634](http://pastie.org/3773634)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:40:48.467

要制作 Zip 文件，您可以直接使用以下 java 类

导入 java.util.zip.ZipFile；

```
// These are the files to include in the ZIP file
String[] filenames = new String[]{"filename1", "filename2"};

// Create a buffer for reading the files
byte[] buf = new byte[1024];

try {
    // Create the ZIP file
    String outFilename = "outfile.zip";
    ZipOutputStream out = new ZipOutputStream(new FileOutputStream(outFilename));

    // Compress the files
    for (int i=0; i<filenames.length; i++) {
        FileInputStream in = new FileInputStream(filenames[i]);

        // Add ZIP entry to output stream.
        out.putNextEntry(new ZipEntry(filenames[i]));

        // Transfer bytes from the file to the ZIP file
        int len;
        while ((len = in.read(buf)) > 0) {
            out.write(buf, 0, len);
        }

        // Complete the entry
        out.closeEntry();
        in.close();
    }

    // Complete the ZIP file
    out.close();
} catch (IOException e) {
} 
```

# ffmpeg - 如何使用ffmpeg从视频文件中提取图像

> ID：10122719
> 
> 赞同：0
> 
> 时间：2012-04-12T11:33:44.920
> 
> 标签：ffmpeg

我需要从视频中取出一张图片用作缩略图
所以我正在尝试这个：

```
ffmpeg -ss 00:05:34.05 -i input.avi -vframes 1 -sameq output.jpg 
```

这工作得很好但是每隔一段时间我就会遇到一个文件失败并显示以下错误消息

```
av_interleaved_write_frame(): I/O error occurred 
```

通常这意味着输入文件被截断和/或损坏。

*如果有的话，我有什么选择？*
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:52:59.817

试试这个命令

```
ffmpeg -ss 5 -i sample.mp4 -vframes 1 -s 320x240 -f image2 -y sample.jpg; 
```

始终在 -i 之前设置 -ss 以优化性能，同时从长视频中获取拇指。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:08:26.800

我认为如果您将第一帧中的一个提取为缩略图会更容易。

而不是 -ss 我使用 -vf thumbnail=num_frame

```
ffmpeg -i input.avi -vf thumbnail=25 -vframes 1 -sameq output.jpg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T00:57:05.597

好的，这似乎对我有用 ffmpeg -itsoffset -4 -i test.avi -vcodec mjpeg -vframes 1 -an -f rawvideo -s 320x240 test.jpg

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-26T11:57:53.590

是的，可以使用 ffmpeg。

- 在您的服务器中安装 ffmpeg。
-检查下面的示例代码。

```
extension_loaded('ffmpeg') or die('Error in loading ffmpeg');

// $vid = realpath('./video/Wildlife.wmv');

$video_url = 'http://download.wavetlan.com/SVV/Media/HTTP/H264/Talkinghead_Media/H264_test1_Talkinghead_mp4_480x360.mp4';

$image_filename = 'images/' . time() . ".jpg";

$movie = new ffmpeg_movie($video_url, false);

$frameCount = $movie->getFrameCount();

$capPos = ceil($frameCount / 4);

$frameObject = $movie->getFrame($capPos);

if ($frameObject) {

    $frameObject->resize(500, 250, 0, 0, 0, 0);

    imagejpeg($frameObject->toGDImage());

} else {

    echo 'error';

} 
```

# wpf - 从选项卡内部将选项卡添加到选项卡控件

> ID：10122720
> 
> 赞同：0
> 
> 时间：2012-04-12T11:33:49.603
> 
> 标签：wpf, mvvm, .net-4.0

好吧，我已经有一段时间摸不着头脑了。但未能找到解决我的问题的方法。我拥有的是带有 ObservableCollection TabItems 的 MainViewModel。MainViewModel 设置为 MainView（用户控件）的 DataContext，后者又托管 TabControl。tabcontrol 绑定到 TabItems 集合。选项卡控件的内容将是 ReportItems 用户控件。

此设置基本上用于报告 SSRS 的 UI 报告。第一个选项卡包含一个报告列表，选择其中将显示一些列表框，用户可以从中选择报告参数。不是在选择参数之后，用户单击一个按钮，该按钮依次生成一个报告并将一个选项卡添加到带有报告主机的选项卡控件。

我试图从选项卡而不是主视图中选择报告的原因是有很多参数要选择，如果我将列表框添加到主视图，留给 tabcontrol 的空间会更少，用户需要向下滚动才能查看报告。

我不确定我的设计是否有缺陷，但我想找到一种方法来将新的 ReportItemViewModel 添加到 TabItem 集合中。这意味着允许子选项卡通过将 ReportItemViewModel 对象发送到 MainViewModel 并添加到集合中来添加同级。

我曾想过使用静态 Collection 来执行此操作，但这不会调用我的 OnPropertyChange 方法。此外，在 MainViewModel 中有一个静态方法也无济于事，因为它无法将对象添加到集合中，因为集合不是静态的。

我没有在这里发布任何代码，因为我被困在如何开始自己。[我在这里](https://stackoverflow.com/questions/3064365/adding-tabs-to-tabcontrol-from-inside-usercontrol)查看了另一篇文章，但不知道如何使用它。

对不起，描述太长了，只是想把问题说清楚。

我愿意接受任何建议，如果我能得到更好的设计。我很绝望，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:10:34.627

Add an `ICommand`to your`MainViewModel`用于向您的 中添加新项目`ObservableCollection`，并使用`RelativeSource`绑定从`TabItem`

所以你的 MainViewModel 会有

```
ObservableCollection<IViewModel> TabItems
IViewModel SelectedTabItem
ICommand AddTabCommand 
```

`AddTabCommand`基本上在哪里

```
void AddTab(IViewModel newItem)
{
    TabItems.Add(newItem);
    SelectedTabItem = newItem;
} 
```

你的用户界面会看起来像这样

```
<DataTemplate DataType="{x:Type local:SelectReportViewModel}">
    <Grid>
        ...
        <!-- Use the CommandParameter property to pass specified ReportItemViewModel to open -->
        <Button Command="{Binding DataContext.AddTabCommand, 
                RelativeSource={RelativeSource AncestorType={x:Type TabControl}}}" />
        ...
    </Grid>
</DataTemplate>

<TabControl ItemsSource="{Binding TabItems}" /> 
```

另一种选择是使用某种事件系统，例如 MVVM Light's`Messenger`或 Microsoft Prism's`EventAggregator`来广播/订阅事件。

您`MainViewModel`将订阅`AddTabEvents`，而您`SelectReportViewModel`将在任何时候添加新标签时广播这些事件。如果您有兴趣，我在我的博客文章中有一个关于[ViewModel 之间通信的简短摘要。](http://rachel53461.wordpress.com/2011/06/05/communication-between-viewmodels-with-mvvm/)

# asp.net - c# 中的 ASP.NET Form 标记客户端 ID 或名称

> ID：10122723
> 
> 赞同：1
> 
> 时间：2012-04-12T11:33:58.800
> 
> 标签：asp.net

如何从服务器端的 c# 获取 asp.net 在客户端呈现的表单的名称或 ID。

还是总是“aspnetForm”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:36:26.893

可以通过该[`Page.Form`](http://msdn.microsoft.com/en-us/library/system.web.ui.page.form.aspx)属性访问该表单。因此，要获取表单客户端 ID，只需使用：

```
var formId = Page.Form.ClientID; 
```

获取名称属性使用：

```
var formName = Page.Form.Name; 
```

# objective-c - 如何在屏幕周围移动一个完美的圆圈？

> ID：10122724
> 
> 赞同：0
> 
> 时间：2012-04-12T11:33:59.277
> 
> 标签：objective-c, trigonometry, geometry, pi, radians

我现在很困。我正在尝试开发一个游戏，其中图像围绕圆周移动，但我不知道该怎么做。我知道涉及弧度、圆周率和三角函数，并且我知道一些涉及它们的基本数学，但我不知道该怎么做。我需要图像的中心在每帧的 x 轴上移动一定量（delta-x），在 y 轴上移动一定量（delta-y）。这些值将确定图像每帧的移动量必须执行以给人以圆周运动的印象。我不知道如何计算 delta-x 和 delta-y 值，因为这是我游戏的重要组成部分，所以它肯定是需要注意的。如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:39:15.803

如果你有圆心的坐标和圆的半径，那就简单了

```
x = c.x + radius*cos(angle);
y = c.y + radius*sin(angle); 
```

`c`中心在哪里`angle`，从哪里`0`到`2*M_PI`

# c# - 反序列化时字节数组大小错误

> ID：10122730
> 
> 赞同：3
> 
> 时间：2012-04-12T11:34:23.317
> 
> 标签：c#, serialization, bytearray, protobuf-net

我正在使用 protobuf-net 序列化程序，到目前为止，它运行良好。我有一个情况，一些私有整数成员必须被序列化，但它们必须在序列化之前收集在一个字节数组中，然后在反序列化时从字节数组中提取，但是字节数组的大小在反序列化时会改变。

在下面的代码中，我通过一个包含整数的类来简化和说明这个问题，并且在序列化时，它是通过一个将其转换为长度为 4 的字节数组的 getter 访问的。在反序列化过程中，该过程是相反的，但 setter 是分配了两倍大小 (8) 的字节数组，这会导致错误。不能进行这种转换吗？

请注意，大小为 8 的字节数组中的最后四个条目实际上包含被序列化的值。为什么？

返回的数组`PrivateValue`是：`[54, 100, 0, 0]`但是反序列化时给出的数组是：`[0, 0, 0, 0, 54, 100, 0, 0]`。

```
[ProtoBuf.ProtoContract]
class SerializeTest
{
    public int Value { get; set; }

    [ProtoBuf.ProtoMember(1)]
    private byte[] PrivateValue
    {
        get
        {
            return new byte[4]
            {
                (byte)(Value),
                (byte)(Value >> 8),
                (byte)(Value >> 16),
                (byte)(Value >> 24)
            };
        }
        set
        {
            // For some reasone is the given byte array is always twice the size
            // and all the values are in the last part og the array
            this.Value = ((int)value[3] << 24) | ((int)value[2] << 16) | ((int)value[1] << 8) | value[0];
        }
    }

    public override string ToString()
    {
        return this.Value.ToString();
    }
}

class Program
{
    static void Main(string[] args)
    {
        var a = new SerializeTest() { Value = 25654 };

        using (var memStream = new MemoryStream())
        {
            // Serialize
            ProtoBuf.Serializer.Serialize(memStream, a);
            memStream.Position = 0;
            // Deserialize
            var data = ProtoBuf.Serializer.Deserialize<SerializeTest>(memStream);
            // Writs 0 and not 25654
            Console.WriteLine(data.Value);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:31:41.790

经过进一步研究，我发现这篇文章[protobuf-net OverwriteList on Byte Array](https://stackoverflow.com/questions/9142819/protobuf-net-overwritelist-on-byte-array) on SO on SO，解释说这是 protobuf 中的一个错误，应该在未来的版本中解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:03:36.740

我的猜测是它也序列化了该`Value`字段。尝试将其标记为忽略，看看是否有帮助：

```
[ProtoIgnore]
public int Value { get; set; } 
```

# search - lucene 中 BooleanClause.Occur.Must 和 BooleanClause.Occur.SHOULD 之间的区别

> ID：10122733
> 
> 赞同：38
> 
> 时间：2012-04-12T11:34:32.097
> 
> 标签：search, lucene, boolean

谁能举例说明 BooleanQuery 中 lucene 中 BooleanClause.Occur.Must 和 BooleanClause.Occur.SHOULD 之间的区别？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-12T12:08:26.193

`BooleanClause.Occur.SHOULD`表示该子句是可选的，而`BooleanClause.Occur.Must`表示该子句是强制性的。

但是，如果布尔查询只有可选子句，则必须至少匹配一个子句才能使文档出现在结果中。

为了更好地控制哪些文档与 BooleanQuery 匹配，还有一个[minimumShouldMatch](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/core/org/apache/lucene/search/BooleanQuery.html#setMinimumNumberShouldMatch%28int%29)参数，它可以让您告诉 Lucene 至少`minimumShouldMatch` `BooleanClause.Occur.SHOULD`子句必须匹配文档才能出现在结果中。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-08-03T09:47:03.383

我将尝试用一个例子来解释：

假设有两个子句：子句 A 和子句 B。现在 BooleanClause.Occur 的效果如下：

*   在第一种情况下，子句 A 和 B 都设置了 BooleanClause.Occur.Should 标志。这意味着即使满足其中一个子句（A 或 B），该文档也将是成功的。

*   在第二种情况下，子句 A 设置了 BooleanClause.Occur.Must 标志，子句 B 设置了 BooleanClause.Occur.Should 标志。

    在这种情况下，当文档“将”满足条款 A 时，该文档将成为命中。该文档是否满足条款 B 对其命中没有影响。

    但是如果文档不满足A 条，那么无论它是否满足B 条，它都不会被命中。

*   在第三种情况下，子句 A 和子句 B 都设置了 BooleanClause.Occur.Must 标志。

    在这种情况下，只有当它同时满足“两个”子句时，文档才会成功。如果它甚至不能满足其中一个子句，那么它就不会成功。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-15T12:05:01.873

`BooleanClause.Occur.Must`代表强制条款。应满足该条款才能返回结果。基本上`AND`。

`BooleanClause.Occur.SHOULD`代表可选子句，其行为类似于`OR`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-09T06:25:35.527

当您最关心的是排名时，应该子句是 lucene 中最重要的功能！

当您使用 SHOULD 子句时，Lucene 通过 SHOULD 子句点的总和对检索到的文档进行排名。因此，您可以将一些查询与具有不同提升的 SHOULD 子句一起加入（根据它们的重要性）。这是 Solr 中 ExtendedDismaxQuery 背后的概念。

# c# - 根据组对 LINQ 分组查询进行排序

> ID：10122741
> 
> 赞同：2
> 
> 时间：2012-04-12T11:35:03.920
> 
> 标签：c#, linq, entity-framework-4

我对这些简单的类有疑问：

```
public class Thread
{
    public string Title { get; set; }
    public ICollection<Post> Posts { get; set; }
}

public class Post
{
    public DateTime Posted { get; set; }
    public string Text { get; set; }
} 
```

我想要一个 LINQ 查询，它将返回所有线程，按最新发布顺序排序。假设一个实体框架 DbContext 带有`Threads`and `Posts`，如何编写它？分组很简单：

```
from t in Threads
group t.Posts by t into tg
select tg.Key; 
```

但是如何根据最新的线程对线程进行排序`Post.Posted`？

**编辑 - 基于 Jons 答案的解决方案：**

```
from t in Threads
from p in t.Posts
group p by t into tg
orderby tg.Max(p => p.Posted) descending 
select tg.Key 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T11:36:08.157

你可以使用：

```
from t in Threads
group t.Posts by t into tg
orderby tg.Max(post => post.Posted) // Order by the latest post per thread
select tg.Key; 
```

`descending`如果您希望首先使用最近发布的线程订购线程，则显然使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:55:18.820

你也可以试试：

```
var orderedThread1 = from t in threads
                     from p in t.Posts
                     orderby p.Posted ascending 
                     select t;

var orderedThread2 = from t in threads
                     group t.Posts by t
                     into tp
                     orderby tp.Max(posts => posts.Max(p => p.Posted))
                     select tp.Key; 
```

# ios - 向块内的 NSMutableArray 添加自定义对象时遇到问题

> ID：10122743
> 
> 赞同：0
> 
> 时间：2012-04-12T11:35:19.513
> 
> 标签：ios, nsmutablearray, objective-c-blocks, nsobject

我正在使用 dispatch_async 块内的 ASIFormDataRequest 将一些自定义对象从应用程序发送到服务器。当我从服务器收到 OK 时，我需要将对象放入 NSMutableArray 中。但是当我尝试从块外部访问数组时，它是空的。

我的代码伪代码是这样的：

```
 -(void)sendObjects{
      NSMutableArray *sendedObjects = [NSMutableArray alloc]init];
      NSMutableArray *objectsToSend = [NSMutableArray alloc]init];

     for(ObjectSend *obj in objectsToSend){
           dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),^{

           ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
           [request addRequestHeader:@"Content-Type" value:@"application/json"];
           [request appendPostData:[NSJSONSerialization dataWithJSONObject:sendDictWithObjects options:NSJSONWritingPrettyPrinted error:&error]];
           [request startSynchronous];
           NSError *requestError = [request error];
           if(!requestError){
                NSString *response = [request responseString];

                obj.sended = YES;
                [sendedObjects addObject:s];

            }

          });
      }
      NSLog(@"%i",sendedObjects.count);

  } 
```

最后 sendedObjects 数组为空。我正在使用 ARC，所以无法保留。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:15:18.653

您的请求可能是同步的，但您从计划并发执行的块中分派它们。这意味着 NSLog 语句可以在您的任何请求被分派之前到达。您有两种选择来解决您的问题：

1.  不要使用 dispatch_async 和块，只是简单地发送请求内联。如果您显示的代码在主线程上运行，我不建议这样做。
2.  注册完成回调并检查您的对象数组。您可以在完成回调部分中查看如何在[此处完成此操作](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/dispatch_async.3.html)

顺便说一句，过去的*send*形式是*sent*。

# mysql - MVC3 只读 MySql 连接字符串

> ID：10122745
> 
> 赞同：0
> 
> 时间：2012-04-12T11:35:27.057
> 
> 标签：mysql, asp.net-mvc-3, connection-string, readonly

我目前在 Visual Studio 2010 中工作。MVC3 项目。我是 .NET MVC 的新手，到目前为止我唯一的经验是使用 MVC3 EF Code First 项目（MSSQL DB）。

我正在寻找创建另一个项目并连接到 MySQL 数据库。我可以很好地连接到数据库，但我使用的数据库凭据具有完全访问权限（我无权访问任何其他帐户）。我只想以只读方式连接。（该应用程序是一种报告应用程序）。数据库是一个测试数据库，但我担心我会做一些愚蠢的事情，要么将我不想要的数据持久化，要么完全放弃数据库。（即使它是一个测试数据库，其他人也在使用它）有没有办法通过连接字符串使我的连接只读？谁能指出我正确的方向？

最亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:46:49.707

您必须在 mysql 上创建一个具有只读权限的帐户，然后设置您的连接字符串以使用该帐户。[这个链接](http://dev.mysql.com/doc/refman/5.1/en/account-management-sql.html)应该是一个开始

如果您无法创建用户，另一种选择可能是在数据库中创建一些视图并查询它们。（我不会深入探讨性能增益/损失）

# android - 带有 Drupal 服务的移动应用程序

> ID：10122749
> 
> 赞同：0
> 
> 时间：2012-04-12T11:35:37.373
> 
> 标签：android, ios, web-services, drupal, mobile

如果有人能指导我使用 Drupal 的 CMS 功能结合服务模块与移动应用程序通信时，我将非常感激。我想要实现的是创建一个移动测验应用程序并使用 Drupal 管理内容。

出现的问题是：

*   如何添加问题 - 我是否必须开发自定义 Drupal 模块、自定义内容类型或其他内容？
*   如何使用服务层公开新创建的内容？

我计划使用的 Drupal 版本是 7。

或者也许有比使用 Drupal 更好的解决方案来实现我想要实现的目标？

编辑：

另一个问题是我如何跟踪用户的答案/统计信息 - 如何组织它，我是否必须自己创建一个数据库表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:30:31.127

有一个 Drupal 模块可以帮助这个项目：

[http://www.drupal.org/project/drupalgap](http://www.drupal.org/project/drupalgap)

它使用服务和视图数据源（视图 JSON）能够与使用 PhoneGap 和 jQueryMobile 构建的移动应用程序进行通信。

要回答您的问题：要创建新节点（问题），您将使用节点创建服务资源。然后您可以使用 Views Datasource (Views JSON) 来检索新创建的内容。

我有一篇博客文章详细介绍了这个想法：

[http://tylerfrankenstein.com/code/android-app-with-drupal-7-services-phonegap-and-jquery-mobile](http://tylerfrankenstein.com/code/android-app-with-drupal-7-services-phonegap-and-jquery-mobile)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:51:09.037

在我的公司，我们创建了自己的 drupal 模块。该模块从 drupal 内容创建 JSON 文件，然后我们通过 HTTP 或 HTTPS 从我们的应用程序获取这些文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:06:01.003

要回答这个问题：

我所做的是创建了一个单独的模块，它使用内置的 Drupal 挂钩来创建数据库 -`hook_schema`再次使用挂钩创建服务 -`hook_services_resources`并使用 Form API 为其创建了一个简单的管理页面。

# ios - iOS 5.1 和 Default.png

> ID：10122750
> 
> 赞同：8
> 
> 时间：2012-04-12T11:35:44.423
> 
> 标签：ios, ipad, ios5

我正在使用 iOS 5.1 开发应用程序，但我在使用 default.png 文件时遇到了一些奇怪的行为。

我已将以下文件添加到我的应用程序中：

> Default.png - (iPhone)
> 
> Default@2x.ping - (iPhone Retina)
> 
> Default-Portrait~ipad.png - (iPad)
> 
> Default-Portrait@2x~ipad.png -(iPad Retina)

当应用程序启动时，它似乎为每个场合选择了正确的 Default.png 图像。但是，在我的 AppDelegate 中，我有一个简单的闪屏，可以使应用程序的加载和到应用程序的过渡更加顺畅，执行以下操作：

```
UIImageView *splashView = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,window.frame.size.width, window.frame.size.height)]; 
splashView.image = [UIImage imageNamed:@"Default"]; 

[window addSubview:splashView]; 
[window bringSubviewToFront:splashView]; 
```

然而`[UIImage imageNamed:@"Default"]`，反过来并没有为每个设备选择正确的文件，我相信问题`-Portrait`出在文件名的一部分。

所以作为一个快速的解决方案，我这样做了：

```
if( ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad) ) {
    // Force the image used by ipads
    if( [[UIScreen mainScreen] respondsToSelector:@selector(scale)] && [[UIScreen mainScreen] scale] == 2.0) {
       splashView.image = [UIImage imageNamed:@"Default-Portrait@2x~ipad"];
    }
    else {
        splashView.image = [UIImage imageNamed:@"Default-Portrait~ipad"];
    }
}
else
   splashView.image = [UIImage imageNamed:@"Default"]; 
```

这是我应该这样做的吗？你觉得这很有趣吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T12:14:56.640

有关官方信息，请查看：[App-Related Resources](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html)

对于启动图像，请使用以下格式：

```
<basename><orientation_modifier><scale_modifier><device_modifier>.png 
```

看起来你最好使用：

```
Default.png - (iPad)

Default@2x.png - (iPad Retina)

Default~iphone.png - (iPhone)

Default@2x~iphone.png -(iPhone Retina) 
```

即使简单地使用，这也应该为您提供正确的图像：

```
splashView.image = [UIImage imageNamed:@"Default"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T20:30:28.237

一旦我的通用应用程序完成加载，我会在 a 中显示启动屏幕的副本，`UIImageView`然后将其淡出，以便在启动和应用程序准备就绪之间进行温和的过渡。这是我用来确定要使用哪个图像的代码：

```
 // choose the correct launch image for orientation, device and scale
    NSMutableString *launchImageName = [[NSMutableString alloc] initWithString:@"Default"];
    BOOL isPad = ( UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad );
    if( isPad )
    {
        BOOL isLandscape = UIInterfaceOrientationIsLandscape([[UIApplication sharedApplication] statusBarOrientation]);
        NSString *imageOrientation = (isLandscape) ? @"Landscape" : @"Portrait";

        BOOL isRetina = ([[UIScreen mainScreen] respondsToSelector:@selector(scale)] && [[UIScreen mainScreen] scale] == 2.0);
        NSString *scaleString = (isRetina) ? @"@2x" : @"";

        // Default-Landscape~ipad.png
        // Default-Landscape@2x~ipad.png
        // Default-Portrait~ipad.png
        // Default-Portrait@2x~ipad.png
        launchImageName = [NSMutableString stringWithFormat:@"%@-%@%@~ipad.png", launchImageName, imageOrientation, scaleString ];

    } else {

        if( CGRectGetHeight(self.view.frame) > 480.f)
        {
            // Default-568h.png
            launchImageName = [NSMutableString stringWithFormat:@"%@-568h.png", launchImageName];
        } else {
            // Default.png
            // Default@2x.png
            launchImageName = [NSMutableString stringWithFormat:@"%@.png", launchImageName];
        }
    }
    UIImage *launchImage = [UIImage imageNamed:launchImageName]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T19:04:56.667

[http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html)

```
应用启动（默认）图像
<basename><usage_specific_modifiers><scale_modifier><device_modifier>.png

为不同方向提供启动图像
<basename><orientation_modifier><scale_modifier><device_modifier>.png

为自定义 URL 方案提供启动图像
<basename>-<url_scheme><scale_modifier><device_modifier>.png

```

# iphone - 从日历中删除之前选择的日期

> ID：10122753
> 
> 赞同：1
> 
> 时间：2012-04-12T11:35:52.240
> 
> 标签：iphone, ios, calendar, xcode4.2

我已经在我的应用程序中集成了日历月视图，这很好，但我的问题是我无法从日历中删除之前选择的日期。

我正在使用[本教程](http://blog.webscale.co.in/?p=244)中的代码。

我遇到了这个问题：- ![在此处输入图像描述](../Images/12243ca16a6920510cea2e4a99248978.png)

我希望一次只选择一个日期。

请帮助，并感谢任何帮助或建议。

# registry - UninstallString 注册表项的所有可能位置在哪里？

> ID：10122761
> 
> 赞同：8
> 
> 时间：2012-04-12T11:36:15.277
> 
> 标签：registry, uninstallation

我正在编写一个基于 Wix 的安装程序，它需要从旧的、非基于 msi 的安装升级。我通过直接在注册表中搜索来查找以前安装的组件的实例。

为了找到组件的卸载程序，我查看

```
 HKLM\Software\Microsoft\Windows\CurrentVersion\Uninstall\MyProgram 
```

并获得`UninstallString`价值。这很好，但我意识到对于 64 位机器上的 32 位安装，该条目实际上位于

```
HKLM\Software\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\MyProgram 
```

还有其他地方我应该去看看吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-11T11:35:27.127

还有第三条：

```
HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Uninstall 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T10:22:03.207

我已经检查过了，这是仅有的两个位置。第二个用于在 64 位版本的 Windows 上存储 32 位程序。没有其他需要检查的情况。

# c++ - 可用空间大小信息

> ID：10122771
> 
> 赞同：2
> 
> 时间：2012-04-12T11:37:15.687
> 
> 标签：c++

我想知道，如何使用 C++ 在 Windows 中的驱动器中找到可用空间。我有一个目录路径作为输入，我想知道这个驱动器或这个目录是否有足够的空间来保存我的数据。主要限制是我应该只使用 C++，而不是 VC++ 或任何其他类型的 Windows 编程，因为这个应用程序必须以批处理模式与其他应用程序交互。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:44:12.683

如果您需要了解 Windows 上的可用空间，可以阅读以下内容：http:
[//msdn.microsoft.com/en-us/library/windows/desktop/aa364937 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364937(v=vs.85).aspx)

在 POSIX 系统上，您可以试试这个： http: [//pubs.opengroup.org/onlinepubs/009604499/basedefs/sys/statvfs.h.html](http://pubs.opengroup.org/onlinepubs/009604499/basedefs/sys/statvfs.h.html)

我相信在不使用文件系统的情况下获得可用空间是不可能的，因为您需要确定字节序列何时是文件......（您需要确定硬盘上的块总数，即块是为系统保留的，正在使用的块的标志和空闲的块的标志，可能还有更多相关的东西......）

我可能是错的，但这是我的猜测......

我希望你明白...

=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:51:32.493

一个可移植的解决方案是使用 Boost.Filesystem[空间](http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/reference.html#space)，它返回一个`space_info`带有相关信息的结构。

# ruby-on-rails - 删除过去在 Rails 中的迁移

> ID：10122772
> 
> 赞同：8
> 
> 时间：2012-04-12T11:37:25.940
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-migrations

自从我的 rails 应用程序开始以来，我创建了很多迁移。其中一些仅用于测试目的。我现在有很多完全没用的迁移（例如：在迁移中创建一个表并在下一个迁移中删除它）。

随着 db:migrate 运行后 schema.rb 得到更新，是否可以删除所有迁移并从 schema.rb 的实际内容开始？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T11:51:13.107

是的，您可以（并且可能应该）删除旧的迁移。由于您的模型代码将依赖于架构的更高版本，因此您的旧迁移可能不再起作用。

因此，请务必删除迁移（您将它们置于源代码控制之下，对吗？），然后使用

```
rake db:schema:load 
```

如果需要，可以初始化一个新数据库。

更新：Rails 指南现在有类似的说法： http: [//guides.rubyonrails.org/active_record_migrations.html#schema-dumping-and-you](http://guides.rubyonrails.org/active_record_migrations.html#schema-dumping-and-you)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-30T21:33:33.503

更好的方法是执行以下操作...

一旦您在项目中达到一个里程碑，并且您确定不想迁移到低于该版本的数据库，您可以将大量迁移文件替换为单个迁移文件，然后您可以将其用作新的迁移文件“初始”迁移将迄今为止完成的所有内容捆绑在一起。

之后：继续在您的项目中使用迁移！

永远不要手动编辑你的 schema.rb 文件。除非是为了灾难恢复，否则永远不要加载 db/schema.rb 文件。

您无法 100% 保证签入到版本控制的文件是最新的甚至是正确的版本。

上下迁移要安全得多，只需将大量迁移捆绑在一个迁移文件中即可。

通过手动加载 schema.rb 文件，您完全绕过了迁移提供的安全网。这不是一个好主意。

# android - Android：动画和插值时间

> ID：10122775
> 
> 赞同：6
> 
> 时间：2012-04-12T11:37:39.897
> 
> 标签：android, animation, interpolation

我有一个文本数据的列表视图。即使文本占用更多空间，最初所有行的大小都是固定的。如果看不到完整的文本，则单击时会展开该行。为了实现这个扩展，我创建了一个动画类来扩展 Animation。而在 applyTransformation 方法中，我尝试使用 interpolatedTime (input) 逐渐扩大行以给人一种不错的感觉。

```
if (interpolatedTime < 1.0f) {
    params.height = (int) ((params.height - mainTextParams1.height) *
    interpolatedTime);

    maintxtlayout.setLayoutParams(params);
    mAnimatedView.requestLayout();

} else if (!mWasEndedAlready) {
    maintxtlayout.setLayoutParams(params);
    mAnimatedView.requestLayout();
    mWasEndedAlready = true;
} 
```

但是，我面临的问题是方法似乎只被调用了两次。首先 interpolatedTime 的 value = 0.0 ，下一次 value = 1.0 。

我尝试扩展 LinearInterpolator ，并扩展其 getInterpolation 方法以将值增加 0.05f，但该方法也仅被调用两次，一次为 0，第二次为 1。

我也试过 AccelerateInterpolator，但同样的问题。

我在这里想念什么？

谢谢 pradeep

# prolog - 序言中的 if else if else 子句类似于 C/C++

> ID：10122780
> 
> 赞同：5
> 
> 时间：2012-04-12T11:38:06.727
> 
> 标签：prolog

在 c 语言中，我有类似的东西：

```
if(cond1)
{}
else if(cond2)
{}
else
{} 
```

这在 Prolog 中怎么可能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T11:42:01.460

```
(   If1 -> Then1
;   If2 -> Then2
;   ...
;   otherwise
). 
```

请注意，if-then-else 仅在您无法通过不同子句中的模式匹配来表达不同条件时才需要。可以通过模式匹配表达的一切都应该通过模式匹配来表达，因为这通常会导致更通用和更高效的代码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-12T11:40:21.253

```
(cond1 ->
    consequent1
; cond2 ->
    consequent2
;
    alternative
) 
```

为了记录，这被称为*条件*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T19:51:00.083

->/2 仅在您想强加某种确定性时才需要。它的作用类似于局部切割。但是如果你希望你的代码保持一些非确定性，就没有必要使用 ->/2。

采用以下命令式代码：

```
boolean listOfBool(Object obj) {
   if (obj instanceof ConsCell) {
       if (((ConsCell)ob).head() instanceof Boolean) {
           return listOfBool(((ConsCell)ob).tail());
       } else {
           return false;
       }
  } else if (obj == null) {
       return true;
  } else {
       return false;
  } 
```

}

这可以在没有 ->/2 的 Prolog 中编码，如下所示：

```
% bool(+Bool)
% bool(-Bool)
bool(0).
bool(1).

% list_of_bool(+List)
% list_of_bool(-List)
list_of_bool(L) :-
    (L = [X|Y], bool(X), list_of_bool(Y);
     L = []). 
```

现在的优点是它可以用于检查布尔值列表并生成布尔值列表：

```
?- list_of_bool([0,1,0]).
Yes 
?- list_of_bool([0,1,2]).
No
?- List=[_,_,_], list_of_bool(List).
List = [0, 0, 0] ;
List = [0, 0, 1] ;
List = [0, 1, 0] ;
List = [0, 1, 1] Etc.. 
```

通常，析取 (;)/2 可以分布在多个子句中。如果这与将统一 (=)/2 移动到头部相结合，则可以获得一些速度，因为谓词通常更适合索引。

下面是通过消除 (;)/2 和 (=)/2 来替代 list_of_bool 公式的样子：

```
% list_of_bool2(+List)
% list_of_bool2(-List)
list_of_bool2([X|Y]) :- bool(X), list_of_bool2(Y).
list_of_bool2([]). 
```

上面的工作方式完全相同（它实际上工作得更好，因为在第一个查询中没有留下选择点，如果没有 (->)/2，(;)/2 通常不会检测到什么）：

```
?- list_of_bool2([0,1,0]).
Yes
?- list_of_bool2([0,1,2]).
No
?- List=[_,_,_], list_of_bool(List).
List = [0, 0, 0] ;
List = [0, 0, 1] ;
List = [0, 1, 0] ;
List = [0, 1, 1] Etc.. 
```

这也是 Prolog 的启动方式。只有规则，没有析取（;）/2，没有统一（=）/2。后面的两个已经存在于底层的 Horn 子句中。

假设您有一个没有 (;)/2 且没有 (=)/2 的 Prolog，并且您不需要剪切透明 (;)/2，那么您可以自己定义这些构造如下：

```
X = X.

(A ; _) :- A.
(_ ; B) :- B. 
```

再见

号角条款
[http://en.wikipedia.org/wiki/Horn_clause](http://en.wikipedia.org/wiki/Horn_clause)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T12:58:42.617

这并不容易找到，部分原因是（正如@mat 所指出的）Prolog 中有一个惯用的替代方案。您可以在[此处](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.8%27,swi%28%27/doc/Manual/control.html%27%29%29)找到SWI-Prolog 文档，尽管过于简洁，但它是准确的。我引用一个相关的观点：

> 请注意 (If -> Then) 充当 (If -> Then ; fail)，如果条件失败，则使构造失败。这种不寻常的语义是 ISO 和所有事实上的 Prolog 标准的一部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-28T08:51:22.080

```
if_then_else(Condition,Then,Else) :- Condition, !, Then.
if_then_else(Condition,Then,Else) :- Else. 
```

例如：

```
max(X,Y,Max) :- if_then_else(X>Y,Max=X,Max=Y).

?- max(4,7,A).
A = 7
?- max(8,2,A).
A = 8 
```

# blackberry - 黑莓 4.2 的 AutoCompleteField

> ID：10122781
> 
> 赞同：1
> 
> 时间：2012-04-12T11:38:14.563
> 
> 标签：blackberry

我必须创建一个`AutoCompleteField`支持黑莓操作系统 4.2。下面是我附上的屏幕截图。我已经对黑莓 SDK 进行了推荐，并且`AutoCompleteField`从 5.0 开始就可以使用，我也这样做了，但我必须为 4.2 SDK 这样做。这是我对 Blackberry 设备 4.2 及更高版本的要求。

1.  `AutoCompleteField` 填充可用值列表以供选择。在选择特定值时，它应该更新下面标签字段中的选定项目值。

2.  `AutoCompleteField`应该只允许输入数字。

![在此处输入图像描述](../Images/92321f7a9bce5a0020dd218a832f4f87.png)

任何人都请帮助我做同样的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T14:54:30.393

不是一件容易的事。`EditField`您可以通过在其下方添加一个 and 来实现类似的功能`ListField`。要模拟该行为，您必须：
- 限制/过滤字符类型（在您的情况下为数字）
- 对于每个键入的字符，生成候选词列表（这完全取决于您）。
- 输入字符后，使用可用选项填充列表字段。同样，当删除一个字符时（实际上是每次文本更改时）。
- 当焦点离开文本字段而没有选择任何内容时，删除列表字段中的所有元素。当用户选择一个选项时也是如此。该列表应仅包含用户键入时的元素。

要检测用户输入，您可以使用`TextFilter`，并将其设置为`editfield.setTextFilter()`。您可能还需要扩展两者`EditField`并`ListField`进行自定义绘画并提供最佳外观。

注意：如您所见，这种方法在某种程度上是即兴创作的。如果我做类似的事情，我不相信我能想出任何视觉上体面的东西。您也可以从头开始创建自己的自定义字段，但难度更大。

# windows - 具有正确转义字符的批处理脚本

> ID：10122791
> 
> 赞同：0
> 
> 时间：2012-04-12T11:38:35.920
> 
> 标签：windows, batch-file

`wmic nic where "netconnectionid like '%'" get netconnectionid`

此代码在控制台上正确执行，但是当我尝试批处理脚本时，如下脚本没有执行。有什么建议吗？以下脚本的正确转义字符是什么？

谢谢。

```
@Echo Off
For /f "tokens=1*" %%a In ('wmic nic where "netconnectionid like '%'" get netconnectionid') Do (
    Call :UseNetworkAdapter "%%a %%b"
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:38:36.753

正如用户所说，他通过在批处理脚本中添加额外的 % 找到了解决方案（而不是从命令提示符交互式运行）。请参阅下面的更正代码。我将其作为答案发布，因为就像上面提到的 Chuck Kollars 一样，这样做会阻止它出现在“未答复”列表中。另外，作为一个新手，我今晚感觉自己像个皮条客。:)

```
@Echo Off
For /f "tokens=1*" %%a In ('wmic nic where "netconnectionid like '%%'" get netconnectionid') Do (
    Call :UseNetworkAdapter "%%a %%b"
) 
```

# c# - 从动态列表中获取唯一的值列表

> ID：10122795
> 
> 赞同：4
> 
> 时间：2012-04-12T11:38:41.147
> 
> 标签：c#, linq

我有一个从数据库返回的动态对象列表，如下所示：

```
IEnumerable<dynamic> list = _repository.All(whereClause); 
```

然后我需要对该列表做的是获取数组中指定的每个列名的唯一值列表。所以是这样的：

```
List<string> columns = new string[] {"Col1","Col1"};

foreach(string column in columns)
{ 
    //get unique value for column and add them to some collection 
    list.Select().Where(???)
} 
```

因为列表是动态的，我不确定如何根据列名进行选择。

任何人都可以帮忙吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:29:14.693

使用帮助类通过名称动态访问属性怎么样（可以扩展为使用一些缓存）：

```
public class ObjectUtils
{
    public static object GetPropertyByName(object obj, string name)
    {
        if (obj == null)
        {
            return null;
        }
        PropertyInfo propInfo = obj.GetType().GetProperty(name);
        if (propInfo == null)
        {
            return null;
        }
        object value = propInfo.GetValue(obj, null);
        return value;
    }
} 
```

然后得到这样的数据：

```
List<dynamic> list = new List<dynamic>();
list.Add(new { Col1 = "AB", Col2 = 23 });
list.Add(new { Col1 = "CD", Col2 = 23 });
list.Add(new { Col1 = "AB", Col2 = 5 });
list.Add(new { Col1 = "EF", Col2 = 9 });

string[] columns = new string[] { "Col1", "Col2" };
foreach (string column in columns)
{
    var elems = list.Select(d => ObjectUtils.GetPropertyByName(d, column)).Distinct().ToList();
    // elems will be "AB", "CD", "EF" for Col1
    //           and 23, 5, 9 for Col2
} 
```

如果无法编译，请确保添加对 Microsoft.CSharp 的引用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:56:54.717

如果没有更多信息，我会尝试这样的事情：

```
List<dynamic> list = new List<dynamic>();
list.Add(new { a = "Col1", b = "b" });
list.Add(new { a = "Col2", b = "c" });
list.Add(new { a = "Col1", b = "c" });

string[] columns = new string[] { "Col1", "Col2" };

foreach (string column in columns)
{
    Console.WriteLine(column);
    //get unique value for column and add them to some collection 
    var select=list.Where((x) => { return x.a == column; }).Select(x=>x.b);
    select.ToList().ForEach((x) => { Console.WriteLine("{0}",x ); });
}
Console.Read(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T11:42:05.183

能：

```
foreach(string column in columns)
{ 
    list.Where(x => x == column);
    list.Distinct();
} 
```

帮你？

但是你可以跳过 foreach 循环：

```
list = list.Where(x => colums.Contains(x)); 
```

有没有你的双胞胎：

```
list = list.Distinct(); 
```

# bash - 文件中的列字符串版本，bash sed awk

> ID：10122797
> 
> 赞同：2
> 
> 时间：2012-04-12T11:38:50.627
> 
> 标签：bash, sed, awk

我在编辑文件中的一列时遇到了棘手的问题。
我的目标是替换第二行中的字符串以摆脱由 \ 符号分隔的部分。
为了清楚起见，这是示例源文件：aaa.txt

```
0 OS1\管理员
1 OS1\测试
2 OS3\用户
3 OS5\测试
4 OS2\测试
5 操作系统\管理员

```

那应该怎么改

```
0 管理员
1 次测试
2个用户
3 测试
4 测试
5 管理员

```

它让我发疯，请帮助:) Sed / Awk 或纯 bash 将只是 gr8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:44:58.570

### sed

```
sed 's/\S*\\//' input.txt 
```

### awk

```
awk '{sub(/[^[:space:]]*\\/, "")}1' input.txt 
```

### 重击

```
while read -r x y; do echo $x ${y##*\\}; done <input.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T21:08:36.250

如果您想对文件进行内联编辑，可以尝试以下操作。请记住在测试任何内联编辑之前备份您的文件。

```
sed -i 's/   .*\\/   /g' /yourfile 
```

**对于 OS X**，您可以尝试以下操作（请记住在测试任何内联编辑之前备份您的文件。）

```
sed -i '' 's/   .*\\/   /g' /yourfile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T11:40:55.387

您可以捕获第一列，然后删除第二列的第一部分吗？

sed 's/\(.*\t\).*\\/\1/g'

`\\(.\*\t\\)`应该捕获第 1 列，`.\*\\`应该匹配并包括第 2 列中的 \。然后我们将其替换为`\1`，这是我们之前捕获的第 1 列。

# php - 删除除我想要的所有数组元素吗？

> ID：10122801
> 
> 赞同：55
> 
> 时间：2012-04-12T11:39:26.287
> 
> 标签：php, arrays

我有控制器从 HTML 表单中获取 post 参数，然后它将它们发送到模型，该模型将数组插入 Cassandra 数据库。

它是 SQLInjection 证明，因为它是 NoSQL，但我担心的是用户只能模拟 100k 后参数，或者只是添加一些我不需要的参数，它将被插入到数据库中。我如何确保只有我需要的值才会保留在我的数组中。

例子：

```
$post = ['parent_id', 'type', 'title', 'body', 'tags']; // Good
$post = ['parent_id', 'type', 'title', 'body', 'tags', 'one', 'two', 'three'] // Bad 
```

如何确保我的数组将取消设置所有不是*很好*示例的元素？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-04-12T11:45:58.457

**通过将您确实**期望的条目列入白名单。

```
<?php
$post = array( 
    'parent_id' => 1,
    'type' => 'foo', 
    'title' => 'bar', 
    'body' => 'foo bar', 
    'tags' => 'foo, bar', 
    'one' => 'foo',
    'two' => 'bar',
    'three' => 'qux'
);

$whitelist = array(
    'parent_id',
    'type',
    'title',
    'body',
    'tags'
);

$filtered = array_intersect_key( $post, array_flip( $whitelist ) );

var_dump( $filtered ); 
```

无论如何，使用 Cassandra 作为数据存储当然不是不对您收到的数据进行验证的理由。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-04-12T11:40:29.247

您正在寻找[`array_intersect`](http://php.net/manual/en/function.array-intersect.php)：

```
$good = ['parent_id', 'type', 'title', 'body', 'tags'];
$post = ['parent_id', 'type', 'title', 'body', 'tags', 'one', 'two', 'three'];

print_r(array_intersect($good, $post)); 
```

**[看到它在行动](http://codepad.viper-7.com/KTg08N)**。

当然，这个特定的例子没有多大意义，因为它适用于数组*值*，但也有[`array_intersect_key`](https://php.net/manual/en/function.array-intersect-key.php)基于键的相同的例子。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-19T20:46:33.403

多维数组呢？我为此解决方案研究了几个小时，但没有找到最佳解决方案。所以，我自己写的

```
function allow_keys($arr, $keys)
    {
        $saved = [];

        foreach ($keys as $key => $value) {
            if (is_int($key) || is_int($value)) {
                $keysKey = $value;
            } else {
                $keysKey = $key;
            }
            if (isset($arr[$keysKey])) {

                $saved[$keysKey] = $arr[$keysKey];
                if (is_array($value)) {

                    $saved[$keysKey] = allow_keys($saved[$keysKey], $keys[$keysKey]);
                }
            }
        }
        return $saved;
    } 
```

用途：例子

```
$array = [
        'key1' => 'kw',
        'loaa'=> ['looo'],
        'k'    => [
            'prope' => [
                'prop'  => ['proo', 'prot', 'loolooo', 'de'],
                'prop2' => ['hun' => 'lu'],
            ],
            'prop1' => [

            ],
        ],
    ]; 
```

调用：示例

```
allow_keys($array, ['key1', 'k' => ['prope' => ['prop' => [0, 1], 'prop2']]]) 
```

输出：

```
Array ( [key1] => kw [k] => Array ( [prope] => Array ( [prop] => Array ( [0] => proo [1] => prot ) [prop2] => Array ( [hun] => lu ) ) ) ) 
```

所以你从多维数组中只得到需要的键。它不仅限于“多维”，您可以通过传递一个数组来使用它

```
['key1', 'loaa'] 
```

你得到的输出：

```
Array ( [key1] => kw [loaa] => Array ( [0] => looo ) ) 
```

干杯！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T11:45:41.783

这将输出与 $post_allowed 相同的输出。它所做的只是允许 $post_input 中的值也存在于 $post_allow 中。

```
$post_allowed = ['parent_id', 'type', 'title', 'body', 'tags'];
$post_input   = ['parent_id', 'type', 'title', 'body', 'tags', 'one', 'two', 'three'];
$post = array_intersect($post_input, $post_allowed); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-25T11:00:03.277

这称为白名单，您的示例具有误导性，因为它`$_POST`是一个关联数组。

```
$post = [
    'parent_id' => 'val',
    'type' => 'val',
    'title' => 'val',
    'body' => 'val',
    'tags' => 'val',
    'one' => 'val',
    'two' => 'val',
    'three'=>'val',
];

$whitelist = ['parent_id', 'type', 'title', 'body', 'tags'];

$sanitized_post = array_whitelist_assoc($post, $whitelist); 
```

这是我为关联数组创建的白名单函数。

```
if(!function_exists('array_whitelist_assoc')){

    /**
     * Returns an associative array containing all the entries of array1 which have keys that are present in all the arguments when using their values as keys.
     *
     * @param array $array The array with master keys to check.
     * @param array $array2 An array to compare keys against its values.
     * @return array $array2,... A variable list of arrays to compare.
     * 
     */

    function array_whitelist_assoc(Array $array1, Array $array2) {

        if(func_num_args() > 2){
            $args = func_get_args();
            array_shift($args);
            $array2 = call_user_func_array('array_merge', $args);
        } 
        return array_intersect_key($array1, array_flip($array2)); 
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-31T01:33:08.870

如果您正在处理关联数组并且出于任何原因不想使用`array_intersect_key()`，您还可以使用更简单的方法使用旧数组中的值手动构建新数组。

```
$post = array(
    'parent_id' => 1,
    'type' => "post",
    'title' => "Post title",
    'body' => "Post body",
    'tags' => "Post tags",
    'malicious' => "Robert'); DROP TABLE students;--"
);
$good = array(
    'parent_id' => $post['parent_id'],
    'type' => $post['type'],
    'title' => $post['title'],
    'body' => $post['body'],
    'tags' => $post['tags']
); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-03T13:26:51.670

值得记住的是，虽然`array_intersect`它们`array_intersect_key`很好，但它们很可能是矫枉过正的。在我的情况下，我只想要 1 个元素，因此最简单的选择就是根据我需要的键/值重建我想要的数组。我想知道 array_intersect 在什么时候变得不值得，而你最好使用`$new = array('whatI'=>'want');`. 我相信在 OP 中这是值得的，但在较小的情况下它可能是矫枉过正的。

或者，为了回答最初的问题，简单地使用`unset`可能是一个更便宜的选择 - `unset($post['one'],$post['two'],$post['three'])`. 不过，这与这变得效率太低和 array_intersect 函数更好的点有关。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-12T11:43:46.177

使用数组交集。[array intersect](http://php.net/manual/en/function.array-intersect.php)，它会帮助你。

# c# - 在 C# 中获取部分 XML 值

> ID：10122802
> 
> 赞同：1
> 
> 时间：2012-04-12T11:39:27.270
> 
> 标签：c#, .net, xml

我有像这样的XML：

```
<RES>
 <MUL>
  <SIN>
   <KEY name="a">
    <VALUE>a1</VALUE>
   </KEY>
   <KEY name="b">
    <VALUE>b1</VALUE>
   </KEY>
   <KEY name="c">
    <VALUE>c1</VALUE>
   </KEY>
   <KEY name="need">
    <MUL>
     <SIN>
      <KEY name="needID">
       <VALUE>ID</VALUE>
      </KEY>
      <KEY name="needOther">
       <VALUE>other</VALUE>
      </KEY>
      <KEY name="needOther2">
       <VALUE>other2</VALUE>
      </KEY>
     </SIN>
    </MUL>
   </KEY>
  </SIN>
 </MUL>
</RES> 
```

我的问题是如何从名称为的节点获取值“id” `needID`？

我试过了

```
XmlDocument xx = new XmlDocument();
xx.Load(MYDOC);

XmlNodeList node = xx.SelectNodes("/RES/MUL/SIN/KEY[@name='need']"); 
```

但在那之后我不能选择需要ID

```
XDocument doc = new XDocument(node);
var cource = from x in doc.Descendants("KEY")
select new { ID = doc.Element("VALUE").Value }; 
```

请帮我！

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:46:24.663

像下面这样的东西怎么样

```
XDocument doc = XDocument.Load("url");

var cource = from x in doc.Descendants("KEY")
                 where x.Attribute("name").Value == "needID" 
                 select new { ID = x.Element("VALUE").Value }; 
```

谢谢

迪普

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:52:45.940

你需要这样的东西：

```
// you're expecting only a single node - right?? So use .SelectSingleNode!
XmlNode node = xx.SelectSingleNode("/RES/MUL/SIN/KEY[@name='need']");

// if we found the node...
if(node != null)
{
    // get "subnode" inside that node
    XmlNode valueNode = node.SelectSingleNode("MUL/SIN/KEY[@name='needID']/VALUE");

    // if we found the <MUL>/<SIN>/<KEY name='needID'>/<VALUE> subnode....
    if(valueNode != null)
    {
        // get the inner text = the text of the XML element...
        string value = valueNode.InnerText;
    }
} 
```

或者您甚至可以将其组合成一个 XPath 操作，假设您知道您的 XML 文档中最多有一个匹配节点：

```
// define XPath
string xpath = "/RES/MUL/SIN/KEY[@name='need']/MUL/SIN/KEY[@name='needID']/VALUE";

// you're expecting only a single node - right?? So use .SelectSingleNode!
XmlNode node = xx.SelectSingleNode(xpath);

// if we found the node...
if(node != null)
{
    // get the inner text = the text of the XML element...
    string value = node.InnerText;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T11:57:36.863

```
XmlDocument xml = new XmlDocument();

xml.Load(File.OpenRead(@"Your XML File"));

//XmlNodeList xnList = xml.SelectNodes("/RES/MUL/SIN/KEY");

//You can use something like the below if the XML file is large and you need to read in more than one
//foreach (XmlNode xn in xnList)
//{
//Have a seperate class to store the values
//class class = new class();
//class.ID = xn.SelectSingleNode("./@needID").Value;
//
//} 
```

# php - 如何创建链接以下载 symfony2 中生成的文档？

> ID：10122807
> 
> 赞同：10
> 
> 时间：2012-04-12T11:39:35.653
> 
> 标签：php, symfony, twig

文档由系统创建并保存到文件夹 /web/downloads。我创建了一个视图来显示链接，如果用户单击链接，它将允许用户下载文件。（标准点击下载功能）

我是 Symfony2 的新手，并且正在了解整个路由/控制器的概念，但是如何在仍然遵守 MVC 的同时创建指向此类文件的链接？是否需要使用控制器设置路由，或者 twig 是否具有允许它的功能等。

PS：我已经阅读了诸如[如何在 Symfony2 中创建下载链接之类的问题？](https://stackoverflow.com/questions/9590789/how-to-create-a-download-link-in-symfony2)但我不知道他们是否在路由中做了某些事情或只是添加了链接等。

谢谢，

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-12T12:38:00.130

示例实现将是，

创建路线，

```
download_route:
    pattern:  /download/{filename}
    defaults: { _controller: YourBundle:Controller:download } 
```

然后在你的控制器中，

```
public function downloadAction($filename)
{
    $request = $this->get('request');
    $path = $this->get('kernel')->getRootDir(). "/../web/downloads/";
    $content = file_get_contents($path.$filename);

    $response = new Response();

    //set headers
    $response->headers->set('Content-Type', 'mime/type');
    $response->headers->set('Content-Disposition', 'attachment;filename="'.$filename);

    $response->setContent($content);
    return $response;
} 
```

要生成下载链接，请检查文档的[生成 urls](http://symfony.com/doc/current/book/routing.html#generating-urls)部分。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-12T11:55:28.237

让我们做一个样本。

假设您的项目位于 /www/，因此 /www/web/ 是 symfony2 应用程序的文档根目录。现在，您尝试通过[http://server/](http://server/)访问 /www/web/ 中的所有内容都会显示出来。

/www/web/downloads/file.zip 默认可以通过[http://server/downloads/file.zip](http://server/downloads/file.zip)访问。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-18T12:36:31.547

这是迄今为止我想出的最好的解决方案，它允许您从“/var/www/web/”文件夹之外提供下载，这使得如果不运行用于提供文件的脚本就无法访问该文件。

这样你就可以检查下载者是否有权下载他想要的文件。

在此示例中，我使用了“/var/www/downloads/”，其中存储了我想用作下载的所有文件：

```
/**
 * http://api.symfony.com/2.2/Symfony/Component/HttpFoundation/BinaryFileResponse.html
 */
use Symfony\Component\HttpFoundation\BinaryFileResponse;

class OfflineToolController extends Controller
{
    /**
     * @return BinaryFileResponse
     */
    public function downloadAction()
    {
        $path = $this->get('kernel')->getRootDir(). "/../downloads/"; 
        $file = $path.'my_file.zip'; // Path to the file on the server
        $response = new BinaryFileResponse($file);

        // Give the file a name:
        $response->setContentDisposition(ResponseHeaderBag::DISPOSITION_ATTACHMENT,'my_file_name.zip');

        return $response;
    }

} 
```

来源：文档：[http ://symfony.com/doc/current/components/http_foundation/introduction.html](http://symfony.com/doc/current/components/http_foundation/introduction.html)

（应该适用于 2.2 以上的版本）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-02-03T09:08:04.630

只是将文件的路径添加到`href`属性对我不起作用。

单击时，它只显示文件而不真正下载它。

对我有用的是向`download`我的链接添加一个属性，它是一个 HTML5 属性。只需像这样添加属性：

```
<a href="path/to/file" download>Download Link</a> 
```

单击链接后，它将只下载文件而没有任何服务器端代码。

您还可以为`download`属性分配一个值。

```
<a href="path/to/file" download="filename.txt">Download Link</a> 
```

该`download`属性的值将用作下载文件的文件名，而不是存储在服务器上时使用的文件名。

我按照Symfony 网站上关于文件上传处理的[教程进行操作。](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)当我弄清楚如何为文件创建下载链接时，我发现它很有帮助。`Document`我刚刚向被调用的实体添加了一个方法，`getDownloadFileName()`它只返回我想要分配给`download`属性的文件名。

所以基本上，这就是我在 Symfony 项目的 twig 模板上实现它的方式

```
<a href="{{ asset(file.webPath) }}" download="{{ file.downloadFileName }}">
Download Link
</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-12T17:41:28.717

不知道这是否适合您，但请记住这是另一个超简单的选择：

即在你看来：

```
<a class='north' href="{{ asset('bundles/TP/Resume.pdf') }}" target="_blank" title="Download.pdf"><img src="{{ asset('bundles/TP/images/icn-save.jpg') }}" alt="Download the pdf version" /></a> 
```

它打开文件，用户可以决定是否要打印它，下载它......等等

# objective-c - NSMutableDictionary 中的 setValue forKey 崩溃

> ID：10122809
> 
> 赞同：1
> 
> 时间：2012-04-12T11:39:58.790
> 
> 标签：objective-c, ios, nsmutabledictionary

我有如下代码。我正在从 Web 服务器检索 JSON。

```
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON)
                                     {    

                                         for (NSMutableDictionary * dataDict in JSON) {

                                             if ([dataDict objectForKey:@"userPicture"])
                                             {

                                                objectForKey:@"userPicture"]);
                                                 NSURL *url = [NSURL URLWithString:[dataDict objectForKey:@"userPicture"]];
                                                 UIImage *image = [UIImage imageWithData: [NSData dataWithContentsOfURL:url]];     

                                                 [dataDict setValue:@"userPicture"
                                                             forKey:@"userPicture"]; 

                                             } 

                                             [messageList addObject: dataDict];
                                         }                                             

                                         [self processComplete];

                                     } 
                                    failure:^(NSURLRequest *request , NSURLResponse *response , NSError *error , id JSON)
                                     {
                                         NSLog(@"Failed: %@", error);        

                                     }]; 
```

但是它崩溃并出现以下错误：

> *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“-[__NSCFDictionary setObject:forKey:]: mutating method sent to immutable object”

现在，我没有得到的是，我正在尝试`setValue:forKey`在 dataDict 中，它是实例化`NSMutableDictionary`的，所以我应该能够设置值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T11:46:11.453

您已将 dataDict 声明为 NSMutableDictionary ，但这并不意味着您从 JSON 中获得了可变字典。您可以做的是指示您的 JSON 序列化程序获取可变副本（如果它支持此类选项）或手动执行此操作：

```
for (NSDictionary *dict in JSON) {

    NSMutableDictionary * dataDict = [dict mutableCopy];
    // Rest of the code here...

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:45:59.033

`dataDict`只是一个指针，没有实例化。

你实际上是在处理 simple `NSDictionary`，所以你不能修改它。如果您需要修改它，只需调用`mutableCopy`它。这将使您成为对象的所有者，因此，如果您不使用 ARC，请记住在完成后释放它。

# java - xpath 表达式因检查属性值而失败

> ID：10122811
> 
> 赞同：0
> 
> 时间：2012-04-12T11:40:05.697
> 
> 标签：java, xpath

我需要使用**@title**属性在**组**标签中获取每个**operator_id**标签属性**@name**等于某个字符串，下面的示例无法做到这一点：

 ****```
List list = doc.selectNodes("//root//menu//group[@title=" + menuTitle + "]//operator_id//@name"); 
```

XML结构：

```
 <group id="980" title="Переводы" image="" sh_n="1" enable="1" visible="0" image_bg="" type="">
  <operator_id id="10000047" name="Перевод физ лицу" image="individual.png" sh_n="1" enable="1" visible="1" /> 
  <operator_id id="10000048" name="Перевод юр лицу" image="organizations.png" sh_n="1" enable="1" visible="1" /> 
  <operator_id id="10000078" name="Перевод внутри банка" image="innerbank.png" sh_n="1" enable="1" visible="1" /> 
  <operator_id id="10000049" name="Налоговый платеж" image="taxes1.png" sh_n="1" enable="1" visible="1" /> 
  </group> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:42:33.347

无论如何，我都不是 XPath 专家，但我*认为*您不想在查询中一直使用双斜杠。你有没有尝试过：

```
List list = doc.selectNodes(
   "//root/menu/group[@title=" + menuTitle + "]/operator_id/@name"); 
```

? 如果它真的是根元素，即使`//`在开头也可以。`/`

此外，我怀疑您应该为该值添加引用，例如

```
List list = doc.selectNodes(
   "//root/menu/group[@title='" + menuTitle + "']/operator_id/@name"); 
```

或者

```
List list = doc.selectNodes(
   "//root/menu/group[@title=\"" + menuTitle + "\"]/operator_id/@name"); 
```

这些更像是 XPath 规范中的示例。****

# ios - 石英 2D 绘图：重叠线/曲线不混合

> ID：10122812
> 
> 赞同：1
> 
> 时间：2012-04-12T11:40:06.987
> 
> 标签：ios, drawing, core-graphics, quartz-graphics, uibezierpath

如果我绘制多个重叠路径，一次绘制重叠路径不会产生相同的结果。我希望重叠路径混合（即使用户是单笔创建该路径）。我怎样才能做到这一点？

请参阅附图以供参考。

1.  在第一行中，您可以看到重叠部分的颜色 **正在**混合。
2.  在第二行中，您可以看到重叠部分的颜色**没有**混合。

`UIBezierPath`用于绘制路径的逻辑：每次用户触摸和移动手指时，我都会创建一个。用户完成后，我会抚摸我的视图路径。因此，例如，在第一行中，文本由多个`UIBezierPath`s 组成，但在第二行的情况下，它是一个 s `UIBezierPath`。

![在此处输入图像描述](../Images/0170396e93f9e0d6bc2c5e255ebc36db.png)

**编辑：**另一个例子（混合与非混合）。 ![在此处输入图像描述](../Images/38588b041d1ee760cb7107a46e8e4209.png)

# emacs - 使用 Emacs (& org-mode) 跟踪弹性时间

> ID：10122813
> 
> 赞同：38
> 
> 时间：2012-04-12T11:40:10.827
> 
> 标签：emacs, org-mode

因此，在工作中，我们使用弹性工作时间（弹性工作时间、弹性工作时间......），这很好，但很难跟踪。我目前正在使用 org-mode 来跟踪我`org-clock-(out|in)`的工作时间（更少（取决于我午休多长时间等），我的弹性时间“帐户”上的余额等等。

有其他人为此使用 Emacs 吗？

我目前正在使用一个非常基本的设置来跟踪我的时间：

```
(defun check-in ()
  (interactive)
  (let (pbuf (current-buffer))
    (find-file (convert-standard-filename "whatnot"))
    (goto-char (point-max))
    (insert "\n")
    (org-insert-heading)
    (org-insert-time-stamp (current-time))
    (org-clock-in)
    (save-buffer)
    (switch-to-buffer pbuf)))

(defun check-out ()
  (interactive)
  (let (pbuf (current-buffer))
    (find-file (convert-standard-filename "whatnot"))
    (goto-char (point-max))
    (org-clock-out)
    (save-buffer)
    (switch-to-buffer pbuf))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T08:44:20.813

假设我正确理解了您的问题，我想出了一个快速的解决方案。首先，如果您要多次签入和签出，您应该确保每天只创建一个大纲条目。定义以下函数来计算给定日期的加班时间。

```
(defun compute-overtime (duration-string)
  "Computes overtime duration string for the given time DURATION-STRING."
  (let (minutes-in-a-workday
        work-minutes
        overtime-minutes)
    (defconst minutes-in-a-workday 480)
    (setq work-minutes (org-duration-string-to-minutes duration-string)
          overtime-minutes (- work-minutes minutes-in-a-workday))
    (if (< overtime-minutes 0) (setq overtime-minutes 0))
    (org-minutes-to-hh:mm-string overtime-minutes))) 
```

然后，在文件中的时钟表公式中使用它`whatnot`。

```
#+BEGIN: clocktable :maxlevel 1 :emphasize nil :scope file :formula "$3='(compute-overtime $2)::@2$3=string(\"Overtime\")"    
#+END: clocktable 
```

`C-c C-c`当您在时钟表上时点击以重新生成它。

您可以通过使用另一个公式对加班时间求和来获得总加班时间。但是，我还没有解决这个问题。

# opentext - 将权限从一个文件夹转移到另一个文件夹

> ID：10122814
> 
> 赞同：0
> 
> 时间：2012-04-12T11:40:15.080
> 
> 标签：opentext

我在 Live 链接（打开文本）中有一个文件夹，它对某些人有权限。我想在另一个地方创建另一个与此文件夹具有相同权限的文件夹。我如何转移所有权限而无需单独添加它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T03:59:09.607

我想出了一个解决方法。我就是这样做的。

由于我不是管理员，因此我无法创建组并将用户添加到其中。

1.  所以我创建了一个文件夹，手动授予用户权限并应用更改来影响其中的所有文件和文件夹。
2.  现在我在该文件夹内创建一个文件夹（让我们说'A'），以便用户拥有与父文件夹相同的权限。
3.  现在我将此文件夹 A 移动到想要的位置，并且权限被继承，因此我不必再次添加用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-14T08:26:02.427

您应该将 NodeRights 设置为与源节点相同。

```
 dmClient.SetNodeRights(ref dmOTAuth, NODEID, dmClient.GetNodeRights(ref dmOTAuth, SOURCENODEID)); 
```

或者更好的是创建节点权限并将它们设置到正确的文件夹。

# mysql - 执行变量中存在的mysql查询

> ID：10122815
> 
> 赞同：6
> 
> 时间：2012-04-12T11:40:18.063
> 
> 标签：mysql, sql, database

我有一个 MySQL 变量

```
@query = CONCAT('INSERT INTO history VALUES (',1,',',50,',UTC_TIMESTAMP()'); 
```

我想执行变量中存在的插入语句。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-12T11:43:26.387

您必须首先准备语句 using`PREPARE`然后使用`EXECUTE`

见这里：[http ://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html)

就像是：

```
SET @query = CONCAT("INSERT INTO history VALUES (",1,",",50,",UTC_TIMESTAMP()");

PREPARE stmt1 FROM @query; 
EXECUTE stmt1; 
DEALLOCATE PREPARE stmt1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T11:52:34.900

```
Set @query = CONCAT("INSERT INTO history VALUES (",1,",",50,",UTC_TIMESTAMP()"); 
```

进而

```
PREPARE stmt_name FROM @query 
```

最后

```
EXECUTE stmt_name 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-07-02T21:20:39.243

删除 CONCAT()，它除了生成错误之外什么都不做，因为它试图将一个字符串与其他任何内容连接起来。

# java - 无法在三星手机中获取 Lat Long

> ID：10122816
> 
> 赞同：-1
> 
> 时间：2012-04-12T11:40:19.150
> 
> 标签：java, android, gps

我没有使用您提供的代码在我的“Samsung Galaxy Ace”手机中获取当前的纬度和经度。原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:43:43.730

检查是否在设备设置中选中了要检索位置的选项。

设置>位置和安全>使用无线网络+使用GPS卫星

还要确保您在清单中具有相关权限：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

# ajax - Play Framework 1.2.4 在异步线程中同步作业：可能吗？

> ID：10122819
> 
> 赞同：0
> 
> 时间：2012-04-12T11:40:31.390
> 
> 标签：ajax, multithreading, asynchronous, playframework, playframework-1.x

我正在开发一个严重依赖主用户页面上的 ajax 请求的项目。

在当前网页中，我有“n”个相同的视图，每个视图都有 ajax 请求。所以当使用加载页面时，有“n”个ajax请求同时运行。

还有另一个设计问题是，在第一个请求运行后，其他请求将从缓存中收集数据。工作流程如下：

要求：

1.  发送请求
2.  检查缓存是否具有所需的值
3.  如果不可用，则从网络服务器收集数据（这需要一些时间）
4.  收集数据，将“x”分钟的值写入缓存。
5.  返回值。

因此，如果我能设法在开始时只运行一个请求并让其他请求等待第一个请求完成，他们将能够使用缓存上的可用数据，这将大大提高性能。

问题是异步运行所有作业，因此这些请求在第一页加载时不会看到缓存值。

所以我需要做的是：

```
----Main ASYNC Thread------
-------first View Request----
-------second Request (it will run after the first one so it will read from the cache---
----- and so on... 
```

那么，我如何将请求放入队列或如何让其他请求“等待”是否可能？

我知道我应该为此设计应用程序，但页面设计和 javascript 设计来自外部来源。所以我没有时间处理这些事情..

谢谢帮忙。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:43:31.543

如果您将数据加载逻辑封装在一种方法中，则可以同步该方法中的所有线程，例如。使用 AtomicBoolean 标志。

```
private final AtomicBoolean initialised = new AtomicBoolean(false);

public Data getData() {
   Data data = null;
   if (!initialised.get() && initialised.compareAndSet(false, true)) {
     cache.put(loadData());
   }
   while ((data = cache.get()) == null);
   return data;
} 
```

只是其中一种方法。

# c++ - 为类构造函数中的指针分配内存

> ID：10122820
> 
> 赞同：0
> 
> 时间：2012-04-12T11:40:39.337
> 
> 标签：c++, class, memory-management, constructor, operator-overloading

我正在开发一个程序，但在涉及类时无法理解使用指针。我知道我必须为指针分配内存，`new`并且在不使用类时对此很好。不过，我找不到一个简单的教程来解释如何执行此特定任务。有人可以给我一些帮助吗？这是我到目前为止所做的相关片段，但它正在输出随机字符：

```
"Hangman.c"
{

class Hangman
{
public:
...
char* remainingLetters();
Hangman()
 {
  char* remaining=new char[26];
 }
~Hangman();

private:
char* remaining;
}

"Hangman.cpp"
{

...
 char* Hangman::remainingLetters()
{
 ...does task to find remaining letters;

 return remaining;
 }

  ostream& operator<< (ostream &out, Hangman &game)
  {
    out << "Letters remaining are: " << game.remaining <<endl

    return out;
  }
}

"main.cpp"
{
...
cout << game;
...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T11:42:30.347

你没有初始化你的成员。你应该有：

```
Hangman()
{
   remaining=new char[26];
} 
```

你的版本：

```
 Hangman()
 {
    char* remaining=new char[26];
 } 
```

初始化一个名为 的局部变量`remaining`，其作用域是构造函数。

**您还**应该`delete[]`在析构函数中使用内存并实现复制构造函数和赋值运算符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T11:58:26.310

如果您使用 C++ 字符串而不是 C 样式的 char 数组，大多数问题都会消失。

```
class Hangman 
{ 
public:
    std::string remainingLetters(); 

    Hangman()  { } 

private:
    std::string   remaining; 
}; 
```

“刽子手.cpp”

```
std::string Hangman::remainingLetters() 
{
    //  ...does task to find remaining letters;
   return remaining;  
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T11:43:02.847

```
Hangman()
{
  char* remaining=new char[26];
} 
```

在构造函数中，您正在初始化一个局部变量，而不是类成员。此外，every`new/new[]`应该分别关联`delete/delete[]`以避免内存泄漏。与其自己管理内存，不如使用**智能指针**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T11:44:02.163

几个重要的点：

*   您需要使用`new []`构造函数中的指针成员分配内存。
*   您需要`delete []`在析构函数中释放内存。
*   你需要遵循**三法则**。

另外，请注意，在构造函数中创建与类成员同名的本地指针`remaining`充其量是模棱两可的，您应该适当地重命名它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T12:33:28.877

一方面是通过做

```
remaining=new char[26]; 
```

您正在为 25 个字母（+ 一个 0 字节）保留空间，这可能不是您想要的...

问候

安德烈亚斯

# django-forms - django crispy-forms & floppyforms w/ bootstrap：如何将 help_text 放入 ModelForm？

> ID：10122823
> 
> 赞同：8
> 
> 时间：2012-04-12T11:40:42.467
> 
> 标签：django-forms, twitter-bootstrap, django-floppyforms

我现在对 django 表单有一个小问题（但很烦人）。

我在用着：

*   推特引导
*   django floppyforms（仅适用于 html5 小部件）
*   django crispy-forms（用于模板标签和渲染）
*   我的表格都是**ModelForms**，如果可能的话不应该改变

我搜索了整个网络并尝试了很多东西，但我无法弄清楚我可以在代码中注入 help_text="Some random help text" 的地方。所以这是我的代码（出于理智原因而缩写）：

```
#forms.py:

import floppyforms as forms
from crispy_forms.helper import FormHelper
from crispy_forms.layout import *
from crispy_forms.bootstrap import *
from courses.models import *

class CourseForm(forms.ModelForm):
    class Meta:
    model = Course
    widgets = {
        'title': forms.TextInput,  # This is a floppyforms widget
        ...
    }

    def __init__(self, *args, **kwargs):
        self.helper = FormHelper()
        self.helper.form_method = 'POST'
        self.helper.form_id = ''
        self.helper.form_class = 'form-horizontal'
        self.helper.form_action = ''  # redirect in the view
        self.helper.form_tag = True
        self.helper.help_text_inline = True  # means that I want <span> elements 
        self.helper.layout = Layout(
            Fieldset('Create a new course',  # fieldset label
                Field('title', placeholder="Something...", css_class="span4"),
                ...
            ),
            FormActions(
                Submit(
                    'submit',
                    'Submit',
                    css_class="btn-primary"
                )
            ),
        )
        super(CourseForm, self).__init__(*args, **kwargs) 
```

我试图将它作为一个“attrs”字典注入到小部件中，并作为一个属性注入到字段中。

```
forms.TextInput(attrs={'help_text': 'Some help text'})
Field('title', help_text="Some help text", css_class="span4") 
```

不用说它没有用。**我需要一个挂钩**来将帮助文本放入我的控件 div 内的“跨度”或“p”中，而不是放入输入小部件中。

我的模板非常小，如果可能的话应该保持这种状态。我不想遍历表单字段：

```
#create_course.html

{% extends 'base.html'%}
{% load crispy_forms_tags %}

{% block content%}
{% crispy form %}
{% endblock content%} 
```

呈现为以下 html：

```
<div id="div_id_title" class="clearfix control-group">
  <label class="control-label requiredField" for="id_title">
    Title
    <span class="asteriskField">*</span>
  </label>
  <div class="controls">
    <input id="id_title" class="span4 textinput textInput" type="text" placeholder="Something..." maxlength="60" required="" name="title">
  </div>
</div> 
```

使用帮助文本，它应该如下所示：

```
<div id="div_id_title" class="clearfix control-group">
  <label class="control-label requiredField" for="id_title">
    Title
    <span class="asteriskField">*</span>
  </label>
  <div class="controls">
    <input id="id_title" class="span4 textinput textInput" type="text" placeholder="Something..." maxlength="60" required="" name="title">
    **<span class="help-inline">Supporting help text</span>**
  </div>
</div> 
```

任何帮助表示赞赏！我没有尝试通过 views.py 将代码注入表单，但我认为这样做没有意义。应该可以在 forms.py 中使用正确的钩子和语法来做到这一点。

对于这么简单的问题，很抱歉这么长的文字；）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T09:08:34.583

我发现了问题所在。因为我并没有真正定义任何地方的字段（我只定义了字段小部件），所以我无法访问 help_text。您可以在 forms.py 中定义字段（这是不必要且不好的做法，毕竟它们是 ModelFields）或在 models.py 中设置模型的 help_text。

希望能帮助其他有类似问题的人。

# java - 将两个 Java 字符串与“==”进行比较时出现意外结果

> ID：10122827
> 
> 赞同：2
> 
> 时间：2012-04-12T11:40:53.680
> 
> 标签：java, string, compare

> **可能重复：**
> [Equals 和 == 的区别](https://stackoverflow.com/questions/971954/difference-between-equals-and)
> [在 JDK 1.6 中，String equals 操作可以用 == 代替吗？](https://stackoverflow.com/questions/5839196/in-jdk-1-6-can-string-equals-operation-can-be-replaced-with)
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

在玩 Java-Strings 时，我没想到会出现以下结果：

```
public class Sandbox {
    public static void main(String[] args) {
        String a = "hello";
        String b = "hello";

        System.out.println(a == b);             //true        Why?, a and b both are seperate Objects
        System.out.println(a == "hello");       //true        Why?
        System.out.println(a == new String(b)); //false       As expected
    }
} 
```

我希望一切都是错误的，因为“==”比较引用。为什么会有这个结果？

当我改变`String b = "world"`时，`System.out.println(a == b);`返回 `false`。似乎正在比较 String-Object 的内容。

由于 Java 7 可以比较 switch-case-Statements 中的字符串，我认为它可能与 Java 版本有关。但正如[这里](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)所描述的，当比较 Switch-Case 中的字符串时会调用 equals-Methode。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:45:00.657

Java 总是（从 1.0 版开始）内嵌字符串文字。这意味着常量字符串被添加到池中并且重复引用相同的对象。

```
final String a = "hello";
final String b = "hell";
System.out.println(a == b + 'o'); 
```

这会打印出来`true`，因为编译器可以内联并将表达式简化为`b + 'o'`与“hello”相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T11:44:22.283

JVM在实例化字符串文字时会执行[一些技巧以提高性能并减少内存开销。](http://en.wikipedia.org/wiki/String_interning)为了减少在 JVM 中创建的 String 对象的数量，String 类保留了一个字符串池。每次您的代码创建字符串文字时，JVM 首先检查字符串文字池。如果该字符串已存在于池中，则返回对池实例的引用。如果池中不存在字符串，则实例化一个新的 String 对象，然后将其放入池中。Java 可以进行这种优化，因为字符串是不可变的，并且可以共享而不必担心数据损坏。

# java - 无法在图形布局中打开 XML 文件：FakeAdapter 无法转换为 BaseAdapter

> ID：10122830
> 
> 赞同：4
> 
> 时间：2012-04-12T11:41:01.457
> 
> 标签：java, android, eclipse

我在 Eclipse 中的 android 项目有一些问题。

我有两个 XML 布局文件，都包含 ListViews。

ListViews 在我的 Android 手机上运行良好，但 eclipse 无法打开设计窗口，出现以下错误：

```
com.android.layoutlib.bridge.impl.binding.FakeAdapter cannot be cast to android.widget.BaseAdapter 
```

这两个文件都包含以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ListView
    android:id="@+id/cardList"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:fadeScrollbars="true"
    android:fastScrollAlwaysVisible="true"
    android:fastScrollEnabled="true"
    android:scrollbarSize="30dp"
    android:scrollbarStyle="insideOverlay" >
</ListView>

</LinearLayout> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-12T16:58:50.913

这可能是

```
android:fastScrollAlwaysVisible="true" 
```

那是在窃听您的应用程序。尝试删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T18:45:01.987

只需在布局预览中更改设备。

小屏幕（英寸 < 7）无法正确预览。例如选择 10.1''。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-22T12:43:31.880

我的任何布局中都没有任何 android:fastScroll* 选项，但是我在任何版本的 Android 上都收到此错误，但无法在任何测试设备上重现。

原来当我附加一个这样声明的适配器时会发生这种情况：

```
MyAdapter implements ListAdapter 
```

更改为以下内容实际上可以解决问题：

```
MyAdapter extends BaseAdapter 
```

编辑：结果用户使用 Xposed 模块在应用程序 ListView 上进行快速滚动！不幸的是，该模块非常愚蠢并且不检查适配器类型。

# cakephp - 如何在本地浏览器上运行 phpUnit+selenium RC 远程测试用例

> ID：10122831
> 
> 赞同：2
> 
> 时间：2012-04-12T11:41:01.543
> 
> 标签：cakephp, selenium, phpunit

我正在尝试从本地机器运行 phpUnit+selenium RC 远程测试用例，并在我们的本地浏览器 Web 驱动程序中获取输出。我想在远程机器上使用服务器并通过 ssh 登录在服务器上运行测试，然后在本地浏览器上获取输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:47:31.140

可以在本地机器上运行远程测试用例。使用以下步骤，

1.  在测试用例中设置本地ip
2.  在本地机器上运行 selenium RC
3.  在服务器中运行测试用例

# php - 本机表单提交后的ajax $.post函数

> ID：10122833
> 
> 赞同：0
> 
> 时间：2012-04-12T11:41:19.523
> 
> 标签：php, javascript, jquery, form-submit

我正在尝试使用以下代码本地提交表单：

```
$('#invoices-bundle').submit(function(e) {
    e.preventDefault(); // don't submit multiple times
    this.submit();
    $.post('php/seller/invoice/invoice_print_batch.php', function(data){
        $('#added-invoices').html(data);                                             
    });// use the native submit method of the form element   
}); 
```

在提交（）之后；我想用我的 PHP 脚本的内容填充 DOM。奇怪的是，我第一次提交表单时没有填充 DOM，但第二次和之后的每次都没有填充。

不知道为什么会这样！有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:47:07.827

使用 提交表单后 `this.submit();`，其余代码将无用。页面将被更改或刷新，并且 ajax 代码将被破坏。将表单作为 ajax 发布，而不是常规表单提交或更改代码顺序，放在`submit()`最后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:19:27.123

如果您想通过 AJAX 提交，那么为什么要包含“使用本机提交”的评论（这似乎与您的阻止默认设置冲突）？

当您执行 AJAX 帖子时，您似乎*不需要执行提交操作——它会立即执行；*您是否希望收集 POST 返回值并将它们提供给您的 invoice_print_batch.php 页面？页面上是否还有需要发送的表单元素？填充这些变量并将它们发送到`$.post`调用的数据参数中。

```
$('#invoices-bundle').submit(function(e) {
    e.preventDefault(); // don't submit multiple times
    var itemToSend = form.find('input[name="inputsName"]').val();
    // ...more?
    $.post('invoice_print_batch.php', { value: itemToSend }, function(data) {
        $('#added-invoices').html(data);
    });
}); 
```

在这里，`value`将在您的 $_POST 中为 invoice_print_batch.php。

表单的自然提交已被避免，您页面上的值已发送到您的 php 页面，并且该 php POST 的结果可以在您的当前页面上更新。

如果您的真实页面处理发生在当前页面上，您可能希望将处理移动到 invoice_print_batch.php - 可能重命名该文件 - 并让该页面处理所有表单输入并返回/打印“答案”。最终结果将是一个感觉更灵敏的页面，而无需任何页面加载/重定向来处理提交。

你需要有完整的路径吗？为了便于阅读，我缩短了它，如果当前页面在同一个目录中，你可以这样做——它可能不是。

# java - 如何将 JavaScript 变量发送到 Java 小程序

> ID：10122836
> 
> 赞同：1
> 
> 时间：2012-04-12T11:41:31.800
> 
> 标签：java, javascript, applet

我有一个 JavaScript 函数，它是：

```
function printreceipt(tax,subtotal,total)
{
subtotalElem=document.getElementById("total");
var taxElem=document.getElementById("tax");
productElem=document.getElementById("product-name");
alert("here are my products" + taxElem.innerHTML + subtotalElem.innerHTML);
} 
```

如何将 JavaScript 变量发送到 Java 小程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T11:50:12.717

你的小程序应该有一个公共方法，例如 receiveData() ：

```
public void receiveData(String dataFromJS)
{
   //Do what you need with your data
} 
```

假设您的网页中有类似的内容：

```
<applet id ="appletID" name="myApplet" ... ></applet> 
```

在您的 javascript 中，您只需像这样调用小程序公共方法：

```
var myApp = document.applets['myApplet'];
myApp.receiveData(taxElem.innerHTML + subtotalElem.innerHTML); 
```

前面的示例将taxElem 和subtotalElem 内容发送到applet。

要将数据从 Applet 发送到 JS，您应该 在 applet 中使用[JSObject](http://docs.oracle.com/javase/7/docs/technotes/guides/plugin/developer_guide/java_js.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T11:50:36.143

您可以使用 netscape.javascript。**JSObject**用于 Java 到 JS 方向，或**通过其 id 引用小程序以**用于 JS 到 Java。

有关详细示例，请参见此处：[http ://rostislav-matl.blogspot.com/2011/10/java-applets-building-with-maven.html](http://rostislav-matl.blogspot.com/2011/10/java-applets-building-with-maven.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:51:59.920

最可靠的方法是使用 URL 中编码的参数打开一个新页面，然后将这些参数作为元素写入小程序`param`元素。（尽管对其他每个答案都+1。）

# facebook - Facebook评论审核 - 无法控制

> ID：10122839
> 
> 赞同：0
> 
> 时间：2012-04-12T11:41:54.357
> 
> 标签：facebook, joomla, facebook-comments

我似乎无法在我的网站上审核评论这是我在此链接下放置的代码： [http ://www.messianic.co.il/index.php/wall](http://www.messianic.co.il/index.php/wall)

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/he_IL/all.js#xfbml=1&appId=119904308062962";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-comments" data-href="http://www.messianic.co.il" data-num-posts="100" data-width="1110"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:47:16.273

`fb:admins`应该是逗号分隔的 id 列表，即删除 {}，对于`fb:app_id`

编辑：

你需要改变

```
<meta property="fb:admins" content="{518305576}" />
<meta property="fb:app_id" content="{119904308062962}" /> 
```

到

```
<meta property="fb:admins" content="518305576"/>
<meta property="fb:app_id" content="119904308062962" /> 
```

# algorithm - 在计算机上生成 TI-84 随机数

> ID：10122841
> 
> 赞同：1
> 
> 时间：2012-04-12T11:42:00.447
> 
> 标签：algorithm, random, texas-instruments

TI-84 randInt 函数如何生成随机数？我想在我的电脑上复制这个 PRNG，这样我可以获得更大的样本量，但我不确定如何。从计算器一次复制数字 5 不是一种选择。运行 OS X 10.7.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-25T23:20:26.890

[**根据我在这里**](https://stackoverflow.com/a/32790991/752843)更广泛的回答，以下是 Ti PRNG 的 C++ 实现：

```
#include <iostream>
#include <iomanip>
using namespace std;

long mod1  = 2147483563;
long mod2  = 2147483399;
long mult1 = 40014;
long mult2 = 40692;
long seed1,seed2;

void Seed(int n){
  if(n<0) //Perform an abs
    n = -n;
  if(n==0){
    seed1 = 12345;
    seed2 = 67890;
  } else {
    seed1 = (mult1*n)%mod1;
    seed2 = n%mod2;
  }
}

double Uniform(){
  double result;
  seed1  = (seed1*mult1)%mod1;
  seed2  = (seed2*mult2)%mod2;
  result = (double)(seed1-seed2)/(double)mod1;
  if(result<0)
    result = result+1;
  return result;
}

double RandInt(int min, int max){
  if(min<max)
    return min+int((max-min+1)*Uniform());
  else
    return max+int((min-max+1)*Uniform());
}

int main(){
  Seed(0);
  for(int i=0;i<10;i++)
    cout<<setprecision(10)<<RandInt(5,97)<<endl;
} 
```

我使用 Ti-83 仿真器生成以下值`RandInt(5,97)`：

[![随机数输出](../Images/1a6c2ee4bf2366e8489942dfd9d585c5.png)](https://i.stack.imgur.com/9qA0T.png)

这与我上面的程序的输出相匹配：

```
$ ./a.out 
92
89
18
52
42
73
9
36
97
23 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:53:48.567

我不知道如何在计算机上准确复制它的功能，但是您不必一次只生成五个数字。您可以将非常大的随机数样本存储在列表中，然后通过 ti connect 软件将它们传输到您的计算机。

# rest - 我应该休息还是肥皂

> ID：10122846
> 
> 赞同：4
> 
> 时间：2012-04-12T11:42:18.290
> 
> 标签：rest, soap

首先：我来自德国，很抱歉我的英语。

我阅读了很多关于 REST 和 SOAP 的文章，并发现了许多优点和缺点，但我仍然不确定将哪一个用于我的应用程序。我的应用程序应该提供一个用于创建、删除、更新和接收数据的 API。所以我想用 REST 的方式来实现它。还应该可以将大数据（例如视频）发布到我的 API，并且该 API 应该只能由经过身份验证的人员使用。

最后两个约束是否迫使我选择 SOAP 而不是 REST，或者是否（很容易）可以通过 REST API 对用户进行身份验证？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:47:38.117

SOAP 比 REST 有更多的开销。所以我更愿意在你的情况下使用 REST。

有多种方法可以向任何 Web 服务添加身份验证。

您可以在方法中使用“票证”或使用 cookie 或 http 协议的其他自定义标头

# wpf - 工作流设计器线 onclick 太细

> ID：10122853
> 
> 赞同：1
> 
> 时间：2012-04-12T11:42:37.783
> 
> 标签：wpf, vb.net

我正在制作一个工作流设计器，用 wpf 和 vb.net 在画布上创建工作流。我已经可以在具有良好功能的对象之间绘制线条（关系）。现在我想实现一种删除关系的方法。我在形状上添加了一个 onclick 处理程序，但线条非常细且难以点击。我听说要绘制 2 条线 1 的笔画粗细，但这是不可能的，因为 drawline 方法在 cpu 上很重。

谢谢你的帮忙

大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:41:56.920

您可以将鼠标按下事件处理程序添加到 Canvas，而不是 Shape 对象，然后[在 Visual Layer中使用](http://msdn.microsoft.com/en-us/library/ms752097.aspx)[命中测试几何体](http://msdn.microsoft.com/en-us/library/system.windows.media.geometryhittestparameters.aspx)（例如椭圆）进行命中测试（虽然 API 有点奇怪） 。Canvas 需要`Background`设置（例如 to `Transparent`）来接收鼠标事件。

抱歉，这是 C#，但我不会说 VB：

```
private void Canvas_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    Canvas canvas = sender as Canvas;
    EllipseGeometry hitTestGeometry =
        new EllipseGeometry(e.GetPosition(canvas), 10d, 10d);
    Shape hitShape = null;

    HitTestResultCallback hitTestCallback =
        result =>
        {
            hitShape = result.VisualHit as Shape;
            return hitShape != null ? HitTestResultBehavior.Stop : HitTestResultBehavior.Continue;
        };

    VisualTreeHelper.HitTest(canvas, null, hitTestCallback, new GeometryHitTestParameters(hitTestGeometry));

    if (hitShape != null)
    {
        System.Diagnostics.Trace.TraceInformation("hit shape: {0}", hitShape);
    }
} 
```

**编辑：**

这是等效的 VB 代码。VB 不支持多行 lambda 表达式，因此必须显式声明命中测试回调

```
Private Function htCallback(ByVal result As HitTestResult) _
 As HitTestResultBehavior
    Dim hitShape As Shape = Nothing
    hitShape = TryCast(result.VisualHit, Shape)
    If hitShape IsNot Nothing Then
        'do something 
    End If
    Return If(hitShape IsNot Nothing, HitTestResultBehavior.[Stop], _
      HitTestResultBehavior.[Continue])
End Function

Private Sub Canvas_MouseLeftButtonDown(ByVal sender As Object, _
  ByVal e As MouseButtonEventArgs) Handles Canvas1.MouseRightButtonDown
    Dim canvas As Canvas = TryCast(sender, Canvas)
    Dim hitTestGeometry As New EllipseGeometry(e.GetPosition(canvas), 10.0, 10.0)
    Dim hitTestCallback As HitTestResultCallback = _
      New HitTestResultCallback(AddressOf htCallback)
    VisualTreeHelper.HitTest(canvas, Nothing, hitTestCallback, _
      New GeometryHitTestParameters(hitTestGeometry))
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T12:31:11.677

也许是一个简单的答案，但是当您将新行添加到画布时，您可以执行类似的操作

```
AddHandler myLine.MouseEnter, AddressOf lineHover
AddHandler myLine.MouseLeave, AddressOf lineLeave
AddHandler myLine.MouseDown, AddressOf lineDelete
Canvas1.Children.Add(myLine) 
```

在哪里

```
Private Sub lineHover(ByVal sender As Object, ByVal e As MouseEventArgs)
    CType(sender, Line).StrokeThickness = 3
End Sub

Private Sub lineLeave(ByVal sender As Object, ByVal e As MouseEventArgs)
    CType(sender, Line).StrokeThickness = 1
End Sub

Private Sub lineDelete(ByVal sender As Object, ByVal e As MouseEventArgs)
    Canvas1.Children.Remove(CType(sender, Line))
End Sub 
```

这样，当您的鼠标悬停在一条线上时，它的笔画粗细就会增加。这使该行更容易单击，并且还为您的用户提供了一些关于他们正在删除哪一行的良好反馈。

# silverlight - 提取后如何将dll放回xap文件？

> ID：10122854
> 
> 赞同：0
> 
> 时间：2012-04-12T11:42:43.090
> 
> 标签：silverlight, zip, xap

我使用 winzip 提取了一个 xap 文件并编辑了一些资源。

有什么办法可以将 dll 打包回 xap 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:53:40.953

[您可以使用7-Zip](http://www.7-zip.org/)轻松做到这一点。只需在 xap 上使用“打开存档”，然后将文件拖放到其中。

# c# - 具有相同签名的.Net 3.5中Expression.Assign的实现？

> ID：10122856
> 
> 赞同：3
> 
> 时间：2012-04-12T11:42:56.463
> 
> 标签：c#, .net-4.0, .net-3.5, expression, expression-trees

`Expression.Assign`在 .NET 4 之前不可用。我需要在 .NET 3.5 下使用原始签名实现此方法：

```
public static BinaryExpression Assign(
    Expression left,
    Expression right
) 
```

澄清：在某些情况下，我不是在寻找使用这种方法的方法。我需要实施一般情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T12:54:18.500

由于没有 ，因此您无法获得精确的等价物`ExpressionType.Assign`，但可以制作类似的东西：

```
 public static class ExpressionEx
{
    public static BinaryExpression Assign(Expression left, Expression right)
    {
        var assign = typeof(Assigner<>).MakeGenericType(left.Type).GetMethod("Assign");

        var assignExpr = Expression.Add(left, right, assign);

        return assignExpr;
    }

    private static class Assigner<T>
    {
        public static T Assign(ref T left, T right)
        {
            return (left = right);
        }
    }
} 

```

然后您可以使用它来生成分配：

```
 class Foo
{
    public int Data
    {
        get;
        set;
    }
}

class Program
{
    static Action<object, object> MakeSetter(PropertyInfo info)
    {
        var objectParameter = Expression.Parameter(typeof(object), string.Empty);
        var valueParameter = Expression.Parameter(typeof(object), string.Empty);
        var setterExpression = Expression.Lambda<Action<object, object>>(
            **ExpressionEx.Assign**(
                Expression.Property(
                    Expression.Convert(objectParameter, info.DeclaringType),
                    info),
                Expression.Convert(valueParameter, info.PropertyType)),
            objectParameter,
            valueParameter);

        return setterExpression.Compile();
    }

    static void Main()
    {
        var foo = new Foo();
        var property = typeof(Foo).GetProperty("Data");

        var setter = MakeSetter(property);
        setter(foo, 10);
        Console.WriteLine(foo.Data);
    }
} 

```

如果你真的不需要`BinaryExpression`作为返回类型，你可以使用它`Expression.Call`而不是`Add`这样它就不会那么hackish。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:34:16.863

恐怕你不能。

原因如下：

1.  `ExpressionType`枚举不包含`Assign`3.5 中的成员。
2.  我尝试使用错误的 ExpressionType 并使用我的方法创建二进制表达式`Expression.MakeBinary()`，但该方法被忽略。（生成的 BinaryExpression 具有 standard`Method`或`Method`= null。）
3.  你不能`Method`在实例中赋值——它是只读的并且类是密封的，所以你不能在派生类中解决它。

但是由于他们已经将该`method`参数包含在 中`MakeBinary()`，因此可能仍然存在一些解决方法......我不能 100% 确定这是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-05T17:04:39.317

基于 Konstantin Oznobihin 的破解，这里稍微修改了一个，其中包含`MethodCallExpression`而不是 a `BinaryExpression`：

```
public class ExpressionEx
{
    public static Expression Assign(Expression left, Expression right)
    {
        var method = typeof(ExpressionEx).GetMethod("Assign", BindingFlags.Static | BindingFlags.NonPublic).MakeGenericMethod(left.Type);
        return Expression.Call(method, left, right);
    }
    private static void Assign<T>(ref T left, T right)
    {
        left = right;
    }
} 
```

`Assign`这将创建一个到内部的-method的委托，`ExpressionEx`现在可以像这样轻松地使用：

```
var expr = ExpressionEx.Assign(myInstanceExpression, newValueExpression); 
```

# php - 获取绝对文件路径

> ID：10122859
> 
> 赞同：1
> 
> 时间：2012-04-12T11:43:13.577
> 
> 标签：php, filepath, absolute-path

如何获取绝对文件路径php

我有一个文件夹 abc 和 xyz。

我使用 Ajax 请求将 a.php 的 a.php 文件包含在 xyz 文件夹中，方法是提供如下相对路径：

```
../a.php 
```

文件 a.php 包含一些使用 Ajax 请求完成的操作。

在 xyz 文件夹中，我想执行在 abc 文件夹中执行的相同操作，但是当我尝试执行这些操作时，它正在 xyz 文件夹而不是 abc 中搜索文件，因此我想在 xyz 中执行的操作不起作用。

请帮助我如何做到这一点。

更新代码：

```
$(function(){
    $.ajax({
        type:"POST",
        url: "../xyz/a.php",
        data: {
            "Id": '<?php echo $_GET['Id'];?>'
        },
        success: function(data){
            $("#divId").html(data);
        }
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:00:56.500

我建议您在 config/index/bootstrap 中执行以下操作：

```
define('ROOT_DIRECTORY', dirname(__FILE__).'/'); 
```

这样，当您需要从其他位置加载文件时，您可以使所有路径都相对于 ROOT_DIRECTORY。例如：

```
require_once(ROOT_DIRECTORY . 'abc/xyz.php'); 
```

这将使文件包含更简单，并允许您将整个项目目录移动到另一个位置（例如生产服务器）而不会破坏任何“路径”逻辑。

看到你的代码更新，我看到你真的在谈论来自 javascript 的请求。在这种情况下，只需将完整的 url 留给文件：url:'http://server.com/xyx/abc.php'

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-04T13:02:27.027

例如，您在**[http://your-site.com/folder1/folder2/file.php](http://your-site.com/folder1/folder2/file.php)**。

这是php变量：

```
==============================================================================

    ======I======
    __File__;                           C:\wamp\www\folder1\folder2\file.php
    $_SERVER['PHP_SELF'];               /folder1/folder2/file.php
    //$_SERVER['PHP_SELF'] is the same as $_SERVER["REQUEST_URI"];

    ======II======
    getcwd();                           C:\wamp\www\folder1\folder2\
    dirname();                          OUTPUTS NOTHING - EMPTY NOT ALLOWED
    basename();                         OUTPUTS NOTHING - EMPTY NOT ALLOWED
    __dir__;                            C:\wamp\www\folder1\folder2

    ======III======
    getcwd( XXX );                      OUTPUTS NOTHING - PARAMETER NOT ALLOWED
    getcwd( XXX );                      OUTPUTS NOTHING - PARAMETER NOT ALLOWED
    getcwd( XXX );                      OUTPUTS NOTHING - PARAMETER NOT ALLOWED

    dirname(__FILE__);                  C:\wamp\www\folder1\folder2
    dirname($_SERVER['PHP_SELF']);      /folder1/folder2
    dirname(getcwd());                  C:\wamp\www\folder1
    dirname(dirname());                 OUTPUTS NOTHING - EMPTY NOT ALLOWED
    dirname(basename());                OUTPUTS NOTHING - EMPTY NOT ALLOWED

    basename(__FILE__);                 file.php
    basename($_SERVER['PHP_SELF']);     file.php
    basename(getcwd());                 folder2
    basename(dirname());                OUTPUTS NOTHING - EMPTY NOT ALLOWED
    basename(basename());               OUTPUTS NOTHING - EMPTY NOT ALLOWED

    ======IV======
    on dirname
    dirname(dirname(__FILE__));                     C:\wamp\www\folder1
    dirname(dirname($_SERVER['PHP_SELF']));         /folder1
    dirname(dirname(getcwd()));                     C:\wamp\www
    basename(dirname(__FILE__));                    folder2
    basename(dirname($_SERVER['PHP_SELF']));        folder2
    basename(dirname(getcwd()));                    folder1;

    on basename
    dirname(basename(__FILE__));                    .
    dirname(basename($_SERVER['PHP_SELF']));        .
    dirname(basename(getcwd()));                    .
    basename(basename(__FILE__));                   file.php
    basename(basename($_SERVER['PHP_SELF']));       file.php
    basename(basename(getcwd()));                   folder2
============================================================================== 
```

============示例===========

主页网址

```
<?php echo $_SERVER['HTTP_HOST'];?> 
```

仅当前文件网址（例如：mysite.com/myfile.php）

```
<?php echo $_SERVER['HTTP_HOST'].$_SERVER['PHP_SELF']; ?> 
```

当前网址完全（如：mysite.com/myfile.php?action=blabla

```
<?php echo $_SERVER['HTTP_HOST'].$_SERVER["REQUEST_URI"];?> 
```

获取文件的 RealPath（即使它包含在内）（将 /var/public_html 更改为您想要的根目录）

```
<?php
// First step: Get full path
$cur_file=str_replace('\\','/',__FILE__);
// Second step: Remove the root path
$cur_file=preg_replace('/(.*?)\/var\/public_html/','',$cur_file);
?> 
```

对于 wordpress，已经存在用于获取插件或主题 url 的预定义函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T11:51:58.417

首先，如果你想在`xyz`from中包含一个文件`abc`，你需要做`../abc/a.php`，而不是`../a.php`（当然，除非该文件与你的两个目录在同一级别）。

其次，调用了将相对路径转换为绝对路径的函数，您可以在[此处](http://uk.php.net/manual/en/function.realpath.php)`realpath`找到文档。

如果你的目录结构是这样的：

```
abc/
xyz/
a.php 
```

`a.php`...然后要从位于您的目录之一中的文件中获取绝对路径，您可以

```
$absolute = realpath('../a.php'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T11:13:06.887

在 Ajax 请求中，我已经像这样更改了 url

```
url: location.protocol + "//" + location.host + "projectname/foldername/filename.php" 
```

然后它完美地工作

# maven - tycho build，对于 linux/64 目标的 chmod 操作失败

> ID：10122862
> 
> 赞同：1
> 
> 时间：2012-04-12T11:43:22.830
> 
> 标签：maven, rcp, chmod, tycho

我正在 64 位 ubuntu 上使用 tycho (0.14.1) 构建一个 rcp 应用程序。对于目标操作系统 win32/64，构建工作正常，但是当我将 linux/64 添加到目标时，构建失败并出现以下错误：

安装 org.some.rcp.product 0.0.0。安装失败。安装项目会话上下文时出错：(profile=DefaultProfile, phase=org.eclipse.equinox.internal.p2.engine.phases.Install,operand=null --> [R]org.some.rcp.product .executable.gtk.linux.x86_64 0.0.0，action=org.eclipse.equinox.internal.p2.touchpoint.natives.actions.ChmodAction）。操作 chmod 失败 - 文件 /home/user/workspace/some.rcp.product.tycho/target/products/some.rcp.product/linux/gtk/x86_64/launcher.svn-base 不存在

我完全不知道为什么 svn 字符串会出现在这里，在构建中涉及的任何项目中都没有 svn 引用。

任何提示/解决方案？

编辑：我忘了提，我已经尝试设置自定义启动器名称，如下所述： [https](https://bugs.eclipse.org/bugs/show_bug.cgi?id=349877) : //bugs.eclipse.org/bugs/show_bug.cgi?id=349877 对我不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:54:08.277

这看起来像一个错误。如果您仍然可以重现问题，请将这些步骤作为错误发布在[Tycho 问题跟踪器](https://bugs.eclipse.org/bugs/query.cgi?format=specific;product=Tycho)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:26:57.533

不知道为什么，但是将 eclipse repo 添加到我自己的目标定义中（[tycho-example-4](http://git.eclipse.org/c/tycho/org.eclipse.tycho-demo.git/tree/itp04-rcp/target-definition/helios.target)描述了如何）解决了这个问题。

# windows-phone-7 - 将日期时间格式化为人类可读的（例如消息应用程序）

> ID：10122869
> 
> 赞同：0
> 
> 时间：2012-04-12T11:43:46.740
> 
> 标签：windows-phone-7, xaml, silverlight-4.0, windows-phone-7.1

如何格式化 DateTime 绑定，使其看起来与 Messaging Hub 完全一样（或尽可能相似）。

以下块是我理想地用来显示它的代码，还是我只需要放弃并使用转换器？

```
<TextBlock TextAlignment="Right">
    <TextBlock.Text>
        <Binding Path="Time"
                 StringFormat="*String format here?*"/>
    </TextBlock.Text>
</TextBlock> 
```

我的目标结果如下：

*   12:17（仅限时间）如果今天
*   周三，18:10（日+时间），如果在 7 天内
*   01/04，15:58（如果超过 7 天）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:47:03.683

您可能需要实现一个日期到字符串的转换器，该转换器将生成您正在寻找的特定文本，因为您需要的逻辑量超出了 StringFormat 属性的范围。

有关更多详细信息，特别是 ThreadDateTimeConverter ：-

[http://www.windowsphonegeek.com/articles/Windows-Phone-Toolkit-DateTime-Converters](http://www.windowsphonegeek.com/articles/Windows-Phone-Toolkit-DateTime-Converters)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:49:55.040

使用[Silverlight for Windows Phone Toolkit](http://silverlight.codeplex.com)中的 DateTimeConverters 之一！

您可以[在此处](http://www.windowsphonegeek.com/articles/Windows-Phone-Toolkit-DateTime-Converters)查看有关 DateTimeConverters 使用情况的一些信息。

# postgresql - 更改表错误添加 2 列

> ID：10122872
> 
> 赞同：2
> 
> 时间：2012-04-12T11:43:51.060
> 
> 标签：postgresql

数据库：POSTGRESQL

我有一个带有 2 列 id、name 的表 location_type。我想删除列名并添加另外 2 个列：县、市。但是我得到错误，我不知道为什么。这是我尝试过的：

```
ALTER TABLE location_type
DROP COLUMN name;

ALTER TABLE location_type
ADD (county character varying(255) NOT NULL,
     city character varying(255) NOT NULL); 
```

也许有人可以看到我做错了什么。任何建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T11:47:29.687

你的语法是错误的。试试这个[[文档]](http://www.postgresql.org/docs/current/interactive/sql-altertable.html)：

```
ALTER TABLE location_type
    ADD county character varying(255) NOT NULL,
    ADD city character varying(255) NOT NULL; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T11:47:32.330

试试这个

```
ALTER TABLE location_type DROP COLUMN name;
ALTER TABLE location_type ADD county character varying(255) NOT NULL;
ALTER TABLE location_type ADD city character varying(255) NOT NULL; 
```

或者

```
ALTER TABLE location_type 
    DROP COLUMN name,
    ADD county character varying(255) NOT NULL,
    ADD city character varying(255) NOT NULL; 
```

检查[手册页](http://www.postgresql.org/docs/current/static/sql-altertable.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T17:18:08.450

除了@Marco 和@Erkan 已经清理的内容：

如果您的表已经填充（有行），则不能添加`NOT NULL`不带`DEFAULT`子句的列。`NULL`除非您提供不同的值，否则新行将添加值`DEFAULT`- 因此与约束相矛盾。

在旧版本的 PostgreSQL（版本 8.0 之前）中，您不能对`DEFAULT`新列使用该子句。您必须添加列，填充它，**然后**设置它`NOT NULL`。

# haskell - Haskell中的惰性笛卡尔积

> ID：10122880
> 
> 赞同：9
> 
> 时间：2012-04-12T11:44:17.790
> 
> 标签：haskell, lazy-evaluation, cartesian-product

我想在 Haskell 中生成一个相当大但有限的笛卡尔积，然后我需要对其进行迭代（想想平均场模型的分区函数）。自然的事情就是使用`sequence`，像这样：

```
l = sequence $ replicate n [0,1,2] 
```

不幸的是，对于 large `n`，这不适合内存，`length l`例如，我一请求就用完了堆。我需要一种方法来懒惰地做同样的事情。我最终“重新发现”了 base-3 算术，就像这样，

```
nextConfig []     = []
nextConfig (0:xs) = 1:xs
nextConfig (1:xs) = 2:xs
nextConfig (2:xs) = 0:(nextConfig xs)

ll = take (3^n) $ iterate nextConfig $ replicate n 0 
```

（有效）但感觉就像重新发明轮子，而且它太具体了。生成产品的更好的懒惰方式是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T12:53:52.183

与序列相比，通过以相反的顺序绑定可以获得更内存友好的方式，

```
foo 0 _ = [[]]
foo k xs = [h:t | t <- foo (k-1) xs, h <- xs] 
```

由于共享较少，速度较慢，但​​由于内存是您的问题，也许对您来说已经足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-06T17:41:39.007

无限列表的模式是从左上角 a1 然后 a2 到 b1，a3 到 c1

```
a1 a2 a3 a4
b1 b2 b3 b4
c1 c2 c3 c4
d1 d2 d3 d4 
```

也就是说，`a1, a2 b1, a3 b2 c1, a4 b3 c2 d1` 逗号分隔组中的字母是 `a ab abc abcd`和数字 `1 21 321 4321`

无限列表输出应该首先用 a1 对角增长，然后对角添加 2，然后对角添加 3，依此类推。

上述单个字母或数字中的任何一个都必须反向进行。

```
diag xs ys = [(a,b)| (m,n) <- zip (inits xs) (inits ys), (a,b) <- zip m $ reverse n ] 
```

与每`(m,n)`对反向。我更喜欢一次全部反转，重复一个操作。我认为，无限列表的反向只能通过连续的反向列表来完成。

```
rsl = tail.scanl (flip (:)) []

take 5 $ rsl [1..]

[[1],[2,1],[3,2,1],[4,3,2,1],[5,4,3,2,1]] 
```

然后依次处理每个列表。`zip`限制每次迭代中的非反转列表。

```
plr xs ys = [ (a,b) | ls <- rsl xs, (a,b) <- zip ls ys ]

sort.take 10.plr ['a'..] $ [1..]

[('a',1),('a',2),('a',3),('a',4),('b',1),('b',2),('b',3),('c',1),('c',2),('d',1)] 
```

`sort`，因为对角取值意味着它们不像上面的第一个线性列表那样按顺序排列。`sort`从**Data.List导入**

顺便说一句，因为这是遍历对角三角形的数字。我`take 10`上面用过，三角数是：

```
take 11 [sum ls | ls <- rsl [1..]]

[1,3,6,10,15,21,28,36,45,55,66] 
```

# wpf - 加载 XAML 时繁忙指示器没有响应

> ID：10122883
> 
> 赞同：-1
> 
> 时间：2012-04-12T11:44:23.890
> 
> 标签：wpf, busyindicator

我有一个 WPF 应用程序，它具有带有大型数据绑定的复杂 UI。我正在使用 WCF 异步调用服务器获取数据。从服务器获取数据大约需要 4 秒，对于 XAML 绑定大约需要 6 秒。为了获得用户通知，我给出了一个繁忙的指示器，它将正常运行（进度显示在进度条上），直到数据到达客户端。当我将该结果分配给 XAML 时，它（忙碌指示器）将变得无响应（也是主窗口）。是因为单一的 UI 线程吗？是否可以在 WCF 异步调用内的单独线程（如后台工作人员）中显示繁忙指示器？或者还有其他处理这种情况的好方法吗？

```
busyIndicator.IsBusy = true;    

ServiceAgentInstance.GetAll((s1, e1) =>    
    {    
        ObservableCollection<Model> collection = e1.Result;   
        busyIndicator.IsBusy = false;   
    }); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:49:21.620

听起来您正在 UI 线程上发出 WCF 请求，这应该避免。尝试使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)发出您的请求，这应该可以释放您的 UI 线程来为繁忙指示器设置动画。

# javascript - 将图像从 java applet 传递到 html

> ID：10122884
> 
> 赞同：1
> 
> 时间：2012-04-12T11:44:27.243
> 
> 标签：javascript, html, applet, parameter-passing

我正在使用签名的 Java 小程序从用户的文件系统加载图像。
然后我想在运行小程序的网站上显示这个图像。

我知道如何在小程序和 JavaScript 之间进行通信，但我只使用字符串和数字作为参数。

如何处理图像对象以及如何在网站上显示它们？

如果需要，我可以转换小程序中的格式以匹配 JavaScript。

编辑：
我通过来自 JSObject 的调用将图像对象从 java 传递到 javascript。Chrome 忽略呼叫和 Firefox 崩溃..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:45:37.907

您可以将图像编码为 Base 64，将其作为字符串传递给 JS，然后使用`data:image/gif;`表单 URL 将其显示在网页中。您需要“滚动您自己的”base 64 编码器或查找 API，因为 J2SE 没有用于转换的内置方法。¹

它在 HTML 中可能看起来像这样。

```
<img src="data:image/gif;base64,R0lGODlhEAAOALMAAOazToeHh0tLS/7LZv/0jvb29t/f3//Ub/
/ge8WSLf/rhf/3kdbW1mxsbP//mf///yH5BAAAAAAALAAAAAAQAA4AAARe8L1Ekyky67QZ1hLnjM5UUde0ECwLJoExKcpp
V0aCcGCmTIHEIUEqjgaORCMxIC6e0CcguWw6aFjsVMkkIr7g77ZKPJjPZqIyd7sJAgVGoEGv2xsBxqNgYPj/gAwXEQA7" 
width="16" height="14" alt="embedded folder icon"> 
```

EG 取自[带有数据 URL 的内联图像](http://www.websiteoptimization.com/speed/tweak/inline-images/)。

1.  在后来的 JRE（一旦引入 JAXB）看起来使用这样的[`DatatypeConverter.printBase64Binary(byte[])`](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/DatatypeConverter.html#printBase64Binary%28byte%5b%5d%29)东西：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
try {
    ImageIO.write(image, "png", baos);
} catch (IOException e) {
    showError(e);
    e.printStackTrace();
}
String imageString = "data:image/png;base64," +
    DatatypeConverter.printBase64Binary(baos.toByteArray()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:09:55.757

这可能会解决您的问题[http://www.realapplets.com/tutorial/ImageExample.html](http://www.realapplets.com/tutorial/ImageExample.html)！

# ios - MonoTouch.Dialog：在同一个 StringElement 中使用不同的字体

> ID：10122886
> 
> 赞同：2
> 
> 时间：2012-04-12T11:44:31.920
> 
> 标签：ios, fonts, xamarin.ios, monotouch.dialog

`StringElement`是否可以为与MonoTouch.Dialog 中的单个关联的文本分配不同的字体，例如**提醒**：医生的约会

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:56:56.407

而是查看 StyledStringElement。虽然我不确定它是否允许您在单个元素中混合样式。您可能需要为此创建一个自定义元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T12:28:18.537

就像@Jason 所说，您始终可以创建自己的`Element`. 事实上，即使我的定制需求很少，我通常也会这样做。你可以[`MessageElement`](https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Elements/MessageElement.cs)看看如何渲染不同的字符串。

您还可以选择更简单的方法，使用[`UIViewElement`](https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Elements.cs#L1845)并定义您`UIView`的两个标签具有不同的字体或完全控制[`OwnerDrawElement`](https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Elements/OwnerDrawnElement.cs).

# ruby-on-rails-3 - Rails 3 正确使用动态列

> ID：10122888
> 
> 赞同：0
> 
> 时间：2012-04-12T11:44:50.220
> 
> 标签：ruby-on-rails-3

我有一个用户模型，它有一个连接列，我在调用views/user/_showcase.html.erb 部分时尝试将其引用为additional_column

有关完整的背景故事，请参阅[正确使用部分的 Rails 3 菜鸟问题，](https://stackoverflow.com/posts/10116857)因为我被要求将问题分成两篇文章。

意见/用户/_showcase.html.erb

```
<td><img src="<%= user.avatar_url(32) %>" /></td>
<td><%= user.username%></td>    
<% additional_columns.each do |column| %>
    <td><%= user[column]%></td>
<% end %> 
```

这是我在用户模型上实现计算列的方式

```
class User < ActiveRecord::Base

  include ActionView::Helpers::DateHelper

  ... snip ...

  # Get the last 10 users who made Karmunity accounts
  scope :get_newest_users , order("created_at desc").limit(10);

  # Get 10 users with the highest karma score
  scope :get_highest_rated_user, order("karma_score desc").limit(10);

  scope :avatar_url
  scope :joined

  # get the dated they joined in time ago format  
  def joined
    time_ago_in_words(self.created_at)
  end

  # Get the gravatar image url 
  def avatar_url (size=nil)

    query_string = '';

    unless size.nil?
      query_string = 's=' + size.to_s  
    end

    "http://www.gravatar.com/avatar/" + Digest::MD5.hexdigest(self.email.strip.downcase) + "?#{query_string}"
  end
end 
```

但是，当我执行此代码 user.avatar_url 时，如果我手动键入 user.joined，它可以正常工作，但动态列（我假设它的行为类似于 user[:joined]）返回一个空字符串。我确定我在这里做了一些愚蠢的事情，但我不知道如何动态获取计算/格式化的模型值。

为了完整起见，这是我对部分的调用

```
<%= render :partial => 'users/showcase', :locals => { :id => 'newest_users', :title => 'Newest Users', :users => @newest_users, :additional_columns => [:affiliation,:joined]} %> 
```

我会很感激任何方向，因为这是我的第一个 Rails 应用程序，我不确定我应该问什么样的问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:10:47.307

所以我偶然发现了一个解决方案，但我不知道这是否是一个好的实现

```
<% users.each do |user| %>
    <tr>
        <td><img src="<%= user.avatar_url(32) %>" /></td>
        <td><%= user.username%></td>
        <% additional_columns.each do |column| %>
            <td><%= user.send(column)%></td>
        <% end %>
    </tr>
<% end %> 
```

# java - 通过 Hibernate-Criteria 和 Session.save(object) 注入 SQL

> ID：10122894
> 
> 赞同：5
> 
> 时间：2012-04-12T11:45:12.737
> 
> 标签：java, sql, hibernate

为了避免 sql 注入，通常可以在 HQL 中使用*位置参数*和*命名参数，因为它*[在这里](http://software-security.sans.org/developer-how-to/fix-sql-injection-in-java-hibernate)演示，stackoverflow 也有示例。我想知道使用时可以采取哪些步骤`Criteria`。请提供有关示例代码或有用链接的任何帮助。

**编辑**
还有当我们保存一个对象时呢？比方说，该对象可能有一个字符串变量，并且有人可以为它分配一个易受攻击的 sql 查询。

```
 myObject.setName(somevulnerablesql); session.save(myObject); 
```

在这种情况下，我们是否必须在分配给对象之前单独检查用户输入？或任何其他避免此类 sql 注入的步骤？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T11:52:21.467

我很确定 Criteria-Object 将创建安全的 HSQL。

您必须小心使用[Expression](http://docs.jboss.org/hibernate/orm/3.3/api/org/hibernate/criterion/Expression.html)对象。你可以在那里创建一个 SQL 注入。但是看看生成的 SQL：[Hibernate show real SQL](https://stackoverflow.com/questions/2536829/hibernate-show-real-sql)

**编辑：** 除非 Hibernate 中存在巨大的错误，否则您不必确保`String`在保存它们之前您的 s 已被转义。Hibernate 使用准备好的语句。因此，Hibernate 会话没有字符串连接和 SQL 注入。

但是，在使用 Hibernate 读取输出后，您可能必须转义输出。例如：您有一个实体用户

```
class User{
    String name;
} 
```

而你调用用户 "' or 1=1;DROP DATABASE user;--" 该字符串将被存储在数据库中。如果您使用 Criterion 对象查询用户，您会找到他（不删除数据库）。如果您使用 Expression 对象查询用户，您可能会删除数据库（如果您连接字符串）。

如果将用户名输出到 HTML，则必须转义输出。否则一个有名字的用户`"/><script>evilJavascript()</script>`会对你的应用程序不利。

**编辑2：** 看看这里：[https ://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T11:50:07.850

标准不允许您自己编写易受攻击的 SQL/HQL，因此 SQL 注入应该没有任何问题（除非 Hibernate 本身存在错误）。

*编辑*：

正如@ckuetbach 指出的那样，Criteria 实际上允许您使用`Expression.sql(String sql)`or编写 SQL `Restrictions.sqlRestriction(String)`。

# php - 如何在我的 rails 3.1+ 应用程序中使用 PHP 类？

> ID：10122897
> 
> 赞同：0
> 
> 时间：2012-04-12T11:45:21.207
> 
> 标签：php, ruby-on-rails, api, class

我需要在我的 Rails 3.1 应用程序中使用 MultiSafePay.com 网关。他们没有现成的 Rails 代码片段，但他们确实有一个 PHP 类，具有所有功能。

[PHP 类 ZIP 文件](http://www.multisafepay.com/downloads/msp_php.zip)

这个类本身有 700 行，有很多 api 方法，所以用 ruby​​ 重写它会很痛苦。

是否可以在我的 Rails 应用程序中使用 PHP 类？

如果没有，有没有人可以推荐一个支持 MultiSafePay 的 gem？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:52:57.893

你可以尝试使用类似的东西：[https ://github.com/tenderlove/phuby](https://github.com/tenderlove/phuby)

示例（根据他们的 Github 页面）：

```
rt = Phuby::Runtime.new
rt.start

rt.eval('$hello = "world"')
assert_equal "world", rt['hello']

rt.stop 
```

我不确定在包含 MultiSafePay 类时路径将如何工作，但值得一试。

# cocoa - 循环中的 CATransaction 开始/提交没有被兑现，一切都同时发生

> ID：10122898
> 
> 赞同：1
> 
> 时间：2012-04-12T11:45:29.283
> 
> 标签：cocoa, core-animation

我正在完成第 4 版。Hillegass/Preble Cocoa 的书，并且遇到了我在核心动画中无法理解的障碍。

特别是，我有以下循环，它将图像列表（据说一次一张）呈现到图层托管视图中。预期的结果是我应该看到每张图像一次一张地飞出`presentImage`。实际结果是视图保持空白，直到循环完成，然后图像一次全部飞出。在延迟期间，我看到多条日志消息表明多次调用`presentImage`. 当这些日志消息停止时，表明循环完成，然后所有图像立即飞出。

```
// loop to present each image in list of URLs
// called at end of applicationDidFinishLaunching
NSTimeInterval t0 = [NSDate timeIntervalSinceReferenceDate];
for(id url in urls) {
    NSImage *img = [[NSImage alloc] initWithContentsOfURL:url];
    if(!img)
        continue;

    NSImage *thumbImg = [self thumbImageFromImage:img];

    [self presentImage:thumbImg];

    NSString *dt = [NSString stringWithFormat:@"%0.1fs",
                   [NSDate timeIntervalSinceReferenceDate]-t0];

    NSLog(@"Presented %@ at %@ sec",url,dt);
} 
```

该`thumbImageFromImage`方法完全按照您的想法进行（创建较小的图像）。的代码`presentImage`如下：

```
- (void)presentImage:(NSImage *)image
{
    CGRect superlayerBounds = view.layer.bounds;
    NSPoint center = NSMakePoint(CGRectGetMidX(superlayerBounds), CGRectGetMidY(superlayerBounds));

    NSRect imageBounds = NSMakeRect(0, 0, image.size.width, image.size.height);

    CGPoint randomPoint = CGPointMake(CGRectGetMaxX(superlayerBounds)*(double)random()/(double)RAND_MAX, CGRectGetMaxY(superlayerBounds)*(double)random()/(double)RAND_MAX);

    CAMediaTimingFunction *tf = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];

    CABasicAnimation *posAnim = [CABasicAnimation animation];
    posAnim.fromValue = [NSValue valueWithPoint:center];
    posAnim.duration = 1.5;
    posAnim.timingFunction = tf;

    CABasicAnimation *bdsAnim = [CABasicAnimation animation];
    bdsAnim.fromValue = [NSValue valueWithRect:NSZeroRect];
    bdsAnim.duration = 1.5;
    bdsAnim.timingFunction = tf;

    CALayer *layer = [CALayer layer];
    layer.contents = image;
    layer.actions = [NSDictionary dictionaryWithObjectsAndKeys:posAnim,@"position", bdsAnim, @"bounds", nil];

    [CATransaction begin];
    [view.layer addSublayer:layer];
    layer.position = randomPoint;
    layer.bounds = NSRectToCGRect(imageBounds);
    [CATransaction commit];
} 
```

观察到的结果好像`[CATransaction begin]`and`[CATransaction commit]`调用将`for`循环括起来，而不是对`addSublayer`inside的调用`presentImage`。事实上，如果我从内部删除`[CATransaction begin]`and而是将循环括起来，我确实会观察到相同的一次性行为。实际上，如果我完全删除对的调用，我会观察到相同的一次性行为。`[CATransaction commit]``presentImage``for``[CATransaction begin]``[CATransaction commit]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T00:39:40.270

好问题。鉴于练习的架构方式，您所看到的内容是意料之中的。原因是图层的动画（和绘图）是在主线程上完成的，当前主要是加载图像和创建缩略图。直到所有图像都被加载并创建了缩略图，主线程才能真正开始执行您请求的动画。 `CATransaction`在这个单线程上下文中没有太大的影响。

我们在下一章（34，并发）中通过在后台线程中准备图像（使用`NSOperationQueue`）来改进这一点。这释放了主线程来显示新图像并在每个图像在后台加载和调整大小时执行动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:44:00.467

好吧，在让这个错误从我身上消失了几个星期之后，这似乎是有道理的，而且现在对我来说似乎（有点）显而易见，所以希望我不会离得太远。

从我上面原始问题中给出的代码来看，主线程负责所有 UI 更新，包括动画，但在`presentImage`完成之前，主线程被有效地阻止更新 UI。无论我们如何拆分`presentImage`线程（如第 34 章），这都是正确的。

例如，如果我`presentImage`调用了一个按钮的目标，而不是像上面的代码那样循环它，那么每个动画都会在我单击按钮后立即开始，并且无论我单击多快（或不快）都按我的预期进行按钮。这样做最终会产生多个同时出现的动画，正如我所期望的那样（正如我错误地从原版中预期的那样）。

我不确定我是否准确地捕捉到了官方的技术细节，但这至少让我满意。

# joomla - 关于产品规格的 joomla 扩展

> ID：10122902
> 
> 赞同：0
> 
> 时间：2012-04-12T11:45:36.540
> 
> 标签：joomla, joomla2.5

有谁知道我可以使用哪些**joomla**组件/模块/插件来将我的产品规范标准定义为我的内容。

例如，如果我想在笔记本电脑上讨论一个网站。对于笔记本电脑规格，

我想定义：

about: -description 需要富文本

技术规格：描述需要富文本

处理器：描述需要富文本

有人知道我该怎么做吗？

感谢你的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:11:51.550

使用 K2 扩展：

[http://getk2.org](http://getk2.org)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:50:33.013

为什么不直接将规格添加到文章中？

# java - volatile 与同步在一起

> ID：10122907
> 
> 赞同：9
> 
> 时间：2012-04-12T11:46:04.447
> 
> 标签：java, multithreading

有什么理由在这段代码中同时使用 volatile 和 synchronized 吗？

```
public class Helper {
  private volatile int n;
  private final Object lock = new Object();
  public Helper(int n) {
    this.n = n;
  }

  public void setN(int value) {
    synchronized (lock) {
      n = value;
    }
  }
} 
```

类助手必须是线程安全的。我从“Java Concurrency Guidelines”一书中得到了这个例子，但仍然不清楚：在这个例子中同时使用 volatile 和 synchronized 的原因是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T12:07:44.747

这个例子的目的是指出在这种情况下`syncronized`没有`volatile`是不够的，因为对象可以不安全地发布（即没有`volatile`in `Foo`）：

> 如果 Foo 类中的 helper 字段未声明为 volatile，则应将 n 字段声明为 volatile，以便在 n 的初始化和 Helper 写入 helper 字段之间建立起之前的关系。这符合指南“VNA06-J. 不要假定声明对象引用 volatile 可以保证其成员的可见性”（第 35 页）。仅当调用者（Foo 类）不能被信任声明辅助函数 volatile 时才需要这样做。

没错，但他们选择了一个不好的例子来演示它，因为`volatile`在这种情况下没有同步就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:52:58.107

没有必要将同步块放在值的变化周围；从 Java 5 开始，这是对 volatile 变量“自动”完成的。我认为在 Java 5 之前，情况不一定如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T11:51:21.047

我猜想使用 volatile 是因为在构造函数中设置了 'n'

# javascript - 在JS中的表单验证方法中获取表单提交方法的输出

> ID：10122910
> 
> 赞同：0
> 
> 时间：2012-04-12T11:46:07.380
> 
> 标签：javascript, jquery, asp.net-mvc

我有一个这样结束的验证方法：

```
function validateForm()
{
    //do some validation
    document.imgUploadForm.submit();
} 
```

这样，该方法调用了一个用于提交控制器中的表单的方法。

目前，处理表单的方法返回一个ActionResult。

有没有办法： HandleForm() 返回 JsonResult 然后 validateForm() 获取返回的对象并用它做事？

我尝试将 JsonResult 设置为 HandleForm() 的返回类型，然后编写：

```
var x = document.imgUploadForm.submit(); 
```

但 x 未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:11:09.113

如果您使用的是 jQuery，则需要在客户端使用 ajax：

```
$.getJSON("url",{input1:"value",input2:"value"},function(data){
   doSomethingWithTheDatas(data);
}); 
```

如果您的目标是向服务器发送内容，请获取响应并处理响应客户端。

编辑：我假设 HandleForm() 是服务器端，或者这个问题没有什么意义。

# macos - GitHub。发生身份验证错误。我们无法与服务器同步

> ID：10122916
> 
> 赞同：2
> 
> 时间：2012-04-12T11:46:26.853
> 
> 标签：macos, github, sync, github-for-mac

我正在使用[GitHub for Mac](http://mac.github.com/)。

现在，如果我尝试执行`Sync`，我收到以下消息：

```
An authentication error occurred. We could not sync with the server. 
```

如果我转到以下页面[https://github.com/settings/ssh/audit](https://github.com/settings/ssh/audit)
，我会收到以下消息：

```
All your SSH Keys have been verified. 
```

我能做些什么来解决这个问题？

PS
我已经按照以下步骤没有成功： [http ://help.github.com/linux-set-up-git/](http://help.github.com/linux-set-up-git/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T12:29:58.133

您是否正确设置了远程仓库？

```
Settings -> Primary remote repository (origin) 
```

将您的项目的回购地址（例如）粘贴`git@github.com:username/your_proj.git`到那里。

# plugins - Lighttpd 没有响应或响应很晚

> ID：10122917
> 
> 赞同：1
> 
> 时间：2012-04-12T11:46:27.457
> 
> 标签：plugins, module, webserver, lighttpd

我为 Lighttpd 制作了一个简单的模块来试验它。如果我只是登录到我的计算机的 IP 地址（从另一台计算机）并且我计算机中的网络服务器（lighttpd）应该发送一个简单的响应。该模块的源代码如下：

```
#include "base.h"
#include "log.h"
#include "buffer.h"
#include <stdio.h>
#include "plugin.h"
#include<sys/stat.h>
#include<sys/types.h>
#include <ctype.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>
#include "stat_cache.h"
#include "etag.h"
#include "http_chunk.h"
#include "response.h"
/* plugin config for all request/connections */

typedef struct {
    array *match;
} plugin_config;

typedef struct {
    PLUGIN_DATA;

    buffer *match_buf;

    plugin_config **config_storage;

    plugin_config conf;
} plugin_data;

typedef struct {
    size_t foo;
} handler_ctx;

static handler_ctx * handler_ctx_init() {
    handler_ctx * hctx;

    hctx = calloc(1, sizeof(*hctx));

    return hctx;
}

static void handler_ctx_free(handler_ctx *hctx) {

    free(hctx);
}

/* init the plugin data */
INIT_FUNC(mod_helloworld_init) {
    plugin_data *p;

    p = calloc(1, sizeof(*p));

    p->match_buf = buffer_init();

    return p;
}

/* detroy the plugin data */
FREE_FUNC(mod_helloworld_free) {
    plugin_data *p = p_d;

    UNUSED(srv);

    if (!p) return HANDLER_GO_ON;

    if (p->config_storage) {
        size_t i;

        for (i = 0; i < srv->config_context->used; i++) {
            plugin_config *s = p->config_storage[i];

            if (!s) continue;

            array_free(s->match);

            free(s);
        }
        free(p->config_storage);
    }

    buffer_free(p->match_buf);

    free(p);

    return HANDLER_GO_ON;
}

/* handle plugin config and check values */

SETDEFAULTS_FUNC(mod_helloworld_set_defaults) {
    plugin_data *p = p_d;
    size_t i = 0;

    config_values_t cv[] = {
    { "helloworld.array",NULL, T_CONFIG_ARRAY, T_CONFIG_SCOPE_CONNECTION},       /* 0 */
    { NULL, NULL, T_CONFIG_UNSET, T_CONFIG_SCOPE_UNSET }
    };

    if (!p) return HANDLER_ERROR;

    p->config_storage = calloc(1, srv->config_context->used * sizeof(specific_config *));

    for (i = 0; i < srv->config_context->used; i++) {
        plugin_config *s;

        s = calloc(1, sizeof(plugin_config));
        s->match    = array_init();

        cv[0].destination = s->match;

        p->config_storage[i] = s;

        if (0 != config_insert_values_global(srv, ((data_config*)srv->config_context->data[i])->value, cv)) {
            return HANDLER_ERROR;
        }
    }

    return HANDLER_GO_ON;
}

#define PATCH(x) \
    p->conf.x = s->x;
static int mod_helloworld_patch_connection(server *srv, connection *con, plugin_data *p) {
    size_t i, j;
    plugin_config *s = p->config_storage[0];

    PATCH(match);

    /* skip the first, the global context */
    for (i = 1; i < srv->config_context->used; i++) {
        data_config *dc = (data_config *)srv->config_context->data[i];
        s = p->config_storage[i];

        /* condition didn't match */
        if (!config_check_cond(srv, con, dc)) continue;

        /* merge config */
        for (j = 0; j < dc->value->used; j++) {
            data_unset *du = dc->value->data[j];

            if (buffer_is_equal_string(du->key, CONST_STR_LEN("helloworld.array"))) {
                PATCH(match);
            }
        }
    }

    return 0;
}
#undef PATCH

URIHANDLER_FUNC(mod_helloworld_uri_handler) {

UNUSED(p_d);

// Send body data to requestor
char buffer[] = { '<', 'h', 't', 'm', 'l', '>' , '<', 'h', 'e', 'a', 'd', '>', '<', 't', 'i', 't', 'l', 'e', '>', '1', '<', '/', 't', 'i', 't', 'l', 'e', '>', '<', '/', 'h', 'e', 'a', 'd', '>', '<', '/', 'h', 't', 'm', 'l', '>'};

    char textValue[32];
    sprintf(textValue, "%d", sizeof(buffer));

response_header_overwrite(srv, con, CONST_STR_LEN("Content-Length"), textValue, strlen(textValue));
chunkqueue_append_mem(con->write_queue, buffer, sizeof(buffer)); 

//
con->http_status = 200;
return HANDLER_FINISHED;

}

int mod_helloworld_plugin_init(plugin *p) {
    p->version     = LIGHTTPD_VERSION_ID;
    p->name        = buffer_init_string("helloworld");

    p->init        = mod_helloworld_init;
    p->handle_subrequest_start  = mod_helloworld_uri_handler;
    p->set_defaults  = mod_helloworld_set_defaults;
    p->cleanup     = mod_helloworld_free;

    p->data        = NULL;

    return 0;
} 
```

通过使用此模块，Web 服务器应该响应标题为“1”的 html 页面。但是现在我看到 lighttpd 发送响应的时间很晚，因此请求有时会超时。我不太明白有什么问题。任何人都可以检查并帮助我解决它吗？我想只有 Lighttpd 的用户可能知道这个问题的解决方案。即使没有使用 Lighttpd，如果有人可以帮助我解决这个问题，我也会很感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T20:38:13.077

尝试添加：

```
con->file_finished = 1; 
```

后：

```
con->http_status = 200; 
```

That tells the engine that the request is complete (why `HANDLER_FINISHED` doesn't do that is a question for another day).

# android - 如何访问 Android 应用程序的 classes.dex？

> ID：10122918
> 
> 赞同：4
> 
> 时间：2012-04-12T11:46:33.637
> 
> 标签：android, directory, installation

启动活动时，系统会加载 classes.dex 文件并开始执行指令。我需要获得对当前活动正在执行的同一应用程序的 classes.dex 的只读访问权限。

在网上搜索了几个小时后，我只能推断出Android安全系统不允许访问应用程序沙箱。

但是，我需要对 classes.dex 文件进行只读访问才能完成我的任务。

有人对此有见解吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-05T15:11:40.230

您可以通过以下方式获取“classes.dex”的 InputStream：

1.  检索应用程序的 apk 容器的路径。
2.  借助 JarFile 类，在您的 apk 容器中检索“classes.dex”条目。
3.  获取它的输入流。

这是一个示例代码片段：

```
 // Get the path to the apk container.
        String apkPath = getApplicationInfo().sourceDir;
        JarFile containerJar = null;

        try {

            // Open the apk container as a jar..
            containerJar = new JarFile(apkPath);

            // Look for the "classes.dex" entry inside the container.
            ZipEntry ze = containerJar.getEntry("classes.dex");

            // If this entry is present in the jar container 
            if (ze != null) {

                 // Get an Input Stream for the "classes.dex" entry
                 InputStream in = containerJar.getInputStream(ze);

                 // Perform read operations on the stream like in.read();
                 // Notice that you reach this part of the code
                 // only if the InputStream was properly created;
                 // otherwise an IOException is raised
            }   

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (containerJar != null)
                try {
                    containerJar.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
        } 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T12:55:57.027

取决于您要执行的操作，但您可以访问 DexFile ：

```
String sourceDir = context.getApplicationInfo().sourceDir;
DexFile dexFile = new DexFile(sourceDir); 
```

它为您提供了一个[http://developer.android.com/reference/dalvik/system/DexFile.html](http://developer.android.com/reference/dalvik/system/DexFile.html)您可以枚举并从中加载类。

# css - Css/浏览器兼容性/joomla

> ID：10122919
> 
> 赞同：1
> 
> 时间：2012-04-12T11:46:39.533
> 
> 标签：css, browser, joomla

抱歉，如果之前可能已经回答过这个问题，但我真的可以针对特定情况给出具体答案。除了基本的 css 之外，我对任何东西都很陌生。

描述我的意思的最佳方式是在各种浏览器中查看该站点。[http://www.livingwithaddicts.com/](http://www.livingwithaddicts.com/) 。

我使用 Joomla CMS (version2.5) 为慈善机构整理了这些内容。

如果您在 Firefox 中查看该站点，它（目前还没有完成）它的外观是这样的。除了在 Opera 中一些容易解决的定位问题外，它在 Chrome 中很好并且可以通过。

然后我们进入 IE，我刚刚添加了**背景：#485fc5;** 让它按我想要的方式部分渲染，并将做同样的事情来获得表格上的 bg。

我想探索一些其他的样式设置方式，以便在 IE 中看起来可以接受。我不想走用图形替换渐变或文本阴影的路线。

是否有一组仅在有人在 IE 中查看时才调用的 CSS？如果是这样，我该怎么做？这就是所谓的黑客攻击吗？

其他可能性是，当我使用 Joomla 时，我不得不将一些内联样式放入特定内容中，我认为某些生成的代码可能会被弃用和/或有点混乱。这会影响它的渲染方式吗？

此外，我匆匆（懒惰地）c&p了一大块css并修改了十六进制值以将其合并到我现有的css中。（对于现在不赞成而叹息的人，我道歉）这可能不是最新的语法，我只是前几天听说过 webkit，所以这就是我的新手。

我会把它贴在这里，希望不会让自己太尴尬。如果有人喜欢看（或笑），请这样做。我真的很感激任何建议。这是代码。

```
body {
    background:  #485fc5;       
    background-image: linear-gradient(bottom,  #485fc5 13%, #6e86ee 57%, #a0b0f5 79%);
    background-image: -o-linear-gradient(bottom, #485fc5 13%, #6e86ee 57%, #a0b0f5 79%);
    background-image: -moz-linear-gradient(bottom,  #485fc5 13%,#6e86ee 57%, #a0b0f5 79%);
    background-image: -webkit-linear-gradient(bottom,  #485fc5 13%,#6e86ee 57%, #a0b0f5 79%);
    background-image: -ms-linear-gradient(bottom,  #485fc5 13%, #6e86ee 57%, #a0b0f5 79%);
    background-image: -webkit-gradient(
    linear,
    left bottom,
    left top,
    color-stop(0.13, #485fc5),
    color-stop(0.57, #6e86ee),
    color-stop(0.79, #a0b0f5));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:29:39.297

这不是对您问题的具体答案，但它应该对您有所帮助。

要定位不支持特定功能的浏览器，请使用[Modernizr](http://modernizr.com/)。它不会让您专门针对 IE，但它会向 body 标记添加类，指示是否支持某些属性。然后，您可以通过以下方式使用该类来定位那些：

```
/* target browsers that don't support gradients */
.no-cssgradients {
   background-image: url(some-gradient-image);
}

/* a randomly chosen element on a page that doesn't support border radius */
.no-cssborderradius #some-element {
  border: 1px solid red;
} 
```

这样，您不仅可以定位 IE，还可以定位其他无法处理渐变、半径或许多其他 css 属性的浏览器。

此外，对于简单的渐变、边框半径和框阴影，您可以使用[CSS3 PIE](http://css3pie.com/)，这将使您能够在 IE（6 及更高版本）中使用这些功能。

# jquery - 中止 AJAX 请求

> ID：10122921
> 
> 赞同：3
> 
> 时间：2012-04-12T11:46:47.350
> 
> 标签：jquery, ajax

我有 AJAX 请求，它从远程文件中获取数据并显示在页面上的 div 中。当用户将鼠标悬停在链接上时，将调用 AJAX 并显示带有数据的 div，当鼠标移出链接时它会消失。div 会立即显示，但是当鼠标移出时，在将鼠标移出和隐藏 div 之间存在大约 5 秒的延迟。

我认为这与阻止隐藏功能的 AJAX 请求有关，因为当我删除 AJAX 请求时，div 会立即隐藏。

当鼠标从链接中移除并且无论如何都隐藏 div 时，我可以做些什么来中止、杀死或忽略 AJAX？

这是我到目前为止的代码：

```
$(function(){

var showPopup = function(){
    $.ajax({
        type: "GET",
        url: "/process.cfm",
        data: "id=" + 1,
        success: function(data){
            $(".profilePopup").html(data);

            if ($(data).find(".profileResult").length) {
                var text = $(data).find(".profileResult").html();
                $(".profilePopup").html(text);
            }
        }
    });

    $(".profilePopup").show();
}

var hidePopup = function(){
    $(".profilePopup").hide();
}

$("#username").mouseover(showPopup);
$("#username").mouseout(hidePopup);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:54:29.207

尝试这个：

```
 var xhr = $.ajax({
        type: "POST",
        url: "some.php",
        data: "name=Somename",
        success: function(msg){
           alert( "Data Saved: " + msg );
        }
    });

    //kill the request
    xhr.abort() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:52:00.093

您可以使用 jxhr 对象中止 ajax 请求：

[http://api.jquery.com/jQuery.ajax/#jqXHR](http://api.jquery.com/jQuery.ajax/#jqXHR)

像这样的东西：

```
var jxhr_object = $.ajax({
    url: "some.php",    
    success: function(){
       do something
    }
});

//kill the request
jxhr_object.abort() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-13T11:41:07.433

```
var xhr = $.ajax({
    type: "GET",
    url: "/process.cfm",
    async: true,
    data: "your data",

    success: function(msg){
       alert( "Data Saved: " + msg );
    }
});

//kill the request
xhr.abort() 
```

这不会使您的浏览器冻结。

**异步：真，**

# c - 编写规则或约定并工作 - C 中的头文件

> ID：10122923
> 
> 赞同：2
> 
> 时间：2012-04-12T11:47:01.547
> 
> 标签：c, header-files

> **可能重复：**
> [C 中的头文件有什么意义？](https://stackoverflow.com/questions/2184646/what-are-the-point-of-header-files-in-c)

我正在做一个unix项目。经过大量搜索，许多人建议使用头文件，因为它们用于编写需要在多个源文件之间共享的代码。

> 最好将定义集中在一个文件 - 头文件中。

现在我有两个*疑问*：
**1）**使用头文件而不是简单的 .c 文件有什么意义。
从*[这个答案](https://stackoverflow.com/a/2146254/742173)*我得到头文件没有编译为目标文件。**然后会发生什么（实际上 gcc 是如何对待它们的）？有什么好处？*我分享的答案想指出什么？***

**2）**编写头文件的规则或约定是什么。我只知道这个：

> 头文件通常只包含数据类型、函数原型和 C 预处理器命令的定义。

我们可以只写这个，即这是一个规则还是约定？

> **谁能告诉我任何资源来学习如何编写头文件。**

我只能找到这个 -[编写更大的程序](http://www.cs.cf.ac.uk/Dave/C/node35.html)- 包含的内容不多。或用于编写更好和优化的头文件的任何其他技巧或风格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:59:49.037

1) 头文件允许您在 .c 文件之间传递信息，例如定义或其他 .c 文件中存在的函数，这允许您将逻辑上属于一起的代码保存在一个地方；#include 指令将命名文件视为它是命名文件的一部分，这允许您节省大量冗余输入

2) 惯例是将#define's、enum's 和函数声明传递到.h 文件中，在.c 文件中带有实际的功能代码（除了偶尔的静态内联函数）

规则是：无论编译器吃什么而不死，都或多或少是允许的，只要它产生一个函数式程序。这些约定的存在或多或少是为了帮助您将项目保持在可理解、可维护的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:11:25.600

我认为最好的办法是理解为什么头文件有用 (2) 以及它们是如何工作的 (1)。然后，您可以自己决定要遵循或不遵循哪些约定。

1) “include”指令的作用是，指令所指向的文件完全包含在当前编译的文件中。这应该很简单。

2) 通常，将一个 C 项目拆分为多个 C 文件更容易管理。这可能是由于大小原因（考虑具有数千行代码的项目 - 你如何在这样的文件中滚动），也可能是因为管理原因（考虑多个人在项目上工作 - 更容易划分职责）。

在多 C 文件项目中，您将需要从其他文件调用函数。我们举个例子：

```
fileA.c
int function_a() {
  uses somewhere function_b
}

fileB.c
int function_b() {
  uses somewhere function_c 
}

fileC.c
int function_c() {
  uses somewhere function_a
} 
```

为了调用任何函数，您首先需要声明它（或定义它）。需要明确的是：声明是指定返回类型和参数时，定义是同时指定代码时。在上面的示例中，您无法仅将一个 C 文件“包含”到另一个 C 文件中，以便在使用之前定义所有函数。因此，您必须在调用函数之前添加函数的“声明”。你在哪里可以添加这样的声明？如果您在 fileA.c 中添加 function_c 的声明，这将很难维护（认为您可以在数十个文件中使用这种情况，跟踪所有声明将非常困难）。

同样的事情也适用于类型。

解决这个问题的方法是为每个 C 文件创建一个“头”文件，在其中声明程序其他模块所需的所有函数（和类型）。这些文件可以以任何顺序包含在需要这些函数的所有其他 C 文件中，并且是一个集中的位置，您知道如果您更改函数需要修改该位置。

# maven - maven 解决了依赖，但在其中找不到包/类

> ID：10122929
> 
> 赞同：10
> 
> 时间：2012-04-12T11:47:16.537
> 
> 标签：maven, dependencies, osgi

在自定义 geotools 平台编译（实际上是基于 OSGi）中，当我尝试单独构建其中一个模块时，它可以正确编译。但是当我构建整个项目时 - 它在`compile`舞台上失败了，原因是它找不到某些包/类。然而，依赖关系得到了很好的解决。

这是来自模块的 pom.xml 的依赖项：

```
<dependency>
   <groupId>org.picocontainer</groupId>
   <artifactId>com.springsource.org.picocontainer</artifactId>
   <version>1.2.0</version>
</dependency> 
```

maven构建错误的一部分：

> ...\geotools-osgi\modules\extension\xsd\xsd-core\src\main\java\org\geotools\xs\bindings\XSGroupBinding.java:[19,24] 包 org.picocon 容器不存在
> 
> ...\geotools-osgi\modules\extension\xsd\xsd-core\src\main\java\org\geotools\xml\AbstractComplexBinding.java:[20,24] 包 org.picocon 容器不存在
> 
> ...\geotools-osgi\modules\extension\xsd\xsd-core\src\main\java\org\geotools\xml\ComplexBinding.java:[21,24] 包 org.picocontainer 不存在

如果我更改 pom.xml 依赖项 - 它会因某种“无法解析捆绑”而失败。

该项目非常大，捆绑包和子/父 pom 的数量。所以我不能把它们都发在这里。所以我的问题是：这种麻烦的可能原因是什么？这可能是父/子之间的依赖冲突吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T12:35:29.320

我可以看到两件事来尝试解决它。

首先，如果您进入本地 .m2 存储库，您将查看是否有其他版本的 lib（但是，有时不同的版本可以有不同的名称，因此存储在不同的文件夹中，这无济于事）

您还可以在 IDE 或命令行中检查所使用的 ACTUAL 依赖项是什么（mvn dependency:tree）。您可能必须排除一些传递依赖以保持一致。我为此使用 Eclipse 插件。

最后，当您确定所使用的依赖项时，您可以打开 jar 并查看您期望的内容是否存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T10:52:19.027

好吧，实际原因是目标计算机对互联网的访问受到限制，因此对 maven 存储库的访问受到限制。有了一些黑魔法，它并没有因为某种“无法下载工件”而失败（可能是因为手动安装了一些 jar 文件）。因此，我们获得了具有正常访问权限的服务器，将其设置为镜像，配置我们的 maven 以使用镜像，从而解决了问题。感谢@Samuel 参与我的问题，但正如我所见，无法从问题描述中确定问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-08T10:13:23.527

我也有同样的问题。在我的情况下，模块中的所有类都在测试包中（它是 Selenium 项目）并且依赖项设置为编译。我最终将一些类移动到主包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-23T04:45:33.100

我已经用 Eclipse 解决了这个问题。当您在项目中展开“maven 依赖项”文件夹并尝试找到您所指的特定 jar 时，您可以发现此问题。jar 可能以文件夹的形式出现，但不是实际的 jar。被引用项目的原因是在 Eclipse 平台中打开，因此 Maven 不会在存储库中查找以获取该 jar。

解决方法是从 Eclipse 解决方案空间中删除引用 jar 的项目并重建。有用！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-09T11:43:35.113

我有同样的问题。我的问题是依赖项被设置为测试。所以当我发出 exec:java 时，它找不到该类，因为它超出了范围。

# javascript - 根据 if 检查发送消息

> ID：10122930
> 
> 赞同：0
> 
> 时间：2012-04-12T11:47:19.253
> 
> 标签：javascript

在一个框架中，我使用下面的代码。但是，我总是给出成功的信息

```
 if ($artistID)
                NCore::db('PERSON_MOVIE')->insertAsArray(array('PERSON_ID' => $artistID->id, 'MOVIE_ID' => $movieID, 'JOB_ID' => 374));
            else
                header('Location: http://www.sinemalar.com/management/artistAddEditRemove/'); 
```

这是消息

如何根据else语句给出消息？这是我的js。可能会有哪些变化？

```
<script type="text/javascript">
function showMessage(a)
{
alert(a);
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:50:57.537

尝试这个 ：

```
if(success=="a"){
    alert("Done")
    }else {
    alert("Something went wrong")
}; 
```

# asp.net-mvc-3 - 将对象集合绑定到 ASP.NET MVC 3 中的选择列表中的数据

> ID：10122931
> 
> 赞同：0
> 
> 时间：2012-04-12T11:47:20.907
> 
> 标签：asp.net-mvc-3

假设我有一个选择列表：

```
<select multiple="multiple" name="Options.Id">
  <option value="value1">Option 1</option>
  <option value="value2">Option 2</option>
  <option value="value3">Option 3</option>
  <option value="value4">Option 4</option>
  <option value="value5">Option 5</option>
</select> 
```

当表单提交到服务器时，数据将是以下形式：

```
Options.Id=value1&Options.Id=value4&Options.Id=value5 
```

如果选择了选项 1、4 和 5。

默认模型绑定器无法将其绑定到以下类型的对象列表：

```
class MyData 
{
  String Id { get; set; }
  ...
} 
```

如果选择列表的名称是选项并且我绑定到字符串列表，它将起作用。我想默认模型绑定器想要绑定到一个名为“Id”的字符串列表，它是一个名为 Options 的对象的成员，是吗？看起来我需要一个默认的模型绑定器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:04:15.730

您想绑定到对象数组，通常必须在客户端有一个字段数组才能绑定到服务器端的数组（有关更多信息，请参见此处：[http ://www.hanselman.com/blog /ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)）。我认为要将单个多选字段绑定到服务器端的多个对象，您必须编写自定义模型绑定器。

# jquery - jQuery - 滚动加载。

> ID：10122933
> 
> 赞同：1
> 
> 时间：2012-04-12T11:47:25.620
> 
> 标签：jquery

我正在尝试自己制作一种无限滚动。我不使用 Infinite 的原因是我不会在 Wordpress 中使用它。

它正在工作，除了我需要使用 on.() 方法之外，我只是不知道该怎么做。

```
$(window).scroll(function(){
    if($(window).scrollTop() == $(document).height() - $(window).height()){
        $('.wait-please').show();
        latestTask();
    }
});

function latestTask()
{
    $id = $(".latestTask:last").attr("taskid");
    $.post("/includes/classes/handler.php?do=lastTask", { lastId : $id },
    function(data){
        if(data){
            //alert(data);
            $('.latestTask:last').after(data);
        }
        $('.wait-please').hide();
    });
} 
```

函数 latestTask 调用一个 php 脚本，我在其中回显所有新帖子。问题是它一直调用相同的十个，因为我需要 on.() 方法来绑定新元素。

但是在这种情况下，我将在哪里以及如何使用 On 呢？对于我所看到的，我需要指定一个像点击这样的事件。但我没有点击事件？

检索到的数据结构如下：

```
echo "<div style='font-size:20px;color:#f90;' class='latestTask' taskid='$row[lookupId]'>$row[lookupId]</div>"; 
```

**更新**

这是滚动时得到的 id 行：

75 74 73 75 74 73 72 71 70 72 71 70 69 68 67 66 65 64 66 65 64 63 62 61 63 62 61 60 57 55 60 57 55 43 40 38 43 40 38 33 229 22

正如你所看到的，数据库调用有一些非常奇怪的结果：72、71、70、72、70。看起来我必须让它无法让用户“双滚动”。但是如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:31:36.643

确保不要两次触发 ajax 请求。

如果没有看到完整的页面，很难理解为什么会发生这种情况。

尝试这个

```
var fetchingTasks = false;

$(window).scroll(function(){
    if($(window).scrollTop() == $(document).height() - $(window).height()){
        $('.wait-please').show();
        if (!fetchingTasks) {
          fetchingTasks = true;
          latestTask();
        }
    }
});

function latestTask()
{
    $id = $(".latestTask:last").attr("taskid");
    $.post("/includes/classes/handler.php?do=lastTask", { lastId : $id },
    function(data){
        if(data){
            //alert(data);
            $('.latestTask:last').after(data);
        }
        $('.wait-please').hide();
        fetchingTasks = false;
    });
} 
```

# javascript - 从 (document).ready 调用 JavaScript 方法时未完全执行

> ID：10122934
> 
> 赞同：1
> 
> 时间：2012-04-12T11:47:27.427
> 
> 标签：javascript, jquery, document-ready

我有一个页面显示（来自 asp.net 代码的 html 输出）房屋/属性。我构建了以下 javascript，只需按一下按钮，即可更改属性上的所有 css 类，因此 html 不会更改，但 css 类会更改，以获得 2 列视图。

这工作正常。但后来我在想，如果用户选择 2 列视图并导航到下一页（它是一种分页列表），则视图将重置回原始视图（从 1 列开始）。

所以我做了以下事情。如果用户单击按钮，并从 1 columnview 转到 2 columnview，我将 window.name 中的值保存为 1 或 2。

之后我在这里构建了这个小脚本：

```
 $(document).ready(setView());

 function setView() {
     if (window.name != null) {
         if (window.name == 2) {
             window.Show2Cols();
         }
         if (window.name == 1) {
             window.Show1Col();
         }

     }
 } 
```

这行得通。Show2Cols() 方法开始如下：

```
 function Show2Cols() {

 alert("Show2Cols is executed");
     var nodes = document.getElementById("panden").getElementsByTagName("div");
     alert("Just got all nodes.");
     for (i = 0; i < nodes.length; i++) 
     {.... 
```

因此，当我更改页面时，它会弹出说“Show2Cols 已执行”，但它没有说“刚刚得到所有节点”。

由于这是我的第一个JS，而且不会变得更复杂，所以我想问你们问题出在哪里？

我的猜测是 on (document).ready() 有效，但是 .getElementById() 方法还不起作用，因为页面上还没有任何内容（视觉上）。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T11:58:40.170

问题是您对函数的引用

```
$(document).ready(setView()); 
```

您正在执行该函数并将其值作为 DOM 就绪事件处理程序返回，这就是您需要的

```
$(document).ready(setView); 
```

# android - Android - 有效存储/更新列表内容和处理roation

> ID：10122939
> 
> 赞同：0
> 
> 时间：2012-04-12T11:47:45.447
> 
> 标签：android, android-layout, android-listview, android-adapter, android-orientation

我正在开发一个应用程序，它使用来自互联网的数据填充列表片段。列表的内容通常会根据用户当前正在查看的选项卡而变化，并且当用户到达末尾（分页）时，额外的项目会附加到列表中。

目前，listfragment 基于 arrayadapter。当用户更改选项卡并添加新项目时，适配器的内容将被清除。当用户到达列表末尾时，更多交易将添加到当前适配器。

当前的实现存在多个问题。

**1.**偶尔用户重启后，应用程序数据从网上下载成功，但列表为空。这往往发生在您启动应用程序然后使用许多其他应用程序之后，然后再返回此应用程序。使应用程序恢复工作状态的唯一方法是强制关闭应用程序。

**2.**默认情况下，当屏幕旋转时，Android 会使用 oncreate 再次创建视图，它会再次从 Internet 下载数据。目前为了克服这个问题，我自己处理旋转更改（使用 onConfigurationChanged() ），我知道这不是首选方式。

那么我应该如何最好地存储支持arrayadapter的arraylist，记住我需要经常更新它。我还需要在旋转更改期间存储 arraylist 的内容。

请让我知道是否有任何当前代码会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:55:33.900

1.  我们需要您的代码来调试该问题。
2.  您可以在 ListFragment 上使用 setRetainInstance(true)。

# solr - solr ：在单词之间有空格的搜索查询

> ID：10122943
> 
> 赞同：7
> 
> 时间：2012-04-12T11:47:56.193
> 
> 标签：solr

我有一个拉丁植物名称，例如`Chamaecyparis obtusa` 所以结果应该是所有以 Chamaecyparis obtusa 开头的植物名称

我想得到类似的结果

Chamaecyparis obtusa
'Confucious'
Chamaecyparis obtusa 'Contorta' Chamaecyparis obtusa 'Coralliformis'
Chamaecyparis obtusa 'Crippsii'

问题是 Chamaecyparis 和 obtusa 这两个词之间的空格因为那个共振它不起作用

我用 * 和 ? 但必须有一个简单的方法来做到这一点

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-12T12:03:18.280

从这里值得尝试的几件事：[solr query with white space](https://stackoverflow.com/questions/5790180/solr-query-with-white-space)

*   删除所有空格：`Chamaecyparisobtusa`
*   使用引号：`"Chamaecyparis obtusa"`
*   使用括号：`(Chamaecyparis obtusa)`

可以在此处找到其他提示（也请查看链接）：[Solr 查询语法](https://stackoverflow.com/questions/968504/solr-query-syntax)

# gwt - 在 GWT 中制作小部件数组

> ID：10122946
> 
> 赞同：0
> 
> 时间：2012-04-12T11:48:10.110
> 
> 标签：gwt, nullpointerexception, widget

我正在尝试在 GWT 中实现水平面板数组，如下所示：

```
HorizontalPanel[] hp = new HorizontalPanel[5];
VerticalPanel vp = new VerticalPanel();

for(i=0;i<5;i++) {
      hp[i].add(new Label("hello"));
      vp.add(hp[i]);
} 
```

但它在循环的第一行给出了 NullPointerException 。

我哪里错了？如何在 GWT 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:53:13.027

初始化数组不会初始化数组的元素。要走这条路，你需要这样做：

```
hp[i] = new HorizontalPanel(); 
```

# javascript - 具有特定值的隐藏输入 id 属性在 ie7 中返回为未定义

> ID：10122949
> 
> 赞同：0
> 
> 时间：2012-04-12T11:48:32.657
> 
> 标签：javascript, jquery, internet-explorer-7

最近，我正在使用 javascript（具体来说是 jQuery）编写一个脚本，该脚本从隐藏的输入字段中检索 value 属性。

```
<input type="hidden" name="amount" id="cost" value="" /> 
```

输入的 id 为**cost**。

出于某种奇怪的原因，在**ie7**中，当我输出该值时，它总是会返回**undefined**。

```
alert($("input#cost").attr("value")); // returns undefined... 
```

在经历了很多挫折之后，奇怪的是，我将该输入元素的**id更改为****price**似乎已经解决了这个问题？

此时一切都恢复正常，但我想知道是否有人可以阐明可能导致这种行为的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:51:25.367

> 此时一切都恢复正常，但我想知道是否有人可以阐明可能导致这种行为的原因？

这种错误通常是由于多个元素具有相同的`id`. 根据规范，`id`属性在页面内必须是唯一的。

如果你需要用一个标识符标记多个元素，你应该使用一个类。

# python - python：读取csv，执行命令并将结果写入新的垂直列

> ID：10122951
> 
> 赞同：3
> 
> 时间：2012-04-12T11:48:42.063
> 
> 标签：python, csv

我对 python 完全陌生，我读过 python 的 csv 模块非常适合我想做的事情。我花了一些时间尝试几种不同的方法，但还不能使用第四（垂直）列创建数组。

我有一个包含数百行的四列 csv 文件。在我继续之前，我可能应该验证 python 甚至可以完成我想做的所有事情。

1.  读取 csv 文件，
2.  在 FILE 的第四（垂直）列上执行 COMMAND

3.  命令打印

4.  阅读健康的每一行（来自命令）

5.  将新的第五列上的 HEALTHY 写入所有五列的 NEW_FILE

6.  循环直到 FILE 的第一个空行

示例文件（在单元格视图中以逗号分隔）

```
 HOST                    PLATFORM        ARCH               COMMAND
  server1                 win             x86_64             python '/root/server1.py'
  server2                 linux           x86_64             python '/root/server2.py'
  server3                 linux           x86_64             python '/root/server3.py' 
```

示例命令

```
 # python '/root/server1.py'
  --------------------
  Error: Could not open /root/server1.py

  # python '/root/server2.py'
  --------------------
  server2 p1 (NTFS)       output1:100  output:200    HEALTHY:Yes
  --------------------

  # python 'root/server3.py'
  --------------------
  server3 p1 (linux)       output1:100  output:200    HEALTHY:No
  server3 p2 (linux)       output1:100  output:200    HEALTHY:Yes
  server3 p3 (swap)       output1:100  output:200    HEALTHY:No
  -------------------- 
```

如果多行 HEALTHY 和 all 不等于 Yes，HEALTHY 等于“No”

如果在任何行上都找不到 HEALTHY，则 HEALTHY 等于“错误扫描”

这是我到目前为止所拥有的

```
 #!/usr/bin/python
  #

  import csv
  import subprocess

  # read csv file
  csv_file = open("my_list.csv", "rb")
  my_csv_reader = csv.reader(csv_file, delimiter=",")
  my_data_list = []
  for row in my_csv_reader:
          print row
          my_data_list.append(row)
  csv_file.close()

  # write csv file
  csv_file = open("new_data.csv", "wb")
  my_csv_writer = csv.writer(csv_file, delimiter=",")
  for row in my_data_list:
          my_csv_writer.writerow(row)
  csv_file.close()

  # running commands, getting output
  # run COMMAND column from csv_file, use "python 'my_script.py'" for now
  # my_script.py only for now: print "HEALTHY:Yes"
  p = subprocess.Popen("python '/root/my_script.py'",stdout=subprocess.PIPE,stderr=subprocess.PIPE)
  output, errors = p.communicate()
  print output
  print errors 
```

执行上述：

```
 # python '/root/this_script.py'
  ['HOST', 'PLATFORM', 'ARCH', 'COMMAND']
  ['server1', 'win', 'x86_64', "python '/root/server1.py'"]
  ['server2', 'linux', 'x86_64', "python '/root/server2.py'"]
  ['server3', 'linux', 'x86_64', "python '/root/server3.py'"]
  Traceback (most recent call last): 
     File "thisscript.py", line 24, in ? 
       p = subprocess.Popen('python myscript1.py',stdout=subprocess.PIPE,stderr=subprocess.PIPE) 
     File "/usr/lib64/python2.4/subprocess.py", line 550, in __init__ 
       errread, errwrite) 
     File "/usr/lib64/python2.4/subprocess.py", line 993, in _execute_child 
       raise child_exception 
     OSError: [Errno 2] No such file or directory 
```

**奖励：**
如果我还想在标准输出/命令输出中搜索某些**内容**（例如 linux、swap、NTFS 等，--第三个上面有问题的示例命令）并将其附加到第 [5] 行，或者在它已经存在之后的下一个搜索 [i]Healthy[/i]... 我尝试开始一个新的 if 语句，但它似乎只追加行 [4]，或与 [i]Healthy[/i] 时相同的行。

我也不知道如何使用 OR 语句。在哪里

```
 if 'Linux' OR 'swap' OR 'LVM' in stdout:  
     writer.writerow(row + ['Linux']) # for multiple lines/partitions.

 elif 'BSD' in stdout:  
     writer.writerow(row + ['BSD'])

 elif 'NTFS' in stdout:
     writer.writerow(row + ['Windows'])

 else:
     writer.writerow(row + ['Error Scanning']) 
```

最后，我将 COMMAND 列更改为 PATH，并修改了执行 PATH 的命令。哪个正在工作。我想执行第二个命令来获取 PATH 的文件大小。我尝试了几种方法。

感谢您的时间。我希望这一切都能做到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T15:01:32.767

您没有正确使用[subprocess.Popen](http://docs.python.org/library/subprocess.html#subprocess.Popen)，这导致了直接的问题 ( `OSError: [Errno 2] No such file or directory`)。

一般来说，Popen 的第一个参数应该是一个序列，而不是一个字符串，除非你还传递了`shell=True`关键字参数。如果第一个参数是字符串并且`shell=False`（默认值），Popen 将尝试执行以字符串值命名的文件。没有命名的文件`"python '/root/my_script.py'"`（整个字符串），因此你得到一个`OSError`.

所以，

```
p = subprocess.Popen(
    "python '/root/my_script.py'", 
    stdout=subprocess.PIPE, stderr=subprocess.PIPE
) 
```

应该可能变成...

```
p = subprocess.Popen(
    ["python", "'/root/my_script.py'"], 
    stdout=subprocess.PIPE, stderr=subprocess.PIPE
) 
```

或（基本上等价）

```
p = subprocess.Popen(
    "python '/root/my_script.py'".split(), 
     stdout=subprocess.PIPE, stderr=subprocess.PIPE
) 
```

或（见[警告](http://docs.python.org/library/subprocess.html#frequently-used-arguments)）

```
p = subprocess.Popen(
    "python '/root/my_script.py'", shell=True,
    stdout=subprocess.PIPE, stderr=subprocess.PIPE
) 
```

* * *

**更新：**您的问题的答案是肯定的。Python 可以帮助你完成所有你想做的事情。这是您列表的细分。

**剧透警报！如果您想自己解决问题，请不要阅读超出此范围的内容。**

*   `read a csv FILE`

你所做的一切都很好。其他方式 ...

```
with open('my_list.csv', 'rb') as fp:
    my_data_list = [row for row in csv.reader(fp)] 
```

...它引入了一些潜在的新概念，[with 语句](http://effbot.org/pyref/with.htm)和[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)。但是您实际上并不需要一个中间列表来执行操作，您可以在同一个循环中读取和写入（见下文）

*   `executes COMMAND on fourth (vertical) column of FILE`
*   `the COMMAND prints`
*   `loop until first empty row of FILE`

我假设您想打印运行命令的输出或结果。

```
for row in my_data_list:
    command = row[3] #<- 4th column is index 3, 1st is 0
    p = Popen(command.split(), stdout=PIPE, stderr=STDOUT) #<- stderr to stdout
    stdout, empty = p.communicate()
    print stdout 
```

*   `read each line for HEALTHY (from COMMAND)`
    *   `if multiple lines of HEALTHY and all do not equal Yes, HEALTHY equals "No"`
    *   `if HEALTHY is not found on any lines, HEALTHY equals "Error Scanning"`
*   `write HEALTHY on new fifth column to NEW_FILE with all five columns`

    ```
    if 'HEALTHY:No' in stdout:
        writer.writerow(row + ['No'])
    elif 'HEATHLY:Yes' in stdout:
        writer.writerow(row + ['Yes'])
    else: 
        writer.writerow(row + ['Error Scanning']) 
    ```

并将它们放在一起（未经测试）......

```
import csv
from subprocess import Popen, PIPE, STDOUT

with open('my_list.csv', 'rb') as incsv:
    with open('new_data.csv', 'wb') as outcsv:
        reader = csv.reader(incsv)
        writer = csv.writer(outcsv)

        for row in reader:
            p = Popen(row[3].split(), stdout=PIPE, stderr=STDOUT)
            stdout, empty = p.communicate()

            print 'Command: %s\nOutput: %s\n' % (row[3], stdout)

            if 'HEALTHY:No' in stdout:
                writer.writerow(row + ['No'])
            elif 'HEATHLY:Yes' in stdout:
                writer.writerow(row + ['Yes'])
            else: 
                writer.writerow(row + ['Error Scanning']) 
```

**更新：**修复了 csv 读取器和写入器文件对象的错误命名选择

**更新：** Python 2.5 引入了该[`from __future__ import with_statement`](http://docs.python.org/whatsnew/2.5.html#pep-343-the-with-statement)指令。对于 2.5 之前的 python 版本， with 语句不可用。在这种情况下，常见的做法是将文件操作包装在 try finally 中。如中，

```
import csv
from subprocess import Popen, PIPE, STDOUT

incsv = open('my_list.csv', 'rb')
try:
    reader = csv.reader(incsv)
    outcsv = open('new_data.csv', 'wb')
    try:    
        writer = csv.writer(outcsv)

        for row in reader:
            p = Popen(row[3].split(), stdout=PIPE, stderr=STDOUT)
            stdout, empty = p.communicate()

            print 'Command: %s\nOutput: %s\n' % (row[3], stdout)

            if 'HEALTHY:No' in stdout:
                writer.writerow(row + ['No'])
            elif 'HEATHLY:Yes' in stdout:
                writer.writerow(row + ['Yes'])
            else: 
                writer.writerow(row + ['Error Scanning'])
    finally:
        outcsv.close()
finally:
    incsv.close() 
```

！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:53:40.233

在您的“奖金”部分：

如果要搜索多个事物，最简单最直接的方法是分别搜索每个事物，然后连接`or`：

```
if 'Linux' in stdout or 'swap' in stdout or 'LVM' in stdout:
    writer.writerow(row + ['Linux']) 
```

如果您发现这不雅或需要搜索更多内容，可以使用该`any`函数和*生成器表达式*：

```
if any(x in stdout for x in ('Linux', 'swap', 'LVM')):
    writer.writerow(row + ['Linux']) 
```

最后，如果这仍然太不优雅，或者如果标准输出变得更大并且您不想多次搜索它，您可以通过`re`模块使用正则表达式。

# javascript - 功能-仅在单击另一个按钮后才显示按钮？

> ID：10122954
> 
> 赞同：1
> 
> 时间：2012-04-12T11:48:50.463
> 
> 标签：javascript, html, css, function, prompt

我对函数一点也不擅长，并且学习 JavaScript，我需要一些帮助来学习我正在制作的示例之一。我有个问题。如何使下一个按钮仅在单击前一个按钮时才显示？（例如，如果不先点击 Google，就看不到 Yahoo 按钮）代码如下：

```
<html>
<head>
<script type="text/javascript">
function show_prompt()
{
var name=prompt("Your Name");
if (name!=null && name!="")
  {
  alert("Thanks for clicking! You will now be redirected to Google.com");
  window.open("http://www.google.com/"};
}
</script>
<script type="text/javascript">
function show_alert()
{
alert("Thanks for clicking me! You are now going to Yahoo.com!");
window.open("http://www.yahoo.com");
}
</script>
<script type="text/javascript">
function show_alert1()
{
alert("Thanks for clicking. Have fun on facebook!");
window.open("http://www.facebook.com/");
}
</script>
</head>
<body>
<ul>
<li><input type="button" onclick="show_prompt()" value="Google" />
<li><input type="button" onclick="show_alert()" value="Yahoo" />
<li><input type="button" onclick="show_alert1()" value="Facebook" />
</ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:56:44.553

给按钮 id，然后将它们的 css 显示属性设置为 none 以使它们不可见（并且不占用任何空间）。

```
<ul> 
  <li><input type="button" onclick="show_prompt();showNext('btnYahoo')" value="Google" /></li> 
  <li><input type="button" id="btnYahoo" onclick="show_alert();showNext('btnFacebook')" value="Yahoo" style="display:none" /></li>
  <li><input type="button" id="btnFacebook" onclick="show_alert1()" value="Facebook" style="display:none" /></li> 
</ul> 
```

函数 showNext 然后显示传递给函数的 ID 的按钮。见上文，当函数被调用时，我会传入“btnYahoo”或“btnFacebook”，这取决于我接下来要显示哪一个。

```
function showNext(showThis){

  document.getElementById(showThis).style.display = "block";

} 
```

希望有帮助

# wcf - (413) 请求实体太大 | 上传ReadAheadSize

> ID：10122957
> 
> 赞同：153
> 
> 时间：2012-04-12T11:49:10.020
> 
> 标签：wcf, iis

我用 .NET 4.0 编写了一个 WCF 服务，该服务托管在我`x64`的带有 IIS 7.5 的 Windows 7 Ultimate 系统上。其中一个服务方法有一个“对象”作为参数，我正在尝试发送一个包含图片的 byte[]。只要这张图片的文件大小小于大约。48KB，一切顺利。但是，如果我尝试上传更大的图片，WCF 服务会返回错误：`(413) Request Entity Too Large.` 所以我当然花了 3 个小时在谷歌上搜索错误消息，而且我看到的关于这个主题的每个主题都建议提高“uploadReadAheadSize”属性。所以我所做的是使用以下命令（10485760 = 10MB）：

`"appcmd.exe set config -section:system.webserver/serverruntime/uploadreadaheadsize: 10485760 /commit:apphost"`

`"cscript adsutil.vbs set w3svc/<APP_ID>/uploadreadaheadsize 10485760"`

我还使用 IIS 管理器通过打开站点并转到管理下的“配置编辑器”来设置值。不幸的是，我仍然收到 Request Entity Too Large 错误，这真的令人沮丧！

那么有人知道我还能尝试解决这个错误吗？

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2012-04-12T12:39:33.127

那不是IIS的问题，而是WCF的问题。默认情况下，WCF 将消息限制为 65KB，以避免使用大消息进行拒绝服务攻击。此外，如果您不使用 MTOM，它会将 byte[] 发送到 base64 编码字符串（大小增加 33%）=> 48KB * 1,33 = 64KB

要解决此问题，您必须重新配置服务以接受更大的消息。此问题之前触发了 400 Bad Request 错误，但在较新版本中，WCF 开始使用 413，这是此类错误的正确状态代码。

您需要`maxReceivedMessageSize`在绑定中进行设置。您还可以根据需要设置`readerQuotas`.

```
<system.serviceModel>
  <bindings>
    <basicHttpBinding>
      <binding maxReceivedMessageSize="10485760">
        <readerQuotas ... />
      </binding>
    </basicHttpBinding>
  </bindings>  
</system.serviceModel> 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2013-06-07T18:30:43.543

我在带有 WCF REST 服务的 IIS 7.5 上遇到了同样的问题。尝试通过 POST 上传任何 65k 以上的文件，它会返回错误 413“请求实体太大”。

您需要了解的第一件事是您在 web.config 中配置了什么样的绑定。这是一篇很棒的文章...

[BasicHttpBinding vs WsHttpBinding vs WebHttpBinding](https://stackoverflow.com/questions/2650785/basichttpbinding-vs-wshttpbinding-vs-webhttpbinding)

如果您有 REST 服务，则需要将其配置为“webHttpBinding”。这是修复：

```
<system.serviceModel>

<bindings>
   <webHttpBinding>
    <binding 
      maxBufferPoolSize="2147483647" 
      maxReceivedMessageSize="2147483647" 
      maxBufferSize="2147483647" transferMode="Streamed">
    </binding>  
   </webHttpBinding>
</bindings> 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-03-29T08:15:09.303

我有同样的问题并设置`uploadReadAheadSize`解决了它：

[http://www.iis.net/configreference/system.webserver/serverruntime](http://www.iis.net/configreference/system.webserver/serverruntime)

“该值必须介于 0 和 2147483647 之间。”

如果您不想执行 cmd 操作，可以在 applicationHost.config-fle 中轻松设置它。

它位于`WindowsFOLDER\System32\inetsrv\config`（2008服务器）。

你必须用记事本打开它。先备份文件。

根据配置中的评论，解锁部分的推荐方法是使用位置标签：

```
<location path="Default Web Site" overrideMode="Allow">
    <system.webServer>
        <asp />
    </system.webServer>
</location>" 
```

所以你可以写在底部（因为它以前不存在）。我`maxvalue`在这里写 - 如果你愿意，写下你自己的价值。

```
<location path="THENAMEOFTHESITEYOUHAVE" overrideMode="Allow">
    <system.webServer>
        <asp />
        <serverRuntime uploadReadAheadSize="2147483647" />
    </system.webServer>
</location> 
```

例如，如果你把它放在最后`</configuration>`，你就知道它在哪里。

希望能解决您的问题。对我来说，这是一个 SSL 开销问题，太多的帖子冻结了应用程序，引发了*(413) Request Entity Too Large*错误。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2016-03-22T16:19:22.233

我收到此错误消息，即使我在`max`WCF 服务配置文件的绑定中设置了设置：

```
<basicHttpBinding>
        <binding name="NewBinding1"
                 receiveTimeout="01:00:00"
                 sendTimeout="01:00:00"
                 maxBufferSize="2000000000"
                 maxReceivedMessageSize="2000000000">

                 <readerQuotas maxDepth="2000000000"
                      maxStringContentLength="2000000000"
                      maxArrayLength="2000000000" 
                      maxBytesPerRead="2000000000" 
                      maxNameTableCharCount="2000000000" />
        </binding>
</basicHttpBinding> 
```

似乎没有应用这些绑定设置，因此出现以下错误消息：

> IIS7 - (413) 连接到服务时请求实体太大。

## 问题

我意识到标签中的`name=""`属性不是自由文本字段，正如我所想的那样**。**它是[本文档页面](https://msdn.microsoft.com/en-us/library/ms733932(v=vs.110).aspx)中提到**的服务合同实现的完全限定名称**。`<service>``web.config`

 ****如果不匹配，则不会应用绑定设置！

```
<services>
  <!-- The namespace appears in the 'name' attribute -->
  <service name="Your.Namespace.ConcreteClassName">
    <endpoint address="http://localhost/YourService.svc"
      binding="basicHttpBinding" bindingConfiguration="NewBinding1"
      contract="Your.Namespace.IConcreteClassName" />
  </service>
</services> 
```

我希望这可以减轻某人的痛苦...

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-03-29T19:04:04.963

如果您在尝试了此线程中的所有解决方案后仍遇到此问题，并且您正在通过 SSL（例如 https）连接到服务，这可能会有所帮助：

[http://forums.newatlanta.com/messages.cfm?threadid=554611A2-E03F-43DB-92F996F4B6222BC0&#top](http://forums.newatlanta.com/messages.cfm?threadid=554611A2-E03F-43DB-92F996F4B6222BC0&#top)

总而言之（以防将来链接失效），如果您的请求足够大，客户端和服务之间的证书协商将随机失败。为了防止这种情况发生，您需要在 SSL 绑定上启用特定设置。在您的 IIS 服务器上，您需要执行以下步骤：

1.  通过 cmd 或 powershell，运行`netsh http show sslcert`. 这将为您提供当前配置。您需要以某种方式保存它，以便以后再次引用它。
2.  您应该注意到“协商客户端证书”已禁用。这是问题设置；以下步骤将演示如何启用它。
3.  不幸的是，没有办法改变现有的绑定；你必须删除它并重新添加它。运行您之前保存的配置中显示的 IP:port 在`netsh http delete sslcert <ipaddress>:<port>`哪里。`<ipaddress>:<port>`
4.  现在您可以重新添加绑定。您可以查看`netsh http add sslcert` [此处 (MSDN)](https://msdn.microsoft.com/en-us/library/windows/desktop/cc307220(v=vs.85).aspx)的有效参数，但在大多数情况下，您的命令将如下所示：

`netsh http add sslcert ipport=<ipaddress>:<port> appid=<application ID from saved config including the {}> certhash=<certificate hash from saved config> certstorename=<certificate store name from saved config> clientcertnegotiation=enable`

如果您有多个 SSL 绑定，您将为每个绑定重复该过程。希望这有助于为其他人节省这个问题给我带来的数小时的头痛。

编辑：根据我的经验，您实际上不能`netsh http add sslcert`直接从命令行运行命令。您需要首先通过键入进入 netsh 提示符`netsh`，然后发出类似`http add sslcert ipport=...`的命令才能使其工作。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-04-03T17:51:13.643

这帮助我解决了问题（一行 - 为可读性/可复制性而拆分）：

```
C:\Windows\System32\inetsrv\appcmd  set config "YOUR_WEBSITE_NAME" 
     -section:system.webServer/serverRuntime /uploadReadAheadSize:"2147483647" 
     /commit:apphost 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-10-24T13:32:42.713

对我来说，将`uploadReadAheadSize`int.MaxValue 设置为也解决了问题，同时还增加了 WCF 绑定的限制。

似乎在使用 SSL 时，整个请求实体主体都已预加载，为此使用了此元数据库属性。

有关详细信息，请参阅：

[由于请求实体太大，页面未显示。iis7](https://stackoverflow.com/questions/22762311/the-page-was-not-displayed-because-the-request-entity-is-too-large-iis7)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-04-07T21:16:49.160

对于任何其他曾经寻找 IIS WCF 错误 413 : Request entity to large 并在 Sharepoint 中使用 WCF 服务的人，这是给您的信息。如果使用 MultipleBaseAddressBasicHttpBindingServiceHostFactory，其他网站/帖子中建议的应用程序主机和 web.config 中的设置在 SharePoint 中不起作用。您可以使用 SP Powershell 获取 SPWebService.Content 服务，创建一个新的 SPWcvSettings 对象并为您的服务更新上述设置（它们将不存在）。请记住在创建和添加设置时只使用服务的名称（例如 [yourservice.svc]）。有关更多信息，请参阅此站点[https://robertsep.wordpress.com/2010/12/21/set-maximum-upload-filesize-sharepoint-wcf-service](https://robertsep.wordpress.com/2010/12/21/set-maximum-upload-filesize-sharepoint-wcf-service)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-05-21T11:45:35.353

就我而言，我不得不增加 BizTalk 中接收位置的“最大接收消息大小”。这也有一个默认值 64K，因此无论我在 web.config 中配置了什么，每条消息都会被 BizTAlk 退回

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-09-18T05:14:53.553

我已经能够通过在同一个 wcf 通道/客户端上具有大量内容的请求之前执行一个虚拟调用（例如 IsAlive 返回 true ）来解决这个问题。显然 ssl 协商是在第一次通话时完成的。所以不需要增加Uploadreadaheadsize。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-07-12T20:49:34.700

就我而言，我收到此错误消息是因为我更改了服务的命名空间，并且服务标签指向了旧的命名空间。我刷新了命名空间，错误消失了：

```
<services>
  <service name="My.Namespace.ServiceName"> <!-- Updated name -->
    <endpoint address="" 
              binding="wsHttpBinding" 
              bindingConfiguration="MyBindingConfiguratioName" 
              contract="My.Namespace.Interface" <!-- Updated contract -->
    />
  </service>
</services> 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-02-16T23:04:24.077

添加此内容后，我的问题消失了：

```
 <system.webServer>
        <security>
            <requestFiltering>
                <requestLimits
                    maxAllowedContentLength="104857600"
                />
            </requestFiltering>
        </security>
  </system.webServer> 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-06-20T09:21:22.420

发出远程服务器返回意外响应：(413) Request Entity Too Large on WCF with Resful

请看我的解释配置

```
</client>
<serviceHostingEnvironment multipleSiteBindingsEnabled="false" aspNetCompatibilityEnabled="true"/>

<bindings>

   <!-- this for restfull service -->
  <webHttpBinding>
    <binding name="RestfullwebHttpBinding"
      maxBufferPoolSize="2147483647"
      maxReceivedMessageSize="2147483647"
      maxBufferSize="2147483647" transferMode="Streamed">

      <readerQuotas 
        maxDepth="2147483647" 
        maxStringContentLength="2147483647"
        maxArrayLength="2147483647" 
        maxBytesPerRead="2147483647" /> 

    </binding>
  </webHttpBinding>
  <!-- end -->

   <!-- this for Soap v.2 -->
  <wsHttpBinding>
    <binding name="wsBinding1" maxReceivedMessageSize="2147483647" closeTimeout="00:10:00" openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00" bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="2147483647" messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
      <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false"/>
      <!--UsernameToken over Transport Security-->
      <security mode="TransportWithMessageCredential">
        <message clientCredentialType="UserName" establishSecurityContext="true"/>
      </security>
    </binding>
  </wsHttpBinding>
   <!-- this for restfull service -->

   <!-- this for Soap v.1 -->
  <basicHttpBinding>
    <binding name="basicBinding1" maxReceivedMessageSize="2147483647" closeTimeout="00:10:00" openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="2147483647" messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false" transferMode="Streamed">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
      <security mode="None"/>
    </binding>
  </basicHttpBinding>
</bindings> 
<!-- end -->

<services>
  <clear/>

  <service name="ING.IWCFService.CitisecHashTransfer"  >
    <endpoint address="http://localhost:8099/CitisecHashTransfer.svc"
                  behaviorConfiguration="RestfullEndpointBehavior"
                  binding="webHttpBinding"
                  bindingConfiguration="RestfullwebHttpBinding"
                  name="ICitisecHashTransferBasicHttpBinding"
                  contract="ING.IWCFService.ICitisecHashTransfer" />
  </service>

</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="ServiceBehavior">
      <serviceMetadata httpsGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
      <dataContractSerializer maxItemsInObjectGraph="2147483647"/>

      <serviceCredentials>
        <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="ING.IWCFService.IWCFServiceValidator, ING.IWCFService"/>
      </serviceCredentials>
      <serviceSecurityAudit auditLogLocation="Application" serviceAuthorizationAuditLevel="SuccessOrFailure" messageAuthenticationAuditLevel="SuccessOrFailure"/>
      <serviceThrottling maxConcurrentCalls="1000" maxConcurrentSessions="100" maxConcurrentInstances="1000"/>

    </behavior>
    <behavior>
      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
      <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="EndpointBehavior">
      <dataContractSerializer maxItemsInObjectGraph="2147483647" />
    </behavior> 
    <behavior name="RestfullEndpointBehavior">
      <dataContractSerializer maxItemsInObjectGraph="2147483647"  />
      <webHttp/>
    </behavior> 
  </endpointBehaviors>
</behaviors> 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-02-25T18:49:27.120

使用 Visual Studio 2017 在 IIS Express 上遇到类似错误。

> HTTP 错误 413.0 - 请求实体太大
> 
> 由于请求实体太大，页面未显示。
> 
> 最可能的原因：
> 
> *   Web 服务器拒绝为请求提供服务，因为请求实体太大。
>     
>     
> *   Web 服务器无法为请求提供服务，因为它正在尝试协商客户端证书，但请求实体太大。
>     
>     
> *   请求 URL 或 URL 的物理映射（即 URL 内容的物理文件系统路径）太长。
>     
>     
> 
> 你可以尝试的事情：
> 
> *   验证请求是否有效。
>     
>     
> *   如果使用客户端证书，请尝试：
>     
>     
>     *   增加 system.webServer/serverRuntime@uploadReadAheadSize
>         
>         
>     *   配置您的 SSL 端点以协商客户端证书作为初始 SSL 握手的一部分。(netsh http 添加 sslcert ...clientcertnegotiation=enable) .vs\config\applicationhost.config

通过编辑解决这个问题`\.vs\config\applicationhost.config`。`serverRuntime`从这样切换`Deny`到：`Allow`

```
<section name="serverRuntime" overrideModeDefault="Allow" /> 
```

如果不编辑此值，设置时会出现如下错误`uploadReadAheadSize`：

> HTTP 错误 500.19 - 内部服务器错误
> 
> 无法访问请求的页面，因为该页面的相关配置数据无效。
> 
> 此配置部分不能在此路径中使用。当该部分锁定在父级别时会发生这种情况。锁定是默认情况下 (overrideModeDefault="Deny") 或由具有 overrideMode="Deny" 或旧 allowOverride="false" 的位置标记显式设置的。

然后`Web.config`使用以下值进行编辑：

```
<system.webServer>
  <serverRuntime uploadReadAheadSize="10485760" />
... 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2022-01-10T15:58:47.517

将很多回复粘在一起将我需要的所有信息：

IIS 配置：C:\Windows\System32\inetsrv\config\applicationHost.config（非常底部）

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
...
<location path="Default Web Site">
        <system.webServer>
            <security>
                <access sslFlags="SslNegotiateCert" />
                <!-- Max upload size in bytes -->
                <requestFiltering>
                     <requestLimits maxAllowedContentLength="104857600" />
                </requestFiltering>
            </security>
        </system.webServer>
    </location>
</configuration> 
```****

# windows-phone-7 - 某些视频文件无法在 windows phone 7.5 中播放

> ID：10122959
> 
> 赞同：0
> 
> 时间：2012-04-12T11:49:13.683
> 
> 标签：windows-phone-7

我正在开发一个 Windows 手机应用程序（Mango 7.5）。尝试通过网络浏览器播放视频文件 (.wmv) 时，收到此错误“抱歉，我们无法在您的手机上播放此文件”。

请让我知道是否有解决此问题的方法。文件大小约为 16 MB。该问题仅针对少数文件，而不是针对所有 .wmv 文件。请提供您对此的意见以解决它。

我尝试使用 MediaPlayerLauncherstill 提供的修复无法解决它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:08:17.020

查看[Windows Phone 支持的媒体编解码器列表](http://msdn.microsoft.com/en-us/library/ff462087%28v=vs.92%29.aspx)。即使在最新类型的处理器上，支持也仅限于 800x600 分辨率和 2Mbps 平均比特率，因此它无法播放以 WMV 编码的高清视频。

# android - 检测 ViewPager 上的视图变化

> ID：10122963
> 
> 赞同：3
> 
> 时间：2012-04-12T11:49:33.683
> 
> 标签：android, android-viewpager

我正在通过 SwipeyTabsAdapter 的库 ViewPager ViewPagerExtensions (com.astuetz.viewpager.extensions) 水平实现一个。有没有办法在改变观点时拦截？同样，我可以随时知道用户的观点是什么？

ViewPager 的代码

```
public class DiccionariuPagerAdapter extends PagerAdapter {

    protected transient Activity mContext;

    private int mLength = 0;

    public DiccionariuPagerAdapter(Activity context, int length) {
        mContext = context;
        mLength = length;
    }

    @Override
    public int getCount() {
        return mLength;
    }

    @Override
    public Object instantiateItem(View container, int position) {

        RelativeLayout v = new RelativeLayout(mContext);

        View vi; // Creating an instance for View Object
        LayoutInflater inflater = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        if (position == 0) {            
            vi = inflater.inflate(R.layout.diccionariu, null);
        }
        else if (position == 1) {
            vi = inflater.inflate(R.layout.conxugar, null);
        }
        else {
            vi = inflater.inflate(R.layout.traducir, null);
        }

        v.addView(vi);

        //v.addView(t);

        ((ViewPager) container).addView(v, 0);

        startUpdate(container);

        return v;
    }

    @Override
    public void destroyItem(View container, int position, Object view) {
        ((ViewPager) container).removeView((View) view);
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view == ((View) object);
    }

    @Override
    public void finishUpdate(View container) {}

    @Override
    public void restoreState(Parcelable state, ClassLoader loader) {}

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void startUpdate(View container) {}

} 
```

非常感谢您

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T11:33:15.787

要获取当前项目，请使用：

```
int itemId = ViewPager.getCurrentItem() 
```

有了它，您可以使用适配器从适配器中检索实际视图

```
Adapter.getItem(itemId) 
```

你也可以使用监听器`OnPageChangeListener`

```
viewPager.setOnPageChangeListener(new OnPageChangeListener... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-29T18:38:41.137

编译和工作：

~~~

```
 mPager.setOnPageChangeListener(new OnPageChangeListener()
    {
        @Override
        public void onPageSelected(int position) 
        {
                // if listener is set - when using an indicator, must update that here
                mIndicator.setCurrentItem(position);

                String msg = "onPageSelected - position: " + position;
                Log.d("debug1", msg);
        }

        @Override
        public void onPageScrollStateChanged(int state) {}

        @Override
        public void onPageScrolled(int position, float arg1, int arg2) {}
    }); 
```

# java - 在 IE7 中通过 javascript 访问小程序方法

> ID：10122964
> 
> 赞同：2
> 
> 时间：2012-04-12T11:49:34.340
> 
> 标签：java, javascript, internet-explorer-7, applet

我有一个在 Firefox 中运行良好的小程序，但是在 ie8（我认为是 ie7）中，javascript 似乎无法访问小程序方法。

在 js 调试器中 -

```
scanApplet.addUploadParameter 
```

给了我一个java异常-

```
java.lang.NoSuchFieldException: addUploadParameter in class: co.altcom.cache.scanner.CacheScan 
```

我实际上试图运行的（jquery）代码是

```
$('input, select').each(function () {
    scanApplet.addUploadParameter(this.name, this.value);
}); 
```

这是抛出以下java异常 -

```
java.lang.NullPointerException 
```

我真的不知道从哪里开始。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:07:28.447

`each`您应该在 jQuery 函数中使用包装在其中的关键字`this`。另外，name可以使用[`prop`](http://api.jquery.com/prop/)function，value可以使用[`val()`](http://api.jquery.com/val/)function。所以jQuery将是：

```
$('input, select').each(function () {  
    scanApplet.addUploadParameter($(this).prop('name'), $(this).val());  
}); 
```

那应该修复 JavaScript 位。如果没有更多信息，我无法判断它是否解决了您的*所有*问题，以及是否修复了 Java 错误，因此如果您在此之后仍需要更多帮助，请联系我们并提供更多信息。

**编辑**
在评论中提到 IE7 仍然存在问题。您应该在 IE7 中调试调用，然后查看代码的哪一部分给您带来了麻烦。一种*快速、老旧且**非常肮脏***的方法是仅记录或警告事物以查看问题所在。例如：

```
 // scanApplet.addUploadParameter($(this).prop('name'), $(this).val());
    alert(scanApplet);
    alert(scanApplet.addUploadParameter);
    alert($(this).prop('name'));
    // etc etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:09:29.217

我没有在我的问题中包含它，但我正在使用 jquery 创建 scanApplet 变量 -

```
var scanApplet = $('#scanApplet')[0] 
```

看起来`scanApplet`问题出在变量上。下面的代码解决了这个问题。

```
 $('input, select').each(function () {
            var el_name = $(this).prop('name');
            var el_value = $(this).val();
            if (Browser.Version() < 8) {
                scanApplet.addUploadParameter(el_name, el_value);
            } else {
                $('#scanApplet')[0].addUploadParameter(el_name, el_value);
            }
        }); 
```

我不知道为什么ie7允许我像这样引用小程序，我的代码中没有指定scanApplet - 我想这与java的deployJava.js处理ie的方式有关，但我从未找到任何关于它的文档. 我正在使用以下方式部署小程序 -

```
 var attributes = {id: 'scanApplet', code: "{{ jar_path }}",  width:1, height:1} ;
        var parameters = {jnlp_href: "{{ jnlp_path }}"} ;
        deployJava.runApplet(attributes, parameters, '1.6'); 
```

我也不知道是什么破坏了我的代码，我想我已经更改了我一直在使用的 jquery 版本，但我尝试快速将 1.6.1 换成 1.4.2，但这并没有修复我的原始代码。

无论如何，通过它的 id 引用小程序似乎可以解决我在 ie7 中的问题。

# android - 在 ubuntu 10.04- 32 位上构建 android

> ID：10122967
> 
> 赞同：0
> 
> 时间：2012-04-12T11:49:46.053
> 
> 标签：android, jdk1.6

我正在尝试为 Ubuntu 10.04 32 位系统编译 Android。我正在遵循[http://source.android.com/source/initializing.html上的指南](http://source.android.com/source/initializing.html)

但我收到以下错误：

您正在尝试使用不正确的 java 版本进行构建。

您的版本是：java 版本“1.6.0_20”。正确的版本是：Java SE 1.6。

猜猜，ubuntu 对 Java SE 包的支持已经停止。因此我现在应该将我的 Java JDK 降级到 1.6 吗？请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:34:21.877

[在这里](http://forum.xda-developers.com/showpost.php?p=21058596&postcount=92)有人遇到了和你一样的问题。解决方法，“卸载OpenJDK和Sun Java后，我自己重新安装了Sun Java 6 JDK，重启，一切正常。” 检查链接以获取更多信息。在搜索时，我还偶然发现[了 64 bits 的问题](http://code.google.com/p/android/issues/detail?id=9605)，这不是你的意思，但可能对其他人有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:20:00.847

也许你应该使用“sun jdk”，而不是 OpenJDK。版本应该是 1.6。

# php - Zend - 检查浏览器的后退按钮是否被按下

> ID：10122968
> 
> 赞同：1
> 
> 时间：2012-04-12T11:49:47.367
> 
> 标签：php, zend-framework, browser, zend-form, zend-studio

这是场景：我填写了一个表格，然后在我的数据库中插入了一些东西。之后，我会自动重定向到另一个表单。如果用户按下浏览器的后退按钮，因此没有填写并提交第二个表单，我想从数据库中删除他之前插入的内容。

我怎么知道用户是否按下了浏览器的后退按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:21:50.197

首先 - 在 Zend 中没有办法做到这一点，因为它是客户端操作，而不是服务器端。您可以尝试在第二页上找到一种利用 javascript`window.onunload`事件（也在[jQuery 中实现](http://api.jquery.com/unload/)）的方法，但这确实不是最安全的选择，因为它可能不会在某些浏览器中触发，或者用户可能会关闭他们的 javascript。

您可以保存会话中第一个表单的最后一个插入 ID，并在下次加载页面时检查它是否存在。例如，当用户提交第一个表单时，您说表单 A 已提交，并且已使用此 id 保存了一条记录。然后，如果用户提交下一个表单，则清除标志（意味着一切按计划进行）。但是，如果用户按下后退按钮并返回上一页，则检查是否设置了标志。如果是，则从表中删除该记录（因为用户在没有提交第一个表单的情况下按下了返回）。

这个解决方案的问题是浏览器很可能会加载页面的缓存版本，而您的 PHP 代码甚至不会被执行。因此，您需要在提交第一个表单时检查状态。但是，这会产生另一个问题——如果用户提交第一个表单，然后返回并关闭窗口怎么办？它永远不会运行检查，也永远不会删除该行。

在我看来，最可行的选择是修剪第一种形式的记录，这些记录比一个小时更早，并且尚未使用 cron 作业完成。

没有直接的解决方案，所以我想说将两种表单的所有字段都放在一页上。这将使您的生活更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:57:23.997

你到底是什么意思？您想在 javascript 或后端代码 (zend) 中检测到它吗？

您可以向表单添加一个令牌（唯一 id）并确保页面被缓存一段时间，因此当用户单击后退按钮时，页面不会从服务器重新获取，从而生成一个新令牌。

编辑：多步骤向导可以通过多种方式完成，既可以在您没有经过身份验证的用户时跟踪令牌，也可以根据您的案例检查提交的数据是否已重新提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T11:58:39.200

我不知道你是否能赶上这个事件（看看 history.back() ）

但我认为更好的方法是在你的数据库上设置一个状态（使用用户 ID 或类似的东西）并在状态保持“当前”时创建一个 cron 删除它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T21:32:33.790

我放弃了插入然后删除的想法。我选择在填写完两个表格后插入数据。感谢 Rikesh Shah 的想法！并感谢大家的回答！

# java - 在 Apache Tomcat 上运行的 Java TCP 服务器程序

> ID：10122969
> 
> 赞同：3
> 
> 时间：2012-04-12T11:49:51.577
> 
> 标签：java, apache, tomcat, jar

在这里，我对 TCP 服务器程序有一些问题，我创建了一个包含 TCP 服务器代码的 jar，它需要连续运行，我需要在 apache 服务器中部署这个 jar...当我们执行时，这个 jar 可以正常工作命令提示符 ans 的 jar 在其运行 apache tomcat 时将不接受传入的连接，在 apache 中，我已经运行了一些 jar，因此它们完全不依赖于这个 jar。

```
while (true) {
    Socket client = serverSocket.accept();
    System.out.println("S: Receiving...");

---------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:02:04.627

几年前，我们成功地为一个聊天程序做到了这一点，但维护起来却是一场噩梦。还有其他几种更标准化的方法可以做到这一点。从我的头顶来看，这就是我们所做的。

1.  创建了一个servlet
2.  在 servlet 的 init 函数中创建了一个为套接字提供服务的线程。

你可以在这里看到一个例子[Connecting to socket on Tomcat?](https://stackoverflow.com/questions/6396167/connecting-to-socket-on-tomcat) . 另请阅读此讨论[如何在 Tomcat（servlet 容器）中侦听套接字？](https://stackoverflow.com/questions/2417930/how-to-listen-a-socket-in-tomcatservlet-container)

一些替代方法是谷歌以下内容：

1.  JCA（Java 连接器架构）参见[http://code.google.com/p/jca-sockets/](http://code.google.com/p/jca-sockets/)示例

2.  JBOSS Netty 项目

我最近在 Apache Camel 中创建了一个 tcp/ip 服务器，这非常简单。

# c# - 登录时向浏览器中所有打开的客户端发送消息

> ID：10122970
> 
> 赞同：1
> 
> 时间：2012-04-12T11:49:53.230
> 
> 标签：c#, asp.net-mvc

我在 ASP.NET MVC 3 中有一个网站。

人们可以将消息发送到其他人的收件箱，目前他们得到通知的唯一方式是当他们 a) 登录时，b) 通过回发 c) 通过邮件进行刷新。

但是我如何才能向正确的人发送通知（如果有帮助，httpcontext.identy.user.name 是唯一的？）并将其发布在他们的屏幕上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T11:52:23.483

您可以使用 WebSocket 将新消息推送给所有用户，也可以使用 ajax 轮询并定期检查新消息。

[最简单的方法是使用SignalR](https://github.com/SignalR/SignalR)来实现这一点，如果 WebSockets 不可用，它使用 WebSockets 或默认为长轮询。

我建议阅读 SignalR[入门](https://github.com/SignalR/SignalR/wiki/Getting-Started)指南。还有一个可通过 Nuget 获得的示例，名为`SignalR.Sample`.

# meteor - 使用许多 HTML 模板文件构建大型 Meteor 应用程序的最佳实践是什么？

> ID：10122977
> 
> 赞同：165
> 
> 时间：2012-04-12T11:50:14.480
> 
> 标签：meteor

在所有示例（排行榜、文字游戏等）中，它们只有一个 HTML 模板文件。是否有一些包含许多不同 HTML 模板文件的大型开源 Meteor 项目，我们可以将其用作最佳实践示例？将大型应用程序所需的所有内容都放在一个模板文件中似乎不切实际。

* * *

## 回答 #1

> 赞同：274
> 
> 时间：2012-10-23T21:35:41.850

正如在非官方的流星常见问题解答中一样，我认为它几乎解释了如何构建大型应用程序：

> ### 我应该把我的文件放在哪里？
> 
> 流星中的示例应用程序非常简单，并没有提供太多洞察力。这是我目前对最佳方法的想法：（非常欢迎任何建议/改进！）
> 
> ```
> lib/                       # <- any common code for client/server.
> lib/environment.js         # <- general configuration
> lib/methods.js             # <- Meteor.method definitions
> lib/external               # <- common code from someone else
> ## Note that js files in lib folders are loaded before other js files.
> 
> collections/               # <- definitions of collections and methods on them (could be models/)
> 
> client/lib                 # <- client specific libraries (also loaded first)
> client/lib/environment.js  # <- configuration of any client side packages
> client/lib/helpers         # <- any helpers (handlebars or otherwise) that are used often in view files
> 
> client/application.js      # <- subscriptions, basic Meteor.startup code.
> client/index.html          # <- toplevel html
> client/index.js            # <- and its JS
> client/views/<page>.html   # <- the templates specific to a single page
> client/views/<page>.js     # <- and the JS to hook it up
> client/views/<type>/       # <- if you find you have a lot of views of the same object type
> client/stylesheets/        # <- css / styl / less files
> 
> server/publications.js     # <- Meteor.publish definitions
> server/lib/environment.js  # <- configuration of server side packages
> 
> public/                    # <- static files, such as images, that are served directly.
> 
> tests/                     # <- unit test files (won't be loaded on client or server) 
> ```
> 
> 对于较大的应用程序，可以将离散的功能分解为子目录，这些子目录本身使用相同的模式组织。这里的想法是，最终功能模块可以分解成一个单独的智能包，并在理想情况下共享。
> 
> ```
> feature-foo/               # <- all functionality related to feature 'foo'
> feature-foo/lib/           # <- common code
> feature-foo/models/        # <- model definitions
> feature-foo/client/        # <- files only sent to the client
> feature-foo/server/        # <- files only available on the server 
> ```

了解更多：[非官方 Meteor 常见问题解答](https://github.com/oortcloud/unofficial-meteor-faq)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-05-29T15:12:43.980

我同意 yagooar，但不是：

```
客户端/application.js
```

采用：

```
客户端/main.js
```

main.* 文件最后加载。这将有助于确保您没有任何加载顺序问题。有关更多详细信息，请参阅 Meteor 文档[http://docs.meteor.com/#structuringyourapp](http://docs.meteor.com/#structuringyourapp)。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-07-11T17:04:08.683

Meteor 的设计目的是让您几乎可以按照自己的方式构建您的应用程序。因此，如果您不喜欢您的结构，您可以将文件移动到新目录，甚至可以将一个文件拆分为多个部分，对于 Meteor，它几乎都是一样的。只需注意主文档页面中指定的客户端、服务器和公共目录的特殊处理：http: [//docs.meteor.com/](http://docs.meteor.com/)。

将所有内容集中在一个 HTML 填充中肯定不会成为最佳实践。

这是一种可能结构的示例：在我的一个应用程序中，一个讨论论坛，我按模块或“页面类型”（主页、论坛、主题、评论）组织，为每个应用放置 .css、.html 和 .js 文件页类型一起在一个目录中。我还有一个“基本”模块，其中包含常见的 .css 和 .js 代码以及主模板，它使用 {{renderPage}} 根据路由器呈现其他模块之一。

```
my_app/
    lib/
        router.js
    client/
        base/
            base.html
            base.js
            base.css
        home/
            home.html
            home.js
            home.css
        forum/
            forum.html
            forum.js
            forum.css
        topic/
            topic.html
            topic.js
            topic.css
        comment/
            comment.html
            comment.js
            comment.css 
```

您也可以按功能组织

```
my_app/
    lib/
        router.js
    templates/
        base.html
        home.html
        forum.html
        topic.html
        comment.html
    js/
        base.js
        home.js
        forum.js
        topic.js
        comment.js
    css/
        base.css
        home.css
        forum.css
        topic.css
        comment.css 
```

我希望一些更具体的最佳实践结构和命名约定确实会出现。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-04-13T22:22:55.023

把它放在一起！从文档：

```
> HTML files in a Meteor application are treated quite a bit differently
> from a server-side framework. Meteor scans all the HTML files in your
> directory for three top-level elements: <head>, <body>, and
> <template>. The head and body sections are seperately concatenated
> into a single head and body, which are transmitted to the client on
> initial page load.
> 
> Template sections, on the other hand, are converted into JavaScript
> functions, available under the Template namespace. It's a really
> convenient way to ship HTML templates to the client. See the templates
> section for more. 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2014-05-06T23:14:39.323

对于所有在谷歌上搜索这个主题的人：

命令行工具（由 Iron Router 背后的`em`人 EventedMind 提供）在装配新的 Meteor 应用程序时非常有用。它将创建一个不错的文件/文件夹结构。如果您已经在开发一个应用程序并想要重新组织它，只需设置一个新项目，`em`您就可以使用它来获得灵感。

见：[https ://github.com/EventedMind/em](https://github.com/EventedMind/em)

在这里：[https ://stackoverflow.com/questions/17509551/what-is-the-best-way-to-organize-templates-in-meteor-js](https://stackoverflow.com/questions/17509551/what-is-the-best-way-to-organize-templates-in-meteor-js)

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2014-02-14T19:20:13.697

我认为 Discover Meteor Book 的文件结构非常好，是一个良好的开端。

```
/app: 
 /client
   main.html
   main.js
 /server 
 /public
 /lib
 /collections 
```

*   /server 目录中的代码仅在服务器上运行。
*   /client 目录中的代码仅在客户端上运行。
*   其他一切都在客户端和服务器上运行。
*   /lib 中的文件在其他任何内容之前加载。
*   任何 main.* 文件都会在其他所有内容之后加载。
*   您的静态资产（字体、图像等）位于 /public 目录中。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2014-11-04T10:38:18.703

## 创建包

当然，并非所有东西都适合这种方法，但在大型应用程序中，您将拥有许多可以隔离的功能。任何可分离和可重用的东西都适合包，其余的都放在通常的目录结构中，如其他答案中所述。即使您不制作包以避免开销，以模块化方式构建代码也是一个好主意（请参阅[这些建议](http://tech.exponential.io/meteor/building-large-modular-apps-meteor/)）

Meteor 允许对如何加载文件（加载顺序，其中：客户端/服务器/两者）以及包导出的内容进行细粒度控制。

我特别发现在相关文件之间共享逻辑的简单方法非常方便。比如说，你想做一些 util 函数并在不同的文件中使用。您只需将其设为“全局”（没有`var`），Meteor 会将其包装在包的命名空间中，因此它不会污染全局命名空间

[这](https://docs.meteor.com/#/full/packagejs)是官方文档

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-04-05T01:36:58.713

经过一段时间的meteorjs编码后，我很高兴有一些空闲时间致力于构建一个相当复杂的在线游戏。应用程序结构一直是我最关心的问题之一，看起来有几位非常优秀的程序员支持构建应用程序的仅包方法，它允许您松散地耦合功能上不同的包。该方法还有其他优点，可以在此处找到 2 篇很好的解释该方法的文章：

[http://www.matb33.me/2013/09/05/meteor-project-structure.html](http://www.matb33.me/2013/09/05/meteor-project-structure.html) [http://www.manuel-schoebel.com/blog/meteorjs-package-only-app-structure-with-mediator -图案](http://www.manuel-schoebel.com/blog/meteorjs-package-only-app-structure-with-mediator-pattern)

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2015-08-26T09:27:41.197

我们有一个大型项目（可能是迄今为止最大的 Meteor 项目之一，因为它已经进行了 1.5 年的全时开发）。我们在每个视图中使用相同的文件名集。它非常一致，可以帮助我们快速导航到我们正在寻找的内容：

*   事件.js
*   helpers.js
*   模板.html
*   路由.js
*   样式.less
*   等等

在项目中看起来像这样：

```
       ├── 合并请求
       │ ├── events.js
       │ ├── helpers.js
       │ ├── routers.js
       │ └── templates.html
       ├── customerSpoof
       │ └── routers.js
       ├── 仪表板
       │ ├── events.js
       │ ├── helpers.js
       │ ├── onDestroyed.js
       │ ├── onRendered.js
       │ ├── routers.js
       │ └── templates.html
       ├── 邮箱验证
       │ ├── events.js
       │ ├── helpers.js
       │ ├── routers.js
       │ └── templates.html
       ├── 加载中
       │ ├── styles.css
       │ └── templates.html
       ├── 邮箱
       │ ├── autoform.js
       │ ├──solidationRequestConfirmation
       │ │ ├── events.js
       │ │ ├── helpers.js
       │ │ ├── onCreated.js
       │ │ ├── onRendered.js
       │ │ └── templates.html
       │ ├── events.js
       │ ├── helpers.js

```

相关模板只是一起存储在同一个文件中。显示的内容在`view/order/checkout/templates.html`这里折叠：

```
<template name="orderCheckout"></template>

<template name="paymentPanel"></template>

<template name="orderCheckoutSummary"></template>

<template name="paypalReturnOrderCheckout"></template> 
```

当视图变得复杂且包含很多部分时，我们会使用子文件夹：

```
       ├── 购物车
       │ ├── addItem
       │ │ ├── autoform.js
       │ │ ├── events.js
       │ │ ├── helpers.js
       │ │ ├── onRendered.js
       │ │ ├── routers.js
       │ │ ├── styles.less
       │ │ └── templates.html
       │ ├── 结帐
       │ │ ├── autoform.js
       │ │ ├── events.js
       │ │ ├── helpers.js
       │ │ ├── onRendered.js
       │ │ ├── routers.js
       │ │ └── templates.html
       │ └── 查看
       │ ├── autoform.js
       │ ├── deleteItem
       │ │ ├── events.js
       │ │ ├── helpers.js
       │ │ └── templates.html
       │ ├── editItem
       │ │ ├── autoform.js
       │ │ ├── events.js
       │ │ ├── helpers.js
       │ │ └── templates.html
       │ ├── events.js
       │ ├── helpers.js
       │ ├── onDestroyed.js
       │ ├── onRendered.js
       │ ├── routers.js
       │ ├── styles.less
       │ └── templates.html

```

我们还使用 WebStorm 进行开发，这是一款用于 Meteor 开发的极其强大且灵活的编辑器。在搜索和组织我们的代码以及高效工作时，我们发现它非常有用。 [![网络风暴视图](../Images/585eedbe496662284548cfc16b19a2fb.png)](https://i.stack.imgur.com/yNwgS.png)

很高兴应要求分享详细信息。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2015-07-21T08:50:14.180

使用 Iron-cli 脚手架 CLI。确实让事情变得非常容易。

[https://github.com/iron-meteor/iron-cli](https://github.com/iron-meteor/iron-cli)

一旦安装。用于`iron create my-app`创建新项目。它将为您创建以下结构。您也可以在现有项目中使用它。`iron migrate`在项目目录中使用。

```
my-app/    
 .iron/    
   config.json    
 bin/    
 build/    
 config/    
   development/    
     env.sh    
     settings.json    
 app/    
   client/    
     collections/    
     lib/    
     stylesheets/    
     templates/    
     head.html    
   lib/    
     collections/    
     controllers/    
     methods.js    
     routes.js    
   packages/    
   private/    
   public/    
   server/    
     collections/    
     controllers/    
     lib/    
     methods.js    
     publish.js    
     bootstrap.js 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2015-06-17T10:48:14.923

我正在遵循 mattdeom 样板格式，其中已经包含了 Iron router & Model (Collection2) 。见下文 ：

```
client/                 # Client folder
    compatibility/      # Libraries which create a global variable
    config/             # Configuration files (on the client)
    lib/                # Library files that get executed first
    startup/            # Javascript files on Meteor.startup()
    stylesheets         # LESS files
    modules/            # Meant for components, such as form and more(*)
    views/              # Contains all views(*)
        common/         # General purpose html templates
model/                  # Model files, for each Meteor.Collection(*)
private/                # Private files
public/                 # Public files
routes/                 # All routes(*)
server/                 # Server folder
    fixtures/           # Meteor.Collection fixtures defined
    lib/                # Server side library folder
    publications/       # Collection publications(*)
    startup/            # On server startup
meteor-boilerplate      # Command line tool 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2014-01-05T13:51:37.183

有很多不同的方法来构建你的应用程序。例如，如果您有一个路由器和不同的页面模板，并且在每个页面模板内部您有许多页面部分等等，我将根据更高级别> 更低级别的语义来构建它。

例如：

```
client
  views
    common
      header
        header.html
        header.js
        header.css
      footer
        footer.html
        footer.js
        footer.css
    pages
      mainPage
        mainPage.html
        mainPage.js
        mainPage.css
        articles
          articles.html
          articles.js
          articles.css
        news
          news.html
          news.js
          news.css
     ... 
```

当然，您可以将新闻模板放在公共文件夹中，因为您可以在不同的页面上使用您的新闻模板。

我认为最好以自己熟悉的方式构建应用程序。

我在这里写了一个小应用程序：http: [//gold.meteor.com](http://gold.meteor.com) 它太小了，我只用了一个 html 文件和一个 template.js 文件.. :)

我希望它有点帮助

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2015-02-12T22:46:54.753

[Evented Mind](https://www.eventedmind.com/)上有一个名为“[设置 Meteor 项目](https://www.eventedmind.com/classes/setting-up-meteor-projects/introduction)”的新课程，它解决了这个问题，但也讨论了项目配置和设置开发环境。

来自课堂上的[应用程序结构](https://www.eventedmind.com/classes/setting-up-meteor-projects/application-structure)视频： Meteor 对应用程序的结构没有非常强烈的意见，但这里有一些规则：

1）加载顺序——Meteor先到文件目录最深处，按字母顺序处理文件

2) client 和 server 是 Meteor 识别的特殊文件夹

我们的结构如下所示：

```
both/
    collections/
        todos.js
    controllers/
        todos_controller.js
    views/
        todos.css
        todos.html
        todos.js
    app.js - includes routes
client/
    collections/
    views/
        app.js
server/
    collections/
    views/
        app.js
packages/
public/ 
```

todos_controller 扩展了 Iron Router 附带的 RouteController。

上面提到的`em`工具现在也得到了很大的更新，应该会更好，并且可以在：[https ://github.com/EventedMind/em](https://github.com/EventedMind/em)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-09-15T23:20:23.407

我还在寻找最佳实践，以通过精心构思的架构来增强和扩展我的应用程序。上述所有做法都适用于中小型应用程序，但当您在更大的团队中工作时会失败。我尝试了几种方法：

1）我遵循了这个策略：[https](https://github.com/aldeed/meteor-autoform) ://github.com/aldeed/meteor-autoform来扩展和重用模板。作者对组件和字段设计有很好的想法。我目前正在实施它，因为社区开发了 36 个包，几乎涵盖了所有情况，并且我可以在开发阶段使用[TypeScript](https://github.com/asm-products/linkster/blob/master/typings/meteor-collection2/meteor-collection2.d.ts)来保证类型安全。

```
<template name="autoForm">
  {{#unless afDestroyUpdateForm this.id}}
  {{! afDestroyUpdateForm is a workaround for sticky input attributes}}
  {{! See https://github.com/meteor/meteor/issues/2431 }}
  <form {{atts}}>
    {{> Template.contentBlock ..}}
  </form>
  {{/unless}}
</template> 
```

这是一篇关于如何做到这一点的好博客文章： [http](http://blog.east5th.co/2015/01/13/custom-block-helpers-and-meteor-composability/) ://blog.east5th.co/2015/01/13/custom-block-helpers-and-meteor-composability/以及这里：[http://meteorpedia .com/read/Blaze_Notes](http://meteorpedia.com/read/Blaze_Notes)

2）这个看起来很有前途，但最近没有更新。它是一个用咖啡脚本编写的包，名为。Meteor 的Blaze 组件 ( [https://github.com/peerlibrary/meteor-blaze-components](https://github.com/peerlibrary/meteor-blaze-components) ) 是一个系统，用于轻松开发需要在 Meteor 应用程序周围重用的复杂 UI 元素。你可以在 CoffeeScript、vanilla JavaScript 和 ES6 中使用它们。最好的是，组件是 OOP。这是他们的一个例子：

```
class ExampleComponent extends BlazeComponent {
  onCreated() {
    this.counter = new ReactiveVar(0);
  }

  events() {
    return [{
      'click .increment': this.onClick
    }];
  }

  onClick(event) {
    this.counter.set(this.counter.get() + 1);
  }

  customHelper() {
    if (this.counter.get() > 10) {
      return "Too many times";
    }
    else if (this.counter.get() === 10) {
      return "Just enough";
    }
    else {
      return "Click more";
    }
  }
}

ExampleComponent.register('ExampleComponent');

{{> ExampleComponent }} 
```

3) 我喜欢类型和转译器，它们告诉我什么时候什么地方会出错。我正在使用 TypeScript 与 Meteor 一起工作，并找到了以下存储库：[https](https://github.com/dataflows/meteor-typescript-utils) ://github.com/dataflows/meteor-typescript-utils似乎创建者试图完成一种 MVC 方法。

```
class MainTemplateContext extends MainTemplateData {
    @MeteorTemplate.event("click #heybutton")
    buttonClick(event: Meteor.Event, template: Blaze.Template): void {
        // ...
    }

    @MeteorTemplate.helper
    clicksCount(): number {
        // ...
    }
}

class MainTemplate extends MeteorTemplate.Base<MainTemplateData> {
    constructor() {
        super("MainTemplate", new MainTemplateContext());
    }

    rendered(): void {
        // ...
    }
}

MeteorTemplate.register(new MainTemplate());

<template name="MainTemplate">
    <p>
        <input type="text" placeholder="Say your name..." id="name">
        <input type="button" value="Hey!" id="heybutton">
    </p>
    <p>
        Clicks count: {{ clicksCount }}
    </p>

    <p>
        <ul>
            {{#each clicks }}
                <li> {{ name }} at <a href="{{pathFor 'SingleClick' clickId=_id}}">{{ time }}</a></li>
            {{/each}}
        </ul>
    </p>
</template> 
```

不幸的是，这个项目没有得到维护或积极开发。

4）我认为已经提到过，您可以使用包进行扩展。这需要一种好的抽象思维方式。它似乎适用于望远镜：[https ://github.com/TelescopeJS/Telescope](https://github.com/TelescopeJS/Telescope)

5）[meteor-template-extension——](https://github.com/aldeed/meteor-template-extension)提供多种复制模板助手、事件处理程序和模板之间的钩子的方式，允许代码重用；不利的一面是，所有的复制都必须由开发人员负责，通常是一次又一次，随着代码库的增长，这会成为问题；此外，如果没有明确定义的 API 社区，就无法构建和共享组件

6）[流组件](https://github.com/meteorhacks/flow-components)——流组件在 API 设计中更接近 React，而[Blaze 组件](https://github.com/peerlibrary/meteor-blaze-components#javascript-and-es6-support)保留了熟悉的概念，如数据上下文和模板助手；另一方面，流组件仍然使用基于模板的事件处理程序，而 Blaze 组件使它们成为类方法，因此更容易通过继承扩展或覆盖它们；一般来说，Blaze Components 似乎更面向 OOP；Flow Components 尚未正式发布（*#5 和 #6 [https://github.com/peerlibrary/meteor-blaze-components#javascript-and-es6-support](https://github.com/peerlibrary/meteor-blaze-components#javascript-and-es6-support_)*的文字学分）

2 号和 3 号也需要一些习惯，但随着时间的推移，您将获得开发速度。第四，您可以构建和测试组件以使您的代码更加稳定。第三个优势在于 Typescript 的完全类型安全性，当您在文档不佳的团队中开发时，这是一个巨大的优势。但是，我目前正在将第二个移植到 TypeScript，因为我觉得使用它很舒服，而且当我不使用 Gulp 时，我不必调整编译器包以使其与 Meteor 一起使用。

仍然很难找到使用 Meteor 的正确方法。您需要自己弄清楚，否则您最终会得到一个排列良好的文件夹结构，但您不知道所有内容都在哪里。快乐编码。

# cocoa - CAShapeLayer 禁用抗锯齿

> ID：10122978
> 
> 赞同：2
> 
> 时间：2012-04-12T11:50:18.153
> 
> 标签：cocoa, core-animation

我正在制作一个带有核心动画层的“行进蚂蚁”选择框架，就像这篇文章一样：[MARCHING ANTS WITH CORE ANIMATION](http://www.cimgf.com/2009/10/20/marching-ants-with-core-animation/)。但我唯一不喜欢的是 CAShapeLayer 中的线宽。我需要宽度正好为 1px，但由于抗锯齿，线宽约为 2 像素并且有点透明。

有没有办法关闭抗锯齿？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T13:35:26.383

我遇到了同样的问题，幸运的是，我四处闲逛了一下，发现了 CGContextSetShouldAntialias(GCContextRef, BOOL) 函数。事实证明，抗锯齿发生在图形上下文中。

我使用 CALayer 渲染到位图上下文中的一系列形状层对此进行了测试。默认情况下，我得到了我在 100-130 范围内设置的值（位图值），以及一堆较低的数字。设置 CGContextSetShouldAlias(context, NO) 后，我得到了我的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T03:20:05.907

根据文档，您似乎陷入了抗锯齿：

> CAShapeLayer 类在其坐标空间中绘制三次贝塞尔样条曲线。形状在图层的内容和它的第一个子图层之间合成。
> 
> **该形状将被绘制为抗锯齿**，并尽可能在光栅化之前将其映射到屏幕空间以保持分辨率独立性。但是，应用于图层或其祖先的某些类型的图像处理操作（例如 CoreImage 过滤器）可能会强制在局部坐标空间中进行光栅化。

# sitecore - 如何获取sitecore中的所有媒体项目？

> ID：10122979
> 
> 赞同：0
> 
> 时间：2012-04-12T11:50:23.510
> 
> 标签：sitecore, sitecore6, sitecore-media-library

我正在向 sitecore 添加一个管道。我要做的是获取所有媒体项目，并更改 url，因为我们会将所有媒体资产放入 CDN。而且，问题很简单，如何获取所有媒体项？有谁知道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:44:56.270

在您的自定义程序集中执行以下操作：

```
Sitecore.Data.Items.Item home = db.GetItem("/sitecore/media library");
using (new Sitecore.SecurityModel.SecurityDisabler())
    {
        alterItem(home);
    }

protected void alterItem(Sitecore.Data.Items.Item root)
{       

    foreach (Sitecore.Data.Items.Item itm in root.Children)
    {        

      //follow "absolute url" example below and edit each media item as you enumerate

      //Use recursion to loop through the entire tree under the root item
      alterItem(itm);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:39:48.960

You cannot walk the Sitecore media library tree and change URLs of items. The main reason is that a `MediaItem` (or any `Item` for that matter) doesn't have a property for `URL`. The URL that points to an item is determined by many configuration settings (the site the item is in, link prefixes, current language, 'file' extensions, etc...).

Being that there are many factors that control the actual URL of an item there are a few methods that you leverage to get the URL of an item at **render time**. The methods you should be using to get a URL to an item would be:

*   `Sitecore.Links.LinkManager.GetItemUrl()`
*   `Sitecore.Resources.Media.MediaManager.GetMediaUrl()`

You can do something that foxtrotZulu is suggesting. Essentially, add your own field to each `MediaItem` that stores the URL to the item on the CDN. You would need to either manually, or programtically, set the value of your custom URL field for each media item. Then, at **render time** you would use that field value rather than a call to the `MediaManager`.

You may also want to look at leveraging various configuration settings to control the URL returned via a call to `Sitecore.Resources.Media.MediaManager.GetMediaUrl()`

# rest - 在 REST API 中为不可编辑的登录字段返回什么状态代码

> ID：10122980
> 
> 赞同：0
> 
> 时间：2012-04-12T11:50:25.853
> 
> 标签：rest

一旦创建了用户，就不能更改他的登录名。在 UI 上，登录字段只是灰显且不可编辑。如果通过 REST API 公开相同的功能，如果有人试图编辑用户并更改他的登录名，则返回什么 HTTP 状态代码（以及什么错误消息）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:25:18.210

我会说当他们执行 PUT 更改登录时返回不允许的 405 方法。

你总是可以使用 400

您还应该详细说明他们获得 405 或 400 的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:25:24.210

对于未经授权的访问，您可以返回 HTTP 状态代码 401。您在 API 中使用什么身份验证方法（例如：基本、摘要...）？您是否让用户通过 API 注册？很多服务通过Web应用程序有一个单独的注册过程，可以控制注册过程并且不会在API中公开注册。注册后，他们将使用在注册过程中创建的凭据进行身份验证和授权以使用 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-28T23:26:30.440

这应该是一个`403 Forbidden`，理想情况下带有一个带有错误消息的结构，即`{"errorReason": "Login cannot be modified."}`。

# jquery - 从 jQuery 对象中的输入中获取检查的输入

> ID：10122987
> 
> 赞同：1
> 
> 时间：2012-04-12T11:50:50.150
> 
> 标签：jquery, html

如果我这样做：

```
var inputs = $('input[name="ch_attachments[featured][]"]'); 
```

如何找到从对象检查的输入`inputs`？

我试过了：

```
var checked_inputs = $(inputs, ":checked"); 
```

和

```
var checked_inputs = $(inputs).find(":checked"); 
```

两者都没有工作。在你回答之前我不能使用

```
var checked_inputs = $('input[name="ch_attachments[featured][]"]:checked'); 
```

由于此处理是在仅`inputs`传递的函数中完成的，因此我需要仅使用 object 找到已检查的输入`inputs`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:56:21.653

你可以用`filter`这个。

[http://jsfiddle.net/Xgv8C/2](http://jsfiddle.net/Xgv8C/2)

```
var $inputs = $('input[name="ch_attachments[featured][]"]');
$inputs = $inputs.filter(':checked');
alert($inputs.length);
​ 
```

# c# - EF，每个层次结构的表，抽象类中的属性

> ID：10122988
> 
> 赞同：0
> 
> 时间：2012-04-12T11:50:50.563
> 
> 标签：c#, entity-framework, data-annotations, table-per-hierarchy

我想知道是否可以使用基类（抽象）中定义的虚拟属性来创建与其他具体类型的链接。

例如 ：

```
public abstract class AbstractService
{
   public int Id {get;set;}

   public int? SiteId {get;set;}
   public virtual Site Site {get;set;}
}

public class StudyTeamService : AbstractService
{
   public int? RoleId {get;set;}
   public virtual Role Role {get;set;}
}

public abstract class AbstractSite
{
   public int Id {get;set;}

   public string Name {get;set;}
}

public class Site : AbstractSite
{
   public virtual ICollection<StudyTeamService> StudyTeamServices {get;set;}
} 
```

我想我必须在 ICollection 上添加一个注释，以便它知道如何正确映射，但我找不到正确的。

你们有什么想法吗？

似乎如果我在 ICollection 上设置 [InverseProperty("Site")]，它会崩溃并出现错误，表明该关系未在程序集中定义...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:29:43.427

我认为您的代码的问题在于

```
public class Site : AbstractSite
{
   public virtual ICollection<StudyTeamService> StudyTeamServices {get;set;}
} 
```

因为关系是`Site and`AbstractService `, not with`StudyTeamService` 之间的关系。

下面的代码对我有用：

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Data.Entity;
using System.Data.Entity.ModelConfiguration;

namespace StackOverflow
{

    public abstract class AbstractService
    {
        public int Id { get; set; }
        public virtual Site Site { get; set; }

        public int SiteId { get; set; }
    }

    [Table("StudyTeamServices")]
    public class StudyTeamService : AbstractService
    {
        public virtual Role Role { get; set; }
    }

    public class Role
    {
        public int Id { get; set; }
        public string Name { get; set; }
    }

    public abstract class AbstractSite
    {
        public int Id { get; set; }
        public string Name { get; set; }
    }

    public class Site : AbstractSite
    {
        public virtual ICollection<AbstractService> StudyTeamServices { get; set; }
    }

    public class Context : DbContext
    {
        static Context()
        {
            Database.SetInitializer<Context>(null);
        }

        public DbSet<AbstractService> AbstractServices { get; set; }
        public DbSet<StudyTeamService> StudyTeamServices { get; set; }
        public DbSet<Site> Sites { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            //Not EdmMetadata Table on DB
            //modelBuilder.Conventions.Remove<IncludeMetadataConvention>();

            modelBuilder.Configurations.Add(new AbstractServiceMap());
        }

    }

    public class AbstractServiceMap : EntityTypeConfiguration<AbstractService>
    {
        public AbstractServiceMap()
        {
            HasRequired(a => a.Site).WithMany(s => s.StudyTeamServices).HasForeignKey(a => a.SiteId);
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var context = new Context();
            context.Database.Delete();
            context.Database.Create();

            var studyTeamService = new StudyTeamService();
            studyTeamService.Role = new Role { Name = "role1" };
            studyTeamService.Site = new Site { Name = "Site1" };

            context.StudyTeamServices.Add(studyTeamService);
            context.SaveChanges();
            Console.WriteLine("Done");
            Console.ReadLine();
        }
    }
} 
```

# python - Django-piston 在读取时需要大量响应时间

> ID：10122992
> 
> 赞同：1
> 
> 时间：2012-04-12T11:50:56.703
> 
> 标签：python, django, python-2.7, django-piston

从 read 方法返回结果时，生成/发送响应需要大量时间（对于 6 列的 30,000 条记录，大约需要 14 秒）。

1.  这很好，通常需要这么多时间吗？

2.  如果这不正常，我该怎么做才能减少时间？我可以参考什么/在哪里？

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:06:48.640

也许您已经定义了*fields*参数来获取许多相关对象（具有外键的对象，onetoonekeys 和许多与正在获取的对象的关系）。这会减慢您的反应速度。你可以发布你的代码吗？

# javascript - Xbox 360 HTML5/Javascript 应用程序开发

> ID：10122995
> 
> 赞同：2
> 
> 时间：2012-04-12T11:51:01.297
> 
> 标签：javascript, silverlight, html, webkit, xbox360

1) 有没有办法使用 HTML5/JavaScript 为 Xbox 360 开发？它可以是完全基于浏览器的、服务器托管的应用程序，也可以是基于 HTML5/JavaScript 代码的原生 C#/C++ Silverlight 包装器（如 iPhone 上的 UiWebView 或 Android/Google TV 上的 WebView）。我对这个平台没有经验，所以请接受我对可能显而易见的问题的歉意。

2) 有人知道 Xbox HTML/JavaScript/CSS 渲染引擎有多强大吗？它是基于 Webkit 的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:09:41.590

1.  除非您可以使用我们其他人不知道的一些 NDA 开发工具，否则**我可以自信地说，没有办法使用 HTML5/Javascript/CSS 为 Xbox 360 平台进行开发。**

    如果您可以访问[专业的开发工具](http://www.xbox.com/en-GB/developers/xbox360/registereddevelopers)，也许，但这都在 NDA 之下。您需要参考[开发人员门户](https://developer.xboxlive.com/)上的文档和信息。

    [您也许可以使用XNA Framework](http://create.msdn.com/en-US/)构建某种渲染实现，但这需要做很多工作。（另见：[这个堆栈溢出答案](https://stackoverflow.com/a/2518195/1166205)）

2.  由于围绕 Xbox 360 开发的 NDA，我们根本不知道。***如果***有渲染引擎，几乎可以肯定它是基于 trident 的（而且绝对不使用 Webkit）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-12T18:41:22.017

Xbox 360 网络浏览器基于 Internet Explorer 9，包括所有相关的 CSS 动画和 ES5 JavaScript 功能，包括对视频和音频的支持。由 Microsoft 开发的令人惊叹的 HTML5 Fishbowl 演示，用于展示 GPU 加速的同步 CSS 转换、MPEG-4 视频解码和 MP3 音频播放，在 Xbox 360 上以 60fps 的速度完美运行。Xbox 360 浏览器也支持 Flash 9（与 PS3 浏览器一样），因此 WebSocket 等一些 HTML5 功能可以通过使用开源 Flash 组件进行填充。从那里，您可以使用 webpack（或类似工具）创建特定于这个老式（~2012 年）浏览器的 JavaScript 包。

在 Xbox 360 上运行的高级媒体基准测试的一些演示，所有这些都有可用的资源：

[https://www.youtube.com/watch?v=X6TPdvKermw](https://www.youtube.com/watch?v=X6TPdvKermw)

[https://testdrive-archive.azurewebsites.net/performance/fishbowl/](https://testdrive-archive.azurewebsites.net/performance/fishbowl/)

Xbox One 浏览器与 Windows 10 Creators Update 中的 Edge 15 浏览器几乎相同，甚至支持 ES7 和 Web Workers，除了：

1.  JavaScript JIT 优化被禁用，因此基于吞吐量的基准测试（如 Octane）将无法正常执行。FishGL.com 和其他更真实的基准测试仍然表现良好。

2.  与本地文件系统访问相关的输入标签被禁用。

3.  奇怪的是，在 Xbox One 版本的 Edge 上禁用了 WebRTC/ObjectRTC。

# c# - C# 日期字符串转换为不同的格式，而不先转换为日期

> ID：10122997
> 
> 赞同：0
> 
> 时间：2012-04-12T11:51:04.287
> 
> 标签：c#, .net

是否可以将日期字符串从一种格式转换为另一种格式而不实际将它们转换为日期？

我需要这样的东西：

```
string inputDateString = "01/01/2012 23:36:17.234";
string inputFormat = "dd/MM/yyyy HH:mm:ss.fff";

string ouputFormat = "yyyy/MM/dd HH:mm:ss.fff";
string outputDateString = StringDate.Convert(inputDateString,inputFormat, outputFormat); 
```

我显然可以编写一个 StringDate 类来解析格式，但这似乎是在重新发明轮子。我不能先约会的原因是我在时区/服务器时间方面遇到了很多问题，并且无法控制它将运行的环境。我只想 100% 确定日期字符串只是重新排列，而不是搞砸了！

谢谢

**编辑** 输出格式将始终相同，但输入格式可以是以下任意组合：

时间变化：HH:mm:ss.fff HH:mm:ss HH:mm

日期变化（可能更多）：dd/MM/yyyy dd/MM/yy MM/dd/yyyy MM/dd/yy yyyy/MM/dd yy/MM/dd

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T11:54:30.317

你*绝对*应该先解析它。您只需要注意*如何*解析和格式化它。仅仅因为您过去遇到过时区问题并不意味着您应该避免解析/格式化 - 这意味着您应该根据时区确定您想要做什么。*听起来*您只想将数据视为本地数据。我怀疑你会想要指定`DateTimeStyles.AssumeLocal`并使用不变的文化。

使用您期望`DateTime.ParseExact`的*确切*`ToString`格式（以及特定的文化，可能是不变的文化），然后使用输出格式和相关文化再次调用。

另请注意，您期望的格式字符串不正确 -`hh`当您的意思是 时您正在使用`HH`，我怀疑您想要`fff`而不是`mmm`. 示例代码：

```
using System;
using System.Globalization;

public class Test
{
    static void Main()
    {
        string inputDateString = "01/01/2012 23:36:17.234";
        string inputFormat = "dd/MM/yyyy HH:mm:ss.fff";        
        string outputFormat = "yyyy/MM/dd HH:mm:ss.fff";

        DateTime parsed = DateTime.ParseExact(inputDateString, inputFormat,
                                              CultureInfo.InvariantCulture,
                                              DateTimeStyles.AssumeLocal);
        string outputDateString = parsed.ToString(outputFormat, 
                                                  CultureInfo.InvariantCulture);
        Console.WriteLine(outputDateString); // Prints 2012/01/01 23:36:17.234
    }
} 
```

您可能还想查看我的[Noda Time](http://noda-time.googlecode.com)项目，它允许您`LocalDateTimePattern`为每个输入和输出创建一个，然后重复使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:56:14.127

这应该有效：

```
string inputDateString = "01/01/2012 23:36:17.234";
string inputFormat = "dd/MM/yyyy HH:mm:ss.fff";

string ouputFormat = "yyyy/MM/dd HH:mm:ss.fff";

string outputDateString = DateTime.ParseExact(inputDateString, inputFormat, System.Globalization.CultureInfo.InvariantCulture).ToString(ouputFormat); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-12T11:58:48.157

```
string s = System.Convert.ToDateTime(System.Convert.ToDateTime(inputDateString).ToString(inputFormat)).ToString(ouputFormat);
System.Console.Write(s); 
```

# iphone - 如何在 iPhone 越狱 + 代码中阻止传入的短信

> ID：10122998
> 
> 赞同：4
> 
> 时间：2012-04-12T11:51:07.317
> 
> 标签：iphone, sms, jailbreak, messages

我在问这个问题之前搜索了 SO，没有满足我需求的答案。

所以这是我的要求，

我有这段代码用于检测传入的 SMS，但它没有说明如何转储这些消息。我已成功阻止来电，但对于消息我不知道该怎么做。非常感谢这里的任何帮助。

我可以使用任何私有 API。

```
if ([notifyname isEqualToString:@"kCTSMSMessageReceivedNotification"])
{
    if ([[(NSDictionary *)userInfo allKeys]
         containsObject:@"kCTSMSMessage"]) // SMS Message
    {
        CTSMSMessage *message = (CTSMSMessage *)
        [(NSDictionary *)userInfo objectForKey:@"kCTSMSMessage"];
        NSString *address = CTSMSMessageCopyAddress(NULL, message);
        NSString *text = CTSMSMessageCopyText(NULL, message);
        //NSArray *lines = [text componentsSeparatedByString:@"\n"];
        printf(" %s %s\n", [address UTF8String],[text UTF8String]);
        //printf(" %s\n", [text cString]);
        fflush(stdout);

    }
}
else if ([notifyname isEqualToString:@"kCTMessageReceivedNotification"])//received SMS
{
    /*
     kCTMessageIdKey = "-2147483636″;
     kCTMessageTypeKey = 1;
     */

    NSDictionary *info = (NSDictionary *)userInfo;
    CFNumberRef msgID = (CFNumberRef)[info objectForKey:@"kCTMessageIdKey"];
    int result;
    CFNumberGetValue((CFNumberRef)msgID, kCFNumberSInt32Type, &result); 
    /*
     Class CTMessageCenter = NSClassFromString(@"CTMessageCenter");
     id mc = [CTMessageCenter sharedMessageCenter];
     id incMsg = [mc incomingMessageWithId: result];

     int msgType = (int)[incMsg messageType];

     if (msgType == 1) //experimentally detected number
     {
     id phonenumber = [incMsg sender];

     NSString *senderNumber = (NSString *)[phonenumber canonicalFormat];
     id incMsgPart = [[incMsg items] objectAtIndex:0];
     NSData *smsData = [incMsgPart data];
     NSString *smsText = [[NSString alloc] initWithData:smsData encoding:NSUTF8StringEncoding];
     }
     */
} 
```

谢谢纳文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:46:59.390

你的问题不够清楚。您是否希望将它们完全删除，以便它们甚至不会出现在消息应用程序（和数据库）中，或者您只是希望 SpringBoard 不通知用户传入消息？

对于第一个，您必须挂钩实际发送您在代码片段中收听的通知的过程。我很确定您将不得不修补 imagent (/System/Library/PrivateFrameworks/IMCore.framework/imagent.app/imagent)。

对于第二个，您必须在 SpringBoard 中玩耍。由于 iOS 5.0 BulletinBoard 正在处理向用户发送的通知，因此您可以在那里阻止它。（您可能想查看 SMSBBPlugin，它是一个 BulletinBoard 插件）。

或者只是启动您选择的反汇编程序，看看像 bitSMS 这样的调整是如何做到的；）

请记住，越狱调整开发有时需要大量的逆转和修补，大多数人会将他们的大部分发现留给自己。