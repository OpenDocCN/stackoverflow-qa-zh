# StackOverflow 问答 10988000-10988999

# c# - 在所选数据源上找不到名为“PageID”的字段或属性 - ALIAS

> ID：10988004
> 
> 赞同：0
> 
> 时间：2012-06-11T21:48:34.537
> 
> 标签：c#, sql, eval, alias

我在gridview中的行

```
<asp:Label ID="Label2" runat="server" Text='<%# new System.Text.StringBuilder("<a href=\"/Administration/Pages/EditPage/?pageID=").Append(Eval("PageID")).Append("\">").Append(Eval("Name")).Append("</a>").ToString() %>'></asp:Label> 
```

失败了

> 异常详细信息：System.Web.HttpException：DataBinding：“System.Data.DataRowView”不包含名为“PageID”的属性。

我怀疑问题是数据源中的别名

```
SelectCommand="SELECT Menus.ID, Menus.ParentID, Menus.Name, Menus.Slug, Menus.PageTitle, Menus.PageSubTitle, Menus.MenuOrder, Menus.IsHomePage, Menus.IsYourAccountLink, Menus.IsMiniMenu, Menus.IsFooterMenu, Menus.IsHeaderMenu, Menus.CustomerID, Customers.SubDomain, PublicPages.ID AS PageID FROM Menus INNER JOIN Customers ON Menus.CustomerID = Customers.ID INNER JOIN PublicPages ON Menus.ID = PublicPages.HeaderMenuID AND Customers.ID = PublicPages.CustomerID WHERE (Menus.CustomerID = @CustomerFilter)" 
```

那么如何将其用作别名：

```
Append(Eval("PageID")) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:09:05.547

试试这个，

```
<%# Container.DataItem.GetColumn("PageId")%> 
```

UPDATE1：第二种选择

```
<%#DataBinder.Eval(Container.DataItem.GetColumn("PageId"))%> 
```

# c# - 即使 ServerCertificateValidationCallback 返回 true，也会出现“无法为具有权限的 SSL/TLS 建立安全通道”

> ID：10988005
> 
> 赞同：2
> 
> 时间：2012-06-11T21:48:35.677
> 
> 标签：c#, wcf, windows-7, ssl-certificate, ssl

我正在与一个使用传输安全性和证书身份验证设置 WCF 服务 (WebHttpBinding) 的供应商合作。我为正常工作的供应商提供了一个类似的服务，所以我对它应该如何工作有一个基本的了解。

在 Windows 7 上运行，当我在自己的帐户下使用该服务时，一切正常，并且我得到了回复。当我在测试帐户下使用它时，我在 mscorlib 中得到一个异常，它“无法为具有 XXXX 权限的 SSL/TLS 建立安全通道”。如果我将测试帐户添加到内置管理员组，它工作正常。

服务器的证书是自签名的，主题字段设置为 CN=XXXX，我在 Personal 存储中拥有服务器证书，在 Trusted Root Certificate Authorities 存储中拥有 CA 证书。

此外，如果我尝试将 System.Net.ServicePointManager.ServerCertificateValidationCallback 设置为打印诊断并返回 true，我会得到一些有趣的行为。在我的账号下运行，回调调用了两次，然后WCF调用成功。在测试账户下运行，调用一次，返回，然后我得到上面的异常。

我最好的猜测是，这与测试帐户缺乏的某些特权有关，但我不明白 Windows 是如何处理证书的，无法确定地知道，而且我不知道从哪里开始寻找。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T07:19:19.647

这是问题的根源：...我在 Personal 存储中拥有服务器证书，在 Trusted Root Certificate Authorities 存储中拥有 CA 证书。

如果您在测试帐户的个人商店下安装服务器证书，它应该可以解决它，我认为 cmd 提示符的命令应该类似于

winhttpcertcfg.exe -g -c LOCALMACHINE\MY -s "certtype" "testuseraccountname"

或使用 mmc 管理单元。（我不太确定这有多可靠，我使用上述工具）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T19:22:05.460

与微软工程师通了几个小时的电话，但问题解决了。由于这与您在某些服务器证书问题中看到的错误消息完全相同，因此我认为这一定是问题所在。事实证明，测试帐户无权访问客户端证书私钥。这应该可以使用 winhttpcertcfg 解决（如[winhttpcertcfg 在 Windows 7 中授予 iiS 用户访问权限](https://stackoverflow.com/questions/1678584/winhttpcertcfg-giving-access-to-iis-user-in-windows-7)）

# mercurial - 有什么方法可以拉/更新所有子存储库？

> ID：10988009
> 
> 赞同：11
> 
> 时间：2012-06-11T21:49:04.110
> 
> 标签：mercurial, subrepos, mercurial-subrepos

我正在研究为我的组织从 svn 切换到 mercurial 的可行性，但有一个问题我似乎无法找到解决方案。

有没有办法在不手动拉取和更新每一个的情况下拉取和更新一个仓库和所有子仓库？

我想改用 mercurial，但如果这不可能，那对我们来说就不行了。

编辑：天哪，我今天一定很累......关于SO的两个问题，我在问完几分钟后找到了答案......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T22:02:25.550

不知何故错过了这一点，并在提出问题后立即找到它： [https ://www.mercurial-scm.org/wiki/OnsubExtension](https://www.mercurial-scm.org/wiki/OnsubExtension)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-31T18:52:42.677

您可以定义一个简单的 shell 别名，如下所示

```
alias hgsub='find . -name ".hg" -type d | grep -v "\./\.hg" | \
xargs -n1 dirname | xargs -n1 -iREPO hg -R REPO ' 
```

然后做

```
hgsub tip
hgsub pull -u 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-12T11:28:01.830

作为替代方案，批处理脚本可能会有所帮助：

```
@echo off
for /D %%d in (*) do (
  if exist %%d\.hg (
    echo Verzeichnis %%d
    cd %%d
    hg pull -u
    echo ----------------------------------------------
    cd ..  
  )
)
pause 
```

# ios - ios - 后台线程调用属性并返回 nil

> ID：10988011
> 
> 赞同：1
> 
> 时间：2012-06-11T21:49:07.147
> 
> 标签：ios

我对IOS编程很陌生。我创建了一个类，它使用 NSURLConnection 异步下载数据。

我使用一个发送过来的委托，然后更新我的父亲类。更新父类的一部分包括调用已保存在本地属性中的 UIView。

以下是我的意思的一些代码示例：

**我的课：**

```
@synthesize myView = _myView;

-(void) loadMetaData
{
    if(self.isMetadataLoaded)
    {
        [self.myView metadataLoaded];
    }
    else {
        [_htmlLinter summarizeUrl:self.originalLink];
    }
}

-(void) urlSummarized:(NSDictionary*)data
{
    self.productTitle = [data objectForKey:@"title"];
    self.productDescription = [data objectForKey:@"description"];
    self.provider = [data objectForKey:@"provider_name"];
    self.isMetadataLoaded= true;
    [self.myView metadataLoaded];
} 
```

**htmlLinter：**

```
-(void)summarizeUrl:(NSString*)url
{
    NSURL* u = [[NSURL alloc] initWithString:request];
    ...
    ...
    ...
    //removed a lot of logic that doesn't seem to be relevant 
    //Important to notice, that this is being called on a different thread though:
    [self embedlyDidLoad:result];
}

-(void) embedlyDidLoad:(id)result
{
    NSDictionary* properties = (NSDictionary*)result;
    [_facilitator urlSummarized:properties];
} 
```

奇怪的是：当通过另一个线程访问时，myClass 不记得 self.myView 是什么。这一行是有问题的：[self.myView metadataLoaded];

它在 loadMetaData 中最初调用时返回一个有效指针，但是当我在 urlSummarized 中的另一个线程上调用它时，它为 nil。

是什么原因造成的？

# report - 删除 sqr 中的回车

> ID：10988017
> 
> 赞同：0
> 
> 时间：2012-06-11T21:50:01.437
> 
> 标签：report, sqr

我有一个文本列，可能包含也可能不包含回车符。当它们确实包含它们时，它会抛出我的报告并添加额外的一行。有没有办法删除回车并用空格替换它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:38:45.113

在 SQR 脚本中，只需修改数据库中的初始选择。我使用 str_replace() 函数从该文本字段中删除任何回车和换行符。

例如。

从表名中选择 str_replace(COMMENT_TXT, CHAR(13)+CHAR(10), "")

char(13) 和 char(10) 分别代表回车和换行。

# javascript - 数组元素作为 getElementById().checked 的参数

> ID：10988018
> 
> 赞同：0
> 
> 时间：2012-06-11T21:50:06.597
> 
> 标签：javascript, getelementbyid

我在从元素 ID 数组中引用复选框元素时遇到问题。为什么我可以使用文字和字符串 var 作为 getElementById 的参数来引用它，而不是使用数组的元素来引用它？

```
<html>
<body>

<ul id="zip_wrapper">
<li><label><input type="checkbox" id="72002" value="72002" name="zip_codes[]" checked="checked">72002</label></li>
<li><label><input type="checkbox" id="72034" value="72034" name="zip_codes[]" checked="checked">72034</label></li>
</ul>
<script>

var zips = "";
var tester = "72034";
zips = document.getElementById("zip_wrapper").innerText.split(" ");

//zips =  Array.prototype.slice.call(zips); //a la http://stackoverflow.com/questions/4287681/extremely-annoying-javascript-array-object-error

document.write("zips array, tokenized by split(\" \"): " + zips + "<br />");

document.write("document.getElementById(\"72034\").checked: " + document.getElementById("72034").checked + "<br />");
document.write("document.getElementById(tester).checked: " + document.getElementById(tester).checked + "<br />");
document.write("document.getElementById(zips[1]).checked: " + document.getElementById(zips[1]).checked + "<br />");

</script>
</body>
</html> 
```

您可以在此处查看正在运行的页面：[https ://dl.dropbox.com/u/1634015/website/checked.html](https://dl.dropbox.com/u/1634015/website/checked.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:53:27.667

当我去你的测试页面，当我做

```
zips = document.getElementById("zip_wrapper").innerText.split(" "); 
```

在控制台中，我将 zips 作为长度为 1 的元素获取，因此`zips[1]`未定义。似乎（至少在 Chrome 中）innerText 在自己的行上返回了每一个。我除以 \n 并得到：

```
["72002", "72034", ""] 
```

我认为最重要的问题不在于您使用的是数组中的元素，而是您的数组并没有像您期望的那样组成。

正如 Pointy 指出的那样，Firefox 似乎只是返回 undefined ，而我发现 Chrome 会在各自的行上返回它们（即用“\n”分隔，末尾有一个空字符串）。

您可能需要一种不同的方法来完成您要完成的工作，但原始问题的答案是，使用数组元素作为 getElementById 的参数没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:44:50.680

参数必须是字符串文字，例如

```
wanted=document.getElementById("myhtmlobject").value 
```

因此，如果您有一系列相似的对象，而不仅仅是一个，

```
myhtmlobject[1]
myhtmlobject[2]
myhtmlobject[3]
myhtmlobject[4]
etc 
```

然后像这样引用它们

```
myobj="myhtmlobject[" + j + "]"
wanted= document.getElementById(myobj).value 
```

# php - jQuery 等效于 PHP 的 strtr

> ID：10988021
> 
> 赞同：1
> 
> 时间：2012-06-11T21:50:21.343
> 
> 标签：php, javascript, jquery

PHP 的 strtr 的 jQuery 等价物是什么？

[http://php.net/manual/en/function.strtr.php](http://php.net/manual/en/function.strtr.php)

我更喜欢最简单的纯 jQuery 解决方案。

JS 也是一个不错的选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T21:53:33.217

我推荐[php.js 实现](http://phpjs.org/functions/strtr:556)。

# list - haskell 列表和功能

> ID：10988022
> 
> 赞同：3
> 
> 时间：2012-06-11T21:50:27.007
> 
> 标签：list, sorting, haskell

这是过去几天一直在疯狂的家庭作业。

我有一个列表，我正在应用一个函数 - 如果它旁边的元素小于前一个元素，则将每个元素向右推。

我的函数将列表传递一次并对列表的头部进行排序：

```
sortEm lis@(x:y:xs) = if x > y then y: sortEm (x:xs) else lis
sortEm [x] = [x]
sortEm [] = []

myList (x:y:xs) = if x > y then sortEm lis else x:myList(y:xs)
myList [] = []
myList [x] = [x] 
```

但我的问题是，一旦该排序完成它返回一个空列表或包含一个元素的列表，我将如何设计这种功能方式？

我正在考虑使用 foldl 和一些 haskell 魔法来配合它，但目前我被卡住了。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T09:07:15.787

首先，您的`sortEm`函数名称具有误导性，它不会对其参数列表进行排序，而是*将*其头部元素插入其尾部。碰巧的是，[模块](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html)`insert`中已经有一个函数将其第一个参数插入到第二个参数中，因此存在等效性[`Data.List`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html)

```
sortEm (x:xs) === Data.List.insert x xs 
```

现在，如果您将一个项目插入到一个已经排序的列表中，插入一个项目只会让您返回一个排序列表。由于空列表已排序，这`myList`就是您在 dave4420 的答案中得到的功能。那是一种[“插入”排序](http://en.wikipedia.org/wiki/Insertion_sort)，将列表的元素逐步插入到辅助列表中，最初为空。这就是你在 dave4420 答案中得到的第二个函数的作用：

```
insertionSort xs = foldr Data.List.insert [] xs 
```

这确实“应用排序”，即仅插入“每个元素”一次。对于列表`[a,b,c,...,z]`，它相当于

```
insert a (insert b (insert c (... (insert z []) ...))) 
```

您在评论中可能的意思，即“仅一次”比较（并可能交换）两个相邻元素，称为[*冒泡排序*](http://en.wikipedia.org/wiki/Bubble_sort)。当然，在一般情况下，只通过列表一次不会对其进行排序：

```
bubbleOnce xs = foldr g [] xs  where
  g x [] = [x]
  g x xs@(y:ys) | x>y       = y:x:ys  -- swap x and y in the output
                | otherwise = x:xs    -- keep x before y in the output 
```

现在，`bubbleOnce [4,2,6,1,8] ==> [1,4,2,6,8]`. 您期望的值 ,将由从左到右的相反方向`[2,4,1,6,8]`应用折叠函数产生。~~但这在 Haskell 列表中就不那么自然了：~~`g`

 ~~```
bubbleOnce' [] = []
bubbleOnce' (x:xs) = let (z,h)=foldl g (x,id) xs in (h [z])  where
  g (x,f) y | x>y       = (x, f.(y:))   -- swap x and y in the output
            | otherwise = (y, f.(x:))   -- keep x before y in the output 
```

**（编辑 :)**使用直接递归查看[jimmyt 的答案](https://stackoverflow.com/a/10997158/849891)以获得等效但简单且漂亮的版本。它也比这里的`fodlr`和`foldl`版本更懒惰（不那么严格）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T22:25:27.630

```
myList []       = []
myList (x : xs) = sortEm (x : myList xs) 
```

（未经测试）

或者就折叠而言：

```
myList = foldr cons []
  where cons x xs = sortEm (x : xs) 
```

（也未经测试）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T12:57:56.757

```
-- if..then..else version
sortEM      ::  Ord a => [a] -> [a]

sortEM (x:y:xs)     =   if x < y
                        then x : sortEM (y:xs)
                        else y : sortEM (x:xs)
sortEM b            =   b   

-- guard version
sortEM_G    ::  Ord a => [a] -> [a]

sortEM_G (x:y:xs)
     | x < y        =   x : sortEM_G (y:xs)
     | otherwise    =   y : sortEM_G (x:xs)
sortEM_G b          =   b 
```~~

# ruby-on-rails - 使用 Carrierwave 将多页 PDF 处理为 PNG

> ID：10988023
> 
> 赞同：1
> 
> 时间：2012-06-11T21:50:28.443
> 
> 标签：ruby-on-rails, upload, carrierwave, rmagick

我正在使用[Carrierwave](https://github.com/jnicklas/carrierwave)在我的 Rails 应用程序中上传 PDF 。我的目标是将 PDF 中的每个页面转换为 PNG，并确保每个 PNG 都驻留在 Carrierwave 根据我的模型等创建的上传目录中。

目前的进展是我能够上传 PDF，将其转换为 Carrierwave 创建的临时目录中的一系列 PNG，但我无法找到将这些转换后的 PNG 移动到指定上传目录的正确方法：

```
"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}" 
```

> 更新 - 在我当前的尝试和错误代码下方添加

我目前的代码如下：

```
def extract(format)
  cache_stored_file! if !cached?
  images = Magick::ImageList.new(current_path)
  images.write File.dirname( current_path ) << "/" << filename
end

def filename
  super != nil ? super.split('.').first + '.png' : super
end 
```

使用任何方法将文件移动到上传目录的所有尝试都会导致某种“没有这样的文件或目录”错误。例如使用：

```
images.each do |f|
  FileUtils.mv f.filename, File.join("#{Rails.root}/#{store_dir}", "image-0.png")
end

Errno::ENOENT (No such file or directory - 
(/Users/reggie/ExampleApp/public/uploads/tmp/20120611-2259-7520-3647/image-0.png,
 /Users/reggie/ExampleApp/public/uploads/painting/image/39/image-0.png)) 
```

欢迎任何建议来帮助我克服我遇到的这堵墙。

[就像我为什么不使用操作](https://github.com/jnicklas/carrierwave/blob/master/lib/carrierwave/processing/rmagick.rb#L278)逻辑的旁注一样，示例代码（见下文）的结果与上面相同，即在 Carrierwave 创建的临时目录中的转换文件，**但是**所有转换后的图像都保留在 .pdf 文件中扩大。

```
manipulate!(:format => :png) do |img|
  img
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:10:53.753

Well, your main problem is that your storing folder don't exist.

Carrierwave path construction is relative to "public" folder.

You should use something like this in your uploader:

```
process :generate_png

protected
def generate_png
    manipulate! do |image, index|
        image.format = 'png'
        image.write("#{Rails.root}/public/#{store_dir}/image-#{index}.png")
        ...
    end
end 
```

To remove those files use a [callback](https://github.com/jnicklas/carrierwave/wiki/How-to%3a-use-callbacks).

```
before :remove, :clear_uploader 

protected
def clear_uploader
   ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-27T18:16:27.173

如果您正确地确定文件重命名的范围，您可能能够获得正确重命名文件的操作。

这适用于我上传 SVG 但仅将缩略图重命名为 PNG。注意重命名函数是如何在缩略图生成块中作用域的

```
 version :thumb do
    def full_filename(for_file)
      super(for_file).chomp(File.extname(super(for_file))) + '.png'
    end
    process :convert => 'png'
    process resize_to_fit: [50, 50]
  end 
```

你也许可以得到你的操纵！如果您为 full_filename 函数输入类似的 def，则具有正确的文件后缀。

# c# - ASP/VB/C# .NET 动态计算和引用

> ID：10988024
> 
> 赞同：0
> 
> 时间：2012-06-11T21:50:29.830
> 
> 标签：c#, asp.net, mysql, sql-server, vb.net

我正在开发一个应用程序，其中涉及数百种不同的计算，并希望我的应用程序管理员能够通过指定公式来调整这些计算。

例如，我的数据库表包含价格和数量。“X”列之一可能包含“过去 7 天的（价格 * 数量）”。如何允许我的应用管理员将计算从“7 天”更改为“14 天”？

是否有某种方法可以在 VB.NET 中进行动态计算，或者如果需要更改，我是否必须依赖存储过程并编写一些代码来更改这些过程？在这种情况下，最佳实践是什么？

理想情况下，我想使用类似于在此处发布问题时使用的“标签”框来显示可用字段并在它们之间添加数学运算符以执行计算。它可能会增加更多复杂性，但如果不覆盖现有计算以便它可以用于构建新公式，那就太好了。

任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:58:02.960

您可以使用一个`eval`函数，例如[此处](http://tirania.org/blog/archive/2008/Sep-10.html)或[此处](http://odetocode.com/code/80.aspx)描述的函数。

确保以安全的方式实施它。出于显而易见的原因，允许用户执行任意代码可能很危险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T22:52:55.537

Windows Workflow 有一个很好的“规则”功能，它是基于 XML 的规则定义

[http://msdn.microsoft.com/en-us/library/aa480193.aspx](http://msdn.microsoft.com/en-us/library/aa480193.aspx) http://stackoverflow.com/questions/1017056/parse-and-execute-formulas-with-c-sharp

你可以利用它。或者，您可以构建自己的基于 XML 的公式引擎。类似于这个：

[http://www.codeproject.com/Articles/25578/Dynamic-Formula-Processing-Library](http://www.codeproject.com/Articles/25578/Dynamic-Formula-Processing-Library)

# python - mysql数据库中的正则表达式

> ID：10988025
> 
> 赞同：0
> 
> 时间：2012-06-11T21:50:32.613
> 
> 标签：python, mysql, regex, database, mysql-python

我在 mysql 数据库中存储了某些正则表达式。当我使用 cursor.fetchone() 访问相同的内容并在 re.match() 函数中使用正则表达式时，结果与预期不符，而如果我键入相同的正则表达式作为re.match() 函数的参数，它正在工作...谁能告诉我解决方案..紧急 plzzz..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:54:05.860

确保编译正则表达式。

```
# Assuming 'pattern' is the string returned from the database query.

prog = re.compile(pattern)
result = prog.match(string) 
```

或者

```
result = re.match(pattern, string) 
```

更多信息请访问[http://docs.python.org/library/re.html](http://docs.python.org/library/re.html)

# php - PHP：我需要像 split() 这样的东西，但是

> ID：10988029
> 
> 赞同：4
> 
> 时间：2012-06-11T21:50:45.727
> 
> 标签：php, regex

所以我实际上存储了一个 html 字段，但我想添加一些伪标签以使其更易于发布。IE 我想将标题/标题包装到这个标签中： << ... >> EG << My Header >> 然后我会枚举它们，格式化并显示下面的文本。

例如：

```
<<News>>
Breaking news on Sunday.
Have been taking hostages.
<<General Information>>
We would want to recieve our blabla.
And you want it.
<<User Suggestions>>
Yeah we want it so much... 
```

实际应该显示：

```
<H1 class="whatever" ID="Product_Header_1">News<H1>
Breaking news on Sunday.
Have been taking hostages.
<H1 class="whatever" ID="Product_Header_2">General Information</H1>
We would want to recieve our blabla.
And you want it.
<H1 class="whatever" ID="Product_Header_3">User Suggestion</H1>
Yeah we want it so much... 
```

然后应该返回一个包含实际标题及其编号的数组，这样我就可以在页面的其他地方使用它来进行引用。

所以看起来我们可以直接替换它们，但这可能会在枚举和返回值时出现问题，并且在未关闭标签的情况下可能会失败。

或者，将它们分成一个数组，然后手动进行，这似乎是一种更好的方法。

这是我到目前为止所尝试的：

```
$TEXT_A=preg_split('/<<([^>]+)>>/', $TEXT);

foreach($TEXT_A as $key => $val){
    if ($key>0) echo "<br>-!-";
    echo $val;
} 
```

其中 $TEXT 是带有伪标签的 HTML 文本。

但是问题是， split 本身并不返回正则表达式匹配，所以我对如何提取它感到困惑。也许我需要编写一些自定义函数来返回一组文本和标题，而不是常规拆分，但我不知道从哪里开始......

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:58:45.420

只需使用

```
$text_a = preg_split('/<<([^>]+)>>/', $text, -1, PREG_SPLIT_DELIM_CAPTURE); 
```

您会在`$text_a`. 假设您想忽略第一个标题之前的内容：

```
$n = count($text_a);
$head_a = array();
$body_a = array();
for ($i = 1; $i < $n; $i += 2) {
   $head_a[] = $text_a[$i];
   $body_a[] = $text_a[$i + 1]; // trim()?
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T22:05:50.730

这是一个使用`preg_replace_callback`. 它使用非贪婪捕获组与正向前瞻 ( `(?=<<|$)`) 相结合来捕获“正文”文本。积极的前瞻表示“断言存在开头分隔符`<<`或字符串结尾`$`”。

```
$count = 0;
$TEXT_A = preg_replace_callback( '/<<([^>]+)>>(.*?)(?=<<|$)/s', 
    function( $matches) use (&$count) {
        $count++;
        return '<H1 class="whatever" ID="Product_Header_' . $count . '">' . $matches[1] . '</H1>' . "\n" . trim( $matches[2]) . "\n\n"; 
}, $TEXT);
echo htmlentities( $TEXT_A); 
```

我通过 htmlentities 传递它以显示生成的 HTML，但您当然可以删除该调用以查看浏览器解释的 HTML：

```
<H1 class="whatever" ID="Product_Header_1">News</H1>
Breaking news on Sunday.
Have been taking hostages.

<H1 class="whatever" ID="Product_Header_2">General Information</H1>
We would want to recieve our blabla.
And you want it.

<H1 class="whatever" ID="Product_Header_3">User Suggestions</H1>
Yeah we want it so much... 
```

[演示](http://codepad.viper-7.com/3A9LQi)

**编辑：**

这是一个没有匿名函数的解决方案：

```
function do_replacement( $matches){
    static $count = 0;
    $count++;
    return '<H1 class="whatever" ID="Product_Header_' . $count . '">' . $matches[1] . '</H1>' . "\n" .
    trim( $matches[2]) . "\n\n";    
}

$TEXT_A = preg_replace_callback( '/<<([^>]+)>>(.*?)(?=<<|$)/s', 'do_replacement', $TEXT);
echo htmlentities( $TEXT_A); 
```

**最终编辑**

此编辑包括一个全局数组来捕获替换。

```
$custom_array = array();
function do_replacement( $matches){
    global $custom_array;
    static $count = 0;
    $count++;
    $custom_array[$count] = $matches[1];
    return '<H1 class="whatever" ID="Product_Header_' . $count . '">' . $matches[1] . '</H1>' . "\n" .
    trim( $matches[2]) . "\n\n";    
}

$TEXT_A = preg_replace_callback( '/<<([^>]+)>>(.*?)(?=<<|$)/s', 'do_replacement', $TEXT);
echo htmlentities( $TEXT_A);

var_dump( $custom_array); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T22:07:20.770

听起来您想使用标记格式而不是 HTML 来编写文档。

这是一个相当普遍的要求，人们已经为此提出了许多解决方案。如果您还想创建自己的标记格式，这很好，但如果您想节省一点时间，您可能需要考虑现有的一种。

在我的脑海中，我可以想到 BBCode、Markdown 和 Wikicode。

*   Markdown 是本网站问题/评论中使用的格式。
*   BBCode在很多论坛软件等中以各种形式使用。
*   Wikicode 是 Wikipedia 和其他 Wiki 站点使用的标记代码。

解析器可用于 PHP 中的所有这些，以及其他语言。

例如，PHP 的 PECL 库中提供了一个 BBCode 解析器——请参见此处： http: [//php.net/manual/en/book.bbcode.php](http://php.net/manual/en/book.bbcode.php)。如果您能够将 PECL 库安装到您的服务器上，您可以在您的 PHP 中获得这些 BBCode 解析函数，而无需在运行时包含任何内容。

如果你不能走 PECL 路线，其他 BBCode 解析器也存在：试试这个，例如： http: [//nbbc.sourceforge.net/](http://nbbc.sourceforge.net/)

Wiki 标记解析器：[Wikipedia 使用哪个 Wiki 标记解析器？](https://stackoverflow.com/questions/5956883/which-wiki-markup-parser-does-wikipedia-use)

降价解析器： http: [//michelf.com/projects/php-markdown/](http://michelf.com/projects/php-markdown/)

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T22:05:03.150

不是正则表达式，但是...：

```
$s = '<<News>>
Breaking news on Sunday.
Have been taking hostages.
<<General Information>>
We would want to recieve our blabla.
And you want it.
<<User Suggestions>>
Yeah we want it so much...';

$s = str_replace('>>', '<H1>', $s);
$i = 1;
while (strpos($s, '<<') !== false)
{
    $s = str_replace_one('<<', '<H1 class="whatever" ID="Product_Header_' . $i . '">', $s);
    $i++;
}

function str_replace_one($find, $replace, $subject) 
{
    return implode($replace, explode($find, $subject, 2));
}

echo $s; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T22:09:26.620

为什么不使用 preg_replace_callback 呢？

```
preg_replace_callback('/<<([^>]+)>>/', function($match) {
    static $key=0;
    $html = (($key > 0) ? '<br>-!-' : '') . '<H1 class="whatever" ID="Product_Header_'.$key.'">'.$val.'</H1>';
    $key++;
    return $html;
}); 
```

# c# - 是否强制执行 WCF 数据流限制？

> ID：10988032
> 
> 赞同：2
> 
> 时间：2012-06-11T21:50:53.600
> 
> 标签：c#, .net, wcf

我们一直在客户站点看到随机的 OutOfMemoryExceptions 和 InsufficientMemoryExceptions。我们使用 GZipMessageEncoder 来压缩消息。（我知道[IIS 7.x 压缩](https://stackoverflow.com/questions/4631627/wcf-conditional-compression/7278500#7278500)选项以及[缓冲和/或 GZipMessageEncoder 的其他问题](https://stackoverflow.com/questions/4043683/wcf-httptransport-streamed-vs-buffered-transfermode)。）

我想尝试启用 WCF 流。我们的 WCF 服务具有如下合同：

```
[OperationContract]     
DataSet GetDataSet(Guid someGUID, string someName, DataSet parameters); 
```

根据[MSDN 上的这篇文章](http://msdn.microsoft.com/en-us/library/ms731913.aspx)：

> 流式传输中发生的操作最多可以有一个输入或输出参数

显然，我们的合约违反了 WCF 流的限制。该合约有 3 个输入参数。

但是，出于好奇，我还是决定尝试启用流媒体。我编辑了 web.config 文件和 MyCSharpClient.config 文件，并将以下属性插入到绑定的传输部分：

```
<httpTransport ... transferMode="Streamed"> 
```

令我惊讶的是，一切似乎都正常工作！没有抛出异常。我可以闯入 GZipMessageEncoder 并验证是否正在调用流方法而不是缓冲区方法。

所以，我的问题是：为什么我能够在违反 WCF 输入参数限制的操作上下文上设置流传输？鉴于 MSDN 流媒体文章的措辞强硬，我认为这只是一个实现细节，我绝不能依赖这种行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T04:10:53.910

当前发生的情况如下：您在 HTTP 传输上启用了流式传输，因此传输不会缓冲任何内容 - 传输接收一个`Message`对象，并将其直接写入传输流（包装在 XML 编写器中）。但是，操作的参数在它们被序列化之前被缓冲，因此您正在“支付”您将传输模式设置为“缓冲”的内存使用量。在线上，不同之处在于来自该服务的响应，而不是 Content-Length 标头，将被分块（即，它将有一个`Transfer-Encoded: chunked`标头，并且正文将被相应地格式化。但它的工作方式就像好。

我想说 MSDN 中的文章可以选择更好的词。为了使操作能够*利用流式传输*，它需要有一个参数，通常是 type `Stream`，`Message`或者是实现的某种类型`IXmlSerializable`。但是一个简单的合同（即`[OperationContract] int Add(int x, int y)`）也可以工作。而且我想它会继续这样工作，因为对于一个单一的合同来说，具有“正常”操作和利用流式传输的操作是完全有效的，并且因为需要为每个端点设置传输模式（并且不是每个操作），它也必须适用于“简单”操作。

# java - 有没有其他方法可以获得整个屏幕的截图？（爪哇）

> ID：10988033
> 
> 赞同：-3
> 
> 时间：2012-06-11T21:50:55.367
> 
> 标签：java, awt, awtrobot

除了使用 java.awt.Robot 类的 createScreenCapture() 方法外，还有其他获取全屏截图的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T23:00:54.720

我想您也许可以调用 JNI 代码来执行此操作，或者找到/编写一个外部命令行程序来抓取屏幕截图并且可以通过`System.exec`. 但是，我认为这两个都不是一个好主意...

`Robot`班级*应该*做你想做的事。如果没有，如果你告诉我们它的实际问题是什么，你会得到更好的结果。有可能其他人遇到过它并知道解决方案。

# python - 按 3 迭代 List

> ID：10988036
> 
> 赞同：5
> 
> 时间：2012-06-11T21:51:22.350
> 
> 标签：python, list

```
a = [3,5,8,3,9,5,0,3,2,7,5,4]
for o in a[::3]:
    print o 
```

这让我得到了第一个和每 3 个项目。3,3,0,7

有没有办法我也可以检索接下来的两个项目？

```
a = [3,5,8,3,9,5,0,3,2,7,5,4]
for o in a[::3]:
  if o == 0:
    print o
    print o + 1
    print o + 2 
```

输出 0 3 2

我知道这是不正确的，但也许你可以看到我正在尝试做的事情。基本上，我有一个很长的属性列表，每个属性包含三个部分，parent_id、property_type 和 property_value，我需要从列表中检索属性的所有三个部分。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-11T21:53:37.437

您可以使用[`itertools`文档](http://docs.python.org/library/itertools.html#recipes)中的“grouper”配方执行此操作：

```
def grouper(n, iterable, fillvalue=None):
    "grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx"
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args) 
```

例子：

```
>>> a = [3, 5, 8, 3, 9, 5, 0, 3, 2, 7, 5, 4]
>>>  list(grouper(3, a))
[(3, 5, 8), (3, 9, 5), (0, 3, 2), (7, 5, 4)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T21:57:54.660

尝试这个：

```
array = [3,5,8,3,9,5,0,3,2,7,5,4]
for i in xrange(0, len(array), 3):
    a, b, c = array[i:i+3] # partition the array in groups of 3 elements
    print a, b, c 
```

它之所以有效，是因为（如问题中所述）每个属性恰好包含三个部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T00:58:08.743

如果您知道每个部分恰好包含三个部分，那么简单地说：

```
a = [3,5,8,3,9,5,0,3,2,7,5,4]

print zip(*[iter(a)] * 3) 
```

输出：

```
[(3, 5, 8), (3, 9, 5), (0, 3, 2), (7, 5, 4)] 
```

来自[这个](https://stackoverflow.com/a/2631256/355230)答案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T21:55:07.600

```
>>> a = [3,5,8,3,9,5,0,3,2,7,5,4]
>>> for pos in xrange(0, len(a), 3):
...     print a[pos:pos+3]
... 
[3, 5, 8]
[3, 9, 5]
[0, 3, 2]
[7, 5, 4]
>>> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-11T21:55:21.420

不是很pythonic，但你可以使用：

```
for i in range(0, len(a), 3):
    print a[i]
    print a[i+1]
    print a[i+2] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-11T21:55:35.747

```
x = a[::3]
y = a[1::3]
z = a[2::3]
grouped = zip(x,y,z)

for p1,p2,p3 in grouped:
    print p1 + p2 + p3 
```

# javascript - 使用 innerHTML 修改 html 元素 - 对 httprequest 的影响

> ID：10988039
> 
> 赞同：1
> 
> 时间：2012-06-11T21:51:35.313
> 
> 标签：javascript, html

如果 div 包含表单字段，那么修改 div 容器的 innerHTML 对 http 请求有效负载有什么影响？

这是第一个.html

```
<html>
<body>
        <script type="text/javascript">

        function changeDropdown(){
            document.getElementById('divId').innerHTML="";
            var options = "<select name='suffix' id='suffix'></select>";
            document.getElementById('divId').innerHTML=options;         

        }
    </script>
    <br><br>
    <p>testing http header issue</p>
    <a href="javascript:changeDropdown()">Change dropdown</a>
    <form name="test" action="second.html" method="post">
        <table align="center">
            <tr>
                <td>
                    <label for="name">Name</label>
                </td>
                <td>
                    <input type="text" name="name"/>
                </td>
            </tr>       
            <tr>
                <td>
                    <label for="suffix">Suffix</label>
                </td>
                <td>
                    <div id="divId">
                        <select name="suffix" id="suffix">
                            <option value="Mr" selected=selected>Mr</option>
                            <option value="Mrs" selected=selected>Mrs</option>
                            <option value="Ms" selected=selected>Ms</option>
                        </select>
                    </div>
                </td>
            </tr>
            <tr>
                <td colspan="2"><input type="submit" value="submit"</td>
            </tr>
        </table>
    </form>
</body> 
```

如果我在两个字段中输入一个值，然后单击提交，这就是我在 chrome 的请求字段中看到的值。（网络-> 标头）

```
**Request Payload**
      name=Batman&suffix=Mr 
```

现在再次打开 first.html。这次单击“更改下拉菜单”链接。这将删除所有选项。现在输入名称并单击提交。

这是 Chrome 标头中的值

```
 **Request Payload**
      name=Batman 
```

参数“后缀”从 http(?) 参数列表中消失了。我已经清楚地使用 innerHTML 将完整的选择元素添加回表单。但由于某种原因，它没有被认可。

有趣的是，如果我在选择字段中添加一个空选项，它就会被拾取。即将javascript函数更改为

```
 document.getElementById('divId').innerHTML="";
 var options = "<select name='suffix' id='suffix'><option value=''></option></select>";
 document.getElementById('divId').innerHTML=options; 
```

如果有人知道为什么会发生这种情况以及我可以做些什么来纠正这个问题而不必像上面那样添加一个虚拟选项，请分享。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:57:59.710

我认为这完全与这样一个事实有关，当您重新添加时，`<select>`您添加它时没有任何可能的选项，因此 chrome 忽略了该变量（因为它永远无法设置）。

`<option>`这可以通过您的空白再次产生所需结果这一事实得到证实。

# java - 如何使用 jpcap 加快数据包捕获和数据包发送

> ID：10988040
> 
> 赞同：0
> 
> 时间：2012-06-11T21:51:37.407
> 
> 标签：java, ethernet, jpcap, ti-dsp, raw-ethernet

DSP 将原始以太网数据包发送到 PC，而不是 PC 捕获这些数据包并发送 ack 响应。他们正在向 MAC 发送 MAC 消息，因此没有 IP 层。我想每 1ms 进行一次实时消息传递。DSP每1毫秒发送一次消息，但PC无法捕获消息并在1毫秒内发送回复。捕获和发送数据包需要 15 - 30 ms。这个结果对我来说太慢了。我怎样才能让它更快。我正在使用 jpcap 库和我的操作系统 Win XP x32。

捕获代码：

```
 private void captor() {
                try {
                    captor = JpcapCaptor.openDevice(cf.getDevice(), 100, true, 1);
                } catch (Exception ex) {
                    Logger.getLogger(CapturingPacket.class.getName()).log(Level.SEVERE, null, ex);
                }
            }

    private void capturing() {
            Packet packet = captor.getPacket();
            if (packet != null) {
                if (packet.data.length > 0) {
                    EthernetPacket ethernetPacket = (EthernetPacket) packet.datalink;                
                    String receivedDestMac = Common.byteToMacStringFormat(ethernetPacket.src_mac);

                    if (definedDestMac.equals(receivedDestMac)) {
                        captured(packet.data);
                    }

                }
            }

}

private class captureRunner implements Runnable {

        public void run() {
            captor();
            while (running) {
                capturing();
                try {
                    Thread.sleep(0);
                } catch (InterruptedException err) {
                }
            }
        }
    } 
```

发送代码：

```
private void send(byte[] message) {
        try {

            JpcapSender send = JpcapSender.openDevice(cf.getDevice());

            Packet packet = new Packet();
            //ethernet frame
            EthernetPacket ethernetPacket = new EthernetPacket();

            // #dst_mac
            ethernetPacket.dst_mac = getDestMac();
            // #src_mac
            ethernetPacket.src_mac = cf.getDevice().mac_address;
            // #frametype
            ethernetPacket.frametype = Common.ETHERNET_FRAME_TYPE;
            // #data
            packet.data = message;
            // datalink
            packet.datalink = ethernetPacket;
            send.sendPacket(packet);
            send.close();

        } catch (Exception ex) {
            Common.showErrorMessage("Send Error");
            Logger.getLogger(MessagingPacket.class.getName()).log(Level.SEVERE, null, ex);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:03:17.863

“捕获和发送数据包需要 15 - 30 毫秒。” - 这个是正常的。你不能让这更快。Windows 不是实时操作系统。改用微控制器（有更好的选择，如 FPGA 和 ARM，但我没有这些经验）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T00:47:14.097

使用`libpcap`可以通过 JPcap 设置的过滤器，而不是 Java 过滤器。这样甚至不会捕获不匹配的数据包，更不用说回调到 JPcap 和你的 Java 代码了。

还要使用比 100 大得多的缓冲区。

# ipad - 在 UIWebview 中 MPMoviePlayer 全屏播放期间旋转后移动 UINavigationBar

> ID：10988041
> 
> 赞同：1
> 
> 时间：2012-06-11T21:51:40.307
> 
> 标签：ipad, uiwebview, rotation, mpmovieplayer, navigationbar

我在网上搜索，但没有找到任何解决方案。

那是我的问题：

我在 UIWebView 中嵌入了 YouTube 视频。它可以工作，但是当我进入全屏播放并旋转我的 iPad 时，UINavigationBar 会移动（见下图）。我知道在网页视图中没有直接控制视频播放器，但我不知道如何解决。

谢谢

[拆分导航栏](http://i.stack.imgur.com/NcI1B.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-10T02:17:00.773

使用 MPMoviePlayerNotification 无法解决此问题，因为 UIWebView Video 不要使用 MPMoviePlayerViewController 或者它是开发人员私有的。但是，还有另一种方法可以修复此错误。

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(handleStatusBarFrameDidChange)
                                             name:UIApplicationDidChangeStatusBarFrameNotification
                                           object:nil];

- (void)handleStatusBarFrameDidChange {
    self.navigationController.navigationBarHidden = YES;
    self.navigationController.navigationBarHidden = NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T10:54:15.110

我在我的 iPhone 应用程序上遇到了类似的问题。

我想知道这是否是正确的方法，但现在下面的代码解决了它。

**1\. webivew的initialize方法中增加了观察者。**

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(youTubeStarted:) name:@"UIMoviePlayerControllerDidEnterFullscreenNotification" object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(youTubeFinished:) name:@"UIMoviePlayerControllerDidExitFullscreenNotification" object:nil]; 
```

当您不再需要观察者时，应将其删除。我只是将代码放在 webview 的 dealloc 方法中。

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

**2.电影开始时隐藏导航栏，电影结束时再次显示。**
* 代码中的 contentsViewController 是我的 webview 的所有者。所以就我而言。

```
- (void)youTubeStarted:(NSNotification *)notification
{
    self.contentsViewController.navigationController.navigationBarHidden = YES;
}

- (void)youTubeFinished:(NSNotification *)notification
{
    self.contentsViewController.navigationController.navigationBarHidden = NO;
} 
```

我从[如何从 UIWebView 嵌入式 YouTube 视频播放接收 NSNotifications 中获得了方法](https://stackoverflow.com/questions/8518719/how-to-receive-nsnotifications-from-uiwebview-embedded-youtube-video-playback)

# ios - 在 UINavigationItem 中使用 Text 或 UIImage 作为标题的性能更高

> ID：10988042
> 
> 赞同：0
> 
> 时间：2012-06-11T21:51:44.603
> 
> 标签：ios, uinavigationitem

我已经看到使用 UIImageView 使用带有文本的图像作为标题以及使用 UILabel 添加 titleView (UIView) 的代码。

UILabel 版本会比使用图像更有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:00:28.290

任何性能问题都应该是相对微不足道且不引人注意的。然而，这不仅仅是性能问题，还有许多其他考虑因素，例如图像缩放、图像的内存占用、本地化（图像无法翻译）、不必要的代码（添加 5-10 行代码来使用图像），快速可编辑性（图像必须在 Photoshop 中编辑，而文本可以在 Xcode 中随时更改）。如果可能，坚持使用文字。但是，如果您有非常强烈的品牌要求（例如耐克标志），请使用图像。

# wpf - 在 MouseUp WPF 上选择 ListBoxItem

> ID：10988058
> 
> 赞同：2
> 
> 时间：2012-06-11T21:54:09.930
> 
> 标签：wpf, listbox, mouse

我有一个多选的 ListBox。我正在其中进行拖放操作。我使用 Ctrl+A 选择所有项目。但是，一旦我单击一个项目开始拖动，项目就会被取消选择。有没有办法在鼠标上选择/取消选择列表框项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T02:10:57.923

ListBoxItem 覆盖其**OnMouseLeftButtonDown**并调用包含 ListBox 的处理选择的方法。因此，如果您想将鼠标放在选定的列表框项目上并启动拖动，则需要在 ListBoxItem 上发生这种情况之前开始拖动。因此，您可以尝试处理 ListBox 上的**PreviewMouseLeftButtonDown**并检查 e.OriginalSource。如果那是 ListBoxItem 或列表框项中的元素（您需要沿着可视树向上走），那么您可以启动拖动操作。例如

```
private void OnPreviewLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    var source = e.OriginalSource as DependencyObject;

    while (source is ContentElement)
        source = LogicalTreeHelper.GetParent(source);

    while (source != null && !(source is ListBoxItem))
        source = VisualTreeHelper.GetParent(source);

    var lbi = source as ListBoxItem;

    if (lbi != null && lbi.IsSelected)
    {
        var lb = ItemsControl.ItemsControlFromItemContainer(lbi);
        e.Handled = true;
        DragDrop.DoDragDrop(....);
    }

} 
```

# ios - iOS - 旋转 UINavigationController 的顶部和底部栏，但保持所有推送的视图不变

> ID：10988062
> 
> 赞同：0
> 
> 时间：2012-06-11T21:54:31.310
> 
> 标签：ios, uinavigationcontroller, autorotate

我想在方向改变时自动旋转导航视图控制器的顶部和底部栏，但保持其他所有内容不变。如 - 所有推送到导航控制器的视图都不会移动一点，但导航控制器的顶部和底部栏显示在新方向的顶部和底部。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:39:29.327

请参考这篇文章的答案以获取有关仅旋转部分视图的信息：

[iOS：禁用子视图的自动旋转](https://stackoverflow.com/questions/7353789/ios-disable-autorotation-for-a-subview)

您应该能够将顶部和底部栏放在旋转视图控制器中，并将其他视图分成非旋转视图。

希望有帮助！

# php - 多个 DIV 悬停在点击问题上

> ID：10988065
> 
> 赞同：0
> 
> 时间：2012-06-11T21:54:44.937
> 
> 标签：php, javascript, jquery, html

我有多个 DIV，每个 DIV 都包含一个活动传单。悬停后，我想显示事件名称和详细信息，并能够单击事件列表。这适用于第一个列出的事件，但不适用于以下事件。我有以下 Javascript 代码和 DIV 结构，如下所述。该页面位于[http://midnightguru.com/events_concept.php](http://midnightguru.com/events_concept.php)以供参考。

```
<script type="text/javascript">
   $(document).ready(function() {
    $("#event_main").mouseenter(function() {
         $("#event_hover").show();
        }).mouseleave(function() {
         $("#event_hover").hide();
        });
   });
</script>
<div id="event_main"></div><div id="event_hover"></div> 
```

任何帮助表示赞赏！我已经努力搜索，无法弄清楚这一点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:03:03.290

出色地，

首先，必须使用 ID 属性来标识对象的单个实例。

因此，改为为 div 元素使用一个类并执行以下操作：

```
$('.event_main').mouseenter(function(){
        $(this).find('.event_hover').show();
    }).mouseleave(function(){
        $(this).find('.event_hover').hide();
    });
});

<div class='event_main'>
    ... 
    <div class="event_hover" style="display: none;">
        ...
    </div>
</div> 
```

编辑：另外，将该脚本放在 $(document).ready 上只对所有页面进行一次，好吗？

升

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T22:02:13.587

它正在处理匹配的第一个项目，因为 jQuery 选择器

> $('#event_main')

实际上只匹配您的第一个事件 div，即使它们的 id 都是`event_main`.

# 选择器将仅匹配单个元素：http: [//api.jquery.com/id-selector/](http://api.jquery.com/id-selector/)

您将需要使用其他一些 jQuery 选择器来匹配元素，因为所有这些 div 的 id 都是 event_main。（也许您的意图是`event_main`用作 div 的类，然后`.event_main`用作选择器？）

# ruby-on-rails - rails - 如何检查用户是否已成为会员一个月

> ID：10988071
> 
> 赞同：0
> 
> 时间：2012-06-11T21:55:09.307
> 
> 标签：ruby-on-rails, datetime

我想知道如何检查用户是否已成为会员超过 1 个月？我注意到 rails 创建了一个 created_at 列。我如何检查用户是否是一个月大的会员？

谢谢

我看着像 1.month.ago 这样的事情，但那不会从当前日期开始改变吗？也许我的逻辑有点错误。我可以做类似的事情吗...

```
user.created_at - 1.month.ago > 0 
```

我不能做这个减法比较吗？或者这没有意义吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T22:04:08.250

`user.created_at < 1.month.ago`应该没事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T22:01:16.887

怎么样

```
(user.created_at + 1.month).past? 
```

或者

```
user.created_at <= 1.month.ago 
```

# javascript - 使用 ajax 更新容器

> ID：10988074
> 
> 赞同：0
> 
> 时间：2012-06-11T21:55:14.077
> 
> 标签：javascript, asp.net, ajax

我有一个 asp.net 网络表单，其中有一个名为“内容”的 div 元素和一个文本框。div 加载了一些 html，我已将其检索到代码隐藏文件中的字符串中。在这个 html 中，我需要能够标记各种文本位，以便当用户单击它们时，它会向服务器发送一条消息，然后用其他一些填充文本框（在同一表单上）数据。

我遇到的问题是如何最好地与服务器通信 - 所以在下面的代码中，

1) 行 alert("You clicked " + x); be, 以便它使用 ajax 回调服务器，发送参数 'hello'

2) 将在服务器上调用什么方法？会再次是 Page_Load 吗？

3）调用服务器后，我需要什么代码来填充文本框而不再次发送回整个页面（即仍然使用ajax）？问题不是在服务器上检索文本，假设我在服务器上收到“hello”作为参数，并想再次使用 ajax 将“再见”发送回文本框

所以我的源aspx文件中有这个......

在form_load的代码隐藏文件中，我有..

```
System.IO.StreamReader rdr = System.IO.File.OpenText("c:\\myHtmlFile.html");
string s = rdr.ReadToEnd();
this.contents.InnerHtml = s; 
```

我加载到 div 元素中的 HTML 是这样的

```
 <script type="text/javascript">
         function myfunction(x)
     { 
  alert("You clicked " + x);
         }
 </script>

 <p  onclick="myfunction('hello')">hello</p> 
```

当用户单击“你好”时，我希望 TextBox1 说“再见”。同样，服务器必须在这里处理事情，但无需重新发布网页。

有人有想法么？请越简单越好！提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:17:57.730

检查 Microsoft 实现此接口的文档：

[ICallbackEventHandler](http://msdn.microsoft.com/en-us/library/ms178208.aspx)

希望这有帮助。

# installation - Windows Installer - .NET（程序集文件）不会触发修复 删 除密钥文件

> ID：10988076
> 
> 赞同：0
> 
> 时间：2012-06-11T21:55:16.897
> 
> 标签：installation, windows-installer, installshield

我创建了一个 Windows Installer MSI 程序包，它使用它们的库 (dll) 安装程序集二进制文件 (exe)，每个程序集都有自己的密钥文件。当我删除程序集二进制文件或资源文件时，它不会触发修复？每次都修复带有 Win32 二进制文件和资源文件的相同安装程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T01:26:21.867

修复和弹性的含义略有不同。调用修复（如通过添加/删除程序）并触发弹性。

弹性的常见触发器是广告快捷方式和 COM 激活。当弹性被触发时，它将调用损坏组件所属的整个主要功能的修复。

由于您的 .NET，您不太可能使用 COM。使用 EXE 的广告快捷方式并将所有组件放在同一功能中。如果这不起作用，还可以通过代码中的互操作库调用 MSI API 来执行您自己的自定义运行状况检查并调用修复。

# python - Python dict 中的文字句点

> ID：10988078
> 
> 赞同：0
> 
> 时间：2012-06-11T21:55:21.983
> 
> 标签：python

我正在使用这段代码：

```
import urllib2

submit = urllib.urlencode(dict(sign.username='example')) 
```

但我得到这个错误：

`SyntaxError: keyword can't be an expression`

`sign.username`是我正在编码的 URL 中的一个参数，但是 Python 不允许我使用它，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T21:56:31.653

要解决您的问题，请`{}`在键和值周围使用带有大括号和单引号的字典（dict）文字：

```
import urllib2
submit = urllib.urlencode({'sign.username':'example'}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T21:56:42.570

使用 dict 文字格式——无论如何你都应该这样做。

```
urllib.urlencode({'sign.username': 'example'}) 
```

# ruby-on-rails - 渲染和链接到“has_many, :through”关联

> ID：10988081
> 
> 赞同：1
> 
> 时间：2012-06-11T21:55:36.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3, web-applications, partial-views

我正在编写一个 Rails 应用程序，它有一个名为“用户”的模型和一个名为“页面”的模型。用户可以有多个页面，用户也可以授权其他用户查看他们的页面。为了在 Rails 中描述这一点，我使用了 has_many, :through 与我创建的第三个模型“授权”的关系。模型看起来像这样：

```
class User
  has_many :pages, dependent: :destroy
  has_many :authorizations, dependent: :destroy
  has_many :viewable_pages, :through => :authorizations, :source => 'page'
end

class Page
  belongs_to :user

  has_many :authorizations, dependent: :destroy
  has_many :authorized_viewers, :through => :authorizations, :source => 'user'
end

class Authorization
  belongs_to :page
  belongs_to :user
end 
```

就后端功能而言，这对我来说非常有效。在呈现这些关系并允许客户修改它们时，我有点难过。

我有一个页面控制器，当调用“显示”时，我渲染页面。当我呈现页面时，我还想呈现页面的authorized_viewers 列表并允许用户使用AJAX 命令修改该列表。本质上，我想在“页面”布局中做这样的事情：

```
<% @authorized_viewers.each do |v| %>
  <li><%= v.email %><%= link_to 'delete', authorization, method: :delete, remote: :true %></li>
<% end %> 
```

我不太确定如何引用授权本身，而不是authorized_viewer。我只想删除关系，而不是用户。我也不确定是否应该为“授权”创建一个控制器，以便创建像“销毁”这样的方法，我可以对其进行修改并赋予它们响应 AJAX 调用的能力。授权只会在“页面”视图上呈现，因此生成带有授权视图的整个脚手架似乎没有意义。解决这个问题的最佳方法是什么？

我意识到这是一个很长的问题。任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:03:47.997

在视图中显示授权的一种更简单的方法是（假设您为页面/授权关系使用嵌套路由，否则修改路径参数）：

```
<% @authorizations.each do |authorization| %>
  <li><%= authorization.user.email %><%= link_to 'delete', page_authorization_path(@page, authorization), method: :delete, remote: :true % </li>
<% end %> 
```

如果您要直接针对该对象执行操作（例如创建/销毁），最好为授权创建一个控制器。如果总是通过 AJAX 完成，则不必创建任何视图。这使您的所有功能都井井有条，并确保任何与授权相关的交互都驻留在授权控制器中。避免创建脚手架，而只需使用两个操作创建控制器：`create`和`destroy`

# python - 使用 numpy 进行多元多项式回归

> ID：10988082
> 
> 赞同：26
> 
> 时间：2012-06-11T21:55:36.777
> 
> 标签：python, numpy, statistics, regression

我有许多样本`(y_i, (a_i, b_i, c_i))`被假定为在 一定程度上`y`作为多项式变化。`a,b,c`例如，对于给定的一组数据和 2 级，我可能会生成模型

`y = a^2 + 2ab - 3cb + c^2 +.5ac`

这可以使用最小二乘来完成，并且是 numpy 的 polyfit 例程的轻微扩展。Python 生态系统中的某个地方是否有标准实现？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-07-17T02:23:38.123

sklearn 提供了一种简单的方法来做到这一点。

[以此处](https://stackoverflow.com/questions/20463226/how-to-do-gaussian-polynomial-regression-with-scikit-learn)发布的示例为基础：

```
#X is the independent variable (bivariate in this case)
X = array([[0.44, 0.68], [0.99, 0.23]])

#vector is the dependent data
vector = [109.85, 155.72]

#predict is an independent variable for which we'd like to predict the value
predict= [0.49, 0.18]

#generate a model of polynomial features
poly = PolynomialFeatures(degree=2)

#transform the x data for proper fitting (for single variable type it returns,[1,x,x**2])
X_ = poly.fit_transform(X)

#transform the prediction to fit the model type
predict_ = poly.fit_transform(predict)

#here we can remove polynomial orders we don't want
#for instance I'm removing the `x` component
X_ = np.delete(X_,(1),axis=1)
predict_ = np.delete(predict_,(1),axis=1)

#generate the regression object
clf = linear_model.LinearRegression()
#preform the actual regression
clf.fit(X_, vector)

print("X_ = ",X_)
print("predict_ = ",predict_)
print("Prediction = ",clf.predict(predict_)) 
```

这是输出：

```
>>> X_ =  [[ 0.44    0.68    0.1936  0.2992  0.4624]
>>>  [ 0.99    0.23    0.9801  0.2277  0.0529]]
>>> predict_ =  [[ 0.49    0.18    0.2401  0.0882  0.0324]]
>>> Prediction =  [ 126.84247142] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-30T15:09:22.587

sklearn 有一个很好的例子，[在这里](http://scikit-learn.org/0.17/auto_examples/model_selection/plot_underfitting_overfitting.html)使用他们的管道。这是他们示例的核心：

```
polynomial_features = PolynomialFeatures(degree=degrees[i],
                                         include_bias=False)
linear_regression = LinearRegression()
pipeline = Pipeline([("polynomial_features", polynomial_features),
                     ("linear_regression", linear_regression)])
pipeline.fit(X[:, np.newaxis], y) 
```

您不需要自己转换数据 - 只需将其传递到管道中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T22:17:39.743

polyfit 确实有效，但有更好的最小二乘极小化器。我会推荐 kmpfit，可在

[http://www.astro.rug.nl/software/kapteyn-beta/kmpfittutorial.html](http://www.astro.rug.nl/software/kapteyn-beta/kmpfittutorial.html)

它比 polyfit 更健壮，并且在他们的页面上有一个示例，展示了如何进行简单的线性拟合，它应该提供进行二阶多项式拟合的基础知识。

```
 def model(p, v, x, w):       
   a,b,c,d,e,f,g,h,i,j,k = p      #coefficients to the polynomials      
   return  a*v**2 + b*x**2 + c*w**2 + d*v*x + e*v*w + f*x*w + g*v + h*x + i*y + k  

def residuals(p, data):        # Function needed by fit routine
   v, x, w, z = data            # The values for v, x, w and the measured hypersurface z
   a,b,c,d,e,f,g,h,i,j,k = p   #coefficients to the polynomials  
   return (z-model(p,v,x,w))   # Returns an array of residuals. 
                               #This should (z-model(p,v,x,w))/err if 
                               # there are error bars on the measured z values

#initial guess at parameters. Avoid using 0.0 as initial guess
par0 = [1.0, 1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0] 

#create a fitting object. data should be in the form 
#that the functions above are looking for, i.e. a Nx4 
#list of lists/tuples like (v,x,w,z) 
fitobj = kmpfit.Fitter(residuals=residuals, data=data)

# call the fitter 
fitobj.fit(params0=par0) 
```

 `这些东西的成功与否密切依赖于适合的起始值，因此请尽可能谨慎选择。有这么多的自由参数，获得解决方案可能是一个挑战。`

# solr - solr 嵌套多值字段

> ID：10988087
> 
> 赞同：1
> 
> 时间：2012-06-11T21:56:07.997
> 
> 标签：solr, indexing, field, multivalue

我想在 Solr 搜索结果中生成以下结果，但不确定是否可以这样做？（使用 Solr 3.6）

```
<doc>
   <arr name="groups">
      <lst>
         <str name="firstName">John</str>
         <str name="lastName">Darby</str>
      </lst>
      <lst>
         <str name="firstName">Sue</str>
         <str name="lastName">Berger</str>
      </lst>
   </arr>
</doc> 
```

但是，我似乎无法在我的结果中获得像 structre 这样的 Tree。充其量我可以得到一些看起来像下面这样甚至不接近的东西：

```
<doc>
   <arr name="groups">
      <str>John</str>
      <str>Darby</str>
      <str>Sue</str>
      <str>Berger</str>
   </arr>
</doc> 
```

这里有两个问题。首先，我似乎无法按照上面的示例将这些人“分组”成一个有意义的标签结构。其次，我不能在我的生活中让标签在数组中显示属性名称，如“lastName”或“firstName”？

在我的项目中，我使用 DIH 提取这些数据，从上面的示例中可以看出这是组和用户之间的一对多关系。

我真的很感激有人有一些建议或替代想法。

# c# - 在 GridViewRow 中检索其值在 JQuery 中设置的控件的当前值

> ID：10988088
> 
> 赞同：0
> 
> 时间：2012-06-11T21:56:12.487
> 
> 标签：c#, asp.net

在 GridView 中，我有几个 TemplateFields。这些字段中的控件设置为 runat="server"，因此我可以从代码隐藏中访问它们。但是，在使用 JQuery 填写信息的过程中，其中一些字段值可能会动态变化。在我尝试处理每一行的数据时提交表单后，使用 JQuery 在客户端编辑的任何字段返回的值仍然反映数据绑定期间分配的原始值。例如，如果在 GridView 数据绑定时字段“小时”为空白，但使用 JQuery 我将值更改为 350，那么当我这样做时在后面的代码中

```
string Hours = ((HtmlInputText)row.FindControl("Hours")).Value; 
```

它仍然返回空白而不是 350 分配的客户端。如何访问该字段的当前值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:35:11.813

这个问题的简单答案是服务器控件保存它们在发布到服务器之前分配的最新值。`350`如果这是设置的最后一件事， 您应该从该控件中获得。

您可以尝试实例化一个实际`HtmlInputText`对象并在调试模式下查看它，以查看您是否成功检索了要查找的对象。

```
HtmlInputText hit = (HtmlInputText)row.FindControl("Hours"); 
```

在 GridView 模板中，asp.net 可能已对其进行了修改`id`：
1）您确定它的值已在 jQuery 中成功设置。
2）您确定您已成功检索代码隐藏中的对象吗？

# video-streaming - RTSP 流式传输到 Web 应用程序（使用 VLC 2.0）

> ID：10988089
> 
> 赞同：4
> 
> 时间：2012-06-11T21:56:13.987
> 
> 标签：video-streaming, rtsp, vlc, transcoding

我正在开发一个需要显示远程桌面的流式视频的网络应用程序。我们已经使用 ffmpeg/ffserver 和 flowplayer 实现了这一点，将 RTSP 转码为 .flv 格式，但它非常脆弱，我的研究导致我使用 VLC 的命令行版本。

我的问题是：有没有办法将转码的 RTSP（如 OGG、RTP 或其他格式）通过管道传输到浏览器中，同时避免依赖闪存？

我知道该标签已经有一段时间不支持流式视频了，但是我很难找到一致的文档。有人说您可以直接通过管道传输 RTP，有人说您将永远无法通过标签进行流式传输。

另外，我目前正在我的本地 Apache 服务器上测试所有这些。

我假设转码看起来类似于：

*   vlc -vvv rtsp://xx.xx.xx.xx:554/vga.sdp --no-sout-audio --sout '#standard{access=http,mux=ogg,dst=http://localhost/ test_ogg.php}'

或者

*   vlc -vvv rtsp://xx.xx.xx.xx:554/vga.sdp --no-sout-audio --sout '#transcode{vcodec=mp4v,acodec=mpga,vb=400}:duplicate{dst =display,dst=rtp{mux=ts,dst=xxx.xxx.xx.xx,port=xxxx}}'

谢谢 - 梅森

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T19:35:53.403

好的，所以我正在寻找的解决方案以 CVLC 2.0.1 [Console-only VLC] 的形式出现，但也利用了 ffmpeg 的多路复用功能。

这个单行代码将 RTSP 流转码为 FLV，并将其推送到我的 localhost 服务器的指定端口。

```
cvlc rtsp://xxx.xxx.xxx.xxx:554/vga.sdp :sout='#transcode{vcodec=FLV1,vb=2048,fps=25,scale=1,acodec=none,deinterlace}:http{mime=video/x-flv,mux=ffmpeg{mux=flv},dst=127.0.0.1:8090/device_1.flv}' :no-sout-standard-sap :ttl=5 :sout-keep :no-audio --video --no-sout-audio 
```

这样做的好处包括每次流更改分辨率、比特率、帧速率等时不必编辑 ffserver.conf 文件。 - 只需重新启动这一行，以便它可以重新捕获流。此外，如果流具有正确的规范，则不需要`vb=`and`fps=`属性；如果我需要为了网页而限制流，我只会使用它们。

`--network-caching`是我正在考虑的另一个功能，虽然在某些情况下非常有用，但在我的情况下是不必要的。

Flowplayer 代码如下所示：

```
<div style="width:1280px;height:720px;margin:10px" id="player_1"></div><script language="javascript">
flowplayer("player_1", {src: "/js/flowplayer-3.2.7.swf", wmode:"transparent"},{
clip: {
  url: 'http://127.0.0.1:8090/device_1.flv',
  autoPlay: true,
  autoBuffering: true,
  live: true,
  bufferLength:0
}, 
plugins: { 
   controls: { 
      all: false,
      scrubber: true,
      play: true, 
      fullscreen: true, 
      time: false,
      width: '100%',
      opacity: 0.8,
      tooltips: {
        buttons: true,
        fullscreen: 'Enter fullscreen mode'
    }
   }
} 
}); 
```

希望这可以帮助任何遇到类似问题的观众！

石匠

# javascript - Javascript - 更快：线性列表搜索或获取对象值？

> ID：10988095
> 
> 赞同：-6
> 
> 时间：2012-06-11T21:57:08.283
> 
> 标签：javascript, jquery, performance, node.js

考虑

```
a = ['1','2','3','4','5']
for(var i = 0; i < a.length; i++) { if (a[i] == 3) console.log('found it!') } 
```

和

```
a = {'1': true, '2': true, '3': true, '4': true}
a['3'] 
```

哪个会更快，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T22:12:47.707

在尝试查找随机元素时，对象查找平均会快得多，尤其是在您搜索大量项目时。这是因为这样做的底层算法是[B 树搜索](http://en.wikipedia.org/wiki/B-tree)，其时间复杂度为 O(log n)，并允许它快速查找项目成员资格，而无需针对对象中的每个元素进行检查。

这与在数组中搜索时相反，您必须在确定是否不在具有 O(n) 线性时间复杂度的数组之前检查每个元素。

这是显示对象查找速度更快的基准：http: [//jsperf.com/array-vs-objv2/6](http://jsperf.com/array-vs-objv2/6)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T22:04:01.613

[在比较它们在 jsPerf http://jsperf.com/array-vs-objv2](http://jsperf.com/array-vs-objv2)中的性能之前，我修改了如下代码以使这两个代码等效

**测试1：**

**测试设置：**

```
var a = [];
var b = {};

for (var i = 1; i <= 100000; i++) {
   a.push(i);
   b[''+i] = true;
} 
```

**使用数组：**

```
for(var i = 0; i < a.length; i++) { 
  if (a[i] === 99999) {
     console.log(true);
     return;
  }
} 
```

**使用对象：（**更快）

```
console.log(b['99999']); 
```

**测试 2：**

**使用数组：（**更快）

```
a = ['1','2','3','4','5']
for(var i = 0; i < a.length; i++) { 
  if (a[i] === 3) {
     console.log(true);
     return;
  }
} 
```

**使用对象：**

```
a = {'1': true, '2': true, '3': true, '4': true, '5': true};
console.log(a['3']); 
```

**结果：（**正如特雷弗指出的那样）数组搜索对于较少的项目会更快，但是在查找更大的列表时..由于线性搜索，数组会更慢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T22:16:19.820

在不了解 JavaScript 的所有黑魔法工作原理的情况下，我可以说类似的东西`a['3']`不使用线性搜索。

JavaScript 是否直接引用了该元素，因此它甚至不需要进行搜索？也许。如果确实如此，它会使用它来`a['3']`比线性搜索更快地找到，即使它可能会花费更多的内存。（我认为这就是它的实际作用。）

如果没有，它实际上会搜索您的数据结构，几乎可以肯定它不使用简单的线性搜索。可能有一些内部工作，或者某种二叉树搜索或其他一些混乱。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T22:12:02.207

关联数组将执行得更快，它只需要一个逻辑操作。尽管要实现这一点，它需要更多地存储在内存中以将键与值链接起来。这大致相当于哈希表与数组参数。

缺点，较慢的插入和较高的内存使用。查找的速度取决于引擎。

[https://developers.google.com/v8/design](https://developers.google.com/v8/design)

设置和搜索的完整分析：http: [//jsperf.com/array-vs-objv2/5](http://jsperf.com/array-vs-objv2/5)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-11T22:13:39.437

看看这个[基准图](http://oreilly.com/server-administration/excerpts/even-faster-websites/writing-efficient-javascript.html#data_access_time_across_browsers)

对象属性和数组项的访问时间接近

在您的第一种情况下，有 3 次访问数组项

在第二种情况下，只有一次访问对象属性

所以我认为第二个应该更快

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T22:01:09.527

```
a = {'1': true, '2': true, '3': true, '4': true}
if (a['3'] === true) {
  console.log("found it");
} 
```

在大多数情况下会更快，然后

```
a = ['1','2','3','4','5']
for(var i = 0; i < a.length; i++) { 
  if (a[i] == 3) {
    console.log('found it!')
  }
} 
```

因为第二个可能需要遍历数组的所有值。

# api - Foursquare 场地类别 api 更新

> ID：10988101
> 
> 赞同：5
> 
> 时间：2012-06-11T21:57:38.117
> 
> 标签：api, foursquare

看起来场地类别的 API 响应最近发生了变化：[https ://developer.foursquare.com/docs/explore#req=venues/categories](https://developer.foursquare.com/docs/explore#req=venues/categories)

“icon”字段现在只返回“prefix”和“suffix”，而不是“prefix”、“sizes”和“name”。要加载类别图标，您必须连接前缀 + "bg_32" + 后缀，将 32 替换为您想要的任何大小：32、44、64、88、256。

# amazon-s3 - 将 0 字节文件上传到 Amazon S3

> ID：10988102
> 
> 赞同：0
> 
> 时间：2012-06-11T21:57:39.037
> 
> 标签：amazon-s3, boto

是否可以将 0 字节文件上传到 Amazon S3？我的标准反应是不允许，但我有一个网站希望允许用户上传空白的 .txt 文件，这些文件恰好是 0 字节。

亚马逊返回格式错误的 XML 响应：

```
<Error>
<Code>MalformedXML</Code>
<Message>The XML you provided was not well-formed or did not validate against our published schema</Message>
<RequestId>234...</RequestId>
<HostId>2309fsdijflsd...w32r09s</HostId>
</Error> 
```

我正在使用 boto==2.3.0 和 Flask==0.8

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T22:04:58.157

是的，这是可能的。

```
>>> import boto
>>> c = boto.connect_s3()
>>> b = c.lookup('mybucket')
>>> k = b.new_key('empty')
>>> k.set_contents_from_string('')
>>> for k in b:
       print k.name, k.size
...
empty 0
...
>>> 
```

至少这对我有用。您收到的错误表明出现了其他问题。

# javac - GroovyWS Web 服务使用者客户端不能与 JDK 1.7 一起运行

> ID：10988104
> 
> 赞同：2
> 
> 时间：2012-06-11T21:57:55.180
> 
> 标签：javac, gradle, java-7, groovyws

已经搜索过这个网站和其他网站，但找不到答案。

我有一个基于示例代码的简单 GroovyWS Web 服务使用者

[http://groovy.codehaus.org/Consuming+a+web+service](http://groovy.codehaus.org/Consuming+a+web+service)

我正在使用 Gradle 进行构建，并将 groovyws 0.5.2 作为依赖项

现在，当我在安装了 Java JDK 1.6 的 Windows 7 机器上运行示例时，示例代码可以正常工作。

但是，当我在安装了 Java JDK 1.7 的笔记本电脑上运行**完全相同的**测试代码（从 gi​​thub 克隆）时，我在控制台上收到以下错误

```
javac: target release 1.5 conflicts with default source release 1.7
Jun 11, 2012 10:27:28 PM org.apache.cxf.endpoint.dynamic.DynamicClientFactory createClient
SEVERE: Could not compile java files for http://www.webservicex.net/uklocation.asmx?WSDL 
```

我在我的 Gradle build.gradle 文件中尝试了以下设置

```
sourceCompatibility = 1.7
targetCompatibility = 1.7 
```

但没有快乐:(

所以我不确定在哪里更改 GroovyWS 的 javac 编译设置？

# java - Jython，TypeError：“列表”对象不可调用

> ID：10988105
> 
> 赞同：0
> 
> 时间：2012-06-11T21:57:55.360
> 
> 标签：java, eclipse, module, jython

在我的例子中，我试图在 Jython 上导入一个 Java 类。在我的项目中，我使用带有模型驱动开发插件的 Eclipse IDE。我正在尝试在 Eclipse 中导入该类，但我得到了相同的后续错误，但我将我的 java 项目设置为 Pydev 项目并创建一个拥有 .class 文件的 bin 文件夹，我认为这是正确的做法. 因此，我开始尝试在终端使用交互式 Jython 手动导入它，但我得到了相同的跟随错误，顺便说一下，我正在使用这个资源：

```
import sys
sys.path.append('/home/hudson/eclipse-projects/new/New/bin.jar') 
```

有趣的是，当我尝试使用来自不同项目的另一个 .class 文件时，我可以轻松搞定。

错误：

```
>>> sys.path.append(' /home/hudson/eclipse-projects/new/New/bin/org/yakindu/sct/runtime/java/newtest/newtest.jar')
>>> import NewTestCycleBasedStatemachine
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named NewTestCycleBasedStatemachine 
```

我一直在尝试从不同的目录导入 .jar，只是为了测试，但仍然无法得到它。首先，我需要 Eclipse 的解决方案，因为它是我需要的插件的必需品。

那么，它可能是什么？

* * *

在我将我的 Java 项目设置为 PyDev 项目后，具体步骤是什么？我需要预编译我的项目，将我的项目压缩为 .jar 并添加此文件夹？

我试过这样导入

> > > 从 NewTest 导入 CycleWindow

得到这个：

> > > *sys-package-mgr* : 处理修改后的 jar, '/home/hudson/eclipse-projects/new/New.jar' *sys-package-mgr* : 跳过坏 jar, '/home/hudson/eclipse-projects/new/New. jar' Traceback（最近一次调用最后）：文件“/home/hudson/eclipse-projects/new/Test/src/MainClass.py”，第 1 行，来自 NewTest 导入 CycleWindow ImportError：没有名为 NewTest 的模块

* * *

我已经尝试过导入修改 pythonpath 等。例如，我可以在我的 Jython 类中导入一个 SWT 类，但不能导入我的项目。我对两者都做同样的事情：

> > > /home/hudson/Downloads/swt.3.7.2-gtk-linux-x86(1)/swt.jar
> > > 
> > > /home/hudson/eclipse-projects/new/New/bin.jar

我正在用头撞墙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:58:08.883

您应该能够配置项目（右键单击项目 > 属性 > PyDev PYTHONPATH）以添加所需的 jars/文件夹，而不是手动向 sys.path 添加东西。

见： http: [//pydev.org/manual_101_project_conf2.html](http://pydev.org/manual_101_project_conf2.html)

如果这不能解决问题，请添加更多关于如何设置 PyDev 配置、如何构建 Java 类以及如何安装 Java 构建路径的信息（这些截图非常感谢）。

# c# - 不要在“使用”语句之后处置财产

> ID：10988107
> 
> 赞同：4
> 
> 时间：2012-06-11T21:58:00.670
> 
> 标签：c#, .net, entity-framework, entity-framework-4.1, dispose

我有实体框架 4.1 的小问题。

有图像DTO接口：

```
public interface IImage : IDtoBase
{
    string FullFilePath { get; set; }
    int Width { get; set; }
    int Heigth { get; set; }
    long ImageTypeId { get; set; }
    IImageType Type { get; set; }
} 
```

有配置上下文的代码：

```
// where TContext : DbContext, new()
private TInterface Invoke(Func<TContext, TInterface> callback)
{
    using (var context = new TContext())
    {
        context.Configuration.AutoDetectChangesEnabled = true;
        context.Configuration.LazyLoadingEnabled = true;
        context.Configuration.ProxyCreationEnabled = true;
        context.Configuration.ValidateOnSaveEnabled = true;

        context.Database.Connection.Open();

        return callback.Invoke(context);
    }
} 
```

有代码可以获取所需的 DTO 项目：

```
public TInterface Get(long id)
{
    return Invoke(
        context =>
        {
            TDto dto = context.Set<TDto>().FirstOrDefault(x => (x.Id == id));
            return dto.Convert<TDto, TInterface>();
        }
    );
} 
```

如果我设置`context.Configuration.LazyLoadingEnabled = false`，则图像 DTO 的“类型”属性为空（我认为，没关系）。

如果`context.Configuration.LazyLoadingEnabled`具有“true”值，则图像 DTO 的“Type”属性在“using”语句中具有正确的值，但该属性在处置上下文后处置 - “ObjectContext 实例已处置，不能再用于操作需要连接。”

即图像 DTO 存在/未处置，但其“类型”属性已处置。

任何人都可以提供任何解决方案 - 不要处置“类型”属性（我想使用“使用”语句而不是“处置”模式）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T00:05:50.407

首先，您需要了解延迟加载的工作原理。EF 通过创建从您的实体类继承的代理并覆盖导航属性访问行为来做到这一点。当您第一次访问导航属性时，如果在代理类有逻辑通过**context**加载它之前没有加载它。因此代理实例保持对上下文的引用。

当执行离开您的`Invoke`方法时，上下文将被释放。因此代理不能延迟加载导航属性。你可以做几件事来解决这个问题。

*   急切加载导航属性

使用`Include`急切加载的方法

```
public TInterface Get(long id)
{
    return Invoke(
        context =>
        {
            TDto dto = context.Set<TDto>().Include(t => t.Type)
                  .FirstOrDefault(x => (x.Id == id));

            return dto.Convert<TDto, TInterface>();
        }
    );
} 
```

*   控制上下文的生命周期 如果不立即在`Invoke`方法内释放上下文，您可以使用现有的上下文实例，该实例将在您完成数据访问后释放。这可以通过 IoC/DI 框架来完成。对于 Web 项目，生命周期通常仅限于单个请求。

# php - 如何在不包含发送 http 标头的文件的情况下使用 WordPress $wpdb？

> ID：10988111
> 
> 赞同：-1
> 
> 时间：2012-06-11T21:58:17.917
> 
> 标签：php, http-headers, phpexcel, wordpress

> **可能重复：**
> [包含没有标题的 wp-blog-header.php 以便我可以使用 phpexcel？](https://stackoverflow.com/questions/10969916/include-wp-blog-header-php-without-headers-so-i-can-use-phpexcel)

我正在尝试使用`$wpdb`results 输出带有 excel 文件`Phpexcel`，但是您可能会猜到标题战争正在肆虐。是否可以在`$wpdb`不包含已经设置标题的文件的情况下使用？如何？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:39:43.427

我通常使用它不发送标题：

```
require_once '/path/to/wordpress/wp-load.php'; 
```

有效且不输出错误的示例：

```
<?php

error_reporting(E_ALL);
ini_set('display_errors', 1);

echo "Hello<br />";

require_once '/PATH/TO/wp-load.php';

echo "After require...<br />";

var_dump($wpdb); 
```

# scala - 让 sbt-assembly 工作

> ID：10988112
> 
> 赞同：13
> 
> 时间：2012-06-11T21:58:28.620
> 
> 标签：scala, jar, sbt, typesafe-stack, sbt-assembly

到目前为止，我一直在用 SBT（通过 Typesafe 堆栈）编译我的 Scala 项目。我现在想通过[sbt-assembly](https://github.com/sbt/sbt-assembly)在多台机器上运行代码。按照指示，我所做的唯一一项更改是在我的`project/Build.scala`文件中。以下是相关部分：

```
resolvers += "Typesafe Releases" at "http://repo.typesafe.com/typesafe/releases",
resolvers += "artifactory" at "http://scalasbt.artifactoryonline.com/scalasbt/sbt-plugin-releases",
libraryDependencies += "com.eed3si9n" % "sbt-assembly" % "0.8.3" 
```

但是，当我运行`sbt compile`时，出现此错误：

`sbt.ResolveException: unresolved dependency: com.eed3si9n#sbt-assembly/scala_2.9.1/sbt_0.11.2;0.8.3: not found`.

我究竟做错了什么？

谢谢！

*编辑*在与(folder is )`build.sbt`相同的文件夹中 创建了一个文件，并在其中包含以下两行：`Build.scala``/project/`

```
Seq[Setting[_]](resolvers += "artifactory" at "http://scalasbt.artifactoryonline.com/scalasbt/sbt-plugin-releases",
                addSbtPlugin("com.eed3si9n" % "sbt-assembly" % "0.8.3")) 
```

现在错误是：

```
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: com.eed3si9n#sbt-assembly;0.8.3: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn] 
[warn]  Note: Some unresolved dependencies have extra attributes.  Check that these dependencies exist with the requested attributes.
[warn]      com.eed3si9n:sbt-assembly:0.8.3 (sbtVersion=0.11.2, scalaVersion=2.9.1)
[warn] 
[error] {file:/Users/myname/current/projectname/project/}default-d7da9a/*:update: sbt.ResolveException: unresolved dependency: com.eed3si9n#sbt-assembly;0.8.3: not found 
```

*编辑 2* 嗯，在我成功之后`sbt compile`，我应该能够进入`sbt`控制台并输入`assembly`吗？

```
> assembly
[error] Not a valid command: assembly
[error] Not a valid project ID: assembly
[error] Not a valid configuration: assembly
[error] Not a valid key: assembly
[error] assembly
[error] 
```

*编辑 3* JK 明白了。必须添加`build.sbt`GitHub README 中指定的信息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T22:19:04.063

这里有两点。一是 SBT 插件*不仅仅是*库依赖项——特别是，它们使用当前 SBT 版本的方式与其他 Scala 库使用 Scala 版本的方式类似。另一个是影响*项目*`libraryDependencies`的`project/Build.scala`依赖关系，而不是*构建*。

 **SBT 完整构建本身就是一个 SBT 项目，仅位于目录树的下一层，因此可以像正常构建一样配置自己的构建。与正常构建不同，在少数情况下需要进行“完整构建”，几乎没有理由使用完整构建进行构建，因此使用`.sbt`位于其中的文件`project/`几乎总是足够的。

另一个问题是版本控制。SBT 有一个名为的实用函数`addSbtPlugin`，可以为您处理所有事情。它需要一个 moduleID 并添加所有必要的 SBT 和 Scala 版本信息。

因此，要让 sbt-assembly 在完整构建中工作，您在（通常是or ）下创建一个`.sbt`文件，并将构建的解析器和依赖项放在那里：`project/``project/build.sbt``project/plugins.sbt`

```
resolvers += Resolver.url("artifactory", url("http://scalasbt.artifactoryonline.com/scalasbt/sbt-plugin-releases"))(Resolver.ivyStylePatterns)

addSbtPlugin("com.eed3si9n" % "sbt-assembly" % "0.8.3") 
```**

# django - Django AUTH_PROFILE_MODULE 导入不正确

> ID：10988114
> 
> 赞同：2
> 
> 时间：2012-06-11T21:58:44.440
> 
> 标签：django, upgrade

我有两个 Django 应用程序，一个（运行 1.4）具有以下设置：

```
INSTALLED_APPS = ('appname.account',)
AUTH_PROFILE_MODULE = 'appname.account.UserProfile' 
```

这工作得很好。但是，我有另一个应用程序，我正在移植到 1.4，我已将其设置为相同（嗯，相似，它们有不同`appname`的 s），但由于陷入`ValueError`auth contrib 包中而无法工作。我不确定从哪里开始寻找正确更改此设置的位置，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T00:02:51.927

进入 Python Django Shell，导入您的设置并验证您确实需要 appname 前缀来加载 Account 模型。

# grammar - 在 srgs 语法中结合自由形式的听写和语义

> ID：10988117
> 
> 赞同：0
> 
> 时间：2012-06-11T21:58:56.967
> 
> 标签：grammar, speech-recognition, context-free-grammar, sapi

我正在尝试将语义和听写请求的结果结合到 SRGS 文档的语义值中。例如，我会说“搜索土豆”，输出类似于 out="Search Potato"，其中 Potato 是用户说出的随机单词。我坚持使用垃圾特殊规则，但它似乎不起作用。到目前为止，这就是我所拥有的：

```
<rule id="rule1" scope="public">
<one-of>
  <item xml:lang="en-us">Search</item>
  <item>Cherche</item>
</one-of>
<tag>out.command="Search"</tag>
<tag>out.param1=<ruleref special="GARBAGE"/></tag>
<tag>out=out.command+out.param1;</tag> 
```

我还看到了那个帖子：[Free-form text with custom SRGS based Grammer](https://stackoverflow.com/questions/8006238/free-form-text-with-custom-srgs-based-grammer)，其中有人提出了 DICTATION 标签。但问题是它似乎与 SRGS 不兼容。

如果有帮助，我使用 tag-format="semantics/1.0"

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-19T21:23:26.867

这个我也找了高低，终于找到了答案。我使用了以下代码并将其加载到 System.Speech.Recognition.Grammar 中，并且效果很好。

```
<ruleref uri="grammar:dictation" type="application/srgs+xml"/> 
```

只需将此 ruleref 作为项目添加到您想要获取口述文本的任何位置。您可以在 ruleref 之后直接使用 this 将口述文本提取到语义/标签中：

```
<tag>out.SpokenText=rules.latest();</tag> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:02:16.770

如果您查看 W3C 论文“ [Extending SRGS to Support More Powerful and Expressive Grammars](http://www.w3.org/2010/02/convapps/Papers/Dahl.txt) ”，您会发现该标准组只看到了您提到的场景的需求（参见示例 1.a），但目前在SRGS 标准。您的问题是如何使用 SRGS 执行此操作，但可能有一些方法可以在 SRGS 之外实现相同的结果，具体取决于所使用的 ASR 平台。

# javascript - 属性值的正则表达式

> ID：10988121
> 
> 赞同：1
> 
> 时间：2012-06-11T21:59:34.437
> 
> 标签：javascript, jquery, regex

我有一个可以接受不同格式作为值的属性：

```
format1 - 2 values separated by space
ex1: left center
ex2: center bottom

format2 - 2 values separated by space, each one can have 1 or 2 values separated by "-" 
ex1: left-right center
ex2: center top-bottom

format3 - 2 values separated by "-"
ex1: left-diag
ex2: right-diag 
```

现在我正在拆分字符串并使用一系列 if 块来确定格式和值。

在这种情况下是否可以使用正则表达式来确定格式并检索每种格式的值？

（JavaScript 代码）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:08:23.443

如果您需要使用单个正则表达式，应该这样做：

```
/^((?=\S*\s)[\w-]+|\w+)[\s-](\S.*)/ 
```

基于这样的逻辑，如果有空格，则为分隔符，否则`-`为分隔符。第一组将所有内容与分隔符匹配，第二组将其余部分匹配。

[示例用法](http://jsfiddle.net/EykVr/)：

```
function split(str){
  var m = str.match(/^((?=\S*\s)[\w-]+|\w+)[\s-](\S.*)/);
  m.shift();
  return m;
}

alert(split("foo bar"));
alert(split("foo-bar baz"));
alert(split("baz foo-bar"));
alert(split("baz-foo"));​ 
```

* * *

另一方面，您不必使用如此复杂的表达式。像这样简单的事情：

```
function split(str){
  var arr = str.split(' ');
  if(arr.length == 2) return arr;
  return str.split('-');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T22:02:42.737

您可以使用以下内容：

```
var regex = /^(\w+)$/g;
var data;
if(regex.test(data)) {
    var matches = data.match(regex);
    for(var match in matches) {
        console.log(matches[match]);
    } 
} else {
    console.log("No matches found!");
} 
```

# matlab - 简化for循环（matlab）

> ID：10988122
> 
> 赞同：3
> 
> 时间：2012-06-11T21:59:34.210
> 
> 标签：matlab, loops, for-loop, vectorization

我正在开发一个程序来计算飞机在目标区域上空飞行时可以看到什么。当它越过该区域时，它可以跟随许多轨道之一，正常区域大小约为 100。我创建了一个大循环来查看飞机是否可以看到该区域的某些部分，但它的运行效率非常低。我已将该区域定义为 1001x1001 的网格

xgrid 定义 x 值的变量 1001x1。

thelines 是一个变量 2 x 1001 x 轨道，其中第一行是顶行对应 x 值处的 y 值。第二行是底线的 y 值。

这两条线之间是可见区域。如果可以看到，则将 seenarea(1001x1001) 上的点标记为 1。如果不是，则将其标记为 0。

```
for M=1:tracks
    for f=1:1001
        for i=1:1001
            if xgrid(f,1)>thelines(i,1,M) && xgrid(f,1)<thelines(i,2,M);
                seenarea(f,i,M)=1; % This indicated the area has been seen
            else
                seenarea(f,i,M)=0; % This is not seen
            end
        end
    end
    fullbestinfo(1,M)={seenarea(:,:,M)}; % This stores the seen area in another cell
    if max(seenarea(:,:,M)) < 1 % No area seen, stop
        seenarea(:,:,M)=[];
        break
    end
end 
```

我已经使用 matlab 分析器在我的程序的瓶颈处确定了这一点。任何帮助将非常感激。谢谢，丰富

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T22:34:18.107

我不能完全说出你想要做什么，但我建议作为第一步用逻辑索引替换内部循环。

```
seenarea = false(1001, 1001, tracks); #% preallocate matrix to 'false'
xgrid = repmat(1:1001, 1001, 1); #%same size as the first 2D of seenarea

for M=1:tracks
    border1 = thelines(:,ones(1,1001),M); #% same size as xgrid
    border2 = thelines(:,ones(1,1001)*2,M); #% same size as xgrid
    idx = xgrid > border1 & xgrid < border2; #% idx is a "logical index" 
             #%           ^--- single ampersand
    seenarea(idx,M)=true; 
end 
```

使用逻辑索引，您可以用单个操作替换嵌套循环的数百万次迭代。

这是另一个提示：使用逻辑矩阵而不是双矩阵来存储真/假值。

```
>>m1 = zeros(1001,1001,100);
>> m2 = false(1001,1001,100);
>> whos m1
  Name         Size                      Bytes  Class     Attributes

  m1        1001x1001x100            801600800  double              

>> whos m2
  Name         Size                      Bytes  Class      Attributes

  m2        1001x1001x100            100200100  logical 
```

如您所见，逻辑矩阵的内存使用量降低了 8 倍。

**速度测试：**我很好奇这会有多大的不同。下面是一个快速测试（好吧，只对其中一种实现快速）。对内部循环进行矢量化使我的机器**速度提高了大约 75 倍**，将 10 个轨道的时间从 7 秒以上减少到大约 0.1 秒。

```
tic;
for rep=1:100
    for M=1:tracks
        for f=1:1001
            for i=1:1001
                if xgrid(f,1)>thelines(i,1,M) && xgrid(f,1)<thelines(i,2,M);
                    seenarea(f,i,M)=1; 
                else
                    seenarea(f,i,M)=0; 
                end
            end
        end
    end
end
disp(toc/100)
    7.3459

tic;
for rep=1:100
    for M=1:tracks
        border1 = thelines(:,ones(1,1001),M); 
        border2 = thelines(:,ones(1,1001)*2,M); 
        idx = xgrid > border1 & xgrid < border2;                     
        seenarea(idx,M)=true; 
    end
end
disp(toc/100)
    0.0964

>> 7.3459/.0964    
ans =    
   76.2023 
```

# php - yii 中的 utf8 字符和 htmlspecialchars 出错

> ID：10988123
> 
> 赞同：5
> 
> 时间：2012-06-11T21:59:35.700
> 
> 标签：php, html, utf-8, character-encoding, yii

我在 yii 中的 char 编码有问题。如果我创建一个新的 webapp：

```
 ./Yii-framework/framework/yiic webapp MyTest 
```

然后转到 /protected/views/layouts/main.php 并将页脚更改为带有 utf8 字符的文本，例如

```
<div id="footer">
        Cópyrîgth <br />
</div> 
```

刷新页面，一切正常。好的！;)

然后我尝试使用用户名中的 utf8 字符登录，例如**áadmin**，它崩溃说：

```
Error 500

htmlspecialchars(): Invalid multibyte sequence in argument 
```

所以我检查了这篇关于[yii 中的 unicode 的文章](http://www.yiiframework.com/wiki/16/how-to-set-up-unicode/)

然后我去了**/protected/config/main.php**并在开始时添加了这一行：

```
header('Content-Type: text/html; charset=utf-8'); 
```

再次重试相同的登录它可以工作（不会崩溃）但现在页脚已损坏并显示：

```
C�pyr�ght 
```

我已经尝试过其他组合，如“yii 中的 Unicode”文章中解释的那样，但它们都不能同时工作。

解决这个问题的任何想法？

注意：我无法更改为 php.ini 文件。

我还尝试了.htaccess 文件中的**AddDefaultCharset UTF-8**选项，并将其放在 /MyTest/ 的文件夹中，文章中提到的正确文件夹是：您的**DocumentRoot**吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T22:12:04.383

我对 yii 一点也不熟悉，但是，如果您想将文字 unicode 字符粘贴到文件中，您需要确保您的文本编辑器使用 unicode 编码（例如 utf8）保存文件。试试 utf8，没有 BOM。

我的经验是，当您更改编码设置并且其中已经存在编码字符时，文本编辑器的行为会很奇怪。只需从一个新文件重新开始，更改编码，然后将字符粘贴进去。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T22:27:33.053

首先，您需要了解带有 ó 或 î 之类的变音符号（来自您的示例）的字符不会自动成为“utf-8 字符”。它只是一个在不同字符集中具有不同编码（如果有）的字符，即使在那些具有共同基本单字节 ASCII 部分的字符集中（即英文字母、数字、最常见的标点符号和还有几个）。您可以将其称为“有问题的字符”，但不能称为“utf-8 字符”。

所以，当你写你的 footer 时`<div>`，你并没有把它写成 UTF-8 编码。您的编辑器将这些字符保存在单字节编码中，例如[ISO 8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)或其亲属之一。

如果未指定，浏览器通常会自动检测页面中使用的编码。这就是为什么您最初能够在浏览器中准确地看到您在编辑器中编写的内容。

然后您尝试使用用户名中的“有问题的字符”登录。浏览器将您的页面解释为具有单字节编码，因此这导致它以相同的方式对您的表单输入进行编码，并将其以单字节编码发送回服务器。显然，编写 PHP 代码时没有考虑到这种可能性，因为它没有正确设置 的第三个参数[`htmlspecialchars()`](http://www.php.net/manual/en/function.htmlspecialchars.php)，这是`"UTF-8"`默认情况下的（从 PHP 5.4.0 开始 -`"ISO-8859-1"`之前是这样）。由于带有“有问题的字符”的单字节编码字符串几乎从来都不是有效的 UTF-8 字符串（请参阅我对您的问题的评论，这是第二条评论），htmlspecialchars() 拒绝了它。

然后您正确添加了`header('Content-Type: text/html; charset=utf-8');`，它禁用了浏览器的自动字符集检测。在这一点上，很明显您的带有页脚的文件`<div>`不是 UTF-8 编码的（再次查看我的评论以解释出现的问号而不是“有问题的字符”）。

因此，您剩下要做的就是说服您的编辑器保存 UTF-8 编码的文件。正如其他人所指出的，以不同的编码保存文件并不适用于所有编辑器。从新文件开始有时是解决方案，可能是在将编辑器的默认编码设置为 UTF-8 之后。

要检查编码，您可以`file`在 shell 中使用该命令。它的输出应该类似于

```
main.php: PHP script, UTF-8 Unicode text 
```

或者，您可以使用该`od -tx1z`命令将您的文件（可能`| less`）转储为十六进制字节序列，旁边带有相应的字符串。如果文件是单字节编码的，那么您的“有问题的字符”将是单字节 >= 0x80。如果是 UTF-8 编码，它们将是 2 个字节的序列（其他将是 3 个或更多字节），全部 >= 0x80，而“非问题字符”将继续是单个字节 <0x80。

您提到的文章似乎写得很好，请按照它。

但是，如果您的所有页面都是使用 HTTP 标头生成的，则不需要文件`AddDefaultCharset`中的指令，因为 Apache 指令的效果完全相同（并且最好在 PHP 中保持对编码的控制）。`.htaccess``Content-Type: text/html; charset=utf-8`

对于浏览器，添加`<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>`与上面的 HTTP 标头具有相同的效果（注意 http- **equiv**）。HTTP 标头更清晰，但是这个额外的元标记可能有助于在没有标头信息的情况下保存页面。

最重要的是，不要害怕[UTF-8](http://en.wikipedia.org/wiki/UTF-8)，因为它是你的朋友！

（......但是，从得到你赏金的答案中，我看到你和许多人一样，继续认为理解字符编码对你来说太难了☹）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T13:15:22.433

首先，您应该删除 main.php 文件中的标头调用，它可能会在将来给您带来问题。

其次，我会按照 rambo coder 的建议进行操作，并确保您的文件在编辑器中保存为 UTF8。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T20:31:18.060

上述解决方案似乎是正确的方法，因为 Yii 对 unicode 并没有真正的问题，但您也可以执行一些额外的检查，例如您的 Html 页面中元标记中的字符集设置为 utf-8，而不是编写普通的 html可以使用 Chtml::encode(Copyright) 以便 yii 处理编码。对于用户名部分，请确保数据库中的默认字符集也设置为 utf8。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T16:31:05.383

对于`htmlspecialchars`问题检查这个答案：[https ://stackoverflow.com/a/3803972/133408](https://stackoverflow.com/a/3803972/133408)

您必须将编码指定为的第三个参数`htmlspecialchars`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T05:58:04.993

解决此问题的最佳方法是使用[http://www.utexas.edu/learn/html/spchar.html](http://www.utexas.edu/learn/html/spchar.html) - 在您的情况下，Cópyrîght 将显示为`C&#243;pyr&#238;ght`

此外，我将添加 HTML`<meta charset="utf-8">`以确保浏览器能够正常运行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-07T09:28:54.703

我也遇到了这个问题——特别是当我试图从 db 中显示 utf 文本时。我将 mysql 中的所有排序和类型更改为 utf8-bin - 但仍然没有爱...然后我尝试使用元标记等更改我所有的布局和视图...地狱，我什至查看了日本网站的源代码并将这些东西粘贴到... 没有工作 _ ... 直到... 我遇到了这篇文章：[Yii And UTF8 Display, UTF8 works with mysqli but not yii backend](https://stackoverflow.com/questions/11806382/yii-and-utf8-display-utf8-works-with-mysqli-but-not-yii-backend/11808727#11808727) 事实证明，你需要在我的 main 中设置一个设置。 php 在配置文件中，在 components.. f 下

# xamarin.android - TeeChart for Android DateTime FormatException

> ID：10988125
> 
> 赞同：0
> 
> 时间：2012-06-11T21:59:53.547
> 
> 标签：xamarin.android, teechart

我一直在为 Mono/Android 评估 TeeChart，但每次我尝试运行示例项目时，我的模拟器都会抛出异常：

```
System.FormatException: String was not recognized as a valid DateTime.
 at System.DateTime.Parse  (string,System.IFormatProvider,System.Globalization.DateTimeStyles) [0x00027] in /Users  /builder/data/lanes/monodroid-mac-4.2-series/804357b4/source/mono/mcs/class/corlib/System/DateTime.cs:830

 at System.DateTime.Parse (string,System.IFormatProvider) [0x00000] in /Users/builder/data/lanes/monodroid-mac-4.2-series/804357b4/source/mono/mcs/class/corlib/System/DateTime.cs:818

 at System.DateTime.Parse (string) [0x00000] in /Users/builder/data/lanes/monodroid-mac-4.2-series/804357b4/source/mono/mcs/class/corlib/System/DateTime.cs:813

 at Steema.TeeChart.Chart.BetaNotExpired () <IL 0x0000c, 0x000cf>

 at Steema.TeeChart.Chart.InternalDraw (Android.Graphics.Canvas) <IL 0x00001, 0x0004b>

 at Steema.TeeChart.TChart.Draw (Android.Graphics.Canvas,System.Drawing.Rectangle) <IL 0x000c4, 0x004ef>

 at Steema.TeeChart.TChart.Draw (Android.Graphics.Canvas) <IL 0x00007, 0x00097>

 at Steema.TeeChart.TChart.OnDraw (Android.Graphics.Canvas) <IL 0x00055, 0x001a3>

 at Android.Views.View.n_OnDraw_Landroid_graphics_Canvas_ (intptr,intptr,intptr) [0x00010] in /Users/builder/data/lanes/monodroid-mac-4.2-series/804357b4/source/monodroid/src/Mono.Android/platforms/android-12/src/generated/Android.Views.View.cs:9297

 at (wrapper dynamic-method) object.69af4743-db01-4501-8f13-77deb4a4e86e (intptr,intptr,intptr) <IL 0x00012, 0x00033> 
```

根据堆栈跟踪，我猜它与 BetaNotExpired 以及可能的查找值有关，但我今天刚刚请求并收到了评估版本。有谁知道如何让 TeeChart 工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:13:59.697

对不起这是我的错。此测试版将于 7 月 31 日到期。我忘了使用文化中立机制。我使用了*DateTime.Parse("31/07/2012")*而您可能需要*DateTime.Parse("07/31/2012")*或*DateTime.Parse("2012/07/31")*。因此，我更改了 TeeChart.Monodroid.dll 以使用文化中立机制将 DateTime 值转换为使用[DateTime.ToUniversalTime()](http://msdn.microsoft.com/en-us/library/system.datetime.touniversaltime.aspx)的通用时间。[您可以在此处](http://tinyurl.com/c8ey5zk)下载新程序集。[它是用Mono for Android 4.2.3 beta](http://docs.xamarin.com/android/Releases/Mono_For_Android_4/Mono_for_Android_4.2.3)编译的。如有必要，我也可以为 4.2 编译它。如果错误修复不能解决您的问题，请告诉我。

提前致谢。

# c# - 无法在 kinect 中执行骨架跟踪

> ID：10988127
> 
> 赞同：0
> 
> 时间：2012-06-11T22:00:19.820
> 
> 标签：c#, windows, kinect

我是 kinect 开发的新手，正在使用“使用 Microsoft Kinect SDK 开始 Kinect 编程”一书中的骨架跟踪示例。由于某种原因，我在 SkeletonFrameReady 事件处理程序中获得的所有帧都是空的。

这就是我启用骨架流的方式

```
this._KinectDevice.SkeletonStream.Enable();
this._FrameSkeletons = new Skeleton[this._KinectDevice.SkeletonStream.FrameSkeletonArrayLength];
this._KinectDevice.SkeletonFrameReady += KinectDevice_SkeletonFrameReady;
this._KinectDevice.Start(); 
```

在这里我检查骨架

```
private void KinectDevice_SkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
        {
            using (SkeletonFrame frame = e.OpenSkeletonFrame())
            { 
             ...//use frame data
            }
        } 
```

在调试时，我看到返回的帧始终为空。任何人都可以帮助我做错了什么。SDK 中的骨架查看器示例运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:12:15.990

对不起。该应用程序运行良好。只需要增加 Grid 元素的大小来容纳骨架

# php - 删除字符串（1）“”

> ID：10988130
> 
> 赞同：0
> 
> 时间：2012-06-11T22:01:01.870
> 
> 标签：php, foreach

我从一个列表中得到：

```
one     "\n"
        "\n"
two     "\n" 
```

当我得到清单时，我会爆炸：

```
 $list_explode_nl = explode("\n", $list); 
```

var_dump 显示：

数组(3) { [0]=> 字符串(5) "一" [1]=> 字符串(1) " " [2]=> 字符串(4) "二" }

我的代码：

```
 foreach ($list_explode_nl as $k => $v) {
     if ($v == NULL || $v == ' ') {
        unset($list_explode_nl[$k]);
     }
  } 
```

当字符串像 [1] 时，我想摆脱一个元素。如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:03:41.720

尝试：

```
foreach ($list_explode_nl as $k => $v) {
    if ($v == NULL || trim($v) == '') {
        unset($list_explode_nl[$k]);
    }
 } 
```

我认为该`[1]`元素是换行符（或可能是制表符），因此它不等于`' '`. [修剪](http://php.net/trim)应该照顾它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T22:06:04.490

```
$list_explode_nl = array_filter(array_map('trim',$list_explode_nl)); 
```

或者

```
$list_explode_nl = array_values(array_filter(array_map('trim',$list_explode_nl))); 
```

如果您还想重置索引

# php - 为什么 Magento 在产品保存时使整页缓存失效实际上使页面未缓存以及由于未缓存而刷新会做什么

> ID：10988132
> 
> 赞同：21
> 
> 时间：2012-06-11T22:01:03.070
> 
> 标签：php, caching, magento, redis

所以缓存当然是 Magento 中最让我困惑的地方，我相信它对大多数其他人也是如此。目前我们工作的网站之一是企业网站，当然也使用 FPC。问题是，我们有一个每 15 分钟运行一次的库存更新。很多订单都是通过电话和目录发送给 CSR 的，并通过目录进入 Magento 之外的外部系统。

每 15 分钟运行一个脚本来检查该系统中的任何库存，并查看它是否与 Magento 中的不同。如果存在差异，则在 Magento 中更新库存。使用所有 Magento 方法，没有 sql 或类似的东西。

我们总是遇到缓存问题，并且在它们出现时尝试了所有最新技术。我们正在尝试的最新一个是 Redis，我们在其他网站上已经取得了很好的成功。然而，我们仍然在服务器上看到了疯狂的负载，很明显页面没有被缓存。

在深入研究代码之后，似乎在每次模型保存或管理产品控制器保存之后，它都会查看是否需要使缓存失效。似乎更改任何属性，至少库存会将 FPC 标记为需要失效。

我对失效意味着什么感到困惑，因为不久前我们向客户支持提出了一个关于类似问题的问题，这就是回应

> 即使在销售后库存减少时，如果产品、类别、CMS 发生任何更改，整页缓存也会进入无效状态。
> 
> 现在，当整页缓存进入无效状态时，这并不意味着您的前端发生了某些更改，但是在上次刷新后应用的任何更改都不会显示在前端。
> 
> 但是，如果始终验证 FPC 对于您的业务逻辑来说是必须的，您当然可以将 Magento 安装设置为通过 cron 功能自动刷新它，只要您愿意。

然而，在我所做的所有测试中，在 1.9 和 1.11 Enterprise 上，当 FPC 失效时，响应不会从缓存中拉入。这与他们所说的只是没有更新的更新相矛盾。

有什么我想念的吗？有没有人很好地解释了 Magento 中的失效是如何专门针对 FPC 工作的，或者有任何好的链接可以完全理解流程和代码？

您可以自己尝试对全页缓存的任何页面进行此操作。但据我了解，`processRequest`in中的方法`/app/code/core/Mage/Core/Model/Cache.php`应该使用缓存的响应设置正文内容，如果页面被缓存，则返回 true。

要测试转到任何页面，请确保您已将其缓存并返回 true。进入并编辑产品，在我们的例子中是数量。这将使 FPC 无效。但是，现在当您加载之前缓存的页面时，它将在此方法中返回 false 并且不是缓存页面。我不知道这是否准确能够判断页面是否被缓存，但这就是我的调查引导我的地方。如果我错了，请纠正我。

更新：经过进一步调查，我发现当您在管理员中保存产品时，控制器操作

`Mage_Adminhtml_Catalog_ProductController::saveAction()`

将调用以下方法

`Mage::getModel('catalogrule/rule')->applyAllRulesToProduct($productId)`

然后在`Mage_CatalogRule_Model_Resource_Rule`类中，`applyAllRulesForDateRange`调用该方法并触发事件

`catalogrule_after_apply`

全页缓存模块正在观察并触发 FPC 标记的清理缓存方法。本质上是删除所有 FPC 缓存记录。

如果在此之前逻辑正在清除与产品和类别标签相关的 FPC 记录，我不明白为什么这是必要的。这是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T02:33:41.217

FPC 正在观察库存变化，因为其目的是显示任何已减至零库存的产品缺货。解决方法是在产品达到零时而不是每次任何产品更改库存时创建事件调度，并重写 FPC 以观察该事件而不是原始事件。

另一种方法是仅使与正在更新的产品有关的缓存部分无效，但这将是一个相当重要的体系结构更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-04T03:27:11.347

您应该创建一个新的自定义索引器 Mage_Index_Model_Indexer_Abstract ，并使用 cron 作业创建一个新的资源模型 api 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:39:49.577

阅读我在 Magento 中的整页缓存中写的文章。它突出了一个错误修复，它突然使整个缓存机制变得有意义！

[http://www.excitedcroc.com/article/why-the-magento-full-page-cache-doesnt-expire](http://www.excitedcroc.com/article/why-the-magento-full-page-cache-doesnt-expire)

Magento 使用 Zend Framework 缓存机制的方式本质上存在一个错误。

问题是 Zend 库缓存类和 Magento 企业缓存类在它们的函数中使用了 null 和 false 的混合，这会产生生命周期值。因为 null !== false 总是使用 10 天的默认生命周期。问题源于 app/code/core/Enterprise/PageCache/Model/Processor.php 中的 processRequestResponse 函数。因为在保存时没有将生命周期值传递给缓存实例，所以它默认为 null。

更改 app/code/core/Mage/Core/Model/Cache.php 的 save 函数的生命周期参数的默认值将解决此问题。只需将其设置为 false 而不是 null （上面链接的文章完全解释了原因）。

- 公共函数保存($data, $id, $tags = array(), $lifeTime = null)

+ 公共函数保存（$data，$id，$tags = array()，$lifeTime = false）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T13:14:54.747

phoenix 页面缓存模块清除产品页面和类别页面，但未发现某些缓存失效区域。它也不能很好地处理动态内容。

也许您应该查看 aoe_static 模块，该模块通过加载默认布局并使用 ajax 调用渲染块，在加载动态内容方面做得很好。此 ajax 调用还将 cookie 设置为允许会话。

你必须小心在一个相当困难的领域使用 2 个模块，也许你应该查看这个[magento 开源整页缓存](https://stackoverflow.com/questions/13241591/magento-open-source-full-page-cache)

# node.js - 如何在异步函数中使用“this”？

> ID：10988135
> 
> 赞同：2
> 
> 时间：2012-06-11T22:01:07.353
> 
> 标签：node.js

我有一个简单的例子：

```
function File(name) {
   this.name = name
   this.text = null
}

File.prototype = {
    read: function() {
         fs.readFile(this.name, function (err, data) {
     }
    },
    getContent: function() {
         return this.text
     }
}

var myfile = new File('my_file')

watch.createMonitor('my_file_dir', function (monitor) {
    monitor.files['my_file']
    monitor.on("change", function (f, stat) {
        myfile.read()
    }
})

  main program....:

   myfile.getContent() ... 
```

我想在 this.text 变量中添加文件内容。怎么做 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T22:12:23.270

*   创建局部变量并存储在那里'this'

    阅读：函数（）{ var _file = this；fs.readFile(this.name, function (err, data) { ... _file.text = data; ... }); },

*   将“this”绑定到内部函数：读取：function() {

    ```
     fs.readFile(this.name, function (err, data) {
         ...
         this.text = data;
         ...
     }.bind(this) 
    ```

    },

Note: It's insufficiently to store data to this.text: if you read something asynchronously in yur class, you need to provide callbacks to let other objects know that you got some data in yourFile.text

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T22:03:42.520

您可以保存`this`对闭包外部的引用并从内部引用它：

```
File.prototype = {
    read: function() {
        var self = this;
        fs.readFile(this.name, function (err, data) {
            self.text = data;
        });
    },
    getContent: function() {
        return this.text
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T22:04:25.153

你可以做几件事：

1.  创建一个作用域版本`this`：

    ```
    File.prototype = {
      read: function() {
        var self = this;
        fs.readFile(this.name, function (err, data) {
          self.text += data;
        });
      }
    }; 
    ```

2.  将函数绑定到 的当前值`this`：

    ```
    File.prototype = {
      read: function() {
        fs.readFile(this.name, function (err, data) {
          this.text += data;
        }.bind(this));
      }
    }; 
    ```

# asp.net-mvc-3 - 第四个参数，为什么 MVC 3 SelectList 不预先选择一个选项？

> ID：10988138
> 
> 赞同：0
> 
> 时间：2012-06-11T22:01:37.387
> 
> 标签：asp.net-mvc-3

我正在尝试使用 SelectList 重载

[SelectList（IEnumerable，字符串，字符串，对象）](http://msdn.microsoft.com/en-us/library/dd492553.aspx)

在控制器中：

```
List<MyObj> MyObjList;
MyObj mySel = (from o in MyObjList where o.Name == selectedName select c)
              .SingleOrDefault();

// Variant A:
var list = new SelectList(TENANTS, "Code", "Name", (object)(mySel.Name));

// Variant B:
var list = new SelectList(TENANTS, "Code", "Name", (object)(mySel));
ViewBag.ListForDropdown = list; 
```

在视图中：

```
var list = (List<MyObj>)ViewBag.ListForDropdown;
@Html.DropDownListFor(model => model.PropOfTypeMyObject, list, "--- Select One ---") 
```

DropDownList 正确呈现，但未选择任何值。我在调试器中确认这是集合`mySel`中的一个实例。`MyObjList`

第 4 个参数是否应该是 中的对象的实例`MyObjList`？我缺少什么让这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:09:01.207

您正在传入`.Name`，这是选择列表的 Text 属性。改为使用`.Code`- Value 属性。

# backbone.js - Backbone.Model 回调和 THIS 的问题

> ID：10988139
> 
> 赞同：0
> 
> 时间：2012-06-11T22:01:50.073
> 
> 标签：backbone.js

我正在构建一个简单的天气小部件。当前的天气状况是从 National Weather Service xml 文件中读取的，然后我想在模型中解析和存储相关数据，但 $.ajax 的回调不会连接（我正在这样做）。

```
var Weather = Backbone.Model.extend({
        initialize: function(){
            _.bindAll( this, 'update', 'startLoop', 'stopLoop' );
            this.startLoop();
        },
        startLoop: function(){
            this.update();
            this.interval = window.setInterval( _.bind( this.update, this ), 1000 * 60 * 60 );
        },
        stopLoop: function(){
            this.interval = window.clearInterval( this.interval );
        },
        store: function( data ){
            this.set({
                icon : $( data ).find( 'icon_url_name' ).text()
            });
        },
        update: function(){
            $.ajax({
                type: 'GET', 
                url: 'xml/KROC.xml', 
                datatype: 'xml' 
            })
            .done( function( data ) {
                var that = this;
                that.store( $( data ).find( 'current_observation' )[ 0 ] );
            });
        }
    });
    var weather = new Weather(); 
```

数据被正确读取，但我无法获得回调的完成函数来调用存储函数。（如果“完成”只是解析然后执行“this.set”，我会很高兴。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T22:36:32.607

我认为你只需要`var that = this;`提升一个级别：

```
update: function(){
    var that = this; // <-------------- You want this 'this'
    $.ajax({
        type: 'GET', 
        url: 'xml/KROC.xml', 
        datatype: 'xml' 
    })
    .done( function( data ) { // <----- rather than the 'this' in here
        that.store( $( data ).find( 'current_observation' )[ 0 ] );
    });
} 
```

您想`this`在您的`update`方法中捕获当前值，当您`done`被调用时，为时已晚，因为`done`回调已经有错误的`this`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T16:21:51.463

上面的答案会起作用，但是有一个带有下划线的内置工具。尝试这个：

```
.done(_.bind(function( data ) { // <----- rather than the 'this' in here
    this.store( $( data ).find( 'current_observation' )[ 0 ] );
}, this)); 
```

这样，`that=this`当您将执行上下文设置为`this`with 时，您将永远不必执行 a [`_.bind`](http://documentcloud.github.com/underscore/#bind)。

另外，我发现这`_.bindAll(this, ...)`并不能保证你会绑定到`this`. 在我需要的水平上使用`_.bind`它总是有效的。

# jquery - jquery 1.7.1 - 查询字符串中的括号“（”引起的语法错误

> ID：10988140
> 
> 赞同：4
> 
> 时间：2012-06-11T22:01:51.687
> 
> 标签：jquery, asp.net-mvc, jquery-mobile, query-string

在 MVC 视图中，我通过 ActionLink 将字符串值添加到查询字符串

```
<ul data-role="listview" data-inset="true">
  <li data-role="list-divider">Select Item</li>
  @foreach (var item in Model)
  {
    <li>@Html.ActionLinkitem.Name, "Create", "Article", new { idItem = item.Id, name = item.Name }, null)</li>
  }
</ul> 
```

我正在使用 jQueryMobile 和 jQuery。结果是一个插入列表：http: [//jquerymobile.com/demos/1.1.0/docs/lists/lists-inset.html](http://jquerymobile.com/demos/1.1.0/docs/lists/lists-inset.html)

在浏览器中单击链接时，我收到 JScript 运行时错误：

> 语法错误，无法识别的表达式：data-url='/Article/Create?idItem=152&name=Semi%20Skimmed%20(Lowfat]')

我都试过了：

```
HttpUtility.UrlPathEncode(item.Name)
HttpUtility.UrlEncode(item.Name) 
```

没有运气。

名称中没有“（”或任何其他特殊字符的元素运行良好。JScript 错误中的 ]' 字符似乎指向不成功的序列化（json）。

数据库中的字符串是

> “半脱脂（低脂）”

并且不包含 ]' 部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:18:51.967

一个愚蠢的解决方法是：

1.  将“(”和“)”替换为您确定是唯一的特殊字符（或字符串）（并且不会被 urlEncode 破坏），例如“~1~”和“~2~”。
2.  在您的字符串上运行 Server.urlEncode 方法。
3.  将“~1~”（或其他）替换为“（”，将“~2~”替换为“）”。

# php - 默认情况下使用 jquery 禁用输入

> ID：10988141
> 
> 赞同：-1
> 
> 时间：2012-06-11T22:01:58.027
> 
> 标签：php, javascript, jquery

我想默认禁用输入，并且我有一个允许启用它们的复选框；所以我的复选框代码是：

```
function toggleStatus() {
  if ($('#toggleElement').is(':checked')) {
    $('#elementsToOperateOn :input').attr('disabled', true);
  } 
  else {
    $('#elementsToOperateOn :input').removeAttr('disabled');
  }
} 
```

它在输入中被调用，`onchange="toggleStatus()";`但输入的默认状态已启用，我不想在每个输入中添加 disabled="disabled"，我该如何使用 jquery 来做到这一点？我怎样才能使它与现有的onchange一起工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T22:04:08.623

```
$(function(){
    $('#elementsToOperateOn :input').prop('disabled', true);
}); 
```

当 DOM 准备好时禁用输入。

**OK 在你更新之后**，答案就更简单了，只要触发`onchange`事件：

要么：

```
toggleStatus(); 
```

或与

```
$('#toggleElement').change(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T22:03:48.763

使用[`.prop`](http://api.jquery.com/prop/)代替`.attr`：

```
$(':input').prop('disabled', true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T22:04:27.680

试试这个。

```
$(document).ready(function() {
    $('input, select').not('#toggleElement').attr('disabled', true);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T22:06:25.643

让 jquery 在启动时遍历每个输入字段并添加 disabled 属性

```
$(document).ready(function(){

    $('input').each(function(){

      $(this).attr("disabled", "disabled");

      });
    }); 
```

对于您的切换脚本，使用类选择器

```
$('.elementsToOperatOn').each(function(){
  $(this).removeAttr('disabled');
}); 
```

# validation - Spring MVC 验证复选框列表

> ID：10988146
> 
> 赞同：0
> 
> 时间：2012-06-11T22:02:22.943
> 
> 标签：validation, spring-mvc, checkbox, constraints

我有以下豆类：

```
public class CodedEntity {
    private String name;
    private String code;
    // getters and setters
}

public class MyProduct {
    @javax.validation.constraints.Size(min = 1)
    private List<CodedEntity> codedEntities;
    // getters and setters
} 
```

如您所见，codedEntities 列表必须至少包含一个元素。

在我的控制器中，我像这样验证列表的大小：

```
@RequestMapping(value = "/**", method = RequestMethod.POST)
public String submit(@Valid final MyProduct myProduct, final BindingResult result,
        final Model model) {
    // ...
} 
```

最后是我的jsp：

```
<c:forEach items="${codedEntitiesList}" var="codedEntity" varStatus="loopStatus"        
    <form:checkbox path="myProduct.codedEntities[${loopStatus.index}]" value="${codedEntity.code}" cssClass="checkbox" />
</c:forEach> 
```

这里的问题如下：当我在不选中任何复选框的情况下提交 jsp 时，spring mvc 返回一个包含“null”元素的非空列表。因此，验证失败。

如何告诉 spring-mvc 返回一个空列表而不是一个充满“null”元素的列表？或者至少有什么方法可以验证我的约束？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T02:38:52.917

使用一些 Javascript 可能更容易做到这一点，否则如果你想要一个纯 java 实现，我会实现我自己的注释。@ListContainsValue 之类的东西应该不难实现。如果您需要一个如何实现自己的验证注释的示例，这里有一个非常好的示例：

[使用 Hibernate Validator (JSR 303) 进行跨字段验证](https://stackoverflow.com/questions/1972933/cross-field-validation-with-hibernate-validator-jsr-303)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:41:12.560

我终于找到了解决方案。我不知道它是否是最好的，但它肯定是一个好。

首先，jsp必须像这样修改：

```
<c:forEach items="${codedEntitiesList}" var="codedEntity" varStatus="loopStatus"        
    <form:checkbox path="myProduct.codedEntities" value="${codedEntity}" />
</c:forEach> 
```

比你必须创建一个自定义编辑器：

```
public class CodedEntityEditor extends PropertyEditorSupport {
    @Override
    public void setAsText(final String text) {
        final CodedEntity codedEntity = new CodedEntity();
        codedEntity.setCode(text);
        this.setValue(codedEntity);
    }

    @Override
    public String getAsText() {
        return ((CodedEntity) this.getValue()).getCode();
    }
} 
```

当然，不要忘记将 CodedEntityEditor 绑定到 Controller ：

```
@InitBinder
public void initBinder(final WebDataBinder binder) {
    binder.registerCustomEditor(CodedEntity.class, new CodedEntityEditor());
} 
```

最后，您必须在 CodedEntity 对象中实现 hashCode() 和 equals() 方法。您必须这样做，因为 CodedEntityEditor 中的 getAsText 方法通过其引用检索对象。如果您实现这两种方法，它将在特定字段（在我的情况下为“代码”字段）检索它。为了方便起见，我建议使用像 Eclipse 这样的 IDE 来自动生成它们。仅作为示例，以下是 Eclipse 生成的 2 个方法：

```
@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((this.code == null) ? 0 : this.code.hashCode());
    return result;
}

@Override
public boolean equals(final Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (this.getClass() != obj.getClass())
        return false;
    final CodedEntity other = (CodedEntity) obj;
    if (this.code == null) {
        if (other.code != null)
            return false;
    } else if (!this.code.equals(other.code))
        return false;
    return true;
} 
```

当然，您可以跳过这两种方法，但在这种情况下，当您重新加载页面时不会选中复选框！

# java - 非控制器或 taglib 类的外部配置

> ID：10988155
> 
> 赞同：2
> 
> 时间：2012-06-11T22:03:07.780
> 
> 标签：java, grails, groovy

我正在尝试为非控制器或 taglib 类创建外部配置，因为这些值需要在不重新编译的情况下更改。现在 ConfigurationHolder 和 ApplicationHolder 已被弃用，对此我有什么选择？

我已经完成了大约 3 个小时的谷歌搜索，似乎自从这些课程被弃用以来，有人想出的唯一一件事就是使用 DI。但是，我需要此配置以某种方式位于 WAR 文件的外部，所以我不知道这是否对我有帮助，除非我遗漏了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:13:28.027

看看你的默认配置文件的第一行......

如果您取消注释此代码，您将获得一个在应用程序启动时读取的外部配置。

因此，如果配置发生更改，您不必重新编译而是重新启动应用程序。由于许多管理员在夜间自动重启应用程序服务器，这应该不是什么大问题，不是吗？

```
// locations to search for config files that get merged into the main config
// config files can either be Java properties files or ConfigSlurper scripts

// grails.config.locations = [ "classpath:${appName}-config.properties",
//                             "classpath:${appName}-config.groovy",
//                             "file:${userHome}/.grails/${appName}-config.properties",
//                             "file:${userHome}/.grails/${appName}-config.groovy"]

// if(System.properties["${appName}.config.location"]) {
//    grails.config.locations << "file:" + System.properties["${appName}.config.location"]
// } 
```

为了从 /src/groovy 中访问配置，请查看以下问题：[How to access Grails configuration in Grails 2.0?](https://stackoverflow.com/questions/7133580/how-to-access-grails-configuration-in-grails-2-0)

顺便说一句：是的，configurationHolder 已被弃用，但它仍然有效:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:54:09.120

根据我从 js3v 得到的回复，我建议查看[Settings plugin](http://grails.org/plugin/settings)。它为您提供了一种非常好的方式来输入这些类型的项目和一个基本的 CRUD 界面来管理它们。您可以有 String、Integer、Date 和 BigDecimal 类型。您可以创建名称来对它们进行分段（例如`admin.email.defaultGreeting`，或`banking.defaultInterestRate`）并在 gsp 或控制器/服务/域类中访问它们，如下所示：

```
//gsp
<g:setting valueFor="admin.email.defaultGreeting" default="Hello!" encodeAs="HTML"/>

//Other
import org.grails.plugins.settings.*
Setting.valueFor("admin.email.defaultGreeting", "Hello!") 
```

# .net - 颜色枚举

> ID：10988161
> 
> 赞同：0
> 
> 时间：2012-06-11T22:03:54.210
> 
> 标签：.net, f#, colors, enums

我的想法是在一些颜色之间切换，所以我不必使用多支笔，但我可以只声明一支。

我不太确定是否完全了解枚举的工作原理，请纠正我：

```
type ColorType =
  | Red = Color.Red
  | Green = Color.Green
  | Blue = Color.Blue 
```

我希望将其用于：

```
let p = new Pen(ColorType.[index])
g.DrawRectangle(p, 0, 0, 10, 10) 
```

其中 index 是一个 int 变量（0 到 2），我将使用它来切换颜色。问题是我不能声明那个枚举，颜色不被接受。可能的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T22:12:38.570

要按索引访问颜色，您可以将它们放在一个数组中：

```
let colors =
  [|
    Color.Red
    Color.Green
    Color.Blue
  |]

let p = new Pen(colors.[index])
g.DrawRectangle(p, 0, 0, 10, 10) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T22:13:35.097

您可能想使用数组或其他集合来存储颜色：

```
let colors = 
  [| Color.Red 
     Color.Green 
     Color.Blue |]

let p = new Pen(colors.[index]) 
g.DrawRectangle(p, 0, 0, 10, 10) 
```

枚举是为完全不同的目的而设计的。如果您想枚举多个选项并通过名称访问它们（而不是通过索引访问它们），它们很有用。例如，您可以使用枚举来表示某些状态机的状态或其他选项。

在您的示例中，如果您想将不同的颜色与不同类型的图形元素相关联，它们会很有用。假设您想使用一种颜色作为背景，另一种颜色作为前景 - 您可以定义枚举或 F# 区分联合来表示这两种情况：

```
type ColorType = 
  | Foreground
  | Background 
```

...然后您可以定义一个将实际颜色分配给各个类型的集合：

```
let colors = 
  dict [ (ColorType.Foreground, Color.Red);
         (ColorType.Background, Color.Black) ] 
```

然后您可以使用`colors.[ColorType.Foreground]`来获取指定种类的颜色（在本例中为红色）。但是，您不能按索引访问枚举（或 F# 区分联合）的情况。

这是 F# 的基本方面，因此您可能想查看[F# WikiBook](http://en.wikibooks.org/wiki/F_Sharp_Programming)，阅读[MSDN 上的一些介绍](http://msdn.microsoft.com/en-us/library/hh273069.aspx)或购买其中的一本 F# 书籍。

# ruby-on-rails - 如何在 Slim 模板中渲染 HTML

> ID：10988163
> 
> 赞同：17
> 
> 时间：2012-06-11T22:04:01.197
> 
> 标签：ruby-on-rails, ruby, slim-lang

我正在尝试呈现一个带有图标的链接。我正在使用[Slim](https://github.com/stonean/slim)模板引擎和[Bootstrap CSS](http://twitter.github.com/bootstrap/base-css.html#icons)。

通常您可以通过以下方式执行此操作：

```
<a href="#"><i class="icon-user"></i> My Profile</a> 
```

根据 Slim 的文档，我们可以`==`在不转义 HTML 的情况下进行渲染。因此，将其翻译为 Slim，我尝试了以下变体：

```
li== link_to "<i class='icon-user'></i> My Profile", current_user
li== link_to "#{'<i class="icon-user"></i>'.html_safe} My Profile", current_user
li= link_to "#{'<i class="icon-user"></i>'.html_safe} My Profile", current_user 
```

所有变体都呈现`<a href="/users/1"><i class="icon-user"></i> My Profile</a>`逃避`i`标签。

如何阻止 Slim 或 Rails 转义 html？

（带有 Slim 1.2.1 的 Rails 3.2）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-12-03T00:53:16.847

已经回答了这个问题，但是如果您实际上有一些 html 并且您想在一个苗条的模板中呈现它，请使用 double equal。

```
== "<i>test</i>" 
```

将与

```
= "<i>test</i>".html_safe 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-11T22:44:20.917

您想禁用`link_to`参数的 HTML 转义，而不是整个`link_to`结果。您与您的非常接近，`html_safe`但您的字符串插值正在吃掉您的“HTML 安全”标志。这应该会更好：

```
li= link_to '<i class="icon-user"></i> My Profile'.html_safe, current_user 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-22T10:19:22.753

或者，您可以将其写为

```
li
  a href=url_for(current_user)
    i.icon-user My Profile 
```

这可以说是更容易阅读。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-02T06:46:58.960

如果对任何人有帮助，下面还有另一种解决方法。如果您有更复杂的代码要包含在链接中，则使用块特别有用。

```
li
  = link_to current_user do
    i.icon-user>
    | My Profile 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-17T01:19:46.853

如果您愿意，可以使用 slim 语法而不是“原始”html 来执行类似的技术：

```
li = link_to Slim::Template.new{ "i.icon-user\n| My Profile" }.render.html_safe, current_user 
```

呈现为：

*   [我的简历](/current_user_url)

或生的：

```
<li>
  <a href="/current_user_url">
    <i class="icon-user"></i>
    My Profile
  </a>
</li> 
```

在上面的示例中，要按照问题中的要求呈现“我的个人资料”文本，您需要使用`"`which allows the use of `\n`or new line 来形成正确的苗条语法。`\t`如果做嵌套苗条，会给你你需要的标签。

如果可以在 icon 元素内呈现文本，那么以下内容将起作用：

```
li = link_to Slim::Template.new{ 'i.icon-user My Profile' }.render.html_safe, current_user 
```

*   [我的简历](/current_user_url)

```
<li>
  <a href="/current_user_url">
    <i class="icon-user">My Profile</i>
  </a>
</li> 
```

如果将行为放在您自己的辅助方法中：

```
# ApplicationController.rb

def string_to_slim(string)
  Slim::Template.new{ string }.render.html_safe
end
helper_method :string_to_slim # allows you to call the method in a view via ERB or Slim 
```

`.slim`然后你可以在从你的基本控制器继承的控制器呈现的视图中实现这样的：

```
li = link_to string_to_slim('i.icon-user My Profile'), current_user 
```

# xcode - 在 InterfaceBuilder 中调整 NavigationController 的大小

> ID：10988168
> 
> 赞同：3
> 
> 时间：2012-06-11T22:04:10.543
> 
> 标签：xcode, interface-builder, uistoryboard

这可能是一个愚蠢的问题，但是有没有办法在故事板中调整导航控制器的大小？它只是占用了太多的屏幕空间。

我的大多数视图都是大小合适的弹出窗口，但旁边有一个巨大的 iPad 大小的导航控制器。

这纯粹是为了在 Interface Builder 中进行可视化工作，因为我有大约 20 个不同的屏幕，而且有点拥挤。

# javascript - JavaScript 中的 try-catch：如何获取原始错误的堆栈跟踪或行号

> ID：10988169
> 
> 赞同：22
> 
> 时间：2012-06-11T22:04:18.560
> 
> 标签：javascript, ios, mobile

在 JavaScript 中使用 TRY-CATCH 时，如何获取导致错误的行的行号？

在许多浏览器上，下面的代码可以很好地工作，我将获得指向引发异常的实际行的堆栈跟踪。

但是，有些浏览器没有“e.stack”。iPhone 的 safari 就是一个例子。

有没有办法获得适用于所有浏览器的行号？

```
try
{
   // lots of code here
   var i = v.WillGenerateError; // how to get this line number in catch??
   // lots of code here
} 
catch (e) 
{
     alert (e.stack)  // this will work on chrome, FF. will no not work on safari 
     alert (e.line)  // this will work on safari but not on IPhone
} 
```

非常感谢！

更新：我发现 e.line 可以在 safari 上运行，但在 iPhone 上仍然不可用，最新的 iOS 版本

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T22:19:30.583

尝试使用`e.lineNumber`. 例如：

```
try {
   var i = v.WillGenerateError;
} catch (e) {
   alert(e.lineNumber);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T21:08:34.203

```
try {
   0();
} catch (e) {
   alert(e.line);
} 
```

在 try...catch 块中使用 'e.line' 将给出 Mobile Safari 中错误的行号。

# ruby - Capybara 对 sinatra 应用程序的测试失败

> ID：10988174
> 
> 赞同：1
> 
> 时间：2012-06-11T22:04:32.750
> 
> 标签：ruby, unit-testing, sinatra, capybara, minitest

我正在尝试使用 minitest 和 capybara 测试 sinatra 应用程序，但在使用 capybara 功能（如 fill_in 或 visit）进行的所有测试中都出现了几个错误。

test_index 给出：

> # 未定义的局部变量或方法“app”

test_create_user 给出：

> 无效的表达式：.////form[@id = 'register']

test_same_email 给出：

> 找不到css“#register”

test_login 给出：

> 无法填写，找不到带有 ID、名称或标签“电子邮件”的文本字段、文本区域或密码字段

关于可能出错的任何建议？

# 测试.rb

```
require "test/unit"
require "minitest/autorun"
require "capybara"
require "capybara/dsl"
require "rack/test"
require_relative "../lib/kimsin.rb"

ENV["RACK_ENV"] = "test"

class KimsinTests < Test::Unit::TestCase
  include Rack::Test::Methods
  include Capybara::DSL
  Capybara.app = Sinatra::Application

  def test_index
    visit "/"
    assert stuff..
  end

  def test_create_user
    visit "/user/new"
    within "//form#register" do
      fill_in :username, :with => "first@company.com"
      fill_in :password, :with => "abC123?*"
      fill_in :confirm_password, :with => "abC123?*"
      click_link "Register"
    end
    assert stuff..
  end
end 
```

我在 Windows 7 上使用 cygwin 1.7.15-1、rvm -v 1.14.1（稳定）和 ruby​​ -v 1.9.2p320。

- - 更新 - -

最后，我通过合并史蒂夫的建议得到了测试工作：

```
within "form#register" do
fill_in "email", :with => "first@company.com"
click_button "Register" 
```

并使用 capybara_minitest_spec 断言响应：

```
page.must_have_content "Password"
page.must_have_button "Register" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T20:31:40.657

我刚刚用 Webrat 回答了你最近发布的关于辛特拉的一个问题。

[使用 webrat 对 sinatra 应用程序的验收测试失败](https://stackoverflow.com/questions/11056071/acceptance-testing-of-sinatra-app-using-webrat-fails/11066685#11066685)

我认为这里的问题是一样的。尝试更换：

```
Capybara.app = Sinatra::Application 
```

和：

```
Capybara.app = Kimsin 
```

就个人而言，我会选择 Capybara 而不是 Webrat。

# php - 使用 Jquery、PHP 和 Ajax 无限滚动

> ID：10988177
> 
> 赞同：1
> 
> 时间：2012-06-11T22:04:58.943
> 
> 标签：php, jquery, ajax, pagination, jquery-pagination

因此，我试图从我的 mysql 数据库中的表中进行无休止的滚动，并且我拥有它，这样当到达页面底部时，它会要求将新数量的评论拉到新闻源中，但对于一些原因当它到达底部但只显示加载 gif 而没有新加载。任何我搞砸的帮助都会很棒。多谢你们

这是我的 jquery/ajax：

```
<script>
//Script to continue the home newsfeed after 10 posts
$(window).scroll(function() {
if($(window).scrollTop() === $(document).height() - $(window).height()) {
    $('div#load_more_posts').show();

    $.ajax( {
        url: "load_more_posts.php?lastPost=" + $(".display_newsfeed:last").attr("id"),
        success: function(html) {
            if(html) {
                $("#outputDiv").append(html);
                $('div#load_more_posts').hide();
            } else {
                $('div#load_more_posts').replaceWith("<center>Finished loading all Posts!</center>")
            }
        }
    });
}
 });
 </script> 
```

这是调用新闻源的代码部分：

```
<div class="outputDiv">
    <?php echo "$outputList"; ?><!-- Div for this output has been declared above in PHP before echoing -->
</div> <!-- END outputDiv -->

<div id='load_more_posts' style="display:none">
<center>
<img src="../../images/loading.gif" alt="Loading" />
</center>
</div> 
```

最后，这是每个评论的新闻源显示 (display_newsfeed.php)：

```
$review_query = mysql_query("SELECT * FROM `reviews` ORDER BY `review_date` DESC LIMIT 0,10");

while($review_row = mysql_fetch_assoc($review_query)){

    $review_title = $review_row['review_title'];
    $user_id = $review_row['user_id'];
    $user_firstname = $review_row['user_firstname'];
    $user_lastname = $review_row['user_lastname'];
    $review_id = $review_row['review_id'];
    $review_body = $review_row['review_body'];
    $review_referral = $review_row['review_referral'];

    $outputList .= '
                    <div class="display_newsfeed" id="'.$review_id.' display_newsfeed">
                        This code is each review
                        </div>
                                    '; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:32:09.740

您在 display_newsfeed.php 的 while 循环中缺少右括号。您还在您的 javascript 中引用了一个 ID 为“outputDiv”的 div，但该元素不存在（您在 HTML 中为其分配了一个“outputDiv”类）。不确定这些是否只是在此处粘贴代码的拼写错误，但其中任何一个都肯定会导致问题。

如果这些都不是问题，那么最好的下一步就是确定问题所在。如果您的浏览器有开发者控制台（或萤火虫），请仔细检查 AJAX 请求是否发出，并查看它是否返回了预期的 HTML。如果是，那么问题肯定出在客户端代码上（特别是成功回调中的某些内容，除非请求根本没有发出）。如果不是，那么问题肯定出在服务器上的脚本上。

# html - 表格中的表格未正确显示（奇怪的间距）

> ID：10988180
> 
> 赞同：0
> 
> 时间：2012-06-11T22:05:21.423
> 
> 标签：html, css, css-tables

我在 TD 内的 div 内有一个表单。如果我将 div 放在表格之外，它会渲染得很好，但是当我把它放在表格里面时，顶部和底部会出现额外的间距。表单的大小正确，但包装 div adCopyInlineEditContainer 随机具有更高的高度，即使我给它自动设置高度也是如此。

```
<div class="inlineEditCustomHolder blueBorder" style="top: 0px; left: 102px;"><div class="adCopyInlineEditContainer" style="">
    <form method="POST" class="adCopyInlineEdit">
        <input type="text" data-linetype="title" maxlength="25" data-maxlength="25" class="colorBlue"> <div class="counter"> <span class="ad_title_counter">0</span>/25</div> <br>
        <input type="text" data-linetype="desc1" maxlength="35" data-maxlength="35" class="colorGray"> <div class="counter"> <span class="ad_title_counter">0</span>/35</div> <br>
        <input type="text" data-linetype="desc2" maxlength="35" data-maxlength="35" class="colorGray"> <div class="counter"> <span class="ad_title_counter">0</span>/35</div> <br>
        <input type="text" data-linetype="dispUrl" maxlength="35" data-maxlength="35" class="colorGreen"> <div class="counter"> <span class="ad_title_counter">0</span>/35</div> <br>
    </form>
</div>
<div class="grid-handle" style="top: 176px; left: 256px;">
</div>
</div> 
```

我认为包括我的 CSS 不会太相关，除了我的输入是`display:block`和`position:absolute`.

有什么想法吗？您可以在图片中看到顶部和底部的奇怪空间。

![在此处输入图像描述](../Images/c11cf51ac2671b14af612878b9e1dfac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:12:00.763

获取此代码

```
 <div class="inlineEditCustomHolder blueBorder" style="top: 0px; left: 102px;"><div class="adCopyInlineEditContainer" style="">
                            <form method="POST" class="adCopyInlineEdit">
                                <input style="float:left" type="text" data-linetype="title" maxlength="25" data-maxlength="25" class="colorBlue"> <div class="counter"> <span style="float:left" class="ad_title_counter">0</span>/25</div> <br>
                                <input style="float:left" type="text" data-linetype="desc1" maxlength="35" data-maxlength="35" class="colorGray"> <div class="counter"> <span style="float:left" class="ad_title_counter">0</span>/35</div> <br>
                                <input style="float:left" type="text" data-linetype="desc2" maxlength="35" data-maxlength="35" class="colorGray"> <div class="counter"> <span style="float:left" class="ad_title_counter">0</span>/35</div> <br>
                                <input style="float:left" type="text" data-linetype="dispUrl" maxlength="35" data-maxlength="35" class="colorGreen"> <div class="counter"> <span style="float:left" class="ad_title_counter">0</span>/35</div> <br>
                            </form>
                        </div>
<div class="grid-handle" style="top: 176px; left: 256px;">
</div>
</div> 
```

**查看演示：http:** [//jsfiddle.net/r6jeE/](http://jsfiddle.net/r6jeE/)

# python - Twisted Python：如何制作一个等待来自子进程的数据的延迟对象？

> ID：10988181
> 
> 赞同：-1
> 
> 时间：2012-06-11T22:05:31.260
> 
> 标签：python, twisted, deferred

在 Echo 协议中的 lineReceived 方法中，我想在每次写入 child 时生成一个延迟对象。它将等待结果，然后在子进程处理完数据后打印结果。我需要找到一种方法来做到这一点。现在，MyPP 的函数 outReceived 从子进程中获取结果。

谢谢你

```
from sys import executable
from os import environ
import os
from twisted.internet import reactor, defer
from twisted.internet.protocol import Protocol
from twisted.internet.protocol import Factory
from twisted.internet import protocol
from twisted.protocols.basic import LineReceiver
import sys
import time
import math

implementation = """
from filter import censor
censor()
"""                         

class Echo(LineReceiver): 

    def lineReceived(self, data): 
        if self.factory.pp == None:
            pp = MyPP()
            self.factory.pp = reactor.spawnProcess(pp, executable, [executable, "-c", implementation], 
                                                                   env=environ, childFDs = {0:"w", 1:"r", 2:"r"})   
        self.factory.pp.writeToChild(0, data+'\r\n')

class EchoFactory(Factory): 

    protocol = Echo 
    pp = None

class MyPP(protocol.ProcessProtocol): 

    def connectionMade(self):  
        print "connectionMade!" 

    def outReceived(self, data): 
        pass

reactor.listenTCP(11111, EchoFactory()) 
print 'in parent', os.getpid() 
reactor.run() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:17:41.843

您需要`childDataReceived(childFD, data)`在您的实施中`ProcessProtocol`实施。当数据从子进程到达时，这将被回调。请参阅[API 文档](http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IProcessProtocol.html#childDataReceived)。

# c++ - 使用 boost.phoenix 容器算法

> ID：10988182
> 
> 赞同：1
> 
> 时间：2012-06-11T22:05:31.573
> 
> 标签：c++, boost, boost-phoenix

我有一个使用 boost 1.47 phoenix 的 Visual Studio 2008 C++03 应用程序（更新：也使用 1.49）。我想定义一个 boost::function 来从列表中删除一个元素。例如：

```
#include <boost/phoenix.hpp>
#include <boost/function.hpp>
#include <boost/phoenix/stl/container.hpp>
#include <boost/phoenix/stl/algorithm/transformation.hpp>
#include <algorithm>    
#include <list>

int main()
{
    namespace bp = boost::phoenix;
    namespace bpa = boost::phoenix::arg_names;
    std::list< int > a;
    boost::function< void( int ) > RemoveFromList = bp::remove( bp::ref( a ), bpa::arg1 );
    return 0;
} 
```

但是我的`RemoveFromList`定义出现了一系列编译器错误。

```
Error  1  error C2504: 'boost::phoenix::impl::remove::result<Sig>' : base class undefined  \boost\utility\result_of.hpp  80
Error  2  error C2039: 'type' : is not a member of 'boost::result_of<F>'  \boost\phoenix\core\detail\preprocessed\function_eval_10.hpp  121
Error  3  error C2146: syntax error : missing ';' before identifier 'type'  \boost\phoenix\core\detail\preprocessed\function_eval_10.hpp  122
Error  4  error C4430: missing type specifier - int assumed. Note: C++ does not support default-int  \boost\phoenix\core\detail\preprocessed\function_eval_10.hpp  122
Error  5  error C2602: 'boost::phoenix::detail::function_eval::result<Sig>::type' is not a member of a base class of 'boost::phoenix::detail::function_eval::result<Sig>'  \boost\phoenix\core\detail\preprocessed\function_eval_10.hpp  122
Error  6  error C2868: 'boost::phoenix::detail::function_eval::result<Sig>::type' : illegal syntax for using-declaration; expected qualified-name  \boost\phoenix\core\detail\preprocessed\function_eval_10.hpp  122 
```

类似的函数可以`AddToList`干净地编译：

```
boost::function< void( int ) > AddToList = bp::push_back( bp::ref( a ), bpa::arg1 ); 
```

这也可以正常工作（但不那么优雅）：

```
boost::function< void( int ) > RemoveFromList = bp::bind( &std::remove< std::list< int >::iterator, int >, a.begin(), a.end(), bpa::arg1 ); 
```

实现此功能的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:39:19.427

使用 Boost 1.48，您的代码片段可以使用 GCC 4.7 编译，前提是我有正确的包含，并且至关重要的是，前提`BOOST_RESULT_OF_USE_DECLTYPE`是定义了宏。没有后者，它就会失败。

不知道如何在没有 C++11 的情况下解决这个问题。

# php - 在 apache 环境变量中配置变量

> ID：10988185
> 
> 赞同：3
> 
> 时间：2012-06-11T22:06:08.077
> 
> 标签：php, apache, sysadmin

我在工作中运行了几个不同的 PHP 购物车，我们正在尝试将各种配置文件置于版本控制之下。到目前为止，我们只是在 git 中忽略了它们，因为当然，我们不希望任何人都可以使用生产级密码。此外，我们大多数开发人员都在运行具有独特信息的本地安装。

在与我们的系统管理员讨论这个问题时，我突然想起我们可以在 apache vhost 块中设置环境变量并从 PHP 访问它们，如下所示：

阿帕奇：`SetEnv db_user "username"`

PHP：`<?php $config['db']['user'] = $_ENV['db_user'];`

看起来它可以毫无问题地工作，但我以前从未见过它这样做过。以这种方式处理身份验证信息是否有任何影响（技术、安全等）或限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:16:10.097

[这与 PHP 安全指南：数据库和 SQL](http://phpsec.org/projects/guide/3.html)中提出的内容非常接近。

他们指出，一个潜在的问题是通过调用“phpinfo() 或 print_r($_SERVER)”来暴露变量的风险。所以问题是您是否可以控制这种风险 - 以及您是否信任可以访问该虚拟主机的每个人（在您的上下文中，答案可能是“是”）。

他们还建议通过将这些凭据放在只有 root 可读的文件中来添加额外级别的重定向——这在部署中似乎是合理的，如果在开发环境中有点偏执的话。

# arrays - 修改 $ 位置运算符

> ID：10988187
> 
> 赞同：0
> 
> 时间：2012-06-11T22:06:22.517
> 
> 标签：arrays, mongodb, matching, positional-operator

我正在关注[文档中的示例](http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator)：

```
> t.find()
{ "_id" : ObjectId("4b97e62bf1d8c7152c9ccb74"), "title" : "ABC",
  "comments" : [ { "by" : "joe", "votes" : 3 }, { "by" : "jane", "votes" : 7 } ] }

> t.update( {'comments.by':'joe'}, {$inc:{'comments.$.votes':1}}, false, true )

> t.find()
{ "_id" : ObjectId("4b97e62bf1d8c7152c9ccb74"), "title" : "ABC",
  "comments" : [ { "by" : "joe", "votes" : 4 }, { "by" : "jane", "votes" : 7 } ] } 
```

这显示了如何搜索 Joe 的投票计数并增加它。我想要完成的是在查询 Joe 时增加 Jane 的投票计数。在我的例子中，`comments`是一个长度为 2 的数组。也许最好用我当前的（非工作）语法显示：

```
t.update( {'comments.by':'joe'}, {$inc:{'comments[1-$].votes':1}}, false, true ) 
```

我想`$`会在`0`这里，因为乔是阵列中的第一个。为了获得另一个数组索引，我认为`1-$`可以完成这项工作，但事实并非如此。

一个如何匹配另一个数组元素而不是查询的元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:09:00.770

不，这是不可能的。`$`指向数组中第一个匹配的元素。您不能建立对与该匹配元素相关的其他元素的引用。不过，您始终可以使用绝对引用 ( `comments.1.votes`)。

# ruby-on-rails-3 - Ruby on Rails 3 教程 - Ch. 3；秒。3 - “PagesController:Class 的未定义方法‘描述’”

> ID：10988189
> 
> 赞同：0
> 
> 时间：2012-06-11T22:06:47.547
> 
> 标签：ruby-on-rails-3, rspec-rails

我正在关注代码和页面具体说明的内容，我唯一缺少的是 Ruby on Rails 的 rspec gem，因为我无法获得它（为 rspec 安装提供此错误：“ **E: Unable to locate package rspec** ”，因此任何帮助将*不胜*感激）由于无法找到包。

这是我的整个 pages_controller_spec.rb 文件，并且当 rails 服务器尝试连接到页面时显示的错误显示在标题中（如果在这里无法看到，则再次显示：“ **PagesController:Class 的未定义方法 `describe'** ”）。

注意：我也试过没有“require 'spec_helper'”的代码，它仍然无法运行。

```
class PagesController < ApplicationController
  def home
  end

  def contact
  end

  def about
  end

  require 'spec_helper'

describe PagesController do
  render_views

  describe "GET 'home'" do
     it "should be successful" do
    get 'home'
    response.should be_success
     end

     it "should have the right title" do
    get 'home'
    response.should have_selector("title",
            :content => "Ruby on Rails Tutorial Sample App | Home")
    end
  end

  describe "GET 'contact'" do
     it "should be successful" do
    get 'contact'
    response.should be_success
     end

     it "should have the right title" do
    get 'contact'
    response.should have_selector("title",
            :content => "Ruby on Rails Tutorial Sample App | Contact")
    end
  end

  describe "GET 'about'" do
     it "should be successful" do
    get 'about'
    response.should be_success
     end

     it "should have the right title" do
    get 'about'
    response.should have_selector("title",
            :content => "Ruby on Rails Tutorial Sample App | About")
    end
  end
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:21:52.150

你需要额外`end`的规范助手之前需要简单地你在控制器类中并且他试图在控制器上调用描述为方法。添加它，它会没事的。

所以应该是这样的：

```
class PagesController < ApplicationController
  def home
  end

  def contact
  end

  def about
  end
end 
```

和文件的其余部分。

# c# - 获取插入符号/光标位置并将其保持在特定位置

> ID：10988190
> 
> 赞同：1
> 
> 时间：2012-06-11T22:07:04.683
> 
> 标签：c#, position, caret, autofill

我目前在 .NET4 Windows 窗体应用程序中。

我正在尝试制作类似智能感知的东西，但非常基础。

假设用户正在关注`RichTextBox`，并输入类似： `Search`。在这个特定的短语之后，我希望它像这样“自动填充”：`Search ""`并将插入符号放在“”之间。

这样，当用户继续输入插入符号时，插入符号会保持在“”之间，如下所示：

`Search "[usertypinghere][caretposition]"`

我不知道如何获得插入符号的当前位置，更不用说如何保持它了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:58:43.710

令人高兴的是，它是[TextBoxBase](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.selectionstart.aspx)`SelectionStart`的一部分，因此您可以将它放在、、，甚至是其他人的自定义衍生产品中。您需要订阅事件以观看“搜索”，然后在自动填充后设置，然后订阅以防止转向。`TextBox``RichTextBox``MaskedTextBox``TextChanged``SelectionStart``SelectionChangedEvent``SelectionStart`

哦，如果你有几个关键字，你会想要组合这些关键字`Dictionary`来`Tuples`概括这些方法。

编辑我的测试代码。没有闪烁，没有压倒一切的控制。只是普通的事件订阅者

```
private void richTextBox1_TextChanged(object sender, EventArgs e)
    {
        if (richTextBox1.Text == "Search")
        {
            richTextBox1.Text = "Search \"\"";
            richTextBox1.SelectionStart = richTextBox1.TextLength - 1;
        }

    }

    private void richTextBox1_SelectionChanged(object sender, EventArgs e)
    {
        if (richTextBox1.Text.StartsWith("Search \"") && richTextBox1.Text.EndsWith("\""))
        {
            if (richTextBox1.SelectionStart > richTextBox1.TextLength - 1)
            {
                richTextBox1.SelectionStart = richTextBox1.TextLength - 1;
            }
            if (richTextBox1.SelectionStart <= "Search \"".Length)
            {
                richTextBox1.SelectionStart = "Search\"".Length+1;
            }
        }
    } 
```

# ruby - 在 Centos 5.8 上安装 gitorious（乘客模块）

> ID：10988194
> 
> 赞同：3
> 
> 时间：2012-06-11T22:07:27.077
> 
> 标签：ruby, apache, centos, centos5, gitorious

我正在尝试按照本教程在 Centos 5.8 机器上安装 gitorious：http://gitorious.org/gitorious/pages/Rhel_Installation [，](http://gitorious.org/gitorious/pages/Rhel_Installation)但在我安装Passenger 并添加建议的行之后：

```
LoadModule passenger_module /opt/ruby-enterprise-1.8.7-2010.01/lib/ruby/gems/1.8/gems/passenger-2.2.11/ext/apache2/mod_passenger.so
PassengerRoot /opt/ruby-enterprise-1.8.7-2010.01/lib/ruby/gems/1.8/gems/passenger-2.2.11  
PassengerRuby /opt/ruby-enterprise-1.8.7-2010.01/bin/ruby 
```

到我的 httpd.conf，apache 无法启动。

我得到的错误是：

```
Iniciando httpd: httpd: Syntax error on line 200 of /etc/httpd/conf/httpd.conf: Cannot load /opt/ruby-enterprise-1.8.7-2010.01/lib/ruby/gems/1.8/gems/passenger-3.0.12/ext/apache2/mod_passenger.so into server: /opt/ruby-enterprise-1.8.7-2010.01/lib/ruby/gems/1.8/gems/passenger-3.0.12/ext/apache2/mod_passenger.so: failed to map segment from shared object: Permission denied
                                                       [FALLÃ] 
```

我已经尝试过 chmod -R 777 /opt/ruby-enterprise-1.8.7-2010.01/lib/ruby/ 并且仍然收到此错误。

任何帮助将不胜感激！！！先谢谢各位了！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:31:35.780

事实证明，它与 gitorious 没有任何关系，但是对于乘客模块，答案一直都在这里：[为什么 mod_passenger.so 会出现此权限错误？](https://stackoverflow.com/questions/9337706/why-is-this-permissions-error-occurring-with-mod-passenger-so)

这就是我运行 apache 来启动的方法：

```
chcon -R -h -t httpd_sys_content_t /opt/ruby-enterprise-1.8.7-2010.01/lib/ruby/gems/1.8/gems/passenger-2.2.11/ 
```

没有错误！就是这样！

这是我第一次使用 Rails，所以它让我成为了一个新手。

希望这可以帮助！

# opengl - 在 OpenGL 窗格上叠加编辑框控件

> ID：10988195
> 
> 赞同：0
> 
> 时间：2012-06-11T22:07:37.813
> 
> 标签：opengl

我在 Visual C++ MFC 应用程序中有一个大的 OpenGL 画布。一个编辑框控件位于 OpenGL 画布上。但是，无论何时重绘 OpenGL 画布，它都会删除位于其上方的编辑框部分，而忽略指定的窗口 Z 顺序。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:23:01.517

你没有。

让其他窗口与 OpenGL 窗口交互并不是一个好主意。他们互动不好；最好让子窗口远离 OpenGL 窗口。

# c# - 在控制台中捕获没有焦点的击键

> ID：10988197
> 
> 赞同：7
> 
> 时间：2012-06-11T22:07:51.473
> 
> 标签：c#, events, console, key

我知道有一个关于 Windows 窗体的问题，但它在控制台中不起作用，或者至少我无法让它工作。即使控制台没有焦点，我也需要捕获按键。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-11T22:16:59.040

您也可以在控制台应用程序中创建全局键盘挂钩。

这是完整的工作代码：
[https ://docs.microsoft.com/en-us/archive/blogs/toub/low-level-keyboard-hook-in-c](https://docs.microsoft.com/en-us/archive/blogs/toub/low-level-keyboard-hook-in-c)

您创建一个*控制台应用程序*，但必须添加对*System.Windows.Forms*的引用才能使其正常工作。控制台应用程序没有理由不能引用该 dll。

我刚刚使用此代码创建了一个控制台应用程序，并验证了它是否按下了每个键，无论控制台应用程序是否具有焦点。

**编辑**

主线程将运行Application.Run() 直到应用程序退出，例如通过调用Application.Exit()。完成其他工作的最简单方法是启动一个新任务来执行该工作。这是执行此操作的链接代码中 Main() 的修改版本

```
public static void Main()
{
    var doWork = Task.Run(() =>
        {
            for (int i = 0; i < 20; i++)
            {
                Console.WriteLine(i);
                Thread.Sleep(1000);
            }
            Application.Exit(); // Quick exit for demonstration only.  
        });

    _hookID = SetHook(_proc);

    Application.Run();

    UnhookWindowsHookEx(_hookID);
} 
```

**笔记**

可能提供退出控制台应用程序的方法，例如，根据您的特定需求按下特殊组合键时。在里面

# python - 用于 appengine 数据存储的 Google Contact 的 Python 模型

> ID：10988199
> 
> 赞同：1
> 
> 时间：2012-06-11T22:08:08.610
> 
> 标签：python, google-app-engine, database-design, gdata, google-contacts-api

我想从[Google API v3将联系人保存在](https://developers.google.com/gdata/docs/2.0/elements?hl=fr#gdContactKind)[AppEngine 数据存储](https://developers.google.com/appengine/docs/python/datastore/datamodeling#The_Model_Class)中。我想知道存储这些数据的最佳方式是什么，尤其是在已经有模型的情况下！

查看[gdata 的来源](http://gdata-python-client.googlecode.com/hg/src/gdata/contacts/data.py)，我发现了一个非常有趣的开始。但这只是python中的数据建模，而不是数据存储。

**问题：这个模型是否已经存在于 python 中？**

如果不：

**问题：从头开始的最佳方法是什么？**

Python中联系人的开始示例：

```
class Contact(db.Model):
    """
    https://developers.google.com/gdata/docs/2.0/elements?hl=fr#gdContactKind
    https://developers.google.com/appengine/docs/python/datastore/datamodeling
    """

    content = db.Text()
    """atom:content Notes about the contact."""

    link = db.ListProperty(Link,indexed=False,default=[])
    """atom:link*   Links to related information. Specifically, atom:link[@rel='alternate'] links to an HTML page describing the contact."""

    title = db.StringProperty()
    """atom:title   Contact's name. This field is read only. To modify the contact's name, see gd:name."""

    email = db.ListProperty(Email,indexed=False,default=[])
    """gd:email*    Email addresses."""

    """etc..."""

class Link(db.Model):
    """
    Link
    """
    link = db.LinkProperty()

class Email(db.Model):
    """
    Email
    """
    email_address = db.EmailProperty()

class EmailImParent(db.Model):
  address = db.StringProperty()
  label = db.StringProperty()
  rel = db.StringProperty()
  primary = db.StringProperty()

class Email(db.Model,EmailImParent):
  """
  The gd:email element.
  """
  email =  db.EmailProperty()
  display_name = db.StringProperty() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:32:18.350

我想每个人都在自己动手。这很容易做到，您可以查看[AE-BaseApp/Python](http://ae-baseapp.appspot.com/python)并从 Github 链接中查看代码。我有一些新代码将在不久的将来更新，其中包含对联系模型的一些改进。（更新后的代码目前已被破坏，因为黑客在[此处](https://stackoverflow.com/questions/10963629/app-engine-howto-maintain-login-on-both-http-and-https-with-users-service)获取 http 和 https 的登录信息）

# c# - 从 WPF 通过 URL 打开文件

> ID：10988204
> 
> 赞同：2
> 
> 时间：2012-06-11T22:08:38.997
> 
> 标签：c#, .net, process

我想以编程方式从 SharePoint URL 打开文档。

我有以下代码：

```
Process wordProcess = new Process();
wordProcess.StartInfo.FileName 
    = "http://sharepoint/blank_site_1/document library 1/word document.docx";
wordProcess.StartInfo.UseShellExecute = true;
wordProcess.Start(); 
```

这将打开一个网络浏览器窗口并下载文件，这不是我想要的。如果我附加

```
wordProcess.StartInfo.Verb = "OpenAsReadOnly" 
```

根据（[文档](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.startinfo.aspx)）我得到一个 Win32 异常“参数不正确” `wordProcess.Start()`，尽管在`wordProcess.StartInfo.Verbs`调试器中检查时存在动词。

我有一个 POC，它通过从注册表中提取默认程序、构建命令并使用文件名启动程序来做到这一点，但如果这很容易解决，我宁愿不走这条路，就像我想做的那样使用默认程序打开一个文件（其路径恰好看起来像一个 URL）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:14:40.507

Just a guess, try this:

```
wordProcess.StartInfo.FileName = "winword.exe";
wordProcess.StartInfo.Arguments = "\"http://sharepoint/blank_site_1/document_library_1/word document file.docx\""; 
```

# html - 什么是 HTML5 缓存（清单）存储限制（由每个浏览器设置）？

> ID：10988205
> 
> 赞同：0
> 
> 时间：2012-06-11T22:08:44.080
> 
> 标签：html

我正在尝试找到一种在 iPad 浏览器、Chrome 和 FireFox（最新版本）上存储大量数据（理想情况下为 100-500 MB）的方法。

我看到有几种选择。App Cached Manifest 似乎是最好的选择，但我看不出有什么限制。

# java - 从所需的 .class 文件间接引用的 Eclipse/IVY 错误

> ID：10988210
> 
> 赞同：2
> 
> 时间：2012-06-11T22:09:47.000
> 
> 标签：java, eclipse, ivy

我会定期遇到`"type [blah] cannot be resolved. It is indirectly referenced from required .class files"`错误，并寻求帮助。

我搜索了这个站点和网络，所有[许多](https://stackoverflow.com/questions/7476092/error-in-eclipse-about-type-indirectly-referenced-from-required-class-file)[类似](https://stackoverflow.com/questions/3464592/getting-the-following-build-error-the-type-cannot-be-resolved-it-is-ind)[的](https://stackoverflow.com/questions/5547162/eclipse-error-indirectly-referenced-from-required-class-files) [问题](https://stackoverflow.com/questions/115971/indirectly-referenced-from-required-class-file)似乎都可以通过向类路径添加类来解决[。](https://stackoverflow.com/questions/5715033/java-lang-object-can-not-be-resolved-it-is-indirectly-referenced-from-required)但在这种情况下，我很确定它们已经在类路径中。

这就是从一个非常大的元项目中缩减的情况。有两个 Eclipse 项目 ProjectOne 和 ProjectTwo。

这两个项目都由构建服务器发布到 Ivy 存储库，ProjectTwo 的 ivy.xml 引用该版本的 ProjectOne。但是，我保持常春藤“解决工作区中的依赖关系”首选项处于打开状态，这样我就可以在两个项目中工作，并解析到我修改过的类而不是发布的类。

ProjectOne 在我的工作区中编译（与 ProjectTwo 一样，除了（偶尔）“从所需的 .class 文件间接引用”问题。

结构基本上是这样的：

```
// ProjectOne
   class Enum { **// I now suspect this name is the problem**
      public static class EnumObjectCache {
      }

// ProjectTwo
   class Bar { **// Occasionally gets error about Enum$EnumObjectcache being unresolvable**
   } 
```

尽管有以下事实：

1.  **这只会影响 Eclipse。真正的编译器可以毫无问题地处理这一切**
2.  ProjectTwo 的 ivy.xml 文件确实包含对 ProjectOne 的传递依赖。
3.  ProjectOne 存在于工作区中，并成功编译。
4.  我总是打开“解决工作区中的依赖关系”。
5.  不管事情如何解决，它应该工作类 Enum（和 EnumObjectCache）已经一年多没有改变了。
6.  作为一个实验，我尝试将 ProjectOne 直接添加到 ProjectTwo 的类路径中（通过将其定义为必需的项目）。没变。
7.  为了让这更有趣，这个问题并不总是发生，它只发生在这个非常大的代码库中的几个类上。哦，当它发生时，它*总是*在 Enum$EnumObjectCache 上。
8.  它不会同时发生在团队中的每个开发人员身上。
9.  问题发生时，会在多次“清理”和重新启动 Eclipse 后持续存在，并且 IVY 会重新解决。（虽然我没有做 Ivy clean-all-caches）。

    **10\. 我可以通过从 ProjectOne 引入其他不必要的 Enum 导入来“解决”问题**

注意：我以前没有尝试过清理缓存，因为它的速度非常慢（远程缓存是跨大西洋的，这是一个*非常*大的项目）：清理所有缓存并重新解析需要 55 分钟，然后再重建大约 20 分钟。

但是，在清理所有缓存、重新解析和重建之后，我仍然遇到同样的问题。

# asp.net - 断开连接的应用程序开发方法

> ID：10988211
> 
> 赞同：5
> 
> 时间：2012-06-11T22:09:49.540
> 
> 标签：asp.net, wpf, service, disconnected

我们公司在美国和加拿大部分地区的每一次灾难性事件中都有人员。一个例子是他们在卡特里娜飓风事件发生后立即非常普遍。

我们正在构建一个应用程序来改进他们在可能是 ASP.NET 或 WPF 的领域中的工作，并且断开连接要求使我们相信它将是一个 WPF 应用程序。我们的员工需要能够创造他们的工作，提供所有的保险和测量数据，并将其保存在数据库中，无论互联网是否可用。

我们试图解决的问题是，在发生灾难性事件时，即使互联网不可用，我们的员工也需要能够使用我们的新应用程序。（他们在卡特里娜飓风中离线了 3 天）

有没有其他人必须解决这样的要求，并就他们如何在小尺寸设备上运行，同时保存数据就好像它们仍然连接到后端服务和数据库一样提出建议？我们还必须将安全性纳入其中，并且做得足够好，以便他们输入的数据可以毫无问题地加载到连接的数据库中。

我们的长期目标是还为 Android 和 iPad 平板设备以及笔记本电脑提供此应用程序。我们最初对 ASP.NET 的渴望是它为我们提供了一个直接用于平板电脑环境的应用程序。在他们拥有的旧应用程序中，他们运行本地服务器，在平板电脑上运行远程连接并通过终端服务器运行应用程序。不漂亮。不漂亮。

我觉得这是一个严肃的问题，不是主观的，所以希望这不会被删除。

我们当前在服务器端的架构是具有存储库模式的实体框架、用于满足返回复合数据传输对象的 CRUD 请求的 WCF 服务以及供客户端使用的代理。

我有兴趣听取其他开发人员的意见和这个设计难题。

**添加到讨论中的其他信息**

提供了很多好资料！！！我肯定要看看 Microsoft Sync。对于断开连接的数据库，我将只在初始数据库中放置列表（枚举）。工作，如果需要，我们称之为干书的项目，将为我们正在帮助的每个客户添加。（尽管我希望在我们清洁和烘干房屋时互联网能够恢复）一旦我们有了稳定的链接，这些表格就会填充回主机。在卡特里娜飓风的情况下，我们的办公室也失去了互联网连接，这意味着办公室几天也没有提供通信救济。

昨晚我意识到我们的客户端代理是一切正常工作的关键！客户端仍然不知道它是在线还是离线，并将同步过程留在该库中。我们正在发现我们今天谈论的数据量。我还想明确一点，ASP.NET 是一种喜欢的东西，但一个胖客户端（实际上是带有 XAML 的 WPF）可能最终成为我们的最终状态。

现在 - 进行多次更新。断开连接的工作将由一个特许经营权进入各个家庭。事实上，我们的总部向特定活动派遣特定的特许经营权。所以我们减少了多人更新记录问题的可能性（如果有的话）。原因是他们正在为每项工作（人的家庭/办公室/企业）创建记录，并且只有一个专营权会处理它。当然，这也意味着如果他们断开连接数天，那么创建工作的设备（记录谁、在哪里、条件、保险公司等）也是唯一知道工作的设备。但这可以忍受。事实上，我们也许能够在集线器上同步特许经营设备。

我期待听到更多关于您如何实现断开连接的环境的故事。

谢谢！！！

**关注微软的新技术**

我被指示观看 TechEd 2012 的视频，并认为我可能有答案。演讲是关于使用 ASP.NET 和 MVC4 以及 2 个库来实现断开连接的行为。起初我认为它会很棒，但随着它的继续，它让我有点担心。

首先，使用 javascript 后端来支持断开连接的 I/O 不会产生信心。作为一名编译器专家（以及编写两种解释性语言的人），我真的不喜欢依赖于解释性 javascript 的关键业务模型。和脚本！可能是我，但这只是让我不寒而栗。

然后他们展示了他们的“伟大”（???）编程模型，让您的 ViewModel 仅作为 javascript 存在。我不喜欢用记事本编写的应用程序（asp.net 和 javascript），也可能（因为缺少智能感知）。

无意冒犯任何 asp 爱好者，但是一个编写良好的经过语法和类型检查的 C# 程序让我对软件更有信心，而不是希望和祈祷类名称空间已正确键入而没有任何交叉检查手段的东西。我已经看到了太多小时的调试，以寻找一个最终出现在一个巨大的命名空间中的错误，并且在它的名称中转置了 ie。我将我的想法与团队中的其他高级开发人员擦肩而过，我们都对这项技术达成了共识。

但我们继续看。（我觉得这更像是一本日记而不是一个问题）:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:17:32.780

看起来像是**Microsoft Sync Framework的完美示例**

[http://msdn.microsoft.com/en-us/sync/bb736753.aspx](http://msdn.microsoft.com/en-us/sync/bb736753.aspx)

> 一个全面的同步平台，支持任何数据类型、任何数据存储、任何传输协议和任何网络拓扑，支持应用程序、服务和设备的协作和离线访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T23:20:34.870

不是一个完整的答案，但太多的评论。

我有两个应用程序，一个以一种方式同步，另一种以两种方式同步。

我对客户端进行单向同步以进行断开连接的操作。在服务器完整 SQL Server 和客户端 Compact Edition。TimeStamp 是查找任何需要同步的行的完美工具。我也不会复制整个数据库，因为一些最大的表是非必要的。常见用途是用户标记他们想要同步的已识别记录。

如果同步为 Jakub 做了你需要的很棒的 +1。对我来说，我无法根据大小和安全性来同步整个 MSSQL。

有另一个以两种方式同步的较小应用程序，但在这种情况下，它有区域，并且更新仅在该区域内。所以一个区域只同步他们的数据，并且在断开模式下他们只能添加新记录。必须在连接模式下更新现有记录。那是可控的。在这种情况下，主服务器使用 MSSQL，客户端使用 XML。

对您来说没有消息，但原始同步的困难部分是两方可能已经添加或修改了相同的记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T23:00:39.400

我经常发现构建一个轻量级框架来满足我的特定需求比使用现有框架对我更有益。但是，在做出决定之前，请始终查看可用的内容并权衡利弊。

我没有使用 Microsoft Sync Framework，但听起来这是一个很好的先研究。如果您有 Sql Server Standard（或 Express 版本以外的其他版本），那么复制也可能是一种选择。

如果您想开发自己的本地解决方案，请确保将 lastupdated 和 date added 字段放在需要保持同步的任何表上。这听起来不像你的场景会受到并发问题的影响（即，如果 A 和 B 同时修改一个字段，谁会赢？）。如果是这种情况，那么开发自己的轻量级解决方案将非常简单。

正如 Jeremy 指出的那样，您将需要一种方法来进行更改。除了使用 Web 服务之外，您还可以使用在某些方面类似于 Web 服务的 WCF。但我个人偏向于仅通过 Internet 远程访问 SQL 服务器。该解决方案的缺点是增加了安全问题，而优点是减少了开发开销（即现在更快/更容易的开发以及随着时间的推移更少的维护）。此外，直接 SQL 解决方案还假设这是一个内部应用程序......您负责所有开发，而不是与需要访问您的数据并且不允许以这种方式访问​​它的第 3 方合作.

# objective-c - 如何在 iOS 中旋转时移动一个 UIView？

> ID：10988212
> 
> 赞同：1
> 
> 时间：2012-06-11T22:10:02.400
> 
> 标签：objective-c, ios, xcode, rotation

我很难弄清楚如何为我的 iPad 应用程序的一个屏幕处理不同的设备方向。这是我的情况：

~ 除一个标签外，所有屏幕都使用弹簧和支柱完美旋转。这个标签的问题是我希望它以非正统的方式（对角线）移动，因此弹簧和支柱（或调整面具的大小将不起作用）。

〜我正在考虑这样做的方式是这样的：

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)newInterfaceOrientation duration:(NSTimeInterval)duration
{
    if(UIInterfaceOrientationIsLandscape(newInterfaceOrientation))
    {
        self.myScreenLabel.frame = CGRectMake(600,0,400,100);
    }
    else {
        self.myScreenLabel.frame = CGRectMake(...//something); }
} 
```

我也会用类似的逻辑检查 viewDidLoad。 `If in portrait mode, put label at... else put label at...`.

我认为这会奏效；但是，我有点想知道是否有更好的设计方法来做到这一点。上面的方法，到处都有硬编码的数字；因此，有没有更好的方法来做到这一点？此外，这种方法没有利用这样一个事实，即我的标签在纵向模式的情节提要中完美定位，而我需要更改的只是横向。

对更好的设计有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T23:26:29.060

第一个问题，我已经用你的方法实现了方向改变的行为，没有坏结果，如果你可以在旋转发生之前触发该方法。或者，您可以使用 NSNotifications 添加方向更改触发器：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didRotate:)name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

然后添加一个方法，如：

```
 - (void) didRotate:(NSNotification *)notification {   
    UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];
    if (orientation == UIDeviceOrientationLandscapeLeft) {
        //your code here
    }
 } 
```

关于你的第二个问题，像这样定位框架很可怕，但我想你意识到了这一点。相反，定位与其他事物相关的元素，就像一个支柱（也就是说，总是相对于它被支柱之间的距离定位小部件）。因此，使用窗口的框架、视图的框架或视图中的一些其他 UIView 子类来定位对象，而不是绝对数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T23:43:19.077

A couple of thoughts:

1.  If iOS 5+, you might want to use [viewWillLayoutSubviews](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW91), probably even more important given the comments in the iOS 6 release notes re modal views and the screen reorientation methods. This also has the advantage that your code is in one spot. Since I still support pre 5 (though I won't for much longer), I actually have dynamic checking of iOS version and invoke my `viewWillLayoutSubviews` from the other methods if pre 5.0, otherwise I let `viewWillLayoutSubviews` just do the heavy lifting.

2.  If your landscape orientation is radically different, you probably want to pursue [Creating an Alternate Landscape Interface](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html#//apple_ref/doc/uid/TP40007457-CH7-SW14). I've never done this, but it seems like it's up your alley. There are also postings on SO about using different NIBs for different orientations. Not sure this makes sense in a storyboard environment, though.

3.  For these controls that we occasionally have to move around or resize based upon screen dimensions, I think most of us do it with `viewWillLayoutSubviews`. That's the entire purpose of that method (though I generally use it for labels whose height changes based upon the data contents and the screen width). I had never stopped to think that there might be another way. If you only have one control that you're moving around as you change your orientation, maybe you could create two additional, hidden controls, one for where you want your visible control in portrait, the other hidden control for where you want it in landscape (and in IB, you can toggle your view orientation to facilitate the layout of controls). Then in your `viewWillLayoutSubviews` set your frame of your actual visible control to be the frame of one of those two hidden controls (depending upon orientation, of course). That gets you out of the business of hardcoding frame coordinates in your code, and take advantage of the benefits of IB. This whole suggestion might be too cute by half, but it's an alternative approach if you don't want to go through the effort of my second point.

# javascript - d3 javascript点击函数调用

> ID：10988213
> 
> 赞同：2
> 
> 时间：2012-06-11T22:10:31.110
> 
> 标签：javascript, d3.js

我试图让 d3 在单击它们时更改绘图点的颜色，但目前似乎无法使其正常工作。下面的注释行确实将颜色从白色更改为洋红色，但 toggleColor 函数似乎没有做任何事情。实际上，警报仅在第一次运行时发生，而不是在单击某个点时发生。我在这里做错了什么？

```
var circle = graph.selectAll("circle.value")
    .data（数据）
    .enter().append("圆")
    .attr("类", "值")
    .attr("cx", function(d) { return x(d.hour); })
    .attr("cy", function(d) { return y(d.value); })
    .attr("r", 5)
    //.on("click", function(){d3.select(this).attr("class", "flagged");});
    .on("点击", toggleColor);

var toggleColor = (function(){
    // 发出警报以获得良好的度量。. .
    alert("点击了？")
    var currentColor = "白色";
    返回函数（）{

        currentColor = currentColor == "白色" ? “洋红色”：“白色”；
        d3.select(this).atrr("class", "flaged");
    }
   })();

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T00:57:15.030

首先，`var toggleColor`在您连接点击事件的地方仍然未定义（因为它在页面下方进一步定义）。所以你需要向上移动它。

然后，警报在运行时只出现一次的原因是因为那是该代码运行的时候。如果您注意到，外部函数在声明后立即执行，如`()`代码最后一行的 所示。那是`alert()`被调用的时候。您需要将它移动到内部函数的主体中——返回的那个——因为该内部函数是在点击时实际运行的代码。

# php - PHP中上传限制和发布限制的上限

> ID：10988214
> 
> 赞同：2
> 
> 时间：2012-06-11T22:10:35.910
> 
> 标签：php, mysql, phpmyadmin

我已将上传和发布限制选项更改为 8000 M。但是，当我尝试从只有 12.4 MB 的文本文件中导入表格时，我收到一条错误消息：

```
You probably tried to upload too large file. Please refer to documentation for ways to workaround this limit. 
```

8000M大吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:25:53.920

> 注意不要超过 32 位有符号整数限制（如果您使用的是 32 位版本），因为这会导致您的脚本失败。

[http://www.php.net/manual/en/ini.core.php#ini.post-max-size](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:29:16.270

我相信问题是你已经超过了 32 位进程强加的 3.2 GB 限制（8,000 MB），使用 PHP。因此，您可能无法使用您指定的全部 8,000 MB。当处理接近 2000 MB 的内存以与 32 位 PHP 一起使用时，我让 PHP 挂起代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T22:40:05.273

首先确保在 php.ini 中检查这些值

max_execution_time

最大输入时间

内存限制

我还会将您的 post_max_size 和 upload_max_size 降低到更合理的水平（例如 128 或 256M）

另外，如果您确实需要获取数据，可以从命令行进行

```
mysql -u username -p database < dump.sql 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T22:40:36.953

从下面复制并粘贴：http: [//daipratt.co.uk/importing-large-files-into-mysql-with-phpmyadmin/](http://daipratt.co.uk/importing-large-files-into-mysql-with-phpmyadmin/)

这就是我如何克服完全相同的问题。

> 当尝试使用 phpmyadmin 将大型 SQL 文件导入 mysql 时，phpmyadmin 文档提供了一些解决方案，但我发现解决这个问题的最简单方法是……</p>
> 
> 找到位于 phpmyadmin 目录中的 config.inc.php 文件。就我而言，它位于此处：？1
> C:\wamp\apps\phpmyadmin3.2.0.1\config.inc.php
> 
> 找到上面带有 $cfg['UploadDir'] 的行并将其更新为： ? 1
> $cfg['UploadDir'] = '上传';
> 
> 在 phpmyadmin 目录中创建一个名为“upload”的目录。? 1 C:\wamp\apps\phpmyadmin3.2.0.1\upload\
> 
> 然后将您尝试导入的大 sql 文件放入新的上传目录。现在，当您进入 phpmyadmin 控制台中的 db 导入页面时，您会注意到一个以前不存在的下拉菜单 - 它包含您刚刚创建的上传目录中的所有 sql 文件。您现在可以选择它并开始导入。
> 
> 如果您没有在 Windows 上使用 WAMP，那么我相信您可以轻松地将其适应您的环境。

# objective-c - 我无法打开邮件应用程序？

> ID：10988216
> 
> 赞同：1
> 
> 时间：2012-06-11T22:11:02.653
> 
> 标签：objective-c, ios, email, openurl

我正在尝试通过单击按钮打开 iOS 的邮件应用程序。

所以我这样做了：

```
NSString *mailString = [NSString stringWithFormat:@"mailto://test@test.com"];   
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:mailString]]; 
```

但没有什么特别的事情发生......有什么问题？

感谢您的建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T22:23:04.633

```
@"mailto:test@test.com" 
```

代替

```
@"mailto://test@test.com" 
```

更好的方法是使用[MFMailComposeViewController](https://stackoverflow.com/a/1513433/251012)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T17:29:36.627

And it works only on the real device, not on the simulator (in my case)

# byte - 破解一些 exe 文件 - 如何删除字节

> ID：10988219
> 
> 赞同：0
> 
> 时间：2012-06-11T22:11:16.373
> 
> 标签：byte, cracking, machine-code

今天我试图从 EXE 文件中删除一些字节。

在 EXE 中，我找到了 EXE 需要加载的文件的路径。我想更改路径，为此我必须删除一些**../../**字符。当我这样做并保存文件时，它会丢失它的图标，并且当我尝试执行它时会显示*“win32 未知格式错误” 。*

如果我不删除这些字节而是将它们替换为`0`，则图标不会丢失，并且文件看起来正确。然而，路径不正确。

因此，看起来当我删除字节时，文件内其他信息的位置丢失了，包括资源（图标）。删除这些字节后，我需要添加其他 6 个字节，以保持其他数据的大小和位置相同。我应该在哪里做？如果我在文件末尾添加这些字节，它就不起作用。你能给我一些线索吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T22:16:43.297

从字符串的开头删除 ../../ 后，在字符串的末尾粘贴六个 0 字节（我假设您可以手动识别结尾）。这样文件中所有内容的偏移量保持不变。通过完全删除 6 个字节，字符串之后的东西的偏移量会改变。通过用 0 替换 6 个字节，字符串的偏移量会发生变化（它现在实际上是在 + 6 的任何位置）。

# algorithm - 对 SHA-1 哈希进行暴力破解的最快方法是什么？

> ID：10988220
> 
> 赞同：-4
> 
> 时间：2012-06-11T22:11:29.743
> 
> 标签：algorithm, encryption, hash

我有一个哈希和该哈希的完整解密明文。我打算尝试暴力破解它，它是一个 SHA-1 FIPS 180-2 哈希。

所以我的问题是，最快的方法是什么？我正在考虑解密数据并将其与已知的明文进行比较，但后来我认为尝试对解密的数据进行散列并将其与已知的散列进行比较可能会更快。
希望以上内容有意义，但以防万一，主要问题是：

```
Plaintext : The quick brown fox jumps over the lazy dog
Hash : 2FD4E1C67A2D28FCED849EE1BB76E7391B93EB12 
```

尝试散列明文并将其与散列进行比较，或者解密散列并将其与明文进行比较更快？任何有关如何加快密钥恢复的建议都值得赞赏。这只是我玩的，我知道找到密钥需要很长时间，但是如果可以在很短的时间内完成（HUUUUGE计算能力），你会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:25:10.410

> 我有一个哈希和该哈希的完整解密明文。我打算尝试暴力破解它，它是一个 SHA-1 FIPS 180-2 哈希。

所以你有哈希和明文？

找到 SHA 的实现并验证它。这就是你所能做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T22:18:16.773

就像（几乎）总是这样，使用别人的代码比编写自己的代码要快。 [oclHashcat-plus](http://hashcat.net/oclhashcat-plus/)是一个很好的起点。

# jquery-mobile - jQuery Mobile：如何在不破坏 Web 应用程序视图的情况下链接到外部页面？

> ID：10988221
> 
> 赞同：0
> 
> 时间：2012-06-11T22:11:47.553
> 
> 标签：jquery-mobile

我创建了一个 Web 应用程序（没有浏览器 chrome），它从 index.html 本地加载其大部分页面。现在我有一个页面无法集成到 index.html 中，因为它必须在加载时刷新。我将它放在同一台服务器上，并将其命名为 stats.html 并像这样链接到它：

```
<a href="stats.html" data-role="button" rel="external">Stats</a> 
```

当我单击此链接时，浏览器会弹出到前面，而不是切换到没有浏览器 chrome 的页面。

如何以看起来仍然像一个应用程序的方式链接到外部页面？

我很感激任何解决这个问题的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T00:26:05.233

刚刚发现[https://github.com/mrmoses/jQuery.stayInWebApp](https://github.com/mrmoses/jQuery.stayInWebApp)这似乎是解决方案。

# ms-access - 如何使用日期提示创建传递查询，然后将其加载到本地表（生成表）中？

> ID：10988225
> 
> 赞同：1
> 
> 时间：2012-06-11T22:12:08.683
> 
> 标签：ms-access, vba

如何使用日期提示创建传递查询，然后将其加载到本地表（生成表）中？

我想在访问中运行它并且在它进入服务器之前我希望查询提示我输入一个日期作为条件，然后当返回结果时我希望它们存储在本地表中以供进一步处理并加入其他本地表和分析。

我知道有一种方法可以通过 VBA 做到这一点。下面是一些示例代码，但我没有看到可以将其存储到 MS Access 本地表中的部分。

```
/* SAMPLE CODE...not mine*/ 
Dim db As DAO.Database 
Dim qdExtData As QueryDef 
Dim strSQL As String 
Set db = CurrentDb 
strSQL = "SELECT * FROM TBL WHERE FIELD1 = " & 
[Forms]![Form1]![Combo6] 
Set qdExtData = db.CreateQueryDef("QRY_PASS_THROUGH") 
qdExtData.Connect = "ODBC;DSN=???;UID=???;PWD=???;DBQ=???;" 
qdExtData.SQL = strSQL 
qdExtData.Close 
db.Close 
Set db = Nothing 
/* SAMPLE CODE...not mine*/ 
```

背景信息：我使用直通查询的原因是因为我从 Peoplesoft 查询中复制了大量 SQL，其中包括一些 CASE 语句和其他 SQL 组件，Jet 引擎无法处理但我将其发送到的 Oracle 服务器能够。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:31:17.160

你为什么不试试

```
Dim db As DAO.Database 
Dim qdExtData As QueryDef 
Dim strSQL As String 

Set db = CurrentDb 

strSQL = "SELECT * FROM TBL WHERE FIELD1 = " & 
[Forms]![Form1]![Combo6] 

Set qdExtData = db.CreateQueryDef("QRY_PASS_THROUGH") 
qdExtData.Connect = "ODBC;DSN=???;UID=???;PWD=???;DBQ=???;" 
qdExtData.SQL = strSQL 
qdExtData.Close 

'Now use the Pass Thru query above as the data source for the Make table query below 
strSQL = "Select QRY_PASS_THROUGH.* INTO tblPassThruResults FROM QRY_PASS_THROUGH" 
db.Execute strSQL 

db.Close 
Set db = Nothing 
```

但是，这将工作一次，然后您必须处理删除以前的查询和表，因为上面的代码会创建新的。

更好的解决方案是在开发中创建 PassThruQuery 和表，然后在运行代码时重置它们：

```
Dim db As DAO.Database 
Dim qdExtData As QueryDef 
Dim strSQL As String 

Set db = CurrentDb 

strSQL = "SELECT * FROM TBL WHERE FIELD1 = " & 
[Forms]![Form1]![Combo6] 

'Reset the SQL statment for the query 
Set qdExtData = db.QueryDefs("QRY_PASS_THROUGH") 
qdExtData.SQL = strSQL 
'Empty the table 
strSQL = "DELETE * FROM tblPassThruResults"
db.Execute strSQL 

'Now use the Pass Thru query above to reload the table 
strSQL = "INSERT INTO tblPassThruResults Select QRY_PASS_THROUGH.* FROM QRY_PASS_THROUGH" 
db.Execute strSQL 

db.Close 
Set db = Nothing 
Watch out for your date string in the query. You may need to add delimiters. Top 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T21:58:20.053

另一种方法是将 SQL 包装在 PeopleSoft 系统中的视图中，从而简化您的 Access 代码。

PeopleSoft 还可以通过 PeopleSoft 组件生成 COM API。如果有 PeopleSoft 升级（通常是 1-2 年），这应该会简化开发并保护您的外部应用程序。PeopleSoft 中的原始 SQL 变得越来越复杂。另一种方法是通过组件接口与系统交互。

本 Oracle 手册的 p79 上有一个示例：http: [//docs.oracle.com/cd/E28461_01/psft/acrobat/pt852tcpi-b0212.pdf](http://docs.oracle.com/cd/E28461_01/psft/acrobat/pt852tcpi-b0212.pdf)

# c++ - Stealing a window into a CreateWindow window creates a "frozen" window?

> ID：10988233
> 
> 赞同：1
> 
> 时间：2012-06-11T22:13:08.867
> 
> 标签：c++, winapi

What I'm trying to do is steal a window from the screen and make it a child of my own created window. When my program closes, the stolen windows goes away too, probably along with its process.

So here are my questions:

1.  The created window is frozen, it won't let me operate its controls. Does the console prevent it from being operated? If so, how can I fix this?
2.  (code below) only steals the window on its second run, it doesn't do it in the first run and the window is still left in the taskbar.
3.  I tried doing the same except I've stolen a Chrome window into a notepad window. Same problems and when it did stole the window, everything looked completely torn apart, rendering the browser virtually inoperable.

Here's the code I used (Win32 Console Application):

```
#include <conio.h> 
#include <stdio.h>
#include <Windows.h>
#include <winuser.h>

LRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);
LPCWSTR sClassName = L"MyClass";

HWND CreateTheWindow(LPCWSTR WindowTitle) {

    // Create & register the class
    WNDCLASSEX WndClass;
    WndClass.cbSize = sizeof(WNDCLASSEX); WndClass.style = NULL; WndClass.lpfnWndProc = WndProc; 
    WndClass.cbClsExtra = 0; WndClass.cbWndExtra = 0; WndClass.lpszClassName = sClassName;
    WndClass.hInstance = NULL; WndClass.hIcon = LoadIcon(NULL, IDI_APPLICATION); 
    WndClass.hCursor = LoadCursor(NULL, IDC_ARROW); WndClass.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
    WndClass.lpszMenuName  = NULL;  WndClass.hIconSm = LoadIcon(NULL, IDI_APPLICATION);
    RegisterClassEx(&WndClass);

    // Create & show the window
    HWND hwnd = CreateWindowEx(WS_EX_STATICEDGE, sClassName, WindowTitle, WS_OVERLAPPEDWINDOW, 
        CW_USEDEFAULT, CW_USEDEFAULT, 320, 240, NULL, NULL, NULL, NULL);

    ShowWindow(hwnd, SW_SHOW); UpdateWindow(hwnd);
    return hwnd;
}

// No idea what's this for, back in JS we simply had to do window.open 
LRESULT CALLBACK WndProc(HWND hwnd, UINT Message, WPARAM wParam, LPARAM lParam) {
    switch(Message) {
        case WM_CLOSE: DestroyWindow(hwnd); break;
        case WM_DESTROY: PostQuitMessage(0); break;
        default: return DefWindowProc(hwnd, Message, wParam, lParam);
    }
    return 0;
}

// start
void main()
{
    HWND chrome = FindWindow(L"Chrome_WidgetWin_1", NULL);
    HWND mywin = CreateTheWindow(L"HELLO BOSS");

    if(chrome!=0) printf("Got Chrome\r\n"); else printf("Chrome not found\r\n");
    if(mywin!=0) printf("Got yours\r\n"); else printf("Your window not found\r\n");

    SetParent(chrome, mywin);
    SetWindowLong(chrome, GWL_STYLE, WS_CHILDWINDOW | WS_VISIBLE  ); 
    UpdateWindow(chrome); 
    UpdateWindow(mywin);

    _getch();
} 
```

Oh BTW, please don't ask me what I'm trying to achieve. :D It's a surprise.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T23:48:38.430

您似乎没有运行消息循环，这对于您自己的窗口是必需的，并且对于在子级和父级之间传递消息可能是必需的。这似乎是被盗窗户似乎被锁定的最可能原因。（可能还有其他问题，但我会从这里开始。）

尝试在你有 getch 调用的地方添加一个基本的消息循环：

```
MSG msg = {0};
while (GetMessage(&msg, NULL, 0, 0) > 0) {
    TranslateMessage(&msg);
    DispatchMessage(&msg);
} 
```

可能会有额外的困难。由于每个线程的消息队列，在另一个进程中有一个子窗口很棘手。与神话相反，它可以工作：（多进程浏览器这样做）。

您可能从 Chrome 中获取了错误的窗口。请记住，Chrome 也玩这个游戏，在不同的进程中创建子窗口。您是在抓住其中一个孩子还是主框架窗口？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:29:05.063

I eventually stole the window into Notepad. All I had to do was get rid of Notepad's child editor window and the paint issue goes away along with it.

Also the good styles that need to be applied are `WS_CHILD` on Chrome and `WS_POPUP` on Notepad, followed by `UIS_INITIALIZE` `WM_CHANGEUISTATE` message on both.

I really hope Chrome Dev doesn't change this behavior.

![enter image description here](../Images/f09b413bbb755302058067c68b8dfd4c.png)

# scala - Reading the results of a Casbah MongoDB query

> ID：10988237
> 
> 赞同：3
> 
> 时间：2012-06-11T22:13:24.597
> 
> 标签：scala, mongodb, casbah

I have a document in MongoDB that looks like this:

```
{"_id":"asdf", "data":[
    {"a":"1","b":"2"}, 
    {"a":"3","b":"4"}, 
    {"a":"5","b":"6"}, 
]} 
```

I would like to query that object using Scala, and convert the entries in "data" into a list of case classes. ~~After a few hours' work, I've yet to come up with something that even compiles. Can someone point me to a tutorial with this information? [This tutorial](http://api.mongodb.org/scala/casbah/current/tutorial.html) hasn't been any help. I've tried every combination of nested maps, fors, foreaches, casts, and pattern matching that I can come up with.~~

Edit: My super-ugly but now seemingly working code is now this:

```
def getData(source_id:String) = {
    val source = collection.findOne(MongoDBObject("_id" -> source_id)).get
    val data = source.get("data").asInstanceOf[BasicDBList]

    var ret:List[Data] = List()

    val it = presses.iterator
    while(it.hasNext) {
        val item = it.next.asInstanceOf[BasicDBObject]

        ret = Data(
            item.get("a").asInstanceOf[String],
            item.get("b").asInstanceOf[String]
        ) :: ret
    }

    ret
} 
```

Please, someone tell me there's a better way.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:46:02.757

无论如何您都在使用案例类，最简单的解决方案是只使用[salat](https://github.com/novus/salat "礼拜") - 它会自动序列化/反序列化到 mongo 连接和从一个非常少的样板连接。

一个小问题，但在您的代码中，您应该能够简单地`map`跨越 DBObject 持有结构，而不是手动改变`ret`变量：

```
val ret = presses.map { item => Data(…) } 
```

如果你真的想要一个 List，你可能需要调用 .toList （尽管你可能只需要 Seq 或 Iterable）

# android - Android：从弹出的文本字段中检索数据会引发错误

> ID：10988239
> 
> 赞同：1
> 
> 时间：2012-06-11T22:13:30.663
> 
> 标签：android

我正在尝试从单击“保存”按钮的弹出窗口中获取文本字段值。但它正在抛出错误。

代码 ：-

```
final Button btn_ContactDetails = (Button)findViewById(R.id.btn_ContactDetails);
btn_ContactDetails.setOnClickListener(new Button.OnClickListener(){

    public void onClick(View arg0) {
        LayoutInflater inflater = (LayoutInflater)getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View layout = inflater.inflate(R.layout.contactdetails, null, true);

        final PopupWindow popUp = new PopupWindow(layout, LayoutParams.WRAP_CONTENT,  LayoutParams.WRAP_CONTENT, true);
        popUp.setBackgroundDrawable(new BitmapDrawable());
        popUp.setOutsideTouchable(true);
        popUp.setTouchInterceptor(new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                if(event.getAction() == MotionEvent.ACTION_OUTSIDE) {
                    popUp.dismiss();
                    return true;
                }
                return false;
            }
        });

        Button btnDismiss = (Button)layout.findViewById(R.id.dismiss);
            btnDismiss.setOnClickListener(new Button.OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    popUp.dismiss();
                }
            });

        //On click Save - Contact Details
        Button btn_Save_ContactDetails = (Button)layout.findViewById(R.id.btn_Save_ContactDetails);
        btn_Save_ContactDetails.setOnClickListener(new Button.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                EditText mEdit, sEdit;
                mEdit = (EditText)findViewById(R.id.txt_HouseNameNumber);
                sEdit = (EditText)findViewById(R.id.txt_Address1);
                sEdit.setText(mEdit.getText().toString());//THIS LINE IS THROWING ERROR
                popUp.dismiss();
            }
        });
        popUp.showAtLocation(layout, Gravity.CENTER, 0, 0);
    }
}); 
```

错误 ：-

```
06-12 03:21:37.828: E/AndroidRuntime(518): FATAL EXCEPTION: main
06-12 03:21:37.828: E/AndroidRuntime(518): java.lang.NullPointerException
06-12 03:21:37.828: E/AndroidRuntime(518):  at sai.om.SaiActivity$3$3.onClick(SaiActivity.java:171)
06-12 03:21:37.828: E/AndroidRuntime(518):  at android.view.View.performClick(View.java:2408)
06-12 03:21:37.828: E/AndroidRuntime(518):  at android.view.View$PerformClick.run(View.java:8816)
06-12 03:21:37.828: E/AndroidRuntime(518):  at android.os.Handler.handleCallback(Handler.java:587)
06-12 03:21:37.828: E/AndroidRuntime(518):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-12 03:21:37.828: E/AndroidRuntime(518):  at android.os.Looper.loop(Looper.java:123)
06-12 03:21:37.828: E/AndroidRuntime(518):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-12 03:21:37.828: E/AndroidRuntime(518):  at java.lang.reflect.Method.invokeNative(Native Method)
06-12 03:21:37.828: E/AndroidRuntime(518):  at java.lang.reflect.Method.invoke(Method.java:521)
06-12 03:21:37.828: E/AndroidRuntime(518):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-12 03:21:37.828: E/AndroidRuntime(518):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-12 03:21:37.828: E/AndroidRuntime(518):  at dalvik.system.NativeStart.main(Native Method) 
```

谁能帮我找出我在这里做错了什么？我已经为投线错误提供了评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:21:40.630

您`findViewById()`在活动中使用，而您应该从父视图中检索它。

尝试从 v 获取视图：

```
mEdit = (EditText) v.findViewById(R.id.txt_HouseNameNumber);
sEdit = (EditText) v.findViewById(R.id.txt_Address1); 
```

或者，尝试使用`layout.findViewById()`或`arg0.findViewById()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T22:21:56.643

```
sEdit.setText( mEdit.getText());//THIS LINE IS THROWING ERROR 
```

最可能的原因是两者之一或是`sEdit`（或两者）。`mEdit``null`

仔细检查您的布局文件以确保您拥有`EditTexts`id`txt_HouseNameNumber`和`txt_Address1`. 换句话说，确保它们拼写正确并记住区分大小写。

**编辑：**也许你应该使用`layout.findViewById(...)`如下？...

```
mEdit = (EditText)layout.findViewById(R.id.txt_HouseNameNumber);
sEdit = (EditText)layout.findViewById(R.id.txt_Address1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T22:28:50.457

我认为您在复制时剪掉了一些错误消息。另外，应该是

```
sEdit.setText( mEdit.getText().toString() ); 
```

方法 setText() 期望传递一个 Editable 对象，因此通过调用 .toString() 它将更改为正确的类型。我认为这与 NullPointerException 不匹配。为此，可能无法正确初始化 sEdit 或 mEdit，这意味着您正在尝试执行 null.setText 或 sEdit.setText(null)。再次尝试再次发布错误消息，因为我无法区分可能是哪种情况。或者添加一些简单的 if 语句来检查哪个设置不正确。

# c# - Sorting list of wild card matches by specificity

> ID：10988242
> 
> 赞同：3
> 
> 时间：2012-06-11T22:13:50.930
> 
> 标签：c#, sorting

Given a list of strings like so:

```
a/b/*/lol/cats
*/*
foo/bar/**
foo/bar/*/C/** 
```

How would you sort them by specificity?

My naive approach (which works for the majority of my test cases) is as follows:

```
var sorted = wildCards
    .OrderBy(c => c.HasCatchAll)
    .ThenBy(c => c.NumWildCards)
    .ThenByDescending(c => c.Pattern.Length); 
```

In the above code the `HasCatchAll` property indicates that the string has a ** at the end (the only valid place for a **).

My reasoning for above is that anything with a `**` is less specific than a wild card without, and the more wild cards you have the less specific you are being. That said, the above will fail for:

```
*/hi/*/*
*/*/hi/* 
```

Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:53:50.233

假设您有一个比较功能，那么为您的列表构建排序算法很容易。

问题是如何定义这样的函数。也许你可以这样定义：

*   两个字符串作为输入 (a, b)
*   如果两个字符串相互匹配 => a == b
*   如果两个字符串不匹配=>更详细的比较，比如你的 HasCatch 东西......
*   如果第一个字符串匹配第二个 => a < b
*   如果第二个字符串匹配第一个 => a > b

匹配例如：`*`和`foo`。这里`*`匹配`foo`，但不是相反。

使用它，您可以覆盖此案

```
*/hi/*/*
*/*/hi/* 
```

这会说它们都相互匹配，这意味着它们具有相同的顺序。

长话短说：我认为您的解决方案不会失败。将这两个字符串定义为“相等”是有意义的，不是吗？

第二个想法：如果您在这样的字符串中优先考虑您的条目：1/2/3/4....您也可以规避您的问题..在这种情况下`*/hi/*/*`更具体

# list - 如何获取网页中列表的内容

> ID：10988243
> 
> 赞同：0
> 
> 时间：2012-06-11T22:14:01.233
> 
> 标签：list, webpage

我想从下面获取网页中列表的内容

[http://www.alzgene.org/default.asp](http://www.alzgene.org/default.asp)

像选择基因，有一些基因列表，我想从这个列表中获取所有基因，有什么办法吗？我不确定我应该联系管理员，因为它自 2011 年 4 月起停止更新 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:10:47.760

如果您知道如何在浏览器控制台中运行脚本，这里的 JS 将为您提供您想要的：

```
var options = document.getElementById('genesDDDiv').getElementsByTagName('option'),
    result = "Options: ";
for(var i = 1; i < options.length; i++) {
    result += options[i].innerHTML.replace(/<(\/)?option>/, options[i]) + ",";
}
console.log(result); 
```

结果：A2M,A2MP,ABCA1,ABCA12,ABCA2,ABCA7,ABCB1,ABCC2,ABCC8,ABCC9,ABCG1,ABCG4,ABCG5,ACAD8,ACAN,ACAT2,ACE,ACF,ACHE,ACO2,ACSL4,ACTA2,ADAM10,ADAM12, ADAM17,ADAM9,ADCYAP1R1,ADORA2A,ADORA2B,ADRA1A,ADRA2A,ADRB1,ADRB2,ADRB3,AGER,AGPAT1,AGT,AHR,AHSG,AKAP8,AKT2,ALB,ALDH18A1,ALDH2,ALOX5,ALOX5AP,ANK3,ANXA8,AP3M1, APBA1,APBB1,APBB1IP,APBB2,APEX1,APH1A,APH1B,APOA1,APOA1BP,APOA2,APOA4,APOA5,APOB,APOBEC1,APOBEC2,APOC1,APOC1P1,APOC2,APOC3,APOC4,APOD,APOE,APOE_e2/3/4, APOM,APP,AR,ARID4A,ARID5B,ARL5B,ARMS2,ARSB,ART3,ATF7,ATP6V0A4,ATXN1,ATXN8OS,AVPR1A,BACE1,BACE2,BAG3,BAT1,BCAM,BCHE,BCL2,BCL3,BCR,BDNF,BICC1, BIN1,BIRC3,BLMH,C10orf112,C12orf41,C1R,C2,C21orf55,C21orf63,C4A,C4B,CACNB2,CALHM1,CALHM2,CALHM3,CAMK1G,CAMK2G,CAND1,CARD8,CASP3,CASP4,CASP6,CASP8,CAST,CAT, CAV1,CAV3,CBLC,CBS,CCDC134,CCL2,CCL3,CCL5,CCL8,CCNT1,CCR2,CCR5,CD14,CD2AP,CD33,CD36,CD40,CDC2,CDK5,CDK5R1,CDKN2A,CDKN2BAS,CDX2,CECR2,CELF2,CETP,CFB,CFH,CH25H,CHAT,CHD4,CHRFAM7A,CHRM1,CHRNA2,CHRNA3,CHRNA4,CHRNA6,CHRNA7,CHRNB2,CHRNB4,CHST3,CLCNKB,CLPTM1,CLU,CNTF, COG2,COL11A1,COL25A1,COMT,COX10,COX15,CPE,CR1,CRH,CRHBP,CRP,CSF1,CSK,CSN1S1,CST3,CTSD,CTSG,CTSS,CXCL1,CXCL10,CXCL12,CYP17A1,CYP19A1,CYP1A1,CYP2C19, CYP2C8,CYP2D6,CYP39A1,CYP46A1,CYP4F3,DAPK1,DBH,DFNB31,DGKB,DHCR24,DKK1,DLD,DLST,DNAJC12,DNM2,DNMBP,DOPEY2,DPYS,DRD3,DRD4,DSC1,DVL1,DYRK1A,EBF3,EBP, ECE1,ECHS1,EFEMP1,EFNA5,EGR2,EIF2AK2,ENPP1,ENPP2,ENTPD7,EPC2,EPHA1,EPHA4,ERCC2,ERCC4,ESR1,ESR2,EXOC3L2,F11R,F13A1,FABP2,FABP4,FADD,FAM113B,FAM63A,FAS, FBP1,FCER1G,FDPS,FGF1,FGL2,FLOT1,FOS,FOXO3,FTSJ3,FYN,GAB2,GAL,GALP,GAPDH,GAPDHS,GBA,GBP2,GC,GCK,GLO1,GLOD4,GLP1R,GMEB1,GMEB2,GNA11, GNB3,GOLM1,GOT1,GPD1,GRB10,GRB14,GRB2,GRB7,GRIN2B,GRIN3A,GRIN3B,GRN,GSK3B,GSTM1,GSTM3,GSTM4,GSTO1,GSTO2,GSTP1,GSTT1,GSTZ1,GYS1,GYS2,HBG2,hCG2039140,HECTD2,HFE,HHEX,HIF1A,HK1,HK2,HLA,HMGCR,HMGCS1,HMGCS2,HMMR,HMOX1,HMOX2,HNF4A,HPCAL1,HPSE2,HSD11B1,HSD11B2,HSPA1A,HSPA1B,HSPA1L,HSPA5, HSPG2,HTR2A,HTR2C,HTR6,ICAM1,IDE,IFFO1,IFNG,IFT74,IGF1,IGF1R,IL10,IL18,IL1A,IL1B,IL1RN,IL33,IL4,IL6,IL8,INPPL1,INS,INSR,IREB2,IRF6, IRS1,KCNJ11,KCNJ6,KCNMA1,KIF11,KIF18B,KLF5,KLK1,KNS2,LAMB1,LCK,LDLR,LHB,LHCGR,LIPA,LIPC,LIPE,LIPF,LMNA,LOC388458,LOC439999,LOC651924,LPA,LPAR5,LPL, LRAT,LRP1,LRP2,LRP3,LRP6,LRP8,LRPAP1,LRRK2,LRRTM3,LSS,LTA,M6PR,MAGI2,MAOA,MAOB,MAPK8IP1,MAPT/STH,MARCH5,MC2R,MCM3AP,MEF2A,MEFV,MICA,MICB, MIF,MINPP1,miRNA-29a/b,MME,MMP1,MMP3,MMP9,MPO,MS4A4A,MS4A4E,MS4A6A,MT-ATP6,MT-ATP8,MT-CO2,MT-CO3,MT-COI,MT-CYB, MT-DLOOP,MT-haplo,MTHFD1,MTHFD1L,MTHFR,MT-L2,MT-NC7,MT-ND1,MT-ND2,MT-ND3,MT-ND4,MT-ND4L,MTND5,MT-ND6,MTP18,港铁,MT-RNR1,MT-RNR2,MT-TG,MT-TH,MT-TI,MT-TK,MT-TQ,MT-TR,MT-TS2,MT-TT,MYH13，MYH8，MYST4，NAT1，NAT2，NCAM2，NCAPD2，NCOA2，NCSTN，NDST2，NDUFA3​​，NDUFA6，NDUFA8，NDUFB7，NDUFB8，NDUFS1，NDUFS4，NDUFS7，NEDD9，NEURL，NEUROD1，NEUROG3，NFKBIA，NGB，NGF， NGFR,NOS1,NOS2A,NOS3,NOTCH4,NP,NPC1,NPC2,NPY,NQO1,NR1H2,NR3C1,NRG1,NTRK1,NTRK2,NUDT1,NUMB,NXPH1,OAT,OGG1,OLIG2,OLR1,OPRS1,OPTN,OTC, PARP1,PAX4,PCDH11X,PCGF5,PCK1,PCK2,PCSK9,PDCD11,PDE3B,PFKM,PGAM1,PGBD1,PHKG2,PICALM,PIK3R1,PIN1,PITRM1,PKP2P1,PLA2G1B,PLAT,PLAU,PLCE1,PLCG1,PLG,PMVK, PNLIPRP1,PNMT,POMT1,POMT2,PON1,PON2,PON3,POU2F1,PPARA,PPARD,PPARG,PPARGC1A,PPIL2,PPM1H,PPP1CC,PPP1R10,PPP1R3A,PPP1R3C,PPP2R1A,PPP2R2B,PPP3CB,PRDX6,PRG1,PRKAA1,PRKAB2, PRND,PRNP,PRSS11,PRSS7,PRUNE2,PSAP,PSEN1,PSEN2,PSENEN,PSMB7,PSMB9,PTEN,PTENP1,PTGS2,PTPLA,PVRL2,PYY,PZP,RASSF4,RELN,REN,RFC1,RFTN1,RGS4,RGS6, RPS15,RPS6KA2,RTN3,RUNX1,RXRA,RXRB,RXRG,S100B,SAMSN1,SAR1A,SCARB1,SCD,SEC24C,SEL1L,SEMA4D,SEPT3,SERPINA1,SERPINA3,SERPINE1，SERPINF2，SFRP5，SGPL1，SGPP1，SH3PXD2A，SIRT1，SLC11A1，SLC11A2，SLC18A3，SLC2A2，SLC6A3，SLC6A4，SLIT1，SLK，SMAD3，SNCA，SNCAIP，SNCG，SOAT1，SOD2，SORCS1，SORCS2，SORCS3，SORL1， SORT1,SOS1,SOS2,SREBF1,SRP72,SST,STH,SUPV3L1,SYN3,TACR2,TANC2,TANK,TAP1,TAP2,TAPBPL,TARDBP,TBP,TCF2,TCF7L2,TCN1,TCN2,TET1,TF,TFAM,TFCP2, TGFB1，TGM4，THRA，TIMP1，TLL2，TLR4，TM4SF5，TMC5，TMED8，TMEM132C，TMEM63C，TNF，TNFRSF14，TNFRSF1A，TNFRSF1B，TNFRSF4，TNFRSF8，TNK1，TNMD，TOMM40，TP53，TP63，TP73，TPH1，TRAF2， TRAK2,TREM2,TRPC4AP,TSPAN15,TTR,TUBB,UBD,UBE2D1,UBE2I,UBQLN1,UCHL1,UCP2,USF1,USF2,VCL,VCP,VDR,VEGF,VLDLR,VPS26A,VPS35,VR22,WNT8B,WRN,WWC1, XRCC1,YWHAZ,ZAP128,ZNF202,ZNF292,ZWINTTANC2，TANK，TAP1，TAP2，TAPBPL，TARDBP，TBP，TCF2，TCF7L2，TCN1，TCN2，TET1，TF，TFAM，TFCP2，TGFB1，TGM4，THRA，TIMP1，TLL2，TLR4，TM4SF5，TMC5，TMED8，TMEM132C， TMEM63C,TNF,TNFRSF14,TNFRSF1A,TNFRSF1B,TNFRSF4,TNFRSF8,TNK1,TNMD,TOMM40,TP53,TP63,TP73,TPH1,TRAF2,TRAK2,TREM2,TRPC4AP,TSPAN15,TTR,TUBB,UBD,UBE2D1,UBE2I,UBQLN1, UCHL1,UCP2,USF1,USF2,VCL,VCP,VDR,VEGF,VLDLR,VPS26A,VPS35,VR22,WNT8B,WRN,WWC1,XRCC1,YWHAZ,ZAP128,ZNF202,ZNF292,ZWINTTANC2，TANK，TAP1，TAP2，TAPBPL，TARDBP，TBP，TCF2，TCF7L2，TCN1，TCN2，TET1，TF，TFAM，TFCP2，TGFB1，TGM4，THRA，TIMP1，TLL2，TLR4，TM4SF5，TMC5，TMED8，TMEM132C， TMEM63C,TNF,TNFRSF14,TNFRSF1A,TNFRSF1B,TNFRSF4,TNFRSF8,TNK1,TNMD,TOMM40,TP53,TP63,TP73,TPH1,TRAF2,TRAK2,TREM2,TRPC4AP,TSPAN15,TTR,TUBB,UBD,UBE2D1,UBE2I,UBQLN1, UCHL1,UCP2,USF1,USF2,VCL,VCP,VDR,VEGF,VLDLR,VPS26A,VPS35,VR22,WNT8B,WRN,WWC1,XRCC1,YWHAZ,ZAP128,ZNF202,ZNF292,ZWINT

# html - Dash surrounding text

> ID：10988244
> 
> 赞同：1
> 
> 时间：2012-06-11T22:14:09.443
> 
> 标签：html, css

![Design I need to convert to markup / css](../Images/3cc532d536056b05e867b114f1d12ef7.png)

Given the above **dynamically** generated text (meaning that I can't just use an image), I am trying to recreate the design using just html and css selectors.

I would like to just use a single `h4` with the containing text, but am open to other solutions. I would prefer to not use absolute positioning, but again, if that is the only way, then so be it.

I have tried surrounding with `span` tags, but those are inline elements that don't have an inherent width.

The `h4` will be nested within a `div`, though not always of the same class or id.

Any ideas or resources to get me started?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:16:21.150

Check out how they do the text underneath Contact me on this form. Pretty clean and simple. [http://www.onextrapixel.com/examples/html5-css3-contact-form/](http://www.onextrapixel.com/examples/html5-css3-contact-form/)

Here is the actual CSS that does it:

```
h1 {
font-family: 'Questrial', Verdana, sans-serif;
text-align:center;
font-size:40px;
padding:0;
margin:0 0 20px 0;
position:relative;
color:#8C8C8C;
}

/** have a nice ampersand **/
h1:after {
font-size:25px;
color:#D6CFCB;
content: '&';
text-align:center;
display:block;
width:100%;
font-family: 'Alice', Verdana, serif;
text-shadow: 0px 1px 0px #fff;
}

/** create the gradient bottom **/
h1:before {
position:absolute;
bottom:15px;
content: ' ';
text-align:center;
display:block;
height:2px;
width:100%;
background: linear-gradient(left,  rgba(255,255,255,0) 0%,rgba(182,180,180,0.7)     42%,rgba(180,178,178,0) 43%,rgba(168,166,166,0) 50%,rgba(180,178,178,0)  57%,rgba(182,180,180,0.7) 58%,rgba(238,237,237,0.3) 90%,rgba(255,255,255,0) 100%); /* W3C */
} 
```

Sorry for yet another edit, but here is an explanation. h1 { ... } styles the actual text, so "Event Schedule" for you, and h1:before { ... } does the cool line effect. h1:after { ...} does the ampersand, so this is actually where you would put your text i suppose

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T22:30:39.757

您可以做的是用 a 包装您的文本`span`并将其放入容器中`div`。

```
<div id='container'>
    <span id='text'>EVENT SCHEDULE</span>
</div>​ 
```

然后给你的容器`border-bottom`和比你的文本更小的高度（一半大小应该给你你正在寻找的效果）。

```
#container {border-bottom:solid 1px #333; text-align:center; height:10px;}
#text { background:#fff; padding:0 20px; }​ 
```

您可以在此处查看实时示例：http: [//jsfiddle.net/vzjxA/13/](http://jsfiddle.net/vzjxA/13/)

# parsing - Running JSF page Error: Failed to parse the expression [${LogModel.getLogList()}]?

> ID：10988250
> 
> 赞同：0
> 
> 时间：2012-06-11T22:14:45.963
> 
> 标签：parsing, jsf, tomcat

I am using jsf 2 along with tomcat 6, and I am trying to execute this code which is in a .xhtml page that I have:

```
 <h:dataTable value="${LogModel.getLogList()}" var="c"
            styleClass="order-table"
            headerClass="order-table-header"
            rowClasses="order-table-odd-row,order-table-even-row"
        > 
```

I do have the class logmodel and the method getLogList(), however I get this error when i launch the page:

**/testLog.xhtml @20,8 value="${LogModel.getLogList()}" Failed to parse the expression [${LogModel.getLogList()}]**

Here is the complete log of the problem:

```
javax.faces.view.facelets.TagAttributeException: /testLog.xhtml @20,8 value="${LogModel.getLogList()}" Failed to parse the expression [${LogModel.getLogList()}]
at com.sun.faces.facelets.tag.TagAttributeImpl.getValueExpression(TagAttributeImpl.java:401)
at com.sun.faces.facelets.tag.TagAttributeImpl.getValueExpression(TagAttributeImpl.java:351)
at com.sun.faces.facelets.tag.jsf.ComponentRule$ValueExpressionMetadata.applyMetadata(ComponentRule.java:107)
at com.sun.faces.facelets.tag.MetadataImpl.applyMetadata(MetadataImpl.java:81)
at javax.faces.view.facelets.MetaTagHandler.setAttributes(MetaTagHandler.java:129)
at javax.faces.view.facelets.DelegatingMetaTagHandler.setAttributes(DelegatingMetaTagHandler.java:102)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.doNewComponentActions(ComponentTagHandlerDelegateImpl.java:398)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:159)
at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)
at com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:152)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:769)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Unknown Source)
Caused by: javax.el.ELException: Failed to parse the expression [${LogModel.getLogList()}]
    at org.apache.el.lang.ExpressionBuilder.createNodeInternal(ExpressionBuilder.java:146)
    at org.apache.el.lang.ExpressionBuilder.build(ExpressionBuilder.java:172)
    at org.apache.el.lang.ExpressionBuilder.createValueExpression(ExpressionBuilder.java:216)
    at org.apache.el.ExpressionFactoryImpl.createValueExpression(ExpressionFactoryImpl.java:68)
    at com.sun.faces.facelets.tag.TagAttributeImpl.getValueExpression(TagAttributeImpl.java:385)
    ... 34 more
Caused by: org.apache.el.parser.ParseException: Encountered " "(" "( "" at line 1, column 22.
Was expecting one of:
    "}" ...
    "." ...
    "[" ...
    ">" ...
    "gt" ...
    "<" ...
    "lt" ...
    ">=" ...
    "ge" ...
    "<=" ...
    "le" ...
    "==" ...
    "eq" ...
"!=" ...
"ne" ...
"&&" ...
"and" ...
"||" ...
"or" ...
"*" ...
"+" ...
"-" ...
"/" ...
"div" ...
"%" ...
"mod" ...

at org.apache.el.parser.ELParser.generateParseException(ELParser.java:2142)
at org.apache.el.parser.ELParser.jj_consume_token(ELParser.java:2024)
at org.apache.el.parser.ELParser.DynamicExpression(ELParser.java:147)
at org.apache.el.parser.ELParser.CompositeExpression(ELParser.java:43)
at org.apache.el.lang.ExpressionBuilder.createNodeInternal(ExpressionBuilder.java:114)
... 38 more 
```

Your kind help would be greatly appreciated! Thank you

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T04:49:55.373

EL 语法`${LogModel.getLogList()}`自 EL 2.2 起才受支持，它与 Servlet 3.0 一起使用。但是您使用的是旧的 Tomcat 6 服务器，它是一个 Servlet 2.5 容器，它意味着 EL 2.1。然后您需要使用正常的 EL 2.1 语法。

```
${LogModel.logList} 
```

如果您真的坚持使用调用操作方法的新 EL 2.2 语法，那么您始终可以按照以下答案中所述安装 JBoss EL：[Invoke direct methods or methods with arguments/variables/parameters in EL](https://stackoverflow.com/questions/3284236/jsf-2-0-method-invocation/3284328#3284328)然而，这对于简单的 getter 方法，然后可以通过更简单的 EL 语法访问。

初学者的一个主要误解是他们认为这种新的 EL 2.2 语法是特定于 JSF 2.0 的。但这实际上是不正确的。造成这种混淆的原因是 EL 2.2 和 JSF 2.0 都是 Java EE 6 的一部分，但 JSF 2.0 本身向后兼容 Java EE 5（Servlet 2.5、EL 2.1 等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T22:28:11.550

1) 是`#`，不是`$`

2) 删除括号`()`和`get`. 您使用的是属性，而不是方法（即使您需要在类中定义它们）。

3) 最有可能的是，bean 名称也必须以小写字母开头（您正在访问一个对象，而不是一个类）。

```
value="#{logModel.logList}" 
```

# makefile - What is wrong with this make file? (The error is: make *** No rule to make target)

> ID：10988251
> 
> 赞同：0
> 
> 时间：2012-06-11T22:14:58.607
> 
> 标签：makefile, fortran

I'm trying to compile and run XROTOR on my Windows 7 laptop. I have downloaded Cygwin, as well as XROTOR ([http://web.mit.edu/drela/Public/web/xrotor/](http://web.mit.edu/drela/Public/web/xrotor/))

From the README...

```
Build Sequence
--------------
To install, first build the plot library in  ./plotlib  ...

 % cd plotlib
 % make libPlt.a

Then build the programs in  ./bin  ...

 % make xrotor
 % make jplot 
```

When I go to "make libPlt.a" I get an error that says:

make: * ** No rule to make target: 'libPlt.a'. Stop.

What silly mistake am I making?

Here's the make file I believe:

```
#=======================================#
# Makefile options for Xplot11 library  #
#   Set up or select a set of compile   #
#   options for your system             # 
#=======================================#

# Set library name 
PLTLIB = libPlt_gDP.a

# Some fortrans need trailing underscores in C interface symbols (see Xwin.c)
# This should work for most of the "unix" fortran compilers
DEFINE = -DUNDERSCORE

FC = gfortran
CC  = gcc
DP = -fdefault-real-8

FFLAGS  = -O2 $(DP)
CFLAGS  = -O2 $(DEFINE)
AR = ar r
RANLIB = ranlib 
LINKLIB = -L/usr/X11R6/lib -lX11 
```

Actually! I think this is the makefile (it's called makefile so I'm assuming as much)

```
#***********************************************************************
#    Module:  Makefile
# 
#    Copyright (C) 1996 Harold Youngren, Mark Drela 
# 
#    This library is free software; you can redistribute it and/or
#    modify it under the terms of the GNU Library General Public
#    License as published by the Free Software Foundation; either
#    version 2 of the License, or (at your option) any later version.
#
#    This library is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
#    Library General Public License for more details.
#
#    You should have received a copy of the GNU Library General Public
#    License along with this library; if not, write to the Free
#    Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
# 
#    Report problems to:    guppy@maine.com 
#                        or drela@mit.edu  
#***********************************************************************

#================================#
# Makefile for Xplot11 library   #
#  edit the config.make file to  #
#  set specific options for your #
#  system                        #
#================================#

# Point to your install directory
#INSTALLDIR = /home/codes/bin
#INSTALLDIR = /usr/local/lib
INSTALLDIR = .

# Use these to set default library name (overridden in config.make file) 
PLTLIB = libPlt.a
#PLTLIB = libPltDP.a

###========================================================
###  Basic plot library object files
OBJ     = plt_base.o plt_font.o plt_util.o plt_color.o \
          set_subs.o gw_subs.o ps_subs.o Xwin.o
OBJMISC =
OBJ3D   =
OBJOLD  =

###--------------------------------------------------------
###  Uncomment to add the old plot compatibility routines
OBJOLD  = plt_old.o

###--------------------------------------------------------
###  Uncomment to add the primitive 3D-view routines
OBJ3D  = plt_3D.o

###--------------------------------------------------------
###  Uncomment for f77 compiler w/o AND() and RSHIFT/LSHIFT functions.
###   This adds some functions to duplicate these using IAND and ISHFT
###   which often appear in these offending fortran's libraries.
###   The compilers that this has affected include:
###      HPUX f77
###      Absoft f77 on Linux
###
#OBJMISC = util-ops.o

###-------------------------------------------------------------------------
### Set compiler, compiler flags, name of output object library
include ./config.make

###-------------------------------------------------------------------------
### Basic make targets - build library, test programs

$(PLTLIB):  $(OBJ) $(OBJOLD) $(OBJ3D) $(OBJMISC)
    $(AR)     $(PLTLIB) $(OBJ) $(OBJOLD) $(OBJ3D) $(OBJMISC)
    $(RANLIB) $(PLTLIB)

test:  $(PLTLIB)
    (cd examples; make test)

###-------------------------------------------------------------------------
### Utility functions - install the library, clean the directory

install:  $(PLTLIB)
    mv $(PLTLIB) $(INSTALLDIR)
    $(RANLIB)   $(INSTALLDIR)/$(PLTLIB)

clean:
    -/bin/rm $(OBJ) $(OBJOLD) $(OBJ3D) $(OBJMISC)
    -/bin/rm $(PLTLIB)
    -/bin/rm plot*.ps
    (cd examples; make clean)

###-------------------------------------------------------------------------
### compile plot package routines

plt_base.o: plt_base.f pltlib.inc
    $(FC) -c $(FFLAGS)  plt_base.f

plt_color.o: plt_color.f  pltlib.inc
    $(FC) -c $(FFLAGS)  plt_color.f

plt_font.o: plt_font.f CHAR.INC SLAN.INC MATH.INC SYMB.INC
    $(FC) -c $(FFLAGS)  plt_font.f

plt_util.o: plt_util.f
    $(FC) -c $(FFLAGS)  plt_util.f

plt_3D.o: plt_3D.f
    $(FC) -c $(FFLAGS)  plt_3D.f

plt_old.o: plt_old.f pltlib.inc
    $(FC) -c $(FFLAGS)  plt_old.f

set_subs.o: set_subs.f  pltlib.inc
    $(FC) -c $(FFLAGS)  set_subs.f

gw_subs.o: gw_subs.f  pltlib.inc
    $(FC) -c $(FFLAGS)  gw_subs.f

ps_subs.o: ps_subs.f  pltlib.inc
    $(FC) -c $(FFLAGS)  ps_subs.f

util-ops.o: util-ops.f 
    $(FC) -c $(FFLAGS)  util-ops.f

Xwin.o: Xwin.c
    $(CC) -c $(CFLAGS) Xwin.c

### May need to specify these on a brain-dead make system
#.f.o:  $(FC) -c $(FFLAGS) $<
#.c.o:  $(CC) -c $(CFLAGS) $< 
```

If you need any more information, just ask!

UPDATE: I typed in "make libPLT_gDP.a"

![enter image description here](../Images/21fc879b360530c253c66ac89265d25d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:32:21.580

原来我在安装 Cygwin 时没有安装 X11 的东西。故事的道德，确保在安装 Cygwin 时检查“make”以及所有 X11 的东西（不妨也检查所有的 fortran 东西（使用搜索））。无论如何，不​​要担心 XRotor，而是下载 CRotor。查看它的文档，您应该能够弄清楚如何制作。实际上，这是 README 的一部分，您可能会发现它很有用：

```
 % cd plotlib
 % make libPlt.a

Then build the programs in  ./bin  ...

 % make xrotor
 % make jplot

Documentation
-------------
User Guide is in the  xrotor.doc  file.  If impatient, you can just
run XROTOR:

 % xrotor 
```

# ruby-on-rails - Watch video in the time they are uploaded

> ID：10988252
> 
> 赞同：4
> 
> 时间：2012-06-11T22:14:59.383
> 
> 标签：ruby-on-rails, video-streaming

It is possible to implement a feature that allows users to watch videos as they are uploaded to server by others. Is html 5 suitable for this task? But flash? Are there any read to go solutions, don't want to reinvent the wheel. The application will be hosted on a dedicated server.

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T20:06:05.703

当然有可能，数据有没有？

但是实施起来会非常困难。

此外，我对 python 不是很感兴趣，我不知道适合您要求的库或服务，但我可以涵盖视频流的基础知识。

我假设您正在谈论上传而不是流式传输的视频文件。因为，为此，显然有成千上万的解决方案......

在最简单的情况下，上传的视频已经准备好提供给您的客户，并且具有所谓的“快速启动原子”。它们是特定于容器格式的，有时会有一堆。最常见的是moov-atom。它包含大量数据并且非常复杂，但是在我们的用例中，简而言之，它包含使客户端能够使用从一开始就可用的数据立即开始播放视频的数据。

如果您有渐进式下载视频（youtube ...），则需要它，这意味着文件是从 Web 服务器提供的。您显然还没有下载完整的文件，播放器已经可以开始播放了。

如果 fastastart 原子不存在，那将是不可能的。有时是这样，但播放器无法显示进度条，因为它不知道文件有多长。

覆盖该文件后，可以上传。您将需要一个将数据直接写入缓冲区或文件的上传解决方案。（文件会更容易......）。

几乎总是这样，例如 PHP 在 tmp_dir 中创建一个文件。如果您想在上传视频时找到它，也可以指定它。

好吧，现在您可以开始逐字节读取该文件并将该数据打印到与另一个客户端的连接。只要确保不要超过已经收到和写好的东西。您可能会使用内存中设置的元数据启动上传，该元数据包含文件的当前接收字节位置和位置。

在上传开始后请求文件的任何人都可以收到整个文件，或者如果上传尚未完成，请从您的应用程序中获取。

当数据变短时，您将不得不限制数据传输或暂停它。这在客户端看来几乎是“慢速连接”。但是，您必须不时回显一些数据以防止连接关闭。但是，如果您的上传没有停止，为什么要这样做？那应该不是问题。

现在，如果您想将各种输入格式即时转码为所需的输出格式，事情就会变得有趣。

AFAIK ffmpeg 具有简洁的 API，可让您直接处理数据流。

手刹也是一个非常好的工具，但是您需要使用外部可执行文件走很长的路。

我并不真正了解您的要求，但是如果您的客户已经调好，例如在红色 5 流服务器上，将数据输入流也应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T22:31:47.183

这样做是肯定的，但它不会是微不足道的。不，我不认为你会找到一个“开箱即用”的解决方案，代表你需要很少的努力。

你说你想让：

```
users watch videos as they are uploaded to server by others 
```

好吧，这可以用两种不同的方式来解释：

1.  您的意思是您不希望用户在看到其他用户刚刚完成上传的新视频之前必须刷新页面？
2.  还是您的意思是您希望一个用户能够观看部分上传的视频（也就是另一个用户仍在上传它，而现在服务器只包含视频的部分上传）？

实施#1 一点也不难。您只需要一个 AJAX 脚本来检查新上传的视频，然后这些视频可以以您选择的任何方式提供给用户。HTML5 vs. Flash 在这里并不是真正的考虑因素。

另一方面，第二种情况需要相当多的努力。我猜 HTML5 可能还不够成熟，无法处理这种情况。如果您不打算重新发明轮子并且没有太多时间致力于此功能，那么我会说您会很不走运。您也许可以使用 ffmpeg 解析部分视频文件并将它们提供给 Flash 播放器，但我认为这是一项艰巨的任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T07:19:16.553

是的，看看 Qik， http: [//qik.com/](http://qik.com/)

“即时视频共享......视频可以实时观看（在录制时）或任何时间。”

Qik 提供开发人员 API，包括以下这些：

*   qik.stream.subscribe_public_recent -- 订阅视频（直播和录制）

*   qik.user.following -- 提供用户关注的人员列表

*   qik.stream.public_info -- 获取特定视频的公开信息

# haskell - Is there an equivalent of the Show typeclass for Data.Text?

> ID：10988253
> 
> 赞同：28
> 
> 时间：2012-06-11T22:15:02.447
> 
> 标签：haskell, text, typeclass

Everyone knows `Show`. But what about:

```
class ShowText a where
  showText :: a -> Text 
```

I can't find this anywhere. Why?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-11T23:57:17.250

直接创建文本的问题是您仍然需要在填充严格文本块之前知道其整体大小。您可以使用 Builder 方案并使用 Data.Text.Lazy 做得更好。Dan Doel 在 bytestring-show 中执行此操作，但我不知道 Text 的等效项。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-11-17T05:20:44.433

图书馆[text-show](http://hackage.haskell.org/package/text-show)现在存在并解决了这个问题。

**更新（2016 年 2 月 12 日）**

[basic-prelude](http://hackage.haskell.org/package/basic-prelude)`show`库中提供的函数也直接呈现为文本：

```
show :: Show a => a -> Text 
```

`basic-prelude`依赖项也比`text-show`. 如果您想使用`basic-prelude`，请通过将以下内容添加到源文件的顶部来省去编译的麻烦：

```
{-# LANGUAGE NoImplicitPrelude #-} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-15T09:16:10.087

对于`Int`值的特殊情况，以下是将它们转换为严格`Text`值而不`Strings`在中间阶段使用的代码：

```
import Data.Text
import Data.Text.Lazy (toStrict)
import Data.Text.Lazy.Builder (toLazyText)
import Data.Text.Lazy.Builder.Int (decimal)

showIntegral :: Integral a => a -> T.Text
showIntegral = toStrict. toLazyText . decimal 
```

模块`Data.Text.Lazy.Builder.RealFloat`为浮点值提供了类似的功能。

有了这些，我们可以定义我们自己的类型类版本`Show`：

```
import Data.Text
import Data.Text.Lazy (toStrict)
import Data.Text.Lazy.Builder (toLazyText)
import Data.Text.Lazy.Builder.Int (decimal)
import Data.Text.Lazy.Builder.RealFloat (realFloat)

class ShowText a where
    showText :: a -> Text

instance ShowText Int where
    showText = toStrict . toLazyText . decimal

instance ShowText Float where
    showText = toStrict . toLazyText . realFloat 
```

然后我们可以开始添加更多实例（例如，一个用于元组的实例很有用）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T22:31:04.693

编写自己的函数搭载功能很简单`Show`：

```
showText :: Show a => a -> Text
showText = pack . show 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-14T11:51:30.547

在[basic-prelude](https://www.stackage.org/haddock/lts-8.23/basic-prelude-0.6.1.1/BasicPrelude.html#v:tshow)和[classy-prelude](https://www.stackage.org/haddock/lts-8.23/classy-prelude-1.2.0.1/ClassyPrelude.html#v:tshow)中现在都有一个`tshow`功能。

```
tshow :: Show a => a -> Text 
```

如果您使用的是标准前奏，请尝试使用[text-show 库](http://hackage.haskell.org/package/text-show)。

# html - Loading content into iFrame

> ID：10988255
> 
> 赞同：1
> 
> 时间：2012-06-11T22:15:28.367
> 
> 标签：html, iframe

I have a html page that uses an iFrame to switch between different profiles in a gallery. Everything works fine, but I would also like to change the default profile that is loaded depending on which link the user uses to get to the page.

```
<div class="profile_container">
<iframe src="profiles/user01.html" width="900" height="440" frameborder="0" scrolling="no" name="figher_profile"></iframe>
</div> 
```

So, in short, I need to be able to specify which "user" is loaded into the iFrame.

Any suggestions?

# templates - Rails-like templates in playframework

> ID：10988256
> 
> 赞同：0
> 
> 时间：2012-06-11T22:15:38.803
> 
> 标签：templates, playframework, playframework-2.0

I'm looking for an alternative to [rails templates and yield](http://guides.rubyonrails.org/layouts_and_rendering.html#understanding-yield) in playframework, version 2.0.

Is there something similar to that? I couldn't find it by browsing the docs.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:47:07.343

我不知道rails，但在我看来，这里对playframework的解释很像： [http ://www.playframework.org/documentation/2.0.1/ScalaTemplateUseCases](http://www.playframework.org/documentation/2.0.1/ScalaTemplateUseCases)

```
@(title: String)(content: Html)
<!DOCTYPE html>
<html>
  <head>
    <title>@title</title>
  </head>
  <body>
    <section class="content">@content</section>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:20:45.833

正如 Somatik 的回答中提到的，Play 提供了一种类似于 rails 的 ERB 的默认模板语言，但它很简单，可以用您想要的任何模板引擎替换它。您可能想查看[Scalate](http://scalate.fusesource.org/)，它为 Mustache 和 SCAML/Jade（两者都非常类似于 HAML）提供模板引擎。

Play 2.0 Google group 上的[讨论](https://groups.google.com/forum/#!topic/play-framework/J3lXeRyti4M)指向有关将 Scalate 集成到 Play 2.0 应用程序的主题的进一步文档。

# java - Setter using different type in java

> ID：10988257
> 
> 赞同：0
> 
> 时间：2012-06-11T22:15:49.430
> 
> 标签：java, spring, setter, value-type

I need to write a setter for an array using spring's value annotation so it will come from properties file.

```
private String[] aList;

public String[] getAList()
{
return aList;
}

@value("a:b")
public String[] setAList(String aString)
{
aList = aString.Split(":");
} 
```

I am not sure if this is the right way to do?

Will I get the right value from string?

Thanks,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:23:30.897

getter 和 setter 对始终具有相同的类型。为了执行您想要的操作，您可以简单地将 setAList 重命名为 setAListAsColonSeparatedValues 或类似名称。此外，您的 setter 方法应该返回 void。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T23:01:14.987

如果你把它们放在你的属性文件中

```
listItems=1,2,3,4,5,6 
```

Spring会为你加载一个数组

```
@Value( "${listItems}")
  private String[] aList; 
```

如果遍历 aList 你会得到

项目 = 1 项目 = 2 项目 = 3

# sqlite - IE 是否支持 indexedDB、WebSQL 或类似于 SQLite 的数据库？

> ID：10988267
> 
> 赞同：7
> 
> 时间：2012-06-11T22:17:03.997
> 
> 标签：sqlite, internet-explorer, web-sql, indexeddb

对于 Chrome，我可以使用 IndexedDB 和 WebSQL，对于 Firefox，我可以使用 IndexedDB，IE 呢？我开发了一个使用 WebSQL 的应用程序，它在桌面 Chrome 和 Safari、iOS Safari 和 Android 浏览器上运行良好。接下来，我想将它移植到桌面 Firefox 和 IE。我正在考虑 IndexedDB，但发现 IE 并不真正支持它。我有什么选择？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T22:21:28.830

IE10 支持`IndexedDB`. 您也可以`localStorage`在 IE8+ 中使用。对于旧版本，您可以使用专有`userData`行为：[http ://www.javascriptkit.com/javatutors/domstorage2.shtml](http://www.javascriptkit.com/javatutors/domstorage2.shtml)

请注意，不推荐使用 WebSQL 数据库，并且不再维护规范。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T22:49:53.057

正如 duri 所说，WebSQL 被赋予了厄运**的咒语，但它通常是跨平台本地存储的唯一实用技术——*尤其是*在处理移动设备时。

[IE 不支持 WebSQL](http://caniuse.com/#search=websql)，并且由于编写规范的人无法就实现达成一致，因此您不太可能很快看到实现。IE10 还不是主流，所以 IndexedDB 也不是。（此外，IndexedDB 在 Chrome（旧）和 FF（新）中存在两种不同的实现，这使得它甚至无法完全稳定地进行开发。）

[localStorage 是唯一真正跨平台的选项](http://caniuse.com/#search=localstorage)，移动 Opera 是唯一的非实现者。根据我的经验，你不应该指望它在中型或大型数据集上表现良好。

** 与剧院周围的“McBeth”一样，我会要求您永远不要在任何 IndexedDB 实现附近说这些话：“Web SQL 数据库规范不再得到维护，未来版本中可能会放弃支持。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T22:38:31.203

google chrome 团队一直非常支持 IndexedDB，所以我希望 Chrome for Android 如果他们还没有它的话，很快就会得到它。在 Android 中不需要“支持”LevelDB，它只是 Chrome 使用的另一个库，就像许多其他库一样。

# ruby-on-rails - Rspec：隐式定义的主题

> ID：10988270
> 
> 赞同：3
> 
> 时间：2012-06-11T22:17:28.957
> 
> 标签：ruby-on-rails, rspec

[Rspec 隐含定义的主题文档](https://www.relishapp.com/rspec/rspec-core/v/2-10/docs/subject/implicitly-defined-subject)说：

> 虽然下面的示例演示了如何将主题用作面向用户的概念，但我们建议您保留它以支持自定义匹配器和/或隐藏其使用的扩展库。

这是否意味着，我应该尽量不叫“主题”。直接在我的规格中？如果是，我应该使用什么来代替主题对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T23:13:50.450

比较这两个例子：

```
describe "User" do
  subject { User.new(age: 42) }
  specify { subject.age.should == 42 }
  its(:age) { should == 42 }
end

describe "User" do
  let(:user) { User.new(age: 42) }
  specify { user.age.should == 42 }
end 
```

**更新**

Rspec 中有一个很酷的功能 - 命名主题：

这是大卫切利姆斯基的一个[例子](http://blog.davidchelimsky.net/2012/05/13/spec-smell-explicit-use-of-subject/)：

```
describe CheckingAccount, "with a non-zero starting balance" do
  subject(:account) { CheckingAccount.new(Money.new(50, :USD)) }
  it { should_not be_overdrawn }
  it "has a balance equal to the starting balance" do
    account.balance.should eq(Money.new(50, :USD))
  end
end 
```

当您使用它`user`而不是它时，`subject`它更具可读性（恕我直言）。但是`subject`可以让你使用不错的扩展`its(:age)`。

# meteor - 流星和保存下拉状态

> ID：10988275
> 
> 赞同：1
> 
> 时间：2012-06-11T22:17:47.160
> 
> 标签：meteor

我有两个集合'Buckets'和'Values'，有两个模板Bucket和Value，'Bucket'呈现一个子模板'Value'。服务器每秒更新一次值。Bucket 模板有两个下拉列表，我在相应的 Bucket 模型中保持状态。

我遇到的问题是每次更改下拉列表时在Firefox中都会保存状态，但不会反映模板中的更改，而是转到下拉列表中的最后一项。如果我刷新状态会正确反映。

我可以通过创建第三个名为“states”的集合来修复它，并将下拉状态保存在那里，并将相应的引用返回到 Bucket，但不必这样做会很好。

任何想法都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T01:42:05.297

下拉菜单是在 0.5.2 上不能正常工作的输入元素之一。目前在 devel 分支上对此进行了修复；您可以紧紧抓住发布，抓住机会生活在边缘，或者找到一种解决方法，例如将输入元素放在一个`{{#constant}}{{/constant}}`区域中。

# php - 保护上传的文件（php 和 html）

> ID：10988276
> 
> 赞同：1
> 
> 时间：2012-06-11T22:17:49.417
> 
> 标签：php, html, security, file-upload, upload

我有一个简单的网站，允许用户上传文件（当然还有其他内容）。我正在自学php/html。

目前该站点具有以下特点： --当用户注册时，会以他们的名字创建一个文件夹。--用户上传的所有文件都放置在该文件夹中（名称中添加了时间戳以避免任何重复问题）。--当一个文件被上传时，关于它的信息被存储在一个 SQL 数据库中。

简单的东西。

所以，现在我的问题是我需要采取哪些步骤：

*   阻止谷歌存档上传的文件。
*   禁止用户访问上传的文件，除非他们已登录。
*   防止用户上传恶意文件。

笔记：

我假设 B 会自动实现 A。我可以限制用户只上传带有 .doc 和 .docx 扩展名的文件。这足以对抗 C 吗？我会假设不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:12:15.440

您想做很多事情，而且您的问题非常广泛。

*   对于 Google 索引，您可以使用 /robots.txt。您没有指定是否还想将 ACL（访问控制列表）应用于文件，因此这可能不够，也可能不够。通过脚本提供文件可能会起作用，但您必须**非常**小心，不要使用可能会被欺骗执行代码的 include、require 或类似的东西。相反，您希望打开文件，读取它并通过文件操作原语提供它。

*   阅读“路径遍历”。您想在上传和下载中避免这种情况（如果您以某种方式提供文件）。

*   “恶意文件”的定义相当广泛。对谁恶意？例如，如果您担心自己的一方被用来分发恶意软件（您应该这样做），您可以在 uplaod 上运行防病毒软件。如果你想确保人们不会损害服务器，你至少要确保他们只能上传一堆文件类型。检查扩展和 mimetype 是一个开始，但不要相信这一点（您可以在 png 中嵌入代码，如果它通过 include() 包含它是有效的）。然后是 XSS 的问题，如果用户可以上传 HTML 内容或被解释为这样的东西。确保提供内容处置标头和非 html 内容类型。

这是一个开始，但正如你所说，还有更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T22:23:48.470

您最大的威胁将是如果有人设法上传带有`.php`扩展名的文件（或导致服务器端脚本/处理的其他扩展名）。文件中的任何代码都在您的服务器上运行，具有 Web 服务器具有的任何权限（因配置而异）。

如果上传的最终结果只是您希望能够将文件作为下载提供（而不是让某人直接在浏览器中查看它们），那么您最好将下载存储在不可访问的网络中目录，并通过脚本提供文件，该脚本强制下载并且无论扩展名如何都不会尝试执行任何内容（请参阅[http://php.net/header](http://php.net/header)）。

这也使得仅在一个人登录时才允许下载变得更加容易，而在此之前，您需要一些`.htaccess`魔法来实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T22:24:09.237

如果您不希望文件可用，则不应上传到 Web 服务器服务目录。

我建议您使用 X-Sendfile，它是指示服务器向用户发送文件的标头。您的名为“获取某某文件”的 PHP 脚本将执行您已进行的任何身份验证（我假设您已经拥有某些内容），然后返回标头。只要网络服务器可以访问该文件，它就会提供该文件。

看到这个问题：[使用 X-Sendfile 和 Apache/PHP](https://stackoverflow.com/questions/80186/using-x-sendfile-with-apache-php)

# ios - CGGradient 在 iPad 1 和 2 上无法正确显示

> ID：10988279
> 
> 赞同：1
> 
> 时间：2012-06-11T22:18:09.093
> 
> 标签：ios, ipad, gradient, quartz-graphics

我一直在尝试在我的 iOS 应用程序中为 UI 创建自己的渐变。我第一次使用 CAGradientLayer，但我对“阶梯式”外观感到失望，所以我一直在尝试 CGGradient。

```
 - (void)drawRect:(CGRect)rect
    {

        CGContextRef currentContext = UIGraphicsGetCurrentContext();

        CGGradientRef skyGradient;
        CGColorSpaceRef rgbColorspace;
        size_t num_locations = 3;
        CGFloat locations[3] = { 0.0, .5, 1.0 };
        CGFloat components[12] = { .106, .73,  .93333, 1.,
                                  0.0,  0.0 , 1.0,     1., 
                                   .106, .73,  .93333, 1\. };

        rgbColorspace = CGColorSpaceCreateDeviceRGB();
        skyGradient = CGGradientCreateWithColorComponents(rgbColorspace, components, locations, num_locations);

        CGRect currentBounds = self.bounds;
        CGPoint topLeft = CGPointMake(0.0f, 0.0f);
        CGPoint bottomRight = CGPointMake(CGRectGetMaxX(currentBounds), CGRectGetMaxY(currentBounds));
        CGContextDrawLinearGradient(currentContext, skyGradient, topLeft, bottomRight, 0);

        CGGradientRelease(skyGradient);
        CGColorSpaceRelease(rgbColorspace); 

    } 
```

我在正确显示渐变时遇到问题。我有三台 iPad——每一代人一台。渐变在 iPad 3 上看起来不错，但在 iPad 1 或 2 上却不行。这真的很奇怪。我打算截屏并发布两个差异，但更奇怪的是，屏幕截图看起来相同（是的，两者的亮度相同）。

旧 iPad 上的颜色似乎真的褪色了。我知道 iPad 3 是视网膜显示器，但我认为它肯定不止于此。

![不是一张很好的照片，但你仍然可以看到一个巨大的差异。](../Images/6bffb6094b90defb08aa4f946e2991c7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:01:37.597

正如 David Rönnqvist 指出的那样，这个问题的答案是这些设备根本不会以相同的方式显示颜色。对此没有简单的解决方案，也许解决方案会过度杀戮。

# coldfusion - 包含 if 语句的查询的 cfquery 参数

> ID：10988281
> 
> 赞同：1
> 
> 时间：2012-06-11T22:18:13.277
> 
> 标签：coldfusion, cfquery

您如何在这行代码中使用 cfqueryparam？

```
SET mailing_list = <CFIF IsDefined("FORM.mailing_list")>#FORM.mailing_list#<CFELSE>0</CFIF> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T22:33:09.580

像这样：

```
SET mailing_list = <CFIF IsDefined("FORM.mailing_list")>
    <cfqueryparam value="#FORM.mailing_list#" cfsqltype="cf_sql_integer" />
<CFELSE>
    0
</CFIF> 
```

在最近的 CFML 引擎上，您可以使用三元条件运算符：

```
SET mailing_list = <cfqueryparam value="#IsDefined("FORM.mailing_list") ? FORM.mailing_list : 0#" cfsqltype="cf_sql_integer" /> 
```

（虽然这在这里可以说是不那么可读。）

最好的方法最有可能将其参数化到您的查询之上，并完全避免任何...

```
<cfparam name="Form.mailing_list" default="0" />

...

SET mailing_list = <cfqueryparam value="#FORM.mailing_list#" cfsqltype="cf_sql_integer" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T22:31:07.953

您只需使用两个单独的 cfqueryparam

```
SET mailing_list = 
<cfif StructKeyExists(form,'mailing_lis't)>
  <cfqueryparam cfsqltype="cf_sql_varchar" value "#FORM.mailing_list#" />
<cfelse>
  0
</cfif> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T23:59:45.147

我通常`IIF`用于简短的 IF 语句：

```
SET mailing_list = <cfqueryparam value="#iif(IsDefined("form.mailing_list"), form.mailing_list, 0)#" cfsqltype="cf_sql_integer" /> 
```

否则我更喜欢“长而干净”的方式：

```
<CFIF IsDefined("FORM.mailing_list")>
   SET mailing_list = <cfqueryparam value="#FORM.mailing_list#" cfsqltype="cf_sql_integer" />
<CFELSE>
   SET mailing_list = <cfqueryparam value="0" cfsqltype="cf_sql_integer" />
</CFIF> 
```

# php - 如何使用 HTML5、jQuery、PHP 或 JavaScript 在按钮上创建编号警报？

> ID：10988284
> 
> 赞同：0
> 
> 时间：2012-06-11T22:18:45.047
> 
> 标签：php, javascript, jquery, html

我有一个 HTML 按钮，链接到具有电子邮件等功能的页面。我试图弄清楚如何通过在我的按钮上使用一个数字来提醒用户，该数字会告诉用户在他们单击按钮查看它们之前他们有多少消息。这几乎是一个没有弹出窗口的警报。如果可能的话，我更喜欢编程语言是 HTML5、jQuery、PHP 或 JavaScript。

措辞不必与我的相匹配，我只需要一个关于如何执行我要求的警报的示例。提前感谢您的帮助！

这是我的按钮的示例：

```
<form method = "link" action = "messages.html">
    <input type = "submit" value = "Messages">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:36:12.447

扩展 B7ackAnge7z 答案。

我总是建议不要使用内联 javascript。为什么？因为将来编辑很糟糕，您不可避免地需要这样做。

所以我的建议是制作一个为您执行此操作的函数。

这是 jsfiddle -> [http://jsfiddle.net/CSZ9L/](http://jsfiddle.net/CSZ9L/)

这是代码。

html

```
<input class="messageBox" type="submit" value="Messages" data-message="Heres the message" />​ 
```

javascript，包括 jQuery

```
$(".messageBox").click(function() {
 alert($(this).attr("data-message"));
});​ 
```

您可以将一类 messageBox 设置为您想要提醒消息的任何项目。然后使用 php，您可以使用您的消息填充 data-message 属性。javascript 将处理其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T22:29:16.900

要显示警报消息，请使用`onclick`：

```
<input type="submit" value="Messages" onclick="alert('hello world!')" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T22:24:44.463

```
<input type = "submit" value = "You have <?php echo getNumMessages(); ?> new mail messages. yayyyyyyyy i got mail yayyy..."> 
```

php函数

```
function getNumMessages() {
    return 5;
} 
```

# python - Qt：当似乎没有任何东西更新或重绘一棵树时

> ID：10988291
> 
> 赞同：0
> 
> 时间：2012-06-11T22:19:28.627
> 
> 标签：python, qt, tree, repaint

我已经对此进行了很多阅读，但没有找到解决方案。`update`并且`repaint`似乎没有为我的树做任何事情。我不想重建它来进行简单的重绘。我不想弄乱应用程序，因为它不是我的。我只是为它创建一个小部件。

我偶然发现了发布的答案，它似乎运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:19:29.783

我的小部件的 QTreeWidget 被称为“树”....

```
def repaintAll(self):
    """ Refresh the paint on the entire tree """
    region = self.tree.childrenRegion()
    self.tree.setDirtyRegion(region) 
```

# android - 当一个形状到达另一个形状（Android）时，如何让它停止？

> ID：10988306
> 
> 赞同：0
> 
> 时间：2012-06-11T22:21:40.620
> 
> 标签：android, animation, sprite, geometry

我只是在 Android 平台上玩基本的动画。到目前为止，我所拥有的允许用户触摸屏幕，并且以触摸为中心的圆圈将增加其半径，直到用户抬起手指或圆圈碰到屏幕边缘。我设置了一个类来存储每个圆的中心和半径，以便将每个圆都绘制到屏幕上。当一个圆撞到另一个圆时，使圆停止增加其半径的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:31:22.670

让我为你谷歌一下

[http://badasshat.blogspot.com/2010/03/2d-collision-detection-part-1.html](http://badasshat.blogspot.com/2010/03/2d-collision-detection-part-1.html)

# delphi - 将图像加载到 TImageList 并读取它们？

> ID：10988310
> 
> 赞同：7
> 
> 时间：2012-06-11T22:22:34.773
> 
> 标签：delphi

我正在尝试通过将 .jpg 转换为 bmp 然后将其保存到 imagelist1 来将 jpg 加载到 imagelist 中。

从上到下的代码片段。Selectdir 工作和 fileexists 部分工作。这用于加载文件夹中的所有图像。所有图像都以 0.jpg / 1.jpg 等命名。

然后我将 jpg 加载到 tpicture 中。设置 bmp 宽度/高度并使用与 jpg 相同的图像加载 bmp，然后将 bmp 添加到图像列表中。完成后，它应该显示第一张图片 0.jpg

两个问题，首先，如果我这样做，它只会显示 bmp 的一小块区域（左上角），但它是正确的图像。我认为这是由于选项作物。我似乎无法弄清楚如何在运行时使其选择中心？

第二，如果我把

```
Imagelist1.width := currentimage.width;
Imagelist1.height := currentimage.height; 
```

然后它显示最后一张图片。好像 `Imagelist1.GetBitmap()`没用？所以我认为修复任何一个都会很棒！欢呼海啸

```
procedure TForm1.Load1Click(Sender: TObject);
var
openDialog : TOpenDialog;
dir :string;
MyPicture :TPicture;
currentimage :Tbitmap;
image : integer;
clTrans : TColor;
begin
  Image := 0 ;
  //lets user select a dir
 SelectDirectory(Dir, [sdAllowCreate, sdPerformCreate, sdPrompt],SELDIRHELP);
  myPicture :=Tpicture.Create;
  currentimage := TBitmap.Create;
//keeps adding images as long as the file path exsist.
//thus comic pages should be renumbed to 0-XX
  while FileExists(Dir+'\'+inttostr(image)+'.jpg') do
  begin
   try
    MyPicture.LoadFromFile(Dir+'\'+inttostr(image)+'.jpg');   //load image to jpg holder
    currentimage.Width := mypicture.Width;       //set width same as jpg
    currentimage.Height:= mypicture.Height;      //set height same as jpg
    currentimage.Canvas.Draw(0, 0, myPicture.Graphic);     //draw jpg on bmp
    clTrans:=currentimage.TransparentColor;           //unknown if needed?
    //Imagelist1.Width := currentimage.Width;
    //imagelist1.Height := currentimage.Height;
    Imagelist1.Addmasked(Currentimage,clTrans);     //add to imagelist
   finally
    image := image +1;                          //add one so it adds next page
   end;
 end;
 ImageList1.GetBitmap(0,zImage1.Bitmap);
 mypicture.Free;
 currentimage.Free;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T22:44:32.907

`TImage`每次使用都会增加很多不必要的开销。

尝试这样的事情（未经测试，因为我没有一个以这种方式命名的充满图像的文件夹 - 它可以编译，尽管 <g>）。当然，如果它还没有，你需要添加`Jpeg`到你的实现子句中。`uses`

```
procedure TForm2.Button1Click(Sender: TObject);
var
  DirName: string;
begin
  DirName := 'D:\Images';
  if SelectDirectory('Select Image Path', 
                     'D:\TempFiles', 
                     DirName, 
                     [sdNewUI], 
                     Self) then
    LoadImages(DirName);
end;

procedure TForm2.LoadImages(const Dir: string);
var
  i: Integer;
  CurFileName: string;
  JpgIn: TJPEGImage;
  BmpOut: TBitmap;
begin
  i := 1;
  while True do
  begin
    CurFileName := Format('%s%d.jpg', 
                          [IncludeTrailingPathDelimiter(Dir), i]);
    if not FileExists(CurFileName) then
      Break;
    JpgIn := TJPEGImage.Create;
    try
      JpgIn.LoadFromFile(CurFileName);

      // If you haven't initialized your ImageList width and height, it
      // defaults to 16 x 16; we can set it here, if all the images are
      // the same dimensions.
      if (ImageList1.Count = 0) then
        ImageList1.SetSize(JpgIn.Width, JpgIn.Height);

      BmpOut := TBitmap.Create;
      try
        BmpOut.Assign(JpgIn);
        ImageList1.Add(BmpOut, nil);
      finally
        BmpOut.Free;
      end;
    finally
      JpgIn.Free;
    end;
    Inc(i);
  end;
  if ImageList1.Count > 0 then
  begin
    BmpOut := TBitmap.Create;
    try
      ImageList1.GetBitmap(0, BmpOut);
      Image1.Picture.Assign(BmpOut);
    finally
      BmpOut.Free;
    end;
  end;
end; 
```

# linux - Internet Explorer 应用程序兼容性 VPC 图像 sha256sums

> ID：10988311
> 
> 赞同：1
> 
> 时间：2012-06-11T22:22:40.440
> 
> 标签：linux, internet-explorer

如果有人下载了这些，或者如果有人想下载它们，您能否验证这些是否是文件的 sha25sums？

sha256sums：[http ://pastebin.com/zhrjttJc](http://pastebin.com/zhrjttJc)

这些下载自：[https ://www.microsoft.com/en-us/download/details.aspx?id=11575](https://www.microsoft.com/en-us/download/details.aspx?id=11575)

我一直无法提取它们：

```
$ unrar Windows_Vista_IE7.part06.rar

unrar 0.0.1  Copyright (C) 2004  Ben Asselstine, Jeroen Dekkers

Extracting from /home/yano/.ievms/vhd/IE7/Windows_Vista_IE7.part06.rar

Extracting  Windows Vista.vhd                                         Failed    
Extracting  Windows Vista.vmc                                         Failed    
2 Failed 
```

和：

```
$ unrar Windows_Vista_IE7.part01.exe

unrar 0.0.1  Copyright (C) 2004  Ben Asselstine, Jeroen Dekkers

Extracting from /home/yano/.ievms/vhd/IE7/Windows_Vista_IE7.part01.exe

unknown archive type, only plain RAR 2.0 supported(normal and solid archives), SFX and Volumes are NOT supported!
All OK 
```

我一直在遵循基于 Github 上的项目 ievms 的说明：[https](https://github.com/xdissent/ievms) ://github.com/xdissent/ievms 我还查看了他们的问题列表以获取错误消息，他们说下载链接不好这是几个月前的事了。我开始认为我的下载已损坏，即使我已经下载了两次。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:23:16.450

我在使用 unrar-free 时遇到了类似的问题。删除并安装 unrar（“UNRAR 4.00 beta 3 免费软件”在 Ubuntu 12.04 上为我工作）。

# jquery-mobile - 滚动页面时，JQuery Mobile 固定导航按钮不起作用

> ID：10988313
> 
> 赞同：0
> 
> 时间：2012-06-11T22:22:45.777
> 
> 标签：jquery-mobile

这是 JQuery Mobile 和 Fixed Navigation 的另一个问题。

我目前在我的标题中有一个固定的导航：

```
<div data-role="header" data-position="fixed"> 
    <h1>Page Title</h1> 
    <div data-role="navbar">
        <ul>
            <li><a href="a.html" class="ui-btn-active ui-state-persist">One</a></li>
            <li><a href="b.html">Two</a></li>
        </ul>
   </div>
</div> 
```

当 a.html 是活动页面时，我的问题虽然有时难以重现，但我已经向下滚动到页面底部并单击 b.html 的导航按钮。不寻常的部分是，当我没有向下滚动页面时，它似乎表现正确。

此外，单击似乎在更改按钮颜色的 css 中注册，但“正在加载”图标永远不会出现，并且页面永远不会加载。此外，如果我再次单击该链接（现在已经激活，如它的新颜色所示），页面将再次加载。

任何想法为什么这不能正常工作？我正在 T-Mobile 三星 Galaxy S2 上尝试这个。使用安卓 2.3。和 Jquery 移动 1.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:58:12.447

是否可能与此问题有关：
[在 scrollTop 以编程方式更改后固定定位按钮上的移动 Safari 错误...？](https://stackoverflow.com/questions/8752220/mobile-safari-bug-on-fixed-positioned-button-after-scrolltop-programmatically-ch/10439425#10439425)
和/或
[Mobile Webkit 回流问题](https://stackoverflow.com/questions/11297641/mobile-webkit-reflow-issue/11478853#11478853) ？

这些链接中提到的修复的变体对我有用：

尝试：

```
<style>
.iosfix {
  height: 101%;
  width: 101%;
  overflow: hidden;
}
</style> 
```

当你滚动时：

```
window.scrollTo(0, _NEW_SCROLLTOP_);
$('body').append($('<div></div>').addClass('iosfix'));
setTimeout(function() {
  $('.iosfix').remove();
}, 0); 
```

# c# - 当我打开 .application winform 时，小窗口“正在启动应用程序”

> ID：10988314
> 
> 赞同：0
> 
> 时间：2012-06-11T22:22:47.340
> 
> 标签：c#, winforms

我有一个很小的实验性winform：

*   20行添加代码
*   两个控件
*   数据网格视图
*   包含一个小型 Sql Server Compact db - 包含一个包含 3 行数据的表

当我启动 .application 文件时，会出现一个小窗口，上面写着“正在启动应用程序”，然后在半秒后消失，同时表单变得可见。

这很常见吗？我应该在我创建的每个 winform 中都期待这条消息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:28:24.027

听起来您正在调用 ClickOnce 部署文件。如果您直接调用 .exe，您应该不会看到“正在启动...”消息。

# android - 根据 Android 中的屏幕大小动态添加视图

> ID：10988317
> 
> 赞同：1
> 
> 时间：2012-06-11T22:23:08.393
> 
> 标签：android, dynamic, view, screen-size

我想连续添加视图（水平或垂直）。每个视图都有固定的大小和固定的填充。**如何根据设备屏幕大小决定可以动态添加多少视图。**例如，与 xhdpi 设备相比，较小的手机或带有 mdpi 的手机可能添加的视图数量较少。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:27:26.087

有许多不同的方法。

首先，您可以通过调用 getWidth() 和 getHeight() 检查容器的大小。在您的视图中，您可以覆盖 onMeasure()

```
@Override 
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec){
   int parentWidth = MeasureSpec.getSize(widthMeasureSpec);
   int parentHeight = MeasureSpec.getSize(heightMeasureSpec);
} 
```

如果您有基于屏幕大小的不同 XML 布局，您可以查看其中加载了哪一个并采取相应措施。

# c++ - g++ - 在生产环境中使用“-g”标志是个好主意吗？

> ID：10988318
> 
> 赞同：15
> 
> 时间：2012-06-11T22:23:10.650
> 
> 标签：c++, g++

只是为了提供一些上下文，我在这里谈论使用 g++ 编译 C++ 代码。

我可以看到在生产构建中包含 -g 标志将如何方便维护：如果程序意外崩溃，调试起来会容易得多。

我的问题是，包含 -g 标志是否会以任何其他方式影响输出可执行文件，而不是增加其大小？它能否以某种方式使代码变慢（例如通过关闭某些优化）？

据我了解，它不应该（文档只提到包含调试符号），但我不确定。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-11T22:28:51.033

-g 标志不影响代码生成，仅更改符号表和调试元数据。这些并不存在于可执行代码部分，因此当代码在 hte 调试器之外运行时，它们甚至不会影响性能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T22:30:38.680

我记得读过某些优化是用调试符号关闭的：[调试选项 -g 如何更改二进制可执行文件？](https://stackoverflow.com/q/89603/541686)

[谷歌搜索](http://www.google.com/search?q=do+debug+symbols+affect+performance&oq=do+debug+symbols)还显示更多与该主题相关的帖子。

不过，除非您的代码对性能非常敏感，否则我认为它不会真正影响您；而且，除此之外，我不知道有什么缺点（除了更大的二进制文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T22:36:56.287

> 我的问题是，包含 -g 标志是否会以任何其他方式影响输出可执行文件，而不是增加其大小？

不，完全有可能生成*带有*调试信息的优化二进制文件，这不会以任何方式影响正常代码（尽管该信息可能不太有用，因为有时不需要存在变量，内联函数更难调试等。 )

Debian 发行版构建带有调试信息的软件包，这些信息稍后会被剥离（有时会拆分为“调试软件包”）。

但是请注意，尺寸增加可能非常大。

# django - 有限制的 django 经理

> ID：10988319
> 
> 赞同：1
> 
> 时间：2012-06-11T22:23:25.807
> 
> 标签：django, django-managers

最近的.html

```
{% regroup galeria by subcategoria as galeria_list %}
{% for galeria in galeria_list %}

        <p>{{ galeria.grouper.titulo_pt }}</p>
        <div class="workSeriesThumbnailStrip">

        {% for item in galeria.list %}
        <a href="/galeria/{{ item.subcategoria }}/" title="{{ item.subcategoria }}">
            <img src="{{ item.thumbnail_url }}" border="0" alt="" />
        </a>
    {% endfor %}
    </div>
    </div>
{% endfor %} 
```

模型.py

```
class Subcategoria(models.Model):

    categoria = models.ForeignKey(Categoria)
    imagem_de_capa = models.ImageField(upload_to='img/capa/', null=True, blank=True)
    ...

class Galeria(models.Model):
    subcategoria = models.ForeignKey(Subcategoria) 
```

视图.py

```
def recents_pt(request):
    galeria = Galeria.objects.all()
    return render_to_response(

        'recentes.html',

        locals(),

        context_instance=RequestContext(request)) 
```

我的模型中有一些课程。我在模板中使用重组来通过子类别组织画廊。

我需要限制模板中 5 个切片中的子类别数量不起作用，因为它限制了图库。任何想法？

想过做一个经理，比如：

```
class SubCategoriaFiveManager(models.Manager):
    def get_query_set(self):
        return super(SubCategoriaFiveManager, self).get_query_set() 
```

但是经理不支持 [:5] - 限制为 5 我该如何继续？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T00:35:22.350

查询集确实支持切片。[https://docs.djangoproject.com/en/1.4/topics/db/queries/#limiting-querysets](https://docs.djangoproject.com/en/1.4/topics/db/queries/#limiting-querysets)

# visual-studio - Visual Studio 2012 asp net mvc 3 项目剃刀视图

> ID：10988328
> 
> 赞同：4
> 
> 时间：2012-06-11T22:24:39.137
> 
> 标签：visual-studio, razor, intellisense, visual-studio-2012

我在新的 Visual Studio 2012 RC 的 asp net mvc 3 项目中遇到了智能感知问题。

如果我在 VS2012 中打开 VS2010 SP1 asp net mvc 项目，cshtml 视图如下：

```
@model Intranet.Web.ViewModels.Login.LoginVM           
@{
    Model.  // dynamic expression - This operation will be resolved at runtime
} 
```

我的配置：安装了 Windows 8 x86（x64 也失败）、VS 2012 和 2010SP1。

那么，这是bug吗？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-11T22:27:53.200

添加`<add key="webpages:Version" value="1.0" />`到`<appSettings>`Web.config 中。

否则，[VS2012 将在编辑器中加载 Razor 2.0，并且不会应用 MVC 配置设置](http://blog.slaks.net/2012/06/visual-studio-2012-and-webpagesversion.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:49:50.120

在更改生效之前，您必须重新启动 VS 2012。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:56:14.197

当我遇到问题时，我尝试了这个解决方案，以及你修改文本编辑器 -> 格式化 -> 客户端标签的解决方案，但在我的情况下都没有帮助。一段时间后我再次启动安装程序并点击升级按钮。由于某种原因，一些组件在早期没有成功安装。之后一切都开始正常工作，所以也检查一下:)。

# c# - 使用 SQL Azure 进行多对多流畅的 NHibernate 映射

> ID：10988331
> 
> 赞同：1
> 
> 时间：2012-06-11T22:24:58.810
> 
> 标签：c#, azure, fluent-nhibernate, nhibernate-mapping, azure-sql-database

由于 SQL Azure 需要每个表的聚集索引以进行复制（请参见此处[http://blogs.msdn.com/b/sqlazure/archive/2010/05/12/10011257.aspx](http://blogs.msdn.com/b/sqlazure/archive/2010/05/12/10011257.aspx)），我已将以下 MsSqlAzureDialect 添加到我的 MsSqlConfiguration 中：

```
public class MsSqlAzureDialect : MsSql2008Dialect
{
    public override string PrimaryKeyString
    {
        get { return "primary key CLUSTERED"; }
    }
} 
```

但是，这并不能解决我目前在使用多对多表时遇到的问题。我目前的情况是，我有一个具有角色的用户，一个具有用户的角色。所以用户和角色之间存在多对多的关系，以及由 NHibernate 生成的链接表。所以在我的 UserAutomappingOverride 我有这样的东西：

```
public class UserAutomappingOverride : IAutoMappingOverride<User>
{
    public void Override(AutoMapping<User> mapping)
    {
        mapping.HasManyToMany(x => x.Roles).Cascade.SaveUpdate();
    }
} 
```

这导致 NHibernate 创建一个名为 RoleToUser 的链接表。但是，此表没有 PK，因此没有聚集索引。这是在 SQL Azure 中使用的无效表配置。

我尝试使用来自非流利 NHibernate 的数据库对象，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<nhibernate-mapping>
    <database-object>
        <create>create clustered index ix on RoleToUser(User_id, Role_id)</create>
        <drop>drop index RoleToUser.ix</drop>
    </database-object>
</nhibernate-mapping> 
```

但这是在黑暗中尝试将非流利的 NHibernate 代码组合到流利的配置中。但是它不起作用，因为错误提示“出于安全原因，此 XML 文档中禁止使用 DTD...”

注意：我使用 fluent NHibernate 进行代码优先数据库创建。所以我实际上是在使用我的实体和 AutomappingOverrides 在部署时生成数据库的架构。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:02:16.270

要使用主键生成映射表，您可以使用 IBag。根据我的研究，Fluent NHibernate 尚不支持此功能，但您可以使用 Fluent NHibernate 将 hbm 文件与您的类映射和/或自动映射一起映射，以获取 Fluent NHibernate 不直接支持的功能。

这是一个将用户映射到角色的快速示例：

**程序.cs**

```
class Program
{
    static void Main(string[] args)
    {
        DatabaseContextFactory.CreateSchema();

        var user = new User();
        user.Roles = new List<Role>();
        var role = new Role();
        user.Roles.Add(role);

        ISessionFactory sessionFactory = DatabaseContextFactory.CreateSessionFactory();

        using (ISession session = sessionFactory.OpenSession())
        {
            using (ITransaction transaction = session.BeginTransaction())
            {
                session.SaveOrUpdate(role);
                session.SaveOrUpdate(user);
                transaction.Commit();
            }
        }
    }
} 
```

**数据库上下文工厂.cs**

```
public static class DatabaseContextFactory
{
    static ISessionFactory _sessionFactory;
    static Configuration _configuration;

    public static ISessionFactory CreateSessionFactory()
    {
        if (_sessionFactory == null)
        {
            _sessionFactory = Fluently.Configure()
                .Database(MsSqlConfiguration.MsSql2008.ConnectionString(cs => cs.FromConnectionStringWithKey("SurrogateExample")))
                .ExposeConfiguration(c => _configuration = c)
                .Mappings(cfg => cfg.HbmMappings.AddFromAssemblyOf<Program>())
                .BuildSessionFactory();
        }

        return _sessionFactory;
    }

    public static void CreateSchema()
    {
        CreateSessionFactory();
        new SchemaExport(_configuration).Execute(false, true, false);
    }
} 
```

**用户.hbm.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                                     assembly="SurrogateManyToManyExample"
                   namespace="SurrogateManyToManyExample.Entities">
    <class name="User" table="[User]">
        <id name="Id">
            <generator class="guid.comb" />
        </id>

        <idbag name="Roles" table="UserInRole" lazy="true">
            <collection-id column="Id" type="Guid">
                <generator class="guid.comb" />
            </collection-id>
            <key column="UserId" />
            <many-to-many column="RoleId" class="Role" fetch="join" />
        </idbag>
    </class>
</hibernate-mapping> 
```

**角色.hbm.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                                     assembly="SurrogateManyToManyExample"
                   namespace="SurrogateManyToManyExample.Entities">
    <class name="Role" table="[Role]">
        <id name="Id">
            <generator class="guid.comb" />
        </id>       
    </class>
</hibernate-mapping> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T02:36:13.363

所以@Derek Greer 的回答很棒。但是，我不希望有太多混合的休眠和流畅的休眠环境。

所以我最终要做的是，因为这些都是将聚集索引添加到 SQL Azure 的链接表的小技巧，所以我最终要做的是添加一个专门用于添加聚集索引的 hbm 文件。这样，每当在自动映射中流畅地向对象添加多对多关系时，开发人员都可以手动向文件添加一行，如下所示。这实际上非常接近我之前找到的答案，但我只是对非流利的 nhibernate 了解得不够多，无法知道我在加载 hbm 文件时做错了什么。所以，这里是：

**ManyToManyClusteredIndexes.hbm.xml**

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
namespace="Bookstore.Data.HbmMappings"
assembly="Bookstore.Data.HbmMappings">
    <database-object>
        <create>create clustered index ix on RoleToUser(User_id, Role_id)</create>
        <drop>drop index RoleToUser.ix</drop>
    </database-object>
    <database-object>
        <create>create clustered index ix on RoleToRoleGroup(RoleGroup_id, Role_id)</create>
        <drop>drop index RoleToRoleGroup.ix</drop>
    </database-object>
</hibernate-mapping> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T23:20:55.180

我有一个在 Azure 中工作的这样的结构

```
CREATE TABLE [dbo].[ClientLabel](
    [ClientId] [bigint] NOT NULL,
    [LabelId] [bigint] NOT NULL,
 CONSTRAINT [PK_ClientLabel] PRIMARY KEY CLUSTERED 
(
    [ClientId] ASC,
    [LabelId] ASC
) WITH (..) ON [PRIMARY]
) ON [PRIMARY] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T11:40:22.460

我正在研究这个主题很长时间，因为我不想改变流利的 nhibernate 和 nhibernate 代码，所以我决定做这个解决方法：

我已经有一个控制台应用程序正在初始化数据库环境（本地或天蓝色），在流畅的 nhibernate 数据库创建结束后，我刚刚删除了 ManyToMany 表，并按照天蓝色的预期重新创建它们：

```
drop table ProfileLikes
CREATE TABLE ProfileLikes(
    [ProfileID] [bigint] NOT NULL,
    [LikeID] [bigint] NOT NULL,
    PRIMARY KEY CLUSTERED 
(
    [ProfileID],[LikeID]  ASC
)
) 

ALTER TABLE ProfileLikes  WITH CHECK ADD  CONSTRAINT [FK6FB4BC1C85106EB3] FOREIGN KEY([LikeID])
REFERENCES [dbo].[Likes] ([Id])
ALTER TABLE ProfileLikes CHECK CONSTRAINT [FK6FB4BC1C85106EB3]

ALTER TABLE ProfileLikes  WITH CHECK ADD  CONSTRAINT [FK6FB4BC1CA12A6EC5] FOREIGN KEY([ProfileID])
REFERENCES Profiles ([Id])

ALTER TABLE ProfileLikes CHECK CONSTRAINT [FK6FB4BC1CA12A6EC5] 
```

希望能帮助到你。阿米尔

# iphone - UIImagePickerController 相机并不意味着“可用”？

> ID：10988333
> 
> 赞同：0
> 
> 时间：2012-06-11T22:25:12.153
> 
> 标签：iphone, objective-c, uiimagepickercontroller

这听起来可能很愚蠢，但是当我运行我的应用程序时，它`UIImagePickerController`适用于照片库，但不适用于相机导入。我猜这是正常的，因为我的电脑没有“连接”到 iPhone 相机，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:35:03.343

如果您正在使用模拟器尝试使用`UIImagePickerController` `Camera`拍照。它不起作用，您需要从实际设备上进行测试。

# iphone - iPhone UIWebView blanks with special characters on URL

> ID：10988334
> 
> 赞同：0
> 
> 时间：2012-06-11T22:25:16.963
> 
> 标签：iphone, ios, character-encoding, uiwebview

Simple thing I'm doing is connecting to retrieving user's name from Facebook and passing it to a web site as a parameter in the form of:

[http://website.com?name=](http://website.com?name=)

However ios's UIWebView fails being able to load the url if the name has special characters used commonly in foreign names: Such as this one [fb link](http://graph.facebook.com/dogdemir)

I retrieve the title, keep it in an NSString and pass it and append it to the URL.

What do you think can be the cause and how can I possibly fix it? I am fine with the name appearing incorrectly or with special characters encoded with numbers but it just fails.

Anyone came across this?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T00:08:24.037

You can try encoding URL encoding the parameter. Just google for "ios encode url", ir this link [http://madebymany.com/blog/url-encoding-an-nsstring-on-ios](http://madebymany.com/blog/url-encoding-an-nsstring-on-ios)

# apache - Apache/Server X 转发到 node.js 性能

> ID：10988336
> 
> 赞同：3
> 
> 时间：2012-06-11T22:25:33.163
> 
> 标签：apache, node.js

我开始使用 node.js 构建一个轻量级、高需求的 REST 平台来构建一些内部应用程序。一个问题与我的开发环境以及 Apache 和 node.js 共存有关。让它们共存没有问题，因为有很多关于如何通过让 Apache 将请求重定向到节点来“共享”端口 80 的帖子：

[http://arguments.callee.info/2010/04/20/running-apache-and-node-js-together/](http://arguments.callee.info/2010/04/20/running-apache-and-node-js-together/) [http://www.readwriteweb.com/hack/2010/12/how-to-run- apache-and-nodejs.php](http://www.readwriteweb.com/hack/2010/12/how-to-run-apache-and-nodejs.php)

和节点代理到 Apache：

[https://github.com/nodejitsu/node-http-proxy](https://github.com/nodejitsu/node-http-proxy)

然而，一个似乎想要解决的问题与代理时的性能“命中”有关，特别是在使用 Apache 代理节点时。虽然我的生产环境将是一个纯 node.js 解决方案，侦听端口 80，但理论上不会让 Apache 介入并处理初始 I/O，这几乎会破坏使用 node.js 的大部分性能优势，从我/O 视角？如果此框收到数千个请求、长轮询等，Apache 重定向是否不会产生许多线程，然后传递给单线程 node.js？

正如我所说，对 node 来说是新手，所以只是试图让我的头脑围绕这个问题向前发展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:47:20.803

你的基本想法是对的。

让 Apache 处理请求首先使其成为链的一部分，如果它是链中最薄弱的环节，它可能会减慢您的应用程序。

在标准配置中，如果并发请求的数量很少，Apache 并不慢，但是处理的请求越多，Apache 使用的 RAM 就越多。如果您使用一些持久连接，您可以轻松地达到一些限制。

Apache 有不同的 MPM（多处理模块）。默认情况下，它使用`mpm_prefork`已知的内存消耗量（每个连接一个线程）。
您可以切换到`mpm_worker`使用与 node.js 类似的模型来处理连接更适合您尝试归档的任务类型。（事件连接处理，但它与其他模块 [like `mod_php`] 有一些怪癖，不再是线程安全的。）

与往常一样，最好的解决方案是：尝试不同的东西，做一些基准测试，然后选择最适合你的。

# variables - SSIS Ole DB 目标动态表名称

> ID：10988337
> 
> 赞同：2
> 
> 时间：2012-06-11T22:25:37.757
> 
> 标签：variables, ssis, business-intelligence, oledbconnection

我有一组平面文件（114 个文件），每个文件都用数据库表名命名。我有数据库模式，所以我的数据库已经准备好了，里面没有记录。

我所要做的就是处理这些平面文件并将这些记录插入相应的表中。

我创建了一个 SSIS 包，我正在尝试在 Ole DB 目标中设置动态表名。

我使用变量来设置动态表名。

我的包裹是这样的![在此处输入图像描述](../Images/7c8fb8facda1f52e4107745522f53a19.png)

在脚本任务中，我正在为变量设置值

```
 public void Main()
        {
            // TODO: Add your code here

            string _path = string.Empty;
            if(Dts.Variables["FilePath"] != null)
                _path = Dts.Variables["FilePath"].Value.ToString();
            //MessageBox.Show(_path);
            //Variables vars = default(Variables);
            //Dts.VariableDispenser.LockForWrite("TableName");
            //vars["TableName"].Value = _path.Replace(@"C:\Users\GD\", "").Replace(".txt", "");
            Dts.Variables["TableName"].Value = _path.Replace(@"C:\Users\GD\","").Replace(".txt","");
            MessageBox.Show(_path + Environment.NewLine +"TableName: " + Dts.Variables["TableName"].Value.ToString());
            Dts.TaskResult = (int)ScriptResults.Success;
        } 
```

messageBox 给了我预期的数据。但 Ole DB 目标表无法识别来自第二个循环的表名。

变量 ![在此处输入图像描述](../Images/6a0c5561300f6dda4abd34843e56c138.png)

Ole DB 目标设置 ![在此处输入图像描述](../Images/69713f91a9823cbee44bb4b0dae581b3.png)

### 错误信息：

```
[OLE DB Destination [55]] Error: Column "ActiveCompositionGenericID" cannot be found at the datasource. 
```

“ActiveCompositionGenericID”这是第一个目标表和第一个源文件中的列。

对于循环中的第二个文件，这在源文件中是不应该的（正在发生），这也不应该在目标表中。

此错误消息向我证实，目标表仍指向第一个表名，并且没有更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:03:02.210

如果这些文件和目标表的结构相同，那么您尝试执行的操作将起作用。否则，将加载第一个文件，但一旦输入文件中的[元数据发生更改](https://stackoverflow.com/questions/10686785/ssis-pkg-with-flat-file-connection-with-fewer-columns-will-fail/10696025#10696025)，该过程将失败。

上述模式在 DTS 中可以正常工作，但对 SSIS 无效。

# c++ - C++ 在调用 std::unique_lock 之前解锁 std::mutex 等待

> ID：10988338
> 
> 赞同：3
> 
> 时间：2012-06-11T22:25:50.757
> 
> 标签：c++, locking, race-condition, stdthread

我有一个带有管理器（树类）的多线程应用程序（使用 std::thread），它在不同的子树（嵌入式结构子树）上并行执行一些代码。基本思想是 SubTree 的每个实例都有一个存储对象的双端队列。如果双端队列为空，则线程等待直到在双端队列中插入新元素或达到终止条件。一个子树可以生成对象并将它们推送到另一个子树的双端队列中。为方便起见，我所有的 std::mutex、std::locks 和 std::variable_condition 都存储在一个名为“locks”的结构中。

Tree 类创建了一些运行以下方法的线程（第一次尝试）：

```
void Tree::launch(SubTree & st, Locks & locks )
{
/* some code */

std::lock_guard<std::mutex> deque_lock(locks.deque_mutex_[st.id_]) ; // lock the access to the deque of subtree st
if (st.deque_.empty())  // check that the deque is still empty
{
    // some threads are still running, wait for them to terminate

    std::unique_lock<std::mutex> wait_lock(locks.restart_mutex_[st.id_]) ;
    locks.restart_condition_[st.id_].wait(wait_lock) ;   
}

/* some code */
} 
```

问题是“deque_lock”在线程等待时仍然被锁定。因此，并发对象不能在当前线程的双端队列中添加任何对象。

所以我把 lock_guard 变成了一个 unique_lock 并手动管理锁定/解锁：

```
void launch(SubTree & st, Locks & locks )
{
/* some code */

std::unique_lock<std::mutex> deque_lock(locks.deque_mutex_[st.id_]) ; // lock the access to the deque of subtree st
if (st.deque_.empty())          // check that the deque is still empty
{
    deque_lock.unlock() ; // unlock the access to the deque to enable the other threads to add objects

    // DATA RACE : nothing must happen to the unprotected deque here !!!!!!

    // some threads are still running, wait for them to terminate

    std::unique_lock<std::mutex> wait_lock(locks.restart_mutex_[st.id_]) ;
    locks.restart_condition_[st.id_].wait(wait_lock) ;   
}

/* some code */
} 
```

现在的问题是存在数据竞争，我想确保在“deque_lock.unlock()”指令之后直接执行“等待”指令。有人知道用标准库创建如此关键的指令序列的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-11T22:40:03.047

最好**不要假设**，当您从等待条件变量返回时，您等待**的条件已满足**。

我宁愿把这段代码写成：

```
std::unique_lock<std::mutex> deque_lock(locks.deque_mutex_[st.id_]);
while(st.deque_.empty())
{
    deque_lock.unlock();
    std::unique_lock<std::mutex> wait_lock(locks.restart_mutex_[st.id_]);
    locks.restart_condition_[st.id_].wait(wait_lock);   
    deque_lock.lock();
} 
```

此代码保证，在此之后您的队列不为空。[`std::condition_variable::wait`](http://en.cppreference.com/w/cpp/thread/condition_variable/wait)甚至可以带一个谓词来模拟这种行为之王（但是，由于队列锁定，它不能在这里使用）。

# jsf - 如何限制在会话中存储主要面孔应用程序的视图数量

> ID：10988341
> 
> 赞同：5
> 
> 时间：2012-06-11T22:26:00.957
> 
> 标签：jsf, jsf-2, primefaces

我们在我们的应用程序中使用 primefaces 2.2.1 版本。我们希望将会话中存储的视图数量限制为 3。我已将 web.xml 配置为：

```
<context-param>
    <description>State saving method: 'client' or 'server' (=default).See JSF  Specification 2.5.2</description>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>server</param-value>
</context-param>

<context-param>
    <description>The maximum number of logical views (GET requests) to store per session (http://tinyurl.com/yw6f2e)</description>
    <param-name>com.sun.faces.numberOfLogicalViews</param-name>
    <param-value>3</param-value>
</context-param>

<context-param>
    <description>The maximum number of JSF views (POST requests) stored in the session for per logical view (http://tinyurl.com/yw6f2e)</description>
    <param-name>com.sun.faces.numberOfViewsInSession</param-name>
    <param-value>3</param-value>
</context-param> 
```

看来，此配置不起作用。当我查看内存堆转储时，我发现 15 个视图存储在会话中。

使用 Primefaces 2.2.1，在 Mojarra 2.0.9 上运行的 JSF 2.0.9

有任何想法吗...

# iis-7 - 为什么我不能在 IIS7 (windows server 2008) 上启用表单身份验证

> ID：10988342
> 
> 赞同：1
> 
> 时间：2012-06-11T22:26:01.380
> 
> 标签：iis-7, asp-classic, forms-authentication, windows-server-2008

我对 IIS7 和 Windows Server 2008 完全陌生。要设置我正在做的事情的上下文：我必须将经典的 ASP Web 应用程序从 Windows Server 2000 (IIS6) 迁移到 Windows Server 2008 (IIS7)。经典的 ASP 应用程序使用表单身份验证来限制我的 SQL 服务器数据库上定义的用户名和角色的页面访问。

当我在 IIS7 上配置我的网站时......我发现没有表单身份验证选项，只有匿名。 [根据本文](http://weblogs.asp.net/zroiy/archive/2008/08/17/missing-windows-authentication-provider-for-iis-7-on-windows-server-2008.aspx)，我从服务器管理器添加了所有可用的附加“安全”和“应用程序开发”角色服务，期望表单身份验证随后可用。我会发布屏幕截图......但还不能因为我是新用户。无论如何...这给了我 3 种新的身份验证类型：

1.  基本认证
2.  摘要认证
3.  Windows 身份验证

...但是表单身份验证仍然不可用。

除此之外，我还尝试使用以下两个命令启用[本文中的表单身份验证：](http://technet.microsoft.com/en-us/library/cc771077%28v=ws.10%29.aspx)

*   appcmd 设置配置 /commit:WEBROOT /section:system.web/authentication /mode:Forms
*   appcmd 设置配置 /commit: /section:system.web/authentication /mode:Forms

我意识到（或者我相信）第一个命令意味着我正在使用 .Net 来加强安全性......我（还没有）。无论如何，这两个都成功执行了......但都没有启用表单身份验证。

对于纯粹的 ASP 经典站点，甚至可能无法在 Windows Server 2008 上的 IIS7 中启用表单身份验证，但我发布的第一个链接中的屏幕截图似乎表明我应该能够启用它。我想知道是否必须创建一个 asp.net 站点才能启用表单身份验证...然后配置 asp.net 以管理带有 *.asp（经典 ASP）文件类型的文件的安全性. 有人对我有任何见解吗？这太令人沮丧了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:01:28.193

表单身份验证实际上是“匿名的”，因为您的应用程序负责身份验证并且不以任何方式依赖 Windows 身份验证机制。我在这里缺少什么吗？这个应用程序是罐装应用程序还是您正在编码的东西？

# c# - 读取 UTF8 文件，问题

> ID：10988343
> 
> 赞同：3
> 
> 时间：2012-06-11T22:26:12.223
> 
> 标签：c#, file-io, utf-8

我正在阅读一个使用 UTF-8 编码的文本文件。某些文件行包含重音符号。像这样的东西：`EdiçÃo`。但在控制台和 LINQPad 输出上`Edi��o`而不是。

这是我读取文件的方法：

```
File.ReadAllLines("foo.txt", Encoding.UTF8); 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T22:28:49.043

我不能说 LINQPad 有什么问题，但控制台可能设置为不同的代码页，并且其字体中没有这些字符。请参阅[Windows 命令行中的 Unicode 字符 - 如何？](https://stackoverflow.com/questions/388490/unicode-characters-in-windows-command-line-how)

# php - Kohana 3.2 PHP5 控制器动作未调用

> ID：10988344
> 
> 赞同：0
> 
> 时间：2012-06-11T22:26:14.113
> 
> 标签：php, model-view-controller, kohana

这里的新手试图为某个慈善组织维护一个 PHP 网站，但无法调用控制器操作：

在*/application/classes/controller*下，

我有一个名为*history.php*的文件。该文件的内容如下所示：

```
<?php defined('SYSPATH') or die('No direct script access.');

class Controller_History extends Controller_Template {

    public function action_index()
    {   
        $this->response->body('hello, world!');     
    }       
} 
```

当我转到 mydomain.com/history 时，我收到错误 404，指示在此服务器上找不到请求的 URL /history。

Boostrap.php 定义了以下默认路由：

```
Route::set('welcome-message1', 'directors-welcome-message')
    ->defaults(array(
        'controller' => 'welcome',
        'action'     => 'messageDirector',
    ));

Route::set('welcome-message2', 'directoress-welcome-message')
    ->defaults(array(
        'controller' => 'welcome',
        'action'     => 'messageDirectoress',
    ));

Route::set('default', '(<controller>(/<action>(/<id>)))')
    ->defaults(array(
        'controller' => 'welcome',
        'action'     => 'index',
    )); 
```

/application/logs/2012/06 不包含任何错误。

有人可以给我指点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:47:47.573

是 kohana 错误还是 apache（Web 服务器）错误？您是否启用了 htaccess？试试`/index.php/history`。

# lotusscript - LotusScript 更改 Sametime 服务器社区

> ID：10988345
> 
> 赞同：0
> 
> 时间：2012-06-11T22:26:18.920
> 
> 标签：lotusscript, sametime

有人可以给我或指导我使用允许我添加\删除 Sametime 服务器社区的 LotusScript。我们必须将所有员工更新到我们创建的新 Sametime 服务器。可能有一半的人会搞砸新服务器社区的安装，所以如果可能的话，我想自动化它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:42:19.027

查看创建桌面策略设置文档来为用户指定 Sametime 服务器。

从管理员帮助：

> 在 Sametime 服务器字段中输入服务器名称。当向下推送给用户时，此设置会填充用户位置文档中的“Sametime 服务器”字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:42:32.713

如上所述，您应该为此任务使用桌面策略。此外，还有可用的托管设置选项卡，您可以在其中放置嵌入式 Sametime 插件的设置。例如，我使用了以下设置：

> com.ibm.collaboration.realtime.community/host=SAMETIME_SERVER_HOST_NAME；com.ibm.collaboration.realtime.community/name=SAMETIME_SERVER_HOST_NAME；com.ibm.collaboration.realtime.community/port=1533；com.ibm.collaboration.realtime.community/loginByToken=true；com.ibm.collaboration.realtime.community/loginAtStartup=true；com.ibm.collaboration.realtime.login/autologin=true；com.ibm.collaboration.realtime.login/resetUser=true；

# accessibility - NVDA 两次读取动态添加的内容

> ID：10988350
> 
> 赞同：3
> 
> 时间：2012-06-11T22:27:09.453
> 
> 标签：accessibility, screen-readers, jaws-screen-reader, nvda

我正在努力使视障者可以通过屏幕阅读器访问动态 Web 应用程序，但我遇到了一个烦人的问题。当我用 JAWS 测试我的代码（见下文）时，它工作得非常好。但是当我使用 NVDA 时，我得到动态添加的内容在 Firefox 中被这个阅读器读取两次，而在 IE9 中根本没有被读取。

有没有人见过这种行为？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <HEAD>
    <TITLE>Mike's Alert Test Page</TITLE>       
</HEAD>
<BODY>  
        <script type="text/javascript">
            function simulateErrors()
            {
                var elem = document.getElementById("inlineErrors");  

                if (elem != null && elem != undefined) {
                    elem.innerHTML = '<DIV role="alert">I am some alert text.</DIV>';
                }
            }
    </script>       
    <H1>Test Page</H1>
    <DIV ID="inlineErrors"  role="none"></DIV>
    <DIV ID="buttons">
        <!--<BUTTON onClick="simulateErrors()" type="button">Simulate Errors</BUTTON>-->
        <input type="submit" value="Simulate Errors" onClick="simulateErrors()"/>
    </DIV>
</BODY> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-15T00:50:39.467

设置`role="log"`和`aria-live="assertive"`到`inlineErrors`div。然后只需将其他 DIV 插入到该 div 中以解决您的错误，并且它应该只被读出一次。

查看[这个](https://github.com/dylanb/a11yfy)`assertiveAnnounce`jQuery 库中的函数，了解适用于许多不同浏览器的代码。

# delphi - 从 120 更新到 Indy 130 包，现在此代码不起作用

> ID：10988358
> 
> 赞同：2
> 
> 时间：2012-06-11T22:28:13.280
> 
> 标签：delphi, sockets, http-post, delphi-2009

所以这过去可以顺利工作，但现在我收到“Socket Error #10054 Connection reset by peer”。

我认为一旦我更新了我的 Indy 包，它就开始发生了。今天是我从那以后第一次运行代码。

谁能解释更新可能如何改变了这段代码的行为以及如何解决它？

谢谢你

```
function PostData(url : string; param: TStringList) : string;
var
  text: string;
  sHttpSocket: TIdHTTP;
  sshSocketHandler: TIdSSLIOHandlerSocketOpenSSL;
  resStream: TStringStream;
begin
  sHttpSocket := TIdHTTP.create;
  sshSocketHandler := TIdSSLIOHandlerSocketOpenSSL.create;
  sHttpSocket.IOHandler := sshSocketHandler;
  sHttpSocket.Request.ContentType := 'application/x-www-form-urlencoded';
  sHttpSocket.Request.Method := 'POST';
  resStream := TStringStream.create; 
  sHttpSocket.Post(url, param, resStream);
  resStream.Seek(0, soFromBeginning);
  text := resStream.DataString;
  result := text;
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T00:53:24.167

如果您要发布到 HTTPS 网址，请确保已`TIdSSLIOHandlerSocketOpenSSL`为您尝试连接的服务器正确配置了该网址。很有可能，默认值可能与服务器实际期望的不匹配。特别是`TIdSSLIOHandlerSocketOpenSSL.Method`和`TIdSSLIOHandlerSocketOpenSSL.SSLVersions`属性默认为 TLSv1，但可能服务器不支持 TLSv1。

附带说明一下，`TStringStream`在 D2009+ 中的操作与在早期版本中的操作不同，所以我建议您避免使用它，让 Indy 为您解码文本：

```
function PostData(const url : string; params: TStrings) : string; 
var 
  sHttpSocket: TIdHTTP; 
  sshSocketHandler: TIdSSLIOHandlerSocketOpenSSL; 
begin 
  sHttpSocket := TIdHTTP.Create; 
  try
    sshSocketHandler := TIdSSLIOHandlerSocketOpenSSL.Create(sHttpSocket); 
    // configure sshSocketHandler as needed...
    // perhaps try this at a minimum:
    // sshSocketHandler.SSLOptions.Method := sslvSSLv23;
    sHttpSocket.IOHandler := sshSocketHandler; 
    Result := sHttpSocket.Post(url, params); 
  finally
    sHttpSocket.Free;
  end;
end; 
```

# ruby - 用 ruby 解析远程 JSON

> ID：10988366
> 
> 赞同：1
> 
> 时间：2012-06-11T22:28:44.747
> 
> 标签：ruby, json

尝试获取和解析远程 JSON 时遇到问题。

```
require 'net/http'
require 'json'

url = "Www.example.com"
resp = Net::HTTP.get_response(URI.parse(url))
buffer = resp.body
result = JSON.parse(buffer)

details = result['Detail']

details.each do |detail|
  puts "Latitude: #{detail['Latitude']}"
end 
```

返回的 JSON 是这样的。

```
{Detail:{ID:578155,Latitude:69.83}} 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:07:07.493

它不是一个有效的 JSON，所以我使用 split 和 gsub 方法来解析它。

```
string = string.split("}")
string = string[0].gsub("[", "")
string = string[0].gsub("]", "")
string = string.split(",") 
```

# objective-c - 是否有不需要同时输入全部输入的 MD5 库？

> ID：10988369
> 
> 赞同：9
> 
> 时间：2012-06-11T22:28:49.443
> 
> 标签：objective-c, c, md5

我正在开发 Objective C Cocoa 应用程序。我[在 CommonCrypto 中测试了 CC_MD5](https://stackoverflow.com/a/1994690/312725)，它工作得很好；但是，当我给它 5 千兆字节的文件时，我的整个计算机冻结并崩溃了。MD5 算法将输入处理为 512 字节的块，并不真正需要一次所有输入。Objective C 或 C 中是否有一个库要求下一个 512 字节块而不是一次获取所有输入？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-11T22:33:03.220

在 obj-C 中计算大文件的 MD5 有一个很棒的线程： [http ://www.iphonedevsdk.com/forum/iphone-sdk-development/17659-calculating-md5-hash-large-file.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/17659-calculating-md5-hash-large-file.html)

这是有人在那里提出的解决方案：

```
+(NSString*)fileMD5:(NSString*)path
{
    NSFileHandle *handle = [NSFileHandle fileHandleForReadingAtPath:path];
    if( handle== nil ) return @"ERROR GETTING FILE MD5"; // file didnt exist

    CC_MD5_CTX md5;

    CC_MD5_Init(&md5);

    BOOL done = NO;
    while(!done)
    {
        NSAutoreleasePool * pool = [NSAutoreleasePool new];
        NSData* fileData = [handle readDataOfLength: CHUNK_SIZE ];
        CC_MD5_Update(&md5, [fileData bytes], [fileData length]);
        if( [fileData length] == 0 ) done = YES;
                [pool drain];
    }
    unsigned char digest[CC_MD5_DIGEST_LENGTH];
    CC_MD5_Final(digest, &md5);
    NSString* s = [NSString stringWithFormat: @"%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x",
                   digest[0], digest[1], 
                   digest[2], digest[3],
                   digest[4], digest[5],
                   digest[6], digest[7],
                   digest[8], digest[9],
                   digest[10], digest[11],
                   digest[12], digest[13],
                   digest[14], digest[15]];
    return s;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T22:52:15.430

`CC_MD5()`旨在一次处理其所有输入。5GB 可能比它在任何地方实际存储的容量都多。`CC_MD5_CTX`对于较大的数据，如果您使用、`CC_MD5_Init()`、`CC_MD5_Update()`和，CommonCrypto 可以一次对数据块进行操作`CC_MD5_Final()`。查看 CommonCrypto 文档或 Google 以获取更多信息和示例代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-16T09:22:56.047

这是使用调度 api 的更好方法，以提高效率。我在生产中使用它，它工作正常！

```
 #import "CalculateMD5.h"

// Cryptography
#include <CommonCrypto/CommonDigest.h>

@implementation CalculateMD5

- (id)init
{
    self = [super init];
    if (self)
    {
        MD5ChecksumOperationQueue = dispatch_queue_create("com.test.calculateMD5Checksum", DISPATCH_QUEUE_SERIAL);
    }
    return self;
}

- (void)closeReadChannel
{
    dispatch_async(MD5ChecksumOperationQueue, ^{
        dispatch_io_close(readChannel, DISPATCH_IO_STOP);
    });
}

- (void)MD5Checksum:(NSString *)pathToFile TCB:(void(^)(NSString *md5, NSError *error))tcb
{
    // Initialize the hash object
    __block CC_MD5_CTX hashObject;
    CC_MD5_Init(&hashObject);

    readChannel = dispatch_io_create_with_path(DISPATCH_IO_STREAM,
                                               pathToFile.UTF8String,
                                               O_RDONLY, 0,
                                               MD5ChecksumOperationQueue,
                                               ^(int error) {
                                                   [self closeReadChannel];
                                               });

    if (readChannel == nil)
    {
        NSError* e = [NSError errorWithDomain:@"MD5Error"
                                         code:-999 userInfo:@{
                   NSLocalizedDescriptionKey : @"failed to open file for calculating MD5."
                      }];
        tcb(nil, e);
        return;
    }

    dispatch_io_set_high_water(readChannel, 512*1024);

    dispatch_io_read(readChannel, 0, SIZE_MAX, MD5ChecksumOperationQueue, ^(bool done, dispatch_data_t data, int error) {
        if (error != 0)
        {
            NSError* e = [NSError errorWithDomain:@"ExamSoftMD5"
                                             code:error userInfo:@{
                       NSLocalizedDescriptionKey : @"failed to read from file for calculating MD5."
                          }];
            tcb(nil, e);
            [self closeReadChannel];
            return;
        }

        if (dispatch_data_get_size(data) > 0)
        {
            const void *buffer = NULL;
            size_t size = 0;
            data = dispatch_data_create_map(data, &buffer, &size);

            CC_MD5_Update(&hashObject, (const void *)buffer, (CC_LONG)size);
        }

        if (done == YES)
        {
            // Compute the hash digest
            unsigned char digest[CC_MD5_DIGEST_LENGTH];
            CC_MD5_Final(digest, &hashObject);

            // Compute the string result
            char *hash = calloc((2 * sizeof(digest) + 1), sizeof(char));
            for (size_t i = 0; i < sizeof(digest); ++i)
            {
                snprintf(hash + (2 * i), 3, "%02x", (int)(digest[i]));
            }

            tcb(@(hash), nil);

            [self closeReadChannel];
        }
    });
}

@end 
```

# image - 如何从原始 UDP 数据包中读取图像（从 SharpPcap 捕获）

> ID：10988376
> 
> 赞同：0
> 
> 时间：2012-06-11T22:29:45.173
> 
> 标签：image, sharppcap

我将位图图像从虚拟机发送到本地计算机，然后通过 SharpPcap 从本地计算机捕获图像 UDP 数据包。但我不知道如何摆脱那些协议头并显示图像。

实际上，我需要从以太网卡中读取千兆字节的图像并实时显示。所以我想通过 SharpPcap 从以太网卡中读取原始图像数据，将其保存在系统缓冲区中并在 GUI 中显示。我现在的方法对吗？

# c++ - 调用具有字面值的函数时，内存中会发生什么？

> ID：10988377
> 
> 赞同：1
> 
> 时间：2012-06-11T22:29:50.593
> 
> 标签：c++

假设我有一个任意函数：

```
void someFunc(int, double, char); 
```

我打电话给`someFunc(8, 2.4, 'a');`，实际发生了什么？8、2.4 和 'a' 如何获取内存、移入该内存并传递给函数？对于这样的情况，编译器有哪些类型的优化？如果我混合和匹配参数，例如`someFunc(myIntVar, 2.4, someChar);`？

如果函数声明为 会发生什么`inline`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T22:31:28.503

值是否是文字没有区别（除非函数是内联的，然后编译器可以优化一些东西）。

通常，参数被放入寄存器或函数参数堆栈。无论它们是显式值还是变量。

**如果没有优化**，参数将被推入参数堆栈。在第一种情况下，首先取值`x`并放入寄存器`eax`，然后压入参数堆栈。`foo`打印`x`。

```
 foo(x);
00361A75  mov         eax,dword ptr [x] 
00361A78  push        eax  
00361A79  call        get_4 (3612B7h) 
00361A7E  add         esp,4 
    foo(3);
00361A81  push        3    
00361A83  call        get_4 (3612B7h) 
00361A88  add         esp,4 
```

**通过优化**，编译器（在我的示例中）可以看到该函数，并且完全跳过了调用：

```
 foo(x);
01011000  mov         ecx,dword ptr [__imp_std::cout (101203Ch)] 
01011006  push        3    
01011008  call        dword ptr [__imp_std::basic_ostream<char,std::char_traits<char> >::operator<< (1012038h)] 
    foo(3);
0101100E  mov         ecx,dword ptr [__imp_std::cout (101203Ch)] 
01011014  push        3    
01011016  call        dword ptr [__imp_std::basic_ostream<char,std::char_traits<char> >::operator<< (1012038h)] 
```

`foo`定义为：

```
void foo(int x)
{
   std::cout << x;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T22:37:31.580

*通常*C++ 函数在堆栈上工作。我将描述[C 调用约定](http://en.wikipedia.org/wiki/X86_calling_conventions#cdecl)，因为它无需优化即可工作：

它将放在`'a'`堆栈的顶部。然后放到`2.4`栈顶，再放到`8`栈顶，然后为返回类型^([1])添加空间，然后是调用函数中当前指令的指令指针，然后跳转到开头被调用函数的代码。
被调用的函数会查看栈，抓取参数，做它的事情，把结果放到栈上提供的空间，最后跳转到栈上指向的指令（大概就是那个函数的下一条指令）叫它）。现在处理器再次执行调用函数，然后它将结果复制到任何它想要的位置，并将所有其他内容从堆栈中弹出。*

还有[其他调用约定](http://en.wikipedia.org/wiki/X86_calling_conventions#fastcall)（其中许多将参数保存在寄存器中）以节省时间，当然，由于异常，还有其他复杂性。根据调用函数的不同，它可能会内联调用，它会跳过列出的所有步骤，直接使用这些常量执行被调用的函数，或者在*非常*高级的编译器中，在某些条件下，它可能会创建函数的副本将这些参数硬编码，并调用该版本而不是无参数。

正如我所说，这是我多年前学到的所有理论。 [Luchian Grigore 的答案](https://stackoverflow.com/a/10988391/845092)有很多简洁的细节。

^([1] Wikipedia 告诉我，如果结果是 single `int`，它会在寄存器而不是堆栈中返回。)

# python - 如何检测（查看）鼠标指针周围的屏幕区域

> ID：10988380
> 
> 赞同：3
> 
> 时间：2012-06-11T22:30:30.010
> 
> 标签：python, linux

我在 Linux 上，想尝试为我的 Web 开发重新创建 Nattyware 的 Pixie 工具。gPick 还可以，但 Pixie 更好。

我希望能够检测并显示鼠标指针周围的区域。我一直在尝试找到一种方法来显示鼠标指针周围的区域，并用 Python 放大。

我不知道从哪里开始这样的事情。我不想*保存*任何图像，只是显示鼠标在窗口中的放大区域。

**编辑**：我得到了一些可能有效的东西。**不要运行它，它会崩溃！**

```
import sys, evdev
from Xlib import display, X
from PyQt4 import QtGui
from PyQt4.QtGui import QPixmap, QApplication, QColor

class printImage():
def __init__(self):
    self.window = QtGui.QMainWindow()
    self.window.setGeometry(0,0,400,200)

    self.winId = QApplication.desktop().winId()
    self.width = 150
    self.height = 150

    self.label = QtGui.QLabel('Hi')
    self.label.setGeometry(10, 10, 400, 100)
    self.label.show()

def drawView(self, x, y):
    self.label.setText('abc')
    pix = self.getScreenArea(x, y)
    self.pic.setPixmap(pix)

def render(self):
    self.window.show()

def getScreenArea(self, areaX, areaY):
    image = QPixmap.grabWindow(
        self.winId,
        x = areaX,
        y = areaY,
        width = self.width,
        height = self.height
    )

    return image

if __name__ == '__main__':
    app = QApplication(sys.argv)
    view = printImage()

    view.render()

    display = display.Display(':0')
    root = display.screen().root

    root.grab_pointer(
       True, 
       X.PointerMotionMask | X.ButtonReleaseMask, 
       X.GrabModeAsync, 
       X.GrabModeAsync, 
       0, 0, 
       X.CurrentTime
   )

    while True:
        ev = display.next_event()
        view.drawView(ev.event_x, ev.event_y)

    app.exec_() 
```

知道为什么它会自我毁灭吗？它在grabWindow() 函数上崩溃.. 还有什么我可以使用的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:59:30.877

这在 linux 上对我有用，可能是跨平台的：

```
import wx
ff=wx.App()
screen = wx.ScreenDC()
size = screen.GetSize()
bmp = wx.EmptyBitmap(size[0], size[1])
mem = wx.MemoryDC(bmp)
mem.Blit(0, 0, size[0], size[1], screen, 0, 0)
del mem
#bmp.SaveFile('screenshot.png', wx.BITMAP_TYPE_PNG)
im = bmp.ConvertToImage() 
```

来自`help`：

```
ConvertToImage

Creates a platform-independent image from a platform-dependent
bitmap. This preserves mask information so that bitmaps and images can
be converted back and forth without loss in that respect. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:32:16.223

我得到了它。我没有使用 while 循环，而是切换到 QTimer。这释放了大量的内存使用，grabWindow() 执行得非常好。

```
import sys, pymouse
from PyQt4.QtGui import *
from PyQt4.QtCore import *

class printImage(QWidget):
    def __init__(self, *args):
        apply(QWidget.__init__,(self, ) + args)
        QWidget.__init__(self)

        self.winId = QApplication.desktop().winId()
        self.mouse = pymouse.PyMouse()
        self.timer = QTimer()

        self.x = self.y = self.cX = self.cY = 0

        self.createLabel()
        self.show()
        self.startListening()

    def createLabel(self):
        self.label = QLabel(self)
        self.label.move(10, 15)
        self.label.resize(150, 130)

    def startListening(self):
        self.timer.connect(self.timer, SIGNAL('timeout()'), self.sendData)
        self.timer.start(0)

    def sendData(self):
        pos = self.mouse.position()
        x = pos[0]
        y = pos[1]

        if (self.cX != x) and (self.cY != y):
            self.x = self.cX = x
            self.y = self.cY = y

            self.label.setPixmap(
                self.cropScreenArea()
            )

    def cropScreenArea(self):
        return QPixmap.grabWindow(
            self.winId,
            x = self.x - 80,
            y = self.y - 60,
            width = 150,
            height = 130
        )

    def keyPressEvent(self, e):
        if e.key() == Qt.Key_Escape:
            self.close()

if __name__ == '__main__':
    app = QApplication(sys.argv)
    view = printImage()

    sys.exit(app.exec_()) 
```

# css - 等高 div（两列）

> ID：10988381
> 
> 赞同：1
> 
> 时间：2012-06-11T22:30:33.560
> 
> 标签：css, html

我尝试为此使用 JQuery，但有点迷路了......所以我现在尝试用 CSS 来做

[http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

我基本上想这样做，但有两列，所以页面中有两个高度相同的 div，我对 css 很陌生，如果这是一个重复/明显的问题，我很抱歉。

任何帮助表示赞赏谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:54:29.903

尝试 put`min-width`而不是 just `width`。

添加属性`float:left`也是一种不好的做法。

定义一个类：

```
.lfloat {
    float:left;
} 
```

并继续将其添加到`div`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T22:48:33.840

如果您尝试修改链接中的代码，您需要做的就是修改 css：

```
 #container1 {
       float:left;
       width:100%;
     }

     #col1 {
       float:left;
       width:50%;
       background:red;
     }

     #col2 {
       float:left;
       width:50%;
       background:yellow;
     } 
```

而且我会将您的背景颜色声明为十六进制值并在容器本身中，除非您当然希望列有两种不同的颜色背景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T06:33:49.227

可以使用一些 CSS 轻松完成：

```
<div style="overflow:hidden;" class="fleft">
    <div class="leftsec content">
        Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Typi non habent claritatem insitam; est usus legentis in iis qui facit eorum claritatem. Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius. Claritas est etiam processus dynamicus, qui sequitur mutationem consuetudium lectorum. Mirum est notare quam littera gothica, quam nunc putamus parum claram, anteposuerit litterarum formas humanitatis per seacula quarta decima et quinta decima. Eodem modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum.    
    </div>
    <div class="rightsec content">
        lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla seacula quarta decima et quinta decima. Eodem modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum.    
    </div> 
```

CSS：

```
.fleft {
    float: left;
}

.content {
    margin-bottom: -1000px;
    overflow: hidden;
    padding-bottom: 1000px;
}
.leftsec {
    float: left;
    padding-right: 12px;
    width: 208px;
    background:red;
}

.rightsec {
    border-left: 2px solid #000000;
    clear: right;
    left: 0;
    padding-left: 18px;
    background:green;
} 
```

示例的小提琴：http: [//jsfiddle.net/m3LsQ/1/](http://jsfiddle.net/m3LsQ/1/)

PS IE7 有使用此代码的限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-28T11:39:18.100

如果您为现代浏览器制作，则不需要 JS。使用现代功能！！！检查我的例子

```
.wrapper{
  display: flex;
  flex-direction: row;
}

.col{
  flex: 1; /*make it the same witdh*/

  /*just make it look better*/
  background: #333;
  color: #fff;
  margin: 0 5px;
  padding: 5px;
  box-shadow: 0 0 3px rgba(0,0,0,.5);
  /*just make it look better*/
}
```

```
<div class="wrapper">
  <div class="col">
    Nunc at facilisis dui. Nam rhoncus blandit bibendum. Ut ligula mi, ornare id pellentesque vel, interdum ut mauris. Proin bibendum nunc non nunc efficitur, sed varius est aliquam. Aliquam semper at sapien a suscipit. Suspendisse potenti. Sed volutpat nulla eu enim ornare, eget vehicula nisi auctor.
  </div>
  <div class="col">
    test
  </div>
  <div class="col">
    test
  </div>
</div>
```

[https://css-tricks.com/snippets/css/a-guide-to-flexbox/](https://css-tricks.com/snippets/css/a-guide-to-flexbox/) - 你可以在这里阅读更多

# javascript - 在新数据的下方显示列表

> ID：10988395
> 
> 赞同：0
> 
> 时间：2012-06-11T22:31:55.877
> 
> 标签：javascript, jquery, css

我在显示彼此整齐流动以显示数据的列表时遇到问题。以下是我试图建立我的列表的基础：[http ://www.about.com/#!/explore-topics/](http://www.about.com/#!/explore-topics/)

我翻阅了样式表，但不知道他们是如何做到这一点的。我想知道是否有人能够对此有所启发，我一直在扯头发试图复制同样的东西，但我无法做到。我认为这可能是 Javascript 的事情，但我不确定。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:35:45.070

从他们的CSS：

```
#explore-topics .viewport {
-moz-column-width: 216px;
-webkit-column-width: 216px;
column-width: 216px;
width: 7910px;
} 
```

他们正在使用 CSS3 列定义。在此处阅读更多信息：http: [//www.w3schools.com/css3/css3_multiple_columns.asp](http://www.w3schools.com/css3/css3_multiple_columns.asp)

# ios - 在 iOS 上使用 Phonegap 播放 mp4 视频

> ID：10988400
> 
> 赞同：2
> 
> 时间：2012-06-11T22:32:23.597
> 
> 标签：ios, ipad, video, cordova, mp4

我有一个针对 iPad 的 phonegap 应用程序，它需要在其中一个页面上嵌入视频。我发现论坛帖子和其他帮助声称可以使用 HTML5 中的视频标签。这是我正在使用的代码：

```
<video id="video01" width="770" height="433" controls="controls" preload="auto" poster="splash.png">
<source src="movies/myVideo.mp4" type="video/mp4" />
</video> 
```

此代码片段在 Safari 中运行良好，但当通过 Phonegap 加载到 iPad 时，会显示带有交叉播放按钮的初始图像（就像视频没有正确加载一样）。

也许我不知道在 iOS 上播放视频有细微差别吗？或者视频本身是否存在小格式问题。视频被格式化为 h264 包装在 mp4 容器中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:38:57.917

也许问题出在您的视频编解码器中。尝试将 h.264 级别设置为 3.1 或更低。

我最近遇到了类似的问题。我的问题出在我的视频编解码器中，我在 Adob​​e After Effects (CS5.5) 中渲染视频，在导出 H.264 时，我的设置为 Level: 5.1。我[在 ipad 上](https://discussions.apple.com/thread/2505627?start=0&tstart=0)看到了这篇关于视频比特率的帖子，发现最高设置可能是 3.1。我想“为什么不”并试一试。有效。

# jquery - 表单提交时未触发我的 jquery 验证方法

> ID：10988402
> 
> 赞同：0
> 
> 时间：2012-06-11T22:33:02.710
> 
> 标签：jquery, validation, jquery-validate

我完全准备好承认我在这里遗漏了一些简单的东西。我发现 jquery docs 页面上的文档并没有真正包含进行基本自定义验证所需的所有信息。

我的问题是我需要验证元素中不包含的数据，所以我一直在使用一种“虚拟”元素来尝试触发我的自定义方法。

```
<div id="modal-dialog-overlay">
<div id="modal-background"></div>
<article id="dialog-form" class="event-module module">
    <header>
        <h6>New Event</h6>
        <section class="module-actions">
            <span class="button" onclick="overlay_select('modal-dialog-overlay', true);">Cancel</span>
            <span class="primary button" onclick="createBEvent()">Create Event</span>
        </section>
    </header>
    <section class="wrapper">
        @using (Html.BeginForm("CreateEvent", "Conversations", FormMethod.Post, new { enctype = "multipart/form-data", id = "createEventForm", @class = "group" }))
        {
            <input id="participantsChecker" type="text" />
            <input class="submit" type="submit" value="Submit"/>
        }
    </section>
</article>
</div>
</div> 
```

然后javascript位是

```
 $.validator.addMethod("checkParticipants", function (value, element) {
        alert($(".event-module .contact-handle [name='Key']").length);
        return $(".event-module .contact-handle [name='Key']").length
    }, "You need to invite at least one person.");
    $("#createEventForm").validate({
        rules: {
            participantsChecker: {
                checkParticipants: true
            }
        }
    }); 
```

这是在document.onready页面。页面上还有其他代码添加了选择器正在寻找的元素，这些元素肯定存在。在任何情况下，提交表单时都不会出现该警报。我只是通过点击提交而不在表单中输入任何内容来测试它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:12:50.590

输入元素必须有一个名称，这就是 jQuery Validate 与它们交互的方式：

```
<input id="participantsChecker" name="participantsChecker" type="text" /> 
```

那应该行得通。

# delphi - 开发 Delphi VCL 组件时使用什么基类？

> ID：10988404
> 
> 赞同：8
> 
> 时间：2012-06-11T22:33:04.200
> 
> 标签：delphi, vcl

如果我想更换一个 VCL 组件`TXxx`，我应该将我的组件建立在`TXxx`或`TCustomXxx`吗？

我正在寻找各种文本编辑组件（ , 等）的替代品，`TEdit`以`TMemo`使用 WM_PASTE 处理程序来清理后端的输入，该后端对其将接受的内容非常挑剔（基本上只有 7 位 ASCII 可打印字形、空格和 CR/LF 对……甚至制表符都不可接受）。这些新组件必须进入现有应用程序，我不想做任何我绝对不必做的事情，以使它们完全按照旧组件的方式工作，除了非默认粘贴行为。

我做了一个基于`TMemo`它似乎工作，但不知何故我有这样的印象，推荐的方法是使用`TCustomMemo`. 有什么我想念的吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-11T22:35:48.520

按照惯例，TSomething 和 TCustomSomething 之间的区别在于后者没有或只有很少的已发布属性，因此您可以选择自己发布哪些属性。否则应该没有任何区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T01:14:04.037

我一直理解拥有的概念的方式`TSomething`是`TCustomSomething`，当你创建自己的继承时，假设`TButton`你自己的被调用`TMyBytton`。假设您想隐藏一个属性，例如`Caption`（假设您可能不需要文本）。使用`TButton`，您无法隐藏此属性。但是使用 a `TCustomButton`，您可以发布您希望在对象检查器中可见的属性，并排除那些您不想看到的属性。属性一旦发布，就不能在进一步继承的类中取消发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:16:40.157

TObject -> TPersistent -> TComponent -> TControl -> TWinControl -> TCustomEdit -> TCustomMemo -> TMemo

![在此处输入图像描述](../Images/ffd0be41adcc11d27c1d79c270caabf4.png)

TMemo 只是 TCustomMemo 控件的“包装器”。您可以同时使用两者，但我喜欢使用自定义版本，因为您从非可视组件派生。

如果您想在未来的项目中替换组件，您可以围绕控件构建数据模块并在数据模块中管理其属性。替换后，您只需更改数据模块处理组件的方式，而不是项目中的每个组件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-12T15:00:02.190

另一种选择是像这样简单地对各个组件进行子类化：

```
unit SubClassedControls;

interface

uses StdCtrls, Messages;

type

  TEdit = class(StdCtrls.TEdit)
  private
    procedure WMPaste(Message: TWMPaste); message WM_PASTE;
  end;

implementation

{ TEdit }

procedure TEdit.WMPaste(Message: TWMPaste);
begin
  // do whatever is necessary
end;

end. 
```

然后重要的是在表单的uses子句中的StdCtrls单元后面添加单元SubClassedControls。通过这样做，您可以继续使用现有的标准控件，但在运行时您的应用程序将实际使用您的子类控件。如果您有一个包含大量控件的现有应用程序，这可能是更改控件行为的更简单方法。

# symfony - Symfony2、树枝模板和@ORM\Table

> ID：10988408
> 
> 赞同：2
> 
> 时间：2012-06-11T22:33:34.673
> 
> 标签：symfony, doctrine, twig

我有一个工作应用程序。现在我想将我的实体的表名从 CamelCase 更改为 underscore_case。

旧代码：

```
/**
 * @ORM\Table(name="FeaturedProduct")
 */
class FeaturedProduct
{ ... } 
```

每件事都有效

新代码：

```
/**
 * @ORM\Table(name="featured_product")
 */
class FeaturedProduct
{ ... } 
```

现在我得到：

在渲染模板期间引发了异常：

> （“SQLSTATE [42S02]：未找到基表或视图：1146 表 'myapp.FeaturedProduct' 不存在”）在 MyApp::layout_user_2_col.html.twig 第 37 行。

```
MyApp/Resources/views/layout_user_2_col.html.twig:37 
{% render "MyApp:FeaturedProduct:random" %} 
```

文件 MyApp/Resources/views/FeaturedProduct/random.html.twig 存在。

看起来 twig 正在使用表名作为模板的路径，而不是控制器的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:55:55.513

好像您还没有更新您的架构。

使用以下命令查看应进行哪些更改以同步架构和实体注释：

> 应用程序/控制台原则：模式：更新 --dump-sql

并运行以下命令以实际进行此更改

> 应用程序/控制台原则：架构：更新 --force

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T22:40:27.163

我发现了错误。

我在我的 FeaturedProduct 存储库的本机学说查询中使用了表的名称。将其更改为动态表名解决了该问题。

# algorithm - 斐波那契序列子例程返回的值太高

> ID：10988409
> 
> 赞同：2
> 
> 时间：2012-06-11T22:33:55.960
> 
> 标签：algorithm, perl, math, recursion, fibonacci

```
#!/usr/bin/perl -w
use strict;

sub fib {
    my($num) = @_;  #give $num to input array
    return(1) if ($num<=1);  #termination condition
    return($num = &fib($num-1) + &fib($num-2));  #should return sum of first "n" terms in the fibonacci sequence
}

print &fib(7)."\n";  #should output 20 
```

这个子例程应该输出第一个“x”个项的总和，由 sub 的参数指定。但是，它太高了。这与递归有关吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T22:38:17.817

20 不是斐波那契数。最接近的是21，第九。序列的第一项是

```
0 1 1 2 3 5 8 13 21 
```

你的程序输出 21，这是正确的答案。

如果要计算第一个斐波那契数的*总和*`n`，则需要更新代码。现在你只是在计算`n`斐波那契数。如果您想要第一个`n`斐波那契数的总和，您应该使用当前函数作为子程序来计算 F(n + 2) - 1。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T23:05:12.520

[斐波那契数列](http://en.wikipedia.org/wiki/Fibonacci_number)以`f(0) = 0`和开头`f(1) = 1`。之后，每个斐波那契数是前两个数的总和。

您的函数使用`return (1) if ($num <= 1)`which 错误地评估`f(0)`为 1。如果您将其更改为，`return $num if $num <= 1`那么您的序列将正确启动。

此代码输出系列中的前十一个数字。

```
use strict;
use warnings;

sub fib {
  my ($num) = @_;
  if ($num <= 1) {
    return $num;
  }
  else {
    return fib($num-1) + fib($num-2);
  }
}

print join ' ', map fib($_), 0 .. 10; 
```

**输出**

```
0 1 1 2 3 5 8 13 21 34 55 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-11T23:10:45.880

templatetypedef 已经回答了这个问题，但我想警告你，你的实现很糟糕。如果你有足够的时间，它会给你正确的答案，但除非你不在乎等待几个世纪，否则你应该真正以不同的方式计算斐波那契数列。确实要计算`fib(n)`两次`fib`，这意味着计算的复杂度`fib(n)`是 O(fib(n))。您可以非常简单地实现 O(n) 复杂度，甚至可以达到 O(Log(n)) 复杂度，只需查看[Wikipedia](http://en.wikipedia.org/wiki/Fibonacci_number)即可。

# c# - 如何在没有 CRLF 的情况下在 C# 中编写所有行

> ID：10988411
> 
> 赞同：16
> 
> 时间：2012-06-11T22:34:01.883
> 
> 标签：c#, file-io, line-endings, system.io.file

我正在使用 C# 并尝试将几行输出到 ASCII 文件。我遇到的问题是我的 Linux 主机将这些文件视为：

```
ASCII text, with CRLF line terminators 
```

我需要这个文件只是：

```
ASCII text 
```

CRLF 引起了一些问题，我希望 C# 中有一种方法可以创建以我想要的方式格式化的文件。

我基本上使用这段代码：

```
string[] lines = { "Line1", "Line2" };
File.WriteAllLines(myOutputFile, lines, System.Text.Encoding.UTF8); 
```

有没有一种简单的方法来创建没有 CRLF 行终止符的文件？我可能可以在 Linux 端处理它，但宁愿从一开始就以正确的格式创建文件。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-11T22:35:54.577

假设您仍然需要换行符，您只需要换行而不是回车/换行，您可以使用：

```
File.WriteAllText(myOutputFile, string.Join("\n", lines)); 
```

或者如果您也确实想要在最后一行之后换行：

```
File.WriteAllText(myOutputFile, string.Join("\n", lines) + "\n"); 
```

（或者，正如您所说，您可以在 Linux 端修复它，例如使用[`dos2unix`](https://wiki.gentoo.org/wiki/Dos2unix).）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-07-17T09:48:10.913

@JonSkeet 的回答是一个快速简单的解决方案。它的缺点是它在写入文件之前分配了一个包含所有文本行的字符串。对于大量文本，这会给内存管理系统带来压力。

允许流式传输而无需额外分配的替代方法是：

```
public static void WriteAllLines(
    string path, IEnumerable<string> lines, string separator)
{
    using (var writer = new StreamWriter(path))
    {
        foreach (var line in lines)
        {
            writer.Write(line);
            writer.Write(separator);
        }
    }
} 
```

# c - Mongoose 嵌入式网络服务器

> ID：10988412
> 
> 赞同：0
> 
> 时间：2012-06-11T22:34:15.363
> 
> 标签：c, mongoose-web-server

此代码取自 Mongoose 嵌入式 Web 服务器中的示例程序。

事件 MG_NEW_REQUEST 被调用两次。这是预期的行为吗？为什么它会两次处理相同的请求？您将如何防止这种情况发生？

```
int i =0;
static void *callback(enum mg_event event,
                      struct mg_connection *conn,
                      const struct mg_request_info *request_info)
{
    if (event == MG_NEW_REQUEST)
    {    
        i++;
        printf("%d \n", i);

        // Echo requested URI back to the client
        mg_printf(conn, "HTTP/1.1 200 OK\r\n"
              "Content-Type: text/html\r\n\r\n"
              "%s", request_info->uri);    
        mg_printf(conn, "Hello World!!"
                  "%s", "");

        //request_info->query_string
        return const_cast<char *>("done");  // Mark as processed
    }
    else
    {
        return NULL;
    }
}

int main(void) {
    struct mg_context *ctx;
    const char *options[] = {"listening_ports", "8080", NULL};

    printf("Test web server, open browser to http://localhost:8080 ");
    ctx = mg_start(&callback, NULL, options);
    getchar();  // Wait until user hits "enter"
    mg_stop(ctx);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:17:46.217

我假设浏览器实际上做了两个请求。一个用于 url `/`，另一个用于`/favicon.ico`.

# jquery - 在部分视图中重新绑定 jquery 元素

> ID：10988416
> 
> 赞同：0
> 
> 时间：2012-06-11T22:34:43.883
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, binding, partial-views

我正在使用带有 jquery 的 MVC。

我有一个输入表单，它使用 jquery 来实现客户端功能，例如验证下拉列表等。

当 for 发布到服务器时，会返回一个局部视图。

我的问题是当部分视图从服务器返回时如何重新绑定它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:30:29.530

您需要使用 jQuery 的`.on()`方法来将事件绑定到新创建的元素。这是文档：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

# android - OpenGL ES教程--LessonOneRenderer 不识别Renderer接口方法

> ID：10988418
> 
> 赞同：0
> 
> 时间：2012-06-11T22:34:53.217
> 
> 标签：android, eclipse, opengl-es-2.0

我一直在关注[http://www.learnopengles.com/android-lesson-one-getting-started/](http://www.learnopengles.com/android-lesson-one-getting-started/)上的 OpenGL ES 教程，并确保它与给出的示例一致，但由于某种原因，编译器是为 LessonOneRenderer 类中的每个重写方法提供错误。当我为它们中的每一个去掉@Override 时，它​​们根本不会被调用，并且程序会显示一个空白屏幕。

为什么这个类不能从其实现的接口中识别方法？

LessonOneRenderer

```
package com.aft.glone;

import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;
import android.opengl.GLES20;
import android.opengl.GLSurfaceView;
import android.opengl.Matrix;
import android.os.SystemClock;

public class LessonOneRenderer implements GLSurfaceView.Renderer {
private final FloatBuffer mTriangle1Vertices;
//private final FloatBuffer mTriangle2Vertices;
//private final FloatBuffer mTriangle3Vertices;
private int mMVPMatrixHandle;
private int mPositionHandle;
private int mColorHandle;

private final int mBytesPerFloat=4;

private float[] mViewMatrix = new float[16];
private float[] mProjectionMatrix = new float[16];
private float[] mModelMatrix = new float[16];
private float[] mMVPMatrix = new float[16];

private final int mStrideBytes = 7 * mBytesPerFloat;
private final int mPositionOffset = 0;
private final int mPositionDataSize = 3;
private final int mColorOffset = 3;
private final int mColorDataSize = 4;

public LessonOneRenderer()
{
    final float[] triangle1VerticesData = {
        //X, Y, Z
        //R, G, B, A
        -0.5f, -0.25f, 0.0f,
        1.0f, 0.0f, 0.0f, 1.0f,

        0.5f, -0.25f, 0.0f,
        0.0f, 0.0f, 1.0f, 1.0f,

        0.0f, 1.559016994f, 0.0f,
        0.0f, 1.0f, 0.0f, 1.0f
};

mTriangle1Vertices = ByteBuffer.allocateDirect(triangle1VerticesData.length *       mBytesPerFloat)
        .order(ByteOrder.nativeOrder()).asFloatBuffer();

mTriangle1Vertices.put(triangle1VerticesData).position(0);
}

@Override
public void onSurfaceCreated(GL10 glUnused, EGLConfig config)
{
GLES20.glClearColor(0.5f, 0.5f, 0.5f, 0.5f);
final float eyeX = 0.0f;
final float eyeY = 0.0f;
final float eyeZ = 1.5f;

final float lookX = 0.0f;
final float lookY = 0.0f;
final float lookZ = -5.0f;

final float upX = 0.0f;
final float upY = 1.0f;
final float upZ = 0.0f;

Matrix.setLookAtM(mViewMatrix, 0, eyeX, eyeY, eyeZ, lookX, lookY, lookZ, upX, upY, upZ);

final String vertexShader =
        "uniform mat4 u_MVPMatrix;  \n"
        + "attribute vec4 a_Position;   \n"
        + "attribute vec4 a_Color;  \n"
        + "varying vec4 v_Color;    \n"
        + "void main()  \n"
        + "{    \n"
        + " v_Color = a_Color;  \n"
        + " gl_Position = u_MVPMatrix * a_Position; \n"
        + "}    \n";
final String fragmentShader = 
        "precision mediump float;   \n"
        + "varying vec4 v_Color;    \n"
        + "void main()  \n"
        + "{    \n"
        + " gl_FragColor = v_Color; \n"
        + "}    \n";

int vertexShaderHandle = GLES20.glCreateShader(GLES20.GL_VERTEX_SHADER);
if (vertexShaderHandle != 0)
{
    GLES20.glShaderSource(vertexShaderHandle, vertexShader);
    GLES20.glCompileShader(vertexShaderHandle);
    final int[] compileStatus = new int[1];
    GLES20.glGetShaderiv(vertexShaderHandle, GLES20.GL_COMPILE_STATUS, compileStatus, 0);
    if (compileStatus[0] == 0)
    {
        GLES20.glDeleteShader(vertexShaderHandle);
        vertexShaderHandle = 0;
    }
}

if (vertexShaderHandle == 0)
{
    throw new RuntimeException("Error creating vertex shader.");
}

int fragmentShaderHandle = GLES20.glCreateShader(GLES20.GL_FRAGMENT_SHADER);

if (fragmentShaderHandle != 0)
{
    GLES20.glShaderSource(fragmentShaderHandle, fragmentShader);
    GLES20.glCompileShader(fragmentShaderHandle);
    final int[] compileStatus = new int[1];
    GLES20.glGetShaderiv(fragmentShaderHandle, GLES20.GL_COMPILE_STATUS, compileStatus, 0);
    if (compileStatus[0] == 0)
    {
        GLES20.glDeleteShader(fragmentShaderHandle);
        fragmentShaderHandle = 0;
    }
}

if (fragmentShaderHandle == 0)
{
    throw new RuntimeException("Error creating fragment shader.");
}

int programHandle = GLES20.glCreateProgram();
if (programHandle != 0)
{
    GLES20.glAttachShader(programHandle, vertexShaderHandle);
    GLES20.glAttachShader(programHandle, fragmentShaderHandle);
    GLES20.glBindAttribLocation(programHandle, 0, "a_Position");
    GLES20.glBindAttribLocation(programHandle,  1, "a_Color");
    GLES20.glLinkProgram(programHandle);
    final int[] linkStatus = new int[1];
    GLES20.glGetProgramiv(programHandle, GLES20.GL_LINK_STATUS, linkStatus, 0);
    if (linkStatus[0] == 0)
    {
        GLES20.glDeleteProgram(programHandle);
        programHandle = 0;
    }
}

if (programHandle == 0)
{
    throw new RuntimeException("Error creating program.");
}

mMVPMatrixHandle = GLES20.glGetUniformLocation(programHandle, "u_MVPMatrix");
mPositionHandle = GLES20.glGetAttribLocation(programHandle, "a_Position");
mColorHandle = GLES20.glGetAttribLocation(programHandle, "a_Color");
GLES20.glUseProgram(programHandle);
}

@Override
public void onSurfaceChanged(GL10 glUnused, int width, int height)
{
GLES20.glViewport(0,  0, width, height);
final float ratio = (float)width/height;
final float left = -ratio;
final float right = ratio;
final float bottom = -1;
final float top = 1;
final float near = 1;
final float far = 10;
Matrix.frustumM(mProjectionMatrix, 0, left, right, bottom, top, near, far);
}

@Override
public void onDrawFrame(GL10 glUnused)
{
GLES20.glClear(GLES20.GL_DEPTH_BUFFER_BIT | GLES20.GL_COLOR_BUFFER_BIT);
long time = SystemClock.uptimeMillis() % 10000L;
float angleInDegrees = (360.0f / 10000.0f) * ((int)time);
Matrix.setIdentityM(mModelMatrix, 0);
Matrix.rotateM(mModelMatrix, 0, angleInDegrees, 0.0f, 0.0f, 1.0f);
drawTriangle(mTriangle1Vertices);
 }

private void drawTriangle(final FloatBuffer aTriangleBuffer)
{
aTriangleBuffer.position(mPositionOffset);
GLES20.glVertexAttribPointer(mPositionHandle, mPositionDataSize, GLES20.GL_FLOAT, false,
        mStrideBytes, aTriangleBuffer);
GLES20.glEnableVertexAttribArray(mPositionHandle);
aTriangleBuffer.position(mColorOffset);
GLES20.glVertexAttribPointer(mColorHandle, mColorDataSize, GLES20.GL_FLOAT, false,
        mStrideBytes, aTriangleBuffer);
GLES20.glEnableVertexAttribArray(mColorHandle);
Matrix.multiplyMM(mMVPMatrix, 0, mViewMatrix, 0, mModelMatrix, 0);
Matrix.multiplyMM(mMVPMatrix, 0, mProjectionMatrix, 0, mMVPMatrix, 0);
GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mMVPMatrix, 0);
GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, 3);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T00:09:38.783

Perhaps you need to import `android.opengl.GLSurfaceView.Renderer;` ?

I'm not sure if that's needed if you import GLSurfaceView, but I checked on my own renderer and it includes that import.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:13:40.410

切换到 Java 编译器版本 1.6 应该可以修复编译错误，但没有 @Override 不应该阻止调用方法，至少只要您从 Activity 调用 GLSurfaceView 上的 setRenderer(...)。

# powershell - Powershell：数据表到数组

> ID：10988428
> 
> 赞同：1
> 
> 时间：2012-06-11T22:36:03.557
> 
> 标签：powershell, active-directory

我目前正在编写一个 Powershell 脚本，用于从 Active Directory 中选择用户，然后允许您选择他们已登录的计算机（通过 SQL 查询）和远程桌面。提示用户输入全名或部分名称，然后打印所有匹配项的列表，并提示他们选择一个。所有匹配项的列表来自遍历一个数组，所有匹配项都已分配给该数组。如果从名称输入中搜索产生一个只有一个人的数组，然后用户选择那个人，我会收到以下错误：

```
 Get-ADUser : Variable: 'u' found in expression: $u is not defined.
    At C:\Users\styanc\Desktop\test.ps1:67 char:12
    +     Get-ADUser <<<<  -f{DisplayName -eq $u} -Properties TelephoneNumber, OtherTelephone, Mobile | Select TelephoneNumber, OtherTelephone, Moblie #| Format
    -List
        + CategoryInfo          : InvalidArgument: (:) [Get-ADUser], ArgumentException
        + FullyQualifiedErrorId : Variable: 'u' found in expression: $u is not defined.,Microsoft.ActiveDirectory.Management.Commands.GetADUser
The functions are as follows.
    Function FindUsers{
        param ($n)
        #creates an array of users with names LIKE the script users input
        $n = @(Get-ADUser -f {DisplayName -like $n} -Properties DisplayName) 
        return $n
    }
    Function PrintUsers{
        param ($array)
        $i = 1
        #for each user in the array, print their name
        foreach($object in $array){
            Write-Host "$i. $($object.name)"
            $i++
        }
    }
    Function SelectUser{
        #there's probably a better way to do newlines?
        Write-Host ""
        #user selects a user from the list by number, input needs validation
        $userNum = Read-Host "Please select a user. (by number)"
        $length = $usersArray.Length
        Write-Host $length
        Write-Host $usersArray.length
        if($usersArray.Length -eq $null){
            $user = ($usersArray.Name)
        }
        else{
            $user = ($usersArray[$userNum-1].Name)
        }
        #$user = ($usersArray[$userNum-1].Name)
        return $user
    } 
```

并被称为：

```
$usersArray = FindUsers -n $name
PrintUsers -array $usersArray
$selectedUser = SelectUser 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:53:19.200

在函数`FindUsers`中，只需尝试替换：

```
return $n 
```

经过

```
return ,$n 
```

`,$n`force`return`命令返回一个列表，无论`$n`是单个值还是列表，如果没有返回命令，则习惯于将单个值数组转换为单个值。

# php - 使用噪声过滤器和谷歌 Adsense 的 PHP 重定向脚本？

> ID：10988430
> 
> 赞同：0
> 
> 时间：2012-06-11T22:36:14.850
> 
> 标签：php, google-analytics

所以我想创建一个重定向脚本，按以下顺序执行 3 件事：

1.  过滤掉一个人来自哪里的“噪音”。基本上，它应该只跟踪来自特定位置的用户。如果用户来自不同的位置，脚本将停止执行其余代码。

2.  呈现谷歌分析代码。一旦代码过滤掉流量并看到流量来自指定位置，那么代码将呈现谷歌分析以查看该特定站点发送了多少流量。

3.  使用重定向代码将过滤后的流量发送到所需站点。

该脚本的目标是在某些网站上为营销活动进行 A/B 测试。与其他网站相比，需要查看某个网站向我吸引流量的网站发送了多少流量。该脚本将仅使用噪声过滤器计算来自指定网站的流量（我猜这是一个 SERVER_HTTP 变量或类似的东西），然后它将呈现谷歌分析以监控来自指定网站的流量，然后最后它将流量重定向到所需的网站。我面临的主要挑战是为第 1 步编写代码。第 2 步和第 3 步很容易，但要弄清楚我是否正确地执行了第 1 步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:41:27.850

无需自己编写所有代码。几个月前我遇到了同样的问题。谷歌有非常棒的 A/B 测试工具。去这里 --> [www.google.com/websiteoptimizer](http://www.google.com/websiteoptimizer)它工作得很好，在优化我的网页方面帮助了我很多，就像你的目标一样！

# c# - Ninject 绑定不同的实现

> ID：10988432
> 
> 赞同：4
> 
> 时间：2012-06-11T22:36:20.843
> 
> 标签：c#, .net, ninject

我使用 Ninject 已经有一段时间了，我正试图弄清楚如何使用 app.config/web.config 条目来完成我在 Unity 中所做的事情。

我很确定这很简单，只是还没有找到实现它的最佳方法，当然 Ninject 也没有最好的文档。

我想对一个接口有不同的实现，而代码没有变化——特定的应用程序知道要使用哪个实现。

例如，当我使用 Unity 时，我会有一个实时应用程序和一个单元测试库，使用不同的数据库。所以：

```
var repo = IoC.Get<IRepository>(); 
```

将`RealRepository`在我的实时应用程序中返回 a ，`FakeRepository`在我的单元测试中返回 a 。我会简单地映射我的 app.config 或 web.config 中的类。

在 Ninject 中，由于您在代码中定义了映射，因此似乎没有办法决定您使用哪些实现（或哪个模块），除了在代码中 - 但当然整个目的是我不想要必须具体说明我要使用的实现。

有没有好的方法来做到这一点？我能想到的唯一方法是从配置文件中动态选择 NinjectModule 实现，但这感觉不对。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T23:59:20.603

听起来您好像在误用 IoC 容器作为服务定位器。这给你带来了很多问题。其中之一是测试要困难得多。我建议改为正确执行构造函数 injsction 而不是服务位置。

这意味着而不是

```
public class MyClass
{
    public void Do()
    {
        var repo = IoC.Get<IRepository>();
        ....
    }
} 
```

你做

```
public class MyClass
{
    private IRepository repo;
    public MyClass(IRepository repo)
    {
        this.repo = repo;
    }

    public void Do()
    {
        ....
    }
} 
```

您的应用程序的根目录只有一个 Get。其他一切都通过构造函数传递。

它使测试变得非常简单：

```
var testee = new MyClass(new Mock<IRepository>()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T22:41:35.910

您的实时应用程序和单元测试库没有不同的端点吗？一个可能是单元测试项目（nunit？），另一个是应用程序（控制台、windows 或 asp.net）。

每种类型的应用程序都应该独立定义它们的绑定，通常通过定义单独的模块（传递给 的构造函数`StandardKernel`）。一组为您的真实应用程序提供映射，另一组为您的单元测试提供映射。后者可能是必要的，也可能不是必要的——理想情况下，您正在测试的特定类的依赖项应该很容易模拟和传递，而根本不使用 Ninject。在实践中，我找到了许多仍然使用 Ninject 方便的借口，在这种情况下，我要么创建一个单独的模块，要么只是在测试本身中即时重新绑定内核。

# ruby - 如何让 FTP 连接超时

> ID：10988433
> 
> 赞同：1
> 
> 时间：2012-06-11T22:36:31.687
> 
> 标签：ruby, ftp

***背后的故事：***

用 ruby​​ 1.8.6 编写的旧脚本，可打开到 ftp 的连接并下载配置文件。对于具有 windows ftp 服务器的特定客户端，脚本只是挂起。日志在打开到 ftp 的连接后停止写入。这是一个旧脚本，它是用红宝石编写的，我不是这方面的专家。

***我尝试了什么：***

所以我尝试了这种超时实现来检查 ftp 连接是否与这段代码挂起

```
Timeout::timeout(5) {
ftp = Net::FTP.new(host,pass,host)
} 
```

问题是这行不通。我的猜测是解释器在打开连接时停止，并且超时不会终止连接，因为解释器被卡住了。

这可能是问题所在吗？

你能告诉我是否有替代解决方案或者我做错了什么？

***有关它的更多信息：***

这个问题在一个月内偶尔会发生一次。最多喜欢两次。客户端向我们发送了 ftp 服务器日志，但那方面似乎没有任何问题。只是FTP根本无缘无故挂在那里......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:54:18.597

我不确定它是否会无限期挂起。如果不是，最好的方法是在/如果最终超时时尝试捕获错误代码。这将为分析提供更多信息。

下面的一些可能的解决方法。

### 超时使用`Process.fork`

但是，与此同时，您可能会切换到在另一个[**进程**](http://www.ruby-doc.org/core-1.9.3/Process.html)中运行 FTP 任务，并在其上使用超时。这将防止 ruby​​ 全局解释器锁禁用您现在怀疑的可能的超时事件。

像这样的东西：

```
child = Process.fork do
  # Run the whole FTP task in here...
  ftp = Net::FTP.new(...)
  ...
end

# Timeout handling is done in the parent process
begin
  Timeout::timeout(...) do
    Process.wait(child)
  end 
rescue Timeout::Error
  # Terminate child in case of timeout
  Process.kill("KILL", child)
end 
```

### 超时使用`SystemTimer`

另一个选择，因为您正在运行 ruby​​ 1.8.6，所以看看[**SystemTimer**](http://ph7spot.com/musings/system-timer)，它试图绕过 ruby​​ 1.8`Timeout`实现的限制。

# objective-c - 修改录制剪辑的音频音高 (m4v)

> ID：10988435
> 
> 赞同：9
> 
> 时间：2012-06-11T22:36:44.837
> 
> 标签：objective-c, ios, audio, pitch

我正在编写一个应用程序，我在录制电影（.m4v）时试图改变音频的音高。或者通过之后修改电影的音频音高。我希望最终结果是一部电影（.m4v），它具有原始长度（即与原始视觉相同）但具有修改的音高，例如“花栗鼠声音”。如果可能的话，最好选择实时转换。

我已经阅读了很多关于在 iOS 中更改音频音高的文章，但大多数示例都侧重于播放，即以不同的音高播放声音。

在我的应用程序中，我正在录制电影 (.m4v / AVFileTypeQuickTimeMovie) 并使用标准 AVAssetWriter 保存它。保存电影时，我可以访问以下我试图操纵音频的元素（例如修改音高）：

*   音频缓冲区 (CMSampleBufferRef)
*   音频输入编写器 (AVAssetWriterAudioInput)
*   音频输入写入器选项（例如 AVNumberOfChannelsKey、AVSampleRateKey、AVChannelLayoutKey）
*   资产编写器 (AVAssetWriter)

我试图挂钩上述对象来修改音频音高，但没有成功。

我也尝试过使用 Dirac，如下所述：[Real Time Pitch Change In iPhone Using Dirac](https://stackoverflow.com/questions/6927597/real-time-pitch-change-in-iphone-using-dirac)
And OpenAL with AL_PITCH as described here：将[OpenAL 的输出管道传输到缓冲区](https://stackoverflow.com/questions/4364901/ios-pitch-shifting-piping-output-from-openal-into-a-buffer)
和 un4seen 的“BASS”库：[实时更改音高/速度](https://stackoverflow.com/questions/9786268/iphone-ipad-change-pitch-tempo-in-realtime)

我没有发现上述任何库的成功，很可能是因为我真的不知道如何使用它们，也不知道在哪里将它们连接到音频保存代码中。

似乎有很多库具有类似的效果，但侧重于播放或自定义录制代码。我想操作已有的音频流 (AVAssetWriterAudioInput) 或修改保存的影片剪辑 (.m4v)。我希望视频在视觉上保持不变，即以相同的速度播放。但我希望音频更快（如花栗鼠）或更慢（如......怪物？

您对我如何实时（录制电影时）或之后通过转换整个电影（.m4v 文件）修改音高有什么建议吗？我应该进一步研究 Dirac、OpenAL、SoundTouch、BASS 还是其他一些库？

我希望能够通过修改过的音频与其他人分享电影，这就是我不能仅仅依靠修改音高来播放的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:18:06.557

好吧，我可以肯定地说，狄拉克肯定会成功。我已经使用它并且它确实有效。

我对视频处理没有太多经验，但如果在某个时候你可以隔离音轨，那就小菜一碟了。

1.  如果你能做到这一点，那么只需将它保存到一个文件中并使用 dirac 的时间拉伸示例代码，它并没有说它，但它也会进行音高转换，你设置三个参数来转换你的音频（时间拉伸因子，音高转换分/音*以及共振峰移位）。

2.  如果您不想将其保存到文件中，那么只需将其转换为 PCM 并在音频单元上执行一些 DSP。老实说，您需要一些关于数学和音频处理的严肃知识才能做到这一点，但是那里有很多很好的示例项目（github（Tom Zic 的 AudioGraph））可以为您提供所需的东西，不要忘记在您的工作中提及所有这些开发人员代码。

此外，如果您可以转换为 PCM，则在此阶段您可以将 dirac 应用于未压缩的音频，或者在音频单元图上实时显示，或者使用它们的示例代码，而不是使用 Dirac 使用的 EAFReader，只需将缓冲区数据传递到它用于执行音高转换的缓冲区。您可能需要在那里做一些魔术，但不像编写自己的音高转换 DSP 实现那样引人注目。

最重要的是，如果您只能要求 AVFoundation 处理视频，那么您可以进行音频单元实时处理并设置回调，因此每次处理它时，您都可以将处理后的数据传递给文件，或者可能传递给您的 avassetwriter，我是不太确定这最后一块是否可行。如果不可能，那么解决方案是分别同步和保存视频和音频，尽管我可以想象这是一个巨大的问题，因为它们都会尝试同时写入磁盘。请让我知道它是怎么回事，我现在很感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:55:11.733

*   您需要做的第一件事是从 mp4 流中**解复用音频。**您将需要一个解复用器（简称解复用器）来实现这一点。看看[MainConcept SDKs](http://www.mainconcept.com/products/sdks/video/mpeg-4-part-2h263.html)，它们支持一堆格式。
*   其次，您需要将压缩音频从任何格式**解码**为原始 PCM。
*   然后使用一些库来**改变**原始音频。
*   接下来，您需要将音高偏移的音频**编码**回压缩格式。
*   并**复用**回 mp4。

由于解码编码，您将在此过程中失去一些音频质量。您的视频将保持不变。

# c - 在 C 中使用管道在进程之间发送浮点值

> ID：10988438
> 
> 赞同：1
> 
> 时间：2012-06-11T22:36:58.397
> 
> 标签：c, ipc, fork

是否有一种标准方法可以将浮点值从子进程发送到 C 中的父进程。

我有一些计算，我想分叉一个进程，然后让孩子做一些忙碌的工作，父母做其他事情，然后孩子将其值（是双精度值）发送回父母（大概通过管道） . 显然父母可以解析流，但我只是想知道是否有更清洁的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T22:46:03.810

如果您只是在同一台机器上的两个进程之间发送它们，则无需花哨。在发送方：

```
double my_float;
write(fd, &my_float, sizeof(myfloat)); 
```

在接收方：

```
double my_float;
read(fd, &my_float, sizeof(my_float)); 
```

`write`您当然应该检查and的返回值`read`。

# java - 使用 eclipse 的 hibernate 工具生成所有源 hbm 和 java 文件

> ID：10988440
> 
> 赞同：0
> 
> 时间：2012-06-11T22:37:21.010
> 
> 标签：java, hibernate, code-generation

我有点困惑。我看到的教程和答案让您创建了 hbm 文件。那有什么意义呢？我想设置我的 mysql 到我的数据库的连接，并说*生成*和*poof*所有 nesacary 文件必须有属性文件 hbm 文件 java 源代码有效。是可能的还是我错过了一些基本的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:44:54.497

在我看来，最好自己编写 hbm 文件。导致“生成和噗”的方式不是 100% 完全证明。此外，如果您的域对象命名不正确，它可能会创建错误的列名。此外，您还错过了适合您要求的 hibernate 各种属性。例如：您可能想使用序列作为 id 生成器，但 hbm 默认为 increment 。

顺便说一句，为什么不寻找**注释**。

**编辑**

您必须安装休眠工具。 [http://docs.jboss.org/tools/2.1.0.Beta1/hibernatetools/html/plugins.html](http://docs.jboss.org/tools/2.1.0.Beta1/hibernatetools/html/plugins.html)
以上是分步指南

# ocaml - OCaml 求和

> ID：10988442
> 
> 赞同：4
> 
> 时间：2012-06-11T22:37:34.737
> 
> 标签：ocaml

我正在尝试在 OCaml 中创建一个函数，该函数在数学中执行求和函数。我试过这个：

```
sum n m f =
    if n = 0 then 0
    else if n > m then f
    else f + sum (n + 1) m f;; 
```

但是，我收到一个错误 - “字符 41-44: else f * sum(n + 1) mf;; 错误：未绑定的值总和和总和带有下划线（有胡萝卜符号指向它）

我看了这个：[简单的 OCaml 练习](https://stackoverflow.com/questions/7775075/simple-ocaml-exercise) 这是同一个问题，但我看到了很多其他我没有的东西。例如，对于我的 n = m 情况，我没有 fn，然后在 else 情况下，我没有 f m。

如果你想让函数返回一个整数，为什么需要 fn？D：有什么问题！？提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-11T22:41:20.517

你忘了`rec`。

`let rec sum n m f = ...`

对于递归函数，您必须手动包含“rec”关键字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T23:35:10.657

1.  你必须使用关键字`let`来引入一个新函数，并且`let rec`这个函数是递归的。

2.  为什么第一个参数命名为`f`？如果它是一个函数，你应该将它应用到某个东西上。

3.  `if n = 0 then 0`多么奇怪的约定！你确定要这个吗？同上`if n > m then f`

现在，您的代码相当于

```
let sum a b c =
  if a = 0 then 0
  else if a > b then c
  else if a < 0 then min (-a*c) ((b-a+1)*c)
  else (b-a+1)*c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-11T19:17:22.433

```
# let rec sum c = function
    (0,_)          -> 0
  | (n,m) when n>m -> c
  | (n,m)          -> c + sum c (n+1,m)
        ;;

# sum 2 (3,5);;
- : int = 8 
```

# d3.js - d3.behavior.zoom 拖拽时抖动、晃动、跳跃和弹跳

> ID：10988445
> 
> 赞同：25
> 
> 时间：2012-06-11T22:38:11.377
> 
> 标签：d3.js

我正在使用 d3.behavior.zoom 在树布局上实现平移和缩放，但它表现出一种我将其描述为弹跳或数值不稳定的行为。当您开始拖动时，显示会莫名其妙地跳来跳去，直到它消失。代码如下所示：

```
var svg = target.append ("g");
...
svg.call (d3.behavior.zoom()
    .translate ([0, 0])
    .scale (1.0)
    .scaleExtent([0.5, 2.0])
    .on("zoom", function() {
        svg.attr("transform","translate(" + d3.event.translate[0] + "," +  d3.event.translate[1] + ") scale(" +  d3.event.scale + ")");
    })
); 
```

有没有更好的方法来设置不会导致这种干扰的转换？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-12T15:03:36.817

仔细观察后，不稳定性来自 svg 元素在移动过程中应用于鼠标位置的转换。我最终得到的解决方案是在具有缩放行为的元素和专门接收缩放/平移转换的元素内容之间插入另一个“g”元素：

```
var svg = target.append ("g");
var child = svg.append ("g");
...
svg.call (d3.behavior.zoom()
    .translate ([0, 0])
    .scale (1.0)
    .scaleExtent([0.5, 2.0])
    .on("zoom", function() {
        child.attr("transform","translate(" + d3.event.translate[0] + "," +  d3.event.translate[1] + ") scale(" +  d3.event.scale + ")");
    })
);
...
child.append("line")... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-06T15:28:05.503

这个答案是@Bretton Wade 使用`D3.js` **v4**的答案的调整版本。

```
 var svg = target.append ("g");
    var child = svg.append ("g");
    ...
    svg.call (d3.zoom()
        .on("zoom", function() {
            child.attr("transform", d3.event.transform);
        })
    );
    ...
    child.append("line")... 
```

# c# - MEF GetExports AllowMultiple = True 不返回任何内容

> ID：10988447
> 
> 赞同：6
> 
> 时间：2012-06-11T22:38:22.670
> 
> 标签：c#, attributes, metadata, mef

我不太了解 MEF，所以希望这是我认为它如何工作的简单修复。

我正在尝试使用 MEF 来获取有关某个类以及应如何使用它的一些信息。我正在使用元数据选项来尝试实现这一目标。我的接口和属性如下所示：

```
public interface IMyInterface
{
}

public interface IMyInterfaceInfo
{
    Type SomeProperty1 { get; }
    double SomeProperty2 { get; }
    string SomeProperty3 { get; }
}

[MetadataAttribute]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = true)]
public class ExportMyInterfaceAttribute : ExportAttribute, IMyInterfaceInfo
{
    public ExportMyInterfaceAttribute(Type someProperty1, double someProperty2, string someProperty3)
        : base(typeof(IMyInterface))
    {
        SomeProperty1 = someProperty1;
        SomeProperty2 = someProperty2;
        SomeProperty3 = someProperty3;
    }

    public Type SomeProperty1 { get; set; }
    public double SomeProperty2 { get; set; }
    public string SomeProperty3 { get; set; }
} 
```

用该属性修饰的类如下所示：

```
[ExportMyInterface(typeof(string), 0.1, "whoo data!")]
[ExportMyInterface(typeof(int), 0.4, "asdfasdf!!")]
public class DecoratedClass : IMyInterface
{
} 
```

尝试使用导入的方法如下所示：

```
private void SomeFunction()
{
    // CompositionContainer is an instance of CompositionContainer
    var myExports = CompositionContainer.GetExports<IMyInterface, IMyInterfaceInfo>();
} 
```

在我的情况下`myExports`总是空的。在我的 CompositionContainer 中，我的目录中有一个 Part 有两个`ExportDefinitions`，两者都具有以下内容`ContractName`：“MyNamespace.IMyInterface”。根据`Metadata`我的导出，它也正确加载。

如果我删除`AllowMultiple`setter 并仅包含一个导出属性，则该`myExports`变量现在具有单个导出及其加载的元数据。

我究竟做错了什么？

**编辑：如果我使用弱类型元数据，我的导出突然得到满足：**

```
var myExports = CompositionContainer.GetExports<IMyInterface, IDictionary<string, object>>(); 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T07:48:37.927

众所周知，MEF 在处理`AllowMultiple = true`. 对于完整的解释，您可以例如查看[here](http://msmvps.com/blogs/kathleen/archive/2009/09/07/a-fix-we-really-need-in-mef-for-net-4-0.aspx)，无论如何，它源于元数据保存在字典中，当 AllowMultiple 为真时，值是数组，并且这样的东西不能映射到您的 IMyInterfaceInfo 上。

这是我使用的解决方法。首先，您的属性应该从 Attribute 派生，而不是从 ExportAttribute 派生：

```
[MetadataAttribute]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = true)]
public class ExportMyInterfaceAttribute : Attribute, IMyInterfaceInfo
{
    public ExportMyInterfaceAttribute(Type someProperty1, double someProperty2, string someProperty3)

    {
        SomeProperty1 = someProperty1;
        SomeProperty2 = someProperty2;
        SomeProperty3 = someProperty3;
    }

    public Type SomeProperty1 { get; set; }
    public double SomeProperty2 { get; set; }
    public string SomeProperty3 { get; set; }
} 
```

这意味着导出的类应该有 3 个属性，一个标准导出和您的自定义属性：

```
[Export(typeof(IMyInterface))]
[ExportMyInterface(typeof(string), 0.1, "whoo data!")]
[ExportMyInterface(typeof(int), 0.4, "asdfasdf!!")]
public class DecoratedClass : IMyInterface 
```

然后，您必须为将要导入的元数据定义一个视图。这必须有一个以 IDictionary 作为参数的构造函数。像这样的东西：

```
public class MyInterfaceInfoView
{
    public IMyInterfaceInfo[] Infos { get; set; }

    public MyInterfaceInfoView(IDictionary<string, object> aDict)
    {
        Type[] p1 = aDict["SomeProperty1"] as Type[];
        double[] p2 = aDict["SomeProperty2"] as double[];
        string[] p3 = aDict["SomeProperty3"] as string[];

        Infos = new ExportMyInterfaceAttribute[p1.Length];
        for (int i = 0; i < Infos.Length; i++)
            Infos[i] = new ExportMyInterfaceAttribute(p1[i], p2[i], p3[i]);
    }
} 
```

现在您应该可以成功调用

```
var myExports = CompositionContainer.GetExports<IMyInterface, MyInterfaceInfoView>(); 
```

# r - 如何减少保持其他列顺序的数据框

> ID：10988449
> 
> 赞同：4
> 
> 时间：2012-06-11T22:38:27.633
> 
> 标签：r, dataframe, plyr, data.table

我正在尝试使用`max`给定列上的函数来减少数据框。我想保留其他列，但保留选择每个最大值的同一行的值。一个例子将使这个解释更容易。

假设我们有以下数据框：

```
dframe <- data.frame(list(BENCH=sort(rep(letters[1:4], 4)),
                          CFG=rep(1:4, 4),
                          VALUE=runif(4 * 4)
                         )) 
```

这给了我：

```
   基准配置值
1 一 1 0.98828096
2 一 2 0.19630597
3 一 3 0.83539540
4一4 0.90988296
5 b 1 0.01191147
6 b 2 0.35164194
7 b 3 0.55094787
8 b 4 0.20744004
9 c 1 0.49864470
10 c 2 0.77845408
11 c 3 0.25278871
12 c 4 0.23440847
13 天 1 0.29795494
14 天 2 0.91766057
15 天 3 0.68044728
16 天 4 0.18448748

```

现在，我想减少数据以便为每个不同的 BENCH 选择最大值：

```
aggregate(VALUE ~ BENCH, dframe, FUN=max) 
```

这给了我预期的结果：

```
  基准值
1 个 0.9882810
2 b 0.5509479
3 c 0.7784541
4 d 0.9176606

```

接下来，我尝试保留其他列：

```
aggregate(cbind(VALUE, CFG) ~ BENCH, dframe, FUN=max) 
```

这种减少返回：

```
  基准值 CFG
1个0.9882810 4
2 b 0.5509479 4
3 c 0.7784541 4
4 d 0.9176606 4

```

VALUE 和 CFG 都使用`max`函数减少。但这不是我想要的。例如，在这个例子中，我想获得：

```
  基准值 CFG
1个0.9882810 1
2 b 0.5509479 3
3 c 0.7784541 2
4 d 0.9176606 2

```

其中 CFG 没有减少，但它只是保持与每个不同 BENCH 的最大值相关联的值。

我怎样才能改变我的减少以获得最后显示的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T00:08:41.480

如果您的问题扩展到大数据（数百万或数百万行和组），那么包`data.table`可能会引起人们的兴趣。这是相关的语法：

```
require(data.table)
dtable <- data.table(dframe)
dtable[, .SD[which.max(VALUE),], by = BENCH] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T22:48:46.693

这是一个基本的 R 解决方案：

```
do.call(rbind, by(dframe, dframe$BENCH, FUN=function(X) X[which.max(X$VALUE),]))
#   BENCH CFG     VALUE
# a     a   1 0.9882810
# b     b   3 0.5509479
# c     c   2 0.7784541
# d     d   2 0.9176606 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T22:46:34.283

你可以`ddply`从`plyr`包中使用：

```
ddply(dframe, 
      .(BENCH), 
      function(df) return(df[df$VALUE==max(df$VALUE),])) 
```

# ruby-on-rails - 嵌套路由显示操作：它期望什么对象？

> ID：10988450
> 
> 赞同：0
> 
> 时间：2012-06-11T22:38:42.513
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这是我的 rake 路线中的相关行：

```
 client_note GET    /clients/:client_id/notes/:id(.:format)      notes#show 
```

当我尝试传入`<%= client_note_path([client, @notes.first]) %>>`我得到的对象时：

```
No route matches {:action=>"show", :controller=>"notes", 
:client_id=>[#<Client id: 5, ... , #<Note id: 9, ...]} 
```

这让我想到尝试客户端 ID。所以，我尝试了：`<%= client_note_path([client.id, @notes.first]) %>`

这给了我：

```
No route matches {:action=>"show", :controller=>"notes", :client_id=>[5, 
#<Note id: 9,content: "He just bought a brand new bobcat, be sure to charg...", 
client_id: 5, created_at: "2012-06-11 16:18:16", 
updated_at: "2012-06-11 16:18:16">]} 
```

这让我想尝试只传递一个客户端 ID。`<%= client_note_path(client.id) %>`

```
No route matches {:action=>"show", :controller=>"notes", :client_id=>5} 
```

仍然不是我要找的。我希望能够显示通常可以在 url 中找到的单个注释，如下所示：`http://localhost:3000/clients/2/notes/3/`

它期望什么对象？

*完整的路线文件和耙路线*

```
 users GET    /users(.:format)                             users#index
                 POST   /users(.:format)                             users#create
        new_user GET    /users/new(.:format)                         users#new
       edit_user GET    /users/:id/edit(.:format)                    users#edit
            user GET    /users/:id(.:format)                         users#show
                 PUT    /users/:id(.:format)                         users#update
                 DELETE /users/:id(.:format)                         users#destroy
        sessions POST   /sessions(.:format)                          sessions#create
     new_session GET    /sessions/new(.:format)                      sessions#new
         session DELETE /sessions/:id(.:format)                      sessions#destroy
    client_notes GET    /clients/:client_id/notes(.:format)          notes#index
                 POST   /clients/:client_id/notes(.:format)          notes#create
 new_client_note GET    /clients/:client_id/notes/new(.:format)      notes#new
edit_client_note GET    /clients/:client_id/notes/:id/edit(.:format) notes#edit
     client_note GET    /clients/:client_id/notes/:id(.:format)      notes#show
                 PUT    /clients/:client_id/notes/:id(.:format)      notes#update
                 DELETE /clients/:client_id/notes/:id(.:format)      notes#destroy
         clients GET    /clients(.:format)                           clients#index
                 POST   /clients(.:format)                           clients#create
      new_client GET    /clients/new(.:format)                       clients#new
     edit_client GET    /clients/:id/edit(.:format)                  clients#edit
          client GET    /clients/:id(.:format)                       clients#show
                 PUT    /clients/:id(.:format)                       clients#update
                 DELETE /clients/:id(.:format)                       clients#destroy
            root        /                                            clients#index
          signup        /signup(.:format)                            users#new
          signin        /signin(.:format)                            sessions#new
         signout DELETE /signout(.:format)                           sessions#destroy 
```

和：

```
resources :users 
resources :sessions, only: [:new, :create, :destroy]
resources :clients do
  resources :notes
end

root to: 'clients#index'

match '/signup',  to: 'users#new'
match '/signin',  to: 'sessions#new'
match '/signout', to: 'sessions#destroy', via: :delete 
```

*附加信息：*

将行更改为`<%= client_note_path(client, @notes.first) %>`结果：

```
No route matches {:action=>"show", :controller=>"notes", :client_id=>#<Client id: 6, 
company_name: "John and Sons Roofing", contact_name: "John Wonder", phone_number: "1-    
555-283-9999", email_address: "bob@example.com", street_address: "13 Oak Street", city:
"Oakville", state: "Iowa", zip: "53457", image_location: "http://image-
location.com/image/john.jpg", created_at: "2012-06-11 16:18:16", updated_at: "2012-06-11    
16:18:16", url: "www.johnroofing.com">, :id=>nil} 
```

这给了我一个 nil 的 ID。但是，我有`<%= @notes.first.blank? ? "No Notes" : @notes.first.content%>`并且返回了注释内容，所以我不明白为什么它不起作用。另外，让我们用 id 试试，只是为了好玩！`<%= client_note_path(client.id, @notes.first.id) %>`

现在我们得到：`Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id`。查看数据库，客户的便笺 ID 是 9 和 5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:50:04.477

我相信您的问题是您将对象作为单个参数放入数组中，而不仅仅是传递两个参数。正确的方法是

```
client_note_path(client, @notes.first) 
```

请注意，您可以传入对象本身（如图所示），也可以传入其中一个或两个的对象的 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T22:50:24.463

该`client_note_path`方法需要*两个，count 'em，两个*参数：

```
client_note_path(client, note) 
```

一个`Client`对象和一个`Note`对象。或者一个 id 代表一个对象的一个`Client`​​和另一个。`Note`

你遇到的问题是因为你没有告诉它你想要什么音符，或者你使用了一个数组。通过使用数组，它只会接收一个参数。

# mysql - 在模型中播放 2.0 MySql 关键字

> ID：10988452
> 
> 赞同：1
> 
> 时间：2012-06-11T22:39:24.217
> 
> 标签：mysql, playframework

是否可以在 Play 2.0 模型中将 MySql 的关键字用于表/列（类/属性）名称？我的意思是像“比赛”这样的词（像足球比赛一样比赛）？我问是因为默认情况下生成的 SQL 不引用表/列名，因此执行生成的 SQL 失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:53:07.537

[JPA @Column 注释](http://www.objectdb.com/api/java/jpa/Column)让您可以设置数据库中字段的名称。你可以使用它，这样生成的 SQL 就不会与 MySQL 冲突，同时保持 Java 名称相同。

# ubuntu - pptpd 不适用于 Azure 中的 Ubuntu VPS

> ID：10988457
> 
> 赞同：0
> 
> 时间：2012-06-11T22:40:04.730
> 
> 标签：ubuntu, azure, ppp

我已经设置了一个在 Azura 的 Ubuntu 实例上运行的 pptpd。当我尝试从客户端连接时，连接超时。在我看来，它与 GRE 协议有关，也许 Azure 不支持它？

端口 1723 打开 相同的服务器设置，但在 AWS 中完美运行！

从服务器日志；

```
Jun 12 00:05:06 ubuntu01eus pppd[1258]: pppd 2.4.5 started by root, uid 0
Jun 12 00:05:06 ubuntu01eus pppd[1258]: Using interface ppp0
Jun 12 00:05:06 ubuntu01eus pppd[1258]: Connect: ppp0 <--> /dev/pts/1
Jun 12 00:05:06 ubuntu01eus pptpd[1257]: GRE: Bad checksum from pppd.
Jun 12 00:05:36 ubuntu01eus pptpd[1257]: CTRL: EOF or bad error reading ctrl packet length.
Jun 12 00:05:36 ubuntu01eus pptpd[1257]: CTRL: couldn't read packet header (exit)
Jun 12 00:05:36 ubuntu01eus pptpd[1257]: CTRL: CTRL read failed
Jun 12 00:05:36 ubuntu01eus pptpd[1257]: CTRL: Reaping child PPP[1258]
Jun 12 00:05:36 ubuntu01eus pppd[1258]: Hangup (SIGHUP)
Jun 12 00:05:36 ubuntu01eus pppd[1258]: Modem hangup
Jun 12 00:05:36 ubuntu01eus pppd[1258]: Connection terminated.
Jun 12 00:05:36 ubuntu01eus pppd[1258]: Exit.
Jun 12 00:05:36 ubuntu01eus pptpd[1257]: CTRL: Client xx.230.xxx.248 control connection finished 
```

/J

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T02:02:21.683

pptp 需要 TCP 和 GRE（IP 协议 47）。Windows Azure 目前仅支持 TCP 和 UDP。

您要实现的场景是什么？Windows Azure 提供了一些连接解决方​​案，例如 Azure Connect 和 Azure 虚拟网络，也许其中之一可以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-22T20:05:17.413

简短的回答：没有。

原因是 Azure 不会在本地和 Azure 虚拟网络之间路由 GRE 数据包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T00:06:53.257

但是我不确定这个功能是否需要在 Ubuntu VM 中支持虚拟网络？在预览期间，适用于 Linux 的 Windows Azure 虚拟机不支持虚拟网络。

因此，如果是这种情况，它可能是您的根本原因。如果您需要获得更好的帮助，我建议您直接在 Windows Azure Virtual Machines for Linux 支持论坛上提问，这样您就可以从各自的团队获得准确的反馈。支持的论坛链接在这里：

[http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesforLinux/threads](http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesforLinux/threads)

# javascript - 在 .Each 循环内仅追加一次

> ID：10988462
> 
> 赞同：3
> 
> 时间：2012-06-11T22:40:58.537
> 
> 标签：javascript, jquery, loops

我正在构建一个功能，它告诉读者他们已经阅读了特定的帖子。为此，我需要通知用户，我通过将一个元素附加到 .article 来做到这一点。我遇到的问题是，因为我在 .each 循环中追加，所以元素追加了 4 次。

这是我的代码：

```
$('.article-container').each(function() {

    // CHECK IF THE DATA IS IN THE ARRAY    
    if(cookieValue.indexOf($(this).data('id')) != -1) {                     

        $(this).addClass('readit');                                         
        $('<h4 class="readit-alert">You&apos;ve read it!</h4>').appendTo('.article-container.readit');

    } else {

        // OTHERWISE, ADD CLASS NOT READ                
        $(this).addClass('notread');                                        

    }

}); 
```

这是它返回的内容：

```
<h4 class="readit-alert">You&apos;ve read it!</h4>
<h4 class="readit-alert">You&apos;ve read it!</h4>
<h4 class="readit-alert">You&apos;ve read it!</h4>
<h4 class="readit-alert">You&apos;ve read it!</h4> 
```

如何写这个只在文章容器中附加一次“readit-alert”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T22:42:58.280

`return false;`如果要停止循环执行，请在追加后添加。

否则，`var appended = false;`在函数外部有一个全局变量，然后`true`在添加后将其设置为。

那是：

```
var appended = false;

$('.article-container').each(function() {

    // CHECK IF THE DATA IS IN THE ARRAY    
    if(cookieValue.indexOf($(this).data('id')) != -1) {                     

        $(this).addClass('readit');   

        if (!appended){                                      
                $('<h4 class="readit-alert">You&apos;ve read it!</h4>').appendTo('.article-container.readit');
                appended = true;
        }
    } else {

        // OTHERWISE, ADD CLASS NOT READ                
        $(this).addClass('notread');                                        

    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T23:05:59.760

在玩弄了上面的代码之后，这就是让它按照我需要的方式工作的原因。希望这可以帮助。

```
var appended = false;

$('.article-container').each(function() {

    // CHECK IF THE DATA IS IN THE ARRAY    
    if(cookieValue.indexOf($(this).data('id')) != -1) {                     

        $(this).addClass('readit');   

        if (!appended){                                      
            $('<h4 class="readit-alert">You&apos;ve read it!</h4>').appendTo('.article-container.readit');
            appended = true;
        }

    } else {

        // OTHERWISE, ADD CLASS NOT READ                
        $(this).addClass('notread'); 
        appended = false;                    

    }

}); 
```

# android - 针对 android 工具链上的 C++ 标准库进行编译

> ID：10988467
> 
> 赞同：3
> 
> 时间：2012-06-11T22:41:38.550
> 
> 标签：android, c++, stl, android-ndk, g++

我有一个非常简单的 helloworld.cpp 程序

```
#include <iostream>
using namespace std;
int main ()
{
  cout << "Hello World!";
  return 0;
} 
```

我正在尝试使用工具链中的交叉编译器为 android x86 编译它：

```
/Users/me/android-ndk-r8/toolchains/x86-4.4.3/prebuilt/darwin-x86/bin/i686-android-linux-g++ helloworld.cpp -L "/Users/me/android-ndk-r8/sources/cxx-stl/stlport/libs/x86/" -lstlport_static 
```

但是，我收到错误：

```
helloworld.cpp:2:20: error: iostream: No such file or directory 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T02:08:32.807

检查 NDK 中包含的 documentation.html 文件，位于“独立工具链”下。它说如果您以这种方式调用编译器，您将无法“使用任何 C++ STL”。但是，正如文档所解释的那样，如果您首先使用以下命令创建“自定义”工具链安装，则它是可能的：

```
$NDK/build/tools/make-standalone-toolchain.sh --platform=android-8 --install-dir=/tmp/my-android-toolchain --arch=x86 
```

其中 $NDK 是 NDK 目录的路径。注意 --arch=x86 这意味着工具链是专门为 x86 Android 准备的。这会在一个目录中准备好您需要的内容，包括 STL 标头和文件夹。然后，您应该能够使用 -lstdc++ 链接到 STL（静态版本），例如：

```
/tmp/my-android-toolchain/bin/i686-android-linux-g++ helloworld.cpp -lstdc++ 
```

如需更完整的说明，请参阅 NDK 文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-03T16:24:41.437

NDK 文档并不完全准确，至少目前不准确。事实上，它在使用预构建工具链时声明“您将无法使用任何 C++ STL（STLport 或 GNU libstdc++）。”，但这已经过时了。我使用包含相同的错误创建了一个小型 hello world 程序。但是，无需创建自己的工具链即可解决此问题，如果您不想在配置过程中再添加一个步骤，并且允许您始终使用最新的 SDK 平台，而无需每次都创建新的工具链，那就太好了。

NDK 附带了几个版本的标准 C++ 库的源代码：GAbi++、STLport 和 GNU STL。每种风格都带有预构建的共享库和静态库。我下面的示例将使用 stlport。

要在其安装位置使用独立工具链，您可以执行以下操作：export CXX='$NDK_ROOT/toolchains/arm-linux-androideabi-4.8/prebuilt/darwin-x86_64/bin/arm-linux-androideabi- g++ --sysroot="$NDK_ROOT/platforms/android-19/arch-arm"'

例如，这会将您的 CXX 编译器设置为使用 SDK 平台级别 19 在 OS X 系统上编译 ARM。您可能已经知道这一点。此外，如果您使用它，您可能希望导出您的 CC、CPP、LD、AR 和 RANLIB。我还亲自为 READELF 创建了一个 envar。

要添加对 C++ 库的支持，您可以执行以下操作： $CXX helloworld.cpp -I$NDK_ROOT/sources/cxx-stl/stlport/stlport -L$NDK_ROOT/sources/cxx-stl/stlport/libs/armeabi - lstlport_shared

请注意，这将链接 libstlport_shared.so 现在在运行时需要它，因此您可能需要向上述命令添加相对路径以支持该路径，具体取决于您的 APK 结构。如果您只想测试这个简单的案例，您可以在模拟器上运行它，如下所示：

```
adb push a.out /data
adb push $NDK_ROOT/sources/cxx-stl/stlport/libs/armeabi/libstlport_shared.so /data
adb shell
# su
# cd /data
# chmod 777 a.out
# ./a.out 
```

为了摆脱处理共享库路径的麻烦，您还可以通过将“-lstlport_shared”更改为“-lstlport_static”来静态链接 C++ 库。这样做会产生一些后果，如 NDK 开发指南中所述。最大的问题是由于静态库在多个位置链接，导致： - 在一个库中分配的内存并在另一个库中释放会泄漏甚至损坏堆。- 在 libfoo.so 中引发的异常不能在 libbar.so 中捕获（并且可能会简单地使程序崩溃）。- std::cout 的缓冲不能正常工作

还包括一个有用的工具，即 readelf 工具，可以查看您的程序具有哪些依赖项。

要查看您的程序需要哪些其他共享库，您可以运行以下命令： $NDK_ROOT/toolchains/arm-linux-androideabi-4.8/prebuilt/darwin-x86_64/bin/arm-linux-androideabi-readelf -a a.out | 需要 grep

其他很酷的标准工具： addr2line - 将堆栈跟踪地址转换为代码行 nm - 显示符号表 objdump - 显示对象的信息

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-10-05T18:44:44.173

我从 gnustl 调用其中一个函数，在它从预建的 aosp arm-linux-androideabi-gcc --std=c++11 运行良好并且在崩溃错误之后我无法从日志或原因中获得回溯，我希望转向交叉构建qemu-linux-user 在 arm 上运行主机编译的 i686 二进制文件，困难在于与来自 adt 的跨主机库交互总是在平台特定库以外的任何其他库上崩溃，除非内核模块打包更新是可能的......

# vim - vim 颜色方案中的哪一行正在为我的 FuzzyFinder 弹出窗口着色？

> ID：10988468
> 
> 赞同：2
> 
> 时间：2012-06-11T22:41:51.387
> 
> 标签：vim, fuzzyfinder

我刚刚为 gvim 安装了 FuzzyFinder，但由于某种原因，它使用了我最喜欢的配色方案，它使用了一种灼热的粉红色背景色，这让我很`desert`恼火。

我浏览了desert.vim，但找不到任何定义这种颜色的行（0xFF00FF）（desert.vim 附加在帖子末尾）。

谁能说出这种颜色的来源，以便我可以将其更改为不同的颜色？也许它是“cterm”颜色之一？我怎样才能找出那些 cterm 颜色是从哪里定义的？

![在此处输入图像描述](../Images/b5a07b7c1d883101a2ab7943274ebac9.png)

沙漠.vim：

```
" Vim color file
" Maintainer:   Hans Fugal <hans@fugal.net>
" Last Change:  $Date: 2004/06/13 19:30:30 $
" Last Change:  $Date: 2004/06/13 19:30:30 $
" URL:      http://hans.fugal.net/vim/colors/desert.vim
" Version:  $Id: desert.vim,v 1.1 2004/06/13 19:30:30 vimboss Exp $

" cool help screens
" :he group-name
" :he highlight-groups
" :he cterm-colors

set background=dark
if version > 580
    " no guarantees for version 5.8 and below, but this makes it stop
    " complaining
    hi clear
    if exists("syntax_on")
    syntax reset
    endif
endif
let g:colors_name="desert"

hi Normal   guifg=White guibg=grey20

" highlight groups
hi Cursor   guibg=khaki guifg=slategrey
"hi CursorIM
"hi Directory
"hi DiffAdd
"hi DiffChange
"hi DiffDelete
"hi DiffText
"hi ErrorMsg
hi VertSplit    guibg=#c2bfa5 guifg=grey50 gui=none
hi Folded   guibg=grey30 guifg=gold
hi FoldColumn   guibg=grey30 guifg=tan
hi IncSearch    guifg=slategrey guibg=khaki
"hi LineNr
hi ModeMsg  guifg=goldenrod
hi MoreMsg  guifg=SeaGreen
hi NonText  guifg=LightBlue guibg=grey30
hi Question guifg=springgreen
hi Search   guibg=peru guifg=wheat
hi SpecialKey   guifg=yellowgreen
hi StatusLine   guibg=#c2bfa5 guifg=black gui=none
hi StatusLineNC guibg=#c2bfa5 guifg=grey50 gui=none
hi Title    guifg=indianred
hi Visual   gui=none guifg=khaki guibg=olivedrab
"hi VisualNOS
hi WarningMsg   guifg=salmon
"hi WildMenu
"hi Menu
"hi Scrollbar
"hi Tooltip

" syntax highlighting groups
hi Comment  guifg=SkyBlue
hi Constant guifg=#ffa0a0
hi Identifier   guifg=palegreen
hi Statement    guifg=khaki
hi PreProc  guifg=indianred
hi Type     guifg=darkkhaki
hi Special  guifg=navajowhite
"hi Underlined
hi Ignore   guifg=grey40
"hi Error
hi Todo     guifg=orangered guibg=yellow2

" color terminal definitions
hi SpecialKey   ctermfg=darkgreen
hi NonText  cterm=bold ctermfg=darkblue
hi Directory    ctermfg=darkcyan
hi ErrorMsg cterm=bold ctermfg=7 ctermbg=1
hi IncSearch    cterm=NONE ctermfg=yellow ctermbg=green
hi Search   cterm=NONE ctermfg=grey ctermbg=blue
hi MoreMsg  ctermfg=darkgreen
hi ModeMsg  cterm=NONE ctermfg=brown
hi LineNr   ctermfg=3
hi Question ctermfg=green
hi StatusLine   cterm=bold,reverse
hi StatusLineNC cterm=reverse
hi VertSplit    cterm=reverse
hi Title    ctermfg=5
hi Visual   cterm=reverse
hi VisualNOS    cterm=bold,underline
hi WarningMsg   ctermfg=1
hi WildMenu ctermfg=0 ctermbg=3
hi Folded   ctermfg=darkgrey ctermbg=NONE
hi FoldColumn   ctermfg=darkgrey ctermbg=NONE
hi DiffAdd  ctermbg=4
hi DiffChange   ctermbg=5
hi DiffDelete   cterm=bold ctermfg=4 ctermbg=6
hi DiffText cterm=bold ctermbg=1
hi Comment  ctermfg=darkcyan
hi Constant ctermfg=brown
hi Special  ctermfg=5
hi Identifier   ctermfg=6
hi Statement    ctermfg=3
hi PreProc  ctermfg=5
hi Type     ctermfg=2
hi Underlined   cterm=underline ctermfg=5
hi Ignore   cterm=bold ctermfg=7
hi Ignore   ctermfg=darkgrey
hi Error    cterm=bold ctermfg=7 ctermbg=1

"vim: sw=4 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T23:03:37.950

尝试使用

> Pmenu 弹出菜单：普通项目

```
:hi Pmenu ctermbg=red  "for vim
:hi Pmenu guibg=red    "for gvim 
```

# g++ - glibc 版本的编译时间检查

> ID：10988470
> 
> 赞同：2
> 
> 时间：2012-06-11T22:42:06.537
> 
> 标签：g++, glibc

我需要编译时检查将使用哪个版本的 glibc。

我能找到的唯一编译时间检查（即#defines）返回glibc日期（__GLIBCXX__），日期和版本之间的对应关系似乎不确定。您如何在编译时检查将要使用的 glibc 版本？

我的代码将在多个系统上编译和运行，包括一个非常旧的系统。特别是我对使用 malloc_info 感兴趣（请参阅[http://man7.org/linux/man-pages/man3/malloc_info.3.html](http://man7.org/linux/man-pages/man3/malloc_info.3.html)）。这是在 2.10 版中添加到 glibc 中的。该程序将在其构建的相同（或相同的系统）上使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T22:54:11.863

我认为您正在寻找的是`__GLIBC__`and `__GLIBC_MINOR__`，它代表`int`GNU C 库的主要和次要版本号。看看[这个](http://www.acsu.buffalo.edu/~charngda/cc.html)（[存档链接](https://web.archive.org/web/20120108145020/http://www.acsu.buffalo.edu/~charngda/cc.html)）了解更多详情。

因此，如果`__GLIBC__`大于 2，或者`__GLIBC__`等于 2 并且`__GLIBC_MINOR__`大于或等于 10，那么`malloc_info()`应该可以工作。

# apache-pig - Apache Pig：组操作后去除命名空间前缀 (::)

> ID：10988473
> 
> 赞同：10
> 
> 时间：2012-06-11T22:42:30.253
> 
> 标签：apache-pig

我的数据处理中的一个常见模式是按一组列分组，应用过滤器，然后再次展平。例如：

```
my_data_grouped = group my_data by some_column;
my_data_grouped = filter my_data_grouped by <some expression>;
my_data = foreach my_data_grouped flatten(my_data); 
```

这里的问题是，如果`my_data`在此操作之后以类似 (c1, c2, c3) 的模式开始，它将具有类似 (mydata::c1, mydata::c2, mydata::c3) 的模式。如果列是唯一的，有没有办法轻松去除“mydata::”前缀？

我知道我可以做这样的事情：

```
my_data = foreach my_data generate c1 as c1, c2 as c2, c3 as c3; 
```

但是，对于具有大量列的数据集，这会变得尴尬且难以维护，而对于具有可变列的数据集来说，这是不可能的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:11:57.340

如果架构中的所有字段都具有相同的前缀集（例如 group1::id、group1::amount 等），您可以在引用特定字段时忽略前缀（并将它们引用为 id、amount 等）

或者，如果您仍然希望去除单级前缀的架构，您可以使用这样的 UDF：

```
public class RemoveGroupFromTupleSchema extends EvalFunc<Tuple> {

@Override
public Tuple exec(Tuple input) throws IOException {
    Tuple result = input;
    return result;
}

@Override
public Schema outputSchema(Schema input) throws FrontendException {
    if(input.size() != 1) {
        throw new RuntimeException("Expected input (tuple) but input does not have 1 field");
    }

    List<Schema.FieldSchema> inputSchema = input.getFields();
    List<Schema.FieldSchema> outputSchema = new ArrayList<Schema.FieldSchema>(inputSchema);
    for(int i = 0; i < inputSchema.size(); i++) {
        Schema.FieldSchema thisInputFieldSchema = inputSchema.get(i);
        String inputFieldName = thisInputFieldSchema.alias;
        Byte dataType = thisInputFieldSchema.type;

        String outputFieldName;
        int findLoc = inputFieldName.indexOf("::");
        if(findLoc == -1) {
            outputFieldName = inputFieldName;
        }
        else {
            outputFieldName = inputFieldName.substring(findLoc+2);
        }
        Schema.FieldSchema thisOutputFieldSchema = new Schema.FieldSchema(outputFieldName, dataType);
        outputSchema.set(i, thisOutputFieldSchema);
    }

    return new Schema(outputSchema);
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:31:14.440

您可以将“AS”语句与“foreach”放在同一行。

IE

```
my_data_grouped = group my_data by some_column;
my_data_grouped = filter my_data_grouped by <some expression>;
my_data = FOREACH my_data_grouped FLATTEN(my_data) AS (c1, c2, c3); 
```

但是，这与在 2 行上执行此操作相同，并且不会缓解您对“具有可变列的数据集”的问题。

# excel - 多个单元格的 Len 函数

> ID：10988476
> 
> 赞同：3
> 
> 时间：2012-06-11T22:43:16.587
> 
> 标签：excel, excel-formula

需要一个像 len 函数这样的字符计数函数，但我需要它来获取一个范围（即 A1:D22）。你建议我用什么？我正在寻找除了在多列和多行中填写 len 函数之外的其他内容，然后将其全部求和。我正在尝试使用一个功能来做到这一点。这是将其用作检查值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T22:49:31.873

如果我理解得很好，您可以使用以下数组公式：

=总和（LEN（A1：D22））

注意：按CTRL+SHIFT+ENTER输入公式（因为这是数组公式）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T22:50:06.153

您可以使用数组公式

```
=SUM(LEN(A1:D22)) 
```

输入并点击 control + shift + Enter

# css - 居中块元素

> ID：10988480
> 
> 赞同：1
> 
> 时间：2012-06-11T22:44:01.607
> 
> 标签：css, css-float, html-lists, block

首先，我首先要说我无法控制 HTML，这就是 HTML 的样子：

```
<ul class="orbit-bullets">
  <li>1</li>
  <li>2</li>
</ul> 
```

我要说的第二点是我不介意使用`inline-block`，但我需要对不支持的浏览器进行后备。

我正在尝试使列表居中。列表项必须内联显示，但它们必须是块元素，因为我声明了宽度、高度和文本缩进。所以我知道我可以使用`display:block; float:left;`，但我希望元素居中。并且有时列表项是三个或四个或更多，所以我不想在小于 500px 的无序列表上设置固定宽度。如果我将宽度设置为 500 像素，当只有两个或三个列表项时，它们会显得非常偏离中心。

**我需要在仍然使用`display:block; float:left;`.**
或者有没有办法在无序列表上具有可变宽度同时仍然居中？我有任何建议。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:54:50.987

试试这个 - [http://jsfiddle.net/jD6yp/](http://jsfiddle.net/jD6yp/)

```
ul {
    width: 500px;
    text-align: center;
    background: beige;
}

li {
    display: inline-block;

    zoom: 1;          /* for old IE-s */
    *display: inline; /* for old IE-s */

    padding: 10px;
    margin: 20px;
    border: 1px solid pink;
} 
```

# automapper - AutoMapper 解析器未传递预期类型

> ID：10988486
> 
> 赞同：4
> 
> 时间：2012-06-11T22:44:43.457
> 
> 标签：automapper

鉴于以下类和解析器，为什么我会收到此错误？我根本不明白为什么要传入 ProductAddModel。

> 用户代码未处理 AutoMapper.AutoMapperMappingException
> Message=Value 提供的类型为 System.Decimal 但预期 AuctionCMS.Framework.Models.Admin.ProductAddModel。更改值解析器源类型，或使用 FromMember 将提供的源值重定向到值解析器。

类型：

```
 public class Currency
    {
        public Int64 Value { get; set; }
        // Spot saved for currency type and any other extra properties
    }

   public class Product
    {
        public Currency Price { get; set; }
        public Currency ReservePrice { get; set; }
          }

    public class ProductAddModel
    {
        public Decimal Price { get; set; }
        public Decimal ReservePrice { get; set; }
    } 
```

解析器代码：

```
public class DecimalToCurrencyValueResolver : ValueResolver<decimal, Currency>
{
    #region Overrides of ValueResolver<decimal,Currency>

    protected override Currency ResolveCore(decimal source)
    {
        return new Currency() { Value = (Int64)((decimal)source) * 1000 };
    }

    #endregion
}

public class CurrencyToDecimalValueResolver : ValueResolver<Currency, decimal>
{
    #region Overrides of ValueResolver<decimal,Currency>

    protected override decimal ResolveCore(Currency source)
    {
        return (decimal)source.Value * 1000;
    } 
```

映射代码：

```
 Mapper.CreateMap<ProductAddModel, Product>()
                .ForMember(x => x.Price, opt => opt.ResolveUsing<DecimalToCurrencyValueResolver>())
                .ForMember(x => x.ReservePrice, opt => opt.ResolveUsing<DecimalToCurrencyValueResolver>());
            Mapper.CreateMap<Product, ProductAddModel>()
                .ForMember(x => x.Price, opt => opt.ResolveUsing<CurrencyToDecimalValueResolver>())
                .ForMember(x => x.ReservePrice, opt => opt.ResolveUsing<CurrencyToDecimalValueResolver>());

var model = new ProductAddModel();
var product = new Product();
Mapper.Map<ProductAddModel, Product>(model, product); 
```

我做错了什么，这种方法是在映射过程中处理简单转换的最佳方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:41:08.913

改用 TypeConverters：

```
 public  class CurrencyToDecimalTypeConverter : ITypeConverter<Currency, Decimal>
    {
        public decimal Convert(ResolutionContext context)
        {
            return ((Currency)context.SourceValue).Value * 1000;
        }
    }

    public class DecimalToCurrencyTypeConverter : ITypeConverter<Decimal, Currency>
    {
        public Currency Convert(ResolutionContext context)
        {
            return new Currency() { Value = (Int64)((decimal)context.SourceValue) * 1000 };
        }
    } 
```

这是配置：

```
Mapper.CreateMap<ProductAddModel, Product>();
Mapper.CreateMap<Product, ProductAddModel>();
Mapper.CreateMap<Decimal, Currency>().ConvertUsing<DecimalToCurrencyTypeConverter>();
Mapper.CreateMap<Currency, Decimal>().ConvertUsing<CurrencyToDecimalTypeConverter>();

var model = new ProductAddModel();
var product = new Product();
Mapper.Map<ProductAddModel, Product>(model, product); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-11T18:33:17.860

在解析器中使用十进制并在映射中传递 productAddModel。所以映射应该是这样的

```
Mapper.CreateMap<ProductAddModel, Product>()
                .ForMember(x => x.Price, opt => opt.ResolveUsing<DecimalToCurrencyValueResolver>().FromMember(e => e.Value )); 
```

# php - 如何存储和更改 Zend_Auth 会话 ID？

> ID：10988488
> 
> 赞同：2
> 
> 时间：2012-06-11T22:45:07.273
> 
> 标签：php, zend-framework, zend-auth

我最近开始使用 Zend Framework，我仍然很习惯 session_start，并将变量分配给某些会话名称（即：$_SESSION['username'] == $username）

我试图弄清楚如何在 Zend 中做类似的事情。现在，我的身份验证脚本使用 LDAP 对我的 AD 服务器检查凭据，如果成功，则对用户进行身份验证。

我想创建一个脚本，允许管理员用户轻松“进入”其他人的会话。假设 admin1 有一个活动会话并且想要切换到 user1 的会话。通常我只会更改 $_SESSION['username'] 变量并有效地更改登录用户的身份。

但是对于 Zend，我不太确定如何更改会话信息。对于它的价值，这是我的身份验证脚本：

```
class LoginController extends Zend_Controller_Action
{
    public function getForm()
    {
        return new LoginForm(array(
            'action' => '/login/process',
            'method' => 'post',
        ));
    }

    public function getAuthAdapter(array $params)
    {
        $username = $params['username'];
        $password = $params['password'];
        $auth = Zend_Auth::getInstance();

        require_once 'Zend/Config/Ini.php';
        $config = new Zend_Config_Ini('../application/configs/application.ini', 'production');
        $log_path = $config->ldap->log_path;
        $options = $config->ldap->toArray();
        unset($options['log_path']);

        require_once 'Zend/Auth/Adapter/Ldap.php';
        $adapter = new Zend_Auth_Adapter_Ldap($options, $username, $password);

        $result = $auth->authenticate($adapter);

        if ($log_path) {
            $messages = $result->getMessages();

            require_once 'Zend/Log.php';
            require_once 'Zend/Log/Writer/Stream.php';
            require_once 'Zend/Log/Filter/Priority.php';
            $logger = new Zend_Log();
            $logger->addWriter(new Zend_Log_Writer_Stream($log_path));
            $filter = new Zend_Log_Filter_Priority(Zend_Log::DEBUG);
            $logger->addFilter($filter);

            foreach ($messages as $i => $message) {
                if ($i-- > 1) { // $messages[2] and up are log messages
                    $message = str_replace("\n", "\n  ", $message);
                    $logger->log("Ldap: $i: $message", Zend_Log::DEBUG);
                }
            }
        }
        return $adapter;
    }
    public function preDispatch()
    {
        if (Zend_Auth::getInstance()->hasIdentity()) {
            // If the user is logged in, we don't want to show the login form;
            // however, the logout action should still be available
            if ('logout' != $this->getRequest()->getActionName()) {
                $this->_helper->redirector('index', 'index');
            }
        } else {
            // If they aren't, they can't logout, so that action should
            // redirect to the login form
            if ('logout' == $this->getRequest()->getActionName()) {
                $this->_helper->redirector('index');
            }
        }
    }
    public function indexAction()
    {
        $this->view->form = $this->getForm();
    }
    public function processAction()
    {
        $request = $this->getRequest();

        // Check if we have a POST request
        if (!$request->isPost()) {
            return $this->_helper->redirector('index');
        }

        // Get our form and validate it
        $form = $this->getForm();
        if (!$form->isValid($request->getPost())) {
            // Invalid entries
            $this->view->form = $form;
            return $this->render('index'); // re-render the login form
        }

        // Get our authentication adapter and check credentials
        $adapter = $this->getAuthAdapter($form->getValues());
        $auth    = Zend_Auth::getInstance();
        $result  = $auth->authenticate($adapter);
        if (!$result->isValid()) {
            // Invalid credentials
            $form->setDescription('Invalid credentials provided');
            $this->view->form = $form;
            return $this->render('index'); // re-render the login form
        }

        // We're authenticated! Redirect to the home page

        $this->_helper->redirector('index', 'index');

    }
    public function logoutAction()
    {
        Zend_Auth::getInstance()->clearIdentity();
        $this->_helper->redirector('index'); // back to login page
    }
} 
```

有什么办法可以做我所描述的吗？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:43:42.180

`Zend_Auth_Storage_Session`给定您的代码，身份验证的结果通过一个对象存储在 PHP 会话中。

调用`Zend_Auth::getIdentity()`获取对存储的访问权，如果它不为空，则返回结果。同样，您可以通过访问底层存储并更改其值来更改存储的身份。作为身份验证结果存储的实际身份`Zend_Auth_Adapter_Ldap`只是一个表示 LDAP 用户名的字符串值。

要有效地更改登录用户，您可以执行以下操作：

```
Zend_Auth::getInstance()->getStorage()->write('newUserName'); 
```

这假定了给定代码的默认行为。

身份验证成功后，我在应用程序中所做的是创建某个用户模型的新对象，并将其写入 Zend_Auth 会话，以便我在每个会话中获得有关用户的更多信息，因此您应该知道不同的事情可以根据应用程序在存储中。

例如，这就是我所做的：

```
$auth       = new Zend_Auth(...);
$authResult = $auth->authenticate();

if ($authResult->isValid() == true) {
    $userobj = new Application_Model_UserSession();
    // populate $userobj with much information about the user
    $auth->getStorage()->write($userobj);
} 
```

现在，在我调用的应用程序中的任何地方，我`Zend_Auth::getInstance()->getIdentity()`都会返回`Application_Model_UserSession`对象而不是字符串；但我离题了。

应该对您有所帮助的信息是：

```
$user = Zend_Auth::getInstance()->getIdentity(); // reads from auth->getStorage()

Zend_Auth::getInstance()->getStorage()->write($newUser); 
```

# google-app-engine - 通过 Objectify / Google App Engine 使用/搜索 AsyncDataProvider

> ID：10988490
> 
> 赞同：1
> 
> 时间：2012-06-11T22:45:20.697
> 
> 标签：google-app-engine, gwt, paging, objectify, dataprovider

我目前有一个使用活动/地点和 AsyncDataProvider 的应用程序。

现在，每次活动加载时 - 它使用请求工厂来检索数据（目前不是很多，但很快就会变得非常大）并将其传递给视图以更新 DataGrid。在更新之前，它会根据搜索框进行过滤。

现在 - 我已经实现了更新 DataGrid 如下：（这段代码不是最漂亮的）

```
private void updateData() {
  final AsyncDataProvider<EquipmentTypeProxy> provider = new AsyncDataProvider<EquipmentTypeProxy>() {

    @Override
    protected void onRangeChanged(HasData<EquipmentTypeProxy> display) {
      int start = display.getVisibleRange().getStart();
      int end = start + display.getVisibleRange().getLength();
      final List<EquipmentTypeProxy> subList = getSubList(start, end);
      end = (end >= subList.size()) ? subList.size() : end;
      if (subList.size() < DATAGRID_PAGE_SIZE) {
        updateRowCount(subList.size(), true);
      } else {
        updateRowCount(data.size(), true);
      }
      updateRowData(start, subList);
    }

    private List<EquipmentTypeProxy> getSubList(int start, int end) {
      final List<EquipmentTypeProxy> filteredEquipment;
      if (searchString == null || searchString.equals("")) {
        if (data.isEmpty() == false && data.size() > (end - start)) {
          filteredEquipment = data.subList(start, end);
        } else {
          filteredEquipment = data;
        }
      } else {
        filteredEquipment = new ArrayList<EquipmentTypeProxy>();
        for (final EquipmentTypeProxy equipmentType : data) {
          if (equipmentType.getName().contains(searchString)) {
            filteredEquipment.add(equipmentType);
          }
        }
      }
      return filteredEquipment;
    }
  };
  provider.addDataDisplay(dataGrid);
} 
```

最终 - 我想做的只是首先加载必要的数据（此应用程序中的默认页面大小为 25）。

不幸的是，就我目前的理解而言，对于 Google App Engine，任何 ID 都没有顺序（一个条目的 ID 为 3，下一个条目的 ID 为 4203）。

我想知道，使用 Objectify 时从 Google App Engine 检索数据子集的最佳方法是什么？

我正在研究使用偏移和限制，但另一个堆栈溢出帖子（http://stackoverflow.com/questions/9726232/achieve-good-paging-using-objectify）基本上说这是低效的。

我找到的最佳信息是以下链接（http://stackoverflow.com/questions/7027202/objectify-paging-with-cursors）。这里的答案说使用游标，但也说这是低效的。我也在使用请求工厂，所以我必须将光标存储在我的用户会话中（如果不正确，请告诉我）。

目前因为不太可能有很多数据（未来几个月总共可能有 200 行），所以我只是将整个数据集作为临时黑客撤回给客户端 - 我知道这是最糟糕的方法但想在浪费我的时间实施另一个黑客解决方案之前获得最好的方法。我目前很担心，因为似乎我读过的每一篇关于这样做的文章都让人觉得没有真正可靠的方法来做到这一点。

我也在考虑做什么 - 目前我的搜索/页面加载速度非常快，因为所有数据都已经在客户端。我在搜索框中使用 KeyUpEvent 处理程序来过滤数据 - 我认为没有任何方法可以通过调用服务器来保持这个速度 - 这个问题是否有任何可接受的解决方案？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T02:47:57.227

使用光标。它们尽可能高效 - 游标存储最后一个查询结束的点并从那里继续。您链接的答案实际上并未讨论游标与偏移的效率。（有评论是错误的）

您可以将限制与游标一起使用 - 它不会影响效率。

此外，游标可以`cursor.toWebSafeString()`通过 RPC 序列化并发送到客户端。这样您就不需要将它们保存在会话中。实际上，您也可以将它们用作[片段标识符](http://en.wikipedia.org/wiki/Fragment_identifier)（在 GWT 用语中也称为历史标记） - 这样可以为结果集的某个“页面”添加书签。

（偏移是“低效的”，因为它实际上加载并向您收费，对于所有直到偏移+限制的实体，它只返回限制实体）

OTOH，如果您在页面加载时已经知道查询参数，那么只需在页面生成时进行查询，而不是通过 RPC 调用它。此外，如果您有一小部分数据（<1000），您可以预加载页面 html 的所有实体 ID。

# c# - 我可以侦听我创建的 Windows 服务事件吗？

> ID：10988491
> 
> 赞同：2
> 
> 时间：2012-06-11T22:45:50.863
> 
> 标签：c#, forms, c#-4.0, windows-services

我有一个将消息写入事件日志的 Windows 服务。我还有一个表单应用程序，可以读取该事件日志并显示消息。Windows 服务有一个它触发的事件，它在它的 EventArgs 中发送 2 条关键信息，我希望能够从我的表单中访问这些信息。有没有办法让我从表单中连接到服务来监听这个事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:59:10.133

这是你要找的东西吗

[http://ashishware.com/websocksample.shtml](http://ashishware.com/websocksample.shtml)

[http://www.codeproject.com/Articles/4857/A-realtime-event-log-monitoring-tool](http://www.codeproject.com/Articles/4857/A-realtime-event-log-monitoring-tool)

# android - 普通java类中的DialogResult并返回结果

> ID：10988495
> 
> 赞同：0
> 
> 时间：2012-06-11T22:47:01.227
> 
> 标签：android, android-alertdialog

我正在开发一个 android 项目，我试图在一个单独的普通 java 类中显示一个 AlertDialog 并返回用户输入的结果。我可以很好地显示对话框，但我遇到的问题是它总是在对话框按下其中一个按钮之前返回值。

下面是调用标准 java 类中的函数以显示对话框的代码

```
private void showDiagreeError()
{
    Common common = new Common(this);
    boolean dialogResult = common.showYesNoDialog();
    Toast.makeText(getApplicationContext(), "Result: " + dialogResult, Toast.LENGTH_LONG).show();
} 
```

下面是显示实际对话的代码

```
public boolean showYesNoDialog()
{
    AlertDialog.Builder builder = new AlertDialog.Builder(context);
    builder.setMessage("Are you sure you do not want to agree to the terms, if you   choose not to, you cannot use Boardies Password Manager")
    .setCancelable(false)
    .setPositiveButton("Yes", new DialogInterface.OnClickListener() {

              public void onClick(DialogInterface dialog, int which) {
                  dialogResult = true;
     }
})
.setNegativeButton("No", new DialogInterface.OnClickListener() {

    public void onClick(DialogInterface dialog, int which) {
            dialogResult = false;
    }
});
AlertDialog alert = builder.create();
alert.show();
return dialogResult;
} 
```

dialogResult 是一个在整个类中可见的全局变量，并且被设置为 false。一旦显示对话框，就会显示 toast 消息，显示结果为 false，但我希望 return 语句阻塞，直到用户按下其中一个按钮并将变量设置为正确的值。

我怎样才能让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:56:44.323

在谷歌页面的内部深处搜寻了几个小时后，我发现了这个[Dialogs / AlertDialogs: How to "block execution" while dialog is up (.NET-style)](https://stackoverflow.com/questions/2028697/dialogs-alertdialogs-how-to-block-execution-while-dialog-is-up-net-style)。

它完全完成了我所追求的工作并进行了测试以确保没有 ANR 错误，而没有

# c# - System.TypeLoadException 使用 CsharpRepl（单壳）

> ID：10988499
> 
> 赞同：1
> 
> 时间：2012-06-11T22:48:06.603
> 
> 标签：c#, mono

在我放弃这个 c# 解释器之前，我想我会检查是否有人知道这里出了什么问题。它抱怨的类型是 eloquera.client.dll。

```
c:\Program Files\Mono-2.10.8\bin>csharp
Mono C# Shell, type "help;" for help

Enter statements below.
csharp> LoadAssembly(@"C:\WebApp1\WebApp1\bin\webapp1.dll");
csharp> LoadAssembly(@"C:\WebApp1\WebApp1\bin\eloquera.client.dll");
csharp> using WebApp1.Models.Data_Access;
csharp> using WebApp1.Models.Persisted_classes;
csharp> using Eloquera.Client;
csharp> using System.Linq.Expressions;
csharp>
csharp> var repository = new EloqueraRepository();
csharp> var result = repository.GetAll<CustomMembershipUser>();
System.TypeLoadException: Could not load type 'Eloquera.Client.DB' from assembly
 'Eloquera.Client, Version=4.0.0.0, Culture=neutral, PublicKeyToken=170cadcdba67
be6c'.
  at Class3.Host (System.Object& $retval) [0x00000] in <filename unknown>:0
  at Mono.CSharp.Evaluator.Evaluate (System.String input, System.Object& result,
 System.Boolean& result_set) [0x00000] in <filename unknown>:0
  at Mono.CSharpShell.Evaluate (System.String input) [0x00000] in <filename unkn
own>:0
csharp>
csharp>
csharp> 
```

编辑：专注于该问题类型：

```
C:\Program Files\Mono-2.11\bin>csharp
Mono C# Shell, type "help;" for help

Enter statements below.
csharp> LoadAssembly(@"C:\WebApp1\WebApp1\bin\webapp1.dll");
csharp> LoadAssembly(@"C:\WebApp1\WebApp1\bin\eloquera.client.dll");
csharp> using WebApp1.Models.Data_Access;
csharp> using WebApp1.Models.Persisted_classes;
csharp> using Eloquera.Client;
csharp> using System.Linq.Expressions;
csharp> string server = "server=localhost;password=pwd;options=none;";
csharp> Console.WriteLine(server);
server=localhost;password=pwd;options=none;
csharp> DB db = new DB(server);
(1,10): error CS0584: Internal compiler error: Unexpected error when loading typ
e `Eloquera.Client.DB' 
```

**编辑：将 Eloquera 安装升级到 EloqueraDatabase CE 4.51 .NET4.0 x32 并再次尝试。仍然无法正常工作，但结果可能更有希望：**

```
c:\Program Files\Mono-2.10.8\bin>csharp
Mono C# Shell, type "help;" for help

Enter statements below.
csharp> LoadAssembly(@"C:\WebApp1\WebApp1\bin\webapp1.dll");
csharp> LoadAssembly(@"C:\Program Files\Eloquera\Eloquera Server 4.0\Lib\Eloquer
a.Client.dll");
csharp> using WebApp1.Models.Data_Access;
csharp> using WebApp1.Models.Persisted_classes;
csharp> using System.Linq.Expressions;
csharp> using Eloquera.Client;
csharp>
csharp>
csharp> string server = "server=localhost;password=pwd;options=none;";
csharp> Console.WriteLine(server);
server=localhost;password=pwd;options=none;
csharp> DB db = new DB(server);
csharp> db.OpenDatabase("MockDB");
Eloquera.Client.EloqueraException: The connection to the server localhost on the
 port 43962 cannot be established.

The requested feature is not implemented.
  at Eloquera.Client.DB.OpenConnection () [0x00000] in <filename unknown>:0
  at Eloquera.Client.DB.OpenDatabase (System.String dbName) [0x00000] in <filena
me unknown>:0
  at Class5.Host (System.Object& $retval) [0x00000] in <filename unknown>:0
  at Mono.CSharp.Evaluator.Evaluate (System.String input, System.Object& result,
 System.Boolean& result_set) [0x00000] in <filename unknown>:0
  at Mono.CSharpShell.Evaluate (System.String input) [0x00000] in <filename unkn
own>:0
csharp> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:53:02.797

试试 LoadAssembly(@"C:\WebApp1\WebApp1\bin\Eloquera.Client.dll"); 或匹配与命名空间相同的大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:17:10.380

我过去在 Mono 2.10.x 中看到过一些 TypeLoadException 问题。

我建议升级到 Mono 2.11.3 或更高版本。

# css - CSS：将溢出项变成新行

> ID：10988500
> 
> 赞同：0
> 
> 时间：2012-06-11T22:48:08.757
> 
> 标签：css, firefox, firebug

我刚买了一个 WP 主题：[http](http://demo.wpzoom.com/evertis/) ://demo.wpzoom.com/evertis/我想修改“专题文章”部分。

我不想使用滚动按钮查看所有特色文章，而是想显示所有特色文章（即每三篇文章在一行上）。

我尝试修改 CSS 但无法得到我想要的。大多数“溢出”文章都是关于文本的。

```
 .scrollable {

    /* required settings */

    position:relative;

    overflow:hidden;

    width: 930px;

    height:400px;

}
 .slide {

 -webkit-border-radius: 5px;

 -khtml-border-radius: 5px; 

 -moz-border-radius: 5px;

 border-radius: 5px;

 background:#e6eef4;

 padding:10px;

 margin:0 20px 0 0;

 float:left;

 width:270px;

 position:relative;

 display:inline;

 } 
```

我在 Firefox 上使用 Firebug 并尝试了“display:block”和“float:auto”的不同组合，但无法得到我想要的。我只能让它显示一篇文章一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:04:41.117

合并/添加这个 CSS 会做到这一点：

```
#thumbs {
    width: auto;
    position: static;
    overflow: hidden;
}
.scrollable {
    overflow: visible;
    height: auto;
} 
```

# c++ - 将预处理器变量传递给 nmake 构建环境

> ID：10988501
> 
> 赞同：4
> 
> 时间：2012-06-11T22:48:32.967
> 
> 标签：c++, c-preprocessor, visual-studio-2005, nmake, wdk

我在使用`nmake`Win7 x64 构建环境构建驱动程序时遇到问题。我正在定义一个预处理器变量并使用 -

```
build /nmake "USER_C_FLAGS=/DMyVersion=3" 
```

构建日志是 -

```
...
/DMyVersion=3
/typedil- 
/wd4603
/wd4627
.... 
```

因此，我清楚地将变量视为编译器选项的一部分。现在在标题文件中，我做

```
#define otherVersion 10
#ifdef MyVersion
  #undef otherVersion
  #define otherVersion MyVersion
#endif

#define FileVersion otherVersion 
```

问题`FileVersion`始终是**10**，无论`MyVersion`定义是否通过并存在于环境中。为了测试，发生了什么，我做了 -

```
#ifdef MyVersion
  #error MyVersion is present in the environment.
#endif 
```

我看到正在打印的声明。但是，尽管环境中存在预处理器指令，为什么`otherVersion`总是**10呢？**为什么它不采用通过命令行选项传递的值**3 ？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:11:43.520

我不确定这是否适合您，但有些人确实尝试使用 msbuild 实现相同的效果。他们必须调整项目文件以将他们的定义“导入”构建过程。看看[MSBuild.exe 既不接受 /p:DefineConstants 也不接受 /p:PreprocessorDefinitions](https://stackoverflow.com/questions/2016697/msbuild-exe-not-accepting-either-pdefineconstants-nor-ppreprocessordefinitio)

# jquery - 修改 jquery nivo zoom 插件以实现新行为

> ID：10988503
> 
> 赞同：0
> 
> 时间：2012-06-11T22:48:38.573
> 
> 标签：jquery, jquery-selectors

感谢您的阅读。我正在尝试修改 Jquery Nivo Zoom 插件以使其关闭以前单击的图像。

您可以在此处查看其当前行为：http: [//nivozoom.dev7studios.com/](http://nivozoom.dev7studios.com/)

现在插件所做的是在单击缩略图时打开一个大图像，但保持先前单击的打开状态。正如我所说，我想修改它以关闭以前单击的图像。

查看代码我认为我应该在这部分代码中添加一些内容，这里：

```
function doZoom(img, link, nivoZoomHover){
            var imgLarge = $('img.nivoLarge', link);
            if(link.hasClass('zoomed')){
                //Hide Overlay
                if(settings.overlay) $('#nivoOverlay').fadeOut(settings.speed/2);
                //Hide Caption
                if($('.nivoCaption', link).length > 0){
                    $('.nivoCaption', link).fadeOut(settings.speed/2);
                }
                //Hide Image
                imgLarge.fadeOut(settings.speed/2, function(){
                    img.animate({ opacity:1 }, settings.speed/2);
                });
                link.removeClass('zoomed');
            } else {
                //Show Overlay
                if(settings.overlay) $('#nivoOverlay').fadeIn(settings.speed/2);
                //Hide ZoomHover
                nivoZoomHover.css('opacity','0');
                //Show Image
                img.animate({ opacity:0 }, settings.speed/2, function(){
                    imgLarge.fadeIn(settings.speed/2, function(){
                        showCaption(img, imgLarge, link);
                    });
                });
                link.addClass('zoomed');
            }
        } 
```

但我尝试了一些东西，但现在没有用。任何人都可以帮忙吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T03:58:51.877

大约第 67 行 - 就在 'link.bind('click', function(){' 之后

粘贴以下内容：

```
var notThis = $(".nivoCaption").not($(".nivoCaption", link));
notThis.closest("a").removeClass("zoomed");
notThis.removeClass("nivo-processed");
notThis.css("display","none");
notThis.parent().children("img").not($("img.nivoLarge")).css("opacity","1");
$(".nivoLarge").not($("img.nivoLarge", link)).fadeOut(settings.speed/2); 
```

可能有更好的方法，但它似乎有效。

接下来要困扰你的是 IE9 z-index 问题，即出现在以前缩放的缩略图后面的缩放图像。转到第 185 行左右，找到“IE7 Fix”并注释掉 3 行功能。那个“修复”破坏了 IE9 中的 z-index。（但你会用 IE7 重新解决这个问题，哦，好吧）。

# wordpress - 自定义帖子类型、分类和元框值，如何排序

> ID：10988506
> 
> 赞同：1
> 
> 时间：2012-06-11T22:49:16.013
> 
> 标签：wordpress

我有一个 wordpress 循环，我正在为一个体育网站工作，但我遇到了一个问题。

我创建了一个名为 Players 的自定义帖子类型 我创建了一个名为 Position（前锋、防守、守门员）的自定义分类法 我还有一些自定义元框，其中一个是球衣号码。

我试图根据位置将页面分成 3 个部分，因此我尝试为每个循环创建一个查询。我已经写了这个。

```
$posts = new WP_Query( array( 
'post_type' => 'players', 
'showposts' => 10, 
'tax_query' => array(
        'taxonomy' => 'position', 
        'field' => 'slug', 
        'terms' => 'forward')
                )); 
```

我遇到的问题的第二部分是是否可以通过元框值来安排此查询，理想情况下我希望按球衣号码排序。

我尝试了一些建议，但在每个循环中，我都会不断收到玩家的所有帖子。

```
$posts = new WP_Query( array( 
                    'post_type' => 'players', 
                    'showposts' => 10, 
                    'tax_query' => array(
                                    'taxonomy' => 'position', 
                                    'field' => 'slug', 
                                    'terms' => 'forward')
                ));
                while ( $posts->have_posts() ) : $posts->the_post(); ?>
                    <tr class="player">
                        <td class="leftBrdr"><?php the_title(); ?></td>
                        </td>
                    </tr>
                <?php endwhile; ?>
            <?php wp_reset_query(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T23:59:17.033

如果在 register_post_type 中将其定义为 'hierarchical' => true，您还可以通过可用于页面和您的 cpt 的“菜单顺序”进行排序。

# mysql - 将用户 ID 添加到 MySQL 用户列表表时出现异常问题

> ID：10988512
> 
> 赞同：1
> 
> 时间：2012-06-11T22:50:00.707
> 
> 标签：mysql

我有一个网站，用户可以在其中登录并将项目添加到列表中。

用户登录，会话存储他们的电子邮件，我用它在用户表中识别他们。

然后，他们可以输入一个列表项并添加到一个包含他们的 ID 和他们的列表项的列表中。

有时会添加 ID，有时会出现空值（但是，始终会添加列表项文本）。这似乎是不稳定的，因为大多数时候 ID 都包含在内。

有任何想法吗？表类型是 MyISAM。顺便说一句，我是编程新手。

这是我的代码示例：

```
<?php 
session_start();
$item = $_REQUEST['item'];
$email = $_SESSION['email'];

if ($item)
{

mysql_connect("localhost","root","") or die("We couldn't connect!");

mysql_select_db("table");

$query = mysql_query("SELECT ID FROM users WHERE email='".$_SESSION['email']."'");
$result = mysql_result($query,0);
$user_id = $result;

mysql_query("INSERT INTO items (user_ID,item_name) VALUES('$user_id','$item')"); 
```

因此，每次我自己登录我的网站进行测试时，都没有问题。但越来越多的用户尝试添加项目，它会创建一条记录，其中 item_name 正确显示但 user_ID 设置为 0（默认值）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T01:22:15.747

首先，请阅读我在对您的问题的评论中所说的关于 SQL 注入攻击的内容。

将 存储在 中是个好主意，`user_id`这样`$_SESSION`您就不必每次都根据电子邮件查询它......但是如果您坚持只将电子邮件放在 中`$_SESSION`，那么您实际上只需要一个查询。调整后的代码：

```
<?php 
session_start();
$item = mysql_real_escape_string($_REQUEST['item']);

if (!empty($item) && isset($_SESSION['email']))
{
    mysql_connect("localhost","root","") or die("We couldn't connect!");
    mysql_select_db("table");

    mysql_query("INSERT INTO items (user_ID, item_name) VALUES ((SELECT ID FROM users WHERE email='{$_SESSION['email']}'), '$item')");
} 
```

就像 Jeff Watkins 所说，会话可能会超时，因此最好先检查它是否设置为使用`isset()`.

否则，如果您将用户标识存储在会话中，则可以直接引用它，`$_SESSION['user_id']`而不是在插入中执行子查询。

# mysql - 从 MYSQL 例程结果中选择列

> ID：10988520
> 
> 赞同：0
> 
> 时间：2012-06-11T22:51:18.243
> 
> 标签：mysql

我有一个名为的例程，`sp_getalldata`我只想从例程的结果集中选择 2 列。`col1``col2`

我试过了

从（调用 sp_getalldata（））中选择 col1、col2

但它是无效的。我有哪些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:15:38.477

您不能将存储函数用作 MySQL 中的数据源。MySQL 不支持表函数。您只能使用 SELECT 语句编写存储过程并调用该过程来输出结果集。

# haskell - mult_add 是一个真正的函数吗？它有什么作用？

> ID：10988523
> 
> 赞同：0
> 
> 时间：2012-06-11T22:51:47.367
> 
> 标签：haskell

我有以下问题。

> 编写一个函数 form_number_back，它接受一个正整数列表，并使用列表中的数字以相反的顺序形成一个十进制数。
> 
> 例如 form_number_back [1, 2, 3, 4] 应该返回数字 4321；form_number_back [ ] 返回 0
> 
> 使用下面的函数 foldr 和 mult_add 来完成这个`mult_add d s = d + 10*s`
> 
> 注意：foldr 和 foldr1 是两个不同的函数。尝试在您的定义中使用 foldr1 而不是 foldr 并查看是否使用空列表获得相同的结果。解释你的结果。

我在 上找不到任何东西`mult_add`。我以为可能是函数名，但她想要`form_number_back`作为函数名。这意味着`mult_add`是一个 Haskell 函数。

谁能向我解释是什么`mult_add`？它甚至写对了吗？`mult_add`我应该与我自己的代码一起使用另一个用户制作的功能吗？

编辑 2

我尝试放入函数示例以获取其类型.. 所以.. form_number_back [1, 2, 3, 4] :: Num b => b -> [b] -> b

所以我的功能看起来像

```
form_number_back a = foldr(mult_add) 
```

但返回类型

```
form_number_back :: Num b => [t] -> b -> [b] -> b 
```

试图弄清楚如何摆脱它`[t]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T09:43:45.297

与大多数其他语言相比，Haskell 中的类型更重要且信息量更大。当您不了解 Haskell 时，最好的第一步是考虑类型。所以让我们这样做。我们将启动 ghci 并输入：

```
Prelude> let mult_add d s = d + 10 * s 
```

现在询问它的类型：

```
Prelude> :t mult_add
mult_add :: Num a => a -> a -> a 
```

也就是说， mult_add 接受 an`a`和 another `a`，并返回 an `a`，附带条件`a`是类的实例`Num`（以便您可以将它们相加和相乘）。

你被要求使用`foldr`来编写这个函数，所以让我们看看它的类型：

```
Prelude> :t foldr
foldr :: (a -> b -> b) -> b -> [a] -> b 
```

这看起来有点吓人，所以让我们分解一下。第一部分，`(a -> b -> b)`告诉我们`foldr`需要两个变量的函数，`a`和`b`。好吧，我们已经有了其中之一 - 它是`mult_add`. 那么如果我们`mult_add`作为第一个参数输入会发生`foldr`什么呢？

```
Prelude> :t foldr mult_add
foldr mult_add :: Num b => b -> [b] -> b 
```

好的！我们现在有一个函数，它接受 a`b`和 a `[b]`（`b`s 的列表）并返回 a `b`。您尝试编写的函数需要在`0`给定空列表时返回，因此让我们尝试将空列表提供给它，并为其余参数提供一些不同的值：

```
Prelude> foldr mult_add 10 []
10
Prelude> foldr mult_add 5 []
5 
```

嘿，这很有趣。如果我们给它输入数字`x`和空列表，它只会返回`x`（**注意：**这总是正确的`foldr`。如果我们给它初始值`x`和空列表`[]`，它会返回`x`，无论我们使用什么函数代替`mult_add`。）

因此，让我们尝试将其`0`作为第二个参数提供：

```
Prelude> foldr mult_add 0 []
0 
```

这似乎行得通。现在如果我们给它提供列表`[1,2,3,4]`而不是空列表呢？

```
Prelude> foldr mult_add 0 [1,2,3,4]
4321 
```

好的！所以它似乎工作。现在的问题是，**为什么**它会起作用？理解的诀窍`foldr`是在 的每个元素之间`foldr f x xs`插入函数，另外放在 列表的末尾，并从右侧收集所有内容（这就是为什么它被称为**右**折叠）。因此，例如：`f``xs``x`

 **```
foldr f 0 [1,2,3] = 1 `f` (2 `f` (3 `f` 0)) 
```

其中反引号表示我们正在使用中缀形式的函数（所以它的第一个参数是左边的那个，第二个参数是右边的那个）。在您的示例中`f = mult_add`，您有 将其第二个参数乘以 10 并将其添加到第一个参数：

```
d `mult_add` s = d + 10 * s 
```

所以你有了

```
foldr mult_add 0 [1,2,3] = 1 `mult_add` (2 `mult_add` (3 `mult_add 0))
                         = 1 `mult_add` (2 `mult_add` 3)
                         = 1 `mult_add` 32
                         = 321 
```

这符合您的期望。为了确保您理解这一点，请弄清楚如果您`mult_add`以相反的方式定义会发生什么，即

```
mult_add d s = 10 * d + s 
```**

# ruby - 是否有特定的函数来检索然后删除随机数组元素？

> ID：10988525
> 
> 赞同：10
> 
> 时间：2012-06-11T22:51:58.983
> 
> 标签：ruby

我知道我可以通过几个步骤来做到这一点，但想知道是否有一个功能可以实现这一点。

我想数组#sample，然后删除检索到的元素。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-11T22:57:38.473

这个怎么样：

```
array.delete_at(rand(array.length)) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-08-28T05:21:22.847

另一个低效的，但非常明显发生了什么：

```
array.shuffle.pop 
```

最好是 Array 本身的示例方法的破坏性版本，例如：

```
class Array
  def sample!
    delete_at rand length
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T01:24:14.607

Linuxios 完美无缺。这是另一个例子：

```
array = %w[A B C]
item_deleted = array.delete_at(1) 
```

这是在irb中：

```
1.9.2p0 :043 > array = %w[A B C]
 => ["A", "B", "C"] 
1.9.2p0 :044 > item_deleted = array.delete_at(1)
 => "B" 
1.9.2p0 :045 > array
 => ["A", "C"] 
1.9.2p0 :047 > item_deleted
 => "B" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-08T15:53:02.143

已经提到的 rand(array.length) 方法的替代方法可能是这个

```
element = array.delete array.sample 
```

样品：

```
>> array   = (1..10).to_a
>> element = array.delete array.sample
>> array   # => [1, 2, 4, 5, 6, 7, 8, 9, 10]
>> element # => 3 
```

这也是一组两个操作，但至少您不必离开数组本身。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-15T20:14:18.210

如果您需要对多个项目进行采样并从原始数组中删除这些项目：

```
array = (1..10).to_a

=> [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

grab = array.sample(4)

=> [2, 6, 10, 5]

grab.each{ |a| array.delete a }

=> [2, 6, 10, 5]

array
=> [1, 3, 4, 7, 8, 9] 
```

# fancybox-2 - ie9中的fancybox显示左下角

> ID：10988532
> 
> 赞同：-1
> 
> 时间：2012-06-11T22:52:56.943
> 
> 标签：fancybox-2

在 Firefox 中工作正常，但在 ie9 中显示左下角

我认为这与ie9中的css或DOCTYPE有关？

任何帮助表示赞赏。发生这种情况的网站如下。

[http://bydezign.co.nz/Products/Chairs/ManoliChair.aspx](http://bydezign.co.nz/Products/Chairs/ManoliChair.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T23:07:35.797

从哪里开始

好的，让我们从验证开始

[http://validator.w3.org/check?verbose=1&uri=http%3A%2F%2Fbydezign.co.nz%2FProducts%2FChairs%2FManoliChair.aspx](http://validator.w3.org/check?verbose=1&uri=http%3A%2F%2Fbydezign.co.nz%2FProducts%2FChairs%2FManoliChair.aspx)

现在，我认为其中很多错误是由于不遵守您的过渡文档类型造成的。我总是去 xhtml1 但你可能有你的过渡原因（尽管我不敢相信现在任何值得他们盐的人不会使用 xhtml，因为它几乎是标准。

对您的文档类型进行排序可能（并且可能会）解决您的渲染问题，但如果没有，我会看看您使用表格进行布局。这是一个非常大的“禁忌”。您应该使用 div 和 css 进行布局。它会给你更好的设计能力。表格在语义上不适合用于布局 - 它们用于显示表格数据。

先解决这些问题，看看是否能解决您的问题（99% 确信仅 doctype 并通过验证获得它将解决问题

# sql - SQL 按子查询分组

> ID：10988536
> 
> 赞同：2
> 
> 时间：2012-06-11T22:53:51.870
> 
> 标签：sql, group-by, subquery, max

我不完全理解子查询如何被外部查询访问，所以我需要一些帮助来解决这个问题。这是四个模式。

```
Movie(title, year, director, budget, earnings)
Actor(stagename, realname, birthyear)
ActedIn(stagename, title, year, pay)
CanWorkWith(stagename, director) 
```

找出在电影中表演获得最高报酬的演员的名字。据我所知，它要求为每部电影找到片酬最高的演员……但仔细想想，括号可能表明谁的片酬最高，也许一对夫妇的片酬相同。无论如何..

我有的

```
SELECT A.realname
FROM ActedIn A
WHERE A.stagename IN ( SELECT A1.title, A1.year, MAX(pay)
                       FROM ActedIn A1
                       GROUP BY title, year ) 
```

我知道 WHERE A.stagename IN 是完全错误的，我只是不知道如何将它链接回来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:12:02.383

如果我很好理解，这应该足够了：

```
SELECT A.realname
FROM ActedIn A
WHERE pay = (SELECT MAX(pay) FROM ActedIn B WHERE B.stagename = A.stageman) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T23:06:21.147

子查询的概念很简单。这只是一个观点问题。当您编写子查询时，它是处理的第一段。由于它在外部查询之前被完全处理，子查询的输出应该对外部查询有意义。在您上面提供的示例中，

```
SELECT A.realname FROM ActedIn A WHERE A.stagename IN 
( SELECT A1.stagename FROM CanWorkWith A1 ) 
```

当此查询运行时，CanWorkWIth 中的 stagename 将首先被处理并给出 stagename 作为输出。期望 A.stagename 的外部查询接收此值，然后执行外部查询。

编写子查询的方式没有限制。

我希望你明白这一点。既然您了解了子查询的工作原理，我鼓励您自己解决问题并在此处使用您的新 sql 提问。祝你好运。

# android - 使用 javamail-android 发送电子邮件时，正文作为文本文件附加

> ID：10988537
> 
> 赞同：1
> 
> 时间：2012-06-11T22:54:01.397
> 
> 标签：android, jakarta-mail

我正在使用[Android 的 JavaMail 端口](http://code.google.com/p/javamail-android/)来发送电子邮件，而无需用户干预应用程序。而且我注意到某些电子邮件系统无法正确显示电子邮件正文。当我将电子邮件发送到 Gmail 时，正文显示正确，但是当我将其发送到公司电子邮件时（我不确定它使用的是什么，但它是来自电信的商业邮件），正文是空白的，而是有一个附件包含正文内容的文本文件 ATT00001.txt。

我不是邮件系统方面的专家，但从我用来设置电子邮件正文的代码来看，它似乎与您附加文件的方式非常相似，也许这就是为什么正文不被识别为正文的原因，但是作为附件。

以下代码片段是邮件的创建方式。身体和主题都是预先初始化的。

```
public synchronized void send() throws MessagingException {   
    MimeMessage message = new MimeMessage(session);   
    BodyPart bodyPart = new MimeBodyPart();
    bodyPart.setText(body);
    message.setSender(new InternetAddress(sender));   
    message.setSubject(subject);   
    //message.setDataHandler(handler);
    multipart.addBodyPart(bodyPart);
    message.setContent(multipart);
    if (recipients.indexOf(',') > 0)   
        message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));   
    else  
        message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipients));   
    Transport.send(message);  
    user = null;
    password = null;
    session = null;
} 
```

如果有人知道如何解决这个问题，请帮助我！对我的应用程序来说，将 body 显示为 body 很重要。此外，如果有更好的无需用户干预的方式发送电子邮件，也请提出建议。

谢谢你的帮助。

编辑：

我尝试使用 .setText() 而不是 BodyPart

```
message.setText(body); 
```

这根本没有显示来自 Gmail 的正文，并显示了来自公司邮件的一些奇怪的字符串

> ------=_Part_2_1079750440.1339556360521--

在测试这些时，我创建了一个电子邮件测试活动，它基本上通过单击按钮发送电子邮件。在尝试了一些东西之后，我把我的课程改回原来的样子（使用 BodyPart），然后它就起作用了！看起来附件是导致问题的原因，我认为我附加文件的方式不正确。

```
public void addAttachment(File file) throws MessagingException {
    BodyPart messageBodyPart = new MimeBodyPart();
    DataSource source = new FileDataSource(file);
    messageBodyPart.setDataHandler(new DataHandler(source));
    messageBodyPart.setFileName(file.getName());
    multipart.addBodyPart(messageBodyPart);     
} 
```

这个 addAttachment() 函数在 send() 之前调用。

这有什么问题？

编辑：

万一其他人遇到同样的问题，这就是我修复它的方法。通过在添加附件之前设置正文解决了该问题。所以我没有在发送时设置正文，而是预先单独设置正文。

```
public void setBody(String body) throws MessagingException {
    BodyPart bodyPart = new MimeBodyPart();
    bodyPart.setText(body);
    multipart.addBodyPart(bodyPart);
}

public synchronized void send() throws MessagingException {   
    MimeMessage message = new MimeMessage(session);   
    message.setSender(new InternetAddress(sender));   
    message.setSubject(subject);   
    message.setContent(multipart);
    if (recipients.indexOf(',') > 0)   
        message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));   
    else  
        message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipients));   
    Transport.send(message);  
    user = null;
    password = null;
    session = null;
} 
```

所以当我调用函数时，我首先调用 setBody()，然后是 addAttachment()，然后是 send()。现在电子邮件的正文已按原样显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-17T13:44:03.057

这似乎是 JavaMail API 的问题（而不仅仅是在 android 中！），我遇到了同样的问题并且重新排序（在附件部分之前添加 HTML 部分）解决了它。

**注意：**只有当收件人的邮箱以不同的方式处理 HTML（与它完美工作的 MS Outlook 不同）时，才能复制此问题。

```
BodyPart attachmentBodyPart = new MimeBodyPart();
BodyPart htmlBodyPart = new MimeBodyPart();
Multipart multipart = new MimeMultipart();
MimeMessage message = new MimeMessage(session);

message.setSubject("Some subject");
message.setFrom(new InternetAddress("some-from-email@abc.org"));
message.addRecipient(Message.RecipientType.TO, new InternetAddress("some-recipient-email@abc.com"));

DataSource ds = new FileDataSource("./somedirectory" + File.separator + "filename.pdf");

attachmentBodyPart.setDataHandler(new DataHandler(ds));             
attachmentBodyPart.setFileName("filename.pdf");

htmlBodyPart.setContent("<html><body>Some HTML content</body></html>", "text/html");

//add HTML part before attachment 
multipart.addBodyPart(htmlBodyPart);
multipart.addBodyPart(attachmentBodyPart);

message.setContent(multipart);
message.saveChanges(); 
```

干杯!

**编辑：**更新了示例代码并添加了更多详细信息以复制问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T23:06:39.057

尝试只创建纯文本消息而不使用多部分。摆脱 message.setContent(multipart) 并使用 message.setText(body)。

# java - 发送文件名，然后发送文件本身

> ID：10988541
> 
> 赞同：0
> 
> 时间：2012-06-11T22:54:20.357
> 
> 标签：java, file, sockets

我想让我的服务器能够获取将发送给它的文件的名称，然后在获取该文件后，它可以将其保存在具有正确名称的新位置。

这是服务器代码：

```
class TheServer {

    public void setUp() throws IOException { // this method is called from Main class.
        ServerSocket serverSocket = new ServerSocket(1991);
        System.out.println("Server setup and listening...");
        Socket connection = serverSocket.accept();
        System.out.println("Client connect");
        System.out.println("Socket is closed = " + serverSocket.isClosed());

        BufferedReader rd = new BufferedReader(new InputStreamReader(connection.getInputStream()));

        String str = rd.readLine();
        System.out.println("Recieved: " + str);
        rd.close();

        InputStream is = connection.getInputStream();

        int bufferSize = connection.getReceiveBufferSize();

        FileOutputStream fos = new FileOutputStream("C:/" + str);
        BufferedOutputStream bos = new BufferedOutputStream(fos);

        byte[] bytes = new byte[bufferSize];

        int count;

        while ((count = is.read(bytes)) > 0) {
            bos.write(bytes, 0, count);
        }

        bos.flush();
        bos.close();
        is.close();
        connection.close();
        serverSocket.close();

    }
} 
```

这是客户端代码：

```
public class TheClient {

    public void send(File file) throws UnknownHostException, IOException { // this method is called from Main class.
        Socket socket = null;
        String host = "127.0.0.1";

        socket = new Socket(host, 1991);

        // Get the size of the file
        long length = file.length();
        if (length > Integer.MAX_VALUE) {
            System.out.println("File is too large.");
        }

        BufferedWriter wr = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
        wr.write(file.getName());
        wr.flush();

        byte[] bytes = new byte[(int) length];
        FileInputStream fis = new FileInputStream(file);
        BufferedInputStream bis = new BufferedInputStream(fis);
        BufferedOutputStream out = new BufferedOutputStream(socket.getOutputStream());

        int count;

        while ((count = bis.read(bytes)) > 0) {
            out.write(bytes, 0, count);
        }

        out.flush();
        out.close();
        fis.close();
        bis.close();
        socket.close();
    }
} 
```

我自己做了一些测试，似乎我的客户端发送的文件名是正确的，但不知何故服务器弄错了。例如，如果我的客户告诉文件的名称是“test.txt”，我的服务器会得到它，例如“test.txt´--------”或“test.txtPK”。我不明白为什么它不能正常命名。有谁知道为什么会这样？或者有没有更简单的方法来做到这一点？我的第二个问题是，我怎样才能不仅在本地主机上而且在任何地方都使用它？我尝试将我的主机更改为我的 IP 地址，但没有成功。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T22:59:17.377

您永远不会在文件名之后发送行尾。因此，当服务器使用 readLine() 读取时，它将读取所有字符，直到找到可能位于文件内容某处的第一个行尾。有时在“-----”之后，有时在“PK”之后。

# php - 如何在 MySQL Query 中使用 AVG 和 CHAR_LENGTH 在 php 中打印结果

> ID：10988542
> 
> 赞同：0
> 
> 时间：2012-06-11T22:54:31.843
> 
> 标签：php, mysql

如何`$wordavg`在 php.ini 中显示结果。取出变量后，我在 SQL 中对数据库进行了查询，所以我相信查询是正确的，但不知道如何在 php 中显示搜索结果。

```
$usertable = 'words';
$yourfield = 'wordname'; 

$query = "SELECT AVG(CHAR_LENGTH( wordname)) AS $wordavg FROM $usertable WHERE $yourfield LIKE '"."$current_letter"."%' ";
$result = mysql_query($query); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:59:03.523

首先，您应该改用[mysqli](http://www.php.net/manual/en/book.mysqli.php)。回到您的问题，通常您可以使用循环遍历结果，如下所示：

```
while ($row = mysql_fetch_assoc($result)) {
    echo $row['field'];
} 
```

PHP [mysql_query 文档](http://php.net/manual/en/function.mysql-query.php)中的更多信息和示例。

由于您只有一行数据要返回，因此您不需要循环部分。你可以简单地使用

```
$row = mysql_fetch_assoc($result);
$wordavg = $row['wordavg']; 
```

你不应该`$`在`wordavg`你的查询中有 in 。应该只是`...AS wordavg FROM...`

# shell - 查找执行 Unix shell 脚本的绝对路径的有效/稳健模式？

> ID：10988543
> 
> 赞同：1
> 
> 时间：2012-06-11T22:54:43.940
> 
> 标签：shell, unix, absolute-path

在某处（我不记得在哪里）阅读后，我一直在使用这种技术来获取正在运行的 shell 脚本的绝对物理路径。

```
cd $(dirname "$0") && ABSPATH=$(pwd) && cd - > /dev/null 
```

无论脚本是从绝对路径还是相对路径调用，它似乎都应该完美地工作，即，，，，，，，从另一个`script.sh`脚本中，等等。`./script.sh``../script.sh``../../../lib/script.sh``/Users/../scripts/script.sh`

事实上，这种技术似乎是一种非常可靠的模式，用于绝对化任何相对路径。

我知道出于某种原因，很多用于执行此操作的技术往往不适用于一个系统或另一个系统。那么，这种技术是否存在兼容性问题？它应该适用于几乎所有的 Unix 操作系统和外壳，还是有一些潜在的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T23:26:45.570

一个潜在的问题是它不会遵循符号链接（也就是说，如果`"$0"`实际上是脚本的符号链接，您将获得包含符号链接的目录，而不是包含脚本的实际目录）。

另一个是你不一定信任`"$0"`。例如，如果您的脚本是由其中一个函数加载的`exec`，那么将任意字符串传递给`argv[0]`. 我`"$BASH_SOURCE"`改用它，尽管这显然是特定于 bash 的。

您缺少 "s around `$(dirname "$0")`，因此如果目录名称例如包含空格，它将不起作用。

我相信这可以解决这些问题：

```
cd "$(dirname "$(readlink -e "$BASH_SOURCE")")" && ABSPATH=$(pwd) && cd - > /dev/null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-17T21:50:28.023

我似乎也一直在为此苦苦挣扎。很遗憾，并非所有平台都支持 readlink -f|e ...

以下工作并且是便携式的。它支持相对和嵌套的符号链接（因此我们进入目录的 while 循环。

```
path="${BASH_SOURCE[0]}" current="$PWD"
while [ -L "$path" ] ; do cd "$(dirname "$path")" ; path="$(readlink "$(basename "$path")")"; done
ABSPATH="$( cd "$(dirname "$path")" ; pwd -P)"
cd "$current" 
```

有大量的分叉正在进行，它不是单行的，所以我不会认为它是一个理想或优雅的解决方案......但这里是用于互联网的，我会看看我是否可以随着时间的推移而改进。

过去我使用过以下模式（适用于绝对符号链接）；

```
local path="${BASH_SOURCE[0]}"
while [ -L "$path" ] ; do path="$(readlink "$path")" ; done
ABSPATH="$( cd "$(dirname "$path")" ; pwd -P)" 
```

但现在大多使用

```
ABSPATH="$( cd "$(dirname "${BASH_SOURCE[0]}")/.." ; pwd -P)" 
```

# android - android：按钮的宽度相同，等于最宽的按钮

> ID：10988550
> 
> 赞同：0
> 
> 时间：2012-06-11T22:55:33.823
> 
> 标签：android, button, markup

我有两个按钮放在布局内。我希望它们具有相同的宽度。但每个按钮的宽度必须等于其中最宽的一个。现在我使用 ViewTreeObserver。

```
 class LayoutListener implements ViewTreeObserver.OnGlobalLayoutListener{
    private Button btn1, btn2;

    public LayoutListener(Button b1, Button b2){
        btn1 = b1; btn2 = b2;
    }
    @Override
    public void onGlobalLayout() {
        int w1 = btn1.getWidth();
        int w2 = btn2.getWidth();
        if (w1 < w2)
            btn1.setWidth(w2);
        else
            btn2.setWidth(w1);
    }
} 
```

但这不是一个好的决定，因为元素在显示给用户后被重绘，看起来很糟糕。和你可以猜到的问题，我怎样才能达到所需的行为？有没有标记操作的方法或者我应该实现特殊代码？最好避免创建可用作按钮容器的自定义布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T23:07:56.967

您能否比较活动的 onCreate() 方法中的按钮宽度并设置它们，或者您是否需要在不同的时间更改它们的大小？

编辑：

膨胀视图后，您可以创建两个 Button 变量并用于`(Button)yourViewName.findViewById(R.id.buttonid);`绑定它们。然后，您可以根据需要使用 getWidth() 和 setWidth() 来比较和修改它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:54:54.447

如果我`getWidth`在膨胀后直接调用它总是返回 0。为了防止它在获取大小之前我应该​​使用`measure`函数来初始化测量过程。这是我的代码（但我不确定这是最好和最快的方法））：

```
....
view = inflator.inflate(R.layout.send_command_item, null);
btnOff = (Button)view.findViewById(R.id.btnOff);
btnOn = (Button)view.findViewById(R.id.btnOn);
set_w(btnOff, btnOn);
.....

public void set_w(Button btn1, Button btn2) {
    btn1.measure(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    btn2.measure(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    int w1 = btn1.getMeasuredWidth();
    int w2 = btn2.getMeasuredWidth();
    if (w1 < w2)
        btn1.setWidth(w2);
    else
        btn2.setWidth(w1);
} 
```

# xcode - 在 Xcode 调试会话中设置变量

> ID：10988551
> 
> 赞同：1
> 
> 时间：2012-06-11T22:55:34.437
> 
> 标签：xcode, optimization, xcode4, xcode4.3

我想优化依赖多个变量进行配置的算法。用户界面不排除此变量；实际上，经过优化后，它们会变成常数。有没有办法在测试之间手动设置这些变量而无需在 Xcode 中重新启动应用程序？

# soapui - soapui-pro- 动态更改 JDBC 连接字符串

> ID：10988552
> 
> 赞同：1
> 
> 时间：2012-06-11T22:55:35.940
> 
> 标签：soapui

如何在 soapui -pro 命令行中动态更改 JDBC 连接字符串、用户名和密码？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:48:42.327

您可以使用属性。请参阅此处： [使用 SoapUI 属性](http://www.soapui.org/Functional-Testing/working-with-properties.html)

请注意页面上关于命令行的最后一点：

```
Now when you run the request, the property will automatically be replaced with its current    
value. To use a different value just change the endpoint in the UI, or from the command-
line you can use the -P option;

-PServiceEndoint=dev.eviware.com:8884

which would use the dev.eviware.com:8884 endpoint instead (entirely fictional). 
```

# javascript - 更改一个对象的可观察属性会更改集合中所有对象的属性

> ID：10988553
> 
> 赞同：0
> 
> 时间：2012-06-11T22:55:39.413
> 
> 标签：javascript, data-binding, knockout.js

我的视图模型中有一组对象。`select`将值绑定到控件时遇到问题。该值是一个 JS 对象，而不是原始类型。当绑定集合中有多个对象并更改`select`控件时，所有其他对象的值都会更新为新选择的对象。就像所有值都绑定到绑定内的同一个实例一样`foreach`。该错误似乎仅在插入新行时发生，而不是在简单地编辑现有行时发生。

我已经消除了很多复杂性，并在 JSFiddle 上有一个显示该问题的示例。

[http://jsfiddle.net/zero21xxx/5vgDy/](http://jsfiddle.net/zero21xxx/5vgDy/)

**查看错误的步骤**

1.  从第 1 行的下拉列表中选择结算类型
2.  从右侧的新下拉菜单中选择“二”。
3.  从第 2 行的下拉列表中选择结算类型
4.  现在，第 1 行和第 2 行都将在选择框中设置为“一”。

我希望一行中的更改不会影响任何其他行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:08:06.407

你如何设置它有点复杂，但是，我认为问题在于，你的 id 不是你所期望的，

```
 function getValues(tabId) {
                console.log("tabId " + tabId);
                if (lookUp[tabId]) { 
```

如果我将它添加到您的代码中，它会显示相同的 tabId，这意味着您正在处理相同的对象。

如果我每次都更改 getValues

```
 function getValues(tabId) {
                console.log("tabId " + tabId);
                return  [new DatabaseField(nextId(), "Name", "Attorney Name", DataType.STRING.id),
                                                             new DatabaseField(nextId(), 
"Type", "Settle Type", DataType.DROPDOWN.id)];
} 
```

我也将所有带有 [] 的 observables 更改为 observable 数组...

然后它似乎工作。小提琴... [http://jsfiddle.net/keith_nicholas/wmxJX/](http://jsfiddle.net/keith_nicholas/wmxJX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T04:22:01.227

每次您选择不同时，`selectedDatabaseField`它都会重建`availableOptions.options`. 每一行都与这些相同的选项绑定为选项。重建选项时，每行的选定值不再是有效选择。

即使对象看起来完全一样，除非它是对同一对象的引用，否则它也不相等。

因此，由于选项已更改并且当前选择的值不再有效，`value`绑定将分配第一个选项作为值（除非您指定了 optionsCaption）。

因此，您可能不想重新构建选项，如果它们已经构建，或者您希望为每一行提供单独的选项，而不是绑定到同一个数据库字段对象。

# yii - yii - 创建嵌套的 cgridview

> ID：10988554
> 
> 赞同：1
> 
> 时间：2012-06-11T22:55:46.700
> 
> 标签：yii

是否可以使用 cgridview 创建嵌套表？

我希望最终输出如下

```
| Transaction     | Total |
| T-001           |  $100 | 
      | Item | Price |      // here is the nested table
      | I-1  |  $50  |
      | I-2  |  $50  |
| T-002           |  $90  |
      | Item | Price |      // here is the nested table
      | I-3  |  $90  | 
```

我知道您可以使用自定义模板来做到这一点，但我想要一个使用 CGRidView 之类的小部件的更简洁的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:23:50.933

如果嵌套表格在单元格内，那么您可以，只需在模型中创建将呈现表格并返回内容的函数。您可以将小部件函数的第三个参数设置为 true 以返回内容。如果要为嵌套表启用分页，请务必手动设置小部件 ID 并允许 ajax 更新。

在模型中：

```
function getNestedTable() {

  return Yii::app()->controller->widget(..., ..., true);

} 
```

在列定义中使用：

```
'columns' => array(
  array(
  'name' => 'nestedTable',
  'type' => 'raw'
  )
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:10:14.870

我认为实现您想要的最佳方法是在您的 CActiveRecord 模型中使用自定义函数（如果您有网格的 CActiveDataprovider），并将“嵌套表”作为普通列：

```
| Transaction  | Item | Price |    Total |
------------------------------------------
| T-001        | I-1  |  $50  |     $100 | 
               | I-2  |  $50  | 
------------------------------------------
| T-002        | I-3  |  $90  |     $90  |
------------------------------------------ 
```

在您的模型中，您必须定义在 HTML 中返回带有换行符的数据的 get 函数（例如使用 br：

```
class Item extends CActiveRecord {
...
public function getIdItems()
{
    $string = '';
    foreach($this->items as $item) {
        if ($string != '') $string .= '<br/>';
        $string .= ' '.$item->textId; // 'I-3', 'I-2'...
    }
    return $string;
}
public function getPriceItems()
{
    $string = '';
    foreach($this->items as $item) {
        if ($string != '') $string .= '<br/>';
        $string .= ' '.$item->price; // $50, $90...
    }
    return $string;
}
...
} 
```

并在网格中显示新列：

```
$this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'anotacionesGrid',
    'dataProvider'=>$dataProvider,
    'columns'=>array(
        'transaction',
        'idItems:html:Item',
        'priceItems:html:Price',
        'total'
    )
); 
```

# forms - symfony2：空日期渲染

> ID：10988555
> 
> 赞同：3
> 
> 时间：2012-06-11T22:56:09.990
> 
> 标签：forms, date, symfony

每个人

我在 Symfony2 中遇到空日期和表单的问题。

当我创建一个日期为空的实体时，它工作正常，在数据库中插入了一个 NULL 值。但是当我想编辑它时，它呈现为今天，我发现无法呈现 empy_values

正如预期的那样，“preferred_choices”不起作用，因为“日期”不是“选择”。

似乎在某处调用了一个新的 \DateTime() 。

索引和显示操作没有问题：

[索引/show.html.twig]

```
 {% if entity.dueDate %}

            {{ entity.dueDate|date('Y-m-d') }}

            {% endif %} 
```

如果我在控制器中询问，则行为是预期的

[控制器]

```
if (!$entity->getDueDate()) {

 // enters here when there is NULL in the database

} 
```

这是实体和表单定义：

[实体]

```
/**

 * @var date $dueDate

 *

 * @ORM\Column(name="dueDate", type="date", nullable="true")

 */

private $dueDate; 
```

[形式]

```
 $builder->add('dueDate', 'date', array('label'=>'Due date', 'empty_value' => array('year' => '----', 'month' => '----', 'day' => '----'),'required'=>false)) 
```

请给我一个提示，提前谢谢你。

2011-06-26 有一个相关的问题，在谷歌群组中没有答案

[https://groups.google.com/forum/#!msg/symfony2/nLUmjKzMRVk/9NlOB1Xl5RwJ](https://groups.google.com/forum/#!msg/symfony2/nLUmjKzMRVk/9NlOB1Xl5RwJ)

[http://groups.google.com/group/symfony2/browse_thread/thread/9cb5268caccc4559/1ce5e555074ed9f4?lnk=gst&q=empty+date+#1ce5e555074ed9f4](http://groups.google.com/group/symfony2/browse_thread/thread/9cb5268caccc4559/1ce5e555074ed9f4?lnk=gst&q=empty+date+#1ce5e555074ed9f4)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-16T14:05:50.297

使用现代版本的 Symfony，您似乎需要：

```
$builder->add('dueDate', DateType::class, array(
    'placeholder' => ['year' => '--', 'month' => '--', 'day' => '--']
) 
```

`empty_value`已被替换`placeholder`，您需要传递一个包含每个“空”值的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-10T08:56:44.603

你可以这样解决：

```
$builder->add('dueDate', 'date', array(
   'label'=>'Due date', 
   'empty_value' => array('----'),
   'required'=>false
)) 
```

你已经接近解决方案了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T21:55:53.950

我不想自己渲染表单，但由于一个不相关的问题我已经这样做了，我开发了某种修复：

```
[edit.html.twig]
   <div class="entry {% if not entity.dueDate %}nullabledate{% endif %}">
     {{ form_label(form.dueDate) }}
     {{ form_errors(form.dueDate) }}
     {{ form_widget(form.dueDate) }}
</div> 
```

[添加到一些 javascript 文件]

```
jQuery(document).ready(function() {
  var nullDate = function(id) {
    $(".nullabledate select").each(function(key,elem){
      $(elem).val('');
    })
  }
  nullDate();
} 
```

# c - 如何声明指针并分配内存一个二维数组并传递给函数

> ID：10988562
> 
> 赞同：2
> 
> 时间：2012-06-11T22:56:41.333
> 
> 标签：c, arrays, function, 2d

我想声明正确的指针并为二维数组分配内存，并正确传递给函数。我无法使其正常工作并需要帮助。

这是我的代码：

```
 double **podrucje;
    podrucje=(double **) malloc (sizeof (double *) *123);
    for (i=0;i<(123);i++)
    {                       
        podrucje[i]=(double *) malloc (sizeof (double) * 11);
    }
    for (i=0;i<(123);i++)
    {   
        memset (podrucje[i], 0, 10);
    } 
```

但是这段代码不起作用，它弄乱了我的整个程序。所以我决定放弃动态分配并使用它：

```
 double podrucje[123][11]={0}; 
```

但我不知道如何发送它并在功能中使用它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:02:57.147

memset 按字节工作。

```
double **podrucje = (double **) malloc (sizeof (double *) * 123);
for (i = 0; i < 123; i++)
{                       
    podrucje[i] = (double *) malloc (sizeof (double) * 11);
    memset(podrucje[i], 0, sizeof(double) * 11);
} 
```

如果你想通过它，只需声明它

```
void function(double podrucje[123][11]) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T23:03:07.257

你最好使用 malloc，但在你的第二行分配整个数组，所以它都被分配在连续的内存中。所以

```
podrucje = (double*) malloc (sizeof (double) * 123 * 11); 
```

然后第一个循环也可以消失。看起来您正在将数组初始化为 0 - 在这种情况下，请使用`calloc`而不是`malloc`，从而消除第二个循环。

要索引到数组，使用类似的东西

```
double myitem = podrucje [11 * row + col]; 
```

您当然应该使用 define 或类似的东西来保持 11 的使用一致，但这不是这个答案的重点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T04:40:02.737

在以下代码片段中，

```
podrucje[i]=(double *) malloc (sizeof (double) * 11);
for (i=0;i<(123);i++)
{   
    memset (podrucje[i], 0, 10);
} 
```

1）你不需要额外的括号对数字`123`和`11` for循环可以如下，

`for (i = 0; i < 123; i++)`

2）而不是使用`123`and `11`。尝试定义 a`MACRO`并改用它。

优点：代码变得独立于特殊数字，易于维护。特别是在代码库较大的情况下。

3）如果您阅读了代码，`podrucje[i] is allocated a memory of 11 doubles`但是当您`memset`将其设置为仅`10`双打时，最后一个可能包含也可能不包含垃圾。在这里使用`calloc`，它不仅分配了内存，还初始化了相同的内存。

`podrucje[i]=(double *) calloc(11,sizeof(double));`

此外，如果你能说出它到底是如何搞砸你的代码，它可能会更有帮助？例如，代码片段不仅可以说明其搞砸了，还可以提供更多帮助。它可以帮助其他人调查和解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T06:34:40.793

如果您有一个现代 C 编译器（C99 可以），您甚至可以声明具有可变大小的真实二维矩阵。您无需使用指针回退到这种糟糕的仿真。

```
void myfunc(size_t n, size_t m, double podrucje[n][m])
{
    ...
}

double (*podrucje)[n] = malloc(sizeof(double[n][m]));
myfunc(n, m, podrucje); 
```

对于函数，您只需要确保在矩阵之前先声明`n`and 。`m`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T23:03:05.120

编写函数参数的方式与编写变量定义的方式相同：

```
void myfunc(double podrucje[123][11])
{
    ...
}

double podrucje[123][11];
myfunc(podrucje); 
```

请注意，数组是“通过引用”传递的，而不是被复制的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T11:16:38.693

有几种方法可以为 NxM 数组动态分配内存。这里有两个：

您可以声明一个指向 M 元素数组的指针，然后声明`malloc`它的 N 个实例：

```
double (*podrucje)[11] = malloc(sizeof *podrucje * 123); 
```

从 C89 开始，您不需要强制转换 的结果`malloc`，并且不鼓励这种做法。另外，请注意操作数`sizeof`是表达式`*podrucje`; 这给了我相同的结果`sizeof (double) * 11`。

`podrucje[i][j]`您可以像任何其他二维数组一样 索引这个数组。`podrucje[i]`隐式取消引用指针（记住它`a[i]`相当于`*(a + i)`），因此您不必对它做任何时髦的事情。

您将在如下函数中使用它：

```
void init(double (*podrucje)[11], size_t rows)
{
  size_t i, j;
  for (i = 0; i < rows; i++)
    for (j = 0; j < 11; j++)
      podrucje[i][j] = 0.0;
} 
```

这将被称为

```
init(podrucje, 123); 
```

这种方法的缺点是该函数只能对 Nx11 数组进行操作；如果您使用的是支持可变长度数组的 C99 编译器或 C2011 编译器，则可以将列数指定为运行时变量：

```
void foo(void)
{
  size_t rows = 123, cols = 11;
  double (*podrucje)[cols] = malloc(sizeof *podrucje * rows);
  if (podrucje)
    init(cols, podrucje, rows);
  ...
}

// cols must be declared before it can be used
// in an array declarator
//
void init(size_t cols, double(*podrucje)[cols], size_t rows)
{
  size_t i, j;
  for (i = 0; i < rows; i++)
    for (j = 0; j < cols; j++)
      podrucje[i][j] = 0.0;
} 
```

完成数组后，按如下方式释放它：

```
free(podrucje); 
```

另一种方法是单独分配每一行，如下：

```
size_t rows = 123, cols = 11;
double **podrucje = malloc(sizeof *podrucje * rows);
if (!podrucje)
{
  // malloc failed; handle allocation error here
}
else 
{
  size_t i;
  for (i = 0; i < rows; i++)
  {
    podrucje[i] = malloc(sizeof *podrucje[i] * cols);
    if (!podrucje[i])
    {
      // malloc failed; handle allocation error here
    }
  }
} 
```

您将在如下函数中使用它：

```
void foo()
{
  double **podrucje;
  // allocate array as above
  init(foo, rows, cols);
  ...
}

void init(double **podrucje, size_t rows, size_t cols)
{
  size_t i, j;
  for (i = 0; i < rows; i++)
    for (j = 0; j < cols; j++)
      podrucje[i][j] = 0.0;
} 
```

完成数组后，按如下方式释放它：

```
for(i = 0; i < rows; i++)
  free(podrucje[i]);
free(podrucje); 
```

第一种方法将内存分配为单个连续块；第二个将它分配在一系列更小的、不连续的块中。如果你的数组特别大或者你的堆特别碎片，第一种方法可能会失败，而第二种方法会成功。如果您使用的编译器不支持可变长度数组，则第一种方法的灵活性要低得多，因为必须在编译时指定列数。

相同的索引方法如何适用于两种形式？

在第一种情况下，每个`podrucje[i]`都是 11 个元素的数组`double`；`j`像任何其他数组一样使用索引它。在第二种情况下， each`podrucje[i]`是一个指向 double 的指针。由于`a[i]`被评估为`*(a + i)`，因此数组索引对指针表达式和数组表达式一样有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-13T11:19:49.510

```
int print_func(char((*p)[26])[10])
{
    int i = 0;
    for (i=0; i < 26 ; i++) {
        fprintf(stderr, "%02d:%.*s\n", i, 10, p[0][i]);
    }
    return (0);
}

int main(void)
{
    int nrow = 26;
    int ncol = 10;
    char((*p)[26])[10] = (char((*)[26])[10])(0);
    char(*q)[10];
    char c = 'a';
    int i = 0;

    p = (char((*)[26])[10])malloc(sizeof(char) * nrow * ncol);
    if ((char((*)[26])[10])0 == p) {
            return (-1);
    }
    for (i=0, q=p[0]; i < nrow ; i++) {
        memset(q, c, sizeof(char) * ncol);
        c++;
        q++;
    }
    for (i=0,q=p[0] ; i < nrow ; i++) {
        fprintf(stderr, "%.*s\n", 10, q);
        q++;
    }

    p[0][8][0]='z';
    getchar();
    print_func(p);
    return (0);
} 
```

# .htaccess - Joomla 组件的 htaccess clean url

> ID：10988563
> 
> 赞同：-1
> 
> 时间：2012-06-11T22:56:41.400
> 
> 标签：.htaccess, mod-rewrite, seo, clean-urls

我放弃。我在这里阅读了几十个问题，甚至问过我自己的问题，我尝试了很多东西，我只是不知道该怎么办了。

我需要使用以下格式创建 url：（NSFW 链接，请注意）

```
http://jbthehot.com/#page=1

http://jbthehot.com/home?func=viewphoto&id=2969

http://jbthehot.com/home?page=4

http://jbthehot.com/home?func=viewalbum&aid=75 
```

我一定是迟钝了，因为我根本不懂 htaccess。我尽量不要求全部完成的答案，但在这种情况下，对上述至少一种格式的实际清晰的复制/粘贴答案真的很有帮助。我再说一遍，我已经尝试了很多东西，所以我显然做错了什么，或者我不理解正确的规则和条件，所以一个肯定有效的复制/粘贴答案真的可以帮助我理解我在这里做错了。

如果有帮助，这里使用的组件是 Joomla 上的 SIM Gallery，并且 .htaccess 中还有一些其他有效的重写规则，它们是：

```
#
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/index.php
RewriteCond %{REQUEST_URI} (/|\.php|\.html|\.htm|\.feed|\.pdf|\.raw|/[^.]*)$  [NC]
RewriteRule (.*) index.php
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L] 
# 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T23:16:56.563

```
RewriteEngine On
RewriteBase /
RewriteRule ^home/viewphoto/([0-9]+)$ home?func=viewphoto&id=$1 [L]
RewriteRule ^home/viewalbum/([0-9]+)$ home?func=viewalbum&aid=$1 [L]
RewriteRule ^home/page/([0-9]+)$ home?page=$1 [L] 
```

所以`http://jbthehot.com/home/viewphoto/2969`会告诉你`http://jbthehot.com/home?func=viewphoto&id=2969`，等等

# java - 从应用程序以全屏模式启动 Android 浏览器

> ID：10988564
> 
> 赞同：2
> 
> 时间：2012-06-11T22:56:42.807
> 
> 标签：java, android, browser, android-intent, fullscreen

有没有办法在全屏模式下从应用程序启动 android 浏览器，从而使地址栏不可见？任何示例或指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:31:14.403

根据您的要求，a`WebView` 可能就足够了。教程可以在[这里](http://developer.android.com/resources/tutorials/views/hello-webview.html)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T23:37:37.413

您可以简单地设置全屏模式

**第一种方法：**

只需添加到您的`Manifest.xml`

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

**第二种方法：**

```
requestWindowFeature(Window.FEATURE_NO_TITLE) 
```

**第三种方法：**

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN) 
```

# python - Python Web 请求错误 403

> ID：10988566
> 
> 赞同：-2
> 
> 时间：2012-06-11T22:57:02.547
> 
> 标签：python, http, http-status-code-403

我在使用 python 访问网页时遇到问题——它抛出 HTTP 错误 403。在浏览堆栈溢出后，我发现许多其他用户遇到了同样的错误，并通过更改请求的标头来解决它。我试过了，但仍然收到错误。

这是我的代码：

```
req = urllib2.Request("http://www.mozilla.org")
req.add_header('User-agent', 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.8a3) Gecko/20040817')

try:
    response = urllib2.urlopen(req)
except urllib2.URLError, (err):
    print "URL error(%s)" % (err) 
```

编辑：这是我的一大块代码，它是网络爬虫的开始。另外——我一直使用[http://www.mozilla.org](http://www.mozilla.org)作为我的测试 url，尽管它似乎不适用于任何其他 url，例如 google 和 yahoo。

```
#!/usr/bin/python

import sys
import urllib2
import urlparse
tocrawl = set([sys.argv[1]])
crawled = set([])

while 1:
    try:
        crawling = tocrawl.pop()
        print 'Crawling: ', crawling
    except KeyError:
        print 'No more to crawl!'
        raise StopIteration

    url = urlparse.urlparse(crawling)
    print 'Url parse returned ', url

    req = urllib2.Request(crawling)
    req.add_header('User-agent', 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.8a3) Gecko/20040817')
    print 'header: ', req.get_header('User-agent')

    try:
        print 'test'
        response = urllib2.urlopen(req)
        print 'test2'
        print 'response: ', response
    except urllib2.URLError, (err):
        print "URL error(%s)" % (err)
        continue

    msg = response.read() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:53:41.903

固定的。问题是我没有设置必要的代理。感谢您的回复。

我添加了以下代码片段以进行修复。

```
proxy_info = urllib2.ProxyHandler({'http' : "proxy:80"})
opener = urllib2.build_opener(proxy_info)
urllib2.install_opener(opener) 
```

# c# - MVVM：如何维护所有视图模型都将使用的数据？

> ID：10988568
> 
> 赞同：0
> 
> 时间：2012-06-11T22:57:25.313
> 
> 标签：c#, mvvm, mvvm-light, microsoft-metro

也许标题没有那么描述性。

我正在使用 Galasoft MVVM 框架，我意识到在我的应用程序中我一直需要或在视图模型中使用这些数据。

我需要的数据是这个**认证模型**

*   用户名：字符串
*   密码：字符串
*   IsGuest : 布尔值

我想这不是一个好主意，也是通过导航传递这些数据的最佳方式。

几个月前，我在使用 Prism，我记得一个叫做**Container**的东西，你可以在应用程序的整个生命周期中注册和保存你的对象。

我在想的另一种方法是将它保存在**App 类**中，但我不确定这是否是个好主意。

顺便说一句，我正在开发 Metro UI 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:37:08.977

不要将数据存储在 中，`App`因为它是**View**的一部分。要使用它，您必须有效地从所有 ViewModel 中引用 View。MVVM 的一个核心原则是 Model(s) 只能访问其他 Model 项，ViewModel 可以访问其他 ViewModel 和 Model，而 View 可以访问 ViewModel

您可以考虑几种选择

1.  创建一个静态类 AuthenticationData 在其中初始化
2.  将身份验证数据传递给每个视图模型的构造函数
3.  将身份验证数据存储在 IoC 容器中（GalaSoft 有一个 SimpleIoc 类）

`IAuthenticationData`如果您使用接口，选项 2 和 3 可以更轻松地模拟您的身份验证数据以进行测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:43:34.437

对于身份验证，您已经可以使用一些东西。检查 IPrincipal/IIdentity 接口。身份验证后，这些设置为 Thread.CurrentThread.CurrentPrincipal 并且可以在以后使用。

您所指的**容器可能是 Unity，它是一个**[IoC 容器](http://en.wikipedia.org/wiki/Inversion_of_control)，GalaSoft 也带有一个简单的容器。

# indexeddb - Chrome 浏览器的存储空间限制

> ID：10988569
> 
> 赞同：39
> 
> 时间：2012-06-11T22:57:30.603
> 
> 标签：indexeddb

什么是软限制（用户需要允许超过该限制）？什么是硬限制（允许的最大值）。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-18T06:10:44.273

**2020 年 5 月更新**：Chrome 现在允许源使用 60% 的存储设备空间（真正的细节：“存储设备”是包含 chrome 配置文件目录的分区）。此处更新文章[https://web.dev/storage-for-the-web/#how-much](https://web.dev/storage-for-the-web/#how-much)

* * *

经验法则是用户硬盘上可用空间的 6%（2015 年 7 月编辑：为 10%），如果您的源使用 websql、appcache 或文件系统 api，则更少。提到 5mb 的 MDN 文档已过时并已更新。有关当前政策的血腥细节在这里：[https ://developer.chrome.com/apps/offline_storage](https://developer.chrome.com/apps/offline_storage)

注意一些烦人的细微之处：

1.  indexeddb 没有持久存储，只有上面链接中关于 TEMPORARY 的内容适用。
2.  一旦你的源用尽了它在池中的份额，~~indexeddb 事务将毫无帮助地中止，而没有真正的原因。到目前为止，确定配额不足的唯一方法是使用[queryUsageAndQuota](https://developers.google.com/chrome/whitepapers/storage#queryUsageAndQuota)检查剩余空间。希望将来的 chrome 版本能在这些情况下正确填写 IDBTransaction.error。~~编辑：chrome 26 现在用 QuotaExceededError 正确填写 IDBTransaction.error。
3.  目前没有 API 可以为 indexeddb 请求更多存储空间。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-08-21T06:45:26.597

在 chrome>dev tools(F12)>console 中使用以下代码检查配额

```
// Request storage usage and capacity left
window.webkitStorageInfo.queryUsageAndQuota(webkitStorageInfo.TEMPORARY, 
//the type can be either TEMPORARY or PERSISTENT
function(used, remaining) {
  console.log("Used quota: " + used + ", remaining quota: " + remaining);
}, function(e) {
  console.log('Error', e); 
} ); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-12T23:42:13.607

**警告 - 此信息已过时**- 请参阅下面的[其他答案](https://stackoverflow.com/a/11077695/1276639)。

Chrome 在达到[`QUOTA_ERR`](https://developer.mozilla.org/en/IndexedDB/IDBDatabaseException). [这是 MDN](https://developer.mozilla.org/en/IndexedDB#Storage_limits)对这一事实的引用。

[规范](http://www.w3.org/TR/IndexedDB/)提到了 a但`QuotaExceededError`似乎没有说明什么时候应该抛出它。

> **QuotaExceededError** 操作失败，因为没有足够的剩余存储空间，或者已达到存储配额并且用户拒绝为数据库提供更多空间。

我没有听说过硬限制，在我自己的开发中也没有达到。在您到达之前，性能应该会向南走很远。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-04-02T21:04:46.693

问题是关于 Chrome 并标记为 IndexedDB。而且我认为它是关于网站的，而不是 Chrome 扩展程序或应用程序（允许无限存储 IndexedDB）。

对于网站，IndexedDB 是 Chrome 临时存储的 API（[来源](https://developer.chrome.com/apps/offline_storage#table)）。所以问题是关于**Temporary Storage in Chrome 的配额**。

[在 Chrome 67 中，配额行为发生了变化，除了错误报告](https://bugs.chromium.org/p/chromium/issues/detail?id=838816#c19)之外，这并没有真正记录在案。综合来看，目前的配额行为是：

*   在 Chrome**正常模式下**

    *   对于**离线 API**（应用缓存、文件系统、IndexedDB、WebSQL）：

        如果达到“应该保持可用”值，则一个来源（“站点”）的配额将为零。“应该保持可用”值与在大容量存储上保持空闲的空间有关。从 Chrome 67 开始，它是“2 GiB”和“大容量存储总容量的 10%”（[来源](https://bugs.chromium.org/p/chromium/issues/detail?id=838816#c19)）的较低值。一旦达到此限制，对临时存储的额外写入将失败，但不会删除临时存储中的现有数据。

        如果尚未达到“应该保持可用”值，则配额将为共享池 ( [source](https://developer.chrome.com/apps/offline_storage#table) ) 的 20%。这（可能）意味着“Chrome 已经保存了临时存储中所有数据的 20%，加上 Chrome 可以保存到本地存储而不达到‘应该保持可用’值的所有数据”。

    *   对于**Web 存储 API**（LocalStorage、SessionStorage、...）：5 MiB 固定（[来源](https://developer.chrome.com/apps/offline_storage#table)）；我不知道这是否受到上面记录的“应该保持可用”限制的影响。

*   在 Chrome**隐身模式下**

    *   对于**离线 API**（应用缓存、文件系统、IndexedDB、WebSQL）：ca。[100 MiB 固定，无论大容量存储（源](https://developers.google.com/web/tools/workbox/guides/storage-quota#special_chrome_incognito_considerations)）上的可用空间如何。
    *   对于**Web 存储 API**（LocalStorage、SessionStorage...）：5 MiB 固定（[来源](https://developer.chrome.com/apps/offline_storage#table)）。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-10-01T16:39:52.967

IndexedDB 从 Google Chrome 中的“临时”存储中获得内存。Chrome 上的临时存储空间的默认配额为可用磁盘空间的 50%，其中 20% 可用于您的离线应用程序。为临时存储请求更多配额不会做任何事情。

基于上述，您的问题的答案将是：

1.  IndexedDB（在 Chrome 浏览器上）无需请求即可使用存储。（知道它是从临时存储中分配的）
2.  请求超过 TEMPORARY 存储限制（50% 的 20%，如上所述）将不会分配任何内容。

您可以使用[Browser Storage Abuser](http://demo.agektmr.com/storage/)工具（在[此](http://www.html5rocks.com/en/tutorials/offline/quota-research/)HTML5Rocks 文章中引用，该文章记录了不同浏览器的结果）来确定您正在运行的 Chrome 上的可用临时存储。

我没有足够的声望来发布更多链接，但上面关于配额研究的 HTML5Rocks 文章有足够的详细信息来帮助您确定适当的存储类型（临时或持久）和适当的存储机制（如果您不一定要归零） IndexedDB) 可能适合您的应用程序。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-18T23:42:08.890

最小或软限制为 5MB - 浏览器将请求存储数据的权限。最大存储空间是硬盘的限制，因为所有数据都本地存储在您的机器磁盘上。基本上，如果您有 20GB 的可用存储空间，那么您可以将所有存储空间用于 IndexedDB。

# php - 使用 PHP 搜索 MySQL 时如何显示错误

> ID：10988574
> 
> 赞同：0
> 
> 时间：2012-06-11T22:58:12.007
> 
> 标签：php, mysql

PHP 和 MySQL 的新手，从 Leo Laporte 和其他人那里听到了关于这个网站的惊人信息。我正在使用一个非常基本的 PHP 脚本来搜索人名的 MySQL 数据库。我想知道如果数据库中没有那个名字的人，我怎么能让搜索提供一个错误。

```
</p><?php

mysql_connect ("mysql.mydomain.us", "pnq_1","passwordremoved")  or die (mysql_error());
mysql_select_db ("pnq_soldiers");

$term = $_POST['term'];

$sql = mysql_query("select * from test_database where LN like '%$term%'");

while ($row = mysql_fetch_array($sql)){
    echo 'Last Name: '.$row['LN'];
    echo '<br/> First Name: '.$row['FN'];
    echo '<br/> Middle Initial: '.$row['MI'];
    echo '<br/> Rank: '.$row['RNK'];
    echo '<br/> Company: '.$row['CO'];
    echo '<br/> Platoon: '.$row['PL'];
    echo '<br/> Roster Number: '.$row['RN'];
    echo '<br/><br/>';
    }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:01:32.733

检查返回了多少行。如果未返回任何行，则可以显示错误。

```
$sql = mysql_query("select * from test_database where LN like '%$term%'");
if (mysql_num_rows($sql)) {
    // continue as normal
} else {
    echo "Error!";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T23:01:38.083

```
if (mysql_num_rows($sql)==0){
    //error
}else{
    //process data, while loop
} 
```

当然不要使用`mysql_`函数:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T23:02:05.913

使用 mysql_num_rows 测试结果中的行数。0 表示没有结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T23:02:10.687

保持简单...使用`mysql_num_rows()`

```
</p><?php

mysql_connect ("mysql.mydomain.us", "pnq_1","passwordremoved")  or die (mysql_error());
mysql_select_db ("pnq_soldiers");

$term = $_POST['term'];

$sql = mysql_query("select * from test_database where LN like '%$term%'");

if(mysql_num_rows($sql) < 1) {

    echo 'Couldn\'t find anything for '.$term.'.';
}
else {

while ($row = mysql_fetch_array($sql)){
    echo 'Last Name: '.$row['LN'];
    echo '<br/> First Name: '.$row['FN'];
    echo '<br/> Middle Initial: '.$row['MI'];
    echo '<br/> Rank: '.$row['RNK'];
    echo '<br/> Company: '.$row['CO'];
    echo '<br/> Platoon: '.$row['PL'];
    echo '<br/> Roster Number: '.$row['RN'];
    echo '<br/><br/>';
    }
}

?> 
```

# html - CSS Sprite 只显示最终图像

> ID：10988575
> 
> 赞同：2
> 
> 时间：2012-06-11T22:58:12.057
> 
> 标签：html, css, css-sprites

我有一个精灵表，我想将图像并排显示，但代码只显示最终图像。因此，此代码仅显示 google 图像，但它确实正确显示它（使用 a:hover），但它不显示 facebook 或 twitter 图像。

我知道坐标是正确的，如果我`<li>`在刷新页面时注释掉谷歌，只会显示 facebook 图片。我不知道它有什么问题，但想知道它是否与显示属性有关？

编辑：这是正在发生的事情的一个活生生的例子：http: **[//jsfiddle.net/Duykb/](http://jsfiddle.net/Duykb/)**

```
<div class="social"><h3>SHARE THIS PAGE</h3>
     <ul id="social">
         <li class="facebook">
             <a href="#" title="Facebook"></a></li>
         <li class="twitter">
             <a href="#" title="Twitter"></a></li>
         <li class="google">
             <a href="#" title="Google+"></a></li> 
    </ul>
 </div> 
```

CSS：

```
h3 {
font-family: Georgia, "Times New Roman", Times, serif;
font-size: 16px; }

#social {
margin-top: 10px;   
display: block;
position:relative;
padding-top: 30px; }        

#social li {
margin:0;
padding:0;
list-style:none;
position:absolute;
top:0; }

#social li, #social a {
height:37px;
display:block; }

ul#social li.facebook a {
background: url('images/social_icons.png') no-repeat -5px -4px;
width: 37px;
height: 37px; }

ul#social li.facebook a:hover {
background: url('images/social_icons.png') no-repeat -5px -42px;
width: 37px;
height: 37px; }

ul#social li.twitter a {
background: url('images/social_icons.png') no-repeat -45px -4px;
width: 37px;
height: 37px; }

ul#social li.twitter a:hover {
background: url('images/social_icons.png') no-repeat -45px -42px;
width: 37px;
height: 37px; }

ul#social li.google a {
background: url('images/social_icons.png') no-repeat -82px -4px;
width: 37px;
height: 37px; }

ul#social li.google a:hover {
background: url('images/social_icons.png') no-repeat -82px -42px;
width: 37px;
height: 37px; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:21:34.867

我认为`<li>`由于它们的绝对定位，您的所有产品都彼此重叠。因此，您正在处理分层问题。

如果您希望它们都彼此相邻，请尝试为每个块元素设置宽度，并使用`left:`or`right:`属性为它们提供绝对位置。

编辑：

将规则更改`#social li`为...

```
 #social li {
    margin:0;
    padding:0;
    list-style:none;
    width: 37px;
    float:left;
} 
```

[http://jsfiddle.net/Duykb/2/](http://jsfiddle.net/Duykb/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T23:31:04.683

[http://jsfiddle.net/Duykb/1/](http://jsfiddle.net/Duykb/1/)

从中删除`position: absolute`和，然后添加...`top: 0``#social li`

```
#social li {
    float: left;
    width: 37px;
} 
```

`#social`然后对页面上的正确位置进行必要的调整。

# android - 添加 spinnerSelector 时出现 Android 错误，找不到资源标识符

> ID：10988583
> 
> 赞同：5
> 
> 时间：2012-06-11T22:59:05.353
> 
> 标签：android, eclipse, android-spinner

我想将微调器项目上的列表选择器的颜色更改为丑陋的橙色默认值以外的颜色。根据我的阅读，这样做的方法是设置`android:spinnerSelector`属性。但是，在 Eclipse 中，当我尝试设置`android:spinnerSelector`属性时出现此错误

> 错误：在包“android”中找不到属性“spinnerSelector”的资源标识符

这是我的带有微调器的 xml 文件；

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/darkgray" >
    <Spinner
        android:id="@+id/timespinner"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:spinnerSelector="@drawable/my_selector"
        android:drawSelectorOnTop="true"
        android:prompt="@string/timeprompt" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T12:45:30.140

该`android:spinnerSelector`属性不再是 API 的一部分。这篇文章可能有一个解决方法：[Android: How to set spinner selector to own image/icon?](https://stackoverflow.com/questions/4535109/android-how-to-set-spinner-selector-to-own-image-icon)

# c# - 实体框架中与代码优先外键的更改冲突

> ID：10988586
> 
> 赞同：0
> 
> 时间：2012-06-11T22:59:23.357
> 
> 标签：c#, .net, sql, entity-framework, orm

我使用适配器能够将接口而不是具体类型插入 dbcontext。适配器独立工作，但我无法将任何一对一（父子）关系保存到数据库中：

### 异常源

```
public void SaveDomain(IDomain domain){
    _entityRepositor = new Donors();
    _entityRepositor.DomainReps.Add(new DomainRep(domain));                
} 
```

### 无效操作异常

`Conflicting changes to the role 'DomainRep_TopLevelDomainRep_Target' of the relationship 'Edonics.Repositor.DomainRep_TopLevelDomainRep' have been detected.`

### 外键属性和导航属性应该同步吗？

```
public class DomainRep: IDomain
{
    private readonly IDomain _adaptee;        

    public DomainRep(IDomain adaptee)
    {
        _adaptee = adaptee;
    }

    [NotMapped]
    public IDomain Adaptee
    {
        get { return _adaptee; }
    }

    public string Id
    {
        get { return _adaptee.Id; }
        set { _adaptee.Id = value; }
    }

    public string TopLevelDomainRepId
    {
        get { return _adaptee.Tld.Id; }

        set { }
    }

    [ForeignKey("TopLevelDomainRepId")]
    public TopLevelDomainRep TopLevelDomainRep
    {
        get { return new TopLevelDomainRep(Tld); }
        set { Tld = value.Adaptee; }
    }

    public ITopLevelDomain Tld
    {
        get { return _adaptee.Tld; }
        set { _adaptee.Tld = value; }
    }

    public string SecondLevelDomainRepId
    {
        get { return _adaptee.Sld.Id; }  

        set { } 
    }

    [ForeignKey("SecondLevelDomainRepId")]
    public SecondLevelDomainRep SecondLevelDomainRep
    {
        get { return new SecondLevelDomainRep(Sld); }
        set { Sld = value.Adaptee; }
    }

    public ISecondLevelDomain Sld
    {
        get { return _adaptee.Sld; }
        set { _adaptee.Sld = value; }
    }

} 
```

*有任何想法吗？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T00:40:27.613

您的适配器模式会干扰 EF 的工作方式。您正在为实体的导航属性提供不同的实现。例如，如果您`TopLevelDomainRep`多次访问属性，它将返回多个实例，但具有相同的 ID/实体键。对于给定的主键值，EF 只处理每个上下文的单个实例。

要么在 EF 实体之上创建域层，要么按照预期的方式使用 EF 实体。

# c# - 与普通算术相比，TImeSpan 算术耗时多少？

> ID：10988592
> 
> 赞同：1
> 
> 时间：2012-06-11T23:00:19.230
> 
> 标签：c#, performance, timespan

我有一个带有中断的 C# 程序，它处理我希望每 40 毫秒运行一次的列表的一部分，但是中断内的数学运算可以冻结具有某些大小和属性的列表的程序。

我很想尝试通过从数学中删除 TimeSpan 加减并在执行算术之前而不是之后将它们全部转换为 TotalMilliseconds 来加速它。有谁知道与获取 TotalMilliseconds 并添加和减去 TimeSpan 相比，添加和减去 TimeSpan 的开销是多少？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T23:23:40.053

这是不明智的，Timespan.TotalMilliseconds 是*double*类型的属性，单位为一毫秒。Ticks 与底层结构值高度无关，是*long*类型的底层字段的属性获取器，单位为 100 纳秒。TotalMilliseconds 属性 getter 通过一些技巧将 long 转换为 double，它确保来回转换产生相同的数字。

这对 TimeSpan 来说是个问题，它可以覆盖 10,000 年，精度为 100 纳秒。然而，双精度数有 15 位有效数字，这不足以以这种精度涵盖那么多年。TotalMilliseconds 属性执行*舍入*，而不仅仅是转换，它确保返回值精确到一毫秒。不是 100 纳秒。所以来回转换它总是产生相同的值。

哪个有效：10,000 年 x 365.4 天 x 24 小时 x 60 分钟 x 60 秒 x 1000 毫秒 = 315,705,600,000,000 毫秒。数一下数字，正好是 15，所以正好可以存储在一个 double 中而不会损失准确性。快乐的巧合，不是吗？

回答这个问题：如果你关心速度，那么总是使用 Ticks，而不是 TotalMilliseconds。这是一个非常快的 64 位整数运算。 比整数到浮点+舍入转换快得多*。*

# android - 如何在Android中解码数组元素的数组

> ID：10988601
> 
> 赞同：0
> 
> 时间：2012-06-11T23:01:37.700
> 
> 标签：android, arrays, json

PHP 脚本正在向 Android 应用程序发送以下格式的一些数据

```
[{"event_id":"4","message":"test"},["person1","person2"]] 
```

我想将这个数组中的 2 个元素精确到其他数组中，这样我就可以轻松地操作数据。我已经到了将来自服务器的上述响应转换为字符串的地步。我似乎无法将数据解析为数组。我正在尝试以下几行：

> ```
> receivedData = new JSONArray(result); //result is the string response from the server  
> JSONArray array1= receivedData.getJSONArray(0);  
> JSONArray array2= receivedData.getJSONArray(1);  
> int len = array1.length(); 
> ```

但`len`没有给我任何回报:(
我做错了什么，我该如何改变它。
非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:06:01.193

如果你从调用 new JSONObject(result); 开始呢？然后从中拉出一个数组？我怀疑你正试图从不是数组的东西中拉出一个数组。您的 PHP 不应返回包含在 [ ] 中的内容，而应返回包含在 { } 中的内容……我相信您的第三个 JSON 元素（数组本身）只是在没有标签的情况下徘徊，我认为这是非法的。

所以...如果你的 php 产生了这个：

```
 {"event_id":"4","message":"test"},"people": ["person1","person2"]} 
```

你的java是这样的：

```
JSONObject j = new JSONObject(result);

String [] people = j.getJSONArray("people"); 
```

我相信你会得到你所追求的。

# jquery - 颜色更改脚本会中断 slideToggle 下拉菜单

> ID：10988609
> 
> 赞同：0
> 
> 时间：2012-06-11T23:02:50.440
> 
> 标签：jquery, drop-down-menu, menu, slidetoggle

我有一个下拉菜单，您可以[在 jsfiddle 上看到](http://jsfiddle.net/nickharambee/dFKKh/)。在我包含颜色更改脚本之前它工作正常，该脚本设置和更改导航链接中文本的字母颜色。

正如您可能会在 jsfiddle 上看到的那样，当用户将鼠标悬停在菜单上（或者只是进入自动 slideToggle 狂热！）时，slideToggle 会不断被触发，而它应该只在进入和离开 div 时触发。

有人可以帮助完成这项工作吗？

谢谢，

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:11:40.060

将最高位更改为：

```
 $('.dropdown').hover(function () {
        // When the event is triggered, grab the current element 'this' and
        // find it's children '.sub_navigation' and display/hide them
        $(this).find('.sub_navigation').slideDown();
    }, function () {
        $(this).find('.sub_navigation').slideUp();

    }); 
```

# python - 什么是 URL 参数？（urlparse 结果中位置 #3 的元素）

> ID：10988614
> 
> 赞同：47
> 
> 时间：2012-06-11T23:02:59.527
> 
> 标签：python, url, url-parameters, urlparse

我查看了`urlparse.urlparse`方法文档，我对这部分是什么有点困惑`parameters`（不要与更熟悉的`query`部分混淆，即问号之后和片段部分之前的部分）。

关于 URL 结构的 Wikipedia 条目没有说明任何内容，所以请任何人对此进行详细说明并可能给出一些示例？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-11T23:31:24.677

哇...我没有意识到这一点，请参见示例：

```
>>> urlparse.urlparse("http://some.page.pl/nothing.py;someparam=some;otherparam=other?query1=val1&query2=val2#frag")
ParseResult(scheme='http', netloc='some.page.pl', path='/nothing.py', params='someparam=some;otherparam=other', query='query1=val1&query2=val2', fragment='frag') 
```

和帮助（urlparse.urlparse）：

```
Help on function urlparse in module urlparse:

urlparse(url, scheme='', allow_fragments=True)
    Parse a URL into 6 components:
    <scheme>://<netloc>/<path>;<params>?<query>#<fragment>
    Return a 6-tuple: (scheme, netloc, path, params, query, fragment).
    Note that we don't break the components up in smaller bits
    (e.g. netloc is a single string) and we don't expand % escapes. 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-06-11T23:30:50.517

令人着迷，这是我第一次遇到它们，找到了这个
[http://doriantaylor.com/policy/http-url-path-parameter-syntax](http://doriantaylor.com/policy/http-url-path-parameter-syntax)我也找到了这个 [https://www.rfc-editor.org/ rfc/rfc3986#section-3.3](https://www.rfc-editor.org/rfc/rfc3986#section-3.3)（查询前的最后一段）和这个 [http://www.jtmelton.com/2011/02/02/beware-the-http-path-parameter/](http://www.jtmelton.com/2011/02/02/beware-the-http-path-parameter/)

他们很少使用，我认为他们的意思是将某些属性附加到路径..甚至可以控制您要使用的段版本，但这只是一种预感......无论哪种方式，谢谢你提出来。

# c#-4.0 - 空，整数？和带有 EF 4.1 的 lambda 表达式

> ID：10988616
> 
> 赞同：0
> 
> 时间：2012-06-11T23:03:05.577
> 
> 标签：c#-4.0, entity-framework-4, lambda

我正在使用一个int？lambda 表达式中的变量，但当变量为空时，生成的 SQL 确实包含“IS NULL”。

我在使用 EntityFramework 4.1 的 MVC 项目中有这个方法：

```
public Member GetByEmailAndOrganisationId(string email, int? organisationId)
{
    var member = memberRepository.GetSingleOrDefault(m => m.Email == email && m.OrganisationId == organisationId);

    return member;
} 
```

但是，当我使用 SQL-Profiler 时，我可以看到生成的 WHERE 子句如下：

```
WHERE ([Extent1].[Email] = @p__linq__0) AND ([Extent1].[OrganisationId] = @p__linq__1),
@p__linq__0 nvarchar(4000), @p__linq__1 int, 
@p__linq__0=N'jf@beauchamp.me', @p__linq__1=NULL 
```

因此，在上述代码中，成员始终为空，因为 WHERE 子句包含 OrganisationId = NULL 而不是 OrganisationId IS NULL。

我以为我已经通过使用 Equals() 解决了这个问题，如下所示：

var member = memberRepository.GetSingleOrDefault(m => m.Email == email && m.OrganisationId.Equals(organisationId));

但是当 organizationId 不为空时，我得到另一个错误：

> 此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。

解决这个问题的最优雅的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:58:02.657

我认为这可以解决问题：

```
if(organisationId.HasValue)
    return memberRepository.GetSingleOrDefault(m => m.Email == email && m.OrganisationId == organisationId);
else
    return memberRepository.GetSingleOrDefault(m => m.Email == email && m.OrganisationId == null); 
```

它似乎在 EF 4.5 中得到修复：http: [//data.uservoice.com/forums/72025-ado-net-entity-framework-ef-feature-suggestions/suggestions/1015361-incorrect-handling-of-null-variables -in-where-cl?ref=title#suggestion-1015361](http://data.uservoice.com/forums/72025-ado-net-entity-framework-ef-feature-suggestions/suggestions/1015361-incorrect-handling-of-null-variables-in-where-cl?ref=title#suggestion-1015361)

# dotcloud - Dotcloud 伪终端将不会被分配，因为 stdin 不是终端 - 拉面

> ID：10988619
> 
> 赞同：0
> 
> 时间：2012-06-11T23:03:37.210
> 
> 标签：dotcloud

我最近尝试在 dotcloud 上推送其中一个 php 示例，但出现以下错误。我不知道如何让它分配伪终端......

```
dotcloud push ramen ramen-on-dotcloud   
# upload ramen-on-dotcloud ssh://dotcloud@uploader.dotcloud.com:443/ramen   
# rsync  
Pseudo-terminal will not be allocated because stdin is not a terminal.  
building file list ... done  

sent 141 bytes  received 20 bytes  35.78 bytes/sec  
total size is 55  speedup is 0.34  
22:34:16 ---> Deploy of "ramen" scheduled for revision rsync-1339454056336 at 2012-06-11  
              22:34:16  
22:34:17 ---> Building the application...  
22:34:17 [www] Build started for revision rsync-1339454056336 (clean build)  
22:34:18 [www] I am snapshotsworker_00/bob-2, and I will be your builder today.  
22:34:21 [www] Build completed successfully. Compiled image size is 427KB  
22:34:21 ---> Application build is done  
22:34:21 ---> Initializing new services... (This may take a few minutes)  
22:34:21 ---> Using default scaling for service www (1 instance(s)).  
22:34:21 ---> No new services found  
22:34:21 ---> All services have been initialized. Deploying code...  
22:34:21 [www.0] Deploying build revision rsync-1339454056336...  
22:34:25 [www.0] Running postinstall script...  
22:34:27 [www.0] Launching...  
22:34:28 [www.0] Waiting for the instance to become responsive...  
22:34:28 [www.0] Re-routing traffic to the new build...
22:34:29 [www.0] Successfully deployed build revision rsync-1339454056336  
22:34:29 ---> Deploy finished  
22:34:29 ---> Application fully deployed  

Deployment finished. Your application is available at the following URLs
www: http://ramen-l.dotcloud.com/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:57:38.153

The pseudo-terminal message is informative. It does not indicate an error in this case. Note that at the bottim it indicates

> 22:34:29 ---> Deploy finished
> 22:34:29 ---> Application fully deployed Deployment finished. Your application is available at the following URLs www: [http://ramen-l.dotcloud.com/](http://ramen-l.dotcloud.com/)

so everything went fine.

/A

# php - 通过 Kohana 的 Request Factory 发布文件

> ID：10988622
> 
> 赞同：1
> 
> 时间：2012-06-11T23:03:48.550
> 
> 标签：php, kohana, kohana-3.2

是否可以在 Kohana 3.2 中模拟文件上传请求？我正在尝试以下但没有太多运气：

```
$file = file_get_contents('../../testimage.jpg');

$request = new Request('files');
$request->method(HTTP_Request::POST);
$request->post('myfile', $file);
//$request->body($file);
$request->headers(array(
            'content-type' => 'multipart/mixed;',
            'content-length' => strlen($file)
        ));
$request->execute(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T01:29:25.030

[这个 Kohana 论坛帖子](http://forum.kohanaframework.org/discussion/8905/upload-a-file-using-requestfactory/p1)表明它应该是可能的。鉴于与您的代码相似，我猜您已经发现了。由于这对您不起作用，您可以尝试 cURL：

```
$postData = array('myfile' => '@../../testimage.jpg');
$uri = 'files';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $uri);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postData); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_POST, true);

$response = curl_exec($ch); 
```

如果您想使用 Kohana 请求，您可以尝试使用此代码构建自己的多部分主体（我现在没有正确的设置来测试它，但它应该接近您的需要）：

```
$boundary = '---------------------' . substr(md5(rand(0,32000)), 0, 10);
$contentType = 'multipart/form-data; boundary=' . $boundary;
$eol = "\r\n";
$contents = file_get_contents('../../testimage.jpg');

$bodyData = '--' . $boundary . $eol;
$bodyData .= 'Content-Type: image/jpeg' . $eol;
$bodyData .= 'Content-Disposition: form-data; name="myfile"; filename="testimage.jpg"' . $eol;
$bodyData .= 'Content-Transfer-Encoding: binary' . $eol;
$bodyData .= $contents . $eol;
$bodyData .= '--' . $boundary . '--' . $eol . $eol;

$request = new Request('files');
$request->method(HTTP_Request::POST);
$request->headers(array('Content-Type' => $contentType));
$request->body($data);
$request->execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T18:30:05.177

从 GitHub 上找到一个讨论该问题[的拉取请求。](https://github.com/kohana/core/pull/192)我最终向我的控制器添加了一些测试代码来解决这个问题：

```
if ($this->request->query('unittest'))
    {
        // For testing, don't know how to create internal requests with files attached.
        // @link http://stackoverflow.com/questions/10988622/post-a-file-via-request-factory-in-kohana
        $raw_file = file_get_contents(APPPATH.'tests/test_data/sample.txt');
    } 
```

一个`Request::files()`方法会很好。

# php - 如何在 PHP 中获取当前日期/时间作为日期对象

> ID：10988625
> 
> 赞同：25
> 
> 时间：2012-06-11T23:04:17.490
> 
> 标签：php, date, datediff

你如何得到今天的日期，作为一个日期对象？

我正在尝试计算某个开始日期与今天之间的差异。以下将不起作用，因为`getdate()`返回一个数组而不是日期对象：

```
$today = getdate();           
$start = date_create('06/20/2012');
$diff = date_diff($start, $today);

echo($today . '<br/>' . $start . '<br/>' . $diff); 
```

输出：

> 数组 ( [秒] => 8 [分钟] => 1 [小时] => 16 [mday] => 11 [wday] => 1 [mon] => 6 [year] => 2012 [yday] => 162 [工作日] => 星期一 [月] => 六月 [0] => 1339455668 )
> 
> DateTime 对象（[date] => 2012-06-20 00:00:00 [timezone_type] => 3 [timezone] => America/Los_Angeles）

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-11T23:06:31.460

```
new DateTime('now'); 
```

[http://www.php.net/manual/en/datetime.construct.php](http://www.php.net/manual/en/datetime.construct.php)

比较很容易：

```
$today = new DateTime('now');
$newYear = new DateTime('2012-01-01');

if ($today > $newYear) {

} 
```

**操作的编辑** 我只需要调用*date_default_timezone_set*，然后这段代码对我有用。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-03-26T15:39:32.997

要获得天数的差异，请使用以下命令：

```
$today = new DateTime('today'); 
```

此对象中的时间将是 00:00:00

如果您想要小时分钟和秒的差异，请使用：

```
$now = new DateTime('now'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T00:34:01.923

我最终使用*date_create*构造函数（无参数）来获取当前日期。

```
$diff = date_diff(date_create('06/20/2012'), date_create());
print_r($diff); 
```

**输出：**

> DateInterval 对象 ( [y] => 0 [m] => 0 [d] => 8 [h] => 6 [i] => 30 [s] => 40 [invert] => 1 [days] => 8)

我不知道为什么，但 Mike B 的回答（以及我为*DateTime*尝试的任何构造函数）在 PHP5 / IIS 中为我​​抛出了一个错误。

# iphone - IOs 如何在文本字段下方添加表格视图

> ID：10988627
> 
> 赞同：-1
> 
> 时间：2012-06-11T23:04:50.703
> 
> 标签：iphone, ios5

我正在尝试创建一个列表，我希望用户在上面提供的文本视图中输入数据，并在他们单击添加按钮时，它会填充在下面的表格视图中。!这是我要创建的示例类型。 [示例图像](http://i.stack.imgur.com/lntkU.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:20:39.873

很简单，添加按钮的 IBAction 应该只是将输入到文本字段中的文本添加到为 UITableView 供电的数组中。将其添加到数组后，调用`reloadData`UITableView，UITableView 将读取新数据以及 NSArray 中的其他数据并将数据提供给列表。

# java - Java 全局 isEmpty() 方法

> ID：10988634
> 
> 赞同：1
> 
> 时间：2012-06-11T23:06:12.177
> 
> 标签：java, data-structures, collections, is-empty

我有一个应用程序，它使用生成各种类型的对象和数据结构的代码，将它们作为 Object 实例返回，并且想要一种通用的方法来确定这些对象中的任何一个是否为“空”（或 null）。

（这不是设计问题，也不是是否应该使用这种方法的问题，而是针对现有需求优化解决方案的问题。）

所以，这是一个简单的开始：

```
public static boolean isEmpty(Object content)
{
    if (content == null)
    {
        return true;
    }
    else if (content instanceof CharSequence)
    {
        return (((CharSequence)content).length() == 0);
    }
    else if (content instanceof Collection<?>)
    {
        return ((Collection<?>)content).isEmpty();
    }
    else if (content instanceof Object[])
    {
        return (((Object[])content).length == 0);
    }
    else  // Use reflection (an exaggeration, for demo purposes)
    {
        try
        {
            Method isEmpty = content.getClass().
                             getDeclaredMethod("isEmpty", (Class<?>[])null);
            if (isEmpty != null)
            {
                Object result = isEmpty.invoke(content, (Object[])null);

                if (result instanceof Boolean)
                {
                    return (Boolean)result;
                }
            }
        }
        catch (Exception e)
        {
        }
    }

    return false;
} 
```

在性能或覆盖范围方面有任何潜在改进的想法吗？

比如反射也可以用来判断对象是否有length()或者size()方法，调用它看结果是不是0。（其实反射可能太多了，但是我这里包括了为了完整性。）

是否有一个非常常用的顶级类，它具有 length() 或 size() 方法，而不是 isEmpty() 方法，以包含在上述情况中，类似于具有 isEmpty() 的 Collection？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T23:47:32.203

Instead of the ugly instanceofs, split up the method into several methods with the same name but different args. e.g.

```
static boolean isEmpty(Object[] array)
static boolean isEmpty(Collection collection)
static boolean isEmpty(CharSequence cs) 
```

Instead of reflection, if you really want your own interface for special objects, declare that interface, and then, for consistency with the above, offer the static utility

```
static boolean isEmpty(IMayBeEmpty imbe); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T04:32:07.333

这种方法至少可以解决您的通用 isEmpty(Object) 问题。但是，您不会因此获得编译时安全性，并且在没有为所请求的确切类型存在的方法的情况下调用它会产生运行时错误。注意“MethodUtils”类来自 apache commons-beanutils，虽然你可以很容易地直接使用反射，但为了简单起见，我在这里使用 beanutils。

“invokeExactcMethod”方法在给定类中查找具有给定名称的静态方法，该方法具有传递的对象数组的兼容参数。因此，如果对象的运行时类型是 ArrayList，它将查找 isEmpty(ArrayList) 然后 isEmpty(AbstractList) 然后 isEmpty(List)。然后，如果它可以找到该方法，则调用该方法，否则将引发 NoSuchMethodException。

```
public class MyUtility {
  static boolean isEmpty(Object object) {
    if (object == null) {
      return true;
    }
    else {
      try {
        return MethodUtils.invokeStaticMethod(
                  MyUtility.class, "isEmpty", new Object[]{object});
      }
      catch (NoSuchMethodException e) {
        throw new IllegalArgumentException(e);
      }
      catch (IllegalAccessException e) {
        throw new IllegalArgumentException(e);
      }
      catch (NoSuchMethodException e) {
        throw new RuntimeException(e);
      }
    }
  }
} 
```

“invokeExactStaticMethod”更具确定性，不使用分配兼容性，而是使用精确的签名匹配。这意味着 isEmpty(List) 永远不会匹配任何内容，因为您无法构造该类型的任何内容。

# java - 如何将 .jar 文件添加到 .java 文件的编译中

> ID：10988635
> 
> 赞同：3
> 
> 时间：2012-06-11T23:06:15.423
> 
> 标签：java, jar, compilation, makefile

我的makefile在下面

另外，如果您告诉我如何将我的 .class 文件移动到 ../bin/，我将不胜感激

```
JFLAGS = -cp
JAR = "RSBot*.jar"
JC = javac
.SUFFIXES: .java .class
.java.class:
                $(JC) $(JFLAGS) $(JAR) $*.java

CLASSES = \
                src/Banker.java \
                src/Eater.java \
                src/Fighter.java \
                src/grotgui.java \
                src/InventTab.java \
                src/Looter.java \
                src/Potter.java \
                src/W8babyGrotworm.java \
                src/Walker.java

default: classes

classes: $(CLASSES:.java=.class)

clean:
                $(RM) *.class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:34:52.317

正如您在此处看到的，[编译时如何通配符包含 JAR 文件？](https://stackoverflow.com/questions/1064481/newbie-question-how-to-include-jar-files-when-compiling)，除非您使用 java 1.6 或更高版本，否则您不能在类路径中使用通配符 '*' 来获取多个 jar 文件。否则，您应该编写所需的每个具体罐子。

要将 .class 文件放在 bin 目录中，可以使用`-d <directory>`javac 选项指定放置生成的类文件的位置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-12T04:37:34.880

只是出于好奇，为什么要制作？为什么不使用更现代的工具，如 maven、ant 或 gradle？

它们专为此类事情而设计，通常可以为您提供开箱即用的东西。

但要回答你的问题：

javac -d 输出目录

# android - Android - 如何制作结合位图的背景图案？

> ID：10988639
> 
> 赞同：4
> 
> 时间：2012-06-11T23:06:41.213
> 
> 标签：android, background, drawable

我知道如何制作重复位图的背景图案。我还看到了一种使用 Canvas 组合两个位图的方法。但我想制作一个重复的位图，并结合渐变可绘制来制作背景。我有一个 .png 文件，它是部分透明的，我想与渐变可绘制（普通渐变 XML）一起重复它。

这是 PNG：[http ://subtlepatterns.com/?p=1203](http://subtlepatterns.com/?p=1203)

有没有办法做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T23:12:52.477

您可以使用 XML 位图创建平铺图案：

```
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/my_png"
    android:tileMode="repeat" /> 
```

然后，您应该能够将其用作[LayerList](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)可绘制对象的一部分，该可绘制对象还包括您的渐变。然后使用图层列表作为背景可绘制对象。

# javascript - ExtJS 事件委托不起作用

> ID：10988641
> 
> 赞同：0
> 
> 时间：2012-06-11T23:07:00.230
> 
> 标签：javascript, extjs, extjs4

我有以下功能，我正在尝试使用默认值执行。

```
init: function(userConfig) {
    var config = {};
    Ext.apply(config, userConfig, {
         delegate: 'div.thumbnailNameProfileListingItem span'
    });

    Ext.getBody().on({
        scope: this,
        click: function(a, b, c, d, e) {
           console.log(a);
        },
        delegate: config.delegate
    });
}
init(); 
```

当我单击由“delegate”属性的默认值表示的 DOM 元素时，提供给“click”的函数不会被调用。此时元素在 DOM 中尚不存在，它们稍后由另一个用户触发的事件添加。

但是，当我将“委托”属性的值从

```
delegate: 'div.thumbnailNameProfileListingItem span' 
```

到

```
delegate: 'span' 
```

该函数会为现有的和后来添加的 DOM 元素调用。在 ExtJS 中使用委托是否有限制，因为它不允许选择器跨越父元素和子元素，或者我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:20:12.057

我无法解决问题，所以我决定将“delegate”属性中的选择器减少为：

```
delegate: 'span.profileItemClick' 
```

它完成了这项工作。

# ruby - 使用 Ruby 通过标题拆分文本块

> ID：10988652
> 
> 赞同：0
> 
> 时间：2012-06-11T23:11:07.387
> 
> 标签：ruby, arrays, text

使用 Ruby，我正在尝试解析一些文档，在这些文档中我需要拆分文本块，每个文本块都有一个标题，后跟一个未知长度的文本，并将它们推送到一个数组；

```
SECTION 1\. A HEADING

Some undetermined length of text,
which can be multiple lines and paragraphs.

SECTION 2\. ANOTHER HEADING

Another big block of text. 
```

应该成为

```
["SECTION 1\. A HEADING

Some undetermined length of text,
which can be multiple lines and paragraphs.",
"SECTION 2\. ANOTHER HEADING

Another big block of text."] 
```

我可以只使用`string.split(/\n\n\n/)`，但我想要更具体的东西，因为我不能保证每个部分后面都有两个空行。更多的实验使我想到了这一点；

```
string.split(/(?:^|\n)(SECTION.+\n)/).each do |s|
  sections << s
end 
```

但我必须再次处理输出以获得我需要的东西。

有没有什么方法可以在不需要多次通过的情况下完成这项工作？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T00:18:54.637

您可以将[String#scan](http://ruby-doc.org/core-1.9.3/String.html#method-i-scan)与多行模式正则表达式和正预测一起使用：

```
text = <<ENDTEXT
SECTION 1\. A HEADING

Some undetermined length of text,
which can be multiple lines and paragraphs.

SECTION 2\. ANOTHER HEADING

Another big block of text.
ENDTEXT

header = /^SECTION\s+\d+\./
sections = text.scan(/(?m)#{header}.*?(?=#{header}|\Z)/)

puts sections.join("\n---\n")

# =>
SECTION 1\. A HEADING

Some undetermined length of text,
which can be multiple lines and paragraphs.

---
SECTION 2\. ANOTHER HEADING

Another big block of text. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T00:17:12.603

String#scan 将为您提供所需的数组：

```
string.scan /^SECTION(?:(?!SECTION).)*/m 
```

# ruby-on-rails - Rails 3.2.5 样式表未应用 - 新手

> ID：10988657
> 
> 赞同：1
> 
> 时间：2012-06-11T23:12:45.900
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在从“使用 Rails 进行敏捷 Web 开发”（第 4 版，Rails 3）学习 Rails，但在获取要应用的样式表时遇到了麻烦。为了快速带您了解我到目前为止所做的事情，我首先生成了一个脚手架：

```
 rails generate scaffold Product title:string description:text image_url:string price:decimal 
```

然后当然是：

```
 rake db:migrate 
```

然后我使用 db/seeds.rb 文件将一些数据加载到 products 表中。当我加载 localhost:3000/products 时，一切正常。现在，我将本书提供的样式表代码复制到脚手架生成的 products.css.scss 文件中：

```
.products {
  table {
    border-collapse: collapse;
  }
  table tr td {
    padding: 5px;
    vertical-align: top;
  }
 .list_image {
    width:  60px;
    height: 70px;
  }
  .list_description {
    width: 60%;

    dl {
      margin: 0;
    }
    dt {
      color:        #244;
      font-weight:  bold;
      font-size:    larger;
    }
    dd {
      margin: 0;
    }
  }
  .list_actions {
     font-size:    x-small;
     text-align:   right;
     padding-left: 1em;
  }
  .list_line_even {
    background:   #e0f8f8;
  }
  .list_line_odd {
    background:   #f8b0f8;
  }
} 
```

现在，当我加载 localhost:3000/products 时，没有应用样式表。我可以在检查元素中看到样式表，但它没有应用。我已经尝试了所有可以想象的东西。首先，我确保这行代码在我的 application.html.erb 中：

```
 <%= stylesheet_link_tag "application", :media => "all" %> 
```

鉴于我的新样式表（products.css.scss）在 assets/stylesheets/ 目录中，它应该被加载。当我检查 localhost:3000/products 上的元素时，我实际上在那里看到了样式表，但它没有被应用。我尝试的下一件事是运行：

```
rake assets:precompile 
```

没有成功。删除 public/assets 目录后，我确保这行代码在我的 config/application.rb 文件中：

```
 config.assets.enabled = true 
```

它是。接下来，我转到我的 assets/stylesheet/application.css 文件并尝试添加这行代码：

```
*= require products 
```

再一次，没有成功。最后，我尝试重新启动服务器以查看是否有效果。又失败了。我在这里处于死胡同。拜托，我将不胜感激有关此事的任何和所有意见，因为我对此事感到筋疲力尽和沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T16:39:30.190

不确定这是否可行，但值得一试，尝试删除 .css，只保留 products.scss。也得到一个非常简单的风格，看看它是否有效。或者甚至内联它来查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:46:31.257

我只花了一个小时找出答案，因为我自己也遇到了完全相同的问题。去你的 application.css.sass 并确保它有

```
/* ...
*= require_self
*= require_tree .
*/ 
```

在里面。此自动加载应用程序/资产/样式表中的所有其他 .css.sass，然后将它们预编译到 public/assets/stylesheets 为 1 个 statis css 文件，并将其提供给您的浏览器。

# java - 未指定 maxSize 时，Google Guava Cache 逐出 SIZE 条目

> ID：10988661
> 
> 赞同：4
> 
> 时间：2012-06-11T23:13:21.750
> 
> 标签：java, guava

我正在使用 Google Guava`CacheBuilder`创建一个`Cache`实例。我的代码如下所示：

```
return CacheBuilder.newBuilder()
            .initialCapacity(initialCapacity)
            .expireAfterAccess(expirationInterval, TimeUnit.SECONDS)
            .removalListener(LOGGING_AUTOEVICTION_ONLY_REMOVAL_LISTENER)
            .build(); 
```

顾名思义，我的移除监听器是：

```
private static final RemovalListener<MyKey, MyRecord>  LOGGING_AUTOEVICTION_ONLY_REMOVAL_LISTENER
        = new RemovalListener<MyKey, MyRecord>() {
            @Override
            public void onRemoval(RemovalNotification<MyKey, MyRecord objectObjectRemovalNotification) {
                if (objectObjectRemovalNotification.wasEvicted()) {
                    log.debug("Entry evicted from cache: {} - Reason: {}", objectObjectRemovalNotification, objectObjectRemovalNotification.getCause());
                }
            }
        }; 
```

最后，我只`get`使用我的缓存条目`get(K key, Callable<? extends V> valueLoader)`

这是问题所在：使用上面的代码，我看到以下日志输出：

`19:08:03.287 DEBUG [MyCache] - Entry evicted from cache: MyKey[123]=MyRecord@43ee148b - Reason: SIZE`

当我没有`maximumSize()`在 CacheBuilder 调用中使用时，为什么记录会从我的缓存中被逐出？我怀疑这与“体重”有关。如果是这样，我需要知道什么`maxWeight()`才能在到期时间之前不驱逐缓存条目？

**注意**我知道Google Guava 网站上的[Caches Explained 。](http://code.google.com/p/guava-libraries/wiki/CachesExplained "缓存解释")

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T00:59:16.450

是否有可能您`expirationInterval`的意外等于零？作为`expireAfterAccess`文档，“当`duration`为零时，此方法移交给`maximumSize(0)`.”

# c# - RegisterPowerSettingsNotification C# pinvoke

> ID：10988662
> 
> 赞同：2
> 
> 时间：2012-06-11T23:13:30.593
> 
> 标签：c#, windows, winapi, pinvoke

我正在尝试检测笔记本电脑盖何时打开和关闭，应该非常简单。我似乎可以正确注册该事件，但是当我关闭笔记本电脑窗口时我没有收到通知。

这是DLL导入

（DLL 代码：[http](http://www.pinvoke.net/default.aspx/user32/registerpowersettingnotification.html) ://www.pinvoke.net/default.aspx/user32/registerpowersettingnotification.html）（GUID_LIDCLOSE_ACTION：[http ://social.msdn.microsoft.com/Forums/en-US/tabletandtouch/thread/0bbf90be -9322-47fb-bfa4-016b57211b3a](http://social.msdn.microsoft.com/Forums/en-US/tabletandtouch/thread/0bbf90be-9322-47fb-bfa4-016b57211b3a) )

```
[DllImport(@"User32", SetLastError = true, 
  EntryPoint = "RegisterPowerSettingNotification",
  CallingConvention = CallingConvention.StdCall)]

private static extern IntPtr RegisterPowerSettingNotification(
    IntPtr hRecipient,
    ref Guid PowerSettingGuid,
    Int32 Flags);

static Guid GUID_LIDCLOSE_ACTION =
    new Guid(0xBA3E0F4D, 0xB817, 0x4094, 0xA2, 0xD1, 
             0xD5, 0x63, 0x79, 0xE6, 0xA0, 0xF3);

private const int WM_POWERBROADCAST = 0x0218;
private const int DEVICE_NOTIFY_WINDOW_HANDLE = 0x00000000;
const int PBT_POWERSETTINGCHANGE = 0x8013; // DPPE

[StructLayout(LayoutKind.Sequential, Pack = 4)]
internal struct POWERBROADCAST_SETTING
{
    public Guid PowerSetting;
    public uint DataLength;
    public byte Data;
} 
```

然后这是我注册 GUID_LIDCLOSE_ACTION 事件的方式：

```
private void registerLidClosedNotification()
{
    IntPtr hWnd = this.Handle;
    IntPtr ret = RegisterPowerSettingNotification(hWnd, 
                           ref GUID_LIDCLOSE_ACTION,
                           DEVICE_NOTIFY_WINDOW_HANDLE);

    Debug.WriteLine("Registered: " + ret.ToString());
    Debug.WriteLIne("LastError:" + Marshal.GetLastWin32Error().ToString());
} 
```

这是它的输出：

> 注册号：6867560
> 
> 上次错误：0

对我来说看上去很好。

然后我应该在哪里收到消息：

```
private static IntPtr WndProc(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled)
        {

            Debug.WriteLine("Entered: WndProc");  // we never make it even this far! 
```

那么，如果它已注册，为什么不进入 WndProc 函数：[

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:36:32.637

我认为您对 RegisterPowerSettingNotification 所做的事情是使 Windows 将 WM_POWERBROADCAST 的消息包含到您的 WndProc 中，但您仍然需要实际挂钩 WndProc。

看起来您正在使用 WinForms（因为您的示例具有“this.Handle”），在这种情况下，您只需覆盖 Form 上受保护的 WndProc 方法。

如果您使用的是 WPF，那么您可以通过获取根窗口的 HwndSource 然后调用 AddHook 来执行此操作。

您需要阅读有关 WinForms 中 WndProc 的文档 (http://msdn.microsoft.com/en-us/library/system.windows.forms.form.wndproc.aspx)。它会被调用*很多*次，所以你只想在你关心的消息时运行你的代码，并且无条件地调用 base.WndProc。

# android - View.setVisibility 中的 java.util.ConcurrentModificationException

> ID：10988671
> 
> 赞同：23
> 
> 时间：2012-06-11T23:16:10.393
> 
> 标签：android, view, drag-and-drop

我正在为视图实施拖放操作。开始拖动时，我将视图的可见性设置为`INVISIBLE`，然后，如果拖动被中断 - 返回`VISIBLE`：

```
public boolean onTouch(View v, MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        // Skipped some code
        boolean dragStarted = v.startDrag(data, shadowBuilder, v, 0);

        if (dragStarted) {
            v.setVisibility(View.INVISIBLE)
        }
    }
} 
```

和：

```
if (event.getAction() == DragEvent.ACTION_DRAG_ENDED) {
    View droppedView = (View) event.getLocalState();
    droppedView.setVisibility(View.VISIBLE);
} 
```

当调用“拖动结束”事件时，我遇到了异常：

```
E/AndroidRuntime(7118): FATAL EXCEPTION: main 
E/AndroidRuntime(7118): java.util.ConcurrentModificationException 
E/AndroidRuntime(7118):     at java.util.HashMap$HashIterator.nextEntry(HashMap.java:792)
E/AndroidRuntime(7118):     at java.util.HashMap$KeyIterator.next(HashMap.java:819) 
E/AndroidRuntime(7118):     at android.view.ViewGroup.dispatchDragEvent(ViewGroup.java:1046)
E/AndroidRuntime(7118):     at android.view.ViewGroup.dispatchDragEvent(ViewGroup.java:1048)
E/AndroidRuntime(7118):     at android.view.ViewGroup.dispatchDragEvent(ViewGroup.java:1048)
E/AndroidRuntime(7118):     at android.view.ViewGroup.dispatchDragEvent(ViewGroup.java:1048)
E/AndroidRuntime(7118):     at android.view.ViewRootImpl.handleDragEvent(ViewRootImpl.java:3471)
E/AndroidRuntime(7118):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2620)
E/AndroidRuntime(7118):     at android.os.Handler.dispatchMessage(Handler.java:99) 
E/AndroidRuntime(7118):     at android.os.Looper.loop(Looper.java:137) 
E/AndroidRuntime(7118):     at android.app.ActivityThread.main(ActivityThread.java:4575)
E/AndroidRuntime(7118):     at java.lang.reflect.Method.invokeNative(Native Method) 
E/AndroidRuntime(7118):     at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(7118):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
E/AndroidRuntime(7118):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
E/AndroidRuntime(7118):     at dalvik.system.NativeStart.main(NativeMethod) 
```

为什么以及如何解决它？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-19T17:40:06.067

你可以试试这个

```
if (event.getAction() == DragEvent.ACTION_DRAG_ENDED) {
    final View droppedView = (View) event.getLocalState();
    droppedView.post(new Runnable(){
        @Override
        public void run() {
            droppedView.setVisibility(View.VISIBLE);
        }
    });
} 
```

看起来 Android 本身试图在您结束拖动的同时访问 View 状态。

**编辑**

更准确的解释。通过设置`setVisibility()`，您可以`View`在 Android 内部视图集合中包含或排除这些视图，这些视图应该响应拖动事件。此集合在拖动事件的调度期间使用，因此通过尝试`setVisibility`（换句话说，尝试修改拖动事件的侦听器）您正在导致`ConcurrentModificationException`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-15T10:46:12.273

最好的方法是：

```
 view.post(new Runnable() {
  public void run() {
    view.setVisibility(View.VISIBLE);
  }
}); 
```

如果我们使用：

```
 if (event.getAction() == DragEvent.ACTION_DRAG_ENDED) {
    final View droppedView = (View) event.getLocalState();
    droppedView.post(new Runnable(){
        @Override
        public void run() {
            droppedView.setVisibility(View.VISIBLE);
        }
    });
} 
```

你仍然会强制关闭 Null.pointer。...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-15T14:15:49.367

也许[这](https://stackoverflow.com/questions/9899382/android-setvisibility-results-in-java-util-concurrentmodificationexception)会有所帮助。在给定的链接中说：而不是`DragEvent.ACTION_DRAG_ENDED`使用`DragEvent.ACTION_DROP`.

# objective-c - 如何将新的类文件关联为特定场景的视图控制器？

> ID：10988672
> 
> 赞同：2
> 
> 时间：2012-06-11T23:16:18.393
> 
> 标签：objective-c, ios, storyboard

好吧，我会尽量让这个简短而甜蜜。我最近创建了我的第一个 iOS 应用程序，在我的应用程序中，我决定通过在创建项目时选中复选框来走故事板路线。附带说明一下，我最近刚开始在 Xcode 中进行开发，请记住这一点。所以我从设计我的应用程序的 GUI 元素开始，在不知不觉中，我的故事板文件中有 8 个场景和一个视图控制器。不用说视图控制器已经填充了来自不同场景的代码，因此很难理解视图控制器中的内容。本着 OO 设计原则，我认为为每个场景创建一个单独的视图控制器是个好主意。所以我为项目创建了一些类文件。当我尝试将新创建的类文件与场景相关联时，我的计算机只会发出哔哔声/咚咚声。我试图通过在情节提要/界面生成器视图中选择场景来将新创建的类文件关联到场景，然后显示*右侧的*实用程序窗格，然后选择**实用程序*窗格顶部的*身份检查器*，然后将自定义类设置为我新创建的类文件，但是当我键入类的名称并按回车时，我只听到哔声。*

 **如果有人有任何见解或知道解释此过程的教程，请发布。我尝试这样做的部分原因是为了代码可读性、更好的代码管理和更好的应用程序代码结构。我遇到了这个[堆栈线程](https://stackoverflow.com/questions/9969730/ios-5-storyboards-classes-for-each-scene?rq=1)，解释了我在说的一些内容。

如果这有助于阐明任何问题，这里还有一张我的项目的图片。 ![在此处输入图像描述](../Images/f533163820c3371f249ceebfbc30c2ad.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T02:40:57.363

您需要考虑控制器的父类，例如 UIViewController。为此，您必须检查 .h 文件和您的 xib/nib 文件。

I. 在您的 .h 文件中，您将看到：

```
@interface ViewControllerWelcome : NSObject 
```

**将“ NSObject** ”更改为“ **UIViewController** ”——这意味着**ViewControllerWelcome**有一个父类**UIViewController**。

二、在您的 nib/xib 文件中：

```
1\. Click on the controller that you are going to set from the storyboard.
2\. Go to interface builder and click the "Identity Inspector" (third item from the left) from the Utilities panel. 
3\. You need to specifically set each controller's name (eg. ViewControllerWelcome) 
```

对情节提要中的所有控制器执行这些操作。

这是您可以阅读的有关[ViewControllers 和 Storyboards](http://kurrytran.blogspot.com/2011/07/simple-ios-5-tutorial-using-storyboard.html)的内容。**

# tomcat - Liferay 发布结构 id 已经存在

> ID：10988673
> 
> 赞同：0
> 
> 时间：2012-06-11T23:16:38.313
> 
> 标签：tomcat, liferay

当我尝试将页面从暂存环境发布到实时环境时，我收到此错误：“无法检索内容”，在 catalina.out 中我发现“结构 ID 已存在”。我正在使用启用了分段的 liferay 6.1。

任何人都知道我可以如何强制更改结构 ID？

Tnx萨布丽娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:55:16.357

我认为这是 Liferay 的一个开放错误，请参阅[http://issues.liferay.com/browse/LPS-25734](http://issues.liferay.com/browse/LPS-25734)

您可以尝试调试 Liferay 并自行修复错误。祝你好运！

# wpf - 向下移动画布

> ID：10988674
> 
> 赞同：2
> 
> 时间：2012-06-11T23:16:47.783
> 
> 标签：wpf

当我按下 -> 时，我想向右移动画布。我设置了事件 KeyDown，这是事件的方法

```
private void Window_KeyDown(object sender, KeyEventArgs e)
{
    if (e.Key==Key.Right)
    {

    }
} 
```

但是里面写什么`if`呢？`Canvas.setLeft`不工作

```
 <Canvas x:Name="totle" KeyDown="Window_KeyDown">
        <Ellipse  Name="yio" Canvas.Left="40" Canvas.Top="40" Height="30" Width="30" Fill="Beige"/>
        <Line X1="40" Canvas.Left="67" Canvas.Top="51" StrokeThickness="40" Stroke="Red" Height="10" Width="45" Fill="#FFD86464" OpacityMask="Red" />
        <Rectangle Canvas.Left="20" Canvas.Top="70" Width="70" Height="20" Fill="Beige"/>
    </Canvas> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T00:51:46.690

要实现这个效果，首先使用一个`RenderTransform`并将其命名为canvasTranform：

```
<Canvas x:Name="totle" KeyDown="Window_KeyDown">
    <Canvas.RenderTransform>
        <TranslateTransform x:Name="canvasTransform" />
    </Canvas.RenderTransform>
    <Ellipse  Name="yio" Canvas.Left="40" Canvas.Top="40" Height="30" Width="30" Fill="Beige"/>
    <Line X1="40" Canvas.Left="67" Canvas.Top="51" StrokeThickness="40" Stroke="Red" Height="10" Width="45" Fill="#FFD86464" OpacityMask="Red" />
    <Rectangle Canvas.Left="20" Canvas.Top="70" Width="70" Height="20" Fill="Beige"/>
</Canvas> 
```

然后，在您的事件处理程序中，`TranslateTransform`按名称引用并设置`X`属性：

```
 private void Window_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Right)
        {
            canvasTransform.X = 100;
        }
    } 
```

如果您的变换是加法的（当您按下右箭头时，画布会一直向右移动），`X`每次都添加到属性中：

```
 private void Window_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Right)
        {
            canvasTransform.X += 100;
        }
    } 
```

# c - 在 C 中删除 AVL 树中的元素

> ID：10988677
> 
> 赞同：0
> 
> 时间：2012-06-11T23:16:58.083
> 
> 标签：c, avl-tree

```
struct node *delete(struct node *root, int key)
{  

    struct node *remove_node;
    if (root == NULL){
        return root;
    }

    if ( key < root->key) {
        root->left = delete(root->left, key);

    } else if ( key > root->key) {
        root->right = delete(root->right,key);

    } else {

        if ((root->left == NULL) && (root->right != NULL)){
            remove_node = root->right;
            *root = *remove_node;
            deletetree(remove_node); // this is for free-ing the memory

        } else if ((root->right == NULL)  && (root->left != NULL)){
            remove_node = root->left;
            *root = *remove_node;
            deletetree(remove_node);

        } else if ((root->right == NULL)  && (root->left == NULL)){
            remove_node = root;
            root = NULL;

        } else {

            remove_node = successor(root);
            root->key = remove_node->key;
            root->right = delete(root->right, remove_node->key);
        }
    }

    if (root == NULL) {
        return root;

    if (balance_factor(root) == 2){
        if (balance_factor(root->left) == -1) {
            return single_right_rotation(root);

        } else if (balance_factor(root->left) == 1) {
            return double_left_rotation(root);
        }
    }

    if (balance_factor(root) == -2) {
        if (balance_factor(root->right) == -1) {
            return single_left_rotation(root);
        }
        else if (balance_factor(root->right) == 1)  { 
        return double_right_rotation(root);
            }
        }
    }

    return root;    
} 
```

这是我删除 AVL 树中元素的代码。一切似乎工作正常，它处理节点 n 没有孩子、一个孩子和两个孩子的所有情况。但是由于一些奇怪的原因，它没有平衡树，也没有到达那个代码块。

希望有人可以帮助我调试代码，因为我找不到“确切”错误的来源。

提前致谢

PS：后继函数只返回要删除的节点右树上的最小元素，而删除树处理释放内存分配的东西。此外，我 100% 认为我的旋转可以正常工作，因为它在我的插入功能中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-11T21:22:21.667

您可以使用临时根作为参考，您可以像这样进行更改：

```
struct node *localRoot = root; 
```

而你把root改成localRoot，大概问题就解决了。我希望它会有所帮助。

# jsf - JSF如何将简单数字转换为时间？

> ID：10988678
> 
> 赞同：4
> 
> 时间：2012-06-11T23:17:01.857
> 
> 标签：jsf

我想将基于 24 小时制的数字转换为 12 小时制进行显示。我只有一个简单的数字，例如 1、2 或 23，而不是日期对象。

例如：凌晨 1 点到 1 点、凌晨 2 点到 2 点、...、晚上 22 点到晚上 10 点、晚上 23 点到晚上 11 点、

我如何在 JSF 中使用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T04:46:32.257

你可以用[`<f:convertDateTime>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/convertDateTime.html)这个。这不仅支持`java.util.Date`，而且还支持以毫秒为单位的时间（由 获得`Date#getTime()`）。将您的小时乘以 360000 以获取以毫秒为单位的小时，然后使用`<f:convertDatetime>`模式`ha`以获取 AM-PM ( `h`) 中的小时以及 AM-PM 标记 ( `a`)。

```
<h:outputText value="#{bean.hour * 360000}">
    <f:convertDateTime pattern="ha" />
</h:outputText> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T00:08:34.417

What do you want? a Date object or just the output text from an integer?

Create a Date Object and use a Calendar to set its value and then set its hour format to 12 hours.

Or calculate 24 modulo 12 and add "am" or "pm" regarding if value was bigger then 12 or not.

# google-maps - 谷歌地图V3 - 使标记一一下降

> ID：10988681
> 
> 赞同：0
> 
> 时间：2012-06-11T23:17:37.630
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

嗨~我的地图上有大约 200 个标记。

我想让它们在页面加载时一个接一个地下降，即为每个标记的下降动画添加一个小的延迟/间隔。

我尝试使用 jQuery`wait()delay()`和 JS 的`setTimeout()`方法将其存档，但动画似乎是由`Marker`实例的创建触发的，而这些方法仅适用于方法调用。（例如：）`setTimeout(function(), 1000);`所以我不能让他们工作。

谁能为这个问题提供一个简单的解决方案？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T23:24:04.057

快速建议：创建您的标记，但不要将它们设置在地图上。将它们添加到数组中。创建完数组后，弹出第一个数组并将其放在地图上。在标记上设置一个`animation_changed`事件。当标记停止下降时，它会将其动画更改为空。在这种情况下，测试动画是什么，如果它为空，则弹出下一个标记并重复。

# javascript - 每 5 个元素创建一个新对象

> ID：10988682
> 
> 赞同：0
> 
> 时间：2012-06-11T23:17:56.647
> 
> 标签：javascript, jquery

我正在使用类名遍历每个 div 并将 html 放入键/值对象中。我的问题是，要比我现在拥有的更进一步，一个大物体不会切割它。我需要将每 5 个放入一个不同的对象中，或者执行类似于 .slice() 的操作以在之后将其分解。我迷路了，因为如果我知道有多少前期，这将很容易做到，我想让它尽可能动态。一个用户可能有 27 个 .example div，而我在下面有 3 个。它现在在一个对象中，而不是一个数组中，因为键/值对象在 dojo 图表和其他一些我正在尝试做的事情中表现得更好。作为一个过于简化的例子：

```
 //HTML
    <div class="example">
        <div class="title"></div>
        <div class="definition"></div>
    </div>
    <div class="example">
        <div class="title"></div>
        <div class="definition"></div>
    </div>
    <div class="example">
        <div class="title"></div>
        <div class="definition"></div>
    </div>

    //JS
    var titles = {};
    $('.example').each(function(index) {    
        var exampleTitle = $(this).find('.title').html();
        var exampleDef = $(this).find('.definition').html();
        titles[exampleTitle] = exampleDef;
    }); 
```

在我看来，而不是titles = {}，我想将每5个推入一个单独的对象。

```
 //...
    titles2= {}; 
    titles3={};
    etc 
```

无需事先在代码中硬编码数量。

（即我不想说 if(index>5) 并在代码中指定titles2，用户可能有更多，并且将5的倍数硬编码到我能想到支持的任意数字不t 似乎非常有效。）

或者一种使用 5 的倍数的方法，类似于 .slice()。

```
titles.slice(0,5); //obviously does not work on objects, just as an example 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:23:26.280

```
$('.example').each(function(index) {    
    var exampleTitle = $(this).find('.title').html();
    var exampleDef = $(this).find('.definition').html();
    var titles;
    if (! window['titles' + (index / 5)]) {
         titles = window['titles' + (index / 5)] = {};
    }
    titles[exampleTitle] = exampleDef;
}); 
```

`window`现在您将在范围内获得诸如titles0、titles1、...之类的对象。

# webgl - WebGL clientSideArray 替换

> ID：10988683
> 
> 赞同：2
> 
> 时间：2012-06-11T23:18:05.537
> 
> 标签：webgl

我在将 3D 模型导入 WebGL 着色器程序时遇到问题。在`file.dae`（Collada）中，我有顶点和法线列表，其中元素的数量不同。WebGL[缺少 clientSideArray](http://www.khronos.org/registry/webgl/specs/latest/#5.13)，因此我不能对活动数组（顶点、法线、纹理）使用不同的索引！

是否可以在不重新转换多边形中的数据的情况下绘制模型（使用`glDrawElements`而不是创建具有相同数量元素的数组）？

[也许交错数组](http://www.khronos.org/registry/webgl/specs/latest/#5.13)有一些技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:28:39.627

不，WebGL（以及 OpenGL 和 DirectX）要求每个属性具有相同数量的元素。即使是这样，只处理单个索引数组也可能对性能更友好。交错数组不会以任何方式改变这一点，它只是存储相同数据的一种更有效的方式。

# java - java中for循环与List.get等价

> ID：10988684
> 
> 赞同：0
> 
> 时间：2012-06-11T23:18:16.110
> 
> 标签：java, list, foreach

我有一个包含一个元素的列表，但以后可能会有更多。我使用的列表是一个 ArrayList。我发现通过调用 List.get(0) 而不是使用 for 循环可以获得更快的结果。为什么是这样？循环 1 项不应该与获取 1 项相同吗？如果没有，那么我怎样才能获得类似的性能？我知道我的数组最终会大于一项。我在 opengl 渲染器的主体中使用这个循环。当我使用循环时，我的 fps 下降了 45。

**编辑**：我已经解决了这个问题。每次渲染时，我的渲染器都会在列表中添加一个新值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T23:23:48.790

在 Java 中使用增强的 for 循环（for-each）会产生如下编译代码：

```
Iterator<Thing> it = list.iterator();
while(it.hasNext()) {
  yourLoop.loopBody(it.next());
} 
```

您可能期望它等同于这个？

```
for (int i = 0; i < list.size(); i++) {
  yourLoop.loopBody(list.get(i));
} 
```

但事实并非如此，构建迭代器需要您观察的额外时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T23:24:46.143

在不了解`List`实现的情况下，无法真正给出具体的答案。例如，`ArrayList`由数组支持，因此调用`get`本质上是数组访问。

`for`另一方面，使用“foreach”版本的循环需要创建一个`Iterator`. 这可能是减速的原因。一些实现对`Iterator`or有复杂的实现`ListIterator`。

那么答案就是风格和可读性的问题。大多数 Java 程序员会说 foreach 循环更具可读性并且更清楚您的意图。`List`并且（例如）的一些实现`LinkedList`要快得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T23:24:47.677

我不是收藏方面的专家，但设置迭代必须比简单地获取特定项目更昂贵。

通过设置 foreach，我们不知道集合中有多少项目，因此无论列表有多少项目，它都会设置它以进行迭代。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T04:06:26.347

一般来说，如果你担心速度，如果你知道你正在使用 ArrayList，你最快的方法是：

```
int size = list.size();
for (int i=0;i<size;i++) {
  Thing thing = list.get(i);
} 
```

虽然“size”方法的开销很小，但它仍然是不需要在每个循环中调用的开销。ArrayList 上的 get() 方法是 O(1)。这应该给迭代器类似的性能。如果您查看 ArrayList 的迭代器代码，它非常简单，唯一真正的额外开销来自对象创建和并发修改检查。

For LinkedList, however, this type of loop would give horrible performance as the .get() method on LinkedList is O(n), and an Iterator would be much faster, since it's simply doing a pointer check and reassignment for each iteration which makes it O(1) for each call to next().

# simplecv - SimpleCV 可以在 Windows 7 中同时读取多个 USB 摄像头吗？

> ID：10988686
> 
> 赞同：0
> 
> 时间：2012-06-11T23:18:31.743
> 
> 标签：simplecv

我一直在使用 OpenCV 读取相机输出并处理帧。我在 Windows 7 上，事实证明 OpenCV 无法同时读取 Windows 中的多个 USB 摄像头。有没有人在这个方向有过在 Windows 7 中使用 SimpleCV 的经验？是否能够在 Windows 7 中同时显示多个 USB 摄像头的输出？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T02:21:59.607

我是 SimpleCV 的核心开发人员之一，我猜如果 OpenCV 不能做到这一点，那它就行不通了。我们将 pygame 作为 linux 和 mac 上的优雅后备，但遗憾的是，它在 windows 上不存在相机界面。我还没有找到一个好的开源解决方案来只在 Windows 上查看网络摄像头。

# php - PHP和MySQL IP Ban系统问题

> ID：10988688
> 
> 赞同：-1
> 
> 时间：2012-06-11T23:18:59.933
> 
> 标签：php, mysql, if-statement, ip

我目前正在尝试在 PHP 和 MYSQL 中创建一个 IP-BAN 系统，但是我对 MySQL 语法不是很熟悉。到目前为止，这是我的代码，它返回最后一个“哦”。代码：

```
<?php

    $ip = '127.0.0.1';

    mysql_connect('127.0.0.1', 'user', 'pass');
    mysql_select_db('IP');

    if(mysql_query("SELECT IP FROM IP WHERE IP='127.0.0.1'") == 1){
        echo "If you get this, it may or may not be working";
    }
    elseif(mysql_query("SELECT IP FROM IP WHERE IP='127.0.0.1'") == FALSE){
        echo "If you get this, it means that your IP was not found in the database";
    }
    else{
        echo "Uh-oh!";
    } 
```

我的SQL数据库名是IP，表名是IP，字段是IP和ban。

我如何让这段代码告诉我给定的 IP 是否在表中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T23:26:56.600

`mysql_query()``FALSE`如果查询因语法错误而失败，将返回，但`FALSE` 如果未找到该值，则不会返回。相反，这两种情况都将返回结果资源。您必须检查 的值[`mysql_num_rows()`](http://php.net/manual/en/function.mysql-num-rows.php)以确定是否返回了一行。

```
// Do the query and test for errors:
$result = mysql_query("SELECT IP FROM IP WHERE IP='127.0.0.1'");
if (!$result ) {
  // Query error
  echo mysql_error();
}
// Query was successful - test if any rows were found
else {
  if (mysql_num_rows($result) > 0) {
     //the IP was found
  }
  else {
     // the IP was NOT found (num rows === 0)
  }
} 
```

### 免责声明：

现在，关于IP封禁的做法……一般不建议这样做。学校或企业网络，或任何通过其 ISP 进行 NAT 的人（如许多移动网络）在许多用户（可能甚至数千）之间共享一个公共 IP。您无法通过 IP 地址可靠地识别单个用户，更糟糕的是，您可能会阻止合法用户使用您的 Web 应用程序。

最后，关于`mysql_*()`函数本身。 PHP 开发社区已经开始计划弃用这些旧函数，因为它们不鼓励安全编码实践。相反，我（以及这​​里的大多数其他人）建议您熟悉使用准备好的语句的现代 API。我更喜欢[PDO](http://us3.php.net/manual/en/book.pdo.php)，但[MySQLi](http://php.net/manual/en/book.mysqli.php)也是一种选择。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-11T23:26:36.833

mysql_query() 如果成功则返回一个资源。使用此页面上的示例：

[http://us.php.net/manual/en/mysqli.query.php](http://us.php.net/manual/en/mysqli.query.php)

# batch-file - 需要批处理文件编程帮助

> ID：10988691
> 
> 赞同：0
> 
> 时间：2012-06-11T23:19:43.207
> 
> 标签：batch-file

我正在编写一个批处理文件程序，它从用户那里获取用户名和密码，并通过将它们与两个文件进行比较来检查它们，`username.dat`并且`password.dat`.

用户名存储在 中`%username%`，密码存储在 中`%password%`。我想知道的是，如何根据文件 username.dat 和 password.dat 检查这些变量？

我试过用这个：

```
echo %username% >U.dat
echo %Password% >P.dat
COMP U.dat Username.dat 
```

但是要检查什么值？我的意思是在 C 或 C++ 中，我们可以检查返回值，但是这个`COMP`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T04:32:16.647

在文件中存储用户名和密码对我来说似乎是个坏主意。但是，假设您要以任何方式进行操作...

在进行比较之前，无需将变量回显到临时文件。有多种方法可以更直接地进行比较。这是一种方法。我正在使用延迟扩展，以便它支持`&` `|`密码（或用户名）中的特殊字符等。

```
setlocal enableDelayedExpansion
set userPassOK=1
findstr /x /c:"!username!" Username.dat || set "userPassOK="
findstr /x /c:"!password!" Password.dat || set "userPassOK="
if defined userPassOK (echo username and password passed) else echo Invalid username/password 
```

# html - 这是文章元素的正确用途吗？

> ID：10988694
> 
> 赞同：4
> 
> 时间：2012-06-11T23:20:19.330
> 
> 标签：html, semantics, semantic-markup

我正在为新的重新设计重新编写一些代码，我想知道这是否是编写此模块的最佳（实用）语义方式？

这实际上还有 3-4 个项目，并且会向左/向右滑动项目，但我为了 SO 将它配对了一点。

![小样](../Images/564530f75bb29cc1dafcdb19b35834ac.png) ![在此处输入图像描述](../Images/df68c2a5983807b0554ab8234ed23afe.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:30:37.987

在我看来很好。（因为它满足作为独立内容项目的标准）

从规范：

article 元素表示页面的一个组件，该组件由文档、页面、应用程序或站点中的自包含组合组成，并且旨在独立分发或可重复使用，例如在联合中。这可以是论坛帖子、杂志或报纸文章、博客条目、用户提交的评论、交互式小部件或小工具，或任何其他独立的内容项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:30:30.620

是的，`article`这里的使用很好。

元素是否`article`应该在内部`section`取决于页面的上下文。如果您使用分段元素，您也*应该*给它一个标题（但这不是*必须*的！）。

但是您的使用`dl`是**错误**的：

在您的示例中，名称 ( `dt`) “Presented by”将有两个值 ( `dd`)：“Blue Iris Studio”**和**“19”。名称“Walkins”的值为“6.3”。而“千里之外”这个名字根本没有任何价值。这不是你的意思，我猜。

见[规格](http://www.w3.org/TR/2012/WD-html5-20120329/the-dl-element.html#the-dl-element)：

> 每个组必须包含一个或多个名称（`dt`元素），后跟一个或多个值（`dd`元素）。

顺序在这里很重要：首先是 1 `dt`，然后是 1 或更多 (!) `dd`。`dt`否则就不清楚是哪`dd`一个*组*了。

# c# - 如何处理 C# 中缺少多重继承

> ID：10988695
> 
> 赞同：11
> 
> 时间：2012-06-11T23:20:23.410
> 
> 标签：c#, oop, multiple-inheritance

我正在为“可运行”的东西开发一个迷你框架。（它们是实验、测试、任务等）

```
// Something that "runs" (in some coordinated way) multiple "runnable" things.
interface IRunnableOf<T> where : IRunnable

// Provide base-class functionality for a "runner"
abstract class RunnerBase<T> : IRunnableOf<T>

class SequentialRunner<T> : RunnerBase<T>  // Same interface, different behavior.
class ConcurrentRunner<T> : RunnerBase<T>
// other types of runners.

class ConcurrentBlockRunner : SequentialRunner<Block>
class SequentialBlockRunner : ConcurrentRunner<Block> 
```

现在，我该如何调和`ConcurrentBlockRunner`和`SequentialBlockRunner`？我的意思是：

1.  由共同的祖先引用它们，以便在集合中使用。（`IEnuerable<T>`其中 T = ??）

2.  提供额外的基类功能。（例如，添加一个属性）。

* * *

我通过添加另一个刚刚指定类型参数的接口来补救#1 `IA<T>`：

```
interface IBlockRunner : IRunnableOf<Block> { } 
```

并将我的`ConcurrentBlockRunner`和`SequentialBlockRunner`定义修改为：

```
class ConcurrentBlockRunner : SequentialRunner<Block>, IBlockRunner
class SequentialBlockRunner : ConcurrentRunner<Block>, IBlockRunner 
```

由于`ConcurrentBlockRunner`和`SequentialBlockRunner`两者都使用`Block`它们的类型参数，这似乎是一个正确的解决方案。但是，我不禁对此感到“奇怪”，因为好吧，我只是添加了那个界面。

* * *

`ConcurrentBlockRunner`对于 #2，我想在和中添加几条常见数据`SequentialBlockRunner`。有几个属性适用于它们，但不适用于它们唯一的公共基类，一直到`RunnerBase<T>`.

这是我第一次在使用 C# 时觉得多重继承会有所帮助。如果我能做到：

```
abstract class BlockRunnerBase {
   int Prop1 { get; set; }
   int Prop2 { get; set; }

class ConcurrentBlockRunner : SequentialRunner<Block>, BlockRunnerBase
class SequentialBlockRunner : ConcurrentRunner<Block>, BlockRunnerBase 
```

然后我可以简单地将这些额外的属性添加到 BlockRunnerBase，一切都会正常工作。有没有更好的办法？

* * *

我知道我会立即被推荐考虑[composition](http://en.wikipedia.org/wiki/Object_composition)，我开始使用它：

```
class BlockRunner : IBlockRunner  {
   IBlockRunner _member;

   int Prop1 { get; set; }    // Wish I could put these in some base class
   int Prop2 { get; set; }       

   // Lots of proxy calls, and proxy events into _member
   void Method() { _member.Method(); }
   event SomeEvent
   {
      add { _member.SomeEvent += value; }
      remove { _member.SomeEvent -= value; }
   }
} 
```

我遇到的问题（促使我写这个问题）是一旦你写了，你就失去了类型兼容性。在我的例子中，_member 触发了一个事件，所以`sender`参数的类型是`SequentialBlockRunner`. 但是，事件处理程序试图将其强制转换为 type `BlockRunner`，这当然失败了。那里的解决方案不是使用`add`/`remove`来代理事件，而是实际*处理*它们，并引发我自己的事件。这么多工作只是为了添加几个属性......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T00:31:57.283

[组合优于继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)，FTW！

更明确地说：

```
class SequentialRunner<T> : RunnerBase<T> 
```

应该实现`IRunnableOf<T>`和代理`RunnerBase<T>`而不继承它。

```
class SequentialRunner<T> : IRunnableOf<T>
{
   private readonly RunnerBase<T> _runnerBase;

   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T02:26:45.247

您可以使用扩展方法来创建[类似 mixin 的结构](http://codecrafter.blogspot.ca/2011/03/c-mixins-with-state.html)，即使使用类似属性的元素也是如此。

我还在C# [NRoles中创建了一个类似特征的构造的](http://codecrafter.blogspot.ca/2011/05/nroles-experiment-with-roles-in-c.html)*实验*。

但是，所有这些都需要非标准编码，并且对于打算向第三方公开的 API 来说并不理想。我认为您应该尝试重新排列您的类，并尽可能使用接口委托组合。

# qt - Emacs 键绑定中的 Qt Creator

> ID：10988696
> 
> 赞同：6
> 
> 时间：2012-06-11T23:20:32.040
> 
> 标签：qt, emacs, qt-creator

`emacs`有什么方法可以在`Qt Creator`（QTC）上实现键绑定？

一些可能性：

*   [`emacskeys`](https://github.com/fberger/emacskeys/blob/master/README.markdown) 但我未能构建（可能是因为`emacskeys`截至今天支持的版本是 QTC 2.2.1）。
*   [利用`FakeVim`功能](http://lists.qt.nokia.com/pipermail/qt-creator/2009-April/002832.html)（我没有尝试过 b/c 修改`vim`键绑定并调整到`emacs`似乎很复杂）
*   [关联`emacsclient`](http://linux.amazingdev.com/blog/archives/000932.html)（未尝试）

构建错误`emacskeys`：

```
user@host:/usr/share/qtcreator/qt-creator-2.5.0-src$ sudo /usr/local/Trolltech/Qt-4.8.2/bin/qmake && make
cd src/ && /usr/local/Trolltech/Qt-4.8.2/bin/qmake /usr/share/qtcreator/qt-creator-2.5.0-src/src/src.pro -o Makefile
Failure to open file: /usr/share/qtcreator/qt-creator-2.5.0-src/src/Makefile
Unable to generate makefile for: /usr/share/qtcreator/qt-creator-2.5.0-src/src/src.pro
make: *** [src/Makefile] Error 5 
```

环境）`Ubuntu`10.04、4.8.2、2.5 `Qt`_`Qt`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-11T23:20:32.743

受此[评论](https://github.com/fberger/emacskeys/issues/4#issuecomment-5137590)的启发，我设法`emacs`使用`QTC`的功能配置了键绑定。

1.  “环境”->“键盘”选项卡
2.  [从这里](https://sites.google.com/site/lateeye/emacsKeyMap_QtCreator-2.5_12Jun11.kms?attredirects=0&d=1)下载配置文件
3.  导入它。

请注意，我只包含了简单的文本编辑器命令（例如 Ca、Ce 等）。

# facebook - 显示多个页面的点赞数

> ID：10988704
> 
> 赞同：0
> 
> 时间：2012-06-11T23:21:50.947
> 
> 标签：facebook, facebook-opengraph

是否可以在多个 facebook 页面上获取喜欢的数量并将其显示在网页上。

例如，如果我的网站上有四个不同的页面，用于学校比赛中的每个团队。

在红队页面上，我只希望用户能够喜欢红页，但我想显示其他团队有多少喜欢。

我已经查看了文档，但似乎无法找到执行此操作的方法。有人能在这里指出我正确的方向吗？

```
<table>
<tbody>
    <tr>
        <th>Team</th>
        <th>Number of Votes</th>
    </tr>
    <tr>
        <td>Red Team</td>
        <td>
            <span>100 <!--Display number of likes from http://www.facebook.com/redteam --></span>
            <span class="btn-fblike">
                <fb:like href="http%3a%2f%2fwww.facebook.com%2fredteampage" layout="standard" colorscheme="dark" width="320" height="25"/>
            </span>
        </td>
    </tr>
    <tr>
        <td>Blue Team</td>
        <td>
            <span>80<!--Display number of likes from http://www.facebook.com/blueteam --></span>
        </td>
    </tr>
    <tr>
        <td>Green Team</td>
        <td>
            <span>60 <!--Display number of likes from http://www.facebook.com/greenteam --></span>
        </td>
    </tr>
</tbody> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:36:04.517

一些进一步的调查发现，最好的方法是使用[Facebook 查询语言](http://developers.facebook.com/docs/reference/fql/)

# jquery - 加载脚本时的jQuery getScript调用函数

> ID：10988705
> 
> 赞同：1
> 
> 时间：2012-06-11T23:22:03.583
> 
> 标签：jquery, getscript

这是脚本：

```
$("#button").click(function(){
    $.getScript('script.js', function(){
       script.init();
    });
}); 
```

我希望能够像上面的示例一样运行 script.init()，但是如果我这样做，我必须单击两次按钮才能获取脚本。- 当它第一次运行 script.init() 时，它似乎还没有加载。

那么，在我对它做某事之前，如何确保脚本已经加载呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T23:31:01.470

尝试这个：

```
$(window).load(function() {
    $.getScript('script.js', function() {
        $("#button").click(function() {
           script.init();
        });
    });
}); 
```

或者，尝试使用 jQuery.ajax 函数而不是简写：

```
$("#button").click(function () {
    $.ajax({
        url: "script.js",
        dataType: "script",
        success: function () { script.init(); }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T17:54:38.083

当函数名是字符串时，我使用此代码调用函数。

```
$.ajax({
    url: 'script.js',
    dataType: "script",
    success: function () { window["script"]["init"](); }
}); 
```

您还可以将按钮传递给您正在调用的函数。

```
$.ajax({
    url: 'scrpt.js',
    dataType: "script",
    context : this,
    success: function () { window["script"]["init"](this); }
}); 
```

# c - 互斥与忙等待 tcp io

> ID：10988710
> 
> 赞同：0
> 
> 时间：2012-06-11T23:22:40.640
> 
> 标签：c, linux, multithreading, tcp, mutex

我不关心成为一个 CPU 猪，因为我为每个内核分配了一个线程，并且系统线程被阻止到它们自己的集合中。我的理解是，当其他任务要运行时，互斥锁很有用，在这种情况下，这并不重要，所以我正在考虑在内存中的地址上使用消费者线程循环，等待其值不为零 - 就像在单个生产者中一样使用 TCP_NONBLOCK 循环 recv() 的线程只设置了存储信息，现在它不为零。

考虑到我的情况，我的植入是聪明的，还是应该使用互斥锁或自定义中断，即使没有其他任务将运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:13:27.110

在某些情况下，忙碌等待可以为您提供更低的延迟和更好的性能。

让其他线程使用 CPU 是不这样做的明显原因，但还有其他原因：

1.  你消耗更多的能量。空闲 CPU 进入低功耗状态，显着降低功耗。功耗是数据中心的一个主要问题，任何严肃的应用程序都必须有点浪费电力。

2.  如果您的代码在虚拟机中运行（并且现在一切都在虚拟化），那么您的机器会与其他机器竞争 CPU。消耗 100% 的 CPU 会为其他人留下更少的资源，并且可能会导致虚拟机管理程序在真正需要时为您的机器提供更少的 CPU。

3.  你应该始终坚持主流方法，除非有充分的理由不这样做。在这种情况下，主流是使用`select`或`poll`（或`epoll`）。如果您愿意，这可以让您在等待时做其他事情，并且不会浪费 CPU 时间。性能差异是否足以证明忙碌等待的合理性？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:16:31.833

除了@ugoren 的观点和其他人的评论：

即使您有一个有效的忙于等待和刻录内核的用例，这无疑是罕见的，您也需要：

*   保护线程之间共享的数据。这就是锁发挥作用的地方——[**`mutual exclusion`**](http://en.wikipedia.org/wiki/Mutual_exclusion)访问任何复杂的共享数据结构时都需要。人们倾向于在[**`lock-free`**](http://en.wikipedia.org/wiki/Lock-free)这里研究算法，但这些方法并不明显且容易出错，仍然被认为是深奥的黑魔法。在你对并发有充分的理解之前，不要尝试这些。
*   通知线程有关更改的状态。这是您使用[**`conditional variables`**](http://en.wikipedia.org/wiki/Monitor_%28synchronization%29)或监控的地方。还有其他方法，[`eventfd(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/eventfd.2.html)例如在 Linux 上。

以下是一些链接，您可以证明它比您想象的要困难得多：

*   [内存排序](http://en.wikipedia.org/wiki/Memory_ordering)
*   [乱序执行](http://en.wikipedia.org/wiki/Out-of-order_execution)
*   [ABA问题](http://en.wikipedia.org/wiki/ABA_problem)
*   [缓存一致性](http://en.wikipedia.org/wiki/Cache_coherence)

# php - date() 返回一个空字符串

> ID：10988719
> 
> 赞同：-2
> 
> 时间：2012-06-11T23:24:07.393
> 
> 标签：php, date

我正在使用 PHP 的`date`函数。声明很简单

```
$t= 1339455660;
echo date('l, d F Y H:i:s', $t); // not working 
```

由于某种原因，上述函数返回一个空字符串：

```
" " 
```

可能是什么原因？

**编辑：**

```
$t= 1339455660;
echo date('l, d F Y H:i:s'); // works returns desired result
echo date('l, d F Y H:i:s', $t); // returns " " #wierd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T00:40:34.993

您可以使用以下方法将[类型转换](http://php.net/manual/language.types.type-juggling.php#language.types.typecasting) `$t`为整数：`(int)$t`。

# ruby-on-rails - 在运行每个 rspec 请求测试之前登录的单独帮助函数

> ID：10988720
> 
> 赞同：0
> 
> 时间：2012-06-11T23:24:40.850
> 
> 标签：ruby-on-rails, specifications

我一直在努力创建一个应该在运行任何 rspec 测试之前执行的登录功能。

我现在拥有的是：

```
def login
  post "/session", { "session[username]" => "bjones" }
end 
```

在我的 spec_helper.rb 文件中

然后，我在 requests 目录中的一个 spec.rb 文件中有以下内容。

```
require 'spec_helper'

describe "Sessions" do
  describe "GET /dashboards" do

    login

    it "displays the dashboard" do
      get dashboard_path
      puts response.body
    end
  end
end 
```

但是，当我尝试运行测试时，我得到：

```
undefined method `post' for #<Class:0x4f08828> (NoMethodError) 
```

我对 Rails 很陌生，对测试和 rspec 完全陌生，所以也许我在这里缺少一些基本的东西。基本上，我要做的就是设置该会话变量，以便在运行测试时我将登录。也许不同的方法会更好？或者也许我需要将该登录功能放在不同的地方？

我遇到了[这个](https://stackoverflow.com/questions/4738859/maintaining-session-with-capybara-and-rails-3?rq=1)很有用的答案，但它不适用于 rspec，所以我无法理解这样一个辅助函数的去向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-10T18:33:59.737

尝试

```
let(:login) {
  post "/session", { "username" => "bjones" }.to_json
} 
```

这可能需要修改为使用`.to_json`或不使用，具体取决于控制器接受的内容类型。

# ruby-on-rails - 如何在 simple_form 中制作 twitter bootstrap 兼容的复选框标签？

> ID：10988725
> 
> 赞同：4
> 
> 时间：2012-06-11T23:25:49.563
> 
> 标签：ruby-on-rails, twitter-bootstrap, simple-form

如 Twitter Bootstrap 的文档中所述，我正在尝试为一个复选框获取两个标签。（参见[http://twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms) --> 水平表单 --> 复选框（在文本输入下方））

所以我想要显示的是左侧描述的标签、复选框本身以及右侧旁边的提示。

simple_form gem 中 twitter bootstrap 的标准实现创建了一个`<p>`用于显示提示的标签，因为它试图对所有类型的输入保持一致。

我现在想在 simple_form 初始化程序中为“引导复选框”创建一个自定义包装器，但我无法弄清楚如何解决这个问题。

这就是我目前使用裸轨（erb）实现它的方式：

```
<div class="control-group">
 <%= f.label :recurring, :class => 'control-label' %>
 <div class="controls">
   <%= f.label :recurring, :class => 'checkbox' do %>
    <%= f.check_box :recurring %>
    <%= t('.recurring_hint') %>
   <% end %>
 </div>
</div> 
```

你能帮我或者至少试着解释一下这些自定义包装器是如何工作的吗？谢谢！

**编辑：**让我更准确地问我的问题：我可以使用 simple_form 的包装器 API 来使用标签作为包装器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T19:38:31.917

解决方案：

1.  更新到最新版本的 simple_form（2.0.2，有 2.0）
2.  覆盖布尔输入：

**应用程序/输入/boolean_input.rb**

```
class BooleanInput < SimpleForm::Inputs::BooleanInput
  def input
    if nested_boolean_style?
        template.label_tag(nil, :class => "checkbox") {
          build_check_box + inline_label
        }
    else
      build_check_box
    end
  end
end 
```

**_form.html.erb**

调用模板：

```
<%= f.input :recurring, :inline_label => t('.recurring_hint') %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T08:08:17.513

使用[最新的 simple_form](https://github.com/plataformatec/simple_form)，该选项开箱即用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T01:55:18.413

您可以使用引导支持安装 simple_form，因此您不需要编写控制组等包装器。

在安装时检查此链接： [https ://github.com/plataformatec/simple_form#twitter-bootstrap](https://github.com/plataformatec/simple_form#twitter-bootstrap)

您需要做的就是运行以下命令：

```
rails generate simple_form:install --bootstrap 
```

在此页面中，您可以看到一些示例，包括带有 bootstrap 和 simple_form 的水平复选框：[http ://simple-form-b​​ootstrap.plataformatec.com.br/articles/new](http://simple-form-bootstrap.plataformatec.com.br/articles/new)

如果您真的想按照您的方式使用它，您需要在标签上添加“内联”类以及“复选框”。

# netty - Netty ClientBootstrap RECONNECT 到另一台服务器

> ID：10988727
> 
> 赞同：0
> 
> 时间：2012-06-11T23:26:10.297
> 
> 标签：netty

我有一个关于 ClientBootStrap 的问题。这是场景；

1.  Client_X 想加入 Server_A。
2.  但是 Server_A 以某种方式希望 Client_x 加入 Server_B。
3.  所以 Server_A 将 Server_B 的信息发送给 Client_X 进行 RECONNECTION
4.  Client_X 收到 RECONNECTION 消息后，立即尝试与 Server_A 断开连接并尝试连接到 Server_B。但它失败了。因为一旦客户端从 Server_A 断开，他就不能再使用断开的通道。

这看起来很简单。但这是我的实现

```
 @Override
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e)throws Exception  {
    if(e.getMessage() instanceof SomePacket){
    ....
    }else if(e.getMessage() instanceof Reconnect){ //Server_A has sent a RECONNECT Message.(Redirection)
        Reconnect theReconnectPacket = (Reconnect)e.getMessage();
        String hostname = theReconnectPacket.getHostname();
        int port = theReconnectPacket.getPort();

        this.reconnectHost  = hostname;
    this.reconnectPort  = port;
    this.currentState   = 1;

    ctx.getChannel().disconnect();    //DISCONNECT FROM SERVER_A

     }
}

@Override
public void channelDisconnected(ChannelHandlerContext ctx,ChannelStateEvent e) throws Exception {

     if(this.currentState == 1){

        Channel disconnectedChannel = ctx.getChannel();

    if (!disconnectedChannel.isConnected()){

    SocketAddress destinationAddress = new InetSocketAddress(this.reconnectHost, this.reconnectPort);
           //TRYING TO RECONNECT SERVER_B
    disconnectedChannel.connect(destinationAddress);    //**Error Line:java.nio.channels.ClosedChannelException**

    }

      }

    super.channelDisconnected(ctx, e);
} 
```

正如您在**错误行**中看到的，我得到了这个异常：java.nio.channels.ClosedChannelException。断开后我们不能使用相同的频道吗？一旦断开连接，它就完成了吗？我们如何在 SimpleChannelHandler 中重新创建连接？

感谢您的进一步评论：）

<<<<< 新方法>>>>>>

好的。所以在 SimpleChannledHandler 中，我使用 ClientBootStrap 连接不同的端口。

```
 @Override
public void channelDisconnected(ChannelHandlerContext ctx,ChannelStateEvent e) throws Exception {

       Channel disconnectedChannel = ctx.getChannel();
    final ClientDataObject oldObject = ClientDataState.clientObject.get(disconnectedChannel);

    if(oldObject.getClientState() == 1){

        if (!disconnectedChannel.isConnected()){

SocketAddress destinationAddress = new InetSocketAddress(this.reconnectHost, this.reconnectPort);

ChannelFuture connectFuture = bootstrap.connect(destinationAddress);

connectFuture.addListener(new ChannelFutureListener() {
    @Override
    public void operationComplete(ChannelFuture channelFuture) throws Exception {

        Channel newChannel = channelFuture.getChannel();
    ClientDataObject newObject =  ClientDataState.clientObject.get(newChannel);
                      newObject.setClientID(oldObject.getClientID());

                     newObject.setClientState(oldObject.getClientState());
                    newObject.setRoomId(oldObject.getRoomId());
                    newObject.setClientState(1);

                    ClientDataState.clientObject.set(newChannel, newObject);

                    Channels.write(newChannel, new Login(newObject.getClientID()));
               }});             

        }else{
                     //Channled connected
            }

    }

    super.channelDisconnected(ctx, e);

} 
```

但是我需要知道Client_X的一些信息。一旦 Client_x 断开，管道就会创建另一个 SimpleChannelHandler。所以我所有的信息都没有了。我尝试使用 ChannelLocal 来保持客户端的状态。但它也无用，因为它与通道对象有关。当我连接到 newChannel 时，我无法再次使用旧的 SimpleChannelHandlers 的数据。（如 clientID、roomID 等）

我的观点是如何在不受通道（会话）影响的情况下存储信息，我想从任何通道处理程序访问数据。

处理这个问题的方法是我们应该这样实现ChannelPipelineFactory吗？

```
 public class GameClientPipelineFactory implements ChannelPipelineFactory{

      private static final ClientStaticHandler SHARED = new ClientStaticHandler();  

           private Someobject o;
public GameClientPipelineFactory(Someobject refTOSomeObject) {
    super();
    this.o = refToSomeObject;
}

@Override
public ChannelPipeline getPipeline() throws Exception {
    // TODO Auto-generated method stub
    ChannelPipeline pipeline = Channels.pipeline();

    //pipeline.addLast("delimiter", new DelimiterBasedFrameDecoder(256, Delimiters.lineDelimiter()));
    pipeline.addLast("decoder", new GameClientDecoder());
    pipeline.addLast("encoder", new GameClientEncoder());
    pipeline.addLast("shared", SHARED); //I added this line

    pipeline.addLast("logicHandler", new GameClientLogicHandler(this.o));

    return pipeline;

} 
```

但是我将如何使用这个“共享”处理程序？每次我需要一个全局对象时，我是否应该要求管道获取此处理程序并从“共享”处理程序获取任何对象？这不是很长的路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:43:17.283

Instead of trying to reopen a closed channel, try creating a new channel.

You may want to implement a callback to initiate a the creation of a new channel.

# iphone - contentOffset 不会从 0 改变

> ID：10988731
> 
> 赞同：0
> 
> 时间：2012-06-11T23:26:43.453
> 
> 标签：iphone, xcode, xcode4

几乎我需要检测滚动视图何时在 320 x 执行一些代码，但 contentOffset 似乎总是为 0。当我设置`position==0`代码执行但我需要它在 320 处执行。有什么想法吗？

```
(void)scrollViewDidEndDecelerating:(UIView *)sender
{
    int position = (_scrollView.contentOffset.x);
    if(position==320)
    {
    // Code Here
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T23:51:13.900

使用 sender 参数而不是 _scrollView 引用的任何变量（可能未正确连接）

另外，不要将 contentOffset.x 转换为 int，它实际上是 CGFloat

```
(void)scrollViewDidEndDecelerating:(UIScrollView *)sender
{
    if(sender.contentOffset.x==320)
    {
    // Code Here
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T23:56:57.843

这是在滚动视图停止之后调用的（在减速和弹跳等之后），所以如果你的滚动视图是 320 宽并且它`contentSize.width`也是 320 （或者更小，我认为），那么这就解释了为什么它总是出现在 0 处停止。假设滚动视图宽度为 320，如果您将其设置`contentSize.width`为 640，那么当您一直滚动到右侧（将内容拖到左侧）`contentOffset.x`时，应该是 320休息。

```
+--------------+ <- Scroll View, 320 wide.
|              |
|+-------------------------------+ <- contentSize.width is 640
||                               |
||                               |
||                               |
|+-------------------------------+
|              |
+--------------+
 ^ contentOffset.x is 0

                  +--------------+ <- Scroll View, 320 wide.
                  |              |
+-------------------------------+| <- contentSize.width is 640
|                               ||
|                               ||
|                               ||
+-------------------------------+|
                  |              |
                  +--------------+
                  ^ contentOffset.x is 320 
```

从上图中可以看出，内容偏移量是内容视图内部与滚动视图原点对齐的点。

# .htaccess - 如何从 phpBB url 中删除尾部斜杠？

> ID：10988736
> 
> 赞同：1
> 
> 时间：2012-06-11T23:27:24.103
> 
> 标签：.htaccess, url, url-rewriting, mediawiki, phpbb

我在这里关注了一些之前回答的问题，并重写了我的 phpBB 论坛的主要 URL，如下所示：

```
Options +FollowSymLinks -MultiViews

RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1 [L,QSA]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s(.*)/index\.php [NC]
RewriteRule ^ /%1 [R=301,L] 
```

论坛网址以前是

```
http://site.com/forum/index.php 
```

现在它成功解析为

```
http://site.com/forum/ 
```

我想删除最后的斜杠。我应该对上面的代码进行哪些更改？

PS我需要对同一站点的wiki页面进行类似的更改，目前解析为site.com/wiki/index.php?title=Main_Page（我需要它是site.com/wiki）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:34:50.383

在重写规则之前的 .htaccess 中添加以下行：

```
DirectorySlash Off 
```

告诉 Apache 不要总是附加斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T23:32:17.040

加入

```
RewriteRule ^(.*)/{1}$ $1 [L,R=301] 
```

# facebook-graph-api - Facebook Canvas 应用页面 -- 我可以将其更改为粉丝页面吗？

> ID：10988740
> 
> 赞同：0
> 
> 时间：2012-06-11T23:27:43.510
> 
> 标签：facebook-graph-api, sharing, facebook-page, facebook-canvas

首先，为我的非技术性道歉。我一直在寻找并寻找答案，但没有运气。

我的网站有一个 FB 应用程序，用于获取身份验证令牌，以便人们可以将他们在我的网站上创建的内容分享到他们的 FB 墙上。该应用程序只是让网站获取令牌，因此我们不需要要求人们一遍又一遍地登录 FB。

在 FB 上，我们有一个画布页面与这个应用程序一起使用，但它所做的只是将我们的网页加载到一个 iFrame 中（在那里看起来有点糟糕）。

有没有办法将 Canvas 页面更改为我们的 FB 粉丝页面？这样，如果人们从他们自己对 FB 的游荡中点击我们的“应用程序”，他们将被引导到一个 FB 粉丝页面，而不是我们在 FB 中看起来很奇怪的页面。

再次，如果这个问题很简单，我深表歉意。我是新来的。如果有人对我有答案并且可以用木偶来解释——那可能会有所帮助。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T23:50:05.930

这是一种令人讨厌的方法，但您可以在加载 Canvas 页面时通过检查 URL 将访问者重定向到您的 Facebook 页面。

首先，您有一个获取 Canvas 页面 URL 的函数。

```
function checkPage()
{
    $pageURL = 'http';

    if ($_SERVER["HTTPS"] == "on")
    {
        $pageURL .= "s";
    }
    $pageURL .= "://";
    if ($_SERVER["SERVER_PORT"] != "80")
    {
        $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
    }
    else
    {
        $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
    }
    return $pageURL;
} 
```

然后检查 URL 是否包含出现在每个 Canvas 页面中的“fb_source”，如果包含，则将它们重定向到您想要的位置。

```
 $currentUrl = checkPage();

    if(strpos($currentUrl,'fb_source') !== false)
    {
    <script type="text/javascript">
        top.location.href = "URL HERE";
    </script>
    } 
```

# jquery - jQuery carouFredSel li 宽度

> ID：10988741
> 
> 赞同：0
> 
> 时间：2012-06-11T23:28:17.353
> 
> 标签：jquery, jquery-plugins, caroufredsel

我正在使用[这个插件](http://caroufredsel.frebsite.nl)，这里是代码：http: [//jsfiddle.net/gm8t5/](http://jsfiddle.net/gm8t5/)

基本上我想增加中间`li`宽度看起来像这样：

![在此处输入图像描述](../Images/7466db67dcad570503d422e26969806a.png)

我试过这样：

```
.list_carousel li {width: 960px !important;} 
```

但是动画并不是那么顺利。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T00:05:36.300

使用 . 在 CSS 中设置项目宽度`.list_carousel li`。此外，您需要将可见的项目设置为 3，因为您希望每边有 1 个，中间有 1 个。

**插件设置：**

```
items: {
    visible: {
        min: 3,
        max: 3
    }
} 
```

**CSS**

```
.list_carousel li { 
    float: left;
    width: 300px;
    height: 60px;
} 
```

您可以调整项目大小以及调整容器大小。您希望项目宽度占整个容器宽度的大部分，以实现您正在寻找的效果。

我做了一个新的[jsfiddle](http://jsfiddle.net/6mj4N/5/)并做了一些认真的清理工作。您拥有的标记和 CSS 实际上使您无法实现您正在寻找的东西。

# php - 带有 2 个条件的 if 语句

> ID：10988743
> 
> 赞同：0
> 
> 时间：2012-06-11T23:28:33.103
> 
> 标签：php, if-statement

我正在练习陈述并遇到了问题。我正在努力做到这一点，如果`$child3`有空，那么`echo`三个孩子都可以，比如什么时候`$child2`有空，它`echo`是 Kim & Pom。我做错了什么？

```
$child = "Kim";
$child2 = "Pom";
$child3 = "Rob";

if($child2) {
    echo $child; echo " "; echo $child2;
} elseif($child3) {
    echo $child; echo " "; echo $child2; echo " "; echo $child3;
} else {
    echo $child;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:31:30.330

`elseif``if`仅当前面的s 或s均未执行时才执行`elseif`。因此，您需要将其移至另一个上方`if`：

```
if($child3) {
    echo $child; echo " "; echo $child2; echo " "; echo $child3;
} elseif($child2) {
    echo $child; echo " "; echo $child2;
} else {
    echo $child;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T23:31:32.983

尝试颠倒条件：

```
$child = "Kim";
$child2 = "Pom";
$child3 = "Rob";

if($child3){
    echo $child . " " . $child2 . " " . $child3;
}else if($child2){
    echo $child . " " . $child2;
}else{
    echo $child;
} 
```

您可能还喜欢美妙的字符串连接运算符`.`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T23:34:03.370

可能你想要这样的东西：

```
$child = 1; // Or $child = 2; Or $child = 3;

if ($child == 1) {
    echo 'Kim';
} elseif ($child == 2) {
    echo 'Pom';
} else {
    echo 'Rob';
} 
```

但我建议`switch()`你一有`elseif`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T23:31:59.840

```
$child = "Kim";
$child2 = "Pom";
$child3 = "Rob";

if($child3){
    echo $child; echo " "; echo $child2; echo " "; echo $child3;
}elseif($child2){
    echo $child; echo " "; echo $child2;
}else{
    echo $child;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T23:32:22.617

如果那是您的实际代码，那么您只会得到`Kim Rob`，`$child2`一如既往`true`，从而绕过您的`else`子句。

此外，您可以将您`echo`的 s 组合成：

```
echo "$child $child2 $child3"; 
```

它使以这种方式阅读变得容易得多。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T23:33:28.113

这个怎么样？

```
if ($child) {
   echo "{$child} ";
}
if ($child2) {
   echo "{$child2} ";
}
if ($child3) {
   echo "{$child3} ";
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-12T00:00:52.617

这就是我将如何做到的。我同意 Dragon 的观点，即切换会更清晰/更好。

```
switch (true)
{
  case (isset($child,$child2,$child3)) : 
    echo $child . ' ' . $child2 . ' ' . $child3;
    break;
  case (isset($child, $child2)) :
    echo $child . ' ' . $child2;
    break;
  case (isset($child)) :
    echo $child;
    break;
} 
```

# .net - 自托管 WebAPI 应用程序引用来自不同程序集的控制器

> ID：10988749
> 
> 赞同：12
> 
> 时间：2012-06-11T23:30:15.753
> 
> 标签：.net, asp.net-web-api, self-hosting

我遇到了[这颗](http://www.asp.net/web-api/overview/hosting-aspnet-web-api/self-host-a-web-api)宝石，它似乎接近我想要的。但是，我想使用引用程序集中已经编写的控制器。

我的第一次破解是引用程序集，设置路由规则和原来的webAPI项目一样去，但是每次尝试调用自托管服务都得到400s。我已经通过 Fiddler 挑选了请求的内容，除了地址差异之外，针对 webAPI 项目和自托管项目的请求是相同的。

我觉得这应该相对简单，但我还没有找到一个可以接受的答案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-06-26T15:27:41.203

Praveen 和 Janushirsha 以前的帖子将我引向了正确的方向，我在这里继续：

```
// Not reliable in Release mode :
Type controllerType = typeof(ReferencedControllers.ControllerType); 
```

因此，您应该替换`IAssembliesResolver`为：

```
HttpConfiguration config = new HttpConfiguration();
config.Services.Replace(typeof(IAssembliesResolver), new CustomAssembliesResolver()); 
```

这是一个实现示例`CustomAssembliesResolver`

```
using System.Web.Http.Dispatcher;
internal class CustomAssembliesResolver : DefaultAssembliesResolver
{
    public override ICollection<System.Reflection.Assembly> GetAssemblies()
    {
        var assemblies = base.GetAssemblies();

        // Interestingly, if we push the same assembly twice in the collection,
        // an InvalidOperationException suggests that there is different 
        // controllers of the same name (I think it's a bug of WebApi 2.1).
        var customControllersAssembly = typeof(AnotherReferencedAssembly.MyValuesController).Assembly;
        if (!assemblies.Contains(customControllersAssembly))
            assemblies.Add(customControllersAssembly);

        return assemblies;
    }
} 
```

如果未引用第三方程序集或者您想要后期程序集绑定，则可以轻松修改此代码。

希望这有帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-05T07:54:01.723

这似乎是一个已知问题。您必须强制 .NET 使用您需要的控制器加载程序集。

在您自行托管 Web API 之前，您应该从参考程序集中检索您希望由运行时加载的类型。像这样的东西：

```
Type controllerType = typeof(ReferencedControllers.ControllerType); 
```

这应该从这个程序集中加载控制器，它不会给你 404 错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-15T16:23:51.963

这个[链接](http://www.strathweb.com/2012/06/using-controllers-from-an-external-assembly-in-asp-net-web-api/)为同样的问题节省了我的时间:)...

我只需要更改以下语句以适应 selfhost webapi 配置。

```
GlobalConfiguration.Configuration.Services.Replace(typeof(IAssembliesResolver), new CustomAssemblyResolver()); 
```

和

```
var config = new HttpSelfHostConfiguration("http://localhost:8081");
        config.Services.Replace(typeof(IAssembliesResolver), new CustomAssemblyResolver()); 
```

# python - python错误字符编码比较

> ID：10988750
> 
> 赞同：0
> 
> 时间：2012-06-11T23:30:16.417
> 
> 标签：python, encoding

Python 中的西里尔字符比较有问题。这是小测试用例%

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

def convert(text):
    result = []
    for i in xrange(len(text)):
        if text[i].lower() == 'й':
            result.append('q')
    print result

if __name__ == '__main__':
    convert('йцукенг') 
```

你肯定看到，第一个字符应该等于条件中的字符。但条件失败，结果为空。

此外，如果我尝试打印整个字符串（文本），效果很好，但如果我尝试仅打印一个字符（如 text[2]）——我会得到 '?' 在输出中。

我确定问题出在编码上，但是如何正确比较单独的字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T23:40:08.200

You are seeing this behavior because you are looping over the bytes in a UTF-8 string, not over the characters. Here is an example of the difference:

```
>>> 'й'               # note that this is two bytes
'\xd0\xb9'
>>> 'йцукенг'[0]      # but when you loop you are looking at a single byte
'\xd0'
>>> len('йцукенг')    # 7 characters, but 14 bytes
14 
```

This is why it is necessary to use Unicode for checking the character, as in mVChr's answer.

These easiest way to do this is to leave all of your code exactly the same, and just add a `u` prefix to all of your string literals (`u'йцукенг'` and `u'й'`).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T23:36:37.753

假设您使用的是 Python 2.X，您应该使用 unicode 字符串，请尝试：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

def convert(text):
    result = []
    for i in xrange(len(text)):
        if text[i].lower() == unicode('й', 'utf8'):
            result.append('q')
    print result

if __name__ == '__main__':
    convert(unicode('йцукенг', 'utf8')) 
```

或者您可以简单地输入原始的 unicode 字符串`u'йцукенг'`和`u'й'`

# html - 如何使用 CSS 为居中列的相邻空间着色？

> ID：10988753
> 
> 赞同：0
> 
> 时间：2012-06-11T23:30:40.290
> 
> 标签：html, css

我正在尝试在 Drupal 中实现一个设计，布局如下：

[http://i.imgur.com/H1hOm.png](http://i.imgur.com/H1hOm.png)

即：一个居中的列，具有页眉、导航栏、正文和页脚。左右相邻的空间是空的。现在，我需要用相同的颜色填充第 1、2 和 3 部分的左右空间，但不拉伸 div。我的想法是创建三个 div（1'、2'、3'，左右）并相应地设置背景颜色。

1 很好，但我无法匹配 div 2 的高度（尝试了一切，将 'min-height' 设置为 html、body、容器 div，但没有任何效果）。

我想知道是否有另一种方法可以实现我想要的，或者有问题的高度可能有什么问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:08:29.830

这是使用背景图像的解决方案... [http://dabblet.com/gist/2920146](http://dabblet.com/gist/2920146)

# naudio - naudio - 对象包含非原始或非 blittable 数据

> ID：10988755
> 
> 赞同：0
> 
> 时间：2012-06-11T23:30:47.960
> 
> 标签：naudio

我正在编写一个包含简单 MP3/WAV 媒体播放器区域的程序。

我遵循了 NAudio 示例程序中包含的代码，这是我创建的用于封装可播放音频文件的类：

```
public sealed class PlaybackContext : IDisposable {

    private String         _fileName;
    private DirectSoundOut _dsoundOut;
    private WaveStream     _waveStream;

    public PlaybackContext(String fileName) {

        _fileName  = fileName;
        _dsoundOut = new DirectSoundOut( DirectSoundOut.DSDEVID_DefaultPlayback );

        String ext = Path.GetExtension( fileName );
        if( ext.Equals(".mp3", StringComparison.OrdinalIgnoreCase) ) {

            _waveStream = new Mp3FileReader( fileName );

        } else if( ext.Equals(".wav", StringComparison.OrdinalIgnoreCase) ) {

            _waveStream = new WaveFileReader( fileName );
            switch( _waveStream.WaveFormat.Encoding ) {
                case WaveFormatEncoding.Pcm:
                case WaveFormatEncoding.IeeeFloat:
                    break;
                default:
                    _waveStream = new BlockAlignReductionStream( WaveFormatConversionStream.CreatePcmStream( _waveStream ) );
                    break;
            }
        }

        _dsoundOut.Init( _waveStream );
    }

    public void Play() {

        _dsoundOut.Play();
    }
            // hidden are the Pause/Stop/Dispose methods 
```

它适用于 MP3 文件，但是当我尝试播放任何 Wave 文件时，我得到了这个异常：

```
Object contains non-primitive or non-blittable data.
   System.ArgumentException
   at System.Runtime.InteropServices.GCHandle.InternalAlloc(Object value, GCHandleType type)
   at System.Runtime.InteropServices.GCHandle.Alloc(Object value, GCHandleType type)
   at NAudio.Wave.DirectSoundOut.InitializeDirectSound()
   at NAudio.Wave.DirectSoundOut.PlaybackThreadFunc()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

我在 Google 上找不到任何东西，而且我的代码是为 x86 编译的（所以这不是 64 位问题）。否则我被卡住了。

有任何想法吗？

# git - Git 在提交前比较文件

> ID：10988757
> 
> 赞同：30
> 
> 时间：2012-06-11T23:30:50.640
> 
> 标签：git, github, github-for-windows

git 中是否有一个功能，我可以在提交更改之前将我的本地文件与 git 源代码控制进行比较？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-12T07:21:17.473

你当然可以。

1.  使用`git diff`不带任何参数的命令：将文件系统中每个修改过的文件与当前签出分支（或）标签中的文件进行比较。

2.  使用`git diff <tag(or)branch name>`: 会将文件系统中的每个修改文件与指定分支（或）标记中的文件进行比较。

3.  使用`git diff <path/to/file_name (or) path/to/folder>`: 会将文件系统中文件夹中的一个或多个指定文件与当前签出的分支（或）标签进行比较。

4.  使用`git diff <tag1(or)branch1 name> <tag2(or)branch2 name>`: 将比较两个分支/标签之间的所有修改文件。

有很多选项，你可以传递给 'git diff' 命令来格式化你的输出。这里我列出了一些：

*   `git diff --name-only`: 只显示更改文件的名称，不显示内容。
*   `git diff --name-status`：仅显示更改文件的名称和状态。
*   `git diff --cached (or --staged)`: 仅比较暂存/索引的文件。

更多信息：`git diff --help`在你的 git bash 中执行。

仅供参考：`git diff`将在命令行中生成输出。如果您想在某些可视化工具中查看输出，请使用`git difftool`.

使用**`git difftool`**：您可以将 git 配置为使用 diff/merge 工具来比较文件。签出此链接：[在 Git 中使用 Winmerge 归档差异](https://stackoverflow.com/questions/1881594/use-winmerge-inside-of-git-to-file-diff)

您也可以将所有`git diff`参数和选项传递给`git difftool`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-11T23:40:36.750

我喜欢用

```
git status 
```

它将向您显示哪些文件已更改以及您正在跟踪什么。然后你可以使用

```
git diff 
```

或者更友好的 GUI

```
gitk 
```

要查看差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T03:53:27.597

我更喜欢使用这种方法。

比较脚本

```
 #!/bin/sh
(                              # execute in a subshell so you can continue
                               #   working in the current shell
    set -o xtrace              # bash setting that echos each command before it's executed
    > /tmp/auto_bcompare_log   # truncate existing log file
    BCOMP_PATH=/usr/bin/bcompare
    BRANCH="$1"                # get branch argument from command line
    TEMPDIR=`mktemp -d`        # get a temp directory
    CWD=`pwd`                  # remember the current directory
    git clone $CWD $TEMPDIR
    cd $TEMPDIR
    git checkout $BRANCH
    cd $CWD
    $BCOMP_PATH $CWD $TEMPDIR
    rm -rf $TEMPDIR
) >> /tmp/auto_bcompare_log 2>&1 < /dev/null & # background and redirect
                                               # stdout/stderr/stdin 
```

上面的脚本*绝对*不是我写的。我是从网上拿的，但不知道出处。将其保存在您的存储库中作为 compare.sh。确保为 bcompare 文件提供正确的路径。

用于在提交前进行比较。

```
./compare.sh <branch_you_want_to_compare> 
```

该脚本的基本作用是，它检查您作为参数提供给临时目录的分支，并打开以与您的密码进行比较。有了这个，您可以在提交之前查看您的更改。我希望这是你想要的。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-11T23:38:47.177

由于提交在推送之前很容易修改/更改，因此我发现提交更容易，然后在日志中查看我更改的内容。

如果这不是我所期望的，修改，重置，rebase -i 等......

# linux - arch/x86/include/asm/unistd.h 与 include/asm-generic/unistd.h

> ID：10988759
> 
> 赞同：2
> 
> 时间：2012-06-11T23:31:00.120
> 
> 标签：linux, linux-kernel

这两个文件有什么区别？我真的无法理解。我应该提到第一个文件应该是`arch/x86/include/asm/unistd_32.h`（或和`_64.h`）。以下是它们包含的内容的快速预览：

* * *

`arch/x86/include/asm/unistd.h`：

* * *

```
#ifndef _ASM_X86_UNISTD_32_H
#define _ASM_X86_UNISTD_32_H

/*
 * This file contains the system call numbers.
 */

#define __NR_restart_syscall      0
#define __NR_exit         1
#define __NR_fork         2
#define __NR_read         3
#define __NR_write        4
#define __NR_open         5
#define __NR_close        6
#define __NR_waitpid          7
#define __NR_creat        8
#define __NR_link         9
#define __NR_unlink      10
#define __NR_execve      11
#define __NR_chdir       12
#define __NR_time        13
#define __NR_mknod       14
#define __NR_chmod       15
#define __NR_lchown      16
#define __NR_break       17
#define __NR_oldstat         18
#define __NR_lseek       19
#define __NR_getpid      20
#define __NR_mount       21
#define __NR_umount      22 
```

* * *

`include/asm-generic/unistd.h`

* * *

```
#if !defined(_ASM_GENERIC_UNISTD_H) || defined(__SYSCALL)
#define _ASM_GENERIC_UNISTD_H

#include <asm/bitsperlong.h>

/*
 * This file contains the system call numbers, based on the
 * layout of the x86-64 architecture, which embeds the
 * pointer to the syscall in the table.
 *
 * As a basic principle, no duplication of functionality
 * should be added, e.g. we don't use lseek when llseek
 * is present. New architectures should use this file
 * and implement the less feature-full calls in user space.
 */

#ifndef __SYSCALL
#define __SYSCALL(x, y)
#endif

#if __BITS_PER_LONG == 32
#define __SC_3264(_nr, _32, _64) __SYSCALL(_nr, _32)
#else
#define __SC_3264(_nr, _32, _64) __SYSCALL(_nr, _64)
#endif

#define __NR_io_setup 0
__SYSCALL(__NR_io_setup, sys_io_setup)

#define __NR_io_destroy 1
__SYSCALL(__NR_io_destroy, sys_io_destroy)

#define __NR_io_submit 2
__SYSCALL(__NR_io_submit, sys_io_submit)

#define __NR_io_cancel 3
__SYSCALL(__NR_io_cancel, sys_io_cancel)

#define __NR_io_getevents 4
__SYSCALL(__NR_io_getevents, sys_io_getevents)

/* fs/xattr.c */

#define __NR_setxattr 5
__SYSCALL(__NR_setxattr, sys_setxattr)

#define __NR_lsetxattr 6
__SYSCALL(__NR_lsetxattr, sys_lsetxattr)

#define __NR_fsetxattr 7
__SYSCALL(__NR_fsetxattr, sys_fsetxattr)

#define __NR_getxattr 8
__SYSCALL(__NR_getxattr, sys_getxattr)

#define __NR_lgetxattr 9
__SYSCALL(__NR_lgetxattr, sys_lgetxattr)

#define __NR_fgetxattr 10
__SYSCALL(__NR_fgetxattr, sys_fgetxattr)

#define __NR_listxattr 11
__SYSCALL(__NR_listxattr, sys_listxattr)

#define __NR_llistxattr 12 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T04:34:55.787

我没有明确的答案，但是当开发人员试图从旧机制转移到新机制时，冗余文件的存在并不少见。你的情况看起来很相似。

如果你检查 3.4 内核，你会发现 arch/x86/include/asm/unistd_32.h 和 arch/x86/include/asm/unistd_64.h 都没有了。相反，它们是使用 arch/x86/syscalls 生成的。

检查最新的内核（3.4.2 stable 对我有用），然后执行“git log --stat arch/x86/include/asm”，搜索 unistd_64.h 或 unistd_32.h 或 unistd.h。

我发现以下提交可能会让您感兴趣。提交 303395ac3bf3e2cb488435537d416bc840438fcb

我以前从未接触过系统调用，所以我不想说太多。git log 通常是我整理令人困惑的文件的方式。如果你擅长它，你也可以进入 makefile。（我不是，所以我依赖 git log。）

# version-control - 源代码控制和开发新版本的应用程序

> ID：10988763
> 
> 赞同：1
> 
> 时间：2012-06-11T23:31:15.850
> 
> 标签：version-control, mercurial, bitbucket

我使用 Mercurial/TortoiseHg 作为我的源代码控制。

到目前为止，我只有一个应用程序，并且即将完成 1.0 版。一旦 V 1.0 上线，我们已经准备好为下一个版本编程的功能。

它是一个手机应用程序，现在 V1.0 将是免费的，但可能希望 V2.0 付费，以后可能会对免费版本进行一些小错误/修复更新。

我不确定在 V2.0 进行时错误修复将如何工作。

**我的问题是：**

我是否需要从 V1.0 开始分叉或分支我的存储库，或者我只是继续向我当前的存储库添加功能？无论我需要做什么，我也想知道为什么我需要这样做。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:25:14.013

一个常见的工作流程是有两个分支，`stable`并且`default`. 当您准备好发布新版本时，您可以添加新功能`default`并合并到。`stable`实时错误已在`stable`分支上修复并合并回`default`.

[这个页面](http://stevelosh.com/blog/2010/05/mercurial-workflows-stable-default/)描述得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T23:36:45.693

我会为 2.0 创建一个分支，添加您的添加，并在完成后将它们合并到 1.0 中，或者创建一个 1.0 的标记版本以保留用于存档目的。

您将它们分开是因为您希望能够恢复 1.0 版本，以防需要修复错误或进行新部署。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T23:37:52.513

恭喜，一旦您的应用程序上线，您可能需要修复错误，并进行一些小更新，但修复此类错误或小更新可能会干扰您在 2.0 上的工作，因此明智的做法是简单地进行分支、修复如果需要，它们会在它们出现并传播到 2.0 时出现错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T08:48:05.670

我会做以下事情：

将您发布的修订标记为 v1.0

```
hg update -r <revision that's 1.0>
hg tag v1.0
hg ci -m 'Created V1.0 Tag' 
```

为任何将在此之上的错误修复创建一个分支。这可能是在您发布 V1.0 时，或者当您对其进行了第一个错误修复时。

```
hg update v1.0 (or ideally the revision that added the V1.0 tag if it's immediately after V1.0)
hg branch release_v1
<Possibly do bug fix>
hg ci 
```

回到默认分支继续开发 v2。

```
hg update default
<carry on working> 
```

当您有 v1 的错误修复时

```
hg update release_v1
<do bug fix> 
```

然后合并从 v1.x 到 v2.x 的前向错误修复

```
hg update default
hg merge release_v1
hg ci -m 'Merged V1 bug fixes into V2' 
```

您在发布新版本时创建新标签。该`release_v1`分支继续运行，积累错误修复，并`default`在必要时合并到（您的开发分支）中。只需确保您在合并时位于默认分支上，因为这决定了合并更改集具有的分支名称。

* * *

编辑补充说，这是其他人提到的`stable`/`default`工作流程的一种变体，但我喜欢为每个主要版本都有一个分支，因为这样我就可以有多个主要版本接受错误修复。

# asp.net - 为什么除非我将操作系统更改为 Win 2008 R2，否则我的 Azure MVC3 站点上会出现 403？

> ID：10988769
> 
> 赞同：1
> 
> 时间：2012-06-11T23:31:50.937
> 
> 标签：asp.net, asp.net-mvc-3, iis-7, azure, iis-7.5

我最近更新到最新的 SDK 1.7 并对我的 MVC3 应用程序进行了一些更改。当我发布到 Azure 时，我现在在所有页面上都得到 403。

如果我访问 Azure 门户并将我的 Web 角色更改为使用 OS Windows 2008 R2，错误就会消失并且我的应用程序可以正常工作。但是，每次我重新部署时，我都必须更改角色以使用 2008 R2 任何想法？

是更高版本的 IIS 处理的 Web.config 问题吗？知道要改变什么才能让它再次工作吗？

我认为我没有进行任何路由更改等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T02:21:22.890

很抱歉，我无法回答为什么会出现此问题，但您可以更改默认操作系统，这样您就不必在每次部署时都更新操作系统。MS[对要做什么有完整的描述](http://msdn.microsoft.com/en-us/library/windowsazure/gg456324)。

简短版本是打开您的服务配置 (.csfg) 文件并更新`ServiceConfiguration`节点，使其包含元素`osFamily="2"`以及`osVersion="*"`例如：

```
<ServiceConfiguration serviceName="MyCloudProject" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceConfiguration" osFamily="2" osVersion="*"> 
```

# actionscript-3 - 使用 SoundMixer.stopAll() 后如何重新激活来自 youtube 的声音？

> ID：10988771
> 
> 赞同：1
> 
> 时间：2012-06-11T23:32:01.733
> 
> 标签：actionscript-3, audio, youtube, flash-cs5, frame

我有一个在特定帧中播放的 youtube 视频。经过大量研究并且在退出帧时无法正确销毁播放器后，我决定在所有帧中放置一个 SoundMixer.stopAll() 可用于从 youtube 中退出。这在大多数情况下都是正确的，因为要再次访问视频，我必须单击一个重新加载播放器的按钮，然后一切都会重新开始。但是我在页面右侧有一些拇指，当点击打开一个大图像时，占据了大部分页面并且没有显示视频按钮，但它们本身有一个关闭按钮。当我单击关闭按钮时，movieclip 变得不可见，而带有 youtube 视频的那个又变得可见（在所有其他情况下都很棒）。重点是：播放器一直在后台播放，当我关闭图像时，您可以看到它再次播放，但没有声音。使声音再次可听的唯一方法是单击搜索栏（因为它本身不是 Flash 组件，与播放/暂停按钮不同）或转到另一帧（不是拇指/图像中的帧）和回来。进入框架时如何使声音再次自动播放？也欢迎在退出框架时帮助摧毁玩家。进入框架时如何使声音再次自动播放？也欢迎在退出框架时帮助摧毁玩家。进入框架时如何使声音再次自动播放？也欢迎在退出框架时帮助摧毁玩家。

# ruby-on-rails - 抽象数据库和适当的控制器实现

> ID：10988774
> 
> 赞同：0
> 
> 时间：2012-06-11T23:32:24.853
> 
> 标签：ruby-on-rails, ruby, architecture, abstraction

我正在使用 MongoDB 作为我的项目的后端，但我并不特别希望在项目的生命周期中依赖 Mongo，以防我以后决定更改它，或者如果没有数据库的情况下单元测试更容易。然而，正如所写，我的控制器严格依赖于 MongoDB。

主要取自[MongoDB 教程](http://api.mongodb.org/ruby/current/file.TUTORIAL.html)，我在一个`config/initializers/mongo.rb`文件中有以下内容。

```
MongoMapper.connection = Mongo::Connection.new('localhost')
MongoMapper.database = 'database'

if defined?(PhusionPassenger)
   PhusionPassenger.on_event(:starting_worker_process) do |forked|
     MongoMapper.connection.connect if forked
   end
end 
```

在用于查询美国各州的控制器中，我有以下代码：

```
class StateController < ApplicationController
    def index
        states = MongoMapper.connection.db('database').collection('state').find()

        render :json => states
    end
end 
```

我马上就看到了一些问题（可能还有更多）：

1.  如前所述，控制器对 MongoDB 有硬依赖。
2.  我没有使用`database`MongoMapper 类的属性（它在控制器中硬编码）。
3.  每次我想要引用状态集合时，我不一定要通过 HTTP 端点——尽管我想保持这个选项可用。例如，如果注册页面有一个下拉列表供用户选择他们的家庭状态，那么要求客户端 jQuery.get() 填充状态列表似乎是愚蠢的。在我看来，在服务器端预先获取状态并在服务器上构建下拉列表会更有意义。

对于#3，我当然可以在任何呈现需要状态列表的视图的操作方法中查询状态并将它们保存在@states（或类似的东西）中，但这将是很多重复的代码。

构建它以减少耦合和更多代码重用的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:00:50.700

首先，您应该有一个状态模型：

```
class State
  include MongoMapper::Document
end 
```

然后，在您的控制器中，您应该通过以下方式访问：

```
class StatesController < ApplicationController
  def index
    render :json => State.all
  end
end 
```

这样，您的控制器就不知道它正在使用什么底层数据存储。

最后，为了减少进行 HTTP 调用的需要，但假设您使用 javascript 构建它，您编写以下代码：

```
<div id="#states" data-states="<%= @states.to_json %>"></div> 
```

然后从`$("#states").data("states")`

# javascript - RightJS 灯箱插件在 IE 中不起作用

> ID：10988776
> 
> 赞同：0
> 
> 时间：2012-06-11T23:32:52.063
> 
> 标签：javascript, jquery, internet-explorer, lightbox, rightjs

我正在为 Lightbox 使用 RightJS Lightbox 插件来显示内联 HTML 数据。它在 FF 和 Chrome 中完美运行，但可惜 IE 是不行的。我昨天让它工作了很短的时间，并试图追溯我的步骤无济于事。

这是适用代码的链接：http: [//jsfiddle.net/jmarcello/QuwfE/](http://jsfiddle.net/jmarcello/QuwfE/)。完整版也可以在这里查看：[http ://www.buenolisto.com/alma](http://www.buenolisto.com/alma)

一个简单优雅的修复将不胜感激。或者，如果有人有另一个轻量级解决方案，它提供了一个支持内联 HTML 的灯箱，那就太好了。

通过轻量级，我想我的意思是使用最少的文件，最好不必连接到另一个样式表，这就是我喜欢 RightJS 解决方案的原因。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:48:50.513

完美运行[http://jsfiddle.net/YHwyr/](http://jsfiddle.net/YHwyr/)，您似乎链接断开，它没有从您的站点下载 right.js

# php - php - 如果使用 https 访问站点，则包含不同的文件

> ID：10988778
> 
> 赞同：0
> 
> 时间：2012-06-11T23:32:54.243
> 
> 标签：php, file, https, include

我有一个安装了 ssl 证书的站点，但没有它也可以访问它。到目前为止，我已经使用：在我的页面上，但现在如果使用 https 访问站点，我需要有一些选项来显示不同的文件。示例：如果使用 http: 来显示 如果使用 https: 来显示。

这可能吗？感谢您的任何回复。绅士。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T23:36:05.493

您可以使用以下命令检查 https

```
if (isset($_SERVER["HTTPS"]) AND $_SERVER["HTTPS"] == "on") {
    include("file1.php");
}
else {
    include("file2.php");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T23:36:24.843

您可以检查[$_SERVER['HTTPS']](http://php.net/manual/en/reserved.variables.server.php)是否为非空：

```
if(!empty($_SERVER['HTTPS']))
    include 'https.php';
else
    include 'http.php'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T23:36:19.273

如果您通过 HTTPS 访问，则应设置 $_SERVER['HTTPS']（尽管这取决于服务器配置）。

您还可以检查正在使用的端口：

```
if($_SERVER['SERVER_PORT']==443){
} 
```

这些都不适用于所有可能的配置（例如在负载均衡器后面），但它们应该在简单的设置中工作。

# delphi - 存储 Delphi 接口引用时的奇怪 AV

> ID：10988787
> 
> 赞同：6
> 
> 时间：2012-06-11T23:34:17.933
> 
> 标签：delphi, pointers, interface, access-violation

我在以下代码中收到意外的访问冲突错误：

```
program Project65;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  SysUtils;

type
  ITest = interface
  end;

  TTest = class(TInterfacedObject, ITest)
  end;

var
  p: ^ITest;

begin
  GetMem(p, SizeOf(ITest)); 
  p^ := TTest.Create; // AV here
  try
  finally
    p^ := nil;
    FreeMem(p);
  end;
end. 
```

我知道接口应该以不同的方式使用。但是，我正在研究使用这种方法的遗留代码库。而且我很惊讶地看到保留 SizeOf(ITest) 内存来放置 ITest 是不够的。

现在有趣的是，如果我将第一行更改为

```
GetMem(p, 21); 
```

比AV消失了。（20 字节或更少失败）。对此有何解释？

（我正在使用 Delphi XE2 Update 4 + HotFix）

请不要评论代码有多可怕或建议如何正确编码。请回答为什么需要保留 21 个字节而不是 SizeOf(ITest) = 4？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-12T00:40:31.320

您有效编写的是在幕后执行以下逻辑：

```
var
  p: ^ITest;
begin
  GetMem(p, SizeOf(ITest));
  if p^ <> nil then p^._Release; // <-- AV here
  PInteger(p)^ := ITest(TTest.Create);
  p^._AddRef;
  ...
  if p^ <> nil then p^._Release;
  PInteger(p)^ := 0;
  FreeMem(p);
end; 
```

`GetMem()`不能保证将其分配的内容归零。当您将新对象实例分配给接口变量时，如果字节不为零，RTL 将认为已经存在接口引用并尝试调用其`_Release()`方法，从而导致 AV，因为它没有由真实对象支持实例。您需要事先将分配的字节清零，然后 RTL 将看到一个`nil`接口引用，并且不再尝试调用其`_Release()`方法：

```
program Project65;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  SysUtils;

type
  ITest = interface
  end;

  TTest = class(TInterfacedObject, ITest)
  end;

var              
  p: ^ITest;              

begin              
  GetMem(p, SizeOf(ITest));               
  try
    FillChar(p^, SizeOf(ITest), #0); // <-- add this!
    p^ := TTest.Create; // <-- no more AV
    try
      ...
    finally
      p^ := nil;
    end;
  finally
    FreeMem(p);
  end;
end. 
```

# asp.net - 如何在母版页中引用literalControl？

> ID：10988788
> 
> 赞同：1
> 
> 时间：2012-06-11T23:34:20.577
> 
> 标签：asp.net, master-pages

我在母版页中有一个文字控件，我想从子页面中找到并填充它，但它总是返回 null

```
[MasterPage]
  <asp:Literal ID="litStreamHtml" runat="server" />

[Child Page]
    LiteralControl litStreamHtml = Master.FindControl("litStreamHtml") as LiteralControl;
    litStreamHtml.Text = "some text"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T15:53:42.987

呃...问题是我使用的是 LiteralControl，而不是 Literal。我不知道有什么不同。

```
Literal litStreamHtml = (Literal)this.Master.FindControl("litStreamHtml");
    litStreamHtml.Text = "some text"; 
```

# javascript - 人们为什么要添加他们的javascript代码？

> ID：10988791
> 
> 赞同：0
> 
> 时间：2012-06-11T23:35:02.450
> 
> 标签：javascript

我记得几年前读过一些关于它的东西，但我不记得了。

是否与 IE 有关并将其解析为纯文本...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T23:37:15.650

我想你的意思是 CDATA

[来源](http://javascript.about.com/library/blxhtml.htm)

> 这修复了验证器。问题是一些较旧的网络浏览器不理解 CDATA 标记，因此这会破坏您在这些网络浏览器中的 Javascript。幸运的是，Javascript 多行注释以不会导致验证错误的字符开始和结束。因此，就 Web 浏览器中的 Javascript 处理器而言，我们可以注释掉 CDATA 标记，而就验证器而言，仍将 Javascript 内容定义为 CDATA。我们这样做：

```
<script type="text/javascript">
/* <![CDATA[ */
// content of your Javascript goes here
/* ]]> */
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T23:39:27.563

HTML 注释标签`<!--`，`-->`应该在 JavaScript 周围添加，以防止不理解 JS 的旧浏览器将其显示为文本。最好将 JavaScript 的“comment to end of line”字符`//`放在结束 HTML 注释标记的前面，这样 JavaScript 就不会将其解释为代码。从技术上讲，不了解 JS 的浏览器*极为*罕见*，*但它不会造成任何伤害，总共可能会花费 15 个字节。

最后，我通常会做这样的事情，主要是出于习惯：

```
<script type="text/javascript">
<!--
var scriptHere="whatever";
//-->
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T23:39:55.897

我会在这里大胆猜测......你的意思是这样的：

```
<script type="text/javascript">//<![CDATA[
function doStuff() {
    alert('Yadayadayada');
}
//]]></script> 
```

（变体包括`<!--`第一行和`//-->`最后一行， JavaScript 中的*行*注释`<!--`也是如此。）

 *它可能与将其解释为文本的旧浏览器有关，但在这方面，您绝对不必再担心它了。

另一部分是有效性。`<`例如，JavaScript中`>`用于比较和AND 操作的某些字符`&`不是有效的 XML。将它们放在 CDATA 块中使它们有效。但是，我不知道任何浏览器会因此而导致问题。

当然，处理这个问题的最好方法是使用以下链接链接到外部脚本`src`：

```
<script type="text/javascript" src="scripts/whatever.js"> </script> 
```

它很好地将内容与行为分开，整理你的标记，利用缓存和并行下载，让你不用担心这样的事情。*

# html - 如何对复杂记录的行进行 HTML 布局？

> ID：10988795
> 
> 赞同：0
> 
> 时间：2012-06-11T23:35:57.390
> 
> 标签：html, css, css-tables

我想显示一个复杂记录的列表，并试图简单地将其放入表格中似乎效果不佳。

我想要这样的布局：

![小样](../Images/f65f831e997bf508303f7d610eccfd45.png)

每条整条记录都可以放入一个表格单元格（每行一个单元格），然后我可以`<div>`在每个单元格中使用标签。将 div 放入表格单元格是否可能导致显示问题？无论如何，它可以简单地用 div 完成，所以也许这是一个坏主意。

在每条记录中，都有相当多的组件。如果我用 div 布置这些，我需要做些什么来确保每个标签/值对都处于正确的位置？还是有更好的方法来确保布局一致？

显然，每条记录的值都会不同，因此为了保持一致的外观，我需要将标签全部垂直排列。

如果这个问题看起来有点模糊，那是因为我对如何做的理解是模糊的......即使是澄清问题的一些帮助也会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:41:30.160

在表格单元格中使用 div 很好。不应该引起问题。

虽然看着你的模型，但从语义上讲，我会说它不是一张桌子。没有列、列标题等。

它看起来更像是一个包含更多细节的项目列表。

我会使用带有 li 和 div 的 ul 来进一步布局。

此外，如果您需要完全一样的 ID，您可以在每个 li 中使用一个图例元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T04:17:46.590

如果您正在查看 HTML 5，[文章标签](http://html5doctor.com/the-article-element/)可能适合此处。您拥有“作者元素”这一事实似乎使其非常适合。如果您不看 HTML 5，只需使用 a`div`而不是`article`. 或者正如@Moin Zaman 在下面的示例中提到的使用`ul`和使用`li`代替`article`。

至于确保您的标签等垂直排列，这很容易实现。只需通过 css 显式设置宽度。

这是一个简单的例子：

**HTML**

```
<article>
    <h2>ID: 123</h2>
    <div class="actions">
        <input type="button" value="Do Someting" />  
        <input type="button" value="Do Someting Else" />  
        <input type="button" value="And Maybe something Else" />  
    </div>
    <div class="description">A fairly long description that takes up basically the entire width of the section, maybe even longer still</div>
    <div class="details">
        <div class="author"><span>Author:</span>Douglas Adams</div>
        <div class="created"><span>Created:</span>1 Jan 2012</div>
        <div class="label first"><span>Label 1:</span>Value</div>
        <div class="label"><span>Label 2:</span>Value</div>
        <div class="label"><span>Label 3:</span>Value</div>
        <div style="clear:both; line-height:0px;">&nbsp;</div><!-- Use A Clear Fix Instead of this, I got Lazy!! -->
    </div>
</article> 
```

**CSS**

```
article
{
    border: solid 2px black;
    margin:20px;
    padding:5px;
    position:relative;
}

article h2
{
    background:#FFF;
    padding:5px 8px;
    position:relative;
    top:-15px;
    left:5px;
    display:inline;
}

article .actions
{
    float:right;
    width:25%;
    text-align:right;    
    position:relative;
}

article .actions input
{
    display:block;
    float:right;
    clear:both;
}

article .details
{
    position:releative;
    width:70%;
}

.author
{
    float:left;
    width:60%;
}

.created
{
    float:left;
    width:40%
}

.label
{
    float:left;
    width:30%;    
}    

.label span, .author span, .created span
{
    font-weight:bold;
    padding-right:3px;
} 
```

看到[这个小提琴](http://jsfiddle.net/z2fAx/2/)

**注意：**使用[清除修复](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)而不是清除 div。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T04:53:28.817

这样的事情怎么样。

HTML

```
<div>
    <span class="label">ID 345</span>
<table>
<tr>
    <td class="desc" colspan="3">A fairly long description that takes up basically the entire width of the section, maybe even longer still</td>
    <td rowspan="3" class="doStuff">Do Something<br />Do another thing<br />Maybe 1 more thing</td>
</tr>
<tr>
    <td class="author"colspan="2"><span>Author: </span>Joe Bloggs</td>
    <td class="created"><span>Created: </span>19th June 2012</td>
</tr>
<tr>
    <td class="label3"><span>Label 3: </span>Value</td>
    <td class="label4"><span>Label 4: </span>Value</td>
    <td class="label5"><span>Label 5: </span>Value</td>
</tr>
</table>
</div>​ 
```

CSS

```
div{
    margin:17px 10px;
    border:2px solid #000;
}
span.label{
    background:#FFF;
    padding:5px 8px;
    position:relative;
    top:-10px;
    left:5px;
}
table{
    width:100%;
}
tr{
    background:#ccc;
}
td{
    padding:5px 7px;
}
span{
    font-weight:bold;
} 
```

[jsFiddle - http://jsfiddle.net/QActK/](http://jsfiddle.net/QActK/)

# css - CSS中的神秘底部填充

> ID：10988798
> 
> 赞同：1
> 
> 时间：2012-06-11T23:36:23.563
> 
> 标签：css

请看[这里](http://www.mossoreviews.com/57-nikon-d5100-16-2mp-cmos-digital-slr-camera-review/)，在帖子的最后，来自 gravatar.com 的 70px 作者图片有一个神秘的底部填充，使得底部填充比顶部、左侧和右侧的要宽得多。

我查看了所有 3 个浏览器，FF11、Chrome 和 IE9，它们都出现了同样的问题。我找不到 Firebug 的罪魁祸首。额外的*填充*不是任何填充或边距！

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:44:03.400

尝试将 a 设置`height`为 Gravatar 包装器`div`- [http://jsfiddle.net/AMf5N/1/](http://jsfiddle.net/AMf5N/1/)

```
#post-author .profile-image {
    background: none repeat scroll 0 0 #F6F6F6;
    border: 2px solid #fff;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    float: left;
    height: 70px; /* add this */
    margin: 0 15px 5px 0;
    padding: 5px;
} 
```

或`float`图像 - [http://jsfiddle.net/AMf5N/](http://jsfiddle.net/AMf5N/)

# php - 为什么此代码会生成通知：未定义索引？

> ID：10988803
> 
> 赞同：1
> 
> 时间：2012-06-11T23:36:52.210
> 
> 标签：php

这段代码不漂亮，但我想从表中打印出最后生成的自动增量 ID`studentcourseplan`

```
<?php
session_start();
if (!isset($_SESSION['session_username']) ) { header ("Location: login.php");exit;} //If user in not signed in, redirect to login page

include("dbconfig.php");

if (isset($_POST['course_id'])) {

    $course_id = $_POST['course_id'];
    $student_id = $_POST['student_id'];
    $start_date = $_POST['start_date'];
    $end_date = $_POST['end_date'];

    $studentcourseplan_update = mysql_query("
    INSERT INTO studentcourseplan (student_id,cpl_startdate, cpl_enddate, cpl_coursename, cpl_pricevalue)
      SELECT '$student_id','$start_date', '$end_date', course_name, price_value
        FROM courses c
        INNER JOIN pricegroups p ON p.price_id = c.course_price_id
      WHERE c.course_id = '$course_id'");

    $result = mysql_query("SELECT LAST_INSERT_ID() FROM studentcourseplan");
    $row = mysql_fetch_assoc($result);
    $cpl_id = $row['cpl_id'];

    $studentcourseplanelements_update = mysql_query("
    INSERT INTO studentcourseplanelements (scpe_cpl_id, scpe_name, scpe_days)
      SELECT LAST_INSERT_ID(), cp.plan_name, cp.plan_time FROM courses c
        INNER JOIN course_to_plan cpl   ON cpl.course_id = c.course_id
        INNER JOIN courseplans cp       ON cp.plan_id = cpl.plan_id
    WHERE cpl.course_id = '$course_id'");

    $courseinfo = mysql_query("SELECT * FROM studentcourseplan WHERE cpl_id = '$cpl_id'") or die(mysql_error());

    if ($studentcourseplan_update === true) {

        while ($result = mysql_fetch_assoc($courseinfo)) {
            echo $result['cpl_id'];
        }

    } else if ($studentcourseplan_update === false){
        echo "Kunde inte uppdatera.";
    }
}
?> 
```

它在第 24 行抱怨：

```
$cpl_id = $row['cpl_id']; 
```

我得到：

> 未定义索引：第 24 行 \Path\To\Page.php 中的 cpl_id

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T23:40:00.343

因为您只`LAST_INSERT_ID()`在第一个选择查询中选择了：

```
$result = mysql_query("SELECT LAST_INSERT_ID() FROM studentcourseplan");
$row = mysql_fetch_assoc($result);
// Doesn't exist, only $row['LAST_INSERT_ID()']
$cpl_id = $row['cpl_id'];
// Probably you meant
$cpl_id = $row['LAST_INSERT_ID()']; 
```

### 但以上是不必要的。

相反，您可以只调用[`mysql_insert_id()`](http://php.net/manual/en/function.mysql-insert-id.php)而不是执行查询来检索它。

```
$cpl_id = mysql_insert_id(); 
```

### 安全注意事项：

您的查询容易受到当前形式的 SQL 注入的影响。确保调用`mysql_real_escape_string()`所有`$_POST`用作查询输入的变量。

```
$course_id = mysql_real_escape_string($_POST['course_id']);
$student_id = mysql_real_escape_string($_POST['student_id']);
$start_date = mysql_real_escape_string($_POST['start_date']);
$end_date = mysql_real_escape_string($_POST['end_date']); 
```

从长远来看，建议从`mysql_*()`函数中迁移出来，而是学习使用更现代的 API 来支持准备好的语句，如 PDO 或 MySQLi。

# javascript - 谷歌地图禁用用户平移所有事件

> ID：10988807
> 
> 赞同：24
> 
> 时间：2012-06-11T23:37:30.990
> 
> 标签：javascript, google-maps, google-maps-api-3

在我的谷歌地图应用程序中，我有一个跟随移动标记的跟随方法。当它跟随时，我想允许通过所有常用方法（dblclick、dblleftclick、鼠标滚轮和触摸事件）进行缩放，并且我想禁用任何类型的平移。问题是在使用鼠标滚轮和 dblclick 进行缩放时，地图会平移到鼠标的位置。我可以很好地禁用一切，但我想允许缩放。我已经通过使用 jquery 鼠标滚轮插件并使用 delta 更改缩放来解决鼠标滚轮问题。

有没有一些简单的方法可以做到这一点，还是我必须为所有不同的触摸和鼠标事件编写一个监听器？

编辑

我已经禁用了双击、鼠标滚轮缩放和拖动，但我希望双击功能仍然存在。我也想要那里的触摸事件，但我想让它们从中心而不是从事件发生的地方缩放。真正的问题是复制谷歌已经处理的事件但稍微改变了功能

```
var options = {
    disableDoubleClickZoom: true,
    draggable: false,
    scrollwheel: false,
    panControl: false
};

this.map = new google.maps.Map(document.getElementById('map'), options); 
```

我理想的解决方案是，如果有一个`disableDoubleClickPan`and`disableScrollwheelPan`或`draggable`选项实际可以防止任何形式的所有拖动

编辑

这适用于所有设备，台式机和移动设备。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-12-17T23:26:06.347

这是我的做法：

```
var options = {
    draggable: false,
    scrollwheel: false,
    panControl: false,
    maxZoom: Zoom,
    minZoom: Zoom,
    zoom: Zoom,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}; 
```

如您所见，将 maxZoom 和 minZoom 设置为相同的值有助于阻止用户的双击事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T23:36:38.137

我最终选择了多种选择。首先，我必须覆盖发生的桌面事件以获得我的结果（触摸、双击、双击左键和鼠标滚轮）。

在触摸屏设备上，当触摸超过两次时，我暂停了对标记的所有更新。这意味着缩放操作时任何捏合事件都不会跳跃。

在普通的网络桌面设备上，我禁用了地图上的缩放和双击事件，并重写了我自己的事件处理程序。

为了区分它们，我检查了窗口对象中的 ontouchstart 事件。

```
function setDraggable(draggable) {
    if ("ontouchend" in document) {
        return;
    }
    var options = {
        draggable: draggable, 
        panControl: draggable, 
        scrollwheel: draggable 
    };
    this.map.setOptions(options);
}, 
```

由于以下几个原因，`zoom_changed`或事件不是真正的选择：`idle`

1.  该`idle`事件仅在地图空闲时才被调用，并且我正在做的动画量从未被调用过。
2.  每一步的动画都会在随后的标记上重新定位地图，因此`zoom_changed`事件将在动画帧之前调用重新定位器。
3.  由于动画的数量，不平移到中心的想法是减少动画帧并提高性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T08:07:09.153

虽然可能会争辩说双击地图或滚轮缩放地图不需要考虑鼠标位置（因为您正在对地图对象而不是地图上的位置进行操作），但捏到缩放*总是*位置相关，因为您在物理上围绕某个位置拉伸或挤压地图。改变这种行为显然是不直观的。

在这种情况下，您应该听`zoom_changed`或`idle`然后平移地图以重新定位它，以便用户可以看到正在发生的事情。

您*甚至可以*使用这些事件来处理默认的双击或鼠标滚轮行为，这样很明显您正在更改用户通常拥有的控制级别。

# google-chrome - 如何在 chrome 扩展中执行脚本？什么时候改变内容？

> ID：10988809
> 
> 赞同：1
> 
> 时间：2012-06-11T23:37:47.393
> 
> 标签：google-chrome, google-chrome-extension

我想在网页内容更新时执行 chrome 脚本（例如 Facebook）

那么我应该使用什么方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T23:42:22.097

You can use

```
$("body").bind("DOMSubtreeModified", function() {
    alert("something changed");
}); 
```

Note: `DOMSubtreeModified` is [deprecated](http://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMSubtreeModified)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:23:21.493

如前所述`sachleen`，您可以使用[`DOMSubtreeModified`](https://developer.mozilla.org/en/DOM/DOM_event_reference)侦听器

```
document.addEventListener("DOMSubtreeModified", methodToRun); 
```

请注意，[`Mutation Events`](https://developer.mozilla.org/en/DOM/Mutation_events)这些性能猪实际上并不能很好地驯服（它们过于频繁地触发并大大降低了页面速度）。因此，它们已在一年多前被弃用，仅在真正需要时才应使用。然而，他们工作。

如果你想要这个 Chrome 扩展，你可以使用[`Mutation Observers`](https://developer.mozilla.org/en/DOM/DOM_Mutation_Observers)DOM Level 4 中的新的和闪亮的（点击那里的链接，他们解释了很多！）。在`DOMSubtreeModified`触发一千次的情况下，`MutationObserver`只触发一次，所有修改都包含在内且可访问。

适用于（截至 2012/06 年）：

*   Chrome 18+（前缀，`window.WebKitMutationObserver`）
*   Firefox 14+（无前缀）
*   WebKit 夜班

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:22:28.953

你应该用 chrome.* API 试试：

```
chrome.tabs.onUpdated.addListener(
    function(integer tabId, object changeInfo, Tab tab) {
     //your code
}); 
```

有关文档，请参见此处：

[http://code.google.com/chrome/extensions/tabs.html#event-onUpdated](http://code.google.com/chrome/extensions/tabs.html#event-onUpdated)

它应该适用于（AJAX）请求等更新......

# javascript - 使用 JavaScript 更改 JQuery 所见即所得编辑器的内容

> ID：10988813
> 
> 赞同：1
> 
> 时间：2012-06-11T23:38:02.407
> 
> 标签：javascript, jquery, jwysiwyg

我想使用 jquery 将值放在 textarea 中。我正在使用以下代码。它不工作。

```
 <link rel="stylesheet" href="css/jquery.wysiwyg.css" type="text/css" />
   <script type="text/javascript" src="js/jquery.wysiwyg.js"></script>
    <script type="text/javascript">
    function wedit(topic){
    $("#wysiwyg").html(topic);  
    alert(id+topic+instructor+date+video);
   }
 </script>
 <form name="theform" action="" method="post">
 <table border="0" cellpadding="10" cellspacing="10" width="680px">
 <tr><td width="150">Topic:</td><td><span id="wtopic">
  <textarea name="wysiwyg" id="wysiwyg" ></textarea></span></td></tr>
  <tr><td></td><td><input type="submit" name="submit" value="Save" 
  title="Save" /></td>  </tr>
  </table>
 </form> 
```

它在文本的情况下工作，但在 textarea 的情况下它显示为空值。请让我知道如何通过 jquery 或 javascript 将文本放入 textarea 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:53:37.717

[http://code.google.com/p/jwysiwyg/wiki/Introduction](http://code.google.com/p/jwysiwyg/wiki/Introduction)

首先，维基有你需要的一切。不知道你的问题是什么 buuuuuuuuuuuuut....

**获取内容** 您可以使用 jquery 中的 .val() 方法获取 textarea 内容

```
$('#wysiwyg').val(); 
```

**内容操作** 如果要操作 jwysiwyg textarea 内容，可以使用以下方法

插入图像 在文本指示器上插入图像

```
$('#wysiwyg').wysiwyg('insertImage', 'http://domain.com/image.png'); 
```

**插入** 链接 在选定文本上插入链接

```
$('#wysiwyg').wysiwyg('createLink', 'http://google.com/'); 
```

如果这不能回答您的问题，我知道我有一个原型尖峰放置在这里的某个地方，其中包含 jquery.wysiwyg.js。

**编辑**在这里要先发制人，但是...请记住， init 之后的 jwysiwyg 不再像原始文本框那样起作用，如果要注入 HTML，则必须在 .wysiwyg(...) init 调用之前执行此操作。请忽略 MVC @Url.Content(...) 方法。你应该能够从下面得到你需要的东西。

```
<link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/jwysiwyg/jquery.wysiwyg.css")" />
<script type="text/javascript" src="@Url.Content("~/Content/jwysiwyg/jquery.wysiwyg.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Content/jwysiwyg/controls/wysiwyg.link.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Content/jwysiwyg/controls/wysiwyg.table.js")"></script>

<script type="text/javascript">
    $(function(){
        $('#wysiwyg').wysiwyg({
            initialContent: "**INITIAL CONTENT HERE IF YOU WANT TO INJECT SOMETHING AT INIT TIME**",
            css: "@Url.Content("~/Content/comments.css")?upd=00000002",
            controls: {
                bold: { visible: true },
                italic: { visible: true },
                underline: { visible: true },
                strikeThrough: { visible: true },

                insertImage: { visible: false },

                justifyLeft: { visible: true },
                justifyCenter: { visible: true },
                justifyRight: { visible: true },
                justifyFull: { visible: true },

                indent: { visible: true },
                outdent: { visible: true },

                subscript: { visible: true },
                superscript: { visible: true },

                undo: { visible: true },
                redo: { visible: true },

                insertOrderedList: { visible: true },
                insertUnorderedList: { visible: true },
                insertHorizontalRule: { visible: true },
                cut: { visible: true },
                copy: { visible: true },
                paste: { visible: true },
                html: { visible: false },
                increaseFontSize: { visible: true },
                decreaseFontSize: { visible: true },

                h1: { visible: false },
                h2: { visible: false },
                h3: { visible: false },
                exam_html: { visible: false }
            },
            events: {
                click: function (event) {

                }
            }
        });
    });
</script>

<textarea rows="10" cols="100" id="wysiwyg" name="@Model.FormName">
    <!-- HTML GOES HERE -->
</textarea> 
```

**编辑#2**

请记住，在您初始化控件之后，就像所有 JQuery UI 控件一样，您现在必须通过控件本身向您公开的 API 进行操作。在这种情况下，它是 $("#YourTextArea").wysiwyg("method","arguments");

您可以在 JQuery.WYSIWYG 控件上执行的操作的完整列表很容易在与工具栏名称匹配的 JS 文件中找到，但如果您想要它们（我不会仔细检查并清理列表，抱歉造成混乱，但您'必须阅读第一代缩进来收集方法名称）

```
bold: {
            groupIndex: 0,
            visible: true,
            tags: ["b", "strong"],
            css: {
                fontWeight: "bold"
            },
            tooltip: "Bold",
            hotkey: { "ctrl": 1, "key": 66 }
        },

        copy: {
            groupIndex: 8,
            visible: false,
            tooltip: "Copy"
        },

        createLink: {
            groupIndex: 6,
            visible: true,
            exec: function () {
                var self = this;
                if ($.wysiwyg.controls && $.wysiwyg.controls.link) {
                    $.wysiwyg.controls.link.init(this);
                } else if ($.wysiwyg.autoload) {
                    $.wysiwyg.autoload.control("wysiwyg.link.js", function () {
                        self.controls.createLink.exec.apply(self);
                    });
                } else {
                    console.error("$.wysiwyg.controls.link not defined. You need to include wysiwyg.link.js file");
                }
            },
            tags: ["a"],
            tooltip: "Create link"
        },

        unLink: {
            groupIndex: 6,
            visible: true,
            exec: function () {
                this.editorDoc.execCommand("unlink", false, null);
            },
            tooltip: "Remove link"
        },

        cut: {
            groupIndex: 8,
            visible: false,
            tooltip: "Cut"
        },

        decreaseFontSize: {
            groupIndex: 9,
            visible: false,
            tags: ["small"],
            tooltip: "Decrease font size",
            exec: function () {
                this.decreaseFontSize();
            }
        },

        h1: {
            groupIndex: 7,
            visible: true,
            className: "h1",
            command: ($.browser.msie || $.browser.safari) ? "FormatBlock" : "heading",
            "arguments": ($.browser.msie || $.browser.safari) ? "<h1>" : "h1",
            tags: ["h1"],
            tooltip: "Header 1"
        },

        h2: {
            groupIndex: 7,
            visible: true,
            className: "h2",
            command: ($.browser.msie || $.browser.safari) ? "FormatBlock" : "heading",
            "arguments": ($.browser.msie || $.browser.safari) ? "<h2>" : "h2",
            tags: ["h2"],
            tooltip: "Header 2"
        },

        h3: {
            groupIndex: 7,
            visible: true,
            className: "h3",
            command: ($.browser.msie || $.browser.safari) ? "FormatBlock" : "heading",
            "arguments": ($.browser.msie || $.browser.safari) ? "<h3>" : "h3",
            tags: ["h3"],
            tooltip: "Header 3"
        },

        highlight: {
            tooltip: "Highlight",
            className: "highlight",
            groupIndex: 1,
            visible: false,
            css: {
                backgroundColor: "rgb(255, 255, 102)"
            },
            exec: function () {
                var command, node, selection, args;

                if ($.browser.msie || $.browser.safari) {
                    command = "backcolor";
                } else {
                    command = "hilitecolor";
                }

                if ($.browser.msie) {
                    node = this.getInternalRange().parentElement();
                } else {
                    selection = this.getInternalSelection();
                    node = selection.extentNode || selection.focusNode;

                    while (node.style === undefined) {
                        node = node.parentNode;
                        if (node.tagName && node.tagName.toLowerCase() === "body") {
                            return;
                        }
                    }
                }

                if (node.style.backgroundColor === "rgb(255, 255, 102)" ||
                        node.style.backgroundColor === "#ffff66") {
                    args = "#ffffff";
                } else {
                    args = "#ffff66";
                }

                this.editorDoc.execCommand(command, false, args);
            }
        },

        html: {
            groupIndex: 10,
            visible: false,
            exec: function () {
                var elementHeight;

                if (this.options.resizeOptions && $.fn.resizable) {
                    elementHeight = this.element.height();
                }

                if (this.viewHTML) { //textarea is shown
                    this.setContent(this.original.value);

                    $(this.original).hide();
                    this.editor.show();

                    if (this.options.resizeOptions && $.fn.resizable) {
                        // if element.height still the same after frame was shown
                        if (elementHeight === this.element.height()) {
                            this.element.height(elementHeight + this.editor.height());
                        }

                        this.element.resizable($.extend(true, {
                            alsoResize: this.editor
                        }, this.options.resizeOptions));
                    }

                    this.ui.toolbar.find("li").each(function () {
                        var li = $(this);

                        if (li.hasClass("html")) {
                            li.removeClass("active");
                        } else {
                            li.removeClass('disabled');
                        }
                    });
                } else { //wysiwyg is shown
                    this.saveContent();

                    $(this.original).css({
                        width: this.element.outerWidth() - 6,
                        height: this.element.height() - this.ui.toolbar.height() - 6,
                        resize: "none"
                    }).show();
                    this.editor.hide();

                    if (this.options.resizeOptions && $.fn.resizable) {
                        // if element.height still the same after frame was hidden
                        if (elementHeight === this.element.height()) {
                            this.element.height(this.ui.toolbar.height());
                        }

                        this.element.resizable("destroy");
                    }

                    this.ui.toolbar.find("li").each(function () {
                        var li = $(this);

                        if (li.hasClass("html")) {
                            li.addClass("active");
                        } else {
                            if (false === li.hasClass("fullscreen")) {
                                li.removeClass("active").addClass('disabled');
                            }
                        }
                    });
                }

                this.viewHTML = !(this.viewHTML);
            },
            tooltip: "View source code"
        },

        increaseFontSize: {
            groupIndex: 9,
            visible: false,
            tags: ["big"],
            tooltip: "Increase font size",
            exec: function () {
                this.increaseFontSize();
            }
        },

        indent: {
            groupIndex: 2,
            visible: true,
            tooltip: "Indent"
        },

        insertHorizontalRule: {
            groupIndex: 6,
            visible: true,
            tags: ["hr"],
            tooltip: "Insert Horizontal Rule"
        },

        insertImage: {
            groupIndex: 6,
            visible: true,
            exec: function () {
                var self = this;

                if ($.wysiwyg.controls && $.wysiwyg.controls.image) {
                    $.wysiwyg.controls.image.init(this);
                } else if ($.wysiwyg.autoload) {
                    $.wysiwyg.autoload.control("wysiwyg.image.js", function () {
                        self.controls.insertImage.exec.apply(self);
                    });
                } else {
                    console.error("$.wysiwyg.controls.image not defined. You need to include wysiwyg.image.js file");
                }
            },
            tags: ["img"],
            tooltip: "Insert image"
        },

        insertOrderedList: {
            groupIndex: 5,
            visible: true,
            tags: ["ol"],
            tooltip: "Insert Ordered List"
        },

        insertTable: {
            groupIndex: 6,
            visible: true,
            exec: function () {
                var self = this;

                if ($.wysiwyg.controls && $.wysiwyg.controls.table) {
                    $.wysiwyg.controls.table(this);
                } else if ($.wysiwyg.autoload) {
                    $.wysiwyg.autoload.control("wysiwyg.table.js", function () {
                        self.controls.insertTable.exec.apply(self);
                    });
                } else {
                    console.error("$.wysiwyg.controls.table not defined. You need to include wysiwyg.table.js file");
                }
            },
            tags: ["table"],
            tooltip: "Insert table"
        },

        insertUnorderedList: {
            groupIndex: 5,
            visible: true,
            tags: ["ul"],
            tooltip: "Insert Unordered List"
        },

        italic: {
            groupIndex: 0,
            visible: true,
            tags: ["i", "em"],
            css: {
                fontStyle: "italic"
            },
            tooltip: "Italic",
            hotkey: { "ctrl": 1, "key": 73 }
        },

        justifyCenter: {
            groupIndex: 1,
            visible: true,
            tags: ["center"],
            css: {
                textAlign: "center"
            },
            tooltip: "Justify Center"
        },

        justifyFull: {
            groupIndex: 1,
            visible: true,
            css: {
                textAlign: "justify"
            },
            tooltip: "Justify Full"
        },

        justifyLeft: {
            visible: true,
            groupIndex: 1,
            css: {
                textAlign: "left"
            },
            tooltip: "Justify Left"
        },

        justifyRight: {
            groupIndex: 1,
            visible: true,
            css: {
                textAlign: "right"
            },
            tooltip: "Justify Right"
        },

        ltr: {
            groupIndex: 10,
            visible: false,
            exec: function () {
                var p = this.dom.getElement("p");

                if (!p) {
                    return false;
                }

                $(p).attr("dir", "ltr");
                return true;
            },
            tooltip: "Left to Right"
        },

        outdent: {
            groupIndex: 2,
            visible: true,
            tooltip: "Outdent"
        },

        paragraph: {
            groupIndex: 7,
            visible: false,
            className: "paragraph",
            command: "FormatBlock",
            "arguments": ($.browser.msie || $.browser.safari) ? "<p>" : "p",
            tags: ["p"],
            tooltip: "Paragraph"
        },

        paste: {
            groupIndex: 8,
            visible: false,
            tooltip: "Paste"
        },

        redo: {
            groupIndex: 4,
            visible: true,
            tooltip: "Redo"
        },

        removeFormat: {
            groupIndex: 10,
            visible: true,
            exec: function () {
                this.removeFormat();
            },
            tooltip: "Remove formatting"
        },

        rtl: {
            groupIndex: 10,
            visible: false,
            exec: function () {
                var p = this.dom.getElement("p");

                if (!p) {
                    return false;
                }

                $(p).attr("dir", "rtl");
                return true;
            },
            tooltip: "Right to Left"
        },

        strikeThrough: {
            groupIndex: 0,
            visible: true,
            tags: ["s", "strike"],
            css: {
                textDecoration: "line-through"
            },
            tooltip: "Strike-through"
        },

        subscript: {
            groupIndex: 3,
            visible: true,
            tags: ["sub"],
            tooltip: "Subscript"
        },

        superscript: {
            groupIndex: 3,
            visible: true,
            tags: ["sup"],
            tooltip: "Superscript"
        },

        underline: {
            groupIndex: 0,
            visible: true,
            tags: ["u"],
            css: {
                textDecoration: "underline"
            },
            tooltip: "Underline",
            hotkey: { "ctrl": 1, "key": 85 }
        },

        undo: {
            groupIndex: 4,
            visible: true,
            tooltip: "Undo"
        },

        code: {
            visible: true,
            groupIndex: 6,
            tooltip: "Code snippet",
            exec: function () {
                var range = this.getInternalRange(),
                    common = $(range.commonAncestorContainer),
                    $nodeName = range.commonAncestorContainer.nodeName.toLowerCase();
                if (common.parent("code").length) {
                    common.unwrap();
                } else {
                    if ($nodeName !== "body") {
                        common.wrap("<code/>");
                    }
                }
            }
        },

        cssWrap: {
            visible: false,
            groupIndex: 6,
            tooltip: "CSS Wrapper",
            exec: function () {
                $.wysiwyg.controls.cssWrap.init(this);
            }
        } 
```

现在我无法提供其他任何东西;-)

所以在这种情况下，你总是可以这样做： $("#YourTextArea").wysiwyg("paragraph","Your Text"); 或工具栏中的任何其他方法。警告：HTML 不是你想象的那样……所以提前指出这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T23:42:07.550

Though when creating a textarea putting stuff between the `<textarea>` and `</textarea>` tags results in it appearing in the textarea, when reading and writing from/to it in JavaScript, you need to use the `.value="content"` attribute, or in the case of jQuery, `.val("content")`. I see `$("#wysiwyg").html(topic);`, but that should probably be:

```
$("#wysiwyg").val(topic); 
```

# html - 仅使用 HTML（无 Javascript）的 Facebook、Twitter 和 Google +1 按钮

> ID：10988815
> 
> 赞同：15
> 
> 时间：2012-06-11T23:38:27.313
> 
> 标签：html, facebook, url, twitter, google-plus-one

我想知道是否有一种方法可以仅使用 HTML 为 Facebook、Twitter 和 Google +1 创建“共享”按钮，而无需在任何时候将任何 Javascript 插入代码中。

例如，您可以使用下面描述的方法来动态创建这些按钮；然而，他们最终都动态加载了 Javascript 并在幕后创建了自己的代码：

*   [http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)
*   [http://twitter.com/about/resources/buttons](http://twitter.com/about/resources/buttons)
*   [http://www.google.com/webmasters/+1/button/](http://www.google.com/webmasters/+1/button/)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-11T23:38:28.187

以下链接将注册相应的点赞、推文和 +1：

*   [http://www.facebook.com/sharer.php?u=http://example.com](http://www.facebook.com/sharer.php?u=http://example.com)
*   [http://twitter.com/share?url=http://example.com&text=Description](http://twitter.com/share?url=http://example.com&text=Description)
*   [https://plusone.google.com/_/+1/confirm?hl=en&url=http://example.com](https://plusone.google.com/_/+1/confirm?hl=en&url=http://example.com)

这些链接适用于 Wordpress：

*Facebook*

```
<a href="http://www.facebook.com/sharer.php?u=<?php if(is_home()){echo home_url();}else{the_permalink();} ?>" target="_blank" title="Share this page on Facebook">Like</a> 
```

*推特*

```
<a href="http://twitter.com/share?url=<?php if(is_home()){echo home_url();}else{the_permalink();} ?>&text=<?php the_title(); ?>" target="_blank" title="Tweet this page on Twitter">Tweet</a> 
```

*谷歌+1*

```
<a href="https://plusone.google.com/_/+1/confirm?hl=en&url=<?php if(is_home()){echo home_url();}else{the_permalink();} ?>" target="_blank" title="Plus one this page on Google">+1</a> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-24T08:48:05.553

google plus 在上面的例子中不起作用。

我把它用于谷歌加。

```
<div id="custom-google-button">
  <a href="https://plus.google.com/share?&hl=en&url=YOUR_URL_to_share" target="_blank">google+</a>
</div> 
```

在 WordPress 中：

```
<a href="https://plus.google.com/share?hl=en&url=<?php if(is_home()){echo home_url();}else{the_permalink();} ?>" target="_blank" title="Plus one this page on Google">google+</a> 
```

领英：

```
<div id="custom-linkedin-button">
  <a href="http://www.linkedin.com/shareArticle?mini=true&url=YOUR_URL_to_share" target="_blank">Linkedin</a>
</div> 
```

在 WordPress 中：

```
<a href="http://www.linkedin.com/shareArticle?mini=true&url=<?php if(is_home()){echo home_url();}else{the_permalink();} ?>" target="_blank">Linkedin</a> 
```

资料来源：

*   [https://developers.google.com/+/plugins/share/](https://developers.google.com/+/plugins/share/)
*   [https://developer.linkedin.com/documents/share-linkedin](https://developer.linkedin.com/documents/share-linkedin)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-25T14:02:34.390

这是一篇非常有用的文章，它在不使用任何 PHP 的情况下提供了您正在寻找的答案 - [http://www.hanselman.com/blog/AddSocialSharingLinksToYourBlogWithoutWidgetJavaScript.aspx](http://www.hanselman.com/blog/AddSocialSharingLinksToYourBlogWithoutWidgetJavaScript.aspx)

**推特**

```
<a href="https://twitter.com/intent/tweet?url=YOURURLHERE&text=YOURPOSTTITLEHERE&via=YOURTWITTERNAMEHERE">Twitter</a> 
```

**FACEBOOK**

```
<a href="https://facebook.com/sharer.php?u=YOURURLHERE">Facebook</a> 
```

**谷歌+**

```
<a href="https://plus.google.com/share?url=YOURURLHERE">Google+</a> 
```

# node.js - JSLint，全局禁用规则

> ID：10988817
> 
> 赞同：1
> 
> 时间：2012-06-11T23:38:46.810
> 
> 标签：node.js, underscore.js, npm, jslint, use-strict

如果我通过 NPM 全局安装 JSLint，有没有办法在我的应用程序的当前范围内或在我的系统上全局禁用某些规则？

主要问题是悬空下划线问题。我的意思是，当我使用 __dirname 时，主要出现在 node.js 中，但我相信它也会出现在 underscorejs 中。我已经用 jslint 指令忽略了它，但我认为在我使用下划线的每个文件上都需要这样做有点烦人。

就此而言，我是否需要放置“使用严格”；在每个文件的顶部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T06:55:24.483

**考虑使用构建工具进行 lint 配置和自动化。**当您的项目增长时，无论如何您都需要一个。

对于 node.js 项目，我推荐使用 grunt。将 grunt 安装到您的项目中：

```
npm install grunt 
```

Grunt 有一个内置的 lint 任务（[https://github.com/cowboy/grunt/blob/master/docs/task_lint.md](https://github.com/cowboy/grunt/blob/master/docs/task_lint.md)）。

现在创建一个`grunt.js`文件并在那里配置 linting：

```
module.exports = function(grunt) {
  grunt.initConfig({
    lint: {
      all: [
        'app.js',
        'modules/*.js'
      ]
    },
    jshint: {
      options: {
        nomen: false
      }
    }
  });

  grunt.registerTask('default', 'lint');
}; 
```

请注意如何轻松添加多个文件和文件模式并将选项全局应用于所有这些。

现在你可以通过调用来运行 grunt：

```
grunt 
```

请注意，如果您使用[jshint](http://www.jshint.com/)，`nomen`默认情况下是关闭的（[http://www.jshint.com/options/](http://www.jshint.com/options/)）。

# javascript - 检索变量值 - 非输入

> ID：10988822
> 
> 赞同：1
> 
> 时间：2012-06-11T23:39:15.517
> 
> 标签：javascript, jquery

我有一个这样的 PHP 文件：

```
<script type="text/javascript">
    var page = '1';
</script>

<select class='search' name="type" ID="type">
    <option value='%'>All Types</option>
    .....
</select> 
```

我知道如何使用 JQuery 检索类型的值。

有没有办法（除了隐藏字段）来检索 JavaScript 变量的值`page`？我已经尝试过了，但一直不确定：

```
 var page = $("#" + this.page).val(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T23:55:08.050

您的变量`page`在整个文档范围内都是全局的。您可以简单地访问

```
var myPage = page; 
```

只要在运行此脚本之前已在文档中设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T23:48:10.933

尝试简单：

```
var page = $("#" + page).val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T23:55:39.530

一个更好的实现，不知道真正的目的，是使用数据属性。

所以你的 html 将包括`<body data-page="1">`（你可以将它添加到任何元素）。

你的JS会做`var page = $('body').data('page'); //page = 1`

[http://html5doctor.com/html5-custom-data-attributes/](http://html5doctor.com/html5-custom-data-attributes/)

[http://api.jquery.com/data/](http://api.jquery.com/data/)

# java - Java 拆分字符串

> ID：10988830
> 
> 赞同：0
> 
> 时间：2012-06-11T23:40:10.403
> 
> 标签：java, string

我有一个要拆分的字符串 s，所以每个部分都用“|”分隔 symbol 成为字符串数组的一个元素。

我会这样做吗？

```
 String s = "FirstName1 LastName1|FirstName2 LastName2|FirstName3 LastName4|";
     String [] names = s.split("|"); 
```

然后我想将这些元素添加到 ArrayList。我做了以下

```
 for(int i = 0; i < names.length; i++)
        {
            friendsNames.add(names[i]);
        } 
```

但我的 ArrayList 如下所示。

```
 Element 1: F
  Element 2: I
  Element 3: R
  Element 4: S
  Element 5: T
  Element 6: 
  Element 7: N 
```

关于我哪里出错的任何建议？等等

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T23:44:00.567

您需要转义“|” 因为它是正则表达式世界中的一个特殊字符。

```
String [] names = s.split("\\|"); 
```

为什么是 2 "\" ？

对于正则表达式，您转义“|” 用“\|”。但由于“\”是 Java 的转义字符，您需要对其进行转义以保留“\”以用于正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T23:47:12.347

管道是 split 方法接受的正则表达式中的特殊字符。因此，您必须转义该字符，以便将其解释为分隔符。

```
import static java.util.Arrays.asList;
//...
String s = "FirstName1 LastName1|FirstName2 LastName2|FirstName3 LastName4|";
List<String> items = asList(s.split("\\|")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T23:46:58.740

如果您不打算将分隔符表示正则表达式，请使用[Pattern.quote()](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)方法转义它包含的任何特殊字符。

```
String[] items = s.split(Pattern.quote("|")); 
```

竖线字符，`|`表示正则表达式中的替代项。因此，您的拆分规范意味着“拆分任何空字符串或任何空字符串”。每个字符之间都有空字符串，所以这就是每个字符被分开的原因。

特殊的正​​则表达式字符，如管道，可以用`\`. 这会将其禁用为特殊字符，并使其与`|`输入中的字符匹配。

更复杂的是，`\`在 Java 字符和字符串文字中具有特殊含义，所以它也需要转义——用另一个`\`字符！这意味着，您的分隔符应该是`"\\|"`.

# c++ - C++ 编译器似乎跳过了代码行

> ID：10988831
> 
> 赞同：1
> 
> 时间：2012-06-11T23:40:21.600
> 
> 标签：c++

我是 C++ 编程的新手，显然遗漏了一些东西。在以下代码中，编译器似乎无法识别这一行：`lengths[counter] = findDups(crtLine);`我收到一个错误：设置了变量“长度”但未使用。我无法弄清楚为什么它不能识别这条线，当`names[counter] = getNameOnly(crtLine)`它完美地工作并且它基本上是相同的格式时。对此问题的任何见解表示赞赏！

```
#include <iostream>
#include <fstream>
#include <string>
#include <algorithm>

using namespace std;

string getNameOnly (string line) {
    return line.substr(0, line.find(' '));
}

int findDups (string line) {
    string lnCpy = line;
    sort(lnCpy.begin(), lnCpy.end());   
    int i = 0; 
    int dups = 0;
    int j = 1;
    int len = lnCpy.length();
    while (j < len) {
        if (lnCpy.at(i) == lnCpy.at(j))
                dups++;
        i++;
        j++;
    }

    if (dups != 0)
        return 0;
    else
            return lnCpy.length();
}

int main() {

string names[1219];
int lengths[1219];
string crtLine;
int counter = 0;

ifstream myfile ("dist.male.first");
if (myfile.is_open()) {
    while (!myfile.eof()) {
        getline(myfile,crtLine);
        lengths[counter] = findDups(crtLine);           
        names[counter] = getNameOnly(crtLine);                  
        counter++;
    }
    myfile.close();
}   
else cout << "Unable to open file";

return (0); 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T23:43:30.340

这是一个警告，而不是错误，它准确地告诉你问题出在哪里：你将东西放入名为 的变量`lengths`中，但从不检查其中的内容，你可能一开始就不要在那里存储任何东西。

您不会收到类似的警告`names`，因为 的赋值运算符`std::string`具有副作用，并且编译器假定您对副作用感兴趣（而不是稍后将值取出）。

# css - 需要帮助理解 CSS 选择性规则

> ID：10988837
> 
> 赞同：4
> 
> 时间：2012-06-11T23:40:52.347
> 
> 标签：css

```
<html><head><style type="text/css">
    #foo  { color: blue; }
    a.bar { color: red; }
    #foo .baz  { background-color: cyan; }
    a.bar > .baz { background-color: yellow; }
</style></head>
<body>
    <div id="foo">
        <a href="#" class="bar">
            <span class="baz">TEXT</span>
        </a>
    </div>
</body>
</html> 
```

我是一个 CSS 菜鸟，但我的直觉告诉我，它与包含的比`a.bar`匹配更具体，并且应该以黄色背景显示为红色。或者，如果更具体，则应为蓝色，背景为青色。`<span>``TEXT``#foo``TEXT``#foo``TEXT`

而是`TEXT`以红色和青色背景显示（在 Chrome、IE8 上测试）。为什么`a.bar`比 更具体`#foo`，但又`#foo .baz`比 更具体`a.bar > .baz`？我怎样才能让这个文本以红色和~~青色~~黄色出现，并且对我已经指定的样式的干扰最少（最小的更改集）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T23:45:55.243

您所看到的文本颜色与应用的选择器无关。两个选择器都被应用，但应用于不同的元素。转换为内联样式，您的 CSS 将如下所示：

```
<body>
    <div id="foo" style="color: blue;">
        <a href="#" class="bar" style="color: red;">
            <span class="baz" style="background-color: cyan;">TEXT</span>
        </a>
    </div>
</body> 
```

`background-color: yellow;`被更具体的选择器覆盖，但您的其他选择器不会相互覆盖。它们适用于不同的元素。跨度将从它最近的祖先继承，该`color`祖先具有指定的值`color`。在这种情况下，就是`<a>`.

如果您想要一个更改最少的黄色背景，我建议您通过`#foo`将`#foo a.bar > .baz`. 这是一个[JSFiddle 演示](http://jsfiddle.net/Paulpro/qDyBT/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T23:43:47.337

这完全取决于特异性。[这是一个很好的（旧）资源](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)（查看可以下载的 jpg）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T23:44:32.773

这很混乱；它应该是直观的，但是一旦你深入挖掘，事情可能不会像预期的那样工作。不过，Smashing Magazine 已经整理了一份综合指南：http: [//coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

# ruby - is Ruby em-websocket blocking?

> ID：10988840
> 
> 赞同：0
> 
> 时间：2012-06-11T23:41:08.033
> 
> 标签：ruby, websocket, em-websocket

I'm writing a ruby program that has 2 threads. One that listens on an incoming UDP connection and another that broadcasts on a websocket from which browsers on the client side read.I'm using the em-websocket gem. However, My UDP listener thread never gets called and it looks like the code stays within the websocket initialization code. I'm guessing because em-websocket is blocking, but I haven't been able to find any info online that suggests that. Is it an error on my side? I'm kinda new to ruby so I'm not able to figure out what I'm doing wrong.

```
require 'json'
require 'em-websocket'
require 'socket'

socket=nil
text="default"
$x=0

EventMachine.run do
EventMachine::WebSocket.start(:host => "0.0.0.0", :port => 8080) do |ws|
  ws.onopen    { 
            ws.send "Hello Client!"
            socket=ws
            $x=1
        }

  ws.onmessage { |msg| socket.send "Pong: #{msg}" }
  ws.onclose   { puts "WebSocket closed" }
end
end
def listen()
puts "listening..."
s = UDPSocket.new
s.bind(nil, 3000)
while 1<2 do
  text, sender = s.recvfrom(1024)     
  puts text
  if $x==1 then
    socket.send text      
  end   
end
end

t2=Thread.new{listen()}
t2.join 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T01:30:13.287

`em-websocket`是非阻塞的，但是`UDPSocket#recv_from`是。改用 EventMachine 可能会更好`open_datagram_socket`。

另一件需要注意的事情：您不应该公开`socket`为“全局”变量。每次有人连接到先前连接的客户端的引用都会丢失。也许为套接字连接创建某种存储库，或者使用观察者模式在有东西进入时广播消息。我要做的是让一个虚拟对象充当观察者，并且每当连接/断开套接字时，您就注册/取消注册观察者：

```
require 'observer'

class Dummy
  include Observable

  def receive_data data
    changed true
    notify_observers data
  end
end

# ... later on ...

$broadcaster = Dummy.new

class UDPHandler < EventMachine::Connection
  def receive_data data
    $broadcaster.receive_data data
  end
end

EventMachine.run do
  EM.open_datagram_socket "0.0.0.0", 3000, UDPHandler

  EM::WebSocket.start :host => "0.0.0.0", :port => 8080 do |ws|
    ws.onopen do
      $broadcaster.add_observer ws
    end

    ws.onclose do
      $broadcaster.delete_observer ws
    end

    # ...
  end
end 
```

EventMachine 的全部意义在于抽象出基本的套接字和线程结构，并在内部处理所有异步位。最好不要将经典库`UDPSocket`与`Thread`EventMachine 之类的东西混合使用。

# ruby-on-rails - How do I create a user read with devise?

> ID：10988841
> 
> 赞同：-1
> 
> 时间：2012-06-11T23:41:17.310
> 
> 标签：ruby-on-rails, devise, crud

I'm using Rails, iOS, and devise. I want to read a single user. The path would be users/:id.

I get the following error:

```
Started GET "/users/0" for 127.0.0.1 at 2012-06-11 17:37:50 -0600
Processing by UsersController#show as JSON
  Parameters: {"id"=>"0"}
[Devise] Could not find devise mapping for path "/users/0".
Maybe you forgot to wrap your route inside the scope block? For example:

devise_scope :user do
  match "/some/route" => "some_devise_controller"
end

Completed 500 Internal Server Error in 0ms

AbstractController::ActionNotFound (Could not find devise mapping for path "/users/0".
Maybe you forgot to wrap your route inside the scope block? For example:

devise_scope :user do
  match "/some/route" => "some_devise_controller"
end 
```

I've tried putting resources :users underneath devise_for :users as well as get "users/:id" => "users#show" and match "users/:id" => "users#show".

Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:57:08.260

这是我的最终解决方案：

```
devise_for :users, :controllers => { :registrations => "users"}

devise_scope :user do
  get "users/:id" => "users#show"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T23:59:35.800

查看文档中名为“配置路由”的部分：

[https://github.com/plataformatec/devise#readme](https://github.com/plataformatec/devise#readme)

答案也部分包含在错误消息中。

至于为什么 devise_for 似乎胜过该行下方的路线`routes.rb`，请查看指南：

[http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)

> Rails 路由按照指定的顺序进行匹配，因此如果您在 get 'photos/poll' 上方有一个资源 :photos，则资源行的 show action 路由将在 get 行之前匹配。要解决此问题，请将 get 行移到资源行上方，以便首先匹配。

# sql-server - How to compare multiple values in one column against a delimited string in a stored procedure

> ID：10988846
> 
> 赞同：-1
> 
> 时间：2012-06-11T23:42:35.543
> 
> 标签：sql-server, arrays, stored-procedures

Ok, first question, and you guys scare me with how much you know, so please be gentle...

I am trying to pass in a delimited string and convert it to an array in a stored procedure and then use the array to check against values in a column. Here's the catch. I'm trying to take the preexisting table, that checks for one association and expand it to allow for multiple associations.

So the column annAssociations might have three ids, 4,16,32, but I need to check if it belongs to the groupIds being queried, 6,12,32\. Since one of the values matched, it should return that row.

Here is the procedure as it exists.

```
CREATE PROCEDURE [dbo].[sp_annList] 
-- Date Range of Announcements.
@dateBegin datetime,
@dateEnd datetime,
    -- Announcement type and associations.
@annType varchar(50),
@annAssociation varchar(255)

AS
BEGIN

-- Set the SELECT statement for the announcements.
SET NOCOUNT ON;
-- See if this should be a limited query
IF @annAssociation <> ''
    Begin
        SELECT * 
        FROM announcements
        WHERE (date1 <= @dateEnd AND date2 >= @dateBegin) -- See if the announcement falls in the date range.
            AND annType = @annType -- See if the announcement is the right type.
            AND annAssociations LIKE (select SplitText from dbo.fnSplit(@annAssociation, ','))
        ORDER BY title
    END
Else 
    Begin
        SELECT *
        FROM announcements
        WHERE (date1 <= @dateEnd AND date2 >= @dateBegin)
            AND annType = @annType
        ORDER BY title
    End
END 
```

And here is the method I'm using to convert the delimited string and store it in a temporary table.

```
CREATE Function [dbo].[fnSplit](@text text, @delimitor nchar(1))

RETURNS
@table TABLE
(
[Index] int Identity(0,1),
[SplitText] varchar(10)
)
AS

BEGIN
declare @current varchar(10)
declare @endIndex int
declare @textlength int
declare @startIndex int

set @startIndex = 1

if(@text is not null)
begin
    set @textLength = datalength(@text)

    while(1=1)
    begin
        set @endIndex = charindex(@delimitor, @text, @startIndex)

        if(@endIndex != 0)
        begin
            set @current = substring(@text,@startIndex, @endIndex - @StartIndex)
            Insert Into @table ([SplitText]) values(@current)
            set @startIndex = @endIndex + 1   
        end
        else
        begin
            set @current = substring(@text, @startIndex, datalength(@text)-@startIndex+1)
            Insert Into @table ([SplitText]) values(@current)
            break
        end
    end

end

return
END 
```

Sorry for the long question. I just wanted to get all the info out there. I've been researching for days, and I either don't know where to look or am missing something obvious.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T00:24:12.030

您可能不会获得比这种方法更好的性能（您可能会看到使用 CLR 拆分函数获得更好的性能，但在 3 或 4 项时您不会看到太大差异）：

```
SELECT * 
  FROM announcements AS a
  WHERE ...
  AND EXISTS (SELECT 1 FROM dbo.fnSplit(@annAssociation) AS n
    WHERE ',' + a.annList + ',' LIKE '%,' + n.SplitText + ',%'); 
```

这里的关键是您只需要拆分其中一个列表。

你*真的*应该停止在`annAssocations`列中存储多个值。每个 id 都是一个单独的数据，应该单独存储（除了更好地符合规范化之外，它还会使这样的查询更简单）。

# android - view.getDrawingCache() only works once

> ID：10988847
> 
> 赞同：12
> 
> 时间：2012-06-11T23:42:39.263
> 
> 标签：android, view, bitmap

I have a RelativeLayout with a loaded bitmap image using the Touch V2 example from Pragmatic Bookshelf -- [http://media.pragprog.com/titles/eband3/code/Touchv2/src/org/example/touch/Touch.java](http://media.pragprog.com/titles/eband3/code/Touchv2/src/org/example/touch/Touch.java)

I've added a separate button with onclicklistener that when clicked will load an image from the gallery. On the activity result the image is loaded as a bitmap into the RelativeLayout:

```
 public void getPictureFromFile(Uri targetUri){
    try {
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inSampleSize = scale(getContentResolver()
                .openInputStream(targetUri));
        workinprogress = BitmapFactory.decodeStream(
                getContentResolver().openInputStream(targetUri),
                null, options);
        view.setImageBitmap(workinprogress);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
} 
```

One the next button click, I grab the image of the relativelayout using:

```
 thepicture.buildDrawingCache(true);
            Bitmap bm = Bitmap.createBitmap(thepicture.getDrawingCache()); 
```

The process works terrific -- for the first image. When I load another image again, the bitmap passed is still the same as the original. I've tried the thepicture.invalidate() and thepicture.resetDrawableState() before getDrawingCache() but neither seem to update the image to the newly loaded picture, although the frame layout displays the correct image.

Is there something I don't understand about refreshing drawingCache that I need to implement for the second image I load?

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-12T09:32:17.203

为了使它工作得更多，你必须在每次调用`view.setDrawingCacheEnabled(true)`之前和之后使用。请参阅示例：`view.setDrawingCacheEnabled(false)``view.getDrawingCache()`

```
imageView.setDrawingCacheEnabled(true);
imageView.buildDrawingCache(true);
File imageFile = new File(Environment.getExternalStorageDirectory(),
        "Pictures/image.jpg");
FileOutputStream fileOutputStream = new FileOutputStream(imageFile);
imageView.getDrawingCache(true).compress(CompressFormat.JPEG, 100,
        fileOutputStream);
fileOutputStream.close();
imageView.setDrawingCacheEnabled(false); 
```

# java - Scatter plot with labels java

> ID：10988849
> 
> 赞同：1
> 
> 时间：2012-06-11T23:42:56.467
> 
> 标签：java, scatter

I need to create a scatter plot in Java, which shows a label in a point position. For example, I have a plot with a point in position (10,20), I need to show a string in that position of the plot instead of a colored point. Is this possible using some library? I have been trying with JChart2D, JFreeChart without success, I just get normal scatter plots.

Thanks for your time.

# php - 使用 jQuery AJAX 和 CodeIgniter 获取 500 内部服务器错误

> ID：10988851
> 
> 赞同：0
> 
> 时间：2012-06-11T23:43:04.097
> 
> 标签：php, jquery, mysql, ajax, codeigniter

我正在尝试向 CodeIgniter 提交一个表单（它是一个动态表单，其中包含通过 jQuery 添加的字段）以进行数据库插入。一部分有效，另一部分无效。

**这是jQuery：**

```
function submitForm() {
    $.ajax({
        type: 'POST',
        url: '/raffle/save/',
        data: $('#raffle').serialize(),
        success: function (response) {
            alert(response);
        },
        error: function() {
            alert('Failed'); // This is what I get unless I comment out the entry insert
        }
    });
} 
```

**CI 控制器：**

```
class Raffle extends CI_Controller {
    public function __construct() {
        parent::__construct();
        $this->load->model('raffle_model');
        $this->load->library('form_validation');
    }

    public function index() {
        $data['title'] = 'Create a Raffle';
        $this->load->view('header', $data);
        $this->load->view('raffles/create_view', $data);
        $this->load->view('raffles/bottombar_view', $data);
        $this->load->view('footer', $data);
    }

    public function save() {
        foreach($_POST as $k => $v) {
            if($k == 'entrant' || $k == 'tickets') {
                foreach ($v as $i => $vector) {
                    $this->form_validation->set_rules('entrant[' . $i . ']', 'Entrant name', 'trim|required|min_length[1]|max_length[100]|xss_clean');
                    $this->form_validation->set_rules('tickets[' . $i . ']', 'Number of tickets', 'trim|required|max_length[2]|is_natural_no_zero|xss_clean');
                }
            } else {
                $this->form_validation->set_rules('raffle-name', 'Raffle name', 'trim|required|min_length[4]|max_length[100]|xss_clean');
                $this->form_validation->set_rules('winners', 'Number of winners', 'trim|required|max_length[2]|is_natural_no_zero|xss_clean');
            }
        }

        if($this->form_validation->run() == FALSE) {
            echo 'Validation failure!';
        } else {
            if($this->raffle_model->add_raffle()) { // It does pass validation and goes to the model
                echo 'Data added successfully!';
            }
        }
    }
} 
```

**CI模型**：

 **```
class Raffle_model extends CI_Model {
    public function __construct() {
        parent::__construct();
    }

    public function add_raffle() {
        // This works
        $meta = array(
            'user_id'    => $this->session->userdata('user_id'),
            'name'       => $this->input->post('raffle-name'),
            'winners'    => $this->input->post('winners'),
            'created_ip' => $_SERVER['REMOTE_ADDR']
        );

        // This works and is a multidimensional array for insert_batch()
        $entrants = array(
            array(
                'date'      => date(DATE_ATOM),
                'raffle_id' => '1'
            )
        );

        foreach($_POST['entrant'] as $name => $n) {
            array_push($entrants,
                array(
                    'name'    => $n,
                    'tickets' => $_POST['tickets'][$name]
                )
            );
        }

        $this->db->insert('raffle', $meta);
        $this->db->insert_batch('entry', $entrants); // This one returns error 500

        return true;
    }
} 
```

**问题出在：**提交表单时，该`meta`部分确实保存到了`raffle`表格中，但该`entrants`部分没有保存到`entry`表格中。我尝试使用一个简单的虚拟数组（样本数据，没有发布数据，没有循环）来查看它是否可以工作，但它仍然没有。控制台日志说`POST http://rafflegrab.dev/raffle/save/ 500 (Internal Server Error)`。

CSRF 在 CI 配置中关闭。

该表设置如下：

1.  表名：条目
2.  InnoDB
3.  id - bigint(12) - UNSIGNED - not_null - AUTO_INCREMENT - PRIMARY
4.  user_id - int(10) - 未签名
5.  名称 - varchar(100)
6.  门票 - smallint(5) - 未签名
7.  日期 - 日期时间
8.  raffle_id - int(10) - 未签名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:04:20.607

我假设您使用不安全的输入法来访问 $_POST ？

如果你用这些字段模拟一个 noddy 表单并将其发布到`Save`控制器上的操作会发生什么？

下一个问题是通常的问题，但服务器日志说什么？查看事件日志 (windows) 或`/var/log/apache2/error_log`(SUSE) 或系统上的等效项。它应该告诉你为什么它不起作用。

如果没有，请确保您的 php 日志级别足够高以输出错误。

如果您不在生产环境中，请考虑[显示 PHP 错误](http://php.net/manual/en/function.error-reporting.php)，直到找到问题为止

编辑：总是比猜测更好地了解问题，但我的第一个想法是您的二维数组不一致。你似乎有：

```
array(
    array('date'=>blah, 'raffleId'=>blah),
    array('name'=>blah, 'tickets'=>blah),
    array('name'=>blah, 'tickets'=>blah)
    ...
) 
```

你真的想要吗

```
array(
    array('date'=>blah, 'raffleId'=>blah, 'name'=>blah, 'tickets'=>blah),
    array('date'=>blah, 'raffleId'=>blah, 'name'=>blah, 'tickets'=>blah),
    array('date'=>blah, 'raffleId'=>blah, 'name'=>blah, 'tickets'=>blah),
    ...
) 
```

? 也许是这样的：

```
 $entrants = array();
    $recordedDate = date(DATE_ATOM);
    foreach($_POST['entrant'] as $name => $n) {
        array_push($entrants,
            array(
                'date'      => $recordedDate,
                'raffle_id' => '1'
                'name'    => $n,
                'tickets' => $_POST['tickets'][$name]
            )
        );
    } 
```**

# azure - does Azure not remove shut-down nodes from load balancing?

> ID：10988856
> 
> 赞同：0
> 
> 时间：2012-06-11T23:43:29.757
> 
> 标签：azure, azure-load-balancer

I've got a load-balanced end-point being served by 2 vms, and I shut down one of them through the web interface, however it seems that the shut-down endpoint is still being included in the load-balancer rotation. Is this the case or am I missing a silly mistake on my part?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T00:24:38.537

您是在谈论新的“Windows Azure 虚拟机”还是“基于 Web/Worker 的 VM”？

使用 Windows Azure 虚拟机，您可以创建多个单独的虚拟机，并使用带有参数“-LBSetName”的 Powershell cmdlet“get-azurevm”来设置探针负载平衡下与 -LBSetName 设置相同，如下所示：

```
get-azurevm -ServiceName "XXXX" -Name "XXX" | Set-AzureEndpoint -Name "HttpIn" -Protocol "tcp" -PublicPort 80 -LocalPort 80 -LBSetName "XXX" -ProbePort 80 -ProbeProtocol "http" -ProbePath "/" | Update-AzureVM 
```

如果您配置了负载均衡器并关闭了实例，负载均衡器仍将显示所有配置有探针的机器。

# r - 将概率向量添加回 R 中的原始数据帧

> ID：10988864
> 
> 赞同：0
> 
> 时间：2012-06-11T23:44:40.520
> 
> 标签：r

我能够使用给定的一些 R 代码成功运行 RF 模型。这是下面，它也包括我的数据片段。

唯一的问题是代码的编写方式只输出一个概率向量，没有来自称为“testset”的原始测试数据集的数据。所以现在我试图弄清楚如何将我的概率与原始数据框一起输出，因为我在网上找不到解决方案。换句话说，我希望它成为数据集中的另一列，就像我的 FLSAStat 列之后一样。这样我就可以将所有内容一起输出到 csv 文件中。

这是我所拥有的：

```
#####################################################
# 1\. SETUP DATA
#####################################################
mydata <- read.csv("train_test.csv", header=TRUE)
colnames(testset)
[1] "train"           "Target"          "ApptCode"        "Directorate"         "New_Discipline"  "Series"          "Adjusted.Age"   
[8] "Adj.Service"     "Adj.Age.Service" "HiEducLv"        "Gender"           "RetCd"           "FLSAStat"  
> head(testset)
 train Target ApptCode                Directorate             New_Discipline Series  Adjusted.Age Adj.Service Adj.Age.Service HiEducLv Gender
5909     0     NA       IN                   Business Math  Computer Science  IT     PSTS        54.44          10           64.44 Bachelor   Male
5910     0     NA       IN                Computation Math  Computer Science  IT   PSTS        51.51          15           66.51 Bachelor   Male
5911     0     NA       IN Physical and Life Sciences                    Physics   PSTS        40.45           5           45.45      PHD   Male
5912     0     NA       IN  Weapons and Complex Integ                    Physics   PSTS        62.21          35           97.21      PHD   Male
5913     0     NA       IN  Weapons and Complex Integ                    Physics   PSTS        45.65          15           60.65      PHD   Male
5914     0     NA       FX Physical and Life Sciences                    Physics   PSTS        36.13           5           41.12      PHD   Male
  RetCd FLSAStat
5909  TCP2        E
5910  TCP2        E
5911  TCP2        E
5912  TCP2        E
5913  TCP1        E
5914  TCP2        E    

#create train and test sets
trainset = mydata[mydata$train == 1,]
testset = mydata[mydata$train == 0,]
#eliminate unwanted columns from train set 
trainset$train = NULL
#####################################################
# 2\. set the formula
#####################################################
theTarget <- "Target"
theFormula <- as.formula(paste("as.factor(",theTarget, ") ~ . "))
theFormula1 <- as.formula(paste(theTarget," ~ . "))
trainTarget = trainset[,which(names(trainset)==theTarget)]
testTarget  = testset[,which(names(testset)==theTarget)]

#####################################################
# Random Forest
#####################################################
library(randomForest)
what <- "Random Forest"
FOREST_model <- randomForest(theFormula, data=trainset, ntree=500)
train_pred <- predict(FOREST_model, trainset, type="prob")[,2]
test_pred <- predict(FOREST_model, testset, type="prob")[,2]
display_results()
testID  <- testset$case_id
predictions <- test_pred
submit_file = cbind(testID,predictions)
write.csv(submit_file, file="RANDOM4.csv", row.names = FALSE) 
```

我认为问题在于我缺少将预测向量合并回 testSet 的额外代码行。我猜这会在第三行到最后一行代码之前出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T01:48:19.657

只需将列添加到您的数据框中，如下所示：

```
testset$Predictions <- test_pred
write.csv(testset, file="RANDOM4.csv", row.names = FALSE) 
```

# php - 无法重新声明类 - 检查类是否已存在

> ID：10988865
> 
> 赞同：4
> 
> 时间：2012-06-11T23:44:44.250
> 
> 标签：php, oop, class

我正在使用一个两次调用同一类并引发错误的脚本：

```
Fatal: Cannot redeclare class urlConverter (/var/www/core/cache/includes/elements/modsnippet/23.include.cache.php:14) 
```

我尝试将以下代码放入：

```
if( !class_exists( 'urlConverter', false ) )
{
    $urlConverter = new urlConverter( $modx );
} 
```

但是，我正在使用的 CMS 报告错误 500，并且无法在日志中看到它为什么会抛出该错误。

有谁知道如何检查该类是否已正确声明？

编辑：

我正在使用 CMS，因此该类位于代码段中，而不是实际文件中。这就是他们如何称呼他们的片段：

```
$data['viewonlinelink'] = $this->modx->runSnippet( 'urlConverter', array(
                                            'action' => 'encrypt',
                                            'string' => http_build_query( $string ) ) ); 
```

我需要再次调用它以获得不同的结果。

编辑2：

这是 urlConverter：

```
<?php
class urlConverter {

public $modx;

public function __construct( modX &$modx )
{
    $this->modx =& $modx;
}

public function action( $scriptProperties )
{
    return $this->$scriptProperties['action']( $scriptProperties['string'] );
}

private function encrypt( $str )
{
    return $str;
}

private function decrypt( $str )
{
      return $str;
}

}
}
 $urlConverter = new urlConverter( $modx );
 return $urlConverter->action( $scriptProperties ); 
```

现在从另一个脚本我调用以下内容：

```
 $data['viewonlinelink'] = $this->modx->runSnippet( 'urlConverter', array(
                                            'action' => 'encrypt',
                                            'string' => http_build_query( $string ) ) );
    $data['confirmonline']  = $this->modx->runSnippet( 'urlConverter', array(
                                            'action' => 'encrypt',
                                            'string' => http_build_query( $reversed ) ) ); 
```

它在我的 urlConverter 类中运行 encrypt 函数，我应该收到两个不同的结果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T00:04:33.023

在使用更新的代码时，将类文件更改为：

```
<?php
if(!class_exists('urlConverter')){
    class urlConverter {

        public $modx;

        public function __construct( modX &$modx ){
            $this->modx =& $modx;
        }
        public function action( $scriptProperties ){
            return $this->$scriptProperties['action']( $scriptProperties['string'] );
        }

        private function encrypt( $str ){
            return $str;
        }

        private function decrypt( $str ){
          return $str;
        }

    }
 }
$urlConverter = new urlConverter( $modx );
return $urlConverter->action( $scriptProperties ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T23:48:17.083

该`redeclare class`错误不是由创建类的新实例引起的，而是通过`class`在同一符号上调用运算符来调用的。您可能`urlConverter`多次包含类定义文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T23:51:22.490

如果您无法修改将类文件带入 CMS 的方式（使用`require_once`or `include_once`），请修改您的代码段：

```
if( !class_exists( 'urlConverter' ) ) {
    class urlConverter {
        /* Build class */
    }
} 
```

当然，如果您在同一个文件中还有其他内容，您需要确保它不会尝试运行两次。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T23:48:02.523

看起来定义该类的文件被包含多次，这就是您收到第一个错误的原因（无法重新声明类）。

`/var/www/core/cache/includes/elements/modsnippet/23.include.cache.php`line`14`似乎是多次包含该课程的内容。如果可能，将 更改为`include`，`include_once`这样您就不会多次定义该类。

要进一步调试（而不是看到 500 内部服务器错误），请尝试尽早将以下内容添加到您的代码中：

```
error_reporting(E_ALL);
ini_set('display_errors', 1); 
```

否则，请检查服务器`error_log`(Apache)，看看那里是否有任何关于 500 错误的有用信息。

# java - void 方法中的返回语句

> ID：10988868
> 
> 赞同：3
> 
> 时间：2012-06-11T23:45:09.333
> 
> 标签：java

我有以下返回 void 的方法，我需要在另一个也返回 void 的方法中使用它。我可以执行以下操作吗？

```
public void doSomething(){}

public void myMethod()
{
    return doSomething();
} 
```

感谢您的所有评论，但让我更具体

我只`doSomething`在有事情发生时，否则我做其他事情

```
public void doSomething(){}

public void myMethod()
{
    for(...)
        if(somethingHappens)
        {
            doSomething();
            return;
        }

    doOtherStuff();
} 
```

除了上面的代码，我可以只写`return doSomething();`在 if 语句中吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-11T23:46:36.837

不，只需这样做：

```
public void doSomething() { }

public void myMethod()
{
    doSomething();
} 
```

或者在第二种情况下：

```
public void doSomething() { }

public void myMethod()
{
    // ...
    if (somethingHappens)
    {
        doSomething();
        return;
    }
    // ...
} 
```

“归虚”的意思是什么也不归。如果您想“跳出”`myMethod`的主体，请使用`return;`编译器不允许写入`return void;`（“表达式的非法开始”）或`return doSomething();`（“无法从结果类型为 void 的方法返回值”）。我理解返回“void”或方法调用的“void result”似乎是合乎逻辑的，但这样的代码会产生误导。我的意思是大多数阅读类似内容的程序员`return doSomething();`都会认为有*一些东西*可以返回。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T23:47:35.580

void 函数不会/不能返回任何东西。只需调用该函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T23:48:02.750

不，Java void 函数中不需要返回。相反，请执行以下操作：

```
public void myMethod(){
    doSomething();
} 
```

如果你愿意，你可以在 doSomething() 之后添加一个 return，但正如我所说的那样，这是不必要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T00:15:59.710

您要么必须像其他人指出的那样使用 doSoemthing 要么

```
public (insert data type like int, double, string, etc) myMethod()
{
     return doSomething();
} 
```

如果做某事返回一个 int

```
// if you wanted to take 2 numbers and add them

public void myMethod()
{
    valueOfX+Y = doSomething();
}

public int doSomething()
{
    x = 2;
    y = 2;
    return X+Y;
} 
```

希望清除它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-18T07:54:43.780

如果

*   条件`(somethingHappens)`实际上取决于做了`doSomething()`什么
*   并且`doSomething()`是一种您可以修改的方法

那么您应该考虑使其返回`boolean`（或任何合适的类型）值，该值告诉被调用方方法是否发生。

代码看起来有点像这样：

```
public boolean doSomething() {
    // internal working
    if (internalCondition) {
         // something done here
         return true;
    }
    // not done ;
    return false;
}

public void myMethod()
{
    for(...)
        if (doSomething())
        {
            return;
        }
    // didn't hit 'doSomething() == true'
    doOtherStuff();
} 
```

# sql - Oracle customized merge

> ID：10988871
> 
> 赞同：0
> 
> 时间：2012-06-11T23:45:49.273
> 
> 标签：sql, oracle, plsql

We have two tables one is source and another one is target. The source table gets updated/refresh with external data source and we have a PL/SQL block which runs daily and updates/inserts the target table rows using Oracle's **merge** function.

Now we have a situation where a column (email) in the target table could get updated by some external source. Consequently, this email is being updated/overwritten by email of source table with the above mentioned PL/SQL's merge function.

Is there something in the merge function so that it only updates the rows in the target table if things other than the email have been changed. I am happy to add new column(s) into the source and target table if needed.

```
create or replace
PROCEDURE INSERT_UPDATE_TARGET AS 

BEGIN
  merge into INTEGRATION_TARGET t
  using  v_merge vm 
  on (t.person_num = vm.person_num) 
  when matched then update set T.YEAR_START = VM.YEAR_START,
    T.SEMESTER_START = VM.SEMESTER_START,         
    T.SATAC_DATABASE_NAME = VM.SATAC_DATABASE_NAME,   
    T.STUDY_LEVEL = VM.STUDY_LEVEL,  
    T.REF_NUM = VM.REF_NUM,          
    T.SEX = VM.SEX,                    
    T.DATE_OF_BIRTH = VM.DATE_OF_BIRTH,         
    T.DATE_RECEIVED = VM.DATE_RECEIVED,
    T.TITLE = VM.TITLE,
    T.FAMILY_NAME = VM.FAMILY_NAME,
    T.GIVEN_NAME_1 = VM.GIVEN_NAME_1,
    T.STREET_NAME = VM.STREET_NAME,
    T.STREET_NAME_2 = VM.STREET_NAME_2,
    T.STREET_NAME_3 = VM.STREET_NAME_3,
    T.POSTAL_STATE = VM.POSTAL_STATE,
    T.POSTAL_TOWN = VM.POSTAL_TOWN,
    T.POSTAL_POSTCODE = VM.POSTAL_POSTCODE,
    T.COUNTRY = VM.COUNTRY,
    T.MOBILE = VM.MOBILE,
    T.EMAIL = VM.EMAIL
when not matched then insert (T.YEAR_START,
    T.SEMESTER_START,         
    T.SATAC_DATABASE_NAME,   
    T.STUDY_LEVEL,  
    T.REF_NUM,                
    T.PERSON_NUM,             
    T.SEX,                    
    T.DATE_OF_BIRTH,         
    T.DATE_RECEIVED,
    T.TITLE,
    T.FAMILY_NAME,
    T.GIVEN_NAME_1,
    T.STREET_NAME,
    T.STREET_NAME_2,
    T.STREET_NAME_3,
    T.POSTAL_STATE,
    T.POSTAL_TOWN,
    T.POSTAL_POSTCODE,
    T.COUNTRY,
    T.MOBILE,
    T.EMAIL
       ) 
    values(VM.YEAR_START,
    VM.SEMESTER_START,         
    VM.SATAC_DATABASE_NAME,   
    VM.STUDY_LEVEL,  
    VM.REF_NUM,                
    VM.PERSON_NUM,             
    VM.SEX,                    
    VM.DATE_OF_BIRTH,         
    VM.DATE_RECEIVED,
    VM.TITLE,
    VM.FAMILY_NAME,
    VM.GIVEN_NAME_1,
    VM.STREET_NAME,
    VM.STREET_NAME_2,
    VM.STREET_NAME_3,
    VM.POSTAL_STATE,
    VM.POSTAL_TOWN,
    VM.POSTAL_POSTCODE,
    VM.COUNTRY,
    VM.MOBILE,
    VM.EMAIL

    );
END; 
```

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:23:48.677

在更新语句中添加 where 子句

# c# - 嵌套类：无法在静态上下文中访问非静态字段

> ID：10988878
> 
> 赞同：10
> 
> 时间：2012-06-11T23:46:47.247
> 
> 标签：c#, nested-class

我有一个带有一些内部变量的 C 类。它有一个嵌套类 N 想要访问 C 中的变量。C 和 N 都不是静态的，尽管 C 有一些静态方法和变量。当我尝试从 NI 访问 C 中的非静态变量时，得到波浪线下划线和消息“无法在静态上下文中访问非静态字段 [fieldname]”。

这似乎与嵌套类有关，因为我可以从封闭类本身访问变量。

ReSharper 建议我将 _t 设为静态，但这不是一个选项。我该如何处理？

```
public sealed partial class C
{
    string _t;

    class N
    {
        void m()
        {
            _t = "fie"; // Error occurs here
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-11T23:48:22.447

这不是 Java，而且您没有*内部*类。

嵌套类的实例不与外部类的任何实例关联，除非您通过在构造函数中存储引用（又名句柄/指针）来建立关联。

```
public sealed partial class C
{
    string _t;

    class N
    {
        readonly C outer;

        public N(C parent) { outer = parent; }

        void m()
        {
            outer._t = "fie"; // Error is gone
        }
    }
} 
```

# python - matplotlib axis limit

> ID：10988881
> 
> 赞同：1
> 
> 时间：2012-06-11T23:46:58.833
> 
> 标签：python, matplotlib

I want to set a 'minimum' axis limit - in other words, I want to `set_ylim([0, 30])`, but adding point at y = 40 would have the axis grow to accommodate it. Is there any combination of limits and autoscaling that could achieve this for me?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T05:02:30.900

```
set_ylim(ymin=0) 
```

[文档。](http://matplotlib.sourceforge.net/api/axes_api.html#matplotlib.axes.Axes.set_ylim)

有趣的是，[API 最近更改为](http://matplotlib.sourceforge.net/api/api_changes.html?highlight=ymin#changes-beyond-0-99-x) `bottom`and `top`：

```
set_ylim(bottom=0) 
```

虽然`ymin`并且`ymax`仍然是合法的。

# python - 使用 Django 的新 i18n_patterns：如何回退到设置模块中指定的默认语言？

> ID：10988882
> 
> 赞同：11
> 
> 时间：2012-06-11T23:46:58.967
> 
> 标签：python, django, internationalization, url-routing, urlconf

我正在使用新`i18n_patterns`的 Django 1.4：

```
from django.conf.urls import patterns, include, url
from django.conf.urls.i18n import i18n_patterns

from django.contrib import admin
admin.autodiscover()

urlpatterns += i18n_patterns('',
    url(r'^admin/', include(admin.site.urls)),
) 
```

它适用于每种活跃的语言：

```
/en/admin/ # Ok
/es/admin/ # Ok 
```

但这失败了：

```
/admin/ # 404 Not found 
```

如何避免 404 错误并重定向到所请求 URL 的语言前缀版本（不仅是管理面板）？

是编写自定义中间件的解决方案吗？为什么这在 Django 中没有默认出现？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-12T02:47:08.500

看起来您没有[启用 django.middleware.locale.LocaleMiddleware](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#internationalization-in-url-patterns)。

# shell - Sed to extract till first space after 2nd word

> ID：10988883
> 
> 赞同：1
> 
> 时间：2012-06-11T23:47:06.087
> 
> 标签：shell, sed, awk

How can we use sed to get the 4 characters between "`Install ID:`" and first space after `XKCD`, basically I want to extract "`XKCD`" string out of it

```
Install ID:          XKCD (8426200,8179503) 
```

I tried using -

```
 echo "Install ID:          XKCD (8426200,8179503)" | sed -n 's/^.*ID:\(.*\)*$/\1/p' 
```

but that gives me "`XKCD (8426200,8179503)`" instead of just `XKCD`. I am not able to figure out, how to hand the space part.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T23:57:00.743

对您的尝试进行了一些小修改：

```
echo "Install ID:          XKCD (8426200,8179503)" | sed -n 's/^.*ID: *\([^ ]*\) .*$/\1/p' 
```

或者

```
echo "Install ID:          XKCD (8426200,8179503)" | awk '{print $3}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T23:52:39.627

```
 test="Install ID:          XKCD (8426200,8179503)"
 echo $test | sed -re 's/^.*\:\s+([A-z]{4}).*/\1/' 
```

或者：忽略冒号之前的所有内容，忽略冒号之后的空格，获取空格之后的四个字符，然后忽略之后的所有内容。但是，如果您的字符包含数字或其他内容，那么它当前会失败（您需要将它们添加到方括号中的列表中）。

# javascript - 如何向我制作的这个 jquery div carosel 添加页面指示器？

> ID：10988885
> 
> 赞同：1
> 
> 时间：2012-06-11T23:47:20.583
> 
> 标签：javascript, jquery, html, carousel

我将这个快速轮播放在一起，用于循环浏览包含图形和其他各种数据的不同 div。我想要一些指示您当前正在查看的“页面”或 div 的东西。

这是我目前正在遍历 div 的示例。 [http://jsfiddle.net/d6nZP/64/](http://jsfiddle.net/d6nZP/64/)

我的计划是让一行点具有活动或非活动状态，具体取决于行中指示的页面。但即使是基本的页面计数器也可以在这一点上工作。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T00:12:07.533

这是一个简单的轮播寻呼机，尽情享受吧 ;) [http://jsfiddle.net/d6nZP/65/](http://jsfiddle.net/d6nZP/65/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T16:48:27.117

创建了一些你可以使用的东西[http://jsfiddle.net/BadBoyBill/8yHmy/](http://jsfiddle.net/BadBoyBill/8yHmy/)

```
 $("div[id^=marquee]:gt(0)").hide();

    function startTimer(){
        i = setInterval(rotate, 2000);
        return i;
    }

    var intID = startTimer();

    function stopTimer(){
        clearInterval(intID);
    }

    function rotate(){
        reference = $("div[id^=marquee]:visible").hide().next("div[id^=marquee]");
        reference.length ? $(reference).fadeIn() : $("div[id^=marquee]:first").fadeIn() ;
        dot = $(".indicator-on[id^=indicator]").removeClass("indicator-on").next("a[id^=indicator]").addClass("indicator-on");
        dot.length ? $(dot).addClass("indicator-on") : $("a[id^=indicator]:first").addClass("indicator-on");
    }

    $("div[id^=marquee]").each(function(){
        $("#indicators").append("<a href='#' id='indicator' class='indicator'></a>");
        $(".indicator:first").addClass("indicator-on");
    });

    $("a[id^=indicator]").click(function(e){
        var index = $("a[id^=indicator]").index(this);
        //alert(index);
        $("div[id=marquee]").hide();
        $("div[id=marquee]").eq(index).show();
        $("a[id=indicator]").removeClass("indicator-on");
        $("a[id=indicator]").eq(index).addClass("indicator-on");
        stopTimer();
        intID = startTimer();
        e.preventDefault();
    });

    $("a[id=indicator], div[id=marquee]").mouseenter(function(){
        stopTimer();
        //alert("mouseenter");
    }).mouseleave(function(){
        stopTimer();
        intID = startTimer();
        //alert("mouseexit");
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T00:05:54.893

最简单的方法是在内容 div 中放置一些内容作为计数器，即在第一个 div 中放置“1/3”，在下一个“2/3”中，等等。当然，这种方法, 的缺点是对变化反应不快。更好的选择是保留一个单独的变量来跟踪哪个元素是可见的，然后当单击“下一步”按钮时，变量会递增，然后运行检查以查看该索引是否存在。如果不是，则循环回到开头。当然，与上一个按钮相反。

# javascript - OpenLayers.Controls.DrawFeature 的激活/停用失败

> ID：10988888
> 
> 赞同：2
> 
> 时间：2012-06-11T23:47:43.427
> 
> 标签：javascript, openlayers

当我在回调函数的第一行中断并执行此操作时

```
this.active --> true
this.deactivate() --> true
this.activate() --> true
this.deactivate() --> false 
```

这怎么会发生？

让我解释一下这发生在哪里。

该地图有两个图层，每个图层都有一个与之关联的 EditingToolbar。

当用户按下多边形绘制（在 EditingToolbar 中）时，它被绘制在“polygon_layer”上。

当用户按下线画或点画时，图层被切换，用户现在在“矢量”图层上绘图。

当我切换图层时，我需要在 EditingToolbar 中激活正确的按钮，例如：

用户在“polygon_layer”中绘制多边形，现在他想绘制线条。他按下画线按钮（在与polygon_layer 关联的EditingToolbar 中）。

我切换图层并激活该图层的 EditingToolbar 上的画线按钮。

过了一会儿，用户现在想再次绘制多边形，所以我停用了该图层中的所有按钮，切换图层并激活多边形图层的 EditingToolbar 中的绘制多边形按钮。等等。

现在，当我这样做足够多次（3 个开关）时，我注意到按钮不再被停用。

所以我尝试调试并得到了上面描述的这个完全意外的错误（在最顶部）。

请告诉我我做错了什么。

我已经附加了我的代码，我将把它放在`ERROR HERE`发生这种情况的地方。此代码已准备好运行。您可以使用下面的 HTML 代码，只需更改对我提供的 JavaScript 文件的引用（我提供了 JavaScript 文件的内容）

```
JS FILE:
var map;
var editing_toolbar_polygon=null;
var editing_toolbar_vector=null;
var drag_control=null;
var vectors;
var polygon_layer=null;
var epsg900913 = new OpenLayers.Projection('EPSG:900913');
var epsg4326 = new OpenLayers.Projection('EPSG:4326');
//var epsg900913 = new OpenLayers.Projection('EPSG:900913');
// var epsg4326 = new OpenLayers.Projection('EPSG:4326');
var line_control;
var polygon_control;
var renderer;
function initialize() {
    line_control, renderer=OpenLayers.Util.getParameters(window.location.href).renderer;
    renderer= (renderer) ? [renderer] : OpenLayers.Layer.Vector.prototype.renderers;
    // Create the map object
    map = new OpenLayers.Map('map');
     //Create a Google layer
    var gmap = new OpenLayers.Layer.Google(
        "Google Streets", // the default
        {
            numZoomLevels: 20,
            projection: new OpenLayers.Projection("EPSG:900913")
        }
    );
    var wms = new OpenLayers.Layer.WMS( "OpenLayers WMS",
             "http://vmap0.tiles.osgeo.org/wms/vmap0?", {layers: 'basic',
    projection: new OpenLayers.Projection("EPSG:4326")});

    var mystyle=new OpenLayers.StyleMap({
        "default": new OpenLayers.Style({
             fillColor: "#66ccff",
             strokeColor: "#3399ff",
             graphicZIndex: 2,
             strokeWidth: 5,
         }),
        "temporary": new OpenLayers.Style({
             fillColor:"#3399ff",
             strokeColor: "#3399ff",
             strokeWidth:5,  
             pointRadius:10

         })        
    });
    polygon_layer=new OpenLayers.Layer.Vector(
        "Polygon Layer",
        {
            //renderers:renderer,
        }
    );

    vectors= new OpenLayers.Layer.Vector(
        "Vector Layer",
        {
            //renderers:renderer,
        }
    );

    editing_toolbar_polygon=new OpenLayers.Control.EditingToolbar(polygon_layer);
    editing_toolbar_vector=new OpenLayers.Control.EditingToolbar(vectors);
    map.addLayers([gmap,wms,vectors,polygon_layer]);
    map.addControl(new OpenLayers.Control.LayerSwitcher());
    //map.addControl(new OpenLayers.Control.MousePosition());
    map.addControl(editing_toolbar_polygon); 
    map.addControl(editing_toolbar_vector); 
    editing_toolbar_vector.deactivate();
    //for the drag control to work you need to activate it
    drag_control=new OpenLayers.Control.DragFeature(vectors);
    map.addControl(drag_control);
    find_control(editing_toolbar_polygon.getControlsByClass(new RegExp(".*DrawFeature")),"Point").events.register("activate",null,function(e){
      //ERROR HERE
        this.deactivate();
        var picked_button=find_same_control(editing_toolbar_vector.controls,e.object);
        change_layer(polygon_layer,vectors);
        change_control(editing_toolbar_polygon,editing_toolbar_vector);
        picked_button.activate();
    });
    find_control(editing_toolbar_polygon.getControlsByClass(new RegExp(".*DrawFeature")),"Path").events.register("activate",null,function(e){
      //ERROR HERE
        this.deactivate();
        var picked_button=find_same_control(editing_toolbar_vector.controls,e.object);
        change_layer(polygon_layer,vectors);
        change_control(editing_toolbar_polygon,editing_toolbar_vector);
        picked_button.activate();
    });
    find_control(editing_toolbar_vector.getControlsByClass(new RegExp(".*DrawFeature")),"Polygon").events.register("activate",null,function(e){
      //ERROR HERE
        this.deactivate();
        var picked_button=find_same_control(editing_toolbar_polygon.controls,e.object);
        change_layer(vectors,polygon_layer);
        change_control(editing_toolbar_vector,editing_toolbar_polygon);
        picked_button.activate();
    });
    polygon_layer.events.register("beforefeatureadded",null,function(e){  
            polygon_layer.removeAllFeatures();
    });
   // line_control=new OpenLayers.Control.DrawFeature(vectors,OpenLayers.Handler.Path);
    //polygon_control=new OpenLayers.Control.DrawFeature(vectors,OpenLayers.Handler.RegularPolygon);
    //map.addControl(line_control);
    //line_control.activate();
    //map.addControl(polygon_control);
    //polygon_control.activate();
    // Zoom to Vancouver, BC
    map.setCenter(new OpenLayers.LonLat(-123.12, 49.28).transform(epsg4326, epsg900913), 13);         

}

function change_layer(current_layer,next_layer){
   current_layer.setVisibility(false);
   next_layer.setVisibility(true); 
}
function change_control(current_control,next_control){
   current_control.deactivate();
   map.addControl(next_control);
}

//use this when you want to find a specific control type:
// DrawFeature cntrol has many types, Line, Polygon, Point.
// So what you do is pass an array of DrawFeature controls and a type(string), lets say "Point",
// then this function will return a DrawFeature thats specifically for drawing points
function find_control(controls,type){
    var control;
    for(var x in controls){
        if(controls[x].displayClass.search(new RegExp(type+"$"))>0){
             return controls[x];
        }
    }
    return -1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:33:55.063

我只是尝试了一个简单的测试。当您停用控制器时，您只需删除控制器的事件。所以对于 OpenLayers.Control.LayerSwitcher，停用这个控制器是没有用的，因为没有任何改变，你仍然可以选择一个层。

我认为最好的方法是删除多边形的控制器并为线条添加它。

当您选择“polygon_layer”时：

```
map.addControl(editing_toolbar_polygon); 
map.removeControl(editing_toolbar_vector); 
```

当您选择“向量”时：

```
map.addControl(editing_toolbar_vector); 
map.removeControl(editing_toolbar_polygon); 
```

# html - 使用 Matlab 保存 Outlook 电子邮件文件

> ID：10988889
> 
> 赞同：1
> 
> 时间：2012-06-11T23:47:43.657
> 
> 标签：html, email, matlab, outlook, office-interop

我正在尝试通过使用 MATLAB 将 Outlook 电子邮件作为 HTML 文件保存到我的本地计算机来解析它们。我知道 actxserver 允许我在 MATLAB 和 Outlook 之间进行通信，但是如何保存实际的电子邮件？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:38:12.507

```
outlook = actxserver('Outlook.Application');
mapi=outlook.GetNamespace('mapi')
INBOX=mapi.GetDefaultFolder(6)
firstemail=INBOX.Items.GetFirst
subject = firstemail.get('Subject');
body = firstemail.get('HTMLBody'); 
```

来自[http://www.mathworks.com/matlabcentral/newsreader/view_thread/167787](http://www.mathworks.com/matlabcentral/newsreader/view_thread/167787)

或从 OFE 下载 REDMAIL.m：

[http://www.mathworks.com/matlabcentral/fileexchange/33684-readmail](http://www.mathworks.com/matlabcentral/fileexchange/33684-readmail)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T06:00:04.397

使用类似[java-libpst](http://code.google.com/p/java-libpst/)的库从 MATLAB 的 Java 脚本功能中获益。

# c++ - 为什么 Foo::innerConsexpr 不会链接，但 UserLiteral{Foo::innerConsexpr} 会？

> ID：10988891
> 
> 赞同：4
> 
> 时间：2012-06-11T23:47:54.840
> 
> 标签：c++, c++11, constexpr

考虑以下简单的类，这些类是我根据我在实际项目中看到的问题设计的。`constexpr`Triple 是与Foo 类中的内部 s 一起使用的快速样板类型：

```
#include <iostream>

class Triple {
public:
    friend
    std::ostream & operator <<(std::ostream & o, Triple const & t);

    constexpr Triple() : a_(0), b_(0), c_(0) { }
    constexpr Triple(Triple const & other) = default;
    constexpr Triple(double a, double b, double c)
      : a_(a), b_(b), c_(c)
    { }

    ~Triple() = default;

private:
    double a_, b_, c_;
};

std::ostream & operator <<(std::ostream & o, Triple const & t) {
    o << "(" << t.a_ << ", " << t.b_ << ", " << t.c_ << ")";
    return o;
}

class Foo {
public:
    Foo() : triple_(defaultTriple) { }

    Triple const & triple() const { return triple_; }
    Triple & triple() { return triple_; }

    constexpr static float defaultPOD{10};
    constexpr static Triple defaultTriple{11.0, 22.0, 33.0};

private:
    Triple triple_;
}; 
```

如果我随后编写一个`main()`函数来使用来自 的公共内部`constexpr`s `Foo`，如下所示，它将无法链接（使用 g++ 4.7.0，在 Windows 7 上通过 mingw-x86-64 的方式）：

```
int main(int argc, char ** argv) {
    using std::cout;
    using std::endl;

    cout << Foo::defaultPOD << endl;
    cout << Foo::defaultTriple << endl;
} 
```

```
    $ g++ -o test -O3 --std=c++11 test.cpp
    e:\temp\ccwJqI4p.o:test.cpp:(.text.startup+0x28): undefined reference to `Foo::defaultTriple' collect2.exe: error: ld returned 1 exit status

```

但是，如果我写

```
cout << Triple{Foo::defaultTriple} << endl 
```

而不是简单地

```
cout << Foo::defaultTriple << endl 
```

它将链接并运行良好。我可以看到前者更明确地表达了编译时文字的意图，但我仍然很惊讶后者不能正常工作。这是一个编译器错误，还是基于规则的原因`constexpr`，只有第一个示例才能工作？

我会尝试其他编译器以获得更多见解，但目前 GCC 4.7.0 是我唯一可以访问的支持`constexpr`.

另请注意，pod 的表达式在`constexpr`没有显式文字包装的情况下可以正常工作，例如`cout << Foo::defaultPOD`从未给我带来麻烦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T06:58:40.873

出现在不需要常量*表达式*的上下文中的*常量表达式*可以在程序翻译期间进行评估，但它不是必需的，因此可以在运行时进行评估。

如果`constexpr` `static`在程序翻译期间评估成员，编译器可以使用其初始化程序来确定其值，并且不需要成员的定义。

如果该成员在运行时评估的上下文中使用，则需要其定义。

在`cout << Foo::defaultTriple << endl`您的编译器中生成代码以在运行时执行左值到右值的转换，`Foo::defaultTriple`因此对象需要定义。

在`cout << Triple{Foo::defaultTriple} << endl`编译器在程序翻译期间进行评估以创建本身可能在运行时评估`Foo::defaultTriple`的临时。`Triple`

除非您的`constexpr`对象仅在需要*常量表达式*的上下文中进行评估，否则您必须为它们提供定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T01:33:56.677

`defaultPOD`并且`defaultTriple`在类中声明不是定义。如果您想在需要知道其地址的地方使用它们，则必须在类声明之外定义它们。

那么为什么`cout << Foo::defaultPOD << endl;`有效，但`cout << Foo::defaultTriple << endl;`没有呢？

`defaultPOD`被声明为 a `float`，所以当你这样做时，`cout << Foo::defaultPOD`它会调用 the `operator<<(float val);`，它的参数*是 value*。此调用不需要定义，因为您只使用该*值*（它不是 3.2.3 定义的 odr-used）。如果您尝试传递`Foo::defaultPOD`给接受引用的函数，则需要定义它。

但是，`Foo::defaultTriple`失败是因为`operator <<`需要定义一个`Triple`引用`Foo::defaultTriple`。但是，即使在将 更改`operator<<`为按值传递之后，在我的测试中，我仍然会遇到链接器错误。只有当我从中删除成员变量`Triple`并按`operator<<`值传递时，代码才会在不定义静态成员变量的情况下编译。（当您从`Triple`编译器中删除成员变量时，我相信会[优化变量）。](http://en.wikipedia.org/wiki/Constant_folding)

（这是一个[很好的参考资料](http://gcc.gnu.org/wiki/VerboseDiagnostics#missing_static_const_definition)，解释了其中的一些内容）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T01:22:32.097

错误来自链接器，它找不到`Foo::defaultTriple`静态成员。

这里的问题是“声明”和“定义”之间的区别。你的类中的静态行是声明，你还需要一个定义。在 C++ 中，`static`在 a 中定义的每个字段`class`也应该出现在 .cpp 文件中：

```
// .hpp

class X {
    static int Q;
};

// .cpp

int X:Q = 0; 
```

在您的情况下，您应该在 .cpp 文件中的某处有这一行：

```
Triple foo::defaultTriple; 
```

# php - PHP Soap WebsService，如何重定向客户端

> ID：10988894
> 
> 赞同：1
> 
> 时间：2012-06-11T23:48:10.033
> 
> 标签：php, soap

我正在 SOAP 中执行 PHP 单点登录 (SSO) Web 服务。

但是这个 Web 服务是独立于站点构建的。这意味着有一个客户端尝试单点登录，有一个 Web 服务对客户端进行身份验证并重定向到目标站点。

因此，在 Web 服务中，当我执行位置重定向时，我只是遇到了肥皂故障。我想知道是否甚至可以使用 SOAP 重定向客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:29:51.837

在您的情况下，让 SOAP 服务器发送 HTTP 位置标头以初始化重定向是没有意义的。因为它重定向 SOAP 客户端，以便将 SOAP 请求发送到另一个 SOAP 服务器。但是，在您的情况下，重定向位置不是 SOAP 服务器。

在您的情况下，您只需要告诉 SSO 客户端用户已登录即可。然后站点知道用户已经登录。

当您还想将用户重定向到某个地方时，也请返回重定向位置，然后具有 SOAP 客户端的 PHP 脚本可以进行重定向。那应该这样做。

另请参阅：[使用自定义 SOAP 标头 (asp.net) 的 Web 服务重定向](http://forums.asp.net/t/1442999.aspx/1)

# javascript - 获取给定经纬度范围内的邮政编码

> ID：10988903
> 
> 赞同：3
> 
> 时间：2012-06-11T23:49:28.817
> 
> 标签：javascript, asp.net-mvc-3, google-maps-api-3, mapping, mapquest

我正在使用 google-mapquest 映射 API。我需要从给定的经纬度位置在某个区域附近添加一些兴趣点。我搜索了 google 和 mapquest 文档，以确定是否有一种方法可以获取该区域的所有邮政编码，但我没有找到任何可以做到这一点的方法。

我尝试了 harvesine 实现来计算该半径/纬度经度中给出的最近点，它工作正常。这种方法的问题是我需要不断更新数据库，所以我不太喜欢它。

问题是：是否有服务（google-mapquest 或其他）可以为您提供此信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:15:44.480

不，我知道这两种服务都没有 API。您最好的选择是获取邮政编码数据库并使用它。那里有一些非常好的便宜的。我更喜欢[http://www.zip-codes.com/zip-code-database.asp](http://www.zip-codes.com/zip-code-database.asp)。他们 40 美元的包裹非常准确，每月更新，并获得 USPS 许可（因此您知道它的质量数据）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:59:25.190

**更新：**

我找到了一个完全符合我需要的***WebService 。***您可以只提供一个简单的邮政编码和一个国家或一个完整的地址，并在响应中获得经度/纬度。然后我发送返回的纬度和经度以获取提供的坐标附近的所有邮政编码的列表以及也可以自定义的给定半径。您可以过滤您希望服务返回的总行数，或者即使您打算使用英里或公里作为度量单位。

因此，基本上使用返回的信息，我将获得的每个最近的邮政编码的坐标提供给谷歌 API，并将这些兴趣点渲染到您需要显示的地图中。

这些服务由***GeoNames***提供。它是一个致力于地理定位服务的组织。他们还提供高级数据，但特别是这些服务是免费使用的，显然信息不如高级数据准确，但实际上在我的测试中我发现这是值得信赖的并且响应也非常快。另一个好处是获取使用 Geonames 服务的密钥的过程非常简单。

我给你留下了我正在谈论的服务的链接。

可用服务列表： [http ://www.geonames.org/export/web-services.html](http://www.geonames.org/export/web-services.html)

希望它可以帮助很多人。问候！

# javascript - 在 Javascript 上创建函数后如何更改函数接受的参数？

> ID：10988905
> 
> 赞同：1
> 
> 时间：2012-06-11T23:49:42.357
> 
> 标签：javascript, function, arguments

或者，换句话说，如何使这项工作：

```
function foo(){}
//do something that modifies foo as if it was defined with "function foo(a,b,c){};"
console.log(foo.length); 
//output: 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T01:12:05.800

这是可能的，但可能不是很好：

```
function lengthDecorator(fun) {
    function update(len) {
        var args = []; // array of parameter names
        for (var i = 0; i < len; ++i) {
            args.push('a' + i);
        }

        var result = new Function('fun',
            'return function(' + args.join(',') + ') {' +
                'var args = Array.prototype.slice.call(arguments);' +
                'return fun.apply(this, args);' + // call supplied function
            '}'
        ); // create a function that will return a function

        result = result(fun); // make the fun param known to the inner function
        result.update = update;
        return result;
    }
    return update(fun.length);
} 
```

示例用法：

```
var foo = lengthDecorator(function(a,b) {
    return a+b;
});

print('foo.length: ' + foo.length);
print('foo(2, 3): ' + foo(2, 3));

print('');
foo = foo.update(42);
print('foo.length: ' + foo.length);
print('foo(2, 3): ' + foo(2, 3)); 
```

输出：

```
foo.length: 2
富（2、3）：5

foo.length：42
富（2、3）：5

```

（现场演示：[Ideone.com](http://ideone.com/0th5v)、[jsFiddle](http://jsfiddle.net/VfwS7/1/)）

`lengthDecorator`用一个函数包装提供的函数，该函数采用与提供的函数相同数量的参数。可以使用 更改参数计数`update`。

比照

*   [`new Function(...)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function)：动态创建新功能。
*   [`fun.apply(...)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)：“使用给定的 this 值和作为数组提供的参数调用函数。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T00:08:13.200

```
function foo() {}
alert(foo.length); // 0

foo = function (a, b, c) {}
alert(foo.length); // 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T23:54:46.423

我不确定您实际上要做什么，但是您可以将旧的存储`foo`在 var 中，然后重新定义`foo`.

```
function foo() {...}

var oldfoo = foo;
foo = function (a, b, c) {
    oldfoo();
} 
```

但有什么意义呢？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-12T00:03:28.593

函数对象的`length`属性是不可写和不可配置的，所以没有办法改变它的值。

您可以定义一个在内部调用原始函数的新函数...

# ssrs-2008 - SQL Server Reporting Services (MSSQLSERVER) 搞砸了

> ID：10988907
> 
> 赞同：1
> 
> 时间：2012-06-11T23:50:15.603
> 
> 标签：ssrs-2008, reporting-services

我正在尝试调查是什么原因导致我的服务 SQL Server Reporting Services (MSSQLSERVER) 出现问题并且没有响应，从而在我的 SSRS 报告中产生错误。当用户运行他们的报告时，他们会收到一个模棱两可且令人困惑的错误消息，例如：`Server Error in ‘/Reports’ application`.

仅通过停止并重新启动服务才能解决此问题。它只来过几次，但我不想再得到它。

报告的稳定性是我们团队的首要任务。我想知道原因或将来如何防止此错误。

# ruby-on-rails - git push heroku 大师

> ID：10988910
> 
> 赞同：0
> 
> 时间：2012-06-11T23:50:20.000
> 
> 标签：ruby-on-rails, heroku, bundler

我在 heroku 部分遇到了问题，并被困在这里。以下是我输入的命令和它出来的结果。我用 railsinstaller 在 rails 上安装了 ruby​​。

```
C:\Sites\rails_projects\first_app>git push heroku master
Counting objects: 64, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (51/51), done.
Writing objects: 100% (64/64), 26.12 KiB, done.
Total 64 (delta 3), reused 0 (delta 0)

-----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.2.0.pre
       Running: bundle install --without development:test --path vendor/bundle -
-binstubs bin/
       Fetching gem metadata from https://rubygems.org/.........
       Bundler could not find compatible versions for gem "railties":
       In Gemfile:
       rails (= 3.2.1) ruby depends on
       railties (= 3.2.1) ruby
       jquery-rails (= 2.0.0) ruby depends on
       railties (3.2.5)

 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:empty-fire-5502.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:empty-fire-5502.git' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T00:40:02.363

**' railties** ' gem存在依赖冲突。它试图加载同一个 gem 的不同版本。

如果您在 Gemfile 中指定了“ **railties** ”gem，请尝试将其删除。当您指定“ **rails** ” gem 时，它已经包含在内。

而且，这个 SO 问题看起来类似于你的问题[捆绑安装问题](https://stackoverflow.com/questions/7256812/bundle-install-problem)

# ruby-on-rails - Rails 3：验证，存在：true 仅验证文本字段但不验证单选按钮

> ID：10988911
> 
> 赞同：0
> 
> 时间：2012-06-11T23:50:33.317
> 
> 标签：ruby-on-rails, ruby, validation, nested-forms

所以我正在使用嵌套表单开发 Rails 应用程序的这一部分。我无法让验证正常工作。所以父表单是存储问题的模型，子表单是存储答案的模型。

有 3 种不同类型的问题：数字（文本字段）、是/否（单选按钮）、同意/不同意（单选按钮）。

我在答案模型中有一个简单的验证：`validates :value, presence: true`

因此，例如，我创建了一个编号类型的问题，它会生成一个文本字段，如果我将其提交为空，则验证有效并且错误会呈现在页面上。但是，如果我选择其他 2 个选项之一，这两个选项都是单选按钮，我可以在不进行选择的情况下提交表单，并且验证不起作用。我在控制台中注意到只有问题被插入到数据库中，但答案不是（使用单选按钮形式）；通常我会假设至少会传递 nil 值，但 INSERT 查询甚至不会出现。

我在单选按钮表单中有一个隐藏字段，并创建了一个更改处理程序，当所选单选按钮更改时，我将单选按钮的值设置为隐藏字段。但是，我真的很想深入挖掘并找出真正的问题，因为在禁用 javascript 的情况下备份总是好的。

**答案模型**

```
class Answer < ActiveRecord::Base
  attr_accessible :value, :user_id, :meter_id, :question_id
  belongs_to :user
  belongs_to :question

  validates :value, presence: true, :numericality => true

  before_save :associate_with_meter_id
  before_save :associate_with_user_id

  def associate_with_meter_id
    self.meter_id = question.user.meter_id
  end

  def associate_with_user_id
    self.user_id = question.user.id
  end

end 
```

**问题模型**

```
class Question < ActiveRecord::Base
    attr_accessible :description, :taxonomy, :user_id, :answers_attributes
  belongs_to :user
  has_many :answers

  accepts_nested_attributes_for :answers

  validates :description, presence: { :on => :create }
  validates :taxonomy, presence: { :on => :create }

  def relevance_score
    rand
  end

end 
```

**日志**

```
Started POST "/questions" for 127.0.0.1 at 2012-06-12 09:21:25 -0400
Processing by QuestionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"knwvfB6q6Q7qoTprc/3R4Et3r13xWzpAB1Iq8FsRndQ=", "question"=>{"description"=>"How are you?", "taxonomy"=>"yesno"}, "submit_button"=>"Ask"}
  User Load (0.6ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 585460615 LIMIT 1
  SQL (0.1ms)  BEGIN
  SQL (4.3ms)  INSERT INTO `questions` (`avganswer`, `coeff`, `created_at`, `description`, `pval`, `quality`, `rank`, `responses`, `rsquare`, `skips`, `taxonomy`, `updated_at`, `user_id`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["avganswer", nil], ["coeff", nil], ["created_at", Tue, 12 Jun 2012 13:21:25 UTC +00:00], ["description", "How are you?"], ["pval", 0.0], ["quality", 0.0], ["rank", nil], ["responses", nil], ["rsquare", 0.0], ["skips", nil], ["taxonomy", "yesno"], ["updated_at", Tue, 12 Jun 2012 13:21:25 UTC +00:00], ["user_id", 585460615]]
   (0.3ms)  COMMIT
  SQL (0.0ms)  BEGIN
   (0.0ms)  COMMIT
Redirected to http://localhost:3000/questions
Completed 302 Found in 14ms (ActiveRecord: 0.0ms)

Started GET "/questions" for 127.0.0.1 at 2012-06-12 09:21:25 -0400
Processing by QuestionsController#index as HTML
  User Load (0.3ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 585460615 LIMIT 1
  Question Load (1.3ms)  SELECT `questions`.* FROM `questions` WHERE `questions`.`user_id` = 585460615
  Rendered shared/_error_messages.html.erb (0.0ms)
  Rendered questions/_form.html.erb (23.9ms)
   (0.5ms)  SELECT COUNT(*) FROM `questions` 
  Rendered questions/index.html.erb within layouts/application (48.8ms)
  Question Load (1.6ms)  SELECT `questions`.* FROM `questions` 
   (0.4ms)  SELECT COUNT(*) FROM `questions` WHERE `questions`.`user_id` = 585460615
  Rendered /Users/gregorygrillone/.rvm/gems/ruby-1.9.3-p194/bundler/gems/gauges-58ad28a906b2/app/views/gauges/_gauge.html.erb (0.1ms)
  CACHE (0.0ms)  SELECT `questions`.* FROM `questions` 
  CACHE (0.0ms)  SELECT COUNT(*) FROM `questions` WHERE `questions`.`user_id` = 585460615
Completed 200 OK in 72ms (Views: 62.2ms | ActiveRecord: 4.2ms)

Started GET "/assets/application.css" for 127.0.0.1 at 2012-06-12 09:21:25 -0400
Served asset /application.css - 304 Not Modified (0ms)
[2012-06-12 09:21:25] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/application.js" for 127.0.0.1 at 2012-06-12 09:21:25 -0400
Served asset /application.js - 304 Not Modified (0ms)
[2012-06-12 09:21:25] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

**问题控制器**

```
class QuestionsController < ApplicationController
  respond_to :html, :json

  def index
    @question = current_user.questions.new
    @questions = current_user.questions.all
  end

  def create
    @question = current_user.questions.new(params[:question])
    if !params[:update_button]
      if @question.valid?
        if params[:next_button] || !@question.save
          @questions = current_user.questions.all
          render 'index'
        elsif !params[:next_button] && params[:submit_button] && @question.save
          flash[:success] = "Your question and answer have been saved."
          respond_with @question, :location => questions_path
        end
      else
        @questions = current_user.questions.all
        render 'index'
      end
    else
      @questions = current_user.questions.all
      render 'index'
    end
  end

  def next
    @question = current_user.unanswered.first
    @answer = Answer.new(:question => @question, :user => current_user)
    respond_to do |format|
      format.js
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:00:44.167

我认为您的视图代码没有正确创建表单结构。

您应该能够通过编写以您期望的格式发布参数的功能/控制器测试来确认您的控制器代码是正确的。（比尝试将一半的应用程序发布到 StackOverflow 更好/更快的反馈！）

您将能够在不到一个小时的时间内创建一个体面的测试，而这些知识将使您在其他方面做得更好更快。相信我，学习如何正确测试代码是值得的。

一旦你证明你的控制器工作正常，你很可能会发现你的视图代码没有正确地创建嵌套答案的表单输入。您可以从日志文件中看到它甚至没有尝试发布它们。

您可能希望将创建和更新操作分开，检查不同按钮的代码有点混乱，并且很难理解页面和控制器之间的“合同”。（例如，如果下一个但不更新但提交......）这不是现在导致您的问题，而只是您可能想要在它以后咬你之前清理的东西。

# webpage - 在网页上创建可用空间清单

> ID：10988912
> 
> 赞同：1
> 
> 时间：2012-06-11T23:50:34.490
> 
> 标签：webpage

我正在开发一个原型，以在网页上的特定位置/位置加载内容。我将有一个表格，其中包含内容和网页放置/位置的映射。

问题：

1.  我们如何定义网页上的展示位置？按 Web 部件名称、div id 等？

2.  我们如何将网页分成多个部分并分配展示位置/位置？

3.  如果我必须维护一个表格来存储网页上的展示位置/位置，它应该包含哪些详细信息？

欣赏建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:44:15.477

1.  通常你使用 div 的。如果该部分出现不止一次，则使用类属性。当项目在页面上仅出现一次时使用 id，例如标题。

2.  你可以用 CSS 做到这一点

3.  表的布局被认为是不好的做法，使用 css 列。您需要的数据至少是位置和数据本身以及您想要显示的任何元数据，但如果它是关系表，则可以稍后添加。

例如：[http ://www.456bereastreet.com/lab/developing_with_web_standards/csslayout/2-col/](http://www.456bereastreet.com/lab/developing_with_web_standards/csslayout/2-col/)

# java - 简单的休眠应用程序不起作用：PropertyAccessException：无法通过反射 getter 获取字段值

> ID：10988913
> 
> 赞同：1
> 
> 时间：2012-06-11T23:50:51.357
> 
> 标签：java, mysql, hibernate, ejb, jta

我正在为一个简单的休眠应用程序而苦苦挣扎。（JBoss AS 7.1.1，休眠 4.1）

我的实体 bean：

```
@Entity
public class User implements Serializable {

    @Id
    private Long userId;

    public Long getUserId() {
    return userId;
    }

    public void setUserId(Long userId) {
        this.userId = userId;
    }
} 
```

我的persistence.xml：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="2.0">
<persistence-unit name="users" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>java:jboss/datasources/myDS</jta-data-source>
    <jar-file>users.jar</jar-file>
    <class>de.test.users.entities.User</class>
    <properties>
        <property name="hibernate.hbm2ddl.auto" value="update" />
        <property name="hibernate.archive.autodetection" value="class" />
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />
        <property name="hibernate.show_sql" value="true" />
    </properties>
</persistence-unit> 
```

我的简单 DAO bean：

```
@Stateless
public class UserManagerBean implements UserManager {

    @PersistenceContext(name = "users")
    private EntityManager em;

    public UserManagerBean() {
        // TODO Auto-generated constructor stub
    }

    @Override
    public void createUser() {
        User user = new User();
            user.setUserId(42L);
    em.persist(user);
    em.flush();
    }
} 
```

我通过在 JSF 支持 bean 中的 UserManagerBean 的 EJB 注入来调用 createUser 方法。当调用persist方法时，我得到以下信息：

```
javax.faces.el.EvaluationException: javax.ejb.EJBException: javax.persistence.PersistenceException: org.hibernate.PropertyAccessException: could not get a field value by reflection getter of de.test.users.entities.User.userId
at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
at javax.faces.component.UICommand.broadcast(UICommand.java:315)
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50)
at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
at java.lang.Thread.run(Thread.java:722)
Caused by: javax.ejb.EJBException: javax.persistence.PersistenceException: org.hibernate.PropertyAccessException: could not get a field value by reflection getter of de.test.users.entities.User.userId
at org.jboss.as.ejb3.tx.CMTTxInterceptor.handleExceptionInOurTx(CMTTxInterceptor.java:166)
at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:230)
at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:304)
at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:190)
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59)
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:32)
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45)
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:165)
at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:173)
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:72)
at de.test.users.service.UserManager$$$view1.createUser(Unknown Source)
at de.test.users.User.createUser(User.java:17)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.el.parser.AstValue.invoke(AstValue.java:262)
at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39)
at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)
at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
... 25 more
Caused by: javax.persistence.PersistenceException: org.hibernate.PropertyAccessException: could not get a field value by reflection getter of de.test.users.entities.User.userId
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1361)
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1289)
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1295)
at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:859)
at org.jboss.as.jpa.container.AbstractEntityManager.persist(AbstractEntityManager.java:563)
at de.test.users.service.UserManagerBean.createUser(UserManagerBean.java:31)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.jboss.as.ee.component.ManagedReferenceMethodInterceptorFactory$ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptorFactory.java:72)
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:374)
at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:127)
at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.processInvocation(Jsr299BindingsInterceptor.java:135)
at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:36)
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53)
at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:36)
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
at org.jboss.as.jpa.interceptor.SBInvocationInterceptor.processInvocation(SBInvocationInterceptor.java:47)
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
at org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:82)
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21)
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:53)
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
at org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:51)
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:228)
... 56 more
 Caused by: org.hibernate.PropertyAccessException: could not get a field value by reflection getter of de.test.users.entities.User.userId
at org.hibernate.property.DirectPropertyAccessor$DirectGetter.get(DirectPropertyAccessor.java:61)
at org.hibernate.tuple.entity.AbstractEntityTuplizer.getIdentifier(AbstractEntityTuplizer.java:341)
at org.hibernate.persister.entity.AbstractEntityPersister.getIdentifier(AbstractEntityPersister.java:4260)
at org.hibernate.persister.entity.AbstractEntityPersister.isTransient(AbstractEntityPersister.java:3982)
at org.hibernate.engine.internal.ForeignKeys.isTransient(ForeignKeys.java:209)
at org.hibernate.event.internal.AbstractSaveEventListener.getEntityState(AbstractSaveEventListener.java:509)
at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:118)
at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:78)
at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:725)
at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:701)
at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:705)
at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:853)
... 84 more
 Caused by: java.lang.IllegalArgumentException: Can not set java.lang.Long field de.test.users.entities.User.userId to de.test.users.entities.User
at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:164)
at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:168)
at sun.reflect.UnsafeFieldAccessorImpl.ensureObj(UnsafeFieldAccessorImpl.java:55)
at sun.reflect.UnsafeObjectFieldAccessorImpl.get(UnsafeObjectFieldAccessorImpl.java:36)
at java.lang.reflect.Field.get(Field.java:372)
at org.hibernate.property.DirectPropertyAccessor$DirectGetter.get(DirectPropertyAccessor.java:58)
... 95 more 
```

知道如何解决这个问题吗？顺便说一句，hibernate 似乎无法自动检测 jar 文件中的类。当我从persistence.xml 中删除类元素时，日志告诉我hibernate 没有为“用户”持久性单元加载任何实体。这可能与异常有关吗？

我的项目结构看起来或多或少是这样的：

```
project-ear
|-- lib
|-- META-INF
|   |
|   |-- maven
|   |-- persistence.xml
|   |-- application.xml
|
|-- users.jar
|
|-- users.war 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T09:49:36.240

我能够自己解决问题。我看到包含实体 bean 的 user.jar 实际上是由 Maven 复制的。它被放置在 user.war 的 lib 文件夹以及 ear 包的根 lib 文件夹中。我从 war 包的 lib 文件夹中删除了它，包括 Hibernate 的类自动检测在内的所有内容现在都按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T00:55:41.990

userID 的数据类型是什么？这部分错误：

```
Can not set java.lang.String field de.test.users.entities.User.userId to       
    de.test.users.entities.User 
```

让我相信它是*varchar*或*text*。尝试：

```
@Id
private String userId; 
```

如果是这样的话。

# powershell - Powershell - HttpRequests 莫名其妙的超时

> ID：10988915
> 
> 赞同：2
> 
> 时间：2012-06-11T23:50:55.750
> 
> 标签：powershell, httprequest, powershell-2.0

我有一个 powershell 脚本，可以监视少数服务器上的多个页面。它提供来自每个的 HTTP 状态代码，以确定服务器的健康状况。

这已经完美运行了几个星期，但是今天，在没有对脚本进行任何更改的情况下，我开始收到超时错误（“操作已超时”）。服务器的 80 端口上的 telnet 让我立即通过，我可以通过我能想到的所有其他机制愉快地连接。

最后，我通过将超时时间从 1000 毫秒更改为 2000 毫秒来更新脚本，并且脚本立即再次运行。在我将它改回 1000 毫秒后它仍然有效。

这是第二次以相同的分辨率发生类似的事情。发生了什么，我该如何避免？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:19:41.137

此脚本可能会有所帮助，对于您的情况可能有点过分。

```
function HTTP-Get() {
    param
    (
        [string] $target
    )

    try
    {
        $webRequest = [System.Net.WebRequest]::Create($target)
        $webRequest.Method = "GET"

        [System.Net.WebResponse] $resp = $webRequest.GetResponse();
        $rs = $resp.GetResponseStream();

        [System.IO.StreamReader] $sr = New-Object System.IO.StreamReader -argumentList $rs;
        [string] $results = $sr.ReadToEnd();
    }

    catch [System.Net.WebException] 
    {
        Write-Warning $_
        if ($_.response)
        {
            $_.response.Close();    
        }
    }

    finally
    {
        if ($sr)
        {
            $sr.close();
            $sr.dispose();
        }
        if ($resp)
        {
            $resp.close();
        }
    }

    return $results;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-29T16:00:01.063

正如我在评论中提到的：我在 powershell 上遇到了这个问题，并且没有任何 .NET http 技巧起作用（httprequest、webclient）。我使用的网站与邮递员和其他 http 助手一起工作得很好。

似乎问题与 .NET 版本、sp 等有关。我将代码更改为使用 COM 而不是 .NET，现在它工作正常。

```
......

$HTTPREQUEST_SETCREDENTIALS_FOR_SERVER = 0
$Http = new-object -com "WinHttp.WinHttpRequest.5.1"
$Http.open("GET", "http://....", $false)

$Http.SetCredentials($userName, $password, $HttpREQUEST_SETCREDENTIALS_FOR_SERVER) 

$Http.send()
$status = [int]$Http.Status
$responseText = $Http.responseText

..... 
```

我希望它有帮助:)

# linux-kernel - 如何捕捉网卡中断（上/下）？

> ID：10988916
> 
> 赞同：6
> 
> 时间：2012-06-11T12:19:32.670
> 
> 标签：linux-kernel

我正在编写一个 linux 内核模块，当链接启动/关闭时需要通知，现在我已经读到我可以打开`netlink socket`并监听`RTMGRP_LINK`（网络接口创建/删除/启动/关闭事件）多播组，但这是从用户空间使用的......任何人都知道如何从内核空间捕获这个中断？我正在使用内核 2.6.35

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T07:17:44.033

查看`<linux/netdevice.h>`，特别是有关 netdev 通知程序链的内容。您可以调用`register_netdevice_notifier()`来注册一个回调（在许多其他事件类型中）将接收`NETDEV_UP`和`NETDEV_DOWN`事件。

# ios - 更改 UINavigationBar 中 UIBarButtonItem 的宽度

> ID：10988918
> 
> 赞同：24
> 
> 时间：2012-06-11T23:51:14.430
> 
> 标签：ios, uinavigationbar, uibarbuttonitem, uinavigationitem

我正在创建一个 UIBarButtonItem 并将其添加到我的导航栏中，如下所示：

```
(void)viewDidLoad { 

   ...

   // Add the refresh button to the navigation bar
   UIButton *refreshButton = [UIButton buttonWithType:UIButtonTypeCustom];
   [refreshButton setFrame:CGRectMake(0,0,30,30)];
   [refreshButton setImage:[UIImage imageNamed:@"G_refresh_icon.png"] forState:UIControlStateNormal];
   [refreshButton addTarget:self action:@selector(refreshData) forControlEvents:UIControlEventTouchUpInside];
   UIBarButtonItem *refreshBarButton = [[[UIBarButtonItem alloc] initWithCustomView:refreshButton] autorelease];
   self.navigationItem.leftBarButtonItem = refreshBarButton;
} 
```

运行时它看起来是正确的，但是我可以通过在 x = 0 到大约 100 之间的任意位置点击导航栏来选择条形按钮项。如何将可选区域调整为 30 像素的宽度？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2018-04-05T15:13:54.697

从 iOS 11 开始，仅设置框架`customView`而`UIBarButtonItem`不是不起作用（如[接受的答案](https://stackoverflow.com/a/13693015/2941553)中建议的那样）。似乎添加 Autolayout 以`UIBarButtonItem`覆盖设置的框架。 [这篇文章](https://skyebook.net/blog/2017/09/uibarbuttonitem-sizing-in-ios-11/)给了我这个想法：

```
navigationItem.leftBarButtonItem?.customView = yourCustomButtonView
let desiredWidth = 35.0
let desiredHeight = 35.0

let widthConstraint = NSLayoutConstraint(item: yourCustomButtonView, attribute: .width, relatedBy: .equal, toItem: nil, attribute: .notAnAttribute, multiplier: 1.0, constant: desiredWidth)
let heightConstraint = NSLayoutConstraint(item: yourCustomButtonView, attribute: .height, relatedBy: .equal, toItem: nil, attribute: .notAnAttribute, multiplier: 1.0, constant: desiredHeight)

yourCustomButtonView.addConstraints([widthConstraint, heightConstraint]) 
```

另请注意，您最好将其`UIButton`用作您的`CustomView`，因为您必须依靠它来触发操作。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-03T22:36:58.863

`UIBarButtonItem`您可能会考虑的一种方法是通过调用创建一个`initWithCustomView:`. 这并不理想，因为您没有开箱即用的“选定”状态，并且您必须将带边框的背景（如果想要那种外观）与您的按钮图像合成，但是您可以更直接地为您的工具栏项。如果您使用文本作为标题而不是图像，您可能仍需要添加背景图像作为子视图。无论如何，我现在遇到了同样的问题，这段代码对我有用：

```
UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"button-image.png"]];
imageView.frame = CGRectMake(0, 0, 43, 30);

UIBarButtonItem *barButtonItem = [[UIBarButtonItem alloc] initWithCustomView:imageView];

self.navigationItem.leftBarButtonItem = barButtonItem; 
```

现在这是我所知道的限制`UIBarButtonItem`添加到 s 的 s`UINavigationController`的自动调整大小的唯一方法`navigationItem`。

或者[试试 Maggie 的解决方案，它比我的更彻底](https://stackoverflow.com/questions/6817469/add-image-to-uibarbuttonitem-button)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-19T13:06:10.280

关键是要意识到您正在更改自定义视图的宽度，而不是其`UIBarButton`本身。

因此代码是：

```
CGRect resizedFrame = myBarButtonItem.customView.frame;
resizedFrame.size.width = myNewWidth;
myBarButtonItem.customView.frame = resizedFrame; 
```

您还需要触发布局更改：

```
[myNavigationBar setNeedsLayout]; 
```

所有这一切都不言而喻，布局是通过自动调整大小和框架完成的。使用自动布局侵入导航栏没有成功。请参阅我的问题[Auto Layout with UINavigationBar 和 UIBarButtonItem](https://stackoverflow.com/questions/17729947/auto-layout-with-uinavigationbar-and-uibarbuttonitem)。

*抱歉刚刚意识到我的代码与@oscartzombie 几乎相同。不是故意的！我会留下这个答案，因为我认为值得添加布局和其他点，除了在不参考 Interface Bulder 或图像的情况下进行解释。*

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-11T15:27:06.070

您可以通过将图像从界面构建器拖放到条形按钮项并使用以下代码更改自定义视图的宽度来实现：

```
CGRect frame = self.navigationItem.leftBarButtonItem.customView.frame;
frame.size.width = 141;
self.navigationItem.leftBarButtonItem.customView.frame = frame; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-11-13T12:16:03.973

这些解决方案都不适合我，我发现自动调整大小会覆盖您在代码中编写的尺寸。

通过 UIButton 方式创建按钮后，编写如下代码块：

```
[self.navigationItem.rightBarButtonItem.customView.widthAnchor constraintEqualToConstant:mWidth].active = YES;
[self.navigationItem.rightBarButtonItem.customView.heightAnchor constraintEqualToConstant:mHeight].active = YES; 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-05-27T09:57:06.957

以下方法有效，请参阅更改按钮宽度和高度以及添加操作项的代码。

```
UIButton *imageButton = [[UIButton alloc]initWithFrame:CGRectMake(0, 0, 22, 22)];
[imageButton setBackgroundImage:[UIImage imageNamed:@"message_button"] forState:UIControlStateNormal];
[imageButton addTarget:self action:@selector(messageButtonTapped) forControlEvents:UIControlEventAllEvents];
UIBarButtonItem *leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:imageButton];
self.navigationItem.leftBarButtonItem = leftBarButtonItem; 
```

注意：UIBarButtonItem 的目标和动作不适用于图像视图

# jquery - 无法在同一页面上显示多个 jPicker 颜色选择器

> ID：10988920
> 
> 赞同：1
> 
> 时间：2012-06-11T23:51:24.003
> 
> 标签：jquery, jquery-plugins, color-picker, jpicker

我很难让多个相同类型的 jPicker 实例显示在同一个网页上。这是一些示例代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="js/jpicker-1.1.6/jpicker-1.1.6.min.js"></script>
    <link href="js/jpicker-1.1.6/css/jPicker-1.1.6.min.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <div id="testArea">
        <script type="text/javascript">            
            $(document).ready(function() {
                $('#Expandable').jPicker( {
                    window: {
                        expandable: true,
                        alphaSupport: true,
                        position: {
                            x: '40px',
                            y: '0px'
                        }
                    },
                    images: {
                        clientPath: "js/jpicker-1.1.6/images/"
                    }
               });
            });
        </script>

        <div id="colorSelectors">
            <input type="checkbox" value="Hamburgers" checked="yes" /> Hamburgers
                <span id="Expandable"></span> <br />
            <input type="checkbox" value="Hot Dogs" checked="yes" /> Hot Dogs
                <span id="Expandable"></span> <br />
        </div>
    </div>
</body>
</html> 
```

这是我得到的：

![我的示例网页](../Images/e897d2fdd79983a19aeb5828c8450d20.png)

对我来说奇怪的是，如果我使用不同类型的 jPickers，我可以在同一页面上有多个实例，但每种类型只有一个实例。例如，我可以在同一页面上使用“可扩展”选择器和“内联”选择器，但不能在同一页面上使用 2 个“内联”选择器。

一个例外是当 jPicker 绑定到一个`<input>`元素时，我可以让多个实例工作，就像[jPicker 网站上的示例](http://www.digitalmagicpro.com/jPicker/#Binded)一样。但我不能这适用于任何其他类型的选择器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T23:58:44.710

也许因为有重复的 id，请尝试使用一个类

```
$('.Expandable').jPicker( {
...
    <div id="colorSelectors">
        <input type="checkbox" value="Hamburgers" checked="yes" /> Hamburgers
            <span class="Expandable"></span> <br />
        <input type="checkbox" value="Hot Dogs" checked="yes" /> Hot Dogs
            <span class="Expandable"></span> <br />
    </div> 
```

# git - Git 回滚我的提交

> ID：10988926
> 
> 赞同：1
> 
> 时间：2012-06-11T23:51:40.010
> 
> 标签：git, version-control

我提交我的并将它们推送到 Git。我的同事提交了他们的更改。我提交了更多我的更改。

有人告诉我，我的更改无法针对此版本进行测试，必须在下一个版本中进行。我必须撤消所有更改，并且仅撤消我的更改。我怎样才能做到这一点？

在将更改推送或拉入 Git 时，我使用 tortoise。我正在使用 Windows XP 机器。

是的，在推动我的提交之前，我让我的同事工作。

我不得不提一下，我的更改是针对完全不同的文件的。我的同事都没有碰它们。

它只是一个分支，即集成分支。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:18:43.023

为什么干脆不使用`git revert`命令？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T00:43:55.320

假设最初的集成 Repo 是 I，当你的提交是 Y，后来你的同事提交是 C。所以开发线可能是这样的。目前文件系统为F。

```
 (F)    
I--Y--C1--C2
           ↑
          HEAD 
```

正如你提到的

> 我不得不提一下，我的更改是针对完全不同的文件的。我的同事都没有碰它们。

因此，您可以继续执行 reset HEAD~1 直到到达 I，即*您*进行任何更改之前的提交。假设您提交后有两次提交。您可以使用它来达到提交 I。

```
git reset HEAD~3 
```

由于您的文件被保留，这可能看起来像

```
 (F)    
I--Y--C1--C2
↑           
HEAD 
```

现在你可以从系统中删除你的文件并添加你同事的文件（到索引，它已经在 FileSystem 上），然后进行提交。现在开发线可能看起来像没有您的更改。

```
 (F1) 
 I--C3
    ↑
   HEAD 
```

这不是推荐的方式。推荐的方法是使用

```
 git revert HEAD^ 
```

虽然我从来没有用过，所以不能说。

编辑：另一种方法。
找到你的提交“Y”的“SHA KEY”并在“I”之前提交。
可以使用

```
git log 
```

假设 Y 键是：7a2ab465aad23dc66a23ade897deb65a5bf9419d
而 I 键是：906488ac2d5a8468d725351df80e3b0f6338c9be
为两个提交制作标签，例如

```
git tag Intercommit -a 906488ac2d5a8468d725351df80e3b0f6338c9be
git tag YourCommit -a  7a2ab465aad23dc66a23ade897deb65a5bf9419d 
```

结帐间使用

```
git checkout Intercommit 
```

然后使用 rebase repo

```
git rebase --onto HEAD YourCommit master 
```

现在 dev 的行看起来像

```
I--C1--C2
       ↑
      HEAD 
```

你可以找到更多关于变基和重写一个提交的信息

[http://www.kernel.org/pub/software/scm/git/docs/v1.7.3/user-manual.html#rewriting-one-commit](http://www.kernel.org/pub/software/scm/git/docs/v1.7.3/user-manual.html#rewriting-one-commit)

和

[http://learn.github.com/p/rebasing.html](http://learn.github.com/p/rebasing.html)

# c# - asp.net 应用程序中的 ups 计算错误

> ID：10988930
> 
> 赞同：0
> 
> 时间：2012-06-11T23:52:51.047
> 
> 标签：c#, e-commerce, shipping, ups

与他们在线的计算器相比，当我发送我的回复时，我没有从 UPS 那里得到正确的回复。这是您可以查看我以 XML 格式发送给 UPS 的数据的链接：[https ://dl.dropbox.com/u/4571235/example.xml](https://dl.dropbox.com/u/4571235/example.xml)

我在代码中得到的结果是： http://gyazo.com/70d494bf47c7c9864e2094471f15fea2.png? [1339458514](http://gyazo.com/70d494bf47c7c9864e2094471f15fea2.png?1339458514)

以及我需要得到的结果（当我在 UPS 网站上在线输入相同的参数时得到的结果）：[http ://gyazo.com/f3b97ed3875ab80d3c4892a2275f6670.png?1339458571](http://gyazo.com/f3b97ed3875ab80d3c4892a2275f6670.png?1339458571)

如果我的 xml 文档或其他地方有问题，请告诉我。谢谢，拉齐尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T00:00:51.243

尝试改变

```
<RatingServiceSelectionRequest xml:lang='en-US'> 
```

到：

```
<RatingServiceSelectionRequest> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:02:17.530

首先，更改您的标题 - 这与 ASP.Net 无关......

自从我集成 UPS 以来已经很长时间了，但如果没有记错的话，您应该在请求中提供相同的信息，因为它们在计算中都很重要：

例如

1.  预定的接送服务？
2.  您没有在请求中提供完整地址，只是一个邮政编码，所以很`Residential Indicator`重要（很多）-回复：住宅目的地与商业目的地
3.  是否向您提供零售费率或您的 UPS 帐户费率？

等等.....

# iphone - 如何判断正在运行哪种类/场景？

> ID：10988931
> 
> 赞同：0
> 
> 时间：2012-06-11T23:53:09.977
> 
> 标签：iphone, ios, xcode, cocos2d-iphone

我正在尝试在我的应用程序委托方法中实现一些逻辑。知道当前正在运行哪种场景会非常有帮助。

`[[CCDirector sharedDirector] runningScene]`返回当前运行的场景。

是否有某种比较或函数来检查它是否是 my`[MainMenuLayer scene]`或 [`gameScene scene]`或类似的实例？

我不太确定如何使用`isKindOfClass`or `isEqual`，或者它们是否适用于这种情况。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:55:29.623

正如您所假设的，您必须使用 isKindOfClass。

```
if ([[[CCDirector sharedDirector] runningScene] isKindOfClass:[MySceneClass class]]) {
    // Running is scene is of type MySceneClass
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:19:14.490

被这个问题困扰的时间比任何人都要长。

这将返回一个 CCScene：

```
[[[CCDirector sharedDirector] runningScene] 
```

您想要 MySceneClass 类型的场景的实例（对我来说是 MenuScene），但最简单的方法是标记它：

```
// 'scene' is an autorelease object.
CCScene *scene = [CCScene node];

// 'layer' is an autorelease object.
MenuScene *layer = [MenuScene node];
layer.tag = kTagGameLayer;

// add layer as a child to scene
[scene addChild: layer];

// return the scene
return scene; 
```

然后调整您的语句以使用 getChildByTag：

```
if([[[[CCDirector sharedDirector] runningScene] getChildByTag:kTagGameLayer] isKindOfClass:[MenuScene class]]) {
        NSLog(@"current is MenuScene");

    } 
```

# php - 没有索引文件的目录

> ID：10988932
> 
> 赞同：1
> 
> 时间：2012-06-11T23:53:18.253
> 
> 标签：php, html, .htaccess

我有一个允许下载或流式传输 mp3 文件的站点。所有 mp3 文件都位于一个名为“mp3”的子目录中。我从谷歌得到的一个错误（也是我想避免的）是当在这样的浏览器中调用目录本身时

```
http://www.mysite.com/mp3/ 
```

它带来了目录不包含索引文件的常见（和正确）错误。我知道如何制作一个将用户重定向到我想要的任何页面的 php 文件，并且我知道我可以制作一个 index.html 文件，该文件是 301 重定向到我需要的任何页面，但是有没有更好的方法来处理这个对谷歌更好？我可以在 robots.txt 文件中将目录标记为禁止，但有没有更好的方法来处理这个对最终用户来说也更专业的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:56:42.973

如果不指定文件名，您的站点不应包含指向该文件夹的链接，因此用户不应到达该目的地。如果他们手动输入该 URL，我建议对 404 或 403 错误（未找到或禁止）使用自定义页面。我会认为足够专业，

对于谷歌，我会选择 robots.txt 选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T23:57:11.247

我更喜欢使用 .htaccess 文件来处理这些情况，发送 301 错误，并指向另一个存在的页面。根据我的研究，这是对搜索引擎最友好的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T23:57:18.867

添加`Options -Indexes`到该`.htaccess`目录中的文件是很常见的。

最终结果是用户看到了`403 Forbidden`错误。我不确定这是否是您的意思

> 它带来了目录不包含索引文件的常见（和正确）错误。

这种做法很常见，即使在非常大的网站上也是如此。它不会阻止任何用户或 Google 查找或下载实际的 MP3 文件。Google 不会因 403 错误而惩罚您。如果你告诉它不要索引，`/mp3/*`那么它甚至不应该从该目录开始。

# c# - ASP.NET 动态数据编辑复杂对象

> ID：10988934
> 
> 赞同：2
> 
> 时间：2012-06-11T23:53:34.103
> 
> 标签：c#, asp.net, .net, asp.net-dynamic-data, complextype

我正在开发一个带有 Linq to SQL 数据库上下文的 ASP.NET 动态数据网站，我有一个问题。在我的一个表 ARReports 中，存在一个包含原始 XML 数据的列，我可以将其反序列化为 ReportDetails 对象，以及其他数据，例如 EditedBy、ReleaseDate 和其他字段。

ReportDetails 有几个公共属性，我想在我的自定义 Edit.aspx 页面上公开它们。

我的目标是：当用户导航到 Edit.aspx 页面时，我希望他们能够编辑 ARReports 行和 ReportDetails 的公共属性，所有这些都是原始类型。然后当它们更新时：将 ReportDetails 对象序列化回 XML 并更新表中的该字段。

无论如何我可以说，在 ReportDetails 类型的 ARReport 类（Linq to SQL 类）中创建一个属性，并将该类脚手架放入 Edit.aspx 页面？也许看起来像这样：

```
public partial class ARReport
{
    private ReportDetails _details;

    public ReportDetails Details
    {
         get
         {
             if (_details == null)
                  _details = ReportDetails.DeSerialize(this.RawXML);
             return _details;
         }
         set
         {
             this.RawXML = ReportDetails.Serialize(_details);
         }
}

public class ReportDetails
{
     public String Owner {get; set;}
     public DateTime LastEdit {get; set;}
     //...etc...

     public static String Serialize(ReportDetails report)
     {
          // serialization code
     }

     public static ReportDetails DeSerialize(String rawXML)
     {
         // deserialization code
     }
} 
```

我希望有一些属性和/或技巧的组合可以应用于类和属性以实现我正在寻找的东西，但到目前为止，严格的谷歌搜索还没有提出任何解决方案。我希望这不会太混乱。我感谢任何帮助或见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T23:20:01.793

这是可以做到的。考虑将 ReportDetails 的属性保留在 L2S 数据上下文的 OUT 中（因为它在您的数据库中没有明确地作为一列）。

我的建议是为报告详细信息构建一个自定义字段模板。使用 UIHintAttribute 在编辑/详细信息页面上正确引用该字段模板。在填充控件之前，将报告详细信息反序列化为 POCO 并照常填写控件。

至于序列化，在数据上下文中覆盖 SubmitChanges 事件，检查 ARReport 的更新，更改属性值，然后提交更改：

```
public override void SubmitChanges(System.Data.Linq.ConflictMode failureMode)
{
    ChangeSet changeset = GetChangeSet();
    foreach (var change in changeset.Updates.OfType<ARReport>())
    {
        // serialize ReportDetails here before submitting changes. 
    }   
    try
    {
        base.SubmitChanges(ConflictMode.ContinueOnConflict);
    }
    catch (ChangeConflictException cce)
    {
        // handle this
    }
} 
```

# c# - 如何在 MVC3 jquery 应用程序中实现长轮询

> ID：10988937
> 
> 赞同：1
> 
> 时间：2012-06-11T23:53:47.470
> 
> 标签：c#, jquery, asp.net, .net, asp.net-mvc-3

我想从 asp.net jquery html 客户端应用程序向服务器端发送请求。

服务器端代码将执行任务，一旦完成，它将输出一些 jpeg 文件。

问题是我想在 jpeg 准备好时自动通知 Web 应用程序。

我每 2 秒向服务发送一个呼叫，它的轮询方式太多了。

我想以某种方式向服务器发送呼叫，然后我想在 jpeg 位于目录中时获得响应。

我正在使用 c# asp.net v4

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T23:58:29.807

[SignalR](https://github.com/SignalR/SignalR)是一个出色的客户端-服务器通信库，它为您完成所有向后兼容的繁重工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T16:29:58.047

您可以为此目的使用异步控制器。请参阅此链接了解详细信息[异步控制器的使用](http://msdn.microsoft.com/en-us/library/ee728598%28v=vs.98%29.aspx)

# php - 下拉 24 小时选项值和 12 小时显示

> ID：10988939
> 
> 赞同：5
> 
> 时间：2012-06-11T23:54:08.967
> 
> 标签：php, html, time

我需要为将在 HTML 下拉列表中使用的时间创建一个数组。数组键应该是 24 小时格式，值是 12 小时，上午和下午。在数据库中，我想存储 24 小时格式。有没有一种快速的方法来创建数组而不是每小时输入一次？

例子：

```
'00:00:00'  => '12:00am',
'01:00:00'  => '1:00am',
etc 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-11T23:59:09.590

使用循环：

```
<select>
<?php for($i = 0; $i < 24; $i++): ?>
  <option value="<?= $i; ?>"><?= $i % 12 ? $i % 12 : 12 ?>:00 <?= $i >= 12 ? 'pm' : 'am' ?></option>
<?php endfor ?>
</select> 
```

这将输出：

```
<select>
  <option value="0">12:00 am</option>
  <option value="1">1:00 am</option>
  <option value="2">2:00 am</option>
  <option value="3">3:00 am</option>
  <option value="4">4:00 am</option>
  <option value="5">5:00 am</option>
  <option value="6">6:00 am</option>
  <option value="7">7:00 am</option>
  <option value="8">8:00 am</option>
  <option value="9">9:00 am</option>
  <option value="10">10:00 am</option>
  <option value="11">11:00 am</option>
  <option value="12">12:00 pm</option>
  <option value="13">1:00 pm</option>
  <option value="14">2:00 pm</option>
  <option value="15">3:00 pm</option>
  <option value="16">4:00 pm</option>
  <option value="17">5:00 pm</option>
  <option value="18">6:00 pm</option>
  <option value="19">7:00 pm</option>
  <option value="20">8:00 pm</option>
  <option value="21">9:00 pm</option>
  <option value="22">10:00 pm</option>
  <option value="23">11:00 pm</option>
</select> 
```

# java - WHILE 循环中的多个条件

> ID：10988944
> 
> 赞同：5
> 
> 时间：2012-06-11T23:55:17.503
> 
> 标签：java, while-loop

当用户输入“N”或“n”时，我想退出 while 循环。但它不起作用。它适用于一种情况，但不适用于两种情况。

```
import java.util.Scanner;

class Realtor {

    public static void main (String args[]){

        Scanner sc = new Scanner(System.in);

        char myChar = 'i';

        while(myChar != 'n' || myChar != 'N'){

           System.out.println("Do you want see houses today?");
           String input = sc.next();
           myChar = input.charAt(0); 
           System.out.println("You entered "+myChar);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-11T23:58:32.213

您需要更改`||`为，`&&`以便两个条件都必须为真才能进入循环。

```
while(myChar != 'n' && myChar != 'N') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T23:58:59.333

你的条件不对。 `myChar != 'n' || myChar != 'N'`永远都是真的。

`myChar != 'n' && myChar != 'N'`改为使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T00:00:14.127

如果您的代码，如果用户输入“X”（例如），当您到达 while 条件评估时，它将确定“X”与“n”（nChar！=“n”）不同，这将使您的循环条件true 并在循环内执行代码。第二个条件甚至没有被评估。

# php - 将时间戳月/年列为 PHP 中的博客存档

> ID：10988948
> 
> 赞同：0
> 
> 时间：2012-06-11T23:55:47.067
> 
> 标签：php, unix-timestamp

假设我在时间戳数组中有多个多年和几个月的时间戳（例如 123456、111222333、2112321321、232234422、1111343222、231111211 等），我想将它们排序为以下格式：

```
2012
    06
    09

2004
    03
    08

2003
    01
    02 
```

有没有办法做到这一点？我正在使用 PHP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T00:07:16.477

你可以这样做。

看看这是否能让你开始；它不完整，但可以处理大部分内容。只需添加一些内容，它应该可以按照您的意愿工作。

```
<?php

$timestamps = array();

for ($i = 0; $i < 100; ++$i) {
    $ts = mktime(rand(0, 23), rand(0, 59), rand(0, 59), rand(1, 12), rand(1, 31), rand(2000, 2012));

    $timestamps[] = $ts;
}

sort($timestamps);

$lastYear = null;

echo "<ul>\n";

foreach($timestamps as $ts) {
    $year = date('Y', $ts);

    if ($year != $lastYear) {
        if ($lastYear != null) {
            echo "</ul>\n";
        }

        $lastYear = $year;

        echo "<li>$year<ul>\n";
    }

    echo "<li>" . date('m-d', $ts) . "</li>\n";
}

echo "</ul></ul>"; 
```

我创建了一个包含 100 个随机时间戳的数组，以在开头填充列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T01:10:28.577

我找到了一个解决方案：

```
foreach($timestamps as $time){
    $year = date('Y', $time);
    $month = date('m', $time);
    if(!$ts_arr[$year]){
        $ts_arr[$year] = array();
    }
    array_push($ts_arr[$year], $month);
    $ts_arr[$year] = array_unique($ts_arr[$year]);
} 
```

它并不完美，但它有效！

# c# - 如何设置 radcombobox 项目的样式，以便分隔换行的单词

> ID：10988952
> 
> 赞同：1
> 
> 时间：2012-06-11T23:56:19.930
> 
> 标签：c#, asp.net, css

我有一个 RadComboBox，我被要求让它看起来像以下格式

```
All
-----------
Cars
-----------
Airplanes
-----------
Airplaned and
Cars
----------- 
```

注意破折号，它们是分开的，所以如果它们中的任何一个用两行包裹它看起来正确。

RadComboBox 具有此属性，可以在 css 中覆盖

```
.rcbItem 
```

但我不知道如何实现这一目标..

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T00:31:17.057

您是否只是想为每个项目添加虚线边框？如果是这样，请尝试在您的 CSS 中添加以下内容。

```
.rcbItem {border-bottom:1px dashed #000;} 
```

替换`#000`为所需边框颜色的十六进制代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-31T12:15:16.457

试试这个

```
.item {
    border-bottom:1px dashed #000;
    color:2B91AF;
    font-size:12px;
    display:block;
} 
```

# ruby-on-rails - 如何在没有 development.rb 的情况下运行 rails 应用程序

> ID：10988955
> 
> 赞同：0
> 
> 时间：2012-06-11T23:56:43.603
> 
> 标签：ruby-on-rails

我有一个没有environments/development.rb但在本地运行良好的rails3应用程序（使用pow、thin或passenger）。

这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T00:32:43.373

因为有默认值——该文件的所有默认版本都设置了一些配置覆盖。

# ruby-on-rails - Rails ActiveRecord 验证：字符串的最大长度？

> ID：10988963
> 
> 赞同：11
> 
> 时间：2012-06-11T23:57:28.950
> 
> 标签：ruby-on-rails, validation, activerecord

我的数据库迁移文件中有这些字符串/文本字段：

```
 t.string :author
  t.string :title
  t.string :summary
  t.text :content
  t.string :link 
```

这些是我的问题：

1.  每个字符串/文本属性都应该有一个最大长度验证，用于安全性（如果您不想接收几 MB 的文本输入）和数据库（如果 string = varchar，mysql 有 255 个字符的限制）。这是正确的还是有任何理由不对数据库中的每个字符串/文本属性进行最大长度验证？
2.  如果我不关心作者和标题的确切长度，因为它们不会太长而不能存储为字符串，我是否应该将每个最大长度设置为 255？
3.  如果 URL 的最大可能长度约为 2000 个字符，那么将链接存储为字符串而不是文本是否安全？如果我已经使用正则表达式验证其格式，是否应该验证链接属性的最大长度？
4.  内容（文本）属性是否应该具有最大长度以保护数据库免受无限长度的输入？例如，将文本字段的最大长度设置为 100,000 个字符是否合理，或者这完全没有意义且效率低下？

我理解，这些问题对某些人来说似乎并不重要，但仍然——这是对输入的验证，任何应用程序都需要——而且我认为在这里有点偏执是值得的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T01:22:07.300

这个问题很好，也许对rails/mysql内部有更多了解的人将能够扩展更多。

1）在模型中进行任何验证取决于您希望失败发生在哪里，以防它超过限制。该模型是最佳选择，因为它很可能会覆盖使用该模型的大多数对象。其他替代方法是简单地使用 maxlength 属性限制表单字段。

第一个选项不适用于可选字段。

2）我不知道任何经验法则。使用你知道最长的任何东西，并让它更大一点。

3）我的规则是任何高于 255 的都是文本。[你可以在这里](https://stackoverflow.com/questions/3354330/difference-between-string-and-text-in-rails)找到更多信息

4）如果该列包含相同的内容 - 这可能是有价值的。根据内容类型或用户，某些用例可能具有不同的最大长度。

以上所有内容还受到项目中数据验证要求的严格程度的影响。

# java - 检查范围内的 int

> ID：10988968
> 
> 赞同：2
> 
> 时间：2012-06-11T23:58:16.770
> 
> 标签：java, if-statement, comparison, integer

java中是否有一种优雅的方法来检查int是否等于或大于/小于值1。

例如，如果我检查`x`是否在`5`. 我想在 上返回 true `4, 5 and 6`，因为 4 和 6 距离 5 仅差一倍。

是否有内置功能可以做到这一点？还是我最好这样写？

```
int i = 5;
int j = 5;
if(i == j || i == j-1 || i == j+1)
{
    //pass
}
//or
if(i >= j-1 && i <= j+1)
{
    //also works
} 
```

当然，上面的代码丑陋且难以阅读。那么有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T00:01:46.033

找到它们之间的绝对差异`Math.abs`

```
private boolean close(int i, int j, int closeness){
    return Math.abs(i-j) <= closeness; 
} 
```

基于@GregS关于溢出的评论，如果你给出`Math.abs`一个不适合整数的差异，你将得到一个溢出值

```
Math.abs(Integer.MIN_VALUE - Integer.MAX_VALUE) //gives 1 
```

通过将参数之一转换为 long`Math.abs`将返回 long 意味着将正确返回差异

```
Math.abs((long) Integer.MIN_VALUE - Integer.MAX_VALUE) //gives 4294967295 
```

因此，考虑到这一点，该方法现在看起来像：

```
private boolean close(int i, int j, long closeness){
    return Math.abs((long)i-j) <= closeness; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T00:02:01.370

用作`Math.abs(x-5) <= 1`一个简单的测试。然而，优雅在情人眼中。而是力求清晰。

请注意，通常情况下，对于像 Glitch 的好答案甚至这个，必须分析和理解溢出条件。为了所有可能的整数的正确性，您应该将参数转换为 long 并使用 long 执行比较。

# workflow-activity - TFS 2010 自定义构建过程 - 如何从 WriteBuildMessage stdOutput 中删除 CR 和 LF？

> ID：10988974
> 
> 赞同：0
> 
> 时间：2012-06-11T23:58:44.937
> 
> 标签：workflow-activity

我有一个 InvokeProcess 活动，我试图从中获取输出（例如）：

```
'sc.exe query w3svc'. 
```

查询是否安装了 IIS 服务。

我正在使用一个分配活动来尝试将 stdOutput 捕获到一个变量中，以便我可以在下一步中使用它。问题是它只捕获第一行。该命令的输出包含 crlfs，我认为这是问题所在。我尝试了各种方法来删除它们，但无济于事。

关于这个有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:28:35.713

我最终做的是：

1) 将我的命令移动到批处理文件中并对其进行调整以仅返回更具体的结果，例如：

```
sc.exe query w3svc | find /c /i "w3svc" 
```

返回 0 或 1

2) 将批处理文件移到源代码管理中。3) 在我的模板中添加了一个 DownloadFiles 活动，我在需要使用它之前下载了该批次。4) 在随后的 InvokeProcess 中，我添加了一个 Assign 来捕获 stdOutput，然后在 If 活动中检查它。

希望这对某人有所帮助，因为我知道这些东西并不多。

# email - 有时我的邮件服务器不发送电子邮件

> ID：10988979
> 
> 赞同：0
> 
> 时间：2012-06-11T23:59:03.863
> 
> 标签：email, amazon-s3, webmail, mail-server

我正在使用亚马逊云服务来托管我的网页。我们的网站实际上每小时发送大量电子邮件。在一瞬间，我们的服务器可能会被要求发送 30 封或更多邮件。

有时我们的客户抱怨没有收到来自网络的电子邮件，该网络连接到我们的邮件服务器以发送电子邮件。如果我们将电子邮件直接从我们的地址发送到他们的地址，则不会发生这种情况，因此我很清楚是导致问题的网页。

问题是我不知道发生了什么，也不知道要寻找什么。我检查了该服务器的内存和 CPU，一切似乎都正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:06:11.737

*   确保您的网站使用正确的**退回地址**（即信封发件人地址）发送邮件。这不必与*From* : 标头中的地址相同。默认情况下，这通常类似于“apache@www.example.com”——我不了解亚马逊）。这些类型的退回地址很糟糕，因为如果出现问题，通常您不会收到错误消息。使用真实的电子邮件帐户。要检查您当前使用的退回地址，请查看收到邮件的消息来源并查看*Return-Path*标头。

*   检查邮件服务器的**日志以查找丢失的消息。**它要么报告错误（在这种情况下，您应该将错误发送到您的退回地址），或者它报告消息已发送到目标服务器（在这种情况下，您告诉您的客户检查他们的邮件日志，因为您可以证明您已经发送了信息）

# objective-c - 在验证期间将焦点分配给 UITextField

> ID：10988983
> 
> 赞同：1
> 
> 时间：2012-06-11T23:59:30.183
> 
> 标签：objective-c, validation, ios5, uitextfield

我有一个方法， -(void)validateFormInput:(UITextField *)textField 当表单的“提交”按钮被按下时被调用。该方法执行以下操作：

1) 验证给定 textField 中的文本 2) 如果无效，则弹出一个警告框，在 UITextField 周围绘制一个红色边框并将焦点返回到该 UITextField。

问题是我没有将焦点重新回到无效的 UITextField。

这是验证方法 - 为什么这不将焦点重新放在无效的 UITextField 上？

谢谢！

```
//Called when form "submit" button is pressed
-(void)validateFormInput:(UITextField *)textField{
    //If Validation fails... 
    if([textField.text length] <1){ 
        //simple test case        
        textField.layer.borderWidth = 2.0f;
        textField.layer.borderColor = [[UIColor redColor] CGColor];
        textField.layer.cornerRadius = 5;
        textField.clipsToBounds = YES;

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert"
            message:@"Please add a title"
            delegate:nil
            cancelButtonTitle:@"OK"
            otherButtonTitles: nil];
        [alert show];
        alert = nil;
        [textField becomeFirstResponder];               
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T01:16:35.857

您需要将委托添加到 self 并实现委托方法 alertView:didDismissWithButtonIndex:。不要忘记遵守 UIAlertViewDelegate 协议。

当调用此方法时，请让您的 textField 成为第一响应者。

# mvvm - 如何在 Silverlight 中创建小部件？

> ID：10988984
> 
> 赞同：2
> 
> 时间：2012-06-11T23:59:34.317
> 
> 标签：mvvm, silverlight-5.0, mvvm-toolkit

我很欣赏这可能是在我能走路之前跑步的情况，并且讨论偶尔会被皱眉，而不是问题

但是，我是 Silverlight 的新手，我希望不要养成坏习惯！

由于这更像是一般建议类型的帖子，因此我将标记最有用的信息或链接作为答案

我正在写一个仪表板。但是，我希望仪表板的区域可以重复使用，基本上是小部件。任何人都可以推荐一些很好的示例网站，以获取有关在 Silverlight 中制作小部件的最佳方法的建议，或者就需要注意的事项等提供任何建议？

它与在 .NET 中创建用户控件或在 Delphi 中创建表单，然后将其停靠到应用程序的多个不同屏幕中的方法相同

仪表板需要由用户自定义，即他们看到一系列可以设置然后添加到仪表板的小部件。与 Google Anaytics 的工作方式几乎相同

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:48:22.963

我会采取的快速而肮脏的方法：

1.  为每个小部件创建一个 silverlight 控件（可以在其他视图上重用）
2.  将它们全部放在堆栈面板中
3.  将每个控件的可见性绑定到选项选项卡上的复选框

我可能会考虑的不那么 MVVM 方法：

1.  为每个小部件创建一个 silverlight 控件
2.  从后面的代码将它们添加到堆栈面板

开源的好处：

请注意，您将无法在这种类型的场景中控制顺序，但用户可以选择查看他们想要查看的小部件。

如果您想采用更多的 MDI 方法，[Tim Heuer](http://timheuer.com/blog/)在 codeplex 上有一个有趣的项目：[Silverlight FloatableWindow](http://floatablewindow.codeplex.com/)，它为您提供了可调整大小的子窗口类型。

我不推荐的昂贵方法：

如果您不想自己动手，Telerik 和 ComponentOne 有一些非常先进的仪表板功能。

# java - 用杰克逊解析JSON数组，其中对象是字符串？

> ID：10988987
> 
> 赞同：2
> 
> 时间：2012-06-11T23:59:50.840
> 
> 标签：java, json, jackson

我有一个有点奇怪的问题。我创建了一个对象，我们称之为 Profile，它通过我调用的 API 成功解析单个 JSON 对象。还有一个多配置文件接口，它将返回配置文件对象的 JSON 数组。问题是，多配置文件接口将子对象转换为字符串。有没有一种自动方法可以告诉杰克逊将这些解析为对象？

单个对象的示例： `{ "foo": "bar" }`

多对象示例： `[ "{ \"foo\": \"bar\" }", "{ \"blah\": \"ugh\" }" ]`

（抱歉不能使用真实数据）

请注意，子对象实际上是字符串，其中包含转义引号。

为了完整起见，我的多对象解析代码如下所示：

```
ObjectMapper mapper = new ObjectMapper();
Profile[] profile_array = mapper.readValue(response.content, Profile[].class);
for (Profile p: profile_array)
{
    String user = p.did;
    profiles.put(user, p);
} 
```

正如我所说，在单配置文件的情况下，配置文件对象会解析。在多配置文件的情况下，我得到了这个例外：

```
Exception: org.codehaus.jackson.map.JsonMappingException: Can not construct instance of com.xyz.id.profile.Profile, problem: no suitable creator method found to deserialize from JSON String 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T00:09:34.723

I suppose you'll have to create a custom deserializer and apply it to the every element of that array.

```
class MyCustomDeserializer extends JsonDeserializer<Profile> {
    private static ObjectMapper om = new ObjectMapper();

    @Override
    public Profile deserialize(JsonParser jp, DeserializationContext ctxt) {
        // this method is responsible for changing a single text node:
        // "{ \"foo\": \"bar\" }"
        // Into a Profile object

        return om.readValue(jp.getText(), Profile.class);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T00:07:35.500

Have you tried using JAXB?

```
 final ObjectMapper mapper = new ObjectMapper();

            // Setting up support of JAXB
            final AnnotationIntrospector introspector = new JaxbAnnotationIntrospector();

            // make deserializer use JAXB annotations (only)
            mapper.getDeserializationConfig().setAnnotationIntrospector(
                    introspector);

            // make serializer use JAXB annotations (only)
            mapper.getSerializationConfig().setAnnotationIntrospector(
                    introspector);

            final StringReader stringReader = new StringReader(response);
            respGetClasses = mapper.readValue(stringReader,
                    FooBarClass.class); 
```

The above should get you started...

Also, you would need to mark each subclass like so:

```
@XmlElement(name = "event")
public List<Event> getEvents()
{
    return this.events;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:13:22.580

对嵌入的 JSON-in-JSON 内容的“重新解析”没有开箱即用的支持。但这听起来像是一个可能的增强请求（RFE）......

# svg - SVG：具有重叠形状的填充图案

> ID：10988988
> 
> 赞同：1
> 
> 时间：2012-06-11T23:59:55.467
> 
> 标签：svg

在 SVG 中，如何填充重叠形状的部分，例如这个[例子](http://www.freeimagehosting.net/sxhg1)（不是用 SVG 绘制的）？如果我从一个形状中省略填充图案，我还希望从它重叠的其他形状中删除该图案。之后，更多的形状可能会再次重叠并重新绘制图案。我从代码生成这个 SVG，对于每个形状，我会在代码中知道它是否应该添加或减去填充图案。

到目前为止，这是我的 SVG。它绘制形状，并定义填充图案但不使用它。

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="640" height="480" viewBox="0 0 640 480">
<defs>
   <marker id="endArrowGreen" viewBox="0 0 10 10" refX="1" refY="5" markerUnits="strokeWidth" orient="auto" markerWidth="5" markerHeight="4">
   <polyline points="0,0 10,5 0,10 1,5" fill="#00CC00" stroke="#00CC00"/>
   </marker>
   <marker id="startArrowGreen" viewBox="0 0 10 10" refX="1" refY="5" markerUnits="strokeWidth" orient="auto" markerWidth="5" markerHeight="4">
     <polyline points="10,0 0,5 10,10 9,5" fill="#00CC00" stroke="#00CC00"/>
   </marker>
   <marker id="endArrowBlue" viewBox="0 0 10 10" refX="1" refY="5" markerUnits="strokeWidth" orient="auto" markerWidth="5" markerHeight="4">
   <polyline points="0,0 10,5 0,10 1,5" fill="#0000CC" stroke="#0000CC"/>
   </marker>
   <marker id="startArrowBlue" viewBox="0 0 10 10" refX="1" refY="5" markerUnits="strokeWidth" orient="auto" markerWidth="5" markerHeight="4">
   <polyline points="10,0 0,5 10,10 9,5" fill="#0000CC" stroke="#0000CC"/>
   </marker>
     <pattern id="Crosshatch" patternUnits="userSpaceOnUse"
              x="0" y="0" width="10" height="10"
              viewBox="0 0 10 10" >
       <path d="M 0 10 L 10 0" stroke-width="1" stroke="blue" />
     </pattern>
   </defs>
<g>
<line x1="7.78888" y1="6.08366" x2="319.087" y2="6.08366" stroke-width="1" stroke="#0000CC"  />
<polyline points="0,0 -6,-3 -5,0 -6,3" fill="#0000CC" stroke="#0000CC" transform="translate(319.087 6.08366) rotate(0)"/>
<line x1="319.087" y1="6.08366" x2="630.385" y2="6.08366" stroke-width="1" stroke="#0000CC"  />
<line x1="630.385" y1="6.08366" x2="630.385" y2="469.354" stroke-width="1" stroke="#0000CC"  />
<line x1="630.385" y1="469.354" x2="7.78888" y2="469.354" stroke-width="1" stroke="#0000CC"  />
<line x1="7.78888" y1="469.354" x2="7.78888" y2="237.719" stroke-width="1" stroke="#0000CC"  />
<line x1="7.78888" y1="6.08366" x2="7.78888" y2="237.719" stroke-width="1" stroke="#0000CC"  />
<polyline points="0,0 -6,-3 -5,0 -6,3" fill="#0000CC" stroke="#0000CC" transform="translate(7.78888 237.719) rotate(90)"/>
</g>
<circle cx="298.914" cy="237.087" r="218.732" stroke-width="1" stroke="#0000CC" fill="none"/>
<circle cx="262.395" cy="238.913" r="100" stroke-width="1" stroke="#0000CC" fill="none"/>
<circle cx="438.601" cy="236.175" r="129.523" stroke-width="1" stroke="#0000CC" fill="none"/>
<g>
<line x1="99.913" y1="248.646" x2="302.566" y2="248.646" stroke-width="1" stroke="#0000CC"  />
<polyline points="0,0 -6,-3 -5,0 -6,3" fill="#0000CC" stroke="#0000CC" transform="translate(302.566 248.646) rotate(0)"/>
<line x1="302.566" y1="248.646" x2="505.22" y2="248.646" stroke-width="1" stroke="#0000CC"  />
<line x1="505.22" y1="248.646" x2="505.22" y2="291.232" stroke-width="1" stroke="#0000CC"  />
<line x1="505.22" y1="291.232" x2="99.913" y2="291.232" stroke-width="1" stroke="#0000CC"  />
<line x1="99.913" y1="291.232" x2="99.913" y2="269.939" stroke-width="1" stroke="#0000CC"  />
<line x1="99.913" y1="248.646" x2="99.913" y2="269.939" stroke-width="1" stroke="#0000CC"  />
<polyline points="0,0 -6,-3 -5,0 -6,3" fill="#0000CC" stroke="#0000CC" transform="translate(99.913 269.939) rotate(90)"/>
</g>
<g>
<line x1="114.521" y1="181.118" x2="303.023" y2="181.118" stroke-width="1" stroke="#0000CC"  />
<polyline points="0,0 -6,-3 -5,0 -6,3" fill="#0000CC" stroke="#0000CC" transform="translate(303.023 181.118) rotate(0)"/>
<line x1="303.023" y1="181.118" x2="491.525" y2="181.118" stroke-width="1" stroke="#0000CC"  />
<line x1="491.525" y1="181.118" x2="491.525" y2="212.753" stroke-width="1" stroke="#0000CC"  />
<line x1="491.525" y1="212.753" x2="114.521" y2="212.753" stroke-width="1" stroke="#0000CC"  />
<line x1="114.521" y1="212.753" x2="114.521" y2="196.935" stroke-width="1" stroke="#0000CC"  />
<line x1="114.521" y1="181.118" x2="114.521" y2="196.935" stroke-width="1" stroke="#0000CC"  />
<polyline points="0,0 -6,-3 -5,0 -6,3" fill="#0000CC" stroke="#0000CC" transform="translate(114.521 196.935) rotate(90)"/>
</g>
</svg> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:50:15.503

您可能想尝试“填充规则”属性，请参阅[http://www.w3.org/TR/SVG/painting.html](http://www.w3.org/TR/SVG/painting.html)

# ios - 升级到 Cordova 后 OnD eviceReady 在 iOS 中未触发

> ID：10988989
> 
> 赞同：1
> 
> 时间：2012-06-11T23:59:55.800
> 
> 标签：ios, jquery-mobile, cordova

有人问过类似的问题，没有好的答案。所以我想我会帮忙...

我为此苦苦挣扎了两个多星期，但没有简单的方法可以找到它。显然，您必须在 Cordova iOS 安装中使用正确的 Cordova js 版本。它没有记录或显示在任何地方......但是如果您进入您的科尔多瓦设置（无论它们位于硬盘上的哪个位置），您都可以看到科尔多瓦 js 文件。通常在 users/shared/cordova/framework/cordova.framework/www 文件夹中。然后将 js 文件复制到您的项目中，更改引用并且应该这样做。

# c# - 如何使用 ComboBox 更新 DataGridView？

> ID：10988990
> 
> 赞同：0
> 
> 时间：2012-06-12T00:00:07.297
> 
> 标签：c#, winforms, ado.net, combobox

```
private void tbComboBox_SelectedIndexChanged(object sender, EventArgs e)
          {
 this.mytbTableAdapter.Fill(this.dbDataSet.mytb);
          } 
```

仅在第二次选择该行时才进行更新。如果移动并单击行，则更新将落后于一行（上一行的更新，未选中）...

# html - 删除 html/xml 的最简单方法 从单线输出

> ID：10988993
> 
> 赞同：3
> 
> 时间：2012-06-12T00:00:20.527
> 
> 标签：html, xml, sed

我有来自 grep 我正在尝试清理的输出，如下所示：

```
<words>Http://www.path.com/words</words> 
```

我试过用...

```
sed 's/<.*>//' 
```

...删除标签，但这只会破坏整行。我不确定为什么会这样，因为每个“<”在到达内容之前都用“>”关闭。

最简单的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T00:03:34.567

试试这个你的 sed 表达式：

```
sed 's/<.*>\(.*\)<\/.*>/\1/' 
```

**表达式的快速分解：**

```
<.*>   - Match the first tag
\(.*\) - Match and save the text between the tags   
<\/.*> - Match the end tag making sure to escape the / character  
\1     - Output the result of the first saved match 
       -   (the text that is matched between \( and \)) 
```

* * *

***更多关于反向引用***

评论中出现了一个问题，为了完整起见，可能应该解决这个问题。

`\(`和是 Sed的`\)`反向引用标记。他们保存一部分匹配的表达式供以后使用。

例如，如果我们有一个输入字符串：

> 这里面有（括号）。此外，我们可以通过反向引用来使用类似 thisparens 的括号。

我们开发一个表达式：

```
sed s/.*(\(.*\)).*\1\\(.*\)\1.*/\1 \2/ 
```

这给了我们：

```
parens like this 
```

*这到底是怎么回事？*让我们分解表达式来找出答案。

**表达式分解：**

```
sed s/ - This is the opening tag to a sed expression.
.*     - Match any character to start (as well as nothing).
(      - Match a literal left parenthesis character.
\(.*\) - Match any character and save as a back-reference. In this case it will match anything between the first open and last close parenthesis in the expression.
)      - Match a literal right parenthesis character.
.*     - Same as above.
\1     - Match the first saved back-reference. In the case of our sample this is filled in with `parens`
\(.*\) - Same as above.
\1     - Same as above.
/      - End of the match expression. Signals transition to the output expression.
\1 \2  - Print our two back-references.
/      - End of output expression. 
```

`(`正如我们所看到的，从括号 (和)之间获取的反向引用`)`被替换回匹配表达式，以便能够匹配字符串`parens`。

# ios - Apple 是否更改了 .mobileprovision 文件格式，我如何查看当前格式？

> ID：10988998
> 
> 赞同：22
> 
> 时间：2012-06-12T00:00:59.590
> 
> 标签：ios, xcode, ios-provisioning

我在网上找到了许多文章，暗示您可以在文本编辑器中查看 .mobileprovision 文件内容。例如，这个[Urban Airship 帖子](https://support.urbanairship.com/customer/portal/articles/60710-can-t-get-a-device-token-%22no-valid-aps-environment-entitlement-%22-seen-in-console)：

> 为应用启用推送通知后，aps-environment 键将出现在指定配置文件的 .mobileprovision 文件中：

```
<key>Entitlements</key>
<dict>
    <key>application-identifier</key>
... 
```

但是，我拥有的 mobilprovision 文件（在过去几天内获得）包含 466 1/2 行，每行 8 组 4 个十六进制数字，（例如`4851 3842 4176 2845 0a09 01a2 404d 4382`）。如何查看此类文件？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-05-31T14:13:16.270

供应配置文件被编码。要解码它们并检查 XML，您可以通过命令行使用它：

`security cms -D -i #{@profilePath}`

`#{@profilePath}`.mobileprovision 文件的文件路径在哪里。

一个更完整的 Ruby 示例是：

```
require 'plist'
profile = `security cms -D -i #{@profilePath}`
xml = Plist::parse_xml(profile)
appID = xml['Entitlements']['application-identifier'] 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-06T13:10:27.453

如果您希望 Sublime Text 2 能够读取 .mobileprovision 配置文件，这是设置

```
"enable_hexadecimal_encoding": false, 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-06-12T00:35:22.220

您使用的文本编辑器对您来说有点太聪明了：D。

您的编辑器发现该文件实际上是二进制文件并将其显示为十六进制转储 - 例如 Sublime 2 就是这样做的。使用 TextEdit 打开同一个文件。您将看到几行二进制 garbledegock，然后是一些纯文本 (XML)，其中应该包含您要查找的信息。

但是，不要**使用**TextEdit 编辑该文件，这将使它无法使用！

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-07-03T16:52:05.060

您可以使用 openssl 输出签名配置文件的内容。

```
openssl smime -in /path/to/your.mobileprovision -inform der -verify 
```