# StackOverflow 问答 10767000-10767999

# css - 什么是 .htc 文件？它在 Internet Explorer 中的工作原理

> ID：10767006
> 
> 赞同：9
> 
> 时间：2012-05-26T14:17:10.003
> 
> 标签：css, internet-explorer

我下载了 .htc 文件并嵌入到 css 中以在 Internet Explorer 8 中获得圆角。但我想知道它是如何工作的

```
.curved {

-moz-border-radius:10px;

-webkit-border-radius:10px;

behavior:url(border-radius.htc);

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-26T14:35:36.343

它是一个[HTML 组件](http://en.wikipedia.org/wiki/HTML_Components)，一种在网页上封装逻辑的方法。行为在[1999 w3 CSS 工作草案](http://www.w3.org/TR/1999/WD-becss-19990804)中进行了描述，但（据我所知）只有 Microsoft 在 IE 5 中提供了实现，而今天有更好的方法来完成相同的任务。

另请参阅：http: [//msdn.microsoft.com/en-us/library/ms531018.aspx](http://msdn.microsoft.com/en-us/library/ms531018.aspx)

HTC 只能用作后备机制（您的示例演示了这一点）。在 IE 9 及更高版本中，使用标准的跨浏览器 CSS 和 JavaScript 可以实现它们的大部分功能。

至于它*为什么*起作用，我的猜测是该行为操纵了特定于 IE 的功能，例如 DHTML 过滤器或[VML](http://en.wikipedia.org/wiki/Vector_Markup_Language)，这些功能可用于实现超前的视觉效果（尽管现在已弃用）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-26T14:31:14.753

*所有浏览器都提供了一些方法来使用 javascript 查看样式表的规则，并动态插入新规则。通常，IE 对于它不支持的任何内容都会返回“未知”，例如；a`div p:first-child`将变为`div p:unknown`，并且 a`p a[href]`将完全返回为“UNKNOWN”。幸运的是，IE 将 :hover 识别为它所熟悉的东西，并且不理会它。*

*IE 也支持所谓的`behaviors`；动态内容加载或持久数据存储等预定义功能，以及您可以构建到 .htc 或 .hta 文件中的自定义行为。这些行为通过 css 链接到 html 节点，并使用给定的行为“增强”规则选择器选择的节点。*

*结合以上内容，应该可以创建一种行为来搜索样式以查找 IE 不支持的规则，并欺骗受影响的元素以其他方式应用相关样式。涉及的步骤如下：*

*在所有样式表中搜索 :hover IE 不支持的规则，插入一条 IE 支持的新规则，例如带有类名的规则，最后，设置用于切换类名的脚本事件。这样， :hover 、 :active 和 :focus 可以得到支持，并且作为开发人员，除了包括行为之外，您无需做任何事情。其他一切都以全自动方式运行。*

*与版本 1 和 2 不同，版本 3 还支持动态添加的 html (ajax)。区别在于 1 和 2 主动搜索页面加载的受影响元素（所以；只有一次），而 3 使用表达式让节点自己进行回调。*

[你可以在这里](http://peterned.home.xs4all.nl/csshover.html)阅读更多关于它的信息

# python - 如何安装 PyInstaller？

> ID：10767010
> 
> 赞同：21
> 
> 时间：2012-05-26T14:18:00.390
> 
> 标签：python, installation, pyinstaller

（我在 Windows 上。）

我想使用[PyInstaller](http://www.pyinstaller.org/)。我总是可以用`pyinstaller.py [args]`.

*   它不是带有`__init__.py`文件的包，
*   它没有`setup.py`
*   并且创建文件夹不起作用，将其放入我的 PYTHONPATH，放入`pyinstaller\[files]`该文件夹，然后调用`python pyinstaller\pyinstaller.py`.

[pyinstaller.org](http://www.pyinstaller.org/)只[告诉](http://www.pyinstaller.org/export/d3398dd79b68901ae1edd761f3fe0f4ff19cfb1a/project/doc/Manual.html?format=raw#getting-started)我一些`Configure.py`.

所以现在我不知道如何安装 PyInstaller，这样我就不必使用绝对路径。你有什么想法？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-01-08T16:13:03.107

要安装 PyInstaller：

1.  转到您的命令提示符（开始 -> 运行 -> cmd）
2.  键入以下命令`cd c:\python27\scripts`按`enter,` 这应该是您的 pip.exe 文件所在的位置。
3.  一旦你在这个目录类型中`pip install pyinstaller`按回车

消息应为`Successfully installed pyinstaller`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-11T08:11:22.910

要安装 pyInstaller，您必须首先`python Configure.py`在 pyInstaller 目录中运行。要创建 exe，您必须将脚本复制到 pyInstaller 目录，并在运行`python Makespec.py script.py`后运行`python Build.py script/script.spec`（这些命令假设您的路径中有 python 目录，命令提示符位于 pyInstaller 目录中并且您的脚本名为`script.py`. )

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-12T17:24:32.180

我能够使用 pip 安装 PyInstaller。

```
pip install pyinstaller 
```

# android - 输入陷印背景 iPhone 应用程序

> ID：10767015
> 
> 赞同：-1
> 
> 时间：2012-05-26T14:18:38.253
> 
> 标签：android, iphone, mobile, smartphone

我想创建一个将在后台运行并可以捕获所有用户输入的 iPhone 应用程序。在某些情况下，它还应该能够让 iPhone 拒绝输入，就像我们在 Windows 中所做的那样。

请告诉我这是否可能，如果可以，如何。如果不是其他智能手机可能提供此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T00:04:36.830

我只想说 iOs 间谍软件更多的是关于社会工程，而您所要求的在技术上通过官方 SDK 是不可能的。

要拒绝这些活动，请使用 Apple 给您的限制。

说服目标用户您的功能替换更好、更安全，他们想要它——他们会设置限制，用你的替换标准应用程序——利润。

PS 这是现实主义者网站，而不是 c00L-h@c|k3rs 游乐场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T14:22:23.170

这在 iPhone OS 上是不可能的。与 iPhone 一样，一旦您的应用程序进入后台，它就会处于暂停模式。它不能执行任何东西。您可以在 Android 上尝试，因为在 Android 中您可以创建可以在后台运行的服务。但是，是的，在 Android 上，您也不能捕获所有事件，因为 Android 的安全组件不允许这样做。

# sql - ORA-00920: 无效的关系运算符

> ID：10767017
> 
> 赞同：4
> 
> 时间：2012-05-26T14:18:47.757
> 
> 标签：sql, oracle9i

此 SQL 查询似乎命中 ORA 00920。

```
select username, count(*)
from host
where created_dt 
between to_date('2012-may-23 00:00:00', 'yyyy-mon-dd hh24:mi:ss') 
and to_date('2012-may-23 23:59:59', 'yyyy-mon-dd hh24:mi:ss')
GROUP BY CASE
             WHEN REGEXP_LIKE(username, '^\d+$') THEN 'GRP_OTHERS'
                                                 ELSE username
         END; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T14:25:51.923

我没有可使用的 Oracle DB，但我想这可能是因为您选择`username`但不按它分组。您应该能够通过使用子查询来解决这个问题：

```
select username, count(*)
from (select CASE
             WHEN REGEXP_LIKE(username, '^\d+$') THEN 'GRP_OTHERS'
                                                 ELSE username
         END as username
      from host
      where created_dt 
      between to_date('2012-may-23 00:00:00', 'yyyy-mon-dd hh24:mi:ss') 
          and to_date('2012-may-23 23:59:59', 'yyyy-mon-dd hh24:mi:ss')
     )
GROUP BY username; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T15:01:39.037

我不太相信你发布的内容......

您的查询应该抛出`ORA-00979: Not a GROUP BY expression`. 这是因为未包含在分析函数中的列，即`username`未反映在您的`group by`.

ORA-00920 表示您缺少以下内容之一：`=, <>, not in, in, !=, is not null, is null, not like, like`等等。您确定您发布了正确的查询吗？

在 11.2 中，创建类似于您的表格的内容，如下所示：

```
create table host
(  username varchar2(100)
 , created_dt date );

 insert into host
 select level, sysdate - level
   from dual
connect by level <= 10
        ;

 insert into host
 select chr(ascii(level) + 32), sysdate - level
   from dual
connect by level <= 10
        ;
 commit ; 
```

然后运行查询在 ORA-00979 中发布结果。将其更改为以下工作很好。：

```
select case when regexp_like(username, '^\d+$') then 'GRP_OTHERS'
            else username end as username
     , count(*)
  from host
 where created_dt between
       to_date('2012-may-23 00:00:00', 'yyyy-mon-dd hh24:mi:ss') and
       to_date('2012-may-23 23:59:59', 'yyyy-mon-dd hh24:mi:ss')
 group by case when regexp_like(username, '^\d+$') then 'GRP_OTHERS'
               else username end
       ; 
```

这也可以重写为：

```
select distinct username
     , count(*) over ( partition by case when regexp_like(username, '^\d+$') 
                                               then 'GRP_OTHERS'
                                          else username end )
  from host
 where created_dt between
       to_date('2012-may-23 00:00:00', 'yyyy-mon-dd hh24:mi:ss') and
       to_date('2012-may-23 23:59:59', 'yyyy-mon-dd hh24:mi:ss') 
```

我认为第二个查询更像你想要的。它返回实际的用户名，但将所有只是数字的用户名组合在一起。如果您想查看，只需替换案例返回的用户名列`GRP_OTHERS`。

最好[不要在 Oracle 中使用`mon`格式模型](https://stackoverflow.com/questions/10178292/comparing-dates-in-oracle-sql/10178346#10178346)，因为它不一定是跨语言一致的。改为使用`mm`。

* * *

当您使用 9i 时，您可以使用 translate。将正则表达式替换为：

```
trim(translate(username,'0123456789',' ')) is null 
```

这将数字替换为空，然后检查是否有任何剩余...

# google-calendar-api - 代表一个月的第一个完整周的规则？

> ID：10767018
> 
> 赞同：2
> 
> 时间：2012-05-26T14:18:53.623
> 
> 标签：google-calendar-api, icalendar

什么 iCalendar 规则将代表一个重复出现的日期，例如该月的第一个完整周，例如，一个俱乐部在每个月的第一个完整周的星期五举行会议？

同样，创建 Google 日历重复规则对象的调用会是什么样子？

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:52:04.487

当然，这取决于考虑在哪一天开始一周。

假设是星期一，那么在第一个整周的星期五发生将是：

RRULE:FREQ=MONTHLY;BYDAY=FR;BYMONTHDAY=5,6,7,8,9,10,11

# android - TabLayout 中的加载屏幕

> ID：10767022
> 
> 赞同：1
> 
> 时间：2012-05-26T14:19:19.003
> 
> 标签：android, tabs, loading

我有一个包含多个活动的选项卡布局，从一个选项卡更改为另一个需要几秒钟（因为它需要大量数据）。在加载时，我希望出现一个指示加载的对话框。我创建了一个带有进度条的非常简单的对话框，但我不知道何时调用它以及何时关闭它。

```
 loading = new Dialog(FatActivity.this);
        loading.requestWindowFeature(Window.FEATURE_NO_TITLE);
        loading.setContentView(R.layout.dialog_loading);
        loading.show(); 
```

每个选项卡都显示一个活动，但如果我将它放在 onCreate() 方法中（紧随其后，所以到第一行），它不会出现，只有在活动加载后才会出现。那么我应该把它放在哪里，或者如果它是制作加载屏幕的错误方法，那么我应该怎么做呢？我正在考虑这个，因为我只需要调用它然后在 onCreate() 结束时将其关闭。而且由于它是一个标签布局，标签上没有 onclicklistener，所以我也不能使用它。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T14:31:30.837

正如 Gtumca 所说，使用 AsyncTask，但我想向您报告 TabHost 已被弃用，因为最新版本的 android Fragments 和 FragmentActivity 已取代它。通过这种方式，您的代码变得更易于理解和划分得更好，而不是 TabHost。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T14:27:44.367

您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)显示加载屏幕的最佳方式...

```
onCreate()
{
    dialog.show();
    new LoadData().execute(null);
}
--------------------------------------------------------------------------     
    private class LoadData extends AsyncTask<URL, Integer, Boolean> {
         protected Long doInBackground(URL... urls) {
             // your code to load data here <------
             return true;
         }

         protected void onPostExecute(Boolean result) {
             dialog.dismiss();
         }
     } 
```

# ruby-on-rails - 用户未在 rspec 中创建

> ID：10767029
> 
> 赞同：0
> 
> 时间：2012-05-26T14:20:25.393
> 
> 标签：ruby-on-rails, rspec

我有一个非常奇怪的问题，我真的不明白为什么它不起作用。

这是我正在运行以测试帖子评论的测试

[https://gist.github.com/2794100](https://gist.github.com/2794100)

现在我在那里添加了 2 个额外的测试，以了解为什么“用户应该存在”和“帖子应该存在”不起作用，以尝试了解发生了什么，我收集到的只是用户没有创建。当我运行其他测试时，这很奇怪，一切正常

[https://gist.github.com/2794105](https://gist.github.com/2794105)

用户创建是复制和粘贴，因为我将电子邮件作为唯一键我什至尝试在没有任何其他测试的情况下自行运行测试以确保没有冲突，我还尝试使用新制作的数据库运行它。

如果我在 Rails 控制台上运行每个命令，一切正常，只是在测试本身上它不起作用

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:45:03.967

您的测试充满了以下几行：

```
before { @post.title == "Example Post"} 
```

这只是一个比较，而不是一个任务。这没有任何意义！

您总是引用隐式主题 ( `it { should ...`)，在您的情况下，它是 PostComment 的一个新实例。您应该指定您到底在测试什么，例如：

```
subject { @foo } 
```

或者只是明确地命名它：

```
it 'should be valid even if something is nil' do
  before { @foo.name = nil }
  @foo.should be_valid
end 
```

# android - 哪个最低版本的 Android 支持 HTML5 本地存储？

> ID：10767030
> 
> 赞同：6
> 
> 时间：2012-05-26T14:20:28.700
> 
> 标签：android, html, local-storage

另外，如何测试设备中的浏览器是否支持本地存储？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-26T14:23:00.823

我会说自 API Level 7 (2.1) 起支持 HTML5 存储，因为在`WebSettings`Object中启用它的方法在[这里](http://developer.android.com/reference/android/webkit/WebSettings.html#setDomStorageEnabled%28boolean%29)说，*但我认为自 Android 2.0 以来我在 Native 浏览器上使用它*。

```
// Javascript Test
if (typeof window.localStorage == 'object')
{
    // localStorage is supported
}
else
{
    // localStorage is not supported
} 
```

[http://jsfiddle.net/kcckq/](http://jsfiddle.net/kcckq/)

* * *

[这](http://www.ibm.com/developerworks/xml/library/x-html5mobile2/)是一篇博文，告诉我们这是 Android 2.1+

* * *

[这](http://diveintohtml5.info/storage.html#localstorage)是另一篇文章，它说它是 Android 2.0+，并举例说明如何检测是否支持 localStorage。

# dart - 镖靶法

> ID：10767031
> 
> 赞同：1
> 
> 时间：2012-05-26T14:20:46.210
> 
> 标签：dart

代替 ：

```
if(x >= 0 || x <= MAX) 
```

我想写：

```
if(x in [0..MAX]) 
```

但它失败了。Dart 提供类似的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T14:34:51.260

到目前为止，核心 dart 中没有序列生成器。但即使它存在，这也是一个坏主意。该`if(x in [0..MAX])`检查必须将 x 与 中的每个元素进行比较`[0..MAX]`，而 the`if(x >= 0 || x <= MAX)`只是两个比较。

# crash - 控制rabbitmq'name'而不是'name'

> ID：10767037
> 
> 赞同：4
> 
> 时间：2012-05-26T14:21:29.887
> 
> 标签：crash, erlang, osx-lion, rabbitmq, startup

在lion OS上，安装后，运行时会发生错误。起初，不使用`rabbitmq-env.config file`，从 开始`"sudo rabbitmq-server"`，以下消息显示：

```
yus-iMac:rabbitmq yuchen$ sudo rabbitmq-server
Activating RabbitMQ plugins ...

********************************************************************************
********************************************************************************

0 plugins activated:

ERROR: epmd error for host "yus-iMac": address (unable to establish tcp connection) 
```

然后我添加`rabbitmq-env.conf`文件。内容如下：

```
RABBITMQ_NODENAME=rabbitb@yus-iMac.local

When starting, another error message is given:

yus-iMac:rabbitmq yuchen$ sudo rabbitmq-server
Activating RabbitMQ plugins ...

********************************************************************************
********************************************************************************

0 plugins activated:

{error_logger,{{2012,5,26},{21,47,13}},"Can't set short node name!\n Please check your configuration\n",[]} 
```

我认为该消息意味着不能使用短节点。但我不知道如何控制`rabbitmq-server`使用`name`，而不是`sname`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T15:57:19.807

在 Google 上搜索找到[了这个链接](http://codingiscoding.wordpress.com/2011/04/17/rabbitmq-on-os-x/)，它应该可以解决您在开始时看到的问题。以下是相关部分，以防无法访问：

> 确保您的机器名称（在我的情况下为 rs-mbp）在 /private/etc/hosts

```
##
# Host Database
#
# localhost is used to configure the loopback interface
# when the system is booting.  Do not change this entry.
##
127.0.0.1       localhost rs-mbp
255.255.255.255 broadcasthost
::1             localhost
fe80::1%lo0     localhost 
```

# arrays - 将 TTree 的子选择转换为 CERN 根中的浮点数组

> ID：10767043
> 
> 赞同：0
> 
> 时间：2012-05-26T14:22:27.567
> 
> 标签：arrays, root-framework

如何将 TTree 中的数据转换为[CERN ROOT](http://root.cern.ch/drupal/)中的浮点数组？我只需要部分数据，现在我可以使用[TTree:Draw](http://root.cern.ch/root/html/TTree.html#TTree%3aDraw@2)绘制这部分（同时使用“varexp”和“selection”选项）。我的任务是获取绘制为数组的数据。我想将这些数据作为 C 数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T00:19:42.533

看看 TTree::GetV1()。

例如

```
TTree *t = ... ; // assume you got your tree somewhere
int sz = t->Draw("val", "cuts");
Double_t *vars = t->GetV1();
for ( int i = 0; i < sz; ++i ) {
  cout << vars[i] << endl;
} 
```

您可以通过将输出与 TTree::Scan 进行比较来确认这是否有效。

# c# - 即使以管理员身份运行，我的程序也无法写入 HOSTS 文件

> ID：10767044
> 
> 赞同：0
> 
> 时间：2012-05-26T14:22:28.860
> 
> 标签：c#, hosts-file, unauthorizedaccessexcepti

我有一个奇怪的问题。我正在用 C#（.Net 4 客户端配置文件）编写一个应用程序，它将更改 HOSTS 文件中的条目。我为我的 HOSTS 文件的用户帐户添加了“完全访问权限”，我可以在普通文本编辑器中编辑该文件而不会出现任何问题。

当在Visual Studio 2010调试器中运行时，该应用程序工作（选择“启用Visual Studio托管过程”时）。

当我在 Visual Studio 之外运行应用程序时，即使“以管理员身份运行”（！！！）我在尝试编写 HOSTS 文件时也会出现 UnauthorizedAccessException。为什么？详细信息没有给我任何线索：

```
System.UnauthorizedAccessException was caught
  Message=Der Zugriff auf den Pfad "C:\Windows\System32\drivers\etc\hosts" wurde verweigert.
  Source=mscorlib
  StackTrace:
   bei System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   bei System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)
   bei System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy)
   bei System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   bei System.IO.StreamWriter..ctor(String path, Boolean append, Encoding encoding, Int32 bufferSize)
   bei System.IO.StreamWriter..ctor(String path, Boolean append, Encoding encoding)
   bei System.IO.File.WriteAllLines(String path, String[] contents)
   bei App.HostsFile.Save() in HostsFile.cs:Zeile 125.
   bei App.Actions.SaveHosts.Execute(Context ctxt) in Actions\SaveHosts.cs:Zeile 16.
  InnerException: 
   (there is none) 
```

我还没有写清单文件。我正在使用默认清单选项进行编译。那么问题是什么？我能做什么？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T14:28:52.960

如果您启用了 UAC，您将无法编写主机，即使您是管理员，除非您以提升模式启动程序以激活管理员权限。

有关代码中的安全权限的信息，请参见[此处](http://victorhurdugaci.com/using-uac-with-c-part-2/)和[此处](http://msdn.microsoft.com/en-us/library/ms186212%28v=vs.90%29.aspx)。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

    namespace WriteToTheHosts
    {
        class Program
        {
            static void Main(string[] args)
            {
                var systemPath = Environment.GetFolderPath(Environment.SpecialFolder.System);
                Console.WriteLine(systemPath);
                var path = Path.Combine(systemPath, @"drivers\etc\hosts");
                using (var stream = new StreamWriter(path, true, Encoding.Default))
                {
                    stream.WriteLine("#from .NET");
                }
                Console.ReadKey();

            }
        }
    } 
```

还关闭项目设置中的默认清单（清单：'创建没有清单的应用程序'）并编写您自己的清单，如第一个链接示例中所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
   <assemblyIdentity version="1.0.0.0" processorArchitecture="X86" name="WriteToTheHosts" type="win32"/>
      <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
      <security>
         <requestedPrivileges>
            <requestedExecutionLevel level="requireAdministrator"/>
         </requestedPrivileges>
      </security>
   </trustInfo>
</assembly> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T07:45:32.717

没关系。我找到了罪魁祸首。UAC 一切正常，但我的卡巴斯基阻止了我的程序：-/

谢谢你，亚历山大的帮助。

# tomcat - 包含星号的声明性安全角色名称无法正常工作

> ID：10767046
> 
> 赞同：0
> 
> 时间：2012-05-26T14:23:10.570
> 
> 标签：tomcat, servlets, web.xml, declarative-security

我在 web.xml 中的声明性安全条目有问题。

下面的条目不允许我访问该页面，即使我是该组的成员`*ADL - Education Group`。我最终被定向到 login-noauth 页面。

我知道这应该可行——如果我将它更改为不同的组（如`AT - Tech Support`），它会很好用。我怀疑组名中的前导“*”并尝试在 web.xml 中使用 CDATA，但这没有用。我无法控制 Active Directory 条目，因此无法更改组的名称。其他带有破折号和空格的组名可以正常工作。

我已确认我是该组的成员`*ADL - Education Group`。

这是在一个简单的 tomcat 6.0 服务器上。

有谁知道问题是什么以及如何解决？

```
<error-page>
    <error-code>403</error-code>
    <location>/pages/login/login-noauth.jsf</location>
</error-page>
<login-config>
    <auth-method>FORM</auth-method>
    <form-login-config>
        <form-login-page>/pages/login/login.jsf</form-login-page>
        <form-error-page>/pages/login/login-fail.jsf</form-error-page>
    </form-login-config>
</login-config>

<security-constraint>
    <display-name>Batch Security</display-name>
    <web-resource-collection>
        <web-resource-name>Batch Security</web-resource-name>
        <url-pattern>/pages/batch/batch-status.jsf</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>*ADL - Education Group</role-name>
    </auth-constraint>
</security-constraint>
<security-role>
    <description>Everyone</description>
    <role-name>*ADL - Education Group</role-name>
</security-role> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:43:05.693

我的问题出在领域定义中的 server.xml 文件中。事实证明，所有以“*”开头的 AD 组在 AD 中的定义与其他组不同。特别是，它们具有不同的 distinctName，指定不同的 roleBase。因此，一旦我在 server.xml 的 Realm 元素中更改了我的 roleBase 属性，它就可以正常工作，不需要反斜杠或字符翻译。

我对 roleBase 的编辑只是指定了两种类型的组共有的专有名称的唯一部分。

在一种情况下，专有名称是：

```
CN=*ADL - Education Group,OU=ADLS,OU=IdM,DC=ROOT,DC=com 
```

在另一种情况下，可分辨名称是：

```
CN=AT - Tech Support,OU=Distribution Groups,OU=AG1-Place-Company,OU=Americas,OU=Exchange,DC=ROOT,DC=com 
```

因此，在 server.xml 文件中作为 roleBase 起作用的是：

```
roleBase="DC=ROOT,DC=com" 
```

# java - 带有自定义 ClassLoader 和 FileManager 的 JavaCompiler

> ID：10767048
> 
> 赞同：11
> 
> 时间：2012-05-26T14:23:36.287
> 
> 标签：java, classloader, java-compiler-api

我希望在机器上不存在依赖项的情况下编译源代码。
示例：文件 A.java：

```
import some.pkg.B; 
public class A extends B {...} 
```

我没有 B 源，我希望挂钩 JavaFileManager 或自定义 ClassLoader 以获取有问题的符号（包 'some.package' 和 B 类），然后使用我拥有的服务来检索源细绳。

编译代码：（inputFiles有A.java）

```
JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
CustomClassLoader classLoader = new CustomClassLoader();
StandardJavaFileManager standardfileManager = compiler.getStandardFileManager(this, null, null);
JavaFileManager fileManager = new CustomFileManager(standardfileManager, output, classLoader);
CompilationTask task = compiler.getTask(null, fileManager, this, null, null, inputFiles);
boolean result = task.call(); 
```

JavaFileManager (getFileForInput..) 和我的类加载器 (findClass, loadClass ..) 上的钩子在编译时没有触发，我收到错误消息：

```
A.java:#: package some.pkg does not exist
A.java:#: cannot find symbol
symbol: class B 
```

编辑

在使用 API、查看 JavaCompiler（旧版本）源代码并阅读[编译概述](http://openjdk.java.net/groups/compiler/doc/compilation-overview/index.html)之后，我仍然找不到可以用来从语法树中提供符号的 API 挂钩。似乎 API 需要根据 kschneid 建议的包名称获取所有资源。
我想到的一种解决方法是运行 JavaCompiler 并分析缺少符号的错误消息。这样我就会知道需要哪些符号，获取它们并重新编译。
还有其他解决方法/解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T20:16:31.683

（我假设您并没有真正使用“包”的包名，因为那是非法的......）

您的自定义`JavaFileManager`应该`list`调用它的方法。希望这种表示法有意义，但是 args 与该方法的组合应该如下所示：

```
[PLATFORM_CLASS_PATH, some, [CLASS], false]
[CLASS_PATH, some, [SOURCE, CLASS], false]
[PLATFORM_CLASS_PATH, some.pkg, [CLASS], false]
[CLASS_PATH, some.pkg, [SOURCE, CLASS], false] 
```

我不确定您的特定环境创建适当的`Iterable<JavaFileObject>`实例有多困难，但我认为这就是所需要的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T07:58:17.330

我发现在编译时挂钩类的一个好方法是使用[Groovy AST Transformation](http://groovy.codehaus.org/Compile-time+Metaprogramming+-+AST+Transformations)。你可以看看[这里可以做什么](http://java.dzone.com/articles/groovy-ast-transformations)

虽然这不是普通的旧 java，但它可以是一个方便的工具来了解

# python - for 循环出错

> ID：10767050
> 
> 赞同：0
> 
> 时间：2012-05-26T14:24:14.330
> 
> 标签：python, object, loops, for-loop, iterable

```
src = max(gameinfo.my_planets.values(), key=lambda p: p.num_ships)
dest = min(gameinfo.not_my_planets.values(), key=lambda p:p.num_ships)

if len(gameinfo.my_fleets) > 0:

for fleet in gameinfo.my_fleets.values(): 
    print fleet.dest.id
    self.dests.append(fleet.dest)

    for i, value in self.dests:
        print value.id
        while value == dest:
           self.dests[i] = choice(gameinfo.enemy_planets.values())

    for i, fleet in gameinfo.my_fleets.values(): 
        gamefleet.fleet_order(fleet, self.dests[i], int(fleet.num_ships))

    # clear for now
    self.dests = []
    return 
```

问题是最后 2 个 for 循环不确定该做什么……得到一个“不可迭代”的错误。逻辑是正确的，但只是不确定我是否有关键字错误或其他什么。一直在这一切nighttttt！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T14:33:16.367

为此，`self.dests`需要`gameinfo.my_fleets.values()`- 或需要返回 - 所谓的 python [*iterables*](http://docs.python.org/library/stdtypes.html#typeiter)对象，如字符串和可以迭代的列表（在这种情况下可能是大小为 2 的元组列表，查看您的代码）。不幸的是，这两个不是 - 或不返回 - 可迭代对象。因此，您必须研究为什么它们不是，或者您是否应该遍历它们。

下面是一个堆栈溢出问题，讨论如何识别程序中的变量是否是可迭代对象。这里应该有一些帮助：

*   [**在python中，如何确定一个变量是否是Iterable？**](https://stackoverflow.com/questions/1952464/in-python-how-do-i-determine-if-a-variable-is-iterable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T14:38:45.717

`self.dests`如果不看到and中有什么样的值，很难确定`gameinfo.my_fleets.values()`，但我猜是这样的，而不是：

```
for i, value in self.dests: 
```

你真的想要：

```
for i, value in enumerate(self.dests): 
```

同样对于另一个 for 循环。

# r - 如何在 R 中执行协同过滤

> ID：10767054
> 
> 赞同：9
> 
> 时间：2012-05-26T14:25:20.280
> 
> 标签：r, data-mining, collaborative-filtering

我有包含一些空值的矩阵数据。为了填充空值，我想执行协同过滤。当我正在学习 R 时，我宁愿使用 R。

那么，有谁知道如何在 R 中执行协同过滤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T00:45:19.517

就像 Ben Bolker 说的，recommenderlab 是 R 中可以使用的包。详细文档可在[http://cran.r-project.org/web/packages/recommenderlab/vignettes/recommenderlab.pdf 获得](http://cran.r-project.org/web/packages/recommenderlab/vignettes/recommenderlab.pdf)

# ember.js - 仪表板的最佳实践

> ID：10767055
> 
> 赞同：3
> 
> 时间：2012-05-26T14:25:21.153
> 
> 标签：ember.js

我正在编写一个应用程序，使用 RoR 作为后端，使用 Ember.js 作为前端。

应用结构如下：

*   多个项目

*   每个项目都有任务和里程碑

UI结构如下：

*   两栏布局，左侧栏有项目

*   选择项目时，有任务和里程碑选项

*   有人登录后的“主屏幕”将是仪表板。不会选择任何项目。仪表板将包含基本信息（即将到来的里程碑、任务进度等）

这一切看起来都很正常，但我正在尝试找出实现仪表板的最佳方法。

在没有 Ember.js 的 RoR 中，我可能会创建一个单独的仪表板控制器。但是，我不知道 Ember.js 中的最佳实践。

使用 Ember 完成此任务的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T02:46:15.033

看看[Yehuda Katz 的这个要点](https://gist.github.com/2728699#comments)。它讨论了 Ember.js 中的新路由器实现，还有如何实现嵌套视图等的示例。未来使用的基本方法似乎是：

*   使用路由器初始化控制器并分配正确的视图。
*   在主要部分使用容器视图，然后根据应用程序的状态切换出 currentView 属性。
*   减少单例的使用
*   通过移除对 Singleton 控制器的依赖，允许视图被重用

这似乎是创建更大应用程序的好方法。对于您的情况，我会将 containerViews 绑定到 2 列中的每一列，并将容器视图绑定到整个页面。然后根据应用程序的状态在Router中操作它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T15:39:09.300

作为介绍，请查看 Vimeo 上的 Strobe 的 Sproutcore 培训视频，请参阅[http://vimeo.com/user7276077/videos](http://vimeo.com/user7276077/videos)。

所有这些都是针对 SproutCore 的，模型、视图和控制器的概念也适用于 Ember.js。在[第 4 部分 - 控制器层](http://vimeo.com/25409769)中，说明了具有多个项目和任务的应用程序的基本结构。

我知道这不是对您问题的具体答案，但它应该引导您朝着正确的方向前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-29T15:03:47.430

UI结构如下：

两栏布局，左侧栏有项目

选择项目时，有任务和里程碑选项

有人登录后的“主屏幕”将是仪表板。不会选择任何项目。仪表板将包含基本信息（即将到来的里程碑、任务进度等）

这一切看起来都很正常，但我正在尝试找出实现仪表板的最佳方法。

在没有 Ember.js 的 RoR 中，我可能会创建一个单独的仪表板控制器。但是，我不知道 Ember.js 中的最佳实践。ember.js 分享|改善这个问题

# c++ - count 像素坐标 x 和 y

> ID：10767057
> 
> 赞同：1
> 
> 时间：2012-05-26T14:25:37.143
> 
> 标签：c++, image, opencv

我尝试使用此代码对图像中的像素坐标 (x,y) 求和

这是代码

```
#include<cv.h>
#include<cvaux.h>
#include<stdio.h>
#include<highgui.h>
#include<iostream>
#include<cxtypes.h> // for cvarr 
using namespace std;
// This program to count the pixel value in the gray image
void main()
{
    IplImage* image;
    int w,h;
    char* filename;
    filename="D:\\Recognition\\Image Crop\\7.jpg";
    image=cvLoadImage(filename,0); //for grayscal image
    // Get image attribute
    w=image->width; //image width
    h=image->height; //image height
    cout<<"1\. image width "<<w<<"\n2\. image height "<<h<<"  \n";
    int Sx,Sy;
    const CvArr* arr;
    CvScalar se; // to store the num
    for(int x=0;x>image->width;x++)
    {
        for(int y=0;image->height;y++)
        {
            se=cvGet2D(image,x,y);
            Sx=se.val[y];
            Sx+=Sx;
        }
        Sy=se.val[x];
        Sy+=Sy;
    }
    cout<<"3\. sum x ="<<Sx<<"\n4\. sum y ="<<Sy<<" \n";
} 
```

我正在尝试计算像素坐标 x 和 y 的总和。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T14:49:48.773

这些循环是怎么回事？

```
for(int x=0;x>image->width;x++)
{
    for(int y=0;image->height;y++) 
```

应该：

```
for(int x=0;x<image->width;x++)
{
    for(int y=0;y<image->height;y++) 
```

对？

另外，这是怎么回事？：

```
 Sx=se.val[y];
        Sx+=Sx; 
```

您正在重置`Sx`每个循环迭代，然后将其加倍，但随后将该计算丢弃在下一次循环迭代中。类似的问题`Sy`。

我鼓励您逐行查看您的程序，并在公开发布问题之前真正考虑一下它在做什么。

# php - 服务器端验证 - 如何开始？

> ID：10767058
> 
> 赞同：0
> 
> 时间：2012-05-26T14:25:39.740
> 
> 标签：php

我有一个关于从表单验证 PHP 变量的小问题。

例如：我将一个变量从一个表单发布到一个 PHP 文件。

```
$event_name = mysql_real_escape_string($_POST['event-name']);
if ($event_name=='' || $event_name==null)
{
    /* send error message */
} 
```

我使用了上面的代码，每当 $_POST['event-name'] 为空时都会出错。如果我像这样使用它会不会有任何问题/后果：

```
$event_name = $_POST['event-name'];
if (mysql_real_escape_string($event_name)=='' || mysql_real_escape_string($event_name)==null)
 {
    /* send error message */
 } 
```

还是我做错了？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:34:55.407

PHP [isset](http://uk3.php.net/manual/en/function.isset.php)方法用于查看 POST 中是否有内容。建议使用以下方法：

```
if (!isset($_POST['event-name']) || $_POST['event-name'] == "")
{
    /* send error message */
}
else
    $event_name = $_POST['event-name']; 
```

仅`mysql_real_escape_string`在发出 mysql 查询时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T14:36:03.457

[如果启用了 E_STRICT](http://www.php.net/manual/en/errorfunc.constants.php)错误报告，您可能会收到错误“未定义**的索引事件名称**” 。

所以最好检查变量是否不为[空](http://php.net/manual/en/function.empty.php)

```
 if (!empty($_POST['event-name'])) { 
     $event_name = mysql_real_escape_string ($_POST['event-name']); //espace variables after validation.
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T16:13:26.073

我认为更好的方法是：

```
$clean = array();

if(isset($_POST['event-name']) && ctype_alpha($_POST['event-name']) && trim($_POST['event-name']) != "")
{
  $clean['event-name'] = mysql_real_escape_string($_POST['event-name']);
}
else
{
  // process error message
} 
```

# operating-system - 操作系统 - 分页

> ID：10767060
> 
> 赞同：1
> 
> 时间：2012-05-26T14:25:58.280
> 
> 标签：operating-system, paging

我读了一本关于分页（内存管理方案）的书。

据我了解，每个虚拟内存都转换为物理内存。

但我不明白两个非常基本的事情：

1.  如果我们有进程 A 和进程 B，我们如何确定它不会将它们的线性地址转换为相同的物理地址？

2.  我们如何确定现在在物理内存中的页面不属于两个进程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T14:43:44.097

当一个进程想要访问一个地址时，它正在使用一个虚拟地址。该地址由处理器转换为物理地址。这样做的方法是使用[**页表**](http://en.wikipedia.org/wiki/Page_table)。每个进程都有一个关联的页表，将其虚拟地址转换为物理地址。由于每个进程都有不同的页表，操作系统可以强制来自不同进程的两个虚拟地址（即使可能相等）不会映射到相同的物理地址。

此外，大多数当前的处理器都包含一个名为[Translation Lookaside Buffer (TLB)](http://en.wikipedia.org/wiki/Translation_lookaside_buffer)的结构。该结构是前面提到的页表的缓存。访问页表是一项代价高昂的操作，而 TLB 使该操作更快。

还有其他可能在进程的地址空间之间强制分离，例如[分段](http://en.wikipedia.org/wiki/Segmentation_%28memory%29)。[您可以在此处](http://en.wikipedia.org/wiki/Virtual_memory)阅读有关一般虚拟内存的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T21:21:56.720

关于问题 1 和 2，有时需要将多个虚拟地址映射到同一个物理页面，尤其是对于代码段。例如，一个共享库可能被许多独立的进程使用。操作系统可以只加载一次库并将相同的物理页面映射到每个进程的虚拟地址空间，而不是同一库的冗余副本占用 RAM。对于读/写数据页，一些进程间通信方法使用共享物理内存。

# xcode - Xcode 4.3.2 管理器冻结

> ID：10767061
> 
> 赞同：0
> 
> 时间：2012-05-26T14:26:18.517
> 
> 标签：xcode, macos, xcode4.3, xcode-organizer

我对 Xcode 的管理器有疑问。每当我单击它启动它时，一切都会冻结。我必须强制退出 Xcode 和昂贵的 bash 进程。

我试过了：

1.  重启 MAC
2.  重新安装 Xcode
3.  在“加载”管理器时多次终止 bash 进程
4.  跟随[如何清空缓存和清理所有目标 Xcode 4](https://stackoverflow.com/questions/5714372/how-to-empty-caches-and-clean-all-targets-xcode-4/6247073#6247073)

我几乎尝试了我在这里找到的所有内容，但没有任何效果。我在这里看到过类似的问题，但人们通常对已经工作的 Organizer 有问题，上面列出的东西帮助了他们。

有什么想法我能做些什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:11:04.680

我在 Xcode 4.5.2 上遇到了同样的问题。尝试使用 Gricha 提到的硬重置，使用下面的命令，虽然需要，但仍然没有解决它。

```
defaults delete com.apple.Xcode

defaults delete com.apple.dt.Xcode

rm -rf ~/Library/Application\ Support/Xcode 
```

最后，我按下 Shift-Command-2 调出管理器 - 并注意到那里有一个“空”项目。删除空项目终于让组织者工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T21:50:09.007

只是为了踢球：

尝试在您的 Macintosh 上创建一个***新的用户***帐户，看看 Xcode 管理器在其他帐户上是否更适合您。我听说有一些缓存文件在您删除或重新安装 Xcode 时不会被删除或擦除，您可能会遇到与此相关的问题。

如果这确实是一个解决方案，请向 Apple 提交错误（在 bugreporter.apple.com）。Xcode 团队需要意识到这样的问题。

# c# - 文本框无法在 .Net winform 中显示英文数字

> ID：10767062
> 
> 赞同：0
> 
> 时间：2012-05-26T14:26:37.487
> 
> 标签：c#, winforms, textbox

我表格中的所有整数都以波斯语显示。我还使用 System.Globalization.CultureInfo 将 CurrentInputLanguage 更改为英语，现在所有键入的字符都是英语，除了数字。数字仍以波斯语显示。文本框的 RiaghtToLeft 属性为“否”。你有什么建议吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:49:12.337

尝试`Thread.CurrentThread.CurrentUICulture`在表单构造函数代码中设置为不变：

```
using System.Threading;

namespace UICulture
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            Thread.CurrentThread.CurrentCulture = System.Globalization.CultureInfo.InvariantCulture;
            Thread.CurrentThread.CurrentUICulture = System.Globalization.CultureInfo.InvariantCulture;
            InitializeComponent();
        }
    }
} 
```

# python - 按内容升序合并文本文件

> ID：10767066
> 
> 赞同：4
> 
> 时间：2012-05-26T14:26:56.113
> 
> 标签：python, sorting, merge, text-files

我想知道你们是否对如何有效地执行此操作有任何意见，我目前有一个使用 Python 的集合类的工作实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T14:33:28.370

这取决于您有多少可用内存（当然还有文件的大小）。

如果您有足够的可用内存，我个人会采取简单的方法并创建所有项目的列表并`sort()`对其进行操作。

像这样的东西：

```
# Read all except the first (header) lines
lines = file('1.txt').readlines()[1:]
lines += file('2.txt').readlines()[1:]

lines.sort(key=lambda x: int(x.split()[0]))

print ''.join(lines) 
```

lambda 的替代方案：

```
def key(x):
    return int(x.split()[0]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T14:42:44.717

```
>>> from itertools import islice
>>> from operator import itemgetter
>>> files = ('1.txt','2.txt')
>>> lines = (map(int,line.split()) for f in files
             for line in islice(open(f),1,None))
>>> sorted(lines,key=itemgetter(0))
[[1, 23112, 3], [2, 32344, 1], [12, 19872, 0], [123, 12243, 1], [221, 39873, 5], [234, 34555, -4]] 
```

# javascript - Firefox 扩展：检查窗口是否最小化

> ID：10767068
> 
> 赞同：4
> 
> 时间：2012-05-26T14:27:18.110
> 
> 标签：javascript, firefox, firefox-addon, dom-events

我正在尝试跟踪 Firefox 窗口的状态（“最大化”、“最小化”、“正常”、“全屏”；请参见[此处](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIDOMChromeWindow)）。但是，无论我尝试过什么，我都看不到最小化的事件；其他人做得很好。例如，如果我向窗口添加侦听器，例如

```
window.addEventListener("activate", function(event) { dump("activate " + window.windowState + " " + window.screenX + " " + window.screenY + "\n"); }, false);
window.addEventListener("deactivate", function(event) { dump("deactivate " + window.windowState + " " + window.screenX + " " + window.screenY + "\n"); }, false);
window.addEventListener("resize", function(event) { dump("resize " + window.windowState + " " + window.screenX + " " + window.screenY + "\n"); }, false); 
```

我从未将 2 视为 window.windowState (2 = STATE_MINIMIZED)。我尝试过使用 screenX 和 screenY 的解决方法，但这没有帮助。当我最小化窗口时，停用 - 而不是调整大小 - 事件触发 window.windowState 为 3 (STATE_NORMAL) 和旧的 screenX/screenY 值。

有什么方法可以检测 Firefox 窗口何时被最小化？我无计可施。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T21:43:59.830

你应该在听[`sizemodechange`](https://developer.mozilla.org/en/XUL/Events#Window_events)事件。这是窗口最小化或最大化后触发的事件。该`resize`事件不会因窗口最小化而触发，因为从技术上讲，窗口没有调整大小 - 它是隐藏的。并且该`deactivate`事件可能在窗口最小化*之前*触发，此时它仍然具有正常状态（但是我没有检查）。

# security - 缓冲区溢出 - 程序在生成 shell 后终止

> ID：10767070
> 
> 赞同：6
> 
> 时间：2012-05-26T14:27:33.900
> 
> 标签：security, assembly, buffer-overflow, shellcode

我一直在 FreeBSD 系统上试验缓冲区溢出。作为第一个实验，我试图让被利用的程序启动另一个进程（在这种情况下是 /bin/hostname）。一切正常，程序打印了主机名，然后终止。之后我试图让程序产生一个shell（即执行/bin/sh）。我假设这可以通过简单地交换代表要调用的程序的字符串来完成。当我尝试这个时，被利用的程序简单地退出，根据 gdb 它确实成功地产生了一个新进程（/bin/sh）。但是，没有生成任何外壳。然后我尝试了我的第一个漏洞利用并将 /bin/sh 文件移动到 /bin/hostname，仍然没有改变任何东西。我现在的问题是，从任何其他命令执行 /bin/sh 似乎有什么不同？

作为参考，对于 shell 生成尝试，我使用了以下 shellcode：

```
char code[] = "\x31\xc0\x50\x68\x2f\x2f\x73\x68"
"\x68\x2f\x62\x69\x6e\x89\xe3\x50"
"\x54\x53\xb0\x3b\x50\xcd\x80"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T13:51:57.630

哈，我明白你的意思，但我相信你犯了一个根本性的错误。您正在调用交互式 shell 而不绑定它。

这就像调用“ifconfig”命令。如果你想要执行单个命令，那么你的 shell 代码是完美的，但是如果你想要一个交互式 shell，你不能只运行 sh。

**简单地运行 sh 将导致 shell 被执行，它不会给你对 shell 的交互控制。**

* * *

**解决方案：** 使用 shell 代码生成器创建反向 tcp shell 或绑定 shell，并将其用作您的漏洞利用的有效负载。

如果您尝试在 Metasploit 中执行此操作，那么这里有一个您想要的示例命令。

```
msfpayload windows/shell_bind_tcp LPORT=4444 R | msfencode -e x86/alpha_mixed -b '\x00' -t c 
```

*   Msfpayload 是函数的名称。windows/shell_bind_tcp 是漏洞利用路径
*   LPORT 是远程受害者机器可以访问 shell 的端口
*   R 用于原始输出
*   然后我们通过管道将其传递给 msfencode，因为我们需要它是 C 代码才能执行，并且必须针对该架构进行编译
*   -e 表示要支持的编码类型和架构，例如用于 Win Sp2
*   -b 表示您不能在 shell 代码中使用的字节。例如 00 是字符串字节的结尾
*   -t 是输出类型，如 C 代码。

多研究一点，玩一玩，你就会明白的。本质上，与执行静态命令相比，获得交互式 shell 要困难得多。

完成后，您可以使用 netcat 之类的程序来连接和使用 shell。

```
netcat.exe -nv <victim ip> <port where shell was bound to> 
```

希望这是正确的解决方案。

# objective-c - UITableView : popViewController 并将行索引保留到父控制器中？

> ID：10767075
> 
> 赞同：3
> 
> 时间：2012-05-26T14:28:33.400
> 
> 标签：objective-c, ios, uitableview, uiviewcontroller

我有以下配置：

一个 ViewController *parentController*包含一个 TableView *parentTable*和自定义单元格，以在每个单元格中显示 2 个标签。

一个 ViewController *childController*包含一个 TableView *childTable*。当用户单击controllerParent 的一个单元格时会显示此视图，并且childTable 内容取决于所选的parentController 单元格。我使用这种方法：

```
[self.navigationController pushViewController:controleurEnfant animated:YES]; 
```

现在，当我单击 childTable 中的一个单元格时，我会返回到以前的视图：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

当然，我可以很容易地选择 childTable 的行的索引。但是我唯一不知道的是当我回到那里时如何保留这些数据以在 parentController 中使用它？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T16:02:47.993

对于此类问题，您可以使用委托

[RayWenderlichs 教程](http://www.raywenderlich.com/5191/beginning-storyboards-in-ios-5-part-2)中的代码：

.h 在您的 childViewController 中：

```
@class ChildViewController;

@protocol ChildViewControllerDelegate <NSObject>
- (void)childViewControllerDidSelect:(id)yourData;
@end

@interface childViewController : UITableViewController

@property (nonatomic, weak) id <ChildViewControllerDelegate> delegate;

- (IBAction)cancel:(id)sender;
- (IBAction)done:(id)sender;

@end 
```

.m 在 childViewController

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
 [self.delegate childViewControllerDidSelect:myObject];
 [self.navigationController popViewControllerAnimated:YES];
} 
```

在您的 parentViewController.h 中采用协议

```
@interface ParentViewController : UITableViewController <ChildViewControllerDelegate> 
```

并实现委托方法

```
- (void)childViewControllerDidSelect:(id)yourData 
{
    self.someProperty = yourData
} 
```

并且不要忘记在推送之前设置委托：

```
...
ChildViewController *vc  = [ChildViewController alloc] init];
vc.delegate = self;
[self.navigationController pushViewController:vc animated:YES]; 
```

这是关于委托模式的一些文档：[委托和数据源](https://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)

# bash - 源（命令）设置 FOO 的 bash 脚本不会使其对其他 bash 脚本可见

> ID：10767085
> 
> 赞同：1
> 
> 时间：2012-05-26T14:30:49.993
> 
> 标签：bash, shell

我有以下 bash 脚本（名为“env.bash”）供源命令使用：

```
#!/bin/bash
FOO=/some/path 
```

然后我有以下 bash 脚本（名为“compile.bash”）：

```
#!/bin/bash
if [ -z "$FOO" ]; then
    echo "Need to set FOO, did you forget to source env.bash?"
    exit 1
fi 
./compile-something 
```

但是，如果我这样做：

```
source env.bash
./compile.bash 
```

我得到“需要设置 FOO”，为什么？如果我回显 $FOO 我可以看到它的价值就好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T14:32:03.297

```
export FOO=/some/path 
```

这应该有效。原因是 shell 脚本将在一个子 shell 中运行，它有自己的环境副本；超级外壳的变量通常不可见。当您执行 时`export`，您将使导出变量的副本可用于子 shell。

编辑：删除了不准确之处；另外，感谢@DonCallisto 的一个好点。

# c# - 比较后如何将项目动态添加到二维数组？c# windows 窗体

> ID：10767088
> 
> 赞同：0
> 
> 时间：2012-05-26T14:31:25.337
> 
> 标签：c#, winforms

我有一段代码，我在其中一直在比较 2D 和 1D 数组。你能告诉我如何将结果（两​​个数组中都存在的元素）存储在另一个 2D 数组中吗？这是我实际上想在新的二维数组中保存“res”的代码......

```
namespace WindowsFormsApplication1strng_cmp
{
    public partial class Form1 : Form
    {
        private static Dictionary<string, Position> BuildDict(string[,] symbols)
        {
            Dictionary<string, Position> res = new Dictionary<string, Position>();
            for (int i = 0; i < symbols.GetLength(0); i++)
            {
                for (int j = 0; j < symbols.GetLength(1); j++)
                {
                    res.Add(symbols[i, j], new Position(i, j));
                }
            }
            return res;
        }

        struct Position
        {
            public int x;
            public int y;
            public Position(int x, int y)
            {
                this.x = x;
                this.y = y;
            }
        }

        private static List<string> CompareUsingBrute(string[] text, string[,] symbols)
        {
            List<string> res = new List<string>();
            for (int x = 0; x < symbols.GetLength(0); x++)
            {
                for (int y = 0; y < symbols.GetLength(1); y++)
                {
                    for (int z = 0; z < text.Length; z++)
                    {
                        if (symbols[x, y] == text[z])
                            res.Add(text[z]);

                    }

                }
            }
            return res;

        }
        string[,] symbols = new string[,] { { "if", "else" }, { "for", "foreach" }, { "while", "do" } };
        string[] text = new string[] { "for", "int", "in", "if", "then" };
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void button1_Click(object sender, EventArgs e)
        {
            Dictionary<string, Position> dictionary = BuildDict(symbols);
            //   IndexElement[] index = BuildIndex(symbols);

            foreach (string s in CompareUsingBrute(text, symbols))
            {
                listBox2.Items.Add("valid");
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:57:11.400

我从“您的问题”中了解到的是，您正在尝试比较两个数组并存储公共元素-

已在下面附加输出作为图像-

```
class Program
{
    static void Main(string[] args)
    {
        String[] array1 = {"a","b","c","d","e","f"};
        String[,] array2 = new String[,] {{"a","b","c","d"},{"d","e","f","g"}};

        List<String> array1AsList = array1.OfType<String>().ToList();
        List<String> array2AsList = array2.OfType<String>().ToList();

        // referring from **Ed S comments below**. Instead of using OFType(...)
        // alternatively you can use the List<>().. ctor to convert an array to list
        // although not sure for 2D arrays

        var common = array1AsList.Intersect(array2AsList);

    }
} 
```

![在此处输入图像描述](../Images/451b32edf0e67feef4d73478338068d7.png)

# java - 无法从java将新用户添加到数据库

> ID：10767091
> 
> 赞同：1
> 
> 时间：2012-05-26T14:32:00.553
> 
> 标签：java, database, oracle

我正在使用以下代码将用户添加到我的数据库中名为 USERS 的表中，连接是正确的，因为我尝试了其他查询并且它们有效，我在 Oracle 本身中尝试了这个查询并且它有效，我只是有java中的查询问题，主要是因为SPACE和语法，这个有什么问题？

```
try
{
    stmt=conn.createStatement();
    //query="INSERT INTO Users (user_id,username,password,first_name,last_name) " + " VALUES (seq_users.nextval,'"+usernameCreateField.getText()+"','"+new String(passwordCreateField.getPassword())+"','"+firstnameCreateField.getText()+"','"+lastnameCreateField.getText()+"') ";
    query="INSERT INTO Users (user_id,username,password,first_name,last_name) " +" VALUES (seq_users.nextval,'test','test','test','test') ";
    rset=stmt.executeQuery(query);
}
catch(SQLException | NumberFormatException e)
{
    System.out.println("result error, " +e.getMessage());
}
finally
{
    try
    {
        rset.close();
        stmt.close();
    }
    catch(Exception e)
    {
        System.out.println("Error in closing "+e.getMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T15:23:52.893

所以问题是你要求`executeQuery(query)`你的陈述，这就是它不起作用的原因。`executeQuery()`不能用于**DML（数据操作语言）**语句的方法`INSERT`，例如 are`UPDATE`和`DELETE`. 对于这些语句，提供了为这些 DML 语句存在的`Java`命名方法。`executeUpdate()`

从文档：

> executeUpdate 方法执行此 PreparedStatement 对象中的 SQL 语句，该语句必须是 SQL 数据操作语言 (DML) 语句，例如 INSERT、UPDATE 或 DELETE；或不返回任何内容的 SQL 语句，例如 DDL 语句。

所以只用这个替换实际的方法，它就会起作用。

对不起我的好奇心，但为什么你不使用参数化`SQL`语句？您会知道，不使用参数化语句存在**SQL 注入**的高度危险，许多黑客使用它来破坏数据库。你应该考虑一下。如果您希望您的数据库会更安全，这一点非常重要。你不会相信用数据库证明 SQL 注入的东西。

仅以您为例，应创建如下查询：

```
query = "INSERT INTO Users (user_id,username,password,first_name,last_name) values(?,?,?,?,?) "; 
```

这个`?`字符代表一个参数。编号从 1、2、3 等开始，而不是从零开始。

然后你必须在你`execute`这样声明之前用真实数据替换那里的参数：

```
PreparedStatement ps = conn.prepareStatement(query);
// no set parameters
ps.setInt(1, someDTO.getId());
ps.setString(2, someDTO.getUserName());
ps.setString(3, someDTO.getPassword());
ps.setString(4, someDTO.getFirstName());
ps.setString(5, someDTO.getLastName());
ps.executeUpdate();
System.out.println("Data was inserted successfully.");
return true; 
```

更多关于 SQL 注入的信息：[这里](http://en.wikipedia.org/wiki/SQL_injection)和[这里](http://www.unixwiz.net/techtips/sql-injection.html)

**编辑：**

我刚看你的代码时忘了告诉你，当你打开`connection`然后你当然会关闭它，你不必为or调用`close()`方法，当你关闭后一切都会被关闭。`statements``ResultSet``connection`

希望对您有所帮助。

问候

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T14:54:24.310

您正在尝试做的是 DML 操作。尝试更换

```
rset=stmt.executeQuery(query); 
```

和

```
int affectedRows = stmt.executeUpdate(query); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-04T06:36:06.813

尝试这个...

```
try {    
String URL = "jdbc:sqlserver://127.0.0.1:1433;databaseName=(databaseNameHere)";    

Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
Connection conn2 = DriverManager.getConnection(URL,"username","userpassword");

String sql = "INSERT INTO tableNameHere(user_id,username,password,first_name,last_name) values(?,?,?,?,?)";

ps = conn2.prepareStatement(sql);
ps.setString(1, user_id);
ps.setString(2, username);
ps.setString(3, password);
ps.setString(4, first_name);
ps.setString(5, last_name);  

} 
```

# c# - 观察值不断变化的变量

> ID：10767095
> 
> 赞同：2
> 
> 时间：2012-05-26T14:32:11.407
> 
> 标签：c#, c++, debugging

我的问题与 VS 2010 中的调试有关。我正在使用 Kinect 在 OpenGL 中创建一个应用程序，因为 x、y、z 坐标不断变化，所以我想跟踪每个 x、y、z 坐标。如果你放一个某个表达式的断点然后您必须单击一些 `STEP OUT or STEP OVER`才能再次查看变量的下一个值。这是否可以在不停止程序的情况下在每个实例处获取变量的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:45:32.687

是的。这是一个观察点。

像正常一样设置断点，右键单击并选择（注意 - 这就是魔法）：当命中时。

在该对话框中：打印一条消息，然后将其设置为：坐标：{x}、{y}、{z}

请注意，支撑是您指定子符号值的方式。

所有输出都将显示在调试输出窗口中，现在您可以随时随地设置这些，而无需使用 API 或重新编译。

# php - 如何进行模型映射？

> ID：10767099
> 
> 赞同：1
> 
> 时间：2012-05-26T14:32:32.517
> 
> 标签：php, symfony, doctrine-orm

我有一个`Photo Entity`，我想保存所有照片。我有其他实体说`User`和`Post`。两者都可以有多张照片。应该是`many to many`映射吧？我做得对吗？我正在使用 symfony2 和学说来做这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T14:43:09.413

要确定您需要的多重性，您必须填写此类短语：

一个A有？B(s) 一个 B 有 ? 作为）

示例：一个用户有**很多**帖子 一个帖子有**一个**作者（或用户）

这种关系是多对一的双向关系，关系可以命名为“posts”（带 s），反向关系可以命名为“author”（不带 s）

对您的其他实体执行相同操作（编辑您的问题以显示您得到的结果）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:31:17.467

此处描述了关联**映射类型**[http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/association-mapping.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/association-mapping.html)

> 真正的多对多关联不太常见

您的应用程序的逻辑取决于您。在我看来，我的观点是：

帖子（一个帖子可能有多张照片）：

```
<one-to-many field="photos" target-entity="Photo" mapped-by="post" /> 
```

用户（一个用户可能有多张照片）：

```
<one-to-many field="photos" target-entity="Photo" mapped-by="user" /> 
```

最后照片：

```
<many-to-one field="post" target-entity="Post" />
<many-to-one field="user" target-entity="User" /> 
```

# java - 在 Android AppWidget 中按下按钮时执行代码

> ID：10767100
> 
> 赞同：2
> 
> 时间：2012-05-26T14:32:49.310
> 
> 标签：java, android, widget, android-appwidget

我正在开发一个小应用程序，它可以让我指定电话号码和消息，然后快速将预设消息发送到预设号码。我已经启动并运行了主要功能，现在我想制作一个小部件。

我一直在玩各种小部件教程，但没有一个涵盖我想做的事情。他们最终要么只是更新时钟，要么启动一项活动。我想做的只是在我的小部件中的按钮被按下时发送一条消息，也许有点`Toast`说“消息已发送”。

如何`onClickListener`在不启动活动的情况下向按钮添加一个？

我的小部件类看起来很像官方开发指南上的示例

```
public class SaldoWidget extends AppWidgetProvider {

    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
        final int N = appWidgetIds.length;
        for (int i=0; i<N; i++) {
            int appWidgetId = appWidgetIds[i];

            Intent intent = new Intent(context, SaldoActivity.class);
            PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);

            RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget1);
            views.setOnClickPendingIntent(R.id.button, pendingIntent);

            appWidgetManager.updateAppWidget(appWidgetId, views);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:49:10.693

在按钮单击上更新主屏幕小部件您需要在清单中注册自定义广播接收器并将其添加为带有小部件的操作。

使您的小部件可点击是四五个步骤的任务，不可能在这里描述所有步骤。所以请参阅[Android 小部件没有更新](https://stackoverflow.com/questions/10588080/android-widget-not-updating-has-incorrect-widget-id/10712961#10712961)我的答案并下载工作主屏幕 appwidget，它会在点击时从[HomeWidgetRendomNumber](https://sites.google.com/site/imrankhanandroid/HomeWidgetRendomNumber.rar?attredirects=0&d=1)生成随机数。我希望这会有所帮助...

# sql-server-2008 - 在 SQL Server 中排序

> ID：10767101
> 
> 赞同：1
> 
> 时间：2012-05-26T14:32:53.993
> 
> 标签：sql-server-2008, sqlbulkcopy

我有一种情况，我从文本文件中导入多行数据。导入过程使用 SqlBulkCopy 进行，最初加载到临时表中。

我对此数据执行了一些验证，并希望能够在验证失败时向用户报告文件的哪一行出错。我希望在临时表上简单地使用 ROW_NUMBER() 以及 SELECT 的默认顺序，但是关于 SO 的[一些](https://stackoverflow.com/a/5628674/685760) [问题](https://stackoverflow.com/a/1110735/685760)表明我无法做到这一点。

您会建议什么方法让我保留输入文件的原始顺序？输入文件格式为 TSV。我是否需要创建一个指示文件行的模拟值？

有没有办法按照原始插入的顺序报告查询结果？鉴于我使用 SqlBulkCopy 来批量加载日期，我可以依靠这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T17:34:23.750

我发现我能够将源表顺序保存`BULK INSERT`到文件中，然后添加一个标识。

给定一个制表符分隔的表，`C:\MyTable.txt`我故意将行乱序移动：

```
FileName    FileType
wmsetup log
bar txt
wmsetup10   log
WMSysPr9    prx
WMSysPrx    prx
Wudf01000Inst   log
xpsp1hfm    log
_default    pif
0   log
002391_ tmp
005766_ tmp 
```

我运行了以下命令并在 SQL Server 中保留了文本文件顺序：

```
IF EXISTS(
    SELECT 1
    FROM sys.tables t
    INNER JOIN sys.schemas s on s.schema_id=t.schema_id
    WHERE t.name='myTable'
    AND t.[type]='U'
    AND s.name='dbo'
)
DROP TABLE myTable
GO

CREATE TABLE dbo.myTable(FileName VARCHAR(80), FileType VARCHAR(30))
GO

BULK INSERT myTable FROM 'C:\MyTable.txt' WITH (
firstrow=2
, fieldterminator='\t'
, rowterminator='\n'
)
GO

ALTER TABLE myTable ADD ID INT IDENTITY(1,1)
GO

SELECT * FROM myTable
GO 
```

结果：

```
FileName        FileType ID
--------------- -------- -----------
wmsetup         log      1
bar             txt      2
wmsetup10       log      3
WMSysPr9        prx      4
WMSysPrx        prx      5
Wudf01000Inst   log      6
xpsp1hfm        log      7
_default        pif      8
0               log      9
002391_         tmp      10
005766_         tmp      11 
```

# javascript - 从调用函数中检索回调值。如何？

> ID：10767102
> 
> 赞同：0
> 
> 时间：2012-05-26T14:33:09.070
> 
> 标签：javascript

在我进行 ajax 调用的函数中，回调具有我在该函数中需要的 response_text。我尝试了将 a`var here`放入调用函数并在回调函数中使用它的明显方法。这不起作用。接下来我尝试使用`function out()`我以前做过的事情。这很有效，因为我现在可以从 out() 访问 response_text。但是，有没有办法`vOrb()`直接从那里访问，也就是原来的调用函数呢？

[我不想像在这个SO Question](https://stackoverflow.com/questions/6784702/retrieving-value-from-javascript-callback-function)中那样将所有代码都放在回调中

`var here`当回调函数异步返回时，模块模式是否可以作为一种保持范围的方式？或者只是简单地写成`var vOrb = function(){}`一个包装并使用 new 调用，就可以了？

```
function vOrb( icon_array )
{
    var here; // does not work
    function out( here ){} // does work
    new AjaxRequest().invoke( 'ajax_type=fav_dir', function( response_text )
    {
        out( response_text );
    } ); 

// want response_text here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:59:13.667

我不确定我是否理解一切正确，但无论如何我都会尝试回答。如果这是您想要的，则不能在回调之外使用 response_text - 它是未定义的。

最好像这样进行：

```
function vOrb( icon_array )
{
    new AjaxRequest().invoke( 'ajax_type=fav_dir', myCallback ); 
    var myCallback = function ( response_text ) {
        // blah…
    };
} 
```

如果您绝对想在回调之外使用 response_text，那么您必须先检查它是否已设置。

```
var my_response;
function vOrb( icon_array )
{
    new AjaxRequest().invoke( 'ajax_type=fav_dir', myCallback ); 
    var myCallback = function ( response_text ) {
        my_response = response_text;
    };
}

// ...

if ( typeof my_response !== 'undefined' ) { // will only work after the callback is triggered
    // use "my_response" here
} 
```

# winapi - GetAddrInfo 无法解析 ipv6.google.com（但 nslookup 可以）

> ID：10767107
> 
> 赞同：1
> 
> 时间：2012-05-26T14:33:17.613
> 
> 标签：winapi, sockets, dns, ipv6

我可以尝试使用[`GetAddrInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738520%28v=vs.85%29.aspx)来解决[`ipv6.google.com`](http://ipv6.google.com)：

```
wsaError = getaddrinfo("ipv6.google.com", null, null, ref addrInfo); 
```

返回的套接字错误代码是`11001`（不知道这样的主机）。

> **注意**：已弃用的旧版功能[`GetHostByName`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738524%28v=vs.85%29.aspx)不支持 IPv6。它已被替换为[`GetAddrInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738520%28v=vs.85%29.aspx)。

奇怪的是我可以使用`nslookup`它并且可以很好地找到地址：

**问题**

```
SendRequest(), len 33
    HEADER:
        opcode = QUERY, id = 4, rcode = NOERROR
        header flags:  query, want recursion
        questions = 1,  answers = 0,  authority records = 0,  additional = 0

    QUESTIONS:
        ipv6.google.com, type = A, class = IN 
```

**权威回答**

```
Got answer (106 bytes):
    HEADER:
        opcode = QUERY, id = 4, rcode = NOERROR
        header flags:  response, want recursion, recursion avail.
        questions = 1,  answers = 1,  authority records = 1,  additional = 0

    QUESTIONS:
        ipv6.google.com, type = A, class = IN
    ANSWERS:
    ->  ipv6.google.com
        type = CNAME, class = IN, dlen = 9
        canonical name = ipv6.l.google.com
        ttl = 21743 (6 hours 2 mins 23 secs)
    AUTHORITY RECORDS:
    ->  l.google.com
        type = SOA, class = IN, dlen = 38
        ttl = 30 (30 secs)
        primary name server = ns4.google.com
        responsible mail addr = dns-admin.google.com
        serial  = 1486713
        refresh = 900 (15 mins)
        retry   = 900 (15 mins)
        expire  = 1800 (30 mins)
        default TTL = 60 (1 min) 
```

**非权威问题**

```
SendRequest(), len 33
    HEADER:
        opcode = QUERY, id = 5, rcode = NOERROR
        header flags:  query, want recursion
        questions = 1,  answers = 0,  authority records = 0,  additional = 0

    QUESTIONS:
        ipv6.google.com, type = AAAA, class = IN 
```

**非权威回答**

```
Got answer (82 bytes):
    HEADER:
        opcode = QUERY, id = 5, rcode = NOERROR
        header flags:  response, want recursion, recursion avail.
        questions = 1,  answers = 2,  authority records = 0,  additional = 0

    QUESTIONS:
        ipv6.google.com, type = AAAA, class = IN
    ANSWERS:
    ->  ipv6.google.com
        type = CNAME, class = IN, dlen = 9
        canonical name = ipv6.l.google.com
        ttl = 21743 (6 hours 2 mins 23 secs)
    ->  ipv6.l.google.com
        type = AAAA, class = IN, dlen = 16
        AAAA IPv6 address = 2607:f8b0:4009:801::1012
        ttl = 270 (4 mins 30 secs)

------------
Name:    ipv6.l.google.com
Address:  2607:f8b0:4009:801::1012
Aliases:  ipv6.google.com 
```

什么会导致`nslookup`无法解析地址[`GetAddrInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738520%28v=vs.85%29.aspx)？我可以用什么不同的方法`GetAddrInfo`让它起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T16:41:23.037

尝试传入参数`AF_INET6`以`pHints`使用 IPV6 地址。这似乎对我有用：

```
struct addrinfo *result = NULL;
struct addrinfo hints;

ZeroMemory( &hints, sizeof(hints) );
hints.ai_family = AF_INET6;
hints.ai_socktype = SOCK_DGRAM;
hints.ai_protocol = IPPROTO_UDP;

dwRetval = getaddrinfo("ipv6.google.com", NULL, &hints, &result);
// check your dwRetval here ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T21:09:53.363

我有类似的问题，不是代码问题，而是操作系统问题。以下命令意味着 Windows 正确解析了 IPv6 地址，而不是给出 WSANA_DATA 错误：

Netsh 接口 teredo set state enterpriseclient

来源：

[http://netscantools.blogspot.co.uk/2011/06/ipv6-teredo-problems-and-solutions-on.html](http://netscantools.blogspot.co.uk/2011/06/ipv6-teredo-problems-and-solutions-on.html)

# image - 连接非常大的图像

> ID：10767112
> 
> 赞同：1
> 
> 时间：2012-05-26T14:34:09.797
> 
> 标签：image, concatenation

我正在尝试将 1600*900 图像的列表连接为马赛克，但我无法分配（例如）每 100k 100k 的位图。

因此，我正在寻找一种方法来创建位图文件并以类似流的方式在其上写入。

我能怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T14:59:41.960

虽然 100k x 100k 图像的确切实用价值尚不清楚，但解决方案可能是：

1.  在生成的 W-by-H 马赛克中创建源图像的偏移列表。这里的一些计算：100k×100k 图像可以容纳大约 50×100 图像（仅 5k，一个合理的数字）。因此，您只需要偏移数组中的约 5000 个元素，这远非大。使用这个答案（http://stackoverflow.com/questions/8762569/how-is-2d-bin-packing-achieved-programmatically/10339522）来计算这些偏移量。

2.  将图像头写入文件流（例如，参见 .BMP 格式的 54 字节头）

3.  “低效”部分：将 (100k-by-100k)*BytesPerPixel 零写入文件，然后逐一迭代将图像写入此文件。

InsertImageToStream() 是逐行完成的，我认为它非常简单。

第 3 步的优化：当 offsets[] 数组按 Y 排序，然后按 X 排序时，您可以优化填充结果图像的每个扫描线，而无需过多的 FileStream.seek() 调用。

# java - 如何在一个 ListView 中显示 String 数组和 Integer 数组

> ID：10767113
> 
> 赞同：1
> 
> 时间：2012-05-26T14:34:19.493
> 
> 标签：java, android, android-listview, alignment, counter

我最近开始制作一个 Android 应用程序，它需要一个包含 20 个名称的列表和每个名称的计数器，两者都显示在屏幕上。每当有人点击一个名字时，该名字的计数器就会增加一。这意味着名称和计数器需要以某种方式“连接”。

我首先使用`ListView`. 这是我的代码：

```
public class ExampleActivity extends ListActivity { 
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        String[] NAMES = getResources().getStringArray(R.array.names_array);
        setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, NAMES));

        ListView lv = getListView();
        lv.setTextFilterEnabled(true);

        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                if (position == 0) //Shows toast with name
                Toast.makeText(getApplicationContext(), ((TextView) view).getText(), Toast.LENGTH_SHORT).show();
            }
        });
    }
} 
```

这是 list_item.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="16sp" >
</TextView> 
```

现在我正在寻找一种在列表中显示计数器的方法。在我看来，最用户友好的应该是一个列表，其中名称显示在左侧（目前是这种情况），它们的计数器在右侧（与名称在一行；列表中的对齐不是我的问题）。

但是，由于我只是 Android 的初学者，我不知道如何解决这个问题。我的第一个问题是我不知道如何以某种方式将我的 20 个名称列表与 20 个整数列表合并，并使这些整数特定于每个名称。我的第二个问题是如何在屏幕上显示所有这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:41:35.930

最好的办法是设置一个自定义列表视图项，其名称和整数按照您想要的方式组织。然后在您的 onItemSelect 侦听器中简单地增加该整数并调用 notifyDataSetChanged。Samir 提供的博客文章似乎是设置自定义列表视图项目的一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T16:49:22.350

`Model`在一个简单的类中组织您的行数据（名称 + 计数器） ：

```
class Model {
    String name;
    int counter;

    Model(String name, int counter) {
        this.name = name;
        this.counter = counter;
    }

    @Override
    public String toString() {
       return name;
    } 
} 
```

然后构造一个行布局来显示名称和计数器：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/counter"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true" />

</RelativeLayout> 
```

最后将`Model`数据绑定到行布局：

```
public class ModelAdapter extends ArrayAdapter<Model> {

        private ArrayList<Model> data;

        public ModelAdapter(Context context, int resource,
                int textViewResourceId, ArrayList<Model> objects) {
            super(context, resource, textViewResourceId, objects);
            data = objects;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // let the adapter bind the name to the list
            View v = super.getView(position, convertView, parent);
            // find the counter TextView so we can update it's value
            TextView counterTv = (TextView) v.findViewById(R.id.counter);
            //get the data from the list for this row.
            Model obj = data.get(position);
            //set the counter value for this row
            counterTv.setText(String.valueOf(obj.counter));
            return v;
        }       

    } 
```

要使用新适配器：

```
 //...
    String[] NAMES = getResources().getStringArray(R.array.names_array);
    // construct the list of model object for your rows:
    ArrayList<Model> items = new ArrayList<Model>();
    for (int i = 0; i < 20; i++) {
        items.add(new Model(NAMES[i], 0));// I guess the counter starts at 0
    }
    mAdapter = new ModelAdapter(this, R.layout.list_item, R.id.name, items);
    setListAdapter();
    ListView lv = getListView();
    lv.setTextFilterEnabled(true);      

//... 
```

`ListActivity`已经实现的，`OnItemClickListener`是`onListItemClick`方法：

```
public void onListItemClick(ListView parent, View view, int position, long id) {
                        Model clickedRowData = parent.getItemAtPosition(position);
                        clickedRowData.counter++;
                        // notify the adapter that something was updated
                        mAdapter.notifyDataSetChanged();
                    } 
```

# css - 100% div 高度问题

> ID：10767115
> 
> 赞同：3
> 
> 时间：2012-05-26T14:34:26.593
> 
> 标签：css, html, xhtml, height

我有两个容器（`main-container`和`sub-container`）。正文、HTML 和主容器具有`100%`高度类，而`sub-container`固定在`1000px`. 主容器无论大小都应与`100%`整个屏幕的高度相适应`sub-container`。现在的问题是，主容器没有根据子容器的高度增加它的高度。请检查下面的示例以了解我的要求。

[http://jsfiddle.net/awaises/dLeHL/](http://jsfiddle.net/awaises/dLeHL/)

非常感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T14:41:25.283

更改`height:100%;`为： [http](http://jsfiddle.net/dLeHL/3/) : `min-height:100%;`//jsfiddle.net/dLeHL/3/`.main-container`

编辑：

百分比高度规则在[这里](http://www.dynamicsitesolutions.com/css/height-and-min-height/)解释：

> 百分比高度 如果元素的高度设置为百分比，则它的父元素需要设置高度。换句话说，父元素的高度不能设置为自动。像 CSS 的许多方面一样，这起初有点令人困惑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T14:36:42.160

这是[你](http://jsfiddle.net/dLeHL/5/)想要达到的目标吗？

我改变了的宽度，`.sub-container`以便`%`像`.main-container`.

**CSS**标记：

```
html, body { 
    height:100% 
}
.main-container { 
    height:100%; 
    background:red; 
}
.sub-container { 
    height:100%; 
    width:75%; 
    margin:0 auto; 
    background:blue; 
} 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T14:45:38.513

您不需要设置`height`（`.main-container`默认情况下它将扩展到子容器的大小）。通过将高度设置为 100%，您将强制它成为屏幕的高度，仅此而已。所以只需将其更改为：

```
.main-container { background:red; } 
```

如果您需要主容器始终至少是屏幕的高度，请使用@Helstein 的建议，即在删除设置`min-height`时将其设置为 100% `height`。

# java - 为什么 FileWriter 不创建新文件？

> ID：10767117
> 
> 赞同：4
> 
> 时间：2012-05-26T14:34:45.500
> 
> 标签：java, tomcat, tomcat7, filewriter, printwriter

考虑以下代码：

```
 m_Writer = new PrintWriter(new FileWriter("LoginHistory.dat")); 
 m_Writer.println(Integer.toString(s_NumOfLogins)); 
 m_Writer.println(m_LoginHistoryStr);
 m_Writer.close(); 
```

有什么想法为什么我找不到任何名为 LoginHistory.dat 的文件？
谢谢

更新：我刚刚发现行后出现异常：

```
m_Writer = new PrintWriter(new FileWriter("LoginHistory.dat")); 
```

其细节是：
任何想法真正的问题是什么？

```
Listening for transport dt_shmem at address: tomcat_shared_memory_id
27/05/2012 15:52:17 org.apache.catalina.startup.HostConfig checkResources
INFO: Undeploying context [/SignInAndGetIp]
27/05/2012 15:52:17 org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor SignInAndGetIp.xml from C:\Users\user\.netbeans\7.1.2\apache-tomcat-7.0.22.0_base\conf\Catalina\localhost
27/05/2012 15:52:17 org.apache.catalina.util.LifecycleBase start
INFO: The start() method was called on component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/SignInAndGetIp]] after start() had already been called. The second call will be ignored.
java.io.FileNotFoundException: LoginHistory.dat (‏‏Access denied)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:179)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:70)
    at java.io.FileWriter.<init>(FileWriter.java:46)
    at signIn.SignInAndShowIPTableServlet.init(SignInAndShowIPTableServlet.java:60)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1228)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1147)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:836)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:135)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:304)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T13:16:24.737

很明显，您无权在尝试创建该文件的位置创建该文件，因此出现“访问被拒绝”消息。您需要找到一个允许您创建文件的目录。如果您不确定文件将在哪里创建，您可以使用[`File.getAbsolutePath()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#getAbsolutePath%28%29)或查看其完整路径[`File.getCanonicalPath()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#getCanonicalPath%28%29)。

# ruby-on-rails - 如何在 ruby 中动态添加 setter 方法，Rails 将其视为批量分配的属性？

> ID：10767121
> 
> 赞同：0
> 
> 时间：2012-05-26T14:35:20.903
> 
> 标签：ruby-on-rails, ruby

我有一个带有一些相关日期字段的模型。

```
def started_at_date=(value)
  @started_at_date = value
end

def completed_at_date=(value)
  @completed_at_date = value
end

... 
```

吸气剂是通过处理的`method_missing`，效果很好。

```
def method_missing(method, *args, &block)
  if method =~ /^local_(.+)$/
    local_time_for_event($1)
  elsif method =~ /^((.+)_at)_date$/
    self.send :date, $1
  elsif method =~ /^((.+)_at)_time$/
    self.send :time, $1
  else
    super
  end
end

def date(type)
  return self.instance_variable_get("@#{type.to_s}_date") if self.instance_variable_get("@#{type.to_s}_date")
  if self.send type.to_sym
    self.send(type.to_sym).in_time_zone(eventable.time_zone).to_date.to_s
  end
end

... 
```

我想动态添加设置器，但我不确定如何以避免`ActiveRecord::UnknownAttributeError`s.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:06:24.317

我认为这会起作用：

```
def method_missing(method, *args, &block)
  super unless method =~ /_date$/
  class_eval { attr_accessor method }
  super
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T14:44:09.490

你可以只使用虚拟属性吗？

```
Class Whatever < ApplicationModel

  attr_accessor :started_at_date
  attr_accessor :completed_at_date

  #if you want to include these attributes in mass-assignment
  attr_accessible :started_at_date
  attr_accessible :completed_at_date

end 
```

当您需要稍后访问属性而不是调用 @started_at_date 时，您将调用 self.started_at_date 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T15:14:22.963

如果我理解正确，请尝试：

```
 # in SomeModel
  def self.new_setter(setter_name, &block)
      define_method("#{setter_name}=", &block)
      attr_accessible setter_name
  end 
```

用法：

```
 SomeModel.new_setter(:blah) {|val| self.id = val }

 SomeModel.new(blah: 5) # => SomeModel's instance with id=5
 # or
 @sm = SomeModel.new
 @sm.blah = 5 
```

# javascript - 将内容插入 iframe javascript

> ID：10767124
> 
> 赞同：0
> 
> 时间：2012-05-26T14:35:46.717
> 
> 标签：javascript, jquery

我们如何将 1 个 iframe 的内容插入另一个 iframe。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:47:17.960

如果我正确理解了你的问题。像这样的东西。但是你应该在使用它之前优化这部分代码。

```
var oIFrame1 = document.getElementById("myframe1"),
    oIFrame2 = document.getElementById("myframe2");
var oDoc1 = (oIFrame1.contentWindow || oIFrame1.contentDocument);
if (oDoc1.document) oDoc1 = oDoc1.document;
var oDoc2 = (oIFrame2.contentWindow || oIFrame2.contentDocument);
if (oDoc2.document) oDoc2 = oDoc2.document;
oDoc1.body.innerHTML = oDoc2.body.innerHTML; 
```

# javascript - Ajax 成功：{return false;}

> ID：10767128
> 
> 赞同：5
> 
> 时间：2012-05-26T14:36:05.487
> 
> 标签：javascript, jquery, ajax

我想`false`从完成`$.ajax`时返回`success`：

```
$.ajax({
    url: '' + $website_url + 'queries/voorraad_berekenen.php',
    type: 'post',
    data: {
        aantal: $(this).parent('form').children('.quantity').val(),
        item_number_1: $(this).parent('form').children('.item_number_1').val()
    },
    success: function(result) {
        return false;
    }
}); 
```

这行不通。有解决办法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-26T14:50:53.793

从您的帖子中，我猜您调用了一个包含该函数的函数`$.ajax()`并尝试调用`return false`该函数。但你不能这样做，因为**AJAX**是异步的。

最好从 ajax 成功函数中调用一个函数，如下所示：

```
$.ajax({
    url: '' + $website_url + 'queries/voorraad_berekenen.php',
    type: 'post',
    data: {
        aantal: $(this).parent('form').children('.quantity').val(),
        item_number_1: $(this).parent('form').children('.item_number_1').val()
    },
    success: function(result) {
        var returned = true;
        if(some_condition_not_satisfied) {
          returned = false;
        } else {

        }
        // call a function
        calledFromAjaxSuccess(returned);
    }
});

function calledFromAjaxSuccess(result) {
  if(result) {
    alert('TRUE');
  } else {
    alert('FALSE');
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T14:44:44.420

也许您可以尝试这样的事情（值 1 和 0 应该更改为您使用的值）：

```
success: function(result){
if(result === '1'){
// do something
}
else
   return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-07T07:11:15.530

只需使用 asunc false 它可以正常工作我已经实现了

就试一试吧

```
$.ajax({
    url: '' + $website_url + 'queries/voorraad_berekenen.php',
    type: 'post',
    data: {
        aantal: $(this).parent('form').children('.quantity').val(),
        item_number_1: $(this).parent('form').children('.item_number_1').val()
    },
   async: false, //=>>>>>>>>>>> here >>>>>>>>>>>
    success: function(result) {
        return false;
    }
}); 
```

它工作正常尝试一次

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-26T07:14:58.133

```
<form action="yourpage" method="post" onsubmit="return matchpass();">
  <div>
   <label> Name</label>
   <input type="text" name="name" id="name">
  </div>
  <div>
   <label> Email ID</label>
   <input type="email" name="email" id="email">            
  </div>
  <div>
   <label> Mobile No</label>
   <input type="text" name="mob"  maxlength="10" onkeyup="check_if_exists();" autocomplete="off" id="mob">
  </div>                             
  <div>
   <button type="button" >Send</button>
  </div>
  <span id="err"></span>
  <div>
   <label> OTP</label>
   <input type="password" name="otp" id="otp"  maxlength="6" placeholder="****">
   <span id="err2"></span>
  </div>    
  <div>
   <input type="reset" value="Reset" class="reset-btn">
   <input type="submit" name="submit" id="submit" value="Submit" >              
  </div>
</form>
<input type="hidden"  id="otpcheck"/>

<script>
function matchpass()
{

     $.ajax({   
    type:"post",
    url: "yourpage",
    data:{ mobile:mob,otp:otp},
    success:function(data)
    {
       if(data==1)
       {
           document.getElementById("otpcheck").value=1; //important
       }else{

           document.getElementById("err2").style.color = "red";
           document.getElementById("err2").innerHTML = "invalid OTP Number ";
         document.getElementById("otpcheck").value=0; //important
       }

    }
    });

    if(document.getElementById("otpcheck").value==0){
        return false;
    }

} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-10-15T17:44:17.093

我面临这个问题。然后我找到了实际的解决方案。使用 async : false，在 ajax 调用中

```
function thisisavailavailusername(uname){
var dataString = 'username='+ uname.value;
var trueorfalse = false;
$.ajax({
    type: "post",
    url: "/BloodBook/checkavailableusername",
    data: dataString,
    cache: false,
    async : false, //user this then everything ok
    success: function(html){
        if(html=="true"){
            $('#validusername').html('Available');
            trueorfalse = true;
        }else{
            $('#validusername').html('Not Available');
            trueorfalse = false;
        }

    },
    error: function() {
        alert("Something Wrong...");
    }
});

return trueorfalse; 
```

}

# javascript - 为什么我不能使用 Array.join.call 代替 Array.prototype.join.call

> ID：10767129
> 
> 赞同：1
> 
> 时间：2012-05-26T14:36:06.317
> 
> 标签：javascript

```
function test()
{
alert(Array.join.call(arguments,'/')) //alerts /
alert(Array.prototype.join.call(arguments,'/')) //alerts Js/JScript
alert(Array.join(arguments,'/')) //alerts Js/JScript
}
test('Js','JScript'); 
```

为什么会有这种差异？为什么需要先引用原型？还有为什么即使 join 只需要一个分隔符参数， Array.join 也会给出所需的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T15:53:50.280

`Array.join`是一个全局函数。使用 call 时，作为第一个参数传递的是函数体内的**对象**，`this`然后是函数的参数。**`join``join`**

 **```
js> Array.join.call(null, [1, 2], "/")   
"1/2" 
```

`Array.prototype.join`是 的实例`Array`。因此，它期望`this`是实际的数组，这就是您的第二个示例有效的原因。`Array.prototype.join`您的第二个示例相当于调用`this`对象存在`arguments`，即是`arguments.join("/")`。有关说明，请参阅[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T15:49:06.337

这是必要的，因为 Arguments 数组[实际上并不是真正的 Array 对象。](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments). 规范将其称为“类数组”，但它不包含任何通常与 JavaScript 数组相关的方法，例如`join`.

因此，上面的代码所做的是直接调用 Array 方法，使用`call`，并将 Arguments 对象作为方法的范围传递。

本质上，它导致解释器将 Arguments 数组视为真正的数组，以便可以在其上执行这些方法。**

# javascript - 剑道 UI 组合框打破淘汰赛绑定

> ID：10767130
> 
> 赞同：0
> 
> 时间：2012-05-26T14:36:18.977
> 
> 标签：javascript, knockout.js, kendo-ui

我有以下 HTML 行，可以正常工作。

```
<select style="margin-left: 20px" id="agencies" data-bind="options:agencies, value: selectedAgency, optionsText:'name'"> </select> 
```

当我像这样启用 Kendo UI 组合框时，我会丢失组合框中的所有条目：

```
 $("#agencies").kendoComboBox(); 
```

有谁知道我该如何解决这个问题？

TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:28:54.690

查看Ryan Niemeyer 的[这个库](http://rniemeyer.github.com/knockout-kendo/)，它为 Kendo UI 小部件提供了 Knockout.js 绑定。

# c++ - 期待来自另一个线程的 googlemock 调用

> ID：10767131
> 
> 赞同：13
> 
> 时间：2012-05-26T14:36:30.667
> 
> 标签：c++, mocking, googlemock

使用谷歌模拟对象编写（谷歌）测试用例并期望从测试中的类控制的另一个线程调用 EXPECT_CALL() 定义的最佳方法是什么？在触发调用序列后简单地调用 sleep() 或类似方法并不合适，因为它可能会减慢不必要的测试并且可能不会真正达到计时条件。但是以某种方式完成测试用例必须等到模拟方法被调用。任何人的想法？

下面是一些代码来说明这种情况：

Bar.hpp（被测类）

```
class Bar
{
public:

Bar(IFooInterface* argFooInterface);
virtual ~Bar();

void triggerDoSomething();
void start();
void stop();

private:
void* barThreadMethod(void* userArgs);
void endThread();
void doSomething();

ClassMethodThread<Bar> thread; // A simple class method thread implementation using boost::thread
IFooInterface* fooInterface;
boost::interprocess::interprocess_semaphore semActionTrigger;
boost::interprocess::interprocess_semaphore semEndThread;
bool stopped;
bool endThreadRequested;
}; 
```

Bar.cpp（摘录）：

```
void Bar::triggerDoSomething()
{
    semActionTrigger.post();
}

void* Bar::barThreadMethod(void* userArgs)
{
    (void)userArgs;
    stopped = false;
    do
    {
        semActionTrigger.wait();
        if(!endThreadRequested && !semActionTrigger.try_wait())
        {
            doSomething();
        }
    } while(!endThreadRequested && !semEndThread.try_wait());
    stopped = true;
    return NULL;
}

void Bar::doSomething()
{
    if(fooInterface)
    {
        fooInterface->func1();
        if(fooInterface->func2() > 0)
        {
            return;
        }
        fooInterface->func3(5);
    }
} 
```

测试代码（摘录，到目前为止 FooInterfaceMock 的定义没有什么特别之处）：

```
class BarTest : public ::testing::Test
{
public:

    BarTest()
    : fooInterfaceMock()
    , bar(&fooInterfaceMock)
    {
    }

protected:
    FooInterfaceMock fooInterfaceMock;
    Bar bar;
};

TEST_F(BarTest, DoSomethingWhenFunc2Gt0)
{
    EXPECT_CALL(fooInterfaceMock,func1())
        .Times(1);
    EXPECT_CALL(fooInterfaceMock,func2())
        .Times(1)
        .WillOnce(Return(1));

    bar.start();
    bar.triggerDoSomething();
    //sleep(1);
    bar.stop();
} 
```

没有 sleep() 的测试结果：

```
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from BarTest
[ RUN      ] BarTest.DoSomethingWhenFunc2Gt0
../test/BarTest.cpp:39: Failure
Actual function call count doesn't match EXPECT_CALL(fooInterfaceMock, func2())...
         Expected: to be called once
           Actual: never called - unsatisfied and active
../test/BarTest.cpp:37: Failure
Actual function call count doesn't match EXPECT_CALL(fooInterfaceMock, func1())...
         Expected: to be called once
           Actual: never called - unsatisfied and active
[  FAILED  ] BarTest.DoSomethingWhenFunc2Gt0 (1 ms)
[----------] 1 test from BarTest (1 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (1 ms total)
[  PASSED  ] 0 tests.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] BarTest.DoSomethingWhenFunc2Gt0

 1 FAILED TEST
terminate called after throwing an instance of         'boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::lock_error> >'
Aborted 
```

启用 sleep() 的测试结果：

```
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from BarTest
[ RUN      ] BarTest.DoSomethingWhenFunc2Gt0
[       OK ] BarTest.DoSomethingWhenFunc2Gt0 (1000 ms)
[----------] 1 test from BarTest (1000 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (1000 ms total)
[  PASSED  ] 1 test. 
```

我想避免 sleep()，最好的情况是根本不需要更改 Bar 类。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-28T10:36:31.083

弗雷泽的回答启发了我使用 GMock 专用动作的简单解决方案。GMock 使得快速编写此类动作变得非常容易。

这是代码（摘自 BarTest.cpp）：

```
// Specialize an action that synchronizes with the calling thread
ACTION_P2(ReturnFromAsyncCall,RetVal,SemDone)
{
    SemDone->post();
    return RetVal;
}

TEST_F(BarTest, DoSomethingWhenFunc2Gt0)
{
    boost::interprocess::interprocess_semaphore semDone(0);
    EXPECT_CALL(fooInterfaceMock,func1())
        .Times(1);
    EXPECT_CALL(fooInterfaceMock,func2())
        .Times(1)
        // Note that the return type doesn't need to be explicitly specialized
        .WillOnce(ReturnFromAsyncCall(1,&semDone));

    bar.start();
    bar.triggerDoSomething();
    boost::posix_time::ptime until = boost::posix_time::second_clock::universal_time() +
            boost::posix_time::seconds(1);
    EXPECT_TRUE(semDone.timed_wait(until));
    bar.stop();
}

TEST_F(BarTest, DoSomethingWhenFunc2Eq0)
{
    boost::interprocess::interprocess_semaphore semDone(0);
    EXPECT_CALL(fooInterfaceMock,func1())
        .Times(1);
    EXPECT_CALL(fooInterfaceMock,func2())
        .Times(1)
        .WillOnce(Return(0));
    EXPECT_CALL(fooInterfaceMock,func3(Eq(5)))
        .Times(1)
        // Note that the return type doesn't need to be explicitly specialized
        .WillOnce(ReturnFromAsyncCall(true,&semDone));

    bar.start();
    bar.triggerDoSomething();
    boost::posix_time::ptime until = boost::posix_time::second_clock::universal_time() +
            boost::posix_time::seconds(1);
    EXPECT_TRUE(semDone.timed_wait(until));
    bar.stop();
} 
```

请注意，相同的原则对于任何其他类型的信号量实现都适用，如`boost::interprocess::interprocess_semaphore`. 我用它来测试我们的生产代码，这些代码使用它自己的操作系统抽象层和信号量实现。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-27T19:23:22.773

使用 lambdas，您可以执行以下操作（我已在评论中添加了 boost 等价物）：

```
TEST_F(BarTest, DoSomethingWhenFunc2Gt0)
{
    std::mutex mutex;                  // boost::mutex mutex;
    std::condition_variable cond_var;  // boost::condition_variable cond_var;
    bool done(false);

    EXPECT_CALL(fooInterfaceMock, func1())
        .Times(1);
    EXPECT_CALL(fooInterfaceMock, func2())
        .Times(1)
        .WillOnce(testing::Invoke([&]()->int {
            std::lock_guard<std::mutex> lock(mutex);  // boost::mutex::scoped_lock lock(mutex);
            done = true;
            cond_var.notify_one();
            return 1; }));

    bar.start();
    bar.triggerDoSomething();
    {
      std::unique_lock<std::mutex> lock(mutex);               // boost::mutex::scoped_lock lock(mutex);
      EXPECT_TRUE(cond_var.wait_for(lock,                     // cond_var.timed_wait
                                    std::chrono::seconds(1),  // boost::posix_time::seconds(1),
                                    [&done] { return done; }));
    }
    bar.stop();
} 
```

如果你不能使用 lambdas，我想你可以[`boost::bind`](http://www.boost.org/doc/libs/release/libs/bind/bind.html)改用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-07-09T11:26:55.230

所以我喜欢这些解决方案，但我认为通过 promise 可能会更容易，我不得不等待我的测试启动：

```
std::promise<void> started;
EXPECT_CALL(mock, start_test())
    .Times(1)
    .WillOnce(testing::Invoke([&started]() {
        started.set_value();
    }));
system_->start();
EXPECT_EQ(std::future_status::ready, started.get_future().wait_for(std::chrono::seconds(3))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-27T14:30:51.577

弗雷泽的回答也启发了我。我使用了他的建议，它奏效了，但后来我找到了另一种没有条件变量的方法来完成同样的任务。您需要添加一个方法来检查某些条件，并且您需要一个无限循环。这也假设您有一个单独的线程来更新条件。

```
TEST_F(BarTest, DoSomethingWhenFunc2Gt0)
{
    EXPECT_CALL(fooInterfaceMock,func1()).Times(1);
    EXPECT_CALL(fooInterfaceMock,func2()).Times(1).WillOnce(Return(1));

    bar.start();
    bar.triggerDoSomething();

    // How long of a wait is too long?
    auto now = chrono::system_clock::now();
    auto tooLong = now + std::chrono::milliseconds(50); 

    /* Expect your thread to update this condition, so execution will continue
     * as soon as the condition is updated and you won't have to sleep
     * for the remainder of the time
     */
    while (!bar.condition() && (now = chrono::system_clock::now()) < tooLong) 
    {
        /* Not necessary in all cases, but some compilers may optimize out
         * the while loop if there's no loop body.
         */
        this_thread::sleep_for(chrono::milliseconds(1));
    }

    // If the assertion fails, then time ran out.  
    ASSERT_LT(now, tooLong);

    bar.stop();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-31T15:33:33.217

在 πάντα ῥεῖ 解决方案提出后，我设法解决了这个问题，但使用了 std::condition_variable。该解决方案与 Fraser 提出的方案有些不同，也可以使用 lambdas 进行改进。

```
ACTION_P(ReturnFromAsyncCall, cv)
{
    cv->notify_all();
}

...

TEST_F(..,..)
{

   std::condition_variable cv;
   ...
   EXPECT_CALL(...).WillRepeatedly(ReturnFromAsyncCall(&cv));

   std::mutex mx;
   std::unique_lock<std::mutex> lock(mx);
   cv.wait_for(lock, std::chrono::seconds(1));

 } 
```

似乎互斥锁只是为了满足条件变量。

# objective-c - 使用 AVPlayer 播放 .pls 播放列表

> ID：10767137
> 
> 赞同：0
> 
> 时间：2012-05-26T14:37:16.280
> 
> 标签：objective-c, ios, audio, playlist

我正在尝试在 iOS 设备上播放 .pls 音频流，但它似乎不起作用，这就是我目前正在做的；

```
@synthesize player;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.player = [AVPlayer playerWithURL:[NSURL URLWithString:@"mypls.pls"]];   

}
- (IBAction)pushStart:(id)sender {
        [player play];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T13:24:46.413

当您使用 .pls 流时，您实际上只需打开一个带有 IP 到流的播放列表。您必须在代码中使用此 IP 而不是 .pls 文件，因此不是链接到 .pls 文件，而是链接到 URL 字段中的流。

# jquery - $ 未定义但加载 jQuery 两次修复它

> ID：10767138
> 
> 赞同：0
> 
> 时间：2012-05-26T14:37:21.730
> 
> 标签：jquery

我有一个 jQuery 预加载器，它加载到我的 html 文件中：

```
<script type="text/javascript">
        jQuery.noConflict()(function($){
            $(".view").preloader();
            $(".flexslider").preloader();
            });
</script> 
```

我的 jquery.preloader.js

```
// JavaScript Document
$.fn.preloader = function(options){

    var defaults = {
                     delay:200,
                     preload_parent:"a",
                     check_timer:300,
                     ondone:function(){ },
                     oneachload:function(image){  },
                     fadein:500 
                    };

    // variables declaration and precaching images and parent container
     var options = $.extend(defaults, options),
     root = $(this) , images = root.find("img").css({"visibility":"hidden",opacity:0}) ,  timer ,  counter = 0, i=0 , checkFlag = [] , delaySum = options.delay ,

     init = function(){

        timer = setInterval(function(){

            if(counter>=checkFlag.length)
            {
            clearInterval(timer);
            options.ondone();
            return;
            }

            for(i=0;i<images.length;i++)
            {
                if(images[i].complete==true)
                {
                    if(checkFlag[i]==false)
                    {
                        checkFlag[i] = true;
                        options.oneachload(images[i]);
                        counter++;

                        delaySum = delaySum + options.delay;
                    }

                    $(images[i]).css("visibility","visible").delay(delaySum).animate({opacity:1},options.fadein,
                    function(){ $(this).parent().removeClass("preloader");   });

                }
            }

            },options.check_timer) 

         } ;

    images.each(function(){

        if($(this).parent(options.preload_parent).length==0)
        $(this).wrap("<a class='preloader' />");
        else
        $(this).parent().addClass("preloader");

        checkFlag[i++] = false;

        }); 
    images = $.makeArray(images); 

    var icon = jQuery("<img />",{

        id : 'loadingicon' ,
        src : '/assets/images/front/spinner.gif'

        }).hide().appendTo("body");

    timer = setInterval(function(){

        if(icon[0].complete==true)
        {
            clearInterval(timer);
            init();
             icon.remove();
            return;
        }

        },100);

    } 
```

但是当我运行它时，我得到一个“$ 未定义”并指向这一行：

```
var options = $.extend(defaults, options), 
```

但奇怪的是——如果我在我的 html 文件中加载 jQuery 1.7.2 TWICE——错误就会消失，一切都按预期工作（包括预加载器）。

**问题：**我该如何解决这个问题，所以我不需要加载 jQuery 两次来完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T14:41:58.260

preloader.js 应该在一个就绪块中。

```
(function($) {
    $.fn.preloader = function(options) {
        // your code here.
    }
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T14:42:21.773

您正在执行该`noConflict`指令，这会使 jQuery 重新绑定`$`到其原始值（通常是`undefined`）。删除`.noConflict()`. 或者，重写`$.extend`为`jQuery.extend`（在无冲突模式之外，`$`只是 的简写同义词`jQuery`）、`$(this)`into`jQuery(this)`等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T15:42:56.287

你有几个问题：

1.  在引用其中的元素之前，您必须等待 DOM 准备好。如果您提供的代码不在正文标记的末尾，那么您需要将您的代码放在一个`document.ready`块中。

2.  当你使用时`jQuery.noConflict()`，你可以不再使用`$`来引用`jQuery`。您必须改为使用符号`jQuery`。

3.  如果您想`$`再次使用，您可以传入`jQuery`一个自执行功能块，该功能块将分配`jQuery`给`$`功能块内的符号，这将允许您在那里使用它，但不会干扰任何其他代码。

这就是我的建议：

```
<script type="text/javascript">
    jQuery.noConflict();
    (function($){
        // you can now use $ here as a reference to jQuery 
        // again inside this function
        $(document).ready(function() {
            $(".view").preloader();
            $(".flexslider").preloader();
        });
    })(jQuery);
</script> 
```

# css - 仅在歌剧中的 CSS 悬停问题

> ID：10767140
> 
> 赞同：1
> 
> 时间：2012-05-26T14:37:43.517
> 
> 标签：css, opera

我有这个[网站](http://webofdreams.ro) ，它呈现正常，即使在 IE 中也是如此。然而，在 Opera 11.62 中，每当我将鼠标悬停在导航栏的链接上时，都会出现一个非常奇怪的错误。为什么会这样？这很烦人。还有一件非常奇怪的事情正在发生，如果我调整浏览器窗口的大小，使最后一个链接不在页面之外，而不仅仅是最后一个链接在悬停时显示正常，但其他 2 个仍然损坏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T14:48:54.223

将这行代码添加到`a:hover`

```
height: 100%; 
```

所以你得到：

```
a:hover { 
  background: -o-linear-gradient(top, #93C9ED 0px, #76B4E1 100%) transparent;
  border-bottom: medium none currentColor;
  border-left: 1px solid #1C5E9C;
  border-right: 1px solid #1C5E9C;
  border-top: 1px solid #1C5E9C;
  color: #275D8B;
  height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T14:53:11.553

向锚标记添加高度，与您的行高相同：

```
header nav ul li a { height:2.5em; } 
```

这适用于我，在 Opera 11.64 中。我看到你已经尝试过这个解决方案，但我猜你没有让它工作的原因是因为 line-height 是 2.5em，而不是 2.8（除非你改变了它）。

# php - 运行 PHP 脚本会出现 500 内部服务器错误

> ID：10767142
> 
> 赞同：0
> 
> 时间：2012-05-26T14:37:58.577
> 
> 标签：php, html, cpanel

最近我用 centOS 在我的 vps 上安装了 cPanel。现在我的 PHP 文件返回 500 Internal Server 错误。但是 HTML 文件可以正常工作。当我尝试输入 php 文件时总是显示 500 Internal server error ...

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T14:47:20.143

最有可能是您对文件夹或文件的权限错误。

PHP 文件通常必须将权限设置为 644，并将其包含的文件夹设置为 755。

如果您想确保权限正确，您可以使用“快速而肮脏的解决方案”将所有内容设置为 777（当然出于安全原因立即撤消更改）。

此外，问题可能隐藏在 .htaccess 文件中，如此处所述 [http://www.2mhost.com/kb/view/147](http://www.2mhost.com/kb/view/147)

甚至在此处报告的 php.ini 中： [https ://www.akeebabackup.com/documentation/troubleshooter/prbasicts.html](https://www.akeebabackup.com/documentation/troubleshooter/prbasicts.html)

希望这可以帮助

# java - 我无法从头开始在 IntelliJIDEA 上创建 libgdx 应用程序。项目在 Eclipse 上运行

> ID：10767143
> 
> 赞同：2
> 
> 时间：2012-05-26T14:38:09.777
> 
> 标签：java, intellij-idea, libgdx

我已经重写了消息：我将一个适用于 Windows 的 Java SE Eclipse 项目转移到了 IntelliJ IDEA。（它使用swing和awt）然后我尝试从Eclipse中移动libgdx项目。它在 Eclipse 中工作正常。我试图将这个项目移动到同一台机器上的 IntelliJIDEA。那里编译没问题。但我有运行时错误：

```
 ...D:\Program Files\Java\jdk1.7.0_04\bin\java" -Didea.launcher.port=7534... 
  Exception in thread "main" com.badlogic.gdx.utils.GdxRuntimeException: 
  Creating window failed at com.badlogic.gdx.backends.jogl.JoglApplication.... 
```

稍后补充：好消息！我不是从头开始创建新项目，而是作为 Eclipse 项目创建的。一切正常。但是如何从头开始创建呢？我使用了以下链接： [http](http://www.scottisheyes.com/using-je...0-libgdx-andro) ://www.scottisheyes.com/using-je...0-libgdx-andro http://code.google.com/p/libgdx/wiki/IntelliJIDEALibgdx

不同的错误。最后一个错误如下。我创建了 myGame\Desktop\src\my_package\DesktopLauncher、myGame\Main\src\my_package\HelloLibGDX。错误，未找到 HelloLibGDX 类。

请查看下面的打印屏幕图片链接。（不可能把它们放在这里）

# parallel-processing - Erlang 虚拟机映射到哪个内核线程？

> ID：10767145
> 
> 赞同：2
> 
> 时间：2012-05-26T14:38:31.363
> 
> 标签：parallel-processing, erlang

在多核系统中，有多个调度器来调度 Erlang 进程。一个调度器映射到一个 CPU。我的疑问是：Erlang 虚拟机也是运行在某个内核线程上的进程。那么它映射到哪个 CPU 呢？或者它根据可用性共享所有 CPU。（OS根据可用性提供CPU时间）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T16:27:37.013

Erlang 虚拟机作为单个操作系统进程运行。在该进程中，它运行多个线程，每个调度程序一个（可能还有用于异步 I/O 等的附加线程）。默认情况下，每个 CPU 内核都有一个调度程序线程。

Erlang 进程（“绿色线程”）由调度线程执行，调度线程在它们之间进行负载平衡，因此单个操作系统中可能有 4 个调度线程（在四核机器上）执行十万个 Erlang 进程过程。通常，操作系统会将调度程序线程映射到物理内核，但另请参阅[Erlang 进程如何映射到内核线程？](https://stackoverflow.com/questions/605183/how-if-at-all-do-erlang-processes-map-to-kernel-threads).

# php - Solr 4.0 的 PHP 库/客户端

> ID：10767147
> 
> 赞同：3
> 
> 时间：2012-05-26T14:38:35.793
> 
> 标签：php, solr, solrj

我想将我的 Solr 引擎从 3.5 升级到 4.0。但是我用于 solr 的旧[php 库](http://php.net/manual/en/book.solr.php)似乎不能很好地处理 Solr 4.0 提交。前[waitFlush 问题](http://code.google.com/p/solr-php-client/issues/detail?id=75)。

是否有一个库/客户端可以很好地支持新的 Solr 4.0 构造。或者我应该使用一些 Java 客户端等来处理提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:27:01.307

根据[这个错误线程](https://bugs.php.net/bug.php?id=62332)，这个 PECL 扩展有[一个非官方的分支](https://github.com/ecaron/php-pecl-solr)可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T22:28:18.253

解决此问题的另一种方法。只需创建自己的提交函数。像这样的东西：

```
 $solrConfig= // array with solr host, port, path to collection (/solr/my_collection), 
    $solrAddress = $solrConfig['hostname'] . ':' . $solrConfig['port'] . $solrConfig['path'];
    $output = array();
    $response = exec('curl ' . $solrAddress . '/update?commit=true', $output); 
```

它不必是 exec() - 而是发送[php curl](http://php.net/curl)或者您可以尝试使用 php solr_client 的 send_raw_get 但最后一个只是猜测。exec() 对我来说很好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-20T18:43:12.920

**更新：** PECL Solr 支持 Solr Server 4.0+，从 2.0 版开始

[https://pecl.php.net/package-changelog.php?package=solr](https://pecl.php.net/package-changelog.php?package=solr)

# python - 从第一个标签中获取一个简单的字符串

> ID：10767152
> 
> 赞同：1
> 
> 时间：2012-05-26T14:39:06.230
> 
> 标签：python, beautifulsoup

老实说，我觉得`BeautifulSoup`太难了，文档没有解释我正在寻找的基础知识。

我正在尝试在具有属性的标签内返回字符串：

```
<span class="on">6220</span> 
```

但是运行这个：

```
def fetch_online():
    users = page('span', {'class' : 'on'})
    return str(users) 
```

给我`[<span class="on">6220</span>]`。所以我认为我做错了，从标签中获取简单字符串的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T02:34:16.717

确实，BeautifulSoup 并不那么容易理解，但它有时会非常有用；）

因此，重新以 FlopCoder 为例并对其进行更多解释：

```
html = # HTML Code #maybe parsed from a website
soup = BeautifulSoup(html) #you create a soup object with your html code
x = soup.find('span', {'class' : 'on'}) #Search for the first span balise in the code, whith class : on
print x.text #Find the found balise, .text mean only the text inside the <>text</> 
```

如果您有不止一个需要找到您需要做的事情：

```
x = soup.findAll('span', {'class' : 'on'})
for span in x:
    print span.text 
```

最后一个示例使用 findAll。它使用代码中的 Class:On 创建一个包含所有跨度应答器的列表。那么你可以运行一个for。

your_object.text --> 返回文本

your_object.a --> 返回链接（等等...）

希望它可以帮助一点点！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T14:59:04.060

你可以这样做：

```
html = # your HTML source goes here
soup = BeautifulSoup(html)
x = soup.find('span', {'class' : 'on'})
print x.text
print x.string
print x.contents[0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T14:59:20.310

代替

```
return str(users) 
```

和

```
return users[0].string 
```

或者

```
return users[0].contents 
```

`page('span ...`call 实际上是调用函数的简写符号，`find_all()`它返回一个列表。所以你首先索引到那个列表，获取标签，然后获取它的`contents`. 在其上运行 Python`str()`函数将为您提供全部内容 - 您需要 BeautifulSoup 函数来获取标签的字符串。

# c - 在python中加载c dll

> ID：10767154
> 
> 赞同：1
> 
> 时间：2012-05-26T14:39:50.037
> 
> 标签：c, python-2.7

> **可能重复：**
> [Python 导入 dll](https://stackoverflow.com/questions/5253854/python-import-dll)

我正在尝试加载位于我的 .py 脚本所在路径的 ac dll，但我仍然无法加载 dll。

```
module = PyImport_ImportModule("<module-name.dll>"); 
```

任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:20:03.103

您必须调用下面的行来在路径中设置您的当前目录，这是因为默认情况下，当前目录不在搜索路径中：

```
PySys_SetPath("."); 
mymod = PyImport_ImportModule("your_DLL_name or Py_module_name"); 
```

完成上述代码后，将加载 C DLL 或 Python 模块。

# ruby-on-rails - 管理“删除”链接的 Rspec 测试失败。Michael Hartl 的 ROR 3.2 教程 - 第 9.4.2 章

> ID：10767157
> 
> 赞同：6
> 
> 时间：2012-05-26T14:40:22.627
> 
> 标签：ruby-on-rails, rspec, capybara, railstutorial.org

我正在关注迈克尔的 ROR 教程并创建用户身份验证系统。有一个管理员权限，允许用户删除其他用户。以特权管理员用户身份登录时，用户列表页面上会出现特殊的“删除”链接。我的应用程序运行良好，但 rspec 测试因我不知道的原因而失败。

我已经将测试分离到另一个文件中`spec/requests/sat_spec.rb`，我正在尝试使用 pry gem 来调试它，但到目前为止还没有成功。

```
describe "delete links" do
  describe "as admin user" do
    let(:admin) { FactoryGirl.create(:admin) }
    before do
      sign_in admin
      visit users_path
      binding.pry          
    end
  it { should have_link('delete', href: user_path(User.first)) }

  it "should be able to delete another user" do
    expect { click_link('delete') }.to change(User, :count).by(-1)
  end    
end 
```

测试失败：

```
1) separated admin tests delete links as admin user 
 Failure/Error: it { should have_link('delete', href: user_path(User.first)) }
   expected link "delete" to return something
 # ./spec/requests/sat_spec.rb:25:in `block (4 levels) in <top (required)>'

2) separated admin tests delete links as admin user should be able to delete another user
 Failure/Error: expect { click_link('delete') }.to change(User, :count).by(-1)
 Capybara::ElementNotFound:
   no link with title, id or text 'delete' found
 # (eval):2:in `click_link'
 # ./spec/requests/sat_spec.rb:28:in `block (5 levels) in <top (required)>'
 # ./spec/requests/sat_spec.rb:28:in `block (4 levels) in <top (required)>' 
```

这里的问题可能是什么，或者**更重要的是如何调试它？**

你可以在这里分叉我的代码[https://github.com/tomek-rusilko/miniatury_katalog_2](https://github.com/tomek-rusilko/miniatury_katalog_2)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-26T15:39:45.823

您希望您的`/users`页面包含旁边带有“删除”链接的用户列表。但是您没有用简单的用户填充您的 TEST 数据库。它只包含一个用户，即管理员。但根据您的`users/_user.html.erb`这种类型的用户没有“删除”链接。因此，添加至少一个用户创建语句并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T15:36:37.027

```
let(:admin) { FactoryGirl.create(:admin) } 
```

这很好，因为你有（在 spec/factories.rb 中）

```
factory :admin do
  admin true
end 
```

但与此同时，在 models/user.rb 中：

```
attr_accessible :name, :email, :password, :password_confirmation 
```

我敢打赌，工厂女孩正在使用批量分配来设置：admin => true，然后被 attr_accessible 删除。

但更重要的是，你如何调试它？通过询问“发生了什么？” 和“我期望会发生什么？” 及其变化，直到你发现两个问题的答案在中间相遇。在这种情况下，我首先要提出的问题是：是什么导致了链接显示？我在规范中设置的模型是这样吗？规范是否达到了我期望的页面？当我用浏览器点击页面时，模型的行为是否与规范中的一样？

但所有这些都只是“发生了什么？”的变体。和“我期望会发生什么？”

# javascript - 如何在.html（）jqueryajax中动态重复行

> ID：10767158
> 
> 赞同：0
> 
> 时间：2012-05-26T14:40:41.507
> 
> 标签：javascript, jquery, for-loop

在下面的代码中，我有一个表，其中包含来自数据库的值。执行查询后，如果我有 5 个值，我只获得表中的第一个值（在弹出窗口中）。在这个 html() 函数中，我如何添加 foreach以及每个参数的类型，我使用了 ajax、json、jquery

我的代码是；

```
success: function (msg) {
    var data = $.parseJSON(JSON.stringify(eval("(" + msg.d + ")")));

    $('<div></div>')
        .appendTo('body')
        .html('<div><b>SHAREHOLDER DETAILS</b></br>' + data.Id + '</div>' + 
              '<div>' + data.name + '</div>' + 
              '<div>' + data.Id + '</div>' + 
              '<table border="1" style="background-color:silver;"><tr>' + 
              '<td>' + 'OwnedBy' + '</td>' + 
              '<td>' + 'ShareClass' + '</td>' + 
              '<td>' + 'EffectiveInterest' + '</td>' + 
              '<td>' + 'DeemedInterest' +'</td>' + 
              '<td>' + 'SharesOwned' + '</td>' + 
              '<td>' + 'SharesIssued' + '</td>' + 
              '</tr>' + 
              '<tr>' + 
              '<td>' + data.Id +'</td>' + 
              '<td>' + data.share + '</td>' + 
              '<td>' + data.effect + '</td>' + 
              '<td>' + data.deemed + '</td>' + 
              '<td>' + data.owned + '</td>' + 
              '<td>' + data.issued + '</td>' + 
              '</tr>' + 
              '</table>')
        .dialog({
            modal: true, 
            title: '<div>' + data.Id + '</div>', 
            zIndex: 10000, 
            autoOpen: true, 
            position: ['right', 'top'],
            width: 'auto', 
            height: 'auto', 
            modal: false, 
            resizable: false, 
            closeOnEscape: false,
            show: "slide", 
            hide: "explode",
            close: function (event, ui) {
                $(this).remove();
            }
        });
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T14:57:18.597

您需要某种迭代器函数，因为您拥有它，代码只会提取第一个值。

我的建议是使用 .each：

```
var element = $('<table></table>').appendTo('body');
jQuery.each(data, function(i, val) {
    element.append(
        '<tr>' +
        '<td>' + val.Id +'</td>' + 
        '<td>' + val.share + '</td>' + 
        '<td>' + val.effect + '</td>' + 
        '<td>' + val.deemed + '</td>' + 
        '<td>' + val.owned + '</td>' + 
        '<td>' + val.issued + '</td>';
        '</tr>';
    );
 }); 
```

没有测试它只是因为我没有数据字符串，但希望这能让你接近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T15:37:29.117

我不知道您为自己解决这个问题付出了多少努力，但为了公平起见，我将稍微解释一下思考过程。您需要考虑的是概念化并将“行”与“一般实体”分开，例如，“我有一个包含数据行的表”。

循环本身在创建行时运行，并且必须作为创建`table`自身的单独操作执行。即使您将循环逻辑嵌入到`table`构造本身中（就标记生成本身而言，我认为这是不好的做法），您仍然必须将每一行视为循环运行的结果，与`table`,`thead`和`tbody`. 请注意，即使使用行 ( `tr`)，行 ( ) 中的每个单元格中都有另一个（*潜在*的）循环要求`td`。在这种情况下，您不需要该级别的循环，但这指向概念化循环设计和利用的基本原理。

这是一个使用 jQuery 元素缓存和[`jQuery.each()`](http://api.jquery.com/jQuery.each/)循环的方法，它是一种`foreach`循环。注意，在 Javascript 中没有专门的`foreach`循环；但是，有`for(var i in object)`，它允许您迭代此类对象。

```
$(document).ready(function(){
    var $table = $('<table>'),
        $tbody = $('<tbody>'),
        $thead = $('<thead>' +
                   '<tr>' +
                   '<th>OwnedBy</th>' +
                   '<th>ShareClass</th>' +
                   '<th>EffectiveInterest</th>' +
                   '<th>DeemedInterest</th>' +
                   '<th>SharesOwned</th>' +
                   '<th>SharesIssued</th>' +
                   '</tr>' +
                   '</thead>'),
        $tr = $('<tr>'),
        data = {
            grp1: {
                Id: 'id1',
                share: 'share',
                deemed: 'deemed',
                effect: 'effect',
                owned: 'owned',
                issued: 'issued'
            },
            grp2: {
                Id: 'id2',
                share: 'share',
                deemed: 'deemed',
                effect: 'effect',
                owned: 'owned',
                issued: 'issued'
            },
            grp3: {
                Id: 'id3',
                share: 'share',
                deemed: 'deemed',
                effect: 'effect',
                owned: 'owned',
                issued: 'issued'
            }
        };

    $table
        .append($thead, $tbody)
        .appendTo(document.body);

    jQuery.each(data, function(i, val) {
        $tr.clone()
            .appendTo($tbody)
            .append(
                '<td>' + val.Id +'</td>' +
                '<td>' + val.share + '</td>' +
                '<td>' + val.effect + '</td>' +
                '<td>' + val.deemed + '</td>' +
                '<td>' + val.owned + '</td>' +
                '<td>' + val.issued + '</td>'
            );
    });
}); 
```

[http://jsfiddle.net/YFwTe/](http://jsfiddle.net/YFwTe/)

# d3.js - 将服务器发送的事件与 cubism.js 图一起使用

> ID：10767162
> 
> 赞同：8
> 
> 时间：2012-05-26T14:41:16.030
> 
> 标签：d3.js, cubism.js

可以用从[服务器发送的事件](http://www.html5rocks.com/en/tutorials/eventsource/basics/)接收的数据填充[cubism.js](http://square.github.com/cubism/)图表吗？如果是这样，这是否容易实现？

谢谢，

/大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T17:16:16.373

据我所知，Cubism 想要进行投票——而且似乎完全*围绕*投票进行设计，而不是事件驱动的推送。自定义指标只是为了获取上下文决定它想要的数据，所以你真的必须编写一个自定义**上下文**，设计有服务器发送的事件和长轮询/_changes 提要架构之类的东西。

或者！

为什么不编写一个伪造的自定义指标呢？基本上，提供一个围绕**缓冲区**`context.metric`关闭的请求函数。当你得到事件时，把它们放在缓冲区中。然后，当 Cubism 的上下文开始轮询您的指标获取功能时（您可以设置较低的，因为现在它实际上不会增加​​网络流量），您可以立即将缓冲区移出。**`clientDelay`**

# python - Python Pandas GroupBy 相当于 SQL 中的 If A 而不是 B where 子句

> ID：10767163
> 
> 赞同：1
> 
> 时间：2012-05-26T14:41:22.083
> 
> 标签：python, sql, group-by, pandas

我正在使用`pandas` `groupby`并且想知道如何实现以下功能：

1.  数据框 A 和 B 具有相同的索引变量，但 A 有 20 个唯一索引值，B 有 5 个。

2.  我想创建一个数据框 C，其中包含索引存在于 A 而不是 B 中的行。

3.  假设 B 中的 5 个唯一索引值都存在于 A 中。在这种情况下，C 将只有那些与 A 中的索引值相关联的行，而不是 B 中的那些行（即 15）。

4.  使用内部、外部、左侧和右侧不要这样做（除非我误读了某些内容）。

在 SQL 中，我可能会这样做`where A.index <> (not equal) B.index`

**我的左撇子解决方案：**

a) 从每个数据集中获取相应的索引列，比如 x 和 y。

默认匹配（x，y，compareCol）：

```
"""

x and y are series

compare col is the name to the series being returned .

It is the same name as the name of x and y in their respective dataframes"""

x = x.unique()

y = y.unique()

""" Need to compare arrays x.unique() returns arrays"""

new = []

for item in (x):

    if item not in y:

        new.append(item)

returnADataFrame = pa.DataFrame(pa.Series(new, name = compareCol))

return returnADataFrame 
```

b) 现在在数据集 A 上对此进行左连接。

我有理由相信，我的元素比较就像一只没有动力的杂草上的乌龟一样缓慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:51:50.383

怎么样的东西：

```
A.ix[A.index - B.index] 
```

`A.index - B.index`有`set`区别：

```
 In [30]: A.index
    Out[30]: Int64Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19], dtype=int64)

    In [31]: B.index
    Out[31]: Int64Index([  0,   1,   2,   3, 999], dtype=int64)

    In [32]: A.index - B.index
    Out[32]: Int64Index([ 4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19], dtype=int64)

    In [33]: B.index - A.index
    Out[33]: Int64Index([999], dtype=int64) 
```

# c# - 为什么 sToString 显示空值

> ID：10767168
> 
> 赞同：-1
> 
> 时间：2012-05-26T14:42:14.203
> 
> 标签：c#

在此示例中，我初始化了一个变量整数并将整数值传递给参数化构造函数，然后我声明了一个实例方法，我想在其中打印字符串 vale，最后我在主程序中调用该方法。bur 当我打印它的值时它显示我 NULL 值，为什么？

```
class CPrint
{
    int i = 100;
    string sToPrint;

    // here Initialize a default Constructor.
    public CPrint() { }
    //public CPrinter() : this("Default Constructor Value") {}

    // here defining a custom constructor which take one parameter of string value
    public CPrint(string s)
    {
        sToPrint = s;
    }

    // here defining a custom constructor which take one parameter of integer value

    public CPrint(int i)
    {
        sToPrint = Convert.ToString(i);
    }

    // instance method
    public void PrintString()
    {
        Console.WriteLine("I have just printed ...{0}", sToPrint);

    }
}

class Program
{
    static void Main(string[] args)
    {
        CPrint p = new CPrint();
        p.PrintString(); 
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T14:44:44.687

您在 Main 方法中使用了`CPrint()`构造函数，它什么都不做。因此，`sToPrint`尚未初始化，因此它是`null`. 如果你想要一些非空值，你需要调用`CPrint(String)`or`CPrint(int)`构造函数。

例如，

```
class Program 
{
    static void Main(string[] args) 
    { 
        CPrint p = new CPrint("Hello"); 
        p.PrintString(); Console.ReadLine(); 
    } 
} 
```

它将打印“你好”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T14:57:44.890

根据您的代码，您只会在调用默认构造函数时获得空值。你可以做如下。

```
public CPrint() {
        sToPrint = Convert.ToString(i);
} 
```

在默认构造函数中，您不会为`sToPrint`变量赋值。这就是为什么即使您将 value 设置为`i`

如果你打电话，`CPrint(intvalue)` 那么你应该得到如下输出。它不能为空，因为您将其设置为`sToPrint`

> 我刚刚打印了... *intvalue*

如果你想在你的方法中获取同名的全局变量的值，你可以使用`this`关键字。

```
 public CPrint(int i)
    {
        sToPrint = Convert.ToString(this.i); // will print 100 
    } // put break point here and check sToPrint value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T15:52:27.347

在类的顶部设置`int i = 100;`不会调用构造函数。实际上， i 没有在任何地方使用，因此您应该删除该行。

```
class CPrint
{
    //int i = 100;     // i is not used anywhere
    string sToPrint; 
```

解决这个问题的一种方法是使用[构造函数链接](http://www.manjuke.com/2010/12/constructor-chaining-in-c.html)；在默认构造函数中，您可以在提供适当参数时调用另一个构造函数：

```
public CPrint() : this(100) 
{ 
}

public CPrint(int i) : this (Convert.ToString(i))
{
}

public CPrint(string s)
{
    sToPrint = s;
} 
```

# php - 检查用户是否喜欢外部网页上的页面（facebook）

> ID：10767177
> 
> 赞同：3
> 
> 时间：2012-05-26T14:43:49.823
> 
> 标签：php, jquery, facebook, api

我需要知道用户是否喜欢我的 Facebook 页面（不是在 fb 应用程序中，而是在外部网站上）。我试图使用这个片段：http: [//jsfiddle.net/alexgarry/qdfL6/5/](http://jsfiddle.net/alexgarry/qdfL6/5/)

我将它复制到文档后它没有工作。我的脚本加载后，会出现一个带有错误的新弹出窗口：“再试一次”。

我的代码：

```
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script>
<style>
#container_notlike, #container_like {
    display:none
}
</style>
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script>
  FB.init({
    appId  : 'MY_APP_ID',
    status : true,
    cookie : true,
    xfbml  : true  
  });

$(document).ready(function(){
    FB.login(function(response) {
        if (response.status == 'connected') {
            var user_id = response.authResponse.userID;
            var page_id = "230305033727799"; // coca cola page https://www.facebook.com/cocacola
            var fql_query = "SELECT uid FROM page_fan WHERE page_id="+page_id+" and uid="+user_id;

            FB.api({
                method: 'fql.query',
                query: fql_query
            },
            function(response){
                if (response[0]) {
                    $("#container_like").show();
                } else {
                    $("#container_notlike").show();
                }
            }
            );    
        } else {
        // user is not logged in
        }
    });
});
</script>
</head>
<body>
<div id="fb-root"></div>
<div id="container_notlike">
YOU DONT LIKE
</div>
<div id="container_like">
YOU LIKE
</div>
</body>
</html> 
```

有任何想法吗？

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:35:38.717

```
<!DOCTYPE html>
<html>
    <head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style type="text/css">
        #container_notlike, #container_like {
            display:none
        }​
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            FB.login(function(response) {
                if (response.status == 'connected') {
                    var user_id = response.authResponse.userID;
                    var page_id = "40796308305";  

                    FB.api('/me/likes/'+page_id, function(response) {
                        if (response.data[0]) {
                            $("#container_like").show();
                        } else {
                            $("#container_notlike").show();
                        }
                    });
                } else {
                    // user is not logged in                        
                }
            });
        });
    </script>
</head>
<body>
    <div id="fb-root"></div>
    <script src="https://connect.facebook.net/en_US/all.js"></script>
    <script>
        FB.init({appId: 'MY_APP_ID', status: true, cookie: true, xfbml: true});
    </script>
    <div>
        <div id="container_notlike">
            YOU DONT LIKE
        </div>
        <div id="container_like">
            YOU LIKE
        </div>​
    </div>
</body> 
```

将 MY_APP_ID 替换为您的 APP_ID。

# c# - 遇到泛型 Error Expected 类、委托、枚举、接口或结构，但不知道哪里出错了

> ID：10767179
> 
> 赞同：0
> 
> 时间：2012-05-26T14:44:08.897
> 
> 标签：c#, methods, filestream

这是两种方法，第一个错误是抱怨我需要一个 }，如下所示

我知道这通常意味着我在某处缺少支架，但我认为情况并非如此，而且我一生都找不到任何问题。

```
 public Customer(string first, string last)
    {
        FileStream getID = new FileStream(FILENAME, FileMode.OpenOrCreate,         FileAccess.Read, FileShare.ReadWrite);
        String line;
        string[] fields;
        try
        {
            //Pass the file path and file name to the StreamReader constructor
            StreamReader srID = new StreamReader(getID);

            //Read the first line of text
            line = srID.ReadLine();
            while(line != null)
              {
                 fields = line.Split(DELIM);
                 if (Convert.ToInt32(fields[2]) > CustomerID)
                    {
                        CustomerID = Convert.ToInt32(fields[2]);
                    }
                 line = srID.ReadLine();
              }

            //close the file
            srID.Close();
        }
        catch(Exception e)
        {
            Console.WriteLine("Exception: " + e.Message);
        }

        FileStream customerWrite = new FileStream(FILENAME, FileMode.Append, FileAccess.Write, FileShare.ReadWrite);
        int idCounter;

        try
        {

            //Pass the filepath and filename to the StreamWriter Constructor
            StreamWriter sw = new StreamWriter(customerWrite);

            //Write a line of text
            FirstName = first;
            LastName = last;
            CustomerID += 1;
            sw.WriteLine(ToString());

            //Close the file
            sw.Close(); 
        }
        catch(Exception e)
        {
            // messagebox
            MessageBox.Show(e.Message,"Problem",MessageBoxButtons.OK, MessageBoxIcon.Error);
            //Console.WriteLine("Exception: " + e.Message);
        } // asking for a } here

        public new string ToString()
        {
           return (FirstName + ',' + LastName + ',' + CustomerID);
        }
    }

    // checks for duplicate customer info
    public bool CustomerOrderCheck(string first, string last) // gives the expected class... for the bool here
    // pass the first and last name to be checked in the system for a previous entry
    {
        FileStream customerCheck = new FileStream(FILENAME, FileMode.OpenCreate, FileAccess.Read, FileShare.ReadWrite);
        String line;
        string[] fields;
        bool customerExists = false;
        try
        {
            //Pass the file path and file name to the StreamReader constructor
            StreamReader sr = new StreamReader(customerCheck);

            //Read the first line of text
            line = sr.ReadLine();
            while (line != null)
            {
                fields = recordIn.Split(DELIM);
                FirstName = fields[0];
                LastName = fields[1];
                if (FirstName + LastName == first + last) //(line.Equals(orderCheck))
                {
                    MessageBox.Show("This order has already been submitted, please try again","Order already exists",MessageBoxIcon.Warning);
                    //Console.WriteLine("This order has already been submitted, please try again");
                    customerExists = true;
                    break;
                }
                line = sr.ReadLine();
            }

            //close the file
            sr.Close();
        }
        catch(Exception e)
        {
            Console.WriteLine("Exception: " + e.Message);
        }
        return customerExists;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:02:45.667

我认为这：

```
 } // asking for a } here

        public new string ToString()
        {
           return (FirstName + ',' + LastName + ',' + CustomerID);
        }
    } 
```

应该：

```
 }// asking for a } here
    }

    public new string ToString()
    {
        return (FirstName + ',' + LastName + ',' + CustomerID);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T15:26:05.023

**您在函数中包含了一个函数。将 ToString() 函数移到 Customer() 函数之外。只需在需要的地方加一个括号，然后在 ToString() 函数后删除括号。**

# java - Java中的对象变量是指针吗？

> ID：10767181
> 
> 赞同：0
> 
> 时间：2012-05-26T14:44:32.017
> 
> 标签：java, android, oop, object

对象变量是指针吗？如果我声明一个对象变量，然后为它分配另一个对象，我有一个还是两个对象？

具体来说，我需要在 Android 中捕获一个位置对象并将其放在一边以与出现的下一个位置对象进行比较。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T14:45:45.377

你有一个对象，有两个引用。具体来说，

```
int[] a = {1, 2};
int[] b = a;
a[0] = 17;
System.out.println(b[0]); // 17 
```

您需要显式克隆一个对象（如果它是`Cloneable`）或以其他方式复制其内容以创建一个非共享的新实例。

# java - 在Android中将XML从网站解析为字符串数组请帮助我

> ID：10767184
> 
> 赞同：1
> 
> 时间：2012-05-26T14:44:32.347
> 
> 标签：java, android, xml, arrays, parsing

您好，我正在制作一个从 Wiki 提取一些数据的 Android 应用程序，起初我计划寻找一种解析 HTML 的方法，但有人向我指出，XML 会更容易一起工作。现在我被困在试图找到一种正确解析 XML 的方法。我正在尝试从以下网址解析：

[http://zelda.wikia.com/api.php?action=query&list=categorymembers&cmtitle=Category:Games&cmlimit=500&format=xml](http://zelda.wikia.com/api.php?action=query&list=categorymembers&cmtitle=Category:Games&cmlimit=500&format=xml)

我正在尝试将每个游戏的标题放入一个字符串数组中，但遇到了一些麻烦。我没有我正在尝试的代码示例，它是使用 xmlpullparser。每次我尝试用它做任何事情时，我的应用程序都会崩溃。将 XML 保存在本地并从那里解析会更好吗？或者我可以从网址出发吗？以及如何将其正确解析为字符串数组？请帮助我，感谢您花时间阅读本文。

如果您需要查看代码或任何我可以在今晚晚些时候获得的东西，我现在不在我的电脑附近。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T17:20:17.173

每当您发现自己为简单格式（例如示例中的格式）编写解析器代码时，您几乎*总是*在做错事并且没有使用合适的框架。

例如 - `android.sax`SDK 中包含的包中有一组用于解析 XML 的简单帮助程序，而您发布的示例恰好可以像这样轻松解析：

```
public class WikiParser {
    public static class Cm {
        public String mPageId;
        public String mNs;
        public String mTitle;
    }
    private static class CmListener implements StartElementListener {
        final List<Cm> mCms;
        CmListener(List<Cm> cms) {
            mCms = cms;
        }
        @Override
        public void start(Attributes attributes) {
            Cm cm = new Cm();
            cm.mPageId = attributes.getValue("", "pageid");
            cm.mNs = attributes.getValue("", "ns");
            cm.mTitle = attributes.getValue("", "title");
            mCms.add(cm);
        }
    }
    public void parseInto(URL url, List<Cm> cms) throws IOException, SAXException {
        HttpURLConnection con = (HttpURLConnection) url.openConnection();
        try {
            parseInto(new BufferedInputStream(con.getInputStream()), cms);
        } finally {
            con.disconnect();
        }
    }
    public void parseInto(InputStream docStream, List<Cm> cms) throws IOException, SAXException {
        RootElement api = new RootElement("api");
        Element query = api.requireChild("query");
        Element categoryMembers = query.requireChild("categorymembers");
        Element cm = categoryMembers.requireChild("cm");
        cm.setStartElementListener(new CmListener(cms));
        Xml.parse(docStream, Encoding.UTF_8, api.getContentHandler());
    }
} 
```

基本上，这样调用：

```
WikiParser p = new WikiParser();
ArrayList<WikiParser.Cm> res = new ArrayList<WikiParser.Cm>();
try {
    p.parseInto(new URL("http://zelda.wikia.com/api.php?action=query&list=categorymembers&cmtitle=Category:Games&cmlimit=500&format=xml"), res);
} catch (MalformedURLException e) {
} catch (IOException e) {
} catch (SAXException e) {} 
```

**编辑：**这就是您创建的`List<String>`方式：

```
public class WikiParser {
    private static class CmListener implements StartElementListener {
        final List<String> mTitles;
        CmListener(List<String> titles) {
            mTitles = titles;
        }
        @Override
        public void start(Attributes attributes) {
            String title = attributes.getValue("", "title");
            if (!TextUtils.isEmpty(title)) {
                mTitles.add(title);
            }
        }
    }
    public void parseInto(URL url, List<String> titles) throws IOException, SAXException {
        HttpURLConnection con = (HttpURLConnection) url.openConnection();
        try {
            parseInto(new BufferedInputStream(con.getInputStream()), titles);
        } finally {
            con.disconnect();
        }
    }
    public void parseInto(InputStream docStream, List<String> titles) throws IOException, SAXException {
        RootElement api = new RootElement("api");
        Element query = api.requireChild("query");
        Element categoryMembers = query.requireChild("categorymembers");
        Element cm = categoryMembers.requireChild("cm");
        cm.setStartElementListener(new CmListener(titles));
        Xml.parse(docStream, Encoding.UTF_8, api.getContentHandler());
    }
} 
```

进而：

```
WikiParser p = new WikiParser();
ArrayList<String> titles = new ArrayList<String>();
try {
    p.parseInto(new URL("http://zelda.wikia.com/api.php?action=query&list=categorymembers&cmtitle=Category:Games&cmlimit=500&format=xml"), titles);
} catch (MalformedURLException e) {
} catch (IOException e) {
} catch (SAXException e) {} 
```

# c# - 创建一个动态数组并与静态比较

> ID：10767185
> 
> 赞同：1
> 
> 时间：2012-05-26T14:44:35.493
> 
> 标签：c#, regex, arrays

我正在尝试编写一个程序来扫描环绕 WiFi 网络并将信息转储到包含 SSID 和加密类型的数组中。然后将 SSID 动态数组与尝试将 SSID 匹配在一起的静态数组进行比较，然后输出结果。

我在尝试创建仅将 SSID 和加密用于使用 Regex 的动态数组时遇到问题。网络转储的输出如下所示：

```
Interface name : Wireless Network Connection 
There are 8 networks currently visible. 

SSID 1 : TheChinaClub-5G
    Network type            : Infrastructure
    Authentication          : WPA2-Personal
    Encryption              : CCMP 
```

我尝试使用 SSID 作为键，并将以下数字作为通配符（但不知道语法），并在冒号后获取数据，不包括空格。截至目前，除了网络转储之外，没有任何效果。正则表达式似乎没有找到任何东西。我一直在使用[这篇文章](https://stackoverflow.com/questions/454414/how-can-i-find-a-string-after-a-specific-string-character-using-regex)作为正则表达式的模型。

这是我到目前为止的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Diagnostics;
using System.Text;
using System.Text.RegularExpressions;

namespace Rainbownetworks
{
    public struct Networkarr
    {
        public string x, y;

        public Networkarr(string SSID, string Encryption)
        {
            x = SSID;
            y = Encryption;
        }
    }

     class Program
    {

        static void Main(string[] args)
        {
            string[] StaticSSIDarr = { "network1", "network2", "network3" };
            string[] Networkarr = { };

            Process p = new Process();
            p.StartInfo.FileName = "netsh.exe";
            p.StartInfo.Arguments = "wlan show networks";
            p.StartInfo.UseShellExecute = false;
            p.StartInfo.RedirectStandardOutput = true;
            p.Start();
            string results = p.StandardOutput.ReadToEnd();

            string[] SSIDs = { "SSID *"};

            FindSSIDs(SSIDs, results);

            Console.WriteLine(results);
            Console.ReadLine();

        }

        private static void FindSSIDs(IEnumerable<string> keywords, string source)
        {
            var found = new Dictionary<string, string>(10);
            var keys = string.Join("|", keywords.ToArray());
            var matches = Regex.Matches(source, @"(?<key>" + keys + "):",
                                  RegexOptions.IgnoreCase);

            foreach (Match m in matches)
            {
                var key = m.Groups["key"].ToString();
                var start = m.Index + m.Length;
                var nx = m.NextMatch();
                var end = (nx.Success ? nx.Index : source.Length);
                found.Add(key, source.Substring(start, end - start));
            }

            foreach (var n in found)
            {
                Networkarr newnetwork = new Networkarr(n.Key, n.Value);
                Console.WriteLine("Key={0}, Value={1}", n.Key, n.Value);
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:00:52.240

**试试这个**

```
try {
    Regex regexObj = new Regex(@"(?<=SSID\s*\d+ :\s*)(?<value>\S+)");
    Match matchResults = regexObj.Match(subjectString);
    while (matchResults.Success) {
        for (int i = 1; i < matchResults.Groups.Count; i++) {
            Group groupObj = matchResults.Groups[i];
            if (groupObj.Success) {
                // matched text: groupObj.Value
                // match start: groupObj.Index
                // match length: groupObj.Length
            } 
        }
        matchResults = matchResults.NextMatch();
    } 
} catch (ArgumentException ex) {
    // Syntax error in the regular expression
} 
```

**解释**

```
@"
(?<=         # Assert that the regex below can be matched, with the match ending at this position (positive lookbehind)
   SSID         # Match the characters “SSID” literally
   \s           # Match a single character that is a “whitespace character” (spaces, tabs, and line breaks)
      *            # Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
   \d           # Match a single digit 0..9
      +            # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
   \ :          # Match the characters “ :” literally
   \s           # Match a single character that is a “whitespace character” (spaces, tabs, and line breaks)
      *            # Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
)
(?<value>    # Match the regular expression below and capture its match into backreference with name “value”
   \S           # Match a single character that is a “non-whitespace character”
      +            # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
)
" 
```

* * *

希望这可以帮助。

# android - 无法在 ListView 中显示数据库

> ID：10767189
> 
> 赞同：1
> 
> 时间：2012-05-26T14:45:33.877
> 
> 标签：android, android-listview, logcat

我试图让我的应用程序显示我在数据库中设置的表中的信息。根据我收集的信息，数据库设置正确，代码正确，但我不知道是什么导致了错误。我将发布所有代码，以便看看这里是否有人可以帮助我弄清楚。

**Progress.class：**

```
public class WorkoutProgress extends ListActivity {
   private DataBaseHelper datasource;
   TextView goal;
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      requestWindowFeature(Window.FEATURE_NO_TITLE);
      getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
      setContentView(R.layout.progress);
      goal = (TextView)findViewById(R.id.goal);
      datasource = new DataBaseHelper(this);
      datasource.open();
      fillData();
      datasource.close();
  }
  private void fillData() {
    Cursor c = datasource.getAllActs();
    startManagingCursor(c);
    String[] from = new String[] {DataBaseHelper.KEY_DATE,  
    DataBaseHelper.KEY_STEPS,DataBaseHelper.KEY_CALs };
    int[] to = { R.id.code, R.id.Days, R.id.BMI };
    SimpleCursorAdapter notes = new SimpleCursorAdapter (this, R.layout.notes_row, c,  from, to);
    setListAdapter(notes);               
  }
} 
```

**数据库助手：**

```
public class DataBaseHelper
{
    public static final String KEY_ROWID = "_id";
    public static final String KEY_GOAL = "goal";
    public static final String KEY_Current = "cweight";
    public static final String KEY_Target = "nweight"; 

    public static final String KEY_ROWID2 = "_id";

    public static final String KEY_DATE = "date";
    public static final String KEY_STEPS = "steps";
    public static final String KEY_CALs = "calories";
    public static final String KEY_CALID = "_id";
    public static final String KEY_TOTALCALS = "totalcals";    
    private static final String TAG = "DBAdapter";
    private static final String DATABASE_NAME = "workout";
    private static final String DATABASE_TABLE = "goals";
    private static final String DATATABLE = "acts";
    private static final String CALTABLE = "cals";
    private static final int DATABASE_VERSION = 1;
    private static final String DATABASE_CREATE =
     "create table goals (_id integer primary key autoincrement, "
     + "goal text not null, cweight number not null, " 
     + "nweight number not null);";
    private static final String DATABASE_CREATE2 =
        "create table acts (_id integer primary key autoincrement, "
                + "date text not null, steps text not null, " 
                + "calories number not null);"
    private final Context context; 
    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;
    public DataBaseHelper(Context ctx) 
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper 
    {
        DatabaseHelper(Context context) 
        {
           super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }
        @Override
        public void onCreate(SQLiteDatabase db) 
        {
            db.execSQL(DATABASE_CREATE);
            db.execSQL(DATABASE_CREATE2);
        }
        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, 
        int newVersion) 
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion 
                + " to "
                + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS titles");
            onCreate(db);
        }
    }    
    public DataBaseHelper open() throws SQLException 
    {
        db = DBHelper.getWritableDatabase();
        return this;
    }
    public void close() 
    {
        DBHelper.close();
    }
    public long insertTitle(String goal, int current, int target) 
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_GOAL, goal);
        initialValues.put(KEY_Current, current);
        initialValues.put(KEY_Target, target);
        return db.insert(DATABASE_TABLE, null, initialValues);
    }

    public long insertActivity(String date, String steps, double Calories) 
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_DATE, date);
        initialValues.put(KEY_STEPS, steps);
        initialValues.put(KEY_CALs, Calories);
        return db.insert(DATATABLE, null, initialValues);
    }
    public boolean deleteTitle(long rowId) 
    {
        return db.delete(DATABASE_TABLE, KEY_ROWID + 
            "=" + rowId, null) > 0;
    }
    public void deleteFirst()
    {
        Cursor cursor = db.query(DATABASE_TABLE, null, null, null, null, null, null); 
        if(cursor.moveToFirst()) {
        long rowId = cursor.getLong(cursor.getColumnIndex(KEY_ROWID)); 
        db.delete(DATABASE_TABLE, KEY_ROWID +  "=" + rowId, null);
   }
}

public boolean deleteAct(long rowId) 
{
    return db.delete(DATATABLE, KEY_ROWID + 
            "=" + rowId, null) > 0;
}
//---retrieves all the titles---
public Cursor getAllGoals() 
{
    return db.query(DATABASE_TABLE, new String[] {
            KEY_ROWID, 
            KEY_GOAL,
            KEY_Current,
            KEY_Target}, 
            null, 
            null, 
            null, 
            null, 
            null);
}
public Cursor getAllActs() 
{
    return db.query(DATATABLE, new String[] {

            KEY_ROWID2, 

            KEY_DATE,
            KEY_STEPS,
            KEY_CALs}, 
            null, 
            null, 
            null, 
            null, 
            null);
}

//---retrieves a particular title---
public Cursor getGoal
(long rowId) throws SQLException 
{
    Cursor mCursor =
            db.query(true, DATABASE_TABLE, new String[] {
                    KEY_ROWID,
                    KEY_GOAL, 
                    KEY_Current,
                    KEY_Target
                    }, 
                    KEY_ROWID + "=" + rowId, 
                    null,
                    null, 
                    null, 
                    null, 
                    null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
}
public Cursor getAct(long rowId) throws SQLException 
{
    Cursor mCursor =
            db.query(true, DATATABLE, new String[] {
                    KEY_ROWID2,
                    KEY_DATE, 
                    KEY_STEPS,
                    KEY_CALs
                    }, 
                    KEY_ROWID2 + "=" + rowId, 
                    null,
                    null, 
                    null, 
                    null, 
                    null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
}
public boolean updateAct(long rowId, String date, 
        String steps, String cals) 
        {
            ContentValues args = new ContentValues();
            args.put(KEY_DATE, date);
            args.put(KEY_STEPS, steps);
            args.put(KEY_CALs, cals);
            return db.update(DATATABLE, args, 
                             KEY_ROWID2 + "=" + rowId, null) > 0;
        }
/*public boolean updateCals(long rowId, double cals) 
        {
            ContentValues args = new ContentValues();
            args.put(KEY_TOTALCALS, cals);
            return db.update(CALTABLE, args, 
                             KEY_CALID + "=" + rowId, null) > 0;
        }*/

//---updates a title---
public boolean updateTitle(long rowId, String isbn, 
String title, String publisher) 
{
    ContentValues args = new ContentValues();
    args.put(KEY_GOAL, isbn);
    args.put(KEY_Current, title);
    args.put(KEY_Target, publisher);
    return db.update(DATABASE_TABLE, args, 
                     KEY_ROWID + "=" + rowId, null) > 0;
} 
} 
```

**日志猫：**

```
05-26 14:42:03.895: E/AndroidRuntime(345): FATAL EXCEPTION: main
05-26 14:42:03.895: E/AndroidRuntime(345): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.b00348312.workout/com.b00348312.workout.WorkoutProgress}: android.database.sqlite.SQLiteException: no such column: _id: , while compiling: SELECT _id, date, steps, calories FROM acts
05-26 14:42:03.895: E/AndroidRuntime(345):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
05-26 14:42:03.895: E/AndroidRuntime(345):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-26 14:42:03.895: E/AndroidRuntime(345):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-26 14:42:03.895: E/AndroidRuntime(345):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-26 14:42:03.895: E/AndroidRuntime(345):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-26 14:42:03.895: E/AndroidRuntime(345):  at android.os.Looper.loop(Looper.java:123)
05-26 14:42:03.895: E/AndroidRuntime(345):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-26 14:42:03.895: E/AndroidRuntime(345):  at java.lang.reflect.Method.invokeNative(Native Method)
05-26 14:42:03.895: E/AndroidRuntime(345):  at java.lang.reflect.Method.invoke(Method.java:521)
05-26 14:42:03.895: E/AndroidRuntime(345):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-26 14:42:03.895: E/AndroidRuntime(345):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-26 14:42:03.895: E/AndroidRuntime(345):  at dalvik.system.NativeStart.main(Native Method)
05-26 14:42:03.895: E/AndroidRuntime(345): Caused by: android.database.sqlite.SQLiteException: no such column: _id: , while compiling: SELECT _id, date, steps, calories FROM acts
05-26 14:42:03.895: E/AndroidRuntime(345):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
05-26 14:42:03.895: E/AndroidRuntime(345):  at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:91)
05-26 14:42:03.895: E/AndroidRuntime(345):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
05-26 14:42:03.895: E/AndroidRuntime(345):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:80)
05-26 14:42:03.895: E/AndroidRuntime(345):  at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:46)
05-26 14:42:03.895: E/AndroidRuntime(345):  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
05-26 14:42:03.895: E/AndroidRuntime(345):  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1345)
05-26 14:42:03.895: E/AndroidRuntime(345):  at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1229)
05-26 14:42:03.895: E/AndroidRuntime(345):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1184)
05-26 14:42:03.895: E/AndroidRuntime(345):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1264)
05-26 14:42:03.895: E/AndroidRuntime(345):  at com.b00348312.workout.DataBaseHelper.getAllActs(DataBaseHelper.java:168)
05-26 14:42:03.895: E/AndroidRuntime(345):  at com.b00348312.workout.WorkoutProgress.fillData(WorkoutProgress.java:30)
05-26 14:42:03.895: E/AndroidRuntime(345):  at com.b00348312.workout.WorkoutProgress.onCreate(WorkoutProgress.java:25)
05-26 14:42:03.895: E/AndroidRuntime(345):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-26 14:42:03.895: E/AndroidRuntime(345):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-26 14:42:03.895: E/AndroidRuntime(345):  ... 11 more 
```

查看 logcat 似乎在告诉我缺少一列`"_id"`，但我已修改数据库以包含此列，您可以在上面的数据库帮助程序代码中看到该列。有什么我错过的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:53:17.653

由于活动不会启动错误，因此根本原因在堆栈中更靠后。在你的情况下，在这里：

```
05-26 14:42:03.895: E/AndroidRuntime(345): Caused by: android.database.sqlite.SQLiteException: no such column: _id: , while compiling: SELECT _id, date, steps, calories FROM acts 
```

似乎不言自明？看[这里](https://stackoverflow.com/questions/3359414/android-column-id-does-not-exist)

关键点是您的游标必须在结果集中包含一个名为 _id 的列，该列来自真实列或别名列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T15:06:05.543

`onCreate`您可能已经修改了数据库以包含所需的列，但是在再次调用该方法或您在该`onUpgrade`方法中实现更改并修改数据库版本之前，这些更改不会在数据库中实际实现。

尝试卸载然后在模拟器/手机上再次安装该应用程序，以便再次调用`onCreate`您的实现方法。`SQLiteOpenHelper`

# .net - 共享程序集与私有程序集有何不同？

> ID：10767192
> 
> 赞同：0
> 
> 时间：2012-05-26T14:46:08.493
> 
> 标签：.net

根据定义，私有程序集通常由单个应用程序使用，并存储在应用程序的目录或下面的子目录中。共享程序集通常存储在全局程序集缓存中，它是由 .NET 运行时维护的程序集存储库。共享程序集通常是代码库，许多应用程序会发现它们很有用，例如所有应用程序都将使用的 Crystal 报表类。

根据上面的定义，共享程序集不需要GAC注册，但一般我们做GACA，还有一种情况是我们可以在本地网络中保存一个程序集，多个应用程序使用同一个程序集，我们可以说程序集作为共享程序集？

共享程序集与私有程序集有何不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-13T11:21:41.960

我认为下面的[比较](http://www.c-sharpcorner.com/interview-question/explain-the-difference-between-a-private-assembly-and-a-shared-assembly)是非常准确的。

私人大会：

1.  私有程序集只能由一个应用程序使用。
2.  私有程序集将存储在特定应用程序的目录或子目录中。
3.  私人集会没有其他名称。
4.  私有程序集不需要强名称。
5.  私有程序集没有任何版本约束。

公共（共享）大会：

1.  公共程序集可供多个应用程序使用。
2.  公共程序集存储在 GAC（全局程序集缓存）中。
3.  公共程序集也称为共享程序集（注意：项目之间共享）。
4.  必须为公共集会创建强名称。
5.  公共程序集应严格执行版本约束。

附加说明：在 Visual Studio 中，私有程序集将被自动复制。每次我们使用“添加引用”在其他项目中引用私有程序集时，都会在 bin 文件夹中创建一个新副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:32:32.640

取决于对您来说“共享”是什么意思。如果对于共享，您的意思是要放入 GAC 的程序集，主要区别在于共享程序集有一个强名称，这给了它们一个唯一的标识。在这里您可以找到更多详细信息[http://windowsdevcenter.com/pub/a/dotnet/2003/03/17/bindingpolicy.html](http://windowsdevcenter.com/pub/a/dotnet/2003/03/17/bindingpolicy.html)

# c# - 带旋转的 WPF WritableBitmap（列主要到 RowMajor）

> ID：10767195
> 
> 赞同：0
> 
> 时间：2012-05-26T14:46:47.897
> 
> 标签：c#, wpf, image-processing

我有以列主要顺序存储的自定义图像格式（无法更改）的原始数据（在一些二进制标题数据之后）。我将文件读入一个名为“imageDataBytes”的字节[]。

```
int XSize = 1280; // Really the height of the image
int YSize = 2048; // Really the width of the image
WriteableBitMap myImage = new WritableBitmap(XSize, YSize, 96, 96, PixelFormats.Gray16, null)
System.Windows.Int32Rect rect = new System.Windows.Int32Rect(0, 0, XSize , YSize);
myImage.WritePixels(rect, customImage.imageDataBytes, stride, customImage.imageOffset); 
```

现在，我在 XAML 中使用

```
 <Image Grid.Column="0" Grid.Row="1" Cursor="Cursor1.cur"Source="{Binding myImage}" Stretch="None"/> 
```

我需要旋转图像（以纠正字节流中的主要列顺序，但我找不到类似于 C# 中 IPP 的 Byte[] 的数组转换（而且我这里没有可用的 IPP）。而且来自 xaml 的图像旋转将图像移动到整个位置（而不是围绕中心旋转）。

```
<Image ... // From above>
    <Image.RenderTransform>
        <RotateTransform CenterX="0.5" CenterY="0.5" Angle="-90"/>
    </Image.RenderTransform>
</Image> 
```

我能做些什么？我是否错过了某处 byte[] 上的转换？当中心设置为 0.5 时，为什么 RotateTransform 会移动图像？

请注意，这必须尽可能快，这显然是一个大图像，我正在尝试以 10Hz+ 的频率进行渲染，这就是为什么 nieve for-loop 字节数组转换被排除在可能的范围之外的原因。

一如既往的感谢

~TMII

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:12:55.913

那是因为您不是围绕对象的中心旋转，而是围绕点 (0.5, 0.5) 旋转。请参阅[http://msdn.microsoft.com/en-us/library/system.windows.media.rotatetransform.centerx.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.rotatetransform.centerx.aspx)

如果您可以访问后面代码中的图像，请手动设置 RenderTransform，并将 CenterX 和 CenterY 指定为 Image.Width/2.0 和 Image.Height/2.0。您只需要在图像更改时执行此操作。

# python - TypeError：“InMemoryUploadedFile”对象不可下标

> ID：10767200
> 
> 赞同：4
> 
> 时间：2012-05-26T14:47:24.230
> 
> 标签：python, django

我有一个在 Eclipse 上使用 Python2.7 和 Django1.2 的 Google Appengine 项目，它允许用户使用表单来上传图片、调整大小并将其存储为 BLOB 字段。

我在下面指出的位置添加了一个断点，并在“表达式”视图中看到“文件 ['content']”显示了一个值“TypeError: 'InMemoryUploadedFile' object is not subscriptable”。

当我踏入或越过这条线时，它会跳转到错误处理程序。

有人可以告诉我如何解决这个问题吗？提前致谢！

```
if req.method == 'POST':
    try:
        u_form = UserInfoForm(req.POST)
        if not u_form.is_valid():
            return err_page(_('Error'))

        u = coffeeuser.CoffeeUser.all().filter('user =', user_info).get()
        u.nickname = user_info.nickname()
        u.realname = req.POST.get('real_name')
        u.phone = req.POST.get('phone')
        u.address = req.POST.get('address')
        if req.FILES.get('photo_file'):                
            file = req.FILES.get('photo_file')
            img = images.Image(file['content'])   <<<Breakpoint...Error occurs here
            img.resize(width=50, height=50)
            resized_img = img.execute_transforms(output_encoding=images.JPEG)
            u.photo_file = db.Blob(resized_img)
        u.put()
        return HttpResponseRedirect('/user/')
    except Exception, x:
        return err_page(_('Error')) 
```

这是发生这种情况时控制台窗口的转储。我在这里看不到任何错误消息。

: 'http://localhost:8080', 'SERVER_PROTOCOL': 'HTTP/1.0', 'QUERY_STRING': '', 'CONTENT_LENGTH': '927730', 'HTTP_ACCEPT_CHARSET': 'ISO-8859-1,utf-8 ;q=0.7,*;q=0.3', 'APPENGINE_RUNTIME': 'python27', 'TZ': 'UTC', 'HTTP_COOKIE': 'RememberMe=YPD/ztDwsHCs3J9cPG5c+g==; dev_appserver_login="test@example.com:False:185804764220139124118"; sessionid=2b5fc41e4c0332b1161a002ae12e616b；csrftoken=05e24dcb62093082dc1fafe66c0a6dbb', 'SERVER_NAME': 'localhost', 'REMOTE_ADDR': '127.0.0.1', 'SDK_VERSION': '1.6.5', 'PATH_TRANSLATED': 'C:\_dev\eclipse-work\gae\pydev5 \src\main.py', 'SERVER_PORT': '8080', 'CONTENT_TYPE': 'multipart/form-data;*/* ;q=0.8', 'APPLICATION_ID': 'dev~quizoncloud', 'GATEWAY_INTERFACE': 'CGI/1.1', 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.8', 'AUTH_DOMAIN': 'gmail. com', '_AH_ENCODED_SCRIPT_NAME': '/user/'} 调试 2012-05-26 07:36:19,815 datastore_stub_index.py:181] 无需更新 index.yaml

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-26T20:37:58.173

`file`不是字典，所以你不能像那样进行键查找。也许你的意思是`file.content`？

虽然我认为该对象也没有`content`属性 - 请参阅UploadedFile 对象[的文档](https://docs.djangoproject.com/en/1.3/topics/http/file-uploads/#django.core.files.uploadedfile.UploadedFile)。也许你的意思是`file.read()`？

（另外，不要调用你的变量`file`- 这隐藏了内置`file`函数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T15:11:18.657

我建议您在产生异常的行之前添加行 [[print 'DEBUG:>', file, type(file)]]。此错误是关于“文件”对象不是映射类型。

# c# - 面试 - 编写程序以删除偶数元素

> ID：10767202
> 
> 赞同：5
> 
> 时间：2012-05-26T14:48:02.560
> 
> 标签：c#, algorithm, search

我今天被问到这个问题，我知道答案很简单，但他让我一直坚持到最后。

### 问题

`ArrayList`编写一个程序来删除存储在contains 中的偶数`1 - 100`。

### 我只是说哇

给你，这就是我实现它的方式。

```
ArrayList source = new ArrayList(100);
for (int i = 1; i < 100; i++)
{
    source.Add(i);
}

for (int i = 0; i < source.Count; i++)
{
    if (Convert.ToInt32(source[i]) % 2 ==0)
    {
        source.RemoveAt(i);
    }
}

//source contains only Odd elements 
```

### 扭曲

他问我这个给他一个方程的计算复杂度是多少。我刚刚做了并说这是与 N（输入）成正比的线性。

他说：嗯..所以这意味着当输入大小增加时我需要等待更长的时间才能得到结果，对吗？`Yes sirr you are`

为我调整它，让它`Log(N)`尽可能多地尝试，他说。我在这部分惨败。

*   因此，请来这里寻找正确的逻辑、答案或算法来做到这一点。

**注意：**他不需要 Linq，不需要额外的花里胡哨。只是简单的循环或其他逻辑来做到这一点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T14:51:12.280

我敢说复杂性实际上是 O(N^2)，因为数组中的删除是 O(N)，并且可能会为每个项目调用它。

所以你有 O(N) 用于遍历数组（列表）和 O(N) 用于每次删除 => O(N) * O(N)。

由于它似乎不清楚，我将解释原因。在每一步都可能会移除一个项目（假设最坏的情况是每个项目都必须被移除）。在数组中，移除是通过移位完成的。因此，要删除第一项，我需要将以下所有 N-1 项向左移动一个位置：

```
1 2 3 4 5 6...
<---
2 3 4 5 6... 
```

现在，在每次迭代中我都需要移动，所以我正在`N-1 + N-2 + ... + 1 + 0`移动，这给出了`(N) * (N-1) / 2`（算术级数）的结果，最终复杂度为 O(N^2)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T15:11:53.053

让我们这样想：

您正在执行的删除操作的数量是数组长度的一半（如果元素存储在数组中）。所以复杂度至少是 O(N) 。

您收到的问题让我假设您的教授希望您推理存储数字的不同方式。

通常，当您具有日志复杂性时，您会使用不同的结构，例如图形或树。

我能想到的具有对数复杂性的唯一方法是将数字存储在树中（有序树，b-tree ......我们对此进行了详细说明），但它实际上超出了考试的限制（在大批）。

这对你有意义吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T15:20:36.427

如果您保留两个索引，一个指向当前读取位置，一个指向当前写入位置，您可以获得明显更好的性能。

```
int read = 0
int write = 0; 
```

这个想法是 read 依次查看数组的每个成员；write 跟踪列表的当前末尾。当我们找到要删除的成员时，我们会向前读取，但不会写入。

```
for (int read = 0; read < source.Count; read++) {
  if (source[read] % 2 != 0) {
    source[write] = source[read];
    write += 1;
  }
} 
```

然后在最后，告诉 ArrayList 它的新长度是 `write' 的当前值。

这会将您从原来的 O(n^2) 降低到 O(n)。

（注意：我没有测试过这个）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T14:55:31.807

如果您确实必须使用 ArrayList 并且必须主动删除条目（而不是首先不添加它们）

不增加 i + 1 但 i + 2 将消除您检查它是否为奇数的需要。

```
for (int i = source.Count - 1 ; i > 0; i = i i 2)
{
   source.RemoveAt(i);
} 
```

**编辑**：我知道这只有`source`在按顺序包含 1-100 的条目时才有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-26T15:03:13.863

如果不更改数据结构或对项目在 ArrayList 中的存储方式进行一些假设，我看不出您将如何避免检查每个成员的奇偶性（因此至少是`O(n)`复杂性）。也许面试官只是想让你告诉他这是不可能的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-26T15:14:05.223

给定解决方案的问题是它从头开始，因此每次删除项目时都必须移动整个列表：

```
Initial List:       1, 2, 3, 4, 5, ..., 98, 99
                         /  /  /  ///  /
After 1st removal:  1, 3, 4, 5, ..., 98, 99, <empty>
                            /  ///  /   /
After 2nd removal:  1, 3, 5, ..., 98, 99, <empty>, <empty> 
```

我使用斜线来尝试显示列表在每次删除后如何变化。

您可以通过**颠倒删除顺序来降低复杂性（并消除我在评论中提到的错误）：**

```
for (int i = source.Count-1; i >= 0; --i)  {
  if (Convert.ToInt32(source[i]) % 2 == 0) {
    // No need to re-check the same element during the next iteration.
    source.RemoveAt(--i);
  }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-26T18:31:41.103

**如果**您有无限的并行线程可用，则有可能。

假设我们有一个包含`n`元素的数组。每个元素分配一个线程。假设所有线程完美同步。

1.  每个线程决定它的元素是偶数还是奇数。（时间`O(1)`。）
2.  确定数组中它下面有多少元素是奇数。（时间`O(log(n))`。）
    1.  在第二个数组中标记 0 或 1，具体取决于您在同一索引处是偶数还是奇数。所以每一个都是那个地方的赔率计数。
    2.  如果您的索引是奇数，请添加前一个数字。现在每个条目都是当前块 2 中的赔率计数，由您自己决定
    3.  如果你的索引 mod 4 是 2，在下面的索引处添加值，如果是 3，在下面添加答案 2 索引。现在，每个条目都是当前块中的赔率计数 4 由您自己决定。
    4.  继续这个模式`2**i`（如果你在上半部分加上下半部分的计数）次 - 现在这个数组中的每个条目都是下面的赔率计数。`log[2](n)`
3.  每个 CPU 将其值插入到正确的插槽中。
4.  将数组截断为正确的大小。

I am willing to bet that something like this is the answer your friend has in mind.

# ios - NSDictionary 到文件

> ID：10767203
> 
> 赞同：0
> 
> 时间：2012-05-26T14:48:07.697
> 
> 标签：ios, caching, nsdictionary

我一直在研究一个 SOAP Web 服务，它使用 Caché 来避免以前完成的 HTTP 请求。

当我尝试将我的 NSDictionary 保存到文件时出现错误（我猜这是因为它不遵循属性列表结构）并且我知道如何修复它。

这是我的代码：

```
[self loadCache];
NSData *responseData;
NSMutableDictionary* dict = [_cache objectForKey:delegate.type];

if (dict != nil && [dict objectForKey:request.HTTPBody] != nil ) {
    responseData = [dict objectForKey:request.HTTPBody];
} else {
    NSHTTPURLResponse* urlResponse = nil; 
    NSError *error = [[NSError alloc] init];  
    responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&urlResponse error:&error];
    if (dict == nil) {
        dict = [[NSMutableDictionary alloc] init];
        [_cache setObject:dict forKey:delegate.type];
        [dict setObject:[NSNumber numberWithDouble:NSTimeIntervalSince1970] forKey:@"FECHA"];
    }
    if (responseData == nil) {
        responseData = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"test" ofType:@"xml"]];
    }
    NSLog(@"%@", [[request.HTTPBody copy] class]);
    [dict setObject:responseData forKey:request.HTTPBody];

    [self saveCache];
} 
```

加载缓存功能：

```
- (void)loadCache {
if (_loadedCache) return;
NSString* docsurl = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
docsurl = [docsurl stringByAppendingPathComponent:@"cache.txt"];
_cache = [[NSMutableDictionary alloc] initWithContentsOfFile:docsurl];
if (_cache == nil) _cache = [[NSMutableDictionary alloc] init];
} 
```

保存缓存功能：

```
- (void)saveCache {
NSString* docsurl = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
docsurl = [docsurl stringByAppendingPathComponent:@"cache.txt"];
if ([_cache writeToFile:docsurl atomically:YES]) {
    NSLog(@"SAVED");
} else {
    NSLog(@"ERROR");
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T21:59:57.120

如评论：已解决！我试图将 NSData 用作 KEY，它只能用作 VALUE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T15:01:39.530

NSData 不能是“键”，它只能是“值”

# c++ - 在某个点之后从文本文件中删除所有内容

> ID：10767205
> 
> 赞同：-1
> 
> 时间：2012-05-26T14:48:30.930
> 
> 标签：c++, file-handling

这是我在这里的第一篇文章。我正在使用文件处理在 C++ 中编写一个程序，其中我有一个给定的文本文件，我希望删除文件中超出我的指针所在的某个点的所有内容，之后指针应该返回到与以前相同的位置。

如果有人可以帮助我，我将不胜感激。好久没编程了。

特别是在我的程序中，我有，

> ...
> 
> 流列表；
> 
> List.open("List.txt");
> 
> ...
> 
> List.seekp(i);

此时我希望删除文件中超出第 i 个字节的所有内容，并确保我进一步写入的内容来自第 i 个位置。我怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:06:36.973

通常在文本文件处理中，您使用两个文件，从**original**读取并写入**temp**。然后关闭**temp**，取消链接**original**并将**temp**重命名为**original**。这样做的一个原因是，如果在中途发生崩溃，您不会失去一切。第二个原因是，当您尝试在不同的文件系统上使用它时，尝试做任何棘手的事情可能不起作用。

# php - POST 数据发送并将 URL 更改为相同

> ID：10767210
> 
> 赞同：3
> 
> 时间：2012-05-26T13:58:54.517
> 
> 标签：php, javascript, bookmarklet, url-shortener, xmlhttprequest

我有一个 URL 缩短服务，我用 PHP 制作的。它通过主页上的表单通过 POST 方法接收要缩短的 URL。我想为此服务创建一个书签。

它应该就像单击它（它停留在书签栏上），它获取当前 url 并 POST 将其发送到 http:// *sitelocation* /create.php 并将位置更改为相同（如用户所见生成的短 url）**或**将缩短的 URL 显示为带有可以编辑的文本框的警报（以便用户可以从中复制）。

这个怎么做？？用 XHR 做这件事会很棒（首选）。

**我不想编辑我的 PHP 脚本。但如果它真的很重要，我可以**

我尝试过的：我刚刚获得了一个 JavaScript（来自网络）来执行 XHR 请求，但它不起作用。我已经尝试了超过 5 个脚本，但它们都失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T07:51:22.853

使用JS在当前页面中嵌入一个隐藏的表单，其中action是你的服务，输入是window.location，然后提交表单。

# c# - 方法将从一个线程调用两次以上。如何等待

> ID：10767216
> 
> 赞同：1
> 
> 时间：2012-05-26T14:50:46.957
> 
> 标签：c#, multithreading

AC#-方法在事件引发后调用主线程。然后在第一个事件忙于相同方法期间，另一个事件正在触发相同的方法。所以在调试过程中，我在调用堆栈中看到同一线程上同一方法中的两行。

我怎么能阻止第二个事件等到第一个事件用相同的方法准备好。我正在尝试使用 lock() 但它不会阻塞同一个线程。AutoResetEvent 可以等待，但将在同一个线程上等待。

有人有诀窍吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T19:05:34.617

你的问题是由`Application.DoEvents()`. 这种方法确实有它的用途，但它很危险，你偶然发现了其中一个原因：对事件的重入调用。

所以，试试

1.  删除并避免 DoEvents()。
2.  或使您的**所有**事件处理程序能够或抵抗重入。例如，仔细看看关闭按钮可能会出现哪些情况。一个简单的技巧可能是：

```
private bool busy = false;    
private void MyHandler(sender s, EventArgs e)
{
  if (busy)
    return;   // giving up, no queuing

  busy = true;
  // code
  busy = false;  // maybe in a finally clause
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T15:01:10.347

您可以使用[*MethodImplAttribute*](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.methodimplattribute.aspx)属性标记方法。

## 例子：

```
[MethodImpl(MethodImplOptions.Synchronized)]
void Method()
{
   ....
} 
```

## 文档（[MSDN](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.methodimploptions.aspx)）：

*MethodImplOptions.Synchronized*

指定该方法一次只能由一个线程执行。静态方法锁定类型，而实例方法锁定实例。只有一个线程可以在任何实例函数中执行，并且只有一个线程可以在任何类的静态函数中执行。

# php - 如何在 PHP 中应用接口和抽象

> ID：10767218
> 
> 赞同：1
> 
> 时间：2012-05-26T14:50:59.840
> 
> 标签：php, oop, interface

所以我已经理解了接口和抽象在 PHP 中是如何工作的，例如，如果它只是设置一个指南并要求实现的对象具有某些方法，我只是没有看到有一个接口的意义。特别是因为接口甚至没有被实例化。

这也与抽象有关，我只是不能将它应用到我的代码中并将其视为一件很棒的事情。当我试图创建更大规模的对象以相互交互以找出接口时，每个类最终都会来回传递信息，但从来没有触及接口。

所以我要问的是你们是否有任何建议或指向外部资源的链接，可以很好地解释这种事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:27:14.387

我可以给你一个尽可能简单的例子。

假设您想要一个允许您的网站使用 Facebook/Twitter 登录的功能

```
# here's your interface/abstract class
interface Auth_Adapter {
    public function auth();
}

# now your Facebook
class Auth_Adapter_Facebook implements Auth_Adapter {
    public function login() {
        # include facebook-sdk and auth
    }
}

# Twitter
class Auth_Adapter_Twitter implements Auth_Adapter {
    public function login() {
        # include twitter-oauth and auth
    }
} 
```

想象一下，当有人尝试使用 Facebook/Twitter 时，他们可以简单地调用

```
$adapter = new Auth_Adapter_Facebook; 
$adapter->login();

$adapter = new Auth_Adapter_Twitter; 
$adapter->login(); 
```

如您所见，两个适配器使用相同的`login`接口。如果将来您必须包含“Pinterest”登录，会发生什么？只要您实现相同的接口，您的代码仍然可以工作。

**编辑：**更多解释

这就是你必须使用的原因`interface or abstract`

```
# I use `type-hinting` here. So I can ensure that only object that implements `Auth_Adapter` will allow. Without this implementation someone might pass some other object that doesn't have `login` method in. But in our case we don't have to worry about that.
public function perform_login(Auth_Adapter $adapter) {

    $adapter->login();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:32:36.063

这是一个简单的例子。创建接口和抽象类允许您确保对象符合通用 API。请参见下面的示例。

```
interface iCar
{
    function drive();
}

abstract class Car implements iCar
{
    public $make = 'Generic';

    public function drive()
    {
        printf("I'm driving in my %s%s", $this->make, PHP_EOL);
    }
}

class FordTruck extends Car
{
    public $make = "Ford";
}

class Porsche extends Car
{
    public $make = 'Porsche';
    public function drive()
    {
        printf("I'm speeding around in my %s%s", $this->make, PHP_EOL);
    }
}

class Yugo extends Car
{
    public $make = 'Yugo';

    public function drive()
    {
        printf("I'm pushing my %s around town%s", $this->make, PHP_EOL);
    }
}

function drive(iCar $car)
{
    $car->drive();
}

$car1 = new FordTruck;
$car2 = new Porsche;
$car3 = new Yugo;

drive($car1);
drive($car2);
drive($car3); 
```

即使你没有在`drive()`函数上指定输入参数的类型，你也可以检查输入是否是`instanceof`一个 iCar

```
function drive($car)
{
    if ($car instanceof iCar)
        $car->drive();
} 
```

另一个例子是在你的应用程序中构建一个缓存接口。您可以指定所有缓存引擎都支持相同的方法来读取/写入/使缓存中的对象无效，而无需了解（或关心）特定缓存引擎的实际实现。

# java - 如何从类文件中获取 java.net.URLConnection 或 Hashtable？

> ID：10767220
> 
> 赞同：0
> 
> 时间：2012-05-26T14:51:11.857
> 
> 标签：java, class, url, import

如何从导入列表中获取类，或者在哪里可以找到导入的类文件。例如

```
import game.sprites.PlayerSprite;
import java.applet.Applet;
import java.awt.*;
import java.io.*;
import java.net.URL;
import java.util.Vector;
import litecom.Trace;
import litecom.gfxe.LoaderTarget2;
import litecom.gfxe.Timer;
import litecom.scoreclient2.ScoreClient2; 
```

任何想法如何获得这些java。文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:05:01.063

你没有。导入语句不会保留在字节码中。当您将 Java 源代码编译为类文件（字节码）时，编译器会插入所引用类的完全限定名称。

# xml - 如何修复此 XSLT 以将此 XML 节点分组为具有特定属性的父节点？

> ID：10767225
> 
> 赞同：1
> 
> 时间：2012-05-26T14:52:02.877
> 
> 标签：xml, xslt

我需要将此节点合并在一起，但它必须与具有属性的父节点合并`method="a"`

输入：

```
<myroot>
    <elem name="a" creationDate="">
        <list id="xxx" ver="uu">
            <nodeA id="a">
                <fruit id="small">
                    <orange id="x" method="create">                       
                        <color>Orange</color>                                               
                    </orange>
                </fruit>     
                <fruit id="small" method="a">
                    <kiwi id="y" method="create">                        
                        <color>Red</color>
                        <type>sour</type>                       
                    </kiwi>                    
                </fruit>
                <fruit id="large" method="a">
                    <melon id="y" method="create">
                        <attributes>
                            <color>Green</color>
                            <type>sweet</type>
                        </attributes>
                    </melon>                    
                </fruit>
            </nodeA>
        </list>
    </elem>
</myroot> 
```

我的 XSL 文件：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* , node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="list">
        <xsl:copy>
            <xsl:copy-of select="@*"/>
            <xsl:for-each-group select="/*/*/*/*" group-by="@id">
                <xsl:copy>
                    <xsl:copy-of select="@*"/>
                    <xsl:for-each-group select="current-group()/*" group-by="concat(local-name(), '|', @id)">
                        <xsl:copy>
                            <xsl:apply-templates select="@*, *, (current-group() except .)/*"/>
                        </xsl:copy>
                    </xsl:for-each-group>
                </xsl:copy>
            </xsl:for-each-group>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

**我的输出：**

```
<myroot>
    <elem name="a" creationDate="">
        <list id="xxx" ver="uu">
            <nodeA id="a">
                <fruit id="small">            
                    <orange id="x" method="create">                       
                        <color>Orange</color>                                               
                    </orange>
                    <kiwi id="y" method="create">                        
                        <color>Red</color>
                        <type>sour</type>                       
                    </kiwi>                    
                </fruit>     

                <fruit id="large" method="a">
                    <melon id="y" method="create">
                        <attributes>
                            <color>Green</color>
                            <type>sweet</type>
                        </attributes>
                    </melon>                    
                </fruit>
            </nodeA>
        </list>
    </elem>
</myroot> 
```

**预期输出：**

```
<myroot>
    <elem name="a" creationDate="">
        <list id="xxx" ver="uu">
            <nodeA id="a">
                <fruit id="small" method="a"> <!-- this is the correct merge where the merged is in parent that has a method -->
                    <kiwi id="y" method="create">                        
                        <color>Red</color>
                        <type>sour</type>                       
                    </kiwi>
                    <orange id="x" method="create">                       
                        <color>Orange</color>                                               
                    </orange>
                </fruit>     

                <fruit id="large" method="a">
                    <melon id="y" method="create">
                        <attributes>
                            <color>Green</color>
                            <type>sweet</type>
                        </attributes>
                    </melon>                    
                </fruit>
            </nodeA>
        </list>
    </elem>
</myroot> 
```

正如我们所看到的，我的转换只是将它结合在一起，并没有考虑方法。如何更改它以便将其合并到`method="a"`示例中的父级`<fruit id="small" method="a">`

谢谢你。约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:04:49.490

在一个`<xsl:for-each-group>`元素中，上下文项只是组的第一个元素，因此`select="@*"`将只复制第一个元素的属性。要获取任何元素中所有不同名称属性的副本，您需要访问`current-group()/@*`.

也没有必要，`select="*, (current-group() except .)/*"`因为它相当于`select="current-group()/*"`.

完整的样式表如下所示

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">

  <xsl:output method="xml" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@*, node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="list">
    <xsl:copy>
      <xsl:copy-of select="@*" />
      <xsl:apply-templates select="*" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="list/*">

      <xsl:copy>

        <xsl:copy-of select="@*" />

        <xsl:for-each-group select="*" group-by="concat(local-name(), '|', @id)">
          <xsl:copy>
            <xsl:copy-of select="current-group()/@*" />
            <xsl:copy-of select="current-group()/*" />
          </xsl:copy>
        </xsl:for-each-group>

      </xsl:copy>

  </xsl:template>

</xsl:stylesheet> 
```

# php - 两个 WHERE 语句

> ID：10767227
> 
> 赞同：1
> 
> 时间：2012-05-26T14:52:07.800
> 
> 标签：php, mysql

> **可能重复：**
> [警告：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果](https://stackoverflow.com/questions/795746/warning-mysql-fetch-array-supplied-argument-is-not-a-valid-mysql-result)

我已经进行了搜索，但找不到任何可以特别帮助我的东西。

我希望你能帮忙。

我想执行一个 MySQL 查询，该查询在表中搜索满足两个条件的条目（类型 = 绿色 AND on = 是）

我收到：警告：mysql_fetch_array()：提供的参数不是第 36 行 /link/to/my/file.php 中的有效 MySQL 结果资源

这是代码的摘录（第 36 行）：

```
`$green = "SELECT * FROM homepage_vars WHERE type = 'green' AND on = 'yes'";
 $green = mysql_query($green);
 $green = mysql_fetch_array($green);` 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T14:56:45.420

`ON`是[MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。如果将其用作列或表标识符，则需要将其括在反引号中：

```
SELECT * FROM homepage_vars WHERE type = 'green' AND `on` = 'yes' 
```

更正查询语法后，您将遇到另一个问题。您已多次覆盖该变量`$green`。最初，它保存您的查询 SQL，但随后用于查询结果资源。没关系，但是你会用获取的行覆盖它，`mysql_fetch_array()`它的内容将是一个数组或`FALSE`. `$green`由于不再是结果资源，后续获取行的尝试将失败。

在尝试获取行之前始终测试查询是否成功。调用`mysql_error()`以查看 MySQL 服务器报告的错误，这将指向'on或类似*内容附近的无效语法。*

```
$green = "SELECT * FROM homepage_vars WHERE type = 'green' AND on = 'yes'"; 
$query = mysql_query($green); 
if ($query) {
  // Don't overwrite your query resource!
  // Use a new variable!
  $row = mysql_fetch_array($query);
}
else {
  // Failure!
  echo mysql_error();
} 
```

# javascript - node.js 中的 setTimeout - javascript

> ID：10767228
> 
> 赞同：0
> 
> 时间：2012-05-26T14:52:13.833
> 
> 标签：javascript, node.js, express, settimeout, pug

在这里，我有一个总和 3 个数字 i+j+k 的代码，但我想知道如何配置服务器文件以使用 setTimeout 函数......有一些限制吗？

所以，这是我的代码：

索引.jade

```
!!! 5
html
  head
    title Test
  body
    form(name='form1', method='post', action='')
      label(for='1')
      input#1(type='text', name='1')
      label(for='2')
      input#2(type='text', name='2')
      label(for='3')
      input#3(type='text', name='3')
      input(name='submit', type='button', value='submit') 
    span #{result} 
```

应用程序.js

```
var express = require('express');
        app = express.createServer();

app.configure(function(){
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.set("view options", { layout: false });
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(app.router);
    app.use(express.static(__dirname + '/public'));
});
app.use(express.bodyParser());
    app.get('/', function(req, res){
        var result;
    res.render('index', {result: ''});
});

    app.post('/', function(req, res){
      var i = req.param('1', 0);
      i = parseInt(i);
      var j = req.param('2', 0);
          j = parseInt(j);

      var k = req.param('3', 0);
         k = parseInt(k);

      var r = i+j+k;
      res.render('index', {result:r});

    });
app.listen(3010); 
```

如何阻止用户操作（单击、双击、右键单击）并在前 5 秒内向他显示带有文本“您可以执行任何操作”的 div，之后用户可以执行操作但 60 秒后再次无法执行任何操作...我可以用 setTimout 函数或如何做到这一点？？？

对不起我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:16:01.140

您不能在服务器端执行此操作。您必须插入阻止交互并在 5 秒后再次解除阻止的客户端 javascript。

在客户端执行此操作的代码如下所示：

```
// this code should be executed when the client receives a message from the server.
var overlay = document.getElementById("your-element-id");
overlay.style.visibility = "visible";

window.setTimeout(function () {
    overlay.style.visibility = "hidden";
}, 5000); 
```

您应该采取以下步骤来实现您想要
的： 1\. 用户加载页面。
2\. 用户从服务器收到一条消息，说明他正在同步
3\. 然后在指定时间后或服务器收到另一条消息后，您解除对用户的阻止
4\. 最后开始游戏

# vim - 执行有困难 自动在 vim 中存储的映射中

> ID：10767231
> 
> 赞同：0
> 
> 时间：2012-05-26T14:52:27.240
> 
> 标签：vim, keyboard, hotkeys

我阅读[了这个堆栈线程](https://stackoverflow.com/questions/764569/vim-key-map)，了解如何在 vim 中永久保存映射。我去`/etc/vim/vimrc`并`:map ,k :!python % <enter>`在文件的第一行添加了。当我用 vim 打开一个新的 python 文件时，命令`:!python % <enter>`会在屏幕底部显示。但它不会自动执行。如何修复此命令以自动执行“输入”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:42:24.247

我认为您宁愿使用本地版本`~/.vimrc`进行本地设置，也不愿在文件中编辑全局设置`/etc/vim/vimrc`。在那里你可以添加：

```
let maplocalleader=","
map <localleader>k :!python %<cr> 
```

我建议不要`^M`按照 ZyX 评论中解释的方式使用 ghoti 的答案，[请参阅](https://stackoverflow.com/questions/10766033/how-to-run-a-shell-command-through-vimscript)

**编辑**

ZyX 的评论让我将上面的代码更改为

```
filetype plugin on
augroup ft_python
    au!
    au FileType python nnoremap ,k :!python %<cr>
augroup END 
```

它`,k`不会弄乱其他东西

*   `filetype plugin on`表示如果文件具有某种文件类型，我们希望完成一些事情 - 在我们的例子中是 python
*   `augroup ft_python`说我想要一组带有该组名的自动命令：=“打开文件时调用的命令”
*   `au!`删除所有自动命令
*   `au Filetype python``au`为所有 python 类型的文件声明一个 autocommand=
*   `augroup END`离开组 ft_python 并返回常规设置

所以这使得`,k`在 python 中充当“编译”成为可能，但是当我不小心按下`,k`另一个文件说 c 源代码时，它什么也不做（或者我告诉`,k`我的 . vimrc).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:00:13.767

`:map :!python % <enter>`我一直在寻找的答案是粘贴`~/.vimrc`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T15:21:04.103

改为输入文字回车符 - 按 Ctrl + V，然后在编写地图时按 Enter：

```
:map ,k :!python %^M 
```

您将看到`^M`在键入序列 Ctrl + V 后显示回车，然后按回车键。

该 Ctrl + V 键告诉 vim 插入您键入的下一个字符。

# ios - 带有阴影背景颜色的 UIButton？

> ID：10767232
> 
> 赞同：0
> 
> 时间：2012-05-26T14:52:56.800
> 
> 标签：ios, uibutton

我想创建一个看起来像 iPhone 的删除联系人按钮的按钮。如果可能的话，我的按钮会是蓝色的。任何人都知道如何简单地做到这一点？

![http://www.libellules.ch/images/delete_contact_iphone4.png](../Images/39c7e15c308a9153c634d10c1e945b75.png)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:00:36.970

最简单的方法是为背景创建一个 png 并使用：

为一个`UIBarButtonItem`

```
[self.myBarButtonItem setBackgroundImage: [UIImage imageNamed: myimage] forState: UICOntrolStateNormal barMetrics: UIBarMetricsDefault] 
```

或对于`UIButton`

```
[self.myButton setBackgroundImage: [UIImage imageNamed: myimage] forState: UICOntrolStateNormal] 
```

# c - C 风格的断言处理程序

> ID：10767235
> 
> 赞同：2
> 
> 时间：2012-05-26T14:53:29.593
> 
> 标签：c, assert, assertions

有几种方法可以在复杂软件中进行动态检查：

1.  assert.h 实现`assert( expression_that_must_be_true );`
2.  Linux内核风格：

    ```
    if (in_interrupt())
            BUG(); 
    ```

如果检查条件的值与预期不符，则调用一些错误处理程序。

例如：

```
#define BUG( ) \
{ \
 printf("BUG found (function %s file %s line %d)\n", __FUNCTION__, \
                    __FILE__, __LINE__); \
 exit(1); \
} 
```

即使在这个最简单的错误处理实现中，也可以隐藏一些错误（因为“没有没有错误的程序”）。此错误可能导致此错误处理程序的递归调用（例如，来自 printf）。如果仍然存在错误条件，则会一次又一次地调用错误处理程序，直到堆栈溢出。在最坏的情况下，开发人员甚至不会看到任何消息（例如，如果 bug 在 printf 的开头）。

问题是：在错误处理程序中避免递归调用，同时仍然获得一些调试信息的好技术是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T03:51:36.217

将全局变量初始化为最大深度以避免递归调用。

调试.c

```
unsigned Debug_MaxDepth = 5; 
```

调试.h

```
#define BUG( ) \
{ \
  if (Debug_MaxDepth > 0) { \
    Debug_MaxDepth--; 
    printf("BUG found ...\n"); \
  } \
exit(1); \
} 
```

# php - 这是一个 PHP 错误（“假”== 0）吗？

> ID：10767236
> 
> 赞同：0
> 
> 时间：2012-05-26T14:53:31.060
> 
> 标签：php

```
if ("false" == 0) echo "true\n";
// => true 
```

虽然 PHP 文档说：

```
var_dump((bool) "false");   // bool(true) 
```

如果是错误，我可以在哪里提交？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T14:56:07.817

不，不是错误。不要费心去归档。

这种看似矛盾的行为与“假”二字无关。它与只包含字母且没有数字数字的字符串有关，因此当它被转换为整数进行比较 ( `== 0`) 时，结果为 0，从而`0 == 0`计算结果为真。

如果您将任何其他字母字符串与 0 进行比较，您将得到相同的结果：

```
"abcd" == 0
"a" == 0
"true" == 0 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-26T14:56:40.460

这不是一个错误，在比较不同数据类型的值时，它是一个有据可查的特性——在这种情况下，是字符串到整数。PHP 将字符串转换为整数进行比较，“false”转换为 0。

请参阅[手册](http://www.php.net/manual/en/language.operators.comparison.php)：

> 如果将数字与字符串进行比较或比较涉及数字字符串，则每个字符串都将转换为数字并以数字方式执行比较。

和这个关于[字符串到数字转换的页面](http://www.php.net/manual/en/language.types.string.php#language.types.string.conversion)

> 如果字符串以有效的数字数据开头，这将是使用的值。否则，该值将为 0（零）。

要避免这种行为，请使用严格类型的比较：

```
if ("false" === 0) echo "true\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T15:05:02.343

问题是 PHP 会强制转换变量，除非您使用严格的比较。正如其他人提到的，字符串`"false"`被转换为整数。

如果您想在不进行类型转换的情况下进行比较，请使用：

```
"false" === 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T18:23:11.500

这可能会有所帮助：这些是 PHP 认为错误的唯一事情：

*   实际布尔值 false*   NULL 值（空）*   整数 0

尽量避免文本的字符串比较并坚持使用布尔值！

# jquery - 如何使用 jQuery 重定向 Google 等页面中的外部链接？

> ID：10767241
> 
> 赞同：0
> 
> 时间：2012-05-26T14:54:43.273
> 
> 标签：jquery

我想为我页面上的每个外部链接（例如 Google）进行重定向

当您悬停链接时，它会显示真实的链接，但是当您单击它时，它会变成重定向页面。

请帮忙！！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:03:04.237

You simply have to use an event listener for the click on the link and change it's `href` attribute.

If you only want to do it for external links, it gets a bit more complicated. This example redirects all links beginning with `http`:

```
var redirect = 'http://redirect.foo?url=';
$('a[href^="http"]').on('click', function(e){
    $(this).attr('href',  redirect + $(this).attr('href'));
}); 
```

jsFiddle: [http://jsfiddle.net/aev4m/1/](http://jsfiddle.net/aev4m/1/)

However, please don't use this for bad things. It's not userfriendly at all in my opinion.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T15:12:49.627

```
$("a[href]").click(function() { window.location.href = "MyRedirectURL" + $(this).attr("href"); return false;} ); 
```

*Added*: only for external links

```
$("a[href]").each(function()
{
    if (this.hostname != location.hostname)
        $(this).click(function()
        {
            location.href = "MyRedirectURL" + $(this).attr("href");
            return false;
        });
}); 
```

# c - 使用管道向子进程发送多个字符串

> ID：10767242
> 
> 赞同：2
> 
> 时间：2012-05-26T14:54:50.827
> 
> 标签：c, linux, fork, pipe

我在 Linux 中有一个任务，但我无法让它工作。

我有一个接收文本文件作为参数的程序。`fork()`然后，它使用作为参数接收的文本文件的内容逐行创建子进程并将其发送给子进程。子进程需要计算行数并将收到的行数返回给父进程。

这是我到目前为止所拥有的，但在某种程度上，子进程没有收到所有的行。对于我的测试，我使用了一个包含 9 行的文本文件。父进程以字符串形式发送了 9 行，但子进程只收到了其中的 2 或 3 行。

我究竟做错了什么？

```
#include <stdio.h>      
#include <stdlib.h>
#include <string.h>

int main(int argc, char *argv[])
{  
  char string[80];
  char readbuffer[80];
  int pid, p[2];
  FILE *fp;
  int i=0;
  if(argc != 2)
  {
    printf("Syntax: %s [file_name]\n", argv[0]);
    return 0;    
  }
  fp = fopen(argv[1], "r");
  if(!fp) 
  {    
    printf("Error: File '%s' does not exist.\n", argv[1]);
    return 0;
  }
  if(pipe(p) == -1)
  {
    printf("Error: Creating pipe failed.\n");
    exit(0);
  } 
  // creates the child process
  if((pid=fork()) == -1)
  {
   printf("Error: Child process could not be created.\n");
    exit(0);
  }  

  /* Main process */
  if (pid) 
  { 
    // close the read
    close(p[0]);    
    while(fgets(string,sizeof(string),fp) != NULL)
    {                
       write(p[1], string, (strlen(string)+1));
       printf("%s\n",string);
    } 

    // close the write
    close(p[1]);
    wait(0);
  }

  // child process
  else 
  {   
    // close the write
    close(p[1]); 

    while(read(p[0],readbuffer, sizeof(readbuffer)) != 0) 
    {
      printf("Received string: %s\n", readbuffer);    
    }

    // close the read
    close(p[0]); 
  } 
  fclose(fp);       
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T15:12:32.947

您正在将空终止符发送到另一个进程：

```
 write(p[1], string, (strlen(string)+1)); 
```

这使结果令人困惑，因为当您打印收到的内容时，您只能看到空终止符。

如果您改为这样做：

```
 write(p[1], string, strlen(string)); 
```

你应该得到你所期望的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T18:23:56.897

管道是单向的进程间通信通道。您必须创建 2 个管道，一个用于与子进程对话，另一个用于读取数据。

请记住在两个进程上关闭管道的未使用侧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T15:04:37.200

您不是在计算行数，而是在计算`read(2)`返回的次数。

使用管道时，`read(2)`将从管道中提取尽可能多的数据：`min(pipe_available, space_available)`. 它不关心换行符、`0`字节等。使其工作的简单技巧：

*   使用循环行走`readbuffer`并寻找`\n`
*   使用`fdopen`+ `fgets`（我觉得这可能有缺陷）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T15:07:06.030

查看管道的手册页（ man 2 pipe ），您正在尝试编写的程序作为示例，将其与您的进行比较:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T18:11:42.330

谢谢你的建议。这就是我现在所拥有的，它可以工作，但是如何将答案发回给父母？因为父进程需要答案。

```
if (pid) /* Main process */
  { 
    /* Close the read */
    close(p[0]);    
    while(fgets(string,sizeof(string),fp) != NULL)
    {   
    write(p[1], string, (strlen(string)));    
    }    
    /* Close the write */
    close(p[1]);
    wait(0);
    printf("\nMain process with PID=%d has terminated succesfully.\n", getpid());
   }
   else /* Child process */
   {   
     /* Close the write */
     close(p[1]);    
     while( read(p[0], readbuffer, sizeof(readbuffer)) > 0) 
     {
       int j=0;
       for(j; j<sizeof(readbuffer); j++)
       {    
       if (readbuffer[j] == '\n')
       { 
          i++;    
       }
        }  
      }
      /* Close the read */
      close(p[0]); 
      printf("\nChild process with PID=%d has terminated succesfully.\nChild process received %d lines from the parent process.\n",getpid(), i);
    } 
```

# java - 我们可以在 java 中使用同步的 run() 方法吗？

> ID：10767245
> 
> 赞同：2
> 
> 时间：2012-05-26T14:55:27.467
> 
> 标签：java, multithreading, synchronized

正如我们所知，没有任何规定可以防止多个线程`run()`使用方法调用该`start()`方法。我确实创建了两个对象`m1`，并且`m2`都调用同一个线程来运行。

`m1.start`我需要通过在第二个对象执行开始之前调用线程来确保第一个对象完成（ ）它的执行。

我的问题是为什么我不能在我创建的线程中使用`synchronized`关键字 with方法（即）？`run()``MyThread1`

我尝试在我创建的线程中使用“同步”来运行（）方法，但它给出了任意输出（换句话说`m2`，不等待`m1`完成执行）。

您可以在程序的最底部看到我得到的输出。

```
public class ExtendedThreadDemo {

    public static void main(String[] args) {    
        Mythread1 m1 =new Mythread1();
        Mythread1 m2 =new Mythread1();
        m1.start();
        m2.start();
        System.out.println(" main thread exiting ....");
    }
} 
```

### 我的线程

```
public class MyThread1 extends Thread {

    public synchronized void run() {
        for(int i=1; i<5; i++) {
            System.out.println(" inside the mythread-1 i = "+ i);
            System.out.println(" finish ");

            if (i%2 == 0) {
                try {
                    Thread.sleep(1000);
                } catch(InterruptedException e) {
                     System.out.println(" the thread has been interrupted ");
                }
            }
        }
    }
} 
```

### 输出

```
main thread exiting ....
inside the mythread-1 i = 1
finish
inside the mythread-1 i = 2
finish 
inside the mythread-1 i = 1
finish 
inside the mythread-1 i = 2
finish 
inside the mythread-1 i = 3
finish 
inside the mythread-1 i = 4
finish 
inside the mythread-1 i = 3
finish 
inside the mythread-1 i = 4
finish 
```

如您所见`i = 2`，第二个对象（即`m2.start()`）开始执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T14:58:25.053

打电话`m1.join()`前`main`先打电话`m2.start()`。

创建方法`synchronized`只会影响对*同一*对象上方法的多次调用；`m1`和`m2`是不同的对象，所以添加`synchronized`不会有任何效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T15:03:01.443

A synchronized instance method only hinder concurrent access to the same instance of the class. You would see your expected effect if the run method was static. But I do not suggest making the run method static. In fact you cannot if it is to keep its current functionality. What you should instead consider is using `m1.join()` to wait for m1 to finish. Another approach which works better if you have multiple threads which are to wait for each other is to use a [CyclicBarrier](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CyclicBarrier.html "CyclicBarrier") or a [CountDownLatch](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T15:01:12.093

此代码片段：

```
public synchronized void run() {
  //code
} 
```

在语义上等价于：

```
public void run() {
  synchronized(this) {
    //code
  }
} 
```

注意`this`参考。这意味着`synchronized`使用相同`this`引用（锁定对象）的所有块都是互斥的。`this`但是，您正在创建两个线程（对象），每个线程都在不同的引用上同步。

有几种方法可以改进您的代码：

### 只使用一个`Runnable`并创建两个线程：

```
public class Mythread1 implements Runnable //... 
```

接着：

```
Runnable r = new Mythread1();
Thread m1 = new Thread(r);
Mythread1 m2 = new Thread(r); 
```

但这只有在`Mythread1`runnable 是 statelss 时才有效，因为它将由两个线程共享。

### 使用同一个锁实例

将一些任意`lock`对象传递给两个实例，`Mythread1`然后使用：

```
synchronized(lock) {
  //code
} 
```

从 Java 5 开始，同步代码的方法要复杂得多，但这种方法适用于简单的情况。

### 利用`Thread.join()`

您可以致电：

```
m1.start();
m1.join();
m2.start(); 
```

这会成功的。

# jquery - 在 jQuery 中增长 div 的问题（相对和绝对 div）

> ID：10767248
> 
> 赞同：1
> 
> 时间：2012-05-26T14:55:48.273
> 
> 标签：jquery, css

我有一个父 div，其中包含一些随机图片，这些图片位于大约 7 个或更多的子 div 中。我的目标是在子 div 随机填充父 div 时扩展父 div。注意子 div 可以是 0 到 10 或更多。我遇到的问题是父 div 没有增长。我尝试使用 css 和 jquery，这就是我到目前为止所拥有的 jquery

```
var margin = 5;

var blocks = [];
function align() {
$('.block').each(function(i){
    var min = Array.min(blocks);
    var index = $.inArray(min, blocks);
    var posleft = margin+(index*(300+margin));
    $(this).css({
        'left':(posleft+2)+'px',
        'top':min+'px'
    });
    blocks[index] = min+$(this).outerHeight()+margin;
}); 
}

function divlayOut() {
blocks = [];
for(var i=0;i<3;i++)
{
    blocks.push(margin);
}
align();
}

Array.min = function(array) {
return Math.min.apply(Math, array);
}; 
```

html

```
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script>
<style type="text/css">
.block{
width: 250px;
float:left; 
position:absolute;
}
.parent{
width: 800px; 
float:left; 
padding:10px 0px 0px 10px;
position:relative; 
}
</style>

</head>
<body onload="align();">
<div class="parent">
<div class="block">pic1 size H 100 x W 80</div>
<div class="block">pic1 size H 80 x W 800</div>
<div class="block">pic1 size H 300 x W 100</div>
<div class="block">pic1 size H 110 x W 90</div>
</div> 
```

希望下面的图片有助于清楚我的目标是什么

![在此处输入图像描述](../Images/8a567841245aafc0c204320804ca4406.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:05:35.870

因为子块是绝对定位的，所以父块永远不会扩展。您可以使用 Jquery 手动计算父块的高度（使用 child_block_height、每行块和 block_width 参数），或者您可以使用 float:left 属性作为子块（非绝对定位）。

另一种方法是使用 inline-block 元素：[http ://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/](http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/)

我通常使用以下方式：

```
<style>
  .parent {
    overflow:hidden;
    *height:1%;
  }
  .block {
    float:left;
    width:100px;
    height:100px;
  }
</style>
<div class="parent">
  <div class="block"></div>
  <div class="block"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T15:01:18.750

你在浮动你的照片，对吧？阅读：[http ://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

花车使他们的父母“忘记了元素”，因此没有扩大。

总结：添加`overflow: auto;`到父级，如下所示：

```
.parent {overflow: auto;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T16:59:10.823

子 div**是否需要**绝对定位？

看看这个使用`float:left`和 css`clearfix`技巧的小提琴。

[http://jsfiddle.net/5FXs2/](http://jsfiddle.net/5FXs2/)

# android - Get code string in Android

> ID：10767252
> 
> 赞同：-1
> 
> 时间：2012-05-26T14:56:16.770
> 
> 标签：android

Ex: I have a project with UI contains a button.. Activity:

```
package android.tuanshaker.myproject.com;
import android.app.Activity;
import android.os.Bundle;

public class MyProjectActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}
} 
```

And file main.xml:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<Button
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

</LinearLayout> 
```

I want to display code and xml of my project by textview..How do i can to get them?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:02:37.180

Copy the xml, js code files to `res/raw`. Use [Context.getResources().openRawResource()](http://developer.android.com/reference/android/content/res/Resources.html#openRawResource%28int%29) to read them.

In addition, you can use [jHighlight](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFEQFjAA&url=http://www.ohloh.net/p/jhighlight&ei=DfHAT7bSHOyfiAf5l6iJCg&usg=AFQjCNEdk_0YIgS6V8iGfEsk5YlE_n6VuA) to [format those source codes (in a web view)](http://code.google.com/p/android-binding/source/browse/trunk/MarkupDemoV30/src/gueei/binding/markupDemov30/widget/CodeView.java).

# c# - 用于 HTML5 服务器端事件的 REST Web 服务

> ID：10767253
> 
> 赞同：0
> 
> 时间：2012-05-26T14:56:24.553
> 
> 标签：c#, web-services, html, rest

目前，我有一个 C# 控制台应用程序，该应用程序通过`WebServiceHost`网站正在使用这些 Web 服务公开 Web 服务，但现在我正在尝试将 SSE 添加到该站点。

客户端的代码是：

```
var source = new EventSource(server+'eventSource');
source.onmessage = function (event) {
  alert(event.data);
}; 
```

但是在服务器端，当我尝试定义合同时：

```
[OperationContract]
[WebGet]
String EventSource(); 
```

服务返回的服务是带有字符串的 xml。

我应该在服务器端做什么来创建可用于 SSE 的文档？

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:09:21.293

如果您有 OperationContract，则返回类型始终序列化为 XML 或可选的 JSON。如果您不希望将返回值序列化，请将其定义为 Stream。

```
[OperationContract] 
[WebGet] 
Stream EventSource(); 

// Implementation Example for returning an unserialized string.
Stream EventSource()
{
   // These 4 lines are optional but can spare you a lot of trouble ;)
   OutgoingWebResponseContext context = WebOperationContext.Current.OutgoingResponse;
   context.Headers.Clear();
   context.Headers.Add("cache-control", "no-cache");
   context.ContentType = "text/event-stream"; // change to whatever content type you want to serve.

   return new System.IO.MemoryStream(Encoding.ASCII.GetBytes("Some String you want to return without the WCF serializer interfering.")); 
} 
```

如果您自己构建流，请记住`.Seek(0, SeekOrigin.Begin);`在返回之前执行。

**编辑：** 更改命令顺序以在清除标题后设置 ContentType。否则你也会清除新设置的 ContentType ;)

# python - 防止python窗口被聚焦

> ID：10767259
> 
> 赞同：9
> 
> 时间：2012-05-26T14:57:14.933
> 
> 标签：python, windows-7, focus, subprocess

我在 Windows 7 上运行一个 Python 脚本，每隔几秒就会打开一个子进程。此子进程打开一个窗口并获取焦点，从而在脚本运行时中断用户进行正常工作的任何尝试。我没有能力修改子流程代码本身。有没有办法将 python 脚本打开的所有子进程指定为非焦点？

澄清：我需要打开窗口并且可以查看/选择，只是不要立即跳到正在发生的所有其他事情之上。换句话说，它需要在后台打开，而不是强迫自己进入前台。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T15:35:16.493

这是我最后的做法

```
# Hide the cmd prompt window
startupinfo = subprocess.STARTUPINFO()
startupinfo.dwFlags |= subprocess.STARTF_USESHOWWINDOW
startupinfo.wShowWindow = subprocess.SW_HIDE
p = subprocess.Popen(args, startupinfo=startupinfo) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T15:41:08.507

[您可以使用subprocess.call](http://docs.python.org/library/subprocess.html)运行具有各种标志的进程

此示例在没有任何 UI 的情况下执行控制台应用程序：

```
>>> import shlex, subprocess
>>> subprocess.call("C:\Windows\some_console_app.exe", shell=True) 
```

# java - 在 JFrame 上画一条线

> ID：10767265
> 
> 赞同：9
> 
> 时间：2012-05-26T14:58:18.233
> 
> 标签：java, swing, jframe, graphics2d

我正在尝试使用`Graphics`2D 绘制一条线，但随后该线出现在所有其他组件上，`JFrame`从而使它们不可见。我该如何纠正这个问题？

这是代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.geom.*;

class Success extends JFrame{

    public Success(){
        JPanel panel=new JPanel();
        getContentPane().add(panel);
        setSize(450,450);

        JButton button =new JButton("press");
        panel.add(button);
    }

    public void paint(Graphics g) {
        Graphics2D g2 = (Graphics2D) g;
        Line2D lin = new Line2D.Float(100, 100, 250, 260);
        g2.draw(lin);
    }

    public static void main(String []args){
        Success s=new Success();
        s.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T15:35:07.383

```
import javax.swing.*;
import java.awt.*;
import java.awt.geom.*;

class Success extends JFrame{

    public Success(){
        JPanel panel=new JPanel();
        getContentPane().add(panel);
        setSize(450,450);

        JButton button =new JButton("press");
        panel.add(button);
    }

    public void paint(Graphics g) {
        super.paint(g);  // fixes the immediate problem.
        Graphics2D g2 = (Graphics2D) g;
        Line2D lin = new Line2D.Float(100, 100, 250, 260);
        g2.draw(lin);
    }

    public static void main(String []args){
        Success s=new Success();
        s.setVisible(true);
    }
} 
```

## 更多提示

1.  在 EDT 上创建 GUI。有关更多详细信息，请参阅[Swing 中的并发。](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)
2.  `JPanel`按照@nIcEcOw 的建议使用 a ，覆盖`paintComponent(Graphics)`而不是`paint()`. 再次，`super`首先调用该方法。
3.  不要扩展框架，只使用一个实例。根据使用的组件所需的空间设置大小`pack()`。

# php - 使用 Android 客户端调试 PHP

> ID：10767269
> 
> 赞同：1
> 
> 时间：2012-05-26T14:59:00.013
> 
> 标签：php, debugging

我一直在开发一个服务器端运行 PHP 的 Android 应用程序。目前，我正在使用跟踪进行所有调试。

对更好的调试方法有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:29:58.167

如果你正在寻找一个真正的调试器，你可以使用[xdebug](http://xdebug.org/)。它也支持远程调试。

但是，写入文件的简单打印语句可以让您在 php.ini 中走得更远。尤其是[print_r](http://www.php.net/print_r) () 和[var_dump](http://www.php.net/var_dump) () 函数的精彩之处。

您还可以通过以下方式捕获大量输出以进行日志记录

```
ob_start();
///output stuff here
$output = ob_get_clean();
//log $output 
```

当然，打开后设置`error_reporting`一个`E_ALL`值`error_log``log_errors`

# javascript - 如何在 JSON 字符串中传递“this”，然后需要将其转换为 JS Obj

> ID：10767271
> 
> 赞同：1
> 
> 时间：2012-05-26T14:59:12.963
> 
> 标签：javascript, jquery, html

我正在构建一个小型 JS 方法，我将`data-*`attrs 附加到链接，将事件绑定到链接并将`data-*`值发送到第 3 方 JS 分析 API。

```
<a href="#" class="js-analytics-proxy" data-trackme='{"obj": this, "rmethod": "track", "partial-path": "/foo/bar" }' 
```

在一个 JS 文件中

```
$('js-analytics-proxy').live('click', function() { 
    3rdParty.webTrack('site1', 'foo', $(this).data('trackme'));
}); 
```

问题是：

1.  默认情况下，`$(this).data('trackme')`将返回一个`String`
2.  如果我`$.parseJSON(..)`这样做，它将失败，因为`"obj": this`它不是 JSON 字符串表示法中的有效键/值对。
3.  无论如何，当传递“思想” `data-*`attr 时，只传递 JS obj 名称的 String 表示形式。

我确实意识到这`data-*`是针对“数据”的，可争论`this`的不是数据，而是代码，所以它一开始就不属于它。另外，我想避免将 obj: this key/val 对“硬编码”到我的 JS 类中（基本上将其从 data-* attr 中取出，并尽可能将其添加到 JS 方法中的 args 中。

* * *

更新 1：我使用它是因为 3rdParty JS 库需要它。目前的实施有

```
onclick='3rdParty.webTrack("site1", "foo", {"obj": this, "rmethod": "track", "partial-path": "/foo/bar" }' 
```

*到处都是*标记。我们正在寻找一种不那么突兀的方法。有时还有其他键/值对也传递其他 JS 对象。obj：这是一个说明问题的孤立示例

* * *

更新 2：这似乎很危险，但我可以创建一个约定，其中以“js:”为前缀的属性将具有其字符串值 eval'd。`{ "js:obj": "this" }`当然，这会转化为`{ "obj": this ...`使用 eval 的所有危险，这是我想不惜一切代价避免的事情。

我也可以简单地将“this”的任何字符串值更改为当前范围`this`，这将不那么危险，但 IMO 不是很优雅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:09:38.797

[`jQuery.data()` can store objects](http://jsfiddle.net/WrAzw/). Assign them using `data()` so jQuery can store them as objects. Also, retrieve them using `data()` as well.

```
//assign them via data()
$(element).data('trackme',{
    data : 'foo'
    ...
});

//retrieve them using data()
$(element).data('trackme'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T15:17:10.030

当您将单击绑定到事件时，您可以获取对的引用`this`并将其添加到您尝试传递的对象中，可能使用如下内容：

```
$('js-analytics-proxy').live('click', function() { 
    3rdParty.webTrack('site1', 'foo', $.extend(
        $.parseJSON($(this).data('trackme')), 
        { 'obj' : this }
    );
}); 
```

显然，您还将从元素的属性中删除该`"obj": this`部分。`data-trackme``a`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T15:14:39.517

只需删除`"obj": this`，它不是 json 并且不会工作。

之后，它将成为合法的 json 并且以下内容将起作用，因为它`ThirdParty.webTrack`实际上需要一个 DOM 元素：

```
$('js-analytics-proxy').live('click', function() {
    var data = $.parseJSON( $(this).data( "trackme" ) );
    data.obj = this;
    ThirdParty.webTrack('site1', 'foo', data);
}); 
```

# java - Java SWT 添加的标签不可见

> ID：10767275
> 
> 赞同：0
> 
> 时间：2012-05-26T14:59:52.393
> 
> 标签：java, caching, swt, visible

我是 SWT 的新手，目前正在努力使`Label`实例可见。目前，我需要手动调整窗口大小以使其显示。我在 SO 上发现了一个类似的[问题](https://stackoverflow.com/questions/6221728/java-swt-text-control-not-showing-until-shell-resize)，提到了 SWT 的缓存。所以我尝试了建议的调用，`shell.layout();`但它对我不起作用。这是我的代码：

```
public class SimpleTextEditorCount {
private Display display = new Display();
private Shell shell = new Shell(this.display);
private StyledText styledText;
private boolean unsaved;
private File file;
private String lastDirectory;
private Label status;

public SimpleTextEditorCount() {
    this.shell.setLayout(new GridLayout());
    this.createMenuBar();
    this.styledText = new StyledText(this.shell, SWT.MULTI | SWT.WRAP
            | SWT.BORDER | SWT.H_SCROLL | SWT.V_SCROLL);
    this.styledText.setLayoutData(new GridData(GridData.FILL_BOTH));
    final Font font = new Font(this.shell.getDisplay(), "Book Antiqua", 12,
            SWT.NORMAL);
    this.styledText.setFont(font);
    this.styledText.addModifyListener(new ModifyListener() {
        @Override
        public void modifyText(ModifyEvent e) {
            unsaved = true;
        }
    });
    this.shell.setText("Editor");
    this.shell.setSize(400, 300);
    this.createCount();
    this.shell.open();
    while (!this.shell.isDisposed()) {
        if (!this.display.readAndDispatch()) {
            this.display.sleep();
        }
    }
    this.display.dispose();
}

private void createMenuBar() { 
    // Create the File top-level menu
    Menu menu = new Menu(this.shell, SWT.BAR);      
    MenuItem open = new MenuItem(menu, SWT.CASCADE);
    open.setText("File");

    Menu dropMenu = new Menu(this.shell, SWT.DROP_DOWN);
    open.setMenu(dropMenu); 

    // File->Open
    open = new MenuItem(dropMenu, SWT.NULL);
    open.setText("Open...\tCtrl+O");
    open.setAccelerator(SWT.CTRL + 'O');
    open.addSelectionListener(new SelectionAdapter() {
        @Override
        public void widgetSelected(SelectionEvent event) {
            loadText();
        }
    });

    // File->Save
    MenuItem save = new MenuItem(dropMenu, SWT.NULL);
    save.setText("Save\tCtrl+S");
    save.setAccelerator(SWT.CTRL + 'S');
    save.addSelectionListener(new SelectionAdapter() {
        @Override
        public void widgetSelected(SelectionEvent event) {
            saveText();
        }
    });

    // File->Save As
    MenuItem saveAs = new MenuItem(dropMenu, SWT.NULL);
    saveAs.setText("Save As...");
    saveAs.addSelectionListener(new SelectionAdapter() {
        @Override
        public void widgetSelected(SelectionEvent event) {
            System.err.println("NEEDS TO BE IMPLEMENTED");
        }
    });

    // File->Exit
    MenuItem exit = new MenuItem(dropMenu, SWT.SEPARATOR); 
    exit = new MenuItem(dropMenu, SWT.NULL);
    exit.setText("Exit\tAlt+F4");
    exit.addSelectionListener(new SelectionAdapter() {
        @Override
        public void widgetSelected(SelectionEvent event) {
            if (saveChanges()) {
                shell.dispose();
            }
        }
    });

    // Create Edit
    MenuItem edit = new MenuItem(menu, SWT.CASCADE);
    edit.setText("Edit");
    dropMenu = new Menu(shell, SWT.DROP_DOWN);
    edit.setMenu(dropMenu); // Create Edit->Cut
    edit = new MenuItem(dropMenu, SWT.NULL);
    edit.setText("Cut\tCtrl+X");
    edit.setAccelerator(SWT.CTRL + 'X');
    edit.addSelectionListener(new SelectionAdapter() {
        @Override
        public void widgetSelected(SelectionEvent event) {
            styledText.cut();
        }
    });

    // Create Edit->Copy
    MenuItem copy = new MenuItem(dropMenu, SWT.NULL);
    copy.setText("Copy\tCtrl+C");
    copy.setAccelerator(SWT.CTRL + 'C');
    copy.addSelectionListener(new SelectionAdapter() {
        @Override
        public void widgetSelected(SelectionEvent event) {
            styledText.copy();
        }
    });

    // Create Edit->Paste
    MenuItem paste = new MenuItem(dropMenu, SWT.NULL);
    paste.setText("Paste\tCtrl+V");
    paste.setAccelerator(SWT.CTRL + 'V');
    paste.addSelectionListener(new SelectionAdapter() {
        @Override
        public void widgetSelected(SelectionEvent event) {
            styledText.paste();
        }
    });

    // Create Select All
    MenuItem selectAll = new MenuItem(dropMenu, SWT.SEPARATOR); 
    selectAll = new MenuItem(dropMenu, SWT.NULL);
    selectAll.setText("Select All\tCtrl+A");
    selectAll.setAccelerator(SWT.CTRL + 'A');
    selectAll.addSelectionListener(new SelectionAdapter() {
        @Override
        public void widgetSelected(SelectionEvent event) {
            System.err.println("NEEDS TO BE IMPLEMENTED");
        }
    });

    MenuItem undo = new MenuItem(dropMenu, SWT.SEPARATOR); // Create Undo
    undo = new MenuItem(dropMenu, SWT.NULL);
    undo.setText("Undo\tCtrl+Z");
    undo.setAccelerator(SWT.CTRL + 'Z');
    undo.addSelectionListener(new SelectionAdapter() {
        @Override
        public void widgetSelected(SelectionEvent event) {
            System.err.println("NEEDS TO BE IMPLEMENTED");
        }
    });

    // Create Help
    MenuItem help = new MenuItem(menu, SWT.CASCADE);
    help.setText("Help");
    dropMenu = new Menu(shell, SWT.DROP_DOWN);
    help.setMenu(dropMenu); // Create Help->About
    help = new MenuItem(dropMenu, SWT.NULL);
    help.setText("About");
    help.addSelectionListener(new SelectionAdapter() {
        @Override
        public void widgetSelected(SelectionEvent event) {
            System.err.println("NEEDS TO BE IMPLEMENTED");
        }
    });
    this.shell.setMenuBar(menu);
}

public void createCount() {
    this.status = new Label(this.shell, SWT.BORDER);
    this.status.setText("test");
    this.status.setLayoutData(new GridData(GridData.FILL,
            GridData.BEGINNING, true, false, 2, 1));
    this.shell.layout();
    styledText.addModifyListener(new ModifyListener() {
        @Override
        public void modifyText(ModifyEvent arg0) {
            updateStatus();
        }
    });
    styledText.addKeyListener(new KeyListener() {
        @Override
        public void keyReleased(KeyEvent arg0) {
        }

        @Override
        public void keyPressed(KeyEvent arg0) {
            updateStatus();
        }
    });
}

private void updateStatus() {
    StringBuffer buf = new StringBuffer();
    buf.append("Offset: ");
    buf.append(this.styledText.getCaretOffset());
    buf.append("\tChars: ");
    buf.append(this.styledText.getCharCount());
    buf.append("\tLine: ");
    buf.append(this.styledText.getLineAtOffset(this.styledText
            .getCaretOffset()) + 1);
    buf.append(" of ");
    buf.append(this.styledText.getLineCount());
    this.status.setText(buf.toString());
}

boolean saveChanges() {
    if (!this.unsaved) {
        return true;
    }
    final MessageBox box = new MessageBox(this.shell, SWT.ICON_WARNING
            | SWT.YES | SWT.NO | SWT.CANCEL);
    box.setMessage("save changes? ");
    box.setText("Editor");
    final int condition = box.open();
    if (condition == SWT.YES) {
        return this.saveText();
    } else if (condition == SWT.NO) {
        return true;
    } else {
        return false;
    }
}

boolean loadText() {
    final FileDialog dialog = new FileDialog(this.shell, SWT.OPEN);
    if (this.lastDirectory != null) {
        dialog.setFilterPath(this.lastDirectory);
    }
    final String selectedFile = dialog.open();
    if (selectedFile == null) {
        System.out.println("File is not opened");
        return false;
    }
    this.file = new File(selectedFile);
    this.lastDirectory = this.file.getParent();

    try {
        final BufferedReader reader = new BufferedReader(new FileReader(
                this.file));
        final StringBuffer buffer = new StringBuffer();
        String line = null;
        while ((line = reader.readLine()) != null) {
            buffer.append(line);
            buffer.append("\r\n");
        }
        this.styledText.setText(buffer.toString());
        return true;
    } catch (final IOException e) {
    }
    return false;
}

boolean saveText() {
    if (this.file == null) {
        final FileDialog fileDialog = new FileDialog(this.shell, SWT.SAVE);
        if (this.lastDirectory != null) {
            fileDialog.setFilterPath(this.lastDirectory);
        }
        final String selectedFile = fileDialog.open();
        if (selectedFile == null) {
            System.out.println("File is not saved");
            return false;
        }
        this.file = new File(selectedFile);
        this.lastDirectory = this.file.getParent();
    }
    try {
        final FileWriter writer = new FileWriter(this.file);
        writer.write(this.styledText.getText());
        writer.close();
        this.unsaved = false;
        return true;
    } catch (final IOException e) {
    }
    return false;
}

public static void main(String[] args) {
    new SimpleTextEditorCount();
} 
```

}

你有什么建议吗？谢谢！

**编辑：**我用整个文件替换了代码片段。我发现奇怪的行为似乎是由菜单栏触发的。如果我在构造函数中注释掉`this.createMenuBar();`创建，标签将被正确可视化（由`createCount()`方法创建）。

**编辑：**我无法找到正确的解决方案。所以我`pack()`在打开窗口后添加了一个调用来强制调整大小。以下是我对构造函数所做的更改：

```
//... code 
this.shell.setSize(400, 300);
this.shell.open();
this.shell.pack();
this.shell.setSize(400, 300);
while (!this.shell.isDisposed()) {
    if (!this.display.readAndDispatch()) {
        this.display.sleep();
    }
}
// ... further code 
```

我在没有添加包和调整大小调用的情况下制作了屏幕截图。![标签不可见。](../Images/2597e1c5c9e081c625d95ff1d2d49700.png)

并添加了两行：

![在此处输入图像描述](../Images/881bfed2a23ec2ae1fff96d44fa44c55.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:14:28.337

我认为这不一定与缓存有关。检查以下内容：

1.  在 shell 上设置正确的布局管理器
2.  在小部件上设置错误的 GridData。
3.  你说的不是很具体。假设您构建布局，打开外壳并且标签不可见，则可能是您设置的窗口尺寸过小。也许一个简单的调用`shell.pack()`可以解决问题？

# python - Django 模板和 HTML 框架集

> ID：10767279
> 
> 赞同：1
> 
> 时间：2012-05-26T15:00:29.307
> 
> 标签：python, django-templates

我有一个关于 django 模板和 html 框架集的问题。

我想在我的网站上创建三个框架，一个页眉、页脚和内容页面。我希望页眉和页脚对于每个视图都是持久的，并且内容页面可以更改以反映来自标题或内容页面上链接内的内容选择。我有将驻留在内容页面上的 django 模型。

有没有使用模板和框架网站的好例子？或者甚至更好的框架集生成器，我可以翻译成 django 模板页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:30:20.723

你真的要使用框架吗？大多数人制作的网站都有页眉和页脚，但它们都在一个页面中。您可以在 django 中使用[模板继承](https://docs.djangoproject.com/en/dev/topics/templates/#template-inheritance)来执行此操作，这是一个非常酷的功能，一旦您了解了它，它就会避免您重复 HTML 布局。

如果您确实想制作框架，请为每个框架制作一个视图（或使用静态文件）。 [框架只是 HTML](http://www.quackit.com/html/examples/frames/)，非常简单。

# c# - 动态创建 Func<> - Lambda 与表达式树

> ID：10767283
> 
> 赞同：5
> 
> 时间：2012-05-26T15:00:53.713
> 
> 标签：c#, .net, c#-4.0, lambda, expression-trees

这是一些返回线性函数（y=ax+b）的代码。

```
public static Func<double, double> LinearFunc(double slope, double offset)
{
    return d => d * slope + offset;
} 
```

我可以用表达式树做同样的事情，但我不确定这是否值得。

我知道 lambda 会捕获参数，这是一个缺点。还有其他我不知道的优点/缺点吗？

我的主要问题是，在这种情况下使用表达式树是否值得？为什么或者为什么不？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T15:13:56.707

如果您在编译时知道代码，我几乎肯定会使用 lambda 表达式。捕获参数（而不是表示为常量）这一事实几乎总是无关紧要的 - 为了证明构建表达式树的合理性，您必须*证明*它很重要。

表达式树在以下情况下更适用：

*   您想从不同的表达式*位动态构建它们*
*   您想将表达式树分析为*数据*，例如作为 LINQ 提供程序

如果不是这样，使用 lambda 表达式的可读性优势是巨大的。

# java - 在 int 数组中查找第一个重复项，java

> ID：10767284
> 
> 赞同：23
> 
> 时间：2012-05-26T15:01:03.290
> 
> 标签：java, algorithm

这是我遇到的一个常见面试问题，但是我未能按照要求的方式改进它。

```
assume we have an int array int[] A, we want to find the first duplicate entry. 
```

1.  几乎每个人都可以想到使用 HashSet，并在解析时添加。这将导致 O(n) 时间和 O(n) 空间。在此之后，我被要求在没有其他数据结构的情况下解决它。我说最愚蠢的想法是在 O(n^2) 时间内比较每一个。然后我被要求改进 O(n^2) 时间。

2.  为了改进它，我想到了使用固定大小的数组（假设最大数为 n）， boolean[] b = new boolean[n]; 但是我不允许使用这种方法。

3.  然后我想到了使用一个 int 变量，使用位操作，如果最大数小于 32，那么对于 n 我们可以向左推 1 到 n 位和 | 到检查器，然后&检查器到数组中的下一个条目以检查它是否> 0。例如：

    ```
    int c = A[i];
    if(check & (1 << c) > 0) return false;
    check |= 1 << c; 
    ```

但是，这也是不允许的。

所以有一个提示，我可以将数组本身用作哈希集/哈希表和“线性哈希”？

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T15:13:57.407

我有一个想法：当你沿着数组前进时，你对你访问过的部分进行排序。通过使用二分搜索，您将缩短时间；空间为0。排序本身是......插入排序？您基本上正常运行排序，但是当您搜索插入新数字的位置时，如果您点击数字本身，您会喊“宾果”。这是对零空间 + O(n ² ) 时间的改进。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T15:30:21.150

我会问面试官为什么他们不希望你使用“其他数据结构”，因为显然有一个为此目的而设计的内置结构 - `HashSet`。

1.  它开着）。使用其他方法你可能不会做得比这更好，除非你做了一些非常聪明的事情并将其降低到 O(log n)。
2.  这是 Java，而不是 C。有现成的数据结构可以轻松地做到这一点，程序员几乎不需要额外的努力。

来自[Collections Framework 上的 Java 文档](http://docs.oracle.com/javase/6/docs/technotes/guides/collections/index.html)：

> 集合框架是用于表示和操作集合的统一架构，允许独立于表示的细节来操作它们。它减少了编程工作量，同时提高了性能。它允许不相关 API 之间的互操作性，减少设计和学习新 API 的工作量，并促进软件重用。

**附录**

下面的大多数评论认为这只是一个练习——确定程序员的技能。我对此的反驳很简单：

这个“面试”是针对 Java 编程职位的。Java 作为一种面向对象的语言，能够执行诸如此类的任务，而无需从头开始设计流程（如在 C 和各种其他低级语言中）。此外，当考虑空间复杂性时，Java 不是最佳选择。也就是说，再次阅读我上面列表中的条目一。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-26T16:06:07.793

[Wikipedia 定义的](http://en.wikipedia.org/wiki/Linear_hashing)线性散列具有增量调整大小的优点，因为桶以循环方式一个接一个地拆分，保持不变的摊销时间复杂度用于调整大小的插入。因此，他们的想法是迭代数组，重用已经迭代的元素作为线性散列的存储。

虽然我远不是线性哈希方面的专家，但我看不出有任何方法可以将哈希表放入数组中。当然，要使用线性散列存储 n 个元素，您可能会使用 n 个存储桶。但是，桶中的元素数量是无限的，您需要像链表这样的东西来实现每个桶，这需要额外的 O(n) 内存用于指针。

因此，该算法不会产生比普通算法更好的渐近空间复杂度`HashSet`。不过，它确实会以一个常数因子减少内存消耗。

它的时间复杂度与普通的不相上下`HashSet`。

编辑：在我看来，这个答案被忽略了（没有投票，没有评论）。它没有用吗？请发表评论，以便我知道要改进的地方。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-26T15:28:39.327

好吧，你自己给出答案：线性散列确实存在。根据[http://cgi.di.uoa.gr/~ad/MDE515/e_ds_linearhashing.pdf](http://cgi.di.uoa.gr/~ad/MDE515/e_ds_linearhashing.pdf) ，它的复杂度为o(1)/o(1)， 因此您可以在使用时一个接一个地从数组中取出元素前几个作为哈希映射的内存。
但实际上，它是您自己实现的数据结构。

要么面试没有说你必须“在没有其他数据结构的情况下”解决它，要么面试官实际上并不理解数据结构是一个数据结构，即使你自己实现了它。

无论如何，rofls，主要是因为这是您知道或不知道的那种问题。在面试中没有办法提出这个问题。我希望你不要为他们工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-26T17:12:24.963

这不使用线性散列，但比 O(N ² ) 更快：

1.  选择一些小的数字 C 并使用蛮力算法为数组的第一个 C 元素找到第一个重复项。如果还没有找到，则清除第一个 C 元素。
2.  在前 N 个元素为空的情况下执行剩余的步骤。最初，N=C。每次迭代后，N 加倍。
3.  依次将索引 N+1 .. 3*N/2 中的数字添加到前 N 个数组元素的哈希表中。使用开放寻址。移动所有 N/2 个元素后，哈希加载因子应为 1/2。干净的空间，被我们刚刚移动的 N/2 个元素占据。对于接下来的 N/4 个元素，在迄今为止构建的散列表中搜索它们中的每一个，然后将它们散列到总是元素数量两倍的空间。继续此操作，直到 NC 数组元素被散列。搜索哈希表中剩余的 C 元素并将它们相互比较。
4.  现在我们有 N 个没有重复的数组元素，占用 2*N 空间。就地重新散列它们。
5.  在此哈希表中按顺序搜索数组的所有其他元素。然后清除这2*N个元素，设置N=2*N，继续第3步。

步骤 3..5 可以简化。只需散列元素 N+1 .. 3*N/2 并在此散列表中搜索数组的所有其他元素。然后对元素 3*N/2+1 .. 2*N 执行相同的操作。这比原始算法慢两倍，但平均仍为 O(N log N)。

另一种选择是使用前 N 个空元素来构造元素 N+1 .. 3*N/2 的二叉搜索树，并在此树中搜索数组的所有其他元素。然后对元素 3*N/2+1 .. 2*N 执行相同的操作。（这仅在数组足够小并且其元素可以由整数值索引时才有效）。

* * *

上面描述的算法是概率性的，平均在 O(N log N) 时间内工作。它的最坏情况复杂度是 O(N ² )。如果树是自平衡的，则二叉搜索树的替代方案可能具有 O(N log ^(2 N) 最坏情况复杂度。)但这很复杂。可以使用更简单的算法在 O(N log ² N) 最坏情况下完成任务。

该算法顺序遍历数组并保持以下不变性：最大可能的子数组，其大小为 2 的幂，适合当前位置的左侧，从索引 0 开始并已排序；下一个这样的子数组跟随它并且也被排序；等等。换句话说，当前索引的二进制表示描述了它前面有多少排序的子数组。例如，对于索引 87 (1010111)，我们在索引 86 处有一个元素，在索引 84 处有一个排序对，在 80 处有 4 个元素的排序子数组，在 64 处有 16 个元素的排序子数组，以及数组开头的 64 个元素的子数组。

1.  遍历数组
2.  使用二分搜索在所有前面的子数组中搜索当前元素。
3.  将当前元素与前面的子数组一起排序，这些子数组对应于当前索引的二进制表示中的尾随“一”。例如，对于索引 87（1010111），我们需要将当前元素与 3 个子数组（1+1+2+4=8 个元素）一起排序。此步骤允许将当前元素添加到子数组，同时保持算法的不变性。
4.  继续步骤 1 的下一次迭代。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-26T15:29:43.727

我收到了额外的限制，即没有额外的内存，只有寄存器。这就是我想出的：

```
outer: for (i = 0; i < arr.length - 1; i++)
 for (j = i+1; j < arr.length; j++)
   if (arr[i] == arr[j])
     break outer; 
```

如果 i 和 j < arr.length，则它们是第一个重复值的索引并且它是匹配的。

它只是比 O(n^2) 好一点，因为 j 永远不会覆盖 arr 的整个长度

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-28T08:31:21.923

伪代码：

```
res = -1;
startArray = [...];
sortedArray = mergeSort(startArray);
for i = 1 to n
     x = bynary_search(sortedArray, startArray[i]); //array, element
     if ((sorted_array[x] == sortedArray[x-1])    ||   (sorted_array[x] == sortedArray[x+1]))
           res = i;
           break;
if (res != -1)
     print('First duplicate is ',startArray[res]);
else
     print('There are no duplicates'); 
```

合并排序最坏情况 **O(n log n)**

二分查找最坏情况 **O(log n)**

n 次二分查找最坏情况 **O(n log n)**

*总 **O(n log n)***

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-23T18:01:02.763

这是平均算法的 O(n) 时间

```
public static int firstRepeatingElement(int[] elements) {
    int index = -1;
    Set<Integer> set = new HashSet<Integer>();

    for (int i = elements.length - 1; i >=0; i--) {
        if (set.contains(elements[i])) {
            index = i;
        }
        set.add(elements[i]);
    }
    if (index != -1) {
        return elements[index];
    }
    throw new IllegalArgumentException("No repeating elements found");
} 
```

这是测试用例

```
@Test
public void firstRepeatingElementTest() {
    int [] elements = {1,2,5,7,5,3,10,2};
    int element = ArrayUtils.firstRepeatingElement(elements);
    assertThat(element, is(2));
}

@Test(expected=IllegalArgumentException.class)
public void firstRepeatingElementTestWithException() {
    int [] elements = {1,2,5,7,3,10};
    int element = ArrayUtils.firstRepeatingElement(elements);
    assertThat(element, is(2));
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-17T15:21:24.910

我相信这是您的面试官正在寻找的“线性哈希”解决方案。我们首先需要假设两个额外的约束：

1.  A 的长度 >= A 的最大值
2.  A 的所有值都是正数

有了这些额外的限制，我们可以用更少的时间和空间解决问题。

好的，让我们进入代码：

```
int findFirstDuplicateEntry(int[] A) {
    for (int i=0; i<A.length; i++) {
        if (A[Math.abs(A[i])-1]<0)
            return Math.abs(A[i]);
        else {
            A[Math.abs(A[i])-1] = -A[Math.abs(A[i])-1];
        }
    }
    return -1;
} 
```

我在这里做的是使用数组本身来存储一些额外的信息。当我遍历数组时，每次遇到一个值时，我都会将该值用作**索引**。在此索引处，我将检查该值。如果值为负，我知道我以前来过这里（因为全是正约束）。因此，我找到了我的第一个副本，并且可以退出。否则，我将否定该索引处的值。

# c# - context.SaveChanges() 未更新

> ID：10767294
> 
> 赞同：0
> 
> 时间：2012-05-26T15:02:41.760
> 
> 标签：c#, entity-framework, ado.net

所以我在表中添加了一个 BIT 列，现在我需要确保它被关联的 Windows Entity Framework 类模块正确处理。

这是我在 Order_Header.cs 中添加的内容：

```
 //New added column...
    public virtual bool REPORT_UPLOADED
    {
        get;
        set;
    } 
```

但是该文件看起来像是由某些工具自动生成的……如果是这样，是哪个？我是否应该重新运行该工具以考虑新列？无论如何。

现在我进入了为实体实现保存、更新、选择等功能的类模块：

```
 public override int Save(Entities.Master.Order_Header type)
    {
        try
        {
            using (var context = new Master_Data_Container(ConfigurationManager.MasterDataConnection()))
            {
                context.Order_Header.AddObject(type);

                return context.SaveChanges();
            }
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }

    public override int Update(Entities.Master.Order_Header type)
    {
        try
        {
            using (var context = new Master_Data_Container(ConfigurationManager.MasterDataConnection()))
            {
                var orderHeader = context.Order_Header.First(n => n.ID == type.ID);

                orderHeader.ADR_FACT = type.ADR_FACT;
                orderHeader.ADR_RAPPORT = type.ADR_RAPPORT;                 
                orderHeader.REPORT_UPLOADED = type.REPORT_UPLOADED;
                orderHeader.STATUT = type.STATUT;
                orderHeader.TELEPHONE = type.TELEPHONE;
                orderHeader.TYPE_COMMANDE = type.TYPE_COMMANDE;
                orderHeader.TYPE_EXAMEN = type.TYPE_EXAMEN;

                return context.SaveChanges();
            }
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

我对实体框架不是很熟悉，所以我尝试模仿我在这个项目中已经为另一个实体所做的工作，效果很好。

更新似乎工作正常，除了 REPORT_UPLOADED 永远不会更新。SQL 探查器跟踪显示新属性/列被忽略:(

```
 orderHeader.REPORT_UPLOADED = true;
                        orderHeader.POSTE = "WHATEVER";
                        int result = new MsDt_OrderHeader().Update(orderHeader); 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:15:58.093

为了更新，您需要在保存更改之前告诉上下文您要更新模型：

```
context.Entry(Order_Header).State = EntityState.Modified;
return context.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T17:09:59.823

您不应该将代码添加到自动生成的文件中。您需要将其设为部分类并将所有自定义代码放入另一个文件中。真正的问题虽然听起来像 Mark 建议的那样，但描述概念模型到存储模型的映射的元数据都没有更新。

在 Visual Studio 中，右键单击 .edmx 文件并选择“从数据库更新模型”。如果您使用 T4 模板来自定义您的课程，则必须选择模板并选择“运行自定义工具”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T15:19:48.093

如果您只是手动添加属性，它可能没有描述如何将其保存在数据库中的元数据。我手边没有 EF 文档，但在 Linq to SQL 中有一个`[Column]`属性。我认为EF有类似的东西。

# php - 通过相同的键号合并两个或多个数组

> ID：10767296
> 
> 赞同：0
> 
> 时间：2012-05-26T15:02:50.087
> 
> 标签：php, arrays

我有 3 个数组：

```
$array1 = array (1 => 'Hello' , 2 => 'nice' 3 => 'how');
$array2 = array (1 => 'there' , 2 => 'to' 3 => 'are');
$array3 = array (1 => 'champ' , 2 => 'meet' 3 => 'you'); 
```

我想输出一个字符串，它结合了每个数组的所有第一个键。例如：

```
 echo "Hello there champ"
 echo "nice to meet" 
```

我怎样才能做到这一点？这些数组中的值的数量将始终相同，因为它们是从表中提取的。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:06:04.163

```
echo $array1[1] . ' ' . $array2[1] . ' ' . $array3[1]; // hello there champ 
echo $array1[2] . ' ' . $array2[2] . ' ' . $array3[2]; // nice to meet 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T15:08:04.850

像这样的东西？

```
function merge() {
    $arrays = func_get_args();
    $count = count($arrays[0]);

    for ($i = 0; $i < $count; $i++) {
        foreach ($arrays as $array) {
            echo $array[$i];
        }

        echo "<br />";
    }
}

$array1 = array (1 => 'helo' , 2 => 'nice' 3 => 'how');
$array2 = array (1 => 'there' , 2 => 'to' 3 => 'are');
$array3 = array (1 => 'champ' , 2 => 'meet' 3 => 'you');

merge($array1, $array2, $array3); 
```

输出：

```
hello there champ<br />nice to meet<br />how are you<br /> 
```

# iphone - iPhone iOS如何通过长按将图像粘贴到UIImageView中

> ID：10767301
> 
> 赞同：0
> 
> 时间：2012-05-26T15:03:12.990
> 
> 标签：iphone, objective-c, ios, uiimage, uipasteboard

我有一个大概的想法，我可以使用 a`UIPasteBoard`来控制复制/粘贴内容。我想允许用户长按图像并用粘贴板内容覆盖该图像。

我关心的是如何以用户友好的方式做到这一点。我不知道如何为 UIImageView 呈现 Apple 风格的“复制/粘贴”标注。有什么例子可以说明这是如何做到的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T16:20:18.343

您正在寻找的类是 UIMenuController。它可以让您从任何视图显示标准的复制/粘贴菜单。

这个问题有更多信息：[How to get UIMenuController work for a custom view?](https://stackoverflow.com/questions/1146587/how-to-get-uimenucontroller-work-for-a-custom-view)

# clojure - What is fn* and how does Clojure bootstrap?

> ID：10767305
> 
> 赞同：23
> 
> 时间：2012-05-26T15:03:41.137
> 
> 标签：clojure, bootstrapping

The [source for clojure.core](https://github.com/clojure/clojure/blob/master/src/clj/clojure/core.clj) appears to assume the pre-existence of `fn*`. Where is this defined? What else is needed for bootstrap (over existing Java types)? How is it all put together?

Maybe this has already been asked? I am having a hard time getting good search results for `fn*`.

*update:* Changed "bootstrap itself" to "bootstrap" in title, because I didn't want to imply Clojure was self-hosting.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-26T15:34:12.253

在 src/jvm/clojure/lang/Compiler.java 46 行：

```
static final Symbol FN = Symbol.intern("fn*"); 
```

fn* 由 clojure 编译器实现，我猜是其他特殊形式。

**更新：** 在 analyzeSeq 方法中，6452-6353 行：

```
 if(op.equals(FN))
        return FnExpr.parse(context, form, name); 
```

请查看 FnExpr 类实现代码。

# java - Android Service、生命周期和线程

> ID：10767308
> 
> 赞同：1
> 
> 时间：2012-05-26T15:03:50.713
> 
> 标签：java, android, multithreading

我正在开发一项服务，它扩展了 Service 类并使用单独的线程来处理传入的消息，因此，我的 onCreate 方法中有以下内容

```
thread = new HandlerThread("MYSERVICE-THREAD",
        Process.THREAD_PRIORITY_BACKGROUND);

thread.start();
serviceLooper = thread.getLooper();
serviceHandler = new ServiceHandler(mServiceLooper); 
```

在这个线程中，我创建了一个 LocationManager 并将其设置为监听位置变化。不过，我有点担心线程的生命周期。这就是为什么：

如果我**不**从服务的 onDestroy 方法中的位置管理器中删除位置侦听器，并通过 telnet 强制更新位置，那么一切正常。我发现这很奇怪，并尝试在服务的 onDestroy 方法中使用 thread.quit() 显式结束线程。所以，现在当从 telnet 进行位置更新时，我收到了我一开始就期待的警告。处理程序正在死线程上调用处理程序。

从位置管理器中删除位置侦听器显然可以解决这个问题，但是，这似乎暗示我，如果我不明确关闭线程，则线程将在服务被销毁后继续运行。这个对吗？在 developer.android.com 上的示例中，他们没有明确关闭他们的线程，所以我认为 VM 在这种情况下会处理它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T15:10:16.237

Oh yes. This is the case. The same goes for Activities too. Threads stay open until Android explicitly kills them to free up resources unless you close them yourself. In a technical sense, Activities and Services are never closed when popped from the stack. It just tells the OS that all the resources that they were using can now be reclaimed when it's needed so that memory pool will be the first place the OS looks. If a thread of any kind is still running however, it will continue to run (and take up CPU resources) until the memory is reclaimed which could be anywhere between 1 second and eternity.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T15:12:29.063

> this seems to hint to me that if I dont explicitly close the thread, the thread will continue to run after the service is destroyed. Is this correct?

Absolutely. If you fork the thread, you have to clean it up.

> so I thought the VM would take care of it in this case.

Well, it will, eventually, insofar as the OS will eventually terminate the whole process for your app. That being said, you do not want to leak threads, and you *really* do not want to leak a `requestLocationUpdates()` call (or whatever it is that you are using with `LocationManager`), as that can keep the location provider powered on (e.g., GPS).

> In the examples on developer.android.com they dont explicitly close their thread

Which examples are you referring to?

# java - 简单的 Java 运算符矛盾

> ID：10767309
> 
> 赞同：-4
> 
> 时间：2012-05-26T15:03:55.913
> 
> 标签：java, operators

这可能信息太少......但为什么这与我预期的相反？

```
 if (indSTime[t] <= monthTotal) {

                    Log.d("indSTime", String.valueOf(indSTime[t++]));
                    Log.d("monthTotal", String.valueOf(monthTotal));

                    NewRate = Double.valueOf(indSRate[s]);
                    indApr[o] = NewRate;
                } 
```

它以大于或等于的方式工作。不小于或等于月份总数。

我将“indSTime”设置为 4。所以 Eclipse 中的 Logcat 开始像这样记录这两个变量。

```
4, 4
4, 5
4, 6
4, 7 
```

ETC...

似乎应该是

```
4 ,1
4, 2
4, 3
4, 4 
```

并停止。

我知道我没有在上面添加太多代码？在我面前有什么我想念的东西吗？或者是什么原因造成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T15:10:36.533

4 *is* less-than-or-equal-to 4, 5, 6 and 7.

4 is definitely *not* less-than-or-equal-to 1, 2 or 3.

Why do you think it should be the opposite?

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T15:11:24.040

It's logging entirely reasonable things. Look at your pairings:

Actual:

```
indSTime=4, monthTotal=4
indSTime=4, monthTotal=5
indSTime=4, monthTotal=6
indSTime=4, monthTotal=7 
```

Expected:

```
indSTime=4, monthTotal=1
indSTime=4, monthTotal=2
indSTime=4, monthTotal=3
indSTime=4, monthTotal=4 
```

In all of the *actual* cases, `indSTime` is less than or equal to `monthTotal`, exactly as your code suggests.

In your *expected* output, you've shown three cases where `indSTime` is *greater than* `monthTotal`.

So, either you actually *wanted* the opposite operator, or you've been confused by your logging, or possibly both. Unfortunately as you haven't shown any context here, it's impossible to say exactly where the problem is - but it's definitely not Java itself.

# php - 如何从请求字符串中获取 Joomla 中的数据

> ID：10767312
> 
> 赞同：-1
> 
> 时间：2012-05-26T15:04:32.073
> 
> 标签：php

如果我有链接： index.php?view=article&id=59: **blue-love** &catid=36: **tui-sach-hang-hieu** &Itemid=1

我怎样才能得到粗体数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:11:41.463

This should do it:

```
$array = explode(':', $_GET['id']);
$myID = $array[1]; 

$array = explode(':', $_GET['catid']);
$myCATID = $array[1]; 
```

# java - 循环 InputStream#read 的替代方案

> ID：10767313
> 
> 赞同：1
> 
> 时间：2012-05-26T15:04:32.060
> 
> 标签：java, url, nio, channel, fileoutputstream

NIO api 包含一些非常简洁的数据传输解决方案。将输入流作为文件保存到硬盘驱动器的方法，这些通道和文件直接从硬盘驱动器加载到 RAM 中。但是，我找不到将输入流直接加载到 RAM 中的巧妙解决方案。我能想到的唯一解决方案是循环输入流。这就是为什么我想知道这种方法是否有替代方法。

`Channel`我钦佩的解决方案：

```
URL url = new URL(name);
ReadableByteChannel rbc = Channels.newChannel(url.openStream());
FileOutputStream fos = new FileOutputStream(fileName);
fos.getChannel().transferFrom(rbc, 0, 1 << 24); 
```

# binary - 仅使用位逻辑查找二进制中两个整数的最大值

> ID：10767316
> 
> 赞同：5
> 
> 时间：2012-05-26T15:04:51.450
> 
> 标签：binary, integer, max, boolean-logic

这有点棘手，对于我认为能够胜任这项任务的人来说，这是一个很好的挑战。我确实搜索了以前提出的所有问题，但找不到我想要的。

这里的目的是，给定*2 个以***二进制**形式写入**n**位的整数，仅使用每个整数的n 位上的逻辑运算（AND、OR、...）来找到其中最大的一个（如果第一个整数，则结果将为 0整数是最大的，否则为 1）。最终，目标是能够绘制一个电子电路，其中 2*n 位将是有或没有张力的电线，并将电线插入将执行逻辑操作的实际电子元件。

我开始思考这个问题，意识到无论发生什么（即无论 n 是什么），2^n 都大于 2^0 + ... + 2^(n-1) （从数学上讲，这很容易提出）。这意味着当另一个整数中的相应位为 0 时，任何一个整数的位（比如数字 k）为 1，并且 n 和 k 之间的所有其他位（k 左侧的所有位）相同，都是最大的。例子 ：

A : 010(1)1011 大于 B : 010(0)1111 括号中的有效位。它左边的所有位都是相同的，我们不必关心其他位。

因此，可以对所有位对执行异或（XOR）：重要的位会产生 1，然后我可以在 A 的相应位与 XOR 的结果之间执行 NAND，这样它就会产生如果 A 的第 k 位为 1，则为 0，如果 B 的第 k 位为 1，则为 1。唯一的问题是……重要的位右侧的位呢？它们可以不同（因此在执行 XOR 时也会产生 1）但我必须忽略这一点......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:47:27.487

您关心硬件实现，所以我想您最好将`A`和`B`视为有符号的 N 位整数，然后

1.  反转`B`为其`-B`表示；
2.  `A`用`B`N 位[全](http://en.wikipedia.org/wiki/Full_adder#Full_adder)加器求和；
3.  将结果的符号用作 2 输入 N 位多路复用器的选择器变量。

当然，它只能用逻辑函数**来**表达。

关于第三点更详细，只需检查符号`S`（1：否定，0：肯定）满足谓词`B>A`。因此，如果选择器值 0 的多路复用器所采用的输入是`A`（而选择器值 1 是`B`），那么您就有了结果。在相等的情况下，您仍然选择`A`，但这`A=B`在逻辑上与您选择哪一个无关。

作为 A 和 B 变量，这是最明智的方法，因为您可以将加法器重用于加法。我猜，对检查最大值的特定情况进行优化当然是可能的。

**附加评论：**

重要的是要强调逐步检查每个数字的顺序实现，`A`并且`B`在最坏的情况下需要`N`检查以返回结果。如果 和 有两个值流`A`，则`B`必须保证能够跟上它们。因此，您的 max() 函数的逻辑`N`有时会以数据流的频率起作用。从另一个角度来看，您需要减慢将数据馈送到 max() 逻辑的速度。

相反，我建议的组合实现（或任何优化）以硬件资源换取速度。换句话说，它与为`A`和生成数据一样快`B`。与顺序实现相比，组合实现的传播延迟通常也更高，但这在频率方面不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-11T18:02:11.940

两个整数中的较大者：

```
unsigned int a, b, max;
max = ((~(a >= b)+1) & a) | ((~(b >= a)+1) & b); 
```

说明：假设一个整数是 4 个字节。(a >= b) 转换为 0001 或 0000。对于 (b >= a) 也是如此。在否定 "~X + 1" 后加 1 给出二进制补码。这样，比较中的 1 将转换为 FFFF。0 仍然是 0000。如果 a = b 我们有： FFFF & a | FFFF & b = a。如果 a > b 我们有： FFFF & a | 0000 & b = a。如果 b > a 我们有： 0000 & a | FFFF & b = b。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T15:36:22.127

我将通过向二进制 AND 的第二个运算符添加一个数字来迭代这两个数字（我们称它们**为 a**和**b ），直到其中一个数字变为 0...**

如果其中一个数字是 0，另一个是 > 0，那么您将拥有两者中的最大值...

第一个循环：

a & 1 b & 1

第二个循环：

a & 10 b & 10

第三个循环：

a & 100 b & 100

等等...

要在操作后检查其中一个数字是否等于零，您可以（给定 n，已知数字的长度）在最重要的 n+1 位置使用 n 乘以零加 1 的数字生成一个和。 ..

我的 2 分（也许是错的）美分 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-05T22:53:50.737

```
A : 010(1)1011 
B : 010(0)1111 
```

第一位移位

```
C : 0
D : 0 
```

如果他们匹配下一个班次，如果他们不匹配返回`D`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T09:34:47.083

有些 IC 可以满足您的需求，例如 cmos 4063。该 IC 只能比较 4 位的数量，但它提供了通过级联多个设备进行扩展的可能性。

如果您感兴趣的是自己实现它的逻辑，您可以查看数据表[http://www.intersil.com/content/dam/Intersil/documents/fn33/fn3318.pdf](http://www.intersil.com/content/dam/Intersil/documents/fn33/fn3318.pdf)，其中包含逻辑图比较器的

# xml - Spring Controller 无法返回 JSON

> ID：10767320
> 
> 赞同：0
> 
> 时间：2012-05-26T15:05:13.373
> 
> 标签：xml, json, spring, tomcat, web

我有一个带有多个方法的弹簧控制器，每个方法都根据标头以 XML 或 JSON 格式返回数据。**除了返回 JSON 数据有问题的**一种方法外，所有方法都成功返回数据。我在日志中看到的只是“500 内部服务器错误”

这就是我的方法的样子：

```
@RequestMapping (value="/test", method=RequestMethod.GET, headers ={"Accept=text/xml, application/json"})
public @ResponseBody MyObject getMyObject() throws FileNotFoundException, JAXBException {

    return getMyService().getMyObject();
} 
```

Eclipse 控制台未显示任何错误，**Tomcat 日志仅显示“500 内部服务器错误”**，如果我调试，则 getMyService().getMyObject() 具有正确的数据。那么500错误的原因是什么？为什么它适用于 XML 请求但不适用于 JSON？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:55:33.133

问题是我没有为 MyObject 中的几个私有变量提供公共 getter。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-23T14:09:09.140

显然，当 json 序列化失败时会出现此问题（另请参阅[Jackson @ResponseBody 上的内部服务器错误](https://stackoverflow.com/questions/9594834/internal-server-error-on-jackson-responsebody)）。虽然我仍然不完全清楚为什么我们没有通过 Spring 收到异常，但这个简短的答案对我来说非常实用：[https](https://stackoverflow.com/a/25011673/4340425) ://stackoverflow.com/a/25011673/4340425 。

简而言之：通过手动实例化对象映射器并尝试序列化对象，您可以获得揭示问题的异常（通常缺少 getter 或尝试序列化一些未指定适当映射器的非原始对象）。

# cakephp - 通过关联保存一长串 hasMany

> ID：10767328
> 
> 赞同：0
> 
> 时间：2012-05-26T15:06:08.807
> 
> 标签：cakephp, associations

这可能被认为是一个太不具体的问题，但我相信其他人已经遇到过这种难题，所以它可能只是被问到！

我有两个模型：用户和调查。我的目标是从**索引视图**编辑/保存记录。在索引视图中，每个用户行将有两个选择列表和一些复选框。选择列表中填充了所有可用调查的名称。

目的是允许管理员为每个用户分配两个调查；直接从索引视图编辑和保存记录。目前，关联是通过 hasMany Through 关联进行的：中间模型称为 SurveyAssignments（我不能做 HABTM，因为我正在存储元信息）。

我正在努力解决的是：我无法弄清楚如何从视图中保存所有这些关联。棘手的是每个用户都有不同的关联“状态”：有些用户会有关联记录，有些则没有。有些需要创建关联，有些需要更新或删除。新用户将被添加到系统中，但仍将与当前存在的用户一起出现在列表中，这些用户已经有关联。

还有一个约束问题：每个用户最多只能有两个与之关联的 SurveyAssignment 记录。

再一次，这是我无法理解的逻辑：如何从一个视图保存多个记录，考虑每个用户的独特关联状态，所有这些都不会变得过于臃肿或复杂？我是否缺少任何可以简化情况的 Cake 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:43:36.457

我遇到的主要问题是尝试同时保存编辑和新记录。事实证明，Cake 的自动魔法可以解决这个问题。

当您运行 saveMany 或 saveAll 时，如果您**不**包含记录的 ID，它会创建一条新记录。如果您**确实**包含了一个 ID，Cake 会更新预先存在的记录。

# visual-c++ - 无法在另一个类中创建类对象？

> ID：10767334
> 
> 赞同：0
> 
> 时间：2012-05-26T15:06:51.083
> 
> 标签：visual-c++

我有一个场景，我无法在另一个类中创建一个类对象。场景如下：

```
class base
{
public:
base();
~base();
int getbase(void){return baseVar;}
void setbase(int arg){baseVar = arg;}
private:
int baseVar;
};

class derived1 : public base
{
public:
derived1();
~derived1();
int getbase(void);
void setbase(int arg);
private:
int derVar1;
};

class derived2 : public base
{
public:
derived2();
~derived2();
int getbase(void);
void setbase(int arg);
private:
int derVar2;
};

class container
{
public:
container();
~container();

derived1 derObj1;
derived2 derObj2;

private:
int containerVar;
};

class usage
{
public:
usage();
~usage();
private:
container containerObj; // compilation error
int usegeVar;
}; 
```

编译错误是：错误C2146：语法错误：缺少';' 在标识符“containerObj”之前出现错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认 int 错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持 default-int 我使用的是 vc++

我请求有人如何纠正这个编译错误？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:41:32.087

将粘贴的代码复制到一个空的 VisualC++ 2k8 项目上，就可以了！

# android - 尝试在活动之间切换时出现 InflateException

> ID：10767339
> 
> 赞同：1
> 
> 时间：2012-05-26T15:07:14.660
> 
> 标签：android, android-activity

我在项目中间将我的 android 版本从 4.0.3 更改为 2.3.3 从那时起我无法在我的 2 个活动之间移动，得到错误：

```
05-26 15:04:12.050: E/AndroidRuntime(571): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.udios.sapool/com.udios.sapool.SignupActivity}: android.view.InflateException: Binary XML file line #199: Error inflating class Switch 
```

我已经将 minSdk 更改为：

```
<uses-sdk android:minSdkVersion="10" /> 
```

还有什么我忘记了吗？谢谢。乌迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:17:56.920

在 SignupActivity Activity 中，您使用的是**API Level 14**支持的[Switch](http://developer.android.com/reference/android/widget/Switch.html)，而不是**API Level 10**支持的 Switch 。看[这里](http://developer.android.com/reference/android/widget/Switch.html)。

 ****如果您想在 Appiction 中使用 Swicth，请将**minSdkVersion**设置为**14** .as

```
<uses-sdk android:minSdkVersion="14" /> 
```****

# c# - 如何将 C# 类型转换为 IronRuby 类型，反之亦然？

> ID：10767341
> 
> 赞同：2
> 
> 时间：2012-05-26T15:07:54.583
> 
> 标签：c#, ironruby

例如：

红宝石代码（仅用于测试）：

```
def process_initial_array (ar)
     ar.join(" ")
end 
```

c# 代码：在这里我创建字符串列表并将其传递给 IronRuby

```
List<string> source_values = new List<string>(); 
```

它充满；

```
label2.Text=IronRuby.CSharp.BasicInteraction.calculator(source_values);

namespace IronRuby.CSharp
{
    public class BasicInteraction
    {internal static string calculator(List<string> source_values)
        {
            var rubyEngine = Ruby.CreateEngine();
            var scope = rubyEngine.ExecuteFile("math_logic.rb");
            string result = rubyEngine.Operations.InvokeMember(scope, "process_initial_array", source_values);
            return result;
        }
    }
} 
```

它唤起：

```
An unhandled exception of type 'Microsoft.CSharp.RuntimeBinder.RuntimeBinderException' occurred in Anonymously Hosted DynamicMethods Assembly

Additional information: Unable to convert implicitly "IronRuby.Builtins.MutableString" to "string". There is explicit conversion. 
```

好的，我在相关问题中找到了 IronRuby 字符串方法 to_clr_string，所以问题是我在哪里可以找到关于其他类型的相同方法的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T01:12:06.567

在简要查看 IronRuby[源代码](https://github.com/IronLanguages/main/blob/master/Languages/Ruby/Libraries/Initializers.Generated.cs)后，我只能找到`to_clr_string`和`to_clr_type`（转换为`System.Type`）似乎与您的问题相关的内容。因此，我*假设*这些是您需要在内置 ruby​​ 类型和 CLR 类型之间进行转换的唯一转换方法。其他类型*应该*与它们的 CLR 对应类型相同。

请注意，还有其他方法可以将 ruby*​​ 字符串*转换为其他原始类型，如`int`( `to_i`) 和`double`( `to_f`)。

在您的示例中，您可以将结果显式转换为`string`：

```
var result = (string)rubyEngine.Operations.InvokeMember(
  scope, "process_initial_array", source_values); 
```

这样，您不必`to_clr_string`在 Ruby 端调用。

# ios - Xcode：如何将应用程序设置为仅限 iPhone？

> ID：10767346
> 
> 赞同：9
> 
> 时间：2012-05-26T15:08:45.783
> 
> 标签：ios, iphone, objective-c, xcode, cocos2d-iphone

我们已将以下应用程序设置设置为仅 iPhone，但在 App Store 中，该应用程序被列为与 iPhone/iPad 兼容。

如下图所示，设备系列设置为 iPhone：

![在此处输入图像描述](../Images/ceff6ea3e47055aaf2fa06505e07b86d.png)

这是应用程序：http: [//itunes.apple.com/us/app/carrom-pro/id525961441](http://itunes.apple.com/us/app/carrom-pro/id525961441?mt=8) ?mt=8 。

这些设置有什么问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-04-30T08:24:43.040

将部署设备设置为“Iphone”不会将其仅限于 iphone。

唯一的方法是添加一些iPad 没有的**必需设备功能。**例如，如果您将**电话**或**短信**添加到应用程序的 Info.plist 中的**所需设备功能**，苹果将自动使该应用程序仅适用于 iPhone。

有关更多设备功能，请参阅[https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html](https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-26T15:10:51.917

所有 iPhone 应用程序也可以在 iPad 上运行，只是不能“全屏”（见下图）。应用程序可以分别为 iPhone 和 iPad 设计，也可以是通用应用程序，其中包含 iPhone 和 iPad 的资源（接口、设备处理等）。

![在此处输入图像描述](../Images/5f5eb146c61df8ebf811c81e7a824d54.png)

用户会注意到专为 iPhone 设计的应用程序周围有一个灰色容器。通用应用程序将自动为设备选择正确的接口。

在 iTunes Store 中，价格旁边带有蓝色加号的应用程序是通用应用程序：

![在此处输入图像描述](../Images/cb0000b541e84a6c5a8b03fa91da5133.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-11-18T07:33:05.343

**在 app plist 文件中将UIDeviceFamily**属性保持为**1**（对于 iPhone），并将**Build 设置**中的**Targeted Device Family**更改为**1**（对于 iPhone）。如果您只想支持 iPad，则在这两种情况下都保留**2 。**这些在 XCode 8 中进行了测试。

 ******* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T15:31:41.020

所有 iphone 游戏都可以在 iPad 上运行。因此 iTunes 正在编写 iPhone/iPad。对于仅搜索 iPad 的游戏，用户将在 iTunes 中的 iPad 选项卡中搜索没有任何 iPhone 游戏的地方，因此不必担心。iTunes 检测应用程序进行排序的通用设备和 iPhone 唯一设置。并在某些情况下为开发人员。******

# sql - 将数据导入sqlite

> ID：10767348
> 
> 赞同：1
> 
> 时间：2012-05-26T15:08:56.767
> 
> 标签：sql, csv, import, sqlite

有人，请帮助我，因为我的头要爆炸了。

我正在尝试在 sqlite3 中导入数据。我有`promos.sql`和`promos.csv`文件。我试图在 sqlite shell 中运行它：

```
.read promos.sql 
```

或者在 unix 提示符下执行此操作：

```
sqlite3 development.sqlite3<promos.sqlite3 
```

每次我得到错误

```
错误：第 1 行附近：“，”附近：语法错误  
错误：第 18 行附近：“，”附近：语法错误等

```

在文件中有以下行：

```
INSERT INTO promos (name, promo_type, category, phone, email, message, created_at)  VALUES  
('John', 1, 3, '+111 11 111 111 11', 'some@email.com', 'Some message', '2009-09-24 12:17:17'),etc 
```

因此，它在列枚举的每一行中抱怨错误。

如果我尝试

```
.import promos.csv promos 
```

它说：

```
错误：promos.csv 第 1 行：预期 9 列数据，但找到 1
```

但在文件中有 9 列，如预期的那样：

```
"13","John","1","3","+111 11 111 111 11","some@email.com","Some message","2009-09-24 15:17:17" , "2009-09-24 15:17:17"
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T15:19:56.720

对于 sql 问题：您的 INSERT 语句末尾是否有逗号，而不是应该有的分号？请发布您尝试运行的 sql 文件的几行，并发布 CREATE TABLE 语句`promos`。

对于 csv 问题： sqlite 使用 | 作为默认分隔符，因此您必须将其设置为使用逗号。此外，sqlite 导入不识别带引号的列，因此如果您的数据中有逗号，您最好使用不同的方法来导入数据。有关详细信息，请参阅[本文](http://www.sqlite.org/cvstrac/wiki?p=ImportingFiles)。

# wcf - WCF 服务在本地工作，但在远程服务器上返回 404

> ID：10767349
> 
> 赞同：0
> 
> 时间：2012-05-26T15:08:59.327
> 
> 标签：wcf, http-status-code-404

我创建了最简单的 WCF 服务来尝试学习最基本的知识。当我在本地主机上运行它时，它工作正常。但是当我将它部署到远程服务器时，它会返回 404。

配置：

```
<system.serviceModel> 
  <services> 
    <service name="MarathonInfo.MarathonInfoService"> 
      <endpoint address="http://localhost:10298/MarathonInfoService.svc"
                binding="webHttpBinding"
                contract="MarathonInfo.IMarathonInfo"
                behaviorConfiguration="Web"/> 
    </service> 
  </services> 
  <behaviors> 
    <serviceBehaviors> 
      <behavior> 
        <serviceMetadata httpGetEnabled="true"/> 
        <serviceDebug includeExceptionDetailInFaults="false"/> 
      </behavior> 
    </serviceBehaviors>
    <endpointBehaviors>
      <behavior name="Web">
        <webHttp/>
      </behavior>
    </endpointBehaviors>
  </behaviors> 
  <serviceHostingEnvironment multipleSiteBindingsEnabled="false" /> 
</system.serviceModel> 
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

服务文件：

```
namespace MarathonInfo
{
    public class MarathonInfoService : IMarathonInfo
    {
        public String GetData()
        {
            return "Hello World";
        }
    }
} 
```

在界面中：

```
namespace MarathonInfo
{
    [ServiceContract]
    public interface IMarathonInfo
    {

        [OperationContract]
        [WebInvoke(Method = "GET", UriTemplate = "/GetData", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
        String GetData();
    }
} 
```

根据我通过谷歌找到的内容，我很确定我需要添加一个新端点，但我无法成功地做到这一点。我的远程 URL 如下所示：

```
http://www.mydomain.com/service/MarathonInfoService.svc 
```

任何想法如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:12:25.333

The problem is with the following line:

```
address="http://localhost:10298/MarathonInfoService.svc" 
```

replace it with the appropriate url when you deploy it on the server.

# sql - How to show the total number of employees in this database design?

> ID：10767355
> 
> 赞同：2
> 
> 时间：2012-05-26T15:09:51.820
> 
> 标签：sql, sql-server, sql-server-2008-r2

I have the following database design:

```
Employee Table: EmployeeID, Name, OrgCode
Department Table: OrgCode, DepartName
CompleteSurvey Table: ID, RespondantID, QuestionsAnswersID
Questions Table: QuestionID, Question
Answers Table: AnswerID, Answer
QuestionsAnswers Table: ID, QuestionID, AnswerID 
```

I wrote a query that shows each question with all possible answers and the total number of participants in each question even if there is one of the possible answers without any participant. This results will be shown in each department.

What I have to do now is to modify this query to show the total number of employees in each department besides the total number of participants that I already got, then show the participation percentage which is the total number of participants/ total number of employees.

**So how to do that?**

The query:

```
SELECT     
   TOP (100) PERCENT 
   COUNT(DISTINCT CompleteSurvey.RespondantID) AS [Total Number of Participants], 
   dbo.Answers.Answer, dbo.Questions.Question, 
   dbo.Departments.DepartmentName
FROM
   dbo.Questions 
INNER JOIN
   dbo.QuestionsAnswers ON dbo.Questions.QuestionID = dbo.QuestionsAnswers.QuestionID 
INNER JOIN
   dbo.Answers ON dbo.QuestionsAnswers.AnswerID = dbo.Answers.AnswerID 
CROSS JOIN
   dbo.Departments 
LEFT OUTER JOIN
   (SELECT     
        dbo.Employees.OrgCode, CompleteSurvey_1.QuestionsAnswersID, 
        CompleteSurvey_1.RespondantID
    FROM          
        dbo.CompleteSurvey AS CompleteSurvey_1 
    INNER JOIN
        dbo.Employees ON dbo.Employees.EmployeeID = CompleteSurvey_1.RespondantID) AS CompleteSurvey ON dbo.QuestionsAnswers.ID = CompleteSurvey.QuestionsAnswersID AND dbo.Departments.OrgCode = CompleteSurvey.OrgCode
GROUP BY 
    dbo.Answers.Answer, dbo.Questions.Question, dbo.Departments.DepartmentName
ORDER BY 
    dbo.Questions.Question, dbo.Answers.Answer, dbo.Departments.DepartmentName 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T20:31:15.983

这就是我认为你现在拥有的

![在此处输入图像描述](../Images/00f58c16a44c6a26130d21d8b902f257.png)

所以，试试这个

```
;with
q_00 as ( -- all possible QA combinations
    select
          x.ID        as QA_ID
        , q.Question
        , a.Answer
    from QuestionsAnswers    as x
    join Questions           as q on q.QuestionID = x.QuestionID
    join Answers             as a on a.AnswerID   = x.AnswerID  
),
q_01 as ( -- QA chosen by some employees 
    select
          s.QuestionAnswersID as QA_ID
        , e.EmployeeID
        , d.DepartmentName
    from  CompleteSurvey as s 
    join  Employee       as e on e.EmployeeID = s.RespondantID
    join  Department     as d on d.OrgCode    = e.OrgCode
),
q_02 as ( -- participants for each QA for each department
    select
          Question
        , Answer
        , DepartmentName
        , count (distinct EmployeeID) as Participants
    from      q_00 as a
    left join q_01 as b on b.QA_ID = a.QA_ID
    group by Question, Answer, DepartmentName
),
q_03 as ( -- number of people in a department 
    select
          DepartmentName
        , count(1)    as PeopleInDepartment
    from Department as d
    join Employee   as e on e.OrgCode = d.OrgCode
    group by DepartmentName
)
select
      Question
    , Answer
    , a.DepartmentName
    , Participants
    , PeopleInDepartment
    , cast(
            cast(Participants       as decimal(9,2))
          / cast(PeopleInDepartment as decimal(9,2))
          * 100.0
          ) as ParticipationPercent
from q_02 as a
join q_03 as b on b.DepartmentName = a.DepartmentName
order by Question, Answer, a.DepartmentName
; 
```

您可以通过删除这两个（无用的）并坚持 ID 命名约定来进行一些清理`IDs`——这样您就不需要`QuestionsAnswers`和`CompleteSurvey`. 所以，它可能看起来像这样

![在此处输入图像描述](../Images/5b3fa6544d788d50474454c7cd5092e7.png)

# c++ - 如何以字符串和其他用户定义的类型作为其数字来获取给定结构的大小（以字节为单位）？

> ID：10767357
> 
> 赞同：0
> 
> 时间：2012-05-26T15:10:11.077
> 
> 标签：c++, struct, size, byte

我想在这里获取 struct testB 的大小（以字节为单位）：

```
struct testA
{
    int x;
};
struct testB
{
    std::string guid;
    testA userData;
}; 
```

我可以得到这样的尺寸，但这很愚蠢：

```
int testA::size()
{
    return sizeof(testA);
}
int testB::size()
{
    return guid.size()*sizeof(TCHAR) + userData.size();
} 
```

有更简单的解决方案吗？

ps：手头的问题是这样的：

我想将一个对象故事化到数据库，所以当我的应用程序崩溃时，我可以取回我的数据。所以我使用了 sqlite，并将结构的所有成员保存在单独的行中。一切都很好，除了我有一个成员持有 Protobuf 消息的二进制字符串，它不能插入到数据库中，因为它会使 SQL 语句无效。

所以我来了2个解决方案：

1 将protobuf消息序列化为json/XML文本，这对我来说似乎很乏味

2 使用 sqlite3_bind_blob 将所有内容转储到数据库中，其第三个参数是以字节为单位的 blob 数据的大小，所以问题是：如何获取结构的大小（这很复杂）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:14:28.813

```
sizeof (testB) // how many bytes are allocated for testB object itself 
```

可能是你想要的，或者

```
sizeof (testB) + guid.capacity() // also include heap allocation for string 
```

如果没有对手头问题的某种描述，就无法得出具体的结论。

此信息最明显的用途是评估程序内存使用情况。这个策略不适合那个。在运行实际测试用例时，使用分析器或平台上可用的任何调试工具来报告分配的数量和总大小。例如，Valgrind 应该这样做。

**编辑：**您想将大小传递给`sqlite_bind_blob`，它需要一个`void *`指向未格式化内存的指针以及要从该指针读取的字节数。

接受 a 的接口`void *`将不知道任何数据结构，例如由 STL 实现的。`void *`需要来自没有指针的平面结构和非常稳定的二进制格式。C++ 术语是“标准布局”，最简单的事情是根本不使用任何 C++ 特性。

在这种情况下，您可以编写类似

```
struct testB
{
    char guid[ 36 ]; // ASCII representation of hex of GUID
    testA userData;
}; 
```

但实际上最好的办法是将 GUID 放在此 blob 之外的另一个数据库列中。数据库可能会优化 GUID 的存储，您可能还希望按 GUID 查找记录。

# asp.net - Relative Path in Web.config When DataBase not inside the App_Data

> ID：10767361
> 
> 赞同：2
> 
> 时间：2012-05-26T15:10:39.873
> 
> 标签：asp.net, web-config

How I can get relative path for ConnectionSetting Web.config in my web site

When DataBase Not inside the App_Data Folder

I try to use This

```
~/dataBase/mydatabase.mdf.................. 
```

But not Work

any help please

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T00:35:22.030

您可以通过设置它来更改[`|DataDirectory|`](http://msdn.microsoft.com/en-us/library/ms254504.aspx)指向的路径[`AppDomain.SetData`](http://msdn.microsoft.com/en-us/library/37z40s1c.aspx)：

```
AppDomain.CurrentDomain.SetData("DataDirectory", myNewDataDirectory); 
```

# database - 有人可以解释用户帐户如何在网页上工作吗？

> ID：10767362
> 
> 赞同：0
> 
> 时间：2012-05-26T15:10:49.157
> 
> 标签：database, user-accounts

有人可以解释用户帐户如何在网页上工作吗？

www.website.com/profile? `uid=15636373282`
或
www.website.com/profile/`15636373282`

据我所知，每个用户都有唯一的 uid。

网站是否为服务器上的每个用户个人资料文件夹创建存储用户个人资料网页和图片、视频？

我知道用户名和密码存储在数据库中，但我认为将用户个人资料页面、图片、视频存储在数据库中，这太疯狂了。

有人可以帮我理解吗？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:16:24.897

任何用户配置文件都有两部分：配置文件文本字段和媒体数据。

文本字段（id、name、desctption、出生日期等）存储在数据库中；

基本上媒体数据（头像图像，另一个文件）存储在磁盘上的某个文件夹中，并且用户 ID 引用该文件夹。

是的，该站点会创建此文件夹。媒体文件不应存储在数据库中！

“个人资料网页”是抽象的概念。站点通常在运行时使用数据库中的上述参数和媒体数据（例如插入图片链接到页面 html）生成此页面

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T15:19:38.683

不会。网站不会为每个用户创建文件夹。这`?uid=15636373282`只是 Web 服务器从数据库中获取和检索的参数。

是的，个人资料页面、图片和视频大部分都存储在数据库中。尽管它们可能存储在不同的服务器中。一些站点将大量数据存储在租用或租用的服务器上，或者一些提供云存储（如 Amazon EC2）的公司

# silverlight - silverlight read email

> ID：10767363
> 
> 赞同：0
> 
> 时间：2012-05-26T15:10:49.623
> 
> 标签：silverlight, email

I'm using VS2010, C#, silverlight 4, I'm going to read gmail, yahoo and outlook accounts and display their inboxes, (gmail & yehoo have more importance), how can I do that? it is almost straightforward in ASP.NET using SMTP, but how is it done using silverlight? I've seen a very similar question, but I'm searching for some practical code if possible

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:57:10.387

创建一个 WCF 服务，它将作为将在服务器上完成的真实 SMTP 服务器调用的外观，并使用一些 WCF api 从 silverlight->WCF->Server SMTP 调用操作这些电子邮件帐户。

# c# - 将参数从 ConfirmNavigationRequest 传递到 Prism 中的 NavigationService

> ID：10767366
> 
> 赞同：1
> 
> 时间：2012-05-26T15:11:11.727
> 
> 标签：c#, wpf, mvvm, navigation, prism

*我有一个实现的视图模型，`IConfirmNavigationRequest`我[需要将信息](http://msdn.microsoft.com/en-us/library/gg430861%28v=pandp.40%29.aspx#sec10)从这个视图模型传递到我拥有的导航代理类，该类不耦合到任何特定的视图或视图模型。*

相反，导航代理类可以访问`IRegion`感兴趣的对象以及`IRegionNavigationService`.

### ViewModel 向 Uri 添加参数

```
 public override void ConfirmNavigationRequest(NavigationContext navigationContext,
                                                  Action<bool> continuationCallback)
    {
        _verificationCount++;
        navigationContext.Parameters.Add("Count", _verificationCount.ToString());
        continuationCallback(Verify());
    } 
```

### 需要访问传递参数的导航代理

```
 // Some method
    _region.RequestNavigate(new Uri(_nextView, UriKind.Relative), NavigationCallback);

    private void NavigationCallback(NavigationResult navigationResult)
    {            
        if (navigationResult.Error == null)
        {
            if (navigationResult.Result == true)
            {
                // Need to evaluate the Count argument here
                // int count = ...
                // if (count < 5)
                QueueNextView();                     
            } else
            {
                Debug.WriteLine("Navigation Cancelled");
            }
        }
        else
        {
             Debug.WriteLine("Navigation Error");                
        }
    } 
```

### 如何在 ViewModel 之外通过 Region 或 NavigationService 访问参数？

*   我找不到`NavigationContext`通过`NavigationService`或访问的方法`Region`？
*   我也试过这个`_region.NavigationService.Journal.CurrentEntry.Uri.OriginalString`但它没有显示任何查询信息，只是注册的查看字符串名称

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:33:44.957

Agustin Adami[在这里提供了答案](http://compositewpf.codeplex.com/discussions/357297)：

```
navigationResult.Context.Parameters["Count"]; 
```

# objective-c - 为什么 {} 适用于 C 结构而不适用于属性

> ID：10767371
> 
> 赞同：4
> 
> 时间：2012-05-26T15:11:37.643
> 
> 标签：objective-c, syntax, properties, struct

前几天我遇到了一些通过使用花括号来设置 C Structs 的值的东西，它工作得很好，但我想知道为什么我不能用它来设置属性的值？

```
//This works:
CGPoint pt = {10, 20};
CGRect rct = {0, 5, 50, 50};

//But this doesn't:
self.frame = {0, 5, 50, 50};
imageview.center = {100, 120}; 
```

编译器错误是“预期的表达式”

我想我知道为什么这不起作用，但我想要更彻底的解释。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T15:33:16.713

第一行结合了变量的声明和初始化。编译器从左表达式的类型推断出右表达式的类型，并按预期分配结构槽中的数字。

然而，最后几行不是初始化。现在编译器不会推断任何东西。结果，编译器不知道它应该如何解释右边的东西。它的类型是什么，如何在内存中布局这些数字？编译器不会假定它的 CGrect 或 CGPoint，您必须帮助他进行显式强制转换 (CGRect){0,5,50,50}，这会为他提供缺失的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T15:12:30.667

这应该有效：

```
self.frame = (CGRect){0, 5, 50, 50};
imageview.center = (CGPoint){100, 120}; 
```

# ruby - How to batch convert mp4 files to ogg with ffmpeg using a bash command or Ruby

> ID：10767373
> 
> 赞同：6
> 
> 时间：2012-05-26T15:11:41.747
> 
> 标签：ruby, video, ffmpeg, html5-video, ogg

I am running a OSX, don't know tons about video conversions. But I have like 200 videos that are all in mp4 format and won't play in Firefox. I need to convert them to ogg to use the html5 video tag.

These files live in a folder structure that makes it hard to do files one at a time. I would like the bash command or Ruby command to go through all child folders and find all .mp4's and convert them.

I found one reference of how to do this with Google: [http://athmasagar.wordpress.com/2011/05/12/a-bash-script-to-convert-mp4-files-to-oggogv/](http://athmasagar.wordpress.com/2011/05/12/a-bash-script-to-convert-mp4-files-to-oggogv/)

```
#!/bin/bash
for f in $(ls *mp4 | sed ‘s/\(.*\)\..*/\1/’)
do
ffmpeg -i $f.mp4 -acodec vorbis -vcodec libtheora $f.ogg
done 
```

But have no idea how to convert this from linux to osx.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T02:24:24.553

虽然您的问题的直接答案是这样的：

```
#!/bin/bash
MOVIES=~/Movies/
find "$MOVIES" -name '*.mp4' -exec sh -c 'ffmpeg -i "$0" -sameq "${0%%.mp4}.ogg"' {} \;
exit; 
```

我认为您可能会使用[VP8 或 webm 编解码器](http://www.webmproject.org/)找到更好的结果，因为它会给您带来更好的结果，并且实际上是现代版本的 Firefox 的[首选](https://developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements)。鉴于此，你应该试试这个：

```
#!/bin/bash
MOVIES=~/Movies/
find "$MOVIES" -name '*.mp4' -exec sh -c 'ffmpeg -i "$0" -sameq "${0%%.mp4}.webm"' {} \;
exit; 
```

这两种方法都会导致您生成的视频质量下降，因为它们正在重新编码已经编码的材料，而且在我看来，即使是 webm 编解码器也远不如使用 h.264 正确编码的 MP4编解码器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-26T16:26:42.617

这是使用 Ruby，假设您使用的 ffmpeg 是正确的：

```
Dir.glob("**/*.mp4").each do |filename|
  new_filename = File.join(
    File.dirname(filename),
    "#{File.basename(filename, ".mp4")}.ogg")
  `ffmpeg -i "#{filename}" -acodec vorbis -vcodec libtheora "#{new_filename}"`
end 
```

Dir.glob 以`"**/*.mp4"`递归方式匹配子目录中带有 .mp4 扩展名的所有文件。

# wpf - Clicking a button(with no id) using mshtml in wpf web browser

> ID：10767374
> 
> 赞同：1
> 
> 时间：2012-05-26T15:11:48.687
> 
> 标签：wpf, browser, mshtml

I'm trying to fill a WPF WebBrowser page using mshtml. But, I'm not able to find out the id of the button from the html. How can I find the ID? Or is there is any alternative to submit the form?

Code:

```
mshtml.HTMLDocument doc = (mshtml.HTMLDocument)browser.Document;

try
{     
    ((mshtml.HTMLInputElement)doc.all.item("?????")).click();
} 
```

Html page (Continue is the button text):

```
<li><a href="/uas/oauth/authenticate?oauth_token=3c708034-081f-4aca-b61c-f6518a1e0f8c&amp;trk=uas-continue" class="btn-primary">Continue</a></li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T19:47:09.610

中的`WebBrowser`控件与 中的控件`WPF`不同`WinForm`。

System.Windows.Controls.WebBrowser 控件有一个 Document 属性，该属性获取表示托管 HTML 页面的 Document 对象。

您需要将此 Document 对象转换为 COM 接口`IHTMLDocument2`，然后访问文档上的 all 属性以获取 HTML 文档中的每个元素。

```
mshtml.IHTMLDocument2 doc = webBrowser.Document as mshtml.IHTMLDocument2;
doc.all.item("link")).click(); 
```

请参考 MSDN 文章： [处理 HTML 元素事件](http://msdn.microsoft.com/en-us/library/bb508508%28VS.85%29.aspx#get_all)

类似的帖子：[从 WebBrowser 访问 DOM](https://stackoverflow.com/questions/12950413/accessing-dom-from-webbrowser)

# ios - 通过 UIButton 切换视图？

> ID：10767376
> 
> 赞同：1
> 
> 时间：2012-05-26T15:12:22.570
> 
> 标签：ios, uibutton

我有一个 Xcode 项目，想从一个文件切换视图，文件名是 Score（没有 xib，它只有 Score.h 和 Score.m），通过使用我的文件 Score.m 中的 UIbutton，但我不能这样做..

使用此代码：

```
UIButton *btn1 = [UIButton buttonWithType:UIButtonTypeCustom];
btn1.frame = CGRectMake(200, 400, img3.size.width/2, img3.size.height/2);
[btn1 setImage:img3 forState:UIControlStateNormal];
[btn1 setImage:img4 forState:UIControlStateDisabled];
[self addSubview:btn1];

if(btn1.selected) {
    View *second =[[View alloc] initWithNibName:nil bundle:nil];
    [self presentModalViewController:second animated:YES];
} 
```

我收到此错误： `Receiver type 'Score' for instance message doesn't declare a method with selector 'presentModalViewController : animated`

请帮忙 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T21:30:24.867

您收到的错误消息表明，Score（您尝试从中推送新 ViewController 的类）不是 ViewController。只有 ViewController 可以呈现其他 Viewcontroller。演示文稿的代码应该是（放置在 ViewController 中）：

```
if(btn1.selected) {
    UIViewController *second =[[UIViewController alloc] initWithNibName:nil bundle:nil];
    [self presentModalViewController:second animated:YES];
    [second release]
} 
```

# android - 收到新消息时如何播放媒体文件？

> ID：10767387
> 
> 赞同：0
> 
> 时间：2012-05-26T15:13:15.177
> 
> 标签：android, notifications, message

我想创建一个 Android 应用程序以在收到来自特定发件人的消息时播放录制的声音剪辑，所以我将此代码放在我的 smsReceiver(Broadcastreceiver)

`NotificationManager nm = (NotificationManager)` `context.getSystemService(Context.NOTIFICATION_SERVICE);`

```
 Notification notification = new Notification();        
     notification.sound = Uri.parse("android.resource://com.example.newgps/raw/calmpiano");

 nm.notify(0, notification); 
```

但它播放声音的一部分。我能做些什么来解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-04T11:02:37.907

您不需要附加`\raw`到资源 URI。在运行时，所有内容都被编译到带有 ID 的单个目录中，这意味着调用`R.raw.*`指的是原始资源，即使所有资源实际上都在同一个目录中。

```
notification.sound = Uri.parse("android.resource://" + getPackageName() + "/" + R.raw.calmpiano); 
```

您还可以使用 指定一些额外的设置`notification.default`，但**不要使用`DEFAULT_SOUND`**。如果定义了默认声音，它将覆盖自定义声音。

# ruby - 新的 IRB 会话如何获得其可变范围？

> ID：10767388
> 
> 赞同：2
> 
> 时间：2012-05-26T15:13:20.217
> 
> 标签：ruby, scope, irb

IRB 是在 Ruby 中玩耍和测试事物的好方法。也可以使用脚本进行一些设置，如下所示：

```
require 'irb'

class Pirate
  def greet
    puts "Arrrrr, nice to meet ya"
  end
end

IRB.start # You can now instantiate Pirate in IRB 
```

但是，我不清楚的一件事是执行此操作时的变量范围。如果我在之前添加这些行`IRB.start`：

```
smithy     = Pirate.new
@blackbard = Pirate.new 
```

...`@blackbeard`将在 IRB 中可用，但引用`smithy`将获得`undefined local variable or method 'smithy' for main:Object`.

为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T15:41:30.803

用于评估代码的[`Binding`](http://apidock.com/ruby/Binding)设置在`irb/workspace.rb:51`（我在这里指的是 Ruby 1.9.3 rev 35410）：

```
@binding = eval("def irb_binding; binding; end; irb_binding",
                TOPLEVEL_BINDING,
                __FILE__,
                __LINE__ - 3) 
```

这意味着您的 IRB 会话与顶级方法中的代码在相同的上下文中运行。观察：

```
puts "Outer object ID: %d" % self.object_id
puts "Outer binding: " + binding.inspect
smithy     = Pirate.new
@blackbard = Pirate.new

def test
  puts "Inner object ID: %d" % self.object_id
  puts "Inner binding: " + binding.inspect
  p @blackbard
  p smithy
end
test 
```

输出：

```
Outer object ID: 13230960
Outer binding: #<Binding:0x00000001c9aee0>
Inner object ID: 13230960
Inner binding: #<Binding:0x00000001c9acd8>
#<Pirate:0x00000001c9ada0>
/test.rb:18:in `test': undefined local variable or method `smithy' for main:Object (NameError)
    ... 
```

请注意，对象上下文 ( `self`) 在函数内部和外部都是相同的。这是因为每个顶级方法都添加到全局`main`对象中。

另请注意，方法内部和外部的绑定不同。在 Ruby 中，每个方法都有自己的名称范围。这就是为什么您不能从 IRB 内部访问本地名称，而您可以访问实例变量的原因。

老实说，IRB 并不是 Ruby 软件中最辉煌的一块。我通常将[Pry](http://pry.github.com/)用于这种东西，你可以使用它：

```
require 'pry'
binding.pry 
```

并拥有一个可以访问当前局部变量的会话。

# android - Android - 我应该怎么做才能在一个地方为标题设置按钮侦听器？

> ID：10767396
> 
> 赞同：0
> 
> 时间：2012-05-26T15:14:27.687
> 
> 标签：android, android-layout

我正在尝试为标题导航创建按钮侦听器，以便侦听器可以位于某个地方。

我希望做出这样的方法：

```
public void set_nav_listeners ( )
{
    Button planBusiness = (Button)findViewById(R.id.home_header);
    Button questions_header = (Button)findViewById(R.id.questions_header);

    learn_header.setOnClickListener(new Button.OnClickListener() 
{  
    public void onClick(View v) 
    {                   
      Intent myIntent = new Intent(ProblemioActivity.this, LearnActivity.class);
      ProblemioActivity.this.startActivity(myIntent);
    }
});

questions_header.setOnClickListener(new Button.OnClickListener() 
{  
    public void onClick(View v) 
    {                   
      Intent myIntent = new Intent(ProblemioActivity.this, QuestionsActivity.class);
      ProblemioActivity.this.startActivity(myIntent);
    }
}); 
} 
```

并在那里传递参数，使其适用于每个活动。所以像这样的调用会起作用：

```
public class RandomActivity extends Activity
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        // For checking if the person is logged in.
        set_nav_listeners ( ---> What parameters can I pass so it would work? <---- );
        ... 
```

那可能吗？我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:25:38.857

最好创建一个类并扩展它。

**公共类 RandomActivity 扩展 BaseActivity**

```
public class BaseActivity extends Activity {

    @Override
    public void setContentView(int layoutResID) {
        super.setContentView(layoutResID);

        findViewById(R.id.home_header).setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Toast.makeText(BaseActivity.this, "HITESTING!!!",
                        Toast.LENGTH_LONG).show();

            }
        });

    }

} 
```

# ios - iPhone 上的 OpenCV.framewok

> ID：10767398
> 
> 赞同：-1
> 
> 时间：2012-05-26T15:14:29.453
> 
> 标签：ios, opencv, frameworks

使用此来源[https://github.com/aptogo/OpenCVForiPhone](https://github.com/aptogo/OpenCVForiPhone) 当我尝试导入时，我在 opencv2/stitchin/warpers.hpp "#include "detail/warpers.hpp" file not found" 中出现错误... 谁可以帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:38:55.507

我有同样的问题..但是当我在拼接文件夹中创建一个名为“detail”的新文件夹时，它解决了这个问题..您必须在 opencv 中编辑某些头文件以反映此更改。

# database-design - 在 mongodb 中我应该创建两个集合还是一个如果我有一个大字符串字段

> ID：10767400
> 
> 赞同：0
> 
> 时间：2012-05-26T15:14:35.943
> 
> 标签：database-design, mongodb

这是实际案例的简化大纲，

如果我有以下 4 个字段，即名称、图片、生物文本、生物 html。

问题：我应该有 2 个集合，即 users-only 和 users-with-bio，还是应该只有一个集合，即 users-with-bio

使用模式：鉴于很多时候我只想要名称和图片，因此仅查询用户会得到我想要的，并且在需要时我可以查询用户和生物

注意 1：我知道在上面的简单示例中，我可以只索引名称和图片字段，因此永远不会检索到文档，但在实际示例中，有更多“较小的字段”，因此不能对所有这些字段进行索引.

注 2：如果 bio-text 大约为 500 到 750k 和 bio-html 750k 到 1mb 并且在任何时候我都只想要 text 或 html 但绝不会两者兼而有之，那么拥有 3 个集合是否有意义，即仅限用户，用户 - with-text 和 users-with-html ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T21:29:33.847

只需保留一个集合，并使用投影选项仅检索查询时需要的字段。在你对任何东西进行基准测试之前，甚至不要优化这个。我怀疑你会发现一点不同。

# python - 如何将配置数据保存在文件中

> ID：10767403
> 
> 赞同：1
> 
> 时间：2012-05-26T15:14:55.237
> 
> 标签：python, module

我确实有一个模块`config.py`，其中包含指示配置数据的变量。

例如：

```
logfile_enable = True
logfile_name = "debug.log"
logfile_maxsize = 100*1024 # 100KB
logfile_backupCount = 1 
```

然后我可以`import config`在每个项目脚本中，并通过`config.VAR`（`config.maxsize`例如）访问数据。

关闭应用程序后，我确实想保存对模块的更改。我考虑过腌制`__dict__`模块并以某种方式将其重新设置为启动，但我似乎失败了，因为你不能`__dict__`从模块本身调用。

我不想在其中使用类和字典。我认为`config.VAR`脚本中的语法更清晰，我不想在每次导入时都初始化一个新的类对象。

我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T15:23:59.040

为此，我使用了标准库[ConfigParser 模块](http://docs.python.org/library/configparser.html)，然后有一个全局配置对象，因此在所有文件中，您都说实例化对象`from config import config`在哪里，您可以从文件中读取内容并保存到文件中。`config``ConfigParser`

# java - 如果第一个维度是 0 长度，是否可以检索二维数组的第二个维度长度？

> ID：10767405
> 
> 赞同：0
> 
> 时间：2012-05-26T15:15:00.527
> 
> 标签：java, arrays, multidimensional-array

嗯，这可能是一个奇怪的问题，也许只是因为我对 Java 不够熟悉。

所以，我声明了一个 2D int 数组：

```
int[][] arr = new int[0][10] 
```

现在，如您所见，第二维的长度为 10，而第一维的长度为 0。我不确定 Java 是如何处理这类数组的，但编译器不会产生任何错误，这意味着它是合法的宣言。

好吧，我将数组传递给某个函数，我想从函数中检索第二维的长度。当然是这样的：

```
arr[0].length 
```

不会工作。还有另一种方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T15:16:48.657

`new int[0][10]`和创建的对象`new int[0][20]`是等价的。这里*没有*逻辑上的“第二维度”。实际上你正在运行这样的东西：

```
int[][] createArray(int d1, int d2) {
    int[][] ret = new int[d1][];
    for (int i = 0; i < d1; i++) {
        ret[i] = new int[d2];
    }
    return ret;
} 
```

现在，如果您将其转换为您的场景，您将得到*永远不会读取`d2`*的代码。

如果要表示通用*矩形*数组（而不是数组数组），您可能需要考虑为其创建自己的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T15:21:06.173

Java 中的数组以及大多数其他编程语言中的数组都是从零开始的。考虑这个二维数组：

```
int[][] arr = new int[1][10]; 
```

这意味着其中有一行十列。

现在，考虑这个数组：

```
int[][] arr = new int[0][10]; 
```

这意味着其中有零行和（无关数量的列）。

如果你尝试索引到第二个数组，你会发现你做不到——长度为零的数组没有起点。

编译器认为它是有效的，因为您使用它声明了维度，但您将无法在 Java 中以任何有意义的方式实际使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T15:29:35.437

没有第二维的长度这样的东西。考虑：

```
int[][] arr = new int[10][10];
arr[5] = new int[42]; 
```

第二维的长度是多少？10 还是 42？

不，这种方式行不通。`arr`是一个有十个元素的数组，每个元素都必须是一个 int 数组的引用（或 null）。这就是所有要说的。

# java - javafx 2网格窗格行在使用percentHeight时重叠

> ID：10767406
> 
> 赞同：2
> 
> 时间：2012-05-26T15:15:09.903
> 
> 标签：java, layout, javafx, javafx-2, gridpanel

我正在尝试在 JavaFX 中布局我的屏幕并且在使用 GridPane 时遇到问题。我有 2 行 - 其中之一的 percentHeight 设置为 80，另一行设置为 20，但我看到的是一行与另一行重叠

这是一个小插图（如果您可以这样称呼它:)），希望能证明我的意思（数字表示行号，“*”表示重叠）

```
1   label1     <--- belongs to row 1
1   list1
1   |
1   | 
1   |
12  |  *  label2   <---  belongs to row 2
12  |  *  list2
 2        |
 2        | 
```

有人遇到过这个问题吗？我做错什么了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T17:48:46.007

只需找出问题所在 - 在我的布局中，我使用了嵌套网格窗格，它们的内容是自动生成的 - 没有添加行约束..

当它发现如果没有将行约束添加到网格窗格中，则使用默认约束，这些默认值具有最小尺寸，这导致它们自身的网格窗格具有“未声明”/隐式最小尺寸，这就是我添加约束的原因（ 80 : 20%) 被忽略 - 因为不同网格的隐式最小尺寸并没有为重新调整大小留下太多空间，最后 - 因为在计算了网格的最小尺寸后，页面中没有足够的空间来显示他们 - 他们重叠。

令人失望的是 - 我使用了 showGridLines 并且显示的行没有反映最小行大小。

在我手动添加最小大小为 0 的行约束后，问题得到了解决。

# haskell - Haskell“申请”？

> ID：10767407
> 
> 赞同：20
> 
> 时间：2012-05-26T15:15:34.223
> 
> 标签：haskell, types, lisp, polyvariadic

> **可能重复：**
> [为什么在haskell中不允许这样的函数定义？](https://stackoverflow.com/questions/6168880/why-is-such-a-function-definition-not-allowed-in-haskell)

我是从 Lisp 迁移过来的 Haskell 世界的新手。我正在努力适应 Haskell 完全不同的世界观，而我发现许多新的和令人兴奋的事情之一就是类型系统。作为一个 Lisper，我想我会尝试在 Haskell 中实现一个在 Lisp 世界中非常重要的功能：`apply`. 对于那些不知道的人，apply 接受一个函数和一个参数列表，并在这些参数上调用函数。在 Scheme 中，`(apply + '(1 2 3))`与调用 相同`(+ 1 2 3)`，返回 6。

我的 Haskell 代码如下所示：

```
apply x [] = x
apply f (x:xs) = apply (f x) xs 
```

但是 Haskell 抱怨说：

```
ERROR line 2 - Type error in function binding
*** Term           : apply
*** Type           : (b -> a) -> [b] -> a
*** Does not match : a -> [b] -> a
*** Because        : unification would give infinite type 
```

我想我明白为什么。Apply 的类型需要根据给出的列表的长度而有所不同。给定一个包含 3 个项目的列表，apply 的类型需要是: `(a -> a -> a -> b) -> [a] -> b`，但是给定一个包含 6 个项目的列表，apply 的类型需要是: `(a -> a -> a -> a -> a -> a -> b) -> [a] -> b`。

我尝试了这个可怕的解决方法：

```
data FnOrDat a b = Dat b | Fn (a -> FnOrDat a b)

apply :: (FnOrDat a b) -> [a] -> (FnOrDat a b)
apply x [] = x
apply (Fn f) (x:xs) = apply (f x) xs
apply (Dat _) _ = error "Cannot apply something which is not a function!"

add a = Fn (\b -> Dat (a + b))

main = putStrLn $ show $ x where Dat x = apply (Fn add) [5,1] 
```

这行得通，但它几乎不能算作一个`apply`函数，因为我不能传递`apply`一个普通的函数，我必须使用一个专门编写的函数来使用我的（尴尬的）FnOrDat 抽象。如果我想编写一个添加四个数字的函数，我需要编写

```
add4 a = Fn (\b -> Fn (\c -> Fn (\d -> Dat (a + b + c + d)))) 
```

嗯。

那么 - 我是否遗漏了什么，或者要求一个通用的，`apply`基本上就像要求一个可以操作任意长度元组的函数？在 Haskell 的静态类型世界观中是否`apply`有意义？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-26T15:21:01.980

`apply`在 Haskell 中不是很有用，因为你不能给函数一个类型。正如您在 FnOrDat 中看到的那样，您实际上是将 Lisp 语言作为 EDSL 嵌入到 Haskell 中以强制通过。

> 要求通用应用基本上就像要求可以操作任意长度元组的函数？

确切地。您可以为某些有用的类型组合提供类型类实例，但实际上并不需要或使用通用 variadic `apply`。

* * *

作为旁注，您应该考虑升级到 GHC 和[Haskell 平台](http://haskell.org/platform)，而不是过时的 Hugs 系统，因为您错过了过去 10 年开发的大多数库、工具和语言功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T15:36:48.567

尽管有 Don 的解释，`foldl1 (+)`但实际上会添加列表的所有元素。因此，可以说`fold`函数族非常接近`apply`OP 所描述的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T14:39:01.677

> ... 在 Lisp 世界中非常重要的一个函数：**apply**。对于那些不知道的人，**apply 接受一个函数和一个参数列表**，并在这些参数上调用函数。在 Scheme 中，**(apply + '(1 2 3))** 与调用**(+ 1 2 3)**相同，并返回**6**。...

这很简单：

```
foldr  (+) 0 [1,2,3]
foldr1 (+)   [1,2,3] 
```

结果为 6。

要将函数应用于列表的每个元素：

```
map f list 
```

例如

```
map (2*) [1,2,3] 
```

结果 [2,4,6]

这是你想要的？

# java - 使用正则表达式从两种不同类型的字符中提取文本

> ID：10767408
> 
> 赞同：0
> 
> 时间：2012-05-26T15:15:49.110
> 
> 标签：java, regex

我正在尝试从具有两种不同类型字符的文本中提取字符串。字符是`|`和`#`，文本来自外部来源。

我给你举个例子：

*   输入：`#hello|#what|whatsup|`应该返回`hello|`和`whatsup`。
*   输入：`#hello#`应该返回`hello`
*   输入：`|ola|1`应该返回`ola`
*   输入：`|hello#|what#whatsup#node`应该返回`hello#`和`whatsup`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:30:28.633

由于`#||##||MiddleRecursion||##||#`--> `||##||MiddleRecursion||##||`，恐怕您必须进行括号匹配。在这种情况下，将没有使用正则表达式的通用解决方案（如果您知道 | 和 # 的最大连续出现次数，则可以强制它工作）。原因是，有中间递归；正则表达式只能解决左递归或右递归。

这也是使用正则表达式无法进行 HTML 解析的原因之一**。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T15:35:16.327

好的，我要开始了。

所以你必须匹配#something# 或|something|

你能写两个独立的正则表达式来做到这一点吗？

你首先会生气的地方是管道`|`是正则表达式中的一个神奇字符。如果你想匹配那个字符，你必须`\\`按照我链接的另一个线程在它前面加上前缀。

当你有这两个正则表达式工作时，让我知道，我会发布更多。

（我要出去几个小时……）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T16:09:30.697

这适用于您的字符串。我不知道我是否完全理解您的需求，但我认为如有必要可以对其进行调整：

```
 String s1 = "#hello|#what|whatsup|";
     String s2 = "#hello#";
     String s3 = "|ola|1";
     String s4 = "|hello#|what#whatsup#node";

     Pattern pattern = Pattern.compile("((\\w)+)(\\||#)(\\||#)?");
     Matcher matcher = pattern.matcher(s4);
     while(matcher.find()) {
         System.out.println(matcher.group(1) + (matcher.group(4) != null ? matcher.group(4).equals("|")? "#" : "|" : ""));
         matcher.find(); //to jump over the next match
     } 
```

更新：我刚刚阅读了中间递归示例。恐怕不行，而且我必须离开我的电脑一段时间。所以这只是让你开始的东西。

适用于所有示例的更新版本：

```
 String s1 = "#hello|#what|whatsup|";
     String s2 = "#hello#";
     String s3 = "|ola|1";
     String s4 = "|hello#|what#whatsup#node";
     String s5 = "#||##||MiddleRecursion||##||#";

     Pattern pattern = Pattern.compile("(#|\\|)((#|\\|)*\\w+(#|\\|)*)(#|\\|)");
     Matcher matcher = pattern.matcher(s1);
     while(matcher.find()) {
         System.out.println(matcher.group(2));
     } 
```

# mysql - 如何在 MySQL 的 DECIMAL 类型的字段中插入浮点数？

> ID：10767409
> 
> 赞同：1
> 
> 时间：2012-05-26T15:15:54.193
> 
> 标签：mysql, decimal

我有`field_name`以下类型的字段`DECIMAL (10, 2)`。我想在这个字段中插入一个浮点数。我有以下 SQL 查询：

```
UPDATE `table_name` SET `field_name` = "0,20" WHERE `primary_key` = 1;

SELECT `field_name` FROM `table_name` WHERE `primary_key` = 1;

>> 0.00 
```

如何写一个浮点数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:19:36.983

使用小数点`.`而不是逗号`,`：

```
UPDATE table_name SET field_name = 0.20 WHERE primary_key = 1 
```

但是，请注意`DECIMAL`类型是*fixed-point*，而不是*floating-point*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T15:19:54.820

试试这个：

```
UPDATE `table_name` SET `field_name` = 0.20 WHERE `primary_key` = 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T15:18:46.177

```
UPDATE `table_name` 
SET `field_name` = 0.20 
WHERE `primary_key` = 1; 
```

它被称为浮点数**-**所以使用**点**而不是逗号。而且由于它不是字符串，因此您不需要在其周围加上引号。

# windows - Windows 重新武装计数

> ID：10767412
> 
> 赞同：1
> 
> 时间：2012-05-26T15:16:04.397
> 
> 标签：windows, activation

不确定这是否属于这里，因为它在技术上不是“编程”问题，但我正在编写一个小应用程序，通过解析 slmgr.vbs 脚本的输出来显示 Windows 激活信息。

现在在我当前的系统（已激活）中，当我运行`slmgr.vbs -dlv`它说`Remaining Windows rearm count: 3`有意义的命令时，因为从我读过的内容来看，您总共可以使用 -rearm 命令 3 次。而且我从来没有在我的电脑上运行过它。

但是当我`slmgr.vbs -dlv`在使用 Windows 7 试用版的虚拟机上运行时，并且在我的另一台计算机上安装了 Windows 7 跟踪来测试事物时，输出显示`Remaining Windows rearm count: 4`

有人可以解释为什么它说我可以使用 -rearm 命令 4 次吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:55:34.690

> Windows 脚本宿主
> 
> 软件许可服务版本：6.1.7601.17514
> 
> 名称：Windows(R) 7，终极版
> 
> 说明：Windows 操作系统 - Windows(R) 7，OEM_SLP 通道
> 
> 激活 ID：xxxx
> 
> 申请编号：nun.ya
> 
> 扩展PID：Nun.ya
> 
> 安装ID：Nun.ya
> 
> 部分产品密钥：Nun.ya
> 
> 许可证状态：初始宽限期
> 
> 剩余时间：7860 分钟（5 天）
> 
> **剩余的 Windows 重装计数：5**
> 
> 可信时间：2012 年 11 月 6 日上午 11:47:46

* * *

我不知道你们从哪里得到你的信息，但正如你所看到的，重新武装的数量可能大于 3 甚至 4..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T15:58:41.257

在试用版 Windows 7 中，rearm 计数设置为 4，一旦跟踪转换为完整版本，相同的 rearm 计数默认设置为 3。或者，当您安装完整版 Windows 时，默认设置为 3。

# jquery - 来自 li:nth-child(xy) 的 jQuery .parent()

> ID：10767419
> 
> 赞同：0
> 
> 时间：2012-05-26T15:16:54.540
> 
> 标签：jquery, parent, css-selectors

我希望在这里找到帮助，我被卡住了。

我使用此函数在菜单中获取确切的活动 li 元素（使用 nth-child）：

```
function getElementPathWithJquery(element) {
    return $(element).parents().andSelf().map(function() {
        var $this = $(this);
        var entry = '';        
        if(this.nodeName === "BODY" || this.nodeName === "HTML") {
        // do nothing
        } else {
        entry += this.nodeName;
        if (this.className) entry += "." + this.className.replace(/ /g, '.');
        if (this.id) entry += "#" + this.id;
        if ($this.siblings(entry).length > 0) entry += ":nth-child(" + $this.prevAll(entry).length + ")";
        }
        return entry;
    }).get().join(" ");
} 
```

现在，在请求的级别，父 li 元素将获得一个 addClass('active') 属性，但以下内容不起作用：

```
if( $('#MENU_MAIN').find("ul.menu-level-3>li").hasClass('active')) {
var path = getElementPathWithJquery($('#MENU_MAIN').find("ul.menu-level-3>li.active"));
$(path).parent().parent().css('border','3px solid red');
} 
```

我需要确切的第 n 个元素的原因是菜单系统是一个类别系统，一个条目实际上可以属于更多类别。像这样的解决方案：

```
$('#MENU_MAIN').find("ul.menu-level-3>li.active").parent().parent().css('border','3px solid red'); 
```

有效，但根据找到的条目所属的类别数量，不止一个父 li 可能有红色边框。

谢谢你的帮助！问候，罗伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:51:29.197

您可以[`parents()`](http://api.jquery.com/parents/)用来获取所有元素的祖先；您可以使用选择器来限制结果。

# html - IE8中的圆角，部分div溢出到其他div不可见

> ID：10767421
> 
> 赞同：1
> 
> 时间：2012-05-26T15:17:40.730
> 
> 标签：html, css, internet-explorer-8, rounded-corners

我正在尝试创建一些圆角的 div（应该是按钮）。我可以使用border-radius.htc 或PIE.htc 来实现它。

我使用 margin-top 定位它们。流到下面另一个 div 的按钮部分不可见，它应该是不可见的。检查截图：

![在此处输入图像描述](../Images/e0b1bc1fb088630095cd5397ea8c6a74.png)

```
.menu_buttons{
       margin-top:45px;
       overflow: visible;
       margin-left: 10px;
       width: 85px;
       height: 3em;
       vertical-align: middle; 
       float:left;
       cursor: pointer;
       text-align: center;
       font: 0.9em Arial, Helvetica, sans-serif;

       border-radius: 10px;
       behavior: url(PIE.htc);

} 
```

。对角线：

```
.diagonal{

    background-image: linear-gradient(left top, #CFD993 30%, #8DA900 68%);
    background-image: linear-gradient(-45deg, #CFD993 30%, #8DA900 68%);
    background-image: -o-linear-gradient(left top, #CFD993 30%, #8DA900 68%);
    background-image: -moz-linear-gradient(-45deg left top, #CFD993 30%, #8DA900 68%);
    background-image: -webkit-linear-gradient(135deg, #CFD993 30%, #8DA900 68%);
    background-image: -ms-linear-gradient(left top, #CFD993 30%, #8DA900 68%);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#CFD993', endColorstr='#8DA900', GradientType=1); 
    /*background: #CFD993;*/

    background-image: -webkit-gradient(
            linear,
            left top,
            right bottom,
            color-stop(0.3, #CFD993),
            color-stop(0.68, #8DA900)
    );

} 
```

我的html的一部分：

```
<div class="diagonal" id="section1">
        <img alt="SMIC Service Management In the Cloud" src="/images/smic_small.png" id="smic">        
        <div class="link_menu">
            <button class="menu_buttons ui-corner-all smic_green" id="overview">Overview</button>
            <!--Some more <div....-->
            <button class="menu_buttons ui-corner-all smic_green" id="usage_benchmark">SMICloud<br>usage<br>benchmark</button>            
            <a class="menu_items" id="get_smic">Get SMICloud</a>
            <!--Some more <a....-->
            <a class="menu_items" id="contact">Contact</a>
         </div>  

    </div> 
```

将以下内容添加到 .diagonal 会根据以下屏幕截图更改外观：

```
position: relative;
z-index: -1; 
```

![在此处输入图像描述](../Images/d70e93bfe186a4380ed7dc087c1a9141.png)

尝试将 z-index -10 添加到 #section1 下方的 div 时，没有任何反应。

我完全被困住了。我该如何做到这一点，创建一个圆角的 div 溢出到另一个 div？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:38:58.757

您应该将定义分开，以防止出现奇怪的行为并节省调试时间。

`CSS`如果没有您提供的元素的剩余部分，您可以看到一个工作示例，在所有提到的浏览器上进行了全面测试，使用您的定义`div.menu_buttons`：

请参阅此[工作示例！](http://dl.dropbox.com/u/76169930/stackoverflow/question/10767421/border-radius.html)

**CSS**

```
.curved {
  -moz-border-radius:10px;        /* Firefox */
  -webkit-border-radius:10px;     /* Safari and chrome */
  -khtml-border-radius:10px;      /* Linux browsers */
  border-radius:10px;             /* CSS3 */
  behavior:url(border-radius.htc) /* Internet Explorer */
}

.menu_buttons {
  position:relative;
  top: 20px;
  margin-left: 10px;
  width: 85px;
  height: 60px;
  float:left;
  vertical-align: middle;    
  cursor: pointer;
  text-align: center;
  font: 0.9em Arial, Helvetica, sans-serif;
} 
```

**示例 HTML**

```
<div class="menu_buttons curved">.menu_buttons element</div> 
```

下载[border-radius.htc](http://curved-corner.googlecode.com/files/border-radius.htc)，并查看[CSS弯角Demos和Page](http://code.google.com/p/curved-corner/)。

* * *

# 经测试

**Windows XP 专业版 2002 Service Pack 3**

*   互联网浏览器 8.0.6001.18702
*   歌剧 11.62
*   火狐 3.6.16
*   Safari 5.1.2
*   谷歌浏览器 18.0.1025.168 m
*   K-Meleon 1.5.4

**Windows 7 家庭版服务包 1**

*   Internet Explorer 9.0.8112.164211C
*   歌剧 11.62
*   火狐12.0
*   Safari 5.1.4
*   谷歌浏览器 18.0.1025.168 m

**Linux Ubuntu 12.04**

*   火狐12.0
*   Chromium 18.0.1025.151（开发人员内部版本 130497 Linux）

* * *

# 已编辑

与 OP 对`CSS` `position`.

**没有`position`设置**的圆角 div 的[工作示例](http://dl.dropbox.com/u/76169930/stackoverflow/question/10767421/border-radius-no-position.html)！

* * *

# 已编辑

经过一番交谈后的最终修复是正确声明`position`元素包装器的 CSS 和元素本身。

具有正确声明的[小提琴示例！](http://jsfiddle.net/zuul/uBhuC/)`CSS`

# php - 在外部应用程序中从浏览器打开文本文件

> ID：10767424
> 
> 赞同：1
> 
> 时间：2012-05-26T15:17:45.910
> 
> 标签：php, zend-framework, google-chrome

我正在本地机器上使用 zend 进行开发。当我收到错误时，我会看到给我错误的 php 文件的链接。我想做的是能够单击该链接并在崇高的文本 2 中打开文件，这样我就有一段时间了。我已经安装了 chrome 扩展 LocalLinks 来让浏览器打开本地文件，但 php 文件只在浏览器中打开。对此有什么想法吗？

谢谢。

本地链接： [https ://chrome.google.com/webstore/detail/jllpkdkcdjndhggodimiphkghogcpida](https://chrome.google.com/webstore/detail/jllpkdkcdjndhggodimiphkghogcpida)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:27:10.477

为什么你只是简单地使用 CTRL+P（Mac 中的 CMD+P）通过输入一小部分名称来打开你需要的文件？

# c# - 数据层应用程序

> ID：10767427
> 
> 赞同：0
> 
> 时间：2012-05-26T15:19:12.947
> 
> 标签：c#, asp.net, database

我有关于 dataTier 应用程序的 Visual Studio 项目，我准备了一个项目，并且在同一个解决方案中，我有来自应用程序项目的窗口。

我想从项目中将 dataTier 项目作为参考添加到 Windows。我该怎么做？

Visual Studio 中的数据层项目没有 .exe 或 .dll 文件，因此我无法将其添加为参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:35:53.657

如果数据层项目在构建时成功编译，它将生成一个 .exe 或 .dll 文件。查看项目文件夹，您通常会在 \bin\Debug 或 bin\Release 子文件夹中找到它（取决于您使用的构建配置）。

但通常您不想以这种方式添加引用。如果您在 Visual Studio 中右键单击项目名称，您将看到一个包含“添加引用”菜单项的菜单。单击它，然后选择“项目”作为您要添加的参考类型。您应该会看到 Visual Studio 解决方案中包含的所有其他项目。只需选择您要引用的那个即可。

**编辑：**啊，我现在意识到你可能在谈论 SQL Server 数据层项目类型，它包含 SQL 脚本而不是编译代码，因此不能被 C# 项目引用。

那么，您实际上想在这里实现什么？

# javascript - 更新 javascript 日期对象

> ID：10767433
> 
> 赞同：0
> 
> 时间：2012-05-26T15:19:58.587
> 
> 标签：javascript, date, object

我正在尝试通过各种 j/script 本机日期对象方法更新日期对象，但对为什么更改似乎应用于页面上的所有日期对象感到困惑。

我最初发现了一篇建议向日期原型添加方法的帖子，但这改变了所有日期对象。然后我简化并发现两个日期仍在更新。我将不胜感激有关如何防止这种情况的任何建议。我想要的是通过看起来有点像这样的东西的starTime和endTime。（注意：我最终会变成一个函数）。

```
time1 = new Date();
alert(time1);//returns Sat May 26 11:15:41 EDT 2012
time2=time1;
time2.setMinutes(time2.getMinutes()+10);
alert(time1); //returns Sat May 26 11:25:41 EDT 2012
alert(time2);//returns Sat May 26 11:25:41 EDT 20112 
```

问题：如果我只更新 date2，为什么 date2=date1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T15:21:57.877

当你这样做时：

```
time2=time1; 
```

...您不是在创建一个*新* `Date`对象，您只是从两个单独的变量中指向日期对象。只有一个对象，因此无论您查看哪个变量，您对其所做的任何更改都很自然。

让我们向它扔一些 ASCII 艺术：

```
time1 = new Date(); 
```

这给了我们：

```
+-------+
+ 时间1 +
+-------+ +--------------+
| 价值 |---------------->| 日期对象 |
+-------+ +--------------+
```

现在当你这样做时：

```
time2=time1; 
```

我们有

```
+-------+
+ 时间1 |
+-------+
| 价值 |------+
+--------+ | +---------------+
               +--------->| 日期对象 |
               | +---------------+
+--------+ |
+ 时间2 | |
+--------+ |
| 价值 |------+
+-------+
```

和变量的*值*是对对象的*引用*，而不是它的副本。（所有对象都以这种方式工作。）您可以将*对象引用*视为在内存中找到对象的内存地址。*（实际上*是什么取决于实现。）`time1``time2`*`Date`*

 ***这与*原语*不同，其中变量的值实际上包含原语的数据，例如：

```
var n = 42; 
```

结果是

```
+-----------+
+ n |
+-----------+
| 值：42 |
+-----------+
```

（*理论上*。事实上，字符串“原语”会表现得好像这是真的，但实际上可能存储得更像对象。没关系，字符串是不可变的，`==`并且`===`对于字符串*原语*比较它们的内容，所以我们不能真正分辨出区别，我们可以假装它们实际上包含在变量中。[只是为了真正令人困惑：JavaScript 也有`Number`和`String` **objects**，它们的行为类似于对象。]）

* * *

请在下面回答您的问题：

> 在此期间，创建与先前存在的对象相同的第二个 javascript 对象的最有效方法是什么？

JavaScript 对象没有通用的“克隆”操作，因此答案因对象而异。有些对象不需要克隆，因为它们是不可变的（无法更改），因此不需要克隆（`String`例如对象）。

要克隆*date*，很容易：

```
time2 = new Date(time1); 
```

或者*更*高效：

```
time2 = new Date(+time1); 
```

（因为`+`告诉`time1`对象将自己转换为数字，然后`Date`构造函数使用该数字。没有它，`time1`对象将被要求将自己转换为字符串，然后`Date`构造函数将解析该字符串。仍然有效，但继续通过数字是一种微优化，几乎可以肯定是过早的优化——并且可能会干扰引擎可能想要使用的任何隐藏优化。所以我会选择`time2 = new Date(time1);`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T15:25:15.767

到目前为止发布的[两个](https://stackoverflow.com/a/10767444/139010) [答案都是正确的。](https://stackoverflow.com/a/10767449/139010)**解决方案**是创建第二个使用相同内部毫秒值的日期，从第一个复制：

```
var time1 = new Date();
var time2 = new Date(time1.getTime()); 
```

*现在*您有两个不同的日期实例，您可以彼此独立地操作它们。

```
var time1 = new Date();
alert(time1); // Sat May 26 2012 11:26:16 GMT-0400 (EDT)
var time2 = new Date(time1.getTime());
time2.setMinutes(time2.getMinutes()+10);
alert(time1); // Sat May 26 2012 11:26:16 GMT-0400 (EDT)
alert(time2); // Sat May 26 2012 11:36:16 GMT-0400 (EDT) 
```

更多阅读：[日期 - MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T15:22:58.630

当你这样做时：

```
time1 = new Date();  // <-- creates a new Date object
time2 = time1;       // <-- time2 gets passed a reference to the time1 object
                     //     making them effectively the same 
```

您在第一行创建了一个 Date 对象，但第二行并*没有*创建另一个 Date 对象，它只是指向或引用已经创建的 Date 对象。这是许多面向对象编程语言的共同特征。***

# .net - 如何使用 Web 浏览器控件填写 html 表单

> ID：10767434
> 
> 赞同：2
> 
> 时间：2012-05-26T15:20:21.107
> 
> 标签：.net, vb.net, vb6

在 VB6 经典中，我们可以这样做：

```
Private Sub Form_Load()
     WebBrowser1.Navigate2 "http://yourSite.com"
End Sub

Private Sub Command1_Click()
With Webbrowser1
     .Document.All("fieldName").Value = "some value"
     'click the button
     .Document.All("fieldName").Click
End With

End Sub 
```

但是在 VB.Net 中，我们得到没有`Value`属性的错误，所以我尝试了：

```
 With wb
     ' fill From field
     .Document.All("fieldName").SetAttribute("Value", strFrom)
     ' click the button now
     .Document.All("fieldName").RaiseEvent("Click")
  End With 
```

但即使这样也会产生错误：

```
Object reference not set to an instance of an object. 
```

在线的：

```
.Document.All("fieldName").SetAttribute("Value", strFrom) 
```

如何在 VB.net 中做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T05:51:35.180

我记得旧的 VB6 方式，如果你想在 VB.Net 代码中调用 HTML 元素的点击事件：

```
Private Function ClickSubmitButton()

Dim theButton As HtmlElement

Try

' Link the ID from the web form to the Button var
theButton = webbrowser1.Document.GetElementById("loginbutton")

' Now do the actual click.
theButton.InvokeMember("click")
Return True

Catch ex As Exception

Return False

End Try

End Function 
```

使用设置属性，试试这个作为一个例子（在我的脑海中）：

```
Dim textArea = webBrowser1.Document.All("foo")
If textArea <> Nothing Then
textArea.InnerText = "This is a test"
End IF 
```

# algorithm - Kruskal 的 MST 算法是非确定性的？

> ID：10767440
> 
> 赞同：1
> 
> 时间：2012-05-26T15:21:13.630
> 
> 标签：algorithm, computer-science, greedy, kruskals-algorithm

以下是我们 CS 算法讲师的 Kruskal 最小生成树算法的伪代码。我想知道 MST 算法是否是不确定的。给定具有相同权重的两条边，如果在添加到 T 时没有一条边形成循环，算法将如何在它们之间做出决定。当然，如果它是随机的，那么我们无法确定将哪些确切边添加到 T 的结果？

```
 Given an undirected connected graph G=(V,E)    
    T=Ø //Empty set, i.e. empty
    E'=E
    while E'≠Ø do
    begin
        pick an edge e in E' with minumum weight
        if adding e to T does not form a cycle then
            T = T∪{e} //Set union, add e to T
        E' = E'\{e} //Set difference, remove e from E'
    end 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T15:28:31.360

如果您为有选择的情况选择确定性选择函数，则克鲁斯卡尔算法是确定性的，否则它是非确定性的。如果您随机选择，如果有多种可能性，您无法判断哪些边最终会出现在 MST 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T15:29:30.867

> 给定具有相同权重的两条边，如果在添加到 T 时没有一条边形成循环，算法将如何在它们之间做出决定。当然，如果它是随机的，那么我们无法确定将哪些确切边添加到 T 的结果？

这取决于实施。

Kruskal 的算法找到连接加权图（不是树）的许多可能的 MST 之一。这是因为在每次迭代中，您都有多种选择（从具有相同权重的边中选择边）。这是非确定性位。当然，当您实现算法时，您将做出选择（即强加一个顺序），但是不同的实现可以很好地强加一个不同的顺序。因此，您将拥有算法的两个实现，正确地解决相同的问题，但最终结果*可能*不同。

# google-apps-script - 未使用“状态”参数名称调用 doGet，出现服务器错误

> ID：10767442
> 
> 赞同：5
> 
> 时间：2012-05-26T15:21:45.247
> 
> 标签：google-apps-script

几天以来，当我尝试使用参数“state”将所有脚本作为服务调用时，我收到一个奇怪的“Google Docs 遇到服务器错误”，从未调用方法 doGet！

请问，你能确认有什么改变吗？

重现问题的步骤：

1.  仅使用 getMethod 创建一个简单的应用程序脚本

    ```
        函数 doGet(e) {
          Logger.log("doGet");
          MailApp.sendEmail("xxxxxxxx@gmail.com", "Log", Logger.getLog());

    ```
     var app = UiApp.createApplication();

      return app;
    } 
    ```

    ```

2.  发布服务

3.  从浏览器调用脚本传递“状态”参数

    [https://sites.google.com/macros/exec?service=AKfycbwrrSzd5PM07HgmuOSE1UsXxO9MmGTEOEwvXQC1&state=sample_parameter](https://sites.google.com/macros/exec?service=AKfycbwrrSzd5PM07HgmuOSE1UsXxO9MmGTEOEwvXQC1&state=sample_parameter)

4.  服务器返回错误：

    ```
        Google 文档遇到服务器错误。如果重新加载页面没有帮助，请联系我们。

    ```
    To discuss this or other issues, visit the Google Docs Help forum. To see the list of known problems, check the Google Docs Known Issues page.

    Sorry, and thanks for your help!
    - The Google Docs Team 
    ```

    ```

我也打开了[问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1358)

谢谢大家，弗朗切斯科

**编辑：** [问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1358)已修复！谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T21:11:34.557

创建问题报告是正确的做法。但请注意，这可能不会以您想要的方式“修复”。他们可能只会在文档中包含您不能使用名为“state”的参数。

解决方案就是使用不同的名称，例如 myState 或其他名称。恕我直言，不是很烦人或很难做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T15:00:32.430

看起来与问题 1336 ( [http://code.google.com/p/google-apps-script-issues/issues/detail?id=1336](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1336) ) 相似，尽管该问题已得到修复。您可以尝试授权您的脚本吗？

# c# - 多余的演员表会影响性能吗？

> ID：10767443
> 
> 赞同：2
> 
> 时间：2012-05-26T15:21:53.490
> 
> 标签：c#, performance, boxing

我知道装箱/拆箱会影响性能。根据 MSDN，[拆箱所需的时间是作业的四倍](http://msdn.microsoft.com/en-us/library/ms173196%28v=VS.80%29.aspx)。我们的代码中有很多行具有“冗余”转换。实际上并不需要它们，没有它们代码编译得很好。可能它不会损害性能，因为编译器认为不需要拆箱，但也许不需要！也许当我们明确地转换它们时，编译器将被迫进行不必要的拆箱。我想知道这种类型的“冗余铸造”是否也会像拆箱或 nop 一样影响性能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T15:25:12.417

真正冗余的类型转换，如`(int)0`or`(object)null`被编译器省略。因为无论您是否使用强制转换表达式，生成的 IL 都完全相同，因此不会降低性能。这同样适用于显式转换，无论如何都要执行装箱转换：

```
object value = 0;
object value = (object)0; // exactly the same 
```

# python - 分配默认参数值

> ID：10767446
> 
> 赞同：3
> 
> 时间：2012-05-26T15:22:29.650
> 
> 标签：python

使用此脚本：

```
color = 'blue'

def say_color(color):
    print 'The color is: ' + color

say_color() 
```

在这里，我试图允许`say_color`在不传递参数的情况下进行处理，结果是默认颜色（蓝色）。但是，如果指定了颜色，它将不会使用蓝色，而是使用给定的字符串。

这是怎么做到的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-26T15:24:01.133

```
def say_color(color='blue'):
    print 'The color is: ' + color

say_color() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-26T15:24:31.777

```
default_color = 'blue'

def say_color(color=default_color):
    print 'The color is: ' + color 
```

然后：

```
say_color()  # default_color is used
say_color('red') 
```

产量：

```
The color is: blue
The color is: red 
```

如果您*未*`color`在调用中指定 a ，`default_color`则将在您的`say_color`函数中使用。如果您*确实*在调用中指定了 a `color`，那么它将覆盖您的默认值。

*附录*：有关如何以及何时分配/绑定这些值的更多技术解释/背景，请参阅下面@HughBothwell 的信息性评论（谢谢！）。

# android - 天气数据库

> ID：10767447
> 
> 赞同：-1
> 
> 时间：2012-05-26T15:22:39.980
> 
> 标签：android, weather

因此，我正在尝试开发一个应用程序，让您可以查看当前天气，例如 accuweather 等...

但我找不到获取当前天气数据的数据库

所以请如果你们中的任何人知道在哪里可以得到他们的答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:25:39.907

这里是雅虎 api

```
http://weather.yahooapis.com/forecastrss?w=1940631&u=c 
```

给出天气，你想解析它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T15:30:14.687

我用过 iGoogle 的。您将需要实现一个 XML 解析器。我在Java程序中使用它如下：

```
URL googleweatherapi = new URL("http://www.google.com/ig/api?weather=$" + city); 
```

它通常擅长获得正确的位置... %20 用于城市变量中的空间；

```
String city = "New%20York"; 
```

# .htaccess - 使用 htaccess 屏蔽 URL（带参数）

> ID：10767452
> 
> 赞同：0
> 
> 时间：2012-05-26T15:23:30.657
> 
> 标签：.htaccess, mod-rewrite, url-masking

我需要用htaccess 用一个相对简单的URL 来屏蔽一个又长又笨的php URL。例如，我需要掩盖 -

```
http://mysite.com/index.php?this=that&this=that&whatevs=this&that=&id=5 
```

使用这个简单的 URL -

```
http://mysite.com/mypage.php 
```

我知道 php 可以通过获取该页面的内容并显示它来非常轻松地完成这些工作。但在我的情况下，ajax 调用和其他一些问题存在一些问题。

此外，我更喜欢使用 htaccess。我做了一些研究，但 htaccess 代码让我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T12:59:31.483

所以你只想重定向[http://mysite.com/index.php?this=that&this=that&whatevs=this&that=&id=5](http://mysite.com/index.php?this=that&this=that&whatevs=this&that=&id=5)到[http://mysite.com/mypage.php](http://mysite.com/mypage.php)？

然后使用这个 RewriteRule：

```
RewriteEngine On
RewriteBase /
RewriteCond %{QUERY_STRING} this=that&this=that&whatevs=this&that=&id=5
RewriteRule ^index.php$ http://mysite.com/mypage.php? [L,R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T13:52:51.367

我冒昧地删除了该`.php`部分，`mypage.php`因为它没有真正的用途，并且使 url 看起来不那么漂亮。

```
RewriteEngine On
RewriteBase /
RewriteRule ^mypage$ /index.php?this=that&this=that&whatevs=this&that=&id=5 [L,QSA] 
```

# asp.net-mvc-3 - 使用 $.getJSON 我的链接包含 %0A+++++ 字符

> ID：10767453
> 
> 赞同：0
> 
> 时间：2012-05-26T15:23:42.833
> 
> 标签：asp.net-mvc-3, jquery

我尝试从所选行中获取值并将它们作为参数传递给 $.getJSON。我可以得到这个值，但是，当我点击链接时，值之前和之后会出现奇怪的字符。链接中的字符显示为 %OA++++++++++值+++++++%0A。

这是我的代码

```
var className='';
var Section='';
$('#listsubject tr').click(function () {
            var th = $(this);
            var td = $(this).find('td');

            $.each(td, function (index, item) {
                if (index == 2) className = item.innerHTML;

            });

 $.getJSON('@Url.Action("getStudentList/","Student")',
                { classname: className
                }, function (data) {
   alert('test');
}); 
```

请帮助我。我被困在这里

提前致谢

**编辑**

当我尝试代码时

```
$.getJSON('@Url.Action("getStudentList/","Student")',
                    { classname: className,
                      section:'A'
                    }, function (data) {
       alert('test');
    }); 
```

在链接中，部分显示正常，唯一的问题是类名

**更新**

小提琴链接 [http://jsfiddle.net/gordon/vzTDc/2/](http://jsfiddle.net/gordon/vzTDc/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:25:52.130

试试这个。我认为现在还可以。

```
var className = '',
    Section = '';

// you were trying with $('#listsubject tr'), but first tr has no td
// so click should bind with tr from 2nd
// so correct selector will be $('#listsubject tr:gt(0)')

$('#listsubject tr:gt(0)').click(function() {
    var th = $(this);
    var td = $(this).find('td');
    $.each(td, function(index, item) {

        // As you have 2 td with in each row, so the index will be 0 and 1
        // not 2 and 3

        if (index == 0) {
            className = $.trim($(item).text()); // $.trim() will remove spaces
        }
        if (index == 1) {
            Section = $.trim($(item).text());
        }
    });
    console.log('ClassName: ' + className + ', Section: ' + Section);
    $.getJSON('StudentMarks/getSubjectGrading', {
        classname: className,
        section: Section
    }, function(data) {
        alert(data);
    });
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/vzTDc/12/)**

# javascript - fbs appID cookie 不存在

> ID：10767460
> 
> 赞同：0
> 
> 时间：2012-05-26T15:24:07.373
> 
> 标签：javascript, facebook, facebook-graph-api

我尝试与 Facebook connect 建立连接，但出现了一些错误。

[进一步的 Facebook 登录 Javascript 错误](https://stackoverflow.com/questions/6373724/further-facebook-login-javascript-errors)

我对这个链接有类似的问题。Php $_COOKIE 没有找到相关的 cookie

```
Notice: Undefined index: fbs_appID in /opt/lampp/htdocs/phpdeneme/index.php on line 10

Notice: Undefined index: sig in /opt/lampp/htdocs/phpdeneme/index.php on line 22

Warning: file_get_contents(https://graph.facebook.com/me?access_token=) [function.file-get-contents]: failed to open stream: HTTP request failed! HTTP/1.0 400 Bad Request in /opt/lampp/htdocs/phpdeneme/index.php on line 30

<?php

define('FACEBOOK_APP_ID', 'APP_ID');
define('FACEBOOK_APP_SECRET','SECRET_ID');

function get_facebook_cookie($appID,$appSecret){
    $args = array();
    parse_str(trim($_COOKIE['fbs_' . $appID], '\\"'), $args);

    ksort($args);
    $payload = '';
    foreach($args as $key=>$value){

        if($key != 'sig'){
            $payload .= $key . '=' . $value;
        }
    }

    if(md5($payload . $appSecret) != $args['sig'])
            return null;

    return $args;

}

$cookie = get_facebook_cookie(FACEBOOK_APP_ID, FACEBOOK_APP_SECRET);
$user = json_decode(file_get_contents('https://graph.facebook.com/me?access_token=' . $cookie['access_token']));

?>

    <html>
        <body>
            <?php if($cookie){ ?>

            Welcome <?= $user->name ?>
            <?php } else { ?>
        <fb: login-button></fb:login-button>
        <?php } ?>
        <div id="fb-root"></div>
        <script src="http://connect.facebook.net/en_US/all.js"></script>
        <script>
        FB.init({appId: '<?= FACEBOOK_APP_ID ?>' , status: true, cookie: true, xfbml:true});
        FB.Event.subscribe('auth.login',function(response){
           window.location.reload(); 

        });
        </script>

        </body>
         </html> 
```

怎么了 ？少了什么东西 ？什么 fbs cookie 没有创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T13:55:57.813

您使用旧的 oauth 1.0 格式。您现在必须使用新格式。

一个来自 PHP 代码的示例，它应该足够接近，以最小的更改修改为 js：

函数 get_facebook_cookie() { $CI =& get_instance(); $app_id = $CI->config->item('facebook_app_id'); $application_secret = $CI->config->item('facebook_app_secret'); if(isset($ *COOKIE['fbsr* ' . $app_id])){ list($encoded_sig, $payload) = explode('.', $ *COOKIE['fbsr* ' . $app_id], 2);

```
 $sig = base64_decode(strtr($encoded_sig, '-_', '+/'));
     $data = json_decode(base64_decode(strtr($payload, '-_', '+/')), true);

     if (strtoupper($data['algorithm']) !== 'HMAC-SHA256') {
         return null;
     }
     $expected_sig = hash_hmac('sha256', $payload,
     $application_secret, $raw = true);
      if ($sig !== $expected_sig) {
          return null;
      }
      $token_url = "https://graph.facebook.com/oauth/access_token?"
     . "client_id=" . $app_id . "&client_secret=" . $application_secret. "&redirect_uri=" . "&code=" . $data['code'];
      $response = file_get_contents($token_url);

      $params = null;
      parse_str($response, $params);
      $data['access_token'] = $params['access_token'];
      return $data;
  }else{
      return null;
 } 
```

}

这来自这篇[有用的博客文章](http://blog.codebusters.pl/en/entry/oauth-20-facebook-changes-and-cookie-problem-in-codeigniter)以及有关该问题的其他一些花絮。

# php - SQL：按行为排序的论坛（在 Codeigniter 中）

> ID：10767468
> 
> 赞同：0
> 
> 时间：2012-05-26T15:25:20.517
> 
> 标签：php, mysql, sql, codeigniter, sql-order-by

情况如下：

在我的数据库中，我有一个带有线程的表和一个带有回复的表。两者都有一个时间戳字段。

现在我正在开发一个论坛，并希望以下列方式订购线程：

*   如果线程有回复，则： ORDER BY tblReply.Timestamp DESC
*   否则，线程没有回复：ORDER BY tblThread.Timestamp DESC

我不知道如何将这两个结合在一个语句中。

我现在的查询：

```
SELECT `PK_ThreadID`, `Title`, `tblUsers`.`Username`, `tblThread`.`Date`, count(tblReply.FK_ThreadID) AS number_replies FROM (`tblThread`) 
JOIN `tblUsers` ON `tblUsers`.`PK_UserID` = `tblThread`.`FK_UserID` 
LEFT JOIN `tblReply` ON `tblReply`.`FK_ThreadID` = `tblThread`.`PK_ThreadID` 
WHERE `isExpertQuestion` = 0 AND `isPublic` = 1 
GROUP BY `PK_ThreadID` 
ORDER BY max(tblReply.Date)` desc   

//Here it only orders by reply date, so threads with no replies appear at the bottom 
```

我如何在这个查询中实现我想要的排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:35:01.907

大概是这样的：

```
SELECT `PK_ThreadID`, `Title`, 
`tblUsers`.`Username`, 
`tblThread`.`Date`, 
count(tblReply.FK_ThreadID) AS number_replies 
FROM (`tblThread`) 
JOIN `tblUsers` ON `tblUsers`.`PK_UserID` = `tblThread`.`FK_UserID` 
LEFT JOIN `tblReply` ON `tblReply`.`FK_ThreadID` = `tblThread`.`PK_ThreadID` 
WHERE `isExpertQuestion` = 0 AND `isPublic` = 1 
GROUP BY `PK_ThreadID` 
ORDER BY 
CASE WHEN COUNT(tblReply.FK_ThreadID) > 0 THEN tblReply.Timestamp 
     WHEN COUNT(tblReply.FK_ThreadID) = 0 OR tblReply.FK_ThreadID IS NULL
THEN tblThread.Timestamp 
END DESC 
```

# spring - spring security：为什么我们不能在@PreAuthorize 中访问 Hibernate 实体参数？

> ID：10767469
> 
> 赞同：4
> 
> 时间：2012-05-26T15:25:34.007
> 
> 标签：spring, hibernate, spring-security, spring-3, spelevaluationexception

我有以下我正在应用`@PreAuthoriz`e 的接口方法：

```
@PreAuthorize("doSomething(#user.id)")
void something(User user, List<User> accessList); 
```

其中`User`是一个**Hibernate 实体**对象。它给了我一个错误：

> org.springframework.expression.spel.SpelEvaluationException: EL1007E:(pos 13): 在 org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:204) 的 null 上找不到字段或属性“id”

参数不可能`user`为空，好像我删除了注释，并在实现此接口方法的方法中检查用户的值，那里存在一个有效的`User`对象。此外，就在调用此方法之前，我已确保正确构造了用户对象。

我真的无法弄清楚为什么`user`SPEL 解析器会将该字段视为 null

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T18:28:55.133

您可以在*Object lookupVariable(String name)*方法中使用调试器检查*MethodSecurityEvaluationContext*中发生了什么：

 *```
 @Override
    public Object lookupVariable(String name) {
    Object variable = super.lookupVariable(name);

    if (variable != null) {
        return variable;
    }

    if (!argumentsAdded) {
        addArgumentsAsVariables();
        argumentsAdded = true;
    } 
```

因此，您可以看到*addArgumentsAsVariables()*方法中真正发生的事情，因为在 Spring 中非常清楚地实现了方法参数到 SPEL 变量的转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-08T21:09:38.083

Spring Security 现在对这个问题有了更好的答案：

[http://docs.spring.io/spring-security/site/docs/3.2.5.RELEASE/reference/htmlsingle/#access-control-using-preauthorize-and-postauthorize](http://docs.spring.io/spring-security/site/docs/3.2.5.RELEASE/reference/htmlsingle/#access-control-using-preauthorize-and-postauthorize)

基本上，如果您使用的是<JDK 8，则可以使用@P 注释或@Param 注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T07:33:27.093

您可以检查`LazyParamAwareEvaluationContext`内部`loadArgsAsVariables()`方法，版本 3.1.0。

由于实现接口，不同实体的相同键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-30T09:19:16.027

我需要为此添加一些内容，因为标题表明我们无法访问休眠属性。

hasPermission 有两个版本，加载对象和序列化对象。以下是来自测试用例的一些代码：

```
@PreAuthorize("isAuthenticated() and hasPermission(#organization, 'edit')")
public long protectedMethod(Organization organization)
{
    return organization.getId();
} 
```

对于后者，我们看到我们实际上可以访问组织的 id 属性（这是一个休眠实体）：

```
@PreAuthorize("isAuthenticated() and hasPermission(#organization.getId(), 'organization', 'edit')")
public long protectedMethodSerializableEdtion(Organization organization)
{
    return organization.getId();
} 
```*

# java - 将Java中的二维数组转换为图像

> ID：10767471
> 
> 赞同：1
> 
> 时间：2012-05-26T15:25:39.330
> 
> 标签：java, image, image-processing

我需要将灰度图像的像素强度数据的二维数组转换回图像。我试过这个：

```
BufferedImage img = new BufferedImage(
    regen.length, regen[0].length, BufferedImage.TYPE_BYTE_GRAY);  
for(int x = 0; x < regen.length; x++){
    for(int y = 0; y<regen[x].length; y++){
        img.setRGB(x, y, (int)Math.round(regen[x][y]));
    }
}
File imageFile = new File("D:\\img\\conv.bmp");
ImageIO.write(img, "bmp", imageFile); 
```

其中“regen”是一个二维双数组。我得到一个相似但不准确的输出。很少有像素与它必须是完全相反的（对于值为 255 的像素，我得到黑色）。很少有灰色阴影也被视为白色。你能告诉我我在做什么错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T13:45:14.323

试试这样的代码：

```
public void writeImage(int Name) {
    String path = "res/world/PNGLevel_" + Name + ".png";
    BufferedImage image = new BufferedImage(color.length, color[0].length, BufferedImage.TYPE_INT_RGB);
    for (int x = 0; x < 200; x++) {
        for (int y = 0; y < 200; y++) {
            image.setRGB(x, y, color[x][y]);
        }
    }

    File ImageFile = new File(path);
    try {
        ImageIO.write(image, "png", ImageFile);
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T16:18:14.447

`BufferedImage.TYPE_BYTE_GRAY`是无符号且无索引的。而且，

> 当具有非不透明 alpha 的数据存储在这种类型的图像中时，必须将颜色数据调整为非预乘形式并丢弃 alpha，如`AlphaComposite`文档中所述。

至少您需要排除符号扩展并屏蔽除第三个参数的最低八位以外的所有`setRGB()`. 重现问题的样本数据将是决定性的。

# ruby-on-rails - 如何使 rails+unicorn logger 线程安全？

> ID：10767478
> 
> 赞同：2
> 
> 时间：2012-05-26T15:26:43.457
> 
> 标签：ruby-on-rails, logging, unicorn

我们一直在使用 unicorn 来部署我们的应用程序。一切都很好，除了 production.log 文件，由于独角兽的设计方式，该文件不可读。unicorn 的每个实例都写入同一个文件，导致所有行意大利面化在一起。

那么有没有办法告诉记录器跨多个独角兽实例独立记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:27:06.343

编辑您的`unicorn.conf.rb`, 并将`after_fork`块更改为：

```
after_fork do |server, worker|

  filepath = "#{Rails.root}/log/#{Rails.env}.#{worker.nr}.log"
  Rails.logger = Logger.new(filepath, File::WRONLY | File::APPEND)
  ActiveSupport::LogSubscriber.logger = Rails.logger
  ActionController::Base.logger = Rails.logger
  ActionMailer::Base.logger = Rails.logger
  ActiveResource::Base.logger = Rails.logger

end 
```

# objective-c - ziparchive Objective-C arc 兼容

> ID：10767480
> 
> 赞同：-1
> 
> 时间：2012-05-26T15:27:06.123
> 
> 标签：objective-c, ios5, automatic-ref-counting, ziparchive

> **可能重复：**
> [在 iOS 中导入 zlib 时出错：找不到符号 collect2：ld](https://stackoverflow.com/questions/289274/error-when-import-zlib-in-iphone-sdk)

我正在处理 iphone 项目，我需要一个库来提取 ZIP 文件我发现 ZipArchive 但它与 ARC 不兼容，当我添加 -fno-objc-arc 来编译文件时，我得到链接器错误：

> 架构 i386 的未定义符号：“_inflateEnd”，引用自：unzip.o “ *inflateInit2* ”中的 _unzCloseCurrentFile，引用自：unzip.o “_get_crc_table”中的 _unzOpenCurrentFile3，引用自：unzip.o 中的 _unzOpenCurrentFile3 zip.o “_crc32”中的_zipOpenNewFileInZip3 ，引用自：unzip.o 中的 _unzReadCurrentFile zip.o 中的 _zipWriteInFileInZip -[ZipArchive addFileToZip:newname:] in ZipArchive.o“_inflate”，引用自：unzip.o 中的 _unzReadCurrentFile “ *deflateInit2*”，引用自：zip.o 中的 _zipOpenNewFileInZip3 “_deflate”，引用自：zip.o 中的 _zipWriteInFileInZip zip.o 中的 _zipCloseFileInZipRaw “_deflateEnd”，引用自：zip.o 中的 _zipCloseFileInZipRaw ld：未找到架构 i386 的符号clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T15:45:15.583

对于未定义的符号，您需要将 libz 添加到链接库中。请参阅：[在 iphone sdk 中导入 zlib 时出错](https://stackoverflow.com/questions/289274/error-when-import-zlib-in-iphone-sdk)

# scala - 扩展内部类

> ID：10767482
> 
> 赞同：1
> 
> 时间：2012-05-26T15:27:22.330
> 
> 标签：scala, inner-classes

我试图在一个较小的例子上复制我的问题。我在以下代码片段中显示的位置收到编译错误。

```
class Outer {
    class Inner
}

object OuterUtil {
  val obj = new Outer
  object xyz extends obj.Inner
  //do something with xyz
}

//-------------------
object OuterUtil2 {
    var m_obj: Outer = null

    def createOuter() = {
        m_obj = new Outer
    }

    def anotherMethod() {
        //Compilation error here: stable identifier required, 
        //but OuterUtil2.this.m_obj found.
        object xyz extends m_obj.Inner
    }
}

object Test {
    OuterUtil2.createOuter
    OuterUtil2.anotherMethod
} 
```

`OuterUtil`工作正常。在`OuterUtil2`中，我将功能拆分为两个功能。我将`Outer`实例存储`m_obj`为成员`var`。该方法创建实例`createOuter`并将其存储在. 在，我收到编译错误。如何修复？`Outer``m_obj``anotherMethod``OuterUtil2`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T17:02:03.260

类型的前缀（即`m_obj`in `m_obj.Inner`）必须是稳定值；a`var`没有削减它。您可以将其设为 a`val`并将初始化移出`createOuter`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T09:19:19.377

如果您只想解决函数的问题，这里有一个解决方案（通过将函数中的`var`a固定`val`）

```
def anotherMethod = {
  val obj = m_obj
  new obj.Inner
} 
```

另一种解决方案是使用一些选项，但是要超越稳定标识符方法，您必须定义一个`val`超出值的`m_obj`值。此解决方案更优雅，因为如果`m_obj`未定义，则不会出现空指针异常。

```
object OuterUtil2 {
  var m_obj: Option[Outer] = None

  def createOuter {
    m_obj = Some(new Outer)
  }

  def anotherMethod = {
    m_obj match{
      case None => None
      case Some(_) => val obj = m_obj.get; Some(new obj.Inner)
    }
  }
} 
```

# magento - 自定义总计收集器：在结帐的总计概览中重新排序总计

> ID：10767483
> 
> 赞同：1
> 
> 时间：2012-05-26T15:27:23.627
> 
> 标签：magento

我创建了一个自定义总计收集器，为符合条件的客户提供购物车小计 3% 的折扣。我的收集器的代码如下所示：

```
class My_Module_Model_DiscountCollector
    extends Mage_Sales_Model_Quote_Address_Total_Abstract
{
    // ...
    public function collect(Mage_Sales_Model_Quote_Address $address)
    {
        if($this->userIsQualified())
        {
            parent::collect($address);

            // $this->_inclTax tells the collector to either calculate the actual discount amount 
            // based on the subtotal including or excluding tax
            $baseCalcValue = ($this->_inclTax) ? $address->getBaseSubtotalTotalInclTax() : $address->getBaseSubtotal();
            $calcValue = ($this->_inclTax) ? $address->getSubtotalInclTax() : $address->getSubtotal();

            $baseDiscountAmount = $baseCalcValue * 0.03;
            $discountAmount = $calcValue * 0.03;

            $this->_setBaseAmount(-$baseDiscountAmount);
            $this->_setAmount(-$discountAmount);
        }
        return $this;
    }
    public function fetch(Mage_Sales_Model_Quote_Address $address)
    {
        if($this->userIsQualified())
        {
            $discountAmount = (($this->_inclTax) ? $address->getSubtotalInclTax() : $address->getSubtotal()) * 0.03;
            $address->addTotal(
                array(
                    "code"  => $this->getCode(),
                    "title" => "My Discount (3%)",
                    "value" => -$discountAmount
                )
            );
        }
        return $this;
    }
    // ...
} 
```

我的问题是更改总计列表中总计的顺序（例如在查看购物车时）。当前的订单是“小计，运费，我的折扣，...，总计”，但我更喜欢“小计，我的折扣，运费，...”。目前我的 config.xml 看起来像这样：

```
<config>
    <!-- ... --->
    <global>
        <!-- ... -->
        <sales>
            <quote>
                <totals>
                    <my_discount>
                        <class>My_Module_Model_DiscountCollector</class
                        <after>shipping</after>
                        <!--<before>grand_total</before>-->
                        <!--<after>shipping</after>-->
                        <!--<before>shipping</before>-->
                    </my_discount>
                </totals>
            </quote>
        </sales>
        <!-- ... -->
    </global>
</config> 
```

我为“之前”和“之后”元素尝试了不同的设置，但这并没有影响总数的列出顺序，它只影响了 grand_total 的计算。这很奇怪，但我的总数仅包含在使用上述设置的 grand_total 的计算中。例如，如果我将“after”设置为“subtotal”，或者如果我将“before”设置为“grand_total”，那么我的总数根本不会影响 grand_total 的计算。也许有人可以向我解释。

那么如何更改总计的顺序呢？为什么当我将“之后”设置为“运输”以外的任何其他内容时结果如此奇怪？我是否误解了这两个配置元素的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:32:10.727

您上面的 XML 片段是用于总计收集器在后端触发的顺序。前端订单控制在不同的地方。来自 Mage/Core/Sales/etc 中的 config.xml：

```
...
<default>
...
    <sales>
        <totals_sort>
            <discount>20</discount>
            <grand_total>100</grand_total>
            <shipping>30</shipping>
            <subtotal>10</subtotal>
            <tax>40</tax>
        </totals_sort>
...
</default> 
```

如果您在模块 config.xml 文件中添加`<my_discount>`为节点，`<totals_sort>`则可以将其插入您喜欢的位置。

# asp.net-mvc - Orchard MVC - 使用 ajax 登录并在当前页面提交另一个表单

> ID：10767485
> 
> 赞同：0
> 
> 时间：2012-05-26T15:28:29.000
> 
> 标签：asp.net-mvc, model-view-controller, orchardcms

我有一个表单（POST），并且匿名可以在其输入字段中输入值。但是如果他们想提交，他们必须登录。我制作了一个 ajax 登录表单并在我的操作上登录，然后我提交第一个表单，系统抛出“**未提供所需的防伪令牌或无效**。”。

我应该怎么做才能解决这个问题？（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T05:09:30.003

只有经过身份验证的用户才真正需要防伪令牌，所以这里发生的情况是您的 ajax 身份验证方法没有触及其他表单，该表单没有令牌，因为它是在用户匿名时呈现的。所以你需要做的是动态添加令牌作为身份验证回调的一部分，我想......

# ssh-keys - 自动化 ssh-keygen -t rsa 所以它不要求输入密码

> ID：10767488
> 
> 赞同：174
> 
> 时间：2012-05-26T15:28:41.443
> 
> 标签：ssh-keys

我需要在`ssh-keygen -t rsa`没有密码的情况下自动化，即在提示符下输入。
我怎样才能从 shell 脚本中做到这一点？

* * *

## 回答 #1

> 赞同：240
> 
> 时间：2013-02-18T22:45:10.347

要在不提示输入密码的情况下生成 SSH 密钥对，您可以执行以下操作：

```
$ ssh-keygen -f id_rsa -t rsa -N '' 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-11-02T00:15:24.530

如果您需要在 Windows 中从 PowerShell 执行此操作，请使用：

```
ssh-keygen -f $Name -t rsa -N '""' 
```

请注意，您还必须确保 git bin 目录在您的路径中：

```
$sshPath = "<path>\git\bin\"

$env:path += ";$sshPath" 
```

然后在 PoshGit 中使用它只是：

```
Add-SshKey "<path>\.shh\KeyFilename" 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-10-09T01:29:53.247

```
$ ssh-keygen -f $HOME/.ssh/id_rsa -t rsa -N '' 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-12-16T09:29:45.863

只是对答案 2 的更正...我在我的 OL 和 RHEL 系统上发现文件名应该是 id_rsa 而不是 id.rsa。

因此，在 OL 或 RHEL 系统上，命令将是：

```
$ ssh-keygen -f id_rsa -t rsa -N '' 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-04-20T11:21:04.533

关于什么 ：

```
ssh-keygen -q -t rsa -f ~/.ssh/id_rsa -N '' 
```

如中所述`man ssh-keygen`：

```
SYNOPSIS
     ssh-keygen [-q] [-b bits] [-t dsa | ecdsa | ed25519 | rsa | rsa1] [-N new_passphrase] [-C comment] [-f output_keyfile]
(...)
      -q      Silence ssh-keygen. 
```

（即`openssh-client`Debian 9.4 中的 package : `OpenSSH_6.7p1 Debian-5+deb8u4`）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-09T04:11:32.213

```
$ printf '\n' | ssh-keygen -N '' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-23T14:44:20.453

我需要在 bash 脚本中自动化 ssh-keygen 命令和对我来说效果很好的最终答案：

```
echo -e "\n" | ssh-keygen -N "" &> /dev/null 
```

带有 -e 的 echo 命令将“\n”解释为 Enter 键，但不适用于密码短语。然后使用选项 -N "" （空密码）密码将为空并且不会要求任何东西。&> /dev/null 会将“stdout”和“stderr”发送到/dev/null，因此不会通过显示器打印任何内容。

# gcc - 如何在 Mac 上使用 Emscripten emcc 和 make 时包含 ncurses

> ID：10767489
> 
> 赞同：6
> 
> 时间：2012-05-26T15:28:58.947
> 
> 标签：gcc, makefile, llvm, ncurses, emscripten

我正在尝试使用 Emscripten 的 emcc 构建一个项目（即 Angband 的源代码 - [http://rephial.org/downloads/3.3/angband-v3.3.2.tar.gz](http://rephial.org/downloads/3.3/angband-v3.3.2.tar.gz)），以便将其移植到 Javascript 并最终构建一个在线版本。

我已经设法开始了这个过程

emconfigure ./configure 使

它开始成功开始生成 LLVM 位码 .o 文件，但随后它在 main-gcu.c 上挂起，并显示 'main-gcu.c:43:11: fatal error: 'ncurses.h' file not found'

我相信 main-gcu.c 是唯一引用 ncurses 的文件，但我只是不知道如何在编译时包含该库。有没有办法用'make'指定包含ncurses，或者我应该用'emcc main-gcu.c -c -lncurses'单独编译main-gcu.c文件？我尝试这样做，但这导致了另一个错误，即 emcc 无法找到其他实际包含的头文件向下两层（它找不到 main-gcu.c 包含的头文件所包含的头文件 - 无论如何要解决这个问题？ ）。

我也不确定我是否已经/需要在 Mac OSX 上安装 ncurses 库。我真正能找到的只是对 Linux 的 libncurses5-dev 的引用。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T23:25:58.200

我认为您误解了通过*Emscripten*进行的编译。我将尝试指出您面临的一些问题。

1.  一般规则是*Emscripten* 的所有工具只能将***LLVM*****格式**（例如**BITCODE**）转换*为**JavaScript*。, ,修改构建环境，以便将您的源代码编译为其中一种*LLVM*格式（规则有例外，但没关系）。因此，您想要链接到最终结果的任何内容也必须采用 LLVM 格式（默认情况下*ncurses*不是）。***`emconfigure``emmake``...`***

****   由于输出是*JavaScript*，因此没有机会在不同的线程中执行任何程序代码。虽然许多 C/C++ 代码确实使用线程进行 UI 和其他处理，但这样的模型**不适**用于*Emscripten*。因此，为了让软件编译/运行，您将不得不重写使用线程的部分。请参阅`emscripten_set_main_loop`指针。

    *   即使您编译了库，您也必须将它们**静态**链接到*Emscripten*。在这一点上，它不是一个技术问题，而是一个许可证问题，因为如果您的库由于静态链接而在例如*LGPL下获得许可，则**GPL*条款是有效的。*** 

 **我希望所有的清晰度最终都消失了；）**

# java - 在 Java 中导入带 * 的类，而不是专门列出它们

> ID：10767498
> 
> 赞同：0
> 
> 时间：2012-05-26T15:30:08.230
> 
> 标签：java, import

如果你有一个需要导入的类，比如 java.util.Random，会在 import 语句中专门命名它，比如 import java.util.Random; 比 import java.util.* 使用更少的内存；如果您使用 java.util 中的多个类，这会改变吗？如果您使用 java.util 中的所有类，怎么样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T15:34:13.083

导入仅由编译器使用。在运行时，字节码使用每个使用的类的完全限定名。无论您是否使用 * 导入，字节码都是完全相同的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T15:35:29.507

您不太可能使用`java.util`包中的所有类。或摇摆。或任何其他相当大的。

IDE 可以轻松地单独添加它们，因此输入不是问题。

我更喜欢这样做，因为它使我的意图更清晰。

你听起来好像你不明白`import`真正在做什么。它与类加载或内存无关。它与节省您的打字有关。当您 import`java.sql.Connection`时，这意味着编译器将允许您通过其短名称而不是完全解析的名称来引用该类 - 仅此而已。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T15:36:48.167

符号 * 在编译时由程序中使用的相应类替换。如果您有任何反编译器，您可以检查从**.class**生成的源文件是否包含导入语句及其名称。

# php - 在 Zend Forms 中使用 optgroup 从选择中删除 MultiOption

> ID：10767500
> 
> 赞同：1
> 
> 时间：2012-05-26T15:30:14.450
> 
> 标签：php, zend-framework, zend-form

如何从 Zend Forms 的 optgroup 中删除选项？RemoveMultiOption 仅在选择没有 optgroup 时才有效（它不适用于 opt 组内的选项）。

也许有什么想法？谢谢！

# javascript - 回复评论 YouTube 风格

> ID：10767510
> 
> 赞同：4
> 
> 时间：2012-05-26T15:31:06.000
> 
> 标签：javascript, jquery

我正在尝试创建一个与 YouTube 类似的评论系统。`textarea`单击按钮时，在评论下显示回复的最简单方法是什么？我认为没有必要为每个评论复制`textarea`并制作它。`display:none`

**带文本区域**

```
<div class="comment">
  <p>Bla bla</p>
  <a hred="" id="reply">Reply</a>
  <textarea class="reply"></textarea>   
</div> 
```

**没有文本区域**

```
<div class="comment">
  <p>Bla bla2</p>
  <a hred="" id="reply">Reply</a>
</div> 
```

**jQuery**

```
$('#reply').click(function(){

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T15:39:39.643

就像是

```
$('#reply').click(function(){
  $(this).parent().append($('<textarea>').attr('class','reply'));
}); 
```

应该做的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T15:45:35.103

取决于@user1419007 的回答。

它已经测试您是否已经在评论下有一个文本区域。如果是这种情况，它将被*发送*。

```
$('.reply').click(function(){
    if($(this).parent().find('textarea').length < 1) {
        $(this).parent().append($('<textarea>').attr('class','reply'));
    } else {
        alert('Sending: ' + $(this).parent().find('textarea').val());
    }
});​ 
```

这是一个关于[JSFiddle的例子](http://jsfiddle.net/g7XaN/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T15:43:42.110

ID 应该是唯一的，所以你不应该有多个`#reply`s. 相反，您可以为每个添加一个类。

```
<div class="comment">
  <p>Bla bla</p>
  <a hred="" class="reply-button">Reply</a>
</div> 
```

```
$('.reply-button').click(function(){
  $(this).after($('<textarea>').attr('class','reply-box'));
}); 
```

# c++ - 对于静态错误字符串，哪个内存/性能效率更高，还是有替代方案？

> ID：10767511
> 
> 赞同：2
> 
> 时间：2012-05-26T15:31:34.233
> 
> 标签：c++, c

我想就在 C++ 中处理静态错误字符串的最佳方法提出意见。我目前正在使用许多常量 char 指针，但它们变得笨拙，并且它们分散在我的代码中的每个地方。我还应该为这些字符串使用静态常量字符指针吗？

我正在考虑使用 SimpleIni 类来实现跨平台兼容性的定义、哈希表和 INI 文件。该项目是一个始终运行的 Web 服务器。

我想使用错误编号或名称来逻辑地引用它们。

如果有帮助，我将使用命名空间类中包含的全局空间和方法。如果环境也有帮助，代码将导出到 C。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:56:39.323

首先，您可以在stackoverflow上查看其他相关问题。这里有一些：

*   [C++ 错误处理——示例代码的良好来源？](https://stackoverflow.com/questions/231128/c-error-handling-good-sources-of-example-code)
*   [异常和错误代码：以正确的方式混合它们](https://stackoverflow.com/questions/5805410/exceptions-and-error-codes-mixing-them-the-right-way)

然后看看这个关于错误处理的精彩[教程（它是一个由五部分组成的教程，但您可以从该链接访问所有这些教程）。](http://blog.think-async.com/2010/04/system-error-support-in-c0x-part-5.html)如果您使用的是 C++11，这将特别有趣，因为它提供了更多用于错误处理的功能。或者，如果您不能使用 C++11，则可以使用[boost 。](http://www.boost.org/)

您还需要考虑是否要包括对本地化的支持。如果您的应用程序可能会以不同的语言向用户显示消息，那么最好从一开始就将该要求也包含在错误管理中。例如，您可以为此检查[Boost.Locale](http://www.boost.org/doc/libs/1_49_0/libs/locale/doc/html/index.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T16:18:21.827

这里有几件事情很紧张，所以让我列举一下：

*   集中化/模块化：考虑集中化事物是正常的，因为它可以轻松检查人们应该预期的错误类型并从近似纪念品等中恢复错误......但是模块化要求每个模块都能够引入它的新错误
*   动态初始化期间可能会发生错误（除非您禁止代码运行，否则不容易检查），为了规避生命周期问题，最好只依赖将在静态初始化期间初始化的对象（字符串文字就是这种情况， 例如）

一般来说，我见过的最简单的事情是使用一些整数常量来识别错误，然后在一侧有一个表格，您可以在其中检索其他信息（可能很多信息）。例如，Clang 使用该系统进行诊断。您可以通过使用对您有利的预处理器来避免重复自己。

使用这样的标题：

```
#define MYMODULE_ERROR_LIST     \
     ERROR(Code, "description") \
     ...

#define ERROR(Code, Desc) Code,

class enum ErrorCode: unsigned {
    MYMODULE_ERROR_List
    NumberOfElements
};

#undef ERROR

struct Error {
    ErrorCode code;
    char const* description;
};

Error const& error(ErrorCode ec); 
```

还有一个简单的源文件来定位数组：

```
#define ERROR(Code, Desc) { Code, Desc },

Error const ErrorsArray[] = {
    MYMODULE_ERROR_LIST
    {ErrorCode::NumberOfElements, 0}
};

Error const& error(ErrorCode const ec) {
    assert(unsigned(ec) < unsigned(ErrorCode::NumberOfElements) &&
           "The error code must have been corrupted.");
    return ErrorsArray[ec];
} // error 
```

*注意：在标头中定义宏的代价是描述中措辞的最轻微变化意味着根据枚举重新编译所有代码。就个人而言，我的东西比它测试的构建速度要快得多，所以我不太在意。*

这是一个相当有效的方案。由于它尊重 DRY（不要重复自己），它还确保代码描述映射是准确的。`ERROR`可以调整宏以获得更多信息，而不仅仅是描述（类别等）。只要`Error`type [`is_trivially_constructible`](http://en.cppreference.com/w/cpp/types/is_constructible)，可以静态初始化数组，从而避免生命周期问题。

不幸的是，`enum`它并不擅长模块化。`enum`并且在统一处理错误时，让每个模块都运行自己的模块很快就会变得无聊（`Error`结构可以使用`unsigned code;`）。

如果您希望超越中央存储库，则需要更多涉及的机制，但由于它似乎适合您，我将停止提及此限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T15:47:17.200

我会保持简单，在标题中：

```
enum ErrorCode { E_help, E_wtf, E_uhoh };
const char* errstr(ErrorCode); 
```

然后在一些`.c`或`.cc`文件中：

```
const char* error_strings[] = {
  "help!",
  "wtf?",
  "uh-oh"
};
const char* errstr(ErrorCode e) { return error_strings[e]; } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-26T15:42:28.677

您的问题没有太多细节，但是根据您发布的内容，我会考虑使用单例类来处理您的错误消息。您可以创建通过代码或枚举访问消息的方法。然后，您可以实现国际化或您的特定应用程序所需的任何其他内容。此外，如果您决定将来使用 SQLite 或其他基于文件的解决方案，类接口可以保持不变（或扩展），从而最大限度地减少对其余代码的影响。

# sqlite - Sqlite blob 大小

> ID：10767513
> 
> 赞同：1
> 
> 时间：2012-05-26T15:31:43.920
> 
> 标签：sqlite

我的 SQlite DB 似乎比我估计的要大。我如何检查分布或导致此问题的原因。它有一些 BLOB 字段。即使删除 BLOB 数据后，大小似乎也没有改变

谢谢你孙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:44:06.087

您是否尝试运行[`vacuum`](http://sqlite.org/lang_vacuum.html)SQlite 命令？这应该重建数据库，减小大小。

# ruby-on-rails - 如何禁用内置测试

> ID：10767515
> 
> 赞同：0
> 
> 时间：2012-05-26T15:31:55.987
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我创建了我的模型 whitch 是 Test，当我在浏览器中使用它时一切正常，但是当我尝试从 rails c 对它做一些事情时，我得到了错误。

```
 1.9.3p125 :001 > t=Test.find(4)
NoMethodError: undefined method `find' for Test:Module
        from (irb):1
        from /home/dorijan/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.3/lib/rails/commands/console.rb:47:in `start'
        from /home/dorijan/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.3/lib/rails/commands/console.rb:8:in `start'
        from /home/dorijan/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.3/lib/rails/commands.rb:41:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

那么有没有办法暂时禁用这个？我知道我不应该使用它，但现在为时已晚......:(谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:09:21.457

问题可能是您使用了 rails 保留字 wiki 上的“测试”，因为可能有问题，请参阅 [rails 保留字](http://oldwiki.rubyonrails.org/rails/pages/ReservedWords)

尝试不在保留列表中的其他型号名称

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T16:25:01.713

我不知道如何禁用 Rails 控制台中的测试模块，抱歉。

一种解决方法是将您的模型命名为新模块，然后在其新命名空间内的控制台调用中查看[如何在此处](http://rails-bestpractices.com/posts/74-namespaced-models)

# ios - 将 NSData 与 MPMoviePlayerViewController 一起使用

> ID：10767516
> 
> 赞同：0
> 
> 时间：2012-05-26T15:31:57.900
> 
> 标签：ios, mpmovieplayercontroller, nsdata

我正在尝试将 NSData 与 MPMoviePlayerViewController 一起使用。

```
NSData *data = [NSData dataWithBytesNoCopy:mData3->mappedAddress+100398125 length:2313453 freeWhenDone:NO];

NSString *dataString = [[NSString alloc] initWithData:data encoding:NSUTF16StringEncoding];
NSURL *movieURL = [NSURL fileURLWithPath:dataString];

MPMoviePlayerViewController *moviePlayerViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:movieURL];
[self presentMoviePlayerViewControllerAnimated:moviePlayerViewController]; 
```

这会导致玩家打开一秒钟然后被解雇。

当我使用主包中文件的 URL 在本地访问电影文件时，它可以完美播放。

如何使用 NSData 在 iOS 上播放视频？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:13:32.807

无法直接从内存中的 NSData blob 播放电影。

# ios - 被 UIFileSharingEnabled 键拒绝设置为 true

> ID：10767517
> 
> 赞同：6
> 
> 时间：2012-05-26T15:32:15.440
> 
> 标签：ios, appstore-approval

我最近对 ​​iPhone 应用程序的更新被拒绝了，它说：

*“启用文件共享后，整个 Documents 文件夹将用于文件共享。不打算通过文件共享功能供用户访问的文件应存储在应用程序包的另一部分中。如果您的应用程序不需要该文件共享功能，Info.plist 中的 UIFileSharingEnabled 键不应设置为 true。”*

我没有任何不应该通过 iTunes 备份的数据。那么，在这种情况下，如何进行更改或上诉以通过审查？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T17:17:07.463

我能够毫无拒绝地通过 Apple 的审核，并且仍然设置 UIFileSharingEnabled = true。了解 raywenderlich 的操作方法非常有帮助：[http](http://www.raywenderlich.com/1948/how-integrate-itunes-file-sharing-with-your-ios-app) ://www.raywenderlich.com/1948/how-integrate-itunes-file-sharing-with-your-ios-app 。我猜，关键是让共享数据变得简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T06:26:33.963

[这里](https://stackoverflow.com/questions/19980303/apple-not-allow-the-app-share-document-directory-data-directly-to-user-uifiles)也回答了一个类似的问题。这部分可能与您的情况有关：

> 启用文件共享后，整个 Documents 文件夹将用于文件共享。不打算通过文件共享功能供用户访问的文件应存储在应用程序包的另一部分中。

仅将用户相关文档存储在 /Documents 文件夹中。对于其他非临时文件，请改用 /Library/Application Support（或 /Library/Preferences）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-05T21:48:26.603

我遇到了同样的问题。

就我而言，我可以通过将**Info.plist 中**的以下行从

> ```
> <key>UIFileSharingEnabled</key>
> <string>true</string> 
> ```

至

> ```
> <key>UIFileSharingEnabled</key>
> <true/> 
> ```

# php - 使用 curl 加载头部内容

> ID：10767518
> 
> 赞同：0
> 
> 时间：2012-05-26T15:32:29.930
> 
> 标签：php, dom, curl

我只想使用 curl 加载 head 的内容，目前我正在使用

```
<?php 

$url="www.facebook.com";

$title='';$keywords='';$description='';
    $ch = curl_init();
$timeout=5;
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_URL, 'http://'.$url);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt ($ch, CURLOPT_TIMEOUT,0);

    $html = curl_exec($ch);
    curl_close($ch);
echo htmlspecialchars($html);//gives the complete source.Why?

//parsing begins here:
$doc = new DOMDocument();
@$doc->loadHTML($html);

$nodes = $doc->getElementsByTagName('title');
$metas = $doc->getElementsByTagName('meta');

if($nodes->length>0)$title = $nodes->item(0)->nodeValue;

for ($i = 0; $i < $metas->length; $i++)
{
    $meta = $metas->item($i);
    if($meta->getAttribute('name') == 'description')
        $description = $meta->getAttribute('content');
    if($meta->getAttribute('name') == 'keywords')
        $keywords = $meta->getAttribute('content');
}
echo $title. '<br/>';
echo "&nbsp;&nbsp;&nbsp;&nbsp;$description". '<br/>';
echo "&nbsp;&nbsp;&nbsp;&nbsp;$keywords";
?> 
```

此代码返回 url 的完整代码，但我只想要 head。不要将它与我之前的问题联系起来，因为这里没有必要使用 curlopt_writefunction()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:33:48.793

CURLOPT_HEADER 应该是 TRUE，而不是 0

CURLOPT_NOBODY 应该是 TRUE

```
curl_setopt($ch, CURLOPT_NOBODY, TRUE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T16:16:00.500

尽管名称相似，但 HEADER 与 html 不对应`<head>`，BODY 也不与 html 对应`<body>`。`CURLOPT_HEADER`表示在返回值中包含 http 标头。`CURLOPT_NOBODY`表示不在返回值中包含 http 有效负载（带有 content-type:text/html 的 http 响应的有效负载将是整个 html 文档）。

# django - Django：在视图中访问时，settings.py 中的重音字符被破坏

> ID：10767520
> 
> 赞同：3
> 
> 时间：2012-05-26T15:32:40.557
> 
> 标签：django, unicode, encoding, character-encoding

我的 settings.py 中有重音字符，我使用 getattr(settings, 'MY_CONSTANT_NAME', []) 在视图中访问这些字符，但 getattr() 调用返回损坏的字符（例如，“ô”变为：“\xc3\xb4 ”）。

这是 view.py 中的代码：

```
 from django.conf import settings

    def getValueFromSetting(request):
        mimetype = 'application/json' 
        charset=utf-8' datasources = getattr(settings, 'MY_CONSTANT_NAME', []) 
        config= '{' 
        config+= '"datasources": ' + str(datasources).replace("'", '"') 
        config+= '}'

        return HttpResponse(config,mimetype) 
```

到目前为止我为解决问题所做的工作：

*   我把 # - *- coding: utf-8 -* - 作为我的 settings.py 和我的 views.py 的第一行
*   我将 u'ô' 或 unicode('ô') 放在 settings.py 中的特殊字符前面
*   我把 DEFAULT_CHARSET = 'utf-8' 在 settings.py
*   我尝试所有可能的 .decode('utf-8')、.encode('utf-8')、.decode('iso-8859-1')、.encode('iso-8859-1') 组合settings.py 或views.py 中的特殊字符...

没有什么能解决问题。

有什么建议可以解决这个问题吗？

谢谢

艾蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:42:12.807

我假设您`\xc3\xb4`在浏览器中看到了这些字符串。您是否尝试过编辑模板文件以在 HTML 标头中定义正确的字符集？

```
<head>
  <meta name="description" content="example" />
  <meta name="keywords" content="something" />
  <meta name="author" content="Etienne" />
  <meta charset="UTF-8" />      <!--  <---- This line -->
</head> 
```

**在此答案中发表第一条评论后进行编辑：**

我怀疑除了编码`getattr`之外不能使用。`ascii`你认为像下面这样的东西不会做你想做的事吗？

```
from django.conf import settings

def getValueFromSetting(request):
    myConstantValue = settings.MY_CONSTANT_NAME
    # check myConstantValue here 
```

**最后评论后编辑：**

我想现在我明白你的问题了。您不喜欢视图返回的 JSON 仅为 ASCII 的事实。我建议您使用Python 捆绑`dumps`的模块提供的功能。`json`这是一个例子：

```
# -*- coding: utf-8 -*-
# other required imports here
import json

def dumpjson(request):
   response = HttpResponse(json.dumps(settings.CONSTANT_TUPLE, encoding='utf-8', ensure_ascii=False), content_type='application/json')

   return response 
```

示例中的`CONSTANT_TUPLE`只是`DATABASES`我的`settings.py`.

这里的重要一点是`ensure_ascii=False`。你能试试吗？那是你要的吗？

# ruby - Blowfish 加密字符串变得乱码

> ID：10767521
> 
> 赞同：1
> 
> 时间：2012-05-26T15:32:53.310
> 
> 标签：ruby, api, encryption, blowfish

我需要与需要使用 Blowfish 和 Base64 对请求进行编码的 API 进行通信。

在我的自定义库中，我从以下内容开始：

```
# encoding: utf-8
require "base64"
require 'crypt/blowfish' 
```

我创建一个实例：

```
@blowfish_key = '1234567887654321'
@blowfish     = Crypt::Blowfish.new(@blowfish_key) 
```

再往下，我创建了加密字符串（或 API 调用的“票证”）

```
@string_to_encrypt  = "#{@partnerid},#{user.id},#{exam_id},#{return_url},#{time_stamp}"
@enc                = @blowfish.encrypt_string(@string_to_encrypt) 
```

在 Rails 控制台中，我可以`@blowfish.decrypt_string(@enc)`毫无问题地解密。但是API给了我胡言乱语：

```
Invalid ticket:
Decrypted String  :)IŠkó}*Ogû…xÃË-ÖÐHé%q‹×ÎmªÇjEê !©†xRðá=Í²    [À}=»ïN)'sïƒJJ=:›õ)¦$ô1X¢ 
```

另外，当我在控制台中加密一些简单的东西时，比如“Hello”，并将加密的字符串提供给在线 Blowfish 解码器，比如[http://webnet77.com/cgi-bin/helpers/blowfish.pl](http://webnet77.com/cgi-bin/helpers/blowfish.pl)，我得到了同样的结果乱七八糟的回来。

就像 Ruby 河豚加密是一种在其他任何地方都不使用的格式。

**笔记：**

在我的实际应用程序中，我通过表单字段将加密字符串发送到 Web 服务。加密字符串采用 Base64 编码并以“a”为前缀。

```
@enc = Base64.encode64(@enc)
@enc = 'a' + CGI::escape(@enc) 
```

这在他们的文档中进行了解释：

**票据格式：**

```
t=’a’ + URL_Encode (
Base64_Encode (
Blowfish_Encrypt ( ‘partnerid,user_id,test_id,URL_Encode(return_URL),ticket_timestamp’, ‘blowfish_key’)
      )
) 
```

> 请注意，Blowfish_Encrypt 函数接受两个参数 - 1）要加密的字符串和 2）十六进制密钥。另请注意，票的前缀是小写的“a”（ASCII 97）。

**HTML 表单的外观示例：**

```
<form method=”POST” action=”http://www.expertrating.com/partner_site_name/”&gt;
<input type=”hidden” name=”t” value=”adfinoidfhdfnsdfnoihoweirhqwdnd2394yuhealsnkxc234rwef45324fvsdf2” />
<input type=”submit” name=”submit” value=”Proceed to take the Test” />
</form> 
```

我迷路了，我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T01:46:34.197

有几件事：

1）正如评论中所说，如果您打印加密的字符串，那么这几乎总是会造成麻烦，因为加密的字符串很可能包含非 ASCII 字符，这些字符要么无法打印，要么以无法理解的表示形式出现其他。获得广泛理解的表示的最佳方法是使用 Base64 或 Hex 编码对结果进行编码，因此您在应用程序中应用的 Base64 编码就可以了。

2）您链接到的 Perl 应用程序使用例如十六进制编码。因此，它也只接受十六进制编码的加密字符串。这就是为什么它根本不接受您的任何输入。您将获得适合应用程序的十六进制编码，如下所示：

```
hex = encrypted.unpack("H*")[0].upcase 
```

3) 但是 Perl 应用程序仍然没有运气。原因之一是（取自 Crypt 来源）：

```
def encrypt_stream(plainStream, cryptStream)
  initVector = generate_initialization_vector(block_size() / 4)
  chain = encrypt_block(initVector)
  cryptStream.write(chain) 
```

这意味着 Crypt 将 IV 作为加密消息的第一个块写入。这完全没问题，但我知道的大多数现代加密库都不会预先设置 IV，而是假设它在两个通信方之间作为带外信息进行交换。

4) 但即使知道这一点，您仍然无法使用 Perl 应用程序。原因是 Perl 应用程序使用 ECB 模式加密，而 Crypt gem 使用 CBC 模式。CBC 模式使用 IV，因此即使是单块消息也不会匹配，除非您使用全零 IV。但是使用全零 IV（或任何其他确定性 IV）是[不好的做法](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/Cipher.html)（而且 Crypt 无论如何也不会这样做）。这样做可以将第一个块与随机区分开来，并使您容易受到[BEAST](http://www.educatedguesswork.org/2011/09/security_impact_of_the_rizzodu.html)之类的攻击。除了完全罕见的极端情况外，使用 ECB 也是不好的做法。所以让我们忘掉那个 Perl 应用程序，专注于手头的事情吧。

5) 我自然赞成使用 Ruby OpenSSL，但在这种情况下，如果我告诉你使用它而不是 Crypt gem 来提高整体安全性，我认为我并不是主观的。只是告诉你这样会很蹩脚，所以这里有两个原因：

*   Crypt 使用可预测的随机生成器（`srand`和的组合`rand`）生成其 IV，但这还不够好。它必须是一个密码安全的随机生成器。

*   Crypt 似乎不再被维护，同时发生了一些当时不为人知的事情，或者从未在该项目的范围内。例如，OpenSSL 开始处理泄漏弹性密码学，以防止针对时间、缓存未命中等的侧通道攻击。这可能从来都不是 Crypt 的意图，但这种攻击在现实生活中构成了真正的威胁。

6）如果我的讲道说服你做出改变，那么我可以继续问你是否真的必须是河豚。毫无疑问，该算法本身非常出色，但现在有更好、更安全的选项可用，例如 AES。如果它必须是 Blowfish，它也受 Ruby OpenSSL 支持：

```
cipher = OpenSSL::Cipher.new('bf-cbc') 
```

7）如果您的生产密钥看起来像示例中的那个，那么还有另一个弱点。这样的字符串中没有足够的熵。您应该再次使用加密安全的随机生成器来生成您的密钥，这在 Ruby OpenSSL 中非常简单：

```
key = cipher.random_key 
```

好处是它会根据要使用的密码算法自动选择适当的密钥长度。

8）最后，我是否正确假设您使用该加密结果作为某种形式的身份验证令牌？就像您将它附加到正在呈现的 HTML 一样，等待在一些 POST 请求中接收它并将接收到的令牌与原始令牌进行比较以验证某些操作？如果是这种情况，那么这将再次是不好的做法。这一次更是如此。您在这里没有使用经过身份验证的加密，这意味着您的密文是*可延展*的。这意味着攻击者可以相对容易地伪造该令牌的内容，而无需实际知道您的加密密钥。这会导致各种攻击，甚至导致涉及密钥恢复的全面妥协。

您**必须**使用经过身份验证的加密模式（GCM、CCM、EAX...）或使用消息身份验证代码来检测密文是否已被篡改。更好的是，根本不使用加密并使用安全哈希函数生成您的票证。这里的关键是计算安全随机值的哈希值，否则再次可以预测结果。如您的示例中使用的时间戳是不够的。它必须是加密安全的随机数，可能由[SecureRandom](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/securerandom/rdoc/SecureRandom.html)生成。

但是你仍然必须考虑重放这些代币，代币劫持，......你看，这并不容易。

# variables - 具有 1 个变量的逻辑含义

> ID：10767522
> 
> 赞同：1
> 
> 时间：2012-05-26T15:33:01.130
> 
> 标签：variables, logic, implication

我的知识库中有以下陈述，但前提是只有 1 个变量（请参阅第 3 行）。我试图为此建立一个真值表，但第三个前提让我感到困惑，因为只有一个条件来决定隐含条件。

```
p ^ q ^ r => s;
q ^ r => t;
t => u;   <---- confused line.
p;
s; 
```

例如，据我所知：

```
p | q | p=>q    
--------------    
0 | 0 | 1    
0 | 1 | 1    
1 | 0 | 0    
1 | 1 | 1 
```

但是我该如何在这里为第三条语句构建真值表。只有 1 个变量可以决定“你”。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T01:27:21.600

真值表将涉及`t`和`t=>u`; 从那里你会尝试决定`u`：

```
t | t=>u | u    
--------------    
0 | 0    | not possible
0 | 1    | 0 or 1
1 | 0    | 0
1 | 1    | 1 
```

如果你想`t=>u`成为1，那么如果`t`是1，`u`就必须是`1`；如果`t`是 0，那么`u`可以是 0 或 1。

# javascript - 在 MongoDB 集合中查找字符串

> ID：10767523
> 
> 赞同：1
> 
> 时间：2012-05-26T15:33:02.380
> 
> 标签：javascript, node.js, mongodb, filesystems

我想在 MongoDB 中实现一个像 collection 这样的小文件系统。

所以说我的对象看起来像这样

```
{ 
    "\":{
        'autoexec.bat':{ 
            name:'autoexec',
            filetype:'bat',
            size:1302
    },

    'users':{ /* its own tree */ },
    'windows':{ 
        'system':{ 
            'autoexec.bat':{
                name:'autoexec',
                filetype:'bat',
                size:1302123
            } 
        }
    }
} 
```

我想知道如何以最有效的方式找到术语“autoexec.bat”，对于文件树，还有没有更好的方法在 Node.js 或 C++ 中实现它？我希望实现搜索等功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:50:57.393

我会说：不要在一份巨大的文件中这样做。让每个文件成为集合中自己的文档，并引用父级和（可能）子级。现在几乎所有的操作都是微不足道的。您只需要考虑读取/删除整个树的有效方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T17:59:50.047

上周在 MongoNYC，Kyle Banker通过示例进行了关于模式设计的精彩[演讲。](http://www.10gen.com/presentations/SchemaDesignbyExample)我认为您的问题与他的第一个音乐流派等级示例非常相似。

实际上，每个文件都会在集合中包含一个文档。它将有一个 parent 字段来标识其直接父级（在您的情况下它所在的目录）和一个包含其所有祖先的数组。

现在变得容易的查询是 - 文件“autoexec.bat”在哪个目录 - 列出目录“foo”中的所有文件 - 递归地列出目录 foo 中的所有文件（所有祖先中带有“foo”的文件。

不要忘记，您还可以选择将完整路径名保存到文件/目录及其基本名称。如果字段被索引，这允许通过路径的前导部分进行搜索。它也将是唯一的，而不仅仅是文件名。

与往常一样，关键信息是查询此集合以及性能和负载预期所需的所有方式。没有它，很容易选择一个稍后会给您带来一些挑战的模式。

# performance - 如何诊断建立连接缓慢

> ID：10767525
> 
> 赞同：1
> 
> 时间：2012-05-26T15:33:16.370
> 
> 标签：performance, iis

最近我遇到一个奇怪的问题，有时浏览器需要大约 20 秒才能建立与 IIS Web 服务器的连接

```
1\. this cannot be repro each time, when successful access the site, the following connecting will be very fast. After restart Application pool and Web Site, the first time connect will be slow.<br>
2\. When success gernerate connection success, after minutes, the establsh connection will getting slow again.<br>
3\. this is not relate to authentication, both Windows Authentication and Anonmymous will have the same problem.<br>
4\. Installed HTTPWatch on my client machine, it shows that 20 seconds is connecting time before wating when this problem happen.<br>
5\. localhost cannot repro, each time establish connection is fast 
```

从 IIS 的日志中，得到第一个请求后

如何调试这个？似乎这与网络、端口、域有关，是否有一些工具可以帮助诊断这个问题，并且可以告诉我服务器在建立连接的时间段内在做什么

# mongodb - 可疑的 mongodb.log 项目

> ID：10767527
> 
> 赞同：0
> 
> 时间：2012-05-26T15:33:38.430
> 
> 标签：mongodb

我的 q_development.users 表有超过 1,000,000 条记录。奇怪的是，我的 mongodb 在这个集合上记录了一些耗时较长的项目，而没有明确记录查询是什么。`ntoreturn`MongoDB甚至不记录`ntoskip`这些查询。这是非常可疑的，因为`reslen`它们都是一样的。日志如下所示

```
Fri May 25 00:01:00 [conn56429] query q_development.users nscanned:1207786 reslen:20 2390ms
Fri May 25 00:09:09 [conn55528] query q_development.users nscanned:1207799 reslen:20 2623ms
Fri May 25 00:11:11 [conn55529] query q_development.users nscanned:1207800 reslen:20 2660ms
Fri May 25 00:28:56 [conn55586] query q_development.users nscanned:1207823 reslen:20 2777ms
Fri May 25 00:46:45 [conn55529] query q_development.users nscanned:1207850 reslen:20 4218ms
Fri May 25 00:47:46 [conn56169] query q_development.users nscanned:1207851 reslen:20 2392ms
Fri May 25 01:30:49 [conn57141] query q_development.users nscanned:1207901 reslen:20 4289ms 
```

你知道哪些可能的查询可以生成这样的 mongodb.log 项目吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T21:38:27.853

这只是意味着一些查询花费了很长时间——例如第一个查询 2390 毫秒。任何花费超过 100 毫秒（默认）的东西都会被记录下来。在这种情况下，对“用户”的查询似乎需要很多时间。显示`nscanned`必须从磁盘查找多少文档。它们每个都超过一百万，这可能意味着您正在执行全表扫描，即没有索引的查询。启用[探查器](http://www.mongodb.org/display/DOCS/Database+Profiler)以确定哪个查询实际上导致了这个未索引的全表扫描。

在这种情况下，因为没有显示查询，您很可能会在没有参数的情况下进行查找。

# c - 如何在C中检测未初始化的字符串

> ID：10767529
> 
> 赞同：2
> 
> 时间：2012-05-26T15:33:47.837
> 
> 标签：c, arrays, string

我有一个`char x[16]`尚未初始化的，我需要测试是否分配了某些东西，`x`或者它是如何在运行时创建的。我该怎么做？谢谢

示例代码

```
int main(int argc, char** argv) {
char x[16];

 //<other part of the code>
if(x is an empty char array (not assigned anything) then skip the next line) {
 //blank
}else {
//<rest of the code>
}
return 0;} 
```

PS：我试过了`memchar(x, '\0', strlen(x))`，但它不能按我的意愿工作`if(x[0] == '\0')`，`if(!x[0])`因为 char 数组默认不包含`\0`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T15:35:30.347

您必须像这样初始化它：

```
char x[16] = { 0 }; // note the use of the initializer, it sets the first character to 0, which is all we need to test for initialization.

if (x[0] == 0)
  // x is uninitialized.
else
  // x has been initialized 
```

如果它适用于您的平台，另一种选择是`alloca`，它会在堆栈上为您分配数据。你会像这样使用它：

```
char *x = NULL;

if (x == NULL)
    x = alloca(16);
else 
    // x is initialized already. 
```

因为`alloca`在堆栈上分配，所以您不需要`free`分配的数据，使其具有明显的优势`malloc`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T15:44:50.107

初始化变量是一种很好的做法，当它们没有初始化时，您可以使用编译器警告您。使用 gcc，您将使用`-Wuninitialized`标志。

您可以通过像这样更改字符数组变量来在编译时初始化数组

`char x[16] = {0};`

然后测试看看

```
if ('\0' != x[0])
{
   <do something>; 
}
else
{  
   <initialize character string>;
} 
```

# node.js - NodeJS 和 BackboneJS 中的模板引擎

> ID：10767534
> 
> 赞同：2
> 
> 时间：2012-05-26T15:34:05.967
> 
> 标签：node.js, backbone.js, template-engine

目前我正在玩[NodeJS](http://nodejs.org) (+ [ExpressJS](http://expressjs.com) ) 和[BackboneJS](http://backbonejs.org/)。Backbone 页面告诉我（包括[Todo 示例](http://documentcloud.github.com/backbone/examples/todos/index.html)）最好使用[EJS](http://embeddedjs.com/)或[MustacheJS](http://mustache.github.com/)等模板引擎。但我已经在使用ExpressJS 附带的[Jade 。](http://jade-lang.com)

**前端**（例如 Mustache）和**后端**（例如 Jade）模板引擎是否完全不同，或者是否可以两者都使用一个？

还是我没有理解正确的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:42:49.103

您可以为前端和后端使用相同的模板引擎（我们在双方的项目中都使用它）。同样小心，它也很容易切换某些形式。要将jade编译到客户端，请参见

*   [https://github.com/visionmedia/jade#browser-support](https://github.com/visionmedia/jade#browser-support)

很容易这可以合并为 grunt 任务，我已将代码放入

*   [https://gist.github.com/2877717](https://gist.github.com/2877717)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T20:49:59.607

Jade 在前端和后端工作。不过，您仍然需要创建客户端和服务器端模板。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-26T23:01:30.530

通常，如果您已经在使用 Node.js 和 Express.js，则几乎不需要做前端模板，因为您已经可以控制服务器端的所有内容。将两者混合通常是不必要的，而且非常棘手。

顺便说一句，我建议使用[EJS](http://embeddedjs.com/)进行后端模板。

编辑：抱歉，我想我稍微避开了问题的复杂性。是的，您绝对可以同时使用两者，在大型复杂数据集的情况下，您绝对*应该*至少使用像 Mustache 这样的前端模板引擎。如果您刚刚开始使用 ExpressJS，最好只使用 Jade 或 EJS 之类的后端模板引擎，直到您对后端模板的工作方式更加熟悉为止——然后如果您认为合适，则转而使用这两种引擎。

感谢 Pickels 给我打电话！

# iphone - 使用延迟创建一个返回的方法

> ID：10767538
> 
> 赞同：2
> 
> 时间：2012-05-26T15:34:28.667
> 
> 标签：iphone, objective-c, ios, xcode

在 xcode 上工作时，我意识到如果我创建了一个非 void 方法，我从一个类/方法中调用它，那么只有当动作是即时的时，结果才会得到最佳处理。我试图通过插入延迟来进行测试，但我意识到它不再有效。我将在这里写下我创建的示例：

**A级**

```
//--------------------CLASS A
- (void)viewDidLoad {
   [super viewDidLoad];
   i = 0;
   Class *classB = [[Class alloc] init];
   i = [classB method1];
   [self performSelector:@selector(method3) withObject:NULL afterDelay:1.8];
}

-(void)method3 {
   NSLog(@"i = %i",i); // i = 0
} 
```

**B类**

```
//--------------------CLASS B    
-(int)method1 {
  [self performSelector:@selector(method2) withObject:NULL afterDelay:1];
  return a;
}

-(void)method2 {
  a = 800;
} 
```

显然我的问题不是那么微不足道，但我试图尽可能彻底地得到答案，我被建议使用模态方法，但我认为这不是我正在寻找的解决方案。

我能做些什么来解决这个问题？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:42:20.830

> 我能做些什么来解决这个问题？！

您要将值返回*到*哪里？在您的示例中，`method1`将在很久之前完成`method2`。如果您想保留由 计算的值`method2`，您通常会让该方法将该值存储在 ClassB 的一个实例变量中，并可能调用其他一些方法来继续处理。

如果您确实需要`method1`从 中返回结果`method2`，则需要同步调用它（即不使用`-performSelector:withObject:afterDelay:`）。在这种情况下，请考虑 a) 为什么需要延迟；b）如果您应该`method1`在延迟而不是`method2`.

如果您能解释您要解决的实际问题是什么，我们将能够提供更好的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T15:46:48.780

您真正需要的是更好地理解异步方法。在您`method1`的变量`a`中，变量永远不会改变——您所做的只是安排`method2`将来调用，然后返回变量的当前状态`a`。

在 Objective-C 中，有几种不同的方法可以解决这个问题。人们最常使用`protocols`和`delegates`来解决这个问题。这是协议和委托的基本[介绍](http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html)。基本上，您会希望您的 A 类对象成为 B 类对象的委托。您也可以使用[NSNotifications](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/nsnotification_Class/Reference/Reference.html)或[blocks](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html)，尽管在继续使用通知和块之前，您可能应该了解协议和委托的用法（它们在 Objective-C 中非常重要）。

# asp.net-mvc-3 - 如何知道应用程序池内存是否足够？

> ID：10767540
> 
> 赞同：0
> 
> 时间：2012-05-26T15:34:29.507
> 
> 标签：asp.net-mvc-3, nhibernate, web-applications, hosting, pool

我正在考虑使用具有 200MB 应用程序池的共享主机。在我购买这项服务之前，我需要知道我的应用程序实际消耗了多少内存。

当应用程序池大小达到 iz 时会发生什么。在构建 sessionFactory 时考虑到 nhibernate mvc3 应用程序，它应该保留在应用程序池内存中，并且在达到池后应该再次创建此会话工厂。如果错了请纠正我。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:37:03.223

很难说 200 MB 是否足够，因为这取决于您的应用程序在内存中保留了多少数据。

IIS中有各种设置......例如，

1）如果达到池大小限制，您可以关闭应用程序...... 2）如果达到池大小限制，您可以回收应用程序池...... 3）您可以使用新的工作进程重置应用程序...... 4）CPU限制设置……等等……

因此，这完全取决于您的托管服务提供商对您的应用程序池的设置......

为了避免所有这些，您可以做的是，1）要求您的托管服务提供商为您提供远程访问权限以管理您网站的 IIS 属性...如果您有远程访问权限，您可以根据需要调整各种设置... 2）如果您的预算约为每月 20 美元，请选择虚拟专用服务器托管...您可以完全自由地为您的 IIS 设置所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:20:42.573

使用[apache bench 之](http://httpd.apache.org/docs/current/programs/ab.html)类的负载测试工具并监控您的内存使用情况。

# css - 表单中的样式列

> ID：10767542
> 
> 赞同：0
> 
> 时间：2012-05-26T15:34:40.770
> 
> 标签：css

我有以下表格。如何在没有`<table>`. 谢谢

```
<table>
<tr><td><label for="firstname">First Name</label></td><td><input type="text" name="firstname" id="firstname" /></td></tr>
<tr><td><label for="lastname">Last Name</label></td><td><input type="text" name="lastname" id="firstname" /></td></tr>
<tr><td><label for="phone">Phone</label></td><td><input type="text" name="phone" id="phone" /></td></tr>
<tr><td><label for="email">Email</label></td><td><input type="text" name="email" id="email" /></td></tr>
<tr><td><label for="address">address</label></td><td><input type="text" name="address" id="address" /></td></tr>
<tr><td><label for="city">City</label></td><td><input type="text" name="city" id="city" /></td></tr>
<tr><td><label for="State">state</label></td><td><input type="text" name="state" id="state" /></td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:42:35.403

这对于基本样式来说已经足够了：

```
input {
    display: block;
}
label {
    width: 100px; /* whatever value you wish */
    float: left;
} 
```

[您可以在http://dabblet.com/gist/2794359](http://dabblet.com/gist/2794359)看到这是如何工作的

* * *

`.label {width:30px;}`肯定不会这样做。首先，因为当您编写 时`.label`，它会选择具有名为 label 的类的元素。其次，即使你没有使用点，`label`默认情况下该元素也是一个内联元素，所以如果你不给它设置一个宽度是没有用的`display: block`（浮动它也可以解决问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:05:46.037

示例 HTML：

```
<div id="container">
    <div class="row">
        <div>
            <label for="firstname">First Name</label>
        </div>
        <div>
            <input type="text" name="firstname" id="firstname"/>
        </div>
    </div>
    <div class="row">
        <div>
            <label for="lastname">Last Name</label>
        </div>
        <div>
            <input type="text" name="lastname" id="firstname"/>
        </div>
    </div>
<div/> 
```

CSS：

```
.row {
    width: 100%;
}

.row > div:first-child {
    width: 20%;
    float: left;
}

.row > div:last-child {
    float: left;
    width: 80%;
} 
```

jsFiddle： http: [//jsfiddle.net/Q4g2u/1/](http://jsfiddle.net/Q4g2u/1/) ​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T17:10:50.160

除了类似宗教的问题外，没有理由在不使用表格标记的情况下格式化表格数据（例如表格）。但如果必须，Luis Sánchez 的回答中描述的技术最接近 - 但它只是在 CSS 中模拟表格，浏览器支持更有限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T15:46:25.537

您可以使用以下样式：

**CSS**标记：

```
.divContainer 
{
    display: table;
}

.divRow  
 {
    display: table-row;
}

.divColumn 
{
    display: table-cell;
} 
```

**HTML**标记：

```
<div class="divContainer">
    <div class="divRow">
        <div class="divColumn">
            <label for="firstname">First Name</label>
        </div>
        <div class="divColumn">
            <label for="lastname">Last Name</label>
        </div>
    </div>
</div> 
```

# java - 如何从不同的类中获取 jtext 文件的输入

> ID：10767543
> 
> 赞同：2
> 
> 时间：2012-05-26T15:34:45.543
> 
> 标签：java, swing, jtextarea

我正在与发布者和订阅者一起制作聊天应用程序我有两个类，一个是聊天框架，一个是聊天成员的类。成员类从 jtextfield 获取消息，聊天成员发布者将其发送回 jtextarea。

我很难从订阅者 MessageListener 将文本返回到 jtextarea

```
@Override
public void onMessage(Message m)
{
    try
    {
        TextMessage textMessage = (TextMessage) m;
        System.out.println("Received:" + textMessage.getText());
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
}

MessageListener listener = new MessageListener()
{
    @Override
    public void onMessage(Message m)
    {
        try
        {
            TextMessage textMessage = (TextMessage) m;
            System.out.println("Received:" + textMessage.getText());
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }
};

private void sendChatBattonActionPerformed(java.awt.event.ActionEvent evt) { 
   String empty=""; 
   String message= inputChatText.getText(); 
   if (message.equals(empty)){ 
       inputChatText.setText(""); 
       inputChatText.requestFocus(); 
   } else { 
       inputChatText.setText(""); 
       try { 
           String newMessage=userName+"~"+message+"~chat"; 
           sendMessage(newMessage); 
       } catch (JMSException ex) {
           Logger.getLogger(chatFrame.class.getName()).log(Level.SEVERE, null, ex);
       }
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:41:19.613

使用提供的代码片段，这就是我所理解的，要在文本区域中附加文本，请使用[`append`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextArea.html#append%28java.lang.String%29).

```
@Override
public void onMessage(Message m) {
    try {
        TextMessage textMessage = (TextMessage) m;
        System.out.println("Received:" + textMessage.getText());
        jTextArea.apped(textMessage.getText());
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

假设您的充当聊天框架的类被调用`ChatFrame`并具有`MessageListener`，在这种情况下您的代码将如下所示：

```
import javax.jms.JMSException;
import javax.jms.Message;
import javax.jms.TextMessage;
import javax.swing.JTextArea;

public class ChatFrame {
    JTextArea textArea = null;

    void init(){
        //create and show UI here
    }

    class MessageListener implements javax.jms.MessageListener {
        @Override
        public void onMessage(Message arg0) {
            TextMessage textMessage = (TextMessage)arg0;
            try {
                textArea.append(textMessage.getText());
            } catch (JMSException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

第二种方法，您的`ChatFrame`和`MessageListener`位于两个单独的 Java 源文件中，您的代码如下所示：

```
ChatFrame

import javax.swing.JTextArea;

public class ChatFrame {
    JTextArea textArea = null;

    void init(){
        //create and show UI here

        //Also start your message listener and give it the reference of textArea to be updated
        MessageListener messageListener = new MessageListener(this.textArea);
    }
}

MessageListener

import javax.jms.JMSException;
import javax.jms.Message;
import javax.jms.TextMessage;
import javax.swing.JTextArea;

public class MessageListener implements javax.jms.MessageListener {

    private JTextArea textArea = null;

    public MessageListener(JTextArea textArea){
        this.textArea = textArea;
        createConnection();
    }

    private void createConnection(){
        //Create your JMS Connection and add yourself as subscriber
    }

    @Override
    public void onMessage(Message arg0) {
        TextMessage textMessage = (TextMessage)arg0;
        try {
            textArea.append(textMessage.getText());
        } catch (JMSException e) {
            e.printStackTrace();
        }
    }
} 
```

# wordpress - 如何将社交媒体图标添加到 TN3Gallery？

> ID：10767546
> 
> 赞同：1
> 
> 时间：2012-05-26T15:34:59.350
> 
> 标签：wordpress

如何将社交媒体图标添加到名为 TN3Gallery 的 wordpress 画廊插件中？

[http://goo.gl/h0nXB](http://goo.gl/h0nXB)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:05:51.013

```
<a href="javascript:void((function(){var e=document.createElement('script');e.setAttribute('type','text/javascript');e.setAttribute('charset','UTF-8');e.setAttribute('src','http://assets.pinterest.com/js/pinmarklet.js?r='+Math.random()*99999999);document.body.appendChild(e)})());"><img style="margin: 0 0 -5px 0;" onclick="doPinIt();" src="http://www.tiptopnest.com/wp-content/uploads/2012/01/pinitbutton.jpg" alt="Pin It" /></a> 
```

此代码可让您将所有图像固定在页面上。

# objective-c - GLKBaseEffect prepareToDraw GL 错误：0x0501

> ID：10767554
> 
> 赞同：3
> 
> 时间：2012-05-26T15:35:23.300
> 
> 标签：objective-c, ios, opengl-es, glkit

所以我一直在做一些 iphone 开发，里面有一些 OpenglES，但是当我在效果上调用 prepareToDraw 时，我遇到了一个相当奇怪的错误。简而言之，我的程序模拟掷骰子（尝试学习objective-c和opengl）。该程序在大多数情况下运行良好，我可以使用我为我的应用程序编写的所有内容（其物理错误但稍后会修复）。在我使用了包含 OpenGL 的部分之后，问题就出现了。

该程序包含 2 个菜单，您必须通过才能到达使用 OpenGL 的屏幕，一旦您使用了应用程序 OpenGL 部分并返回上一个菜单，然后再次尝试返回 OpenGL 部分，我得到一个打印出 GL ERROR: 0x0501。根据我的效果，我将其缩小为由 prepareToDraw 方法引起的。关于它的另一个奇怪的部分是，如果我回去，然后再前进，OpenGL 再次工作，并且可以一次又一次地重复，以便它在你进入 OpenGL 部分时每两次工作和中断。

我一直在寻找与我类似的问题，但每次它都与加载不是二次幂纹理的纹理有关，这对我没有帮助，因为我什至还没有使用纹理，只是彩色顶点。

我粘贴了我的两个代码文件，问题应该出在哪里

Dice.m：[http](http://pastebin.com/ze1DEEzs) ://pastebin.com/ze1DEEzs 在 draw 方法中，您会看到我的打印输出已经缩小了问题所在，即 prepareToDraw 方法。（第 308 行）

RollViewController.m：[http](http://pastebin.com/VycwAh3R) ://pastebin.com/VycwAh3R 这个文件是我设置效果和上下文等的地方，所以我必须在这里做错了，导致 prepareToDraw 方法在我每次运行 OpenGL 的第二次时都会出错程序的一部分。我有一种感觉，这与不放弃与上下文和效果有关的某种资源有关，但我找不到有关删除上下文和效果的任何信息（可能是因为您不需要，但我不确定）。

我希望有人遇到同样的问题并且可以回答我的问题，我希望这不仅仅是一个愚蠢的错误，因为我已经尝试解决这个问题一段时间了:)

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T13:37:55.197

经过许多痛苦和折磨，我终于找到了解决问题的方法。我不完全确定为什么这是一个问题，但在 OpenGL 部分（又名 RollViewController.m）中创建上下文并不是这样做的方法。相反，您应该在程序的整个生命周期中创建它一次，并将您的当前上下文设置为您的 glkview 为您创建的上下文。也许有人可以启发我为什么重新创建上下文是一个坏主意。

在我的代码中，我有一个在视图和菜单之间传递的配置文件对象，以便它们都可以与相同的数据进行通信，所以我只是在我的配置文件对象中定义了一个公共上下文，以便所有内容都可以访问上下文而不是创建他们自己的（和打破）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T17:59:59.227

该错误似乎很普遍，可能是由于不同的问题。我通过不使用 mipmap 避免了它（现在）。我评论了我拥有的以下代码并且不再有错误。

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR); glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,GL_LINEAR_MIPMAP_NEAREST); glGenerateMipmap(GL_TEXTURE_2D)

# objective-c - 返回参数对象时 ARC 的内存泄漏

> ID：10767555
> 
> 赞同：1
> 
> 时间：2012-05-26T15:35:24.097
> 
> 标签：objective-c, ios, automatic-ref-counting, instruments

我有一个奇怪的（在我看来）和使用 ARC（自动引用计数）的简单内存泄漏情况。我正在使用 iOS 代码，但我认为它应该普遍适用于 Objective-C。

我有一个以下函数，它在检查参数对象的属性后返回作为参数分配的对象。

```
- (id) returnParam:(id) obj
{
    // Do whatever filtering needed. Return nil for invalid input.

    return (NSNumber *)obj;
} 
```

如果我在循环中调用此方法，如下所示，我可以看到分配的内存不断增加，直到循环在 Instruments 中结束。

```
for(int i = 0; i < 1000000; i++)
{        
    id obj = [[NSNumber alloc] initWithInt:i];        
    id obj2 = [self returnParam:obj];
    NSLog(@"attempt %@", obj2);
} 
```

但是，如果我将`returnParam`函数的内容按如下方式放入循环中，则一切正常。内存脚印一直保持相同的大小。

```
for(int i = 0; i < 1000000; i++)
{        
    id obj = [[NSNumber alloc] initWithInt:i];

    // Do whatever filtering needed. Break on invalid input.

    id obj2 = obj;

    NSLog(@"attempt %@", obj2);
} 
```

我已经消除了过滤部分（所以基本上该函数只将对象传递回调用者），同样的情况仍然存在。

不明白为什么这个序列不会像假设的那样减少保留计数，我尝试了所有可能的组合`__weak`，`__unsafe_unretained`这里和那里，但没有一个有效。

有人可以解释为什么这个（返回参数对象）不起作用，并建议我解决这个问题吗？

PS BTW，它没有被捕获为仪器中的内存泄漏事件，但我认为的情况是明显的内存泄漏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T15:47:18.637

这不是泄漏。它与如何`-autorelease`工作有关。扩展什么`-returnParam:`：

```
-(id) returnParam:(id) paramToReturn
{
   // make sure the variable is in the scope for the entirety of the function
   id returnValue = nil;
   @try 
   {
       // when the parameter is passed in, ARC will automatically retain it.
       [paramToReturn retain];
       returnValue = [paramToReturn retain]; // strong assignment (a = b)
       return returnValue;
   }
   @finally
   {
       [paramToReturn release]; // release the value we retained when we passed in the parameter
       [returnValue autorelease]; // autorelease the return value so it is still valid after the function exits.
   }
} 
```

现在，让我们将其与您的另一个循环进行比较：

```
for (int i = 0; i < 1000; i++)
{
    id obj = [[NSNumber numberWithInt:i] retain]; // retain, because 'obj' is strong by default.
    id obj2 = [obj retain]; // retain, because 'obj2' is strong by default

    NSLog(@"attempt %@", obj2);

    [obj release]; // release because 'obj' is strong
    [obj2 release]; // release because 'obj2' is strong.
} 
```

因此，在弹出下一个 autorelasepool 之前，您的变量不会被清理，这通常发生在 iPhone 应用程序的下一个滴答声中，或者可能发生在控制台应用程序`NSRunLoop`的末尾。`@autoreleasepool`

# css - 下拉菜单中的联系表

> ID：10767556
> 
> 赞同：0
> 
> 时间：2012-05-26T15:35:24.907
> 
> 标签：css, drop-down-menu, contact-form

我尝试在下拉菜单中使用联系表。到目前为止，我可以在菜单中使用它，但我不能在这个联系表中写任何东西。

菜单每次都会关闭。我已经尝试过了，`display:block`但这不起作用。我能做些什么来解决这个问题。解决方案？

这是我的代码的一个例外：

```
 <li class="dropdown">
              <a data-toggle="dropdown" class="dropdown-toggle" href="index.html">Kontakt <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li class="nav-header">Kontaktiere mich</li>
                    <li class="contactform">
                        <section>
                            <form method="post" action="/" class="contactbox">
                                <div class="contactbox">
                                    <p><label>Dein Anliegen:</label><br>
                                    <textarea class="input-xsmall" id="textarea" rows="3"></textarea>

                                    <p><label>Dein Name:</label><br>
                                    <input type="text" required=""></p>

                                    <p><label>Deine E-Mail-Adresse:</label><br>
                                    <input type="email" required="" value=""></p>

                                    <button class="btn" type="submit">absenden</button>
                                </div>
                            </form>
                        </section>
                    </li>
                </ul>
          </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:12:42.840

您需要对单击以打开底部的链接进行一些更改：

```
<a data-toggle="dropdown" tabindex="1" class="dropdown-toggle" href="#">
    Kontakt <b class="caret"></b>
</a> 
```

并在 CSS 中有这个：

```
.dropdown-menu {display: none;}

.dropdown-toggle:active + .dropdown-menu, 
.dropdown-toggle:focus + .dropdown-menu, 
.dropdown-menu:hover {display: block;}

.dropdown-toggle:focus {outline:none;} 
```

**注意**：单击 Kontakt 时会打开下拉菜单。如果您希望它也可以在悬停时打开，则需要

```
.dropdown-toggle:hover + .dropdown-menu, 
.dropdown-toggle:active + .dropdown-menu,
.dropdown-toggle:focus + .dropdown-menu, 
.dropdown-menu:hover {display: block;} 
```

如评论中所述，此方法有一个问题：在下拉列表内部单击然后将光标移到下拉列表之外......它会关闭。这无法修复，但有...

* * *

...另一种方法：使用带有标签而不是链接的复选框

```
<input data-toggle="dropdown" type='checkbox' name='dropdown-toggle' id='dropdown-toggle' class='dropdown-toggle'/>
<label for='dropdown-toggle'>Kontakt <b class="caret"></b></label> 
```

在这种情况下，CSS 将是：

```
.dropdown-toggle, .dropdown-menu {display: none;}
.dropdown-toggle:checked ~ .dropdown-menu, .dropdown-menu:hover {display: block;}
.dropdown-toggle:focus {outline:none;} 
```

演示[http://dabblet.com/gist/2794382](http://dabblet.com/gist/2794382)

# ruby-on-rails - 带有 :only 的下一个资源路由

> ID：10767559
> 
> 赞同：0
> 
> 时间：2012-05-26T15:35:37.290
> 
> 标签：ruby-on-rails, routes

本质上，我试图将两个资源声明组合成一个命令。资源：文档，仅：[：create，：destroy] 资源：文档收集：排序结束

我尝试将两者混合在一起，我不希望 rails 默认为您提供所有额外的方法。明显地

```
resource :documents, only: [:create, :destroy] do
  collection :sort
end 
```

没用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:42:47.723

代替：

```
collection :sort 
```

尝试类似：

```
get 'sort' => 'some#action', on: :collection 
```

# ruby-on-rails - Rails - 将 CSS 类添加到 Link_to_（我的 javascript 函数）？

> ID：10767565
> 
> 赞同：2
> 
> 时间：2012-05-26T15:36:45.327
> 
> 标签：ruby-on-rails

在 Railscasts #197 之后，有人知道如何将一个类添加到调用 js 函数的 link_to 吗？

```
<%= link_to_add_fields "Add Recipient", f, :recipients %> 
```

_

```
function add_fields(link, association, content) {
        var new_id = new Date().getTime();
        var regexp = new RegExp("new_" + association, "g");
        $(link).parent().before(content.replace(regexp, new_id));
} 
```

我尝试了很多不同的东西，但没有找到任何有效的方法。就像，我认为它应该是这样的：

```
<%= link_to_add_fields "Add Recipient", {f, :recipients}, :class => "button_add" %> 
```

这将产生（在传递给函数的两个对象周围有或没有括号：

```
undefined method `object' for #<Hash:0xaa8c320> 
```

Ruby 1.8.7 / Rails 2.3.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T23:53:15.870

我会用 css_class 参数扩展方法

```
module ApplicationHelper

    def link_to_add_fields(name, f, association, css_class)
        new_object = f.object.class.reflect_on_association(association).klass.new
        fields = f.fields_for(association, new_object, :child_index => "new_#{association}") do |builder|
            render(association.to_s.singularize + "_fields", :f => builder)
        end
        link_to_function(name, "add_fields(this, \"#{association}\", \"#{escape_javascript(fields)}\")", :class => css_class)
    end
end 
```

然后我假设您可以按如下方式调用辅助方法

```
<%= link_to_add_fields "Add Recipient", f, :recipients, "button_add" %> 
```

我没有尝试过，但这个资源说清楚

[apidock link_to_function](http://apidock.com/rails/ActionView/Helpers/JavaScriptHelper/link_to_function)

# javascript - 如何让 JavaScript 以 iframe 为目标？

> ID：10767568
> 
> 赞同：2
> 
> 时间：2012-05-26T15:36:51.143
> 
> 标签：javascript, html, iframe

我有一个包含**2 个 iframe**的页面，我想知道是否可以在影响 iframe 的父窗口中有一个链接。

我知道如何创建一个普通链接来更改 iframe 中的页面，但我需要让我将 JavaScript 激活到 iframe 中。

```
// The JS | normally in one line
javascript:var%20KICKASSVERSION='2.0';
var%20s%20=%20document.createElement('script');
s.type='text/javascript';document.body.appendChild(s);
s.src='//hi.kickassapp.com/kickass.js';
void(0); 
```

如果您将其放入地址栏中，它可以在不更改页面的情况下工作，但我想知道这是否可以在 iframe 中实现。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:48:01.733

HTML iframe 具有允许您操作 iframe 的内部文档的`contentDocument`属性（请参阅[iframe 上的 MDN 页面）。](https://developer.mozilla.org/en/DOM/HTMLIFrameElement)

粗略的指导方针（未经测试，但你明白了:)）：

```
var iframe = document.querySelector("iframe");
iframe.contentDocument.location.href = "..."; // change the inner iframe's location
iframe.contentDocument.body.appendChild(yourScriptNode); // append a script inside the iframe 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T15:52:47.750

查看您的代码，最简单的方法是执行以下操作：

```
var iframe=/*DOM REFERENCE TO YOUR IFRAME, for example:*/document.getElementById('myIframe');
iframe.src="javascript:var%20KICKASSVERSION='2.0';var%20s%20=%20document.createElement('script');s.type='text/javascript';document.body.appendChild(s);s.src='//hi.kickassapp.com/kickass.js';void(0);"; 
```

但是，更干净的方法是：

```
var myLink=document.getElementById('myLink');

myLink.addEventListener('click',function(evt){
 var myFrame=document.getElementById('myFrame');
 var win=myFrame.contentWindow;

 win.KICKASSVERSION='2.0';
 var s = win.document.createElement('script');
 s.type='text/javascript';win.document.body.appendChild(s);
 s.src='//hi.kickassapp.com/kickass.js';

 evt.preventDefault();
} 
```

请注意，在所有情况下都执行[相同的来源策略](https://developer.mozilla.org/En/Same_origin_policy_for_JavaScript)。

# iphone - iCarousel 在用户选择的索引处停止

> ID：10767569
> 
> 赞同：10
> 
> 时间：2012-05-26T15:37:12.347
> 
> 标签：iphone, ios, xcode

**编辑 ：**

我正在制作一个像老虎机一样的应用程序，我`iCarousel`为老虎机对象添加了。所以我有一个按钮可以旋转`iCarousel`. 在我的 iCarousel 视图中，有两个插槽（插槽 1 和插槽 2）。下面是我的`iCarouselView`：（框是两个所在的`carousel`位置）

![在此处输入图像描述](../Images/aab900aabebca881872c2fa02b79e279.png)

这就是我旋转我的方式`iCarousel`：

```
-(IBAction) spin {

[carousel1 scrollByNumberOfItems:-35 duration:10.7550f];
[carousel2 scrollByNumberOfItems:-35 duration:10.7550f];

} 
```

这是我想做的：*我想强制让它停止到用户选择的索引。*

我已经这样做了，下面的图片是一个`newViewcontroller`包含`UIImageView`一个按钮的图片，所以当用户点击它时，我的`CustomPicker`弹出窗口。My`CustomPicker`包含用户在相机胶卷上选取的图像。所以每个按钮都有一个特定的值发送到 my `iCarouselView`. carousel1 用于 slot1，carousel2 用于 slot2。

所以我的问题是旋转旋转木马，然后在特定时间使其**停止**到用户选择的所需图像/索引。

对不起，我的英语不好。 ![在此处输入图像描述](../Images/d34bf3399b9d97839343391874cfd739.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T15:45:44.257

这很简单。我以前做过类似的事情。

在下面的方法中：

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index             reusingView:(UIView *)view{

   //Configure your view here
   ..... 

  //Add a button on each view of the carousel
  UIButton * someButton = [[UIButton alloc] initWithFrame:view.bounds];
     [someButton setAlpha:0.0];
     [someButton addTarget:self action:@selector(fingerLanded:) forControlEvents:UIControlEventTouchDown];
     [view addSubview:someButton];
     [view bringSubviewToFront:someButton];

    //Add a tag - correspond it to the index
     someButton.tag = index;

   //Make sure the view is user interaction enabled
   [view setUserInteractionEnabled:YES];

    //Also make sure the button can actually receive touches and there is no view 
    //blocking touch events from being sent to the button.

  return view;
} 
```

还添加

```
- (void) fingerLanded:(id) sender{

UIButton * theButtonFingerLandedOn = (UIButton *) sender;

//This is the index the user tapped his finger on
NSUInteger index = theButtonFingerLandedOn.tag;

//Scroll to that particular index
[self.carousel scrollToItemAtIndex:index animated:YES]; 
```

}

还添加

```
- (void) viewDidLoad{

  //You may need this to enable user interaction on a view flying by    
  // Look in the - (void)transformItemViews method of the iCarousel library
  self.carousel.centerItemWhenSelected = NO;

 } 
```

你必须做类似的事情。希望它有帮助:) !!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:08:58.927

Ok, let me try rephrasing the question: You have an array of images "imageArray" with one special one "carousel1Image" (selected by newViewController). You want the carousel to go around and around for N seconds and then land on the special one?

If that's correct, something like this should work...

```
-(void) spinCarousel: (iCarousel *) carousel toIndex:(NSInteger) targetIndex { 
    NSInteger imagesPerSecond = 5;
    double secondsToScroll = 10.7550f;

    NSUInteger currIndex = [carousel currentItemIndex];
    NSUInteger numItems = [carousel numberOfItems] + [carousel numberOfPlaceholders];
    NSUInteger timesAround = floor(secondsToScroll*imagesPerSecond/numItems);
    NSInteger numToScroll = timesAround*numItems + targetIndex-currIndex;
    [carousel scrollByNumberOfItems:numToScroll duration: secondsToScroll];

}

[self spinCarousel: carousel1 toIndex:[imageArray indexOfItem:carousel1Image]];
[self spinCarousel: carousel2 toIndex:[imageArray indexOfItem:carousel2Image]]; 
```

====Old Answer====

I share the confusion of others about what the goal is. For example, it's not clear what a "price" is and what it has to do with your slot machine? "I want the user to pick their last price, it means that the last view or image to where my icarousel can stop" Sorry, but that doesn't match my understanding of the word "price".

But reading your scenario at the end: "what I want is when the user click a UITableViewCell or thumbnail with a specific image from the array, it will pass something/value to my UIButton spin, so that the image click from the UITableViewCell will be the last price." I interpret that as EITHER there is a single value that your spin button needs to have access to OR that there is a value for EACH image that your spin button needs to have access to. Either one seems simple, so I'm not sure why the question.

Assuming it's the first (a single price), then why can't you just have your settings controller set a property with that value (same as how you pass your image NSMutableArray)?

If it's the second (a value for each image), then either create two parallel arrays, one with the price and one with the image, OR have an array with dictionaries in it, each with a price and an image.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:50:21.357

在不扩展 UIButton 的情况下，您可以向按钮添加唯一的 TAG，从 UIEvent 的源中获取标签。

IE：

```
-(void) buttonSetupMethod {
    for(each item) {
        UIButton * button = [[UIButton alloc] init];
        ... additional setup ...
        button.tag = SOME_UNIQUE_TAG_FOR_BUTTON;
        [button addTarget:self action:@selector(processaction:) forControlEvents:desiredEvents];
        ... retain button ...
     [button release];
    }
 }

 -(void) processAction:(id) source
 {
     UIButton * button = (UIButton *) source;
     int tag = button.tag;
     ... conditional logic on specific tag ...
 } 
```

有关传递参数的更多信息，请参见：[在按钮操作上传递参数：@selector](https://stackoverflow.com/questions/3716633/passing-parameters-on-button-actionselector)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T17:27:49.720

你为什么不做你的 tableview 想法，接受下面的例行调用：

```
[carousel scrollByNumberOfItems:-35 duration:10.7550f]; 
```

并将其放入另一个非操作例程中，并让 TableView didSelectItemAtIndex 方法调用您的新例程，并让您的操作例程调用它。

```
-(void)newRoutineToCall:(int)itemsToMove{
    [carousel scrollByNumberOfItems:itemsToMove duration:10.7550f];
}

-(IBAction) spin {        
    [self newRoutineToCall:-35];
} 
```

然后实施

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    [self newRoutineToCall:[indexPath row]];
} 
```

# python - wordpress 在代理服务器上使用 python

> ID：10767570
> 
> 赞同：1
> 
> 时间：2012-05-26T15:37:24.683
> 
> 标签：python, wordpress, networking, proxy

这是在博客上发布的代码。这是我的第一次尝试。我不知道它有什么错误。我正在使用代理服务器，我得到的错误是与服务器的连接失败。

任何人都可以帮我看看好吗eeeeeeeeee :/

```
import wordpresslib

# dummy data to be on safe side
data = "Post content, just ensuring data is not empty"

url='http://agneesa.wordpress.com/wordpress/xmlrpc.php'
# insert correct username and password
wp=wordpresslib.WordPressClient(url,'agnsa','pan@13579')
wp.selectBlog(0)
post=wordpresslib.WordPressPost()
post.title='try'
post.description=data
idPost=wp.newPost(post,True) 
```

这是回溯

这是回溯文件

```
 Traceback (most recent call last):
   File "C:\Python27\Lib\example.py", line 34, in <module>
   post.categories = (wp.getCategoryIdFromName('Python'),)
   File "C:\Python27\Lib\wordpresslib.py", line 332, in getCategoryIdFromName
   for c in self.getCategoryList():
   File "C:\Python27\Lib\wordpresslib.py", line 321, in getCategoryList
   self.user, self.password)
   File "C:\Python27\Lib\xmlrpclib.py", line 1224, in __call__
   return self.__send(self.__name, args)
  File "C:\Python27\Lib\xmlrpclib.py", line 1578, in __request
    verbose=self.__verbose
  File "C:\Python27\Lib\xmlrpclib.py", line 1264, in request
    return self.single_request(host, handler, request_body, verbose)
  File "C:\Python27\Lib\xmlrpclib.py", line 1292, in single_request
    self.send_content(h, request_body)
  File "C:\Python27\Lib\xmlrpclib.py", line 1439, in send_content
    connection.endheaders(request_body)
  File "C:\Python27\Lib\httplib.py", line 954, in endheaders
    self._send_output(message_body)
  File "C:\Python27\Lib\httplib.py", line 814, in _send_output
    self.send(msg)
  File "C:\Python27\Lib\httplib.py", line 776, in send
    self.connect()
  File "C:\Python27\Lib\httplib.py", line 757, in connect
    self.timeout, self.source_address)
  File "socket.py", line 571, in create_connection
    raise err

error: [Errno 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:50:44.457

从您网站的外观来看，您发布的网址返回 404（实际上并不存在）。但是，这似乎已准备好接收 POST 请求： [http ://agneesa.wordpress.com/xmlrpc.php](http://agneesa.wordpress.com/xmlrpc.php)

我建议您尝试检查该 URL 的准确性。

这是我在使用原始 URL 尝试代码时得到的结果：

```
xmlrpclib.ProtocolError: <ProtocolError for \
    agneesa.wordpress.com/wordpress/xmlrpc.php: 404 Not Found> 
```

这是我尝试使用修改后的 URL 时得到的结果：

```
wordpresslib.WordPressException: \
    <WordPressException 403: 'Bad login/pass combination.'> 
```

...显然因为那不是您的真实帐户信息。简而言之，如果您的代理没有设置为正确转发请求，它也可能导致问题，但是如果我们不知道您的代理配置的细节，则无法确定。

# ios - 使用 ios 和故事板编程 UIViewControllers 循环

> ID：10767573
> 
> 赞同：1
> 
> 时间：2012-05-26T15:37:30.017
> 
> 标签：ios, ios5, uinavigationcontroller, storyboard

我刚刚开始使用 IOS 5 和故事板进行 ios 开发，想知道如何解决以下问题：

我有一个树层次结构，其中产品是树的节点，产品是叶子。我创建了一个 TileViewController 视图来显示特定级别的所有节点。当用户在 TileView 中选择一个节点时，根据它的类型（叶子或非叶子），我要么将新的 TileViewController 推送到应用程序 NavigationController 中，要么显示一个 DetailViewController。

我目前所做的是以编程方式完成所有事情（我的意思是跟踪用户在 TileViewController 中单击的内容，并决定下一步在 NavigationController 中推送什么内容）。我掌握了情节提要，并在需要时使用下面的代码创建下一个 TileViewController。

```
UIStoryboard *storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
        TileViewController *controller =  [storyBoard instantiateViewControllerWithIdentifier:@"TileViewController"];
        controller.model = self.model;   
        [self.navigationController pushViewController:controller animated:YES]; 
```

我不知道如何使用故事板而不是 TileViewController 中的硬编码逻辑来实现这一点。这是可能吗？我考虑过使用单个 TileViewController 并根据用户选择重新加载显示的图块，但后来我丢失了导航部分。有什么想法我能做到这一点吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T16:09:42.627

您可以从任何启动导航的 UI 组件定义一个转场，回到故事板中的同一场景 - 因此，如果它来自一个按钮，请从按钮向下按住 ctrl 并拖动到表示平铺视图控制器的黄色球体。

将此定义为 push segue，然后在 prepareForSegue 中传递相关细节。这将创建一个潜在的无限导航堆栈，而无需在情节提要中重复自己。

# php - 斜线后 ord() 不起作用

> ID：10767574
> 
> 赞同：0
> 
> 时间：2012-05-26T15:37:54.917
> 
> 标签：php, decimal, ascii

我使用以下函数将 ASCII 转换为十进制：

```
function ascii_to_dec($str)
{
  echo $str."<br />";
  for ($i = 0, $j = strlen($str); $i < $j; $i++) 
  {
    $dec_array[$i] = ord($str[$i]);
  }
return $dec_array;
} 
```

例子：

```
$ascii ="2010/";
$newvar = ascii_to_dec($ascii); 
```

并使用此代码调用该函数。

它适用于我如上所述发送的数据。但是当我给出如下数据时：

```
$ascii ="2010/2012"; 
```

只有 up to`2010/`被转换。后面的数据`/`省略。如何转换我传递给函数的完整数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T16:02:03.877

这可能无法解释为什么您的代码行为异常，但您可以将整个函数重写为：

```
function ascii_to_dec($str) {
    return array_values(unpack('C*', $str));
} 
```

**更新**

```
function ascii_to_dec($str) {
    return join('', unpack('C*', $str));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:21:15.303

我发现了这个问题。我相信 $dec_array 存在内存问题。2010/2012 的十进制等效值为“504849484750484950”。但是 $newvar 只能达到 504849484，这实际上是 2010/ 的。

将我的代码更改为以下，

```
function ascii_to_dec($str)
{
echo $str."<br />";
echo strlen($str); echo "<br />";
for ($i = 0, $j = strlen($str); $i < $j; $i++) {
$temp = ord($str[$i]);
$decimal="$decimal"."$temp";
}
return $decimal;
} 
```

现在它以文本形式返回。

# codeigniter - 将变量存储在 codeigniter 对象中

> ID：10767575
> 
> 赞同：1
> 
> 时间：2012-05-26T15:38:02.643
> 
> 标签：codeigniter

只是一个简单的问题。在我提出问题之前，请通过以下代码。

```
class A extends CI_Controller{

    private $nam = null;
    private $nam1 = null;

    function __construct(){
      $this->nam="GOKUL";
      echo "IN CONST  ";
    }

    function index(){
      echo "ID:".$this->nam;
      $this->nam1="JADHAV";
   }

  function userdefined(){
   echo "UD:".$this->nam;
   echo "UD:name1:".$this->nam1;
  }

}//class 
```

我想做的是。调用用户定义的函数时，我需要打印 JADHAV，但数据是在索引函数中初始化的。如何实现这一点。

这是示例代码，但在我的实时。我有大量数据要加载到索引函数中的数组中，并在您看到的其他函数中检索它。我不能使用会话/数据库来存储 . 有什么办法吗？

我还在想的是，如何存储在 Codeigniter 对象中并检索它们。所以这可能是它作为 global 可用的。然后可能我可以重置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:51:19.420

您打算如何以及在何处调用 userdefined()？

如果您将其称为页面（www.yoururl.com/a/userdefined - 基于默认 CodeIgniter 路由），则如果属性值未存储在数据库或会话中，或者在执行时未定义，则无法读取该属性值方法。

您可以从 index() 调用 userdefined() 并加载您的索引页面 (www.yoururl.com/a)：

```
function index(){
      echo "ID:".$this->nam;
      $this->nam1="JADHAV";
      $this->userdefined(); //will print "UD: JADHAV"
} 
```

# ruby-on-rails-3 - 对象的同时更改

> ID：10767576
> 
> 赞同：0
> 
> 时间：2012-05-26T15:38:16.743
> 
> 标签：ruby-on-rails-3

我正在开发一个管理商店库存的应用程序。我假设可能有多个用户在使用该应用程序，因此两者都可以预订同一项目的结帐（但可能是两个不同的收件人。

有人可以推荐任何可以帮助解决此问题的宝石或技术吗？

当用户创建一个新订单时，他们会获得未预订的物品列表（这是一家出租店），但如果一个人将表格打开一会儿，没有进行预订，其他人仍然会看到该物品是可用的。

任何人都可以就此提供建议吗？希望这个问题不要太模糊。

通过创建 before_save 验证，回调是否可行？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T07:17:09.900

您可以使用像[delayed_job](https://github.com/collectiveidea/delayed_job)这样的gem ，您可以在其中安排作业在特定时间运行，在这种情况下，在特定超时之后。然后，您可以安排一个删除项目预订状态的作业。如果用户成功保留项目，则需要删除延迟的作业。要从这个 activerecord 表中删除项目，您可以根据[此处](https://github.com/collectiveidea/delayed_job#gory-details)指定的表属性找到它。

# pdf - 在 GhostScript 中使用 PDFFitPage 时删除 PDF 边距

> ID：10767579
> 
> 赞同：1
> 
> 时间：2012-05-26T15:38:58.413
> 
> 标签：pdf, crop, ghostscript

我正在`pdfcrop`使用 GhostScript 将没有边距的文件（使用普通 PDF 文件生成）拟合到给定的纸张大小：

```
gs -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dFIXEDMEDIA \
   -dPDFFitPage -d -dBATCH -dQUIET -dNOPAUSE -dDEVICEWIDTHPOINTS=864 \
   -dDEVICEHEIGHTPOINTS=612 -sOutputFile=$INPUT $OUTPUT 
```

但输出有额外的利润（我正在裁剪以摆脱它们）。

是否可以强制 GhostScript 在没有这些边距的情况下生成输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T12:12:07.763

如果没有看到您的文件，我无法确定，但是我怀疑您所做的只是在 PDF 文件中设置了 /CropBox。默认情况下，Ghostscript 使用可能未更改的 /MediaBox。

尝试设置 -dUseCropBox

# vb.net - Windows Phone 应用上的电池状态

> ID：10767581
> 
> 赞同：0
> 
> 时间：2012-05-26T15:39:06.007
> 
> 标签：vb.net, silverlight, windows-phone-7

如何接收有关 windows phone 电池状态的数据？我检查了微软的网站，但除了充电模式我找不到任何东西：S

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T20:57:01.767

目前无法确定设备的电池状态。您可能要考虑为什么会这样。我认为这是因为您可能部署到设备的应用程序不需要知道此信息，因为它应该留给用户来确定他们是否需要为他们的设备充电，因为有任何低电池状态的充分通知。这将使您的应用程序更加简单，因为您无需担心设备的电池电量。其他要考虑的事情是您将如何处理有关电池状态的信息，显示电池电量，我不这么认为，因为状态栏已经包含电池指示器。知道电池电量后，您是否会显示有关电池电量低状态的通知，这已经涵盖了。

# c# - 为什么我的 WPF 命令没有触发？

> ID：10767583
> 
> 赞同：4
> 
> 时间：2012-05-26T15:39:18.487
> 
> 标签：c#, wpf, mvvm

我有这个 XAML：

```
<UserControl x:Class="Foo.UserControls.Bar"
             x:Name="FooBar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <StackPanel>
        <WrapPanel Margin="4,0,0,0">
            <Button Command="{Binding Path=CreateCommand, ElementName=FooBar}">
                <TextBlock>Create</TextBlock>
            </Button> 
```

使用此代码隐藏（已删除`using`s）：

```
namespace Foo.UserControls
{
    public partial class Bar : UserControl
    {
        public DelegateCommand CreateCommand { get; private set; }

        public Bar()
        {
            InitializeComponent();

            CreateCommand = new DelegateCommand(Create);
        }

        private void Create(object action)
        {
            Console.WriteLine("foo");
        }
    }
} 
```

无论是调试器还是控制台日志，它似乎都不会触发。奇怪的是绑定似乎很好，因为它不会将任何错误记录到输出中。如果我故意破坏绑定，我确实会收到绑定错误，但是使用上面的绑定我没有收到任何错误，但它永远不会触发。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-26T16:04:54.907

试着放`CreateCommand = new DelegateCommand(Create);`之前`InitializeComponent();`

# awk - 如何使用awk获得具有给定分布的随机行？

> ID：10767585
> 
> 赞同：1
> 
> 时间：2012-05-26T15:39:44.407
> 
> 标签：awk

我有两个要合并的表格文件，但在此之前我想减少第二个。

第一个文件让我们说 File1 是表格的，就像这样

```
 A 67 98 56
 A 22 29 62
 A 11 99 28
 B 37 88 14
 B 33 99 65 
```

我们有 3 行 A 和 2 行 B

File2 在 A 和 B 之间包含 3000 行，我想从 File2 中随机选择行，但 A 和 B 的数量与 File1 完全相同，这意味着只有 3 个随机行与 A 和两个与 B

任何人都知道如何用 awk 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:50:50.167

```
#!/bin/bash
read -r acount bcount <<< $(csplit file2 '/^B /')

awk -v "acount=$acount" -v "bcount=$bcount" '
    NR == FNR {
        arr[$1]++; 
        next
    }
    ! setup {
        setup = 1
        while (arandcount < acount) {
            line = int(rand() * acount) + 1
            if (! alines[line]) {
                alines[line] = 1
                arandcount++
            }
        }
        while (brandcount < bcount) {
            line = int(rand() * bcount) + 1
            if (! blines[line]) {
                blines[line] = 1
                brandcount++
            }
        }
    }
    FILENAME == "xx00" && FNR in alines {
        print
    }
    FILENAME == "xx01" && FNR in blines {
        print
    }' file1 xx00 xx01 
```

其中“xx00”和“xx01”是由`csplit`.

该`csplit`命令在正则表达式上拆分输入文件并输出每个输出文件的行数。该`read`命令将这些计数放入变量中。变量被传递到 AWK 程序中。

第一个块读取 file1 中的所有行并计算每个“类型”（A 或 B）。

第二个块通过在 1 和“类型”的行数之间选择一个随机数来选择要选择的行号。由于该标志，此块仅执行一次。

最后两个块检查每一行的记录号，看看它是否在选取的行号数组中，如果是则打印它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T06:45:15.040

这可能对您有用：

```
grep '^A' file2 | sort -R | head -$(grep -c '^A' file1) >file3
grep '^B' file2 | sort -R | head -$(grep -c '^B' file1) >>file3 
```

注意这假设`file1`是排序的。

# image - 无法让图像在 Qt 的中心旋转

> ID：10767587
> 
> 赞同：2
> 
> 时间：2012-05-26T15:39:53.807
> 
> 标签：image, qt, rotation

我正在尝试在 QLabel Widge 内旋转 89x89 图像。

```
#include "header.h"

disc::disc(QWidget *Parent) : QWidget(Parent)
{
    orig_pixmap = new QPixmap();
    rotate = new QLabel(this);
    showDegrees = new QLabel(this);

    orig_pixmap->load("pic.png");
    degrees = 0;

    rotate->resize(89,89);
    rotate->move(100,10);
    rotate->setStyleSheet("QLabel{background-color:red;}");

    showDegrees->resize(100,100);
    showDegrees->move(400,0);
}

void disc::rotate_disc()
{
    QString string;
    degrees++;
    if(degrees == 360) degrees = 0;

    QTransform rotate_disc;

    rotate_disc.translate( (orig_pixmap->width()-rotate->width())/2 , (orig_pixmap->width()-rotate->height())/2);
    rotate_disc.rotate(degrees,Qt::ZAxis);

    QPixmap pixmap;
    //pixmap = orig_disc->scaled(89,89,Qt::IgnoreAspectRatio,Qt::SmoothTransformation);
    pixmap = orig_pixmap->transformed(rotate_disc,Qt::SmoothTransformation);
    rotate->setPixmap(pixmap);

    string.append("Degrees: " + QString::number(degrees) + "*");
    showDegrees->setText(string);
} 
```

即使它旋转。图像的一半在 QLabel 之外滚动，因此那一侧不可见。我怎样才能使它在图像中心的原点（0,0）处中心旋转。

这是文件

```
http://www65.zippyshare.com/v/85775455/file.html 
```

如果你看它，你会发现图像就像向左弹跳一样。我怎样才能让它在黑色区域内旋转。

我每 10 毫秒为 rotate_disc() 函数设置一个信号超时。我正在使用它来深入学习 Qt。

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:27:12.997

我已经这样做了......

```
//Move windows's coordinate system to center.
QTransform transform_centerOfWindow( 1, 0, 0, 1, width()/2, height()/2 );

//Rotate coordinate system.
transform_centerOfWindow.rotate( m_LoadingDisk_degrees );

//Draw image with offset to center of image.
QPainter painter( this );

//Transform coordinate system.
painter.setTransform( transform_centerOfWindow );

//Load image.

//Notice: As coordinate system is set at center of window, we have to center the image also... so the minus offset to come to center of image.
painter.drawPixmap( -loadingDisk.width()/2, -loadingDisk.height()/2, loadingDisk ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:13:29.553

我认为您真正缺少的只是围绕像素图中心进行旋转的初始平移。

将其移动到原点，旋转，然后将其移回原点。请记住，考虑到您在代码中指定它们的方式，转换的应用顺序与您期望的相反。

```
QTransform rotate_disc;
rotate_disc.translate(orig_pixmap->width()/2.0 , orig_pixmap->height()/2.0);
rotate_disc.rotate(degrees);
rotate_disc.translate(-orig_pixmap->width()/2.0 , -orig_pixmap->height()/2.0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T18:46:33.047

如果您正在制作加载指示器，动画 gif 会容易得多。在 Qt 中查看[GIF 动画](https://stackoverflow.com/questions/3248243/gif-animation-in-qt)

# php - 如何使用 1and1 数据库和 Dreamweaver 设置 PHP 发布日期？

> ID：10767588
> 
> 赞同：0
> 
> 时间：2012-05-26T15:39:57.103
> 
> 标签：php, mysql, date, phpmyadmin, timestamp

我对 PHP 非常非常陌生，所以请多多包涵。我想配置我当前的网站（我已经将其文件转换为 .php，并且我在 Dreamweaver 中工作），这样每次我将新文件上传到我的服务器时，都会自动显示上传日期在文章中（WordPress 和其他 CMS 会这样做，但我没有时间制作类似于我当前站点布局的 WordPress 模板）。

数据库的问题在于它托管在 1and1，不允许远程访问（即通过 Dreamweaver），我必须在主机的网站上使用 phpMyAdmin，这非常慢。例如，每当我想创建一个表时，我都必须浏览大量加载缓慢的页面。

有没有办法让这个过程自动化，至少在某种程度上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T15:46:42.483

您总是可以构建一个简单的 PHP 脚本来连接到您的数据库并运行 SQL 查询。然后您可以只访问该页面并执行查询。

如果您不确定，这里有一个关于编写 SQL 并使用 PHP 运行它的教程：[http ://www.tizag.com/mysqlTutorial/](http://www.tizag.com/mysqlTutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T15:45:35.743

PHPMyAdmin 有一个“SQL”选项卡，您可以在其中输入文本命令，就像在本地 mysql 命令行中输入它们一样。如果您不确定在哪里可以找到它，[这个（否则不相关的）教程](http://computeraxe.com/null-values-handled-nicely-with-the-php-error-suppression-operator/)中有一张图片。您可以使用它来创建和修改表，还可以运行各种查询。

# c# - 组合框设置自动完成模式上的激活器崩溃

> ID：10767591
> 
> 赞同：1
> 
> 时间：2012-05-26T15:40:16.167
> 
> 标签：c#, winforms, combobox, activator

我需要使用激活器实例化表单，因为我需要迭代所有表单的控件来设置属性。对于这个过程，我使用下面的代码。

```
using (Form frm = (Form)Activator.CreateInstance(type))
                    {
                        using (SqlConnection cn = new SqlConnection(Program.connectionString))
                        {

                            cn.Open();
                            General.ProcessControls(cn, frm, frm.GetType().Name);
                            cn.Close();
                        }
                    } 
```

一切都很好，直到这里。上面的代码对所有表单都像魅力一样运行，除了我有一个在 SuggestAppend 模式下设置了自动完成模式的组合框。在这种形式中，我的应用程序在尝试设置自动完成模式时因 InvocationTargetException 而崩溃到函数 InitializeComponent() 中。下面是我的应用程序崩溃的代码行。

```
 this.comboBoxAreaType.AutoCompleteMode = System.Windows.Forms.AutoCompleteMode.SuggestAppend;
        this.comboBoxAreaType.AutoCompleteSource = System.Windows.Forms.AutoCompleteSource.ListItems; 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:52:20.923

agent-j 您的评论对于了解出了什么问题非常有帮助。

我在调用线程 start() 之前添加了下面的命令以将我的线程设置为 STA AppartmentState，现在它就像一个魅力。

```
thread.SetApartmentState(ApartmentState.STA); 
```

# java - 获取表达式错误的非法开始

> ID：10767594
> 
> 赞同：0
> 
> 时间：2012-05-26T15:40:47.010
> 
> 标签：java

我对java完全陌生。我正在尝试创建我的第一个程序，但出现此错误。

```
E:\java>javac Robot.java
Robot.java:16: error: illegal start of expression
public String CreateNew (); {
                       ^
Robot.java:16: error: ';' expected
public String CreateNew (); {
                       ^
2 errors 
```

下面是我的程序。

```
public class Robot {
    public static void main(String args[]){
        String model;
        /*int year;*/
        String status;

        public String CreateNew () {
            Robot optimus;
            optimus = new Robot();
            optimus.model="Autobot"; 
            /*optimus.year="2008";*/
            optimus.status="active";
            return (optimus.model);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T15:42:18.663

您正在尝试在方法 ( `CreateNew`)*中*定义方法 ( `main`)，而这在 Java 中是无法做到的。将其移出`main`; 并且看起来是实例变量（不是方法变量），也移动它们`model`：`status`

```
public class Robot {
    // Member variables
    String model;
    /*int year;*/
    String status;

    // main method
    public static void main(String args[]){

        // Presumably more stuff here
    }

    // Further method    
    public String CreateNew () {
        Robot optimus;
        optimus = new Robot();
        optimus.model="Autobot"; 
        /*optimus.year="2008";*/
        optimus.status="active";
        return (optimus.model);
    }
} 
```

根据其内容，您可能希望`CreateNew`成为`static`（因此可以通过`Robot.CreateNew`而不是通过`Robot`实例调用它）。像这样：

```
public class Robot {
    // Member variables
    String model;
    /*int year;*/
    String status;

    // main method
    public static void main(String args[]){

        // Presumably more stuff here
    }

    // Further method    
    public static String CreateNew () {
    //     ^----------------------------- here's the change
        Robot optimus;
        optimus = new Robot();
        optimus.model="Autobot"; 
        /*optimus.year="2008";*/
        optimus.status="active";
        return (optimus.model);
    }
} 
```

用作

```
String theModel = Robot.CreateNew(); 
```

...虽然我不清楚为什么要创建一个`Robot`实例然后将其丢弃并返回`model`实例成员的值。

* * *

有点离题，但 Java 中压倒性的约定是方法名称（静态或实例）以小写字母开头，例如，`createNew`而不是`CreateNew`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T15:42:43.207

在创建 main 方法之前，您没有关闭`CreateNew()`它。事实上，我不认为你的意思是在你的 Robot 类中有一个 main 方法，你应该为你的整个程序只有一个 main 方法。你的 CreateNew 应该是一个*构造函数*：

```
public class Robot {
        String model;
        /*int year;*/
        String status;

        public Robot () {
            this.model="Autobot"; 
            this.status="active";
        }
    }
} 
```

然后在另一个包含您的 main 方法的类中（或者它也可以在同一个类中）：

```
public class OtherClass {
    public static void main(String[] args) {
        Robot optimus = new Robot(); // here you create an instance of your robot.
    }
} 
```

然后你可以有第二个构造函数，它接受参数模型和状态，如下所示：

```
public Robot (String m, Status s) {
        this.model=m; 
        this.status=s;
} 
```

最后在你的主要：

```
Robot prime = new Robot("aName", "aStatus"); 
```

# asp.net-mvc-3 - LiveVideo.js 不适用于 asp.net mvc3 但 html

> ID：10767598
> 
> 赞同：0
> 
> 时间：2012-05-26T15:41:14.417
> 
> 标签：asp.net-mvc-3, html, webgl, three.js, live-video

我有一个 html 页面，它显示画布和实时视频流作为 livevideo.js 和 three.js 文件的纹理输入。这个 html 页面可以正常工作，但不能在 cshtml 形式的 mvc-3 视图页面中。我只注意到以下这条消息作为警告：

WebGL：INVALID_OPERATION：generateMipmap：级别 0 不是 2 的幂或大小不同

为什么这在 iis 服务器的常规 html 页面中有效，但在 mvc3 视图页面中无效？我还没有任何错误。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:45:30.327

如果您检查对 html 和 mvc 应用程序发出的请求（例如，使用 fiddler），您将看到两个响应之间的差异。我想他们之间可能有不同的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T18:52:48.043

我对视频纹理也有同样的问题。您需要做的是避免在纹理不是默认启用的 2 的幂时使用 mipmap：

```
_tmpTex.generateMipmaps = false;
_tmpTex.minFilter = THREE.LinearFilter;
_tmpTex.magFilter = THREE.LinearFilter; 
```

# xcode - 在 iOS 中使用 pdf 在 CATiledLayer 或 CALayer 上绘图

> ID：10767599
> 
> 赞同：-1
> 
> 时间：2012-05-26T15:41:17.557
> 
> 标签：xcode, ios5, quartz-graphics, drawrect, quartz-core

我有一个滚动视图，其中包含一个用 CATiledLayer 呈现的 pdfpage，我想在 pdf 页面上绘制东西，所以我创建了一个覆盖层，我需要图形看起来矢量化，所以我决定使用 CATiledlayer 作为覆盖层。唯一的问题是绘制速度很慢（我正在使用 beizerpath 绘制），然后我尝试通过在放大和缩小时创建具有可见高度和宽度的覆盖层来优化它，所以我不需要为整个绑定的内容创建覆盖。但仍然没有运气，我想尝试 CALayer 但绘制路径变得模糊和像素化，所以我不确定如何改进这一点。我也尝试过drawinrect，但由于某种原因它似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:58:26.940

我建议不要使用 bezierpath 来绘制注释，因为它需要您在每次笔移动时重新绘制整个路径。如果您使用 CGContextAddQuadCurveToPoint 仅绘制当前线段会更好。

1.  在 touchMoved 处，获取当前点和 2 个 prev 点
2.  使用这些点，得到应该画线的区域
3.  使用 setNeedsDisplayAtRect 在 drawRect 中的该区域绘制
4.  在 drawRect 中，转到路径的末尾并使用 CGContextAddQuadCurveToPoint 添加新行

# c# - 什么是 ASP.NET 成员资格替代方案

> ID：10767607
> 
> 赞同：9
> 
> 时间：2012-05-26T15:42:17.100
> 
> 标签：c#, asp.net-mvc, asp.net-membership

在[这段视频](http://www.asp.net/mvc/videos/mvc-1/aspnet-mvc-storefront/aspnet-mvc-storefront-part-15-public-code-review)中，Ayende 批评了房东使用 asp.net 会员资格。如果 asp.net 会员资格不好用 - 是什么？在视频中，Ayende 没有提到您还可以使用什么，只是指出不应使用 asp.net 会员资格。你知道 asp.net 会员还有哪些其他好的选择吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T15:57:11.227

Ayende 有“强烈”的意见。:-) 我建议 ASP.NET 成员资格的适用性实际上取决于您要实现的目标。[这个问题](https://stackoverflow.com/questions/4255583/what-are-the-pros-and-cons-using-the-asp-net-membership)显示了一些优点和缺点以及在替代方案中工作的一些想法。关键是它非常可扩展，因此您可以根据需要尽可能多地使用它。

就我个人而言，我现在对[FluentSecurity](https://github.com/kristofferahl/FluentSecurity)很感兴趣，尽管它专门针对 MVC。

**编辑：** 关于这个的[另一个问题，](https://stackoverflow.com/questions/702625/alternatives-to-net-membership)[另一个](https://stackoverflow.com/questions/3561176/asp-net-membership-alternatives).

# iphone - OpenGL立方体旋转

> ID：10767622
> 
> 赞同：1
> 
> 时间：2012-05-26T15:43:14.063
> 
> 标签：iphone, ios, opengl-es, rotation

我使用 OpenGL 创建了一个立方体，但目前它可以自由旋转，所以它可以向任何方向旋转。

我如何对其进行编码，使其仅向上、向下、向左和向右旋转？

这是我的旋转代码：

```
 + (void)applyRotation:(GLfloat *)m x:(GLfloat)x y:(GLfloat)y z:(GLfloat)z {
    GLfloat tempMatrix[16];

    if(x != 0) {
    GLfloat c = cosf(x);
    GLfloat s = sinf(x);

    [self applyIdentity:tempMatrix];

    tempMatrix[5] = c;
    tempMatrix[6] = -s;
    tempMatrix[9] = s;
    tempMatrix[10] = c;

    [self multiplyMatrix:tempMatrix by:m giving:m];
    }

    if(y != 0) {
    GLfloat c = cosf(y);
    GLfloat s = sinf(y);

    [self applyIdentity:tempMatrix];

    tempMatrix[0] = c;
    tempMatrix[2] = s;
    tempMatrix[8] = -s;
    tempMatrix[10] = c;

    [self multiplyMatrix:tempMatrix by:m giving:m];
    }

    if(z != 0) {
    GLfloat c = cosf(z);
    GLfloat s = sinf(z);

    [self applyIdentity:tempMatrix];

    tempMatrix[0] = c;
    tempMatrix[1] = -s;
    tempMatrix[4] = s;
    tempMatrix[5] = c;

    [self multiplyMatrix:tempMatrix by:m giving:m];
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T06:01:14.527

“每次旋转只能围绕其中一个轴旋转 90*n 度”

在这种情况下，旋转矩阵几乎是微不足道的，仅由零、一和负一组成。

```
sin(90 * n) = 0, 1, 0, -1, 0, 1, 0, -1, ...
cos(90 * n) = 1, 0, -1, 0, 1, 0, -1, 0, ... 
```

绕 Oz 旋转（我们假设 a = 90 * n）：

```
| cos(a)  -sin(a)   0 |
| sin(a)   cos(a)   0 | 
|  0        0       1 | 
```

围绕牛旋转：

```
|   1      0      0    |
|   0    cos(a) sin(a)  |
|   0   -sin(a) cos(a)  | 
```

绕 Oy 旋转：

```
|  cos(a)   0   sin(a)  |
|   0       1     0    |
|  -sin(a)  0   cos(a)  | 
```

展开向量乘以这些矩阵，您将获得所需的旋转，且舍入误差最小。

如果您想要绝对精度，请存储原始 (x,y,z) 向量并为每个旋转三元组 (ax, ay, az) 计算 R 矩阵（由 1 和 0 组成），或者只记住这些矩阵表示偶数排列的基本向量，因此您可以仅使用交换来旋转 (x,y,z)。

还有一件事。如果您正在考虑从立方体的一侧到另一侧的平滑旋转，那么您必须寻找 SLerp 并使用一些动画计时器插入 Src-to-Dest 旋转。

# php - 将随机图像与随机引用配对，并为该对分配一个唯一的 url

> ID：10767624
> 
> 赞同：-2
> 
> 时间：2012-05-26T15:43:28.540
> 
> 标签：php, random

我想将一组图片与从其列表中随机抽取的引用列表配对，并为该对分配一个唯一的 url。就像[尼采家庭马戏团](http://www.losanjealous.com/nfc/)一样。

我很确定他正在使用 php 随机提取两个列表，并使用图片和引号创建唯一标识符。

有没有人可以帮助我开始复制这个概念？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:06:39.857

你总是可以使用数据库。如果您在数据库中创建一个表，其中一列用于标识该对的唯一 url，一列用于图像 url，一列用于引用文本，您可以执行以下操作：

```
$quoteArray = array(); //in reality this would be filled with your quotes
$imageArray = array(); //this would be filled with your image urls
$pairs = array();
while(count($quoteArray) > 0 && count($imageArray) > 0) {
    $quoteIndex = rand(0, count($quoteArray) - 1); //get some random indexes
    $imageIndex = rand(0, count($imageArray) - 1);
    $pairs[] = array('quote' => $quoteArray[$quoteIndex], 'image' => $imageArray[$imageIndex]);
    unset($quoteArray[$quoteIndex]); //keep us from using the same quote twice
    unset($imageArray[$imageIndex]); //same goes for the images
}

//this assumes your table has an autoincremeting id field
$stmt = $connection->prepare("INSERT INTO awesomeTable (quote, image) VALUES( :quote , :image )");
//$connection is a PDO which you would have created earlier...look in the php manual for information on setting this up

foreach($pairs as $pair) {
    $uniqueId = sha1($quote . $image);
    $stmt->execute(array(':quote' => $pair['quote'], ':image' => $pair['image']));
} 
```

然后，得到一个随机的网址：

```
$result = $connection->query("SELECT * FROM awesomeTable ORDER BY RAND() LIMIT 1");
$record = $result->fetch();
//record will contain either an object (accessed by $row->url, $row->quote, etc) or an
//associative array (accessed by $row['url'], $row['quote'], etc) depending on how you
//set up the PDO 
```

您的页面将提供这些服务（images.php）只需将一个 id 传递给它（这将是唯一的，因为它是自动递增的）并查询数据库以获取与该关联的行（以及因此报价和图像） ID。

# core-data - 如何将 /Document 目录中的文件备份到 iCloud？

> ID：10767630
> 
> 赞同：1
> 
> 时间：2012-05-26T15:44:45.710
> 
> 标签：core-data, backup, icloud

我使用 CoreData 来管理数据。我的应用程序创建图片、电影和音频。我将媒体文件直接保存到 /Document 目录。我在 coreData 中使用 url 来访问媒体文件。我可以将 sqlite 文件与 iCloud 同步，但如何将媒体文件同步到 iCloud？

# java - 一种廉价/快速的散列位图的方法？

> ID：10767631
> 
> 赞同：8
> 
> 时间：2012-05-26T15:44:49.533
> 
> 标签：java, android, caching

我有一个应用程序，它拍摄图片库（全部为 Jpeg）并给出每个可能对之间的相似度分数。在每个时间点，只能选择一对并显示其相似度得分。

比较两个图像的算法有一定的性能成本，例如比较一对需要几秒钟的时间。

选择两张图片时：

1.  如果这对从未进行过比较，则分数显示“尚未得分”。用户可以单击“Score”按钮，该对将被发送到一个线程，该线程将要计算的分数排队。示例：[http ://db.tt/gb1Yk6yx](http://db.tt/gb1Yk6yx)
2.  如果该对当前在要计算的队列中，则分数字段显示“正在计算...”。示例：[http ://db.tt/OvS1qGP3](http://db.tt/OvS1qGP3)
3.  如果已比较这对，则会显示附加到该对的分数。示例：[http ://db.tt/m2OQGybW](http://db.tt/m2OQGybW)

示例（进行批处理时）：[http ://db.tt/iD67SdCp](http://db.tt/iD67SdCp)

如果从未计算过分数，并且用户单击“分数”，该字段将切换到“正在计算...”，然后将在计算完成时显示分数。

在在分数字段中显示任何内容之前，选择两对时，将其附加的位图发送到hashmap，以验证这两个位图是否已经具有附件分数，在这种情况下，它只是将其返回。如果没有得分，则将作业发送到队列中。

要知道分数是否存在于缓存中，我需要找到一种方法来散列这对，以便我可以使用结果键来查找缓存。这就是我的问题所在。为了有意义，两个 Bitmap 的散列应该很快。否则，我只是添加另一层计算。但是，到目前为止，我对这两个位图进行散列的方法是将它们发送到一个字节数组中并获取它们的 MD5 校验和。像这样：

```
private Long getHashKey(Bitmap first, Bitmap second){

    // TODO this IS costly, it render useless the cache optimization.
    // also, it doesn't detect that comp(A,B) is the same as comp(B,A).
    // much work to do here.

    if(D) Profiling.start(TAG, "getHashKey");

    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    first.compress(Bitmap.CompressFormat.JPEG, 100, stream);

    byte[] firstArray = stream.toByteArray();
    second.compress(Bitmap.CompressFormat.JPEG, 100, stream);

    byte[] secondArray = stream.toByteArray();
    byte[] bitmapBuffer = new byte[firstArray.length + secondArray.length];

    System.arraycopy(firstArray, 0, bitmapBuffer, 0, firstArray.length);

    System.arraycopy(secondArray, 0, bitmapBuffer, 
            firstArray.length, secondArray.length);

    Adler32 md5Hash = new Adler32();
    md5Hash.update(bitmapBuffer);
    long hashKey = md5Hash.getValue();

    if(D) Profiling.stop();

    return hashKey;
} 
```

然而，根据我所做的分析，这种方法运行大约需要 53 毫秒，这会导致 UI 出现非常不愉快的延迟。在更详细的分析中，我发现大约 95% 的计算时间是在`compress`方法中完成的。但是，我还没有找到另一种方法来获取支持位图的字节。

```
05-26 17:56:13.220: D/Profiling(9458): Profile for ImageCompareActivity.getHashKey:
05-26 17:56:13.220: D/Profiling(9458): >          Count : 1996 calls
05-26 17:56:13.220: D/Profiling(9458): >  Total runtime : 105765140 us
05-26 17:56:13.220: D/Profiling(9458): >    Avg runtime : 52988 us 
```

我知道我散列位图的方法非常粗鲁。但我不太了解散列函数，以及我可以使用位图的哪些部分来唯一标识文件。我不想使用文件名或类似的东西，因为我想最终将这些位图发送到数据库中。

**[更新 1]** 我不知道 Object.hashCode()。现在，我修改了这样的方法：

```
private Integer getHashKey(Bitmap first, Bitmap second){

    if(D) Profiling.start(TAG, "getHashKey");

    Integer hashKey = new Integer(
            1013 * (first.hashCode()) ^ 1009 * (second.hashCode()) ); 

    if(D) Profiling.stop();

    return hashKey;
} 
```

平均运行时间约为 18 我们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:51:25.687

[这](https://softwareengineering.stackexchange.com/questions/49550/which-hashing-algorithm-is-best-for-uniqueness-and-speed/145633#145633)是最近关于散列的问题。Adler 可能是 JRE 内置的最快的方法。您是否考虑过预先计算哈希并将其与图像或数据库一起存储？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T15:13:04.427

使用android的sameAs怎么样？

# c# - C#中的sql插入命令

> ID：10767640
> 
> 赞同：0
> 
> 时间：2012-05-26T15:45:48.347
> 
> 标签：c#, sql, postgresql

我目前正在创建一个小型 C# 程序，它将文件中的数据插入到 postgres 表中。

插入的代码如下所示：

```
 NpgsqlCommand cmd = new NpgsqlCommand(@"INSERT INTO :table(text) VALUES (:word);", con);
 cmd.Parameters.AddWithValue("table", table);
 cmd.Parameters.AddWithValue("word", line);
 cmd.ExecuteNonQuery(); 
```

但是每次它尝试执行“ExecuteNonquery”行时，我都会收到以下错误：

```
An unhandled exception of type 'Npgsql.NpgsqlException' occurred in Npgsql.dll
Additional information: ERROR: 42601: syntax error at or near "(" 
```

我可以连接到我检查过的数据库。变量表和行在运行时也具有正确的值。我就是想不通是什么问题。。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T15:48:19.773

据我所知，表格不能是参数。

但是，您可以为此使用字符串连接/格式化：

```
string table = "table";
NpgsqlCommand cmd = new NpgsqlCommand(string.Format(@"INSERT INTO {0}(text) VALUES (:word);", table), con); 
```

猜猜这会起作用（没有测试它）。

# html - Bootstrap CSS - 无法同时获取背景颜色和图像

> ID：10767641
> 
> 赞同：1
> 
> 时间：2012-05-26T15:46:06.897
> 
> 标签：html, ruby-on-rails, css, twitter-bootstrap

我将 Bootstrap 与 Rails 一起使用，但无法同时显示背景颜色和图像。我有一个自定义 CSS 样式表，我正在尝试将正文编辑为深色背景，右下角有一个小图像，如下所示：

```
body {
    padding-top: 55px;
    background-color: #2e2e2e;
    background-attachment: fixed;
    background-image: url('waves.png');
    background-repeat: no-repeat;
    background-position: right bottom;
} 
```

问题是图像没有显示，只是背景。如果我删除“背景颜色”，它会显示出来并且看起来很完美，但我无法将它们放在一起。我知道我错过了一些小东西（可能也很愚蠢）。感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T23:17:10.547

尝试将`waves.png`文件放入`/assets/images`并替换`url('waves.png')`为：

```
background-image: image-url('waves.png'); 
```

我假设您正在使用资产管道并且您的 CSS 文件由 Sass 预处理（样式表文件名以*.css.scss 结尾*），有关更多信息，我建议您阅读[资产管道 Rails 指南](http://guides.rubyonrails.org/asset_pipeline.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T15:50:47.770

你试过这种方法吗？

```
body {    
    padding-top: 55px;
    background: #2e2e2e url(waves.png) right bottom no-repeat;
    background-attachment: fixed;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T00:32:26.730

确保文件扩展名是 .css.erb

```
body {
    padding-top: 55px;
    background: #2e2e2e url('<%= asset_path('waves.png') %>') fixed no-repeat right bottom;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T00:40:58.957

不确定您所处的环境，但您尝试过**!important**吗？如果稍后在代码中的某个地方应用了具有不同值的样式，它会增加优先级。

```
body {
  ...
  background-color: #2e2e2e !important;
  background-image: url('waves.png') !important;
  ...
} 
```

# grid - Extjs4，重新加载网格后选择网格行

> ID：10767648
> 
> 赞同：1
> 
> 时间：2012-05-26T15:46:52.873
> 
> 标签：grid, extjs4

我想在重新加载我的网格后选择一个特定的行。并且每个过程中的特定行都会有所不同。所以在重新加载网格后，我想一次选择行。稍后选择行没有影响。

我试过这样

```
//i is row index No. and i value is vary.
this.getMyGrid().fireEvent('itemclick',this.getMyGrid().getView(),this.getMyGrid().store.getAt(i)); // this reload grid
this.getMyGrid().getSelectionModel().select(i);// select row 
```

但**代码问题是在完成加载网格之前选择行。**

网格加载完成后如何运行选择代码？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:04:44.547

网格的选择模型有一个方法[**getLastSelected**](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.selection.Model-method-getLastSelected)，您可以在网格存储的`load`事件处理程序中使用类似的东西：

```
var myGrid = this.getMyGrid(),
    selModel = myGrid.getSelectionModel();

selModel.select(selModel.getLastSelected()); 
```

# ruby-on-rails - ruby on rails：添加一个显示多对多关系的页面

> ID：10767651
> 
> 赞同：-1
> 
> 时间：2012-05-26T15:47:09.173
> 
> 标签：ruby-on-rails, routes

我有 3 张表：一张包含疾病，一张包含症状，一张是多对多的 disease_symptom 表。我想从我的疾病页面添加一个超链接，它将引导用户到一个包含这种特定疾病症状的新页面（按字母顺序排序）。

我是 ROR 的新手，所以我真的不知道在项目树中将这个新页面放在哪里以及如何向它添加路由。

我添加了一个名为“Pages”的目录，在该目录下放置了我的新文件“symptomsForIllness.html.erb”。另外我在疾病/显示html中添加了一个超链接：

```
<%= link_to 'Symptoms',symptomsForIllness_path(@illness) %> 
```

我还尝试将以下路由添加到 routes.rb：

```
match '/symptomsForIllness_path' => 'Pages#symptomsForIllness' 
```

我收到以下错误：

ActionView::Template::Error (未定义的方法`symptomsForIllness_path' for #<#<Class:0x3f1fbc0>:0x32d0060>): 10: <%= link_to 'Back', illnesses_path %> 11: <br /> 12: <%= link_to 'symptoms',symptomsForIllness_path(@illness) %> app/views/illnesses/show.html.erb:13:in`_app_views_illnesses_show_html_erb___154118681_26683248' app/controllers/illnesses_controller.rb:19:in `show'

您能否告诉我在目录树中放置此类文件的位置（代表多对多关系的文件）以及如何避免此错误？

谢谢，李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T17:26:13.007

```
#in routes.rb
resources :symptoms :only => [:index] do
  get 'illnesses', :on => :member
end

resources :illnesses :only => [:index] do
  get 'symptoms', :on => :member
end 
```

在视图中 path_helpers

```
illnesses_symptom_path(@symptom) #symptoms controller, illnesses action

symptoms_illness_path(@symptom) #illnesses controller, symptoms action 
```

# oracle - oracle 11.g 中的 OOP 概念

> ID：10767672
> 
> 赞同：1
> 
> 时间：2012-05-26T15:49:34.393
> 
> 标签：oracle, oop, oracle11g

我有一个与oracle数据库（11.g）中的面向对象编程有关的问题，一般我已经研究过如何创建对象类型或如何从现有对象创建表，但我停在一个主题上，即假设我们有创建以下类型

```
create or replace type mono.Item_type as object(
item_id     integer,
part       REF  mono.Part_type,
quantity    integer); 
```

其中 Part_type 是已经存在的对象类型。我知道我可以像这样从这个对象创建表：

创建Item_type的表表名，例如

```
create table item_list of  Item_type 
```

有什么不同，如果不是这个，我们使用

```
create or replace type mono.Item_List as table of Item_type; 
```

尽管如此，我们使用 type 关键字，我们再次创建表，和之间有什么 `create table tablename of Item_type`不同

```
create or replace type mono.Item_List as table of Item_type;? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:42:47.050

当您使用 时`create table tablename of Item_type`，您将在数据库中创建一个表。
该表是一种可用于存储用户数据的结构。

当您使用时，`create or replace type mono.Item_List as table`您正在定义一个新的**数据类型**（类似于数组）。
此 Datatype 可用作 DB 表中的列类型或 plsql 代码中的变量类型。

# c# - 在 C# 中尽可能快地在大列表中进行按位运算

> ID：10767673
> 
> 赞同：3
> 
> 时间：2012-05-26T15:49:37.563
> 
> 标签：c#, performance

我有一个来自 10,000 个长值的列表，我想将该数据与 100,000 个其他长值进行比较比较是按位操作 -->

```
if (a&b==a) count++; 
```

我可以使用哪种算法来获得最佳性能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T15:59:10.573

如果我正确理解您的问题，您想检查`a`每个`b`谓词是否为真。因此，您的问题的一个天真的解决方案如下：

```
var result = aList.Sum(a => bList.Count(b => (a & b) == a)); 
```

我不确定这是否真的可以针对任意谓词加速，因为您无法绕过`a`每个`b`. 您可以尝试并行运行查询：

```
var result = aList.AsParallel().Sum(a => bList.Count(b => (a & b) == a)); 
```

*例子：*

`aList`：10,000 个随机`long`值；`bList`：100,000 个随机`long`值。

*   没有`AsParallel`：00:00:13.3945187

*   与`AsParallel`：00:00:03.8190386

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T16:04:23.990

把你所有的`a`s放到一个trie数据结构中，树的第一层对应数字的第一位，第二层对应第二位，以此类推。然后，对于每个`b`，走下特里；如果该位为 1 in `b`，则计算两个分支，或者如果该位为 0 in `b`，则仅计算 trie 的 0 分支。我认为这应该是 O(n+m)，但我并没有认真考虑过。

`a`通过对s 的列表进行排序并以与 trie 大致相同的方式使用排序列表，您可能可以获得相同的语义但具有更好的缓存特性。就操作数量而言，这会稍差一些——因为你必须经常搜索东西——但对 CPU 缓存的尊重可能足以弥补它。

注意，我对正确性的考虑并不比我对大 O 表示法的考虑要困难得多，也就是说可能还不够。

# sql - 当前在 SQL Server 中运行的查询

> ID：10767676
> 
> 赞同：19
> 
> 时间：2012-05-26T15:50:01.687
> 
> 标签：sql, sql-server, sql-server-2008

是否有程序或 sql 查询可以找到在 SQL Server 2012 上运行的 SQL 查询？我认为早期版本的 SQL Server 中有一个工具可以显示实际查询内容或存储过程名称？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-26T15:54:12.243

根据您的权限，此查询可能会起作用：

```
SELECT sqltext.TEXT,
req.session_id,
req.status,
req.command,
req.cpu_time,
req.total_elapsed_time
FROM sys.dm_exec_requests req
CROSS APPLY sys.dm_exec_sql_text(sql_handle) AS sqltext 
```

参考：http: [//blog.sqlauthority.com/2009/01/07/sql-server-find-currently-running-query-t-sql](http://blog.sqlauthority.com/2009/01/07/sql-server-find-currently-running-query-t-sql)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-04-01T21:03:42.400

我使用以下查询

```
SELECT   SPID       = er.session_id
    ,STATUS         = ses.STATUS
    ,[Login]        = ses.login_name
    ,Host           = ses.host_name
    ,BlkBy          = er.blocking_session_id
    ,DBName         = DB_Name(er.database_id)
    ,CommandType    = er.command
    ,ObjectName     = OBJECT_NAME(st.objectid)
    ,CPUTime        = er.cpu_time
    ,StartTime      = er.start_time
    ,TimeElapsed    = CAST(GETDATE() - er.start_time AS TIME)
    ,SQLStatement   = st.text
FROM    sys.dm_exec_requests er
    OUTER APPLY sys.dm_exec_sql_text(er.sql_handle) st
    LEFT JOIN sys.dm_exec_sessions ses
    ON ses.session_id = er.session_id
LEFT JOIN sys.dm_exec_connections con
    ON con.session_id = ses.session_id
WHERE   st.text IS NOT NULL 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-08-21T16:28:27.680

有这个，来自 SQL Server DMV 的 In Action 书中：

输出显示 spid（进程标识符）、ecid（这类似于同一 spid 中的线程，有助于识别并行运行的查询）、运行 SQL 的用户、状态（SQL 是正在运行还是等待)、等待状态（为什么等待）、主机名、域名和开始时间（用于确定批处理运行了多长时间）。

好的部分是查询和父查询。例如，这显示了作为父进程的存储过程以及正在运行的存储过程中的查询。这对我来说非常方便。我希望这对其他人有帮助。

```
USE master
GO
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED
SELECT
er.session_Id AS [Spid]
, sp.ecid
, er.start_time
, DATEDIFF(SS,er.start_time,GETDATE()) as [Age Seconds]
, sp.nt_username
, er.status
, er.wait_type
, SUBSTRING (qt.text, (er.statement_start_offset/2) + 1,
((CASE WHEN er.statement_end_offset = -1
THEN LEN(CONVERT(NVARCHAR(MAX), qt.text)) * 2
ELSE er.statement_end_offset
END - er.statement_start_offset)/2) + 1) AS [Individual Query]
, qt.text AS [Parent Query]
, sp.program_name
, sp.Hostname
, sp.nt_domain

FROM sys.dm_exec_requests er
INNER JOIN sys.sysprocesses sp ON er.session_id = sp.spid
CROSS APPLY sys.dm_exec_sql_text(er.sql_handle)as qt
WHERE session_Id > 50
AND session_Id NOT IN (@@SPID)
ORDER BY session_Id, ecid 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-26T17:00:45.410

这是安装 SQL 分析器[http://msdn.microsoft.com/en-us/library/bb500441.aspx](http://msdn.microsoft.com/en-us/library/bb500441.aspx)所需的内容。但是，我建议您通读此[http://blog.sqlauthority.com/2009/08/03/sql-server-introduction-to-sql-server-2008-profiler-2/](http://blog.sqlauthority.com/2009/08/03/sql-server-introduction-to-sql-server-2008-profiler-2/) 如果您正在寻找在您的生产环境中执行此操作。还有另一种更好的方法来查看查询看这个，看看它是否有帮助 [http://www.youtube.com/watch?v=vvziPI5OQyE](http://www.youtube.com/watch?v=vvziPI5OQyE)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-26T15:52:31.617

该工具称为 SQL Server Profiler，它仍然是标准工具集的一部分。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-26T15:53:37.203

您正在谈论[SQL Profiler](http://msdn.microsoft.com/en-us/library/ms181091.aspx)。

# objective-c - Xcode：只有在我使用断点时才会创建表格视图单元格。为什么？

> ID：10767677
> 
> 赞同：1
> 
> 时间：2012-05-26T15:50:41.793
> 
> 标签：objective-c, xcode, cocoa, touch, breakpoints

当我在“if (coordinator!= nil){”行上放置一个断点时，从核心数据创建的表视图可以正常工作。

如果我在代码中删除或放置断点之前的任何位置，它不会显示表格视图单元格。

```
- (NSManagedObjectContext *) sharedManagedObjectContext {
if (_managedObjectContext != nil) {
    return _managedObjectContext;
}

NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
if (coordinator != nil) {
    _managedObjectContext = [[NSManagedObjectContext alloc] init];
    [_managedObjectContext setPersistentStoreCoordinator: coordinator];
    [_managedObjectContext setMergePolicy:NSMergeByPropertyStoreTrumpMergePolicy]; 
```

}

```
return _managedObjectContext; 
```

}

我不知道这是如何发生的，并且几乎没有运气找到与此类似的任何其他情况。

提前谢谢你的帮助！

编辑1：

这是用于从 coredata 获取数据的代码

```
- (BOOL) setupFetchedResultsController:(NSError **) error {

self.managedObjectContext = [[PhotoBreezePersistentStoreManager shared] sharedManagedObjectContext];

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

[fetchRequest setEntity:[NSEntityDescription entityForName:@"GeoTrack" inManagedObjectContext:self.managedObjectContext]];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"trackName" ascending:NO]; 

NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
[fetchRequest setSortDescriptors:sortDescriptors];

NSFetchedResultsController *controller = [[NSFetchedResultsController alloc]
                                          initWithFetchRequest:fetchRequest
                                          managedObjectContext:self.managedObjectContext
                                          sectionNameKeyPath:nil
                                          cacheName:nil];

controller.delegate = self;

self.fetchedResultsController = controller;

return [controller performFetch:error]; 
```

}

如果我在上述任何代码中放置断点...

之后：“self.managedObjectContext = [[PhotoBreezePersistentStoreManager shared] sharedManagedObjectContext];”

...它仍然可以工作。

我对objective-c/cocoa 很陌生，所以我不确定是否涉及队列或线程。不过我会调查你提到的谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:52:53.207

没有足够的信息来真正说；您需要发布与表视图的创建/填充相关的详细信息。

然而，这听起来确实像是一个经典的比赛条件。涉及任何线程或队列？

# matlab - 如何在 Matlab 中编写以下函数进行 MS 蛋白质分析？

> ID：10767684
> 
> 赞同：-8
> 
> 时间：2012-05-26T15:51:21.933
> 
> 标签：matlab, bioinformatics, protein-database

我需要你的帮助。我有超过 40000 种 fasta 文件格式的蛋白质。

首先我想写一个函数：

*   能够计算 b 和 y 离子的质量
*   从目标蛋白创建肽数据库（mat-file）
*   创建来自诱饵蛋白的肽数据库（mat-file）

然后，我想：

*   加载观察到的数据
*   在给定 ppm 精度的情况下过滤肽数据库中的候选肽
*   编写一个函数，根据观察到的数据对候选肽进行评分
*   提出一个阈值方案来区分真正的肽谱匹配和虚假的匹配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:54:05.947

首先，FASTA 是文本文件格式。要编写文本文件`fopen`，请查看`fprintf`和的 MATLAB 文档`fclose`。要从您编写的数据文件中加载文本，您可以使用`fopen`,`fscanf`和`fclose`. 实际上，MATLAB`fastainfo`也`fastaread`有`fastawrite`。您应该查看这些命令以及其他可能对您有用的 FASTA 相关和蛋白质分析相关命令的 MATLAB 文档（我没有做过蛋白质分析，所以我不能说您需要哪些）。

此外，您在一个问题中问了很多事情，以至于不可能全部回答，因为您的问题恕我直言，有点像“我如何编写整个程序？”。但是我认为您可以开始使用我列出的命令，并且当您编写了一些代码并尝试解决了明确定义的问题时，您可以发布一个关于它的新问题，并附上相关的部分代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T21:42:26.620

MATLAB 的生物信息学工具箱包含构建块例程，您可以将这些例程放在一起来实现此目的。如果您在将它们放在一起时遇到特定问题，请发布特定问题。

# ruby-on-rails - Rails 助手 - 标签之间的换行符

> ID：10767685
> 
> 赞同：0
> 
> 时间：2012-05-26T15:51:22.777
> 
> 标签：ruby-on-rails, tags, view-helpers, line-breaks

助手中的这段代码：

```
def dgtags
    if params[:controller]=='my_controller'
      javascript_include_tag('dygraph-combined.js') <<
          tag(:meta, :http_equiv => 'X-UA-Compatible', :content => 'IE=EmulateIE7; IE=EmulateIE9') <<
          '<!--[if IE]>'.html_safe <<
          javascript_include_tag('excanvas.compiled.js') <<
          '<![endif]-->'.html_safe
    end
end 
```

产生以下输出：

```
<script src="/javascripts/dygraph-combined.js?1338036501" type="text/javascript"></script><meta content="IE=EmulateIE7; IE=EmulateIE9" http_equiv="X-UA-Compatible" /><!--[if IE]><script src="/javascripts/excanvas.compiled.js?1237712986" type="text/javascript"></script><![endif]--> 
```

如何在标签之间插入换行符？像这样：

```
<script src="/javascripts/dygraph-combined.js?1338036501" type="text/javascript"></script>
<meta content="IE=EmulateIE7; IE=EmulateIE9" http_equiv="X-UA-Compatible" />
<!--[if IE]><script src="/javascripts/excanvas.compiled.js?1237712986" type="text/javascript"></script><![endif]--> 
```

'\n' 或 '\n'.html_safe 无济于事 - 它按字面意思生成 \n。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:00:55.533

你必须使用*双引号* **`"`**

`"\n"`不使用`'\n'`

您可以在此处获取更多详细信息：[http ://en.wikibooks.org/wiki/Ruby_Programming/Strings](http://en.wikibooks.org/wiki/Ruby_Programming/Strings)

我已经稍微改变了你的代码。**更好**的方法是使用`"\n"`. 您也可以使用`controller_name`而不是`params[:controller]`.

```
def dgtags
    if controller_name == 'my_controller'
      [ javascript_include_tag('dygraph-combined.js'),
        tag(:meta, :http_equiv => 'X-UA-Compatible', :content => 'IE=EmulateIE7; IE=EmulateIE9'),
        '<!--[if IE]>',
        javascript_include_tag('excanvas.compiled.js'),
        '<![endif]-->'].join("\n").html_safe
    end
end 
```

# c# - 将列表转移到另一个类会引发不一致的可访问性错误

> ID：10767688
> 
> 赞同：0
> 
> 时间：2012-05-26T15:51:27.020
> 
> 标签：c#, list

所以我创建了一个名为的自定义类的列表`FinalPixel`，我想将列表从一种形式转移到另一种形式，所以我已经`List<FinalPixel>`为我的第二个形式放入了构造函数，如下所示：

```
public FinalForm(List<FinalPixel> FinalPixels)
{
    InitializeComponent();
    this.FinalPixels = FinalPixels;
} 
```

然后我创建了第二种形式：

```
FinalForm fF = new FinalForm(FinalPixels);
fF.ShowDialog(); 
```

但是它会引发此构建时错误：

> 错误 1 ​​可访问性不一致：参数类型 'System.Collections.Generic.List' 比方法 'Pie_X.FinalForm.FinalForm(System.Collections.Generic.List)' D:\Users\Arch\Games\C# Games\Pie 更难访问X\Pie X\FinalForm.cs

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:55:10.210

好像`Pie_X.FinalPixel`不是公开的。

制作`Pie_X.FinalPixel` `public`或制作`public FinalForm(List<FinalPixel> FinalPixels)` `internal`。

# java - android中的Json和ListView崩溃

> ID：10767690
> 
> 赞同：1
> 
> 时间：2012-05-26T15:51:32.553
> 
> 标签：java, android

我正在尝试将 json 数组加载到 ViewList 中，但由于操作出错，我无法加载应用程序，

JSONParser.java

```
package app.tabsample;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;

public class JSONParser extends ListActivity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.contactspage);

        setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, this.personallist()));
    }

    public ArrayList<String> personallist() {

        ArrayList<String> listItems = new ArrayList<String>();

        try {

            URL jsonurl = new URL("http://izra.co.il/z.php");

            URLConnection transport = jsonurl.openConnection();

            BufferedReader in = new BufferedReader(new InputStreamReader(
                    transport.getInputStream()));

            String line;

            while ((line = in.readLine()) != null) {
                JSONObject obj = new JSONObject(line);
                JSONArray ja = obj.getJSONArray("users");
                for (int i = 0; i < ja.length(); i++) {
                    JSONObject jo = (JSONObject) ja.get(i);
                    listItems.add(jo.getString("name"));
                    Log.v("got name",jo.getString("name"));
                }
            }
        } catch (MalformedURLException e) {
            e.printStackTrace();// Catch URL Error
        } catch (IOException e) {
            e.printStackTrace();// Catch IO Exception Error
        } catch (JSONException e) {
            e.printStackTrace(); // Catch JSON Exception Error
        }
        return listItems;
    }
} 
```

联系页面.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        />

</LinearLayout> 
```

一些它是如何停留在这些行中的：

```
 URLConnection transport = jsonurl.openConnection();

        BufferedReader in = new BufferedReader(new InputStreamReader(
                transport.getInputStream())); 
```

错误：

```
05-26 15:39:08.902: E/AndroidRuntime(2931): java.lang.RuntimeException: Unable to start activity ComponentInfo{app.tabsample/app.tabsample.JSONParser}: android.os.NetworkOnMainThreadException 
```

希望有人能帮助我，我被打了......

多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:56:22.757

当应用程序尝试在其主线程上执行网络操作时抛出[NetworkOnMainThreadException 。](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

因此您可以在 Activity 中使用[runonuithread](http://developer.android.com/reference/android/app/Activity.html)、[handler](http://developer.android.com/reference/android/os/Handler.html)、[handlerthread](http://developer.android.com/reference/android/os/HandlerThread.html)或[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)从服务器下载 json。

# django - 我应该如何在芹菜中实现任务集的回调

> ID：10767691
> 
> 赞同：6
> 
> 时间：2012-05-26T15:51:42.107
> 
> 标签：django, celery, djcelery

# 问题

我使用 celery 启动如下所示的任务集：

1.  我执行了一批可以并行运行的任务，这批任务的数量从几十到几千不等。
2.  我将这些任务的结果汇总到一个答案中，然后对这个答案做一些事情——比如存储到数据库、保存到特殊的结果文件等等。基本上在任务完成执行后，我必须调用具有以下签名的函数：

    ```
    def callback(result_file_name, task_result_list): 
        #store in file

    def callback(entity_key, task_result_list):
        #store in db 
    ```

现在第 1 步在 Celery 队列中完成，第 2 步在 celery 外部完成：

```
 tasks = []

    # add taksks to tasks list 

    task_group = group()
    task_group.tasks = tasks

    result = task_group.apply_async()

    res = result.join()

    # Aggregate results 

    # Save results to file, database whatever 
```

这种方法很麻烦，因为我必须停止单个线程，直到所有任务都执行完毕（这可能需要几个小时）。

我也想以某种方式将第 2 步移到 celery --- 基本上我需要向整个任务集添加一个回调（据我所知，Celery 不支持它）或提交一个在所有这些子任务之后执行的任务。

有谁知道该怎么做？我在 django 环境中使用它，所以我可以在数据库中存储一些状态。

# 总结一下我最近的发现

## 和弦不行

我不能直接使用和弦，因为和弦使我能够创建这样的回调：

```
 def callback(task_result_list): 
        #store in file 
```

没有明显的方法可以将附加参数传递给回调（特别是因为这些回调不能是本地函数）。

## 使用数据库

我可以使用存储结果，`TaskSetMeta`但该实体没有状态字段 --- 所以即使我向 TaskSetMeta 添加一个信号，我也必须汇集可能具有显着开销的任务结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:41:46.217

好吧，答案真的很简单，我确实可以使用和弦 --- 并且必须将其他参数（如报告文件名等）作为 kwargs 传递。

这是和弦任务：

```
@task
def print_and_sum(to_sum, file_name):
    print file_name
    print sum(to_sum)
    return file_name, sum(to_sum) 
```

下面是实例化它的方法：

```
subtasks = [...]
result = chord(subtasks)(print_and_sum.subtask(kwargs={'file_name' : 'report_file.csv'})) 
```

# android - 获取 EditText 字段的值

> ID：10767693
> 
> 赞同：0
> 
> 时间：2012-05-26T15:52:07.817
> 
> 标签：android, gettext, tostring, textedit

我是一个 android 新手，作为测试，我想制作一个在 EditText 中插入文本并显示它的程序。当 EditText 中没有值时，我希望我的程序显示一个对话框，指出“请先插入评论”。但

```
comments.getText().toString()==null 
```

会产生错误。这是我的代码：

```
package android.insertcomments;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.*;

public class InsertCommentsActivity extends Activity {
/** Called when the activity is first created. */

public Button insertcom;
public Button displaycom;
public EditText comments;
public Button savecom;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setTitle("Insert Comments App");
    setContentView(R.layout.home);

    insertcom  = (Button) findViewById(R.id.insertcom);
    displaycom = (Button) findViewById(R.id.displaycom);

    insertcom.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
        //  Perform action on click
            addListenerOnButton();
        }

    });

   displaycom.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
        // Perform action on click
            if (comments.getText().toString()==null)
                  noCommentsErrormessage();

            else
                  // Display comments       
        }

    });

}

public void addListenerOnButton() {

    setContentView(R.layout.comments_adder);

    savecom    = (Button) findViewById(R.id.savecom);
    savecom.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            comments   = (EditText) findViewById(R.id.commentsEditText);

            Toast.makeText(InsertCommentsActivity.this, comments.getText().toString(),
                    Toast.LENGTH_SHORT).show();

        }

    });

}

public void noCommentsErrormessage() {
//  TODO Auto-generated method stub
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Error!")
            .setMessage("Please insert comments first")
            .setCancelable(false)
            .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                     dialog.cancel();
                }
            });

     AlertDialog alert = builder.create();
     alert.show();
}
} 
```

我的代码应该如下工作： 1\. 当您单击“插入评论”按钮时，会出现一个 TextEdit 字段，您可以输入您的评论 2\. 当您单击“显示评论”按钮时，程序会检查是否有一些值存储在 EditText 字段中 - 如果不是，它会显示一个对话框，说“请先插入评论” - 如果是，它会显示 TextEdit 字段的内容。

任何帮助将不胜感激。提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:53:11.617

```
 comments   = (EditText) findViewById(R.id.commentsEditText); 
```

必须在 oncreate 方法中，并且在一个按钮的 clicke 事件中，您正在使用另一个按钮事件，所以它会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:37:05.667

所以你想在按下插入评论时显示 EditText 。执行如下操作：正如 Agrwal 所说，在 oncreate 中初始化**注释**并立即通过以下代码使其不可见（4）/消失（8）：

```
 comments = (EditText) findViewById(R.id.commentsEditText); 
    comments.setVisibility(8);//to make it invisible
    comments.setEnabled(false);//to disable it 
```

现在在**insertcom的****onclick()**方法中，通过以下方式使 EditText 可见/启用：

 **```
comments.setVisibility(0);//to make it visible
comments.setEnabled(true);//to enaable it 
```**

# wpf - 用于类库的 WPF 客户端：如何向 UI 通知错误？

> ID：10767694
> 
> 赞同：0
> 
> 时间：2012-05-26T15:52:25.507
> 
> 标签：wpf, mvvm, notifications

我是 WPF 新手，我正在开发一个包含以下组件的项目：WCF 服务器类库、WCF 客户端类库、WPF 客户端 UI 和 WPF 服务器 UI。

我在 WCF 客户端中有一个方法，可以将用户添加到客户端的集合中，然后在服务器中注册该用户。该方法检查用户是否在本地不存在，然后在服务器上注册，如果用户已经存在，则会引发 FaultException。

我如何通知客户操作不成功并且他必须选择其他名称？抛出异常？在 ViewModel 中添加代码以在调用 add 方法之前检查用户是否存在？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:47:04.857

有几种方法。花点时间学习 ValidationRules。这应该对此有所帮助。

[如何在 WPF 中的 TextBox ValidationErrors 上禁用按钮](http://www.wpfsharp.com/2012/02/03/how-to-disable-a-button-on-textbox-validationerrors-in-wpf/)

但是，您可以在没有 ValidationRule 的情况下做同样的事情。只是有一些错误文本将可见性绑定到 ViewModel 中的布尔值。当然，如果用户已经存在，错误文本只会是 Visibile。

看过这两个选项后，您应该知道哪个选项最适合您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:01:47.203

恕我直言，最好的选择是从服务器上的 ViewModel 检查用户是否已经存在，如果存在，则在 UI 上显示一条消息。

异常必须用于意外情况，而事实并非如此。

# javascript - 将用户反馈弹出窗口放在图像顶部

> ID：10767700
> 
> 赞同：0
> 
> 时间：2012-05-26T15:53:06.893
> 
> 标签：javascript, jquery, html, database

我正在尝试做的是允许用户在图像顶部留下反馈，类似于 Flickr 或 Facebook 所做的（您可以在图像上看到小方块，将鼠标悬停在它们上方，然后显示评论/标签）。当其他用户看到图像时，他们会看到其他用户创建的小方块，当他们将鼠标悬停在这些小方块上时，他们会看到一个工具提示，显示的不是评论，而是从创建者自己的个人资料项目（从数据库中提取）中提取的信息。

我想使用一些 jQuery 工具提示作为该信息的显示，但我只是不确定如何允许用户将该信息放在图像之上。

# javascript - Javascript，CSS：通过样式属性获取元素

> ID：10767701
> 
> 赞同：16
> 
> 时间：2012-05-26T15:53:10.867
> 
> 标签：javascript, css

我想：

1.  查找页面中所有元素的样式属性（例如：所有具有 的元素`color:#333;`）
2.  为所有这些更改此属性（例如从`color:#333`到`color:#444`）。

您对此有什么建议吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-26T15:55:43.353

我的建议是尽可能避免这样做。相反，使用一个类来分配颜色值，然后您可以使用该类而不是颜色值来查找元素。

据我所知，没有可用于查询*特定*样式值的选择器（甚至在 CSS3 中也没有），这意味着循环遍历所有元素（或者看起来您可以将其限制为具有`style`属性的所有元素）并查看`element.style.color`物业。现在，问题是，即使您`color: #333;`在`style`属性中写入，不同的浏览器也会以不同的方式将其回显给您。可能是`#333`，可能是`#333333`，可能是`rgb(51, 51, 51)`，甚至可能是`rgba(51, 51, 51, 0)`。

所以总的来说，确实是一个非常尴尬的练习。

* * *

既然您已经说过这是针对 Chrome 扩展程序的，您可能不必担心多种格式，尽管我会加入我们在野外看到的格式，以防 Chrome 更改格式（也许与其他一些浏览器保持一致，这已经知道会发生）。

但例如：

```
(function() {

  // Get all elements that have a style attribute
  var elms = document.querySelectorAll("*[style]");

  // Loop through them
  Array.prototype.forEach.call(elms, function(elm) {
    // Get the color value
    var clr = elm.style.color || "";

    // Remove all whitespace, make it all lower case
    clr = clr.replace(/\s/g, "").toLowerCase();

    // Switch on the possible values we know of
    switch (clr) {
      case "#333":
      case "#333333":
      case "rgb(51,51,51)": // <=== This is the one Chrome seems to use
      case "rgba(51,51,51,0)":
        elm.style.color = "#444";
        break;
    }
  });
})(); 
```

[为清楚起见使用红色的实时示例](http://jsbin.com/usasal)| [来源](http://jsbin.com/usasal/edit)- 请注意，该示例依赖于[ES5](http://ecma-international.org/ecma-262/5.1)功能和`querySelectorAll`，但由于这是 Chrome，我知道它们在那里。

请注意，以上假设为内联样式，因为您谈到了`style`属性。如果您的意思是*计算*样式，那么除了循环调用页面上的**所有**`getComputedStyle`元素之外别无他法。除此之外，以上适用。

最后说明：如果您真的是指具有精确值`color: #333`而不是值`color:#333`或`color:#333333;`或`color: #333; font-weight: bold`或任何其他字符串的样式属性，您`querySelectorAll`可以处理：`querySelectorAll('*[style="color: #333"]')`. 但它会*非常*脆弱。

* * *

从您下面的评论中，听起来您必须遍历*每个*元素。如果是这样，我根本不会使用`querySelectorAll`，我会使用递归下降：

```
function walk(elm) {
    var node;

    // ...handle this element's `style` or `getComputedStyle`...

    // Handle child elements
    for (node = elm.firstChild; node; node = node.nextSibling) {
        if (node.nodeType === 1) { // 1 == Element
            walk(node);
        }
    }
}

// Kick it off starting with the `body` element
walk(document.body); 
```

这样你就不会建造大型的、不必要的临时结构。这可能是遍历文档的整个 DOM 的最有效方式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-26T16:00:30.303

如果您使用jquery，它肯定会更简单。无论如何，最好的办法是使用类并使用[过滤器 jquery 方法](http://api.jquery.com/filter/)来获取您想要的对象。

但是，如果您真的想获得它们，可以执行以下操作：

```
$(function () {
    $('p').filter(function () {
        return $(this).css('color') == '#333';
    }).css('color', '#444');
}); 
```

上面的脚本获取具有所需 css 属性的元素并设置一个新的 css 属性（颜色 #444）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T15:56:27.577

如果您不向要跟踪的所有这些元素添加至少一个特定的 CSS 类，则不能。

或者更好的是，您可以通过在 DOM 的所有元素上循环直到找到您要查找的内容来获得非常差的性能。**但是请不要考虑这样做**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T16:03:19.150

正如已经说过的那样，按颜色查询所有元素真的很难/效率低下。

```
// refrence: http://stackoverflow.com/questions/5999209/jquery-how-to-get-the-background-color-code-of-an-element
var arr = [];

$('*').each(function (i, ele) {
   // is red => save
   if($(ele).css('backgroundColor') == ('rgb(0, 0, 255)')) arr.push(ele);
});

console.log(arr); 
```

这是一个 JSFiddle 示例：http: [//jsfiddle.net/ddAg7/](http://jsfiddle.net/ddAg7/)

我的建议是：**不要这样做！**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T16:11:49.227

就像是

```
$('选择器').each(function() {
    if($(this).attr('style').indexOf('font-weight') > -1) {
        alert('得到了我的属性');
    }
});

```

在 if 语句中，您可以用不同的 css 替换它...不确定.. 尚未在所有浏览器上尝试过:)

# c# - 使用正则表达式引擎匹配整数数组

> ID：10767703
> 
> 赞同：1
> 
> 时间：2012-05-26T15:53:20.060
> 
> 标签：c#, .net, regex

是否可以使用 .NET 中的正则表达式引擎匹配**整数数组。**例如：

```
var a = new short[] { 1, 2, 3, 4, 5, 6 };
var r = new NumericRegex("^/1/2.{2}(/5|/10)/6$");
var match = r.Match(a); 
```

从概念上讲，整数和字符之间没有区别，但是如何实现呢？

**升级版：**

一种可能的解决方案是将整数转换为 unicode 字符。但是如何排除正则表达式特殊字符或对其进行编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T10:26:55.723

如果我们谈论**shorts**，对先前答案的修改似乎可以正常工作：

```
var a = new short[] { 1, 2, 3, 4, 5, 33, 32, 43, 34 };
StringBuilder sb = new StringBuilder();
foreach (char i in a) { sb = sb.Append(i); }
MessageBox.Show(Regex.Match(sb.ToString(), "\u0005\u0021\u0020\\u002B\u0022").Value); 
```

注意`char i in a`而不是`var i in a`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-26T15:59:39.910

**已编辑**

无法直接将 int 数组与 Regex 匹配。

根据文档 [MSDN](http://msdn.microsoft.com/en-us/library/twcw2f1c.aspx) Match 方法将参数作为字符串。

您必须先将 int 数组转换为字符串。您可以通过以下方式将 int 数组转换为字符串

```
 var a = new[] { 1, 2, 3, 4, 5, 6 };
 StringBuilder sb = new StringBuilder();
        foreach (var i in a)
        {
            sb = sb.Append(i);
        }
  var result=sb.ToString(); 
```

# nhibernate - 在 nhibernate 中，UnderlyingCriteria 是什么意思？

> ID：10767706
> 
> 赞同：0
> 
> 时间：2012-05-26T15:53:25.160
> 
> 标签：nhibernate, orm

我是nhibernate的初学者，我只想问一下nhibernate中的UnderlyingCriteria是什么意思？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T22:52:17.853

在 NHibernate 3.0 和更新版本中，是NHibernate 最古老的查询接口之一（继承自 Java Hibernate）`QueryOver`的强类型包装器`Criteria`

该`UnderlyingCriteria`属性提供对`ICriteria`正在构建的实例的访问。

# qt - 无顶部和填充 gluCylinder()

> ID：10767707
> 
> 赞同：0
> 
> 时间：2012-05-26T15:53:32.443
> 
> 标签：qt, opengl, fill, glu

好吧，我对 gluCylinder() 有疑问，它不允许我做这些事情。我正在尝试做的是给气缸没有顶部并将其填充到里面。

```
void GLWindow::paintGL()
{
    glClear(GL_COLOR_BUFFER_BIT);
    glColor3f(1,0,0);
    glBegin(GL_POLYGON);
    GLUquadricObj *obj = gluNewQuadric();

    gluCylinder(obj, 1.0, 1, 3, 30, 30);

    glEnd();
} 
```

所以问题是，我如何给 Cylinder no-top （意思是它没有顶部），我一直在尝试修改“top”参数但没有成功，我如何将它填充到里面?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:58:56.563

> 所以问题是，我如何给 Cylinder no-top（意思是，它没有顶部），

GLU 不支持这个。顺便说一句：GLU 不是 OpenGL 的一部分，它是一个配套库，并且在很久以前就被淘汰了。只需实现您自己的圆柱体绘图代码即可。

> 我怎么把它填在里面？

你的意思是像固体一样？使用 OpenGL 你不能。Heck OpenGL 甚至根本不知道圆柱体或物体。它所看到的只是顶点，它解释为绘制单个点、线或三角形的属性。没有场景，没有几何对象。

# java - 没有在 Java 中定义标签的 SAX 解析器

> ID：10767715
> 
> 赞同：5
> 
> 时间：2012-05-26T15:54:33.037
> 
> 标签：java, xml, parsing, sax

是否可以从 SAX 解析器解析 XML 文件而不在 Java 文件中定义标签名称？我想让我的代码通用，以便它可以解析任何类型的 XML 文件而不是某些特定的 XML 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T17:16:31.640

听起来您正在寻找具有外部化映射（例如 XML、注释）或隐含约定的 XML 到对象“解析器”。这是一个可供选择的列表：

*   [XStream](http://xstream.codehaus.org/)
*   [XMLBeans](http://xmlbeans.apache.org/)
*   [JAXB](http://www.oracle.com/technetwork/articles/javase/index-140168.html)
*   [吉宝](http://jibx.sourceforge.net/)
*   [消化器](http://commons.apache.org/digester/)

你一定会发现更多。如果您更愿意使用 SAX（或 DOM 或 StAX）手动解析 XML，那么您**必须**知道您感兴趣的 XML 标记的名称。您可以将它们抽象出来并驱动您的解析器配置，但如果您正在构建从您的 XML 数据中获取对象，那么您最好花时间选择一个可以为您做这件事的框架

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T21:27:10.867

是的。看看[JDOM](http://www.jdom.org/)、[DOM4J](http://dom4j.sourceforge.net/)和[XOM](http://www.xom.nu/)。他们都在通过 SAX 解析 XML 并构建一个节点树。但是，不清楚您所说的“没有在 Java 文件中定义标签名称”是什么意思。

# c++ - 已成功将 blob 数据插入 SQLite 数据库，但无法插入数据

> ID：10767717
> 
> 赞同：3
> 
> 时间：2012-05-26T15:54:45.800
> 
> 标签：c++, sqlite, blob

我使用 BLOB 将对象插入 SQLite 数据库。插入后，我可以用“SELECT”语句获取数据并且数据是正确的，虽然用“SQLite Database Browser”浏览数据库时“TASK_HEAD”的行是“Empty”。但是，如果我破坏了刚刚插入的对象，就不能再得到正确的数据了，指针“pHead”指向一个地址，其“id”成员的内容是“铪铪铪铪铪铪” " 在调试模式下在 VS2008 中读取时。

这是一个例子：

```
// user-defined data type
typedef std::string TASK_ID;
struct TASK_HEAD
{
    TASK_ID id; 
    std::string userData;

    int Size()
    {
        return (id.size() + userData.size()) * sizeof(TCHAR);
    }
};

// when TEST_INSIDE is defined, pHead is invalid; but if undef it, I can get the "head" I just inserted
// and if the blob data is a string (when USING_STRING is defined), I can get the string inserted into the db even though the "test" string has been destroyed
void CDBWriter::WriteTestData()
{
    // open db
    sqlite3* db = NULL;
    int nRet = sqlite3_open(DATABASE_NAME.c_str(), &db);
    if (nRet != SQLITE_OK)
    {
        return;
    }

    if (db != NULL)
    {
        // create a table
        std::string cmdCreate("CREATE TABLE IF NOT EXISTS testTable (id TEXT NOT NULL, TASK_HEAD BLOB, PRIMARY KEY(id));");
        char* errMsg = NULL;
        nRet = sqlite3_exec( db , cmdCreate.c_str() , 0 , 0 , &errMsg );
        if( errMsg != NULL )
        {
            sqlite3_free( errMsg );
            errMsg = NULL;
            return;
        }

//#define USING_STRING
#define TEST_INSIDE
#ifndef TEST_INSIDE
        TASK_HEAD head;
#endif // TEST_INSIDE

        // insert blob data
        const TASK_ID newID(NewGUID()); // NewGUID returns string like this: "5811307F-7AA7-4C44-831F-774FC5832627"
        string query = "INSERT OR REPLACE INTO testTable (id, TASK_HEAD) VALUES ('";
        query += newID;
        query += "', ?1);";
        sqlite3_stmt* res = NULL;
        nRet = sqlite3_prepare_v2(db, query.c_str(), query.length(), &res, 0);
        {
#ifdef TEST_INSIDE
            TASK_HEAD head;
#endif // TEST_INSIDE
            head.id = newID;
#ifdef USING_STRING
            std::string test("ewsjoafijdoaijeofsafsd");
            nRet = sqlite3_bind_blob (res, 1, test.c_str(), test.size(), SQLITE_TRANSIENT);
#else
            int nsizeHead = sizeof(head);
            int nSizeHeadSt = sizeof(TASK_HEAD);
            int sizeString = sizeof(std::string);
            size_t nLen = newID.size();
            //nRet = sqlite3_bind_blob (res, 1, &head, sizeof(head), SQLITE_TRANSIENT);
            nRet = sqlite3_bind_blob (res, 1, &head, head.Size(), SQLITE_TRANSIENT);
#endif // USING_STRING

            if (SQLITE_OK == nRet)
            {
                nRet = sqlite3_step(res);
            }
            if (nRet != SQLITE_OK && nRet != SQLITE_DONE)
            {
                return;
            }
        }

        // get all columns in the database
        query = "SELECT * FROM testTable;";
        nRet = sqlite3_prepare_v2 (db, query.c_str(), query.length(), &res, 0);
        if (SQLITE_OK == nRet)
        {
            while (SQLITE_ROW == sqlite3_step(res))
            {
#ifdef USING_STRING
                const char* pHead = (const char*)sqlite3_column_blob(res, 1);
#else
                const TASK_HEAD *pHead = (const TASK_HEAD*)sqlite3_column_blob(res, 1);
#endif // USING_STRING
                continue;
            }
        }
        sqlite3_finalize(res);
        sqlite3_close(db);
    }
} 
```

起初，我认为这可能是传递给 sqlite3_bind_blob 的字节的问题，所以我用一种愚蠢的方法获取对象的字节，正如您在此处看到的（TASK_HEAD 的 size() 函数），但这无济于事. 然后我尝试使用 SQLITE_STATIC 而不是 SQLITE_TRANSIENT，仍然无法正常工作。怎么了？

Ps：我知道将对象插入数据库是一个不好的解决方案，我只想知道为什么我无法读回插入数据库的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T16:32:28.803

的内容`userData`很可能存储在堆上。即使它存储在`std::string`(for SSO) 内部，它仍然可能在内部使用指向自身的指针，因此当您按位将其复制到内存中的另一个位置时它不起作用（您所做的相当于 a `memcpy`）。

但是，为什么它不起作用并不重要，因为它只是*未定义的行为*。只是不要像这样“将对象插入数据库”。要么使用一些序列化库对其进行序列化，*然后*将其插入，要么使用表中的两列，一列 for `id`，一列 for `userData`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T16:37:34.173

我认为问题出在：

```
nRet = sqlite3_bind_blob (res, 1, &head, head.Size(), SQLITE_TRANSIENT); 
```

您不能像这样获取 TASK_HEAD 结构的地址并将其传递给 sqlite。要构建 blob，您需要平面数据，不需要指针和动态缓冲区，如 std::string 对象。

您需要在绑定操作之前序列化缓冲区中的 TASK_HEAD 结构。例如：

```
struct TASK_HEAD
{
    TASK_ID id; 
    std::string userData;

    std::string Data()
    {
        return id+userData;
    }

    int Size()
    {
        return (id.size() + userData.size()) * sizeof(TCHAR);
    }
 }; 
```

和：

```
nRet = sqlite3_bind_blob (res, 1, head.Data().c_str(), head.Size(), SQLITE_TRANSIENT); 
```

请注意，如上所示添加要序列化的字段非常糟糕（因为这种格式无法反序列化）。要处理 blob，您需要找到一个好的序列化库或格式（协议缓冲区、消息包、JSON 等......）或自己滚动。

您的代码中有第二个问题：

```
const TASK_HEAD *pHead = (const TASK_HEAD*)sqlite3_column_blob(res, 1); 
```

由于类似的原因，这将不起作用。

# java - 如何访问 Java bean 的非 getter/setter 方法

> ID：10767727
> 
> 赞同：2
> 
> 时间：2012-05-26T15:56:35.393
> 
> 标签：java, jsf, javabeans, el

我有一个从 java bean 获取值的 xhtml 页面：

```
<h:dataTable value="${myBean.getAccounts}" var="account">
        <h:column>
            <f:facet name="header">Account ID</f:facet>
            #{account.id}
        </h:column>
        <h:column>
            <f:facet name="header">Account Name</f:facet>
            #{account.name}
        </h:column>

</h:dataTable> 
```

问题是当我在 Tomcat 7 服务器上运行它时，我收到一个错误：getAccounts is not a myBean property。java 类的 getAccounts 方法是一个返回一些结果的独立方法。

有没有办法我可以调用这个方法？

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T16:12:39.350

属性名称是*accounts*，而不是*getAccounts*。`getAccounts`是返回属性*帐户的 getter*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T16:36:42.180

杰夫的回答是正确的。只是一些额外的信息：

您的方法称为 getAccounts() 但在 EL 中您需要说 #{mybean.accounts}

[这里](http://www.mkyong.com/jsf2/jsf-2-datatable-example/)有一个很好的使用 ah:dataTable 的完整示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T16:24:09.467

EL 将带有 get/set 前缀的任何方法视为属性，因此如果您使用任何方法调用您的方法，您可以省略 get/set 部分。

# java - 数组排序有效

> ID：10767729
> 
> 赞同：0
> 
> 时间：2012-05-26T15:56:43.303
> 
> 标签：java, arrays, performance, sorting

对于家庭作业，我需要编写可以对数组进行排序的方法，排序方法应该尽可能高效。

1.  数组的开头将出现所有除以 4 的数字，没有余数。
2.  后面是除以 4 余数为 1 的所有数字
3.  后面是除以 4 余数为 2 的所有数字
4.  在数组的末尾将是所有其他数字（那些除以 4 和其余 3 的数字）。

我试过这组 4 个指针：
2 个指针 起初 0 和 1 的余数
2 指针在数组的最后一个 2 和 3 的余数

到目前为止，这是我能找到的（当然有问题），感谢您的帮助！

```
public static void sortByFour (int[] arr)
{
    int temp;
    int noRemainderIndex = 0;
    int remainder1Index = 1;
    int remainder2Index = arr.length - 2;
    int remainder3Index = arr.length - 1;

    for (int i = 0; i < arr.length; i++)
    {
        if (arr[i] % 4 == 0)
        {
            temp = arr[noRemainderIndex];
            arr[noRemainderIndex] = arr[i];
            arr[i] = temp;
            noRemainderIndex++;
            remainder1Index++;
        }
        else if (arr[i] % 4 == 1)
        {
            temp = arr[remainder1Index];
            arr[remainder1Index] = arr[i];
            arr[i] = temp;
            remainder1Index++;
        }
        else if (arr[i] % 4 == 2)
        {
            temp = arr[remainder2Index];
            arr[remainder2Index] = arr[i];
            arr[i] = temp;
            remainder2Index--;
        }
        else if (arr[i] % 4 == 3)
        {   
            temp = arr[remainder3Index];
            arr[remainder3Index] = temp = arr[i];
            arr[i] = temp;
            remainder3Index--;
            remainder2Index--;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T16:03:54.783

为您的家庭作业提供提示。

1.  如果您被允许使用现有的库方法，请查看`Array.sort(...)`和`Comparator`接口。（请注意，在对原始类型的数组进行排序时，要使用自定义比较器，您必须先转换为包装器类型；例如，转换`int[]`为`Integer[]`、排序和转换回。）

2.  如果您不允许使用`Array.sort(...)`（或类似），请确定这是排序问题还是整理问题。换句话说，如果有任何要求对 4 个类别中的数字进行重新排序（或保留顺序）。

3.  您可以通过使用 4 个临时数组来简化问题，但还有其他（更棘手的）解决方案涉及多次遍历数组和交换元素对。

4.  需要解决的问题之一是您事先不知道 4 个类别中的每个类别有多少个数字。因此，您事先并不知道移动号码的目的地。但是有解决方案...

* * *

> ...排序方法应该尽可能高效。

这是作业要求，还是您的要求？

如果这是您自己添加的内容 -请**注意**- 您的标记*可能*会为简单的解决方案提供更高的分数，而不是（据称）更有效但过于复杂的解决方案。

一个好的软件工程师不会在每个程序中都追求极致的效率。相反，他平衡了各种事情：

*   功能要求，
*   性能要求，
*   对软件可维护性的要求，以及
*   项目截止日期，

注意到其中一些要求可能是隐含的，和/或管理层没有正确理解。

（或者换句话说，一个快速的程序......但不能可靠地工作，或者不可维护，或者没有及时准备好......是失败的。）

另一方面，如果性能*是*这个家庭作业的要求，那么你的讲师应该已经解释了如何用 Java 衡量小程序的性能。（相信我……这不是一件简单的事情。）你需要把它应用到你的作业问题上，以决定哪种替代解决方案最快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:03:28.337

我认为更好的方法是使用 4 个数组，每种情况一个。将每个数组视为一个队列。遍历数组并推送到相应的数组上。完成后，只需将数组彼此附加。一个非常干净的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T16:15:24.107

为什么不创建一个包含两个值的自定义类，即数字和余数。创建这个迷你类的数组，传递值并预先计算余数。这将帮助您不必在每次通过列表元素时重新计算余数。您必须根据剩余属性移动和排序元素。

然后你会遇到一个经典问题，即对只有少数独特元素的列表进行排序。您选择的排序算法的性能取决于初始条件。我可能会说最好的选择是 Shell 排序算法或 Quick3。

[http://www.sorting-algorithms.com/few-unique-keys](http://www.sorting-algorithms.com/few-unique-keys)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T16:20:04.117

我认为您想要类似于快速排序中使用的分区算法的东西。

4 个指针是一个好的开始，但让我改变它们的功能：
1) 指向余数的结尾 = 0
2) 指向余数的结尾 = 1
3) 指向余数的结尾 = 2
4) 指向开始未分类的

该数组分为 5 个部分：余数 = 0、1、2、3 和未分类。

If remainder = 3, just increment the pointer 4\. The number if included in remainder = 3 group.
If remainder = 2, increment the pointer 3 and swap the current value with the value at pointer 3\. Increment pointer 4.
If remainder = 1, increment the pointer 2, swap with current value; increment the pointer 3, swap with current value. Increment pointer 4.
If remainder = 0, well, do the swapping 3 times.

# python - 如何使 ST 计算产生惰性结果流（或像协程一样操作）？

> ID：10767736
> 
> 赞同：7
> 
> 时间：2012-05-26T15:57:50.207
> 
> 标签：python, haskell, generator, mutable, coroutine

我正在努力解决如何在 Haskell 中进行有状态计算懒惰地生成结果的一般问题。例如，下面的简单算法可以在 Python 的生成器工具的帮助下表示为有状态但“惰性”的计算，只执行到达下一条`yield`语句所需的步骤，然后将控制流返回给调用者，直到请求下一个元素：

```
def solveLP(vmax0, elems):
    elem_true_ixs = [ [ ei for ei, b in enumerate(row) if b ] for row in elems ]

    return go(vmax0, elem_true_ixs)

def go(vmax, mms):
    if not mms:
        yield []

    else:
        for ei in mms[0]:
            maxcnt = vmax[ei]

            if not maxcnt > 0:
                continue

            vmax[ei] = maxcnt-1 # modify vmax vector in-place
            for es in go(vmax, mms[1:]):
                # note: inefficient vector-concat operation
                # but not relevant for this question
                yield [ei]+es
            vmax[ei] = maxcnt   # restore original vmax state

for sol in solveLP([1,2,3],[[True,True,False],[True,False,True]]):
    print sol

# prints [0,2], [1,0], and [1,2] 
```

这可以很容易地转换为惰性 Haskell 计算（例如，当`m`专门用于`Logic`or时`[]`），例如

```
import           Control.Monad
import qualified Data.Vector.Unboxed as VU

solveLP :: MonadPlus m => VU.Vector Int -> [[Bool]] -> m [Int]
solveLP vmax0 elems = go vmax0 elemTrueIxs
  where
    -- could be fed to 'sequence'
    elemTrueIxs = [ [ ei | (ei,True) <- zip [0::Int ..] row ] | row <- elems ]

    go vmax []     = return []
    go vmax (m:ms) = do
        ei <- mlist m

        let vmax'  = vmax VU.// [(ei, maxcnt-1)] -- this operation is expensive
            maxcnt = vmax VU.! ei

        guard $ maxcnt > 0

        es <- go vmax' ms

        return $ (ei:es)

    mlist = msum . map return 
```

...但我希望能够通过使用可变向量并`vmax0`就地修改单个向量（因为我只需要增加/减少单个元素并复制整个仅替换单个元素的向量是一个相当大的开销，向量变得越长）；请注意，这只是我一直在尝试实现的一类算法的玩具示例

所以我的问题是——假设有一种方法可以实现这一点——我如何在 ST monad 中表达这样一个有状态的算法，同时在计算过程中一旦产生结果，仍然能够将结果返回给调用者？我尝试通过 monad-transformers 将 ST monad 与 list monad 结合起来，但我不知道如何使它工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T01:40:11.657

只需使用懒惰的ST。在 Haskell 中，普通的旧列表与 Python 生成器基本相同，因此我们将返回一个结果列表（其中结果是一个`[Int]`）。这是您的 Python 代码的音译：

```
import Control.Monad.ST.Lazy
import Data.Array.ST
import Control.Monad
import Data.List

solveLP :: [Int] -> [[Bool]] -> [[Int]]
solveLP vmax_ elems_ = runST $ do
    vmax <- newListArray (0, length vmax_) vmax_
    let elems = map (findIndices id) elems_
    go vmax elems

go :: STArray s Int Int -> [[Int]] -> ST s [[Int]]
go vmax [] = return [[]]
go vmax (mm:mms) = liftM concat . forM mm $ \ei -> do
    maxcnt <- readArray vmax ei
    if not (maxcnt > 0) then return [] else do
        writeArray vmax ei (maxcnt - 1)
        rest <- go vmax mms
        writeArray vmax ei maxcnt
        return (map (ei:) rest) 
```

尝试例如`solveLP [1,undefined,3] [[True,True,False],[True,False,True]]`看看它确实会延迟返回结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T19:11:32.617

让我们对 Python 代码进行更直接的翻译。你在 Python 中使用协程，那么为什么不在 Haskell 中使用协程呢？然后是可变向量的问题；请参阅下面的更多详细信息。

首先，吨进口：

```
-- Import some coroutines
import Control.Monad.Coroutine -- from package monad-coroutine

-- We want to support "yield" functionality like in Python, so import it:
import Control.Monad.Coroutine.SuspensionFunctors (Yield(..), yield)

-- Use the lazy version of ST for statefulness
import Control.Monad.ST.Lazy

-- Monad utilities
import Control.Monad
import Control.Monad.Trans.Class (lift)

-- Immutable and mutable vectors
import Data.Vector (Vector)
import qualified Data.Vector as Vector
import Data.Vector.Mutable (STVector)
import qualified Data.Vector.Mutable as Vector 
```

以下是一些实用程序定义，让我们将协程视为在 Python 中的行为，或多或少：

```
-- A generator that behaves like a "generator function" in Python
type Generator m a = Coroutine (Yield a) m ()

-- Run a generator, collecting the results into a list
generateList :: Monad m => Generator m a -> m [a]
generateList generator = do
  s <- resume generator -- Continue where we left off
  case s of
    -- The function exited and returned a value; we don't care about the value
    Right _ -> return []
    -- The function has `yield`ed a value, namely `x`
    Left (Yield x cont) -> do
      -- Run the rest of the function
      xs <- generateList cont
      return (x : xs) 
```

现在我们需要能够以`STVector`某种方式使用 s。你说要使用**惰性**ST，而对`STVector`s的预定义操作只是为**严格**ST定义的，所以我们需要做一些包装函数。我不打算为这样的东西制作运算符，但如果你真的想让代码变成 Pythonic（例如`$=`for`writeLazy`或其他什么；你需要以某种方式处理索引投影，但无论如何都可以让它看起来更好） ）。

```
writeLazy :: STVector s a -> Int -> a -> ST s ()
writeLazy vec idx val = strictToLazyST $ Vector.write vec idx val

readLazy :: STVector s a -> Int -> ST s a
readLazy vec idx = strictToLazyST $ Vector.read vec idx

thawLazy :: Vector a -> ST s (STVector s a)
thawLazy = strictToLazyST . Vector.thaw 
```

所有的工具都在这里，所以让我们翻译一下算法：

```
solveLP :: STVector s Int -> [[Bool]] -> Generator (ST s) [Int]
solveLP vmax0 elems =
  go vmax0 elemTrueIxs
  where
    elemTrueIxs = [[ei | (ei, True) <- zip [0 :: Int ..] row] | row <- elems]

go :: STVector s Int -> [[Int]] -> Generator (ST s) [Int]
go _ [] = yield []
go vmax (m : ms) = do
  forM_ m $ \ ei -> do
    maxcnt <- lift $ readLazy vmax ei
    when (maxcnt > 0) $ do
      lift $ writeLazy vmax ei $ maxcnt - 1
      sublist <- lift . generateList $ go vmax ms
      forM_ sublist $ \ es -> yield $ ei : es
      lift $ writeLazy vmax ei maxcnt 
```

可悲的是，没有人费心`MonadPlus`为`Coroutine`s 定义，所以`guard`这里不可用。但这可能不是你想要的，因为它在某些/大多数单子中停止时会引发错误。我们当然也需要将`lift`所有在 monad 中完成的操作从`ST`monad 中拿出来`Coroutine`；一个小麻烦。

这就是所有的代码，所以可以简单地运行它：

```
main :: IO ()
main =
  forM_ list print
  where
    list =  runST $ do
      vmax <- thawLazy . Vector.fromList $ [1, 2, 3]
      generateList (solveLP vmax [[True, True, False], [True, False, True]]) 
```

该`list`变量是纯粹的且延迟生成的。

我有点累，所以如果有什么不明白的地方，请不要犹豫指出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T16:46:24.673

早上太早了，我无法及时理解你的算法。但是，如果我正确阅读了基本问题，您可以使用惰性 ST。这是一个简单的例子：

```
import Control.Monad.ST.Lazy
import Data.STRef.Lazy

generator :: ST s [Integer]
generator = do
    r <- newSTRef 0
    let loop = do
            x <- readSTRef r
            writeSTRef r $ x + 1
            xs <- loop
            return $ x : xs
    loop

main :: IO ()
main = print . take 25 $ runST generator 
```

它正是从一个维护其状态的 ST 操作创建一个惰性结果流。

# macos - 如何将 ~/bin 添加到我的路径中？

> ID：10767738
> 
> 赞同：77
> 
> 时间：2012-05-26T15:58:11.523
> 
> 标签：macos, bash, sublimetext

我在修改添加 Sublime Text 2 的路径时遇到问题。我添加了一个`~/bin`目录并[运行以下命令](http://www.sublimetext.com/docs/2/osx_command_line.html)：

```
ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" ~/bin/subl 
```

subl 链接出现在`~/bin`. 但我需要将`~/bin`目录添加到我的路径中。我对此很陌生，我不知道我的路在哪里。我环顾四周，发现可能的文件是`.profile`,`.bash_profile`或`.bashrc`

我没有`.bash_profile`. 和`.profile`我`.bashrc`添加

```
PATH=$PATH:~/bin/subl
export PATH 
```

这是正确的添加吗？如果是这样，我应该在哪里添加它？

当我`echo $PATH`，我得到：

```
/Users/<username>/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/bin:/Users/<username>/.rvm/gems/ruby-1.9.3-p194@global/bin:/Users/<username>/.rvm/rubies/ruby-1.9.3-p194/bin:/Users/<username>/.rvm/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin 
```

当我输入`subl`时，我得到：

```
-bash: subl: command not found 
```

谢谢！

ps 我之前安装了 Macports，它修改了我的`.profile`文件。不确定这是否与它有关 - 我现在不知道默认值是什么`.profile`样的。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-09-03T13:40:55.920

我和你一样新手，这意味着我什至不知道如何阅读与修改 PATH 相关的一半内容。最终，尽管我找到了一种方法，它不需要您将 subl 放入 .rvm/bin 中（因为那是为了其他东西），而是放在它的适当目录中，即 ~/bin 中。

转到您的终端并输入：

```
open -a Finder /usr/bin 
```

这会将您的 Finder 打开到 /usr/bin 目录。在那里打开一个新的 Finder，转到 Applications，右键单击 Sublime Text 图标并转到 Show Package Contents，然后转到 Contents、SharedSupport、bin。复制 subl 文件并将其粘贴到显示 /usr/bin 的另一个 Finder 中

而已！您应该设置为使用以下命令：

```
subl . (or subl file.name) 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2014-09-30T04:53:42.043

所有人都在此处发表评论。您需要在 sublime 中添加符号链接`/usr/local/bin`。它不需要root访问权限。并且不需要创建另一个 bin 目录。

*对于崇高的文字 2*

```
ln -s /Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/subl /usr/local/bin/ 
```

*对于崇高的文字 3*

```
ln -s /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl /usr/local/bin/ 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2013-07-18T19:06:30.153

**zsh 更新** 由于某种原因，当我最近从 bash 切换到 zsh/prezto 时，路径中的“~/bin”不起作用。我将其更改为“/Users/myusername/bin”，它再次正常工作。我会寻找原因并在找到时更新。如果您有更好的解决方案，请发表评论。

我知道这是一篇旧帖子，但我认为我会为其他任何尝试遵循[sublimetext 给出](http://www.sublimetext.com/docs/2/osx_command_line.html)的说明以逐字从 OSX 命令行使用 sublime 的说明记录一个解决方案。**Sublime text 3 更新** [Sublime Text 3 文档](http://www.sublimetext.com/docs/3/osx_command_line.html)

1）在你的主目录“~/”中创建一个名为“bin”的目录

```
mkdir ~/bin 
```

2）在您刚刚创建的新目录中创建指向您的 sublime text 2 应用程序的符号链接

```
ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" ~/bin/subl 
```

**Sublime Text 3**应用程序路径的更新略有不同：

```
ln -s "/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl" ~/bin/subl 
```

3) 按照 Ryan Hoffman 关于如何在 OSX 中轻松添加到路径的说明：[添加到 Mac OSX](http://architectryan.com/2012/10/02/add-to-the-path-on-mac-os-x-mountain-lion/#.Ueg2zWTXSA8)上的路径 使用他的技术将新创建的“~/bin”添加到路径中。完成后，您的 /etc/paths 文件将如下所示（注意末尾的 ~/bin）：

```
/usr/bin
/bin
/usr/sbin
/sbin
/usr/local/bin
~/bin 
```

4) 打开一个新的终端窗口，从命令行开始使用 subl。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-05-26T17:46:18.983

你不需要做`PATH=$PATH:~/bin/subl`。相反，`PATH=$PATH:~/bin`就足够了。这样，您就是在告诉 shell 查找`~/bin`二进制文件。使用您的命令，您告诉外壳程序查看`~/bin/subl`二进制文件的“文件夹”，这不起作用。此外，您不需要在两个文件中添加命令。在您的`.bashrc`. 我不是`bash`专家，但我可以推荐阅读[这篇博](http://stefaanlippens.net/bashrc_and_others)文以进一步解释不同的启动文件。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-12-22T18:25:05.847

我想提出一个替代解决方案来解决这个问题。使用路径中已有的目录。像这样：

```
$ sudo ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" /usr/local/bin/subl 
```

tl;博士

我在 Yosemite (OS X 10.10) 中遇到了同样的问题，在全新安装的操作系统中， ~/bin 目录不存在并且不在您的路径中。然而，在你的路径中已经有很多有用的地方，你可以将符号链接放置到 Sublime。

例如，这是我路径中当前的项目（用于`$ echo $PATH`获取列表）：

```
/Applications/Postgres.app/Contents/Versions/9.3/bin
/usr/local/bin
/usr/bin
/bin
/usr/sbin
/sbin:/usr/local/bin
/usr/local/mysql/bin 
```

`~/bin/subl`您可以通过更改说明的部分轻松修改脚本以使用路径中已经存在的位置`/usr/local/bin/subl`

因此，运行以下命令将实现您的目标。

```
$ sudo ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" /usr/local/bin/subl 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-06-09T23:46:42.223

我最近一直在努力解决这个问题。我意识到`~`路径中没有扩展到您的主目录。至少它不适合我。

这就是我为使它工作所做的。

```
export PATH=$PATH:$HOME/bin 
```

根据我为 brew cask 找到的一些后续说明，我`subl`从应用程序目录链接到我的。`~/bin`不幸的是，路径从未更新。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-02-14T16:22:56.957

您需要首先创建一个指向`/usr/bin`. 符号链接 - 或 SymLink - 是目录的别名或快捷方式。执行以下操作：

1.  首先，使用终端命令行确保您位于主目录中

    `cd ~`

2.  创建指向您的`usr/bin`目录的符号链接。

    `ln -s /usr/bin bin`

    where `ln`= 创建链接，`-s`= 符号，后跟`[target diectory]`and`[name of link]`

3.  测试你的新链接

    `cd bin`

    这应该带你到你的`~/bin`- 相同的`/usr/bin`。`~`表示里面隐藏着一条很长的路径。

4.  现在，回到你的主文件夹安装`subl`命令

    `cd ~`

5.  安装 Sublime Text 2 命令行工具。我将`sudo`用来绕过任何权限块。

    `sudo ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" ~/bin/subl`

    你应该很高兴去！通过简单地输入`subl`命令行来测试它，它应该从终端启动 Sublime Text 2。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-04-04T17:42:03.670

简单地在终端上执行此操作：

```
sudo ln -s "/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl" /usr/bin/subl 
```

那是我的 Sublime 存储的地方，尝试输入 Sublime 的路径，因为您的版本可能不同。

```
subl . 
```

应该工作正常。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-01-28T17:50:11.847

遇到了同样的挑战，最终只创建了一个 .bash_profile 文件，并直接在那里添加了路径语句。工作顺利。您可能还想查看 Alvin Alexander 的示例 .bash_profile 帖子（[http://alvinalexander.com/blog/post/mac-os-x/sample-mac-osx-bashrc-terminal-startup-file](http://alvinalexander.com/blog/post/mac-os-x/sample-mac-osx-bashrc-terminal-startup-file)） - 我找到了我还将添加一些其他有用的命令。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-08-05T03:50:32.397

```
echo $PATH 
```

并使用其中已经存在的路径之一。在这个例子中“/usr/local/bin”

```
sudo ln -s "/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl" /usr/local/bin/subl 
```

如果系统返回`No such file or directory`

```
sudo mkdir /usr/local/bin/
sudo ln -s "/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl" /usr/local/bin/subl 
```

测试它是否工作

```
subl 
```

这适用于 Sublime Text 3。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-06-18T18:15:57.077

以下是执行此操作的完整说明（对于**Sublime Text 3**）：

1.  请通过以下命令检查您的系统完整性保护状态：

    ```
    $ csrutil status 
    ```

    如果已启用，请按照以下步骤操作：

    1.  通过重新启动机器并在启动时按住 Command + R 启动到 OS X 的恢复操作系统。

    2.  从实用程序菜单启动终端。

    3.  运行以下命令：

        ```
        $ csrutil disable
        $ reboot 
        ```

    这是由于OS X 的一项名为**System Integrity Protection的****安全功能**，它将防止对系统位置和进程的未经授权的访问。因此，如果**启用**此功能，您**将无法**修改 /usr/bin 的内容。

*******   创建从**/usr/bin**到**~/bin**的符号链接：

    ```
    $ sudo ln -s /usr/bin ~/bin 
    ```

    *   创建从 Sublime Text 3 CLI 工具到**~/bin**的符号链接：

    ```
    $ sudo ln -s /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl ~/bin 
    ```

    *   测试一下。

    ```
    $ subl . 
    ```****** 

 ***** * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-10-03T13:05:40.323

以下对我有用。如果有人寻求帮助，我有 Sublime 版本 3 并将其发布在这里：

```
sudo ln -s "/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl" /bin/subl 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-02-09T20:48:11.217

在 MacOS 11 上，此命令为我建立了 Sublime Merge 的符号链接。主要区别似乎是`ln`使用`-sv`而不是调用`-s`：

```
ln -sv "/Applications/Sublime Merge.app/Contents/SharedSupport/bin/smerge" /usr/local/bin/smerge 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-08-05T01:15:59.080

似乎在 Yosemite 中该命令实际上是针对 Sublime 3 的，但我可能弄错了：

```
 ln -s /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl /usr/local/ 
```****

# javascript - Fabric-js 对象 setWidth() 和 setHeight() 问题

> ID：10767739
> 
> 赞同：3
> 
> 时间：2012-05-26T15:58:12.710
> 
> 标签：javascript, jquery, canvas, fabricjs

我对 Fabric.js（[http://fabricjs.com](http://fabricjs.com)）库有问题，我无法解决好几个小时......我正在尝试使用 setWidth() 和 setHeight() 方法以编程方式更改图像的尺寸（[http://fabricjs。 com/docs/symbols/fabric.Object.html](http://fabricjs.com/docs/symbols/fabric.Object.html)）但它没有正常工作，控制边框的尺寸改变得很好，但图像仍然是相同的大小，你可以在屏幕截图上看到它： ![fabric.js javascript jquery 对象宽度高度问题](../Images/dff6cc611767a7e7bc27f5b4fc61d8bb.png)

有人能帮我吗？顺便说一句，当我尝试使用 scaleToHeight() 或 scaleToWidth() 更改尺寸时效果很好，所以问题必须出在上面的两种方法中......我使用的是 0.8.8 版，谢谢帮助！

# jakarta-ee - 如何使用嵌入式 id 编写 JPQL SELECT MAX？

> ID：10767741
> 
> 赞同：0
> 
> 时间：2012-05-26T15:58:31.293
> 
> 标签：jakarta-ee, jpa, eclipselink, jpql, composite-key

我正在使用 Eclipselink (JPA) + GlassFish v3.1.2 + NetBeans 7.1.2

我有一张带有复合主键的表：

```
table (Enterpirse)
----------------------
|PK,FK idCompany     | nvarchar
|PK idEnterprisecode | nvarchar
|                    |
|____________________|

@Entity
public class IdMtoEnterprise {
    @EmbeddedId
    protected IdMtoEnterprisePK idMtoEnterprisePK

    //getter and setter are omitted for clear
}

@Embeddable
public class IdMtoEnterprisePK {

    @Column(name = "id_mto_company")
    private String idMtoCompany;

    @Column(name = "id_mto_enterprise_code")
    private String idMtoEnterpriseCode;
} 
```

现在..我如何用 JPQL 编写 SELECT MAX(with EmbeddedId) 子句？？？

这个失败...

```
Select MAX(e.IdMtoEnterprisePK.idMtoEnterpriseCode) From IdMtoEnterprise e 
```

原因：java.lang.IllegalArgumentException：在 EntityManager 中创建查询时发生异常：异常描述：编译查询时出错 [Select MAX(e.IdMtoEnterprisePK.idMtoEnterpriseCode) From IdMtoEnterprise e]，第 1 行，第 13 列：未知状态或类 [com.sdn.entidad.IdMtoEnterprise] 的关联字段 [IdMtoEnterprisePK]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:48:56.637

您的字段被命名`idMtoEnterprisePK`（小写 i），而不是`IdMtoEnterprisePK`（大写 I）。

# java - 尝试从麦克风获取数据时，每个样本都输出平零

> ID：10767746
> 
> 赞同：0
> 
> 时间：2012-05-26T15:58:49.790
> 
> 标签：java, javasound, synthesizer

我正在制作一个基于 Dobb 博士的教程构建的合成器中的 Java 声码器，每当我尝试从麦克风获取样本时，即使有麦克风输入，它也只会为样本返回零。这是 AudioFormat 的设置：

```
// AudioFormat parameters
public  static final int     SAMPLE_RATE = 22050;
private static final int     SAMPLE_SIZE = 16;
private static final int     CHANNELS = 1;
private static final boolean SIGNED = true;
private static final boolean BIG_ENDIAN = true;
// Chunk of audio processed at one time
public static final int BUFFER_SIZE = 1000;
public static final int SAMPLES_PER_BUFFER = BUFFER_SIZE / 2; 
```

VoiceProvider（麦克风样本提供类）：

```
public class VoiceProvider implements ISynthProvider{
    private TargetDataLine line;
    public VoiceProvider(){
        DataLine.Info info = new DataLine.Info(TargetDataLine.class, 
            Player.format); // format is an AudioFormat object
        if (!AudioSystem.isLineSupported(info)) {
            System.out.println("o_0 line not supported!");

        }

        // Obtain and open the line.
        try {
            line = (TargetDataLine) AudioSystem.getLine(info);
            line.start();
            line.open(Player.format);

        } catch (LineUnavailableException ex) {
            // Handle the error ... 
        }

    }
    @Override
    public double getSample() {
        byte[] a = {0,0}; 
        if (line.isOpen()){
            //System.out.println("0_0");
            line.read(a, 0, 2);
        }else{
            //System.out.println("o_0");
        }
        System.out.println(Arrays.toString(a));
        return readShort(a,0);

    }
    public static short readShort(byte[] data, int offset) {
    return (short) (((data[offset] << 8)) | ((data[offset + 1] & 0xff)));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:35:51.363

```
try {
        line = (TargetDataLine) AudioSystem.getLine(info);
        line.start();
        line.open(Player.format);

    } catch (LineUnavailableException ex) {
        // Handle the error ... 
    } 
```

应该：

```
try {
        line = (TargetDataLine) AudioSystem.getLine(info);
        line.open(Player.format);
        line.start();

    } catch (LineUnavailableException ex) {
        // Handle the error ... 
    } 
```

# c# - 如何取消 sqldatasource_updating 事件中的更新？

> ID：10767748
> 
> 赞同：1
> 
> 时间：2012-05-26T15:59:08.293
> 
> 标签：c#, asp.net

我正在使用gridview 和sqldatasource。

我找不到取消更新更新而不关闭编辑事件中的行的方法。因为 e.cancel 在更新事件中不可用。

我需要在 UPDATED 中而不是在 UPDATING 中执行此操作，因为在更新时我无法获取某些事件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:30:01.897

您可以使用`e.KeepInEditMode = true;`在编辑模式下保持更新的记录。但你不能取消更新`updated`，因为记录已经更新到那个时候。您将找到另一种使用自定义编码的方法。

**ASPX**

```
<asp:GridView ID="GridView1" runat="server" 
            onrowdatabound="GridView1_RowDataBound" 
            onrowupdated="GridView1_RowUpdated">
</asp:GridView> 
```

**CS**

```
protected void GridView1_RowUpdated(object sender, GridViewUpdatedEventArgs e)
 {
            e.KeepInEditMode = true;
 } 
```

如果是 sqldatasource

```
protected void SqlDataSource1_Updated(object sender, SqlDataSourceStatusEventArgs e)
 {
            e.Command.Cancel();
 } 
```

# php - 如何创建包含用户所有特定行的选择？

> ID：10767750
> 
> 赞同：0
> 
> 时间：2012-05-26T15:59:20.067
> 
> 标签：php, mysql, database, select

我试图做出一个应该发布并包含来自用户的所有votacoes的选择

```
 <select name="votacao" size="1">

     <option>

       <?php
         $sql = "SELECT nome_votacao FROM votacoes WHERE user_id = $_SESSION['id']";
         $rs = mysql_query($sql);                       
         while($row = mysql_fetch_row($rs)) 
             echo $row['nome_votacao'];             
       ?>   

    </option>

</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:02:30.087

你`<option>`需要在你的循环中：

```
<select name="votacao" size="1">

       <?php
         $sql = "SELECT nome_votacao FROM votacoes WHERE user_id = $_SESSION['id']";
         $rs = mysql_query($sql);                       
         while($row = mysql_fetch_row($rs)) {
             echo sprintf("<option>%s</option>\n", $row['nome_votacao']);  
         }      
       ?>   

</select> 
```

您可能还需要添加一个唯一 ID 作为`value`每个属性的属性，`<option>`这样才能真正有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:01:42.777

```
<select name="votacao" size="1"> 
       <?php 
         $sql = "SELECT nome_votacao FROM votacoes WHERE user_id = $_SESSION['id']"; 
         $rs = mysql_query($sql);                        
         while($row = mysql_fetch_row($rs))  
             echo "<option>".$row['nome_votacao']."</option>";              
       ?>
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T17:01:12.433

试试这个

```
<select name="votacao" size="1">

     <option>

       <?php
         $sql = "SELECT nome_votacao FROM votacoes WHERE user_id = $_SESSION['id']";
         $rs = mysql_query($sql);     
          foreach ($rs as $row)        
          { ?>

           <option> <?php echo $row['nome_votacao']; ?> </option>
       <? } ?>   

    </option> 
```

# linux-device-driver - 如果 .ko 对象已被插入，请检查 C 源代码

> ID：10767754
> 
> 赞同：0
> 
> 时间：2012-05-26T15:59:36.697
> 
> 标签：linux-device-driver

是否有任何内置函数可以让我在源代码中检查特定内核对象

文件已经被插入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:15:05.250

我假设您想在内核空间中执行此操作。如果是这样，请查看 kernel/module.c：find_module(char *name)

# java - Java - 从外部服务器获取 POSIX UTC 时间戳的最佳选择？

> ID：10767758
> 
> 赞同：0
> 
> 时间：2012-05-26T16:00:00.870
> 
> 标签：java, networking, time, utc

我有一个需要当前日期和时间的 Java 程序。这通常很容易完成，但如果用户的系统日期/时间设置不正确，可能会给我的软件带来问题。

我想从外部服务器中提取当前日期/时间，所以我想我可以使用 NTP 客户端的 Java 实现从公共 NTP 服务器（例如 pool.ntp.org）中提取 POSIX UTC 时间戳。比我为此目的运行自己的服务器更可靠和更具成本效益。

NTP 在这里是一个很好的解决方案，还是有一个我不知道的更好的协议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:19:38.410

我之前使用过 apache commons [NTP](http://commons.apache.org/net/api-3.1/org/apache/commons/net/ntp/package-summary.html)这很好，除非您在 Windows 上运行并且需要毫秒精度，在这种情况下，请阅读[此](https://stackoverflow.com/questions/925191/java-ntp-client)答案。

# python - 使用 BeautifulSoup 获取特定数据

> ID：10767759
> 
> 赞同：0
> 
> 时间：2012-05-26T16:00:13.737
> 
> 标签：python, beautifulsoup

我`page.prettify()`以前是整理 HTML 的，现在要提取的文本如下：

```
 <div class="item">
         <b>
          name
         </b>
         <br/>
         stuff here
        </div> 
```

我的目标是`stuff here`从那里提取 ，但我很困惑，因为它没有包含在任何标签中，除了`div`，其中已经有其他东西了。而且每行前面的额外空白也使它更难。

这样做的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T17:07:01.977

find 和 nextSibling 的组合适用于您发布的示例。

```
soup = BeautifulSoup(""" <div class="item"> <b> name </b>  <br/>  stuff here </div>""")
soup.find("div", "item").find('br').nextSibling 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T16:54:59.017

如果你真的确定，你想获取在最后一个之前结束并在特定标签之后开始的内容，你可以在这一点之后使用 RegExp，这不是最优雅的，但如果你的要求是特定的，它可能会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T16:11:45.030

您可以使用元素的`.contents`属性`div`直接获取其中的所有元素，然后选择一个字符串。

**编辑：**

这就是我所暗示的方法：

```
from bs4 import BeautifulSoup
from bs4.element import NavigableString

soup = BeautifulSoup("""<div class='item'> <b> name </b>  <br/>  stuff here </div>""")
div = soup.find('div')
print ''.join([el.strip() for el in div.contents if type(el) == NavigableString]) 
```

# c++ - 无损转换 std::string 和 QByteArray 的正确方法

> ID：10767760
> 
> 赞同：28
> 
> 时间：2012-05-26T16:00:22.150
> 
> 标签：c++, string, qt, binary

在 std::string 和 QByteArray 之间进行无损转换的正确方法是什么...主要是为了处理二进制数据？

我正在使用：

```
QByteArray qba = QString::fromStdString(stdString).toAscii(); 
```

和

```
QString(qba).toStdString(); 
```

但我想检查这是否真的正确。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-26T16:09:12.303

对于二进制数据，您的解决方案是有问题的，因为非 ASCII 字符将被转换`'?'`为`QString::toAscii()`. 对于`QString`. 正如您可能已经猜到的那样，`QString`仅当数据是文本而不是二进制时才应使用。

两者`QByteArray`都有`std::string`原始数据的构造函数（C 字符串 + 长度）以及转换为 C 字符串 + 长度。因此，您可以使用它们进行转换：

```
// std::string => QByteArray
QByteArray byteArray(stdString.c_str(), stdString.length());

// QByteArray => std::string
std::string stdString(byteArray.constData(), byteArray.length()); 
```

它们都是二进制安全的，这意味着字符串可能包含`'\0'`字符并且不会被截断。数据也不会被触及（没有 UTF 转换），所以这种转换是“无损的”。

确保使用长度作为第二个参数的构造函数（对于`QByteArray`和`std::string`），因为大多数其他构造函数会在第一次出现零之前截断数据。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-09-06T15:51:46.180

从 Qt 5.4`QByteArray`开始，内置了对通过和进行`std::string`转换的支持。`QByteArray::toStdString()``QByteArray::fromStdString()`

这些实现几乎与[leemes 的 answer](https://stackoverflow.com/a/10767823/4757)相同。

```
inline std::string QByteArray::toStdString() const
{ return std::string(constData(), length()); }

inline QByteArray QByteArray::fromStdString(const std::string &s)
{ return QByteArray(s.data(), int(s.size())); } 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-10-16T23:58:00.727

QByteArray 数据报；datagram.append(ui->lineEdit_sendData->text());

# javascript - 使用 Django 和 JS 的可变长度表单

> ID：10767761
> 
> 赞同：2
> 
> 时间：2012-05-26T16:00:26.207
> 
> 标签：javascript, django

我想创建一个包含多个文本区域的表单。理想情况下，用户将能够按下页面上的按钮将另一个文本区域添加到表单中。我已经用一点点 JS 完成了这个简单的部分，但我不确定如何提交这个表单并用 Django 存储结果——如果它总是有相同数量的文本区域，那就是很容易，但我不知道如何使用可变数字来做到这一点。我的 HTML 如下所示：

```
<body>
    <form action="foo" method="post" id="survey_form">
      <input type="textarea" rows="4" cols="20">
    </form>
    <button onclick="addQuestion();">add question</button>
</body> 
```

该`addQuestion()`函数只是将另一个 textarea 输入添加到表单中：

```
function addQuestion() {
    var form = document.getElementById('survey_form');
    var new_text_area = document.createElement('input');
    new_text_area.setAttribute('type','textarea');
    new_text_area.setAttribute('rows', '4');
    new_text_area.setAttribute('cols', '20');
    form.appendChild(new_text_area);
} 
```

我的 Django 模型有一个字符串列表字段；这工作正常。现在的问题是如何从`request.POST`列表中获取表单数据。我正在考虑为每个新的 textarea 赋予其自己的唯一标识符（`textarea_1`,`textarea_2`等），然后循环并查看是否`request.POST['textarea_' + str(i)]`存在，并将其添加到字符串列表中。不过，这似乎*真的很*低效，而且很难启动。有没有更好、更 Pythonic 的方式来做到这一点？

另外，我不完全确定如何给每个文本区域一个唯一的标识符——我是 JS 的新手，我所有的知识都是从谷歌搜索中获得的。我正在考虑在索引变量上使用闭包`i`，然后`i`每次`addQuestion()`调用时递增。那有意义吗？

最后，非常感谢为程序员提供的关于 JS 的快速入门教程的指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T16:49:47.490

使用[表单集](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)。它们允许您以一种形式编辑多个对象。理想情况下，您的表单集将在 Question 类上。

然后从 JS 中添加新的文本区域，其名称为`id_form-1-content`等`id_form-2-content`。

在你[看来](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#using-a-formset-in-views-and-templates)，你会有类似的东西：

```
formset = QuestionFormSet(request.POST)
if formset.is_valid(): 
    # etc. 
```

# c# - 从 IQueryable 制作 ObservableCollection

> ID：10767765
> 
> 赞同：1
> 
> 时间：2012-05-26T16:01:11.633
> 
> 标签：c#

当我尝试这个时：

```
//IRepository.GetAll<CompanyPerson> returns an IQueriable
//ToObservableList() extension method converts to ObservableCollection
 var tt =
        (from s in container.Resolve<IRepository>().GetAll<Company>()
         join t in container.Resolve<IRepository>().GetAll<Personels>().ToObservableList()
         on s.ID equals t.CompanyID into k
         from subset in k
         select new { s, t = k }).ToList(); 
```

我得到这个例外：

```
Unable to create a constant value of type 'CompanyPerson'. Only primitive types ('such as Int32, String, and Guid') are supported in this context. 
```

当我尝试这个时：

```
 var tt =
        (from s in container.Resolve<IRepository>().GetAll<Company>()
         join t in container.Resolve<IRepository>().GetAll<Personels>()
         on s.ID equals t.CompanyID into k
         from subset in k
         select new { s, t = k }).ToList(); 
```

或者当我尝试这个时：

```
(from s in container.Resolve<IRepository>().GetAll<Company>()
             join t in container.Resolve<IRepository>().GetAll<Personels>()
             on s.ID equals t.CompanyID into k
             from subset in k
             select new { s, t = new ObservableCollection<CompanyPerson>(k) }).ToList(); 
```

得到这个：

```
Only parameterless constructors and initializers are supported in LINQ to Entities. 
```

ToObservableList() 扩展：

```
public static ObservableCollection<T> ToObservableList<T>(this IEnumerable<T> data)
{
    ObservableCollection<T> dataToReturn = new ObservableCollection<T>();

    foreach (T t in data)
        dataToReturn.Add(t);

    return dataToReturn;
} 
```

没有例外。

有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:23:40.807

是的，您不能使用复杂类型进行比较（示例中的 t 和 k）

尝试指定条件：

```
var tt =
    (from s in container.Resolve<IRepository>().GetAll<Company>()
     join t in container.Resolve<IRepository>().GetAll<Personels>().ToObservableList()
     on s.ID equals t.CompanyID into k
     from subset in k
     select new { s, new CompanyPerson() { //here fill all properties from k variable } }).ToList(); 
```

另外，我想知道您是如何实现“Company”和“CompanyPerson”类的。你能展示那些类的源代码吗？

# android - 应出现锁屏时的 Android 启动意图

> ID：10767768
> 
> 赞同：2
> 
> 时间：2012-05-26T16:01:25.547
> 
> 标签：android, android-intent, intentfilter, lockscreen

我正在尝试在那里开发一个备用锁定屏幕，因为我需要一个在屏幕上监听的意图过滤器

但问题是我不知道要使用哪个属性以及要给出哪个值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T09:49:04.760

也在做同样的事情。

[这是](https://stackoverflow.com/questions/10800683/android-ics-native-lockscreen)我昨天发布的问题，关注它也许会弹出一些东西。

顺便说一句，正如我在问题中所写，您必须听取的行动是：

*   [Intent.ACTION_SCREEN_ON](http://developer.android.com/reference/android/content/Intent.html#ACTION_SCREEN_ON)：屏幕已打开，您必须在此处开始活动并检查 [inKeyguardRestrictedInputMode](http://developer.android.com/reference/android/app/KeyguardManager.html#inKeyguardRestrictedInputMode%28%29)此方法以确保键盘保护（ lockscreen ）已打开。
*   [Intent.ACTION_SCREEN_OFF](http://developer.android.com/reference/android/content/Intent.html#ACTION_SCREEN_OFF)：这是屏幕熄灭时发送的事件，在这里做任何你需要的事情。
*   [Intent.ACTION_USER_PRESENT](http://developer.android.com/reference/android/content/Intent.html#ACTION_USER_PRESENT)：当用户解锁安全键盘时发送此信息。

重要的是要知道这两个法兰：

*   [WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_SHOW_WHEN_LOCKED)：
*   [WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_DISMISS_KEYGUARD)

在您的锁屏活动中使用它们，以便在屏幕锁定时能够拥有它，并在它们不安全时解除键盘保护。

希望对您有所帮助，关于 android 锁屏自定义的文档非常缺乏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T19:52:29.570

你需要一个 InterFilter 来监听`Intent.ACTION_SCREEN_OFF`动作。

```
IntentFilter screenFilter = new IntentFilter();
screenFilter.addAction(Intent.ACTION_SCREEN_OFF); 
```

# jquery - jQuery：在不移动位置的情况下添加 HTML

> ID：10767779
> 
> 赞同：0
> 
> 时间：2012-05-26T16:03:18.670
> 
> 标签：jquery, ajax, dom

假设我有一长串消息，这些消息会自动更新。至于现在，我有一个小按钮要求用户刷新，因为我不想在用户阅读时预先添加这些消息 - 从而扰乱他的阅读流程。

我的另一个想法是预先添加数据，但不是将整个文档向下推，我希望它向上推，因此插入新消息而不改变用户阅读位置（除了它们在最顶部） .

如何做到这一点？甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T17:04:51.310

[http://jsfiddle.net/Pe6a8/2/](http://jsfiddle.net/Pe6a8/2/)

很确定这就是你想要的。我应该得到一块饼干吗？:3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:31:15.950

我能想到的一种方法是在新的 html div 前面加上 display:none 属性。当用户向上滚动时，我们可以更改显示属性以向他显示新的 html div。

# php - 重定向如果访问子域 PHP

> ID：10767783
> 
> 赞同：0
> 
> 时间：2012-05-26T16:03:46.703
> 
> 标签：php, inline, frame, parent, if-statement

好的，这里的问题是。如果我在另一个站点上的内联框架调用的子域上有一个索引文件。如何将代码添加到子域 index.php 文件中以查找父域名 url。

示例：在子域上创建了一个 wordpress，但只希望它显示在加载内联框架的页面中。

yourdomain.com/目录/

在这个页面上，它有一个调用这个目录的内联框架。在目录文件夹中的 index.php 文件中将执行 {if parent called directory/ then show wordpress in inline frame else do a print or show please click here to bedirected to real page where site can be loaded.}

**我想我可以这样做：**

```
$realpage = "yourdoamin.com/directory/";
$currentpage = $_SERVER['REQUEST_URI'];
if($regpage==$currentpage) { 
   //show wordpress
} else {
  //This is where words will have a a href link to direct them to yourdomain.com url 
  //where inline frame will load the wordpress in the inline frame.
} 
```

记住内联框架是父级的真实页面。

好的，我希望这很清楚，并且有办法做到这一点。尚未测试此理论，但可以对此使用任何理想。谢谢。

# ios - UIScrollVIew 中的静态对象

> ID：10767788
> 
> 赞同：0
> 
> 时间：2012-05-26T16:04:35.887
> 
> 标签：ios, uiscrollview

我的 iOS 应用程序的一部分涉及 PDF 阅读器。为了显示用户所在的页面，我创建了一个 UILabel 并将其放置在 PDFScrollView（UIScrollView 的子类）中。这个标签必须在滚动视图中，因为每当我更改页面时，滚动视图都会向标签的 IBOutlet 发送一条消息，告诉它更改其文本。

但是，每当我在 UIScrollView 中放大（滚动“缩小”）时，标签也会缩小（它的大小不会改变，但会向外移动）。这会导致它最终移出屏幕。**如何更改它以使 UILabel 在 UIScrollView 中是静态且不动的？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:09:25.253

而不是子类化`UIScrollView`，子类 a`UIView`并将 a`UIScrollView`和`UIView`作为子视图而`UIView`不是滚动视图的子视图。将您的标签等放在里面，`UIView`并让父视图管理滚动视图和其他视图之间的通信。

```
UIView + UIScrollView (your PDFScrollView)
+---------------------------------------+
-                                       -
-                                       -
-                                       -
-                                       -
-                                       -
-                                       -
-                                       -
-                                       -
-                                       -
-                                       -
-                                       -
-                                       -
-                                       -
-                                       -
-                                       -
-                                       -
-                                       -
-       UIView (not a subview)          -
-       +----------------------+        -
-       -      Label(s)        -        -
-       -                      -        -
-       +----------------------+        -
+---------------------------------------+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:14:58.817

在你的`UIScrollViewDelegate`，实现方法：

```
- (void)scrollViewDidZoom:(UIScrollView*)scrollView {

    uiLabel.transform = CGAffineTransformMakeScale(scaleX, scaleY);
    uiLabel.center = CGPointMake(x, y);
} 
```

您可以在其中正确计算 scaleX、scaleY、X 和 Y。您可以尝试`1.0/scrollView.zoomScale`同时使用`scaleX`和`scaleY`。

[Ray Wenderlich](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)网站上有一个很好的关于使用`UIScrollView`视图层次结构的教程。

# c - C - 使用进程监控文件

> ID：10767791
> 
> 赞同：4
> 
> 时间：2012-05-26T16:05:02.587
> 
> 标签：c, file, monitoring, process

我必须查看一定数量的日志文件（可以随时更改）以查看它们是否包含单词«forbidden»当这些单词位于结构中时。在实施过程中，我对执行实施的最佳方式有些怀疑。

1.  有一个进程来分析要监视的文件列表，并且每次我们看到有变化时，我们发送一个进程来查看其中是否包含“禁止”字样，这是一个好主意吗？
2.  作为日志文件，修改只发生在最后，所以要查看文件是否已更改，我们必须查看大小是否也已修改。进行“主动等待”：

```
While(1)
 if (“old size!= new size”)
  send process run for this file to see if contains some words “forbidden”. 
```

有人可以给我一些想法并告诉我我正在做的事情是否不正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:35:58.157

`less`对于单个文件，这似乎与所做的非常相似。使用`strace`我偷看了一点`less`，它似乎只保留一个打开的文件描述符，然后在循环中休眠一秒钟并尝试读取更多输入。如果没有太多要监控的日志文件（并且您不介意为每个文件保留一个打开的文件描述符），也许您可​​以使用这种方法。

# clojure - 如何在 Clojure 中编写 monoid 协议？

> ID：10767793
> 
> 赞同：9
> 
> 时间：2012-05-26T16:05:24.187
> 
> 标签：clojure, functional-programming, monoids

由于显而易见的原因，以下方法不起作用。

```
(defprotocol Monoid
  (mappend [a b])
  (mzero [])) 
```

`mzero`具有零参数，并且协议中不允许（或没有意义）零参数方法。在 Haskell 或 Scala 中，调度是基于类型而不是基于值的，这不是问题。

`Monoid`在 Clojure中概念化和编写协议的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T19:02:46.723

查看[源代码](https://github.com/clojure/clojure/blob/89e5dce0fdfec4bc09fa956512af08d8b14004f6/src/clj/clojure/core/reducers.clj#L279)，在[新的 reducers 库](http://clojure.com/blog/2012/05/08/reducers-a-library-and-model-for-collection-processing.html)中实现它的方式不是作为协议，而是作为重载函数。无参数调用是 mzero；两个 args 调用是 mappend。

更准确地说，`monoid`它接受两个参数 -`op`并`ctor`返回一个函数，该函数在不带参数调用时`ctor`计算`op`.

这与在折叠中处理零的方式一致，例如 - `reduce`(fold) 将评估正在折叠的函数，没有 args 以在必要时找到零。

我觉得展示一些如此平淡无奇的东西有点羞耻，但我看不出你如何在 clojure 中做得更好。感谢评论中的解释/教育。

# android - 光标更改时未调用Android OnLoadFinished()

> ID：10767794
> 
> 赞同：4
> 
> 时间：2012-05-26T16:05:24.350
> 
> 标签：android, android-contentprovider, android-cursor, android-cursorloader

我创建了一个简单 `Activity`的实现`LoaderManager.LoaderCallbacks<Cursor>`接口。`OnCreateLoader()`很简单：

```
@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args)
{
    Log.d(TAG, "On create loader");

    Uri queryUri = ContentUris.withAppendedId(SmartPresentationMessage.Person.CONTENT_URI, 1);
    CursorLoader cursorLoader = new CursorLoader(this, queryUri, null, null, null, null);
    return cursorLoader;
} 
```

`getLoaderManager().initLoader(0, null, this)`当我在`Activity`创建时调用此方法。

我的问题是在 my 上`ContentProvider`，它具有以下`query()`方法：

```
@Override
public Cursor query(Uri uri, String[] projection, String where,
        String[] whereArgs, String sortOrder)
{
    int match = sUriMatcher.match(uri);

    Cursor queryCursor;
    SQLiteDatabase mdb = mOpenHelper.getReadableDatabase();

    switch (match)
    {
        case PERSON:
            long personID = ContentUris.parseId(uri);

            queryCursor = mdb.query(TABLE_NAME, projection,
                        SmartPresentationMessage.Person._ID + " = " + personID,
                        whereArgs, null, null, sortOrder);

            asyncQueryRequest("" + (taskTag ++ ) , QUERY_URI + "/" + "person");

            return queryCursor;
        default:
            throw new IllegalArgumentException("unsupported uri: " + uri);
    }
} 
```

在`queryCursor`我收到来自网络服务器的响应后，数据库中会更新。但是，当我在的 update 方法中调用该`getContext().getContentResolver().notifyChange(uri, null)`方法时，我在 上的方法不会被调用，即使 uri 与实例化.`ContentProvider``OnLoadFinished()``Activity``CursorLoader`

这是上的更新方法`ContentProvider`：

```
@Override
public int update(Uri uri, ContentValues values, String where, String[] whereArgs)
{
    //getContext().getContentResolver().notifyChange(uri, null);

    // insert the initialValues into a new database row
    SQLiteDatabase db = mOpenHelper.getWritableDatabase();
    int affected;
    try
    {
        switch (sUriMatcher.match(uri))
        {
            case PERSON:
                long personID = ContentUris.parseId(uri);;
                affected = db.update(TABLE_NAME, values,
                        SmartPresentationMessage.Person._ID + " = " + personID,
                        whereArgs);
                getContext().getContentResolver().notifyChange(uri, null);

                break;
            default:
                throw new IllegalArgumentException("Unknown URI " + uri);
        }
    }
    finally
    {
        db.close();
    }

    return affected;
} 
```

有人可以告诉我在调用同一个 uri`OnLoadFinshed()`时没有调用我的方法的原因是什么？`notifyChange()`

谢谢你，克里斯蒂

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T21:23:47.640

在返回您`Cursor`的提供者的`query()`方法之前，您需要调用以下方法

```
cursor.setNotificationUri(contentResolver, uri); 
```

您可以`ContentResolver`通过`Context`. 在其中`ContentProvider`有一种方法`getContext()`。

# android - Android，从原生代码打开系统库

> ID：10767796
> 
> 赞同：0
> 
> 时间：2012-05-26T16:05:36.577
> 
> 标签：android, android-ndk, system, dlopen

下午好，

如果有人可以提供线索，了解在以下涉及 dlopen 的场景中可能发生的情况，我将不胜感激。

我正在尝试通过调用 dlopen("/system/lib/libmedia.so", RTLD_LAZY); 来加载 Android 系统的库 libmedia.so 来自使用 ndk 静态链接到上层库 (libB) 的库 (libA)。最后一个库由 Java 应用程序通过 JNI 调用。

问题是，这个对 dlopen 的调用总是崩溃转储以下行：

```
*** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
Build fingerprint: 'google/yakju/maguro:4.0.4/IMM76I/330937:user/release-keys'
pid: 1642, tid: 1687  >>> net.media.test:my_process <<<
signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr deadbaad

 r0 deadbaad  r1 01250488  r2 80000000  r3 00000000
 r4 00000000  r5 00000027  r6 013dc888  r7 013c4700
 r8 01303274  r9 00000000  10 5b486b38  fp 00000000
 ip ffffffff  sp 5b6fe578  lr 4005af69  pc 400576c8  cpsr 60000030
 d0  5f616964656d6a66  d1  5f67656e5f706466
 d2  775f657461657265  d3  6f5f6c61636f6c72
 d4  20646e756f46203a  d5  436f502065657266
 d6  206e6f6973736553  d7  3578307830207461
 d8  0000000000000000  d9  0000000000000000
 d10 0000000000000000  d11 0000000000000000
 d12 0000000000000000  d13 0000000000000000
 d14 0000000000000000  d15 0000000000000000
 d16 41680f6010000000  d17 3fe0000000000000
 d18 3feff985c46d85eb  d19 3f49e8ee49e85400
 d20 3c87000000000000  d21 3f1145b88564c411
 d22 3e21ee94a0c6d216  d23 bda8fae9be8838d4
 d24 0000000000000000  d25 0000000000000000
 d26 0100010001000100  d27 0100010001000100
 d28 0100010001000100  d29 0100010001000100
 d30 0001000000010000  d31 0001000000010000
 scr 80000012
         #00  pc 000176c8  /system/lib/libc.so
         #01  pc 0001e864  /system/lib/libc.so (__assert2)
code around pc:
400576a8 4623b15c 2c006824 e026d1fb b12368db  \.#F$h.,..&..h#.
400576b8 21014a17 6011447a 48124798 24002527  .J.!zD.`.G.H'%.$
400576c8 f7f47005 2106ef4c efe8f7f5 460aa901  .p..L..!.......F
400576d8 f04f2006 94015380 94029303 eba4f7f5  . O..S..........
400576e8 4622a905 f7f52002 f7f4ebae 2106ef38  .."F. ......8..!
code around lr:
4005af48 41f0e92d 46804c0c 447c2600 68a56824  -..A.L.F.&|D$h.h
4005af58 e0076867 300cf9b5 dd022b00 47c04628  gh.....0.+..(F.G
4005af68 35544306 37fff117 6824d5f4 d1ee2c00  .CT5...7..$h.,..
4005af78 e8bd4630 bf0081f0 00028592 41f0e92d  0F..........-..A
4005af88 fb01b086 9004f602 461f4815 4615460c  .........H.F.F.F
memory map around addr deadbaad:
befcf000-beff0000 [stack]
(no map for address)
ffff0000-ffff1000 [vectors]
stack:
    5b6fe538  4008365c  /system/lib/libc.so
    5b6fe53c  01250488  [heap]
    5b6fe540  0000013f  
    5b6fe544  40059d15  /system/lib/libc.so
    5b6fe548  4008370c  /system/lib/libc.so
    5b6fe54c  4008885c  
    5b6fe550  00000000  
    5b6fe554  4005af69  /system/lib/libc.so
    5b6fe558  00000000  
    5b6fe55c  5b6fe58c  
    5b6fe560  013dc888  [heap]
    5b6fe564  013c4700  [heap]
    5b6fe568  01303274  [heap]
    5b6fe56c  4005a0d5  /system/lib/libc.so
    5b6fe570  df0027ad  
    5b6fe574  00000000  
#00 5b6fe578  4007a5b5  /system/lib/libc.so
    5b6fe57c  5b490368  /data/data/net.media.test/lib/libB.so
    5b6fe580  013dc888  [heap]
    5b6fe584  4005a401  /system/lib/libc.so
    5b6fe588  400836b0  /system/lib/libc.so
    5b6fe58c  fffffbdf  
    5b6fe590  4005e865  /system/lib/libc.so
    5b6fe594  4007a5b5  /system/lib/libc.so
    5b6fe598  5b490368  /data/data/net.media.test/lib/libB.so
    5b6fe59c  4005e869  /system/lib/libc.so
#01 5b6fe5a0  00000061  
    5b6fe5a4  5b490310  /data/data/net.media.test/lib/libB.so
    5b6fe5a8  5b490310  /data/data/net.media.test/lib/libB.so
    5b6fe5ac  00035b80  
    5b6fe5b0  01303274  [heap]
    5b6fe5b4  5b3ed394  /data/data/net.media.test/lib/libB.so
    5b6fe5b8  013c46a8  [heap]
    5b6fe5bc  013dc8ec  [heap]
    5b6fe5c0  5b6fe634  
    5b6fe5c4  00000003  
    5b6fe5c8  01303274  [heap]
    5b6fe5cc  5b3b4ce8  /data/data/net.media.test/lib/libB.so
    5b6fe5d0  5b4be7c0  /data/data/net.media.test/lib/libB.so
    5b6fe5d4  000003bc  
    5b6fe5d8  00000000  
    5b6fe5dc  5b4ceea4  
    5b6fe5e0  5b6fe628  
    5b6fe5e4  00000000 
```

我检查了路径和库是否存在，并将 LOCAL_LDLIBS += -ldl 添加到 libB 的 Android.mk 中以允许使用动态加载。但我总是得到同样的转储。

提前感谢您提供任何可以分享的有用信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:04:45.780

以防万一这对某人有所帮助，问题与两次打开库有关，而在第二次加载之前没有关闭它。

这反映在故障地址的转储中，如您所见，这是一个明确的幻数信号，用十六进制表示，与内存使用不当有关的崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T17:30:36.577

`libmedia`似乎不是 NDK 的一部分：

*   [https://groups.google.com/group/android-ndk/browse_thread/thread/8a541d7a5c93f40e/80c20c8ba33cd27b](https://groups.google.com/group/android-ndk/browse_thread/thread/8a541d7a5c93f40e/80c20c8ba33cd27b)
*   [https://groups.google.com/group/android-ndk/browse_thread/thread/ecd843c6802bb035/cbe11b52dc674f8d](https://groups.google.com/group/android-ndk/browse_thread/thread/ecd843c6802bb035/cbe11b52dc674f8d)
*   [https://groups.google.com/group/android-ndk/browse_thread/thread/e0e7b64887f89a21/1c8069d16efe93f0](https://groups.google.com/group/android-ndk/browse_thread/thread/e0e7b64887f89a21/1c8069d16efe93f0)

OpenSL 是使用 NDK 播放音频的受支持方式。

# java - java.util.ConcurrentModificationException 是一个大问题，在这种情况下

> ID：10767798
> 
> 赞同：2
> 
> 时间：2012-05-26T16:05:45.713
> 
> 标签：java, concurrentmodification

当我注意到我打电话时随机得到异常时，我正在为我的决赛制作游戏`repaint();`

这一切的原因是不同的对象在不同的​​时间更新，并且有自己的`Thread`更新自己。有时，实体在绘制时会自行更新。绘画线程以大约 60-100 FPS 的速度运行，而实体大约每 300 毫秒更新一次。

游戏不会停止或存在与此相关的任何其他问题。

我知道忽略它是个坏主意，但我还能做些什么吗？拥有多个线程是我能想到的让游戏正常运行的唯一解决方案。

谢谢阅读！

编辑：当我在绘画时尝试删除实体时，似乎会发生此问题；两者都使用相同的列表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T16:14:19.193

ConcurrentModificationException 与多线程无关（尽管可能涉及多个线程）。当您`List`通过方法以外的`Iterator.remove()`方式从集合中添加或删除项目时迭代集合（例如 a ）时会发生这种情况。

这可能发生在不同的线程上，但它可能是同一个线程。例如，这段代码也会抛出 ConcurrentModificationException：

```
Iterator iter = someList.iterator();
while(iter.hasNext()) {
   Object item = iter.next();
   someList.remove(item);
} 
```

如果改为`iter.remove()`调用，则不会发生错误。

避免这种情况的方法：

1.  在迭代之前制作列表的副本
2.  只使用`remove()`迭代器的方法
3.  使用类似 a 的东西`CopyOnWriteArrayList`来避免这个错误，但代价是在每次更改时创建内部数组的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T16:33:31.737

多线程的主要问题正是要确保尽管对象的状态在多个线程之间共享，但该状态始终保持一致。这就是为什么存在同步块，为什么存在锁，为什么存在易失变量。

忽略这个问题并希望不会发生严重的问题是灾难的根源。一切都会正常运行 1 小时，然后您将开始到处出现异常、错误结果等。

您让两个线程同时访问同一个非线程安全列表这一事实表明您的代码有问题。这是完全不正确的，绝对应该修复。

您应该同步对共享列表的访问。阅读有关 Java 并发的教程和书籍，因为在运行多个线程时同步不是一个选项。

# c++ - QWebView::setUrl 不工作

> ID：10767800
> 
> 赞同：1
> 
> 时间：2012-05-26T16:05:49.983
> 
> 标签：c++, qt

我是这个问答网站和 Qt 世界的新手。我想在我的应用程序中集成一个网页。我想获取标签输入的值，但它不起作用，你能帮帮我吗？

这是我班级的构造函数：

```
MainWindow::MainWindow(QWidget *parent)
: QWidget(parent)
{
QVBoxLayout *container = new QVBoxLayout;

QWebView *cart = new QWebView();
QWebPage *page = new QWebPage();

cart->setUrl(QUrl("http://www.mysite.com/"));

QWebFrame *main = cart->page()->mainFrame();

QWebElement document = main->documentElement();
QWebElement t1 = document.findFirst("input[name=myname]");
QString storedText = t1.attribute("value", "defaultvalue");

qDebug() << "T1 value:" << storedText;
storedText = t1.attributeNS(QString::Null(), "value");
qDebug() << "T1 ns value:" << storedText;
QVariant v = t1.evaluateJavaScript("this.value");
qDebug() << "Javascript value:" << v.toString(); // ok. returns c

container->addWidget(cart);

setLayout(container);
this->show();
} 
```

该网页出现在我的应用程序中，但命令行上的输出是这样的：

```
T1 value: ""
T1 ns value: ""
Javascript value: "" 
```

变量 storedText 具有值`""`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T16:11:44.720

那是因为使用 设置 URL 后`QWebView::setUrl()`，您必须等待`QWebView::loadFinished(bool ok)` `signal`才能检索任何数据。请参阅[文档](http://doc.qt.nokia.com/4.7-snapshot/qwebview.html)。

因此，将元素信息的检索代码移动到`slot`for 中`QWebView::loadFinished()` `signal`。

# mysql - 子查询上的 MySQL Interval()

> ID：10767802
> 
> 赞同：1
> 
> 时间：2012-05-26T16:05:53.897
> 
> 标签：mysql, intervals

我有一个表格，其中包含一个字符的等级列表，每个等级都与一个数值 (xp) 相关联。等级越高，需要的 XP 越多。我想知道构建查询以查找角色所属等级的最简单方法。这个想法是使用它是一个子查询，所以在选择字符时

```
SELECT name, xp FROM characters 
```

我将能够根据*XP的数量获得角色**等级*。如果我在排名表中使用两列来表示所需的最小和最大 XP，这很容易：

 *```
SELECT
  name, xp
  (SELECT rank FROM ranks WHERE xp BETWEEN xp_min AND xp_max) as rank
FROM characters 
```

但我想只用一列作为等级的下限

**更新：** 看起来`INTERVAL`这是一条红鲱鱼，保留它用于搜索目的

如果我以编程方式构造查询，我可以为此使用`INTERVAL()`函数（[MySQL 文档）：](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_interval)

```
SELECT INTERVAL(character_xp, rank1, rank2, rank3, rank4) 
```

但是有没有办法使用子查询来实现这一点？以下不起作用

```
SELECT INTERVAL(character_xp, (SELECT rank FROM ranks ORDER by rank)) 
```

这也不是：

```
SELECT INTERVAL(character_xp, (SELECT GROUP_CONCAT(rank ORDER BY rank) FROM ranks)); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:45:13.073

这能满足您的需要吗？这里，`xp`是该等级的“目标 xp”。此查询返回与`rank`当前字符 xp 值对应的 。

例子：

```
character xp : 12000

name     | rank | xp
Level 1    1      10000
Level 2    2      20000
Level 3    3      40000 
```

询问：

```
SELECT
    name,
    rank,
    xp,
    (<character xp here> - xp) AS diff
FROM ranks
HAVING diff > 0
ORDER BY diff ASC
LIMIT 1 
```

换成`<character xp here>`12000，结果是：

```
name     | rank | xp     | diff
Level 1    1      10000    2000 
```

因此，角色已达到 1 级，并且比 1 级的目标高出 2000 xp。*

# c# - 如何使用 C# 代码读取 .pst 文件

> ID：10767803
> 
> 赞同：3
> 
> 时间：2012-05-26T16:06:00.333
> 
> 标签：c#, pst

我正在使用 Visual Studio 2008，我想使用 c# 代码读取 .pst 文件并想在网页上显示 pst 文件的内容？请让我知道这样做的详细程序。

谢谢萨蒂什

# java - 使用 Java 将随机数转换为回文

> ID：10767804
> 
> 赞同：1
> 
> 时间：2012-05-26T16:06:06.607
> 
> 标签：java, palindrome

我正在尝试使一个随机数成为回文。例如，生成的随机数 1234 应该变成 12344321。

所以我写了这段代码：

```
int num = (int)((Math.random()*100000)+1);
int palindrome = num;

System.out.println(num);

while (num > 0)
{

    palindrome = palindrome*10+num%10;
    num = num/10;
}

System.out.println("Palindrome: " + palindrome); 
```

有时它有效，例如，我得到数字 6540 和回文 65400456。但由于某种原因，在大多数情况下，我得到例如数字 94229 和回文 833057657。或者数字 82270 和回文 -362927364。

为什么会这样？这段代码有什么问题以及如何修复它？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T16:08:25.077

这是由于整数溢出。An`int`为 32 位宽，因此仅限于 和 之间的`-2,147,483,648`值`2,147,483,647`。

举`94229`个例子，`9422992249`模`(1<<32)`是`833057657`，这就是你得到的。

将 s更改`int`为`long`s，这将增加您的代码能够处理的数字范围（当然，范围将保持有限）。

如果您需要更进一步，[`BigInteger`](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html)（或字符串）可能是答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T16:08:36.293

您正在溢出，数字大于 2^31-1，这是整数的限制。尝试使用 long 代替。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T16:12:35.260

是的，它不会工作。由于 int 数据类型是 32 位有符号二进制补码整数。它的最小值为 -2,147,483,648，最大值为 2,147,483,647（含）。对于整数值，此数据类型通常是默认选择，除非有理由（如上述）选择其他类型。这种数据类型很可能对于您的程序将使用的数字足够大，但如果您需要更广泛的值，请改用 long。

## 范围限制：

```
int -->    -2,147,483,648 to 2,147,483,647 
long -->   -9,223,372,036,854,775,808 to 9,223,372,036,854,775,807 
```

# python - 在python中将提取的文件刷新到磁盘

> ID：10767809
> 
> 赞同：-1
> 
> 时间：2012-05-26T16:06:17.610
> 
> 标签：python

这是我的代码：

```
 x=zipfile.ZipFile('C://X/malware.zip')
    for i in range(1):        
        x.extractall('C://E',pwd='infected')
        start=time.clock()
        print str(start)
        while flag==1:
            if os.path.exists('C://E/malware.exe')==True:
                flag=1
            else:
                flag=0

    finish=time.clock()
    print str(finish)
    elapsed=finish-start
    print "the time elapsed is " + str(elapsed)+"seconds" 
```

我需要将提取直接写入磁盘,,,如何刷新正在提取的文件,,,???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:16:31.310

您似乎在认为您需要等待解压缩 zip 文件的信念下工作。这不是 Python 的工作方式。当你`x.extractall()`完成时，它就完成了。该文件已被提取并关闭，因此它已被刷新到磁盘。

此外，即使您确实需要等待，这：

```
 while flag==1:
    if os.path.exists('C://E/malware.exe')==True:
       flag=1
    else:
       flag=0 
```

在很多方面都是错误的，我什至不知道从哪里开始。但最好写成：

```
while not os.path.exists('C://E/malware.exe'):
    time.sleep(0.01)   # don't use all the CPU by checking constantly! 
```

# api - Digg 的流媒体 API 是如何工作的？

> ID：10767812
> 
> 赞同：0
> 
> 时间：2012-05-26T16:06:27.300
> 
> 标签：api, streaming, long-polling, digg, server-sent-events

我真的很喜欢这个：[http ://services.digg.com/2.0/stream](http://services.digg.com/2.0/stream)

使用单个连接连续接收数据，内容类型为 application/json。此外，它可以由浏览器使用。这是如何实施的？环顾[四周](http://www.html5rocks.com/en/tutorials/eventsource/basics/)，它似乎不是长轮询、HTML5 服务器发送的事件，甚至不是 websockets。

我将如何构建这样的东西？是否有任何开源解决方案可以用作起点？

谢谢，

/大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T13:22:20.830

它只是使用分块传输编码传输的字节流。基本上它只是 HTTP 分块流。

由于您提到了服务器发送的事件，您可以将其视为没有特殊格式的 SSE。消息是由换行符分隔的 JSON 对象。在服务器上，您可以像实现 SSE 减格式一样实现这一点。

此类 API 的客户端需要能够解析此类数据流并在换行符上拆分消息。一些浏览器支持on the ，它`readyState`为每个块调用，从而允许您处理流数据。`4``XMLHttpRequest`

# javascript - 删除最后一次出现字符之前的所有内容

> ID：10767815
> 
> 赞同：79
> 
> 时间：2012-05-26T16:07:19.273
> 
> 标签：javascript

我正在尝试对字符串执行以下操作：

*   查找字符的最后一次出现`"/"`；
*   删除该字符之前的所有内容；
*   返回字符串的剩余部分；

更明确地说，假设我有以下字符串：

```
var string = "/Roland/index.php"; // Which is a result of window.location.pathname 
```

现在我需要从中提取除实际页面之外的所有内容，如下所示：

```
var result = "index.php" // Which is what I need to be returned 
```

当然，这只是一个例子，因为显然我会有不同的页面，但同样的原则适用。

我想知道是否有人可以帮助我解决它。我尝试了接下来的操作，但没有成功：

```
var location = window.location.pathname;
var result = location.substring(location.lastIndexOf["/"]); 
```

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-05-26T16:10:10.583

您有正确的想法，只需用括号替换括号即可。

```
var string = "/Roland/index.php";
var result = string.substring(string.lastIndexOf("/") + 1); 
```

这是[jsfiddle中的一个示例，这里是](https://jsfiddle.net/ompr5f3w/)[Mozilla Developer Network](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/lastIndexOf)上 .lastIndexOf() 方法的解释。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-26T16:10:34.390

我个人会使用正则表达式：

```
var result = string.replace(/^.*\/(.*)$/, "$1"); 
```

如果您熟悉正则表达式（如果不熟悉，您应该熟悉 :-)，那么它就不会像不熟悉时那样陌生。

前导`^`强制此正则表达式将匹配“锚定”在字符串的开头。`\/`匹配单个`/`字符（这是`\`为了`/`避免混淆正则表达式解析器）。然后`(.*)$`匹配从`/`字符串到结尾的所有内容。首字母`.*`将尽可能多地吞噬，包括`/`最后一个之前的字符。替换文本 ,`"$1"`是一种特殊形式，表示“第一个匹配组的内容”。这个正则表达式有一个组，由最后一个`.*`(in `(.*)$`) 周围的括号组成。这将是最后一次之后的所有内容`/`，所以总体结果是整个字符串被替换为那些东西。`/`（如果由于没有任何字符而导致模式不匹配，则不会发生任何事情。）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-26T16:09:51.930

将字符串拆分为一个数组`/`，`.pop()`上下一个元素。请注意，如果有斜杠，您首先需要去掉斜杠。

```
var locationstring = window.location.pathname;
// replace() the trailing / with nothing, split on the remaining /, and pop off the last one
console.log(locationstring.replace(/\/$/, "").split('/').pop()); 
```

如果在 URL 的情况下，如果`/path/stuff/here/`您有尾随`/`，如果这种情况应该返回一个空字符串而不是`here`，请修改上述内容以`.replace()`从调用链中删除 。我假设您会想要最后一个组件，而不管尾部斜杠如何，但可能错误地假设了。

```
console.log(locationstring.split('/').pop()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-26T16:17:11.670

```
 var result = /\/([^\/]*)$/.exec(location)[1];

//"remove-everything-before-the-last-occurrence-of-a-character#10767835" 
```

注意：`location`这里是`window.location`，而不是你的`var location`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-12-13T04:54:17.820

```
var string = "/Roland/index.php";
var result = string.substring(0, string.lastIndexOf("/") + 0); 
```

# jquery - 跨页面链接 jQuery datepicker 和 FullCalendar

> ID：10767817
> 
> 赞同：0
> 
> 时间：2012-05-26T16:07:48.443
> 
> 标签：jquery, jquery-ui, fullcalendar, jquery-ui-datepicker

我在我的网站主页上设置了一个 ui 日期选择器和一个单独的事件页面，其中包含我的 FullCalendar 充满事件。我的问题：是否可以单击日期选择器日期并将您链接到活动页面并在 FullCalendar 上显示选定的日期视图？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:15:09.423

当然有可能。

使用托管日期选择器的`change()`函数`<input>`来读取选定的值并使用日期作为查询字符串参数导航到目标页面。

### 编辑

如果日期选择器未绑定到事件，则可以使用`<input>`该事件。`onSelect`

```
$(function() {
  $("#datepicker").datepicker({
    onSelect: function(dateText) {
      window.location = "http://example.com/events?date=" + dateText;
    }
  });
}); 
```

# c# - 尝试传递 IEnumerable 对象时出现 System.ServiceModel.CommunicationException 错误

> ID：10767818
> 
> 赞同：0
> 
> 时间：2012-05-26T16:07:55.483
> 
> 标签：c#, wcf

我正在制作一个小型 WCF 客户端服务器应用程序，用户可以在其中发送消息并检查他们的收件箱。我有一个自定义`Message`类，其中包含以下字段：`message_to`, `message_from`, `message_text`, `message_time`.

因为我需要在客户端 UI 上显示消息，所以我将一个 IEnumerable`Messages`对象返回给客户端。我将 Message 类指定为 a ，`DataContract`将字段`message_from`,指定为 a 。`message_text``message_time``DataMember`

尝试从客户端访问消息时，出现以下错误：

```
System.ServiceModel.CommunicationException: An error occurred while receiving the HTTP response to http://localhost:9002/vService/CheckService. 
```

[这是完整异常的粘贴。](http://pastebin.com/zFR82CNW)

客户端的服务代理是

```
[ServiceContract]
public interface ICheckService
{
    [OperationContract]
    IEnumerable<Message> CheckInbox(string user); 
```

我已启用日志记录和跟踪，但日志中没有任何内容。这是[web.config](http://pastebin.com/msw00nx3)

留言类：

```
[DataContract]
public class Message
{
    public int Message_Id;
    [DataMember]        
    public string Message_from;
    [DataMember]
    public DateTime Message_time;
    public string Message_to;
    [DataMember]
    public string Message_text;

    public Message()
    {
    }
} 
```

生成的代理类[reference.cs](http://pastebin.com/cj1Wrsq3)

SO上的很多人都收到了这个错误，不幸的是他们的解决方案都不适合我。我觉得我仍然缺少一些东西。

# windows-phone-7 - WP7 奇怪的东西可能来自 ControlToolkit 回复 引用 删除 编辑

> ID：10767820
> 
> 赞同：0
> 
> 时间：2012-05-26T16:08:27.283
> 
> 标签：windows-phone-7, controls, toolkit

我有一个项目正在我的办公室工作，复制到 Skydrive 并在我家继续。一切正常，直到我在办公室添加 WrapPanel。当我在家中打开项目时，应用程序在 System.Diagnostics.Debugger.Break(); 启动画面后停止在调试器中工作。当我构建应用程序时，我获得了成功，但程序没有在同一行运行和停止。我认为 WP7 控制工具包有些问题，因为当我打开一个没有任何工具包控制的表单时，一切正常。我尝试再次下载该工具包并在我的家用计算机中运行示例，我收到错误 Error 307 The call is ambiguous between the following methods or properties: 'Microsoft.Phone.Controls.CultureInfoExtensions.Weekdays(System.全球化.CultureInfo)'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:22:04.517

看起来您已经添加了两次，但每次都在查看磁盘上的不同位置。

我会检查项目中的引用，并确保您只列出了一次库，然后检查提示路径以查看它的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:25:42.443

我重新安装了所有东西，现在它可以工作了。我不能以不同的方式做到这一点

# php - 匹配两个数组

> ID：10767822
> 
> 赞同：1
> 
> 时间：2012-05-26T16:09:11.043
> 
> 标签：php, arrays

第一个数组是

```
$first = Array(0=>orange; 1=>apple; 2=>grapes) 
```

第二个数组很复杂

```
Array
(
    [0] => Array
        (
            [fruits] => Array
                (
                    [0] => Array
                        (
                            [0] =>orange
                            [1] => apple
                        )

                    [1] => grapes
                )

            [price] => 69.0   )

    [1] => Array
        (
            [fruits] => Array
                (
                    [0] =>orange
                    [1] => grape
                )

            [price] => 40
        )

} 
```

第二个数组是从先前的数组搜索中生成的。values 之前处于循环中。匹配数组是否可行。如果是这样，请想想。尝试了几种选择，但没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:18:31.683

```
function findMatches( $query, $arrayOfArrays) {

  $ret = array();
  foreach( $arrayOfArrays as $array) {
    if( matches( $array, $query) ) {
      $ret[] = $array;
    }
  }
  return $ret;
}

function matches( $array, $query) {
  foreach( $query as $key => $value) {
    if( !isset( $array[$key]) || $array[$key] != $value) {
      return false;
    }
  }
  return true;
}

$isMatching = findMatches($needleArray, $hayStackArray); 
```

# javascript - javascript iframe 内容加载问题？

> ID：10767826
> 
> 赞同：0
> 
> 时间：2012-05-26T16:09:24.930
> 
> 标签：javascript, jquery

我的网站上有一个`Iframe`。我将其初始化`src`为`document.ready event`. 我放置`iframe`在`jquery UI`对话框内，现在每次打开对话框时，Iframe 都会加载其内容，但我希望这个加载过程只发生一次`document.ready`。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:17:38.147

是的，您可以使用 XmlHttpRequest 获取一次内容，将其存储到本地变量中，并在打开对话框时重用此变量。

```
var myReusableContent;

$(window).ready(function() {
    var httpRequest = new XMLHttpRequest();
    httpRequest.onreadystatechange = function() {
        if (httpRequest.readyState === 4) {
            if (httpRequest.status === 200) {
                myReusableContent = httpRequest.responseText;
            }
        }
    };
    httpRequest.open('GET', muurl);
    httpRequest.send();
}); 
```

当您需要填充 iframe 时，只需执行

```
$('myIframe').html(myReusableContent); 
```

# c - C 在进程执行结束时关闭两个管道

> ID：10767830
> 
> 赞同：1
> 
> 时间：2012-05-26T16:09:33.157
> 
> 标签：c, pipe

我用C做了一个程序，父亲和孩子沟通，孩子分别通过2个管道和父亲沟通。

它工作完美。

父亲关闭一个管道的读取端，同时关闭另一个管道的写入端。儿子也是如此，只需更改每个管道中要关闭的内容。

理论问题是：

当所有的孩子都执行完，父亲即将成功退出时，我应该关闭type的另外两个边吗？

真的有必要吗？为什么？我只是想更好地了解程序的整个结构。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:44:15.437

当您退出程序时，任何打开的文件都会`close`自动被删除。你当然可以显式关闭它，如果你想做任何特殊的错误处理，你应该显式关闭它，这样你就可以检查`close()`.

您可能知道，`close()`如果磁盘已满并且还有尚未`flush`编辑的数据，则会返回错误。

# c# - 将列表 linq 表达式转换为定义的列表类

> ID：10767831
> 
> 赞同：1
> 
> 时间：2012-05-26T16:09:38.673
> 
> 标签：c#, .net, vb.net, linq, lambda

你有这门课

```
Private Class MyClass
    Public Property propertyOne() as String
    Public Property propertyTwo() as String
    Public Property propertyN() as Integer
End Class 
```

现在我想从 lambda 或 linq 表达式中填充 MyClass 的列表，有些像这样......

```
 Dim myClassList as new List(Of MyClass)
    myClassList = (From lOtherList1 in MyOtherList1.GetAll()
                   join lOtherList2 in MyOterhList2.GetAll() on lOtherList1.Id Equals lOtherList2.Id
                   Select myClassList.Add(new MyClass With { .propertyOne = lOtherList1.Field1, 
                  .propertyTwo = lOtherList1.Field2,
                  .propertyN = lOtherList2.Field1 })).Tolist() 
```

但我收到此错误“表达式不产生值”，我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:12:10.033

`myClassList.Add`在您的查询中是错误的部分，请按如下方式进行编辑：

```
Dim myClassList as new List(Of MyClass)
myClassList = (From lOtherList1 in MyOtherList1.GetAll()
               join lOtherList2 in MyOterhList2.GetAll() 
               on lOtherList1.Id Equals lOtherList2.Id
               Select new MyClass With 
               { 
               .propertyOne = lOtherList1.Field1, 
               .propertyTwo = lOtherList1.Field2,
               .propertyN = lOtherList2.Field1 
               })).Tolist() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:12:36.523

您将执行以下操作：

```
myClassList = (From lOtherList1 in MyOtherList1.GetAll()
               Join lOtherList2 in MyOtherList2.GetAll()
               On lOtherList1.Id Equals lOtherList2.Id
               Select new MyClass With
               {
                   .propertyOne = lOtherList1.Field1,
                   .propertyTwo = lOtherList1.Field2,
                   .propertyN = lOtherList2.Field1
               }).ToList() 
```

你几乎有正确的代码。您只需要删除对`myClassList.Add()`.

# javascript - CSS / JS / jQuery - 不同大小的浮动图像

> ID：10767842
> 
> 赞同：0
> 
> 时间：2012-05-26T16:11:27.427
> 
> 标签：javascript, jquery, css, grid-layout

我需要以浮动方式显示图像 - 但它们有 2 种尺寸，较大的有 4 种较小的尺寸，这是一个视觉示例：

[http://minus.com/lbfCTUyQj0BHcf](http://minus.com/lbfCTUyQj0BHcf)

我继续使用[Masonry](http://masonry.desandro.com/index.html)，这是另一个 SO question 中建议的一个很酷的插件，但我只花了这么长时间：

[http://minus.com/mkF3uSMEo/](http://minus.com/mkF3uSMeo/)

如您所见，仍有空白空间。

任何想法如何去做？任何解决方案都有帮助，无论是 css、js、jquery - 甚至是其他一些库（我认为我可以将解决方案调整为 jquery）。

目标是没有空白空间，但所有东西都被填满 - 布局应该保持流动/液体。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:24:13.327

鉴于以下 html 结构（您可能会通过 jquery 添加类），那么以下 css 似乎可以很好地实现您想要的效果（[参见 fiddle](http://jsfiddle.net/yMm4y/3/)；目前仅在 IE7-9 中测试）：

**HTML**

```
<img class="half top" />
<img class="half" />
<img class="full" /> 
```

**CSS**

```
.half,
.full {
    float: left;    
    margin: 0 10px 10px 0;
}

.half {
    width: 40px;
    height: 60px;
}

.full {
    width: 90px;
    height: 130px;
}

.half.top + .half {
    margin-left: -50px;
    margin-top: 70px;
} 
```

# php - 当我想用 php 和 mysql 回显一个变量时，资源 id #10

> ID：10767843
> 
> 赞同：1
> 
> 时间：2012-05-26T16:11:37.900
> 
> 标签：php, mysql

在我的数据库中，我有用户：1234，高分：222

所以我想像这样获取他的数据（我只需要检查 1 个用户，我只需要它存在的高分）：

```
$highscore =
    mysql_query("SELECT highscore FROM mydatabase WHERE userID = 1234"); 
```

现在可能会删除此用户，因此我想使用 num_rows 进行检查。如果用户不再存在，设置`$highscore = 1;`（因为我们在其他地方需要这个变量）：

```
if (mysql_num_rows($highscore) == 0) {
    $highscore = 1;
} 
```

现在回显结果如下：

```
echo '<div id="uhs">'. $highscore .'</div>'; 
```

然而结果是：`Resource id #10`

当然做了一些研究，我认为问题在于我的第一个查询，但我似乎无法解决它......

如何获得 222 回声？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T16:14:39.253

您正在尝试打印刚刚运行的查询的资源 ID。要获得实际结果，您必须明确要求：

```
$result = mysql_query("SELECT highscore FROM mydatabase WHERE userID = 1234");
if (mysql_num_rows($result)) {
    $score = mysql_fetch_assoc($result);
    echo $score['highscore'];
}
else {
    echo 1;
} 
```

# firefox - 该按钮未出现在 Firefox 12 中

> ID：10767847
> 
> 赞同：-1
> 
> 时间：2012-05-26T16:11:50.097
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我创建了这个简单的按钮，但它没有出现在 Firefox 12 中：

```
 <toolbarpalette id="BrowserToolbarPalette">

      <toolbarbutton id="ok-nav"
                     class="toolbarbutton-1 chromeclass-toolbar-additional"
                     label="&okok;"
                     tooltiptext="&okok;">
      </toolbarbutton>

  </toolbarpalette> 
```

为什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:18:22.980

`<toolbarbutton>`是一个自我结束的元素；您不需要结束标记，与`<input>`HTML 中的普通元素一样。我不确定这是否是导致问题的原因，但这是您最好的选择。

# java - Android：打开 listView 活动

> ID：10767848
> 
> 赞同：0
> 
> 时间：2012-05-26T16:11:52.207
> 
> 标签：java, android, android-listview

我尝试使用谷歌搜索和 Android 开发资源中发现的不同方式打开我的 listView 活动。每次它都不起作用并给我错误。

当我单击主要活动中的按钮时，我正在尝试使用列表打开一个新活动。

我今天刚开始用 Android 编程，所以详细的解释会对我有很大帮助。

我想我已经将问题定位在 JokesActivity.java（下）中的某个地方如果我需要从我的程序中发布更多文件，请发表评论，我会发布它们。

笑话活动：

```
public class JokesActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ListView listView = (ListView) findViewById(R.id.mylist);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, android.R.id.text1, CATEGORIES);

        listView.setAdapter(adapter);
    }

    String[] CATEGORIES = new String[] {
            "Blonde", "Chuck Norris"
    };
} 
```

日志猫：

```
05-26 11:19:51.236: D/AndroidRuntime(12173): Shutting down VM
05-26 11:19:51.236: W/dalvikvm(12173): threadid=1: thread exiting with uncaught exception (group=0x40018560)
05-26 11:19:51.236: E/AndroidRuntime(12173): FATAL EXCEPTION: main
05-26 11:19:51.236: E/AndroidRuntime(12173): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.lulzone/com.lulzone.JokesActivity}: java.lang.NullPointerException
05-26 11:19:51.236: E/AndroidRuntime(12173):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1696)
05-26 11:19:51.236: E/AndroidRuntime(12173):    at   android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1716)
05-26 11:19:51.236: E/AndroidRuntime(12173):    at android.app.ActivityThread.access$1500(ActivityThread.java:124)
05-26 11:19:51.236: E/AndroidRuntime(12173):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:968)
05-26 11:19:51.236: E/AndroidRuntime(12173):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-26 11:19:51.236: E/AndroidRuntime(12173):    at android.os.Looper.loop(Looper.java:130)
05-26 11:19:51.236: E/AndroidRuntime(12173):    at android.app.ActivityThread.main(ActivityThread.java:3806)
05-26 11:19:51.236: E/AndroidRuntime(12173):    at java.lang.reflect.Method.invokeNative(Native Method)
05-26 11:19:51.236: E/AndroidRuntime(12173):    at java.lang.reflect.Method.invoke(Method.java:507)
05-26 11:19:51.236: E/AndroidRuntime(12173):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-26 11:19:51.236: E/AndroidRuntime(12173):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-26 11:19:51.236: E/AndroidRuntime(12173):    at dalvik.system.NativeStart.main(Native Method)
05-26 11:19:51.236: E/AndroidRuntime(12173): Caused by: java.lang.NullPointerException
05-26 11:19:51.236: E/AndroidRuntime(12173):    at com.lulzone.JokesActivity.onCreate(JokesActivity.java:19)
05-26 11:19:51.236: E/AndroidRuntime(12173):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-26 11:19:51.236: E/AndroidRuntime(12173):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1660)
05-26 11:19:51.236: E/AndroidRuntime(12173):    ... 11 more 
```

list_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/mylist"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_weight="1.00"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1.00"
        android:text="@string/button_jokes" 
        android:onClick="openJokes"/>

    <Button
        android:id="@+id/button2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1.00"
        android:text="@string/button_facts" />

</LinearLayout>

<LinearLayout
    android:layout_weight="1.00"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1.00"
        android:text="@string/button_quotes" />

    <Button
        android:id="@+id/button4"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1.00"
        android:text="@string/button_more" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:14:45.537

你应该添加`setContentView(R.layout.main) first`

```
 setContentView(R.layout.main);
 ListView listView = (ListView) findViewById(R.id.mylist); 
```

**更新**

将列表视图放入 main.xml

```
 <ListView
        android:id="@+id/mylist"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </ListView> 
```

# java - 我是否应该允许实现有可能破坏 API 的类，如果不这样做可能会导致不利影响

> ID：10767849
> 
> 赞同：2
> 
> 时间：2012-05-26T16:11:55.557
> 
> 标签：java, concurrency, api-design

我正在使用支持 ScheduledExecutorService 为调度程序开发 API。基本设计，是你向调度器注册一个 Provider 实例，调度器为每个注册的 Provider 维护 ScheduledFuture。Provider 本质上是一个 Runnable，它知道如何检索触发任务。

我遇到的问题是取消预定的未来时该怎么办。取消 ScheduledFuture 的 API 采用布尔参数，允许中断正在触发的 Provider。我认为在 Provider 被杀死时提醒它以及该参数的值是有意义的，因此它可以进行任何必要的清理。

但是，如果您在取消其 ScheduledFuture 之前警告 Provider 实例它正在被杀死，则 Provider 实例可能会通过阻塞来破坏 API，直到它完成执行，而不管该参数的值如何。

另一方面，如果在该值设置为 true 的情况下调用 cancel 并且 ScheduledFuture 在让 Provider 实例知道它被杀死之前被取消，它可能会失去对其执行任何操作的机会。

**注意：**由于项目的要求，我不能使用 Quartz。否则我只会使用它。请不要回复告诉我使用替代框架，因为我的问题是关于 API 设计的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T14:27:57.123

从技术上讲，这不是 SPI 而不是 API 吗？我认为我们可以期待更多的实施者，所以我会通知他们关闭。作为对冲，我还会确保默认情况下通知不执行任何操作。如果您使用侦听器，请不要自动为此事件注册提供程序。如果您总是调用某个方法，请提供一个对该调用不执行任何操作的抽象基类。

这是我期待更多 SPI 实施者的理由：

如果我想安排一个任务，我会使用 ScheduledExecutor API。作为一名应用程序程序员，我有一个我想要满足的用例，并且我尽量不关心它是如何完成的内部工作原理。因此，我认为 API 通常应该非常防御性地编码。

Provider 显然是一个 SPI。类名“Provider”是一个很大的提示。它确切地知道如何使用它，并且都是关于低级细节的。我正在专门实现它，因为默认实现没有做我想要的。我想要最大程度的灵活性，即使我付出了更多的努力。不应期望应用程序程序员编写一个。不过，他们可能会选择一种实现而不是另一种。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:26:34.930

也许我在这里有误解，但你不是想太多了吗？

如果您想取消将来要运行的任务，因此提供者还没有开始执行工作，为什么需要清理任何东西？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T16:38:17.263

我强烈推荐使用[Quartz-Scheduler](http://quartz-scheduler.org/)而不是自己编写这种服务。它支持[取消计划的作业](http://quartz-scheduler.org/api/2.1.0/org/quartz/Scheduler.html#unscheduleJob%28org.quartz.TriggerKey%29)（以及许多其他事情）。

# java - 如何设置直方图 JFreeChart YAxis 最大值？

> ID：10767853
> 
> 赞同：0
> 
> 时间：2012-05-26T16:12:20.000
> 
> 标签：java, jfreechart

这是我的第一个问题，所以也许这是一个愚蠢的问题。我有一个直方图来计算灰度图像像素值。像这样的东西：

```
HistogramDataset dataset = new HistogramDataset();
dataset.setType(HistogramType.FREQUENCY);
dataset.addSeries("", values, 256, 0.0, 256.0); 
```

但是直方图没有像我预期的那样显示，因为我的值是从 0 到 22400，直方图如何知道哪个 bean 具有哪个值？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T16:42:20.053

单击[`addSeries()`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/data/statistics/HistogramDataset.html#addSeries%28java.lang.Comparable,%20double%5B%5D,%20int,%20double,%20double%29)显示相应[源代码](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/data/statistics/HistogramDataset.html#line.141)的链接，以查看您是如何在请求的in`values`中分配的。`bins``binList`

# java - 是否可以在java中比较两个不同的类？

> ID：10767854
> 
> 赞同：0
> 
> 时间：2012-05-26T16:12:25.570
> 
> 标签：java

我有两个类 Class1 和 Class2，Class1 obj；类 2 obj1; 如何比较 obj 是 Class2 的实例？我无法对这些类使用 instanceOf 运算符，它给出编译错误“无法比较不兼容的类型”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:15:01.890

如果它在编译时失败，您可以确定它在运行时总是会失败。编译器不允许您使用`instanceof`两种类型，其中第一种类型不能是第二种类型的实例。例如：

```
Integer i = 5;
if (i instanceof String) {
    System.out.println("Never happen");              
} 
```

编译器明确知道 Integer 永远不可能是 String，因为它们不在同一个继承层次结构中。因此它甚至不会让你写它。如果你还是想写它，那么你的设计和/或你的逻辑有问题。

话虽如此，[Class.isAssignableFrom()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#isAssignableFrom%28java.lang.Class%29)是检查只能在运行时失败的继承层次结构的另一种方法：

```
Integer i = 5;
if (String.class.isAssignableFrom(i.getClass())) {
    System.out.println("Never happen");
} 
```

值得重申的是，虽然上面会成功编译，但条件仍然永远不会为真。只有当它们处于相同的继承层次结构中时，比较类型才有意义。例如，这是一个明智的比较：

```
Number n = 1;
if (n instanceof Integer) {
    System.out.println("I'm an int!");
} else if (n instanceof Long) {
    System.out.println("I'm a long!");
} 
```

但是，如果您想编写这样的代码，那几乎总是意味着您已经破坏了代码中的多态性，因为这正是它应该处理的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:26:21.823

这不会编译：

```
String s = "42";
if (s instanceof Integer) {
    ....
} 
```

但这将：

```
String s = "42";
Object o = s;
if (o instanceof Integer) {
    ....
} 
```

要理解的是编译器在进行静态类型检查时使用了表达式的声明类型。在第一种情况下，`s`has type`String`和 a`String`永远不可能是 a `Integer`。在第二种情况下，`o`具有类型`Object`和可分配给的东西`Object` *可能*是`Integer`. （当然，第二个示例中的测试将始终评估为`false`... 因为`o`引用的实际实例不是实例`Integer`或子类型。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T17:35:37.267

对不起，但如果我没记错的话，你拼写和写错了这个词..

它的 instanceof ，而不是 instanceOf

# ruby-on-rails - 覆盖模型属性读取器不会影响 simple_form 输入字段

> ID：10767859
> 
> 赞同：10
> 
> 时间：2012-05-26T16:13:08.973
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用 simple_form 并希望覆盖模型属性的阅读器。

因此以下不起作用

```
class C < ActiveRecord::Base

  # it has attribute named pack

  def pack
    "Some value"
  end

end 
```

鉴于有以下代码

```
<%= simple_form_for @c do |f| %>
  <%= f.input :pack %>
<% end %> 
```

因此它应该显示输入框的表单，输入框的值为“某些值”，但它是空白的。为什么不使用 simple_form 覆盖？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-26T22:50:32.790

我想通了，我的评论基本上是正确的，`simple_form`依赖于 Rails 表单助手，它用于`read_attribute`从 ActiveRecord 对象中获取值，从而读取数据库中的值而不使用您的方法。耦合持久性/域/表示的症状。解决方法是：

```
 <%= f.input :pack, :input_html => { :value => @c.pack } %>
 # or
 <%= f.input :pack, :input_html => { :value => f.object.pack } %> 
```

或者，如果您希望这是默认行为，您可以在以下基础上创建自己的表单构建器`simple_for`：

```
# lib/my_form_builder.rb **

class MyFormBuilder < SimpleForm::FormBuilder                                                                                               
  def input(attribute_name, options={}, &block)                                 
    options[:input_html] ||= {}                                                 
    options[:input_html][:value] = object.send(attribute_name)                  
    super(attribute_name, options, &block)                                                          
  end
end 
```

并以您的形式：

```
<%= simple_form_for @c, :builder => MyFormBuilder do |f| %>
  <%= f.input :pack %>
<% end %> 
```

** 在 Rails 3 中，我认为`lib`默认情况下不会将其添加到加载路径中，因此您可能需要添加它并重新启动应用程序*或*将其放入`app/models`（免责声明不是一个好主意，lib 更好）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-27T06:38:42.010

至少在 Rails 3.2 中，它不再直接使用 read_attribute。但是，如果您使用的是文本字段，它会使用[InstanceTag.value_before_type_cast](https://github.com/rails/rails/blob/488699166c3558963fa82d4689a35f8c3fd93f47/actionpack/lib/action_view/helpers/form_helper.rb#L1155)来检索值。这使用：

```
object.respond_to?(method_name + "_before_type_cast") ?
  object.send(method_name + "_before_type_cast") :
  object.send(method_name) 
```

（其中 method_name 是该上下文中的属性名称）

因此，如果您想确保表单使用您的属性访问器，请添加以下别名：

```
 alias pack_before_type_cast pack 
```

这对我有用，只要确保在那里返回一个字符串......

# sql - SQL - 获取 Where 条件的第一个匹配项 - MS Access

> ID：10767860
> 
> 赞同：0
> 
> 时间：2012-05-26T16:13:17.663
> 
> 标签：sql, ms-access

我有一个看起来像这样的销售数据集

```
Product  sold.date
apple    01/jan/2012
banana   01/feb/2012
orange   01/mar/2012 
```

在同一时期将有活动，即

```
Campaign name      start           end
campaign1        01/jan/2012     15/feb/2012
campaign2        01/feb/2012     01/mar/2012 
```

在 SQL 中，如何仅获得 1 个销售产品的广告系列？也就是说，香蕉在活动 1 或活动 2 中销售，不计为销售两次。

销售依赖于哪个广告系列并不重要。会有多行销售重叠超过 1 个广告系列。

任何帮助都会很棒...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:19:06.007

### 为 1 个产品获得 1 个广告系列

您没有命名您的 RDBMS。在**PostgreSQL**或**MySQL**中，您可以使用`LIMIT 1`.

```
SELECT p.Product, c.Camgaign
FROM   p
LEFT   JOIN c ON p.sold_date BETWEEN c.start AND c.end
WHERE  p.Product = 'banana'
-- ORDER BY <something>
LIMIT  1; 
```

`LEFT [OUTER] JOIN`即使没有匹配的广告系列，我也会返回“香蕉”行。竞选就是`NULL`在这种情况下。

用于通过一些可用的标准`ORDER BY`来*选择*一个活动，而不是仅仅获得一个符合条件的任意一个。

在**MS SQL**中，您将使用`SELECT TOP n`.
在**甲骨文** `WHERE rownum <= 1`中；

* * *

### 为所有产品获取 1 个广告系列

```
WITH x AS (
    SELECT p.Product, c.Camgaign
          ,row_number() OVER (PARTITION BY p.Product) AS rn
    FROM   p
    LEFT   JOIN c ON p.sold_date BETWEEN c.start AND c.end
    WHERE  p.Product = 'banana'
    )
SELECT Product, Camgaign
FROM   x
WHERE  rn = 1
   OR  rn IS NULL;  -- to include prod. without campaign 
```

**在PostgreSQL**中测试，在**MS SQL Server**或**Oracle**中工作。
不适用于既不支持 CTE 也不支持窗口函数的**MySQL 。**

# c# - 是否可以将页面设置为使用与代码中的元素之一相同的视图模型？

> ID：10767862
> 
> 赞同：1
> 
> 时间：2012-05-26T16:13:33.637
> 
> 标签：c#, windows-phone-7, mvvm-light

我正在尝试使用 MVVM Light Framework 在我的 Windows Phone 应用程序中创建一个页面，该页面将动态加载多个 UserControl 之一作为其主要 UI 元素。UserControl 被加载并插入到页面的代码隐藏文件中。

```
public partial class HomePage
{
    private readonly UserControl _caseBrowser;

    public HomePage()
    {
        InitializeComponent();

        _caseBrowser = new StandardCaseBrowserControl { IsEnabled = true };
        DataContext = ((FBViewModelLocator)Application.Current.Resources["Locator"]).StandardCasesViewModel;
    }

    protected override void OnLoaded(object sender, RoutedEventArgs e)
    {
        base.OnLoaded(sender, e);

        // add a case browser to the content panel
        ContentPanel.Children.Add(_caseBrowser);

        // more stuff that is beyond the scope of this question
    }
} 
```

每个 UserControl 还绑定到 xaml 中它们自己的 ViewModel。我试图让页面本身绑定到与正在加载的 UserControl 相同的 ViewModel。

我尝试简单地分配 DataContext：

```
 _caseBrowser = new StandardCaseBrowserControl { IsEnabled = true }; // the usercontrol
        DataContext = _caseBrowser.DataContext; 
```

但那是空的。

我还尝试绑定到 ViewModelLocator 提供的静态 ViewModel：

```
 _caseBrowser = new StandardCaseBrowserControl { IsEnabled = true };
        DataContext = FBViewModelLocator.StandardCasesViewModelStatic; 
```

但这会创建视图模型的新实例，因此页面和用户控件正在处理视图模型的两个单独实例。

我还尝试在应用程序资源中使用 viewmodelocator 的实例：

```
 _caseBrowser = new StandardCaseBrowserControl { IsEnabled = true };
        DataContext = ((FBViewModelLocator)Application.Current.Resources["Locator"]).StandardCasesViewModel; 
```

同样的事情也发生了。

有谁知道是否有这样做的好方法，或者我是否应该放弃这个并找到不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:54:46.707

当您尝试将 _caseBrowser 的 DataContext 分配给页面的 DataContext 时，可能未设置它。我建议注册 _caseBrowser 的 DataContextChanged 事件并在 _caseBrowser 的 DataContext 更改时分配页面的 DataContext。就像是：

```
public HomePage()
{
    InitializeComponent();

    _caseBrowser = new StandardCaseBrowserControl { IsEnabled = true };
    _caseBrowser.DataContextChanged += _OnCaseBrowsesrDataContextChanged;
}

private void OnCaseBrowserDataContextChanged(object sender, DependencyPropertyChangedEventArgs e)
{
    if (_caseBrowser.DataContext != null)
        DataContext = _caseBrowser.DataContext;
} 
```

# opencv - 具有指定角度的 OpenCV RotatedRect

> ID：10767863
> 
> 赞同：7
> 
> 时间：2012-05-26T16:13:49.393
> 
> 标签：opencv, angle

我的情况是我有一个具有**一个**形状的小型二进制图像，我想围绕它找到最合适的旋转矩形（**不是**边界矩形）。我知道您对**cv::findContours()**找到的结果应用了**cv::minAreaRect(** ) ，但这在我的情况下产生的结果很差，因为数据很嘈杂（来自 MS Kinect，请参见示例图片由于输入数据（轮廓）略有不同而导致旋转发生变化）。我所做的是在我的二进制图像（对噪声不太敏感）上使用 PCA 计算主轴，这会产生角度“a”，现在我想在给定主轴角度的情况下围绕我的形状创建一个,**一个****![噪声敏感度](../Images/3fa360712491c208891509b25be60f78.png)`RotatedRect`**）。****

 ****我有一个插图，是用我精湛的绘画技巧制作的！ ![插图](../Images/3cbde0c28784ed8cd27e50470d0e40cd.png)

那么我的问题是：你们有解决这个问题的代码片段或具体建议吗？恐怕我必须做很多 Bresenham 迭代，希望有一个聪明的方法。

顺便说一句，对于那些不太熟悉 openCV 的 RotatedRect 数据结构的人：它由高度、宽度、角度和中心点定义，假设中心点实际上是在矩形的中心。

干杯!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T16:10:11.833

好的，我的解决方案： 方法：

1.  PCA，给出旋转矩形中心的角度和第一个近似值
2.  获取二进制形状的轮廓，将其旋转到垂直位置，获取 X 和 Y 坐标的最小值/最大值以获取边界矩形的宽度和高度
3.  从最大 X (Y) 中减去宽度（高度）的一半，得到“直立空间”中的中心点
4.  通过逆旋转矩阵将这个中心点旋转回来

    ```
    cv::RotatedRect Utilities::getBoundingRectPCA( cv::Mat& binaryImg ) {
    cv::RotatedRect result;

    //1\. convert to matrix that contains point coordinates as column vectors
    int count = cv::countNonZero(binaryImg);
    if (count == 0) {
        std::cout << "Utilities::getBoundingRectPCA() encountered 0 pixels in binary image!" << std::endl;
        return cv::RotatedRect();
    }

    cv::Mat data(2, count, CV_32FC1);
    int dataColumnIndex = 0;
    for (int row = 0; row < binaryImg.rows; row++) {
        for (int col = 0; col < binaryImg.cols; col++) {
            if (binaryImg.at<unsigned char>(row, col) != 0) {
                data.at<float>(0, dataColumnIndex) = (float) col; //x coordinate
                data.at<float>(1, dataColumnIndex) = (float) (binaryImg.rows - row); //y coordinate, such that y axis goes up
                ++dataColumnIndex;
            }
        }
    }

    //2\. perform PCA
    const int maxComponents = 1;
    cv::PCA pca(data, cv::Mat() /*mean*/, CV_PCA_DATA_AS_COL, maxComponents);
    //result is contained in pca.eigenvectors (as row vectors)
    //std::cout << pca.eigenvectors << std::endl;

    //3\. get angle of principal axis
    float dx = pca.eigenvectors.at<float>(0, 0);
    float dy = pca.eigenvectors.at<float>(0, 1);
    float angle = atan2f(dy, dx)  / (float)CV_PI*180.0f;

    //find the bounding rectangle with the given angle, by rotating the contour around the mean so that it is up-right
    //easily finding the bounding box then
    cv::Point2f center(pca.mean.at<float>(0,0), binaryImg.rows - pca.mean.at<float>(1,0));
    cv::Mat rotationMatrix = cv::getRotationMatrix2D(center, -angle, 1);
    cv::Mat rotationMatrixInverse = cv::getRotationMatrix2D(center, angle, 1);

    std::vector<std::vector<cv::Point> > contours;
    cv::findContours(binaryImg, contours, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE);
    if (contours.size() != 1) {
        std::cout << "Warning: found " << contours.size() << " contours in binaryImg (expected one)" << std::endl;
        return result;
    }

    //turn vector of points into matrix (with points as column vectors, with a 3rd row full of 1's, i.e. points are converted to extended coords)
    cv::Mat contourMat(3, contours[0].size(), CV_64FC1);
    double* row0 = contourMat.ptr<double>(0);
    double* row1 = contourMat.ptr<double>(1);
    double* row2 = contourMat.ptr<double>(2);
    for (int i = 0; i < (int) contours[0].size(); i++) {
        row0[i] = (double) (contours[0])[i].x;
        row1[i] = (double) (contours[0])[i].y;
        row2[i] = 1;
    }

    cv::Mat uprightContour = rotationMatrix*contourMat;

    //get min/max in order to determine width and height
    double minX, minY, maxX, maxY;
    cv::minMaxLoc(cv::Mat(uprightContour, cv::Rect(0, 0, contours[0].size(), 1)), &minX, &maxX); //get minimum/maximum of first row
    cv::minMaxLoc(cv::Mat(uprightContour, cv::Rect(0, 1, contours[0].size(), 1)), &minY, &maxY); //get minimum/maximum of second row

    int minXi = cvFloor(minX);
    int minYi = cvFloor(minY);
    int maxXi = cvCeil(maxX);
    int maxYi = cvCeil(maxY);

    //fill result
    result.angle = angle;
    result.size.width = (float) (maxXi - minXi);
    result.size.height = (float) (maxYi - minYi);

    //Find the correct center:
    cv::Mat correctCenterUpright(3, 1, CV_64FC1);
    correctCenterUpright.at<double>(0, 0) = maxX - result.size.width/2;
    correctCenterUpright.at<double>(1,0) = maxY - result.size.height/2;
    correctCenterUpright.at<double>(2,0) = 1;
    cv::Mat correctCenterMat = rotationMatrixInverse*correctCenterUpright;
    cv::Point correctCenter = cv::Point(cvRound(correctCenterMat.at<double>(0,0)), cvRound(correctCenterMat.at<double>(1,0)));

    result.center = correctCenter;

    return result; 
    ```

    }

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T18:16:49.583

如果正确理解问题，您说的是使用方法，并且由于输入数据噪声`findContours`而`minAreaRect`遭受抖动/摆动。PCA 对这种噪音的抵抗力并不强，所以我不明白为什么你认为以这种方式找到模式的方向不会像你当前的代码那么糟糕。

如果您需要时间平滑度，一个常用且简单的解决方案是使用过滤器，即使是非常简单的过滤器（如[alpha-beta 过滤器](http://en.wikipedia.org/wiki/Alpha_beta_filter)）也可能为您提供所需的平滑度。说在帧`n`你估计旋转矩形的参数`A`，在帧`n+1`你有估计参数的矩形`B`。而不是用`B`你找到`C`介于`A`and之间`B`的矩形来绘制矩形，然后用`C`in frame绘制一个矩形`n+1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-02T18:32:17.087

这是另一种方法（只是猜测）

主成分分析的维基百科页面说：

> PCA 可以被认为是为数据拟合一个 n 维椭球......

由于您的数据是 2D 的，您可以使用该`cv::fitEllipse`函数将椭圆拟合到您的数据中，并使用生成的坐标`RotatedRect`来计算角度。与 相比，这提供了更好的结果`cv::minAreaRect`。****

# android - Android 检索主题属性

> ID：10767864
> 
> 赞同：2
> 
> 时间：2012-05-26T16:13:51.873
> 
> 标签：android, attributes, background, themes, selector

我有自定义主题：

```
<style name="SomeTheme" parent="android:Theme">
  <item name="android:listSelector">@drawable/some_selector</item>
</style> 
```

现在我正在通过代码动态创建 LinearLayout，并且我想将它的背景设置为 android:listSelector 的值。我该如何找回它？我试过玩`getTheme().resolveAttribute()`，但不幸的是 - 没有成功。

*注意：这只是简化的示例。我必须通过代码来完成，在 xml 布局中使用`?android:listSelector`as`android:background`并不能解决问题。*

# android - 如何获取文件缩略图android

> ID：10767869
> 
> 赞同：0
> 
> 时间：2012-05-26T16:14:30.220
> 
> 标签：android

我想在android中获取文件缩略图，如APK文件或图像文件，我怎样才能找到每个缩略图，我的意思是APK图标的图像或相机图像的缩略图......

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:25:27.907

参考这个[链接](http://asmncl.blogspot.in/2012/04/android-get-list-all-installed.html)

```
private ArrayList<String> getInstalledApps(Context context){

    ArrayList<Drawable> results = new ArrayList<Drawable>();
    PackageManager pm = context.getPackageManager();
    Intent intent = new Intent(Intent.ACTION_MAIN, null);
    intent.addCategory(Intent.CATEGORY_LAUNCHER);
     List list = pm.queryIntentActivities(intent, PackageManager.PERMISSION_GRANTED);
    for (ResolveInfo rInfo : list) { 
       results.add(rInfo.activityInfo.applicationInfo.loadIcon(pm);
    }
    return results;   
} 
```

# php - 为什么我的 mysqli 语句不能在 flex 4.5 中工作？

> ID：10767873
> 
> 赞同：0
> 
> 时间：2012-05-26T16:14:44.873
> 
> 标签：php, mysqli, flash-builder, prepared-statement

您好，我正在使用 flex 4.5 和 php，我有一个带有查询的服务 php 文件，该查询实际上正在工作，此查询检索特定的产品信息。但是当我想用 like 获取语句时？% is not working here 是工作代码

```
public function getProductsByName2($searchStr) {
     $stmt = mysqli_prepare($this->connection,
          "SELECT
              products.id,
              products.codb,
              products.nombre,
              products.precio,
              products.cantidad
           FROM products where products.nombre LIKE ?");
      $this->throwExceptionOnError();

      mysqli_stmt_bind_param($stmt, 's', $searchStr); 
```

此代码实际上可以获取特定的产品信息，但必须与名称完全匹配，如果我想检索所有以“c”开头的名称，例如我应该有这样的东西

```
public function getProductsByName2($searchStr) {
     $stmt = mysqli_prepare($this->connection,
          "SELECT
              products.id,
              products.codb,
              products.nombre,
              products.precio,
              products.cantidad
           FROM products where products.nombre LIKE CONCAT('%',?,'%')");
      $this->throwExceptionOnError();

      mysqli_stmt_bind_param($stmt, 's', $searchStr); 
```

但不知何故不工作请任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T21:51:48.210

我从未见过用 MYSQL 的 CONCAT 方法添加的“%”。相反，我会`%`在 PHP 范围内添加 - 所以：

```
// ...
FROM products where products.nombre LIKE ?");
// ...
mysqli_stmt_bind_param($stmt, 's', '%' . $searchStr . '%'); 
```

希望这可以帮助。

# visual-studio-2010 - Visual Studio 2010 为文本编辑器提供更大的查看区域

> ID：10767877
> 
> 赞同：0
> 
> 时间：2012-05-26T16:15:04.683
> 
> 标签：visual-studio-2010

VS2010 和 VS2008 相比，VS2010 的文本编辑器区域更小。我有默认设置，它有以下栏：

（这些在文本编辑器的顶部）

*   功能栏（文件、编辑、视图、窗口、帮助等...）

*   一行工具栏（标准工具栏和文本编辑器工具栏在同一行）

*   打开的文件标签栏

*   导航栏

    （在文本编辑器的底部）

*   用于在底部停靠隐藏窗口的选项卡（输出窗口、错误窗口、查找结果窗口等...）

*   状态栏

VS2010 比 VS2008 具有更大的条形高度，并使文本编辑器显示少几行（取决于文本字体大小）。Consolas 字体大小为 9 时，它减少了 3 行。

有什么办法可以让VS2010的吧台更紧凑？由于这些栏很有用，我尽量不禁用它们中的任何一个。

# c# - 数据库访问和 asp.net mvc

> ID：10767878
> 
> 赞同：0
> 
> 时间：2012-05-26T16:15:06.340
> 
> 标签：c#, asp.net-mvc-3, ado.net

我试图了解数据库访问模型在 asp.net mvc 中的工作原理，一些示例在控制器中工作，但其他示例在模型中。

我想知道如何使用 ado.net，最佳实践是在模型层中使用一个类并尝试在那里访问我的数据库？

所有示例都使用 EF 和 LINQ，我想知道使用 ado.net 的最佳方法。

数据库访问是在模型还是控制器中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T16:22:59.810

这是一个需要考虑的建筑设计：

1.  视图和控制器位于**MVC 网站**中。
2.  **模型**在一个单独的项目中。
3.  **数据访问**代码位于名为 DataAccess 或 Repository 的第三个项目中。

该网站引用了 Models 和 DataAccess 项目。DataAccess 项目还引用了 Models 项目。

这样，数据访问代码是分开的。它更容易找到和维护。它可以用于另一种解决方案。您甚至可以将其换成完全不同的数据访问层——例如，从 Linq 切换到 SQL 到 Entity Framework 或经典 ADO.Net。

通过将模型保存在单独的项目中，网站和数据访问层都可以引用它们。此外，Models 项目可以用于其他解决方案，就像松散耦合的数据访问层一样。

以这种方式分离层也可以更容易地添加**测试**。如果数据访问层/存储库利用接口和依赖注入，这将变得更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T16:23:46.057

数据库访问应在控制器中完成。我不确定您具体看到了哪些 EF 示例，但在许多 EF 实体中，模型本身就是模型（这通常是开始使用网站的一种快速简便的方法，但不适用于大型网站）。基本上，控制器负责获取/生成模型，然后将其传递给视图。

# ios - xcode中单行多条记录

> ID：10767883
> 
> 赞同：0
> 
> 时间：2012-05-26T16:15:54.140
> 
> 标签：ios, uitableview, gridview

如何在从托管对象上下文或核心数据中获取的客户单元格中显示 4 条记录。我也希望它以网格视图样式显示。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:56:42.763

为什么不使用 4 个数组从您想要的任何来源（核心数据等）获取数据。然后，只要数组的长度相同 - 这些可以用于在每个单元格中具有 4 个不同的值。

至于真正的“网格视图”布局，请查看[AQGridView](https://github.com/AlanQuatermain/AQGridView)。没用过，但是听说过很多好东西。

# jquery - 访问最近的 点击列表项

> ID：10767885
> 
> 赞同：0
> 
> 时间：2012-05-26T16:16:11.767
> 
> 标签：jquery, closest

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T16:17:26.023

# c# - 将文本文件转换为数组以在程序中永久使用

> ID：10767886
> 
> 赞同：0
> 
> 时间：2012-05-26T16:16:19.780
> 
> 标签：c#, arrays

我有一个 1000 字的文本文件，我想格式化一个数组，这样我就可以将它放在程序中，而不是每次都读取文本文件并从中创建数组。

我试图在网上找到一个简单的服务，但似乎没有一个简单的 C# 数组存在。大多数用于 json、xml、rss 等。

所以输出会以这种方式排列单词：

```
{"word1","word2",...,"wordN"} 
```

这是我要格式化的文本文件的[链接。](http://dl.dropbox.com/u/16641927/SSID.txt)

**是否有在线服务来转换文本文件或我可以编写一个简单的脚本来将文本转换为正确的数组语法？**

任何真正花哨的东西：按字母顺序对数据进行排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T16:21:57.270

使用 Visual Studio 的搜索/替换并打开正则表达式，替换`\n`为`","`，因为这是一次性的，这将使您大部分时间到达那里。

![查找和替换对话框](../Images/3b067cc82a0fa75d646c42ead52b5f4f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T16:20:21.377

试试这个：

```
var result = 
    "string[] list =\r\n{\r\n" + 
    string.Join(",\r\n", File
        .ReadLines("SSID.txt")
        .OrderBy(line => line)
        .Select(line => "    " + ToCSharpString(line))) +
    "\r\n};";

File.WriteAllText("Result.cs", result); 
```

和

```
static string ToCSharpString(string s)
{
    return s.Contains('\\') || s.Contains('"')
        ? "@\"" + s.Replace("\"", "\"\"") + "\""
        : "\"" + s + "\"";
} 
```

*结果：*

```
string[] list =
{
    "@home",
    "^Y",
    "<any ssid>",
    // ...
    "X-Micro",
    "yale wireless",
    "ZyXEL"
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T16:22:27.283

您可以将文本文件作为资源添加到您的应用程序。然后简单地引用文本文件并通过换行符和回车符将其拆分为一个数组。

这将防止将 IDE 中的滚动条扩展到超出合理数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T16:23:51.790

```
<script type='text/javascript'>
function convertIt(str) {
var array=str.split('\n');
array.sort(); //If you want to sort alphabetically; remove if not
document.getElementById('output').innerHTML='{"'+array.join('","')+'"}';
}
</script>

<textarea id='text'>
</textarea>
<div id='output'></div>
<input type='button' onclick='convertIt(document.getElementById("text").value)' value='Click me!'> 
```

将以上内容另存为 .html 文件，在您喜欢的浏览器中打开它，然后将您的列表粘贴到那里并单击按钮。

享受。

编辑：好的，所以看起来你的文件几乎完全是换行符。考虑到这一点，我已经修改了代码。经过测试，它可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T16:30:50.027

我假设该文件的结构是每行一个单词。

首先，在命令行上对其进行排序： `sort <words.txt >words.srt.txt`

1.  在 Visual Studio 中加载 words.srt.txt。
2.  定位到文件的顶部。
3.  从工具菜单中，选择记录临时宏
4.  按 End 键转到行尾
5.  输入逗号 (,)
6.  点击向下箭头转到下一行
7.  按 Home 键转到行首
8.  从工具菜单中，选择停止录制
9.  现在，您可以为每一行选择工具|运行临时宏（或按 Ctrl+Shift+P）。如果您只是按住 Ctrl+Shift+P，键盘自动重复将为您完成。

这应该需要你大约一分钟。然后只需在顶部添加声明，在底部添加右大括号。

# codeigniter - 在花哨的盒子/codeigniter中提交表格

> ID：10767890
> 
> 赞同：1
> 
> 时间：2012-05-26T16:17:07.363
> 
> 标签：codeigniter, fancybox, submit

我正在使用 codeignite 开发一个网站。我在花式框弹出窗口中提交表单时遇到问题。

考虑这是原始页面：

```
http://mysite/admin/blog/posts 
```

我想在花哨的弹出框中打开评论页面

但是当我想删除弹出框中的评论时，弹出框关闭并且原始页面重定向到：

```
http://mysite/admin/comments/delete/5 
```

如何在不关闭弹出窗口的情况下提交或打开弹出窗口中的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T06:36:24.517

您正在使用此网址删除您的评论

```
http://mysite/admin/comments/delete/5 
```

它会提交你的表单并重新加载你的页面，这就是fancybox关闭的原因。在这种情况下，您需要使用 ajax 提交您的页面。如果您知道 jquery，那么这里是对您有用的链接[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T09:58:23.527

你也可以试试这个删除评论：

```
<a id="cmid" href="comments page url">View Comments</a> 
```

然后你的花哨的 javascript 代码是这样的：

```
<script type="text/javascript">
$(function(){

    $("#cmid").fancybox({
    'width'     : '50%',
    'height'    : '50%',
        'autoScale'     : false,
        'transitionIn'  : 'none',
    'transitionOut' : 'none',
    'type'      : 'iframe'
    });

});
</script> 
```

然后你删除评论。我认为这不会关闭弹出窗口。

# django - Django-facebook 身份验证

> ID：10767899
> 
> 赞同：1
> 
> 时间：2012-05-26T16:18:28.957
> 
> 标签：django, facebook, django-facebook

我相信我已经设法集成了 Django-facebook，但它只在第一次登录。你们知道问题可能是什么吗？

# c# - 远程桌面空闲时间

> ID：10767903
> 
> 赞同：0
> 
> 时间：2012-05-26T16:19:07.097
> 
> 标签：c#, desktop

我们有一个需要持续运行的应用程序，但它不能作为服务运行，因此我们在 Windows 2003 控制台会话中运行它。迁移到 Windows 2008 并使用会话 0 隔离后，GPO 会导致会话在会话空闲 30 分钟后终止。

我编写了一个小 C# 应用程序来使用 sendkeys.send 和 sendwait 模拟按键，但远程桌面会话仍然连接。除了更改 GPO 之外，还有什么源代码或想法可以使会话保持活跃，因为这暂时是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T11:49:39.430

我认为您可以考虑两种选择来获得所需的效果。

1) SrvAny.exe - 这是微软提供的一个工具，它将获取任何 exe 并从服务控制面板运行它。虽然没有正式支持 server 2008 的版本，但在 server 2003 上运行的版本运行良好。过去我用它来运行 dropbox 有一项服务。

这是一个[在服务器 2008 上使用 dropbox Dropbox as a service 进行类似操作的教程](http://blog.dreamfactory.se/2011/03/11/installing-dropbox-as-a-service-on-windows-server-2008-r2-sp1-x64/)

2) 编写一个将作为服务运行的存根应用程序，除了从供应商处启动 exe 外，什么也不做。

我意识到这不是你要求的 persay，但它会给你想要的效果。

# r - 将一个列表项与 R 中的其余项进行比较

> ID：10767904
> 
> 赞同：1
> 
> 时间：2012-05-26T16:19:26.630
> 
> 标签：r, loops

如果你有一个文件列表，并且你想将 1 与一组其他文件进行比较，你会怎么做？

```
my.test <- list[1]
my.reference.set <- list[-1] 
```

这当然可行，但我想在一个循环中使用它，my.test 每次都不同（因此列表中的每个文件都是 my.test 一次迭代，即我有一个包含 250 个文件的列表，我想对其中的 12 个文件的每个子集执行此操作。

```
> num <- (1:2)
> sdasd<- c("asds", "ksad", "nasd", "ksasd", "nadsd", "kasdih")
> splitlist<- split(sdasd, num)
> splitlist
$`1`
[1] "asds"  "nasd"  "nadsd"

$`2`
[1] "ksad"   "ksasd"  "kasdih"

> for (i in splitlist) {my.test <- splitlist[i] # "asds"
+ my.reference.set <- splitlist[-i] # "nasd" and "nadsd"
+ combined <- data.frame (my.test, my.reference.set)
+ combined}
Error in -i : invalid argument to unary operator
> 
```

然后我希望下一次迭代是，

```
my.test <- splitlist[i] #my.test to be "nasd"
my.reference.set <- splitlist[-i] # "asds" and "nadsd"
} 
```

最后对于 splitlist[1]，

```
my.test <- splitlist[i] # "nadsd" 
my.reference.set <- splitlist[-i] # "asds" and "ksad"
} 
```

那么 splitlist[2] 也一样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T17:32:08.323

这是做你想做的吗？这里的关键点是遍历列表的*索引*，而不是名称，因为`x[-n]`索引仅在`n`自然数时才有效（有一些模糊的例外）。此外，我不确定您是否希望将结果作为数据框或列表 - 后者允许组件具有不同的长度。

```
num <- 1:2
sdasd <- c("asds", "ksad", "nasd", "ksasd", "nadsd", "kasdih")
splitlist<- split(sdasd, num)
L <- vector("list",length(splitlist))
for (i in seq_along(splitlist)) {
    my.test <- splitlist[[i]] # "asds"
    my.reference.set <- splitlist[-i] # "nasd" and "nadsd"
    L[[i]] <- list(test=my.test, ref.set=my.reference.set)
} 
```

**编辑**：我仍然对你上面的例子有点困惑，但我*认为*这就是你想要的：

```
refs <- lapply(splitlist,
     function(S) {
         lapply(seq_along(S),
            function(i) {
               list(test=S[i], ref.set=S[-i])
           })
     }) 
```

`refs`是一个嵌套列表；顶层的长度为 2（ 的长度`splitlist`），下一层的长度为 3（ 的元素的长度`splitslist`），每个底层的长度为 2（测试集和参考集）。

# python - 数据库连接：使用 close() 与 __del__

> ID：10767905
> 
> 赞同：2
> 
> 时间：2012-05-26T16:19:31.780
> 
> 标签：python, mysql, sqlalchemy

使用 SQLAlchemy 连接到 MySQL，我已经厌倦了写这样的东西：

```
with closing(engine) as connection:
    do_sql_stuff(connection) 
```

这种模式在我的代码的许多区域中重复出现，并且似乎`__del__`没有必要这样做。为什么不只实现一个类来包装连接的创建和关闭：

```
class MyConnectionManager(object):
    def __init__(self, db_uri):
        self.__db_engine = sqlalchemy.create_engine(db_uri)
        self.__db_conn = self.__db_engine.connect()

    def __del__(self):
        self.__db_conn.close() 
```

这仅仅是两种不同的风格/偏好，还是有更重要的原因表明使用`with closing()`是一种更好的使用方式`__del__`（反之亦然）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T16:26:53.350

无法保证何时`__del__`实际调用（或者在循环引用的情况下是否完全调用）。 `with closing(...) as ...:`保证每次退出`with`子句时都会调用清理代码。

# list - 用 prolog 为用户猜出正确的游戏

> ID：10767907
> 
> 赞同：0
> 
> 时间：2012-05-26T16:19:45.040
> 
> 标签：list, prolog, prolog-assert

我正在尝试制作一个程序，让用户回答问题以找到游戏，但我不明白如何使用列表和断言。我用过程点系统尝试了另一种方法。程序是这样的：

```
yeah:-
   write('Please answer the questions to find the game which suite you!'),
   nl, 
   find(Game),
   nl,
   write('I guess that the game is  :'),
   nl,
   write(Game),
   undo.

find(assassinsCreedII ) :-
   assassinsCreedII(assassins).
find(sims3) :-
   sims3\. 
find(undefined).

points(G) :-
 X=0, 
( (G == assassins) ->
(( X = X + 1),
print(X));
 Y=0, 
(G == sims3) -> 
(Y = Y + 1)).

assassinsCreedII(assassins) :-
   actionGame(assassins),
   adventureGame(assassins). 

sims3 :-
   simulationGame(sims).

actionGame(name) :-
   test(do_you_like_action_games,name ).
adventureGame(name) :-
   test(do_you_like_adventure_games,name).
simulationGame(N) :-
   test(do_you_like_simulation_games,N ).

requisition(Question,Name) :-
   write(Question),
   write('?'),
   read(Answer),
   nl,
   (   (Answer==yes ; Answer==y )
   ->
     assert(yes(Question))
   ;
     assert(no(Question)),
     fail
   ),
   points(Name).

:- dynamic yes/1,no/1.

test(Q,Name) :- 
   ( yes(Q) ->
     true;
     ( no(Q)
     -> fail
     ; requisition(Q,Name)
     )
   ).

undo :-
   retract(yes()),fail. 
undo :-
   retract(no()), fail. 
undo. 
```

当我运行程序时，结果是：？-是的。请回答问题以找到适合您的游戏！我猜这个游戏是：undefined true。

我不明白为什么这种方式是错误的。我怎样才能用 assert 或 list 做到这一点，这样我才能找到得分最高的游戏并打印出来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T09:49:01.317

这不是使用收回的正确方法。

试试这样：

```
retractall(yes(_)) 
```

这将撤回所有答案

# c++ - 函数中无法识别类的成员函数

> ID：10767908
> 
> 赞同：1
> 
> 时间：2012-05-26T16:19:58.707
> 
> 标签：c++

我有一个 clss 学生，我在存储库的同一个标题中使用了它的成员函数，没有问题......但现在在这个函数中我得到一个错误：

```
..\StudentRepository.cpp:22:7: error: request for member 'setName' in 'st', which is of non-class type 'Student()' 
```

这是功能：

```
void StudentRepository::loadStudents(){
    ifstream fl;
    fl.open("studs.txt");
    Student st();
    string s,ss;
    int loc;
    if(fl.is_open()){
        while(!(fl.eof())){
            getline(fl,s);
            loc = s.find(",");
            ss = s.substr(0,loc);
            st.setName(ss);

        }
    }
    else{
        cout<<"~~~ File couldn't be open! ~~~"<<endl;
    }
    fl.close();

} 
```

我不得不提到，在同一个文件中，我确实使用了它们，例如这个函数：

```
 void StudentRepository::editStudent(Student A){
    int i;
    i = findByName(A.getName());
    if( i != 0 || i != NULL){
        students[i].setGroup(A.getGroup());
        students[i].setId(A.getID());
    }
    else{
        throw RepoException("The name does not exist!");
    }
    saveStudents();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T16:21:35.177

```
 Student st(); 
```

应该：

```
 Student st; 
```

`Student st();`不创建`st`类型的对象，`Student`它通过名称声明一个函数，该名称`st`不带参数并返回一个`Student`对象。

这有时被称为C++ 中**最令人烦恼的解析**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T16:22:14.257

从`st`的声明中删除括号。

```
Student st~~()~~;
```

*   [非工作演示](http://codepad.org/QTNsKSkr)
*   [工作演示](http://codepad.org/Pour0zNj)

# iphone - 固定宽度和灵活高度的UILabel

> ID：10767913
> 
> 赞同：7
> 
> 时间：2012-05-26T16:20:14.973
> 
> 标签：iphone, objective-c, sdk

我在 Detail View Controller 中有一个 UILabel，因此它的内容会根据所选的表格行而变化。我有一个问题，我会根据文本为我的 UILabel 设置一个固定宽度和一个动态高度。我怎样才能做到这一点？（我很抱歉我的错误，但我不是英语）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T16:37:08.170

我喜欢子类化为`UILabel`我做这件事。

AutosizingLabel.h

```
#import <UIKit/UIKit.h>

@interface AutosizingLabel : UILabel {
    double minHeight;
}

@property (nonatomic) double minHeight;

- (void)calculateSize;

@end 
```

AutosizingLabel.m

```
#define MIN_HEIGHT 10.0f

#import "AutosizingLabel.h"

@implementation AutosizingLabel

@synthesize minHeight;

- (id)init {
    if ([super init]) {
        self.minHeight = MIN_HEIGHT;
    }

    return self;
}

- (void)calculateSize {
    CGSize constraint = CGSizeMake(self.frame.size.width, 20000.0f);
    CGSize size = [self.text sizeWithFont:self.font constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];    

    [self setLineBreakMode:UILineBreakModeWordWrap];
    [self setAdjustsFontSizeToFitWidth:NO];
    [self setNumberOfLines:0];
    [self setFrame:CGRectMake(self.frame.origin.x, self.frame.origin.y, self.frame.size.width, MAX(size.height, MIN_HEIGHT))];

}

- (void)setText:(NSString *)text {  
    [super setText:text];

    [self calculateSize];
}

- (void)setFont:(UIFont *)font {
    [super setFont:font];

    [self calculateSize];
}

@end 
```

要使用它，请在项目中导入/创建 .h 和 .m 文件。然后，如果您正在创建您`UILabel`的代码，它看起来像这样：

```
#import "AutosizingLabel.h"

- (void)viewDidLoad {
    [super viewDidLoad];

    AutosizingLabel *label = [[AutosizingLabel alloc] init];
    label.text = @"Some text here";
    [self.view addSubview:label];
} 
```

如果您使用的是 XIB，您可以选择任何 UILabel 并单击右侧边栏中的 Identity Inspector 将其类设置为`AutosizingLabel`. 在任何一种情况下，设置`.text`属性都会自动更新标签的大小。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-26T16:32:32.147

你可以做到..这是代码。

```
UILabel *yourlabel = [[UILabel alloc] initWithFrame:CGRectMake(x, y, 100, sizeToFit)];
yourlabel.numberOfLines = 0; 
```

如有任何疑问，请发表评论。

# string - 最长回文子串和后缀特里树

> ID：10767916
> 
> 赞同：2
> 
> 时间：2012-05-26T16:20:25.930
> 
> 标签：string, algorithm, data-structures, palindrome, suffix-tree

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T16:53:04.117

Yes, finding longest palindrome by using LCS like algorithms is not a good way, I didn't read referenced answer carefully but this line in the answer is completely wrong:

> So the longest contained palindrome within a string is exactly the longest common substring of this string and its reverse

but if you read it and you have a counter example don't worry about it (you are right in 99%), this is common mistake, But simple way is as follow:

Write down the string (`barbapapa`) as follow: `#b#a#r#b#a#p#a#p#a#`, now traverse each character of this new string from left to right, check its left and right to check whether it's a palindrome center or not. This algorithm is O(n^2) in worst case and works perfectly correct. but normally will finds palindrome in O(n) (sure proving this in average case is hard). Worst case is in strings with too many long palindromes like `aaaaaa...aaaa`.

But there is better approach which takes O(n) time, base of this algorithm is by [Manacher](http://en.wikipedia.org/wiki/Longest_palindromic_substring). Related algorithm is more complicated than what I saw in your referenced answer. But what I offered is base idea of Manacher algorithm, with clever changes in algorithm you can skip checking all left and rights (also there are algorithms by using suffix trees).

* * *

P.S: I couldn't see your Algo link because of my internet limitations, I don't know it's correct or not.

I added my discussion with OP to clarify the algorithm:

```
let test it with barbapapa-> #b#a#r#b#a#p#a#p#a#, start from first #
there is no left so it's center of palindrome with length 1.
Now "b",has # in left and # in right, but there isn't another left to match with right 
so it's a center of palindrome with length 3.
let skip other parts to arrive to first "p":
first left and right is # second left and right is "a", third left and
right is # but forth left and right are not equal so it's center of palindrome
of length 7 #a#p#a# is palindrome but b#a#p#a#p is not 
Now let see first "a" after first "p" you have, #a#p#a#p#a# as palindrome and this "a" 
is center of this palindrome with length 11 if you calculate all other palindromes 
length of all of them are smaller than 11 
```

Also using `#` is because considering palindromes of even length.

After finding center of palindrome in newly created string, find related palindrom (by knowing the center and its length), then remove `#` to find out biggest palindrome.

# ios - 为什么 AVAssetWriter 会膨胀视频文件？

> ID：10767918
> 
> 赞同：1
> 
> 时间：2012-05-26T16:20:28.797
> 
> 标签：ios, ios5, avassetwriter, core-video

奇怪的问题。我从视频文件 (.mov) 中获取帧，并使用 AVAssetWriter 将它们写入另一个文件，而无需任何显式处理。实际上，我只是将帧从一个内存缓冲区复制到另一个内存缓冲区，然后它们通过 PixelbufferAdaptor 刷新它们。然后我取出生成的文件，删除原始文件，将生成的文件替换为原始文件并执行相同的操作。有趣的是文件的大小不断增长！有人可以解释为什么吗？

```
if(adaptor.assetWriterInput.readyForMoreMediaData==YES) {
            CVImageBufferRef cvimgRef=nil;
            CMTime lastTime=CMTimeMake(fcounter++, 30); 
            CMTime presentTime=CMTimeAdd(lastTime, frameTime);
            CMSampleBufferRef framebuffer=nil;
            CGImageRef frameImg=nil;
            if ( [asr status]==AVAssetReaderStatusReading ){
                framebuffer =   [asset_reader_output copyNextSampleBuffer];
                frameImg    =   [self imageFromSampleBuffer:framebuffer withColorSpace:rgbColorSpace];
            }
            if(frameImg && screenshot){
                //CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(framebuffer);
                CVReturn stat= CVPixelBufferLockBaseAddress(screenshot, 0);

                 pxdata=CVPixelBufferGetBaseAddress(screenshot);
                 bufferSize = CVPixelBufferGetDataSize(screenshot);
                // Get the number of bytes per row for the pixel buffer.
                 bytesPerRow = CVPixelBufferGetBytesPerRow(screenshot);
                // Get the pixel buffer width and height.
                 width = CVPixelBufferGetWidth(screenshot);
                 height = CVPixelBufferGetHeight(screenshot);
                 // Create a Quartz direct-access data provider that uses data we supply.
                 CGDataProviderRef dataProvider = CGDataProviderCreateWithData(NULL, pxdata, bufferSize, NULL);

                CGImageAlphaInfo ai=CGImageGetAlphaInfo(frameImg);
                size_t bpx=CGImageGetBitsPerPixel(frameImg);
                CGColorSpaceRef fclr=CGImageGetColorSpace(frameImg);

                 // Create a bitmap image from data supplied by the data provider.
                 CGImageRef cgImage = CGImageCreate(width, height, 8, 32, bytesPerRow,rgbColorSpace, kCGImageAlphaNoneSkipLast | kCGBitmapByteOrder32Big,dataProvider, NULL, true, kCGRenderingIntentDefault);
                 CGDataProviderRelease(dataProvider);

                stat= CVPixelBufferLockBaseAddress(finalPixelBuffer, 0);
                pxdata=CVPixelBufferGetBaseAddress(finalPixelBuffer);
                bytesPerRow = CVPixelBufferGetBytesPerRow(finalPixelBuffer);
                CGContextRef context = CGBitmapContextCreate(pxdata, imgsize.width,imgsize.height, 8, bytesPerRow, rgbColorSpace, kCGImageAlphaNoneSkipLast);
                CGContextDrawImage(context, CGRectMake(0, 0, CGImageGetWidth(frameImg), CGImageGetHeight(frameImg)), frameImg);
                //CGColorSpaceRef rgbColorSpace = CGColorSpaceCreateDeviceRGB();
                //CGImageRef myMaskedImage;
                    const float myMaskingColors[6] = { 0, 0, 0, 1, 0, 0 };
                   CGImageRef  myColorMaskedImage = CGImageCreateWithMaskingColors (cgImage, myMaskingColors);
                 //CGContextDrawImage(context, CGRectMake(0, 0, CGImageGetWidth(myColorMaskedImage), CGImageGetHeight(myColorMaskedImage)), myColorMaskedImage);

                [adaptor appendPixelBuffer:finalPixelBuffer withPresentationTime:presentTime];} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:22:57.263

好吧，谜团似乎解开了。问题在于不适当的编解码器配置。这是我现在使用的一组配置选项，它似乎可以完成工作：

```
NSDictionary *codecSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                   [NSNumber numberWithInt:1100000], AVVideoAverageBitRateKey,
                                   [NSNumber numberWithInt:5],AVVideoMaxKeyFrameIntervalKey,
                                   nil];
    NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                   AVVideoCodecH264, AVVideoCodecKey,
                                   [NSNumber numberWithInt:[SharedApplicationData sharedData].overlayView.frame.size.width], AVVideoWidthKey,
                                   [NSNumber numberWithInt:[SharedApplicationData sharedData].overlayView.frame.size.height], AVVideoHeightKey,
                                   codecSettings,AVVideoCompressionPropertiesKey,
                                   nil];

    AVAssetWriterInput* writerInput = [AVAssetWriterInput
                                       assetWriterInputWithMediaType:AVMediaTypeVideo
                                       outputSettings:videoSettings]; 
```

现在文件大小仍在增长，但速度要慢得多。文件大小和视频质量之间存在折衷 - 减小大小会影响质量。

# java - 循环半控制

> ID：10767927
> 
> 赞同：8
> 
> 时间：2012-05-26T16:21:36.210
> 
> 标签：java, loops, while-loop, break

我们什么时候使用循环半？另外，是否应该有人简要说明如何编写其代码？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T16:27:22.757

您使用循环半来避免从循环外部到内部重复代码。例子：

```
read a;
while a != b do
  stuff;
  read a;
end 
```

变成

```
while true do
  read a
  if a == b then break
  stuff;
end 
```

现在我只在一个地方阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T16:41:00.940

顺便说一句，我想补充一点，`a`与替代情况相比，变量的范围（假设在这个习语中是一个局部变量）被最小化了，`a`即使在 while 循环终止后仍然在范围内。尽可能减少局部变量的范围被认为是一种好的做法（Josh Bloch，Effective Java，Item 45）。

# objective-c - viewdidload 问题 xcode 4.2

> ID：10767931
> 
> 赞同：1
> 
> 时间：2012-05-26T16:22:12.717
> 
> 标签：objective-c, xcode4, viewcontroller, viewdidload, viewwillappear

我只是学习如何通过推送和弹出来更改视图之间的切换。现在，在我的第二个视图中，我添加了一个标签，每次我的第二个视图被推送时，我都想改变她的值。我添加标签，将她连接到我的文件所有者，然后使用 viewdidload 更改她的值。当我进入第二个视图时，什么都没有发生。但是当我使用 viewdidapper 时，一切都很完美（但标签值更新需要一秒钟）。

我的代码是：mysecondviewcontroller.h：

```
@interface SecondViewController : UIViewController
{
     IBOutlet UILabel *textLabel;
     NSString *label;
}

@property (copy) NSString *label;

@end 
```

mysecondviewcontroller.m（当然我合成标签）：

```
-(void)viewDidAppear:(BOOL)animated
 {
   textLabel.text = label;
   NSLog(@"viewdidapper2");
 }

 - (void)viewDidLoad
{
   textLabel.text = label;
   [super viewDidLoad];
    NSLog(@"viewdidload2");

// Do any additional setup after loading the view from its nib.
} 
```

我的 firstviewcontroller.m（IBAction）：

```
- (IBAction)pushViewController:(id)sender
{
    static int count = 1;

    SecondViewController *secondVieController = [[SecondViewController alloc] init];
    [self.navigationController pushViewController:secondVieController animated:YES];   
   secondVieController.title = @"second";
   secondVieController.label = [NSString stringWithFormat:@"number: %d", count];     

   count++;

} 
```

我的 viewdidload 有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T16:25:18.940

如果您正在使用`viewDidLoad`，则需要在执行任何其他操作之前调用超级函数。

```
- (void)viewDidLoad
{
   [super viewDidLoad];
   textLabel.text = label;
    NSLog(@"viewdidload2");

// Do any additional setup after loading the view from its nib.
} 
```

我认为还有另一个问题，您`secondVieController.label`在推送视图控制器后进行设置，但这意味着在`viewDidLoad`运行时`secondVieController.label`仍然是空的。这应该解决它。

```
- (IBAction)pushViewController:(id)sender
{
    static int count = 1;

    SecondViewController *secondVieController = [[SecondViewController alloc] init];
    secondVieController.title = @"second";
    secondVieController.label = [NSString stringWithFormat:@"number: %d", count];     
    [self.navigationController pushViewController:secondVieController animated:YES];   

    count++;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T05:12:39.000

如果您想在每次加载视图时更新标签，那么您必须将代码写入 Viewwillappear 方法。

# c - 虚空铸造有什么作用？

> ID：10767933
> 
> 赞同：3
> 
> 时间：2012-05-26T16:22:14.413
> 
> 标签：c, casting, void

我正在阅读一些源代码，结果出现了；

```
struct Cookie *
Curl_cookie_add(struct SessionHandle *data, /* rest of params were here */)
{
/* unrelated things were here */
#ifdef CURL_DISABLE_VERBOSE_STRINGS
  (void)data;
#endif
/* rest of function goes here */
} 
```

如您所见， void 强制转换指针甚至没有分配给变量。我想知道这样做的目的是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T16:29:16.310

`data`此强制转换抑制了如果不使用会出现的编译器警告。

如果启用了`-Wunused-parameter`标志（由 暗示），则GCC 会产生此警告。`-Wextra`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T13:27:01.213

公平点乔伊 - 但抑制该警告也会在程序员意外未使用参数的所有情况下抑制它......

# android - 属性未能加载任何新项目

> ID：10767939
> 
> 赞同：0
> 
> 时间：2012-05-26T16:23:13.757
> 
> 标签：android, properties

几天来我一直在尝试解决这个问题，但我仍然没有运气。每次我尝试创建一个新项目时，它都会说加载属性失败。一切都是从我创建一个新工作区（没有删除旧的）开始的时候开始的，我想我会在做之前阅读它。当我开始新的工作空间时，它开始这样说。它还说我的 DDMS 丢失了。

所以我四处寻找并试图找到解决方案，但没有运气。所以我卸载了eclipse和插件。A重新安装了它们。而且还在做

[http://img846.imageshack.us/img846/3898/fixx.png](http://img846.imageshack.us/img846/3898/fixx.png)

谢谢你

[http://img820.imageshack.us/img820/9863/kaka1.png](http://img820.imageshack.us/img820/9863/kaka1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:49:59.783

您是否尝试过删除调试密钥库？

如果您不知道如何操作，请参阅[此答案。](https://stackoverflow.com/questions/2194808/debug-certificate-expired-error-in-eclipse-android-plugins)

# javascript - 如何运行动态添加的选择功能

> ID：10767941
> 
> 赞同：0
> 
> 时间：2012-05-26T16:23:23.057
> 
> 标签：javascript, jquery

我正在将一些 HTML 元素动态地附加到页面中。可以添加多个项目，并且可以添加不同的时间......所以很难使用“绑定”。

我决定使用内联函数——但这在 Firefox 上不起作用……在所有其他浏览器上都起作用。注意选项的 onClick。另外，我尝试过 onblur、onchange 和 on select。这些都不适用于 Firefox。

我的目标是在选择该选项时运行这些功能。我想我只是错过了一些东西。

```
$("#billTasks").find('tr')
  .append('<td><fieldset><select>
           <option class="fixedRate" onClick="fixedOption(this)" id="billFixedSelect" value="1">Fixed Rate</option>
           <option class="hourly"  onClick="hourlyOption(this)" id="billHourlySelect" value="2"></option>
           </select>
           <input type="text" placeholder="Rate" class="fieldWidth100 rate currency" style="margin-right:10px;"/>
           <select class="schedule">
           <?php while($row = $db->sql_fetchrow($result)){
                echo "<option value=\'{$row['schedule']}\'>{$row['schedule']}</option>\\n";}?>
           </select></fieldset></td>'); 
```

这是有问题的代码（在附加字符串中）

```
<select>
    <option class="fixedRate" onClick="fixedOption(this)" id="billFixedSelect" value="1">Fixed Rate</option>
    <option class="hourly"  onClick="hourlyOption(this)" id="billHourlySelect" value="2"></option></select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T16:39:13.827

为什么内联你尝试这样的事情。

```
$("#billTasks").find('select').live("change", function() {
  var SelectedValue = $(this).val();
  if (SelectedValue == '1') {
  //your task                      
  }
  if (SelectedValue == '2') {
  //Your Task                     
  }

 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T16:25:50.793

您可以为此使用委托事件处理程序：

```
$('#billTasks ').on('change', 'select', function() {
  // your code
  hourlyOption(this); // here this points to select itself
}); 
```

[在这里](http://api.jquery.com/on)阅读

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T16:47:51.703

我建议为此使用一个类。你可以做的是这样的：

```
function Option(html, events) {
    var o = $(html);
    for(var k in events) {
        o.bind(k, events[k]);
    }
    return o;
} 
```

使用这样的东西：

```
var o = new Option('<option>blah</option>', { click: function() { } ... }); 
```

并且`o`只是一个新的 jquery 对象。所以无论如何你都可以使用它。

# c - 在以下代码段中定义宏有什么好处？

> ID：10767949
> 
> 赞同：0
> 
> 时间：2012-05-26T16:24:12.883
> 
> 标签：c, macros, c-preprocessor

假设以下一段**C**代码：

```
 #define SOME_MACRO(m)  \
  void (*f)(m);          \
  unsigned int a;        \
  int *self; 
```

然后是一个结构

```
typedef struct _Str {
   SOME_MACRO(whatever)
   char sthg[2];
} STR; 
```

我的问题是：这种设计选择的目的是什么？例如，我们并不是在间接节省时间。除了尝试模块化代码之外，还有什么其他的`_STR`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T16:33:40.757

我的项目使用该模式来确保某些方法/成员在每个项目类中都可用（例如，用于编组）。再次没有更多的例子，没有办法证实，但这是我的理论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:31:27.590

SOME_MACRO(m) 转换为指向函数的函数指针，该函数不返回任何内容，该函数接受一个类型的参数`m`，以及一个无符号整数和一个指向整数的指针。我相信这样的事情背后的设计原因是高度特定于案例的，并且没有更详细的代码示例，我相信这用于模块化代码，正如你提到的那样。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-26T16:39:11.927

只是从您给出的代码中，我也无法做出解释，但它似乎有些简单，所以我认为这只是一个新程序员的测试宏，因为“SOME_MACRO”的含义=一些宏测试代码。 ..

# php - PHP 表单的 SQL 注入威胁？

> ID：10767954
> 
> 赞同：3
> 
> 时间：2012-05-26T16:24:27.720
> 
> 标签：php, sql, sql-injection

我试图证明 PHP 中准备好的语句的必要性，但我遇到了一些问题，因为 PHP 通过表单传递的字符串做了一些方便奇怪的事情。

我试图“打破”的陈述很简单：

`SELECT username FROM users WHERE username = '$username' AND password = '$password'`

但是像传递`X' or TRUE;--`密码这样的操作实际上并不起作用，因为 PHP 会自动转义单引号并将语句转换为：

`SELECT username FROM users WHERE username = '$username' AND password = 'X\' or TRUE;--'`

由于转义的单引号，密码相等性保持不变。这种说法被认为是安全的吗？不然怎么破？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T16:27:51.243

听起来您打开了魔术引号。我绝对不会认为该语句是安全的，就像您将其移动到运行 PHP 5.4 的服务器一样，它会完全易受攻击。魔术引号长期以来一直是一个弃用的功能，它可能会弄乱应用程序的其他部分，所以不要依赖它。

为了演示，只需`magic_quotes_gpc = Off`在 php.ini 中设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T16:28:47.280

那是因为您在 PHP 环境中启用了魔术引号。它会自动转义字符串，但是它们已被弃用且不应使用。它们不是治愈方法，它们是补丁。您最好使用适当的卫生方法，例如`mysql_real_escape_string`。

[http://www.php.net/manual/en/security.magicquotes.what.php](http://www.php.net/manual/en/security.magicquotes.what.php)

编辑：还准备了陈述！

PHP 中的其他“不安全”安全函数：

`addslashes` - you might think it's safe, but it doesn't filter out multibyte characters that could cause injection.

# python - 非常简单的代码在c中加载python模块

> ID：10767956
> 
> 赞同：1
> 
> 时间：2012-05-26T16:24:30.120
> 
> 标签：python, c

我正在搜索一个非常小且简单的示例以在 C 应用程序中加载 python 模块。在我搜索的任何地方，我都会看到很长的例子，但我不明白。如果这是重复的共享 stackoverflow 链接，我将删除此问题。谢谢，我是 Python 新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T16:32:33.657

创建一个 Python 模块名称 reverse.py，如下所示：

```
def rstring(s):
    i = len(s)-1
    t = ''
    while(i > -1):
    t += s[i]
    i -= 1
    return t 
```

创建一个 C 应用程序，如下所示：

```
#include <Python.h>
int main()
{
    PyObject *strret, *mymod, *strfunc, *strargs;
    char *cstrret;
    Py_Initialize();
    PySys_SetPath("."); 
    mymod = PyImport_ImportModule("reverse");
    strfunc = PyObject_GetAttrString(mymod, "rstring");
    strargs = Py_BuildValue("(s)", "Hello World");
    strret = PyEval_CallObject(strfunc, strargs);
    PyArg_Parse(strret, "s", &cstrret);
    printf("Reversed string: %s\n", cstrret);
    Py_Finalize();
    return 0;
} 
```

现在确保将 reverse.py 和您的 C 应用程序保存在同一个文件夹中。之后，请编译并运行 C 示例应用程序。

请研究上面示例中的每一行，因为总共大约有 20 行，如果您对任何行有疑问，请告诉我，我很乐意回答。

由于我已经更正了这些示例，因此归功于此处的 SO Link：[Embedding Python into C - importing modules](https://stackoverflow.com/questions/7283964/embedding-python-into-c-problem-importing-modules)

# vim - 粘贴后如何跳转到粘贴内容的末尾？

> ID：10767960
> 
> 赞同：16
> 
> 时间：2012-05-26T16:25:33.553
> 
> 标签：vim

例如，我当前的文件内容是：

```
Hello world!
      ^------------------vim cursor here 
```

Vim 光标在字符处`w`。我粘贴了一个单词`foobar`，内容变为`Hello Hello wfoobarorld`，光标在字符处`f`。但我希望光标在粘贴后立即`r`跳转。`foobar`有什么命令可以做到这一点吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-26T16:36:30.540

默认情况下，`p`and`P`命令应该将光标留在粘贴文本的最后一个字符处。`gp`并`gP`前进一个字符（粘贴文本后的第一个字符）。

粘贴文本时，您有标记`[`并`]`设置为粘贴文本的开头和结尾。因此，您可以使用``[`和``]`将光标移动到粘贴内容的开始/结束。

# php - 用于快速开发的 PHP PDO 类

> ID：10767967
> 
> 赞同：0
> 
> 时间：2012-05-26T16:26:21.917
> 
> 标签：php, pdo

您能否推荐一个 PDO 类，它允许您执行以下操作：

```
$db->insert('mytable', $array); 
$db->update('mytable', $array); 
$db->delete('mytable', $array); 
```

所有的语句都已经在内部“准备好/绑定”了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T16:27:57.513

这个包装类非常好：[http ://code.google.com/p/php-pdo-wrapper-class/](http://code.google.com/p/php-pdo-wrapper-class/)

示例代码：

```
$db->insert("mytable", array(
    "FName" => "John",
    "LName" => "Doe",
    "Age" => 26,
    "Gender" => "male"
)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T16:30:09.837

看看redbeanphp。Redbeanphp.com。它使用 PDO 作为后端，可以做你想做的事。

# iphone - iPhone/iOS - 连接和断开蓝牙耳机

> ID：10767974
> 
> 赞同：3
> 
> 时间：2012-05-26T16:27:14.923
> 
> 标签：iphone, ios, api, bluetooth, headset

我已将 iPhone 与特定的蓝牙耳机配对。我想以编程方式连接和断开耳机，但似乎找不到 API 来完成此操作。

我只是错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T17:03:31.730

不幸的是，没有与蓝牙耳机交互的 API。

有用于连接到蓝牙 LE 设备的 API，称为[`CoreBluetooth`](https://developer.apple.com/library/ios/documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/CoreBluetooth_Framework.pdf). 但这些 API 不能用于连接蓝牙耳机。用户必须使用设置应用程序连接到他们。

# php - 函数调用后定义数组索引

> ID：10767976
> 
> 赞同：8
> 
> 时间：2012-05-26T16:27:34.460
> 
> 标签：php, arrays, function

在 C# 和 JavaScript 等其他语言中，我可以使用函数调用来访问数组的索引，例如

```
getMyArray()[0] 
```

这将允许我访问结果的第一个索引，而不是传回整个数组然后设置结果。

但是，此快捷方式不适用于 PHP。有没有办法获得这个快捷方式？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-26T16:28:05.097

您需要运行 PHP 5.4 才能使用[数组取消引用](http://razvantudorica.wordpress.com/2011/07/14/array-dereferencing-support-in-php-5-4-0/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T16:31:16.453

```
// PHP 5.4
$item = getMyArray()[0];

// Older than 5.4: (not recommended)
list($a)   = getMyArray();  // getMyArray()[0]
list(, $b) = getMyArray();  // getMyArray()[1] 
```

# javascript - 在卸载前打开弹出窗口

> ID：10767978
> 
> 赞同：0
> 
> 时间：2012-05-26T16:27:48.747
> 
> 标签：javascript, jquery

我想在退出时打开弹出窗口（不是“留在页面上或离开”框）。我无法让这个工作。我在哪里犯错？

```
 function poponload()
{
testwindow = window.open("http://www.google.com", "mywindow",     
"location=1,status=1,scrollbars=1,width=5,height=5,left=100,top=100");
}

$(document).ready(function () {

window.onbeforeunload = function () { 

poponload();

});

$(window).unload(function () {

poponload();

});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:13:48.343

您的代码有语法错误。在 onbeforeunload 函数赋值之后有一个多余的括号。删除它，看看是否可以解决您的问题。

```
window.onbeforeunload = function () { 

poponload();

}; 
```

# php - PHP 环境变量

> ID：10767979
> 
> 赞同：2
> 
> 时间：2012-05-26T16:27:50.743
> 
> 标签：php, windows

我不确定为什么我仍然收到 PHP 未被识别为内部或外部命令错误。这是我的环境变量：

```
C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files (x86)\EgisTec MyWinLocker\x64;C:\Program Files (x86)\EgisTec MyWinLocker\;C:\Program Files\Intel\WiFi\bin\;C:\Program Files\Common Files\Intel\WirelessCommon\;C:\strawberry\c\bin;C:\strawberry\perl\site\bin;C:\strawberry\perl\bin; C:\PHP\; 
```

我的 PHP.exe 位于“C:\PHP\”中，所以我不确定为什么会出现此错误。：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T16:34:15.340

我没有 Windows 机器来验证这一点，但我很确定`;`分隔符后不能有空格。去掉前面的空格`C:\PHP`，可能是无害的，但也去掉尾随的`\`。

```
C:\Program Files (x86)\NVIDIA Corporation\;...snip...;C:\strawberry\perl\bin;C:\PHP
-------------------------------------------------------------------------^^^^^ 
```

根据您启动 PHP 的方式，您可能需要退出 Windows 并重新登录以在`%PATH%`您的环境中传播新的内容，尽管我怀疑这是必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:38:15.820

仅尝试：C:\PHP（没有最后一个 '\'）。保存更改后，重新启动计算机并将其写入 cmd

```
php -v 
```

验证。

# php - sudo pecl 在 os x lion 上安装 apc 错误

> ID：10767983
> 
> 赞同：13
> 
> 时间：2012-05-26T16:27:56.830
> 
> 标签：php, osx-lion, apc, osx-mavericks, pecl

我尝试在 OS X Lion ( ) 上使用 pecl 安装 APC，`sudo pecl install apc`但它抱怨缺少 pcre.h 文件：

```
In file included from /private/tmp/pear/temp/APC/apc.c:44:
/usr/include/php/ext/pcre/php_pcre.h:29:10: fatal error: 'pcre.h' file not found
#include "pcre.h" 
```

所以我使用 MacPorts 安装 pcre 包（`sudo port install pcre`）但它仍然抱怨。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-26T16:27:57.017

`pecl`我认为这是因为 MacPorts 将头文件安装在与预期不同的位置。

为了解决这个错误，我符号链接`pcre.h`到`/usr/include`：

```
sudo ln -s /opt/local/include/pcre.h /usr/include/ 
```

运行`sudo pecl install apc`时它编译得很好。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-08-14T16:36:50.910

“brew install pcre”对我有用。

# android - Android 将手机与平板电脑区别开来

> ID：10767989
> 
> 赞同：1
> 
> 时间：2012-05-26T16:28:42.813
> 
> 标签：android, android-manifest, google-play, android-market-filtering

我有两种不同的 apk - 一种用于手机，它具有纵向，另一种用于横向平板电脑。那里也使用了不同的drawables。所有可绘制对象都存储在“drawable-nodpi”中，而布局仅存储在“layout”文件夹中。我想在清单中将平板电脑与手机区分开来，考虑到平板电脑的所有尺寸都大于 7 英寸。主要问题是三星 Galaxy Tab P1000。它有 7 英寸显示屏，1024x600 分辨率，所以它必须是平板电脑。但如果我从 Google Play 下载应用程序，它需要手机版本，因为它的屏幕密度是“hdpi”。我认为基本设置是正确的，因为 Acer Iconia A100 在硬件上也具有相同的参数，但具有适用于平板电脑的“mdpi”密度下载版本。

你能告诉我如何区分手机和平板电脑并正确设置我的清单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T15:28:30.927

抱歉很久没看这里...

单apk绝对不适合我。我找到了解决这个问题的方法。对于仅适用于平板电脑的 apk，您应该在清单中添加以下内容：

```
<compatible-screens>
    <screen android:screenSize="large" android:screenDensity="hdpi" />
    <screen android:screenSize="large" android:screenDensity="mdpi" />
    <screen android:screenSize="large" android:screenDensity="213" /> <!--nexus7-->
    <screen android:screenSize="xlarge" android:screenDensity="mdpi" />
    <screen android:screenSize="normal" android:screenDensity="xhdpi" />
    <screen android:screenSize="large" android:screenDensity="xhdpi" />
</compatible-screens> 
```

对于仅适用于手机的 apk：

```
<compatible-screens>
    <screen android:screenSize="normal" android:screenDensity="hdpi" />
    <screen android:screenSize="normal" android:screenDensity="xhdpi" />
</compatible-screens> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:12:23.157

您是否尝试过构建单个 APK ？它应该更容易。请查看此官方[指南](http://developer.android.com/guide/market/publishing/multiple-apks.html#SingleAPK)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:24:05.437

我有同样的问题。Galaxy tab P1000 是一个大屏幕，从 Hdpi 拾取，但在现实生活中它是 Mdpi。使用 HDPI 的布局看起来很糟糕，我认为这个问题来自三星......

# javascript - 如何使用 jQuery 的 on(..) 动态绑定多个事件

> ID：10767991
> 
> 赞同：11
> 
> 时间：2012-05-26T16:28:47.893
> 
> 标签：javascript, jquery, javascript-events

我正在尝试创建利用 jQuery 的 .on() (ex-live()) 来绑定多个事件。它适用于 document.ready 上存在的元素，但如果我在页面加载后动态添加第二个链接，则不会触发我的事件处理程序。

这是有道理的，因为最外层的方法会遍历元素，并且不会监听新添加的 DOM 节点等。 .on(..) 是监听新 DOM 节点的方法，但需要一个事件名称参数，我不需要直到我拥有 DOM 节点。

似乎是小鸡和鸡蛋的情况。

想法？

```
<a href="/foo.html" class="js-test" data-test-events="['click', 'mouseover']">Test 1</a>
<a href="/foo.html" class="js-test" data-test-events="['mouseout']">Test 2</a>

$(function() { 
    $('.js-test').each(function() { 
        var $this = $(this);
        var e, events = $this.data('test-events');

        for(e in events) {
            $this.on(events[e], function() {
                console.log("hello world!")
            });
        }
    });
}); 
```

更新，以下似乎也有效；$(this) 似乎不在正确的范围内。

```
<a href="/foo.html" class="js-test" data-test-events="click mouseover">Test 1</a>
<a href="/foo.html" class="js-test" data-test-events="mouseout">Test 2</a>

$(function() { 
    $('.js-test').on($(this).data('test-events'), function() { 
        // call third party analytics with data pulled of 'this'
    });
}); 
```

* * *

更新1：

我认为我最好的选择是为我想要支持的所有方法创建特殊的 .on 方法，如下所示：

```
$(document).on('click', '.js-test[data-test-events~="click"]' function(event) {
    record(this, event);
});

$(document).on('mouseover', '.js-test[data-test-events~="mouseover"]', function(event) {
    record(this, event);
});

 ... etc ... 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-26T16:29:33.800

```
$('a.js-test').on('click mouseover', function(event) {
  // you can get event name like following
  var eventName = event.type; // return mouseover/ click
  console.log(eventName);
  // you code
  console.log('Hello, World!');
}); 
```

**[示例示例](http://jsfiddle.net/thecodeparadox/5Gj3E/6/)**

如果您想要现场活动之类的东西，那么：

```
$('body').on('click mouseover', 'a.js-test', function(event) {
  // you can get event name like following
  var eventName = event.type; // return mouseover/ click
  console.log(eventName);
  // you code
  console.log('Hello, World!');
}); 
```

根据您上次的编辑，试试这个：

```
$('.js-test').on($('.js-test').data('test-events'), function() {
    console.log("hello world!")
}); 
```

**[编辑示例](http://jsfiddle.net/thecodeparadox/LTrSk/1/)**

对于现场活动委托

```
$('body').on($('.js-test').data('test-events'), '.js-test', function() {
    console.log("hello world!")
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T22:20:00.830

恐怕您不能这样做，因为您需要为 jQuery 提供 DOM 元素或事件名称。您可以手动将事件绑定到新的 DOM 元素或绑定所有可能在 data-test-events 中的事件（如果您有 3-5 个，所有 DOM 事件将成为一个愚蠢而缓慢的解决方案）并检查您的元素具有其中之一：

```
$('body').on("mouseover click mouseout mouseenter mouseleave", '.js-test', function(e) {
    if (!$.inArray(e.type, $(this).data('test-events').split(' '))) {
        return;
    }
    console.log("hello world!");
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T23:35:49.663

如果您想在将匹配元素添加到 DOM 时触发事件，您可能需要查看 livequery - [http://docs.jquery.com/Plugins/livequery](http://docs.jquery.com/Plugins/livequery)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T03:55:11.390

此代码将允许您将多个事件处理程序注册为函数数组。它已经过测试并且可以正常工作。请参阅此[jsfiddle 演示和测试用例](http://jsfiddle.net/tQq5x/)。

**JavaScript：**

```
$(document).ready(function() {
    eventFnArray = [];
    eventFnArray["click"] = function(e) { 
        if(e.type != "click") return ;
        alert("click event fired - do xyz here");
        // do xyz
    };
    eventFnArray["mouseover"] = function(e) { 
        if(e.type != "mouseover") return ;
        alert("mouseover fired - do abc here"); 
        // do abc
    };
    eventFnArray["mouseout"] = function(e) { 
        if(e.type != "mouseout") return ;
        alert("mouseout fired - do JKL here"); 
        // do JKL
    };

    $('.js-test').each( (function(fn) { 

        return function(i) {   
            if(i != 0) return;
            var _that = this;
            var events = [];
            events = $(_that).attr("data-events").split(" ");

 //           alert($(_that).attr("data-events") + " : " + events.join(" "));

            $(this).parent().on(
                events.join(" "), 
                '.js-test', 
                function() {
                    console.info("hello - this is the " + event.type + " event");
      //             alert("data-events = " + $(this).attr("data-events") + " : event.type = " + event.type);
                    // delegate to the correct event handler based on the event type
                    if($(this).attr("data-events").indexOf(event.type) != -1)
                        fn[ event.type ](event);
                }
            );
        } 
    })(eventFnArray));    // pass function array into closure

}); 
```

**HTML：**

```
<div id="container">
    <a href="#" class="js-test" data-events="click mouseout mouseover">Test 1</a>
    <a href="#" class="js-test" data-events="mouseover">Test 2</a>
</div> 
```

**测试添加更多元素：**

这里有3个测试用例：

```
// adds a link with the click event attached.
$('#container').append("<a href='#' class='js-test' data-events='click'>TEst333</a>");

// adds a link with the mouseover event 
$('#container').append("<a href='#' class='js-test' data-events='mouseover'>TEst444</a>");

// adds a link with mouseout
$('#container').append("<a href='#' class='js-test' data-events='mouseout'>TEs555</a>");

// adds a link with both mouseover and mouseout attached
$('#container').append("<a href='#' class='js-test' data-events='mouseout mouseover'>TEstLast</a>");

// mouseout and click
$('#container').append("<a href='#' class='js-test' data-events='mouseout click'>TEstLastForREAL</a>"); 
```

**警告：**

我注意到您的一个链接同时附加了单击和鼠标悬停。虽然此代码将处理每个链接的多个事件，如最后一个测试用例所示，但如果存在 mouseover 事件，则不会触发 click 事件。

这不是上述代码中的错误，而是处理事件的方式，如下所示：

```
// mouseover and mouseout fire, but not the click event
$('#container').on('mouseover mouseout click', '.js-test',function() { alert("afdas " + event.type); }); 
```

# curl - 使用 cURL 从网页中获取确切的变量

> ID：10767993
> 
> 赞同：1
> 
> 时间：2012-05-26T16:29:22.900
> 
> 标签：curl

使用下面的代码，我们可以获得网页的完整源代码，

```
<?php
$url1 = "http://adfoc.us/426491";
$ch = curl_init ("$url1");
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt ($ch, CURLOPT_REFERER, "http://google.com/");
curl_setopt ($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20100101 Firefox/12.0');
curl_setopt ($ch, CURLOPT_HTTPHEADER, array('Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'));
$page = curl_exec ($ch);

echo '<textarea style="width:100%; height: 100%;">' . $page . '</textarea>';
?> 
```

但我的问题是如何从页面中获取特定变量，并回显它

例如：

```
var click_url = "http://somesite.com/serve/click/?id=426491&servehash=af183123696fe5064846368ca7191359&timestamp=1337499663"; 
```

我是cURL的新手，所以请解释一下谢谢:)

# android - Overriding back button press from Activity's subClass in Android

> ID：10767997
> 
> 赞同：0
> 
> 时间：2012-05-26T16:30:02.210
> 
> 标签：android

I'm making a game with OpenGL Es 1.1 and i want to implement back button or menu button functionality to my game.(I mean hardware buttons).I have some subClasses so what i have to do when i want to handle hardware button press from subClasses?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T16:51:15.950

You need to implement an onKeyDown listener and check to see what key is pressed.

Sample:

```
@Override
public boolean onKeyDown(int keycode, KeyEvent e) {
     switch(keycode) {
         case KeyEvent.KEYCODE_MENU:
             handleMenuButton();
             return true;
         case KeyEvent.KEYCODE_BACK:
             handleBackButton();
             return true;
     }
     return super.onKeyDown(keycode, e);
} 
```

Also note that for the back and menu buttons to fire reliably, you need to set `setFocusableInTouchMode` to `true`. See the [devguide here](http://developer.android.com/reference/android/view/View.html) (scroll down to "Touch Mode").

# jquery - 动态更新 jquery 选项卡号以反映 php 循环调用的行号

> ID：10767999
> 
> 赞同：0
> 
> 时间：2012-05-26T16:30:36.733
> 
> 标签：jquery, widget

我正在完成一个项目，并正在使用 jquery 来构建包含表单元素的选项卡（不确定是否可行，但正在尝试）。

使用选项卡小部件，有没有办法为使用 for 循环动态调用的每一行设置选项卡编号？

ETA：我认为我应该编辑以添加问题的另一部分而不是提出新问题？我真的很接近让这个工作，但尽管花了过去几个小时阅读文档并尝试不同的事情，但我似乎无法做到这一点。我可以得到一些帮助来学习如何格式化吗？

我以为我可以加载：但它并不完全有效。我很确定我（最终）正确格式化了 php 代码以返回将显示选项卡元素的结果，但是查看代码我肯定没有正确输入它，因为它仍然没有给我选项卡号. 我不知道我是否错误地引用了选项卡编号函数，或者错误地编写了函数，或者两者兼而有之。

TIA 的任何建议！

```
<script>

    $(function() {

        $( "#tabs" ).tabs({

            load: function numTabs(){
               i = 0;
                       $('.ui-tabs-nav li').each(function(){

                          $(this).children('a').prepend(i + '.');
                          i++;
            });
    }
        });
    });

</script> 
```

这是html/php：

```
<?php
include_once('dbxxx.php');
$conn = new DatabaseConn();

$query = "SELECT xxx_id, xxx_name FROM xxxor ORDER BY xxx_id";

$result = mysql_query($query);

if($result){

    echo '<div id="tabs"><ul><br />';

$numfields = mysql_num_fields($result);

$data = array();

$flist = array();

for($i=0;$i<$numfields;$i++)$flist[] = mysql_field_name($result,$i);

        $data[0] = $flist;

        while($row = mysql_fetch_assoc($result)){

            $data[] = $row;

        echo '<li><a href="#tabs-'.$numTabs.'"><input type="hidden" value="'. $row['xxx_id'] .'" />' . $row['xxx_name'] . '</a></li>';

    $query2 = "SELECT zzz_id, zzz_name FROM zzzce ORDER BY zzz_id";

    $result2 = mysql_query($query2);

    if($result2){

        echo '<div id="tabs-'.$numTabs.'">';

        $numzzz = mysql_num_fields($result2);

        $data2 = array();

        $flist2 = array();

        for($j=0;$j<$numzzz;$j++)$flist2[] = mysql_field_name($result2,$j);

        $data2[0] = $flist2;

        while($row = mysql_fetch_assoc($result2)){

            $data2[] = $row;

            echo '
            <input type="checkbox" value="'. $row['zzz_id'] .'" />' . $row['zzz_name'] . '';
            }
            echo '<br /></div>';
    }
    }

echo '</ul></div><br />';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:35:49.460

您可以遍历它们：

```
function numTabs(){
    i = 1;
    $('.ui-tabs-nav li').each(function(){
       $(this).children('a').prepend(i + '.');
       i++;
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T20:15:49.963

尝试这个：

```
<script>

$(function(){
    $( "#tabs" ).tabs({
        load: function(){
           i = 0;
           $('.ui-tabs-nav li').each(function(){
             $(this).children('a').prepend(i + '.');
             i++;
           });
        }
    });
});

</script> 
```

您在那里有 numTabs() 函数名称，但不需要它，因为您已经在调用一个操作。你还有一个额外的'}'。