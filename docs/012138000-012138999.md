# StackOverflow 问答 12138000-12138999

# magento - magento 视频推荐扩展设置和配置

> ID：12138005
> 
> 赞同：0
> 
> 时间：2012-08-27T07:43:06.870
> 
> 标签：magento, magento-1.7

使用 Magento 社区版本 1.7.0.2。
下载的视频推荐：[aw_vidtest-1.3.0.community_edition](http://ecommerce.aheadworks.com/magento-extensions/video-testimonials.html)

我刚刚下载并安装了这个扩展。遵循扩展创建者 aHead Works[在此页面上](http://doc.aheadworks.com/magento-extensions/AW_Vidtest-1.3/readme.html)推荐的说明。但是一旦在**目录 > 视频推荐 > 设置上****注册 youtube.com**步骤，我收到了 404 错误。其他两个选项“所有视频”和“待处理视频”工作正常，网格正在显示。

 **检查文件是否正确复制并且一切都在其位置。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:27:12.373

我自己回答。与 Magento 的许多其他问题一样，只需要注销/登录。**

# php - 如果没有人能指出我正确的方向，Curl 能够做到这一点吗？

> ID：12138008
> 
> 赞同：2
> 
> 时间：2012-08-27T07:43:13.663
> 
> 标签：php, curl

假设我的客户在我的网站上输入了他们的车号和 ID。有什么方法可以使系统自动化，`https://vrl.lta.gov.sg/lta/vrl/action/pubfunc?ID=EnquireRebateBeforeDeReg`当客户输入值时，从站点检索所有汽车详细信息并将其存储在我的服务器上？

我的网站是用 php 编码的。有人可以指出正确的方向或提供一些此类代码的示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:39:44.510

你想做的事情是不可能的。您可以要求用户输入您网站上的所有信息，也可以输入目标网站上的所有信息。除非您有权修改目标站点，否则无法远程检索信息。

您可能希望查看目标站点是否提供一些您可以访问的 API 或 Web 服务，这些服务将允许您根据车辆编号和 ID 检索数据。

# fancybox - 如何在 MVC3 中显示弹出窗口时获得覆盖？

> ID：12138009
> 
> 赞同：0
> 
> 时间：2012-08-27T07:43:16.917
> 
> 标签：fancybox, popupwindow

嗨，当我的弹出窗口打开时，我所有的覆盖功能都没有被触发..不知道我在哪里做错了这是我在 MVC 应用程序中调用我的弹出窗口的方式..我使用花式框作为我的弹出窗口

```
 <script type="text/javascript">
   $(document).ready(function () {       
    $(".fancybox").fancybox({ modal: true
     });
    $(".fancybox").fancybox();
    }); 
```

**编辑**

将上面的脚本更改为

```
 <script type="text/javascript">
   $(document).ready(function () {       
    $(".fancybox").fancybox({ modal: true
     }); 
```

# android - 在 onLocationUpdate 方法中获取位置更新的空指针异常

> ID：12138011
> 
> 赞同：0
> 
> 时间：2012-08-27T07:43:18.993
> 
> 标签：android, nullpointerexception, geocoding, locationmanager, locationlistener

提前感谢您的帮助

我试图在位置更新方法中显示经度和纬度，但出现空指针异常。我的主要活动代码是

```
public class LocationStat extends Activity implements LocationListener{
double logi;
double lat;
long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in Millisecon
Location loc;
LocationManager manager;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    manager=(LocationManager)getSystemService(Context.LOCATION_SERVICE);
    manager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, 
            MINIMUM_TIME_BETWEEN_UPDATES, 
            MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
            new LocationStat()
    );
   Toast.makeText(this,"activity created...",Toast.LENGTH_LONG).show();
   loc=manager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

   String s;
   if(loc!=null)
   {
     logi=loc.getLongitude();
     lat=loc.getLatitude();
      s="Lat:" + lat + "\nLong:" + logi;

   }
   else
   {
    s ="no location found";
   }

   Toast.makeText(LocationStat.this,"Your Current Position is:\n" +
           s,Toast.LENGTH_LONG).show();
   webcall(logi,lat);
   //getLoc();

}

public void onLocationChanged(Location location) {
    String message = String.format(
            "New Location \n Longitude: %1$s \n Latitude: %2$s",
            location.getLongitude(), location.getLatitude()
    );
    if(!message.equals(null))
    {
    Toast.makeText(this, message,Toast.LENGTH_LONG).show();
    }
    else
    {
        Toast.makeText(this, "result is null",Toast.LENGTH_LONG).show();
    }
    //getLoc();
    //webcall(location.getLongitude(),location.getLatitude());
}

public void onStatusChanged(String s, int i, Bundle b) {
    Toast.makeText(LocationStat.this, "Provider status changed",
            Toast.LENGTH_LONG).show();
}

public void onProviderDisabled(String s) {
    Toast.makeText(LocationStat.this,
            "Provider disabled by the user. GPS turned off",
            Toast.LENGTH_LONG).show();
}

public void onProviderEnabled(String s) {
    Toast.makeText(LocationStat.this,
            "Provider enabled by the user. GPS turned on",
            Toast.LENGTH_LONG).show();
} 
```

manifest中获取的权限如下

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.INTERNET" /> 
```

而logcat如下

```
08-27 07:10:33.079: E/AndroidRuntime(485): FATAL EXCEPTION: main
08-27 07:10:33.079: E/AndroidRuntime(485): java.lang.NullPointerException08-27 07:10:33.079: E/AndroidRuntime(485):     at    android.content.ContextWrapper.getResources(ContextWrapper.java:80)
08-27 07:10:33.079: E/AndroidRuntime(485):  at android.widget.Toast.<init>  (Toast.java:89)
08-27 07:10:33.079: E/AndroidRuntime(485):  at android.widget.Toast.makeText(Toast.java:231)
08-27 07:10:33.079: E/AndroidRuntime(485):  at com.android.trace.LocationStat.onLocationChanged(LocationStat.java:83)
08-27 07:10:33.079: E/AndroidRuntime(485):  at android.location.LocationManager$ListenerTransport._handleMessage(LocationManager.java:191)
08-27 07:10:33.079: E/AndroidRuntime(485):  at android.location.LocationManager$ListenerTransport.access$000(LocationManager.java:124)
08-27 07:10:33.079: E/AndroidRuntime(485):  at android.location.LocationManager$ListenerTransport$1.handleMessage(LocationManager.java:140)
08-27 07:10:33.079: E/AndroidRuntime(485):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-27 07:10:33.079: E/AndroidRuntime(485):  at android.os.Looper.loop(Looper.java:123)
08-27 07:10:33.079: E/AndroidRuntime(485):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-27 07:10:33.079: E/AndroidRuntime(485):  at java.lang.reflect.Method.invokeNative(Native Method)
08-27 07:10:33.079: E/AndroidRuntime(485):  at java.lang.reflect.Method.invoke(Method.java:521)
08-27 07:10:33.079: E/AndroidRuntime(485):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-27 07:10:33.079: E/AndroidRuntime(485):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-27 07:10:33.079: E/AndroidRuntime(485):  at dalvik.system.NativeStart.main(Native Method)
08-27 07:10:44.602: I/Process(485): Sending signal. PID: 485 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:04:30.560

```
!message.equals(null) 
```

即使消息实际上为空，也是假的。使用任一

```
message != null 
```

测试实际无效或

```
TextUtils.isEmpty(message) 
```

同时检验空虚或空虚

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:01:49.310

Hy 选择 GPS Provider whit 标准 getBestProvider，即使你没有标准。我得到了同样的错误，但这已经解决了。

# iphone - 我是否需要拥有 iPhone 才能获得签名密钥？（或者：我可以在没有 iPhone 的情况下构建我的 Phonegap 应用程序吗？）

> ID：12138014
> 
> 赞同：1
> 
> 时间：2012-08-27T07:43:21.357
> 
> 标签：iphone, cordova, dreamweaver

我希望能够使用 Phonegap 构建一个 iPhone 应用程序。我已经构建了整个站点，现在我只是希望能够构建一个可以放在实际 iPhone 设备上并对其进行测试的构建。

长话短说，我正在尝试使用现在支持 Phonegap 的 Dreamweaver 进行构建。

我借了朋友的 Macbook Air，申请了 Apple 开发者许可证，并支付了 100 美元的年费。我认为就苹果协议而言，我很高兴。

但是，在 Dreamweaver 中使用 Phonegap 构建的说明中，似乎我必须有一个称为“签名密钥”的东西，而且无论这个密钥是什么，它似乎都与设备相关联。

我自己没有任何 Apple 设备，我只是一个没有预算的孤独开发者，无法根据需要出去购买 Apple 设备。我希望我可以在 iTunes 上提供我的应用程序，让拥有 Apple 设备的朋友下载它，并让他们帮助我以这种方式测试我的应用程序。

我对这个“签名密钥”需要设备的理解是否正确？

当我自己没有 Apple 设备时，我该如何跳过 Apple 的所有障碍？我有一台 Macbook Air 笔记本电脑，我可以不时借用，如果我借朋友的 iPhone，我只能拿着它，只要他们愿意站在我身边让我玩弄它。毕竟，这是他们的手机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T08:29:46.277

不，您无需拥有任何 Apple 产品即可拥有“签名密钥”。但是您需要有一台 IOS 计算机来开发您的应用程序。此外，如果不使用密钥对其进行签名，则无法将应用程序存储或安装到苹果设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:14:46.610

一种选择是[Phonegap Build](https://build.phonegap.com/)，这是一项可以为您编译应用程序的服务。

# javascript - 重新设计具有固定大小的站点

> ID：12138015
> 
> 赞同：1
> 
> 时间：2012-08-27T07:43:23.237
> 
> 标签：javascript, html, css

事实证明这真的很有趣，我在这个网站 [媒体查询中得到了我的问题和回复，并调整了现成的网站](https://stackoverflow.com/questions/12136856/media-queries-and-to-adapt-the-ready-made-site) 现在似乎他们只针对“宽度”，那么屏幕的高度呢，那个长宽高短？

我想将我的 topmenu+body+footer 调整到 800px 的高度，并且还尝试了

```
@media all and (min-height: 768px) and (max-height: 959px) {
div#container{
  position:relative;
  margin:0 auto; 
  height:70%;
  min-height:70%;}

div#content {
  min-height: 350px;
}
} 
```

但它没用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:47:06.807

您可以使用以下方法检测纵向或横向：

```
/* Portrait */
@media screen and (orientation:portrait) {

} 
```

或者

```
/* Landscape */
@media screen and (orientation:landscape) {

} 
```

或者，如果您想更精确：

```
@media screen and (device-aspect-ratio: 16/9) {

} 
```

或者，更常用的：

```
@media all and (max-height: 1000px) and (min-height: 700px) {

} 
```

# symfony - Sonata Admin Bundle 类型集合定制

> ID：12138016
> 
> 赞同：8
> 
> 时间：2012-08-27T07:43:23.517
> 
> 标签：symfony, symfony-sonata, sonata-admin

例如，我有 3 个实体：

*   类别
*   子类别
*   产品

在 SonataAdminBundle 中，我希望能够在编辑类别时添加子类别，在编辑子类别时添加产品。

按照这个想法，我创建了字段，但 SonataAdminBundle 开始与他们一起玩“盗梦空间”。

当我打开类别时，我会看到包含相关产品的相关子类别。

在这种情况下如何切断“产品”字段？

**更新：**

我的课程（简化）如下所示：

```
// .../CoreBundle/Admin/CategoryAdmin.php
protected function configureFormFields(FormMapper $formMapper) {
    $formMapper
    ->add('name', null, array('required' => true))
    ->add('url', null, array('required' => true))
    ->add('subcategories', 'sonata_type_collection', array('by_reference' => true),     array(
  'edit' => 'inline',
  'sortable' => 'pos',
  'inline' => 'table',));
}

// .../CoreBundle/Admin/SubcategoriesAdmin.php
protected function configureFormFields(FormMapper $formMapper)
{
    $formMapper
            ->add('name', null, array('label' => 'name'))
            ->add('category_id', null, array('label' => 'Category'))
            ->add('url', null, array('label' => 'Url'))
            ->add('products', 'sonata_type_collection',
                  array('by_reference' => false),
                  array(
                       'edit' => 'inline',
                       'sortable' => 'pos',
                       'inline' => 'table',
                  ));
}

// .../CoreBundle/Admin/ProductsAdmin.php
protected function configureFormFields(FormMapper $formMapper) {
    $formMapper
            ->add('name', null, array('label' => 'Заголовок'))
            ->add('subcategory_id',  null, array('label' => 'Subcategory'));
} 
```

Schema 看起来像这样： ![在此处输入图像描述](../Images/9c1f8d26f86ca7bff6ff9991a52a5bc9.png) 在 AdminBundle 中看起来像这样： ![在此处输入图像描述](../Images/30b551d67f389c748e178446685890dd.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T00:55:46.570

你为什么不尝试这些方面的东西：

```
// .../CoreBundle/Admin/SubcategoriesAdmin.php
protected function configureFormFields(FormMapper $formMapper)
{
    $formMapper
            ->add('name', null, array('label' => 'name'))
            ->add('category_id', null, array('label' => 'Category'))
            ->add('url', null, array('label' => 'Url'));

    // only show the child form if this is not itself a child form
    if (!$formMapper->getFormBuilder()->getForm()->hasParent()) {
        $formmapper
            ->add('products', 'sonata_type_collection',
                  array('by_reference' => false),
                  array(
                       'edit' => 'inline',
                       'sortable' => 'pos',
                       'inline' => 'table',
                  ));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-17T08:32:36.017

@likeitlikeit 给出的解决方案不适用于 symfony2.0。

不知何故，hasParent() 总是返回 false。

作为一种解决方法：

```
if (!is_numeric($formMapper->getFormBuilder()->getForm()->getName())) {} 
```

集合中的名称将是数字（0、1、2，...），而在单独的形式中，它将是一个哈希。

# blackberry - 是否有适用于 Blackberry OS 6.0 的 UI 处理程序

> ID：12138018
> 
> 赞同：-2
> 
> 时间：2012-08-27T07:43:30.437
> 
> 标签：blackberry

我正在 BB OS 6.0 中开发一个应用程序，是否有任何 UI 处理程序可以更新线程中更改的 UI 更改。谁能给我一些示例链接

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T09:30:15.957

你可以做几件事。推荐的方法是将与 UI 相关的代码包装在 中`Runnable`，然后调用[`Application.getApplication().invokeAndWait(Runnable)`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/system/Application.html#invokeAndWait%28java.lang.Runnable%29)或[`Application.getApplication().invokeLater(Runnable)`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/system/Application.html#invokeAndWait%28java.lang.Runnable%29)。这两者的区别在于`invokeAndWait`阻塞，直到事件线程可用并执行Runnable任务；并将`invokeLater`Runnable 排入队列并立即返回。

还有[一个重载版本`invokeLater`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/system/Application.html#invokeLater%28java.lang.Runnable,%20long,%20boolean%29)来安排 Runnable 以重复执行。

您还可以将与 UI 相关的代码包装在同步块中，并[尝试锁定事件锁](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/system/Application.html#getEventLock%28%29)：

```
 synchronized(Application.getEventLock()){
        //GUI code here
    } 
```

您应该只锁定事件线程一小段时间，这也适用于使用方法提交的 Runnables `invoke`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:19:11.947

在线程中。利用

```
 UIApplication.getuiApplication.invokeLater(new Runnable().... 
```

在其运行方法中，根据需要更改 UI。它会反映。

# php - PHP 捕捉 cURL CURLOPT_TIMEOUT 和 CURLOPT_CONNECTTIMEOUT 事件并采取行动

> ID：12138022
> 
> 赞同：3
> 
> 时间：2012-08-27T07:43:48.957
> 
> 标签：php, events, curl

当检测到 CURLOPT_CONNECTTIMEOUT 和 CURLOPT_TIMEOUT 时，我想检测、捕获并做一些事情。

我该怎么做呢 ？

我有以下标题：

```
public static $userAgents = array(
    'FireFox3' => 'Mozilla/5.0 (Windows; U; Windows NT 5.1; pl; rv:1.9) Gecko/2008052906 Firefox/3.0',
    'GoogleBot' => 'Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)',
    'IE7' => 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)',
    'Netscape' => 'Mozilla/4.8 [en] (Windows NT 6.0; U)',
    'Opera' => 'Opera/9.25 (Windows NT 6.0; U; en)'
);
public static $options = array(
    CURLOPT_USERAGENT => 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)',
    CURLOPT_AUTOREFERER => true,
    CURLOPT_FOLLOWLOCATION => true,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_FRESH_CONNECT => true,
    CURLOPT_COOKIEJAR => "cookies.txt",
    CURLOPT_COOKIEFILE => "cookies.txt",
    CURLOPT_SSL_VERIFYPEER => false,
    CURLOPT_CONNECTTIMEOUT => 5,
    CURLOPT_TIMEOUT => 300,
        //CURLOPT_COOKIESESSION => false,
); 
```

和以下函数，其中 $res 是一个包含 html 文件名的数组

```
public function multiCurl($res, $options = "") {

    if (count($res) <= 0)
        return False;

    $handles = array();

    if (!$options) // add default options
        $options = self::$options;

    // add curl options to each handle
    foreach ($res as $k => $row) {
        $ch{$k} = curl_init();
        $options[CURLOPT_URL] = $row['url'];
        curl_setopt_array($ch{$k}, $options);
        $handles[$k] = $ch{$k};
    }

    $mh = curl_multi_init();

    foreach ($handles as $k => $handle) {
        curl_multi_add_handle($mh, $handle);
    }

    $running_handles = null;
    //execute the handles
    do {
        $status_cme = curl_multi_exec($mh, $running_handles);
    } while ($cme == CURLM_CALL_MULTI_PERFORM);

    while ($running_handles && $status_cme == CURLM_OK) {
        if (curl_multi_select($mh) != -1) {
            do {
                $status_cme = curl_multi_exec($mh, $running_handles);
            } while ($status == CURLM_CALL_MULTI_PERFORM);
        }
    }

    foreach ($res as $k => $row) {
        $res[$k]['error'] = curl_error($handles[$k]);
        if (!empty($res[$k]['error']))
            $res[$k]['data'] = '';
        else {
            //$res[$k]['data'] = curl_multi_getcontent($handles[$k]);  // get results 
            file_put_contents(CRAWLER_FILES . $k . '.html', curl_multi_getcontent($handles[$k]));
        }

        // close current handler
        curl_multi_remove_handle($mh, $handles[$k]);
    }
    curl_multi_close($mh);
    return $res; // return response
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:56:17.403

要获取有关请求的信息，您可以查看`curl_getinfo`或`curl_multi_info_read`

并使用类似的东西：

```
curl_exec($ch);
if(!curl_errno($ch))
{
 $info = curl_getinfo($ch);
 echo 'Took ' . $info['total_time'] . ' seconds to send a request to ' . $info['url'];
} 
```

在信息数组中，您可以接收以下数据：

*   “网址”
*   “内容类型”
*   “http_code”
*   “header_size”
*   “请求大小”
*   “文件时间”
*   “ssl_verify_result”
*   “重定向计数”
*   “总时间”
*   “名称查找时间”
*   “连接时间”
*   “预转移时间”
*   “大小上传”
*   “大小下载”
*   “速度下载”
*   “速度上传”
*   “下载内容长度”
*   “上传内容长度”
*   “开始传输时间”
*   “重定向时间”
*   “证书信息”
*   “request_header”（仅当 CURLINFO_HEADER_OUT 由先前对 curl_setopt() 的调用设置时才设置）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T14:28:45.387

您有 2 个选项：

1.  在从 返回的数组中`curl_getinfo($ch)`，将 与`connect_time`您用于`CURLOPT_CONNECTTIMEOUT`选项的值进行比较。您还可以`total_time`与您使用的值进行比较`CURLOPT_TIMEOUT`。如果你转储出来，`curl_getinfo($ch)`你会看到还有一堆其他的计时器，你可以推断出你需要的任何东西。
2.  使用从返回的字符串`curl_error($ch)`。如果您的任何`*_TIMEOUT`选项被命中，这将返回一个字符串，如：

> 操作在 2001 毫秒后超时，收到 0 个字节

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-07T18:08:57.293

您可以使用如下函数尝试连接 3 次，如果不成功则停止。每次尝试都会增加超时时间，以防服务器“满”并且只需要一点时间。

```
public function functionName($attempt = 0) {
    if ($attemp >= 3) {
        return FALSE;
    }
    $TIMEOUT = 1;
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $TIMEOUT + $attempt);
    curl_exec($ch);
    if (!curl_errno($ch)) {
        $info = curl_getinfo($ch);
        if ($info['total_time'] > $TIMEOUT) {
            $this->functionName($attempt++);
        } else {
            return TRUE;
        }
    }
} 
```

# asp.net - Asp.Net 会员登录和机器密钥

> ID：12138023
> 
> 赞同：0
> 
> 时间：2012-08-27T07:43:51.207
> 
> 标签：asp.net, iis-7, web, asp.net-membership, machinekey

我有一个使用 ASP.Net 成员登录控件进行身份验证的 .Net 应用程序。我将我的应用程序作为网站 ( **www.mysite.com** ) 发布在 IIS7 上。一切正常。

现在我创建了一个新网站，并在其中添加了一个包含我的发布 ( **www.site.com/mysite** ) 的应用程序。在此发布中，我无法再登录（我收到“失败”错误）。在互联网上进行大量搜索后，我发现问题是由我的应用程序中自动生成的机器密钥引起的（我没有在 web.config 中设置机器密钥）。现在我无法设置机器密钥，因为我已经在我的应用程序中创建了用户，如果设置机器密钥，他们将无法再登录。

**我的问题是如何强制新网站 (www.site.com/mysite) 使用与第一个相同的机器密钥？**我尝试设置相同的 AppPool 但没有运气。

备注：我有其他发布工作正常并使用相同的机器密钥，但它们都是网站上的根应用程序（如 www.mysecondsite.com）。此配置 wwww.site.com/mysite 会发生什么/有什么不同导致应用程序生成新密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:29:56.493

不知道为什么没有人早点回答这个问题。您可以直接在 Web.Config 中输入。或在那里输入值。小心......任何使用此加密的应用程序数据作为密钥在之后被破坏。通常，您为每个站点设置机器并离开它。验证密钥用于加密。即密码匹配非对称方法。解密数据时使用解密密钥获取原始内容（对称）

```
<system.web>
     <machineKey decryptionKey="3815E48D71E4A60848B5213F1BBD7A2FEDAB229873421929" 
validationKey="3CB08C9B349194F28A340FBDA33BC94F7037FACCF9973CAFCAE4501D7F903BA7C539219FDCA77E2F864D848A60F249B639ED28925B90B3F7EECBB9A70EBE1607" />
</system.web> 
```

# c++ - Linux 二进制兼容性

> ID：12138026
> 
> 赞同：0
> 
> 时间：2012-08-27T07:44:01.890
> 
> 标签：c++, linux, debian

我正在 debian 6.0 发行版上开发我的 C++ 服务应用程序，我也在 debian 6.0 上编译二进制文件；二进制文件能否在 debian 5.0 发行版上运行良好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:57:05.420

不太可能，但你可以试试。将尽可能多的库链接为“静态”可能会有所帮助，这样不同系统上的不同版本就不会引起问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T08:10:56.587

最好在 Debian 5.0 上编译它们。

Linux 内核开发人员提供的是向后兼容性，而不是向前的。但更可能的是基本库版本（如 glibc）的问题。如果您害怕崩溃，请查看它们的变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:31:42.857

确保使用 Debian-5.0 上可用的 libstdc++/编译器版本。

例如，当使用`g++-4.3`您的二进制文件进行编译时，将链接到相应`libstdc++6-4.3`的 Debian-5.0 上应该可用的

请注意，squeeze (Debian-6) 上的默认 c++ 编译器是`g++-4.4`，它在 lenny 上**不可用。**

因此您可能必须将编译器/链接器显式设置为`g++-4.5`（显然是在安装它之后:-)）

```
$ ./configure CPP=cpp-4.5 CC=gcc-4.5 CXX=g++-4.5
$ make 
```

# iphone - 为动态表格单元格添加标题和 NSArray

> ID：12138028
> 
> 赞同：1
> 
> 时间：2012-08-27T07:44:10.583
> 
> 标签：iphone, ios, xcode, cocoa, ios4

```
[super viewDidLoad];

self.Lodgelist = [[NSArray alloc]
                  initWithObjects:@"Sterling ",
                  @"Sterling location  1234",
                  @"Sterling  location 12345",nil]; 
```

这是我的代码示例。我希望标题是城市名称“Sterling”我是 Objective-c 的新手。再次感谢您的帮助。

PS我不确定如何或将要添加代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:48:48.137

在 ViewController 的标题中添加 UITableViewDelegate，然后添加以下代码来更改 UITableView 的标题

```
 - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section

    {
         return [self.Lodgelist objectAtIndex:0];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:39:13.597

如果您只想将标题设置为标题，请使用

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
     return [self.Lodgelist objectAtIndex:section];
} 
```

如果您想在节标题（或某些视图）中添加一些图像和其他内容，请使用

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

# highcharts - Highcharts - 使用小 div 导出按钮选项偏移

> ID：12138033
> 
> 赞同：1
> 
> 时间：2012-08-27T07:44:52.123
> 
> 标签：highcharts

请参考下面的屏幕显示：

![在此处输入图像描述](../Images/63142c20365bbcba99a24a1eb0e45f9c.png)

当我单击绿色箭头下拉导出选项时，选项几乎完全隐藏在 div 之外。

如何调整偏移量？

这里的一个例子：http: [//jsfiddle.net/L76yV/](http://jsfiddle.net/L76yV/)

当 div 没有多少时间时会发生这种情况。像这样：

```
<div id="container" style="height: 170px"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T17:17:24.240

我的解决方案是将按钮放在底部容器上。

# amazon-web-services - AWS CloudFront - 如何设置 html 文件？

> ID：12138038
> 
> 赞同：4
> 
> 时间：2012-08-27T07:45:14.423
> 
> 标签：amazon-web-services, cache-control, amazon-cloudfront

我是 AWS CloudFront 的新手。我有一个简单的问题，我似乎无法弄清楚。

我有一个动态站点，它实际上只是一个允许编辑输入文章的 CMS。后来，CMS 生成静态 html 文件（我们在 drupal 6 下使用 boost 模块）。

所以我想不通的是如何为html文件设置缓存头来实现这个结果：

我希望 cloudfront 将 html 文件保留至少一个小时，但它必须确保该文件未被修改。如果文件被修改，它必须在 5 分钟内得到它。

我说得有道理吗？

我想出的是：

```
<FilesMatch "\.((html)|((html)\.gz))$">
        ExpiresByType text/html A300
        Header append Cache-Control "must-revalidate"        
  </FilesMatch> 
```

如果没有进行任何更改，它会在 5 分钟后保留文件吗？

我在测试自己时遇到了麻烦，因为我在不同的浏览器中得到了不同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T08:16:45.900

首先要了解的是 CloudFront 是一个*缓存*。缓存不会检查文件是否已更改。他们将简单地继续提供缓存的任何内容，直到该缓存过期。

您似乎在发布代码，告诉您的 Apache Web 服务器如何提供文件，但这与 Amazon CloudFront 完全无关。CloudFront（本身就是一个缓存）有自己的缓存设置，并且不遵循 Apache 的设置。

缓存数据的默认持续时间为 24 小时。您可以将 CloudFront 配置为缓存短至 1 小时（或者现在可能 1 分钟......我不记得临时的）。如果您需要缓存提前过期，您可以通过 AWS 控制台或 Web 服务 API 请求“失效”（您没有指定与 CloudFront 交互的方式）。

如果您希望缓存失效，那么*您*需要让您的 Drupal 模块在 CloudFront 生成新的 HTML 时向它发送一个失效请求。CloudFront 不会自行检查（同样，因为缓存不会这样做）。

根据个人经验，CloudFront 通常需要 3 到 15 分钟来清除它在世界各地运行的所有缓存服务器，以便它可以提取您的新内容。

这有意义吗？

# javascript - 将配置文件文件夹移动到 sdcard firefox mobile 14.0

> ID：12138039
> 
> 赞同：3
> 
> 时间：2012-08-27T07:45:20.950
> 
> 标签：javascript, android, firefox, blob, indexeddb

我正在编写一个移动 Web 应用程序来进行调查。Web 应用程序包含一组音频文件。我想将 indexedDB 中的所有音频文件作为 blob 存储。

默认情况下，Firefox mobile 14.0 for android 将配置文件文件夹存储在太小的内存中。当我将 Firefox 的数据移动到 SD 卡时，配置文件文件夹不会移动。

配置文件文件夹包含我们存储所有 indexedDB 基础的 indexedDB 文件夹。那我能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:09:52.193

也许将音频文件存储为带有 URL 的普通文件并确保使用[缓存清单](http://en.wikipedia.org/wiki/Cache_manifest_in_HTML5)正确缓存它们会是一个更好的主意。

看：

*   在 HTML5 Rocks 上[使用应用程序缓存的初学者指南](http://www.html5rocks.com/en/tutorials/appcache/beginner/)
*   在 HTML5 Doctor 上[使用应用程序缓存脱机](http://html5doctor.com/go-offline-with-application-cache/)
*   W3Schools 上的[HTML5 应用程序缓存](http://www.w3schools.com/html5/html5_app_cache.asp)

# jquery - 如何在 Jquery 中使用隐藏/显示功能？

> ID：12138043
> 
> 赞同：2
> 
> 时间：2012-08-27T07:45:39.897
> 
> 标签：jquery, html, button, hide, show

我有`HTML`一页带有一个切换按钮和一些下拉项。我的切换按钮就像开关一样。
我需要的？？当我点击“开”时，我需要隐藏下拉项目，当我点击
“关”时，我需要显示下拉项目。我是个新手`HTML , CSS, JQuery`。这是我的 HTML 文件代码，仅
适用于切换。

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" 
type="text/javascript"></script>
<script src="jquery/iphone-style-checkboxes.js" type="text/javascript"
charset="utf-8"></script>
<link rel="stylesheet" href="style.css" type="text/css" media="screen"
charset="utf-8" />
<style type="text/css">
   body {padding: 10px; }
 th {text-align: right;padding: 4px;padding-right: 15px;vertical-align: top; }
.css_sized_container .iPhoneCheckContainer {width: 250px; }
</style>

<script type="text/javascript" charset="utf-8">
$(window).load(function() {
  $('.on_off :checkbox').iphoneStyle();
  $('.disabled :checkbox').iphoneStyle();
  $('.css_sized_container :checkbox').iphoneStyle({
     resizeContainer: false, resizeHandle: false
  });
  $('.long_tiny :checkbox').iphoneStyle({
     checkedLabel: 'Very Long Text', uncheckedLabel: 'Tiny'
  });

  var onchange_checkbox = ($('.onchange :checkbox')).iphoneStyle({
    onChange: function(elem, value) { 
      $('span#status').html(value.toString());

    }
  });

  setInterval(function() {
    onchange_checkbox.prop(
     'checked', !onchange_checkbox.is(':checked')).iphoneStyle("refresh");
    return
  }, 2500);
});

</script>  
</head>
<body>
  <table><tr class="on_off">
    <td>
      <input type="checkbox" id="on_off" />
    </td>
  </tr></table>
</body>
</html> 
```

我知道以下功能用于隐藏和显示。

```
$(document).ready(function(){
   $("#hide").click(function(){
      $("p").hide();
   });
    $("#show").click(function(){
      $("p").show();
   });
}); 
```

但我不明白这个函数是如何实现的`javascript`。
因为上述功能适用于两个按钮，而我只使用一个按钮..
请给我任何提示或指导我哪里错了？....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:47:37.087

您可以使用`toggle`方法：

> 显示或隐藏匹配的元素。

```
$("#button").click(function(){
     $("p").toggle();
}); 
```

或根据您的标记：

```
$("#on_off").change(function(){
     $("p").css('display', this.checked ? 'block' : 'none');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:49:33.993

你可以用这个；

***HTML***

```
<p>Hello</p>
<input type="submit" value="submit" id="button"> 
```

***代码***

```
$('#button').on('click', function(){
     $('p').slideToggle();
}) 
```

**或者**

```
$('#button').on('click', function(){
     $('p').toggle();
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-10T18:40:01.870

根据您的要求，您不需要使用 2 个函数调用。您可以使用将执行这两个功能的切换方法。请参考以下示例：

```
$("#button").click(function(){
 $("p").toggle();
}); 
```

同样为了在隐藏任何元素时产生效果，请参阅以下链接：

[Jquery 中隐藏的效果](http://aspdotnetraining.blogspot.in/2013/11/jquery-hide.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-04T13:44:08.047

正常只是一种方式

```
$("#hide").click(function(){
$("p").hide();
});

$("#show").click(function(){
$("p").show();
}); 
```

通过此链接[http://www.w3schools.com/jquery/jquery_hide_show.asp](http://www.w3schools.com/jquery/jquery_hide_show.asp)

# asp.net - 如何将布尔值绑定到转发器中的复选框？

> ID：12138046
> 
> 赞同：1
> 
> 时间：2012-08-27T07:45:48.280
> 
> 标签：asp.net, webforms

我想将 bool 值绑定到 repeater 。

```
<asp:Repeater ID="Repeater1" runat="server">
<ItemTemplate>
<br />
<img ID="ImageZoom" runat="server" src='<%# DataBinder.Eval(Container.DataItem, "ImageUrl") %> '  style="display: inline; height:auto; left: 0pt; top: 0pt; width:auto;" />
    <asp:CheckBox ID="CheckBox1" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "ImageId") %> ' Checked='<%# DataBinder.Eval(Container.DataItem, "Boolv") %>' /> 

</ItemTemplate>
</asp:Repeater> 
```

这里在页面加载检查应该只有 true 或 false 但它返回 checked 。我怎样才能得到真或假？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:53:37.523

而不是摆弄 aspx 标记，我会这样做`ItemDataBound`：

```
protected void Repeater1_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    RepeaterItem ri = e.Item;
    DataRowView dr = (DataRowView)ri.DataItem;
    CheckBox CheckBox1 = (CheckBox)ri.FindControl("CheckBox1");
    CheckBox1.Checked = (bool)dr["Boolv"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:50:17.080

几天前，我也遇到了转发器和其中的复选框的问题。我想将复选框的值绑定到 bool 变量。

这是我的帖子。我已经使用帖子中接受的答案解决了我的问题。 [回答链接](https://stackoverflow.com/questions/12073670/set-checkbox-checked-propery-in-asp-repeater)

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:52:18.403

我你想在客户端使用这个`eval if statement`

```
<asp:CheckBox ID="CheckBox1" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "ImageId") %> ' Checked='<%# ((int)Eval("Boolv")) == 1 ? Checked : false %>' /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T07:52:21.617

使用`OnItemDataBound` `event`在`Repeater` `Control`

[这](https://stackoverflow.com/questions/11792658/asp-net-visual-studio-repeater-with-linkbuttons/11792746#11792746)是我对类似问题的回答

希望它有帮助:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T07:54:37.297

在我的一个实现中，我从数据库中获取 1 和 0 作为布尔值，所以我的实现如下：

```
<asp:CheckBox ID="chkAssign" runat="server" Checked=<%# TranslateAction(((System.Data.DataRowView)Container.DataItem)["ISACTIVE"].ToString())%> /> 
```

在后面的代码中，我有一个名为 TranslateAction 的方法：

```
protected Boolean TranslateAction(String status)
{
    if (status == "1")
        return true;
     else
        return false;
} 
```

我希望它会帮助你。

# google-visualization - 用单值显示谷歌折线图

> ID：12138048
> 
> 赞同：5
> 
> 时间：2012-08-27T07:45:54.137
> 
> 标签：google-visualization, linechart

我在我的网站上使用谷歌折线图。使用此图表，我正在创建每日/每周/每月报告。如果它只有一个值，则不显示图表值。但我想默认在折线图中显示该单个值。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T09:12:04.110

最好的选择是改变点的大小：

```
 var options = {'title': STR_BALANCE,
                           'width': 600,
                           'height': 300,
                           'pointSize': 3};

            var chart = new google.visualization.LineChart(document.getElementById('grafix'));
            chart.draw(dt, options); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:52:04.870

我过去通过将图表上的点数加倍，在存在的点之间进行线性插值，如果图表上只有一个点，则在三个点之间画一条水平线来解决这个问题。

例如，如果我通常有一个 (0, 10), (1, 20), (2, 0) 的数据集，我会将其映射到点集 (0, 10), (1, 15 ), (2, 20), (3, 10), (4, 0)。然后，如果我最终得到的数据集只有一个点，那么从 (0, 30) 到 (0, 30), (1, 30), (2, 30) 并没有太多额外的逻辑，这显然会给出你一条可见的线。

# cloud-foundry - Cloudfoundry 服务器在 Apache2 上运行

> ID：12138050
> 
> 赞同：0
> 
> 时间：2012-08-27T07:46:06.693
> 
> 标签：cloud-foundry

我对 cloudfoundry (CF) 服务器有疑问。如果我在 apache2/httpd Web 服务器上运行 CF-server 是否可行？有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:19:06.120

我不确定我是否理解您的问题，但我看到了两种可能性：

1）你想在apache下运行Cloud Foundry开源PaaS。这是不可能的，因为 Cloud Foundry 由多个在 Linux 上运行的独立守护程序组成。

2) 您想在 Cloud Foundry PaaS 上运行使用 apache 的网站。[Apache 并未在 CloudFoundry.com 上作为“运行时”提供，而是用于https://github.com/cloudfoundry/vcap](https://github.com/cloudfoundry/vcap)上的开源 Cloud Foundry 中的 PHP 运行时/框架。

如果您的问题与开源 Cloud Foundry 项目（而不是 CloudFoundry.com 服务）有关，最好的提问地点是 vcap-dev Google Group：[http ://groups.google.com/a/cloudfoundry .org/group/vcap-dev/](http://groups.google.com/a/cloudfoundry.org/group/vcap-dev/)

# image-processing - 如何使用 Opencv 查找视频帧之间的相关性？

> ID：12138051
> 
> 赞同：1
> 
> 时间：2012-08-27T07:46:06.963
> 
> 标签：image-processing, opencv, video-processing

我想分离具有高相关性的帧。假设在视频的前 6 秒，场景变化不大，只是物体的移动很小。如何通过找到所有帧之间的相关性来分离出这些帧。……

为此，我访问了[此](https://stackoverflow.com/questions/9998195/how-to-find-the-differences-between-frames-using-opencv)链接，但没有太大帮助....

请帮我解决这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:32:43.510

您可以使用[图像减法](https://stackoverflow.com/questions/2501957/subtract-one-image-from-another-using-opencv)。[互相关](http://paulbourke.net/miscellaneous/correlate/)在这里也是可以接受的。

谷歌搜索词组：`background subtraction algorithm`。

这[本书](https://rads.stackoverflow.com/amzn/click/com/0596516134)还包含您需要的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:57:05.693

> 我将假设关键帧是一个呈现与以前的内容大不相同的内容的帧（它不是一个正式的定义，但它适合）。取帧 i 和 i+1。使用 cv2.absDiff 计算帧之间的差异，使用 cv2.sumElems 获得所有像素差异的总和。对所有帧 i 执行此操作。这会将您的视频流减少为一维信号。在此信号中查找峰值并选择与这些峰值相对应的关键帧。

在这里找到：[从视频中提取关键帧](https://stackoverflow.com/questions/9064962/key-frame-extraction-from-video/9079148#comment12142577_9079148)

# php - 用php生成2000个6位唯一数字

> ID：12138058
> 
> 赞同：0
> 
> 时间：2012-08-27T07:46:44.020
> 
> 标签：php, random, unique

我仍然是 php 中的 Rockie，我想生成 2000 个六位数的唯一数字。

```
<?php
$six_digit_random_number = mt_rand(100000, 999999);
print_r($six_digit_random_number);
?> 
```

我已经编写了上面的简单脚本，以确保数字是 6 位数字。现在我需要其中的 2000 个，它们不是作为数组打印出来的重复项，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:51:14.347

你可以这样：

```
$generated = array();
while (count($generated) != 2000) {
  $new = mt_rand(100000, 999999);
  if (!isset($generated[$new])) {
    $generated[$new] = $new;
  }
} 
```

现在该`$generated`数组包含您的 2000 个唯一随机数。

请注意，我使用数字本身作为索引将数字保存在数组中，以加快查找速度以确定数字是否已经存在。

如果你想要一个简单的数字索引数组，你可以做这个转换：

```
$generated = array_values($generated); 
```

但这不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:54:53.920

尝试关注

```
$randomeArray=array();
while(count($randomeArray)<2000)
{

$six_digit_random_number = mt_rand(100000, 999999);

if(!in_array($six_digit_random_number,$randomeArray))
   {
     $randomeArray[]=$six_digit_random_number;
   }
}

print_r($randomeArray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:54:57.273

我会这样做：

```
<?
// Make an empty array
$numbers = array();

// Loop while there aren't enough numbers
while (count($numbers) < 2000) {

    $random_number = mt_rand(100000, 999999);

    if (!in_array($random_number, $numbers)) {
           // This adds the number to the array
        $numbers[] = $random_number;
    }

}

foreach ($numbers as $number) {
    echo $number."\n"; // or <br /> if you are using as part of page.
}

?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-02T14:19:50.643

此代码将比其他示例快得多：

```
$nums = array();
while (count($nums) < 2000)  $nums[mt_rand(100000, 999999)] = true; 
```

无需检查号码是否已经存在。然后您可以通过以下方式获取数字：

```
foreach ($nums as $randnum => $val)
{
    // Do something with the random number here.
} 
```

in_array() 很慢。每次调用它都会遍历整个数组，直到找到匹配项——在这种情况下，匹配项的可能性很小，因此这里使用 in_array() 的示例将是 O(n^2) 操作。isset() 快很多，但在这里不是必需的，count() 只会对性能造成轻微影响，因为它只是测量存储在 PHP 内部数据结构中的数组的大小。

希望这些有用的技巧能在您学习 PHP 时对您有所帮助。像 isset() 这样的内置命令比函数快得多，它有助于了解哪些函数适用于哪种方法以及对算法性能的健康理解。

# python - ndarray 如何与一个简单的函数一起工作，比如 x**2？

> ID：12138061
> 
> 赞同：2
> 
> 时间：2012-08-27T07:46:53.950
> 
> 标签：python, numpy

ndarray 如何与一个简单的函数一起工作，比如 x**2？我收到此错误：

```
arr = array([3,4,5])
f = lambda x: x**2
print f(arr)     # works, but how?
print f(3)       # works
print f([3,4,5]) # will not work
#TypeError: unsupported operand type(s) for ** or pow(): 'list' and 'int'
print f((3,4,5)) # will not work
#TypeError: unsupported operand type(s) for ** or pow(): 'tuple' and 'int'

>>>f(arr)
#[ 9 16 25]
>>>f(3)
#9 
```

最后...

```
class Info(object):
    def __init__(self,x):
        self.a = x<
    def __pow__(self,x):
        for i in xrange(len(self.a)):
            self.a[i]**=x
        return self

a = Info([3,4])
f = lambda x:x**2
a = f(a)
print a.a
[9, 16] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T08:03:00.077

因为[ndarray 定义了操作符的行为](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.__ipow__.html#numpy.ndarray.__ipow__)，`**`而列表和元组没有（它们可能包含任何对象，而 ndarrays 通常用于数字）。

# java - 写入资产文件夹中的文件时出现错误的文件号异常

> ID：12138064
> 
> 赞同：1
> 
> 时间：2012-08-27T07:47:11.917
> 
> 标签：java, android, eclipse, assets, ioexception

我是 Android 编程的新手。我的问题是将任何信息写入资产文件夹中的文件。但是，Eclipse 抛出了一个我不明白的异常：Bad file number exception.. 这是我的代码：

```
package com.example.marport;
import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.SoapFault;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.xmlpull.v1.XmlPullParserException;

import com.example.marport.R;

import android.app.Activity;
import android.content.res.AssetFileDescriptor;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class Plakasorgulama extends Activity {

    final static String NAMESPACE = "http://webservice.marport.dcat.com/";
    final static String METHOD_NAME = "truckLicenceDate";
    final static String SOAP_ACTION = "http://webservice.marport.dcat.com/truckLicenceDate";
    final static String URL = "http://192.168.1.164:8070/test/services/MarportWebServicePort";

    private EditText plaka;
    private Button sorgu;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.plakasorgulama);

        plaka = (EditText) findViewById(R.id.etPlaka);
        sorgu = (Button) findViewById(R.id.bPlakaSorgulama);
        final SoapObject Request=new SoapObject(NAMESPACE,METHOD_NAME);

        sorgu.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                String plakainfo = plaka.getText().toString();
                SoapObject request = new SoapObject("licence", plakainfo); 
                SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                soapEnvelope.dotNet=false;
                soapEnvelope.setOutputSoapObject(Request);
                HttpTransportSE aht=new HttpTransportSE(URL);

                try {
                      AssetFileDescriptor descriptor = getAssets().openFd("htmlcode.txt");
                      BufferedWriter out = new BufferedWriter(new FileWriter(descriptor.getFileDescriptor()));
                      out.write("tryyyyyyyyyyyyyyyyyyyyyy");
                      out.close();
                    } catch (Exception e) {
                        e.printStackTrace();
                    }

                try {
                    aht.call(SOAP_ACTION, soapEnvelope);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (XmlPullParserException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                  try {
                    SoapPrimitive result=(SoapPrimitive) soapEnvelope.getResponse();
                } catch (SoapFault e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
            }
        });               
    }
} 
```

我也尝试给出资产文件夹的直接路径。当我这样做时，这次 FileNotFound 异常来了。这个问题让我感到恶心。

这些是日志：

```
08-27 07:38:36.749: W/System.err(740): java.io.IOException: Bad file number
08-27 07:38:36.770: W/System.err(740):  at org.apache.harmony.luni.platform.OSFileSystem.writeImpl(Native Method)
08-27 07:38:36.770: W/System.err(740):  at org.apache.harmony.luni.platform.OSFileSystem.write(OSFileSystem.java:129)
08-27 07:38:36.800: W/System.err(740):  at java.io.FileOutputStream.write(FileOutputStream.java:297)
08-27 07:38:36.800: W/System.err(740):  at java.io.OutputStreamWriter.flush(OutputStreamWriter.java:175)
08-27 07:38:36.800: W/System.err(740):  at java.io.OutputStreamWriter.close(OutputStreamWriter.java:151)
08-27 07:38:36.800: W/System.err(740):  at java.io.BufferedWriter.close(BufferedWriter.java:130)
08-27 07:38:36.800: W/System.err(740):  at com.example.marport.Plakasorgulama$1.onClick(Plakasorgulama.java:61)
08-27 07:38:36.800: W/System.err(740):  at android.view.View.performClick(View.java:2408)
08-27 07:38:36.800: W/System.err(740):  at android.view.View$PerformClick.run(View.java:8816)
08-27 07:38:36.800: W/System.err(740):  at android.os.Handler.handleCallback(Handler.java:587)
08-27 07:38:36.800: W/System.err(740):  at android.os.Handler.dispatchMessage(Handler.java:92)
08-27 07:38:36.810: W/System.err(740):  at android.os.Looper.loop(Looper.java:123)
08-27 07:38:36.820: W/System.err(740):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-27 07:38:36.820: W/System.err(740):  at java.lang.reflect.Method.invokeNative(Native Method)
08-27 07:38:36.820: W/System.err(740):  at java.lang.reflect.Method.invoke(Method.java:521)
08-27 07:38:36.820: W/System.err(740):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-27 07:38:36.820: W/System.err(740):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-27 07:38:36.820: W/System.err(740):  at dalvik.system.NativeStart.main(Native Method) 
```

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:48:47.940

Assets 文件夹中的文件仅以`READ ONLY`格式提供，您不能在其上书写。

# java - Java - 单元测试

> ID：12138065
> 
> 赞同：5
> 
> 时间：2012-08-27T07:47:14.823
> 
> 标签：java, unit-testing, junit

给定 Java 类中的此方法：

```
public void execute(String command) {

    ProcessBuilder processBuilder = new ProcessBuilder(command);
    Process process = processBuilder.start();

    int exitValue = process.waitFor();
    if (exitValue != 0) {
        throw new RuntimeException("a message here...");
    }
} 
```

我正在尝试为此方法提出适当的**跨平台**单元测试。

我正在寻找跨所有操作系统（Win、Linux、Mac 和...）的通用命令，或者我可以在单元测试中传递给此方法的虚假命令。

有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T08:12:18.190

此方法无法通过单元测试进行测试，而只能通过集成测试进行测试。要进行单元测试，您可以进行一个小的重构。引入一个新接口`ProcessBuilderFactory`（和一个默认实现）并将其注入您的类。

```
public interface ProcessBuilderFactory {
    ProcessBuilder createProcessBuilder(String command);
}

public class DefaultProcessBuilderFactory implements ProcessBuilderFactory {
    public ProcessBuilder createProcessBuilder(String command) {
        return new ProcessBuilder(command);
    }
}

public class ProcessExecutor {
    private ProcessBuilderFactory processBuilderFactory;
    private ProcessExecutor(ProcessBuilderFactory processBuilderFactory) {
        this.processBuilderFactory = processBuilderFactory;
    }

    public void execute(String command) {
        ProcessBuilder processBuilder = processBuilderFactory.createProcessBuilder(command);
        Process process = processBuilder.start();

        int exitValue = process.waitFor();
        if (exitValue != 0) {
            throw new RuntimeException("a message here...");
        }
    }
} 
```

然后你可以通过注入一个 mock来进行**单元**`ProcessBuilderFactory`测试。您开始编写测试，创建一个 mock `ProcessBuilderFactory`，返回一个 mock `ProcessBuilder`...该死的，`ProcessBuilder`太`final`:(

**强烈提醒：先写测试！**

所以我们有两个选择：

1.  引入一个新的接口来包装`ProcessBuilder`一个默认实现......以同样的方式我们创建`ProcessBuilderFactory`
2.  撤消重构并查看[PowerMock](http://code.google.com/p/powermock/)，以进行最终类模拟

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T08:12:32.720

由于这是 java 单元测试，您可以使用 java.exe 作为标准 exe。说`java.exe -version`。它会一直在那里:)。使用 java.home 中的当前 jdk，然后使用它来引用 java.exe

查看特定要求，您可以使用任何模拟框架吗？（例如[jmockit ）](http://code.google.com/p/jmockit/)

# html - 无法让我的文本颜色在打印 css 中更改

> ID：12138067
> 
> 赞同：1
> 
> 时间：2012-08-27T07:47:26.367
> 
> 标签：html, css, colors

我有一个 drupal 页面，在打印时需要一些自定义格式，所以我把它全部放在一个单独的打印 css 中。除了我的文字颜色外，大部分都在工作。

我已经尝试了所有与文本相关的选择器，甚至是`*`-selector。但它们都没有改变颜色。

起作用的是在我的真实页面上更改 Firefox 编辑器中的颜色。

HTML 的一部分，在这种情况下，最里面的元素需要更改为黑色：

```
<div class="field-label">Productgroep:&nbsp;</div>
     <div class="field-items">
          <div class="field-item even">
               <a href="/taxonomy/term/43" typeof="skos:Concept" property="rdfs:label skos:prefLabel">Fruit</a>
         </div>
     </div>
</div> 
```

我试过的CSS：

```
art-post-inner art-article, /* one of the wrappers */
field-items, /* the outer div */
a, /* select all links, I have also tried all the different states of a link (hovered, visited, etc) */
* /* select all */
{
    color: #000;
} 
```

如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T07:55:52.983

尝试`!important`_`color: #000 !important;`

它能做什么

标记为 !important 的 CSS 规则优先于后面的规则。通常在 CSS 中，规则是从上到下工作的，因此如果您将新样式分配给样式表下方或辅助样式表中的元素，则后面的规则将优先。!important 确保此规则具有优先权。

# simple.data - Simple.Data：如何将新行插入到仅包含标识列的表中？

> ID：12138068
> 
> 赞同：0
> 
> 时间：2012-08-27T07:47:33.450
> 
> 标签：simple.data

如果您的表仅包含一列，并且该列具有标识规范。如何使用 simple.data 编写插入语句？我已经尝试过“DataBase.Table.Insert()”方法和“没有属性的扩展方法”；既不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:11:02.270

```
db.Table.Insert(columnName: null); 
```

应该管用。

# php - 在 Symfony 2 中读取或写入实体管理器

> ID：12138075
> 
> 赞同：1
> 
> 时间：2012-08-27T07:48:25.917
> 
> 标签：php, symfony

我将 Symfony2 用于我的具有读写数据库的应用程序。

我已经在我的配置文件中定义了不同的连接和实体管理器。当我在控制器和存储库中创建实体对象时它工作正常

```
$em = $this->getDoctrine()->getEntityManager('write'); 
```

现在的问题是我还创建了一些服务，并且在服务参数中我给了这样的实体管理器

```
services:
    app.counterservices:
        id: app.counterservices
        class: AppBundle\Services\CounterService
        arguments: ["@doctrine.orm.entity_manager"] 
```

如何在服务中定义我想要用户读取或写入的实体管理器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:55:12.393

在您的服务配置中，像这样选择您想要的实体管理器

```
services:
    app.counterservices:
        id: app.counterservices
        class: AppBundle\Services\CounterService
        arguments: ["@doctrine.orm.write_entity_manager"] 
```

或者

```
services:
    app.counterservices:
        id: app.counterservices
        class: AppBundle\Services\CounterService
        arguments: ["@doctrine.orm.read_entity_manager"] 
```

# css - 尝试结合 CSS 渐变和背景图片

> ID：12138085
> 
> 赞同：0
> 
> 时间：2012-08-27T07:49:11.033
> 
> 标签：css, background, gradient

我想在图像上有透明渐变，所以我做了以下但它只显示图像

```
background-image: url(../img/hex-pattern.png), -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(0,0,0,0.2)), color-stop(8%,rgba(255,255,255,0)), color-stop(92%,rgba(255,255,255,0)), color-stop(100%,rgba(0,0,0,0.2))); 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T07:51:27.590

当您首先指定图像时，该图像被绘制在渐变顶部，完全遮蔽它。您需要切换它们，以便渐变在顶部分层（参见[规范](http://www.w3.org/TR/css3-background/#layering)）：

```
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(0,0,0,0.2)), color-stop(8%,rgba(255,255,255,0)), color-stop(92%,rgba(255,255,255,0)), color-stop(100%,rgba(0,0,0,0.2))), url(../img/hex-pattern.png); 
```

不要忘记包括其余的渐变前缀和无前缀的。虽然当你这样做时，这也意味着复制你的声明`url()`部分。`background-image`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T07:56:47.703

背景的顺序（想想z-index）与逻辑完全相反。您设置的第一个背景是顶部的背景：

[http://css-tricks.com/stacking-order-of-multiple-backgrounds/](http://css-tricks.com/stacking-order-of-multiple-backgrounds/)

它给我带来了类似的挫败感。只需垂直考虑，就像在链接上一样：

```
body {
    background:
        background1, <-top
        background2,
        background3; <-bottom
} 
```

# ruby-on-rails - 设计，我没有收到邮件：可恢复

> ID：12138090
> 
> 赞同：1
> 
> 时间：2012-08-27T07:49:44.737
> 
> 标签：ruby-on-rails, devise, devise-confirmable

嗨，我开始调整我的设计 gem，我发现了一个问题

当我点击链接 - >“忘记密码？”

比我输入电子邮件并单击“发送”

理想情况下，我应该收到带有链接的邮件.. 但我没有收到这封邮件

在控制台日志中我看到：

```
Started POST "/users/password" for 127.0.0.1 at 2012-08-27 10:42:30 +0300
Processing by Devise::PasswordsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"E7957iR69EDbZArYyaA8tGRmtuwr6LOM+lf7geAitZU=", "user"=>{"email"=>"...@gmail.com"}, "commit"=>"Send me reset password instructions"}
  User Load (0.4ms)  SELECT "users".* FROM "users" WHERE "users"."email" = '...@gmail.com' LIMIT 1
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."reset_password_token" = 'K8XfKY4RV2ZJKHzXShj7' LIMIT 1
   (0.1ms)  begin transaction
   (1.0ms)  UPDATE "users" SET "reset_password_token" = 'K8XfKY4RV2ZJKHzXShj7', "reset_password_sent_at" = '2012-08-27 07:42:30.170634', "updated_at" = '2012-08-27 07:42:30.171855' WHERE "users"."id" = 1
   (174.2ms)  commit transaction
  Rendered devise/mailer/reset_password_instructions.html.erb (1.6ms)

Sent mail to ...@gmail.com (1062ms)
Date: Mon, 27 Aug 2012 10:42:31 +0300
from: from localhost:3000 <local@gmail.com>
reply-to: from localhost:3000 <local@gmail.com>
To: ...@gmail.com
Message-ID: <503b24e732409_2f9224e7fbbe307c2@demitriydn.mail>
Subject: Reset password instructions
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<p>Hello ...@gmail.com!</p>

<p>Someone has requested a link to change your password, and you can do this through the link below.</p>

<p><a href="http://localhost:3000/users/password/edit?reset_password_token=K8XfKY4RV2ZJKHzXShj7">Change my password</a></p>

<p>If you didn't request this, please ignore this email.</p>
<p>Your password won't change until you access the link above and create a new one.</p>

Redirected to http://localhost:3000/users/sign_in
Completed 302 Found in 2102ms (ActiveRecord: 0.0ms)

Started GET "/users/sign_in" for 127.0.0.1 at 2012-08-27 10:42:32 +0300
Processing by Devise::SessionsController#new as HTML
  Rendered devise/shared/_links.erb (1.0ms)
  Rendered devise/sessions/new.html.erb within layouts/application (6.5ms)
Completed 200 OK in 21ms (Views: 19.6ms | ActiveRecord: 0.0ms) 
```

`<a href="http`我从日志中复制链接 => // // 一切正常

我犯了什么错误？

根据日志，我收到了一封信...但是在“...@gmail.com”没有收到

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:37:06.520

您是否尝试在生产环境中发送它？我有同样的问题，当我在开发环境中时它会显示在日志中，但我实际上不会收到电子邮件。但是，在生产环境中它运行良好。抱歉，这不是一个有用的答案，但我无法发表评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:55:21.867

至于开发邮件事件，您可能需要在 development.rb 中设置 smtp 设置

确保您完整阅读此内容以完全理解邮件

[http://guides.rubyonrails.org/action_mailer_basics.html](http://guides.rubyonrails.org/action_mailer_basics.html)

学习愉快

# c# - 如何在 SQLCLR 中使用 TransactionScope 而不升级到 MSDTC

> ID：12138091
> 
> 赞同：5
> 
> 时间：2012-08-27T07:49:52.880
> 
> 标签：c#, sql-server-2008-r2, sqlclr

我们的很多 DAL 代码都使用 TransactionScope 进行事务处理。这很好用，但是当我在 SQLCLR 过程中使用这个 DAL 代码时会出现问题。交易升级到我不想要的 MSDTC。

问题可以很容易地重现：

1.  CLR 实现

    ```
    [SqlProcedure]
    public static void ClrWithScope(string cmdText)
    {
        /* escalates to MSDTC when a transaction is already open */
        using ( var scope = new TransactionScope())
        {
            using (var connection = new SqlConnection("context connection=true;"))
            {
                connection.Open();
                using (var cmd = new SqlCommand(cmdText, connection))
                {
                    SqlContext.Pipe.ExecuteAndSend(cmd);
                }
            }
            scope.Complete();
        }
    }

    [SqlProcedure]
    public static void ClrWithTrans(string cmdText)
    {
        /* works as expected (without MSDTC escalation ) */
        using (var connection = new SqlConnection("context connection=true;"))
        {
            connection.Open();
            using (var tx = connection.BeginTransaction())
            {
                using (var cmd = new SqlCommand(cmdText, connection, tx))
                {
                    SqlContext.Pipe.ExecuteAndSend(cmd);
                    tx.Commit();
                }
            }
        }
    } 
    ```

2.  用于执行 CLR 过程的 SQL 脚本

    ```
    BEGIN TRANSACTION

    exec dbo.ClrWithTrans "select * from sys.tables";
    exec dbo.ClrWithScope "select * from sys.tables"; /* <- DOES NOT WORK! */

    ROLLBACK TRANSACTION 
    ```

3.  错误

    ```
    Msg 6549, Level 16, State 1, Procedure ClrWithScope, Line 0
    A .NET Framework error occurred during execution of user defined routine or aggregate 'clrClrWithScope': 
    System.Transactions.TransactionAbortedException: Die Transaktion wurde abgebrochen. ---> System.Transactions.TransactionPromotionException: MSDTC on server 'BLABLA' is unavailable. ---> System.Data.SqlClient.SqlException: MSDTC on server 'BLABLA' is unavailable.
    System.Data.SqlClient.SqlException: 
       bei System.Data.SqlServer.Internal.StandardEventSink.HandleErrors()
       bei System.Data.SqlServer.Internal.ClrLevelContext.SuperiorTransaction.Promote()
    System.Transactions.TransactionPromotionException: 
       bei System.Data.SqlServer.Internal.ClrLevelContext.SuperiorTransaction.Promote()
       bei System.Transactions.TransactionStatePSPEOperation.PSPEPromote(InternalTransaction tx)
       bei System.Transactions.TransactionStateDelegatedBase.EnterState(InternalTransaction tx)
    System.Transactions.TransactionAbortedException: 
       bei System.Transactions.TransactionStateAborted.CreateAbortingClone(InternalTransaction tx)
       bei System.Transactions.DependentTransaction..ctor(IsolationLevel isoLevel, InternalTransaction internalTransaction, Boolean blocking)
       bei System.Transactions.Transaction.DependentClone(DependentCloneOption cloneOption)
       bei System.Transactions.TransactionScope.SetCurrent(Transaction newCurrent)
       bei System.Transactions.TransactionScope.PushScope()
       bei System.Transactions.TransactionScope..ctor(TransactionScopeOption scopeOption)
       bei Giag.Silo.Data.SqlClr.ClrWithScope(String cmdText)
    . User transaction, if any, will be rolled back. 
    ```

没有“BEGIN TRANSACTION”语句，dbo.ClrWithScope 调用工作正常。我想在.Net Framework 中登记时不考虑由 SQLServer 启动的事务。

有没有办法解决这个问题。一个想法是手动创建一个 SqlTransaction 并让 TransactionScope 使用这个事务，但我不知道该怎么做。另一种解决方案是在所有 DAL 代码中创建一个特殊情况（实现起来并不有趣）。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-07T13:38:15.100

在 SQL CLR 中使用 TransactionScope 将始终提升/升级为 MSDTC 事务。即使在 SQL 2012 中，似乎也没有任何解决办法。

来自 TechNet 关于 SQL CLR 和 TransactionScope ( [http://technet.microsoft.com/en-us/library/ms131084.aspx](http://technet.microsoft.com/en-us/library/ms131084.aspx) )

> 只有在访问本地和远程数据源或外部资源管理器时才应使用 TransactionScope。这是因为 TransactionScope 总是会导致事务提升，即使它仅在上下文连接中使用。

# facebook - 将 Facebook Like 框和 JS SDK 添加到 Plone

> ID：12138092
> 
> 赞同：1
> 
> 时间：2012-08-27T07:50:03.427
> 
> 标签：facebook, plone

当前的 Facebook 最佳实践建议将 FB JS SDK 单独添加到页面`<body>`，然后通过 JS 呈现 Facebook Like Box，而不是`<iframe>`：

[http://developers.facebook.com/docs/reference/plugins/like-box/](http://developers.facebook.com/docs/reference/plugins/like-box/)

*   目前是否有任何 Plone 附加组件可以按照这些最佳实践将 Facebook Like 框或其他 Facebook 功能添加到 Plone？

*   如果不是什么将是完成功能的最佳方式 - 由于安全的 HTML 转换，静态文本 portlet 可能不是一种方式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:54:14.503

我相信[http://plone.org/products/simplesocial 可以满足](http://plone.org/products/simplesocial)您的全部或大部分需求。欢迎投稿！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:50:30.003

我正在使用collective.portlet.embed 将HTML 嵌入片段粘贴到Plone（如twitter 小部件或facebook likebox）中，并带有额外的portlet 管理器（如collective.masonry）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T16:20:42.250

您可以将 Facebook 中的片段粘贴到[collective.portlet.tal](http://pypi.python.org/pypi/collective.portlet.tal) portlet 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T12:33:09.640

我们还没有实现这个（因为我们不需要它），但它可以很容易地包含在[collective.facebook.portlets](https://github.com/collective/collective.facebook.portlets)中。

# java - 在 Java 中将 UTF-8 字符串写入套接字

> ID：12138093
> 
> 赞同：2
> 
> 时间：2012-08-27T07:50:11.230
> 
> 标签：java, android

目前我使用

```
serverOutput = new DataOutputStream(socketCliente.getOutputStream()); 
```

接着

```
serverOutput.write(data.getBytes()); 
```

并且它工作正常，直到我添加任何非标准字符（例如ñ），然后添加尽可能多的字符，从文件末尾删除该数量的字符并且不会到达。

PandroidAgentTentacle.java 中提供了完整的源代码

[http://pandora.svn.sourceforge.net/viewvc/pandora/trunk/pandora_agents/android/src/pandroid/agent/](http://pandora.svn.sourceforge.net/viewvc/pandora/trunk/pandora_agents/android/src/pandroid/agent/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:56:14.870

使用 DataOutputStream 的好处是您拥有为您封装所有这些的 writeUTF 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:57:29.287

你试过用`serverOutput.write(data.getBytes("UTF-8"));`吗？

# objective-c - 如何使完成按钮在模态表中处于活动状态？

> ID：12138097
> 
> 赞同：1
> 
> 时间：2012-08-27T07:50:47.830
> 
> 标签：objective-c, macos, cocoa

例如，Done 不是通过 enter 激活的

![在此处输入图像描述](../Images/e82c2e0282fabc5f3b27354bbd028dfd.png)

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:57:27.350

如果您使用的是界面生成器，您可以为“完成”按钮创建一个插座并使用`[myButton highlight:YES]`.

请参阅[此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsbutton_Class/Reference/Reference.html)，在“highlight:”方法下，以获取文档参考

编辑：要使按钮响应“返回”键，您可以使用`[myButton setKeyEquivalent:@"\r"]`.

# c# - 如何将文本框动态调整为一定数量字符的宽度？

> ID：12138099
> 
> 赞同：2
> 
> 时间：2012-08-27T07:51:03.210
> 
> 标签：c#, wpf, xaml

我有一些文本框只允许包含一定数量的字符，例如在大多数情况下为 12 或 14。

是否可以根据单词将文本框动态调整为 12 个字符或 14 个字符的宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:51:10.170

I am not quite sure if i understand your question right, but for a given string you might set the `Text` and `Width` property of a TextBox simultaneously like the sample method below.

It creates a [FormattedText](http://msdn.microsoft.com/en-us/library/ms634943) object from the given text and all the font-related properties of the TextBox. Then it assigns an empty string to the TextBox to get the "empty" width (which should also be possible by adding left and right padding, left and right border thickness etc). Finally the method assigns the `Text` property and sets the `Width` to the empy width plus the width of the FormattedText.

```
public void SetTextAndWidth(TextBox textBox, string text)
{
    Typeface typeface = new Typeface(
        textBox.FontFamily, textBox.FontStyle, textBox.FontWeight, textBox.FontStretch);

    FormattedText formattedText = new FormattedText(text, CultureInfo.InvariantCulture,
        FlowDirection.LeftToRight, typeface, textBox.FontSize, Brushes.Black);

    if (textBox.HorizontalAlignment == HorizontalAlignment.Stretch)
    {
        textBox.HorizontalAlignment = HorizontalAlignment.Left;
    }

    textBox.Text = "";
    double emptyWidth = textBox.ActualWidth;

    textBox.Text = text;
    textBox.Width = formattedText.Width + emptyWidth;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:47:59.130

总是有[TextRenderer.MeasureText](http://msdn.microsoft.com/en-us/library/7sy6awsb.aspx)方法。

只要您不介意使用表单 DLL。

或图形库辅助方法[Graphics.MeasureString](http://msdn.microsoft.com/en-us/library/9bt8ty58.aspx)。

然后，您可以使用此信息进行各种尺寸调整，查看 MSDN 条目中的示例。

# objective-c - DatePicker 目标-C 的不同大小

> ID：12138101
> 
> 赞同：0
> 
> 时间：2012-08-27T07:51:06.407
> 
> 标签：objective-c, ios, cocoa-touch, datepicker

我想为我的数据选择器框架设置不同的大小。如何使用数组创建它？

这是我的代码：

```
if(UIInterfaceOrientationIsLandscape([self.delegateVCtr interfaceOrientation])){
    //I want to have different int here for changing size 
    self.viewOfPicker.frame=CGRectMake(0, 0, 480, 230);
    self.pkrView.frame=CGRectMake(0, 44, 480, 216);
    self.tBar.frame=CGRectMake(0, 0, 480, 33);
} else {
    self.viewOfPicker.frame=CGRectMake(0, 0, 320, 230);
    self.pkrView.frame=CGRectMake(90, 28, 160, 216);
    self.tBar.frame=CGRectMake(0, 0, 320, 33);
}

- (NSInteger)sizeOfComponentsInPickerView:(UIPickerView *)pickerView {
return sizeOfComponents;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:54:13.150

AFAIK you can use CGRectZero as a frame because the UIDatePicker won't resize itself. Also take into consideration that this is because of a reason: Apple says if it's any smaller than the default size it will affect its usability and in the end it won't be accepted in the store. You unfortunately have to mod your design. Otherwise @Randeep's second answer is the easiest way.

Hope that helps!

Cheers!

# string - 如何在 ArrayList 中存储多维数据

> ID：12138103
> 
> 赞同：0
> 
> 时间：2012-08-27T07:51:15.843
> 
> 标签：string, arraylist, multidimensional-array, store

> ArrayList 组 = 新的 ArrayList();
> 
> group.add("约翰·史密斯","5126123");

我想存储2个数据。所以我可以通过数字访问名称和通过名称访问数字。这可能与 ArrayList 以及如何？

*并且不同的人可以有相同的groupnumber

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:57:19.610

简单的解决方案（但可能不是最有效的）：这不是在 IDE 中输入的，所以这里可能有错字。

公共类用户{

```
private int id;
private String name;

public User() {};

public User(int id, String name) {
    this.id = id;
    this.name = name;
}

public void setId(int id) {
    this.id = id;
}

public int getId() {
    return id;
}

public void setName(String name) {
    this.name = name;
}

public String getName() {
    return name;
} 
```

}

公共类 MyUserArray() {

```
private ArrayList<User> users;

public MyUserArray() {
    users = new ArrayList<User>();
}

public add() {
    users.add(user);
}

// Since you said the user name is unique, only
// one user will be returned
public User getUserByName(String name) {
    for(User user : users) {
        if(user.getName().equalsIgoreCase(name)) 
            return user;
    }

    // return null if no user is found
    return null;
}

// Since more users can have the same id, we will
// return an array list with results
public ArrayList<User> getUsersById(int id) {

    ArrayList<User> result = new ArrayList<User>();

    for(User user : users) {
        if(user.getId() == id) 
            result.add(user);
    }

    return result;
} 
```

}

公共类 MyClass {

```
public static void main(String[] args) {
    // Create users
    User user1 = new User(1, "John Doe");
    User user2 = new User(1, "Jack Sparrow");
    User user3 = new User(2, "Mickey Mouse");

    // Create the personal user array
    MyUserArray users = new MyUserArray();

    // Add the users
    users.add(user1);
    users.add(user2);
    users.add(user3);

    // Now you can search on id:
    ArrayList<User> userArrayList = users.getUsersById(1);
    for (User user : userArrayList) {
        System.out.println(user.getId() + " - " + user.getName());
        // This will print:
        // 1 - John Doe
        // 1 - Jack Sparrow
    }

    // Or search on name
    User user = users.getUserByName("Jack Sparrow");
    System.out.println(user.getId() + " - " + user.getName());
    // This will print: 1 - Jack Sparrow
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:18:51.280

您可以通过这种方式使用 ArrayList：-

```
List<Map<String, String>> list = new ArrayList<Map<String, String>>();
                Map<String, String> map1 = new HashMap<String, String>();
                map1.put("John Smith","5126123");
                         list.add(map1); 
```

或者您可以直接使用地图：-

```
Map<String,Integer> map = new HashMap<String,Integer>();
map.put("Some String", 42);
// or, more correctly:
map.put("Some String", Integer.valueOf(42)); 
```

您可以使用搜索它

```
Integer result = map.get("Some String"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:07:47.567

您可以像这样将数组存储在数组列表中 `group.add(new String[][] {"John Smith", "5125123"});`

但是，我不确定这对帮助您完成您想要完成的任何事情有多大用处。

另一种方法是使用哈希表或`<key, value>`成对的映射/字典数据类型的其他一些实现。但是，搜索将仅限于使用密钥。

另一种选择是创建一个对象来保存 John Smith 及其相关信息，然后将该对象放入 arraylist 中。不过，您必须编写一些额外的代码来帮助您搜索和检索数据。

# iphone - 在 NSMutableArray 中获取空值

> ID：12138111
> 
> 赞同：0
> 
> 时间：2012-08-27T07:52:00.377
> 
> 标签：iphone, ios5, sqlite, nsmutablearray

我的程序包含三个文本字段，我将数据插入到 sqlite 数据库中。现在我正在尝试在 tableview 中显示数据库中的数据。为此，我尝试将数据添加到 NSMutableArray 中并尝试打印它。但它在数组中显示一个空值。我不知道为什么我得到一个空值。cont 是 NsMutableArray。

```
 [cont addObject:name.text];
    [cont addObject:address.text];
    [cont addObject:phone.text];

    NSLog(name.text);
    NSLog(address.text);
    NSLog(phone.text);

    int length= sizeof(cont);

    NSString *strlen = [NSString stringWithFormat:@"%d", length];
    NSLog(strlen);

    for(int i=0;i<strlen;i++)
    {
        NSArray *arr = [cont objectAtIndex:i];

        NSString *u = [NSString stringWithFormat:@"%d",i];
        NSLog(u);
        NSLog(arr);

    } 
```

我总是在 arr 中得到长度为 4 和空值。谁能告诉我为什么会这样？我知道代码中一定有一些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:10:17.567

```
int length= sizeof(cont); 
```

`int length= [cont count];` 改为使用

sizeof(*) 运算符返回指向 NSMutableArray 的指针的大小。

```
[cont count]; 
```

返回数组中元素的数量。

您在 arr 中获得 Null 是因为您将字符串提取`[cont objectAtIndex:i]`到 NSArray`NSArray *arr`

利用`NSString *arr = [cont objectAtIndex:i];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:23:49.887

**利用**

```
int length=[cont count];
       //array  count 
```

**而**不是

int 长度= sizeof（续）；

并参考该链接

[NSArray 的大小](https://stackoverflow.com/questions/5062496/size-of-nsarray)

**样本**

```
NSMutableArray * cont=[[NSMutableArray alloc]init];

    [cont addObject:@"1"];
    [cont addObject:@"ddg"];
    [cont addObject:@"ggg"];

    for(int i=0;i<[cont count];i++)
    {
        NSLog(@"Index %d",i);
        NSLog(@" Object %@",[cont objectAtIndex:i]);
    }
    [cont release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:54:45.263

```
[cont addObject:phone.text]; 
```

您正在添加一个`NSString`

```
NSArray *arr = [cont objectAtIndex:i]; 
```

你正试图提取一个`NSArray`

获取数组大小的一个好习惯是使用它的`count`属性，而不是`sizeof`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T07:55:42.000

试试这个，因为你打印一个数组而不是 index:: 的值

```
for(int i=0;i<strlen;i++)
{
    NSLog(@"%@", [cont objectAtIndex:i]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T07:55:53.237

你应该使用`[cont count]`而不是`sizeof(cont)`

而且...你分配+初始化你的NSMutableArray了吗？

```
cont = [[NSMutableArray alloc] init]; 
```

这条线是错误的：

```
NSArray *arr = [cont objectAtIndex:i]; 
```

它应该是

```
NSString *arr = [cont objectAtIndex:i]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T07:57:38.850

不知道您的错误在哪里，但是要在objective-c中遍历un数组，您应该使用forin循环。

```
for (NSString* value in cont) {
    NSString *u = [NSString stringWithFormat:@"%d",i];
    NSLog(u);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-27T08:02:43.977

```
 NSString *strlen = [NSString stringWithFormat:@"%d", length]; 
```

strlen 只是一个 NSString，但您尝试将其用作在线整数：

```
 for(int i=0;i<strlen;i++)
    {
       ...

    } 
```

你应该像这样使用它：

```
for(int i=0;i<[strlen intValue];i++)
        {
           ...

        } 
```

`[strlen intValue]`会给你正确的结果。祝你好运。

# php - php imap_fetchbody；忽略历史，只获取当前消息

> ID：12138113
> 
> 赞同：1
> 
> 时间：2012-08-27T07:52:20.713
> 
> 标签：php, imap

我试图只获取当前消息并忽略消息线索。这是我使用 imap_fetchbody() 获取的消息：

```
OK, see you there. 
```

2012 年 8 月 27 日星期一下午 12:13，赛门铁克简报工具写道：

```
You are invited to the following meeting. The following is a
time we have tentatively scheduled you. 
```

……

在这里，我只需要得到“好的，那里见”部分。并忽略其余的消息历史记录。我怎样才能做到这一点？任何想法或指针都受到高度赞赏。我试过使用 imap_fetchtext 和 imap_fetchbody 但没有运气？？？

# wicket - wicket-rest 不适用于 wicket 1.5

> ID：12138115
> 
> 赞同：1
> 
> 时间：2012-08-27T07:52:30.523
> 
> 标签：wicket, wicket-1.5

现在已经分叉到[github](https://github.com/wicketstuff/sandbox/tree/master/wicket-rest)的[wicket-rest](http://code.google.com/p/wicket-rest)项目不适用于 wicket-1.5。

此问题已在[wicket 邮件列表中](http://apache-wicket.1842946.n4.nabble.com/wicket-rest-and-Wicket-1-5-RC4-2-MarkupNotFoundException-Can-not-determine-Markup-td3600779.html#a3602317)提出，但仍未解决。我尝试了邮件列表中给出的建议，但问题仍然存在。没有调用“onBeforeRender”方法，因此有效地绕过了wicket-rest 预处理。

当无状态提示设置为 true 时，可能不会调用“onBeforeRender”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:52:30.523

经过一番研究，我设法解决了这个问题，并考虑与社区分享。

由于 wicket-1.5 中的 api 更改，需要在 wicket-rest-api 类中进行以下更改：

*   AbstractWebServicePage（或者如果你已经派生了它，它是等效的）现在应该实现 IMarkupResourceStreamProvider。实现可以是这样的：（取自邮件列表）

    ```
    @Override
    public IResourceStream getMarkupResourceStream(MarkupContainer container, Class<?> containerClass)
    {
        return new StringResourceStream("");
    } 
    ```

*   “hasAssociatedMarkup”现在已弃用，可以从 AbstractWebServicePage 中删除。

*   将 AbstractWebServicePage 中重写的“onBeforeRender”中定义的代码移动到名为“onBeforeRenderPage”的方法中。请注意，此方法不是 wicket api 的一部分，而是由我们创建的，因为在这种情况下不会调用“onBeforeRender”。

    ```
    protected void onBeforeRenderPage()
    {
        HttpServletRequest servletRequest = (HttpServletRequest) getRequest().getContainerRequest();
        HttpServletResponse servletResponse = (HttpServletResponse) getResponse().getContainerResponse();

        String method = servletRequest.getMethod();
        logger.debug("Received a {} request from {}:{}", new Object[]{method, servletRequest.getRemoteAddr(),
                servletRequest.getRemotePort()});

        if (POST.equals(method)) {
            try {
                setModelFromBody(getRequestBody());
            } catch (Exception e) {
                //swallow this exception
            }
            doPost(getPageParameters(), servletRequest, servletResponse);
        } else if (GET.equals(method)) {
            doGet(getPageParameters(), servletRequest, servletResponse);
        }
    } 
    ```

*   在相应的子类（JSon、Xml 等）中，将方法“onRender()”替换为“renderPage()”，并在执行任何其他操作之前调用我们自定义编写的超级方法“onBeforeRenderPage”。它可能看起来像这样：

    ```
    @Override
    public final void renderPage()
    {
        super.onBeforeRenderPage();
        getResponse().write(getJson());
    } 
    ```

就是这样，您现在可以再次享受优雅的 wicket-rest api，这次使用的是 wicket-1.5。

我已经对此进行了测试并使用了它。

如果你有更好的意见，请分享。

# iphone - 在 iOS 中从 NSFileWrapper 播放电影

> ID：12138117
> 
> 赞同：0
> 
> 时间：2012-08-27T07:52:35.110
> 
> 标签：iphone, ios, mpmovieplayercontroller, nsdata, nsfilewrapper

你如何播放一部电影[`NSFileWrapper`](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/ApplicationKit/Classes/NSFileWrapper_Class/Reference/Reference.html)？

我希望在（如）中找到一个`initWithData:`构造函数，但只提供了一个。`MPMoviePlayerController`[`AVAudioPlayer`](http://developer.apple.com/library/mac/documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html#//apple_ref/occ/instm/AVAudioPlayer/initWithData%3aerror%3a)[`initWithContentURL:`](http://developer.apple.com/library/ios/documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html#//apple_ref/occ/instm/MPMoviePlayerController/initWithContentURL%3a)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:05:40.417

`NSFileWrapper`您可以通过向其发送消息来获取节点的文件名`- filename`。从那里，您可以将其转换为`NSURL`using `– initFileURLWithPath:`，这应该可以解决问题，因为您可以调用`initWithContentURL:`.

# pandas - pandas.read_csv 中 parse_date=[0] 和 parse_date=True 之间的区别

> ID：12138126
> 
> 赞同：3
> 
> 时间：2012-08-27T07:53:22.970
> 
> 标签：pandas

这段代码：

```
import pandas as pd
from StringIO import StringIO

data = "date,c1\n2012-07-31 02:00,1.1\n2012-07-31 02:15,2.2\n2012-07-31 02:30,3.3\n"

df1 = pd.read_csv(StringIO(data),parse_dates=True).set_index(('date'))
df2 = pd.read_csv(StringIO(data),parse_dates=[0] ).set_index(('date'))

print "df1:\n{index}".format(index=df1.index)
print "df2:\n{index}".format(index=df2.index) 
```

返回：

```
df1:
array([2012-07-31 02:00, 2012-07-31 02:15, 2012-07-31 02:30], dtype=object)
df2:
<class 'pandas.tseries.index.DatetimeIndex'>
[2012-07-31 02:00:00, ..., 2012-07-31 02:30:00]
Length: 3, Freq: None, Timezone: None 
```

df1 和 df2 之间的差异是错误、功能还是我误解了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T10:20:06.183

对我来说似乎是一个错误。我为此创建了一个[问题](https://github.com/pydata/pandas/issues/1816)。

请注意，通过使用 *index_col* 参数可以设置索引。

```
In [15]: df = pd.read_csv(StringIO(data),parse_dates=[0], index_col=0)

In [15]: df.index
<class 'pandas.tseries.index.DatetimeIndex'>
[2012-07-31 02:00:00, ..., 2012-07-31 02:30:00]
Length: 3, Freq: None, Timezone: None 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T12:02:14.740

如果`parse_dates=True`，读者将尝试将索引解析为日期时间（参见文档： http: [//pandas.pydata.org/pandas-docs/stable/io.html](http://pandas.pydata.org/pandas-docs/stable/io.html)）。而且由于您没有在原始调用中设置索引，因此它没有尝试解析它。

这将起作用：

```
In [237]: df1 = pd.read_csv(StringIO(data),parse_dates=True, index_col=0)

In [238]: df1
Out[238]: 
                      c1
date                    
2012-07-31 02:00:00  1.1
2012-07-31 02:15:00  2.2
2012-07-31 02:30:00  3.3

In [239]: df1.index
Out[239]: 
<class 'pandas.tseries.index.DatetimeIndex'>
[2012-07-31 02:00:00, ..., 2012-07-31 02:30:00]
Length: 3, Freq: None, Timezone: None 
```

# iphone - 使用 xpath 查询获取文本

> ID：12138130
> 
> 赞同：-1
> 
> 时间：2012-08-27T07:53:55.140
> 
> 标签：iphone, objective-c, ios, xpath, xpathquery

我想获取此页面的正文：
[此链接][1]
我使用此代码查找正文：

```
NSString *tutorialsXpathQueryString = @"//div[@id='middlepane']/table[2]/tr/td/div[1]/font"; 
```

## 但它不工作！

这是该链接的保存页面

[http://www.mediafire.com/?0t9de2f0b0928nk](http://www.mediafire.com/?0t9de2f0b0928nk)

@Ryan Kohn：没有发生错误，只返回空值或 NULL 值

那个文件又复杂又大，我不能在这个页面上写！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:30:59.823

试试这个 XPath：

```
string pageContentXPath = "//div[contains(@align, 'justify')]"; 
```

请注意，这可能有点不稳定，因为它使用了 div 的 'align' 属性。如果这种情况发生变化，XPath 将不再工作。

# c# - 如何访问模式远程powershell？

> ID：12138131
> 
> 赞同：0
> 
> 时间：2012-08-27T07:53:55.620
> 
> 标签：c#, asp.net, powershell

我有一个用于访问远程 PowerShell 的 C# 代码，运行后出现此错误：拒绝访问。代码是：

```
string shell = "http://schemas.microsoft.com/powershell/Microsoft.PowerShell";
var target = new Uri("http://Computername/wsman");

Pipeline p = runSpace.CreatePipeline();
SecureString passing = new SecureString();
string password = "pass";
foreach (char c in password)
{
    passing.AppendChar(c);
}
passing.MakeReadOnly();
var cred = new PSCredential(@"Domain\User", passing);
var connectionInfo = new WSManConnectionInfo(target, shell, cred); runSpace = RunspaceFactory.CreateRunspace(connectionInfo);    
 runSpace.Open(); 
```

发生此错误是因为我无法访问此地址：http: [//schemas.microsoft.com/powershell/Microsoft.PowerShell](http://schemas.microsoft.com/powershell/Microsoft.PowerShell)

输入此地址进行连接后，显示此消息：处理您的请求时发生错误。

是否有其他架构地址或编写此代码的其他方式？

请帮我。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:06:59.897

首先，首先尝试从 PowerShell 访问远程计算机。在 IMO（而不是 C#）中调试连接问题会更容易。您可以使用以下命令连接（来自 64 位控制台）：

```
$config = 'Microsoft.PowerShell'
$connuri = 'http://Computername:5985/wsman'
$s = New-PSSession -ConnectionUri $connuri -ConfigurationName $config -Credential (Get-Credential)
Invoke-Command -Session $s -ScriptBlock {Get-PSSessionConfiguration} | Format-List * 
```

如果这样可行，那么您可能只是缺少端口号，或者您的 C# 中存在编码问题。但是，这至少会排除 PowerShell 配置问题（我怀疑）。

# c# - 在带有缩进的文本文件中写入文本（C# 代码）

> ID：12138132
> 
> 赞同：1
> 
> 时间：2012-08-27T07:53:57.810
> 
> 标签：c#, .net, file, file-io, formatting

> **可能重复：**
> [在文本中格式化 C# 代码？](https://stackoverflow.com/questions/10892884/formatting-c-sharp-code-in-text)

修订后的问题：我有一个包含 C# 代码的输入文本文件。代码不缩进。我已阅读所有文本，现在想将此文本（代码）写回文本文件但带有缩进。

所以让我们说如果我有输入。

```
void myFunction(string a)
{
a = "abc";
              for (int i=0; i<2; i++)
{
     a += "a";
   }
              } 
```

输出应该是（在文本文件中。）

```
void myFunction(string a)
{
    a = "abc";
    for (int i=0; i<2; i++)
    {
        a += a";
    }
} 
```

我不是在谈论在 Visual Studio 中格式化代码。我正在谈论将其写入带有缩进的文本文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T07:56:35.807

您可以在VS上打开文本文件并对其进行格式化，
选择编辑->高级->格式化文档

![在此处输入图像描述](../Images/f0f544f2fbda1d29b4aa19e4a9cd01df.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T07:58:45.260

如果您想使用程序来格式化您的 c# 代码，您可能会发现这很有用：

[在文本中格式化 C# 代码？](https://stackoverflow.com/questions/10892884/formatting-c-sharp-code-in-text)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:26:35.200

您还可以一次应用**所有文件**的格式。使用以下博客中定义的宏

[http://timwise.blogspot.in/2009/01/format-all-document-in-visual-studio.html](http://timwise.blogspot.in/2009/01/format-all-document-in-visual-studio.html)

# tsql - 计算返回日期时间结果的日期之间的差异

> ID：12138133
> 
> 赞同：0
> 
> 时间：2012-08-27T07:53:59.603
> 
> 标签：tsql

我需要以日期时间格式获取两个日期之间的差异：`HH:mm:ss`. 是否可以使用一些 T-SQL 函数？我一直用`DATEDIFF`，但它只返回`int`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T08:00:35.853

```
declare @date1 datetime = '2012-08-04 12:10'
declare @date2 datetime = '2012-08-04 13:10'

select cast(@date2 - @date1 as time(0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:59:18.553

只需将它们相减以获得日期时间值，然后按照您的需要进行格式化。

例如

```
select CONVERT(varchar(100), getdate(), 108) 
```

您将在其中替换`getdate()`为减法的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T17:42:05.517

如果经过的时间超过 24 小时，则结果会产生误导（“mod”为 24:00:00）。此代码段将包含天数作为时间的前缀。我已经包括计算前向和后向间隔。

```
declare @date1 datetime,@date2 datetime
set @date1 = '2013-01-02 12:01:02' 
set @date2 = '2013-01-03 22:00:00' 
select 

   -- forward interval
   case when datediff(dd,@date1,@date2) != 0 then
    cast(datediff(dd,@date1,@date2) as varchar)
    + 'd ' + convert(varchar(100), @date1-@date2, 108)
   else
      convert(varchar(100), @date1-@date2, 108)
   end as ElapsedT1,

   -- backward interval
   case when datediff(dd,@date2,@date1) != 0 then
    cast(datediff(dd,@date2,@date1) as varchar)
    + 'd ' + convert(varchar(100), @date2-@date1, 108)
   else
      convert(varchar(100), @date2-@date1, 108)
   end as ElapsedT2

ElapsedT1     ElapsedT2
1d 14:01:02   -1d 09:58:58 
```

# iphone - 想要提供一个 UITextField 并向上滑动一个 TaskDetailListView

> ID：12138134
> 
> 赞同：0
> 
> 时间：2012-08-27T07:54:04.607
> 
> 标签：iphone, objective-c, ios, ipad

在我的 tableViewCell 中，当 UILabel 被点击时，标签变成了一个就地 UITextField 编辑器，键盘从底部向上滑动。除此之外，将 detailsListView 向上滚动到 NodeCell 的底部，其中包含有关我可以编辑的“NodeCell”的更多详细信息。

我听说如何实现这一点的方法是向上滚动 detailsViewController 是通过 performSegueWithIdentifier。也许是这样，但我需要通过就地编辑将点击的 UITableViewcell 动画到顶部，并同时查看 detailsViewController。我在网上看到的示例是destinationViewController 在填充窗口时滑动而taskListView 消失的地方。

所以我有一些问题：

1) 如何在点击时将 UILabel 转换为 UITextField？我的意思是我必须有两个子视图（1 个 UITextField 和 1 个 UILabel）。我可以只用一个子视图来做吗？有没有办法让 UITextField 看起来像 UILabel，或者我需要实现自己的自定义 UITextField？

到目前为止我可能的解决方案：我在想我创建一个 UIViewController，带有一个 UITableView 点击的 UITableViewCell 将导致 UITableView 框架向上移动到单元格或使用 UIView 块动画向上移动到顶部，淡出那些没有的单元格t 单击并将 UIView 向上滑动到指定位置。对我来说，这意味着一切都可以在一个 UIViewController 中完成，而不需要两个视图控制器。

你怎么看？

不太确定我是否以正确的方式编写了这段代码。可能必须再次通过文档。

这是我在 tappedCell 下方淡化 UITableViewCells 的实现。有用。

```
CGRect originalLocation;
CGRect newLocation;
NSInteger cellRow;
cellRow = indexPath.row;

  //Retrieve all the cells below the current tapped cell excluding the current tapped cell and push them into an array  
    NSMutableArray *cells = [[NSMutableArray alloc] init];
    for (NSInteger j = 0; j < 1; ++j)
    {
        for (NSInteger i = 0; i < [self.tableView numberOfRowsInSection:j]; ++i)
        {
            if (i != cellRow && i > cellRow){
            [cells addObject:[self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:j]]];
            }
        }
    }

    //Change the alpha of the cells below tappedCell
    for (NSInteger j = 0; j < cells.count; ++j) {
        cell = [cells objectAtIndex:j];
        [UIView animateWithDuration:1.0
                              delay:0.1
                            options: UIViewAnimationCurveEaseOut
                         animations:^{

                             cell.contentView.alpha = 0.05;
                             cell.backgroundView.alpha = 0.05;

                         }
                         completion:^(BOOL finished){
                             NSLog(@"Done!");

                         }];

    }

//get UITableView newLocation from tableView Frame minus the tappedCell origin.   
originalLocation = [self.tableView frame];//[self.tabview frame];
newLocation = originalLocation;
newLocation.origin.y = originalLocation.origin.y - rect.origin.y - 25; //I think the cell height is 25\. 

[UIView animateWithDuration:1.0
                      delay:0.1
                    options: UIViewAnimationCurveEaseOut
                 animations:^{
                     [self.tableView setFrame:newLocation];

                 }
                 completion:^(BOOL finished){
                     NSLog(@"Done!");

                 }]; 
```

此代码仅用于任务列表的淡入淡出和上滑。不包括详细信息列表。不确定我是否正确实施了这一点。想听听你对此的看法。

谢谢，

本

# php - 谷歌遵循重定向并忽略 if 构造？

> ID：12138136
> 
> 赞同：0
> 
> 时间：2012-08-27T07:54:14.830
> 
> 标签：php, redirect, google-plus

在我的网站中，我通过 header("location") 进行了重定向，仅当用户登录不存在时才会执行，重定向到登录表单。我在这个网站上有一个 google+ 按钮，并且 google 总是遵循重定向。我无法理解为什么？

当我删除此重定向时，一切都很好。我试过这段代码：

```
if (!$user->user_exists && !getIsCrawler($userAgent)) {
header("Location: login.php"); } 
```

为了检测爬虫，我使用这个函数：

```
$userAgent = $_SERVER['HTTP_USER_AGENT'];
function getIsCrawler($userAgent) { 
$crawlers = 'Google|msnbot|Rambler|Yahoo|AbachoBOT|accoona|' . 'AcioRobot|ASPSeek|CocoCrawler|Dumbot|FAST-WebCrawler|'
 .'GeonaBot|Gigabot|Lycos|MSRBOT|Scooter|AltaVista|IDBot|eStyle|Scrubby'; $isCrawler =
 (preg_match("/$crawlers/", $userAgent) > 0); return $isCrawler; } 
```

我在这里做错了什么？我希望你们中的某个人对此有解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:36:03.310

用户代理很容易被欺骗。所以你可能要小心你的那部分代码并考虑重新评估它。

您应该查看 Gus Class 的文章，了解如何在需要将内容放在付费墙后面或登录时呈现必要的标记：http: [//gusclass.com/blog/2012/08/15/rendering-schema-org -markup-for-content-behind-a-paywall/](http://gusclass.com/blog/2012/08/15/rendering-schema-org-markup-for-content-behind-a-paywall/)

基本上将必要的数据传递到您的登录页面可以让爬虫仍然检索他们需要的元数据，同时通过登录保护您的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:41:01.900

不幸的是，我认为不可能解决这个问题。众所周知，谷歌使用不同的用户代理（名称不详）来检查向搜索引擎和普通用户显示不同内容的网页，或所谓的伪装/门口页面。

# java - 安卓+谷歌地图

> ID：12138141
> 
> 赞同：0
> 
> 时间：2012-08-27T07:54:47.763
> 
> 标签：java, android, google-maps, google-maps-api-3

我想知道是否可以使用谷歌地图 API 创建一条更多点的路径？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:56:48.570

[是的，您可以按照API-Doku](https://developers.google.com/maps/documentation/android/)中的说明使用 Overlays 执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:21:22.087

这是从 KML 文件和绘图路径加载点的示例。

[如何使用 kml 文件在地图上绘制路径？](https://stackoverflow.com/questions/3109158/how-to-draw-a-path-on-a-map-using-kml-file/3109723#3109723)

# android - 设计问题 - 将 json 解码为特定对象类或通用 JsonEntity

> ID：12138147
> 
> 赞同：2
> 
> 时间：2012-08-27T07:54:59.700
> 
> 标签：android, json, converter, decode

我正在一个通过 HTTP 接收一些 JSON 对象的 Android 应用程序中工作。然后我将接收到的数据存储到数据库中。通过 http 接收的数据与存储在数据库中的数据不同，所以我有 2 层 - 传输层，带有传输对象，以及带有域对象的 DB 层。有些转换器可以将信息从 TO 转换为 DO，或者以其他方式。

我想知道以下哪种选择更好：

1.  将接收到的数据解码为特定传输对象（使用 gson）- FooTO，然后使用 FooConvertor 转换为 FooDO，并将 FooDO 存储到 DB 中。

    ```
     gson                   FooConvertor           DAO 
    ```

    http content(string) ------> **FooTO** ----------------> FooDO --------> 数据库

2.  将接收到的数据解码为通用 JsonEntity，然后使用 FooConvertor 将信息转换为 FooDO，并将 FooDO 存储到 DB 中。

    ```
     gson                   FooConvertor           DAO 
    ```

    http content(string) ------> **JSONEntity** --------------> FooDO --------> 数据库

一个重要的方面是我无法控制通过 http 接收的 json 对象的结构，它的结构可能随时改变，所以我想尽量减少对我的应用程序的更改影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:10:08.243

您应该使用`GSON`库，因为它更加结构化，并且在获取 JSON 期间创建的类可以重用于在数据库中存储相同的数据

# sql-server - 从 Sql Server 2008 R2 连接到 IBM i 服务器

> ID：12138149
> 
> 赞同：11
> 
> 时间：2012-08-27T07:55:02.320
> 
> 标签：sql-server, database-connection, oledb, ibm-midrange, linked-server

我有一个大问题：我必须连接（我只想读取数据，而不是写入）我客户的 IBM AS/400（又名 iSeries，现在是 IBM i）服务器......

我想我有所有需要的参数（由 AS/400 程序员给我），但我不知道我必须使用哪个驱动程序，以及我是否有所有需要的软件！

我已经安装了 IBM AS/400 ClientAccess 5.8 驱动程序（带有最新操作系统的补丁），现在我正在尝试`Linked Server`在我的 Sql Server 2008 R2 (x64) 服务器中配置一个新驱动程序。

**第一个问题：**我应该使用哪个驱动程序？

我有很多选择（但也许这些都不起作用！！）：

```
IBM DB2 UDB for iSeries IBMDASQL OLE DB Provider
IBM DB2 UDB for iSeries IBMDA400 OLE DB Provider
IBM DB2 UDB for iSeries IBMDARLA OLE DB Provider 
```

...或者其他通用`OLEDB/ODBC`驱动程序？！

**第二个问题：**我应该将参数放在哪里（我的意思是在哪些字段中！）

无论如何，在我为我选择一个提供者时`Linked Server`，显然我必须设置我的参数......但我只有这个：

*   ADMIN 用户的用户名
*   ADMIN 用户的密码
*   AS/400 服务器 IP 地址
*   “主”存档的名称，我的数据存储在其中（类似于`ACG_DATV2`）

**第三个问题**：我应该如何写我的查询？如何引用 AS/400“档案”和表格？

我不知道如何构建我的阅读查询：表和视图（？！）存储在哪里以及如何引用它们？

先感谢您！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-27T08:01:19.967

我认为有很多方法可以实现您想要的，但我会尝试解释在您的情况下我会做什么。

使用该版本的 IBM ClientAccess（以及补丁），如果您使用正确的数据提供程序，我在连接 Sql Server 2008 R2 链接服务器时应该不会遇到麻烦。

首先，尝试以这种方式配置您的链接服务器：

*   链接服务器名称：您想要的，它只是一个自定义名称（例如`MYAS400`：）
*   提供者：`IBM DB2 UDB for iSeries IBMDASQL OLE DB Provider`
*   产品名称：不重要，类似`iSeries Access OLEDB Driver`
*   数据来源：AS/400 服务器 IP 地址（示例：`192.168.0.1`）

如果您使用向导或通过 SQL 代码配置链接服务器，当它第一次需要访问 AS/400 服务器的数据时，您将被要求提供凭证，并带有一个典型的 iSeries 窗口（请看我的示例）。

设置您的用户名（用户 ID）和相关密码，不考虑字符串的大小写！！

![在此处输入图像描述](../Images/d4ddd745e0346294bafce0220a2be90b.png)

作为一般提示（但这仅与我的经验有关！），尽量避免特殊字符和大小写区别......

如果你到达这里（链接服务器创建没有问题），链接服务器应该可以工作（所以第一个和第二个问题都解决了）：让我们构建第一个查询！

创建链接服务器后，您只需正确引用存档、库，当然还有正确的表和链接服务器（按名称）：使用这些信息，构建这样的查询（通常T-SQL 语法）：

```
SELECT
    (Field1)
    , (Field2)
    , *
FROM (Linked Server Name).(Catalog Name).(Library).(TableName) 
```

您可能缺少的唯一信息是“存档”：您可以通过浏览新链接服务器中的目录树轻松找到它，或者只使用`iSeries Access Navigator`工具！

所以，在你的情况下，我认为查询应该是（或多或少）：

```
SELECT
    FILIO
    , DTVLD
    , DTVLA
    , SEQZA
    , CFIMP
    , PADRE
    , TPVLD
    , CMVLD
    , *
FROM MYAS400.S242DA0A.ACG_DATV2.ANLE200F 
```

请注意，这`S242DA0A`仅在我的情况下有效...

还要记住：

*   AS/400 可能会经常要求您提供凭据：如果您关闭并重新打开 SSMS 也是如此。
*   性能？...最好谈点别的 :) ... 提取 Sql Server 表中的表并从那里查询它们！做一个简单的：`SELECT (Fields) INTO myTable FROM (AS/400 table)`
*   我已经尝试过这个过程很多次，我没有遇到很多麻烦（一旦我熟练了！）......但只是为了读取数据（如你所问）！从来没有尝试过更新数据！！！

祝你好运！

# cakephp - 使用 CakePHP 2.0 查找 HABTM

> ID：12138150
> 
> 赞同：1
> 
> 时间：2012-08-27T07:55:06.543
> 
> 标签：cakephp, cakephp-2.0

我正在尝试进行搜索，对具有特定标签或标签的帖子使用分页（例如，如果用户要选择两个标签，则将返回包含任一标签的帖子）。

我在我的 Posts 表中定义了关系

```
public $hasAndBelongsToMany = array('Tags' => array(
            'className'              => 'Tags',
            'joinTable'              => 'posts_tags',
            'foreignKey'             => 'post_id',
            'associationForeignKey'  => 'tag_id',
            'unique'                 => 'keepExisting')); 
```

如何使用 Find 检索具有给定标签的行（名称或 ID 可以）

试：

```
// other pagination settings goes here
$this->paginate['conditions']['Tags.id'] = 13; 
```

给我一个关系不存在的错误。

查看调试信息，这些表似乎没有加入 Posts_Tags 和 Tags 表，但是，当我将数据调试到视图时，Posts 对象包含标签数据。

我能找到的大部分文档似乎都围绕着早期版本的 CakePHP，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:51:17.103

自己找不到令人满意的解决方案。我创建了一个行为来解决这个问题。

创建一个名为 HabtmBehavior.php 的文件并将其放在您的 app/Model/Behavior 文件夹中。将代码块放在那里并保存文件。

将行为添加到您的模型中：例如 public $actsAs = array('Habtm');

这是 find 的使用示例。

```
<?php $this->Entry->find('all', array('habtm'=>array('Tag'=>array('Tag.title'=>'value to find'))) ?> 
```

分页看起来像这样：

```
$this->paginate['Entry']['habtm']['Tag'] = array('Tag.title'=>'value to find'); 
```

您可以通过在 habtm 数组中添加其他模型名称来随意添加任意数量的关系。（请注意不要让它变得复杂，因为这可能会开始减慢您的查找结果。）

```
<?php
class HabtmBehavior extends ModelBehavior {

    public function beforeFind(Model $model, $options) {
    if (!isset($options['joins'])) {
      $options['joins'] = array();
    }
    if (!isset($options['habtm'])) {
      return $options;
    }
    $habtm = $options['habtm'];
    unset($options['habtm']);

    foreach($habtm as $m => $scope){
      $assoc = $model->hasAndBelongsToMany[$m];
      $bind = "{$assoc['with']}.{$assoc['foreignKey']} = {$model->alias}.{$model->primaryKey}";

      $options['joins'][] = array(
          'table' => $assoc['joinTable'],
          'alias' => $assoc['with'],
          'type' => 'inner',
          'foreignKey' => false,
          'conditions'=> array($bind)
      );

      $bind = $m.'.'.$model->{$m}->primaryKey.' = ';
      $bind .= "{$assoc['with']}.{$assoc['associationForeignKey']}";

      $options['joins'][] = array(
          'table' => $model->{$m}->table,
          'alias' => $m,
          'type' => 'inner',
          'foreignKey' => false,
          'conditions'=> array($bind) + (array)$scope,
      );
    }
    return $options;
    }

} 
```

希望这可以帮助。快乐烘焙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:34:56.187

我认为最好的解决方案是在连接表模型上应用查找功能。我以前试过这个，它工作正常。

在您的 PostTag 模型中：

```
/**
 * @see Model::$actsAs
 */
    public $actsAs = array(
        'Containable',
    );

/**
 * @see Model::$belongsTo
 */
    public $belongsTo = array(
        'Post' => array(
            'className' => 'Post',
            'foreignKey' => 'post_id',
        ),
        'Tags' => array(
            'className' => 'Tag',
            'foreignKey' => 'tag_id',
        ),
    ); 
```

在您的控制器中：

```
 // $tagsId = tags ids
    $posts = $this->PostTag->find('all', array('conditions' => array('PostTag.tag_id' => $tagsId),'contain' => array('Post'))); 
```

也最好遵循蛋糕命名约定，如果你有标签（复数），post_tags（第一个单数第二个复数），posts（复数）表，你必须有标签，邮政标签，邮政模型。

# asp.net - Server.Transnfer 停止 window.open

> ID：12138152
> 
> 赞同：1
> 
> 时间：2012-08-27T07:55:13.593
> 
> 标签：asp.net

我需要通过使用 window.open 并将当前页面重定向到新页面来打开一个新的弹出窗口。我的代码如下所示：

```
//    Work done...
//    RegisterStartupScript("window.open("page1.aspx")");
//    Server.Transfer("page2.aspx"); 
```

问题是我的页面被重定向到 page2.aspx 但没有打开 page1.aspx 的弹出窗口。

当不使用 Server.Transfer 时，它会打开弹出窗口。请指导我如何实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T08:03:26.690

Server.Transfer 不会将响应发送回浏览器，因此您的 javascript 代码不会执行。如果要执行 javascript 然后重定向响应，请使用 Response.Redirect。
请在此处阅读这两种方法之间的区别[http://haacked.com/archive/2004/10/05/responseredirectverseservertransfer.aspx](http://haacked.com/archive/2004/10/05/responseredirectverseservertransfer.aspx)
另外，Server.Transfer 只能传输到同一应用程序中的 asp.net 页面。当您调用 Server.Transfer 时，它只是创建指定页面的实例并将页面处理从当前页面转移到新页面。

# php - 使用会话变量跟踪页面以进行重定向

> ID：12138154
> 
> 赞同：0
> 
> 时间：2012-08-27T07:55:27.997
> 
> 标签：php, session-variables

我目前正在使用 SESSION 变量进行重定向。Hoprfully 代码片段将使其清楚。

**addForm.php：**

```
if (!isset($_SESSION['myusername'])){
            if (isset($_COOKIE['username'])){   
                $_SESSION['myusername'] = $_COOKIE['username'];

            }
        else{   
                #using a session var to redirect back to addForm.php
                $_SESSION['addForm'] = 1;
                header("location:loginForm.php");       
            }
} 
```

**登录成功.php**

```
session_start();
if (!isset($_COOKIE['username'])){

    header("location:loginForm.php");
}
if (isset($_SESSION['addForm'])){
    header("location:addForm.php");
} 
```

以上工作（重定向到addForm.php）。我的问题是，这样做有什么风险吗？有更好的方法吗？我想我正在寻找“最佳实践”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:08:43.157

你有一些错误：

1.  有效的标头是`header('Location: http://www.example.org/script.php');`通知`L`和完整的 URL？
2.  每次`header('Location: http://www.example.org/script.php');`之后应该是`exit();`
3.  您不能仅仅依靠`$_COOKIE['username']`，您需要从密码中获取一些信息，我的意思不是密码，也可能是`MD5()`哈希密码`$_COOKIE`。你应该知道不要那么依赖`$_COOKIE`。
4.  在`LoginSuccess.php`你必须`unset($_SESSION['addForm'])`重定向之前，`addForm`仍然会设置 from session。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:13:03.190

个人而言，我更喜欢将条目当前 URI 存储在会话变量中。然后，当我的登录过程成功时，我使用存储的 URI 将用户重定向到上一页。

**伪代码**

```
 if (!isset($_SESSION['userloginobj'])) {
        $_SESSION['callbackuri'] = get_current_url_depending_of_your_process();
        header('location:' . get_base_url() . 'index.php?do=login');
        exit(0);
    }
    elseif ('login' == get_param('do')) {
        // Show the login form

        if ( is_login_successfull() ) {
             $_SESSION['userloginobj'] = "userinfo";
             header('location:' . $_SESSION['callbackurl']);
             exit(0);
        }
    }
    else {
        // Normal process
    } 
```

但是，如果您不使用框架，您的流程似乎是一个好的开始。

# arrays - Matlab中距线集一定距离的表面积，类似于轮廓？

> ID：12138160
> 
> 赞同：3
> 
> 时间：2012-08-27T07:55:53.537
> 
> 标签：arrays, matlab, math, graph, linear-algebra

亲爱的 stackoverflow 用户，

几年前，我用了几个月的数学。在几年没有编程之后，我现在做一个研究项目，作为一名学生，我在其中使用 Matlab。我在 stackoverflow 上找到了很多很好的帮助，但现在我遇到了以下问题：

我有一个矩形网格上节点之间的连接数据集，每个节点都有可能连接到它的 8 个邻居。我的测量采用 3 x n 矩阵的形式，其中前两个值指定一个节点，第三个值指定它们是否连接，网格的大小是预先确定的。通常有大约十条线来自两个或三个至少彼此相邻的节点。我的研究项目的目标是计算这组线周围距离 r 处的面积。

到目前为止，我已经能够使用下面的代码绘制线条，为此我在 stackoverflow 上使用了一些代码，这非常有用。但是，我无法在一定距离处获得围绕它的等高线（我希望用它来计算该等高线内的面积）。gplot 函数返回两个向量，每行有两个坐标，我发现很难将其转换为更有用的东西。我尝试在与线的距离处定义一个值 Z，以随着与线的距离而下降，因此我得到了来自这些线的斜率。从这个斜率我可以计算轮廓线。但是，因为这些线只是坐标，我不知道如何计算到那条线的距离，而不是它们何时成为函数。

我真的很茫然。我希望我已经在这里清楚地发布了我的问题。这是我第二次发布这个问题，我现在在代码和图片中添加了注释以更好地解释自己。感谢您提供的任何建议！

到目前为止，xls 文件是我上面提到的 3 x n 矩阵，我还在下面的代码中以矩阵形式写了它的内容，所以我的问题更容易理解：

```
%# here i set my data/constants

filename='random.xls'; file=xlsread(filename); y=width; x=length; 

%# random.xls looks approximately like this, after xlsread(filename) you get

file=[21    22  1;
21  20  1;
15  16  1;
15  14  1;
15  23  1;
14  22  1;
14  21  1;
22  15  1;
23  14  1;
24  15  1;
6   15  1;
5   14  1;
7   14  1;
8   15  1];

%# predefined width and length, i usually get this from the file

width=8; length=4;

%# here i create my adjaceny matrix in a elegant way user amro posted on stackoverflow
%# however i immediately multiply it by 0, creating a y*x by y*x matrix with all zeroes

[X Y] = meshgrid(1:x,1:y); X = X(:); Y = Y(:); 
adjacency = squareform( pdist([X Y], 'chebychev') == 1 ); adjacency=adjacency*0;

%# here i take the matrix "file" for which the first two values are node numbers and 
%# the third value designates whether there is a connection between the two nodes to
%# fill in the connections in the adjacencymatrix

[nrows,ncols]=size(file);
for r = 1:nrows
      if file(r,3)==1
         adjacency(file(r,1),file(r,2))=1;
      end
end
adjacency=(adjacency+adjacency.');

%# plots the adjacencymatrix

subplot(121), spy(adjacency)

%# plots the connections and designates the nodes, note that the numbers designating
%# the nodes do not match original data, this is a separate problem i have not solved

[xx yy] = gplot(adjacency, [X Y]);
subplot(122), plot(xx, yy, 'ks-', 'MarkerFaceColor','b')

%# these last lines of code for plotting the numbers of the grid i do not fully
%# understand, in here is the cause for the numbers not matching the original data

axis([0 x+1 0 y+1])
[X Y] = meshgrid(1:x,1:y);
X = reshape(X',[],1) + 0.1; Y = reshape(Y',[],1) + 0.1;
text(X, Y(end:-1:1), cellstr(num2str((1:x*y)')) )
xlabel('length')
ylabel('width')
title(filename) 
```

为了澄清我的问题，我添加了这两张图片：当前情节[http://imgur.com/5uPd4](http://imgur.com/5uPd4) 我想知道的区域[http://imgur.com/WsIbg](http://imgur.com/WsIbg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:32:24.883

在 Matlab 中找到距离 r 的等值线或等高线内的表面积的解决方案，通过图形处理（扩张）进行近似，而不是精确或有效的遮阳篷！

我做了一个近似，所以这不是一个精确的遮阳篷，也不是有效的编码。我的一个研究机器视觉的朋友建议将线条转换为像素，然后用圆盘放大图像，之后像素数就是表面积的度量：

```
%# constants and variables
minx = min(xx);
miny = min(yy);
maxx = max(xx);
maxy = max(yy);
rangex = maxx - minx;
rangey = maxy - miny;
borderRelNum = sqrt(2);
electrodeToImageScaleFactor = 100;
imsizex = 2*(maxx+borderRelNum)*electrodeToImageScaleFactor+2;
imsizey = 2*(maxy+borderRelNum)*electrodeToImageScaleFactor+2;
im = zeros(imsizex, imsizey);
grayscalevalue = 255;
disksize = round(borderRelNum*electrodeToImageScaleFactor);

%# transformation matrices
centerElectrodeSpace = [1, 0, -(minx + maxx) / 2;
                0, 1, -(miny + maxy) / 2;
                0, 0, 1 ];

scaleElectrodeToImage = [electrodeToImageScaleFactor , 0, 0;
             0, electrodeToImageScaleFactor , 0;
             0, 0, 1 ];

centerImageSpace = [ 1, 0, imsizex / 2;
             0, 1, imsizey / 2;
             0, 0, 1 ];

electrodeToImage = centerImageSpace * scaleElectrodeToImage * centerElectrodeSpace;

%# transformation

for i = 0:(size(xx,1) / 3 - 1) 
    p1 = [xx(i*3 + 1); yy(i*3 + 1); 1];
    p2 = [xx(i*3 + 2); yy(i*3 + 2); 1];     

    p1im = electrodeToImage * p1
    p2im = electrodeToImage * p2

    lx = linspace( min( p1im(1), p2im(1) ), max( p1im(1), p2im(1) ), borderRelNum*electrodeToImageScaleFactor )
    ly = linspace( min( p1im(2), p2im(2) ), max( p1im(2), p2im(2) ), borderRelNum*electrodeToImageScaleFactor )

    index = sub2ind(size(im),round(lx),round(ly));
    im(index) = grayscalevalue;     
end

%# Now dilate and count pixels
    se = strel('disk', disksize, 0);
im = imdilate(im, se);
image(im)
    colormap(gray)
    sum(sum(im/grayscalevalue))*(1/electrodeToImageScaleFactor^2) 
```

如果有人能够更优雅、更有效或更准确地解决我的问题，我仍然会非常感激。但这暂时可以。

-edit- 好的，这确实是非常低效的，我的电脑已经在我的数据集（10 个 xls 文件，不是那么多）上处理数字 30 分钟，并且仍然在文件 1 中，如果我查看工作区值的话

# sql - 在java中使用sql DATEADD函数

> ID：12138164
> 
> 赞同：4
> 
> 时间：2012-08-27T07:56:00.970
> 
> 标签：sql, derby, date-arithmetic, dateadd

当我使用 DATEADD 运行查询时，数据库似乎无法识别此功能。当我刚跑步时，`select DATEADD(Month, -3, GETDATE())`我得到：

```
Error code -1, SQL state 42X01: Syntax error: Encountered "<EOF>" at line 1, column 36. 
```

如您所见，我从 hsqldb-2.2.9 添加了 JAR 文件

![在此处输入图像描述](../Images/9f873780dd99ebe050de0da652674408.png)

我在这里想念什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T08:14:47.740

Derby 没有 DATEADD 函数。您需要使用[JDBC 函数](http://db.apache.org/derby/docs/10.7/ref/rrefjdbc88908.html) `timestampadd`来实现这一点：

```
select {fn TIMESTAMPADD(SQL_TSI_MONTH, -3, CURRENT_TIMESTAMP)}
from sysibm.sysdummy1 
```

使用 sysdummy1 的替代方法是 ANSI 标准`values`子句，它在 Derby 和 HSQLDB 中都有效：

```
values ({fn TIMESTAMPADD(SQL_TSI_MONTH, -3, CURRENT_TIMESTAMP)}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:50:33.163

在 DERBY 中加减一天 select rundate, {fn TIMESTAMPADD(SQL_TSI_DAY, -1, RUNDATE)} from tst.YOUTH

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:04:51.993

对于 hsqldb：

DATEADD ( , , ) DATEADD ( '月', 3, DATE '2008-11-22' )

尝试一下

选择 DATEADD（月，-3，'2008-11-22'）

对于德比：

Derby 支持 JDBC 转义函数 TIMESTAMPADD

TIMESTAMPDIFF（间隔，timestampExpression1，timestampExpression2）

值 {fn timestampadd(SQL_TSI_DAY, 1, timestamp('2010-12-31 23:59:59'))};

# coldfusion - 简单冷箱应用程序的 CFML 构造错误无效

> ID：12138168
> 
> 赞同：0
> 
> 时间：2012-08-27T07:56:19.053
> 
> 标签：coldfusion, coldbox

我想做一个简单的 ColdBox 应用程序。所以我使用了[这个链接](http://www.cfframeworks.com/blog/index.cfm/2007/2/26/Installing-the-Coldbox-Framework-in-two-easy-steps)中的说明并下载[了 coldbox_3.5.2](http://www.coldbox.org/download)。但是当我尝试在浏览器中查看此网址时：

```
 http://127.0.0.1/coldbox_3.5.2/samples/ 
```

我收到以下错误：

```
Invalid CFML construct found on line 28 at column 22.

ColdFusion was looking at the following text:
{

The CFML compiler was processing:

A script statement beginning with this.flash on line 28, column 9.
A cfscript tag beginning on line 12, column 2. 
```

当我第一次尝试这个时，我不知道是什么导致了错误。谁能帮我理解错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:32:30.687

该错误是因为 CF8（内部版本 8,0,0,176276）不支持嵌套的内联结构。

根据其要求，ColdBox 需要 CF 8.0.1 (build 8,0,1,195765) 或更高版本。

[http://wiki.coldbox.org/wiki/Installation.cfm](http://wiki.coldbox.org/wiki/Installation.cfm)

# wpf - 降低 WPF 图像控件中的图像分辨率

> ID：12138169
> 
> 赞同：2
> 
> 时间：2012-08-27T07:56:28.250
> 
> 标签：wpf

我在 WPF 中有一个图像控件。我需要减小图像尺寸控件的宽度和高度。但是当我这样做时，图像看起来不太好。数据丢失更多。

所以我想降低图像分辨率，而不是仅仅改变图像控件的宽度和高度。

任何人都可以帮助我如何在 WPF 图像控件中更改绑定图像的图像分辨率

[我的意思是图像已经绑定到图像控件现在我只需要更改分辨率]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T10:54:08.447

在 .NET 4 中，他们将默认图像缩放更改为低质量的缩放...因此您可以使用`BitmapScalingMode`它切换回更高质量的缩放：

```
<Image RenderOptions.BitmapScalingMode="HighQuality"
       Source="myimage.png"
       Width="100"
       Height="100" /> 
```

*   [http://10rem.net/blog/2010/05/01/crappy-image-resizing-in-wpf-try-renderoptionsbitmapscalingmode](http://10rem.net/blog/2010/05/01/crappy-image-resizing-in-wpf-try-renderoptionsbitmapscalingmode)

如果您的源图像是一个巨大的图像，您还可以将上述选项与其他选项（如解码选项）结合使用（这只会减少应用程序中的内存使用）。

*   [http://www.shujaat.net/2010/08/wpf-saving-application-memory-by.html](http://www.shujaat.net/2010/08/wpf-saving-application-memory-by.html)

防止“模糊”的其他选项是放在`UseLayoutRounding="True"`根元素（即窗口）上......建议在 .NET 4 中使用它，而不是`SnapToDevicePixels`：

*   [何时应在 WPF 4.0 中使用 SnapsToDevicePixels？](https://stackoverflow.com/questions/2399731/when-should-i-use-snapstodevicepixels-in-wpf-4-0)

*   [http://blogs.msdn.com/b/text/archive/2009/08/27/layout-rounding.aspx](http://blogs.msdn.com/b/text/archive/2009/08/27/layout-rounding.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:53:54.723

您可以像这样使用 DecodePixelWidth 属性：

```
<Image Stretch="Fill">
    <Image.Source>
        <BitmapImage CacheOption="OnLoad" DecodePixelWidth="2500" UriSource="Images/image.jpg"/>
    </Image.Source>
</Image> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:49:11.440

1) 尝试使用 ViewBox ：将您的图像放在 ViewBox 中。
2) 有时渲染引擎会因为像素对齐问题而降低质量，尤其是在低分辨率设备上。查看 SnapsToDevicePixels 属性，并尝试在 ViewBox 的包含控件 AND / OR 中将其设置为 true。
3) 显然，您可以编写一个执行分辨率更改的控件，但这是相当多的工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-01-12T04:17:56.433

尝试这个。

```
Image img = new Image();

var buffer = System.IO.File.ReadAllBytes(_filePath);
MemoryStream ms = new MemoryStream(buffer);

BitmapImage src = new BitmapImage();
src.BeginInit();
src.StreamSource = ms;
src.DecodePixelHeight = 200;//Your wanted image height
src.DecodePixelWidth = 300; //Your wanted image width 
src.EndInit();

img.Source = src; 
```

# linux - 如何在当前进程的页表中添加条目？

> ID：12138171
> 
> 赞同：0
> 
> 时间：2012-08-27T07:56:37.197
> 
> 标签：linux

我想在当前进程的页表中添加一些映射。起初，我以为我可以使用“/dev/mem”将我想要的内容写入页表。但是恐怕中间页表（以x86_64为例，pdpt、pdt和pt）还没有分配。有没有办法将条目添加到当前进程的页表中？谢谢。

# xml - 使用 XML 输出作为模板的输入

> ID：12138175
> 
> 赞同：1
> 
> 时间：2012-08-27T07:57:04.593
> 
> 标签：xml, xslt, xslt-1.0

我正在尝试创建 XML 的所有元素的键值对。例子：

```
<a>
   <b>1</b>
   <c>2</c>
</a> 
```

将返回：

```
<KEY_VALUE_PAIR>
   <KEY>a/b</KEY>
   <VALUE>1</VALUE>
</KEY_VALUE_PAIR>
<KEY_VALUE_PAIR>
   <KEY>a/c</KEY>
   <VALUE>2</VALUE>
</KEY_VALUE_PAIR> 
```

但是，我的问题是我想将输入 xml 作为字符串。

因此，不要将此作为输入：

```
<a>
   <b>1</b>
   <c>2</c>
</a> 
```

我想用这个：

```
<XML>
   <content>&lt;a&gt;&lt;b&gt;xyz&lt;/a&gt;&lt;/b&gt;</content>
</XML> 
```

这是我的代码：它几乎可以工作，创建键值对是可以的，但是它不会在 XML/内容中获取 XML，而是创建输入 xml 的键值对。

```
 <xsl:output method="xml" indent="yes"/>

 <xsl:template match="/XML/content">
  <xsl:value-of select="/XML/content" disable-output-escaping="yes"/>
  <xsl:call-template name="CreateNotificationValues"/>
  <xsl:call-template name="CreateNotificationClear"/>
 </xsl:template>

 <xsl:template match="/" name="CreateNotificationValues">
    <xsl:for-each select="//*[count(child::*) = 0]">
     <KEY_VALUE_PAIR>
      <KEY>
       <xsl:for-each select="ancestor::*"><xsl:value-of select="name()"/>/</xsl:for-each>
       <xsl:value-of select="name()"/>
      </KEY>
      <VALUE>
       <xsl:value-of select="text()"/>
      </VALUE>
     </KEY_VALUE_PAIR>
    </xsl:for-each>
 </xsl:template>

 <xsl:template match="/KEY_VALUE_PAIR" name="CreateNotificationClear">
 </xsl:template> 
```

我该如何使用它：

```
<xsl:value-of select="/XML/content" disable-output-escaping="yes"/> 
```

作为另一个模板的输入xml？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:05:50.487

> 我该如何使用它：
> 
> ```
> <xsl:value-of select="/XML/content" disable-output-escaping="yes"/> 
> ```
> 
> 作为另一个模板的输入xml？

**你不能**——可以在格式良好的 XML 文档上执行 XSLT 转换，但上述 XSLT 指令的结果只是一个文本节点（它的最终表示可能*看起来像*XML，但这是一个一维字符串-- 不是节点树。

为了将字符串用作树（已解析的 XML 文档），您需要……*解析*此字符串，执行此操作的工具称为*xml 解析器*。

**XSLT 1.0 或 XSLT 2.0 转换都不能接受字符串并将其解析为 XML 文档树**。

在 XSLT 3.0 中可能有一个标准函数**[`parse-xml()`](http://www.w3.org/TR/xpath-functions-30/#func-parse-xml)**可以做到这一点。

**在 XSLT 1.0 或 XSLT 2.0 中，有必要调用一个**用您喜欢的 PL 编写的扩展函数，它将字符串解析为 XmlDocument 对象并将该对象返回给转换。

# java - 应用中爬取网站的最佳架构

> ID：12138182
> 
> 赞同：0
> 
> 时间：2012-08-27T07:57:25.747
> 
> 标签：java, spring, hibernate, architecture

我正在开发一个产品，我们需要一个功能来抓取用户给定的 URL 并发布他单独的移动站点。在爬取过程中我们要爬取网站内容、CSS、图片和脚本。该产品用于执行更多活动，例如安排一些营销活动等等。我想问的——

执行此任务的最佳实践和开源框架是什么？

我们应该在应用程序本身中执行此操作，还是应该有另一个服务器来执行此活动（如果此活动需要负载）？请记住，我们每个月都会有 1 个“缺乏”的用户从网站上发布他的移动网站，以及大约 1-2k 的并发用户。

该应用程序是在 Java 和 Java EE 平台中构建的，使用 Spring 和 Hibernate 作为服务器端技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:07:51.250

我们使用 Derkley DB Java 版本来管理堆外链接队列，以抓取和区分待下载链接和尚未下载的链接。

对于解析 HTML TagSoup 是野生互联网中的最佳选择。

Batik 是解析 CSS 和 SVG 的选择。

PDFBox 很棒，可以从 PDF 中提取链接

Quartz 调度器是经过行业验证的事件调度选择。

是的，您将需要一台或多台服务器进行爬网，一台服务器用于聚合结果和调度任务，可能还需要另一台服务器用于 WEB 前端和后端。

这适用于[http://linktiger.com](http://linktiger.com)和[http://pagefreezer.com](http://pagefreezer.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:13:29.117

我正在实施一个基于[Selenium HtmlUnit Driver](http://code.google.com/p/selenium/wiki/HtmlUnitDriver)的爬行项目。我认为它确实是自动化无头浏览器的最佳 Java 框架。

# c# - 无法将“MS.Internal.NamedObject”类型的对象转换为“System.Data.DataRowView”类型

> ID：12138185
> 
> 赞同：0
> 
> 时间：2012-08-27T07:57:36.757
> 
> 标签：c#, datatable

我有这段代码可以从数据网格中检索数据，然后将其存储在另一个数据表中。但我得到的例外是： `"Unable to cast object of type 'MS.Internal.NamedObject' to type 'System.Data.DataRowView'.`“这个例外是在`"dt.Rows.Add(dr.ItemArray)"`

如果有任何故障或需要任何其他信息，请告诉我。

代码：

```
 DataTable dt = new DataTable();
         DataColumn c1 = new DataColumn("IsActive", typeof(bool));
         dt.Columns.Add(c1);

         DataColumn c2 = new DataColumn("DataGridTextBox_QCList1", typeof(string));
         c2.MaxLength = 500;
         dt.Columns.Add(c2);

         DataColumn c3 = new DataColumn("DataGridTextBox_QCSummary", typeof(string));
         c3.MaxLength = 500;
         dt.Columns.Add(c3);

         DataColumn c4 = new DataColumn("DataGridComboxBox_Control", typeof(string));
         c4.MaxLength = 500;
         dt.Columns.Add(c4);  

     foreach (DataRowView d in dtgQCNumbers.Items)
     {
    DataRow dr = d.Row;
    dt.Rows.Add(dr.ItemArray);
    dt.AcceptChanges();
     }
     foreach (DataRow row in dt.Rows)
     {
    qcId = row["QC_ID"].ToString();
    zipFolderPath = baseFolderPath;
    patternFiles = Directory.GetFiles(zipFolderPath, "*.zip");

    logMessage = "Unzipping file from path" + zipFolderPath + " \n file name:" + patternFiles[0];
    Common.LogMessage(logMessage);

    UnZipReleasePatch(zipFolderPath, patternFiles.First());
    //deploy release patch.
    logMessage = "Deploying files" + zipFolderPath;
    Common.LogMessage(logMessage);
    DeployFiles();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:44:11.903

`DataGrid.Items`可以包含一个`NewItemPlaceholder`用于允许用户添加新项目的内容。出于这个原因，您不能不加选择地迭代集合，要么过滤掉该项目，要么迭代它`ItemsSource`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:19:59.197

感谢 AVD，得到了我的回答如下：

```
foreach (DataRow d in _ds.Tables[0].Rows)
         {
             if (d["DataGridComboxBox_Control"].ToString() == "AVS_DB")
             {
                 qcId = d["DataGridTextBox_QCList1"].ToString();
                 zipFolderPath = baseFolderPath;
                 patternFiles = Directory.GetFiles(zipFolderPath, "*.zip");

                 logMessage = "Unzipping file from path" + zipFolderPath + " \n file name:" + patternFiles[0];
                 Common.LogMessage(logMessage);

                 UnZipReleasePatch(zipFolderPath, patternFiles.First());
                 logMessage = "Deploying files" + zipFolderPath;
                 Common.LogMessage(logMessage);
                 DeployFiles();
             }
         } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-07T14:56:56.587

如果您不需要添加新行，您可以简单地在 XAML 中编写：

CanUserAddRows="假"

并且占位符将丢失，因此您可以迭代直到再次打开它。

# http - JBoss AS 7 上的 http 有效负载日志记录

> ID：12138191
> 
> 赞同：2
> 
> 时间：2012-08-27T07:58:24.080
> 
> 标签：http, logging, jboss, jboss7.x, payload

谁能告诉我如何在 JBoss AS 7 上启用 HTTP 请求和响应负载的日志记录？我找到了很多教程，但没有第 7 版的教程。

谢谢！

# git - 总是在加载提交数据 github

> ID：12138192
> 
> 赞同：0
> 
> 时间：2012-08-27T07:58:29.163
> 
> 标签：git, github

我在 GitHub 中提交并推送了一个包含我的项目文件的文件夹。我可以看到它已经在本地（使用`git status`）和远程提交。（提交 id 是可见的，最近的活动时间戳也发生了变化）。

我首先提交了文件，然后提交了文件夹并将文件夹推送到我的 GitHub 存储库。我添加了文件夹，因为我想要不同的项目，每个文件夹代表一个项目。

如果我在 GitHub 中看到我的存储库，则始终在文件选项卡中显示正在加载提交数据消息，并且提交数据和文件根本不可见。

我在这里想念什么？欢迎任何有关此的指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:08:58.783

更新数据可能需要时间（因为 github 可能已经复制了数据，服务器在不同的地方，可能需要几分钟才能更新）。

无论如何，再试一次。还要更明确地说，“（提交 ID 可见，最近的活动时间戳也已更改）。” -> 在您的本地副本或 Github 上？因为如果它不在 Github 上，它并没有多大帮助。尝试`git fetch`或`git pull`在您的本地副本中确保数据被传播。

您还可以进行其他小的更改并再次提交/推送，也许它会起作用。

# php - 使用 php 中的运算符验证会话

> ID：12138195
> 
> 赞同：0
> 
> 时间：2012-08-27T07:58:34.730
> 
> 标签：php, validation, session

我想验证用户是否已登录以及用户是否有权使用 php 查看内容。

```
if($_SESSION['log'] != "1"){
if($_SESSION['type'] != "1" || $_SESSION['type'] != "2" || $_SESSION['type'] != "3"){
    header("Location: redirect.php");
}} 
```

这完美地工作。

但我想在下面的同一条语句中检查所有内容。但即使是正确的登录，它也不起作用。

```
if($_SESSION['log'] != "1" || $_SESSION['type'] != "1" || $_SESSION['type'] != "2" || $_SESSION['type'] != "3"){
    header("Location: redirect.php");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:00:14.357

您的第一组代码中的逻辑将表明 if 语句略有不同：

```
if($_SESSION['log'] != "1" && ($_SESSION['type'] != "1" || $_SESSION['type'] != "2" || $_SESSION['type'] != "3")){
    header("Location: redirect.php");
} 
```

在您的原始工作代码中，您只测试`type`会话信息，如果`log != 1`这意味着您的第二个代码很可能在原始中根本不会检查的任何其他子句上执行。

编辑您的原始代码：

```
if($_SESSION['log'] != "1")
{
// This condition is ALWAYS checked.
    if($_SESSION['type'] != "1" || $_SESSION['type'] != "2" || $_SESSION['type'] != "3")
    {
    // These conditions are ONLY checked if the first check passes.
        header("Location: redirect.php");
    }
} 
```

在您的第二个示例中，同时检查所有条件，并且当您使用`OR`运算符时，如果其中任何一个通过，ir 将评估为真。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:01:17.533

应该`&&`不是`||`。

```
if($_SESSION['log'] != "1" && ($_SESSION['type'] != "1" || $_SESSION['type'] != "2" || $_SESSION['type'] != "3")){
    header("Location: redirect.php");
} 
```

或者你可以使用`in_array`.

```
if ($_SESSION['log'] != "1" && !in_array($_SESSION['type'], array('1','2','3'))) {
  header("Location: redirect.php");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:02:33.553

是否存在任何非零值`$_SESSION['type']`表示有效会话？如果是这样，你可以这样做：

```
if (empty($_SESSION['type'])) {
    header("Location: redirect.php");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T08:03:57.377

..或`in_array`用于提高可读性

```
if ($_SESSION['log'] != "1" && !in_array($_SESSION['type'], array("1","2","3")) 
```

# oracle - 阅读参数列表 Oracle Forms 10gR2

> ID：12138196
> 
> 赞同：1
> 
> 时间：2012-08-27T07:58:40.013
> 
> 标签：oracle, oracle10g, oracleforms

是否可以读取 Oracle Forms 中的所有参数列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T03:09:55.700

您用于`GET_PARAMETER_LIST(name)`在 Forms 中检索参数列表。但是，您必须知道参数列表的名称是什么。要找出答案，请查看调用设置参数列表的表单的代码 - 例如查找调用`CREATE_PARAMETER_LIST`.

通常，我更喜欢为所有参数列表使用一个标准名称，以避免混淆。

# git - Git 暂存区只是一个索引吗？

> ID：12138207
> 
> 赞同：25
> 
> 时间：2012-08-27T07:59:43.000
> 
> 标签：git, git-index

Pro Git一书说暂存区只是一个列表或索引，它说明了当a`git commit`完成时将提交哪些文件，现在这个名字`index`更常被称为“暂存区”。

但是，如果我们修改`foo.txt`已经是 repo 一部分的文件，并使用`git add foo.txt`它来暂存它，然后再次修改文件，那么现在文件既是“暂存”又是“修改”（如 中所示`git status`），如果我们提交， “分阶段”版本将进入提交。第二次编辑不会进入。

那么，如果“暂存区”只是一个索引——文件列表，那么它如何跟踪第一次编辑是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-27T08:05:53.623

索引是准备好提交的工作目录的视图。它可以看作是一种预提交状态，并不像“文件列表”那么简单。当您这样做`git add`时，文件（带有更改）将添加到索引中，并且在您也添加它们之前不会看到较新的更改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T12:58:28.920

这`index`就像一**篮子**已完成的工作。在任何时候，您都可以`add`将（部分）已完成的文件放入该**篮子**，它将用您当前的副本替换以前的副本，这样当您最终决定时`commit`，它将使用该**篮子**（当前`index`）的内容来创建犯罪。

此外，您之前`add`将在 repo 中创建一个 blob 对象，如果需要，可以通过各种日志找到该对象。一段时间后（30 天+），它会随着 消失`gc`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T08:04:38.233

它是一个索引，而是一个修改树列表，而不是直接的文件。查看[不同类型的对象 git handle](http://git-scm.com/book/en/Git-Internals-Git-Objects)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-01T17:05:14.967

> 那么，如果“暂存区”只是一个索引——一个列表，它如何跟踪第一次编辑是什么？

索引是名称列表**和指向内容**的指针。在书中，它是页码。在 Git 索引中，它是存储库对象数据库中的对象 ID。

这就是 Git 索引，一个路径名索引的内容指针列表。

`git add`对于一些路径名基本上是

```
sha=`git hash-object -w path/to/it`
git update-index --cacheinfo 100644,$sha,path/to/it 
```

除了`git add`检查可执行文件和`100755`这些文件的用途，并递归添加和检查你的`.gitignore`和其他看起来通常最方便的东西。这是一个方便的命令，用于向对象 db 添加内容并更新索引。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2020-07-01T00:09:39.337

暂存区**不仅仅是**一个列表，也不是一个索引，它表示在 git 提交完成时将提交**哪些文件。**

**如果是那样的话，即一个简单的列表，`git add`就永远不会像宣传的那样工作。**

相反，`git add`必须在给出 add 命令时保存文件的内容。所以它对文件进行**快照**，然后将这些快照放入暂存区域（也称为“索引”，恕我直言，这对于名称来说确实是一个相当糟糕的选择）。

所以是的，事实上，这本书的陈述具有误导性和混淆性。 *但这也不足为奇。许多 git 文档令人困惑且考虑不周。*

继续标记我。我确定我是对的。

# algorithm - 简单语言中 Big-Theta 和 Big O 表示法之间的区别

> ID：12138212
> 
> 赞同：48
> 
> 时间：2012-08-27T08:00:01.483
> 
> 标签：algorithm, big-o, big-theta

在试图理解**Theta**和**O**表示法之间的区别时，我遇到了以下语句：

```
The Theta-notation asymptotically bounds a function from above and below. When
we have only an asymptotic upper bound, we use O-notation. 
```

但我不明白这一点。这本书在数学上解释了它，但它太复杂了，当我真的不理解时，它读起来真的很无聊。

*任何人都可以使用简单但功能强大的示例*来解释两者之间的区别。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-27T08:03:44.130

大 O 只给出渐近上界，而大 Theta 也给出下界。

一切都是`Theta(f(n))`，`O(f(n))`但不是相反。
`T(n)`据说是`Theta(f(n))`，如果它既是 又`O(f(n))` **是** `Omega(f(n))`

出于这个原因**，big-Theta 比 big-O**表示法提供更多信息，所以如果我们可以说某个东西是 big-Theta，它通常是首选。然而，证明某事物是大 Theta 比证明它是大 O 更难。

例如，**归并**[排序](http://en.wikipedia.org/wiki/Merge_sort)既是`O(n*log(n))`and `Theta(n*log(n))`，但也是 O(n ² )，因为 n ²比它渐近“大”。但是，它不是 Theta(n ² )，因为算法不是 Omega(n ² )。

* * *

`Omega(n)`是*渐近下界*。如果`T(n)`是`Omega(f(n))`，则表示从某一个开始`n0`，有一个常数`C1`这样的`T(n) >= C1 * f(n)`。而 big-O 表示存在一个常数`C2`，使得`T(n) <= C2 * f(n))`.

所有三个（Omega、O、Theta）都只给出*渐近信息*（“对于大输入”）：

*   大 O 给出上限
*   Big Omega 给出下界和
*   Big Theta 给出了下限和上限

请注意，此符号与算法的最佳、最差和平均情况分析无关**。**这些中的每一个都可以应用于每个分析。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-06-06T17:46:34.477

我将仅引用**Knuth 的 TAOCP 第 1 卷**- 第 110 页（我有印度版）。我建议阅读第 107-110 页（**第 1.2.11 节渐近表示**）

> 人们经常通过假设 O 表示法给出了确切的增长顺序来混淆 O 表示法。他们使用它，就好像它指定了一个下限和一个上限一样。例如，一个算法可能被称为低效率，因为它的运行时间是 O(n^2)。但是运行时间为 O(n^2) 并不一定意味着运行时间也不是 O(n)

在第 107 页，

1^2 + 2^2 + 3^2 + ... + n^2 = O(n^4) 和

1^2 + 2^2 + 3^2 + ... + n^2 = O(n^3) 和

1^2 + 2^2 + 3^2 + ... + n^2 = (1/3) n^3 + O(n^2)

Big-Oh 用于近似值。它允许您将 ~ 替换为等号 = 符号。在上面的例子中，对于非常大的 n，我们可以确定数量将保持在 n^4 和 n^3 和 (1/3)n^3 + n^2 [而不仅仅是 n^2] 以下

Big Omega 用于下界 - 对于大 N，使用 Omega(n^2) 的算法不会像使用 O(N logN) 的算法那样有效。但是，我们不知道 N 的值是多少（从这个意义上说，我们知道大约）

Big Theta 用于精确的增长顺序，包括下限和上限。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-09-08T20:10:50.460

如果运行时间用大 O 表示法表示，你知道运行时间不会比给定的表达式慢。它表达了最坏的情况。

但是使用 Theta 表示法，您也知道它不会更快。也就是说，没有最佳情况下算法会更快地重新调整。

这给出了对预期运行时间的更精确限制。然而，对于大多数目的，忽略下限（更快执行的可能性）更简单，而您通常只关心最坏的情况。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-28T06:28:19.930

我将用一个例子来说明差异。

让函数 f(n) 定义为

```
if n is odd f(n) = n^3
if n is even f(n) = n^2 
```

来自 CLRS

> 如果存在正常数 c1 和 c2，则函数 f(n) 属于集合 Θ(g(n))，因此对于足够大的 n，它可以“夹在”c1g(n) 和 c2g(n) 之间。

和

> O(g(n)) = {f(n)：存在正常数 c 和 n0 使得对于所有 n ≥ n0 0 ≤ f(n) ≤ cg(n)}。

和

> Ω(g(n)) = {f(n)：存在正常数 c 和 n0 使得 0 ≤ cg(n) ≤ f(n) 对于所有 n ≥ n0}。

f(n) 的上限是 n^3。所以我们的函数 f(n) 显然是 O(n^3)。

但它是Θ（n ^ 3）吗？

为了使 f(n) 在 Θ(n^3) 中，它必须夹在两个函数之间，一个形成下界，另一个形成上界，两者都在 n^3 处增长。虽然上限很明显，但下限不能是 n^3。下限实际上是 n^2；f(n) 是 Ω(n^2)

来自 CLRS

> 对于任何两个函数 f(n) 和 g(n)，我们有 f(n) = Θ(g(n)) 当且仅当 f(n) = O(g(n)) 和 f(n) = Ω(g(n))。

因此 f(n) 不在 Θ(n^3) 中，而在 O(n^3) 和 Ω(n^2) 中

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-08-04T02:59:18.863

这是我的尝试：

一个函数`f(n)`是`O(n)`，当且仅当存在一个常数 ，`c`，使得`f(n) <= c*g(n)`。

使用这个定义，我们可以说函数`f(2^(n+1))`是`O(2^n)`吗？

1.  换句话说，是否`'c'`存在这样的常数`2^(n+1) <= c*(2^n)`？注意第二个函数 ( `2^n`) 是上述问题中大 O 之后的函数。起初这让我很困惑。

2.  所以，然后使用你的基本代数技能来简化这个方程。 `2^(n+1)`分解为`2 * 2^n`。这样做，我们剩下：

    `2 * 2^n <= c(2^n)`

3.  现在很简单，该等式适用于`c`where的任何值`c >= 2`。所以，是的，我们可以说`f(2^(n+1))`是`O(2^n)`。

Big Omega 的工作方式相同，除了它对某些常量计算`f(n)` **>=** 。`c*g(n)``'c'`

因此，以同样的方式简化上述函数，我们得到了（注意 >= now）：

`2 * 2^n >= c(2^n)`

因此，该等式适用于范围`0 <= c <= 2`。所以，我们可以说`f(2^(n+1))`是大欧米茄`(2^n)`。

现在，由于两者都成立，我们可以说函数是 Big Theta ( `2^n`)。如果其中一个不能用于常数`'c'`，那么它就不是 Big Theta。

上面的例子取自 Skiena 的 Algorithm Design Manual，这是一本很棒的书。

希望有帮助。这确实是一个很难简化的概念。不要太纠结于什么`'c'`，只需将其分解为更简单的术语并使用您的基本代数技能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-21T05:34:07.410

在非常简单的语言中，差异是这样的：

大 O 表示法用于算法的最坏情况分析。Big Omega 用于算法的最佳案例分析。当最佳情况和最坏情况分析相同时，Big Theta 用于分析算法。

假设您正在使用二进制搜索算法在排序数组中查找一个数字。

```
[1 2 3 4 5 6 7] 
```

在最坏的情况下，例如当目标为 1 时，它必须执行 log(n) 拆分检查，在我们的例子中是 log(7)。它可以表示为 O(n)。

在最好的情况下，当目标为 3 时，它只执行一项操作。可以表示为Ω(1)

# ios - ios TabBar 标准符号

> ID：12138216
> 
> 赞同：-1
> 
> 时间：2012-08-27T08:00:33.373
> 
> 标签：ios, tabbar

我认为 TabBar 有标准符号 - 但我很难找到它们！所以 - 有吗？如果是这样 - 我在哪里可以找到它们？我正在使用 Xcode 4.3，我为 ios 4 和 5 开发

我正在寻找关键字的符号：信息、警告/警报、配置、设置、电子邮件

还是我需要从第三方来源获取它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:06:42.510

是的，有。创建 时，使用第一个参数`UITabBarItem`对其进行初始化，并为 您想要的图像使用常量（[请参阅此处](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UITabBarItem_Class/Reference/Reference.html#//apple_ref/c/tdef/UITabBarSystemItem)以获取所有可能值和相应可用图像的列表）。此功能自 iOS 2.0 以来就已存在，因此您不会遇到兼容性问题。[`initWithTabBarSystemItem:tag:`](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UITabBarItem_Class/Reference/Reference.html#//apple_ref/occ/instm/UITabBarItem/initWithTabBarSystemItem%3atag%3a)[`UITabBarSystemItem`](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UITabBarItem_Class/Reference/Reference.html#//apple_ref/c/tdef/UITabBarSystemItem)

# c# - 自动映射器不完整的文档

> ID：12138220
> 
> 赞同：6
> 
> 时间：2012-08-27T08:00:44.903
> 
> 标签：c#, automapper, dto

我正在寻找用于 c# 的 automapper 的文档。在他们的网站上，文档不完整（如我所见）。示例 UseDestinationValue 未记录。还有其他未记录和解释的选项。在哪里可以找到有关自动映射器选项的更全面的说明（例如 UseDestinationValue 等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T18:47:22.733

StackOverflow 是个好地方，否则，Google 就是你的朋友！;-)

关于`UseDestinationValue()`, Jimmy Bogard[在这里](https://groups.google.com/d/msg/automapper-users/uMuWCLFudGo/AiXPEaAvCEgJ)说:

> Ignore() 不会映射该成员，也不会映射任何子成员。UseDestinationValue 将保留现有值，但将继续映射任何其他子成员。例如，集合类型上的 UseDestinationValue 将把集合引用之类的东西留在那里，但随后会用值填充集合。对于复杂类型，它将保持引用不变，但随后填写值。

# c#-4.0 - 不包含带 0 个参数的构造函数

> ID：12138221
> 
> 赞同：43
> 
> 时间：2012-08-27T08:00:45.460
> 
> 标签：c#-4.0, inheritance

我从以下代码中收到一条错误消息，指出“产品不包含采用 0 个参数的构造函数”：

```
public class Products
{
    string id;
    string name;
    double price;
    int soldCount;
    int stockCount;

    public Products(string id, string name, double price, 
                      int soldCount, int stockCount, double tax)
    {
        this.id = id;
        this.name = name;
        this.price = price;
        this.soldCount = soldCount;
        this.stockCount = stockCount;
    }
}

//I have got some get and set values for the code above 
//but it would have been too long to put in here

public class FoodProducts : Products
{
    public FoodProduct()
    {
        Console.WriteLine("This is food product");
    }

    public void Limit()
    {
        Console.WriteLine("This is an Attribute of a Product");
    }
} 
```

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-08-27T08:39:30.530

关于 C# 的几条规则在这里发挥作用：

1.  每个类都必须有一个构造函数（为了被构造好）

2.  如果您不提供构造函数，编译器会自动为您提供一个构造函数，无需更改。

    这意味着类

    ```
    class Demo{} 
    ```

    在编译时提供了一个空的构造函数，成为

    ```
    class Demo{
       public Demo(){}
    } 
    ```

    我能做到

    ```
    Demo instance = new Demo(); 
    ```

3.  如果您确实提供了构造函数（具有任何签名的任何构造函数），则不会生成空构造函数

    ```
    class Demo{
       public Demo(int parameter){}
    }

    Demo instance = new Demo(); //this code now fails
    Demo instance = new Demo(3); //this code now succeeds 
    ```

    这似乎有点违反直觉，因为添加代码似乎会破坏现有的不相关代码，但这是 C# 团队的设计决定，我们必须接受它。

4.  调用派生类的构造函数时，如果不指定要调用的基类构造函数，编译器调用的是空的基类构造函数，所以

    ```
    class Derived:Base {
       public Derived(){}
    } 
    ```

    变成

    ```
    class Derived:Base {
       public Derived() : base() {}
    } 
    ```

所以，为了构造你的派生类，你必须在基类上有一个无参数的构造函数。看到您如何向 Products 添加构造函数，并且编译器没有生成默认构造函数，您需要在代码中显式添加它，例如：

```
public Products()
{
} 
```

或从派生的构造函数中显式调用它

```
public FoodProduct()
       : base(string.Empty, string.Empty, 0, 0, 0, 0)
{
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-27T08:10:29.440

由于`Products`没有接受 0 个参数的构造函数，因此您必须创建一个构造函数来`FoodProducts`调用`Products`所有必需参数的构造函数。

在 C# 中，这是按如下方式完成的：

```
public class FoodProducts : Products
{

    public FoodProducts(string id, string name, double price, int soldCount, int stockCount, double tax)   
    : base(id, name, price, soldCount, stockCount, tax)
    {
    }

    public void Limit()
    {
        Console.WriteLine("This is an Attribute of a Product");
    }
} 
```

如果不想将此构造函数添加到`FoodProducts`，也可以创建一个不带参数的构造函数到`Products`。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-27T08:07:40.767

被继承类的构造函数需要先构造基类。由于基类没有默认构造函数（采用 0 个参数）并且您没有使用现在拥有的非默认构造函数，因此这不起作用。所以要么A）向你的基类添加一个默认构造函数，在这种情况下，降级类的代码不需要更改；或 B) 从降级类的构造函数调用基类的非默认构造函数，在这种情况下，基类不需要更改。

一个

```
public class Products
{
    public Products() { }
}

public class FoodProducts : Products
{
    public FoodProducts() { }
} 
```

乙

```
public class Products
{
    public class Products(args) { }
}

public class FoodProducts : Products
{
    public FoodProducts(args) : base(args) { }
} 
```

其中一些在 msdn [here](http://msdn.microsoft.com/en-us/library/ms228387%28v=vs.80%29.aspx)上解释得相当不错。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-27T08:06:42.380

当您从 继承时，您必须在自己的类中`Products`调用基本构造。`Products`

你没有写`:base(id, name, ....)`，所以 C# 假设​​你调用默认的无参数构造函数，但它不存在。

为 .创建一个默认的无参数构造函数`Products`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-27T09:40:19.920

只需添加

```
public Products()
{

} 
```

在你的产品类中你不会得到错误

**原因：** 每个类都存在一个参数为 0 的默认构造函数。因此，无需（由程序员）显式定义/编写它，但是当您使用所需数量和类型的参数重载默认构造函数时，您必须自己（显式）定义默认构造函数以及重载的构造函数

# asp.net - ASP.NET MVC3：Razor 视图崩溃而没有错误？

> ID：12138226
> 
> 赞同：0
> 
> 时间：2012-08-27T08:01:16.027
> 
> 标签：asp.net, asp.net-mvc-3, razor

我一直对提前结束响应的视图有问题。没有服务器错误，甚至在调试应用程序时也没有错误。

每当它发生时，刷新总是会呈现正确的输出。

期望的输出（插图）

```
<html>
    <head>...</head>
    <body>
        <my view>
            <content 1 />
            <content 2 />
            <content 3 />
        </my view>
    </body>
</html> 
```

我得到了什么（插图）

```
<html>
    <head>...</head>
    <body>
        <my view> </my view>
    </body>
</html> 
```

# asp.net - 当发件人邮件来自 C# 中的 Web 配置时，更改邮件中发件人的显示名称

> ID：12138229
> 
> 赞同：2
> 
> 时间：2012-08-27T08:01:25.677
> 
> 标签：asp.net, c#-4.0, smtp

下面是我发送邮件的代码...

```
 public void SendBy(string to, string subject, string body)
{
    MailMessage nM = new System.Net.Mail.MailMessage();

    nM.To.Add("abc@compulynx.org");
    nM.Subject = subject;
    nM.Attachments.Add(new Attachment(oStream, Fname));
    nM.Body = body;
    System.Configuration.Configuration config = WebConfigurationManager.OpenWebConfiguration(HttpContext.Current.Request.ApplicationPath);
    System.Net.Configuration.MailSettingsSectionGroup settings = (System.Net.Configuration.MailSettingsSectionGroup)config.GetSectionGroup("system.net/mailSettings");

    SmtpClient client = new SmtpClient(settings.Smtp.Network.Host);
    client.Credentials = new NetworkCredential(settings.Smtp.Network.UserName, settings.Smtp.Network.Password);

    client.EnableSsl = true;
    client.Send(nM);
} 
```

这是我的网络配置代码...

```
<system.net>
     <mailSettings>
        <smtp deliveryMethod="Network" from="xyz@gmail.com" >
            <network host="smtp.gmail.com" 
                    defaultCredentials="false" userName="xyz@gmail.com" password="xyz"
                    port="587"/>
        </smtp>
    </mailSettings>
</system.net> 
```

此代码工作正常，但我将如何更改发件人显示名称，通常我们这样使用

```
 mM.From = new MailAddress("xyz@gmail.com","xyz"); 
```

但就我而言，我没有在任何地方写发件人邮件地址，我只是从网络配置中获取，然后我将如何更改该名称..我的会话中有当前登录用户，我想将该名称显示为发件人。 ..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T07:45:53.737

should put it on smtp from tag

```
<smtp deliveryMethod="Network" from="XYZ&lt;xyz@gmail.com&gt;">
<network host="smtp.gmail.com" 
                defaultCredentials="false" userName="xyz@gmail.com" password="xyz"
                port="587"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:22:10.213

你可以在 web.config 中这样设置它：

```
<network host="smtp.gmail.com" 
         defaultCredentials="false" 
         userName="&quot;xyz&quot;&lt;xyz@gmail.com&gt;"
         password="xyz" 
         port="587"/> 
```

请参阅[MailAddress 支持的格式](http://msdn.microsoft.com/en-us/library/system.net.mail.mailaddress.aspx)。

# android - 从表中更改密码

> ID：12138230
> 
> 赞同：0
> 
> 时间：2012-08-27T08:01:27.580
> 
> 标签：android, sqlite

我正在尝试从表中更改密码，但出现错误。谁能帮我找到解决方案？

这是我的数据库类代码：

```
public boolean change(String answer, String newpassword) {
    String sql = "UPDATE "+DATABASE_TABLE +" SET " + KEY_PASSWORD+ " = '"+newpassword+"' WHERE "+KEY_ANSWER+ " = "+answer;
    Cursor cur=db.rawQuery(sql, null);
    if (cur != null) {           
        if(cur.getCount() > 0)
        {
            return true;
        }
    }
    return false;
} 
```

这是我的安卓代码：

```
if(quest.change(answer, newpassword)){
    Intent login=new Intent(forgot.this, securityLogin.class);
    startActivity(login);
} else{
    Toast.makeText(forgot.this, "wrong answer",Toast.LENGTH_SHORT).show();
} 
```

这是我的日志：

```
 08-27 13:23:52.735: E/AndroidRuntime(464): FATAL EXCEPTION: main
 08-27 13:23:52.735: E/AndroidRuntime(464): java.lang.IllegalStateException: database not open
 08-27 13:23:52.735: E/AndroidRuntime(464):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1333)
 08-27 13:23:52.735: E/AndroidRuntime(464):     at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1315)
 08-27 13:23:52.735: E/AndroidRuntime(464):     at com.inovawe.inwp.securityDB.change(securityDB.java:163)
 08-27 13:23:52.735: E/AndroidRuntime(464):     at com.inovawe.inwp.forgot$1.onClick(forgot.java:36)
 08-27 13:23:52.735: E/AndroidRuntime(464):     at android.view.View.performClick(View.java:2408)
 08-27 13:23:52.735: E/AndroidRuntime(464):     at android.view.View$PerformClick.run(View.java:8816)
 08-27 13:23:52.735: E/AndroidRuntime(464):     at android.os.Handler.handleCallback(Handler.java:587)
 08-27 13:23:52.735: E/AndroidRuntime(464):     at android.os.Handler.dispatchMessage(Handler.java:92)
 08-27 13:23:52.735: E/AndroidRuntime(464):     at android.os.Looper.loop(Looper.java:123)
 08-27 13:23:52.735: E/AndroidRuntime(464):     at android.app.ActivityThread.main(ActivityThread.java:4627)
 08-27 13:23:52.735: E/AndroidRuntime(464):     at java.lang.reflect.Method.invokeNative(Native Method)
 08-27 13:23:52.735: E/AndroidRuntime(464):     at java.lang.reflect.Method.invoke(Method.java:521)
 08-27 13:23:52.735: E/AndroidRuntime(464):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
 08-27 13:23:52.735: E/AndroidRuntime(464):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
 08-27 13:23:52.735: E/AndroidRuntime(464):     at dalvik.system.NativeStart.main(Native Method) 
```

我得到了答案，下面的代码正在运行

```
rawQuery("UPDATE "+DATABASE_TABLE +" SET " + KEY_PASSWORD+ " = '"+newpassword+"' WHERE answer=?", new String[]{answer}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:05:26.203

```
"08-27 13:23:52.735: E/AndroidRuntime(464): java.lang.IllegalStateException: database not open" 
```

您在代码中的哪个位置打开与数据库的连接？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:06:44.847

您需要在更新之前打开数据库连接。就像是

```
db.Open(); 
```

或者

```
if (!db.isOpen()) {
   db = getApplicationContext().openOrCreateDatabase(DATABASE_PATH, SQLiteDatabase.OPEN_READWRITE, null);
 } 
```

并记住在工作完成后关闭连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:07:02.303

您之前已关闭数据库，`db.close()`请仅创建一个数据库实例并在所有事务完成后关闭它。

# c++ - VS postbuild 事件破坏 DLL

> ID：12138231
> 
> 赞同：0
> 
> 时间：2012-08-27T08:01:32.513
> 
> 标签：c++, visual-studio-2010, dll, build

我有一个奇怪的问题。我有一个针对两个 DLL 的 VS2010 C++ 解决方案和一个针对使用这两个 DLL 的应用程序的不同解决方案。到目前为止，对 DLL 的更改必须手动将它们复制到应用程序的相应目录中。

我现在介绍了一个构建后事件，以在每次构建时自动复制更改的 DLL。

```
copy $(TargetDir)$(TargetName).lib ..\..\lib\AppDir\$(TargetName).lib
copy $(TargetPath) ..\..\AppBinDir\$(TargetFileName)
copy $(TargetDir)$(TargetName).pdb ..\..\AppBinDir\$(TargetFileName) 
```

当我在构建 DLL 后尝试启动应用程序时，我收到“无效图像”错误以及某些可能不适合 Windows 的解释。如果我使用 DependencyWalker 打开 DLL，我会收到错误“未找到 DOS 或 PE 签名”。

如果我手动复制 DLL，一切正常。所以我认为后期构建中的复制操作存在问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:24:22.640

```
copy $(TargetDir)$(TargetName).pdb ..\..\AppBinDir\$(TargetFileName) 
```

此行使用 pdb 文件覆盖 Dll。可能你想要这样的东西：

```
copy $(TargetDir)$(TargetName).pdb ..\..\AppBinDir\$(TargetName).pdb 
```

# php - 比较数组中的条目并删除重复项（PHP、MySQL）

> ID：12138234
> 
> 赞同：1
> 
> 时间：2012-08-27T08:01:57.900
> 
> 标签：php, mysql, arrays, compare, duplicates

我有这个小任务要在 PHP/MySQL 中完成。

我们正在从客户那里收集传真号码（和其他数据），以防我们在我工作的公司的运营中遇到问题（不是编程，别担心）。

基本上我有一个看起来像这样的数组。

```
 Array
   [1]
      [company] => "Company A"
      [fax] => "031-558330"

   [2]
      [company] => "Company B"
      [fax] => "031558330"

   [3]
      [company] => "Company C"
      [fax] => "12345" 
```

请注意，如果删除破折号 (-)，[fax] 实际上是 1 和 2 中的重复项。

我的问题是我需要删除 [2]，因为它是 [1] 的副本。基本上，我正在尝试列出唯一的传真号码并打印该唯一传真号码的公司名称。

到目前为止，我已经这样做了：

```
function format_text($text,$number)
{
    $text = str_ireplace(" ","",$text);
    $text = str_ireplace("-","",$text);
    $text = str_ireplace(",","",$text);
    $text = str_ireplace("/","",$text);
    $text = str_ireplace("+46","0",$text);
    $text = trim($text);

    return $text;
}

$fax_result = mysql_query("SELECT fax,company FROM beredskap GROUP BY company") or die(mysql_error());

for($i = 0; $fax_array[$i] = mysql_fetch_assoc($fax_result); $i++) ;
array_pop($fax_array);

for($i = 0; $i<count($fax_array);$i++)
{ 
    $fn = format_text($fax_array[$i]['fax']);
    if(!empty($fn)) {
    echo trim($fax_array[$i]['company']) .",". $fn ."\n";

    }
} 
```

我不知道我应该如何比较两个子元素（因为来自 SQL 的原始数据可能在它们之间存在差异，但是当去掉破折号和逗号时与其他条目重复），然后删除父键。

我真诚地希望我以正确的方式提出了这个问题。

有人愿意帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:17:21.610

您可以在 SQL 中执行此操作：

```
SELECT   company,
         TRIM(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(fax,
           ' ',   '' ),
           '-',   '' ),
           ',',   '' ),
           '/',   '' ),
           '+46', '0')
         ) AS faxno
FROM     beredskap
GROUP BY faxno 
```

请注意，在针对不同公司的表中出现相同传真号码的情况下，上述查询将不确定地选择这些公司之一。如果在这种情况下您更愿意选择一家特定公司，请说明如何确定要选择的公司。

另请注意，如果该公司在表中有具有不同传真号码的记录，则此分组将导致结果集中针对单个公司的多个条目`beredskap`，而您的原始查询将不确定地仅选择该公司的传真号码之一。如果这不是您想要的行为，请说明如何确定要选择的传真号码。

# javascript - 检查窗口是否已经打开 window.open

> ID：12138236
> 
> 赞同：24
> 
> 时间：2012-08-27T08:02:19.950
> 
> 标签：javascript, html

我有一个 html 页面。在页面正文中，我正在调用`onload`调用 javascript 函数以打开弹出窗口的事件。这是代码：

```
var newWindow = null;
function launchApplication()
{
    if ((newWindow == null) || (newWindow.closed))
    {
        newWindow = window.open('abc.html','','height=960px,width=940px');
    }
} 
```

当我移动到另一个页面并再次返回该页面时，弹出窗口会重新打开，尽管它已经打开了。请指导我正确的方向，以便如果弹出窗口已经打开，那么它不应该再次打开。我试过`document.referred`了，但它需要网站在线，目前我正在离线工作。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-27T08:08:10.573

```
newWindow = window.open('abc.html','com_MyDomain_myWindowForThisPurpose','height=960px,width=940px'); 
```

给窗口一个名字。像这样基于您的域的名称，可以防止您选择其他人碰巧选择的名称。

永远不要组成以 开头的名称`_`，这些名称是为浏览器区别对待的特殊名称保留的（与锚元素的“目标”属性相同）。

请注意，如果该名称的窗口使用不同的选项（例如不同的高度）打开，那么它将保留这些选项。此处的选项只有在没有该名称的窗口时才会生效，因此您需要创建一个新窗口。

编辑：

请注意，“名称”是窗口的，而不是内容的。它不会影响标题（`newWindow.document.title`会影响标题，当然会在 中编码`abc.html`）。它确实会影响其他跨窗口做事的尝试。因此，另一个`window.open`具有相同名称的窗口将重用此窗口。像这样的链接`<a href="def.html" target="com_MyDomain_myWindowForThisPurpose">clicky!</a>`也会重复使用它。有关在各种情况下（弹出窗口阻止）浏览器拒绝打开窗口的正常警告适用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-12-23T13:52:03.930

打开一个窗口并在页面刷新之间保留对它的引用。

```
var winref = window.open('', 'MyWindowName', '', true);
if(winref.location.href === 'about:blank'){
    winref.location.href = 'http://example.com';
} 
```

或以函数格式

```
function openOnce(url, target){
    // open a blank "target" window
    // or get the reference to the existing "target" window
    var winref = window.open('', target, '', true);

    // if the "target" window was just opened, change its url
    if(winref.location.href === 'about:blank'){
        winref.location.href = url;
    }
    return winref;
}
openOnce('http://example.com', 'MyWindowName'); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-10-12T08:43:52.370

您可以通过在窗口关闭时重新分配对它的引用来检查窗口是打开还是关闭。例子：

```
var newWindow;
var openWindow = function(){
    newWindow = newWindow || window.open('newpage.html');
    newWindow.focus();
    newWindow.onbeforeunload = function(){
        newWindow = null;
    };
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-04T08:42:34.490

使用“关闭”属性：如果一个窗口已经关闭，它的关闭属性将为真。 [https://developer.mozilla.org/en-US/docs/Web/API/Window/closed](https://developer.mozilla.org/en-US/docs/Web/API/Window/closed)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-07T09:13:43.590

当您移动到另一个页面（在同一域上）时，您可以使用弹出页面重新设置*window.open 变量，如下所示：*

[https://jsfiddle.net/u5w9v4gf/](https://jsfiddle.net/u5w9v4gf/)

尝试步骤：

1.  单击运行（在 jsfiddle 编辑器上）。
2.  点击试试我（预览）。
3.  单击运行以移动到另一个页面，变量将被重新设置。

代码 ：

```
window.currentChild = false;

$("#tryme").click(function() {
    if (currentChild) currentChild.close();
    const child = window.open("about:blank", "lmao", 'width=250,height=300');
    currentChild = child;

    //Scrope script in child windows
    child.frames.eval(`
    setInterval(function () {
        if (!window.opener.currentChild)
            window.opener.currentChild = window;
    }, 500);
  `);
});

setInterval(function() {
console.log(currentChild)
    if (!currentChild || (currentChild && currentChild.closed))
        $("p").text("No popup/child. :(")
    else
        $("p").text("Child detected !")
}, 500); 
```

# python - 在 Django Admin 的自定义列表过滤中将 modeladmin 作为参数传递

> ID：12138240
> 
> 赞同：1
> 
> 时间：2012-08-27T08:02:33.773
> 
> 标签：python, django, django-admin

如果传递了一个模型管理员，我想做一些事情，如果传递了另一个模型管理员，我想做另一件事。但似乎 modeladmin 没有在 list_filter 中作为参数传递，而在 django admin 中的操作中传递。为什么会这样？

```
from datetime import date

from django.utils.translation import ugettext_lazy as _
from django.contrib.admin import SimpleListFilter

class DecadeBornListFilter(SimpleListFilter):
    # Human-readable title which will be displayed in the
    # right admin sidebar just above the filter options.
    title = _('decade born')

    # Parameter for the filter that will be used in the URL query.
    parameter_name = 'decade'

    def lookups(self, request, model_admin):
        """
        Returns a list of tuples. The first element in each
        tuple is the coded value for the option that will
        appear in the URL query. The second element is the
        human-readable name for the option that will appear
        in the right sidebar.
        """
        return (
            ('80s', _('in the eighties')),
            ('90s', _('in the nineties')),
        )

    def queryset(self, request, queryset):
        """
        Returns the filtered queryset based on the value
        provided in the query string and retrievable via
        `self.value()`.
        """
        # Compare the requested value (either '80s' or '90s')
        # to decide how to filter the queryset.
        if self.value() == '80s':
            return queryset.filter(birthday__gte=date(1980, 1, 1),
                                    birthday__lte=date(1989, 12, 31))
        if self.value() == '90s':
            return queryset.filter(birthday__gte=date(1990, 1, 1),
                                    birthday__lte=date(1999, 12, 31)) 
```

例如，在上面的示例中，如果是学生检查生日是在 90 年代或 2000 年代之间，我想做一些不同的事情。但这是父母，我想检查生日是在70年代还是80年代之间？只需假设将传递不同的modeladmin。我如何将 modeladmin 作为参数包含在内来进行这些更改？需要一些指导...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:13:41.217

您可以设置 self.model_admin：

```
class DecadeBornListFilter(SimpleListFilter):
    #[...]

    def lookups(self, request, model_admin):
        self.model_admin = model_admin
        # ...

    def queryset(self, request, queryset):
        # here you can use self.model_admin 
```

或者，使用继承：

```
class BaseDecadeBornListFilter(SimpleListFilter):
    # [...]

class DecadeBornListFilter1(BaseDecadeBornListFilter):
    # [...]

class DecadeBornListFilter2(BaseDecadeBornListFilter):
    # [...]

class StudentModelAdmin1(admin.ModelAdmin):
    list_filter = (DecadeBornListFilter1,)

class StudentModelAdmin2(admin.ModelAdmin):
    list_filter = (DecadeBornListFilter2,) 
```

# c++ - 将原始类型指针转换为结构指针 - 对齐和填充？

> ID：12138243
> 
> 赞同：9
> 
> 时间：2012-08-27T08:02:54.710
> 
> 标签：c++, casting

当我回答一个问题时只有 20 分钟，我想出了一个有趣的场景，但我不确定该行为：

让我有一个大小为 n 的整数数组，由 intPtr 指向；

```
int* intPtr; 
```

让我也有一个这样的结构：

```
typedef struct {
int val1;
int val2;
//and less or more integer declarations goes on like this(not any other type)
}intStruct; 
```

我的问题是如果我做演员`intStruct* structPtr = (intStruct*) intPtr;`

如果我遍历结构的元素，我确定能正确获取每个元素吗？在任何架构/编译器中是否存在未对齐的可能性（可能由于填充）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T15:22:33.000

该标准相当具体，即使是 POD 结构（我相信最严格的结构类）也可以在成员之间进行填充。（“因此，在 POD 结构对象中可能存在未命名的填充，但不是在其开头，这是实现适当对齐所必需的。”——非规范性注释，但仍使意图非常清楚）。

例如，对比标准布局结构的要求（C++11，§1.8/4）：

> 普通可复制或标准布局类型 (3.9) 的对象应占用连续的存储字节。”

...与数组的那些（§8.3.4/1）：

> 数组类型的对象包含一个连续分配的非空集合，由 N 个类型为 T 的子对象组成。

在数组中，*元素*本身需要连续分配，而在结构中，只需要*存储*是连续的。

可能使“连续存储”要求更有意义的第三种可能性是考虑不可简单复制或标准布局的结构/类。在这种情况下，存储可能根本不连续。例如，一个实现可能会留出一个内存区域来保存所有私有变量，并留出一个完全独立的内存区域来保存所有公共变量。为了更具体一点，请考虑以下两个定义：

```
class A { 
    int a;
public:
    int b;
} a;

class B {
    int x;
public:
    int y;
} b; 
```

有了这些定义，内存的布局可能类似于：

```
a.a;
b.x;

// ... somewhere else in memory entirely:

a.b;
b.y; 
```

在这种情况下，元素*和*存储都不需要是连续的，因此完全独立的结构/类的交错部分是允许的。

也就是说，第一个元素必须与整个结构位于同一地址 (9.2/17)：“指向 POD 结构对象的指针，使用 reinterpret_cast 适当转换，指向其初始成员（或者如果该成员是一个位域，然后是它所在的单元），反之亦然。”

在您的情况下，您有一个 POD 结构，因此（第 9.2/17 节）：“指向 POD 结构对象的指针，使用 reinterpret_cast 适当转换，指向其初始成员（或者如果该成员是位字段，然后到它所在的单元），反之亦然。” 由于第一个成员*必须*对齐，并且其余成员都是相同的类型，因此其他成员之间不可能真正需要任何填充（即，除了位字段，您可以放入结构中的任何类型也可以放入数组，其中需要连续分配元素）。如果您的元素小于一个单词，那么在面向单词的机器（例如早期的 DEC Alphas）上，填充可能会使访问变得更简单一些。例如，早期的 DEC Alpha（在硬件级别）一次只能读/写一个完整的（64 位）字。因此，让我们考虑类似四个`char`元素的结构：

```
struct foo { 
   char a, b, c, d;
}; 
```

如果需要将它们布置在内存中以使它们是连续的，则访问`foo::b`（例如）将需要 CPU 加载该字，然后将其向右移动 8 位，然后屏蔽以对该字节进行零扩展以填充整个登记。

存储会更糟——CPU 必须加载整个单词的当前值，屏蔽掉相应字符大小的部分的当前内容，将新值移动到正确的位置，或者将其放入单词中，最后存储结果。

相比之下，通过元素之间的填充，每个元素都成为一个简单的加载/存储，没有移位、屏蔽等。

至少如果内存服务，使用 DEC 的 Alpha 正常编译器，`int`是 32 位，并且`long`是 64 位（它早于`long long`）。因此，使用 4 个`int`s 的结构，您可能会期望在元素之间看到另外 32 位的填充（以及最后一个元素之后的另外 32 位）。

鉴于您确实有一个 POD 结构，但您仍然有一些可能性。我可能更喜欢使用`offsetof`获取结构成员的偏移量，创建它们的数组，并通过这些偏移量访问成员。我在之前的[几个](https://stackoverflow.com/a/5088496/179910)[答案](https://stackoverflow.com/a/2043949/179910)中展示了如何做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T08:22:36.627

严格来说，这种指针转换是不允许的，并且会导致未定义的行为。

然而，强制转换的主要问题是编译器可以自由地在结构内的任何位置添加任意数量的填充字节，除了第一个元素之前。所以它是否起作用取决于特定系统的对齐要求，以及是否启用了struct padding。

`int`不一定与可寻址数据块的最佳大小具有相同的大小，即使对于大多数 32 位系统来说都是如此。有些 32 位不关心错位，有些允许错位但产生效率较低的代码，有些必须对齐数据。理论上，64 位可能还希望在 int 之后添加填充（那里将是 32 位）以获得 64 位块，但实际上它们支持 32 位指令集。

如果您编写依赖此转换的代码，您应该添加如下内容：

```
static_assert (sizeof(intStruct) == 
               sizeof(int) + sizeof(int)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T10:07:56.603

鉴于元素类型是标准布局，它保证是合法的。注意：以下所有引用均指向[c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")标准。

> ### 8.3.4 数组[dcl.array]
> 
> 1 - [...] 数组类型的对象包含一组连续分配的非空子`N`对象类型`T`。[...]

关于`struct`带有`N`type 成员的a `T`，

> ### 9.2 类成员 [class.mem]
> 
> 14 - 分配具有相同访问控制的（非联合）类的非静态数据成员，以便后面的成员在类对象中具有更高的地址。[...] 实现对齐要求可能会导致两个相邻的成员不能立即分配 [...]
> 20 - 指向标准布局结构对象的指针，使用 a 进行适当转换`reinterpret_cast`，指向其初始成员 [. ..] 反之亦然。[注意：因此，标准布局结构对象中可能存在未命名的填充，但不是在其开头，这是实现适当对齐所必需的。——尾注]

所以问题是 a 中任何需要对齐的填充是否`struct`会导致其成员彼此之间不连续分配。答案是：

> ### 1.8 C++ 对象模型 [intro.object]
> 
> 4 - [...] 普通可复制或标准布局类型的对象应占用连续的存储字节。

换句话说，`struct` `a`包含至少两个相同（标准布局）类型且不尊重身份的成员的标准布局`x`违反了 1.8:4。`y``&a.y == &a.x + 1`

请注意，*对*齐定义为 ( **3.11 对齐 [basic.align]** )*可以分配给定对象的连续地址之间的字节数*；因此，一个类型的对齐`T`不能大于 的数组中相邻对象之间的距离`T`，并且（因为**5.3.3 Sizeof [expr.sizeof]**指定n 个*元素**的数组的大小是*的大小的n*倍一个元素*）不能大于。因此，*不需要*在相同类型的结构的相邻元素之间进行任何*额外的填充***`alignof(T)``sizeof(T)`**通过对齐，因此不会被 9.2:14 支持。****

 **** * *

关于 AProgrammer 的观点，我会将 26.4 复数 [complex.numbers] 中的语言解释**为**要求`std::complex<T>`标准布局类型的要求。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-29T11:33:58.417

那里的行为几乎可以肯定是编译器、体系结构和 ABI 相关的。但是，如果您使用 gcc，则可以使用`__attribute__((packed))`强制编译器一个接一个地打包结构成员，而无需任何填充。这样，内存布局应该与平面数组的布局相匹配。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T08:24:12.787

当我前段时间搜索时，我没有发现任何东西可以保证它是有效的，并且我发现了 C++ 中 std::complex<> 情况的明确保证，如果它更普遍正确，可以更容易地制定，所以我怀疑我在搜索中遗漏了一些东西（但缺乏证据很难证明不存在，标准有时在其表述中是模糊的）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-30T21:22:08.030

C 结构的典型对齐方式保证结构中的数据结构成员将按顺序存储，这与 C 数组相同。所以订单不会是问题。

在对齐方面，由于您只有一种数据类型（int），尽管编译器有资格这样做，但没有必要添加填充来对齐您的数据成员。编译器可以在结构的开头添加填充，但不能在数据结构的开头添加填充。因此，如果编译器要在您的情况下添加填充，

而不是这个：[4Byte int][4Byte int][4Byte int]...[4Byte int]

您的数据结构必须像这样存储：
[4Byte Data] **[4Byte Padding]** [4Byte Data]... 这是不合理的。

总的来说，我认为这个演员应该在你的情况下没有问题，尽管我认为使用它是不好的做法。***

# php - AES 加密/解密 Delphi & PHP

> ID：12138244
> 
> 赞同：2
> 
> 时间：2012-08-27T08:02:55.240
> 
> 标签：php, delphi, encryption, aes, lockbox-3

我的 Delphi 应用程序使用 TurboPower LockBox 3 使用 AES 256 加密纯文本信息。我现在想使用 PHP 解密此信息。但是 TurboPower LockBox 3 存在一些互操作性问题。

请在此处查看 LockBox 3 作者的帖子以获取详细信息：

[http://lockbox.seanbdurkin.id.au/tiki-view_forum_thread.php?comments_parentId=363&topics_offset=1](http://lockbox.seanbdurkin.id.au/tiki-view_forum_thread.php?comments_parentId=363&topics_offset=1)

以及 Stackoverflow 上的类似帖子

[Delphi & PHP 中的安全密钥对加密解决方案？](https://stackoverflow.com/questions/10706320/secure-keypair-encryption-solution-in-delphi-php)

在 LockBox 3 中，在加密期间，您设置了密码。然后将该密码用作生成密钥和 iv 的种子。那么有没有人能够模仿 PHP 端的密钥生成方法？或者有什么方法可以让 LockBox 3 生成的 Key/IV 并将其放入我的 PHP 代码中，以便可以解密文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T08:29:45.543

## 四

如前所述，IV nonce 被附加到密文消息中。因此，要在 PHP 端获取它，只需提取前 8 个字节。

## 钥匙

您需要确定共享密钥是密码字符串格式还是二进制密钥格式。symetric Key 类 (TSymetricKey) 有一个方法 SaveToStream()，它可以按您的预期工作。TCodec 组件有一个 Key 属性，在设置密码、链接模式和密码后可用。

所有的方法都是自记录的，并且几乎按照他们读到的方式执行，但是如果您需要一些演示代码，将密钥保存到流中，请告诉我。

# c# - 获取 DataGridView 中的选定行

> ID：12138248
> 
> 赞同：2
> 
> 时间：2012-08-27T08:03:13.687
> 
> 标签：c#, datagridview, selection

全部，

我的 WinForms 应用程序上有一个 DataGridView 控件，其选择属性为“整行”并且没有多选。我还将 SelectionChanged 委托附加到它，我需要在其中获取当前选定的行。

```
 private void order_SelectionChanged(object sender, EventArgs e)
    {
        ordersItemIndex = order.SelectedRows[0].Index;
    } 
```

问题是，当程序启动时，根本不应该有任何选择，只有以后用户才能用鼠标或键盘更改选择。所以在我的 Form_Load() 事件中，我有这个：

```
 order.ClearSelection(); 
```

但是，此代码路径在程序启动时会引发异常。

有没有一种很好的方法来告诉程序“我们正在加载表单，不要调用委托”，而不需要任何额外的变量？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T08:07:35.587

您可以在清除选择后添加您的 order_SelectionChanged `Form_Load()`（而不是`InitializeComponents()`）

但更好地检查您的处理程序是否有任何选定的行。

```
private void order_SelectionChanged(object sender, EventArgs e)
{
    if (order.SelectedRows.Count > 0)
      ordersItemIndex = order.SelectedRows[0].Index;
} 
```

# asp.net - 如何阻止用户使用后退按钮

> ID：12138253
> 
> 赞同：1
> 
> 时间：2012-08-27T08:03:27.570
> 
> 标签：asp.net, browser

我在页面上有一个按钮，页面名称 abc.aspx 。当用户单击该按钮时，它应该重定向到`finishwork.aspx`页面。

在finishwork.aspx 页面后，用户不得返回`abc.aspx`页面。当用户在浏览器中按下返回按钮时，他应该被重定向到`workallreadyfinish.aspx`页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:21:42.897

禁用该页面上的缓存并避免缓存该页面。

```
Response.Cache.SetExpires(DateTime.UtcNow.AddMinutes(-1));
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.Cache.SetNoStore(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:05:06.210

`location.replace()`可用于替换您在历史记录中的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:12:07.510

有很多方法可以做到这一点，但是，当您使用 ASP.NET 并且我将假设 WebForms 时，您为什么不使用`<asp:Wizard>`控件呢？

您将能够对您的步骤进行非常详细的控制，并阻止用户返回以及所有其他好东西。

*   如果您想采用正常的方式，您可以随时使用 javascript 事件警告用户该页面将不再有效。

*   您还可以使用散列并通过 ajax 调用而不是普通 POST 提交表单

*   您可以在提交表单后编写一个 cookie，下一次显示此类警告，因此即使用户返回并再次按下提交按钮，您也不会在意。记得删除 Cookie`if (!Page.IsPostBack) { ... }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T08:13:11.170

围绕浏览器后退按钮设置用户工作流程并不是一个好主意。
浏览器后退按钮并非完全由您控制。

如果您想在应用程序中提供逻辑返回，请在应用程序中使用返回按钮。

如果您只希望用户不能返回页面，您应该[告诉浏览器不要缓存它，将页面设置为 expire](http://msdn.microsoft.com/en-us/library/y18he7cw.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T08:24:05.917

您可以为此使用javascript函数：-

```
function disableBackButton()
{
    window.history.forward();
}
setTimeout("disableBackButton()", 0); 
```

# c++ - 堆上的 C++ 数组

> ID：12138255
> 
> 赞同：0
> 
> 时间：2012-08-27T08:03:36.713
> 
> 标签：c++, arrays, heap-memory

如果我在堆上声明一个数组，我怎样才能获得有关该数组的信息？

这是我的代码：

```
class Wheel
{
public:
    Wheel() : pressure(32)
    {
        ptrSize = new int(30);
    }
    Wheel(int s, int p) : pressure(p)
    {
        ptrSize = new int(s);
    }
    ~Wheel()
    {
        delete ptrSize;
    }
    void pump(int amount)
    {
        pressure += amount;
    }
    int getSize()
    {
        return *ptrSize;
    }
    int getPressure()
    {
        return pressure;
    }
private:
    int *ptrSize;
    int pressure;
}; 
```

如果我有以下情况：

```
Wheel *carWheels[4];
*carWheels = new Wheel[4];
cout << carWheels[0].getPressure(); 
```

当数组在堆上时，如何在数组中的任何实例上调用 .getPressure() 方法？另外，如果我想在堆上创建一个 Wheel 数组，但在堆上创建数组时使用这个构造函数：

```
Wheel(int s, int p) 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T08:08:51.510

```
Wheel *carWheels[4]; 
```

是一个指向 Wheel 的指针数组，所以你需要用 new 来初始化它：

```
for ( int i = 0; i < sizeof(carWheels)/sizeof(carWheels[0]); ++i)
  carWheels[i]=new Wheel(); // or any other c-tor like Wheel(int s, int p) 
```

稍后您可以像这样访问它：

```
carWheels[0]->getPressure(); 
```

可以像上面一样检索数组的大小：

```
sizeof(carWheels)/sizeof(carWheels[0]) 
```

[编辑-更多细节]

如果你想坚持使用数组，你需要在函数调用时传递它的大小，因为数组会衰减到指针。您可能希望保留以下语法：

```
void func (Wheel* (arr&)[4]){} 
```

我希望这是正确的，因为我从不使用它，但最好切换到 std::vector。

同样对于数组中的裸指针，您必须记住在某些时候删除它们，数组也不能保护您免受异常的影响——如果发生任何异常，您将面临内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:09:26.193

简单，替换

```
Wheel *carWheels[4]; 
```

和

```
std::vector<Wheel*> carWheels(4);
for ( int i = 0 ; i < 4 ; i++ )
   carWheels[i] = new Wheel(4); 
```

你似乎很困惑`()`，`[]`我建议你调查一下。

你知道这`ptrSize = new int(30);`不会创建一个数组，对吧？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:11:40.780

与 C 一样，您需要将数组的元素计数与分配一起移动。

在某些情况下，此信息实际上是由实现存储的，但不是以您可以访问的方式存储的。

在 C++ 中，我们喜欢 std::vector 和 std::array 等类型。

* * *

其他注意事项：

```
ptrSize = new int(30); << creates one int with a value of 30 
```

> 我该怎么做呢？轮子（int s，int p）

通常，如果您有一个现有元素，则只需使用赋值：

```
wheelsArray[0] = Wheel(1, 2); 
```

因为您将面临使用非默认构造函数创建数组的困难。

当我们在它的时候：

```
std::vector<Wheel> wheels(4, Wheel(1, 2)); 
```

如果您使用矢量，这就是创建 4 个轮子所需的全部 -`new`不需要。不需要`delete`。另外，vector 知道它的大小。

# sqlite - 如何计算 sqlite 数据库中打开的连接数？

> ID：12138260
> 
> 赞同：9
> 
> 时间：2012-08-27T08:04:00.203
> 
> 标签：sqlite, database-connection

我想计算一个 sqlite 数据库中打开的连接数。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-27T08:11:12.880

根据邮件列表上的[这些](http://www.mail-archive.com/sqlite-users@sqlite.org/msg25752.html) [帖子](http://sqlite.1065341.n5.nabble.com/iIs-it-possible-to-determine-how-many-open-connections-are-active-for-a-sqlite-database-td25290.html)，无法通过代码或数据库本身检查打开的连接数。没有 API。

根据[这篇文章](http://www.mail-archive.com/sqlite-users@sqlite.org/msg25762.html)，如果您在 POSIX 类型系统上运行，则可以使用该`lsof`命令来计算打开数据库的进程数。

如果您使用的是 Windows，则可以使用[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)通过以下步骤计算连接数：

1.  在进程资源管理器中单击“查找”-> 查找句柄或 DLL...
2.  输入您的 sqlite 数据库的名称，然后单击“搜索”（或按 Enter）
3.  在结果窗口中，单击您的数据库。它将在 Process Explorer 主窗口中突出显示为“文件”。
4.  返回主窗口，右键单击您的数据库文件，然后单击属性
5.  您现在可以看到引用和句柄的数量

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-14T19:34:06.777

像这样的打开文件监视器`lsof`会这样做

```
lsof dbName.sql 
```

会给你连接列表

```
OpenerName 6158 User   39u   REG    1,2    20480 20397113 dbName.sql 
```

# mysql - 登录时间和注销时间的总时间差-MYSQL

> ID：12138264
> 
> 赞同：0
> 
> 时间：2012-08-27T08:04:29.017
> 
> 标签：mysql, sql

输入

```
 userid           login time                               logout time
----------------------------------------------------------------------------
   1          2012-08-01 16:08:26                     2012-08-01 16:08:29
   2          2012-08-01 16:22:49                     2012-08-01 16:25:44
   3          2012-08-01 16:08:26                     2012-08-01 16:08:29
   3          2012-08-01 16:22:49                     2012-08-01 16:25:44
   3          2012-08-01 16:08:26                     2012-08-01 16:08:29
   4          2012-08-01 16:22:49                     2012-08-01 16:25:44 
```

输出：

```
 userid        date         total time difference b/w login time and logout time
---------------------------------------------------------------------------------
   1        2012-08-01                         00:08:29
   2        2012-08-01                         1:25:44
   3        2012-08-01                         00;55;5
   4        2012-08-01                         1:25:44 
```

我试过的查询是：

```
SELECT distinct t.user_id, DATE_FORMAT(t.login_time,\'%d %b %Y\') AS datez,
       SEC_TO_TIME(SUM(TIME_TO_SEC(t.logout_time) - TIME_TO_SEC(t.login_time))) AS timediffe
from login_log t 
where user_id=5 
  AND login_time between '2012-08-01' AND '2012-08-2' 
GROUP BY t.user_id,datez 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T08:07:17.343

我认为你只需要使用[TIMEDIFF](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timediff)函数：

```
SELECT t.user_id,
       DATE_FORMAT(t.login_time,'%d %b %Y') AS datez,
       SEC_TO_TIME(SUM(TIME_TO_SEC(TIMEDIFF(t.logout_time, t.login_time)))) AS timediffe
FROM tic_login_log t
WHERE user_id = 5
      AND login_time between '2012-08-01' AND '2012-08-2'
GROUP BY t.user_id,datez; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:30:46.983

根据“2012-08-01”的相关输出

```
select userid, date(login_time) as Date, sum(timediff(logout_time-login_time) as
'Logged in Time' where date(login_time)='2012-08-01' group by userid; 
```

日期虎钳每个用户的总登录时间

```
select userid, date(login_time) as Date, sum(timediff(logout_time-login_time) as
'Logged in Time'    group by userid,date(login_time); 
```

每个用户的历史总登录时间

```
select userid, date(login_time) as Date, sum(timediff(logout_time-login_time) as
'Logged in Time' group by userid; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:19:26.470

请使用此方法查找时间差：

```
select TIMEDIFF(NOW(), '2012-06-20 06:24:43') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T08:34:49.063

你可以使用`TIMEDIFF()`方法。

尝试这个 ：

```
SELECT timediff(your_logout_time,your_login_time); 
```

例子 ：-

```
SELECT timediff('2012-08-02 16:08:29','2012-08-01 16:08:26'); 
```

输出 ：-`'24:00:03'`

# ios - 在 ios 中使用核心图像裁剪椭圆

> ID：12138266
> 
> 赞同：1
> 
> 时间：2012-08-27T08:04:35.020
> 
> 标签：ios, core-graphics, core-image

我想从ios中的图像中裁剪一个椭圆。使用核心图像框架，我知道裁剪一个反应角区域。

使用核心图形，我可以裁剪椭圆区域。但是，裁剪图像的大小与原始图像的大小相同，因为我将蒙版应用于椭圆之外的区域。

因此，目标是从图像中裁剪椭圆区域，并且裁剪图像的大小不会超过该图像的矩形边界。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:06:11.910

您必须以正确的大小创建上下文，请尝试以下代码：

```
- (UIImage *)cropImage:(UIImage *)input inElipse:(CGRect)rect {
    CGRect drawArea = CGRectMake(-rect.origin.x, -rect.origin.y, input.size.width, input.size.height);

    UIGraphicsBeginImageContext(rect.size);
    CGContextRef ctx = UIGraphicsGetCurrentContext();

    CGContextAddEllipseInRect(ctx, CGRectMake(0, 0, rect.size.width, rect.size.height));
    CGContextClip(ctx);

    [input drawInRect:drawArea];

    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return img;
} 
```

也许您必须根据`drawArea`自己的需要进行调整，因为我没有对其进行测试。

# ios - 双击并放大 google map ios

> ID：12138268
> 
> 赞同：1
> 
> 时间：2012-08-27T08:04:39.060
> 
> 标签：ios, google-maps, zooming, pinch

有两种委托方法可以改变地图区域：

```
- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated  
- (void)mapView:(MKMapView *)mapView regionWillChangeAnimated:(BOOL)animated 
```

我的问题是：有没有办法检测地图区域是否从双击或缩放中改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:13:17.257

您可以使用手势识别器来检测双击：

```
UITapGestureRecognizer *recognizer = [[UITapGestureRecognizer alloc]
                         initWithTarget:self action:@selector(handleDoubleTap:)];
recognizer.numberOfTapsRequired = 2;
[self addGestureRecognizer:recognizer]; 
```

并为捏缩放做同样的事情，用`UIPinchGestureRecognizer`

# joomla - 如何从 tinymce 编辑器中隐藏工具编辑器

> ID：12138275
> 
> 赞同：3
> 
> 时间：2012-08-27T08:05:15.633
> 
> 标签：joomla, joomla2.5, joomla1.7, joomla1.6

我的 XML 如下所示。除了工具栏编辑器按钮之外的所有内容都对编辑器隐藏。有没有其他代码可以解决这个问题。

```
<field name="description"
    type="editor"
    cols="20"
    label="COM_TEST_DESCRIPTION_LBL"
    description="COM_TEST_DESCRIPTION_DESC"
    class="inputbox"
    filter="JComponentHelper::filterText"
    buttons="true"
    hide="readmore,pagebreak,image,article,toogle editor"
/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T01:36:59.293

最简单的方法是使用 CSS 样式来禁用此按钮的可见性：

```
.toggle-editor {
    display: none;
} 
```

# ohm - 欧姆：如何删除列/属性？

> ID：12138278
> 
> 赞同：2
> 
> 时间：2012-08-27T08:05:28.333
> 
> 标签：ohm

有一个我不再需要的属性，我想删除它。我似乎无法简单地从模型代码中删除该属性，因为加载实例时出现错误。它抱怨该`myattrib=`方法不存在。我猜它抱怨是因为 Ohm 看到了数据库中的密钥，但`attribute :myattrib`模型代码中不存在密钥。

在更改代码并删除之前，如何通过 Ohm 删除列/属性`attribute :myattrib`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:03:30.833

我试过这个，它对我有用：`Model.key[:myattrib].del`

在这里找到它：http: [//ohm.keyvalue.org/Ohm/Model.html#delete-instance_method](http://ohm.keyvalue.org/Ohm/Model.html#delete-instance_method)

# java - 属性文件中的选择模式

> ID：12138279
> 
> 赞同：7
> 
> 时间：2012-08-27T08:05:31.610
> 
> 标签：java, properties, messages, choice

我有一个带有消息的属性文件，我想处理一些特殊的复数情况。现在我使用：

```
xxx.yyy.plural=test{0,choice,2#y} 
```

但它也将 12 格式化为“暴躁”。如何将 2 指定为完全匹配？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T07:12:16.127

我找到了答案。似乎只有在指定了多个选项时，属性文件中的选项语句才能正常工作。所以你必须至少指定一个“其他分支”如果我重写我的例子：

```
xxx.yyy.plural={0,choice,2#testy|2<test} 
```

# haskell - 使用 Haskell 的大型结构上的多个拉链

> ID：12138282
> 
> 赞同：2
> 
> 时间：2012-08-27T08:05:50.400
> 
> 标签：haskell, zipper

> **可能重复：**
> [具有多个光标的拉链式数据结构](https://stackoverflow.com/questions/3436559/zipper-like-data-structure-with-more-then-one-cursor)

让 T 一棵大树（或另一个大数据结构）。假设您在其中有一些兴趣点（P = {p1, p2, ...} 其中 pN in T）。您可以为每个 pN 使用拉链，但是，如果我必须在某些 pN 上更新 (CRUD) T 怎么办？

忽略共享内存问题（通过锁解决），使用命令式语言我可以使用指针。更新 pN 我真的在更新 T。

（“纯”）Haskell的正确方法是什么？

谢谢！

注意：P 是一个真实的列表，我们总是有兴趣点的 P，我们可以一次更新一个点，部分或全部。P的存在是为了避免每次搜索每个pN（T很大）。再次感谢！

更新：对不起，我找到了对我的问题的正确答复（[像拉链一样具有多个游标的数​​据结构](https://stackoverflow.com/questions/3436559/zipper-like-data-structure-with-more-then-one-cursor)），我如何更新（或删除）我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:32:51.487

> “您可以为每个 pN 使用拉链”

想象一个文字冒险游戏，比如 Zork。你是拉链，T 是你正在探索的树世界。在房间 p7 中，您可以更改内容并在 CRUD 中执行 U。然后你看看你的选择：

*   你可以向上移动树 T
*   您可以向左移动树 T
*   您可以向左向右移动树 T

该列表涵盖了二叉树中的基本动作，您的 T 可能会有所不同。要更新所有的 P，你沿着一些路线走拉链来访问所有的 p1、p2、p3 等。一个简单的路线是从 T 的根开始，下降到 p1，回到 T 的根，下降到p2，回到 T 的根，下降到 p3，等等。

最终你完成并离开 T 世界。这通常被称为“关闭拉链”。

# apache - 作业失败时，nutch 2.0 重复获取页面

> ID：12138288
> 
> 赞同：1
> 
> 时间：2012-08-27T08:06:36.423
> 
> 标签：apache, web-crawler, nutch

我使用 mysql 作为带有 nutch 的存储后端。

抓取某些网站时作业失败。到达此页面时出现以下异常并退出nutch：http: [//www.appchina.com/users.html](http://www.appchina.com/users.html)

```
Exception in thread "main" java.lang.RuntimeException: job failed: name=parse, jobid=job_local_0004
    at org.apache.nutch.util.NutchJob.waitForCompletion(NutchJob.java:47)
    at org.apache.nutch.parse.ParserJob.run(ParserJob.java:249)
    at org.apache.nutch.crawl.Crawler.runTool(Crawler.java:68)
    at org.apache.nutch.crawl.Crawler.run(Crawler.java:171)
    at org.apache.nutch.crawl.Crawler.run(Crawler.java:250)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.nutch.crawl.Crawler.main(Crawler.java:257) 
```

所以我修改 ./src/java/org/apache/nutch/util/NutchJob.java 将 if (getConfiguration().getBoolean("fail.on.job.failure", true)) { 更改为 if (getConfiguration( ).getBoolean("fail.on.job.failure", false)) {

重新编译后，我不会得到任何异常，而是无限重启爬取。

```
FetcherJob : timelimit set for : -1
FetcherJob: threads: 30
FetcherJob: parsing: false
FetcherJob: resuming: false
Using queue mode : byHost
Fetcher: threads: 30
Fetcher: throughput threshold: -1
Fetcher: throughput threshold sequence: 5
QueueFeeder finished: total 2 records. Hit by time limit :0
fetching http://www.appchina.com/
fetching http://www.appchina.com/users.html
-finishing thread FetcherThread0, activeThreads=29
-finishing thread FetcherThread29, activeThreads=28
...
0/0 spinwaiting/active, 2 pages, 0 errors, 0.4 0.4 pages/s, 137 137 kb/s, 0 URLs in 0 queues
-activeThreads=0
ParserJob: resuming:    false
ParserJob: forced reparse:  false
ParserJob: parsing all
Parsing http://www.appchina.com/
Parsing http://www.appchina.com/users.html 
```

hadoop.log 中的更新错误

```
2012-09-17 18:48:51,257 WARN  mapred.LocalJobRunner - job_local_0004
java.io.IOException: java.sql.BatchUpdateException: Incorrect string value: '\xE7\x94\xA8\xE6\x88\xB7...' for column 'text' at row 1
        at org.apache.gora.sql.store.SqlStore.flush(SqlStore.java:340)
        at org.apache.gora.sql.store.SqlStore.close(SqlStore.java:185)
        at org.apache.gora.mapreduce.GoraRecordWriter.close(GoraRecordWriter.java:55)
        at org.apache.hadoop.mapred.MapTask$NewDirectOutputCollector.close(MapTask.java:651)
        at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:766)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
        at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:212)
Caused by: java.sql.BatchUpdateException: Incorrect string value: '\xE7\x94\xA8\xE6\x88\xB7...' for column 'text' at row 1
        at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:2028)
        at com.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java:1451)
        at org.apache.gora.sql.store.SqlStore.flush(SqlStore.java:328)
        ... 6 more
Caused by: java.sql.SQLException: Incorrect string value: '\xE7\x94\xA8\xE6\x88\xB7...' for column 'text' at row 1
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3609)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3541)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2002)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2624)
        at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2127)
        at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2427)
        at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:1980)
        ... 8 more 
```

再次更新

我已经删除了 gora 创建的表，并使用 VARCHAR(128) id 和 utf8mb4 DEFAULT CHARSET 创建了一个类似的表。现在可以了。为什么？

有人帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:39:33.893

您需要为 Parse 作业添加 hadoop 日志。附加的堆栈跟踪未显示该信息。在您更改代码后，解析是否成功？

# linux - 如何从 jetty webroot 文件夹外部访问资源（图像/mp3）？

> ID：12138292
> 
> 赞同：0
> 
> 时间：2012-08-27T08:06:42.000
> 
> 标签：linux, resources, jetty

我在`/home/jetty/webapps/`Jetty 服务器的文件夹中放置了一个 Java Web 应用程序。

我希望能够从完全位于 jetty web 根目录之外的`song.mp3, img.jpg, etc`文件夹中为我的 web 应用程序提供静态文件。`/media/resources/`

我可以访问位于 jetty 根目录之外的资源吗？如果是这样，我该如何做到这一点？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:54:08.520

很简单，这是一个示例，可让您在一个 url 下提供聚合在一起的多个目录

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/example-jetty-embedded/src/main/java/org/eclipse/jetty/embedded/SplitFileServer.java？ h=jetty-9](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/example-jetty-embedded/src/main/java/org/eclipse/jetty/embedded/SplitFileServer.java?h=jetty-9)

那里还有其他文件服务器嵌入式示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:11:24.643

是的，你可以使用 apache httpd 服务器设置 htdoc 使用 /media/resources/

# python - 是否，使用 open() 不适用于 python 2.6

> ID：12138298
> 
> 赞同：6
> 
> 时间：2012-08-27T08:06:50.103
> 
> 标签：python, python-2.6, with-statement

我正在尝试将“With open()”与 python 2.6 一起使用，它给出了错误（语法错误），而它与 python 2.7.3 一起工作正常我是否缺少某些东西或一些导入来使我的程序工作！

任何帮助，将不胜感激。

溴

我的代码在这里：

```
def compare_some_text_of_a_file(self, exportfileTransferFolder, exportfileCheckFilesFolder) :
    flag = 0
    error = ""
    with open("check_files/"+exportfileCheckFilesFolder+".txt") as f1,open("transfer-out/"+exportfileTransferFolder) as f2:

        if f1.read().strip() in f2.read():
            print ""
        else:
            flag = 1
            error = exportfileCheckFilesFolder
            error = "Data of file " + error + " do not match with exported data\n"
        if flag == 1:   
            raise AssertionError(error) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T08:10:12.250

Python 2.6 支持该`with open()`语句，您必须有不同的错误。

有关详细信息，请参阅[PEP 343](http://www.python.org/dev/peps/pep-0343/)和 python[文件对象文档](http://docs.python.org/library/stdtypes.html#file-objects)。

快速演示：

```
Python 2.6.8 (unknown, Apr 19 2012, 01:24:00) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> with open('/tmp/test/a.txt') as f:
...     print f.readline()
... 
foo

>>> 
```

您正在尝试将`with`语句与多个上下文管理器一起使用，该语句仅[在 Python 2.7 中添加](http://docs.python.org/reference/compound_stmts.html#grammar-token-with_stmt)：

> 在 2.7 版更改: 支持多个上下文表达式。

在 2.6 中改用嵌套语句：

```
with open("check_files/"+exportfileCheckFilesFolder+".txt") as f1:
    with open("transfer-out/"+exportfileTransferFolder) as f2:
        # f1 and f2 are now both open. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T11:26:27.103

它是`with`具有多个上下文表达式的“扩展”语句，这会给您带来麻烦。

在 2.6 中，而不是

```
with open(...) as f1, open(...) as f2:
    do_stuff() 
```

你应该添加一个嵌套级别并编写

```
with open(...) as f1:
    with open(...) as f2:
        do.stuff() 
```

[文件](http://docs.python.org/reference/compound_stmts.html#the-with-statement)说

> *在 2.7 版更改:*支持多个上下文表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:18:54.567

`with open()`Python 2.6 支持该语法。在 Python 2.4 上，它不受支持并给出语法错误。如果您需要支持 PYthon 2.4，我会建议类似：

```
def readfile(filename, mode='r'):
    f = open(filename, mode)
    try:
        for line in f:
            yield f
    except e:
        f.close()
        raise e
    f.close()

for line in readfile(myfile):
    print line 
```

# ruby - 运算符 !=~ 在 Ruby 中

> ID：12138299
> 
> 赞同：0
> 
> 时间：2012-08-27T08:06:52.410
> 
> 标签：ruby

这是用于显示错误消息的代码

```
ActionView::Base.field_error_proc = Proc.new do |html_tag, instance_tag|
  unless html_tag =~ /^<label/
    "<span class=\"field_with_errors\">#{html_tag}</span>".html_safe
  else
    "#{html_tag}".html_safe
  end
end 
```

但是，最好不要`unless`和`else`一起使用。所以我做了

```
ActionView::Base.field_error_proc = Proc.new do |html_tag, instance_tag|
  if html_tag !=~ /^<label/
    "#{html_tag}".html_safe
  else
    "<span class=\"field_with_errors\">#{html_tag}</span>".html_safe 
  end
end 
```

它不工作。

我知道这是因为`"!=~"`. 那么，我该如何改变它以使其工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T08:13:31.357

你应该只使用`=~`. 以下给出与原始代码相同的结果`unless`：

```
ActionView::Base.field_error_proc = Proc.new do |html_tag, instance_tag|
  if html_tag =~ /^<label/
    "#{html_tag}".html_safe
  else
    "<span class=\"field_with_errors\">#{html_tag}</span>".html_safe 
  end
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T08:21:45.517

`!=~`不是 Ruby 运算符，因此它实际上标记为`!= ~`，这是一个完全不同的操作。因此，`html_tag !=~ /^<label/`实际上测试`html_tag != ~/^<label/`等于`html_tag != nil`，这将始终为真。

你可以在这里看到这个：

```
>> "x" !=~ nil
NoMethodError: undefined method `~' for nil:NilClass
    from (irb):104
    from :0 
```

你应该只使用 plain `=~`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T08:41:23.793

上面的替代解决方案是使用 !~ 运算符，它是 =~ 的倒数。

# programming-languages - 有人知道编程语言在表达能力上的比较吗？

> ID：12138300
> 
> 赞同：1
> 
> 时间：2012-08-27T08:07:01.570
> 
> 标签：programming-languages

我正在寻找一个比较，大致说明在给定的编程语言中我需要多少行代码来解决给定的问题。我考虑过为此使用编程语言枪战源，但也许也有不同的源。

感谢您的帮助托比亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:44:31.993

一般来说，众所周知，某些语言比其他语言具有更强的“表现力”。 [正如 deceze](http://rosettacode.org/wiki/Rosetta_Code)所提到的那样，rosettacode.org 是“hello world”（琐碎的想法/问题）之类的好来源，但是为了更深入地了解一种语言相对于另一种语言的表现力，有一篇很好的文章在这里发帖：

[http://redmonk.com/dberkholz/2013/03/25/programming-languages-ranked-by-expressiveness/](http://redmonk.com/dberkholz/2013/03/25/programming-languages-ranked-by-expressiveness/)

它查看了许多开源项目，并比较了已提交的 LOC 对代码库的提交，以试图衡量完成表达式的详细程度。

当然，假设是一个提交大致转化为一个计算目标/思想/表达/等。而且我认为总的来说，大多数编码人员及其代码库都是如此（我们至少尽力而为！）。

# html - 我可以通过语义或结构来区分 HTML 吗？

> ID：12138304
> 
> 赞同：2
> 
> 时间：2012-08-27T08:07:14.767
> 
> 标签：html, diff

例如，我希望以下内容被视为相同。

```
<div id="div" class="txt">
   Foo bar
</div> 
```

和

```
<div   class="txt"                          id="div"          >Foo bar</div> 
```

我用 diff 和 html 搜索过，我发现 diff 工具在 HTML 中显示它的 diff 结果。

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T22:34:14.060

[我在http://prettydiff.com/](http://prettydiff.com/)上编写了一个工具来执行此操作，但请务必从语言列表中选择 HTML，因为自动检测会尝试将您的 HTML 代码视为 XML。

# google-app-engine - 是一个实体存储第一个父级

> ID：12138306
> 
> 赞同：0
> 
> 时间：2012-08-27T08:07:18.347
> 
> 标签：google-app-engine, google-cloud-datastore

实体是否仅存储第一个父级？或所有父母自己的钥匙。

以及可以创建多少个孩子。

我想了解一个实体是否仅将其父级或所有顶级父级保存在 KEY 上。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:40:50.517

实体键对实体类型、实体名称或 id 以及所有实体祖先键进行编码。

示例`for a -> b -> c (with -> = parent_of)`：

```
>>> a = Foo(id="a").put()
>>> b = Foo(id="b", parent=a).put()
>>> c = Foo(id="c", parent=b).put()
>>> c
Key('Foo', 'a', 'Foo', 'b', 'Foo', 'c') 
```

有关如何存储实体的更多说明，请参阅[本文。](https://developers.google.com/appengine/articles/storage_breakdown#anc-entitiestable)

# php - Magento 1.6 - 在添加到购物车期间检索客户输入的自定义选项 (CartController.php/addAction)

> ID：12138307
> 
> 赞同：0
> 
> 时间：2012-08-27T08:07:27.153
> 
> 标签：php, zend-framework, magento, magento-1.6

对 addAction 函数使用 CartController.php 覆盖。

基本上我正在尝试采用用户输入的自定义选项，然后根据这些选项生成新产品并将其添加到购物车中。我有第一部分，如果产品没有标记自定义属性，它会像平常一样添加......但如果它被标记，它会创建一个新产品并将其添加到购物车中。

我已成功生成新产品并将其添加到购物车，但我无法获得客户输入的自定义选项。

```
$defaultprod = $product->getDefaultprod();
$prodID = $product->getId();
$prodOpt = Mage::getModel("catalog/product")->load($prodID);

if (!$defaultprod == 1) {
$cart->addProduct($product, $params);
if (!empty($related)) {
    $cart->addProductsByIds(explode(',', $related));
}
$cart->save();
}
else
{
          // code to create/add new product here, adding new product + adding to cart functioning, but CANNOT retrieve customer's custom attribute input
} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T21:46:45.800

这就是我刚刚成功尝试的：

*   避免将原始产品添加到购物车
*   检索最初发布在添加到购物车上的自定义选项

**1）创建观察者**

这观察事件`controller_action_predispatch_checkout_cart_add`

```
<controller_action_predispatch_checkout_cart_add>
    <observers>
        <myobserver_identification>
            <class>module/observer</class>
            <method>myCustomMethod</method>
        </myobserver_identification>
    </observers>
</controller_action_predispatch_checkout_cart_add> 
```

**2) 在 MyNamespace_Module_Model_Observer 中添加这个**

```
public function myCustomMethod() {
    $request = Mage::app()->getFrontController()->getRequest();

    /**
     * Avoid adding original product
     */
    $request->setParam('product', (bool) false);

    /**
     * Retrieve custom options posted on add to cart
     */
    $customOptions = $request->getParam('options');
} 
```

# android - 单击 EditText 不显示软键盘

> ID：12138312
> 
> 赞同：0
> 
> 时间：2012-08-27T08:07:53.523
> 
> 标签：android, android-edittext, actionbarsherlock, android-softkeyboard

我正在使用 ActionBarSherlock，在 ActionBar 中，当我单击 searchIcon 时，我会显示此自定义布局。

```
public boolean onCreateOptionsMenu(final Menu menu) {
LayoutInflater inflater = getLayoutInflater();
final View view = inflater.inflate(R.layout.on_search_icon_clicked,null, false);
view.findViewById(R.id.search_image).setOnClickListener(
        new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

        EditText searchET = (EditText) view.findViewById(R.id.search_editText);
        String s = searchET.getText().toString();
        Toast.makeText(getBaseContext(), "Searching for: " + s,1000).show();
                    }
        });

menu.add("Search")
        .setIcon(R.drawable.ic_search)
        .setActionView(view)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);
        return true;
} 
```

on_search_icon_clicked.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/search_image"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true"
        android:src="@drawable/ic_search"
        android:clickable="true"
        android:contentDescription="@string/seach_icon" />

    <EditText
        android:id="@+id/search_editText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@id/search_image"
        android:hint="@string/search"
        android:singleLine="true" />

</RelativeLayout> 
```

所以，`i click on the SearchIcon`---> `i get the custom layout with editText and ImageView`---> `click on editText, opens softkeyboard`---> `enters string and clicks the imageView`--->`shows me the toast.`

到这里为止都很好。

问题是：

我`close the softkeyboard using device back button`---> 然后`close the custom layout using ActionBar Home icon click`---> 现在`click the searchIcon again, which reopens the custom layout, with editText filled with previously searched string`---> `click on the editText, the softkeyboard doesn't open up`（这是问题所在）。

请帮忙，我不知道为什么它不能按预期工作。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:33:50.957

我以前遇到过这个问题，这是我的解决方案

```
//your_menu
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/menu_search"
    android:orderInCategory="0"
    android:icon="@drawable/btn_search"
    android:title="Search"
    android:actionLayout="@layout/on_search_icon_clicked"
    android:showAsAction="always|collapseActionView"
   />
</menu>

@Override
public boolean onCreateOptionsMenu(Menu menu)
{       
    getSupportMenuInflater().inflate(R.menu.your_menu, menu);
    mSearchbar = (MenuItem) menu.findItem(R.id.menu_search);
    View actionview = mSearchbar.getActionView();
    mEtSearchbar = ((EditText) actionview.findViewById(R.id.search_editText));
    mEtSearchbar.setOnEditorActionListener(this);       
    mEtSearchbar.addTextChangedListener(this);      
    super.onCreateOptionsMenu(menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item)
{
    Intent intent;
    switch (item.getItemId())
    {
        case R.id.menu_search:                  
            mEtSearchbar.clearFocus();
             (new Handler()).postDelayed(new Runnable() {
                public void run() {
                    mEtSearchbar.dispatchTouchEvent(MotionEvent.obtain(SystemClock.uptimeMillis(), SystemClock.uptimeMillis(), MotionEvent.ACTION_DOWN, 0, 0, 0));
                    mEtSearchbar.dispatchTouchEvent(MotionEvent.obtain(SystemClock.uptimeMillis(), SystemClock.uptimeMillis(), MotionEvent.ACTION_UP , 0, 0, 0));
                }
             }, 100);
            break;          
        default:
            break;
    }

    return super.onOptionsItemSelected(item);
} 
```

mEtSearchbar ~ 你的搜索ET

# java - 如何动态替换具有特定值的子字符串？

> ID：12138315
> 
> 赞同：1
> 
> 时间：2012-08-27T08:08:14.140
> 
> 标签：java

我的属性文件中有值，例如，

> bloodpressure.properties :
> (key,value) : (血压，你的血压是***B6***，这很高）

在我的 java 类中，我正在从属性文件中读取值，但我想用计算值替换值，例如，

```
String B6 = "120";
Properties bp = new Properties();
bp.load(new FileInputStream("filename"));

String bpstr = bp.getProperty(bloodpressure); 
```

现在，我想用上面的 B6 值（120）替换 B6 值。
我怎样才能动态地做到这一点？，我有很多这样的字符串。

我只想遍历属性文件，这些值应该替换为计算值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:12:00.270

使用 String.replace()

```
bpstr.replace("B6",B6); 
```

更新

或者如果您有多个 B6 实例，您可以使用 replaceAll

```
bpstr.replaceAll("B6",B6); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:14:02.297

[`MessageFormat.format`](http://docs.oracle.com/javase/6/docs/api/java/text/MessageFormat.html)这样做：

```
String msg = "Your blood pressure is {0}";
System.out.println(MessageFormat.format(msg, 120)); 
```

基本上，您定义占位符并用您的值替换它们。这对于国际化特别有用，其中占位符的出现顺序可能会因不同的语言而改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:23:00.753

```
 MessageFormat.format does that:

      String msg = "Your blood pressure is {0}";
      System.out.println(MessageFormat.format(msg, 120)); 
```

这将做你想做的事。这里，{0} 被 120 替换。

# perl - 消除不可见字符 perl

> ID：12138320
> 
> 赞同：8
> 
> 时间：2012-08-27T08:08:32.197
> 
> 标签：perl, character-encoding

我有一个从另一个脚本的 STDOUT 中读取的 perl 变量：

```
$var = `someScript.sh`
print $var    <---- Prints "somestring" 
```

但是，该变量包含的不仅仅是“somestring”。变量前面还有 15 个字符（特殊和非特殊但隐藏）在我打印时不显示。

```
length($var)  <--- Returns a number 10-15 larger than "somestring" has chars 
```

我可以像这样消除特殊字符：

```
$var =~ s/[^[:print:]]+//g 
```

但是，一旦删除了特殊字符，似乎还会显示非特殊字符：

```
print $var   <---- Displays "0;<hostname>somestring" 
            (where <hostname> is the system hostname) 
```

有没有办法消除隐藏的特殊字符和非特殊字符？我希望能够使用 $var 作为哈希的键，然后通过“somestring”引用它

```
$hash{$var} = 123
print $hash{'somestring'} 
```

想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T08:19:09.233

我们可以假设您要删除的字符在不可打印字符之前吗？

如果是这样，也许像

```
$var =~ s/.*[^[:print:]]+//; 
```

可以工作吗？

# tridion - 为什么工作流项目被暂停？

> ID：12138321
> 
> 赞同：3
> 
> 时间：2012-08-27T08:08:37.653
> 
> 标签：tridion, tridion-2011

我已经创建了工作流并订阅了 finishactivity 事件，在 finishactivity 事件中我只是在写日志。

当项目进入工作流时，项目在完成第一个活动后被暂停。可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T20:37:57.763

正如@Quirijn 所述，如果自动化活动中的代码引发错误，这是工作流项进入的正常状态。为了诊断这一点，请在您的问题中发布任何自动活动代码。通常还值得检查您的 Windows 事件日志以获取有关问题所在的提示。

# php - 当 MySQL 中的表为空时，SELECT MAX() 返回的结果是什么？

> ID：12138323
> 
> 赞同：3
> 
> 时间：2012-08-27T08:08:42.530
> 
> 标签：php, mysql, select, return-value, max

我有一张用户付款表。我需要为每笔交易指定一个收据代码，所以我需要知道最后一笔是什么？如果没有以前的收据，我想添加第一个带有**1000**的收据，其他收据必须是增量的，如**1001、1002、...**
为此，我编写了以下代码：

```
$receipt = '1000';
$query_receipt = mysql_query("SELECT MAX(receipt) FROM tbl_payments");
$max = mysql_result($query_receipt,0);
if ($max != '0' || $max != '')
{
    $receipt = mysql_result($query_receipt,0) + 1;
} 
```

当我在表中有记录时它工作正常。但是当表为空时它返回**1 。**我怎么解决这个问题？`SELECT MAX() ...`即使表为空，我也需要知道 a 的返回值。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-27T08:12:15.217

您可以使用`IFNULL`as 来实现这一点：

```
SELECT IFNULL(MAX(receipt), 1000) FROM tbl_payments; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T08:12:27.707

你得到一个空值：

```
mysql> create table noRows (id int(3));
Query OK, 0 rows affected (0.03 sec)

mysql> select max(id) from noRows;
+---------+
| max(id) |
+---------+
|    NULL |
+---------+
1 row in set (0.00 sec) 
```

但是，您可以使用合并来获得所需的内容：

```
mysql> select coalesce(max(id),1) from noRows;
+---------------------+
| coalesce(max(id),1) |
+---------------------+
|                   1 |
+---------------------+
1 row in set (0.01 sec) 
```

编辑：如果您要检查它，用户已经有一个，如果没有，插入一个新行，据我所知，它不能用一个查询来完成，但以下应该工作：

```
$receipt = 1000;
$query_receipt = mysql_query("SELECT MAX(receipt) FROM tbl_payments");
$num_rows = mysql_num_rows($query_receipt);
if($num_rows>0)
{
    // Assumes $ID to be some unique field used to identify your customer stored in field ID.
    $sql="insert into tbl_payments (ID, receipt) values ($ID, $receipt)";
    mysql_result($sql)
}
else
{
    // Do stuff here to get the receipt from the first resultset.
} 
```

关于这一点，您可能需要考虑放弃旧的不推荐使用的`mysql_*`函数并改为使用[PDO](http://au.php.net/manual/en/book.pdo.php)。它更安全，并且具有更多功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T09:11:45.120

我还建议使用 auto_increment 值，并通过 insert_id 确定您当前的收据编号。只需执行您的`INSERT`-Query，然后使用例如[mysqli_insert_id](http://www.php.net/manual/en/mysqli.insert-id.php)来获取您插入的付款的 id。

如果您想从 1000 开始，您可以更改自动增量列的起始值。我发现这可以设置自动增量以从 1000 开始

```
ALTER TABLE tbl_name AUTO_INCREMENT = 1000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T17:47:47.577

下面应该作为您的插入语句。不需要像上面那样使用 PHP 运行两个查询，您可以直接在 MYSQL 中执行相同的结果。

```
INSERT INTO tbl_payments (receipt)
VALUES 
(
(SELECT CASE WHEN MAX(p.receipt) IS NULL THEN 1000 ELSE MAX(p.receipt)+1 END AS receipt 
    FROM tbl_payments p ORDER BY p.receipt DESC LIMIT 1)
) 
```

# iphone - 使用代码返回导航问题

> ID：12138324
> 
> 赞同：1
> 
> 时间：2012-08-27T08:08:45.867
> 
> 标签：iphone

我正在做 json 解析应用程序。其中没有关于解析的问题。我有列表直到**type="0"**。但是**type="1"**有描述。所有**“列表”**以及**“描述”**都已正确设置。

```
{"pageid":"5824","title":"Sms Collection","type":"0","desc":"Friendship SMS:$@|5825|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;Love SMS:$@|5826|@$:4cing.com/mobile_app/uploads/pageicon/Love.png;Miss U SMS:$@|5827|@$:4cing.com/mobile_app/uploads/pageicon/missu.png;Funny SMS:$@|5828|@$:4cing.com/mobile_app/uploads/pageicon/funny.png;Valentine SMS:$@|5829|@$:4cing.com/mobile_app/uploads/pageicon/valantine.png;Adult SMS:$@|5830|@$:4cing.com/mobile_app/uploads/pageicon/adult.png;Anniversary SMS:$@|5832|@$:4cing.com/mobile_app/uploads/pageicon/anniversary.png;Birthday SMS:$@|5833|@$:4cing.com/mobile_app/uploads/pageicon/birthday.png;Break up SMS:$@|5834|@$:4cing.com/mobile_app/uploads/pageicon/Breakup.png;Broken Heart SMS:$@|5835|@$:4cing.com/mobile_app/uploads/pageicon/heartbroken.png;Christmas SMS:$@|5836|@$:4cing.com/mobile_app/uploads/pageicon/Christmas.png;Exam SMS:$@|5837|@$:4cing.com/mobile_app/uploads/pageicon/exam.png;Flirt SMS:$@|5838|@$:4cing.com/mobile_app/uploads/pageicon/flirtsms.png;Good Luck SMS:$@|5839|@$:4cing.com/mobile_app/uploads/pageicon/goodluck.png;Good Morning SMS:$@|5840|@$:4cing.com/mobile_app/uploads/pageicon/goodmornig.png;Good Night SMS:$@|5841|@$:4cing.com/mobile_app/uploads/pageicon/goodnight.png;Insult SMS:$@|5842|@$:4cing.com/mobile_app/uploads/pageicon/inseart.png;Pashto SMS:$@|5843|@$:4cing.com/mobile_app/uploads/pageicon/pashto.png;Poetry SMS:$@|5844|@$:4cing.com/mobile_app/uploads/pageicon/poetry.png;Sardar SMS:$@|5845|@$:4cing.com/mobile_app/uploads/pageicon/sardar.png;Santa Banta SMS:$@|5846|@$:4cing.com/mobile_app/uploads/pageicon/santabanta.png;Smile SMS:$@|5847|@$:4cing.com/mobile_app/uploads/pageicon/smile.png;Sorry SMS:$@|5848|@$:4cing.com/mobile_app/uploads/pageicon/sorry.png;Chanakya SMS:$@|5849|@$:4cing.com/mobile_app/uploads/pageicon/chanakya.png;","cache":"1","Nexturl":"5825","prevurl":"0","bckurl":"0"} 
```

当应用程序启动时（type="0"），这是包含上述数据的第一个列表。

![在此处输入图像描述](../Images/a7f88a9ab79a4b8d7cdf4a9c17ac7511.png)

Onclick**友谊短信**单元格我得到（类型=“0”）这个数据。

```
{"pageid":"5825","title":"Friendship SMS","type":"0","desc":"Do not lie, Do not cheat and do not make promises :$@|5850|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;There are no strings attached to a friendship, no :$@|5851|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;friends are like stars. You ca not always see them:$@|5852|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;Friends should b like zero. when u add, they r sam:$@|5853|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;Friendship is like a glass handle it with care bec:$@|5854|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;A friend gives hope when life is low, a friend is :$@|5855|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;How long shall we be friends? Do you want a clue? :$@|5856|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;My friendship is nothing but a round, Wandering wh:$@|5857|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;When nails are growing, We cut our nails, Not fing:$@|5858|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;A true friend understands when u say I forgot, wai:$@|5859|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;Making a million friends is not an achievement, Th:$@|5860|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;Friendship and Medicine both r good 4 our health:$@|5861|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;A memory lasts forever, and never does it die. Tru:$@|5862|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;Where there is no compromise in telling the secret:$@|5863|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;I m not Wealthy but i have Rich Heart, I m not Bes:$@|5864|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;Do not Love a Friend who Hurts U Do not Hurt a Fri:$@|5865|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;To hear what is unspoken, to see what is invisible:$@|5866|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;Life is 5 star Mother is top star Father is king s:$@|5867|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;A single rose can be my garden A single friend, my:$@|5868|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;To live a life i need heartbeat, 2 have heartbeat :$@|5869|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;A true relationship is when you can tell each othe:$@|5870|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;Friends\" are like balloons once u let them go u ca:$@|5871|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;MY friendship is just like a rubber band, It is to:$@|5872|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;I wish every relationship come with the same tag a:$@|5873|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;As precious as u r to me, As precious no one can e:$@|5874|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;Friendship Must Never Be Buried Under The Weight O:$@|5875|@$:4cing.com/mobile_app/uploads/pageicon/friendship.png;","cache":"1","Nexturl":"5850","prevurl":"5824","bckurl":"5849"} 
```

![在此处输入图像描述](../Images/0697ab96780abdc0f6f3c4b1371dbdc5.png)

最后，对于**“Do not lie,Do not che...”**的屏幕点击有 (type="1") 所以描述显示为

![在此处输入图像描述](../Images/539e8098a1babd9139278936e035d879.png)

我在后台过程中遇到问题，我必须使用类似于前一页的**pageid的****prevurl**来实现后台功能

这是我为后台功能所做的代码，

```
-(IBAction)btnBackClicked:(id)sender
{
    int Type;

    NSMutableDictionary *tempDict1;

    for(int i=0;i<[test.JsonPageList count];i++)
    {
        tempDict1 = [[NSMutableDictionary alloc]init];
        tempDict1 = (NSMutableDictionary *)[test.JsonPageList objectAtIndex:i];
        NSLog(@"pageid is.....%d",[[tempDict1 valueForKey:@"pageid"] intValue]);
        if ([[tempDict1 valueForKey:@"pageid"] intValue]) 
        {
            Type = [[tempDict1 valueForKey:@"type"] intValue];

            if (Type == 0) 
            {
                NSArray *arr=[[tempDict1 valueForKey:@"desc"] componentsSeparatedByString:@";"];
                NSString *subStar = @"|@$:";
                NSString *sub=@":$@|";

                [test.arrTitle removeAllObjects];
                [test.arrnew removeAllObjects];
                [test.arrId removeAllObjects];
                [test.arrImages removeAllObjects];

                for (int i=0; i<[arr count]-1; i++)
                {
                    [test.arrTitle addObject:[[arr objectAtIndex:i] substringToIndex:NSMaxRange([[arr objectAtIndex:i] rangeOfString:sub])-4]];
                    [test.arrnew addObject:[[arr objectAtIndex:i] substringFromIndex:NSMaxRange([[arr objectAtIndex:i] rangeOfString:sub])]];
                    [test.arrId addObject:[[test.arrnew objectAtIndex:i] substringToIndex:NSMaxRange([[test.arrnew objectAtIndex:i] rangeOfString:subStar])-4]];
                    [test.arrImages addObject:[[arr objectAtIndex:i] substringFromIndex:NSMaxRange([[arr objectAtIndex:i] rangeOfString:subStar])]];
               }
                [tbl_withData reloadData];
            }
        }
    }
} 
```

这是解析的代码

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [connection release];

    NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

    if ([[NSUserDefaults standardUserDefaults] boolForKey:@"SecondTime"])
    {
        [self saveData:responseData toFile:@"SMSCollection.txt"];

        results = [responseString JSONValue];

        JsonPageList = [results objectForKey:@"page"];

        desc = [[NSMutableArray alloc] init];
        for (NSString * strName in results)
        {
            JsonPageList = [results objectForKey:strName];
            dictHash = [[NSMutableDictionary alloc] init];
            [dictHash setObject:JsonPageList forKey:@"JsonPageList"];

            for (int i = 0; i < [JsonPageList count]; i++) 
            {
                [desc addObject:[[JsonPageList objectAtIndex:i] valueForKey:TAG_DESC]];

                int PAGEID = [[NSString stringWithFormat:@"%@",[[JsonPageList objectAtIndex:i] valueForKey:@"pageid"]] intValue];
                [self displayPage:PAGEID];
            }
        }
    }
    [responseString release];
}

-(void) displayPage:(int)pageID
{
    page.pageid = pageID;
    if (page.type == PAGE_TYPE_MENU) 
    {
        NSString *desc1=[desc objectAtIndex:0];
        NSArray *arr=[desc1 componentsSeparatedByString:@";"];
        NSString *subStar = @"|@$:";
        NSString *sub=@":$@|";

        arrTitle=[[NSMutableArray alloc] init];
        arrImages = [[NSMutableArray alloc] init];
        arrnew = [[NSMutableArray alloc]init];
        arrId=[[NSMutableArray alloc]init];

        for (int i=0; i<[arr count]-1; i++)
        {
            [arrTitle addObject:[[arr objectAtIndex:i] substringToIndex:NSMaxRange([[arr objectAtIndex:i] rangeOfString:sub])-4]];
            [arrnew addObject:[[arr objectAtIndex:i] substringFromIndex:NSMaxRange([[arr objectAtIndex:i] rangeOfString:sub])]];
            [arrId addObject:[[arrnew objectAtIndex:i] substringToIndex:NSMaxRange([[arrnew objectAtIndex:i] rangeOfString:subStar])-4]];
            [arrImages addObject:[[arr objectAtIndex:i] substringFromIndex:NSMaxRange([[arr objectAtIndex:i] rangeOfString:subStar])]];
        }
    }
    else if (page.type == PAGE_TYPE_CONTENT) 
    {
        NSLog(@"CURR title:- %@\n  & desc:- %@",page.title1 ,page.desc);

        UITextView *TextView = [[UITextView alloc] init];
        TextView.text =  page.title1;

        UILabel *lblcurrentPage = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 300)];
        lblcurrentPage.backgroundColor = [UIColor whiteColor];
        lblcurrentPage.textColor = [UIColor blackColor];
        lblcurrentPage.text = page.desc;
    }
} 
```

帮我解决这个问题。

# google-apps-script - 无法在 Chrome 网上应用店中注册我的 Google Apps Script Web 应用程序

> ID：12138327
> 
> 赞同：2
> 
> 时间：2012-08-27T08:08:52.503
> 
> 标签：google-apps-script, chrome-web-store

我开发了一个名为[VALET](https://script.google.com/d/1CwQEHJ-qbeRc743T-aIPlyBZpQFP7zaWmNjKQCioVZCr2MH2vTNPBwfw/edit)的 Google Apps Script Web 应用程序，并希望在 Chrome 网上应用店中发布它。但是，当我在 GAS 脚本编辑器中使用“发布”->“在 Chrome 网上应用店注册”菜单项时，我收到以下消息：

> 您的项目未注册。您必须先接受服务条款，然后才能在 Chrome 网上应用店中注册商品。

注意：我已经支付了 5 美元的开发者注册费，但还没有在商店发布任何商品。

所以，我想知道，我在哪里可以接受 ToS 或者这可能是脚本编辑器中的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:07:22.553

我已在问题跟踪器中将其作为[http://code.google.com/p/google-apps-script-issues/issues/detail?id=1774](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1774)提出。您似乎已接受服务条款并支付了注册费，因此我已向工程团队提出此问题，以便他们调查您仍然收到错误的原因。如果您为问题“加注星标”，您将在将更新添加到问题时获得更新。

# asp.net-mvc-4 - MVC4 捆绑 GZIP 和标头

> ID：12138337
> 
> 赞同：9
> 
> 时间：2012-08-27T08:09:37.380
> 
> 标签：asp.net-mvc-4, gzip, asp.net-optimization

我正在使用 Google PageSpeed 和 YSlow 测试我的网站，而我使用 MVC4 包创建的包没有得到

Gzipped（使用 gzip 或 deflate 压缩资源可以减少通过网络发送的字节数）并且没有

变化：Accept-Encoding 标头（指示代理服务器缓存资源的两个版本：一个是压缩的，一个是未压缩的。这有助于避免公共代理无法正确检测到 Content-Encoding 标头的问题。）

以及如何为 ISS 上的整个脚本文件夹添加编码头。我知道有 HTTP 响应标头，然后添加自定义 HTTP 响应标头，

![在此处输入图像描述](../Images/306368e57cdc45e6b6e6087409d0e536.png)

但这是否适用于整个脚本文件夹和子文件夹以及在名称和值字段中放置的内容。

这怎么能解决。

问候。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T20:48:55.787

确保在 web.config 的 system.webserver 部分设置以下内容

```
<urlCompression doDynamicCompression="true"
                    doStaticCompression="true" dynamicCompressionBeforeCache="true" />
    <staticContent>
      <clientCache cacheControlMode="UseMaxAge"
                   cacheControlMaxAge="365.00:00:00" cacheControlCustom="public" />
    </staticContent> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T06:09:39.260

好的好Q，我简单的测试你的问题。请试试这个逻辑：

```
 public HttpResponseMessage Get(){

         var request=Request.CreateResponse(HttpStatusCode.OK);
         request.Content.Headers.Add("Content-Type", "application/x-gzip");
         request.Content.Headers.Add("Content-Encoding", "gzip");

    //TODO:Add your logic here...

         return request;
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-17T09:06:00.517

要正确获取 IIS 上的 JavaScript 文件并使用 GZip 编码进行压缩，请将以下内容放入您的**web.config**中。

```
 <staticContent>

      <remove fileExtension=".js" />
      <mimeMap fileExtension=".js" mimeType="text/javascript" />

      <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="365.00:00:00" />
    </staticContent>

    <urlCompression doDynamicCompression="true" dynamicCompressionBeforeCache="true" />
    <httpCompression noCompressionForHttp10="false" noCompressionForProxies="false" dynamicCompressionDisableCpuUsage="93" dynamicCompressionEnableCpuUsage="93" staticCompressionDisableCpuUsage="99" staticCompressionEnableCpuUsage="99">
      <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll" staticCompressionLevel="9" dynamicCompressionLevel="4" />
    </httpCompression>
</system.webServer> 
```

然后在**MIME 类型中的 ISS 上**

![在此处输入图像描述](../Images/ba33f0e4b5887a983ceaaa3ee52e8954.png)

将**application/x-javascript**更改为**text/javascript**

![在此处输入图像描述](../Images/6eec028d52ecd36eea36845499487bec.png)

您现在将在 DevTools 中看到 JS 文件在 Content Encoding 列中使用**gzip提供。**

![在此处输入图像描述](../Images/cec5021172ea7557eadea48d4fd199e5.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T21:36:47.893

我认为 IIS 动态内容压缩至少*应该*负责 gzip 压缩，甚至可能为您处理所有这些问题，您是否尝试过此功能？

[这篇 msdn 文章可能会有所帮助](http://technet.microsoft.com/en-us/library/cc753681%28v=ws.10%29.aspx)

# python - 如何比较python字典中的项目

> ID：12138338
> 
> 赞同：-2
> 
> 时间：2012-08-27T08:09:43.370
> 
> 标签：python, dictionary

假设我在字典中有一本字典，如下所示：

```
Allusers={
User1: {'Film1': Vote1, 'Film2': Vote2}
User2: {'Film1': Vote1, 'Film2'; Vote2}
...

} 
```

我需要逻辑/算法/公式来将每个人与其他人进行一次比较。我需要如何解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T08:17:50.967

```
from itertools import combinations

Allusers={
    'User1': {'Film1': 'Vote1', 'Film2': 'Vote2'},
    'User2': {'Film1': 'Vote1', 'Film2': 'Vote2'}
}

for comb in combinations(Allusers, 2):
    if Allusers[comb[0]] == Allusers[comb[1]]:
        print '{0} is same with {1}'.format(comb[0], comb[1]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:17:58.503

就像是 ：

```
users={
User1: {'Film1': Vote1, 'Film2': Vote2}
User2: {'Film1': Vote1, 'Film2'; Vote2}
User3: {'Film1': Vote1, 'Film2'; Vote2}
User4: {'Film1': Vote1, 'Film2'; Vote2}
}
keys=list(users)
for i,x in enumerate(keys):
    for y in keys[i+1:]:
        #compare users[x] and users[y] here 
```

在第一个循环`User1`中将与用户进行比较，`2,3,4`在下一个循环`User2`中将与用户 3,4 进行比较，因为他已经`User1`在第一个循环中进行了比较。

# python - 从存储在 NumPy ndarrays 中的图像中查找特定 (R,G,B) 颜色值的 (x,y) 索引

> ID：12138339
> 
> 赞同：15
> 
> 时间：2012-08-27T08:09:44.937
> 
> 标签：python, image, multidimensional-array, numpy, rgb

我有一个存储在 numpy 数组中的图像，由以下结果产生`imread()`：

```
>>> ndim
array([[[  0,   0,   0],
        [  4,   0,   0],
        [  8,   0,   0],
        ..., 
        [247,   0,  28],
        [251,   0,  28],
        [255,   0,  28]],

       [[  0, 255, 227],
        [  4, 255, 227],
        [  8, 255, 227],
        ..., 
        [247, 255, 255],
        [251, 255, 255],
        [255, 255, 255]]], dtype=uint8)
>>> ndim.shape
(512, 512, 3) 
```

我想有效地找到具有特定颜色值的像素的（x，y）坐标（或坐标），例如

```
>>> c
array([ 32,  32, 109], dtype=uint8)

>>> ndim[200,200]
array([ 32,  32, 109], dtype=uint8)

>>> ndim.T[0, 200, 200]
32
>>> ndim.T[1, 200, 200]
32
>>> ndim.T[2, 200, 200]
109 
```

...在这种情况下，我知道 (200, 200) 处的像素具有 RGB 值 (32, 32, 109) - 我可以对此进行测试。

我想要做的是查询 ndarray 的像素值并取回坐标。在上述情况下，假定函数`find_pixel(c)`将返回 (200, 200)。

理想情况下，此`find_pixel()`函数将返回坐标元组列表，而不仅仅是它找到的第一个值。

我看过 numpy 的“花式索引”，这让我非常困惑……我想弄清楚这一点的大部分尝试都过于紧张和不必要的巴洛克式。

我确信这里有一个非常简单的方法可以忽略。最好的方法是什么 - 有没有比我概述的更好的机制来获得这些值？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-27T09:01:31.930

对于一些数组颜色数组`a`和颜色元组`c`：

```
indices = numpy.where(numpy.all(a == c, axis=-1)) 
```

`indices`现在应该是数组的 2 元组，其中第一个包含第一个维度中的索引，第二个包含对应于像素值的第二个维度中的索引`c`。

如果您需要将其作为坐标元组列表，请使用 zip：

```
coords = zip(indices[0], indices[1]) 
```

例如：

```
import numpy
a = numpy.zeros((4, 4, 3), 'int')    

for n in range(4):
    for m in range(4):
        a[n, m, :] = n + m
        if (n + m) == 4:
            print n, m

c = (4, 4, 4)
indices = numpy.where(numpy.all(a == c, axis=-1))
print indices
print zip(indices[0], indices[1]) 
```

将输出：

```
1 3
2 2
3 1
(array([1, 2, 3]), array([3, 2, 1]))
[(1, 3), (2, 2), (3, 1)] 
```

它对应于所有值为 (4, 4, 4) 的像素。

# jakarta-ee - 在 @SessionScoped 中使用 ejb 计时器

> ID：12138343
> 
> 赞同：2
> 
> 时间：2012-08-27T08:10:07.123
> 
> 标签：jakarta-ee, cdi, ejb-3.1

我正在撰写一篇包含 Java EE 6 项目的论文。我需要设置一个关于餐厅服务的示例项目，该服务需要在一小时内（从电话开始）送餐。该项目将使用 CDI Api，尽管它可能适合 BPM 框架，但我只需要使用普通的 Java EE 6 Api。

我一直在考虑几种可行的选择，但唯一符合我要求的选择是使用 @SessionScoped Bean 支持用户请求。然后从那里启动一个 EJB 计时器，它将在我们的时间超时（延迟交付），除非它被用户取消（及时交付）。

我担心的是：我可以在 @SessionScoped Bean 和 EJB Timer 之间建立 1:1 的关系吗？换句话说，EJB 定时器应该只与用户相关联，如果定时器到期需要通知它。如果我在一个好的轨道上或者我应该重新考虑架构，你能建议我吗？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T11:36:20.840

关于您关于 1:1 映射的问题，规范说明如下：

> 对于自动创建的定时器，timeout 方法可以是带有 Schedule 注解的方法。可以为无状态会话 bean、单例会话 bean、消息驱动 bean 和 2.1 实体 bean [94] 创建计时器。无法为有状态会话 bean [95] 创建计时器...

此外，“@SessionScoped”将您的 POJO 转换为 CDI 托管 bean，而 Timer 服务是 EJB 功能。

但是，假设您可以访问数据库，我建议您采用以下解决方案：一旦客户订购了东西，就在数据库中创建一个条目，包括“创建”时间戳。配置一个调度程序/计时器，每分钟轮询该表以验证（通过检查时间戳列）是否有任何用户需要得到通知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-03T05:42:23.400

我认为你只需要一个设计模式观察者的实现

CDI 通过使用 @Observes 提供此服务，请查看此示例[http://www.adam-bien.com/roller/abien/entry/java_ee_6_observer_with](http://www.adam-bien.com/roller/abien/entry/java_ee_6_observer_with)

使用您的客户数据触发事件，您可以调用 @asynchronous 服务在一小时后进行处理，以防丢失数据或发生异常，尝试将不成功的操作保留在数据库中

@Schedule 服务可用于扫描所有不成功的操作并尝试再次进行处理

或者..您能否尝试查看 JMS 解决方案也提供什么

希望我明白了..

# php - PHP的curl没有将数据发布到服务器

> ID：12138347
> 
> 赞同：1
> 
> 时间：2012-08-27T08:10:16.023
> 
> 标签：php, curl

我写了一个小应用程序，不久前使用 curl 并且正在工作。今天我尝试运行它，但它不工作。

我使用 curl 将数据发布到位于外部服务器上的另一个页面。Get 有效，但帖子无效。

**更新1：**

我已将错误缩小到有一个名为“SOME_KEY”的条目并且在帖子数组中具有值“'@C:/wamp/www/name.pdf'”会导致这个问题。

@symbole怎么会引起问题！！！我正在尝试将文件上传到服务器

**解决了**

检查下面的答案。

**原始条目**

我当前的卷曲选项

```
 $curl_options = array(
        CURLOPT_RETURNTRANSFER => true,                 // Return web page      
        CURLOPT_HEADER         => false,                // Don't return headers
        CURLOPT_FOLLOWLOCATION => false,                // Follow redirects
        CURLOPT_ENCODING       => "",                   // Handle all encodings
        CURLOPT_AUTOREFERER    => false,                // Set referer on redirect
        CURLOPT_CONNECTTIMEOUT => 120,                  // Timeout on connect
        CURLOPT_TIMEOUT        => 120,                  // Timeout on response
        CURLOPT_MAXREDIRS      => 0,                    // Stop after 10 redirects
        CURLOPT_USERAGENT      => "regify connector",   // Who am I? FIREFOX, IE, OPERA, CHROME, SPIDER, SEARCH BOT...etc.
    ); 
```

发布数据的函数：

```
function makePostRequest($url, $fields  ){

        //Create the options
        //global $curl_options;
        $curl_options[CURLOPT_URL       ] = $url;
        $curl_options[CURLOPT_POST      ] = count($fields);
        $curl_options[CURLOPT_POSTFIELDS] = $fields;

        $ch = curl_init();
        curl_setopt_array($ch, $curl_options);

        $content = curl_exec ($ch);
        $err     = curl_errno($ch);

        curl_close($ch);    
        return ($err == 0)?$content:false;
    } 
```

PHP 的 getallheader 正在返回

```
array
  'Host' => string 'localhost' (length=9)
  'Accept' => string '*/*' (length=3)
  'Content-Length' => string '16632433' (length=8)
  'Expect' => string '100-continue' (length=12)
  'Content-Type' => string 'multipart/form-data; boundary=----------------------------93ac4fed717b' (length=70) 
```

CURL 的 curl_getinfo 函数正在返回：

```
 array
  'url' => string 'http://localhost/archieve/index.php' (length=35)
  'content_type' => string 'application/json' (length=16)
  'http_code' => int 200
  'header_size' => int 281
  'request_size' => int 263
  'filetime' => int -1
  'ssl_verify_result' => int 0
  'redirect_count' => int 0
  'total_time' => float 0.125
  'namelookup_time' => float 0
  'connect_time' => float 0
  'pretransfer_time' => float 0
  'size_upload' => float 16632433
  'size_download' => float 18
  'speed_download' => float 144
  'speed_upload' => float 133059464
  'download_content_length' => float 18
  'upload_content_length' => float 16632433
  'starttransfer_time' => float 0.015
  'redirect_time' => float 0
  'certinfo' => 
    array
      empty 
```

这个问题可能是由内容类型引起的吗？我在 stackoverflow 上读到它建议 CURL 足够聪明，可以自己设置这个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:32:37.160

我想到了。代码曾经并且仍在按应有的方式工作。我相信由于权限，Curl 无法发布 PDF 文件，因此它根本没有发布。

# objective-c - 是否可以将结果存储在 vDSP 框架中的输入向量之一中

> ID：12138350
> 
> 赞同：6
> 
> 时间：2012-08-27T08:10:22.527
> 
> 标签：objective-c, accelerate-framework, vdsp

在 Accelerate Framework 的 vDSP 函数中，所有函数都需要您输入结果向量。如果我不再需要原始输入向量中的任何内容，将输入向量（或输入向量之一）作为结果向量传递是否正确？

我的意思的例子：

```
vDSP_vsadd(input_vector,1,scalar_addition,input_vector,1,length); 
```

这将采用 input_vector 并将 scalar_addition 添加到所有元素。结果将存储在 input_vector 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T14:24:49.577

vDSP 中的简单向量操作都可以就地正常工作（只要它们*严格*就地；例如，您不能`&input_vector[length/2]`用于输出并期望获得有意义的结果）。事实上，就地使用它们通常会提供更好的性能，因为它可以减少缓存压力。

一些更复杂的 vDSP 操作不支持带有一个或多个参数的就地操作；这应该在 vDSP 参考指南中提及。

# c# - 每组最高： Take(1) 有效，但 FirstOrDefault() 无效？

> ID：12138353
> 
> 赞同：10
> 
> 时间：2012-08-27T08:10:37.403
> 
> 标签：c#, .net, entity-framework, entity-framework-4.1, dbcontext

我正在使用 EF ~~4.3.1~~ ...刚刚升级到 4.4（问题仍然存在），并使用*EF 4.x DbContext Generator*生成的数据库优先 POCO 实体。我有以下名为“Wiki”的数据库（用于创建表和数据的 SQL 脚本在[此处](https://gist.github.com/3488126)）：

![Author(ID, Name) <-- Article(AuthorID, Title, Revision, CreatedUTC, Body)](../Images/410138db61169043cc4b838c80e45304.png)

编辑 wiki 文章时，不是更新其记录，而是将新修订作为新记录插入，修订计数器增加。在我的数据库中有一个作者，“John Doe”，它有两篇文章，“文章 A”和“文章 B”，其中文章 A 有两个版本（1 和 2），但文章 B 只有一个版本。

![在此处输入图像描述](../Images/42b3e5a04848a37e37f685a72c87161a.png)

我禁用了延迟加载和代理创建（[这](https://dl.dropbox.com/u/1430634/EF431TopPerGroupRepro.zip)是我与 LINQPad 一起使用的示例解决方案）。我想获取由名字以“John”开头的人创建的文章的最新版本，所以我执行以下查询：

```
Authors.Where(au => au.Name.StartsWith("John"))
       .Select(au => au.Articles.GroupBy(ar => ar.Title)
                                .Select(g => g.OrderByDescending(ar => ar.Revision)
                                              .FirstOrDefault())) 
```

这会产生错误的结果，并且只检索第一篇文章：

![在此处输入图像描述](../Images/423dfeaa20f744a7e6e9b71f9c57eec3.png)

通过替换为以下查询中的结果，对`.FirstOrDefault()`查询进行小的更改：`.Take(1)`

```
Authors.Where(au => au.Name.StartsWith("John"))
       .Select(au => au.Articles.GroupBy(ar => ar.Title)
                                .Select(g => g.OrderByDescending(ar => ar.Revision)
                                              .Take(1))) 
```

令人惊讶的是，这个查询产生了正确的结果（尽管有更多的嵌套）：

![在此处输入图像描述](../Images/0ae52d12532c90f0b93d63c871140b8f.png)

我假设 EF 生成的 SQL 查询略有不同，一个只返回一篇文章的最新版本，另一个返回所有文章的最新版本。两个查询生成的丑陋 SQL 仅略有不同（比较：[.FirstOrDefault() 的 SQL 与 .Take(](https://gist.github.com/3488271) 1 [) 的 SQL](https://gist.github.com/3488289)），**但它们都返回正确的结果：**

`.FirstOrDefault()`

![在此处输入图像描述](../Images/2767a82eeab1bcd8d2d9fce8bedfdaf3.png)

`.Take(1)`（为了便于比较，重新排列了列顺序）

![在此处输入图像描述](../Images/b785db015116a4a692c55aca150342ab.png)

因此，罪魁祸首不是生成的 SQL，而是 EF 对结果的解释。为什么 EF 将第一个结果解释为单个`Article`实例，而将第二个结果解释为两个`Article`实例？为什么第一个查询返回不正确的结果？

**编辑：**我已经打开了关于 Connect的[错误报告。](https://connect.microsoft.com/VisualStudio/feedback/details/759813)如果您认为解决此问题很重要，请点赞。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T10:01:46.683

看： http:
[//msdn.microsoft.com/en-us/library/system.linq.enumerable.firstordefault](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.firstordefault)
[http://msdn.microsoft.com/en-us/library/bb503062.aspx](http://msdn.microsoft.com/en-us/library/bb503062.aspx)
有很好的解释Take是如何工作的（懒惰的，早期的休息），但没有FirstOrDefault..更重要的是，看到Take的解释，我“猜测”它的查询可能会由于*试图模仿懒惰而减少行数SQL中的评估*，您的情况表明它是另一种方式！我不明白你为什么要观察这种效果。

它可能只是特定于实现的.. 对我来说， Take(1) 和 FirstOrDefault 可能看起来像`TOP 1`，但是从功能的角度来看，它们的“惰性”可能略有不同：一个函数可以评估所有元素并首先返回, second 可以先评估然后返回并中断评估。这只是对可能发生的事情的“提示”。对我来说，这是胡说八道，因为我没有看到关于这个主题的文档，而且总的来说，我确信 Take/FirstOrDefault 都是惰性的，应该只评估前 N 个元素。

在查询的第一部分， group.Select+orderBy+TOP1 是一个“明确的指示”，表明您对每组列中具有最高“值”的单行感兴趣-但实际上，[没有简单的方法在 SQL 中声明这一点](http://sqlblog.com/blogs/adam_machanic/archive/2008/02/08/who-s-on-first-solving-the-top-per-group-problem-part-1-technique.aspx)，因此对于 SQL 引擎和 EF 引擎来说，指示都不是那么清楚。

至于我，您呈现的行为可能表明 FirstOrDefault 被 EF 翻译器向上“传播”了一层内部查询太多，就像 Articles.GroupBy() 一样（您确定您没有放错括号吗？ OrderBy? :) ) - 那将是一个错误。

但 -

由于差异必须在含义和/或执行顺序的某个地方，让我们看看 EF 可以猜测您查询的含义。作者实体如何获得其文章？EF 是如何知道与您的作者绑定的文章？当然，nav 属性。但是只有部分文章被预加载是怎么发生的呢？看起来很简单——查询返回一些带有列的结果，列描述了整个作者和整篇文章，所以让我们将它们映射到作者和文章，并让它们通过导航键相互匹配。好的。但是将复杂的过滤添加到那个..？

使用像按日期这样的简单过滤器，它是一个**子查询**对于所有文章，按日期截断行，并消耗所有行。但是如何编写一个复杂的查询，该查询将使用多个中间排序并生成多个文章子集？哪个子集应该绑定到结果作者？所有人的联合？这将使所有顶级 where-like 子句无效。他们第一个？废话，第一个子查询往往是中间帮手。因此，很可能，当一个查询被视为一组具有相似结构的子查询时，所有这些子查询都可以作为部分加载导航属性的数据源，那么很可能只有最后一个子查询被视为实际结果。这都是抽象的想法，但它让我注意到 Take() 与 FirstOrDefault 以及它们的整体 Join 与 LeftJoin 含义实际上可以改变结果集扫描的顺序，并且，不知何故，`for each author * for each title-group * select top one and check count and substitue for null`这曾多次为每位作者生成少量的单项文章集，因此产生了一个结果——仅来自上次访问的标题分组。

这是我能想到的唯一解释，除了明显的“BUG！” 喊。作为 LINQ 用户，对我来说，它仍然是一个错误。要么根本不应该进行这种优化，要么它也应该包括 FirstOrDef - 因为它与 Take(1).DefaultIfEmpty() 相同。嘿，顺便说一句 - 你试过吗？正如我所说，由于 JOIN/LEFTJOIN 含义，Take(1) 与 FirstOrDefault 不同 - 但 Take(1).DefaultIfEmpty() 实际上在语义上是相同的。看看它在 SQL 中产生什么 SQL 查询以及在 EF 层中产生什么结果可能会很有趣。

我不得不承认，部分加载中相关实体的选择对我来说从来都不是很清楚，而且我实际上**并没有像往常一样使用部分加载**很长时间我陈述了查询，以便明确定义结果和分组(*).. 因此，我可能只是忘记了其内部工作的一些关键方面/规则/定义，也许，即。它实际上是从结果集中选择每个相关记录（不仅仅是我现在描述的最后一个子集合）。如果我忘记了什么，我刚才描述的一切显然都是错误的。

（*）在您的情况下，我也会将 Article.AuthorID 设为导航属性（公共 Author Author 已设置），然后将查询重写为更扁平/流水线，例如：

```
var aths = db.Articles
              .GroupBy(ar => new {ar.Author, ar.Title})
              .Take(10)
              .Select(grp => new {grp.Key.Author, Arts = grp.OrderByDescending(ar => ar.Revision).Take(1)} ) 
```

然后分别用作者和艺术对填充视图，而不是尝试部分填充作者并仅使用作者。顺便提一句。我没有针对 EF 和 SServer 对其进行测试，它只是在 JOIN 的情况下“颠倒查询”和“展平”子查询的一个示例，并且对于 LEFTJOIN 不可用，所以如果您还想查看没有文章的作者，它必须像您的原始查询一样从作者开始..

我希望这些松散的想法将有助于找到“为什么”..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T17:59:53.950

该`FirstOrDefault()`方法是即时的，而另一个 ( `Take(int)`) 被推迟到执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T16:44:36.140

正如在上一个答案中一样，我试图对这个问题进行推理 - 我辞职了，我正在写另一个:) 再看一遍后，我认为这是一个错误。我认为您应该使用 Take 并将案例发布到 Microsoft 的 Connect 并查看他们对此有何评论。

这是我发现的：[http ://connect.microsoft.com/VisualStudio/feedback/details/658392/linq-to-entities-orderby-is-lost-when-followed-by-firstordefault](http://connect.microsoft.com/VisualStudio/feedback/details/658392/linq-to-entities-orderby-is-lost-when-followed-by-firstordefault)

'Microsoft 2011-09-22 at 16:07' 的回复详细描述了 EF 内部的一些优化机制。在一些地方，他们说重新排序skip/take/orderby，有时逻辑无法识别某些构造。我认为您刚刚偶然发现了另一个尚未在“orderby提升”中正确分支的极端案例。总而言之，在生成的 SQL 中，您在 order-by 中有 select-top-1，并且损坏看起来就像将“top 1”提升得太高了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-02T18:31:28.887

今天我才发现如果在排序子句中，它`q.OrderBy(a=>a.Customer.FirstOrDefault().Name)`不会命中数据库。`FirstOrDefault()`

# java - 如何直接从java中的提琴手工具检索请求？

> ID：12138354
> 
> 赞同：-2
> 
> 时间：2012-08-27T08:10:41.670
> 
> 标签：java, fiddler

我想检索流经提琴手工具的请求数据（即 http 请求）。那么如何以编程方式检索 java 中的数据？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:07:52.717

它的 .NET 代码可用，因此您可以查看以下链接：

[http://fiddler2.com/fiddler/dev/IFiddlerExtension.asp](http://fiddler2.com/fiddler/dev/IFiddlerExtension.asp)

[http://fiddler2.com/Fiddler/dev/](http://fiddler2.com/Fiddler/dev/)

这可能对您有帮助[https://stackoverflow.com/questions/5427533/is-there-any-java-open-source-implementation-like-fiddler](https://stackoverflow.com/questions/5427533/is-there-any-java-open-source-implementation-like-fiddler)

# java - 如何使用 Java 调用 ILOG JRules 业务规则？

> ID：12138359
> 
> 赞同：2
> 
> 时间：2012-08-27T08:11:12.443
> 
> 标签：java, ilog

我已经使用 ILOG Studio 制定了业务规则并将业务规则部署到 RES。现在我想在 java 项目中使用该业务规则。

使用 Java 调用/使用业务规则的方法有哪些，我需要在 java 项目中导入哪些库？请提供一些链接或示例以调用业务规则。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:23:24.873

有几种使用 Java 的消费方式。最简单和推荐的方法是......

1.  使用 IlrPOJOSessionFactory 在 J2EE 环境中调用规则。[此链接](http://pic.dhe.ibm.com/infocenter/brjrules/v7r1/index.jsp?topic=/com.ibm.websphere.ilog.jrules.doc/html/api/html/ilog/rules/res/session/IlrPOJOSessionFactory.html)中提供了所有详细信息和代码示例。

2.  使用 IlrJ2SESessionFactory 在 J2SE 环境中调用规则。[此链接](http://pic.dhe.ibm.com/infocenter/brjrules/v7r1/index.jsp?topic=/com.ibm.websphere.ilog.jrules.doc/html/api/html/ilog/rules/res/session/IlrJ2SESessionFactory.html)中提供了所有详细信息和代码示例。

需要导入的Jar文件如下。

1.  jrules-engine.jar
2.  jrules-res-XXXX-session-java.jar（XXXX - 代表您正在使用的 ILOG 的版本）
3.  jrules-res-execution.jar
4.  jrules-res-session-XXXX.jar (XXXX - 代表你正在使用的应用服务器 websphere/weblogic 等..)

Spring 框架还提供了一个 JSR 94 模板，用于从 J2SE 和 J2EE 组件调用部署在 RES 中的业务规则。

# javascript - 谷歌应用脚 本 html 服务和加载谷歌地图 javascript api V3

> ID：12138360
> 
> 赞同：0
> 
> 时间：2012-08-27T08:11:18.663
> 
> 标签：javascript, html, service, maps, google-apps-script

页面上的这个 javascript 代码不会显示地图。有什么建议么？是 Caja 消毒剂阻止了执行吗？谢谢！心电图

```
 <!DOCTYPE html>
    \\To load the APIs. I have found this code on https://developers.google.com/loader/;
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
   \\next load then specific API module with parameters and Callback
    function loadMaps(){
        google.load("maps", "3",{"callback" : mapsLoaded()}, sensor=false, key="AIzaSyBfB1qRhJJiHGFUNtI87yfTrVLx-C8YYp4");
      }
    </script>
    <script type="text/javascript"> 
      var geocoder;
      var map;
      function mapsLoaded() {
    //this is how far the code is executed;
        alert("br");
        var latlng = new google.maps.LatLng(52.2989, 4.9219);
    //this alert does not show up;
        alert(latlng);
        var mapOptions = {
          zoom: 8,
          center: latlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }
            map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
      }

    </script> 

    <body onload="loadMaps()">
      <div id="map_canvas" style="width: 100%; height: 200px;"></div>
    </body> 
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:36:33.743

HtmlService/Caja 尚不支持 Google API。我们正在努力对通行证进行消毒。

# git - 我怎样才能回到我原来的 git 分支

> ID：12138362
> 
> 赞同：1
> 
> 时间：2012-08-27T08:11:21.000
> 
> 标签：git

我有一个 git 存储库。当我做'git branch'时，它说

```
 $ git branch
* com-2.1-SS 
```

然后我做'git log'，我得到了我的提交列表

```
$ git log
commit ff878926b78614e8bf6af161da06070618e9ff6b

commit 3ffda8cec60a74a718fb25fb7a9fe4b3c4381137

commit bf6bb3427d8031d8e172c3b8b7909c8580e929cd 
```

所以我想查看我的存储库到 3ffda8cec。所以我做了'git checkout 3ffda8cec'。

到目前为止，一切都很好。它有效，我得到我想要的。

但我的问题是我怎样才能回到 com-2.1-SS？即扭转我'git checkout 3ffda8cec'的事实

当我做'git branch'时，它说

```
$ git branch
* (no branch) 
```

当我做'git checkout git checkout com-2.1-SS

```
error: pathspec 'com-2.1-SS' did not match any file(s) known to git. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T08:19:23.597

[git reflog](http://www.kernel.org/pub/software/scm/git/docs/git-reflog.html)将向您显示分支提示的不同值，您可以检查它以返回到以前的状态。

你的情况更容易，因为你现在仍然知道`com-2.1-SS`之前的 sha1`git checkout`是`ff878926b78614e8bf6af161da06070618e9ff6b`（这基本上是`git reflog`做什么的）所以你可以直接做：

```
git checkout ff878926b78614e8bf6af161da06070618e9ff6b 
```

虽然我不明白你的描述是什么时候你的分支被删除了，你可以在结帐后重新创建你的分支：

```
git checkout -b com-2.1-SS 
```

# c - 打印指针值的分段错误

> ID：12138366
> 
> 赞同：0
> 
> 时间：2012-08-27T08:11:33.457
> 
> 标签：c

当我尝试打印`v`. 我试图理解为什么。有什么建议么？

```
#include <stdio.h>

int main() {

    int v[5000000];
    printf("\n\nv = %p", v);
     return 0;
} 
```

**编辑**：如果不是分配 5000000 个元素，而是分配 500000 个或更少的元素，则程序不会出现段错误。

**编辑（2）**：增加堆栈大小解决了这个问题。在 Linux 上，我在阅读 stephane-rouberol 的答案后增加了堆栈大小（使用`ulimit -s <some_large_number>`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:13:46.980

恭喜，你有*堆栈溢出*:)

找到一种方法来增加堆栈的大小或只是动态分配数组：

```
int* v = malloc( 5000000 * sizeof *v);

/* do something */

free( v ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:18:04.820

堆栈溢出 ！看看`ulimit -s`你是否使用`bash`或`limit stacksize`如果`[t]csh`

或者，您可以使用堆而不是使用堆栈`malloc`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:15:16.960

你已经有了原因。对于将要分配`5000000`的程序堆栈来说太大而无法处理。`v`您应该使用动态分配它`malloc`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T08:17:27.803

程序的堆栈大小取决于编译器开关，并且默认值因操作系统而异。在您的情况下，听起来好像堆栈太小而无法容纳这么大的数字。查看您的编译器（链接器）开关以增加堆栈大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T08:17:38.940

尝试

```
printf("\n\nv = %p", (void *)v); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T08:43:45.330

正如其他人所说，堆栈溢出。要了解代码实际崩溃的原因和时间，以下是两行之间的内容：

*   尝试在堆栈上分配 5000000 * sizeof(int) 。假设这是 20MB。
*   编译器（与链接器相反）很可能不知道堆栈有多大，因此它愉快地假设占用了 20MB 的堆栈。
*   调用 printf() 时，指针地址在堆栈上传递给函数。编译器将尝试将该指针地址（4 字节）压入堆栈位置 0 + 20000004。这超出了有效内存，程序将在此处崩溃。
*   如果编译器对 printf() 使用了另一种调用约定，例如通过在 CPU 寄存器中传递指针地址，程序就不会崩溃，直到你真正尝试从那个巨大的数组中读/写。

# iphone - 使用 iOS 版 Facebook SDK 3.0 在朋友墙上发帖

> ID：12138367
> 
> 赞同：0
> 
> 时间：2012-08-27T08:11:38.970
> 
> 标签：iphone, ios, facebook

我想使用 facebook sdk 3.0 在我的朋友墙上发布消息。所以请任何人都可以建议我。

我也试过[这个](https://stackoverflow.com/questions/11050070/using-the-facebook-ios-sdk-to-post-to-friends-wall)

但它对我不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:56:53.263

[https://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/](https://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/)

您需要将不推荐使用的标头导入您的项目。它们位于 Documents/FacebookSDK/FacebookSDK.framework/Versions/A/DeprecatedHeaders。导入所有这些文件后，您可以创建一个 facebook 对象并执行其他答案所说的操作。FB 3.0 SDK 不适用于使用 FBDialog 的任何旧功能（发送应用程序请求、发布到您的墙上等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:33:38.270

我认为这段代码可能有效。

```
NSMutableDictionary *params;
params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               userID,  @"to",
                               msg,@"message",
                               theUrl, @"picture",
                               appLink, @"link",
                               nil];

[facebook_ dialog:@"feed"
        andParams:params
      andDelegate:self]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:37:04.230

对于 Facebook SDK 3.0：

我正在使用以下 FBRequestConnection 块在我的 facebook 朋友墙上分享我的应用程序，并使用给定的 facebookid 作为方法参数。如果您想在自己的墙上分享相同的内容，只需更改

> ```
> [NSString stringWithFormat:@"%@/feed",friendId] 
> ```

和

> ```
> @"me/feed" 
> ```

```
-(void)postToFriendWall:(NSString*)friendId{

 NSString *pictureUrl = [NSString stringWithFormat:@"http://......."];

NSMutableDictionary *postParams = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                  @"Name", @"name",
                                   @"www.mylink.com", @"link",
                                   @"Caption Text", @"caption",
                                   @"Description Text", @"description",
                                   @"Post Message", @"message",
                                   pictureUrl, @"picture",
                                   nil];

[FBRequestConnection
 startWithGraphPath:[NSString stringWithFormat:@"%@/feed",friendId]
 parameters:postParams
 HTTPMethod:@"POST"
 completionHandler:^(FBRequestConnection *connection,
                     id result,
                     NSError *error) {

     if (!error) {

         UIAlertView *postSentAlert = [[UIAlertView alloc] initWithTitle:@"Facebook"
                                                                 message:NSLocalizedStringFromTable(@"kFacebookPostAlertTitle", @"ContactList", "")
                                                                delegate:nil
                                                       cancelButtonTitle:NSLocalizedStringFromTable(@"kOK", @"ApplicationStrings", "")
                                                       otherButtonTitles:nil];

         [postSentAlert show];

     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T08:42:31.697

```
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       @"facebook key", @"app_id",

                                       @"http://developers.facebook.com/docs/reference/dialogs/", @"link",
                                       @"image link", @"picture",
                                       @" ", @"description",
                                       @"", @"name",
                                       @" ", @"caption",
                                       nil];

        [_facebook dialog:@"feed" andParams:params andDelegate:self];

        [_facebook logout]; 
```

您无需进行 facebook 身份验证。如果您未登录，则首先显示登录屏幕，然后显示共享对话框。 [另请参阅](https://stackoverflow.com/questions/11240006/share-an-image-on-fb-wall/12006227#12006227)

# java - 在网格中拖放一列——但在我的 JUnit 测试中没有任何反应

> ID：12138371
> 
> 赞同：0
> 
> 时间：2012-08-27T08:11:48.457
> 
> 标签：java, selenium, drag-and-drop

我想测试 Selenium 拖放网格中的列。

我使用该方法`dragAndDrop(String locator, String movementsString)`，但是当我使用 JUnit 运行测试时没有任何反应。

下面是代码：

```
browser.dragAndDrop ("//col[@id='" + TreeGridHelper.getTreeGridTagId() + 
                        "_head_before_"+ numCol + "']", "850,0"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:59:36.253

最好的办法是切换到**WebDriver**以获得更好的支持和改进的框架。

要使用 WebDriver 拖放 WebElements，您可以使用[本](http://code.google.com/p/selenium/wiki/TipsAndTricks)教程，它并不完美但非常有用

# c# - 如何使用 Math.Round 舍入精确的双精度值

> ID：12138373
> 
> 赞同：1
> 
> 时间：2012-08-27T08:11:53.027
> 
> 标签：c#, double

我想准确地舍入当前它给我的双值......

```
val = 0.01618

Math.Round(val,2) 
```

`0.02`（目前它是这样给的）。

`0.01`（我想要这样）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T08:13:44.327

`Math.Floor()`是你要找的，我想。如果你想四舍五入到两位小数，你可以这样做`Math.Floor(v*100)/100`。我想知道为什么没有`Floor`小数位数的过载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:15:36.413

你想要的是 Math.Floor() 或类似的东西（不要没有 c#，对不起）。这总是四舍五入。Math.Round() 就像[这里](http://en.wikipedia.org/wiki/Rounding)描述的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:58:59.100

您可以使用 Math.Floor 将其设置为您喜欢的值，然后使用 Math.Round 将其设置为 2 位小数，如下所示：

```
// Returns double that is rounded and floored
double GetRoundedFloorNumber(double number, int rounding)
{
    return ((Math.Floor(number * (Math.Pow(10, rounding))) / Math.Pow(10, rounding)));

} 
```

所以调用这个函数应该返回正确的数字：

示例代码：

```
 static void Main(string[] args)
    {
        // Writes 0.016 to the screen
        Console.WriteLine(GetRoundedFloorNumber(0.01618, 3));
        Console.ReadLine();
    }

    static double GetRoundedFloorNumber(double number, int rounding)
    {
        return ((Math.Floor(number * (Math.Pow(10, rounding))) / Math.Pow(10, rounding)));

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T08:27:03.283

这将在您想要的地方四舍五入；

```
Math.Round(val - 0.005, 2) 
```

# php - base64_decode 返回 null

> ID：12138378
> 
> 赞同：2
> 
> 时间：2012-08-27T08:12:13.327
> 
> 标签：php, mysql, base64, apple-push-notifications

好的，所以我在我的应用程序中实现了一些推送通知。我写了一些应该与 MySQL 数据库交互的 PHP。

我想将设备令牌作为 char(64) 存储在 SQL 中，因为我开始相信这很好（我的意思是，它应该在以后以二进制形式发送）。

在 iOS 端，我这样做：

```
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken
{
    NSString *tokenString = [deviceToken base64EncodedString];  
    NSDictionary *jsonDic = [NSDictionary dictionaryWithObjectsAndKeys:tokenString, @"Token", [NSNumber numberWithBool:YES], @"IsiDevice", [NSNumber numberWithBool:YES], @"Active", nil];
    //... http request stuff
    // what might be important is that the POST body is encoded as UTF8 (content-type set appropriately)
} 
```

base64 的东西来自 Matt Gallagher 的 NSData+Base64。现在，在 PHP 端，会发生这种情况：

```
// $tokenEncoded is exactly the same string as I sent from the app (type is string)
$tokenEncoded = $jsonData['Token'];

// $token becomes null! (type is string)
$token = base64_decode($tokenEncoded); 
```

来自 php.net/manual 关于 base64_decode 的返回值：

> 返回原始数据或失败时返回 FALSE。返回的数据可能是二进制的。

现在，与过去两天自学的 PHP 相比，我对 PHP 的了解并不多；但是如果文档说它应该返回 FALSE 或原始数据，我发现返回的值是一个空字符串非常令人困惑（因为我很确定原始数据不是空的！）。

随着 base64_decoded 字符串变为空，当我附加它时，我的整个查询字符串显然也是如此。这并不是一个非常有说服力的查询。

所以我的问题是，我猜：为什么 base64_decode 会返回它不应该返回的东西？一旦我真正从 base64_decode 中获取数据，我应该如何将它包含在查询中，以便它按照我想要的方式存储在数据库中（只是追加？）？

附加信息：我正在使用 Slim 框架。我在一条路线上做这一切。$jsonData 从正文中获取，如下所示：

```
$jsonBody = Slim::getInstance()->request()->getBody();
$jsonData = json_decode($jsonBody, true); 
```

从应用程序中进行了一些额外的测试，以确保我的应用程序对 base 64 的实现不会造成任何影响：

```
DLOG(@"Device token as NSData: %@", deviceToken);
NSString *base64token = [deviceToken base64EncodedString];
DLOG(@"Device token as base64: %@", base64token);
DLOG(@"Device token back from base64: %@", [NSData dataFromBase64String:base64token]); 
```

输出：

```
Device token as NSData: <65625f1c c33b9480 5a46f346 8b2877d0 95e92823 33e88e91 fd3a2abf febad972>

Device token as base64: ZWJfHMM7lIBaRvNGiyh30JXpKCMz6I6R/Toqv/662XI=

Device token back from base64: <65625f1c c33b9480 5a46f346 8b2877d0 95e92823 33e88e91 fd3a2abf febad972> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:18:31.300

请将您的查询字符串写入 php 中的文件，这是最好的方法是测试您的编码令牌值是否正确。例如

```
<?php
$querystring=$_REQUEST['YOUR_QUERY_STRING'];
file_put_contents("query_string.txt",$querystring);
?> 
```

这会将整个查询字符串写入“query_string.txt”文件。然后打开文件。并检查您的 base64 编码值的值。然后复制该值并使用类似的简单程序进行检查。

```
<?php
   echo base64_decode("YOUR_COPIED_VALUE");
// if this works fine there is no problem. you have to go through your php code.
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-28T04:48:43.137

在我的情况下，如果我解码的字符串格式不正确，它将返回 null

```
echo base64_decode("i'm not encode, or wrong format");//null
echo base64_decode('bWVvdyBtZW93');//meow meow 
```

所以再次 **检查你的字符串格式**

但在某些情况下：有人缺少 base64_decode 和 base64_encode，当他们想要对字符串进行编码但他们使用 base64_decode 所以它显示为 null

# scope - 本地 C 指针变量

> ID：12138386
> 
> 赞同：2
> 
> 时间：2012-08-27T08:12:33.747
> 
> 标签：scope, local, heap-memory, stack-memory

假设我定义了以下代码：

```
int *func()
{
    int *p=(int *)malloc(sizeof(int)); // memory is allocated from heap
                                      // which can be accessed anytime.

    return p;    // but we created p which has a local scope and vanishes as
                 //soon as function exits.  
} 
```

那么这个东西是如何工作的呢？p 是一个局部变量（一个指向动态内存地址的指针）。我的意思是来自 HEAP 的内存本身肯定应该继续存在，但是指针变量具有本地范围。我怎么能得到这个指针？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T08:18:08.747

`p`只是一个指针，它指向您分配的内存块。

*分配块*的生命周期超出了函数的末尾。

确实，实际*指针*在返回时会超出范围，但在此之前您已经将它的副本返回给调用者。

> 而且，顺便说一句，您可能指的是`int*`（在这两种情况下）而不是`*int`and `(*int)`。无论如何，您都不想`malloc`在 C 中显式地转换返回值——它可以隐藏细微的错误。C 完全能够将`void *`返回的 by`malloc`转换为任何合适的指针类型。

最好写成这样：

```
int *func (void) {
    int *p = malloc (sizeof (int));
    return p;
} 
```

您还会注意到`void`在函数中使用 来明确声明该函数不带参数。这比仅具有`()`细微的不同（*不确定*数量的参数）更可取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T09:19:10.487

终于在理解之后......我能够得到这个概念。

1.  当我们返回指针 p... 时，在堆栈上分配的 p 肯定会消失。

2.  由于值是通过按值调用机制返回的，并且 p 持有在堆上分配的内存地址。该地址仍然有效并持有对有效内存位置的引用。

3.  因此 p 本身消失了，但是它返回的值被复制到调用函数中的变量中，因此这证明了代码的正确性。

# arrays - 在 bash 中将 argv 条目附加到数组（动态填充数组）

> ID：12138390
> 
> 赞同：5
> 
> 时间：2012-08-27T08:12:57.160
> 
> 标签：arrays, bash, shell, dynamic

我正在尝试将参数列表 ( `"$@"`) 中的内容（不包括`$1`以破折号开头的任何值）附加到 bash 中的数组。

我当前的代码如下，但不能正确运行：

```
BuildTypeList=("armv7" "armv6")
BuildTypeLen=${#BuildTypeList[*]}

while [ "$2" != "-*" -a "$#" -gt 0 ]; do
    BuildTypeList["$BuildTypeLen"] = "$2"
    BuildTypeLen=${#BuildTypeList[*]}
    shift
done 
```

我的意图是`BuildTypeList`在运行时添加内容，而不是将其内容静态定义为源的一部分。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-27T12:40:51.933

使用运算符附加到数组`+=`：

```
ary=( 1 2 3 )
for i in {10..15}; do
    ary+=($i)
done
echo "${ary[@]}" # => 1 2 3 10 11 12 13 14 15 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T12:48:08.020

仅遍历所有参数并有选择地将它们附加到您的列表中会更简单。

```
BuildTypeList=("armv7" "armv6")
first_arg=$1
shift;

for arg in "$@"; do
    [[ $arg != -* ]] && BuildTypeList+=( "$arg" )
done

# If you really need to make sure all the elements
# are shifted out of $@
shift $# 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T08:19:30.047

有很多关于这个主题的手册。例如，参见[http://www.gnu.org/software/bash/manual/html_node/Arrays.html 。](http://www.gnu.org/software/bash/manual/html_node/Arrays.html)或[http://mywiki.wooledge.org/BashGuide/Arrays](http://mywiki.wooledge.org/BashGuide/Arrays)或[http://www.linuxjournal.com/content/bash-arrays](http://www.linuxjournal.com/content/bash-arrays)。

# java - 不幸的是，我的 Android 应用程序已停止

> ID：12138392
> 
> 赞同：0
> 
> 时间：2012-08-27T08:12:59.687
> 
> 标签：java, android, android-emulator

我对 Android 开发非常陌生，所以我很困惑，当我做了一个非常简单的应用程序时，得到了一个非常非描述性的错误：“不幸的是，MyApp 已停止”。没有语法错误。只是这个有点无益的信息。这就是我所做的。

1.  制作了一个新的应用程序项目（Android 4.1）
2.  做了一个按钮 - button1
3.  在活动类中制作了一个 java 方法 - DoStuff()（见下文）
4.  向活动对话框 xml 按钮添加了对 DoStuff 的调用（见下文）
5.  将项目作为 Android 应用程序运行
6.  按下按钮
7.  出现错误

方法：

```
public void DoStuff(){
    TextView tv = (TextView)this.findViewById(R.id.textView1);
    tv.setText("Hello dude");
} 
```

按钮 xml：

```
 <Button
        android:id="@+id/button1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignRight="@+id/textView1"
        android:layout_marginTop="82dp"
        android:text="Button"
        android:onClick="DoStuff" /> 
```

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:22:45.503

我在其他地方找到了解决方案。看来 DoStuff 需要有 View 作为参数，因此看起来像这样：

```
public void DoStuff(View v){
    TextView tv = (TextView)this.findViewById(R.id.textView1);
    tv.setText("Hello dude");
} 
```

为什么，我不知道，但它有效:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:18:08.193

在 Android 中，对于不同类型的事件和动作，各自的监听器都有其指定的函数签名。例如，对于按钮的动作侦听器，函数必须具有以下签名：

```
public void functionName(View view); 
```

在您的布局文件中，对于 Button 的 onClick 属性，您只需要提供函数名称..

其中 View 参数告诉已触发该操作的视图对象（例如，您的案例中的按钮）

# android - 具有多个按钮和多个视频的列表活动

> ID：12138393
> 
> 赞同：0
> 
> 时间：2012-08-27T08:13:02.487
> 
> 标签：android, android-intent

我有一个 listactivity 应用程序，由 5 行组成，每行包含一个 TEXT 和 5 BUTTON，文本和按钮都是可点击的，文本将打开 MyDay 活动，即 textview，当您单击任何按钮时，它必须打开 videoview 屏幕，它的工作正常如下图：

![在此处输入图像描述](../Images/eb61637a03899ecce20730422e3f2b04.png)

**但我的问题是：**

我可以分配五个不同的视频，通过每行的 5 个按钮打开。

我试图为每个按钮设置不同的视频，所以：

**25 个按钮打开 25 个不同的视频**。

我的意思是：

**第一**行的按钮**（一个）**将打开**video_1**

 ******第一**行的按钮**（二）**将打开**video_2**

 ******第一**行的按钮**（三）**将打开**video_3**

 ******第一**行的按钮**（四个）**将打开**video_4**

 ******第一**行的按钮**（五）**将打开**video_5**

 ******第二**行的按钮**（一个）**将打开**video_6**

 ******第二**行的按钮**（两个）**将打开**video_7**

 ****依此类推，直到第五行的最后一个按钮

我做不到。

任何建议将被认真考虑

谢谢

**我的代码：**

**列表按钮类：**

```
 public class ListButtons extends ListActivity {
String classes[] = {"First",  "Second", "Third","Fourth", "Fifth" }; 

@Override
protected void onCreate(Bundle savedInstanceState) {
    this.requestWindowFeature(Window.FEATURE_NO_TITLE); 
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setListAdapter(new MyArrayAdapter(this, classes));  }} 
```

**MyArrayAdapter 类：**

```
 public class MyArrayAdapter extends ArrayAdapter<String> {

private final String[] mClasses;
private Context mContext;
private Typeface tf;
private LayoutInflater mInflater;
private String[] mData = { "button1", "button2", "button3", "button4",
        "button5" };
private int[] ids = { R.id.button1, R.id.button2, R.id.button3,
        R.id.button4, R.id.button5 };
int[][] rowDrawables = { 
        {R.drawable.row_1, R.drawable.row_2, R.drawable.row_3, 
             R.drawable.row_4, R.drawable.row_5},
        {R.drawable.row_6, R.drawable.row_7, R.drawable.row_8, 
             R.drawable.row_9, R.drawable.row_10},
        {R.drawable.row_11, R.drawable.row_12, R.drawable.row_13, 
             R.drawable.row_14, R.drawable.row_15},
        {R.drawable.row_16, R.drawable.row_17, R.drawable.row_18, 
             R.drawable.row_19, R.drawable.row_20},
        {R.drawable.row_21, R.drawable.row_22, R.drawable.row_23, 
             R.drawable.row_24, R.drawable.row_25}};

public MyArrayAdapter(Context context, String[] classes) {
    super(context, 0, classes);
    mClasses = classes;
    mContext = context;
    tf = Typeface.createFromAsset(context.getAssets(), "BFantezy.ttf");
    mInflater = LayoutInflater.from(context);
                              }

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.row, null, true);
        holder = new ViewHolder();
        holder.textView = (TextView) convertView
                .findViewById(R.id.row_label);
        holder.textView.setTypeface(tf);
        holder.bt1 = (Button) convertView.findViewById(R.id.button1);
        holder.bt2 = (Button) convertView.findViewById(R.id.button2);
        holder.bt3 = (Button) convertView.findViewById(R.id.button3);
        holder.bt4 = (Button) convertView.findViewById(R.id.button4);
        holder.bt5 = (Button) convertView.findViewById(R.id.button5);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }
    String s = mClasses[position];
    holder.textView.setText(s);

    int[] rowDr = rowDrawables[position];
    holder.bt1.setBackgroundResource(rowDr[0]);
    holder.bt2.setBackgroundResource(rowDr[1]);
    holder.bt3.setBackgroundResource(rowDr[2]);
    holder.bt4.setBackgroundResource(rowDr[3]);
    holder.bt5.setBackgroundResource(rowDr[4]);

    holder.textView.setTag(Integer.valueOf(position));
    holder.textView.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            Integer pos = (Integer) v.getTag();
            Intent ourIntent = new Intent(mContext, MyDay.class);
            ourIntent.putExtra("cheese", mClasses[pos]);
            mContext.startActivity(ourIntent);
                       }
                       });
    holder.bt1.setOnClickListener(mListener);
    holder.bt2.setOnClickListener(mListener);
    holder.bt3.setOnClickListener(mListener);
    holder.bt4.setOnClickListener(mListener);
    holder.bt5.setOnClickListener(mListener);
    return convertView;
                   }

static class ViewHolder {
    TextView textView;
    Button bt1, bt2, bt3, bt4, bt5;

                     }

private OnClickListener mListener = new OnClickListener() {

    public void onClick(View v) {
        String night = null;
        for (int i = 0; i < ids.length; i++) {
            if (v.getId() == ids[i]) {
                night = mData[i];
                break;
            }
        }
        Intent i = new Intent(mContext, My_videos.class);
        i.putExtra("video", night);
        mContext.startActivity(i);
                                   }
                                   };

                                } 
```

**My_videos 类：**

```
 public class My_videos extends Activity {  
private VideoView vid;  
String night;  
/** Called when the activity is first created. */  
@Override  
public void onCreate(Bundle savedInstanceState) {   
    super.onCreate(savedInstanceState);   
    setContentView(R.layout.video); 

    Bundle bdl = getIntent().getExtras(); 
    night = bdl.getString("video");   
    vid = (VideoView) findViewById(R.id.videoView1); 

    if (night.equalsIgnoreCase("button1")) {    
    vid.setVideoURI(Uri.parse("android.resource://" + getPackageName()
                + "/" + R.raw.video_1));
        vid.setMediaController(new MediaController(My_videos.this));  
        vid.requestFocus();    
        vid.start(); }  

         else if (night.equalsIgnoreCase("button2")) {   
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                + "/" + R.raw.video_2)); 
         vid.setMediaController(new MediaController(My_videos.this));
             vid.requestFocus(); 
             vid.start(); } 

         else if (night.equalsIgnoreCase("button3")) { 
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                + "/" + R.raw.video_3)); 
         vid.setMediaController(new MediaController(My_videos.this));
             vid.requestFocus();
             vid.start();         } 
         else if (night.equalsIgnoreCase("button4")) { 
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                  + "/" + R.raw.video_4)); 
         vid.setMediaController(new MediaController(My_videos.this)); 
             vid.requestFocus();     
             vid.start(); }         
         else if (night.equalsIgnoreCase("button5")) {   
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName()  
                  + "/" + R.raw.video_5)); 
         vid.setMediaController(new MediaController(My_videos.this));   
             vid.requestFocus();      
             vid.start(); }  

                        }} 
```

**更新：**

我尝试修改 My_videos 类，如下面的代码，但它**以每个按钮显示相同的视频**结尾，即 (video_5)。

```
 public class My_videos extends Activity {  
private VideoView vid;  
String night;
private int position;  
/** Called when the activity is first created. */  
@Override  
public void onCreate(Bundle savedInstanceState) {   
    super.onCreate(savedInstanceState);   
    setContentView(R.layout.video); 

    Bundle bdl = getIntent().getExtras(); 
    night = bdl.getString("video");   
    vid = (VideoView) findViewById(R.id.videoView1); 

 if(position == 0){ 
        night.equalsIgnoreCase("button1"); { 
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                     + "/" + R.raw.video_1));
        vid.setMediaController(new MediaController(My_videos.this));
        vid.requestFocus();
        vid.start(); }      
          if(position == 0){ 
       night.equalsIgnoreCase("button2"); { 
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                   + "/" + R.raw.video_2));
        vid.setMediaController(new MediaController(My_videos.this));
        vid.requestFocus();
        vid.start(); }  }            
          if(position == 0){ 
        night.equalsIgnoreCase("button3"); { 
       vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                       + "/" + R.raw.video_3));
         vid.setMediaController(new MediaController(My_videos.this));
         vid.requestFocus();
         vid.start(); } }                
     if(position == 0){ 
      night.equalsIgnoreCase("button4"); { 
         vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                     + "/" + R.raw.video_4));
         vid.setMediaController(new MediaController(My_videos.this));
         vid.requestFocus();
         vid.start(); } }                    
      if(position == 0){ 
        night.equalsIgnoreCase("button5"); { 
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                    + "/" + R.raw.video_5));
         vid.setMediaController(new MediaController(My_videos.this));
         vid.requestFocus();
         vid.start(); }}

else if(position == 1){ 
       night.equalsIgnoreCase("button1"); { 
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName()  
                   + "/" + R.raw.video_6));
         vid.setMediaController(new MediaController(My_videos.this));
         vid.requestFocus();
         vid.start(); } }   
    if(position == 1){ 
         night.equalsIgnoreCase("button2"); { 
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                     + "/" + R.raw.video_7));
         vid.setMediaController(new MediaController(My_videos.this));
         vid.requestFocus();
         vid.start(); } }            
    if(position == 1){ 
        night.equalsIgnoreCase("button3"); { 
         vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                       + "/" + R.raw.video_8));
              vid.setMediaController(new MediaController(My_videos.this));
         vid.requestFocus();
         vid.start(); } }                
    if(position == 1){ 
       night.equalsIgnoreCase("button4"); { 
         vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                     + "/" + R.raw.video_9));
         vid.setMediaController(new MediaController(My_videos.this));
         vid.requestFocus();
         vid.start(); } }                    
    if(position == 1){ 
        night.equalsIgnoreCase("button5"); { 
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                   + "/" + R.raw.video_10));
         vid.setMediaController(new MediaController(My_videos.this));
         vid.requestFocus();
         vid.start(); }}

 else if(position == 2){ 
        night.equalsIgnoreCase("button1"); { 
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                       + "/" + R.raw.video_11));
         vid.setMediaController(new MediaController(My_videos.this));
         vid.requestFocus();
         vid.start(); }     }
    if(position == 2){ 
          night.equalsIgnoreCase("button2"); { 
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                 + "/" + R.raw.video_12));
         vid.setMediaController(new MediaController(My_videos.this));
         vid.requestFocus();
         vid.start(); } }            
    if(position == 2){ 
        night.equalsIgnoreCase("button3"); { 
         vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                      + "/" + R.raw.video_13));
         vid.setMediaController(new MediaController(My_videos.this));
         vid.requestFocus();
         vid.start(); }     }            
    if(position == 2){ 
         night.equalsIgnoreCase("button4"); { 
         vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                     + "/" + R.raw.video_14));
         vid.setMediaController(new MediaController(My_videos.this));
         vid.requestFocus();
         vid.start(); } }                    
     if(position == 2){ 
      night.equalsIgnoreCase("button5"); { 
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                     + "/" + R.raw.video_15));
         vid.setMediaController(new MediaController(My_videos.this));
         vid.requestFocus();
         vid.start(); }}

else if(position == 3){ 
      night.equalsIgnoreCase("button1"); { 
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                    + "/" + R.raw.video_16));
         vid.setMediaController(new MediaController(My_videos.this));
         vid.requestFocus();
         vid.start(); } }   
      if(position == 3){ 
         night.equalsIgnoreCase("button2"); { 
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                      + "/" + R.raw.video_17));

               vid.setMediaController(new MediaController(My_videos.this));
         vid.requestFocus();
         vid.start(); } }            
      if(position == 3){ 
      night.equalsIgnoreCase("button3"); { 
         vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                 + "/" + R.raw.video_18));

             vid.setMediaController(new MediaController(My_videos.this));
         vid.requestFocus();
         vid.start(); } }                
      if(position == 3){ 
      night.equalsIgnoreCase("button4"); { 
         vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                         + "/" + R.raw.video_19));  

         vid.setMediaController(new MediaController(My_videos.this));
         vid.requestFocus();
         vid.start(); } }                
      if(position == 3){ 
      night.equalsIgnoreCase("button5"); { 
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                       + "/" + R.raw.video_20));    

         vid.setMediaController(new MediaController(My_videos.this));
         vid.requestFocus();
         vid.start(); }}             

 else if(position == 4){ 

    night.equalsIgnoreCase("button1"); { 
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                 + "/" + R.raw.video_21));
     vid.setMediaController(new MediaController(My_videos.this));
     vid.requestFocus();
     vid.start(); } }   
    if(position == 4){  

        night.equalsIgnoreCase("button2"); { 

    vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() + "/" 
               + R.raw.video_22));

                   vid.setMediaController(new MediaController(My_videos.this));
             vid.requestFocus();
         vid.start(); } }            
  if(position == 4){    

             night.equalsIgnoreCase("button3"); { 
         vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                    + "/" + R.raw.video_23));
                vid.setMediaController(new MediaController(My_videos.this));
          vid.requestFocus();
          vid.start(); }    }                
 if(position ==4){  
       night.equalsIgnoreCase("button4"); { 

        vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                  + "/" + R.raw.video_24));

         vid.setMediaController(new MediaController(My_videos.this));
         vid.requestFocus();
         vid.start(); } }

  if(position == 4){    
      night.equalsIgnoreCase("button5"); { 
     vid.setVideoURI(Uri.parse("android.resource://" + getPackageName() 
                + "/" + R.raw.video_25));   

           vid.setMediaController(new MediaController(My_videos.this));
         vid.requestFocus();
         vid.start(); }}
              }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:32:01.403

在这个链接[https://gist.github.com/3463215](https://gist.github.com/3463215)我已经发布了一个版本的`My_videos`类，它会做你想要的。基本上，在单击`MyArrayAdapter`a 的类中，`Button`您将发送单击`Intent`该 Button 的行 + 在该行中单击的确切值`Button`。然后在`My_videos`课堂上，您将获得这些数字，并在数组数据结构数组中轻松找到正确的视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:33:10.567

您有 5 个按钮、25 个链接、5 行，如果您设置 5 个侦听器（对于每个按钮 1），您可以像这样选择 uri：

```
button1,button2,button3,button4,button5;

button1.setOnclickListener(new View.onClickListener{
    public void onClick(View v){
        Integer pos = (Integer) v.getTag();
        Intent ourIntent = new Intent(mContext, MyDay.class);
        ourIntent.putExtra("cheese", mClasses[rowPosition*5+buttonPostion]);
        mContext.startActivity(ourIntent);
    }
}); 
```

rowPosition=in`getView(position)`是简单的当前 convertView 编号，按钮位置是您的`v.getTag()`按钮编号，现在是 1。

播种白色，您可以选择 25 个链接：例如，当您在第 2 行获得 onclick 时，第 3 个按钮的链接 ID 将为 2*5+3=13 。因此，在您的第二排中，3 按钮将播放 13 链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:45:26.560

你得到所有的相同的视频，所有的两个都有相同的视频，依此类推，因为你对所有行中的所有的都有相同的 ID，依此类推。

因此，在 onClick 中执行此操作：

```
public void onClick(View v) {
        String night = null;
        int position = yourListView.getPositionForView((View) v.getParent())
        for (int i = 0; i < ids.length; i++) {
            if (v.getId() == ids[i]) {
                night = mData[i];
                break;
            }
        }
} 
```

现在将此职位也添加为您的意图的额外内容。这样您就会知道单击了哪一行，依此类推。****************************

# session - JSF - java 方法：getCurrentUserName

> ID：12138395
> 
> 赞同：1
> 
> 时间：2012-08-27T08:13:03.700
> 
> 标签：session, jsf, jsf-2, facescontext

我可以通过这种方式将用户名从 JSF 传递给托管 bean：

```
<script type="text/javascript" >
  function onLoad(){
    document.getElementById("form:user").value = "#{sessionScope['username']}";}
  window.onload = onLoad;
</script>

<h:inputHidden id="user" value="#{bean.username}"/> 
```

是否可以直接使用Java方法获取它？我试过类似的东西：

```
public String getCurrentUserName()
{
  String name = "";
  FacesContext facesContext = FacesContext.getCurrentInstance();
  ExternalContext externalContext = facesContext.getExternalContext();

  if (externalContext.getUserPrincipal() != null) {
    name = externalContext.getUserPrincipal().getName(); // null
  }
  return name;
} 
```

或者：

```
facesContext.getExternalContext().getRemoteUser();       // null
facesContext.getExternalContext().isUserInRole("pps");   // null 
```

但用户始终为空.. 做错了什么？

**更新**（创建会话容器）：

```
public String login() {
  ...
  FacesContext context = FacesContext.getCurrentInstance();
  session = (HttpSession) context.getExternalContext().getSession(true);
  session.setAttribute("id", user.getId());
  session.setAttribute("username", user.getName());
  ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T11:49:30.643

```
#{sessionScope['username']} 
```

这基本上打印了带有 name 的 session 属性`"username"`。原始 Java 代码中的内容类似于以下内容（如果您熟悉基本的[Servlet API](https://stackoverflow.com/tags/servlets/info)）：

```
response.getWriter().print(session.getAttribute("username")); 
```

如果这部分有效，那么您肯定根本没有使用容器管理的身份验证，因此容器管理的用户主体和用户角色获取器肯定不会返回任何内容。

您可以像访问会话范围的 JSF 托管 bean 一样访问会话属性（它们在幕后即也存储为会话属性！）：

```
@ManagedProperty("#{username}")
private String username; // +setter 
```

或者，当然，笨拙的方式：

```
String username = (String) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("username"); 
```

### 也可以看看：

*   [使用 j_security_check 在 Java EE / JSF 中执行用户身份验证](https://stackoverflow.com/questions/2206911/best-way-for-user-authentication-on-javaee-6-using-jsf-2-0/2207147#2207147)- 展示如何实际使用容器管理的身份验证

* * *

**与具体问题无关**：我非常怀疑那个隐藏的输入字段和那段 JS 的有用性。为什么要将服务器端*已经*存在的变量传递回服务器端？你确定你真的需要这样做吗？

# magento - 如何在管理面板内制作可以 CRUD 自定义表的 Magento 模块？

> ID：12138397
> 
> 赞同：6
> 
> 时间：2012-08-27T08:13:05.663
> 
> 标签：magento

我一直在关注一个教程，但它不适用于最新版本的 Magento 1.7，这里没有人可以帮助我:(所以我决定从头开始问一个新问题，其中没有代码。

我已经知道如何制作 Magento 模块（在某种程度上），因为我为前端制作了一个工作模块，但我需要一个用于后端管理面板，我可以在其中创建、编辑和删除数据库中的自定义表.

从这里开始，假设我已经配置了 config.xml 并加载了一个空白的管理页面，（或者你不能），但是说我只有一个空白的管理页面会更容易，我需要其余的代码填充内容和空逻辑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T00:23:41.567

moduleCreator 提供的完整 CRUD 实现的最佳示例，包括用于创建表的设置脚本、模型类以及用于查看/编辑/删除和导出记录的完整管理表单。moduleCreator 将为您创建模块，然后使用完整的后端和前端（如果需要）填充它。[您可以从Magento Connect](http://www.magentocommerce.com/magento-connect/modulecreator.html)获取 moduleCreator或从[GitHub](https://github.com/shell/Magento-Module-Creator)获取更新版本。

# internet-explorer-8 - Tridion 预览和 HTML5 元素

> ID：12138398
> 
> 赞同：6
> 
> 时间：2012-08-27T08:13:07.667
> 
> 标签：internet-explorer-8, internet-explorer-7, tridion, tridion2009

我们创建了一个基于 HTML5 的新网站。使用 <header>、<nav>、<section> 等元素...

这是 Tridion 2009 SP1 中的一个非常简单的实现。这意味着大部分站点不是动态的，而是由 Tridion Templating 构建的。好处之一是内容管理员可以使用预览功能。

然而，由于内容管理器仅限于使用 IE8，我们必须使用 Modernizr.js 之类的东西来正确格式化 HTML。

这就是乐趣结束的地方......在网站本身上运行良好，但在 Tridion 预览屏幕上却不行。似乎它没有使用 Javascript。

除了创建不同的预览 HTML 和 CSS 之外，还有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T08:33:08.397

我没有在 2009 SP1 中使用 HTML5，但在 2011 SP1 HR1 上它对我们来说工作得很好。不知道为什么会有这种差异。2011 UI 在某些方面当然有很大不同，但我认为预览一直在 iframe 中，应该可以正常工作。请注意，使用 2011 还允许您使用 Chrome 和 Firefox，所以我当然可以推荐升级。

对于 IE 上的 HTML5，我们一直在努力解决一件事，那就是兼容模式。我从来没有碰过这个按钮，但是因为它就在刷新按钮旁边，我注意到很多人不小心把它打开了。完成此操作后，您的浏览器将恢复到 IE7 模式，即使在modernizr 的帮助下，这对于我们的 HTML5 设计也无法正常工作。会不会是你的问题不是2009，而是打开的兼容模式？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:34:44.970

答案已经在问题中，不幸的是这不是一个简单的答案。

这个问题似乎只是较旧的 IE 浏览器（IE9 以下的所有浏览器）的问题。

我最终结合不同的 HTML 制作了不同的预览 CSS。所有 HTML5 元素，例如：**<nav>**、**<header>**、**<article>**、**<section>**、**<aside>**等...都更改为**<div class="html5elementname">**。

工作繁琐，但使用 IE8/IE7 和 HTML5 进行 Tridion 2009 Preview 的唯一方法。

# django - Django：用于 MongoDB 的长字段 (BigIntegerField)

> ID：12138412
> 
> 赞同：4
> 
> 时间：2012-08-27T08:14:06.400
> 
> 标签：django, mongodb, django-models, long-integer, django-nonrel

我想分配一个模型字段来在 MongoDB 中存储一个 Long 整数类型。我已经用 BigIntegerField 尝试过，但它仍然保留为 MongoDB 中的 Integer 字段。我试过使用：

```
models.BigIntegerField() 
```

我应该使用哪个模型字段？注意：我已经将 django-nonrel 用于 DJango-MongoDB 关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:35:08.993

您是否节省了足够大的价值？您使用的 python 版本也可能很重要。从 API 文档：

> Python int 将根据其大小保存为 BSON int32 或 BSON int64。BSON int32 将始终解码为 Python int。在 Python 2.xa BSON int64 将始终解码为 Python long。在 Python 3.xa 中，BSON int64 将解码为 Python int，因为不再存在 long 类型。

此外，python long 应始终映射到 BSON 64 位整数：

[http://api.mongodb.org/python/2.3rc1/api/bson/son.html](http://api.mongodb.org/python/2.3rc1/api/bson/son.html)

# java - 在 Eclipse 中创建 JMS 提供程序以发送/接收 JMS 消息

> ID：12138422
> 
> 赞同：1
> 
> 时间：2012-08-27T08:15:26.490
> 
> 标签：java, eclipse, jms, message

我正在尝试使用 Eclipse IDE 创建一个示例 JMS 应用程序。

我设法创建了一个 Producer.java 和一个 Consumer.java 类来将消息从 Producer 发送到 Consumer。消费者接收消息并打印出消息。

接下来我应该做什么才能实际发送和接收消息。我知道这与创建 JMS 提供程序有关，但是如果有人可以指导我如何去做，那真的很有帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:08:47.630

为此，您需要 JMS Provider 实现，我可以推荐 HornetQ 快速、流行且有据可查。

[http://java.dzone.com/articles/hornetq-getting-started](http://java.dzone.com/articles/hornetq-getting-started)

[http://docs.jboss.org/hornetq/2.2.2.Final/quickstart-guide/en/html_single/index.html](http://docs.jboss.org/hornetq/2.2.2.Final/quickstart-guide/en/html_single/index.html)

[http://hornetq.blogspot.com/2009/09/hornetq-simple-example-using-maven.html](http://hornetq.blogspot.com/2009/09/hornetq-simple-example-using-maven.html)

快速入门 HornetQ 的好文章。

或[http://activemq.apache.org/getting-started.html](http://activemq.apache.org/getting-started.html)，如果你喜欢 ActiveMQ

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:08:27.843

是的，我也建议使用 HornetQ

使用两行代码，您可以将整个 jms 服务器嵌入到您的应用程序中

如果您愿意，可以查看新的 HornetQ 书

[www.amazon.com/dp/1849518408/?tag=packtpubli-20](https://rads.stackoverflow.com/amzn/click/com/1849518408)

# grails - 使用 dynamodb 的 Grails 弹簧安全性

> ID：12138425
> 
> 赞同：2
> 
> 时间：2012-08-27T08:15:33.980
> 
> 标签：grails, spring-security, amazon-dynamodb

我无法使用 spring security 和 dynamodb 将我的用户登录到 grails 应用程序。

Grails 是 2.1，安装的插件是 spring-security core 和 dynamodb 最新的。

用户和角色由 s2-quickstart 创建，它唯一的修改是向用户、角色和用户角色类添加 String id 和静态 mapWith = "dynamodb"（需要字符串 id，因为 dynamodb 上的 id 是 UUID 生成的）

Bootstrap 是按照 spring 安全教程。

应用程序启动良好，并创建了 dynamodb 表和行。

我不断得到

身份验证失败：密码与存储的值不匹配

通过在 LoginController 上登录（我没有从教程中设置示例控制器）。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:49:21.850

如果您配置了多个数据源，我猜您会这样做，因为您使用了 mapWith，beforeUpdate 块将被调用不止一次。（每个数据源一次）我将以下内容添加到我的用户域对象中，它可以正常工作。

```
transient hasBeforeInsert = false
transient hasBeforeUpdate = false

...

  def beforeInsert()
  {
    if(!hasBeforeInsert)
    {
      hasBeforeInsert = true
      encodePassword()
    }
  }

  def beforeUpdate()
  {
    if(!hasBeforeUpdate)
    {
      hasBeforeUpdate = true

      if(isDirty('password'))
      {
        encodePassword()
      }
    } 
```

# memory-management - 具有无限随机注释的 MKMapView

> ID：12138428
> 
> 赞同：1
> 
> 时间：2012-08-27T08:15:37.587
> 
> 标签：memory-management, mkmapview, mkannotation, mapkit

我正在尝试使用无限量的注释填充 MKMapView，这些注释在用户滚动地图时可以查看。显然，用户必须放大到足够远才能显示视图，因为如果不是这样的话，应用程序处理的太多了，一次只能显示大约 20 个。

我有一个包含大约 100 个对象的数组，我需要在整个地图的随机位置随机重复这些对象。这些是在运行时使用 MKMapView 的 visibleMapRect 属性创建的，仅创建必要的。我还实现了一个缓存字典，以防止重新创建以前创建的对象。这是我简化的当前代码：

```
@property (nonatomic, strong) NSArray *mapObjects; //Contains 100 objects to be repeated
@property (nonatomic, strong) NSMutableDictionary *cache; //Cache already created mapObjects

//Constants used
int const MapDensity  = 5000.0; //Density of annotations
int const MapZoomMax  = 30000.0; //Max zoom level to show annotations

- (void)loadLocations {
    MKMapRect rect = [mapView visibleMapRect];

    if (rect.size.width > MapZoomMax) {
    [self performSelectorOnMainThread:@selector(removeAllAnnotations) withObject:nil waitUntilDone:NO];
        return;
    }

    rect.origin.x = MapDensity*floor(rect.origin.x/MapDensity);
    rect.origin.y = MapDensity*floor(rect.origin.y/MapDensity);

    MKMapPoint pointLocation = rect.origin;
    NSMutableArray *locationsArray = [NSMutableArray array];

    while (pointLocation.y < rect.origin.y+rect.size.height) {
        while (pointLocation.x < rect.origin.x+rect.size.width) {
            int cacheKey = pointLocation.x*pointLocation.y;
            if (![self.cache objectForKey:[NSNumber numberWithInt:cacheKey]]) {

                //Adjust for randomness
                MKMapPoint pointLocationAdjusted = pointLocation;
                pointLocationAdjusted.x += arc4random()%MapDensity;
                pointLocationAdjusted.y += arc4random()%MapDensity;

                //Create annotation
                GLAnnotation *annotation = [[GLAnnotation alloc] init];
                [annotation setCoordinate:MKCoordinateForMapPoint(pointLocationAdjusted)];
                [annotation setMapObject:[self.mapObjects objectAtIndex:(arc4random()%[mapObjects count])]];
                [locationsArray addObject:annotation];

                [self.cache setObject:annotation forKey:[NSNumber numberWithInt:cacheKey]];
            } else {
                [locationsArray addObject:[self.cache objectForKey:[NSNumber numberWithInt:cacheKey]]];
            }
            pointLocation.x += MapDensity; //Go to next X
        }
        pointLocation.x = rect.origin.x; //Restart X
        pointLocation.y += MapDensity; //Go to next Y
    }

    [self performSelectorOnMainThread:@selector(addAnnotations:) withObject:locationsArray waitUntilDone:NO];
}

- (void)addAnnotations:(NSArray *)annotations {
    NSMutableArray *newAnnotations = [NSMutableArray array];
    for (id annotation in annotations) {
        if (![mapView.annotations containsObject:annotation]) {
            [mapView addObject:annotation];
        }
    }
    [mapView addAnnotations:newAnnotations];
}

- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated {
    [self performSelectorInBackground:@selector(loadLocations) withObject:nil];
}

- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {
    if([annotation isKindOfClass:[GLAnnotation class]]){
        static NSString *annotationIdentifier = @"AnnotationIdentifier";

        MKAnnotationView *annotationView = [mapView dequeueReusableAnnotationViewWithIdentifier:annotationIdentifier];
        if(!annotationView){
            annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:annotationIdentifier];
            annotationView.canShowCallout = YES;
        }

        annotationView.image = [(GLAnnotation *)annotation picture];
        return annotationView;
    }
    return nil;
} 
```

该代码似乎大部分时间都可以工作，但有时会导致地图滚动滞后（我试图解决在后台线程中运行它的问题）并且通常会使应用程序崩溃，这似乎是由内存问题引起的（我试图修复使用缓存）。不输出任何错误消息，除了：EXC_BAD_ACCESS。如果有人能告诉我如何正确管理这么多的注释，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:45:20.167

我认为您可能会产生比您需要的多 25,000,000 个项目。但是请检查我的数学。您正在为从 rect.origin 开始并按 MapDensity 递增的每个坐标对创建一个注释。所以每个 5000x5000 块有一个对象。第一个被缓存（0,0）。但是，如果地图视图仅更改了一个地图点，您将拥有一个全新的对象，用于 (0,1) 和以下 5000x5000 块。也许您应该将起点转移到下一个最低的 5000 地图点并从那里增加。这样，您将一直重复使用相同的对象，直到您的起点离开 5000x5000 块。

此外，它们为您的缓存散列会导致冲突。(1,12), (2,6), (3,4), (4,3), (6,2), (12,1), (-1,-12), (-2,-6 ) 等等等等，都散列到相同的值。由于键可以是字符串，请尝试 [NSString stringWithFormat:@"%d_%d",x,y] 代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:27:33.970

将它们缓存（到磁盘），由地图图块地址键入。请参阅： http: [//www.codeproject.com/Articles/14793/How-Google-Map-Works](http://www.codeproject.com/Articles/14793/How-Google-Map-Works)

# c - 为什么我在尝试 rmmod 时会收到“rmmod: delete_module '/my_module' failed (errno 2)”？

> ID：12138430
> 
> 赞同：1
> 
> 时间：2012-08-27T08:16:02.680
> 
> 标签：c, linux-kernel, kernel-module

```
#include <linux/version.h>
#include <linux/kernel.h>
#include <linux/jiffies.h>
#include <linux/module.h>
#include <linux/interrupt.h>
#include <linux/fs.h>
#include <linux/types.h>
#include <linux/string.h>
#include <linux/socket.h>
#include <linux/errno.h>
#include <linux/fcntl.h>
#include <linux/in.h>
#include <linux/init.h>
#include <linux/miscdevice.h>
#include <linux/platform_device.h>
#include <linux/slab.h>
#include <asm/system.h>
#include <asm/uaccess.h>
#include <asm/io.h>

#include <linux/mm.h>
#include <net/checksum.h>
#include <linux/cdev.h>

    static int t_open(struct inode *inode, struct file *filp)
    {
        return nonseekable_open(inode, filp);
    }

    static struct file_operations testmod_fops = {
        .open = t_open,
        .owner = THIS_MODULE
    };

    static struct miscdevice testmod_miscdev = {
        MISC_DYNAMIC_MINOR,
        "my_module",  
        &testmod_fops,
    }; 

    static int __init testmod_init(void)
    { 
        printk("module is on\n");
        misc_register(&testmod_miscdev);

        return 0;

    };

    static void __exit testmod_exit(void)
    {
        printk("about exit \n");
        misc_deregister(&testmod_miscdev);
    }

    module_init(testmod_init);
    module_exit(testmod_exit);
    MODULE_LICENSE("GPL");
    MODULE_AUTHOR("0x90");
    MODULE_DESCRIPTION("my_module"); 
```

为什么我`errno2`在这个简单的例子中得到了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:08:27.290

基本上你必须输入内部模块名称而不是文件名。您可以通过键入找到模块名称`lsmod`。

所以

`rmmod <your_module_name>`应该管用。

# android - 从 android 相机聚焦和扫描条码线

> ID：12138432
> 
> 赞同：-1
> 
> 时间：2012-08-27T08:16:17.023
> 
> 标签：android, barcode-scanner

我正在使用以下扫描条形码行。

```
private Camera mCamera;
    private CameraPreview mPreview;
    public static final int MEDIA_TYPE_IMAGE = 1;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.newmain);

        Button captureButton = (Button) findViewById(R.id.button_capture);

//      Create an instance of Camera
        mCamera = getCameraInstance();

//      Create our Preview view and set it as the content of our activity.
        mPreview = new CameraPreview(this, mCamera);
        FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
        preview.addView(mPreview);
        final PictureCallback mPicture = new PictureCallback() 
        {
            public void onPictureTaken(byte[] data, Camera camera)
            {
                Intent intent = new Intent("http://zxing.appspot.com/scan");
//              Intent intent = new Intent("com.google.zxing.client.android.SCAN");
                intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
                startActivityForResult(intent, 0); 
            }
        };

            captureButton.setOnClickListener(new View.OnClickListener() 
            {
                public void onClick(View v) 
                {
                    Intent intent = new Intent("http://zxing.appspot.com/scan");
//                  Intent intent = new Intent("com.google.zxing.client.android.SCAN");
                    intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
                    startActivityForResult(intent, 0); 

                    // get an image from the camera   
//                    System.out.println("Photo Taking!");
//                    mCamera.takePicture(null, null, mPicture);
                }
            });
    } 
```

然后我使用以下方法将意图传递给 zxing sdk ..

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) 
      {
          if (requestCode == 0)
          {
              TextView tvStatus=(TextView)findViewById(R.id.tvStatus);
              TextView tvResult=(TextView)findViewById(R.id.tvResult);
              if (resultCode == RESULT_OK) 
              {
                  String contents = intent.getStringExtra("SCAN_RESULT");
                  String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
                  tvStatus.setText(intent.getStringExtra(format));
                  tvResult.setText(intent.getStringExtra(contents));
                  Toast.makeText(getApplicationContext(), "Content:" + contents + " Format:" + format , Toast.LENGTH_LONG).show();
              }
              else if (resultCode == RESULT_CANCELED) 
              {
                  tvStatus.setText("Press a button to start a scan.");
                  tvResult.setText("Scan cancelled.");
              }
          }
      } 
```

但是我无法将相机焦点放在条形码线上。如果我能就如何将相机聚焦在条形码线上得到一些帮助，我将不胜感激，这样我就可以将意图传递给 zxing sdk 。另外，对一些 Android 的评论sdk 扫描条形码行将不胜感激.. 提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:52:50.557

为什么要拍照发给zxing？您可以直接要求Zxing App打开相机并读取条形码。[在这里](https://stackoverflow.com/questions/8708705/how-to-use-zxing-in-android/8708784#8708784)查看我的答案。

# c - 目标文件到二进制代码

> ID：12138433
> 
> 赞同：8
> 
> 时间：2012-08-27T08:16:28.527
> 
> 标签：c, gcc, ld

假设我有一个没有外部依赖的 C 文件，只有 const 数据部分。我想编译这个文件，然后得到一个可以加载到另一个程序中的二进制 blob，该函数将通过函数指针使用。

举个例子，这是一个虚构的二进制模块，f1.c

```
static const unsigned char mylut[256] = {
    [0 ... 127] = 0,
    [128 ... 255] = 1,
};

void f1(unsigned char * src, unsigned char * dst, int len)
{
    while(len) {
        *dst++ = mylut[*src++];
        len--;
    }
} 
```

我想把它编译成 f1.o，然后是 f1.bin，然后在 prog.c 中像这样使用它

```
int somefunc() {
    unsigned char  * codedata;
    f1_type_ptr  f1_ptr;
    /* open f1.bin, and read it into codedata */

    /* set function pointer to beginning of loaded data */
    f1_ptr =(f1_type_ptr)codedata;

    /* call !*/
    f1_ptr(src, dst, len);
} 
```

我想从 f1.c 到 f1.o 涉及 -fPIC 以获得位置独立性。我可以使用哪些标志或链接描述文件从 f1.o 转到 f1.bin ？

澄清：

我知道动态链接。在这种情况下，动态链接是不可能的。如果可能的话，链接步骤必须*将 func 指针转换为加载的数据*。

请假设没有操作系统支持。如果可以的话，我会在汇编中写 f1 与 PC 相关的地址。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T09:13:11.797

首先，正如其他人所说，您应该考虑使用 DLL 或 SO。

也就是说，如果你真的想这样做，你需要替换链接描述文件。像这样的东西（没有很好的测试，但我认为它有效）：

```
ENTRY(_dummy_start)
SECTIONS
{
    _dummy_start = 0;
    _GLOBAL_OFFSET_TABLE_ = 0;
    .all : { 
        _all = .;
        LONG(f1 - _all);
        *( .text .text.* .data .data.* .rodata .rodata.* ) 
    }
} 
```

然后编译：

```
$ gcc -c -fPIC test.c 
```

链接：

```
$ ld -T script.ld test.o -o test.elf 
```

并使用以下命令提取二进制 blob：

```
$ objcopy -j .all -O binary test.elf test.bin 
```

可能欢迎对脚本进行一些解释：

*   `ENTRY(_dummy_start)`这只是避免了关于程序没有入口点的警告。
*   `_dummy_start = 0;`这定义了上一行中使用的符号。该值未使用。
*   `_GLOBAL_OFFSET_TABLE_ = 0;`这可以防止另一个链接器错误。我不认为你真的需要这个符号，所以它可以定义为 0。
*   `.all`这是将收集 blob 的所有字节的部分的名称。在此示例中，所有`.text`,`.data`和`.rodata`部分将放在一起。如果您有复杂的功能，您可能需要更多，在这种情况下`objdump -x test.o`是您的朋友。
*   `LONG(f1 - _all)`不是真的需要，但是您想知道函数在 blob 中的偏移量，不是吗？您不能假设它将位于偏移量 0。使用这一行，blob 中的前 4 个字节将是符号`f1`（您的函数）的偏移量。如果使用 64 位指针，请更改`LONG`为。`QUAD`

**更新**：现在是一个快速的'n'dirty测试（它有效！）：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/mman.h>

typedef void (*f1_t)(char *a, char *b, int len);
f1_t f1;

int main()
{
    char *blob = (char*)valloc(4096);
    FILE *f = fopen("test.bin", "rb");
    fread(blob, 1, 4096, f);
    fclose(f);

    unsigned offs = *(unsigned*)blob;
    f1 = (f1_t)(blob + offs);
    mprotect(blob, 4096, PROT_READ | PROT_WRITE | PROT_EXEC);
    char txt[] = "¡hello world!";
    char txt2[sizeof(txt)] = "";
    f1(txt, txt2, sizeof(txt) - 1);
    printf("%s\n%s\n", txt, txt2);
    return 0;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T08:22:55.427

您应该考虑构建一个共享库（Windows为**.dll ，Linux 为****.so**）。

像这样构建库：

```
gcc -c -fPIC test.c
gcc -shared test.o -o libtest.so 
```

如果您想从代码中动态加载库，请查看函数**dlopen(3)**和**dlsym(3)**。

**或者**，如果您想在编译时链接库，请使用

```
gcc -c main.c
gcc main.o -o <binary name> -ltest 
```

**编辑：**

*我真的不确定我会在这里说什么，但这可以为您提供研究进展的线索...*

如果您不想使用**dlopen**和**dlsym**，可以尝试从**.o**文件中读取符号表以找到函数地址，然后将具有读取和执行权限的目标文件映射到内存中**。**然后你应该能够在你找到的地址执行加载的代码。但是要小心你可能在这段代码中遇到的其他依赖项。

您可以查看手册页`elf(5)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-03T14:58:46.600

使用强制转换函数指针。

这是一个例子：

```
#include <stdio.h>

int main()
{
    unsigned char *dst, *src;
    int len;
    void (*f1)(unsigned char *, unsigned char *, int);
    *(void **)(&f1) = 0x..........;
    f1(src,dst,len);
    return 0;
} 
```

要做更多，你真的需要一个链接器和一个动态加载器。

# liferay-6 - 如何将 Liferay Service Builder 与远程 DB 和 JOIN 一起使用？

> ID：12138436
> 
> 赞同：0
> 
> 时间：2012-08-27T08:16:46.660
> 
> 标签：liferay-6

我的 portlet 连接到远程数据库并使用多个 JOIN 执行复杂查询。我在论坛中询问如何在我的 portlet 中使用连接池，他们只是回答说我无论如何都应该使用 Service Builder，因为 SB 会处理这个问题......所以我的问题是，这是否正确以及我必须如何使用Service Builder 来完成我前面提到的用例。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T11:44:59.820

最后，我想出了一种使用连接池的方法。我不使用 Service Builder，而是使用[c3p0](http://sourceforge.net/projects/c3p0/)池化库。

连接池.java

```
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Properties;

import com.liferay.portal.kernel.log.Log;
import com.liferay.portal.kernel.log.LogFactoryUtil;
import com.mchange.v2.c3p0.ComboPooledDataSource;
import com.mchange.v2.c3p0.DataSources;

public class ConnectionPool {

    private static Log _log = LogFactoryUtil.getLog(ConnectionPool.class);

    private static ConnectionPool _instance = new ConnectionPool();

    private ComboPooledDataSource _cpds;
    private Properties _props;

    public static void cleanUp(Connection con) {
        _instance._cleanUp(con);
    }

    public static void cleanUp(Connection con, Statement s) {
        _instance._cleanUp(con, s);
    }

    public static void cleanUp(Connection con, Statement s, ResultSet rs) {
        _instance._cleanUp(con, s, rs);
    }

    public static void cleanUp(Statement s) {
        _instance._cleanUp(s);
    }

    public static void destroy() throws SQLException {
        _instance._destroy();
    }

    public static Connection getConnection() throws SQLException {
        return _instance._getConnection();
    }

    public static Properties getProperties() {
        return _instance._props;
    }

    private ConnectionPool() {
        try {

            // Properties

            ClassLoader classLoader = getClass().getClassLoader();
            _props = new Properties();
            _props.load(classLoader.getResourceAsStream("connection-pool.properties"));

            _props.list(System.out);

            // Pooled data source
            String driverClass = _props.getProperty("driver.class");
            String jdbcUrl = _props.getProperty("jdbc.url");
            String user = _props.getProperty("user");
            String password = _props.getProperty("password");

            int minPoolSize = 5;

            try {
                minPoolSize = Integer.parseInt(_props.getProperty("min.pool.size"));
            } catch (Exception e) {
            }

            int maxPoolSize = 5;

            try {
                maxPoolSize = Integer.parseInt(_props.getProperty("max.pool.size"));
            } catch (Exception e) {
            }

            int acquireIncrement = 5;

            try {
                acquireIncrement = Integer.parseInt(_props.getProperty("acquire.increment"));
            } catch (Exception e) {
            }

            _cpds = new ComboPooledDataSource();

            _cpds.setDriverClass(driverClass);
            _cpds.setJdbcUrl(jdbcUrl);
            _cpds.setUser(user);
            _cpds.setPassword(password);

            _cpds.setMinPoolSize(minPoolSize);
            _cpds.setMaxPoolSize(maxPoolSize);
            _cpds.setAcquireIncrement(acquireIncrement);
        } catch (Exception e) {
            _log.error(e);
        }
    }

    private void _cleanUp(Connection con) {
        _cleanUp(con, null, null);
    }

    private void _cleanUp(Connection con, Statement s) {
        _cleanUp(con, s, null);
    }

    private void _cleanUp(Connection con, Statement s, ResultSet rs) {
        try {
            if (rs != null) {
                rs.close();
            }
        } catch (SQLException sqle) {
            _log.error(sqle);
        }

        try {
            if (s != null) {
                s.close();
            }
        } catch (SQLException sqle) {
            _log.error(sqle);
        }

        try {
            if (con != null) {
                con.close();
            }
        } catch (SQLException sqle) {
            _log.error(sqle);
        }
    }

    private void _cleanUp(Statement s) {
        try {
            if (s != null) {
                s.close();
            }
        } catch (SQLException sqle) {
            _log.error(sqle);
        }
    }

    private void _destroy() throws SQLException {
        DataSources.destroy(_cpds);
    }

    private Connection _getConnection() throws SQLException {
        return _cpds.getConnection();
    }

} 
```

连接池.properties

```
driver.class=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://host/DB
user=123
password=123

min.pool.size=5
max.pool.size=20
acquire.increment=5 
```

用法

```
conn = ConnectionPool.getConnection(); 
```

# c# - XSD 工具在生成 C# 代码时将“指定”附加到某些属性/字段

> ID：12138439
> 
> 赞同：13
> 
> 时间：2012-08-27T08:16:51.497
> 
> 标签：c#, code-generation, xsd.exe

我无法真正解释 XSD 生成器的奇怪行为。我有一个这样的 XSD：

```
<xs:complexType name="StageSequenceElement" mixed="false">
    <xs:complexContent>
        <xs:extension base="CoreObject">
            <xs:sequence>
                <xs:element name="Description" type="xs:string" minOccurs="0">
                    <xs:annotation>
                        <xs:documentation>Some Doc</xs:documentation>
                    </xs:annotation>
                </xs:element>
                <xs:element name="StageRef" type="ObjectReference">
                    <xs:annotation>
                        <xs:documentation>...</xs:documentation>
                    </xs:annotation>
                </xs:element>
                <xs:element name="MinDuration_100ms" type="xs:int" nillable="true" minOccurs="0">
                    <xs:annotation>
                        <xs:documentation>...</xs:documentation>
                    </xs:annotation>
                </xs:element>
                <xs:element name="MaxDuration_100ms" type="xs:int" nillable="true">
                    <xs:annotation>
                        <xs:documentation>...</xs:documentation>
                    </xs:annotation>
                </xs:element>
                <xs:element name="StageOnDemand" type="xs:boolean" nillable="true" minOccurs="0">
                    <xs:annotation>
                        <xs:documentation>...</xs:documentation>
                    </xs:annotation>
                </xs:element>
            </xs:sequence>
        </xs:extension>
    </xs:complexContent>
</xs:complexType> 
```

它是从 CoreObject 派生的：

```
<xs:complexType name="CoreObject">
    <xs:sequence>
        <xs:element name="No" type="xs:int">
            <xs:annotation>
                <xs:documentation>...</xs:documentation>
            </xs:annotation>
        </xs:element>
    </xs:sequence>
</xs:complexType> 
```

这只是 XSD 的一小部分，还有很多更复杂的类型。

因此，当我生成与此类似的类时[，](https://stackoverflow.com/questions/4150164/programmatically-use-xsd-exe-tool-feature-generate-class-from-xsd-schema-throu "这")我得到了一个生成的类，它还有两个属性（除了我期望的 5 个属性）：

```
public bool MinDuration_100msSpecified 
```

和

```
public bool StageOnDemandSpecified 
```

所以“原始”属性“指定”被附加，类型现在是布尔值。谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-30T00:56:49.543

属性意味着相关的`bool`属性应该被序列化。

**例如**

如果`bool` `MinDuration_100msSpecified`设置为`false`，而您将 设置`MinDuration_100ms`为`300`，则当您用于`XmlSerializer`序列化对象时，该`MinDuration_100ms`属性将不会被序列化。

此功能可以将序列化的 xml 文件保存到最小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-12T15:18:05.060

设置**minOccurs="1"**其中元素是可空的。例如：

```
<xs:element name="StageOnDemand" type="xs:boolean" nillable="true" minOccurs="1" /> 
```

# sql-server - 使用 CONTAINSTABLE 的停用词列表

> ID：12138440
> 
> 赞同：2
> 
> 时间：2012-08-27T08:16:56.943
> 
> 标签：sql-server, full-text-search, stop-words

使用 Sql 服务器进行全文搜索。我们可以避免使用 FREETEXTTABLE 搜索停用词。但如果我使用 CONTAINSTABLE 进行搜索，也会搜索停用词。

我认为 CONTAINS TABLE 没有考虑停用词列表。

如果我想避免在 CONTAINSTABLE 中搜索停用词，有什么解决方法。

# javascript - 检测 iframe 时 Chrome 扩展程序失败

> ID：12138442
> 
> 赞同：1
> 
> 时间：2012-08-27T08:17:13.013
> 
> 标签：javascript, google-chrome, iframe, google-chrome-extension

基本上我要做的是检测 G+ 主页中包含的帧数，当然我确实使用了内容脚本

**扩展的 Js 文件：**

```
var myIframes;
window.addEventListener('load'
,function()
{
    //If the window location matches the G+ home page
    //Log number of frames contained within it
    if(window.location.href.match("https://plus.google.com/u/0/"))
    {
        console.log('G+ loaded');

        myIframes = document.getElementsByTagName('iframe');
        console.log(myIframes.length);
    }
}
,false); 
```

**执行此代码的 o/p 日志为：**

> > G+ 已加载
> > 
> > 2

现在到了奇怪的部分，当我尝试从检查器控制台中访问*myIframes变量长度时，我得到了***8**帧。

所以我的问题是**“怎么会！”** ，*myIframes*变量不应该保持第一次评估时的状态吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:23:22.740

`document.getElementsByTagName('iframe')`返回一个节点列表。

nodeLists 是[**live**](http://www.w3.org/TR/DOM-Level-3-Core/core.html#td-live)的，它们会在 DOM 更改时更新。

# android - Android View - 动态设置宽度

> ID：12138443
> 
> 赞同：2
> 
> 时间：2012-08-27T08:17:19.527
> 
> 标签：android, android-layout, width, android-linearlayout

这是我需要完成的，我的 menu_divider 的宽度应该等于我的第二个 LinearLayout (wrap_content) 的宽度。

所以我需要获取第二个 LinearLayout 的宽度并将其设置为我的 menu_divider。我怎么做？谢谢。

```
<LinearLayout   //second LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:minWidth="174dp"
    android:padding="8dip" >

    <ImageView
        android:id="@+id/itemImage"
        android:layout_width="25dip"
        android:layout_height="25dip"/>

    <TextView
        android:id="@+id/itemLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

</LinearLayout>

<View
    android:id="@+id/menu_divider"
    android:layout_width="174dp"
    android:layout_height="1dp"
    android:background="#96808080"
    android:minWidth="174dp"
    android:visibility="visible" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:51:58.453

try this...

```
<LinearLayout 
      android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:orientation="vertical"
    >
    <LinearLayout  
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:minWidth="174dp"
    android:padding="8dip" >

    <ImageView
        android:id="@+id/itemImage"
        android:layout_width="25dip"
        android:layout_height="25dip"/>

    <TextView
        android:id="@+id/itemLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="hwlloo nanfkjfouiofr dashjfkhal sdhf"/>

</LinearLayout>

<View
    android:id="@+id/menu_divider"
    android:layout_width="match_parent"
    android:layout_height="1dp"
    android:background="#ff0000"
    android:visibility="visible" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:22:08.477

我知道了。我只是将宽度设置为 match_parent。顺便说一句，这个布局是一个 PopUpWindow 所以 match_parent 回答它。

# android - Android Relativelayout 自定义对话框问题

> ID：12138454
> 
> 赞同：2
> 
> 时间：2012-08-27T08:18:05.453
> 
> 标签：android, android-relativelayout, customdialog

我需要一些有关我的相对布局的帮助。当我启动自定义对话框时，看不到我的“关闭”按钮。只有当我将 ScollView Height 设置为 "200dp" 左右时才能看到它。我不想手动设置高度。有没有办法实现它？也许使用 android:weightSum？请告诉我它是如何完成的。谢谢

```
OnMenuItemClickListener mAboutButtonClickListener = new OnMenuItemClickListener() {

         @Override
            public boolean onMenuItemClick(MenuItem item) {  

                final Dialog dialog = new Dialog(MainPageActivity.this);
                dialog.setContentView(R.layout.about_us);
                dialog.setTitle("About Us");
                dialog.setCancelable(true);

                TextView text = (TextView) dialog.findViewById(R.id.TextView01);

                try {
                    Resources res = getResources();
                    InputStream in_s = res.openRawResource(R.raw.disclaimer);

                    byte[] b = new byte[in_s.available()];
                    in_s.read(b);
                    text.setText(new String(b));

                } catch (Exception e) {
                    // e.printStackTrace();
                    text.setText("Error: can't show help.");
                }

                //set up button
                Button button = (Button) dialog.findViewById(R.id.Button01);
                button.setOnClickListener(new OnClickListener() {
                @Override
                    public void onClick(View v) {

                    dialog.dismiss();
                    }
                });

                dialog.show();
                return false;
            }
        }; 
```

我的 xml

```
 <?xml version="1.0" encoding="utf-8"?>

        <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
              >

        <ScrollView android:id="@+id/ScrollView01" 
                    android:layout_width="wrap_content" 
                    android:layout_height="wrap_content" 
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:scrollbars="vertical" 
                    android:scrollbarAlwaysDrawVerticalTrack="true">

        <TextView   android:id="@+id/TextView01"
                    android:layout_width="wrap_content" 
                android:layout_height="wrap_content"/>

        </ScrollView>

        <Button android:id="@+id/Button01" 
                android:layout_below="@+id/ScrollView01"
                android:layout_width="wrap_content" 
                android:layout_height="wrap_content"
                android:layout_centerHorizontal="true" 
                android:text="Close"
                        android:layout_alignParentBottom="true"/>
    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:04:22.533

你可以使用这样的东西。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/root"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >

<ScrollView
  android:layout_width="match_parent"
  android:layout_height="0dip"
  android:layout_weight="1" >

 <TextView   android:id="@+id/TextView01"
   android:layout_width="wrap_content" 
   android:layout_height="wrap_content"/>

 </ScrollView>

 <Button android:id="@+id/Button01" 
   android:layout_width="wrap_content" 
   android:layout_height="wrap_content" 
   android:text="Close" />

 </LinearLayout> 
```

# javascript - 如何在 HTML 5 中捕获屏幕（视频格式）？

> ID：12138456
> 
> 赞同：0
> 
> 时间：2012-08-27T08:18:07.613
> 
> 标签：javascript, html, ffmpeg

我想捕获屏幕（或在画布中完成的所有操作）。我需要视频格式，不想要屏幕截图，而是一段时间内在屏幕上完成的所有操作的视频。

我想在 HTML5 中实现这个功能。

请指教。此外，如果这在 HTML5 中是不可能的，请为此建议替代技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:39:00.373

如果我理解正确，您想以 x 毫秒的间隔保存画布。那部分[很容易](https://stackoverflow.com/questions/923885/capture-html-canvas-as-gif-jpg-png-pdf)。

请注意，您的问题并不清楚。您想要捕获屏幕、完整文档还是单个画布？

第二部分您想使用 javascript 将其呈现为“类似视频”的组件吗？还是您想将其保存为视频。第一个想法[是可能的](https://stackoverflow.com/questions/4448555/rendering-a-chain-of-images-like-a-video-in-javascript)。第二个没那么多。至少不使用javascript。您可以将所有图像发送到后端（如 php、asp、jsp）并使用 ffmpeg 等工具在服务器端创建视频。[更多信息](https://superuser.com/questions/135117/how-to-convert-video-to-images)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:21:07.093

HTML5 不提供相机功能。但是，有一个[jQuery 插件](http://www.xarg.org/project/jquery-webcam-plugin/ "jQuery插件")，它使用一个小的 flash 实用程序来提供。

# php - if ($success)，提示/提醒而不是回显。如何？

> ID：12138461
> 
> 赞同：0
> 
> 时间：2012-08-27T08:18:54.040
> 
> 标签：php, echo, prompt

我是 PHP 的新手，但我可以稍微更改代码以满足我的需要。我有一个表格，当您发送它时，它会在页面内显示成功/失败消息。但是，我只想要一个显示成功/失败消息的**提示/警报**，而不是出现在页面内的消息。

所以我所拥有的是

```
if ($success){ echo "Sent! Thank you";}
else{  echo "Ops! Try again!";} 
```

有任何想法吗？非常感谢你提前

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T08:22:05.633

我怀疑你可能不想要你说的你想要的，但是……</p>

```
if ($success){ 
    $message = "Sent! Thank you";
} else {
    $message = "Ops! Try again!";
}
?><script>
    prompt(<?php echo json_encode($message); ?>);
</script>
<noscript>
    <p><?php echo htmlspecialchars($message); ?></p>
</noscript> 
```

注意：给定一个输入字符串，`json_encode`将输出一个 JavaScript 字符串文字，可以安全地包含在 HTML 脚本元素中。它不会输出 JSON。

虽然字符串本身不包含任何特殊字符，但对您输出的任何非 HTML/JS/等内容运行这种 XSS 保护是一个好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:27:15.020

如果你想要更好看的东西：

```
<?php
   if ($success) {
       $message = "Sent! Thank you.";
   } else {
       $message = "Oops...";
   }
   echo '<div id="message">'.$message.'<div id="close-button"></div></div>';
?> 
```

通过这种方式，您可以随意设置您的消息样式（例如绝对定位）。但是如果 div 是绝对定位的，则必须在 javascript 中实现关闭按钮。

# asp.net - 为什么 HTML 标准重置按钮无法重置 asp.net 表单的值？

> ID：12138466
> 
> 赞同：3
> 
> 时间：2012-08-27T08:19:21.640
> 
> 标签：asp.net, reset

为什么 HTML 重置按钮不能直接重置 ASP.NET 表单？为什么我们需要编写额外的代码来实现 ASP.NET 表单的重置功能？

我正在寻找这背后的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:26:04.160

asp.net 在称为“ViewState”的东西中维护其值。

这会记住您分配给输入的值，因此如果您想重置输入，您必须自己清除它们。

你应该阅读[理解 asp.net ViewState](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

> 简而言之，视图状态是 ASP.NET 网页使用的一种技术，用于在回发之间保持对 Web 窗体状态的更改。
> 默认情况下，页面的视图状态位于名为 __VIEWSTATE 的隐藏表单字段中。视图状态在生活中的目的很简单：它可以在回发中保持状态。（对于 ASP.NET 网页，其状态是构成其控件层次结构的控件的属性值。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:26:03.533

您可以尝试使用此代码

```
<asp:TextBox id="tbx" runat="server" Text="Test"/>
<asp:Button id="btn" runat="server" OnClick="ResetEventHandler" Text="Reset"/>

void ResetEventHandler(Object sender, EventArgs e)
{
   tbx.Text = string.Empty;

} 
```

您在 .net 中没有重置控制权

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-09T08:54:02.150

HTML 基本上用于静态显示您的数据。重置所有文本意味着您的服务器必须重新加载数据，对其进行一些更改。例如，您已将 EnableViewState 属性设置为 True 的文本字段 (ID=txt1)。现在，如果您使用的是 HTML，则无法更改其状态，因此请使用以下代码：-

```
protected void Reset_Click(object sender, EventArgs e)//button in UI
  {
    gvEmployee2.Visible = false;//If you have a grid and you want to reset it 
     txt1.Text = string.Empty; // Reset Text Box alternative :- txt1.Text = " ";
    }
   } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-10-26T10:07:01.863

```
 protected void btnreset_Click(object sender, EventArgs e)
    {       
        try
        {
            Clear();
            button1.Text = "button1";

        }
        catch (Exception)

        {}
     }

} 
```

# python - Python中的Formlets实现

> ID：12138476
> 
> 赞同：2
> 
> 时间：2012-08-27T08:20:33.687
> 
> 标签：python, functional-programming

formlets[论文](http://groups.inf.ed.ac.uk/links/papers/formlets-tr2008.pdf)提到他们在 Python 中进行了实现，但我的 google-fu 失败了。是否有以命令式语言免费实现的论文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T04:25:16.560

我问了有问题的作者，他们回答说 python 实现只不过是一个概念验证，他们没有发现原来的实现了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T17:29:13.663

该项目代码的主页链接是：[http ://groups.inf.ed.ac.uk/links/formlets/](http://groups.inf.ed.ac.uk/links/formlets/)

该页面上有一个[链接](http://groups.inf.ed.ac.uk/links/formlets/ocaml-formlets-june-2008.tar.gz)可以下载 OCaml 中的 tar.gz，OCaml 是一种[命令式](http://caml.inria.fr/)语言。希望这可以帮助你实现你想要的。

其他语言实现（例如 python）不在线，如果你特别想要 python，我支持给作者发电子邮件的想法——我以前见过他们，他们很可能会分享。如果你得到它，链接在这里！

# dll - charismathics pkcs11 dll (cmp11.dll) 错误

> ID：12138477
> 
> 赞同：1
> 
> 时间：2012-08-27T08:20:34.687
> 
> 标签：dll, smartcard, pkcs#11

我有一个 Charismathics cssi 中间件，我想将它与我的智能卡一起使用。当我想将其 pkcs11 dll (cmp11.dll) 文件添加到我的安全设备时，它会给出错误“无法添加模块”。有人成功使用 Charismathics pkcs11 dll 吗？提前致谢。

# vb.net - 直到循环只返回一个部分

> ID：12138482
> 
> 赞同：0
> 
> 时间：2012-08-27T08:21:04.287
> 
> 标签：vb.net, function, vba, loops

尝试在 VB.NET 中制作随机密码生成器

到目前为止已经得到了这个，但它只返回我想要做的第一部分

我有 3 个密码类型作为复选框的输入，按以下顺序：

```
Numeric
Alphabetic
Symbols 
```

如果我检查了数字，它返回一个数字密码，但如果我检查了数字和字母，它只返回一个数字密码，尽管如果我取消选中数字并且只检查了字母，那么它返回和字母密码

字母密码也有三个选项：

```
Uppercase
Lowercase
Mixed Case 
```

当与字母一起使用时，它实际上返回了正确的密码

这是我到目前为止的代码：

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    C_Numeric.Checked = True
    R_Upper.Checked = True
End Sub

Private Sub B_Generate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles B_Generate.Click
    Dim c_a As Boolean = False
    Dim c_b As Boolean = False
    Dim c_c As Boolean = False
    Dim a As Integer
    If C_Numeric.Checked = True Then
        c_a = True
    ElseIf C_Alphabetic.Checked = True Then
        c_b = True
    ElseIf C_Symbols.Checked = True Then
        c_c = True
    End If
    If R_Lower.Checked = True Then
        a = 1
    ElseIf R_Upper.Checked = True Then
        a = 2
    ElseIf R_Mixed.Checked = True Then
        a = 3
    End If
    If C_Numeric.Checked = True Or C_Alphabetic.Checked = True Or C_Symbols.Checked = True Then
        TextBox1.Text = GenPass(NumericUpDown1.Value, c_a, c_b, c_c, a)
    End If
End Sub

Function GenPass(ByVal Length As Integer, ByVal Num As Boolean, ByVal Alp As Boolean, ByVal Ascii As Boolean, ByVal Complexity As Integer)
    Dim rand As New Random
    Dim Pass As String = ""
    Do Until Pass.Length = Length
        Dim a As Integer
        a = rand.Next(1, 3 + 1)
        If a = 1 And Num = True Then
            Pass += ChrW(rand.Next(Asc("0"), Asc("9") + 1))
        End If
        If a = 2 And Alp = True Then
            If Complexity = 1 Then
                Pass += ChrW(rand.Next(Asc("a"), Asc("z") + 1))
            ElseIf Complexity = 2 Then
                Pass += ChrW(rand.Next(Asc("A"), Asc("Z") + 1))
            ElseIf Complexity = 3 Then
                Dim b As Integer
                b = rand.Next(1, 2 + 1)
                If b = 1 Then
                    Pass += ChrW(rand.Next(Asc("A"), Asc("Z") + 1))
                ElseIf b = 2 Then
                    Pass += ChrW(rand.Next(Asc("a"), Asc("z") + 1))
                End If
            End If
        End If
        If a = 3 And Ascii = True Then
            Dim b As Integer
            b = rand.Next(1, 4 + 1)
            If b = 1 Then
                Pass += ChrW(rand.Next(Asc("!"), Asc("/") + 1))
            ElseIf b = 2 Then
                Pass += ChrW(rand.Next(Asc(":"), Asc("@") + 1))
            ElseIf b = 3 Then
                Pass += ChrW(rand.Next(Asc("["), Asc("`") + 1))
            ElseIf b = 4 Then
                Pass += ChrW(rand.Next(Asc("{"), Asc("~") + 1))
            End If
        End If
    Loop
    Return (Pass)
End Function 
```

例如（假设所有答案的长度为 16）：

使用混合大小写选择数字和字母应该返回：

```
eVOv3fyTmW7mvH24 CZOXVzeo1EzLu7Al V313p9VLW0Bz7Zfi 
```

而是返回：

```
8343299372194893 7303963979299152 3918539496952829 
```

我不知道为什么它实际上没有返回所需的结果

任何帮助，将不胜感激

亚当

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T08:26:42.653

这是因为

```
If C_Numeric.Checked = True Then
    c_a = True
ElseIf C_Alphabetic.Checked = True Then
    c_b = True
ElseIf C_Symbols.Checked = True Then
    c_c = True
End If 
```

因此，如果`C_Numeric`和`C_Alphabetic`被选中，则得到`c_a`，`True`但`c_b`由于.`True``ElseIf`

所以，删除`Else`部分。

* * *

此外，您可以通过编写以下代码来简化此代码：

```
c_a = C_Numeric.Checked 
c_b = C_Alphabetic.Checked 
c_c = C_Symbols.Checked 
```

而不是`If`子句，或者更好的是，只需调用即可摆脱那些不必要的变量：

```
GenPass(NumericUpDown1.Value, C_Numeric.Checked, C_Alphabetic.Checked, C_Symbols.Checked, a) 
```

* * *

还有很多改进可能。例如，不要将`Complexity`参数作为传递，而是`Integer`创建一个`Enum`：

```
Enum Complexity
    LowerOnly
    UpperOnly
    Mixed
End Enum

Function GenPass(Length As Integer, Num As Boolean, Alp As Boolean, Ascii As Boolean, Complexity As Complexity) 
```

* * *

如果您使用的是 VB 10.0（由 .Net 4.0 引入），您可以摆脱笨重的`ByVal`关键字。此外，[.Net 命名指南](http://msdn.microsoft.com/en-us/library/xzf533w0%28v=vs.71%29.aspx)在。

* * *

还有一些注意事项：

如果您在`If`子句中检查布尔值，则无需显式编写`= True`：

```
If a = 3 And Ascii = True Then 
```

可以写成

```
If a = 3 AndAlso Ascii Then 
```

请注意，由于它的短路行为，`AndAlso`通常更适合。`And`

此外，最好命名您的参数`useAcii`而不是`Acii`. 它会让它更清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:36:24.273

您可以使用以下代码来获得所需的结果。

```
If C_Numeric.Checked = True Then
    c_a = True
End If
If C_Alphabetic.Checked = True Then
    c_b = True
End If
If C_Symbols.Checked = True Then
    c_c = True
End If 
```

# iphone - 如何上传从 UIImagePickerController 获取的图像

> ID：12138484
> 
> 赞同：5
> 
> 时间：2012-08-27T08:21:09.717
> 
> 标签：iphone, objective-c, ios, uiimagepickercontroller, asihttprequest

用户从 iPhone 库中选择图像后`UIImagePickerController`，我想使用`ASIHTTPRequest`库将其上传到我的服务器。

我知道`ASIHTTPRequest`我可以使用文件的 URl 上传文件，但是如何获取图像 URL？

我知道我可以得到图像`UIImagePickerControllerReferenceURL`，看起来像这样：

```
"assets-library://asset/asset.JPG?id=F2829B2E-6C6B-4569-932E-7DB03FBF7763&ext=JPG" 
```

这是我需要使用的网址吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-01-11T10:59:39.780

有很多答案建议 UIImageJPEGRepresentation 或 UIImagePNGRepresentation。但是这些解决方案将转换原始文件，而这个问题实际上是关于按原样保存文件。

看起来直接从资产库上传文件是不可能的。但可以使用 PHImageManager 访问它以获取实际的图像数据。就是这样：

**Swift 3**（Xcode 8，仅适用于 iOS 8.0 及更高版本）

1) 导入照片框架

```
import Photos 
```

2) 在 imagePickerController(_:didFinishPickingMediaWithInfo:) 中获取资源 URL

3) 使用 fetchAssets(withALAssetURLs:options:) 获取资产

4) 使用requestImageData(for:options:resultHandler:)获取实际的图像数据。在此方法的结果处理程序中，您将拥有文件的数据和 URL（可以在模拟器上访问 URL，但不幸的是在设备上无法访问 - 在我的测试中 startAccessingSecurityScopedResource() 始终返回 false）。但是，此 URL 仍可用于查找文件名。

示例代码：

```
func imagePickerController(_ picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : Any]) {
    dismiss(animated: true, completion: nil)
    if let assetURL = info[UIImagePickerControllerReferenceURL] as? URL,
        let asset = PHAsset.fetchAssets(withALAssetURLs: [assetURL], options: nil).firstObject,
        let documentsPath = NSSearchPathForDirectoriesInDomains(.documentDirectory, .userDomainMask, true).first,
        let targetURL = Foundation.URL(string: "file://\(documentsPath)") {

        PHImageManager.default().requestImageData(for: asset, options: nil, resultHandler: { (data, UTI, _, info) in
            if let imageURL = info?["PHImageFileURLKey"] as? URL,
                   imageData = data {
                    do {
                        try data.write(to: targetURL.appendingPathComponent(imageURL.lastPathComponent), options: .atomic)

                        self.proceedWithUploadFromPath(targetPath: targetURL.appendingPathComponent(imageURL.lastPathComponent))

                   } catch { print(error) }
                }
            }
        })
    }
} 
```

这将为您提供包含正确名称的文件原样，您甚至可以在准备上传的多部分正文时获取其 UTI 以确定正确的 mimetype（除了通过文件扩展名确定它）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T08:44:35.730

有两种方法

**1：**

您可以使用**imagePickerController**委托上传图像

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{   

    UIImage *image = [info valueForKey:UIImagePickerControllerOriginalImage];
    //Upload your image
} 
```

**2：**

您可以保存选择的图像 url 并稍后使用它上传

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{

    NSString *imageUrl = [NSString stringWithFormat:@"%@",[info valueForKey:UIImagePickerControllerReferenceURL]];
    //Save the imageUrl
}

-(void)UploadTheImage:(NSString *)imageUrl{

 NSURL *url = [[NSURL alloc] initWithString:imageUrl];
 typedef void (^ALAssetsLibraryAssetForURLResultBlock)(ALAsset *asset);
 typedef void (^ALAssetsLibraryAccessFailureBlock)(NSError *error);    

 ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset){

  ALAssetRepresentation *rep = [myasset defaultRepresentation];
  CGImageRef iref = [rep fullResolutionImage];
  UIImage *myImage = nil;   

  if (ref) {
      myImage = [UIImage imageWithCGImage:iref scale:[rep scale] orientation:(UIImageOrientation)[rep orientation]];

        //upload the image   
     }      
  };      

  ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror){

  };          

  ALAssetsLibrary* assetslibrary = [[[ALAssetsLibrary alloc] init] autorelease];
 [assetslibrary assetForURL:url resultBlock:result block failureBlock:failureblock]; 
```

}

**注意：**`ALAssetsLibrary`使用ARC时请确定对象的范围。最好将`ALAssetsLibrary`对象用作单例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T09:29:02.093

将照片保存在 Document 目录中并使用该 url 上传。例如

```
NSString *jpgPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Test.jpg"];
[UIImageJPEGRepresentation(img, 1.0) writeToFile:jpgPath atomically:YES]; 
```

将此图片上传为`[request setFile:jpgPath forKey:@"image"]`；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T08:41:50.627

获取图像 UIImagePickerControllerReferenceUR。此示例代码如下

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    NSURL *imageURL = [info valueForKey:UIImagePickerControllerReferenceURL];
    ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset)
    {
        ALAssetRepresentation *representation = [myasset defaultRepresentation];
        NSString *fileName = [representation filename];
        NSLog(@"fileName : %@",fileName);

        CGImageRef ref = [representation fullResolutionImage];
        ALAssetOrientation orientation = [[myasset valueForProperty:@"ALAssetPropertyOrientation"] intValue];
        UIImage *image = [UIImage imageWithCGImage:ref scale:1.0 orientation:(UIImageOrientation)orientation];

    };

    ALAssetsLibrary* assetslibrary = [[[ALAssetsLibrary alloc] init] autorelease];
    [assetslibrary assetForURL:imageURL 
                   resultBlock:resultblock
                  failureBlock:nil];

} 
```

注意：它仅适用于**iOS 5**及更高版本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-14T21:38:21.430

我发现的最简单的方法是

第 1 步：获取 DocumentsDirectory 的路径

```
func fileInDocumentsDirectory(filename: String) -> String {
    let documentsFolderPath = NSSearchPathForDirectoriesInDomains(FileManager.SearchPathDirectory.documentDirectory, FileManager.SearchPathDomainMask.userDomainMask, true)[0] as NSString
    return documentsFolderPath.appendingPathComponent(filename)
} 
```

第 2 步：使用 tempFileName 保存在路径中

```
 func saveImage(image: UIImage, path: String ) {
    let pngImageData = UIImagePNGRepresentation(image)

    do {
        try pngImageData?.write(to: URL(fileURLWithPath: path), options: .atomic)
    } catch {
        print(error)
    }
} 
```

第三步：imagePickerController 函数中的使用

```
func imagePickerController(_ picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : Any]){

    if var image = info[UIImagePickerControllerOriginalImage] as? UIImage {// image asset

    self.saveImage(image: image, path: fileInDocumentsDirectory(filename: "temp_dummy_image.png"))

} 
```

第 4 步：在需要时获取图像

得到这样的参考

让 localfilepath = self.fileInDocumentsDirectory（文件名：“temp_dummy_image.png”）

第 5 步：使用图像后，丢弃临时图像

```
func removeTempDummyImagefileInDocumentsDirectory(filename: String) {

    let fileManager = FileManager.default
    let documentsUrl =  FileManager.default.urls(for: .documentDirectory, in: .userDomainMask).first! as NSURL
    let documentsPath = documentsUrl.path

    do {
        if let documentPath = documentsPath
        {
            let fileNames = try fileManager.contentsOfDirectory(atPath: "\(documentPath)")
            print("all files in cache: \(fileNames)")
            for fileName in fileNames {

                if (fileName.hasSuffix(".png"))
                {
                    let filePathName = "\(documentPath)/\(fileName)"
                    try fileManager.removeItem(atPath: filePathName)
                }
            }

            let files = try fileManager.contentsOfDirectory(atPath: "\(documentPath)")
            print("all files in cache after deleting images: \(files)")
        }

    } catch {
        print("Could not clear temp folder: \(error)")
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T09:14:33.807

**您可以通过创建表单来上传图片试试下面的代码**

```
-(void)UploadImage{

NSString *urlString = @"yourUrl";
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

NSMutableData *body = [NSMutableData data];

NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
[request addValue:contentType forHTTPHeaderField:@"Content-Type"];

// file
NSData *imageData = UIImageJPEGRepresentation([self scaleAndRotateImage:[selectedImageObj]],90);

[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
// [body appendData:[[NSString stringWithString:@"Content-Disposition: attachment; name=\"user_photo\"; filename=\"photoes.jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"image\"; filename=\"%@.jpg\"\r\n",@"ImageNmae"] dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:imageData]];
[body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

// close form
[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
// set request body
[request setHTTPBody:body];
//return and test
NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

  } 
```

# android - 使用 SL4A 从 python 脚本返回结果返回到 Android 应用程序

> ID：12138485
> 
> 赞同：3
> 
> 时间：2012-08-27T08:21:14.327
> 
> 标签：android, python, sl4a

在我的 java android 应用程序中调用 startActivityForResult() 后，我正在尝试使用 (SL4A) 从 python 脚本中获取结果。但是我总是在我的 onActivityResult() 中得到一个空意图

***从我的 Java 应用程序运行 python 脚本***

```
public static Intent buildStartInBackgroundIntent(File script) {
final ComponentName componentName = Constants.SL4A_SERVICE_LAUNCHER_COMPONENT_NAME;
Intent intent = new Intent();
intent.setComponent(componentName);
intent.setAction(Constants.ACTION_LAUNCH_BACKGROUND_SCRIPT);
intent.putExtra(Constants.EXTRA_SCRIPT_PATH, script.getAbsolutePath());
return intent;
}
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.custom_layout_running);
String pythonScript = "/sdcard/sl4a/scripts/pythondecoder.py";
Intent intent = buildStartInBackgroundIntent(new File(pythonScript));
intent.putExtra("serialinput","MessageIn");
startActivityForResult(intent, PYTHONSCRIPTDECODE);
} 
```

***完成后从 pythonscript 接收结果***

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
switch(requestCode){
case  PYTHONSCRIPTDECODE:
Log.d("Robin_ValueCheck","Python reply me -> "+data.getExtras().getString("SCRIPT_RESULT"));
break;
} 
```

***但是根据活动结果，Logcat 错误消息。***

```
08-27 09:56:41.945: E/AndroidRuntime(29438): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=3050, result=0, data=null} to activity {xxx.xxx.xxx/com.xxx.xxx.CustomLayoutViewer}: java.lang.NullPointerException 
```

***这是我的 python 脚本，由 SL4A 运行***

```
import android
droid = android.Android()
mIntent = droid.getIntent().result
Extras = mIntent["extras"]
Input = Extras["serialinput"]

Result_OK = -1
resultData = "Returned from SL4a Script!"
droid.setResultString(Result_OK, resultData) 
```

当 python 脚本退出时，我的 onActivityResult 会收到通知，如 REQUEST = 3050 所示。但是应该返回的 Intent 是 NULL。我已经在我的 python 脚本中调用了 setResultString() 。知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T18:12:02.380

不幸的是，这不起作用，另请参阅问题 239 ...您可能想在该问题上加注星标：[http ://code.google.com/p/android-scripting/issues/detail?id=239](http://code.google.com/p/android-scripting/issues/detail?id=239)

# php - php：替换范围内的字符串

> ID：12138491
> 
> 赞同：2
> 
> 时间：2012-08-27T08:21:59.440
> 
> 标签：php, string, binary

我有一个大的（~6MB）二进制“字符串”。现在我想用字符串范围替换一些字节。

假设，将偏移量 1024 的子字符串（二进制，字节）替换为长度为 84 的另一个字符串（二进制，字节），**长度相同**（没有数据扩展）。

我怎样才能用 php 做到这一点，这样性能不会很差。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:27:16.460

Using[`substr_replace()`](http://php.net/manual/en/function.substr-replace.php)将创建一个新字符串并返回其值；将它分配给同一个变量应该释放它的旧值。

```
$s = substr_replace($s, $replacement, 1024, 84); 
```

# javascript - 链接 CSS、Javascript 和 HTML 过程失败

> ID：12138492
> 
> 赞同：0
> 
> 时间：2012-08-27T08:21:59.763
> 
> 标签：javascript, html, css

因此，使用我在[这里](https://stackoverflow.com/a/12135449/1414455)得到的建议，我尝试像这样实现它：

1.  我创建了以下`kbd.js`文件：

    ```
    function fnRenderKBD(elem, keysToDisplay)
    {
        var delimiter = '';
        var content = '';
        for(var i = 0, length = keysToDisplay.length; i < length; i++) {
            content+= delimiter + '<kbd>' + keysToDisplay[i] + '</kbd>';
            delimiter = '+';
        }
        elem.innerHTML = content;
    }
    (function() {
            var keys = [ 'Ctrl+X','Y','Z'];   
            var elem = document.getElementById('display');
            fnRenderKBD(elem, keys);
        }
    )(); 
    ```

2.  然后我创建了以下样式表，称为`kbd.css`：

    ```
    kbd {
        padding: 0.1em 0.6em;
        border: 1px solid #CCC;
        font-size: 11px;
        font-family: Arial,Helvetica,sans-serif;
        background-color: #F7F7F7;
        color: #333;
        -moz-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;
        -webkit-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px white inset;
        box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px white inset;
        -moz-border-radius: 3px;
        -webkit-border-radius: 3px;
        border-radius: 3px;
        display: inline-block;
        margin: 0 0.1em;
        text-shadow: 0 1px 0 white;
        line-height: 1.4;
        white-space: nowrap;
    }​ 
    ```

3.  然后，我尝试构建一个简单的 HTML 文件来检查结果，称为`keyboard-rendering.htm`

    ```
    <script src="kbd.js"> </script>
    <LINK REL=StyleSheet HREF="kbd.css" TYPE="text/css">​
    <div id="display"></div>​ 
    ```

我的问题是，为什么这不起作用（输出为“â€‹”），即为什么它没有给我与[这里](http://jsfiddle.net/gTYxP/1/)右下象限相同的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:31:16.090

在页面末尾调用您的脚本。因为您的脚本没有找到 id 为“display”的元素。

改变这个

```
<script src="kbd.js"> </script>
<LINK REL=StyleSheet HREF="kbd.css" TYPE="text/css">​
<div id="display"></div>​ 
```

至

```
<LINK REL=StyleSheet HREF="kbd.css" TYPE="text/css">​
<div id="display"></div>​
<script src="kbd.js"> </script> 
```

或者，如果您想首先包含您的脚本文件而不是更改 kbd.js 中的函数

```
(function() {
        var keys = [ 'Ctrl+X','Y','Z'];   
        var elem = document.getElementById('display');
        fnRenderKBD(elem, keys);
    }
)(); 
```

至

```
window.onload = function() {
    var keys = [ 'Ctrl+X','Y','Z'];   
    var elem = document.getElementById('display');
    fnRenderKBD(elem, keys);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:32:12.093

您最直接的错误是在加载 .js 文件***后***`'display'`放在页面上。

 ****当浏览器下载.js***文件时，它会在下载完成后立即运行其中的内容。

这意味着当您的键盘代码被加载时，它会在`<div>`甚至存在之前进行设置。

那很好，如果您要设置以后可以触发的功能。但是 .js 文件底部的代码，里面的东西`(function () {}());`会立即触发。它正在寻找`<div>`，但它不会找到它。

将 .js 文件移动到其他所有文件的下方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T08:44:42.910

也许遵循这个：

```
window.onload = function() {

    var keys = [ 'Ctrl+X','Y','Z'];   
    var elem = document.getElementById('display');

    fnRenderKBD(elem, keys);
}; 
```

并检查您页面的字符集：

```
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T08:58:25.650

您应该将脚本代码放在 div 元素之后的 body 标记中，如下所示：

```
<body>

<div id="display"></div>
<script>
function fnRenderKBD(elem, keysToDisplay)
{
    var delimiter = '';
    var content = '';
    for(var i = 0, length = keysToDisplay.length; i < length; i++) {
        content+= delimiter + '<kbd>' + keysToDisplay[i] + '</kbd>';
        delimiter = '+';
    }

    elem.innerHTML = content;
}

(function() {
    var keys = [
        'Ctrl+X',
        'Y',
        'Z'
    ];

    var elem = document.getElementById("display");
    fnRenderKBD(elem, keys);
})();
</script>

</body> 
```

它会工作:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T08:36:17.820

请将您的脚本放在页面末尾，然后它将正常工作

***链接JS***

```
<script type="text/javascript" src="kbd.js"> </script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T08:40:18.500

请把你的js包含在底部。

```
 <LINK REL=StyleSheet HREF="kbd.css" TYPE="text/css">
<div id="display"></div>
<script src="kbd.js"> </script> 

```*

# iphone - 如何在 tesseract OCRing 时停止？

> ID：12138497
> 
> 赞同：4
> 
> 时间：2012-08-27T08:22:17.350
> 
> 标签：iphone, block, ocr, tesseract

我在我的 iPhone 应用程序中使用 tesseract 进行图像 OCRing。我想在运行时停止所有 OCR 进程。

这是我的代码：

在 .h 文件中：

```
dispatch_queue_t main;
tesseract::TessBaseAPI *tesseract;
uint32_t *pixels; 
```

在 .m 文件中：

```
- (void)processOcrAt:(UIImage *)image
{
    [self setTesseractImage:image];

    //char* utf8Text = tesseract->GetUTF8Text();
    //[self performSelector:@selector(ocrProcessingFinished:) withObject:[NSString stringWithUTF8String:utf8Text]];
    //dispatch_queue_t queue = dispatch_queue_create("com.awesome", 0);

    main = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(main, ^{
        tesseract->Recognize(NULL);
        char* utf8Text = tesseract->GetUTF8Text();
        [self performSelectorOnMainThread:@selector(ocrProcessingFinished:)
                               withObject:[NSString stringWithUTF8String:utf8Text]
                               waitUntilDone:NO];
        delete [] utf8Text;
    });

}

-(IBAction)backPressed:(id)sender{
    dispatch_release(main);
    tesseract->Clear();
    //tesseract->End();

    delete tesseract;
    tesseract = nil;
    delete pixels;
    [self.navigationController popViewControllerAnimated:YES];
} 
```

当我在 ocr 运行时点击后退按钮时，它会崩溃。因为 ocr 仍在运行。我怎样才能阻止它？我在 tesseract 中找不到任何方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T00:03:43.450

Recognize() 函数中的 ETEXT_DESC 参数怎么样？（不确定当你写你的答案 fulberto100 时它是否在那里）。它是用于跟踪进度以及取消进度的监视器。它在 TessBaseAPI::ProcessPage 中使用。不过我自己没试过。

```
ETEXT_DESC monitor;
monitor.cancel = NULL;
monitor.cancel_this = NULL;
monitor.set_deadline_msecs(timeout_millisec);
// Now run the main recognition.
failed = Recognize(&monitor) < 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:53:31.140

这是tesseract形式的答案： [https ://groups.google.com/forum/?fromgroups=#!topic/tesseract-ocr/1uLF4BmmmUg](https://groups.google.com/forum/?fromgroups=#!topic/tesseract-ocr/1uLF4BmmmUg)

我认为问题的症结在于您试图在执行过程中随机停止 OCR 线程，但期望 Tesseract 实例的状态保持一致。您想要删除该实例是正确的，否则您会出现内存泄漏，但看起来您在异常停止 OCR 线程后无法执行此操作。在我们自己的 iPhone 应用程序 (ScanBizCards) 中，我们在这种情况下所做的是让 OCR 线程在后台完成其工作，即使它的结果将被忽略并且不会显示给用户。缺点主要是如果用户在中止扫描后立即开始新扫描，我们会延迟新扫描的开始，直到前一个（中止）扫描完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-05T12:29:40.637

该程序解释了 Tesseract 使用两个线程处理页面的进度：

```
#include <baseapi.h>
#include <allheaders.h>
#include <iostream>
#include <thread>
using namespace std;
using namespace tesseract;           

//monitorProgress will show actual progress done by tesseract
void monitorProgress();

//Here image send to extract text
void tesseractProcessing();

TessBaseAPI *api;
ETEXT_DESC *monitor = new ETEXT_DESC();

int main()
{
    //This statement will launch multiple threads in loop
    thread t1(tesseractProcessing);
    thread t2(monitorProgress);
    std::cout << "The main function execution\n";
    t1.join();
    t2.join();
    return 0;
}

void monitorProgress()
{
    while (1)
    {        
        cout << "Current Progress :   " << monitor[0].progress << endl;      
    }
}     

void tesseractProcessing()
{
    api = new TessBaseAPI(); 
    Pix *image = pixRead("myimage.jpg");
    api->Init("tessdata", "eng", OEM_DEFAULT);      
    api->SetPageSegMode(PSM_AUTO);
    api->SetImage(image);

    api->Recognize(monitor);

    cout << "out from recognition"<<endl;

    ofstream myfile("myfile.html");
    if (myfile.is_open())
    {
        myfile << api->GetHOCRText(0);
    }
    myfile.close();
} 
```

# gmail - 如果收件人的电子邮件被破坏，gmail 对发送邮件的限制是什么？

> ID：12138501
> 
> 赞同：1
> 
> 时间：2012-08-27T08:22:40.090
> 
> 标签：gmail, email, google-account

我有一个应用程序尝试向我们的注册用户群发送电子邮件，但问题是大量用户的电子邮件未经验证，预计不存在或损坏。那么是否有限制表明超过这么多邮件退回帐户被锁定（或类似的东西）。如果是，那么对不同消息或不同电子邮件、唯一电子邮件等的数量施加的限制是什么？

我知道存在限制，但找不到数字。

# python - 按我添加项目的顺序迭代字典，python

> ID：12138505
> 
> 赞同：0
> 
> 时间：2012-08-27T08:22:55.410
> 
> 标签：python, dictionary, iteration

假设我像这样创建字典：

```
self.defaultValues = {}
self.defaultValues["A"] = "10"
self.defaultValues["B"] = "100"
self.defaultValues["C"] = "20"
self.defaultValues["D"] = "12.5" 
```

我希望能够以添加它们的相同顺序迭代项目，这意味着

```
for k in self.defaultValues:
     print k 
```

会导致

```
A
B
C
D 
```

另外，如果我有另一个列表，不一定是相同的长度。我想迭代字典和列表，如果列表中存在一个值，我将打印它，否则如果形成字典，我将打印。它很容易用一个简单的

```
if self.list.count(value) != 0: 
```

但我认为可能有一种更优雅的方式来做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T08:24:59.793

对于第一个问题，使用`OrderedDict`：

```
from collections import OrderedDict
d = OrderedDict()
d["A"] = "10"
d["B"] = "100"
d["C"] = "20"
d["D"] = "12.5"
for k in d:
    print k 
```

`OrderedDict`尊重元素的插入顺序。

对于你的第二个问题（你真的应该为不同的问题分别提出不同的问题），你可以`in`用来测试一个对象是否在列表中：

```
l = [1,2,3,4]
print 1 in l # prints True
print 5 in l # prints False 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T08:27:48.813

对于问题的第一部分，请使用[collections.OrderedDict](http://docs.python.org/library/collections.html#collections.OrderedDict)

第二，假设您仍然关心订单，您可以尝试（并假设 d 是原始字典）：

```
tmp_dict = OrderedDict((x, x) for x in l)
tmp_dict.update(d) 
```

您现在拥有`tmp_dict`您关心的值（`tmp_dict.values()`将显示它们）。

# regex - Perl：匹配在引号中包含斜线的字符串

> ID：12138508
> 
> 赞同：2
> 
> 时间：2012-08-27T08:23:17.467
> 
> 标签：regex, perl

我目前正在编写一个 Perl 脚本来解析配置文件。语法如下

```
{command parameter1 parameter2} 
```

其中第二个参数是可选的。首先，我只想提取 和 之间的`{`内容`}`。我正在使用此代码

```
while (<FILE>) {
    chomp;
    unless ($_ =~ m/^\/\//) {
            $_ =~ /^\{(.*?)\}/s;
            print $1;
} 
```

`print`字符串将被进一步评估，而不是命令。我现在的问题是脚本只是停止使用一些字符串

只要参数周围有引号，脚本就可以工作。这个

```
{exec sed 's/ClientAliveInterval\ 300/ClientAliveInterval\ 1800/\' /etc/ssh/sshd_config > /etc/ssh/sshd_config.new} 
```

将返回括号之间的内容，但由于可能有第二个参数，现在很难区分没有引号的参数

其他字符串如

```
{exec "cp /etc/ssh/sshd_config /etc/ssh/sshd_config.bak"}
{exec "/etc/init.d/ssh reload"} 
```

工作完美，包括引号。

但是现在，引号中的字符串，包括斜线或加号（可能还有其他）在这一点上只是冻结 perl 脚本：

```
{exec "chmod +x /root/setSSHTimer.sh"}
{exec "sed 's/ClientAliveInterval\ 300/ClientAliveInterval\ 1800/\' /etc/ssh/sshd_config > /etc/ssh/sshd_config.new"} 
```

两者都带引号。将第一个重写为“chmod 770 ...”时，它再次起作用。

任何想法是什么导致了这里的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T08:53:19.877

问题不在于您显示的代码，它只是提取`{...}`大括号之间的所有内容，而是在*评估的进一步*代码中。如果您遇到问题，请发布此内容

请注意，您可以通过使用不同的分隔符来避免在正则表达式中转义斜杠，并且类似的行`next if m|^//|`避免将循环的所有其余部分放在`if`语句中

解析命令行很尴尬 - 因为您必须处理包含在`"..."`和`'...'`引号中的参数，允许在参数中使用转义引号 - 但可能

这是一个似乎可以正确解析所有示例数据的程序

```
use strict;
use warnings;

while (<DATA>) {

  next if m|^//| or not /\S/;

  if (/^\{(.*?)\}/) {
    my $command = $1;
    my @fields = $command =~ /'(?:\\'|[^'])*'|"(?:\\"|[^"])*"|\S+/g;
    print join(' ', map "[$_]", @fields), "\n";
  }
}

__DATA__
{exec sed 's/ClientAliveInterval\ 300/ClientAliveInterval\ 1800/\' /etc/ssh/sshd_config > /etc/ssh/sshd_config.new'}
{exec "cp /etc/ssh/sshd_config /etc/ssh/sshd_config.bak"}
{exec "/etc/init.d/ssh reload"}
{exec "chmod +x /root/setSSHTimer.sh"}
{exec "sed 's/ClientAliveInterval\ 300/ClientAliveInterval\ 1800/\' /etc/ssh/sshd_config > /etc/ssh/sshd_config.new"} 
```

**输出**

```
[exec] [sed] ['s/ClientAliveInterval\ 300/ClientAliveInterval\ 1800/\' /etc/ssh/sshd_config > /etc/ssh/sshd_config.new']
[exec] ["cp /etc/ssh/sshd_config /etc/ssh/sshd_config.bak"]
[exec] ["/etc/init.d/ssh reload"]
[exec] ["chmod +x /root/setSSHTimer.sh"]
[exec] ["sed 's/ClientAliveInterval\ 300/ClientAliveInterval\ 1800/\' /etc/ssh/sshd_config > /etc/ssh/sshd_config.new"] 
```

* * *

**更新**

例如，此配置格式应至少分成几行，以便可以删除引号和转义符

```
exec
sed
s/ClientAliveInterval\ 300/ClientAliveInterval\ 1800/ /etc/ssh/sshd_config > /etc/ssh/sshd_config.new

exec
cp /etc/ssh/sshd_config /etc/ssh/sshd_config.bak

exec
/etc/init.d/ssh reload

exec
chmod +x /root/setSSHTimer.sh

exec
sed
s/ClientAliveInterval\ 300/ClientAliveInterval\ 1800/\' /etc/ssh/sshd_config > /etc/ssh/sshd_config.new 
```

这很容易正确输入和解析（尽管我确信你的最后一个`sed`例子是错误的！）

# javascript - 使用javascript更改任意文本的背景颜色

> ID：12138518
> 
> 赞同：0
> 
> 时间：2012-08-27T08:23:55.503
> 
> 标签：javascript, jquery, css

是否有一种简单的方法可以将跨度环绕在 html 段落中的任意文本上？例如，给定以下原始 html：

```
<p>Here is a dandy block of text to color up</p>
<p> WHOAH another paragraph</p> 
```

我想根据用户输入包装文本的任意部分。因此，一组输入可能会将其转换为

```
<p>Here is a <span style="background:yellow">dandy block</span> of text to color up</p>
<p> WHOAH <span style="background:green">another paragraph</span></p> 
```

虽然另一组输入可能会创建

```
<p>Here is a<span style="background:yellow">a dandy block</span> of text to color up</p>
<p> WHOAH <span style="background:green">another</span> paragraph</p> 
```

这个问题与[this](https://stackoverflow.com/questions/2139616/window-getselection-gives-me-the-selected-text-but-i-want-the-html)和[this](https://stackoverflow.com/questions/499126/jquery-set-cursor-position-in-text-area)有关，但是，与我的目标的主要区别是我希望高亮是永久性的，而不仅仅是临时选择，而且我还希望它在 p 元素而不是 textareas 中工作。

如果可能的话，我想它看起来像使用 jQuery

```
var innerText = $('p')[p_index].slice(char_start, char_end).text();
$('p')[p_index].slice(char_start, char_end).html(
    "<span style=\"background:yellow\">"+
    innerText +
    "</span>"); 
```

这将（理论上）选择`p_index`段落，获取给定索引之间的范围并将其替换为新创建的跨度，其中嵌套了原始文本。这显然不起作用，因为 jQuery 对象上的下标不会返回另一个内部 jQuery 对象。尽管

```
$("p").slice(0, 1).html("<span style=\"background: blue\">" +
                        $("p").slice(0, 1).text() + 
                        "</span>"); 
```

完全符合我在段落级别上的要求，但不是在文本级别上。考虑到我拥有的字符范围，我**可以**使用这种方法通过完全编写每个段落来进行替换，但是如果有简单的方法，我将非常感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T08:37:17.823

```
$("p")[p_index] 
```

为您提供该段落的实际 DOM 元素`p_index`，因此要获取您需要使用的段落的内容：

```
$("p")[p_index].innerHTML
// OR
$("p")[p_index].textContent 
```

不过，使用 jQuery 会更容易。您不会使用 jQuery`slice()`方法将范围缩小为单个元素，而是使用[`.eq()`方法](http://api.jquery.com/eq/). 尝试这样的事情：

```
$('p').eq(p_index).html(function(i,currentText) {
     return currentText.substring(0, char_start) +
            "<span style=\"background:yellow\">" +
            currentText.substring(char_start, char_end) +
            "</span>" +
            currentText.substring(char_end);
}); 
```

当您将函数传递给[`.html()`方法](http://api.jquery.com/html/)时，jQuery 会将 html 设置为您从函数返回的任何内容。jQuery 将元素的当前（内部）html 传递给函数，以便您可以处理它。（如果您对包含多个元素的 jQuery 对象执行此操作，您的函数会为每个元素调用一次，以便可以单独处理它们。）

演示：http: [//jsfiddle.net/62HHk/](http://jsfiddle.net/62HHk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:26:45.157

我过去使用过[这个插件](http://bartaz.github.com/sandbox.js/jquery.highlight.html)，效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:32:22.087

尝试这个：

```
$('input[type=text]').keyup(function() {
    var val = $.trim(this.value);
    var text = $('p').text().split(' ')
    $.each(text, function(i, v) {
        if (v == val) {
            text[i] = '<span>'+v+'</span>';
        }
    })
    $('p').html(text.join(' '))   
}) 
```

[小提琴](http://jsfiddle.net/uxhnA/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T08:45:22.287

这应该有效。它可以很容易地变成一个函数，将您要查找的单词作为参数。

[jQuery.textReplace by Ben Alman](http://benalman.com/projects/jquery-replacetext-plugin/)

```
$('.text').replaceText( /hello/g, '<span classs="interesting">hello</span>' ); 
```

# javascript - Javascript 检查零值的参数

> ID：12138519
> 
> 赞同：1
> 
> 时间：2012-08-27T08:23:57.857
> 
> 标签：javascript

我正在编写一个函数来检查参数是否为零，并且它似乎无法正常工作。注意：使用 Chrome 作为我的浏览器，但此代码应支持跨浏览器。

```
// check all arguments, and make sure they aren't zero

function zeroCheck(arg1, arg2) {
    var i, argsLen = arguments.length;
    for (i = 0; i <= argsLen; i += 1) {
        if (arguments[i] === 0) {
            // This is where it doesn't behave as I expected
            arguments[i] = 1; // make arg1 = 1
        }
    }
    console.log(arg1); // arg1 = 0
}

zeroCheck(0, 2); 
```

我期待`arg1`等于`1`，但它仍然等于`0`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:57:09.577

来自 ECMA-262 规范：

> "*对于非严格模式函数，数组索引（在 15.4 中定义）命名的参数对象的数据属性，其数值名称值小于相应函数对象的形式参数的数量，最初与相应的参数绑定共享它们的值函数的执行上下文。这意味着更改属性会更改参数绑定的相应值，反之亦然。如果这样的属性被删除然后重新定义，或者如果属性被更改为访问器属性，则这种对应关系被破坏。对于严格模式函数，参数对象的属性值只是传递给函数的参数的副本，属性值和形参值之间没有动态链接。”*

但是，如果您阅读有关如何设置`arguments`对象的技术细节，我想您会发现它是基于在调用函数时实际传递给函数的参数数量，而不是声明了多少命名参数，因此使用`arguments`和循环如果不是全部传入，检查每个命名参数的值可能不起作用。尽管在您的情况下，如果您专门测试`0`它应该可以工作，因为未传递的参数将是`undefined`而不是`0`.

话虽如此，`arguments`对象的*实际*行为方式取决于浏览器。Chrome 不遵循规范。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:28:31.363

尽管某些浏览器似乎可以按照您想要的方式工作（Chrome 和 Firefox），但从 ECMAScript 规范中我看不出它总是这样。听起来参数数组可能只是对非严格模式下命名参数的引用，并且它明确表示两者在严格模式下不应相互连接（换句话说，您想要做的是具体不应该在严格模式下工作）。

您可以在这个 jsFiddle [http://jsfiddle.net/jfriend00/bG5xp/](http://jsfiddle.net/jfriend00/bG5xp/)中看到 Chrome 似乎按照规范描述实现了它。非严格模式下有联动`arguments[0]`，`arg1`严格模式下没有联动。仔细阅读规范并没有说 javascript 必须在非严格模式下在两者之间建立联系，但它确实让它听起来很可能。如果你想依赖它并且你确定你永远不需要你的代码在严格模式下工作，那么你将不得不测试一堆浏览器来查看你想要的行为是否得到广泛支持。

从规范中也不清楚参数数组是否总是可以修改的，尽管考虑到它是用 javascript 对象（不是实际数组）实现的，这似乎更有可能。

修改参数数组的安全方法是先制作副本并修改副本。当然，这不会修改任何命名参数。如果您愿意，可以手动修改这些。

制作参数数组副本的常用方法是：

```
var args = Array.prototype.slice.call(arguments, 0); 
```

通常使用`arguments`数组或命名参数，而不是两者都使用，因为任何命名参数也在参数数组中的已知位置，所以当你修改参数数组时，你真的不需要担心命名参数改变值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T08:34:35.090

像这样试试。`arg1`with value`0`评估为`false/falsy`，因此您可以使用此[快捷布尔评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)：

```
function zeroCheck(arg1,arg2) {
    arg1 = arg1 || 1; 
    console.log(arg1); //=> 1
}

zeroCheck(0,2); 
```

检查所有参数的通用函数（返回一个`Array`）

```
function zeroCheckArgs(args){
  return [].slice.call(args).map(function(a){return a || 1;});
}

//more conservative
function zeroCheckArgsAlt(args){
  var retArgs = [];
  for (var i=0;i<args.length;i+=1){
    retArgs.push(args[i] || 1);
  }
  return retArgs;
}

function some(){
  var args = zeroCheckArgs(arguments);
  console.log(args);
}

function someAlt(){
  var args = zeroCheckArgsAlt(arguments);
  console.log(args);
}

some(1,0,0,12,12,14,0,1);    //=> [1, 1, 1, 12, 12, 14, 1, 1]
someAlt(1,0,0,12,12,14,0,1); //=> [1, 1, 1, 12, 12, 14, 1, 1] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T08:30:10.007

它对我有用，检查[这个例子小提琴](http://jsfiddle.net/5WchY/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T09:20:36.843

@nnnnnn -

> “对于非严格模式函数，数组索引（在 15.4 中定义）命名的参数对象的数据属性，其数值名称值小于相应函数对象的形式参数的数量，最初与相应的参数绑定共享它们的值函数的执行上下文。这意味着更改属性会更改参数绑定的相应值，反之亦然。如果这样的属性被删除然后重新定义，或者如果属性被更改为访问器属性，则这种对应关系被破坏。对于严格模式函数，参数对象的属性值只是传递给函数的参数的副本，属性值和形参值之间没有动态链接。”

你的引文实际上回答了我原来的问题。我在下面发布的代码无法按预期工作的原因是因为我实际上使用的是“严格”模式。

```
// check all arguments, and make sure they aren't zero

function zeroCheck(arg1,arg2) {
    var i, argsLen = arguments.length;
    for (i = 0; i <= argsLen; i += 1) {
        if (arguments[i] === 0) {
            // This is where it doesn't behave as I expected
            arguments[i] = 1; // make arg1 = 1
        }
    }
    console.log(arg1); // arg1 = 0
}

zeroCheck(0,2); 
```

它适用于 xdazz、Jeroen Moons 和 jFriend00 - 因为它们不包括严格： http: [//jsfiddle.net/nSJGV/](http://jsfiddle.net/nSJGV/)（非严格） [http://jsfiddle.net/HDjWx/](http://jsfiddle.net/HDjWx/)（严格）

# java - 通过 GZIP 流读取和写入对象？

> ID：12138526
> 
> 赞同：3
> 
> 时间：2012-08-27T08:24:22.670
> 
> 标签：java, stream, compression, gzip, gzipinputstream

我是 Java 新手。我想学习使用 GZIPstreams。我已经尝试过这个：

```
ArrayList<SubImage>myObject = new ArrayList<SubImage>(); // SubImage is a Serializable class

ObjectOutputStream compressedOutput = new ObjectOutputStream(
   new BufferedOutputStream(new GZIPOutputStream(new FileOutputStream(
   new File("....")))));
compressedOutput.writeObject(myObject); 
```

和

```
ObjectInputStream compressedInput = new ObjectInputStream(
   new BufferedInputStream(new GZIPInputStream(new FileInputStream(
   new File("....")))));
myObject=(ArrayList<SubImage>)compressedInput.readObject(); 
```

当程序写入`myObject`文件时没有抛出任何异常，但是当它到达该行时

```
myObject=(ArrayList<SubImage>)compressedInput.readObject(); 
```

它抛出这个异常：

```
Exception in thread "main" java.io.EOFException: Unexpected end of ZLIB input stream 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T10:53:50.043

您必须刷新并关闭您的输出流。否则，至少，`BufferedOutputStream`不会将所有内容写入文件（为了避免惩罚性能，它会大量写入）。

如果你打电话`compressedOutput.flush()`就`compressedOutput.close()`足够了。

您可以尝试编写一个简单的字符串对象并检查文件是否写得好。

如何？如果您编写一个`xxx.txt.gz`文件，您可以使用您喜欢的 zip 应用程序打开它并查看 xxx.txt。如果应用程序抱怨，则内容未完整写入。

**评论的扩展答案：压缩更多数据**

*更改序列化*

如果 SubImage 对象是您自己的对象，您可以更改它的标准序列化。检查[java.io.Serializable javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/Serializable.html)以了解如何操作。这很简单。

*只写你需要的*

序列化的缺点是需要在您编写的每个实例之前编写“它是一个子图像”。如果您事先知道会发生什么，则没有必要。因此，您可以尝试更手动地对其进行序列化。

写你的列表，而不是写一个对象直接写符合你的列表的值。您只需要一个 DataOutputStream （但 ObjectOutputStream 是一个 DOS，所以无论如何您都可以使用它）。

```
dos.writeInt(yourList.size()); // tell how many items
for (SubImage si: yourList) {
   // write every field, in order (this should be a method called writeSubImage :)
   dos.writeInt(...);
   dos.writeInt(...);
   ...
}

// to read the thing just:
int size = dis.readInt();
for (int i=0; i<size; i++) {
   // read every field, in the same order (this should be a method called readSubImage :)
   dis.readInt(...);
   dis.readInt(...);
   ...
   // create the subimage
   // add it to the list you are recreating
} 
```

此方法更手动，但如果：

1.  你知道要写什么
2.  对于许多类型，您不需要这种序列化

它比 Serializable 对应物相当实惠且绝对压缩。

请记住，还有其他框架可以序列化对象或创建字符串消息（用于 xml 的 XStream、用于二进制消息的 Google 协议缓冲区等）。该框架可以直接处理二进制文件或编写可以写入的字符串。

如果你的应用需要更多关于这方面的信息，或者只是好奇，也许你应该看看它们。

*替代序列化框架*

刚刚查看 SO 并发现了几个解决此问题的问题（和答案）：

[https://stackoverflow.com/search?q=alternative+serialization+frameworks+java](https://stackoverflow.com/search?q=alternative+serialization+frameworks+java)

我发现 XStream 使用起来非常简单直接。JSON 是一种非常易读和简洁的格式（并且兼容 Javascript，这可能是一个加号:)。

我应该去：

```
Object -> JSON -> OutputStreamWriter(UTF-8) -> GZippedOutputStream -> FileOutputStream 
```

# macos - git 操作要求我输入某些目录的用户名/密码，而不是其他目录

> ID：12138527
> 
> 赞同：1
> 
> 时间：2012-08-27T08:24:35.490
> 
> 标签：macos, git, github

我有一个适用于 git 的 SSH 密钥设置（使用 github），效果很好。但是 - 我最近开始在某个目录（下面有几个 git 存储库）上工作，并且在这些存储库上 - 我所做的每个操作 - 都需要我使用用户名和密码。

任何其他目录 - 一切正常。

我要补充一点，那里的存储库曾经可以使用`svn`，现在我们正在使用`git`它们（以防它有任何相关性）。然而，我确实尝试重新克隆和删除所有`svn`文件 - 没有区别。

我注意到的另一件事是子模块也需要用户名和密码，但是子模块的子模块没有它们也可以工作。

我真的迷路了，这真的很烦人 - 会得到帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:41:17.807

好吧，在查看之后-我意识到这不是目录问题-而是新旧存储库。

似乎它只是在某个时候破裂了。（也许升级到 Mountain lion ，也许自己在 Xcode 之外安装新的 git）

我决定去找我们在 github 上的好朋友（带着他们很棒的常见问题解答）。我刚刚重新做了以下设置教程，现在它就像一个魅力： [https ://help.github.com/articles/set-up-git](https://help.github.com/articles/set-up-git)

希望这可以帮助将来遇到同样烦人的问题的人。

利维乌

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:34:18.063

每个子模块都是自己的 Git 存储库，具有自己的远程 GitHub“来源”。
如果您的 ssh 密钥未添加到*这些*存储库中，GitHub 将询问用户名/密码以进行推送操作。

# c# - 字符串连接

> ID：12138528
> 
> 赞同：0
> 
> 时间：2012-08-27T08:24:46.183
> 
> 标签：c#

```
string res1 = "CalcAPI.GetXElementValue(" + "\"" + res[0] + "\"" + "," + "\"" + res[1] + "\"" + ","  + false +  ")" 
```

在

```
res[0] = "IRS5555"
res[1] = "IRS001" 
```

这段代码的输出是：

```
CalcAPI.GetXElementValue("IRS5555","IRS001",False) 
```

但我想要

```
CalcAPI.GetXElementValue("IRS5555","IRS001",false) 
```

`false`小写。

抱歉没有提供完整的代码... false 不是静态的...

```
 public static object GetElementDataType(string DataType)
     {
         ///Write here methos for fetching data type of current element.
          object res = null;
         switch (DataType.ToLower())
          {
              case "int":
                 res = 0;
                 break;
              case "double":
                 res = 0.0;
                 break;
              case "string":
                 res = "";
                 break;
              case "myboolean":
                 res = false;
                 break;
              default:
                 res = "";
                 break;
          }
         return res;
     }

     string res1 = 
         "CalcAPI.GetXElementValue(" + "\"" + res[0] + "\"" + "," 
                                     + "\"" + res[1] + "\"" + ","  
                                     + GetElementDataType("myboolean") +  ")" 
```

那么结果是

```
 CalcAPI.GetXElementValue("IRS5555","IRS001",False) 
```

但我想要

```
 CalcAPI.GetXElementValue("IRS5555","IRS001",false) 
```

如果我通过双倍

```
 string res1 = "CalcAPI.GetXElementValue(" + "\"" + res[0] + "\"" + "," + "\"" + res[1] + "\"" + ","  + GetElementDataType("double") +  ")" 
```

那么结果是

```
CalcAPI.GetXElementValue("IRS5555","IRS001",0) 
```

但我想要

```
CalcAPI.GetXElementValue("IRS5555","IRS001",0.0) 
```

如果我通过字符串

```
string res1 = "CalcAPI.GetXElementValue(" + "\"" + res[0] + "\"" + "," + "\"" + res[1] + "\"" + ","  + GetElementDataType("string") +  ")" 
```

那么结果是

```
CalcAPI.GetXElementValue("IRS5555","IRS001",) 
```

但我想要

```
CalcAPI.GetXElementValue("IRS5555","IRS001","") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T08:29:27.123

如果您的 false 在那里保持不变，那么您可以使用简单的字符串。最好使用字符串格式：

```
string res1 = string.Format("CalcAPI.GetXElementValue(\"{0}\",\"{1}\",false)", res[0], res[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:26:44.783

使用`false.ToString().ToLower()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:27:55.610

尝试

```
false.ToString().ToLower() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T08:26:37.700

像这样使用 ToLower() 函数

```
 string res1 = "CalcAPI.GetXElementValue(" + "\"" + res[0] + "\"" + "," + "\"" + res[1] + "\"" + ","  + false.ToString().ToLower() +  ")" 
```

# linq - 我有一些我想缩短的代码

> ID：12138534
> 
> 赞同：0
> 
> 时间：2012-08-27T08:25:14.847
> 
> 标签：linq

我有这两段代码，其中有一个列表 highAmtCtrList，这是我从 ddr.Out 获得的列表。这是一个合同列表，您可以在其中拥有两个具有相同合同编号的记录。

我使用 highAmtCtrList 仅获取所有第一条记录。

然后在 foreach 中，我检查 ddr.Dil 中的合同是否与 highAmtCtrList 中的合同相匹配。如果他们这样做，我会用 ddr.Dil 更新 highAmtCtrList 中的数量。

我的代码有效，只是我一直试图将它变成一段代码，似乎无法绕过它。

有任何想法吗？？提前谢谢。瑞马丁斯

```
List<Outstanding> highAmtCtrList =

                            (from d in ddr.Out
                             group d by d.Contract
                                 into g
                                 let highestInstallment =
                                     (from x in g
                                      orderby x.Amount descending
                                      select x).First()

                                 select highestInstallment).ToList();

highAmtCtrList.ForEach(outs => outs.Amount += ddr.Dil
   .Where(dil => dil.Contract == outs.Contract) 
   .Select(dil => dil.Amount) 
   .FirstOrDefault()); 

          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T09:15:24.053

我自己管理的。我合并了两个列表

# mysql - 使用 DISTINCT 和 GROUP BY 后 mySQL 查询很慢？

> ID：12138535
> 
> 赞同：2
> 
> 时间：2012-08-27T08:25:18.247
> 
> 标签：mysql, performance, group-by, distinct

我有以下结构的表：

```
-- Table structure for table `temp_app`
--

CREATE TABLE IF NOT EXISTS `temp_app` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `vid` int(5) NOT NULL,
  `num` varchar(64) NOT NULL,
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `vid` (`vid`),
  KEY `num` (`num`),
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=69509;

-- Table structure for table `inv_flags`
--

CREATE TABLE IF NOT EXISTS `inv_flags` (
  `num` varchar(64) NOT NULL,
  `vid` int(11) NOT NULL,
  `f_special` tinyint(1) NOT NULL, /*0 or 1*/
  `f_inserted` tinyint(1) NOT NULL, /*0 or 1*/
  `f_notinserted` tinyint(1) NOT NULL, /*0 or 1*/
  `userID` int(11) NOT NULL,
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  KEY `num` (`num`),
  KEY `userID` (`userID`),
  KEY `vid` (`vid`),
  KEY `timestamp` (`timestamp`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

以下查询的执行时间为 9 秒，显示 30 条记录。怎么了？

```
SELECT date_format(ifs.`timestamp`,'%y/%m/%d') as `date`
                ,count(DISTINCT ta.num) as inserted /*Unique nums*/
                ,SUM(ifs.f_notinserted) as not_inserted
                ,SUM(ifs.f_special)  as special
                ,count(ta.num) as links /*All nums*/
                from inventory_flags ifs
                LEFT JOIN temp_app ta ON ta.num = ifs.num AND ta.vid = ifs.vid
                WHERE ifs.userID = 3
                GROUP BY date(ifs.`timestamp`) DESC LIMIT 30 
```

**解释结果**

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  ifs ref userID  userID  4   const   12153   Using where
1   SIMPLE  ta  ref vid,num num 194 ifs.num 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:31:51.790

`COUNT DISTINCT`有时会导致 MySql 性能下降。试试这个：

```
select count(*) from (select distinct... 
```

因为它有时会阻止 MySql 将整个中间结果写入磁盘。

这是 MySql 错误信息：

[http://bugs.mysql.com/bug.php?id=21849](http://bugs.mysql.com/bug.php?id=21849)

# windows - 禁用 Apache 中 *nocache*-Files 的缓存

> ID：12138536
> 
> 赞同：2
> 
> 时间：2012-08-27T08:25:41.807
> 
> 标签：windows, apache, gwt

我尝试在 httpd.conf (Windows) 中使用以下配置为我的 GWT 应用程序禁用缓存，但它不起作用：

```
<filesMatch ".*nocache.*">
    FileETag None
    <IfModule headers_module>
        Header unset ETag
        Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
        Header set Pragma "no-cache"
        Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"
    </IfModule>
</filesMatch> 
```

但我仍然在服务器的响应中看不到任何这些标头。任何想法？（headers_module 已激活）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:37:31.713

感谢托马斯的帮助。我认为问题是因为`mod_jk`apache 并没有真正发送文件。我发现[这个线程](https://serverfault.com/questions/260184/problem-with-filesmatch-not-matching-correctly)很有帮助。我只需要替换`FilesMatch`为`LocationMatch`：

```
<LocationMatch ".*nocache.*">
    FileETag None
    <IfModule headers_module>
        Header unset ETag
        Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
        Header set Pragma "no-cache"
        Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"
    </IfModule>
</LocationMatch> 
```

# java - Spring 启用独立的 Java 库

> ID：12138537
> 
> 赞同：0
> 
> 时间：2012-08-27T08:25:53.690
> 
> 标签：java, spring, jakarta-ee, spring-mvc

[春天的新手]

有一个启用了 Spring 的服务并做了一些事情。当这个服务启动时，它会加载 Spring Application 上下文，每个人都很高兴。

现在，我需要创建一个将由上述服务使用的库，并且我也想对这个库包进行 Springify。但是，这个库的应用程序上下文何时/如何初始化？我难住了！

我想应该很多人都这样做了。最佳做法是什么？

我在想，可能是库的入口点接口中的静态块是初始化应用程序上下文的正确位置吗？（所以，它只被初始化一次）

这是正确的方法吗？它甚至会起作用还是我错过了什么？感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:35:11.843

您可以根据需要提供任意数量的应用程序上下文 xml 文件，如果您在 Web 应用程序中使用该库，

```
<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>
    classpath:context1.xml
    classpath:context2.xml
    ...
</param-value>
</context-param> 
```

基本上你需要提供相对路径`classpath:<relativepathofcontextfile>`。
如果它在一个 jar 文件中并且你的 jar 在类路径中，那么上面的那个就可以了。

如果它是独立的，您可以使用`ClassPathXmlApplicationContext`.

```
public class SomeClass {
    private static final ApplicationContext ac= 
        new ClassPathXmlApplicationContext("classpath:context1.xml");
    public static void main(String[] args) {
        MyIntf bean= (MyIntf) ac.getBean("myBean");
        bean.myMethod();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:33:56.510

不，使用静态块，您正在强制加载 Spring 上下文，而忽略它可能会在另一个类加载器中加载的事实。因此，好的方法是提供一些工厂方法来获取业务对象，该方法将跟踪上下文是否已加载，并在必要时创建一个。或者使用预先存在的上下文。

[此外，查看服务定位器模式和http://docs.oracle.com/javase/1.4.2/docs/guide/jar/jar.html#Service%20Provider](http://docs.oracle.com/javase/1.4.2/docs/guide/jar/jar.html#Service%20Provider)可能是个好主意

# c# - 解析 xml 并从数组中选择特定位置

> ID：12138538
> 
> 赞同：0
> 
> 时间：2012-08-27T08:25:59.307
> 
> 标签：c#, xml, windows-phone-7, listbox, xml-parsing

我正在解析一个 xml 文档，如下所示：

```
<?xml version="1.0" encoding="UTF-8" ?>
....
    <maj>true</maj>
    <data>
        <c>2</c>
        <t>0</t>
        <r>168</r>
        <r>La rentrée Auchan</r>
        <r>0</r>
        <r>2012-08-21 00:00:00</r>
        <r>2012-08-28 00:00:00</r>
        <r>56</r>
        <r>VL</r>

        <c>2</c>
        <t>1</t>
        ...
    </data> 
```

我想获取数组“r”中的内容，但只有第一个位置 1 是位置 5 和 6，并且只有在 t=0
我尝试过这样的工作时，我有一个绑定数据的列表框：

```
XDocument XMLtxt = JsonConvert.DeserializeXNode(e.Result);

listClients.ItemsSource =
    from c in XMLtxt.Descendants()
    select new JsonB()
    {
        t=c.Element("t").Value.Where(x=>(int) x==0), 
        r1=c.Element("r").Select(..
    } 
```

jsonB：

```
 public class JsonB
 {
     public int c { get; set; }
     public int t { get; set; }
     public string r1 { get; set; }
     public int r5 { get; set; }
     public string r6 { get; set; }
     public object[] r { get; set; }
 } 
```

我真的需要帮助，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:24:04.920

XML 的结构有点糟糕，因此您必须先用代码修复此问题。对于初学者，您可以通过简单的方式顺序读取/解析内容，以便记录的结构清晰，然后过滤他们：

*   准备一个`list`JsonB 对象 - 将其命名为“allRecords”
*   准备一个类型的变量`JsonB`- 将其命名为“lastRecord”
*   准备一个类型的变量`int`- 将其命名为“numberOfRs”
*   获取`<data>`标签
*   循环所有它的直接`children`，并为每个孩子：
    *   检查孩子的名字
    *   如果是`<c>`：
        *   创建新的 JsobB 并将其放入`lastRecord`
        *   重置`numberOfRs`为零
        *   添加`lastRecord`到`allRecords`列表中
        *   读取`c`值并将其放入`lastRecord.c`
    *   如果是`<t>`：
        *   读取值并将其放入`lastRecord.t`
    *   如果是`<r>`：
        *   将 1 添加到`numberOfRs`
        *   如果`numberOfRs`是 1、5 或 6：
        *   读取值并将其放入`lastRecord.r1`or r5 或 r6

这样，您将拥有一个`allRecords`包含漂亮对象的列表，并且您可以简单地`.Where(item => item.t ==0)`在其上。

但是，如果要忽略许多此类对象，您可能会注意到它非常“浪费”。然后，您可以调整顺序解析器以即时过滤，从而表现得像这样

*   准备一个`list`JsonB 对象 - 将其命名为“allRecords”
*   准备一个类型的变量`JsonB`- 将其命名为“lastRecord”
*   准备一个类型的变量`int`- 将其命名为“numberOfRs”
*   **准备一个类型的变量`bool`- 将其命名为“isInteresting”，将其预设为 false**
*   获取`<data>`标签
*   循环所有它的直接`children`，并为每个孩子：
    *   检查孩子的名字
    *   如果是`<c>`：
        *   **如果`isInteresting`是真的**
            *   **添加`lastRecord`到`allRecords`列表中**
        *   创建新的 JsobB 并将其放入`lastRecord`
        *   重置`numberOfRs`为零
        *   ~~添加`lastRecord`到`allRecords`列表中~~ **重置`isInteresting`为 false**
        *   读取`c`值并将其放入`lastRecord.c`
    *   如果是`<t>`：
        *   读取值并将其放入`lastRecord.t`
        *   **如果为零，则将其设置`isInteresting`为 true**
    *   如果是`<r>`：
        *   将 1 添加到`numberOfRs`
        *   如果`numberOfRs`是 1、5 或 6：
        *   读取值并将其放入`lastRecord.r1`or r5 或 r6
*   **如果`isInteresting`是真的**
    *   **添加`lastRecord`到`allRecords`列表中**

这样，您最终将得到一个已经过滤的列表，同时所有不感兴趣的项目都将被 GC'ed。请注意，'isinteresting - add to list' 执行了两次：一次是在创建新 JsonB 之前，然后是在所有子项都被读取后的最后一步。如果您忘记了循环后的检查添加 - 您有时可能会意外跳过/忽略最后一条记录。

# asp.net-mvc - 尝试更新控制器中的模型以避免验证

> ID：12138552
> 
> 赞同：0
> 
> 时间：2012-08-27T08:26:55.727
> 
> 标签：asp.net-mvc, model, asp.net-mvc-4

我的模型中有以下属性：

```
[Display(Name = "ActivityModel_FlashFile", ResourceType = typeof(App_GlobalResources.Models))]
[Required(ErrorMessageResourceName = "ActivityModel_FlashFile_Required", ErrorMessageResourceType = typeof(App_GlobalResources.Models))]
public string FlashFile { get; set; } 
```

在我的控制器中，我这样做：

```
 ModelState.Remove("FlashFile");
 model.FlashFile = "1";
 try
 {
    this.UpdateModel(model);
 }
 catch (Exception ex)
 {
    string allErrors=string.Join(",",ModelState.Values.SelectMany(v => v.Errors).Select(e=>e.ErrorMessage));
 ... 
```

（当我们到达这个片段的开头时，FlashFile 是空的）。
然而，此时`allErrors`是“需要 Flash 文件”。

[（我从这里](https://stackoverflow.com/questions/4895691/mvc-change-models-value-in-view-on-post)接受了这样做的想法）。

如何避免验证 FlashFile 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:54:58.780

> 如何避免验证 FlashFile 属性？

通过使用适合此视图要求的视图模型。这是正确的方法。如果`FlashFile`不需要该属性，则设计一个视图模型，该模型上没有`Required`此操作的属性。

解决此问题的错误方法是尝试重用您的域模型，然后从模型绑定中排除您不想要的属性：

```
try
{
    this.UpdateModel(model, null, null, new[] { "FlashFile" });
    model.FlashFile = "1";
}
catch (Exception ex)
{
    string allErrors = string.Join(
        ",", 
        ModelState.Values.SelectMany(v => v.Errors).Select(e => e.ErrorMessage)
    );
    ...
} 
```

# android - 为 Android 应用程序生成 Google Map 密钥的指纹无效

> ID：12138560
> 
> 赞同：4
> 
> 时间：2012-08-27T08:27:42.550
> 
> 标签：android, android-layout, android-mapview

我已经使用这些命令成功生成了谷歌地图密钥的指纹证书

```
keytool -list -alias androiddebugkey -keystore "C:\Users\pc\.android
\debug.keystore" -storepass android -keypass android 
```

我得到了这个结果

```
androiddebugkey, Aug 25, 2012, PrivateKeyEntry,
Certificate fingerprint (SHA1): 68:1F:B8:80:C0:B9:96:D1:6E:95:86:69:CD:DB:0E:28:DC:9E:89:51 
```

当我尝试在此站点上注册证书指纹时[https://developers.google.com/android/maps-api-signup](https://developers.google.com/android/maps-api-signup)

页面回复我**您输入的指纹无效。请按浏览器上的返回按钮并输入有效的证书指纹**

哪里有问题请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T09:41:05.160

我发现我的问题的解决方案只是通过这个改变了命令

```
keytool -list -v -alias androiddebugkey -keystore C:\Users\<user>\.android\debug.keystore -storepass android -keypass android 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-10T21:34:44.263

如果您在查找调试密钥路径时遇到问题或不想使用 adb，您可以在 eclipse 中获取指纹：

转到 window-->preferences 并找到 android 部分。选择构建子设置。

![在此处输入图像描述](../Images/76f5885e554c5841538e0408c6ca07d9.png)

对于生产指纹，当您在单击完成之前使用 ADT 导出已签名的应用程序时，哈希将在那里。只是复制它。

# android - 关于 Google Play 应用资产加密的问题

> ID：12138563
> 
> 赞同：42
> 
> 时间：2012-08-27T08:28:14.163
> 
> 标签：android, encryption, google-play, android-4.2-jelly-bean, apk

从 v4.1 [Jelly Bean](http://developer.android.com/about/versions/jelly-bean.html)开始，Google 为 Google Play 引入了新的应用资产加密功能。似乎在升级应用程序时出现了一些问题，包括重启后持久数据丢失，这是由于 apk 目录的变化引起的（旧的是`/data/app`，现在是`/mnt/asec`）。

因此，对于 OS 2.3+，在 Google Play 上发布（或更新已发布的应用程序）时，

*   我可以禁用此选项并发布未加密的应用程序吗？
*   问题的现状如何？有解决方法吗？

除了这个问题之外，提供额外保护以防止盗版的想法似乎还可以，但是还有一些我在文档中找不到解释的额外注意事项：

*   发布到替代商店或通过 OTA 部署的应用程序呢？它们也可以加密吗？如果没有，那么如果有人可以从其他地方下载未加密的 apk 并立即反编译，那么在 Google Play 发布中造成如此痛苦的意义何在？
*   手机root能打败吗？
*   为 OS 4.0+ 提供的 apk 是唯一受保护的吗？如果是这样，那么，如果有人可以将未加密的 apk 下载到 Gingerbread 手机上，用 adb 将其取出并以通常的方式进行反编译，那么这有什么意义呢？
*   假设该机制有效：备份应用程序（如 Titanium Backup）或使用 adb 的手动 apk 备份怎么样。他们还会工作吗？
*   性能：某些应用程序可能有相当大的 apk 大小。这种机制会影响性能吗？操作系统是否会在每次加载时解密整个 apk？

提前致谢

更新：
编辑以包含指向 Google 代码问题的链接。
[问题 34880（已关闭，但仍有一些开发人员抱怨；状态：未来版本）](http://code.google.com/p/android/issues/detail?id=34880)
[问题 35962（已关闭；状态：已发布）](http://code.google.com/p/android/issues/detail?id=35962)

更新#2：[此博客文章的](http://www.h-online.com/open/news/item/Google-forced-to-temporarily-deactivate-copy-protection-for-Android-apps-1661755.html)
有趣信息由第一期中的一位开发人员链接。[这里](http://www.heise.de/newsticker/meldung/Google-muss-App-Kopierschutz-von-Android-vorlaeufig-wieder-abschalten-1661150.html)也是德语。

> *用户和开发人员报告说，在过去几天中，使用最新版本的 Google Play (3.7.15) 安装的应用程序的问题似乎已经消失。以前安装有问题的应用程序的用户需要卸载然后免费重新下载。根据一份报告，新版 Google Play 现在将付费应用程序再次保存到 /data/app，这意味着 Google 目前已停用版权保护功能。谷歌尚未就该问题公开发表评论。该错误被标记为中等优先级，状态为“FutureRelease”以进行可能的修复。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-29T01:22:15.413

*（咕哝，咕哝，耸肩，/我只是说……）*

就个人*而言（并且......从一个以某种方式设法从商业应用程序中赚钱 23 年并且还在不断增加的人的角度来看......）*，我会 FAR（！）更关心*这一点：*

> **以前安装有问题的应用程序的用户需要卸载然后重新下载它们...**

......而不是我会花在*任何*“盗版思想”上。（因此，也没有针对他们的*任何*“防御” *[原文如此]*。）

我的一个非常好的朋友曾经把一把非常昂贵的 12 弦吉他放在一个硬纸板（！）箱子里……用任何人都可以买到的非常便宜的挂锁固定。正如他所说，挂锁是为了“将*诚实*的人拒之门外”。

“说得好，罗伯特……”

*确实，“这个星球*上的人”中有一定比例的人可能会“做任何事情（！）它需要”来“破解”你想要出售的任何东西的保护。[在我的大学时代，我有一个朋友积极*收集* `Apple ][`软盘，显然只是为了“击败”他们的智力挑战。]

这样的人**不是**你的*¢-u-$-tomer-$！”*

因此，我恭敬地建议：

*   *“是的，*在你的吉他盒上‘挂个锁’。”

*   ......但不要特意去“试图阻止别人偷你的吉他”。

*   ...因为*（成千上万（！）！！）*付钱给您的人**...**不*（！！）*希望给您带来不便！ *（也*不能想象他们可能，甚至可以想象（！！），是：“不信任！”）

想想看。. .

> “你穿过商场商店的前门，[刚刚购买了 300 美元……]，*（瞧！）* Sensormatic 系统“大声抱怨！”店员（和” 商店经理）做吗？他们向你*挥手*！！“祝你有美好的一天！”

[即使他们不知道你是否花了 300 美元，或者你可能是个小偷……他们……向你*招手*。如果你是小偷，那是保险公司的事。最好的选择是你是一个顾客，他必须（！）收到一个道歉但非常（！）友好的挥手告别。]

在“实际商业”的现实世界中，记住这些事情是值得的！

相信我：“最简单、最失败的”令牌锁*就可以了。*唯一的要求是：“它存在。完全存在。”

# android - 如何摆脱这个？？？“无法实例化以下类”

> ID：12138566
> 
> 赞同：-4
> 
> 时间：2012-08-27T08:28:42.143
> 
> 标签：android, dynamic, view

这是我的 XML 文件。

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/bgcategory"
        android:orientation="vertical" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/img_top"
        android:layout_width="fill_parent"
        android:layout_height="50dip"
        android:layout_alignParentTop="true"
        android:scaleType="fitXY"
        android:src="@drawable/topbar" >
    </ImageView>

    <ImageView
        android:id="@+id/img_back"
        android:layout_width="66dp"
        android:layout_height="40dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="5dip"
        android:layout_marginTop="5dp"
        android:scaleType="fitXY"
        android:src="@drawable/btn_back" >
    </ImageView>

    <ImageView
        android:id="@+id/img_share"
        android:layout_width="wrap_content"
        android:layout_height="35dp"
        android:layout_alignBottom="@+id/img_back"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="5dp"
        android:scaleType="fitXY"
        android:src="@drawable/img_share">
    </ImageView>

    <TextView
        android:id="@+id/txt_audio_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/btn_share"
        android:layout_alignTop="@+id/img_back"
        android:layout_toLeftOf="@+id/img_share"
        android:layout_toRightOf="@+id/img_back"
        android:ellipsize="end"
        android:gravity="center"
        android:singleLine="true"
        android:text=""
        android:textColor="#fffafa"
        android:textSize="16sp"
        android:textStyle="bold" >
    </TextView>
</RelativeLayout>

<ScrollView
    android:id="@+id/scrollview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <com.example.activities.VisualizerView
            android:id="@+id/visualizerView_scroll"
            android:layout_width="fill_parent"
            android:layout_height="150dp"
            android:layout_marginTop="10dip">
        </com.example.activities.VisualizerView>

        <SeekBar
            android:id="@+id/seekbar"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/visualizerView_scroll"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:layout_marginLeft="20dip"
            android:layout_marginRight="20dip"
            android:layout_marginTop="20dip"
            android:scaleType="fitXY" >
        </SeekBar>

        <ImageView
            android:id="@+id/play"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/seekbar"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="20dip"
            android:scaleType="fitXY"
            android:src="@drawable/new_play" >
        </ImageView>

        <ImageView
            android:id="@+id/pause"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignTop="@+id/play_scroll"
            android:layout_toLeftOf="@+id/play_scroll"
            android:scaleType="fitXY"
            android:src="@drawable/new_pause" />

        <ImageView
            android:id="@+id/stop"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignTop="@+id/play_scroll"
            android:layout_toRightOf="@+id/play_scroll"
            android:scaleType="fitXY"
            android:src="@drawable/new_stop" />

        <LinearLayout
            android:id="@+id/llCommentContainer"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical"
            android:layout_below="@+id/play_scroll">
        </LinearLayout>
    </RelativeLayout>
</ScrollView>

  <RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/llCommentContainer"> 

    <ImageView
        android:id="@+id/img_comment"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:layout_gravity="right"
        android:layout_alignParentBottom="true"
        android:clickable="true"
        android:src="@drawable/btn_addcomment">
    </ImageView>
</RelativeLayout> 
```

这是课程::

```
public class VisualizerView extends View 
{
private static final String TAG = "VisualizerView";

private byte[] mBytes;
private byte[] mFFTBytes;
private Rect mRect = new Rect();
private Visualizer mVisualizer;

private Set<Renderer> mRenderers;

private Paint mFlashPaint = new Paint();
private Paint mFadePaint = new Paint();

public VisualizerView(Context context, AttributeSet attrs, int defStyle)
{
    super(context, attrs);
    init();
}

public VisualizerView(Context context, AttributeSet attrs)
{
    this(context, attrs, 0);
}

public VisualizerView(Context context)
{
    this(context, null, 0);
}

public void init() 
{
    mBytes = null;
    mFFTBytes = null;

    mFlashPaint.setColor(Color.argb(122, 255, 255, 255));
    mFadePaint.setColor(Color.argb(238, 255, 255, 255)); // Adjust alpha to change how quickly the image fades
    mFadePaint.setXfermode(new PorterDuffXfermode(Mode.MULTIPLY));

    mRenderers = new HashSet<Renderer>();
}

/**
 * Links the visualizer to a player
 * @param player - MediaPlayer instance to link to
 */
public void link(MediaPlayer player)
{
    if(player == null)
    {
        throw new NullPointerException("Cannot link to null MediaPlayer");
    }

    // Create the Visualizer object and attach it to our media player.
    mVisualizer = new Visualizer(player.getAudioSessionId());
    mVisualizer.setCaptureSize(Visualizer.getCaptureSizeRange()[1]);

    // Pass through Visualizer data to VisualizerView
    Visualizer.OnDataCaptureListener captureListener = new Visualizer.OnDataCaptureListener()
    {
        //@Override
        public void onWaveFormDataCapture(Visualizer visualizer, byte[] bytes,int samplingRate)
        {
            updateVisualizer(bytes);
        }
        //@Override
        public void onFftDataCapture(Visualizer visualizer, byte[] bytes,int samplingRate)
        {
            updateVisualizerFFT(bytes);
        }
    };

    mVisualizer.setDataCaptureListener(captureListener,
            Visualizer.getMaxCaptureRate() / 2, true, true);

    // Enabled Visualizer and disable when we're done with the stream
    mVisualizer.setEnabled(true);
    player.setOnCompletionListener(new MediaPlayer.OnCompletionListener()
    {
        //@Override
        public void onCompletion(MediaPlayer mediaPlayer)
        {
            mVisualizer.setEnabled(false);
        }
    });
}

public void addRenderer(Renderer renderer)
{
    if(renderer != null)
    {
        mRenderers.add(renderer);
    }
}

public void clearRenderers()
{
    mRenderers.clear();
}

/**
 * Call to release the resources used by VisualizerView. Like with the
 * MediaPlayer it is good practice to call this method
 */
public void release()
{
    mVisualizer.release();
}

/**
 * Pass data to the visualizer. Typically this will be obtained from the
 * Android Visualizer.OnDataCaptureListener call back. See
 * {@link Visualizer.OnDataCaptureListener#onWaveFormDataCapture }
 * @param bytes
 */
public void updateVisualizer(byte[] bytes) {
    mBytes = bytes;
    invalidate();
}

/**
 * Pass FFT data to the visualizer. Typically this will be obtained from the
 * Android Visualizer.OnDataCaptureListener call back. See
 * {@link Visualizer.OnDataCaptureListener#onFftDataCapture }
 * @param bytes
 */
public void updateVisualizerFFT(byte[] bytes) {
    mFFTBytes = bytes;
    invalidate();
}

boolean mFlash = false;

/**
 * Call this to make the visualizer flash. Useful for flashing at the start
 * of a song/loop etc...
 */
public void flash() {
    mFlash = true;
    invalidate();
}

Bitmap mCanvasBitmap;
Canvas mCanvas;

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    // Create canvas once we're ready to draw
    mRect.set(0, 0, getWidth(), getHeight());

    if(mCanvasBitmap == null)
    {
        mCanvasBitmap = Bitmap.createBitmap(canvas.getWidth(), canvas.getHeight(), Config.ARGB_8888);
    }
    if(mCanvas == null)
    {
        mCanvas = new Canvas(mCanvasBitmap);
    }

    if (mBytes != null) {
        // Render all audio renderers
        AudioData audioData = new AudioData(mBytes);
        for(Renderer r : mRenderers)
        {
            r.render(mCanvas, audioData, mRect);
        }
    }

    if (mFFTBytes != null) {
        // Render all FFT renderers
        FFTData fftData = new FFTData(mFFTBytes);
        for(Renderer r : mRenderers)
        {
            r.render(mCanvas, fftData, mRect);
        }
    }

    // Fade out old contents
    mCanvas.drawPaint(mFadePaint);

    if(mFlash)
    {
        mFlash = false;
        mCanvas.drawPaint(mFlashPaint);
    }

    canvas.drawBitmap(mCanvasBitmap, new Matrix(), null);
}
} 
```

我的错误日志:::

```
java.lang.ClassNotFoundException: android.media.audiofx.Visualizer$OnDataCaptureListener
    at com.android.ide.eclipse.adt.internal.resources.manager.ProjectClassLoader.findClass(ProjectClassLoader.java:105)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2406)
    at java.lang.Class.getConstructor0(Class.java:2716)
    at java.lang.Class.getConstructor(Class.java:1674)
    at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.instantiateClass(ProjectCallback.java:327)
    at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.loadView(ProjectCallback.java:166)
    at android.view.BridgeInflater.loadCustomView(BridgeInflater.java:207)
    at android.view.BridgeInflater.createViewFromTag(BridgeInflater.java:135)
    at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:739)
    at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:711)
    at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:742)
    at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:711)
    at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:742)
    at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:711)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:372)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:321)
    at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:322)
    at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1640)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1391)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:1165)
    at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:679)
    at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:359)
    at org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart.java:292)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1276)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1300)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1285)
    at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1079)
    at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:3023)
    at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1730)
    at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:270)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1276)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3554)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3179)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

现在，当用户单击播放按钮时，我正在尝试使用此可视化视图。但是在我的文件图形布局中，我收到“无法实例化以下类”的消息，我也无法在视图中显示我的 imageview（即 imgComment）。有什么建议我错了吗？ ?

提前致谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:50:21.437

我的代码也有同样的问题。从我的自定义视图中取出对 Android Visualizer 类的任何引用并将其放入我的活动类之后，一切都又好了。（基本上这是 Orabîg 在他的回复中推荐的，但我无法对此发表评论。）

然而，这是一个应该报告给 ADT 的错误吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:03:02.770

由于“ClassNotFound”异常，您的自定义视图 (com.example.activities.VisualizerView) 无法在 Eclipse 中加载。我猜 Eclipse 布局查看器插件不包含 android.media.audiofx 包...

也许您可以尝试将这段代码（link() 方法）外部化到一个单独的类中，看看 Eclipse 是否更快乐并且能够成功加载这个类？

# c - 使用 OpenCV 查找对象的高度

> ID：12138567
> 
> 赞同：4
> 
> 时间：2012-08-27T08:28:59.483
> 
> 标签：c, image-processing, opencv

我有一个图像。我必须找到其中特定物体的高度。

如果我们直接取像素长度，它不会给出确切的高度。如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T08:34:49.970

校准相机后，您将完成从图像平面到世界坐标的转换。使用此信息您可以预测您正在寻找的对象的高度，当然在这一步中您需要以某种方式识别您感兴趣的对象。

一般来说，这个问题太宽泛了，涵盖了计算机视觉的许多基本概念，所以在攻击问题之前请参考你最喜欢的教科书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T20:12:35.647

另一种方法：将对象放在**A4 纸上**并从上方拍照。由于您知道纸张的大小，因此您可以据此计算对象的大小。

要检测纸张，请查看[此帖子](https://stackoverflow.com/a/8863060/176769)或[此](https://stackoverflow.com/q/10533233/176769)。

# android - 当设备连接互联网时，我无法收到旧消息-GCM

> ID：12138569
> 
> 赞同：0
> 
> 时间：2012-08-27T08:29:04.330
> 
> 标签：android, google-cloud-messaging

虽然我的设备没有互联网连接，但我正在使用 GCM 从服务器向应用程序发送消息。之后，当设备连接互联网时，我无法收到消息。正常吗？

来自[http://developer.android.com/guide/google/gcm/adv.html](http://developer.android.com/guide/google/gcm/adv.html)

"*如果设备未连接到 GCM，则消息将被存储，直到建立连接（再次尊重折叠密钥规则）。* "

我的消息具有相同的折叠键；但是当设备连接时，我仍然只需要收到 1 条消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T06:44:03.680

您可以将所有消息发送到您的设备。

**GCM 服务器记录您发送到设备的所有消息。每当设备连接到 Internet 时，它就会在通知区域显示这些内容。**

您只收到一条消息，因为您在代码的**notify()**函数中分配了相同的**NOTIFICATION ID**

 **你的代码可能使用这个：

```
 // 0 is notification id
        notificationManager.notify(0, notification); 
```

每次更改您的**通知 ID**以获取通知区域中的所有消息。

如 ：

```
 static int NOTIFICATION_ID = 0;

        if (NOTIFICATION_ID > 1073741824) {
            NOTIFICATION_ID = 0;
        }
        notificationManager.notify(NOTIFICATION_ID++, notification); 
```

if 子句使您免受 int 值溢出的影响。您可以根据您的要求忽略它。

我已经测试过这个场景。现在轮到你了。
很高兴能帮助你 ！！**

# silverlight - 自动完成框绑定

> ID：12138571
> 
> 赞同：0
> 
> 时间：2012-08-27T08:29:13.687
> 
> 标签：silverlight, data-binding, autocomplete

操作 AutoCompleteBox 的 ItemsSource 属性时出现奇怪的行为：
每当 ItemsSource 从空集合更改为非空集合（即我正在尝试填充下拉列表）时，下拉列表不会被填充.

当集合处于非空状态，然后更改集合时，下拉列表会出现并按应有的方式填充。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:59:17.437

这是由 AutoCompleteBox 控件的行为引起的：它仅在按下键盘时显示其项目。因此，如果在按下键后没有要显示的项目，则不会显示任何项目（有意义......）。这些项目的填充发生在对 Web 服务的调用返回时，因此在实际按键与 AutoCompleteBox 的 ItemsSource 更改之间存在延迟。

# jsp - 如何用 servlet 发送的数据填充 jsp 中的 html 表单？

> ID：12138578
> 
> 赞同：2
> 
> 时间：2012-08-27T08:29:31.507
> 
> 标签：jsp, servlets, forms

我是 JSP 和 Servlet 的新手。我在以下任务中需要您的建议。我有一个 jsp 页面，它有一个 html 表单，它接受用户的一些信息。

JSP 页面信息.jsp

```
<%@ page contentType="text/html; charset=iso-8859-1" language="java" import="java.sql.*" errorPage="" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
</head>

<body>
<%
    if(request.getAttribute("reply")!=null){
        out.println(request.getAttribute("reply"));
    }
%>

<form action="actionservlet" method="post" name="myform">
user Name:<input name="username" type="text" size="10" /><br />
First Name:<input name="username" type="text" size="10" /><br />
Last Name:<input name="username" type="text" size="10" /><br />
Email id:<input name="username" type="text" size="10" /><br />
<input name="submit" type="submit" value="Submit" />
<input name="Reset" type="reset" value="Reset" />

</form>
</body>
</html> 
```

当这个客户端输入信息并提交表单时，表单中的数据被设置为 actionservlet，它检查用户输入的用户名是否已经存在于数据库中。如果用户名已经存在，那么它将数据发送回调用 jsp，并带有一个额外的属性“回复”和适当的消息值。即“用户已存在”如果输入的用户名已经存在于数据库中或“用户信息保存成功！” 如果数据保存成功。

我想做这样的事情每当用户输入已经存在的用户名并提交表单时，在这种情况下，发送回jsp的所有数据都应该填写到各自的文本框中。因此该用户只能输入另一个用户名并再次提交此表单。如何实现上述任务。

我正在考虑将 jsp scriplet 添加到每个文本框的 value 属性中，并检查此消息是否重播。如果回复消息是关于重复的用户名，那么它应该将值分配给 value 属性，否则 value 属性将保持为空。但我认为这个解决方案不是最优的，因为随着字段数量的增加，这个解决方案会变得有点乏味。而且我认为由于这个原因，它会产生某种冗余代码。所以我想问问专家，有没有其他方法可以做到这一点。我只想在错误或重复消息出现时填写表格，而不是在成功消息出现时填写。

谢谢你！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T09:57:45.490

在 JSP 中使用 Java 代码是一种不好的做法，而且 Scriptlet 已经过时，您应该避免使用它。

JSP 2.0 表达式语言就是解决方案。下载`jstl.jar`并将其添加到您的类路径中。

**JSP**

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<div><b>${reply}</b></div>
<form action="actionservlet" method="post" name="myform">
user Name:<input name="username" type="text" size="10" /><br />
First Name:<input name="firstName" type="text" size="10" value=${firstName}/><br />
Last Name:<input name="lastName" type="text" size="10" value=${lastName}/><br />
Email id:<input name="email" type="text" size="10" value=${email}/><br />
<input name="submit" type="submit" value="Submit" />
<input name="Reset" type="reset" value="Reset" />
</form> 
```

获取 Servlet 中的参数。执行您想做的操作/任务。在 Servlet 中设置请求属性。将页面转发到 JSP。

**小服务程序**：

```
String firstName = request.getParameter("firstName");
// and so on get other form parameters..
// perform your opeations

request.setAttribute("reply", "User Already Exists"); // Just an example
request.setAttribute("firstName", firstName);
// set other form parameters..

RequestDispatcher dispatcher =
request.getRequestDispatcher("/el/scoped-vars.jsp");
dispatcher.forward(request, response); 
```

如果表达式语言不起作用，请在此[链接上查看更多信息。](https://stackoverflow.com/questions/2168832/expression-language-in-jsp-not-working)

阅读基本的表达语言： http: [//pdf.coreservlets.com/JSP-EL.pdf](http://pdf.coreservlets.com/JSP-EL.pdf)

# php - PHP编译器优化

> ID：12138582
> 
> 赞同：0
> 
> 时间：2012-08-27T08:29:59.860
> 
> 标签：php

对于一个 PHP 网站，我正在搜索 PHP 编译器（我知道它已被解析）。除了 Facebook 的 HIPHOP 之外，我找不到任何东西。我不是在谈论转换为二进制文件，我对编译器执行的优化任务感兴趣，以便我可以优化我的 PHP。比如删除额外的变量、未使用的变量、循环内的语句、优化表达式等。有没有这样的程序可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:33:33.063

看来您正在寻找 PHP 优化器，如[APC](http://www.php.net/manual/en/intro.apc.php)、eAccelerator、Zend Optimizer[等](http://en.wikipedia.org/wiki/List_of_PHP_accelerators)，而不是编译器

# vb.net - XmlDocument 的问题

> ID：12138583
> 
> 赞同：1
> 
> 时间：2012-08-27T08:30:03.320
> 
> 标签：vb.net, xmldocument

我遇到了一个间歇性的问题，一个 sub 去阅读 twitter rss 提要。

95% 的时间，它表现良好且没有问题。剩下的 5% 它给了我一个 400 Bad Request 错误（即使 Twitter 上的 rss 提要很好，这表明问题出在我的最后，而不是 Twitter。）

代码：

```
Sub RetrieveStories()
   'Create a new xmldocument and load the xml into it
   Dim rssDoc As New XmlDocument
   rssDoc.Load("http://twitter.com/statuses/user_timeline/athersgeo.rss")

   'Select each item and put it into our array
   Dim nodes As XmlNodeList = rssDoc.SelectNodes("rss/channel/item")
   Dim i as integer = 1
   divMRSS.InnerHtml = ""
   Dim TweetText as string
   Dim TweetURL as string
   Dim UNameLen as integer = 15
   For Each node As XmlNode In nodes
      'Using xpath we can acess all the data we need in each node
      TweetURL = node.SelectSingleNode("link").InnerText
      TweetText = Mid(node.SelectSingleNode("title").InnerText,UNameLen)
      TweetText = Linkify(TweetText)
      TweetText = Atify(TweetText)
      TweetText = Hashify(TweetText)
      TweetText = "<a href=""http://twitter.com/athersgeo"" target=""_blank"">@athersgeo</a>: " & TweetText
      divMRSS.InnerHtml += "" & TweetText & "<BR><a href=""" & TweetURL & """ target=""_blank"">"  & RelativeTime(node.SelectSingleNode("pubDate").InnerText) & "</a><BR><HR>"
      i = i + 1

      If i = 5 then
        Exit For
      End if
   Next
End Sub 
```

是否有一些我没有关闭/处理的东西正在吸收连接？还是我刚刚编写了一些非常愚蠢的代码？（这不会是第一次！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:00:01.430

400 Bad Request 与 HTTP 相关联。从您的代码看来，唯一的 HTTP 请求是加载 xmlDocument `rssDoc.Load("http://twitter.com/statuses/user_timeline/athersgeo.rss")`。但是你提到**了——Twitter 上的 rss 提要很好**——你怎么能确保这一点？
正如本博客中所建议的那样，您可以使用 Fiddler 来探索您的请求发送到 twitter - [http://blogs.msdn.com/b/hakane/archive/2009/06/30/investigating-http-400-bad-request-错误-in-web-access.aspx](http://blogs.msdn.com/b/hakane/archive/2009/06/30/investigating-http-400-bad-request-errors-in-web-access.aspx)

# c# - 正则表达式等价于 +apple +banana +“婴儿车”——博客

> ID：12138587
> 
> 赞同：0
> 
> 时间：2012-08-27T08:30:53.873
> 
> 标签：c#, regex, visual-studio-2010

我已经制作了运行以获取页面 html 的应用程序，当我得到它时，我必须根据不同的模式将 url 标记为可用或不可用。这些模式在 txt 文件中提供：

### 例子：

```
+apple+banana+”baby cart” –blog
+”apple skin” +banana +”baby cart” –blog
+”apple skin” +”buy now” +jpg 
```

这`"`是说短语而不是单词。

1.  html 必须包含苹果、香蕉和婴儿车，并且不能包含博客
2.  html 必须包含苹果皮和香蕉和婴儿车，并且不能包含博客
3.  html 必须包含苹果皮和立即购买和 jpg

## 问题

在这种情况下我可以使用正则表达式吗？如果是，则上述模式的正则表达式等价物是什么，所以我们可以在 txt 文件中使用它们，除了这些之外，只需将其用作在 HTML 中匹配的模式......
（**这些模式不区分大小写**）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:42:10.050

# c# - 是否需要在 PC 上安装 SQL 客户端才能让 C# 应用程序访问数据库？

> ID：12138588
> 
> 赞同：2
> 
> 时间：2012-08-27T08:31:08.077
> 
> 标签：c#, wpf, sql-server

我创建了一个管理数据库数据的 C3 WPF 应用程序。到目前为止，我已经在 3 台单独的 PC 上成功使用了它，但它在第四次崩溃了。例外是：

```
Faulting application name: LakeSmitFautLog.exe, version: 1.0.0.0, time stamp: 0x503b19ee
Faulting module name: KERNELBASE.dll, version: 6.1.7601.17651, time stamp: 0x4e2111c0
Exception code: 0xe0434352

Application: LakeSmitFautLog.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.Data.SqlClient.SqlException
Stack:
   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(System.Data.Common.DbConnection, System.Data.ProviderBase.DbConnectionFactory)
   at System.Data.SqlClient.SqlConnection.Open()
   at LakeSmitFautLog.MainWindow.LoadComboBoxes()
   at LakeSmitFautLog.MainWindow..ctor()
   at LakeSmitFautLog.initxaml.btnEnter_Click(System.Object, System.Windows.RoutedEventArgs)
   at System.Windows.RoutedEventHandlerInfo.InvokeHandler(System.Object, System.Windows.RoutedEventArgs)
   at System.Windows.EventRoute.InvokeHandlersImpl(System.Object, System.Windows.RoutedEventArgs, Boolean)
   at System.Windows.UIElement.RaiseEventImpl(System.Windows.DependencyObject, System.Windows.RoutedEventArgs)
   at System.Windows.UIElement.RaiseEvent(System.Windows.RoutedEventArgs)
   at System.Windows.Controls.Primitives.ButtonBase.OnClick()
   at System.Windows.Controls.Button.OnClick()
   at System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp(System.Windows.Input.MouseButtonEventArgs)
   at System.Windows.UIElement.OnMouseLeftButtonUpThunk(System.Object, System.Windows.Input.MouseButtonEventArgs)
   at System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler(System.Delegate, System.Object)
   at System.Windows.RoutedEventArgs.InvokeHandler(System.Delegate, System.Object)
   at System.Windows.RoutedEventHandlerInfo.InvokeHandler(System.Object, System.Windows.RoutedEventArgs)
   at System.Windows.EventRoute.InvokeHandlersImpl(System.Object, System.Windows.RoutedEventArgs, Boolean)
   at System.Windows.UIElement.ReRaiseEventAs(System.Windows.DependencyObject, System.Windows.RoutedEventArgs, System.Windows.RoutedEvent)
   at System.Windows.UIElement.OnMouseUpThunk(System.Object, System.Windows.Input.MouseButtonEventArgs)
   at System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler(System.Delegate, System.Object)
   at System.Windows.RoutedEventArgs.InvokeHandler(System.Delegate, System.Object)
   at System.Windows.RoutedEventHandlerInfo.InvokeHandler(System.Object, System.Windows.RoutedEventArgs)
   at System.Windows.EventRoute.InvokeHandlersImpl(System.Object, System.Windows.RoutedEventArgs, Boolean)
   at System.Windows.UIElement.RaiseEventImpl(System.Windows.DependencyObject, System.Windows.RoutedEventArgs)
   at System.Windows.UIElement.RaiseTrustedEvent(System.Windows.RoutedEventArgs)
   at System.Windows.UIElement.RaiseEvent(System.Windows.RoutedEventArgs, Boolean)
   at System.Windows.Input.InputManager.ProcessStagingArea()
   at System.Windows.Input.InputManager.ProcessInput(System.Windows.Input.InputEventArgs)
   at System.Windows.Input.InputProviderSite.ReportInput(System.Windows.Input.InputReport)
   at System.Windows.Interop.HwndMouseInputProvider.ReportInput(IntPtr, System.Windows.Input.InputMode, Int32, System.Windows.Input.RawMouseActions, Int32, Int32, Int32)
   at System.Windows.Interop.HwndMouseInputProvider.FilterMessage(IntPtr, MS.Internal.Interop.WindowMessage, IntPtr, IntPtr, Boolean ByRef)
   at System.Windows.Interop.HwndSource.InputFilterMessage(IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)
   at MS.Win32.HwndWrapper.WndProc(IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(System.Object)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(System.Delegate, System.Object, Int32)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(System.Object, System.Delegate, System.Object, Int32, System.Delegate)
   at System.Windows.Threading.Dispatcher.InvokeImpl(System.Windows.Threading.DispatcherPriority, System.TimeSpan, System.Delegate, System.Object, Int32)
   at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr, Int32, IntPtr, IntPtr)
   at MS.Win32.UnsafeNativeMethods.DispatchMessage(System.Windows.Interop.MSG ByRef)
   at System.Windows.Threading.Dispatcher.PushFrameImpl(System.Windows.Threading.DispatcherFrame)
   at System.Windows.Threading.Dispatcher.PushFrame(System.Windows.Threading.DispatcherFrame)
   at System.Windows.Application.RunDispatcher(System.Object)
   at System.Windows.Application.RunInternal(System.Windows.Window)
   at System.Windows.Application.Run(System.Windows.Window)
   at LakeSmitFautLog.App.Main() 
```

在前 3 台 PC 上，安装了独立的 MS SQL 客户端，但在提供错误的那台上没有。
在应用程序中，我正在引用`System.Data.SqlClient`，但似乎这还不够。

如上所述，这第四台 PC 是否需要安装独立的 SQL 客户端？

[编辑] 可能的解决方案需要从 SQL Server 禁用防火墙。问题可能在于它正在将没有本地 IP 的人踢出去（第四台 PC 来自不同的地点，具有不同的 IP 范围）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:06:00.997

简短的回答是否**。**

从文档中：

> SQL Server 的 .NET Framework 数据提供程序 (SqlClient) 使用自己的协议与 SQL Server 进行通信。**它是轻量级的并且性能良好，因为它经过优化可以直接**访问 SQL Server ， 而无需添加 OLE DB 或开放式数据库连接 (ODBC) 层。下图将用于 SQL Server 的 .NET Framework 数据提供程序与用于 OLE DB 的 .NET Framework 数据提供程序进行了对比。用于 OLE DB 的 .NET Framework 数据提供程序通过提供连接池和事务服务的 OLE DB 服务组件和数据源的 OLE DB 提供程序与 OLE DB 数据源进行通信。

![Microsoft Sql 客户端数据库访问](../Images/28c6d974c9e2e0d244dcd9e3abb79459.png)

[http://msdn.microsoft.com/en-us/library/a6cd7c08.aspx](http://msdn.microsoft.com/en-us/library/a6cd7c08.aspx)

那么这是什么一回事？

正如其他评论员所指出的，您对异常处理很了解；实际的异常似乎没有在任何地方被捕获。

鉴于您已经说过相同的 exe 正在其他 3 台机器上运行，您确实需要实际的异常消息来确定它是否是：

1.  环境（可能机器连接不上数据库服务器）
2.  基于用户（运行它的用户无权连接到数据库服务器）
3.  基于时间（当时服务器不可用，因此连接失败。）

如果您想发布 LoadComboBoxes 的代码（或者至少是数据库工作的部分），那么这可能有助于我们提供一些进一步的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:41:08.817

不，这不是由于 SQL Express，不是必须安装它才能运行应用程序，但似乎确实缺少 DLL。我将首先检查您是否安装了框架 4.0。此外，如果您使用的库不在 .NET 框架中，请确保在所需的引用属性上设置 Copy Local = true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:34:10.170

我 100% 确定您不需要安装 SQL 客户端来访问数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T08:43:53.400

看看您的 LoadComboBoxes 例程是如何打开连接的。连接字符串中有什么东西在那台机器上不正确吗？.nEt 框架应该已经包含连接到 Sql 的所有先决条件。

# php - 使用mysql将多个列值分配给JSON php数组

> ID：12138591
> 
> 赞同：0
> 
> 时间：2012-08-27T08:31:27.947
> 
> 标签：php, javascript, mysql, arrays, json

我必须发出一个 JSON ajax 请求并返回一个数组。

我在其他多个问题上找到了这段代码（编辑到我的问题）：

```
var hej[];
function ajax_search(){ 
    $.getJSON('test.php',function(response){
    var data = response.get_response;
    for (i in data){
      hej.push([i,data[i]]);
    }
alert(hej[0]);
} 
```

在 php 部分，我有一个数据库，我需要从中获得 5 列 pr 的数据。排。我只有一行，我需要数组中的所有五列。

```
$sql = "SELECT * FROM 'table'
   LIMIT 1 OFFSET $i"; //random offset
$result = mysql_query($sql);

$storeArray = Array();
while($row = mysql_fetch_array($result))
{
    $storeArray[0]=$row['column1'];
    $storeArray[1]=$row['column2'];
    $storeArray[2]=$row['column3'];
    $storeArray[3]=$row['column4'];
    $storeArray[4]=$row['column5'];
}
$json = json_encode($storeArray);
echo $json; 
```

我知道我做错了什么，而且我是编程新手。我需要能够在调用后访问我的 javascript 中的所有列值并在其他函数中使用它们，但我无法让它返回。

如果其中任何一个有错误，我真的会为 javascript 和 php 提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:43:13.490

为什么使用 response.get_response？

```
var hej[];
function ajax_search(){ 
    $.getJSON('test.php',function(data){
    $.each(data, function (i,item) {
      hej.push([i,item]);
    }
alert(hej[0]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:45:55.140

试试这个：

**Javascript代码：**

```
var hej[];
function ajax_search(){
    $.getJSON('test.php',function(response){
        $.each(response.results, function(key, val) {
            hej.push(val);
        });
        alert(hej[0]);
    });
} 
```

**PHP代码：**

```
<?php
$sql = "SELECT * FROM 'table' LIMIT 1 OFFSET $i"; //random offset
$result = mysql_query($sql);

$storeArray = array();
while($row = mysql_fetch_array($result)) {
    $storeArray[0]= $row['column1'];
    $storeArray[1]=$row['column2'];
    $storeArray[2]=$row['column3'];
    $storeArray[3]=$row['column4'];
    $storeArray[4]=$row['column5'];
}

$json = json_encode( array('results' => $storeArray ) );
echo $json;
?> 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:58:37.870

它应该是：

```
function ajax_search(){ 
    $.getJSON('test2.php',function(response){
        // response.column1
        // response.column2
        // response.column3

        // for array push:
        var hej = [];
        $.each(response, function(key, val) {
             hej.push(val);
        });
        alert(hej[0]); // it will alert column1
    });

} 
```

和 MySQL：

```
$sql = "SELECT `column1`, `column2`, `column3`, `column4`, `column5` FROM `table` LIMIT 1 OFFSET $i"; //random offset
$result = mysql_query($sql);
$row = mysql_fetch_assoc($result);
$json = json_encode($row);
echo $json; 
```

# android - onPostExecute 没有被调用

> ID：12138594
> 
> 赞同：5
> 
> 时间：2012-08-27T08:31:55.060
> 
> 标签：android, android-asynctask

我有一个活动（RecipiesActivity），通过单击我的应用程序的主要活动的“下一步”按钮打开。

在 RecipiesActivity onCreate 中，我想在 AsyncTask 中调用 Web 服务。目前，由于我还没有实现 web 服务，我只是调用了 bitly 提供的 web 服务（但这与我的问题无关）。

问题是虽然调用了webservice并且没有抛出异常，但是从doInBackground返回了一个结果，但是我的onPostExecute没有被调用。我进行了一些研究，发现了如下可能的原因 - 但似乎没有一个是我的情况：

*   onPostExecute 参数与 AsyncTask 参数不匹配 - 在我的情况下它们匹配
*   android 中的一个错误，它不允许在 UI 线程中执行 AsyncTask。使用 Class.forName("android.os.AsyncTask") 可以克服它 - 我试过这个并没有任何区别
*   AsyncTask 不是从 UI 线程启动的——就我而言，我相信它是
*   doInBackground 没有返回 - 在我的情况下它确实返回了，我已经使用调试器逐步完成了它
*   在 onPostExecute 之前不使用 @Override - 在我的情况下，我使用的是 @Override

代码如下：

```
public class RecipiesActivity extends Activity {

    private TextView tv;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_recipies); 
        tv = (TextView) findViewById(R.id.Response);

        //Start the WS call in an AsyncTask 
        new CallWS().doInBackground("https://api-ssl.bitly.com/v3/shorten?login=maskedLogin&apiKey=maskedKey&longUrl=http%3A%2F%2Fgoogle.com%2F");          
    }

    private class CallWS extends AsyncTask<String, Integer, String>
    {
        @Override
        protected String doInBackground(String... params) {

            String result = null;
            HttpClient httpClient = new DefaultHttpClient(); 
            HttpContext localContext = new BasicHttpContext(); 
            HttpGet get_request = new HttpGet(params[0]); 
            try
            {
                HttpResponse httpResponse = httpClient.execute(get_request, localContext);
                //int responseCode = httpResponse.getStatusLine().getStatusCode();
                HttpEntity entity = httpResponse.getEntity();
                if (entity != null)
                {
                    InputStream istream = entity.getContent();
                    BufferedReader br = new BufferedReader(new InputStreamReader(istream));

                    try
                    {
                        result = br.readLine();
                    }
                    catch (Exception e)
                    {
                        //TODO Handle the IOException that the readline may throw 
                    }
                    finally
                    {
                        istream.close();
                    }
                }

            }catch (Exception e)
            {
                //TODO Handle the IOException and the ClientProtocolException that the 
                // httpClient.execute can throw
            }
            finally
            {
                httpClient.getConnectionManager().shutdown();
            }
            return result;
        } 

        @Override
        protected void onPostExecute(String result)
        {
            if (result == null)
            {
                tv.setText("The result is NULL");
            }
            else
            {
                tv.setText(result);
            }
        }       
    }
} 
```

感谢您的帮助，

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T08:34:53.203

而不是`doInBackground()`，只需调用`execute()`AsyncTask 的方法。调用`doInBackground()`执行它在锡上所说的：调用`doInBackground()`（在同一个线程中）并返回。它不会召唤`onPostExecute()`你。`execute()`将启动一个后台线程，`doInBackground()`在后台线程上调用，然后在 UI 线程上发布`doInBackground()`to的结果。`onPostExecute()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T08:42:35.253

尝试更改此行

```
new CallWS().doInBackground("https://api-ssl.bitly.com/v3/shorten?login=maskedLogin&apiKey=maskedKey&longUrl=http%3A%2F%2Fgoogle.com%2F"); 
```

到

```
new CallWS().execute("https://api-ssl.bitly.com/v3/shorten?login=maskedLogin&apiKey=maskedKey&longUrl=http%3A%2F%2Fgoogle.com%2F"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-09T14:54:34.457

确保你的 onPostExecute 函数有 @Override

# objective-c - UITableView 滚动不连贯

> ID：12138599
> 
> 赞同：0
> 
> 时间：2012-08-27T08:32:15.903
> 
> 标签：objective-c, ios, cocoa-touch

这是我的 cellForRowAtIndexPath 方法。在我的项目中使用 ARC。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath {

    static NSString* cellIdentifier = @"ActivityCell";

    UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (!cell) {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];

    }

    Activity* activityToShow = [self.allActivities objectAtIndex:indexPath.row];

    //Cell and cell text attributes

    cell.textLabel.text = [activityToShow name];

    //Slowing down the list scroll, I guess...

    LastWeekView* lastWeekView = [[LastWeekView alloc] initWithFrame:CGRectMake(10, 39, 120, 20)];

    [lastWeekView setActivity:activityToShow];

    lastWeekView.backgroundColor = [UIColor clearColor];

    [cell.contentView addSubview:lastWeekView];

     return cell;

} 
```

我猜 LastWeelView 分配正在减慢滚动速度。在 lastWeekView 中，我从 CoreData 获取实体的关系，对这些值执行计算并在其 drawRect 方法中绘制一些颜色。

这是 LastWeekView 的 drawRect

```
- (void)drawRect:(CGRect)rect
{
    NSArray* activityChain = self.activity.computeChain; //fetches its relationships data

    for (id item in activityChain) {
        if (marking == [NSNull null]) 
        {
            [notmarkedColor set];
        }
        else if([(NSNumber*)marking boolValue] == YES)
        {
            [doneColor set];
        }
        else if([(NSNumber*)marking boolValue] == NO)
        {
            [notdoneColor set];
        }

        rectToFill = CGRectMake(x, y, 10, 10);
        CGContextFillEllipseInRect(context, rectToFill);

        x = x + dx;
    }
} 
```

我该怎么做才能平滑tableView的滚动？如果我必须将此 lastWeekView 异步添加到每个单元格的 contentView，我该怎么做？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:38:30.060

我建议`LastWeekView`在单元格的分配范围内进行分配。另外 - 获取所有核心数据对象，`viewDidLoad`以便 in`cellForRowAtIndexPath:`方法从数组而不是从存储中检索它。它应该看起来像这样：

```
- (void)viewDidLoad
    ...
    _activities = [Activity fetchAllInContext:managedObjectContext];
    ...
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCell];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
        LastWeekView* lastWeekView = [[LastWeekView alloc] initWithFrame:CGRectMake(10, 39, 120, 20)];

        lastWeekView.backgroundColor = [UIColor clearColor];

        [cell.contentView addSubview:lastWeekView];
    }

    Activity *activityToShow = [_activities objectAtIndex:[indexPath row]];
    LastWeekView *lastWeekView = (LastWeekView *)[[[cell contentView] subviews] lastObject];
    [lastWeekView setActivity:activityToShow];
    return cell;
} 
```

请注意，您还可以将 UITableViewCell 子类化以将 contentView 替换为您的 `LastWeekView`以快速访问活动属性。

# sql - 仅通过在事务中运行存储过程就足以安全地测试它吗？

> ID：12138602
> 
> 赞同：1
> 
> 时间：2012-08-27T08:32:22.953
> 
> 标签：sql, tsql, testing, transactions

我有一个名为 MoveSomeItems 的 sp，它从 Foo Db 的 tableA 中获取一些行。并将它们移动到 Bar Db 中的 tableA。

我想测试这个 sp 如果它真的移动了这些项目。

在事务中运行这个 sp 并选择行以查看它们是否被移动是否足够，或者我应该以不同的方式处理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:08:29.473

这取决于这一切出错的影响是什么？目标表中的数据不正确会有什么影响，它会杀死某人，只是惹恼他们，还是不太可能有人注意到？会容易修复吗？

您给出的方法存在风险。例如：

1.  如果数据库非常繁忙，就有可能导致一个事务过度锁定甚至死锁，从而可能导致其他事务失败。将 TRANSACTION ISOLATION LEVEL 设置为 READ UNCOMITTED 并将 DEADLOCK PRIORITY 设置为 LOW 将有助于减少这种情况，但不能完全消除它。

2.  其他事务可能在 READ UNCOMMITED 隔离模式下运行。在这种情况下，他们将暂时看到插入的结果，直到发出回滚。

3.  值得注意的是，如果您正在测试的过程在其中调用 COMMIT TRANSACTION，则在调用 ROLLBACK 时可能不会得到您想要的结果。

4.  您可能会推送数据库或日志以耗尽磁盘空间。

5.  您可能会用完所有可用的 CPU、内存、磁盘 IO、网络或其他容量限制。

6.  最后，我怀疑这不是一个完整的列表。我想说的是，它可能会以奇怪的方式出错。

如果您有一个完全备份的个人开发数据库，​​那么您甚至不需要事务，只需在事件发生后进行恢复即可。不过，这笔交易可能会为您节省一些时间。这是最安全的解决方案。

如果您使用的是共享开发数据库，​​您的方法可能是可以接受的，但我仍然会进行备份以防万一，特别是如果您已经与团队关系不佳。

如果您使用的是实时数据库，如果系统作为一个整体不是那么重要并且在您修复事物时可以维持一些停机时间，那么它仍然是可以接受的。再次进行备份。

如果您正在查看的数据库正在控制一个对安全至关重要的过程或其他一些关键任务功能，那么甚至不要去那里，您可能会失去对您的责任保险的无索赔或更糟的情况。在这种情况下，最好将备份恢复到测试服务器并在那里进行测试，从而创建我的第一个场景。但请注意，在执行此操作时必须考虑很多问题。例如，在测试系统中使用个人信息可能是非法的。此外，可能需要模拟其他系统的依赖项以确保您不会影响它们，例如不要将测试系统连接到实时电子邮件服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:02:25.197

如果我有一个复杂的存储过程，我希望能够测试和回滚，我添加一个输入参数（始终作为最后一个参数），@debug 默认值为 0（所以你不需要指定它当你在产品上运行）。

然后我在最后编写代码来测试参数是否 = 1，如果是，我运行任何选择查询来显示我想要查看的数据，然后使用 raiseerror 将程序发送到 catch 块（千万不要在没有尝试的情况下编写多个事务catch 块）并让它回滚。

这样您就可以轻松地在 dev 上检查结果并自动回滚。

# c# - WPF 文本框绑定百分比

> ID：12138603
> 
> 赞同：4
> 
> 时间：2012-08-27T08:32:27.003
> 
> 标签：c#, wpf, format

我必须将 TextBox 绑定到 % 值。所以我在 Binding 上设置 StringFormat 属性，如下所示：

```
<TextBox Text="{Binding Path=BewertungsFaktore.Gewinn, StringFormat=P2, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource TextBoxStyle}" HorizontalAlignment="Left"/> 
```

这似乎工作得很好。但是，如果我编辑该值，则会出现问题。例如，如果我输入值 1，则文本框应将其格式化为 1%。但主要问题是它格式化为 100.00%。另一个问题是，如果我使用的是德语系统，我是否必须输入“，”而不是“。”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-29T04:52:18.410

如果你只使用这样的字符串格式，`{0:F2}%`你将不得不忍受像 4.23 这样的数据库值来表示 4.23%，这对我来说是不可接受的（直到他们在 SQL Server 中引入“百分比”数据类型）。

我创建了以下值转换器来将 TextBox 中的百分比值（例如 4.2367%）映射到数据库值（例如 0.042367）中：

```
public class PercentageConverter : IValueConverter
{
    //E.g. DB 0.042367 --> UI "4.24 %"
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var fraction = decimal.Parse(value.ToString());
        return fraction.ToString("P2");
    }

    //E.g. UI "4.2367 %" --> DB 0.042367
    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        //Trim any trailing percentage symbol that the user MAY have included
        var valueWithoutPercentage = value.ToString().TrimEnd(' ', '%');
        return decimal.Parse(valueWithoutPercentage)/100;
    }
} 
```

*请注意格式化字符串（在本例中为“P2”）如何仅限制**显示**多少小数位，而不限制多少小数位传递给底层绑定源。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T08:48:45.623

该`StringFormat`属性仅控制绑定值的输出字符串。“P2”只是将该值乘以 100，并用两个十进制数字和一个尾随的“%”对其进行格式化。在输入时，此格式将被忽略。

如果您还需要输入百分比值，则必须使用[绑定转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter.aspx)。这样的转换器还可以像这样以文化不变的方式解析输入字符串：

```
double fraction;
double percentage;
if (double.TryParse(value, NumberStyles.AllowDecimalPoint, CultureInfo.InvariantCulture, out percentage))
{
    fraction = percentage / 100d;
} 
```

# python - 使用用户输入在python中创建乘法表

> ID：12138604
> 
> 赞同：-6
> 
> 时间：2012-08-27T08:32:41.487
> 
> 标签：python

我对 python 非常陌生，所以我的问题可能看起来有点过于琐碎，但相信我，它现在对我来说就像火箭科学。所以，就在这里。我必须创建一个程序来读取包含整数的单行用户输入，并打印出该数字的倍数，最多为该数字的 12 倍。例如：

输入一个数字：3

```
3 x 1 = 3
3 x 2 = 6
3 x 3 = 9
3 x 4 = 12
3 x 5 = 15
3 x 6 = 18
3 x 7 = 21
3 x 8 = 24
3 x 9 = 27
3 x 10 = 30
3 x 11 = 33
3 x 12 = 36 
```

我想我必须使用 for 和 range 函数，但不知道该怎么做。请帮我 ：（

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T08:36:51.003

这是一个非常基本的程序，以上所有内容都包含在基本的python本身中。

您应该浏览以下链接，例如[Bytes of Python](http://www.swaroopch.org/notes/Python)、[LearnPython](http://www.learnpython.org/)等

还有更多教程供您阅读并开始使用。

此行接受用户的输入

```
In [8]: n = raw_input("Enter a number : ")
Enter a number : 5 
```

此行遍历值 1 到 12 的集合，在 python 中，我们可以为此使用 range 函数。

`range(1, 13)`有没有因为它范围功能在最后一个值之前停止..

%s 是字符串格式化语法，类似于 C，最后`int(n)`是因为输入是字符串格式，需要在乘法发生之前将其转换为 int

```
In [9]: for i in range(1,13):
   ...:     print "%s x %s = %s" %(n, i, i*int(n))
   ...:
5 x 1 = 5
5 x 2 = 10
5 x 3 = 15
5 x 4 = 20
5 x 5 = 25
5 x 6 = 30
5 x 7 = 35
5 x 8 = 40
5 x 9 = 45
5 x 10 = 50
5 x 11 = 55
5 x 12 = 60 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:36:36.110

```
x = raw_input('Enter a number: ')
for i in range(1,12):
   print int(x)*i 
```

但是你应该检查 x 是否真的是一个数字；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:40:20.953

```
>>> inp=int(raw_input('enter an integer'))
enter an integer 5
>>> for i in xrange(1,13):         #use range() if you're on python 3.x
...   print "{0} X {1} = {2}".format(inp,i,inp*i)
... 
5 X 1 = 5
5 X 2 = 10
5 X 3 = 15
5 X 4 = 20
5 X 5 = 25
5 X 6 = 30
5 X 7 = 35
5 X 8 = 40
5 X 9 = 45
5 X 10 = 50
5 X 11 = 55
5 X 12 = 60 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T08:40:50.580

```
var = raw_input("Enter something: ")
print "you entered ", var

for n in range(1, 10):
    prod = int(var)*n
    print str(var) + " X " + str(n) + " = "  + str(prod) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T08:52:06.783

这是一个适合推文的难以理解的单行线，因为为什么不：

```
import itertools;print"\n".join("%d x %d = %d"%(x+(x[0]*x[1],))for x in itertools.product([int(raw_input("Enter a number : "))],range(1,13))) 
```

# android - ListView、游标和空集

> ID：12138612
> 
> 赞同：0
> 
> 时间：2012-08-27T08:33:12.953
> 
> 标签：android, sqlite, listview, cursor

我会直奔主题。我有 1 个班级，其中有 6 个按钮。**每个按钮都会将一些参数**保存到 SQLiteDatabase ，然后它会启动一个 Activity。

新的 Activity 接受**参数**并查询数据库以相应地提取数据。当活动启动时，如果我按下另一个或相同的按钮，我会清除**参数**以便再次保存它们。

如果 1 个表（链接到按钮）为空，则返回我想要的消息。问题是如果 1 为空，那么所有表都会返回消息，即使它们有数据！

我的第一堂课

```
public class HRecords extends Activity {
 SQLiteDatabase myDB=null;
 Button tes,con,al,me,pr,va;

protected void onCreate(Bundle savedInstanceState){
     super.onCreate(savedInstanceState);
     setContentView(R.layout.records);
     tes=(Button) findViewById(R.id.testbut);
     con=(Button) findViewById(R.id.condbut);
     al=(Button) findViewById(R.id.albut);
     me=(Button) findViewById(R.id.medbut);
     pr=(Button) findViewById(R.id.procbut);
     va=(Button) findViewById(R.id.vacbut);

     Database openHelper = new Database(this);//create new Database to take advantage of the SQLiteOpenHelper class
     myDB = openHelper.getWritableDatabase(); // or getWritableDatabase();
     myDB=SQLiteDatabase.openDatabase("data/data/com.example.login2/databases/aeglea", null, SQLiteDatabase.OPEN_READWRITE);//set myDB to aeglea

     doclicks();

}

private void doclicks(){
     tes.setOnClickListener(new View.OnClickListener() {
            public void onClick(View arg0) {
                ContentValues values = new ContentValues();
                values.put("ton", "Tests");
                values.put("tazle","user_test");
                myDB.insert("history_go",null, values);
                //create new intent
                Intent record = new Intent(getApplicationContext(), Record.class);
                // Close all views before launching logged
                record.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(record);
                // Close Login Screen
                onPause();
            }});
     con.setOnClickListener(new View.OnClickListener() {
            public void onClick(View arg0) {
                ContentValues values = new ContentValues();
                values.put("ton", "Medical Conditions");
                values.put("tazle","user_cond");
                myDB.insert("history_go",null, values);
                //create new intent
                Intent record = new Intent(getApplicationContext(), Record.class);
                // Close all views before launching logged
                record.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(record);
                // Close Login Screen
                onPause();
            }});
     al.setOnClickListener(new View.OnClickListener() {
            public void onClick(View arg0) {
                ContentValues values = new ContentValues();
                values.put("ton", "Allergies");
                values.put("tazle","user_all");

                myDB.insert("history_go",null, values);
                //create new intent
                Intent record = new Intent(getApplicationContext(), Record.class);
                // Close all views before launching logged
                record.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(record);
                // Close Login Screen
                onPause();
            }});
     me.setOnClickListener(new View.OnClickListener() {
            public void onClick(View arg0) {
                ContentValues values = new ContentValues();
                values.put("ton", "Medication");
                values.put("tazle","user_med");

                myDB.insert("history_go",null, values);
                //create new intent
                Intent record = new Intent(getApplicationContext(), Record.class);
                // Close all views before launching logged
                record.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(record);
                // Close Login Screen
                onPause();
            }});
     pr.setOnClickListener(new View.OnClickListener() {
            public void onClick(View arg0) {
                ContentValues values = new ContentValues();
                values.put("ton", "Medical Procedures");
                values.put("tazle","user_proc");

                myDB.insert("history_go",null, values);
                //create new intent
                Intent record = new Intent(getApplicationContext(), Record.class);
                // Close all views before launching logged
                record.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(record);
                // Close Login Screen
                onPause();
            }});
     va.setOnClickListener(new View.OnClickListener() {
            public void onClick(View arg0) {
                ContentValues values = new ContentValues();
                values.put("ton", "Vaccinations");
                values.put("tazle","user_vacc");

                myDB.insert("history_go",null, values);
                //create new intent
                Intent record = new Intent(getApplicationContext(), Record.class);
                // Close all views before launching logged
                record.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(record);
                // Close Login Screen
                onPause();
            }});
}

} 
```

第二个类，如您所见，它从 SQLite 数据库中提取数据（您还可以看到空结果的消息“此处未添加任何内容。转到站点添加更多内容。”）

```
public class Record extends Activity{
SQLiteDatabase myDB=null;
TextView title=null;
Cursor cur,cur2=null;
ListView list=null;
 private ArrayAdapter<String> listAdapter ;  

protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.record);
    title = (TextView) findViewById(R.id.recordTitle);
    list = (ListView) findViewById(R.id.listView1);

    Database openHelper = new Database(this);
    myDB = openHelper.getReadableDatabase(); 
    myDB=SQLiteDatabase.openDatabase("data/data/com.example.login2/databases/aeglea", null, SQLiteDatabase.OPEN_READONLY);

    Database db = new Database(getApplicationContext());
    cur = fetchOption("SELECT * FROM history_go");
    title.setText(cur.getString(cur.getColumnIndex("ton")));

    ArrayList<String> itemlist = new ArrayList<String>();  
    String[] names=null;
    //do query
    cur2=fetchOption("SELECT * FROM "+cur.getString(cur.getColumnIndex("tazle")));
    //check for results
    if (cur2.getCount()==0) {
        names = new String[] { "Nothing Added here. Go to the site to add more."}; 
    }else{
        names = new String[] {cur2.getString(cur2.getColumnIndex("name"))};

    }
     //add the array as list to the ArrayList
     itemlist.addAll( Arrays.asList(names) ); 
     listAdapter = new ArrayAdapter<String>(this, R.layout.item, itemlist); 
     //if results add the rest
     if(cur2.getCount()!=0){
         for(int i=0;i<(cur2.getCount()-1);i++){
            cur2.moveToNext();
            listAdapter.add(cur2.getString(cur2.getColumnIndex("name"))); 
         }
     }
     // Set the ArrayAdapter as the ListView's adapter.  
     list.setAdapter(listAdapter); 
     //remove the navigation history
     db.resetHistoryNavigation();
     cur.close();
     cur2.close();
}

public Cursor fetchOption(String query) throws SQLException {
    Cursor mCursor = myDB.rawQuery(query, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
}

} 
```

**编辑**

另外，我忘了提到如果我将验证条件设置为 cur2 == null 应用程序会崩溃，因为光标超出范围（for 循环触发）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:36:30.950

我发现出了什么问题。空集触发了 catch 异常，之后没有收到任何其他内容。所以每个表都是空的。

我必须实现多个 try/catch

```
private void doclicks(){
     hr.setOnClickListener(new View.OnClickListener() {
         private Database db = new Database(getApplicationContext());
         JSONArray allergy,condition,medication,procedure,test,vaccine;
            public void onClick(View v) {
                ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
                postParameters.add(new BasicNameValuePair("uid", cursor.getString(cursor.getColumnIndex("uid"))));
                JSONObject response = null;
                try {
                    CustomHttpTask asdf = new CustomHttpTask();
                    response = asdf.execute("http://192.168.1.4/aeglea/android/history.php", postParameters).get();

                    if(response.getString("success").equals("1")){
                        //get JSON Arrays
                        try{test = response.getJSONArray("test");}catch(Exception e){}
                        try{allergy = response.getJSONArray("allergy");}catch(Exception e){}
                        try{condition = response.getJSONArray("condition");}catch(Exception e){}
                        try{medication = response.getJSONArray("medication");}catch(Exception e){}
                        try{procedure = response.getJSONArray("procedure");}catch(Exception e){}
                        try{vaccine = response.getJSONArray("vaccine");}catch(Exception e){}

                        }
                }catch (Exception e) {
                        Log.e("HHHERPT","YO MAMAA "+e);
                    }
                        //temp JSONOnject
                        JSONObject buffer=null;

                        //reset older values
                        db.resetHistory();

                        //Store values 
                        try{
                        for(int i=0;i<allergy.length();i++){
                            buffer=allergy.getJSONObject(i);
                            db.addRecords("allergy", 
                                    Integer.parseInt(buffer.getString("id")), 
                                    Integer.parseInt(buffer.getString("uid")), 
                                    buffer.getString("name"), 
                                    1, 
                                    "",
                                    (float) 0.1, 
                                    1, 
                                    1);
                        }
                        }catch(Exception e){

                        }
                        try{
                        for(int i=0;i<condition.length();i++){
                            buffer=condition.getJSONObject(i);
                            db.addRecords("condition", 
                                    Integer.parseInt(buffer.getString("id")), 
                                    Integer.parseInt(buffer.getString("uid")), 
                                    buffer.getString("name"),
                                    Integer.parseInt(buffer.getString("year")) , 
                                    "",(float) 0.1, 
                                    Integer.parseInt(buffer.getString("current")), 
                                    1);
                        }
                        }catch(Exception e){

                        }
                        try{
                        for(int i=0;i<medication.length();i++){
                            buffer=medication.getJSONObject(i);
                            db.addRecords("medication", 
                                    Integer.parseInt(buffer.getString("id")), 
                                    Integer.parseInt(buffer.getString("uid")), 
                                    buffer.getString("name"), 
                                    1, 
                                    "",
                                    (float) 0.1, 
                                    Integer.parseInt(buffer.getString("current")), 
                                    1);
                        }
                        }catch(Exception e){

                        }
                        try{
                        for(int i=0;i<procedure.length();i++){
                            buffer=procedure.getJSONObject(i);
                            db.addRecords("procedure", 
                                    Integer.parseInt(buffer.getString("id")), 
                                    Integer.parseInt(buffer.getString("uid")), 
                                    buffer.getString("name"), 
                                    Integer.parseInt(buffer.getString("year")), 
                                    buffer.getString("comments"),
                                    (float) 0.1, 
                                    0, 
                                    1);
                        }
                        }catch(Exception e){

                        }

                        try{
                        for(int i=0;i<vaccine.length();i++){
                            buffer=vaccine.getJSONObject(i);
                            db.addRecords("vaccine", 
                                    Integer.parseInt(buffer.getString("id")),
                                    Integer.parseInt(buffer.getString("uid")), 
                                    buffer.getString("name"),
                                    Integer.parseInt(buffer.getString("year")), 
                                    "",
                                    (float) 0.1, 
                                    0, 
                                    1);
                        }
                        }catch(Exception e){

                        }
                        try{
                            for(int i=0;i<test.length();i++){
                                buffer=test.getJSONObject(i);
                                db.addRecords("test", 
                                        Integer.parseInt(buffer.getString("id")), 
                                        Integer.parseInt(buffer.getString("uid")), 
                                        buffer.getString("name"), 
                                        Integer.parseInt(buffer.getString("year")), 
                                        buffer.getString("comments"),
                                        (float) Float.parseFloat(buffer.getString("value")), 
                                        1, 
                                        1);
                            }
                            }catch(Exception e){

                            }

                //create new intent
                Intent records = new Intent(getApplicationContext(), HRecords.class);
                // Close all views before launching logged
                records.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(records);
                // Close Login Screen
                onPause();
            }
        });

} 
```

# ajax - 仅将事件 ajaxStart() 和 ajaxStop() 附加到当前主干视图

> ID：12138616
> 
> 赞同：4
> 
> 时间：2012-08-27T08:33:45.733
> 
> 标签：ajax, backbone.js, backbone-views

我正在为我正在构建的应用程序使用主干。在这个应用程序中，我有一个主视图，它呈现一个模板，里面有 2 个其他视图。一个标题视图和另一个带有一些内容的视图。标题视图仅用于与内容视图交互，并且也具有特定的功能。

在标题模板和内容模板中，我有相同的代码，一个隐藏的 DIV，带有一个加载器图像，在进行 ajax 调用时显示。我遇到的问题是，当我第一次加载应用程序时（或者当我刷新内容视图时），内容视图正在从 ajax 请求中加载一些数据，但是加载器同时显示在标题和内容中模板（例如如果 ajaxStart() 是未附加到视图的全局事件。

这是内容视图设置：

> ```
> App.View.Content = Backbone.View.extend({
>         type:'test',
>         template: twig({
>             href: '/js/app/Template/Content.html.twig',
>             async: false
>         }),
>         block:{
>             test:twig({
>                 href: '/js/app/Template/block/test.html.twig',
>                 async: false
>             })
>         },
>         list:[],
> 
>         showLoader: function(el){
>             console.log('loader: ', $('#ajax_loader', el));
>             $('#ajax_loader', el).show();
>             console.log('Ajax request started...');
>         },
> 
>         hideLoader: function(el){
>             $('#ajax_loader', el).hide();
>             console.log('Ajax request ended...');
>         },
> 
>         initialize: function(params)
>         {
>             this.el   = params.el;
>             this.type = params.type || this.type;
>             var self  = this;
> 
>             this.el
>                 .ajaxStart(function(){self.showLoader(self.el);})
>                 .ajaxStop(function(){self.hideLoader(self.el);});
> 
>             this.render(function(){
>                 self.list = new App.Collection.ListCollection();
>                 self.refresh(1, 10);
>             });
>         },
> 
>     refresh:function(page, limit)
>     {
>         var self = this;
>         console.log('Refreshing...');
> 
>         $('#id-list-content').fadeOut('fast', function(){
>             $(this).html('');
>         });
> 
>         this.list.type  = this.type;
>         this.list.page  = page || 1;
>         this.list.limit = limit || 10;
> 
>         this.list.fetch({
>             success: function(data){
>                 //console.log(data.toJSON());
> 
>                 $.each(data.toJSON(), function(){
>                     //console.log(this.type);
>                     var tpl_block = self.block[this.type];
>                     if (tpl_block != undefined) {
>                         var block = tpl_block.render({
>                             test: this
>                         });
>                         $(block).appendTo('#id-list-content');
>                     }
>                 });
> 
>                 $('#id-list-content').fadeIn('fast');
>             }
>         });
>     },
> 
>     render: function(callback)
>     {
>         console.log('Rendering list...');
>         this.el.html(this.template.render({
> 
>         }));
> 
>         if (undefined != callback) {
>             callback();
>         }
>     }
> }); 
> ```

如您所见，我正在使用一段丑陋的代码来附加 ajaxStart / ajaxStop 事件：

```
this.el
    .ajaxStart(function(){self.showLoader(self.el);})
    .ajaxStop(function(){self.hideLoader(self.el);}); 
```

我以前是这样的：

```
this.el
    .ajaxStart(self.showLoader())
    .ajaxStop(self.hideLoader()); 
```

但是无论出于何种原因，我仍然未定义，`this.el`并没有在`showLoader()`and中定义`hideLoader()`。

我当时在想，`ajaxStart()`并且`ajaxStop()`被附加到`this.el`DOM 上，只有这个视图才能听到它。但是我的 headerView 具有完全相同的设置（加载的树枝模板除外）显然接收到事件并显示加载器。

为了确保这种行为，我`showLoader()`在内容视图中注释掉了，加载器仍然显示在标题视图中。

我不知道我做错了什么:(

**编辑（在“mu太短”的回答之后）：**

我的内容视图现在看起来像这样：

```
showLoader: function(){
            //this.$('#ajax_loader').show();
            console.log('Ajax request started...');
        },

        hideLoader: function(){
            this.$('#ajax_loader').hide();
            console.log('Ajax request ended...');
        },

        initialize: function(params)
        {
            var self  = this;

            console.log(this.el);

            _.bindAll(this, 'showLoader', 'hideLoader');

            this.$el
                .ajaxStart(this.showLoader)
                .ajaxStop(this.hideLoader);

            this.render(function(){
                self.list = new App.Collection.List();
                self.refresh(1, 10);
            });
        },
...

render: function(callback)
        {
            console.log('Rendering post by page...');
            this.$el.html(this.template.render({

            }));

            if (undefined != callback) {
                callback();
            }
} 
```

和我的标题视图：

```
...
showLoader: function(){
            this.$('#ajax_loader').show();
            //console.log('Ajax request started...');
        },

        hideLoader: function(el){
            this.$('#ajax_loader').hide();
            console.log('Ajax request ended...');
        },

        initialize: function(params)
        {
            var self = this;
            _.bindAll(this, 'showLoader', 'hideLoader');

            this.$el
                .ajaxStart(this.showLoader)
                .ajaxStop(this.hideLoader);

            this.models.Link = new App.Model.Link();
            this.render();
        },

        render: function(callback)
        {
            this.$el.html(this.template.render({
                data: []
            }));

            if (undefined != callback) {
                callback();
            }
        }
... 
```

但是加载器仍然显示在标题视图模板中

PS：`this.showLoader()`不是错字，因为我想在当前主干视图中调用该函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T08:59:48.803

JavaScript 函数的上下文 (AKA `this`) 取决于函数的调用方式，而不是定义函数的上下文。鉴于这样的事情：

```
var f = o.m;
f(); 
```

当您`o.m`通过普通函数调用时`f`，`this`内部`o.m`通常是全局上下文（`window`在浏览器中）。您也可以使用[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)and[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)来选择不同的`this`，这样：

```
f.call(o); 
```

会做出你所期望`this`的那样。`o`我应该提一下，您可以强制选择在大多数 JavaScript 环境中`this`使用[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)，但我不想走得太远。

关键是：

```
this.el
    .ajaxStart(this.showLoader)
    .ajaxStop(this.hideLoader); 
```

不足以确保`showLoader`并且`hideLoader`将在正确的环境中运行；我还假设您在末尾的括号`showLoader`只是`hideLoader`拼写错误。

在 Backbone 应用程序中强制上下文的最常见方法是[`_.bindAll`](http://underscorejs.org/#bindAll)在您的`initialize`:

```
initialize: function(params) {
    _.bindAll(this, 'showLoader', 'hideLoader');
    //... 
```

这基本上取代了或多或少等同于您的包装器的东西`this.showLoader`：`this.hideLoader`

```
function() { self.showLoader(self.el) } 
```

一旦你有了它`_.bindAll`，这个：

```
this.el
    .ajaxStart(this.showLoader)
    .ajaxStop(this.hideLoader); 
```

会正常工作。

* * *

顺便说一句，你不需要这样做：

```
this.el = params.el; 
```

在您的`initialize`, Backbone[为您执行此操作](http://backbonejs.org/#View-constructor)：

> **构造函数/初始化** `new View([options])`
> 
> [...] 有几个特殊选项，如果通过，将直接附加到视图：`model`、`collection`、`el`、`id`、`className`和。`tagName``attributes`

你不需要做这样的事情：

```
$('#ajax_loader', el).show(); 
```

或者，Backbone 会在您的视图中为您提供一个[`$`方法](http://backbonejs.org/#View-dollar)，该方法可以在不隐藏`el`参数列表末尾的情况下执行相同的操作；这样做：

```
this.$('#ajax_loader').show(); 
```

在 Backbone 中更惯用。

此外，`this.el`不一定是 jQuery 对象，所以不要这样做：

```
this.el.html(this.template.render({ ... })); 
```

在您的 中`render`，请改用缓存的[`this.$el`](http://backbonejs.org/#View-%24el)：

```
this.$el.html(this.template.render({ ... })); 
```

# php - 如何将变量从模型传递到控制器

> ID：12138618
> 
> 赞同：0
> 
> 时间：2012-08-27T08:33:50.377
> 
> 标签：php, codeigniter

我得到我的 Ajaxcont 控制器中未定义结果变量。我不确定如何将 $results 从模型传回控制器。我只想让我的 $results 数组保存查询检索到的所有值。我究竟做错了什么？

* * *

```
<?php 
    if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Ajaxcont extends CI_Controller 
{
    function __construct()
    {
        parent::__construct();
        $this->load->model("ajax_model");
    }

    function index()
    {
        $search = $this->input->post('search', TRUE);
        $like_search= '%' .$this->db->escape_like_str($search) . '%';
        $query=  $this->ajax_model->search_course($like_search);

        if ($query)
        {
            foreach($query->result() as $row)
            {

                //$course_name_highlighted = str_ireplace($search, '<b>' .$search . '</b>' , $row->full_name); 

                $start = stripos($row-> Course_Name, $search);
                $length= strlen($search);
                $new_search = substr($row->Course_Name, $start, $length);
                $course_name_highlighted = str_ireplace($new_search, '<b>' .$new_search . '</b>' , $row->Course_Name); 
                $results[]= array(
                    'Course_Name' => $row->Course_Name,
                    'FirstName' => $row->FirstName,
                    'LastName' => $row->LastName,
                    'COURSE_ID' => $row->COURSE_ID,
                    'course_name_highlighted' => $course_name_highlighted
                    );
            }
        }

        if ( $this->input-> is_ajax_request())
        {
            $this->output->set_header("Cache-Control: no-cache, must-revalidate");
            $this->output->set_header("Expires:Mon, 4 Apr 1994 04:44:44 GMT");
            $this->output->set_header("Content-type:application/json");

            echo json_encode($results);
        }
        else 
        {
            $data['results'] = $results;
            $this->load->view('ajax_search', $data);
        }
    }
} 
```

和 Axaj_model 代码：

```
<?php

Class Ajax_model extends CI_Model 
{

    function __construct()
    {
        parent::__construct();
    }

    function search_course($like_search)
    {
        $this->db->select('FirstName, LastName, COURSE_ID, Course_Name, Semester,Time,Book, SECTION_ID');
        $this->db->from('Section');
        $this->db->join('faculty', 'faculty.FACULTY_ID = section.FACULTY_ID');
        $this->db->like('Course_Name', $like_search);
        $this->db->order_by('Course_Name');
        $query = $this -> db->get();

        //If it is all correct
        $results=array();

        if($query -> num_rows() > 0 )
        {
            return $query->result();
        }
        else
        {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:38:07.600

你的结果数组应该在'if'块之外声明，现在它在你回显它的地方是未定义的。添加这个：

```
$results = array(); 
```

在函数“索引”的开头。

您应该阅读[变量范围](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:44:39.183

该模型正在返回一个多维数组。所以你应该使用实例来检索数据。

**模型**

```
$results=array(); // you don't even have to declare it

if($query -> num_rows() > 0 )
{

 $result= $query->result();
return $result;

 }

else
{
    return false;
} 
```

**控制器**

```
function index()

 {

  $search = $this->input->post('search', TRUE);
  $like_search= '%' .$this->db->escape_like_str($search) . '%';
  $query['result']=  $this->ajax_model->search_course($like_search);

if ($query)
{
    foreach($query['result'] as $row)
    {
     //stuff here
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:42:24.020

在 index 函数的顶部，您应该声明结果。

```
function index(){
     $result = array ();
} 
```

# vba - 具有动态范围的 VBA 复制和粘贴

> ID：12138624
> 
> 赞同：0
> 
> 时间：2012-08-27T08:34:13.570
> 
> 标签：vba, dynamic, excel, range

我是 VBA 新手，我被困在某个地方。我必须将 A 列的最后一行复制到 H 列并将其粘贴到 I 列的最后一行。列的最后一行将始终更改。

*例如; 我的数据在 A2:H2 中，I5 是最后一个有数据的单元格。
我的代码应该是复制 A2:H2 并粘贴到 A3:H5。第二次运行宏（在将新数据添加到各个列之后）它应该复制 A6:H6 并将其粘贴到 I 列的最后一行。*

我写了两个不能满足我需求的代码。

*第一个代码是*；

```
 Sub OrderList1()

    Range("a65536").End(xlUp).Resize(1, 8).Copy _
    (Cells(Cells(Rows.Count, 9).End(xlUp).Row, 1))

  End Sub 
```

此代码跳过 A3:H4 并仅粘贴到 A5:H5

*第二个代码是*；

```
 Sub OrderList2()
   Range("A2:H2").Copy Range(Cells(2, 8), _
   Cells(Cells(Rows.Count, 9).End(xlUp).Row, 1))

 End Sub 
```

它复制 A2:H3 并将其粘贴到 A5:H5 但是当我添加新数据时它不会从 A5:H5 开始粘贴。它从 A2:H2 开始并覆盖旧数据。我可以看到我必须更改的内容，范围应该是第一个代码中的动态范围，但我无法编写代码。

我真的很感激一点帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:10:33.737

您可能想以此为起点：

```
Dim columnI As Range
Set columnI = Range("I:I")

Dim columnA As Range
Set columnA = Range("A:A")

' find first row for which cell in column A is empty
Dim c As Range
Dim i As Long
i = 1
For Each c In columnA.Cells
    If c.Value2 = "" Then Exit For
    i = i + 1
Next c

' ok, we've found it, now we can refer to range from columns A to H of the previous row
' to a variable (in the previous row, column A has not been empty, so it's the row we want
' to copy)
Dim lastNonEmptyRow As Range
Set lastNonEmptyRow = Range(Cells(i - 1, 1), Cells(i - 1, 8))

' and now copy this range to all further lines, as long as columnI is not empty
Do While columnI(i) <> ""
   lastNonEmptyRow.Copy Range(Cells(i, 1), Cells(i, 8))
   i = i + 1
Loop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:26:02.717

试试这个，以获得未来的功能，或者至少它对我有用......询问你是否需要帮助理解它:)

```
Option Explicit

Sub lastrow()
    Dim wsS1 As Worksheet 'Sheet1
    Dim lastrow As Long
    Dim lastrow2 As Long

    Set wsS1 = Sheets("Sheet1")

    With wsS1

'Last row in A
        lastrow = Range("A" & Rows.Count).End(xlUp).Row

'Last Row in I
        lastrow2 = Range("I" & Rows.Count).End(xlUp).Row

'Cut in A:H and paste into last row on I
        wsS1.Range("A2:H" & lastrow).Cut wsS1.Range("I" & lastrow2)
    End With

End Sub 
```

# selenium-webdriver - webdriver/selenium 中的意外事件处理

> ID：12138628
> 
> 赞同：1
> 
> 时间：2012-08-27T08:34:27.880
> 
> 标签：selenium-webdriver

如果脚本中发生意外事件（如消息框/新窗口/警告/警报或任何其他中断），selenium 是否可以等待用户输入？例如，如果在代码中添加了一些新功能并且当 selenium 脚本运行时，测试不应该中断，而是应该等待新功能中的条件发生的手动干预。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:05:41.797

由于如果需要用户中断，我们正在自动化测试它没有意义，您也必须处理所有意外事件。我会尝试为您提供一个解决该意外消息框的解决方案，您可以检查该消息框的关闭按钮是否可见与否，如果可见，则可以关闭该框..

# bash - 如何在bash中获取时钟10点之前的当前时间字符串？

> ID：12138630
> 
> 赞同：3
> 
> 时间：2012-08-27T08:34:35.937
> 
> 标签：bash, shell

使用命令：

```
CURRTIME=`date "+%Y%m%d%k%M%S"` 
```

我可以得到当前时间字符串，例如“20120827141534”。我想用这个字符串来制作一个文件。但是当它在一个时钟10点之前，它就不能很好地运行。字符串将是分开的，因为小时字符串只有一位数字，前面有空格。CURRTIME 会是这样的：20120827 41534。我该如何处理呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T08:36:09.383

使用`%H`代替`%k`：

```
CURRTIME=`date "+%Y%m%d%H%M%S"` 
```

`%k`是空间填充（显然）。但`%H`添加了一个填充的 0。

# c++ - 在未从命令行调用的程序上使用 Valgrind

> ID：12138638
> 
> 赞同：0
> 
> 时间：2012-08-27T08:35:21.800
> 
> 标签：c++, memory-leaks, valgrind

我想使用 Valgrind 来调试我的 C++ 程序（在 Linux-x64 上运行）中的内存问题。我的程序输出一个 .so 库，它被一个更大的程序使用。调用不是来自命令行，因此我无法使用以下命令通过 Valgrind 运行库 -

```
valgrind --leak-check=yes myprog arg1 arg2 
```

如何使用 Valgrind 调试库中的内存问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:25:03.813

似乎涉及两个程序：

1.  创建共享对象的程序。要使用 valgrind 运行它，您可以将其包装在 shell 脚本中以使用 valgrind 调用它。
2.  加载共享对象的程序。您不能使用 valgrind 运行程序的某些部分，即只能运行您的共享对象。您需要使用 valgrind 运行整个程序。

您可能应该考虑创建独立于“更大的程序”运行代码的合理测试用例并分析它们。

# php - mod_perl 和 oracle 与 php 和 oracle 性能对比

> ID：12138639
> 
> 赞同：0
> 
> 时间：2012-08-27T08:35:40.957
> 
> 标签：php, performance, perl, oracle, mod-perl2

我有一个大型 Perl 应用程序，我需要让它更快；基于它花费大部分运行时间与数据库通信，我想知道我可以运行多少编写良好的 SQL 语句并达到性能目标。为此，我编写了一个非常简单的处理程序，它执行 SELECT 和 INSERT，当我对 300 个并发请求（总共 10,000 个）进行基准测试时，结果很差（平均 1900 毫秒）。

客户端给我们的性能目标是基于他们使用的另一个用 PHP 编写的应用程序，所以我编写了一个快速的 PHP 脚本，它在功能上与我的简单 mod_perl 测试处理程序相同，平均时间为 400 毫秒！

PHP代码是：

```
$cs = "//oracle.ourdomain.com:1521/XE";
$oc = oci_pconnect("hr","password",$cs);
if(!$oc) { print oci_error(); }
$stid = oci_parse($oc, 'SELECT id FROM zz_system_options WHERE id = 1');
oci_execute($stid);
$stmt = oci_parse($oc, "INSERT INTO zz_system_options (id,option_name) VALUES (zz_system_optionsids.nextval,'load testing')");
oci_execute($stmt);
echo "hello world"; 
```

Perl 代码是：

```
use strict;
use Apache2::RequestRec ();
use Apache2::RequestIO  ();
use Apache2::Const -compile => qw(:common);
use DBI;
our $dbh;
sub handler
{
    my $r = shift;

    # Connect to DB
    $dbh = DBI->connect( "DBI:Oracle:host=oracle.ourdoamin.com;port=1521;sid=XE", "hr", "password" ) unless $dbh;  
    my $dbi_query_object = $dbh->prepare("SELECT id FROM zz_system_options");
    $dbi_query_object->execute();
    $dbi_query_object =
      $dbh->prepare("INSERT INTO zz_system_options (id,option_name) VALUES (zz_system_optionsids.nextval,?)");
    $dbi_query_object->execute("load testing");
    # Print out some info about this...
    $r->content_type('text/plain');
    $r->print("Errors: $err\n");
    return Apache2::Const::OK;
} 
```

mod_perl 在 apache 配置中有一个用 PerlRequire 调用的 startup.pl 脚本，它加载所有“使用”的模块。如果一切正常，而且我没有理由认为它不是，那么每个请求都应该只运行“子处理程序”中的行——这意味着 Perl 和 PHP 应该做几乎相同的事情。

服务器详情：- 硬件节点是 Quad Core Xeon L5630 @ 2.13GHz with 24Gb RAM，Apache 虚拟机的操作系统是 Gentoo，Oracle 的操作系统是 Centos 5。

版本：操作系统均在最近两周内更新，Apache 版本 2.2.22，mod_perl 版本 2.0.4，DBI 版本 1.622，DBD::Oracle 版本 1.50，Oracle 即时客户端版本 10.2.0.3，Oracle 数据库 10g 快捷版版本 10.2.0.1 .0，PHP 版本 5.3

Apache MPM 配置为 ServerLimit 2000、MaxClients 2000 和 MaxRequestsPerChild 300

我检查的事情：在测试期间，唯一的负载来自测试应用程序/oracle，两个虚拟机都没有达到其任何 bean 计数器限制，例如内存，Oracle 始终显示每个 Apache 子节点 1 个会话，每次插入都已完成跑。

所以，我的问题是；我可以让 mod_perl 版本更快吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:39:47.487

如果您更改了 PHP 代码并且时间没有改变，那么显然您没有测量代码时间，是吗？

重要的问题是 - 为什么你反复连接 Perl 脚本而不是 PHP 脚本？

最后，这个测试可能不会告诉您任何有用的信息，除非您的所有查询都是简单的单表单行选择和插入。

# xamarin.ios - MonoTouch.Dialog 动态加载元素

> ID：12138642
> 
> 赞同：0
> 
> 时间：2012-08-27T08:35:53.177
> 
> 标签：xamarin.ios, monotouch.dialog, xamarin

当我需要动态加载元素时，推荐的方法是什么？

我的应用程序有一个特定的元素，它应该有一个披露附件，当单击/输入时，它应该转到一个新部分，其中包含我从 Web 服务检索的元素。

我应该添加一个 onclick 委托来加载和添加元素并导航到该部分，还是有其他更合适的方法？

# windows - 在 AutoHotKey 中绑定到 Ctrl-Shift

> ID：12138646
> 
> 赞同：3
> 
> 时间：2012-08-27T08:36:09.837
> 
> 标签：windows, autohotkey

我想使用 AutoHotKey 将命令绑定到`Ctrl`+ `Shift`，就像 Windows 检测到它以将文本方向从右到左更改为从左到右一样。那就是：我希望它在`Ctrl`+`Shift`被*放开*时被调用，并且只有在按下`Ctrl`+`Shift`和放开它们之间没有按下任何键。

我在 ^~ `Shift`Up 上绑定了一个热键，我希望它的行为与 Windows 绑定到它以更改文本方向时的行为相同。但是，我发现即使在我不希望调用它的情况下也会调用它。

例如，我可以通过按`Ctrl`和选择几个单词`Shift`，然后使用箭头键。然后我放开`Ctrl`Shift 并调用热键。我不想要这个。我想要一个热键，只有当我没有其他任何东西`Ctrl`和 Shift 时才会调用它。如果我使用任何其他键，我希望不调用热键。

有没有办法用 AHK 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:10:45.313

```
#InstallKeybdHook

Hotkey, ^LShift Up, ControlShiftUp
Return

ControlShiftUp:
    if (A_PriorKey != "LShift") ; [v1.1.01+]
        return
    ; do something
    msgbox hi
Return 
```

# c++ - 什么都不做的C++回调函数

> ID：12138647
> 
> 赞同：0
> 
> 时间：2012-08-27T08:36:14.780
> 
> 标签：c++, callback

我有这样的代码

```
typedef void(_stdcall * MyProcessor)(int, int);

void FunctionProcess (MyProcessor process){
    MyProcessor myCallback;
    myCallback = (process != NULL)? process:"<functionThatDoesNothing>";
    ...
} 
```

如果参数中没有任何回调函数，我想为 myCallback 分配一些函数，它什么都不做（或什么都做不了），因为之后，我在循环中调用这个函数（我会由于管道刷新，喜欢避免循环中的'if'）。我尝试了一个没有成功的[无操作 lambda](https://stackoverflow.com/questions/2982592/does-a-no-op-do-nothing-function-object-exist-in-c0x)（不兼容）。

有没有这样的功能？还有其他可能吗？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T08:47:18.760

你的逻辑太疯狂了！如果`if`预测正确，它将几乎是免费的。如果间接跳跃被错误地预测，那将是可怕的。An`if`比间接跳转更容易预测（只有两种可能，推测执行是可能的，大多数 CPU 上有更多预测槽）。因此，几乎没有可以想象的情况下这是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:46:33.050

用你想要的签名写一个空函数。

```
void __stdcall pass(int a, int b) 
{
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:48:24.327

```
typedef void(_stdcall * MyProcessor)(int,int);

void _stdcall noop(int,int) {}

void functionProcess (MyProcessor process){
    MyProcessor const myCallback = process?process:noop;
    myCallback(7,4);
} 
```

# python - 在生菜测试步骤中传入多个参数

> ID：12138650
> 
> 赞同：3
> 
> 时间：2012-08-27T08:36:19.553
> 
> 标签：python, testing, lettuce

通常每个生菜测试步骤都需要一个参数，有没有办法在一个步骤中传递多个参数？

像，我可以有这个：

```
@step('I have the number (\d+) and character (\w+)')
def have_the_number(step, number, character ):
    world.number = int(number)
    world.character = str(character) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:03:27.107

您的代码完全有效。您可以同时使用位置参数（如`*args`，就像在您的示例中一样）以及命名参数（如`**kwargs`）。

考虑您有以下内容`math.feature`：

```
Feature: Basic computations
    In order to play with Lettuce
    As beginners
    We will implement addition and subtraction

    Scenario: Sum of 0 and 1
        Given I have to add the numbers 0 and 1
        When I compute its factorial
        Then I see the number 1

    Scenario: Difference of 3 and 5
        Given I have to substract 5 from 3
        When I compute their difference
        Then I see the number -2 
```

等等`steps.py`：

```
from lettuce import *

@step('I have to add the numbers (\d+) and (\d+)')
def have_to_add(step, number1, number2):
    world.number1 = int(number1)
    world.number2 = int(number2)

@step('I have to substract (?P<subtrahend>) from (?P<minuend>)')
def have_to_substract(step, minuend, subtrahend):
    world.minuend = int(minuend)
    world.subtrahend = int(subtrahend)

@step('I compute their difference')
def compute_difference(step):
    world.number = world.minuend - world.subtrahend

@step('I compute their sum')
def compute_sum(step):
    world.number = world.number1 + world.number2

@step('I see the number (\d+)')
def check_number(step, expected):
    expected = int(expected)
    assert world.number == expected, "Got %d" % world.number 
```

仔细看看减法示例，它显示了如何通过名称而不是位置来引用捕获的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:51:46.080

是什么阻止你这样做？就像您的示例所示，您***可以在一个步骤中使用多个参数。***

我猜步骤名称只是被解析为正则表达式模式，匹配的组将作为参数在步骤处理程序中传递。

# configuration - 部署到cloudbees时如何检索appid？

> ID：12138653
> 
> 赞同：1
> 
> 时间：2012-08-27T08:36:25.387
> 
> 标签：configuration, cloudbees

在 Cloudbees wiki 中，[此页面](http://wiki.cloudbees.com/bin/view/RUN/CloudBeesWebXml)说明了如何使用 cloudbees-web.xml 为应用程序部署添加配置参数。

但是，内容是：

```
<appid>APP_ID</appid> 
```

也注入了？如何从我的应用程序代码中检索此值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:44:44.867

我的偏好是避免将应用程序编码为包含对其运行所在容器的显式引用。因此，我倾向于使用不会将您的代码与 CloudBees（又名我们）绑定的技术。

因此，我将使用配置上下文参数的容器特定描述符文件，然后您的应用程序只需读取上下文参数并直接使用该参数。

有两种技术可以做到这一点：

1.  [应用程序环境](http://wiki.cloudbees.com/bin/view/RUN/CloudBeesWebXml#HApplicationEnvironments)我个人喜欢这种方式......虽然如果你想将应用程序部署到你自己刚刚创建的测试环境中，你`cloudbees-web.xml`可能会错过所需的环境定义......所以最好使用更新的

2.  [配置参数](http://wiki.cloudbees.com/bin/view/RUN/Configuration+Parameters)，这样当您需要自己的测试实例时，您只需为该测试环境定义配置参数，然后将*完全相同的*工件部署到该实例......它还可以防止在生产环境打开的情况下部署到测试实例的问题上。

我确信 RUN@ 团队中的一个可能还有其他一些技巧，例如告诉您应用程序 ID 的系统属性......但请记住，在本地运行时，例如使用本地 jetty/tomcat/bees:run 容器然后你的代码会爆炸！

# python - 使用 python 的 NLTK 库来获取日期和它们所属的句子。

> ID：12138656
> 
> 赞同：0
> 
> 时间：2012-08-27T08:36:32.587
> 
> 标签：python, nltk, nlp

我在 NLTK 库中搜索了获取日期的方法，但我不知道哪种方法最适合获取日期和它们所属的句子。我知道我应该解析 DATE 名称实体，但我应该使用什么方法？

我只需要日期和它所属的句子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-06T17:02:45.920

自从发布这个问题以来，我发现 punkt sentence sentence tokenizer 对于隔离句子非常有用。然后我使用了一个简单的查找方法来查找以“18”、“19”或“20”开头的数字字符串。

谢谢大家的意见。

# java - 如何在 JGit 中合并？

> ID：12138659
> 
> 赞同：13
> 
> 时间：2012-08-27T08:36:45.480
> 
> 标签：java, git, jgit

如何在 JGit 中合并？

假设我想`master`与`foo`分支合并，我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T09:49:07.657

要合并，您可以`MergeCommand`在`CheckoutCommand`. 给大家举个例子，因为Jgit确实缺少例子：

```
Git git = ... // you get it through a CloneCommand, InitCommand 
              // or through the file system

CheckoutCommand coCmd = git.checkout(); 
// Commands are part of the api module, which include git-like calls
coCmd.setName("master");
coCmd.setCreateBranch(false); // probably not needed, just to make sure
coCmd.call(); // switch to "master" branch

MergeCommand mgCmd = git.merge();
mgCmd.include("foo"); // "foo" is considered as a Ref to a branch
MergeResult res = mgCmd.call(); // actually do the merge

if (res.getMergeStatus().equals(MergeResult.MergeStatus.CONFLICTING)){
   System.out.println(res.getConflicts().toString());
   // inform the user he has to handle the conflicts
} 
```

我没有尝试代码，所以它可能并不完美，但这只是为了提供一个开始。而且我没有包括进口。使用 JGit 开发意味着基于[javadoc的大量尝试](http://jgit.info/javadoc/index.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T09:44:18.617

您将在[JGit 存储库](https://github.com/eclipse/jgit/)中找到 Merge 的各种[测试类](https://github.com/eclipse/jgit/tree/master/org.eclipse.jgit.test/tst/org/eclipse/jgit/merge)，例如[`SimpleMergeTest`](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit.test/tst/org/eclipse/jgit/merge/SimpleMergeTest.java)

```
Merger ourMerger = MergeStrategy.OURS.newMerger(db);
boolean merge = ourMerger.merge(new ObjectId[] { db.resolve("a"), db.resolve("c") });
assertTrue(merge); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T08:40:58.000

自 2010 年以来，JGit 拥有 git resolve 合并策略的完整 Java 实现。如果您需要示例，请查看相应的 JGit 测试用例并查看 EGit 如何使用 MergeCommand，请查看 class `org.eclipse.egit.core.op.MergeOperation`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-08T03:36:24.853

传递 ObjectId 对我来说很方便，例如

```
void merge(String uri,File file){
    try(Git git = Git.cloneRepository()
                     .setURI(uri)
                     .setBranch("master")
                     .setDirectory(file)
                     .call()){
        ObjectId objectId = git.getRepository().resolve("origin/develop");
        MergeResult mergeResult = git.merge().include(objectId).call();
        log.debug(mergeResult.getMergeStatus());
    } catch (GitAPIException | IOException e) {
        log.error("error",e);
    }
} 
```

此外，您可以在此处找到更多示例：[https ://github.com/centic9/jgit-cookbook](https://github.com/centic9/jgit-cookbook)

# google-maps - 在 Qt 中显示网页的替代方法

> ID：12138661
> 
> 赞同：1
> 
> 时间：2012-08-27T08:36:55.100
> 
> 标签：google-maps, qwebview, qwebkit

当我访问[这个网页](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple)时，这是一个来自谷歌地图的简单地图，例如 Chrome 或 Firefox，一切都很自然。可以双击放大，可以拖动地图，也可以拖动街景模式图标。

但是当这个网页用下面的代码加载到一个 QWebView 对象中时，我没有鼠标拖动能力。例如，我不能拖动地图来改变它。

```
QWebView view;
view.setUrl(QUrl("https://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple"));
view.show(); 
```

到目前为止，我找不到任何解决方案。有没有其他方法可以在 Qt 小部件中显示网页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-02T13:09:35.213

QtWebkit 有点像 Buggy，使用了非常旧版本的渲染引擎。只能与早期版本的 chrome 或 safari 进行比较。如果您只是打算在应用程序中提供一个简单的网页预览，您可以使用 QWebEngine。

它会给你更好的渲染（参考这个链接）

[http://qt-project.org/wiki/QtWebEngineHowToTry](http://qt-project.org/wiki/QtWebEngineHowToTry)

该项目仍在开发中。并且仍然缺少许多功能，例如 js 注入等。

知道这个事实网页渲染在 Qt 中是一团糟。

（如果不适合你可以完全放弃 Qt 并尝试 Mozilla XUL，它有一个非常好的网页布局引擎“Gecko”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T02:31:14.970

Qt 中已经有一个提供此功能的示例浏览器：

> [QTDIR]\演示\浏览器

我不确定这已经包含了多长时间，但肯定是在 4.8 中。它实现了一个相当完整的浏览器，但您感兴趣的代码在文件 webview.cpp 中。这个封装了QWebView，演示了如何实现鼠标事件、点击、下载等。

# java - 这个 Lucene 查询有什么问题？

> ID：12138665
> 
> 赞同：0
> 
> 时间：2012-08-27T08:36:58.890
> 
> 标签：java, json, servlets, lucene

我的 Lucene 查询有什么问题？我不明白为什么会出错。

[27/08/12 10:28:38:447 CEST] 错误 lucene.LuceneUtils：尝试在当前索引中搜索结果时发生错误。org.apache.lucene.queryParser.ParseException：无法解析'+结构名称：bijzonderedag​​en +（conhost：64d17170-c24b-4812-a788-78283d989a64 conhost：system_host）+bijzonderedag​​en.vestigingnaam：*阿姆斯特丹*+bijzonderedag​​en.iskoopzondag：*ja* +languageid：3 +deleted:false +working:true date1:[01/01/2003 TO 01/01/2012] +working:true +((permissions:p654b0931-1027-41f7-ad4d-173115ed8ec1.1p*))': 遇到" “01/01/2012”在第 1 行第 245 列。期待：“]”...

```
at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:187)
at com.dotmarketing.util.lucene.LuceneUtils.prepareQuery(LuceneUtils.java:1195)
at com.dotmarketing.util.lucene.LuceneUtils.searchInCurrentIndex(LuceneUtils.java:507)
at com.dotmarketing.portlets.contentlet.business.ContentletFactoryDBImpl.indexSearch(ContentletFactoryDBImpl.java:388)
at com.dotmarketing.portlets.contentlet.business.ContentletAPIImpl.searchIndex(ContentletAPIImpl.java:548)
at com.dotmarketing.portlets.contentlet.business.ContentletAPIImpl.search(ContentletAPIImpl.java:453)
at com.dotmarketing.portlets.contentlet.business.ContentletAPIImpl.search(ContentletAPIImpl.java:445)
at com.dotmarketing.portlets.contentlet.business.ContentletAPIInterceptor.search(ContentletAPIInterceptor.java:1491)
at com.dotmarketing.servlets.JSONContentServlet.service(JSONContentServlet.java:172)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at com.dotmarketing.filters.CMSFilter.doFilter(CMSFilter.java:484)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at com.dotmarketing.filters.AutoLoginFilter.doFilter(AutoLoginFilter.java:61)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at com.dotmarketing.cms.urlmap.filters.URLMapFilter.doFilter(URLMapFilter.java:313)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at com.dotmarketing.filters.CharsetEncodingFilter.doFilter(CharsetEncodingFilter.java:140)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:465)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:555)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:769)
at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:698)
at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:891)
at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
at java.lang.Thread.run(Thread.java:662) 
```

原因：org.apache.lucene.queryParser.ParseException：在第 1 行第 245 列遇到“”“01/01/2012”。期待：“]”...

```
at org.apache.lucene.queryParser.QueryParser.generateParseException(QueryParser.java:1759)
at org.apache.lucene.queryParser.QueryParser.jj_consume_token(QueryParser.java:1641)
at org.apache.lucene.queryParser.QueryParser.Term(QueryParser.java:1399)
at org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java:1250)
at org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:1207)
at org.apache.lucene.queryParser.QueryParser.TopLevelQuery(QueryParser.java:1167)
at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:182)
... 41 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:50:24.787

您必须对日期使用 ISO 格式，例如`[2003-01-01 TO 2012-01-01]`.

看看[这个页面](http://mike.hostetlerhome.com/2009/09/25/formatting-date-in-lucene-queries/)。也可能与这个[SO question 有关](https://stackoverflow.com/questions/1644500/searching-on-date-ranges-with-lucene-in-java)。

# qt - 在 C++ / Qt Visual Studio 中加载资源文件

> ID：12138668
> 
> 赞同：0
> 
> 时间：2012-08-27T08:37:05.570
> 
> 标签：qt, visual-studio-2008

我正在尝试使用以下代码加载资源文件：

```
QResource::registerResource("myResources.rcc"); 
```

问题是它没有加载资源，因为它说“找不到文件”。当我手动启动可执行文件时，资源文件会正确加载，但是当我通过 Visual Studio 启动它时，它会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:37:05.570

![在此处输入图像描述](../Images/c44bca74932afe061d880e56f68272fa.png)

那个工作主任是空的..

# xsd - 如何在 XML 模式中以步长定义任何元素

> ID：12138671
> 
> 赞同：1
> 
> 时间：2012-08-27T08:37:09.567
> 
> 标签：xsd

如果我想在 XML 模式中定义任何元素，例如在步骤 360 中的最小值为 0，最大值为 91800，则意味着可能的组合为 0,360,720 等等，而不使用枚举模式

我怎么能定义这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:28:32.207

我想不出任何方法来做到这一点——你不能在验证规则中做算术。

你坚持使用枚举（在你的情况下似乎是可能的——如果我没记错的话，它是 256 个可能的值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T18:25:44.357

由于有限状态自动机可以识别可被 360 整除的数字集，因此原则上可以使用极其复杂的正则表达式来做到这一点，但是对于您所想到的范围，枚举实际上会更容易理解（并正确书写）。

所以在 XSD 1.0 中，使用枚举是定义所需类型的唯一方法并不完全正确，但它确实是迄今为止最简单和最好的方法。

在 XSD 1.1 中，您可以使用 XPath 2.0 中表达的断言来捕获算术关系：

```
<xs:simpleType name="small-multiples-of-three-sixty">
  <xs:restriction base="xs:integer">
    <xs:minInclusive value="0"/>
    <xs:maxInclusive value="91800"/>
    <xs:assertion test="$value mod 360 eq 0"/>
  </xs:restriction>
</xs:simpleType> 
```

# mysql - Rails：处理大集合

> ID：12138674
> 
> 赞同：0
> 
> 时间：2012-08-27T08:37:24.193
> 
> 标签：mysql, ruby-on-rails

我已将联系人分组为具有关联订阅的集合。这些订阅经常被创建和删除......

每个联系人集合可以包含大约 30.000 - 50.000 个对象。

在为 30.000 个联系人创建订阅时，我会遍历联系人集合并填充一个 sql 值数组。之后，我手动执行一个包含所有这些值的 sql insert 语句：

```
sql_values = []
contacts.each do |contact|
  sql_values << ["(#{contact.id}, #{newsletter.id}, #{contact_group_id})"]
end
if sql_values.any?
  ActiveRecord::Base.connection.execute(
    "INSERT INTO subscriptions (contact_id, newsletter_id, contact_group_id) VALUES #{sql_values.join(", ")}"
  )
  sql_values = nil
end 
```

SQL 插入只需要一秒钟左右，没关系。在我的开发机器（8GB RAM）上选择联系人大约需要 15 秒。生产机器只有 1GB 内存...

你有什么方法来减少这个时间？

编辑：我的问题是acts_as_taggable，它将联系人与标签表连接起来。任何人都知道一个很好的解决方案来处理带有对象标签的大集合？

谢谢！

# c# - c# 从 db/live update 获取新数据

> ID：12138675
> 
> 赞同：-1
> 
> 时间：2012-08-27T08:37:30.003
> 
> 标签：c#, java, ajax, database, partial-page-refresh

这是 webapp/ 它必须从数据库中检索所有“新”数据。ex> 在 DB/ 中添加了新数据，因此此 WebApp 必须立即显示此数据而无需刷新所有页面/这是一种实时更新！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:42:50.783

由于 Web App 只能从服务器请求数据并获得响应。您可以使用 javascript setInterval() 方法每隔几秒使用 ajax 请求您的数据库。如果 db 中有新数据，则您会响应 ajax 请求获得该数据，并将该数据附加到您的 DOM 中。例如。

```
 setInterval(function(){
    $.ajax(
          // your request code.
         success: function(){
              if(data){//append DOM}
             }
            )
 } 
```

# mysql - 将 MySQL 文件保存为“每个项目”？

> ID：12138678
> 
> 赞同：0
> 
> 时间：2012-08-27T08:37:34.573
> 
> 标签：mysql, svn

目前我在两个地方工作——工作和家里。我在保持最新状态时遇到了问题。通过文件我解决了我的问题（我使用私有 SVN 并从 phpStorm 提交），但我仍然不知道 MySQL。目前，我只是在外出时导出表，但这并不是一个好方法（我知道自己，迟早我会忘记这样做）。

我的问题是：我可以在每个项目的基础上存储 MySQL 数据文件，这样我就可以将它与其他文件一起提交到 SVN 中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:43:48.053

您可以使用转储数据库的提交后挂钩，以及更新插入转储之前的挂钩。

# oracle - 删除列值可能为空的重复记录

> ID：12138680
> 
> 赞同：0
> 
> 时间：2012-08-27T08:37:38.670
> 
> 标签：oracle, oracle11g

我有允许有两列（CAGE，HCC）空值的表。我想在我的程序中显示重复的记录，我是这样写的。

```
 FOR REC IN (SELECT LOCATION, NIIN, INVL_DATE, CAGE, 
          HCC,SUM(CA_QTY) AS SUM_CA,SUM(COST_QTY) AS  SUM_COST,COUNT(*) FROM INVENTORY 
          GROUP BY LOCATION, NIIN, INVL_DATE,
          CAGE, HCC 
          HAVING COUNT(*)>1)
 LOOP  
  VAR_LOC_NAME    :=  REC.LOCATION;
  VAR_NIIN        :=  REC.NIIN;
  VAR_DATE        :=  REC.INVL_DATE;
  VAR_CAGE        :=  REC.CAGE; 
  VAR_HCC         :=  REC.HCC;
  VAR_CA_QTY      :=  REC.SUM_CA;
  VAR_COST_QTY    :=  REC.SUM_COST;

 FOR REC1 IN (SELECT SNO FROM INVENTORY WHERE LOCATION=VAR_LOC_NAME AND  
                NIIN=VAR_NIIN AND TUNC(INVL_DATE)=TRUNC(TO_DATE(VAR_DATE,'DD-MM-YY'))  AND
                CAGE=VAR_CAGE AND HCC=VAR_HCC)
    LOOP
        DBMS_OUTPUT.PUT_LINE('GET NUMBER '||REC1.SNO);
    END LOOP;
   end loop; 
```

但对于 CAGE 和 HCC 的空值，它不起作用。仅供参考：我正在使用 oracle 11g

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:46:11.753

您需要找到一些未在`CAGE`and列中使用的值，并使用 Oracle 的函数`HCC`将 NULL 值替换为该唯一值。`NVL`所以：

```
 FOR REC IN (SELECT LOCATION, NIIN, INVL_DATE, NVL(CAGE,-1) as CAGE, 
          NVL(HCC,-1) as HCC,SUM(CA_QTY) AS SUM_CA,SUM(COST_QTY) AS  SUM_COST,COUNT(*) FROM INVENTORY 
          GROUP BY LOCATION, NIIN, INVL_DATE,
          NVL(CAGE,-1), NVL(HCC,-1) 
          HAVING COUNT(*)>1) 
```

当然`-1`这里只是一个示例。

至于第二个循环：

```
FOR REC1 IN (SELECT SNO FROM INVENTORY WHERE LOCATION=VAR_LOC_NAME AND  
            NIIN=VAR_NIIN AND TUNC(INVL_DATE)=TRUNC(TO_DATE(VAR_DATE,'DD-MM-YY'))  AND
            NVL(CAGE,-1)=VAR_CAGE AND NVL(HCC,-1)=VAR_HCC) 
```

在打印输出上，您可以`-1`用`NULL`.

# php - 这个语法是什么意思？$node->{选项}

> ID：12138681
> 
> 赞同：0
> 
> 时间：2012-08-27T08:37:40.467
> 
> 标签：php, syntax

我是一家公司的新实习生，当我看到这个符号时，我正在查看某人的代码：

```
if($o_eventNode->{$calOption}[0]['value'] == 1) 
```

我不明白带大括号的部分。有没有其他的打字方式？该语法的优点是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T08:39:21.420

使用该语法，您可以在不知道它们各自名称的情况下动态调用类的方法和变量（另请参阅文档中的[变量变量名称](http://php.net/manual/en/language.variables.variable.php)）。

/edit：用更复杂的示例更新了答案，我希望这更容易理解。修复了原始代码，这个应该确实可以工作。

* * *

例子：

```
<?php
    class Router {
        // respond
        //
        // just a simple method that checks wether
        // we got a method for $route and if so calls
        // it while forwarding $options to it
        public function respond ($route, $options) {
            // check if a method exists for this route
            if (method_exists($this, 'route_'.$route) {
                // call the method, without knowing which
                // route is currently requested
                print $this->{'route_'.$route}($options);
            } else {
                print '404, page not found :(';
            }
        }

        // route_index
        //
        // a demo method for the "index" route
        // expecting an array of options.
        // options['name'] is required
        public function route_index ($options) {
            return 'Welcome home, '.$options['name'].'!';
        }
    }
    // now create and call the router
    $router = new Router();
    $router->respond('foo'); 
    // -> 404, because $router->route_foo() does not exist
    $router->respond('index', array('name'=>'Klaus'));
    // -> 'Welcome home Klaus!'
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:40:28.613

变量的内容`$calOption`将用作来自 的类成员的名称`$o_eventNode`。大括号在那里，以清楚地标记变量的结尾，因此很明显不是`$calOption[0]['value']`意味着。

请参阅：[http](http://php.net/language.variables.variable.php) ://php.net/language.variables.variable.php以了解在将变量变量与数组一起使用时这种歧义问题的解释。

# spring-security - 从 3.0.2 升级到 3.1.2 后，Web App 无法启动

> ID：12138683
> 
> 赞同：0
> 
> 时间：2012-08-27T08:37:56.317
> 
> 标签：spring-security

我有一个使用自定义身份验证器的工作 3.0.2 applicationContext-security.xml

```
<global-method-security pre-post-annotations="disabled">

</global-method-security>

<http use-expressions="true">

    <intercept-url pattern="/diagnostics/**" access="hasRole('ROLE_USER')" />

    <form-login login-page="/genesis" default-target-url="/diagnostics/start-diagnostics"
      authentication-failure-url="/genesis?authfailed=true"
      authentication-success-handler-ref="customTargetUrlResolver"/>
      <access-denied-handler error-page="/genesis?notauthorized=true"/>

     <logout logout-success-url="/genesis"/> 
    <session-management session-authentication-error-url="/genesis"> 
        <concurrency-control max-sessions="1" expired-url="/genesis?sessionExpired=true"/> 
    </session-management>
</http>

<authentication-manager>
<authentication-provider ref="genesisAuthenticator">
    <jdbc-user-service data-source-ref="dataSource"/>
</authentication-provider>
</authentication-manager>

<beans:bean id="genesisAuthenticator" class="com.blackbox.x.web.security.Authenticator"/>
<beans:bean id="customTargetUrlResolver" class="com.blackbox.x.web.security.StartPageRouter"/>   

</beans:beans> 
```

升级到 3.1.2 后，我的应用程序将无法启动并收到错误消息

“配置问题：与 'ref' 属性一起使用时，身份验证提供者元素不能有子元素”。我假设问题出在

```
<jdbc-user-service data-source-ref="dataSource"/> 
```

data-source-ref 指向我的 application-context.xml 文件中的定义的元素。

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
<property name="driverClassName" value="com.mysql.jdbc.Driver"/>
<property name="url" value="jdbc:mysql://localhost:3306/genesis"/>
<property name="username" value="dbuser"/>
<property name="password" value="********"/> 
```

我需要做什么才能让这个工作。退回到 3.0.2 并不是一个真正的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:30:36.003

如果您使用自定义 AuthenticationProvider 实现，则必须以“传统” Spring 方式在 XML 中配置它，因为它只`<security:authentication-provider ref="yourImpl">`指向可以以*任何方式验证**任何内容*的 bean ，并且根本不必使用。在您的示例中，您尝试使用这只是创建bean 的快捷方式。*`UserDetailsService``jdbc-user-service``JdbcDaoImpl`*

 *所以你要做的是确保所有`genesisAuthenticator`的依赖都由你自己解决，而不是 Spring Security。也就是说，您应该`@Autowired setUserDetailsService(UserDetailsService userDetailsService)`向 bean 添加方法或像这样在 XML 中配置它（使用[`id`](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-jdbc-user-service)属性）：

```
<beans:bean id="genesisAuthenticator"
    class="com.blackbox.x.web.security.Authenticator">
  <property name="userDetailsService" ref="jdbcUserService"/>      
</beans:bean>

<jdbc-user-service id="jdbcUserService" data-source-ref="dataSource" /> 
```*

# java - 如何添加 selenium 测试用例以测试下载的 Excel 和 csv 文件中的数据

> ID：12138684
> 
> 赞同：1
> 
> 时间：2012-08-27T08:37:58.237
> 
> 标签：java, selenium

我为数据网格提供了 excel 和 csv 下载链接。如何使用 selenium 测试测试这些 excel 和 csv 文件数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:50:28.913

充其量您可以检查href 是否指向正确的文件，即它们具有正确的路径。并假设它们在单击时被下载。:)

或者您可以按照[这样](http://blog.codecentric.de/en/2010/07/file-downloads-with-selenium-mission-impossible/)的方式进行操作。

或者[这个](http://qtp-help.blogspot.in/2009/07/selenium-handle-dialogs.html)。

# html - 当其他元素消失时，div元素占据所有宽度

> ID：12138687
> 
> 赞同：0
> 
> 时间：2012-08-27T08:38:26.077
> 
> 标签：html, css

我创建了两个 DIV 元素。这**两个 DIV 元素**将仅在一个页面中，而在所有其他页面中将只有**一个 DIV 元素**。当第二个元素消失时，第一个元素自动占据所有宽度。抱歉，我还不能添加图片，但我会尝试创建一个示例：

> [div 元素“一”] 宽度：50% [div 元素“二”] 宽度：50%

*div 元素“二”消失

> [div 元素“一个”] 宽度 100%

我怎么会这样？使用简单的 CSS/HTML，我无法达到图像中的结果。* 我不能改变 DIV 元素的类

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T08:41:59.753

您可以根据父容器类设置 div 样式：

第 1 页：

```
<body class="twocolumn">
  <div id="div1">foo</div>
  <div id="div2">bar</div>
</body> 
```

第2页：

```
<body class="singlecolumn">
  <div id="div1">foo</div>
</body> 
```

css 文件：

```
.twocolumn #div1 { width: 50%; }
.singlecolumn #div1 { width: 100%; }
#div2 {width: 50%; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:45:01.543

像这样写：

**HTML**

```
<div class="two">two</div>
<div class="one">one</div> 
```

**CSS**

```
.two{
    background:red;
    float:right;
    width:50%;
}
.one{
    background:green;
    overflow:hidden;
} 
```

检查这个[http://jsfiddle.net/gJ22P/](http://jsfiddle.net/gJ22P/)

**或者**

您可以为此使用**display:table**属性。

检查这个[http://jsfiddle.net/gJ22P/1/](http://jsfiddle.net/gJ22P/1/)

它的工作直到 IE8 及更高版本。

# python - 找不到 Pygame blit 'dest' 参数

> ID：12138691
> 
> 赞同：0
> 
> 时间：2012-08-27T08:38:31.810
> 
> 标签：python, pygame

我正在尝试使用这条线将文本粘贴到我的表面上：

```
surface.blit(myFont.render(text, 1, text_color),(200,200)) 
```

但我得到一个错误：TypeError：找不到所需的参数'dest'（pos 2）

我似乎无法弄清楚为什么会这样......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T15:52:51.213

您没有将正确的 rect 作为 surface.blit() 函数的第二个参数。它必须是一个矩形。我建议如下：

```
text=myFont.render(text, 1, text_color)
rect=text.get_rect()
rect.topleft=(200, 200)
surface.blit(text, rect) 
```

要在一行代码中完成所有操作，可能会有点复杂：

```
surface.blit(myFont.render(text, 1, text_color), pygame.Rect(200, 200, myFont.render(text, 1, text_color).get_rect().width, myFont.render(text, 1, text_color).get_rect().height) 
```

如果您希望它位于中心的 200、200，那么简单的多行代码将如下所示：

```
text=myFont.render(text, 1, text_color)
rect=text.get_rect()
rect.centerx=200
rect.centery=200
surface.blit(text, rect) 
```

为了在一行中完成，它会变得非常长：

```
surface.blit(myFont.render(text, 1, text_color), pygame.Rect(200-myFont.render(text, 1, text_color).get_rect().width/2, 200-myFont.render(text, 1, text_color).get_rect().height/2, myFont.render(text, 1, text_color).get_rect().width, myFont.render(text, 1, text_color).get_rect().height) 
```

正如您所看到的，在五行代码中完成它会比您尝试做的一行代码要容易得多，而且它可能也会更快。基本上你必须为一行做的是渲染文本并为矩形的每个参数获取它的矩形以避免错误。这将需要很长时间，特别是如果您将其放入循环中。如果你正在加载，它可能没问题，但我仍然会推荐多行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:26:07.140

我发现了错误...

我试图将 myFont 的大小设置为浮点类型。它似乎不喜欢那样！:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-27T08:44:06.920

`Surface.blit(source, dest, area=None, special_flags = 0): return Rect`

您没有将要绘制的表面设置为参数。
阅读有关[Surface.blit](http://www.pygame.org/docs/ref/surface.html#Surface.blit)的文档以获取更多信息

# php - .htaccess 将 .php 重写为“虚拟文件夹”

> ID：12138697
> 
> 赞同：0
> 
> 时间：2012-08-27T08:38:59.543
> 
> 标签：php, .htaccess, rewrite

> **可能重复：**
> [使用 .htaccess 删除 .php 扩展名](https://stackoverflow.com/questions/4026021/remove-php-extension-with-htaccess)

我有

```
http://www.example.com/test/categoryform.php 
```

在我的 .htaccess 文件中，如何重写它以显示为：

```
http://www.example.com/test/categoryform/ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T08:43:17.460

试试这个代码

```
RewriteEngine On
# turn on the mod_rewrite engine

RewriteCond %{REQUEST_FILENAME}.php -f
# IF the request filename with .php extension is a file which exists
RewriteCond %{REQUEST_URI} !/$
# AND the request is not for a directory
RewriteRule (.*) $1\.php [L]
# redirect to the php script with the requested filename 
```

以及[如何在 .htaccess](https://stackoverflow.com/questions/8371634/hide-php-extension-htaccess)问题中隐藏 .php 扩展名也很有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:45:03.083

简单的问题问了[一千](https://stackoverflow.com/questions/8371634/hide-php-extension-htaccess)次

```
RewriteEngine on
RewriteBase /test/
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

来源：[通过 .htaccess 删除文件扩展名](http://eisabainyo.net/weblog/2007/08/19/removing-file-extension-via-htaccess/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T08:50:05.237

为了删除尾部斜杠，您需要在条件中匹配它

```
RewriteEngine On
# make sure it's not a directory or a file
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# match out the request URI without the trailing slash
RewriteCond %{REQUEST_URI} ^/([^/]+?)/?$
# and see if it exists
RewriteCond %{DOCUMENT_ROOT}/%1.php -f

RewriteRule ^(.+?)/?$ /$1.php [L] 
```

但是为了让它显示（例如，它显示在浏览器的地址栏中，您需要：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /(.+?)\.php
RewriteRule ^(.+?)\.php$ /$1/ [L,R=301] 
```

# nhibernate - 使用数据库视图时如何在 NHibernate 中使用存储过程进行创建/更新

> ID：12138700
> 
> 赞同：1
> 
> 时间：2012-08-27T08:39:04.867
> 
> 标签：nhibernate, nhibernate-mapping

我在表**Cycle上有一个 SQL Server 视图****CyclesList**。**Cycle**表包含一些列，**CyclesList**视图添加了更多可以在数据库级别计算的数据。

 ******现在，我有一个指向**CyclesList**的 NHibernate 映射：

```
<class name="Cycle" table="CyclesList"> 
```

但是，我仍然想使用**Cycle**类，并执行 Create/Update 操作，但我必须使用将直接访问**Cycle**表的存储过程。有没有办法在 NHibernate 中实现它？我会应用示例映射/链接到带有示例的资源。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:46:09.117

[您可以在“Native-Sql -> Custom SQL for create, update and delete”](http://nhforge.org/doc/nh/en/index.html#querysql-cud)下的文档中找到一些信息。基本上，您需要映射文件中的“sql-insert”、“sql-delete”和“sql-update”元素。

[Ayendes 博客上](http://ayende.com/blog/1692/using-nhibernate-with-stored-procedures)也有一个例子。******

# javascript - 在没有用户代理嗅探的情况下使用 Javascript 检测没有本机鼠标支持的浏览器？

> ID：12138713
> 
> 赞同：0
> 
> 时间：2012-08-27T08:40:10.563
> 
> 标签：javascript, internet-explorer, windows-phone-7, browser-feature-detection

我正在为桌面和移动浏览器编写游戏，其中涉及通过将对象拖动到目标来选择对象。

仅当使用用户的浏览器无法拖动时，才允许用户通过单击来选择对象。

在 Windows Phone 上，所有屏幕触摸都由浏览器处理以执行滚动或转换为模拟点击事件。但由于 Windows Phone 中没有鼠标，用户根本无法使用 Windows Phone 浏览器拖动任何对象。

除了检测 Windows Phone 用户代理之外，还有其他方法可以检测到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:53:06.820

您可以进行特征检测：

```
document.implementation.hasFeature("MouseEvents", "2.0");

document.implementation.hasFeature("MouseEvent", "3.0"); 
```

两者都返回布尔值。
* 注意世代的差异；“鼠标事件”VS。“鼠标事件”

# batch-file - 依赖头文件在其他目录发生变化时编译链接

> ID：12138714
> 
> 赞同：0
> 
> 时间：2012-08-27T08:40:11.683
> 
> 标签：batch-file, makefile, project-management, dos

我有 3 个关于以***更少的***步骤编译和链接我的项目的问题......

首先，我的项目看起来像：（我使用 Watcom C 编译//链接我的项目）

目录“MyProject”包含 3 个用于不同模块和一些文件的子目录：

*   目录“A”（包括 ah 和 ac）
*   目录“B”（包括 bh 和 bc）
*   目录“C”（包括 ch 和 cc）
*   my.c 和 my.h
*   我的.lnk
*   生成文件

在每个子目录中都有一个对应的makefile ...

**[Q1]**假设我在目录 A 中更新 ah 并且 ah 被目录 B 中的 bc 引用，那么我的原始步骤将是：

1.  在目录 A 中编译（生成 obj 和 lib...）
2.  在目录 B 中编译（ obj 和 lib 生成...）
3.  返回目录 MyProject 然后编译并链接

我可以迈出一步来覆盖上面吗？

**[Q2]**如果我想忽略所有现有的 obj/lib 并***全部重建***，该怎么做？

*   我知道这需要时间，但有时“杀戮和重建”会更好......

**[Q3]**如果 my.h 被更新并且它被 ac、bc 和 cc 引用。

我可以迈出一步来覆盖上面吗？

***[我在子目录**中的 makefile看起来像]*

```
INCLUDE1 = -ic:\watcom\h
OBJECTS1 = a.obj
CFLAGS   = -zq -mf -oxsbl $(INCLUDE1)
DEST     = a.exe
COMPILER = wpp386

.erase # special cmd, tell wmake to "erase" target if make is not successful
.cpp.obj: .AUTODEPEND
      $(COMPILER) $(CFLAGS) $<

$(DEST) : $(OBJECTS1) makefile 
```

***[我在主**目录中的 makefile看起来像]*

```
INCLUDE1 = -i=c:\myproj\my -i=c:\watcom\h 
OBJECTS1 = my.obj
CFLAGS   = -zq -fp6 -mf -6r -s -oxsbl $(INCLUDE1)
DEST     = my.exe
COMPILER = wpp386
LINKER   = wlink
LNK_FILE = my.lnk

.erase # special cmd, tell wmake to "erase" target if make is not successful

.cpp.obj: .AUTODEPEND
      $(COMPILER) $(CFLAGS) $<

$(DEST) : $(OBJECTS1) makefile my.lnk
      $(LINKER) @$(LNK_FILE) 
```

***[更新 1]***

我使用 wpp386 作为编译器，它是 watcom c++ 工具。

为了构建目标，我使用一个批处理文件来编译 cpp 文件：

```
@echo off
del a1.lib
del *.err
wmake -h
wlib -q a1.lib + a.obj

del *.obj 
```

*   我可以成功编译cpp文件，一切都很好。
*   在目录B，我用同样的方式（批处理文件+makefile）编译b.cpp

总结一下我的项目工作以及*我问的原因*是如果我只是更新一些头文件来找到“更快的编译/链接序列”......

我尝试将命令添加`ehco hello`到规则中`$(DEST)`，发现没问题。然后使用`echo $(MAKE)`并得到：

```
...
echo C:\WATCOM\BINW\WMAKE.EXE
C:\WATCOM\BINW\WMAKE.EXE
... 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T03:42:09.103

我不熟悉你的编译器，所以我看不出这些 makefile 是如何工作的，所以我们必须一步一步来。

1）当您进入子目录时`A`，您使用什么命令来构建目标？它有效吗？在子目录中怎么样`B`？

2）在主makefile中，你可以添加一个命令，比如`echo hello`规则`$(DEST)`吗？如果可行，请尝试`echo $(MAKE)`.

**编辑：**

非 GNU 版本的 Make 很麻烦，但我们会看看我们能做什么。

尝试在 subdir A 中编辑 makefile：

```
INCLUDE1 = -ic:\watcom\h
OBJECTS1 = a.obj
CFLAGS   = -zq -mf -oxsbl $(INCLUDE1)
DEST     = a1.lib # NOTE THIS CHANGE
COMPILER = wpp386

.erase # special cmd, tell wmake to "erase" target if make is not successful
.cpp.obj: .AUTODEPEND
      $(COMPILER) $(CFLAGS) $<

$(DEST) : $(OBJECTS1) makefile
      wlib -q $@ + $(OBJECTS1)
      del $(OBJECTS1) 
```

而不是批处理文件，只需运行`make -h`. 这应该重建库（如果库需要重建）。如果可行，请尝试向上移动`MyProject`并运行`make -h -C A`. 这应该在其中执行 makefile`A`并在那里重建库（除非`WMAKE`有其他语法）。

如果可行*，*请尝试在 中进行相同的更改，然后在主 makefile 中`B`编辑规则：`$(DEST)`

```
$(DEST) : $(OBJECTS1) makefile my.lnk
    $(MAKE) -h -C A
    $(MAKE) -h -C B
    $(LINKER) @$(LNK_FILE) 
```

交叉你的手指和运行`make -h`。这应该重建两个库、编译、链接和解决**Q1** ...

# c++ - 使用 GLM 正确旋转 Open GL 相机

> ID：12138721
> 
> 赞同：6
> 
> 时间：2012-08-27T08:40:43.927
> 
> 标签：c++, opengl, matrix, camera, glm-math

我有一个相机类，它的初始化如下：

```
CameraFP::CameraFP()  {
    this->aspect_ratio = 800.0f / 600.0f;
    this->fov = 45.0f;
    this->near_plane = 0.1f;
    this->far_plane = 1000.0f;
    this->position = glm::vec3(0, 0, 0);
    this->target = position + glm::vec3(0, 0, -1);
    this->up = glm::vec3(0, 1, 0);
    this->m_rotation = glm::mat4(1.0);

    m_view = glm::lookAt(position, target, up);
    m_projection = glm::perspective(fov, aspect_ratio, near_plane, far_plane);
} 
```

以下是其他导入功能：

```
void CameraFP::update(sf::Window *app)  {
    process_keyboard(app);
    process_mouse(app);

    calculate_view();
}

void CameraFP::process_keyboard(sf::Window *app)  {
    const sf::Input *input = &app->GetInput();

    up = m_rotation * glm::vec3(0, 1, 0);

    glm::vec3 forward = glm::vec3(0, 0, -1);
    glm::vec3 forward_rotated = m_rotation * forward;

    glm::vec3 right = glm::vec3(1, 0, 0);
    glm::vec3 right_rotated = m_rotation * right;

    if (input->IsKeyDown(sf::Key::W))  {
        position += forward_rotated;
    }
    if (input->IsKeyDown(sf::Key::S))  {
        position -= forward_rotated;
    }
    if (input->IsKeyDown(sf::Key::A))  {
        position -= right_rotated;
    }
    if (input->IsKeyDown(sf::Key::D))  {
        position += right_rotated;
    }
}

void CameraFP::process_mouse(sf::Window *app)  {
    // TODO: Make the below constants, and take framerate into account
    GLfloat SPEED_X = 0.000001f;
    GLfloat SPEED_Y = 0.000001f;

    GLfloat mouse_x = app->GetInput().GetMouseX();
    GLfloat mouse_y = app->GetInput().GetMouseY();

    GLfloat mouse_x_delta = old_mouse_x - mouse_x;
    GLfloat mouse_y_delta = old_mouse_y - mouse_y;

    if (mouse_x_delta != 0 ||
        mouse_y_delta != 0)  {
        if (mouse_x_delta != 0)  {
            y_rot += mouse_x_delta * SPEED_X;

            m_rotation = glm::rotate(m_rotation, y_rot, glm::vec3(0, 1, 0));
        }
        if (mouse_y_delta != 0)  {
            x_rot += mouse_y_delta * SPEED_Y;

            m_rotation = glm::rotate(m_rotation, x_rot, glm::vec3(1, 0, 0));;
        }
    }

    this->old_mouse_x = mouse_x;
    this->old_mouse_y = mouse_y;

    app->SetCursorPosition(app->GetWidth() / 2, app->GetHeight() / 2);
}

void CameraFP::calculate_view()  {
    glm::vec3 forward = glm::vec3(0, 0, -1);
    glm::vec3 forward_rotated = m_rotation * forward;

    target = position += glm::normalize(forward_rotated);

    m_view = glm::lookAt(position, target, up);
} 
```

我的问题是，当我编译项目时，编译器会输出一条错误消息：

```
\CameraFP.cpp|59|error: no match for 'operator*' in '((CameraFP*)this)->CameraFP::m_rotation * glm::detail::tvec3<float>(((const int&)((const int*)(&0))), ((const int&)((const int*)(&1))), ((const int&)((const int*)(&0))))'| 
```

据我了解 vec = mat4 * vec 应该产生一个旋转向量？由于我无法测试此代码，因此我不知道该功能是否正常工作。

**编辑**

根据评论和 awnsers 更新了代码。我的问题是现在我得到一个蓝屏，在渲染功能的某个地方......

```
void CameraFP::process_keyboard(sf::Window *app)  {
    const sf::Input *input = &app->GetInput();

    up = m_rotation * glm::vec4(0.0f, 1.0f, 0.0f, 0.0f);

    glm::vec4 forward = glm::vec4(0.0f, 0.0f, -1.0f, 0.0f);
    glm::vec4 forward_rotated = m_rotation * forward;

    glm::vec4 right = glm::vec4(1.0f, 0.0f, 0.0f, 0.0f);
    glm::vec4 right_rotated = m_rotation * right;

    if (input->IsKeyDown(sf::Key::W))  {
        position += forward_rotated;
    }
    if (input->IsKeyDown(sf::Key::S))  {
        position -= forward_rotated;
    }
    if (input->IsKeyDown(sf::Key::A))  {
        position -= right_rotated;
    }
    if (input->IsKeyDown(sf::Key::D))  {
        position += right_rotated;
    }
}

void CameraFP::process_mouse(sf::Window *app)  {
    // TODO: Make the below constants, and take framerate into account
    GLfloat SPEED_X = 0.000001f;
    GLfloat SPEED_Y = 0.000001f;

    GLfloat mouse_x = app->GetInput().GetMouseX();
    GLfloat mouse_y = app->GetInput().GetMouseY();

    GLfloat mouse_x_delta = old_mouse_x - mouse_x;
    GLfloat mouse_y_delta = old_mouse_y - mouse_y;

    if (mouse_x_delta != 0 ||
        mouse_y_delta != 0)  {
        if (mouse_x_delta != 0)  {
            y_rot += mouse_x_delta * SPEED_X;

            m_rotation = glm::rotate(m_rotation, y_rot, glm::vec3(0.0f, 1.0f, 0.0f));
        }
        if (mouse_y_delta != 0)  {
            x_rot += mouse_y_delta * SPEED_Y;

            m_rotation = glm::rotate(m_rotation, x_rot, glm::vec3(1.0f, 0.0f, 0.0f));;
        }
    }

    this->old_mouse_x = mouse_x;
    this->old_mouse_y = mouse_y;

    app->SetCursorPosition(app->GetWidth() / 2, app->GetHeight() / 2);
}

void CameraFP::calculate_view()  {
    glm::vec4 forward = glm::vec4(0.0f, 0.0f, -1.0f, 0.0f);
    glm::vec4 forward_rotated = m_rotation * forward;

    target = position += forward_rotated;

    m_view = glm::lookAt(v4tov3(position), v4tov3(target), v4tov3(up));
}

glm::vec3 v4tov3(glm::vec4 v1)  {
    return glm::vec3(v1.x, v1.y, v1.z);
} 
```

**编辑 2**

现在的问题是用鼠标旋转相机，它只是不起作用，由于某种原因，x 轴上的变化经常影响 y 轴上的变化，反之亦然。此外，如果我在 x 轴（y 旋转）上向右或向左移动鼠标，相机将向左旋转......

```
void CameraFP::process_mouse(sf::Clock *clock, sf::Window *app)  {
    // TODO: Make the below constants, and take framerate into account
    GLfloat SPEED_X = 0.25f;
    GLfloat SPEED_Y = 0.25f;

    GLfloat screen_x = app->GetWidth();
    GLfloat screen_y = app->GetHeight();

    GLfloat mouse_x = float(screen_x / 2 - app->GetInput().GetMouseX());
    GLfloat mouse_y = float(screen_y / 2 - app->GetInput().GetMouseY());

    GLfloat mouse_x_delta = old_mouse_x - mouse_x;
    GLfloat mouse_y_delta = old_mouse_y - mouse_y;

    GLfloat current_time = clock->GetElapsedTime();
    GLfloat delta_time = current_time - last_time;

    this->last_time = current_time;

    if (mouse_x_delta != 0 ||
        mouse_y_delta != 0)  {
        if (mouse_x_delta != 0)  {
            y_rot += glm::radians(delta_time * SPEED_X * mouse_x);

            m_rotation = glm::rotate(m_rotation, y_rot, glm::vec3(0.0f, 1.0f, 0.0f));

            std::cout << "Y Rotation: " << y_rot << "\n";
        }
        if (mouse_y_delta != 0)  {
            x_rot += glm::radians(delta_time * SPEED_Y * mouse_y);

            m_rotation = glm::rotate(m_rotation, x_rot, glm::vec3(1.0f, 0.0f, 0.0f));

            std::cout << "X rotation: " << x_rot << "\n";
        }
    }

    app->SetCursorPosition(screen_x / 2, screen_y / 2);

    this->old_mouse_x = float(screen_x / 2 - app->GetInput().GetMouseX());
    this->old_mouse_y = float(screen_y / 2 - app->GetInput().GetMouseY());
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T10:37:48.440

替换所有 glm::vec3(0, 1, 0); 通过 glm::vec3(0.0f, 1.0f, 0.0f);

至于 vec-mac 乘法，AquilaRapax 是正确的，因为您只能将 mat4 与 vec4 相乘。但是由于您要乘以方向，因此第 4 个坐标应该是 0.0f，而不是 1.0f。这将产生忽略翻译的效果（1.0 会将它们考虑在内，这是您不想要的）

有关矩阵的详细信息，请参见[http://www.opengl-tutorial.org/beginners-tutorials/tutorial-3-matrices/](http://www.opengl-tutorial.org/beginners-tutorials/tutorial-3-matrices/)。

然而，保留 vec3 而不是 vec4 通常是一个好主意，主要是为了清楚起见（即 glm::vec3 mPosition 而不是 glm::vec4 mPosition）。因此，拥有 2 个这样的功能（未经测试）很方便：

```
glm::vec3 TransformDirection(glm::vec3 pDirection, glm::mat4 pMatrix){
    return pMatrix * glm::vec4(pDirection, 0.0f);
}

glm::vec3 TransformPosition(glm::vec3 pDirection, glm::mat4 pMatrix){
    return pMatrix * glm::vec4(pDirection, 1.0f);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:22:01.020

最后`process::mouse`保存坐标，`old_mouse_x`然后`old_mouse_y`将光标移动到屏幕中间。如果你这样做`old_mouse_x`并且`old_mouse_y`变得无效。您需要做的是在重新定位光标后设置这些变量：

```
app->SetCursorPosition(app->GetWidth() / 2, app->GetHeight() / 2);
this->old_mouse_x = app->GetWidth() / 2;
this->old_mouse_y = app->GetHeight() / 2; 
```

# java - 通过 JMX 使 Spring Service 类可管理

> ID：12138723
> 
> 赞同：3
> 
> 时间：2012-08-27T08:40:53.193
> 
> 标签：java, spring, jmx

这可能是微不足道的，但我似乎不断地在墙上跑，找不到我的错误。

我正在扩展使用 Spring 和 OpenJPA 的 Apache James 3 邮件服务器。我现在想通过 JMX 访问使用 JPA 存储库的服务类。

该服务是

```
@Component
@ManagedResource(objectName = "bean:name=BlacklistServiceImpl", description = "The service providing access to the blacklisted recipients in the DB.")
public class BlacklistServiceImpl implements BlacklistService {

    @Autowired
    private BlackListRepository blackListRepository;
    @Autowired
    private ConversationService conversationService;

    @Override
    @ManagedOperation(description = "Add address to blacklist")
    @ManagedOperationParameter(name = "address", description = "Address to add to blacklist.")
    public void addAddress(String address) {
        //Stuff
    }

    @Override
    @ManagedOperation(description = "Remove address from blacklist")
    @ManagedOperationParameter(name = "address", description = "Address to remove from blacklist.")
    public void removeAddress(String address) {
        //Stuff
    }
} 
```

我在我的上下文中添加了以下内容：

```
<bean id="mailserverBeansExporter" class="org.springframework.jmx.export.annotation.AnnotationMBeanExporter">
    <property name="beans">
        <map>
            <entry key="bean:name=BlacklistServiceImpl">
                <bean class="<snip>.services.blacklist.impl.BlacklistServiceImpl"/>
            </entry>
        </map>
    </property>
</bean> 
```

虽然我设法构建了这个，但 James 在启动时崩溃了，但出现以下异常：

```
 [INFO] Starting Apache James Server...
    [INFO] ------------------------------------------------------------------------
    [ERROR] FATAL ERROR
    [INFO] ------------------------------------------------------------------------
    [INFO] Error creating bean with name 'blacklistServiceImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.B
    eanCreationException: Could not autowire field: private <snip>.core.repositories.blacklist.BlackListRepository <snip>.service
    s.blacklist.impl.BlacklistServiceImpl.blackListRepository; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean
     of type [<snip>.repositories.blacklist.BlackListRepository] found for dependency: expected at least 1 bean which qualifies as autowire cand
    idate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    [INFO] ------------------------------------------------------------------------
    [INFO] Trace
    org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'blacklistServiceImpl': Injection of autowired dependencies failed; neste
    d exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private <snip>.repositories.blacklist.Blac
    kListRepository <snip>.services.blacklist.impl.BlacklistServiceImpl.blackListRepository; nested exception is org.springframework.beans.facto
    ry.NoSuchBeanDefinitionException: No matching bean of type [<snip>.repositories.blacklist.BlackListRepository] found for dependency: expecte
    d at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(re
    quired=true)}
            at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java
    :285)
            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
            at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
            at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
            at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
            at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
            at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
            at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
            at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
            at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
            at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:93)
            at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
            at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
            at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)
            at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)
            at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
            at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
            at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
            at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
            at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
            at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
            at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
            at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
            at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
            at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
    Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private <snip>.repositories.blacklist.BlackLis
    tRepository <snip>.services.blacklist.impl.BlacklistServiceImpl.blackListRepository; nested exception is org.springframework.beans.factory.N
    oSuchBeanDefinitionException: No matching bean of type [<snip>.repositories.blacklist.BlackListRepository] found for dependency: expected at
     least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(requir
    ed=true)}
            at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.j
    ava:502)
            at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
            at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java
    :282)
            ... 33 more
    Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [<snip>.repositories.blacklist.BlackLis
    tRepository] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframe
    work.beans.factory.annotation.Autowired(required=true)}
            at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:920)
            at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:789)
            at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:703)
            at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.j
    ava:474)
            ... 35 more 
```

BlackListRepository 有两个实现：JPABlackListRepository 和 InMemoryBlackListRepository，用于单元测试。我试图通过添加来解决问题

```
<bean id="BlackListRepository" class="<snip>.JPABlackListRepository" /> 
```

到通用上下文，但这导致单元测试失败，因为现在不再使用内存实现。

我将不胜感激任何帮助。

*更新：*

在调试时（感谢下面的评论），我意识到只删除 @Component 和 @Managed* 注释以及该部分

```
<bean id="mailserverBeansExporter" class="org.springframework.jmx.export.annotation.AnnotationMBeanExporter">
    <property name="beans">
        <map>
            <entry key="bean:name=BlacklistServiceImpl">
                <bean class="at.willhaben.safe.sms.core.services.blacklist.impl.BlacklistServiceImpl"/>
            </entry>
        </map>
    </property>
</bean> 
```

导致干净的启动。显然 JMX 不起作用，但是在代码中留下任何这些语句都会导致上述异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:59:07.427

就像其他评论指出的那样，该异常与 JMX 并没有真正的关系——问题似乎是没有找到依赖项。

您已经提到，当您以这种方式显式传入存储库时：

`<bean id="BlackListRepository" class="<snip>.JPABlackListRepository" />`

然后它可以工作，如果是这种情况，您可以有选择地单独覆盖它进行测试，创建一个测试应用程序上下文：

`test-applicationcontext.xml`

```
 <import resource="prod-context.xml"/>
 <bean id="BlackListRepository" class="..InMemoryBlackListRepository"/> 
```

这将确保 InMemoryBlackLIstRespository 是注入的。

还要通过 Jmx 公开您的服务 bean：

```
<bean name="blacklistService" class="..BlackListServiceImpl"/>

<bean id="mailserverBeansExporter" class="org.springframework.jmx.export.annotation.AnnotationMBeanExporter">
<property name="beans">
    <map>
        <entry key="bean:name=BlacklistServiceImpl" value-ref="blacklistService">

        </entry>
    </map>
</property> 
```

# asp.net - 请等待页面提交点击

> ID：12138728
> 
> 赞同：-1
> 
> 时间：2012-08-27T08:41:28.037
> 
> 标签：asp.net

我想在单击提交按钮时将我的页面重定向到等待页面，直到交易得到处理。请帮助我处理代码。我正在使用 C# 语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:45:55.477

```
Response.Redirect("your page.aspx");

Or

Server.Transfert(""); 
```

在这里，您可以找到一个非常简单的基于 ajax 脚本的示例：http: [//www.codeproject.com/Articles/9877/Building-a-Better-Wait-Page](http://www.codeproject.com/Articles/9877/Building-a-Better-Wait-Page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:46:16.593

看看这里：

[http://www.simple-talk.com/dotnet/asp.net/implementing-waiting-pages-in-asp.net/](http://www.simple-talk.com/dotnet/asp.net/implementing-waiting-pages-in-asp.net/)

[http://www.dotnetfunda.com/forums/thread299-please-wait-page.aspx](http://www.dotnetfunda.com/forums/thread299-please-wait-page.aspx)

[http://maheshkumar.wordpress.com/2005/03/14/wait-page-in-asp-net/](http://maheshkumar.wordpress.com/2005/03/14/wait-page-in-asp-net/)

# c# - .NET 构建过程和链接

> ID：12138731
> 
> 赞同：13
> 
> 时间：2012-08-27T08:41:32.463
> 
> 标签：c#, .net, build, compilation, linker

构建是由编译和链接组成的序列。

在 .NET 中，源代码被编译成包含通用中间语言和类型信息的程序集。在运行时，JIT 编译器将 CIL 代码转换为本机代码。

我不明白，在 .NET 中，链接是如何以及何时发生的。

有人可以解释一下这个过程吗？

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T10:13:54.120

在 C++ 方面没有链接。

我的意思是，没有任何中间的“obj”/“lib”文件，以后可以分发并与另一个“obj”文件链接。与 C++ 静态链接相反，对程序集的引用始终具有动态行为（始终是动态链接库）。

链接之**类**的东西是`.netmodule`. 您可以使用编译器`.netmodule`而不是程序集构建 .NET 源代码（查看[此处](http://msdn.microsoft.com/en-us/library/78f4aasd.aspx)，尤其是[“C# 编译器和 C++ 编译器输出之间的差异”](http://msdn.microsoft.com/en-us/library/78f4aasd.aspx#vcconcommand_linebuildinganchor3)部分），稍后您可以将这些模块链接到一个程序集中（参见[al.exe](http://msdn.microsoft.com/en-us/library/c405shex%28v=vs.110%29.aspx)）。

但这是不常见的做法 - 大多数程序集包含单个模块，并且这项工作（源 -> 模块 -> 程序集）已由编译器（例如，`csc.exe`）在幕后完成。另外，我不记得有任何产品被重新分发为一组`.netmodule`（而不是一组**程序集**）。

# routes - Dijkstra 或 TSP

> ID：12138736
> 
> 赞同：1
> 
> 时间：2012-08-27T08:42:15.533
> 
> 标签：routes, dijkstra

我正在开发一个网络应用程序来显示一些点之间的地图和路线。我想知道这些点之间的短途路线。

现在我正在使用[dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)，但我被要求使用[TSP](http://en.wikipedia.org/wiki/Travelling_salesman_problem)代替。

我希望第一个点和最后一个点相同，使用 dijkstra 我必须将最后一个点设置为相同，但使用 TSP 会自动设置。

两者是相同的算法吗？只是通过这种修改还是不同的算法？

任何可以检查 TSP 伪代码的网页？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:34:16.047

旅行推销员问题，顾名思义，讨论最短路线及其从单个节点开始并通过***访问其间的所有其他节点返回到该节点的成本***

但 Dijkstra 更简单。它只是谈论2个节点之间的最短路线和成本。因此，在您的情况下，如果需要包含介于两者之间的所有节点，那么对 TSP 的建议是有效的。

PS 如果您想在所有节点对之间获得最短的路线和成本，那么您应该选择 Floyd 算法，它基本上是 Dijkstra 的扩展。

# facebook - Facebook 应用程序 ID 获得一个

> ID：12138739
> 
> 赞同：0
> 
> 时间：2012-08-27T08:42:32.263
> 
> 标签：facebook

> **可能重复：**
> [从企业帐户创建和管理 Facebook 应用程序](https://stackoverflow.com/questions/10805745/creating-and-managing-a-facebook-app-from-a-business-account)

好的，所以我在这里坐了 2 个小时，试图弄清楚如何获取 Facebook 应用程序 ID。我已经关注了每个人的链接，等等，哎呀！每次我去开发者页面和应用程序时，它都会重复地把我带到我的 Facebook 上！实际上这很烦人。我已经用我的手机验证了我的帐户。然而，我似乎无法让它转到我添加显示名称和网站网址的页面。请有人帮我多一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:53:56.407

要制作facebook APP id，你必须有一个个人帐户，而不是一个页面。不要像我一样尝试使用“页面”来执行此操作。

# c - C中静态结构的成员变量

> ID：12138742
> 
> 赞同：7
> 
> 时间：2012-08-27T08:42:45.877
> 
> 标签：c, static, struct, member

我有一个关于 C 语言中静态结构的成员变量的问题。

有人说我们可以声明 a `static struct`，但是在 C 中，struct 没有像 C++ 中的 class 那样的静态成员，这是什么意思？如果我声明一个静态结构，成员变量的状态是什么？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T08:49:48.600

请注意，静态结构本身与结构的静态成员不同。虽然您可以声明一个静态结构变量：

```
static struct MyStruct s; 
```

您不能使用静态成员定义结构类型：

```
struct MyStruct {
    static int i; // <- compiler error
}; 
```

这样做的原因是，在 C 中，结构是一种类型——声明一个类型的成员变量对于该类型的多个实例始终是同一个实例（即静态）完全是无稽之谈。在 C++ 中，结构实际上是类（它们仅在成员的默认可见范围上有所不同），而在 C++ 中，静态关键字在这种情况下表示其他含义。它意味着一个类方法——但由于 C 没有类和方法，所以这没有意义并且在 C 中是无效的。

经验教训：C++ 不是 C。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T09:09:50.453

> 我有一个关于 C 语言中静态结构的成员变量的问题。
> 
> 有人说我们可以声明一个静态结构

正确/合法：

```
// (global scope)
static struct t_struct {
    int a;
} THE_STATIC_VARIABLE; 
```

* * *

> 但是在 C 中，struct 没有像 C++ 中的类这样的静态成员

```
// (global scope)
struct t_ill_struct {
    static int a; // << ill-formed in C, but valid in C++
}; 
```

* * *

> 这是什么意思？如果我声明一个静态结构，成员变量的状态是什么？有人可以帮我吗？

使用上面的示例，这意味着`THE_STATIC_VARIABLE`将具有静态存储。以下是等价的：

**一种**

```
// (global scope)
static struct t_struct {
    int a;
} THE_STATIC_VARIABLE; 
```

**乙**

```
// (global scope)
struct t_struct {
    int a;
};

static struct t_struct THE_STATIC_VARIABLE; 
```

也就是说，每一个看到`THE_STATIC_VARIABLE`' 定义的翻译都会得到自己的副本。

如果您想要与静态 C++ 成员相同的效果，则必须在另一个范围内声明它——在结构声明之外：

```
// file.h

// (global scope)
struct t_struct {
    int a;
};

extern struct t_struct THE_GLOBAL_VARIABLE;

// file.c
struct t_struct THE_GLOBAL_VARIABLE; 
```

现在我们真的有一个，就像在 C++ 中一样。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-27T09:50:41.263

`static`在 C 中意味着：

*   程序中只能有这个变量的一个实例。
*   该变量应该在整个程序执行期间都有效。
*   该变量应在执行 main() 之前初始化。如果程序员显式初始化一个变量，那么它应该被设置为这个值。否则应设置为零。
*   变量（或静态函数）只能从它声明的范围内访问。如果在文件范围（全局）声明，则只能在同一个 .c 文件中访问。

在 C++ 中，还有一个附加含义：

*   静态成员变量或成员函数只能分配一次，无论分配了多少类实例。

# objective-c - 无法关闭搜索视图

> ID：12138750
> 
> 赞同：6
> 
> 时间：2012-08-27T08:43:23.323
> 
> 标签：objective-c, ios, uitableview, uisearchbar, uisearchdisplaycontroller

我有一个带有 tableview 和 searchbar 的父类，它是 tableview 控制器的子类。searchBar 和 searchdisplaycontroller 的委托设置在从 UISearchdisplaycontroller 继承的单独类中。tableview 和 searchbar 的数据源和委托在此类中单独处理。这些课程在 ARC 下。

因此，当用户点击搜索时，控件会从 FilesListController（父）类转移到此类。现在，当用户点击取消按钮时，在此类中设置的搜索栏委托，即

```
- (void)searchBarCancelButtonClicked:(UISearchBar *) searchBar 
```

被调用，但没有达到解除全屏搜索表视图并返回父视图控制器的目的。但是，如果我不在搜索类中编写此委托，它可以正常工作。我在 xib 和调用时设置了搜索栏代表：

```
- (BOOL)searchBarShouldBeginEditing:(UISearchBar *)searchBar 
```

像这样：

```
self.searchResultsTableView.delegate = self;
self.searchResultsTableView.dataSource = self;
[parentFileViewController.searchDisplayController setDelegate:self]; 
```

我哪里错了？提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-27T09:26:56.607

如果您想用 SearchBarController 关闭 UISearchBar，只需使用以下代码：

```
[self.searchDisplayController setActive:NO animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:01:58.977

你应该在委托函数中实现resign响应者，即

```
- (void)searchBarCancelButtonClicked:(UISearchBar *) searchBar {
      [searchBar resignFirstResponder];
 } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-02T17:25:01.473

内存警告可能会在应用程序运行期间的任何时候出现，您必须假设会发生内存警告并且必须重新创建视图和一次性对象。

我们通过将数组设置为零来处理这种情况：

```
- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];

if([self isViewLoaded] && self.view.window == nil)
{
    self.view = nil;
    keys = nil;
    names = nil;
    errorDuringNetworkCall = nil;
}
} 
```

并通过在执行 segue 操作之前关闭搜索栏 tableview：

```
[self performSegueWithIdentifier:@"navigateToNextScreen" sender:self];
self.searchBar.text = @"";
[self.searchDisplayController setActive:NO animated:YES]; 
```

收到内存警告后，再次调用 viewDidLoad 方法并填充数组，搜索栏将继续有用。工作没有问题

# c# - 如何使用 BizTalk 将数据从 Excel 文件上传到 Sql Server

> ID：12138752
> 
> 赞同：0
> 
> 时间：2012-08-27T08:43:29.387
> 
> 标签：c#, sql-server, biztalk

我想使用 BizTalk 将数据从 Excel 文件（将位于某个指定文件夹）上传到 SQL Server。

我正在使用 Visual Studio 2010、.NET V4 和 SQL Server 2008。任何人都可以向我提供如何实现此目标的详细步骤或任何现有的讨论/论坛链接。

谢谢，Mayur Jadhav

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T07:42:43.700

Mayur，Excel 表格基本上是二进制文件，您需要一个**自定义管道组件**来处理这个 excel 文件。我将在*[此处](http://blogs.objectsharp.com/cs/blogs/matt/archive/2007/06/15/test.aspx)*粘贴一个链接，以帮助您执行所需的任务。

在*代码项目中**[这里](http://www.codeproject.com/Articles/37286/Excel-Reading-Custom-Pipeline-for-BizTalk-Server)*上传了另一篇文章，旨在讨论如何在 BizTalk 中从管道中读取 Excel 文件。需要开发自定义管道来读取 Excel 文件。Excel文件将通过文件适配器读取，管道将对其进行处理。自定义管道组件只不过是一个简单的 .NET DLL，它实现了一个具有一些预定义接口的类。此接口表示 .NET 程序和 BizTalk Server 之间的层。

 *希望对您有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:20:17.977

有几个选项可以处理 Excel 文件。如果您可以控制，则将 Excel 文件保存为 XML 并处理它们，否则为 Biztalk 寻找 excel 适配器。[例如](http://www.fpoint.com/biztalk/default.aspx)

然后，您只需使用映射和端口文件。[这](http://msdn.microsoft.com/en-us/library/aa577834%28v=bts.10%29.aspx)应该可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:42:13.890

首先你需要创建平面文件模式 [如何在 biztalk 中创建平面文件模式](http://www.codeproject.com/Articles/13706/Creating-Flat-File-schemas-using-the-BizTalk-Serve)

比您需要将数据插入到数据库中，我会使用存储谨慎，将数据插入到数据库中，而不是使用**LOB 适配器**以便在 biztalk 编排[LOB 适配器中使用它](http://seroter.wordpress.com/biztalk-and-wcf-part-vii-about-the-biztalk-adapter-pack/)*

# java - 使用 JSON 请求并产生不同的输出

> ID：12138753
> 
> 赞同：2
> 
> 时间：2012-08-27T08:43:37.840
> 
> 标签：java, json, rest, restful-url

您能否指出我的文章或解释我如何声明使用 JSON 请求并基于 JSON 中的参数生成不同格式的输出的 RESTful Web 服务，这意味着客户可以获取 JSON 格式的输出，但也可以获取 pdf 格式的输出。我在 JBoss 5.1 上使用 Java 和 RestEasy。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:46:54.117

您可以将请求映射到返回 RestEasy`Response`对象的方法上，使用 a`ResponseBuilder`来构建响应，根据 JSON 中的参数动态设置响应的 mime 类型。

```
@POST
@Path("/foo")
@Consumes("application/json")
public Response fooService(MyObject obj) {
   MyResponseEntity entity = MyObjectService.retrieveSomethingFrom(obj);
   return Response.status(200).entity(entity).type(obj.isXml() ? "text/xml" : "application/json").build();
} 
```

这样，如果`MyObject`代表传入 JSON 的域对象的参数`xml`设置为 true，则该`Response`对象被参数化为产生，`text/xml`否则它产生`application/json`。RestEasy 应该做剩下的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:44:43.010

你可以使用这种方式

```
@Path("/")
public class Test {

@Path("/test")
@POST 
@Consumes("application/json")
@Produces("text/plain")
public Response addOrderJSON(OrderDetails details) {...}

} 
```

# android - 获取 Android 默认编辑文本首选项对话框布局

> ID：12138757
> 
> 赞同：2
> 
> 时间：2012-08-27T08:43:50.883
> 
> 标签：android, android-preferences

我有一个带有 android:dialogLayout="@layout/my_own_layout" 的首选项屏幕

我想让我自己的 dialogLayout 看起来几乎和默认的一样，只有一些细微的变化（调整标题和摘要之间的空格）。

有什么办法可以让我获得默认布局？与文本大小，填充等？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:01:58.193

您始终可以检查不同平台中的默认布局，并且可以对其进行修改。

例如，您可以通过以下路径访问警报对话框布局：

`android-sdk\platforms\android-15\data\res\layout\`

适用于 Android API LvL 15。

您可以随时搜索其他 api 级别以检查那里的不同布局。

# mysql - 数据库结构：好还是不好？

> ID：12138760
> 
> 赞同：-2
> 
> 时间：2012-08-27T08:43:58.033
> 
> 标签：mysql, sql

我正在为一家新公司开发应用程序管理业务（销售、供应商、客户、产品……）。首先，我需要创建一个数据库。您能否告诉我下面的 BD 方案是否良好和优化？

```
CREATE TABLE IF NOT EXISTS `company` (
  id UNSIGNED INT NOT NULL auto_increment,
  `SIRET` varchar(50) NOT NULL,
  `nom` varchar(50) NOT NULL,
  `description` varchar(500) NOT NULL,
  `enable` ENUM('YES', 'NO') DEFAULT 'YES',
  `level` int(1) NOT NULL,
  PRIMARY KEY  (id),
  UNIQUE KEY SIRET (SIRET)
) ENGINE=INNODB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

// contactType can be one of the 3 values : email, phone, fax
CREATE TABLE IF NOT EXISTS `contactType` (
  id UNSIGNED INT NOT NULL auto_increment,
  `contactType` ENUM('email', 'phonenumber', 'faxnumber')
  `mobile` ENUM('YES', 'NO') default 'NO',
  PRIMARY KEY  (id),
  UNIQUE KEY type (contactType)
) ENGINE=INNODB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `contacts` (
  id UNSIGNED INT NOT NULL auto_increment,
  `SIRET` varchar(50) NOT NULL,
  `contactType` varchar(50) NOT NULL, // A reference to contactType just above
  `contactref` varchar(50) NOT NULL, // Phone number, fax number or email adress
  PRIMARY KEY  (id),
  UNIQUE KEY type (SIRET)
) ENGINE=INNODB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `customers` (
  id UNSIGNED INT NOT NULL auto_increment,
  `SIRET` varchar(50) NOT NULL,
  PRIMARY KEY  (id),
  UNIQUE KEY type (SIRET)
) ENGINE=INNODB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `supplier` (
  id UNSIGNED INT NOT NULL auto_increment,
  `SIRET` varchar(50) NOT NULL,
  PRIMARY KEY  (id),
  UNIQUE KEY type (SIRET)
) ENGINE=INNODB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `industry` (
  id UNSIGNED INT NOT NULL auto_increment,
  `industry` varchar(250) NOT NULL,
  PRIMARY KEY  (id),
  UNIQUE KEY type (activite)
) ENGINE=INNODB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `entreprisePerIndustry` (
  id UNSIGNED INT NOT NULL auto_increment,
  `industry_id` varchar(250) NOT NULL, // Chemical, Computer, Consulting, ...
  FOREIGN KEY (industry_id) REFERENCES industry(id) ON DELETE CASCADE,
  `SIRET` varchar(50) NOT NULL,
  PRIMARY KEY  (id),
  UNIQUE KEY type (industry_id)
) ENGINE=INNODB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:50:56.167

以下是一些可以帮助您创建更好的数据库的**TIPS**

*   如果您想让外键约束起作用`MyISAM`，请将表引擎从更改为。[`InnoDB`](http://dev.mysql.com/doc/refman/5.0/en/innodb-storage-engine.html)
*   **AUTO INCREMENT** DataType 应该是**UNSIGNED INT**。这将使范围加倍。

    ```
    `id` INT UNSIGNED NOT NULL AUTO_INCREMENT` 
    ```

*   如果从允许值列表中选择列值，则将 dataType 更改为 [`ENUM`](http://dev.mysql.com/doc/refman/5.0/en/enum.html)。在您的情况下`enable`，`level`可以将其转换为**ENUM** dataType

    ```
    `enable` ENUM( 'y', 'n' ) NOT NULL DEFAULT 'y' COMMENT 'y:yes; n:no' ` 
    ```

*   添加[外键关系到](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

    `contacts`. `contactType`与 `contactType`.`id`

    `entreprisePerIndustry`. `industry` 与`industry`.`id`

## 更新

我创建了基本和优化的表结构（AFAIK）。

```
--
-- Table structure for table `tbl_company`
--
CREATE TABLE IF NOT EXISTS `tbl_company` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `siret` varchar(50) NOT NULL,
  `nom` int(11) NOT NULL,
  `description` varchar(250) NOT NULL,
  `enable` enum('y','n') NOT NULL DEFAULT 'y' COMMENT 'y:yes; n:no',
  `level` enum('1','2') NOT NULL DEFAULT '1',
  `last_updated_on` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

--
-- Table structure for table `tbl_contact`
--

CREATE TABLE IF NOT EXISTS `tbl_contact` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `siret` varchar(50) NOT NULL,
  `contact_type` enum('email','phone','fax') NOT NULL DEFAULT 'email',
  `contact_ref` varchar(100) NOT NULL COMMENT 'Phone number, fax number or email adress',
  `last_updated_on` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `siret` (`siret`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

...
... 
```

[`complate structure is here`](http://www.sqlfiddle.com/#!2/af1a1/1)

# java - JSch：通道永远不会关闭或 EOF

> ID：12138777
> 
> 赞同：4
> 
> 时间：2012-08-27T08:45:50.177
> 
> 标签：java, ssh, jsch

我是 JSch 的新手，我的一些脚本有问题，我尝试远程执行并且似乎永远不会结束（并且与使用 putty 运行它时做的事情不同）。

我已将错误和输出流重定向到我的 System.out，并且在执行脚本但脚本完成时确实看到了错误！因此我不明白为什么通道仍然打开（isClosed 和 isEOF 是错误的）。

当我在使用 putty 连接 SSH 时运行命令时，脚本会正确执行并且不会显示任何错误。当我在 Ubuntu 中使用 ssh 命令执行 ssh user@host "my command" 时，我得到与使用 JSch 时相同的输出（std + err），但 ssh 命令不会挂起！

你知道我做错了什么吗，为什么我有不同的输出/行为？这是我运行的 java 代码（顺便说一下，我不能在同一个会话上发送多个具有不同通道的命令，我不知道为什么，因此我为每个 cmd 打开一个会话）。

```
public static void runCommand(String user, String password, String cmd) throws JSchException, IOException{
    Session session = jSsh.getSession(user, SERVER, SSH_PORT);
    session.setPassword(password);
    session.setConfig(SSH_PROPERTIES);
    session.connect();
    SshCommand sshCmd = new SshCommand(session, cmd);
    runCommand(sshCmd);
    session.disconnect();
}

private static void runCommand(SshCommand sshCmd) throws IOException, JSchException{

    Session session = sshCmd.getSshSession();
    String cmd = sshCmd.getCmd();

    UtilityLogger.log(Level.FINE, "Running command on ssh : "+cmd);

    ChannelExec channel = (ChannelExec) session.openChannel("exec");
    channel.setCommand(cmd);
    channel.setInputStream(null);

    InputStream in = channel.getInputStream();
    InputStream err = channel.getErrStream();
    UtilityLogger.log(Level.FINEST, "Connecting to channel");
    channel.connect();
    UtilityLogger.log(Level.FINEST, "Channel connected");

    byte[] tmp = new byte[1024];
            byte[] tmp2 = new byte[1024];
    while (true) {
        //Flush channel
        while (in.available() > 0) {
            int i = in.read(tmp, 0, 1024);
            if (i < 0)
                break;
            UtilityLogger.log(Level.FINE, new String(tmp, 0, i));
        }
        //Flush Error stream
        while (err.available() > 0) {
            int i = err.read(tmp2, 0, 1024);
            if (i < 0)
                break;
            UtilityLogger.log(Level.FINE, new String(tmp2, 0, i));
        }
        if(DONT_WAIT_PROCESS_END)
            break;
        if (channel.isEOF()) {
            UtilityLogger.log(Level.FINE, "Channel exit-status: " + channel.getExitStatus());
            break;
        }
    }
    try{Thread.sleep(TIME_BETWEEN_COMMAND);}catch(Exception ee){}
    channel.disconnect();
    UtilityLogger.log(Level.FINEST, "Channel disconnected");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:24:15.190

尝试附加“退出；” 即使在使用`exec`频道时，也会在您的命令之后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-13T16:39:21.007

我们的应用程序也没有在 exec 上收到 EOF。将 an 附加`exit;`到命令并不能解决问题。

它与`stderr`输出有关。重定向`stderr`到已`stdout`解决（解决方法？！）的问题。
所以我们附加`2>&1`到命令：

```
${command} 2>&1 
```

# javascript - 监听 css 和 javascript 事件

> ID：12138781
> 
> 赞同：2
> 
> 时间：2012-08-27T08:45:56.340
> 
> 标签：javascript, css, jquery

我正在研究将一个用户操作从一个浏览器复制到另一个浏览器的项目。

两个用户都在看同一个页面。我创建了一个环境，我可以将一个用户的鼠标移动转移到另一个浏览器（用户可以看到他们自己的鼠标和另一个用户的鼠标）。其他用户可以看到移动和点击，当有人点击链接时，两个浏览器都会转到该网址。

现在，我在页面上有 css/javascript 菜单，我想转移悬停动作（当第一个用户悬停菜单链接时，其他用户将在他的页面上看到相同的悬停动作）。

关于听什么并将其传递给其他浏览器的任何想法，以便我可以在那里触发相同的事件？我正在使用 jQuery。

更新

悬停只是我需要的一个例子。我想捕捉页面上的每个 css/javascript 操作，但我不知道它会是什么（悬停、输入文本、更改单选按钮状态）

我需要倾听每一个元素并知道发生了什么，这样我就可以转移它并在另一边做同样的动作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:54:12.930

假设您想捕获链接上的悬停事件：

```
<a href="http://example.com">A link!</a> 
```

在你的 JavaScript 中，[在 DOM 准备好之后](https://gist.github.com/3486751)，你可以这样写：

```
$('a').on('hover', function() {
    // do something!
}); 
```

* * *

在特定链接上呢？

```
<a href="http://example.com" id="this-one-link">A great link too.</a> 
```

您的 JavaScript 将如下所示：

```
$('#this-one-link').on('hover', function() {
    // do something!
}); 
```

* * *

您还可以创建一*类*链接。在此示例中，前两个链接将触发事件，但不是最后一个。

```
<a href="http://example.com" class="hover-event">Example 1</a>
<a href="http://example.com" class="hover-event">Example 2</a>
<a href="http://example.com">Example 3</a>
<a href="http://example.com">Example 4</a> 
```

还有你的 JavaScript：

```
$('#this-one-link').on('hover', function() {
    // do something!
}); 
```

# python - numpy 初学者数组普通 python 与 numpy 向量：错误的结果

> ID：12138782
> 
> 赞同：1
> 
> 时间：2012-08-27T08:45:56.920
> 
> 标签：python, vector, numpy

我对 NumPy 完全陌生，并尝试了教科书代码。不幸的是，在一定规模的计算中，NumPy 结果被搞砸了。这是代码：

```
import sys
from datetime import datetime
import numpy

def pythonsum(n):
    a = range(n)
    b = range(n)
    c = []
    for i in range(len(a)):
        a[i] = i**2
        b[i] = i**3
        c.append(a[i]+b[i])
    return c

def numpysum(n):
    a = numpy.arange(n) ** 2
    b = numpy.arange(n) ** 3
    c = a + b
    return c

size = int(sys.argv[1])
start = datetime.now()
c=pythonsum(size)
delta = datetime.now()-start
print "The last 2 elements of the sum",c[-2:]
print "PythonSum elapsed time in microseconds", delta.microseconds
start = datetime.now()
c=numpysum(size)
delta = datetime.now()-start
print "The last 2 elements of the sum",c[-2:]
print "NumPySum elapsed time in microseconds", delta.microseconds 
```

当 size >= 1291 时结果为负 我正在使用 python 2.6、MacOSX 10.6、NumPy 1.5.0 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:12:22.543

从 Numpy 1.5 开始？

“Time for Action - 添加向量”中的介绍性示例将仅在允许长整数的 64 位平台上运行。否则会返回错误的结果：

```
The last 2 elements of the sum [-2143491644 -2143487647] 
```

为了解决这个问题，将幂函数中的整数转换为浮点数，以便转发浮点值。结果：加速了 10 倍

> $ python vectorsum.py 1000000
> 
> 和的最后 2 个元素 [9.99995000008e+17, 9.99998000001e+17]
> 
> PythonSum 以微秒为单位的经过时间 3 59013
> 
> 和的最后 2 个元素 [ 9.99993999e+17 9.99996999e+17]
> 
> NumPySum 以微秒为单位的经过时间 0 308598

**更正后的例子：**

> 导入系统
> 
> 从日期时间导入日期时间
> 
> 导入 numpy
> 
> def numpysum(n):
> 
> ```
> a = numpy.arange(n) ** 2.
> 
> b = numpy.arange(n) ** 3.
> 
> c = a + b
> 
> return c 
> ```
> 
> def pythonsum(n): a = range(n)
> 
> ```
>  b = range(n)
> 
>   c = []
> 
>   for i in range(len(a)):
> 
>       a[i] = i ** 2\.     # notice the dot (!)
> 
>       b[i] = i ** 3.
> 
>       c.append(a[i] + b[i])
> 
>   return c 
> ```
> 
> 大小 = int(sys.argv[1])
> 
> 开始 = datetime.now()
> 
> c = pythonsum(大小)
> 
> delta = datetime.now() - 开始
> 
> print "和的最后两个元素", c[-2:]
> 
> 打印“PythonSum 以微秒为单位的经过时间”，delta.seconds，delta.microseconds
> 
> 开始 = datetime.now()
> 
> c = numpysum（大小）
> 
> delta = datetime.now() - 开始
> 
> print "和的最后两个元素", c[-2:]
> 
> 打印“NumPySum 以微秒为单位的经过时间”，delta.seconds，delta.microseconds

该代码在此处的 pastebin 中可用[http://paste.ubuntu.com/1169976/](http://paste.ubuntu.com/1169976/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:25:42.047

我认为这个线程有一些混乱。纯 Python，即非`numpy`，代码工作的原因与 32 位和 64 位没有任何关系。它可以在以下任何一个上正常工作： Python`int`可以是任意大小。[在后台有一些实现细节，涉及它是否调用某物`int`或 a`long`但您不必担心，转换是无缝的。这就是为什么有时你会看到`L`一个数字的末尾。]

例如：

```
>>> 2**100
1267650600228229401496703205376L 
```

另一方面，`numpy`整数`dtypes`是固定精度的，并且对于足够大的数字*总是会失败，无论有多宽：*

```
>>> for kind in numpy.int8, numpy.int16, numpy.int32, numpy.int64:
...     for power in 1, 2, 5, 20:
...         print kind, power, kind(10), kind(10)**power
... 
<type 'numpy.int8'> 1 10 10
<type 'numpy.int8'> 2 10 100
<type 'numpy.int8'> 5 10 100000
<type 'numpy.int8'> 20 10 -2147483648
<type 'numpy.int16'> 1 10 10
<type 'numpy.int16'> 2 10 100
<type 'numpy.int16'> 5 10 100000
<type 'numpy.int16'> 20 10 -2147483648
<type 'numpy.int32'> 1 10 10
<type 'numpy.int32'> 2 10 100
<type 'numpy.int32'> 5 10 100000
<type 'numpy.int32'> 20 10 1661992960
<type 'numpy.int64'> 1 10 10
<type 'numpy.int64'> 2 10 100
<type 'numpy.int64'> 5 10 100000
<type 'numpy.int64'> 20 10 7766279631452241920 
```

您可以`numpy`通过告诉纯 Python 使用 Python 类型 ie 来获得与纯 Python相同的结果`dtype=object`，尽管性能会受到显着影响：

```
>>> import numpy
>>> numpy.array([10])
array([10])
>>> numpy.array([10])**100
__main__:1: RuntimeWarning: invalid value encountered in power
array([-2147483648])
>>> numpy.array([10], dtype=object)
array([10], dtype=object)
>>> numpy.array([10], dtype=object)**100
array([ 10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000], dtype=object) 
```

# sql - PostgreSQL 和 C 多连接

> ID：12138786
> 
> 赞同：3
> 
> 时间：2012-08-27T08:46:12.610
> 
> 标签：sql, c

我正在编写一个需要来自数据库的数据的 CUDA 代码我想从存储在 PostgreSQL 中的数据库中获取 400 个随机行。如果我按顺序检索每一行，这将使我的代码非常慢，并且无法达到并行性和加速的目的。所以，我想要一些可以与 PostgreSQL 建立多个连接并更快地检索数据的 C 库或函数。

C中有什么东西可以帮助我做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:24:15.343

也许这样的查询适合您：

```
SELECT * FROM tablename ORDER BY RANDOM() LIMIT 400; 
```

# php - 谷歌分析网络应用

> ID：12138789
> 
> 赞同：0
> 
> 时间：2012-08-27T08:46:31.643
> 
> 标签：php, oauth, google-analytics

我开发了一个谷歌分析 joomla 扩展，网站管理员可以将其包含到基于 joomla 的网站中，以向访问者显示分析统计信息。到目前为止，该应用程序的工作流程如下：

1.  用户安装扩展
2.  通过提供用户名和密码导入他的谷歌分析配置文件
3.  帐户和用户名和密码存储在扩展程序中
4.  将根据导入的配置文件获取数据，并通过先前输入的用户名和密码进行身份验证

到目前为止，我一直使用这个 PHP 脚本来获取帐户和统计数据[http://code.google.com/p/gapi-google-analytics-php-interface/](http://code.google.com/p/gapi-google-analytics-php-interface/)

由于谷歌发布了他们的分析 API v3，一切都不同了，尤其是在身份验证方面。用户需要使用 api 控制台来获取 id 和 secret。现在的问题是何时应该在网站前端向匿名访问者显示数据。有人可以告诉我如何使用谷歌的 v3 api 实现这一点。我真的希望我错过了什么。

# javascript - 使用javascript获取带有格式的选定文本

> ID：12138792
> 
> 赞同：0
> 
> 时间：2012-08-27T08:46:54.797
> 
> 标签：javascript

基本上，我想要所选文本的样式。假设，我有一个全文“Hello world to sample application”放在 div 中。然后我用粗体写了一个“你好”。我想检索单词“Hello”单词的样式，而不是整个 div。有一种方法“getCommandValue”方法可用，但不适用于 Firefox。“getComputedStyle”方法给出对象的样式，而不是 div 中选定文本的样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:53:19.827

```
<div id='mydiv'><span id='boldword'>Hello</span> world to sample application</div> 
```

然后用jQuery fe：

```
$('#boldword').css('font-weight'); 
```

.css( *attribute* ) 为您提供属性的当前值，.css( *attribute* , *value* ) 为给定属性设置新闻值。

我希望这就是你的意思。

# python - 被动用户身份验证

> ID：12138794
> 
> 赞同：0
> 
> 时间：2012-08-27T08:47:02.800
> 
> 标签：python, algorithm, facebook-oauth

我正在用 Python2.7 编写一段代码。我想**根据他们的 Facebook 帐户比较 2 个用户**。为此，我需要用户信息，例如*喜欢、电影、音乐、书籍、笔记、权限、签到、位置等*。

我面临的问题是，并非所有用户都允许查看他们的信息的完全权限，因为我可以使用 oauth2.0，但又一次只适用于我网站的当前用户（活动用户），我怎样才能得到被动用户的上述信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:35:24.303

如果“被动”用户是您主动用户的朋友，那么您可以请求“<a href="https://developers.facebook.com/docs/authentication/permissions/#user_friends_perms" rel="nofollow">friends_ ” - 后者对所有允许此操作的字段的权限。当然，只有在朋友设置了他们的隐私设置以允许应用程序代表他们的朋友访问它们时，您才会获得这些信息。

除此之外，唯一的另一种方法是让您的主动用户向被动用户发送[请求](https://developers.facebook.com/docs/requests/)，邀请他们也使用您的应用程序。当他们接受时，您也可以向他们请求用户级别的相同权限，然后开始比较。

出于隐私原因，没有其他方法 - 这是一件好事。

# php - 为什么使用 json 的 javascript 库选择 [ { } , { } ] 结构

> ID：12138795
> 
> 赞同：4
> 
> 时间：2012-08-27T08:47:14.363
> 
> 标签：php, json, javascript

我一直在使用一些 javascript 库，我注意到它们中的大多数都以这种形式输入：`[{"foo": "bar", "12": "true"}]`

根据[json.org：](http://json.org)

![在此处输入图像描述](../Images/4428506a3da2ca6543b84f41022077ea.png)

所以我们在一个数组中发送一个对象。

所以我有一个两部分的问题：

**第 1 部分：** 为什么不发送一个看起来更简单的对象或数组？

**第2 部分：** 用 Php 创建这样的 Json 的最佳方法是什么？

这是一种工作方法，但我发现它有点难看，因为它不适用于多维数组：

```
 <?php 
$object[0] = array("foo" => "bar", 12 => true); 

$encoded_object = json_encode($object); 
?> 
```

输出：

`{"1": {"foo": "bar", "12": "true"}}`

```
<?php $encoded = json_encode(array_values($object)); ?> 
```

输出：

`[{"foo": "bar", "12": "true"}]`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T08:53:14.607

1.  *因为这是传递多个对象*的逻辑方式。它可能是为了促进这一点：

    ```
    [{"foo" : "bar", "12" : "true"}, {"foo" : "baz", "12" : "false"}] 
    ```

2.  在 PHP 中使用相同的逻辑结构：

    ```
    echo json_encode(array(array("foo" => "bar", "12" => "true"))); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:49:44.500

数组用作支持多个参数的便捷方式。在这种情况下，第一个参数是一个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:31:19.843

问题一：

JSON 只是将对象和/或数组表示为字符串的一种方式。如果您将数组或对象作为字符串，则将其发送到不同的地方会容易得多，例如发送到客户端的浏览器。不同的语言以不同的方式处理数组和对象。所以如果你在php中有一个数组，例如，你不能将它直接发送给客户端，因为它是只有php才能理解的格式。这就是 JSON 有用的原因。它是一种将数组或对象转换为许多不同语言都可以理解的字符串的方法。

问题二：

要输出一个像上面这样的对象数组，你可以这样做：

```
<?php
    //create a test array of objects
    $testarray = array();
    $testarray[] = json_decode('{"type":"apple", "number":4, "price":5}');
    $testarray[] = json_decode('{"type":"orange", "number":3, "price":8}');
    $testarray[] = json_decode('{"type":"banana", "number":8, "price":3}');
    $testarray[] = json_decode('{"type":"coconut", "number":2, "price":9}');

    $arraycount = count($testarray);

    echo("[");

    $i = 1;
    foreach($testarray as $object)
    {
        echo(json_encode($object));
        if($i !== $arraycount)
        {
            echo(",");
        }

        $i += 1;
    }

    echo("]");
?> 
```

这将获取一组对象并遍历它们。在遍历它们之前，我们输出左方括号。

然后，对于数组中的每个对象，我们将其编码为 JSON 并在每个对象后面加上一个逗号。我们计算迭代次数，这样我们就不会在最后输出逗号。

# powershell - PowerShell 管道

> ID：12138799
> 
> 赞同：2
> 
> 时间：2012-08-27T08:47:30.960
> 
> 标签：powershell, powershell-3.0

如果我运行以下命令：

```
Measure-Command -Expression {gci -Path C:\ -Recurse -ea SilentlyContinue | where Extension -eq ".txt"}
Measure-Command -Expression {gci -Path C:\ -Filter *.txt -Recurse -ea SilentlyContinue} 
```

第二个表达式总是比第一个更快，我猜是因为它不必使用管道。

我想也许在 Pipeline 方法中，PowerShell 递归了我的驱动器并将一组对象传递给 where 子句，这将不得不再次遍历这些项目，但我排除了这一点，因为如果你运行第一个表达式，你可以看到它返回输出，因为它是递归的。那么为什么 Pipeline 方法比较慢呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T09:06:41.300

使用`Where-Object`总是比使用左侧命令的内置参数慢。您首先将所有对象带到您的外壳，然后才开始过滤它们（客户端过滤）。

关于 -Filter 参数，它的工作速度更快，因为它在提供程序级别（服务器端过滤）执行，一旦访问对象就会被检查，并且您只取回与您的条件匹配的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:00:42.597

谢伊的回答是完全正确的。不过，我想谈谈你的次要问题。以下是管道中正在发生的事情：

```
gci -Path C:\ -Recurse -ea SilentlyContinue | where Extension -eq ".txt" 
```

`gci`将开始搜索位于或下的文件和目录`c:\`，任何扩展名。当它找到每个结果时，将**一个**结果传递给`Where-Object`，如果扩展名不是 ，它将丢弃它`.txt`。如果扩展名是`.txt`，则该对象在管道中传递，并输出到控制台（或变量，或其他）。然后`gci`将继续搜索，当它找到下一个文件时，它将传递它，等等。因此，尽管搜索整个驱动​​器可能需要几分钟，但`c:\`您几乎可以立即获得部分结果，因为管道正在运行一次一个对象。

没有**发生**的是`gci`一次进行全盘搜索，然后`Where-Object`仅在完成时才将完整的结果集传递给它。

# php - 将经度、纬度和电话号码发送到 mysql 数据库 - Android

> ID：12138801
> 
> 赞同：0
> 
> 时间：2012-08-27T08:47:42.643
> 
> 标签：php, android, mysql, latitude-longitude

我制作了一个已经收到经度纬度和电话号码的应用程序。

我需要将这些存储在 mysql 数据库中，我没有使用 mysql 和 php 的经验。

任何人都可以帮助我，也许有一些教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:50:19.363

您需要在服务器上创建 MySql 数据库并调用 Web 服务以使用 Php 在服务器上添加该数据。

看看这个教程。在这里您可以找到如何使用 php Web 服务发送和接收数据。

[http://www.codeproject.com/Articles/267023/Send-and-receive-json-between-android-and-php](http://www.codeproject.com/Articles/267023/Send-and-receive-json-between-android-and-php)

# asp.net - 如何更改从站点地图读取项目的 asp:menu 的字体颜色

> ID：12138802
> 
> 赞同：1
> 
> 时间：2012-08-27T08:48:00.273
> 
> 标签：asp.net, css, aspmenu

如何更改我的 asp:menu 的字体颜色以从站点地图中读取项目？
ccsClass 没用！
这是我的代码：

```
<asp:Menu ID="Menu1" runat="server" DataSourceID="SiteMapDataSource1"  
StaticDisplayLevels="2" CssClass="MyMenu"  
StaticSubMenuIndent="18px"   
DynamicMenuItemStyle-BackColor="#C0C0BC"  
DynamicHoverStyle-BackColor="#B3B3B3"  
StaticHoverStyle-BackColor="#666666"  
StaticHoverStyle-ForeColor="#d9d9d6"  
StaticMenuItemStyle-VerticalPadding="1px" StaticPopOutImageUrl="~/Images/control_rewind_blue.png" > 
```

这是 ccsClass：

```
.MyMenu{color:White; font-family:Tahoma; font-size:medium;} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:59:18.693

您可以通过前景色添加颜色，也可以添加样式

```
 <asp:Menu ID="Menu1" ForeColor="#003399" style="left: 40px; position: relative; top: 6px" runat="server" DataSourceID="SiteMapDataSource1"  
        StaticDisplayLevels="2" CssClass="MyMenu"  
        StaticSubMenuIndent="18px"   
        DynamicMenuItemStyle-BackColor="#C0C0BC"  
        DynamicHoverStyle-BackColor="#B3B3B3"  
        StaticHoverStyle-BackColor="#666666"  
        StaticHoverStyle-ForeColor="#d9d9d6"  
        StaticMenuItemStyle-VerticalPadding="1px" StaticPopOutImageUrl="~/Images/control_rewind_blue.png" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:57:43.820

为每个操作定义一个类，`asp:Menu`如下所示：

```
<asp:Menu ID="AspMenu" runat="server">

<StaticMenuStyle CssClass="VerticalMenuli" />
<StaticMenuItemStyle CssClass="VerticalMenuItem" />
<StaticHoverStyle CssClass="VerticalMenuHover" /> 
<StaticSelectedStyle CssClass="VerticalMenuSelectedItem" />

<DynamicMenuStyle CssClass="VerticalMenuSubMenu" />     
<DynamicMenuItemStyle CssClass="VerticalMenuSubMenuItem" />
<DynamicHoverStyle CssClass="VerticalSubMenuHover" /> 
<DynamicSelectedStyle CssClass="SubMenuSelected"/> 
```

现在您可以在定义的类中为任何子菜单或链接提供格式。

# android - 使用从 web 服务加载的两个列表同步查看寻呼机指示器

> ID：12138803
> 
> 赞同：0
> 
> 时间：2012-08-27T08:48:07.223
> 
> 标签：android, listview, view, pager

现在我使用 TabActivity 来显示我的两个列表，但现在我想使用带有页面指示器的 swype，我不知道如何修改下面的类以使其工作。

我在这里找到了一个项目：[http](http://www.zylinc.com/blog-reader/items/viewpager-page-indicator.html) ://www.zylinc.com/blog-reader/items/viewpager-page-indicator.html课程活动是：

```
public class ViewPagerIndicatorActivity extends FragmentActivity {
PagerAdapter mPagerAdapter;
ViewPager  mViewPager;
ViewPagerIndicator mIndicator;
static SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd");
static SimpleDateFormat readableDateFormat = new SimpleDateFormat("yyyy - MM/dd");

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Create our custom adapter to supply pages to the viewpager.
    mPagerAdapter = new PagerAdapter(getSupportFragmentManager());
    mViewPager = (ViewPager)findViewById(R.id.pager);
    mViewPager.setAdapter(mPagerAdapter);

    // Start at a custom position
    mViewPager.setCurrentItem(0);

    // Find the indicator from the layout
    mIndicator = (ViewPagerIndicator)findViewById(R.id.indicator);

    // Set the indicator as the pageChangeListener
    mViewPager.setOnPageChangeListener(mIndicator);

    // Initialize the indicator. We need some information here:
    // * What page do we start on.
    // * How many pages are there in total
    // * A callback to get page titles
    mIndicator.init(0, mPagerAdapter.getCount(), mPagerAdapter);
    Resources res = getResources();
    Drawable prev = res.getDrawable(R.drawable.indicator_prev_arrow);
    Drawable next = res.getDrawable(R.drawable.indicator_next_arrow);
    mIndicator.setFocusedTextColor(new int[]{255, 0, 0});

    // Set images for previous and next arrows.
    mIndicator.setArrows(prev, next);

    mIndicator.setOnClickListener(new OnIndicatorClickListener());
}

class OnIndicatorClickListener implements ViewPagerIndicator.OnClickListener{
    @Override
    public void onCurrentClicked(View v) {
        Toast.makeText(ViewPagerIndicatorActivity.this, "Hello", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onNextClicked(View v) {
        mViewPager.setCurrentItem(Math.min(mPagerAdapter.getCount() - 1, mIndicator.getCurrentPosition() + 1));
    }

    @Override
    public void onPreviousClicked(View v) {
        mViewPager.setCurrentItem(Math.max(0, mIndicator.getCurrentPosition() - 1));
    }

}

class PagerAdapter extends FragmentPagerAdapter implements ViewPagerIndicator.PageInfoProvider{
    public PagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int pos) {
        Calendar cal = Calendar.getInstance();
        cal.add(Calendar.DAY_OF_MONTH, pos - getCount() / 2);
        return ItemFragment.newInstance(cal.getTime());
    }

    @Override
    public int getCount() {
        return 20;
    }

    @Override
    public String getTitle(int pos){
        Calendar cal = Calendar.getInstance();
        cal.add(Calendar.DAY_OF_MONTH, pos - getCount() / 2);
        return readableDateFormat.format(cal.getTime());
    }
}

public static class ItemFragment extends ListFragment{
    Date date;

    static ItemFragment newInstance(Date date) {
        ItemFragment f = new ItemFragment();

        // Supply num input as an argument.
        Bundle args = new Bundle();

        args.putString("date", sdf.format(date));
        f.setArguments(args);

        return f;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        try {
            this.date = sdf.parse(getArguments().getString("date"));
        } catch (ParseException e) {
            e.printStackTrace();
        }
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.date_fragment, container, false);
        View tv = v.findViewById(R.id.text);
        ((TextView)tv).setText(readableDateFormat.format(date));
        return v;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(getActivity(),
        android.R.layout.simple_list_item_1, list));
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        Log.i("FragmentList", "Item clicked: " + id);
    }
}

public static final String[] list = new String[]{"France", "London", "Sweden", "Denmark", "Germany", "Finland", "Thailand", "Taiwan", "USA", "Norway", "Denmark (again)", "Lithuania", "Bosnia", "Russia", "Vietnam", "Australia"}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:06:47.307

您必须修改的部分在 PagerAdapter (public Fragment getItem(int pos)) 中：

```
@Override
public Fragment getItem(int pos) {
  Calendar cal = Calendar.getInstance();
  cal.add(Calendar.DAY_OF_MONTH, pos - getCount() / 2);
  return ItemFragment.newInstance(cal.getTime());
} 
```

正是这种方法返回片段以显示在您的 ViewPager 上

因此，您必须使用[ListFragment 扩展](http://developer.android.com/reference/android/app/ListFragment.html)您的 2 ListView并在此处返回

对于指标，如果您想要复古兼容性，我向您推荐这个库，实现起来非常简单：http: [//viewpagerindicator.com/](http://viewpagerindicator.com/)

# javascript - 如何将字符串转换为特定分隔符下的数组

> ID：12138804
> 
> 赞同：1
> 
> 时间：2012-08-27T08:48:12.230
> 
> 标签：javascript

我在javascript中有这个字符串：

```
var st="ab,cd,ef,gh"; 
```

如何将此字符串作为长度等于 4 的数组示例：

```
st should be like this : [ab cd ef gh] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T08:49:34.670

利用`split(..)`

```
st.split(",") 
```

输出：

```
["ab", "cd", "ef", "gh"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:52:20.263

这将为您提供一个包含四个字符串元素的数组

```
 var st="ab,cd,ef,gh";
        string[] stArray = st.Split(','); 
```

所以例如

```
 stArray[1] 
```

将返回“cd”

# java - ORA-01000: 超出最大打开游标 - java 代码失败

> ID：12138806
> 
> 赞同：2
> 
> 时间：2012-08-27T08:48:22.250
> 
> 标签：java, oracle11g, ora-01000

我在我的 java 代码中使用循环将行插入到我的数据库中。然后，我得到了错误 -

```
ORA-01000: maximum open cursors exceeded 
```

我搜索了一下，发现在添加每一行后关闭我准备好的语句或语句有助于消除错误。

但是，我需要明白——

1.  什么是游标？
2.  我可以更改游标的数量吗？如果是，这是一件好事吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T09:05:05.807

[此链接](http://www.orafaq.com/wiki/Cursor)将向您解释什么是游标以及它是如何工作的。

是的，您可以使用以下语句更改 Oracle 上的最大游标数： `ALTER SYSTEM SET OPEN_CURSORS=1337 SID='*' SCOPE=BOTH;`

但是，如果真的需要，您应该这样做。您真正应该做的是正确处理结果集和语句，并确保始终关闭它们。这通常应在`try/finally`声明中完成。

如果您忘记关闭这些，打开的游标会泄漏，直到您达到最大限制（很快就会出现），并且后续请求将无法工作（您就是这种情况）。

您可以编辑您的问题并添加一些代码，以便我们可以向您展示一些关于您可以如何以及在何处正确关闭结果集和语句的提示。

这是典型用法：

```
Statement stmt;
try {
   stmt = con.createStatement();
   // do something with the statement
} catch (SQLException e) {
   LOG.error("SQL error", e);
} finally {
   try { if (stmt != null) stmt.close(); } catch (SQLException se) { LOG.error("Error closing the statement", se); }
   // if using Apache utils you could do
   // IOUtils.closeQuietly(stmt);
} 
```

结果集也是如此。根据您使用的 Java 版本，您可以使用 try-with-resources 习惯用法。

```
try (Statement stmt = con.createStatement()) {
   // do something with the statement
} catch(SQLException e) {
   LOG.error("SQL error", e);
} 
```

Java 将负责关闭块末尾的语句`try`，因为 Statement 实现了`AutoCloseable`接口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T09:05:41.137

这应该只从应用程序处理。它与数据库无关。某些语句没有正确关闭。即使open_cursors=10000也会出现此错误。在打开每个语句之前，请检查它是否已经保持打开状态.Similarly 尝试关闭每条语句。有关更多详细信息，请参阅此[链接](http://www.zugiart.com/2010/08/handling-oracle-cursors-in-jdbc/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:13:33.233

当您运行语句的 executeQuery 方法时，您正在创建一个游标。游标是在数据库中定义的，可以通过jdbc来控制。您可以从以下网址找到更多信息。 [游标维基](http://en.wikipedia.org/wiki/Cursor_%28databases%29)

# c# - c#对象到xml

> ID：12138808
> 
> 赞同：1
> 
> 时间：2012-08-27T08:48:26.763
> 
> 标签：c#, xml, serialization

关于对象序列化。是否有可能

1.  根据它们的 ASCII 值（十六进制值）转换一些字符？像 TM 符号到 &#xnum;?

2.  将下面的 5 个字符转换为：

    ```
    & - &amp,
    ' - &apos;
    " - &quot;
    < - &lt;
    > - &gt; 
    ```

3.  最后，如果有 & 价值。是否可以避免 '& 放大器'？（没有空间）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:01:20.463

使用 HTML 编码，但不适用于 TM。它适用于 HTML 中的[保留字符](http://www.w3schools.com/tags/ref_entities.asp)。

```
System.Web.HttpUtility.HtmlEncode("&") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:06:05.367

请参考此链接以获得答案

[http://support.microsoft.com/kb/316063](http://support.microsoft.com/kb/316063)

在您的 XML 中使用 CDATA 也适用在顶部添加此标头
< xml version="1.0" encoding="ISO-8859-1" />

# c# - asp.net注销中浏览器问题的后退按钮

> ID：12138812
> 
> 赞同：0
> 
> 时间：2012-08-27T08:48:56.510
> 
> 标签：c#, asp.net

当我点击注销按钮时，点击浏览器用户的后退按钮后一切都会好起来的。这也很好。（但是，没有事件点击母版页；工作很好）

并且，任何事件都像搜索项一样被点击（我的意思是使用选择查询或通过按钮点击获取数据）

`Session.clear();`注销按钮工作不好...它像普通页面一样工作；即当我单击注销时...使用&重定向到主页`Redirect.Response("page.aspx")`

使用此代码，在母版页 page_load 后面：

```
if (!IsPostBack)
        {

            if (Session["name"] == null)
            {

                Response.Redirect("Default.aspx");
            }

            else
            {

                Response.ClearHeaders();

                Response.AddHeader("Cache-Control", "no-cache, no-store, max-age=0, must-revalidate");

                Response.AddHeader("Pragma", "no-cache");

                Label1.Text = "WELCOME" + " " + Session["name"];

            } 
```

现在我想在不使用 javascript 的情况下禁用后退按钮，因为原因是当有人停止浏览器的 javascript ....同样的问题发生..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:02:26.067

```
private void Page_Load(object sender, EventArgs e)
    {
        // Put user code to initialize the page here
        if (Session["SessionId"] == null)
        {
            Response.Redirect("Login.aspx"); 
        }

        Response.Buffer=true;
        Response.ExpiresAbsolute=DateTime.Now.AddDays(-1d);
        Response.Expires = -1500;
        Response.CacheControl ="no-cache";

    } 
```

# grails - 在开发中更改 Grails 域类时如何避免 DB 丢失

> ID：12138815
> 
> 赞同：3
> 
> 时间：2012-08-27T08:49:14.800
> 
> 标签：grails, grails-orm, grails-domain-class, grails-2.0

Grails 2.0 的优点之一是您可以在开发中更改域类，而无需重新启动应用程序服务器。这可行，但是当我更改域类时，我会丢失所有引导数据，这基本上没有达到目的。我正在使用默认的 h2 数据库。

解决这个问题的最佳方法是什么？我必须去像 Postgres 这样的外部数据库吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T12:41:16.473

新创建的 Grails 2 应用程序中的默认设置`DataSource.groovy`有

```
environments {
    development {
        dataSource {
            dbCreate = "create-drop" // one of 'create', 'create-drop', 'update', 'validate', ''
            url = "jdbc:h2:mem:devDb;MVCC=TRUE;LOCK_TIMEOUT=10000"
        }
    } 
```

这`create-drop`意味着只要应用程序重新启动，数据库就会从头开始重新创建。如果您想要一个在重新启动后仍然存在的数据库，请将其更改为类似

```
dataSource {
    dbCreate = "update" // one of 'create', 'create-drop', 'update', 'validate', ''
    url = "jdbc:h2:devDb;MVCC=TRUE;LOCK_TIMEOUT=10000"
} 
```

（即更改`create-drop`为并从中`update`删除）。但是请注意，并非您对域类所做的所有更改都可以反映在可以应用的有限架构更改中。添加属性应该没问题，但删除属性或更改影响模式生成的约束可能需要您删除并重新创建数据库（停止应用程序，删除 devDb 文件并重新启动它）。`:mem``url``update`

# c# - 当 GridView 的标题未知时，如何在 GridView 的每个单元格中都有 DropDownList

> ID：12138816
> 
> 赞同：2
> 
> 时间：2012-08-27T08:49:18.390
> 
> 标签：c#, asp.net

每次运行程序时，我都有一个`GridView`, 和 更改的标题。`GridView`我想要`DropDownList`在我的每个单元格中，`GridView`如附图所示。

根据图片：`DropDownList`每个标题下的值是= {1,2,3,4,5,6,7,8,9,10}。

假设我从`DropDownList`KITCHEN2 中选择值 2，当我点击 SAVE 时，我希望在 Kitchen2 的数据库中更新 2 个灯（Lamp1，Lamp2）（假设我在我的 GridView 的第一列中选​​择了 Lamp_profile）。同样，我希望`GridView`当我点击 SAVE 时，我选择的所有值都立即发生此事件。

因此 my`Gridview`只是一种提供输入的方式，而不是绑定到任何数据源。

我如何实现它。任何帮助都会很有用。谢谢你。

![在此处输入图像描述](../Images/d662d6072fe9c6403084ae608930f732.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:55:56.483

```
You can try with TemplateField 

    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" OnRowDataBound="GridView1_RowDataBound">
    <Columns>
      <asp:TemplateField HeaderText="">
       <ItemTemplate>
         <asp:DropDownList ID="DropDownList1" runat="server">
         </asp:DropDownList>
        </ItemTemplate>
       </asp:TemplateField>

       <asp:TemplateField HeaderText="Kitchen1">
           <ItemTemplate>
               <asp:DropDownList ID="Kitchen1_DropDownList" runat="server"></asp:DropDownList>
            </ItemTemplate>
      </asp:TemplateField>

<asp:TemplateField HeaderText="Kitchen2">
           <ItemTemplate>
               <asp:DropDownList ID="Kitchen2_DropDownList" runat="server"></asp:DropDownList>
            </ItemTemplate>
      </asp:TemplateField>

<asp:TemplateField HeaderText="Kitchen3">
           <ItemTemplate>
               <asp:DropDownList ID="Kitchen3_DropDownList" runat="server"></asp:DropDownList>
            </ItemTemplate>
      </asp:TemplateField>

<asp:TemplateField HeaderText="Kitchen4">
           <ItemTemplate>
               <asp:DropDownList ID="Kitchen4_DropDownList" runat="server"></asp:DropDownList>
            </ItemTemplate>
      </asp:TemplateField>

    </Columns>
    </asp:GridView>

You must know how bind your data in code behind (You can use Eval.DataBinder)

    protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
           DropDownList ddl = (DropDownList)e.Row.FindControl("DropDownList1");
           DropDownList Kitchen1DropDownList = (DropDownList)e.Row.FindControl("Kitchen1_DropDownList");
              ....
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:56:18.427

您可以使用`TemplateFields`DropDownLists。

```
<asp:GridView ID="GridView1" AutoGenerateColumns="false" runat="server" >
        <Columns>
            <asp:TemplateField HeaderText="Col1">
               <ItemTemplate>
                   <asp:DropDownList ID="Ddl1" runat="server"></asp:DropDownList>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Col2">
               <ItemTemplate>
                   <asp:DropDownList ID="Ddl2" runat="server"></asp:DropDownList>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Col3">
               <ItemTemplate>
                   <asp:DropDownList ID="Ddl3" runat="server"></asp:DropDownList>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

# jquery - 用于一长串相同功能的 Jquery 速记代码

> ID：12138817
> 
> 赞同：3
> 
> 时间：2012-08-27T08:49:27.180
> 
> 标签：jquery

我有一个如下所示的 HTML 结构：

```
List
<ol id="years">
<li class="2011">2011</li>
<li class="2012">2012></li>
<li class="2013">2013></li>
</ol>

News:
<div class="news 2011">Some News here</div>
<div class="news 2012">Some News here</div>
<div class="news 2013">Some News here</div> 
```

我需要下面代码的简写代码（它可以工作，但我希望它是自动化的，而不是手动的）：

```
$('.2011').click(function() {    
    $(".news").show().not('.2011').hide()
 return false;
        });

$('.2012').click(function() {    
    $(".news").show().not('.2012').hide()
 return false;
        });

$('.2013').click(function() {    
    $(".news").show().not('.2013').hide()
 return false;
        }); 
```

我尝试的是：

```
for(i=2011; i<= 2020; i++){

$('.'+i+'').click(function() {    
    $(".news").show().not('.'+i+'').hide();
 return false;
        });
} 
```

当我点击一个 li 项目时，它只是隐藏了所有内容，所以这不是预期的结果。

任何帮助表示赞赏。谢谢你的时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T08:54:35.600

```
$('#years li').click(function(){
    $('.news').show().not('.' + $(this).attr('class')).hide();
    return false;
}); 
```

更好的方法可能是将年份存储在数据属性中，例如：

```
<ol id="years">
    <li class="2011" data-year="2011">2011</li>
    <li class="2012" data-year="2012">2012></li>
    <li class="2013" data-year="2013">2013></li>
</ol> 
```

然后去：

```
$('#years li').click(function(){
    $('.news').show().not('.' + $(this).data('year')).hide();
    return false;
}); 
```

然后，如果您将其他类添加到 li 项目，则可以避免出现问题。

# asp.net-mvc - ASP.NET MVC 中的计时器事件

> ID：12138819
> 
> 赞同：1
> 
> 时间：2012-08-27T08:49:37.290
> 
> 标签：asp.net-mvc, events

**问题**：用户对域中的某个实体进行操作。最后一个更改其状态，以便用户重复接收`e-mail notifications`（使用 smtp 服务器）直到给定时间。
所以我需要以某种方式触发一个事件。

有哪些替代方法可以做到这一点？我知道`ASP.NET MVC`框架中没有事件。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:56:29.687

您可以使用我的 Inversion Of Control 容器，它内置了对进程内域事件的支持：

**订阅**

订阅很容易。简单地让任何类实现 IHandlerOf：

```
[Component]
public class ReplyEmailNotification : IHandlerOf<ReplyPosted>
{
    ISmtpClient _client;
    IUserQueries _userQueries;

    public ReplyEmailNotification(ISmtpClient client, IUserQueries userQueries)
    {
        _client = client;
        _userQueries = userQueries;
    }

    public void Invoke(ReplyPosted e)
    {
        var user = _userQueries.Get(e.PosterId);
        _client.Send(new MailMessage(user.Email, "bla bla"));
    }
} 
```

**调度**

使用 DomainEvent 类调度领域事件。实际的领域事件可以是任何类，没有限制。但是，我确实建议您将它们视为 DTO。

```
public class UserCreated
{
    public UserCreated(string id, string displayName)
    {
    }
}

public class UserService
{
    public void Create(string displayName)
    {
        //create user
        // [...]

        // fire the event.
        DomainEvent.Publish(new UserCreated(user.Id, user.DisplayName));
    }
} 
```

代码来自我的文章： http: [//www.codeproject.com/Articles/440665/Having-fun-with-Griffin-Container](http://www.codeproject.com/Articles/440665/Having-fun-with-Griffin-Container)

ASP.NET MVC3 安装：

1.  使用包管理器控制台：`install-package griffin.container.mvc3`
2.  请按照以下说明操作：http: [//griffinframework.net/docs/container/mvc3/](http://griffinframework.net/docs/container/mvc3/)

# model-view-controller - MVC（模型视图控制器）模式的简单解释

> ID：12138820
> 
> 赞同：8
> 
> 时间：2012-08-27T08:49:43.000
> 
> 标签：model-view-controller

我将如何向没有任何编程经验的人解释模型视图控制器 (MVC) 模式？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-27T09:02:51.340

如果我向不是程序员的祖母解释这一点，我会用*糖*、*一杯咖啡*和*她自己*来解释：

![](../Images/4bcee230e2a01d66e7a2e060e00125ad.png)

（免责声明：这不是我祖母的真实照片！我*不是*Microsoft Paint 的完美画家！）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T09:13:57.847

假设这个人知道什么是计算机以及如何使用浏览器，我会尝试这样的事情：

MVC代表`Model`和。它们中的每一个都在系统中发挥作用。`View``Controller`

*   从获取`Model` **请求**`Controller`并发回**数据**。
*   从`View`获取数据`Controller`并**处理渲染**。
*   `Controller`有更大的作用 ：
    *   它**向 发送请求**，`Model`取回数据并将适当的数据传递给`View`。
    *   它获取并解释来自 MVC 模式（客户端请求）之外的请求。

否则，请尝试一个说明性的现实生活示例：

*   你`Model`是一名仓库经理。
*   你`View`是推销员。
*   你`Controller`是总经理。

整个 MVC 解决方案就是他们工作的公司。

如果您自己了解 MVC 模式，我相信您可以从中做出可以理解的解释。

# javascript - 防止复选框在单击时取消选中（不禁用或只读）

> ID：12138821
> 
> 赞同：25
> 
> 时间：2012-08-27T08:49:42.733
> 
> 标签：javascript, jquery, events, checkbox

我正在使用一个复选框，我希望人们能够选中/取消选中它。但是，当他们取消选中它时，我正在使用 jQueryUI 模式弹出窗口来确认他们确实想要这样做。因此，他们可以单击`OK`或`Cancel`，并且我希望只有当他们单击时才取消选中我的复选框`OK`。
这就是为什么我想捕获 uncheck 事件以防止在视觉上未选中复选框，并在用户碰巧点击时以编程方式自行取消选中它`OK`。

我怎么能那样做？

PS：我知道如果用户点击后我可以重新检查它，`Cancel`但这会触发`check`我不想要的事件。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-27T08:56:41.357

```
$("#checkboxID").on("click", function (e) {
    var checkbox = $(this);
    if (checkbox.is(":checked")) {
        // do the confirmation thing here
        e.preventDefault();
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-27T09:07:49.893

就像是：

```
$("#test").on('change', function() {
    this.checked=!this.checked?!confirm('Really uncheck this one ?'):true;
});
​ 
```

[**小提琴**](http://jsfiddle.net/4gAH7/3/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-11-27T04:09:27.267

纯 CSS 解决方案

选择复选框，例如 -

```
input[type="checkbox"] {
    pointer-events: none;
} 
```

效果很好，现在您可以在您选择的任何元素点击上切换您的复选框。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-14T11:56:04.190

使用 HTML disabled 属性怎么样？

```
<input type="checkbox" name="my_name" value="my_value" disabled> My value<br> 
```

链接： [https ://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/disabled](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/disabled)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-25T17:17:38.260

```
 $("#checkboxID").click(function(e) { 
      var checkbox = $(this);
      if (checkbox.is(":checked")) {
       //check it 
      } else {
       // prevent from being unchecked
        this.checked=!this.checked;
      }
   }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-27T08:59:27.833

```
$("#yourCheckBoxId").on('change',function(e){
    e.preventDefault();
    $("#yourPopDiv").popup();
}); 
```

`preventDefault()`将禁用您的默认行为`input[type="checkbox"]`

在你的弹出 div 上

```
$("#ok").on('click',function(){
    $("#yourCheckBoxId").attr("checked",true);
}); 
```

# php - 如何制作具有相同名称的 PHP stdClass 对象？

> ID：12138828
> 
> 赞同：7
> 
> 时间：2012-08-27T08:50:04.527
> 
> 标签：php, object, stdclass

我正在使用一个 API，它给了我一个看起来像这样的 stdClass 对象（实际数据被替换）

```
"data": [
    {
      "type": "image",
      "comments": {
        "data": [
          {
            "created_time": "1346054211",
            "text": "Omg haha that's a lot of squats",
            "from": {},
            "id": "267044541287419185"
          },
          {
            "created_time": "1346054328",
            "text": "Fit body",
            "from": {},
            "id": "267045517536841021"
          },
        ]
      },
      "created_time": "1346049912",
    }, 
```

如何创建一个像“评论”这样的 stdClass 对象，它有多个子字段都具有相同的名称但不同的数据。当我尝试创建一个看起来像这样的 stdClass 时，我的 Comments 部分将只包含 1 个输入，这是 while 循环中的最后一个输入。因此，它不是应用到底部，而是用新数据替换旧数据。如何解决这个问题？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-27T08:58:12.797

`"comments"`是一个*对象*，其键`"data"`是**对象数组**。您不能在任何语言、JSON、PHP`stdClass`或其他语言中重复使用相同的密钥。你想制作一个类似对象的*数组*。

```
$comments = new stdClass;
$comments->data = array();

for ($i = 0; $i < 2; $i++) {
    $comment = new stdClass;
    $comment->text = 'Lorem ipsum...';
    ...
    $comments->data[] = $comment;
}

var_dump($comments); 
```

# .htaccess - htaccess 用户配置文件文件夹

> ID：12138829
> 
> 赞同：0
> 
> 时间：2012-08-27T08:50:10.380
> 
> 标签：.htaccess, mod-rewrite

在我的网站上有一个用户配置文件，它在 php.ini 中。如果您在哪里写 http://www.youdomain.com/user.php?id=[user id]。它显示带有 id 的用户个人资料。

htaccess 中有没有一种方法，如果写入 http://www.youdomain.com/users/[user id]，它将显示页面 http://www.youdomain.com?id=[user id]。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:53:13.293

```
$('.Nav a').each(function(e) {
    var href = e.attr("href");
    if (href === window.location.href) {
        alert(href);
    }
}); 
```

# c# - C# 后台工作者

> ID：12138830
> 
> 赞同：4
> 
> 时间：2012-08-27T08:50:15.597
> 
> 标签：c#, windows-phone-7, backgroundworker

我有一个按钮，在单击事件时，我会从网络中获取一些信息。

当我得到信息时，我会解析它并将项目添加到 ListBox。一切都很好，但是当我快速双击按钮时，似乎有两个后台工作人员正在运行，完成所有工作后，列表中的项目被复制。

我想这样做，如果您单击按钮并且获取信息的过程正在进行中，则该线程正在停止，并且只有在第一个工作完成后，第二个工作才开始。
是的，我知道 AutoResetEvent，但是当我使用它时，它只帮了我一次，而且再也没有了。我无法实施这种情况，希望您能帮助我！

现在我什至尝试简化但没有成功:(：我添加了一个标志字段（RefreshDialogs）（默认为false），当用户点击按钮时，如果标志为真（这意味着工作正在做），什么都没有做，但是当flag字段设置为false时，一切都很好，我们开始一个新的进程。
当后台工作完成时，我将字段标志更改为false（这意味着用户可以运行一个新的进程）。

```
 private void Message_Refresh_Click(object sender, EventArgs e)
    {
        if (!RefreshDialogs)
        {
            RefreshDialogs = true;
            if (threadBackgroundDialogs.WorkerSupportsCancellation)
            {
                threadBackgroundDialogs.CancelAsync();
            }
            if (!threadBackgroundDialogs.IsBusy)
            {
                downloadedDialogs = 0;
                threadBackgroundDialogs = new BackgroundWorker();
                threadBackgroundDialogs.WorkerSupportsCancellation = true;
                threadBackgroundDialogs.DoWork += LoadDialogs;
                threadBackgroundDialogs.RunWorkerCompleted += ProcessCompleted;
                threadBackgroundDialogs.RunWorkerAsync();
            }
        }
    }
    void ProcessCompleted(object sender,  RunWorkerCompletedEventArgs e)
    {
        RefreshDialogs = false;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T08:56:22.230

所以你想在第一个进程运行时保持第二个进程运行，但它们不应该互相干扰？第一个完成后，第二个继续？

粗鲁方式：While循环：

```
 if (!RefreshDialogs)
    {
        RefreshDialogs = true; 
```

这变成：

```
 while(RefreshDialogs)
    {
    }
        RefreshDialogs = true; 
```

将其设置为 false 后，第二个进程将立即跳出。（请注意，这是非常低效的，因为两个进程都将一直运行，我很确定第二个进程会阻塞第一个进程，但现在多任务处理不应该，如果它阻塞使用 Dispatcher.Thread）

优雅的方式：使用信号量

[http://msdn.microsoft.com/de-de/library/system.threading.semaphore%28v=vs.80%29.aspx](http://msdn.microsoft.com/de-de/library/system.threading.semaphore%28v=vs.80%29.aspx)

如果您发现不可能让两个进程同时运行，或者想要另一种方式：添加一个 Array/List/int 并且当第二个进程注意到第一个进程正在运行时，就像您的 bool 一样，增加您的 Added 变量，并在进程结束时，重新启动新进程并减少变量：

```
 int number;

    if (!RefreshDialogs)
    {
        RefreshDialogs = true;
        your code;
        if(number > 0)
        {
          number--;
          restart process
        }
    }
    else
    {
    number++;
    } 
```

我不得不承认，我最喜欢我的最后一个建议，因为它非常有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:07:21.580

让你的线程阻塞。这很容易；

```
lock(someSharedGlobalObject)
{
  Do Work, Exit early if cancelled
} 
```

这样其他线程将等到第一个线程释放锁。它们永远不会同时执行并默默地等待，直到它们可以继续。

至于其他选择；为什么不在单击时禁用按钮并在后台工作人员完成时重新启用它。唯一的问题是这不允许取消当前线程。用户必须等待它完成。它确实使任何并发性都非常容易消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T09:17:18.847

这种方法怎么样？

创建一个请求队列或计数器，每次单击按钮时都会递增。每次计数 > 0。启动后台工作程序。当信息出现时，减少计数并检查 0。如果仍然 > 0，则重新启动工作程序。因为您的请求处理程序变得顺序。

在这种方法中，您可能会遇到两个线程连续引用计数的问题，因为您可能会使用锁定解锁条件。

我已经为我的应用程序采用了这种方法，它运行良好，希望它对你也一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T09:26:47.993

我不是 Windows Phone 专家，但我看到它支持 TPL，所以下面的代码会很好读：

```
private object syncRoot =new object();
private Task latestTask;

public void EnqueueAction(System.Action action)
{
    lock (syncRoot)
    {
        if (latestTask == null)
            latestTask = Task.Factory.StartNew(action);
        else
            latestTask = latestTask.ContinueWith(tsk => action());
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T09:13:06.697

使用可以使用信号量

```
 class TheClass
 {
    static SemaphoreSlim _sem = new SemaphoreSlim (3);

    static void Main()   
    {     
       for (int i = 1; i <= 5; i++) 
       new Thread (Enter).Start (i);   
    } 

    static void Enter (object name)   
    {     
      Console.WriteLine (name + " wants to enter");    
      _sem.Wait();     
      Console.WriteLine (name + " has entered!");               
      Thread.Sleep (1000 * (int) name );              
      Console.WriteLine (name + " is leaving");       
      _sem.Release();   } 
     }
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T12:15:25.917

我找到了解决方案并感谢@Giedrius。仅当进程结束时，当我将项目添加到列表框时，标志 RefreshingDialogs 才设置为 true。我使用这个标志的原因是当从网络获取内容的异步操作（HttpWebRequest，方法 BeginGetRequestStream）开始时，进程状态更改为完成，但是在网络操作完成后，我需要进行 UI 操作而不仅仅是它们（解析内容并将其添加到列表框）我的解决方案是：

```
 private object syncRoot = new object();
    private Task latestTask;

    public void EnqueueAction(System.Action action)
    {
        lock (syncRoot)
        {
            if (latestTask == null)
            {
                downloadedDialogs = 0;
                latestTask = Task.Factory.StartNew(action);
            }
            else if(latestTask.IsCompleted && !RefreshingDialogs)
            {
                RefreshingDialogs = true;
                downloadedDialogs = 0;
                latestTask = Task.Factory.StartNew(action);
            }
        }
    }

    private void Message_Refresh_Click(object sender, EventArgs e)
    {
        Action ac = new Action(LoadDialogs2);
        EnqueueAction(ac);
    } 
```

# javascript - 将值从函数内部传递给 JavaScript 中的参数

> ID：12138832
> 
> 赞同：1
> 
> 时间：2012-08-27T08:50:25.963
> 
> 标签：javascript, function, reference

我有一个函数可以替换字符串中的字符

```
function ratko(a) {
    var k = a.toString();
    var z = k.replace(/\,/g, '], [');
    var s = z.replace(/\./g, ', ');
    var final = "[[" + s + "]]";
    alert(final);
} 
```

我需要的是`final`像这样获取函数外部的值：

```
var outsideValue = final; 
```

编辑！！！--

函数 ratko() 从 ajax 获取它的值

success: function (data) {
if (data.success) {
alert("注意：这个月有 " + data.holidays.length + " 假期。");
praznici = data.holidays;
拉特科（普拉兹尼奇）；
}
其他 {
警报（数据。错误消息）；
}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:55:09.183

可能性一：

```
function ratko (a) {
   ...
   return final;
}

var outsideValue = ratko (...); 
```

可能性2：

```
var final;
function ratko (a) {
   // no var final declaration here
   ...
}
...
ratko (...);
// now final has the value assigned to it in the function 
```

您可以在内部范围中访问在外部范围中声明的变量，这就是您在可能性 2 中所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:57:55.347

一种选择是使用全局变量，只需在函数之外声明它。

```
var myvar = 1;
function myFunction()
   alert(myvar); // 1
} 
```

您可以在此处阅读有关[javascript 变量的](http://www.w3schools.com/js/js_variables.asp)更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:52:53.623

您在函数范围之外声明它：

```
 var finalVar;

function ratko(a) {
var k = a.toString();
var z = k.replace(/\,/g, '], [');
var s = z.replace(/./g, ', ');
 finalVar= "[[" + s + "]]";
alert(finalVar);
}

var outsideValue = finalVar; 
```

Beware`final`是 Javascript 中的保留关键字。我改变了它的名字。除此之外，请记住，Javascript 总是从上到下解析的。所以在声明它之前使用一个变量肯定会给你一个`undefined`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T09:07:20.073

你必须像这样修改你的功能代码

```
function ratko(a) {
  var k = a.toString();
  var z = k.replace(/\,/g, '], [');
  var s = z.replace(/./g, ', ');
  var final = "[[" + s + "]]";
  //alert(final); comment this code line and replace this with the code above
  return final;
} 
```

在你可以`ratko`用这个简单的代码调用你的函数之后

`var inputValue = 'simple message';`
`var parsedValue = ratko(inputValue);`

你找到`final`一个新变量的值`parsedValue`

# delphi - 如何指定外部控制台程序的窗口位置？

> ID：12138836
> 
> 赞同：12
> 
> 时间：2012-08-27T08:51:25.867
> 
> 标签：delphi, console-application

在我的 Win32 VCL 应用程序中，我使用 ShellExecute 来启动一些较小的 Delphi 控制台应用程序。有没有办法控制这些控制台窗口的位置？我想以屏幕为中心启动它们。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-27T10:13:27.967

您可以在其结构参数中使用[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)和指定窗口大小和位置。[`STARTUPINFO`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686331%28v=vs.85%29.aspx)在下面的示例函数中，您可以指定控制台窗口的大小，然后根据指定的大小以当前桌面为中心。如果成功，函数返回进程句柄，否则返回 0：

```
function RunConsoleApplication(const ACommandLine: string; AWidth,
  AHeight: Integer): THandle;
var
  CommandLine: string;
  StartupInfo: TStartupInfo;
  ProcessInformation: TProcessInformation;
begin
  Result := 0;
  FillChar(StartupInfo, SizeOf(TStartupInfo), 0);
  FillChar(ProcessInformation, SizeOf(TProcessInformation), 0);
  StartupInfo.cb := SizeOf(TStartupInfo);
  StartupInfo.dwFlags := STARTF_USESHOWWINDOW or STARTF_USEPOSITION or 
    STARTF_USESIZE;
  StartupInfo.wShowWindow := SW_SHOWNORMAL;
  StartupInfo.dwXSize := AWidth;
  StartupInfo.dwYSize := AHeight;
  StartupInfo.dwX := (Screen.DesktopWidth - StartupInfo.dwXSize) div 2;
  StartupInfo.dwY := (Screen.DesktopHeight - StartupInfo.dwYSize) div 2;
  CommandLine := ACommandLine;
  UniqueString(CommandLine);
  if CreateProcess(nil, PChar(CommandLine), nil, nil, False,
    NORMAL_PRIORITY_CLASS, nil, nil, StartupInfo, ProcessInformation)
  then
    Result := ProcessInformation.hProcess;
end; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-27T09:52:19.247

If you have control over the console application, You could set the console window position from inside the console application itself:

```
program Project1;
{$APPTYPE CONSOLE}
uses
  Windows,
  MultiMon;

function GetConsoleWindow: HWND; stdcall; external kernel32 name 'GetConsoleWindow';

procedure SetConsoleWindowPosition;
var
  ConsoleHwnd: HWND;
  R: TRect;
begin
  ConsoleHwnd := GetConsoleWindow;
  // Center the console window
  GetWindowRect(ConsoleHwnd, R);
  SetWindowPos(ConsoleHwnd, 0,
    (GetSystemMetrics(SM_CXVIRTUALSCREEN) - (R.Right - R.Left)) div 2,
    (GetSystemMetrics(SM_CYVIRTUALSCREEN) - (R.Bottom - R.Top)) div 2,
    0, 0, SWP_NOSIZE);
end;

begin
  SetConsoleWindowPosition;  
  // Other code...
  Readln;
end. 
```

If you can't recompile the console application, you could use `FindWindow('ConsoleWindowClass', '<path to the executable>')` to obtain the console window handle (the Title parameter could vary if it was set via `SetConsoleTitle`). The downside with this approach, is that the console window is seen "jumping" from it's default position to it's new position (tested with Windows XP).

# c++ - DLL 注入失败，代码为 127

> ID：12138841
> 
> 赞同：-1
> 
> 时间：2012-08-27T08:51:55.050
> 
> 标签：c++, winapi, dll, code-injection

我正在尝试做一些 dll 注入。我想我尽我所能，但不幸的是无法解决问题。我总是得到 ERROR CODE 127，这意味着 ERROR_PROC_NOT_FOUND。我正在使用 Windows 7 64 位。

```
#include <iostream>
#include <Windows.h>
#include <TlHelp32.h>

using namespace std;

char FileToInject[] = "theDll.dll";
char ProcessName[] = "calc.exe";

typedef HINSTANCE (*fpLoadLibrary)(char*);

bool InjectDLL(DWORD processId);

int main() {
    DWORD processId = NULL;

    PROCESSENTRY32 pre32 = {sizeof(PROCESSENTRY32)};
    HANDLE hProcSnap;
    cout << "BEFORECreateToolhelo32Snapshot:" << GetLastError() <<endl;
    while(!processId) {

            system("CLS");
            cout << "Searching..." << endl;
            hProcSnap = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);
            cout << "CreateToolhelo32Snapshot:" << GetLastError() <<endl;

            if(Process32First(hProcSnap, &pre32)) {

                    do {

                        if(!(strcmp(pre32.szExeFile, ProcessName))) {

                           processId = pre32.th32ProcessID;
                           break;

                        }

                    }
                    while(Process32Next(hProcSnap, &pre32));
            }
            Sleep(1000);
    }
    cout << GetLastError() <<endl;
    while(!InjectDLL(processId)) {
        cout << "DLL Injection failed" << endl;
        Sleep(1000);
    }

    cout << "DLL Injected successfully" << endl;
    getchar();
    CloseHandle(hProcSnap);

    return 0;
}

bool InjectDLL(DWORD processId) {

    HANDLE hProc;
    LPVOID paramAddr;
    cout << "START:" << GetLastError() <<endl;
    HINSTANCE hDll = LoadLibrary("KERNEL32");
    cout << "LoadLibrary:" << GetLastError() <<endl;

    fpLoadLibrary LoadLibraryAddr = (fpLoadLibrary)GetProcAddress(hDll, "LibraryLoadA");
    cout << "LoadLibraryArr:" << GetLastError() <<endl;
    hProc = OpenProcess(PROCESS_ALL_ACCESS, false, processId);
    cout << "OpenProcess:" << GetLastError() <<endl;
    char DllPath[250] = "C:\\Hacks\test.dll";

    paramAddr = VirtualAllocEx(hProc, 0, strlen(DllPath) + 1, MEM_COMMIT, PAGE_READWRITE);
    cout << "VirtualAlloxEx:" <<GetLastError() <<endl;
    bool MemoryWritten = WriteProcessMemory(hProc, paramAddr, DllPath, strlen(DllPath) + 1, NULL);
    cout << "WriteProcessMemory:" << GetLastError() <<endl;
    CreateRemoteThread(hProc, 0, 0, (LPTHREAD_START_ROUTINE)LoadLibraryAddr, paramAddr, 0, 0);
    cout << "CreateRemoteThread:" <<GetLastError() <<endl;
    CloseHandle(hProc);
    return MemoryWritten;
} 
```

输出如下：

```
Searching...
CreateToolhelp32Snapshot: 18 ERROR_NO_MORE_FILES
LoadLibrary:18 ERROR_NO_MORE_FILES
LoadLibraryArr:127 ERROR_PROC_NOT_FOUND
OpenProcess:127 ERROR_PROC_NOT_FOUND
VirtualAlloxEx:127 ERROR_PROC_NOT_FOUND
WriteProcessMemory:127 ERROR_PROC_NOT_FOUND
CreateRemoteThread:5 ACCESS DENIED
DLL Injected successfully 
```

该程序发现 calc.exe 是一个没有问题的进程，但之后出现问题。有人可以帮我吗？

谢谢，

塔马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T08:57:23.780

这是一个问题：

```
char DllPath[250] = "C:\\Hacks\test.dll"; 
```

最后一个反斜杠没有被转义。改成：

```
char DllPath[250] = "C:\\Hacks\\test.dll"; 
```

该函数被调用`LoadLibraryA()`，而不是`LibraryLoadA()`：

```
fpLoadLibrary LoadLibraryAddr =
    (fpLoadLibrary)GetProcAddress(hDll, "LibraryLoadA"); 
```

其他一些建议：

*   只检查`GetLastError()`之前的 WINAPI 函数是否失败。
*   仅当先前的 WINAPI 代码（或其他代码）成功时才继续处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:59:23.253

在

```
fpLoadLibrary LoadLibraryAddr = (fpLoadLibrary)GetProcAddress(hDll, "LibraryLoadA"); 
```

你应该解决字符串`LoadLibraryA`。这

```
OpenProcess:127 ERROR_PROC_NOT_FOUND
VirtualAlloxEx:127 ERROR_PROC_NOT_FOUND (<-- sic)
WriteProcessMemory:127 ERROR_PROC_NOT_FOUND 
```

错误是由于您正在使用而导致的，`GetLastError`即使这些功能甚至可能没有失败。因此在调用之前`GetLastError`，请确保这些函数产生错误返回值（NULL 等）。

# javascript - 多个函数 onClick() 不起作用

> ID：12138844
> 
> 赞同：2
> 
> 时间：2012-08-27T08:52:06.953
> 
> 标签：javascript

下面是我在单个按钮上用于多个 java 脚本的代码。但是当我禁用第二个时，只有任何一个在工作。请让我知道：如何更改我的代码以使其正常工作？

```
function invoke(but)  
{  
if(but==0)   
    {  
        function move(){  
        document.getElementById('tgt1').value = 
        document.getElementById('Allocation').value;  
        document.getElementById('Allocation').value="";  
        document.getElementById("Send").disabled=true;  

    }document.myform.action="Alloc_Insert.do";  
    }  
           else if(but==1)  
   {  
       document.myform.action="";  
   }  

else if(but==2){ document.myform.action="WL_Verif.do";}  
else if(but==3){ document.myform.action="Add_Query.do";}  
document.myform.submit();  
        } 
```

html如下：

```
<input type="Submit" value="Allocate" id="Send" name="submit" onClick="invoke(0);move();"/><br/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:56:32.990

请注意，“move”函数未在“invoke”函数之外声明。

然后;

或者将它们包装在一个自调用函数中：

```
onclick="(function(){ invoke(0);move(); })();" 
```

或附加事件处理程序（通常首选）

```
div.attachEventListener('click', function () { ... }); // DOM 3
div.attachEvent('click', function () { ... }); // IE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:01:17.417

您的函数以一种奇怪的方式声明。你在`move` *里面* `invoke`定义，我不认为你想要。如果你想有两个功能，放在`move` *外面*，`invoke`像这样：

```
function move(){
  document.getElementById('tgt1').value =
    document.getElementById('Allocation').value;
  document.getElementById('Allocation').value="";
  document.getElementById("Send").disabled=true;
}

function invoke(but)
{
  if(but==0)
  {
    move();
    document.myform.action="Alloc_Insert.do";
  }
  else if(but==1)
  {
    document.myform.action="";
  }
  else if(but==2){ document.myform.action="WL_Verif.do";}
  else if(but==3){ document.myform.action="Add_Query.do";}
  document.myform.submit();
} 
```

注意：在你的 HTML 中使用通常不是一个好主意`onClick`——最好把它放在你的 JavaScript 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T09:03:15.560

将按钮的名称更改为“提交”以外的其他名称

* * *

解释发生了什么：

当您将名称属性“提交”分配给按钮（或任何其他表单元素）时，可以通过以下方式访问此元素

```
document.myform.submit 
```

但是还有一个表单的内置方法：`submit()`，您也可以使用它来访问它

```
document.myform.submit 
```

现在打电话时会发生什么 `document.myform.submit()`

我会写代码有点不同，你会看到麻烦：

```
document.myform['submit']() 
```

代码不是访问内置方法，而是首先指向表单元素，然后尝试执行该方法。但是表单元素不是一种方法，它都以错误告终，脚本的其余部分（包括 move() 的调用）将不会被执行。

与“重置”相同，您永远不应该使用表单元素的内置属性/方法的名称作为表单元素的名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T09:04:08.977

我认为问题在于`move()`功能的范围。尝试`move`在调用之外定义。

```
function invoke (but) {  
    if(but==0) {
        document.myform.action="Alloc_Insert.do";
        // I don't know if you meant to call move() here or not
    }
    else if (but==2) { document.myform.action="WL_Verif.do"; } 
    else if (but==3) { document.myform.action="Add_Query.do"; }

    document.myform.submit();  
}

function move(){  
    document.getElementById('tgt1').value = 
    document.getElementById('Allocation').value;  
    document.getElementById('Allocation').value="";  
    document.getElementById("Send").disabled=true;
} 
```

此外，正确地格式化你的代码将会对它的易读性产生奇迹。

注意：Firefox 似乎很乐意执行`onClick="invoke(0);move();"`即使`move`在`invoke`. 但是 Chrome 不会执行`move`，因为它找不到它。所以一定要在多个浏览器中测试你的脚本。

# c++ - node.js 内部结构：如何找出 `process.binding('eval')` 的定义位置？

> ID：12138851
> 
> 赞同：5
> 
> 时间：2012-08-27T08:52:41.650
> 
> 标签：c++, node.js, v8, libuv

*   如何找出 node.js 的 C++ 源代码中定义了我可以访问的 JavaScript 对象的位置`process.binding('eval')`？- 我已经发现它在这种特殊情况下，但是：当我只看**一下****目录概述**`/src/node_script.cc`时，我怎么知道在哪里可以**找到**该模块？我不想单步执行所有文件以查找模块。**`/src/`**`/src/`
*   我在哪里可以找到一些关于 s 内部的深入信息`process.binding()`？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-09T22:51:58.450

我今天也在寻找同样的东西。我不能保证没有更多内容，但这就是我发现的。

src/node_extensions.h 包含一个内置模块列表，定义如下：

```
ITEM(node_module_name) 
```

其中 module_name 是模块的名称（显然）

您可以通过搜索哪个文件具有以开头的行来找出哪个文件定义了该模块

```
NODE_MODULE(node_module_name, 
```

因此，要找到为 process.bindings 定义“evals”模块的文件：

```
$ grep "NODE_MODULE(node_evals" src/*.cc
src/node_script.cc:NODE_MODULE(node_evals, node::InitEvals) 
```

# java - JSF 未在 WebSphere Liberty Profile 上工作

> ID：12138856
> 
> 赞同：2
> 
> 时间：2012-08-27T08:52:53.403
> 
> 标签：java, jsf-2, websphere, websphere-liberty

我在 Eclipse Juno 中使用 WebSphere Application Server V8.5 Liberty Profile。我配置了我的 AppServer (server.xml) 并添加了 jsp-2.2、jsf2.0、localConnector-1.0 和 servlet-3.0 功能。

当我部署我的项目并在浏览器中打开一个 JSP 页面时，一切正常。但是当我想打开一个 JSF 页面时，我得到了以下异常：

```
[ERROR   ] An error occured while initializing MyFaces: org.apache.myfaces.spi.impl.DefaultFacesConfigurationMergerFactory cannot be cast to org.apache.myfaces.spi.FacesConfigurationMergerFactory
[ERROR   ] Uncaught.init.exception.thrown.by.servlet
[ERROR   ] SRVE0266E: Error occured while initializing servlets: javax.servlet.ServletException: SRVE0207E: Uncaught initialization exception created by servlet
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.init(ServletWrapper.java:382)
    at com.ibm.ws.webcontainer.osgi.servlet.ServletWrapper.init(ServletWrapper.java:83)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.loadOnStartupCheck(ServletWrapper.java:1353)
    at com.ibm.ws.webcontainer.webapp.WebApp.doLoadOnStartupActions(WebApp.java:862)
    at com.ibm.ws.webcontainer.webapp.WebApp.commonInitializationFinally(WebApp.java:831)
    at com.ibm.ws.webcontainer.webapp.WebApp.initialize(WebApp.java:753)
    at com.ibm.ws.webcontainer.webapp.WebApp.initialize(WebApp.java:5694)
    at com.ibm.ws.webcontainer.osgi.DynamicVirtualHost.createRunnableHandler(DynamicVirtualHost.java:220)
    at com.ibm.ws.http.internal.VirtualHostImpl.discriminate(VirtualHostImpl.java:165)
    at com.ibm.ws.http.dispatcher.internal.channel.HttpDispatcherLink.ready(HttpDispatcherLink.java:157)
    at com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:444)
    at com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.handleNewRequest(HttpInboundLink.java:378)
    at com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.processRequest(HttpInboundLink.java:278)
    at com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.ready(HttpInboundLink.java:249)
    at com.ibm.ws.tcpchannel.internal.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:174)
    at com.ibm.ws.tcpchannel.internal.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:83)
    at com.ibm.ws.tcpchannel.internal.WorkQueueManager.requestComplete(WorkQueueManager.java:502)
    at com.ibm.ws.tcpchannel.internal.WorkQueueManager.attemptIO(WorkQueueManager.java:550)
    at com.ibm.ws.tcpchannel.internal.WorkQueueManager.workerRun(WorkQueueManager.java:899)
    at com.ibm.ws.tcpchannel.internal.WorkQueueManager$Worker.run(WorkQueueManager.java:981)
    at com.ibm.ws.threading.internal.Worker.executeWork(Worker.java:398)
    at com.ibm.ws.threading.internal.Worker.run(Worker.java:380)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.IllegalStateException: No Factories configured for this Application. This happens if the faces-initialization does not work at all - make sure that you properly include all configuration settings necessary for a basic faces application and that all the necessary libs are included. Also check the logging output of your web application and your container for any exceptions!
If you did that and find nothing, the mistake might be due to the fact that you use some special web-containers which do not support registering context-listeners via TLD files and a context listener is not setup in your web.xml.
A typical config looks like this;
<listener>
  <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
</listener>

at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:172)
at javax.faces.webapp.FacesServlet.init(FacesServlet.java:112)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.init(ServletWrapper.java:320)
... 22 more 
```

我的 web.xml 是由 eclipse 生成的，看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <display-name>WAS-Liberty-Test</display-name>
    <context-param>
        <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
        <param-value>resources.application</param-value>
    </context-param>
    <context-param>
        <description>
        State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
    </context-param>
    <context-param>
        <description>

    This parameter tells MyFaces if javascript code should be allowed in
    the rendered HTML output.
    If javascript is allowed, command_link anchors will have javascript code
    that submits the corresponding form.
    If javascript is not allowed, the state saving info and nested parameters
    will be added as url parameters.
    Default is 'true'</description>
        <param-name>org.apache.myfaces.ALLOW_JAVASCRIPT</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <description>

    If true, rendered HTML code will be formatted, so that it is 'human-readable'
    i.e. additional line separators and whitespace will be written, that do not
    influence the HTML code.
    Default is 'true'</description>
        <param-name>org.apache.myfaces.PRETTY_HTML</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>org.apache.myfaces.DETECT_JAVASCRIPT</param-name>
        <param-value>false</param-value>
    </context-param>
    <context-param>
        <description>

    If true, a javascript function will be rendered that is able to restore the
    former vertical scroll on every request. Convenient feature if you have pages
    with long lists and you do not want the browser page to always jump to the top
    if you trigger a link or button action that stays on the same page.
    Default is 'false'
</description>
        <param-name>org.apache.myfaces.AUTO_SCROLL</param-name>
        <param-value>true</param-value>
    </context-param>
    <listener>
        <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
        <enabled>true</enabled>
        <async-supported>false</async-supported>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>
        /faces/*</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

那么这里的问题是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T14:55:40.740

看来您可能既启用了 jsf-2.0 功能，又将您自己的 MyFaces 副本捆绑在应用程序中。

如果您希望使用作为 Liberty 的一部分提供的 jsf-2.0 实现，我建议从您的应用程序中删除 MyFaces jar，并删除集成环境中不需要的 StartupServletContextListener。

如果您希望使用捆绑在应用程序中的 jsf 实现，可以从 server.xml 中删除 jsf-2.0 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T18:57:19.427

从您的应用程序中删除 jsf/myfaces 库并更改服务器配置。转到功能管理器并添加 jsf 2.0/jsf2.2。

# php - 以下 do_action 在 wordpress 中是什么意思？

> ID：12138862
> 
> 赞同：0
> 
> 时间：2012-08-27T08:53:20.683
> 
> 标签：php, wordpress

我希望我的 Google Analytics 插件出现在作者角色中。我为作者提供了 manage_option 功能，并且插件确实出现了。但是，我不明白为什么没有出现谷歌分析。在调试时我遇到了

```
do_action('admin_menu', ''); 
```

在 wp_admin/includes/menu.php 文件中，据我说，这填充了管理员激活的其他插件。但是，我不明白 admin_menu 函数在哪里以及为什么谷歌分析插件不能出现。我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:05:45.583

do_action 在代码中的某处执行一个钩子。如果未创建钩子，则无法触发它...

# vim - vim 有什么区别，编译时使用 python (ruby) 支持和没有它？

> ID：12138866
> 
> 赞同：0
> 
> 时间：2012-08-27T08:53:41.633
> 
> 标签：vim

我想在许多服务器上使用 vim，在存储库中它编译时没有 ruby​​ 和 python 支持。但是语法插件可以正常工作。当我尝试编辑 python 文件时，其他事情看起来很正常。

我会将它与大量文件类型（配置、日志、源代码和其他）一起使用，我想知道区别并决定使用存储库的版本或自己编译

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T08:57:24.723

可选的 Python、Ruby、Perl 或 Scheme 支持允许脚本开发人员以他们选择的语言编写 vim 插件。Vim 在编译后会提供一个小的交互界面。它不会影响语法文件或缩进等。它们是用 VimScript 编写的。

有很多非常重要的 Vim 插件使用 Python，所以至少用 Python 支持编译 Vim 会以明显的方式扩展你的插件选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:38:35.673

不使用 编译时`+python`，Vim 无法对 python 代码执行全补全。我相信Ruby也是如此。

# sql - 数据库查询：如何计算多列的最大值

> ID：12138869
> 
> 赞同：4
> 
> 时间：2012-08-27T08:53:56.487
> 
> 标签：sql

假设我有下表

```
claim_date   person_type
------------------------
01-01-2012         adult
05-05-2012         adult
12-12-2012         adult
12-12-2012         adult
05-05-2012         child
05-05-2012         child
12-12-2012         child 
```

当我执行以下查询时：

```
select 
    claim_date, 
    sum(case when person_type = 'adult' then 1 else 0 end) as "nbr_of_adults",
    sum(case when person_type = 'child' then 1 else 0 end) as "nbr_of_children"
  from my_table
group by claim_date
; 
```

我在这里得到这个结果：

```
claim_date   nbr_of_adults    nbr_of_children
---------------------------------------------
01-01-2012               1                  0
05-05-2012               1                  2
12-12-2012               2                  1 
```

我想收到的是最大成人人数（这里：2）和最大儿童人数（这里：2）。有没有办法通过单个查询来实现这一点？感谢您的任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:01:48.953

使用派生表获取计数，然后选择最大值：

```
select max(nbr_of_adults) max_adults,
       max(nbr_of_children) max_children
from
(
  select 
      sum(case when person_type = 'adult' then 1 else 0 end) as "nbr_of_adults",
      sum(case when person_type = 'child' then 1 else 0 end) as "nbr_of_children"
    from my_table
  group by claim_date
) a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T09:02:15.760

使用嵌套查询：

```
 select max(nbr_of_adults) maxAd, max(nbr_of_children), maxCh from
    (
        select 
          claim_date, 
          sum(case when person_type = 'adult' then 1 else 0 end) as "nbr_of_adults",
          sum(case when person_type = 'child' then 1 else 0 end) as "nbr_of_children"
          from my_table
          group by claim_date    
    ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T09:04:33.587

我不知道你的 dbms 是什么，但在 sybase 上它可以工作：

```
select     
    max(sum(case when person_type = 'adult' then 1 else 0 end)) as "nbr_of_adults",
    max(sum(case when person_type = 'child' then 1 else 0 end)) as "nbr_of_children"
  from my_table
group by claim_date 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T08:59:26.137

```
select     
person_type,     
sum(case when person_type = 'adult' then 1 else 0 end) as "nbr_of_adults",     
sum(case when person_type = 'child' then 1 else 0 end) as "nbr_of_children"   
from my_table 
group by claim_date ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T09:10:11.843

如果您的 SQL 产品支持窗口聚合函数，您可以尝试如下操作：

```
SELECT DISTINCT
  MAX(COUNT(CASE person_type WHEN 'adult' THEN 1 END)) OVER () AS max_adult_count,
  MAX(COUNT(CASE person_type WHEN 'child' THEN 1 END)) OVER () AS max_child_count
FROM claim_table
GROUP BY claim_date 
```

我还用条件 COUNT 替换了您的条件 SUM，这在我看来更清晰、更简洁。

# android - 另存为 UTF-8 错误？

> ID：12138870
> 
> 赞同：0
> 
> 时间：2012-08-27T08:54:04.697
> 
> 标签：android, eclipse, encoding

我正在使用 eclipse juno 和 android 2.3 Ginger bread。我创建了一个项目并进行了编辑。当我尝试保存文件时，它显示错误消息。它显示为一个消息框

```
Save could not be completed. Try file > save as ... if problem persists.
Reason:
some characters cannot be maped using " Cp1252 " character encoding.
Either chande the encounting or remove the characters which are not
supported by the " Cp1252 " character ebcoding. 
```

它有 3 个选项

1.  好的
2.  另存为 UTF-8
3.  选择第一个字符

如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:07:54.683

不要在你的 java 文件中使用特殊字符。将字符串放在 strings.xml 中（始终使用 UTF-8，所以这里没问题）

# gcc - 在 Solaris 10 上使用 Binutils 构建失败

> ID：12138874
> 
> 赞同：2
> 
> 时间：2012-08-27T08:54:14.363
> 
> 标签：gcc, runtime-error, ld, binutils, solaris-10

我已经在 Solaris 10 上成功构建并安装了最新的 binutils-2.22。

但是当我尝试使用已安装的程序时`ld`，`or`我得到一个运行时错误：

```
ld.so.1: ld: fatal: relocation error: file /home/pernord/alt/bin/ld: symbol __clz_tab: referenced symbol not found 
```

我已经广泛搜索错误，但所有点击似乎与我的问题无关。

从我所读到`__clz_tab`的似乎与“libgcc”有关。

至少 libgcc 包含符号`clz`.

```
strings /lib/*/libgcc* | grep clz 
```

任何人的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:29:32.283

`__clz_tab`是 libgcc 中的一个表，用于实现 CLZ（“计算前导零”）函数。

您的 binutils 可执行文件是否依赖于`libgcc_s.so`？显示什么`ldd /home/pernord/alt/bin/ld`？

如果`libgcc_s.so`不在您的库搜索路径中，您可能需要使用`crle(1)`它来添加它。

# machine-learning - 使用 weka.clusterers.HierarchicalClusterer 时出现 IllegalArgumentException

> ID：12138879
> 
> 赞同：1
> 
> 时间：2012-08-27T08:54:35.147
> 
> 标签：machine-learning, cluster-analysis, weka, hierarchical-clustering

我搜索了很多，但我找不到任何示例代码，其中描述了如何使用 WEKA HierarchicalClusterer。使用以下 C# 代码会在“agg.buildClusterer(insts);”处给我一个 IllegalArgumentException。

```
weka.clusterers.HierarchicalClusterer agg = new weka.clusterers.HierarchicalClusterer();
agg.setNumClusters(NumCluster);
/*
Tag[] TAGS_LINK_TYPE = agg.getLinkType().getTags();
agg.setLinkType(new SelectedTag(1, TAGS_LINK_TYPE));
*/
agg.buildClusterer(insts);
for (int i = 0; i < insts.numInstances(); i++)
{
    int clusterNumber = agg.clusterInstance(insts.instance(i));
} 
```

StackTrace 说：

```
at java.util.PriorityQueue..ctor(Int32 initialCapacity, Comparator comparator)
at weka.clusterers.HierarchicalClusterer.doLinkClustering(Int32 , Vector[] , Node[] )
at weka.clusterers.HierarchicalClusterer.buildClusterer(Instances data) 
```

但没有指定 Message 或 InnerException。变量“insts”是一个实例对象，它只保存具有等量数字属性的实例。

是否有人能够快速找到我的错误或请发布/链接一些示例代码？此外，LinkType（注释代码）的设置是否正确？

谢谢， 比约恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T15:55:11.920

HierarchicalClusterer 类有一个`TAGS_LINK_TYPE`属性。所以喜欢

```
agg.setLinkType(new SelectedTag(1, HierarchicalClusterer.TAGS_LINK_TYPE)); 
```

将实现您设置链接的目标。现在这个 1 到底是什么意思？从 javadocs 我们看到 TAGS_LINK_TYPE 包含什么：

```
 -L Link type (Single, Complete, Average, Mean, Centroid, Ward, Adjusted complete, Neighbor Joining)
  [SINGLE|COMPLETE|AVERAGE|MEAN|CENTROID|WARD|ADJCOMLPETE|NEIGHBOR_JOINING] 
```

一般来说，您的代码在 C# 案例中看起来不错。我看到您没有在上面的示例中设置距离度量，也许您想这样做？我也在使用 IKVM 的 C# 中尽可能地使用 Weka。我发现层次聚类允许的数据集不是太大。也许您的数据集超出了 WEKA 可以处理的范围，如果您减小数据集的大小，您将避免错误？

# ios - 如何从我的应用程序将视频上 传到您的电子管？

> ID：12138889
> 
> 赞同：-2
> 
> 时间：2012-08-27T08:55:25.563
> 
> 标签：ios

我正在从我的应用程序中捕获视频，现在我想从我的应用程序本身将相同的视频上传到 youtube，因为我引用了下面的链接，但它显示错误“没有链接的 youtube 帐户”，但我提供了开发人员密钥和客户端 ID。[https://github.com/nparry/gdata-objectivec-client/tree/](https://github.com/nparry/gdata-objectivec-client/tree/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T09:00:49.247

以下是一些指导您的链接...

1.[使用 iPhone 自定义 App 将视频上传到 YouTube](http://urinieto.com/2010/10/upload-videos-to-youtube-with-iphone-custom-app/)

2.gdata [-objectivec-client](https://github.com/nparry/gdata-objectivec-client/tree/)

3.[用 iPhone 上传视频](https://stackoverflow.com/a/1243903/790794)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T11:15:50.663

[这](https://github.com/raviparmar/YoutubeAPI)是从 ios 将视频上传到 youtube 的 WORKING 示例。

您只需在 YouTubeTestViewController.m 类中添加 DEVELOPER_KEY 和 CLIENT_ID。如果您觉得有用，请不要忘记投票。

# haskell - 模板 Haskell 编译错误

> ID：12138890
> 
> 赞同：2
> 
> 时间：2012-08-27T08:55:27.867
> 
> 标签：haskell, template-haskell, hlist

考虑以下代码：

```
{-# LANGUAGE TemplateHaskell #-}
{-# LANGUAGE NoMonomorphismRestriction #-}

import Data.HList.GhcSyntax((.!.),(.=.),(.*.))
import Data.HList.Record(emptyRecord)
import Data.HList.TypeCastGeneric1
import Data.HList.TypeEqGeneric1
import Data.HList.Label5

data Hello1 = Hello1
data Hello2 = Hello2

record = (Hello1 .=. "Hello1") .*. (Hello2 .=. "Hello2") .*. emptyRecord

f1 = $([| (\r1 -> (r1 .!. Hello1)) |]) 

main = print $ f1 record 
```

这可以正常编译并按预期打印出“Hello1”。

但是，添加以下行 (GHC 7.4.1) 会产生编译错误：

```
f2 = $([| (\r2 -> (r2 .!. Hello2)) |]) 
```

给出的错误是：

```
error.hs:16:1:
    Could not deduce (Data.HList.Record.HasField Hello2 r0 v0)
      arising from the ambiguity check for `main'
    from the context (Data.HList.Record.HasField Hello2 r v)
      bound by the inferred type for `main':
                 Data.HList.Record.HasField Hello2 r v => IO ()
      at error.hs:(16,1)-(20,38)
    Possible fix:
      add an instance declaration for
      (Data.HList.Record.HasField Hello2 r0 v0)
    When checking that `main'
      has the inferred type `forall r v.
                             Data.HList.Record.HasField Hello2 r v =>
                             IO ()'
    Probable cause: the inferred type is ambiguous

error.hs:16:1:
    Could not deduce (Data.HList.Record.HasField Hello2 r0 v0)
      arising from the ambiguity check for `f1'
    from the context (Data.HList.Record.HasField Hello2 r v)
      bound by the inferred type for `f1':
                 Data.HList.Record.HasField Hello2 r v =>
                 Data.HList.Record.Record
                   (Data.HList.HListPrelude.HCons
                      (Data.HList.Record.LVPair Hello1 [Char])
                      (Data.HList.HListPrelude.HCons
                         (Data.HList.Record.LVPair Hello2 [Char])
                         Data.HList.HListPrelude.HNil))
                 -> [Char]
      at error.hs:(16,1)-(20,38)
    Possible fix:
      add an instance declaration for
      (Data.HList.Record.HasField Hello2 r0 v0)
    When checking that `f1'
      has the inferred type `forall r v.
                             Data.HList.Record.HasField Hello2 r v =>
                             Data.HList.Record.Record
                               (Data.HList.HListPrelude.HCons
                                  (Data.HList.Record.LVPair Hello1 [Char])
                                  (Data.HList.HListPrelude.HCons
                                     (Data.HList.Record.LVPair Hello2 [Char])
                                     Data.HList.HListPrelude.HNil))
                             -> [Char]'
    Probable cause: the inferred type is ambiguous 
```

为什么添加该`f2`行会导致编译错误？

*注意：模板 Haskell 部分在这里可能看起来很傻，但它们是更复杂的模板 Haskell 的简化，它确实适用于元组。我已经发布了我可以构建的最简单的示例，但仍然显示错误。我意识到在这种情况下删除 Template Haskell 可以解决问题，但这不是我真实代码中的选项。*

**编辑：**

此外，以下编译失败。为什么会这样：

```
{-# LANGUAGE TemplateHaskell #-}
{-# LANGUAGE NoMonomorphismRestriction #-}

import Data.HList.GhcSyntax((.!.),(.=.),(.*.))
import Data.HList.Record(emptyRecord)
import Data.HList.TypeCastGeneric1
import Data.HList.TypeEqGeneric1
import Data.HList.Label5

data Hello1 = Hello1
data Hello2 = Hello2
data Hello3 = Hello3

record1 = (Hello1 .=. "Hello1") .*. (Hello2 .=. "Hello2") .*. emptyRecord
record2 = (Hello1 .=. "Hello1") .*. (Hello2 .=. "Hello2") .*. (Hello3 .=. "Hello3") .*. emptyRecord

f1 = $([| (\r1 -> (r1 .!. Hello1)) |]) 

main = print $ (f1 record1, f1 record2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:52:01.330

我发现给你的顶级函数类型签名可以解决任何问题。请看下面的代码：

```
{-# LANGUAGE TemplateHaskell #-}

module X where
  import Data.HList.GhcSyntax((.!.))

  f = [| (\x r -> (r .!. x)) |] 
```

```
{-# LANGUAGE TemplateHaskell #-}
{-# LANGUAGE NoMonomorphismRestriction #-}
{-# LANGUAGE FlexibleContexts #-}

import Data.HList.GhcSyntax((.!.),(.=.),(.*.))
import Data.HList.Record(emptyRecord)
import Data.HList.TypeCastGeneric1
import Data.HList.TypeEqGeneric1
import Data.HList.Label5
import X
import Data.HList.Record (HasField)

data Hello1 = Hello1
data Hello2 = Hello2
data Hello3 = Hello3

record1 = (Hello1 .=. "Hello1") .*. (Hello2 .=. "Hello2") .*. emptyRecord
record2 = (Hello1 .=. "Hello1") .*. (Hello2 .=. "Hello2") .*. (Hello3 .=. "Hello3") .*. emptyRecord

g1 :: (HasField Hello1 a b) => a -> b -- Type signature here
g1 = $(f) Hello1

g2 :: (HasField Hello2 a b) => a -> b -- Type signature here
g2 = $(f) Hello2

main = print $ (g1 record1, g2 record1, g1 record2, g2 record2) 
```

# c# - 透明背景的图片框

> ID：12138892
> 
> 赞同：2
> 
> 时间：2012-08-27T08:55:33.507
> 
> 标签：c#, winforms, transparency, picturebox

> **可能重复：**
> [PictureBox 问题](https://stackoverflow.com/questions/4144371/a-picturebox-problem)

我有一个`TabPage`托管一些自定义控件`PictureBox`。我在这里所做的是绘制一些 IC 封装，用户可以单击它们的引脚来获取一些信息。用户可以将多个此图片框添加到标签页并在标签页中移动它们。

我的问题是这个图片框是透明的，只有当它们不相互重叠时。在下图中，您可以看到两个添加到标签页的图片框。标签页的背景是蓝色的，事实上，不管它是什么颜色，图片框都会有一些对标签页透明的未绘制区域：

![在此处输入图像描述](../Images/151ea1424cc3ff4ae5902c15a07fe732.png)

但是，一旦我将这些图片框中的任何一个移到另一个上方，它就不再透明了：

![在此处输入图像描述](../Images/ecbe00b17605bebcee7d7f30e04c44bb.png)

这是生成原始代码的代码，`Image`我将在上面绘制：

```
 //Setting up image area
    Image = new Bitmap(requiredImageWidth, requiredImageHeight, PixelFormat.Format32bppArgb);
    Image.MakeTransparent(); 
```

其余的是默认设置，我没有更改任何其他内容。您认为导致这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T09:15:59.700

从这篇[文章中](http://support.microsoft.com/kb/943454)，这就是导致这种行为的原因：

> WinForms 中的透明控件相对于它们的父控件是透明的，而不是相对于其他控件。WinForms 中的透明度更像是伪装，而不是真正的透明度。透明控件实际上并不能让您通过表单看到它背后的控件。**它要求其父级在“透明”控件上绘制自己的背景。**这就是为什么透明控件显示其背后的窗体，但覆盖任何其他控件的原因。

您的问题有一个公认的答案[（A PictureBox Problem）](https://stackoverflow.com/questions/4144371/a-picturebox-problem)

# javascript - 如何使用 ajax (post) 调用 servlet 来发送参数...？

> ID：12138898
> 
> 赞同：0
> 
> 时间：2012-08-27T08:56:02.000
> 
> 标签：javascript, jquery, servlets

我需要使用 ajax post 方法从 javascript 调用一个 servlet，并且还需要向该 servlet 发送一些参数。我怎样才能做到这一点。我花了太多时间来摆脱这个，但仍然没有运气......！所有帮助表示赞赏.....请帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T09:29:18.430

使用 jQuery 非常简单...

```
$.post("yourServletUrl",{"param1":"1","param2":"2"},function(data){},"json"); 
```

这是方法发布
第一个 `param: servlet url`
第二个参数：`params`
第三个 `param: callback`
最后一个参数：`response data`格式（“json”，“xml”...）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T09:34:37.497

试试这个 ...

```
 jQuery.ajax({
    url:URL,
    data:{"key1":"value1","key2":"value2"},
    type:'POST',
    dataType : 'xml',   /* use 'jsonp' for cross domain*/
    success:function(data, textStatus, jqXHR){
        // access response data
    },
    error:function(data, textStatus, jqXHR){
        console.log('Service call failed!');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T13:30:24.457

试试这个

```
 $.ajax({

                        type : 'GET',

                          url : '${pageContext.request.contextPath}/Servletname',

                          data : $('#formname').serialize(),

                           success : function(response) {

                            alert(response)

                        }

                    }); 
```

# c# - 将 Web 应用程序转换为 ASP.NET MVC 3 - 如何启用 Razor 视图？

> ID：12138899
> 
> 赞同：2
> 
> 时间：2012-08-27T08:56:03.957
> 
> 标签：c#, asp.net-mvc-3, razor, .net-4.0

我正在尝试使用[此](http://www.britishdeveloper.co.uk/2011/05/convert-web-forms-mvc3-how-to.html)链接将现有的 asp.net 应用程序转换为 MVC。

添加视图时，我可以选择添加 razor 或 aspx 视图类型。使用 aspx 类型（`<%: ViewBag.Message %>`）时一切正常，但如果我尝试使用 razor 类型（`@ViewBag.Message`），我得到一个错误

```
CS0103: The name 'ViewBag' does not exist in the current context 
```

Visual Studios 智能感知识别 ViewBag 类，但运行时不识别。（我使用的是视觉 stuido 开发服务器而不是本地 IIS）。

我在网站上搜索了这条消息，发现的所有内容都建议更新 web.config（我做了）或运行 Mvc3AppConverter，但这些都没有帮助我。

**编辑**：我的网络配置如下所示：

```
<?xml version="1.0"?>
<configuration>

  <appSettings>
    <add key="ShowLanguageReload" value="true" />
    <add key="webpages:Version" value="1.0.0.0" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>

  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>
    <pages pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" userControlBaseType="System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>

  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

它还包括 , 和 appSettings 中的一些附加键，但我删除了这些键，因为我认为它们与我的问题无关。

**编辑#2**我在文件夹中也有一个 web.config，`Views\Shared`它看起来像这样：

```
<configuration>
  <configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
      <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
  </configSections>

  <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
      </namespaces>
    </pages>
  </system.web.webPages.razor>

  <appSettings>
    <add key="webpages:Enabled" value="false" />
  </appSettings>

  <system.web>
    <httpHandlers>
      <add path="*" verb="*" type="System.Web.HttpNotFoundHandler" />
    </httpHandlers>

    <pages validateRequest="false" pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" userControlBaseType="System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
      <controls>
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" namespace="System.Web.Mvc" tagPrefix="mvc" />
      </controls>
    </pages>
  </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />

    <handlers>
      <remove name="BlockViewHandler" />
      <add name="BlockViewHandler" path="*" verb="*" preCondition="integratedMode" type="System.Web.HttpNotFoundHandler" />
    </handlers>
  </system.webServer>
</configuration> 
```

还有其他建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T10:50:16.957

## 两个 Scott Hanselman 链接

这两个可能会有所帮助：

1.  [将 ASP.NET MVC 3 集成到现有升级的 ASP.NET 4 Web 窗体应用程序中](http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx)
2.  [使用 ASP.NET MVC 3 混合 Razor 视图和 WebForms 母版页](http://www.hanselman.com/blog/MixingRazorViewsAndWebFormsMasterPagesWithASPNETMVC3.aspx)

## 配置

不要忘记更改根文件夹`web.config`是不够的。您还需要`web.config`在配置 Razor 的 Views 文件夹中有适当的文件。

## 建议

看起来你的`Views\web.config`. 我会采用`web.config`MVC VS 项目模板提供的准系统文件，因为您正在配置不需要配置的东西，例如`appSettings`等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:04:10.350

尝试添加这些参考，

```
 <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>
    <pages>
      <namespaces>
        <add namespace="System.Web.Mvc" />        
      </namespaces>
    </pages>
  </system.web> 
```

# c# - 创建访问数据库时出错？

> ID：12138901
> 
> 赞同：3
> 
> 时间：2012-08-27T08:56:19.980
> 
> 标签：c#, asp.net, ms-access, dll

我有一个创建访问数据库的 Web 应用程序。当我想创建这个数据库时，我从 COM 引用中添加了 Microsoft.Office.Interpob.access.dao.dll。这个应用程序在我的电脑上运行得很好。但是当我将此应用程序放入客户服务器时，我收到此错误：

> 由于以下错误，检索具有 CLSID {CD7791B9-43FD-42C5-AE42-8DD2811F0419} 的组件的 COM 类工厂失败：80040154

请注意，Microsoft Office Access 未安装在客户服务器中。我必须在这台服务器上安装这个程序还是我可以添加一些 dll 来解决这个问题或者我必须做其他事情？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:14:32.653

查看这些链接，它们可能会有所帮助：

*   [social.msdn.microsoft.com -“检索 COM 类工厂时出现错误 80040154”](http://social.msdn.microsoft.com/forums/en-US/vbgeneral/thread/88a6ea68-f476-4231-822f-27fabe59f458/)

*   [asp.net -“由于以下错误，检索 COM 类工厂失败：80040154”](http://forums.asp.net/t/1119052.aspx)

*   [software602.com - “KB987：错误代码 80040154。类未注册”](http://support.software602.com/kb/view.aspx?articleID=987)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-19T12:29:06.693

我知道这对于原始海报来说有点晚了，但希望这对其他人有用。正确答案是：

不，您不需要在服务器上安装 Microsoft Office Access。

但是，您确实需要在服务器上安装 Microsoft Office Access **Runtime**。从我有限的经验来看，哪个办公室运行时似乎并不重要——我在本地安装了 2013 运行时，但是当我在我的服务器上安装运行时时，2016 运行时很好（所以都安装了所需的 COM 对象）。就我而言，我正在安装 x64 版本。

Microsoft Office Access Runtime 由 Microsoft 免费提供。

Microsoft Access 2013 运行时可从以下网址下载：[https ://www.microsoft.com/en-gb/download/details.aspx?id=39358](https://www.microsoft.com/en-gb/download/details.aspx?id=39358)

Microsoft Access 2016 运行时可从[https://www.microsoft.com/en-gb/download/details.aspx?id=50040下载](https://www.microsoft.com/en-gb/download/details.aspx?id=50040)

# java - 如何不在浏览器上打印堆栈跟踪

> ID：12138905
> 
> 赞同：0
> 
> 时间：2012-08-27T08:56:32.443
> 
> 标签：java, spring, resteasy

我正在开发网络服务。有时在我的测试过程中会抛出异常并显示在浏览器页面上。我不确定为什么即使“可能”抛出异常的代码也在 try-catch 块中，异常仍然打印在浏览器中。

我当然可以使用 Spring 或异常映射器（使用 JBoss）创建异常处理程序，但仍然有可能抛出未映射的异常，我不希望将其打印在浏览器上。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:01:13.397

您可能会捕获已检查的异常，而浏览器上显示的可能是未检查的异常。一种方法是捕获 RuntimeException，它是所有未检查异常的父级，并在浏览器中显示有意义的错误。如果您是引发此类异常的 API 的所有者，那么值得阅读有关[异常](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)的小笔记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:02:52.753

在您的 web.xml 中，您可以像这样定义错误页面

```
<error-page>
    <error-code>404</error-code>
    <location>/WEB-INF/jsp/error.jsp</location>
</error-page>

<error-page>
    <error-code>403</error-code>
    <location>/WEB_INF/jsp/accessDenied.jsp</location>
</error-page> 
```

等等...您可以使用任何其他错误代码，尤其是我认为更适合您的情况的错误 500 女巫

# android - android.mk 包含执行顺序

> ID：12138907
> 
> 赞同：3
> 
> 时间：2012-08-27T08:56:45.173
> 
> 标签：android, android-ndk, makefile

```
LOCAL_PATH := $(call my-dir)
TOP_LOCAL_PATH := $(call my-dir)/../

#Add target arm version
ifeq ($(TARGET_ARCH_ABI),armeabi)
MY_PJSIP_FLAGS := $(BASE_PJSIP_FLAGS) -DPJ_HAS_FLOATING_POINT=0
else
MY_PJSIP_FLAGS := $(BASE_PJSIP_FLAGS) -DPJ_HAS_FLOATING_POINT=1
endif

# Pjsip
include $(TOP_LOCAL_PATH)/pjlib/build/Android.mk
include $(TOP_LOCAL_PATH)/pjlib-util/build/Android.mk

include $(TOP_LOCAL_PATH)/pjnath/build/Android.mk
include $(TOP_LOCAL_PATH)/pjmedia/build/Android.mk
include $(TOP_LOCAL_PATH)/pjsip/build/Android.mk

#pjsip JNI
include $(TOP_LOCAL_PATH)/jni/build/Android.mk

#JSON
include $(TOP_LOCAL_PATH)/third_party/build/json/Android.mk

#GSLB
include $(TOP_LOCAL_PATH)/pgslb/build/Android.mk 
```

我有一个这样的android make文件，问题是，当开始构建时，GSLB将首先构建，但它依赖于libpjnath.a，witch是由构建的 `include $(TOP_LOCAL_PATH)/pjnath/build/Android.mk`，所以引起问题，我不知道为什么GSLB是在开始时构建，为什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-22T18:26:55.817

这可能为时已晚，但我在使用 NDK 时遇到了非常相似的问题，并得出结论认为编译顺序是按字母顺序排列的。

# python - 提交不成功后如何在django中保留表单字段？

> ID：12138908
> 
> 赞同：7
> 
> 时间：2012-08-27T08:56:46.760
> 
> 标签：python, django, django-forms

来自views.py的代码：

```
def feedback(request):
    if request.method == "POST":
        form = CommentForm(request.POST)
        if form.is_valid():
            form.save()
        else:
            print("form.errors:", form.errors)
    else:
        form = CommentForm()
    articles = Comment.objects.all()
    ResponseDict = {"articles": articles, "form": form}
    return render_to_response("feedback.html", ResponseDict, 
        context_instance = RequestContext(request)) 
```

我已经尝试过这个以及对类似问题的答案的一些修改，但没有任何效果。当我按下提交按钮时，html 中的所有表单字段都变为空。

编辑：来自feedback.html的代码：

```
{% extends "base.html" %}
{% block main %}
    <table>
        <form action="/feedback/" method="POST">
            {% csrf_token %}
            <div class="article">
                <label for="name">
                    Ваше имя:
                </label>
                <br />
                <input type="text" name="name" id="name" size="40" class="inputbox" value="" />
                <br />
                <!-- class="inputbox required" -->
                <textarea class="WithoutTinymce" cols="50" rows="10" name="text" id="text"></textarea>
                <br />
                <input type="submit" name="submit" value="Отправить">
            </div> <!-- /article -->
        </form>
    </table>
    {% include "articles.html" %}
{% endblock %} 
```

如果需要，我还可以从 base.html 粘贴代码。

EDIT2：base.html 中的最小化代码：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="cs" lang="cs">
...
<body id="body-id" onload="loaded()">

<!-- Main -->
<div id="main" class="box">
    <div id="page" class="box">
        <div id="page-in" class="box">
            <!-- Content -->
            <div id="content">
                {% block main %}
                {% endblock %}
                <hr class="noscreen" />
            </div> <!-- /content -->
        </div> <!-- /page-in -->
    </div> <!-- /page -->
</div> <!-- /Main -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T09:20:15.003

在您的模板中，您没有使用`form`通过视图传递。

您可以将模板的一部分更新为（假设表单中的字段名称是`first_field`and `second_field`.

```
<form action="/feedback/" method="POST">
    {% csrf_token %}
    <div class="article">
        <label for="name">
            Ваше имя:
        </label>
        <br />
        {{ form.first_field.errors }}
        {{ form.first_field.label_tag }}: {{ form.first_field }}
        <br />
        <!-- class="inputbox required" -->
        {{ form.second_field.errors }}
        {{ form.second_field.label_tag }}: {{ form.second_field }}
        <br />
        <input type="submit" name="submit" value="Отправить">
    </div> <!-- /article -->
</form> 
```

更多参考 -[使用模板显示表单](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#displaying-a-form-using-a-template)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T09:26:15.643

您需要将表单传回模板；并且您需要根据 jpic 的[链接](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#displaying-a-form-using-a-template)在模板中呈现表单。

以下应该呈现您的表单错误：

```
from django.shortcuts import render, redirect

def feedback(request):
    ctx = {}
    ctx['articles'] = Comment.objects.all()
    if request.method == "POST":
        form = CommentForm(request.POST)
        if form.is_valid():
            form.save()
            return redirect('/thanks')
        else:
            ctx['form'] = form
            return render(request, 'feedback.html', ctx)
    else:
        ctx['form'] = CommentForm()
    return render(request, "feedback.html", ctx) 
```

在您的模板中：

```
{% extends "base.html" %}
{% block main %}
    <table>
        <form action="/feedback/" method="POST">
            {% csrf_token %}
            <div class="article">
                {{ form }}
                <br />
                <input type="submit" name="submit" value="Отправить">
            </div> <!-- /article -->
        </form>
    </table>
    {% include "articles.html" %}
{% endblock %} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T09:19:05.767

很简单，你的模板有这个：

```
<input type="text" name="name" id="name" size="40" class="inputbox" value="" /> 
```

因此输入标签的 value 属性始终为空。

文本区域也是如此，它应该始终呈现为空：

```
<textarea class="WithoutTinymce" cols="50" rows="10" name="text" id="text"></textarea> 
```

查看有关[在模板中呈现表单的文档](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#displaying-a-form-using-a-template)

# node.js - 如何安装同一个 node.js 模块的多个版本？

> ID：12138917
> 
> 赞同：15
> 
> 时间：2012-08-27T08:57:38.033
> 
> 标签：node.js, npm

我可以使用`node`全局安装同一模块的多个版本`npm`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-15T20:08:36.923

我认为没有（好的）方法可以做到这一点。

但是，我猜您的用例是这样的：您有两个项目，它们需要不同版本的全局安装包。

对于这样的情况，我通常避免完全全局安装包，而是在本地安装它们（不带`-g`）。例如，如果您想为给定项目安装特定旧版本的“mocha”包，您会这样做

```
cd ~/src/myproject
npm install --save-dev mocha@^1.0.0 
```

（请注意，我们没有`-g`在这里使用。）然后像这样调用它：

```
./node_modules/.bin/mocha 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-22T20:20:49.077

虽然这是可能的，但如果不编写自己的脚本来管理它，可能会很难维护。为此，我将假设您使用的是 MacOS 或 Linux，并且您已经安装了节点`/usr/local/bin`

安装全局模块时，npm 会将模块及其依赖项放置在安装节点的同一位置。通常`/usr/local/lib/node_modules`，然后为该模块的 in 创建一个符号链接`/usr/local/bin`。

例如，你想安装 nodemon，所以你运行`npm install -g nodemon`. npm 安装 nodemon并在该点`/usr/local/lib/node_modules/nodemon`创建一个符号链接`/usr/local/bin/nodemon``/usr/local/lib/node_modules/nodemon/bin/nodemon.js`

假设您刚刚安装了 nodemon@1.8.1，但由于某种原因，您还需要 nodemon@1.7.3。

要同时安装它们，但不冲突，您可以：

1.  将现有 nodemon 副本的目录从 重命名`nodemon`为`nodemon18`
2.  使用创建一个新的`nodemon18`符号链接`ln -s /usr/local/bin/nodemon18 /usr/local/lib/node_modules/nodemon/bin/nodemon.js`（不要忘记使其可执行）
3.  通过安装 nodemon@1.7.3`npm install -g nodemon@1.7.3`

现在，`nodemon`从终端运行将运行 nodemon@1.7.3，运行`nodemon18`将运行 nodemon@1.8.1。

**YMMV。我真的不建议这样做。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-16T16:45:20.590

不是现在。

（相关：您可以使用 NVM（节点版本管理器）安装多个版本的节点：[https](https://github.com/creationix/nvm) ://github.com/creationix/nvm ）

# wcf - 异步 WFC 服务器端，如 IHttpAsyncHandler

> ID：12138919
> 
> 赞同：0
> 
> 时间：2012-08-27T08:57:41.840
> 
> 标签：wcf, asynchronous

我希望能够创建客户端视为同步的 WCF 服务，但在服务器端实现为异步。我知道 ASP.NET 允许我通过实现 IHttpAsyncHandler 来做到这一点，但似乎在 WCF 中找不到等价物。

这是一个已经存在的服务，我们希望转移到异步实现服务器端，而不更改客户端。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:15:50.483

如果您使用的是 .Net 4.5，请将服务合同接口中的 OperationContract 方法更改为返回`Task<type>`而不是类型。在实现接口的类中，在方法上使用 async 修饰符，并按照基于任务的异步模式在内部使用 await，
请参阅[http://msdn.microsoft.com/en-us/library/ms734701](http://msdn.microsoft.com/en-us/library/ms734701) [http://channel9.msdn。 com/Events/TechEd/NorthAmerica/2012/DEV326](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/DEV326)

# c++ - 多线程化树数据结构的只读函数..我需要什么才能使线程安全

> ID：12138923
> 
> 赞同：1
> 
> 时间：2012-08-27T08:58:02.483
> 
> 标签：c++, multithreading, nearest-neighbor

我有一个树数据结构。除了正常的插入和删除函数之外，我还有一个 COMPUTE 函数，它从树中存在的节点计算某些值。插入和删除函数会影响树。但是 COMPUTE 函数不会修改树。COMPUTE 函数有自己的内部队列，并在这些队列中添加和删除节点。这里我给出一个计算函数的简化伪代码：

```
class tree{
    vector<int> value;
    tree * children
}

tree::COMPUTE(vector<int> inputValue)
{
    Set currentSet;
    Set nextSet
    currentSet.add(root);

    foreach (node in currentSet)
    {
        if(node has children)
            foreach(childNode of node)
            {
                if(CONDITION_SATISFIED(childNode))
                    add childNode to nextSet;
            }
        else
            output childNode
    }

} 
```

所以 COMPUTE 函数只是简单地通过树递归，将节点添加到它自己的内部集合数据结构中并进行一些计算。

现在我想多线程计算函数。由于它不会修改树，我想这很容易做到。每个线程都给出自己的值并获得自己的 COMPUTE 输出。代码是用 C++ 编写的。

我的问题是这样的：

如果我这样称呼它：

```
void * threadRoutine
{
    tree.COMPUTE(thisThreadVal);
}

int main()
{
    tree myTree();

    //Insertion Code here

    call N threads each with different parameters but the same tree.
} 
```

我不认为这是正确的。这是因为所有线程都会调用同一个树对象的同一个成员函数。因此，像 COMPUTE 方法中使用的集合这样的内部数据结构将被破坏。

我认为我应该在树之外编写计算函数，而不是作为树的成员函数。有人可以告诉我这是否正确。

顺便说一句：如果有人好奇，我将使用的确切树称为覆盖树。它是一种用于查找最近邻查询的相对较新的数据结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:06:56.527

`COMPUTE`只要使用的集合是局部变量或堆中的集合，所采用的方法对于多次调用（全大写是什么？）调用是安全的，但局部指针或对它们的引用是唯一这样的指针或引用 - 因此它们将远离彼此。

（在其他情况下它可以是线程安全的，但证明它会变得更加复杂）。

当另一个线程正在执行添加或删除的工作时，这样做是不安全的；计算与其他计算一起发生是安全的，但不能与修改一起发生。如果发生这种情况，您需要某种同步，或者将所有可能的操作一起考虑并使它们都是线程安全的。

该函数是成员函数还是外部函数完全无关紧要。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T09:11:04.247

后

```
if(node has children) 
```

只需创建一个新线程。添加互斥锁以保护`nextSet`

# c# - 在 vb.net 中使用 c# 条件运算符

> ID：12138927
> 
> 赞同：0
> 
> 时间：2012-08-27T08:58:21.570
> 
> 标签：c#, vb.net

> **可能重复：**
> [VB.NET 中是否有条件三元运算符？](https://stackoverflow.com/questions/576431/is-there-a-conditional-ternary-operator-in-vb-net)

我在 c# 网站的 asp.net 中有以下代码，但我必须在 vb.net 网站中使用此代码，但我无法转换代码，甚至代码翻译器请帮我这样做。这是我的代码

```
<asp:CheckBox ID="chkStatus" runat="server" 
                            AutoPostBack="true" OnCheckedChanged="chkStatus_OnCheckedChanged"
                            Checked='<%# Convert.ToBoolean(Eval("Approved")) %>'
                            Text='<%# Eval("Approved").ToString().Equals("True") ? " Approved " : " Not Approved " %>' />
                    </ItemTemplate>                    
                </asp:TemplateField> 
```

在这里我想改变这条线`Text='<%# Eval("Approved").ToString().Equals("True") ? " Approved " : " Not Approved " %>'`

对于 vb.net 网站，请帮助我做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T09:00:45.510

使用至少具有 Framework 3.5 (VS 2008)的[`If`运算符：](http://msdn.microsoft.com/en-us/library/bb513985.aspx)

```
Text='<%# If(Eval("Approved").ToString().Equals("True"), " Approved ", " Not Approved ") %>' 
```

# asp.net-mvc-3 - MVC3 FormsAuthenticationTicket Cookie 名称

> ID：12138930
> 
> 赞同：0
> 
> 时间：2012-08-27T08:58:29.390
> 
> 标签：asp.net-mvc-3, authentication, forms-authentication

> 可能重复： [我可以更改 FormsAuthentication cookie 名称吗？](https://stackoverflow.com/questions/6661943/can-i-change-the-formsauthentication-cookie-name)

我有多个 MVC3 站点，它们创建 FormsAuthentication 票证并将它们存储在 cookie 中。

登录：

```
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1, userName, DateTime.Now, DateTime.Now.AddMinutes(15), true, String.Empty);
string encTicket = FormsAuthentication.Encrypt(ticket);
HttpCookie faCookie = new HttpCookie(FormsAuthentication.FormsCookieName, encTicket); 
```

在 Application_AuthenticateRequest 中：

```
HttpCookie authCookie = Request.Cookies[FormsAuthentication.FormsCookieName]; 
```

如果多个站点保存到同一个cookie，这肯定会导致问题吗？为每个应用程序使用不同的 cookie 名称有什么害处吗？或者有其他推荐的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:00:29.877

仅当这些多个站点位于同一域上时，它才会导致问题。

您可以在 web.config 中设置 cookie 名称 - 请参阅[我可以更改 FormsAuthentication cookie 名称吗？](https://stackoverflow.com/questions/6661943/can-i-change-the-formsauthentication-cookie-name)

# android - 如何提高在 android 中调用 Web 服务的性能？

> ID：12138932
> 
> 赞同：0
> 
> 时间：2012-08-27T08:58:40.697
> 
> 标签：android, android-service

我使用 Web 服务开发了一个 android 应用程序。在这里，我调用 Web 服务从服务器获取数据并显示在我的应用程序视图中。应用程序运行良好，但调用 Web 服务给我带来了性能问题。获取数据需要更多时间。

我正在使用下面的代码来调用 api 并使用处理程序来解析数据。我的结果是 XML 格式的。我正在使用 SAX 解析器来解析数据。我不知道为什么应用程序获取数据和解析的速度很慢。请为我提供良好的性能服务提示。

这是我的api调用代码：

```
HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(url);
    StringEntity entity = null;         
        entity = new StringEntity(xmlRequest, HTTP.UTF_8);      
        httppost.setHeader("Content-Type", "text/xml");
        httppost.setEntity(se);
    BasicHttpResponse httpResponse = (BasicHttpResponse) httpclient.execute(httppost);
    InputStream is = httpResponse.getEntity().getContent(); 
```

我正在将此输入流转换为字符串生成器并进行解析。

提前致谢。

# html - 与 HTML 表单元素中的地址不匹配的邮件正则表达式

> ID：12138935
> 
> 赞同：0
> 
> 时间：2012-08-27T08:59:02.233
> 
> 标签：html, regex

使用正则表达式，我需要在完全呈现的 HTML 页面中查找并替换所有邮件地址，因为我想对它们进行垃圾邮件保护。准确地说，我想要除公式元素之外的所有地址（因为如果用户输入验证失败，我仍然想显示插入的邮件地址而不是替换的邮件地址）。

查找或编写正则表达式来简单地搜索邮件地址不是问题。问题是排除公式元素中的元素。有没有人建议如何解决这个问题？这在正则表达式中可能吗？

一些例子：我想匹配“......我的内容，mail@mail.com，更多内容......”但我不想匹配：“......你的邮件：mail@mail.com ……”

我知道解析 HTML 并简单地跳过表单元素会更好，但性能很重要，正如我之前所说，每次调用网站时都会执行此任务......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:06:16.430

这可能是不可能的。请参阅：[RegEx 匹配除了 XHTML 自包含标签以外的开放标签](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。第二个正则表达式在“不”方面做得不好。（有些正则表达式支持它，有些不支持，但都慢了。）也许比我更擅长正则表达式的人可以帮助你，但我怀疑这样做是不可能的。

# export - 逐位导出 Typo3 站点

> ID：12138941
> 
> 赞同：0
> 
> 时间：2012-08-27T08:59:30.323
> 
> 标签：export, typo3

（编辑：我留下所有错误的假设，以防其他人犯同样的错误）

我在远程服务器上有一个古老的 Typo3 3.8.1 站点。我无权访问该服务器，并且负责维护该站点的团队不知道该联系谁来访问该服务器。不过，我确实拥有该网站的管理员权限。（编辑：不，我没有。哎呀。）

这是我在（非）管理菜单中看到的： ![管理菜单](../Images/0ca1c87a0a7ae683e2c1f307f294fdda.png)

我不确定这个版本是否支持扩展，我在任何地方都找不到扩展管理器。（因为我不是管理员）

我想导出该站点，以便可以将其托管在我自己域的服务器上。问题是导出文件太大，无法下载。如果我一次导出一堆页面，我会破坏目录结构吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:33:37.183

如果您对后端有管理员权限，您可以尝试安装[Quixplorer](http://typo3.org/extensions/repository/view/t3quixplorer) - 文件管理器。使用它，您可以尝试压缩主目录中的文件夹，即。( `typo3`, `typo3conf`,`fileadmin`等) 并通过浏览器下载。

`typo3conf.zip`尽快从服务器下载和删除很重要，因为它包含敏感数据。

此外，如果您没有其他 MySQL 客户端，您还可以安装 PhpMyAdmin 扩展（在存储库中搜索）。

编辑：

如果您不能使用 Quixplorer，唯一的方法是......编写自己的扩展并通过扩展管理器上传，您需要尝试执行原始文件系统操作，例如：

(PHP)

```
system('zip -R t3c.zip typo3conf/'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:48:26.347

有时，服务器允许比 T3D 导出​​更多的内存和执行时间。因此，如果您可以更改该服务器上的 PHP 文件，请尝试更改typo3/sysext/impexp/class.tx_impexp.php - 搜索 ini_set 并更改该设置。如果服务器允许，您可以创建更大的 t3d 文件。

您可以尝试一些 shell 扩展来获得该服务器：

*   [http://typo3.org/extensions/repository/view/phpshell](http://typo3.org/extensions/repository/view/phpshell)
*   [http://typo3.org/extensions/repository/view/mw_shell](http://typo3.org/extensions/repository/view/mw_shell)
*   [http://typo3.org/extensions/repository/view/shell](http://typo3.org/extensions/repository/view/shell)

但是要回答您最初的问题：您可以创建几个 T3D 文件并再次导入它们。如果您导入它们，只需强制使用 uid - 并首先安装所有需要的扩展！

# magento - 如何在需要上传图片的magento中制作表格

> ID：12138947
> 
> 赞同：0
> 
> 时间：2012-08-27T08:59:46.063
> 
> 标签：magento

我是 magento 的新手，所以基本上无法为手头的当前问题找到解决方案。我们有一个建立在 magento 之上的电子商务商店。现在，我们需要一个表单，用户可以在其中填写一些详细信息并上传他们的图像。如何在 magento 中有效地做到这一点。

截至目前，我正在考虑创建一个带有上传 php 脚本的表单页面，然后将详细信息保存在 CSV 文本文件中。这是正确的方法吗。此外，我们可能需要将此信息添加为客户并稍后使用。

实际上，我们正在启动一个月度项目交付系统，我们需要为此提供客户信息和照片。只需对这个问题稍加说明，让我知道如何解决它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:28:41.400

检查下面的链接，它显示了如何在 Magento 中上传和保存图像。

> [http://blog.decryptweb.com/file-upload-magento/](http://blog.decryptweb.com/file-upload-magento/)

# java - 修改服务器上的txt文件

> ID：12138949
> 
> 赞同：0
> 
> 时间：2012-08-27T08:59:57.927
> 
> 标签：java, android

我正在尝试制作一个可以读取、更新、删除文件每一行的应用`.txt`程序

如何`.txt`使用 android 设备直接从服务器访问（读取、更新、删除）文件，而无需下载`.txt`文件。

这是我尝试[如何从 .t​​xt 文件中读取](https://stackoverflow.com/questions/10896312/how-to-read-from-txt-file)的链接， 但尝试时出现错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:02:58.257

如果您不想下载 .txt 文件，则必须在服务器端进行更改。

但是，由于 .txt 文件通常不是那么大，因此下载、编辑并使用 FTP 再次上传应该不成问题。

# gnuplot - GNU在x轴上以固定间隔绘制非均匀数据

> ID：12138950
> 
> 赞同：0
> 
> 时间：2012-08-27T08:59:58.473
> 
> 标签：gnuplot

```
9                              1782.091513,
24                             4731.999530,
36                             6377.046661,
80                             9377.983901,
108                            9158.024005,
210                            4314.926970,
540                            56799.564,
2000                           67908.2343,
7000                           45345.657,    
12000                          34234.3624, 
```

绘制这个给我一个我无法看到小值的图表。我想修复 x 轴的每个值的 b/w 间隔。这样该图表将在整个表格上可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:16:29.213

您可以将轴设置为对数：

```
set logscale x
set logscale y 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:52:56.773

正如 choroba 所指出的，Logscale 可能是您真正想要的。绘制此图的第二种（不太标准）方法是将第一列中的值用作`xticlabels`.

```
plot 'yourdatafile' u 2:xticlabels(1) 
```

这将产生一个图，其中值在 x 轴上等距分布，并标有数据文件中相应的 x 位置。

# delphi - 在 Debug 和 Release 模式下调用 64 位 API 函数的区别

> ID：12138952
> 
> 赞同：2
> 
> 时间：2012-08-27T09:00:02.860
> 
> 标签：delphi, 32bit-64bit

[`lsaapi.pas unit`](http://www.koders.com/delphi/fid06860D8F8B7701BD0B42D42112F4A47B08DCA76D.aspx?s=proxy#L177) 我在使用带有小 Unicode`PChar`的32 位代码转换为 64 位代码时遇到问题`PAnsiChar`。

以下代码将在 32 位模式下工作，但不能在 64 位模式下工作。运行程序（不在 64 位调试模式下！）， `invalid parameter`通过调用获取错误消息`LsaQueryInformationPolicy()`

任何想法，有什么问题？
为什么在 64 位调试和非调试模式下运行此代码会有不同的行为？
也许是 64 位的记录对齐问题？

这是代码：

```
uses
  lsaapi;

function GetDomainName: string;
var
  Buffer: Pointer;
  Status: NTStatus;
  PolicyHandle: LSA_HANDLE;
  ComputerName: TLsaUnicodeStr;
  Attributes: TLsaObjectAttributes;
  PolicyAccountDomainInfo: PPolicyAccountDomainInfo;
begin
  ComputerName := TLsaUnicodeStr.CreateFromStr('');
  try
    FillChar(Attributes, SizeOf(Attributes), 0);    
    Status := LsaOpenPolicy(ComputerName.Value, Attributes, 
      POLICY_VIEW_LOCAL_INFORMATION, PolicyHandle);
    if Status <> STATUS_SUCCESS then
      raise Exception.Create('LsaOpenPolicy Failed: ' + 
        SysErrorMessage(LsaNtStatusToWinError(Status)));    
    try
      Status := LsaQueryInformationPolicy(PolicyHandle, 
        PolicyPrimaryDomainInformation, Buffer);
      if Status <> STATUS_SUCCESS then
        raise Exception.Create('LsaQueryInformationPolicy Failed: ' +
          SysErrorMessage(LsaNtStatusToWinError(Status)));    
      try
        PolicyAccountDomainInfo := Buffer;
        Result := PolicyAccountDomainInfo.DomainName.Buffer;
      finally
        LsaFreeMemory(Buffer)
      end;
    finally
      LsaClose(PolicyHandle)
    end;
  finally
    ComputerName.Free;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T09:32:38.987

该单元中的所有记录`lsaapi`都被声明为已打包。Windows API 头文件不使用打包结构。通过删除所有`packed`修饰符来修复它。如果您进行更改，您的函数在 32 位和 64 位目标中都会成功。

对于它的价值，您的代码实际上在调用`LsaOpenPolicy`. 打包记录`SizeOf(Attributes)`返回 40。正确的大小是 48，这就是删除`packed`修饰符时得到的值。

调试此类事情的最简单方法是安装 Visual Studio 的副本，以便您可以比较等效的 C++ 代码。

我认为不正确的记录声明是该单元的主要问题。可能还有其他人，但那是一个像拇指酸痛一样突出的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T09:34:30.140

您的错误很可能在调试和运行时都发生，但在运行时被吞没了。我在 x86 和 x64 世界的各种开发环境中都发生过几次这种情况。

所以：

*   确保将正确的加载到您的进程空间中。
*   确保对齐和打包是正确的，因为在 64 位世界中还有其他情况下这很重要

如果你让它工作，请通知科林你得到了他单位的新版本。

~~起初我认为这是因为您不能从 64 位进程调用 32 位 DLL（与 16/32 位情况不同，您[在 16 位和 32 位之间进行转换，反之亦然](http://www.catch22.net/tuts/using-cardsdll-api)，没有这样的转换32/64 位的情况）。~~

~~[然后我发现advapi32.dll](http://social.msdn.microsoft.com/Forums/sk/netfx64bit/thread/410374d5-139a-47f9-9d5b-3851247f4024)有两个版本：一个 32 位版本和一个 64 位版本。~~

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T11:23:31.670

正如其他答案已经表明您的记录大小不正确，可能是由于打包语句（winapi 中的结构通常不打包而是对齐）。

我的建议是使用 Jedi Windows ApiLib（在这种情况下为 JwaNtSecApi），因为它通常具有最佳且经过时间证明的转换。

# jsp - 弹出Jsp页面，看起来像一个JS弹出？

> ID：12138953
> 
> 赞同：0
> 
> 时间：2012-08-27T09:00:04.810
> 
> 标签：jsp, popup

我正在使用 JSP，如果单击页面上的按钮将显示一个弹出窗口（不是新窗口），并且需要在处理之前做一些工作。
所以使用 javascript 的功能是无法实现的。
所以我想弹出（不是新窗口）一个 JSP 页面，它应该看起来像 JS pop 而已。
Bcoz 最终用户不应该觉得它是一个单独的窗口。
任何想法都是高度赞赏的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:38:31.133

那么您正在寻找的功能被称为花哨的盒子[点击这里查看它的实际应用](http://fancybox.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:11:45.973

对于这个要求，我必须使用 Jquery Dialog 概念.. 这样对话框内容将只是一个 jsp 代码。这样就满足了要求。

# python - PySide 和 QProgressBar 在不同的线程中更新

> ID：12138954
> 
> 赞同：4
> 
> 时间：2012-08-27T09:00:12.220
> 
> 标签：python, multithreading, qt, progress-bar, pyside

这可能是一个有点长的帖子，所以，提前感谢你能陪我到最后。这是问题所在，（我认为这是一个相当基本的问题，只是我对 PiSide 和 Qt 的缺乏经验让我更难。）我有一个带有一个菜单项的主窗口，假设是“进程”。代码如下 -

```
from PySide import QtCore, QtGui

class Ui_MainWindow(object):

      def setupUi(self, MainWindow, AppObj):
            .
            .
            self.statusbar = QtGui.QStatusBar(MainWindow)
            self.statusbar.setObjectName("statusbar")
            MainWindow.setStatusBar(self.statusbar)
            .
            .
            .
           self.actionProcess = QtGui.QAction(MainWindow)
           self.actionProcess.setObjectName("actionProcess")
           self.actionProcess.triggered.connect(self.myappObj.menuActionProcess) 
           . 
```

这里 self.myappobj 指的是我创建的一个应用程序类，它充当我的应用程序的主要逻辑控制器。编码 -

```
from PySide import QtCore, QtGui
from MainWindow import Ui_MainWindow

class App(QtGui.QDialog):
      def __init__(self, parent=None):
          self.__mainWindow = QtGui.QMainWindow()
          self.__mainWindowDesignContext = Ui_MainWindow()
          self.__mainWindowDesignContext.setupUi(self.__mainWindow, self)
          self.__mainWindow.show()
      def menuActionProcess(self):
          self.processThread = BatchProcesser()
          self.progressBar = QtGui.QProgressBar()
          statusBar.addWidget(self.progressBar)
          self.progressBar.show()
          self.progressBar.setMinimum(0)
          self.progressBar.setMaximum(100)
          QtCore.QObject.connect(self.processThread, QtCore.SIGNAL("progress(int)"),self.progressBar, QtCore.SLOT("setValue(int)"), QtCore.Qt.DirectConnection)
          if not self.processThread.isRunning():
              self.processThread.exiting = False
              self.processThread.start() 
```

因此，很容易看出我在这里要做的是创建一个主窗口。在此处添加一个名为“Process”的菜单，单击该菜单应触发应用程序类中的回调 menuActionProcess 方法，我在其中制作进度条并将其与主窗口的状态栏附加（实际代码还有很多其他内容，我在这里给出的是重新排列为伪示例的必要部分），最后在上面代码中提到的 BatchProcesser 类中，我正在这样做 -

```
from PySide.QtGui import *
from PySide.QtCore import *

class BatchProcesser(QThread):
     __errorHappened = False
     def __init__(self, parent=None):
         QThread.__init__(self, parent)
         self.exiting = False
     def run(self):
         for a in range(101):
            print a
            QThread.msleep(100)
            self.emit(SIGNAL("progress(int)"), a)
            print a 
```

据我了解，这应该在与主线程不同的线程中更新附加到状态栏的进度条。这将允许用户自由地与 GUI 交互。

现在，如果我尝试冲洗它，一切都很好，直到我点击“处理”菜单。然后，进度条平息但不更新，控制台充满错误 -

> 0 QPixmap：在 GUI 线程之外使用像素图是不安全的
> 
> QPixmap：在 GUI 线程之外使用像素图是不安全的
> 
> QPixmap：在 GUI 线程之外使用像素图是不安全的
> 
> QPixmap：在 GUI 线程之外使用像素图是不安全的
> 
> 0
> 
> 1
> 
> QPixmap：在 GUI 线程之外使用像素图是不安全的
> 
> QPixmap：在 GUI 线程之外使用像素图是不安全的
> 
> QPixmap：在 GUI 线程之外使用像素图是不安全的
> 
> QPixmap：在 GUI 线程之外使用像素图是不安全的
> 
> [xcb] 出队时队列中有未知请求
> 
> [xcb] 这很可能是一个多线程客户端并且 XInitThreads 没有被调用
> 
> [xcb] 中止，抱歉。
> 
> python: ../../src/xcb_io.c:178: dequeue_pending_request: 断言 `!xcb_xlib_unknown_req_in_deq' 失败。
> 
> 中止（核心转储）

我非常需要任何帮助。我无法找出和/ot 指出错误的原始原因并进行修复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T09:22:49.423

问题在于如何将信号连接到插槽：

```
 QtCore.QObject.connect(self.processThread, QtCore.SIGNAL("progress(int)"),self.progressBar, QtCore.SLOT("setValue(int)"), QtCore.Qt.DirectConnection) 
```

在这里，您明确地强制执行 DirectConnection。这是错误的！它使槽在调用者的线程中被处理。这意味着progressBar 的GUI 更新发生在进程线程中，而不是GUI 线程中。但是，绘图只允许在 GUI 线程中。

将一个线程的信号连接到另一个线程的插槽是非常好的。但是，您需要`AutoConnection`（默认设置，它将识别线程并使用`QueuedConnection`）或`QueuedConnection`.

此行应该可以解决您的问题：

```
 QtCore.QObject.connect(self.processThread, QtCore.SIGNAL("progress(int)"),self.progressBar, QtCore.SLOT("setValue(int)"), QtCore.Qt.QueuedConnection) 
```

请参阅[http://doc.qt.io/archives/qt-4.7/qt.html#ConnectionType-enum](http://doc.qt.io/archives/qt-4.7/qt.html#ConnectionType-enum)。

# android - Google Oauth 多设备

> ID：12138956
> 
> 赞同：1
> 
> 时间：2012-08-27T09:00:19.927
> 
> 标签：android, google-drive-api

我目前正在制作一个 Google Drive 应用程序。该应用程序已经运行良好，现在它可以在本机视图中列出 Google Drive Files。我发现的问题是，当我在 2 个不同的设备上使用相同的帐户进行 oauth 时（一个在 2.3 中运行，另一个在 4.0 中运行），姜饼会出现如下错误：

> 08-27 15:29:22.659: W/System.err(4425): com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized

如果我使用 2 个不同的帐户，该应用程序在两台设备上都能正常运行。我的问题：是否可以在多个设备上使用单个帐户（oauth 帐户）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:57:51.903

是的，有可能。

您的错误几乎可以肯定是您的应用程序/环境中的问题。

401 错误仅仅意味着您需要一个新的访问令牌。这种情况经常发生（通常每小时一次），因此您的应用需要捕获此错误并刷新令牌。

# excel - vba从word表复制到excel

> ID：12138958
> 
> 赞同：2
> 
> 时间：2012-08-27T09:00:37.757
> 
> 标签：excel, vba, ms-word

我正在尝试从 word 文件中的特定表的单元格生成一个包含 5 列的 excel 文件（从 word 表复制到 excel）。我的word文件有280个表。我在处理我想从我的 word 文件中复制的单元格时没有问题。但我不知道为什么结果是一个空白的 excel 文件。也许我的粘贴方法错了呃我不知道...... 这是我的代码：

```
Sub copyfromwordtoexcel()
    Dim exApp As Excel.Application
    Dim exDoc As Excel.Workbook
    Set exApp = CreateObject("Excel.Application")
    Set exDoc = exApp.Workbooks.Add
    For xx = 1 To ActiveDocument.Tables.Count
    On Error Resume Next
    ActiveDocument.Tables(xx).Cell(2, 2).Range.Copy
    exApp.Visible = True
    Cells(xx, 1).Select
    ActiveSheet.Paste
    Application.Visible = True
    exApp.Visible = False
    ActiveDocument.Tables(xx).Cell(3, 2).Range.Copy
    exApp.Visible = True
    Cells(xx, 2).Select
    ActiveSheet.Paste
    i = ActiveDocument.Tables(xx).Rows.Count
    ActiveDocument.Tables(xx).Cell(i - 2, 2).Range.Copy
    exApp.Visible = True
    Cells(xx, 3).Select
    ActiveSheet.Paste
    Application.Visible = True
    ActiveDocument.Tables(xx).Cell(i - 1, 2).Range.Copy
    exApp.Visible = True
    Cells(xx, 4).Select
    ActiveSheet.Paste
    Application.Visible = True
    ActiveDocument.Tables(xx).Cell(i, 2).Range.Copy
    exApp.Visible = True
    Cells(xx, 5).Select
    ActiveSheet.Paste
    Application.Visible = True
    exApp.Visible = True
    Next
End Sub 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:10:08.257

经过一些审查，我发现我应该在我的粘贴中使用 pastespecial 更正的代码如下

```
Sub copyfromwordtoexcel()
Dim exApp As Excel.Application
Dim exDoc As Excel.Workbook
Set exApp = CreateObject("Excel.Application")
Set exDoc = exApp.Workbooks.Add
For xx = 1 To ActiveDocument.Tables.Count
On Error Resume Next
If ActiveDocument.Tables(xx).Columns.Count = 2 Then

ActiveDocument.Tables(xx).Cell(2, 2).Range.Copy
exApp.Visible = True
Cells(xx, 1).Select
ActiveSheet.PasteSpecial (xlPasteAll)

Application.Visible = True
exApp.Visible = False
ActiveDocument.Tables(xx).Cell(3, 2).Range.Copy
exApp.Visible = True
Cells(xx, 2).Select
ActiveSheet.PasteSpecial (xlPasteAll)
i = ActiveDocument.Tables(xx).Rows.Count
ActiveDocument.Tables(xx).Cell(i - 2, 2).Range.Copy
exApp.Visible = True
Cells(xx, 3).Select
ActiveSheet.PasteSpecial (xlPasteAll)
Application.Visible = True
ActiveDocument.Tables(xx).Cell(i - 1, 2).Range.Copy
exApp.Visible = True
Cells(xx, 4).Select
ActiveSheet.PasteSpecial (xlPasteAll)
Application.Visible = True
ActiveDocument.Tables(xx).Cell(i, 2).Range.Copy
exApp.Visible = True
Cells(xx, 5).Select
ActiveSheet.PasteSpecial (xlPasteAll)
Application.Visible = True
exApp.Visible = True
End If

Next 
```

结束子

# android - 来自 SQLite 数据库的 WebView 中的动态 HTML 页面

> ID：12138965
> 
> 赞同：3
> 
> 时间：2012-08-27T09:01:16.167
> 
> 标签：android, sqlite, webview

如何制作动态 html（从 sqlite 数据库获取数据并插入 html）并在 webView 中加载 html。

对于静态 html，我的代码正在运行。如何创建动态 html 并将其加载到 android 的 webview 中？

# android - 更改默认拨号音

> ID：12138967
> 
> 赞同：0
> 
> 时间：2012-08-27T09:01:19.913
> 
> 标签：android

我正在创建一个 android 应用程序，在其中我试图修改默认的拨号键盘音（1,2,3 ....）（不是来电者的曲调等）这是我第一种使用这种 android 应用程序的方法。

谁能指导我如何实现这一目标？我在某处读到“ToneGenerator”类可以用来实现我的想法，但不确定如何使用这个类。

这里的一点帮助将不胜感激。

谢谢。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:32:20.857

使用以下代码生成音调。

```
ToneGenerator generator = new ToneGenerator(AudioManager.STREAM_MUSIC,100);
generator.startTone(ToneGenerator.TONE_DTMF_0);
Thread.sleep(500);
generator.stopTone();
generator.release(); 
```

根据您的需要更改 TONE_DTMF_0

# android - getSherlockActivity() 与 getActivity()

> ID：12138969
> 
> 赞同：11
> 
> 时间：2012-08-27T09:01:24.347
> 
> 标签：android, actionbarsherlock

我正在使用 SherlockFragment，直到今天我一直使用 getActivity() 方法来获取托管片段的活动实例。现在我意识到 SherlockFragment API 中也有这个方法。我应该使用哪一个？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T09:03:41.787

看起来`getSherlockActivity`只是一个捷径：

```
(SherlockActivity) getActivity() 
```

# sql-server - 查询每个用户/应用程序的 SQL Server 资源

> ID：12138979
> 
> 赞同：0
> 
> 时间：2012-08-27T09:02:15.087
> 
> 标签：sql-server, sql-server-2005

我知道没有简单的方法来查询每个数据库的资源使用情况（cpu 时间、磁盘读取/写入），但是有没有办法查询每个特定连接字符串或用户的信息？

我正在构建一个使用 Entity Framework 连接到 SQL Server 数据库的 ASP.Net MVC3 应用程序；我用的是标准版。我想知道我的应用程序在数据库服务器上的成本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:23:44.080

使用 sp_who 或 sp_who2 并将结果集放入一个表中并使用该表供您使用。

# gwt - 没有可用于类型 net.sf.json.JSONObject 的源代码；你忘了继承一个必需的模块吗？

> ID：12138981
> 
> 赞同：-3
> 
> 时间：2012-08-27T09:02:15.920
> 
> 标签：gwt, gwt2

我是 GWT 的新手。

我必须向 GWT 服务器发送一个 HashMap。所以我使用的是 JSON。这个 Hashmap 是文件的一个属性。文件使用窗体发送到服务器。

我创建了一个隐藏的小部件，将其放置在表单面板上。在 formpanel.submit 之前，我尝试将此 hashmap 转换为 String 。

```
JSONObject jsonObject = JSONObject.fromObject(documentPropertiesToSend);
hidden.setValue(jsonObject.toString()); 
```

当我运行应用程序时，它给了我一个错误。

```
**No source code is available for type net.sf.json.JSONObject; did you forget to inherit a required module?** 
```

所以在 gwt.xml 文件中，我添加了这一行

```
<inherits name ="net.sf.JSONObject" /> 
```

现在，当我运行我的 webApplication 时，我看不到在浏览器上运行它的 URL。

如何解决这个问题呢。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:06:33.510

GWT 101。在 Stack Overflow 上已经有很多这样的“没有可用的源代码”问题。

[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsClient](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsClient)（第一段）

在客户端，使用[http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/json/client/JSONObject.html](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/json/client/JSONObject.html) （或 AutoBeans）

# node.js - 按需 require()

> ID：12138983
> 
> 赞同：2
> 
> 时间：2012-08-27T09:02:35.587
> 
> 标签：node.js, require, ondemand

假设我创建了一个库，`./libname`其中包含一个主文件：`main.js`和多个偶尔与主对象一起使用的可选库文件：`a.js`和`b.js`.

我`index.js`使用以下内容创建文件：

```
exports.MainClass = require('main.js').MainClass; // shortcut
exports.a = require('a');
exports.b = require('b'); 
```

现在我可以按如下方式使用该库：

```
var lib = require('./libname');
lib.MainClass;
lib.a.Something; // Here I need the optional utility object
lib.b.SomeOtherThing; 
```

然而，这意味着，我总是加载“a.js”和“b.js”，而不是在我真正需要它们时加载。

当然我可以手动加载可选模块`require('./libname/a.js')`，但是我失去了漂亮的`lib.a`点符号:)

有没有办法使用某种索引文件实现按需加载？也许，有些`package.json`魔法可以在这里很好地发挥作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:58:05.000

如果您调用“MainClass”来按需动态加载附加模块，这可能是可能的。但我怀疑这也意味着对 api 进行调整以访问模块。

我猜你的动机是“避免”“非必需模块”使用的额外处理。但请记住 Node 是单线程的，因此加载模块的内存占用不是每个连接，而是每个进程。加载一个模块是一次性将其放入内存。

换句话说，模块仅在您启动服务器时才加载，而不是每次有人提出请求时加载。

我认为您从客户端编程中看到了这一点，当需要保存处理和/或 http 请求时加载脚本是有优势的。

在服务器上，您最多可以节省一些内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T11:04:45.857

看起来唯一的方法是使用吸气剂。简而言之，像这样：

```
exports = {
    MainClass : require('main.js').MainClass,
    get a(){ return require('./a.js'); },
    get b(){ return require('./a.js'); }
} 
```

# ruby-on-rails-3 - 找不到 jQuery .on 函数

> ID：12138984
> 
> 赞同：0
> 
> 时间：2012-08-27T09:02:40.917
> 
> 标签：ruby-on-rails-3, jquery

我在 Firebug 控制台中遇到错误：

```
TypeError: $.on is not a function
$.on('ajax:success', 'a[data-remote]', function(xhr, data, status) { 
```

这是我的 modal.js 文件的第 8 行 - 见下文。我正在使用来自 gist.github.com/1456815 的代码。

我可以在 application.js 中找到相关的 jQuery v1.7.2 缩小代码：

```
f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object") 
```

jQuery，然后是我的 modal.js 代码由资产管道加载，所以我不明白错误，当我的索引页面加载时，即在我单击链接之前，它会在 Firebug 中显示。

版本：Ruby 1.9.3、gem 1.8.24、Rails 3.2.1、Rake 0.9.2.2

我的 application.js 源代码：

```
//= require jquery
//= require jquery-ui
//= require jquery.dataTables
//= require TableTools
//= require ZeroClipboard
//= require datatable_highways
//= require datatable_localities
//= require datatable_neighbours
//= require_tree .
//= require modals 
```

根据 RailCasts #205，我已将 rail.js 下载到 /public/javascripts 并重命名为 jquery.rails.js。坦率地说，我不明白这一点，它也没有明确包含在资产管道中。（论坛中似乎对如何处理 rails.js 感到困惑）。

jquery.js 在 /vendor/assets/javascripts 中。

模态.js.coffee：

```
# This file should be "required" into your `application.js` via the Asset Pipeline.

$ ->
  $modal = $('#modal')
  $modal_close = $modal.find('.close')
  $modal_container = $('#modal-container')

  # Handle modal links with the data-remote attribute
  $.on 'ajax:success', 'a[data-remote]', (xhr, data, status) ->
   $modal
    .html(data)
    .prepend($modal_close)
    .css('top', $(window).scrollTop() + 40)
    .show()
   $modal_container.show();

  $.on 'click', '#modal .close', ->
    $modal_container.hide()
    $modal.hide()
    false 
```

谢谢约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:07:27.167

改为执行以下操作：

```
$('#modal .close').on 'click', ->
    # code 
```

或者，更好的是，使用您的代码：

```
$modal_close.on 'click', ->
    # code 
```

# php - 首次尝试时未登录

> ID：12138987
> 
> 赞同：0
> 
> 时间：2012-08-27T09:02:48.287
> 
> 标签：php, javascript, jquery

我有一个独特的问题，我已将此脚本放在正文 onload

`<body onload="document.getElementById('User_Email').focus();">`

当页面加载时，这个脚本会自动将鼠标光标放在电子邮件文本字段中......但我现在面临的问题是......有时我们第一次输入用户名和密码并且在我们点击登录按钮后，光标将通过删除密码移回用户名文本框，如果我们第二次输入用户名和密码，它就可以正常工作...

我不知道它为什么会发生，因为它不会一直发生。你们中有人遇到过同样的问题吗....

有什么解决办法吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:34:19.717

我和 kakarott 在一起，你的标签建议你使用 jQuery。既然习惯将所有 jQuery 代码包装在一个`ready`回调函数中，为什么不使用该功能，并将那个可怕的内联 JS 留在它所属的 1990 年代呢？

```
$(document).ready(function()
{
    $('#User_Email').focus();
}); 
```

应该工作得很好。逐行，此代码仅执行以下操作：

> 如果加载了*document* -object，则调用将焦点设置到`$('#User_Email')`元素的匿名函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:44:24.810

消除`onload="document.getElementById('User_Email').focus();"`

表格`<body>`标签

并添加

```
$(document).ready(function()
{
    $('#User_Email').focus();
}); 
```

在你的`<head>`标签中。

# macos - 暂停 SceneKit 动画

> ID：12138994
> 
> 赞同：3
> 
> 时间：2012-08-27T09:03:12.513
> 
> 标签：macos, core-animation, scenekit

我正在尝试创建一个测试应用程序，用户可以在其中通过单击 SceneView 来暂停动画。SceneView 从在 3d 应用程序 (Cinema 4D) 中创建的 .dae 文件加载动画。该应用程序在启动时成功播放并循环播放动画。

为了暂停动画，我使用了[技术问答 QA1673](https://developer.apple.com/library/ios/#qa/qa2009/qa1673.html)作为参考。对于这个 .dae 文件，动画实际上是作为动画的层次结构出现的，因此我尝试深入到每个底层 CAKeyframeAnimation 并将其速度设置为零。我的代码目前如下所示：

```
- (void)mouseDown:(NSEvent *)event {

     SCNNode *cubeNode = [self.scene.rootNode childNodeWithName:@"C4D_Cube" recursively:YES];
     CAAnimation *cubeAnimation = [cubeNode animationForKey:@"Cube_Anim_01-02-1"];      
     CAAnimationGroup *cubeAnimationGroup = (CAAnimationGroup *)cubeAnimation;

     // cubeAnimationGroup contains 3 CAAnimationGroups, each of which contains a CAKeyframeAnimation.
     // So I directly access each CAKeyframeAnimation and set its speed to zero.
     for (CAAnimationGroup *subGroup in [cubeAnimationGroup animations]) {
          CFTimeInterval pausedTime = CACurrentMediaTime();
          [[subGroup animations] setValue:@0.0 forKey:@"speed"];
          [[subGroup animations] setValue:[NSNumber numberWithFloat:pausedTime] forKey:@"timeOffset"];
     }
} 
```

当我设置断点时，我可以看到关键帧动画的速度确实从 1 变为 0，但动画在场景视图中继续以正常速度播放。我最初尝试将顶级 CAAnimationGroup 的速度设置为零，但这也没有效果。暂停正在进行的动画的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T09:45:46.027

“animationForKey:”返回的动画是运行动画的副本。文档说“尝试修改返回对象的任何属性将导致未定义的行为。” 所以你可以这样做：

```
for(NSString *key in [myNode animationKeys]){
    CAAnimation *animation = [myNode animationForKey:key];
    [animation setSpeed:0]; //freeze
    [animation setTimeOffset:CACurrentMediaTime() - [animation beginTime]]; //move back in time
    [cube addAnimation:animation forKey:key]; //re-add the animation with the same key to replace
} 
```

请注意，如果您只想暂停来自 .DAE 的所有动画，您可能需要执行以下操作：

[mySCNView setPlaying:NO]; //暂停基于场景时间的动画

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-17T09:40:19.903

或者您可以设置`paused`为`true`.

在斯威夫特：

```
mySCNView.scene?.paused = true 
```