# StackOverflow 问答 10975000-10975999

# android - XMPP 服务器的 Android asmack 聊天客户端

> ID：10975001
> 
> 赞同：1
> 
> 时间：2012-06-11T05:50:19.273
> 
> 标签：android, xmpp, openfire, asmack

我正在尝试使用[asmack](http://code.google.com/p/asmack/)库和像 openfire 这样的 XMPP 服务器[构建](http://www.igniterealtime.org/projects/openfire/)一个 Android 聊天客户端。任何人都可以为我的客户端程序提供一些教程或代码片段的链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T05:58:09.943

阅读他们自己的文档：[SMACK DOCS](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T10:11:43.213

您可以从 [Xabber](https://github.com/redsolution/xabber-android) android 客户端开始。

# r - 检查R中向量的元素

> ID：10975003
> 
> 赞同：0
> 
> 时间：2012-06-11T05:50:32.440
> 
> 标签：r, vector

我想检查向量的元素

```
 x = c(0.0153, 0.1352, 0.2820, 0.4629, 0.6944, 0.8919,
          1.0638, 1.2458, 1.4068, 1.5969, 1.7700, 1.9024,
          2.0144, 2.1143, 2.2286, 2.3453, 2.5096, 2.7499,
          3.0299, 3.5061) 
```

在向量的元素之间

```
 y =c(0.0000, 0.0917, 0.2174, 0.3087, 0.4151, 0.8984,
         1.0921, 1.1579, 1.3803, 1.3806, 1.6234, 1.8682,
         2.0565, 2.2194, 2.285, 2.4183, 2.4463, 2.512,
         2.7964, 3.0766, 3.5061) 
```

这意味着这是否是向量`x`的第一个和第二个元素之间的向量的第一个元素`y`，...但不检查最后一个元素`x`。

有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T05:57:30.353

你可能会删除 for 循环

```
x[(x>y[-length(y)])&(x<y[-1])] 
```

并添加最后一个 x 值。我不清楚你是否想要最后一个 x？

或者

```
x[!((x-y[-length(y)])*(y[-1]-x)<0)] 
```

如果你想要最后一个 x

# uitableview - UITTableView 单元格选择会影响同一 UITableView 中的另一个 UITableView 单元格

> ID：10975005
> 
> 赞同：0
> 
> 时间：2012-06-11T05:51:25.720
> 
> 标签：uitableview, xcode4.2, didselectrowatindexpath

我正在开发一个 iPhone 应用程序。我已经在每个带有委托`UITableView`的单元格上实现了复选标记。`didSelectRowAtIndexPath`现在我想选择一个禁用所有其他单元格的单元格（删除复选标记），反之亦然。（例如：选择第8个单元格显示第8个单元格上的复选标记并删除其他单元格的复选标记，然后选择其他单元格显示该单元格上的复选标记并删除第8个单元格上的复选标记）。

如何实现这一点`UITableView`？

如果有人知道请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:11:13.323

您可以通过将这两个 ivars 添加到 UITableViewController 类来跟踪当前检查的单元格来实现此目的：

```
NSInteger currentlyCheckedRow;
NSInteger currentlyCheckedSection; 
```

在您的初始化方法中，将`currentlyCheckedRow`和设置`currentlyCheckedSection`为一个负整数，`-1`这样它就不会被任何可能的行值匹配。

将以下内容添加到您的`-tableView:cellForRowAtIndexPath:`方法中：

```
// determine if cell should have checkmark
cell.accessoryType = UITableViewCellAccessoryNone;
if ( (indexPath.row == currentlyCheckedRow) &&
     (indexPath.section == currentlyCheckedSection) )
{
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
}; 
```

调用时更新`currentlyCheckedRow`ivar ：`-tableView:didSelectRowAtIndexPath:`

```
 currentlyCheckedRow = indexPath.row;
 currentlyCheckedSection = indexPath.section;
 [tableView reloadData]; 
```

# apache-flex - 在 Maven 构建的 WEB-INF 中找不到 java 类

> ID：10975008
> 
> 赞同：0
> 
> 时间：2012-06-11T05:51:49.747
> 
> 标签：apache-flex, web-applications, maven, maven-3, flexmojos

我正在开发一个在后端使用 flex 和 Java 的项目。这是一个网络应用程序项目。问题是当我通过 Eclipse 编译它时它很好。但是当我使用 maven 构建战争时，我的`WEB-INF\classes`文件夹中没有类文件。如果有人遇到过这样的问题，我没有收到任何错误，但仍然没有类文件。

我在这里附上了我的 POM 文件

```
<?xml version="1.0" ?>
<project
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
    xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.abc.def</groupId>
    <artifactId>abc-cde</artifactId>
    <version>0.1</version>
    <packaging>war</packaging>

    <name>abc-cde</name>

    <build>
        <sourceDirectory>src/clv_web_flex/Mxmls</sourceDirectory>
        <plugins>
            <plugin>
                <!-- Plugin runs on Maven version 3.0.3 and so on -->
                <groupId>org.sonatype.flexmojos</groupId>
                <artifactId>flexmojos-maven-plugin</artifactId>
                <version>4.2-beta</version>
                <extensions>true</extensions>
                <executions>
                    <execution>
                        <goals>
                            <goal>copy-flex-resources</goal>
                        </goals>
                        <configuration>
                            <stripVersion>true</stripVersion>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.2</version>
                <configuration>
                    <!-- Excludes jar file in WAR -->
                    <packagingIncludes>WEB-INF/lib/*.jar</packagingIncludes>
                    <webResources>
                        <resource>
                            <!-- this is relative to the pom.xml directory -->
                            <directory>WebContent</directory>
                        </resource>
                    </webResources>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>com.adobe.flexunit</groupId>
            <artifactId>flexunit</artifactId>
            <version>0.85</version>
            <type>swc</type>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>com.adobe.flex.framework</groupId>
            <artifactId>flex-framework</artifactId>
            <version>4.5.1.21328</version>
            <type>pom</type>
        </dependency>
        <dependency>
            <groupId>org.springframework.flex</groupId>
            <artifactId>spring-flex-core</artifactId>
            <version>1.5.2.RELEASE</version>
        </dependency> 
        <dependency>
            <groupId>com.adobe.blazeds</groupId>
            <artifactId>blazeds-common</artifactId>
            <version>3.2.0.3978</version>
        </dependency>
        <dependency>
            <groupId>com.adobe.blazeds</groupId>
            <artifactId>blazeds-core</artifactId>
            <version>3.2.0.3978</version>
        </dependency>
        <dependency>
            <groupId>com.adobe.blazeds</groupId>
            <artifactId>blazeds-proxy</artifactId>
            <version>3.2.0.3978</version>
        </dependency>
        <dependency>
            <groupId>com.adobe.blazeds</groupId>
            <artifactId>blazeds-remoting</artifactId>
            <version>3.2.0.3978</version>
        </dependency>
        <dependency>
            <groupId>com.adobe.blazeds</groupId>
            <artifactId>cfgatewayadapter</artifactId>
            <version>0.020108</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>
        <dependency>
            <groupId>com.adobe.blazeds</groupId>
            <artifactId>flex-messaging-common</artifactId>
            <version>4.0.0.14931</version>
        </dependency>
        <dependency>
            <groupId>com.adobe.blazeds</groupId>
            <artifactId>flex-messaging-core</artifactId>
            <version>4.0.0.14931</version>
        </dependency>
        <dependency>
            <groupId>com.adobe.blazeds</groupId>
            <artifactId>flex-messaging-opt</artifactId>
            <version>4.0.0.14931</version>
        </dependency>
        <dependency>
            <groupId>com.adobe.blazeds</groupId>
            <artifactId>flex-messaging-proxy</artifactId>
            <version>4.0.0.14931</version>
        </dependency>
        <dependency>
            <groupId>com.adobe.blazeds</groupId>
            <artifactId>flex-messaging-remoting</artifactId>
            <version>4.0.0.14931</version>
        </dependency>
        <dependency>
            <groupId>com.adobe.blazeds</groupId>
            <artifactId>flex-rds-server</artifactId>
            <version>272564</version>
        </dependency>
        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>1.4.5</version>
        </dependency>
        <dependency>
            <groupId>taglibs</groupId>
            <artifactId>standard</artifactId>
            <version>1.1.2</version>
        </dependency>
        <dependency>
            <groupId>xalan</groupId>
            <artifactId>xalan</artifactId>
            <version>2.4.1</version>
        </dependency>
    </dependencies>

    <repositories>
        <repository>
            <id>spring-external</id>
            <name>Spring External Repository</name>
            <url>http://maven.springframework.org/external</url>
        </repository>
        <repository>
            <id>flex-mojos-repository</id>
            <url>http://repository.sonatype.org/content/groups/flexgroup</url>
        </repository>
    </repositories>
    <pluginRepositories>
        <pluginRepository>
            <id>flex-mojos-plugin-repository</id>
            <url>http://repository.sonatype.org/content/groups/flexgroup</url>
        </pluginRepository>
    </pluginRepositories>
</project> 
```

我运行`mvn install`插件。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:40:52.393

如果您尝试删除 JAR 文件而不删除其他文件，则应替换`<packagingIncludes>WEB-INF/lib/*.jar</packagingIncludes>`为`<packagingExcludes>WEB-INF/lib/*.jar</packagingExcludes>`

# java - 将 Swing 对象导入 Matlab

> ID：10975010
> 
> 赞同：0
> 
> 时间：2012-06-11T05:52:13.553
> 
> 标签：java, matlab

我正在尝试将其导入[Matlab](http://www.javaworld.com/javaworld/jw-09-2007/jw-09-checkboxtree.html?page=2)项目。我知道我需要参考Matlab 上`com.mathworks.mwswing.checkboxtree`的`com.mathworks.mwswing.MJTree`库。[我在这里](http://www.mathworks.com/help/techdoc/matlab_external/f44062.html)几乎浏览了与将 Java 导入 Matlab 相关的文档，包括小节。

但是，我仍然不知道如何完成我在 Matlab 中尝试做的事情，并且无法找到示例。如何找出如何包含这些特定对象？

顺便说一句，这是我通过输入`javaclasspath`命令得到的：

```
>> javaclasspath

        STATIC JAVA PATH

    C:\Program Files\MATLAB\R2012a\java\patch                                                       
    C:\Program Files\MATLAB\R2012a\java\jarext\AnimatedTransitions.jar                              
    ...                                             
    C:\Program Files\MATLAB\R2012a\java\jar\mwswing.jar                                             
    ...

        DYNAMIC JAVA PATH

        <empty> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:29:31.583

看看[Matlab-Java 编程的未记录秘密](http://undocumentedmatlab.com/matlab-java-book/)。

此外，正如@High Performance Mark 所说， [undocumentedmatlab.com是前面提到的书的作者提供的一个很好的资源。](http://undocumentedmatlab.com/)

# android - Android可绘制文件夹命名约定

> ID：10975016
> 
> 赞同：0
> 
> 时间：2012-06-11T05:52:48.203
> 
> 标签：android, naming-conventions

我只想为 layout-sw320dp 创建一个可绘制文件夹。

我得到`drawable-ldpi`,`drawable-mdpi`和.`drawable-hdpi``drawable-xhdpi`

如何命名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T05:56:19.777

这很简单。只需在其中再创建一个文件夹`res`并为其命名`drawable-sw320dp`。

# asp.net - 从 InputStream 读取 base64 数据到文件 C#

> ID：10975021
> 
> 赞同：2
> 
> 时间：2012-06-11T05:53:02.707
> 
> 标签：asp.net, c#-4.0, c#-3.0

我的应用程序从剪贴板获取图像并将其保存到服务器。获取图像是通过 java 和 javascript 完成的。我的 aspx 代码隐藏接收此数据（base64）并写入文件。这是我的代码

```
 byte[] buffer = new byte[Request.InputStream.Length];
    int offset = 0;
    int cnt = 0;
    while ((cnt = Request.InputStream.Read(buffer, offset, 10)) > 0)
    {
        offset += cnt;
    }
    fileName = DateTime.Now.ToString("yyyyMMddHHmmssffff") + ".png";
    string base64 = System.Text.Encoding.UTF8.GetString(buffer);

    byte[] bytes = Convert.FromBase64String(base64);
    System.IO.FileStream stream = new FileStream(@"D:\www\images\" + fileName, FileMode.CreateNew);
    System.IO.BinaryWriter writer =new BinaryWriter(stream);
    writer.Write(bytes, 0, bytes.Length);
    writer.Close(); 
```

我的问题是 base64 。我得到这个字符串为 utf8 编码。似乎这会篡改图像，我无法打开或查看它们。

[编辑] 这是创建数据的 java 代码

```
StringBuffer sb = new StringBuffer();
ByteArrayOutputStream stream = new ByteArrayOutputStream();
sb.append("data:image/").append("png").append(";base64,").append(Base64.encode(stream.toByteArray())); 
```

所以我会得到一个像这样的字符串 data:image/png;base64,iVBORw0KGgoA.. 并使用 ajax 我将此字符串发布到我的 aspx 页面

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T06:07:10.737

在解码`data:image/png;base64,`前读取输入流时，应删除前缀。`base64`例如，您可以在以下位置拆分`,`：

```
byte[] buffer = new byte[Request.InputStream.Length];
Request.InputStream.Read(buffer, 0, buffer.Length);
string data = Encoding.Default.GetString(buffer);
string[] tokens = data.Split(',');
if (tokens.Length > 1)
{
    byte[] image = Convert.FromBase64String(tokens[1]);
    string fileName = DateTime.Now.ToString("yyyyMMddHHmmssffff") + ".png";
    string path = Path.Combine(@"D:\www\images", fileName);
    File.WriteAllBytes(path, image);
} 
```

# fpdf - 如何使用 FPDF 将图像定位到新窗口或 _blank？

> ID：10975024
> 
> 赞同：3
> 
> 时间：2012-06-11T05:53:30.777
> 
> 标签：fpdf

在我的应用程序中，PDF 在网页中打开，在下面的示例中，当用户单击 Logo.png 时，它会被重定向到同一页面中的 FPDF 站点，但我想在新窗口中打开链接，而不是在同一窗口中打开，因此用户打开了 PDF。

```
$pdf->Image('logo.png',10,10,30,0,'','http://www.fpdf.org'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-14T07:09:37.147

是的，我已经为此尝试了一些解决方法，但目前似乎不可能。但我已经使用**ViewerJS**实现了这一点。

只需使用 viewerjs(pdf js) 显示 pdf。只需将这一行`$('a').attr('target', '_blank');` 放在`div.setAttribute('data-loaded', true);`内部`viewer.js`文件之后。

你会发现目标空白。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-28T01:30:44.657

抱歉，我很确定目前这是不可能的。

# mysql - smarty中的分页

> ID：10975026
> 
> 赞同：1
> 
> 时间：2012-06-11T05:54:10.567
> 
> 标签：mysql, pagination, smarty

当用户搜索某些项目时，我想在我的网站中添加分页。我尝试了以下代码：

```
//Array Declaration//
$pages = array();
$userlist = array();

//paging variable//
$userlist_pg = $_GET['list_pg'];

if(empty($userlist_pg))
    $userlist_pg = 1;
else
    $userlist_pg=$_GET['list_pg']; 

$userlist_limit = 10;//ADMIN_ITEMLIST_PER_PAGE;  
$userlist_start = (($userlist_pg - 1) * $userlist_limit ); 

$userlist_currentpage = $userlist_pg; 
$userlist_back = $userlist_pg-1; 
$userlist_next = $userlist_pg + 1; 

    $query_string = "select  cms_id,cms_variable,cms_page_name,cms_last_edited from  tbl_cms";

//Paging  variables start from here-------------------------
        $orderlist = array();
        $paging = new PagedResults();
        $paging->TotalResults = table_query_count($query_string);
        $InfoArray = $paging->InfoArray();
        $query_string.=" LIMIT ".$InfoArray["MYSQL_LIMIT1"].", ".$InfoArray["MYSQL_LIMIT2"];
        $PageVarName = 'client_page';

        $smarty->assign("page_display", getpagelist($InfoArray["CURRENT_PAGE"],$InfoArray["PREV_PAGE"],$InfoArray["NEXT_PAGE"],$InfoArray["TOTAL_PAGES"],$InfoArray["Second_next"],$InfoArray["third_next"],$InfoArray["fourth_next"],$PageVarName));
        $smarty->assign("currentpage",$InfoArray["CURRENT_PAGE"]);
        $smarty->assign("total_pages",$InfoArray["TOTAL_PAGES"]);
//Paging  variables end here------------------------- 
```

它给出了以下错误。

1.  在第 110 行调用 /home/www/jobplacement4u.com/hungry_uni/modules/search/action/search_action.php 中未定义的函数 table_query_count()

2.  在第 30 行的 /home/www/jobplacement4u.com/hungry_uni/modules/search/action/search_action.php 中找不到类“PagedResults”

3.  在第 111 行调用 /home/www/jobplacement4u.com/hungry_uni/modules/search/action/search_action.php 中未定义的方法 PagedResults::InfoArray()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:41:37.147

看起来您忘记将文件包含在函数`table_query_count`和类的定义中`PagedResults`

# winforms - 使用 C++ Windows 窗体应用程序查找窗口坐标的可能方法

> ID：10975036
> 
> 赞同：0
> 
> 时间：2012-06-11T05:56:17.047
> 
> 标签：winforms, visual-c++

我想编写一个应用程序，它会自动检测并填充下图所示窗口中的文本字段：

![在此处输入图像描述](../Images/5ee5f62601ce5d7dd8dd64a2ff29ee91.png)

（假设要输入的数据在文件中）。

问题是我的应用程序如何找到这个文本字段？

如果我能够通过程序在桌面上找到文本字段的位置，我就可以完成这项工作。

有人可以帮助我了解查找此文本字段的可能方法吗？

我在 C++ 中使用 Windows 窗体应用程序。

**更新：**

我玩过间谍++。
我使用 spy++ 来查找窗口句柄。我通过将查找器放在我感兴趣的窗口上来做到这一点。它以十六进制值提供句柄：00080086（实际上只是为了测试目的，我将查找器工具放在 Visual Studio 新项目页面上）。如何将此十六进制值解释为有意义的窗口名称？

见下图。在“名称”字段下进入文本字段“输入名称”的下一步是什么。

****任何示例代码都将受到高度赞赏。**

**我对任何解决方案持开放态度，不一定是我如何做到这一点。**

![在此处输入图像描述](../Images/49926c8a27962d4ed8f4a7be22c8d95e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:37:12.910

一种解决方案是使用[Microsoft UI 自动化](http://msdn.microsoft.com/en-us/library/ms788733.aspx)技术。自 Vista 以来，它与 Windows 一起提供了开箱即用的功能。它可以从 .NET 使用，也可以从使用 COM 的 C++ 使用。

[这是一个简短的 C++ 控制台应用程序示例，它每秒显示当前位于桌面窗口中间的UI 自动化元素](http://msdn.microsoft.com/en-us/library/windows/desktop/ee671425%28v=vs.85%29.aspx)的类名（您可以让它运行并查看它显示的内容）：

```
int _tmain(int argc, _TCHAR* argv[])
{
    CoInitialize(NULL);
    IUIAutomation *pAutomation; // requires Uiautomation.h
    HRESULT hr = CoCreateInstance(__uuidof(CUIAutomation), NULL, CLSCTX_INPROC_SERVER, __uuidof(IUIAutomation), (LPVOID *)&pAutomation);
    if (SUCCEEDED(hr))
    {
        RECT rc;
        GetWindowRect(GetDesktopWindow(), &rc);
        POINT center;
        center.x = (rc.right - rc.left) / 2;
        center.y = (rc.bottom - rc.top) / 2;
        printf("center x:%i y:%i'\n", center.x, center.y);
        do
        {
            IUIAutomationElement *pElement;
            hr = pAutomation->ElementFromPoint(center, &pElement);
            if (SUCCEEDED(hr))
            {
                BSTR str;
                hr = pElement->get_CurrentClassName(&str);
                if (SUCCEEDED(hr))
                {
                    printf("element name:'%S'\n", str);
                    ::SysFreeString(str);
                }
                pElement->Release();
            }
            Sleep(1000);
        }
        while(TRUE);
        pAutomation->Release();
    }

    CoUninitialize();
    return 0;
} 
```

从这个示例中，您可以做的是启动您想要自动化的应用程序并查看示例是否检测到它（它应该）。

您还可以使用[UISpy 工具](http://msdn.microsoft.com/en-us/library/ms727247.aspx)来显示可以在目标应用程序中自动化的完整树。您应该看到此目标应用程序的窗口和其他元素（文本字段），并且您应该看到控制台应用程序示例显示的元素。

从`pElement`示例中发现的内容中，您可以使用适当的条件（类名、名称、控件类型等）调用[FindFirst以获取文本字段。](http://msdn.microsoft.com/en-us/library/windows/desktop/ee696029%28v=vs.85%29.aspx)在此文本字段中，您将使用一种应该可用的[UI 自动化模式（可能是 TextPattern 或 ValuePattern）来获取或设置文本本身。](http://msdn.microsoft.com/en-us/library/windows/desktop/ee671195%28v=vs.85%29.aspx)

很酷的是，您可以在实际编码**之前**使用 UISpy 工具检查所有这些是否可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:15:36.193

您可以枚举窗口然后找到它。为了在您的屏幕截图上探索应用程序，您可以使用与 Visual Studio 一起分发的 Spy++ (spyxx.exe)。在您的代码中，您可以使用[EnumWindows](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633497%28v=vs.85%29.aspx)和[EnumChildWindows](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633494%28v=vs.85%29.aspx)枚举所有窗口或所有子窗口以找到您需要的窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:57:40.827

尽管 Simon 给出的答案被接受并且是最好的答案，但我仍然为未来的访问者提供这个[链接](http://msdn.microsoft.com/en-us/magazine/cc163288.aspx)，其中包含更多关于 Windows 应用程序的 UI 自动化的描述。.

此外，对于自动化 Web 应用程序，可能需要访问[此链接](http://msdn.microsoft.com/en-us/magazine/cc337896.aspx)

# windows - windows文件输出重定向问题

> ID：10975038
> 
> 赞同：2
> 
> 时间：2012-06-11T05:56:22.313
> 
> 标签：windows, perl, ftp, io-redirection

我正在尝试将 ftp 脚本的输出重定向到 txt 文件。我希望在文件末尾找到以下格式的 ftp 输出：

```
#this is a part of the complete output after running ftp script via perl
226 Transfer complete
ftp: 100000000 bytes sent in 14.81Seconds 6753.56Kbytes/sec.
ftp> bye 
```

这是在命令提示符下运行命令时获得的。但是，当我将输出重定向到 txt 文件时，我得到以下信息：

```
226 Transfer complete
ftp: 100000000 bytes sent in Seconds Kbytes/sec.
ftp> 14.816753.56bye 
```

为了完整起见，我正在通过 perl 运行一个 ftp 脚本（使用 system("ftp -s:script.txt");）并在命令行上使用 '>' 获取其输出。有人可以解释一下出了什么问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:14:51.047

我猜在 ftp 应用程序写入“ftp: 100000000 bytes sent in Seconds Kbytes/sec.”之后，它会将光标移回“Seconds”和“Kbytes/sec”之前。分别写“14.81”和“6753.56”。如果将输出重定向到文件，则光标移动 API 调用将不起作用，并且这些数字将附加到下一行的末尾。

（我从未见过 Windows ftp 应用程序的代码，但我在几年前编写的程序中遇到了同样的问题。）

# python - Python返回范围列表的组合？

> ID：10975045
> 
> 赞同：3
> 
> 时间：2012-06-11T05:57:22.723
> 
> 标签：python, list, permutation

我正在根据范围列表返回列表的所有组合。

所以如果我有：

```
test_list = [range(0,11,1),range(0,11,2),range(0,11,5)] 
```

我想根据范围返回一个包含所有可能组合的列表。例如：

```
output_list[[0,0,5],[0,0,10],[0,2,0],[0,4,0],[0,6,0].......] 
```

但我所能做的就是：

```
import itertools

test_list = [range(0,11,1),range(0,11,2),range(0,11,5)]
output_list = []
for i in itertools.permutations(test_list):
    if i not in output_list:
        output_list.append(i) 
```

哪个返回每个排列的范围，（再次列出范围）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T06:02:03.350

```
output_list = list(itertools.product(*test_list)) 
```

# android - 在 android eclipse 的第 n 页上显示结果

> ID：10975046
> 
> 赞同：0
> 
> 时间：2012-06-11T05:57:23.850
> 
> 标签：android, eclipse

假设我有五个屏幕（即五个活动）。第一个活动将在同一页面上的 textview 上返回一些值。但我只想在第五页（即第五屏）上显示该答案。但这个概念已经写在第一页上。

如何实现这个概念。根据我的知识，我已经用谷歌搜索了它，但仍在寻找。

谢谢你的时间！

# ios - xcode 安装应用程序的代码

> ID：10975047
> 
> 赞同：1
> 
> 时间：2012-06-11T05:57:29.777
> 
> 标签：ios, xcode, installation

我想用代码来实现，我写的程序是安装其他应用到手机上，我发现网上说是把app解压后复制到/var/mobile/Applications目录下，我照做，但是，安装好的程序，你必须重启手机才能显示和安装应用程序无法运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-09T21:50:39.067

您可以结合使用 xcodebuild 和 xcrun 命令来安装和运行您的应用程序。

xcodebuild 编译您的项目并在 DSTROOT 中创建一个 .app 文件。

```
xcodebuild -sdk iphonesimulator8.4 -arch i386 install DSTROOT=~/MyApp 
```

如果您使用的是 .xcworkspace 而不是 .xcodeproj 的一些 pod 文件，则在您的 xcodebuild 中添加 -workspace 和 -scheme。

```
xcodebuild -sdk iphonesimulator8.4 -arch i386 -workspace MyApp.xcworkspace -scheme MyApp install DSTROOT=~/MyApp 
```

创建 .app 文件后，您可以运行到模拟器设备。

```
xcrun instruments -w "iPhone 6 (8.4 Simulator)"
xcrun simctl install booted ~/MyApp/Applications/MyApp.app 
```

如果您想在另一个模拟器设备上运行，请尝试查看所有可用设备。

```
xcrun instruments -s 
```

# android - 在 Android 中，有没有办法在运行时而不是在清单中为活动设置“android:configChanges”？

> ID：10975056
> 
> 赞同：1
> 
> 时间：2012-06-11T05:58:21.927
> 
> 标签：android, android-manifest, backwards-compatibility

我的应用程序设置为在 minSdk = 5 上运行，但绝大多数用户使用的是 SDK 8 (FroYo) 及更高版本。我希望能够将 android:configChanges="uiMode" 用于我的主要活动，但我不能这样做，因为直到 SDK 级别 8 才引入该模式。所以，我希望我能做到这一点runtime -- 检查设备上运行的是哪个 SDK 级别，然后使用反射添加该参数。

那可能吗？

**编辑：** 问题是每当用户的手机连接到扩展坞时，我的应用程序就会被终止，然后重新创建。我试图通过包含 android:configChanges="uiMode" 来避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T08:53:58.440

在仔细阅读[Android 参考](http://developer.android.com/reference/packages.html)之后，您可以在运行时从清单中更改很少。这是出于安全考虑，因为通过`PackageManager`，人们可以获得有关设备上任何应用程序的非常具体的信息。虽然启用/禁用给定组件很容易，但在大多数其他情况下，您只能读取清单信息......而不是写入它。

**备择方案**

*   您可能会创建一个单独的 APK，支持 API 级别 8。

*   您可以手动检查配置状态并在更改时运行您的代码。配置的对象参考在[这里](http://developer.android.com/reference/android/content/res/Configuration.html)。

**编辑：（新信息）**

虽然您无法更改 configChanges，但我发现[这个问题](https://stackoverflow.com/a/7893148/501932)与您的问题密切相关。事实证明，您可能不必这样做。这意味着您可以在支持 new 时使用 Android 的向后兼容模式`configChanges`。如果上面的链接被破坏，这里是 URL：[https ://stackoverflow.com/a/7893148/501932](https://stackoverflow.com/a/7893148/501932)

为了将其用于您，它建议设置一个新的`targetSdk`同时保持您原来的`minimumSdk`. 它还要求您拥有更新的 SDK 本身。显然，这对于使用 AdMob API 的用户来说是一笔大买卖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:08:25.913

**前向兼容性的应用程序配置**

我提供的答案是一个简单的做什么，但没有太多或为什么，这应该更新答案，并作为对 SO 社区的道歉，因为与海报争吵，这是毫无意义的，也没有给对话增加任何内容。

我认为扩展这个问题很重要，因为这类问题经常出现，开发人员很着急（我们不是所有人），我们倾向于剪切/复制/粘贴并担心它的原因后来这主要解决了问题，但偶尔只会增加问题。

如果您了解 android 运行时的实际工作原理，您通常可以通过使用清单中的块应用简单的最佳实践模式来解决这些类型的问题，并在编译应用程序时充分利用构建目标，然后进行一些简单的在编译和运行时级别进行测试。

**显现**

**minSdkVersion =**

非常直接，它是您将在特定设备上支持的最低构建目标。如果你不设置它，它默认为 1。

这里唯一需要注意的是，如果您的构建目标高于您的 minSdkVersion，那么您可能会调用设备上不存在的 API，更多关于构建目标下的 API。

这将从具有较低操作系统支持的设备的各种市场/播放存储库中过滤您的应用程序。

你如何做出这个决定取决于你，如果你必须让你的应用程序在每台设备上都可以运行，但请查看[Platform Distribution](http://developer.android.com/resources/dashboard/platform-versions.html)以做出明智的决定。

如果你愿意绕过 0.9% 的市场，那么目标是 2.1，这似乎是合理的，但这是开发商/公司做出的决定，如果你可以绕过 25% 的市场，那么选择 2.3，它具有显着优势但有点大多数通用应用程序都难以下咽。

链接图表会不时更新。

**目标SDK =**

如果您不应用此值，那么它默认为您设置的任何 minSdkVersion。这意味着，当您在具有更高操作系统支持的设备上运行时，某些新外观和/或已实现的行为将被绕过，以支持旧的处理方式。

例如，如果您将 10 应用于 minSdkVersion，然后您的应用程序在具有姜饼 (11) 的设备上运行，它将不会尝试使用全息主题或禁用屏幕兼容模式。一般来说，这可能会给您的应用带来“过时”的外观和感觉。

另一方面，如果您将其设置为更高的值，例如 11，那么系统将使用操作系统的本机外观，直至您设置的值。最佳做法是将其设置得尽可能高，然后在模拟器中的更高级别设备上进行测试，以确保这是可以接受的。

[此处记录了影响操作系统跳转之间的](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html)兼容性行为的一些更改

这不会阻止您在早期设备上运行，或影响那些早期设备的外观或感觉（如果这是您的目标，请参阅 ActionBarSherlock 和 Android 支持库）

**maxSdkVersion =**

一般来说，这正如它所说的那样，它限制了应用程序在具有来自 Google 市场/播放的更高操作系统级别的设备上的可用性和部署。

在 android 2.0 上，它也会拒绝安装 apk，如果设备更新到高于此设置的级别，它甚至会删除您的应用程序，2.0.1+ 删除了此行为的第二部分，但市场仍将基于过滤在上面。

一般来说，通常没有理由设置此值，因此请将其留空。

**构建目标** 当您在 Eclipse（或其他）中设置构建目标时，您是在告诉编译器哪些 API、常量等应该对您的应用程序可见。

![在此处输入图像描述](../Images/dcf2c6a22fd2964216c0fea5769e6fd5.png)

一般来说，它会添加一个 jar 文件，其中包含所有这些定义/声​​明，但当然不是实际的类/方法，这样您就可以为您想要的任何目标操作系统编译应用程序。

当您的应用程序在设备上运行时，它会链接到实际的 android 操作系统/支持 jar 文件（或者如果它们不存在，则将它们吹散）

如果您选择的构建目标高于您愿意支持的水平，那么当您尝试调用不存在的方法，甚至是旧操作系统上不存在的类时，当然会发生坏事。

另一方面，如果您愿意仔细管理和测试它，那么您可以获得前向兼容性，因为您可以在较新的设备上使用新的 API，只要您不尝试在较早的设备上这样做。

**最佳实践 - 简短版** 这是发帖人试图完成的任务，如果遵循最佳实践，效果很好，这些都是一般性的

```
minSdkVersion    = lowest general API you will support
targetSdkVersion = highest behavioral model you are willing to allow
maxSdkVersion    = leave it blank
Build Target     = generally as high as is currently supported 
```

真正需要注意的是，您必须避免旧版本和新版本之间的 API 不匹配，并确保您的应用在更高版本上看起来和运行正常。

通常，应谨慎使用高于最低目标操作系统的方法/类，并在编译和运行时级别进行测试，因为需要付出一些努力才能安全地使用它们。

**这是我的做法**

```
minSdkVersion    = 7 ( I can live with a 0.9% clip again your choice ) 
targetSdkVersion =15 ( highest as of this writing ) 
maxSdkVersion    = ( blank )

Build Target = 15 
```

在开发时，我从不使用 7 上不可用的 API，除非我真的需要这样做，在海报问题中，他本可以使用收到的广播将类似的功能恢复到 6/7 (2.0/2.1) 但他说他需要 API 3 支持，所以他必须支持前向兼容性。

您可以使用的一个工具，而且大多数不仅仅是为了让事情保持直截了当，就是将 developer.android.com 网站上的 API 级别设置为您的最低 SDK 级别，这在开发时为您提供了一个必须支持的提示前向兼容性。

![在此处输入图像描述](../Images/4e925b2c03ed2709445a6d5d5a0d1107.png)

它仍会显示其他 API 调用，但会显示为灰色，告诉您需要额外的努力来支持它们

如果您确实需要使用较新的 API，则需要执行 if then else 以便仅在较新的设备上调用它们，这将允许您支持新功能而无需在较旧的设备上强制关闭。

所以一般来说，如果你支持更高的 API 级别，这些调用应该用这样的东西包装（注意 .SDK_INT 是自 API 4 以来的测试）

```
If ( Build.VERSION.SDK_INT  >= API11_SUPPORT ) {
    switch(newConfig.uiMode) {
        case ...
} 
```

**测试——手动方法（CI 集成方法留给读者；-）**

1.  使用设置为 minSdkVersion 的构建目标进行编译——这将使您在正在使用的任何较新的 API 上编译错误，检查它们，如果您处理得很好，如果不是现在就是时候了。

对于我在步骤 1 中看到的每个问题，我都会在代码中添加两项（清单/xml）

```
// TODO Compatibility xxx 
if (DEBUG) Log.i(“MyApp”,” Compatibility xxx”); 
```

然后，我可以使用 eclipse TODO 窗格在发货前检查兼容性问题，并针对最低/最高以及操作系统版本之间的任何重要问题进行测试

2.  在 minSDKVersion 设备/模拟器上进行测试，如果您不进行全面测试，这有点棘手，通常使用上面的步骤 1 来确保我练习了这些代码块

3.  在构建目标设备/模拟器上进行测试，以确保外观和感觉按预期工作

如果您认为这有点工作，但当您需要它时，您应该正确地做，并确保您的应用程序不会中断。

希望这对试图找出类似情况的人有用，下面是我对海报的第二次回应，干杯。

更新：

我仍然不知道作者在问什么，但是如果他问是否有一种方法可以使用 onConfigurationChanged 处理程序检测 7 及以下版本中有关 uiMode （对接的东西）的配置更改，那么没有，因为这只是在API 8。

API 2.0+ 系统中发送了一个广播事件，但显然这有一些问题，似乎并不完全可靠

如果他询问是否有办法通过 onConfigurationChanged 处理程序在 API 8 及更高版本的设备上通过设置活动清单中的标志来支持它，那么当然有

当然，他可能会问一些完全不同的事情，鉴于他的职位，很难准确地说出他想要做什么，但本着合作的精神：

从项目属性中选择 >= 8 的 API，最佳实践是在创建应用程序时使用可用的最高 API，但必须注意不要调用设备上不可用的任何 API。

然后在清单中使用（duh）

```
<activity
            android:name=".myActivity"
             android:configChanges="uiMode|orientation|keyboardHidden" 
```

这编译得很好（这确实是唯一的问题以及为什么需要在 eclipse 项目属性中设置更高的 api）这将在 7 及以下运行良好，它不会触发任何事件，因为当然 API 7 及以下设备不会' t 识别 uiMode 标志 (duh)

API 8 及更高版本当然会识别它并发送正确的事件，因此在 api 7 上将写入日志，在 api 8+ 上它将（如果停靠等）当然，如果确实发生了调用，则很可能是8+ 相关，因此在调用它们之前您需要一个操作系统检查块。

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    Log.i("myActivity","uiMode="+newConfig.uiMode);

} 
```

如果您在 7 API 仿真器上编译和运行并触发停靠广播，则没有任何反应，更改为 8 API 仿真器即可

```
adb shell am broadcast -a android.intent.action.DOCK_EVENT --ei android.intent.extra.DOCK_STATE 2 
```

# .net - 继承一个新的基类（继承旧的基类）是一个重大变化吗？

> ID：10975061
> 
> 赞同：4
> 
> 时间：2012-06-11T05:58:38.967
> 
> 标签：.net, inheritance, compatibility

我有继承 OldBaseClass 的类 LegacyClass。

我正在考虑进行更改以在两者之间引入一个新课程，以便

LegacyClass 继承 NewBaseClass 并且 NewBaseClass 继承 OldBaseClass。

NewBaseClass 和 OldBaseClass 都不是抽象的。此更改是否会破坏依赖（甚至可能继承）LegacyClass 的旧 MSIL 程序集的程序集兼容性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T05:54:06.223

如[this answer](https://stackoverflow.com/questions/5321880/backwards-compatibility-when-changing-base-class)中所述，只要您实际上并未更改任何现有行为（更具体地说，取决于该行为的更改方式），就可以了。如果新类所做的只是添加新的（单独的）方法/属性，那么你应该没问题。但是，通常情况下，*这取决于*. 考虑以下问题：

*   谁在使用您的程序集（外部人员或仅您组织内的人员）？
*   你能重新编译客户端吗？
*   **您是否能够在这些客户端上运行自动化或手动单元测试？**
*   您的目标是添加或更改 LegacyClass 的功能吗？

# ajax - 导航页面后不显示数据

> ID：10975064
> 
> 赞同：0
> 
> 时间：2012-06-11T05:58:59.207
> 
> 标签：ajax, jquery-mobile

我有问题。我有一个调查表格，在这个表格中，我还使用 ajax 来调用一些数据。当用户单击取消时，我希望它导航到使用 ajax 在列表视图中显示数据列表的其他页面。对于单击和导航部分，我已成功将其带到我想要的页面，但问题是，它不再显示数据列表。我使用与其他页面相同的方式，但为此我无法获得..任何帮助？我已经多次检查了我的代码，但我不明白是什么让它出错了。这是我的页面调查表代码：

```
$('#MrateCourse').live('pageinit', function(){

    var rowInput = "1";
    var pageInput = "1";
    var idInput = "${courseId}";
    var regNoInput = "${regNo}";

    $.ajax({
        url: '${pageContext.request.contextPath}/getRegisteredClassesDetails.html',
        data: ( {rows: rowInput, page: pageInput, courseId: idInput, regNo: regNoInput}),
        type: 'POST',
        success: function(json_results){
            $('#list').append('<ul></ul>');
            listItems = $('#list').find('ul');
            $.each(json_results.rows, function(courseId) {
            html  = ' Course Name    :  
                    + '<b>' + json_results.rows[courseId].courseName + '</b>';
            html += '</br> Registered Person :  
                    + '<b>' + json_results.rows[courseId].fullName + '</b>';

            listItems.append(html);
            });

            $('#list ul').listview();
         }
    }); 
});

$(function() {
    var currentTime = new Date();
    var month = currentTime.getMonth() + 1;
    var day = currentTime.getDate();
    var year = currentTime.getFullYear();

    if(day<10){
        day='0'+day;
    } 
    if(month<10){
        month='0'+month;
    } 

    var currentTime = new Date();
    var hours = currentTime.getHours();
    var minutes = currentTime.getMinutes();

    var suffix = "AM";
    if (hours >= 12) {
    suffix = "PM";
    hours = hours - 12;
    }
    if (hours == 0) {
    hours = 12;
    }

    if (minutes < 10)
    minutes = "0" + minutes;

    $('#dateTime').html("<b>" + month + "/" + day + "/" + year + "  " + hours + ":" + minutes + " " + suffix + "</b>");
});

    <form id="" action="${pageContext.request.contextPath}/MRegisteredClasses.phone" method="POST">
    <table>
            <tr>
                <td>Date: 
                    <span id="dateTime"></span><br/></td>
            </tr>
            <tr>
                <td>Company:</td>
                <td><input type="text" value=""/><br/></td>
            </tr>
            <tr>
                <td><b>Based on your experience in this course, please answer<br>the following questions:
                <br>1 = Strongly Disagree, 5 = Strongly Agree</b></td>
            </tr>
            <tr>
                <td>The web-based training media used was of high quality.</td>
                <td><select>
                        <option value=""></option>
                        <option value="5">5</option>
                        <option value="5">4</option>
                        <option value="3">3</option>
                        <option value="2">2</option>
                        <option value="1">1</option>
                    </select><br/></td>
            </tr>
            <tr>
                <td>I had enough time to learn the subject matter covered in the course.</td>
                <td><select>
                        <option value=""></option>
                        <option value="5">5</option>
                        <option value="5">4</option>
                        <option value="3">3</option>
                        <option value="2">2</option>
                        <option value="1">1</option>
                    </select><br/></td>
            </tr>
            <tr>
                <td>My knowledge and/or skills increased as a result of this course.</td>
                <td><select>
                        <option value=""></option>
                        <option value="5">5</option>
                        <option value="5">4</option>
                        <option value="3">3</option>
                        <option value="2">2</option>
                        <option value="1">1</option>
                    </select><br/></td>
            </tr>
            <tr>
                <td>Additional comments or ideas to improve this course:</td>
            </tr>
            <tr>
                <td><textarea rows="3" ></textarea></td>
            </tr>
            <tr>
                <td>What additional topics would you like to see addressed in a future online course?</td>
            </tr>
            <tr>
                <td><textarea rows="3"></textarea></td>
            </tr>
            <tr>
                <td align="left">
                    <input type="submit" data-inline="true" id="submit" value="Submit This Survey" class="ui-btn-right"
                        onClick="confirm( 'Thanks for filling the survey' )"/>
                    <a href="${pageContext.request.contextPath}/MRegisteredClasses.phone" class="ui-btn-right"
                        data-role="button" data-inline="true">Cancel</a>
                </td>
            </tr>
    </table>
    </form> 
```

这是我需要导航的页面的代码。

```
<div data-role="page" id="MregisteredClasses">
<div data-role="content">
    <h3>Courses Name</h3>
    <p id="note">*Click at the courses to view the details</p>
    <h1></h1>
    <div id="courseName"> 
        <ul data-role="listview" data-inset="true" id="list"></ul>
        <script type="text/javascript">
            $('#MregisteredClasses').on('pageinit', function(){
                var rowInput = "1";
                var pageInput = "1";

                $.ajax({
                 url: '${pageContext.request.contextPath}/getRegisteredClassesData.html',
                 data: ( {rows : rowInput , page : pageInput}),
                 type: 'POST',

                success: function(json_results){
                    $('#list').append('<ul data-role="listview" data-inset="true" data-split-icon="gear"</ul>');
                    listItems = $('#list').find('ul');
                    $.each(json_results.rows, function(key) {
                      html = '<li <h3><a href="${pageContext.request.contextPath}/MRegisteredClassesDetail.phone?courseId=' 
                             + [json_results.rows[key].courseId] + '&regNo=' + [json_results.rows[key].regNo] +
                             '"rel="external">' + json_results.rows[key].courseName+ '</a></h3>'
                             + '<a href="${pageContext.request.contextPath}/MRateCourse.phone?courseId=' 
                             + [json_results.rows[key].courseId] + '&regNo=' + [json_results.rows[key].regNo] + 
                             '"rel="external">RATE THIS COURSE</a>';
                    listItems.append(html); 
                    });

                $('#list ul').listview(); 
                },
            });
            });
        </script>
    </div> 
</div><!-- /content --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:53:39.797

我已经知道了。我添加`data-ajax="false"`到我的表格中。

# android - 如何在android中设置应用程序独立参数，如服务器地址

> ID：10975068
> 
> 赞同：0
> 
> 时间：2012-06-11T05:59:15.347
> 
> 标签：android

对于我正在考虑的真正常见但重要的问题，我需要一个解决方案。

我创建了应用程序，我在 **/res/values/strings.xml**文件中硬编码了我的服务器地址。假设如果我的服务器地址由于某些原因更改了运行时，那么我必须在文件中进行更改，然后我必须重新编译它。

那么有什么方法可以将我的服务器地址从我的应用程序中删除。所以我们不必重新编译应用程序。取而代之的是，它将从外部读取新的服务器地址并恢复其正常工作...

任何类型的相关建议、链接、博客表示赞赏..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:24:04.323

当我在 Android 中制作应用程序时，我主要创建了一个 Utility 类，例如 Constants.java 、 Utils.java 等。在这些类中，我将所有常量数值和字符串值如下所示：

```
 public static String ip="74.117.153.111"; 
  public static final String LOGIN_TOKEN_URL = "http://"+ ip + "/api/getLoginToken";
  public static final String USERNAME_PARAM = "username";
  public static final String PASSWORD_FIELD_EMPTY_ERROR = "Please enter password";
  public static final int GRID_ICON_COUNT = 4;
  public static final String FACEBOOK_KEY = "16411636362877862"; 
```

这些是我们通常在这里和那里使用的某种类型的常量。所以我把他们放到一个不同的专门班里。所以现在当我在某个地方需要它们的价值时，我会这样：

```
params.put(Constants.USERNAME_PARAM, username);
fbRocket = new FBRocket(this, Constants.APP_NAME,Constants.FACEBOOK_KEY); 
```

这种方法的好处是，如果我以后必须更改在很多地方使用的值，那么我不必在任何地方都更改它。我将只更改 Constants.java 中的值，并且此更改将在整个应用程序中复制。

```
Utils.showErrorMessage(this, Constants.PASSWORD_FIELD_EMPTY_ERROR, Constants.TOAST_VISIBLE_SHORT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:10:09.047

我通过阅读[这篇](http://www.javacodegeeks.com/2011/01/android-quick-preferences-tutorial.html)博客得到了答案。

这表示您应该将分片首选项与扩展**PreferenceActivity 的活动一起使用。**

在这里，您可以设置您的服务器地址和所有随时间变化的动态内容。这样您就不必重新编译apk。只需更改共享首选项中的设置。

阅读所有应用程序开发人员都想知道的这个重要的沼泽。

# java - 如何为 Apache-CXF JAX-WS 启用 Spring Security

> ID：10975070
> 
> 赞同：5
> 
> 时间：2012-06-11T05:59:25.923
> 
> 标签：java, spring, spring-security, cxf

如何在 Apache-CXF 上为 apache JAX-WS 启用 Spring Security？网络上的示例包括 Jax-RS 示例，但我不使用 Jax-RS。我不想使用 cxf 的安全性。如何在我的代码中实现它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T02:39:54.323

两种可能的方式：

1.  将[BasicAuthenticationFilter 或 DigestAuthenticationFilter](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/springsecurity-single.html#basic)放在 CXF Servlet 前面。

2.  [将 WS-Security UsernamePasswordToken](http://cxf.apache.org/docs/ws-security.html#WS-Security-UsernameTokenAuthentication)与 CXF 一起使用并编写一个 CallbackHandler，它 a) 创建一个 UsernamePasswordAuthenticationToken，b) 调用 authenticationManager.authenticate()，c) 将身份验证存储在 SecurityContextHolder 中。

请注意，上面没有涵盖注销的概念，因为登录会话通常使用 cookie 实现，并且上面是无状态方法。如果您确实需要注销，那么您应该考虑使用 OAuth，因为您可以通过使访问令牌无效来实现注销。

# iphone - 将插座添加到我的视图控制器的最简单方法是什么？

> ID：10975071
> 
> 赞同：0
> 
> 时间：2012-06-11T05:59:26.983
> 
> 标签：iphone, objective-c, xcode, cocoa, ipad

当我添加新视图时，我总是做同样无聊的工作。

如果我添加 UIWebView，我会这样做，

*   将代码添加到头文件。（声明，财产）
*   将代码添加到源文件。（合成，viewDidUnload，dealloc）
*   在 IB 中添加 UIWebView 并连接到 File's Owner 中的插座。

[视图控制器.h]

```
@interface ViewController : UIViewController
{
    UIWebView *_webView;
}

@property (nonatomic, retain) IBOutlet UIWebView *webView;

@end 
```

[视图控制器.m]

```
@synthesize webView = _webView;

- (void)viewDidUnload
{
    [super viewDidUnload];
    self.webView = nil;
}
- (void)dealloc
{
    [_webView release];
    [super dealloc];    
} 
```

如果我应该添加 3 个标签和 2 个按钮怎么办？如果我必须添加 textview 和一些 imageviews 怎么办？

你不觉得很无聊吗？我想听听你的想法。

我希望有更简单的方法可以将出口添加到代码中。有人有好主意吗？:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T06:15:29.637

使用时`Interface Builder`，如果您选择一个对象，将其拖动到您的标题，您会看到一个弹出窗口，您可以在其中命名它，这样您就可以减少输入。如下图所示：

![在此处输入图像描述](../Images/10dff37e7e07d086ac390513cede168f.png)

这将自动`IBOutlet UIButton *myButton`为您声明，并将`release`and`nil`代码插入到`dealloc`and`viewDidUnload`方法中。

同样的方法也适用于动作，如下所示。

![在此处输入图像描述](../Images/6160a83c37dd7e422de9bb0c78eff0e8.png)

一旦你`Connect`它会自动将新的动作`-(IBAction)cancelSelected:(id)sender`插入你的`@implementation`类。

重点是，您可以在`2`参考连接中完成所有无聊的事情，并将数据输入到`2`字段中。:)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T06:13:30.417

在 Xcode 4 中，您可以简单地控制从 UI 元素拖动到 .h/.m 文件。如果你拖到 .h，Xcode 会为你创建一个属性，并在对应的 .m 中合成它，如果你拖到 .m，Xcode 会为你生成一个 IBAction 方法。

另外，我建议切换到 ARC，以避免担心内存管理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T06:17:58.267

如果您使用的是 xcode 4.0，则可以通过拖放创建 outlet 属性。按照步骤：

1.  打开xcode
2.  打开您需要创建插座的 nib 文件。
3.  单击右上角的编辑器的中间选项卡。它将在您的笔尖附近打开一个新文件。
4.  确保它是您要在其中创建插座的控制器的 .h 文件。
5.  现在选择控件，右键单击它并拖动到 .h 文件。命名插座。就是这样。它将为您创建一个属性，并自动合成它。
6.  它还将插入 和 的`dealloc`代码`viewDidUnload`。

希望这有帮助。

# php - 支持矢量图像的 php pdf 生成器

> ID：10975072
> 
> 赞同：1
> 
> 时间：2012-06-11T06:00:11.760
> 
> 标签：php, html, pdf, dompdf

我们有一个应用程序，其中我们有矢量图像并使用 dompdf 将 html 转换为 pdf。但是 dompdf 不支持矢量图像。

任何人都可以向我推荐任何支持表格、背景图像和矢量图像的基于 php 的 pdf 生成器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:59:17.983

[TCPDF](http://www.tcpdf.org/index.php)支持 PDF 中的矢量图像。那是用于 PDF 生成的纯 PHP 库。

在此处查看示例 #32：http: [//www.tcpdf.org/examples.php](http://www.tcpdf.org/examples.php) http://www.tcpdf.org/examples/example_032.phps

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:01:38.520

[Sprint PDF](http://www.sprintpdf.com) supports vector images. And it does not need any server-side installation—it is a REST API that can be integrated into any application.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T06:16:39.713

Web 上矢量图形的关键标准是 SVG。

考虑构建一个 SVG 文档，然后使用 RSVG、Inkscape 或 Apache Batik 将其转换为 PDF。

# c# - C# 树视图索引

> ID：10975073
> 
> 赞同：0
> 
> 时间：2012-06-11T06:00:17.250
> 
> 标签：c#, arrays, treeview, indexing

我对树视图以及节点索引的工作方式有一点问题。在我的程序中，我有一个可以包含任意数量用户的数据库。每个用户由回车分隔（即每行一个用户）。我正在创建一个列出数据库中所有用户的树视图对象。如果用户单击特定节点，我如何引用该节点/处理它被选中，因为我正在从数据库中动态创建节点？

```
StreamReader getMembers = new StreamReader(@"[data]\db\users.db");
        List<string> mems = new List<string>();
        members.Nodes.Add("Members");
        while (!getMembers.EndOfStream)
        {
            mems.Add(getMembers.ReadLine());
        }
        foreach (string o in mems)
        {
            TreeNode n = new TreeNode(o);
            members.Nodes[0].Nodes.Add(n);
        } 
```

数据库和程序：

![在此处输入图像描述](../Images/e591f0555ad62f90ecbfa6c7f89f7aa3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:04:48.600

如果您试图获取被选中的树节点，您可以通过`TreeView.SelectedNode`属性来实现...（http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.selectednode.aspx )

如果您想在选定的树节点上处理事件，请注册该`TreeView.AfterSelect`事件 (http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.afterselect)

例子：

```
private void TreeView1_AfterSelect(System.Object sender, 
    System.Windows.Forms.TreeViewEventArgs e)
{

    // Vary the response depending on which TreeViewAction
    // triggered the event. 
    switch((e.Action))
    {
        case TreeViewAction.ByKeyboard:
            MessageBox.Show("You like the keyboard!");
            break;
        case TreeViewAction.ByMouse:
            MessageBox.Show("You like the mouse!");
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:05:44.217

假设您使用的是标准表单树视图，听起来您想订阅[TreeView.AfterSelect](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.afterselect.aspx)上的事件。

```
// Handle the After_Select event.
private void TreeView1_AfterSelect(System.Object sender, 
    System.Windows.Forms.TreeViewEventArgs e)
{
  // If (TreeView1.SelectedNode...
} 
```

# javascript - CssClass 属性的这个值是什么意思？

> ID：10975084
> 
> 赞同：1
> 
> 时间：2012-06-11T06:01:39.600
> 
> 标签：javascript, jquery, asp.net

```
CssClass="validate[required,funcCall[checkDate]]" 
```

这是 a 的属性`<asp:TextBox`。并且该页面具有 js 功能`checkDate` 我不确定它是 asp.net 功能还是 js/jquery，

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:03:23.713

这是 jquery 验证引擎功能。检查以下链接以获取更多信息：

[http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:26:47.813

我相信这段代码是 jQuery 验证插件的一部分。

# android - 如何使用 jquery mobile 创建单独的移动网站

> ID：10975086
> 
> 赞同：0
> 
> 时间：2012-06-11T06:01:56.463
> 
> 标签：android, jquery-mobile

嗨，我正在使用 jquery 开发移动网站，我只是想检查是否可以为 iphone 和 android 创建特定于设备的版本。如果可能的话，请帮助我提供一些可以找到示例的链接。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:37:39.547

您可以使用电话差距框架来开发网站，以兼容使用 html5 的所有平台。看看这个对你有用的网站[phonegap 。](http://phonegap.com/)

# php - Smarty 模板 - foreach 一次只显示 2 个结果

> ID：10975089
> 
> 赞同：1
> 
> 时间：2012-06-11T06:02:11.360
> 
> 标签：php, mysql, smarty

早上好/下午，

我正在寻求以下方面的帮助：

```
{foreach key=num item=customfield from=$customfields}
<div class="control-group" style="margin-bottom:0px">
    <label class="control-label" for="customfield{$customfield.id}">{$customfield.name}</label>
    <div class="controls" style="margin-left:145px;">
    {$customfield.input} {$customfield.description}
    </div>
</div>
{/foreach} 
```

我的 smarty 模板有一个登录页面，该页面设置有 2 列注册页面，如下所示：

col1 有姓名、姓氏、电子邮件等。 col2 有地址、地址 2 等。

这些都对齐以使 col1 在表格的左侧和 col2 在右侧。

现在使用上面的代码，foreach 代码，它只会将样式设置为 1 列表，而不是 2。

我将如何让它一次显示 2 个结果并将它们显示在表格中。

我要感谢大家提前提供帮助。

编辑 2。

```
{foreach key=num item=customfield from=$customfields}
{if $customfields@interation is even by 2}
<tr><td>{$customfield.name}{$customfield.input}{$customfield.description}</td>
{else} <td><td>{$customfield.name}{$customfield.input}{$customfield.description}</td>
</tr>{/if}{/foreach} 
```

需要改变什么？

编辑 3。

使用以下代码解决了问题。

```
{foreach from=$customfields item=customfield name=ODDEVEN }
<tr><td style="border-left:0px;">
{if $smarty.foreach.ODDEVEN.index % 2}
<div class="control-group">
    <label class="control-label" for="customfield{$customfield.id}" style="width:125px;">{$customfield.name}</label>
    <div class="controls" style="margin-left:145px;">
    {$customfield.input} {$customfield.description}
    </div>
</div>
{else}</td>
<td><div class="control-group" style="margin-bottom:0px">
    <label class="control-label" for="customfield{$customfield.id}" style="width:125px;">{$customfield.name}</label>
    <div class="controls" style="margin-left:145px;">
    <div class="fixinput span4">{$customfield.input}</div> {$customfield.description}
    </div>
</div>
</td></tr>
{/if}
{/foreach} 
```

# javascript - 如何在javascript中从浏览器加载xml数据

> ID：10975091
> 
> 赞同：0
> 
> 时间：2012-06-11T06:02:22.783
> 
> 标签：javascript, ajax

我正在尝试使用 URL 从浏览器加载数据。现在我正在为此使用javascript。

```
window.onload = function()
        {
            // this is URL from which i want to load data. 
            // myURL in this xml file is there. (myURL is running in localhost)
            var url = "myURL&callback=processDATA"; 
            loadDATA(url);
        }

function loadDATA(url)
        {

            var headId = document.getElementsByTagName('head')[0];
            var newScript = document.createElement('script');
            newScript.type = 'text/javascript';
            newScript.src = url;
            headId.appendChild(newScript);
        }

function processDATA(feed) //this is function that is called after loadDATA(url).
        {
             // i want my XML file in feed variable. 
             // But this function is not called after  loadDATA.
        } 
```

我不知道该怎么办。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:25:58.353

此函数意味着服务器 API 知道使用 JSONP 的“回调”参数包装您的函数。您是否也在创建返回 XML 的服务器 API？如果是这样，您需要让它检查是否存在回调查询字符串参数，然后它将用于返回数据。这就是它在 c# 中的样子：

```
if (request.QueryString["callback"] != null)
    response.write(request.QueryString["callback"] + "('" + xmldata + "');"); 
```

所以它在返回时执行。

如果这是一个公共 API，请找出他们是否有 jsonp 的特定回调参数名称。它通常被称为 jsoncallback。

# javascript - 由具有内联javascript的元素分配的变量中的`this`对所有元素或已分配值的活动元素均有效

> ID：10975093
> 
> 赞同：1
> 
> 时间：2012-06-11T06:02:23.610
> 
> 标签：javascript, html, variables

我在想，如果我们将`this`属性添加到元素的 onlick 事件中，例如`onclick="a=this"`. 在此步骤中，选择“p”元素或变量`a`可用作`this`.

**请参阅此代码-**

```
 <p onclick="a=this">Click me to assign value<b> this</b> to variable<b> a</b></p>

 <p>This is Another paragraph will this be affected</p>

 <button onclick="a.style.visibility='hidden'">
 When this button will be clicked, what will happen?, "button" will become invisible or "p"
 </button> 
```

假设如果我们单击第一段，然后单击按钮，哪些元素/元素将变得不可见。按钮会受到它或第一段的影响，还是可能是另一段？

我用谷歌找到了更多关于这个主题的信息，但没有得到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:05:02.327

`this`是的，当您被分配为全局变量时，它将隐藏第一段：http `a`: [//jsfiddle.net/cJDNf/](http://jsfiddle.net/cJDNf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:05:51.127

第一段将变得不可见。但是您可能需要初始化`a`为全局变量，也可能不需要。

# c# - 类构造函数中的简单编译错误

> ID：10975096
> 
> 赞同：0
> 
> 时间：2012-06-11T06:02:56.883
> 
> 标签：c#, unity3d

我有一个非常简单的类，由于构造函数中的默认参数而无法编译。语言为 C#，该类将用于 Unity3d 游戏。所以这个编译错误发生在 Unity 的“IDE”中

编译错误：

> Assets/Utilities/GenericClasses.cs(30,94)：错误 CS1736：分配给可选参数“nName”的表达式必须是常量或默认值

```
public class Element {
    public static readonly string NULL_NAME = "___NULL_NAME___";
    public enum elementType {E_ELEMENT, E_MODEL, E_VIEW, E_SUPER, E_ARC};
    private string name;
    private elementType type;

    // line 30 is below
    public Element(elementType nType=elementType.E_ELEMENT, string nName=NULL_NAME) {
        type = nType;
        name = nName;
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:05:10.830

您应该使用常量值而不是 a `static readonly`：

```
public const string NULL_NAME = "___NULL_NAME___"; 
```

您的代码无法编译的原因是您试图`nName`为不支持的构造函数中的参数分配一个非常量的默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T06:07:19.520

NULL_NAME 不是常量，它是只读的。

只读变量可以在构造函数中初始化，因此在编译时不知道可选参数的默认值所需的值，因为编译器将替换调用中省略的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T06:05:31.767

试试这个

```
public const string NULL_NAME = "___NULL_NAME___"; 
```

# c# - 如何从考勤机捕获数据

> ID：10975100
> 
> 赞同：1
> 
> 时间：2012-06-11T06:04:20.990
> 
> 标签：c#, java, php, time-and-attendance

我用 PHP、MySQL 开发了一个在线休假管理系统，运行良好，我只有一个问题，我们必须上传一个包含每日捕获数据的 csv 文件。我想自动完成。

我们有一[台 Star Link 考勤机](http://www.starlinkindia.com/OurProducts/ClassicModel.aspx)。

Star Link 软件不提供任何自定义报告格式。

我想开发一个可以从这台机器上获取数据的应用程序模块？是否可以？以及我们可以使用哪种语言（PHP、C#、Java）？

任何资源链接都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:27:10.797

我已经解决了这个问题。

机器获取的所有数据都存储在 mssql 数据库中，我只是在 C# .Net 中开发了一个程序，该程序从 mssql 获取数据并将其导出为 CSV 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:34:29.833

我喜欢 Java，但每种语言都可以，只要它有 lib- 来解析 CSV 文件。您可以使用 FTP、HTTP 来获取该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-13T07:55:24.677

试试[这个](http://dnaextrim.github.io/php_zklib/)它使用UDP协议与考勤机通信。这[对于](http://dnaextrim.github.io/python_zklib/)Python

# android - 图片从 android sdcard 发布到 facebook 墙上

> ID：10975102
> 
> 赞同：0
> 
> 时间：2012-06-11T06:04:24.383
> 
> 标签：android, facebook

我只想将我的 android sdcard 中的图像发布到 facebook 墙上。我使用了下面的代码。但无法在 FB 墙上看到图像发布。

我的代码：

```
private void fbWallPost() {
                facebook = new Facebook("My appId");
                asyncRunner = new AsyncFacebookRunner(facebook);
                facebook.authorize(facebook.this, new String[] { "user_status",
                        "user_about_me", "email", "read_stream",
                        "publish_stream" }, new DialogListener() {

                public void onComplete(Bundle values) {

                    JSONObject jObject;
                    try {
                        jObject = new JSONObject(facebook.request("me"));
                        FileInputStream fis = new FileInputStream(
                                "/sdcard/codeofaninja.jpg");
                        Bitmap bi = BitmapFactory.decodeStream(fis);
                        ByteArrayOutputStream baos = new ByteArrayOutputStream();
                        bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
                        data = baos.toByteArray();

                        Bundle params = new Bundle();
                        params.putString("method", "photos.upload");
                        params.putByteArray("picture", data);

                        asyncRunner.request("me/photos", params, "POST",
                                new mRequestListener(), null);

                    } catch (MalformedURLException e) {

                        e.printStackTrace();
                    } catch (JSONException e) {

                        e.printStackTrace();
                    } catch (IOException e) {

                        e.printStackTrace();
                    }
                }

                public void onFacebookError(FacebookError error) {
                    Toast.makeText(facebook.this,
                            "Facebook onFacebookError", Toast.LENGTH_LONG)
                            .show();
                }

                public void onError(DialogError e) {
                    Toast.makeText(facebook.this, "Facebook onError",
                            Toast.LENGTH_LONG).show();
                }

                public void onCancel() {

                }
            });
        }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T11:03:30.537

嗨，请检查以下代码可能对您有帮助：-

```
package com.example.facebookuploadandroid;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import android.app.AlertDialog;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.drawable.Drawable.Callback;
import android.location.Location;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.text.TextUtils;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

import com.facebook.AppEventsLogger;
import com.facebook.FacebookAuthorizationException;
import com.facebook.FacebookException;
import com.facebook.FacebookOperationCanceledException;
import com.facebook.FacebookRequestError;
import com.facebook.HttpMethod;
import com.facebook.Request;
import com.facebook.Response;
import com.facebook.Session;
import com.facebook.SessionState;
import com.facebook.UiLifecycleHelper;
import com.facebook.model.GraphObject;
import com.facebook.model.GraphPlace;
import com.facebook.model.GraphUser;
import com.facebook.widget.FacebookDialog;
import com.facebook.widget.FriendPickerFragment;
import com.facebook.widget.LoginButton;
import com.facebook.widget.PickerFragment;
import com.facebook.widget.PlacePickerFragment;
import com.facebook.widget.ProfilePictureView;

public class MainActivity extends FragmentActivity
{

    private static final String PERMISSION = "publish_actions";
    private static final Location SEATTLE_LOCATION = new Location("") {
        {
            setLatitude(47.6097);
            setLongitude(-122.3331);
        }
    };

    private final String PENDING_ACTION_BUNDLE_KEY = "com.facebook.samples.hellofacebook:PendingAction";

    private Button postStatusUpdateButton;
    private Button postPhotoButton;
    private Button pickFriendsButton;
    private Button pickPlaceButton;
    private LoginButton loginButton;
    private ProfilePictureView profilePictureView;
    private TextView greeting;
    private PendingAction pendingAction = PendingAction.NONE;
    private ViewGroup controlsContainer;
    private GraphUser user;
    private GraphPlace place;
    private List<GraphUser> tags;
    private boolean canPresentShareDialog;
    private boolean canPresentShareDialogWithPhotos;

    private enum PendingAction {
        NONE, POST_PHOTO, POST_STATUS_UPDATE
    }

    private UiLifecycleHelper uiHelper;

    private Session.StatusCallback callback = new Session.StatusCallback() {
        @Override
        public void call(Session session, SessionState state, Exception exception) {
            onSessionStateChange(session, state, exception);
        }
    };

    private FacebookDialog.Callback dialogCallback = new FacebookDialog.Callback() {
        @Override
        public void onError(FacebookDialog.PendingCall pendingCall, Exception error, Bundle data) {
            Log.d("HelloFacebook", String.format("Error: %s", error.toString()));
        }

        @Override
        public void onComplete(FacebookDialog.PendingCall pendingCall, Bundle data) {
            Log.d("HelloFacebook", "Success!");
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        uiHelper = new UiLifecycleHelper(this, callback);
        uiHelper.onCreate(savedInstanceState);

        if (savedInstanceState != null) {
            String name = savedInstanceState.getString(PENDING_ACTION_BUNDLE_KEY);
            pendingAction = PendingAction.valueOf(name);
        }

        setContentView(R.layout.main);

        loginButton = (LoginButton) findViewById(R.id.login_button);
        loginButton.setUserInfoChangedCallback(new LoginButton.UserInfoChangedCallback() {
            @Override
            public void onUserInfoFetched(GraphUser user) {
                MainActivity.this.user = user;
                updateUI();
                // It's possible that we were waiting for this.user to be
                // populated in order to post a
                // status update.
                handlePendingAction();
            }
        });

        profilePictureView = (ProfilePictureView) findViewById(R.id.profilePicture);
        greeting = (TextView) findViewById(R.id.greeting);

        postStatusUpdateButton = (Button) findViewById(R.id.postStatusUpdateButton);
        postStatusUpdateButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                onClickPostStatusUpdate();
            }
        });

        postPhotoButton = (Button) findViewById(R.id.postPhotoButton);
        postPhotoButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                onClickPostPhoto();
            }
        });

        pickFriendsButton = (Button) findViewById(R.id.pickFriendsButton);
        pickFriendsButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                onClickPickFriends();
            }
        });

        pickPlaceButton = (Button) findViewById(R.id.pickPlaceButton);
        pickPlaceButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                onClickPickPlace();
            }
        });

        controlsContainer = (ViewGroup) findViewById(R.id.main_ui_container);

        final FragmentManager fm = getSupportFragmentManager();
        Fragment fragment = fm.findFragmentById(R.id.fragment_container);
        if (fragment != null) {
            // If we're being re-created and have a fragment, we need to a) hide
            // the main UI controls and
            // b) hook up its listeners again.
            controlsContainer.setVisibility(View.GONE);
            if (fragment instanceof FriendPickerFragment) {
                setFriendPickerListeners((FriendPickerFragment) fragment);
            } else if (fragment instanceof PlacePickerFragment) {
                setPlacePickerListeners((PlacePickerFragment) fragment);
            }
        }

        // Listen for changes in the back stack so we know if a fragment got
        // popped off because the user
        // clicked the back button.
        fm.addOnBackStackChangedListener(new FragmentManager.OnBackStackChangedListener() {
            @Override
            public void onBackStackChanged() {
                if (fm.getBackStackEntryCount() == 0) {
                    // We need to re-show our UI.
                    controlsContainer.setVisibility(View.VISIBLE);
                }
            }
        });

        // Can we present the share dialog for regular links?
        canPresentShareDialog = FacebookDialog.canPresentShareDialog(this, FacebookDialog.ShareDialogFeature.SHARE_DIALOG);
        // Can we present the share dialog for photos?
        canPresentShareDialogWithPhotos = FacebookDialog.canPresentShareDialog(this, FacebookDialog.ShareDialogFeature.PHOTOS);
    }

    @Override
    protected void onResume() {
        super.onResume();
        uiHelper.onResume();

        // Call the 'activateApp' method to log an app event for use in
        // analytics and advertising reporting. Do so in
        // the onResume methods of the primary Activities that an app may be
        // launched into.
        AppEventsLogger.activateApp(this);

        updateUI();
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        uiHelper.onSaveInstanceState(outState);

        outState.putString(PENDING_ACTION_BUNDLE_KEY, pendingAction.name());
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        uiHelper.onActivityResult(requestCode, resultCode, data, dialogCallback);
    }

    @Override
    public void onPause() {
        super.onPause();
        uiHelper.onPause();

        // Call the 'deactivateApp' method to log an app event for use in
        // analytics and advertising
        // reporting. Do so in the onPause methods of the primary Activities
        // that an app may be launched into.
        AppEventsLogger.deactivateApp(this);
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        uiHelper.onDestroy();
    }

    private void onSessionStateChange(Session session, SessionState state, Exception exception) {
        if (pendingAction != PendingAction.NONE
                && (exception instanceof FacebookOperationCanceledException || exception instanceof FacebookAuthorizationException)) {
            new AlertDialog.Builder(MainActivity.this).setTitle("Cancle").setMessage("Not Granted").setPositiveButton("Ok", null).show();
            pendingAction = PendingAction.NONE;
        } else if (state == SessionState.OPENED_TOKEN_UPDATED) {
            handlePendingAction();
        }
        updateUI();
    }

    private void updateUI() {
        Session session = Session.getActiveSession();
        boolean enableButtons = (session != null && session.isOpened());

        postStatusUpdateButton.setEnabled(enableButtons || canPresentShareDialog);
        postPhotoButton.setEnabled(enableButtons || canPresentShareDialogWithPhotos);
        pickFriendsButton.setEnabled(enableButtons);
        pickPlaceButton.setEnabled(enableButtons);

        if (enableButtons && user != null) {
            profilePictureView.setProfileId(user.getId());
            greeting.setText(user.getFirstName());
        } else {
            profilePictureView.setProfileId(null);
            greeting.setText(null);
        }
    }

    @SuppressWarnings("incomplete-switch")
    private void handlePendingAction() {
        PendingAction previouslyPendingAction = pendingAction;
        // These actions may re-set pendingAction if they are still pending, but
        // we assume they
        // will succeed.
        pendingAction = PendingAction.NONE;

        switch (previouslyPendingAction) {
        case POST_PHOTO:
            postPhoto();
            break;
        case POST_STATUS_UPDATE:
            postStatusUpdate();
            break;
        }
    }

    private interface GraphObjectWithId extends GraphObject
    {
        String getId();
    }

    private void showPublishResult(String message, GraphObject result, FacebookRequestError error) {
        String title = null;
        String alertMessage = null;
        if (error == null) {
            title = "success";
            String id = result.cast(GraphObjectWithId.class).getId();
            alertMessage = "successfully_posted_post";
        } else {
            title = "error";
            alertMessage = error.getErrorMessage();
        }

        new AlertDialog.Builder(this).setTitle(title).setMessage(alertMessage).setPositiveButton("Ok", null).show();
    }

    private void onClickPostStatusUpdate() {
        performPublish(PendingAction.POST_STATUS_UPDATE, canPresentShareDialog);
    }

    private FacebookDialog.ShareDialogBuilder createShareDialogBuilderForLink() {
        return new FacebookDialog.ShareDialogBuilder(this).setName("Hello Facebook")
                .setDescription("The 'Hello Facebook' sample application showcases simple Facebook integration")
                .setLink("http://developers.facebook.com/android");
    }

    private void postStatusUpdate() {
        if (canPresentShareDialog) {
            FacebookDialog shareDialog = createShareDialogBuilderForLink().build();
            uiHelper.trackPendingDialogCall(shareDialog.present());
        } else if (user != null && hasPublishPermission()) {
            final String message = user.getFirstName();
            Request request = Request.newStatusUpdateRequest(Session.getActiveSession(), message, place, tags, new Request.Callback() {
                @Override
                public void onCompleted(Response response) {
                    showPublishResult(message, response.getGraphObject(), response.getError());
                }
            });
            request.executeAsync();
        } else {
            pendingAction = PendingAction.POST_STATUS_UPDATE;
        }
    }

    private void onClickPostPhoto() {
        performPublish(PendingAction.POST_PHOTO, canPresentShareDialogWithPhotos);
    }

    private FacebookDialog.PhotoShareDialogBuilder createShareDialogBuilderForPhoto(Bitmap... photos) {
        return new FacebookDialog.PhotoShareDialogBuilder(this).addPhotos(Arrays.asList(photos));
    }

    private void postPhoto() {
        Bitmap image = BitmapFactory.decodeResource(this.getResources(), R.drawable.ic_launcher);
        if (canPresentShareDialogWithPhotos) {
            FacebookDialog shareDialog = createShareDialogBuilderForPhoto(image).build();
            uiHelper.trackPendingDialogCall(shareDialog.present());
        } else if (hasPublishPermission()) {

            // Request request =
            // Request.newUploadPhotoRequest(Session.getActiveSession(), image,
            // "", "", new Request.Callback() {
            // @Override
            // public void onCompleted(Response response) {
            // showPublishResult("photo_post", response.getGraphObject(),
            // response.getError());
            // }
            // });
            // request.executeAsync();
            Request request = newMyUploadPhotoRequest(Session.getActiveSession(), image, "Teste Caption", "teste description",
                    new Request.Callback() {
                        @Override
                        public void onCompleted(Response response) {
                            showPublishResult("POSTED", response.getGraphObject(), response.getError());
                        }
                    });
            Request.executeBatchAsync(request);
        } else {
            pendingAction = PendingAction.POST_PHOTO;
        }
    }

    public static Request newMyUploadPhotoRequest(Session session, Bitmap image, String caption, String description,
            com.facebook.Request.Callback callback2) {
        Bundle parameters = new Bundle(3);
        parameters.putParcelable("picture", image);
        parameters.putString("caption", caption);
        parameters.putString("description", description);

        return new Request(session, "me/photos", parameters, HttpMethod.POST, callback2);

    }

    // public static Request newMyUploadPhotoRequest(Session session, Bitmap
    // image, String caption,String description,
    // Callback callback) {
    // Bundle parameters = new Bundle(3);
    // parameters.putParcelable(PICTURE_PARAM, image);
    // parameters.putString("caption",caption);
    // parameters.putString("description",description );
    //
    // return new Request(session, MY_PHOTOS, parameters, HttpMethod.POST,
    // callback);
    //
    // }

    private void showPickerFragment(PickerFragment<?> fragment) {
        fragment.setOnErrorListener(new PickerFragment.OnErrorListener() {
            @Override
            public void onError(PickerFragment<?> pickerFragment, FacebookException error) {
                String text = "Exception";
                Toast toast = Toast.makeText(MainActivity.this, text, Toast.LENGTH_SHORT);
                toast.show();
            }
        });

        FragmentManager fm = getSupportFragmentManager();
        fm.beginTransaction().replace(R.id.fragment_container, fragment).addToBackStack(null).commit();

        controlsContainer.setVisibility(View.GONE);

        // We want the fragment fully created so we can use it immediately.
        fm.executePendingTransactions();

        fragment.loadData(false);
    }

    private void onClickPickFriends() {
        final FriendPickerFragment fragment = new FriendPickerFragment();

        setFriendPickerListeners(fragment);

        showPickerFragment(fragment);
    }

    private void setFriendPickerListeners(final FriendPickerFragment fragment) {
        fragment.setOnDoneButtonClickedListener(new FriendPickerFragment.OnDoneButtonClickedListener() {
            @Override
            public void onDoneButtonClicked(PickerFragment<?> pickerFragment) {
                onFriendPickerDone(fragment);
            }
        });
    }

    private void onFriendPickerDone(FriendPickerFragment fragment) {
        FragmentManager fm = getSupportFragmentManager();
        fm.popBackStack();

        String results = "";

        List<GraphUser> selection = fragment.getSelection();
        tags = selection;
        if (selection != null && selection.size() > 0) {
            ArrayList<String> names = new ArrayList<String>();
            for (GraphUser user : selection) {
                names.add(user.getName());
            }
            results = TextUtils.join(", ", names);
        } else {
            results = "no_friends_selected";
        }

        showAlert("you_picked", results);
    }

    private void onPlacePickerDone(PlacePickerFragment fragment) {
        FragmentManager fm = getSupportFragmentManager();
        fm.popBackStack();

        String result = "";

        GraphPlace selection = fragment.getSelection();
        if (selection != null) {
            result = selection.getName();
        } else {
            result = "no_place_selected";
        }

        place = selection;

        showAlert("you_picked", result);
    }

    private void onClickPickPlace() {
        final PlacePickerFragment fragment = new PlacePickerFragment();
        fragment.setLocation(SEATTLE_LOCATION);
        fragment.setTitleText("pick_seattle_place");

        setPlacePickerListeners(fragment);

        showPickerFragment(fragment);
    }

    private void setPlacePickerListeners(final PlacePickerFragment fragment) {
        fragment.setOnDoneButtonClickedListener(new PlacePickerFragment.OnDoneButtonClickedListener() {
            @Override
            public void onDoneButtonClicked(PickerFragment<?> pickerFragment) {
                onPlacePickerDone(fragment);
            }
        });
        fragment.setOnSelectionChangedListener(new PlacePickerFragment.OnSelectionChangedListener() {
            @Override
            public void onSelectionChanged(PickerFragment<?> pickerFragment) {
                if (fragment.getSelection() != null) {
                    onPlacePickerDone(fragment);
                }
            }
        });
    }

    private void showAlert(String title, String message) {
        new AlertDialog.Builder(this).setTitle(title).setMessage(message).setPositiveButton("ok", null).show();
    }

    private boolean hasPublishPermission() {
        Session session = Session.getActiveSession();
        return session != null && session.getPermissions().contains("publish_actions");
    }

    private void performPublish(PendingAction action, boolean allowNoSession) {
        Session session = Session.getActiveSession();
        if (session != null) {
            pendingAction = action;
            if (hasPublishPermission()) {
                handlePendingAction();
                return;
            } else if (session.isOpened()) {
                // We need to get new permissions, then complete the action when
                // we get called back.
                session.requestNewPublishPermissions(new Session.NewPermissionsRequest(this, PERMISSION));
                return;
            }
        }

        if (allowNoSession) {
            pendingAction = action;
            handlePendingAction();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:12:09.327

您可以使用此代码共享图像表单 sdcard

```
public void shareimage(View v) {

         Intent share = new Intent(Intent.ACTION_SEND);
         share.setType("image/jpeg");

         share.putExtra(Intent.EXTRA_STREAM,Uri.parse(
         "file:///mnt/sdcard/test/v1327056571768.3gpp"));

         startActivity(Intent.createChooser(share, "Share Image"));

} 
```

也可以点击以下[链接](http://dilipdevelopment.blogspot.in/2012/04/display-image-from-specific-folder-with.html)，我已经在我的博客上发布了。

# javascript - 使用 javascript 显示加载

> ID：10975105
> 
> 赞同：0
> 
> 时间：2012-06-11T06:04:38.500
> 
> 标签：javascript

我有一个文件上传控件。当我上传任何文件时，直到文件被上传，我想在该控件下方显示“正在加载...”。是否可以使用Javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:11:44.787

你可以使用这个 JavaScript 库：

[http://valums.com/ajax-upload/](http://valums.com/ajax-upload/)

它有：

```
onSubmit: function(id, fileName){},
onProgress: function(id, fileName, loaded, total){},
onComplete: function(id, fileName, responseJSON){},
onCancel: function(id, fileName){}, 
```

足以让您知道文件的状态。

它具有跨浏览器功能。

> 该插件使用 XHR 在 FF3.6+、Safari4+、Chrome 中使用进度条上传多个文件，并在其他浏览器中回退到基于隐藏 iframe 的上传，在任何地方提供良好的用户体验。

# html - 强制 Internet Explorer 9 使用标准文档模式

> ID：10975107
> 
> 赞同：72
> 
> 时间：2012-06-11T06:04:41.877
> 
> 标签：html, internet-explorer, internet-explorer-9, quirks-mode

如何强制 Internet Explorer 9 使用标准文档模式？我建立了一个网站，我发现 IE9 使用 quirks 模式来呈现网站页面。但我想使用标准模式进行渲染。

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-06-11T06:42:19.273

```
 <!doctype html>
 <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
```

这使得每个版本的 IE 都使用其标准模式，因此 IE 9 将使用 IE 9 标准模式。（如果您希望较新版本的 IE*也*专门使用 IE 9 标准模式，则可以替换`Edge`为`9`。但很难理解您为什么要这样做。）

有关解释，请参阅[http://hsivonen.iki.fi/doctype/#ie8](http://hsivonen.iki.fi/doctype/#ie8)（它看起来相当混乱，但那是因为 IE 的行为很混乱）。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-03-06T18:41:58.590

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

元标记必须是头标记之后的第一个标记，否则将不起作用。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-08-20T18:39:16.810

这个线程有一些非常重要的东西已经被触及但没有完全解释。HTML 方法（在头部添加元标记）仅适用于原始 HTML 或非常基本的服务器页面。我的站点是一个非常复杂的服务器驱动站点，包含母版页、主题和许多第三方控件等。我发现其中一些控件以编程方式将它们自己的标签添加到最终的 HTML 中，这些标签被推送到浏览器在 head 标签的开头。这有效地使 HTML 元标记无用。

好吧，如果你不能打败他们，那就加入他们。对我有用的唯一解决方案是在我的母版页的预渲染事件中执行完全相同的操作：

```
Private Sub Page_PreRender(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.PreRender
    Dim MetaTag As HtmlMeta = New HtmlMeta()
    MetaTag.Attributes("http-equiv") = "Content-Type"
    MetaTag.Attributes("content") = "text/html; charset=utf-8;"
    Page.Header.Controls.AddAt(0, MetaTag)

    MetaTag = New HtmlMeta()
    MetaTag.Attributes("http-equiv") = "X-UA-Compatible"
    MetaTag.Attributes("content") = "IE=9,chrome=1"
    Page.Header.Controls.AddAt(0, MetaTag)
End Sub 
```

这是 VB.NET，但同样的方法适用于任何服务器端技术。只要您确保这是在呈现页面之前完成的最后一件事。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-11T06:15:44.097

将 doctype 作为 html 文档的第一行

> ```
> <!DOCTYPE html> 
> ```

您可以在此处找到有关 Internet Explorer 文档兼容性的详细说明：[定义文档兼容性](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-07-18T00:32:40.340

为了防止怪癖模式，定义一个'doctype'，如：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd"> 
```

让 IE 以 IE9 文档模式呈现页面：

```
<meta http-equiv="x-ua-compatible" content="IE=9"> 
```

请注意，这`"IE=edge"`将使 IE 以最新的文档模式呈现页面，而不是 IE9 文档模式。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-11-14T00:58:26.810

确保您考虑到添加此标签，

```
<meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
```

可能只允许与最新版本兼容。这一切都取决于你的图书馆

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-11T06:07:08.767

确保使用正确的文档类型。

例如。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd"> 
```

要不就

`<!doctype html>`

并[阅读](http://blogs.msdn.com/b/ie/archive/2010/10/19/testing-sites-with-browser-mode-vs-doc-mode.aspx)并了解 IE 的兼容性模式和开发人员工具栏如何工作并为 IE 设置模式：

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-26T12:03:43.170

我尝试了另一种方法：

按 F12 键 然后，在下拉菜单的右侧，选择 Internet Explorer 版本 9。

就是这样，它对我有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-22T15:01:08.587

我遇到了类似我的主页 index.jsp 包含以下行的问题，但即使在 IE 中呈现不正确。发现了问题，我已经在 index.jsp 中包含的所有文件中添加了代码。欢呼！有效。

因此，您需要在页面中包含的所有文件中添加以下代码，否则它将无法正常工作。

```
 <!doctype html>
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    </head> 
```

# visual-studio-2010 - 如何在opencv2.4中编译人脸检测代码

> ID：10975110
> 
> 赞同：-1
> 
> 时间：2012-06-11T06:04:58.380
> 
> 标签：visual-studio-2010, image-processing, opencv, computer-vision

我相信我已经在属性页中完成了所有必要的更改。我不明白如何管理人脸检测所需的 XML 文件。我需要对 XML 文件做什么？我应该将它们放在项目文件夹的什么位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:40:45.457

xml 文件定义了您要检测的对象。(face/eye/ear/dog/etc.) 您将文件名作为字符串传递给`CascadeClassifier.load(...)`函数。

看看 OpenCV 教程，他们用两个单独的分类器检测面部和眼睛：http: [//opencv.itseez.com/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html#cascade-classifier](http://opencv.itseez.com/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html#cascade-classifier)

```
String face_cascade_name = "haarcascade_frontalface_alt.xml";
String eyes_cascade_name = "haarcascade_eye_tree_eyeglasses.xml";
CascadeClassifier face_cascade;
CascadeClassifier eyes_cascade;

int main( int argc, const char** argv )
{
   if( !face_cascade.load( face_cascade_name ) ){ printf("--(!)Error loading\n"); return -1; };
   if( !eyes_cascade.load( eyes_cascade_name ) ){ printf("--(!)Error loading\n"); return -1; };
//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:45:25.803

我不知道你的意思。当您使用 Haarlike 功能训练您的一组人脸时，您将获得 xml 文件作为结果，然后使用此文件来检测图像中的人脸。就是这样，不应该混淆。

# ruby-on-rails - 两个相似的 rspec 测试，给出相反的结果

> ID：10975112
> 
> 赞同：1
> 
> 时间：2012-06-11T06:05:08.723
> 
> 标签：ruby-on-rails, ruby, rspec

我有一个用户模型：

```
class User < ActiveRecord::Base
  attr_accessible :email, :name
  # admin only
  attr_accessible :email, :name, :admin, :as => :admin 
```

以及以下型号规格：

```
describe "accessible attributes" do

  let(:new_user){ FactoryGirl.create(:user) }
  @admin_attrs = { admin: true, name: "ben", email: "xyz@test.com"}

  it "can not be set on create" do

    # variant 1 - test fails, AM::MAS::Error NOT thrown
    expect do
      User.new(@admin_attrs)
    end.should raise_error(ActiveModel::MassAssignmentSecurity::Error)

    # variant 2 - test passes, AM::MAS::Error NOT thrown
    expect do
      User.new(admin: true, name: "ben", email: "xyz@test.com", password: "123xyz", password_confirmation: "123xyz")
    end.should raise_error(ActiveModel::MassAssignmentSecurity::Error)

  end 
```

我无法弄清楚为什么我的测试变体 1 失败，但变体 2 通过了。我得到的错误信息是：

```
1) User accessible attributes can not be set on create
     Failure/Error: expect do
       expected ActiveModel::MassAssignmentSecurity::Error but nothing was raised 
```

它们基本上是相同的测试。我究竟做错了什么？事实上，如果我从控制台执行测试 1，它确实会抛出 MAS::Error，正如预期的那样。我很困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T06:12:53.880

就您的第一个文本示例而言，@admin_attrs 可能为零，因为它没有在 before 钩子中设置（或通过“让”）

# jquery - 在jquery中如何连接变量

> ID：10975119
> 
> 赞同：1
> 
> 时间：2012-06-11T06:05:40.967
> 
> 标签：jquery, ipad, drag-and-drop

```
window.onload = function(){

    $('.content').bind({click:function(){

        var len = $('.main').children().length;
        var id1 = $(this).attr('id');
        alert("id"+$(this).attr('id'));  
        var draggable = new webkit_draggable('+id1+',{revert : true  });

}});} 
```

在上面的代码中，如果我直接传递了 id 的值，那么它可以正常工作，但是如果我尝试通过变量传递值，那么它就不起作用我不确定如何在 var draggable 中传递 id1 的值。该值应以 couts 为单位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:07:58.050

```
new webkit_draggable(id1,{revert : true  }); 
```

如果你想通过报价

```
new webkit_draggable(''+ id1 +'',{revert : true  }); 
```

或者你可以使用

```
new webkit_draggable(id1.toString() ,{revert : true  }); 
```

# iphone - 是否可以使用 phonegap 为图像添加标题？

> ID：10975121
> 
> 赞同：2
> 
> 时间：2012-06-11T06:05:49.200
> 
> 标签：iphone, cordova

我试图了解 phonegap 是否可用于本地图像处理。我正在寻找为相机胶卷中的图像添加标题并将修改后的副本保存回相机胶卷。例如，我可能在手机中有一张猫的照片。我想打开它，添加一些 lolcats 样式的文本并将修改后的副本保存在相机胶卷中。

是否有可能在phonegap中实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T06:23:23.087

您可以使用 HTML5 Canvas 更新图像并将其保存在本地应用程序空间中。然而，将图像保存到手机相册并非易事。您可能需要查看以下帖子以获得正确的解决方案。

[如何使用 PhoneGap 将图像保存到 iPhone 照片库？](https://stackoverflow.com/questions/8663890/how-can-i-save-an-image-to-an-iphone-photo-gallery-using-phonegap)

这篇文章将帮助您将专辑图像打开到画布

[使用 Phonegap 将 CameraRoll 图像转换为画布](https://stackoverflow.com/questions/9893741/cameraroll-image-to-canvas-using-phonegap)

# c - 在 Eclipse C/C++ 中的打印边距处硬包装字符串文字

> ID：10975127
> 
> 赞同：1
> 
> 时间：2012-06-11T06:06:47.580
> 
> 标签：c, eclipse, coding-style

C/C++ Eclipse 可以自动格式化和包装几乎任何类型的代码，并且行为非常可配置，字符串文字除外。这是一个虚构的示例，其中调试输出消息恰好比可打印区域内的长度更长：

```
if (some_kind_of_action() == TOUGH_LUCK) {
    system_debug_print("Task name error: some_kind_of_action() failed due to your sloppy design.");
} 
```

使用 79 个字符的打印边距，理想的结果可能是：

```
if (some_kind_of_action() == TOUGH_LUCK) {
    system_debug_print("Task name error: some_kind_of_action() failed due to yo"
        "ur sloppy design.");
} 
```

您可以通过键入字符串文字手动执行此操作，然后将光标放在所需的换行点并按 Enter 键。Eclipse 会自动添加必要的引号。这一切都很好，直到您的代码中的某些内容发生更改并且您必须手动重做包装。我不明白为什么在打印边距处换行不能像任何其他代码一样完全自动完成。

有没有办法在 Eclipse for C/C++ 的打印边距处自动硬包装字符串文字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:37:58.213

Eclipse 在它的任何编辑器中都不支持这个特性（即使它是在九年前[提出的）。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=35779)但是，您可以通过使用以下插件来启用软换行来避免手动中断行。

[http://ahtik.com/blog/projects/eclipse-word-wrap/](http://ahtik.com/blog/projects/eclipse-word-wrap/)

# php - 需要查询或事务以将数据导出为设定格式

> ID：10975128
> 
> 赞同：2
> 
> 时间：2012-06-11T06:06:51.140
> 
> 标签：php, mysql, sql

我试图将数据库中的数据导出为设定的格式，以便 myob 可以正确解释它。我的导出功能运行良好，我已经完成了一半的 sql 查询，但在如何将它们放在一起时遇到了麻烦。

以下是一个简单的示例来说明我想要实现的目标

```
$sql = "SELECT (CONCAT(PICKUPID,DROPOFFID) AS ITEM), 
               (CONCAT(Rego, Pickup, Dropoff, booker, date) AS Description) 
        FROM booking, myob"; 
```

问题是我需要参考预订表中的内容从 myob 表中提取接送/下车/ID。

**预订表列**

*   雷戈
*   捡起
*   放下
*   日期
*   布克

**myob 表列**

*   MYOBID（其中 MYOBID = PICKUPID 或 DROPOFFID）
*   地址（地址 = 投递或取件）

我希望在 SQL 查询或 PL/SQL 事务中执行此操作，但我无法理解它。任何帮助将不胜感激（希望问题不要混淆）

*****表格中的数据*******

 ***预订*

```
Rego , Pickup , Dropoff , Date    , booker

123,    bris,     sydn,      1/2/12,    barry 
```

*喵星人*

```
MYOBID , Address

Q,        bris

N,        sydn 
```

**输出**

```
ITEM   , Description

QN,       123 bris sydn 1/2/12 barry 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-11T06:19:16.053

你需要[`JOIN`](http://dev.mysql.com/doc/refman/5.5/en/join.html)这两个表。您还可以[在此处](http://www.w3schools.com/sql/sql_join.asp)找到一些更实用的信息。如果您在阅读这些内容后仍然卡住，请回到我们这里。

此外，我认为在查询时 CONCAT'ing 你的字段没有什么优势，我认为你最好将格式化输出到你的应用程序层。当然，如果您想要实现的只是快速而肮脏的一次性导出，这可能是一种矫枉过正的做法。**

# php - tempnam() 在客户端服务器上不起作用

> ID：10975135
> 
> 赞同：1
> 
> 时间：2012-06-11T06:07:35.027
> 
> 标签：php

我做了一个脚本，它必须从 ftp 服务器加载一个文件然后解析它。该代码依赖 tempname 来存储临时存储的 ftp 文件。在我的开发服务器（使用 php 5.3.10）上，这可以完美运行，但是在客户端计算机（使用 php 5.2.17）上却没有，并且给了我：

```
Warning: ftp_rawlist() [function.ftp-rawlist]: Unable to create temporary file. Check permissions in temporary files directory. 
```

有人可以告诉我我能做什么吗？（我对php的可能性有点弱）

我使用了这段代码：

```
define ("LOCALFILE",tempnam('/tmp', 'data-'));
define ("USER","myusername");
define ("PASS","mypassword");
define('SERVER', "ftpserver.com");
define ("DIR","/path/");

function getFTPFile(){

    // connect
    if(!($conn_id = @ftp_connect(SERVER))){
        Error::throwOne("Could not connect to ".SERVER);

    };
    // login 
    if(!($login_result = @ftp_login($conn_id, USER, PASS))){
        Error::throwOne("LOGIN INCORRECT! user:".USER." pass:".PASS);
    };
    // try to change the directory to somedir
    if (!ftp_chdir($conn_id, DIR)) {
        Error::throwOne("Couldn't change directory\n");
    }; 

    if(!($a = ftp_rawlist($conn_id, '-1t'))){
        Error::throwOne("Couldn't get ftp_rawlist\n");
    };

    $server_file=($a[0]);
    if (!ftp_get($conn_id, LOCALFILE, $server_file, FTP_BINARY)) {
        Error::throwOne("Couldn't get file\n");
    };
    ftp_close($conn_id);    
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T06:22:06.030

该错误在我看来就像系统生成的，与您的 tmpname 无关。在内部，FTP 将文件存储在它自己的临时文件中，在标准临时目录中的临时文件名中，直到它被下载 - 然后将其移动到您指定的位置。

尝试将此代码放在您的下载代码之前：

```
$tmpdir = sys_get_temp_dir();
echo "Temp dir: $tmpdir\n";
echo  is_writable($tmpdir) ? "Temp dir is writable" : "Temp dir is not writable"; 
```

这将告诉您是否有权写入系统临时目录。我进一步建议您`$tmpdir`在代码中使用此变量而不是硬编码“/tmp”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T19:49:39.303

我发现了这个问题。由于我的主机不喜欢 /tmp 目录（谁会责怪他们），我需要先设置 putenv('TMPDIR=/the tmp-dir my provider give me'); 然后与 tempname 一起使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-14T22:44:49.463

我发现这发生在 Windows Server 2016 上 - 这是因为我的 %TEMP% 环境变量指向了一个不存在的子目录，无论出于何种原因。

不过，当我以管理员身份运行它时，它确实指向了正确的那个。

# xcode - 在 XCode 中使用 SQLite

> ID：10975136
> 
> 赞同：0
> 
> 时间：2012-06-11T06:07:44.580
> 
> 标签：xcode, sqlite, fmdb

我制作的应用程序目前使用 XML 文件来存储数据，现在想将其转换为 SQLite db，因为在 XML 文件中操作数据变得有点复杂。

我决定将[FMDB](https://github.com/ccgus/fmdb)用作 SQL 的 Wrapper。问题是，现在的开发过程非常缓慢，因为我必须使用 NSLogs 打印每个 SQLite 命令来验证它是否正常工作。是否有可以在开发时使用的 GUI 工具，当我在模拟器上运行应用程序时，它可以实时显示 SQL 表中的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:33:23.580

您可以在命令行中使用 sqlite3 实时查看，对于 GUI，您必须重新加载数据库的文件才能看到更改。
要获取数据库文件的位置，请使用以下代码：

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,   NSUserDomainMask, YES);
NSString *documentsDir = [documentPaths objectAtIndex:0];
NSLog("%@", documentsDir);
[pool release]; 
```

要使用 GUI 管理数据库，您可以使用[http://menial.co.uk/software/base/](http://menial.co.uk/software/base/)
加载数据库文件。使用 Base 程序，您必须在每次更改后单击“重新加载按钮”

# python - django 一对多关系

> ID：10975140
> 
> 赞同：4
> 
> 时间：2012-06-11T06:08:06.977
> 
> 标签：python, django

在我的应用程序中，我需要将`User`与`user-selected-filename`

一个用户只能选择一个文件名，但同一个文件名可能被多个用户选择

所以，数据库表可能是这样的

# auth_user（创建者`django.contrib.auth`）

```
-----------------------------------------
id | username | first_name | last_name | ...
------------------------------------------
1  |  bert     |  bert     | russel    |...
------------------------------------------
2  |  jon      |  jon      | snow      | ...
-------------------------------------------
3  |  alice    | alice     | tanner    | ... 
```

# 用户文件表

```
-----------------------------------------------
id  | filename              
------------------------------------------------
1   |  '/clips/summary.mp4'  
------------------------------------------------
2   | '/clips/intro.mp4'    
------------------------------------------------ 
```

# user_userfile 表

```
-----------------------------------
 user_id   |    userfile_id
-----------------------------------
   1       |    1
-----------------------------------
   2       |    1
-----------------------------------
   3       |    2
----------------------------------- 
```

好像`userfile--user`是有`1 - n`关系的。1 个用户文件可以与多个用户关联。

那么，我应该用什么来表示这种关系呢？在下面给出的 UserFile 类中，如果我使用

```
user = db.models.ForeignKey(django.contrib.auth.User) 
```

那只会产生相反的关系（即`n-1`for `userfile--user`）

```
class UserFile(db.models.Model):
    filename = db.models.CharField()
    user     = ?? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T06:45:28.263

我也很想要一个 OneToMany 字段。但是我认为 Django 中没有这样的字段的原因是这会在相关模型的表上创建一个 FK：

1.  这有点令人困惑

2.  Syncdb 无法将该列添加到现有表中

在相关模型上添加 FK 的解决方案是使用“不受支持”的功能：

```
from django.contrib.auth.models import User
models.ForeignKey(Badge, null=True, blank=True).contribute_to_class(User, 'badge') 
```

然后你应该添加[migrate auth_user](http://blog.yourlabs.org/post/20833599582/django-schema-migrations-nashvegas-vs-south-vs)来添加 FK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:47:29.027

您可以为此使用用户配置文件，尽管我认为这有点矫枉过正。

```
class UserProfile(models.Model):
    file = models.ForeignKey(UserFile) 
```

然后`AUTH_PROFILE_MODULE`在 settings.py 中设置设置并运行 syncdb。

现在您可以使用`user.get_profile().file`来访问与`user`.

[用户资料教程](http://www.turnkeylinux.org/blog/django-profile)

# php - 在php中执行长命令而不被阻塞

> ID：10975141
> 
> 赞同：0
> 
> 时间：2012-06-11T06:08:09.173
> 
> 标签：php, windows, command, long-integer

我想在 PHP 中运行一个 shell 命令，但该命令需要一段时间才能执行。所以我希望它在后台运行，但我也希望用户了解正在发生的事情。我正在使用的 shell 命令输出描述它在做什么的文本。我的问题：如何从浏览器在后台执行该 shell 命令，并且在命令运行时仍然将该命令的所有详细信息写入我的网页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:14:19.063

您可以使用[`popen`](http://de.php.net/popen)然后从进程的输出流中读取并写入响应。

# facebook - 使用 gigya 在 Firefox 中调整 facebook 权限对话框的大小

> ID：10975144
> 
> 赞同：1
> 
> 时间：2012-06-11T06:08:37.093
> 
> 标签：facebook, dialog, resize, connect, gigya

我正在使用 gigya 连接到 facebook，并且包含了几乎所有的连接权限。在 Firefox 中，我看不到允许按钮，因为权限对话框太大。与 gigya 连接时是否有人遇到此问题？

可以将滚动条添加到权限对话框吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T02:40:36.330

您可以使用 JS 代理功能调整窗口大小：

```
if (!gigya) {
    return;
}

var providerCache = {};

// Proxify the _getProviderByName method on gigya, 
// then alter the dimensions values of the results.
var proxied = gigya.socialize._getProviderByName;
gigya.socialize._getProviderByName = function(name) {
    var provider = proxied.apply(this, arguments);
    if (!(name in providerCache)) {
        provider.width += 100;
        provider.height += 100;
        providerCache[name] = provider;
    }
    return provider;
} 
```

此代码会将弹出窗口的尺寸增加 100 像素。

# php - 即时消息、聊天室 - 用于 LAMP

> ID：10975150
> 
> 赞同：0
> 
> 时间：2012-06-11T06:09:02.573
> 
> 标签：php, javascript, node.js, chat, comet

我正在考虑在我的网站上添加聊天功能（它有点像社交网络）。我想支持的两件事是：

*   “即时消息” - 类似于 FB 和 GMail 提供的，其中 2 个人可以实时聊天
*   “聊天室” - 一群人可以一起聊天（可以选择允许聊天室中的个人互相私信 - 并能够打开或关闭此功能）。也需要网络摄像头支持。

如果我要尝试自己实现这样的东西，我想我有几个关于如何实现它的选择：

*   Ajax 长轮询（可能是最简单的）
*   Comet/Reverse ajax（意味着我需要像 Ape 这样的推送服务器，我认为这更复杂）
*   Web 套接字（但我仅限于 HTML5）
*   NodeJS（对此不太了解）
*   ？？？

再说一次，为了省钱并尽快实现此功能，也许我最好尝试使用商业软件包，例如[http://www.arrowchat.com/](http://www.arrowchat.com/)。我在 Arrow Chat 中看到的问题是：

*   它不是 JSLinted（他们也没有计划这样做）
*   不支持打开/关闭“PM”功能

不过，关于 Arrow Chat 的其他一切似乎都很好。

还有[http://www.cometchat.com](http://www.cometchat.com)。

关于我应该采取什么方向的任何建议？我列出的技术是否正确，我应该尝试自己实现吗？我应该考虑其他任何商业聊天软件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:01:58.167

您不需要自己实现所有传输层。您可以尝试[使用 Socket.IO](http://socket.io/)将其抽象出来，也可以使用[Pusher](http://pusher.com/)等服务。

# flash - 将 Adob e Air 3.3 SDK 与 Flash Builder 一起使用

> ID：10975151
> 
> 赞同：4
> 
> 时间：2012-06-11T06:09:07.130
> 
> 标签：flash, air, adobe

Adobe Air SDK V3.3 终于在 2012 年 6 月 8 日发布，可以在这里下载：http: [//www.adobe.com/products/air.html](http://www.adobe.com/products/air.html)

现在，我尝试通过在 /Applications/Adobe Flash Builder 4.6/sdks/4.6.0/ 中的 Flex V4.6.0 SDK 副本上“覆盖”Adobe Air 3.3 SDK 来在 Flash Builder V4.6 中使用它配置覆盖的 SDK，Flash Builder 抱怨“目录不包含 Flex SDK”

有人知道如何成功让 Flash Builder 使用 Adob​​e Air V3.3 SKD？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T13:20:05.650

对于 MAC 用户，最好的方法是复制 4.6.0 文件夹并将其重命名为“4.6.0 + 3.3”，然后提取 Adob​​eAIRSDK.tbz2 文件，进入其中并将内容同步到新的 sdk 文件夹。

```
rsync ./* -avl /Applications/Adobe\ Flash\ Builder\ 4.6/sdks/4.6.0\ +\ 3.3/ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T23:24:05.660

## 如何将 Adob​​e Flash Builder 4.6 更新到 AIR 3.5 SDK

使用这些指南和其他页面，我设法更新了我的安装。谢谢大家，下面是详细内容。

[从http://www.adobe.com/special/products/air/sdk/](http://www.adobe.com/special/products/air/sdk/)下载 Adob​​eAIRSDK.tbz2

解压并解压文件（双击即可）。

导航到 /Applications/Adobe\ Flash\ Builder\ 4.6/sdks

复制现有的 4.6.0 sdk 文件夹并根据需要重命名。（例如 4.6.0_AIR3.5）

导航到提取的 Adob​​eAIRSDK 文件夹并使用 rsync：

```
rsync ./* -avl /Applications/Adobe\ Flash\ Builder\ 4.6/sdks/4.6.0_AIR3.5/ 
```

检查这些文件（在 frameworks 文件夹内）以获取对旧播放器和版本条目的引用：

*   空气配置.xml
*   airmobile-config.xml
*   弹性配置.xml

更新 xml 文件：

```
<target-player>11.5</target-player>
<swf-version>18</swf-version> 
```

在 Flash Builder 中，转到 Preferences > Flash Builder > Installed Flex SDKs，添加新的 4.6.0_AIR3.5 路径，为其命名并根据需要将其设为默认 sdk。

不要忘记更新您的项目 xml 命名空间：

```
<application xmlns="http://ns.adobe.com/air/application/3.5"> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T14:10:29.120

合并终端 tar jxvf Adob​​eAIRSDK.tbz2 将 Adob​​eAIRSDK.tbz2 替换为下载的 AIR SDK tarball 的路径，例如 /User/XXXX/Downloads 在 SDK/frameworks/libs.player 中添加新播放器的文件夹，并将其命名为 11.3，您可以在其中看到11.1 从[http://www.adobe.com/support/flashplayer/downloads.html](http://www.adobe.com/support/flashplayer/downloads.html)复制 playerglobal11_3.swc并且不要忘记更新 flash builder 中的参数以包含 swf-version=16 以获得所有好东西并更改 xml目标 3.3

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T07:02:45.890

如果你使用 mac ！不要覆盖文件夹。它不仅会复制新文件，还会完全替换 sdk 文件夹。所以请输入每个文件夹并复制/替换每个文件。看起来很奇怪，但这就是“mac”的工作原理。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-04T11:07:10.677

有些事情永远不会改变，其中之一是月球周期，另一个是 Adob​​e 认为我们应该更新 AIR SDK 的...

# android - Android：想在服务类中调用主要活动的类函数

> ID：10975152
> 
> 赞同：0
> 
> 时间：2012-06-11T06:09:15.757
> 
> 标签：android

在这里，我有一个扩展活动的主类，并有一个函数说 abc()。现在我想在我的服务类中调用它。但是我无法做到这一点，因为我发现错误：“找不到源”..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:42:46.187

也许一些相关的主题/问题已经解决了你的问题，例如

[在 Android 中：如何从服务中调用 Activity 的功能？](https://stackoverflow.com/questions/2843874/in-android-how-to-call-function-of-activity-from-a-service?rq=1)

[从自定义视图调用主活动中的方法](https://stackoverflow.com/questions/3435248/call-a-method-in-the-main-activity-from-a-custom-view-class?rq=1)

[如何从服务类调用活动类](https://stackoverflow.com/questions/5015507/how-to-call-an-activity-class-from-a-service-class?rq=1)

# c++ - C++ append_node 中 rapidXml 的奇怪结果

> ID：10975154
> 
> 赞同：0
> 
> 时间：2012-06-11T06:09:42.233
> 
> 标签：c++, rapidxml

我有这堂课：

```
// XmlWrapper.h
class XmlWrapper{
private:
    xml_document<> doc;
public:
    XmlWrapper();
    string addNode( string node_name);
            string getXmlString();
};

// XmlWrapper.cpp
XmlWrapper::XmlWrapper(){};

XmlWrapper::addNode(string node_name){
    char _name[name.size()+1];
    strcpy(_name,name.c_str());
    _name[name.size()] = '\0';
    xml_node<> *root = doc.allocate_node(node_element,_name);
    this->doc.append_node(root);
    delete root;
    return SUCCESS;
}

string XmlWrapper::getXmlString(){
    string xmlString;
    print(back_inserter(xmlString), this->doc, 0);
    return xmlString;
} 
```

这是我的 main.cpp：

```
XmlWrapper wrapper;
wrapper.addNode("message");
cout << wrapper.getXmlString() << endl; 
```

但是，我的结果是一个奇怪的东西列表！如果我`wrapper.getXmlString()`在`addNode`函数中计算，结果将是好的！那么我的问题是什么？

编辑：如果我像下面这样直接在 main.cpp 中使用，一切都会顺利：

```
xml_document<> doc;
xml_node<> *message_node = doc.allocate_node(node_element, "message");
doc.append_node(message_node);
string buffer;
print(back_inserter(buffer),doc,0);
cout << buffer << endl; 
```

为什么会发生这种事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:53:39.240

急切地说 - _name 在堆栈上，当您超出函数范围时将被销毁。您可以使用 allocate_string，或编写自己的垃圾收集器。

# jquery - 如何使用jquery从json中提取特定字段

> ID：10975155
> 
> 赞同：0
> 
> 时间：2012-06-11T06:09:57.483
> 
> 标签：jquery

我正在使用 jquery 创建一个自动完成组件，其中建议来自 Solr 的一个字段。我无法从相应的 json 格式中提取值。json 文件是给定的，我需要提取 Query 字段的值。

```
{
    "responseHeader": {
        "status": 0,
        "QTime": 0,
        "params": {
            "q": "Query:cr*\r\n",
            "wt": "json"
        }
    },
    "response": {
        "numFound": 16,
        "start": 0,
        "docs": [{
            "id": "90268125-f806-428c-889b-696172c55356",
            "Query": "cricket",
            "Hits": 66,
            "RespTime": 359},
        {
            "id": "d5871725-0d4f-42bc-8180-9328ed81c644",
            "Query": "cricketmania",
            "Hits": 66,
            "RespTime": 156}]
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:11:19.153

```
var data = {
    "responseHeader": {
        "status": 0,
        "QTime": 0,
        "params": {
            "q": "Query:cr*\r\n",
            "wt": "json"
        }
    },
    "response": {
        "numFound": 16,
        "start": 0,
        "docs": [{
            "id": "90268125-f806-428c-889b-696172c55356",
            "Query": "cricket",
            "Hits": 66,
            "RespTime": 359},
        {
            "id": "d5871725-0d4f-42bc-8180-9328ed81c644",
            "Query": "cricketmania",
            "Hits": 66,
            "RespTime": 156}]
    }
}

data.response.docs[0].Query

data.response.docs[1].Query 
```

**[演示](http://jsfiddle.net/GJwKp/)**

使用循环：

```
$.each(data.response.docs, function(i, val) {
  console.log(val.Query);
}); 
```

**[演示](http://jsfiddle.net/6CcQV/)**

您还可以使用简单的 for 循环：

```
for( var key in data.response.docs ) {
   alert(data.response.docs[key].Query);
}; 
```

**[演示](http://jsfiddle.net/2ULm5/1/)**

# python - 有没有一种简单的方法可以在 Pyramid 中找到运行时环境

> ID：10975156
> 
> 赞同：5
> 
> 时间：2012-06-11T06:10:13.633
> 
> 标签：python, pyramid

在金字塔中，我需要根据不同的运行时环境来渲染我的模板——启用谷歌分析、使用缩小代码等（在生产中）。有没有一种简单的方法可以找出当前的环境——也许是一个现有的标志来找出使用了哪个 ini 文件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-11T06:43:52.337

Pyramid INI 文件可以包含[任意配置条目](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/environment.html#adding-a-custom-setting)，那么为什么不在文件中包含一个标志来区分生产和开发部署呢？

我会这样做；在您的生产 .ini 文件中：

```
[app:main]
production_deployment = True # Set to False in your development .ini file 
```

将此值传递给 Pyramid Configurator：

```
def main(global_config, **settings):
    # ...
    from pyramid.settings import asbool
    production_deployment = asbool(settings.get(
               'production_deployment', 'false'))
    settings['production_deployment'] = production_deployment
    config = Configurator(settings=settings) 
```

您现在可以从 Pyramid 代码中的任何位置访问设置。例如，在请求处理程序中：

```
settings = request.registry.settings
if settings['production_deployment']:
    # Enable some production code here. 
```

但是，在这种情况下，我也会使用更细粒度的设置；用于启用 Google Analytics 的标志，用于缩小资源等的标志。这样您就可以在开发环境中测试每个单独的设置，为这些开关编写单元测试等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T06:29:34.397

我将这种东西设置为一个环境变量，命名为类似的东西`PYRAMID_ENV`，可以通过`os.environ`. 例如在您的代码中：

```
import os

pyramid_env = os.environ.get('PYRAMID_ENV', 'debug')

if pyramid_env == 'debug':
    # Setup debug things...
else:
    # Setup production things... 
```

然后你可以在初始化脚本或启动服务器时设置变量：

```
PYRAMID_ENV=production python server.py 
```

关于访问环境变量的文档：http: [//docs.python.org/library/os.html#os.environ](http://docs.python.org/library/os.html#os.environ)

# php - 我是否必须提供 FACEBOOK_APP_ID 和 FACEBOOK_SECRET

> ID：10975157
> 
> 赞同：-4
> 
> 时间：2012-06-11T06:10:26.780
> 
> 标签：php, facebook

我开始在 facebook 上开发和应用程序。在 appinfo.php 文件中，我应该用我自己的应用程序 ID 替换 FACEBOOK_APP_ID 和 FACEBOOK_SECRET 还是没有必要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:24:45.200

是的，您必须提供应用的 FACEBOOK_APP_ID 和 FACEBOOK_SECRET。

# html - HTML5 错误消息

> ID：10975158
> 
> 赞同：3
> 
> 时间：2012-06-11T06:10:27.833
> 
> 标签：html, tabs, validation

在我的应用程序中，我有多个标签。在选项卡中，我有输入字段，我想在客户端验证这些字段。为此，我尝试使用 HTML5 属性，例如`required`属性或`pattern`属性。如果我在选择的第一个选项卡中有空字段（必填字段），则会出现错误消息`The field is required`，但是当我在其他选项卡（例如第三个选项卡）中有空字段并且选择了我的第一个选项卡时，不出现错误信息。

**问题** 在这种情况下，有没有办法用 HTML5 组织验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:30:10.453

您是否使用 隐藏表单元素`display: none`？如果您的元素不可见，它们[将不会触发验证 UI](http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#interactively-validate-the-constraints)：

> 向用户报告在未处理的无效控件中给出的至少一个元素的约束问题。用户代理可以在流程中聚焦其中一个元素，通过为那个元素运行聚焦步骤，并且可以改变文档的滚动位置，或者执行一些其他的动作来引起用户的注意。用户代理可能会报告不止一个约束违规。如果合适，用户代理可以合并相关的约束违反报告（例如，如果一组中的多个单选按钮被标记为需要，则只需要报告一个错误）。**如果其中一个控件没有被渲染（例如它具有隐藏属性集），那么用户代理可能会报告脚本错误。**

`invalid`在这种情况下，您必须使用自己的脚本来监听事件并执行适当的操作。

# javascript - 否则语句不起作用是我在 jquery 上的语法不正确吗？

> ID：10975159
> 
> 赞同：3
> 
> 时间：2012-06-11T06:10:30.310
> 
> 标签：javascript, jquery, if-statement

嗨，如果 div 的不透明度为 0.5，我正在使用 if 语句更改 div 的不透明度，因此如果不透明度为 0，它将更改为 0，因此它将更改为 0.5 我正在使用以下 jquery 代码和它会将不透明度 0.5 更改为 0，但是当我再次单击以将不透明度更改为 0 到 0.5 时，它不起作用。请看一下代码

```
$("#one_star").click(function(){
    if($(this).css({"opacity":"0.5"}))
    {
        $(this).css({"opacity":"0"});
    }
    else if(!$(this).css({"opacity":"0.5"}))
    {
        $(this).css({"opacity":"0.5"});
    }
}); 
```

我使用了错误的语法吗？任何建议请

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T06:11:58.593

你在 if 中的表达式 $(this).css({"opacity":"0.5"}) 应该返回布尔值**true 或 false**，但它没有，所以 else 没有执行。

试试这个，

```
if($(this).css("opacity") == "0.5")
 { 
        $(this).css({"opacity":"0"});
 }
 else 
 {
     $(this).css({"opacity":"0.5"});
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T06:13:14.537

您`if`的 's 实际上并没有检查 CSS`opacity`属性。

你需要这样做：

```
if ( $(this).css('opacity') == "0.5" ) {
   //do stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T06:13:04.787

```
if( $(this).css("opacity") == "0.5") ){
        $(this).css({"opacity":"0"});
} else {
        $(this).css({"opacity":"0.5"});
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T06:14:11.790

无需检查是否不是，只需使用 else 子句：

```
$("#one_star").click(function(){
    if($(this).css("opacity") === "0.5") {
        $(this).css({"opacity":"0"});
    } else {
        $(this).css({"opacity":"0.5"});
    }
}); 
```

# c# - 在 Asp.Net 中导入 Gmail 联系人 Brithday 和 Pic

> ID：10975160
> 
> 赞同：1
> 
> 时间：2012-06-11T06:10:34.677
> 
> 标签：c#, asp.net, gmail

我想导入gmail的联系人。我已成功导入朋友的姓名、电话和电子邮件地址，但我也想导入朋友的照片和出生日期。

我做了很多研发，但没有找到和解决方案。请帮忙 ……。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:13:08.193

检查**Google 通讯录 API**

[https://developers.google.com/google-apps/contacts/v3/#retrieving_a_contacts_photo](https://developers.google.com/google-apps/contacts/v3/#retrieving_a_contacts_photo)

> 要检索联系人的照片，请将授权的 GET 请求发送到联系人的照片链接 URL。
> 
> URL 的格式为：
> 
> [https://www.google.com/m8/feeds/photos/media/](https://www.google.com/m8/feeds/photos/media/) {userEmail}/{contactId}
> 
> 使用适当的值代替 userEmail 和 contactID。

```
public static void DownloadPhoto(ContactsRequest cr, Uri contactURL)
{
  Contact contact = cr.Retrieve<Contact>(contactURL);

  Stream photoStream = cr.GetPhoto(contact);
  FileStream outStream = File.OpenWrite("test.jpg");
  byte[] buffer = new byte[photoStream.length];

  photoStream.Read(buffer, 0, photoStream.length);
  outStream.Write(buffer, 0, photoStream.length);
  photoStream.Close();
  outStream.Close();
} 
```

# php - 如果在数组中，则从数组中删除一个值

> ID：10975161
> 
> 赞同：0
> 
> 时间：2012-06-11T06:10:35.460
> 
> 标签：php, arrays, ip

我目前正在开发一个简单的 IP 禁止系统，如果某事被执行两次，它会禁止 IP。我已经搜索过，但似乎我找到的答案是使用 foreach 的答案。我想知道的是如何从数组中删除一个值来整理它？

代码：

```
function ipCheck($ip) {
$ip1 = array();
$ip2 = array();
if(in_array($ip, $ip2, true)){
    die();
}
elseif(in_array($ip, $ip1){
    array_push($ip2, $ip);
else{
    array_push($ip1, $ip);
  }
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:28:27.653

这个怎么样？

```
if(isset($array[$ip]) {
    unset($array[$ip]);
} 
```

# html - 带有 div 标签的 onclick 事件

> ID：10975162
> 
> 赞同：1
> 
> 时间：2012-06-11T06:10:50.950
> 
> 标签：html

我尝试了以下带有 div 标签的东西，

```
 <style type="text/css">
    #hello{
        visibility: visible;
        cursor: pointer;
        position: absolute;
    }
    #list{
        visibility: hidden;
        cursor: pointer;
        position: absolute;
        top: 30px;
        z-index:  1;
        background-color: aqua;
    }
    #second{
            position: absolute;
    }
</style>
<div id="hello" onclick="{if(list.style.visibility=='hidden'){list.style.visibility='visible';}else{list.style.visibility='hidden'};}">Hello user</div><br/>
      <div id="second">Welcome to smartdata</div>
      <div id="list">
          <a href="index.jsp">Home</a> <br/>
          <a href="#" onclick="{alert('You are going to signout');}">SignOut</a> <br/>
      </div> 
```

它工作正常，但问题是第一次单击时未显示列表。我的代码有什么问题吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:16:32.167

`list.style.visibility=='hidden'`是第一次点击时的虚假陈述

试试这个

```
{if(list.style.visibility=='hidden' || list.style.visibility='') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T06:25:10.837

由于工作方式，您的代码无法按预期`element.style`工作。

检查 element.style 上的这个 MDN 链接：[https ://developer.mozilla.org/en/DOM/element.style](https://developer.mozilla.org/en/DOM/element.style)

> 由于 style 属性在 CSS 级联中具有与通过 style 属性的内联样式声明相同（且最高）的优先级，因此它对于在一个特定元素上设置样式很有用。
> 
> 但是，一般来说，它对于了解元素的样式并没有什么用处，因为它只表示在元素的**内联样式属性中设置的 CSS 声明，而不是来自其他地方的样式规则的那些声明，例如部分中的样式规则或外部样式床单**。

因此，当您第一次运行代码时，即使`element.style.hidden`在*外部*CSS 表中声明了您的代码，样式声明仍为空，您需要执行额外的检查。

```
if (!list.style.visibility || list.style.visibility === 'hidden') {...} 
```

你可以看看小提琴看看它的工作原理：http: [//jsfiddle.net/Kk6TJ/1/](http://jsfiddle.net/Kk6TJ/1/)

**还：**

1.  最好在`===`不转换变量类型的情况下使用三等号进行严格比较。
2.  您的事件处理程序中不需要大括号。如果您希望他们会创建范围 - 他们不会！只有 JavaScript 中的函数才有作用域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T06:18:10.760

```
 <style type="text/css">
    #hello{
        visibility: visible;
        cursor: pointer;
        position: absolute;
    }
    #list{
        visibility: hidden;
        cursor: pointer;
        position: absolute;
        top: 30px;
        z-index:  1;
        background-color: aqua;
    }
    #second{
            position: absolute;
    }
</style>
<div id="hello" onclick="{if(list.style.visibility=='hidden' || list.style.visibility==''){list.style.visibility='visible';}else{list.style.visibility='hidden'};}">Hello user</div><br/>
      <div id="second">Welcome to smartdata</div>
      <div id="list">
          <a href="index.jsp">Home</a> <br/>
          <a href="#" onclick="{alert('You are going to signout');}">SignOut</a> <br/>
      </div>​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T06:38:38.773

这是因为您的 if..else 不正常。重新排序决策语句更正了行为，现在第一次单击显示菜单项。

此外，如果您运行脚本并在 firebug 控制台中观看它，您将看到您的 javascript 代码在第一次单击时抛出警告。

![在此处输入图像描述](../Images/71f9d65035cca4d71f08885e7d64dabc.png)

我已经更新了你的代码 -

```
 <style type="text/css">
    #hello{
        visibility: visible;
        cursor: pointer;
        position: absolute;
    }
    #list{
        visibility: hidden;
        cursor: pointer;
        position: absolute;
        top: 30px;
        z-index:  1;
        background-color: aqua;
    }
    #second{
            position: absolute;
    }

</style>

<script type="text/javascript">

function Clickme()
{
var list = document.getElementById('list');

if(list.style.visibility=='visible')
{
list.style.visibility='hidden';
}
else
{
list.style.visibility='visible'
}
}
</script>
<div id="hello" onclick="Clickme();">Hello user</div><br/>
      <div id="second">Welcome to smartdata</div>
      <div id="list">
          <a href="index.jsp">Home</a> <br/>
          <a href="#" onclick="{alert('You are going to signout');}">SignOut</a> <br/>
      </div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T06:27:42.830

在样式标签和 css 文件中定义的样式不在 element.style.property 属性中，如果元素的样式设置为内联`<element style="property:value;">`或显式，则它们可用`element.style.property = value;`

要获取样式标签/表单中定义的元素的样式，请使用 window. [getComputedStyle](http://www.w3.org/TR/DOM-Level-2-Style/css.html#CSS-CSSview-getComputedStyle)（元素，空）。[获取](http://www.w3.org/TR/DOM-Level-2-Style/css.html#CSS-CSSStyleDeclaration-getPropertyValue)属性值（属性）；`

`list.style.visibility`因此，您可以内联列表中的样式，使用 getComputedStyle getPropertyValue 或使用第一次单击时将为空的事实。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T13:26:16.173

去做这样的事情 -

```
if(list.style.visibility=="visible")
{
   list.style.visibility="hidden";
}
else
{
   list.style.visibility="visible"
} 
```

# django - 如何在不循环的情况下过滤项目

> ID：10975171
> 
> 赞同：3
> 
> 时间：2012-06-11T06:12:22.573
> 
> 标签：django, django-models

有没有更好的查询方法，这样我就不必循环并将用户附加到列表中，因为当项目的长度非常大说 10000 时，它必须查询 10000 次。有没有办法避免它？

```
user_list = []
items = Items.objects.all()
for item in items:  
        userobjects = Users.objects.filter(item=item.id)
        user = userobjects[0].user
        user_list.append(user) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:34:43.940

*更新*

正如 Sandip Agarwal 所指出的，如果你只想要第一个，那么 SQL AFAIK 并不容易，为了性能，我会这样做

```
user_list = []
cur = None
# If there is customized ordering, 
# you could put the customization after 'item' in the following code
for user in Users.objects.filter(item__isnull=False).order_by('item').iterator():
    if cur != user.item_id:
        user_list.append(user)
        cur = user.item_id 
```

* * *

您还没有提供任何模型`Item`和代码`User`，所以在这里简单猜测一下：

```
User.objects.filter(item__isnull=False)   
# or 
User.objects.filter(item__in=Items.objects.all()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:20:05.380

您可以使用 MYSQL join 来连接表并获得预期结果而无需迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:34:32.940

尝试：

```
user_list = User.objects.filter(users__items__in=Items.objects.all()) 
```

但是，由于您没有过滤项目，因此您实际上只是在寻找`Users`have any `Item`，因此您实际上可以这样做：

```
user_list = User.objects.filter(users__items__isnull=False) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T13:32:07.993

您可以通过获取所有项目 ID 来实现这一点，然后使用它来过滤带有 IN 子句（在列表中）的用户，并在返回的用户上使用不同的过滤器。我目前无法直接测试，但类似以下内容应该可以为您执行此操作：

```
item_ids = Item.objects.all().values_list('id', flat=True) # Get a list of Item id's values, since you don't need the whole Item object

user_list = User.objects.filter(items__id__in=item_ids).distinct('id') #Distinct on user id/username, filtered on those users matching an item id

user_list = list( user_list ) # Convert to a list 
```

注意：您可以`Item.objects.all()`直接使用而不是 values_list。这可能会导致更大/更慢的查询，请尝试对其进行分析。

如果这不能解决问题，您可能需要添加更清晰的描述，准确描述您希望在输出中看到的内容。您正在执行选择并获取出现的第一个值（*通常*这将是数据库中的第一个值）。您可以通过在 distinct 之前进行排序来模拟上述内容：

```
user_list = User.objects.filter(items__id__in=item_ids).order_by('id').distinct('id') 
```

如果这是您经常要做的事情，一个更快的解决方案可能是向名为 first_user 的项目记录添加另一个字段，该字段是在通过保存挂钩添加第一个用户时设置的。

# osmf - 如何动态调整 Strobe 媒体播放器的大小？

> ID：10975172
> 
> 赞同：1
> 
> 时间：2012-06-11T06:12:31.370
> 
> 标签：osmf

我正在使用 Strobe 媒体播放器（带有 OSMF）。当有人单击调整大小按钮（内置于播放器中）时，我需要重新调整播放器的大小。我怎样才能做到这一点？我搜索了高低，但没有找到结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:22:35.553

将 scaleMode 设置为“letterbox”，然后播放器会根据其父 div 自动调整其大小。然后您可以更改其大小，例如使用 jquery：

```
function getHeight() { return $(window).height(); };

function getWidth() { return $(window).width(); };

$(window).resize(function () {
    $("#strobemediaplayback").css({ height: getHeight(), width: getWidth() });
}); 
```

# php - 如何在单击按钮时专注于另一个 html 或 php 页面中的特定部分？

> ID：10975174
> 
> 赞同：0
> 
> 时间：2012-06-11T06:12:49.717
> 
> 标签：php, html

我想使用搜索选项在另一个页面中查找内容。

我的 HTML 页面：

```
<form action="search.php" method="post">
<input name="search" type="text"/> 

<input type="image" src="images/search-btn.jpg" alt="search-btn" /> 
</form> 
```

我在另一个页面中有 5 个主题，例如“products.html”。主题标题是电影、音乐等。因此，如果键入关键字（如每个主题中的标题或某些预定义关键字）并单击搜索按钮，我想重定向到 products.php 页面。

**主要的是我想把注意力集中在那个特定的话题上**

现在我像这样重定向：

```
 <?php
    $val=$_POST['search'];

    if($val=='Music'||$val=='singer')
    {
        header('Location:http://localhost/products.html');
    }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:18:44.717

page1.html

```
<a name='music'></a><!-- This is anchor -->

<a href='#music'>Go to music on same page</a> 
```

page2.html

```
<a href='page1.html#music'>Go to music on another page</a> 
```

服务器端：

```
<?php
    if($val=='Music'||$val=='singer'){
       header("Location:http://localhost/products#$val.html");
    }
?> 
```

您可以根据需要设置关键字锚点的样式：

`<a name='music'><b>music<b></a>`

```
<span id='music'>music</span> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T06:27:27.307

在您的表单中发布到可以处理结果的页面，保存它然后推送用户。

```
<form action="process.php" method="post" name="search"> 
```

此响应页面将重定向到类似

```
header("Location: /products.html#music"); 
```

取决于表格的填写方式。

然后在您的产品页面上添加绑定它的 id，例如：

```
<h2 id="music">Music</h2> 
```

用户将被重定向，浏览器将跳转到相应的锚点或 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T06:26:01.783

您也可以通过使用隐藏字段来尝试这种技术，但对于第一页 JavaScript 将适用于此

```
<input name="target" type="hidden" value=""/> 
<input name="search" type="text" onkeyup="your-function-to-set-value-on-hidden-field"/> 
```

如果键入的关键字与您的列表匹配，则设置该值，并且在第二页上接收 PHP 变量中的隐藏字段值并执行此操作。

# android - Android 希伯来语 (RTL) 集成

> ID：10975176
> 
> 赞同：7
> 
> 时间：2012-06-11T06:13:03.153
> 
> 标签：android, hebrew, right-to-left

我正在开发一个相对简单的 Android 应用程序。我希望它有英文版和**希伯来文**版。（RTL 从右到左对齐）

我已在布局 xml 文件中手动将对齐方式更改为右对齐。当一个句子包含数字时（在它的中间），数字出现在镜像视图中： **29 显示为 92**，**21:45 显示**为 54:12 ，**2,000 显示为 000,2**。

此外，当一个句子以数字或英文字符开头时，它们会被扔到句子的末尾，把它弄得一团糟。

我认为对于 android 版本 4.0.3 它支持希伯来语。我已经在模拟器中检查过了。

那么对于旧版本是否有正确的方法来实现希伯来语？请帮忙。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-12T01:25:35.043

我认为Android的bidi分析算法存在一些缺陷。Unicode 有两个不可见的强方向性字符，可能有助于解决这些问题：

*   U+200E - 从左到右的标记
*   U+200F - 从右到左的标记

对于数字顺序问题，请尝试在数字序列的两侧放置从左到右的标记（U+200E）。

Unicode 还具有以下双向格式代码：

*   U+202A - 从左到右嵌入
*   U+202B - 从右到左嵌入
*   U+202C - 弹出方向格式（取消之前的嵌入或覆盖）
*   U+202D - 从左到右覆盖
*   U+202E - 从右到左覆盖

对于希伯来语文本中英文片段的问题，可能就像在英文之前放置一个从右到左的标记一样简单。（Android 的算法可能会认为段落是从左到右的，因为第一个字符是英文。）如果这不起作用，也许可以尝试使用一些格式代码组合来包围选定的文本。（我会尝试从左到右嵌入，然后是弹出定向格式。我还会尝试在所有内容周围从右到左嵌入，并结合选择性显式从右到左嵌入。）

这些应该影响文本布局的方式由 Unicode Bidirectional Algorithm [Unicode Standard Annex #9](http://www.unicode.org/reports/tr9/tr9-25.html)定义。但是，如果 Android 的实现被破坏了（我怀疑是这样），你能做的最好的就是反复试验，直到你得到正确的结果。祝你好运。

编辑

就代码而言，这是一个如何在 Java 中完成的示例：

```
String text = "גרסה \u200e2.100\u200e זמינה"; 
```

在 XML 中，它可能是：

```
<string name="update_available">גרסה &#x200e;2.100&#x200e; זמינה</string> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-19T08:15:13.677

这是我的希伯来语字符串 xml 中的一个示例，感谢 Ted Hopp 的回答：

您需要在导致问题的字符之前添加 '\u200e'：

```
<string name="basic_text1">המר על תוצאת המשחק\u200e:</string> 
```

结果将是：

```
 :המר על תוצאת המשחק 
```

# dynamics-crm - 没有为具有非管理员角色的用户加载仪表板

> ID：10975178
> 
> 赞同：1
> 
> 时间：2012-06-11T06:13:05.773
> 
> 标签：dynamics-crm, crm, dynamics-crm-4, dynamics-crm-online, dashboard-designer

当我以具有非管理员安全角色的用户登录时，仪表板未加载，浏览器将被挂起。但是当我使用具有管理员角色的用户登录时，它工作得很好。那么，这种情况下的问题是什么..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:16:39.330

这似乎是一个安全问题。您必须检查非管理员用户拥有的角色的权限，并检查仪表板中显示的实体是否存在限制。

也许这个链接会帮助你：[http ://www.dynamicscrmtrickbag.com/2011/07/15/dynamics-crm-2011-charts-and-dashboards-who-can-see-what/](http://www.dynamicscrmtrickbag.com/2011/07/15/dynamics-crm-2011-charts-and-dashboards-who-can-see-what/)

希望这会有所帮助

编辑：也许另一个角色与可能的系统管理员冲突

# c++ - 使用 AlphaBlend 绘制稍微透明的矩形失败

> ID：10975180
> 
> 赞同：4
> 
> 时间：2012-06-11T06:13:13.277
> 
> 标签：c++, winapi, gdi

我试图在 Native Win32 C++ 中绘制一个稍微透明的蓝色矩形。我正在使用函数 AlphaBlend() 但它没有在窗口上绘制任何东西，没有任何反应。

**我的问题：**当我运行我的函数来绘制一个稍微透明的矩形时，它没有显示在我的窗口上。我有一种感觉我做错了，也许我应该使用 HBITMAP？

**你能告诉我我需要做什么才能让我的函数在窗口上绘制一个稍微透明的矩形吗？**

*我也知道 GDI+，但我现在想避免它，因为我在使用该库时遇到了很多编译/包含错误，而且我想在没有库的帮助的情况下尽可能低/原生我。*

```
bool paintRect(HDC hdc, RECT dim, COLORREF penCol, COLORREF brushCol, unsigned int opacity)
{
    HDC tempHdc         = CreateCompatibleDC(hdc);
    BLENDFUNCTION blend = {AC_SRC_OVER, 0, 127, AC_SRC_ALPHA};

    SetDCPenColor(tempHdc, RGB(255,255,0));
    SetDCBrushColor(tempHdc, RGB(255,255,0));
    Rectangle(tempHdc, dim.left, dim.top, dim.right, dim.bottom);

    return bool(AlphaBlend(hdc, dim.left, dim.top, dim.right, dim.bottom, tempHdc, dim.left, dim.top, dim.right, dim.bottom, blend)); 
}
// Usage
case WM_PAINT:
{
   HDC hdc;
   PAINTSTRUCT ps;
   hdc = BeginPaint(hwnd, &ps);

   RECT a = {0,0,100,100};
   paintRect(hdc, a, RGB(255,255,0), RGB(255,255,0), 127); // 127 is 50% transparency right?

   EndPaint(hwnd, &ps);
}
break; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T06:54:24.873

这将起作用：

```
bool paintRect(HDC hdc, RECT dim, COLORREF penCol, COLORREF brushCol, unsigned int opacity)
{
        HDC tempHdc         = CreateCompatibleDC(hdc);
        BLENDFUNCTION blend = {AC_SRC_OVER, 0, 127, 0};

        HBITMAP hbitmap;       // bitmap handle 
        BITMAPINFO bmi;        // bitmap header 
        // zero the memory for the bitmap info 
        ZeroMemory(&bmi, sizeof(BITMAPINFO));

        // setup bitmap info  
        // set the bitmap width and height to 60% of the width and height of each of the three horizontal areas. Later on, the blending will occur in the center of each of the three areas. 
        bmi.bmiHeader.biSize = sizeof(BITMAPINFOHEADER);
        bmi.bmiHeader.biWidth = dim.right-dim.left;
        bmi.bmiHeader.biHeight = dim.bottom-dim.top;
        bmi.bmiHeader.biPlanes = 1;
        bmi.bmiHeader.biBitCount = 32;         // four 8-bit components 
        bmi.bmiHeader.biCompression = BI_RGB;
        bmi.bmiHeader.biSizeImage = (dim.right-dim.left) * (dim.bottom-dim.top) * 4;

        // create our DIB section and select the bitmap into the dc 
        hbitmap = CreateDIBSection(tempHdc, &bmi, DIB_RGB_COLORS, NULL, NULL, 0x0);
        SelectObject(tempHdc, hbitmap);

        SetDCPenColor(tempHdc, RGB(0,0,255));
        SetDCBrushColor(tempHdc, RGB(0,0,255));
        FillRect(tempHdc, &dim, CreateSolidBrush(RGB(0,0,255)));

        return bool(AlphaBlend(hdc, dim.left, dim.top, dim.right, dim.bottom, tempHdc, dim.left, dim.top, dim.right, dim.bottom, blend)); 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T06:40:22.660

CreateCompatibleDC 函数返回一个兼容的 dc，其默认位图大小为 1x1。为了画出有用的东西，首先你应该选择一个更合适的大小合适的位图。您可以使用[CreateCompatibleBitmap](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183488%28v=vs.85%29.aspx)函数。

基本上你应该做这样的事情：

```
HDC tempHdc         = CreateCompatibleDC(hdc);
// create a bitmap of a size you need, let's say it 100x100
int width = 100;
int height = 100;
HBITMAP canvas = CreateCompatibleBitmap(hdc, width, height);
// select new bitmap into context, don't forget to save old bitmap handle
HBITMAP oldBmp = SelectObject(tepmHdc, canvas);

BLENDFUNCTION blend = {AC_SRC_OVER, 0, 127, AC_SRC_ALPHA};

SetDCPenColor(tempHdc, RGB(255,255,0));
SetDCBrushColor(tempHdc, RGB(255,255,0));
Rectangle(tempHdc, dim.left, dim.top, dim.right, dim.bottom);

bool res = AlphaBlend(hdc, dim.left, dim.top, dim.right, dim.bottom, tempHdc, dim.left, dim.top, dim.right, dim.bottom, blend);
// reset the old bitmap
SelectObect(tempHdc, oldBmp);
// canvas is no longer needed and should be deleted to avoid GDI leaks
DeleteObject(canvas);

return res; 
```

但认真地你应该重新考虑 GDI+，试着找出为什么你有所有这些编译器错误并修复它们。GDI 非常老旧，不太友好，需要手动管理资源，使用起来相当痛苦。

祝你好运。

# jquery - 使用vintage.js jquery插件后如何保存图像

> ID：10975185
> 
> 赞同：3
> 
> 时间：2012-06-11T06:13:48.300
> 
> 标签：jquery, image, html, jquery-plugins

我目前正在使用[vintage.js 插件](https://github.com/rendro/vintageJS)向应用程序添加一些效果。

我正在创建，但我需要知道如何在添加效果后保存图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:45:26.590

您可以使用[canvas2image](http://www.nihilogic.dk/labs/canvas2image/)将由 vintage.js 创建的画布保存到文件中。

# database - 从数据库中选择超过 2 行

> ID：10975188
> 
> 赞同：0
> 
> 时间：2012-06-11T06:14:11.123
> 
> 标签：database, postgresql

我知道我可以在两行之间选择元素，例如：

```
SELECT * FROM table WHERE id BETWEEN 20 AND 30 
```

有人能告诉我如何在 20 到 30 和 40 到 50 之间的 4 行之间选择一个查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:17:48.360

```
SELECT * FROM table WHERE id BETWEEN 20 AND 30 OR id BETWEEN 40 and 50 
```

# string - 如何计算列中未知字符串的出现次数？

> ID：10975191
> 
> 赞同：1
> 
> 时间：2012-06-11T06:14:14.523
> 
> 标签：string, r, count

我有另一个问题。感谢大家对 R 新手的帮助和耐心！

如何计算一个字符串在一列中出现的次数？例子：

```
MYdata <- data.frame(fruits = c("apples", "pears", "unknown_f", "unknown_f", "unknown_f"), 
                     veggies = c("beans", "carrots", "carrots", "unknown_v", "unknown_v"), 
                     sales = rnorm(5, 10000, 2500)) 
```

问题是我的真实数据集包含数千行和数百个未知水果和未知蔬菜。我玩过“table()”和“levels”，但没有取得多大成功。我想它比这更复杂。最好有一个输出表，列出每个独特水果/蔬菜的名称以及它在其列中出现的次数。任何正确方向的提示将不胜感激。

谢谢，

马库斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T06:24:16.840

如果我理解您的问题，该功能`table()`应该可以正常工作。方法如下：

```
table(MYdata$fruits)

   apples     pears unknown_f 
        1         1         3 
table(MYdata$veggies)

    beans   carrots unknown_v 
        1         2         2 
```

* * *

或`table`在里面使用`lapply`：

```
lapply(MYdata[1:2], table)
$fruits

   apples     pears unknown_f 
        1         1         3 

$veggies

    beans   carrots unknown_v 
        1         2         2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T16:48:37.247

以下为您提供了一个计数数据框，您可能会发现它更易于使用或更适合您的目的：

```
tabs=lapply(MYdata[-3], table)
out=data.frame(item=names(unlist(tabs)),count=unlist(tabs)[],
               stringsAsFactors=FALSE)
rownames(out)=c()

print(out)

               item count
1     fruits.apples     1
2      fruits.pears     1
3  fruits.unknown_f     3
4     veggies.beans     1
5   veggies.carrots     2
6 veggies.unknown_v     2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T06:19:03.973

也许像

```
summary(MYdata$fruits) 
```

# ruby - ruby 解释器无法识别全局范围内的变量

> ID：10975194
> 
> 赞同：2
> 
> 时间：2012-06-11T06:14:39.260
> 
> 标签：ruby, global-variables

第 6 行出现错误。我尝试打印 ruby​​ 解释器无法识别的全局变量。这是为什么 ？我该如何修改？

```
localVar = "Local Variable"
$globalVar = "Global Variable"
puts(localVar)
def func
puts("From the function func")
puts(globalVar) #line 6
end

def changer
globalVar = "New Global Var"
puts("New Global Var : #{globalVar}")
end
func #Call the function func
changer #Call the function changer 
```

*输出 ：*

```
Local Variable
From the function func
global.rb:6:in `func': undefined local variable or method `globalVar' for main:Object (NameError)
    from global.rb:13:in `<main>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T06:17:10.407

您需要将`$`每次都放在变量名的前面。

```
puts($globalVar) #line 6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T06:18:30.027

在定义或使用 Ruby 中的全局变量时，您总是需要使用`$`前缀。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T06:43:24.407

这将为您解决问题。$ 是变量名的一部分。

```
puts($globalVar) 
```

# c# - 是否可以检索 XAML 文件中的数据？

> ID：10975196
> 
> 赞同：0
> 
> 时间：2012-06-11T06:15:30.920
> 
> 标签：c#, wpf, xaml

在应用程序中，我需要使用一些自定义对象，其中每个对象都有自己的属性，这些属性来自数据库，因此

```
 <Style x:Key="key1" TargetType="Rectangle">

        <Setter Property="Stretch" Value="Fill"/>
        <Setter Property="IsHitTestVisible" Value="False"/>
        <Setter Property="s:Prop.ID" Value="1234567890-ABC" />
    </Style> 
```

我必须为属性赋值。任何帮助将不胜感激。

谢谢，阿米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:41:47.927

也许 MVVM 会帮助你。然后你有一个 ViewModel，它将你的属性暴露给视图。模型是数据库将提供的。ViewModel 是模型和视图之间的适配器。

Jason Dollinger 在他的视频中很好地解释了这一点，[可在此处获得](http://blog.lab49.com/archives/2650)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:32:31.850

您可以使用 TryFindResource（对象键）。例如，如果您的样式位于窗口资源下，并且您想将第二个设置器设置为 true，则可以将其放在代码隐藏中：

```
((TryFindResource("key1") as Style).Setters[1] as Setter).Value = true; 
```

您也可以使用[绑定](http://msdn.microsoft.com/en-us/library/ms752347.aspx?ppud=4)。只需将值设置为`Value="{Binding Path=path}"`并使您的路径成为依赖属性。这也适用于[多重绑定](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)和转换。

# javascript - JavaScript 绘图工具

> ID：10975197
> 
> 赞同：3
> 
> 时间：2012-06-11T06:15:31.540
> 
> 标签：javascript, graph

我有一个页面，我在其中进行 AJAX 调用以从另一个 PHP 页面获取数据。我想在我的页面中使用 Javascript 将这些数据显示为图表。这类任务有哪些好的工具？数据将每半分钟左右更新一次。我需要很好地处理时间轴，主要需要折线图。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-11T06:24:44.940

1.  [海图](http://www.highcharts.com/)
2.  [图表](http://www.jscharts.com/)
3.  [绘图套件](http://www.liquidx.net/plotkit/)
4.  [jQuery 迷你图](http://www.omnipotent.net/jquery.sparkline/)
5.  [jQuery 可视化插件](http://www.filamentgroup.com/lab/jquery_visualize_plugin_accessible_charts_graphs_from_tables_html5_canvas/)
6.  [jq绘图](http://www.jqplot.com/)
7.  [奶图](http://code.google.com/p/milkchart/)
8.  [画布 3D 图形](http://dragan.yourtree.org/code/canvas-3d-graph/)
9.  [穆查特](http://moochart.coneri.se/)
10.  [簇绒图](http://xaviershay.github.com/tufte-graph/)
11.  [原型图](http://www.deensoft.com/lab/protochart/index.php)
12.  [漂浮物](http://code.google.com/p/flot/)
13.  [普罗托维斯](http://vis.stanford.edu/protovis/)
14.  [情节](https://plot.ly/jsdocs/)

[*原始来源*](http://webdesignledger.com/resources/13-useful-javascript-solutions-for-charts-and-graphs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T06:18:43.240

[http://highcharts.com](http://highcharts.com)是一个很好的框架。也有间隔自我更新的图表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T06:24:52.283

[http://dygraphs.com/](http://dygraphs.com/)可能是一个不错的选择。首先，它是一个真正令人印象深刻的图形解决方案（用于谷歌趋势和所有），而且您可以在需要时更新数据并重新渲染。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T06:36:41.003

[https://developers.google.com/chart/](https://developers.google.com/chart/)谷歌图表也很棒

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-11T13:18:08.020

也检查[www.jqchart.com](http://www.jqchart.com)。看看这些样本：

*   [来自 Ajax 调用的数据](http://www.jqchart.com/samples/ChartData/DataFromAjaxCall)
*   [实时数据示例](http://www.jqchart.com/samples/RealTime/LiveData)
*   [日期时间轴上的折线图](http://www.jqchart.com/samples/ChartTypes/LineChartDateTimeAxis)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T06:19:38.637

在我看来，制作自定义图形的最佳库是使用 SVG 的 raphael： [http ://raphaeljs.com](http://raphaeljs.com)

这不是开箱即用的图表，但如果您正在构建自定义解决方案，请使用 Raphael。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-11T06:32:51.970

[http://jscharts.com](http://jscharts.com)在这里您可以找到您的解决方案

# android - EditText 自定义

> ID：10975199
> 
> 赞同：0
> 
> 时间：2012-06-11T06:15:41.913
> 
> 标签：android, android-edittext

在我的应用程序中，我动态生成一个包含编辑文本和一些按钮的线性布局。

我希望当用户按下设备键盘上的“输入”时，键盘应该隐藏

我通过设置 edittext 的输入类型来尝试它，但是当用户按下“enter”时，它会移动到另一个 edittext 。

我怎样才能做到这一点？？

```
package com.integrated.mpr;

import android.app.Activity;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup.LayoutParams;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.ScrollView;
import android.widget.TextView;

public class Page1 extends Activity implements OnClickListener{

    static String partname;
    int pos = StaticError.n;
    int ns= StaticError.ns;
    String s = StaticError.s;
    int[][] id = new int[pos][6];
    int submit ;

    double timedataa[] = {0,0,0,0,0};
    double timedatab[] = {0,0,0,0,0};
    double timedatac[] = {0,0,0,0,0};
    double timedata[] = {0,0,0,0,0};

    double rawdataa[] = new double[22050];
    double rawdatab[] = new double[22050];
    double rawdatac[] = new double[22050];
    double rawdata[] = new double[22050];

    FeatureExtract fe = new FeatureExtract();
    WavToDat wtd = new WavToDat();
    int i;

    int a=0;
    int b=0;
    int c=0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        int p =0;
        Log.d("value of ", ""+pos);
        //Creating Different ids for the elements for different layouts
        for(int i =0;i<pos;i++){
            for(int j =0;j<6;j++){
                id[i][j] = p;
                p++;
            }
        }

        ScrollView sv = new ScrollView(this);

        LinearLayout ll = new LinearLayout(this);
        ll.setOrientation(LinearLayout.VERTICAL);
        int resid = getResources().getIdentifier("background", "drawable", getPackageName());
        ll.setBackgroundResource(resid);

        Button ins = new Button(this);
        ins.setText("Instructions");
        ins.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
        ins.setGravity(Gravity.RIGHT);
        ins.setId(5000);
        ins.setOnClickListener(new OnClickListener() 
        {
            public void onClick(View v) 
            {
                // TODO Auto-generated method stub
                Context mContext = Page1.this;
                Dialog dialog = new Dialog(mContext);
                dialog.setTitle("Instructions");
                dialog.setContentView(R.layout.instructiondialog);
                dialog.show();
            }
        });

        ins.setTextColor(Color.BLUE);
        ins.setTextSize(TypedValue.COMPLEX_UNIT_SP, 15);
        ins.setTypeface(Typeface.SERIF);
        ll.addView(ins);

        for(i=0;i<pos;i++){

            LinearLayout llay = new LinearLayout(this);
            llay.setOrientation(LinearLayout.VERTICAL);
            llay.setId(id[i][5]);

            //EDIT TEXT
            EditText et = new EditText(this);
            et.setId(id[i][0]);
            et.setTextSize(TypedValue.COMPLEX_UNIT_SP, 15);
            et.setTypeface(Typeface.SERIF);

            LinearLayout lhor = new LinearLayout(this);
            lhor.setOrientation(LinearLayout.HORIZONTAL);
            lhor.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
            lhor.setWeightSum(90);

            Button starta = new Button(this);
            starta.setText("Record 1");
            starta.setId(id[i][1]);
            starta.setOnClickListener(this);

            Button startb = new Button(this);
            startb.setText("Record 2");
            startb.setId(id[i][2]);

            startb.setOnClickListener(this);

            Button startc = new Button(this);
            startc.setText("Record 3");
            startc.setId(id[i][3]);

            startc.setOnClickListener(this);

            lhor.addView(starta);
            lhor.addView(startb);
            lhor.addView(startc);

            Button stop = new Button(this);
            stop.setText("Submit");
            stop.setId(id[i][4]);

            stop.setOnClickListener(this);

            TextView tv1 = new TextView(this);
            tv1.setVisibility(llay.INVISIBLE);

            llay.addView(tv);
            llay.addView(et);
            llay.addView(lhor);
            llay.addView(stop);
            llay.addView(tv1);
            ll.addView(llay);

        }

        sv.addView(ll);
        this.setContentView(sv);

    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:23:07.407

尝试以下操作：

```
final EditText et = new EditText(this);
        et.setId(id[i][0]);
        et.setTextSize(TypedValue.COMPLEX_UNIT_SP, 15);
        et.setTypeface(Typeface.SERIF);

et.setOnKeyListener(new View.OnKeyListener()
        {

            @Override
            public boolean onKey(View editView, int keyCode, KeyEvent event)
            {
                Context mContext = Page1.this;
                if( keyCode == KeyEvent.KEYCODE_ENTER ){
                    et.clearFocus();
                    InputMethodManager imm = (InputMethodManager) mContext.getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(et.getWindowToken(),0);
                    return true;
                }
                return false;
            }
        }) 
```

# php - 如何在php中的特定时间后在脚本中运行特定条件

> ID：10975202
> 
> 赞同：1
> 
> 时间：2012-06-11T06:15:59.160
> 
> 标签：php, time, sleep

我有两个广告，并希望在 8 小时内运行它们，这意味着`ad1`在脚本启动时立即启动并`ad2`在指定为`28800`秒的 8 小时后启动。我正在寻找功能`sleep()`和`time_sleep_until()`，但有点困惑如何在广告之间使用它们。

我的广告在数组中定义。另外，我`sleep`在本地主机中尝试了一次函数来立即执行一个广告，然后再执行另一个`sleep(28800)`，脚本继续执行并显示两个广告的输出。这可能是一个小问题，我没有正确应用逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:52:21.510

听起来对 PHP 在这里实际负责的工作有些混淆。当有人向 Web 服务器发出请求时，会调用 PHP 脚本，但在处理完请求后，它会完成并退出。当下一个请求进来时，它不知道第一个请求。

如果您使用该`sleep(n)`功能休眠 n 秒，这将暂停 Web 服务器的响应，这是一个非常糟糕的主意，而不是您想要实现的目标。

一般来说，如果你想根据时间切换一些内容，最好从服务器时间（这总是已知的）下工作，而不是像“服务器运行了多长时间”这样在实际中没有任何意义的东西。世界。

在一个简单的示例中，假设您想根据 8 小时的时间段投放 3 个不同的广告。您可能会编写一些代码来查找一天中的时间，然后适当地选择一个广告。例如：

```
$selection = (date('G',time()) / 8);
switch ($selection) {
  case 0:
    echo 'ad option 1!';
    break;
  case 1:
    echo 'ad option 2!';
    break;
  case 2:
    echo 'ad option 3!';
    break;
} 
```

该`date('G',time())`函数返回当前系统时间的小时部分，即 0-23。将其除以 8 将为您提供 0、1 或 2，然后您可以从那里选择要显示的内容。

不确定这会完全满足您想要做的事情。如果没有，您可能需要涉及某种数据库，并有某种工作来更新广告以在某个时间间隔投放（如果可能，我会避免这种情况）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:53:54.553

您不应该长时间运行脚本。请改用 cron。您可以在 8 小时的不同时调用相同的脚本，并基于 db 开关调用 ad_1 或 ad_2。

# asp.net - ASP.NET MVC 是如何工作的？

> ID：10975205
> 
> 赞同：2
> 
> 时间：2012-06-11T06:16:35.993
> 
> 标签：asp.net, asp.net-mvc

关于asp.net mvc，我想知道：和asp.net web form有什么不同？生命周期是什么？扩展点在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:19:19.983

不是这个网站的最佳问题，因为它不适合 SO 的问答格式。之前做一些研究：

[http://msdn.microsoft.com/en-us/magazine/dd942833.aspx](http://msdn.microsoft.com/en-us/magazine/dd942833.aspx)

*如果您有具体*问题，然后再回来。

# jquery - 如何在html文本框中添加连字符？

> ID：10975207
> 
> 赞同：0
> 
> 时间：2012-06-11T06:16:51.880
> 
> 标签：jquery, html, jquery-ui, textbox, soft-hyphen

我使用以下代码`textbox`在运行时间创建用于输入电话号码。如何在电话号码之间添加连字符（-）。例如，如果我输入**1234567**，则该条目应显示如下**123-45-67**怎么做这个？如何在 JQuery 中做到这一点？

```
<input id="abcd" type="text" value="" style="width:220px"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:21:39.227

为此，您必须使用 JavaScript。我认为[这](http://www.webdeveloper.com/forum/showthread.php?t=172589)是一个很好的起点...不过，底线是，您必须为此编写一些脚本。（基本上，当字段更改时，检查它是否是正确数量的#s，并在必要时添加连字符。）

我会为此推荐 jQuery；[一个快速的谷歌](https://www.google.ca/search?hl=en&q=jquery+hyphenate+phone+number&oq=jquery+hyphenate+phone+number&aq=f&aqi=&aql=&gs_l=serp.3...983.2111.0.2265.11.10.0.0.0.2.246.1101.4j4j1.9.0...0.0.Dbybb27DuNA)出现了一些有用的结果。

请记住，来自世界不同地区的电话号码将使用不同的连字符。例如，美国使用 +x-xxx-xxx-xxxx，而阿根廷使用 +xx-xx-xxx-xxxx。一些欧洲国家使用+xxx-xxxx-xxxx。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:33:44.090

你可以在面具的帮助下做到这一点。检查此[链接](http://webdeveloperplus.com/jquery/how-to-mask-input-with-jquery/)以了解如何根据需要屏蔽文本框数据。

# ios - UINavigationController，如何在二级视图控制器中隐藏标签栏，然后在三级视图控制器中显示标签栏

> ID：10975215
> 
> 赞同：2
> 
> 时间：2012-06-11T06:17:57.427
> 
> 标签：ios

这是我的一段代码，但是这样，当我推送第三级视图控制器时，标签栏不会显示。

```
//at first level
SecondLevelViewController *_2vc = [[SecondLevelViewController alloc]initWithNibName:@"SecondLevelViewController" bundle:nil];
    _2vc.hidesBottomBarWhenPushed = YES;
    [self.navigationController pushViewController:_2vc animated:YES];  

//at second level
ThirdLevelViewController *_3vc = [[ThirdLevelViewController alloc]initWithNibName:@"ThirdLevelViewController" bundle:nil];
    _3vc.hidesBottomBarWhenPushed = NO;
    [self.navigationController pushViewController:_3vc animated:YES]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T07:56:25.907

```
 // Load the view
    AddViewController *aController = [[AddViewController alloc] init];

    // Set the view title
    aController.title = @"Add View";

    // hide tabbar
    aController.hidesBottomBarWhenPushed = YES;

    // add it to stack.
    [[self navigationController] pushViewController:aController animated:YES];

 -(void)viewWillAppear: (BOOL)animated
 {
    [super viewWillAppear:animated];
    [self.tabBarController.tabBar setHidden:YES];
 }

-(void)viewWillDisappear: (BOOL)animated 
{
    [super viewWillDisappear:animated];
    [self.tabBarController.tabBar setHidden:NO];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T07:29:09.963

而不是在初始化视图控制器时设置 hidesBottomBarWhenPushed 的值，而应该在视图控制器中处理 -(void)viewWillAppear:(BOOL)animated 中的隐藏机制。

这种实现的一个例子是：

在 SecondLevelViewController.m 中

```
-(void)viewWillAppear:(BOOL)animated
{
   [_bottomBar setHidden:YES];
} 
```

在 ThirdLevelViewController.m

```
-(void)viewWillAppear:(BOOL)animated
{
   [_bottomBar setHidden:NO];
} 
```

# asp.net-mvc - MVC3 - 输入和输出值

> ID：10975221
> 
> 赞同：0
> 
> 时间：2012-06-11T06:18:17.123
> 
> 标签：asp.net-mvc, asp.net-mvc-3, textbox

我刚刚从一个[例子](http://asp.net/mvc)中学习了 MVC3，但我还没有找到我要找的东西。类似于 ASP.NET WebForms 中的内容：

```
public void Something()
{
    string a = TextBoxA.Text;
    string b = TextBoxB.Text;
    TextBoxC.Text = a + b;
} 
```

如何在 MVC 中做到这一点？我试图创建一个`ActionResult`但我不想重定向到另一个视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:41:44.497

您可能希望在客户端执行此操作，即使用 jQuery 等。在 MVC 中，它必须在控制器端进行管理，更新 viewModel 所需的属性。该视图模型实习生与实际视图上的控件绑定

```
//Model
public class AddViewModel
{
    public int One { get; set; }
    public int Two { get; set; }
    public int Result { get; set; }
}
//Controller
public ActionResult Index()
{
    AddViewModel obj = new AddViewModel();
    obj.One = 1;
    obj.Two = 2;
    obj.Result = obj.One + obj.Two;
    return View(obj);
}
//View
@model MvcApplication3.Models.AddViewModel
@Html.EditorFor(model => model.One)
@Html.EditorFor(model => model.Two)
@Html.EditorFor(model => model.Result)
<input type="submit" value="Save" /> 
```

# ssrs-2008 - SSRS“报表服务器项目”不显示在 Visual Studio 2010 中

> ID：10975227
> 
> 赞同：0
> 
> 时间：2012-06-11T06:18:47.083
> 
> 标签：ssrs-2008, reporting-services

我已经开始研究 SSRS 并且我已经安装`SQL Server 2008 Enterprise edition`并且已经安装了`Visual Studio 2010`. 在这种情况下，当我打开 VS2010 时，我没有看到**商业智能项目 -> 报表服务器项目**，但每当我在**Microsoft SQL Server 2008**下打开**SQL Server 商业智能开发工作室**时，它都会显示在新项目向导中。我目前的项目是 4.0，我使用 VS2010 从事过该项目。如何在VS2010中显示？**`Report Server Project`**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:03:10.120

SQL Server 2008 仅使用 VS2008 shell。正如 Pratik 所说，您确实需要使用 SQL Server Setup 并安装 Business Intelligence Development Studio 功能来安装 VS2008 shell。在升级到 SQL Server 2012 之前，您将无法使用 VS2010 创建报表服务器项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:24:26.563

Gaurav 您还需要安装商业智能开发工作室才能查看报表服务器项目模板。

[请参阅http://forums.asp.net/t/1062316.aspx/1](http://forums.asp.net/t/1062316.aspx/1)上的相同讨论**

# javascript - 在javascript中从另一个函数调用一个函数时无法按顺序执行语句

> ID：10975228
> 
> 赞同：1
> 
> 时间：2012-06-11T06:18:47.897
> 
> 标签：javascript

在设计我的网页时，我已经完成了一些 javascript 验证，在 JS 文件中，我试图从另一个函数调用一个函数。当我点击按钮时，第一个被调用。在第一个函数中，我试图为标签设置文本，然后我调用了第二个函数，但首先调用了第二个函数，然后为标签设置了文本。缺少序列。我不知道，为什么这些语句没有按顺序执行......如果有人知道，请告诉我解决方案。

```
<script>
    function first(){
        labelValue = document.getElementById("getlabel");
        labelValue.innerHTML = "FirstText";
        second();
    }
    function second(){
        labelValue.text = "secondText";
    } 
```

在这里，我不能在调用 second() 之前为“labelValue”设置文本，即“FirstText”。它是在调用 second() 之后设置的。

```
function first(){
    labelValue = document.getElementById("getlabel");
    labelValue.innerHTML = "FirstText";
    image = document.getElementById("getImage");
    image.src = "hello.jpg";
    second();  
}
function second(){
    labelValue.innerHTML = "SecondText";
    label1 = document.getElementById("name");
    label1.innerHTML =  "sarah";
} 
```

首先它为“name”标签设置值，然后为“image”设置图像“hello.jpg”，为标签“labelValue”设置文本“FirstText”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:28:39.617

问题出在`second()`你正在设置中`labelValue.text`。您应该设置`labelValue.innerHTML`，这就是它不更新内容并让您认为它们没有按顺序执行的原因。

编辑：您发布的更新代码有效，您将不得不向我们提供复制问题的 Javascript 和 HTML。请参阅我更新[的 jsFiddle](http://jsfiddle.net/Q5zce/)。

# c++ - 整数比较不正确或不比较

> ID：10975229
> 
> 赞同：2
> 
> 时间：2012-06-11T06:18:49.047
> 
> 标签：c++, arrays, int

我有一个这样的数组：

```
int array[] = { 1,3,2,5,4,7,6,9,8,10 }; 
```

当我尝试遍历数组并比较数字时，它们都不会触发 if 条件，从而触发交换：

```
for( int i=0; i<9; i++)
{
    if (array[i] > array[i++])
    {
    cout << "Swapping" << array[i] << " " << array[i++]<< endl;
    int temp = 0;
    temp = array[i];
    array[i] = array[i++];
    array[i++] = temp;
    temp = 0;
} 
```

}

是否有一些比较我缺少的整数的细节？它们是否因为在数组中而被区别对待？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T06:20:27.267

`i++`意思是“返回`i`并设置`i = i + 1`”。因此，每次使用时，您都会`i++`增加`i`一个，这会破坏循环。改为使用`i+1`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T06:20:07.283

`i++`是一个后增量，并返回前一个值。

```
 if (array[i] > array[i+1]) 
```

现在，您正在`array[i]`与自己进行比较。

您还需要以下内容：

```
temp = array[i];
array[i] = array[i+1];
array[i+1] = temp; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T06:20:59.543

你增加你的 i 太多次了。将您的 if 语句更改为：

如果（数组[i] > 数组[i + 1]）

并修复除 for 循环中的增量之外的所有其他增量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T08:21:24.620

表达式：

```
array[i] < array[i++] 
```

和

```
array[i] = array[i++] 
```

是未定义的行为，所以任何事情都可能发生。（正如其他人指出的那样，它可能不是你想要的。正如所写的，`i`每次循环时你都会增加 5 次。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T06:26:11.720

您应该使用以下代码：-

```
for( int i=0; i<9; i++)
{
    if (array[i] > array[i+1])
    {
     cout << "Swapping" << array[i] << " " << array[i+1]<< endl;
     int temp = 0;
     temp = array[i];
     array[i] = array[i+1];
     array[i+1] = temp;
    temp = 0;
    }
} 
```

声明：`if (array[i] > array[i++])`相当于`if (array[i] > array[i])`which 没有意义。

# jquery - jquery 最近添加的突出显示的 css 在警报生成后无法删除

> ID：10975233
> 
> 赞同：0
> 
> 时间：2012-06-11T06:19:05.737
> 
> 标签：jquery, html, css

[http://jsfiddle.net/Cyjye/](http://jsfiddle.net/Cyjye/) 我是 jquery 的新手。我已经制作了 jsfiddle 中显示的 html 表。首先从我的 html 表中的第二行第二个单元格中进行选择，从第一行第二个单元格中进行选择。我分配给病人的时间不超过 30 分钟。如果用户选择超过 30 分钟，它会发出警报“时隙不超过 30 分钟”。警报正常工作，但警报后未删除其添加的 css。并且每当我在警报 .cell 用 css 突出显示之后鼠标向上。如果警报生成然后最近添加到单元格的 css 被删除，并且每当我在警报后 mouseup 时，我不想这样做，那么没有单元格会用 css 突出显示。我尝试了很多，但没有得到正确的方法。当我突出显示 30 分钟时间并单击选择患者按钮（在 html 表下方有选择患者（从文本框获取患者）按钮）然后突出显示 css 被删除。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Drag selection example</title>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">

        google.load("jquery", "1.3.2");

        google.setOnLoadCallback(function ()
        {
            var active = false;
            var lastActionWasError = false;
            $('#tableAppointment tr td:nth-child(2), #tableAppointment tr td:nth-child(3)').mousedown(function (ev)
            {
                active = true;
                $(".csstdhighlight").removeClass("csstdhighlight"); // clear previous selection
                ev.preventDefault(); // this prevents text selection from happening
                $(".csstdhighlight").removeClass("csstdhighlight");
                $(".temp_selected").removeClass("temp_selected");
                $(this).addClass("csstdhighlight");
                $(this).addClass("temp_selected");
            });

            $('#tableAppointment tr td:nth-child(2), #tableAppointment tr td:nth-child(3)').mousemove(function (ev)
            {
                if (lastActionWasError)
                {
                    $(".csstdhighlight").removeClass("csstdhighlight");
                    $(".temp_selected").removeClass("temp_selected");
                    lastActionWasError = false;
                }
                if (active)
                {
                    $(this).addClass("csstdhighlight");
                    $(this).addClass("temp_selected");
                }
                if ($('.temp_selected').length > 6)
                {
                    alert("Time slot not more than 45 minutes.");
                    $(this).removeClass("csstdhighlight");
                    $(this).removeClass("temp_selected");
                    lastActionWasError = true;
                    return false;
                }
            });
        });
    </script>
    <style type="text/css">
        .csstdhighlight
        {
            background-color: #ccffcc;
        }
    </style>
</head>
<body>
    <table id="tableAppointment" cellspacing="1" width="50%" border="1" align="center">
        <tr>
            <td bgcolor="#ffffff">
            </td>
            <td class="csstablelisttd">
            </td>
            <td class="csstablelisttd">
                <b>Patient Name</b>
            </td>
        </tr>
        <tr>
            <td class="csstablelisttd" valign="top" width="70px">
                8:00AM
            </td>
            <td class="csstablelisttd">
                0
            </td>
            <td class="csstablelisttd">
            </td>
        </tr>
        <tr>
            <td class="csstablelisttd">
            </td>
            <td class="csstablelisttd">
                15
            </td>
            <td class="csstablelisttd">
            </td>
        </tr>
        <tr>
            <td class="csstablelisttd">
            </td>
            <td class="csstablelisttd">
                30
            </td>
            <td class="csstablelisttd">
            </td>
        </tr>
        <tr>
            <td class="csstablelisttd">
            </td>
            <td class="csstablelisttd">
                45
            </td>
            <td class="csstablelisttd">
            </td>
        </tr>
        <tr>
            <td class="csstablelisttd" valign="top" width="90px">
                9:00AM
            </td>
            <td class="csstablelisttd">
                0
            </td>
            <td class="csstablelisttd">
            </td>
        </tr>
        <tr>
            <td class="csstablelisttd">
            </td>
            <td class="csstablelisttd">
                15
            </td>
            <td class="csstablelisttd">
            </td>
        </tr>
        <tr>
            <td class="csstablelisttd">
            </td>
            <td class="csstablelisttd">
                30
            </td>
            <td class="csstablelisttd">
            </td>
        </tr>
        <tr>
            <td class="csstablelisttd">
            </td>
            <td class="csstablelisttd">
                45
            </td>
            <td class="csstablelisttd">
            </td>
        </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:35:49.680

要从最后选择的单元格中删除突出显示的 css，请使用

```
$(this).removeClass("csstdhighlight");
$(this).removeClass("temp_selected"); 
```

[JSFiddle](http://jsfiddle.net/Cyjye/1/)

# php - 根据表单值创建 URI

> ID：10975237
> 
> 赞同：-1
> 
> 时间：2012-06-11T06:19:24.787
> 
> 标签：php, html, forms, post

我有一个表格，我想使用 post 将输入到表格中的详细信息发送到 uri 中。我只是不知道该怎么做。

我会有：

号码： 致电：

我想生成[http://domian.co.nz/page.php?login=xxxx&password=xxxx&number=12345&call678910](http://domian.co.nz/page.php?login=xxxx&password=xxxx&number=12345&call678910)等

我将预设登录名和密码，但是如何将表单中的数据传递到操作中？

这是我提出的一个概念想法，但仍然不是 100%：

*   下拉菜单不会将数据发布到 uri
*   我将如何发布通话数据？

[代码在这里](https://gist.github.com/2908988)，因为它不喜欢堆栈系统

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:22:34.257

您的 URI 仅适用于 GET 请求。

发布请求不会将参数放在 URI 中，而是放在请求的正文中。

[服务器希望您的 POST 请求的正文采用http://www.w3.org/TR/html401/interact/forms.html#form-data-set](http://www.w3.org/TR/html401/interact/forms.html#form-data-set)中定义的 multipart/form-data 格式

最简单的方法是使用表单，让 HTML 多部分发送元素。

通常你会让用户填写登录名和密码这两个字段以便登录：

```
<FORM METHOD=POST ACTION="yoururl.php">
    <input type=text name=login>
    <input type=password name=password>
    <input type=submit value="login">
</FORM> 
```

用户只需单击“登录”按钮即可在帖子中发送请求。

但是，如果您不希望这些字段出现在您的页面中，您可以使用隐藏输入：

```
<FORM METHOD=POST ACTION="yoururl.php">
    <input type=hidden name=login>
    <input type=hidden name=password>
</FORM> 
```

假设您使用的是 javascript，您可以这样做：

```
var form = document.forms[0];
form.login = "mylogin";
form.password = "mypassword";
form.submit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T07:17:08.143

不要混淆 POST 请求和 GET 请求。

假设我们有：

```
inputOne = valueOne
输入二 = 值二
输入三 = 值三

```

在 GET 请求中，您应该做的就是在所需的 URI 上传递这些：

协议：//域/页面`?inputOne=valueOne&inputTwo=valueTwo&inputThree=valueThree`

在 GET 中，我会说所有参数都通过 URI 传输更好，但在 POST 中，参数通过 HTTP 请求传输。像这样的东西：

```
POST /mysite/page HTTP/1.1
主机：本地主机：80
连接：保持活动
内容长度：416
缓存控制：max-age=0
来源：http://localhost:80
用户代理：Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.46 Safari/536.5
内容类型：application/x-www-form-urlencoded
接受：text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
参考：http://localhost:8080/mysite/signup/form.html
接受编码：gzip、deflate、sdch
接受语言：en-US,en;q=0.8,hr;q=0.6
接受字符集：ISO-8859-1,utf-8;q=0.7,*;q=0.3

输入一：值一
输入二：值二
输入三：值三

```

现在取决于你的情况：

***如果您在客户端：***

**得到：**

*   您可以使用参数将用户重定向到适当的 URI
*   您可以使用 GET 方法向所需的 URI 发送 AJAX 请求
*   您可以使用 GET 方法属性生成动态表单并通过 javascript 提交

**邮政：**

*   您可以使用 POST 方法向所需的 URI 发送 AJAX 请求
*   您可以使用 POST 方法属性生成动态表单并通过 javascript 提交

***如果您在服务器端：***

**得到：**

*   您可以使用 HTTP 标头将用户重定向到带有参数的适当 URI

**邮政：**

*   您可以手动构建 HTTP 请求
*   您可以使用 cURL

*旁注：*还有其他选项，但这些是最常见的选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T09:00:59.410

这是电子邮件表单的示例！

表格：

```
<form method="post" action="my.php">
<input name="vv[Name]" class="textfield" type="text" />
<input name="vv[Email]" class="textfield" type="text" />
<input name="Reset" value="Reset" class="input" type="reset" />
<input name="Submit" value="Submit" class="input" type="submit" /> 
```

我的.php

```
<?
$to = mail@domain.com";
$subject = "Contact form ";
$from = $_POST['vv']['Email'];

$valid=1;
$message ='';
foreach ($_POST['vv'] as $k=>$v){
if (trim($v)=='')$valid=0;
$k = str_replace('_',' ',$k);
$message .="$k : $v<br>";
}
$message .="<hr />IP: {$_SERVER['REMOTE_ADDR']}";

function sndmail($from,$to,$subject,$message){
$headers = "MIME-Version: 1.0\r\n";
$headers .= "Content-type: text/html; charset=iso-8859-1\r\n";
$headers .= "From:".$from ."\r\n";
mail($to, $subject, $message, $headers);
}

if ($valid=='1') {
sndmail($from,$to,$subject,$message);
header( 'Location: correct.html' ) ;
}
else header( 'Location: error.html' ) ;

?> 
```

希望对你有帮助

[编辑] 现在我更仔细地阅读了这个问题，发现我的答案不太适合你的问题。为此事道歉！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T06:22:44.377

要在提交时将表单字段放入 URL，您需要使用 'GET' 作为表单`method`，而不是`POST`.

尽管在您的示例中您正在传递密码。我认为在 URL 中显示它不是一个好主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T08:03:46.030

除了 Dystroy 的回答之外，这是一种通过 javascript 使用动态创建的表单发布数据的动态方式：

***纯JavaScript：***

```
var dynForm = document.createElement('form');
dynForm.setAttribute('method','POST');
dynForm.setAttribute('action','');
dynForm.setAttribute('id','dynForm');
dynForm.innerHTML = '';
dynForm.innerHTML += '<input type="hidden" name="login" value="xxxx" />';
dynForm.innerHTML += '<input type="hidden" name="password" value="xxxx" />';
dynForm.innerHTML += '<input type="hidden" name="number" value="12345" />';
dynForm.innerHTML += '<input type="hidden" name="call" value="678910" />';
document.body.appendChild(dynForm);
document.getElementById('dynForm').submit(); 
```

***jQuery：***

```
$("body").append('<form id="dynForm" action="" method="POST">');
$("#dynForm").append('<input type="hidden" name="login" value="xxxx" />');
$("#dynForm").append('<input type="hidden" name="password" value="xxxx" />');
$("#dynForm").append('<input type="hidden" name="number" value="12345" />');
$("#dynForm").append('<input type="hidden" name="call" value="678910" />');
$("body").append('</form>');
$("#dynForm").submit(); 
```

* * *

这是使用 AJAX 发布的技术：

***纯JavaScript：***

```
var xmlhttp = new XMLHttpRequest();
xmlhttp.open("POST","Desired_URI",true);
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp.setRequestHeader("Content-length", params.length);
xmlhttp.setRequestHeader("Connection", "close");
xmlhttp.send("login=xxxx&password=xxxx&number=12345&call=678910"); 
```

***jQuery：***

```
$.post({
  url: 'Desired_URI',
  data: {
    login:'xxxx',
    password:'xxxx',
    number:'12345',
    call:'78910'
  }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T08:27:31.153

给你（*根据你的要点*）：

```
<?php
    $login = '1236567';
    $password = '10152930';
    $officeNumber = array('0212177899','027899899','09111');
?>
<html>
    <head>
    <script type="text/javascript">
        //I assume that the first entry of $officeNumber is the default number
        //I'm saving base URL for further uses
        var baseActionURI = "https://live.domain.co.nz/call.php?login=<?php echo $login; ?>&password=<?php echo $password; ?>";

        function changeAction()
        {
            var oForm = document.forms[0];
            oForm.setAttribute('action',baseActionURI + "&aparty=" + oForm.elements["officeNumbers"].value + "&bparty=" + oForm.elements["officeNumbers"].value)
        }
    </script>
    </head>
    <body>
        <form onsubmit="" method="POST" action="https://live.domain.co.nz/call.php?login=<?php echo $login; ?>&password=<?php echo $password; ?>&aparty=<?php echo $officeNumber[0]; ?>phone&bparty=<?php echo $officeNumber[0];?>">
            <label for="officeNumbers">Office Number:</label>
            <select onchange="javascript:changeAction()" name="officeNumbers" id="officeNumbers">
            <?php
                foreach($officeNumber as $number)
                {
                    echo '<option value="'.$number.'">'.$number.'</option>';
                }
                echo '</select>';
            ?>
            <label for="callTo">Call:</label>
            <input type="text" name="callTo" id="callTo" />
            <input type="submit" value="Call" />
        </form>
    </body>
</html> 
```

# android - 使用 Parcelable 将对象从一个 android 活动传递到另一个

> ID：10975239
> 
> 赞同：8
> 
> 时间：2012-06-11T06:19:35.610
> 
> 标签：android, object, android-activity, bundle, parcelable

我想做这个

```
class A extends Activity{
       private class myClass{
       }
       myClass obj = new myClass();

      intent i = new Intent();
      Bundle b = new Bundle();
      b.putParcelable(Constants.Settings, obj); //I get the error The method putParcelable(String, Parcelable) in the type Bundle is not applicable for the arguments (int, A.myClass)
      i.setClass(getApplicationContext(),B.class);
      startActivity(i);  
    } 
```

如何使用 Parcelable 将 obj 传递给活动 B？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T06:22:08.117

创建您的类并实现**Serializable**：

```
private class myClass implements Serializable  {
   } 
```

并且喜欢：

```
myClass obj = new myClass();
Intent aActivity = (A.this, B.class);
intent.putExtra("object", obj); 
```

在接收方：

```
myClass myClassObject = getIntent().getSerializableExtra("object"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T06:22:11.563

正如错误所暗示的，您需要让您的类（`myClass`在这种情况下）实现[`Parcelable`](http://developer.android.com/reference/android/os/Parcelable.html)。如果您查看 的[文档`Bundle`](http://developer.android.com/reference/android/os/Bundle.html)，所有`putParcelable`方法`Parcelable`都以某种形式采用它们的一个或一个集合。（根据名称，这是有道理的。）因此，如果您想使用该方法，则需要有一个`Parcelable`实例来放入包中...

当然，您不必*使用*-`putParcelable`您可以`Serializable`改为实现并调用`putSerializable`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-17T16:16:48.727

Parcelable 是编写代码的痛苦，但比 Serializable 更具成本效益。看看下面给出的链接 -

[可打包与可序列化](http://www.developerphil.com/parcelable-vs-serializable/)

# algorithm - 如何以规则密度选择点

> ID：10975241
> 
> 赞同：9
> 
> 时间：2012-06-11T06:19:42.440
> 
> 标签：algorithm, geometry, selection, subset, sampling

如何以常规密度选择点的子集？更正式地说，

给定

1.  一组不规则间隔的点**A**，
2.  距离度量`dist`（例如，欧几里得距离），
3.  和目标密度**d**，

如何选择满足以下条件的最小子集**B ？**

*   **对于A**中的每个点**x**，
***   **B**中有一个点**y*****   满足`dist(x,y) <= d`****

 ****我目前最好的镜头是

*   从**A**本身开始
*   选出最接近（或特别接近）的几个点
*   随机排除其中之一
*   只要条件成立就重复

并重复整个过程以获得最佳运气。但是有更好的方法吗？

我试图用 280,000 个 18-D 点来做到这一点，但我的问题是一般策略。所以我也想知道如何用二维点来做。而且我真的不需要最小子集的保证。欢迎任何有用的方法。谢谢你。

* * *

# 自下而上的方法

*   选择一个随机点
*   选择未选择`y`的`min(d(x,y) for x in selected)`最大的
*   继续！

我将其称为自下而上，我最初发布的自上而下。这在开始时要快得多，所以对于稀疏采样，这应该更好吗？

# 性能指标

如果不需要保证最优性，我认为这两个指标可能有用：

*   覆盖半径：`max {y in unselected} min(d(x,y) for x in selected)`
*   经济半径：`min {y in selected != x} min(d(x,y) for x in selected)`

RC 是允许的最小值**d**，这两者之间没有绝对的不等式。但`RC <= RE`更可取。

# 我的小方法

为了稍微演示一下“性能测量”，我生成了 256 个二维点，这些点均匀分布或按标准正态分布。然后我用他们尝试了我的自上而下和自下而上的方法。这就是我得到的：

![自下而上的规范](../Images/f1a3878c0eb8a7099ad4157af88a2fbf.png) ![自上而下的规范](../Images/87ff6acad4dc771c3523df9be5c4c1e4.png)

RC 为红色，RE 为蓝色。X 轴是选定点的数量。你认为自下而上可以一样好吗？我是这么看动画的，但似乎自上而下的效果要好得多（看看稀疏区域）。尽管如此，考虑到它的速度要快得多，这并不算太可怕。

在这里，我收拾了所有东西。

[http://www.filehosting.org/file/details/352267/density_sampling.tar.gz](http://www.filehosting.org/file/details/352267/density_sampling.tar.gz)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T07:06:04.620

您可以用图对问题进行建模，将点假设为节点，如果两个节点的距离小于**d** ，则用边连接两个节点，现在您应该找到最小的顶点数，以使它们的连接顶点覆盖图的所有节点，这是[最小顶点覆盖问题](http://en.wikipedia.org/wiki/Vertex_cover)（通常是 NP-Hard），但您可以使用快速 2 近似：重复将边的两个端点放入顶点覆盖，然后将它们从图中删除。

PS：确保您应该选择与图表完全断开连接的节点，删除此节点（意味着选择它们）后，您的问题是顶点覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T08:01:23.960

这是一个假设曼哈顿距离度量的提案：

1.  将整个空间划分为粒度为 d 的网格。形式上：分区 A 使得点 (x1,...,xn) 和 (y1,...,yn) 恰好在 (floor(x1/d),...,floor(xn/d) 时位于同一分区中))=(地板(y1/d),...,地板(yn/d))。
2.  从每个网格空间中选择一个点（任意）——即从步骤 1 中创建的分区中的每个集合中选择一个代表。如果某些网格空间为空，请不要担心！根本不要为这个空间选择代表。

实际上，实现不需要做任何实际工作来完成第一步，而第二步可以使用分区标识符的散列（(floor(x1/d),.. .,floor(xn/d))) 来检查我们是否已经为特定的网格空间选择了一个代表，所以这可以非常非常快。

其他一些距离度量可能能够使用适应的方法。例如，欧几里得度量可以使用 d/sqrt(n) 大小的网格。在这种情况下，您可能需要添加一个后处理步骤，以尝试减少一点覆盖（因为上面描述的网格不再完全是半径-d 球——这些球与相邻的网格有一点重叠），但我我不确定那部分会是什么样子。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T14:29:13.930

遗传算法在这里可能会产生好的结果。

**更新**：

我一直在玩这个问题，这些是我的发现：

获得满足所述条件的一组点的简单方法（称为随机选择）如下：

1.  以 B 开头为空
2.  从 A 中选择一个随机点 x 并将其放置在 B 中
3.  从 A 中删除每个点 y 使得 dist(x, y) < d
4.  当 A 不为空时转到 2

kd-tree 可用于相对快速地执行步骤 3 中的查找。

我在 2D 中运行的实验表明，生成的子集的大小大约是自上而下方法生成的子集的一半。

然后，我使用这种随机选择算法来播种遗传算法，使子集的大小进一步减少 25%。

对于突变，给定一个代表子集 B 的染色体，我在最小轴对齐的超级框中随机选择一个超级球，它覆盖了 A 中的所有点。然后，我从 B 中删除所有也在超级球中的点并使用随机-选择再次完成它。

对于交叉，我采用了类似的方法，使用随机超球来划分母亲和父亲的染色体。

[我已经使用我](https://github.com/salva/p5-AI-GAUL)的[GAUL](http://gaul.sourceforge.net/index.php)库包装器在 Perl 中实现了所有内容（GAUL 可以从[这里](https://github.com/versionzero/gaul)获得。

脚本在这里：[https ://github.com/salva/p5-AI-GAUL/blob/master/examples/point_density.pl](https://github.com/salva/p5-AI-GAUL/blob/master/examples/point_density.pl)

它接受来自标准输入的 n 维点列表，并生成一组图片，显示遗传算法每次迭代的最佳解决方案。配套脚本[https://github.com/salva/p5-AI-GAUL/blob/master/examples/point_gen.pl](https://github.com/salva/p5-AI-GAUL/blob/master/examples/point_gen.pl)可用于生成具有均匀分布的随机点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-26T19:38:18.663

为了懒惰，这可以转换为集合覆盖问题，可以由混合整数问题求解器/优化器处理。这是 GLPK LP/MIP 求解器的 GNU MathProg 模型。这里`C`表示哪个点可以“满足”每个点。

```
param N, integer, > 0;
set C{1..N};

var x{i in 1..N}, binary;
s.t. cover{i in 1..N}: sum{j in C[i]} x[j] >= 1;
minimize goal: sum{i in 1..N} x[i]; 
```

对于正态分布的 1000 个点，它没有在 4 分钟内找到最佳子集，但它说它知道真正的最小值，它只选择了一个点。****

# html - 为什么这个 xhtml 不验证？W3C 验证器

> ID：10975243
> 
> 赞同：0
> 
> 时间：2012-06-11T06:19:46.643
> 
> 标签：html, validation, xhtml

不知道为什么它不能验证它很简单......有什么想法吗？

[http://pastebin.com/uMPUzH09](http://pastebin.com/uMPUzH09)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T06:23:50.160

[W3 验证器](http://validator.w3.org/#validate_by_input)非常冗长：

```
Line 19, Column 7: end tag for "div" omitted, but OMITTAG NO was specified
</body>

You may have neglected to close an element, or perhaps you meant to "self-close" an element, that is, ending it with "/>" instead of ">". 
```

您缺少一个结束`</div>`标签：

```
<div id="main_container">
    <div id="top_gray"></div>
    <div id="header">
    <div id="left_container"></div>
    <div id="center_container"></div>
    <div id="right_container"></div>
    <div id="footer"></div>
  </div>
  ^^^^^^ You forgot me
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T06:23:20.347

`<div id="header">`未关闭

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T06:24:48.853

`<div id="main_container">`没有关闭。

在一个像样的编辑器中很好地缩进你的代码，你应该能够很容易地找到这些东西。

W3C 的验证器非常清楚地指出了这一点。

# scala - 为什么 Scala 为 Short 和 Byte 类型定义“+=”运算符？

> ID：10975245
> 
> 赞同：5
> 
> 时间：2012-06-11T06:19:50.657
> 
> 标签：scala, scala-2.8, scala-2.9

给定以下scala代码：

```
var short: Short = 0
short += 1        // error: type mismatch
short += short    // error: type mismatch
short += 1.toByte // error: type mismatch 
```

我不质疑底层的类型——很明显“短 + 值 == Int”。

我的问题是：
1\. 有没有什么办法可以使用操作符？
2\. 如果不是，那么为什么运算符可以在 Short & Byte 上使用？

[通过扩展 *=、|= &= 等]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T03:27:00.733

问题似乎是 Short 类上的“+(Short)”定义为：

```
def +(x: Short): Int 
```

所以它总是返回一个 Int。

鉴于此，您最终将无法使用 += "operator"，因为 + 操作的计算结果为 Int，它（显然）不能分配给 desugared 版本中的“short” var：

```
short = short + short 
```

至于你的第二个问题，它是“可用的”，因为当 scala 编译器找到如下表达式时：

```
x K= y 
```

如果 x 是 var 并且 K 是任何符号运算符并且 x 中有 K 方法，则编译器会将其翻译或“脱糖”为：

```
x = x K y 
```

然后尝试继续编译。

# c++ - 每次发出信号时都会多次调用插槽

> ID：10975247
> 
> 赞同：22
> 
> 时间：2012-06-11T06:20:00.980
> 
> 标签：c++, qt, qt4

我在一个块中使用一个信号和插槽连接。我的代码如下

在一个.cpp

```
{
 QObject::connect(m_ptheFlange2Details,SIGNAL(GetFlang1DimAfterAnalysis()),
                 this,SLOT(GetFlang1DimAftrAnalysis()));

 m_ptheFlange2Details->get();// one function inside which i am emiting
                             // GetFlang1DimAfterAnalysis() signal ;

 QObject::disconnect(m_ptheFlange2Details,SIGNAL(GetFlang1DimAfterAnalysis()),
                     this,SLOT(GetFlang1DimAftrAnalysis()));

} 
```

当这个 emit 语句执行时，在 get() 函数内部，槽被调用了很多次。根据我的说法，它应该只调用一次。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-12T17:48:41.190

正如一些评论中所述，这通常是由于多次调用连接造成的。每次建立连接时，都会调用一次插槽。例如，以下代码在发出一次`slot()`时将导致被调用 3 次。`signal()`

```
connect(obj, SIGNAL(signal()), obj2, SLOT(slot()));
connect(obj, SIGNAL(signal()), obj2, SLOT(slot()));
connect(obj, SIGNAL(signal()), obj2, SLOT(slot())); 
```

如果您在可能多次运行的代码中进行连接，则使用`Qt::UniqueConnection`第 5 个参数通常是一个好主意。以下代码将导致在发出一次`slot()`时被调用 1次。`signal()`

```
connect(obj, SIGNAL(signal()), obj2, SLOT(slot()), Qt::UniqueConnection);
connect(obj, SIGNAL(signal()), obj2, SLOT(slot()), Qt::UniqueConnection);
connect(obj, SIGNAL(signal()), obj2, SLOT(slot()), Qt::UniqueConnection); 
```

我猜您的代码无法正常工作的原因是因为您省略了第 5 个参数并将默认值连接到`Qt::DirectConnection`（对于单线程程序）。这会立即调用插槽，就好像它是一个函数调用一样。这意味着有可能在断开连接之前再次调用 connect（如果您的程序中有循环）。

# .net - msxsl:node-set 奇怪的行为

> ID：10975256
> 
> 赞同：0
> 
> 时间：2012-06-11T06:21:31.367
> 
> 标签：.net, xslt

我是 xslt 的新手，并且出现以下行为。尝试使用具有模式条件的节点集对项目进行计数时，我得到了不同的结果。结果的变化取决于我是否将条件的值转换为字符串，如下所示。一些专家可以帮助解释导致这种行为的原因。

```
 <xsl:for-each ....

  //there is two area that why we need the position()=1
     <xsl:variable name="checkLocation" select="area[position()=1]" /> 
```

场景 A - 错误的结果

```
<xsl:value-of select="count(msxsl:node-set($allItems)//item[area[position()=1] = $checkLocation])"/>   will show 10 
```

场景 B - 将左侧条件转换为字符串后的正确结果

```
 <xsl:value-of select="count(msxsl:node-set($allItems)//item[string(area[position()=1]) = $checkLocation])"/>    will show show 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:56:00.057

我看不出有任何明显的原因：这可能意味着解释位于您没有向我们展示的代码部分的某个地方。您能否发布一个完整的工作示例来演示该问题，最好不使用 msxsl:node-set()？

# android - Facebook 错误：应用程序 ID 无效

> ID：10975266
> 
> 赞同：0
> 
> 时间：2012-06-11T06:22:51.260
> 
> 标签：android, facebook, facebook-android-sdk

嘿，虽然应用程序 ID 是正确的，但我使用 SDK 得到了这个错误。

现在，当我尝试授权该应用程序时，它可以正常工作并对其进行授权，但是当我尝试发出请求时，facebook会返回此错误。我的应用程序已正确初始化并且未处于沙盒模式。

我发现**没有**关于这个问题的信息，有人知道是什么原因造成的吗？

我正在尝试使用以下代码上传照片：

```
 byte[] data = null; 

Bitmap bi = BitmapFactory.decodeFile(photoToPost); 
ByteArrayOutputStream baos = new ByteArrayOutputStream(); 
bi.compress(Bitmap.CompressFormat.JPEG, 100, baos); 
data = baos.toByteArray(); 

Bundle params = new Bundle(); 
params.putString("method", "photos.upload"); 
params.putByteArray("picture", data); 

AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook); 
mAsyncRunner.request(null, params, "POST", new SampleUploadListener(), null); 
```

示例上传监听器：

```
 public class SampleUploadListener extends BaseRequestListener { 

    public void onComplete(final String response, final Object state) { 
        try { 
            // process the response here: (executed in background thread) 
            Log.d("Facebook-Example", "Response: " + response.toString()); 
            JSONObject json = Util.parseJson(response); 
            final String src = json.getString("src"); 

            // then post the processed result back to the UI thread 
            // if we do not do this, an runtime exception will be generated 
            // e.g. "CalledFromWrongThreadException: Only the original 
            // thread that created a view hierarchy can touch its views." 

        } catch (JSONException e) { 
            Log.w("Facebook-Example", "JSON Error in response"); 
        } catch (FacebookError e) { 
            Log.w("Facebook-Example", "Facebook Error: " + e.getMessage()); 
        } 
    } 

    @Override 
    public void onFacebookError(FacebookError e, Object state) { 
        // TODO Auto-generated method stub 

    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T16:20:08.557

我解决了这个问题。

问题是我创建了 Facebook 对象的 2 个实例，一个作为全局实例，一个在执行上述代码的方法内部，所以发生的事情是我从未授权我尝试执行请求的对象是。

出于某种原因，错误并没有说明这一点，但如果您发生这种情况，请确保您已初始化正确的对象并且它具有有效的会话

# asp.net - Azure 用户角色和用户配置文件管理

> ID：10975267
> 
> 赞同：0
> 
> 时间：2012-06-11T06:22:53.990
> 
> 标签：asp.net, azure, asp.net-membership

我有一个 Windows azure 应用程序已经在运行。（测试阶段）。目前我使用 ACS 身份验证。用户可以使用他们的 windows live-ID 登录。这就是全部。暂时没有授权。我需要授权具有不同角色的用户。另外，我还需要用户使用 gmail 和 facebook 等不同的身份提供商登录。我有将配置文件信息存储在表中的想法（例如，Idp 作为分区键，用户 ID（我从提供商那里获得）作为 RowKey。）

现在我不知道如何赋予不同的角色以及如何开始？任何人都可以给我一个清晰的教程或只是一个想法如何开始？

tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:43:10.230

我建议您看一下**BlobShare**应用程序。这不是一个教程，但它是一个完整的应用程序，展示了一些您可以使用的有趣概念：

> BlobShare 示例是一个简单的文件共享应用程序，它演示了 Windows Azure 平台的存储服务，以及访问控制服务 (ACS) 的身份验证和***授权***功能。

[http://blobshare.codeplex.com/](http://blobshare.codeplex.com/)

# jquery - 在html中定位固定标题

> ID：10975268
> 
> 赞同：46
> 
> 时间：2012-06-11T06:23:06.437
> 
> 标签：jquery, html, css

我有一个固定位置的标题（动态高度）。

我需要将容器 div 放在标题的正下方。由于标题高度是动态的，我不能使用固定值作为上边距。

如何才能做到这一点？

这是我的CSS：

```
#header-wrap {
    position: fixed;
    height: auto;
    width: 100%;
    z-index: 100
}
#container{ 
    /*Need to write css to start this div below the fixed header without mentioning top margin/paading*/
} 
```

...和 ​​HTML：

```
<div id="header-wrap">
  <div id="header">
    <div id="menu">
      <ul>
      <li><a href="#" class="active">test 0</a></li>
      <li><a href="#">Give Me <br />test</a></li>
      <li><a href="#">My <br />test 2</a></li>
      <li><a href="#">test 4</a></li> 
      </ul>
    </div>
    <div class="clear">
    </div>
  </div>
</div><!-- End of header -->

<div id="container">
</div> 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-06-11T06:31:14.170

你的#container 应该在#header-wrap 之外，然后为#header-wrap 指定一个固定高度，之后，为#container 指定margin-top 等于#header-wrap 的高度。像这样的东西：

```
#header-wrap {
    position: fixed;
    height: 200px;
    top: 0;
    width: 100%;
    z-index: 100;
}
#container{ 
    margin-top: 200px;
} 
```

希望这是您需要的：http: [//jsfiddle.net/KTgrS/](http://jsfiddle.net/KTgrS/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-09-12T09:07:36.680

好！当我现在看到我的问题时，我意识到由于标题的动态高度，我不想提及固定边距值。

这是我在这种情况下一直使用的。

使用 jQuery 计算标题高度并将其应用为上边距值。

```
var divHeight = $('#header-wrap').height(); 
$('#container').css('margin-top', divHeight+'px'); 
```

**[演示](https://jsfiddle.net/53jr7esa/3/)**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T10:20:23.920

```
body{
  margin:0;
  padding:0 0 0 0;
}
div#header{
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:25;
}
@media screen{
 body>div#header{
   position: fixed;
 }
}
* html body{
  overflow:hidden;
} 
* html div#content{
  height:100%;
  overflow:auto;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T06:32:45.813

我假设您的标题是固定的，因为即使用户向下滚动，您也希望它保持在页面顶部，但您不希望它覆盖容器。但是，设置`position: fixed`会从页面的线性布局中删除元素，因此您需要将“下一个”元素的上边距设置为与标题的高度相同，或者（如果出于某种原因您不这样做）想要这样做），放置一个占位符元素，它在页面流中占用空间，但会出现在标题显示的下方。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-11T07:26:51.443

与`position :fixed`其他布局不同。一旦你`fixed`为`position`你的`header`，请记住你必须`margin-top`为`content`div 设置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T10:25:20.830

将#container div**顶部**设置**为零**

```
#container{ 

 top: 0;

} 
```

# android - 如何在android中减小相机图片的大小

> ID：10975271
> 
> 赞同：1
> 
> 时间：2012-06-11T06:23:12.780
> 
> 标签：android, android-camera

在我的应用程序中，当我从相机拍照时，我需要获取该图片的大小并压缩它，如果它超过指定的大小。**我应该如何知道图像的大小并**根据我的应用程序对其进行压缩..

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:33:57.307

要获取高度和宽度，请调用：

```
Uri imagePath = Uri.fromFile(tempFile);//Uri from camera intent
//Bitmap representation of camera result
Bitmap realImage = BitmapFactory.decodeFile(tempFile.getAbsolutePath());
realImage.getHeight();
realImage.getWidth(); 
```

要调整图像大小，我只需将生成的位图提供给此方法：

```
public static Bitmap scaleDown(Bitmap realImage, float maxImageSize,
            boolean filter) {
    float ratio = Math.min((float) maxImageSize / realImage.getWidth(),
            (float) maxImageSize / realImage.getHeight());
    int width = Math.round((float) ratio * realImage.getWidth());
    int height = Math.round((float) ratio * realImage.getHeight());

    Bitmap newBitmap = Bitmap.createScaledBitmap(realImage, width, height,
            filter);
    return newBitmap;
} 
```

基本其实只是`Bitmap.createScaledBitmap()`。但是，我将它包装成另一种方法以按比例缩小它。

# android - Android授权Facebook时如何设置超时？

> ID：10975278
> 
> 赞同：1
> 
> 时间：2012-06-11T06:23:42.310
> 
> 标签：android, facebook, timeout, authorize

我有一些代码可以连接 facebook：

```
facebook.authorize(((Activity) ctx).getParent(), new String[] {},
                requestCode, new DialogListener() {} 
```

通常它工作正常。但有时我连接到某些网络不允许连接到 facebook。然后授权方法会抛出

```
 com.facebook.android.DialogError: The connection to the server was unsuccessful 
```

在我的手机上，抛出该异常大约需要 20 秒。但是在其他一些设备上，它花了很长时间（可能是因为不同设备上的设置不同，我不确定）。当网络不允许连接到 facebook 时，有没有办法设置超时。

# javascript - 页面开裂效果（非flash）

> ID：10975280
> 
> 赞同：2
> 
> 时间：2012-06-11T06:23:48.250
> 
> 标签：javascript, jquery, web

我在一个网站上有一个登录页面，其中只有一个地球图像。

现在进入主站点，我希望在登陆页面中出现地球裂开然后用户进入主站点的效果。

我目前在做什么：我目前将整个登录页面图像分为 4 个 div，每个 div 中都有一个单独的图像（共同形成地球）。现在，当用户必须进入该站点时，我将 4 个 div 中的每一个简单地动画到屏幕的每个角落。但我需要开裂效果和其他一些视觉上吸引人的效果。

任何想法如何实现这一目标？Javascript（或 jQuery）解决方案更可取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:32:37.573

*   `slideDown()`在地球 img 上覆盖一个裂纹图像并使其(jQuery)。

见[http://jsfiddle.net/NKqNh/](http://jsfiddle.net/NKqNh/)

```
$(function() {
   $('#crack').slideDown(800); 
});​

<div id="earth" class="common"> </div>
<div id="crack" class="common"> </div>​ 
```

**编辑**：

在[你的回答](https://stackoverflow.com/a/10975741/529725)中，这里是一个更新的 js，它使用一个匿名函数的回调来实现破解后的爆炸。 [http://jsfiddle.net/eC9HM/2/](http://jsfiddle.net/eC9HM/2/)

```
$(function() {
    $('#crack').slideDown(800, function() {
      $('#earth, #crack').hide('explode', {pieces: 16}, 2000);
    });
});
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T06:32:29.243

您可以使用`explode`jQuery UI 的效果。它将图像分成许多块（你可以选择你想要的块）并且图像会消失

# 已更新-

试试这个代码 -

```
<html>

<head>

<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>

<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

<script>
$(document).ready(function() {

  $("img").click(function () {

    $(this).hide("explode", { pieces: 24 }, 2000);

  });

});
</script>

</head>

<body style="font-size:62.5%;">

  <img src="http://2.bp.blogspot.com/-No5MB366RTY/T3WYGRicqUI/AAAAAAAAALQ/mDgaBLVocZE/s1600/260px-The_Earth_seen_from_Apollo_17.jpg">

</body>

</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T07:05:17.067

感谢您的答案，但我发现我的答案结合了此处提供的其他两个答案。所以我只是在这里摆弄小提琴，这样将来可能会有用：

**更新的小提琴：**

[http://jsfiddle.net/gopi1410/eC9HM/1/](http://jsfiddle.net/gopi1410/eC9HM/1/)

# c# - 是否可以加快测试 nservicebus timeout-manager 的过程？

> ID：10975283
> 
> 赞同：1
> 
> 时间：2012-06-11T06:23:55.587
> 
> 标签：c#, .net, unit-testing, nunit, nservicebus

在一个项目中，我们的系统使用 nservicebus 超时每 24 小时触发一次事件。是否有可能通过单元测试“伪造” 24 小时，以便可以在任何给定时间运行测试，从而不必等待一天才能运行测试？

重写的超时方法如下所示：

```
public override void Timeout(object state)
{
ExportFileGenerator.GenerateFile(_entryDataStore.GetEntriesOlderThan(DateTime.Now));
RequestUtcTimeout(TimeSpan.FromHours(TimeLeftToDailyJob()), "");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T18:38:47.030

我在这里写了一篇关于如何做到这一点的博客：

[http://www.udidahan.com/2012/02/27/nservicebus-saga-tips/](http://www.udidahan.com/2012/02/27/nservicebus-saga-tips/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T06:48:26.207

You simply do that by extracting dependency on time-related services (in your case, that would be `TimeLeftToDoDailyJob` method).

There're basically two ways to achieve that:

*   make the method virtual and prepare *testable* version of your class with that method returning some very small (unnoticable) value
*   extract that method to brand new class and inject instance of such class as a dependency to your tested class (inversion of control with constructor injection)

I'd go for second approach as it usually forces more decoupled design, which leads to less complex code and as a result - easier tests.

# php - php cURL 发布到外部域并使用响应

> ID：10975286
> 
> 赞同：0
> 
> 时间：2012-06-11T06:24:07.293
> 
> 标签：php, curl

好的，这可能是一个简单的问题。我有一个工作概念，即发布到外部域并让它与帖子一起做我想要和需要它做的事情。然而。在完成我想要它做的事情之后，我需要它输出一个 JSON 响应，然后我可以使用源域。我知道使用 cURL 我应该能够获取什么输出，但我不确定如何将其转化为我所拥有的，因为这是最初由其他人提供给我的，我对 cURL 不是很熟悉

到目前为止，这就是我可以发布到域的内容。

```
$url = 'http://thedomain.com/new/';
        $fields = array(
                    'api'=>'randomkey',
                    'id'=>'100000',
                    'url'=>urlencode($longurl),
                );

    //url-ify the data for the POST
    $fields_string = '?';
    foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
    rtrim($fields_string,'&');

    //open connection
    $ch = curl_init();

    //set the url, number of POST vars, POST data
    curl_setopt($ch,CURLOPT_URL,$url);
    curl_setopt($ch,CURLOPT_POST,count($fields));
    curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);

    //execute post
    $result = curl_exec($ch);

    //close connection
    curl_close($ch); 
```

如何更改它以获取外部站点以 JSON 形式吐出的内容并拥有它，以便我可以从我正在使用的域中使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:38:50.830

您缺少`RETURNTRANSFER`告诉 cURL 将响应返回给您的选项`$result`：

```
curl_setopt($ch,CURLOPT_RETURNTRANSFER, true); 
```

现在您有了响应，您可以对其进行操作，`json_encode()`然后根据需要输出它。

# android - 在android中缩放和拖动图像

> ID：10975287
> 
> 赞同：6
> 
> 时间：2012-06-11T06:24:08.153
> 
> 标签：android, drag-and-drop, matrix, android-imageview, pinchzoom

我需要拖动和缩放图像。这是我的代码...

```
//instance variables

Matrix matrix = new Matrix();
Matrix savedMatrix = new Matrix();

static final int NONE = 0;
static final int DRAG = 1;
static final int ZOOM = 2;
int mode = NONE;

PointF start = new PointF();
PointF mid = new PointF();
float oldDist = 1f; 
```

//图像视图的OnTouchListener

```
OnTouchListener touchAction = new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        ImageView i = (ImageView)v;

        dragAndZoom(i, event);
        return true; 

    }
}; 
```

//执行拖拽操作

```
private void dragAndZoom(View v, MotionEvent event) 
{
    ImageView view = (ImageView) v;
    view.setScaleType(ImageView.ScaleType.MATRIX);
    float scale;

    // Handle touch events here...

    switch (event.getAction() & MotionEvent.ACTION_MASK) 
    {
    case MotionEvent.ACTION_DOWN:  

        // first finger down only
        savedMatrix.set(matrix);
        start.set(event.getX(), event.getY());

         mode = DRAG;
        break;

    case MotionEvent.ACTION_UP: // first finger lifted

    case MotionEvent.ACTION_POINTER_UP: // second finger lifted

        mode = NONE;   

        break;

    case MotionEvent.ACTION_POINTER_DOWN: // first and second finger down

        oldDist = spacing(event);

        if (oldDist > 5f)
        {
            savedMatrix.set(matrix);
            midPoint(mid, event);
            mode = ZOOM;

        }
        break;

    case MotionEvent.ACTION_MOVE:

        if (mode == DRAG) 
        { 
            matrix.set(savedMatrix);

            matrix.postTranslate(event.getX() - start.x, event.getY() - start.y);                

        } 
        else if (mode == ZOOM) 
        { 
            // pinch zooming
            float newDist = spacing(event);

            if (newDist > 5f) 
            {
                matrix.set(savedMatrix);
                scale = newDist / oldDist; 
                matrix.postScale(scale, scale, mid.x, mid.y);
            }
        }
        break;  
    }

    view.setImageMatrix(matrix); // display the transformation on screen

}

  private float spacing(MotionEvent event) 
{
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
}

private void midPoint(PointF point, MotionEvent event) 
{
    float x = event.getX(0) + event.getX(1);
    float y = event.getY(0) + event.getY(1);
    point.set(x / 2, y / 2);
} 
```

它工作正常。但有时图像会在触摸时超出屏幕边界。如何始终将图像保留在 UI 中？请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:11:22.007

```
private void limitDrag(Matrix m, ImageView view) {

    float[] values = new float[9];
    m.getValues(values);
    float transX = values[Matrix.MTRANS_X];
    float transY = values[Matrix.MTRANS_Y];
    float scaleX = values[Matrix.MSCALE_X];
    float scaleY = values[Matrix.MSCALE_Y];

    Rect bounds = view.getDrawable().getBounds();
    int viewWidth = getResources().getDisplayMetrics().widthPixels;
    int viewHeight = getResources().getDisplayMetrics().heightPixels;

    if(viewHeight<=480)
    {

        _y_up=0;
    }
    if(viewHeight>480&&viewHeight<980)
    {

        _y_up=140;
    }

    int width = bounds.right - bounds.left;
    int height = bounds.bottom - bounds.top;
    int __width=width;
    int __height=height;
    width = viewWidth / 2;
    height = viewHeight / 2;

    //height = 200 ;
    float minX = (-width) ;//* scaleX;
    float minY = (-height) ;//* scaleY;

    if ((transX) > (viewWidth)) {

        //_x_left

        transX = viewWidth;
    } else if (transX < minX) {

        transX = minX;
    }

    if ((-transX) > (viewWidth)) {
             // _x_right
        transX = -(viewWidth);
    } else if (-transX < minX) {

        transX = -(minX+30);
    }

    if ((transY) > (viewHeight)) {
    //  _y_up
        transY =( viewHeight);

    } else if (transY < minY) {

        transY = (minY+_y_up);
    }

    if ((-transY) > (viewHeight)) {
    //  _y_down
        transY = -(viewHeight);

    } else if (-transY < minY) {

        transY = -(minY+170);
    }

    values[Matrix.MTRANS_X] = transX;
    values[Matrix.MTRANS_Y] = transY;
    m.setValues(values);
} 
```

在您的 view.setImageMatrix(matrix) 上方调用此函数 limitDrag(matrix,view) 以限制屏幕内的移动 注意：- IM 在其中进行一些丑陋的硬编码计算。您可以根据需要更改它。只需运行它并检查，记住它不是最好的解决方案，但总比没有好。快乐编码！

# c# - Silverlight：如何使用画笔制作点划线边框

> ID：10975289
> 
> 赞同：1
> 
> 时间：2012-06-11T06:24:17.950
> 
> 标签：c#, silverlight, esri, brush

我想在silverlight中制作一个“dash dot dot”风格的画笔。我不能使用 Rectangle 因为我实际上想在 Path 元素（不是矩形图形）周围完成一个“虚线点”边框。有没有办法做到这一点？

谢谢，罗曼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:50:01.613

It sounds like you just need the StrokeDashArray property of the Path. For example,
`StrokeDashArray="3 1 1 1 1 1"` will give a dash dot dot pattern.

Translated to english it says:

```
Dash of 3 units,
gap  of 1 unit,
dash of 1 unit,
gap  of 1 unit, 
dash of 1 unit,
gap  of 1 unit.
```

I say units, because, per MSDN: "Each Double in the collection specifies the length of a dash or gap relative to the Thickness of the pen.".

A full path markup sample,

```
<Path Data="M120,141 C344,128 314,1 397,145 C480,289 619,392.00076 418,369.00067 C217,346.00061 131.99998,314.00018 134.99998,243.00008 C137.99998,171.99995 120,141 120,141 z" Fill="#FFF4F4F5" Margin="119.5,76.374,117.918,107.283" Stretch="Fill" Stroke="Black" UseLayoutRounding="False" StrokeDashArray="3 1 1 1 1 1"/> 
```

MSDN link: [http://msdn.microsoft.com/en-us/library/system.windows.shapes.shape.strokedasharray.aspx](http://msdn.microsoft.com/en-us/library/system.windows.shapes.shape.strokedasharray.aspx)

# asp.net - SL 中的 x:Name="someName" 和 Asp.Net 中的 ID="someID" 有什么区别？

> ID：10975294
> 
> 赞同：1
> 
> 时间：2012-06-11T06:24:47.730
> 
> 标签：asp.net, .net, silverlight, xaml

我有 Asp.Net 背景并尝试学习 Silverlight。

你能解释一下，Silverlight、XAML 中的 x:Name="someName" 和 Asp.Net 标记中的 ID="someID" 有什么区别吗？

（如果他们都使一个元素唯一，为什么一个叫做 Name 而另一个叫做 ID ？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T08:44:55.373

我收集*到与 ASP.Net*的兼容性并不是他们设计 Silverlight 时考虑的要求之一（它又源自 WPF）:)

“ID”是一个非常专业的术语，而“Name”则更易读。毕竟它们只是在编译时生成的代码隐藏类成员的匹配*名称。*ID 作为一个术语对数据键等更有意义。

经典 ASP，然后是 ASP.Net，可以追溯到 WPF*之前和 Silverlight 之前，*因此命名会更老派一些。最近，大多数元素的命名在 Silverlight 中变得更加合理（与 ASP 相比）。

注意：*这只是我多年使用上述所有技术的意见。*希望能帮助到你。

# jquery - 动态元素高度 Jquery

> ID：10975296
> 
> 赞同：1
> 
> 时间：2012-06-11T06:24:51.990
> 
> 标签：jquery, dynamic, height

所以基本上我希望我的侧边栏与我的主要内容区域的高度相同......这是我写的非常简单的代码，我只是不确定它为什么不起作用，“px”似乎没有附加到字符串中。 ..

```
$(document).ready(function(){

var $height = $("div#content").height();
var $sidebar = $height + "px";

$("div#sidebar").css("height","$sidebar");

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:26:02.457

```
$("div#sidebar").css("height","$sidebar"); 
```

应该

```
$("div#sidebar").css("height",$sidebar) 
```

或简单

```
 $("div#sidebar").height($("#content").height()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:27:43.017

您可以将代码简化为：

```
$(document).ready(function() {
  $("#sidebar").height($("#content").height());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T06:28:42.083

你做错了。

```
$("div#sidebar").css("height","$sidebar");

$("div#sidebar").css("height",$sidebar); 
```

此外，要包括边距和填充，您应该将参数传递给高度，例如

```
$("div#content").height(true); 
```

# java - Java Selenium 等待元素超时

> ID：10975298
> 
> 赞同：4
> 
> 时间：2012-06-11T06:25:04.847
> 
> 标签：java, firefox, selenium, webdriver

我正在用 Java 中的 Selenium FirefoxDriver 开发一个测试单元。我需要一些帮助来处理页面加载。我的问题是在等待元素时仍然有超时。我已经尝试过申请`pageLoadTimeout`，`implicitlyWait`但没有成功，一些方法继续等待整页加载。我的代码预览：

```
 (...)
    FirefoxDriver driver= new FirefoxDriver(firefoxProfile);
    driver.manage().timeouts().pageLoadTimeout(1, TimeUnit.MILLISECONDS);
    driver.manage().timeouts().implicitlyWait(1, TimeUnit.MILLISECONDS);
    try {
       driver.get("http://mysite");
    } catch (org.openqa.selenium.TimeoutException e) {
       //after 1 milisecond get method timeouts
    }
    for (int i = 0; i < 5; i++) {//5 seconds wait
            if (driver.findElements(By.id("wait_id")).size() == 0) { //findElements cause java to wait for full load
                debug("not found");//never happens because 'if' condition waits for full load
                driver.wait(1000);
            } else {
                debug("found");
                break;
            }
        } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:55:43.380

```
public static WebElement waitForElement(WebDriver driver, By by) {

    WebElement element = null;
    int counter = 0;
    while (element == null) {
        try {
            Thread.sleep(500);
            element = driver.findElement(by);
        } catch (Exception e) {
            e.printStackTrace();
        }
        if (counter > 119) {
            System.out.println("System has timed out");
        }
                    counter++;
    }
    return element; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T00:58:07.653

该方法仅适用于使用["unstable load strategy"](http://code.google.com/p/selenium/wiki/FirefoxDriver#-Beta-_load_fast_preference)`pageLoadTimeout()`运行的 Firefox 。因此，像这样运行：`FirefoxDriver`

```
FirefoxProfile fp = new FirefoxProfile();
fp.setPreference("webdriver.load.strategy", "unstable");
WebDriver driver = new FirefoxDriver(fp); 
```

请注意，它仅在 Firefox 下有效，确实不稳定，并且可能会使您的其他一些测试失败。谨慎使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T07:42:04.213

driver.get 是一个阻塞调用，等待页面加载。由于您将超时设置为 1 毫秒，因此会引发超时异常。`e.printStackTrace();`如果你在你的`org.openqa.selenium.TimeoutException`cacht 块中放一个，你可以看到它。

将超时设置为 -1。

# xml - 如何确保xml中complextype下的一些强制性和一些可选元素？

> ID：10975301
> 
> 赞同：3
> 
> 时间：2012-06-11T06:25:17.560
> 
> 标签：xml, xsd

我在制作复杂元素时遇到了问题，它允许可选元素和强制元素。对于下面的 xml，说 h2 是强制性的，而 h1 是可选的，顺序无关紧要。

情况1：

```
<root>
<h1/>
<h2/>
</root> 
```

案例二：

```
<root>
<h2/>
</root> 
```

案例3：

```
<root>
<h2/>
<h1/>
</root> 
```

XSD：

```
<xs:element name="root">
    <xs:complexType>
           <xs:sequence minOccurs="1" maxOccurs="unbounded">
               <xs:element name="h1" minOccurs="0"></xs:element>
                <xs:element name="h2" minOccurs="1" />
           </xs:sequence>
     </xs:complexType>
</xs:element> 
```

上述第三种情况在此 xsd 中失败，但这种情况是有效的。我需要一个对上述所有情况都有效的 xsd。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:52:37.540

Knowing that what you want is:

> to make h2 occur atmost 1, while h1 can occur as many times as possible

You could use this XSD in which you are defining that a XML would be valid if its content is something like (RegExpr) `<root><h1/>*<h2/><h1/>*</root>`.

XSD:

```
<?xml version="1.0" encoding="iso-8859-1"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="root">
    <xsd:complexType>
      <xsd:sequence minOccurs="1" maxOccurs="1">
        <xsd:element name="h1" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element name="h2" minOccurs="1" maxOccurs="1"/>
        <xsd:element name="h1" minOccurs="0" maxOccurs="unbounded"/>        
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

* * *

**Valid XML examples:**
1)

```
<root>
  <h1/>
  <h1/>
  <h2/>
  <h1/>
</root> 
```

2)

```
<root>
  <h1/>
  <h2/>
</root> 
```

* * *

**Invalid XML example:**
Two `<h2/>` Elements.

```
<root>
  <h2/>
  <h1/>
  <h2/>
</root> 
```

No `<h2/>` Element.

```
<root>
  <h1/>
  <h1/>
</root> 
```

# objective-c - 应用内购买没有恢复按钮导致拒绝

> ID：10975312
> 
> 赞同：22
> 
> 时间：2012-06-11T06:26:28.230
> 
> 标签：objective-c, ios, xcode, in-app-purchase

我正在使用非消耗品的应用程序购买实现应用程序，它被苹果拒绝，原因是：

> 我们发现您的应用提供了可以恢复的应用内购买，但它不包含允许用户恢复之前购买的应用内购买的“恢复”功能。
> 
> 要恢复以前购买的应用内购买产品，最好提供一个“恢复”按钮并在点击“恢复”按钮时启动恢复过程。
> 
> 有关恢复交易和验证商店收据的更多信息，请参阅

并且没有链接可以参考，我已经实现了：

`- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions`

带 `SKPaymentTransactionStateRestored`案例。

但我没有实现：

```
`restoreCompletedTransactions`  or `paymentQueueRestoreCompletedTransactionsFinished` 
```

这些方法是批准应用内购买所必需的，或者确切的问题是什么。

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-11T06:50:21.590

使用以下内容恢复用户从您的应用购买的产品 ID

```
- (void) checkPurchasedItems
{
   [[SKPaymentQueue defaultQueue] restoreCompletedTransactions];
}// Call This Function

//Then this delegate Function Will be fired
- (void) paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue
{
  purchasedItemIDs = [[NSMutableArray alloc] init];

  NSLog(@"received restored transactions: %i", queue.transactions.count);
  for (SKPaymentTransaction *transaction in queue.transactions)
  {
      NSString *productID = transaction.payment.productIdentifier;
      [purchasedItemIDs addObject:productID];
  }

} 
```

购买的ItemIDs 将包含用户购买的所有产品ID。您可以在完成后放置一个按钮来调用此函数，您可以显示所有这些产品以使用户能够再次下载它。

# ember.js - Emberjs：将 tr 和 td 附加到表中

> ID：10975313
> 
> 赞同：1
> 
> 时间：2012-06-11T06:26:37.467
> 
> 标签：ember.js

我很享受我第一次涉足 ember 的世界，但在做一些相对简单的事情时遇到了一些意外。

我想使用类 tagName 附加一个元素的把手模板：“tr” 但是有时元素不会被插入但不显示，有时它只是一个 Nx 列表，没有终结符。如果我要手动添加它将完美地输出第一行但然后停止..

```
{{#each App.variantController.content}}
            <td class="cen"><input class="variant" id="variant-{{unbound pk}}" type="checkbox"></input></td>
            <td class="value">{{sku}}</td>
            <td class="value">{{cost}}</td>
            {{#each basic_product_options}}
            <td class="value">{{content}}</td>
            {{/each}}
            <td class="value cen">
                <a data-toggle="modal" href="#editVariationModal" class="btn btn-mini btn-warning">{% trans 'Edit' %}</a>
                <a href="#" class="btn btn-mini disabled pull-right"><i class="icon-resize-vertical"></i></a>
            </td>
        </tr>
        {{/each}}​ 
```

JavaScript：

```
App = Em.Application.create();

App.Variant = Em.Object.extend({
    pk: null,
    cost: null,
    sku: null
});

App.variantController = Em.ArrayController.create({
    content: [],
    init: function() {
        variants = eval($('script#data-variant_list').html());
        for (var i = 0; i < variants.length; i++) {
            this.pushObject(App.Variant.create(variants[i]));
        }
    }
});

App.VariantView = Em.View.create({
    tagName: 'tr',
    classNames: ['variant'],
    templateName: 'hb-variant-list'
});

App.VariantView.appendTo('#variants-list');​ 
```

jsfiddle 在这里：http: [//jsfiddle.net/GJASM/](http://jsfiddle.net/GJASM/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T07:11:24.453

你有一些几乎可以工作的东西@ [http://jsfiddle.net/MikeAski/qhPLt/](http://jsfiddle.net/MikeAski/qhPLt/)

# javascript - 如何检索拉斐尔集合中的元素

> ID：10975316
> 
> 赞同：4
> 
> 时间：2012-06-11T06:26:55.517
> 
> 标签：javascript, raphael

我正在使用 raphael.s 库在画布上绘制一些形状。我在集合中组合了不同的元素。我想知道如何在 raphael 的集合上使用 for 循环检索这些元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T16:49:57.913

Jadkik94 的建议更好——使用[set.forEach()](http://raphaeljs.com/reference.html#Set.forEach)更有可能与 Raphael 的未来版本向前兼容。

# mysql - mysql：如何拆分列表字段

> ID：10975320
> 
> 赞同：2
> 
> 时间：2012-06-11T06:27:27.883
> 
> 标签：mysql, database-design

我有一个表，它只包含 id 和一个数据是数据列表的字段。例如

```
--------------
| 编号 | 数据 |
| 1 | a,b,c,d|
| 2 | a,b,k,m|
---------------

```

我想将列表数据放在字段中并不是一个好的设计，所以我想知道如何重新设计它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:45:18.737

根据我的说法，只有当每条记录的某些细节都相同并且有些会发生变化时，您才需要两个表，即主表和事务表。在您的情况下，如果没有任何其他与您的 id 字段相关的事情将是相同的，您可以继续使用一张表并使用以下结构。

```
--------------
| id |  data  |
| 1  |   a    |
| 1  |   b    |
| 1  |   c    |
| 1  |   d    |
| 2  |   a    |
| 2  |   b    |
| 2  |   k    |
| 2  |   m    |
--------------- 
```

但是，如果有任何其他与 id 字段相关的东西对于相同的 id 记录将是相同的，那么您将不得不使用两个表。像下面的案例。有 3 个字段 id、name 和 data。你当前的表格看起来像

```
--------------------------
| id |  name    |  data  |
| 1  | testname | a,b,c,d|
| 2  | remy     | a,b,c,d|
-------------------------- 
```

你的新表结构应该是这样的。

表 1 主

```
-----------------
| id |  name    |
| 1  | testname |
| 2  | remy     |
----------------- 
```

表 2 交易

```
 --------------
    | id |  data  |
    | 1  |   a    |
    | 1  |   b    |
    | 1  |   c    |
    | 1  |   d    |
    | 2  |   a    |
    | 2  |   b    |
    | 2  |   k    |
    | 2  |   m    |
    --------------- 
```

为了更好的数据库管理，我们可能需要规范化数据。 **数据库规范化是组织关系数据库的字段和表以最小化冗余和依赖性的过程**。规范化通常涉及将大表划分为较小（且冗余较少）的表并定义它们之间的关系。目标是隔离数据，以便仅在一个表中对字段进行添加、删除和修改，然后通过定义的关系传播到数据库的其余部分。您可以在以下链接中找到更多信息

1.  [3 范式数据库教程](http://www.phlonx.com/resources/nf3/)

2.  [数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T07:30:25.547

如果您的表格中只有这两个字段，那么您应该只有 1 个表格，如下所示

```
id | data 
```

使用复合主键，`PRIMARY KEY(id,data)`以便相应 ID 不会有任何重复数据。

数据会是这样的

```
id | data
 1 | a
 1 | b
 1 | c
 1 | d
 2 | a
 2 | b
 2 | k
 2 | m 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T06:33:43.843

您将需要另一个可以是该`ONE to MANY`类型的表。

例如，您可以拥有另一个表数据映射，该表数据映射将具有列`data`与数据表列之间的列。`ID``ID``FOREIGN KEY``ID`

因此，根据您的示例，数据`ID = 1`映射表中将有 4 个条目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T08:13:26.963

你是对的，这不是一个好的数据库设计。该`data`字段违反了[原子性](http://en.wikipedia.org/wiki/1NF#Atomicity)原则，因此违反了 1NF，这可能导致维护和查询数据时出现问题。

要标准化您的设计，请将原始表格一分为二。有两种基本策略可以做到这一点：[使用非识别和使用识别关系](https://stackoverflow.com/a/10884652/533120)。

* * *

注意：如果您只有`id`在父表中，并且没有其他 FK，并且父表不能在没有至少一个子表的情况下存在（即`data`在原始设计中不能为空），您可以完全省略父表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T06:31:04.467

您将需要两个带有外键的表。

表 1 编号

表2 id数据值

所以数据看起来像：

**表格1：**

```
id
1
2
3 
```

**表 2：**

```
id | data
 1 | a
 1 | b
 1 | c
 1 | d
 2 | a
 2 | b
 2 | k
 2 | m 
```

# asp.net - 对 MAC iCalender 的示例 .ics 订阅运行良好，但是当我们将 iCalander 推送到 iCloud 并将 iCloud 推送到 iPhone iCal 时，这不起作用

> ID：10975329
> 
> 赞同：1
> 
> 时间：2012-06-11T06:28:30.940
> 
> 标签：asp.net, icloud, icalendar

我在使用 iCloud 订阅 iPhone 上的 .ics 文件时遇到问题。我有一个应用程序，我们在其中为用户事件生成 .ics 文件。

当我在 MAC 机器上订阅 iCalander 时，.ics 文件[http://www.wealthadvisorcrm.com/sampleical.ics的链接运行良好。](http://www.wealthadvisorcrm.com/sampleical.ics)但是当我使用 iCloud 和 iphone 订阅它时，它无法正常工作。iphone 上的问题是什么，或者我的 .ics 文件中的问题在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:45:29.123

尝试使用 webcal 协议，这适用于 iPhone、iPad 等。

```
webcal://wealthadvisorcrm.com/sampleical.ics 
```

[更多来源](https://stackoverflow.com/questions/5603866/what-is-a-webcal-protocol)

# c# - string url = (string)data AND string url = data as string; 有什么区别？

> ID：10975333
> 
> 赞同：2
> 
> 时间：2012-06-11T06:28:57.123
> 
> 标签：c#, string, casting

和有什么区别

string url = (string)data AND string url = data as string;

哪个是更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T06:29:52.097

`InvalidCastException`如果转换失败，第一个构造将抛出一个，而如果变量不是字符串，则`as`运算符将返回 null 。`data`

> 哪个是更好的方法？

这将取决于您要达到的目标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T06:36:56.467

可以将`as`其视为将对象转换为特定类型的**尝试。**如果失败，结果变量将保持`null`. 另一方面，直接强制转换是强制转换`1 way ticket`，如果失败将抛出异常。

本质上，当对象可以转换为特定类型时，它们会做完全相同的事情，但是如果您的转换无效，一个会抛出异常，另一个会“优雅地失败”。

你使用哪一个真的取决于场景。如果您的变量是代码的一个组成部分（即，如果转换失败则继续执行代码没有意义），只需使用直接转换并处理异常。但是，在某些情况下，不引发异常并处理空值也非常有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T06:32:31.520

as 关键字是防御性强制转换，当有一个强制转换时不会抛出异常

# iphone - 无法在 iphone4s 设备上获得推送通知

> ID：10975334
> 
> 赞同：0
> 
> 时间：2012-06-11T06:29:04.247
> 
> 标签：iphone, objective-c, notifications, push-notification, apple-push-notifications

我已按照使用 raywenderlich 教程实现推送通知的所有步骤进行操作，但在运行此命令时出现错误：

```
openssl s_client -connect gateway.sandbox.push.apple.com:2195 -cert XYZCert.pem -key XYZKey.pem

CONNECTED(00000003)
  depth=1 /C=US/O=Entrust, Inc./OU=www.entrust.net/rpa is incorporated     
  by reference/OU=(c) 2009 Entrust, Inc./CN=Entrust Certification Authority - L1C

**verify error:num=20:unable to get local issuer certificate
verify return:0**
---
Certificate chain
0 s:/C=US/ST=California/L=Cupertino/O=Apple Inc./OU=iTMS Engineering/CN=gateway.sandbox.push.apple.com
i:/C=US/O=Entrust, Inc./OU=www.entrust.net/rpa is incorporated by reference/OU=(c) 2009 Entrust, Inc./CN=Entrust Certification Authority - L1C
1 s:/C=US/O=Entrust, Inc./OU=www.entrust.net/rpa is incorporated by reference/OU=(c) 2009 Entrust, Inc./CN=Entrust Certification Authority - L1C
i:/O=Entrust.net/OU=www.entrust.net/CPS_2048 incorp. by ref. (limits liab.)/OU=(c) 1999 Entrust.net Limited/CN=Entrust.net Certification Authority (2048)
---
Server certificate
-----BEGIN CERTIFICATE-----
MIIFGzCCBAOgAwIBAgIETBz90jANBgkqhkiG9w0BAQUFADCBsTELMAkGA1UEBhMC
VVMxFjAUBgNVBAoTDUVudHJ1c3QsIEluYy4xOTA3BgNVBAsTMHd3dy5lbnRydXN0
Lm5ldC9ycGEgaXMgaW5jb3Jwb3JhdGVkIGJ5IHJlZmVyZW5jZTEfMB0GA1UECxMW
KGMpIDIwMDkgRW50cnVzdCwgSW5jLjEuMCwGA1UEAxMlRW50cnVzdCBDZXJ0aWZp
Y2F0aW9uIEF1dGhvcml0eSAtIEwxQzAeFw0xMjA1MjUyMzM3NDZaFw0xNDA1MzEw
NTA4NDhaMIGPMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTESMBAG
A1UEBxMJQ3VwZXJ0aW5vMRMwEQYDVQQKEwpBcHBsZSBJbmMuMRkwFwYDVQQLExBp
VE1TIEVuZ2luZWVyaW5nMScwJQYDVQQDEx5nYXRld2F5LnNhbmRib3gucHVzaC5h
cHBsZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC/r1z4BRFu
DIU9/vOboVmd7OwaPPLRtcZiZLWxSyG/6KeRPpaeaC6DScvSDRoJuIeTDBup0bg4
08K0Gzh+lfKRlJOC2sma5Wgvk7oP4sty83My3YCZQv4QvgDhx+seONNs6XiA8Cl4
ingDymWGlzb0sTdfBIE/nWiEOtXQZcg6GKePOWXKSYgWyi/08538UihKK4JZIOL2
eIeBwjEwlaXFFpMlStc36uS/8oy+KMjwvuu3HazNMidvbGK2Z68rBnqnOAaDBtuT
K7rwAa5+i8GYY+sJA0DywMViZxgG/xWWyr4DvhtpHfUjyQgg1ixM8q651LNgdRVf
4sB0PfANitq7AgMBAAGjggFZMIIBVTALBgNVHQ8EBAMCBaAwHQYDVR0lBBYwFAYI
KwYBBQUHAwEGCCsGAQUFBwMCMDMGA1UdHwQsMCowKKAmoCSGImh0dHA6Ly9jcmwu
ZW50cnVzdC5uZXQvbGV2ZWwxYy5jcmwwZQYIKwYBBQUHAQEEWTBXMCMGCCsGAQUF
BzABhhdodHRwOi8vb2NzcC5lbnRydXN0Lm5ldDAwBggrBgEFBQcwAoYkaHR0cDov
L2FpYS5lbnRydXN0Lm5ldC9sMWMtY2hhaW4uY2VyMEAGA1UdIAQ5MDcwNQYJKoZI
hvZ9B0sCMCgwJgYIKwYBBQUHAgEWGmh0dHA6Ly93d3cuZW50cnVzdC5uZXQvcnBh
MB8GA1UdIwQYMBaAFB7xq4kG+EkPATN37hR67hl8kyhNMB0GA1UdDgQWBBSgNiNR
qtTShi8PuJ7UNUEbeE71STAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBBQUAA4IBAQAS
EDkUyBHVdRJnCLHY8w9ec92NWqBYqKiSGP0uVCvgpsJIWDBkCGIw1Olks6mQuS9+
R7VRJJFg7EhtufmoRIvjgntKpTe49sB/lrmiZVQGnhjd6YdyYm9+OBUWRvwketLM
v0S+nxZD0qLLJ9foVUB8zP8LtutqFJ5IZw1xb9eSNzhpKkQ9ylj8MCd4tpXZxICL
Gt327poTXwmjQ+31fz7HCQCowMHccP8kiKM5SeYC9q+nkmdaozHVvw4e1RsP+EWO
vPtcH1x1BCkTJajmrO7JuRPLuBEnZGSPUVFRKWP9jy0a28VnJek+oA7rRMRD8irU
fMGbLqkGn8YogdPqe5T1
-----END CERTIFICATE-----
subject=/C=US/ST=California/L=Cupertino/O=Apple Inc./OU=iTMS Engineering/CN=gateway.sandbox.push.apple.com
issuer=/C=US/O=Entrust, Inc./OU=www.entrust.net/rpa is incorporated by reference/OU=(c) 2009 Entrust, Inc./CN=Entrust Certification Authority - L1C
---
**No client certificate CA names sent**
---
SSL handshake has read 2731 bytes and written 2160 bytes
---
New, TLSv1/SSLv3, Cipher is AES256-SHA
Server public key is 2048 bit
Secure Renegotiation IS supported
Compression: NONE
Expansion: NONE
SSL-Session:
Protocol : TLSv1
Cipher : AES256-SHA
Session-ID:
Session-ID-ctx:
Master-Key: CE7F8C43CF32CC6E2F9C81E8898E89EAEC8B4E1110B7AA50C0FDABB3ED628A0623C7905B956E6F28A0E85A4AECA9986B
Key-Arg : None
Start Time: 1339390594
Timeout : 300 (sec)
Verify return code: 0 (ok)
---
**read:errno=54** 
```

我能够获取设备令牌，并在使用 php 代码发送通知时显示：

```
Connected to APNS  
Message successfully delivered 
```

但我仍然没有在 iphone4s 上收到通知。

对于每个配置文件，我都会获得相同的设备令牌。

所以完全坚持通知。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:21:06.083

APNS 是否向您返回错误响应数据包？

如果您的令牌无效或通知格式错误，APNS 将返回错误响应。

# php - PHP 远程访问 .htaccess 受保护的文件

> ID：10975335
> 
> 赞同：0
> 
> 时间：2012-06-11T06:29:10.993
> 
> 标签：php, file, .htaccess

我在尝试访问 .htaccess 受保护目录中的远程服务器上的 .txt 文件的内容时遇到了一些麻烦。

我想做的是以下几点：

*   通过 PHP 连接到 FTP 服务器并使用 ftp_nlist 检索目录中所有 .txt 文件的列表。到这里为止，一切正常。

*   对于找到的每个 .txt 文件，我想检索内容。当没有 .htaccess 文件保护 .txt 文件时，有很多方法可以正常执行此操作。

但！一旦我使用 .htaccess 文件保护在线目录，我尝试的每一种方法都无法获取 .txt 文件的内容。保护包含 .txt 文件的文件夹的 .htaccess 文件具有以下内容（仅此而已）：

```
<Files *.txt> 
Order Deny,Allow  
Deny from All  
</Files> 
```

显然，在线 PHP 网站本身可以毫无问题地访问 .txt 文件的内容，并且 .htaccess 文件本身正在完美地完成它的工作（拒绝直接访问任何文件），但是当我试图访问时从我的 WAMP 服务器远程获取 .txt 文件，我只是找不到绕过 .htaccess 保护的方法。

基本上，我想从我的 WAMP 服务器远程模仿我的网站已经在本地使用`$contents = file($filepath)`. 当然必须有办法......谁能指出我正确的方向？我应该使用不同的方法来保护 .txt 文件，还是应该使用特定的 PHP 函数来访问内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:22:39.307

你的问题不清楚。
如果您使用 .htaccess 保护文件夹或文件，您仍然可以使用 FTP 下载该文件。.htaccess 仅影响 Apache（http 请求）。

如果您希望能够使用 http 下载这些文件，那么您只需执行一个输出其内容的脚本：

下载器.php：

```
 //> Check if the admin is logged, and check if $_GET['filename'] is allowed

    readfile($_GET['filename']); 
```

然后您可以通过以下方式请求您的文件：

```
http://yoursite/downloader.php?filename=file.txt 
```

当然一定要保护这个的访问`downloader.php`

# javascript - 通过javascript onclick函数实现hrefs的空列表实现分页

> ID：10975337
> 
> 赞同：1
> 
> 时间：2012-06-11T06:29:27.697
> 
> 标签：javascript, python, href, scrapy

我的意图是`achieve the pagination from javascript functions`，例如，我将 URL 作为`http://events.justdial.com/events/index.php?city=Hyderabad`，从这个 URL 中你可以看到页面末尾的分页，所以如果你观察到它们是通过带有`href`标签的JavaScript 函数编写的 HTML `#`，我我只是想收集那些 href 标签，即使它们是`#`. 以下是我的代码

```
class justdialdotcomSpider(BaseSpider):
   name = "justdialdotcom"
   allowed_domains = ["www.justdial.com"]
   start_urls = ["http://events.justdial.com/events/index.php?city=Hyderabad"]

   def parse(self, response):
       hxs = HtmlXPathSelector(response)
       pagination = hxs.select('//div[@id="main"]/div[@id="content"]/div[@id="pagination"]/a').extract()
       print pagination,">>>>>>>>>>>>>>>>>." 
```

当我运行上面的代码时，我得到的结果是`[]`，我的意思是没有，谁能告诉我如何通过 JavaScript onclick 函数实现分页以及为什么结果为空。我正在观察 HTML 中的某种奇怪之处例如，分页中的一个页面具有锚标记，`<a onclick="jdevents.setPageNo(2)" href="#">2</a>` 但是当我尝试通过单击`view page source`浏览器来查看它时，我看不到任何功能`jdevents.setPageNo(2)`，（我希望如果我们可以看到他在 HTML 中所做的事情，我们可以通过 formdata 发布它作为请求）我真的很困惑，无法通过这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:08:36.437

如果您跟踪请求，您会发现对以下 URL 的发布请求：http: [//events.justdial.com/events/search.php](http://events.justdial.com/events/search.php)

发布数据 ：

```
city:Hyderabad 
cat:0 
area:0 
fromDate: 
toDate: 
subCat:0 
pageNo:2
fetch:events 
```

并且响应是 JSON 格式。

因此，您的代码应如下所示

```
import re
import json

class justdialdotcomSpider(BaseSpider):
    name = "justdialdotcom"
    domain_name = "www.justdial.com"
    start_urls = ["http://events.justdial.com/events/search.php"]

    # Initial request
    def parse(self, response):
        return [FormRequest(url="http://events.justdial.com/events/search.php",
                                        formdata={'fetch': 'area',
                                                  'pageNo': '1',
                                                  'city' : 'Hyderabad',
                                                  'cat' : '0',
                                                  'area' : '0',
                                                  'fromDate': '',
                                                  'toDate' : '',
                                                  'subCat' : '0'
                                                  },
                                        callback=self.area_count
                                        )]

# Get total count and paginate through events
    def area_count(self, response):
        total_count = 0
        for area in  json.loads(response.body):
            total_count += int(area["count"])

        pages_count = (total_count / 10) + 1

        page = 1
        while (page <= pages_count):
            yield FormRequest(url="http://events.justdial.com/events/search.php",
                                        formdata={'fetch': 'events',
                                                  'pageNo': str(page),
                                                  'city' : 'Hyderabad',
                                                  'cat' : '0',
                                                  'area' : '0',
                                                  'fromDate': '',
                                                  'toDate' : '',
                                                  'subCat' : '0'
                                                  },
                                        callback=self.parse_events
                                        )
            page += 1

# parse events 
    def parse_events(self, response):
        events = json.loads(response.body)
        events.pop(0)

        for event_details in events:
            yield FormRequest(url="http://events.justdial.com/events/search.php",
                                        formdata={'fetch': 'event',
                                                  'eventId': str(event_details["id"]),
                                                  },
                                        callback=self.parse_event
                                        )

    def parse_event(self, response):
        event_details = json.loads(response.body)
        items = []
        #item = Product()

        items.append(item)
        return items 
```

# mysql - 如何使用 MySql 命令行将一串单词转换为表格的多行

> ID：10975340
> 
> 赞同：1
> 
> 时间：2012-06-11T06:29:35.407
> 
> 标签：mysql

我有一个字符串，例如，

> “这是一个刺痛，我不知道我要多久”

我想将字符串中的每个单词变成我的 sql 表的一行，以便我得到：

> 这
> 是
> 一个
> 字符串
> ，
> 我
> 不
> 知道
> 等等......

我需要能够使用 MySql 命令行来执行此操作。（我还需要一个相邻的列在每一行都填充一个，以防这有助于/改变你的答案）我想我可以以某种方式使用`INSERT String (Words, num) Values (@words, 1)`，但我不知道如何让它添加每个单词。有什么简单的方法可以做到这一点？如果没有，它会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:22:47.867

MySQL 没有拆分分隔字符串的功能。[这个问题在MySQL 手册页](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#comments)（搜索“split”）上被大量讨论，尽管没有直接的解决方案来处理可变数量的元素。

取而代之的是，我会帮助自己生成这样的查询：

```
SELECT CONCAT('INSERT INTO t1 VALUES ("', REPLACE(REPLACE(TRIM(string_column), '"', '\\"'), ' ', '", "'), '")') FROM t2_with_string 
```

# amazon-s3 - 受流媒体服务带宽影响的成本

> ID：10975344
> 
> 赞同：4
> 
> 时间：2012-06-11T06:30:01.877
> 
> 标签：amazon-s3, cdn, bandwidth, rackspace-cloud, rackspace

基本上，我即将推出一个音乐流媒体应用程序，我正在尝试计算成本。

S3 和 RackSpace 云等云服务价格昂贵。就可扩展性而言...我假设普通用户听音乐一个小时，假设我们的应用程序可以扩展到 100,000 个用户。每个用户的带宽约为 90MB / 小时... 让我们再假设一下，我们在 24 小时内平均有 10,000 个并发用户流式传输音乐（90MB（平均/小时）* 10k * 24 = 21,600,000MB = ~ 20.5 TB)...这真是一大堆带宽！根据 Rackspace 的定价，这是每天 3,780 美元……胡扯！另一件事是，Rdio、Grooveshark 等服务拥有大约 1500 万首（许可）歌曲......如果我将其纳入其中，那就是 15,000,000 * 3MB（平均歌曲）= 43,945GB = 每月 4,300 美元。

因此，按照这些费率，Rdio 和 Grooveshark 等公司绝不会支付这么多钱。

所以我的问题很简单......一般来说，创建流媒体服务时需要采取哪些路线？具体会赢得我的投票！（AKA，链接到提供更便宜的 CDN 服务或以统一费率计费的托管服务的评级良好的公司）

谢谢各位大佬！

更多的）

应用程序服务器将托管在 Rackspace 上......但考虑到我真的只需要一个快速的“cdn”这一事实，这有点无关紧要

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:27:18.210

看看像[jetNEXUS](http://www.jetnexus.com/)这样的加速负载平衡器。它们的设置和使用技术非常简单，例如静态缓存 HTML 复用和压缩，可以显着减少到达实际服务器的数据量。这可以为您节省大量带宽成本。我认为 Rackspace 有一些 Zeus 或 Jetnexus 产品，而且我知道它可以作为亚马逊云上的一个选项使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T06:35:49.947

有很多方法可以降低成本。我知道 Spotify 会执行以下操作（除其他外）：

1.  在本地缓存歌曲。
2.  使用 P2P 从其他客户端下载（他们主要使用服务器来保证低延迟）。
3.  只允许付费用户使用高比特率。

我建议您阅读以下内容：[http ://www.csc.kth.se/~gkreitz/spotify-p2p10/](http://www.csc.kth.se/~gkreitz/spotify-p2p10/)

如果您正在寻找便宜的主机，那么我建议您查看：[http](http://www.hetzner.de/) ://www.hetzner.de/ 。我没有使用过它们，但我听说过很多关于它们的好消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T14:39:56.900

我知道他们的 CDN（包含在价格中）的 Rackspace 云文件使用 Akamai。Akamai 似乎在网络上没有任何定价，但经过一番谷歌搜索后，它们似乎确实很贵。

我会尝试这些东西。

1.  告诉 Rackspace 你的计划，并询问他们是否可以达成某种批量交易。
2.  联系 Akamai 并告诉他们您的计划并查看他们提供的服务。
3.  谷歌“最便宜的内容交付网络”，看看会发生什么。

我认为 CDN 是您想要的，它可以为您提供所需的容量。我认为没有 CDN 支持的简单 VPS 或云提供商不可能做那么多事情。

基本上，如果您提供大量静态内容，并且您是从云服务器（vps）进行的，它会在某个时候堵塞您的管道，即使您有几台服务器，它最终也会达到容量，但是使用 CDN，所有内容都被推送到节点，所以它基本上会继续下去:)

根据我的经验，Akamai CDN 非常棒。我已经使用了很多次（通过 RS 云文件），并且在 2 年内只遇到了 2 个问题，一个是最终用户使用一些遥远的 dns 服务器的错，另一个是在大约 1.5 天内修复，其中用户在意大利或其他地方，他们的内容来自其他国家。

Akamai 使用请求 URL 的 DNS 服务器的地理 IP 数据库查找为您提供附近主机的 IP。这对大多数人来说非常有用，因为他们将使用他们的 ISP DNS 服务器进行查找。

从好的方面来说，大多数用户的 ping 时间比从美国下载的要小得多，例如在黄金海岸，我到 akamai 的 ping 时间大约是 20-50 毫秒，到美国是 250-400 毫秒。

**更新：**自己做了一些谷歌搜索后，这看起来很有希望：http: [//24ways.org/2008/using-google-app-engine-as-your-own-cdn](http://24ways.org/2008/using-google-app-engine-as-your-own-cdn) - 他们说使用谷歌应用引擎作为 CDN . 从好的方面来说，上次我检查你可以免费做这件事，但从不好的方面来说，我不会通过计划保持免费来建立业务；按照谷歌发布免费东西的历史，然后对它们收费或放弃它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T06:36:26.943

我们一直致力于降低我们的大容量电子邮件递送服务 ( [http://elasticemail.com](http://elasticemail.com) ) 的成本，该服务使用大量带宽并且需要扩展。我们发现，通过切换到 OVH，我们可以以更便宜的价格获得更多的带宽和更多的硬件，并且它们具有出色的 API 可以自动化您在复杂基础架构中发现的许多复杂性。

所以感谢 OVH ( [http://ovh.ie](http://ovh.ie) ) 为我们节省了很多钱。

# python - 在 Plone 中，我们如何为同一个项目对具有不同角色的用户进行分组

> ID：10975348
> 
> 赞同：0
> 
> 时间：2012-06-11T06:30:24.453
> 
> 标签：python, plone

我的根文件夹是项目 A、项目 B 等等......我有 4 个具有不同权限的角色。我用属于不同角色的用户创建了一个项目 group_A。如何将此组关联到项目 A 文件夹，每个用户将在其中执行与其角色相关的自己的权限集？我可以单独添加用户，但这不是一个好的解决方案。?我正在使用 plone 4.1

我想为每个项目创建一组不同的用户（具有不同的角色）。所以我定义了一个自定义工作流，它只有一种状态，即私有。现在每个顶级文件夹对应一个项目。项目 A、项目 B ……以此类推。每个用户在登录时应该只能看到与他的项目关联的文件夹。当他对该文件夹具有共享权限时，这是可能的。现在碰巧的是，如果他属于 project_a 组（如果他也对该项目 A 具有全局审阅者角色，他应该有什么权限访问它）。如何为具有不同角色的其他用户**定义该文件夹的 group_a 权限？**

请检查附件中的图表。![包含用户和组的文件夹结构](../Images/d0e8af256a87f47195bef9038df22551.png)**说明**：- 项目 A ，项目 B 是 Plone 站点主文件夹中的 2 个文件夹，每个文件夹对应一个不同的项目。项目 A 在名为 project_a 组的组中有 6 个用户。这 2 名用户是投稿人，2 名审稿人，1 名编辑和 1 名读者。这些角色中的每一个，即。投稿人审阅者、编辑者和读者仅对项目 A 具有不同的权限集。项目 A 的工作流只有 1 个状态 - “私人”。因此，这将只允许 group_a 用户访问项目 A 文件夹的内容，如果它与 group_a 共享的话。**现在，在此 group_a 中具有不同角色的每个用户都应该访问文件夹 A 的内容，并且权限集仅与他的角色有关**. 问题是：在这种情况下，应该如何为 group_a 设置权限？同样，group_b 的用户可以访问文件夹 B 的内容，因此他们只能访问该文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:49:47.997

You can assign local roles to both individual users and groups.

Let's assume you have a ProjectManager role, and a Participant role, then you can assign the ProjectManager role locally (a local role) to an individual user, and the Participant role to a whole group of users; each member of that group would have the Participant role within that location.

# iphone - 我如何以及在哪里可以获得iphone风格的系统按钮图片？

> ID：10975354
> 
> 赞同：-1
> 
> 时间：2012-06-11T06:31:01.550
> 
> 标签：iphone, image, button

我想在uiimagepickercontroller中制作一些iPhone系统风格的按钮，如相机、闪光灯、设备按钮，我在哪里可以找到这些按钮图片？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:43:27.863

如果你在寻找图标意味着检查这个网站

[http://speckyboy.com/2008/07/18/35-free-icon-sets-for-your-iphone-pimp-it-up/](http://speckyboy.com/2008/07/18/35-free-icon-sets-for-your-iphone-pimp-it-up/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:48:56.060

我建议查看流行的[字形](http://glyphish.com/)集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T08:01:27.603

从 UIKit 导出图像：[https ://github.com/0xced/UIKit-Artwork-Extractor](https://github.com/0xced/UIKit-Artwork-Extractor)

可能您会找到必要的图标/图像。

# java - 我错了的Android类

> ID：10975360
> 
> 赞同：0
> 
> 时间：2012-06-11T06:31:27.573
> 
> 标签：java, android

```
public class temp 
{
    public int data0;//整数
    public int data1;//小数
    public int data2;
    public int data3;
    public long firsttime;
    public temp(int type,int data0, int data1, int data2, int data3,
             long firsttime) {
        super();
        this.data0 = data0;
        this.data1 = data1;
        this.data2 = data2;
        this.data3 = data3;
        this.firsttime = firsttime;
    }

}
public class ShareDate {

   public static temp mtemp=null;
   public static date mdate=null;

} 
```

问题出在`MainActivity`我确实喜欢这样

```
ShareDate.mtemp.date0=20; 
```

然后程序意外停止。不知道哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:35:19.333

你的初始化代码在哪里？

```
mtemp=new temp(); 
```

必须初始化类的对象才能使用其数据成员/方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:36:58.057

您需要在使用对象之前进行初始化..没有初始化代码..

```
mtemp=new temp(); 
```

为什么你使用构造函数？

如果你使用 ,

```
ShareDate.mtemp.date0=20;  like this ,, 
```

不需要构造函数。

# jquery - 用谷歌浏览器检查 jquery-ui 自动完成列表？

> ID：10975361
> 
> 赞同：2
> 
> 时间：2012-06-11T06:31:39.880
> 
> 标签：jquery, jquery-ui, google-chrome, autocomplete

我正在使用 jquery ui 自动完成，我正在覆盖 _renderItem 方法。

但是，当我向每个 li 添加一些 div 时，我遇到了列表变得太宽的问题。

我想使用 google chromes 开发人员工具检查列表，但是列表一直关闭，所以我无法检查它。

如何检查列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-04T16:22:13.223

从自动完成下拉列表中选择一个项目，然后右键单击表单上的输入并选择检查元素。您将在其下方看到一个显示设置为无的列表。只需在右侧的样式窗口中禁用该属性，该列表将在 html 中可见。然后你可以检查它的任何部分......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:29:34.053

您是否将关闭列表的选项设置为默认值以外的选项？

我在 jQuery [http://jqueryui.com/demos/autocomplete/#option-source](http://jqueryui.com/demos/autocomplete/#option-source)上尝试了该示例，并且可以轻松“右键单击”列表项并选择“检查元素”，使其出现在开发工具的检查窗口中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-04T06:37:57.203

试试这个： $("#search_input").trigger('keyup');

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-23T13:45:18.157

我发现使用[搜索](https://api.jqueryui.com/1.12/autocomplete/#method-search)方法通过控制台打开结果菜单是有效的。

`$(selector).autocomplete('search', 'substring');`

# python - 使用来自 manytomany 字段中相关查找的值预填充 tabularinline

> ID：10975362
> 
> 赞同：0
> 
> 时间：2012-06-11T06:31:55.810
> 
> 标签：python, django, many-to-many

我有问题要问。我想让我`change_form`从相关查找的实例的值中预填充表格内联（使用 manytomany 字段）。因此，当我在 class 中搜索时`kode_prod`，`change_form`我`Order`可以获得它的实例并将所有内容预填充到我的 tabularinline (class `Foo`) 中。

这是我的模型

```
class Product(models.Model):
    product_name= models.CharField(max_length=50)
    price = models.DecimalField(max_digits=10, decimal_places=2, default=Decimal('0.00'))
    tax_per_item = models.DecimalField(max_digits=10, null=True, blank=True, decimal_places=2, default=Decimal('0.00'))
    discount_per_item = models.DecimalField(max_digits=10, null=True, blank=True, decimal_places=2, default=Decimal('0.00'))

class Order(models.Model):
    produks = models.ManyToManyField(Product, verbose_name=u"Kode Produk")
    no_customer = models.ForeignKey(Customer, null=True, blank=True, related_name='%(class)s_kode_cust')

class Foo(models.Model):
    product = models.ForeignKey(Product, editable=False)
    pemesanan = models.ForeignKey(Order)
    quantity = models.IntegerField()
    price = models.IntegerField()
    discount = models.IntegerField()
    tax = models.IntegerField() 
```

类`Order`是与 的多域关系`Product`，因此`change_form`我可以通过相关查找获得它的实例。类`Foo`是 .tabularinline 中的中介`change_form`。那么，我有什么方法可以做到这一点吗？请帮助我，感谢您的友好回复:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:46:43.110

您可能应该编写一个 jQuery 脚本，当`kode_prod`输入 a、页面加载或单击“添加另一个 Foo”链接时调用该脚本。您甚至不需要自定义提交按钮，因为您可以为事件注册一个事件侦听器`'blur'`。

您的脚本发送一个异步 XMLHttpRequest，它由 django 视图回答，如下所示：

```
from django.core import serializers

def get_product(request, pk):
    return HttpResponse(serializers.serialize("xml", Product.objects.filter(pk=pk))) 
```

然后在响应处理程序中的 jQuery 脚本中填充响应中所有需要的字段。

下次请在您的问题中更加具体和明确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T16:15:00.433

你需要`Order`和`Product`通过之间的关系`Foo`吗？那么[django-documentation](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships)可能会帮助你

# java - 登录过滤器导致重定向循环

> ID：10975364
> 
> 赞同：0
> 
> 时间：2012-06-11T06:32:24.863
> 
> 标签：java, jsp, servlets, servlet-filters

我正在使用 servlet 和 JSP 创建一个简单的 Web 应用程序。我正在实现一个过滤器，它检查用户是否已经登录，从字面上检查用户会话是否处于活动状态。如果会话不活跃，则必须将用户重定向到登录页面（索引，jsp）

这是我在 web.xml 文件中的过滤器映射

```
 <web-app xmlns...>
  <display-name>FilterTest</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  <filter>
    <filter-name>LoginFilter</filter-name>
    <filter-class>LoginFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>LoginFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <servlet>
    <description></description>
    <servlet-name>LoginController</servlet-name>
    <servlet-class>LoginController</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>LoginController</servlet-name>
    <url-pattern>/LoginController</url-pattern>
  </servlet-mapping>
</web-app> 
```

当用户尝试访问不同的页面时，LoginFilter 会检查会话。如果会话处于活动状态，则用户被重定向到请求的页面，否则重定向到 index.jsp。

我在这里面临的问题是，`LoginFilter`即使在用户登录时也会检查会话（请求来自`index.jsp`登录页面）。所以我在这里看到的是，当用户登录时，控件转到`LoginFilter`，因为尚未为该用户创建会话，所以他被重定向回登录页面，这正在创建一个无限的重定向循环。

我想排除过滤器检查/会话检查请求是否来自`index.jsp`.

有什么方法可以做到这一点吗？或者我可以通过任何方式识别请求页面是否是`index.jsp`？

**更新：**应用程序启动时的 url 是`http://servername:port/FilterTest` 在这里加载 index.jsp。

我正在验证`LoginController`servlet 中的登录，如果登录成功，它将用户重定向到 home.jsp（欢迎页面）。

谢谢..！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T06:34:36.980

跳过`Filter`对登录页面的检查

您需要检查 requestedUrl 并查看它是否不需要过滤器（用于 LoginPage、CSS、图像、JS）然后只需执行

```
chain.doFilter(request, response); 
```

将 init 参数传递给 from `Filter`create a现在不需要过滤器检查以检查 URL 是否是其中之一，然后简单地`web.xml``init()``List<String> urls``doFilter()``chain.doFilter(request, response);`

# ruby-on-rails - ActiveModel 是否有包含“update_attributes”方法的模块？

> ID：10975370
> 
> 赞同：7
> 
> 时间：2012-06-11T06:32:39.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activemodel

我在我的 Rails 应用程序中设置了一个 ActiveModel 类，如下所示：

```
class MyThingy
   extend ActiveModel::Naming
   extend ActiveModel::Translation
   include ActiveModel::Validations
   include ActiveModel::Conversion

   attr_accessor :username, :favorite_color, :stuff

   def initialize(params)
     #Set up stuff
   end

end 
```

我真的希望能够做到这一点：

```
thingy = MyThingy.new(params)
thingy.update_attributes(:favorite_color => :red, :stuff => 'other stuff') 
```

我可以自己编写 update_attributes，但我感觉它存在于某个地方。可以？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T07:03:00.117

不，但这种情况有一个共同的模式：

```
class Customer
  include ActiveModel::MassAssignmentSecurity

  attr_accessor :name, :credit_rating

  attr_accessible :name
  attr_accessible :name, :credit_rating, :as => :admin

  def assign_attributes(values, options = {})
    sanitize_for_mass_assignment(values, options[:as]).each do |k, v|
      send("#{k}=", v)
    end
  end
end 
```

它[来自这里。](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_accessible)有关示例，请参见链接。

如果您发现自己经常重复这种方法，您可以将此方法提取到一个单独的模块中，并根据需要包含它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-30T19:55:49.063

看起来他们将其从活动记录中拉出并移至 Rails 5 中的活动模型。

[http://api.rubyonrails.org/classes/ActiveModel/AttributeAssignment.html#method-i-assign_attributes](http://api.rubyonrails.org/classes/ActiveModel/AttributeAssignment.html#method-i-assign_attributes)

您应该能够包含该模块：

```
include ActiveModel::AttributeAssignment 
```

# delphi - 如何禁用 PNG 的透明度

> ID：10975372
> 
> 赞同：3
> 
> 时间：2012-06-11T06:32:45.047
> 
> 标签：delphi, png, transparency, delphi-7

如何完全禁用给定的透明度`PNGObject`？顺便说一句，我使用的是 1.564 版的 PNGImage 单元。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T07:56:09.080

我认为不可能永久禁用`TPNGObject`图像透明度。或者至少我找不到这样做的属性。它应该由一个属性控制，因为当您分配或加载图像时，它`TPNGObject`会从分配的图像文件中获取图像参数（包括透明度）。

因此，作为一种解决方法，我希望`RemoveTransparency`在加载或分配图像后使用该过程：

```
uses
  PNGImage;

procedure TForm1.Button1Click(Sender: TObject);
var
  PNGObject: TPNGObject;
begin
  PNGObject := TPNGObject.Create;
  try
    PNGObject.LoadFromFile('C:\Image.png');
    PNGObject.RemoveTransparency;
    PNGObject.Draw(Canvas, Rect(0, 0, PNGObject.Width, PNGObject.Height));
  finally
    PNGObject.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T11:13:45.217

对于仅使用 alpha 混合将 TPNGObject（Delphi PNGComponents 库）绘制到某些背景颜色（例如：白色），试试这个：

```
uses 
  PNGImage, PNGFunctions;

procedure TForm1.Button1Click(Sender: TObject);
var png: TPNGObject;
    bmp: TBitmap;
begin
  try
    // load PNG
    png := TPNGObject.Create;
    png.LoadFromFile('MyPNG.png');

    // create Bitmap
    bmp := TBitmap.Create;
    bmp.Width  := png.Width;
    bmp.Height := png.Height;

    // set background color to whatever you want
    bmp.Canvas.Brush.Color := clWhite;
    bmp.Canvas.FillRect(Rect(0, 0, png.Width, png.Height));

    // draw PNG on Bitmap with alpha blending
    DrawPNG(png, bmp.Canvas, Rect(0, 0, png.Width, png.Height), []);

    // save Bitmap
    bmp.SaveToFile('MyBMP.bmp');

  finally
    FreeAndNil(png);
    FreeAndNil(bmp);
  end;
end; 
```

要使用 DrawPNG 过程，您必须包含 PNGFunctions 单元。

# c# - 预检查数据插入

> ID：10975379
> 
> 赞同：0
> 
> 时间：2012-06-11T06:33:40.440
> 
> 标签：c#, asp.net

我想制作一个用于值预检查的程序。用户将向 UI 提供单个输入（wbslement no）。我想将该记录插入到 System 中。在插入数据库之前，我想检查它是否存在于表中。如果它存在于表中，那么它不应该将记录插入到表中，如果它不存在于数据库中，那么它应该插入。

目前在加载时我正在从表中获取所有记录，之后我试图插入 System.

在我的代码中，无论如何它都是插入值

```
 CrCon = new SqlConnection(spcallloggin);
            CrCon.Open();
            CrCmd = new SqlCommand();
            CrCmd.Connection = CrCon;

            CrCmd.CommandText = "GetOraderNumberDetail";
            CrCmd.CommandType = CommandType.StoredProcedure;

            sqladpter = new SqlDataAdapter(CrCmd);
            ds = new DataSet();
            sqladpter.Fill(ds);
            for (int count = 0; count < ds.Tables[0].Rows.Count; count++)
            {

                if (txtwbs.Text == ds.Tables[0].Rows[count][0].ToString())
                {
                            Lbmsg.Visible = true;
                            Lbmsg.Text = "Data Already Exists !";
                            count = count + 1;
                 }
                 else
                 {
                       insetreco(val);
                 }
             } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:47:40.227

Just make a "Unique" key constraint on the table itself. MySQL already has an existing construct to handle this, so there's no point doing in your code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:34:42.447

检查这个：

根据您的需要进行更改

```
IF EXISTS (SELECT 1 FROM targetTable AS t
 WHERE t.empNo = @yourEmpNo
     AND t.project = @yourProject)
BEGIN
   --what ever you want to do here
END
ELSE
BEGIN
  INSERT INTO yourTable (empno, name, project)
  SELECT @empno, @name, @project
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T06:38:42.580

最好直接在存储过程中查看。

```
IF NOT EXISTS(SELECT * FROM [TABLE] WHERE unique_field = "value of the txtwbs")
BEGIN
    INSERT INTO [TABLE]
    VALUES (value1, value2, value3,...)
END 
```

您也可以按以下方式更改代码：

```
bool doesExist;
for (int count = 0; count < ds.Tables[0].Rows.Count; count++)
{

    if (txtwbs.Text == ds.Tables[0].Rows[count][0].ToString())
    {
          Lbmsg.Visible = true;
          Lbmsg.Text = "Data Already Exists !";
          doesExist = true;
          break;
    }
}
if(!doesExist)
    insetreco(val); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T06:44:00.280

您可以使用[DataView 的 RowFilter](http://msdn.microsoft.com/en-us/library/system.data.dataview.rowfilter.aspx)来查询内存表：

```
Dataview dv = ds.Tables[0].DefaultView ;
dv.RowFilter="wbslement_no="+number;
if(dv.ToTable().Rows.Count==0)
{
      //insert into database 
}
else
{
       Lbmsg.Visible = true;
       Lbmsg.Text = "Data Already Exists !";
} 
```

或者

您可以检查存储过程中的重复性，而不是对数据库进行两次单独的调用。

# php - 建立一个阿拉伯语网站

> ID：10975382
> 
> 赞同：0
> 
> 时间：2012-06-11T06:33:46.390
> 
> 标签：php, arabic, right-to-left

我看到一个这样的网站，即[http://www.a3malcom.com/index.php](http://www.a3malcom.com/index.php)。我想在阿拉伯语网站上建立同类型的网站。我想知道数据库表的条目是否也需要用阿拉伯语或英语完成？

如果我需要 2 种语言（即英语和阿拉伯语）的网站怎么办。数据应以何种语言输入数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T06:37:13.190

看看综合文章：（感谢[@Deceze](https://stackoverflow.com/users/476/deceze)的精彩文章）

*   [在 Web 应用程序中从前到后处理 Unicode](http://kunststube.net/frontback/)

它也有`Arabic`其他语言的例子：

![在此处输入图像描述](../Images/c40a20c36109774a011cb9512b02d31c.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T06:36:49.723

是的，您应该在 db 表中插入阿拉伯语数据。因此，您可以在网页中轻松阅读，无需转换。

并在显示页面时使用 utf-8 编码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T15:18:51.093

通常只需要 unicode (UTF-8)。

如果您想在 PHP 源代码中编写阿拉伯语，您的源文件应该被编码为 UTF-8。请注意，某些文本编辑器不能正确支持阿拉伯语。

对于数据库，只需使用 UTF-8 编码创建数据库。

对于 HTML 输出，将其添加到您的 HEAD 部分：

```
<meta http-equiv="Content-type" content="text/html;charset=UTF-8" /> 
```

或者，您可以将其作为 HTTP 标头发送……但何苦呢。

无论如何，我遇到了一个问题，将阿拉伯语句子生成为 GD 中的图像 - 使用自定义字体。结果发现 GD 不能正确渲染阿拉伯语（至少在我的情况下）。

这是使用以下库解决的：

[http://ar-php.org/](http://ar-php.org/)

（是的，该网站非常丑陋，但是该库可以正常工作，打包良好，包含文档...）

就我而言，要解决这个问题，我所要做的就是：

```
$Arabic = new I18N_Arabic('Glyphs');
$text = $Arabic->utf8Glyphs($_GET['txt']); 
```

然后将 $text 提供给 GD。不过，我在文本方向上遇到了一个小问题，正在寻找解决方案。但至少我现在有有效的阿拉伯语。

但在大多数情况下，您不需要该库，而只需要确保您在所有开发过程中都使用 UTF-8。

希望能帮助到你。

# jquery - 移动网站 - 仅强制横向/不自动旋转

> ID：10975387
> 
> 赞同：23
> 
> 时间：2012-06-11T06:34:12.240
> 
> 标签：jquery, css, mobile, landscape, autorotate

我有一个具有移动样式表的网站：

```
<link rel="stylesheet" href="css/mobile.css" media="handheld"> 
```

我还使用 jQuery 来检查移动设备并相应地更改功能。

但我想知道是否有办法强制仅横向方向并禁用自动旋转？CSS 或 jQuery 解决方案都可以。

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-03T16:49:40.863

使用媒体查询来测试方向，在纵向样式表中隐藏所有内容并显示应用程序仅在横向模式下工作的消息。

```
<link rel="stylesheet" type="text/css" href="css/style_l.css" media="screen and (orientation: landscape)">
<link rel="stylesheet" type="text/css" href="css/style_p.css" media="screen and (orientation: portrait)"> 
```

我认为是最好的方法

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-11T09:25:28.830

您不能在网页中强制定向，但您可以在 portarit 模式下建议或阻止内容。

我对现有[脚本进行了](http://frommelt.fr/dimension/)[改编](http://frommelt.fr/dimension/land)

在你的 html 文件中添加一个 div 元素

```
<div id="block_land">Turn your device in landscape mode.</div> 
```

然后调整您的 CSS 以覆盖您的所有页面

```
#block_land{position:absolute; top:0; left:0; text-align:center; background:white; width:100%; height:100%; display:none;} 
```

然后添加一个小 javascript 来检测方向

```
function testOrientation() {
  document.getElementById('block_land').style.display = (screen.width>screen.height) ? 'none' : 'block';
} 
```

不要忘记在 onload 和 onorientationchange 中测试方向，也许在你的 body 标签中

```
<body onorientationchange="testOrientation();" onload="testOrientation();"> 
```

让我知道此解决方案是否适合您。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-17T02:12:51.580

我认为最好的方法是脚本，这样当用户改变时，它就会改变。我对此进行了修改，以便在纵向时旋转您的页面主 DIV，从而强制用户切换。除非他们想侧头：

```
<script type="text/javascript">
    (function () {
        detectPortrait();
        $(window).resize(function() {
            detectPortrait("#mainView");
        });

        function detectPortrait(mainDiv) {
            if (screen.width < screen.height) {
                $(mainDiv).addClass("portrait_mode");
            }
            else {
                $(mainDiv).removeClass("portrait_mode");
            }
        }
    })();
</script>
<style type="text/css">
    .portrait_mode {
        -webkit-transform: rotate(90deg);
        -moz-transform: rotate(90deg);
        -o-transform: rotate(90deg);
        -ms-transform: rotate(90deg);
        transform: rotate(90deg);
    }
</style> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-24T17:14:05.887

强制横向的简单方法是在您的 css 代码中设置您的最小-最大宽度，尝试使用此代码

```
@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation:portrait) { 
body {
-webkit-transform: rotate(90deg);
width: 100%;
height: 100%;
overflow: hidden;
position: absolute;
top: 0;
left: 0; 
}} 
```

希望能解决你的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-29T08:10:19.027

我尝试了以下代码，它强制浏览器使用纵向模式：

```
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0" /> 
```

此代码已在 iPhone 和其他移动设备上进行了测试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-02T05:04:12.340

您可以通知用户他必须更改方向并隐藏屏幕。然后感知方向变化并重新加载页面。以下代码应放在页面模板的末尾或页脚中。

这是为了通知用户他应该旋转设备，当页面处于纵向状态时它会隐藏内容。您应该确认“.content”是您页面上的正确选择器。

```
if(screen.availHeight > screen.availWidth){
    jQuery( ".content" ).css( "display", "none" );
    var newLine = "\r\n"
    var msg = "Please use Landscape!"
    msg += newLine;
    msg += "(Turn your phone 90 degrees)";
    msg += newLine;
    msg += "and wait a seconds,";   
    msg += newLine;
    msg += "for the page to reload.";   
    alert(msg);
} 
```

这将在用户旋转设备时重新加载隐藏页面。

```
jQuery(window).on("orientationchange",function(){
  location.reload();
}); 
```

# javascript - 谷歌地图上的自定义标记

> ID：10975394
> 
> 赞同：3
> 
> 时间：2012-06-11T06:34:54.580
> 
> 标签：javascript, google-maps

我已经预定义了大约 6k 个标记的谷歌地图。我如何为他们制作自定义标记，如果我需要在 1cm^2 中有 10+ 点时放置 marker_1 ，或者如果有 50+ 点时放置 marker_2 等。最后一个，我需要在这个自定义标记中打印点数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:43:21.687

粘贴演示它的代码

```
 <script type="text/javascript">
  function initialize() {
      var locations = 
       [
            ['Sugar Grove', 41.7696, -88.4588],
           ['Coogee Beach', -33.923036, 151.259052],
            ['Cronulla Beach', -34.028249, 151.157507],
            ['Manly Beach', -33.80010128657071, 151.28747820854187],
             ['Tel Aviv', 32.067, 34.767]
      ];

      var map = new google.maps.Map(document.getElementById('map'), {
                                 zoom: 3,
                                center: new google.maps.LatLng(--putHereCenterVar-->),
                                 mapTypeId: google.maps.MapTypeId.ROADMAP
                            });

            var opt = { minZoom: 2, maxZoom:18  };
            map.setOptions(opt);
            var markers = [];
            var len=LocationLength.Length;
            var i;
            for (i = 0; i < len; i++) {
                var dataValue = locations[i];
                var latLng = new google.maps.LatLng(dataValue[1],dataValue[2]);
                var marker = new google.maps.Marker({position: latLng});
                markers.push(marker);
            }

            var markerCluster = new MarkerClusterer(map, markers);
        }

        google.maps.event.addDomListener(window, 'load', initialize); 
```

此代码演示了如何向谷歌地图添加集群功能，尝试将其添加到您的代码中。位置是带有标记位置的二维数组，MarkerClusterer 是使很多点看起来像一个带有多个实例的大标记的对象。

不要忘记声明：

```
 <script src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer_compiled.js" type="text/javascript"></script>

    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/tags/markermanager/1.0/src/markermanager.js"></script>
    <script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer_compiled.js"></script> 
```

希望有帮助。

# android - android项目中的Sqlite约束失败错误

> ID：10975395
> 
> 赞同：-1
> 
> 时间：2012-06-11T06:34:59.960
> 
> 标签：android, sqlite

我的表结构如下图

```
CREATE TABLE MCARE_HOUSE_DETAILS (
                HOUSE_DTL_ID VARCHAR(20) NOT NULL,
                HOUSE_SRV_DTL_ID VARCHAR(20) NULL,
                WARD_ID VARCHAR(20)  NOT NULL,
                HOUSE_NO VARCHAR(50) NOT NULL,
                HOUSE_NAME VARCHAR(50),
                ADDRESS VARCHAR(300),
                HOUSE_TYPE VARCHAR(20) ,
                ELECTRICITY CHAR(1),
                LATRINE_TYPE VARCHAR(20) ,
                WATER_SOURCE VARCHAR(20) ,
                WATER_STORAGE_FACILITY INTEGER,
                WASTE_DISPOSAL_SOLID VARCHAR(20) ,
                WASTE_DISPOSAL_LIQUID VARCHAR(20) ,
                SURVEY_DATE CHAR(10),
                CREATED_USER_ID VARCHAR(20) ,
                CREATED_DATE CHAR(19),
                MODIFIED_USER_ID VARCHAR(20) ,
                MODIFIED_DATE CHAR(19),
                UPLOAD_STATUS CHAR(1),
                INSTITUTION_ID VARCHAR(10),
                NEW_WARD_ID VARCHAR(20) ,
                NEW_HOUSE_NO VARCHAR(50),
                UNIQUE_HOUSE_NO VARCHAR(50),
                PRIMARY KEY (HOUSE_DTL_ID)) 
```

插入查询块如下

```
 openDB=DBConnection.getInstance(context).openDataBase();      
SQLiteStatement statement = openDB.compileStatement("INSERT INTO MCARE_HOUSE_DETAILS (HOUSE_DTL_ID,WARD_ID,HOUSE_NO) VALUES(?,?,?);");   
statement.bindString(1,houseId);  
statement.bindString(1,wardId);  
statement.bindString(2,houseNumber); 
statement.executeInsert(); 
```

插入的值为 houseId=bp,wardId=199,houseNumber=Test

我在插入时收到以下错误

**：android.database.sqlite.SQLiteConstraintException：错误代码19：约束失败**

我什至无法在此表中插入一行

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:41:38.287

这是因为您将 设置`HOUSE_NO`为“”。您的语句不绑定参数 #3。

```
statement.bindString(1,houseId);  
statement.bindString(1,wardId);  
statement.bindString(2,houseNumber); 
```

试试这个：

```
statement.bindString(1,houseId);  
statement.bindString(2,wardId);  
statement.bindString(3,houseNumber); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:44:45.330

最好使用 ContentValues 。它很容易在android中使用。

```
 ContentValues values = new ContentValues();
    values.put(Database_COLUMN_NAME, "VALUE");
             SQLiteDatabase database;
            database.insert(Database_TABLE_NAME, "",values); 
```

它可以帮助你。

谢谢

# actionscript-3 - as3xls 库是否处理 excel 文件中的超链接..？

> ID：10975396
> 
> 赞同：0
> 
> 时间：2012-06-11T06:35:07.787
> 
> 标签：actionscript-3, excel, data-binding, datagrid, flex4

“as3xls 库”是否能够处理 excel 文件中的超链接，是否有任何其他库可用于从 .xlsx 文件导入数据。as3xls 仅限于 .xls。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:38:53.597

.xlsx 文件基本上只是相互映射并压缩到 zip 存档中的 XML 文件。我处理它们的方式是使用诸如[nochump](http://nochump.com/blog/archives/15)的 zip 库之类的东西来解压它们，然后自己遍历包含的 XML。除此之外，我不知道有任何库设置为直接处理 xlsx 文件（你是正确的 as3xls 只处理较旧的、更困难的二进制 xls 格式）。您可能会发现一些资源（例如[OOXML 规范](http://www.ecma-international.org/publications/standards/Ecma-376.htm)）也很有帮助。

# mysql - MySQL mobilink 与 SQL Anywhere 同步

> ID：10975397
> 
> 赞同：0
> 
> 时间：2012-06-11T06:35:19.023
> 
> 标签：mysql, sqlanywhere, mobilink

我的电脑配置是

*   MySQL-mysql-5.0.96
*   SQL Anywhere-11
*   赢XP 32位

我正在尝试在任何地方将 mysql 与 sql 连接以进行 mobilink 同步，但在遵循此站点提供的教程时出错：[http](http://www.sybase.com/detail?id=1056497) ://www.sybase.com/detail?id=1056497在步骤[启动 MobiLink 同步服务器](http://www.sybase.com/detail?id=1056497#startmlsrv)

```
start "" "%SQLANY11%\bin32\mlsrv11" -v+ -o mlsrv.out -zs ml_mysql -c "DSN=sa11_ML" -dl -zu+ -x tcpip{port=2439} 
```

我得到的错误：

> [-10002]合并数据库服务器或 ODBC 错误：ODBC：[MySQL][ODBC 5.1 驱动程序][mysql-5.0.24a-community-nt]日期时间值不正确：列的“2134-09-08 07:06:05.100000000”第 1 行的“last_modified”（ODBC 状态 = HY000，本机错误代码 = 1292）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T04:31:25.067

我找到了我上述问题的解决方案。

使用以下版本

MySQL - 5.5 MySQL ODBC - 5.1 而不是上面给出的。

并尝试通过执行提供的 bat 文件来使用这些步骤。

# algorithm - OpenCL/CUDA：两阶段归约算法

> ID：10975398
> 
> 赞同：3
> 
> 时间：2012-06-11T06:35:19.370
> 
> 标签：algorithm, opencl

可以通过调用 __reduce() 来减少大型数组；多次。

但是，以下代码仅使用两个阶段，并[在此处](http://developer.amd.com/Membership/Print.aspx?ArticleID=221&web=http://developer.amd.com/documentation/articles)记录：

但是我无法理解这两个阶段减少的算法。有人可以给出更简单的解释吗？

```
__kernel
void reduce(__global float* buffer,
        __local float* scratch,
        __const int length,
        __global float* result) {

    int global_index = get_global_id(0);
    float accumulator = INFINITY;
    // Loop sequentially over chunks of input vector
    while (global_index < length) {
        float element = buffer[global_index];
        accumulator = (accumulator < element) ? accumulator : element;
        global_index += get_global_size(0);
    }

    // Perform parallel reduction
    int local_index = get_local_id(0);
    scratch[local_index] = accumulator;
    barrier(CLK_LOCAL_MEM_FENCE);
    for(int offset = get_local_size(0) / 2; offset > 0; offset = offset / 2) {
        if (local_index < offset) {
            float other = scratch[local_index + offset];
            float mine = scratch[local_index];
            scratch[local_index] = (mine < other) ? mine : other;
        }
        barrier(CLK_LOCAL_MEM_FENCE);
    }
    if (local_index == 0) {
        result[get_group_id(0)] = scratch[0];
    }
} 
```

它也可以使用 CUDA 很好地实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T07:28:41.540

您创建`N`线程。第一个线程查看位置 0, N, 2*N, ... 第二个线程查看值 1, N+1, 2*N+1, ... 这是第一个循环。它将`length`值减少为 N 个值。

然后每个线程将其最小值保存在共享/本地内存中。然后你有一个同步指令（`barrier(CLK_LOCAL_MEM_FENCE)`。）然后你有共享/本地内存的标准减少。完成后，本地 id 为 0 的线程将其结果保存在输出数组中。

总而言之，您可以减少 from`length`到`N/get_local_size(0)`值。执行完此代码后，您需要进行最后一次传递。但是，这可以完成大部分工作，例如，您的长度可能约为 10^8，N = 2^16，get_local_size(0) = 256 = 2^8，并且此代码将 10^8 个元素减少为 256 个元素.

你不明白哪些部分？

# python - 在热图中将反向对角线设为白色

> ID：10975402
> 
> 赞同：9
> 
> 时间：2012-06-11T06:35:44.123
> 
> 标签：python, matplotlib, pyqt, pyqt4

我正在尝试做一些如下图所示的事情， ![在此处输入图像描述](../Images/3f49d7b30a28a81f5722cc31120194b2.png)

只需设置反向对角线白色即可。我无法将它们设置为白色。该图表采用整数值，我不知道白色对应的整数值是多少。

谢谢！

**编辑：**

这是代码；

```
import math
from matplotlib import pyplot as plt
from matplotlib import cm as cm
import pylab
import numpy as np
from matplotlib.collections import LineCollection

class HeatMap:
    def __init__(self, selectedLines):
        self.selectedLines = selectedLines

    def getHeapMap(self):
        figure = plt.figure()

        if len(self.selectedLines) != 0:

            self.map = self.createTestMapData(len(self.selectedLines),                len(self.selectedLines))

            maxValueInMap = self.findMaxValueInMap(self.map)

            x = np.arange(maxValueInMap + 1)
            ys = [x + i for i in x]
            ax = figure.add_subplot(111)
            ax.imshow(self.map, cmap=cm.jet, interpolation='nearest')

            '''
            Left side label of the chart is created according to selected values
            from a checkbox group.
            '''
            leftSideLabelSize = len(self.selectedLines)
            sideLabels = []
            for line in self.selectedLines:
                sideLabels.append(line.text())
            pos = np.arange(leftSideLabelSize)
            '''
            Left side labels are set with the code below.
            '''
            pylab.yticks(pos, sideLabels)
            plt.xticks(pos, sideLabels)
            self.numrows, self.numcols = self.map.shape
            ax.format_coord = self.format_coord

            line_segments = LineCollection([zip(x, y) for y in ys],
                linewidths=(0.5, 3, 1.5, 2),
                linestyles='solid')
            line_segments.set_array(x)
            axcb = figure.colorbar(line_segments)

        return figure

    def format_coord(self, x, y):
        col = int(x + 0.5)
        row = int(y + 0.5)
        if col >= 0 and col < self.numcols and row >= 0 and row < self.numrows:
            z = self.map[row, col]
            return 'x=%1.4f, y=%1.4f, z=%1.4f' % (x, y, z)
        else:
            return 'x=%1.4f, y=%1.4f' % (x, y)

    def createTestMapData(self, xSize, ySize):
        resultMap = 10 * np.random.rand(xSize, ySize)
        #Setting reverse diagonal is here. Now it is set with zero but it gives blue.
        # I want it to be set as white
        for index in range(0, int(math.sqrt(resultMap.size))):
            resultMap[index][((math.sqrt(resultMap.size) - 1) - index )] = 0 
        return  resultMap

    def findMaxValueInMap(self, map):
        return np.amax(map) 
```

目前这些值是随机生成的。上面的代码给出了类似的 gui；

![在此处输入图像描述](../Images/333b8d095aabc98d5152bb3f389ffdad.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T07:57:56.847

您可以制作自己的颜色图，或调整现有的颜色图 :)

![在此处输入图像描述](../Images/8fed14f7ffacf70256805f739f1b63a4.png)

这是上述情节的代码，并在评论中进行了解释：

```
import matplotlib
from pylab import *
import numpy as np

#Create test data with zero valued diagonal:
data = np.random.random_sample((25, 25))
rows, cols = np.indices((25,25))
data[np.diag(rows, k=0), np.diag(cols, k=0)] = 0

#Create new colormap, with white for zero 
#(can also take RGB values, like (255,255,255):
colors = [('white')] + [(cm.jet(i)) for i in xrange(1,256)]
new_map = matplotlib.colors.LinearSegmentedColormap.from_list('new_map', colors, N=256)

pcolor(data, cmap=new_map)
colorbar()
savefig('map.png')
show() 
```

或者，您可以屏蔽数据，并设置屏蔽颜色：

```
#Create test data:
data = np.random.random_sample((25, 25))
#Create a diagonal mask:
mask = np.diag(np.ones(25))
#Apply mask to data:
masked_data = ma.masked_array(data, mask)
#Set mask color to white:
cm.jet.set_bad(color='white', alpha=None)
#for this to work we use pcolormesh instead of pcolor:
pcolormesh(masked_data, cmap=cm.jet)
colorbar()
show() 
```

这会产生基本相同的结果，但可能更适合您的需求，因为您可以将任何单元格设置为白色，并且白色不会显示在颜色栏上（请参见上面颜色栏的最底部）：

![在此处输入图像描述](../Images/a9eda4b65f547e33a29988a0a4fd9eaa.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T07:36:54.467

颜色图由 中的`cmap`参数定义`ax.imshow()`。您已经使用了`jet`颜色图`cmap=cm.jet`，这只是matplotlib中许多[内置颜色图之一。](http://www.scipy.org/Cookbook/Matplotlib/Show_colormaps)您可以选择一个或定义您自己的适合您的口味。

# jsf-2 - 导航而不重定向？

> ID：10975405
> 
> 赞同：1
> 
> 时间：2012-06-11T06:35:59.880
> 
> 标签：jsf-2, primefaces, mojarra

我目前有一个导航菜单：

```
...
<p:menuitem id="id1" value="Page 1" action="home.xhtml?faces-redirect=true" actionListener="#{homeBean.someMethod(1)}"/>
<p:menuitem id="id2" value="Page 2" action="other.xhtml?faces-redirect=true" actionListener="#{otherBean.someMethod(1)}"/> 
```

现在我想摆脱这些重定向。所以我尝试了属性 url 而不是 action，但是 actionListener 不再被调用。

在这种情况下如何调用监听器

```
<p:menuitem id="id1" value="Page 1" url="home.jsf">
  ... here (or maybe somewhere else) should go the call to my listener ...
</p:menuitem> 
```

强尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T07:08:09.793

`p:menuItem`支持 POST 和 GET 。选择其中哪一个取决于`url`属性的存在。来自[PF 文档](http://primefaces.org/documentation.html)的引用：

> 这由 url 属性决定，如果存在 menuitem 则执行 GET 请求，如果不存在则发布父表单。

如果要在服务器端调用操作方法，则需要执行 POST。如果您不想要重定向，则需要`String`从您的操作方法返回导航目标：

```
public String someAction() {
  ...
  return "home";
} 
```

这将导航到`home.xhtml`操作方法是否已完成。

您可以从菜单中调用此操作方法：

```
<p:menuitem id="id1" value="Page 1" action="#{someBean.someAction}"/> 
```

# java - 在 eclipse 和 ibm rad 8 之间使用 svn 版本控制？

> ID：10975406
> 
> 赞同：0
> 
> 时间：2012-06-11T06:36:02.250
> 
> 标签：java, eclipse, svn, subversive, ibm-rad

我使用 eclipse 和 ibm rad 8，因为 rad 8 是基于 eclipse 构建的，所以我应该能够同时使用 IDE:s 对项目进行版本控制。因此，我在 svn 中签入了一个从 eclipse 到 xp-dev.com 的项目，并使用无法构建该项目的 ibm rad 8 进行了检查。意见如下。

![在此处输入图像描述](../Images/c2b508d25be9dead7b2cdedf110328b2.png)

![在此处输入图像描述](../Images/4a26af4db5211664e7b6a5079dd5ada7.png) ![在此处输入图像描述](../Images/5ce009019680ca8ecf3150b426fb0c55.png)

当我从 ibm rad 构建时，会发生此错误。

```
Exception in thread "main" java.lang.NoClassDefFoundError: adventure.Adventure
Caused by: java.lang.ClassNotFoundException: adventure.Adventure
    at java.net.URLClassLoader.findClass(URLClassLoader.java:434)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:660)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:358)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:626) 
```

我究竟做错了什么？

## 更新

我为 Java 7 定义的构建路径似乎存在问题。这是我的第一个 Java 7 项目，我的 IDe 找不到版本 7，尽管它安装在计算机上。

![在此处输入图像描述](../Images/ff6ba1bc8e7db4dd3877592a0720b901.png) ![在此处输入图像描述](../Images/3f393e0eecb4dfb7aa404c6834585f26.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:47:06.360

您不应该对您的`.settings`文件夹进行版本控制。这将根据您的 IDE 的位置和类型而有所不同。这应该与和文件`svn:ignore`一起添加。`.classpath``.project`

您必须检查您的项目并为每个 IDE 单独配置它。

Maven 显然会让你的生活更轻松，因为它可以自动配置你的项目。

# jquery - 使用 jquery validate 进行通用选择

> ID：10975408
> 
> 赞同：0
> 
> 时间：2012-06-11T06:36:11.677
> 
> 标签：jquery, jquery-selectors, jquery-validate

作为一个相对的 jquery 新手，如果我的问题有一个简单的解决方案，请多多包涵。通过例如选择时，使用 jquery validate 可以很好地工作`unique ID`。

```
$("#myForm").validate({
    debug: false,
    rules:
    {
         field1: "Required"
    },
    messages:
    {
         field1: "Required"
    },
    submitHandler: function(form) {
         $.post('formAction.php', $("#myForm").serialize(), function(data) {
            $('#results').html(data);
         });
    }
}); 
```

我需要扩展它以通用地使用许多自动生成的表单`myForm1, myForm2`等。

我可以通过一个通用的类选择器进行验证`$("myForm")`，然后将其`submitHander`应用于特定的表单（`myForm1`、`myForm2`等），例如：

```
$(".myForm").validate({
    debug: false,
    rules:
    {
         field1: "Required"
    },
    messages:
    {
         field2: "Required"
    },
    submitHandler: function(form) {
         $.post('formAction.php', $(this).serialize(), function(data) {
            $('#results').html(data);
         });
    }
}); 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:20:39.200

e validate 方法不会链接对表单的引用，因此建议的 $(form).serialize 仍然指的是共享公共类的第一个表单。巨大的帮助，因为它让我在正确的轨道上找到解决方法：-

[https://github.com/jzaefferer/jquery-validation/issues/157](https://github.com/jzaefferer/jquery-validation/issues/157)

```
$(".myForm").each(function(index,element) {
  $(element).validate({

    debug: false,

    rules:
    {
         field1: "Required"
    },
    messages:
    {
         field2: "Required"
    },
    submitHandler: function(form) {
         $.post('formAction.php', $(form).serialize(), function(data) {
            $('#results').html(data);
         });
    }
  });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:37:47.910

尝试这个

```
$('[id^=myForm]').validate(); // work for id pattern myForm1, myForm2...
                              // this selector will target forms whose id start
                              // with myForm 
```

或者

```
$('.myForm').validate() // giving a common class to all forms 
```

* * *

`submitHandler`像这样的自动完成调用

```
 validator.settings.submitHandler.call( validator, validator.currentForm ); 
```

这意味着`this`将引用`validator object`not the `form`，因此使用`form`参数来引用表单并序列化它的字段，如下所示

```
 $(form).serialize() 
```

因此，在您提交处理程序而不是`$(this).serialize()`使用`$(form).serialize()`.

# c - 指针前/后增量

> ID：10975421
> 
> 赞同：-3
> 
> 时间：2012-06-11T06:37:30.877
> 
> 标签：c, pointers

谁能完整解释以下代码？

```
#include<stdio.h>
#include<stdlib.h>

int main()
{
    int *a, *s, i;

    a = s = (int *) malloc(4 * sizeof(int));

    for (i = 0; i < 4; i++)
    {
        *(a + i) = i * 10;
        printf(" %d ", *(a + i));
    }

    printf("\n");
    printf("%d\n", *s++);
    printf("%d\n", (*s)++);
    printf("%d\n", *s);
    printf("%d\n", *++s);
    printf("%d\n", ++*s);
    printf("\n");
    printf("%d\n", *a++);
    printf("%d\n", (*a)++);
    printf("%d\n", *a);
    printf("%d\n", *++a);
    printf("%d\n", ++*a);

    return 0;
} 
```

输出：

```
0 10 20 30
0
10
11
20
21

0 
11
12
21
22 
```

1）指针's'如何打印值，`*(a+i)`仅在for循环中分配值？

2) 赋值时值在哪里准确存储和存储`*(a+i)`？

`*s++`3) , `(*s)++`, `*++s`,之间有什么区别`++*s`？

4) 为什么当我打印类似于 s 的指针时，值会增加 1？

提前致谢 ！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:59:49.960

1和2）指针指向（或者你可以说它是一个地址）某个内存位置。由于您分配`a = s = (int*) malloc(4 * sizeof(int));`,`a`并且`s`两者具有相同的地址，或者指向相同的内存位置。**如果内存位置的内容**发生任何变化（例如，在您的代码中，您正在为分配的内存分配数字），那么只要您拥有正确的地址（两者都`a`指向`s`同一位置），您就可以看到**内容**变化。

一个粗略的类比是，你要一个房子（`malloc`），它会给你房子的地址（`a`）。然后你决定房子很丑，你想重新粉刷它（赋值：）`*(a + i) = i + 10`，你告诉地址的其他人（`s`）会看到你的房子已经粉刷了。

3)

`*s++`表示访问当前地址的内容，然后**递增**指针**（**地址）。

回想一下你的代码，它访问第一个元素，然后地址将指向第二个元素。

`(*s)++`表示访问当前地址处的内容，然后**递增**当前地址处的**内容**。

回想一下您的代码，它会在增加第二个元素之前获取它的内容。下一个打印语句显示第二个元素的内容已增加。

`*++s`表示递增当前地址，并访问**递增**地址处的内容。

回想你的代码，它得到了第三个元素的内容。

`++*s`表示增加当前地址的**内容**，并访问**增加**的内容。

回想一下您的代码，它会获取第三个元素的增量内容。

4) As explained in earlier part, if you modify the content via one pointer, you will see it if you have the same pointer (address). You are actually modifying the content of the memory addresses (as explained in 3), so you may see the effect of modification when you repeat the process.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T06:47:39.950

你需要先研究指针。可能这会有所帮助：[http ://www.cs.cf.ac.uk/Dave/C/node10.html](http://www.cs.cf.ac.uk/Dave/C/node10.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T06:55:58.610

1)

变量`a`和`s`都指向同一个内存位置。

2)

如果您说`a + 1`，则将指针的值增加`a`其类型大小的 1 倍 (1*4)。因此，如果您说`*(a+1)`，则从下一个整数中获取值。您可以将变量视为一个数组，因为它指向一个大小为 4 个整数的内存位置。您还可以像这样访问这些值：`a[0], a[1], a[2] and a[3]`.

3)

`*s++`：您获取该指针的值，然后在该语句之后，指针`s`增加 4。

`(*s)++'：获取指针的值，然后将该值加 1。

`*++s`：您将指针`s`增加 4，然后获取它的值。

`++*s`：您获取指针的值`s`并将其递增 1。

4)

由于指针`s`和指针`a`指向同一个内存位置，并且您调用`*s++`，该*内存位置*的值增加了 1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T07:22:26.427

```
a=s= (int *) malloc(4*sizeof(int)); 
```

该语句将内存分配给's'，因为相同的内存分配给'a'，例如，我将分配的地址是2000，通常它是十六进制的，只是为了理解我将采用十进制值。for(i=0;i<4;i++)

```
 {

  *(a+i)=i*10;

 printf(" %d ",*(a+i));

   } 
```

当你做 (a+i) 地址加上 i....整数）

```
 +--------+---------+----------+---------+
         |0       |   10    |     20   |    30   |
         |        |         |          |         |
         +--------+---------+----------+---------+
 Address 2000     2004      2008       2012 
```

*(a+i) 将只给你内存位置的内容 (a+i) 或 a 将给你地址，因为你将 s 分配给 a 两者都具有相同的值，所以现在 *s++ 现在 s 是 2000 *s 是 0 并且s++ 发生在 s 的下一次使用中，它将在 2004 年的位置，所以它的 0 next ur *s 是 10 并且 (*s)++ 将发布增量 10，所以它的 11 下一次使用

查看优先级和关联性以了解它是如何编译的

[http://msdn.microsoft.com/en-us/library/126fe14k%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/126fe14k%28v=vs.80%29.aspx)

# java - 单例在不同的线程中使用

> ID：10975423
> 
> 赞同：3
> 
> 时间：2012-06-11T06:37:38.383
> 
> 标签：java, android

我有一个远程服务和一个对象（单例）。当我从 UI 线程和远程服务调用单例类时，我得到 2 个对象。谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T06:55:48.380

如果您有远程服务，那么您有 2 个完全独立的进程。每个进程都有自己的虚拟机。因此，您的**单例**类在**每个**进程中实例化一次。

如果你真的需要一个，那么想想你是否真的需要一个远程服务。如果您可以将远程服务实现为本地服务，那么这将解决您的问题。

另一方面，如果您确实需要一个在 2 个独立进程之间共享的单个实例，那么您将需要**仅**在远程服务进程中实例化单例，并通过 UI 进程的远程调用来访问它。

# css - 带有很长字符串的移动网络应用

> ID：10975429
> 
> 赞同：1
> 
> 时间：2012-06-11T06:38:03.657
> 
> 标签：css, word-wrap

我正在尝试构建专为手机设计的网络应用程序。但是我有一些非常大的链接。如果文本不适合，我想要做的是打破这些字符串，如果适合则使用整个字符串。

我尝试使用`word-wrap:break-word`：

```
.breakWord {
    width: 100% 
    word-wrap: break-word;
} 
```

我的html是：

```
<table>
  <tr>
   <td rowspan="2" style="width:10%" >picture</td>
   <td colspan="2" style="width:90%" class="breakWord">link</td>
  </tr> 
   <tr>
    <td style="width:80%">info1</td>
   <td style="width:10%">info2</td>
   </tr>
  <tr>
  </tr> 
</table> 
```

此代码不适合页面 - 出现水平滚动条。

如何使文本适合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:51:40.537

如果您更正源代码中的错误，它将起作用。

*   `width:100%`从样式块中删除。它与 中的内联样式冲突`td`，并且遗漏了一个分号
*   `colpan`应该`colspan`

另外，我相信某些浏览器在遇到`td`带有宽度样式的 colspanned 时会感到困惑。您可以安全地删除`style="width:90%"`，因为下面的两个`td`s 已经正确设置了宽度。

**编辑：**
所以它不适用于任何地方。根据[this question](https://stackoverflow.com/questions/1258416/word-wrap-in-a-html-table)的答案，问题出在表格上：首先计算表格的宽度，然后将10％和90％作为计算的宽度，而不是屏幕上的可用宽度。
所以一个可能的解决方案是给表格一个特定的宽度，并将其表格布局设置为固定。

```
<table style="width:100%; table-layout:fixed"> 
```

# c# - 来自 TCP/IP 的读取循环

> ID：10975430
> 
> 赞同：2
> 
> 时间：2012-06-11T06:38:05.903
> 
> 标签：c#, tcp-ip

我需要连接一个服务器（使用 ip 和端口）并创建一个读取循环，该循环将从服务器获取消息作为 XML。有时没有来自服务器的消息。

我试图创建一个连接（工作正常）并阅读消息，我从服务器收到第一条消息，当我试图阅读另一条消息时 - 它卡住了。我认为现在可能没有消息，但我需要循环继续直到有消息......它甚至不会去“catch”或“finally”，什么都不做......

```
public class Connection
{
    public Connection()
    {
        Socket server = null;
        try
        {
            string p = string.Empty;
            using (var client = new TcpClient(myIPAddress, myPort))
            using (var stream = client.GetStream())
            using (var reader = new StreamReader(stream))
            {
               while (p != null)
               {
                    try
                    {
                        p = reader.ReadLine();
                    }
                    catch (Exception e)
                    {
                       //
                    }
               }
            }
        }
        catch (Exception e)
        {
            //
        }
        finally { 
            server.Close(); 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T07:18:55.103

循环继续，等待数据**。**这里的问题似乎只是`ReadLine()`一个阻塞调用。您提到可能还没有消息；好吧，`ReadLine()`将阻塞，直到满足两个条件之一：

*   它可以成功读取一些数据，以换行符终止（或 EOF，即没有换行符的消息后跟套接字关闭） - 在这种情况下，它返回数据行
*   没有更多数据被接收**并且**流被关闭，在这种情况下它返回`null`

所以基本上，`ReadLine()`要等到消息进来或套接字关闭。这只是 的行为`ReadLine()`。如果这有问题，您可以靠近套接字工作，并检查`NetworkStream.DataAvailable` **but**：请注意，它只会告诉您**当前**是否有一些数据可用；这并不意味着“这是一条完整的消息”，也不能用来判断是否会有更多消息*到达*。的主要用途`DataAvailable`是在同步和异步访问之间做出决定。另外，如果您在套接字附近工作，则必须自己进行所有缓冲和编码/解码。

在我看来，它`ReadLine()`工作成功。我在这里唯一要做的就是重新措辞一下：

```
string line;
while((line = reader.ReadLine()) != null) {
    // line is meaningful; do something
} 
```

最后一个想法：xml 并不总是简单地以“每行”为基础分成消息。您可能需要考虑其他形式的框架，但这很可能意味着更接近套接字，而不是`StreamReader`.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-11T06:57:14.177

您必须等到数据到达流中，您可以尝试使用以下方法，

```
if(reader.EndOfStream)
   continue; 
```

# asp.net-mvc-3 - 为整个网站指定一个标题？

> ID：10975431
> 
> 赞同：0
> 
> 时间：2012-06-11T06:38:07.003
> 
> 标签：asp.net-mvc-3

我有一个网站，但客户想在所有页面上安装一个标题，我不想爬遍整个网站并更改每个地图的标题，作为整个网站的 sdealt？

# knockout.js - 敲除点击绑定的自定义参数

> ID：10975432
> 
> 赞同：4
> 
> 时间：2012-06-11T06:38:10.880
> 
> 标签：knockout.js, knockout-2.0

我目前正在尝试使用自定义参数调用函数，但是我无法访问该参数，`observable()`而是取回了一个对象。基本上我要做的是检索列表中该特定元素的索引。有人可以为我指出正确的方向吗？

HTML：

```
<div id="formula">
  <b>Formula</b><br/>
    <!-- ko foreach: formula -->
      <span data-bind="text: $data, attr: {name: $index}, click: $parent.convert.bind($data,$index)"></span><br/>
    <!-- /ko -->
</div> 
```

Javascript：

```
var ListModel = function(formula) {
  var self = this;
  self.formula = ko.observableArray(formula);
  self.convert = function(index) {
    alert(index); //this should show the index of the clicked element
  }
};

listModel = new ListModel(formula);
ko.applyBindings(listModel); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T08:28:47.030

应该是 $parent.convert.bind($data,$index())

```
<div id="formula">
  <b>Formula</b><br/>
    <!-- ko foreach: formula -->
      <span data-bind="text: $data, attr: {name: $index}, click: $parent.convert.bind($data,$index())"></span><br/>
    <!-- /ko -->
</div> 
```

[例子](http://jsbin.com/erovah/5/edit#source)

# android - 从 2 个表 SQLite 数据库填充列表视图

> ID：10975434
> 
> 赞同：2
> 
> 时间：2012-06-11T06:38:31.377
> 
> 标签：android, sqlite, android-listview

我想从 SQLite 数据库中的 2 个表中填充一个列表视图。列表视图将包含 3 个视图：一个图像视图和 2 个文本视图。

*   第一个表：imageview 和 textview1
*   第二个表：textview2

我可以成功地从一个表中查询数据并将其显示在列表视图中，但不知道如何从第二个表中查询，然后将其添加到列表中。

下面的代码显示一个列表视图，其中仅包含来自 my_folders 的数据。如何更改它，以便 textview1 显示来自表 my_folders 的数据，而 textview2 显示来自 my_expenses 的数据。有人可以帮忙吗？

## 这是我的主要内容：

> 公共类 mymain 扩展 ListActivity { ListView listContent;
> 
> SimpleCursorAdapter 光标适配器；final DBAdapter mySQLiteAdapter = new DBAdapter(this); 光标光标；
> 
> /** 在第一次创建活动时调用。*/
> 
> @Override public void onCreate(Bundle savedInstanceState) {
> 
> ```
>  super.onCreate(savedInstanceState); 
> ```
> 
> // setContentView(R.layout.list_example);
> 
> ```
>  listContent = (ListView) findViewById(R.id.custom_list);
>   final DBAdapter mySQLiteAdapter = new DBAdapter(this);
> 
>   mySQLiteAdapter.open();
> 
>   cursor = mySQLiteAdapter.getAllFolders();
> 
>   String[] from = new String[] { DBAdapter.KEY_NAME,DBAdapter.KEY_CURRENCY };
>   int[] to = new int[] { R.id.name_row, R.id.notes_row };
> 
>   cursorAdapter = new SimpleCursorAdapter(this, R.layout.list_row, cursor,
>           from, to);
> 
>   setListAdapter(cursorAdapter);
>   mySQLiteAdapter.close(); 
> ```
> 
> } }

## 这是我的数据库：

```
import android.database.Cursor;

public class DBAdapter {
    public static final String KEY_ROWID = "_id"; 
    public static final String KEY_NAME = "name";
    public static final String KEY_CURRENCY = "currency";
    public static final String KEY_NOTES = "notes";
    public static final String KEY_EXPENSE_NAME = "expense_name";
    public static final String KEY_EXPENSE_AMOUNT = "expense_amount";
    public static final String KEY_EXPENSE_DATE = "expense_date";
    public static final String KEY_EXPENSE_TIME = "expense_time";
    public static final String KEY_EXPENSE_NOTES = "expense_notes";
    public static final String KEY_EFOLDERID = "e_fid";

    private static final String TAG = "DBAdapter";

    private static final String DATABASE_NAME = "MyDB";
    private static final String DATABASE_TABLE1 = "my_folders";
    private static final String DATABASE_TABLE2 = "my_expenses";
    private static final int DATABASE_VERSION = 1;

    private static final String DATABASE_CREATE_FOLDERS = 
        "create table my_folders (_id integer primary key autoincrement, "
            + "name text not null, currency text not null, notes text);";

    private static final String DATABASE_CREATE_EXPENSES = 
        "create table my_expenses (_id integer primary key autoincrement, "
            + "expense_name text not null, expense_amount real not null, " +
                    "expense_date text not null, expense_time text not null," +
                    "expense_notes text,"
        + "e_fid integer not null," +
                    "FOREIGN KEY ("+ KEY_EFOLDERID+ ") REFERENCES " + DATABASE_TABLE1 +" ("+ >KEY_ROWID + ") ON DELETE CASCADE);";

    // ---retrieves all the contacts---
    public Cursor getAllFolders() {
        return db.query(DATABASE_TABLE1, new String[] { KEY_ROWID, KEY_NAME,
                KEY_CURRENCY, KEY_NOTES}, null, null, null, null, null);
    }

    // ---retrieves all the expenses---
    public Cursor getAllExpenses() {
        return db.query(DATABASE_TABLE2, new String[] { KEY_ROWID, KEY_EXPENSE_NAME,
                KEY_EXPENSE_AMOUNT, KEY_EXPENSE_DATE, KEY_EXPENSE_TIME, KEY_EXPENSE_NOTES, >KEY_EFOLDERID}, null, null, null, null, null);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:41:46.953

从 2 个表中获取数据的最佳方法是使用连接查询，例如

```
SELECT name, expense_name, expense_notes
FROM my_folders, my_expenses
WHERE my_folders._id = my_folders.e_fid 
```

这将返回 1 个光标中的所有数据，然后您可以将其放入您的视图中

# regex - 如何在Notepad ++中替换一行中特定字符之前的所有单词

> ID：10975440
> 
> 赞同：1
> 
> 时间：2012-06-11T06:39:01.003
> 
> 标签：regex, notepad++

如何替换Notepad ++中每一行代码中字符'='之前的所有单词？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T06:45:10.093

可以用正则表达式来完成。

查找内容：`^[\w\s]+\=(.*)$` 替换为：`newword\=\1`。有关更多信息，请参阅下面的屏幕截图：

![替换 '=' 符号之前的所有单词](../Images/b8402954e45f45e1e6f0c7cd923cd382.png)

您应该在正则表达式中输入您想要的替换词而不是“newword”。

# scala - 带有类型条目的 Scala HashMap

> ID：10975442
> 
> 赞同：0
> 
> 时间：2012-06-11T06:39:26.827
> 
> 标签：scala

我不确定我的主题是否正确。我将尝试描述问题。我有一个共同的领域特征。StringField 和 IntField 扩展了这个类：

```
trait BaseField[T] {
  def name = "field"

  var owner : FieldContainer

  var value : T
  def set(value : T) {
    this.value = value
    this.owner.fields.put(name, this)
  }
}

class StringField extends BaseField[String]
class IntField extends BaseField[Int] 
```

如何实现 FieldContainer 类？我想要的是稍后匹配 FieldTypes：

```
val fieldContainer = {...init code here...}

fieldContainer.fields foreach {
  field -> {
     field match {
       case f: StringField => println("String")
       case f: IntField => println("Int")
       case _ => println("Unknown")
     }
  }
} 
```

这是我的 FieldContainer（到目前为止）

```
trait FieldContainer {

  private metaFields : HashMap[String, Any] = new HashMap[String, Any]
  def fields : HashMap[String, Any] = this.metaFields
} 
```

我以这种方式使用它：

```
class Pizza extends FieldContainer {

  object name extends StringField(this) {
    override def name = "pizza_name"
  }

  object pieces extends IntField(this) {
     override def name = "pieces_count"
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:47:05.383

字段不需要知道它们的所有者。

```
class BaseField[T](initValue: T, val name: String = "field") {
  private[this] var _value: T = initValue
  def apply() = _value
  def update(v: T) { _value = v }
  override def toString(): String = name + "(" + apply() + ")"
}

class StringField(initValue: String, name: String = "field") extends BaseField[String](initValue, name)
class IntField(initValue: Int, name: String = "field") extends BaseField[Int](initValue, name)

trait FieldContainer {
  protected def addField[C <: BaseField[_]](field: C): C = {
    _fields += (field.name -> field)
    field
  }

  protected def stringField(initValue: String, name: String): StringField =
    addField(new StringField(initValue, name))

  protected def intField(initValue: Int, name: String): IntField =
    addField(new IntField(initValue, name))

  private var _fields : Map[String, Any] = Map[String, Any]()
  def fields : Map[String, Any] = _fields
} 
```

首次访问时初始化的对象（单例），因此您应该使用`val`而不是`object`for 字段：

```
class Pizza extends FieldContainer {

  val name = stringField("", "pizza_name")

  val pieces = intField(0, "pieces_count")

  val mass: BaseField[Double] = addField(new BaseField[Double](0, "mass"))
} 
```

用法：

```
scala> val p = new Pizza()
p: Pizza = Pizza@8c61644

scala> p.fields
res0: Map[String,Any] = Map(pizza_name -> pizza_name(), pieces_count -> pieces_count(0), mass -> mass(0.0))

scala> p.name() = "new name"

scala> p.pieces() = 10

scala> p.mass() = 0.5

scala> p.fields
res4: Map[String,Any] = Map(pizza_name -> pizza_name(new name), pieces_count -> pieces_count(10), mass -> mass(0.5))

scala> p.name()
res5: String = new name

scala> p.pieces()
res6: Int = 10

scala> p.mass
res7: BaseField[Double] = mass(0.5) 
```

# jquery - 如何在 twitter-bootstrap 的表单中设置日期时间

> ID：10975443
> 
> 赞同：0
> 
> 时间：2012-06-11T06:39:33.347
> 
> 标签：jquery, css, html, date, twitter-bootstrap

我正在使用 twitter 引导程序，我需要将输入设置为表单中标签之一的日期时间，但我不知道该怎么做。

我正在关注这个：

[https://github.com/eternicode/bootstrap-datepicker](https://github.com/eternicode/bootstrap-datepicker)我正在尝试使用选项

我试过这个：

```
 <link rel="stylesheet" type="text/css" href=""{{ STATIC_URL }}/css/datepicker.css">
 <script src = "{{STATIC_URL}}js/Datepicker.js></script>
 <script>
  $('#datepicker').datepicker({
    format: 'mm-dd-yyyy'
  });
 </script>
 <label>Created:</label>
 <input type="text" value="02-16-2012" id="datepicker" rel="datapicker" />
 <br/><br/> 
```

此外，我会使用标签来显示当前日期，而不是我最初键入的值 i。

需要一些帮助。真的很感激任何帮助..

但它不起作用......不知道错误是什么......

编辑版本：

```
 <link type="text/css" rel="stylesheet" href="{{ STATIC_URL }}/css/bootstrap.css">
 <link rel="stylesheet" type="text/css" href=""{{ STATIC_URL }}/css/datepicker.css">
  <script>
   $('#datepicker').datepicker({
      format: 'mm-dd-yyyy'
    });
  </script>
  <script src = "{{STATIC_URL}}js/Datepicker.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

    <label>Created:</label>
    <input type="text" value ="06/11/2012"id="datepicker"/>
    <br/><br/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T08:55:33.200

```
$('#datepicker').datepicker({
format: 'mm-dd-yyyy'
}); 
```

是 jquery 所以添加

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

到你的代码。

它适用于我[http://jsfiddle.net/baptme/9r2E4/](http://jsfiddle.net/baptme/9r2E4/)

代替

```
<input type="text" value ="06/11/2012"id="datepicker"/> 
```

和

```
<input type="text" value="06-11-2012" id="datepicker"/> 
```

# ruby-on-rails - 跨域cookie Rails 3

> ID：10975445
> 
> 赞同：5
> 
> 时间：2012-06-11T06:39:43.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cookies, cross-domain

我想知道是否可以在另一个域而不是我当前的应用程序域名下获取 cookie？

我正在构建一个访问另一个网站的 api 的应用程序。如果用户已经从其他站点登录，我的浏览器将在该域名下创建一个 cookie。例如，用户在 www.example.com 下登录，我的浏览器会存储一个 cookie： `cookies['token']`在 www.example.com 域下。当用户访问我的网站 www.mywebsite.com 时，如何在我的 rails 服务器中获取 www.example.com 下的 cookie？

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T22:45:55.047

这可以做到，但它需要客户端、您的网站和您的其他网站一起工作。您有一个知道如何向站点 A 进行身份验证的客户端。它希望将站点 B 视为它知道如何针对站点 A 进行身份验证的用户。完成此操作的基本方法是让客户端联系站点 A，对自身进行身份验证，从站点 A 获取站点 B 可以信任的令牌，然后将该令牌交给站点 B。

实际上，您想要构建一个非常具体的 OpenID 或 OAuth 案例。这当然是可能的，但是您需要对 www.example.com 进行一些更改才能使其正常运行。如果你能做到这一点，那就太好了。

首先阅读有关 OAuth 的所有内容。你不需要完全使用它（虽然你可以），但它会帮助解释你需要做什么： http: [//hueniverse.com/oauth/](http://hueniverse.com/oauth/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:56:25.240

您可以跨域的不同子域共享 cookie，但不能跨多个域名共享 cookie。

Cookie 由浏览器存储，浏览器不允许您访问或存储来自外部域名的 cookie。如果浏览器确实允许您这样做，那将是一个巨大的安全漏洞。

但是，您可以在域名之间共享存储在服务器上的会话数据。这可能不是完全微不足道的，但由于会话信息存储在服务器上，如果需要，您可以在应用程序之间访问服务器上的信息。如果您的会话数据存储在数据库中，那么所需要做的就是授予对两个域的数据库访问权限。如果需要，您实际上可以将数据库打开到外部域名，并让外部域直接连接到服务器上的数据库。

# iphone - 在没有动画的情况下更改 UIVIEW 的变换/旋转/缩放

> ID：10975449
> 
> 赞同：2
> 
> 时间：2012-06-11T06:40:26.977
> 
> 标签：iphone, ios, uiview

我需要根据它们与屏幕中心的距离来更改图像的大小。如果图像更靠近中间，则应为其赋予 1 的比例，离中心越远，它的比例越接近于某个函数为零。

由于用户正在平移屏幕，我需要一种方法来更改图像（UIViews）的比例，但由于这不是一个非常经典的动画，我知道如何准确定义动画序列 - 主要是因为时间问题（由于系统性能，我不知道动画会持续多久），我将需要简单地一步更改比例（没有定时动画）。
这样，在平移时调用函数的每一帧，所有图像都应该很容易更新。

有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T06:43:45.310

您可以直接将 a`CGAffineTransform`应用于您的`UIImageView`. IE：

```
CGAffineTransform trans = CGAffineTransformMakeScale(1.0,1.0);
imageView.transform = trans; 
```

当然，您可以更改您的值，或者使用其他值`CGAffineTransform`，但这应该可以帮助您。

希望能帮助到你 ！

# cakephp - 让 extjs 和 cakephp 关联的模型一起工作

> ID：10975454
> 
> 赞同：1
> 
> 时间：2012-06-11T06:41:09.047
> 
> 标签：cakephp, extjs

当我`find('all')`在 cakephp 中执行模型关联时，返回的数据格式类似于：

```
{
    data: [
        {
            'mainModel': {},
            'associatedModel1': {},
            'associatedModel2': {},
            'associatedModel3': {},
            'associatedModel4': {}
        },
        {
            'mainModel': {},
            'associatedModel1': {},
            'associatedModel2': {},
            'associatedModel3': {},
            'associatedModel4': {}
        }
    ]
} 
```

当我在 ExtJS 中编写存储时，我需要将记录配置选项设置为`mainModel`，但是关联将如何工作？据我所知，extjs 期望数据的格式如下：

```
{
    data: [
        {
            'mainModel': {
                'associatedModel1': {},
                'associatedModel2': {},
                'associatedModel3': {},
                'associatedModel4': {}
            }
        },
        {
            'mainModel': {
                'associatedModel1': {},
                'associatedModel2': {},
                'associatedModel3': {},
                'associatedModel4': {}
            }
        }
    ]
} 
```

我对此理解正确吗？我怎样才能让 ExtJS 和 CakePHP 相互配合？我是否被迫操纵数据以适应 ExtJS 的喜好？

# python - 如何“过滤”文件系统上文件的内容？

> ID：10975455
> 
> 赞同：1
> 
> 时间：2012-06-11T06:41:21.177
> 
> 标签：python, macos, git, google-app-engine, fuse

我想这样做，以便在我运行 dev_appserver.py 或 appcfg.py（Google AppEngine 使用的可执行文件）时，他们看到我的源文件以及他们需要包含的 API 密钥和其他敏感数据才能运行，但我想避免在我的 git repo 中包含该信息。

现在我有一个脚本，它使用 watchdog python 库来监视文件系统的变化，拿起改变的文件，处理它，并将它复制到我正在运行 appcfg.py 或 dev_appserver.py 的目录中，但这感觉真的很笨。有一个更好的方法吗？

理想情况下，该解决方案适用于 linux 和 Mac OS X，理想情况下，它不会涉及 FUSE，但如果这真的是这样做的方法，我想我将不得不学习它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:40:39.327

将一个文件添加到您的 git 存储库中，该文件`settings.py.dist`包含必要的密钥列表。就像是：

```
SOME_KEY = ''
ANOTHER_KEY = '' 
```

然后将其复制`settings.py`并填写密钥。不要添加`settings.py`到您的 git 存储库中。添加`settings.py`到`.gitignore`.

# android-layout - 如何创建动态的、自定义的按钮？

> ID：10975463
> 
> 赞同：1
> 
> 时间：2012-06-11T06:41:57.443
> 
> 标签：android-layout

我尝试创建动态按钮，它创建但我想要自定义，颜色，大小和触摸事件颜色。你能告诉我是如何创建的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-11T06:43:40.423

你可以试试这段代码

```
Button b = new Button(this);
             b.setText("Dynamic Button");
             b.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, 
```

LayoutParams.WRAP_CONTENT));

按照本教程[自定义按钮](http://nishantvnair.wordpress.com/2010/11/09/customize-button-in-android/)

# javascript - 以下语法有什么区别？

> ID：10975465
> 
> 赞同：1
> 
> 时间：2012-06-11T06:42:18.107
> 
> 标签：javascript

```
1\. $(function () {
       function foo() { return true; }
       log(bar());                        // getting error
       var bar = function() { return true; };   
  });

2\. $(function () {
       function foo() { return true; }
       var bar = function() { return true; };
       log(bar());                        // Working   
  }); 
```

我的困惑是以下两个声明之间有什么区别，哪个有用？

```
var bar = function() { return true; };

function bar(){ return true; }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T06:49:46.593

The:

```
function bar(){ return true; }; 
```

is `function declaration` which is hoisted to top by the interpreter, you can call from **any place**, while:

```
var bar = function() { return true; }; 
```

is `function expression` you can call only ***after*** it is defined. It won't be available before or up in the code just like you were doing:

```
log(bar());                        // getting error
var bar = function() { return true; }; 
```

Getting error because on first line `bar` isn't available yet. To solve that, use `function declaration` instead if you want.

* * *

To learn more about the difference between `function declaration` and `function expression`, I highly recommend you to read this great article by [Kangax](http://perfectionkills.com):

*   **[Named function expressions demystified](http://kangax.github.com/nfe/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:55:38.110

Sarfraz 已经得到了很好的解释。我只是想添加更多，第一个功能，

```
var bar = function(){ return true; }; 
```

更灵活，您可以在声明后添加更多属性或方法：

```
bar.anotherMethod = function() { alert("This is another method"); }
bar.anotherProperty = 'some value'; 
```

虽然`function bar(){ return true; }`不能那样做。`

# html - 网站在 IE 中无法正确显示

> ID：10975467
> 
> 赞同：-1
> 
> 时间：2012-06-11T06:42:23.107
> 
> 标签：html, css, xhtml

我在 dermatologytech.org/ 上工作，并且尽可能地将标记作为 W3 有效。当我在 Internet Explorer 中查看该站点时，它显示不正确，按钮一直向上显示。见下图。此外，导航在 FireFox 中移动。见第二张图。任何援助将不胜感激。

![在此处输入图像描述](../Images/649c73d4a35f8cbf898e01969e627daf.png)

![在此处输入图像描述](../Images/b508b78aefc0a1f50c0878314e857159.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:58:39.150

嘿，现在你可以轻松地做到这一点，只需定义

****css**文件中**滑块**div 的**最小高度。****

 ****像这样

```
.slider{
min-height:266px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:48:06.813

Can you post the CSS and PHP index (or maybe part) to help you troubleshoot? There might be a problem with your positioning as Internet Explorer does not support all CSS tags. I tried using IE 8 on your site and the output is okay. So maybe check your CSS file and look for CSS tags that are incompatible with IE 7 and look for a workaround. Check this out : [http://msdn.microsoft.com/en-us/library/bb250496%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/bb250496%28v=vs.85%29.aspx) and this : [http://www.quirksmode.org/css/contents.html](http://www.quirksmode.org/css/contents.html)

These sites may help you find what makes your layout change on IE.****

# java - 正则表达式问题

> ID：10975468
> 
> 赞同：-1
> 
> 时间：2012-06-11T06:42:26.913
> 
> 标签：java

我做了一个应用程序，我可以在匹配器的帮助下通过正则表达式获取字段的值......我制作了一个方法，在其中传递一个字段并获得响应。在今天的字符串中，我的响应中有一些奇怪的行为，我得到了 AgentId = 25001220052805950 并且在匹配器之后我得到了`fake`所以我必须检查名称包含“AgentId”的字段是否存在并验证值。

**所需字段：** `SecondaryAgentId=fake;` `PrimaryAgentId=fake;`

**回应：**

```
IsPrimaryAgentId=true; AgentId=25001220052805950; MerchantID=19; Cashier=michael; IsManualPayment=1; UserID=GraceRose; Password=rose1234; AmountUserEntered=2; AmountApproved=0; AmountDifference=0; Amount=0; CustomerNameAttempts=0; ProductID=Agriculture; InvoiceID=inv7443; SiteUrl=http://www.thcelink.com/index.php/shoping/checkout/step/step-1; ReturnURL=http://220.2.3:2027/Customer/Thanks.aspx; ResponseType=1; PrimaryAgentId=fake; PrimaryCurrencyCode=fake; SecondaryAgentId=fake; SecondaryCurrencyCode=fake; MerchantName=GraceRose; EmailId=rr@myglobal.com; Query1Attempts=0; MerchantTransactionID=543; MerchantTransactionSequenceID=246; txtAmtIsVisible=false; isQuery1Executed=false; isQuery2Executed=false; Voucher=fake; Passcode=fake; Error=fake; QueryType=fake; Payer=fake; CurrencyName=fake; CurrencySymbol=fake; CustomerName=fake; EmailBody=fake; ErrorText=fake; CustomerEmailID=fake; NavigatePageValue=0; IsCustomerInsertSucess=false; IdType=fake; IdNumber=fake; AggregateAttempts=0; Voucher2=fake; PassCode2=fake; Voucher3=fake; PassCode3=fake; TransCode=0; TransactionDate=2012-06-11T12:04:52.921875+05:30; NumberInWords=fake; MerchantCompany=fake; InvoiceNumber=fake; OverPaidAmount=0; InsufficientAmount=0; OverPaymentForEmail=fake; RedirectPage=false; 
```

**更新：：**

```
private String GetString1(String strManualproResponce2, String paternField) {
        // TODO Auto-generated method stub
        String s = null;
        if(paternField.equalsIgnoreCase("AgentId"))
        {
            Pattern pinPattern2 = Pattern.compile("^"+paternField + "=(.*?);");
            ArrayList<String> pins2 = new ArrayList<String>();
            Matcher m2 = pinPattern2.matcher(strManualproResponce2);
            while (m2.find()) {
                pins2.add(m2.group(1));
                s = m2.group(1);
            }
        }else
        {
        Pattern pinPattern2 = Pattern.compile(paternField + "=(.*?);");
        ArrayList<String> pins2 = new ArrayList<String>();
        Matcher m2 = pinPattern2.matcher(strManualproResponce2);
        while (m2.find()) {
            pins2.add(m2.group(1));
            s = m2.group(1);
        }
        }

        return s;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:58:19.323

你的问题有点神秘，据我了解，当你想匹配/提取`AgentId`字段的值时，代码不起作用。问题似乎与您的正则表达式有关：`"^"+paternField + "=(.*?);"`假设文本`AgentId`将位于字符串的开头，而不是因为您拥有的字符串的开头`IsPrimaryAgentId`。

此外，您当前的正则表达式将返回 true `IsPrimaryAgentId`，`AgentId`因为它们都包含子字符串：`AgentId`。要解决此问题，您可以使用此正则表达式： ，这将需要文本`\\s+AgentId=(.*?);`前的空格。`AgentId`

另一种选择是（如果你`AgentId`总是数字）使用这个：`AgentId=(\\d+);`.

# php - 返回类的实例（是“类 php 的属性”）

> ID：10975470
> 
> 赞同：0
> 
> 时间：2012-06-11T06:42:40.150
> 
> 标签：php, oop, class, return

您好，我是 OOP 的新手，我只想问如何在不为每个函数放置返回类的情况下自动返回类的实例？这是我的代码：

```
class myclass
{
    function myfinalOUtput()
    { 
        //blahblah
        return new myclass(); 
    }

    function get()
    { 
        //blahblah
        return new myclass();
    }

    function set()
    { 
        //blahblah
        return new myclass();
    }
} 
```

我想要类似的东西：

```
class myclass
{
    function myfinalOUtput()
    {}

    function get()
    {}

    function set()
    {}
} 
```

所以我可以这样做：

```
$class = new myclass();
$class->get()->set()->myfinalOUtput->(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T06:48:48.623

```
return $this; 
```

Place that in lieu of `return new myclass();` ... that's all that is required, it just passes the object back.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T06:56:56.033

它被称为[php的](http://en.wikipedia.org/wiki/Fluent_interface#PHP)[Fluent 接口](http://en.wikipedia.org/wiki/Fluent_interface)和实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T06:48:50.490

What you're looking for is `$this` variable:

```
class myclass
{
    function myfinalOUtput()
    { 
        //blahblah
        return $this; 
    }

    function get()
    { 
        //blahblah
        return $this;
    }

    function set()
    { 
        //blahblah
        return $this;
    }
} 
```

This will, at the end of the methods, return the instance, so that you could call other methods:

```
$class = new myclass();
$class->get()->set()->myFinalOutput(); 
```

# java - 在Java中，当方法具有基类作为参数时，使用反射调用方法无法找到方法

> ID：10975472
> 
> 赞同：3
> 
> 时间：2012-06-11T06:42:51.593
> 
> 标签：java, reflection

下面是代码片段，我正在尝试`usingClass`使用 REFLECTION 调用该方法。当我传递 Child 类型的对象时，直接调用该`usingClass()`方法（无反射）有效，但当我尝试使用 Reflection 实现相同的事情时，它会抛出`NoSuchMethodFoundException`. 想了解我是否遗漏了什么或者这背后是否有任何逻辑？请帮忙

```
package Reflection;

import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

public class TestMethodInvocation {

    /**
     * @param args
     */
    public static void main(String[] args) {
        TestMethodInvocation test = new TestMethodInvocation();
        Child child = new Child();
        Parent parent = (Parent)child;
        Class<? extends Parent> argClassType = parent.getClass();
        Class<? extends TestMethodInvocation>  thisClassType = test.getClass();

        test.usingClass(child);

        Method methodToCall;
        try {
            methodToCall = thisClassType.getDeclaredMethod("usingClass", argClassType);
            methodToCall.invoke(test, parent);
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (NoSuchMethodException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    private void usingClass(Parent p){
        System.out.println("UsingClass: " + p.getClass());
    }

} 
```

**输出如下。**

```
UsingClass: class Reflection.Child
java.lang.NoSuchMethodException: Reflection.TestMethodInvocation.usingClass(Reflection.Child)
    at java.lang.Class.getDeclaredMethod(Unknown Source)
    at Reflection.TestMethodInvocation.main(TestMethodInvocation.java:20) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T06:52:32.910

您的代码不起作用的原因`getClass()`是动态绑定的。转换为 Parent 不会影响对象的运行时类型，因此变量`child`和`parent`包含相同的类对象。除非您通过或类似的方式显式查询您的实例的父类，`getGenericSuperclass()`否则您将不得不使用dystroy 提到的静态方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T06:49:45.583

You should use

```
methodToCall = thisClassType.getDeclaredMethod("usingClass", Parent.class); 
```

because the precise exact class of `parent` (which is Child), is used at runtime and the type of the variable holding it changes nothing.

Another (too heavy) way to solve it would be :

```
Class<? extends Parent> argClassType2 = (new Parent()).getClass();
...
    methodToCall = thisClassType.getDeclaredMethod("usingClass", argClassType2); 
```

# java - Amazon S3 上传文件并获取 URL

> ID：10975475
> 
> 赞同：112
> 
> 时间：2012-06-11T06:43:07.463
> 
> 标签：java, amazon-s3, amazon-web-services

是否可以通过单个操作将 txt/pdf/png 文件上传到 Amazon [S3 ，并获取上传的文件 URL 作为响应？](https://aws.amazon.com/s3/)

如果是这样，AWS Java SDK 是我需要在我的 java struts2 Web 应用程序中添加的正确库吗？

请为此建议我一个解决方案。

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2015-06-26T17:58:16.380

不，您无法通过单一操作获得 URL，但有两个 :)

首先，您可能必须在上传之前将文件公开，因为获取任何人都无法访问的 URL 是没有意义的。您可以按照 Michael Astreiko 的建议设置 ACL。您可以通过调用`getResourceUrl`或获取资源 URL `getUrl`。

```
AmazonS3Client s3Client = (AmazonS3Client)AmazonS3ClientBuilder.defaultClient();
s3Client.putObject(new PutObjectRequest("your-bucket", "some-path/some-key.jpg", new File("somePath/someKey.jpg")).withCannedAcl(CannedAccessControlList.PublicRead))
s3Client.getResourceUrl("your-bucket", "some-path/some-key.jpg"); 
```

**注1：**`getResourceUrl`和 的不同之处`getUrl`在于getResourceUrl在发生异常时会返回null。

**注意2：** `getUrl` AmazonS3 接口中没有定义方法。如果您使用标准构建器，则必须将对象转换为 AmazonS3Client。

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2012-06-11T06:52:31.837

给定存储桶和您在上传请求中指定的文件名，您可以自己解决。

例如，如果您的存储桶是`mybucket`并且您的文件名为`myfilename`：

```
https://mybucket.s3.amazonaws.com/myfilename 
```

根据您的存储桶所在的地区，该`s3`位会有所不同。例如，我使用东南亚地区，所以我的网址如下：

```
https://mybucket.s3-ap-southeast-1.amazonaws.com/myfilename 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-07-23T19:59:52.717

@hussachai 和 @Jeffrey Kemp 的答案非常好。但它们的共同点是返回的 url 是虚拟主机样式的，而不是路径样式的。有关 s3 url 样式的更多信息，可以参考[AWS S3 URL Styles](http://www.wryway.com/blog/aws-s3-url-styles/)。如果有些人想要生成路径样式 s3 url。这是步骤。基本上一切都与@hussachai 和@Jeffrey Kemp 的答案相同，只有一行设置更改如下：

```
AmazonS3Client s3Client = (AmazonS3Client) AmazonS3ClientBuilder.standard()
                    .withRegion("us-west-2")
                    .withCredentials(DefaultAWSCredentialsProviderChain.getInstance())
                    .withPathStyleAccessEnabled(true)
                    .build();

// Upload a file as a new object with ContentType and title specified.
PutObjectRequest request = new PutObjectRequest(bucketName, stringObjKeyName, fileToUpload);
s3Client.putObject(request);
URL s3Url = s3Client.getUrl(bucketName, stringObjKeyName);
logger.info("S3 url is " + s3Url.toExternalForm()); 
```

这将生成如下网址： [https ://s3.us-west-2.amazonaws.com/mybucket/myfilename](https://s3.us-west-2.amazonaws.com/mybucket/myfilename)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-09-20T17:32:46.513

对于 AWS 开发工具包 2+

```
String key = "filePath";
String bucketName = "bucketName";
PutObjectResponse response = s3Client
            .putObject(PutObjectRequest.builder().bucket(bucketName ).key(key).build(), RequestBody.fromFile(file));
 GetUrlRequest request = GetUrlRequest.builder().bucket(bucketName ).key(key).build();
 String url = s3Client.utilities().getUrl(request).toExternalForm(); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-05-25T13:05:51.133

同样，如果您想通过 s3Client 链接，您可以在下面使用。

```
System.out.println("filelink: " + s3Client.getUrl("your_bucket_name", "your_file_key")); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-10T14:49:19.810

有点旧，但对于将来偶然发现此问题的人来说仍然如此：

假设您已经编写了 CredentialProvider 和 AmazonS3Client，您可以用一行来完成。

它看起来像这样：

```
 String ImageURL = String.valueOf(s3.getUrl(
                                  ConstantsAWS3.BUCKET_NAME, //The S3 Bucket To Upload To
                                  file.getName())); //The key for the uploaded object 
```

如果您没有编写 CredentialProvider 和 AmazonS3Client 则只需在获取 URL 之前添加它们，如下所示：

```
 CognitoCachingCredentialsProvider credentialsProvider = new CognitoCachingCredentialsProvider(
        getApplicationContext(),
        "POOL_ID", // Identity pool ID
        Regions.US_EAST_1 // Region
); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-09-13T07:06:07.787

下面的方法将文件上传到存储桶中的特定文件夹中，并返回生成的上传文件的 url。

```
private String uploadFileToS3Bucket(final String bucketName, final File file) {
    final String uniqueFileName = uploadFolder + "/" + file.getName();
    LOGGER.info("Uploading file with name= " + uniqueFileName);
    final PutObjectRequest putObjectRequest = new PutObjectRequest(bucketName, uniqueFileName, file);
    amazonS3.putObject(putObjectRequest);
    return ((AmazonS3Client) amazonS3).getResourceUrl(bucketName, uniqueFileName);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-25T07:23:47.077

```
System.out.println("Link : " + s3Object.getObjectContent().getHttpRequest().getURI()); 
```

使用此代码，您可以检索已上传文件到 S3 存储桶的链接。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-29T03:58:24.153

如果您使用的是 AWS-SDK，则`data`返回的对象包含`data.Location`

```
const AWS = require('aws-sdk')
const s3 = new AWS.S3(config)

s3.upload(params).promise()
    .then((data)=>{
        console.log(data.Location)
    })
    .catch(err=>console.log(err))
```

* * *

## 回答 #10

> 赞同：-46
> 
> 时间：2012-10-07T13:49:49.100

要在上传之前公开文件，您可以使用以下`#withCannedAcl`方法`PutObjectRequest`：

```
myAmazonS3Client.putObject(new PutObjectRequest('some-grails-bucket',  'somePath/someKey.jpg', new    File('/Users/ben/Desktop/photo.jpg')).withCannedAcl(CannedAccessControlList.PublicRead))

String url = myAmazonS3Client.getUrl('some-grails-bucket',  'somePath/someKey.jpg').toString(); 
```

# wordpress - WordPress- 用户名自定义 URL

> ID：10975478
> 
> 赞同：1
> 
> 时间：2012-06-11T06:43:26.177
> 
> 标签：wordpress, .htaccess

我需要在 WORDPRESS 中将URL 从[http://www.example.com/profiles/?userid=59](http://www.example.com/profiles/?userid=59)更改为[http://www.example.com/profiles/username 。](http://www.example.com/profiles/username)如何在 url 中添加用户名而不是用户 ID。任何人都可以帮助我吗？谢谢你提供的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T05:43:24.763

如果您正在谈论作者/用户个人资料的网址，请将您的永久链接结构更改为您在下面看到的内容应该可以解决问题。

```
%category%/%postname% 
```

编辑：您可以在管理区域的设置 > 永久链接中执行此操作。抱歉，之前忘记包含这个了。

# asp.net-mvc - 在 ASP.NET MVC3 中的 SelectedListItem 中更改 Selected = true 按条件查看

> ID：10975482
> 
> 赞同：0
> 
> 时间：2012-06-11T06:43:32.217
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, drop-down-menu, asp.net-mvc-views

这是我的模型：

```
public class MyModel{
 public string Name { get; set; }
 public string listType { get; set; }
 public string SelectedItem { get; set; }
} 
```

我有一个部分的看法：

```
@model List<MyModel>
@{

SelectListItem iEqualTo = new SelectListItem { Text = "Equel To", Value = "EqualTo" };
SelectListItem iNotEqualTo = new SelectListItem { Text = "Not Equal To", Value = "NotEqualTo" };
SelectListItem iGreaterThan = new SelectListItem { Text = "Greater Than", Value = "GreaterThan" };
SelectListItem iLessThan = new SelectListItem { Text = "Less Than", Value = "LessThan" };
SelectListItem iBetween = new SelectListItem { Text = "Between", Value = "Between" };

List<SelectListItem> MyFirstList = new List<SelectListItem>() {
    iEqualTo, iNotEqualTo, iGreaterThan, iLessThan, iBetween
};

List<SelectListItem> MySecondList = new List<SelectListItem>() {
    iEqualTo, iNotEqualTo
};

}

@foreach(var item in Model) {

  if(item.listType =="Firsttype"){

   <span> @Html.DropDownList(item.Name , MyFirstList) </span>

  } else {

   <span> @Html.DropDownList(item.Name , MySecondList) </span>

  }
} 
```

所以我需要`Selected = true`在那个项目`List<SelectListItem>`中`DropDownList`哪个名称等于`MyModel.SelectedItem`？你的建议是什么？实际上，我的视图有更多`SelectListItem`，`List<SelectListItem>`并且由于某些限制，我无法将其`List<SelectListItem>`作为我的模型属性传递，我需要在视图中处理它。我认为通过 lambda inline 处理它，但我不知道是否可行，如下所示：`@Html.DropDownList(item.Name , MySecondList.each(a=> if (a.ToString() == item.SelectedItem) {a.Selected = true})`

有什么办法吗？如果我错误地使用内联 lambda 是否有其他方法来处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:54:08.780

您可以使用 SelectList，它有一个带有 IEnumerable 和一个 Object（选定值）的构造函数。

```
@Html.DropDownList(item.Name, new SelectList(MyFirstList, item.SelectedItem)); 
```

**编辑**

我想我在尝试在循环中使用 DropDownList 时遇到了你的问题。

您可以尝试使用此通用扩展方法（在静态“助手”类中）

```
public static IEnumerable<SelectListItem> ToSelectListItem<T, TValue, TText, TSelectedValue>(this IEnumerable<T> enumerable,
            Func<T, TText> text,
            Func<T, TValue> value,
            TSelectedValue selectedValue)
        {
            return enumerable.Select(item => new SelectListItem
            {
                Text = text(item).ToString(),
                Value = value(item).ToString(),
                Selected = value(item).Equals(selectedValue)
            }).AsEnumerable();
        } 
```

进而

```
@Html.DropDownList(item.Name, MyFirstList.ToSelectListItem(m => m.Text, m => m.Value, item.SelectedItem) 
```

# row - 如何在行更改时更新 slickgrid 的数据？

> ID：10975483
> 
> 赞同：0
> 
> 时间：2012-06-11T06:43:39.063
> 
> 标签：row, slickgrid

在对整行进行更改后，我想更新everyrowchange上的slickgrid，我希望事件触发更新。

有人可以建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:02:08.370

SlickGrid 没有编辑行的概念，只编辑单个单元格。如果用户连续编辑多个单元格，您将如何决定何时完成对整行的编辑？

如果您在最后一列被编辑时认为该行已完成，您可以为最后一列的单元格编辑设置事件处理程序并做出适当的反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:55:40.400

您可以保留一组“脏行 ID”。然后，当*所选行*更改时，循环遍历您的*脏行 ID*数组并执行您的操作。

# python - Django中的对象级级联权限

> ID：10975486
> 
> 赞同：6
> 
> 时间：2012-06-11T06:43:50.143
> 
> 标签：python, django, permissions, cascade

Django-guardian 和 django-permissions 等项目使您能够拥有对象级别的权限。但是，如果两个对象通过父子关系相互关联，那么除非另有说明，否则子对象有没有办法从父对象继承权限？例如，除非用户明确为子文件夹分配不同的权限，否则 a`subfolder`应该继承权限。`parent folder`

使用 Django，特别是 Django-guardian 模块来完成此任务的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T06:50:09.357

当您检查用户是否对对象具有权限时，您可以检查它是否对其父对象具有权限。

您甚至可能想要创建自己的函数，例如：

```
def your_has_perm(user, perm, obj):
    has = user.has_perm(perm, obj)

    if not has and hasattr(obj, 'parent'):
        return your_has_perm(user, perm, obj.parent)

    return has 
```

这应该遍历父母，直到找到父母的许可或返回 False。

# php - PHP邮件功能后将电子邮件放入“已发送”文件夹

> ID：10975488
> 
> 赞同：1
> 
> 时间：2012-06-11T06:43:57.793
> 
> 标签：php, email, gmail, imap

我目前正在做一个项目，我正在使用 PHP 的 imap_open() 访问电子邮件帐户。我知道我可以使用 mail() 函数使用 PHP 发送电子邮件。

但是，我想知道，在我发送一封电子邮件之后，是否可以使用任何 PHP 的 imap 函数将该电子邮件放入电子邮件帐户的已发送文件夹中。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:55:43.543

这更多的是电子邮件帐户设置，以保存发送到已发送帐户文件夹的电子邮件。

您可以尝试使用已配置为保存发送到已发送文件夹的电子邮件的外部邮件，例如 Gmail [http://www.vulgarisoip.com/files/phpgmailer.zip](http://www.vulgarisoip.com/files/phpgmailer.zip)

例子 ：

```
require_once('/phpgmailer/class.phpgmailer.php');
$mail = new PHPGMailer();
$mail->Username = 'user@domain.com'; 
$mail->Password = 'password';
$mail->From = 'user@domain.com'; 
$mail->FromName = 'User Name';
$mail->Subject = 'Subject';
$mail->AddAddress('myfriend@domain.com');
$mail->Body = 'Hey buddy, here\'s an email!';
$mail->Send(); 
```

# python - Matplotlib 子进程/后端问题

> ID：10975491
> 
> 赞同：3
> 
> 时间：2012-06-11T06:44:02.487
> 
> 标签：python, apache, matplotlib, subprocess, backend

我想从作为子进程运行的脚本（由来自 apache 服务器的 python cgi-script 启动）的脚本中使用 matplotlib 绘制（即编写文件），但不知何故，要么没有创建情节，要么服务器崩溃，具体取决于我使用的后端。我认为我应该使用“agg”，并且在这种情况下创建了情节，但是服务器随后崩溃（内部服务器错误）。这是日志：

```
AH01215: /usr/lib/pymodules/python2.7/gtk-2.0/gtk/__init__.py:57: GtkWarning: could not open display, referer: http://localhost/
AH01215:   warnings.warn(str(e), _gtk.Warning), referer: http://localhost/
AH01215: /usr/local/lib/python2.7/dist-packages/matplotlib/backends/backend_gtk.py:49: GtkWarning: IA__gdk_cursor_new_for_display: assertion `GDK_IS_DISPLAY (display)' failed, referer: http://localhost/
AH01215:   cursors.MOVE          : gdk.Cursor(gdk.FLEUR),, referer: http://localhost/
malformed header from script 'submit.cgi': Bad header: ['/home/user/..., referer: http://localhost/ 
```

cgi-script 目前不依赖于子进程的输出，所以我并没有真正得到 bad-header 警告（不启动子进程时没有这样的问题）。情节脚本的开头如下所示：

```
import string
import sys
import os
from math import *
import tempfile
os.environ['MPLCONFIGDIR'] = tempfile.mkdtemp()
import matplotlib
matplotlib.use('Agg') 
import matplotlib.pyplot as matplot
from matplotlib import mpl 
```

到目前为止，我只使用 matplotlib 进行了相当简单的绘图，而不是作为子进程，所以我非常感谢你的帮助。

PS：我使用的是 ubuntu 11.04 和 apache2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:05:50.467

我怀疑您的绘图脚本输出内容到`stdout`apache 将其解释为它期望从 cgi 获得的标头。

当您使用[subprocess](http://docs.python.org/library/subprocess.html)调用脚本时，将输出重定向到 dev null，如下所示

```
from subprocess import Popen, STDOUT
import os

p = Popen(["ls","-l"], stdout=open(os.devnull, "w"), stderr=STDOUT) 
```

# jquery - 自定义 JQuery 自动完成以在列表前后添加静态 HTML 内容

> ID：10975492
> 
> 赞同：1
> 
> 时间：2012-06-11T06:44:13.433
> 
> 标签：jquery, autocomplete, customization, jquery-autocomplete

嘿，我需要在使用自动完成功能动态生成的列表之前和之后添加 HTML 内容........以下是我的代码片段..我尝试过追加、前置`li`但没有运气..... .而且我还需要将列表中的项目数限制为最多 5 个。我该怎么做？

```
$(document).ready(function () {
               $("#autocomplete").autocomplete({

                   source: source,
                   select: function (event, ui) {

                       window.location.href = ui.item.value;
                       this.autohide();
                   }

               })
                 .data("autocomplete")._renderItem = function (ul, item) {
                     $("<li></li>")
                 .data("item.autocomplete", item)
                 .append("<a>" + "<img src='" + item.imgsrc + "' /><strong>" + item.label + "</strong></a>")
                 .appendTo(ul)                        
                 };

           }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:15:01.367

看看这个[jqfaq.com](http://jqfaq.com/how-to-add-some-items-to-the-top-and-bottom-of-the-matching-list-in-the-dropdown/)链接。这将向您解释如何在自动完成结果列表的开始和结束处添加文本。

查看列表中您可能感兴趣的其他与自动完成相关的常见问题解答。

# qt - qdatawidgetmapper 用于显示 qicons？

> ID：10975497
> 
> 赞同：2
> 
> 时间：2012-06-11T06:45:02.527
> 
> 标签：qt, qicon

我目前正在尝试创建一个小部件，它允许我显示给定工具的属性。我有一个包含所有工具的模型，我想创建的基本上是一个组合框，它允许选择一个工具，然后使用图标显示工具属性。

我的模型已经定义了不同的角色，例如装饰和显示角色，但我想知道如何构建一个只对模型的装饰角色做出反应的小部件。

提前非常感谢唐尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-05T17:27:43.937

试一试`QLabel`

具体映射其`pixmap`属性：

```
myMapper.addMapping(myLabel, itsSection, "pixmap") 
```

# import - 使用单元格值导入到 Excel 文本文件

> ID：10975498
> 
> 赞同：0
> 
> 时间：2012-06-11T06:45:03.247
> 
> 标签：import, excel, vba

我有一些 .txt 输出文件，我想在 excel 中导入。

理想情况下，我想使用 Sheet1 作为索引；我将在其中写下标题、工作表名称以及 .txt 文件的路径和名称。宏应该创建一个名为单元格的 newSheet，并在该工作表中导入相应的 .txt 文件。

我一直在尝试记录宏并更改 VBA 代码，但到目前为止只是失败。

```
With ActiveSheet.QueryTables.Add(Connection:= _
"TEXT;C:\Documents and Settings\UserXP\My Documents\My Dropbox\CIPPEC\1-MIRA\Procesamiento base\OEDE\Tablas\trim\q_employ_pcia_23.txt" _
, Destination:=Range("$A$1")).Name = "q_employ_pcia_23" 
```

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:38:44.523

```
With ActiveSheet.QueryTables.Add(Connection:= _
"TEXT;C:\Documents and Settings\UserXP\My Documents\My Dropbox\CIPPEC\1-MIRA\Procesamiento base\OEDE\Tablas\trim\q_employ_pcia_23.txt" _
, Destination:=Range("$A$1"))
.Name = "q_employ_pcia_23"
.Refresh BackgroundQuery:=False
End With
ActiveSheet.Name = "q_employ_pcia_23" 
```

工作以将导入导入新工作表，并且您还想命名新工作表。

# java - 带有 -, ::, ( 和 ) 的正则表达式

> ID：10975505
> 
> 赞同：28
> 
> 时间：2012-06-11T06:45:26.583
> 
> 标签：java, regex

我需要拆分字符串

> (age-is-25::OR::last_name-is-qa6)::AND::(age-is-20::OR::first_name-contains-test)

进入

> string[0] = (age-is-25::OR::last_name-is-qa6)
> 
> 字符串[1] = AND
> 
> string[2] = (age-is-20::OR::first_name-contains-test)

我尝试编写了这么多正则表达式，但没有按预期工作。

使用以下正则表达式，返回 2 但将结果分配给数组列表的 Matcher.groupCount() 返回 null 作为元素。

> 模式 pattern = Pattern.compile("(\\)::)?|(::\\()?");

我尝试使用 ):: 或 ::( 拆分它。

我知道正则表达式看起来太愚蠢了，但作为初学者，这是我能写的最好的。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-11T07:02:29.813

您可以使用正向前瞻和后向来匹配第一个和最后一个括号。

```
String str = "(age-is-25::OR::last_name-is-qa6)::AND::(age-is-20::OR::first_name-contains-test)";

for (String s : str.split("(?<=\\))::|::(?=\\()"))
    System.out.println(s); 
```

输出：

```
(age-is-25::OR::last_name-is-qa6)
AND
(age-is-20::OR::first_name-contains-test) 
```

* * *

*但是请注意：您似乎正在解析某种递归语言。正则表达式不擅长这样做。如果您正在进行高级解析，我建议您查看其他解析方法。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T06:55:31.837

对我来说，你的压力很大一部分来自于在你的搜索词中转义特殊字符的需要。我强烈建议不要手动转义特殊字符，而是使用[Pattern.quote(...)](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)进行转义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T07:12:16.067

这应该有效

```
 "(?<=\\))::|::(?=\\()" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-11T06:50:23.797

```
textString.split("\\)::|::\\(") 
```

应该管用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-11T06:51:07.000

这应该适合你。

```
\)::|::\( 
```

# git - 创建存储库时出现问题？

> ID：10975509
> 
> 赞同：2
> 
> 时间：2012-06-11T06:45:39.507
> 
> 标签：git, github, repository, bitbucket

嗨，我是 Bitbucket 的新手。

1.  一开始，在设置帐户时，我被要求输入电子邮件 ID...当时我必须输入我的电子邮件 ID 或与我共享代码的所有人的电子邮件 ID。

2.  在设置我的代码存储库时，我正在使用以下步骤：

    ```
    mkdir ABCproject
    cd ABCproject
    git init
    touch README
    git add README
    git commit -m 'first commit'
    git remote add origin https://bitbucket.com/USERabc/rdf-project.git
    git push -u origin master 
    ```

    但是在这些步骤中，我没有得到我必须将我正在共享的代码放在哪里。我必须自己把我的代码放在 ABCproject 文件夹中吗？

    该声明`git push -u origin master`给了我错误：`fatal: https://bitbucket.com/USERabc/ABCproject/ABCproject.git/info/refs not found: did you run git update-server-info on the server?"`

3.  推送回购..我使用以下命令，

    ```
    git remote add origin git@github.com:USERabc/ABCproject.git
    $ git push origin master 
    ```

    它仍然给我同样的错误......（错误与上面相同）。上面的语句是什么意思。

我是位桶的新手。有人可以帮助我吗？？？（我的代码存储在我的电脑上，我想与我的朋友分享代码。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:18:27.567

如果您使用的是 Bitbucket，则需要阅读 Bitbucket 说明，而不是来自 Github 的内容。[请参阅此处](https://confluence.atlassian.com/display/BITBUCKET/Set+up+Git+and+Mercurial)的步骤。

它们并没有太大的不同，但您需要添加您的来源以指向 bitbucket repo url，而不是来自 github 的东西。

至于您将代码放在哪里的问题，您要么

*   为源代码管理创建一个新文件夹并将您的文件放在那里，或者
*   使用您拥有代码的现有文件夹，并在该文件夹中执行“git init”和“git add”命令

你可能想做后者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:18:37.880

# asp.net-mvc - 从 facebook 在 asp.net mvc 站点中获取结果

> ID：10975510
> 
> 赞同：0
> 
> 时间：2012-06-11T06:46:09.673
> 
> 标签：asp.net-mvc, facebook

我有一个 asp.net MVC 站点，并且有一个用户搜索功能。如果在搜索框中输入了姓名的用户，我希望我也应该从 facebook 获取搜索结果。在搜索中，我想要用户照片和全名。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:33:13.477

您可以使用 Graph API 或 FQL 为登录的用户取回此信息。对于您的 ASP.net 应用程序，您应该在服务器端进行搜索，以便它在您的其他搜索结果中内嵌显示。查看[https://developers.facebook.com/docs/authentication/server-side/](https://developers.facebook.com/docs/authentication/server-side/)以了解服务器端身份验证流程的描述。查看[https://developers.facebook.com/docs/reference/api/user/#friends](https://developers.facebook.com/docs/reference/api/user/#friends)以获取有关如何获取登录用户的好友列表的一些示例。示例：[https ://developers.facebook.com/tools/explorer/?method=GET&path=me/friends?fields=picture](https://developers.facebook.com/tools/explorer/?method=GET&path=me/friends?fields=picture)

# c++ - 访问说明符的c++实现

> ID：10975513
> 
> 赞同：3
> 
> 时间：2012-06-11T06:46:45.393
> 
> 标签：c++, oop

据我了解，C++ 类中的非静态数据成员被打包到 C 风格的结构中。为了简化讨论而忽略虚函数和继承，在这种方案中如何强制执行访问说明符？

说一堂课：

```
class Object
    {
public:
    int i1;
    int i2;
private:
    char i3;
    int i4;
    }; 
```

翻译为：

```
struct { 
  int i1;
  int i2;
  char i3;
  int i4;
} 
```

c++如何保证私有成员`i3`and`i4`不能在类外访问但是`i1`and`i2`可以呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T07:00:07.420

C++ 有（一些）安全防护措施来防止墨菲，而不是马基雅维利。

这意味着**在编译时**`const`检查,`volatile`和访问限定符，但即使这样也可以绕过（使用各种技巧）。

 **所以... C++ 不需要*实现*保护方案。如果程序已编译，则认为它是正确的（使用那些限定符）并且将在没有运行时检查的情况下执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T06:49:29.637

It doesn't. Go ahead, do a `reinterpret_cast` and manually index the pointer. This is for the same reason that both C and C++ allow for `const` to be cast away.

However, generally speaking, it's an idiotic idea to do so and C++ effectively enforces access modifiers by simply checking the modifier when you access in the normal way.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T16:04:24.063

C++ 是一种静态类型语言。同样，C++ 中的许多概念也是静态检查的。具体来说，访问说明符在编译时进行检查。

该标准提供了一些关于类成员在内存中的布局方式的保证。最有用的是，在同一访问说明符部分中一起指定的成员将按指定的顺序可用。（例如，这个特性对于访问网络数据包非常有用。）

要回答您的问题，结构没有“翻译”（结构是退化的类，其中默认访问是公共的而不是私有的）。访问说明符在编译时强制执行。访问说明符没有运行时强制执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T06:49:15.363

What's your source? I think it refers to how the objects are represented in memory, but it's the compiler, not the run-time, that deals with access specifiers.

In memory, a `class` *might* look the same as a `struct`, but to the compiler they do not.

Also, the two don't have to be equivalent even in memory (much like they are not equivalent for the compiler). The compiler can re-arrange the members, as long as it keeps those with no interleaving access specifiers grouped together. So, in memory,

```
class Object {  
public: 
   int i1; 
   int i2; 
private: 
   char i3; 
   int i4; 
}; 
```

*could* theoretically be represented as

```
struct {
   char i3;
   int i4;
   int i1;
   int i2;
} 
```

Note that I'm only talking about the memory layout here. The *actual* `struct` equivalent of your class is:

```
struct Object {  
private:
public: 
   int i1; 
   int i2; 
private: 
   char i3; 
   int i4; 
}; 
```**

# r - 如何将ggplot标题与窗口而不是绘图网格对齐？

> ID：10975518
> 
> 赞同：12
> 
> 时间：2012-06-11T06:47:35.767
> 
> 标签：r, ggplot2

在`ggplot2`0.9 版中，情节标题的对齐行为发生了变化。而在 v0.8.9 中，对齐是相对于绘图窗口的，而在 v0.9 中，对齐是相对于绘图网格的。

现在，虽然我大多同意这是可取的行为，但我经常有很长的情节标题。

**问题：有没有办法将绘图标题与绘图窗口而不是绘图网格对齐？**

我正在寻找一种可以自动对齐绘图的解决方案。换句话说，使用手动对齐`hjust`对我不起作用（我在每个项目的数百个地块上运行它）。

任何`grid`直接使用的解决方案也是可以接受的。

* * *

一些示例代码和绘图：（注意标题如何在窗口右侧被截断）。

```
dat <- data.frame(
  text = c(
    "It made me feel very positive to brand X", 
    "It was clear and easy to understand",
    "I didn't like it al all"),
  value=runif(3)
)
library(ggplot2)
ggplot(dat, aes(text, value)) + 
  geom_bar(stat="identity") +
  coord_flip() +
  opts(title="Thinking about the ad that you've just seen, do you agree with the following statements? I agree that...") +
  theme_bw(16) 
```

* * *

![在此处输入图像描述](../Images/5dd6c79c1f7b4f720ac686dcb560666d.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-11T08:05:42.397

在 ggplot2 0.9 中，您可以轻松更改布局。

```
p <- ggplot(dat, aes(text, value)) + 
  geom_bar(stat="identity") +
  coord_flip() +
  opts(title="Thinking about the ad that you've just seen,\ndo you agree with the following statements?\nI agree that...") +
  theme_bw(16)

gt <- ggplot_gtable(ggplot_build(p))
gt$layout[which(gt$layout$name == "title"), c("l", "r")] <- c(1, max(gt$layout$r))
grid::grid.draw(gt) 
```

也许，在未来的版本中，ggplot2 将提供一致的界面来调整布局。

![在此处输入图像描述](../Images/8a505cb672ac270d2f0a4352ba19c013.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-06T13:57:11.060

这是ggplot2 2.2.1下的解决方案。一个函数将标题文本对象排列在 ggplot 的顶部中心。

```
library(gridExtra)

# A function that puts a title text object centered above a ggplot object "p"
add_centered_title <- function(p, text){
    grid.arrange(p, ncol = 1, top = text)
}

# Create the chart from your sample data
 test_chart <- ggplot(dat, aes(text, value)) + 
  geom_bar(stat="identity") +
  coord_flip() +
  theme_bw(16)

# Usage:
add_centered_title(test_chart,
                   "Thinking about the ad that you've just seen, do you agree with the following statements? I agree that...")

# Or you can pipe a ggplot into this function using the %>% dplyr pipe:
library(dplyr)
test_chart %>%
  add_centered_title("Thinking about the ad that you've just seen, do you agree with the following statements? I agree that...") 
```

# php - In Android How to show message when data is Changed into Database?

> ID：10975521
> 
> 赞同：0
> 
> 时间：2012-06-11T06:47:42.020
> 
> 标签：php, android, mysql, database

I need to show the message in Android Java Class when the Data is Changed into the Database. What method has to be used to do this??

Please help me , I dont have any Idea about this.

This is my PHP Code:

```
 <?php
    $tableid=$_POST['Tableid'];
    $status=$_POST['Status'];
    include '../../dbconnect.php';
    if($status=='All')
    {
    $oidquery="select orderid, orderstatus from din_orders where tableid=$tableid  &&      orderstatus!='Pending'";
    }
    else
    {
     $oidquery="select orderid,orderstatus from din_orders where tableid=$tableid &&        orderstatus='$status'";
    }
   $result=mysql_query($oidquery);
   while($ordersrow=mysql_fetch_object($result))
    {
   $ordersarray[]=$ordersrow;
    }
   echo json_encode(array('orders'=>$ordersarray));
   ?> 
```

For Example: In a Table "OrderStatus" Initially It shows as "Pending" later manually I will change "Pending" as "Delivered". When this change takes place in Database I should get a message in Android Java Class as "Items Delivered".

Here is my Android Java Code:

```
 public void ordersdisplay() {
    String selectedstatus1 = (String) status.getSelectedItem();
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
    nameValuePairs.add(new BasicNameValuePair("Tableid", tableid1));
    nameValuePairs.add(new BasicNameValuePair("Status", selectedstatus1));
    InputStream is = null;
    String result = "";
    JSONObject JArray = null;
    try {
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url + "order_status.php");
        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpClient.execute(httpPost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    } catch (Exception e) {
        Log.e("log", "Error in Connection" + e.toString());
        Toast.makeText(getApplicationContext(), "Error in Connection",
                Toast.LENGTH_SHORT).show();

    }
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = "";
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
    } catch (Exception e) {
        // TODO: handle exception
    }

    try {

        JArray = new JSONObject(result);
        JSONArray jsonArray = JArray.getJSONArray("orders");

        for (int i = 0; i < jsonArray.length(); i++) {
            HashMap<String, String> map = new HashMap<String, String>();
            JSONObject jsonObject = jsonArray.getJSONObject(i);

            map.put("orders", String.valueOf(i));
            map.put("orderid", jsonObject.getString("orderid"));
            map.put("status", jsonObject.getString("orderstatus"));

            mylist.add(map);
        }
    } catch (JSONException e) {
        Toast.makeText(getApplicationContext(), "No Order to Display",
                Toast.LENGTH_LONG).show();

        Log.e("log_tag", "Error parsing data " + e.toString());
    }
    ListAdapter adapter = new SimpleAdapter(this, mylist,
            R.layout.vieworder, new String[] { "orderid", "status" },
            new int[] { R.id.item_title, R.id.item_subtitle });

    setListAdapter(adapter);

    final ListView lv = getListView();
    lv.setTextFilterEnabled(true);
    lv.setOnItemClickListener(new OnItemClickListener() {
        public final void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            @SuppressWarnings("unchecked")
            HashMap<String, String> o = (HashMap<String, String>) lv
                    .getItemAtPosition(position);

            String OrderID = o.get("orderid");
            String OrderStatus = o.get("status");
            Intent intent = new Intent(getApplicationContext(),
                    Din_Ord_ItemDisplay.class);
            intent.putExtra("orderid", OrderID);
            intent.putExtra("waitername", waitername);
            intent.putExtra("orderstatus", OrderStatus);
            intent.putExtra("tableid", tableid1);
            intent.putExtra("url", url);

            startActivity(intent);

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:02:47.370

如果您在 SQLite 数据库中插入值，如下所示

```
ContentValues values = new ContentValues();
values.put(DBHelper.BOOK_TITLE,"Android");
values.put(DBHelper.BOOK_AUTHOR,"ABC");
database = dbHelper.getWritableDatabase();
database.insert(DBHelper.TABLE_NAME, null, values); 
```

**这里 database.insert 返回新插入行的行 ID，如果发生错误，则返回 -1。**

因此，您可以进行以下验证。

```
if (database.insert(DBHelper.TABLE_NAME, null, values) != -1)
{
  Toast.makeText(this, "Write Success", Toast.LENGTH_SHORT).show();
}
else
{
 Toast.makeText(this, "Write Failure", Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:55:37.243

如果插入失败，您很可能会收到错误消息。但是，如果您想仔细检查：只需在数据库中查询新的唯一数据。如果您的 Cursor 不返回空，则插入成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:32:51.467

看看 ipush.me 或 pushto.me 服务简单的 php 函数，如果插入/更新成功，您可以将其放入 IF 语句包装器中。

我用它来检查我的 mysql 数据库是否可用。

# jquery - 点击事件在带有触摸事件的 iPad 上不起作用

> ID：10975524
> 
> 赞同：1
> 
> 时间：2012-06-11T06:47:49.140
> 
> 标签：jquery, ipad, html, touch

我在页面链接上使用点击事件。它在 iPad 的[Safari](http://en.wikipedia.org/wiki/Safari_%28web_browser%29)上运行良好，但是当我在同一页面上使用触摸事件时，点击事件停止工作；只有触摸事件在 iPad 上有效。

点击事件：

```
 link.onclick = onLinkClick; 
```

触摸事件：

```
$('#sdiv').bind({
    'touchstart': function (e) {
        onTouchStart(e, sdiv);
    }
});

$('#sdiv').bind({
    'touchend': function (e) {
        onTouchEnd(e);
    }
});

$('#sdiv').bind({
    'touchmove': function (e) {
        onTouchMove(e);
    }
});

$('#sdiv').bind({
    'touchcancel': function (e) {
        onTouchCancel(e);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:57:44.337

最后，我区分了两个平台，**iPad**和**桌面**。使用“ **navigator.platform** ”，如果是 iPad，则**触摸事件**有效，否则为**Click 事件**。

```
 var platform = navigator.platform; 

 if( platform == 'iPad') { _link.ontouchend = onLinkClick;} 

  else { _link.onclick = onLinkClick; } 
```

谢谢大家，

# javascript - 如何将弹出窗口重定向到正常加载的页面？

> ID：10975526
> 
> 赞同：0
> 
> 时间：2012-06-11T06:48:10.650
> 
> 标签：javascript, redirect, popup, thickbox

我正在尝试实现这样的事情：

1.  单击链接，将打开一个弹出窗口，类似于注册页面。

2.  提交时，如果数据未填写，将生成错误消息。

但是在成功提交后，它将被重定向到之前在浏览器中打开的主页。

我使用[厚框](http://jquery.com/demo/thickbox/)作为弹出功能。在使用以下代码重定向时：

```
<meta http-equiv="refresh" content="1;url=http://localhost/cgi-bin/Ajax/index.pl/"> 
```

主页正在被重定向，但在弹出窗口本身中，我希望弹出窗口在成功提交后消失并且主页被刷新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T08:09:38.103

我假设您使用的是来自[thickbox](http://jquery.com/demo/thickbox/)网站的iFrame 解决方案。在我看来，您必须`modal=true`在 URL 中设置部分并`tb_remove()`在登录完成后使用该功能。AJAX 版本也是如此。

> 或者，您可以将 modal=true 添加到查询字符串（例如 ?KeepThis=true&TB_iframe=true&height=400&width=600&modal=true），以便关闭 ThickBox 需要从 ThickBox iframe 中调用 tb_remove() 函数（self.parent.tb_remove ())。有关示例，请参见 iframe 演示，您必须单击“确定”以关闭厚框。

因此，您应该将类​​似的内容添加到您的 javascript（从 perl iirc 打印）。

```
<script type="text/javascript">
tb_remove();
</script>
<meta http-equiv="refresh" content="1;
      url=http://localhost/cgi-bin/Ajax/index.pl/"> 
```

请注意，我没有对此进行测试，我只是参考文档。

# symfony - 存储上传文件的最安全方式

> ID：10975529
> 
> 赞同：7
> 
> 时间：2012-06-11T06:48:42.663
> 
> 标签：symfony

我将上传的文件存储在 web 目录中：

```
//src/Acme/CocoBundle/Entity/CocoFromTheNorth.php
/**
 * @ORM\Column(type="string", length=255, nullable=true)
 */
public $path;

protected function getUploadRootDir()
{
    return __DIR__.'/../../../../web/'.$this->getUploadDir();
}

protected function getUploadDir()
{

    return 'uploads/documents';
} 
```

这是一个好习惯吗？将上传的文件保存在 web 目录之外，这样用户就不能直接访问它们不是更好吗？

我是否认为最好的方法是将上传的文件存储在网络根目录之外？那么哪里会是最好的呢？或者我如何配置 Web 服务器以拒绝访问上传目录？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T06:59:53.493

最好将上传的文件保存在 web 目录之外，并`X-SendFile`在使用 PHP 建立访问权限后用于提供这些文件。

我在这里概述了类似的内容：[如何在服务器上安全地存储文件](https://stackoverflow.com/questions/10530001/how-to-securely-store-files-on-a-server/10530250#10530250)

在这里：[缓存由 PHP 动态创建的 HTTP 响应](https://stackoverflow.com/questions/10596116/caching-http-responses-when-they-are-dynamically-created-by-php/10596231#10596231)

# entity-framework - 如何在实体框架中禁用插入？

> ID：10975535
> 
> 赞同：0
> 
> 时间：2012-06-11T06:48:56.293
> 
> 标签：entity-framework, domain-driven-design

有什么办法可以禁用在实体框架中插入实体？

我正在使用 DDD，并且在特定的有界上下文中，用户表的某些必需的数据库字段没有意义（在此上下文中）。所以，我想从用户实体中删除它们，但这样做我失去了将**新**用户保存到数据库的能力。没关系，因为在这种情况下，我不应该创建用户。

我的第一个想法是禁用用户实体上的插入（但允许更新）。

可行吗？或者，对于这种情况还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:16:08.820

您不能禁用插入，但您可以查找是否有任何实体被标记为插入并在这种情况下触发异常。

进行此类处理的最佳位置是覆盖`SaveChanges`方法：

```
public override int SaveChanges(SaveOptions options)
{
    if (ObjectStateManager.GetObjectStateEntries(EntityState.Added)
                          .Where(e => !e.IsRelationship)
                          .Select(e => e.Entity)
                          .OfType<User>()
                          .Any())
    {
        throw new InvalidOperationException("User cannot be inserted");
    }

    return base.SaveChanges(options);
} 
```

这是运行时行为，但因为 EF 在修改操作之间没有区别（都在 single 内`SaveChanges`），所以您无法在编译时检测到插入。

# ios5 - Issue with adding sudzc.xcode framework to my application

> ID：10975536
> 
> 赞同：0
> 
> 时间：2012-06-11T06:49:01.357
> 
> 标签：ios5, xcode4.2

I am using web service in my IOS application. Its all the WSDL calls. So i used Sudzc.com to generate all the service call Soap requests. Here my problem is how to add the generated sudzc.xcode framework to my application. Someone told me like we can add generated .xcode framework to our application. Can any one please suggest me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:06:10.707

很简单，请按照sudzc页面上的电影。它也帮助了我。

[这里是电影的链接： http](http://sudzc.com/Tutorial/ObjC.mov) ://sudzc.com/Tutorial/ObjC.mov

对于自动引用计数，从下拉列表中选择它。

# openssl - ASN1_TIME 到 time_t 的转换

> ID：10975542
> 
> 赞同：18
> 
> 时间：2012-06-11T06:49:38.540
> 
> 标签：openssl, ssl-certificate, asn.1

如何转换`ASN1_TIME`为`time_t`格式？我想将返回值转换`X509_get_notAfter()`为秒。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-29T14:33:15.300

时间在内部存储为字符串，格式为`YYmmddHHMMSS`or `YYYYmmddHHMMSS`。

在字符串的末尾有几分之一秒和时区的空间，但现在让我们忽略它，并有一些（未经测试的）代码。

***注意***：另请参阅下面 Bryan Olson 的回答，其中讨论了由于`i++`'s 导致的未定义行为。另请参阅 Seak 的答案，它消除了未定义的行为。

```
static time_t ASN1_GetTimeT(ASN1_TIME* time)
{
    struct tm t;
    const char* str = (const char*) time->data;
    size_t i = 0;

    memset(&t, 0, sizeof(t));

    if (time->type == V_ASN1_UTCTIME) /* two digit year */
    {
        t.tm_year = (str[i++] - '0') * 10 + (str[++i] - '0');
        if (t.tm_year < 70)
        t.tm_year += 100;
    }
    else if (time->type == V_ASN1_GENERALIZEDTIME) /* four digit year */
    {
        t.tm_year = (str[i++] - '0') * 1000 + (str[++i] - '0') * 100 + (str[++i] - '0') * 10 + (str[++i] - '0');
        t.tm_year -= 1900;
    }
    t.tm_mon = ((str[i++] - '0') * 10 + (str[++i] - '0')) - 1; // -1 since January is 0 not 1.
    t.tm_mday = (str[i++] - '0') * 10 + (str[++i] - '0');
    t.tm_hour = (str[i++] - '0') * 10 + (str[++i] - '0');
    t.tm_min  = (str[i++] - '0') * 10 + (str[++i] - '0');
    t.tm_sec  = (str[i++] - '0') * 10 + (str[++i] - '0');

    /* Note: we did not adjust the time based on time zone information */
    return mktime(&t);
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-08-26T16:22:35.213

从 openssl 代码来看，这似乎是一个坏主意：

```
/*
 * FIXME: mktime assumes the current timezone
 * instead of UTC, and unless we rewrite OpenSSL
 * in Lisp we cannot locally change the timezone
 * without possibly interfering with other parts
 * of the program. timegm, which uses UTC, is
 * non-standard.
 * Also time_t is inappropriate for general
 * UTC times because it may a 32 bit type.
 */ 
```

请注意，您可以使用**ASN1_TIME_diff()**来获取两个 ASN1_TIME* 之间的天数/秒数。如果将 NULL 作为 ASN1_TIME *from 传递，则可以得到与当前时间的差异。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-06-05T17:00:39.900

好吧，我不知道其余的，但是对于 ASN1_TIME 为 UTCTime 格式的情况，该代码是错误的：YYMMDDHHMMSSZ。

我尝试并返回错误的值，即使从 ++i 到 i++ 的更正，但是……该代码不是良好编码的示例。

我设法修复它，它是 char 类型的总和：

```
static time_t ASN1_GetTimeT(ASN1_TIME* time){
    struct tm t;
    const char* str = (const char*) time->data;
    size_t i = 0;

    memset(&t, 0, sizeof(t));

    if (time->type == V_ASN1_UTCTIME) {/* two digit year */
        t.tm_year = (str[i++] - '0') * 10;
        t.tm_year += (str[i++] - '0');
        if (t.tm_year < 70)
            t.tm_year += 100;
    } else if (time->type == V_ASN1_GENERALIZEDTIME) {/* four digit year */
        t.tm_year = (str[i++] - '0') * 1000;
        t.tm_year+= (str[i++] - '0') * 100;
        t.tm_year+= (str[i++] - '0') * 10;
        t.tm_year+= (str[i++] - '0');
        t.tm_year -= 1900;
    }
    t.tm_mon  = (str[i++] - '0') * 10;
    t.tm_mon += (str[i++] - '0') - 1; // -1 since January is 0 not 1.
    t.tm_mday = (str[i++] - '0') * 10;
    t.tm_mday+= (str[i++] - '0');
    t.tm_hour = (str[i++] - '0') * 10;
    t.tm_hour+= (str[i++] - '0');
    t.tm_min  = (str[i++] - '0') * 10;
    t.tm_min += (str[i++] - '0');
    t.tm_sec  = (str[i++] - '0') * 10;
    t.tm_sec += (str[i++] - '0');

    /* Note: we did not adjust the time based on time zone information */
    return mktime(&t);
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-01-03T00:58:15.677

我不得不不同意简和杰克的观点。有人实际上在我工作的地方复制并使用了给定的代码，但它失败了。这就是为什么，从 C99 标准：

> 在前一个和下一个序列点之间，对象的存储值最多只能通过表达式的评估修改一次。”——ISO/IEC 9899:1999，“Programming Languages - C”，第 6.5 节，第 1 节。

编译给定代码时，gcc（4.1.2 版）说了九次，

> 警告：对“i”的操作可能未定义。

代码具有未定义的行为。我实际看到的错误是“13”年被读作 11。那是因为：

> 后缀 ++ 运算符的结果是操作数的值。得到结果后，操作数的值递增。[...] 更新操作数存储值的副作用应发生在前一个序列点和下一个序列点之间。-- 同上，第 6.5.2.4 节，第 2 条。

str[i++] 的两个实例都在：

> t.tm_year = (str[i++] - '0') * 10 + (str[i++] - '0');

读取“13”中的“1”，因为它们都发生在 i 更新之前。多次更新 i 的所有行都有相同的问题。

最简单的解决方法是去掉“i”，并通过一次调用 sscanf() 替换所有这些行。

即使有了这个修复，我也不喜欢这个代码。除了忽略时区后缀之外，它不会检查错误或意外值。证书是一种安全机制，安全码对健壮性有严格的要求。您的程序未正确处理的极端情况是您的攻击者填充的情况。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-20T15:19:36.087

Jan 的回答主要适用于这种情况，但是，累加器`i`应始终使用`i++`：

```
static time_t ASN1_GetTimeT(ASN1_TIME* time)
{
    struct tm t;
    const char* str = (const char*) time->data;
    size_t i = 0;

    memset(&t, 0, sizeof(t));

    if (time->type == V_ASN1_UTCTIME) /* two digit year */
    {
        t.tm_year = (str[i++] - '0') * 10 + (str[i++] - '0');
        if (t.tm_year < 70)
        t.tm_year += 100;
    }
    else if (time->type == V_ASN1_GENERALIZEDTIME) /* four digit year */
    {
        t.tm_year = (str[i++] - '0') * 1000 + (str[i++] - '0') * 100 + (str[i++] - '0') * 10 + (str[i++] - '0');
        t.tm_year -= 1900;
    }
    t.tm_mon = ((str[i++] - '0') * 10 + (str[i++] - '0')) - 1; // -1 since January is 0 not 1.
    t.tm_mday = (str[i++] - '0') * 10 + (str[i++] - '0');
    t.tm_hour = (str[i++] - '0') * 10 + (str[i++] - '0');
    t.tm_min  = (str[i++] - '0') * 10 + (str[i++] - '0');
    t.tm_sec  = (str[i++] - '0') * 10 + (str[i++] - '0');

    /* Note: we did not adjust the time based on time zone information */
    return mktime(&t);
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-10-30T13:01:39.330

`time_t`可能有一个更窄的范围`ASN1_TIME`，因此 `ASN1_TIME_*`函数可能是更健壮的替代方案。例如，要比较时间，您可以使用`ASN1_TIME_diff()`（这可以避免使用溢出时可能出现的安全问题`time_t`）。以人类可读的格式打印，调用`ASN1_TIME_print()`等。

到目前为止，没有一个答案遵循[rfc 5280](https://www.rfc-editor.org/rfc/rfc5280)，它指定输入时间为 UTC（`mktime()`预计本地时区的时间，即，如果本地时区不是 UTC，则答案不正确）。[还有](https://www.rfc-editor.org/rfc/rfc5280#section-4.1.2.5.1)：

> 符合标准的系统必须将年份字段 (YY) 解释如下： 如果 YY 大于或等于 50，则年份应解释为 19YY；且 YY 小于 50 时，年份应解释为 20YY。

即，`if (tm_year < 70) tm_year += 100;`违反了 rfc。这个答案使用`year += year < 50 ? 2000 : 1900`.

此外，[`99991231235959Z`在输入中](https://www.rfc-editor.org/rfc/rfc5280#section-4.1.2.5)意味着证书没有明确定义的到期日期（该函数应该返回`(time_t)-1`- 一个错误）。

要将 UTCTime 或 GeneralizedTime 字符串 ( `ASN1_TIME*`)转换为[自 Epoch](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_16) ( `time_t`) 以来的秒数：

```
typedef unsigned U;

time_t ASN1_TIME_to_posix_time(const ASN1_TIME* time) {
  if(!time) return -1;
  const char *s = (const char*)time->data;
  if (!s) return -1;

  U two_digits_to_uint() // nested function: gcc extension
  {
    U n = 10 * (*s++ - '0');
    return n + (*s++ - '0');
  }
  U year, month, day, hour, min, sec;
  switch(time->type) {
    // https://www.rfc-editor.org/rfc/rfc5280#section-4.1.2.5.1
  case V_ASN1_UTCTIME: // YYMMDDHHMMSSZ
    year = two_digits_to_uint();
    year += year < 50 ? 2000 : 1900;
    break;
  case V_ASN1_GENERALIZEDTIME: // YYYYMMDDHHMMSSZ
    year = 100 * two_digits_to_uint();
    year += two_digits_to_uint();
    break;
  default:
    return -1; // error
  }
  month = two_digits_to_uint();
  day   = two_digits_to_uint();
  hour  = two_digits_to_uint();
  min   = two_digits_to_uint();
  sec   = two_digits_to_uint();
  if (*s != 'Z') return -1;
  if (year == 9999 && month == 12 && day == 31 && hour == 23 && min == 59
      && sec == 59) // 99991231235959Z rfc 5280
    return -1;
  return posix_time(year, month, day, hour, min, sec);
} 
```

where`posix_time()`用于将分解的 UTC 时间转换为日历时间。[自纪元以来的秒数](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_16)：

```
time_t posix_time(U year, U month, U day, U hour, U min, U sec)
{
  if (year < 1970 || month < 1 || month > 12 || day < 1 || day > 31
      || hour > 23 || min > 59 || sec > 60)
    return -1;

  // days upto months for non-leap years
  static const U month_day[13] =
    {-1, 0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334};
  year -= 1900;
  // number of Februaries since 1900
  const U year_for_leap = (month > 2) ? year + 1 : year;
  // XXX may overflow
  return sec + min*60 + hour*3600 + (month_day[month] + day - 1)*86400 +
    (year-70)*31536000 + ((year_for_leap-69)/4)*86400 -
    ((year_for_leap-1)/100)*86400 + ((year_for_leap+299)/400)*86400;
} 
```

`month_day`并且`year_for_leap`来自[@DTiedy 的回答](https://stackoverflow.com/a/33572892/4279)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-01-13T17:32:48.237

我知道为时已晚，并且`openssl`引入了一个函数[ASN1_TIME_to_tm](https://www.openssl.org/docs/man1.1.1/man3/ASN1_TIME_to_tm.html)但我不得不使用没有此方法的旧版本的 openssl。

我看到了这个问题的各种可能答案，他们正在他们的代码中解析时间字符串，但我对这种方法并不满意，因为我认为我可能会在解析逻辑中遗漏一些东西，我的代码可能会中断或可能无法处理所有极端情况。所以，我实现了 C++ 的函数，`openssl`它只使用函数来实现转换。

它使用[ASN1_TIME_diff](https://www.openssl.org/docs/man1.0.2/man3/ASN1_TIME_diff.html)从纪元计算秒数。为了获得`ASN1_TIME`epoch，我使用[了 ASN1_TIME_SET](https://www.openssl.org/docs/man1.0.2/man3/ASN1_TIME_diff.html)，`time_t`参数为 0。

随意评论和测试。

```
bool _ASN1_TIME_to_tm(const ASN1_TIME *pTime, struct tm *pTm)
{
    int days = 0, seconds = 0;
    ASN1_TIME *epochTime = ASN1_TIME_new();
    ASN1_TIME_set(epochTime, time_t(0));

    if (!ASN1_TIME_diff(&days, &seconds, epochTime, pTime))
        return false;
    time_t sinceEpoch = time_t(86400LL * days + seconds); // No of seconds in a day = 86400
    gmtime_r(&sinceEpoch, pTm);
    std::cout << "DateTime: " << TOS::convertTmToStr(*pTm) << std::endl;
    ASN1_TIME_free(epochTime);
    return true;
} 
```

或进行更多检查的代码：

```
bool _ASN1_TIME_to_tm(const ASN1_TIME *pTime, struct tm *pTm)
{
    bool result = false;
    time_t sinceEpoch = 0;
    int days = 0, seconds = 0;
    if (!pTime)
        return false;

    ASN1_TIME *epochTime = ASN1_TIME_new();
    if (!epochTime)
        return false;
    do {
        if (!ASN1_TIME_set(epochTime, time_t(0)))
            break;
        if (!ASN1_TIME_diff(&days, &seconds, epochTime, pTime))
            break;
        // No of seconds in a day = 86400
        sinceEpoch = time_t(86400LL * days + seconds);
        gmtime_r(&sinceEpoch, pTm);
        std::cout << "DateTime: " << TOS::convertTmToStr(*pTm) << std::endl;
        result = true;
    } while (0);

    ASN1_TIME_free(epochTime);
    return result;
} 
```

# php - pull youtube video title into page

> ID：10975543
> 
> 赞同：0
> 
> 时间：2012-06-11T06:49:42.337
> 
> 标签：php, api, parsing, youtube

I am pulling in some youtube video thumbnails into my page with the following:

```
<img src="http://i3.ytimg.com/vi/<?php echo $youtubelist[$i];?>/default.jpg"></img> 
```

(using a Joomla module to supply the youtube video ID's at $youtubelist)

Along with the youtube thumbnail, I also want to pull in the youtube video 'title' & 'description'.

How do I do this?

Thanks

[edited below]

This is my code & I want to place the title above the tag:

```
<?php
$youtubelist    = explode( ',', $youtubecode );
$numyoutube     = count($youtubelist);
//Get duplicate module or not
$a=1;
foreach ($list as $item) :
    //$total=$a;
    $enddbid = $item->id;
        if ($ytslide==$enddbid) {$nummod=$a;}
    $a++;   
endforeach;
?>
<div id="videos">
    <div style="padding-left: 2px; padding-right: 2px;padding-bottom:2px;">
    <?php for ($i=0; $i<$numyoutube; $i++) { ?>
        <a href="#">
            <img src="http://i3.ytimg.com/vi/<?php echo $youtubelist[$i];?>/default.jpg"></img>
        </a>
    <?php } ?>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:57:48.697

您可以使用以下代码获取有关特定 youtube 视频的信息：

```
$url = "http://gdata.youtube.com/feeds/api/videos/$youtubeid?v=2";
$res = file_get_contents($url); 
```

这将返回带有视频的完整元数据的 Atom XML，包括标题、作者、日期、关键字等。阅读`<title>`响应的元素以获得您需要的内容。所以这段代码会给你你所追求的：

```
$data = new DOMDocument();
$res = preg_replace('/>\s+</','><', $res);
$root = $req->loadXML($res);
$tnodes = $root->getElementsByTagName('title');
$tn = $tnodes->item(0);
$title = $tn->firstChild->nodeValue; 
```

使用您的代码，您需要有这样的东西：

```
<div id="videos">
    <div style="padding-left: 2px; padding-right: 2px;padding-bottom:2px;">
    <?php
        $data = new DOMDocument();
        for ($i=0; $i<$numyoutube; $i++) {
            $url = "http://gdata.youtube.com/feeds/api/videos/" . $youtubelist[$i] . "?v=2";
            $res = file_get_contents($url);
            $res = preg_replace('/>\s+</','><', $res);
            $root = $req->loadXML($res);
            $tnodes = $root->getElementsByTagName('title');
            $tn = $tnodes->item(0);
            $title = $tn->firstChild->nodeValue;
        ?>
        <a href="#">
            <div style="float:left">
                <?php echo $title; ?>
                <br/>
                <img src="http://i3.ytimg.com/vi/<?php echo $youtubelist[$i];?>/default.jpg" />
            </div>
        </a>
    <?php } ?>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T07:00:30.227

您可以通过在此传递视频 ID 来获取 youtube 视频信息

```
$video_feed = file_get_contents("http://gdata.youtube.com/feeds/api/videos/$videoid");
                $sxml = new SimpleXmlElement($video_feed);

                //set up nodes
                $namespaces = $sxml->getNameSpaces(true);
                $media = $sxml->children($namespaces['media']);
                $yt = $media->children($namespaces['yt']);
                $yt_attrs = $yt->duration->attributes();

                //vars
                 $video_title = $sxml->title;

                 $video_description = $sxml->content;

                 $video_keywords = $media->group->keywords;

                 $video_length = $yt_attrs['seconds']; 
```

# android - RunTimeException android

> ID：10975545
> 
> 赞同：-1
> 
> 时间：2012-06-11T06:49:45.070
> 
> 标签：android, android-listview, runtimeexception

My android app gives me this error from logcat:

> Caused by: java.lang.RunTimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'

this is my code:

```
package com.WNF;

import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.app.ListActivity;
import android.content.Intent;

public class Actiemenu extends ListActivity{

@Override 
public void onCreate(Bundle savedInstanceState) { 

super.onCreate(savedInstanceState); 
setContentView (R.layout.actiemenu);

final String[] array = new String[] {
        "Ding", "AnderDing", "Nogeending", "laatseding"
    };

setListAdapter(new ArrayAdapter<String> (this, R.layout.actiemenu, array));
    ListView lv = getListView();
    lv.setTextFilterEnabled(true);

lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

        if (position == 0) {
            Intent een = new Intent(v.getContext(), Acties.class);
            startActivity(een);
        }
        else if (position == 1) {
            Intent twee = new Intent(v.getContext(), Acties2.class);
            startActivity(twee);
        }
    }
});
getIntent();
}
} 
```

Any ideas what can be the problem??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:51:58.623

将id 放入`ListView`您`main.xml`的

```
<ListView
android:id="@android:id/list"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:55:50.413

导入这个

```
import your.package.name.R 
```

在你的情况下：

```
import com.WNF.R 
```

导入时出现此问题

```
android.R 
```

代替

```
package.name.R; 
```

# java - 如何以编程方式增加 RAM 内存使用量？

> ID：10975548
> 
> 赞同：2
> 
> 时间：2012-06-11T06:49:47.790
> 
> 标签：java, android, memory

我有一个场景，我需要以编程方式增加手机的 RAM 使用率。

我不知道这是否可能。如果是这样，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:53:44.020

我假设您不想只是浪费内存，而是要知道如何增加最大值。

通常您设置最大值。这是您希望堆成为或退出程序的最大值。如果您将其设置得足够高，则永远不需要增加它。

如果您希望应用程序以比这更少的内存退出，您可以检查使用情况并退出程序。（虽然我想不出你为什么会这样）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T01:03:41.703

查看此[StackOverFlow 页面](https://stackoverflow.com/questions/1949066/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget-android)。

此页面有防止内存不足异常。

反之想。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:59:16.950

**我们可以通过Android 的 Native Side**增加 Ram 使用量。我们可以让单个应用程序使用超过 300Mb 的 Ram。由于**OUT OF MEMORY 异常**仅适用于 Java 端（SDK）而不适用于 C 端（NDK）。但是在 Android 内存管理中，如果系统内存（整体）下降一个**阈值**，它将**自动杀死**使用更多内存来重新获得内存的**应用程序..**

# iphone - Ambiguity in XCode's Memory Leak Instrument TimeLine

> ID：10975550
> 
> 赞同：0
> 
> 时间：2012-06-11T06:49:58.357
> 
> 标签：iphone, objective-c, ios, memory-leaks, xcode-instruments

In the following image (taken from Memory Leaks Instrument in Xcode), you will notice a memory leak (the one with green border) in the timeline, how do i know which leaked object(s) that caused this red vertical line (the leak) ? if it's not possible to determine which object is the responsible for the leak, then what's the benefit of displaying these red vertical lines in the timeline ?

thank you so much in advance.

the image:

![enter image description here](../Images/bcc5d6dd31c7e6dbd034f933567deb44.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:55:42.947

红色垂直线表示泄漏增加。它们不是实时的（因此它们不能是一对一的）。看到左边的“快照间隔”部分了吗？这就是 Instruments 寻找新泄漏的频率。如果它找到了一些，它会在你的时间线中放置一个红色条。要弄清楚哪些是新的，请在时间轴上检查之前和之后。

# selenium - WebElement.getCssValue & WebElement.getAttribute Usage

> ID：10975557
> 
> 赞同：3
> 
> 时间：2012-06-11T06:50:41.603
> 
> 标签：selenium

Can anybody help me about how to use these two functions to get value of any CSS property.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T10:01:38.003

`<img>`如果有如下特定标签

```
<img title="Title" alt="myTitle" src="A/B/C/xyz.png"> 
```

`driver.getElement(By.tagName("img")).getAttribute("src")`将为您`src`提供此标签的属性。结果 -`A/B/C/xyz.png`

同样，您可以获取诸如 等属性的`title`值`alt`。

同样，您可以通过使用获取任何标签的 CSS 属性`getCssValue("some propety")`

# git - 如何查看在 git 上创建多个文件的日期？

> ID：10975563
> 
> 赞同：15
> 
> 时间：2012-06-11T06:51:11.227
> 
> 标签：git, github

我想查看指定目录上所有文件的 git 创建日期（添加它们的第一次提交的日期）。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-11T07:14:13.523

我将把我的解决方案分成几个步骤。

### 获取存储库中所有文件的列表

```
$ git ls-files 
```

这将返回存储库中所有文件的相对路径列表。

### 获取给定文件的第一次提交的 SHA-1：

```
$ git rev-list HEAD <file> | tail -n 1 
```

这将按时间倒序返回给定文件的所有无父提交的列表。最后一个是给定文件的第一次提交的 SHA-1 哈希。

您可以通过运行来验证这一点`git log --raw <hash>`。您应该会看到如下内容：

```
commit <commit_hash>
Author: Susy Q <suzy@example.com>
Date:   Wed Aug 24 12:36:34 2011 -0400

    Add new module 'example.py'

:000000 100644 0000000... <hash>... A  example.py 
```

### 显示给定提交的日期

```
$ git show -s --format="%ci" <hash> 
```

### 将它们放在一个 bash 脚本中：

```
#!/bin/bash
for file in $(git ls-files)
do
    HASH=$(git rev-list HEAD "$file" | tail -n 1)
    DATE=$(git show -s --format="%ci" $HASH --)
    printf "%-35s %s\n  %s\n" "$file" $HASH: "$DATE"
done 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T06:58:40.857

好吧，我设计了一个不优雅但可行的解决方案：

```
for file in dir/*; do echo -e "$file: \t\t `git log $file|grep Date|tail -1`"; done 
```

它通过`git log`在每个文件上运行然后`grep`对其进行 ing 以仅获取有关该文件的每个提交的日期来工作。然后`tail -1`确保我只会得到第一次提交的日期。只是为了`echo -e "..."`以（不太）友好的方式打印信息！

# asp.net - 如何验证列表视图中的输入？

> ID：10975565
> 
> 赞同：1
> 
> 时间：2012-06-11T06:51:39.500
> 
> 标签：asp.net

这是我的列表视图

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" Runat="Server">
    <asp:ListView ID="ListView1" runat="server" DataKeyNames="Year" 
        DataSourceID="AccountValueFundsDataSource" InsertItemPosition="LastItem">
........
</asp:ListView> 
```

这是我的数据源

```
<asp:SqlDataSource ID="AccountValueFundsDataSource" runat="server" 
        ConflictDetection="CompareAllValues" 
        ConnectionString="<%$ ConnectionStrings:Life_InsuranceConnectionString %>" 
        DeleteCommand="DELETE FROM [AccountValueFunds] WHERE [Year] = @original_Year AND [avfcharge] = @original_avfcharge" 
        InsertCommand="INSERT INTO [AccountValueFunds] ([Year], [avfcharge]) VALUES (@Year, @avfcharge)" 
        OldValuesParameterFormatString="original_{0}" 
        SelectCommand="SELECT * FROM [AccountValueFunds]" 
        UpdateCommand="UPDATE [AccountValueFunds] SET [avfcharge] = @avfcharge WHERE [Year] = @original_Year AND [avfcharge] = @original_avfcharge">
        <DeleteParameters>
            <asp:Parameter Name="original_Year" Type="Int32" />
            <asp:Parameter Name="original_avfcharge" Type="Decimal" />
        </DeleteParameters>
        <InsertParameters>
            <asp:Parameter Name="Year" Type="Int32" />
            <asp:Parameter Name="avfcharge" Type="Decimal" />
        </InsertParameters>
        <UpdateParameters>
            <asp:Parameter Name="avfcharge" Type="Decimal" />
            <asp:Parameter Name="original_Year" Type="Int32" />
            <asp:Parameter Name="original_avfcharge" Type="Decimal" />
        </UpdateParameters>
    </asp:SqlDataSource> 
```

我的问题是如何验证输入？例如，如果用户输入参数类型为十进制或整数的字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:55:03.340

[您可以使用RegularExpressionValidator - MSDN 文章](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.regularexpressionvalidator.aspx)、[RegularExpressionValidator - W3School](http://www.w3schools.com/aspnet/control_regularexpvalidator.asp)处理该验证。

您需要`ValidationExpression`to allow `decimal`s 和`integer`s 但不需要 allow `string`s。

检查这些

[只接受 (0-9) 整数和一位小数（小数点也是可选的）。](http://regexlib.com/REDetails.aspx?regexp_id=368)

[输入数值。处理负数和逗号格式的值。还处理单个小数点](http://regexlib.com/REDetails.aspx?regexp_id=329)

[正则表达式验证器 - 只有数字没有字母没有空格](http://forums.asp.net/t/897862.aspx/1)

# wcf - 无法从本地机器调用 WCF 服务

> ID：10975567
> 
> 赞同：0
> 
> 时间：2012-06-11T06:51:40.837
> 
> 标签：wcf

我在 VS 2008 中使用 WCF 服务应用程序模板创建了一个 WCF Web 服务。在同一个解决方案中，我创建了一个 Web 应用程序项目并将 Web 引用添加到我提供服务 url 的服务中。

现在，当我从我的 Web 应用程序项目中调用服务方法时，我得到了超时，我无法从调用服务方法中获取 O/P。这是我用来从服务调用方法的代码：

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using WebApplicationClient.WCFService;

namespace WebApplicationClient
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            Service1 svc1 = new Service1();
            String ex = svc1.GetData(1,true);

        }
    }
} 
```

编辑：我已经找到了问题所在。我向服务添加了 Web 引用，而不是服务引用，它起作用了。谁能告诉我两者的区别？

此外，当我运行 WCF 服务时，我收到此消息：从命令窗口运行此命令：

```
 svcutil.exe http://localhost:1787/Service1.svc?wsdl 
```

但是操作系统无法识别 svcutil.exe。我猜它被放置在某个地方，我也必须给出路径，这是问题吗？我在哪里可以找到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:40:41.153

> 但是操作系统无法识别 svcutil.exe。我猜它被放置在某个地方，我也必须给出路径，这是问题吗？我在哪里可以找到这个？

`SvcUtil.exe`是帮助为 wcf 服务创建代理的实用程序。您可以通过打开 Visual Studio 命令提示符而不是 Windows 命令提示符轻松访问该实用程序。

如果您在 C 盘中安装了 VS，它将位于此处。

```
C:\Program Files\ Microsoft Visual Studio 10.0\VC 
```

该[线程](https://stackoverflow.com/questions/308454/difference-between-web-reference-and-service-reference)讨论了添加 Web 引用和添加服务引用之间的区别。在您的情况下，我建议使用服务参考而不是 Web 参考。

# c# - IRandomAccessStream 引用转换为流引用 c#

> ID：10975568
> 
> 赞同：2
> 
> 时间：2012-06-11T06:51:41.537
> 
> 标签：c#, microsoft-metro

是否有任何方法或无论如何可以在 Windows 8 Metro 应用程序中使用 c# 将 IRandomAccessStreamReference 转换为流引用？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:28:15.963

如果，通过流引用，您的意思是一个类继承自`Stream`，则[`WindowsRuntimeStreamExtensions`该类](http://msdn.microsoft.com/en-us/library/windows/apps/system.io.windowsruntimestreamextensions.aspx)添加了扩展方法，以便您可以执行以下操作：

```
Stream s = (await myFile.OpenReadAsync()).AsStreamForRead(); 
```

# android - 使用 Intent 发送邮件

> ID：10975570
> 
> 赞同：0
> 
> 时间：2012-06-11T06:51:44.910
> 
> 标签：android, email, android-intent

我正在开发电子邮件应用程序。我正在使用发送邮件`Intent`

```
final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.setType("plain/text");
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{ address.getText().toString()});
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject.getText());
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, emailtext.getText());
EmailappActivity.this.startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

当我运行应用程序时，它通过与现有邮件帐户同步来发送邮件（比如我们配置的 gmail）。但是，我想以编程方式传递来自地址的用户名和密码。谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:58:15.080

如果您想以编程方式设置用户名和密码，则不能使用意图。因为android不允许开发者使用它的邮件程序自动发送邮件。你可以想象这么多安卓设备会变成什么样的垃圾邮件引擎？

如果您想以编程方式使用用户和密码发送电子邮件，[这个相关问题可以帮助您](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a/2033124#2033124)。

# c++ - qt 类中的服务器线程（需要互斥锁？）

> ID：10975572
> 
> 赞同：1
> 
> 时间：2012-06-11T06:51:53.520
> 
> 标签：c++, multithreading, qt, tcp

我创建了这个服务器类，它在新连接进入时启动一个线程。在某些情况下它可以正常工作，但它不是很稳定。我正在尝试解决它在哪里中断。我的调试器告诉我一些关于 qmutex 的信息。如果有人能发现问题。泰

它通过信号和插槽与父级连接并获取数据。

这是标题：

```
#ifndef FORTUNESERVER_H
#define FORTUNESERVER_H

#include <QStringList>
#include <QTcpServer>
#include <QThread>
#include <QTcpSocket>
#include <string>
using namespace  std;

class FortuneServer : public QTcpServer
{
    Q_OBJECT

 public:
    FortuneServer(QObject *parent = 0);

public slots:

void procesServerString(string serverString);
void getStringToThread(string serverString);

protected:
void incomingConnection(int socketDescriptor);

private:
QStringList fortunes;

signals:

void procesServerStringToParent(string serverString);
void getStringToThreadSignal(string serverString);
};

class FortuneThread : public QObject
 {
Q_OBJECT

public:
FortuneThread(int socketDescriptor, QObject *parent);

public slots:

void getString();
void sendString(string sendoutString);

signals:

void error(QTcpSocket::SocketError socketError);
void fromThreadString(string serverString);
void finished();

private:
int socketDescriptor;
QString text;
QTcpSocket tcpSocket;
};

#endif 
```

和抄送：

```
#include <stdlib.h>
#include <QtNetwork>
#include "MeshServer.hh"
#include <iostream>
#include "TableView.hh"

using namespace  std;

FortuneServer::FortuneServer(QObject *parent)
: QTcpServer(parent)
{

}

void FortuneServer::procesServerString(string serverString){

emit procesServerStringToParent(serverString);

}
void FortuneServer::getStringToThread(string serverString){

emit getStringToThreadSignal(serverString);

}

void FortuneServer::incomingConnection(int socketDescriptor)
{

FortuneThread *serverthread = new FortuneThread(socketDescriptor, this);
//connect(&serverthread, SIGNAL(finished()), &serverthread, SLOT(deleteLater()));

QThread* thread = new QThread;

serverthread->moveToThread(thread);

connect(thread, SIGNAL(started()), serverthread, SLOT(getString()));
connect(serverthread, SIGNAL(fromThreadString(string)), this,        SLOT(procesServerString(string)));
connect(this, SIGNAL(getStringToThreadSignal(string)), serverthread, SLOT(sendString(string)));

connect(serverthread, SIGNAL(finished()), thread, SLOT(quit()));
connect(serverthread, SIGNAL(finished()), serverthread, SLOT(deleteLater()));
connect(serverthread, SIGNAL(finished()), thread, SLOT(deleteLater()));

thread->start();

}

FortuneThread::FortuneThread(int socketDescriptor, QObject *parent)
: QObject(parent), socketDescriptor(socketDescriptor)
{

}

void FortuneThread::getString()
{

if (!tcpSocket.setSocketDescriptor(socketDescriptor)) {
    emit error(tcpSocket.error());
    cout<<"socket error"<<endl;
    return;
}
//in part
if(!tcpSocket.waitForReadyRead(10000)){

    emit finished();
    return;
}
int joj = tcpSocket.bytesAvailable();
char inbuffer[1024];
tcpSocket.read(inbuffer,1024);
string instring;
instring = inbuffer;
instring.resize(joj);

emit fromThreadString(instring);

}   

void FortuneThread::sendString(string sendoutString)
{       

//out part
char buffer[1024];
int buffer_len = 1024;
int bytecount;

memset(buffer, '\0', buffer_len);

string outstring = sendoutString;

int TempNumOne= (int)outstring.size();

for (int a=0;a<TempNumOne;a++)
    {
        buffer[a]=outstring[a];
    }

QByteArray block;
block = buffer;

tcpSocket.write(block);
tcpSocket.disconnectFromHost();
tcpSocket.waitForDisconnected();
emit finished();
} 
```

这是来自父母：

```
//server start

QHostAddress adr;
adr.setAddress( QString("127.0.0.1") );
adr.toIPv4Address();
quint16 port = 1101;

if (!server.listen( adr, port)) {
  QMessageBox::critical(this, tr("CR_bypasser"),
      tr("Unable to start the server: %1.")
      .arg(server.errorString()));
  close();
  return;
}

QString ipAddress;
ipAddress = server.serverAddress().toString();
statusLabel->setText(tr("The server is running on\n\nIP: %1\nport: %2\n\n"
  "Run the Fortune Client example now.")
  .arg(ipAddress).arg(server.serverPort()));

connect (&server, SIGNAL(procesServerStringToParent(string)), this,  SLOT(procesServerString(string))); 
connect (this, SIGNAL(StringToServer(string)), &server, SLOT(getStringToThread(string))); 
```

编辑：我正在尝试做的事情：

我有一个客户端（游戏引擎（Cryengine）的一部分），我用它发送了一串游戏坐标和其他一些东西，就像它在我之前给出的链接中所做的那样。这工作正常。我在“127.0.0.1”端口 1101 上获取数据。现在我只需要在我自己的程序中评估这些数据，该程序有这个 TableView 类，我可以在其中收集从字符串中获取的坐标，从坐标中调用一些数据和然后通过服务器将这个新字符串返回给游戏引擎。在游戏中，我将单击对象获取它们的坐标，从中创建一个字符串（包含坐标、实体 ID 等），将此字符串发送到服务器，从 TableView 返回调用信息。我只需要这种单向流只有一个正在发送字符串的客户端。我不确定 recv(hsock, buffer, buffer_len, 0), 我猜在游戏中负责发送字符串的节点会等待返回字符串？这是我的第一个程序之一，我真的很困惑......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T11:21:20.697

您提供的代码是货物崇拜编码的典范：您做了各种不必要的事情，显然是希望解决问题。

## 可能的破坏者...

代码有很多问题，但我认为崩溃的原因是：`tcpSocket.write(block)`没有发送一个以零结尾的字符串。该块是零终止的，但对字节数组的分配不会将此零终止添加到`size()`QByteArray 中。以下代码打印 1，即使字节数组的内容内部有一个零终止字节。

```
QByteArray arr = "a";
qDebug("len=%d", arr.size()); 
```

接收代码期望零终止，但从不接收它。然后，您继续将非零终止缓冲区分配给`std::string`：

```
string instring;
instring = inbuffer;
instring.resize(joj); 
```

`std::string & std::string::operator=(const char*)`随后的调整大小是货物崇拜：您很可能在已经读取缓冲区之后尝试解决问题。

不要*认为*这意味着修复它是正确的方法。一点也不。正确的做法是删除您编写的代码并正确执行，而不需要大量无用的不必要的咒语。

## ...以及所有其他问题

你陷入了相信魔法的陷阱，在各种论坛上无休止地存在。

线程不是神奇的对象，您可以将其应用于任何问题，希望它们有所帮助。我不知道是什么让人们认为线程很神奇，但经验法则是：**如果有人告诉你“哦，你应该试试线程”，他们很可能是错的。如果他们说与网络有关，他们几乎永远不会对，他们没有帮助，而且他们根本不了解您的问题（您似乎也不了解）。**通常，除非您清楚地了解您的问题，否则线程将*无济于事。*Qt 的网络系统是异步的：如果您不使用这些`waitxxxx()`函数，它不会阻止代码的执行。顺便说一句，你不应该使用它们，所以这里一切都很好。不需要无数线程。

因此，完全没有必要为每个传入连接启动一个新线程。它会降低服务器的性能——特别是如果服务器执行简单处理，因为您将上下文切换和线程创建/拆除的开销添加到每个连接。您希望系统中每个内核的线程数少于 2，因此使用`QThread::idealThreadCount()`池中的线程数将是一个很好的起点。

您还剥夺了线程的好处，因为您使用网络线程仅接收数据，然后发出`fromThreadString(string)`信号。我认为该信号已发送到您的应用程序的主线程。现在这很愚蠢，因为从网络套接字接收一堆字节是微不足道的。您的线程不做任何工作，他们所做的所有工作都浪费在创建和删除上。

下面的代码是一个简单的示例，说明如何*正确*使用 Qt API 来实现客户端-服务器系统，该系统以循环方式跨物理内核分配工作。它应该表现得很好。Qt 中包含的 Fortune 客户端示例*确实非常不幸*，因为它恰恰是错误的处理方式。

会注意到的是：

1.  这并不完全是微不足道的。Qt 可能更有帮助，但不是。

2.  客户端和发送者都从线程池移到线程中。

3.  断开连接的客户端不会被删除，而只是返回到线程池保存的客户端列表中。当调用客户端时，它们会被重用。

4.  QThread 不是派生自。QTcpServer 仅派生用于访问套接字句柄。

5.  不使用名称以开头的函数`wait()`。一切都是异步处理的。

6.  `newConnection(int)`ThreadPool 为Client 的 slot保留一个查找的 QMetaMethod 。这比使用更快，`QMetaObject::invokeMethod()`因为它每次都必须查找内容。

7.  在主线程中运行的计时器通过删除第一个发送者来启动信号槽链。每个发件人的删除都会触发下一个发件人的删除。最终，最后一个发送者在线程池中设置了`quit()`槽。后者`finished()`在所有线程确实完成时发出信号。

```
#include <QtCore/QCoreApplication>
#include <QtNetwork/QTcpServer>
#include <QtNetwork/QTcpSocket>
#include <QtCore/QQueue>
#include <QtCore/QThread>
#include <QtCore/QTimer>
#include <QtCore/QMetaMethod>

// Processes data on a socket connection
class Client : public QObject
{
    Q_OBJECT
public:
    Client(QObject* parent = 0) : QObject(parent), socket(new QTcpSocket(this))
    {
        connect(socket, SIGNAL(readyRead()), SLOT(newData()));
        connect(socket, SIGNAL(stateChanged(QAbstractSocket::SocketState)),
                SLOT(newState(QAbstractSocket::SocketState)));
        qDebug("Client()");
    }
    ~Client() { qDebug("~Client()"); }
signals:
    void done();
public slots:
    void newConnection(int descriptor) {
        socket->setSocketDescriptor(descriptor);
    }
private slots:
    void newData() {
        QByteArray data = socket->readAll();
        if (0) qDebug("got %d bytes", data.size());
        if (0) qDebug("got a string %s", data.constData());
        // here we can process the data
    }
    void newState(QAbstractSocket::SocketState state) {
        qDebug("client new state %d", state);
        if (state == QAbstractSocket::UnconnectedState) { emit done(); }
    }
protected:
    QTcpSocket* socket;
    int descriptor;
};

// Connects to a client and sends data to it
class Sender : public QObject
{
    Q_OBJECT
public:
    Sender(const QString & address, quint16 port, QObject * parent = 0) :
        QObject(parent), socket(new QTcpSocket(this)),
        bytesInFlight(0), maxBytesInFlight(65536*8)
    {
        connect(socket, SIGNAL(stateChanged(QAbstractSocket::SocketState)),
                SLOT(newState(QAbstractSocket::SocketState)));
        connect(socket, SIGNAL(bytesWritten(qint64)), SLOT(sentData(qint64)));
        socket->connectToHost(address, port);
        qDebug("Sender()");
    }
    ~Sender() { qDebug("~Sender()"); }
protected:
    // sends enough data to keep a maximum number of bytes in flight
    void sendData() {
        qint64 n = maxBytesInFlight - bytesInFlight;
        if (n <= 0) return;
        bytesInFlight += n;
        socket->write(QByteArray(n, 44)); // 44 is the answer, after all
    }
protected slots:
    void sentData(qint64 n) {
        bytesInFlight -= n;
        Q_ASSERT(bytesInFlight >= 0);
        sendData();
    }
    void newState(QAbstractSocket::SocketState state) {
        qDebug("sender new state %d", state);
        if (state == QAbstractSocket::ConnectedState) sendData();
    }
protected:
    QTcpSocket* socket;
    qint64 bytesInFlight;
    qint64 maxBytesInFlight;
};

// Keeps track of threads and client objects
class ThreadPool : public QTcpServer
{
    Q_OBJECT
public:
    ThreadPool(QObject* parent = 0) : QTcpServer(parent), nextThread(0) {
        for (int i=0; i < QThread::idealThreadCount(); ++i) {
            QThread * thread = new QThread(this);
            connect(thread, SIGNAL(finished()), SLOT(threadDone()));
            thread->start();
            threads << thread;
        }
        const QMetaObject & mo = Client::staticMetaObject;
        int idx = mo.indexOfMethod("newConnection(int)");
        Q_ASSERT(idx>=0);
        method = mo.method(idx);
    }
    void poolObject(QObject* obj) const {
        if (nextThread >= threads.count()) nextThread = 0;
        QThread* thread = threads.at(nextThread);
        obj->moveToThread(thread);
    }
protected:
    void incomingConnection(int descriptor) {
        Client * client;
        if (threads.isEmpty()) return;
        if (! clients.isEmpty()) {
            client = clients.dequeue();
        } else {
            client = new Client();
            connect(client, SIGNAL(done()), SLOT(clientDone()));
        }
        poolObject(client);
        method.invoke(client, Q_ARG(int, descriptor));
    }
signals:
    void finished();
public slots:
    void quit() {
        foreach (QThread * thread, threads) { thread->quit(); }
    }
private slots:
    void clientDone() {
        clients.removeAll(qobject_cast<Client*>(sender()));
    }
    void threadDone() {
        QThread * thread = qobject_cast<QThread*>(sender());
        if (threads.removeAll(thread)) delete thread;
        if (threads.isEmpty()) emit finished();
    }
private:
    QList<QThread*> threads;
    QQueue<Client*> clients;
    QMetaMethod method;
    mutable int nextThread;
};

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    ThreadPool server;
    if (!server.listen(QHostAddress::Any, 1101)) qCritical("cannot establish a listening server");
    const int senderCount = 10;
    Sender *prevSender = 0, *firstSender = 0;
    for (int i = 0; i < senderCount; ++ i) {
        Sender * sender = new Sender("localhost", server.serverPort());
        server.poolObject(sender);
        if (!firstSender) firstSender = sender;
        if (prevSender) sender->connect(prevSender, SIGNAL(destroyed()), SLOT(deleteLater()));
        prevSender = sender;
    }
    QTimer::singleShot(3000, firstSender, SLOT(deleteLater())); // run for 3s
    server.connect(prevSender, SIGNAL(destroyed()), SLOT(quit()));
    qApp->connect(&server, SIGNAL(finished()), SLOT(quit()));
    // Deletion chain: timeout deletes first sender, then subsequent senders are deleted,
    // finally the last sender tells the thread pool to quit. Finally, the thread pool
    // quits the application.
    return a.exec();
}

#include "main.moc" 
```

根据您的解释，您的游戏引擎将启动并创建与 localhost 上某个端口的连接。您的 Qt 程序应该在端口 1101 上接受该连接，接收一些字符串，处理它们，然后将它们发回。

修改代码以接受固定端口号上的连接。所有的数据处理，包括发回响应，都必须从`newData()`插槽中完成。如果您的计算非常复杂，您还可以将该数据传递给不同的线程。我所说的复杂是指数以万计的操作，例如加法和乘法，或数以千计的三角操作。

该`Sender`课程只是作为示例。当然，您的游戏引擎会执行发送，因此您不需要 Sender 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:25:56.757

我让我的旧“错误的方法”代码工作。我猜这部分是错误所在：

```
//removed
tcpSocket.disconnectFromHost();
tcpSocket.waitForDisconnected();
emit finished(); 
```

...

```
#include <stdlib.h>
#include <QtNetwork>
#include "MeshServer.hh"
#include <iostream>
#include "TableView.hh"

using namespace  std;

FortuneServer::FortuneServer(QObject *parent)
: QTcpServer(parent)
{

}

void FortuneServer::procesServerString(string serverString){

emit procesServerStringToParent(serverString);

}
void FortuneServer::getStringToThread(string serverString){

emit getStringToThreadSignal(serverString);

}

void FortuneServer::incomingConnection(int socketDescriptor)
{

FortuneThread *serverthread = new FortuneThread(socketDescriptor, this);
//connect(&serverthread, SIGNAL(finished()), &serverthread, SLOT(deleteLater()));

QThread* thread = new QThread;

serverthread->moveToThread(thread);

connect(serverthread, SIGNAL(fromThreadString(string)), this, SLOT(procesServerString(string)));
connect(this, SIGNAL(getStringToThreadSignal(string)), serverthread, SLOT(sendString(string)));
connect(serverthread, SIGNAL(finished()), thread, SLOT(quit()));
connect(serverthread, SIGNAL(finished()), serverthread, SLOT(deleteLater()));
connect(serverthread, SIGNAL(finished()), thread, SLOT(deleteLater()));

thread->start();

}

FortuneThread::FortuneThread(int socketDescriptor, QObject *parent): QObject(parent),   socketDescriptor(socketDescriptor)

{
if (!tcpSocket.setSocketDescriptor(socketDescriptor)) {
    emit error(tcpSocket.error());
    cout<<"socket error"<<endl;
    emit finished();
    return;
}

connect(&tcpSocket, SIGNAL(readyRead()), this, SLOT(getString()));
//connect(&tcpSocket, SIGNAL(disconnected()), this, SLOT(ondisconnected()));

}

void FortuneThread::getString()
{

int joj = tcpSocket.bytesAvailable();
if(joj==0){
    tcpSocket.disconnectFromHost();
    emit finished();
    return;
}
char inbuffer[1024];
int buffer_len = 1024;
memset(inbuffer, '\0', buffer_len);
tcpSocket.read(inbuffer,1024);
string instring;
instring = inbuffer;
instring.resize(joj);

emit fromThreadString(instring);

}   

void FortuneThread::sendString(string sendoutString)
{   
char buffer2[1024];
int buffer_len = 1024;
memset(buffer2, '\0', buffer_len);
strcat(buffer2,sendoutString.c_str());

tcpSocket.write(buffer2,buffer_len);

 }

void FortuneThread::ondisconnected()
{

emit finished();

} 
```

# php - FNV 'flavors' 和 PHP 实现

> ID：10975581
> 
> 赞同：4
> 
> 时间：2012-06-11T06:52:41.757
> 
> 标签：php, hash, fnv

我正在尝试将[FNV](http://isthe.com/chongo/tech/comp/fnv/)散列算法集成到基于 PHP 的项目中，作为为各种数据（例如 URL、关键字）生成散列的要求的一部分。

我看到了 Neven Boyanov 的这个[实现](http://code.google.com/p/boyanov/wiki/FNVHash)。他提到由于 PHP 中的算术限制，他被迫使用按位移位和加法而不是乘法。他的实现正确吗？我的知识在计算机科学领域受到某种限制，因此我无法自己验证。

我的另一个问题是关于 FNV 的不同“风味”。我看到它提供了 32 位、64 位和 128 位变体，但使用上述实现我总是得到 8 个字符的十六进制哈希（我使用 dechex() 将整数结果转换为十六进制）。

给定输入“Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin at libero mi, quis luctus massa.”，我得到以下十六进制结果：

*   （32 位偏移） 5b15c0f2
*   （64 位偏移）6ea33cb5

为什么会这样？我期待来自 64 位 FNV 的 16 个字符的十六进制结果。“风味”是否仅指将使用的算术运算和种子类型而不是结果的长度？（即如果我说 64 位 FNV，散列函数将使用 64 位操作和种子，但结果仍然是 32 位）

一点启发将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:35:58.860

我很早以前就写过PHP FNV哈希函数，它是为了一个特定的目的，所以当时32位的实现就足够了。

要回答您的第一个问题 - 通过比较算法（代码）和示例结果，针对其他（C 和 C++）实现对实现进行了测试。因此，对于 32 位结果，它可以正常工作。

如果您想自己实现 64 位（或 128 位）版本，您应该首先更改 FNV_offset_basis 以及第 73 行的表达式，目前是：

```
$hash += ($hash<<1) + ($hash<<4) + ($hash<<7) + ($hash<<8) + ($hash<<24); 
```

...这相当于乘以二进制数为 1000000000000000110010011 的数字 16777619 (FNV_prime_32) - 分解为以下表达式：`2^24 + 2^8 + 2^7 + 2^4 + 2^1 + 2^0`。

对于 64 位，您应该乘以 1099511628211 - 二进制 100000000000000000000000000000000110110011 ... 表达式：`2^88 + 2^8 + 2^7 + 2^5 + 2^4 + 2^1 + 2^0`。

我不知道`$hash << 88`PHP 将如何处理表达式，但您应该自己试验一下。在我的 PHP 5.2.x 上，它不适用于大于 31 的数字。

最后，您可能需要修改`$hash = $hash & 0x0ffffffff;`以从结果中删除一些垃圾。我通过实验发现了这一点。对于 64 位 ot 应该是`$hash = $hash & 0x0ffffffffffffffff;`. 验证它是否与 PHP 一起正常工作。

您还可以使用其他 PHP 库来获得更高的算术精度。在我看来，使用按位移位更快。

事实上，您可以为任意位数生成 FNV 哈希。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:45:10.363

事实证明，我引用的[实现](http://code.google.com/p/boyanov/wiki/FNVHash)仅适用于 32 位 FNV1。我设法编译了 FNV 的[C 源代码](http://isthe.com/chongo/src/fnv/fnv-5.0.3.tar.gz)，并使用二进制文件和 Tom 建议的[工具](http://ziin.pl/en/easy_hash)来验证 64 位 FNV 确实返回 16 个字符的十六进制哈希

# android - NullPointerException/帮助读取 LogCat

> ID：10975582
> 
> 赞同：1
> 
> 时间：2012-06-11T06:52:46.250
> 
> 标签：android

谁能告诉我这些错误的含义，实际上我是android编码的新手，无法弄清楚这些错误，请帮忙。

```
06-11 11:56:08.118: W/dalvikvm(593): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
06-11 11:56:08.128: E/AndroidRuntime(593): FATAL EXCEPTION: main
06-11 11:56:08.128: E/AndroidRuntime(593): java.lang.RuntimeException: Unable to start activity ComponentInfo{gaurav.android/gaurav.android.CalcActivity}: java.lang.NullPointerException
06-11 11:56:08.128: E/AndroidRuntime(593):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-11 11:56:08.128: E/AndroidRuntime(593):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-11 11:56:08.128: E/AndroidRuntime(593):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-11 11:56:08.128: E/AndroidRuntime(593):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-11 11:56:08.128: E/AndroidRuntime(593):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-11 11:56:08.128: E/AndroidRuntime(593):  at android.os.Looper.loop(Looper.java:137)
06-11 11:56:08.128: E/AndroidRuntime(593):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-11 11:56:08.128: E/AndroidRuntime(593):  at java.lang.reflect.Method.invokeNative(Native Method)
06-11 11:56:08.128: E/AndroidRuntime(593):  at java.lang.reflect.Method.invoke(Method.java:511)
06-11 11:56:08.128: E/AndroidRuntime(593):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-11 11:56:08.128: E/AndroidRuntime(593):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-11 11:56:08.128: E/AndroidRuntime(593):  at dalvik.system.NativeStart.main(Native Method)
06-11 11:56:08.128: E/AndroidRuntime(593): Caused by: java.lang.NullPointerException
06-11 11:56:08.128: E/AndroidRuntime(593):  at gaurav.android.CalcActivity.reset(CalcActivity.java:341)
06-11 11:56:08.128: E/AndroidRuntime(593):  at gaurav.android.CalcActivity.onCreate(CalcActivity.java:58)
06-11 11:56:08.128: E/AndroidRuntime(593):  at android.app.Activity.performCreate(Activity.java:4465)
06-11 11:56:08.128: E/AndroidRuntime(593):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-11 11:56:08.128: E/AndroidRuntime(593):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

这是我的代码，它实际上是一个简单的计算器。

包gaurav.android；

```
import android.app.Activity;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnKeyListener;
import android.widget.Button;
import android.widget.EditText;

public class CalcActivity extends Activity {
    EditText t=null;
    private final int MENUITEM_CLOSE = 300;
    private boolean hasChanged;
    private boolean readyToClear;

    public Button b1=null;
    public Button b2=null;
    public Button b3=null;
    public Button b4=null;
    public Button b5=null;
    public Button b6=null;
    public Button b7=null;
    public Button b8=null;
    public Button b9=null;
    public Button b10=null;
    public Button b11=null;
    public Button b12=null;
    public Button b13=null;
    public Button b14=null;
    public Button b15=null;
    public Button b16=null;
    public Button b17=null;
    public Button b18=null;
    public Button b19=null;
    public Button b20=null;
    public Button b21=null;
    public Button b22=null;
    public Button b23=null;
    public Button b24=null;
    public Button b25=null;
    public Button b26=null;
    public Button b27=null;
    public Button b28=null;

    private double memNum=0;
    private int operator=1;
    private double num=0;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setTheme(android.R.style.Theme_Black);
        setContentView(R.layout.main);
        reset();
        t=(EditText)findViewById(R.id.editText1);
        b1=(Button)findViewById(R.id.Button17);
        b2=(Button)findViewById(R.id.Button18);
        b3=(Button)findViewById(R.id.Button19);
        b4=(Button)findViewById(R.id.Button12);
        b5=(Button)findViewById(R.id.Button16);
        b6=(Button)findViewById(R.id.Button15);
        b7=(Button)findViewById(R.id.Button06);
        b8=(Button)findViewById(R.id.Button05);
        b9=(Button)findViewById(R.id.Button09);
        b10=(Button)findViewById(R.id.button7);
        b11=(Button)findViewById(R.id.button1);
        b12=(Button)findViewById(R.id.button2);
        b13=(Button)findViewById(R.id.button3);
        b14=(Button)findViewById(R.id.Button11);
        b15=(Button)findViewById(R.id.Button07);
        b16=(Button)findViewById(R.id.Button01);
        b17=(Button)findViewById(R.id.Button02);
        b18=(Button)findViewById(R.id.Button03);
        b19=(Button)findViewById(R.id.Button14);
        b20=(Button)findViewById(R.id.button4);
        b21=(Button)findViewById(R.id.Button10);
        b22=(Button)findViewById(R.id.Button20);
        b23=(Button)findViewById(R.id.button6);
        b24=(Button)findViewById(R.id.button9);
        b25=(Button)findViewById(R.id.button8);
        b26=(Button)findViewById(R.id.Button13);
        b27=(Button)findViewById(R.id.Button21);
        b28=(Button)findViewById(R.id.button30);

        b1.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){handleNumber(1);}});
        b2.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){handleNumber(2);}});
        b3.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){handleNumber(3);}});   
        b4.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){handleNumber(4);}});
        b5.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){handleNumber(5);}});
        b6.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){handleNumber(6);}});
        b7.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){handleNumber(7);}});   
        b8.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){handleNumber(8);}});
        b9.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){handleNumber(9);}});
        b10.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){handleNumber(0);}});
        b11.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){memNum=0;}});   
        b12.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){setValue(Double.toString(memNum));}});
        b13.setOnClickListener(new Button.OnClickListener(){public void onClick(View v)
        {}});
        b14.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){
            memNum = memNum+ Double.parseDouble(t.getText().toString());
            operator = 0;
        }});
        b15.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){
            memNum = memNum- Double.parseDouble(t.getText().toString());
            operator = 0;
        }});   
        b16.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){handleBackspace();}});
        b17.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){}});
        b18.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){reset();}});
        b19.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){handlePlusMinus();}});   
        b20.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){
            setValue(Double.toString(Math.sqrt(Double.parseDouble(t.getText().toString()))));
        }});
        b21.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){handleEquals(4);}});
        b22.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){handleEquals(3);}});
        b23.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){handleEquals(2);}});   
        b24.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){handleEquals(1);}});
        b25.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){handleDecimal();}});
        b26.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){
            setValue(Double.toString(num*(0.01 * Double.parseDouble(t.getText().toString()))));
        }});
        b27.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){}});   
        b28.setOnClickListener(new Button.OnClickListener(){public void onClick(View v){handleEquals(0);}});

        t.setOnKeyListener(new OnKeyListener()
        {
            public boolean onKey(View v,int i,android.view.KeyEvent e)
            {
                if (e.getAction() == KeyEvent.ACTION_DOWN) 
                {
                    int keyCode=e.getKeyCode();

                    switch (keyCode) {
                     case KeyEvent.KEYCODE_0:
                      handleNumber(0);
                      break;

                     case KeyEvent.KEYCODE_1:
                      handleNumber(1);
                      break;

                     case KeyEvent.KEYCODE_2:
                      handleNumber(2);
                      break;

                     case KeyEvent.KEYCODE_3:
                      handleNumber(3);
                      break;

                     case KeyEvent.KEYCODE_4:
                      handleNumber(4);
                      break;

                     case KeyEvent.KEYCODE_5:
                      handleNumber(5);
                      break;

                     case KeyEvent.KEYCODE_6:
                      handleNumber(6);
                      break;

                     case KeyEvent.KEYCODE_7:
                      handleNumber(7);
                      break;

                     case KeyEvent.KEYCODE_8:
                      handleNumber(8);
                      break;

                     case KeyEvent.KEYCODE_9:
                      handleNumber(9);
                      break;

                     case 43:
                      handleEquals(1);
                      break;

                     case KeyEvent.KEYCODE_EQUALS:
                      handleEquals(0);
                      break;

                     case KeyEvent.KEYCODE_MINUS:
                      handleEquals(2);
                      break;

                     case KeyEvent.KEYCODE_PERIOD:
                      handleDecimal();
                      break;

                     case KeyEvent.KEYCODE_C:
                      reset();
                      break;

                     case KeyEvent.KEYCODE_SLASH:
                      handleEquals(4);
                      break;

                     case KeyEvent.KEYCODE_DPAD_DOWN:
                      return false;
                     }
                    }

                    return true;
                   }
                  });
                 }

                 @Override
                 public boolean onCreateOptionsMenu(Menu menu) {
                  menu.add(0,1, MENUITEM_CLOSE, "Close");

                  return super.onCreateOptionsMenu(menu);
                 }

                 @Override
                 public boolean onOptionsItemSelected(MenuItem item) {
                  switch (item.getItemId()) {
                  case MENUITEM_CLOSE:
                   finish();
                   break;
                  }

                  return super.onOptionsItemSelected(item);
                 }

                 private void handleEquals(int newOperator) {
                  if (hasChanged) {
                   switch (operator) {
                   case 1:
                    num = num + Double.parseDouble(t.getText().toString());
                    break;
                   case 2:
                    num = num - Double.parseDouble(t.getText().toString());
                    break;
                   case 3:
                    num = num * Double.parseDouble(t.getText().toString());
                    break;
                   case 4:
                    num = num / Double.parseDouble(t.getText().toString());
                    break;
                   }

                   String txt = Double.toString(num);
                   t.setText(txt);
                   t.setSelection(txt.length());

                   readyToClear = true;
                   hasChanged = false;
                  }

                  operator = newOperator;
                 }

                 private void handleNumber(int num) {
                  if (operator == 0)
                   reset();

                  String txt = t.getText().toString();
                  if (readyToClear) {
                   txt = "";
                   readyToClear = false;
                  } else if (txt.equals("0"))
                   txt = "";

                  txt = txt + Integer.toString(num);

                  t.setText(txt);
                  t.setSelection(txt.length());

                  hasChanged = true;
                 }

                 private void setValue(String value) {
                  if (operator == 0)
                   reset();

                  if (readyToClear) {
                   readyToClear = false;
                  }

                  t.setText(value);
                  t.setSelection(value.length());

                  hasChanged = true;
                 }

                 private void handleDecimal() {
                  if (operator == 0)
                   reset();

                  if (readyToClear) {
                   t.setText("0.");
                   t.setSelection(2);
                   readyToClear = false;
                   hasChanged = true;
                  } else {
                   String txt = t.getText().toString();

                   if (!txt.contains(".")) {
                    t.append(".");
                    hasChanged = true;
                   }
                  }
                 }

                 private void handleBackspace() {
                  if (!readyToClear) {
                   String txt = t.getText().toString();
                   if (txt.length() > 0) {
                    txt = txt.substring(0, txt.length() - 1);
                    if (txt.equals(""))
                     txt = "0";

                    t.setText(txt);
                    t.setSelection(txt.length());
                   }
                  }
                 }

                 private void handlePlusMinus() {
                  if (!readyToClear) {
                   String txt = t.getText().toString();
                   if (!txt.equals("0")) {
                    if (txt.charAt(0) == '-')
                     txt = txt.substring(1, txt.length());
                    else
                     txt = "-" + txt;

                    t.setText(txt);
                    t.setSelection(txt.length());
                   }
                  }
                 }

                 private void reset() {
                  num = 0;
                  t.setText("0");
                  t.setSelection(1);
                  operator = 1;
                 }

                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:54:32.333

您在第 341 行有一个空指针异常。

```
CalcActivity.reset(CalcActivity.java:341) 
```

如果您在 LogCat 中双击这些行，它将带您到包含错误的行。

```
06-11 11:56:08.128: E/AndroidRuntime(593):  at gaurav.android.CalcActivity.reset(CalcActivity.java:341)
06-11 11:56:08.128: E/AndroidRuntime(593):  at gaurav.android.CalcActivity.onCreate(CalcActivity.java:58) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:10:54.230

**您在 handleEquals 方法中得到 NullPointerException**

从你的代码中我看到的是

```
switch (operator)
            {
            case 1:
                num = num + Double.parseDouble(t.getText().toString());
                break;
            case 2:
                num = num - Double.parseDouble(t.getText().toString());
                break;
            case 3:
                num = num * Double.parseDouble(t.getText().toString());
                break;
            case 4:
                num = num / Double.parseDouble(t.getText().toString());
                break;
            } 
```

你还没有初始化你的 TextViews。如果没有 Initiliaing **t**，您将无法使用以下功能

```
t.getText().toString() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T07:12:49.160

您`TextView`在初始化之前使用的是您面临的原因`null pointer expection`

```
 t=(EditText)findViewById(R.id.editText1);
    b1=(Button)findViewById(R.id.Button17);
    b2=(Button)findViewById(R.id.Button18);
    b3=(Button)findViewById(R.id.Button19);
    b4=(Button)findViewById(R.id.Button12);
    b5=(Button)findViewById(R.id.Button16);
    b6=(Button)findViewById(R.id.Button15);
    b7=(Button)findViewById(R.id.Button06);
    b8=(Button)findViewById(R.id.Button05);
    b9=(Button)findViewById(R.id.Button09);
    b10=(Button)findViewById(R.id.button7);
    b11=(Button)findViewById(R.id.button1);
    b12=(Button)findViewById(R.id.button2);
    b13=(Button)findViewById(R.id.button3);
    b14=(Button)findViewById(R.id.Button11);
    b15=(Button)findViewById(R.id.Button07);
    b16=(Button)findViewById(R.id.Button01);
    b17=(Button)findViewById(R.id.Button02);
    b18=(Button)findViewById(R.id.Button03);
    b19=(Button)findViewById(R.id.Button14);
    b20=(Button)findViewById(R.id.button4);
    b21=(Button)findViewById(R.id.Button10);
    b22=(Button)findViewById(R.id.Button20);
    b23=(Button)findViewById(R.id.button6);
    b24=(Button)findViewById(R.id.button9);
    b25=(Button)findViewById(R.id.button8);
    b26=(Button)findViewById(R.id.Button13);
    b27=(Button)findViewById(R.id.Button21);
    b28=(Button)findViewById(R.id.button30);

reset(); 
```

`reset()`所以在初始化所有之后写你的方法`view`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T07:18:01.267

您正在调用`reset()`并且您正在使用该函数内的 edittext 变量`t`。但是您`t`只有在调用`reset()`. 交换这些行`reset();` `t=(EditText)findViewById(R.id.editText1);`，`OnCreate()`您的程序应该可以正常运行。

# jquery - 图像不显示在背景中

> ID：10975583
> 
> 赞同：1
> 
> 时间：2012-06-11T06:52:49.043
> 
> 标签：jquery, css, image

我面临一个奇怪的问题。我有一个 Web 应用程序（在 struts 中开发）和 2 个网页，它们以表格格式显示数据。

在表格中，标题行具有背景图像，以便可以区分标题。

现在的问题是背景图像显示在页面 A 中，但没有显示在页面 B 中。

一些输入：

1) 背景由 CSS 处理，两个页面使用相同的 CSS 类。这是课程：

```
#reportArea table tr.tr-row-7 {
  background: url(../images/red-bg.png) repeat !important;
  position: relative;
  z-index: 100;
  height: 36px;
  width: 100%;

} 
```

2）我检查了firebug Net monitor，发现red-bg.png在两个页面上都成功加载了HTTP代码200 OK

3) 数据由 ajax 函数加载。

4) 类名 tr-row-7 已使用 jQuery 动态赋予行。功能是这样的

```
$(document).ajaxComplete(function(){
  $("#reportArea table tr", this).each(function(i){$(this).addClass("tr-row-" + i);});
}); 
```

两个页面都使用相同的 jQuery ( `ajaxComplete()`) 进行行类分配。静态页面 B 无法在后台显示图像

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:14:33.497

您在 CSS 中使用 id`#reportArea`但在 HTML 中缺少相同的

```
<div id="reportArea">
  your table
</div> 
```

工作演示 - [http://jsfiddle.net/NrKJe/5/](http://jsfiddle.net/NrKJe/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:56:21.370

为页面 B 的表头行制作另一个 css，具有相同的属性，并执行相同的操作....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:01:39.213

终于得到了这个工作。实际上，这是 CSS/jQuery 结合的问题，从长长的操作列表中，jQuery 将几个父级添加到此表中，这导致了问题。

因此，图像的位置受到干扰，并显示在页外区域。

谢谢大家的回答/评论，他们让我工作！

# javascript - 我想在 asp.net 中向用户显示他们在我的网站上的位置

> ID：10975587
> 
> 赞同：0
> 
> 时间：2012-06-11T06:53:16.800
> 
> 标签：javascript, asp.net, ip-address

在页面加载用户时，页面应使用 ip 地址显示用户的位置，我有这个 javascript，它可以获取我的位置，但我希望它显示在标签控件或其他东西中而不是警报

```
<script type="text/javascript" language="Javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
<script type="text/javascript" language="Javascript" src="http://api.easyjquery.com/easyjquery.js"></script> 

<script type="text/javascript" language="Javascript">

    // 1\. Your Data Here
    function my_callback(json) {
        alert("IP :" + json.IP + " COUNTRY: " + json.COUNTRY);
    }

    function my_callback2(json) {
       alert("IP :" + json.IP + " COUNTRY: " + json.COUNTRY + " City: " + json.cityName + " Region Name: " + json.regionName);
    }

    // 2\. Setup Callback Function
    // EasyjQuery_Get_IP("my_callback");      // fastest version
    EasyjQuery_Get_IP("my_callback2","full"); // full version

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:57:44.707

在您网站的 body 标签中添加一个额外的 div：

```
[...]
</head>
<body>
[...]
<div id="location">Loading location...</div> 
```

更新您的 JavaScript，而不是以 use 开头的行`alert()`：

```
document.getElementById('location').innerHTML = "IP: " + json.IP + " Country: " + json.COUNTRY + " City: " + json.cityName + " Region Name: " + json.regionName; 
```

工作示例：http: [//jsfiddle.net/powtac/gJKue/6/](http://jsfiddle.net/powtac/gJKue/6/)

# java - 如何防止Java中的初始化变量错误

> ID：10975588
> 
> 赞同：-4
> 
> 时间：2012-06-11T06:53:19.183
> 
> 标签：java, variables, scheduled-tasks, final, runnable

我试图让这个程序在运行 3 次后自行取消，但我不断收到“局部变量 taskId 可能尚未初始化”错误。因为其中一个是危险的。二尽管出现编译器错误，我仍然可以正确编译并运行程序吗？最后我将如何解决这个问题？谢谢！

```
final int taskId = plugin.getServer().getScheduler().scheduleSyncDelayedTask(plugin, new Runnable() {
    int count = 0;
    @Override
    public void run() {
        ((LivingEntity) e.getEntity()).damage(2);
        count++;
        if (count > 2) {
            Bukkit.getScheduler().cancelTask(taskId);
        }
    }

}, 60L); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:58:21.803

您可能会在初始化之前尝试使用 taskId。

这在您的情况下不起作用，因为它不仅是在构造匿名类时访问，`cancelTask(taskId)`而是在构造匿名类时访问。即在它被设置之前。

一种解决方法是改用 a `int[] task`，但这是有风险的。

一个更简单的解决方法是抛出一个 RuntimeException`IllegalStateException`或您自己的一个，因为这将停止任务重复。

# javascript - 如何在某些选择元素的onclick事件上更改javascript文件中类的属性？

> ID：10975591
> 
> 赞同：-1
> 
> 时间：2012-06-11T06:53:41.340
> 
> 标签：javascript, jquery-ui, javascript-events

```
$.widget('ui.spinner', {
options: {
    min: 0,
    max: null,
    allowNull: false,

    group: '',
    point: '.',
    prefix: '',
    suffix: '',
    places: null, 
```

我有一个`ui.spinner.js`文件

我的 jsp 上有一个微调器，默认情况下 min 属性设置如上。

但是在更改列表值时，我希望也可以为微调器输入负值。`onclick`如果出现以下选项，我该如何执行此操作：

```
<select autocomplete="off">
  <option value="promotional" selected="selected" id="promotional">Absolute</option>
  <option value="consistent" id="consistent" onclick="changeSpinnerValues();">Relative to WAMP</option>
</select> 
```

微调器如下：

```
 <td><label for="st"><strong>WAMP</strong></label>
   <input type="text" id="Spinner" class="spinner" value="0" name="ST_CAPTURE" />
 </td>
 <td><label for="lt"><strong>WAMP</strong></label>
   <input type="text" id="Spinner" class="spinner" value="0" name="LT_CAPTURE" />
 </td> 
```

我将如何实现`changeSpinnerValues()`功能并在里面设置属性`min= null;`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:40:12.360

首先向 select 添加一个 id，如下所示：

```
<select id="changer">
    <option value="promotional" selected="selected" id="promotional">Absolute</option>
    <option value="consistent" id="consistent">Relative to WAMP</option>
</select> 
```

然后使用这个js来调用你的函数（onChange不是onClick）。

```
$('#changer').on('change', function() {
             if($(this).val() == 'consistent') {
                 changeSpinnerValues();
             }
         }) 
```

# c - 错误：操作系统标头“proc.h”中“退出”的类型冲突

> ID：10975593
> 
> 赞同：0
> 
> 时间：2012-06-11T06:53:48.640
> 
> 标签：c, linux, header, proc

我是 C/Pro*C 的新手，我在 Linux 中编译 C 代码。我收到以下错误。

```
/usr/include/sys/proc.h:560: error: conflicting types for 'exit'
/usr/include/sys/proc.h:560: error: conflicting types for 'exit' 
```

在 proc.h 中，退出函数定义为

```
extern void exit(int, int); 
```

标头 proc.h 是操作系统定义的标头，我不知道为什么会收到此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T08:55:40.030

如果有冲突的类型，它在别处也有很好的定义，可能是不同的类型——要么作为具有不同签名的函数，要么作为变量。

检查是否是这种情况，如果是，请重命名您的变量。

# c# - 选择下个月的生日

> ID：10975595
> 
> 赞同：-4
> 
> 时间：2012-06-11T06:53:59.757
> 
> 标签：c#, sql, sql-server, sql-server-2005

我想显示下个月的生日列表。

生日存储在`birthday`列中。我怎样才能显示这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T08:50:01.373

我首选的解决方案是有一个可以索引的额外列；`next_birthday`.

作为一个通宵的过程，您更新该列以确保该值始终在未来。

这允许进行如下查询：

```
SELECT
  myfriends.*
FROM
  user               AS myself
INNER JOIN
  user               AS myfriends
    ON  myfriends.next_birthday >=                   myself.next_birthday
    AND myfriends.next_birthday <  DATEADD(MONTH, 1, myself.next_birthday) 
```

这保留了日期时间字段的一部分，因此可以很好地`year`应对： - 如果我的下一个生日是 - 我想要 12 月下半月的生日*和*1 月上半月的生日 - 仅使用日期和月份的解决方案*（不年）*与此斗争 `going around the corner`
`2012-12-15`

 **该字段可以被索引，因此该解决方案*不需要*扫描表中的每条记录。

但是，它确实假设您可以运行该维护作业来更新该字段。在作业未执行的情况下，部分数据将过期。

你还需要小心那些过生日的人`29th Feb`——你不能一直在他们的生日上加一年；`29th Feb + 1 year`移动到`28th feb`，无论你增加多少年，你永远不会回到`29th Feb`。但这也不是太难...

```
UPDATE
  user
SET
  next_birthday = DATEADD(YEAR, DATEDIFF(YEAR, birthday, GETDATE()) + 1, birthday)
WHERE
  next_birthday < GETDATE() 
```

所有这一切的范围也*非常*狭窄。它为一个非常特殊的需求引入了一个新的色谱柱和一个新的维护工作。然后应该问这个问题；这些成本比替代查询*（通常需要表扫描等）*更可取吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T07:03:47.857

```
Select birthdaycolumn from yourtable where MONTH(birthdaycolumn) = MONTH(GETDATE()) 
```

试试这个会起作用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T07:32:21.693

试试这个

```
Select * 
from yourDataTable
where MONTH(birthdaycolumn) = (MONTH(GETDATE() + 1)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T07:00:26.657

尝试这样的事情：

```
SELECT BirthDay 
FROM TableName
WHERE DATEPART(m, BirthDay) = UpcomingMonth 
```

在此 SQL 查询中使用 UpcomingMonth 作为参数。希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T08:48:59.527

解决了那个问题。

```
select * from Employee

where convert(nvarchar,convert(datetime,convert(nvarchar,YEAR(GETDATE()))+'.'+convert(nvarchar,MONTH(Birthday))+'.'+convert(nvarchar,DAY(Birthday))),102) between convert(nvarchar,getdate(),102) and convert(nvarchar,DATEADD(D,14 ,GETDATE()),102) 
```**

# oracle11g - Oracle ADF 表单提交错误

> ID：10975596
> 
> 赞同：0
> 
> 时间：2012-06-11T06:54:01.367
> 
> 标签：oracle11g, oracle-adf

我创建了一个表单来将数据插入到`Expenses`表中。当我尝试插入数据时，出现以下错误。

```
Attribute ExpensesId in AppModule.ExpensesView1 is required. 
```

我有一个`Before Insert Trigger`要插入`ExpensesId`到表中。所以我不需要`ExpensesId`手动添加。

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:36:51.283

在这种情况下，将费用 ID 属性的 ADF BC 类型设置为 DBSequence，以便框架知道这已被处理

坦率

# actionscript-3 - stagewebview 在 flash builder 中不起作用（无法加载 https 链接）

> ID：10975597
> 
> 赞同：0
> 
> 时间：2012-06-11T06:54:08.263
> 
> 标签：actionscript-3, flash, mobile

我是这个社区的新手，我正在学习，我知道我问新手问题，但请赐教！在我的选项卡视图应用程序（它是一个 IOS 应用程序）中，我有一个选项卡，我想在应用程序中加载一个网页，我在其中放置了一个按钮“刷新”，当它按下它时会弹出一个新视图，我想在其中加载一个网络链接（https）！我看了一些教程，但我不能让它工作，这是使用刷新按钮查看的代码`

```
<fx:Script>
    <![CDATA[
        protected function butRefresh_clickHandler(event:MouseEvent):void
        {
            // TODO Auto-generated method stub

        }
    ]]>
</fx:Script>

<fx:Declarations>

   </fx:Declarations>
<s:Button id="butRefresh" width="153" height="96" label="Refresh"
          click="navigator.pushView(cursHtml)" enabled="true" horizontalCenter="0"
          verticalCenter="9"/> 
```

` 这是页面应该加载的视图 '

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" title="cursHtml">       
    <fx:Script>
            <![CDATA[
                import spark.events.ViewNavigatorEvent;
                protected function cursHtml_viewActivateHandler(event:ViewNavigatorEvent):void
              {
                    navigateToURL(new URLRequest("https://www.alphabank.ro/ro/rate/rate_si_dobanzi.php"));
                  //        StageWebView.loadString(data.description);
             }

             /*  StageWebView = new StageWebView();
              //StageWebView.view = new Rectangle(dragBar.x, dragBar.y+20, 800, 600);
            //  StageWebView = stage;
            //  StageWebView."http://www.google.co.uk/"; */
            /*  StageWebView = stage;
                StageWebView.stage = new Rectangle(20, 100, 450, 450);
                StageWebView("https://www.alphabank.ro/ro/rate/rate_si_dobanzi.php");   */

                ]]>
         </fx:Script>

</s:View> 
```

' 我评论了我所做的最后一次尝试！和我已经删除的其他人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:39:00.433

你用代码做了一些奇怪的事情：

*   首先 - 你不能使用与变量名和类名相同的名称，所以`var StageWebView`是不允许的
*   您使用了 StageWebView 的一些不存在的属性/方法。

试试下面的代码：

```
<?xml version="1.0" encoding="utf-8"?>
   <s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" title="cursHtml">       
    <fx:Script>
        <![CDATA[
            import spark.events.ViewNavigatorEvent;
            protected function cursHtml_viewActivateHandler(event:ViewNavigatorEvent):void
            {

                stageWebView.loadURL(data.description);
                //assuming that data.description stores URL
            }

            private var stageWebView:StageWebView;

                            //stuff below this line needs to be in a method body, also I see the viewport rectangle call is missing a close paren, adding it now
            stageWebView = new StageWebView();
            stageWebView.stage = this.stage;
            stageWebView.viewPort = new Rectangle(dragBar.x, dragBar.y+20, 800, 6)
        ]]>
         </fx:Script>
   </s:View> 
```

# iphone - 从实现 tableview 委托和数据源方法的基类继承

> ID：10975611
> 
> 赞同：0
> 
> 时间：2012-06-11T06:55:36.987
> 
> 标签：iphone, objective-c, ios, xcode, cocoa

我有两个从某个基类继承的类。在这些类中，我有相同的 tableview 方法，所以我决定将所有逻辑移到基类中。没有 nibs 文件，全部在代码中。但是由于某种原因，基类不响应 tableview 事件。将逻辑移动到基类是否正确，或者是否存在一些已知问题，或者我在实现中遗漏了什么？

我只是分配：

```
self.tableView.delegate = self;
self.tableView.dataSource = self; 
```

然后实施：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    if ([indexPath section] == 0) {
        return 320;
    }
    else {
        return 0;
    }
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (section == 0) {
        return [self.imagesArray count];
    }
    else {
        return 0;
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *cellIdentifier = @"mediaCell";
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (cell == nil) {
        if ([indexPath section] == 0) {
            cell = [[[UITableViewCell alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0f, 320.0f)] autorelease];

            UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0f, 320.0f)];
            imageView.tag = 1;
            [cell addSubview:imageView];
            [imageView release];
        }
    }

    NSURL *url = [NSURL URLWithString:[self.imagesArray objectAtIndex:[indexPath row]]];
    UIImageView *imageView = (UIImageView *)[cell viewWithTag:1];

    [imageView setImageWithURL:url];

    return cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
    if (section == 0) {
        return self.filterBar.bounds.size.height;
    }
    else {
        return 0;
    }
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    if (section == 0) {
        return self.filterBar;
    }
    else {
        return 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:58:44.933

如果您的意思是 tableview 委托方法，我认为您缺少在基类的定义中添加类别，您能否澄清这些方法是否是 UITableview 使用的委托？

# php - 如何在不下载整个文件的情况下计算远程位置的 MP3 文件的持续时间？

> ID：10975620
> 
> 赞同：4
> 
> 时间：2012-06-11T06:56:15.717
> 
> 标签：php, mp3, duration

我经营一个独立的音乐网站。我们有一个巨大的 MP3 文件存储库，存储在我们的 Amazon S3 CDN 上。我们从不在乎在上传时将音频的持续时间存储在数据库中。

现在，我需要以分钟和秒为单位的每个文件的长度。我不确定是否在所有文件中都设置了 TLEN ID3 信息，但我知道所有文件都是 128kbps 比特率。

由于我知道 mp3 的数量很大，我不想下载整个文件来计算它的音频长度。我想知道是否有更聪明的方法来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T07:18:15.587

几乎所有的 mp3 文件在文件开头都有 Xing/VBRi 帧，可以用很少的下载量来计算文件的时长。

在 PHP 中，您可能会：

*   读取前 10 个字节以获取 id3 部分的大小
*   读取 n 个字节，其中 n 是 id3 部分长度
*   读取 Xing/VBRi 帧所需的字节数
*   解析并关闭连接

阅读[http://www.codeproject.com/Articles/8295/MPEG-Audio-Frame-Header#XINGHeader](http://www.codeproject.com/Articles/8295/MPEG-Audio-Frame-Header#XINGHeader)了解如何解析 Xing 和 VBRi 帧。

# php - appendChild 和 insertBefore 在 DOMDocument 上调用时都在 root 之后追加节点

> ID：10975625
> 
> 赞同：2
> 
> 时间：2012-06-11T06:56:38.027
> 
> 标签：php, xml, domdocument, appendchild

我有一个函数可以将一个无值元素和一堆具有值的子元素添加到一个 xml 文件中，所以我编写它来获取两个参数 $tag(String the parent node) 和 $hash(Array $elm=>$elm_value)

```
function addUser($tag, $hash)
    {
        $dom = new DOMDocuemnt();
        $dom->preserveWhiteSpace = false;
        $dom->formatOutput = true;
        $dom->load('file');

        $parent = $dom->createElement($tag);
        foreach($hash as $elm => $value){
            $n = $dom->createElement($elm, $value);
            $parent->appendChild($n);
        }
        $dom->appendChild($parent);

        $dom->save('file');
        return $dom->saveXML();
    } 
```

唯一的问题是`$dom->appendChild($parent)`在根元素的结束标记之后附加所有内容，从而弄乱了我的 xml 文件。所以我尝试`$dom->insertBefore($parent)`了相同的结果。因此，我尝试了`$xpath = new DOMXPath($dom); $root = $xpath->query('/')->item(0); $root->appendChild($parent);`. 结果相同。然后我尝试使用 And 选择根元素，`$dom->getElementsByTagName(name of root)->item(0);`当它真正起作用时我感到很惊讶！但是如果我不知道标签名称怎么办？是否有另一种选择根元素的方法，以便调用 appendChild 或 inserBefore 将在根结束标记之前而不是之后添加元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T10:02:44.743

这似乎有效：

初始 XML 文件 -

```
<!-- test.xml -->
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <node Id="1">
        <Clicks>click1</Clicks>
    </node>
</root> 
```

PHP -

```
<?php

function addUser($tag, $hash) {
    $dom = new DOMDocument('1.0');
    $dom->preserveWhiteSpace = false;
    $dom->formatOutput = true;
    $dom->load('test.xml');

    $parent = $dom->createElement($tag);
    $dom->documentElement->appendChild($parent);
    foreach($hash as $elm => $value){
        $n = $dom->createElement($elm);
        $n->appendChild( $dom->createTextNode( $value ) );
        $parent->appendChild($n);
    }

    $dom->save('test.xml');
}

$arr = array( 'name' => 'pushpesh', 'age' => 30, 'profession' => 'SO bugger' );
addUser('user', $arr); 
```

XML 文件现在是 -

```
<!-- test.xml -->
<?xml version="1.0" encoding="UTF-8"?>
<root>
  <node Id="1">
    <Clicks>click1</Clicks>
  </node>
  <user>
    <name>pushpesh</name>
    <age>30</age>
    <profession>SO bugger</profession>
  </user>
</root> 
```

希望这可以帮助。

# c# - 使用正则表达式解析方法签名

> ID：10975627
> 
> 赞同：0
> 
> 时间：2012-06-11T06:56:47.047
> 
> 标签：c#, regex

我正在尝试使用正则表达式从文本中解析以下格式的方法：

```
mvAddSell[value, type1, reference(Moving, 60)] 
```

所以使用正则表达式，我正在执行以下操作

```
tokensizedStrs = Regex.Split(target, "([A-Za-z ]+[\\[ ][A-Za-z0-9 ]+[ ,][A-Za-z0-9 ]+[ ,][A-Za-z0-9 ]+[\\( ][A-Za-z0-9 ]+[, ].+[\\) ][\\] ])"); 
```

它正在工作，但问题是如果字符串以给定格式的方法开头，它总是在开头给我一个空数组，如果它出现在结尾，也会发生同样的情况。此外，如果字符串中出现了两个方法，它只会捕获第一个！这是为什么 ？

我认为导致解析器没有捕获两种方法的原因是我的模式中存在“。+”，我想做的是我想告诉它那个位置会有很多日期，所以我告诉它会有一系列字符，这是错的吗？

* * *

它用 ,e =D 吸引了……我用“.+?”替换了“.+” 这意味着尽可能少的任意数量的字符；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T08:05:17.827

你的目标对我来说很不清楚。你想要什么结果？如果您在该方法模式上进行拆分，您将在数组中获得模式之前的部分和模式之后的部分，而不是方法本身。

**回答你的问题**

回答你的具体问题：你`.+`是贪婪的，这意味着它将匹配任何东西直到最后一个`)]`（在同一行中，`.`默认情况下不匹配换行符）。
您可以通过在量词后添加 a 来更改此行为`?`以使其变得懒惰，然后它只匹配到第一个`)]`.

```
tokensizedStrs = Regex.Split(target, "([A-Za-z ]+[\\[ ][A-Za-z0-9 ]+[ ,][A-Za-z0-9 ]+[ ,][A-Za-z0-9 ]+[\\( ][A-Za-z0-9 ]+[, ].+?[\\) ][\\] ])"); 
```

**正则表达式中的问题**

您的正则表达式中还有其他几个问题。

1.  我认为您在编写 eg 时误解了字符类`[\\[ ]`。此构造将匹配 a`[`或空格。如果您想在`[`（对我来说是合乎逻辑的）之后允许可选空间，请这样做：`\\[\\s*`

2.  使用逐字字符串（带有前导`@`）来定义您的正则表达式以避免过度转义。

    ```
    tokensizedStrs = Regex.Split(target, @"([A-Za-z ]+\[\s*[A-Za-z0-9 ]+\s*,\s*[A-Za-z0-9 ]+\s*,\s*[A-Za-z0-9 ]+\(\s*[A-Za-z0-9 ]+\s*,\s*.+?\)s*\]\s*)"); 
    ```

3.  您可以通过避免重复部分来简化您的正则表达式

    ```
    tokensizedStrs = Regex.Split(target, @"([A-Za-z ]+\[\s*[A-Za-z0-9 ]+(?:\s*,\s*[A-Za-z0-9 ]+){2}\(\s*[A-Za-z0-9 ]+\s*,\s*.+?\)s*\]\s*)"); 
    ```

    `(?:\s*,\s*[A-Za-z0-9 ]+){2}`这是一个重复两次的非捕获组。

# facebook - Jquery 移动应用架构

> ID：10975629
> 
> 赞同：1
> 
> 时间：2012-06-11T06:56:53.393
> 
> 标签：facebook, wcf, jquery-mobile, wcf-data-services

我有几个问题，我想编写一个使用 JQUERY Mobile、WCF 或 ASP.NET WEB API 作为服务和 FACEBOOK AUTHENTICATION 的 Web 应用程序。

我希望我的应用程序的某些部分只对登录用户可见。当用户直接在移动浏览器中键入该页面的地址而不是显示页面内容（使用 JQUERY 或 JAVASCRIPT）时，如何确保将用户重定向到登录页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T07:26:06.560

使用基于会话的令牌在应用程序和网站之间进行服务通信。对于没有有效会话重定向到登录页面的请求。

# multithreading - Java Thread：如何使用 Thread 访问方法

> ID：10975640
> 
> 赞同：0
> 
> 时间：2012-06-11T06:57:42.180
> 
> 标签：multithreading

我有一个下载文件表单 URL 的 java 方法。例子，

```
private void(String info){
} 
```

我需要使用线程调用此方法。如何使用线程访问方法。？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:01:51.683

您可以创建该函数`static`并在线程内调用它：

```
ClassName.downloadFile("info..."); 
```

顺便说一句：你忘记了你的函数名。

您还可以创建一个对象：

```
ClassName yourClass = new ClassName(); 
```

并在您的线程中（yourClass 必须在线程中是最终的。）：

```
yourClass.downloadFile("info..."); 
```

# android - 具有两个入口点的 Android 应用程序。如何知道用户在应用程序对象的 onCreate() 上单击了哪个

> ID：10975645
> 
> 赞同：2
> 
> 时间：2012-06-11T06:58:02.230
> 
> 标签：android

我有一个带有两个入口点的 android 应用程序。即我在主屏幕上有两个图标，但在内部它们是单个应用程序。

我想知道如何根据图标单击在 Application 对象中设置一些参数。

更准确地说，我想维护一个范围变量，它将根据用户单击的图标来保存我的应用程序范围的信息。基于此，我的常见屏幕对于这两个入口点的行为会有所不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:16:37.877

Application has `getApplicationInfo()`and ApplicationInfo has [`loadIcon(PackageManager pm)`](http://developer.android.com/reference/android/content/pm/PackageItemInfo.html#loadIcon%28android.content.pm.PackageManager)- 检索与此项目关联的当前图形图标。够了吗？

我认为这[`getPackageName()`](http://developer.android.com/reference/android/content/Context.html#getPackageName%28%29)也可以使用，但是作者应该为这两种应用程序的变体使用不同的名称。

# php - 在提取它们的函数之外使用变量

> ID：10975647
> 
> 赞同：-1
> 
> 时间：2012-06-11T06:58:14.257
> 
> 标签：php, function, variables, global

我有一个带有指向实例化对象的关联键的数组。例如：

```
$MyArray = array();
$MyArray['Object_A'] = new Object_A();
$MyArray['Object_B'] = new Object_B();
$MyArray['Object_C'] = new Object_C(); 
```

我想对这个数组做的是将它提取到变量中作为对这些对象的引用。

```
extract($MyArray, EXTR_REFS); 
```

该语句有效，我可以像我一样使用该数组中的那些对象`$Var = new Object();`。

```
$Object_A->SomeMethod(); 
```

但是，当我在我定义的函数中提取它们时，它们不能再在该函数之外使用。它们可以像下面的示例一样在函数内部使用，但不能在外部使用。

```
function ExtractObj(&$Array)
{
    extract($Array, EXTR_REFS);

    $Object_A->SomeMethod(); // This works.
} 
```

所以我需要一种方法来使从该函数中提取的变量可以在函数外部使用。

```
function ExtractObj(&$Array)
{
    extract($Array, EXTR_REFS);
}

$Object_A->SomeMethod(); // Not working (Yet). 
```

注意：我尝试使用`global`,`static`变量修饰符或方法等，但一切都给我一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:03:57.207

是的，你是对的。变量具有*函数作用域*，因此它们在函数之外不可用。学习将变量作为参数传递到函数中，`return`从函数中获取所需的值并使用函数范围，它将使您的程序比一个大而杂乱的全局范围更好，更易于维护。

# c# - RowDataBound事件中的一行与Gridview的分页机制冲突

> ID：10975657
> 
> 赞同：1
> 
> 时间：2012-06-11T06:58:45.783
> 
> 标签：c#, gridview, paging, rowdatabound

这是我填充 GridView 控件的方式。我是从代码隐藏执行此操作，而不是从 .aspx 前端执行此操作。以下是我所拥有的极其简略的版本：

```
private void UpdateGridView()
{
    DataTable temptable = new DataTable();
    DataColumn idcol = new DataColumn();
    DataColumn titlecol = new DataColumn();
    idcol.ColumnName = "ID";
    titlecol.ColumnName = "Title";
    temptable.Columns.Add(idcol);
    temptable.Columns.Add(titlecol);

...(get data from the database, store it as variable "x")...

    DataRow tempdr;
    tempdr[idcol] = x.ID;
    tempdr[titlecol] = x.Title;

    temptable.Rows.Add(tempdr);

    GridView1.DataSource = temptable;
    GridView1.DataBind();
} 
```

要处理分页，将 GridView 的“AllowPaging”设置为 true，并且我有以下事件处理程序：

```
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView1.PageIndex = e.NewPageIndex;
    UpdateGridView();
} 
```

这很好用！

但是，我也有 RowDataBound 事件处理程序：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    e.Row.Cells[0].Visible = false; //hide the ID

    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        e.Row.Attributes["onmouseover"] = "this.style.cursor='pointer';this.style.textDecoration='underline';";
        e.Row.Attributes["onmouseout"] = "this.style.textDecoration='none';";
        e.Row.Attributes["onclick"] = "location.href='newsindex.aspx?NewsArticleID=" + e.Row.Cells[0].Text + "'";
    }
} 
```

我的目标是让行本身可以点击，并引导到另一个页面，其中的查询字符串等于该行的 ID。我需要 ID 列中的值，以便在创建行时可以访问它，以便将 ID 添加到链接的 QueryString 中。但我不希望 ID 列可见，所以我在行中添加：`e.Row.Cells[0].Visible = false;` 这样做会破坏分页功能。页码不再显示。如果我注释掉这一行，一切正常，但 ID 在 GridView 中可见。

**1）为什么？2）我可以做些什么来获得相同的功能，但尽可能少的更改？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T00:43:23.970

经过多次试验和错误，我想通了。这似乎是一个极其罕见的问题，因此互联网上没有太多关于它的信息，因为条件非常具体。我读到的大部分内容都在谈论，而不是将 ID 作为常规列放在 GridView 中，而是使用 DataKeyNames。

我确信这可能会奏效，但我需要尽快找到解决方案，因为我已经浪费了大量时间来解决这个问题。

解决方案在于 GridViews RowDataBound 事件：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow || e.Row.RowType == DataControlRowType.Header)
    {
        e.Row.Cells[0].Visible = false; //hide the ID
        e.Row.Attributes["onmouseover"] = "this.style.cursor='pointer';this.style.textDecoration='underline';";
        e.Row.Attributes["onmouseout"] = "this.style.textDecoration='none';";
        e.Row.Attributes["onclick"] = "location.href='newsindex.aspx?NewsArticleID=" + e.Row.Cells[0].Text + "'";
    }
} 
```

显然，如果您`e.Row.Cells[0].Visible = false;`像我在原始问题中所使用的那样无条件使用，它会以某种方式将其解释为使寻呼机也看不见的标志。解决方案是在 if 块中包含该`e.Row.Cells[0].Visible = false;`行，这表示仅使 DataRows 的第一个单元格和标题（而不是其他元素，如寻呼机）不可见。

编辑：我刚刚意识到，如果您使用 GridView 排序，上面的内容会搞砸您的排序。为了保持启用排序，并显示寻呼机，并隐藏第一列，这样做了：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow || e.Row.RowType == DataControlRowType.Header)
    {
        e.Row.Cells[0].Visible = false; //hide the ID
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            e.Row.Attributes["onmouseover"] = "this.style.cursor='pointer';this.style.textDecoration='underline';";
            e.Row.Attributes["onmouseout"] = "this.style.textDecoration='none';";
            e.Row.Attributes["onclick"] = "location.href='newsindex.aspx?NewsArticleID=" + e.Row.Cells[0].Text + "'";
        }
    }
} 
```

# javascript - 如何使用请求对象中设置的属性在 javascript 中创建数组？

> ID：10975658
> 
> 赞同：0
> 
> 时间：2012-06-11T06:58:56.047
> 
> 标签：javascript

我需要在 javascript 中创建一个数组，数组的元素应该来自服务器端。

为此，我所做的是，在 servlet 中，

```
String[] valuesArray = {"val1","val2","val3"};
request.setAttribute("valuesArray",valuesArray); 
```

在 Jsp/javaScript 中： `var arrayObj = new Array(${'valuesArray'});`

但是，这不起作用.. 最终，arrayObj 应该包含 {"val1","val2","val3"} 作为元素。有人可以建议我哪里出错了或者让我知道如何处理这个要求吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:09:16.573

不幸的是，我还没有找到更简单的方法来做到这一点。我一直都是这样——

```
<script type="text/javascript">
   var arrayOb = new Array();
   <%
      String[] list = (String[])request.getAttribute("valuesArray");
      for(int count=0; count <list.length; count++) {
   %>
         arrayOb[<%= count %>]='<%= list[count] %>';//dont miss the single quotes here
   <% } %>
</script> 
```

密切注意所有引号和 scriplet 标签。

您还可以在此处使用 jsp for loop 或 c:for 代替 scriplet。

# ios5 - 基于 NSFetchedResultsController 的 UITableViewCell 背景颜色 - 奇怪的问题

> ID：10975660
> 
> 赞同：0
> 
> 时间：2012-06-11T06:59:03.843
> 
> 标签：ios5, uitableview, nsfetchedresultscontroller

这让我彻底疯了。

我有一个 UITableView，其中的单元格通过 NSFetchedResultsController 填充，它们的背景颜色应该基于核心数据参数之一设置。

此表视图位于 UISplitViewController 的主视图中，所选单元格需要保持可见选中状态以指示详细视图中显示的内容。

根据其他几个 Stack Overflow 问题的指导，我了解到配置单元的理想位置是在 willDisplayCell 委托调用期间，如下所示：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
WorkTask *workTask = (WorkTask*) [self.fetchedResultsController objectAtIndexPath:indexPath];

if ([workTask.strStatus isEqualToString:@"A"]) {
    cell.backgroundColor = [self colorWithHexString:@"fffdcf"]; 
    // cell.textLabel.backgroundColor = [self colorWithHexString:@"fffdcf"];
    // cell.detailTextLabel.backgroundColor = [self colorWithHexString:@"fffdcf"];

} else if ([workTask.strStatus isEqualToString:@"B"]) {
    cell.backgroundColor = [self colorWithHexString:@"cfffd1"];
    // cell.textLabel.backgroundColor = [self colorWithHexString:@"cfffd1"];
    // cell.detailTextLabel.backgroundColor = [self colorWithHexString:@"cfffd1"];

} else if ([workTask.strStatus isEqualToString:@"C"]) {
    cell.backgroundColor = [self colorWithHexString:@"ffcfcf"];
    // cell.textLabel.backgroundColor = [self colorWithHexString:@"ffcfcf"];
    // cell.detailTextLabel.backgroundColor = [self colorWithHexString:@"ffcfcf"];
} else {
    cell.backgroundColor = [self colorWithHexString:@"ffffff"];
    // cell.backgroundColor = cell.contentView.backgroundColor;
} 
```

这主要是一种工作。但...

根据我如何使用不同的变体来实现这一点，我最终会在 textLabel 和 detailTextLabel 后面有时（而且只是有时？！？）忽略背景颜色。或导致单元格在选择时显示不正确。或者在没有背景颜色的情况下显示复选标记指示器。或者将新项目添加到显示在表格中的核心数据数据库中，但单元格没有背景颜色，但文本标签具有背景颜色。

无论我做什么，我都没有找到一种简单而直观的方法来使事情的整体表现符合预期 - 特别是在以编程方式选择单元格时。

事实上 - 单元格选择似乎可能是问题的根源。选定的单元格通常是在我将选择更改为另一个单元格后最终绘制不正确的单元格，特别是如果在选择单元格时单元格的颜色发生了变化。

有没有任何例子说明这应该如何工作？！？！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T23:10:25.243

如果我是你，我会创建一个`UITableViewCell`包含你自己的 UILabel 的子类，`titleLabel/subtitleLabel`并停止使用 textLabel/detailTextLabel。在 xib 文件中，您可以更改标签和单元格的背景颜色。当我使用自定义单元格而不是默认单元格时，我从未遇到过您遇到的那种问题。

下面是如何从 xib 加载 UITableViewCell 的示例：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:@"CustomCell"];
    if (cell == nil) {
        // Load the top-level objects from the custom cell XIB.
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
        // Grab a pointer to the first object (presumably the custom cell, as that's all the XIB should contain).
        cell = [topLevelObjects objectAtIndex:0];
    }

    cell.titleLabel.text = @"whatever";
    cell.subtitleLabel.text = @"whatever";

    return cell;
} 
```

您也可以尝试设置单元格内容视图的背景颜色。

```
cell.contentView.backgroundColor = ...; 
```

如果你真的想不通，那么在 UITableViewCell 子类中，你总是可以将自己的 UIView 放在单元格的背景中，然后更改该视图的背景颜色。

`willDisplayCell:forRowAtIndexPath:`在被调用后可能不会`insertRowsAtIndexPaths:`被调用（即，当您使用 fetchedresultscontroller 将项目添加到核心数据中时）。如果绝对有必要，也许你应该尝试设置单元格的背景颜色和它的 contentView`cellForRowAtIndexPath:`和`willDisplayCell:forRowAtIndexPath:`.

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-22T14:22:56.413

由于某些奇怪的原因，UITableViewCell 对象的背景颜色只能在绘制单元格之前设置。在你的 UITableView 的委托中实现这个方法：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath 
```

在那里设置单元格的背景颜色，它将按照您想要的方式绘制。

# c++ - 如何使用 C++ 将 csv 文件数据存储到 mysql 表中？

> ID：10975662
> 
> 赞同：2
> 
> 时间：2012-06-11T06:59:15.050
> 
> 标签：c++, mysql, c++builder

文件内容是这样的

```
'COGT','COGT','COGENT ORD'
'COG','COG','CABOT OIL & GAS ORD'
'COGZF','COGZF','COGSTATE ORD'
'COHG','COHG','CHEETAH OIL & GAS ORD'
'COHIQ','COHIQ','COHO ENERGY ORD'
'COHM','COHM','ALL AMERICAN GROUP ORD'
'COHN','COHN','COHEN ORD'
'COHR','COHR','COHERENT ' 
```

但是我需要将它放入一个包含列名称的mysql数据库中

```
NAME   |      DESCRIPTION
cogt   |      cogt ord
cog    |      cabot oil 
```

如果您有任何想法，请与我分享

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T07:03:01.433

然后，您可以通过运行将其导入 MySQL 表：

```
load data local infile 'input_file.csv' into table tblUniq fields terminated by ','
enclosed by '"'
lines terminated by '\n'
(NAME, DESCRIPTION) 
```

# cassandra - Cassandra 节点所有权为 0.00%

> ID：10975665
> 
> 赞同：4
> 
> 时间：2012-06-11T06:59:44.383
> 
> 标签：cassandra, cluster-computing

我有一个带有 2 个节点的 Cassandra 集群。我正在使用 NetworkTopologyStrategy 我试图将 Cassandra 中键空间的复制因子增加到 2。我执行了以下步骤： UPDATE KEYSPACE demo WITH strategy_options = {DC1:2,DC2:2}; 在两个节点上然后我在两个节点上运行 nodetool repair 然后我运行我的 Hector 代码来计算数据库中的行数和列数。我收到以下错误： Unavailable Exception 另外，当我运行命令 ./nodetool –h ip_address ring 时，我发现两个节点的所有权都是 0%。请告诉我我应该如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:06:37.013

您提到“两个节点”，这意味着您总共有两个节点，而不是您的策略选项所建议的两个数据中心。指定 {DC1:2,DC2:2} 至少需要四个节点（每个 DC 中有两个节点以满足复制因子），但不建议这样做，因为基本上所有节点都是故障点。

一个最小的 Cassandra 集群应该至少有三个节点，在这种情况下，两个 RF 将允许一个节点关闭而不会关闭系统。听起来您有一个集群（而不是两个数据中心），所以您真正需要的是一个节点（总共 3 个），RF=2，使用 SimpleStrategy 而不是 NetworkTopologyStrategy。

# android - 在pdf android中插入图像

> ID：10975668
> 
> 赞同：3
> 
> 时间：2012-06-11T06:59:55.830
> 
> 标签：android, pdf-generation, android-droidtext

如何使用`DroidText`我尝试过以下代码在 pdf 中添加图像 -

```
Document document = new Document();
File f=new File(Environment.getExternalStorageDirectory(), "SimpleImages.pdf");
PdfWriter.getInstance(document,new FileOutputStream(f));
document.open();
document.add(new Paragraph("Simple Image"));

Image image =Image.getInstance("file:///mnt/sdcard/img.png");
document.add(image);
document.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:33:01.720

解决了...

```
Image image =Image.getInstance("sdcard/img.png"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:23:19.157

你可以这样做。它正在工作

图片image = Image.getInstance("file:///mnt/sdcard/Wallpapers/i_love_you.jpg"); 文档.添加（图像）；

# javascript - 关于如何比较多个数组的确切顺序和内容的建议

> ID：10975670
> 
> 赞同：0
> 
> 时间：2012-06-11T07:00:05.573
> 
> 标签：javascript

目前我正在尝试使用 for..in 循环比较 2 个数组的内容，但没有成功。我熟悉如何分别获取每个数组的内容，但不知道如何匹配这些内容中的每一个。基本上，如果数组的相同索引值中的 2 个值不匹配，我想返回 false 否则继续。我最近的尝试是我尝试使用不同的变量将两个数组放在同一个 for..in 中，然后比较这些。如果有人能就此提出建议，那就太好了。

JS

```
var list1 = [1, 2, 3, 4, 5, 6];
var list2 = [1, 2, 3, 4, 5, 'e'];

var i, j;
for (i in list1 && j in list2) {

    if (list1[i] !== list2[j]) {
        return false
    } else {
        return true
    }
}

/*for ( j in list2 ) {
console.log( list2[j] )        
}*/​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T07:04:02.010

使用普通的 for 循环对数组元素进行迭代：

```
if (list1.length != list2.length) {
    // Different length, cannot be equal
    return false;
}

// Check if there is a mismatch
for (var i = 0; i < list1.length; i++) {
    if (list1[i] !== list2[i]) {
        return false; // Return here, because we don't need to compare the rest
    }
}

return true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T07:03:25.233

```
var i, l = list1.length;

for( i = 0; i < l; ++i ) {
    if( list1[i] !== list2[i] ) {
        return false; //Compare one by one
    }
}

if( i !== list2.length ) {
    return false; // In case list2 was longer than list1
}

return true; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T07:03:08.037

为此使用常规循环，并且不要`true`在循环内返回，那么您只会比较第一个元素：

```
for (var i = 0; i < list1.length; i++) {
    if (list1[i] !== list2[i]) {
        return false
    }
}
return true; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T08:20:21.987

这只是解决有问题的样本数据问题的最简单方法，而不是好奇心。

```
 return list1.toString() == list2.toString(); 
```

它将适用于大多数数据排除：带逗号的字符串和检查类型是否相等。

顺便提一句。

我认为我找到了其他方式 - 讨论：

```
return   !(list1<list2 || list1>list2); 
```

任何人？

# c# - c#将日期时间从datagridview导出到excel希腊区域设置

> ID：10975672
> 
> 赞同：1
> 
> 时间：2012-06-11T07:00:12.713
> 
> 标签：c#, excel, datetime, datagridview, office-interop

我的问题是，我有 mysql 数据库，当我插入数据时：

> 字符串日期 = dateTimePicker1.Value.ToString("yyyy:MM:dd");

```
MySqlCommand cmd = new MySqlCommand ("INSERT INTO EXPENSES (ID, E_DATE, AMMOUNT, PERSON, COMMENTS, T_ID) VALUES (@id, @date,@ammount, @person, @comments, @tid)",myMySqlConnection);
                    cmd.Parameters.AddWithValue("@id", id);
                    cmd.Parameters.AddWithValue("@date", date);
                    cmd.Parameters.AddWithValue("@ammount", ammount);
                    cmd.Parameters.AddWithValue("@person", person);
                    cmd.Parameters.AddWithValue("@comments", comments);
                    cmd.Parameters.AddWithValue("@tid", tid);
                    cmd.ExecuteNonQuery(); 
```

当我在 datagridview 中查看它们时：

```
string test = startdate1.ToString("yyyy:MM:dd");
        string test2 = enddate1.ToString("yyyy:MM:dd");
        DataTable table1 = new DataTable();
        cmd1 = new MySqlCommand("SELECT E_DATE, AMMOUNT, PERSON, COMMENTS, T_ID FROM EXPENSES WHERE DATE (E_DATE) BETWEEN '" + test + "' AND '" + test2 + "' AND ID =@userid ORDER BY E_DATE ASC", myMySqlConnection);            
        cmd1.Parameters.AddWithValue("@userid", id);
        da1.SelectCommand = cmd1;
        da1.Fill(table1);
        BindingSource bSource1 = new BindingSource();
        bSource1.DataSource = table1;
        dataGridView1.DataSource = bSource1; 
```

现在我想将它们导出到 excel 中：

```
Excel_12.Application oExcel_12 = null;
            Excel_12.Workbook oBook = null;
            Excel_12.Sheets oSheetsColl = null;collection
            Excel_12.Worksheet oSheet = null;
            Excel_12.Range oRange = null;
            Object oMissing = System.Reflection.Missing.Value;
            oExcel_12 = new Excel_12.Application();
            oExcel_12.Visible = true;
            oExcel_12.UserControl = true;
            System.Globalization.CultureInfo ci = System.Globalization.CultureInfo.CurrentCulture;
            oBook = oExcel_12.Workbooks.Add(oMissing);
            oSheetsColl = oExcel_12.Worksheets;
            oSheet = (Excel_12.Worksheet)oSheetsColl.get_Item("Sheet1");
            // Export titles
            for (int j = 0; j < myDataGridView.Columns.Count; j++)
            {
                oRange = (Excel_12.Range)oSheet.Cells[4, j + 1];
                oRange.Value2 = myDataGridView.Columns[j].HeaderText;
                oRange.Cells[1].ColumnWidth = 13;

            }
            // Export data
            for (int i = 0; i < myDataGridView.Rows.Count; i++)
            {
                for (int j = 1; j < myDataGridView.Columns.Count; j++)
                {
                    oRange = (Excel_12.Range)oSheet.Cells[i + 5, j + 1];
                    oRange.Value2 = myDataGridView[j, i].Value;
                }
            }//This is for everything except the dates

            for (int i = 0; i < myDataGridView.Rows.Count; i++)
            {
                for (int j = 0; j < 1; j++)
                {

                    oRange = (Excel_12.Range)oSheet.Cells[i + 5, j + 1];
                    oRange.Cells[1].NumberFormat = "dd/MMM/yyyy;@";
                    DateTime test = Convert.ToDateTime( myDataGridView[j, i].ToString(),ci);
                    oRange.Value2 = test; //test.Remove(test.Length - 11);
                 //   oRange.NumberFormat = "dd-MM-yyyy";
                }
            }//This is for the dates

            //oBook.Close(false, oMissing, oMissing);
            oBook = null;
            //oExcel_12.Quit();
            oExcel_12 = null;
            // Collect garbage.
            GC.Collect(); 
```

问题是，当区域设置设置为 GREEK 时，Excel 无法识别日期的数字格式。如果区域设置设置为英语 - 美国，则日期没有问题。我怎样才能让它识别日期而不必担心计算机的区域设置。任何帮助将不胜感激，因为这些希腊语让我发疯。最好的问候乔治乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T08:21:30.973

```
System.Globalization.CultureInfo ci = System.Globalization.CultureInfo.CurrentCulture; 
```

这将返回当前文化是“el-GR”

接着：

```
string test = (Convert.ToDateTime(myDataGridView[j, i].Value).ToShortDateString());
                    DateTime asd = Convert.ToDateTime (test,ci);
                    oRange.NumberFormat = "dd-MMM-yyyy";
                    oRange.Value2 = asd; 
```

我们获取值并将其作为字符串提供，然后根据文化信息（即 el-GR）将其转换为日期时间，并为 excel 提供日期值并按照您想要的方式对其进行格式化

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T07:05:10.690

我认为您可以通过以下方式解决此问题：

```
oRange = (Excel_12.Range)oSheet.Cells[i + 5, j + 1];
oRange.Cells[1].NumberFormat = "dd/MMM/yyyy;@";
DateTime test = Convert.ToDateTime( myDataGridView[j, i].ToString(),ci);
oRange.Value2 = test.ToOADate(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T07:35:16.850

```
Microsoft.Office.Interop.Excel.Application ExcelApp = new Microsoft.Office.Interop.Excel.Application();

    ExcelApp.Application.Workbooks.Add(Type.Missing);

    // Change properties of the Workbook 
    ExcelApp.Columns.ColumnWidth = 20;

    // Storing header part in Excel
    for (int i = 1; i < dataGridView1.Columns.Count + 1; i++)
    {
        ExcelApp.Cells[1, i] = dataGridView1.Columns[i - 1].HeaderText;
    }

    // Storing Each row and column value to excel sheet
    for (int i = 0; i < dataGridView1.Rows.Count - 1; i++)
    {
        for (int j = 0; j < dataGridView1.Columns.Count; j++)
        {
            ExcelApp.Cells[i + 2, j + 1] = dataGridView1.Rows[i].Cells[j].Value.ToString();

        }
    }

    ExcelApp.ActiveWorkbook.SaveCopyAs("F:\\Exportdata\\" + "DealEntry.xls");
    ExcelApp.ActiveWorkbook.Saved = true;
    MessageBox.Show("It's Saved on Path F:\\Exportdata\\DealEntry.Xls");
    ExcelApp.Quit();
    ExcelApp.Visible = true;
    string workbookPath = "F:\\Exportdata\\" + "DealEntry.xls";  // Add your own path here
    Microsoft.Office.Interop.Excel.Workbook excelWorkbook = ExcelApp.Workbooks.Open(workbookPath, 0,
        false, 5, "", "", false, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "", true,
        false, 0, true, false, false);

}
catch { } 
```

# c# - 如何使用 LINQ 检查所有项目是否属于同一类型

> ID：10975674
> 
> 赞同：6
> 
> 时间：2012-06-11T07:00:27.200
> 
> 标签：c#, linq

```
public class  Product
{
public string Name {set; get;}
public string Type {set; get;}
}

public class ProductType
{
public string Name{get;set}
}

var products = GetProducts();
var productTypes = GetProductTypes(); 

bool isValid = products.All(x=>x.Type == ??) // Help required 
```

我想确保“产品”中的所有产品都只属于产品类型。

如何在 linq 中实现这一点。任何帮助都非常感谢我对 LINQ 的东西感到震惊？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-11T07:03:30.093

您可以使用 Distinct 和 Count：

```
isValid = products.Select(x => x.Type).Distinct().Count() == 1; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-11T07:03:23.003

您可以检查所有项目是否与第一个项目具有相同的类型：

```
bool isValid = products.All(x => x.Type == products.First().Type); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-11T07:03:44.843

```
var isValid = products.Select(p => p.Type).Distinct().Count() == 1; 
```

或者

```
var first = products.FirstOrDefault();
var isValid == (first == null) ? true : products.All(p => p.Type == first.Type); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T07:23:20.543

如果您只想检查 LINQ 中每个元素的类型，那么 -

```
class A{
}

class B{
}

static void Main(string[] args)
{
       ArrayList arr = new ArrayList();
       arr.Add(new A());
       arr.Add(new A());
       arr.Add(new A());
       arr.Add(new B());
       arr.Add(new A());
       int count= arr.ToArray().Count(x=> !x.GetType().Equals(typeof(A)));
} 
```

上面的示例，检查数组中每个元素的类型，然后从数组中获取非类类型 A 的元素的计数。

我希望你有同样的情况，希望这会有所帮助！

# maven - 如何构建 WSO2 存储库？

> ID：10975679
> 
> 赞同：3
> 
> 时间：2012-06-11T07:00:39.513
> 
> 标签：maven, maven-2, wso2, wso2esb

大家好，我正在尝试通过 maven-2.2.1 构建 wso2-4.4.1，当我运行“mvn clean install”命令时它会运行，但会出现很多错误无法找到资源存储库（有很多存储库名称） ）。我可以添加任何其他存储库吗？

如果有人有时间请帮助我thanx....

下面给出了一些错误...

```
[INFO] Unable to find resource 'org.jvnet.hudson.svnkit:svnkit:jar:1.1.4-hudson-4' in repository oauth (http://oauth.googlecode.com/svn/code/maven)

[INFO] Unable to find resource 'org.jvnet.hudson.svnkit:svnkit:jar:1.1.4-hudson-4' in repository sonatype (http://oss.sonatype.org/content/repositories/openid4java)

[INFO] Unable to find resource 'org.apache.felix:felix-parent:pom:2.1' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/)
[INFO] Unable to find resource 'org.apache:apache:pom:9' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/)

[INFO] Unable to find resource 'org.apache.felix:maven-bundle-plugin:maven-plugin:2.3.7' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/)

[INFO] Unable to find resource 'biz.aQute:bndlib:pom:1.50.0' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/)
[INFO] Unable to find resource 'org.apache.felix:org.apache.felix.bundlerepository:pom:1.6.6' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/)

[INFO] Unable to find resource 'org.osgi:org.osgi.core:pom:4.1.0' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/)
[INFO] Unable to find resource 'org.easymock:easymock:pom:2.4' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/)
[INFO] Unable to find resource 'org.apache.maven:maven-core:pom:2.0.7' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/)

[INFO] Unable to find resource 'org.apache.maven:maven:pom:2.0.7' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/)
INFO] Unable to find resource 'org.apache.maven:maven-parent:pom:5' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/)

[INFO] Unable to find resource 'org.apache.maven:maven-settings:pom:2.0.7' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/)

[INFO] Unable to find resource 'org.apache.maven:maven-model:pom:2.0.7' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/)

[INFO] Unable to find resource 'org.codehaus.plexus:plexus-container-default:pom:1.0-alpha-9-stable-1' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/)
[INFO] Unable to find resource 'org.apache.maven.wagon:wagon-file:pom:1.0-beta-2' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/)
[INFO] Unable to find resource 'org.apache.maven.wagon:wagon-providers:pom:1.0-beta-2' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/)

[INFO] Unable to find resource 'org.apache.maven:maven-plugin-parameter-documenter:pom:2.0.7' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/)

[INFO] Unable to find resource 'org.apache.maven.wagon:wagon-http-lightweight:pom:1.0-beta-2' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/)
[INFO] Unable to find resource 'org.apache.maven.wagon:wagon-http-shared:pom:1.0-beta-2' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/)
[INFO] Unable to find resource 'jtidy:jtidy:pom:4aug2000r7-dev' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/)

INFO] Unable to find resource 'org.apache.geronimo.genesis:genesis:pom:1.4' in repository apache-incubator (http://people.apache.org/repo/m2-incubating-repository/) 

[INFO] Unable to find resource 'org.apache.geronimo.genesis.config:config:pom:1.4' in repository apache-incubator (http://people.apache.org/repo/m2-incubating-repository/)
[INFO] Unable to find resource 'org.slf4j:slf4j-api:pom:1.5.8' in repository jansi (http://jansi.fusesource.org/repo/release) 

[INFO] Unable to find resource 'org.sonatype.gossip:gossip:pom:1.0' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/)
INFO] Unable to find resource 'org.codehaus.gmaven.runtime:gmaven-runtime-1.6:pom:1.2' in repository repository.dev.java.net-maven2 (http://download.java.net/maven/2/) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T08:31:06.453

你得到什么错误？之前的一些讨论可能会对您有所帮助。

1.  [构建 WSO2 Carbon 标签的合适方法是什么？](https://stackoverflow.com/questions/10365363/what-is-the-appropriate-way-to-build-wso2-carbon-tags/10413655#10413655)

2.  [如何构建 WSO2 身份服务器](https://stackoverflow.com/questions/10332817/how-to-build-wso2-identity-server/10348460#10348460)

谢谢

蒂利尼

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:03:16.657

你能告诉我你下载代码的svn位置吗？您要构建哪个产品？

如果您关注 4.0.2 分支，以下是构建 carbon 4.0.2 分支的构建过程。请使用 maven 3 构建它。

1.  从 [a]、[b]、[c] 签出代码库。
2.  从“orbit/tags/4.0.2/patch-releases/4.0.2/pom.xml”做一个干净的构建
3.  然后从“kernel/tags/4.0.2/patch-releases/4.0.2/pom.xml”构建内核模块
4.  最后构建平台补丁发布 pom "/platform/tags/4.0.2/patch-releases/4.0.2/pom.xml"

一个。[https://svn.wso2.org/repos/wso2/carbon/orbit/tags/4.0.2/](https://svn.wso2.org/repos/wso2/carbon/orbit/tags/4.0.2/)

湾。[https://svn.wso2.org/repos/wso2/carbon/kernel/tags/4.0.2/](https://svn.wso2.org/repos/wso2/carbon/kernel/tags/4.0.2/)

C。[https://svn.wso2.org/repos/wso2/carbon/platform/tags/4.0.2/](https://svn.wso2.org/repos/wso2/carbon/platform/tags/4.0.2/)

# json - 如何将文件格式从 json 更改为 KML？

> ID：10975680
> 
> 赞同：0
> 
> 时间：2012-06-11T07:01:05.583
> 
> 标签：json, google-maps-api-3, kml

我有`json`世界国家格式的文件，我想将其更改为`KML`.

可能吗 ？如果是的话，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T08:52:01.453

[http://en.wikipedia.org/wiki/Keyhole_Markup_Language](http://en.wikipedia.org/wiki/Keyhole_Markup_Language)

由于 KML 只是 XML，如果你有点的 JSON 数据，你可以用它发出一个 XML 字符串......（连接并返回）

# java - 使用 Jackson 将 json 数组反序列化为 java 对象

> ID：10975685
> 
> 赞同：1
> 
> 时间：2012-06-11T07:01:56.233
> 
> 标签：java, json, jackson, pojo

给定以下json：

```
{ "response": {
"totalProcessingTime": "271.0",
"resultSets": {
    "products": {
        "firstHit": "1",
        "lastHit": "10",
        "totalHits": "77",
        "hits": [ 
            {   
                "number": "1",
                "dmsubcategory": "TV, lyd og bilde",
                "collection": "tilbud",
                "title": "<b>TV</b> Panasonic 47 TX-LU 7ET5Y"
            },
            {   
                "number": "2",
                "dmsubcategory": "TV, lyd og bilde",
                "collection": "tilbud",
                "title": "<b>TV</b> Panasonic 47 TX-LU 7ET5Y"
            },
            {   
                "number": "3",
                "dmsubcategory": "TV, lyd og bilde",
                "collection": "tilbud",
                "title": "<b>TV</b> Panasonic 47 TX-LU 7ET5Y"
            }
            ]
        }
    }
  }
} 
```

我正在使用以下代码调用杰克逊：

```
ObjectMapper mapper = new ObjectMapper();
SearchResult searchResult = mapper.readValue(new URL(jsonUrl + queryUrl), SearchResult.class); 
```

我已经为产品类看起来像的整个层次结构收集了 POJO：

```
public class Products {

public List<Hits> hits;
public String totalHits;

@JsonAnySetter
public void handleUnknown(String key, Object value) {
    // do something: put to a Map; log a warning, whatever
}

public List<Hits> getHits() {
    return hits;
}

public void setHits(List<Hits> hits) {
    this.hits = hits;
}

public String getTotalHits() {
    return totalHits;
}

public void setTotalHits(String totalHits) {
    this.totalHits = totalHits;
}

} 
```

和命中类：

```
public class Hits {

public String number;
public String title;

public String getNumber() {
    return number;
}
public void setNumber(String number) {
    this.number = number;
}
public String getTitle() {
    return title;
}
public void setTitle(String title) {
    this.title = title;
}

@JsonAnySetter
public void handleUnknown(String key, Object value) {
    // do something: put to a Map; log a warning, whatever
}

} 
```

所有其他属性都映射正确，但不是包含命中的列表。都是空的。我怎样才能映射它以使其正确？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T07:41:09.333

您的型号不兼容。

为了看看出了什么问题，也许有一些 toStrings 是个好主意，你可以很容易地看到映射失败的地方。

您有一个需要保存属性响应的对象，需要保存属性 resultSets 需要保存需要保存命中的属性 products。

我是这样实现的：

```
GeneralResponse
  - Response
    - ResultSets
      - Products
        - Hits
          - number
          - title 
```

请测试以下实现：

```
package snippet;

public class GeneralResponse {

    private Response response;

    public Response getResponse() {
        return response;
    }

    public void setResponse(Response response) {
        this.response = response;
    }

    @Override
    public String toString() {
        return "GeneralResponse [response=" + response + "]";
    }

}

package snippet;

public class ResultSets {

    private Products products;

    public Products getProducts() {
        return products;
    }

    public void setProducts(Products products) {
        this.products = products;
    }

    @Override
    public String toString() {
        return "ResultSets [products=" + products + "]";
    }

}

package snippet;

import java.util.List;

import org.codehaus.jackson.annotate.JsonAnySetter;

public class Products {

    public List<Hits> hits;
    public String totalHits;

    @JsonAnySetter
    public void handleUnknown(String key, Object value) {
        // do something: put to a Map; log a warning, whatever
    }

    public List<Hits> getHits() {
        return hits;
    }

    public void setHits(List<Hits> hits) {
        this.hits = hits;
    }

    public String getTotalHits() {
        return totalHits;
    }

    public void setTotalHits(String totalHits) {
        this.totalHits = totalHits;
    }

    @Override
    public String toString() {
        return "Products [hits=" + hits + ", totalHits=" + totalHits + "]";
    }

}

package snippet;

import org.codehaus.jackson.annotate.JsonAnySetter;

public class Response {

    private ResultSets resultSets;

    public ResultSets getResultSets() {
        return resultSets;
    }

    public void setResultSets(ResultSets resultSets) {
        this.resultSets = resultSets;
    }

    @Override
    public String toString() {
        return "Response [resultSets=" + resultSets + "]";
    }

    @JsonAnySetter
    public void handleUnknown(String key, Object value) {
        // do something: put to a Map; log a warning, whatever
    }

}

package snippet;

import org.codehaus.jackson.annotate.JsonAnySetter;

public class Hits {

    public String number;
    public String title;

    public String getNumber() {
        return number;
    }

    public void setNumber(String number) {
        this.number = number;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    @JsonAnySetter
    public void handleUnknown(String key, Object value) {
        // do something: put to a Map; log a warning, whatever
    }

    @Override
    public String toString() {
        return "Hits [number=" + number + ", title=" + title + "]";
    }

} 
```

毕竟你可以做这样的事情：

```
 ObjectMapper om = new ObjectMapper();
    Object r = om.readValue(inputStream, GeneralResponse.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:28:57.467

代码看起来不错。错误可能在json响应中

```
"title": "<b>TV</b> Panasonic 47”TX-LU 7ET5Y" 
```

47 之后和 TX 之前的反引号可能很麻烦。请检查您是否可以解析此响应。

# python - 如何使用部分日期字符串在熊猫中进行分组？

> ID：10975690
> 
> 赞同：3
> 
> 时间：2012-06-11T07:02:14.117
> 
> 标签：python, group-by, pandas

```
 Date Description 
0  6/09/2012      Amazon
1  6/09/2012      iTunes
2  6/08/2012      iTunes
3  6/08/2012    Building
4  6/08/2012   Slicehost 
```

我有一个`DataFrame`像上面的。我可以使用这样的函数 get_day() 挑选出上述日期字符串的日期部分：

```
def get_day(date_string):
    d = datetime.strptime(date_string, '%m/%d/%Y')
    return d.day 
```

现在我如何将这个函数传递给上面的 DataFrame 以获取 groupby 在当天而不是 datestring 本身。通过查看文档无法弄清楚。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T07:10:08.177

```
df.groupby(get_day) 
```

但无论如何我都会先将日期字符串转换为日期时间对象。

另一个问题是您正在调用`.day`它返回一个月中的某一天（数字 1-31）。你可能想打电话`.date()`：

```
def get_day(date_string):
    return datetime.strptime(date_string, '%m/%d/%Y').date() 
```

或直接

```
df.groupby(lambda x: datetime.strptime(date_string, '%m/%d/%Y').date()) 
```

# google-analytics - 谷歌分析：为什么目标流量页面浏览量与网站内容不同？

> ID：10975691
> 
> 赞同：0
> 
> 时间：2012-06-11T07:02:19.603
> 
> 标签：google-analytics

在 Google Analytics 中，我使用我网站的真实（非虚拟）页面 url 设置了一个简单的 URL 目标。

我可以在转化/目标/目标流中看到的此目标的浏览量约为内容/网站内容中为页面网址（我用来在 URL 目标中设置目标的那个）报告的浏览量的 50%。

我想知道这是否正确，为什么？如果 Goal Flow 中的 Pageviews 数和 Content 中的 Pageviews 数引用相同的 url，它们不应该相同吗？或者，也许，在目标流中使用了唯一页面浏览量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:50:25.417

我认为这是因为谷歌分析每次会话只会跟踪一次目标转化，这就是页面浏览量高于目标转化的原因。

[看这个论坛的第一个答案，他的解释很好](http://productforums.google.com/forum/#!topic/analytics/Oq1L50Q3Fos)

# asp.net - FaceBook 与类似于 Yahoo.com 的 Asp.Net 网站集成

> ID：10975695
> 
> 赞同：0
> 
> 时间：2012-06-11T07:02:34.283
> 
> 标签：asp.net, facebook

![在此处输入图像描述](../Images/201d9ef2ee96cf108acddf9638df4b5b.png)

有没有像我在[www.news.yahoo.com](http://news.yahoo.com)中看到的用于 Facebook 连接的上图的扩展或小部件？我也想在我的 asp.net 网站中包含相同的内容......

```
Functionality : 

Your Activity : Shows the News that has been read after logged in.

                It Posts in Face Book activities.

Social ON : To allow the script to post in FB

Social OFF : To not allow the script to post in FB 
```

当我使用 Firebug 调查 yahoo 使用了什么时，我可以看到这个......

```
<div id="mediasocialchromelogin" class="yom-mod yom-socialchrome-login">
<h4 class="login_title">You on Yahoo! News</h4>
<a class="img" role="button" href="#" id="yui_3_5_1_1_1339394442690_1094">
<img width="50" height="50" data="{"username":"George","userid":"131343507"}" src="https://fbcdn-profile-a.akamaihd.net/static-ak/rsrc.php/v2/yo/r/UlIqmHJn-SK.gif">
<div class="fb_icon" data="{"username":"George","userid":"131343507"}"></div>
</a>
<div id="yui_3_5_1_1_1339394442690_851" class="txt">
<span class="user_name">George</span>
<div id="yui_3_5_1_1_1339394442690_950" class="desc">
<ul id="yui_3_5_1_1_1339394442690_750" class="func_bar">
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:18:14.333

雅虎！自己创建了这个小部件；没有现成的方法可以为您的网站获取此功能。好消息是，只要您对 Facebook API 有所了解，复制这些功能就相对容易。

首先，要进行身份验证，请查看[客户端身份验证流程](https://developers.facebook.com/docs/authentication/client-side/)，它允许您在每次页面加载时检查用户的状态，并适当地处理更改。您可以使用该`auth.statusChange`事件根据用户是否已通过身份验证来显示正确的 UI。

接下来是“社交”控件。这实质上是从您的应用程序为登录用户切换读取操作的发布。`read`您可以通过在执行 Open Graph操作发布之前检查切换控件的值来管理此客户端。将值存储在 cookie 中，以便在页面之间保持不变。如果您还没有开始从您的应用程序发布操作，请查看[Open Graph 教程](https://developers.facebook.com/docs/opengraph/tutorial/#publish)，特别是围绕“发布”部分。

最后，对于“您的活动”控件，还有一些好消息。您可以使用[“活动源”社交插件](https://developers.facebook.com/docs/reference/plugins/activity/)来获取您和您的朋友在网站上的活动，而无需自己编写。此插件的外观可能不适合您的需求，因此您可以使用 Graph API 来获取您的应用程序的活动故事。如果您正在阅读上面链接的教程，您会遇到执行此操作的示例。

# objective-c - 有没有更优雅的方法在 NSArray 中查找唯一的 NSDictionary 键？

> ID：10975696
> 
> 赞同：0
> 
> 时间：2012-06-11T07:02:45.580
> 
> 标签：objective-c, nsarray, nsdictionary, kvc

**目标：**使用优雅的代码获取包含给定 NSDictionary(s) 的唯一键的 NSArray

**当前工作解决方案的示例代码：**

```
NSArray *data = [[NSArray alloc] initWithObjects:
                 [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:1], @"a", [NSNumber numberWithInt:2], @"b", nil],
                 [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:3], @"b", [NSNumber numberWithInt:4], @"c", nil],
                 [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:5], @"a", [NSNumber numberWithInt:6], @"c", nil],
                 [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:7], @"b", [NSNumber numberWithInt:8], @"a", nil],
                 [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:8], @"c", [NSNumber numberWithInt:9], @"b", nil],
                 nil];

// create an NSArray of all the dictionary keys within the NSArray *data
NSMutableSet *setKeys = [[NSMutableSet alloc] init]; 
for (int i=0; i<[data count]; i++) {
    [setKeys addObjectsFromArray:[[data objectAtIndex:i] allKeys]];
}
NSArray *arrayKeys = [setKeys allObjects];
NSLog(@"arrayKeys: %@", arrayKeys); 
```

它返回所需的键数组：

```
2012-06-11 16:52:57.351 test.kvc[6497:403] arrayKeys: (
    a,
    b,
    c
) 
```

**问题：**有没有更优雅的方法来解决这个问题？肯定有一些 KVC 方法可以获取所有键而无需遍历数组吗？我一直在查看 Apple Developer Documentation，但找不到解决方案。有任何想法吗？（纯粹看代码的优雅而不是性能）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T07:36:22.363

通常，您可以通过执行以下操作来使用 KVC：

```
NSArray *uniqueKeys = [data valueForKeyPath:@"@distinctUnionOfArrays.allKeys"; 
```

但是`NSDictionary`会覆盖`valueForKey:`KVC 内部使用的选择器，因此这将无法正常工作。

[NSDictionary`valueForKey:`方法](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/valueForKey:)的文档告诉我们：

> 如果 key 不以“@”开头，则调用 objectForKey:。如果键确实以“@”开头，则去掉“@”并使用键的其余部分调用 [super valueForKey:]。

所以我们只需`@`在 allKeys 之前插入一个：

```
NSArray *uniqueKeys = [data valueForKeyPath:@"@distinctUnionOfArrays.@allKeys"]; 
```

我们得到了我们想要的：

```
(lldb) po [data valueForKeyPath:@"@distinctUnionOfArrays.@allKeys"]
(id) $14 = 0x07bb2fc0 <__NSArrayI 0x7bb2fc0>(
c,
a,
b
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:15:33.963

我想这不那么难看，而且可能稍微快一点：

```
NSMutableSet *setKeys = [[NSMutableSet alloc] init]; 
for (NSDictionary* dict in data) {
    for (id key in [dict keyEnumerator]) {
        [setKeys addObject:key];
    }
} 
```

但是你没有做一个特别常见的操作，所以我不希望找到一些非常优雅的方法。如果这就是你想要的，那就去学习 Haskell。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T07:22:44.647

你可以试试这个：

```
NSMutableSet *setKeys = [[NSMutableSet alloc] init]; 

for(NSDictionary *dict in data) {
    [setKeys addObjectsFromArray:[dict allKeys]];
}

NSArray *arrayKeys = [setKeys allObjects]; 
```

如果你喜欢块，你可以使用这个：

```
[data enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    [setKeys addObjectsFromArray:[obj allKeys]];
}]; 
```

# iphone - 保持与HTTP服务器的持久连接以获得连续流

> ID：10975703
> 
> 赞同：3
> 
> 时间：2012-06-11T07:03:05.023
> 
> 标签：iphone, cocoa-touch, nsurlconnection, afnetworking

这是要求的程序。

1）我提出一个请求，它将建立一个连接。它可能会中断，但应通过回调通知程序员。

2）数据以流的形式从无尽的页面中分块而来。

3）我想要建议，因为普通的 NSURLConnection 不会很方便，因为它会立即中断。此处的输入是流来自的无尽页面。

注意：无尽的流可能是空的和异步的。有什么建议么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:08:14.380

如果您唯一的问题是与 相关的超时，您可以按照[此问题](https://stackoverflow.com/questions/1424608/nsurlconnection-timeout)`NSURLConnection`中的说明更改该超时。

否则，您将不得不编写基于自己`NSStream`的实现。有关详细信息，请参阅[此文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Streams/Articles/NetworkStreams.html)。

# xaml - 如何检测方向变化和改变布局？

> ID：10975706
> 
> 赞同：8
> 
> 时间：2012-06-11T07:03:20.327
> 
> 标签：xaml, windows-8, windows-runtime, microsoft-metro

假设我有一个网格，每个单元格内有 2 行、2 列和许多控件。

当应用程序更改为快照模式时，我的意思是屏幕的 1/3 我希望应用程序只有一列、两行，并且只显示我会决定的一些控件。

我对此有什么样的控制？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T11:59:57.980

您应该在 xaml 中使用 VisualStateManager，以获得完整的 xaml 解决方案：

```
<Grid x:Name="LayoutRoot">
    <VisualStateManager.VisualStateGroups>
        <VisualStateGroup x:Name="OrientationStates">
            <VisualState x:Name="Full"/>
            <VisualState x:Name="Fill"/>
            <VisualState x:Name="Portrait"/>
            <VisualState x:Name="Snapped"/>
        </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>
</Grid> 
```

为每个 VisualState 创建 StoryBoard，并在您的 xaml 中隐藏/显示元素。Microsoft 示例使用相同的解决方案。

--

**更新**

我在网上搜索并找到了正确的状态，这个链接后面有一个例子：[MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/br211380.aspx#adapting_to_different_layouts)。

```
 <VisualStateManager.VisualStateGroups>
     <VisualStateGroup x:Name="ApplicationViewStates">
        <VisualState x:Name="FullScreenLandscape"/>
        <VisualState x:Name="Filled"/>
        <VisualState x:Name="FullScreenPortrait"/>
        <VisualState x:Name="Snapped"/>
    </VisualStateGroup>
 </VisualStateManager.VisualStateGroups> 
```

状态反映[ApplicationViewState](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.applicationviewstate)枚举。更多信息可以在[这里](http://msdn.microsoft.com/en-us/library/windows/apps/jj129458%28v=vs.110%29.aspx)找到。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-07T16:42:33.177

考虑到此事件的备注部分，使用[DisplayProperties.OrientationChanged](http://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.display.displayproperties.orientationchanged.aspx)事件（如@Jan K. 所建议）可能不是您正在寻找的内容：

> **DisplayProperties.OrientationChanged**事件仅在显示器或监视器的方向发生变化时发生，而不一定在应用程序的方向发生变化时发生。要确定应用的方向以进行布局，请使用[ApplicationView.Value](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.applicationview.value.aspx)属性。

但由于[ApplicationView.Value](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.applicationview.value.aspx)可能会在**Windows 8.1**发布后被放弃 MS 建议改用**ApplicationView.GetForCurrentView()**：

> Windows 8.1 Preview 之后的版本可能会更改或不可用 ApplicationView 静态方法。相反，使用[ApplicationView.GetForCurrentView()](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.applicationview.getforcurrentview.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)来获取 ApplicationView 的实例。

所以现在我已经完成了该代码（不幸的是，有一种动态视图并且不能通过 VisualStateManager 预先设计 XAML 中的所有内容）：

```
public MainPage()
{
    InitializeComponent();
    Window.Current.SizeChanged += (sender, args) =>
    {
        ApplicationView currentView = ApplicationView.GetForCurrentView();

        if (currentView.Orientation == ApplicationViewOrientation.Landscape)
        {
            // when args.Size.Width > args.Size.Height
        }
        else if (currentView.Orientation == ApplicationViewOrientation.Portrait)
        {
            // when args.Size.Width < args.Size.Height
        }
    };
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-11T11:58:07.650

看看[`DisplayProperties.OrientationChanged`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.display.displayproperties.orientationchanged.aspx)-Event。当它触发时，您可以修改网格并重新排列控件。

# android - 如何为图像视图设置边框

> ID：10975710
> 
> 赞同：3
> 
> 时间：2012-06-11T07:03:29.797
> 
> 标签：android, android-imageview

![在此处输入图像描述](../Images/4315b247a5f403324d6e98d3e87b94ab.png)

我在一个 android 应用程序中工作，我想`ImageView`在我的视图中放置一个特定的位置。为此，我应用了特定代码并成功运行：

```
ImageView image = (ImageView) findViewById(R.id.imageView1);
Bitmap bMap = BitmapFactory.decodeResource(getResources(), R.drawable.mrng);
Matrix mat = new Matrix();
mat.postRotate(350);
Bitmap bMapRotate = Bitmap.createBitmap(bMap, 0, 0, bMap.getWidth(),bMap.getHeight(), mat, true);
image.setImageBitmap(bMapRotate); 
```

现在我想为这个图像设置一个边框。为此，我制作了一个形状 xml，并将其设置为图像视图的背景。

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#FFFFFF" />
    <stroke android:width="3dp" android:color="#000000" />
</shape> 
```

但是当我给图像视图的背景形状时，它没有给出正确的输出。请帮助我。

我不想要 ImageView 周围的边框，而是旋转图像周围的边框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T07:16:07.737

**编辑：**我正在根据问题的澄清完全重写我的答案。这就是我如何实现你想要的。这个想法是绘制框架然后旋转：

```
 ImageView image = (ImageView) findViewById(R.id.TestImage);
    Bitmap bMap = BitmapFactory.decodeResource(getResources(), R.drawable.image);

    final int BORDER_WIDTH = 3;
    final int BORDER_COLOR = Color.BLACK;
    Bitmap res = Bitmap.createBitmap(bMap.getWidth() + 2 * BORDER_WIDTH,
                                     bMap.getHeight() + 2 * BORDER_WIDTH,
                                     bMap.getConfig());
    Canvas c = new Canvas(res);
    Paint p = new Paint();
    p.setColor(BORDER_COLOR);
    c.drawRect(0, 0, res.getWidth(), res.getHeight(), p);
    p = new Paint(Paint.FILTER_BITMAP_FLAG);
    c.drawBitmap(bMap, BORDER_WIDTH, BORDER_WIDTH, p);

    Matrix mat = new Matrix();
    mat.postRotate(350);
    Bitmap bMapRotate = Bitmap.createBitmap(res, 0, 0, res.getWidth(), res.getHeight(), mat, true);
    image.setImageBitmap(bMapRotate); 
```

这是结果的屏幕截图：

![在此处输入图像描述](../Images/7fc6f08de3ab880e2925baf33676eccf.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:12:50.330

有办法在 ImageView 周围放置边框，甚至是 android 中的任何视图。在 XML`<View>`中，在 imageview 的每一侧放置四个 simple 。这些视图可以分配任何类型的样式。您可以使用相对布局，您可以在图像视图周围轻松放置四个边框。

有点漫长的过程，但有效。

# c# - 从文件路径中删除版本号

> ID：10975714
> 
> 赞同：1
> 
> 时间：2012-06-11T07:03:41.683
> 
> 标签：c#, properties, settings

我使用 Properties.Settings 保存用户设置。

```
Properties.Settings.Default.key = "value";
Properties.Settings.Default.save(); 
```

这是保存的文件：

```
C:\Users\Me\AppData\Local\Me\MyCompany\0.0.1\user.config 
```

我怎样才能防止版本号在路径中，就像那样？

```
C:\Users\Me\AppData\Local\Me\MyCompany\user.config 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:44:56.620

我现在找到了另一种方法。

启动程序后，我让运行以下代码：

```
if(Properties.Settings.Default.UpgradeRequired)
{
    Properties.Settings.Default.Upgrade();
    Properties.Settings.Default.UpgradeRequired= false;
    Properties.Settings.Default.Save();
} 
```

`UpgradeRequired`是用户特定的属性，默认值为 true

# c - 为什么“继续”在 MISRA C:2004 中被视为 C 违规？

> ID：10975722
> 
> 赞同：15
> 
> 时间：2012-06-11T07:04:08.923
> 
> 标签：c, misra

MISRA 14.5 说不能使用 continue 语句。谁能解释原因？谢谢你。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-12T11:18:24.693

这是因为[关于无条件分支和意大利面条代码的古老争论`goto`](http://www.u.arizona.edu/~rubinson/copyright_violations/Go_To_Considered_Harmful.html)已经持续了 40 年左右。`goto`, `continue`,`break`和多个`return`语句都被认为或多或少同样糟糕。

世界编程社区的共识大致是这样的：我们认识到，如果您知道自己在做什么，那么您可以使用该语言的这些功能而无需编写意大利面条式代码。但是我们仍然不鼓励他们，因为不知道自己在做什么的人很有可能会使用可用的功能，然后创建意大利面条。我们也不鼓励使用它们，因为它们是多余的功能：您显然可以在不使用它们的情况下编写程序。

由于 MISRA-C 是针对关键系统的，MISRA-C:2004 有办法尽可能多地禁止这些无条件分支功能。因此，,`goto`和`continue`多次退货被禁止。`break`只有在同一个循环中有一个中断时才允许。

*然而*，在目前正在评估的“MISRA-C:2011”草案中，委员会已经考虑再次允许所有这些功能，但限制 goto 只能向下跳转，不能向上跳转。委员会的理由是现在有足够聪明的工具（即静态分析器）来发现不良程序流，因此可以允许关键字。

goto 辩论仍在进行中...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T07:13:48.860

众所周知，用 C 语言编程使得跟踪多个执行分支变得非常困难。如果您在某处分配资源，则必须在其他地方（非本地）释放它们。如果您的代码分支，您通常需要为每个分支或退出范围的方式具有单独的释放逻辑。

该`continue`语句添加了另一种退出`for`循环范围的方法，从而使这样的循环更难推理和理解控制流经它的所有可能方式，这反过来又使确定代码的行为变得更加困难在所有情况下都正确。

这只是我的猜测，但我认为试图限制来自这种额外分支行为的复杂性是你提到的规则的驱动原因。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-04-20T16:26:48.240

我刚碰到它。我们有物品，其中

*   应该检查几件事，
*   检查需要一些准备，
*   我们应该先用便宜的支票，然后用昂贵的支票，
*   一些检查取决于其他检查，
*   无论哪个项目在任何检查中失败，都应该记录下来，
*   如果该项目通过了所有检查，则应将其传递给进一步处理。

观看此视频，**无需继续**：

```
foreach (items) {

   prepare check1
   if (check1) {

      prepare check2
      if (check2) {

        prepare check3
        if (check3) {
          log("all checks passed")
          process_good_item(item)
        } else {
          log("check3 failed")
        }

      } else {
        log("check2 failed")
      }

   } else {
      log("check 1 failed")
   }    
} 
```

...并与此进行比较，**继续**：

```
foreach (items) {

   prepare check1
   if (!check1) {
      log("check 1 failed")
      continue
   }

   prepare check2
   if (!check2) {
      log("check 2 failed")
      continue
   }

   prepare check3
   if (!check3) {
      log("check 3 failed")
      continue
   }

   log("all checks passed")
   process_good_item(item)
} 
```

假设“prepare”-s 是多行，所以你不能一次看到整个代码。

自己决定，即

*   不太复杂，有一个更简单的执行图
*   具有较低的圈复杂度值
*   更具可读性，更线性，没有“眼跳”
*   更好的可扩展性（例如尝试添加 check4、check5、check12）

恕我直言，米斯拉在这个话题上是错误的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T09:49:59.350

与所有 MISRA 规则一样，如果您能证明其合理性，您可以偏离规则（MISRA-C:2004 的第 4.3.2 节）

MISRA（和其他类似指南）背后的要点是捕获通常会导致问题的事物……是的，`continue`可以正确使用，但有证据表明这是导致问题的常见原因。

因此，MISRA 创建了一条规则来防止其（ab）使用，并且审查社区批准了该规则。用户社区的意见普遍支持该规则。

但是我再说一遍，如果你真的想使用它，并且你可以根据你的公司层次结构证明它是合理的，那就偏离。

# scripting - Praat 脚本：创建文本文件

> ID：10975727
> 
> 赞同：2
> 
> 时间：2012-06-11T07:04:37.943
> 
> 标签：scripting, praat

目前只是与 Praat 合作，我正在尝试编写一个脚本来使用 3 个声音（叙述）文件的集合来执行以下操作。我已经做到了 c)，脚本部分相对容易。我没有得到的是如何将其写入具有这些列的文本文件。任何帮助都会很棒！

a) 创建一个程序，提取叙事 1-3 的每一个的音素层上的所有间隔，这些间隔代表标签为单个字母的元音，并保持时间。我需要每个生成的声音都有一个适当的标签来标识相关的元音

b) 创建对应于这些间隔中的每一个的共振峰 (burg) 对象

c) 计算每个共振峰对象的中点

c) 在每个中点获取共振峰 1、2 和 3 的值

d) 写入具有以下标题的文本文件：

**叙述# 标签中点时间 F1 F2 F3**

在此之下，每个元音的适当信息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T11:07:56.513

# 简单的方法

最简单的方法是将输出写入`Table`对象，然后使用 Praat 的`Save to comma-separated file`命令将其保存到外部文件。下面的示例使用新的（稍微更合理的）新语法，因此请确保在尝试之前更新 Praat（或尝试此答案的编辑历史记录中的*速记*版本）。

这是一个例子：

```
# Create a Table with no rows
table = Create Table with column names:
..."table", 0, "Narrative Label Midpoint Time F1 F2 F3"

for i to number_of_intervals
  # Assuming you have your Formant objects in an array named "burg"
  selectObject(burg[i])
  # Run your analysis here
  # For this example, I'm assuming values for the columns are in
  # variables called narrative$, label$, midpoint, time, f1, f2 and f3

  selectObject(table)
  Append row
  current_row = Get number of rows
  # Insert your values
  Set string value:  current_row, "Narrative", narrative$
  Set string value:  current_row, "Label", label$
  Set numeric value: current_row, "Midpoint", midpoint 
  Set numeric value: current_row, "Time", time
  Set numeric value: current_row, "F1", f1 
  Set numeric value: current_row, "F2", f2
  Set numeric value: current_row, "F3", f3
endfor

# Save it!
# Remember to select it if the table is not the active selection at
# the end of the loop
Save to comma-separated file: /path/to/file
# And then you can get rid of it
removeObject(table) 
```

或者你可以使用，如果你喜欢标签

```
Save to tab-separated file: /path/to/file 
```

请注意，此方法不允许您使用“Narrative#”作为列名。

# 'l33t' 方式

或者，您可以~~使用 Praat 的文件指令~~按照文档中的说明直接写入[文件](http://www.fon.hum.uva.nl/praat/manual/Scripting_6_4__Files.html)：

```
sep$ = ","
# sep$ = tab$

# Create / overwrite file and write header
writeFileLine: "/path/to/file",
  ..."Narrative#" + sep$ +
  ..."Label"      + sep$ + 
  ..."Midpoint"   + sep$ +
  ..."Time"       + sep$ +
  ..."F1"         + sep$ +
  ..."F2"         + sep$ +
  ..."F3"

for i to number_of_intervals
  selectObject(burg[i])
  # Run your analysis here

  appendFileLine: "/path/to/file",
    ...narrative$        + sep$ +
    ...label$            + sep$ +
    ...string$(midpoint) + sep$ +
    ...string$(time)     + sep$ + 
    ...string$(f1)       + sep$ +
    ...string$(f2)       + sep$ +
    ...string$(f3)

endfor 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:37:09.257

[Praat 用户组在这里](http://uk.groups.yahoo.com/group/praat-users/message/2756)有一个类似问题的答案。

# c# - 如何使用 3.5 c#.net 将参数传递给线程

> ID：10975730
> 
> 赞同：0
> 
> 时间：2012-06-11T07:04:43.810
> 
> 标签：c#, multithreading

在这里，我试图通过读取每个属性 id 的 xml 文档来生成动态线程，但是我面临一个问题，即如何将参数传递给动态线程，对于特定属性的哪些相关元素，有没有办法发送参数？请指教

在下面的线程中，我正在调用一个 dowork 方法，我必须传递特定属性 id 的元素的参数，我该怎么做？

```
static void Main(string[] args)
{
var currentDir = Directory.GetCurrentDirectory();
var xDoc = XDocument.Load(string.Format(Path.Combine(currentDir, "Hosts.xml")));
var threads = new List<Thread>();

foreach (XElement host in xDoc.Descendants("Host"))
{
    var hostID = (int) host.Attribute("id");
    var extension = (string) host.Element("Extension");
    var folderPath = (string) host.Element("FolderPath");
    var thread = new Thread(DoWork)
                     {
                         Name = string.Format("samplethread{0}", hostID)
                     };
    thread.Start(new FileInfo
                     {
                         HostId = hostID,
                         Extension = extension,
                         FolderPath = folderPath
                     });
    threads.Add(thread);
    }
   //Carry on with your other work, then wait for worker threads
   threads.ForEach(t => t.Join());
}

   static void DoWork(object threadState)
     {
       var fileInfo = threadState as FileInfo;
            if (fileInfo != null)
             {
               //Do stuff here
             }
      }

      class FileInfo
         {
           public int HostId { get; set; }
           public string Extension { get; set; }
           public string FolderPath { get; set; }
         } 
```

如何调用在线程中采用多个参数的方法。我有一个方法叫

```
 Send(string arg1, string arg2, string arg3) 
```

这就是我向你们询问传递参数的任何解决方案的原因，注意这里我的线程方法是通过动态方式设计的，请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:38:30.127

您已经很好地传递了参数。我不确定我是否理解你的问题，但是

> 我必须传递哪个特定属性 id 的元素的参数我该怎么做？

听起来您所需要的只是`if statement`您的`foreach`. 您已经在循环并创建线程/传递参数。您只是在问如何确保每个项目都有一个特定的属性 id？如果是这样 - 就让它

```
foreach (XElement host in xDoc.Descendants("Host"))
{
    var hostID = (int) host.Attribute("id");
    // Check ID here
    if(hostID != ID_I_WANT) 
        continue;
    var extension = (string) host.Element("Extension");
    var folderPath = (string) host.Element("FolderPath");
    var thread = new Thread(DoWork)
                     {
                         Name = string.Format("samplethread{0}", hostID)
                     };
    thread.Start(new FileInfo
                     {
                         HostId = hostID,
                         Extension = extension,
                         FolderPath = folderPath
                     });
    threads.Add(thread);
    }
   //Carry on with your other work, then wait for worker threads
   threads.ForEach(t => t.Join());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:51:58.117

您是否能够使用 TPL 而不是启动自己的线程？

如果是这样，您可以这样做：

```
xDoc.Descendants("Host").AsParallel().ForAll(host =>
{
    DoWork(new FileInfo
    {
        HostId = (int)xe.Attribute("id"),
        Extension = (string)xe.Element("Extension"),
        FolderPath = (string)xe.Element("FolderPath"),
    });
}); 
```

还是我错过了这个问题的重点？

# c++ - C++ 运算符重载 - 指针、乘法

> ID：10975731
> 
> 赞同：3
> 
> 时间：2012-06-11T07:04:48.313
> 
> 标签：c++, overloading, operator-keyword

我想知道乘法运算（*）是否在指针中重载，反之亦然？

还是经营者是个体的？

C++

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-11T07:05:39.553

它们是独立的运算符，您重载哪一个取决于您传递给运算符的参数。

```
struct A
{
    //dereference operator
    A /*or whatever*/ operator *() { /*...*/ };
    //multiply operator           
    A operator *(const A&) { /*...*/ };
};

//...
A a;
*a; //calls dereference operator
a * a; //calls multiply operator 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T07:32:36.437

它的工作方式与所有可以定义一元或二元运算符（以及其他运算符）的运算符符号完全相同`+`，`-`它`&`取决于函数将采用的参数数量。因此，`*`应将一元定义为采用单个运算符，或者作为不带参数（除了`this`）的非静态类成员，或者作为带单个参数的自由函数。二元运算符应该被定义为接受两个参数，或者作为一个接受一个参数（除了 ）的非静态类成员`this`，或者一个接受两个参数的自由函数。

请注意，函数的名称被认为是相同的，因此二进制版本可以隐藏一元版本，反之亦然。

# cakephp - 格式化 cakephp 查找结果

> ID：10975733
> 
> 赞同：1
> 
> 时间：2012-06-11T07:04:52.547
> 
> 标签：cakephp, model, formatting

如果我`mainModel->find('all')`对模型进行调用，我的数据将以这种格式返回：

```
[
    {
        'mainModel': {},
        'associatedModel1': {},
        'associatedModel2': {},
        'associatedModel3': {},
        'associatedModel4': {}
    },
    {
        'mainModel': {},
        'associatedModel1': {},
        'associatedModel2': {},
        'associatedModel3': {},
        'associatedModel4': {}
    }
] 
```

我怎样才能让它以这种格式返回：

```
[
    {
        'mainModel': {
            'associatedModel1': {},
            'associatedModel2': {},
            'associatedModel3': {},
            'associatedModel4': {}
        }
    },
    {
        'mainModel': {
            'associatedModel1': {},
            'associatedModel2': {},
            'associatedModel3': {},
            'associatedModel4': {}
        }
    }
] 
```

请原谅我的对象符号格式。我发现 JSON 是解释数据结构的最漂亮的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T08:18:57.143

您无法更改在查找中返回数据的格式，但您可以在返回后修改格式。查看 Set 库：[http ://book.cakephp.org/2.0/en/core-utility-libraries/set.html](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html)

迫切的问题是，为什么要改变结构？CakePHP 需要这种结构中的数据，如果您开始更改它，您的应用程序将以意外/难以追踪的方式中断...

# c# - Windows 资源管理器总是崩溃

> ID：10975734
> 
> 赞同：-1
> 
> 时间：2012-06-11T07:04:53.400
> 
> 标签：c#, window, explorer, windows-explorer

我遇到了 Windows 资源管理器的问题。每天早上一切都很完美。我正在启动 Visual Studio 并开发一些东西。

一段时间后，如果我启动我的大型项目，Windows 资源管理器就会一直崩溃。例如，如果我右键单击垃圾箱或桌面或复制文件。它只是正常的，发送 - 不发送，Windows 错误消息。

我搜索了很多并找到了有关 Windows 上下文菜单的答案。但我们的软件不会将条目添加到 Windows 上下文菜单。

也许是主动同步？

它是我们软件中唯一使用的东西。

请问有人可以帮我吗？我们的客户遇到了同样的问题，这很烦人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:15:20.097

[http://blogs.msdn.com/b/lexli/archive/2009/08/23/when-the-application-program-crashes-on-windows.aspx](http://blogs.msdn.com/b/lexli/archive/2009/08/23/when-the-application-program-crashes-on-windows.aspx)

Windows 资源管理器仍然是一个 Windows 应用程序，因此调试它可以告诉您它崩溃的原因（至少是因为它崩溃的模块）。然后你可以在互联网上搜索，看看如何摆脱那个有问题的模块。

# android - 如何在我的项目中制作进度条（加载动画）？

> ID：10975742
> 
> 赞同：0
> 
> 时间：2012-06-11T07:05:18.337
> 
> 标签：android, sms, progress-bar, loading, handle

我制作这样的项目：[Fetch Messages from Inbox](http://www.technotalkative.com/android-fetch-inbox-sms/)

部分代码：

```
while  (cursor.moveToNext()) 
{
    String address = cursor.getString(1);
    String body = cursor.getString(3);

    // Loading too long
    System.out.println("======> Mobile number => "+address);
    System.out.println("=====> SMS Text => "+body);
    sms.add("Address=> "+address+"\n SMS => "+body);   
}
return sms; 
```

但是，信息太多，需要很长时间才能显示出来。在 loding 我想展示动画`(progressbar)`

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T07:25:07.873

通常你会在 Android 上使用 AsyncTask 来做这样的事情。

***简介：***默认情况下，所有不使用线程、服务等编写的代码都将在 `UI thread`.. 中执行。这意味着如果您在那里进行一些昂贵的工作，用户界面将被阻塞（不响应）。好的做法是将如此昂贵的任务移动到单独的线程，否则您的应用程序将显示`ANR`对话框并被关闭。

***如何：***适合您的情况的最佳方法之一是使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html) .. 基本上在`onPreExecute()`您显示进度对话框或“正在进行的长时间任务”动画中。在`doInBackground(Params... params)`您放置昂贵操作的代码。如果您需要更新进度条，您可以从`onProgressUpdate(Progress... values)`. 当昂贵的任务完成时，它将为`onPostExecute(Result result)`方法提供结果。从此，您可以再次更新 UI 并关闭之前显示的进度对话框。

希望它有所帮助。干杯.. ;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T07:19:36.880

使用`Asyntask`、输入代码`doInBackground`、开始`processbar`、`onPreExecute()`关闭`onPostExecute()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T07:18:57.567

在您的项目中实现 Runnable。运行此代码

```
while  (cursor.moveToNext()) 
{
String address = cursor.getString(1);
String body = cursor.getString(3);

// Loading too long
System.out.println("======> Mobile number => "+address);
System.out.println("=====> SMS Text => "+body);
sms.add("Address=> "+address+"\n SMS => "+body);   
}
//return sms;// Make a global variable which can hold values here...
handler.sendEmptyMessage(0); 
```

在

```
run() 
```

方法。现在像这样启动线程：

```
Thread fetchSmsThread = new Thread(this);
progressDialog = ProgressDialog.show(context,title,message);
fetchSmsThread.start(); 
```

处理程序代码：

```
 Handler handler = new Handler()
 {

  //////Catch Message Here.. and Dismiss dialog...
  ///Note You have to declare progress dialog as global so that you can access it here...

 } 
```

有关 runnable 的进一步帮助，请执行以下操作：

[如何在 Android 中运行 Runnable 线程？](https://stackoverflow.com/questions/1921514/how-to-run-a-runnable-thread-in-android)

如果您不想使用 Runnable，请使用 Android AsynClass，请遵循：

[AsyncTask Android 示例](https://stackoverflow.com/questions/9671546/asynctask-android-example)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T07:25:39.163

在 main.xml 中添加一个带有 id 的 Progressbar（下例中的 yourProgressBarId）：

```
@Override  
public void onCreate(Bundle savedInstanceState) {  
    super.onCreate(savedInstanceState);  
    setContentView(R.layout.main);  

    final ListView lViewSMS = (ListView) findViewById(R.id.listViewSMS);  

    final ProgressBar progressBar = (ProgressBar)findViewById(R.id.yourProgressBarId);
    progressBar.setVisibility(View.VISIBLE);
    new Thread(){
        public void run() {

                ArrayList sms =fetchInbox();
                if(sms!=null) 
                lViewSMS.post(new Runnable() {

                    @Override
                    public void run() {
                         ArrayAdapter adapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1, sms);  
                         lViewSMS.setAdapter(adapter);  
                         progressBar.setVisibilty(View.GONE);
                }
          });
    }   
}.start();

} 
```

# android - Gridview 以有限的值显示

> ID：10975744
> 
> 赞同：0
> 
> 时间：2012-06-11T07:05:40.507
> 
> 标签：android, android-layout, android-widget

我有一个自定义 Gridview 来显示操作员列表及其图标和提供者的名称。我的问题是 Gridview 仅显示有限的提供者（仅 12 个）。但是要显示的值超过 16 个。剩余值正在重复在 Gridview 中滚动 GridView。

我的源代码在这里

```
public class ImageAdapter extends BaseAdapter {

    public int getCount() {
        return providerlist1.size();
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        View v;
        ImageView imageView;
        if (convertView == null) {
            LayoutInflater layoutInflater = getLayoutInflater();
            v = layoutInflater.inflate(R.layout.icon_with_text, null);
            TextView txt = (TextView) v.findViewById(R.id.icon_text);
            txt.invalidate();
            txt.setTypeface(localTypeface1);
            Collections.sort(providerlist1);
            Log.v("COLLECTIONS", ""+providerlist1);
            txt.setText("" + providerlist1.toArray()[position]);
            String string = (String) txt.getText();
            icon = string.toLowerCase();
            System.out.println(icon);
            int resid = getResources().getIdentifier("" + icon, "drawable",
                    "com.digient.yeldi.app");
            imageView = (ImageView) v.findViewById(R.id.icon_image);
            imageView.setImageResource(resid);

        } else {
            v = convertView;
        }

        return v;

    }

} 
```

providerlist1 是一个数组列表，其中有超过 16 个操作符值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:28:26.060

为此使用下面的代码，可能会对您有所帮助。

```
public class ImageAdapter extends BaseAdapter {

    LayoutInflater layoutInflater;
    Context ctx;
    public ImageAdapter(Context context) {
        // TODO Auto-generated constructor stub
        layoutInflater=LayoutInflater.from(context);
        this.ctx=context;
    }

    public int getCount() {
        return providerlist1.size();
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        View v;
        ImageView imageView;
        if (convertView == null) {
            v = layoutInflater.inflate(R.layout.icon_with_text, null);
        } else {
            v = convertView;
        }

        TextView txt = (TextView) v.findViewById(R.id.icon_text);
        txt.invalidate();
        txt.setTypeface(localTypeface1);
        Collections.sort(providerlist1);
        Log.v("COLLECTIONS", ""+providerlist1);
        txt.setText("" + providerlist1.toArray()[position]);
        String string = (String) txt.getText();
        icon = string.toLowerCase();
        System.out.println(icon);
        int resid = getResources().getIdentifier("" + icon, "drawable", "com.digient.yeldi.app");
        imageView = (ImageView) v.findViewById(R.id.icon_image);
        imageView.setImageResource(resid);

        return v;

    }

} 
```

# php - Magento：如何在不循环的情况下按属性集过滤捆绑选项

> ID：10975746
> 
> 赞同：2
> 
> 时间：2012-06-11T07:05:43.610
> 
> 标签：php, magento

喜欢 Incho 的这段代码：http://incho.net/ecommerce/magento/magento-get-bundled-items-by-bundle-product/

```
$bundled_product = new Mage_Catalog_Model_Product();
$bundled_product->load(YOUR_BUNDLED_PRODUCT_ID);

$selectionCollection = $bundled_product->getTypeInstance(true)->getSelectionsCollection(
    $bundled_product->getTypeInstance(true)->getOptionsIds($bundled_product), $bundled_product
);

$bundled_items = array();
foreach($selectionCollection as $option)
{
    $bundled_items[] = $option->product_id;
} 
```

如何通过特定属性或属性集仅获取特定选项

# rest - 向 REST HTTP GET 添加更多参数

> ID：10975750
> 
> 赞同：1
> 
> 时间：2012-06-11T07:06:09.280
> 
> 标签：rest, jboss, get, restlet, restful-url

我正在尝试使用 HTTP GET 请求访问 REST Web 服务。

例如，以下 URI 提供了 Rest Web 服务，该服务返回给定类别的所有可用部分。

```
http://localhost:8080/mycompany/parts/category 
```

我想对每次访问以上 REST 请求的用户进行身份验证/授权，并且我想通过 HTTP 获取请求传递用户身份验证详细信息（用户名和令牌）。

是否有可能满足 REST HTTP GET 请求中的上述要求（使用 HTTP 标头或查询参数）？

或者

使用 HTTP POST 而不是 HTTP GET 更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:42:23.453

由于您正在获取信息，因此您应该使用“获取”。这是我用来将 oauth_token 添加到请求中的代码（它基于 Restlet）......

```
import org.restlet.data.Reference;
import org.restlet.ext.oauth.OAuthUser;
import org.restlet.representation.Representation;
import org.restlet.resource.ClientResource;

Reference commitsRef = new Reference(Consts.RESOURCE_BASE + "commitments/"); 
OAuthUser u = (OAuthUser) request.getClientInfo().getUser();
String token = u.getAccessToken();  
ref.addQueryParameter("oauth_token", token);
ClientResource commitsResource = new ClientResource(getContext(), commitsRef);
Representation commitsRep = commitsResource.get(); 
```

如前所述，这是基于 Restlet 的，但在您使用的框架中可能有类似的东西。（如果您不使用框架，Restlet 可以使这更容易）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T06:09:33.273

如果你使用 restlet 那就更好了，因为 restlet 有丰富的 api 用于 rest 框架

但是如果没有这个，如果你想进行身份验证，你可以用 GET 或 POST 做同样的事情

但通过发送您的凭证数据`cookie`

并以这种方式从服务器端读取相同的 cookie `@CookieParam`，您可以轻松地对用户进行身份验证。

# c# - Winforms 订阅自己的事件

> ID：10975752
> 
> 赞同：3
> 
> 时间：2012-06-11T07:06:27.520
> 
> 标签：c#, winforms, event-driven

我看到开发人员在 WinForms 中做的一件常见的事情是表单/控件订阅他们自己的事件，所以你得到

```
this.Load += new System.EventHandler(this.WelcomeQuickViewWF_Load);
this.Activated += new System.EventHandler(this.WelcomeQuickViewWF_Activated); 
```

而不是

```
protected override void OnActivated(EventArgs e)
{
} 
```

现在我知道第二种方式更面向对象，第一种方式是事件驱动的，我倾向于重构以覆盖 - 有什么理由不这样做吗？我不想做的是做一些并非真正需要的改变，纯粹是一种审美选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T07:11:57.933

[MSDN 说](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.onactivated.aspx)，重写`On*`方法是在派生类中处理事件的首选技术：

> **OnActivated**方法还允许派生类在不附加委托的情况下处理事件。重写此方法是在派生类中处理事件的首选技术。

所以我想说事件处理程序方法是非惯用的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T07:12:44.403

通过订阅您自己的事件，当有其他事件订阅者时，您放弃了对何时调用*您的代码的控制权。*通过重写事件引发方法，您可以完全控制何时调用您的代码。您可以在通知订阅者之前或之后调用它。您的代码也不会在可取消事件中被取消。

如果该方法是可覆盖的，请这样做。否则注册，因为您别无选择。

# python - python中的参数传递

> ID：10975753
> 
> 赞同：1
> 
> 时间：2012-06-11T07:06:47.477
> 
> 标签：python, machine-learning, python-2.7

```
def topMatches(prefs,person,n=5,similarity=sim_pearson):
  scores=[(similarity(prefs,person,other),other)
                  for other in prefs if other!=person]  
  scores.sort()
  scores.reverse()
  return scores[0:n] 
```

我只是在 topmatches 函数中调用另一个函数，我怀疑**其他**工作是如何工作的，我没有在其他地方定义它我也没有将它传递给函数 topmatches， ***谁能解释我这是如何工作的？***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T07:10:15.257

`other`是每个`record`in的列表元素`prefs`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T07:12:07.963

你可以将你的展开`scores=[(similarity(prefs,person,other),other) for other in prefs if other!=person]`到这样的地方，看看发生了什么。

```
scores = []
for other in prefs:
    if other != person:
        scores.append((similarity(prefs, person, other)) 
```

所以会发生这样的事情：

1.  您创建一个名为 scores 的空列表
2.  您遍历首选项，并将该元素的值放入变量中，`other`从而实例化它
3.  你检查以确保`other`不等于`person`
4.  如果没有，你调用你的相似性函数并将结果附加到`scores`

您发布的结构称为列表理解，它可以是一种很好、简洁、快速的方式来编写一系列正常循环等。

编辑（由 moooeeeep 提供）：

[列表理解上的PEP202](http://www.python.org/dev/peps/pep-0202/)和实际[文档](http://docs.python.org/howto/functional.html#generator-expressions-and-list-comprehensions)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T07:22:12.823

假设您没有编程经验 -

topMatches 是您的功能。

other 是一个临时变量。此变量在 topMatches 函数内部定义。在 python 中，您不需要明确地“声明”一个变量来创建它。

例如，

在 c 中，

```
void topMatches( . , . , . )
{
  int other;

.
.
.
} 
```

你会有这样的东西，其中 other 被定义为一个变量。

但是在python中，如果我只是这样做，

```
for other in prefs:
<something something> 
```

python 编译器自己理解您想要创建一个名为“other”的临时变量，该变量正在遍历您的循环。（在你给出的例子中）。

相当于说，

```
for (int i;i<n;i++)
. 
. 
```

其中 i 是循环的变量迭代器。（在 C 中）。

同样，在 Python 中，“other”是本例中循环的变量迭代器。希望这可以帮助！

# ruby - 在 Ruby 中合并两个结果

> ID：10975757
> 
> 赞同：2
> 
> 时间：2012-06-11T07:07:22.860
> 
> 标签：ruby, arrays

我有一个 API（FourSquare）的结果给我这个..

```
[["4e01728f814d9dac7d52b93d","Bark Boutique",40.7143528,-74.0059731],["4d9f92dfaffda35d5db2a748","Bark Boutique",40.7143528,-74.0059731]] 
```

我将这些结果发送到另一个 API，得到如下结果：

```
[{"4e01728f814d9dac7d52b93d":yes},{"4d9f92dfaffda35d5db2a748":no}] 
```

我想要做的是比较我得到的第二个结果和第一个结果并将它们结合起来。所以我会回来：

```
[["4e01728f814d9dac7d52b93d","Bark Boutique",40.7143528,-74.0059731, yes],["4d9f92dfaffda35d5db2a748","Bark Boutique",40.7143528,-74.0059731, no]] 
```

但是，第一组中的某些结果不会在第二组中全部返回。所以我需要通过 id[0] 找出哪些是相同的，然后将它们拉出来并再次组合它们。

在红宝石中执行此操作的最佳方法是什么？我曾尝试使用地图，但只能从每个而不是同时提取数据？

**编辑真实数据：**

数组2 =

```
[{"4bed4208bac3c9b692fcfde9"=>743.0}, {"4e21b6f052b1f82ffba120b5"=>789.0}, {"4b646071f964a52052ae2ae3"=>921.0}, {"4bb504a30ef1c9b6dbc2f412"=>99.0}, {"4b426369f964a520e3d225e3"=>80.0}, {"4c4f275651c2c9288af1859f"=>254.0}, {"4b92cb0bf964a520501c34e3"=>468.0}, {"4b425f85f964a52092d225e3"=>27.0}, {"4bd86cb6e914a593c92f53fa"=>512.0}, {"4e687a6bb3ad5d9197518ed6"=>622.0}, {"4b4447f8f964a5206cf325e3"=>73.0}, {"4b425ec9f964a52086d225e3"=>26.0}, {"4b484917f964a520184b26e3"=>328.0}, {"4b426047f964a520a4d225e3"=>37.0}, {"4c978b274f16b71312c2ce3f"=>253.0}, {"4b6de739f964a520769a2ce3"=>81.0}, {"4b48c8a8f964a520cb5626e3"=>167.0}, {"4bb475f449bdc9b65bcb0c10"=>80.0}, {"4c126e3c82a3c9b60ab0f9f8"=>739.0}, {"4bd8b0442e6f0f4754240808"=>210.0}, {"4bb61c6bef159c74ff6b75f7"=>231.0}, {"4b56243af964a5204f0228e3"=>56.0}, {"4b411f2bf964a52082c125e3"=>0.0}, {"4b48a60ff964a5208c5126e3"=>211.0}, {"4baded59f964a52031733be3"=>514.0}, {"4b40ce65f964a5205ebb25e3"=>124.0}, {"4b444648f964a52049f325e3"=>81.0}, {"4bb0eb08f964a520006a3ce3"=>376.0}, {"4f63b0b5e4b087553c2ae4fa"=>586.0}, {"4b9a86c4f964a520f2bd35e3"=>192.0}, {"4cb995490180721e03e09461"=>125.0}, {"4dc58ce152b1e8f9f7d7378b"=>955.0}, {"4b92c695f964a520aa1a34e3"=>20.0}, {"4c582015a7d976b0130cddee"=>484.0}, {"4c8ccb34509e3704d9533655"=>743.0}, {"4b48f87ff964a520096026e3"=>48.0}, {"4c1a1c70838020a137aae661"=>640.0}, {"4b894378f964a520e72632e3"=>55.0}, {"4e8b7820be7b1b0656b1f927"=>666.0}, {"4e02726dc65b8061424b59f1"=>78.0}, {"4b4261e4f964a520c6d225e3"=>57.0}, {"4ba55291f964a5209afa38e3"=>77.0}, {"4c714ddcb5a5236acb995252"=>473.0}, {"4b7451e5f964a520fad42de3"=>80.0}, {"4b490136f964a520a56126e3"=>71.0}, {"4d987f7961a3a1cd32aace42"=>1008.0}, {"4dbd63785da3ff58ec6192b1"=>622.0}, {"4b71bb30f964a5200b592de3"=>640.0}, {"4be6c014bcef2d7f476805e5"=>1016.0}, {"4bc762a32f94d13aebd2117f"=>577.0}] 
```

数组1=

```
[["4b411f2bf964a52082c125e3", "The Three Pigeons", 51.236318, -0.57055], ["4b444648f964a52049f325e3", "The Royal Oak", 51.23555937678702, -0.5702378403809515], ["4b92c695f964a520aa1a34e3", "Slug And Lettuce", 51.237156, -0.571021], ["4b490136f964a520a56126e3", "The Robin Hood", 51.23603403568268, -0.568686], ["4b425f85f964a52092d225e3", "The Guildford Tup", 51.237734, -0.5703823], ["4b48f87ff964a520096026e3", "The Keep", 51.234704, -0.572574], ["4b426369f964a520e3d225e3", "The Five & Lime", 51.236908, -0.573695], ["4b56243af964a5204f0228e3", "The Albany", 51.23687122552597, -0.5666781994529876], ["4b426047f964a520a4d225e3", "The Kings Head", 51.234176, -0.573656], ["4b4261e4f964a520c6d225e3", "The Live and Let Live", 51.238477, -0.573306], ["4b425ec9f964a52086d225e3", "The Star Inn - Shepherd Neame", 51.23501026190194, -0.5749610066413879], ["4cb995490180721e03e09461", "Prince Albert", 51.242471, -0.572899], ["4e02726dc65b8061424b59f1", "Bar Mambo", 51.236896, -0.577263], ["4b7451e5f964a520fad42de3", "The Rodboro Buildings (Wetherspoon)", 51.236624141592365, -0.5775332450866699], ["4b6de739f964a520769a2ce3", "The White House", 51.23463575311113, -0.5773776769638062], ["4bb504a30ef1c9b6dbc2f412", "The Britannia - Shepherd Neame", 51.233105063438416, -0.5760687589645386], ["4b4447f8f964a5206cf325e3", "The George Abbot", 51.235186599066246, -0.5779409408569336], ["4b894378f964a520e72632e3", "The Boatman", 51.23155028087051, -0.572927], ["4bb475f449bdc9b65bcb0c10", "The Keystone", 51.23437208365849, -0.5779758095741272], ["4ba55291f964a5209afa38e3", "Rogues Bar", 51.23763173808256, -0.5610001087188721], ["4b40ce65f964a5205ebb25e3", "The Drummond", 51.24133950313797, -0.5758380889892578], ["4b48c8a8f964a520cb5626e3", "The Stok", 51.24272843225208, -0.5718989403261525], ["4c4f275651c2c9288af1859f", "The Parkway", 51.248229, -0.569356], ["4b48a60ff964a5208c5126e3", "The King's Head", 51.24666037427897, -0.5728936419289142], ["4b9a86c4f964a520f2bd35e3", "Ye Olde Ship Inn", 51.225673503520696, -0.5796146392822266], ["4c582015a7d976b0130cddee", "Wates House", 51.2420380341127, -0.5908584594726562], ["4b484917f964a520184b26e3", "The Rowbarge", 51.25055105804697, -0.5729025186239382], ["4bd86cb6e914a593c92f53fa", "The Wooden Bridge", 51.248547, -0.58514], ["4bd8b0442e6f0f4754240808", "The Seahorse", 51.218605041503906, -0.569018], ["4bb61c6bef159c74ff6b75f7", "The Astolat Public House", 51.23704061748392, -0.5893993377685547], ["4c978b274f16b71312c2ce3f", "The Queen Victoria", 51.21475338935852, -0.567119], ["4bb0eb08f964a520006a3ce3", "Anchor & Horseshoes", 51.254823, -0.548787], ["4c126e3c82a3c9b60ab0f9f8", "The Garage Tavern", 51.261162, -0.586647], ["4bed4208bac3c9b692fcfde9", "The Cricketers", 51.254246288978116, -0.6047425123927289], ["4b92cb0bf964a520501c34e3", "Horse & Groom", 51.24614672635736, -0.5279016494750977], ["4e8b7820be7b1b0656b1f927", "Apple Tree Pub", 51.2460676, -0.61427766], ["4dc58ce152b1e8f9f7d7378b", "Royal Oak", 51.248792, -0.626987], ["4c1a1c70838020a137aae661", "Withies Inn", 51.21199, -0.621551], ["4baded59f964a52031733be3", "The Jolly Farmer", 51.194106, -0.558244], ["4e21b6f052b1f82ffba120b5", "Compton Royal British Legion", 51.21349872454546, -0.6290990092597657], ["4b646071f964a52052ae2ae3", "The Jolly Farmer", 51.27866916930163, -0.5856227874755859], ["4d987f7961a3a1cd32aace42", "White Hart", 51.25011, -0.636736], ["4c8ccb34509e3704d9533655", "The Harrow Inn", 51.213387, -0.6316709518432617], ["4b71bb30f964a5200b592de3", "Bull's Head", 51.253260091783105, -0.5042177438735962], ["4f63b0b5e4b087553c2ae4fa", "The freeholders", 51.194189, -0.603889], ["4bc762a32f94d13aebd2117f", "The Cricketers", 51.194975, -0.608211], ["4be6c014bcef2d7f476805e5", "Worplesdon Place (Beef Eater Grill)", 51.27501810816803, -0.6078529357910156], ["4dbd63785da3ff58ec6192b1", "Scratchers", 51.19211, -0.60234], ["4e687a6bb3ad5d9197518ed6", "Three Lions - Shepherd Neame", 51.19198564344851, -0.6023865938186646], ["4c714ddcb5a5236acb995252", "The White heart Pub", 51.200254, -0.603593]] 
```

需要将数组 1 中的 id 4e687a6bb3ad5d9197518ed6 与数组 2 中的 4e687a6bb3ad5d9197518ed6 值匹配...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:05:07.033

```
array1 = [["4e01728f814d9dac7d52b93d","Bark Boutique",40.7143528,-74.0059731],
         ["4d9f92dfaffda35d5db2a748","Bark Boutique",40.7143528,-74.0059731]]
array2 = [{"4e01728f814d9dac7d52b93d"=>:yes},{"4d9f92dfaffda35d5db2a748"=>:no}]

array1.zip(array2).map do |ar1,ar2|
  ar2[ar1[0]] ? ar1 << ar2[ar1[0]] : nil
end.compact 
```

**编辑：** 在原始问题中，具有相同键的元素也具有相同的索引，但从编辑的问题中我了解到索引可以不相同。然后：

```
array1.clone.each do |m|
  result = array2.detect { |hash| hash[m[0]] }
  m << result[m[0]] if result
end 
```

这`clone`是必不可少的，因为构造`m << value`会修改对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T08:28:34.190

[`Array#zip`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-zip)允许您组合多个数组。使用块的表单可能是您想要的。

# iphone - 如何捕捉黑白视频

> ID：10975758
> 
> 赞同：0
> 
> 时间：2012-06-11T07:07:22.910
> 
> 标签：iphone, video, record

我是 iPhone 应用程序开发的新手。我开发了一个 iPhone 应用程序。在这个应用程序中，我想开发使用 iPhone 相机录制黑白视频。请帮助我如何开发它，然后也提供一些示例代码 url。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:06:35.213

您想使用 kCVPixelFormatType_420YpCbCr8BiPlanarFullRange 格式。

将此添加到您的视频输出中

```
OSType format = kCVPixelFormatType_420YpCbCr8BiPlanarFullRange;

    videoOutput.videoSettings = [NSDictionary dictionaryWithObject:[NSNumber 
                                                                    numberWithUnsignedInt:format]
                                                            forKey:(id) kCVPixelBufferPixelFormatTypeKey]; 
```

并按照此将 Y 平面转换为灰度图像：

[AVFoundation - 从 Y 平面获取灰度图像 (​​kCVPixelFormatType_420YpCbCr8BiPlanarFullRange)](https://stackoverflow.com/questions/10163462/avfoundation-get-grayscale-image-from-y-plane-kcvpixelformattype-420ypcbcr8bi)

或者如果您想将其保存为视频：

[如何将 iPhone 摄像头的实时视频源转换为灰度？](https://stackoverflow.com/questions/4381513/how-do-i-convert-the-live-video-feed-from-the-iphone-camera-to-grayscale)

# xcode - 从 GitHub 远程分支拉取一个项目

> ID：10975763
> 
> 赞同：0
> 
> 时间：2012-06-11T07:07:47.913
> 
> 标签：xcode, git, github

结帐到所需的分支后：

```
git checkout feature/myBranch 
```

我想将此分支中包含的项目拉到我的本地存储库中，请问我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:25:15.160

您通过将远程存储库添加为远程并调用来加载远程存储库的内容`git fetch`。这就是所有需要做的事情。之后，您的本地存储库中已经有了更改，只是没有指向它们的本地分支（但有一个远程分支，如`origin/branch`）。

当您可以签出分支时，您的本地存储库中已经拥有所有内容。

# android - 用于 OpenStreetMap 以外的其他地图数据的平铺服务器

> ID：10975765
> 
> 赞同：-1
> 
> 时间：2012-06-11T07:08:03.010
> 
> 标签：android, google-maps, geolocation, openstreetmap, satellite-image

在我的 Android 应用程序中，我在地图中显示了一些数据。为此，我目前从 OpenStreetMap 瓦片服务器下载一些地图数据并将其存储在本地（以便用户可以访问已使用的地图而不会再次造成流量）。

现在我已经看到一些 Android 应用程序使用其他地图数据/卫星图片（可能来自 Google？）。不幸的是，我找不到任何提供与 OSM 相同原理的切片服务器，可以在本地缓存地图切片。那么有人知道不是 OSM 但提供相同功能的类似项目/平铺服务器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:23:44.367

埃尔米...

我没有使用谷歌地图的瓷砖图像..

但我有一个示例链接，它提供来自谷歌的平铺图像

[谷歌地图的平铺图像](http://mt3.google.com/vt/v=w2.97&x=1433&y=897&z=11)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:11:49.423

也许在 MapQuest 上：http: [//developer.mapquest.com/web/products/open/map](http://developer.mapquest.com/web/products/open/map) 鸟瞰图和其他

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T06:49:04.687

[如果有人遇到同样的问题：http: //sourceforge.net/projects/libwlocate/](http://sourceforge.net/projects/libwlocate/)中存在一些 Android 代码，它已经使用 OpenStreetMap、Google Map 和 Google Sattelite 视图可选地绘制地图。

# javascript - Javascript将输入值onclick更改为单击按钮的同一行上的值

> ID：10975768
> 
> 赞同：0
> 
> 时间：2012-06-11T07:08:09.877
> 
> 标签：javascript, onclick

假设我在第三行选择浮动利率并单击等号按钮。所有其他行的其余值将其值更改为浮动汇率。我也想将 tis 函数应用于所有其他行。

Javascript：

```
<script type="text/javascript"> 
   $(document).ready(function() { 
       $('.equal').on('click', function() { 
           $('.dropDown').val('Floating Rate'); 
       }) 
   }); 
</script> 
```

桌子：

```
<td>
<select class="dropDown" style="width:150px" name="rate_value_1">
<option value="<?php echo $_SESSION['rate_value_1'] ;?>"><?php echo $_SESSION['rate_value_1'] ;?></option>
<option value="Fixed Rate">Fixed Rate</option>
<option value="Floating Rate">Floating Rate</option>
</select>
</td>
<td><input type="button" value="select" class="equal" /></td> 
</tr>
<tr>
<td>
<select class="dropDown" style="width:150px" name="rate_value_2">
<option value="<?php echo $_SESSION['rate_value_2'] ;?>"><?php echo $_SESSION['rate_value_2'] ;?></option>
<option value="Fixed Rate">Fixed Rate</option>
<option value="Floating Rate">Floating Rate</option>
</select>
</td>
<td><input type="button" value="select" class="equal" /></td> 
</tr>
<tr>
<td>
<select class="dropDown" style="width:150px" name="rate_value_3">
<option value="<?php echo $_SESSION['rate_value_3'] ;?>"><?php echo $_SESSION['rate_value_3'] ;?></option>
<option value="Fixed Rate">Fixed Rate</option>
<option value="Floating Rate">Floating Rate</option>
</select>
</td>
<td><input type="button" value="select" class="equal" /></td> 
</tr>
<tr>
<td>
<select class="dropDown" style="width:150px" name="rate_value_4">
<option value="<?php echo $_SESSION['rate_value_4'] ;?>"><?php echo $_SESSION['rate_value_4'] ;?></option>
<option value="Fixed Rate">Fixed Rate</option>
<option value="Floating Rate">Floating Rate</option>
</select>
</td>
<td><input type="button" value="select" class="equal" /></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:58:26.580

好的 Psinyee，这就是你想要的，也解释了。

```
<script type="text/javascript">
   $(document).ready(function() {
       $('.equal').on('click', function() {
           // find coresponding dropdown
           // with select inside (this is the button ->parent is the td-> previous td)
           var crtDropdown = $('select', $(this).parent().prev('td'));
           if(crtDropdown.prop('selectedIndex') > 0) {
               // something is selected, not first option
               // change values for following selects
               // select ->parent td->parent tr->all next trs->select inside trs->set val to crtDropdown.val();
               crtDropdown.parent().parent().nextAll('tr').find('select').val(crtDropdown.val());
           }
       })
   });
</script>

<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<table>
    <tr>
        <td>
            <select class="dropDown" style="width:150px" name="rate_value_1">
                <option value="<?php echo $_SESSION['rate_value_1'] ;?>"><?php echo $_SESSION['rate_value_1'] ;?></option>
                <option value="Fixed Rate">Fixed Rate</option>
                <option value="Floating Rate">Floating Rate</option>
            </select>
        </td>
        <td><input type="image" src="equal_button.png" class="equal" /></td> 
    </tr>
    <tr>
        <td>
            <select class="dropDown" style="width:150px" name="rate_value_2">
                <option value="<?php echo $_SESSION['rate_value_2'] ;?>"><?php echo $_SESSION['rate_value_2'] ;?></option>
                <option value="Fixed Rate">Fixed Rate</option>
                <option value="Floating Rate">Floating Rate</option>
            </select>
        </td>
        <td><input type="image" src="equal_button.png" class="equal" /></td> 
    </tr>
    <tr>
        <td>
            <select class="dropDown" style="width:150px" name="rate_value_3">
                <option value="<?php echo $_SESSION['rate_value_3'] ;?>"><?php echo $_SESSION['rate_value_3'] ;?></option>
                <option value="Fixed Rate">Fixed Rate</option>
                <option value="Floating Rate">Floating Rate</option>
            </select>
        </td>
        <td><input type="image" src="equal_button.png" class="equal" /></td> 
    </tr>
    <tr>
        <td>
            <select class="dropDown" style="width:150px" name="rate_value_4">
                <option value="<?php echo $_SESSION['rate_value_4'] ;?>"><?php echo $_SESSION['rate_value_4'] ;?></option>
                <option value="Fixed Rate">Fixed Rate</option>
                <option value="Floating Rate">Floating Rate</option>
            </select>
        </td>
        <td><input type="image" src="equal_button.png" class="equal" /></td> 
    </tr>
</table>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:19:28.377

在jQuery中，

```
$('.dropDown').change(function(e) {

//Here you can do you programming
  console.log(e.currentTarget);
}); 
```

欲了解更多信息，

[http://api.jquery.com/change/](http://api.jquery.com/change/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T08:42:20.130

```
$("#dropDown").change(function () {
          var str = "";
          $("#dropDown option:selected").each(function () {
                str += $(this).text() + " ";
              });
          $("div").text(str);
        }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T08:58:49.440

你里面有很多问题。首先，您不能多次使用 id="dropDown" 。请改用 class="dropDown"。其次，一个建议是使用按钮而不是 img。

这是js：

```
<script type="text/javascript">
   $(document).ready(function() {
       $('.equal').on('click', function() {
           $('.dropDown').val('Floating Rate');
       })
   });
</script> 
```

和 html 更改：

```
<select class="dropDown" style="width:150px" name="rate_value_1">

<input type="button" value="select" class="equal" /> 
```

# solr - solr 中的索引错误：错误请求

> ID：10975770
> 
> 赞同：1
> 
> 时间：2012-06-11T07:08:19.533
> 
> 标签：solr, full-text-search

我在我的 spring mvc 项目中使用 solr：

以下是相关代码：

我的配置：

```
<bean id="solrServer" class="org.apache.solr.client.solrj.impl.CommonsHttpSolrServer">
        <constructor-arg value="http://localhost:8180/sorl"/>
        <property name="connectionTimeout" value="1000"/>
        <property name="defaultMaxConnectionsPerHost" value="32"/>
        <property name="maxTotalConnections" value="128"/>
</bean> 
```

我的域名：

```
...
@Entity
@Indexed
@Table(name="MySubject")
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public class MySubject extends BaseObject
{

    private static final long serialVersionUID = 1L;

    @Column
    @Field(index=Index.YES, analyze=Analyze.YES, store=Store.NO)
    @org.apache.solr.client.solrj.beans.Field("type")
    private String type;
..... 
```

索引代码：

```
try {
            solrServer.addBean(subject);
            solrServer.commit();
        } catch (IOException | SolrServerException e) {
            e.printStackTrace();
        } 
```

我得到了例外：

```
Bad Request

request: http://localhost:8180/sorl/update?wt=javabin&version=2
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:427)
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:249)
    at org.apache.solr.client.solrj.request.AbstractUpdateRequest.process(AbstractUpdateRequest.java:105)
    at org.apache.solr.client.solrj.SolrServer.add(SolrServer.java:121)
    at org.apache.solr.client.solrj.SolrServer.addBean(SolrServer.java:143)
    at org.apache.solr.client.solrj.SolrServer.addBean(SolrServer.java:131) 
```

在 solr 服务器中，日志为：

```
org.apache.solr.common.SolrException log
SEVERE: org.apache.solr.common.SolrException: ERROR: [doc=null] unknown field 'type'
    at org.apache.solr.update.DocumentBuilder.toDocument(DocumentBuilder.java:340)
    at org.apache.solr.update.processor.RunUpdateProcessor.processAdd(RunUpdateProcessorFactory.java:60)
    at org.apache.solr.update.processor.LogUpdateProcessor.processAdd(LogUpdateProcessorFactory.java:115)
    at org.apache.solr.handler.XMLLoader.processUpdate(XMLLoader.java:157)
    at org.apache.solr.handler.XMLLoader.load(XMLLoader.java:79)
    at org.apache.solr.handler.ContentStreamHandlerBase.handleRequestBody(ContentStreamHandlerBase.java:58)
    at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
    at org.apache.solr.core.SolrCore.execute(SolrCore.java:1376)
    at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:365)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:260)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1815)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

请帮助我。

# android - 用于应用程序图标徽章的 Android 小部件

> ID：10975771
> 
> 赞同：3
> 
> 时间：2012-06-11T07:08:21.437
> 
> 标签：android, icons, badge

帮助我如何向应用程序图标添加计数器徽章。我真的很需要这个。我只搜索和分析了一种安装小部件的方法，但找不到用于徽章的应用程序图标的小部件。

[添加柜台徽章](https://stackoverflow.com/questions/6123765/how-can-i-add-a-counter-badge-to-a-widget)

[像这样](http://www.mightygrocery.com/wp-content/uploads/2010/09/Widget-small-180x300.png)

# php - 如何确定字符串是否被压缩？

> ID：10975775
> 
> 赞同：10
> 
> 时间：2012-06-11T07:08:34.680
> 
> 标签：php, string, compression

如何确定字符串是否被压缩[`gzcompress`](http://www.php.net/manual/en/function.gzcompress.php)（除了在调用之前/之后比较字符串的大小[`gzuncompress`](http://www.php.net/manual/en/function.gzuncompress.php)，或者这是否是正确的方法）？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-03-25T23:59:33.063

[上一篇：
*我猜，如果你发送一个**请求**，你可以立即查看`$http_response_header`数组中的一项是否是`Content-Encoding: gzip`. 但这是 LAME！
有一个更好的方法。*

这是**如何...**]

## **检查它是否是 GZIP。像一个老板一样！**

> *根据[GZIP RFC](http://www.gzip.org/zlib/rfc-gzip.html#member-format)：*

 *### gzip 内容的标头如下所示

```
+---+---+---+---+---+---+---+---+---+---+
|ID1|ID2|CM |FLG|     MTIME     |XFL|OS | (more--&gt;)
+---+---+---+---+---+---+---+---+---+---+ 
```

并将内容标识`ID1`为`ID2` **GZIP**。并`CM`指出**`ZLIB_ENCODING`**（压缩方法）是`ZLIB_ENCODING_DEFLATE`- GZIP 通常将其用于所有 Web 服务器。

***哦！***并且它们具有固定值：

*   **ID1**的值为**`"\x1f"`**
*   **ID2**的值为**`"\x8b"`**
*   **CM**的值是*（或只是 8...）***`"\x08"`**

 *## 差不多好了：

`$is_gzip = 0 === mb_strpos($mystery_string , "\x1f" . "\x8b" . "\x08");`

## 工作示例

```
<?php
/** @link https://gist.github.com/eladkarako/d8f3addf4e3be92bae96#file-checking_gzip_like_a_boss-php */

date_default_timezone_set("Asia/Jerusalem");

while (ob_get_level() > 0) ob_end_flush();
mb_language("uni");
@mb_internal_encoding('UTF-8');
setlocale(LC_ALL, 'en_US.UTF-8');

header('Time-Zone: Asia/Jerusalem');
header('Charset: UTF-8');
header('Content-Encoding: UTF-8');
header('Content-Type: text/plain; charset=UTF-8');
header('Access-Control-Allow-Origin: *');

function get($url, $cookie = '') {
  $html = @file_get_contents($url, false, stream_context_create([
    'http' => [
      'method' => "GET",
      'header' => implode("\r\n", [''
        , 'Pragma: no-cache'
        , 'Cache-Control: no-cache'
        , 'User-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2310.0 Safari/537.36'
        , 'DNT: 1'
        , 'Accept-Language: en-US,en;q=0.8'
        , 'Accept: text/plain'
        , 'X-Forwarded-For: ' . implode(', ', array_unique(array_filter(array_map(function ($item) { return filter_input(INPUT_SERVER, $item, FILTER_SANITIZE_SPECIAL_CHARS); }, ['HTTP_X_FORWARDED_FOR', 'REMOTE_ADDR', 'HTTP_CLIENT_IP', 'SERVER_ADDR', 'REMOTE_ADDR']), function ($item) { return null !== $item; })))
        , 'Referer: http://eladkarako.com'
        , 'Connection: close'
        , 'Cookie: ' . $cookie
        , 'Accept-Encoding: gzip'
      ])
    ]]));

  $is_gzip = 0 === mb_strpos($html, "\x1f" . "\x8b" . "\x08", 0, "US-ASCII");

  return $is_gzip ? zlib_decode($html, ZLIB_ENCODING_DEFLATE) : $html;
}

$html = get('http://www.pogdesign.co.uk/cat/');

echo $html; 
```

### 我们在这里看到什么值得一提的？

*   首先初始化要使用的 PHP 引擎`UTF-8`（因为我们真的不知道 Web 服务器**是否会**返回 GZIP 内容。
*   提供 header `Accept-Encoding: gzip`，告诉网络服务器，它**可以**输出 GZIP 内容。
*   **发现 GZIP 内容（您应该使用带有ASCII 编码**的多字节函数）。
*   最后返回纯输出，很容易使用这些`ZLIB`方法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-11T07:16:29.597

字符串和压缩字符串都是简单的字节序列。您无法真正区分一个字节序列和另一个字节序列。您*应该*从随附的元数据中知道字节块是否代表压缩格式。

如果您真的需要以编程方式进行*猜测*，您可以尝试以下几件事：

*   尝试解压字符串，看看解压操作是否成功。如果失败，则字节可能不代表压缩字符串。
*   尝试像以前一样检查明显的“奇怪”字节`0x20`。这些字节通常不用于常规文本。但是，并不能真正保证它们出现在压缩字符串中。
*   用于[`mb_check_encoding`](http://php.net/mb_check_encoding)查看字符串在您怀疑它所在的编码中是否有效。如果不是，它可能已被压缩（或者您检查了错误的编码）。需要注意的是，几乎任何字节序列在几乎每个单字节编码中都是有效的，因此这只适用于多字节编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-17T15:01:33.640

这对我来说很好：

```
if (@gzuncompress($_xml)!==false) {
   // gzipped sring 
```**

# php - 如果用户保持空闲 10 分钟，则使 Zend 会话过期

> ID：10975781
> 
> 赞同：2
> 
> 时间：2012-06-11T07:09:47.553
> 
> 标签：php, zend-framework, session, session-timeout, zend-session

我是 zend 的新手，我想问如果用户闲置 10 分钟，我如何才能使用户的会话命名空间的特定密钥过期。我在 zend 会话中定义了一个命名空间

```
 $session = new Zend_Session_Namespace('loginNamespace'); 
```

现在，当用户登录时，我在会话命名空间中设置了键 loggedIn = 1。现在，如果用户保持空闲状态，我只想使该密钥过期，而不是使整个会话过期。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T07:13:33.590

从[文档](http://framework.zend.com/manual/en/zend.session.advanced_usage.html#zend.session.advanced_usage.expiration)中，您可以使用以下命令使密钥过期：

```
$session->setExpirationSeconds( 600, 'key' ); 
```

那么，你怎么能玩呢？这边走：

```
// Set "dummy" key with expiration
$session->setExpirationSeconds( 600, 'key' );

// Then, you can check if this key exists
if ( $session->key ) {
    // Just reset the expiration
    $session->setExpirationSeconds( 600, 'key' );
}
else {
    // Delete your other key
} 
```

# python - 直接调用时返回值的实例（不是实例）

> ID：10975785
> 
> 赞同：1
> 
> 时间：2012-06-11T07:10:10.470
> 
> 标签：python, class, inheritance, object, overloading

我想要一个类，它的实例在直接调用时返回一个值，就好像它们继承自 int、float、str 等一样。我想它正在重载某些函数**？？？**：

```
class A(object):
    def __init__(self, value):
        self.value = value

    def somefunction(self):
        if isintance(self.value, int):
            return 5
        else:
            return 'something else'

    def __???__(self):
        return self.value

a = A(2)
a + 5 # 7
a.somefunction() # 5

a = A('foo')
a + "bar" # 'foobar'
a.somefunction() # 'something else' 
```

我不能简单地将 int 子类化，因为值可能是不同的类型。

这是可行的吗？也许有一个很好的理由不能这样做，但是已经晚了，我想不到。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:38:28.770

由于元类混淆，覆盖`__getattr__`将不起作用；问题是相关方法需要在实例的类字典中。

如果您对不可变感到满意`value`，一种方法可能是`__new__`按需覆盖和构造类：

```
def __new__(cls, value):
    return type("A", (type(value), A), {})(value) 
```

请注意，这放在mro`A`之后`type(value)`；这是停止`__new__`导致失控递归的必要条件！如果上面的方法`A`应该覆盖那些 on `type(value)`，您可以将它们放入 dict 的第三个参数中`type()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:25:37.820

您可以使用`a.value + 'bar'`，也可以定义`__add__`方法

```
class A(object):
    def __init__(self, value):
        self.value = value

    def __add__(self, arg):
        return self.value + arg

a = A(2)
print a + 5           # 7

a = A('foo')
print a.value + "bar" # 'foobar'
print a + "bar"       # 'foobar' 
```

Python 函数和方法是一种泛型（你可以想到与 C++ 模板的相似之处）。例如，`+`运算符既适用于数字类型，也适用于字符串。你不能混合类型；但是，操作数的类型检查是动态完成的，当操作将被执行时。这样，该`__add__`方法适用于整数和字符串（以及复数和浮点数，...）。

如果要在打印时显示实例的值（即不执行`+`操作），可以定义`__str__`方法：

```
 def __str__(self):
        return str(self.value) 
```

# google-app-engine - 使用 jinja 显示 url 链接

> ID：10975787
> 
> 赞同：0
> 
> 时间：2012-06-11T07:10:21.717
> 
> 标签：google-app-engine, url, browser, jinja2

嗨，我正在使用 jinja2 和谷歌应用程序引擎，想知道在 jinja 呈现页面后是否可以在浏览器中显示 url 链接。

例如，如果我的浏览器转到一个 URL，www.test.com/login，我的服务器脚本将接收 GET 请求并通过 jinja 将 login.html 发送回浏览器。但是，我的浏览器上的链接仍将仅显示 www.test.com/login 而不是 www.test.com/login/login.html

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:17:31.340

您用于呈现的文件与您的处理程序处理的当前 url 路径之间没有任何联系。
内容通过流传递，您可以将任何您想要的内容放入流中，它可以是从模板呈现的内容或您将写入流的任何数据。

您可以编写一个处理程序，该处理程序将接收该模板名称作为参数并呈现它，这将为您提供带有模板文件名的 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T16:56:42.527

您的 URL 通过请求处理程序和您的 app.yaml 文件进行处理。因此，如果您将请求映射到 www.test.com/login.html，这与在 www.test.com/login 匹配的请求相匹配。

因此，您的问题实际上与 Jinja 无关，而是与您的请求处理程序有关。

例如

应用程序.yaml

```
application: your_app
version: 1
runtime: python27
api_version: 1
default_expiration: "1d"
threadsafe: True

- url: /login.html
  static_files: static/html/login.html
  upload: static/html/login.html
  secure: never

- url: /login
  script: main.app 
```

主文件

```
import webapp2
from controllers.LoginHandler import LoginHandler

app = webapp2.WSGIApplication([
    webapp2.Route(r'/login', LoginHandler)
], debug=True) 
```

在上面的示例中，我展示了 2 条不同的路线。/login.html 的一个静态路由和 /login 的第二个生成路由。如果您不想要 .html 则不要匹配该路线。

关于匹配的说明，搜索引擎对 http 和 https 的处理方式不同，因此最好将`secure: never/always/optional`用于您的路线以确保它的书签相同。尾随 / 和 .html 也不同于裸路由。出于搜索索引的原因强制执行您的路线非常有用。

# javascript - 尝试运行下一个上一个按钮以播放来自列表媒体播放器代码错误的视频？

> ID：10975789
> 
> 赞同：0
> 
> 时间：2012-06-11T07:10:30.250
> 
> 标签：javascript, html, playlist, windows-media-player

我正在尝试从列表中运行视频我有我使用两个按钮从列表中运行下一个以前的视频，默认情况下它运行第一个但它给我错误而且我也很困惑所以我需要帮助让它运行让我告诉它是我的视频列表代码，

```
 <div>
<SELECT id=cancion onchange=PlayIt() size=20 name="cancion" style="width: 470; color:#C0C0C0; height:22; background-color:#000000;">
<option value=Peace1.wmv>. . Countdown</option>
<option value=Fire.wmv>. . Time Crisis 4</option>
<option value=Water.wmv>. . Need For Speed</option>
<option value=http://liamalexander.com/computing/gallery/albums/video/assessment.wmv>. . Meli's Video</option>
<option value=http://liamalexander.com/computing/gallery/albums/video/k_0001.wmv>. . Keldin's Video</option>
<option value=http://liamalexander.com/computing/gallery/albums/video/Skateboard_Tricks_Video.wmv>. . Chris's Video</option>
<option value=http://liamalexander.com/computing/gallery/albums/video/video_0001.wmv>. . Salinina's Video</option>
<option value=http://liamalexander.com/computing/gallery/albums/video/JORDAN_MOVES_23.wmv>. . Josh's Video</option>
<option value=http://liamalexander.com/computing/gallery/albums/video/robots_video_0001.wmv>. . Sam's Video</option>
<option value=http://liamalexander.com/computing/gallery/albums/video/Unexpected2.wmv>. . Unexpected</option>
<option value=http://liamalexander.com/computing/gallery/albums/video/By_brendan_wu.wmv>. . Brendan's Video</option>
<option value=http://liamalexander.com/computing/gallery/albums/video/rebecca01.wmv>. . Rebecca's Video 1</option>
<option value=http://liamalexander.com/computing/gallery/albums/video/rebecca_robots002.wmv>. . Rebecca's Video 2</option>
<option value=http://liamalexander.com/computing/gallery/albums/video/robotics_videoo_002.wmv>. . Robotics Video</option>
<option value=http://liamalexander.com/computing/gallery/albums/video/joys_01.wmv>. . The Joys of Spring</option>
</SELECT>
</div> 
```

我们有两个按钮 next 和 previous 用于切换视频，

```
<button type="button" onclick="showDiv(1 - 1)">Previous</button>
<button type="button" onclick="showDiv(1 + 1)">Next</button> 
```

现在将在下一个或上一个按钮上运行的脚本，

```
function showDiv(which) {
var currentImage = 1;
   for(i = 0; i < 13; i++) {
      //document.getElementById("image"+i).style.display="none";
 document.getElementById("music1").innerHTML='<object id="mediaPlayer" width="470" height="400" '
+'classid="CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95" '
+'codebase="http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701" '
+'standby="Loading Microsoft Windows Media Player components..." type="application/x-oleobject">'
+'<param name="fileName" value="'+document.getElementById('cancion'+i).value+'">'
+'<param name="animationatStart" value="true">'
+'<param name="transparentatStart" value="true">'
+'<param name="autoStart" value="1">'
+'<param name="showControls" value="true">'
+'<param name="loop" value="true">'
+'<param name="ShowStatusBar" value="true">'
+'<param name="ShowPositionControls" value="true">'
+'<param name="enableContextMenu" value="1" />'
+'<param name="fullScreen" value="0" />'
+'<embed type="application/x-mplayer2" '
+'pluginspage="http://microsoft.com/windows/mediaplayer/en/download/" '
+'bgcolor="darkblue" showcontrols="true" showpositioncontrols="true" showstatusbar="true" showgotobar="true" width="470" height="400" '
+'src="'+document.getElementById('cancion'+i).value+'" autostart="true" designtimesp="5311" loop="true">'
+'</embed>'
+'</object>'
   }
   //in the next 2 lines, you make sure which isn't lower than 1, and isn't greater than the number of images
   if(which < 1) which = 1;
   if(which > 13) which = 13;
   document.getElementById("image" + which).style.display = "block";
   currentImage = which;
} 
```

我正在使用三个视频“Peace1”“火”“水”你可以在这里使用任何视频你必须检查这个代码

希望尽快收到您的来信，提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:26:24.290

这是您应该使用的脚本：

```
<script type="text/javascript">

       var currentTrack = 1;

       function showDiv(direction) {

             if(direction == "prev") {
                 // previous pressed
                 if(currentTrack > 1) {
                     currentTrack--;
                 }
             } else {
                 // next pressed
                 if(currentTrack < 13) {
                     currentTrack++;
                 }
             }

             document.getElementById("image" + currentTrack).style.display = "block";

             document.getElementById("music1").innerHTML='<object id="mediaPlayer" width="470" height="400" '
                    +'classid="CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95" '
                    +'codebase="http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701" '
                    +'standby="Loading Microsoft Windows Media Player components..." type="application/x-oleobject">'
                    +'<param name="fileName" value="'+document.getElementById('cancion').options[currentTrack].value+'">'
                    +'<param name="animationatStart" value="true">'
                    +'<param name="transparentatStart" value="true">'
                    +'<param name="autoStart" value="1">'
                    +'<param name="showControls" value="true">'
                    +'<param name="loop" value="true">'
                    +'<param name="ShowStatusBar" value="true">'
                    +'<param name="ShowPositionControls" value="true">'
                    +'<param name="enableContextMenu" value="1" />'
                    +'<param name="fullScreen" value="0" />'
                    +'<embed type="application/x-mplayer2" '
                    +'pluginspage="http://microsoft.com/windows/mediaplayer/en/download/" '
                    +'bgcolor="darkblue" showcontrols="true" showpositioncontrols="true" showstatusbar="true" showgotobar="true" width="470" height="400" '
                    +'src="'+document.getElementById('cancion').options[currentTrack].value+'" autostart="true" designtimesp="5311" loop="true">'
                    +'</embed>'
                    +'</object>'
       }

</script> 
```

按钮也相应改变：

```
<button type="button" onclick="showDiv('prev')">Previous</button>
<button type="button" onclick="showDiv('next')">Next</button> 
```

我想告诉你几件事：
1\. 对于属性使用“”或“”
2\. 不要执行 onclick=""，通过 javascript 绑定事件处理程序（我将示例保持不变，以便您可以学习一些搜索有关如何绑定事件处理程序的答案）

祝你好运！

# android - 如何获取循环android中发送的每条短信的送达报告？

> ID：10975792
> 
> 赞同：4
> 
> 时间：2012-06-11T07:10:36.103
> 
> 标签：android, sms

我正在开发短信应用程序。我需要循环发送短信。为 SENT 和 DELIVERED 状态注册了广播接收器，但问题是如何区分哪个传递通知是针对我发送的哪个 SMS。我正在使用 SMSMANAGER 类发送短信。我的问题与此处讨论的类似：[How to monitor each of Sent SMS status?](https://stackoverflow.com/questions/4639778/how-to-monitor-each-of-sent-sms-status)

# iphone - simpleftp 中的内存泄漏

> ID：10975796
> 
> 赞同：1
> 
> 时间：2012-06-11T07:10:49.837
> 
> 标签：iphone, objective-c, memory-leaks

我使用[simpleFTP](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Listings/Read_Me_About_SimpleFTPSample_txt.html)来请求文档信息。我用仪器检测内存泄漏如下：

![在此处输入图像描述](../Images/d8bbdd2fa0d16da2de3e57307b1afbef.png)

在调用树中，我发现内存泄漏发生在哪里：

![在此处输入图像描述](../Images/f8dd51a1a6bcc5fd6722c6186b74c628.png)

方法“_parseListData”如下：

```
- (void)_parseListData
{
    NSMutableArray *    newEntries;
    NSUInteger          offset;

    // We accumulate the new entries into an array to avoid a) adding items to the 
    // table one-by-one, and b) repeatedly shuffling the listData buffer around.

    newEntries = [NSMutableArray array];
    assert(newEntries != nil);

    offset = 0;
    do {
        CFIndex         bytesConsumed;
        CFDictionaryRef thisEntry;

        thisEntry = NULL;

        assert(offset <= self.listData.length);
        bytesConsumed = CFFTPCreateParsedResourceListing(NULL, &((const uint8_t *) self.listData.bytes) [offset], self.listData.length - offset, &thisEntry);
        if (bytesConsumed > 0) {
........
} 
```

我不知道如何解决这个问题。

方法“ `CFFTPCreateParsedResourceListing`”是一个系统方法，它创建`__NSDate`（*看第二张图片*）。

这就是内存泄漏发生的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T16:59:24.577

旧帖子，但有用的解决方案。你可以在这里找到答案[BlackRaccoon ftp client](https://github.com/lloydsargent/BlackRaccoon/blob/master/BlackRaccoon/BlackRaccoon/BRRequestListDirectory.m)。根据创建者的说法，CFFTPCreateParsedResourceListing 方法保留了两倍的 NSDate，要覆盖问题添加下一个代码，请注意此处的注释： [FAQ 部分](https://github.com/lloydsargent/BlackRaccoon/wiki) “实际上，在 WhiteRaccoon 中，如果列出目录，您将泄漏 NSDate。函数 CFFTPCreateParsedResourceListing 在“Apple 的 SDK 存在漏洞。我试图“修补”这个问题，但不能保证它可以正常工作。对于 OS 5.1，它确实可以工作。”

```
 ........
            if (parsedBytes > 0)
            {
                if (listingEntity != NULL)
                {
                    //----- July 10, 2012: CFFTPCreateParsedResourceListing had a bug that had the date over retained
                    //----- in order to fix this, we release it once. However, just as a precaution, we check to see what
                    //----- the retain count might be (this isn't guaranteed to work).
                    id date = [(__bridge NSDictionary *) listingEntity objectForKey: (id) kCFFTPResourceModDate];
                    if (CFGetRetainCount((__bridge CFTypeRef) date) >= 2)
                        CFRelease((__bridge CFTypeRef) date); 
```

这对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T08:05:20.290

该`CFFTPCreateParsedResourceListing`函数将 a 返回`CFDictionary`到`thisEntry`变量中，该变量可能包含`NSDate`对象。

`CFRelease`代码完成后应该调用`thisEntry`：

```
// once we're done with thisEntry
if (thisEntry) {
    CFRelease(thisEntry);
} 
```

# python - 为什么 Logging 在 django 网站上不起作用？

> ID：10975798
> 
> 赞同：5
> 
> 时间：2012-06-11T07:11:12.953
> 
> 标签：python, django

这就是我尝试过的。在我的 view.py 文件中，

```
import logging
logger = logging.getLogger("mylog")
logging.basicConfig(format='%(name)s:%(levelname)s:%(message)s',level=logging.INFO,datefmt='%d/%m/%y %I:%M:%S') 
```

然后在一个函数内部，

```
logger.debug("this is an error")
logger.warning("This is a warning")
print "This is a test line ' 
```

我没有触及 settings.py 文件。它几乎相同。

```
LOGGING = {

    'version': 1,

    'disable_existing_loggers': False,

    'handlers': {

        'mail_admins': {

            'level': 'ERROR',

            'class': 'django.utils.log.AdminEmailHandler'

        }

    },

    'loggers': {

        'django.request': {

            'handlers': ['mail_admins'],

            'level': 'ERROR',

            'propagate': True,

        },

    } 
```

当我运行服务器并调用该函数时，什么也没有发生。没有错误，什么都没有。

我只想在控制台上看到一条日志行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T07:50:30.887

尝试将此添加到处理程序：

```
'console':{
            'level':'DEBUG',
            'class':'logging.StreamHandler',
            'formatter': 'simple'
           } 
```

在记录器中：

```
 'django': {
        'handlers':['console'],
        'propagate': True,
        'level':'INFO',
    }, 
```

日志级别可以相同或不同 - 事实上，处理程序定义了它将记录的最低级别，而记录器定义了它将发送给处理程序的最低级别。如果一个处理程序被两个或多个记录器使用 - 理想情况下，它应该具有两个记录器的最低级别。

**编辑**：感谢@jpic 指向记录器部分。

# c# - C#将'TYPE'作为参数传递，然后与'is'进行比较

> ID：10975800
> 
> 赞同：0
> 
> 时间：2012-06-11T07:11:13.963
> 
> 标签：c#

我正在尝试通过消除对我的“控制比较”进行硬编码的需要，将以下代码转换为 GENERIC 函数。有什么方法可以做到这一点？:)

```
 private Control getControlByAccessible(string accessDesc, string accessName, Control wrapper)
    {
        foreach (Control ctrl in wrapper.Controls)
        {
            if (ctrl is TextBox)
            if (ctrl.AccessibleDescription == accessDesc && ctrl.AccessibleName == accessName)
                return ctrl;
        }
        return null;
    } 
```

这是我的第一次尝试，到目前为止还没有产生任何结果。

```
 private Control getControlByAccessible(string accessDesc, string accessName, Control wrapper, Type aControlType)
    {
        foreach (Control ctrl in wrapper.Controls)
        {
            if (ctrl is aControlType)
            if (ctrl.AccessibleDescription == accessDesc && ctrl.AccessibleName == accessName)
                return ctrl;
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T07:16:05.270

您可以使用[`Type.IsInstanceOfType`](http://msdn.microsoft.com/en-us/library/system.type.isinstanceoftype.aspx)：

```
if (aControlType.IsInstanceOfType(ctrl)) 
```

但是，如果可能，我个人会将其设置为带有类型参数的真正通用方法，然后使用 LINQ 的`OfType`方法。我也可能将其作为扩展方法：

```
// This would need to be in a top-level non-generic class
public static T GetControlByAccessible<T>(this Control wrapper,
    string description, string name) where T : Control
{
    return wrapper.Controls
                  .OfType<T>()
                  .FirstOrDefault(c => c.AccessibleDescription == description &&
                                       c.AccessibleName == name);
} 
```

然后像这样调用它：

```
TextBox tb = someContainer.GetControlByAccessible<TextBox>("name", "desc"); 
```

# android - 我如何在 Android 应用程序中使用网络 cookie

> ID：10975801
> 
> 赞同：0
> 
> 时间：2012-06-11T07:11:19.470
> 
> 标签：android

我想在 android 应用程序中使用 webCookie。我该如何使用它？当我从浏览器打开 gmail 然后登录时，情况就是这样。然后在我的应用程序 webview 中，如果我在应用程序的 webview 中打开 gmail 并且应用程序中的用户将自动登录，我想使用相同的 cookie。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:19:43.137

要存储 cookie，

```
CookieSyncManager sManager = CookieSyncManager.createInstance(myWebView.getContext());
CookieManager cManager = CookieManager.getInstance();

cManager.setCookie(); 
sManager.sync(); 
```

# objective-c - {}内的objective-c变量声明与@interface和@end之外的变量声明

> ID：10975803
> 
> 赞同：0
> 
> 时间：2012-06-11T07:11:26.007
> 
> 标签：objective-c, ios

请任何人告诉我在{}内声明变量与在头文件中@interface和@end之外声明变量有什么区别。两种方式都会导致编译成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T07:14:31.593

如果您希望变量成为类的一部分（也称为实例变量），则在括号内声明它，否则将其声明为与类无关的全局变量。

例如

```
// XYZ.h

@interface XYZ
{
  int myinstancevariable;
}
@end

int myglobalvariable; 
```

...

```
XYZ* a = [[XYZ alloc] init];
NSLog(@"%d", [a myinstancevariable]);
NSLog(@"%d", myglobalvariable ); 
```

编辑：忘记{}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T07:15:55.540

如果您在 a 内声明变量，`code block - {}`则它的范围（寿命）仅在该块内。

如果您在外部声明它并且`@interface`它`@end`的范围在该文件内。如果这将是一个头文件，则可以全局使用此变量。

# javascript - 从 javascript (VB.NET) 执行代码隐藏 Function/Sub

> ID：10975804
> 
> 赞同：0
> 
> 时间：2012-06-11T07:11:28.963
> 
> 标签：javascript, asp.net, vb.net, radiobuttonlist, raiseevent

在我的项目中，有 3 个用户控件；BasicContact、BasicDetail 和 ActionTime。它们在 EditOrder.aspx 页面中。

BasicContact 中有“ReportDate”属性（日期类型），BasicDetail 中有 RadioButtonList“rdl_Priority”（具有“prio_id”字段中的整数值），ActionTime 中有“CheckDate”属性。ReportDate 值派生自 txt_ReportDate 和 txt_ReportTime，而 CheckDate 值派生自 txt_CheckDate 和 txt_CheckTime。

我的目标是在将日期添加到 ReportDate 并单击单选按钮列表后计算 Checkdate。Checkdate 将根据 ReportDate（日期）+ SLAHour（小时，从输入为 prio_id 的“GetSLAHour”方法获取）计算，然后在 txt_CheckDate 和 txt_CheckTime 中设置文本。

现在，我能够使用 Postback 完成这项任务。我创建自定义事件并在 RadioButtonList selectedIndexchanged 方法中引发它。之后，事件在 EditOrder 页面后面的代码中处理。这是我的代码。

BasicDetail - RadioButtonList

```
<asp:RadioButtonList ID="rdl_Priority" runat="server" RepeatDirection="Horizontal" AutoPostBack="true" /> 
```

BasicDetail - codeBehind

```
Public Event priorityClicked As System.EventHandler

Private Sub Page_Init(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Init
    If Not IsPostBack Then SetupList()
End Sub

Private Sub SetupList()
    Dim ctx As New StsDataContext
    With rdl_Priority
        Dim Result = (From r In ctx.Priorities Order By r.display_order)
        If Result.Count > 0 Then
            .DataTextField = "prio_name"
            .DataValueField = "prio_id"
            .DataSource = Result
            .DataBind()
        Else
            lbl_Priority.Visible = False
            rdl_Priority.Visible = False
        End If
    End With
End Sub

Protected Sub rdl_Priority_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles rdl_Priority.SelectedIndexChanged
    RaiseEvent priorityClicked(sender, e)
End Sub 
```

EditOrder - 代码隐藏

```
Private Sub BasicDetail_priorityClicked(ByVal sender As Object, ByVal e As System.EventArgs) Handles BasicDetail.priorityClicked
    Dim reportDate As Date? = BasicContact.ReportDate
    Dim SLAHour As Integer? = GetSLAHour(BasicDetail.PriorityId)
    If reportDate.HasValue AndAlso SLAHour.HasValue Then
        ActionTime.CheckDate = CDate(reportDate).AddHours(CDbl(SLAHour))
    End If
End Sub 
```

但是，我不希望刷新页面（没有回发）。我不知道如何从 javascript 调用函数或子函数。我已经尝试过 PageMethod 但它在运行时导致错误，说该方法不受支持。无论如何，如果有比从 javascript 调用代码隐藏更好的方法，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T03:26:54.343

好的对不起，这是我的解决方案

因为现在我使用 PageMethod 来解决这个问题，我不再需要从后面的代码中引发事件函数，所以我删除了我发布的所有代码来问我自己的问题。

首先，我在后面的 BasicDetail 代码中为 RadioButtonList 中的每个项目添加了 javascript 函数

BasicDetail - 后面的代码

```
Private Sub rdl_Priority_DataBound(ByVal sender As Object, ByVal e As System.EventArgs) Handles rdl_Priority.DataBound
    For Each li As ListItem In rdl_Priority.Items
        Dim slaHour As Integer? = GetSLAHour(li.Value)
        li.Attributes.Add("onclick", "return CalCheckDate(" & If(slaHour.HasValue, CStr(slaHour), "null") & ");")
    Next
End Sub 
```

这个添加到每个按钮的“CalCheckDate”功能在EditOrder页面（用户控件的父页面）中实现

编辑订单.aspx

```
<script type="text/javascript">
    function CalCheckDate(hour) {
        var hid_ServId = document.getElementById('<%=hid_ServId.ClientID%>');
        var txt_reportDate = document.getElementById('<%=BasicContact.ReportDateTextName%>');
        var txt_reportTime = document.getElementById('<%=BasicContact.ReportTimeTextName%>');
        PageMethods.GetCheckDateTime(hid_ServId.value, txt_reportDate.value, txt_reportTime.value, hour, OnGetCheckDateComplete, OnGetCheckDateError);
    }
    function OnGetCheckDateComplete(result) {
        var txt_checkDate = document.getElementById('<%=ActionTime.CheckDateTextName%>');
        var txt_checkTime = document.getElementById('<%=ActionTime.CheckTimeTextName%>');
        var chkDateTime = result.split(" ");
        txt_checkDate.value = chkDateTime[0];
        txt_checkTime.value = chkDateTime[1];
    }
    function OnGetCheckDateError(e)
    {
        alert(e._message);
    }
</script> 
```

用户控件中的子控件，例如BasicContact中的txt_ReportDate，可以通过在BasicContact中创建属性来派生，如下：

BasicContact - 代码背后

```
Public ReadOnly Property ReportDateTextName() As String
    Get
        Return txt_ReportDate.ClientID
    End Get
End Property 
```

此属性在“CalCheckDate”函数中用于获取其值并将其传递给 PageMethod 函数。其他控件可以以相同的方式派生。

最后一步是在后面的 EditOrder 代码中编码 PageMethods 函数“GetCheckDateTime”

EditOrder - 代码隐藏

```
<System.Web.Services.WebMethod()> _
Public Shared Function GetCheckDateTime(ByVal servId As String, ByVal ReportDate As String, ByVal ReportTime As String, ByVal hour As String) As String
    Dim checkDate As String, checkTime As String
    '************************************************************************
    'Calculate check and time date from input ReportDate, ReportTime and hour
    '************************************************************************
    Return checkDate & " " & checkTime
End Function 
```

结果返回到 javascript 中的“OnGetCheckDateComplete”函数（如果有异常，则返回“OnGetCheckDateError”）。在这里，我拆分字符串并使用它的值在文本框中设置文本。

# mysql - 为什么在重复语句中使用术语键？

> ID：10975806
> 
> 赞同：1
> 
> 时间：2012-06-11T07:11:32.340
> 
> 标签：mysql

我是新手`mysql`，正在阅读关于`duplicate key update`. 我们一般写的语句是这样的

```
insert into table (col1,col2) values(1,1) on duplicate key update col2=1; 
```

假设 col1 为`primary`.

我对这个语句的理解是，如果 col1 中有重复值，则相应的语句将 col2 更新为 1。我的问题是为什么我们`key`在这个语句中使用术语“”？据了解，该语句仅在存在`primary key violation`. 我们可以使用其他任何参数或函数`duplicate`吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T07:18:27.643

如果存在*主*键或*唯一*键违规，MySQL 会更新。该[手册](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)在单独的章节中通过示例对其进行了广泛的介绍：

> 如果您指定 ON DUPLICATE KEY UPDATE，并且插入的行会导致 UNIQUE 索引或 PRIMARY KEY 中的重复值，MySQL 将对旧行执行 UPDATE。

术语*键*用作语法定义的一部分。该术语仅在执行语句时才可用`INSERT`。如果您通过任何其他方式插入数据（我现在只能想到[`LOAD DATA`](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)），其他机制就会到位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T07:19:20.690

此命令没有其他选项。另外我想说你可以用这种方式重写语句 -

INSERT INTO table (col1, col2) VALUES(1, 1) ON DUPLICATE KEY UPDATE col2 = VALUES(col2);

您也可以使用：

*   带有 IGNORE 关键字的 INSERT 语句以忽略错误[。](http://dev.mysql.com/doc/refman/5.1/en/insert.html)
*   用唯一键替换记录的[REPLACE语句。](http://dev.mysql.com/doc/refman/5.1/en/replace.html)

换句话说，INSERT+ON DUPLICATE KEY UPDATE 就像一个语句中的 INSERT 和 REPLACE 一样工作。还有一件事 - INSERT+ON DUPLICATE KEY UPDATE 语句有很大的优势，它不会删除更新记录；REPLACE 语句删除然后插入新记录。

# sql-server - 使 SQl Server 数据库脱机时连接会发生什么情况？

> ID：10975814
> 
> 赞同：0
> 
> 时间：2012-06-11T07:12:02.983
> 
> 标签：sql-server, database, transactions

我最近尝试了 2 个数据库的大合并。我们将数据库 2 中的模式重新创建到数据库 1 中，并创建了一个脚本来将数据库 2 中的所有数据传输到数据库 1。该脚本需要大约 35 分钟的时间来运行并处理以下事务：

```
BEGIN TRANSACTION
...
IF(@@error<>0)
    COMMIT TRANSACTION
ELSE
    ROLLBACK TRANSACTION 
```

完整的脚本有点敏感，但这里有一些结构相同的 SQL：http: [//pastebin.com/GWJ3ZnkF](http://pastebin.com/GWJ3ZnkF)

我们运行了脚本，所有数据都被正确传输。我们测试了使用新组合数据库运行的系统（删除了对旧数据库的访问权限）。

但作为最后一项任务，我们想让旧数据库脱机，以确保没有人使用该数据库。为此，我们使用了：

```
ALTER DATABASE <dbname> SET OFFLINE WITH ROLLBACK IMMEDIATE 
```

这很糟糕。在这行 SQL 代码之后，我们刚刚复制的组合数据库中的所有数据突然消失了。我首先假设它还没有真正完成，所以“立即回滚”听起来像是对我的事务执行了回滚..

但为什么？事务不是已经提交了吗？

我也尝试再次运行相同的脚本几次，但每次尝试后都没有复制数据，即使它说脚本成功。我不知道为什么......它是否记得我的离线回滚？

我的连接到底发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T08:07:43.327

听起来你有一个未提交的待处理事务，你强迫它回滚，失去了一些工作。其余部分由脚本的结构方式解释。您的脚本不太可能从头到尾有一个事务。只有最后一个事务被回滚，所以数据库现在处于“半复制”的状态。可能您的脚本会进行各种检查，并且此中间状态会将脚本发送到“ELSE”分支上，在那里它没有做正确的工作（即，显然什么都不做）。

没有发布确切的脚本，无论如何都是猜测。

现在您需要将数据库恢复到一致的状态，即数据复制之前的状态。使用您在数据移动之前进行的备份（您*确实*进行了备份，对吗？）。为了获得额外的荣誉，请确保您的脚本是[幂等](http://en.wikipedia.org/wiki/Idempotence)的并且在半更新的数据库上正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:23:30.867

> **立即回滚：**
> 
> 所有未完成的事务将被回滚，并且与数据库的任何其他连接将立即断开。

听起来有人把 2 个数据库弄混了，或者可能有一个未完成的交易？....你能发布你的整个脚本吗？

[参考：更改数据库](http://msdn.microsoft.com/en-us/library/bb522682%28v=sql.105%29.aspx)。

不仅要检查`@@ERROR`，还要检查`@@TRANCOUNT`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T07:43:50.387

我会仔细检查以确保没有未完成的交易。要么浏览文件并计算`BEGIN TRANSACTION`vs`COMMIT TRANSACTION`行数，要么在文件末尾添加一条语句以`SELECT @@TRANCOUNT`确保没有剩余的未处理事务。

如果您的数据已提交，那么断开连接不会丢失数据。

# javascript - 如何在未经用户批准的情况下使用 JS 从 Web 浏览器运行和安装 EXE 文件

> ID：10975815
> 
> 赞同：0
> 
> 时间：2012-06-11T07:12:05.807
> 
> 标签：javascript, clickonce, exe

我想在我的网站中实现类似于 google chrome 网站的功能，用户单击网站表单，文件将自动下载并自行安装，无需任何用户批​​准或干预。这是谷歌浏览器网站：[https ://www.google.com/chrome/index.html?hl=iw](https://www.google.com/chrome/index.html?hl=iw)

我知道他们对 IE 使用了 ms 的 clickonce 技术，对所有其他浏览器使用了谷歌的 oneclick 技术，但是有一种方法可以让我也使用他们的代码和他们的技术来运行我自己的文件？我知道他们也使用在 Windows 背景上运行的谷歌更新任务，但我不知道如何将它与我自己的文件一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:40:01.647

出于安全原因，您无法从您的网站访问文件。如果用户打开一个网站，他们的机器上安装了一些程序，会发生什么？这将是一个严重的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T07:33:02.937

据我所知，只有当客户端具有 .NET Framework（我猜是第 4 版）并且您的域位于用户对此功能的偏好的受信任域列表中时，此功能才可能实现。因此，这仅适用于 Windows 平台，并且您的域需要添加到上述列表中（我猜这不太可能发生）。一个简短的回答是否定的，如果你不是像谷歌这样的公司，你就不能这样做。

奖励：你不需要它，用户不喜欢被欺骗，他们想知道他们电脑上发生的一切。

# php - jQuery从带有数据库ajax 的元素中删除ID并刷新

> ID：10975819
> 
> 赞同：3
> 
> 时间：2012-06-11T07:12:18.803
> 
> 标签：php, jquery, html, ajax

您好，目前我正在尝试使用 jQuery 来使用 ajax 获取多个字段的 id 并发送数据以通过 php 将其删除。到目前为止，我能够删除该项目，但我无法删除其他 ID，例如：

我有一个 for 循环，它将从数据库中获取信息：

```
 for($i=0; $i < $data; $i++) {
    echo "
    <div class='list-item' data-action='delete' id='".$Data[$i]['ID']."'>
    <a class='title link' href='".$Data[$i]['URL']."' target='_blank'>".$Data[$i]['name']."</a>
    <span class='checkbox' id='".$Data[$i]['ID']."' value='".$Data[$i]['ID']."'></span>
    <div class='thumb'>                             
    <img src='".$Data[$i]['thumb']."' alt='' width='110' height='99'>                               
    <span class='attr'>".$Data[$i]['width'].'x'.$Data[$i]['height']."</span>                                
    <span class='size'>".$Data[$i]['size']."</span>                         
    </div>                          
    <div class='date'>".$Data[$i]['Date']."</div>                     
    </div>
    ";
  } 
```

注意你是如何看到 $Data[$i]['ID'] 的，它会打印出来：

```
<div class="list-item" data-action="delete" id="89">
<a class="title link" href="http://URL" target="_blank">NAME</a>
<span class="checkbox" id="89" value="89"></span>
<div class="thumb">
<img src="thumb.png" alt="" width="110" height="99">
<span class="attr">100x100</span>
<span class="size">85.2 KB</span></div>
<div class="date">2012-06-11 01:25:20</div>
</div>

<div class="list-item" data-action="delete" id="90">
<a class="title link" href="http://URL" target="_blank">NAME</a>
<span class="checkbox" id="90" value="90"></span>
<div class="thumb">
<img src="thumb.png" alt="" width="110" height="99">
<span class="attr">100x100</span>
<span class="size">85.2 KB</span></div>
<div class="date">2012-06-11 01:25:20</div>
</div> 
```

因此，我使用 jQuery 向 class="checkbox" 和 class="list-item" 添加一个类，`selected`这样当点击或 .on('click' 函数的事件时，它将执行一个确认窗口说“你确定要删除吗？”如果确定，然后获取每个元素的 id 并使用 ajax 发布数据以立即删除该项目！问题是我需要它处理多个 id 而不是将类添加`selected`到所有 class="checkbox" 和 class="list-item" 需要它是具体的，如果我这样做的话，我会选择 84、94、99 和 100 的项目被选中的应该`selected`不是每个 id的那个类

这是我试图让它发挥作用的尝试

```
<script>
$(function (){
$('.list-item').on('click', function(e) {
$(this).addClass("selected");
if(window.confirm('Are you sure you want to remove?')) {
id = $(this).attr("id");
        //alert(id);
        $.ajax({
            type: 'post',
            url: 'something.php?action=delete&id='+id,
            dataType: 'json',
            data: {

            }, success: function(data) {
                if(data.error === true)
                    {
                        $.errRorBar({ bdS: "error", html: data.message , delay: 5000 });
                    }
                    else
                    { 
                    $.errRorBar({ bdS: "success", html: data.message , delay: 5000});
                    }
            }, error: function(XMLHttpRequest, textStatus, errorThrown) {
                $.errRorBar({ bdS: "error", html: "Opps! Something went wrong!" , delay: 5000 });

                console.log(XMLHttpRequest);
                console.log(textStatus);
                console.log(errorThrown);

                // console.log(XMLHttpRequest.responseText);
            }

        });
        return false;
  }
});
});
</script> 
```

那么我该如何做到这一点以及如何进行刷新以更新列表使其隐藏或删除它或其他什么？目前，它会从数据库中删除该项目，但即使我选择了多个项目，我选择的一项也只会删除一次，我会得到“删除失败”的返回

这里有人可以帮助我吗？我想我遗漏了一些东西，但希望这是对我的情况的一个很好的解释谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T08:38:54.330

查看您的代码后，我发现了一些故障：

1.  类列表项的元素 div 和具有相同 id 的类复选框的跨度，这违反了 dom 规范。（在 div-89、span-89 等 id 之前使用前缀）。
2.  您正在使用请求类型 post 但将数据发布在 url 中，即 get 方法。
3.  您在复选框的单击事件上发送请求，因此每次选择它时都会触发它，因此您无法使用此方法删除多个项目。

解决方案：创建一个单独的删除按钮并在单击该按钮时发送请求。

您的代码将是：

```
$('.list-item').click(function() {
    $(this).addClass('selected');
});

$(.delete).click(function() {
    var delIds = new Array();
    $('.selected').each(function() {
        delIds.push($(this).attr('id'));
    });

    $.ajax({
        url: 'something.php?action=delete&id='+delIds.join(),
        dataType: 'json',
        success: function(data) {
                    if(data.error === true)
                        {
                            $.errRorBar({ bdS: "error", html: data.message , delay: 5000 });
                        }
                        else
                        { 
                            $.errRorBar({ bdS: "success", html: data.message , delay: 5000});
                        }
                }, 
        error: function(XMLHttpRequest, textStatus, errorThrown)        {
                    $.errRorBar({ bdS: "error", html: "Opps! Something went wrong!" , delay: 5000 });

                    console.log(XMLHttpRequest);
                    console.log(textStatus);
                    console.log(errorThrown);

                    // console.log(XMLHttpRequest.responseText);
            }
    });
}); 
```

希望这可以帮助你

# cordova - 如何为黑莓构建 PhoneGap 示例应用程序项目

> ID：10975820
> 
> 赞同：0
> 
> 时间：2012-06-11T07:12:19.083
> 
> 标签：cordova, blackberry-webworks

我想创建使用的应用程序`blackberry`，`phoneGap`我已经下载并安装了此页面上给出的所有必需工具

> [http://wiki.phonegap.com/w/page/31930982/Getting-Started-with-PhoneGap-BlackBerry-WebWorks](http://wiki.phonegap.com/w/page/31930982/Getting-Started-with-PhoneGap-BlackBerry-WebWorks)。

但是，当我尝试构建（使用[此链接](http://wiki.phonegap.com/w/page/31930982/Getting-Started-with-PhoneGap-BlackBerry-WebWorks#BuildthePhoneGapSampleApplicationProject)）为带有 phoneGap 库的 blackbery 提供的示例 phoneGap 项目时。我收到此错误

![在此处输入图像描述](../Images/e219ddfa74508e469bd91336c3fbe796.png)

它在哪里给出消息，`"C:\BBWP\bbwp.exe. not found, Please edit 'blackberry.bbwp.dir' in your 'project.properties' file."`当我转到 blackberry webworks sdk 目录时，即`C:\BBWP\`没有`bbwp.exe`文件，请帮我解决这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:22:04.100

编辑 blackberry.xml 文件并将 bbwp 属性更改为使用 bbwp.bat 而不是 bbwp.exe：

```
<condition property="bbwp" value="${properties.blackberry.bbwp.dir}/bbwp" else="${properties.blackberry.bbwp.dir}/bbwp.exe">
    <equals arg1="${isMacOSX}" arg2="true" />
</condition> 
```

改成

```
<condition property="bbwp" value="${properties.blackberry.bbwp.dir}/bbwp" else="${properties.blackberry.bbwp.dir}/bbwp.bat">
    <equals arg1="${isMacOSX}" arg2="true" />
</condition> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T15:01:19.737

我解决了下载旧版本 WebWorks SDK 的问题，而不是 BB 10 的问题。我在以下位置找到它：

[https://developer.blackberry.com/html5/download/previousversions/](https://developer.blackberry.com/html5/download/previousversions/)

在 Windows 7/8 上下载标有**WebWorks SDK for Smartphones 2.3 版**的软件，以兼容模式打开安装程序*- Win XP SP3*

找到它有点棘手。希望它可以帮助其他有同样问题的人。不要忘记它需要一个 32 位的 JDK 1.6，即使你的机器是 64 位的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-10T05:44:39.107

如果您使用的是最新的**BB10 WebWorks SDK 2.2.0.15**或更高版本，您应该这样配置

project.properties 文件：

```
blackberry.bbwp.dir=C:\\Program Files\\BlackBerry\\BB10 WebWorks SDK 2.2.0.15\\ 
```

黑莓.xml：

```
<condition property="bbwp" value="${properties.blackberry.bbwp.dir}/bbwp" else="**${properties.blackberry.bbwp.dir}/webworks.bat**">
        <equals arg1="${isMacOSX}" arg2="true" />
    </condition> 
```

希望这可以帮助！！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-19T18:17:04.013

您应该将 SDK WebWorks 兼容版本下载到 ant 和 phonegap。

我有同样的问题，我下载了智能手机 SDK，问题就消失了。

[https://developer.blackberry.com/html5/download/sdk](https://developer.blackberry.com/html5/download/sdk)

干杯。

# php - 谷歌刷新令牌获得无效授权错误

> ID：10975822
> 
> 赞同：1
> 
> 时间：2012-06-11T07:12:31.137
> 
> 标签：php, google-analytics-api, google-api-client

我正在尝试为我的帐户使用谷歌分析 API。所以起初我允许应用程序使用离线刷新令牌进行访问。当我尝试刷新令牌时购买，我收到“无效授权”错误。尝试使用 php 客户端库和使用 curl 手动刷新。

这是手动使用 curl：

```
$oauth2token_url = "https://accounts.google.com/o/oauth2/token";
    $clienttoken_post = array(
    "client_id" => 'xxxxxxxx-d28qutrse5bvaf7n4a37qgs5ieijvp9n.apps.googleusercontent.com',
    "client_secret" => 'xxxxxxxxxxxxx');

        $clienttoken_post["refresh_token"] = $refresh_token;
        $clienttoken_post["grant_type"] = "refresh_token";

    $curl = curl_init($oauth2token_url);

    curl_setopt($curl, CURLOPT_POST, true);
    curl_setopt($curl, CURLOPT_POSTFIELDS, $clienttoken_post);
    curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

    $json_response = curl_exec($curl);
    curl_close($curl);

    $authObj = json_decode($json_response);

    print_r($authObj);

    exit(); 
```

我使用 simple.php 示例在之前的调用中获得的刷新令牌：

```
require_once '../../src/apiClient.php';
require_once '../../src/contrib/apiAnalyticsService.php';
session_start();

$client = new apiClient();
$client->setApplicationName("Google Analytics PHP Starter Application");

// Visit https://code.google.com/apis/console?api=analytics to generate your
// client id, client secret, and to register your redirect uri.
 $client->setClientId('xxxxxxxxx-d28qutrse5bvaf7n4a37qgs5ieijvp9n.apps.googleusercontent.com');
 $client->setClientSecret('xxxxxx');
 $client->setRedirectUri('https://www.xxxxxxxxxx.org/oauth2callback/google-api-php-client/examples/analytics/simple.php');
 $client->setDeveloperKey('xxxxxxx');

if (isset($_GET['logout'])) {
  unset($_SESSION['token']);
}

if (isset($_GET['code'])) {
  $client->authenticate();
  $_SESSION['token'] = $client->getAccessToken();
  header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);
}

if (isset($_SESSION['token'])) {
//    echo $_SESSION['token'];
  $client->setAccessToken($_SESSION['token']);
}
echo $client->getAccessToken() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T10:35:10.433

如果有人有兴趣，我在几个小时后终于解决了：

我去了oauth playground：[https](https://code.google.com/oauthplayground) ://code.google.com/oauthplayground 在右边，有一个设置按钮。选择“使用您自己的 OAuth 凭据”。从那里获取刷新令牌，它可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T21:40:46.417

如果其他人遇到这个问题......

我们遇到了一个问题，即相同的发布请求最初无法正常工作，但之后工作。

对我们来说，谷歌似乎对 iat 时间非常挑剔——试着从中减去 5 分钟。

# javascript - Jcarousel 和显示：无 + SEO 关注

> ID：10975830
> 
> 赞同：0
> 
> 时间：2012-06-11T07:13:06.317
> 
> 标签：javascript, jquery, seo, jcarousel

我在 3 个不同部分的页面上使用 jcarousel。我最初显示第一部分并用`display: none`.

我做了一些谷歌搜索，发现这是一个常见问题，因为任何显示为 none 的东西都会自动宽度为 0，因此 jcarousel 无法正确设置它。

我在 SO 上找到了这篇文章：[Hide a jCarousel when page loading](https://stackoverflow.com/questions/2112474/hide-a-jcarousel-when-page-loads/2112562#2112562)

通过将您不想显示的内容移出页面来处理它，我可以这样做，但想知道，这对 SEO 目的是否不利？就像在 Google 中一样，不喜欢页面之外的内容？

我还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T08:49:20.110

好的，我通过先加载内容来解决我的问题，然后在加载所有页面数据后，我运行一个函数来隐藏相关内容。

`hideHomeCats`标题中的代码..一旦页面上的所有内容都加载完毕，就会运行该函数。

```
$(window).load(hideHomeCats); 
```

where`hideHomeCats`是隐藏相关内容的功能。

希望这对其他人有帮助。:)

# linux - 如何在 Linux 上运行 libsvm？

> ID：10975836
> 
> 赞同：-3
> 
> 时间：2012-06-11T07:14:16.617
> 
> 标签：linux, unix, makefile, libsvm, svm

我在安装 libsvm 时遇到问题，目前我正在通过 ubuntu 虚拟机运行。当我按照 Unix 系统上的说明进行操作时，“键入`make' to build the`svm-train' 和 `svm-predict' 程序。不带参数运行它们以显示它们的用法”。这是我的以下错误输出：我对 libsvm 和 unix 系统都很陌生，因此将不胜感激。

```
aaron@aaron-laptop:~$ cd Document
bash: cd: Document: No such file or directory
aaron@aaron-laptop:~$ cd Documents
aaron@aaron-laptop:~/Documents$ libsvm-3.12
libsvm-3.12: command not found
aaron@aaron-laptop:~/Documents$ cd libsvm-3.12
aaron@aaron-laptop:~/Documents/libsvm-3.12$ make
g++ -Wall -Wconversion -O3 -fPIC -c svm.cpp
make: g++: Command not found
make: *** [svm.o] Error 127
aaron@aaron-laptop:~/Documents/libsvm-3.12$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:38:11.303

打开终端并按顺序键入这些命令。

```
sudo apt-get update 
sudo apt-get install build-essential 
```

如果这仍然不起作用，

打开终端，输入“g+”（不带引号）并多次按下按钮。它会显示命令 g++ 的名称是否已更改。（有时更新您的 linux 会将 g++ 的名称更改为 g++-3.x（其中 x 是一个数字）。

如果是这种情况，请在您的安装说明中，将每个 g++ 替换为您按下该键后得到的任何数字。

# facebook - 使用 sencha touch 2 连接 facebook

> ID：10975840
> 
> 赞同：1
> 
> 时间：2012-06-11T07:14:35.757
> 
> 标签：facebook, extjs, oauth-2.0

> **可能重复：**
> [在 sencha touch 2 中使用 oAuth 连接 facebook](https://stackoverflow.com/questions/10929901/using-oauth-in-sencha-touch-2-to-connect-facebook)

我希望我的 sencha touch 2 移动应用程序连接到 Facebook。这可以使用 sencha 吗？我相信身份验证需要 oauth 2.0。这可以用ext js完成吗？我环顾四周，只发现 oauth v1 库也仅适用于 javascript 和 jquery mobile。此外，是否有任何与 sencha touch 2 一起使用的 facebook 的 API？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:33:04.757

您应该能够毫无问题地将 Facebook JavaScript SDK 与 Sencha 一起使用。Facebook 的 JS SDK 异步加载，并在 SDK 准备好使用时提供自己的加载事件。

您可以在不依赖 Sencha 的情况下实现客户端身份验证，也可以通过与 Sencha UI 组件的交互来触发。有关客户端身份验证流程，请参阅[https://developers.facebook.com/docs/authentication/client-side/](https://developers.facebook.com/docs/authentication/client-side/) ，有关示例，请参阅[http://www.sencha.com/products/touch/demos/](http://www.sencha.com/products/touch/demos/)行动（与朋友一起慢跑）。

# iphone - ZXingWidget header 搜索路径

> ID：10975844
> 
> 赞同：0
> 
> 时间：2012-06-11T07:15:04.900
> 
> 标签：iphone, zxing

已导入 ZXingWidget 项目，它似乎按预期工作（经过相当多的跟踪和错误）。它现在可以做的是被激活，显示一个白框取景器，扫描一个二维码并返回结果。

我想补充的是，当扫描结果与任何预定义的字符串不匹配时，让 ZXingWidget 将白色取景框变为红色。

我的策略是在我自己的项目中为字符串匹配结果更新一个全局标志，并让 ZXingWidget 读取它。

我的问题是，尽管设置了头文件搜索路径，但 ZXingWidget 无法找到头文件（声明全局标志变量的位置）。

我的感觉是，要么是搜索路径错误，要么是策略有缺陷。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:04:32.777

好吧，这听起来有点像 hack，所以如果您不关心清洁度，只需在小部件中将其外部化，而不是打扰它来包含标题。

在定义点：

```
bool my_red_flag; 
```

在被黑的小部件中：

```
extern bool my_red_flag. 
```

执行此操作的“正确”方法是为小部件添加一个 API，但这可能不值得您付出努力。（似乎需要以某种方式轮询该变量：小部件直接绘制框架，除非给出原因，否则通常不会重绘它。）

# xcode - 如果我删除 Xcode 的 Info.plist（不是应用程序 plist），我该怎么办？

> ID：10975846
> 
> 赞同：0
> 
> 时间：2012-06-11T07:15:17.523
> 
> 标签：xcode, info.plist

最近我正在尝试研究如何在没有代码签名的情况下在真机中以调试模式运行应用程序。这需要我更改 Xcode 的 plist（不是应用程序的 plist）中的一些设置。在我这样做之前，我使用

> sudo cp Info.plist Info.plist.bk

来备份 Info.plist。

测试失败后，我通过输入以下命令将其改回：

> sudo rm Info.plist
> sudo mv Info.plist.bk Info.plist

但是有一个意外，我在第二个命令行中输入错误是这样的。 ..

> sudo rm Info.plist.bk Info.plist

哦是的...我喜欢喝红茶...然后我尝试重新启动我的Xcode，它无法识别我的Iphone和Iphone Simulator...

我应该怎么做才能恢复这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T08:15:03.203

如果您没有 Info.plist 的备份，则可能别无选择，只能从头开始重新安装 XCode ......

# iphone - 具有默认视图的 TabbarController

> ID：10975858
> 
> 赞同：-2
> 
> 时间：2012-06-11T07:16:13.043
> 
> 标签：iphone, xcode, uitabbarcontroller

我正在开发一个 iPhone 应用程序，其中有三个类 A 类、B 类、C 类。现在我想使用 Tabbarcontroller 将 A 类显示为默认视图，其中 B 类和 C 类有两个选项卡。任何人都可以建议我怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:19:33.633

听起来您正在寻找：

```
[tabBarController setSelectedIndex:1]; 
```

在启动您的应用程序时，或任何其他时间，您可以使用上述方法设置显示的控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:25:05.487

您可以使用此链接： [如何将 2 个视图控制器连接到 iPhoneRecipes 中的 tabBarController](https://stackoverflow.com/questions/1029122/how-are-the-2-view-controllers-wired-to-the-tabbarcontroller-in-iphonerecipes?rq=1)

或使用这个：

```
[tabBarController setSelectedIndex:1]; 
```

# web-services - 比较和对比 REST 和 SOAP Web 服务？

> ID：10975863
> 
> 赞同：75
> 
> 时间：2012-06-11T07:16:31.887
> 
> 标签：web-services, rest, soap

我目前发现类似的情况是都使用互联网协议（HTTP）在消费者和提供者之间交换数据。

区别在于：

1.  SOAP 是一种基于 XML 的消息协议，而 REST 是一种架构风格
2.  SOAP 使用 WSDL 在消费者和提供者之间进行通信，而 REST 仅使用 XML 或 JSON 来发送和接收数据
3.  SOAP 通过调用 RPC 方法调用服务，REST 只是简单地通过 URL 路径调用服务
4.  SOAP 不返回人类可读的结果，而 REST 结果可以通过纯 XML 或 JSON 读取
5.  SOAP 不仅基于 HTTP，它还使用其他协议，例如 SMTP、FTP 等，REST 仅基于 HTTP

这就是我所知道的它们之间的差异。任何人都可以纠正我并添加更多内容。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-11T07:34:11.507

> SOAP 使用 WSDL 进行消费者和提供者之间的通信，而 REST 仅使用 XML 或 JSON 来发送和接收数据

WSDL 定义了客户端和服务之间的契约，并且本质上是静态的。如果 REST 合同有些复杂，并且由 HTTP、URI、媒体格式和应用程序特定协调协议定义。与 WSDL 不同，它是高度动态的。

> SOAP 不返回人类可读的结果，而 REST 结果可以通过纯 XML 或 JSON 读取

这不是真的。纯 XML 或 JSON 根本不是 RESTful。它们都没有定义任何反对 REST 的控件（即链接和链接关系、方法信息、编码信息等），因为消息必须是自包含的并协调代理/客户端和服务之间的交互。

通过链接+语义链接关系，客户端应该能够确定下一个交互步骤是什么，并遵循这些链接并继续与服务通信。

消息不必是人类可读的，可以使用神秘的格式并构建完全有效的 REST 应用程序。消息是否是人类可读的并不重要。

因此，纯 XML(application/xml) 或 JSON(application/json) 不足以构建 REST 应用程序。使用这些通用媒体类型的子集总是合理的，它们具有强烈的语义意义并提供足够的控制信息（链接等）来协调客户端和服务器之间的交互。

*   有关控制信息的更多详细信息，我强烈建议您阅读：[http ://www.amundsen.com/hypermedia/hfactor/](http://www.amundsen.com/hypermedia/hfactor/)
*   网页链接：[https ://www.rfc-editor.org/rfc/rfc5988](https://www.rfc-editor.org/rfc/rfc5988)
*   注册链接关系： [http ://www.iana.org/assignments/link-relations/link-relations.xml](http://www.iana.org/assignments/link-relations/link-relations.xml)

> REST 仅通过 HTTP

不正确，HTTP 使用最广泛，当我们谈论 REST Web 服务时，我们只是假设 HTTP。HTTP 定义了接口及其方法（GET、POST、PUT、DELETE、PATCH 等）和各种可以统一用于与资源交互的标头。这种一致性也可以通过其他协议来实现。

PS 非常简单但非常有趣的 REST 解释：[http ://www.looah.com/source/view/2284](http://www.looah.com/source/view/2284)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T00:27:22.110

在日常的实际编程术语中，最大的区别在于，使用 SOAP，您使用的是静态和强定义的数据交换格式，相比之下，REST 和 JSON 数据交换格式非常松散。例如，使用 SOAP，您可以验证交换的数据是否与 XSD 模式匹配。因此，XSD 充当了客户端和服务器如何理解所交换数据的结构的“合同”。

JSON 数据*通常不会*根据强定义的格式传递（除非您使用的框架支持它.. 例如[http://msdn.microsoft.com/en-us/library/jj870778.aspx](http://msdn.microsoft.com/en-us/library/jj870778.aspx)或实现 json-架构）。

事实上，一些人（很多/大多数人）会争辩说 JSON 的“动态”秘密酱违背了通过数据契约约束它的哲学/文化（[JSON RESTful Web 服务是否应该使用数据契约](https://stackoverflow.com/questions/4469422/should-json-restful-web-services-use-data-contract)）

习惯于使用动态松散类型语言的人们往往更喜欢 JSON 的松散性，而来自强类型语言的开发人员更喜欢 XML。

[http://www.mnot.net/blog/2012/04/13/json_or_xml_just_decide](http://www.mnot.net/blog/2012/04/13/json_or_xml_just_decide)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T07:20:49.580

SOAP 带来了它自己的协议，并专注于将应用程序逻辑（而不是数据）作为服务公开。SOAP 公开操作。SOAP 专注于访问命名操作，每个操作通过不同的接口实现一些业务逻辑。

尽管 SOAP 通常被称为“Web 服务”，但这是用词不当。SOAP 与 Web 几乎没有任何关系。REST 提供基于 URI 和 HTTP 的真正“Web 服务”。

举例来说，这里有几个电话和他们适当的家与评论。

```
getUser(User); 
```

这是访问资源（数据）时的休息操作。

```
switchCategory(User, OldCategory, NewCategory) 
```

REST 允许许多不同的数据格式，而 SOAP 只允许 XML。虽然这似乎增加了 REST 的复杂性，因为您需要处理多种格式，但根据我的经验，它实际上是非常有益的。JSON 通常更适合数据并且解析速度更快。由于支持 JSON，REST 可以更好地支持浏览器客户端。

# ruby-on-rails - 无法设计 after_sign_up 重定向

> ID：10975864
> 
> 赞同：1
> 
> 时间：2012-06-11T07:16:31.823
> 
> 标签：ruby-on-rails, ruby, devise, registration

对不起，我找不到我的错误。这是我的 registrations_controller.rb 代码：

```
class RegistrationsController < Devise::RegistrationsController  
 protected
   def after_sign_up_path_for(resource)
 edit_user_registration_path(current_user)
 end
end 
```

在我的路线中：

```
 devise_for :users, :controllers => { :registrations => "registrations" } 
```

并且重定向不起作用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T06:36:34.897

你有没有尝试过：

```
class RegistrationsController < Devise::RegistrationsController
  protected

  def after_sign_up_path_for(resource)
    '/an/example/path'
  end
end 
```

...然后将其添加到您的路线中：

```
devise_for :users, :controllers => { :registrations => "registrations" } 
```

所有这些都来自[这个](https://github.com/plataformatec/devise/wiki/How-To%3a-Redirect-to-a-specific-page-on-successful-sign-up-%28registration%29)，它花了大约 30 分钟搜索谷歌来运行它。是唯一对我有用的东西。

**编辑：** 我还可以补充一点，在浏览代码之后，看起来这不会导致实际的重定向（尽管有些文档是这样说的）；我要回200。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:48:51.300

您的路径应该是有效的（尝试检查`rake routes | grep registration`）否则您将被重定向到`root_path`或`"/"`

```
 def signed_in_root_path(resource_or_scope)
    scope = Devise::Mapping.find_scope!(resource_or_scope)
    home_path = "#{scope}_root_path"
    if respond_to?(home_path, true)
      send(home_path)
    elsif respond_to?(:root_path)
      root_path
    else
      "/"
    end
  end 
```

[从设计源代码](https://github.com/plataformatec/devise/blob/master/lib/devise/controllers/helpers.rb#L184-L194)

# ruby-on-rails - 让 button_to 表现得像 link_to - Rails

> ID：10975868
> 
> 赞同：0
> 
> 时间：2012-06-11T07:16:57.863
> 
> 标签：ruby-on-rails, view

我有一个`button_to`电话，我必须像`link_to`电话一样行事。我将其设置为使用`get`请求，但是当我单击它时，在 URL 中会出现“？” 出现在 URL 的末尾。例如：`/admins/new?`而不是`/admins/new`. 我该如何删除它？从 URL 所以它的行为就像一个`link_to`链接？

Button_to 代码

```
<%= button_to "New Admin", new_admin_path, :method => :get %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T07:32:02.817

看看你自己的问题：

![在此处输入图像描述](../Images/0e853693b2429db731b014a683439ebc.png)

红色箭头指向看起来像按钮但实际上是链接的元素，只是样式。您可以在您的应用程序中执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T11:27:01.160

您可以像这样自定义 button_to 中的方法：

```
<%=button_to "Admin",new_admin_path,{method: :get}%> 
```

# php - PHP 单例模式

> ID：10975870
> 
> 赞同：-2
> 
> 时间：2012-06-11T07:17:07.537
> 
> 标签：php, oop, class, singleton, return

您好，我想在 php 中学习单例模式，我有一门课：

```
class Database
{
    private static $instance;

    private function __construct() 
    { 
    }

    public static function getInstance()
    {
        if (!self::$instance)
        {
            self::$instance= new Database();
        }

        return self::$instance;
    }

    public function query($table)
    {
         $this->query = 'select * from $table';
    }

    public function result()
    {
        echo $this->query;

    }

}

$db = Database::getInstance(); 
```

现在，是否可以调用 result() 方法并使用单例打印由 query() 设置的值，即“select * from $table”？

我希望我的代码类似于：

```
$db->query('user_tb')->result();

//output
select * from user_tb; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T07:20:22.860

## 更新：

能够这样称呼它：

```
$db->query('user_tb')->result(); 
```

您需要输入`return $this;`要链接的方法，在这种情况下是您的`query`方法：

```
public function query($table)
{
     $this->query = "select * from $table";
     return $this;
} 
```

现在你可以这样称呼它：`$db->query('user_tb')->result();`

## [工作示例](http://codepad.org/jfxVE0gi)

## -------------------------------------------------- -----------------------------------------

首先修改您的`query()`方法：

```
$this->query = 'select * from $table'; 
```

至：

```
$this->query = 'select * from ' . $table; 
```

因为 inside `single quotes`，变量不被解析。

然后`$query`像这样在类级别定义：

```
class Database {
  private static $Instance;
  private $query = '';
  // your more code
} 
```

然后你可以运行它来获取它：

```
$db = Database::getInstance(); // get class instance
$db->query('user_tb'); // set $query var
$db->result(); // get $query var 
```

**结果：**

```
select * from user_tb 
```

* * *

## [工作示例](http://codepad.org/FGH2O5Rq)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-11T07:42:24.117

要使用方法链接，请确保要链接的所有函数都返回 $this。

然后你可以做`DB::getInstance()->query()->result();`.=

所以查询至少需要返回$this。

此外，您通过返回参数放弃任何错误处理，因此通常如果您使用方法链接，则需要使用异常处理来处理错误。

如，你不能做

```
if(!$db->query) {
    error_log('bleh');
} 
```

# vb6 - Java 等效于 Visual Basic Format$

> ID：10975872
> 
> 赞同：3
> 
> 时间：2012-06-11T07:17:25.520
> 
> 标签：vb6, vb6-migration

当我偶然发现以下代码片段时，我正在分析一个 VB 系统。这是我第一次阅读 VB 代码，这可能是一个微不足道的问题。

```
.
.
Format$(txt & "/02/20", "gee")
.
. 
```

我的问题是，“gee”代表什么？是日期格式还是什么？我在代码的其他任何地方都找不到该字符串。如果它是一种格式类型，那么它在 Java 中的等价物可能是什么？我发现 VB 中的 Format$ 的功能类似于 Java String.format()。

以下是 VB 文档中关于 Format$() 的说明：

> Function Format$(Expression, [Format], [FirstDayOfWeek As VbDayOfWeek = vbSunday], [FirstWeekOfYear As VbFirstWeekOfYear = vbFirstJan1]) As String Member of VBA.Strings 格式化表达式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:36:24.747

我使用 Visual Basic 的即时窗口解决了它。似乎“gee”用于从西方日期到[日本皇室](http://en.wikipedia.org/wiki/Japanese_calendar)年份的转换。

使用即时窗口：

```
? Format$( "2012/02/20", "gee")
Output -> H24 
```

另一个例子：

```
? Format$("123123123", "#,##0")
Output -> 123,123,123 
```

**笔记：**

上面使用“gee”的示例似乎不适用于具有不同区域设置的 PC。我的 VB6 是英文的，但我的操作系统是日文的 Windows 7 Professional。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:09:47.487

代码片段将**始终**评估为“gee”。**编辑** *事实证明并非如此，请参阅[nmenego 的回答](https://stackoverflow.com/a/10979295/15639)！*

听起来好像有人在试验这个`Format`功能，却忘了从代码中删除试验！

如果您想了解更多信息，请查看有关[Format](http://msdn.microsoft.com/en-us/library/aa262745%28v=vs.60%29.aspx)`Format`的完整 VB6 文档和[dates 的格式说明符](http://msdn.microsoft.com/en-us/library/aa263414%28v=vs.60%29.aspx)。

# jaxb - 为根元素查找 JAXB 生成的类

> ID：10975873
> 
> 赞同：1
> 
> 时间：2012-06-11T07:17:30.250
> 
> 标签：jaxb, document-root

我是使用 JAXB 的新手。我需要从其架构生成一个 xml 文件，其中架构和元素值是从用户输入的。我的问题是，如果我事先不知道元素的名称，如何使用 JAXB 生成的类？是否有一个通用函数，如 getRoot() 或 getChildren() 可以用来遍历类？

# pdf - 从pdf中提取数据

> ID：10975874
> 
> 赞同：0
> 
> 时间：2012-06-11T07:17:31.093
> 
> 标签：pdf, extract, pdf-parsing

如何从 pdf 文件中提取数据，主要是数据表等，是否有任何免费或开源工具可以直接进行。我必须处理大量文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:21:56.330

是的，您可以在某种程度上使用 lucene 3.x 库和 pdfbox 0.7 从 pdf 文件中提取文本

但是从 pdf 提取中，您无法将某些图像和某些格式转换为二进制和垃圾代码

但是你可以得到纯文本

```
File f = new File("filename");

FileInputStream fis=new FileInputStream(f);

PDFParser parser=new PDFParser(fis);

parser.parse();

PDDocument pd=parser.getPDDocument();

PDFTextStripper pst=new PDFTextStripper();

String pdftext=pst.getText(pd); 
```

为此，您需要下载两个 jar 文件 1) lucene-core-3.0.3 jar 2) pdfbox-0.7.3 jar

我会帮你的，别担心

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:19:20.647

对于基本文本提取，如果您可以访问命令行实用程序，请尝试使用[`pdftotext`](http://en.wikipedia.org/wiki/Pdftotext)或[`pdftohtml`](http://pdftohtml.sourceforge.net/). 您也可以使用该`strings`命令。

# jquery - Jquery getJSON 缓存问题？

> ID：10975876
> 
> 赞同：1
> 
> 时间：2012-06-11T07:17:36.727
> 
> 标签：jquery, caching, getjson

我正在使用 getJSON 从 WCF 获取数据。该应用程序运行了几次，之后它似乎从缓存中获取数据。问题发生离子Firefox，Chrome。在 Internet Explorer 9 中，我无法获取任何数据。

```
function get_WCF() {
            $.ajaxSetup({ cache: false });
            $.getJSON('http://192.168.1.8:9100/PraticaService.svc/GetAllQueries', {
                idPratica : $("#txtIdPratica").val() + "M"
            }, function(json) {
                json = jQuery.parseJSON(json.d.GetAllQueries);
                if(json.$values[0].$values[0]) {
                    $('#txtCognomeRagioneSociale').val(json.$values[3].$values[0].DENOMINAZIONE);}
            })
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:44:27.893

尝试这个：

```
var time = new Date().getTime();

$.getJSON('http://192.168.1.8:9100/PraticaService.svc/GetAllQueries?' + time, {.. 
```

为了防止缓存，在末尾添加一个随机字符串。

# android - 在 TabHost 中添加 FragmentActivity

> ID：10975877
> 
> 赞同：0
> 
> 时间：2012-06-11T07:17:54.400
> 
> 标签：android, android-tabhost, android-viewpager, android-fragmentactivity

实际上，我有一个带有 Tabhost 的 FragmentActivity，里面有一些 Fragment，借助 ViewPager，您可以在不同的 Fragment 之间滑动。有了这个 FragmentActivity，我想将它合并到另一个 Tabhost 中，因此一个在另一个之下。

目前，我有这个解决方案：

```
public class TabsViewPagerFragmentActivity extends ActivityGroup {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Inflate the layout
    setContentView(R.layout.main);

    TabHost mTabHost = (TabHost)findViewById(R.id.testtabhost1);
    mTabHost.setup(getLocalActivityManager());

    TabSpec ts = mTabHost.newTabSpec("tab_test1").setIndicator("TAB1");
    ts.setContent(new Intent(this,PageGaucheFragment.class)); <--- PageGaucheFragment is the FragmentAtivity with the ViewPager that I would like to add into the TabHost

    mTabHost.addTab(ts);

    mTabHost.setCurrentTab(0);

} 
```

它可以工作，但是 ActivityGroup 已被弃用:(而且我找不到任何其他解决方案来解决这个问题。我怎样才能拥有 2 个 TabHost 并且第二个可以在不同的 Fragment 之间滑动？谢谢你的回答，对不起我的英语;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:41:52.930

看这里：http: [//developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html)

我已经成功使用它了。

# php - 在 MySQL 查询中使用函数

> ID：10975880
> 
> 赞同：0
> 
> 时间：2012-06-11T07:18:05.557
> 
> 标签：php, mysql, function, md5

我有以下代码行：

```
mysql_query("SELECT name FROM details WHERE md5(name) = '".md5($input_name)."'"); 
```

但是，当我将查询更改为以下内容时，此查询工作得很好：

```
mysql_query("SELECT name FROM details WHERE salt(name) = '".salt($input_name)."'"); 
```

查询似乎不起作用。

盐函数如下：

```
function salt ($name) {

global $salt;

return $salt.$name;

} 
```

其中 $salt 是一个全局变量（一个 md5 哈希）

为什么第二个查询不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:29:42.237

MySQL 无法访问您在 PHP 中定义的函数。您只能使用 MySQL 在 MySQL 查询中定义的函数，或您用 SQL 编写的函数。您将不得不重新考虑您在做什么，并以一种不需要 MySQL 使用 PHP 函数的方式来表达它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:31:06.297

PHP 中的函数和 MySQL 中的函数是两个不同的东西。

发送 MySQL 查询时，MySQL 将负责解析您发送的字符串。而且 MySQL 不知道您编写的任何 PHP 代码 - 反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T07:44:18.690

这不是很容易做到的：

```
$saltinput = salt($input_name)
mysql_query("SELECT name FROM details WHERE salt(name) = '$salitinput'"); 
```

# perl - 仅使用预处理器时禁止将 gcc 输出到终端

> ID：10975881
> 
> 赞同：1
> 
> 时间：2012-06-11T07:18:10.760
> 
> 标签：perl, gcc, c-preprocessor, newline, verilog

我正在使用 gcc 的预处理器从 verilog (.v) 文件中删除注释（因为注释语法与**C** /C++ 相同）。我正在使用 perl，因此使用了我的 perl 脚本中的 shell 命令

``gcc -E $dest > $commentsrem``

我的 verilog 文件在哪里`$dest` 重命名为 .c 文件。由于预处理器将数据输出到标准输出，我将它重定向到一个名为`$commentsrem` . 现在我面临的问题是我在终端上收到消息说

> try.c:577：未终止的字符常量

我猜这是因为虽然在**C 语言**中您需要使用 '\' 来在新行上继续声明，但 verilog 没有这样的要求。这就是它正在报告的内容。

现在，尽管有这些，它实现了我想要的，但它让终端变得混乱。有什么办法让它保持安静？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:21:05.480

*将标准错误*重定向到空设备将使预处理器的*所有*错误输出静音。通常不推荐，因为您也不会看到真正的错误。

```
gcc -E $dest > $commentsrem 2> /dev/null 
```

更好的方法是使用 过滤来自 stderr 的*已知*`grep -v`消息，这样您仍然会看到*其他*错误消息。为此，您需要将 stderr 重定向到 stdout，因为管道在 stderr 上不起作用：

```
gcc -E $dest 2>&1 > $commentsrem | grep -v "unterminated character constant" 
```

重定向的顺序在这里很重要。如果你写了`> $commentsrem 2>&1`，错误信息最终会出现`$commentsrem`。

有关重定向的详细信息，请参阅。[这个问答](https://stackoverflow.com/questions/549737)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:43:01.223

由于您使用的是 Perl，因此[vppreproc](http://search.cpan.org/perldoc?vppreproc)脚本可用于删除 Verilog 注释。

```
vppreproc --nocomment in.v > out.v 
```

# java - JSF：通过 AJAX 调用更新视图后立即调用 javaScript 方法

> ID：10975882
> 
> 赞同：0
> 
> 时间：2012-06-11T07:18:14.260
> 
> 标签：java, javascript, jsf, jsf-2, primefaces

在我的 JSF 项目中，我使用 PrimeFaces 的 Menu 组件通过 ajax 调用更新我的 UI 页面的中心组件（UI 页面的中心部分）。

```
<p:menubar>
<p:submenu label="Actions">
    <p:submenu label="Create Privilege">
        <p:menuitem value="Create Administrative Privilege" actionListener="#{leftNavigationBean.selectCenterComponent}" update=":centerPanel">
            <f:attribute name="centerComponentName" value="/CreateAdminPrivilege.xhtml" />
        </p:menuitem>
        <p:menuitem value="Create Access Privilege" actionListener="#{leftNavigationBean.selectCenterComponent}" update=":centerPanel">
            <f:attribute name="centerComponentName" value="/CreateAccessPrivilege.xhtml" />
        </p:menuitem>
    </p:submenu>
</p:menubar> 
```

现在，在通过 AJAX 调用更新组件之后，紧接着我想调用 JavaScript 函数对更新的组件进行一些操作。

我尝试在正在更新的页面的正文 OnLoad() 上调用 JavaScript 函数，例如在 Action Menu Action -> Create Privilege -> 当 CreateAdminPrivilege.xhtml 出现时，在此页面正文 OnLoad() 我尝试调用 JavaScript 方法但它没有被调用，因为我猜是对这个页面的 ajax 调用。

所以我需要弄清楚调用这个 AJAX 调用更新的 JavaScript 方法的方法。帮我解决这个...

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T10:29:33.987

您可以为此使用`p:menuItem`'属性：`oncomplete`

```
<p:menuitem ... oncomplete="doSomething()"> 
```

如果想进一步区分ajax调用的成功和错误，使用`onsuccess`or`onerror`属性：

```
<p:menuitem ... onsuccess="doSomething()" onerror="doSomethingElse()"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:21:59.783

请参阅[jsf js api](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/js-api/symbols/jsf.ajax.html#.addOnEvent)

例如：

```
jsf.ajax.addOnEvent(function(data){
    if (data.status== 'success') {
        // do stuff
    }
}); 
```

# c# - Telerik 控制可见性

> ID：10975884
> 
> 赞同：0
> 
> 时间：2012-06-11T07:18:17.317
> 
> 标签：c#, .net, silverlight-4.0, telerik, silverlight-5.0

```
<Grid x:Name="LayoutRoot" Background="White">

    <telerik:RadTabControl Foreground="Black" TabOrientation="Horizontal" TabStripPlacement="Left" Grid.Row="0" Grid.Column="0">
        <telerik:RadTabItem Header="Tab Item A" Visibility="Collapsed" />
        <telerik:RadTabItem Header="Tab Item D" Visibility="Collapsed" />

    </telerik:RadTabControl>

</Grid> 
```

上面的代码在我的应用程序中引发错误。问题是

```
 <telerik:RadTabItem Header="Tab Item A" Visibility="Collapsed" />
  <telerik:RadTabItem Header="Tab Item D" Visibility="Collapsed" /> 
```

如果我至少有一个可见的选项卡控件，我的应用程序加载正常，否则它会引发异常并使我的应用程序崩溃。

例外：

“未处理的异常 - System.InvalidOperationExdeption：UIElement.Arrange(finalRect) 不能在 finalRect 中使用 Infinite 或 NaN 值调用”

痕迹：

```
Microsoft JScript runtime error: Unhandled Error in Silverlight Application 
Code: 4004    
Category: ManagedRuntimeError       
Message: System.InvalidOperationException: UIElement.Arrange(finalRect) cannot be     called with Infinite or NaN values in finalRect. 
   at System.Windows.UIElement.Arrange(Rect finalRect)
   at Telerik.Windows.Controls.Primitives.TabStripPanel.ArrangeOverride(Size finalSize)
   at System.Windows.FrameworkElement.ArrangeOverride(IntPtr nativeTarget, Single     inWidth, Single inHeight, Single& outWidth, Single& outHeight) 
```

任何想法？我无法在我的应用程序之外复制它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:01:48.890

异常表示布局系统无法计算 UIElement 的大小。如您所见，如果没有可见的选项卡项，则会在您的 XAML 中发生这种情况。

因此，如果可以，请为选项卡控件指定一个固定大小（宽度 = XXX）。

否则，尝试折叠整个选项卡控件而不是所有单个选项卡。

# raphael - 如何使用 Raphael.JS 基于鼠标移动绘制一条线

> ID：10975886
> 
> 赞同：3
> 
> 时间：2012-06-11T07:18:18.533
> 
> 标签：raphael, graphael

我试图在纸上随着鼠标移动画一条线。我只知道如何使用`path`. 但想知道是否有人有想法画一条线`mousemove`。请帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T08:55:25.147

这是使用 raphael 的此类示例的链接

[与拉斐尔一起绘画。（图片来源：乔纳斯）。](http://irunmywebsite.com/raphael/drawtool2.php)（单击视图-> 源代码以查看其完成方式...）

[还有一个我做的jsfiddle以防万一](http://jsfiddle.net/vedmack/9f4wM/)（`just for back up`）

它在矩形元素上使用 raphael 的[拖动](http://raphaeljs.com/reference.html#Element.drag)和[鼠标](http://raphaeljs.com/reference.html#Element.mousemove)移动事件...

# python - 收到“！退出”命令时，聊天中不存在 Python IRC 机器人

> ID：10975893
> 
> 赞同：0
> 
> 时间：2012-06-11T07:18:55.320
> 
> 标签：python, irc, bots

这个 irc 机器人一点也不复杂。我只是遇到了几行代码的问题。基本上，我将其添加到 while 语句的末尾：

```
 if "!quit" in msg:
        sys.exit() 
```

基本上，当有人在 irc 中键入 !quit 时，脚本会将机器人从 irc 中注销。

脚本的其余部分（非常短）可以在这里找到：

[http://pastebin.com/055CcWZf](http://pastebin.com/055CcWZf)

有人可以告诉我为什么最后一点不起作用。当我在 irc 中时，我输入“！quit”，但机器人根本没有响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:23:50.410

在原始脚本中，“if !quit”语句在“if ping”语句中。

```
if "PING" in msg:
    s.send("PONG %s\r\n" % msg[1])
if "!quit" in msg:
    sys.exit() 
```

我认为这应该是正确的

# php - 如何使用 FB graph api 检索 FB 应用程序发布的新闻源？

> ID：10975895
> 
> 赞同：0
> 
> 时间：2012-06-11T07:19:03.280
> 
> 标签：php, facebook-graph-api

我已经在 FB graph api docs 和 google 上搜索了几个小时，但找不到解决方案。让我解释一下我的问题。使用 FB 图形 API，我们能够检索用户的新闻源，但是我们如何检索由 FB 应用程序发布的用户的新闻源，例如游戏分数/成就？我知道可以通过添加 filter=app_[app_id] 来检索由特定应用程序创建的用户新闻源，但是有没有办法过滤由任何应用程序创建的新闻源？

目前我所做的是，如果新闻源包含链接到 app.facebook.com 的链接，我假设它是由 FB 应用程序发布的。我不确定这个假设是否安全，是否有更好的方法来实现我的目标？

PS 我使用 php SDK，因此非常感谢 php 解决方案。使用其他 SDK 的解决方案也值得赞赏。我会尝试自己进行转换。

提前致谢，

风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:52:09.503

> 目前我所做的是，如果新闻源包含链接到 app.facebook.com 的链接，我假设它是由 FB 应用程序发布的。

/me/feed 中由/使用应用程序创建的帖子应该有一个属性“应用程序”集，其中包含应用程序名称、命名空间和 id——因此只需查找它，您应该能够确定它是否已发布通过应用程序或手动。

# xml - 如何在 Marklogic Server 中执行 CRUD 操作？

> ID：10975898
> 
> 赞同：0
> 
> 时间：2012-06-11T07:19:21.233
> 
> 标签：xml, xquery, marklogic

我想对存储在 Marklogic Server 中的 xml 文档进行 CRUD 操作。谁能告诉我如何在 Marklogic Server 中执行 CRUD 操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:14:52.247

你是如何连接到 MarkLogic 数据库的？这可能会对您进行 CRUD 的方式产生很大影响。

如果您使用 HTTP 服务推送数据，您可以使用现有的 REST 端点，例如[Corona 项目](https://github.com/marklogic/Corona)或使用 XQuery 制作您自己的端点。

如果您使用 Java 或 .Net，您可以通过 XCC 库进行连接，该库具有 CRUD 功能，而无需编写 XQuery。

在纯 XQuery 中，在 MarkLogic 网站上的 MarkLogic XQuery 函数文档中阅读以下命令可能很有用：

*   [`xdmp:document-insert()`](http://community.marklogic.com/pubs/3.2/apidocs/UpdateBuiltins.html#document-insert)
    *   这将执行 CRUD 的创建和更新
*   `fn:doc-available()`
    *   如果要测试以查看文档是否存在。一些做 CRUD 的人希望这样做是为了使 Create 和 Update 不同。别人不管。
*   [`xdmp:document-delete()`](http://community.marklogic.com/pubs/3.2/apidocs/UpdateBuiltins.html#document-delete)
    *   CRUD 中的删除
*   `fn:doc()`
    *   读入 CRUD

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:48:23.343

另请参阅[http://community.marklogic.com/try/corona/index](http://community.marklogic.com/try/corona/index)以获得更高级别的 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:48:19.233

存储文档后，您可以使用 等函数`xdmp:node-replace()`逐`xdmp:node-insert-child()`节点操作文档。或者，您可以通过 将新版本保存到同一 URI 来更改文档`xdmp:document-insert()`，或者通过 删除文档`xdmp:document-delete()`。

请注意，MarkLogic 中的事务语义是真正的功能性，因此文档在事务执行期间永远不会更改。您需要完成事务并从数据库中获取文档以查看更改。

# iphone - 制作音频捕获器和音频播放器 ios

> ID：10975900
> 
> 赞同：0
> 
> 时间：2012-06-11T07:19:26.567
> 
> 标签：iphone, objective-c, ios, core-audio

我已经使用音频单元成功制作了音频捕获器和音频播放器。现在我的要求是进行电话会议，其中我有一个音频捕获器但有多个音频播放器......在测试时我只能听到一个播放器的声音。我可以用单个音频单元制作多个播放器吗？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:28:07.590

线性 PCM 和 IMA4 (IMA/ADPCM) 您可以在 iOS 中同时播放多个线性 PCM 或 IMA4 声音，而不会产生 CPU 资源问题。iLBC 语音质量格式以及 µ-law 和 a-law 压缩格式也是如此。使用压缩格式时，请检查音质以确保其满足您的需求。[参考](https://developer.apple.com/library/archive/documentation/AudioVideo/Conceptual/MultimediaPG/UsingAudio/UsingAudio.html)

使用线性 PCM 它应该能够同时播放。

我能想到的另一个解决方案是使用混音器音频单元并将所有播放器发送到混音器并播放输出。

# performance - matlab for loop：重现大型矩阵的最快和最有效的方法

> ID：10975906
> 
> 赞同：0
> 
> 时间：2012-06-11T07:19:46.973
> 
> 标签：performance, matlab, loops, for-loop, copy

我的数据是一个 2096x252 的`double`值矩阵。我需要一个`for`循环或等效的执行以下操作：
每次复制矩阵时，第一个数组被删除，第二个成为第一个。当循环再次运行时，剩余的矩阵被复制，第一个数组被删除，下一个成为第一个，依此类推。我尝试过使用`repmat`，但是在处理大型矩阵（2096x252）时它太慢而且太乏味了。

示例输入：

```
1 2 3 4
3 4 5 6
3 5 7 5
9 6 3 2 
```

期望的输出：

```
1 2 3 4
3 4 5 6
3 5 7 5
9 6 3 2
3 4 5 6
3 5 7 5
9 6 3 2
3 5 7 5
9 6 3 2
9 6 3 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:26:09.540

通常使用 Matlab 预先分配一个大数组比增量构建它要快得多。当您提前知道大数组的最终大小时，没有理由不遵循这个一般建议。

像下面这样的东西应该做你想要的。假设你有一个数组`in(nrows, ncols)`；然后

```
indices = [0 nrows:-1:1];
out = zeros(sum(indices),ncols);
for ix = 1:nrows
    out(1+sum(indices(1:ix)):sum(indices(1:ix+1)),:) = in(ix:end,:);
end 
```

这适用于您的小型测试输入。我希望你能弄清楚发生了什么。

我不知道它是否是所有可能方法中最快的，但我希望它比逐步构建大型矩阵要快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T09:25:39.230

**免责声明：**
您可能会遇到大型矩阵的内存问题，但这不是问题所在。

现在，对于业务：
对于给定的 matrix ，使用循环`A`的直接方法是：`for`

```
[N, M] = size(A);
B = zeros(sum(1:N), M);
offset = 1;
for i = 1:N
    B(offset:offset + N - i, :) = A(i:end, :);
    offset = offset + size(A(i:end, :), 1);
end 
```

`B`是期望的输出矩阵。但是，由于循环
，该解决方案预计也会很慢。`for`

**编辑**：预先分配`B`而不是动态改变大小（这种优化应该会实现轻微的加速）。

# objective-c - 在 UIVew 下的 UIButton 上启用用户交互？

> ID：10975907
> 
> 赞同：1
> 
> 时间：2012-06-11T07:19:51.450
> 
> 标签：objective-c, ios, uiview, uibutton, user-interaction

在我的程序中，我将 a 配置`UIView`为放置在多个`UIBUtton`s 上。这样您就可以在视图中平移并让按钮移动以及选择按钮本身。但是，当按钮位于 this 下方时，无法选择它们`UIView`。有人知道在这些条件下如何配置 a`UIButton`吗？`userInteractionEnabled`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:24:02.057

与其更改 UIButton 的 userInteractionEnabled 的值，不如将 UIButton 顶部的 UIView 的 userInteractionEnabled 值设置为 no。

当 UIView 的 userInteractionEnabled 设置为 YES 时，UIView 正在“吃掉”事件。然后该按钮将永远不会收到任何事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:54:45.397

这种技术对我有用 - 警告：我只是在它没有编译的情况下输入了它，或者它是作为起点给出的。

1.  创建按钮并将它们放置在视图层次结构的顶部（即它们正常交互并响应点击的位置，在 UIView 顶部）
2.  创建按钮时 - 在数组中保留对它们的引用。

    NSMutableArray* arrayOfPeskyButtons;

3.  记录按钮框架

    ```
    NSMutableArray* arrayOfPeskyFrames = [NSMutableArray mutableArray];
    for ((UIButton*)button in arrayOfPeskyButtons)
    {
        [arrayOfPeskyFrames addObject:[NSValue valueWithCGRect:button.frame];
    } 
    ```

4.  当您的应用响应 UIView 上的操作时 - 平移或将其更改为 UIScrollView（可能是最好的顺便说一句），然后相应地移动按钮的框架，以便它们在用户看来是固定的。

我已经使用这种技术来创建位于滚动视图顶部的按钮“叠加层”，并且效果出奇的好。只需在 scrollView 委托方法中。

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView 
```

记下滚动视图的偏移量，并根据滚动视图的偏移量相应地调整按钮的每个框架

```
 CGPoint offset = scrollView.contentOffset; 
```

遍历按钮数组并移动它们。

```
 int index = 0;
 for ((UIButton*)button in arrayOfPeskyButtons)
 {
     CGRect originalFrame = [[arrayOfPeskyFrames objectAtIndex:index]CGRectValue];
     CGRect currentFrame = button.frame;
     //adjust frame
     //e.g.
     currentFrame.origin.x = originalFrame.origin.x + offset.x;

     button.frame = currentFrame.;
     index++;
 } 
```

# yii - YII 使用 gzip 压缩您的应用程序输出

> ID：10975908
> 
> 赞同：3
> 
> 时间：2012-06-11T07:20:08.720
> 
> 标签：yii, yii-components, yii-events

下面的代码是两个事件有什么好处。

它实际上在做什么？

```
require_once($yii);
$app = Yii::createWebApplication($config);
Yii::app()->onBeginRequest = function($event)
{
  return ob_start("ob_gzhandler");
};

Yii::app()->onEndRequest = function($event)
{

return ob_end_flush();
};

$app->run(); 
```

请在我的应用程序中解释此代码的功能。它的作用是什么？它对我有什么帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T09:28:09.330

上面的代码缓冲内容并根据浏览器对其进行压缩，而不是直接发送。

```
Yii::app()->onBeginRequest = function($event)
{
return ob_start("ob_gzhandler");
}; 
```

上面的意思是当请求开始时，它会缓冲内容，使用回调将内容设置为gzip、deflate或none，具体取决于浏览器。

```
Yii::app()->onEndRequest = function($event)
{
return ob_end_flush();
}; 
```

上面的代码只是意味着在请求结束时，它将输出缓冲区内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T09:41:48.047

它缓冲内容，并在将其发送给浏览器之前询问浏览器是否可以接受压缩内容。如果可以，它将在提供之前压缩 HTML。否则，它将提供解压缩的文件。

压缩内容可减小浏览器需要下载的 HTML 的大小，从而提高性能。您的用户将看到多少性能提升取决于 HTML 的大小 - 更大的页面会看到更多的好处，而小页面实际上可能需要更长的时间来呈现，因为浏览器必须先解压缩内容。使用 Firebug 或 Chrome 开发者工具栏看看是否值得。

另外，检查对服务器端的影响。同样，增加服务器负载的不利影响可能超过增加的客户端页面渲染速度。因此，它最适用于大量缓存。

这通常是您在优化网站以寻求性能提升时所做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T06:58:08.430

如果您想将 gzhanlder 直接添加到主配置文件，您可以在 main.php 中设置以下行

```
'onBeginRequest'=>create_function('$event', 'return ob_start("ob_gzhandler");'),
'onEndRequest'=>create_function('$event', 'return ob_end_flush();'), 
```

这两行添加 GzipHandler

# java - 如何使用另一个列表中的对象的属性创建一个新列表

> ID：10975913
> 
> 赞同：90
> 
> 时间：2012-06-11T07:20:28.203
> 
> 标签：java, list, collections, java-stream, guava

想象一下，我有一个特定对象的列表：

```
List<Student> 
```

我需要生成另一个列表，包括上面列表中的`ids`of ：`Students`

```
List<Integer> 
```

避免使用循环，是否可以通过使用**apache 集合**或**guava**来实现这一点？

***哪些方法应该对我的情况有用？***

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2015-05-08T18:21:10.860

Java 8 的做法：-

```
List<Integer> idList = students.stream().map(Student::getId).collect(Collectors.toList()); 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-06-11T07:37:02.160

使用 Guava，您可以使用以下功能 -

```
private enum StudentToId implements Function<Student, Integer> {
        INSTANCE;

        @Override
        public Integer apply(Student input) {
            return input.getId();
        }
    } 
```

您可以使用此功能将学生列表转换为 id，例如 -

```
Lists.transform(studentList, StudentToId.INSTANCE); 
```

它肯定会循环以提取所有 id，但请记住 guava 方法返回视图，并且仅在您尝试迭代时应用 Function`List<Integer>`
如果您不迭代，它将永远不会应用循环。

*注意：记住这是视图，如果您想多次迭代，最好将内容复制到其他`List<Integer>`类似*

```
ImmutableList.copyOf(Iterables.transform(students, StudentToId.INSTANCE)); 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-06-11T16:45:33.457

感谢**Premraj**提供了另一种很酷的选择，点赞。

我使用了 apache CollectionUtils 和 BeanUtils。因此，我对以下代码的性能感到满意：

```
List<Long> idList = (List<Long>) CollectionUtils.collect(objectList, 
                                    new BeanToPropertyValueTransformer("id")); 
```

值得一提的是，我将比较我上面使用的 guava（**Premraj**提供）和 collectionUtils 的性能，并决定哪个更快。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-03-22T09:04:05.960

Java 8 lambda 表达式解决方案：

```
List<Integer> iDList = students.stream().map((student) -> student.getId()).collect(Collectors.toList()); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-04-14T02:55:56.110

如果有人在几年后来到这里：

```
List<String> stringProperty = (List<String>) CollectionUtils.collect(listOfBeans, TransformerUtils.invokerTransformer("getProperty")); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-04T21:31:28.853

您可以为此目的使用[Eclipse Collections](https://www.eclipse.org/collections/)

```
Student first = new Student(1);
Student second = new Student(2);
Student third = new Student(3);

MutableList<Student> list = Lists.mutable.of(first, second, third);
List<Integer> result = list.collect(Student::getId);

System.out.println(result); // [1, 2, 3] 
```

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2012-06-11T07:52:36.380

如果没有循环，在数学上是不可能做到这一点的。为了创建一个离散值集到另一个离散值集的映射 F，F 必须对原始集中的每个元素进行操作。（基本上，需要一个循环来执行此操作。）

话虽如此：

为什么需要新列表？您可能正在以错误的方式解决您正在解决的任何问题。

如果您有 的列表`Student`，那么在遍历此列表时，您只需一两步即可遍历学生的 ID 号。

```
for(Student s : list)
{
    int current_id = s.getID();
    // Do something with current_id
} 
```

如果您有其他类型的问题，请评论/更新问题，我们会尽力帮助您。

# android - Android 应用程序视图容器具有粘性

> ID：10975914
> 
> 赞同：0
> 
> 时间：2012-06-11T07:20:47.943
> 
> 标签：android, android-layout

我需要帮助，在我使用下面的代码删除它们后，我的布局和容器仍然存在。

例如，我在第 1 页添加了一个小文本，该文本解释了如何使用正在审查的程序部分，然后下一页允许用户添加一个名称，其中有一个带有文本名称的标签：和一个要添加的 EditText旁边的名字。

两个组件都“粘住”，但 EditText 被多次复制，我不知道为什么！我也想停止粘连。

通过坚持我只是意味着视图不会像它应该的那样离开视图（仍然可见）。

这是一些代码。

```
 if(pageCount == lastPageCount--)
        {
            page2Layout.removeAllViews();
            //page2Layout.setVisibility(View.GONE);
            //Reset all text views.
            helpText.setText("");
        }

        helpText.setLayoutParams(params);
        helpText.setText("You cannot view this part sorry :S\n\n" + 
        "You cannot view this part sorry :S.\n" +
        "You cannot view this part sorry :S");
        page1Layout.addView(helpText);

        page1Layout.setVisibility(View.VISIBLE);
    }
    else if(pageNumber == 2)
    {
        if(pageCount == lastPageCount++)
        {
            //page1Layout.setVisibility(View.GONE);
            page1Layout.removeAllViews();
        }
        else if (pageCount == lastPageCount++)
        {
            page3Layout.setVisibility(View.GONE);
        }
        //Name Position + Containers etc
        LinearLayout nameLayout = new LinearLayout(this);
        nameLayout.setOrientation(LinearLayout.HORIZONTAL);
        nameLayout.setLayoutParams(params);
        TextView nameLabel = new TextView(this);
        nameLabel.setLayoutParams(params);
        nameLabel.setText("Name: ");
        EditText nameTextField = new EditText(this);
        nameTextField.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT));
        //All to name layout.
        nameLayout.addView(nameLabel);
        nameLayout.addView(nameTextField);
        page2Layout.addView(nameLayout); 
        page2Layout.setVisibility(View.VISIBLE);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:05:44.600

谨防程序员在盯着代码看太久时可能犯的愚蠢错误。

```
 if(pageCount == lastPageCount++) 
```

对于同样被卡住的任何人，lastPageCount++ 将在语句运行后递增 lastPageCount。

因此运行错误的代码。

# java - 在程序启动时创建所有 JPanel 与仅在需要时创建它们

> ID：10975918
> 
> 赞同：1
> 
> 时间：2012-06-11T07:21:05.107
> 
> 标签：java, swing, jpanel, loading

作为一般规则，具有多个部分的程序应该在启动时创建所有内容，还是应该在实际需要时等待创建每个部分？

我的具体案例是一个具有多个不同部分的 Java 信息​​亭式应用程序。每个部分都是执行特定任务的不同 JPanel（具有不同的按钮 / JTables / JLabels / 等）。这是一个我有一段时间没有接触过的未完成项目，但我将完成它，我正在查看代码并尝试重构我认为我应该做的事情。

到目前为止，该程序在启动时创建了每一个 JPanel，因此每当用户单击更改显示 JPanel 的按钮之一时，它会立即加载，因为它已经创建。到目前为止，我认为这在性能方面并不重要，但我想知道在这种情况下什么是标准做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T07:28:52.087

我***不会***在启动时全部加载，因为它可能会使启动缓慢，并且还加载了一些不需要的面板。例如，您有 4 个面板加载联系人、关于、图片和提要。假设您在启动时加载了所有 4 个，如果用户只访问了其中 2 个然后关闭应用程序会怎样。有时用户可能只想看到一个面板，但他必须等待所有面板在启动时加载。所以我会建议根据需要加载面板。仅在框架上加载主要数据，然后当用户第一次单击加载面板的按钮时，显示进度条，直到加载该面板，然后从下一次单击按钮时开始显示面板而无需等待它已经通过第一次单击加载。

如果您的应用程序从 Internet 获取数据，那么在启动时加载所有数据也将花费额外的带宽和数据费用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T07:27:48.967

这取决于您的项目需要。

如果***响应时间***对最终用户很重要，那么您的方法是正确的。

否则按需创建 jpanel

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T07:28:52.580

我认为这在很大程度上取决于创建它的成本`JPanel`。如果它包含一个`JTable`它接收到的大量信息，例如，通过网络从 MySQL 服务器接收到的信息，那么创建它的成本`JPanel`是相当大的。

在这种情况下，我只会在需要时创建它。也许`JPanel`在程序运行时永远不需要它，那么为什么要花费所有时间和资源来创建它呢？

# java - 如何在 JSP 中声明 int 变量？

> ID：10975926
> 
> 赞同：3
> 
> 时间：2012-06-11T07:22:09.910
> 
> 标签：java, jsp, variables

在 JAVA 中，我声明了一个 int 变量并需要打印它。我的代码：

```
public int i=0;
System.out.println(i); 
```

输出：1 但我需要的输出是 01 我该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T07:25:06.300

做这个 ：

```
<%
int var=1;
out.println(var<10 ? "0"+var : var);
%> 
```

或者，更典型的是，从演示文稿中分离出一点算法：

```
<%
int var=1;
%>
<%= var<10 ? "0"+var : var %> 
```

如果您想做更复杂的数字格式化，请查看[DecimaFormat](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T07:37:11.630

您也可以像这样使用 String.format 方法：

```
<% 
int i=1;
out.println(String.format("%02d", i));
%> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T08:38:23.033

你可能想试试这个：

```
<%
   int x = 1;
   out.println("0" + String.valueOf(x));
%> 
```

在 Java 中也是如此：

```
System.out.println("0" + String.valueOf(x)); 
```

# html - 将自己的自定义表单与 MailChimp 一起使用

> ID：10975930
> 
> 赞同：9
> 
> 时间：2012-06-11T07:22:29.017
> 
> 标签：html, forms, customization, mailchimp

我目前正在开发一个“即将推出”页面，该页面有一个文本字段和按钮，用户可以在其中输入他/她的电子邮件地址，以便在应用程序启动时得到通知。我听说 mailchimp 是一个非常不错的小工具，它可以处理收集到的所有用户详细信息（这意味着我不必担心任何脚本和数据库）以及自动向已签名的用户发送电子邮件感谢他们等。

我尝试使用 mailchimp 设计一个在我的网站上使用的表单，但我对表单的整体外观和感觉不满意。当然，我可以更改编辑一些属性，例如颜色和所有爵士乐，但它不符合我的需要。

有没有办法可以使用我已经拥有的当前 html 表单和 mailchimp？而不是使用一个人在 mailchimp 上设计的表单。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T22:52:34.607

你打赌。

我会查看他们关于[自定义托管表单](http://kb.mailchimp.com/article/can-i-host-my-own-sign-up-forms)的支持文章。它解释了一些关于表单字段需要如何与他们的数据库相结合的信息。您还可以查看您设计的 mailchimp 托管表单的源代码，并查看输入名称/类型是如何专门为您的列表放在一起的。

此外，付费帐户可以使用[高级表单模式](http://kb.mailchimp.com/article/advanced-customization-of-mailchimps-sign-up-forms)来自定义他们为列表托管的 HTML。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T15:12:54.610

是的，正如 winfred 提到的，有几种方法。

如果您知道 html，只需从订阅 html 页面获取代码（例如通过“查看源代码”）并粘贴到空白 html 页面中，您可以在上传到您的网站之前对其进行修改。

因为您只需要电子邮件，所以这应该是直截了当的。

如果您还没有看到它，这个页面可能会有所帮助： http: [//kb.mailchimp.com/article/can-i-host-my-own-sign-up-forms](http://kb.mailchimp.com/article/can-i-host-my-own-sign-up-forms)

祝你好运！

# lua - Lua函数检查ipv4或ipv6或字符串

> ID：10975935
> 
> 赞同：6
> 
> 时间：2012-06-11T07:22:53.820
> 
> 标签：lua, pattern-matching, ip-address, ipv6, ipv4

我想要一个函数，我可以将空格修剪的字符串传递给它，它将返回
0 表示错误（不是字符串） 1 表示 ipv4 2 表示 ipv6 3 表示不是 ip 的字符串。

IPv6 有以下规则：

ipv6 由 8 组 16 位十六进制值表示，用冒号 (:) 分隔
十六进制数字不区分大小写
缩写规则：
1：省略 16 位值中的前导零
2：将一组或多组连续零替换为双冒号

wiki 示例显示 3 种方式都是相同的 ipv6：

```
fe80:0000:0000:0000:0202:b3ff:fe1e:8329
fe80:0:0:0:202:b3ff:fe1e:8329
fe80::202:b3ff:fe1e:8329 
```

我有理由确定您只需检查三个 ipv4 。然后检查字符串是否为所有
数字，并且 .'s 被计为数字，最后一次检查字符串
将在 if 语句的末尾，所以如果它不是 ipv4/6 并且它是一个字符串，那么
它返回 3

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-20T06:17:16.710

Mike 的解决方案很好，但可以通过多种方式进行改进。在目前的形式中，它不会进行 ipv6 地址检查，但很容易修复。ipv6 检查在和（将两者都识别为有效地址）和（将其识别为字符串）等内容`"1050!0!0+0-5@600$300c#326b"`上`"1050:0:0:0:5:600:300c:326babcdef"`失败`"1050:::600:5:1000::"`。

这是改进的版本（假定 IPv4 是十进制数，而 IPv6 假定是十六进制数）：

```
function GetIPType(ip)
  local R = {ERROR = 0, IPV4 = 1, IPV6 = 2, STRING = 3}
  if type(ip) ~= "string" then return R.ERROR end

  -- check for format 1.11.111.111 for ipv4
  local chunks = {ip:match("^(%d+)%.(%d+)%.(%d+)%.(%d+)$")}
  if #chunks == 4 then
    for _,v in pairs(chunks) do
      if tonumber(v) > 255 then return R.STRING end
    end
    return R.IPV4
  end

  -- check for ipv6 format, should be 8 'chunks' of numbers/letters
  -- without leading/trailing chars
  -- or fewer than 8 chunks, but with only one `::` group
  local chunks = {ip:match("^"..(("([a-fA-F0-9]*):"):rep(8):gsub(":$","$")))}
  if #chunks == 8
  or #chunks < 8 and ip:match('::') and not ip:gsub("::","",1):match('::') then
    for _,v in pairs(chunks) do
      if #v > 0 and tonumber(v, 16) > 65535 then return R.STRING end
    end
    return R.IPV6
  end

  return R.STRING
end 
```

要检查的脚本：

```
local IPType = {[0] = "Error", "IPv4", "IPv6", "string"}
local ips = {
    "128.1.0.1", -- ipv4
    "223.255.254.254", -- ipv4
    "999.12345.0.0001", -- invalid ipv4
    "1050:0:0:0:5:600:300c:326b", -- ipv6
    "1050!0!0+0-5@600$300c#326b", -- string
    "1050:0:0:0:5:600:300c:326babcdef", -- string
    "1050:0000:0000:0000:0005:0600:300c:326b", -- ipv6
    "fe80:0000:0000:0000:0202:b3ff:fe1e:8329", -- ipv6
    "fe80:0:0:0:202:b3ff:fe1e:8329", -- ipv6
    "fe80::202:b3ff:fe1e:8329", -- ipv6
    "1050:::600:5:1000::", -- contracted ipv6
    "::", -- ipv6
    "::1", -- ipv6
    "::1::", -- string
    "129.garbage.9.1", -- string
    "xxx127.0.0.0", -- error
    "xxx1050:0000:0000:0000:0005:0600:300c:326b", -- string
    129.10 -- error
}
for k,v in pairs(ips) do
    print(v, IPType[GetIPType(v)])
end 
```

和输出：

```
128.1.0.1   IPv4
223.255.254.254 IPv4
999.12345.0.0001    string
1050:0:0:0:5:600:300c:326b  IPv6
1050!0!0+0-5@600$300c#326b  string
1050:0:0:0:5:600:300c:326babcdef    string
1050:0000:0000:0000:0005:0600:300c:326b IPv6
fe80:0000:0000:0000:0202:b3ff:fe1e:8329 IPv6
fe80:0:0:0:202:b3ff:fe1e:8329   IPv6
fe80::202:b3ff:fe1e:8329    IPv6
1050:::600:5:1000:: IPv6
::  IPv6
::1 IPv6
::1::   string
129.garbage.9.1 string
xxx127.0.0.0    string
xxx1050:0000:0000:0000:0005:0600:300c:326b  string
129.1   Error 
```

于 2018 年 9 月 6 日更新，添加了地址之前/之后的垃圾处理和检查协定的 ipv6，这允许少于 8 个组，其中一个空组包含两个连续的冒号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T16:36:26.433

这似乎是一个需要解决的非常基本的问题。我认为这个功能可以满足您的需求...

```
function GetIPType(ip)
    -- must pass in a string value
    if ip == nil or type(ip) ~= "string" then
        return 0
    end

    -- check for format 1.11.111.111 for ipv4
    local chunks = {ip:match("(%d+)%.(%d+)%.(%d+)%.(%d+)")}
    if (#chunks == 4) then
        for _,v in pairs(chunks) do
            if (tonumber(v) < 0 or tonumber(v) > 255) then
                return 0
            end
        end
        return 1
    else
        return 0
    end

    -- check for ipv6 format, should be 8 'chunks' of numbers/letters
    local _, chunks = ip:gsub("[%a%d]+%:?", "")
    if chunks == 8 then
        return 2
    end

    -- if we get here, assume we've been given a random string
    return 3
end 
```

使用以下代码对其进行了测试：

```
local IPType = {
    [0] = "Error",
    [1] = "IPv4",
    [2] = "IPv6",
    [3] = "string",
}

local ips = {
    "128.1.0.1",        -- ipv4
    "223.255.254.254",  -- ipv4
    "999.12345.0.0001",     -- invalid ipv4
    "1050:0:0:0:5:600:300c:326b",               -- ipv6
    "1050:0000:0000:0000:0005:0600:300c:326b",  -- ipv6
    "1050:::600:5:1000::",  -- contracted ipv6
    "129.garbage.9.1",  -- string
    129.10              -- error
}

for k,v in pairs(ips) do
    print(v, IPType[GetIPType(v)])
end 
```

这产生了这个输出：

```
128.1.0.1   IPv4
223.255.254.254 IPv4
1050:0:0:0:5:600:300c:326b  IPv6
1050:0000:0000:0000:0005:0600:300c:326b IPv6
129.garbage.9.1 string
129.1   Error 
```

将来，如果您实际发布您为解决特定问题而尝试编写的代码，您将获得更多有用的反馈，并让我们知道您需要帮助的地方。如常见问题解答中所述，SO 不是个人代码编写服务。然而，我会给你怀疑的好处，因为你看起来很新，这可能会使其他人受益。上面的代码是基本的，所以如果它没有捕获我不知道的边缘测试用例，请随时更新它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T07:34:40.210

这似乎可以通过使用正则表达式轻松完成。lua 有很多正则表达式库。

但是，如果您不愿意或无法使用它们，我会这样做：

```
Start in ipv4 state
Take a character until string ends
    switch(state)
    ipv4:
        if it's a dot, check if we loaded at least one number
        if it's a number, check if it isn't the 4th in row
        if it's anything else, set state to ipv6 and proceed in this state
    ipv6:
        if it's a ':', check if we didnt exceed maximum number of segments
        if it's a number or letter<a;f> check if it isn't 5th in row
        in case anything breaks, return 3
    end 
```

我没有发布完整的 lua 代码，因为它看起来像家庭作业/学习练习和完整的答案对你的伤害比对你的帮助更大。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-12T10:55:55.543

有趣的是，上述答案都没有考虑原始问题的测试示例，因为使用它们，上述所有检查都会失败（因为#3）：

```
fe80:0000:0000:0000:0202:b3ff:fe1e:8329
fe80:0:0:0:202:b3ff:fe1e:8329
fe80::202:b3ff:fe1e:8329 (!) 
```

IPv6 表示规则说：

> [一个或多个连续的零值组可以使用两个连续的冒号 (::), 1](http://www.regular-expressions.info/alternation.html)替换为单个空组，但替换只能在地址中应用一次，因为多次出现会产生模棱两可的表示。 [https://en.wikipedia.org/wiki/IPv6_address#Representation](https://en.wikipedia.org/wiki/IPv6_address#Representation)

由于 Lua 模式不支持[Alternation](http://www.regular-expressions.info/alternation.html)，因此无法使用单个模式检查 IPv6。您可能会看到 David M. Syzdek 关于 IPv6 Regex 复杂性的回答：[https ://stackoverflow.com/a/17871737/1895269](https://stackoverflow.com/a/17871737/1895269)

不过，更符合标准的方法是对 Paul Kulchenko 的回答进行以下改进：

```
function GetIPType(ip)
  local R = {ERROR = 0, IPV4 = 1, IPV6 = 2, STRING = 3}
  if type(ip) ~= "string" then return R.ERROR end

  -- check for format 1.11.111.111 for ipv4
  local chunks = { ip:match("^(%d+)%.(%d+)%.(%d+)%.(%d+)$") }
  if (#chunks == 4) then
    for _,v in pairs(chunks) do
      if tonumber(v) > 255 then return R.STRING end
    end
    return R.IPV4
  end

  -- check for ipv6 format, should be max 8 'chunks' of numbers/letters
  local addr = ip:match("^([a-fA-F0-9:]+)$")
  if addr ~= nil and #addr > 1 then
    -- address part
    local nc, dc = 0, false      -- chunk count, double colon
    for chunk, colons in addr:gmatch("([^:]*)(:*)") do
      if nc > (dc and 7 or 8) then return R.STRING end    -- max allowed chunks
      if #chunk > 0 and tonumber(chunk, 16) > 65535 then
        return R.STRING
      end
      if #colons > 0 then
        -- max consecutive colons allowed: 2
        if #colons > 2 then return R.STRING end
        -- double colon shall appear only once
        if #colons == 2 and dc == true then return R.STRING end
        if #colons == 2 and dc == false then dc = true end
      end
      nc = nc + 1      
    end
    return R.IPV6
  end

  return R.STRING
end 
```

要检查的脚本：

```
local IPType = {[0] = "Error", "IPv4", "IPv6", "string"}
local ips = {
  "128.1.0.1",    -- ipv4
  "223.255.254.254",  -- ipv4
  "999.12345.0.0001",   -- invalid ipv4
  "1050:0:0:0:5:600:300c:326b",         -- ipv6
  "1050!0!0+0-5@600$300c#326b",         -- string
  "1050:0:0:0:5:600:300c:326babcdef",     -- string
  "1050:0000:0000:0000:0005:0600:300c:326b",  -- ipv6
  "1050:::600:5:1000::",  -- contracted ipv6 (invalid)
  "fe80::202:b3ff:fe1e:8329",   -- shortened ipv6
  "fe80::202:b3ff::fe1e:8329",  -- shortened ipv6 (invalid)
  "fe80:0000:0000:0000:0202:b3ff:fe1e:8329:abcd",  -- too many groups
  "::1",   -- valid IPv6
  "::",  -- valid IPv6
  ":",   -- string
  "129.garbage.9.1",  -- string
  129.10        -- error
}
for k,v in pairs(ips) do
  print(v, IPType[GetIPType(v)])
end 
```

和输出：

```
128.1.0.1       IPv4
223.255.254.254 IPv4
999.12345.0.0001        string
1050:0:0:0:5:600:300c:326b      IPv6
1050!0!0+0-5@600$300c#326b      string
1050:0:0:0:5:600:300c:326babcdef        string
1050:0000:0000:0000:0005:0600:300c:326b IPv6
1050:::600:5:1000::     string
fe80::202:b3ff:fe1e:8329        IPv6
fe80::202:b3ff::fe1e:8329       string
fe80:0000:0000:0000:0202:b3ff:fe1e:8329:abcd    string
::1     IPv6
::      IPv6
:       string
129.garbage.9.1 string
129.1   Error 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-22T12:45:34.370

由于[Lua 的正则表达式](http://lua-users.org/wiki/PatternsTutorial)没有足够的表达力，您必须继续使用迭代算法。

我建议您查看我在意大利语维基百科上发布的[那个](https://it.wikipedia.org/?oldid=108112953&action=edit)（已经过[全面测试](https://it.wikipedia.org/?oldid=94817436)）：

```
local R = {ERROR = 0, IPV4 = 1, IPV6 = 2, STRING = 3}

function is_ipv4(str)
    local s = str:gsub("/[0-9]$", ""):gsub("/[12][0-9]$", ""):gsub("/[3][0-2]$", "")

    if not s:find("^%d+%.%d+%.%d+%.%d+$") then
        return nil
    end

    for substr in s:gmatch("(%d+)") do
        if not substr:find("^[1-9]?[0-9]$")
                and not substr:find("^1[0-9][0-9]$")
                and not substr:find( "^2[0-4][0-9]$")
                and not substr:find("^25[0-5]$") then
            return nil
        end
    end

    return R.IPV4
end

function is_ipv6(str)
    local s = str

    if not (s:find("^%w+:%w+:%w+:%w+:%w+:%w+:%w+:%w+$")          -- there are exactly seven ":"
                or (s:find("^%w*:%w*:%w*:?%w*:?%w*:?%w*:?%w*$")  -- otherwise there are two to six sei ":"
                    and s:find("::")))                           -- and there must be the substring "::"
            or s:find("::.*::")                                  -- but there cannot be neither two substrings "::"
            or s:find(":::") then                                -- nor a substring ":::"
        return nil
    end

    for substr in s:gmatch("(%w+)") do
        if not substr:find("^[0-9A-Fa-f][0-9A-Fa-f]?[0-9A-Fa-f]?[0-9A-Fa-f]?$") then
            return nil
        end
    end

    return R.IPV6
end

function ip_type(str)
    if type(str) ~= "string" then
        return R.ERROR
    else
        return is_ipv4(str) or is_ipv6(str) or R.STRING
    end
end 
```

`ip_type()`编辑：我按照 OP 的要求更改了函数的输出。

# ruby-on-rails - pdf不是在生产中生成的

> ID：10975936
> 
> 赞同：0
> 
> 时间：2012-06-11T07:23:03.963
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-plugins, wkhtmltopdf, wicked-pdf

现在我正在使用 wkhtmltopdf gem 生成 pdf。在开发中它工作正常。如果我在生产中运行我的项目，我得到了这个错误。我已经安装了这两个宝石“wkhtmltopdf”和“wkhtmltopdf_binary”。请帮助我。

RuntimeError（执行失败：“/usr/local/rvm/gems/ruby-1.9.2-p290/bin/wkhtmltopdf”-q - - 错误：无法生成PDF！）：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:38:46.130

您可以尝试以下方法：

1.  卸载 wkhtmltopdf 包： sudo apt-get remove wkhtmltopdf --purge
2.  （在 usr/local/bin 中） sudo curl -C - -O [http://wkhtmltopdf.googlecode.com/files/wkhtmltopdf-0.9.9-static-amd64.tar.bz2](http://wkhtmltopdf.googlecode.com/files/wkhtmltopdf-0.9.9-static-amd64.tar.bz2)
3.  （在 usr/local/bin 中） sudo tar -xvjf wkhtmltopdf-0.9.9-static-amd64.tar.bz2
4.  (在 usr/local/bin) ln -s wkhtmltopdf-amd64 wkhtmltopdf
5.  在您的初始化程序 WickedPdf.config = { :exe_path => "/usr/local/bin/wkhtmltopdf" }

注意，您可以获得更多 wkhtmltopdf 取决于您的系统：[http ://code.google.com/p/wkhtmltopdf/downloads/list](http://code.google.com/p/wkhtmltopdf/downloads/list)

并且您必须删除 gem wkhtmltopdf_binary

# ruby - 检查 Sinatra 中收到的 POST 数据的类型

> ID：10975940
> 
> 赞同：0
> 
> 时间：2012-06-11T07:23:31.090
> 
> 标签：ruby, sinatra

在我的 sinatra 应用程序中，我有一个表单，用于通过 POST 请求向 url 提交数据。该 url 还接受在 POST 请求中发送的 json。有什么方法可以在处理程序中确定是在帖子中收到了 json 数据还是从表单中发送了提交的数据？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:05:37.570

当您通过 Post 请求发送数据时，您的`params`哈希中将包含数据。因此，如果有一个键，就会有一个值，即使它是空的。因此，您可以通过例如检查`params[:json]`是否通过 json 收到了某些内容（假设您调用该参数：json）。数据也是如此。但是我不完全确定这是否是你所要求的。无论哪种方式，您获得的所有数据都是通过`params`变量处理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T08:50:23.353

假设 JSON 是通过 XHR 调用发送的，您可以使用 request.xhr 吗？检查请求是否为 xhr。

# sql - 在 ColdFusion 查询中使用 # 和 " 会出错

> ID：10975946
> 
> 赞同：1
> 
> 时间：2012-06-11T07:24:20.247
> 
> 标签：sql, coldfusion

我正在尝试使用 CF 查询在我的数据库中插入以下字符串：`Aman#30 is "OK"`

但我收到错误“无效的构造：缺少参数或名称。”

在进一步调查中，我发现只有当我在字符串中使用 # 或 " 时才会发生这种情况。

有关如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T07:45:30.340

您很可能需要避开井号和引号。例如：

```
<CFSET yourstring = "Aman##30 is ""OK""" />

<CFQUERY result="qRes" datasource="#yourDSN#">
  INSERT INTO `yourtable`
  (`yourstringfield`)
  VALUES
  (<CFQUERYPARAM value="#yourstring#" cfsqltype="cf_sql_varchar" />)
</CFQUERY> 
```

# java - 使用 ANT 的 OWL API 构建失败

> ID：10975947
> 
> 赞同：1
> 
> 时间：2012-06-11T07:24:22.507
> 
> 标签：java, build, owl, owl-api

[我从http://owlapi.sourceforge.net/download.html](http://owlapi.sourceforge.net/download.html)下载 OWL API 3.2.4

并用 ANT 构建它。

终端显示一些错误：

```
$ ant

Buildfile: /home/yichu/owlapi-3.2.4/build.xml

clean:
   [delete] Deleting directory /home/yichu/owlapi-3.2.4/build

compile:
    [mkdir] Created dir: /home/yichu/owlapi-3.2.4/build/classes
    [javac] /home/yichu/owlapi-3.2.4/build.xml:57: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds

binjar:
     [exec] Result: 1
      [jar] Building MANIFEST-only jar: /home/yichu/owlapi-3.2.4/build/owlapi-bin.jar

srcjar:

BUILD FAILED
/home/yichu/owlapi-3.2.4/build.xml:139: /home/yichu/api/src/main/java does not exist. 
```

这些错误是什么意思？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:27:25.833

这是由 Ant 1.8 中引入的错误功能引起的。只需将该名称的属性添加到 javac 任务，将其设置为 false，然后忘记它曾经发生过。

# cordova - PhoneGap，本地存储寻呼解决方案

> ID：10975948
> 
> 赞同：0
> 
> 时间：2012-06-11T07:24:25.387
> 
> 标签：cordova, webkit, local-storage

**Local-Storage**，
如何分页呢？

IE：

第一页获取 1-5 项，
第二页获取 6-10 项。
第 3 页，列出 11--15 项...

任何 SQL 示例？谢谢 SELECT * FROM USER WHERE AGE < 10 LIMIT 10; 我可以在这里使用“TOP 10”吗？

详细 API： [http ://docs.phonegap.com/en/1.8.0/cordova_storage_storage.md.html#Storage](http://docs.phonegap.com/en/1.8.0/cordova_storage_storage.md.html#Storage)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:32:22.820

对于第一页，您可以使用：

```
var value0 = window.localStorage.getItem("key0");
var value1 = window.localStorage.getItem("key1");
var value2 = window.localStorage.getItem("key2");
var value3 = window.localStorage.getItem("key3");
var value4 = window.localStorage.getItem("key4"); 
```

对于其他页面也是如此。我希望它会奏效。

# iphone - 在 iphone 应用程序中调用 Create PDF 方法也不工作

> ID：10975949
> 
> 赞同：0
> 
> 时间：2012-06-11T07:24:26.627
> 
> 标签：iphone, xcode, uiview

我想从我正在使用以下代码的视图中创建 pdf，我从网上获得了这个，但是如何调用此方法以及在哪里提供用于创建保存在文档文件夹中的 pdf 的文件名。

当我调用此方法时，它会发送异常无法识别的选择器。

```
 [self createPDFfromUIView:someView saveToDcumentsWithFileName:@"my_pdf.pdf"];

 -(void)createPDFfromUIView:(UIView*)aView saveToDocumentsWithFileName:(NSString*)aFilename

{
// Creates a mutable data object for updating with binary data, like a byte array
NSMutableData *pdfData = [NSMutableData data];

// Points the pdf converter to the mutable data object and to the UIView to be converted
UIGraphicsBeginPDFContextToData(pdfData, aView.bounds, nil);
UIGraphicsBeginPDFPage();
CGContextRef pdfContext = UIGraphicsGetCurrentContext();

// draws rect to the view and thus this is captured by UIGraphicsBeginPDFContextToData

[aView.layer renderInContext:pdfContext];

// remove PDF rendering context
UIGraphicsEndPDFContext();

// Retrieves the document directories from the iOS device
NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);

NSString* documentDirectory = [documentDirectories objectAtIndex:0];
NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:aFilename];

// instructs the mutable data object to write its context to a file on disk
[pdfData writeToFile:documentDirectoryFilename atomically:YES];
NSLog(@"documentDirectoryFileName: %@",documentDirectoryFilename);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:36:12.120

这是工作代码....不要忘记添加 QuartzCore.h

```
 #include <QuartzCore/QuartzCore.h>

 - (void)viewDidLoad
 {
   [super viewDidLoad];

     [self createPDFfromUIView:self.view saveToDocumentsWithFileName:@"abc.pdf"];

  }
  -(void)createPDFfromUIView:(UIView*)aView saveToDocumentsWithFileName:    (NSString*)aFilename

  {
     // Creates a mutable data object for updating with binary data, like a byte array
NSMutableData *pdfData = [NSMutableData data];

// Points the pdf converter to the mutable data object and to the UIView to be converted
UIGraphicsBeginPDFContextToData(pdfData, aView.bounds, nil);
UIGraphicsBeginPDFPage();
CGContextRef pdfContext = UIGraphicsGetCurrentContext();

// draws rect to the view and thus this is captured by UIGraphicsBeginPDFContextToData

[aView.layer renderInContext:pdfContext];

// remove PDF rendering context
UIGraphicsEndPDFContext();

// Retrieves the document directories from the iOS device
NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);

NSString* documentDirectory = [documentDirectories objectAtIndex:0];
NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:aFilename];

// instructs the mutable data object to write its context to a file on disk
[pdfData writeToFile:documentDirectoryFilename atomically:YES];
NSLog(@"documentDirectoryFileName: %@",documentDirectoryFilename); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:26:59.530

如果您在一个类中实现了该方法，并且从同一个类中调用它。你会这样做：

```
[self createPDFfromUIView:someView saveToDcumentsWithFileName:@"my_pdf.pdf"]; 
```

这会将您`UIView`的 PDF 文件保存在您的`Documents`目录中，文件名为`my_pdf.pdf`.

希望这可以帮助。

# xcode - 如何为 iPhone 和 iPad 制作 .xib 文件？

> ID：10975952
> 
> 赞同：2
> 
> 时间：2012-06-11T07:24:49.297
> 
> 标签：xcode, ios4, ios5

我目前正在使用 Xcode 4.3.2。我开发了一个小型应用程序并为目标指定了“通用”，我看到生成了两个 .xib 文件。一个用于 iPhone，另一个用于 iPad。我用 iPhone .xib 设计了最小的 UI，现在也想在 iPad 上使用相同的应用程序。

1) 我是否必须像设计 iPhone.xib 一样重新设计 iPad.xib？2）据我所知，“通用”对两者都意味着什么？如果是这样，那么为什么提供两个不同的 .xib 文件？

如何让我的应用程序也能在 iPad 上运行，而只需进行最少的更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T07:31:01.270

这是两个独立的文件，因为 iPad 的 UI 和 iPhone 的 UI 完全不同。如果你只是为 iPad 扩展你的 iPhone UI，它可能看起来很奇怪。在 iPad xib 中，您可以使用 iPad 更大的显示屏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T07:34:54.867

最简单的方法是将 iphone .xib 中的项目复制并粘贴到 ipad .xib 中，然后将项目调整为适合 ipad 的大小。

您可以从头开始为 ipad 创建一个 .xib，然后在 Targets > "Application name" > Summary > iPad Deployment Info, Main storyboard 下选择它。

但是，是的，虽然您可以使用相同的 .xib 并在 x2 模式下使用它，但最好制作另一个界面，通常只需几分钟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T07:31:20.600

通用意味着应用程序的位可以在两种架构（iPhone 和 iPad）上执行，它与 nib 文件无关，您有 2 个选项：

1) 使用相同的 iphone nib 文件，然后在 iPad 模拟器启动时点击屏幕左下方的 (2x)，这是不合适的方式。

2）最好的方法是做两个单独的 nib 文件，每个文件都用于特定的设备。

# javascript - 如何使用浏览器滚动条控制覆盖内容

> ID：10975959
> 
> 赞同：2
> 
> 时间：2012-06-11T07:25:44.453
> 
> 标签：javascript, jquery, css, overlay, jquery-tools

我正在使用 jquery.tools.min.js 进行覆盖，它工作正常。

我想要的是当内容在覆盖中打开并且内容超过高度时，浏览器滚动条可以上下移动以覆盖内容，这可能吗？

我的覆盖css和js如下所示：

```
 #overlay {
    color:#efefef;
    display:none;
  }
  div.contentWrap {
    overflow-y:auto;
  }

.apple_overlay {
    display:none;
    width:660px;
    padding:35px;
    font-size:11px;
} 
```

* * *

```
$("a[rel]").overlay({
    top : 10 ,
        mask: {
        color: '#fff',
        loadSpeed: 200,
        opacity: 0.9
    },
    onBeforeLoad: function() {
        $(".contentWrap").html('');
        $(".contentWrap").html('<img src="/public/images/ajax-loading.gif" />');
        var wrap = this.getOverlay().find(".contentWrap");

        wrap.load(this.getTrigger().attr("href"));
    }

}); 
```

# animation - 来自pose的3DS MAX CAT-RIG绝对动画层

> ID：10975960
> 
> 赞同：0
> 
> 时间：2012-06-11T07:25:48.627
> 
> 标签：animation, layer, 3dsmax

我正在使用人类猫装备并设置一个绝对层（这是开始姿势）和一个本地层（这是姿势1和姿势2之间的动画）。

现在我想从最后一帧创建一个新的绝对层。如果我使用“新绝对层”->“通过关键帧创建姿势”-按钮（我忘记了名称）来执行此操作。它会以新图层的颜色显示我完整的 catrig，但是一旦我在时间轴中移动，它就会丢失到 0%，而且我没有再次达到 100% ???

文件： http: [//www.blackfreeze.de/sonstiges/14%20-%20Fin%20Scene%202.max](http://www.blackfreeze.de/sonstiges/14%20-%20Fin%20Scene%202.max)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:35:52.293

解决方案很简单:)

如果您选择 cat rig 基础，您可以保存和加载姿势文件。所以我必须保存所有混合层的姿势->创建一个新的绝对层->在那里加载保存的姿势。

我想要这个的原因：新绝对层之后的所有关键帧对其他层没有影响......所以这将是安全的:)

# file - 如何在某些选定点上使用 Diff 合并两个文件？

> ID：10975964
> 
> 赞同：0
> 
> 时间：2012-06-11T07:26:19.203
> 
> 标签：file, netbeans, ide, merge, file-diffs

我有一个大约 19500+ 行代码的文件。我正在做这方面的工作，也是我的朋友。**我们没有使用 SVN、Git 或其他……**现在我已经完成了我的更改……我如何在一些选定的突出显示点上使用 Diff（或者你建议我）将我的朋友文件合并到我的文件中。**我想忽略朋友的一些变化。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T23:19:10.843

您可以使用[KDiff3](http://kdiff3.sourceforge.net/)进行合并操作。默认情况下，它将接受你们双方所做的更改，但您可以交互地选择您想要的版本。如果你们一直在使用的共同基础是命名`original.c`的，你的版本`your.c`和你朋友的`friend.c`，那么命令

```
kdiff3 -o out.c original.c your.c friend.c 
```

将开始一个交互式合并，您可以在其中选择您想要或不想要的更改。

# javascript - 如何知道 facebook like 按钮的 ID

> ID：10975969
> 
> 赞同：0
> 
> 时间：2012-06-11T07:26:47.280
> 
> 标签：javascript, facebook

我正在创建一个网站，用户应该在使用 Facebook 喜欢按钮喜欢视频后下载视频。也就是说，如果有人喜欢 Facebook 上的帖子，而不是显示非活动的“你喜欢这个”按钮，它会显示带有视频 URL 的下载链接。我已经实现了类似按钮，但尚未实现下载按钮。任何人都知道我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:53:40.237

只需将 like button 包裹在`div`给定的元素中`id`，那么您将始终可以获得 like button。

# php - 在 javascript 中使用 smarty 数组

> ID：10975974
> 
> 赞同：0
> 
> 时间：2012-06-11T07:27:20.950
> 
> 标签：php, javascript, smarty

我正在尝试在 javascript 中使用 smarty。

这是我的 .php 和 .tpl 的完整代码：

.php

```
<?php

$_CRUMBS->Add("User false logs", "/users/user false logs/");

$ufl = $_DB->queryRaw("SELECT `user_id` ,`firstname`,`lastname` FROM `employees`");

while ($row = $ufl->next_assoc()) {
$results[] = $row;
}

$smarty->assign("ufl",$results);
$smarty->TDisplay("users/backend_users.tpl", "MDPI Backend | Backend Users", "general-content.tpl");

?> 
```

.tpl

```
<h1>Create Backend Users</h1>

<script>
$(function() {
    var availableTags = [
        {foreach from=$ufl item=uflItem}
            <tr>
                <td>{$uflItem['firstname']}</td>
            </tr>
    {/foreach}
    ];
    $( "#tags" ).autocomplete({
        source: availableTags
    });
});
</script>

<div class="demo">
<div class="ui-widget">
<label for="tags">Tags: </label>
<input id="tags">
</div>

</div><!-- End demo --> 
```

但是我那里有错误。我已经尝试过文字，但没有任何改变。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T07:36:23.587

当您使用`{`and时，您肯定会在这里遇到错误`}`，它们是 smarty 中的保留字符。将它们更改为`{ldelim}`和`{rdelim}`。此外，在 smarty 中取消引用数组有不同的语法：一个点。我不太确定你为什么要把这些`<tr>`东西放在`<td>`周围，但你知道得更多。您可能会遇到更多麻烦，因为您的自动完成选项中有换行符，所以使用 {strip} 来解决这个问题。

试试这个代码：

```
<script>
$(function() {ldelim}
    var availableTags = [
        {foreach from=$ufl item=uflItem name=uflloop}{strip}
            '<tr>
                <td>{$uflItem.firstname|escape:'quotes'}</td>
            </tr>'
            {if !$smarty.foreach.uflloop.last},{/if}
    {/strip}{/foreach}
    ];
    $( "#tags" ).autocomplete({ldelim}
        source: availableTags
    {rdelim});
{rdelim});
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T21:00:58.243

我建议使用 json_encode，如下所示：

```
$names = array();
foreach($result in $results)
    $names = $result['firstname']
$smarty->assign("names",json_encode($names)); 
```

然后在 js 中：

```
<script>
$(function(){
    var availableTags = {/literal}{$names}{literal}; //array is pulled out from smarty
    $("#tags" ).autocomplete({
        source: availableTags
    });
});

</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T07:35:29.510

```
<h1>Create Backend Users</h1>

<script>{literal}
$(function() {
    var availableTags = [
        {/literal}{foreach name=things from=$ufl item=uflItem}
            "{$uflItem['firstname']}"{if $smarty.foreach.things.last != true} ,{/if}
    {/foreach}{literal}
    ];
    $( "#tags" ).autocomplete({
        source: availableTags
    });
});{/literal}
</script>

<div class="demo">
<div class="ui-widget">
<label for="tags">Tags: </label>
<input id="tags">
</div> 
```

你必须在js的卷曲周围加上文字，否则smarty会死

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T08:33:44.007

你的代码看起来不错，我看到的唯一问题是没有运行它是在 javascript 中。尝试这样的事情：

```
<script>
$(function() {
    var availableTags = [
        {foreach from=$ufl key=index item=uflItem}
            '<tr>\
                <td>{$uflItem['firstname']}</td>\
            </tr>'{if isset($ufl[$index+1])},{/if}
    {/foreach}
    ];
    $( "#tags" ).autocomplete({
        source: availableTags
    });
});
</script> 
```

顺便说一句，由于 Smarty 3 **{literal}**标签不是必需的。

# windows-phone-7 - 如何在 Silverlight 和 Windows Phone 7 Game + Memory Menegment 中实现快速性能和优化？

> ID：10975978
> 
> 赞同：0
> 
> 时间：2012-06-11T07:27:34.117
> 
> 标签：windows-phone-7

我正在开发一款游戏，并且很想知道在 Windows 7 Phone + Silverlight 编码中获得最佳内存管理和性能优化的技巧。

我的比赛在比赛期间也得到了腿。有时游戏甚至会在响应之前暂停几秒钟。是和上面有关还是别的什么？

我正在让 Google Admob + Microsoft AD Sdk 工作，所以上面的问题是因为这个吗？

我在我的项目中使用了 gc.collect() 但它似乎无法正常工作。我有什么遗漏吗？

我搜索并试图找到可以指导我通过最佳内存和性能管理的官方链接或内容，但找不到？

如果有人有任何好的链接或想法，请与上述问题一起分享。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:47:32.253

我建议从了解[http://msdn.microsoft.com/en-us/library/ff967560(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/ff967560(v=vs.92).aspx)开始，然后使用[http://msdn.microsoft.com/en进行一些分析-us/library/hh202934(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202934(v=vs.92).aspx)

# c++ - 在 C++ 程序运行期间输入输入值 (./filename.out)

> ID：10975995
> 
> 赞同：0
> 
> 时间：2012-06-11T07:29:24.327
> 
> 标签：c++, g++

我想在 C++ 程序的运行时输入用户输入，即在 ./a.out 插图：./a.out input1 input2

C++ 程序是：

# 两个数字相加的程序

```
#include<iostream>
using namespace std; 
int main()
{
    int a, b;
    cin >> a >> b;
    int c = a + b;
    cout << "The sum of two numbers is : " << c << "\n";
} 
```

现在请帮助我在运行时输入 a 和 b 的值，同时在 linux 终端中运行其输出文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T07:45:21.080

试试这个（不要忘记包含适当的标题）：

```
int main(int argc, char** argv)
{
   if ( argc == 3 ) // command line has three arguments, the program, arg1 and arg2
   {
     int sum = atoi(argv[1]) + atoi(argv[2]);
     cout<<"The sum of two numbers is : "<< sum << endl;
   }
   else
   {
     cout << "wrong number of arguments, expected two numbers" << endl;
     cout << "yourprogramname {number1} {number2}" << endl;
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T14:25:18.617

对于许多简单的用途，[Boost Program.Options](http://www.boost.org/doc/libs/1_49_0/doc/html/program_options.html)提供了许多样板代码来处理命令行参数。从[教程](http://www.boost.org/doc/libs/1_49_0/doc/html/program_options/tutorial.html)：

```
// Declare the supported options.
po::options_description desc("Allowed options");
desc.add_options()
    ("help", "produce help message")
    ("compression", po::value<int>(), "set compression level")
;

po::variables_map vm;
po::store(po::parse_command_line(ac, av, desc), vm);
po::notify(vm);    

if (vm.count("help")) {
    cout << desc << "\n";
    return 1;
}

if (vm.count("compression")) {
    cout << "Compression level was set to " 
 << vm["compression"].as<int>() << ".\n";
} else {
    cout << "Compression level was not set.\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T07:43:03.583

```
#include <iostream>
#include <cstdlib>

int main(int argc, char *argv[]) {
    using namespace std;
    int a = atoi(argv[1]);
    int b = atoi(argv[2]);
    cout << a+b << endl;
    return 0;
} 
```

将采用命令行参数并打印它们。atoi 将字符串转换为 int。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-11T07:41:37.353

使用重定向：

```
./yourprogram < input1 
```

在 Linux 控制台和 MSDos 下都可以工作。

# android - Android：与其他应用程序共享数据的存储位置？

> ID：10975996
> 
> 赞同：2
> 
> 时间：2012-06-11T07:29:25.733
> 
> 标签：android, caching, storage

我目前熟悉应用程序拥有的存储位置和驻留在 SD 卡上的外部存储位置的概念。但我不确定在这种情况下该怎么做：

我正在编写其他应用程序也可以使用的某种库/开源类。这些类下载一些数据并且必须将它们缓存在公共场所。现在，当启动使用相同类的其他应用程序时，它首先检查所需的数据是否已经可用。如果是，则必须使用缓存的数据，它会在其他地方为自己下载数据并将它们存储在其他人也可以访问它们的同一公共位置。

我的问题：这种公共数据的最佳位置是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T07:33:20.390

外部存储适用于此，因为内部存储中的文件将是您的应用程序私有的。

您可以通过以下方式获取外部存储的路径`Environment.getExternalStorageDirectory();`

# html - 在 HTML 模板中使用 CSS 选择器

> ID：10975999
> 
> 赞同：4
> 
> 时间：2012-06-11T07:29:36.997
> 
> 标签：html, css, template-engine

在不小心在 HTML 模板中使用 CSS 选择器后，我开始想知道是否有模板语言或扩展允许这种语法，以及它是否有用。所以不要写这个：

```
<div id="mydiv">
  <div class="first column">1</div>
  <div class="second column">2</div>
</div> 
```

我们可以这样写：

```
<div#mydiv>
  <div.first.column>1</div>
  <div.second.column>2</div>
</div> 
```

这样的事情存在吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T07:33:03.067

也许您的意思是[Jade 之](http://jade-lang.com/)类的东西？

它是一个 HTML 预处理器。

以下：

```
doctype 5
html(lang="en")
  head
    title= pageTitle
    script(type='text/javascript')
      if (foo) {
         bar()
      }
  body
    h1 Jade - node template engine
    #container
      if youAreUsingJade
        p You are amazing
      else
        p Get on it! 
```

将被翻译成：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Jade</title>
    <script type="text/javascript">
      if (foo) {
        bar()
      }
    </script>
  </head>
  <body>
    <h1>Jade - node template engine</h1>
    <div id="container">
      <p>You are amazing</p>
    </div>
  </body>
</html> 
```

此外，这不是您要问的，但您可能喜欢[Zen Coding](https://code.google.com/p/zen-coding/)。它是一个高速编码 HTML 的插件。GIF 展示了它的作用：

![禅宗编码动画 gif](../Images/aebad198e5cdfd0d11f09a7f8a8fc4c7.png)

基本上是：

1.  编写伪html。
2.  点击快捷方式。
3.  获取完整的 HTML。
4.  ？？？
5.  利润！

你应该与你的编辑核实它是否支持这一点。FWIW，我在 VIM 中使用[它](http://www.vim.org/scripts/script.php?script_id=2981)，它很棒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T08:29:23.100

有一个工具使用类似（虽然不相同）的语法，称为[Zen Coding](http://code.google.com/p/zen-coding/)。在启用 Zen Coding 的编辑器中输入：

```
div#page>div.logo+ul#navigation>li*5>a 
```

...并将其扩展到：

```
<div id="page">
        <div class="logo"></div>
        <ul id="navigation">
                <li><a href=""></a></li>
                <li><a href=""></a></li>
                <li><a href=""></a></li>
                <li><a href=""></a></li>
                <li><a href=""></a></li>
        </ul>
</div> 
```

这与您描述的不同之处在于它不需要预处理器来运行模板，它只是一个编辑器助手来编写最终的 HTML。它可能适合您的需求，也可能不适合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T07:34:49.417

也许[haml](http://haml.info/)会满足您的需求？它看起来非常相似。